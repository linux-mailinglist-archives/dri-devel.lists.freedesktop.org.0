Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 253FA286A16
	for <lists+dri-devel@lfdr.de>; Wed,  7 Oct 2020 23:30:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A31646E9B8;
	Wed,  7 Oct 2020 21:30:14 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ot1-x341.google.com (mail-ot1-x341.google.com
 [IPv6:2607:f8b0:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 85FD16E9B8
 for <dri-devel@lists.freedesktop.org>; Wed,  7 Oct 2020 21:30:13 +0000 (UTC)
Received: by mail-ot1-x341.google.com with SMTP id t15so3687490otk.0
 for <dri-devel@lists.freedesktop.org>; Wed, 07 Oct 2020 14:30:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=nNtozmj/MGUZLHZxI3A6qXOhVAeMPho+2jjUlqwzPiY=;
 b=BaAFboFhzjSDkIsRiKkVY5HnY80F0qFikzkwGLzbiZiDPe/NeBFe6zpt+tRZBXwSlf
 cldboSnNlcSz1Qnd+/D1yNqcLjwz5qLQP01nnTJ9te1SLWuuX0nGjEu12aT61tF+abrF
 VMjcmWsESAMRsIG40QQOk22zLTky3pJD0lB9E=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=nNtozmj/MGUZLHZxI3A6qXOhVAeMPho+2jjUlqwzPiY=;
 b=dzcj+FczfOtzXDzFh7xJ700rDxUW9HDek1K8DrFemBaU3B3/kVUjqXwD0FDWhKsr72
 k80MQ8YDNoNVKIyhfgyWYa2QfSXUmacmapgBk6Jh2j1qcvF9tee/np4Stg/XDff5G7MB
 Lf1X2oQBsKnb9Ji5PLWTr9nJsU2NxY5IXUq/BUoI9PQFmV3nCj/y/pG4F2gVdTZOBTnG
 iE4JnEu3/eDCyP2qGQ9jKtKEfMxZ4Y9tpPDH9UK0VIEn1O4b+gsIBLl/ynvwZL0WsD8Q
 phuUWPeg+FSDIUU94pBLQaVgwX6w9OnYYDKYM4Q1zFz3WYN96ttZxhs3OE5Ur/aTjgbc
 3x2g==
X-Gm-Message-State: AOAM533rslQfmnU36RzK+nojETdZdzeO2qpOghg3pOo9saOko9Wx76Yt
 lE5ioiUAUdiATIRWQGhAxzX+vBjmwjNzkTB0KUA+eg==
X-Google-Smtp-Source: ABdhPJzDIRAj53qXn+wCstFj7fFAXvpqHS6peJb8d7VCpx3oiEDiFkz29m0ZVMR9QW+s4BR0BiMsr7SeQunifX3iVl4=
X-Received: by 2002:a05:6830:1e56:: with SMTP id
 e22mr2939594otj.303.1602106212518; 
 Wed, 07 Oct 2020 14:30:12 -0700 (PDT)
MIME-Version: 1.0
References: <20201007164426.1812530-1-daniel.vetter@ffwll.ch>
 <20201007164426.1812530-6-daniel.vetter@ffwll.ch>
 <fc0ac3fb-2758-bef1-76b4-8ac2449f5743@nvidia.com>
In-Reply-To: <fc0ac3fb-2758-bef1-76b4-8ac2449f5743@nvidia.com>
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Wed, 7 Oct 2020 23:30:01 +0200
Message-ID: <CAKMK7uF7QBksDRsWhpuv-QhM3CN3+Gzg0-o-O-3rCsMWtr48xQ@mail.gmail.com>
Subject: Re: [PATCH 05/13] mm/frame-vector: Use FOLL_LONGTERM
To: John Hubbard <jhubbard@nvidia.com>, Dan Williams <dan.j.williams@intel.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?B?SsOpcsO0bWUgR2xpc3Nl?= <jglisse@redhat.com>,
 linux-s390@vger.kernel.org,
 linux-samsung-soc <linux-samsung-soc@vger.kernel.org>, Jan Kara <jack@suse.cz>,
 Pawel Osciak <pawel@osciak.com>, kvm@vger.kernel.org,
 Jason Gunthorpe <jgg@ziepe.ca>, Mauro Carvalho Chehab <mchehab@kernel.org>,
 LKML <linux-kernel@vger.kernel.org>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 Tomasz Figa <tfiga@chromium.org>, Linux MM <linux-mm@kvack.org>,
 Kyungmin Park <kyungmin.park@samsung.com>,
 Daniel Vetter <daniel.vetter@intel.com>,
 Andrew Morton <akpm@linux-foundation.org>,
 Marek Szyprowski <m.szyprowski@samsung.com>,
 Linux ARM <linux-arm-kernel@lists.infradead.org>,
 "open list:DMA BUFFER SHARING FRAMEWORK" <linux-media@vger.kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBPY3QgNywgMjAyMCBhdCAxMToxMyBQTSBKb2huIEh1YmJhcmQgPGpodWJiYXJkQG52
aWRpYS5jb20+IHdyb3RlOgo+Cj4gT24gMTAvNy8yMCA5OjQ0IEFNLCBEYW5pZWwgVmV0dGVyIHdy
b3RlOgo+ID4gVGhpcyBpcyB1c2VkIGJ5IG1lZGlhL3ZpZGVidWYyIGZvciBwZXJzaXN0ZW50IGRt
YSBtYXBwaW5ncywgbm90IGp1c3QKPiA+IGZvciBhIHNpbmdsZSBkbWEgb3BlcmF0aW9uIGFuZCB0
aGVuIGZyZWVkIGFnYWluLCBzbyBuZWVkcwo+ID4gRk9MTF9MT05HVEVSTS4KPiA+Cj4gPiBVbmZv
cnR1bmF0ZWx5IGN1cnJlbnQgcHVwX2xvY2tlZCBkb2Vzbid0IHN1cHBvcnQgRk9MTF9MT05HVEVS
TSBkdWUgdG8KPiA+IGxvY2tpbmcgaXNzdWVzLiBSZXdvcmsgdGhlIGNvZGUgdG8gcHVsbCB0aGUg
cHVwIHBhdGggb3V0IGZyb20gdGhlCj4gPiBtbWFwX3NlbSBjcml0aWNhbCBzZWN0aW9uIGFzIHN1
Z2dlc3RlZCBieSBKYXNvbi4KPiA+Cj4gPiBTaWduZWQtb2ZmLWJ5OiBEYW5pZWwgVmV0dGVyIDxk
YW5pZWwudmV0dGVyQGludGVsLmNvbT4KPiA+IENjOiBKYXNvbiBHdW50aG9ycGUgPGpnZ0B6aWVw
ZS5jYT4KPiA+IENjOiBQYXdlbCBPc2NpYWsgPHBhd2VsQG9zY2lhay5jb20+Cj4gPiBDYzogTWFy
ZWsgU3p5cHJvd3NraSA8bS5zenlwcm93c2tpQHNhbXN1bmcuY29tPgo+ID4gQ2M6IEt5dW5nbWlu
IFBhcmsgPGt5dW5nbWluLnBhcmtAc2Ftc3VuZy5jb20+Cj4gPiBDYzogVG9tYXN6IEZpZ2EgPHRm
aWdhQGNocm9taXVtLm9yZz4KPiA+IENjOiBNYXVybyBDYXJ2YWxobyBDaGVoYWIgPG1jaGVoYWJA
a2VybmVsLm9yZz4KPiA+IENjOiBBbmRyZXcgTW9ydG9uIDxha3BtQGxpbnV4LWZvdW5kYXRpb24u
b3JnPgo+ID4gQ2M6IEpvaG4gSHViYmFyZCA8amh1YmJhcmRAbnZpZGlhLmNvbT4KPiA+IENjOiBK
w6lyw7RtZSBHbGlzc2UgPGpnbGlzc2VAcmVkaGF0LmNvbT4KPiA+IENjOiBKYW4gS2FyYSA8amFj
a0BzdXNlLmN6Pgo+ID4gQ2M6IERhbiBXaWxsaWFtcyA8ZGFuLmoud2lsbGlhbXNAaW50ZWwuY29t
Pgo+ID4gQ2M6IGxpbnV4LW1tQGt2YWNrLm9yZwo+ID4gQ2M6IGxpbnV4LWFybS1rZXJuZWxAbGlz
dHMuaW5mcmFkZWFkLm9yZwo+ID4gQ2M6IGxpbnV4LXNhbXN1bmctc29jQHZnZXIua2VybmVsLm9y
Zwo+ID4gQ2M6IGxpbnV4LW1lZGlhQHZnZXIua2VybmVsLm9yZwo+ID4gLS0tCj4gPiAgIG1tL2Zy
YW1lX3ZlY3Rvci5jIHwgMzYgKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4g
PiAgIDEgZmlsZSBjaGFuZ2VkLCAxMSBpbnNlcnRpb25zKCspLCAyNSBkZWxldGlvbnMoLSkKPiA+
Cj4gPiBkaWZmIC0tZ2l0IGEvbW0vZnJhbWVfdmVjdG9yLmMgYi9tbS9mcmFtZV92ZWN0b3IuYwo+
ID4gaW5kZXggMTBmODJkNTY0M2I2Li4zOWRiNTIwYTUxZGMgMTAwNjQ0Cj4gPiAtLS0gYS9tbS9m
cmFtZV92ZWN0b3IuYwo+ID4gKysrIGIvbW0vZnJhbWVfdmVjdG9yLmMKPiA+IEBAIC0zOCw3ICsz
OCw2IEBAIGludCBnZXRfdmFkZHJfZnJhbWVzKHVuc2lnbmVkIGxvbmcgc3RhcnQsIHVuc2lnbmVk
IGludCBucl9mcmFtZXMsCj4gPiAgICAgICBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYTsKPiA+
ICAgICAgIGludCByZXQgPSAwOwo+ID4gICAgICAgaW50IGVycjsKPiA+IC0gICAgIGludCBsb2Nr
ZWQ7Cj4gPgo+ID4gICAgICAgaWYgKG5yX2ZyYW1lcyA9PSAwKQo+ID4gICAgICAgICAgICAgICBy
ZXR1cm4gMDsKPiA+IEBAIC00OCwzNSArNDcsMjIgQEAgaW50IGdldF92YWRkcl9mcmFtZXModW5z
aWduZWQgbG9uZyBzdGFydCwgdW5zaWduZWQgaW50IG5yX2ZyYW1lcywKPiA+Cj4gPiAgICAgICBz
dGFydCA9IHVudGFnZ2VkX2FkZHIoc3RhcnQpOwo+ID4KPiA+ICsgICAgIHJldCA9IHBpbl91c2Vy
X3BhZ2VzX2Zhc3Qoc3RhcnQsIG5yX2ZyYW1lcywKPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgRk9MTF9GT1JDRSB8IEZPTExfV1JJVEUgfCBGT0xMX0xPTkdURVJNLAo+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RydWN0IHBhZ2UgKiopKHZlYy0+cHRycykp
Owo+ID4gKyAgICAgaWYgKHJldCA+IDApIHsKPiA+ICsgICAgICAgICAgICAgdmVjLT5nb3RfcmVm
ID0gdHJ1ZTsKPiA+ICsgICAgICAgICAgICAgdmVjLT5pc19wZm5zID0gZmFsc2U7Cj4gPiArICAg
ICAgICAgICAgIGdvdG8gb3V0X3VubG9ja2VkOwo+ID4gKyAgICAgfQo+Cj4gVGhpcyBwYXJ0IGxv
b2tzIGdvb2QsIGFuZCBjaGFuZ2luZyB0byBfZmFzdCBpcyBhIHBvdGVudGlhbCBwZXJmb3JtYW5j
ZSBpbXByb3ZlbWVudCwKPiB0b28uCj4KPiA+ICsKPiA+ICAgICAgIG1tYXBfcmVhZF9sb2NrKG1t
KTsKPiA+IC0gICAgIGxvY2tlZCA9IDE7Cj4gPiAgICAgICB2bWEgPSBmaW5kX3ZtYV9pbnRlcnNl
Y3Rpb24obW0sIHN0YXJ0LCBzdGFydCArIDEpOwo+ID4gICAgICAgaWYgKCF2bWEpIHsKPiA+ICAg
ICAgICAgICAgICAgcmV0ID0gLUVGQVVMVDsKPiA+ICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4g
PiAgICAgICB9Cj4gPgo+ID4gLSAgICAgLyoKPiA+IC0gICAgICAqIFdoaWxlIGdldF92YWRkcl9m
cmFtZXMoKSBjb3VsZCBiZSB1c2VkIGZvciB0cmFuc2llbnQgKGtlcm5lbAo+ID4gLSAgICAgICog
Y29udHJvbGxlZCBsaWZldGltZSkgcGlubmluZyBvZiBtZW1vcnkgcGFnZXMgYWxsIGN1cnJlbnQK
PiA+IC0gICAgICAqIHVzZXJzIGVzdGFibGlzaCBsb25nIHRlcm0gKHVzZXJzcGFjZSBjb250cm9s
bGVkIGxpZmV0aW1lKQo+ID4gLSAgICAgICogcGFnZSBwaW5uaW5nLiBUcmVhdCBnZXRfdmFkZHJf
ZnJhbWVzKCkgbGlrZQo+ID4gLSAgICAgICogZ2V0X3VzZXJfcGFnZXNfbG9uZ3Rlcm0oKSBhbmQg
ZGlzYWxsb3cgaXQgZm9yIGZpbGVzeXN0ZW0tZGF4Cj4gPiAtICAgICAgKiBtYXBwaW5ncy4KPiA+
IC0gICAgICAqLwo+ID4gLSAgICAgaWYgKHZtYV9pc19mc2RheCh2bWEpKSB7Cj4gPiAtICAgICAg
ICAgICAgIHJldCA9IC1FT1BOT1RTVVBQOwo+ID4gLSAgICAgICAgICAgICBnb3RvIG91dDsKPiA+
IC0gICAgIH0KPgo+IEFyZSB5b3Ugc3VyZSB3ZSBkb24ndCBuZWVkIHRvIGNoZWNrIHZtYV9pc19m
c2RheCgpIGFueW1vcmU/CgpTaW5jZSBGT0xMX0xPTkdURVJNIGNoZWNrcyBmb3IgdGhpcyBhbmQg
Y2FuIG9ubHkgcmV0dXJuIHN0cnVjdCBwYWdlCmJhY2tlZCBtZW1vcnksIGFuZCBleHBsaWNpdGx5
IGV4Y2x1ZGVzIFZNX0lPIHwgVk1fUEZOTUFQLCB3YXMgYXNzdW1pbmcKdGhpcyBpcyBub3QgbmVl
ZGVkIGZvciBmb2xsb3dfcGZuLiBBbmQgdGhlIGdldF91c2VyX3BhZ2VzX2xvY2tlZCB0aGlzCnVz
ZWQgYmFjayB0aGVuIGRpZG4ndCBoYXZlIHRoZSBzYW1lIGNoZWNrLCBoZW5jZSB3aHkgaXQgd2Fz
IGFkZGVkIChhbmQKRk9MTF9MT05HVEVSTSBzdGlsbCBkb2Vzbid0IHdvcmsgZm9yIHRoZSBfbG9j
a2VkIHZlcnNpb25zLCBhcyB5b3UKcG9pbnRlZCBvdXQgb24gdGhlIGxhc3Qgcm91bmQgb2YgdGhp
cyBkaXNjdXNzaW9uKS4KCkJ1dCBub3cgdGhhdCB5b3UncmUgYXNraW5nLCBJIGhhdmUgbm8gaWRl
YSB3aGV0aGVyIGZzZGF4IHZtYSBjYW4gYWxzbwpiZSBvZiBWTV9JTyB8IFZNX1BGTk1BUCB0eXBl
LiBJJ20gbm90IHNlZWluZyB0aGF0IHNldCBhbnl3aGVyZSBpbgpmcy9kYXguYywgYnV0IHRoYXQg
c2F5cyBub3RoaW5nIDotKQoKRGFuLCB5b3UgYWRkZWQgdGhpcyBjaGVjayBvcmlnaW5hbGx5LCBk
byB3ZSBuZWVkIGl0IGZvciBWTV9TUEVDSUFMIHZtYXMgdG9vPwoKVGhhbmtzLCBEYW5pZWwKCj4K
PiA+IC0KPiA+IC0gICAgIGlmICghKHZtYS0+dm1fZmxhZ3MgJiAoVk1fSU8gfCBWTV9QRk5NQVAp
KSkgewo+ID4gLSAgICAgICAgICAgICB2ZWMtPmdvdF9yZWYgPSB0cnVlOwo+ID4gLSAgICAgICAg
ICAgICB2ZWMtPmlzX3BmbnMgPSBmYWxzZTsKPiA+IC0gICAgICAgICAgICAgcmV0ID0gcGluX3Vz
ZXJfcGFnZXNfbG9ja2VkKHN0YXJ0LCBucl9mcmFtZXMsCj4gPiAtICAgICAgICAgICAgICAgICAg
ICAgZ3VwX2ZsYWdzLCAoc3RydWN0IHBhZ2UgKiopKHZlYy0+cHRycyksICZsb2NrZWQpOwo+ID4g
LSAgICAgICAgICAgICBnb3RvIG91dDsKPiA+IC0gICAgIH0KPiA+IC0KPiA+ICAgICAgIHZlYy0+
Z290X3JlZiA9IGZhbHNlOwo+ID4gICAgICAgdmVjLT5pc19wZm5zID0gdHJ1ZTsKPiA+ICAgICAg
IGRvIHsKPiA+IEBAIC0xMDEsOCArODcsOCBAQCBpbnQgZ2V0X3ZhZGRyX2ZyYW1lcyh1bnNpZ25l
ZCBsb25nIHN0YXJ0LCB1bnNpZ25lZCBpbnQgbnJfZnJhbWVzLAo+ID4gICAgICAgICAgICAgICB2
bWEgPSBmaW5kX3ZtYV9pbnRlcnNlY3Rpb24obW0sIHN0YXJ0LCBzdGFydCArIDEpOwo+ID4gICAg
ICAgfSB3aGlsZSAodm1hICYmIHZtYS0+dm1fZmxhZ3MgJiAoVk1fSU8gfCBWTV9QRk5NQVApKTsK
PiA+ICAgb3V0Ogo+ID4gLSAgICAgaWYgKGxvY2tlZCkKPiA+IC0gICAgICAgICAgICAgbW1hcF9y
ZWFkX3VubG9jayhtbSk7Cj4gPiArICAgICBtbWFwX3JlYWRfdW5sb2NrKG1tKTsKPiA+ICtvdXRf
dW5sb2NrZWQ6Cj4gPiAgICAgICBpZiAoIXJldCkKPiA+ICAgICAgICAgICAgICAgcmV0ID0gLUVG
QVVMVDsKPiA+ICAgICAgIGlmIChyZXQgPiAwKQo+ID4KPgo+IEFsbCBvZiB0aGUgZXJyb3IgaGFu
ZGxpbmcgc3RpbGwgbG9va3MgYWNjdXJhdGUgdGhlcmUuCj4KPiB0aGFua3MsCj4gLS0KPiBKb2hu
IEh1YmJhcmQKPiBOVklESUEKCgoKLS0gCkRhbmllbCBWZXR0ZXIKU29mdHdhcmUgRW5naW5lZXIs
IEludGVsIENvcnBvcmF0aW9uCmh0dHA6Ly9ibG9nLmZmd2xsLmNoCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJp
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
