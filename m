Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 352338654C
	for <lists+dri-devel@lfdr.de>; Thu,  8 Aug 2019 17:12:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BDEF96E869;
	Thu,  8 Aug 2019 15:12:07 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 73A396E865
 for <dri-devel@lists.freedesktop.org>; Thu,  8 Aug 2019 15:12:05 +0000 (UTC)
Received: from localhost.localdomain (unknown
 [IPv6:2a01:e0a:2c:6930:5cf4:84a1:2763:fe0d])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: bbrezillon)
 by bhuna.collabora.co.uk (Postfix) with ESMTPSA id 5B95628CAA7;
 Thu,  8 Aug 2019 16:12:02 +0100 (BST)
From: Boris Brezillon <boris.brezillon@collabora.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH RFC 09/19] drm/bridge: Make the bridge chain a double-linked
 list
Date: Thu,  8 Aug 2019 17:11:40 +0200
Message-Id: <20190808151150.16336-10-boris.brezillon@collabora.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190808151150.16336-1-boris.brezillon@collabora.com>
References: <20190808151150.16336-1-boris.brezillon@collabora.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jernej Skrabec <jernej.skrabec@siol.net>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Neil Armstrong <narmstrong@baylibre.com>, Jonas Karlman <jonas@kwiboo.se>,
 Seung-Woo Kim <sw0312.kim@samsung.com>,
 Kyungmin Park <kyungmin.park@samsung.com>,
 Thierry Reding <thierry.reding@gmail.com>, Chris Healy <Chris.Healy@zii.aero>,
 Boris Brezillon <boris.brezillon@collabora.com>, kernel@collabora.com,
 Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U28gZWFjaCBlbGVtZW50IGluIHRoZSBjaGFpbiBjYW4gZWFzaWx5IGFjY2VzcyBpdHMgcHJlZGVj
ZXNzb3IuIFRoaXMKd2lsbCBiZSBuZWVkZWQgZm9yIHRoZSB3b3JrIHdlIGFyZSBkb2luZyBvbiBi
dXMgZm9ybWF0IG5lZ29jaWF0aW9uCmJldHdlZW4gZWxlbWVudHMgb2YgdGhlIGJyaWRnZSBjaGFp
bi4KClNpZ25lZC1vZmYtYnk6IEJvcmlzIEJyZXppbGxvbiA8Ym9yaXMuYnJlemlsbG9uQGNvbGxh
Ym9yYS5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2RybV9icmlkZ2UuYyAgfCAyNzggKysrKysr
KysrKysrKy0tLS0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2RybV9lbmNvZGVy
LmMgfCAgMTUgKy0KIGluY2x1ZGUvZHJtL2RybV9icmlkZ2UuaCAgICAgIHwgICA0ICstCiBpbmNs
dWRlL2RybS9kcm1fZW5jb2Rlci5oICAgICB8ICAgNCArLQogNCBmaWxlcyBjaGFuZ2VkLCAxMTYg
aW5zZXJ0aW9ucygrKSwgMTg1IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9kcm1fYnJpZGdlLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2JyaWRnZS5jCmluZGV4IGI5
NmJiYmEwNWJhOS4uZWQyNDEwZjQ5NTgxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJt
X2JyaWRnZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYnJpZGdlLmMKQEAgLTU1LDcgKzU1
LDcgQEAKICAqIGp1c3QgcHJvdmlkZSBhZGRpdGlvbmFsIGhvb2tzIHRvIGdldCB0aGUgZGVzaXJl
ZCBvdXRwdXQgYXQgdGhlIGVuZCBvZiB0aGUKICAqIGVuY29kZXIgY2hhaW4uCiAgKgotICogQnJp
ZGdlcyBjYW4gYWxzbyBiZSBjaGFpbmVkIHVwIHVzaW5nIHRoZSAmZHJtX2JyaWRnZS5uZXh0IHBv
aW50ZXIuCisgKiBCcmlkZ2VzIGNhbiBhbHNvIGJlIGNoYWluZWQgdXAgdXNpbmcgdGhlICZkcm1f
YnJpZGdlLmNoYWluX25vZGUgZmllbGQuCiAgKgogICogQm90aCBsZWdhY3kgQ1JUQyBoZWxwZXJz
IGFuZCB0aGUgbmV3IGF0b21pYyBtb2Rlc2V0IGhlbHBlcnMgc3VwcG9ydCBicmlkZ2VzLgogICov
CkBAIC0xMTQsNiArMTE0LDcgQEAgRVhQT1JUX1NZTUJPTChkcm1fYnJpZGdlX3JlbW92ZSk7CiBp
bnQgZHJtX2JyaWRnZV9hdHRhY2goc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyLCBzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlLAogCQkgICAgICBzdHJ1Y3QgZHJtX2JyaWRnZSAqcHJldmlvdXMp
CiB7CisJTElTVF9IRUFEKHRtcF9saXN0KTsKIAlpbnQgcmV0OwogCiAJaWYgKCFlbmNvZGVyIHx8
ICFicmlkZ2UpCkBAIC0xMjcsNiArMTI4LDcgQEAgaW50IGRybV9icmlkZ2VfYXR0YWNoKHN0cnVj
dCBkcm1fZW5jb2RlciAqZW5jb2Rlciwgc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKIAogCWJy
aWRnZS0+ZGV2ID0gZW5jb2Rlci0+ZGV2OwogCWJyaWRnZS0+ZW5jb2RlciA9IGVuY29kZXI7CisJ
bGlzdF9hZGRfdGFpbCgmYnJpZGdlLT5jaGFpbl9ub2RlLCAmdG1wX2xpc3QpOwogCiAJaWYgKGJy
aWRnZS0+ZnVuY3MtPmF0dGFjaCkgewogCQlyZXQgPSBicmlkZ2UtPmZ1bmNzLT5hdHRhY2goYnJp
ZGdlKTsKQEAgLTEzOCw5ICsxNDAsOSBAQCBpbnQgZHJtX2JyaWRnZV9hdHRhY2goc3RydWN0IGRy
bV9lbmNvZGVyICplbmNvZGVyLCBzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCX0KIAogCWlm
IChwcmV2aW91cykKLQkJcHJldmlvdXMtPm5leHQgPSBicmlkZ2U7CisJCWxpc3Rfc3BsaWNlKCZ0
bXBfbGlzdCwgJnByZXZpb3VzLT5jaGFpbl9ub2RlKTsKIAllbHNlCi0JCWVuY29kZXItPmJyaWRn
ZSA9IGJyaWRnZTsKKwkJbGlzdF9zcGxpY2UoJnRtcF9saXN0LCAmZW5jb2Rlci0+YnJpZGdlX2No
YWluKTsKIAogCXJldHVybiAwOwogfQpAQCAtMTU3LDYgKzE1OSw3IEBAIHZvaWQgZHJtX2JyaWRn
ZV9kZXRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIAlpZiAoYnJpZGdlLT5mdW5jcy0+
ZGV0YWNoKQogCQlicmlkZ2UtPmZ1bmNzLT5kZXRhY2goYnJpZGdlKTsKIAorCWxpc3RfZGVsKCZi
cmlkZ2UtPmNoYWluX25vZGUpOwogCWJyaWRnZS0+ZGV2ID0gTlVMTDsKIH0KIApAQCAtMTcxLDcg
KzE3NCw4IEBAIHZvaWQgZHJtX2JyaWRnZV9kZXRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSkKIHN0cnVjdCBkcm1fYnJpZGdlICoKIGRybV9icmlkZ2VfY2hhaW5fZ2V0X2ZpcnN0X2JyaWRn
ZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCiB7Ci0JcmV0dXJuIGVuY29kZXItPmJyaWRn
ZTsKKwlyZXR1cm4gbGlzdF9maXJzdF9lbnRyeV9vcl9udWxsKCZlbmNvZGVyLT5icmlkZ2VfY2hh
aW4sCisJCQkJCXN0cnVjdCBkcm1fYnJpZGdlLCBjaGFpbl9ub2RlKTsKIH0KIEVYUE9SVF9TWU1C
T0woZHJtX2JyaWRnZV9jaGFpbl9nZXRfZmlyc3RfYnJpZGdlKTsKIApAQCAtMTg2LDEyICsxOTAs
MTEgQEAgRVhQT1JUX1NZTUJPTChkcm1fYnJpZGdlX2NoYWluX2dldF9maXJzdF9icmlkZ2UpOwog
c3RydWN0IGRybV9icmlkZ2UgKgogZHJtX2JyaWRnZV9jaGFpbl9nZXRfbGFzdF9icmlkZ2Uoc3Ry
dWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQogewotCXN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2Ug
PSBlbmNvZGVyLT5icmlkZ2U7CisJaWYgKGxpc3RfZW1wdHkoJmVuY29kZXItPmJyaWRnZV9jaGFp
bikpCisJCXJldHVybiBOVUxMOwogCi0Jd2hpbGUoYnJpZGdlICYmIGJyaWRnZS0+bmV4dCkKLQkJ
YnJpZGdlID0gYnJpZGdlLT5uZXh0OwotCi0JcmV0dXJuIGJyaWRnZTsKKwlyZXR1cm4gbGlzdF9s
YXN0X2VudHJ5KCZlbmNvZGVyLT5icmlkZ2VfY2hhaW4sIHN0cnVjdCBkcm1fYnJpZGdlLAorCQkJ
ICAgICAgIGNoYWluX25vZGUpOwogfQogRVhQT1JUX1NZTUJPTChkcm1fYnJpZGdlX2NoYWluX2dl
dF9sYXN0X2JyaWRnZSk7CiAKQEAgLTIwNSwxMCArMjA4LDExIEBAIEVYUE9SVF9TWU1CT0woZHJt
X2JyaWRnZV9jaGFpbl9nZXRfbGFzdF9icmlkZ2UpOwogc3RydWN0IGRybV9icmlkZ2UgKgogZHJt
X2JyaWRnZV9jaGFpbl9nZXRfbmV4dF9icmlkZ2Uoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkK
IHsKLQlpZiAoIWJyaWRnZSB8fCAhYnJpZGdlLT5lbmNvZGVyKQotCQlyZXR1cm4gTlVMTDsKKwlp
ZiAoIWJyaWRnZSB8fCAhYnJpZGdlLT5lbmNvZGVyIHx8CisJICAgIGxpc3RfaXNfbGFzdCgmYnJp
ZGdlLT5lbmNvZGVyLT5icmlkZ2VfY2hhaW4sICZicmlkZ2UtPmNoYWluX25vZGUpKQorICAgICAg
ICAgICAgICAgIHJldHVybiBOVUxMOwogCi0JcmV0dXJuIGJyaWRnZS0+bmV4dDsKKwlyZXR1cm4g
bGlzdF9uZXh0X2VudHJ5KGJyaWRnZSwgY2hhaW5fbm9kZSk7CiB9CiBFWFBPUlRfU1lNQk9MKGRy
bV9icmlkZ2VfY2hhaW5fZ2V0X25leHRfYnJpZGdlKTsKIApAQCAtMjIzLDk4ICsyMjcsNiBAQCBF
WFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfY2hhaW5fZ2V0X25leHRfYnJpZGdlKTsKICAqIEZvciBk
ZXRhaWxlZCBzcGVjaWZpY2F0aW9uIG9mIHRoZSBicmlkZ2UgY2FsbGJhY2tzIHNlZSAmZHJtX2Jy
aWRnZV9mdW5jcy4KICAqLwogCi1zdGF0aWMgYm9vbCBkcm1fYnJpZGdlX21vZGVfZml4dXAoc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJCQkgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlICptb2RlLAotCQkJCSAgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUp
Ci17Ci0JYm9vbCByZXQgPSB0cnVlOwotCi0JaWYgKCFicmlkZ2UpCi0JCXJldHVybiB0cnVlOwot
Ci0JaWYgKGJyaWRnZS0+ZnVuY3MtPm1vZGVfZml4dXApCi0JCXJldCA9IGJyaWRnZS0+ZnVuY3Mt
Pm1vZGVfZml4dXAoYnJpZGdlLCBtb2RlLCBhZGp1c3RlZF9tb2RlKTsKLQotCXJldCA9IHJldCAm
JiBkcm1fYnJpZGdlX21vZGVfZml4dXAoYnJpZGdlLT5uZXh0LCBtb2RlLCBhZGp1c3RlZF9tb2Rl
KTsKLQotCXJldHVybiByZXQ7Ci19Ci0KLXN0YXRpYyBlbnVtIGRybV9tb2RlX3N0YXR1cwotZHJt
X2JyaWRnZV9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCi0JCSAgICAgIGNv
bnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKQotewotCWVudW0gZHJtX21vZGVfc3Rh
dHVzIHJldCA9IE1PREVfT0s7Ci0KLQlpZiAoIWJyaWRnZSkKLQkJcmV0dXJuIHJldDsKLQotCWlm
IChicmlkZ2UtPmZ1bmNzLT5tb2RlX3ZhbGlkKQotCQlyZXQgPSBicmlkZ2UtPmZ1bmNzLT5tb2Rl
X3ZhbGlkKGJyaWRnZSwgbW9kZSk7Ci0KLQlpZiAocmV0ICE9IE1PREVfT0spCi0JCXJldHVybiBy
ZXQ7Ci0KLQlyZXR1cm4gZHJtX2JyaWRnZV9tb2RlX3ZhbGlkKGJyaWRnZS0+bmV4dCwgbW9kZSk7
Ci19Ci0KLXN0YXRpYyB2b2lkIGRybV9icmlkZ2VfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAq
YnJpZGdlKQotewotCWlmICghYnJpZGdlKQotCQlyZXR1cm47Ci0KLQlkcm1fYnJpZGdlX2Rpc2Fi
bGUoYnJpZGdlLT5uZXh0KTsKLQotCWlmIChicmlkZ2UtPmZ1bmNzLT5kaXNhYmxlKQotCQlicmlk
Z2UtPmZ1bmNzLT5kaXNhYmxlKGJyaWRnZSk7Ci19Ci0KLXN0YXRpYyB2b2lkIGRybV9icmlkZ2Vf
cG9zdF9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCi17Ci0JaWYgKCFicmlkZ2Up
Ci0JCXJldHVybjsKLQotCWlmIChicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rpc2FibGUpCi0JCWJyaWRn
ZS0+ZnVuY3MtPnBvc3RfZGlzYWJsZShicmlkZ2UpOwotCi0JZHJtX2JyaWRnZV9wb3N0X2Rpc2Fi
bGUoYnJpZGdlLT5uZXh0KTsKLX0KLQotc3RhdGljIHZvaWQgZHJtX2JyaWRnZV9tb2RlX3NldChz
dHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlICptb2RlLAotCQkJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9t
b2RlKQotewotCWlmICghYnJpZGdlKQotCQlyZXR1cm47Ci0KLQlpZiAoYnJpZGdlLT5mdW5jcy0+
bW9kZV9zZXQpCi0JCWJyaWRnZS0+ZnVuY3MtPm1vZGVfc2V0KGJyaWRnZSwgbW9kZSwgYWRqdXN0
ZWRfbW9kZSk7Ci0KLQlkcm1fYnJpZGdlX21vZGVfc2V0KGJyaWRnZS0+bmV4dCwgbW9kZSwgYWRq
dXN0ZWRfbW9kZSk7Ci19Ci0KLXN0YXRpYyB2b2lkIGRybV9icmlkZ2VfcHJlX2VuYWJsZShzdHJ1
Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQotewotCWlmICghYnJpZGdlKQotCQlyZXR1cm47Ci0KLQlk
cm1fYnJpZGdlX3ByZV9lbmFibGUoYnJpZGdlLT5uZXh0KTsKLQotCWlmIChicmlkZ2UtPmZ1bmNz
LT5wcmVfZW5hYmxlKQotCQlicmlkZ2UtPmZ1bmNzLT5wcmVfZW5hYmxlKGJyaWRnZSk7Ci19Ci0K
LXN0YXRpYyB2b2lkIGRybV9icmlkZ2VfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2Up
Ci17Ci0JaWYgKCFicmlkZ2UpCi0JCXJldHVybjsKLQotCWlmIChicmlkZ2UtPmZ1bmNzLT5lbmFi
bGUpCi0JCWJyaWRnZS0+ZnVuY3MtPmVuYWJsZShicmlkZ2UpOwotCi0JZHJtX2JyaWRnZV9lbmFi
bGUoYnJpZGdlLT5uZXh0KTsKLX0KLQogLyoqCiAgKiBkcm1fYnJpZGdlX2NoYWluX21vZGVfZml4
dXAgLSBmaXh1cCBwcm9wb3NlZCBtb2RlIGZvciBhbGwgYnJpZGdlcyBpbiB0aGUKICAqCQkJCSBl
bmNvZGVyIGNoYWluCkBAIC0zMzIsNyArMjQ0LDE3IEBAIGJvb2wgZHJtX2JyaWRnZV9jaGFpbl9t
b2RlX2ZpeHVwKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwKIAkJCQkgY29uc3Qgc3RydWN0
IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCiAJCQkJIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICph
ZGp1c3RlZF9tb2RlKQogewotCXJldHVybiBkcm1fYnJpZGdlX21vZGVfZml4dXAoZW5jb2Rlci0+
YnJpZGdlLCBtb2RlLCBhZGp1c3RlZF9tb2RlKTsKKwlzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdl
OworCisJbGlzdF9mb3JfZWFjaF9lbnRyeShicmlkZ2UsICZlbmNvZGVyLT5icmlkZ2VfY2hhaW4s
IGNoYWluX25vZGUpIHsKKwkJaWYgKCFicmlkZ2UtPmZ1bmNzLT5tb2RlX2ZpeHVwKQorCQkJY29u
dGludWU7CisKKwkJaWYgKCFicmlkZ2UtPmZ1bmNzLT5tb2RlX2ZpeHVwKGJyaWRnZSwgbW9kZSwg
YWRqdXN0ZWRfbW9kZSkpCisJCQlyZXR1cm4gZmFsc2U7CisJfQorCisJcmV0dXJuIHRydWU7CiB9
CiBFWFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfY2hhaW5fbW9kZV9maXh1cCk7CiAKQEAgLTM1Myw3
ICsyNzUsMjAgQEAgZW51bSBkcm1fbW9kZV9zdGF0dXMKIGRybV9icmlkZ2VfY2hhaW5fbW9kZV92
YWxpZChzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIsCiAJCQkgICAgY29uc3Qgc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKm1vZGUpCiB7Ci0JcmV0dXJuIGRybV9icmlkZ2VfbW9kZV92YWxpZChl
bmNvZGVyLT5icmlkZ2UsIG1vZGUpOworCXN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2U7CisKKwls
aXN0X2Zvcl9lYWNoX2VudHJ5KGJyaWRnZSwgJmVuY29kZXItPmJyaWRnZV9jaGFpbiwgY2hhaW5f
bm9kZSkgeworCQllbnVtIGRybV9tb2RlX3N0YXR1cyByZXQ7CisKKwkJaWYgKCFicmlkZ2UtPmZ1
bmNzLT5tb2RlX3ZhbGlkKQorCQkJY29udGludWU7CisKKwkJcmV0ID0gYnJpZGdlLT5mdW5jcy0+
bW9kZV92YWxpZChicmlkZ2UsIG1vZGUpOworCQlpZiAocmV0ICE9IE1PREVfT0spCisJCQlyZXR1
cm4gcmV0OworCX0KKworCXJldHVybiBNT0RFX09LOwogfQogRVhQT1JUX1NZTUJPTChkcm1fYnJp
ZGdlX2NoYWluX21vZGVfdmFsaWQpOwogCkBAIC0zNjcsNyArMzAyLDEzIEBAIEVYUE9SVF9TWU1C
T0woZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3ZhbGlkKTsKICAqLwogdm9pZCBkcm1fYnJpZGdlX2No
YWluX2Rpc2FibGUoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQogewotCWRybV9icmlkZ2Vf
ZGlzYWJsZShlbmNvZGVyLT5icmlkZ2UpOworCXN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2U7CisK
KwlsaXN0X2Zvcl9lYWNoX2VudHJ5X3JldmVyc2UoYnJpZGdlLCAmZW5jb2Rlci0+YnJpZGdlX2No
YWluLAorCQkJCSAgICBjaGFpbl9ub2RlKSB7CisJCWlmIChicmlkZ2UtPmZ1bmNzLT5kaXNhYmxl
KQorCQkJYnJpZGdlLT5mdW5jcy0+ZGlzYWJsZShicmlkZ2UpOworCX0KIH0KIEVYUE9SVF9TWU1C
T0woZHJtX2JyaWRnZV9jaGFpbl9kaXNhYmxlKTsKIApAQCAtMzgyLDcgKzMyMywxMiBAQCBFWFBP
UlRfU1lNQk9MKGRybV9icmlkZ2VfY2hhaW5fZGlzYWJsZSk7CiAgKi8KIHZvaWQgZHJtX2JyaWRn
ZV9jaGFpbl9wb3N0X2Rpc2FibGUoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQogewotCWRy
bV9icmlkZ2VfcG9zdF9kaXNhYmxlKGVuY29kZXItPmJyaWRnZSk7CisJc3RydWN0IGRybV9icmlk
Z2UgKmJyaWRnZTsKKworCWxpc3RfZm9yX2VhY2hfZW50cnkoYnJpZGdlLCAmZW5jb2Rlci0+YnJp
ZGdlX2NoYWluLCBjaGFpbl9ub2RlKSB7CisJCWlmIChicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rpc2Fi
bGUpCisJCQlicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rpc2FibGUoYnJpZGdlKTsKKwl9CiB9CiBFWFBP
UlRfU1lNQk9MKGRybV9icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlKTsKIApAQCAtNDAwLDcgKzM0
NiwxMiBAQCB2b2lkIGRybV9icmlkZ2VfY2hhaW5fbW9kZV9zZXQoc3RydWN0IGRybV9lbmNvZGVy
ICplbmNvZGVyLAogCQkJICAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2Rl
LAogCQkJICAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2Rl
KQogewotCWRybV9icmlkZ2VfbW9kZV9zZXQoZW5jb2Rlci0+YnJpZGdlLCBtb2RlLCBhZGp1c3Rl
ZF9tb2RlKTsKKwlzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlOworCisJbGlzdF9mb3JfZWFjaF9l
bnRyeShicmlkZ2UsICZlbmNvZGVyLT5icmlkZ2VfY2hhaW4sIGNoYWluX25vZGUpIHsKKwkJaWYg
KGJyaWRnZS0+ZnVuY3MtPm1vZGVfc2V0KQorCQkJYnJpZGdlLT5mdW5jcy0+bW9kZV9zZXQoYnJp
ZGdlLCBtb2RlLCBhZGp1c3RlZF9tb2RlKTsKKwl9CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9icmlk
Z2VfY2hhaW5fbW9kZV9zZXQpOwogCkBAIC00MTUsNyArMzY2LDEzIEBAIEVYUE9SVF9TWU1CT0wo
ZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3NldCk7CiAgKi8KIHZvaWQgZHJtX2JyaWRnZV9jaGFpbl9w
cmVfZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKIHsKLQlkcm1fYnJpZGdlX3By
ZV9lbmFibGUoZW5jb2Rlci0+YnJpZGdlKTsKKwlzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlOwor
CisJbGlzdF9mb3JfZWFjaF9lbnRyeV9yZXZlcnNlKGJyaWRnZSwgJmVuY29kZXItPmJyaWRnZV9j
aGFpbiwKKwkJCQkgICAgY2hhaW5fbm9kZSkgeworCQlpZiAoYnJpZGdlLT5mdW5jcy0+cHJlX2Vu
YWJsZSkKKwkJCWJyaWRnZS0+ZnVuY3MtPnByZV9lbmFibGUoYnJpZGdlKTsKKwl9CiB9CiBFWFBP
UlRfU1lNQk9MKGRybV9icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZSk7CiAKQEAgLTQyOSw2NiArMzg2
LDE1IEBAIEVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9jaGFpbl9wcmVfZW5hYmxlKTsKICAqLwog
dm9pZCBkcm1fYnJpZGdlX2NoYWluX2VuYWJsZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIp
CiB7Ci0JZHJtX2JyaWRnZV9lbmFibGUoZW5jb2Rlci0+YnJpZGdlKTsKKwlzdHJ1Y3QgZHJtX2Jy
aWRnZSAqYnJpZGdlOworCisJbGlzdF9mb3JfZWFjaF9lbnRyeShicmlkZ2UsICZlbmNvZGVyLT5i
cmlkZ2VfY2hhaW4sIGNoYWluX25vZGUpIHsKKwkJaWYgKGJyaWRnZS0+ZnVuY3MtPmVuYWJsZSkK
KwkJCWJyaWRnZS0+ZnVuY3MtPmVuYWJsZShicmlkZ2UpOworCX0KIH0KIEVYUE9SVF9TWU1CT0wo
ZHJtX2JyaWRnZV9jaGFpbl9lbmFibGUpOwogCi1zdGF0aWMgdm9pZCBkcm1fYXRvbWljX2JyaWRn
ZV9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCi0JCQkJICAgICAgc3RydWN0IGRy
bV9hdG9taWNfc3RhdGUgKnN0YXRlKQotewotCWlmICghYnJpZGdlKQotCQlyZXR1cm47Ci0KLQlk
cm1fYXRvbWljX2JyaWRnZV9kaXNhYmxlKGJyaWRnZS0+bmV4dCwgc3RhdGUpOwotCi0JaWYgKGJy
aWRnZS0+ZnVuY3MtPmF0b21pY19kaXNhYmxlKQotCQlicmlkZ2UtPmZ1bmNzLT5hdG9taWNfZGlz
YWJsZShicmlkZ2UsIHN0YXRlKTsKLQllbHNlIGlmIChicmlkZ2UtPmZ1bmNzLT5kaXNhYmxlKQot
CQlicmlkZ2UtPmZ1bmNzLT5kaXNhYmxlKGJyaWRnZSk7Ci19Ci0KLXN0YXRpYyB2b2lkIGRybV9h
dG9taWNfYnJpZGdlX3Bvc3RfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJ
CQkgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCi17Ci0JaWYgKCFicmlkZ2UpCi0J
CXJldHVybjsKLQotCWlmIChicmlkZ2UtPmZ1bmNzLT5hdG9taWNfcG9zdF9kaXNhYmxlKQotCQli
cmlkZ2UtPmZ1bmNzLT5hdG9taWNfcG9zdF9kaXNhYmxlKGJyaWRnZSwgc3RhdGUpOwotCWVsc2Ug
aWYgKGJyaWRnZS0+ZnVuY3MtPnBvc3RfZGlzYWJsZSkKLQkJYnJpZGdlLT5mdW5jcy0+cG9zdF9k
aXNhYmxlKGJyaWRnZSk7Ci0KLQlkcm1fYXRvbWljX2JyaWRnZV9wb3N0X2Rpc2FibGUoYnJpZGdl
LT5uZXh0LCBzdGF0ZSk7Ci19Ci0KLXN0YXRpYyB2b2lkIGRybV9hdG9taWNfYnJpZGdlX3ByZV9l
bmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJCQkJIHN0cnVjdCBkcm1fYXRvbWlj
X3N0YXRlICpzdGF0ZSkKLXsKLQlpZiAoIWJyaWRnZSkKLQkJcmV0dXJuOwotCi0JZHJtX2F0b21p
Y19icmlkZ2VfcHJlX2VuYWJsZShicmlkZ2UtPm5leHQsIHN0YXRlKTsKLQotCWlmIChicmlkZ2Ut
PmZ1bmNzLT5hdG9taWNfcHJlX2VuYWJsZSkKLQkJYnJpZGdlLT5mdW5jcy0+YXRvbWljX3ByZV9l
bmFibGUoYnJpZGdlLCBzdGF0ZSk7Ci0JZWxzZSBpZiAoYnJpZGdlLT5mdW5jcy0+cHJlX2VuYWJs
ZSkKLQkJYnJpZGdlLT5mdW5jcy0+cHJlX2VuYWJsZShicmlkZ2UpOwotfQotCi1zdGF0aWMgdm9p
ZCBkcm1fYXRvbWljX2JyaWRnZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJ
CQkgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSkKLXsKLQlpZiAoIWJyaWRnZSkK
LQkJcmV0dXJuOwotCi0JaWYgKGJyaWRnZS0+ZnVuY3MtPmF0b21pY19lbmFibGUpCi0JCWJyaWRn
ZS0+ZnVuY3MtPmF0b21pY19lbmFibGUoYnJpZGdlLCBzdGF0ZSk7Ci0JZWxzZSBpZiAoYnJpZGdl
LT5mdW5jcy0+ZW5hYmxlKQotCQlicmlkZ2UtPmZ1bmNzLT5lbmFibGUoYnJpZGdlKTsKLQotCWRy
bV9hdG9taWNfYnJpZGdlX2VuYWJsZShicmlkZ2UtPm5leHQsIHN0YXRlKTsKLX0KLQogLyoqCiAg
KiBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9kaXNhYmxlIC0gZGlzYWJsZXMgYWxsIGJyaWRnZXMg
aW4gdGhlIGVuY29kZXIgY2hhaW4KICAqIEBlbmNvZGVyOiBlbmNvZGVyIG9iamVjdApAQCAtNTAy
LDcgKzQwOCwxNSBAQCBzdGF0aWMgdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9lbmFibGUoc3RydWN0
IGRybV9icmlkZ2UgKmJyaWRnZSwKIHZvaWQgZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fZGlzYWJs
ZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIsCiAJCQkJICAgICBzdHJ1Y3QgZHJtX2F0b21p
Y19zdGF0ZSAqc3RhdGUpCiB7Ci0JZHJtX2F0b21pY19icmlkZ2VfZGlzYWJsZShlbmNvZGVyLT5i
cmlkZ2UsIHN0YXRlKTsKKwlzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlOworCisJbGlzdF9mb3Jf
ZWFjaF9lbnRyeV9yZXZlcnNlKGJyaWRnZSwgJmVuY29kZXItPmJyaWRnZV9jaGFpbiwKKwkJCQkg
ICAgY2hhaW5fbm9kZSkgeworCQlpZiAoYnJpZGdlLT5mdW5jcy0+YXRvbWljX2Rpc2FibGUpCisJ
CQlicmlkZ2UtPmZ1bmNzLT5hdG9taWNfZGlzYWJsZShicmlkZ2UsIHN0YXRlKTsKKwkJZWxzZSBp
ZiAoYnJpZGdlLT5mdW5jcy0+ZGlzYWJsZSkKKwkJCWJyaWRnZS0+ZnVuY3MtPmRpc2FibGUoYnJp
ZGdlKTsKKwl9CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9hdG9taWNfYnJpZGdlX2NoYWluX2Rpc2Fi
bGUpOwogCkBAIC01MjAsNyArNDM0LDE0IEBAIEVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlk
Z2VfY2hhaW5fZGlzYWJsZSk7CiB2b2lkIGRybV9hdG9taWNfYnJpZGdlX2NoYWluX3Bvc3RfZGlz
YWJsZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIsCiAJCQkJCSAgc3RydWN0IGRybV9hdG9t
aWNfc3RhdGUgKnN0YXRlKQogewotCWRybV9hdG9taWNfYnJpZGdlX3Bvc3RfZGlzYWJsZShlbmNv
ZGVyLT5icmlkZ2UsIHN0YXRlKTsKKwlzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlOworCisJbGlz
dF9mb3JfZWFjaF9lbnRyeShicmlkZ2UsICZlbmNvZGVyLT5icmlkZ2VfY2hhaW4sIGNoYWluX25v
ZGUpIHsKKwkJaWYgKGJyaWRnZS0+ZnVuY3MtPmF0b21pY19wb3N0X2Rpc2FibGUpCisJCQlicmlk
Z2UtPmZ1bmNzLT5hdG9taWNfcG9zdF9kaXNhYmxlKGJyaWRnZSwgc3RhdGUpOworCQllbHNlIGlm
IChicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rpc2FibGUpCisJCQlicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rp
c2FibGUoYnJpZGdlKTsKKwl9CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9hdG9taWNfYnJpZGdlX2No
YWluX3Bvc3RfZGlzYWJsZSk7CiAKQEAgLTUzOCw3ICs0NTksMTUgQEAgRVhQT1JUX1NZTUJPTChk
cm1fYXRvbWljX2JyaWRnZV9jaGFpbl9wb3N0X2Rpc2FibGUpOwogdm9pZCBkcm1fYXRvbWljX2Jy
aWRnZV9jaGFpbl9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwKIAkJCQkJ
c3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQogewotCWRybV9hdG9taWNfYnJpZGdlX3By
ZV9lbmFibGUoZW5jb2Rlci0+YnJpZGdlLCBzdGF0ZSk7CisJc3RydWN0IGRybV9icmlkZ2UgKmJy
aWRnZTsKKworCWxpc3RfZm9yX2VhY2hfZW50cnlfcmV2ZXJzZShicmlkZ2UsICZlbmNvZGVyLT5i
cmlkZ2VfY2hhaW4sCisJCQkJICAgIGNoYWluX25vZGUpIHsKKwkJaWYgKGJyaWRnZS0+ZnVuY3Mt
PmF0b21pY19wcmVfZW5hYmxlKQorCQkJYnJpZGdlLT5mdW5jcy0+YXRvbWljX3ByZV9lbmFibGUo
YnJpZGdlLCBzdGF0ZSk7CisJCWVsc2UgaWYgKGJyaWRnZS0+ZnVuY3MtPnByZV9lbmFibGUpCisJ
CQlicmlkZ2UtPmZ1bmNzLT5wcmVfZW5hYmxlKGJyaWRnZSk7CisJfQogfQogRVhQT1JUX1NZTUJP
TChkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9wcmVfZW5hYmxlKTsKIApAQCAtNTU1LDcgKzQ4NCwx
NCBAQCBFWFBPUlRfU1lNQk9MKGRybV9hdG9taWNfYnJpZGdlX2NoYWluX3ByZV9lbmFibGUpOwog
dm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9lbmFibGUoc3RydWN0IGRybV9lbmNvZGVyICpl
bmNvZGVyLAogCQkJCSAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCiB7Ci0JZHJt
X2F0b21pY19icmlkZ2VfZW5hYmxlKGVuY29kZXItPmJyaWRnZSwgc3RhdGUpOworCXN0cnVjdCBk
cm1fYnJpZGdlICpicmlkZ2U7CisKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5KGJyaWRnZSwgJmVuY29k
ZXItPmJyaWRnZV9jaGFpbiwgY2hhaW5fbm9kZSkgeworCQlpZiAoYnJpZGdlLT5mdW5jcy0+YXRv
bWljX2VuYWJsZSkKKwkJCWJyaWRnZS0+ZnVuY3MtPmF0b21pY19lbmFibGUoYnJpZGdlLCBzdGF0
ZSk7CisJCWVsc2UgaWYgKGJyaWRnZS0+ZnVuY3MtPmVuYWJsZSkKKwkJCWJyaWRnZS0+ZnVuY3Mt
PmVuYWJsZShicmlkZ2UpOworCX0KIH0KIEVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2Vf
Y2hhaW5fZW5hYmxlKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9lbmNvZGVy
LmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2VuY29kZXIuYwppbmRleCA4MGQ4OGE1NTMwMmUuLmU1
NTUyODFmNDNkNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9lbmNvZGVyLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2RybV9lbmNvZGVyLmMKQEAgLTE0MCw2ICsxNDAsNyBAQCBpbnQg
ZHJtX2VuY29kZXJfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQlnb3RvIG91dF9wdXQ7
CiAJfQogCisJSU5JVF9MSVNUX0hFQUQoJmVuY29kZXItPmJyaWRnZV9jaGFpbik7CiAJbGlzdF9h
ZGRfdGFpbCgmZW5jb2Rlci0+aGVhZCwgJmRldi0+bW9kZV9jb25maWcuZW5jb2Rlcl9saXN0KTsK
IAllbmNvZGVyLT5pbmRleCA9IGRldi0+bW9kZV9jb25maWcubnVtX2VuY29kZXIrKzsKIApAQCAt
MTYwLDIyICsxNjEsMTYgQEAgRVhQT1JUX1NZTUJPTChkcm1fZW5jb2Rlcl9pbml0KTsKIHZvaWQg
ZHJtX2VuY29kZXJfY2xlYW51cChzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCiB7CiAJc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiA9IGVuY29kZXItPmRldjsKKwlzdHJ1Y3QgZHJtX2JyaWRnZSAq
YnJpZGdlLCAqbmV4dDsKIAogCS8qIE5vdGUgdGhhdCB0aGUgZW5jb2Rlcl9saXN0IGlzIGNvbnNp
ZGVyZWQgdG8gYmUgc3RhdGljOyBzaG91bGQgd2UKIAkgKiByZW1vdmUgdGhlIGRybV9lbmNvZGVy
IGF0IHJ1bnRpbWUgd2Ugd291bGQgaGF2ZSB0byBkZWNyZW1lbnQgYWxsCiAJICogdGhlIGluZGlj
ZXMgb24gdGhlIGRybV9lbmNvZGVyIGFmdGVyIHVzIGluIHRoZSBlbmNvZGVyX2xpc3QuCiAJICov
CiAKLQlpZiAoZW5jb2Rlci0+YnJpZGdlKSB7Ci0JCXN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2Ug
PSBlbmNvZGVyLT5icmlkZ2U7Ci0JCXN0cnVjdCBkcm1fYnJpZGdlICpuZXh0OwotCi0JCXdoaWxl
IChicmlkZ2UpIHsKLQkJCW5leHQgPSBicmlkZ2UtPm5leHQ7Ci0JCQlkcm1fYnJpZGdlX2RldGFj
aChicmlkZ2UpOwotCQkJYnJpZGdlID0gbmV4dDsKLQkJfQotCX0KKwlsaXN0X2Zvcl9lYWNoX2Vu
dHJ5X3NhZmUoYnJpZGdlLCBuZXh0LCAmZW5jb2Rlci0+YnJpZGdlX2NoYWluLAorCQkJCSBjaGFp
bl9ub2RlKQorCQlkcm1fYnJpZGdlX2RldGFjaChicmlkZ2UpOwogCiAJZHJtX21vZGVfb2JqZWN0
X3VucmVnaXN0ZXIoZGV2LCAmZW5jb2Rlci0+YmFzZSk7CiAJa2ZyZWUoZW5jb2Rlci0+bmFtZSk7
CmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fYnJpZGdlLmggYi9pbmNsdWRlL2RybS9kcm1f
YnJpZGdlLmgKaW5kZXggZDQyOWJkMWMwMGY5Li5mNDAxODEyNzRlZDcgMTAwNjQ0Ci0tLSBhL2lu
Y2x1ZGUvZHJtL2RybV9icmlkZ2UuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fYnJpZGdlLmgKQEAg
LTM4Myw4ICszODMsOCBAQCBzdHJ1Y3QgZHJtX2JyaWRnZSB7CiAJc3RydWN0IGRybV9kZXZpY2Ug
KmRldjsKIAkvKiogQGVuY29kZXI6IGVuY29kZXIgdG8gd2hpY2ggdGhpcyBicmlkZ2UgaXMgY29u
bmVjdGVkICovCiAJc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyOwotCS8qKiBAbmV4dDogdGhl
IG5leHQgYnJpZGdlIGluIHRoZSBlbmNvZGVyIGNoYWluICovCi0Jc3RydWN0IGRybV9icmlkZ2Ug
Km5leHQ7CisJLyoqIEBjaGFpbl9ub2RlOiB1c2VkIHRvIGZvcm0gYSBicmlkZ2UgY2hhaW4gKi8K
KwlzdHJ1Y3QgbGlzdF9oZWFkIGNoYWluX25vZGU7CiAjaWZkZWYgQ09ORklHX09GCiAJLyoqIEBv
Zl9ub2RlOiBkZXZpY2Ugbm9kZSBwb2ludGVyIHRvIHRoZSBicmlkZ2UgKi8KIAlzdHJ1Y3QgZGV2
aWNlX25vZGUgKm9mX25vZGU7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fZW5jb2Rlci5o
IGIvaW5jbHVkZS9kcm0vZHJtX2VuY29kZXIuaAppbmRleCBkOTg2ZmYxMTk3Y2UuLjA4OTlmN2Yz
NGUzYSAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2VuY29kZXIuaAorKysgYi9pbmNsdWRl
L2RybS9kcm1fZW5jb2Rlci5oCkBAIC04OSw3ICs4OSw3IEBAIHN0cnVjdCBkcm1fZW5jb2Rlcl9m
dW5jcyB7CiAgKiBAaGVhZDogbGlzdCBtYW5hZ2VtZW50CiAgKiBAYmFzZTogYmFzZSBLTVMgb2Jq
ZWN0CiAgKiBAbmFtZTogaHVtYW4gcmVhZGFibGUgbmFtZSwgY2FuIGJlIG92ZXJ3cml0dGVuIGJ5
IHRoZSBkcml2ZXIKLSAqIEBicmlkZ2U6IGJyaWRnZSBhc3NvY2lhdGVkIHRvIHRoZSBlbmNvZGVy
CisgKiBAYnJpZGdlX2NoYWluOiBicmlkZ2VzIGFzc29jaWF0ZWQgdG8gdGhlIGVuY29kZXIKICAq
IEBmdW5jczogY29udHJvbCBmdW5jdGlvbnMKICAqIEBoZWxwZXJfcHJpdmF0ZTogbWlkLWxheWVy
IHByaXZhdGUgZGF0YQogICoKQEAgLTE3Miw3ICsxNzIsNyBAQCBzdHJ1Y3QgZHJtX2VuY29kZXIg
ewogCSAqICZkcm1fY29ubmVjdG9yX3N0YXRlLmNydGMuCiAJICovCiAJc3RydWN0IGRybV9jcnRj
ICpjcnRjOwotCXN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2U7CisJc3RydWN0IGxpc3RfaGVhZCBi
cmlkZ2VfY2hhaW47CiAJY29uc3Qgc3RydWN0IGRybV9lbmNvZGVyX2Z1bmNzICpmdW5jczsKIAlj
b25zdCBzdHJ1Y3QgZHJtX2VuY29kZXJfaGVscGVyX2Z1bmNzICpoZWxwZXJfcHJpdmF0ZTsKIAot
LSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
