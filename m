Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2326739C62F
	for <lists+dri-devel@lfdr.de>; Sat,  5 Jun 2021 08:21:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3641B6E853;
	Sat,  5 Jun 2021 06:21:07 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from m13119.mail.163.com (m13119.mail.163.com [220.181.13.119])
 by gabe.freedesktop.org (Postfix) with ESMTP id 83ADE6E853
 for <dri-devel@lists.freedesktop.org>; Sat,  5 Jun 2021 06:20:57 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=163.com;
 s=s110527; h=Date:From:Subject:MIME-Version:Message-ID; bh=cN4oF
 Aq8buyc3Yi8Czrmnqc/c4wF39J7baiQFyve6Zw=; b=C5NQ46xGEPoUNAxO28OJA
 l/dz83c50uH1TANmNMGSEcsy81vSIOkginLbm7MIO329IxNkEIExCEsiPGUOOZKV
 haW29038bRk2b/m0J48h1YApjG/yVYwa4CTIkkdntHp1xg2twTkLqm9SltNK6S3G
 Spvo0B4MssoxJVAnlfeTck=
Received: from liplay$163.com ( [114.242.206.180] ) by ajax-webmail-wmsvr119
 (Coremail) ; Sat, 5 Jun 2021 14:20:55 +0800 (CST)
X-Originating-IP: [114.242.206.180]
Date: Sat, 5 Jun 2021 14:20:55 +0800 (CST)
From: lichenyang  <liplay@163.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 3/3] drm/loongson: Add interrupt driver for LS7A
X-Priority: 3
X-Mailer: Coremail Webmail Server Version XT5.0.13 build 20210104(ab8c30b6)
 Copyright (c) 2002-2021 www.mailtech.cn 163com
X-CM-CTRLDATA: y9D+lGZvb3Rlcl9odG09OTg0Mzo1Ng==
Content-Type: multipart/alternative; 
 boundary="----=_Part_16708_1047663655.1622874055715"
MIME-Version: 1.0
Message-ID: <20f7c759.11e5.179dad4e423.Coremail.liplay@163.com>
X-Coremail-Locale: zh_CN
X-CM-TRANSID: d8GowADn73_HF7tgqxXtAA--.1337W
X-CM-SenderInfo: xolsztr16rljoofrz/1tbiDx6nHFUMYT3P4wADsA
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

------=_Part_16708_1047663655.1622874055715
Content-Type: text/plain; charset=GBK
Content-Transfer-Encoding: base64

CgoKQWRkIExTN0EgREMgdnN5bmMgaW50ZXJydXB0IGVuYWJsZSBhbmQgY2xvc2UgZnVuY3Rpb24s
IGFuZApyZWdpc3RlciBpcnFfaGFuZGxlciBmdW5jdGlvbiBpbnRlcmZhY2UuCkFkZCB2YnJhbmsg
ZXZlbnQgcHJvY2Vzc2luZyBmbG93LgoKU2lnbmVkLW9mZi1ieTogbGljaGVueWFuZyA8bGljaGVu
eWFuZ0Bsb29uZ3Nvbi5jbj4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFrZWZpbGUg
ICAgICAgIHwgICAzICstCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5j
IHwgIDQzICsrKysrKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYu
YyAgfCAgIDggKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaCAgfCAg
MTcgKysrLQogZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2lycS5jICB8IDEwNSAr
KysrKysrKysrKysrKysrKysrKysrKwogNSBmaWxlcyBjaGFuZ2VkLCAxNzAgaW5zZXJ0aW9ucygr
KSwgNiBkZWxldGlvbnMoLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9v
bmdzb24vbG9vbmdzb25faXJxLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdz
b24vTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFrZWZpbGUKaW5kZXggNzcz
YjgwNmU5OWEyLi5jYzUwYjY1YzdlMDMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9sb29u
Z3Nvbi9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFrZWZpbGUKQEAg
LTExLDUgKzExLDYgQEAgbG9vbmdzb24teSA6PSBsb29uZ3Nvbl9kcnYubyBcCiAJbG9vbmdzb25f
ZGV2aWNlLm8gXAogCWxvb25nc29uX2Nvbm5lY3Rvci5vIFwKIAlsb29uZ3Nvbl9lbmNvZGVyLm8g
XAotCWxvb25nc29uX2kyYy5vCisJbG9vbmdzb25faTJjLm8gXAorCWxvb25nc29uX2lycS5vCiBv
YmotJChDT05GSUdfRFJNX0xPT05HU09OKSArPSBsb29uZ3Nvbi5vCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2xv
b25nc29uL2xvb25nc29uX2NydGMuYwppbmRleCA0Y2I2NWZhMDg3NzguLjRjNjJkNWIyYmQ1NiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2NydGMuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5jCkBAIC0xNTQsMTkgKzE1
NCwyNSBAQCBzdGF0aWMgdm9pZCBsb29uZ3Nvbl9jcnRjX21vZGVfc2V0X25vZmIoc3RydWN0IGRy
bV9jcnRjICpjcnRjKQogfQogCiBzdGF0aWMgdm9pZCBsb29uZ3Nvbl9jcnRjX2F0b21pY19lbmFi
bGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAotCQkJCQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAq
b2xkX3N0YXRlKQorCQkJCQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX2NydGNfc3RhdGUp
CiB7CiAJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtPmRldjsKIAlzdHJ1Y3QgbG9vbmdz
b25fZGV2aWNlICpsZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKIAlzdHJ1Y3QgbG9vbmdzb25fY3J0
YyAqbGNydGMgPSB0b19sb29uZ3Nvbl9jcnRjKGNydGMpOwogCXUzMiByZWdfb2Zmc2V0ID0gbGNy
dGMtPnJlZ19vZmZzZXQ7CiAKKwlpZiAobGNydGMtPmNmZ19yZWcgJiBDRkdfRU5BQkxFKQorCQln
b3RvIHZibGFua19vbjsKKwogCWxjcnRjLT5jZmdfcmVnIHw9IENGR19FTkFCTEU7CiAJbHM3YV9t
bV93cmVnKGxkZXYsIEZCX0NGR19SRUcgKyByZWdfb2Zmc2V0LCBsY3J0Yy0+Y2ZnX3JlZyk7CisK
K3ZibGFua19vbjoKKwlkcm1fY3J0Y192Ymxhbmtfb24oY3J0Yyk7CiB9CiAKIHN0YXRpYyB2b2lk
IGxvb25nc29uX2NydGNfYXRvbWljX2Rpc2FibGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAotCQkJ
CQkgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKm9sZF9zdGF0ZSkKKwkJCQkJIHN0cnVjdCBkcm1f
YXRvbWljX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSkKIHsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
ID0gY3J0Yy0+ZGV2OwogCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYgPSBkZXYtPmRldl9w
cml2YXRlOwpAQCAtMTc1LDEwICsxODEsMzYgQEAgc3RhdGljIHZvaWQgbG9vbmdzb25fY3J0Y19h
dG9taWNfZGlzYWJsZShzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCiAKIAlsY3J0Yy0+Y2ZnX3JlZyAm
PSB+Q0ZHX0VOQUJMRTsKIAlsczdhX21tX3dyZWcobGRldiwgRkJfQ0ZHX1JFRyArIHJlZ19vZmZz
ZXQsIGxjcnRjLT5jZmdfcmVnKTsKKworCXNwaW5fbG9ja19pcnEoJmNydGMtPmRldi0+ZXZlbnRf
bG9jayk7CisJaWYgKGNydGMtPnN0YXRlLT5ldmVudCkgeworCQlkcm1fY3J0Y19zZW5kX3ZibGFu
a19ldmVudChjcnRjLCBjcnRjLT5zdGF0ZS0+ZXZlbnQpOworCQljcnRjLT5zdGF0ZS0+ZXZlbnQg
PSBOVUxMOworCX0KKwlzcGluX3VubG9ja19pcnEoJmNydGMtPmRldi0+ZXZlbnRfbG9jayk7CisK
Kwlkcm1fY3J0Y192Ymxhbmtfb2ZmKGNydGMpOworfQorCitzdGF0aWMgdm9pZCBsb29uZ3Nvbl9j
cnRjX2F0b21pY19mbHVzaChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCisJCQkJICAgICAgIHN0cnVj
dCBkcm1fY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUpCit7CisJc3RydWN0IGRybV9wZW5kaW5n
X3ZibGFua19ldmVudCAqZXZlbnQgPSBjcnRjLT5zdGF0ZS0+ZXZlbnQ7CisKKwlpZiAoZXZlbnQp
IHsKKwkJY3J0Yy0+c3RhdGUtPmV2ZW50ID0gTlVMTDsKKworCQlzcGluX2xvY2tfaXJxKCZjcnRj
LT5kZXYtPmV2ZW50X2xvY2spOworCQlpZiAoZHJtX2NydGNfdmJsYW5rX2dldChjcnRjKSA9PSAw
KQorCQkJZHJtX2NydGNfYXJtX3ZibGFua19ldmVudChjcnRjLCBldmVudCk7CisJCWVsc2UKKwkJ
CWRybV9jcnRjX3NlbmRfdmJsYW5rX2V2ZW50KGNydGMsIGV2ZW50KTsKKwkJc3Bpbl91bmxvY2tf
aXJxKCZjcnRjLT5kZXYtPmV2ZW50X2xvY2spOworCX0KIH0KIAogc3RhdGljIGVudW0gZHJtX21v
ZGVfc3RhdHVzIGxvb25nc29uX21vZGVfdmFsaWQoc3RydWN0IGRybV9jcnRjICpjcnRjLAotCQkJ
CQkJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCisJCWNvbnN0IHN0cnVjdCBk
cm1fZGlzcGxheV9tb2RlICptb2RlKQogewogCWlmIChtb2RlLT5oZGlzcGxheSA+IDE5MjApCiAJ
CXJldHVybiBNT0RFX0JBRDsKQEAgLTE5NCw5ICsyMjYsMTAgQEAgc3RhdGljIGVudW0gZHJtX21v
ZGVfc3RhdHVzIGxvb25nc29uX21vZGVfdmFsaWQoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCiBz
dGF0aWMgY29uc3Qgc3RydWN0IGRybV9jcnRjX2hlbHBlcl9mdW5jcyBsb29uZ3Nvbl9jcnRjX2hl
bHBlcl9mdW5jcyA9IHsKIAkubW9kZV92YWxpZCA9IGxvb25nc29uX21vZGVfdmFsaWQsCisJLm1v
ZGVfc2V0X25vZmIgPSBsb29uZ3Nvbl9jcnRjX21vZGVfc2V0X25vZmIsCisJLmF0b21pY19mbHVz
aCA9IGxvb25nc29uX2NydGNfYXRvbWljX2ZsdXNoLAogCS5hdG9taWNfZW5hYmxlID0gbG9vbmdz
b25fY3J0Y19hdG9taWNfZW5hYmxlLAogCS5hdG9taWNfZGlzYWJsZSA9IGxvb25nc29uX2NydGNf
YXRvbWljX2Rpc2FibGUsCi0JLm1vZGVfc2V0X25vZmIgPSBsb29uZ3Nvbl9jcnRjX21vZGVfc2V0
X25vZmIsCiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jcnRjX2Z1bmNzIGxvb25nc29u
X2NydGNfZnVuY3MgPSB7CkBAIC0yMDYsNiArMjM5LDggQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBk
cm1fY3J0Y19mdW5jcyBsb29uZ3Nvbl9jcnRjX2Z1bmNzID0gewogCS5kZXN0cm95ID0gZHJtX2Ny
dGNfY2xlYW51cCwKIAkuYXRvbWljX2R1cGxpY2F0ZV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVy
X2NydGNfZHVwbGljYXRlX3N0YXRlLAogCS5hdG9taWNfZGVzdHJveV9zdGF0ZSA9IGRybV9hdG9t
aWNfaGVscGVyX2NydGNfZGVzdHJveV9zdGF0ZSwKKwkuZW5hYmxlX3ZibGFuayA9IGxvb25nc29u
X2NydGNfZW5hYmxlX3ZibGFuaywKKwkuZGlzYWJsZV92YmxhbmsgPSBsb29uZ3Nvbl9jcnRjX2Rp
c2FibGVfdmJsYW5rLAogfTsKIAogaW50IGxvb25nc29uX2NydGNfaW5pdChzdHJ1Y3QgbG9vbmdz
b25fZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
bG9vbmdzb24vbG9vbmdzb25fZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdz
b25fZHJ2LmMKaW5kZXggMjUyYmU5ZTI1YWZmLi44OTQ1MGM4YzkxMDIgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2LmMKQEAgLTE2Nyw2ICsxNjcsMTAgQEAgc3RhdGljIGlu
dCBsb29uZ3Nvbl9kcm1fbG9hZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1bnNpZ25lZCBsb25n
IGZsYWdzKQogCWlmIChyZXQpCiAJCWRldl9lcnIoZGV2LT5kZXYsICJGYXRhbCBlcnJvciBkdXJp
bmcgbW9kZXNldCBpbml0OiAlZFxuIiwgcmV0KTsKIAorCXJldCA9IGxvb25nc29uX2lycV9pbml0
KGxkZXYpOworCWlmIChyZXQpCisJCWRldl9lcnIoZGV2LT5kZXYsICJGYXRhbCBlcnJvciBkdXJp
bmcgaXJxIGluaXQ6ICVkXG4iLCByZXQpOworCiAJZHJtX2ttc19oZWxwZXJfcG9sbF9pbml0KGRl
dik7CiAJZHJtX21vZGVfY29uZmlnX3Jlc2V0KGRldik7CiAKQEAgLTE5Miw2ICsxOTYsMTAgQEAg
c3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIGxvb25nc29uX2RybV9kcml2ZXIgPSB7CiAJLmZvcHMg
PSAmZm9wcywKIAlEUk1fR0VNX1ZSQU1fRFJJVkVSLAogCisJLmlycV9oYW5kbGVyID0gbG9vbmdz
b25faXJxX2hhbmRsZXIsCisJLmlycV9wcmVpbnN0YWxsID0gbG9vbmdzb25faXJxX3ByZWluc3Rh
bGwsCisJLmlycV91bmluc3RhbGwgPSBsb29uZ3Nvbl9pcnFfdW5pbnN0YWxsLAorCiAJLm5hbWUg
PSBEUklWRVJfTkFNRSwKIAkuZGVzYyA9IERSSVZFUl9ERVNDLAogCS5kYXRlID0gRFJJVkVSX0RB
VEUsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2Lmgg
Yi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2LmgKaW5kZXggMjRhNTM0YzNj
NzljLi42MGY1YmQ0OGY3ZjIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9s
b29uZ3Nvbl9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2
LmgKQEAgLTQsOSArNCwxMSBAQAogI2RlZmluZSBfX0xPT05HU09OX0RSVl9IX18KIAogI2luY2x1
ZGUgPGRybS9kcm1fZHJ2Lmg+CisjaW5jbHVkZSA8ZHJtL2RybV9mb3VyY2MuaD4KKyNpbmNsdWRl
IDxkcm0vZHJtX3ZibGFuay5oPgogI2luY2x1ZGUgPGRybS9kcm1fZ2VtLmg+CisjaW5jbHVkZSA8
ZHJtL2RybV9pcnEuaD4KICNpbmNsdWRlIDxkcm0vZHJtX2ZiX2hlbHBlci5oPgotI2luY2x1ZGUg
PGRybS9kcm1fZm91cmNjLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9wcm9iZV9oZWxwZXIuaD4KICNp
bmNsdWRlIDxkcm0vZHJtX2F0b21pYy5oPgogI2luY2x1ZGUgPGRybS9kcm1fYXRvbWljX2hlbHBl
ci5oPgpAQCAtNDksNiArNTEsNyBAQAogI2RlZmluZSBGQl9IU1lOQ19SRUcgKDB4MTQyMCkKICNk
ZWZpbmUgRkJfVkRJU1BMQVlfUkVHICgweDE0ODApCiAjZGVmaW5lIEZCX1ZTWU5DX1JFRyAoMHgx
NGEwKQorI2RlZmluZSBGQl9JTlRfUkVHICgweDE1NzApCiAKICNkZWZpbmUgQ0ZHX0ZNVCBHRU5N
QVNLKDIsIDApCiAjZGVmaW5lIENGR19GQlNXSVRDSCBCSVQoNykKQEAgLTYwLDYgKzYzLDEwIEBA
CiAjZGVmaW5lIEZCX1BBTkNGR19ERUYgMHg4MDAwMTMxMQogI2RlZmluZSBGQl9IU1lOQ19QVUxT
RSAoMSA8PCAzMCkKICNkZWZpbmUgRkJfVlNZTkNfUFVMU0UgKDEgPDwgMzApCisjZGVmaW5lIEZC
X1ZTWU5DMV9FTkFCTEUgKDEgPDwgMTYpCisjZGVmaW5lIEZCX1ZTWU5DMF9FTkFCTEUgKDEgPDwg
MTgpCisjZGVmaW5lIEZCX1ZTWU5DMV9JTlQgKDEgPDwgMCkKKyNkZWZpbmUgRkJfVlNZTkMwX0lO
VCAoMSA8PCAyKQogCiAvKiBQSVggUExMICovCiAjZGVmaW5lIExPT1BDX01JTiAyNApAQCAtMTM2
LDYgKzE0MywxNCBAQCBpbnQgbG9vbmdzb25fZW5jb2Rlcl9pbml0KHN0cnVjdCBsb29uZ3Nvbl9k
ZXZpY2UgKmxkZXYsIGludCBpbmRleCk7CiAvKiBwbGFuZSAqLwogaW50IGxvb25nc29uX3BsYW5l
X2luaXQoc3RydWN0IGxvb25nc29uX2NydGMgKmxjcnRjKTsKIAorLyogaXJxICovCitpbnQgbG9v
bmdzb25faXJxX2luaXQoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldik7CitpbnQgbG9vbmdz
b25fY3J0Y19lbmFibGVfdmJsYW5rKHN0cnVjdCBkcm1fY3J0YyAqY3J0Yyk7Cit2b2lkIGxvb25n
c29uX2NydGNfZGlzYWJsZV92Ymxhbmsoc3RydWN0IGRybV9jcnRjICpjcnRjKTsKK2lycXJldHVy
bl90IGxvb25nc29uX2lycV9oYW5kbGVyKGludCBpcnEsIHZvaWQgKmFyZyk7Cit2b2lkIGxvb25n
c29uX2lycV9wcmVpbnN0YWxsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwordm9pZCBsb29uZ3Nv
bl9pcnFfdW5pbnN0YWxsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOworCiAvKiBpMmMgKi8KIGlu
dCBsb29uZ3Nvbl9kY19ncGlvX2luaXQoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldik7CiAK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9pcnEuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9pcnEuYwpuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwMDAwMDAuLmQyMTJlMTZmM2MwMAotLS0gL2Rldi9udWxsCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9pcnEuYwpAQCAtMCwwICsxLDEwNSBAQAor
Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKworI2luY2x1ZGUg
Imxvb25nc29uX2Rydi5oIgorI2luY2x1ZGUgPGxpbnV4L3BjaS5oPgorCitpbnQgbG9vbmdzb25f
aXJxX2luaXQoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldikKK3sKKwlzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2OworCWludCByZXQsIGlycTsKKworCWRldiA9IGxkZXYtPmRldjsKKwlpcnEgPSBk
ZXYtPnBkZXYtPmlycTsKKworCXJldCA9IGRybV92YmxhbmtfaW5pdChkZXYsIGxkZXYtPm51bV9j
cnRjKTsKKwlpZiAocmV0KSB7CisJCWRldl9lcnIoZGV2LT5kZXYsICJGYXRhbCBlcnJvciBkdXJp
bmcgdmJsYW5rIGluaXQ6ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwlEUk1fSU5G
TygiZHJtIHZibGFuayBpbml0IGZpbmlzaGVkXG4iKTsKKworCXJldCA9IGRybV9pcnFfaW5zdGFs
bChkZXYsIGlycSk7CisJaWYgKHJldCkgeworCQlkZXZfZXJyKGRldi0+ZGV2LCAiRmF0YWwgZXJy
b3IgZHVyaW5nIGlycSBpbnN0YWxsOiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisJ
RFJNX0lORk8oImxvb25nc29uIGlycSBpbml0aWFsaXplZFxuIik7CisKKwlyZXR1cm4gMDsKK30K
KworaW50IGxvb25nc29uX2NydGNfZW5hYmxlX3ZibGFuayhzdHJ1Y3QgZHJtX2NydGMgKmNydGMp
Cit7CisJc3RydWN0IGxvb25nc29uX2NydGMgKmxjcnRjID0gdG9fbG9vbmdzb25fY3J0YyhjcnRj
KTsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gbGNydGMtPmxkZXY7CisJdTMyIHJl
Z192YWw7CisKKwlpZiAobGNydGMtPmNydGNfaWQpIHsKKwkJcmVnX3ZhbCA9IGxzN2FfbW1fcnJl
ZyhsZGV2LCBGQl9JTlRfUkVHKTsKKwkJcmVnX3ZhbCB8PSBGQl9WU1lOQzFfRU5BQkxFOworCQls
czdhX21tX3dyZWcobGRldiwgRkJfSU5UX1JFRywgcmVnX3ZhbCk7CisJfSBlbHNlIHsKKwkJcmVn
X3ZhbCA9IGxzN2FfbW1fcnJlZyhsZGV2LCBGQl9JTlRfUkVHKTsKKwkJcmVnX3ZhbCB8PSBGQl9W
U1lOQzBfRU5BQkxFOworCQlsczdhX21tX3dyZWcobGRldiwgRkJfSU5UX1JFRywgcmVnX3ZhbCk7
CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3ZvaWQgbG9vbmdzb25fY3J0Y19kaXNhYmxlX3ZibGFu
ayhzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCit7CisJc3RydWN0IGxvb25nc29uX2NydGMgKmxjcnRj
ID0gdG9fbG9vbmdzb25fY3J0YyhjcnRjKTsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2
ID0gbGNydGMtPmxkZXY7CisJdTMyIHJlZ192YWw7CisKKwlpZiAobGNydGMtPmNydGNfaWQpIHsK
KwkJcmVnX3ZhbCA9IGxzN2FfbW1fcnJlZyhsZGV2LCBGQl9JTlRfUkVHKTsKKwkJcmVnX3ZhbCAm
PSB+RkJfVlNZTkMxX0VOQUJMRTsKKwkJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0lOVF9SRUcsIHJl
Z192YWwpOworCX0gZWxzZSB7CisJCXJlZ192YWwgPSBsczdhX21tX3JyZWcobGRldiwgRkJfSU5U
X1JFRyk7CisJCXJlZ192YWwgJj0gfkZCX1ZTWU5DMF9FTkFCTEU7CisJCWxzN2FfbW1fd3JlZyhs
ZGV2LCBGQl9JTlRfUkVHLCByZWdfdmFsKTsKKwl9Cit9CisKK2lycXJldHVybl90IGxvb25nc29u
X2lycV9oYW5kbGVyKGludCBpcnEsIHZvaWQgKmFyZykKK3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2ID0gKHN0cnVjdCBkcm1fZGV2aWNlICopIGFyZzsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNl
ICpsZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGM7
CisJdTMyIHZhbDsKKworCXZhbCA9IGxzN2FfbW1fcnJlZyhsZGV2LCBGQl9JTlRfUkVHKTsKKwls
czdhX21tX3dyZWcobGRldiwgRkJfSU5UX1JFRywgdmFsICYgKDB4ZmZmZiA8PCAxNikpOworCisJ
aWYgKHZhbCAmIEZCX1ZTWU5DMF9JTlQpIHsKKwkJbGNydGMgPSBsZGV2LT5tb2RlX2luZm9bMF0u
Y3J0YzsKKwkJZHJtX2NydGNfaGFuZGxlX3ZibGFuaygmbGNydGMtPmJhc2UpOworCX0KKworCWlm
ICh2YWwgJiBGQl9WU1lOQzFfSU5UKSB7CisJCWxjcnRjID0gbGRldi0+bW9kZV9pbmZvWzFdLmNy
dGM7CisJCWRybV9jcnRjX2hhbmRsZV92YmxhbmsoJmxjcnRjLT5iYXNlKTsKKwl9CisKKwlyZXR1
cm4gSVJRX0hBTkRMRUQ7Cit9CisKK3ZvaWQgbG9vbmdzb25faXJxX3ByZWluc3RhbGwoc3RydWN0
IGRybV9kZXZpY2UgKmRldikKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2
LT5kZXZfcHJpdmF0ZTsKKworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9JTlRfUkVHLCAweDAwMDAg
PDwgMTYpOworfQorCit2b2lkIGxvb25nc29uX2lycV91bmluc3RhbGwoc3RydWN0IGRybV9kZXZp
Y2UgKmRldikKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2LT5kZXZfcHJp
dmF0ZTsKKworCWlmIChsZGV2ID09IE5VTEwpCisJCXJldHVybjsKKworCWxzN2FfbW1fd3JlZyhs
ZGV2LCBGQl9JTlRfUkVHLCAweDAwMDAgPDwgMTYpOworfQotLSAKMi4zMS4xCg==
------=_Part_16708_1047663655.1622874055715
Content-Type: text/html; charset=GBK
Content-Transfer-Encoding: base64

PGRpdiBzdHlsZT0ibGluZS1oZWlnaHQ6MS43O2NvbG9yOiMwMDAwMDA7Zm9udC1zaXplOjE0cHg7
Zm9udC1mYW1pbHk6QXJpYWwiPjxwIHN0eWxlPSJtYXJnaW46IDA7Ij48YnI+PC9wPjxwcmU+QWRk
IExTN0EgREMgdnN5bmMgaW50ZXJydXB0IGVuYWJsZSBhbmQgY2xvc2UgZnVuY3Rpb24sIGFuZApy
ZWdpc3RlciBpcnFfaGFuZGxlciBmdW5jdGlvbiBpbnRlcmZhY2UuCkFkZCB2YnJhbmsgZXZlbnQg
cHJvY2Vzc2luZyBmbG93LgoKU2lnbmVkLW9mZi1ieTogbGljaGVueWFuZyAmbHQ7bGljaGVueWFu
Z0Bsb29uZ3Nvbi5jbiZndDsKLS0tCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFrZWZpbGUg
ICAgICAgIHwgICAzICstCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5j
IHwgIDQzICsrKysrKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYu
YyAgfCAgIDggKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaCAgfCAg
MTcgKysrLQogZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2lycS5jICB8IDEwNSAr
KysrKysrKysrKysrKysrKysrKysrKwogNSBmaWxlcyBjaGFuZ2VkLCAxNzAgaW5zZXJ0aW9ucygr
KSwgNiBkZWxldGlvbnMoLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9v
bmdzb24vbG9vbmdzb25faXJxLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdz
b24vTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFrZWZpbGUKaW5kZXggNzcz
YjgwNmU5OWEyLi5jYzUwYjY1YzdlMDMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9sb29u
Z3Nvbi9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFrZWZpbGUKQEAg
LTExLDUgKzExLDYgQEAgbG9vbmdzb24teSA6PSBsb29uZ3Nvbl9kcnYubyBcCiAJbG9vbmdzb25f
ZGV2aWNlLm8gXAogCWxvb25nc29uX2Nvbm5lY3Rvci5vIFwKIAlsb29uZ3Nvbl9lbmNvZGVyLm8g
XAotCWxvb25nc29uX2kyYy5vCisJbG9vbmdzb25faTJjLm8gXAorCWxvb25nc29uX2lycS5vCiBv
YmotJChDT05GSUdfRFJNX0xPT05HU09OKSArPSBsb29uZ3Nvbi5vCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2xv
b25nc29uL2xvb25nc29uX2NydGMuYwppbmRleCA0Y2I2NWZhMDg3NzguLjRjNjJkNWIyYmQ1NiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2NydGMuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5jCkBAIC0xNTQsMTkgKzE1
NCwyNSBAQCBzdGF0aWMgdm9pZCBsb29uZ3Nvbl9jcnRjX21vZGVfc2V0X25vZmIoc3RydWN0IGRy
bV9jcnRjICpjcnRjKQogfQogCiBzdGF0aWMgdm9pZCBsb29uZ3Nvbl9jcnRjX2F0b21pY19lbmFi
bGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAotCQkJCQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAq
b2xkX3N0YXRlKQorCQkJCQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX2NydGNfc3RhdGUp
CiB7CiAJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtJmd0O2RldjsKIAlzdHJ1Y3QgbG9v
bmdzb25fZGV2aWNlICpsZGV2ID0gZGV2LSZndDtkZXZfcHJpdmF0ZTsKIAlzdHJ1Y3QgbG9vbmdz
b25fY3J0YyAqbGNydGMgPSB0b19sb29uZ3Nvbl9jcnRjKGNydGMpOwogCXUzMiByZWdfb2Zmc2V0
ID0gbGNydGMtJmd0O3JlZ19vZmZzZXQ7CiAKKwlpZiAobGNydGMtJmd0O2NmZ19yZWcgJmFtcDsg
Q0ZHX0VOQUJMRSkKKwkJZ290byB2Ymxhbmtfb247CisKIAlsY3J0Yy0mZ3Q7Y2ZnX3JlZyB8PSBD
RkdfRU5BQkxFOwogCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdfUkVHICsgcmVnX29mZnNldCwg
bGNydGMtJmd0O2NmZ19yZWcpOworCit2Ymxhbmtfb246CisJZHJtX2NydGNfdmJsYW5rX29uKGNy
dGMpOwogfQogCiBzdGF0aWMgdm9pZCBsb29uZ3Nvbl9jcnRjX2F0b21pY19kaXNhYmxlKHN0cnVj
dCBkcm1fY3J0YyAqY3J0YywKLQkJCQkJIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3Rh
dGUpCisJCQkJCSBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX2NydGNfc3RhdGUpCiB7CiAJ
c3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtJmd0O2RldjsKIAlzdHJ1Y3QgbG9vbmdzb25f
ZGV2aWNlICpsZGV2ID0gZGV2LSZndDtkZXZfcHJpdmF0ZTsKQEAgLTE3NSwxMCArMTgxLDM2IEBA
IHN0YXRpYyB2b2lkIGxvb25nc29uX2NydGNfYXRvbWljX2Rpc2FibGUoc3RydWN0IGRybV9jcnRj
ICpjcnRjLAogCiAJbGNydGMtJmd0O2NmZ19yZWcgJmFtcDs9IH5DRkdfRU5BQkxFOwogCWxzN2Ff
bW1fd3JlZyhsZGV2LCBGQl9DRkdfUkVHICsgcmVnX29mZnNldCwgbGNydGMtJmd0O2NmZ19yZWcp
OworCisJc3Bpbl9sb2NrX2lycSgmYW1wO2NydGMtJmd0O2Rldi0mZ3Q7ZXZlbnRfbG9jayk7CisJ
aWYgKGNydGMtJmd0O3N0YXRlLSZndDtldmVudCkgeworCQlkcm1fY3J0Y19zZW5kX3ZibGFua19l
dmVudChjcnRjLCBjcnRjLSZndDtzdGF0ZS0mZ3Q7ZXZlbnQpOworCQljcnRjLSZndDtzdGF0ZS0m
Z3Q7ZXZlbnQgPSBOVUxMOworCX0KKwlzcGluX3VubG9ja19pcnEoJmFtcDtjcnRjLSZndDtkZXYt
Jmd0O2V2ZW50X2xvY2spOworCisJZHJtX2NydGNfdmJsYW5rX29mZihjcnRjKTsKK30KKworc3Rh
dGljIHZvaWQgbG9vbmdzb25fY3J0Y19hdG9taWNfZmx1c2goc3RydWN0IGRybV9jcnRjICpjcnRj
LAorCQkJCSAgICAgICBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKm9sZF9jcnRjX3N0YXRlKQorewor
CXN0cnVjdCBkcm1fcGVuZGluZ192YmxhbmtfZXZlbnQgKmV2ZW50ID0gY3J0Yy0mZ3Q7c3RhdGUt
Jmd0O2V2ZW50OworCisJaWYgKGV2ZW50KSB7CisJCWNydGMtJmd0O3N0YXRlLSZndDtldmVudCA9
IE5VTEw7CisKKwkJc3Bpbl9sb2NrX2lycSgmYW1wO2NydGMtJmd0O2Rldi0mZ3Q7ZXZlbnRfbG9j
ayk7CisJCWlmIChkcm1fY3J0Y192YmxhbmtfZ2V0KGNydGMpID09IDApCisJCQlkcm1fY3J0Y19h
cm1fdmJsYW5rX2V2ZW50KGNydGMsIGV2ZW50KTsKKwkJZWxzZQorCQkJZHJtX2NydGNfc2VuZF92
YmxhbmtfZXZlbnQoY3J0YywgZXZlbnQpOworCQlzcGluX3VubG9ja19pcnEoJmFtcDtjcnRjLSZn
dDtkZXYtJmd0O2V2ZW50X2xvY2spOworCX0KIH0KIAogc3RhdGljIGVudW0gZHJtX21vZGVfc3Rh
dHVzIGxvb25nc29uX21vZGVfdmFsaWQoc3RydWN0IGRybV9jcnRjICpjcnRjLAotCQkJCQkJY29u
c3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCisJCWNvbnN0IHN0cnVjdCBkcm1fZGlz
cGxheV9tb2RlICptb2RlKQogewogCWlmIChtb2RlLSZndDtoZGlzcGxheSAmZ3Q7IDE5MjApCiAJ
CXJldHVybiBNT0RFX0JBRDsKQEAgLTE5NCw5ICsyMjYsMTAgQEAgc3RhdGljIGVudW0gZHJtX21v
ZGVfc3RhdHVzIGxvb25nc29uX21vZGVfdmFsaWQoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCiBz
dGF0aWMgY29uc3Qgc3RydWN0IGRybV9jcnRjX2hlbHBlcl9mdW5jcyBsb29uZ3Nvbl9jcnRjX2hl
bHBlcl9mdW5jcyA9IHsKIAkubW9kZV92YWxpZCA9IGxvb25nc29uX21vZGVfdmFsaWQsCisJLm1v
ZGVfc2V0X25vZmIgPSBsb29uZ3Nvbl9jcnRjX21vZGVfc2V0X25vZmIsCisJLmF0b21pY19mbHVz
aCA9IGxvb25nc29uX2NydGNfYXRvbWljX2ZsdXNoLAogCS5hdG9taWNfZW5hYmxlID0gbG9vbmdz
b25fY3J0Y19hdG9taWNfZW5hYmxlLAogCS5hdG9taWNfZGlzYWJsZSA9IGxvb25nc29uX2NydGNf
YXRvbWljX2Rpc2FibGUsCi0JLm1vZGVfc2V0X25vZmIgPSBsb29uZ3Nvbl9jcnRjX21vZGVfc2V0
X25vZmIsCiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jcnRjX2Z1bmNzIGxvb25nc29u
X2NydGNfZnVuY3MgPSB7CkBAIC0yMDYsNiArMjM5LDggQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBk
cm1fY3J0Y19mdW5jcyBsb29uZ3Nvbl9jcnRjX2Z1bmNzID0gewogCS5kZXN0cm95ID0gZHJtX2Ny
dGNfY2xlYW51cCwKIAkuYXRvbWljX2R1cGxpY2F0ZV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVy
X2NydGNfZHVwbGljYXRlX3N0YXRlLAogCS5hdG9taWNfZGVzdHJveV9zdGF0ZSA9IGRybV9hdG9t
aWNfaGVscGVyX2NydGNfZGVzdHJveV9zdGF0ZSwKKwkuZW5hYmxlX3ZibGFuayA9IGxvb25nc29u
X2NydGNfZW5hYmxlX3ZibGFuaywKKwkuZGlzYWJsZV92YmxhbmsgPSBsb29uZ3Nvbl9jcnRjX2Rp
c2FibGVfdmJsYW5rLAogfTsKIAogaW50IGxvb25nc29uX2NydGNfaW5pdChzdHJ1Y3QgbG9vbmdz
b25fZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
bG9vbmdzb24vbG9vbmdzb25fZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdz
b25fZHJ2LmMKaW5kZXggMjUyYmU5ZTI1YWZmLi44OTQ1MGM4YzkxMDIgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2LmMKQEAgLTE2Nyw2ICsxNjcsMTAgQEAgc3RhdGljIGlu
dCBsb29uZ3Nvbl9kcm1fbG9hZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1bnNpZ25lZCBsb25n
IGZsYWdzKQogCWlmIChyZXQpCiAJCWRldl9lcnIoZGV2LSZndDtkZXYsICJGYXRhbCBlcnJvciBk
dXJpbmcgbW9kZXNldCBpbml0OiAlZFxuIiwgcmV0KTsKIAorCXJldCA9IGxvb25nc29uX2lycV9p
bml0KGxkZXYpOworCWlmIChyZXQpCisJCWRldl9lcnIoZGV2LSZndDtkZXYsICJGYXRhbCBlcnJv
ciBkdXJpbmcgaXJxIGluaXQ6ICVkXG4iLCByZXQpOworCiAJZHJtX2ttc19oZWxwZXJfcG9sbF9p
bml0KGRldik7CiAJZHJtX21vZGVfY29uZmlnX3Jlc2V0KGRldik7CiAKQEAgLTE5Miw2ICsxOTYs
MTAgQEAgc3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIGxvb25nc29uX2RybV9kcml2ZXIgPSB7CiAJ
LmZvcHMgPSAmYW1wO2ZvcHMsCiAJRFJNX0dFTV9WUkFNX0RSSVZFUiwKIAorCS5pcnFfaGFuZGxl
ciA9IGxvb25nc29uX2lycV9oYW5kbGVyLAorCS5pcnFfcHJlaW5zdGFsbCA9IGxvb25nc29uX2ly
cV9wcmVpbnN0YWxsLAorCS5pcnFfdW5pbnN0YWxsID0gbG9vbmdzb25faXJxX3VuaW5zdGFsbCwK
KwogCS5uYW1lID0gRFJJVkVSX05BTUUsCiAJLmRlc2MgPSBEUklWRVJfREVTQywKIAkuZGF0ZSA9
IERSSVZFUl9EQVRFLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25n
c29uX2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5oCmluZGV4
IDI0YTUzNGMzYzc5Yy4uNjBmNWJkNDhmN2YyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
bG9vbmdzb24vbG9vbmdzb25fZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xv
b25nc29uX2Rydi5oCkBAIC00LDkgKzQsMTEgQEAKICNkZWZpbmUgX19MT09OR1NPTl9EUlZfSF9f
CiAKICNpbmNsdWRlICZsdDtkcm0vZHJtX2Rydi5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9kcm1f
Zm91cmNjLmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV92YmxhbmsuaCZndDsKICNpbmNsdWRl
ICZsdDtkcm0vZHJtX2dlbS5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9kcm1faXJxLmgmZ3Q7CiAj
aW5jbHVkZSAmbHQ7ZHJtL2RybV9mYl9oZWxwZXIuaCZndDsKLSNpbmNsdWRlICZsdDtkcm0vZHJt
X2ZvdXJjYy5oJmd0OwogI2luY2x1ZGUgJmx0O2RybS9kcm1fcHJvYmVfaGVscGVyLmgmZ3Q7CiAj
aW5jbHVkZSAmbHQ7ZHJtL2RybV9hdG9taWMuaCZndDsKICNpbmNsdWRlICZsdDtkcm0vZHJtX2F0
b21pY19oZWxwZXIuaCZndDsKQEAgLTQ5LDYgKzUxLDcgQEAKICNkZWZpbmUgRkJfSFNZTkNfUkVH
ICgweDE0MjApCiAjZGVmaW5lIEZCX1ZESVNQTEFZX1JFRyAoMHgxNDgwKQogI2RlZmluZSBGQl9W
U1lOQ19SRUcgKDB4MTRhMCkKKyNkZWZpbmUgRkJfSU5UX1JFRyAoMHgxNTcwKQogCiAjZGVmaW5l
IENGR19GTVQgR0VOTUFTSygyLCAwKQogI2RlZmluZSBDRkdfRkJTV0lUQ0ggQklUKDcpCkBAIC02
MCw2ICs2MywxMCBAQAogI2RlZmluZSBGQl9QQU5DRkdfREVGIDB4ODAwMDEzMTEKICNkZWZpbmUg
RkJfSFNZTkNfUFVMU0UgKDEgJmx0OyZsdDsgMzApCiAjZGVmaW5lIEZCX1ZTWU5DX1BVTFNFICgx
ICZsdDsmbHQ7IDMwKQorI2RlZmluZSBGQl9WU1lOQzFfRU5BQkxFICgxICZsdDsmbHQ7IDE2KQor
I2RlZmluZSBGQl9WU1lOQzBfRU5BQkxFICgxICZsdDsmbHQ7IDE4KQorI2RlZmluZSBGQl9WU1lO
QzFfSU5UICgxICZsdDsmbHQ7IDApCisjZGVmaW5lIEZCX1ZTWU5DMF9JTlQgKDEgJmx0OyZsdDsg
MikKIAogLyogUElYIFBMTCAqLwogI2RlZmluZSBMT09QQ19NSU4gMjQKQEAgLTEzNiw2ICsxNDMs
MTQgQEAgaW50IGxvb25nc29uX2VuY29kZXJfaW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICps
ZGV2LCBpbnQgaW5kZXgpOwogLyogcGxhbmUgKi8KIGludCBsb29uZ3Nvbl9wbGFuZV9pbml0KHN0
cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0Yyk7CiAKKy8qIGlycSAqLworaW50IGxvb25nc29uX2ly
cV9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYpOworaW50IGxvb25nc29uX2NydGNf
ZW5hYmxlX3ZibGFuayhzdHJ1Y3QgZHJtX2NydGMgKmNydGMpOwordm9pZCBsb29uZ3Nvbl9jcnRj
X2Rpc2FibGVfdmJsYW5rKHN0cnVjdCBkcm1fY3J0YyAqY3J0Yyk7CitpcnFyZXR1cm5fdCBsb29u
Z3Nvbl9pcnFfaGFuZGxlcihpbnQgaXJxLCB2b2lkICphcmcpOwordm9pZCBsb29uZ3Nvbl9pcnFf
cHJlaW5zdGFsbChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKK3ZvaWQgbG9vbmdzb25faXJxX3Vu
aW5zdGFsbChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKKwogLyogaTJjICovCiBpbnQgbG9vbmdz
b25fZGNfZ3Bpb19pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYpOwogCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25faXJxLmMgYi9kcml2ZXJzL2dw
dS9kcm0vbG9vbmdzb24vbG9vbmdzb25faXJxLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
MDAwMDAwMDAwMDAwLi5kMjEyZTE2ZjNjMDAKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vbG9vbmdzb24vbG9vbmdzb25faXJxLmMKQEAgLTAsMCArMSwxMDUgQEAKKy8vIFNQRFgt
TGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCisKKyNpbmNsdWRlICJsb29uZ3Nv
bl9kcnYuaCIKKyNpbmNsdWRlICZsdDtsaW51eC9wY2kuaCZndDsKKworaW50IGxvb25nc29uX2ly
cV9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYpCit7CisJc3RydWN0IGRybV9kZXZp
Y2UgKmRldjsKKwlpbnQgcmV0LCBpcnE7CisKKwlkZXYgPSBsZGV2LSZndDtkZXY7CisJaXJxID0g
ZGV2LSZndDtwZGV2LSZndDtpcnE7CisKKwlyZXQgPSBkcm1fdmJsYW5rX2luaXQoZGV2LCBsZGV2
LSZndDtudW1fY3J0Yyk7CisJaWYgKHJldCkgeworCQlkZXZfZXJyKGRldi0mZ3Q7ZGV2LCAiRmF0
YWwgZXJyb3IgZHVyaW5nIHZibGFuayBpbml0OiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJuIHJldDsK
Kwl9CisJRFJNX0lORk8oImRybSB2YmxhbmsgaW5pdCBmaW5pc2hlZFxuIik7CisKKwlyZXQgPSBk
cm1faXJxX2luc3RhbGwoZGV2LCBpcnEpOworCWlmIChyZXQpIHsKKwkJZGV2X2VycihkZXYtJmd0
O2RldiwgIkZhdGFsIGVycm9yIGR1cmluZyBpcnEgaW5zdGFsbDogJWRcbiIsIHJldCk7CisJCXJl
dHVybiByZXQ7CisJfQorCURSTV9JTkZPKCJsb29uZ3NvbiBpcnEgaW5pdGlhbGl6ZWRcbiIpOwor
CisJcmV0dXJuIDA7Cit9CisKK2ludCBsb29uZ3Nvbl9jcnRjX2VuYWJsZV92Ymxhbmsoc3RydWN0
IGRybV9jcnRjICpjcnRjKQoreworCXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YyA9IHRvX2xv
b25nc29uX2NydGMoY3J0Yyk7CisJc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiA9IGxjcnRj
LSZndDtsZGV2OworCXUzMiByZWdfdmFsOworCisJaWYgKGxjcnRjLSZndDtjcnRjX2lkKSB7CisJ
CXJlZ192YWwgPSBsczdhX21tX3JyZWcobGRldiwgRkJfSU5UX1JFRyk7CisJCXJlZ192YWwgfD0g
RkJfVlNZTkMxX0VOQUJMRTsKKwkJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0lOVF9SRUcsIHJlZ192
YWwpOworCX0gZWxzZSB7CisJCXJlZ192YWwgPSBsczdhX21tX3JyZWcobGRldiwgRkJfSU5UX1JF
Ryk7CisJCXJlZ192YWwgfD0gRkJfVlNZTkMwX0VOQUJMRTsKKwkJbHM3YV9tbV93cmVnKGxkZXYs
IEZCX0lOVF9SRUcsIHJlZ192YWwpOworCX0KKworCXJldHVybiAwOworfQorCit2b2lkIGxvb25n
c29uX2NydGNfZGlzYWJsZV92Ymxhbmsoc3RydWN0IGRybV9jcnRjICpjcnRjKQoreworCXN0cnVj
dCBsb29uZ3Nvbl9jcnRjICpsY3J0YyA9IHRvX2xvb25nc29uX2NydGMoY3J0Yyk7CisJc3RydWN0
IGxvb25nc29uX2RldmljZSAqbGRldiA9IGxjcnRjLSZndDtsZGV2OworCXUzMiByZWdfdmFsOwor
CisJaWYgKGxjcnRjLSZndDtjcnRjX2lkKSB7CisJCXJlZ192YWwgPSBsczdhX21tX3JyZWcobGRl
diwgRkJfSU5UX1JFRyk7CisJCXJlZ192YWwgJmFtcDs9IH5GQl9WU1lOQzFfRU5BQkxFOworCQls
czdhX21tX3dyZWcobGRldiwgRkJfSU5UX1JFRywgcmVnX3ZhbCk7CisJfSBlbHNlIHsKKwkJcmVn
X3ZhbCA9IGxzN2FfbW1fcnJlZyhsZGV2LCBGQl9JTlRfUkVHKTsKKwkJcmVnX3ZhbCAmYW1wOz0g
fkZCX1ZTWU5DMF9FTkFCTEU7CisJCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9JTlRfUkVHLCByZWdf
dmFsKTsKKwl9Cit9CisKK2lycXJldHVybl90IGxvb25nc29uX2lycV9oYW5kbGVyKGludCBpcnEs
IHZvaWQgKmFyZykKK3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gKHN0cnVjdCBkcm1fZGV2
aWNlICopIGFyZzsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2LSZndDtkZXZf
cHJpdmF0ZTsKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGM7CisJdTMyIHZhbDsKKworCXZh
bCA9IGxzN2FfbW1fcnJlZyhsZGV2LCBGQl9JTlRfUkVHKTsKKwlsczdhX21tX3dyZWcobGRldiwg
RkJfSU5UX1JFRywgdmFsICZhbXA7ICgweGZmZmYgJmx0OyZsdDsgMTYpKTsKKworCWlmICh2YWwg
JmFtcDsgRkJfVlNZTkMwX0lOVCkgeworCQlsY3J0YyA9IGxkZXYtJmd0O21vZGVfaW5mb1swXS5j
cnRjOworCQlkcm1fY3J0Y19oYW5kbGVfdmJsYW5rKCZhbXA7bGNydGMtJmd0O2Jhc2UpOworCX0K
KworCWlmICh2YWwgJmFtcDsgRkJfVlNZTkMxX0lOVCkgeworCQlsY3J0YyA9IGxkZXYtJmd0O21v
ZGVfaW5mb1sxXS5jcnRjOworCQlkcm1fY3J0Y19oYW5kbGVfdmJsYW5rKCZhbXA7bGNydGMtJmd0
O2Jhc2UpOworCX0KKworCXJldHVybiBJUlFfSEFORExFRDsKK30KKwordm9pZCBsb29uZ3Nvbl9p
cnFfcHJlaW5zdGFsbChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQoreworCXN0cnVjdCBsb29uZ3Nv
bl9kZXZpY2UgKmxkZXYgPSBkZXYtJmd0O2Rldl9wcml2YXRlOworCisJbHM3YV9tbV93cmVnKGxk
ZXYsIEZCX0lOVF9SRUcsIDB4MDAwMCAmbHQ7Jmx0OyAxNik7Cit9CisKK3ZvaWQgbG9vbmdzb25f
aXJxX3VuaW5zdGFsbChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQoreworCXN0cnVjdCBsb29uZ3Nv
bl9kZXZpY2UgKmxkZXYgPSBkZXYtJmd0O2Rldl9wcml2YXRlOworCisJaWYgKGxkZXYgPT0gTlVM
TCkKKwkJcmV0dXJuOworCisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0lOVF9SRUcsIDB4MDAwMCAm
bHQ7Jmx0OyAxNik7Cit9Ci0tIAoyLjMxLjEKPC9wcmU+PC9kaXY+PGJyPjxicj48c3BhbiB0aXRs
ZT0ibmV0ZWFzZWZvb3RlciI+PHA+Jm5ic3A7PC9wPjwvc3Bhbj4=
------=_Part_16708_1047663655.1622874055715--

