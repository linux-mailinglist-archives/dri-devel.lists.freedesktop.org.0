Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 741848A5E2
	for <lists+dri-devel@lfdr.de>; Mon, 12 Aug 2019 20:25:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EBE456E5B2;
	Mon, 12 Aug 2019 18:25:09 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qt1-x849.google.com (mail-qt1-x849.google.com
 [IPv6:2607:f8b0:4864:20::849])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 955C96E5B1
 for <dri-devel@lists.freedesktop.org>; Mon, 12 Aug 2019 18:25:07 +0000 (UTC)
Received: by mail-qt1-x849.google.com with SMTP id z15so7037811qtq.6
 for <dri-devel@lists.freedesktop.org>; Mon, 12 Aug 2019 11:25:07 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=JQLf0gQM199b/CV6kpOVqgIXBl5rEeaT0Gtb6yCiIs8=;
 b=LVvC5j/4ooQaC9SrGI51b49R/whEBCvQBFYPuoiOcvR0Ut0fve8aHvTDxSfDCTOvsL
 gn5gOfnb89QLs7NdbEChlNfnFATo+uYlwKk7/EBLwgAk9v6pp9lrRnLVURKR+agWLDhN
 baggYAtHGEyKUD1BXSf8Y2oy67gzCLnkvIB1aBgRGMUN9Cziz+Lg+FsE2x4G0F1PuPrP
 lGPjWpWbsdG4oYNpAvn5DTvWG7h4rSHnsUmbHGhNd+1d1oMu4FiW4Ryk3q2ZuqR88hmn
 7Iqoapz8uf/aSwZ9q6hXmmDvBB14PzElYnxZWj+W+JIHTqS5FQFEhG2C45Rhyvl3K2Fm
 /rDQ==
X-Gm-Message-State: APjAAAXoZTG6gRbHjj/P4ndWbFcE4aR/4h+aDEaJkeAvqMGFoRocdE4q
 8tKygQQOZl7qYcm/kgmmYVSgeQDepr0A/AlSo9Go6g==
X-Google-Smtp-Source: APXvYqzQa8dLOuQwyL+aom+1Mzrl61Y9DlUup3SEvBQG9uo/xaPEqWbyzBd6AMFC5GJP72Vor8+QticOgM5w7QjRfYtrqw==
X-Received: by 2002:ae9:c303:: with SMTP id n3mr30525174qkg.372.1565634306231; 
 Mon, 12 Aug 2019 11:25:06 -0700 (PDT)
Date: Mon, 12 Aug 2019 11:24:13 -0700
In-Reply-To: <20190812182421.141150-1-brendanhiggins@google.com>
Message-Id: <20190812182421.141150-11-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190812182421.141150-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.23.0.rc1.153.gdeed80330f-goog
Subject: [PATCH v12 10/18] kunit: test: add tests for kunit test abort
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=JQLf0gQM199b/CV6kpOVqgIXBl5rEeaT0Gtb6yCiIs8=;
 b=jdj4n+Lx78XRVwmTdalgi+b1zjQCp+uEnffH/ca0Da8QxsF7irm737XAq3cV02fgTJ
 TJ+6VuHxhsYlUP7hPQvqu6YHqCW9nDhLL4CTgnY7lqg5BlcLJhQ1v+YPVrx0XH1YEVim
 ZdpV627+AEo7v+ihiTAnrk9IXV/ive1eYPE9fiEcwrSRwqaxX+iwGV+bdM9IHvEibvry
 2pGRj1gNKi/anSP5RA6ieqy4RkIY7yeWd1lmmge3mQEv0VrgiRGu0vmOcEjXTNKiGqjq
 TWDKCwKnYqgr7rOKr18sSWfKCJlLW0nQ4ujTEZvTfP6RYES+Ajj5l21lI0pTabOpxiwz
 jRXg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIEtVbml0IHRlc3RzIGZvciB0aGUgS1VuaXQgdGVzdCBhYm9ydCBtZWNoYW5pc20gKHNlZSBw
cmVjZWRpbmcKY29tbWl0KS4gQWRkIHRlc3RzIGJvdGggZm9yIGdlbmVyYWwgdHJ5IGNhdGNoIG1l
Y2hhbmlzbSBhcyB3ZWxsIGFzCm5vbi1hcmNoaXRlY3R1cmUgc3BlY2lmaWMgbWVjaGFuaXNtLgoK
U2lnbmVkLW9mZi1ieTogQnJlbmRhbiBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29t
PgpSZXZpZXdlZC1ieTogR3JlZyBLcm9haC1IYXJ0bWFuIDxncmVna2hAbGludXhmb3VuZGF0aW9u
Lm9yZz4KUmV2aWV3ZWQtYnk6IExvZ2FuIEd1bnRob3JwZSA8bG9nYW5nQGRlbHRhdGVlLmNvbT4K
LS0tCiBrdW5pdC9NYWtlZmlsZSAgICB8ICAgMyArLQoga3VuaXQvdGVzdC10ZXN0LmMgfCAxMDEg
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogMiBmaWxlcyBj
aGFuZ2VkLCAxMDMgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAw
NjQ0IGt1bml0L3Rlc3QtdGVzdC5jCgpkaWZmIC0tZ2l0IGEva3VuaXQvTWFrZWZpbGUgYi9rdW5p
dC9NYWtlZmlsZQppbmRleCBjOTE3NmM5YzU3OGM2Li43NjlkOTQwMmI1ZDNhIDEwMDY0NAotLS0g
YS9rdW5pdC9NYWtlZmlsZQorKysgYi9rdW5pdC9NYWtlZmlsZQpAQCAtMyw2ICszLDcgQEAgb2Jq
LSQoQ09ORklHX0tVTklUKSArPQkJCXRlc3QubyBcCiAJCQkJCWFzc2VydC5vIFwKIAkJCQkJdHJ5
LWNhdGNoLm8KIAotb2JqLSQoQ09ORklHX0tVTklUX1RFU1QpICs9CQlzdHJpbmctc3RyZWFtLXRl
c3Qubworb2JqLSQoQ09ORklHX0tVTklUX1RFU1QpICs9CQl0ZXN0LXRlc3QubyBcCisJCQkJCXN0
cmluZy1zdHJlYW0tdGVzdC5vCiAKIG9iai0kKENPTkZJR19LVU5JVF9FWEFNUExFX1RFU1QpICs9
CWV4YW1wbGUtdGVzdC5vCmRpZmYgLS1naXQgYS9rdW5pdC90ZXN0LXRlc3QuYyBiL2t1bml0L3Rl
c3QtdGVzdC5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMDAuLjg4ZjRj
ZGYwM2RiMmEKLS0tIC9kZXYvbnVsbAorKysgYi9rdW5pdC90ZXN0LXRlc3QuYwpAQCAtMCwwICsx
LDEwMSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKKy8qCisgKiBLVW5p
dCB0ZXN0IGZvciBjb3JlIHRlc3QgaW5mcmFzdHJ1Y3R1cmUuCisgKgorICogQ29weXJpZ2h0IChD
KSAyMDE5LCBHb29nbGUgTExDLgorICogQXV0aG9yOiBCcmVuZGFuIEhpZ2dpbnMgPGJyZW5kYW5o
aWdnaW5zQGdvb2dsZS5jb20+CisgKi8KKyNpbmNsdWRlIDxrdW5pdC90ZXN0Lmg+CisKK3N0cnVj
dCBrdW5pdF90cnlfY2F0Y2hfdGVzdF9jb250ZXh0IHsKKwlzdHJ1Y3Qga3VuaXRfdHJ5X2NhdGNo
ICp0cnlfY2F0Y2g7CisJYm9vbCBmdW5jdGlvbl9jYWxsZWQ7Cit9OworCit2b2lkIGt1bml0X3Rl
c3Rfc3VjY2Vzc2Z1bF90cnkodm9pZCAqZGF0YSkKK3sKKwlzdHJ1Y3Qga3VuaXQgKnRlc3QgPSBk
YXRhOworCXN0cnVjdCBrdW5pdF90cnlfY2F0Y2hfdGVzdF9jb250ZXh0ICpjdHggPSB0ZXN0LT5w
cml2OworCisJY3R4LT5mdW5jdGlvbl9jYWxsZWQgPSB0cnVlOworfQorCit2b2lkIGt1bml0X3Rl
c3Rfbm9fY2F0Y2godm9pZCAqZGF0YSkKK3sKKwlzdHJ1Y3Qga3VuaXQgKnRlc3QgPSBkYXRhOwor
CisJS1VOSVRfRkFJTCh0ZXN0LCAiQ2F0Y2ggc2hvdWxkIG5vdCBiZSBjYWxsZWRcbiIpOworfQor
CitzdGF0aWMgdm9pZCBrdW5pdF90ZXN0X3RyeV9jYXRjaF9zdWNjZXNzZnVsX3RyeV9ub19jYXRj
aChzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0IGt1bml0X3RyeV9jYXRjaF90ZXN0X2Nv
bnRleHQgKmN0eCA9IHRlc3QtPnByaXY7CisJc3RydWN0IGt1bml0X3RyeV9jYXRjaCAqdHJ5X2Nh
dGNoID0gY3R4LT50cnlfY2F0Y2g7CisKKwlrdW5pdF90cnlfY2F0Y2hfaW5pdCh0cnlfY2F0Y2gs
CisJCQkgICAgIHRlc3QsCisJCQkgICAgIGt1bml0X3Rlc3Rfc3VjY2Vzc2Z1bF90cnksCisJCQkg
ICAgIGt1bml0X3Rlc3Rfbm9fY2F0Y2gpOworCWt1bml0X3RyeV9jYXRjaF9ydW4odHJ5X2NhdGNo
LCB0ZXN0KTsKKworCUtVTklUX0VYUEVDVF9UUlVFKHRlc3QsIGN0eC0+ZnVuY3Rpb25fY2FsbGVk
KTsKK30KKwordm9pZCBrdW5pdF90ZXN0X3Vuc3VjY2Vzc2Z1bF90cnkodm9pZCAqZGF0YSkKK3sK
KwlzdHJ1Y3Qga3VuaXQgKnRlc3QgPSBkYXRhOworCXN0cnVjdCBrdW5pdF90cnlfY2F0Y2hfdGVz
dF9jb250ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF90cnlfY2F0Y2ggKnRy
eV9jYXRjaCA9IGN0eC0+dHJ5X2NhdGNoOworCisJa3VuaXRfdHJ5X2NhdGNoX3Rocm93KHRyeV9j
YXRjaCk7CisJS1VOSVRfRkFJTCh0ZXN0LCAiVGhpcyBsaW5lIHNob3VsZCBuZXZlciBiZSByZWFj
aGVkXG4iKTsKK30KKwordm9pZCBrdW5pdF90ZXN0X2NhdGNoKHZvaWQgKmRhdGEpCit7CisJc3Ry
dWN0IGt1bml0ICp0ZXN0ID0gZGF0YTsKKwlzdHJ1Y3Qga3VuaXRfdHJ5X2NhdGNoX3Rlc3RfY29u
dGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsKKworCWN0eC0+ZnVuY3Rpb25fY2FsbGVkID0gdHJ1ZTsK
K30KKworc3RhdGljIHZvaWQga3VuaXRfdGVzdF90cnlfY2F0Y2hfdW5zdWNjZXNzZnVsX3RyeV9k
b2VzX2NhdGNoKHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdHJ5X2NhdGNo
X3Rlc3RfY29udGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsKKwlzdHJ1Y3Qga3VuaXRfdHJ5X2NhdGNo
ICp0cnlfY2F0Y2ggPSBjdHgtPnRyeV9jYXRjaDsKKworCWt1bml0X3RyeV9jYXRjaF9pbml0KHRy
eV9jYXRjaCwKKwkJCSAgICAgdGVzdCwKKwkJCSAgICAga3VuaXRfdGVzdF91bnN1Y2Nlc3NmdWxf
dHJ5LAorCQkJICAgICBrdW5pdF90ZXN0X2NhdGNoKTsKKwlrdW5pdF90cnlfY2F0Y2hfcnVuKHRy
eV9jYXRjaCwgdGVzdCk7CisKKwlLVU5JVF9FWFBFQ1RfVFJVRSh0ZXN0LCBjdHgtPmZ1bmN0aW9u
X2NhbGxlZCk7Cit9CisKK3N0YXRpYyBpbnQga3VuaXRfdHJ5X2NhdGNoX3Rlc3RfaW5pdChzdHJ1
Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0IGt1bml0X3RyeV9jYXRjaF90ZXN0X2NvbnRleHQg
KmN0eDsKKworCWN0eCA9IGt1bml0X2t6YWxsb2ModGVzdCwgc2l6ZW9mKCpjdHgpLCBHRlBfS0VS
TkVMKTsKKwl0ZXN0LT5wcml2ID0gY3R4OworCisJY3R4LT50cnlfY2F0Y2ggPSBrdW5pdF9rbWFs
bG9jKHRlc3QsCisJCQkJICAgICAgIHNpemVvZigqY3R4LT50cnlfY2F0Y2gpLAorCQkJCSAgICAg
ICBHRlBfS0VSTkVMKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgc3RydWN0IGt1bml0X2Nh
c2Uga3VuaXRfdHJ5X2NhdGNoX3Rlc3RfY2FzZXNbXSA9IHsKKwlLVU5JVF9DQVNFKGt1bml0X3Rl
c3RfdHJ5X2NhdGNoX3N1Y2Nlc3NmdWxfdHJ5X25vX2NhdGNoKSwKKwlLVU5JVF9DQVNFKGt1bml0
X3Rlc3RfdHJ5X2NhdGNoX3Vuc3VjY2Vzc2Z1bF90cnlfZG9lc19jYXRjaCksCisJe30KK307CisK
K3N0YXRpYyBzdHJ1Y3Qga3VuaXRfc3VpdGUga3VuaXRfdHJ5X2NhdGNoX3Rlc3Rfc3VpdGUgPSB7
CisJLm5hbWUgPSAia3VuaXQtdHJ5LWNhdGNoLXRlc3QiLAorCS5pbml0ID0ga3VuaXRfdHJ5X2Nh
dGNoX3Rlc3RfaW5pdCwKKwkudGVzdF9jYXNlcyA9IGt1bml0X3RyeV9jYXRjaF90ZXN0X2Nhc2Vz
LAorfTsKK2t1bml0X3Rlc3Rfc3VpdGUoa3VuaXRfdHJ5X2NhdGNoX3Rlc3Rfc3VpdGUpOwotLSAK
Mi4yMy4wLnJjMS4xNTMuZ2RlZWQ4MDMzMGYtZ29vZwoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vZHJpLWRldmVs
