Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C02E79E1B9
	for <lists+dri-devel@lfdr.de>; Tue, 27 Aug 2019 10:14:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 92781890BC;
	Tue, 27 Aug 2019 08:14:36 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x441.google.com (mail-wr1-x441.google.com
 [IPv6:2a00:1450:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 82F4A89915
 for <dri-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 08:14:31 +0000 (UTC)
Received: by mail-wr1-x441.google.com with SMTP id c3so17804980wrd.7
 for <dri-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 01:14:31 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=P263Nz8GEJ4vmRFoF7UucI5AUC0r0zMRf0rnaRk+enY=;
 b=KSmdsoyCwafWCoWHwXEZeVfBhjgPpzBRaK+scDKZHJ0R63iZpXQQDqICSabrnx+8cf
 kN7JdRE4NqCpH3hqMGKNSEYCX8wcY4owOI6co6rppWF1ugVTATPrhgl5WsnF2U+0yScj
 6dP/dObrl6sXBird8uWtTthedlpK3fFCXDXny0sRpEOpSz9eVjF4UHzPkcOhb8sEfrIe
 beQj05svEnPFSnnsj+5Ov3GA8QucRBAfPopdqq/gdojk4cbDvwHvGqw2r2TuQ9wdey8i
 Vq3zSDdzRV9i62W3RD25tMhp5+YdnNt70NC8DACGHmvlaSq5SJWXobnWRkq2DJ7H8uZo
 rfuw==
X-Gm-Message-State: APjAAAW+gEd0+C0Hiqd7cbqdskjdRGulwyYpZjJX0GlZKM745e4yhABT
 Lix8LdWwn2SmaUj0tAUwCg3+jQ==
X-Google-Smtp-Source: APXvYqwpvbZyC/pu+tVMvm17ws3ojExWy0ldiSpgNaiDeRPVrh1zPmuhZG2aTGT2a9jcu4lVoorn0w==
X-Received: by 2002:a5d:4446:: with SMTP id x6mr27380733wrr.11.1566893669899; 
 Tue, 27 Aug 2019 01:14:29 -0700 (PDT)
Received: from bender.baylibre.local
 (lmontsouris-657-1-212-31.w90-63.abo.wanadoo.fr. [90.63.244.31])
 by smtp.gmail.com with ESMTPSA id f18sm11911792wrx.85.2019.08.27.01.14.29
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 27 Aug 2019 01:14:29 -0700 (PDT)
From: Neil Armstrong <narmstrong@baylibre.com>
To: a.hajda@samsung.com, Laurent.pinchart@ideasonboard.com, jonas@kwiboo.se,
 jernej.skrabec@siol.net, boris.brezillon@collabora.com
Subject: [PATCH RFC v2 2/8] drm/meson: meson_dw_hdmi: switch to
 drm_bridge_funcs
Date: Tue, 27 Aug 2019 10:14:19 +0200
Message-Id: <20190827081425.15011-3-narmstrong@baylibre.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190827081425.15011-1-narmstrong@baylibre.com>
References: <20190827081425.15011-1-narmstrong@baylibre.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=baylibre-com.20150623.gappssmtp.com; s=20150623;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=P263Nz8GEJ4vmRFoF7UucI5AUC0r0zMRf0rnaRk+enY=;
 b=tHMHiMgSk47lpDEmrla9XXBM90OwrHN+lkL+/xh2RCq0cro5bbtsH/H12lBK+XQyPE
 Qkwk0TTJbfPh8pWIshAMztu+Kg7TiV2UFJnczaOAFCUC4w5TV7G1gSoKPC0nBMgnBMhG
 nUZqfwbwWeMOuARUiXgDZuIjYnqL2NOzdPHrmKHGYnsVH4eFXmeOcHIXlv2iIO+eOK/V
 te9YSmTZTbpJkXfnaqOgrxN4nnVDClGTXNj8cSUV920GwkyQwd+KnoUjhATe/5YC0G4p
 omwlvu9weNOdnFgeNFaKFEv894XlPbYCrB2/l01w3iBL+c0JBvedmUjvraTrgHBYF9h0
 w5pQ==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-amlogic@lists.infradead.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, Neil Armstrong <narmstrong@baylibre.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U3dpdGNoIHRoZSBkdy1oZG1pIGRyaXZlciB0byBkcm1fYnJpZGdlX2Z1bmNzLCBhbmQgaW1wbGVt
ZW50IHRoZQphdG9taWNfZ2V0X2lucHV0X2J1c19mbXRzL2F0b21pY19nZXRfb3V0cHV0X2J1c19m
bXRzLgoKU2lnbmVkLW9mZi1ieTogTmVpbCBBcm1zdHJvbmcgPG5hcm1zdHJvbmdAYmF5bGlicmUu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl9kd19oZG1pLmMgfCA2NyArKysr
KysrKysrKysrKysrKysrKystLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA1NCBpbnNlcnRpb25zKCsp
LCAxMyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVz
b25fZHdfaGRtaS5jIGIvZHJpdmVycy9ncHUvZHJtL21lc29uL21lc29uX2R3X2hkbWkuYwppbmRl
eCBmODkzZWJkMGI3OTkuLjMzMzU4M2VmM2FiOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L21lc29uL21lc29uX2R3X2hkbWkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25f
ZHdfaGRtaS5jCkBAIC0zNjgsNyArMzY4LDcgQEAgc3RhdGljIGlubGluZSB2b2lkIG1lc29uX2R3
X2hkbWlfcGh5X3Jlc2V0KHN0cnVjdCBtZXNvbl9kd19oZG1pICpkd19oZG1pKQogfQogCiBzdGF0
aWMgdm9pZCBkd19oZG1pX3NldF92Y2xrKHN0cnVjdCBtZXNvbl9kd19oZG1pICpkd19oZG1pLAot
CQkJICAgICBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKKwkJCSAgICAgY29uc3Qgc3Ry
dWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCiB7CiAJc3RydWN0IG1lc29uX2RybSAqcHJpdiA9
IGR3X2hkbWktPnByaXY7CiAJaW50IHZpYyA9IGRybV9tYXRjaF9jZWFfbW9kZShtb2RlKTsKQEAg
LTY2Myw2ICs2NjMsMTAgQEAgZHdfaGRtaV9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fY29ubmVjdG9y
ICpjb25uZWN0b3IsCiAKIC8qIEVuY29kZXIgKi8KIAorc3RhdGljIGNvbnN0IHUzMiBtZXNvbl9k
d19oZG1pX291dF9idXNfZm10c1tdID0geworCU1FRElBX0JVU19GTVRfWVVWOF8xWDI0LAorfTsK
Kwogc3RhdGljIHZvaWQgbWVzb25fdmVuY19oZG1pX2VuY29kZXJfZGVzdHJveShzdHJ1Y3QgZHJt
X2VuY29kZXIgKmVuY29kZXIpCiB7CiAJZHJtX2VuY29kZXJfY2xlYW51cChlbmNvZGVyKTsKQEAg
LTY3MiwxNSArNjc2LDUwIEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2VuY29kZXJfZnVuY3Mg
bWVzb25fdmVuY19oZG1pX2VuY29kZXJfZnVuY3MgPSB7CiAJLmRlc3Ryb3kgICAgICAgID0gbWVz
b25fdmVuY19oZG1pX2VuY29kZXJfZGVzdHJveSwKIH07CiAKLXN0YXRpYyBpbnQgbWVzb25fdmVu
Y19oZG1pX2VuY29kZXJfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwK
K3N0YXRpYyB2b2lkCittZXNvbl92ZW5jX2hkbWlfZW5jb2Rlcl9nZXRfb3V0X2J1c19mbXRzKHN0
cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJCSBzdHJ1Y3QgZHJtX2JyaWRnZV9zdGF0ZSAq
YnJpZGdlX3N0YXRlLAorCQkJCQkgc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAor
CQkJCQkgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGUsCisJCQkJCSB1bnNp
Z25lZCBpbnQgKm51bV9vdXRwdXRfZm10cywKKwkJCQkJIHUzMiAqb3V0cHV0X2ZtdHMpCit7CisJ
Km51bV9vdXRwdXRfZm10cyA9IEFSUkFZX1NJWkUobWVzb25fZHdfaGRtaV9vdXRfYnVzX2ZtdHMp
OworCisJaWYgKG91dHB1dF9mbXRzKQorCQltZW1jcHkob3V0cHV0X2ZtdHMsIG1lc29uX2R3X2hk
bWlfb3V0X2J1c19mbXRzLAorCQkgICAgICAgQVJSQVlfU0laRShtZXNvbl9kd19oZG1pX291dF9i
dXNfZm10cykpOworfQorCitzdGF0aWMgdm9pZAorbWVzb25fdmVuY19oZG1pX2VuY29kZXJfZ2V0
X2lucF9idXNfZm10cyhzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCQlzdHJ1Y3QgZHJt
X2JyaWRnZV9zdGF0ZSAqYnJpZGdlX3N0YXRlLAorCQkJCQlzdHJ1Y3QgZHJtX2NydGNfc3RhdGUg
KmNydGNfc3RhdGUsCisJCQkJCXN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRl
LAorCQkJCQl1MzIgb3V0cHV0X2ZtdCwKKwkJCQkJdW5zaWduZWQgaW50ICpudW1faW5wdXRfZm10
cywKKwkJCQkJdTMyICppbnB1dF9mbXRzKQoreworCWlmIChvdXRwdXRfZm10ID09IG1lc29uX2R3
X2hkbWlfb3V0X2J1c19mbXRzWzBdKSB7CisJCSpudW1faW5wdXRfZm10cyA9IDE7CisJCWlmIChp
bnB1dF9mbXRzKQorCQkJaW5wdXRfZm10c1swXSA9IG91dHB1dF9mbXQ7CisJfQorCWVsc2UKKwkJ
Km51bV9pbnB1dF9mbXRzID0gMDsKK30KKworc3RhdGljIGludCBtZXNvbl92ZW5jX2hkbWlfZW5j
b2Rlcl9hdG9taWNfY2hlY2soc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkJc3RydWN0
IGRybV9icmlkZ2Vfc3RhdGUgKmJyaWRnZV9zdGF0ZSwKIAkJCQkJc3RydWN0IGRybV9jcnRjX3N0
YXRlICpjcnRjX3N0YXRlLAogCQkJCQlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9z
dGF0ZSkKIHsKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIHZvaWQgbWVzb25fdmVuY19oZG1pX2Vu
Y29kZXJfZGlzYWJsZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCitzdGF0aWMgdm9pZCBt
ZXNvbl92ZW5jX2hkbWlfZW5jb2Rlcl9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2Up
CiB7CisJc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyID0gYnJpZGdlX3RvX2VuY29kZXIoYnJp
ZGdlKTsKIAlzdHJ1Y3QgbWVzb25fZHdfaGRtaSAqZHdfaGRtaSA9IGVuY29kZXJfdG9fbWVzb25f
ZHdfaGRtaShlbmNvZGVyKTsKIAlzdHJ1Y3QgbWVzb25fZHJtICpwcml2ID0gZHdfaGRtaS0+cHJp
djsKIApAQCAtNjkzLDggKzczMiw5IEBAIHN0YXRpYyB2b2lkIG1lc29uX3ZlbmNfaGRtaV9lbmNv
ZGVyX2Rpc2FibGUoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQogCXdyaXRlbF9yZWxheGVk
KDAsIHByaXYtPmlvX2Jhc2UgKyBfUkVHKEVOQ1BfVklERU9fRU4pKTsKIH0KIAotc3RhdGljIHZv
aWQgbWVzb25fdmVuY19oZG1pX2VuY29kZXJfZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5j
b2RlcikKK3N0YXRpYyB2b2lkIG1lc29uX3ZlbmNfaGRtaV9lbmNvZGVyX2VuYWJsZShzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlKQogeworCXN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciA9IGJy
aWRnZV90b19lbmNvZGVyKGJyaWRnZSk7CiAJc3RydWN0IG1lc29uX2R3X2hkbWkgKmR3X2hkbWkg
PSBlbmNvZGVyX3RvX21lc29uX2R3X2hkbWkoZW5jb2Rlcik7CiAJc3RydWN0IG1lc29uX2RybSAq
cHJpdiA9IGR3X2hkbWktPnByaXY7CiAKQEAgLTcwNiwxMCArNzQ2LDExIEBAIHN0YXRpYyB2b2lk
IG1lc29uX3ZlbmNfaGRtaV9lbmNvZGVyX2VuYWJsZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29k
ZXIpCiAJCXdyaXRlbF9yZWxheGVkKDEsIHByaXYtPmlvX2Jhc2UgKyBfUkVHKEVOQ1BfVklERU9f
RU4pKTsKIH0KIAotc3RhdGljIHZvaWQgbWVzb25fdmVuY19oZG1pX2VuY29kZXJfbW9kZV9zZXQo
c3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyLAotCQkJCSAgIHN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlICptb2RlLAotCQkJCSAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2Rl
KQorc3RhdGljIHZvaWQgbWVzb25fdmVuY19oZG1pX2VuY29kZXJfbW9kZV9zZXQoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAq
bW9kZSwKKwkJCQkgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9k
ZSkKIHsKKwlzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIgPSBicmlkZ2VfdG9fZW5jb2Rlcihi
cmlkZ2UpOwogCXN0cnVjdCBtZXNvbl9kd19oZG1pICpkd19oZG1pID0gZW5jb2Rlcl90b19tZXNv
bl9kd19oZG1pKGVuY29kZXIpOwogCXN0cnVjdCBtZXNvbl9kcm0gKnByaXYgPSBkd19oZG1pLT5w
cml2OwogCWludCB2aWMgPSBkcm1fbWF0Y2hfY2VhX21vZGUobW9kZSk7CkBAIC03MjYsMTEgKzc2
NywxMiBAQCBzdGF0aWMgdm9pZCBtZXNvbl92ZW5jX2hkbWlfZW5jb2Rlcl9tb2RlX3NldChzdHJ1
Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIsCiAJd3JpdGVsX3JlbGF4ZWQoMCwgcHJpdi0+aW9fYmFz
ZSArIF9SRUcoVlBVX0hETUlfRk1UX0NUUkwpKTsKIH0KIAotc3RhdGljIGNvbnN0IHN0cnVjdCBk
cm1fZW5jb2Rlcl9oZWxwZXJfZnVuY3MKLQkJCQltZXNvbl92ZW5jX2hkbWlfZW5jb2Rlcl9oZWxw
ZXJfZnVuY3MgPSB7Ci0JLmF0b21pY19jaGVjawk9IG1lc29uX3ZlbmNfaGRtaV9lbmNvZGVyX2F0
b21pY19jaGVjaywKLQkuZGlzYWJsZQk9IG1lc29uX3ZlbmNfaGRtaV9lbmNvZGVyX2Rpc2FibGUs
CitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9icmlkZ2VfZnVuY3MgbWVzb25fdmVuY19oZG1pX2Vu
Y29kZXJfYnJpZGdlX2Z1bmNzID0gewogCS5lbmFibGUJCT0gbWVzb25fdmVuY19oZG1pX2VuY29k
ZXJfZW5hYmxlLAorCS5kaXNhYmxlCT0gbWVzb25fdmVuY19oZG1pX2VuY29kZXJfZGlzYWJsZSwK
KwkuYXRvbWljX2NoZWNrCT0gbWVzb25fdmVuY19oZG1pX2VuY29kZXJfYXRvbWljX2NoZWNrLAor
CS5hdG9taWNfZ2V0X291dHB1dF9idXNfZm10cyA9IG1lc29uX3ZlbmNfaGRtaV9lbmNvZGVyX2dl
dF9vdXRfYnVzX2ZtdHMsCisJLmF0b21pY19nZXRfaW5wdXRfYnVzX2ZtdHMgPSBtZXNvbl92ZW5j
X2hkbWlfZW5jb2Rlcl9nZXRfaW5wX2J1c19mbXRzLAogCS5tb2RlX3NldAk9IG1lc29uX3ZlbmNf
aGRtaV9lbmNvZGVyX21vZGVfc2V0LAogfTsKIApAQCAtOTEyLDggKzk1NCw3IEBAIHN0YXRpYyBp
bnQgbWVzb25fZHdfaGRtaV9iaW5kKHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZSAq
bWFzdGVyLAogCiAJLyogRW5jb2RlciAqLwogCi0JZHJtX2VuY29kZXJfaGVscGVyX2FkZChlbmNv
ZGVyLCAmbWVzb25fdmVuY19oZG1pX2VuY29kZXJfaGVscGVyX2Z1bmNzKTsKLQorCWVuY29kZXIt
PmJyaWRnZS5mdW5jcyA9ICZtZXNvbl92ZW5jX2hkbWlfZW5jb2Rlcl9icmlkZ2VfZnVuY3M7CiAJ
cmV0ID0gZHJtX2VuY29kZXJfaW5pdChkcm0sIGVuY29kZXIsICZtZXNvbl92ZW5jX2hkbWlfZW5j
b2Rlcl9mdW5jcywKIAkJCSAgICAgICBEUk1fTU9ERV9FTkNPREVSX1RNRFMsICJtZXNvbl9oZG1p
Iik7CiAJaWYgKHJldCkgewotLSAKMi4yMi4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9kcmktZGV2ZWw=
