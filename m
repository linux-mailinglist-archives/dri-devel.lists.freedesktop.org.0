Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A8F4051905
	for <lists+dri-devel@lfdr.de>; Mon, 24 Jun 2019 18:51:57 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9468889C6C;
	Mon, 24 Jun 2019 16:51:53 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from merlin.infradead.org (merlin.infradead.org
 [IPv6:2001:8b0:10b:1231::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D39D989C6B;
 Mon, 24 Jun 2019 16:51:51 +0000 (UTC)
Received: from j217100.upc-j.chello.nl ([24.132.217.100]
 helo=hirez.programming.kicks-ass.net)
 by merlin.infradead.org with esmtpsa (Exim 4.92 #3 (Red Hat Linux))
 id 1hfSAX-0001KU-Je; Mon, 24 Jun 2019 16:50:13 +0000
Received: by hirez.programming.kicks-ass.net (Postfix, from userid 1000)
 id 5A0AD20A58BED; Mon, 24 Jun 2019 18:50:12 +0200 (CEST)
Date: Mon, 24 Jun 2019 18:50:12 +0200
From: Peter Zijlstra <peterz@infradead.org>
To: David Howells <dhowells@redhat.com>,
 Paul McKenney <paulmck@linux.vnet.ibm.com>,
 Will Deacon <will.deacon@arm.com>
Subject: [RFC][PATCH] wake_up_var() memory ordering
Message-ID: <20190624165012.GH3436@hirez.programming.kicks-ass.net>
MIME-Version: 1.0
Content-Disposition: inline
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; 
 d=infradead.org; s=merlin.20170209; h=Content-Type:MIME-Version:Message-ID:
 Subject:Cc:To:From:Date:Sender:Reply-To:Content-Transfer-Encoding:Content-ID:
 Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc
 :Resent-Message-ID:In-Reply-To:References:List-Id:List-Help:List-Unsubscribe:
 List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=W/VEZbdGhUjH117MWiO4d1Ef5HTQzP6Qget39bh1OFc=; b=RTajwX88KgEy6Vvum/1kuLKzh6
 fwpB5b6gOLbWafSNETBy8R9NscyoSMEobsA6YOmbM7YD3cV7LAzp+M1xmsziRSqCLLdUXMcCQMUv3
 +0VK56QUOuO2gLYe9O1VCEH8H45fzNRki3xKIKgi1WYo0ROiSt+p+fYtjikT/iNKR9KxJlQa+wxIQ
 nUgcQWtO1sZD0MB49h08xVYFYdIiHpuTr1ECn73NtK2WkYTOqIkRi3zYESWp7acoGvNKu/e1BUwy0
 rVy4ljL9gQowk9V7MC6gK7o6Smv+qS/FSncd/tpmT4eXFKUZ7yHXByj2QtHedMc+5USAjXFYYEvZO
 5lIXxw8g==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Martin Brandenburg <martin@omnibond.com>, linux-cachefs@redhat.com,
 Mike Snitzer <snitzer@redhat.com>, linux-aio@kvack.org,
 David Airlie <airlied@linux.ie>, samba-technical@lists.samba.org,
 dri-devel@lists.freedesktop.org, David Howells <dhowells@redhat.com>,
 Chris Mason <clm@fb.com>, dm-devel@redhat.com, keyrings@vger.kernel.org,
 Ingo Molnar <mingo@redhat.com>, linux-afs@lists.infradead.org,
 Alasdair Kergon <agk@redhat.com>, Mike Marshall <hubcap@omnibond.com>,
 linux-cifs@vger.kernel.org, rds-devel@oss.oracle.com,
 Andreas Gruenbacher <agruenba@redhat.com>, linux-rdma@vger.kernel.org,
 James Morris <jmorris@namei.org>, cluster-devel@redhat.com,
 Peter Zijlstra <peterz@infradead.org>,
 Matthias Brugger <matthias.bgg@gmail.com>, intel-gfx@lists.freedesktop.org,
 devel@lists.orangefs.org, "Serge E. Hallyn" <serge@hallyn.com>,
 Santosh Shilimkar <santosh.shilimkar@oracle.com>,
 Johan Hedberg <johan.hedberg@gmail.com>, Marcel Holtmann <marcel@holtmann.org>,
 Sean Wang <sean.wang@mediatek.com>, Josef Bacik <josef@toxicpanda.com>,
 linux-fsdevel@vger.kernel.org, linux-mediatek@lists.infradead.org,
 Alexander Viro <viro@zeniv.linux.org.uk>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>, David Sterba <dsterba@suse.com>,
 MauroCarvalho Chehab <mchehab@kernel.org>,
 Trond Myklebust <trond.myklebust@hammerspace.com>,
 linux-arm-kernel@lists.infradead.org, "J. Bruce Fields" <bfields@fieldses.org>,
 linux-nfs@vger.kernel.org, netdev@vger.kernel.org,
 Jeff Layton <jlayton@kernel.org>, linux-kernel@vger.kernel.org,
 "David S. Miller" <davem@davemloft.net>, Steve French <sfrench@samba.org>,
 linux-bluetooth@vger.kernel.org, linux-security-module@vger.kernel.org,
 Benjamin LaHaise <bcrl@kvack.org>, Bob Peterson <rpeterso@redhat.com>,
 linux-media@vger.kernel.org, Anna Schumaker <anna.schumaker@netapp.com>,
 linux-btrfs@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgYWxsLAoKSSB0cmllZCB1c2luZyB3YWtlX3VwX3ZhcigpIHRvZGF5IGFuZCBhY2NpZGVudGFs
bHkgbm90aWNlZCB0aGF0IGl0CmRpZG4ndCBpbXBseSBhbiBzbXBfbWIoKSBhbmQgc3BlY2lmaWNh
bGx5IHJlcXVpcmVzIGl0IHRocm91Z2gKd2FrZV91cF9iaXQoKSAvIHdhaXRxdWV1ZV9hY3RpdmUo
KS4KCk5vdywgd2FrZV91cF9iaXQoKSBkb2Vzbid0IGltcGx5IHRoZSBiYXJyaWVyIGJlY2F1c2Ug
aXQgaXMgYXNzdW1lZCB0byBiZQp1c2VkIHdpdGggdGhlIGF0b21pYyBiaXRvcHMgQVBJIHdoaWNo
IGVpdGhlciBpbXBsaWVzICh0ZXN0X2FuZF9jbGVhcikgb3IKb25seSBuZWVkcyBzbXBfbWJfX2Fm
dGVyX2F0b21pYygpLCB3aGljaCBpcyAnbXVjaCcgY2hlYXBlciB0aGFuIGFuCnVuY29uZGl0aW9u
YWwgc21wX21iKCkuCgpTdGlsbCwgd2hpbGUgYXVkaXRpbmcgYWxsIHRoYXQsIEkgZm91bmQgYSB3
aG9sZSBidW5jaCBvZiB0aGluZ3MgdGhhdApjb3VsZCBiZSBpbXByb3ZlZC4gVGhlcmUgd2VyZSBt
aXNzaW5nIGJhcnJpZXJzLCBzdXBlcmZsdW91cyBiYXJyaWVycyBhbmQKYSB3aG9sZSBidW5jaCBv
ZiBzaXRlcyB0aGF0IGNvdWxkIHVzZSBjbGVhcl9hbmRfd2FrZV91cF9iaXQoKS4KClNvIHRoaXMg
Zml4ZXMgYWxsIHdha2VfdXBfYml0KCkgdXNhZ2Ugd2l0aG91dCBhY3R1YWxseSBjaGFuZ2luZwpz
ZW1hbnRpY3Mgb2YgaXQgKHdoaWNoIGFyZSB1bmZvcnR1bmF0ZSBidXQgdW5kZXJzdGFuZGFibGUp
LiBUaGlzIGRvZXMKaG93ZXZlciBjaGFuZ2UgdGhlIHNlbWFudGljcyBvZiB3YWtlX3VwX3Zhcigp
OyBldmVuIHRob3VnaCB3YWtlX3VwX3ZhcigpCmlzIG1vc3Qgb2Z0ZW4gdXNlZCB3aXRoIGF0b21p
Y3MgYW5kIHRoZW4gdGhlIGFkZGl0aW9uYWwgc21wX21iKCkgaXMgbW9zdApvZnRlbiBzdXBlcmZs
dW91cyA6LwoKVGhlcmUgaXNuJ3QgcmVhbGx5IGEgZ29vZCBvcHRpb24gaGVyZSwgY29tbWVudHMg
KG90aGVyIHRoYW4gSSBuZWVkIHRvCnNwbGl0IHRoaXMgdXApPwoKCi0tLQogZHJpdmVycy9ibHVl
dG9vdGgvYnRtdGtzZGlvLmMgICAgICAgICAgICAgICB8ICA1ICstLS0tCiBkcml2ZXJzL2JsdWV0
b290aC9idG10a3VhcnQuYyAgICAgICAgICAgICAgIHwgIDUgKy0tLS0KIGRyaXZlcnMvYmx1ZXRv
b3RoL2hjaV9tcnZsLmMgICAgICAgICAgICAgICAgfCAgOCArKy0tLS0tLQogZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9yZXNldC5jICAgICAgICAgICB8ICA2ICsrLS0tLQogZHJpdmVycy9tZC9k
bS1idWZpby5jICAgICAgICAgICAgICAgICAgICAgICB8IDEwICsrLS0tLS0tLS0KIGRyaXZlcnMv
bWVkaWEvdXNiL2R2Yi11c2ItdjIvZHZiX3VzYl9jb3JlLmMgfCAxNSArKysrLS0tLS0tLS0tLS0K
IGZzL2Fmcy9mc19wcm9iZS5jICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgMSArCiBmcy9h
ZnMvc2VydmVyLmMgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDEgKwogZnMvYWZzL3Zs
X3Byb2JlLmMgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAxICsKIGZzL2Fmcy92b2x1bWUu
YyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgMSArCiBmcy9haW8uYyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDQgKy0tLQogZnMvYmxvY2tfZGV2LmMgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB8ICAxICsKIGZzL2J0cmZzL2V4dGVudF9pby5jICAgICAg
ICAgICAgICAgICAgICAgICAgfCAgNCArLS0tCiBmcy9jYWNoZWZpbGVzL25hbWVpLmMgICAgICAg
ICAgICAgICAgICAgICAgIHwgIDEgKwogZnMvY2lmcy9jb25uZWN0LmMgICAgICAgICAgICAgICAg
ICAgICAgICAgICB8ICAzICstLQogZnMvY2lmcy9taXNjLmMgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB8IDE1ICsrKysrLS0tLS0tLS0tLQogZnMvZnNjYWNoZS9jb29raWUuYyAgICAgICAg
ICAgICAgICAgICAgICAgICB8ICAyICsrCiBmcy9mc2NhY2hlL29iamVjdC5jICAgICAgICAgICAg
ICAgICAgICAgICAgIHwgIDIgKysKIGZzL2ZzY2FjaGUvcGFnZS5jICAgICAgICAgICAgICAgICAg
ICAgICAgICAgfCAgMyArKysKIGZzL2dmczIvZ2xvY2suYyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgfCAgOCArKy0tLS0tLQogZnMvZ2ZzMi9nbG9wcy5jICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB8ICAxICsKIGZzL2dmczIvbG9ja19kbG0uYyAgICAgICAgICAgICAgICAgICAgICAg
ICAgfCAgOCArKy0tLS0tLQogZnMvZ2ZzMi9yZWNvdmVyeS5jICAgICAgICAgICAgICAgICAgICAg
ICAgICB8ICA0ICstLS0KIGZzL2dmczIvc3VwZXIuYyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgfCAgMSArCiBmcy9nZnMyL3N5cy5jICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwg
IDQgKy0tLQogZnMvbmZzL25mczRzdGF0ZS5jICAgICAgICAgICAgICAgICAgICAgICAgICB8ICA0
ICstLS0KIGZzL25mcy9wbmZzX25mcy5jICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgNCAr
LS0tCiBmcy9uZnNkL25mczRyZWNvdmVyLmMgICAgICAgICAgICAgICAgICAgICAgIHwgIDQgKy0t
LQogZnMvb3JhbmdlZnMvZmlsZS5jICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAyICstCiBr
ZXJuZWwvc2NoZWQvd2FpdF9iaXQuYyAgICAgICAgICAgICAgICAgICAgIHwgIDEgKwogbmV0L2Js
dWV0b290aC9oY2lfZXZlbnQuYyAgICAgICAgICAgICAgICAgICB8ICA1ICstLS0tCiBuZXQvcmRz
L2liX3JlY3YuYyAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDEgKwogc2VjdXJpdHkva2V5
cy9nYy5jICAgICAgICAgICAgICAgICAgICAgICAgICB8ICA1ICsrLS0tCiAzMyBmaWxlcyBjaGFu
Z2VkLCA1MCBpbnNlcnRpb25zKCspLCA5MCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2JsdWV0b290aC9idG10a3NkaW8uYyBiL2RyaXZlcnMvYmx1ZXRvb3RoL2J0bXRrc2Rpby5j
CmluZGV4IDgxMzMzODI4ODQ1My4uMjc1MjNjZmVhYzlhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2Js
dWV0b290aC9idG10a3NkaW8uYworKysgYi9kcml2ZXJzL2JsdWV0b290aC9idG10a3NkaW8uYwpA
QCAtMzU2LDExICszNTYsOCBAQCBzdGF0aWMgaW50IGJ0bXRrc2Rpb19yZWN2X2V2ZW50KHN0cnVj
dCBoY2lfZGV2ICpoZGV2LCBzdHJ1Y3Qgc2tfYnVmZiAqc2tiKQogCiAJaWYgKGhkci0+ZXZ0ID09
IEhDSV9FVl9WRU5ET1IpIHsKIAkJaWYgKHRlc3RfYW5kX2NsZWFyX2JpdChCVE1US1NESU9fVFhf
V0FJVF9WTkRfRVZULAotCQkJCSAgICAgICAmYmRldi0+dHhfc3RhdGUpKSB7Ci0JCQkvKiBCYXJy
aWVyIHRvIHN5bmMgd2l0aCBvdGhlciBDUFVzICovCi0JCQlzbXBfbWJfX2FmdGVyX2F0b21pYygp
OworCQkJCSAgICAgICAmYmRldi0+dHhfc3RhdGUpKQogCQkJd2FrZV91cF9iaXQoJmJkZXYtPnR4
X3N0YXRlLCBCVE1US1NESU9fVFhfV0FJVF9WTkRfRVZUKTsKLQkJfQogCX0KIAogCXJldHVybiAw
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ibHVldG9vdGgvYnRtdGt1YXJ0LmMgYi9kcml2ZXJzL2Js
dWV0b290aC9idG10a3VhcnQuYwppbmRleCBmNWRiZWVjOGUyNzQuLjdmZTMyNGRmMzc5OSAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ibHVldG9vdGgvYnRtdGt1YXJ0LmMKKysrIGIvZHJpdmVycy9ibHVl
dG9vdGgvYnRtdGt1YXJ0LmMKQEAgLTM0MCwxMSArMzQwLDggQEAgc3RhdGljIGludCBidG10a3Vh
cnRfcmVjdl9ldmVudChzdHJ1Y3QgaGNpX2RldiAqaGRldiwgc3RydWN0IHNrX2J1ZmYgKnNrYikK
IAogCWlmIChoZHItPmV2dCA9PSBIQ0lfRVZfVkVORE9SKSB7CiAJCWlmICh0ZXN0X2FuZF9jbGVh
cl9iaXQoQlRNVEtVQVJUX1RYX1dBSVRfVk5EX0VWVCwKLQkJCQkgICAgICAgJmJkZXYtPnR4X3N0
YXRlKSkgewotCQkJLyogQmFycmllciB0byBzeW5jIHdpdGggb3RoZXIgQ1BVcyAqLwotCQkJc21w
X21iX19hZnRlcl9hdG9taWMoKTsKKwkJCQkgICAgICAgJmJkZXYtPnR4X3N0YXRlKSkKIAkJCXdh
a2VfdXBfYml0KCZiZGV2LT50eF9zdGF0ZSwgQlRNVEtVQVJUX1RYX1dBSVRfVk5EX0VWVCk7Ci0J
CX0KIAl9CiAKIAlyZXR1cm4gMDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvYmx1ZXRvb3RoL2hjaV9t
cnZsLmMgYi9kcml2ZXJzL2JsdWV0b290aC9oY2lfbXJ2bC5jCmluZGV4IDUwMjEyYWM2MjllMy4u
ZjAzMjk0ZDM5ZDA4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2JsdWV0b290aC9oY2lfbXJ2bC5jCisr
KyBiL2RyaXZlcnMvYmx1ZXRvb3RoL2hjaV9tcnZsLmMKQEAgLTE1Nyw5ICsxNTcsNyBAQCBzdGF0
aWMgaW50IG1ydmxfcmVjdl9md19yZXEoc3RydWN0IGhjaV9kZXYgKmhkZXYsIHN0cnVjdCBza19i
dWZmICpza2IpCiAKIAltcnZsLT50eF9sZW4gPSBsZTE2X3RvX2NwdShwa3QtPmxocyk7CiAKLQlj
bGVhcl9iaXQoU1RBVEVfRldfUkVRX1BFTkRJTkcsICZtcnZsLT5mbGFncyk7Ci0Jc21wX21iX19h
ZnRlcl9hdG9taWMoKTsKLQl3YWtlX3VwX2JpdCgmbXJ2bC0+ZmxhZ3MsIFNUQVRFX0ZXX1JFUV9Q
RU5ESU5HKTsKKwljbGVhcl9hbmRfd2FrZV91cF9iaXQoU1RBVEVfRldfUkVRX1BFTkRJTkcsICZt
cnZsLT5mbGFncyk7CiAKIGRvbmU6CiAJa2ZyZWVfc2tiKHNrYik7CkBAIC0xOTIsOSArMTkwLDcg
QEAgc3RhdGljIGludCBtcnZsX3JlY3ZfY2hpcF92ZXIoc3RydWN0IGhjaV9kZXYgKmhkZXYsIHN0
cnVjdCBza19idWZmICpza2IpCiAKIAlidF9kZXZfaW5mbyhoZGV2LCAiQ29udHJvbGxlciBpZCA9
ICV4LCByZXYgPSAleCIsIG1ydmwtPmlkLCBtcnZsLT5yZXYpOwogCi0JY2xlYXJfYml0KFNUQVRF
X0NISVBfVkVSX1BFTkRJTkcsICZtcnZsLT5mbGFncyk7Ci0Jc21wX21iX19hZnRlcl9hdG9taWMo
KTsKLQl3YWtlX3VwX2JpdCgmbXJ2bC0+ZmxhZ3MsIFNUQVRFX0NISVBfVkVSX1BFTkRJTkcpOwor
CWNsZWFyX2FuZF93YWtlX3VwX2JpdChTVEFURV9DSElQX1ZFUl9QRU5ESU5HLCAmbXJ2bC0+Zmxh
Z3MpOwogCiBkb25lOgogCWtmcmVlX3NrYihza2IpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV9yZXNldC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZXNldC5j
CmluZGV4IDY3N2Q1OTMwNGU3OC4uNjgwOTM2N2RiZmE5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X3Jlc2V0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9y
ZXNldC5jCkBAIC0xMzI0LDEwICsxMzI0LDggQEAgdm9pZCBpOTE1X2hhbmRsZV9lcnJvcihzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKIAkJCWlmIChpOTE1X3Jlc2V0X2VuZ2luZShlbmdp
bmUsIG1zZykgPT0gMCkKIAkJCQllbmdpbmVfbWFzayAmPSB+ZW5naW5lLT5tYXNrOwogCi0JCQlj
bGVhcl9iaXQoSTkxNV9SRVNFVF9FTkdJTkUgKyBlbmdpbmUtPmlkLAotCQkJCSAgJmVycm9yLT5m
bGFncyk7Ci0JCQl3YWtlX3VwX2JpdCgmZXJyb3ItPmZsYWdzLAotCQkJCSAgICBJOTE1X1JFU0VU
X0VOR0lORSArIGVuZ2luZS0+aWQpOworCQkJY2xlYXJfYW5kX3dha2VfdXBfYml0KEk5MTVfUkVT
RVRfRU5HSU5FICsgZW5naW5lLT5pZCwKKwkJCQkJICAgICAgJmVycm9yLT5mbGFncyk7CiAJCX0K
IAl9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbWQvZG0tYnVmaW8uYyBiL2RyaXZlcnMvbWQvZG0t
YnVmaW8uYwppbmRleCAyYTQ4ZWEzZjFiMzAuLjMxMTQ4MzZjYzcxNyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9tZC9kbS1idWZpby5jCisrKyBiL2RyaXZlcnMvbWQvZG0tYnVmaW8uYwpAQCAtNjY3LDEw
ICs2NjcsNyBAQCBzdGF0aWMgdm9pZCB3cml0ZV9lbmRpbyhzdHJ1Y3QgZG1fYnVmZmVyICpiLCBi
bGtfc3RhdHVzX3Qgc3RhdHVzKQogCUJVR19PTighdGVzdF9iaXQoQl9XUklUSU5HLCAmYi0+c3Rh
dGUpKTsKIAogCXNtcF9tYl9fYmVmb3JlX2F0b21pYygpOwotCWNsZWFyX2JpdChCX1dSSVRJTkcs
ICZiLT5zdGF0ZSk7Ci0Jc21wX21iX19hZnRlcl9hdG9taWMoKTsKLQotCXdha2VfdXBfYml0KCZi
LT5zdGF0ZSwgQl9XUklUSU5HKTsKKwljbGVhcl9hbmRfd2FrZV91cF9iaXQoQl9XUklUSU5HLCAm
Yi0+c3RhdGUpOwogfQogCiAvKgpAQCAtMTA0NSwxMCArMTA0Miw3IEBAIHN0YXRpYyB2b2lkIHJl
YWRfZW5kaW8oc3RydWN0IGRtX2J1ZmZlciAqYiwgYmxrX3N0YXR1c190IHN0YXR1cykKIAlCVUdf
T04oIXRlc3RfYml0KEJfUkVBRElORywgJmItPnN0YXRlKSk7CiAKIAlzbXBfbWJfX2JlZm9yZV9h
dG9taWMoKTsKLQljbGVhcl9iaXQoQl9SRUFESU5HLCAmYi0+c3RhdGUpOwotCXNtcF9tYl9fYWZ0
ZXJfYXRvbWljKCk7Ci0KLQl3YWtlX3VwX2JpdCgmYi0+c3RhdGUsIEJfUkVBRElORyk7CisJY2xl
YXJfYW5kX3dha2VfdXBfYml0KEJfUkVBRElORywgJmItPnN0YXRlKTsKIH0KIAogLyoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvbWVkaWEvdXNiL2R2Yi11c2ItdjIvZHZiX3VzYl9jb3JlLmMgYi9kcml2
ZXJzL21lZGlhL3VzYi9kdmItdXNiLXYyL2R2Yl91c2JfY29yZS5jCmluZGV4IGU1ZTA1NmJmOWRm
YS4uZmE0NmJjOTMwNzA0IDEwMDY0NAotLS0gYS9kcml2ZXJzL21lZGlhL3VzYi9kdmItdXNiLXYy
L2R2Yl91c2JfY29yZS5jCisrKyBiL2RyaXZlcnMvbWVkaWEvdXNiL2R2Yi11c2ItdjIvZHZiX3Vz
Yl9jb3JlLmMKQEAgLTM3NCw5ICszNzQsNyBAQCBzdGF0aWMgaW50IGR2Yl91c2Jfc3RvcF9mZWVk
KHN0cnVjdCBkdmJfZGVtdXhfZmVlZCAqZHZiZG14ZmVlZCkKIAl1c2JfdXJiX2tpbGx2MigmYWRh
cC0+c3RyZWFtKTsKIAogCS8qIGNsZWFyICdzdHJlYW1pbmcnIHN0YXR1cyBiaXQgKi8KLQljbGVh
cl9iaXQoQURBUF9TVFJFQU1JTkcsICZhZGFwLT5zdGF0ZV9iaXRzKTsKLQlzbXBfbWJfX2FmdGVy
X2F0b21pYygpOwotCXdha2VfdXBfYml0KCZhZGFwLT5zdGF0ZV9iaXRzLCBBREFQX1NUUkVBTUlO
Ryk7CisJY2xlYXJfYW5kX3dha2VfdXBfYml0KEFEQVBfU1RSRUFNSU5HLCAmYWRhcC0+c3RhdGVf
Yml0cyk7CiBza2lwX2ZlZWRfc3RvcDoKIAogCWlmIChyZXQpCkBAIC01NzgsMTEgKzU3Niw4IEBA
IHN0YXRpYyBpbnQgZHZiX3VzYl9mZV9pbml0KHN0cnVjdCBkdmJfZnJvbnRlbmQgKmZlKQogCQkJ
Z290byBlcnI7CiAJfQogZXJyOgotCWlmICghYWRhcC0+c3VzcGVuZF9yZXN1bWVfYWN0aXZlKSB7
Ci0JCWNsZWFyX2JpdChBREFQX0lOSVQsICZhZGFwLT5zdGF0ZV9iaXRzKTsKLQkJc21wX21iX19h
ZnRlcl9hdG9taWMoKTsKLQkJd2FrZV91cF9iaXQoJmFkYXAtPnN0YXRlX2JpdHMsIEFEQVBfSU5J
VCk7Ci0JfQorCWlmICghYWRhcC0+c3VzcGVuZF9yZXN1bWVfYWN0aXZlKQorCQljbGVhcl9hbmRf
d2FrZV91cF9iaXQoQURBUF9JTklULCAmYWRhcC0+c3RhdGVfYml0cyk7CiAKIAlkZXZfZGJnKCZk
LT51ZGV2LT5kZXYsICIlczogcmV0PSVkXG4iLCBfX2Z1bmNfXywgcmV0KTsKIAlyZXR1cm4gcmV0
OwpAQCAtNjE5LDkgKzYxNCw3IEBAIHN0YXRpYyBpbnQgZHZiX3VzYl9mZV9zbGVlcChzdHJ1Y3Qg
ZHZiX2Zyb250ZW5kICpmZSkKIGVycjoKIAlpZiAoIWFkYXAtPnN1c3BlbmRfcmVzdW1lX2FjdGl2
ZSkgewogCQlhZGFwLT5hY3RpdmVfZmUgPSAtMTsKLQkJY2xlYXJfYml0KEFEQVBfU0xFRVAsICZh
ZGFwLT5zdGF0ZV9iaXRzKTsKLQkJc21wX21iX19hZnRlcl9hdG9taWMoKTsKLQkJd2FrZV91cF9i
aXQoJmFkYXAtPnN0YXRlX2JpdHMsIEFEQVBfU0xFRVApOworCQljbGVhcl9hbmRfd2FrZV91cF9i
aXQoQURBUF9TTEVFUCwgJmFkYXAtPnN0YXRlX2JpdHMpOwogCX0KIAogCWRldl9kYmcoJmQtPnVk
ZXYtPmRldiwgIiVzOiByZXQ9JWRcbiIsIF9fZnVuY19fLCByZXQpOwpkaWZmIC0tZ2l0IGEvZnMv
YWZzL2ZzX3Byb2JlLmMgYi9mcy9hZnMvZnNfcHJvYmUuYwppbmRleCBjZmU2MmIxNTRmNjguLjM3
N2VlMDdkNWY3NiAxMDA2NDQKLS0tIGEvZnMvYWZzL2ZzX3Byb2JlLmMKKysrIGIvZnMvYWZzL2Zz
X3Byb2JlLmMKQEAgLTE4LDYgKzE4LDcgQEAgc3RhdGljIGJvb2wgYWZzX2ZzX3Byb2JlX2RvbmUo
c3RydWN0IGFmc19zZXJ2ZXIgKnNlcnZlcikKIAogCXdha2VfdXBfdmFyKCZzZXJ2ZXItPnByb2Jl
X291dHN0YW5kaW5nKTsKIAljbGVhcl9iaXRfdW5sb2NrKEFGU19TRVJWRVJfRkxfUFJPQklORywg
JnNlcnZlci0+ZmxhZ3MpOworCXNtcF9tYl9fYWZ0ZXJfYXRvbWljKCk7CiAJd2FrZV91cF9iaXQo
JnNlcnZlci0+ZmxhZ3MsIEFGU19TRVJWRVJfRkxfUFJPQklORyk7CiAJcmV0dXJuIHRydWU7CiB9
CmRpZmYgLS1naXQgYS9mcy9hZnMvc2VydmVyLmMgYi9mcy9hZnMvc2VydmVyLmMKaW5kZXggZTkw
MGNkNzQzNjFiLi5jOWI3NGEzOTdjYzEgMTAwNjQ0Ci0tLSBhL2ZzL2Fmcy9zZXJ2ZXIuYworKysg
Yi9mcy9hZnMvc2VydmVyLmMKQEAgLTU2OSw2ICs1NjksNyBAQCBib29sIGFmc19jaGVja19zZXJ2
ZXJfcmVjb3JkKHN0cnVjdCBhZnNfZnNfY3Vyc29yICpmYywgc3RydWN0IGFmc19zZXJ2ZXIgKnNl
cnZlcgogCWlmICghdGVzdF9hbmRfc2V0X2JpdF9sb2NrKEFGU19TRVJWRVJfRkxfVVBEQVRJTkcs
ICZzZXJ2ZXItPmZsYWdzKSkgewogCQlzdWNjZXNzID0gYWZzX3VwZGF0ZV9zZXJ2ZXJfcmVjb3Jk
KGZjLCBzZXJ2ZXIpOwogCQljbGVhcl9iaXRfdW5sb2NrKEFGU19TRVJWRVJfRkxfVVBEQVRJTkcs
ICZzZXJ2ZXItPmZsYWdzKTsKKwkJc21wX21iX19hZnRlcl9hdG9taWMoKTsKIAkJd2FrZV91cF9i
aXQoJnNlcnZlci0+ZmxhZ3MsIEFGU19TRVJWRVJfRkxfVVBEQVRJTkcpOwogCQlfbGVhdmUoIiA9
ICVkIiwgc3VjY2Vzcyk7CiAJCXJldHVybiBzdWNjZXNzOwpkaWZmIC0tZ2l0IGEvZnMvYWZzL3Zs
X3Byb2JlLmMgYi9mcy9hZnMvdmxfcHJvYmUuYwppbmRleCA4NTg0OThjYzFiMDUuLjE5Mzk2MjRh
YTE0NyAxMDA2NDQKLS0tIGEvZnMvYWZzL3ZsX3Byb2JlLmMKKysrIGIvZnMvYWZzL3ZsX3Byb2Jl
LmMKQEAgLTE4LDYgKzE4LDcgQEAgc3RhdGljIGJvb2wgYWZzX3ZsX3Byb2JlX2RvbmUoc3RydWN0
IGFmc192bHNlcnZlciAqc2VydmVyKQogCiAJd2FrZV91cF92YXIoJnNlcnZlci0+cHJvYmVfb3V0
c3RhbmRpbmcpOwogCWNsZWFyX2JpdF91bmxvY2soQUZTX1ZMU0VSVkVSX0ZMX1BST0JJTkcsICZz
ZXJ2ZXItPmZsYWdzKTsKKwlzbXBfbWJfX2FmdGVyX2F0b21pYygpOwogCXdha2VfdXBfYml0KCZz
ZXJ2ZXItPmZsYWdzLCBBRlNfVkxTRVJWRVJfRkxfUFJPQklORyk7CiAJcmV0dXJuIHRydWU7CiB9
CmRpZmYgLS1naXQgYS9mcy9hZnMvdm9sdW1lLmMgYi9mcy9hZnMvdm9sdW1lLmMKaW5kZXggMDhm
ZGIzOTUxYzQ5Li5iOTY4ZTRlOTZmNmIgMTAwNjQ0Ci0tLSBhL2ZzL2Fmcy92b2x1bWUuYworKysg
Yi9mcy9hZnMvdm9sdW1lLmMKQEAgLTMwMyw2ICszMDMsNyBAQCBpbnQgYWZzX2NoZWNrX3ZvbHVt
ZV9zdGF0dXMoc3RydWN0IGFmc192b2x1bWUgKnZvbHVtZSwgc3RydWN0IGtleSAqa2V5KQogCQly
ZXQgPSBhZnNfdXBkYXRlX3ZvbHVtZV9zdGF0dXModm9sdW1lLCBrZXkpOwogCQljbGVhcl9iaXRf
dW5sb2NrKEFGU19WT0xVTUVfV0FJVCwgJnZvbHVtZS0+ZmxhZ3MpOwogCQljbGVhcl9iaXRfdW5s
b2NrKEFGU19WT0xVTUVfVVBEQVRJTkcsICZ2b2x1bWUtPmZsYWdzKTsKKwkJc21wX21iX19hZnRl
cl9hdG9taWMoKTsKIAkJd2FrZV91cF9iaXQoJnZvbHVtZS0+ZmxhZ3MsIEFGU19WT0xVTUVfV0FJ
VCk7CiAJCV9sZWF2ZSgiID0gJWQiLCByZXQpOwogCQlyZXR1cm4gcmV0OwpkaWZmIC0tZ2l0IGEv
ZnMvYWlvLmMgYi9mcy9haW8uYwppbmRleCAzNDkwZDFmYTBlMTYuLmEyMWFjYjdlZTJhNSAxMDA2
NDQKLS0tIGEvZnMvYWlvLmMKKysrIGIvZnMvYWlvLmMKQEAgLTExNTQsOSArMTE1NCw3IEBAIHN0
YXRpYyB2b2lkIGFpb19jb21wbGV0ZShzdHJ1Y3QgYWlvX2tpb2NiICppb2NiKQogCSAqIGxpa2Ug
aW4gd2FrZV91cF9iaXQoKSB3aGVyZSBjbGVhcmluZyBhIGJpdCBoYXMgdG8gYmUKIAkgKiBvcmRl
cmVkIHdpdGggdGhlIHVubG9ja2VkIHRlc3QuCiAJICovCi0Jc21wX21iKCk7Ci0KLQlpZiAod2Fp
dHF1ZXVlX2FjdGl2ZSgmY3R4LT53YWl0KSkKKwlpZiAod3FfaGFzX3NsZWVwZXIoJmN0eC0+d2Fp
dCkpCiAJCXdha2VfdXAoJmN0eC0+d2FpdCk7CiB9CiAKZGlmZiAtLWdpdCBhL2ZzL2Jsb2NrX2Rl
di5jIGIvZnMvYmxvY2tfZGV2LmMKaW5kZXggNzQ5ZjU5ODQ0MjVkLi44MGUzNWNiZmM3Y2MgMTAw
NjQ0Ci0tLSBhL2ZzL2Jsb2NrX2Rldi5jCisrKyBiL2ZzL2Jsb2NrX2Rldi5jCkBAIC0xNjg3LDYg
KzE2ODcsNyBAQCBpbnQgYmxrZGV2X2dldChzdHJ1Y3QgYmxvY2tfZGV2aWNlICpiZGV2LCBmbW9k
ZV90IG1vZGUsIHZvaWQgKmhvbGRlcikKIAkJLyogdGVsbCBvdGhlcnMgdGhhdCB3ZSdyZSBkb25l
ICovCiAJCUJVR19PTih3aG9sZS0+YmRfY2xhaW1pbmcgIT0gaG9sZGVyKTsKIAkJd2hvbGUtPmJk
X2NsYWltaW5nID0gTlVMTDsKKwkJc21wX21iKCk7CiAJCXdha2VfdXBfYml0KCZ3aG9sZS0+YmRf
Y2xhaW1pbmcsIDApOwogCiAJCXNwaW5fdW5sb2NrKCZiZGV2X2xvY2spOwpkaWZmIC0tZ2l0IGEv
ZnMvYnRyZnMvZXh0ZW50X2lvLmMgYi9mcy9idHJmcy9leHRlbnRfaW8uYwppbmRleCBkYjMzN2U1
M2FhYjMuLmVlMTEzNmFlNDZmZCAxMDA2NDQKLS0tIGEvZnMvYnRyZnMvZXh0ZW50X2lvLmMKKysr
IGIvZnMvYnRyZnMvZXh0ZW50X2lvLmMKQEAgLTM2ODMsOSArMzY4Myw3IEBAIHN0YXRpYyBub2lu
bGluZV9mb3Jfc3RhY2sgaW50IGxvY2tfZXh0ZW50X2J1ZmZlcl9mb3JfaW8oc3RydWN0IGV4dGVu
dF9idWZmZXIgKmViCiAKIHN0YXRpYyB2b2lkIGVuZF9leHRlbnRfYnVmZmVyX3dyaXRlYmFjayhz
dHJ1Y3QgZXh0ZW50X2J1ZmZlciAqZWIpCiB7Ci0JY2xlYXJfYml0KEVYVEVOVF9CVUZGRVJfV1JJ
VEVCQUNLLCAmZWItPmJmbGFncyk7Ci0Jc21wX21iX19hZnRlcl9hdG9taWMoKTsKLQl3YWtlX3Vw
X2JpdCgmZWItPmJmbGFncywgRVhURU5UX0JVRkZFUl9XUklURUJBQ0spOworCWNsZWFyX2FuZF93
YWtlX3VwX2JpdChFWFRFTlRfQlVGRkVSX1dSSVRFQkFDSywgJmViLT5iZmxhZ3MpOwogfQogCiBz
dGF0aWMgdm9pZCBzZXRfYnRyZWVfaW9lcnIoc3RydWN0IHBhZ2UgKnBhZ2UpCmRpZmYgLS1naXQg
YS9mcy9jYWNoZWZpbGVzL25hbWVpLmMgYi9mcy9jYWNoZWZpbGVzL25hbWVpLmMKaW5kZXggZWNj
OGVjYmJmYTVhLi5lY2ViYmE3MmVjN2QgMTAwNjQ0Ci0tLSBhL2ZzL2NhY2hlZmlsZXMvbmFtZWku
YworKysgYi9mcy9jYWNoZWZpbGVzL25hbWVpLmMKQEAgLTI2Nyw2ICsyNjcsNyBAQCB2b2lkIGNh
Y2hlZmlsZXNfbWFya19vYmplY3RfaW5hY3RpdmUoc3RydWN0IGNhY2hlZmlsZXNfY2FjaGUgKmNh
Y2hlLAogCWNsZWFyX2JpdChDQUNIRUZJTEVTX09CSkVDVF9BQ1RJVkUsICZvYmplY3QtPmZsYWdz
KTsKIAl3cml0ZV91bmxvY2soJmNhY2hlLT5hY3RpdmVfbG9jayk7CiAKKwlzbXBfbWJfX2FmdGVy
X2F0b21pYygpOwogCXdha2VfdXBfYml0KCZvYmplY3QtPmZsYWdzLCBDQUNIRUZJTEVTX09CSkVD
VF9BQ1RJVkUpOwogCiAJLyogVGhpcyBvYmplY3QgY2FuIG5vdyBiZSBjdWxsZWQsIHNvIHdlIG5l
ZWQgdG8gbGV0IHRoZSBkYWVtb24ga25vdwpkaWZmIC0tZ2l0IGEvZnMvY2lmcy9jb25uZWN0LmMg
Yi9mcy9jaWZzL2Nvbm5lY3QuYwppbmRleCA4YzQxMjFkYTYyNGUuLjhjMTExNWVkMWMyOCAxMDA2
NDQKLS0tIGEvZnMvY2lmcy9jb25uZWN0LmMKKysrIGIvZnMvY2lmcy9jb25uZWN0LmMKQEAgLTUy
MzUsOCArNTIzNSw3IEBAIGNpZnNfc2JfdGxpbmsoc3RydWN0IGNpZnNfc2JfaW5mbyAqY2lmc19z
YikKIAl9CiAKIAl0bGluay0+dGxfdGNvbiA9IGNpZnNfY29uc3RydWN0X3Rjb24oY2lmc19zYiwg
ZnN1aWQpOwotCWNsZWFyX2JpdChUQ09OX0xJTktfUEVORElORywgJnRsaW5rLT50bF9mbGFncyk7
Ci0Jd2FrZV91cF9iaXQoJnRsaW5rLT50bF9mbGFncywgVENPTl9MSU5LX1BFTkRJTkcpOworCWNs
ZWFyX2FuZF93YWtlX3VwX2JpdChUQ09OX0xJTktfUEVORElORywgJnRsaW5rLT50bF9mbGFncyk7
CiAKIAlpZiAoSVNfRVJSKHRsaW5rLT50bF90Y29uKSkgewogCQljaWZzX3B1dF90bGluayh0bGlu
ayk7CmRpZmYgLS1naXQgYS9mcy9jaWZzL21pc2MuYyBiL2ZzL2NpZnMvbWlzYy5jCmluZGV4IGIx
YTY5NmE3M2Y3Yy4uOTYxNzUxZDg5MTEzIDEwMDY0NAotLS0gYS9mcy9jaWZzL21pc2MuYworKysg
Yi9mcy9jaWZzL21pc2MuYwpAQCAtNTg0LDEwICs1ODQsOCBAQCBpbnQgY2lmc19nZXRfd3JpdGVy
KHN0cnVjdCBjaWZzSW5vZGVJbmZvICpjaW5vZGUpCiAJLyogQ2hlY2sgdG8gc2VlIGlmIHdlIGhh
dmUgc3RhcnRlZCBzZXJ2aWNpbmcgYW4gb3Bsb2NrIGJyZWFrICovCiAJaWYgKHRlc3RfYml0KENJ
RlNfSU5PREVfUEVORElOR19PUExPQ0tfQlJFQUssICZjaW5vZGUtPmZsYWdzKSkgewogCQljaW5v
ZGUtPndyaXRlcnMtLTsKLQkJaWYgKGNpbm9kZS0+d3JpdGVycyA9PSAwKSB7Ci0JCQljbGVhcl9i
aXQoQ0lGU19JTk9ERV9QRU5ESU5HX1dSSVRFUlMsICZjaW5vZGUtPmZsYWdzKTsKLQkJCXdha2Vf
dXBfYml0KCZjaW5vZGUtPmZsYWdzLCBDSUZTX0lOT0RFX1BFTkRJTkdfV1JJVEVSUyk7Ci0JCX0K
KwkJaWYgKGNpbm9kZS0+d3JpdGVycyA9PSAwKQorCQkJY2xlYXJfYW5kX3dha2VfdXBfYml0KENJ
RlNfSU5PREVfUEVORElOR19XUklURVJTLCAmY2lub2RlLT5mbGFncyk7CiAJCXNwaW5fdW5sb2Nr
KCZjaW5vZGUtPndyaXRlcnNfbG9jayk7CiAJCWdvdG8gc3RhcnQ7CiAJfQpAQCAtNTk5LDEwICs1
OTcsOCBAQCB2b2lkIGNpZnNfcHV0X3dyaXRlcihzdHJ1Y3QgY2lmc0lub2RlSW5mbyAqY2lub2Rl
KQogewogCXNwaW5fbG9jaygmY2lub2RlLT53cml0ZXJzX2xvY2spOwogCWNpbm9kZS0+d3JpdGVy
cy0tOwotCWlmIChjaW5vZGUtPndyaXRlcnMgPT0gMCkgewotCQljbGVhcl9iaXQoQ0lGU19JTk9E
RV9QRU5ESU5HX1dSSVRFUlMsICZjaW5vZGUtPmZsYWdzKTsKLQkJd2FrZV91cF9iaXQoJmNpbm9k
ZS0+ZmxhZ3MsIENJRlNfSU5PREVfUEVORElOR19XUklURVJTKTsKLQl9CisJaWYgKGNpbm9kZS0+
d3JpdGVycyA9PSAwKQorCQljbGVhcl9hbmRfd2FrZV91cF9iaXQoQ0lGU19JTk9ERV9QRU5ESU5H
X1dSSVRFUlMsICZjaW5vZGUtPmZsYWdzKTsKIAlzcGluX3VubG9jaygmY2lub2RlLT53cml0ZXJz
X2xvY2spOwogfQogCkBAIC02MzAsOCArNjI2LDcgQEAgdm9pZCBjaWZzX3F1ZXVlX29wbG9ja19i
cmVhayhzdHJ1Y3QgY2lmc0ZpbGVJbmZvICpjZmlsZSkKIAogdm9pZCBjaWZzX2RvbmVfb3Bsb2Nr
X2JyZWFrKHN0cnVjdCBjaWZzSW5vZGVJbmZvICpjaW5vZGUpCiB7Ci0JY2xlYXJfYml0KENJRlNf
SU5PREVfUEVORElOR19PUExPQ0tfQlJFQUssICZjaW5vZGUtPmZsYWdzKTsKLQl3YWtlX3VwX2Jp
dCgmY2lub2RlLT5mbGFncywgQ0lGU19JTk9ERV9QRU5ESU5HX09QTE9DS19CUkVBSyk7CisJY2xl
YXJfYW5kX3dha2VfdXBfYml0KENJRlNfSU5PREVfUEVORElOR19PUExPQ0tfQlJFQUssICZjaW5v
ZGUtPmZsYWdzKTsKIH0KIAogYm9vbApkaWZmIC0tZ2l0IGEvZnMvZnNjYWNoZS9jb29raWUuYyBi
L2ZzL2ZzY2FjaGUvY29va2llLmMKaW5kZXggMGNlMzk2NThhNjIwLi40MGJhODk1N2ViZjAgMTAw
NjQ0Ci0tLSBhL2ZzL2ZzY2FjaGUvY29va2llLmMKKysrIGIvZnMvZnNjYWNoZS9jb29raWUuYwpA
QCAtMzgxLDYgKzM4MSw3IEBAIHZvaWQgX19mc2NhY2hlX2VuYWJsZV9jb29raWUoc3RydWN0IGZz
Y2FjaGVfY29va2llICpjb29raWUsCiAKIG91dF91bmxvY2s6CiAJY2xlYXJfYml0X3VubG9jayhG
U0NBQ0hFX0NPT0tJRV9FTkFCTEVNRU5UX0xPQ0ssICZjb29raWUtPmZsYWdzKTsKKwlzbXBfbWJf
X2FmdGVyX2F0b21pYygpOwogCXdha2VfdXBfYml0KCZjb29raWUtPmZsYWdzLCBGU0NBQ0hFX0NP
T0tJRV9FTkFCTEVNRU5UX0xPQ0spOwogfQogRVhQT1JUX1NZTUJPTChfX2ZzY2FjaGVfZW5hYmxl
X2Nvb2tpZSk7CkBAIC03NzgsNiArNzc5LDcgQEAgdm9pZCBfX2ZzY2FjaGVfZGlzYWJsZV9jb29r
aWUoc3RydWN0IGZzY2FjaGVfY29va2llICpjb29raWUsCiAKIG91dF91bmxvY2tfZW5hYmxlOgog
CWNsZWFyX2JpdF91bmxvY2soRlNDQUNIRV9DT09LSUVfRU5BQkxFTUVOVF9MT0NLLCAmY29va2ll
LT5mbGFncyk7CisJc21wX21iX19hZnRlcl9hdG9taWMoKTsKIAl3YWtlX3VwX2JpdCgmY29va2ll
LT5mbGFncywgRlNDQUNIRV9DT09LSUVfRU5BQkxFTUVOVF9MT0NLKTsKIAlfbGVhdmUoIiIpOwog
fQpkaWZmIC0tZ2l0IGEvZnMvZnNjYWNoZS9vYmplY3QuYyBiL2ZzL2ZzY2FjaGUvb2JqZWN0LmMK
aW5kZXggY2ZlYmE4MzlhMGYyLi4wOGIyZWRlYzY1OTYgMTAwNjQ0Ci0tLSBhL2ZzL2ZzY2FjaGUv
b2JqZWN0LmMKKysrIGIvZnMvZnNjYWNoZS9vYmplY3QuYwpAQCAtNTI0LDYgKzUyNCw3IEBAIHZv
aWQgZnNjYWNoZV9vYmplY3RfbG9va3VwX25lZ2F0aXZlKHN0cnVjdCBmc2NhY2hlX29iamVjdCAq
b2JqZWN0KQogCiAJCV9kZWJ1Zygid2FrZSB1cCBsb29rdXAgJXAiLCAmY29va2llLT5mbGFncyk7
CiAJCWNsZWFyX2JpdF91bmxvY2soRlNDQUNIRV9DT09LSUVfTE9PS0lOR19VUCwgJmNvb2tpZS0+
ZmxhZ3MpOworCQlzbXBfbWJfX2FmdGVyX2F0b21pYygpOwogCQl3YWtlX3VwX2JpdCgmY29va2ll
LT5mbGFncywgRlNDQUNIRV9DT09LSUVfTE9PS0lOR19VUCk7CiAJfQogCV9sZWF2ZSgiIik7CkBA
IC01NTksNiArNTYwLDcgQEAgdm9pZCBmc2NhY2hlX29idGFpbmVkX29iamVjdChzdHJ1Y3QgZnNj
YWNoZV9vYmplY3QgKm9iamVjdCkKIAkJICogdG8gYmVnaW4gc2hvdmVsbGluZyBkYXRhLgogCQkg
Ki8KIAkJY2xlYXJfYml0X3VubG9jayhGU0NBQ0hFX0NPT0tJRV9MT09LSU5HX1VQLCAmY29va2ll
LT5mbGFncyk7CisJCXNtcF9tYl9fYWZ0ZXJfYXRvbWljKCk7CiAJCXdha2VfdXBfYml0KCZjb29r
aWUtPmZsYWdzLCBGU0NBQ0hFX0NPT0tJRV9MT09LSU5HX1VQKTsKIAl9IGVsc2UgewogCQlmc2Nh
Y2hlX3N0YXQoJmZzY2FjaGVfbl9vYmplY3RfY3JlYXRlZCk7CmRpZmYgLS1naXQgYS9mcy9mc2Nh
Y2hlL3BhZ2UuYyBiL2ZzL2ZzY2FjaGUvcGFnZS5jCmluZGV4IDI2YWY2ZmRmMTUzOC4uNDllZjIz
ODUwMmEzIDEwMDY0NAotLS0gYS9mcy9mc2NhY2hlL3BhZ2UuYworKysgYi9mcy9mc2NhY2hlL3Bh
Z2UuYwpAQCAtMTEzLDYgKzExMyw3IEBAIGJvb2wgX19mc2NhY2hlX21heWJlX3JlbGVhc2VfcGFn
ZShzdHJ1Y3QgZnNjYWNoZV9jb29raWUgKmNvb2tpZSwKIAkJZnNjYWNoZV9zdGF0KCZmc2NhY2hl
X25fc3RvcmVfdm1zY2FuX2dvbmUpOwogCX0KIAorCXNtcF9tYigpOwogCXdha2VfdXBfYml0KCZj
b29raWUtPmZsYWdzLCAwKTsKIAl0cmFjZV9mc2NhY2hlX3dha2VfY29va2llKGNvb2tpZSk7CiAJ
aWYgKHhwYWdlKQpAQCAtMTcxLDYgKzE3Miw3IEBAIHN0YXRpYyB2b2lkIGZzY2FjaGVfZW5kX3Bh
Z2Vfd3JpdGUoc3RydWN0IGZzY2FjaGVfb2JqZWN0ICpvYmplY3QsCiAJCQl0cmFjZV9mc2NhY2hl
X3BhZ2UoY29va2llLCBwYWdlLCBmc2NhY2hlX3BhZ2Vfd3JpdGVfZW5kX3BlbmQpOwogCQl9CiAJ
CXNwaW5fdW5sb2NrKCZjb29raWUtPnN0b3Jlc19sb2NrKTsKKwkJc21wX21iKCk7CiAJCXdha2Vf
dXBfYml0KCZjb29raWUtPmZsYWdzLCAwKTsKIAkJdHJhY2VfZnNjYWNoZV93YWtlX2Nvb2tpZShj
b29raWUpOwogCX0gZWxzZSB7CkBAIC05MjIsNiArOTI0LDcgQEAgdm9pZCBmc2NhY2hlX2ludmFs
aWRhdGVfd3JpdGVzKHN0cnVjdCBmc2NhY2hlX2Nvb2tpZSAqY29va2llKQogCQkJcHV0X3BhZ2Uo
cmVzdWx0c1tpXSk7CiAJfQogCisJc21wX21iKCk7CiAJd2FrZV91cF9iaXQoJmNvb2tpZS0+Zmxh
Z3MsIDApOwogCXRyYWNlX2ZzY2FjaGVfd2FrZV9jb29raWUoY29va2llKTsKIApkaWZmIC0tZ2l0
IGEvZnMvZ2ZzMi9nbG9jay5jIGIvZnMvZ2ZzMi9nbG9jay5jCmluZGV4IGYxZWJjYjQyY2JmNS4u
ODAyNGI2YmRiNmQ0IDEwMDY0NAotLS0gYS9mcy9nZnMyL2dsb2NrLmMKKysrIGIvZnMvZ2ZzMi9n
bG9jay5jCkBAIC0zMDIsOSArMzAyLDcgQEAgc3RhdGljIGlubGluZSBpbnQgbWF5X2dyYW50KGNv
bnN0IHN0cnVjdCBnZnMyX2dsb2NrICpnbCwgY29uc3Qgc3RydWN0IGdmczJfaG9sZGUKIAogc3Rh
dGljIHZvaWQgZ2ZzMl9ob2xkZXJfd2FrZShzdHJ1Y3QgZ2ZzMl9ob2xkZXIgKmdoKQogewotCWNs
ZWFyX2JpdChISUZfV0FJVCwgJmdoLT5naF9pZmxhZ3MpOwotCXNtcF9tYl9fYWZ0ZXJfYXRvbWlj
KCk7Ci0Jd2FrZV91cF9iaXQoJmdoLT5naF9pZmxhZ3MsIEhJRl9XQUlUKTsKKwljbGVhcl9hbmRf
d2FrZV91cF9iaXQoSElGX1dBSVQsICZnaC0+Z2hfaWZsYWdzKTsKIH0KIAogLyoqCkBAIC00MzYs
OSArNDM0LDcgQEAgc3RhdGljIHZvaWQgc3RhdGVfY2hhbmdlKHN0cnVjdCBnZnMyX2dsb2NrICpn
bCwgdW5zaWduZWQgaW50IG5ld19zdGF0ZSkKIHN0YXRpYyB2b2lkIGdmczJfZGVtb3RlX3dha2Uo
c3RydWN0IGdmczJfZ2xvY2sgKmdsKQogewogCWdsLT5nbF9kZW1vdGVfc3RhdGUgPSBMTV9TVF9F
WENMVVNJVkU7Ci0JY2xlYXJfYml0KEdMRl9ERU1PVEUsICZnbC0+Z2xfZmxhZ3MpOwotCXNtcF9t
Yl9fYWZ0ZXJfYXRvbWljKCk7Ci0Jd2FrZV91cF9iaXQoJmdsLT5nbF9mbGFncywgR0xGX0RFTU9U
RSk7CisJY2xlYXJfYW5kX3dha2VfdXBfYml0KEdMRl9ERU1PVEUsICZnbC0+Z2xfZmxhZ3MpOwog
fQogCiAvKioKZGlmZiAtLWdpdCBhL2ZzL2dmczIvZ2xvcHMuYyBiL2ZzL2dmczIvZ2xvcHMuYwpp
bmRleCBjZjRjNzY3MDA1YjEuLjY2NjYyOWVhNWRhNyAxMDA2NDQKLS0tIGEvZnMvZ2ZzMi9nbG9w
cy5jCisrKyBiL2ZzL2dmczIvZ2xvcHMuYwpAQCAtMjI3LDYgKzIyNyw3IEBAIHN0YXRpYyB2b2lk
IGdmczJfY2xlYXJfZ2xvcF9wZW5kaW5nKHN0cnVjdCBnZnMyX2lub2RlICppcCkKIAkJcmV0dXJu
OwogCiAJY2xlYXJfYml0X3VubG9jayhHSUZfR0xPUF9QRU5ESU5HLCAmaXAtPmlfZmxhZ3MpOwor
CXNtcF9tYl9fYWZ0ZXJfYXRvbWljKCk7CiAJd2FrZV91cF9iaXQoJmlwLT5pX2ZsYWdzLCBHSUZf
R0xPUF9QRU5ESU5HKTsKIH0KIApkaWZmIC0tZ2l0IGEvZnMvZ2ZzMi9sb2NrX2RsbS5jIGIvZnMv
Z2ZzMi9sb2NrX2RsbS5jCmluZGV4IDQzNjE4MDQ2NDZkOC4uMGZhMTg2NWRkNjAwIDEwMDY0NAot
LS0gYS9mcy9nZnMyL2xvY2tfZGxtLmMKKysrIGIvZnMvZ2ZzMi9sb2NrX2RsbS5jCkBAIC0xMTM5
LDkgKzExMzksNyBAQCBzdGF0aWMgdm9pZCBnZGxtX3JlY292ZXJfZG9uZSh2b2lkICphcmcsIHN0
cnVjdCBkbG1fc2xvdCAqc2xvdHMsIGludCBudW1fc2xvdHMsCiAJaWYgKCF0ZXN0X2JpdChERkxf
VU5NT1VOVCwgJmxzLT5sc19yZWNvdmVyX2ZsYWdzKSkKIAkJcXVldWVfZGVsYXllZF93b3JrKGdm
czJfY29udHJvbF93cSwgJnNkcC0+c2RfY29udHJvbF93b3JrLCAwKTsKIAotCWNsZWFyX2JpdChE
RkxfRExNX1JFQ09WRVJZLCAmbHMtPmxzX3JlY292ZXJfZmxhZ3MpOwotCXNtcF9tYl9fYWZ0ZXJf
YXRvbWljKCk7Ci0Jd2FrZV91cF9iaXQoJmxzLT5sc19yZWNvdmVyX2ZsYWdzLCBERkxfRExNX1JF
Q09WRVJZKTsKKwljbGVhcl9hbmRfd2FrZV91cF9iaXQoREZMX0RMTV9SRUNPVkVSWSwgJmxzLT5s
c19yZWNvdmVyX2ZsYWdzKTsKIAlzcGluX3VubG9jaygmbHMtPmxzX3JlY292ZXJfc3Bpbik7CiB9
CiAKQEAgLTEyNzYsOSArMTI3NCw3IEBAIHN0YXRpYyBpbnQgZ2RsbV9tb3VudChzdHJ1Y3QgZ2Zz
Ml9zYmQgKnNkcCwgY29uc3QgY2hhciAqdGFibGUpCiAJfQogCiAJbHMtPmxzX2ZpcnN0ID0gISF0
ZXN0X2JpdChERkxfRklSU1RfTU9VTlQsICZscy0+bHNfcmVjb3Zlcl9mbGFncyk7Ci0JY2xlYXJf
Yml0KFNERl9OT0pPVVJOQUxJRCwgJnNkcC0+c2RfZmxhZ3MpOwotCXNtcF9tYl9fYWZ0ZXJfYXRv
bWljKCk7Ci0Jd2FrZV91cF9iaXQoJnNkcC0+c2RfZmxhZ3MsIFNERl9OT0pPVVJOQUxJRCk7CisJ
Y2xlYXJfYW5kX3dha2VfdXBfYml0KFNERl9OT0pPVVJOQUxJRCwgJnNkcC0+c2RfZmxhZ3MpOwog
CXJldHVybiAwOwogCiBmYWlsX3JlbGVhc2U6CmRpZmYgLS1naXQgYS9mcy9nZnMyL3JlY292ZXJ5
LmMgYi9mcy9nZnMyL3JlY292ZXJ5LmMKaW5kZXggMjI5OWEzZmExOTExLi5lZjlhOGVmNjY4OWIg
MTAwNjQ0Ci0tLSBhL2ZzL2dmczIvcmVjb3ZlcnkuYworKysgYi9mcy9nZnMyL3JlY292ZXJ5LmMK
QEAgLTQzNiw5ICs0MzYsNyBAQCB2b2lkIGdmczJfcmVjb3Zlcl9mdW5jKHN0cnVjdCB3b3JrX3N0
cnVjdCAqd29yaykKIAlqZC0+amRfcmVjb3Zlcl9lcnJvciA9IGVycm9yOwogCWdmczJfcmVjb3Zl
cnlfZG9uZShzZHAsIGpkLT5qZF9qaWQsIExNX1JEX0dBVkVVUCk7CiBkb25lOgotCWNsZWFyX2Jp
dChKREZfUkVDT1ZFUlksICZqZC0+amRfZmxhZ3MpOwotCXNtcF9tYl9fYWZ0ZXJfYXRvbWljKCk7
Ci0Jd2FrZV91cF9iaXQoJmpkLT5qZF9mbGFncywgSkRGX1JFQ09WRVJZKTsKKwljbGVhcl9hbmRf
d2FrZV91cF9iaXQoSkRGX1JFQ09WRVJZLCAmamQtPmpkX2ZsYWdzKTsKIH0KIAogaW50IGdmczJf
cmVjb3Zlcl9qb3VybmFsKHN0cnVjdCBnZnMyX2pkZXNjICpqZCwgYm9vbCB3YWl0KQpkaWZmIC0t
Z2l0IGEvZnMvZ2ZzMi9zdXBlci5jIGIvZnMvZ2ZzMi9zdXBlci5jCmluZGV4IGI3MGNlYTVjOGM1
OS4uMjhmZjJlMTBiZGQ5IDEwMDY0NAotLS0gYS9mcy9nZnMyL3N1cGVyLmMKKysrIGIvZnMvZ2Zz
Mi9zdXBlci5jCkBAIC05ODUsNiArOTg1LDcgQEAgdm9pZCBnZnMyX2ZyZWV6ZV9mdW5jKHN0cnVj
dCB3b3JrX3N0cnVjdCAqd29yaykKIAl9CiAJZGVhY3RpdmF0ZV9zdXBlcihzYik7CiAJY2xlYXJf
Yml0X3VubG9jayhTREZfRlNfRlJPWkVOLCAmc2RwLT5zZF9mbGFncyk7CisJc21wX21iX19hZnRl
cl9hdG9taWMoKTsKIAl3YWtlX3VwX2JpdCgmc2RwLT5zZF9mbGFncywgU0RGX0ZTX0ZST1pFTik7
CiAJcmV0dXJuOwogfQpkaWZmIC0tZ2l0IGEvZnMvZ2ZzMi9zeXMuYyBiL2ZzL2dmczIvc3lzLmMK
aW5kZXggMTU5YWVkZjYzYzJhLi5iMzM3Nzk4ZDg5NTcgMTAwNjQ0Ci0tLSBhL2ZzL2dmczIvc3lz
LmMKKysrIGIvZnMvZ2ZzMi9zeXMuYwpAQCAtNTA1LDkgKzUwNSw3IEBAIHN0YXRpYyBzc2l6ZV90
IGppZF9zdG9yZShzdHJ1Y3QgZ2ZzMl9zYmQgKnNkcCwgY29uc3QgY2hhciAqYnVmLCBzaXplX3Qg
bGVuKQogCWlmIChzZHAtPnNkX2FyZ3MuYXJfc3BlY3RhdG9yICYmIGppZCA+IDApCiAJCXJ2ID0g
amlkID0gLUVJTlZBTDsKIAlzZHAtPnNkX2xvY2tzdHJ1Y3QubHNfamlkID0gamlkOwotCWNsZWFy
X2JpdChTREZfTk9KT1VSTkFMSUQsICZzZHAtPnNkX2ZsYWdzKTsKLQlzbXBfbWJfX2FmdGVyX2F0
b21pYygpOwotCXdha2VfdXBfYml0KCZzZHAtPnNkX2ZsYWdzLCBTREZfTk9KT1VSTkFMSUQpOwor
CWNsZWFyX2FuZF93YWtlX3VwX2JpdChTREZfTk9KT1VSTkFMSUQsICZzZHAtPnNkX2ZsYWdzKTsK
IG91dDoKIAlzcGluX3VubG9jaygmc2RwLT5zZF9qaW5kZXhfc3Bpbik7CiAJcmV0dXJuIHJ2ID8g
cnYgOiBsZW47CmRpZmYgLS1naXQgYS9mcy9uZnMvbmZzNHN0YXRlLmMgYi9mcy9uZnMvbmZzNHN0
YXRlLmMKaW5kZXggZTJlM2M0ZjA0ZDNlLi5hM2VkNDEzYTM4YzUgMTAwNjQ0Ci0tLSBhL2ZzL25m
cy9uZnM0c3RhdGUuYworKysgYi9mcy9uZnMvbmZzNHN0YXRlLmMKQEAgLTExOTYsOSArMTE5Niw3
IEBAIHN0YXRpYyBpbnQgbmZzNF9ydW5fc3RhdGVfbWFuYWdlcih2b2lkICopOwogc3RhdGljIHZv
aWQgbmZzNF9jbGVhcl9zdGF0ZV9tYW5hZ2VyX2JpdChzdHJ1Y3QgbmZzX2NsaWVudCAqY2xwKQog
ewogCXNtcF9tYl9fYmVmb3JlX2F0b21pYygpOwotCWNsZWFyX2JpdChORlM0Q0xOVF9NQU5BR0VS
X1JVTk5JTkcsICZjbHAtPmNsX3N0YXRlKTsKLQlzbXBfbWJfX2FmdGVyX2F0b21pYygpOwotCXdh
a2VfdXBfYml0KCZjbHAtPmNsX3N0YXRlLCBORlM0Q0xOVF9NQU5BR0VSX1JVTk5JTkcpOworCWNs
ZWFyX2FuZF93YWtlX3VwX2JpdChORlM0Q0xOVF9NQU5BR0VSX1JVTk5JTkcsICZjbHAtPmNsX3N0
YXRlKTsKIAlycGNfd2FrZV91cCgmY2xwLT5jbF9ycGN3YWl0cSk7CiB9CiAKZGlmZiAtLWdpdCBh
L2ZzL25mcy9wbmZzX25mcy5jIGIvZnMvbmZzL3BuZnNfbmZzLmMKaW5kZXggYzAwNDZjMzQ4OTEw
Li4zN2M0ZmU1YTU5NWMgMTAwNjQ0Ci0tLSBhL2ZzL25mcy9wbmZzX25mcy5jCisrKyBiL2ZzL25m
cy9wbmZzX25mcy5jCkBAIC01NjcsOSArNTY3LDcgQEAgc3RhdGljIHZvaWQgbmZzNF93YWl0X2Rz
X2Nvbm5lY3Qoc3RydWN0IG5mczRfcG5mc19kcyAqZHMpCiBzdGF0aWMgdm9pZCBuZnM0X2NsZWFy
X2RzX2Nvbm5fYml0KHN0cnVjdCBuZnM0X3BuZnNfZHMgKmRzKQogewogCXNtcF9tYl9fYmVmb3Jl
X2F0b21pYygpOwotCWNsZWFyX2JpdChORlM0RFNfQ09OTkVDVElORywgJmRzLT5kc19zdGF0ZSk7
Ci0Jc21wX21iX19hZnRlcl9hdG9taWMoKTsKLQl3YWtlX3VwX2JpdCgmZHMtPmRzX3N0YXRlLCBO
RlM0RFNfQ09OTkVDVElORyk7CisJY2xlYXJfYW5kX3dha2VfdXBfYml0KE5GUzREU19DT05ORUNU
SU5HLCAmZHMtPmRzX3N0YXRlKTsKIH0KIAogc3RhdGljIHN0cnVjdCBuZnNfY2xpZW50ICooKmdl
dF92M19kc19jb25uZWN0KSgKZGlmZiAtLWdpdCBhL2ZzL25mc2QvbmZzNHJlY292ZXIuYyBiL2Zz
L25mc2QvbmZzNHJlY292ZXIuYwppbmRleCA4NzY3OTU1N2QwZDYuLjBhMzBmOWNkZjY2YSAxMDA2
NDQKLS0tIGEvZnMvbmZzZC9uZnM0cmVjb3Zlci5jCisrKyBiL2ZzL25mc2QvbmZzNHJlY292ZXIu
YwpAQCAtMTYzOCw5ICsxNjM4LDcgQEAgc3RhdGljIHZvaWQKIG5mc2Q0X2NsdHJhY2tfdXBjYWxs
X3VubG9jayhzdHJ1Y3QgbmZzNF9jbGllbnQgKmNscCkKIHsKIAlzbXBfbWJfX2JlZm9yZV9hdG9t
aWMoKTsKLQljbGVhcl9iaXQoTkZTRDRfQ0xJRU5UX1VQQ0FMTF9MT0NLLCAmY2xwLT5jbF9mbGFn
cyk7Ci0Jc21wX21iX19hZnRlcl9hdG9taWMoKTsKLQl3YWtlX3VwX2JpdCgmY2xwLT5jbF9mbGFn
cywgTkZTRDRfQ0xJRU5UX1VQQ0FMTF9MT0NLKTsKKwljbGVhcl9hbmRfd2FrZV91cF9iaXQoTkZT
RDRfQ0xJRU5UX1VQQ0FMTF9MT0NLLCAmY2xwLT5jbF9mbGFncyk7CiB9CiAKIHN0YXRpYyB2b2lk
CmRpZmYgLS1naXQgYS9mcy9vcmFuZ2Vmcy9maWxlLmMgYi9mcy9vcmFuZ2Vmcy9maWxlLmMKaW5k
ZXggYTM1YzE3MDE3MjEwLi4xOTU4YmI0NTcxNDMgMTAwNjQ0Ci0tLSBhL2ZzL29yYW5nZWZzL2Zp
bGUuYworKysgYi9mcy9vcmFuZ2Vmcy9maWxlLmMKQEAgLTMwMiw3ICszMDIsNyBAQCBpbnQgb3Jh
bmdlZnNfcmV2YWxpZGF0ZV9tYXBwaW5nKHN0cnVjdCBpbm9kZSAqaW5vZGUpCiAJb3JhbmdlZnNf
aW5vZGUtPm1hcHBpbmdfdGltZSA9IGppZmZpZXMgKwogCSAgICBvcmFuZ2Vmc19jYWNoZV90aW1l
b3V0X21zZWNzKkhaLzEwMDA7CiAKLQljbGVhcl9iaXQoMSwgYml0bG9jayk7CisJY2xlYXJfYml0
X3VubG9jaygxLCBiaXRsb2NrKTsKIAlzbXBfbWJfX2FmdGVyX2F0b21pYygpOwogCXdha2VfdXBf
Yml0KGJpdGxvY2ssIDEpOwogCmRpZmYgLS1naXQgYS9rZXJuZWwvc2NoZWQvd2FpdF9iaXQuYyBi
L2tlcm5lbC9zY2hlZC93YWl0X2JpdC5jCmluZGV4IDQ1ZWJhMThhMjg5OC4uMjY2Mjk3NTQ3M2Uz
IDEwMDY0NAotLS0gYS9rZXJuZWwvc2NoZWQvd2FpdF9iaXQuYworKysgYi9rZXJuZWwvc2NoZWQv
d2FpdF9iaXQuYwpAQCAtMTg5LDYgKzE4OSw3IEBAIEVYUE9SVF9TWU1CT0woaW5pdF93YWl0X3Zh
cl9lbnRyeSk7CiAKIHZvaWQgd2FrZV91cF92YXIodm9pZCAqdmFyKQogeworCXNtcF9tYigpOwog
CV9fd2FrZV91cF9iaXQoX192YXJfd2FpdHF1ZXVlKHZhciksIHZhciwgLTEpOwogfQogRVhQT1JU
X1NZTUJPTCh3YWtlX3VwX3Zhcik7CmRpZmYgLS1naXQgYS9uZXQvYmx1ZXRvb3RoL2hjaV9ldmVu
dC5jIGIvbmV0L2JsdWV0b290aC9oY2lfZXZlbnQuYwppbmRleCA5ZTRmY2Y0MDZkOWMuLjRlNTdm
MWExYjdhMiAxMDA2NDQKLS0tIGEvbmV0L2JsdWV0b290aC9oY2lfZXZlbnQuYworKysgYi9uZXQv
Ymx1ZXRvb3RoL2hjaV9ldmVudC5jCkBAIC01MCw5ICs1MCw3IEBAIHN0YXRpYyB2b2lkIGhjaV9j
Y19pbnF1aXJ5X2NhbmNlbChzdHJ1Y3QgaGNpX2RldiAqaGRldiwgc3RydWN0IHNrX2J1ZmYgKnNr
YikKIAlpZiAoc3RhdHVzKQogCQlyZXR1cm47CiAKLQljbGVhcl9iaXQoSENJX0lOUVVJUlksICZo
ZGV2LT5mbGFncyk7Ci0Jc21wX21iX19hZnRlcl9hdG9taWMoKTsgLyogd2FrZV91cF9iaXQgYWR2
aXNlcyBhYm91dCB0aGlzIGJhcnJpZXIgKi8KLQl3YWtlX3VwX2JpdCgmaGRldi0+ZmxhZ3MsIEhD
SV9JTlFVSVJZKTsKKwljbGVhcl9hbmRfd2FrZV91cF9iaXQoSENJX0lOUVVJUlksICZoZGV2LT5m
bGFncyk7CiAKIAloY2lfZGV2X2xvY2soaGRldik7CiAJLyogU2V0IGRpc2NvdmVyeSBzdGF0ZSB0
byBzdG9wcGVkIGlmIHdlJ3JlIG5vdCBkb2luZyBMRSBhY3RpdmUKQEAgLTIzNDIsNyArMjM0MCw2
IEBAIHN0YXRpYyB2b2lkIGhjaV9pbnF1aXJ5X2NvbXBsZXRlX2V2dChzdHJ1Y3QgaGNpX2RldiAq
aGRldiwgc3RydWN0IHNrX2J1ZmYgKnNrYikKIAlpZiAoIXRlc3RfYW5kX2NsZWFyX2JpdChIQ0lf
SU5RVUlSWSwgJmhkZXYtPmZsYWdzKSkKIAkJcmV0dXJuOwogCi0Jc21wX21iX19hZnRlcl9hdG9t
aWMoKTsgLyogd2FrZV91cF9iaXQgYWR2aXNlcyBhYm91dCB0aGlzIGJhcnJpZXIgKi8KIAl3YWtl
X3VwX2JpdCgmaGRldi0+ZmxhZ3MsIEhDSV9JTlFVSVJZKTsKIAogCWlmICghaGNpX2Rldl90ZXN0
X2ZsYWcoaGRldiwgSENJX01HTVQpKQpkaWZmIC0tZ2l0IGEvbmV0L3Jkcy9pYl9yZWN2LmMgYi9u
ZXQvcmRzL2liX3JlY3YuYwppbmRleCAzY2FlODhjYmRhYTAuLjJjMjc3MzE3Mjk2NCAxMDA2NDQK
LS0tIGEvbmV0L3Jkcy9pYl9yZWN2LmMKKysrIGIvbmV0L3Jkcy9pYl9yZWN2LmMKQEAgLTM2Myw2
ICszNjMsNyBAQCBzdGF0aWMgaW50IGFjcXVpcmVfcmVmaWxsKHN0cnVjdCByZHNfY29ubmVjdGlv
biAqY29ubikKIHN0YXRpYyB2b2lkIHJlbGVhc2VfcmVmaWxsKHN0cnVjdCByZHNfY29ubmVjdGlv
biAqY29ubikKIHsKIAljbGVhcl9iaXQoUkRTX1JFQ1ZfUkVGSUxMLCAmY29ubi0+Y19mbGFncyk7
CisJc21wX21iX19hZnRlcl9hdG9taWMoKTsKIAogCS8qIFdlIGRvbid0IHVzZSB3YWl0X29uX2Jp
dCgpL3dha2VfdXBfYml0KCkgYmVjYXVzZSBvdXIgd2FraW5nIGlzIGluIGEKIAkgKiBob3QgcGF0
aCBhbmQgZmluZGluZyB3YWl0ZXJzIGlzIHZlcnkgcmFyZS4gIFdlIGRvbid0IHdhbnQgdG8gd2Fs
awpkaWZmIC0tZ2l0IGEvc2VjdXJpdHkva2V5cy9nYy5jIGIvc2VjdXJpdHkva2V5cy9nYy5jCmlu
ZGV4IDQ0ZTU4YTNlNTY2My4uZjQ1MjgxNmJkN2QwIDEwMDY0NAotLS0gYS9zZWN1cml0eS9rZXlz
L2djLmMKKysrIGIvc2VjdXJpdHkva2V5cy9nYy5jCkBAIC0zMDgsOSArMzA4LDggQEAgc3RhdGlj
IHZvaWQga2V5X2dhcmJhZ2VfY29sbGVjdG9yKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKIAog
CWlmICh1bmxpa2VseShnY19zdGF0ZSAmIEtFWV9HQ19SRUFQSU5HX0RFQURfMykpIHsKIAkJa2Rl
YnVnKCJkZWFkIHdha2UiKTsKLQkJc21wX21iKCk7Ci0JCWNsZWFyX2JpdChLRVlfR0NfUkVBUElO
R19LRVlUWVBFLCAma2V5X2djX2ZsYWdzKTsKLQkJd2FrZV91cF9iaXQoJmtleV9nY19mbGFncywg
S0VZX0dDX1JFQVBJTkdfS0VZVFlQRSk7CisJCXNtcF9tYl9fYmVmb3JlX2F0b21pYygpOworCQlj
bGVhcl9hbmRfd2FrZV91cF9iaXQoS0VZX0dDX1JFQVBJTkdfS0VZVFlQRSwgJmtleV9nY19mbGFn
cyk7CiAJfQogCiAJaWYgKGdjX3N0YXRlICYgS0VZX0dDX1JFQVBfQUdBSU4pCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBs
aXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
