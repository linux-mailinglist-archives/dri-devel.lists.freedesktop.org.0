Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B458A8CAD1
	for <lists+dri-devel@lfdr.de>; Wed, 14 Aug 2019 07:52:22 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2FEE26E249;
	Wed, 14 Aug 2019 05:52:20 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x64a.google.com (mail-pl1-x64a.google.com
 [IPv6:2607:f8b0:4864:20::64a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 139BA6E24D
 for <dri-devel@lists.freedesktop.org>; Wed, 14 Aug 2019 05:52:18 +0000 (UTC)
Received: by mail-pl1-x64a.google.com with SMTP id ci3so21601651plb.8
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 22:52:18 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=7BwB+wMWUUc9lMbBgT2UM/fkLk+IPczvj1DNZaIo7js=;
 b=GqNOC9NS4I3ru5TODMxStdY+eWdCElsvhybmRnpLlkbgoxOn3MRF6HIkNrB5gvYi8e
 A1gq2HNtKjeZhJbH/68zFUWFLqzuNyU4ojg9+J+T6OYndW6t2O4NNGQzO9z11jh6s4Bj
 3rwkwKZgHvX6amsevlwVjoLAWQtQwwq3BwTw0DYl4UFpT8XKKXU3CqXQPMJJKz7Hgboj
 aTRT2GsxDapHhWH9Nt0gTj+Jmu9Z2J29aMAzl1N8uBVmNKtlxOLOsIY8qnAoZu6g89sl
 1SRECJ0XzQGz8dK/hadJb+yB5ytz9WPA0ypos3WfV6SU6/X7wm8KekT1BIFvUHU1U8PQ
 Ptsw==
X-Gm-Message-State: APjAAAUQjRXiQzwA4yHHJ1QCQWFQrF/73Dnnc2eZNSTH6rWJKakpFK3I
 CISfpS/Y/UYonBlywAYLhg6XwJPmjj3cc4eAS3jqJg==
X-Google-Smtp-Source: APXvYqwRpfR5V171aALBxNgHtd8qW4LD3QH7VWqhw02xxR40bMh/iSepQ4+LQeq6w+Rwc9ZKoXuPxv0TIzKmy+69DurD0Q==
X-Received: by 2002:a63:c64b:: with SMTP id x11mr37297091pgg.319.1565761936948; 
 Tue, 13 Aug 2019 22:52:16 -0700 (PDT)
Date: Tue, 13 Aug 2019 22:50:53 -0700
In-Reply-To: <20190814055108.214253-1-brendanhiggins@google.com>
Message-Id: <20190814055108.214253-4-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190814055108.214253-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.23.0.rc1.153.gdeed80330f-goog
Subject: [PATCH v13 03/18] kunit: test: add string_stream a std::stream like
 string builder
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=7BwB+wMWUUc9lMbBgT2UM/fkLk+IPczvj1DNZaIo7js=;
 b=Ey5X/DilM5yXDr1T3rkvjeSA4hQHEB4dnHsM7LOmmXWQ1/JZbBl9nonR9D7Nuk547j
 wMVN/+QGLNp4A+0wFkQ6PJVsPYPCKN5tG9DKL3L/1Dk3TxaVt5xIjCVz3lLbTnUHxdtv
 aPOR9TsoQWO1Q/lN9o5yKj24mxcDILGdu+TtsU08Ame99/0Zlb1qnku60EFCLP8W5Rme
 GHEFWDZHSNF99wNETg3ZviH9j4mAxBgARV0lvsLpMhFse+V1Q53zMJTDyrN79ej1SCUX
 dq7EfDzWUSR+ZBau3K20ETM0YxtxqNZzXThMASIqUIoU+hQcv9qscn9EKkX9WDfC2xPJ
 Cf3A==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QSBudW1iZXIgb2YgdGVzdCBmZWF0dXJlcyBuZWVkIHRvIGRvIHByZXR0eSBjb21wbGljYXRlZCBz
dHJpbmcgcHJpbnRpbmcKd2hlcmUgaXQgbWF5IG5vdCBiZSBwb3NzaWJsZSB0byByZWx5IG9uIGEg
c2luZ2xlIHByZWFsbG9jYXRlZCBzdHJpbmcKd2l0aCBwYXJhbWV0ZXJzLgoKU28gcHJvdmlkZSBh
IGxpYnJhcnkgZm9yIGNvbnN0cnVjdGluZyB0aGUgc3RyaW5nIGFzIHlvdSBnbyBzaW1pbGFyIHRv
CkMrKydzIHN0ZDo6c3RyaW5nLiBzdHJpbmdfc3RyZWFtIGlzIHJlYWxseSBqdXN0IGEgc3RyaW5n
IGJ1aWxkZXIsCm5vdGhpbmcgbW9yZS4KClNpZ25lZC1vZmYtYnk6IEJyZW5kYW4gSGlnZ2lucyA8
YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbT4KUmV2aWV3ZWQtYnk6IEdyZWcgS3JvYWgtSGFydG1h
biA8Z3JlZ2toQGxpbnV4Zm91bmRhdGlvbi5vcmc+ClJldmlld2VkLWJ5OiBMb2dhbiBHdW50aG9y
cGUgPGxvZ2FuZ0BkZWx0YXRlZS5jb20+Ci0tLQogaW5jbHVkZS9rdW5pdC9zdHJpbmctc3RyZWFt
LmggfCAgNTEgKysrKysrKysKIGt1bml0L01ha2VmaWxlICAgICAgICAgICAgICAgIHwgICAzICst
CiBrdW5pdC9zdHJpbmctc3RyZWFtLmMgICAgICAgICB8IDIxNyArKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrCiAzIGZpbGVzIGNoYW5nZWQsIDI3MCBpbnNlcnRpb25zKCspLCAxIGRl
bGV0aW9uKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS9rdW5pdC9zdHJpbmctc3RyZWFt
LmgKIGNyZWF0ZSBtb2RlIDEwMDY0NCBrdW5pdC9zdHJpbmctc3RyZWFtLmMKCmRpZmYgLS1naXQg
YS9pbmNsdWRlL2t1bml0L3N0cmluZy1zdHJlYW0uaCBiL2luY2x1ZGUva3VuaXQvc3RyaW5nLXN0
cmVhbS5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMDAuLmZlOThhMDBi
NzVhOWMKLS0tIC9kZXYvbnVsbAorKysgYi9pbmNsdWRlL2t1bml0L3N0cmluZy1zdHJlYW0uaApA
QCAtMCwwICsxLDUxIEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCAqLwor
LyoKKyAqIEMrKyBzdHJlYW0gc3R5bGUgc3RyaW5nIGJ1aWxkZXIgdXNlZCBpbiBLVW5pdCBmb3Ig
YnVpbGRpbmcgbWVzc2FnZXMuCisgKgorICogQ29weXJpZ2h0IChDKSAyMDE5LCBHb29nbGUgTExD
LgorICogQXV0aG9yOiBCcmVuZGFuIEhpZ2dpbnMgPGJyZW5kYW5oaWdnaW5zQGdvb2dsZS5jb20+
CisgKi8KKworI2lmbmRlZiBfS1VOSVRfU1RSSU5HX1NUUkVBTV9ICisjZGVmaW5lIF9LVU5JVF9T
VFJJTkdfU1RSRUFNX0gKKworI2luY2x1ZGUgPGxpbnV4L3NwaW5sb2NrLmg+CisjaW5jbHVkZSA8
bGludXgvdHlwZXMuaD4KKyNpbmNsdWRlIDxzdGRhcmcuaD4KKworc3RydWN0IHN0cmluZ19zdHJl
YW1fZnJhZ21lbnQgeworCXN0cnVjdCBrdW5pdCAqdGVzdDsKKwlzdHJ1Y3QgbGlzdF9oZWFkIG5v
ZGU7CisJY2hhciAqZnJhZ21lbnQ7Cit9OworCitzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSB7CisJc2l6
ZV90IGxlbmd0aDsKKwlzdHJ1Y3QgbGlzdF9oZWFkIGZyYWdtZW50czsKKwkvKiBsZW5ndGggYW5k
IGZyYWdtZW50cyBhcmUgcHJvdGVjdGVkIGJ5IHRoaXMgbG9jayAqLworCXNwaW5sb2NrX3QgbG9j
azsKKwlzdHJ1Y3Qga3VuaXQgKnRlc3Q7CisJZ2ZwX3QgZ2ZwOworfTsKKworc3RydWN0IGt1bml0
OworCitzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqYWxsb2Nfc3RyaW5nX3N0cmVhbShzdHJ1Y3Qga3Vu
aXQgKnRlc3QsIGdmcF90IGdmcCk7CisKK2ludCBfX3ByaW50ZigyLCAzKSBzdHJpbmdfc3RyZWFt
X2FkZChzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtLAorCQkJCSAgICAgY29uc3QgY2hhciAq
Zm10LCAuLi4pOworCitpbnQgc3RyaW5nX3N0cmVhbV92YWRkKHN0cnVjdCBzdHJpbmdfc3RyZWFt
ICpzdHJlYW0sCisJCSAgICAgICBjb25zdCBjaGFyICpmbXQsCisJCSAgICAgICB2YV9saXN0IGFy
Z3MpOworCitjaGFyICpzdHJpbmdfc3RyZWFtX2dldF9zdHJpbmcoc3RydWN0IHN0cmluZ19zdHJl
YW0gKnN0cmVhbSk7CisKK2ludCBzdHJpbmdfc3RyZWFtX2FwcGVuZChzdHJ1Y3Qgc3RyaW5nX3N0
cmVhbSAqc3RyZWFtLAorCQkJIHN0cnVjdCBzdHJpbmdfc3RyZWFtICpvdGhlcik7CisKK2Jvb2wg
c3RyaW5nX3N0cmVhbV9pc19lbXB0eShzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtKTsKKwor
aW50IHN0cmluZ19zdHJlYW1fZGVzdHJveShzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtKTsK
KworI2VuZGlmIC8qIF9LVU5JVF9TVFJJTkdfU1RSRUFNX0ggKi8KZGlmZiAtLWdpdCBhL2t1bml0
L01ha2VmaWxlIGIva3VuaXQvTWFrZWZpbGUKaW5kZXggNWVmZGM0ZGVhMmMwOC4uMjc1YjU2NWEw
ZTgxZiAxMDA2NDQKLS0tIGEva3VuaXQvTWFrZWZpbGUKKysrIGIva3VuaXQvTWFrZWZpbGUKQEAg
LTEgKzEsMiBAQAotb2JqLSQoQ09ORklHX0tVTklUKSArPQkJCXRlc3Qubworb2JqLSQoQ09ORklH
X0tVTklUKSArPQkJCXRlc3QubyBcCisJCQkJCXN0cmluZy1zdHJlYW0ubwpkaWZmIC0tZ2l0IGEv
a3VuaXQvc3RyaW5nLXN0cmVhbS5jIGIva3VuaXQvc3RyaW5nLXN0cmVhbS5jCm5ldyBmaWxlIG1v
ZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMDAuLmU2ZDE3YWFjY2EzMGQKLS0tIC9kZXYvbnVs
bAorKysgYi9rdW5pdC9zdHJpbmctc3RyZWFtLmMKQEAgLTAsMCArMSwyMTcgQEAKKy8vIFNQRFgt
TGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCisvKgorICogQysrIHN0cmVhbSBzdHlsZSBzdHJp
bmcgYnVpbGRlciB1c2VkIGluIEtVbml0IGZvciBidWlsZGluZyBtZXNzYWdlcy4KKyAqCisgKiBD
b3B5cmlnaHQgKEMpIDIwMTksIEdvb2dsZSBMTEMuCisgKiBBdXRob3I6IEJyZW5kYW4gSGlnZ2lu
cyA8YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbT4KKyAqLworCisjaW5jbHVkZSA8a3VuaXQvc3Ry
aW5nLXN0cmVhbS5oPgorI2luY2x1ZGUgPGt1bml0L3Rlc3QuaD4KKyNpbmNsdWRlIDxsaW51eC9s
aXN0Lmg+CisjaW5jbHVkZSA8bGludXgvc2xhYi5oPgorCitzdHJ1Y3Qgc3RyaW5nX3N0cmVhbV9m
cmFnbWVudF9hbGxvY19jb250ZXh0IHsKKwlzdHJ1Y3Qga3VuaXQgKnRlc3Q7CisJaW50IGxlbjsK
KwlnZnBfdCBnZnA7Cit9OworCitzdGF0aWMgaW50IHN0cmluZ19zdHJlYW1fZnJhZ21lbnRfaW5p
dChzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlcywKKwkJCQkgICAgICAgdm9pZCAqY29udGV4dCkK
K3sKKwlzdHJ1Y3Qgc3RyaW5nX3N0cmVhbV9mcmFnbWVudF9hbGxvY19jb250ZXh0ICpjdHggPSBj
b250ZXh0OworCXN0cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnOworCisJZnJhZyA9
IGt1bml0X2t6YWxsb2MoY3R4LT50ZXN0LCBzaXplb2YoKmZyYWcpLCBjdHgtPmdmcCk7CisJaWYg
KCFmcmFnKQorCQlyZXR1cm4gLUVOT01FTTsKKworCWZyYWctPnRlc3QgPSBjdHgtPnRlc3Q7CisJ
ZnJhZy0+ZnJhZ21lbnQgPSBrdW5pdF9rbWFsbG9jKGN0eC0+dGVzdCwgY3R4LT5sZW4sIGN0eC0+
Z2ZwKTsKKwlpZiAoIWZyYWctPmZyYWdtZW50KQorCQlyZXR1cm4gLUVOT01FTTsKKworCXJlcy0+
YWxsb2NhdGlvbiA9IGZyYWc7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgc3RyaW5n
X3N0cmVhbV9mcmFnbWVudF9mcmVlKHN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzKQoreworCXN0
cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnID0gcmVzLT5hbGxvY2F0aW9uOworCisJ
bGlzdF9kZWwoJmZyYWctPm5vZGUpOworCWt1bml0X2tmcmVlKGZyYWctPnRlc3QsIGZyYWctPmZy
YWdtZW50KTsKKwlrdW5pdF9rZnJlZShmcmFnLT50ZXN0LCBmcmFnKTsKK30KKworc3RhdGljIHN0
cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICphbGxvY19zdHJpbmdfc3RyZWFtX2ZyYWdtZW50
KAorCQlzdHJ1Y3Qga3VuaXQgKnRlc3QsIGludCBsZW4sIGdmcF90IGdmcCkKK3sKKwlzdHJ1Y3Qg
c3RyaW5nX3N0cmVhbV9mcmFnbWVudF9hbGxvY19jb250ZXh0IGNvbnRleHQgPSB7CisJCS50ZXN0
ID0gdGVzdCwKKwkJLmxlbiA9IGxlbiwKKwkJLmdmcCA9IGdmcAorCX07CisKKwlyZXR1cm4ga3Vu
aXRfYWxsb2NfcmVzb3VyY2UodGVzdCwKKwkJCQkgICAgc3RyaW5nX3N0cmVhbV9mcmFnbWVudF9p
bml0LAorCQkJCSAgICBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50X2ZyZWUsCisJCQkJICAgIGdmcCwK
KwkJCQkgICAgJmNvbnRleHQpOworfQorCitzdGF0aWMgaW50IHN0cmluZ19zdHJlYW1fZnJhZ21l
bnRfZGVzdHJveShzdHJ1Y3Qgc3RyaW5nX3N0cmVhbV9mcmFnbWVudCAqZnJhZykKK3sKKwlyZXR1
cm4ga3VuaXRfcmVzb3VyY2VfZGVzdHJveShmcmFnLT50ZXN0LAorCQkJCSAgICAgIGt1bml0X3Jl
c291cmNlX2luc3RhbmNlX21hdGNoLAorCQkJCSAgICAgIHN0cmluZ19zdHJlYW1fZnJhZ21lbnRf
ZnJlZSwKKwkJCQkgICAgICBmcmFnKTsKK30KKworaW50IHN0cmluZ19zdHJlYW1fdmFkZChzdHJ1
Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtLAorCQkgICAgICAgY29uc3QgY2hhciAqZm10LAorCQkg
ICAgICAgdmFfbGlzdCBhcmdzKQoreworCXN0cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpm
cmFnX2NvbnRhaW5lcjsKKwlpbnQgbGVuOworCXZhX2xpc3QgYXJnc19mb3JfY291bnRpbmc7CisK
KwkvKiBNYWtlIGEgY29weSBiZWNhdXNlIGB2c25wcmludGZgIGNvdWxkIGNoYW5nZSBpdCAqLwor
CXZhX2NvcHkoYXJnc19mb3JfY291bnRpbmcsIGFyZ3MpOworCisJLyogTmVlZCBzcGFjZSBmb3Ig
bnVsbCBieXRlLiAqLworCWxlbiA9IHZzbnByaW50ZihOVUxMLCAwLCBmbXQsIGFyZ3NfZm9yX2Nv
dW50aW5nKSArIDE7CisKKwl2YV9lbmQoYXJnc19mb3JfY291bnRpbmcpOworCisJZnJhZ19jb250
YWluZXIgPSBhbGxvY19zdHJpbmdfc3RyZWFtX2ZyYWdtZW50KHN0cmVhbS0+dGVzdCwKKwkJCQkJ
CSAgICAgIGxlbiwKKwkJCQkJCSAgICAgIHN0cmVhbS0+Z2ZwKTsKKwlpZiAoIWZyYWdfY29udGFp
bmVyKQorCQlyZXR1cm4gLUVOT01FTTsKKworCWxlbiA9IHZzbnByaW50ZihmcmFnX2NvbnRhaW5l
ci0+ZnJhZ21lbnQsIGxlbiwgZm10LCBhcmdzKTsKKwlzcGluX2xvY2soJnN0cmVhbS0+bG9jayk7
CisJc3RyZWFtLT5sZW5ndGggKz0gbGVuOworCWxpc3RfYWRkX3RhaWwoJmZyYWdfY29udGFpbmVy
LT5ub2RlLCAmc3RyZWFtLT5mcmFnbWVudHMpOworCXNwaW5fdW5sb2NrKCZzdHJlYW0tPmxvY2sp
OworCisJcmV0dXJuIDA7Cit9CisKK2ludCBzdHJpbmdfc3RyZWFtX2FkZChzdHJ1Y3Qgc3RyaW5n
X3N0cmVhbSAqc3RyZWFtLCBjb25zdCBjaGFyICpmbXQsIC4uLikKK3sKKwl2YV9saXN0IGFyZ3M7
CisJaW50IHJlc3VsdDsKKworCXZhX3N0YXJ0KGFyZ3MsIGZtdCk7CisJcmVzdWx0ID0gc3RyaW5n
X3N0cmVhbV92YWRkKHN0cmVhbSwgZm10LCBhcmdzKTsKKwl2YV9lbmQoYXJncyk7CisKKwlyZXR1
cm4gcmVzdWx0OworfQorCitzdGF0aWMgdm9pZCBzdHJpbmdfc3RyZWFtX2NsZWFyKHN0cnVjdCBz
dHJpbmdfc3RyZWFtICpzdHJlYW0pCit7CisJc3RydWN0IHN0cmluZ19zdHJlYW1fZnJhZ21lbnQg
KmZyYWdfY29udGFpbmVyLCAqZnJhZ19jb250YWluZXJfc2FmZTsKKworCXNwaW5fbG9jaygmc3Ry
ZWFtLT5sb2NrKTsKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUoZnJhZ19jb250YWluZXIsCisJ
CQkJIGZyYWdfY29udGFpbmVyX3NhZmUsCisJCQkJICZzdHJlYW0tPmZyYWdtZW50cywKKwkJCQkg
bm9kZSkgeworCQlzdHJpbmdfc3RyZWFtX2ZyYWdtZW50X2Rlc3Ryb3koZnJhZ19jb250YWluZXIp
OworCX0KKwlzdHJlYW0tPmxlbmd0aCA9IDA7CisJc3Bpbl91bmxvY2soJnN0cmVhbS0+bG9jayk7
Cit9CisKK2NoYXIgKnN0cmluZ19zdHJlYW1fZ2V0X3N0cmluZyhzdHJ1Y3Qgc3RyaW5nX3N0cmVh
bSAqc3RyZWFtKQoreworCXN0cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnX2NvbnRh
aW5lcjsKKwlzaXplX3QgYnVmX2xlbiA9IHN0cmVhbS0+bGVuZ3RoICsgMTsgLyogKzEgZm9yIG51
bGwgYnl0ZS4gKi8KKwljaGFyICpidWY7CisKKwlidWYgPSBrdW5pdF9remFsbG9jKHN0cmVhbS0+
dGVzdCwgYnVmX2xlbiwgc3RyZWFtLT5nZnApOworCWlmICghYnVmKQorCQlyZXR1cm4gTlVMTDsK
KworCXNwaW5fbG9jaygmc3RyZWFtLT5sb2NrKTsKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5KGZyYWdf
Y29udGFpbmVyLCAmc3RyZWFtLT5mcmFnbWVudHMsIG5vZGUpCisJCXN0cmxjYXQoYnVmLCBmcmFn
X2NvbnRhaW5lci0+ZnJhZ21lbnQsIGJ1Zl9sZW4pOworCXNwaW5fdW5sb2NrKCZzdHJlYW0tPmxv
Y2spOworCisJcmV0dXJuIGJ1ZjsKK30KKworaW50IHN0cmluZ19zdHJlYW1fYXBwZW5kKHN0cnVj
dCBzdHJpbmdfc3RyZWFtICpzdHJlYW0sCisJCQkgc3RydWN0IHN0cmluZ19zdHJlYW0gKm90aGVy
KQoreworCWNvbnN0IGNoYXIgKm90aGVyX2NvbnRlbnQ7CisKKwlvdGhlcl9jb250ZW50ID0gc3Ry
aW5nX3N0cmVhbV9nZXRfc3RyaW5nKG90aGVyKTsKKworCWlmICghb3RoZXJfY29udGVudCkKKwkJ
cmV0dXJuIC1FTk9NRU07CisKKwlyZXR1cm4gc3RyaW5nX3N0cmVhbV9hZGQoc3RyZWFtLCBvdGhl
cl9jb250ZW50KTsKK30KKworYm9vbCBzdHJpbmdfc3RyZWFtX2lzX2VtcHR5KHN0cnVjdCBzdHJp
bmdfc3RyZWFtICpzdHJlYW0pCit7CisJcmV0dXJuIGxpc3RfZW1wdHkoJnN0cmVhbS0+ZnJhZ21l
bnRzKTsKK30KKworc3RydWN0IHN0cmluZ19zdHJlYW1fYWxsb2NfY29udGV4dCB7CisJc3RydWN0
IGt1bml0ICp0ZXN0OworCWdmcF90IGdmcDsKK307CisKK3N0YXRpYyBpbnQgc3RyaW5nX3N0cmVh
bV9pbml0KHN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzLCB2b2lkICpjb250ZXh0KQoreworCXN0
cnVjdCBzdHJpbmdfc3RyZWFtICpzdHJlYW07CisJc3RydWN0IHN0cmluZ19zdHJlYW1fYWxsb2Nf
Y29udGV4dCAqY3R4ID0gY29udGV4dDsKKworCXN0cmVhbSA9IGt1bml0X2t6YWxsb2MoY3R4LT50
ZXN0LCBzaXplb2YoKnN0cmVhbSksIGN0eC0+Z2ZwKTsKKwlpZiAoIXN0cmVhbSkKKwkJcmV0dXJu
IC1FTk9NRU07CisKKwlyZXMtPmFsbG9jYXRpb24gPSBzdHJlYW07CisJc3RyZWFtLT5nZnAgPSBj
dHgtPmdmcDsKKwlzdHJlYW0tPnRlc3QgPSBjdHgtPnRlc3Q7CisJSU5JVF9MSVNUX0hFQUQoJnN0
cmVhbS0+ZnJhZ21lbnRzKTsKKwlzcGluX2xvY2tfaW5pdCgmc3RyZWFtLT5sb2NrKTsKKworCXJl
dHVybiAwOworfQorCitzdGF0aWMgdm9pZCBzdHJpbmdfc3RyZWFtX2ZyZWUoc3RydWN0IGt1bml0
X3Jlc291cmNlICpyZXMpCit7CisJc3RydWN0IHN0cmluZ19zdHJlYW0gKnN0cmVhbSA9IHJlcy0+
YWxsb2NhdGlvbjsKKworCXN0cmluZ19zdHJlYW1fY2xlYXIoc3RyZWFtKTsKK30KKworc3RydWN0
IHN0cmluZ19zdHJlYW0gKmFsbG9jX3N0cmluZ19zdHJlYW0oc3RydWN0IGt1bml0ICp0ZXN0LCBn
ZnBfdCBnZnApCit7CisJc3RydWN0IHN0cmluZ19zdHJlYW1fYWxsb2NfY29udGV4dCBjb250ZXh0
ID0geworCQkudGVzdCA9IHRlc3QsCisJCS5nZnAgPSBnZnAKKwl9OworCisJcmV0dXJuIGt1bml0
X2FsbG9jX3Jlc291cmNlKHRlc3QsCisJCQkJICAgIHN0cmluZ19zdHJlYW1faW5pdCwKKwkJCQkg
ICAgc3RyaW5nX3N0cmVhbV9mcmVlLAorCQkJCSAgICBnZnAsCisJCQkJICAgICZjb250ZXh0KTsK
K30KKworaW50IHN0cmluZ19zdHJlYW1fZGVzdHJveShzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3Ry
ZWFtKQoreworCXJldHVybiBrdW5pdF9yZXNvdXJjZV9kZXN0cm95KHN0cmVhbS0+dGVzdCwKKwkJ
CQkgICAgICBrdW5pdF9yZXNvdXJjZV9pbnN0YW5jZV9tYXRjaCwKKwkJCQkgICAgICBzdHJpbmdf
c3RyZWFtX2ZyZWUsCisJCQkJICAgICAgc3RyZWFtKTsKK30KLS0gCjIuMjMuMC5yYzEuMTUzLmdk
ZWVkODAzMzBmLWdvb2cKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1k
ZXZlbA==
