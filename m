Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B55D595333
	for <lists+dri-devel@lfdr.de>; Tue, 20 Aug 2019 03:18:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 84DBA6E58A;
	Tue, 20 Aug 2019 01:18:18 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AC9EC6E577
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 01:18:03 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 79347219E;
 Tue, 20 Aug 2019 03:17:56 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 35/50] drm/omap: Switch the HDMI and VENC outputs to
 drm_bridge
Date: Tue, 20 Aug 2019 04:17:06 +0300
Message-Id: <20190820011721.30136-36-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
References: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1566263877;
 bh=1pkPv0JWmatdIFBc/z9/72lqcu49e1se0Thw6zkhgTE=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=U00d3EknudLY1j2QuqV9EORd6sW415ECgToDUYb3L/VjI3E9jTukx3A+i9EPoFz6S
 mMx0Z1W8n8fd2n5lK3K5lF3m9O9n+MFy+g2GjSXxH02Z1cx/0FMKnTEDRgLsZ6e2va
 tBg0RwT4qG2B4IO3DNk3NqoKGBJMcDFUi6xWHppM=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sean Paul <sean@poorly.run>,
 Sebastian Reichel <sebastian.reichel@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIFRQRDEyUzAxNSwgT1BBMzYyIGFuZCBhbmFsb2cgYW5kIEhETUkgY29ubmVjdG9ycyBhcmUg
bm93IHN1cHBvcnRlZApieSBEUk0gYnJpZGdlIGRyaXZlcnMsIGFuZCB0aGUgb21hcGRybSBIRE1J
IGFuZCBWRU5DIG91dHB1dHMgY2FuIGJlCmhhbmRsZWQgdGhyb3VnaCB0aGUgZHJtX2JyaWRnZSBB
UEkuIFN3aXRjaCB0aGUgb3V0cHV0cyB0byBkcm1fYnJpZGdlIGJ5Cm1ha2luZyB0aGUgbmV4dCBi
cmlkZ2UgbWFuZGF0b3J5IGFuZCByZW1vdmluZyB0aGUgcmVsYXRlZApvbWFwZHJtLXNwZWNpZmlj
IGRpc3BsYXkgZHJpdmVycy4KClNpZ25lZC1vZmYtYnk6IExhdXJlbnQgUGluY2hhcnQgPGxhdXJl
bnQucGluY2hhcnRAaWRlYXNvbmJvYXJkLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRy
bS9kaXNwbGF5cy9LY29uZmlnICAgICAgfCAgMjIgLS0KIGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJt
L2Rpc3BsYXlzL01ha2VmaWxlICAgICB8ICAgNCAtCiAuLi4vb21hcGRybS9kaXNwbGF5cy9jb25u
ZWN0b3ItYW5hbG9nLXR2LmMgICAgfCAgOTcgLS0tLS0tLS0KIC4uLi9ncHUvZHJtL29tYXBkcm0v
ZGlzcGxheXMvY29ubmVjdG9yLWhkbWkuYyB8IDE4MyAtLS0tLS0tLS0tLS0tLS0KIC4uLi9ncHUv
ZHJtL29tYXBkcm0vZGlzcGxheXMvZW5jb2Rlci1vcGEzNjIuYyB8IDEzNyAtLS0tLS0tLS0tLQog
Li4uL2RybS9vbWFwZHJtL2Rpc3BsYXlzL2VuY29kZXItdHBkMTJzMDE1LmMgIHwgMjE3IC0tLS0t
LS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2hkbWk0LmMgICAgICAg
ICAgIHwgICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvaGRtaTUuYyAgICAgICAg
ICAgfCAgIDQgKy0KIC4uLi9ncHUvZHJtL29tYXBkcm0vZHNzL29tYXBkc3MtYm9vdC1pbml0LmMg
ICB8ICAgNSAtCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb3V0cHV0LmMgICAgICAgICAg
fCAgIDUgKwogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL3ZlbmMuYyAgICAgICAgICAgIHwg
ICA0ICstCiAxMSBmaWxlcyBjaGFuZ2VkLCAxMSBpbnNlcnRpb25zKCspLCA2NzEgZGVsZXRpb25z
KC0pCiBkZWxldGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMv
Y29ubmVjdG9yLWFuYWxvZy10di5jCiBkZWxldGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJt
L29tYXBkcm0vZGlzcGxheXMvY29ubmVjdG9yLWhkbWkuYwogZGVsZXRlIG1vZGUgMTAwNjQ0IGRy
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL2VuY29kZXItb3BhMzYyLmMKIGRlbGV0ZSBt
b2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kaXNwbGF5cy9lbmNvZGVyLXRwZDEy
czAxNS5jCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvS2Nv
bmZpZyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL0tjb25maWcKaW5kZXggMjQw
ZGRhMTAyODQ1Li5mMmJlNTk0YzdlZmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFw
ZHJtL2Rpc3BsYXlzL0tjb25maWcKKysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxh
eXMvS2NvbmZpZwpAQCAtMSwyOCArMSw2IEBACiAjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBH
UEwtMi4wLW9ubHkKIG1lbnUgIk9NQVBEUk0gRXh0ZXJuYWwgRGlzcGxheSBEZXZpY2UgRHJpdmVy
cyIKIAotY29uZmlnIERSTV9PTUFQX0VOQ09ERVJfT1BBMzYyCi0JdHJpc3RhdGUgIk9QQTM2MiBl
eHRlcm5hbCBhbmFsb2cgYW1wbGlmaWVyIgotCWhlbHAKLQkgIERyaXZlciBmb3IgT1BBMzYyIGV4
dGVybmFsIGFuYWxvZyBUViBhbXBsaWZpZXIgY29udHJvbGxlZAotCSAgdGhyb3VnaCBhIEdQSU8u
Ci0KLWNvbmZpZyBEUk1fT01BUF9FTkNPREVSX1RQRDEyUzAxNQotICAgICAgICB0cmlzdGF0ZSAi
VFBEMTJTMDE1IEhETUkgRVNEIHByb3RlY3Rpb24gYW5kIGxldmVsIHNoaWZ0ZXIiCi0JaGVscAot
CSAgRHJpdmVyIGZvciBUUEQxMlMwMTUsIHdoaWNoIG9mZmVycyBIRE1JIEVTRCBwcm90ZWN0aW9u
IGFuZCBsZXZlbAotCSAgc2hpZnRpbmcuCi0KLWNvbmZpZyBEUk1fT01BUF9DT05ORUNUT1JfSERN
SQotICAgICAgICB0cmlzdGF0ZSAiSERNSSBDb25uZWN0b3IiCi0JaGVscAotCSAgRHJpdmVyIGZv
ciBhIGdlbmVyaWMgSERNSSBjb25uZWN0b3IuCi0KLWNvbmZpZyBEUk1fT01BUF9DT05ORUNUT1Jf
QU5BTE9HX1RWCi0gICAgICAgIHRyaXN0YXRlICJBbmFsb2cgVFYgQ29ubmVjdG9yIgotCWhlbHAK
LQkgIERyaXZlciBmb3IgYSBnZW5lcmljIGFuYWxvZyBUViBjb25uZWN0b3IuCi0KIGNvbmZpZyBE
Uk1fT01BUF9QQU5FTF9EU0lfQ00KIAl0cmlzdGF0ZSAiR2VuZXJpYyBEU0kgQ29tbWFuZCBNb2Rl
IFBhbmVsIgogCWRlcGVuZHMgb24gQkFDS0xJR0hUX0NMQVNTX0RFVklDRQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9k
cm0vb21hcGRybS9kaXNwbGF5cy9NYWtlZmlsZQppbmRleCBjYjc2ODU5ZGM1NzQuLjQ4OGRkZjE1
MzYxMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvTWFrZWZp
bGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvTWFrZWZpbGUKQEAgLTEs
NiArMSwyIEBACiAjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCi1vYmotJChDT05G
SUdfRFJNX09NQVBfRU5DT0RFUl9PUEEzNjIpICs9IGVuY29kZXItb3BhMzYyLm8KLW9iai0kKENP
TkZJR19EUk1fT01BUF9FTkNPREVSX1RQRDEyUzAxNSkgKz0gZW5jb2Rlci10cGQxMnMwMTUubwot
b2JqLSQoQ09ORklHX0RSTV9PTUFQX0NPTk5FQ1RPUl9IRE1JKSArPSBjb25uZWN0b3ItaGRtaS5v
Ci1vYmotJChDT05GSUdfRFJNX09NQVBfQ09OTkVDVE9SX0FOQUxPR19UVikgKz0gY29ubmVjdG9y
LWFuYWxvZy10di5vCiBvYmotJChDT05GSUdfRFJNX09NQVBfUEFORUxfRFNJX0NNKSArPSBwYW5l
bC1kc2ktY20ubwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMv
Y29ubmVjdG9yLWFuYWxvZy10di5jIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMv
Y29ubmVjdG9yLWFuYWxvZy10di5jCmRlbGV0ZWQgZmlsZSBtb2RlIDEwMDY0NAppbmRleCBmMzZh
YTE4ODVkMzkuLjAwMDAwMDAwMDAwMAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kaXNw
bGF5cy9jb25uZWN0b3ItYW5hbG9nLXR2LmMKKysrIC9kZXYvbnVsbApAQCAtMSw5NyArMCwwIEBA
Ci0vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vbmx5Ci0vKgotICogQW5hbG9n
IFRWIENvbm5lY3RvciBkcml2ZXIKLSAqCi0gKiBDb3B5cmlnaHQgKEMpIDIwMTMgVGV4YXMgSW5z
dHJ1bWVudHMgSW5jb3Jwb3JhdGVkIC0gaHR0cDovL3d3dy50aS5jb20vCi0gKiBBdXRob3I6IFRv
bWkgVmFsa2VpbmVuIDx0b21pLnZhbGtlaW5lbkB0aS5jb20+Ci0gKi8KLQotI2luY2x1ZGUgPGxp
bnV4L3NsYWIuaD4KLSNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KLSNpbmNsdWRlIDxsaW51eC9w
bGF0Zm9ybV9kZXZpY2UuaD4KLSNpbmNsdWRlIDxsaW51eC9vZi5oPgotCi0jaW5jbHVkZSAiLi4v
ZHNzL29tYXBkc3MuaCIKLQotc3RydWN0IHBhbmVsX2Rydl9kYXRhIHsKLQlzdHJ1Y3Qgb21hcF9k
c3NfZGV2aWNlIGRzc2RldjsKLQotCXN0cnVjdCBkZXZpY2UgKmRldjsKLX07Ci0KLSNkZWZpbmUg
dG9fcGFuZWxfZGF0YSh4KSBjb250YWluZXJfb2YoeCwgc3RydWN0IHBhbmVsX2Rydl9kYXRhLCBk
c3NkZXYpCi0KLXN0YXRpYyBpbnQgdHZjX2Nvbm5lY3Qoc3RydWN0IG9tYXBfZHNzX2RldmljZSAq
c3JjLAotCQkgICAgICAgc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHN0KQotewotCXJldHVybiAw
OwotfQotCi1zdGF0aWMgdm9pZCB0dmNfZGlzY29ubmVjdChzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNl
ICpzcmMsCi0JCQkgICBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3QpCi17Ci19Ci0KLXN0YXRp
YyBjb25zdCBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlX29wcyB0dmNfb3BzID0gewotCS5jb25uZWN0
CQk9IHR2Y19jb25uZWN0LAotCS5kaXNjb25uZWN0CQk9IHR2Y19kaXNjb25uZWN0LAotfTsKLQot
c3RhdGljIGludCB0dmNfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKLXsKLQlz
dHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRhOwotCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRz
c2RldjsKLQotCWRkYXRhID0gZGV2bV9remFsbG9jKCZwZGV2LT5kZXYsIHNpemVvZigqZGRhdGEp
LCBHRlBfS0VSTkVMKTsKLQlpZiAoIWRkYXRhKQotCQlyZXR1cm4gLUVOT01FTTsKLQotCXBsYXRm
b3JtX3NldF9kcnZkYXRhKHBkZXYsIGRkYXRhKTsKLQlkZGF0YS0+ZGV2ID0gJnBkZXYtPmRldjsK
LQotCWRzc2RldiA9ICZkZGF0YS0+ZHNzZGV2OwotCWRzc2Rldi0+b3BzID0gJnR2Y19vcHM7Ci0J
ZHNzZGV2LT5kZXYgPSAmcGRldi0+ZGV2OwotCWRzc2Rldi0+dHlwZSA9IE9NQVBfRElTUExBWV9U
WVBFX1ZFTkM7Ci0JZHNzZGV2LT5kaXNwbGF5ID0gdHJ1ZTsKLQlkc3NkZXYtPm93bmVyID0gVEhJ
U19NT0RVTEU7Ci0JZHNzZGV2LT5vZl9wb3J0ID0gMDsKLQotCW9tYXBkc3NfZGlzcGxheV9pbml0
KGRzc2Rldik7Ci0Jb21hcGRzc19kZXZpY2VfcmVnaXN0ZXIoZHNzZGV2KTsKLQotCXJldHVybiAw
OwotfQotCi1zdGF0aWMgaW50IF9fZXhpdCB0dmNfcmVtb3ZlKHN0cnVjdCBwbGF0Zm9ybV9kZXZp
Y2UgKnBkZXYpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHBsYXRmb3JtX2dl
dF9kcnZkYXRhKHBkZXYpOwotCi0Jb21hcGRzc19kZXZpY2VfdW5yZWdpc3RlcigmZGRhdGEtPmRz
c2Rldik7Ci0KLQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2Vf
aWQgdHZjX29mX21hdGNoW10gPSB7Ci0JeyAuY29tcGF0aWJsZSA9ICJvbWFwZHNzLHN2aWRlby1j
b25uZWN0b3IiLCB9LAotCXsgLmNvbXBhdGlibGUgPSAib21hcGRzcyxjb21wb3NpdGUtdmlkZW8t
Y29ubmVjdG9yIiwgfSwKLQl7fSwKLX07Ci0KLU1PRFVMRV9ERVZJQ0VfVEFCTEUob2YsIHR2Y19v
Zl9tYXRjaCk7Ci0KLXN0YXRpYyBzdHJ1Y3QgcGxhdGZvcm1fZHJpdmVyIHR2Y19jb25uZWN0b3Jf
ZHJpdmVyID0gewotCS5wcm9iZQk9IHR2Y19wcm9iZSwKLQkucmVtb3ZlCT0gX19leGl0X3AodHZj
X3JlbW92ZSksCi0JLmRyaXZlcgk9IHsKLQkJLm5hbWUJPSAiY29ubmVjdG9yLWFuYWxvZy10diIs
Ci0JCS5vZl9tYXRjaF90YWJsZSA9IHR2Y19vZl9tYXRjaCwKLQkJLnN1cHByZXNzX2JpbmRfYXR0
cnMgPSB0cnVlLAotCX0sCi19OwotCi1tb2R1bGVfcGxhdGZvcm1fZHJpdmVyKHR2Y19jb25uZWN0
b3JfZHJpdmVyKTsKLQotTU9EVUxFX0FVVEhPUigiVG9taSBWYWxrZWluZW4gPHRvbWkudmFsa2Vp
bmVuQHRpLmNvbT4iKTsKLU1PRFVMRV9ERVNDUklQVElPTigiQW5hbG9nIFRWIENvbm5lY3RvciBk
cml2ZXIiKTsKLU1PRFVMRV9MSUNFTlNFKCJHUEwiKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9vbWFwZHJtL2Rpc3BsYXlzL2Nvbm5lY3Rvci1oZG1pLmMgYi9kcml2ZXJzL2dwdS9kcm0v
b21hcGRybS9kaXNwbGF5cy9jb25uZWN0b3ItaGRtaS5jCmRlbGV0ZWQgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAzN2MyMTI0OTFjZDMuLjAwMDAwMDAwMDAwMAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
b21hcGRybS9kaXNwbGF5cy9jb25uZWN0b3ItaGRtaS5jCisrKyAvZGV2L251bGwKQEAgLTEsMTgz
ICswLDAgQEAKLS8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkKLS8qCi0g
KiBIRE1JIENvbm5lY3RvciBkcml2ZXIKLSAqCi0gKiBDb3B5cmlnaHQgKEMpIDIwMTMgVGV4YXMg
SW5zdHJ1bWVudHMgSW5jb3Jwb3JhdGVkIC0gaHR0cDovL3d3dy50aS5jb20vCi0gKiBBdXRob3I6
IFRvbWkgVmFsa2VpbmVuIDx0b21pLnZhbGtlaW5lbkB0aS5jb20+Ci0gKi8KLQotI2luY2x1ZGUg
PGxpbnV4L2dwaW8vY29uc3VtZXIuaD4KLSNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KLSNpbmNs
dWRlIDxsaW51eC9tdXRleC5oPgotI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgot
I2luY2x1ZGUgPGxpbnV4L3NsYWIuaD4KLQotI2luY2x1ZGUgIi4uL2Rzcy9vbWFwZHNzLmgiCi0K
LXN0cnVjdCBwYW5lbF9kcnZfZGF0YSB7Ci0Jc3RydWN0IG9tYXBfZHNzX2RldmljZSBkc3NkZXY7
Ci0Jdm9pZCAoKmhwZF9jYikodm9pZCAqY2JfZGF0YSwgZW51bSBkcm1fY29ubmVjdG9yX3N0YXR1
cyBzdGF0dXMpOwotCXZvaWQgKmhwZF9jYl9kYXRhOwotCXN0cnVjdCBtdXRleCBocGRfbG9jazsK
LQotCXN0cnVjdCBkZXZpY2UgKmRldjsKLQotCXN0cnVjdCBncGlvX2Rlc2MgKmhwZF9ncGlvOwot
fTsKLQotI2RlZmluZSB0b19wYW5lbF9kYXRhKHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3QgcGFu
ZWxfZHJ2X2RhdGEsIGRzc2RldikKLQotc3RhdGljIGludCBoZG1pY19jb25uZWN0KHN0cnVjdCBv
bWFwX2Rzc19kZXZpY2UgKnNyYywKLQkJCSBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3QpCi17
Ci0JcmV0dXJuIDA7Ci19Ci0KLXN0YXRpYyB2b2lkIGhkbWljX2Rpc2Nvbm5lY3Qoc3RydWN0IG9t
YXBfZHNzX2RldmljZSAqc3JjLAotCQkJICAgICBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3Qp
Ci17Ci19Ci0KLXN0YXRpYyBib29sIGhkbWljX2RldGVjdChzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNl
ICpkc3NkZXYpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHRvX3BhbmVsX2Rh
dGEoZHNzZGV2KTsKLQotCXJldHVybiBncGlvZF9nZXRfdmFsdWVfY2Fuc2xlZXAoZGRhdGEtPmhw
ZF9ncGlvKTsKLX0KLQotc3RhdGljIHZvaWQgaGRtaWNfcmVnaXN0ZXJfaHBkX2NiKHN0cnVjdCBv
bWFwX2Rzc19kZXZpY2UgKmRzc2RldiwKLQkJCQkgIHZvaWQgKCpjYikodm9pZCAqY2JfZGF0YSwK
LQkJCQkJICAgIGVudW0gZHJtX2Nvbm5lY3Rvcl9zdGF0dXMgc3RhdHVzKSwKLQkJCQkgIHZvaWQg
KmNiX2RhdGEpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHRvX3BhbmVsX2Rh
dGEoZHNzZGV2KTsKLQotCW11dGV4X2xvY2soJmRkYXRhLT5ocGRfbG9jayk7Ci0JZGRhdGEtPmhw
ZF9jYiA9IGNiOwotCWRkYXRhLT5ocGRfY2JfZGF0YSA9IGNiX2RhdGE7Ci0JbXV0ZXhfdW5sb2Nr
KCZkZGF0YS0+aHBkX2xvY2spOwotfQotCi1zdGF0aWMgdm9pZCBoZG1pY191bnJlZ2lzdGVyX2hw
ZF9jYihzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYpCi17Ci0Jc3RydWN0IHBhbmVsX2Ry
dl9kYXRhICpkZGF0YSA9IHRvX3BhbmVsX2RhdGEoZHNzZGV2KTsKLQotCW11dGV4X2xvY2soJmRk
YXRhLT5ocGRfbG9jayk7Ci0JZGRhdGEtPmhwZF9jYiA9IE5VTEw7Ci0JZGRhdGEtPmhwZF9jYl9k
YXRhID0gTlVMTDsKLQltdXRleF91bmxvY2soJmRkYXRhLT5ocGRfbG9jayk7Ci19Ci0KLXN0YXRp
YyBjb25zdCBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlX29wcyBoZG1pY19vcHMgPSB7Ci0JLmNvbm5l
Y3QJCT0gaGRtaWNfY29ubmVjdCwKLQkuZGlzY29ubmVjdAkJPSBoZG1pY19kaXNjb25uZWN0LAot
Ci0JLmRldGVjdAkJCT0gaGRtaWNfZGV0ZWN0LAotCS5yZWdpc3Rlcl9ocGRfY2IJPSBoZG1pY19y
ZWdpc3Rlcl9ocGRfY2IsCi0JLnVucmVnaXN0ZXJfaHBkX2NiCT0gaGRtaWNfdW5yZWdpc3Rlcl9o
cGRfY2IsCi19OwotCi1zdGF0aWMgaXJxcmV0dXJuX3QgaGRtaWNfaHBkX2lzcihpbnQgaXJxLCB2
b2lkICpkYXRhKQotewotCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBkYXRhOwotCi0J
bXV0ZXhfbG9jaygmZGRhdGEtPmhwZF9sb2NrKTsKLQlpZiAoZGRhdGEtPmhwZF9jYikgewotCQll
bnVtIGRybV9jb25uZWN0b3Jfc3RhdHVzIHN0YXR1czsKLQotCQlpZiAoaGRtaWNfZGV0ZWN0KCZk
ZGF0YS0+ZHNzZGV2KSkKLQkJCXN0YXR1cyA9IGNvbm5lY3Rvcl9zdGF0dXNfY29ubmVjdGVkOwot
CQllbHNlCi0JCQlzdGF0dXMgPSBjb25uZWN0b3Jfc3RhdHVzX2Rpc2Nvbm5lY3RlZDsKLQotCQlk
ZGF0YS0+aHBkX2NiKGRkYXRhLT5ocGRfY2JfZGF0YSwgc3RhdHVzKTsKLQl9Ci0JbXV0ZXhfdW5s
b2NrKCZkZGF0YS0+aHBkX2xvY2spOwotCi0JcmV0dXJuIElSUV9IQU5ETEVEOwotfQotCi1zdGF0
aWMgaW50IGhkbWljX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCi17Ci0Jc3Ry
dWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YTsKLQlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3Nk
ZXY7Ci0Jc3RydWN0IGdwaW9fZGVzYyAqZ3BpbzsKLQlpbnQgcjsKLQotCWRkYXRhID0gZGV2bV9r
emFsbG9jKCZwZGV2LT5kZXYsIHNpemVvZigqZGRhdGEpLCBHRlBfS0VSTkVMKTsKLQlpZiAoIWRk
YXRhKQotCQlyZXR1cm4gLUVOT01FTTsKLQotCXBsYXRmb3JtX3NldF9kcnZkYXRhKHBkZXYsIGRk
YXRhKTsKLQlkZGF0YS0+ZGV2ID0gJnBkZXYtPmRldjsKLQotCW11dGV4X2luaXQoJmRkYXRhLT5o
cGRfbG9jayk7Ci0KLQkvKiBIUEQgR1BJTyAqLwotCWdwaW8gPSBkZXZtX2dwaW9kX2dldF9vcHRp
b25hbCgmcGRldi0+ZGV2LCAiaHBkIiwgR1BJT0RfSU4pOwotCWlmIChJU19FUlIoZ3BpbykpIHsK
LQkJZGV2X2VycigmcGRldi0+ZGV2LCAiZmFpbGVkIHRvIHBhcnNlIEhQRCBncGlvXG4iKTsKLQkJ
cmV0dXJuIFBUUl9FUlIoZ3Bpbyk7Ci0JfQotCi0JZGRhdGEtPmhwZF9ncGlvID0gZ3BpbzsKLQot
CWlmIChkZGF0YS0+aHBkX2dwaW8pIHsKLQkJciA9IGRldm1fcmVxdWVzdF90aHJlYWRlZF9pcnEo
JnBkZXYtPmRldiwKLQkJCQlncGlvZF90b19pcnEoZGRhdGEtPmhwZF9ncGlvKSwKLQkJCQlOVUxM
LCBoZG1pY19ocGRfaXNyLAotCQkJCUlSUUZfVFJJR0dFUl9SSVNJTkcgfCBJUlFGX1RSSUdHRVJf
RkFMTElORyB8Ci0JCQkJSVJRRl9PTkVTSE9ULAotCQkJCSJoZG1pYyBocGQiLCBkZGF0YSk7Ci0J
CWlmIChyKQotCQkJcmV0dXJuIHI7Ci0JfQotCi0JZHNzZGV2ID0gJmRkYXRhLT5kc3NkZXY7Ci0J
ZHNzZGV2LT5vcHMgPSAmaGRtaWNfb3BzOwotCWRzc2Rldi0+ZGV2ID0gJnBkZXYtPmRldjsKLQlk
c3NkZXYtPnR5cGUgPSBPTUFQX0RJU1BMQVlfVFlQRV9IRE1JOwotCWRzc2Rldi0+ZGlzcGxheSA9
IHRydWU7Ci0JZHNzZGV2LT5vd25lciA9IFRISVNfTU9EVUxFOwotCWRzc2Rldi0+b2ZfcG9ydCA9
IDA7Ci0JZHNzZGV2LT5vcHNfZmxhZ3MgPSBkZGF0YS0+aHBkX2dwaW8KLQkJCSAgPyBPTUFQX0RT
U19ERVZJQ0VfT1BfREVURUNUIHwgT01BUF9EU1NfREVWSUNFX09QX0hQRAotCQkJICA6IDA7Ci0K
LQlvbWFwZHNzX2Rpc3BsYXlfaW5pdChkc3NkZXYpOwotCW9tYXBkc3NfZGV2aWNlX3JlZ2lzdGVy
KGRzc2Rldik7Ci0KLQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIGludCBfX2V4aXQgaGRtaWNfcmVt
b3ZlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9k
YXRhICpkZGF0YSA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwotCi0Jb21hcGRzc19kZXZp
Y2VfdW5yZWdpc3RlcigmZGRhdGEtPmRzc2Rldik7Ci0KLQlyZXR1cm4gMDsKLX0KLQotc3RhdGlj
IGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgaGRtaWNfb2ZfbWF0Y2hbXSA9IHsKLQl7IC5jb21w
YXRpYmxlID0gIm9tYXBkc3MsaGRtaS1jb25uZWN0b3IiLCB9LAotCXt9LAotfTsKLQotTU9EVUxF
X0RFVklDRV9UQUJMRShvZiwgaGRtaWNfb2ZfbWF0Y2gpOwotCi1zdGF0aWMgc3RydWN0IHBsYXRm
b3JtX2RyaXZlciBoZG1pX2Nvbm5lY3Rvcl9kcml2ZXIgPSB7Ci0JLnByb2JlCT0gaGRtaWNfcHJv
YmUsCi0JLnJlbW92ZQk9IF9fZXhpdF9wKGhkbWljX3JlbW92ZSksCi0JLmRyaXZlcgk9IHsKLQkJ
Lm5hbWUJPSAiY29ubmVjdG9yLWhkbWkiLAotCQkub2ZfbWF0Y2hfdGFibGUgPSBoZG1pY19vZl9t
YXRjaCwKLQkJLnN1cHByZXNzX2JpbmRfYXR0cnMgPSB0cnVlLAotCX0sCi19OwotCi1tb2R1bGVf
cGxhdGZvcm1fZHJpdmVyKGhkbWlfY29ubmVjdG9yX2RyaXZlcik7Ci0KLU1PRFVMRV9BVVRIT1Io
IlRvbWkgVmFsa2VpbmVuIDx0b21pLnZhbGtlaW5lbkB0aS5jb20+Iik7Ci1NT0RVTEVfREVTQ1JJ
UFRJT04oIkhETUkgQ29ubmVjdG9yIGRyaXZlciIpOwotTU9EVUxFX0xJQ0VOU0UoIkdQTCIpOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvZW5jb2Rlci1vcGEz
NjIuYyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL2VuY29kZXItb3BhMzYyLmMK
ZGVsZXRlZCBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDI1MjcwNTIyMmVmMS4uMDAwMDAwMDAwMDAw
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL2VuY29kZXItb3BhMzYyLmMK
KysrIC9kZXYvbnVsbApAQCAtMSwxMzcgKzAsMCBAQAotLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZp
ZXI6IEdQTC0yLjAtb25seQotLyoKLSAqIE9QQTM2MiBhbmFsb2cgdmlkZW8gYW1wbGlmaWVyIHdp
dGggb3V0cHV0L3Bvd2VyIGNvbnRyb2wKLSAqCi0gKiBDb3B5cmlnaHQgKEMpIDIwMTQgR29sZGVu
IERlbGljaW91cyBDb21wdXRlcnMKLSAqIEF1dGhvcjogSC4gTmlrb2xhdXMgU2NoYWxsZXIgPGhu
c0Bnb2xkZWxpY28uY29tPgotICoKLSAqIGJhc2VkIG9uIGVuY29kZXItdGZwNDEwCi0gKgotICog
Q29weXJpZ2h0IChDKSAyMDEzIFRleGFzIEluc3RydW1lbnRzIEluY29ycG9yYXRlZCAtIGh0dHA6
Ly93d3cudGkuY29tLwotICogQXV0aG9yOiBUb21pIFZhbGtlaW5lbiA8dG9taS52YWxrZWluZW5A
dGkuY29tPgotICovCi0KLSNpbmNsdWRlIDxsaW51eC9ncGlvL2NvbnN1bWVyLmg+Ci0jaW5jbHVk
ZSA8bGludXgvbW9kdWxlLmg+Ci0jaW5jbHVkZSA8bGludXgvcGxhdGZvcm1fZGV2aWNlLmg+Ci0j
aW5jbHVkZSA8bGludXgvc2xhYi5oPgotCi0jaW5jbHVkZSAiLi4vZHNzL29tYXBkc3MuaCIKLQot
c3RydWN0IHBhbmVsX2Rydl9kYXRhIHsKLQlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlIGRzc2RldjsK
LQotCXN0cnVjdCBncGlvX2Rlc2MgKmVuYWJsZV9ncGlvOwotfTsKLQotI2RlZmluZSB0b19wYW5l
bF9kYXRhKHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEsIGRzc2RldikK
LQotc3RhdGljIGludCBvcGEzNjJfY29ubmVjdChzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpzcmMs
Ci0JCQkgIHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzdCkKLXsKLQlyZXR1cm4gb21hcGRzc19k
ZXZpY2VfY29ubmVjdChkc3QtPmRzcywgZHN0LCBkc3QtPm5leHQpOwotfQotCi1zdGF0aWMgdm9p
ZCBvcGEzNjJfZGlzY29ubmVjdChzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpzcmMsCi0JCQkgICAg
ICBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3QpCi17Ci0Jb21hcGRzc19kZXZpY2VfZGlzY29u
bmVjdChkc3QsIGRzdC0+bmV4dCk7Ci19Ci0KLXN0YXRpYyB2b2lkIG9wYTM2Ml9lbmFibGUoc3Ry
dWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2KQotewotCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAq
ZGRhdGEgPSB0b19wYW5lbF9kYXRhKGRzc2Rldik7Ci0KLQlpZiAoZGRhdGEtPmVuYWJsZV9ncGlv
KQotCQlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAoZGRhdGEtPmVuYWJsZV9ncGlvLCAxKTsKLX0K
LQotc3RhdGljIHZvaWQgb3BhMzYyX2Rpc2FibGUoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNz
ZGV2KQotewotCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSB0b19wYW5lbF9kYXRhKGRz
c2Rldik7Ci0KLQlpZiAoZGRhdGEtPmVuYWJsZV9ncGlvKQotCQlncGlvZF9zZXRfdmFsdWVfY2Fu
c2xlZXAoZGRhdGEtPmVuYWJsZV9ncGlvLCAwKTsKLX0KLQotc3RhdGljIGNvbnN0IHN0cnVjdCBv
bWFwX2Rzc19kZXZpY2Vfb3BzIG9wYTM2Ml9vcHMgPSB7Ci0JLmNvbm5lY3QJPSBvcGEzNjJfY29u
bmVjdCwKLQkuZGlzY29ubmVjdAk9IG9wYTM2Ml9kaXNjb25uZWN0LAotCS5lbmFibGUJCT0gb3Bh
MzYyX2VuYWJsZSwKLQkuZGlzYWJsZQk9IG9wYTM2Ml9kaXNhYmxlLAotfTsKLQotc3RhdGljIGlu
dCBvcGEzNjJfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKLXsKLQlzdHJ1Y3Qg
cGFuZWxfZHJ2X2RhdGEgKmRkYXRhOwotCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldjsK
LQlzdHJ1Y3QgZ3Bpb19kZXNjICpncGlvOwotCi0JZGV2X2RiZygmcGRldi0+ZGV2LCAicHJvYmVc
biIpOwotCi0JZGRhdGEgPSBkZXZtX2t6YWxsb2MoJnBkZXYtPmRldiwgc2l6ZW9mKCpkZGF0YSks
IEdGUF9LRVJORUwpOwotCWlmICghZGRhdGEpCi0JCXJldHVybiAtRU5PTUVNOwotCi0JcGxhdGZv
cm1fc2V0X2RydmRhdGEocGRldiwgZGRhdGEpOwotCi0JZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0X29w
dGlvbmFsKCZwZGV2LT5kZXYsICJlbmFibGUiLCBHUElPRF9PVVRfTE9XKTsKLQlpZiAoSVNfRVJS
KGdwaW8pKQotCQlyZXR1cm4gUFRSX0VSUihncGlvKTsKLQotCWRkYXRhLT5lbmFibGVfZ3BpbyA9
IGdwaW87Ci0KLQlkc3NkZXYgPSAmZGRhdGEtPmRzc2RldjsKLQlkc3NkZXYtPm9wcyA9ICZvcGEz
NjJfb3BzOwotCWRzc2Rldi0+ZGV2ID0gJnBkZXYtPmRldjsKLQlkc3NkZXYtPnR5cGUgPSBPTUFQ
X0RJU1BMQVlfVFlQRV9WRU5DOwotCWRzc2Rldi0+b3duZXIgPSBUSElTX01PRFVMRTsKLQlkc3Nk
ZXYtPm9mX3BvcnQgPSAxOwotCi0JZHNzZGV2LT5uZXh0ID0gb21hcGRzc19vZl9maW5kX2Nvbm5l
Y3RlZF9kZXZpY2UocGRldi0+ZGV2Lm9mX25vZGUsIDEpOwotCWlmIChJU19FUlIoZHNzZGV2LT5u
ZXh0KSkgewotCQlpZiAoUFRSX0VSUihkc3NkZXYtPm5leHQpICE9IC1FUFJPQkVfREVGRVIpCi0J
CQlkZXZfZXJyKCZwZGV2LT5kZXYsICJmYWlsZWQgdG8gZmluZCB2aWRlbyBzaW5rXG4iKTsKLQkJ
cmV0dXJuIFBUUl9FUlIoZHNzZGV2LT5uZXh0KTsKLQl9Ci0KLQlvbWFwZHNzX2RldmljZV9yZWdp
c3Rlcihkc3NkZXYpOwotCi0JcmV0dXJuIDA7Ci19Ci0KLXN0YXRpYyBpbnQgX19leGl0IG9wYTM2
Ml9yZW1vdmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKLXsKLQlzdHJ1Y3QgcGFuZWxf
ZHJ2X2RhdGEgKmRkYXRhID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7Ci0Jc3RydWN0IG9t
YXBfZHNzX2RldmljZSAqZHNzZGV2ID0gJmRkYXRhLT5kc3NkZXY7Ci0KLQlpZiAoZHNzZGV2LT5u
ZXh0KQotCQlvbWFwZHNzX2RldmljZV9wdXQoZHNzZGV2LT5uZXh0KTsKLQlvbWFwZHNzX2Rldmlj
ZV91bnJlZ2lzdGVyKCZkZGF0YS0+ZHNzZGV2KTsKLQotCW9wYTM2Ml9kaXNhYmxlKGRzc2Rldik7
Ci0KLQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgb3Bh
MzYyX29mX21hdGNoW10gPSB7Ci0JeyAuY29tcGF0aWJsZSA9ICJvbWFwZHNzLHRpLG9wYTM2MiIs
IH0sCi0Je30sCi19OwotTU9EVUxFX0RFVklDRV9UQUJMRShvZiwgb3BhMzYyX29mX21hdGNoKTsK
LQotc3RhdGljIHN0cnVjdCBwbGF0Zm9ybV9kcml2ZXIgb3BhMzYyX2RyaXZlciA9IHsKLQkucHJv
YmUJPSBvcGEzNjJfcHJvYmUsCi0JLnJlbW92ZQk9IF9fZXhpdF9wKG9wYTM2Ml9yZW1vdmUpLAot
CS5kcml2ZXIJPSB7Ci0JCS5uYW1lCT0gImFtcGxpZmllci1vcGEzNjIiLAotCQkub2ZfbWF0Y2hf
dGFibGUgPSBvcGEzNjJfb2ZfbWF0Y2gsCi0JCS5zdXBwcmVzc19iaW5kX2F0dHJzID0gdHJ1ZSwK
LQl9LAotfTsKLQotbW9kdWxlX3BsYXRmb3JtX2RyaXZlcihvcGEzNjJfZHJpdmVyKTsKLQotTU9E
VUxFX0FVVEhPUigiSC4gTmlrb2xhdXMgU2NoYWxsZXIgPGhuc0Bnb2xkZWxpY28uY29tPiIpOwot
TU9EVUxFX0RFU0NSSVBUSU9OKCJPUEEzNjIgYW5hbG9nIHZpZGVvIGFtcGxpZmllciB3aXRoIG91
dHB1dC9wb3dlciBjb250cm9sIik7Ci1NT0RVTEVfTElDRU5TRSgiR1BMIHYyIik7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kaXNwbGF5cy9lbmNvZGVyLXRwZDEyczAxNS5j
IGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvZW5jb2Rlci10cGQxMnMwMTUuYwpk
ZWxldGVkIGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggODU3YWU4NGNkN2QxLi4wMDAwMDAwMDAwMDAK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvZW5jb2Rlci10cGQxMnMwMTUu
YworKysgL2Rldi9udWxsCkBAIC0xLDIxNyArMCwwIEBACi0vLyBTUERYLUxpY2Vuc2UtSWRlbnRp
ZmllcjogR1BMLTIuMC1vbmx5Ci0vKgotICogVFBEMTJTMDE1IEhETUkgRVNEIHByb3RlY3Rpb24g
JiBsZXZlbCBzaGlmdGVyIGNoaXAgZHJpdmVyCi0gKgotICogQ29weXJpZ2h0IChDKSAyMDEzIFRl
eGFzIEluc3RydW1lbnRzIEluY29ycG9yYXRlZCAtIGh0dHA6Ly93d3cudGkuY29tLwotICogQXV0
aG9yOiBUb21pIFZhbGtlaW5lbiA8dG9taS52YWxrZWluZW5AdGkuY29tPgotICovCi0KLSNpbmNs
dWRlIDxsaW51eC9jb21wbGV0aW9uLmg+Ci0jaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KLSNpbmNs
dWRlIDxsaW51eC9tb2R1bGUuaD4KLSNpbmNsdWRlIDxsaW51eC9zbGFiLmg+Ci0jaW5jbHVkZSA8
bGludXgvcGxhdGZvcm1fZGV2aWNlLmg+Ci0jaW5jbHVkZSA8bGludXgvZ3Bpby9jb25zdW1lci5o
PgotI2luY2x1ZGUgPGxpbnV4L211dGV4Lmg+Ci0KLSNpbmNsdWRlICIuLi9kc3Mvb21hcGRzcy5o
IgotCi1zdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgewotCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgZHNz
ZGV2OwotCXZvaWQgKCpocGRfY2IpKHZvaWQgKmNiX2RhdGEsIGVudW0gZHJtX2Nvbm5lY3Rvcl9z
dGF0dXMgc3RhdHVzKTsKLQl2b2lkICpocGRfY2JfZGF0YTsKLQlzdHJ1Y3QgbXV0ZXggaHBkX2xv
Y2s7Ci0KLQlzdHJ1Y3QgZ3Bpb19kZXNjICpjdF9jcF9ocGRfZ3BpbzsKLQlzdHJ1Y3QgZ3Bpb19k
ZXNjICpsc19vZV9ncGlvOwotCXN0cnVjdCBncGlvX2Rlc2MgKmhwZF9ncGlvOwotfTsKLQotI2Rl
ZmluZSB0b19wYW5lbF9kYXRhKHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3QgcGFuZWxfZHJ2X2Rh
dGEsIGRzc2RldikKLQotc3RhdGljIGludCB0cGRfY29ubmVjdChzdHJ1Y3Qgb21hcF9kc3NfZGV2
aWNlICpzcmMsCi0JCSAgICAgICBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3QpCi17Ci0Jc3Ry
dWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHRvX3BhbmVsX2RhdGEoZHN0KTsKLQlpbnQgcjsK
LQotCXIgPSBvbWFwZHNzX2RldmljZV9jb25uZWN0KGRzdC0+ZHNzLCBkc3QsIGRzdC0+bmV4dCk7
Ci0JaWYgKHIpCi0JCXJldHVybiByOwotCi0JZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGRkYXRh
LT5jdF9jcF9ocGRfZ3BpbywgMSk7Ci0JZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGRkYXRhLT5s
c19vZV9ncGlvLCAxKTsKLQotCS8qIERDLURDIGNvbnZlcnRlciBuZWVkcyBhdCBtYXggMzAwdXMg
dG8gZ2V0IHRvIDkwJSBvZiA1ViAqLwotCXVkZWxheSgzMDApOwotCi0JcmV0dXJuIDA7Ci19Ci0K
LXN0YXRpYyB2b2lkIHRwZF9kaXNjb25uZWN0KHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKnNyYywK
LQkJCSAgIHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzdCkKLXsKLQlzdHJ1Y3QgcGFuZWxfZHJ2
X2RhdGEgKmRkYXRhID0gdG9fcGFuZWxfZGF0YShkc3QpOwotCi0JZ3Bpb2Rfc2V0X3ZhbHVlX2Nh
bnNsZWVwKGRkYXRhLT5jdF9jcF9ocGRfZ3BpbywgMCk7Ci0JZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNs
ZWVwKGRkYXRhLT5sc19vZV9ncGlvLCAwKTsKLQotCW9tYXBkc3NfZGV2aWNlX2Rpc2Nvbm5lY3Qo
ZHN0LCBkc3QtPm5leHQpOwotfQotCi1zdGF0aWMgYm9vbCB0cGRfZGV0ZWN0KHN0cnVjdCBvbWFw
X2Rzc19kZXZpY2UgKmRzc2RldikKLXsKLQlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRhID0g
dG9fcGFuZWxfZGF0YShkc3NkZXYpOwotCi0JcmV0dXJuIGdwaW9kX2dldF92YWx1ZV9jYW5zbGVl
cChkZGF0YS0+aHBkX2dwaW8pOwotfQotCi1zdGF0aWMgdm9pZCB0cGRfcmVnaXN0ZXJfaHBkX2Ni
KHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwKLQkJCQl2b2lkICgqY2IpKHZvaWQgKmNi
X2RhdGEsCi0JCQkJCSAgZW51bSBkcm1fY29ubmVjdG9yX3N0YXR1cyBzdGF0dXMpLAotCQkJCXZv
aWQgKmNiX2RhdGEpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHRvX3BhbmVs
X2RhdGEoZHNzZGV2KTsKLQotCW11dGV4X2xvY2soJmRkYXRhLT5ocGRfbG9jayk7Ci0JZGRhdGEt
PmhwZF9jYiA9IGNiOwotCWRkYXRhLT5ocGRfY2JfZGF0YSA9IGNiX2RhdGE7Ci0JbXV0ZXhfdW5s
b2NrKCZkZGF0YS0+aHBkX2xvY2spOwotfQotCi1zdGF0aWMgdm9pZCB0cGRfdW5yZWdpc3Rlcl9o
cGRfY2Ioc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2KQotewotCXN0cnVjdCBwYW5lbF9k
cnZfZGF0YSAqZGRhdGEgPSB0b19wYW5lbF9kYXRhKGRzc2Rldik7Ci0KLQltdXRleF9sb2NrKCZk
ZGF0YS0+aHBkX2xvY2spOwotCWRkYXRhLT5ocGRfY2IgPSBOVUxMOwotCWRkYXRhLT5ocGRfY2Jf
ZGF0YSA9IE5VTEw7Ci0JbXV0ZXhfdW5sb2NrKCZkZGF0YS0+aHBkX2xvY2spOwotfQotCi1zdGF0
aWMgY29uc3Qgc3RydWN0IG9tYXBfZHNzX2RldmljZV9vcHMgdHBkX29wcyA9IHsKLQkuY29ubmVj
dAkJPSB0cGRfY29ubmVjdCwKLQkuZGlzY29ubmVjdAkJPSB0cGRfZGlzY29ubmVjdCwKLQkuZGV0
ZWN0CQkJPSB0cGRfZGV0ZWN0LAotCS5yZWdpc3Rlcl9ocGRfY2IJPSB0cGRfcmVnaXN0ZXJfaHBk
X2NiLAotCS51bnJlZ2lzdGVyX2hwZF9jYgk9IHRwZF91bnJlZ2lzdGVyX2hwZF9jYiwKLX07Ci0K
LXN0YXRpYyBpcnFyZXR1cm5fdCB0cGRfaHBkX2lzcihpbnQgaXJxLCB2b2lkICpkYXRhKQotewot
CXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBkYXRhOwotCi0JbXV0ZXhfbG9jaygmZGRh
dGEtPmhwZF9sb2NrKTsKLQlpZiAoZGRhdGEtPmhwZF9jYikgewotCQllbnVtIGRybV9jb25uZWN0
b3Jfc3RhdHVzIHN0YXR1czsKLQotCQlpZiAodHBkX2RldGVjdCgmZGRhdGEtPmRzc2RldikpCi0J
CQlzdGF0dXMgPSBjb25uZWN0b3Jfc3RhdHVzX2Nvbm5lY3RlZDsKLQkJZWxzZQotCQkJc3RhdHVz
ID0gY29ubmVjdG9yX3N0YXR1c19kaXNjb25uZWN0ZWQ7Ci0KLQkJZGRhdGEtPmhwZF9jYihkZGF0
YS0+aHBkX2NiX2RhdGEsIHN0YXR1cyk7Ci0JfQotCW11dGV4X3VubG9jaygmZGRhdGEtPmhwZF9s
b2NrKTsKLQotCXJldHVybiBJUlFfSEFORExFRDsKLX0KLQotc3RhdGljIGludCB0cGRfcHJvYmUo
c3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKLXsKLQlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNl
ICpkc3NkZXY7Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YTsKLQlpbnQgcjsKLQlzdHJ1
Y3QgZ3Bpb19kZXNjICpncGlvOwotCi0JZGRhdGEgPSBkZXZtX2t6YWxsb2MoJnBkZXYtPmRldiwg
c2l6ZW9mKCpkZGF0YSksIEdGUF9LRVJORUwpOwotCWlmICghZGRhdGEpCi0JCXJldHVybiAtRU5P
TUVNOwotCi0JcGxhdGZvcm1fc2V0X2RydmRhdGEocGRldiwgZGRhdGEpOwotCi0JZ3BpbyA9IGRl
dm1fZ3Bpb2RfZ2V0X2luZGV4X29wdGlvbmFsKCZwZGV2LT5kZXYsIE5VTEwsIDAsCi0JCSBHUElP
RF9PVVRfTE9XKTsKLQlpZiAoSVNfRVJSKGdwaW8pKQotCQlyZXR1cm4gUFRSX0VSUihncGlvKTsK
LQotCWRkYXRhLT5jdF9jcF9ocGRfZ3BpbyA9IGdwaW87Ci0KLQlncGlvID0gZGV2bV9ncGlvZF9n
ZXRfaW5kZXhfb3B0aW9uYWwoJnBkZXYtPmRldiwgTlVMTCwgMSwKLQkJIEdQSU9EX09VVF9MT1cp
OwotCWlmIChJU19FUlIoZ3BpbykpCi0JCXJldHVybiBQVFJfRVJSKGdwaW8pOwotCi0JZGRhdGEt
PmxzX29lX2dwaW8gPSBncGlvOwotCi0JZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0X2luZGV4KCZwZGV2
LT5kZXYsIE5VTEwsIDIsCi0JCUdQSU9EX0lOKTsKLQlpZiAoSVNfRVJSKGdwaW8pKQotCQlyZXR1
cm4gUFRSX0VSUihncGlvKTsKLQotCWRkYXRhLT5ocGRfZ3BpbyA9IGdwaW87Ci0KLQltdXRleF9p
bml0KCZkZGF0YS0+aHBkX2xvY2spOwotCi0JciA9IGRldm1fcmVxdWVzdF90aHJlYWRlZF9pcnEo
JnBkZXYtPmRldiwgZ3Bpb2RfdG9faXJxKGRkYXRhLT5ocGRfZ3BpbyksCi0JCU5VTEwsIHRwZF9o
cGRfaXNyLAotCQlJUlFGX1RSSUdHRVJfUklTSU5HIHwgSVJRRl9UUklHR0VSX0ZBTExJTkcgfCBJ
UlFGX09ORVNIT1QsCi0JCSJ0cGQxMnMwMTUgaHBkIiwgZGRhdGEpOwotCWlmIChyKQotCQlyZXR1
cm4gcjsKLQotCWRzc2RldiA9ICZkZGF0YS0+ZHNzZGV2OwotCWRzc2Rldi0+b3BzID0gJnRwZF9v
cHM7Ci0JZHNzZGV2LT5kZXYgPSAmcGRldi0+ZGV2OwotCWRzc2Rldi0+dHlwZSA9IE9NQVBfRElT
UExBWV9UWVBFX0hETUk7Ci0JZHNzZGV2LT5vd25lciA9IFRISVNfTU9EVUxFOwotCWRzc2Rldi0+
b2ZfcG9ydCA9IDE7Ci0JZHNzZGV2LT5vcHNfZmxhZ3MgPSBPTUFQX0RTU19ERVZJQ0VfT1BfREVU
RUNUCi0JCQkgIHwgT01BUF9EU1NfREVWSUNFX09QX0hQRDsKLQotCWRzc2Rldi0+bmV4dCA9IG9t
YXBkc3Nfb2ZfZmluZF9jb25uZWN0ZWRfZGV2aWNlKHBkZXYtPmRldi5vZl9ub2RlLCAxKTsKLQlp
ZiAoSVNfRVJSKGRzc2Rldi0+bmV4dCkpIHsKLQkJaWYgKFBUUl9FUlIoZHNzZGV2LT5uZXh0KSAh
PSAtRVBST0JFX0RFRkVSKQotCQkJZGV2X2VycigmcGRldi0+ZGV2LCAiZmFpbGVkIHRvIGZpbmQg
dmlkZW8gc2lua1xuIik7Ci0JCXJldHVybiBQVFJfRVJSKGRzc2Rldi0+bmV4dCk7Ci0JfQotCi0J
b21hcGRzc19kZXZpY2VfcmVnaXN0ZXIoZHNzZGV2KTsKLQotCXJldHVybiAwOwotfQotCi1zdGF0
aWMgaW50IF9fZXhpdCB0cGRfcmVtb3ZlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCi17
Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBk
ZXYpOwotCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiA9ICZkZGF0YS0+ZHNzZGV2Owot
Ci0JaWYgKGRzc2Rldi0+bmV4dCkKLQkJb21hcGRzc19kZXZpY2VfcHV0KGRzc2Rldi0+bmV4dCk7
Ci0Jb21hcGRzc19kZXZpY2VfdW5yZWdpc3RlcigmZGRhdGEtPmRzc2Rldik7Ci0KLQlyZXR1cm4g
MDsKLX0KLQotc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgdHBkX29mX21hdGNoW10g
PSB7Ci0JeyAuY29tcGF0aWJsZSA9ICJvbWFwZHNzLHRpLHRwZDEyczAxNSIsIH0sCi0Je30sCi19
OwotCi1NT0RVTEVfREVWSUNFX1RBQkxFKG9mLCB0cGRfb2ZfbWF0Y2gpOwotCi1zdGF0aWMgc3Ry
dWN0IHBsYXRmb3JtX2RyaXZlciB0cGRfZHJpdmVyID0gewotCS5wcm9iZQk9IHRwZF9wcm9iZSwK
LQkucmVtb3ZlCT0gX19leGl0X3AodHBkX3JlbW92ZSksCi0JLmRyaXZlcgk9IHsKLQkJLm5hbWUJ
PSAidHBkMTJzMDE1IiwKLQkJLm9mX21hdGNoX3RhYmxlID0gdHBkX29mX21hdGNoLAotCQkuc3Vw
cHJlc3NfYmluZF9hdHRycyA9IHRydWUsCi0JfSwKLX07Ci0KLW1vZHVsZV9wbGF0Zm9ybV9kcml2
ZXIodHBkX2RyaXZlcik7Ci0KLU1PRFVMRV9BVVRIT1IoIlRvbWkgVmFsa2VpbmVuIDx0b21pLnZh
bGtlaW5lbkB0aS5jb20+Iik7Ci1NT0RVTEVfREVTQ1JJUFRJT04oIlRQRDEyUzAxNSBkcml2ZXIi
KTsKLU1PRFVMRV9MSUNFTlNFKCJHUEwiKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9v
bWFwZHJtL2Rzcy9oZG1pNC5jIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2hkbWk0LmMK
aW5kZXggMzQ5YjEwODFiOThmLi41ZDZhZGJiMWQ1NDcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9vbWFwZHJtL2Rzcy9oZG1pNC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rz
cy9oZG1pNC5jCkBAIC00NDMsOCArNDQzLDggQEAgc3RhdGljIGludCBoZG1pNF9icmlkZ2VfYXR0
YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiB7CiAJc3RydWN0IG9tYXBfaGRtaSAqaGRt
aSA9IGRybV9icmlkZ2VfdG9faGRtaShicmlkZ2UpOwogCi0JaWYgKCFoZG1pLT5vdXRwdXQubmV4
dF9icmlkZ2UpCi0JCXJldHVybiAwOworCWlmICghKGZsYWdzICYgRFJNX0JSSURHRV9BVFRBQ0hf
Tk9fQ09OTkVDVE9SKSkKKwkJcmV0dXJuIC1FSU5WQUw7CiAKIAlyZXR1cm4gZHJtX2JyaWRnZV9h
dHRhY2goYnJpZGdlLT5lbmNvZGVyLCBoZG1pLT5vdXRwdXQubmV4dF9icmlkZ2UsCiAJCQkJIGJy
aWRnZSwgZmxhZ3MpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2hk
bWk1LmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvaGRtaTUuYwppbmRleCAwOWJlM2Yw
ZGVjODEuLjc0MzAwZmVhODZjYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0v
ZHNzL2hkbWk1LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2hkbWk1LmMKQEAg
LTQyMSw4ICs0MjEsOCBAQCBzdGF0aWMgaW50IGhkbWk1X2JyaWRnZV9hdHRhY2goc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSwKIHsKIAlzdHJ1Y3Qgb21hcF9oZG1pICpoZG1pID0gZHJtX2JyaWRn
ZV90b19oZG1pKGJyaWRnZSk7CiAKLQlpZiAoIWhkbWktPm91dHB1dC5uZXh0X2JyaWRnZSkKLQkJ
cmV0dXJuIDA7CisJaWYgKCEoZmxhZ3MgJiBEUk1fQlJJREdFX0FUVEFDSF9OT19DT05ORUNUT1Ip
KQorCQlyZXR1cm4gLUVJTlZBTDsKIAogCXJldHVybiBkcm1fYnJpZGdlX2F0dGFjaChicmlkZ2Ut
PmVuY29kZXIsIGhkbWktPm91dHB1dC5uZXh0X2JyaWRnZSwKIAkJCQkgYnJpZGdlLCBmbGFncyk7
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb21hcGRzcy1ib290LWlu
aXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLWJvb3QtaW5pdC5jCmlu
ZGV4IDMxNTAyODU3ZjAxMy4uYWUzNTZmOGM4M2U4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vb21hcGRybS9kc3Mvb21hcGRzcy1ib290LWluaXQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
b21hcGRybS9kc3Mvb21hcGRzcy1ib290LWluaXQuYwpAQCAtMTc0LDEyICsxNzQsNyBAQCBzdGF0
aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBvbWFwZHNzX29mX21hdGNoW10gX19pbml0Y29u
c3QgPSB7CiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBvbWFwZHNzX29m
X2ZpeHVwc193aGl0ZWxpc3RbXSBfX2luaXRjb25zdCA9IHsKLQl7IC5jb21wYXRpYmxlID0gImNv
bXBvc2l0ZS12aWRlby1jb25uZWN0b3IiIH0sCi0JeyAuY29tcGF0aWJsZSA9ICJoZG1pLWNvbm5l
Y3RvciIgfSwKIAl7IC5jb21wYXRpYmxlID0gInBhbmVsLWRzaS1jbSIgfSwKLQl7IC5jb21wYXRp
YmxlID0gInN2aWRlby1jb25uZWN0b3IiIH0sCi0JeyAuY29tcGF0aWJsZSA9ICJ0aSxvcGEzNjIi
IH0sCi0JeyAuY29tcGF0aWJsZSA9ICJ0aSx0cGQxMnMwMTUiIH0sCiAJe30sCiB9OwogCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb3V0cHV0LmMgYi9kcml2ZXJzL2dw
dS9kcm0vb21hcGRybS9kc3Mvb3V0cHV0LmMKaW5kZXggYjI3NzM5YWZiMzM1Li44YWE5ZWU1YTJi
MDEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vdXRwdXQuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb3V0cHV0LmMKQEAgLTYxLDYgKzYxLDExIEBA
IGludCBvbWFwZHNzX2RldmljZV9pbml0X291dHB1dChzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpv
dXQsCiAJfQogCiAJaWYgKGxvY2FsX2JyaWRnZSkgeworCQlpZiAoIW91dC0+YnJpZGdlKSB7CisJ
CQlyZXQgPSAtRVBST0JFX0RFRkVSOworCQkJZ290byBlcnJvcjsKKwkJfQorCiAJCW91dC0+bmV4
dF9icmlkZ2UgPSBvdXQtPmJyaWRnZTsKIAkJb3V0LT5icmlkZ2UgPSBsb2NhbF9icmlkZ2U7CiAJ
fQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL3ZlbmMuYyBiL2RyaXZl
cnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy92ZW5jLmMKaW5kZXggNDZlMzMzNDQyZDVhLi5jYzc3NWU4
Yjk5NzggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy92ZW5jLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL3ZlbmMuYwpAQCAtNjI4LDggKzYyOCw4IEBA
IHN0YXRpYyBpbnQgdmVuY19icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2Us
CiB7CiAJc3RydWN0IHZlbmNfZGV2aWNlICp2ZW5jID0gZHJtX2JyaWRnZV90b192ZW5jKGJyaWRn
ZSk7CiAKLQlpZiAodmVuYy0+b3V0cHV0Lm5leHRfYnJpZGdlKQotCQlyZXR1cm4gMDsKKwlpZiAo
IShmbGFncyAmIERSTV9CUklER0VfQVRUQUNIX05PX0NPTk5FQ1RPUikpCisJCXJldHVybiAtRUlO
VkFMOwogCiAJcmV0dXJuIGRybV9icmlkZ2VfYXR0YWNoKGJyaWRnZS0+ZW5jb2RlciwgdmVuYy0+
b3V0cHV0Lm5leHRfYnJpZGdlLAogCQkJCSBicmlkZ2UsIGZsYWdzKTsKLS0gClJlZ2FyZHMsCgpM
YXVyZW50IFBpbmNoYXJ0CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmkt
ZGV2ZWw=
