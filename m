Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id AEF629A8C6
	for <lists+dri-devel@lfdr.de>; Fri, 23 Aug 2019 09:30:47 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 869906EBBD;
	Fri, 23 Aug 2019 07:30:44 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from foss.arm.com (foss.arm.com [217.140.110.172])
 by gabe.freedesktop.org (Postfix) with ESMTP id F32726EB2B
 for <dri-devel@lists.freedesktop.org>; Thu, 22 Aug 2019 13:27:08 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id A50D9337;
 Thu, 22 Aug 2019 06:27:08 -0700 (PDT)
Received: from [10.1.196.133] (e112269-lin.cambridge.arm.com [10.1.196.133])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 8F1763F706;
 Thu, 22 Aug 2019 06:27:07 -0700 (PDT)
Subject: Re: [PATCH 1/4] drm/shmem: Do dma_unmap_sg before purging pages
To: Rob Herring <robh@kernel.org>, dri-devel@lists.freedesktop.org
References: <20190819161204.3106-1-robh@kernel.org>
 <20190819161204.3106-2-robh@kernel.org>
From: Steven Price <steven.price@arm.com>
Message-ID: <fe8d2180-32e3-096f-cd74-968b91fd9504@arm.com>
Date: Thu, 22 Aug 2019 14:27:06 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190819161204.3106-2-robh@kernel.org>
Content-Language: en-GB
X-Mailman-Approved-At: Fri, 23 Aug 2019 07:30:43 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Tomeu Vizoso <tomeu.vizoso@collabora.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Robin Murphy <robin.murphy@arm.com>,
 David Airlie <airlied@linux.ie>,
 Boris Brezillon <boris.brezillon@collabora.com>, Sean Paul <sean@poorly.run>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gMTkvMDgvMjAxOSAxNzoxMiwgUm9iIEhlcnJpbmcgd3JvdGU6Cj4gQ2FsbGluZyBkbWFfdW5t
YXBfc2coKSBpbiBkcm1fZ2VtX3NobWVtX2ZyZWVfb2JqZWN0KCkgaXMgdG9vIGxhdGUgaWYgdGhl
Cj4gYmFja2luZyBwYWdlcyBoYXZlIGFscmVhZHkgYmVlbiByZWxlYXNlZCBieSB0aGUgc2hyaW5r
ZXIuIFRoZSByZXN1bHQgaXMKPiB0aGUgZm9sbG93aW5nIGFib3J0Ogo+IAo+IFVuYWJsZSB0byBo
YW5kbGUga2VybmVsIHBhZ2luZyByZXF1ZXN0IGF0IHZpcnR1YWwgYWRkcmVzcyBmZmZmODAwMDA5
OGVkMDAwCj4gTWVtIGFib3J0IGluZm86Cj4gICBFU1IgPSAweDk2MDAwMTQ3Cj4gICBFeGNlcHRp
b24gY2xhc3MgPSBEQUJUIChjdXJyZW50IEVMKSwgSUwgPSAzMiBiaXRzCj4gICBTRVQgPSAwLCBG
blYgPSAwCj4gICBFQSA9IDAsIFMxUFRXID0gMAo+IERhdGEgYWJvcnQgaW5mbzoKPiAgIElTViA9
IDAsIElTUyA9IDB4MDAwMDAxNDcKPiAgIENNID0gMSwgV25SID0gMQo+IHN3YXBwZXIgcGd0YWJs
ZTogNGsgcGFnZXMsIDQ4LWJpdCBWQXMsIHBnZHA9MDAwMDAwMDAwMmY1MTAwMAo+IFtmZmZmODAw
MDA5OGVkMDAwXSBwZ2Q9MDAwMDAwMDA0MDFmODAwMywgcHVkPTAwMDAwMDAwNDAxZjcwMDMsIHBt
ZD0wMDAwMDAwMDQwMWIxMDAzLCBwdGU9MDBlODAwMDAwOThlZDcxMgo+IEludGVybmFsIGVycm9y
OiBPb3BzOiA5NjAwMDE0NyBbIzFdIFNNUAo+IE1vZHVsZXMgbGlua2VkIGluOiBwYW5mcm9zdCBn
cHVfc2NoZWQKPiBDUFU6IDUgUElEOiA5MDIgQ29tbTogZ25vbWUtc2hlbGwgTm90IHRhaW50ZWQg
NS4zLjAtcmMxKyAjOTUKPiBIYXJkd2FyZSBuYW1lOiA5NmJvYXJkcyBSb2NrOTYwIChEVCkKPiBw
c3RhdGU6IDQwMDAwMDA1IChuWmN2IGRhaWYgLVBBTiAtVUFPKQo+IHBjIDogX19kbWFfaW52X2Fy
ZWErMHg0MC8weDU4Cj4gbHIgOiBhcmNoX3N5bmNfZG1hX2Zvcl9jcHUrMHgyOC8weDMwCj4gc3Ag
OiBmZmZmMDAwMDEzMjFiYTMwCj4geDI5OiBmZmZmMDAwMDEzMjFiYTMwIHgyODogZmZmZjAwMDAx
MzIxYmQwOAo+IHgyNzogMDAwMDAwMDAwMDAwMDAwMCB4MjY6IDAwMDAwMDAwMDAwMDAwMDkKPiB4
MjU6IDAwMDBmZmZmYzFmODYxNzAgeDI0OiAwMDAwMDAwMDAwMDAwMDAwCj4geDIzOiAwMDAwMDAw
MDAwMDAwMDAwIHgyMjogMDAwMDAwMDAwMDAwMDAwMAo+IHgyMTogMDAwMDAwMDAwMDAyMTAwMCB4
MjA6IGZmZmY4MDAwM2JiMmQ4MTAKPiB4MTk6IDAwMDAwMDAwMDk4ZWQwMDAgeDE4OiAwMDAwMDAw
MDAwMDAwMDAwCj4geDE3OiAwMDAwMDAwMDAwMDAwMDAwIHgxNjogZmZmZjgwMDAyM2ZkOTQ4MAo+
IHgxNTogMDAwMDAwMDAwMDAwMDAwMCB4MTQ6IDAwMDAwMDAwMDAwMDAwMDAKPiB4MTM6IDAwMDAw
MDAwMDAwMDAwMDAgeDEyOiAwMDAwMDAwMDAwMDAwMDAwCj4geDExOiAwMDAwMDAwMGZmZmI5ZmZm
IHgxMDogMDAwMDAwMDAwMDAwMDAwMAo+IHg5IDogMDAwMDAwMDAwMDAwMDAwMCB4OCA6IGZmZmY4
MDAwMjNmZDljMTgKPiB4NyA6IDAwMDAwMDAwMDAwMDAwMDAgeDYgOiAwMDAwMDAwMGZmZmZmZmZm
Cj4geDUgOiAwMDAwMDAwMDAwMDAwMDAwIHg0IDogMDAwMDAwMDAwMDAyMTAwMAo+IFB1cmdpbmcg
NTY5MzQ0MCBieXRlcwo+IHgzIDogMDAwMDAwMDAwMDAwMDAzZiB4MiA6IDAwMDAwMDAwMDAwMDAw
NDAKPiB4MSA6IGZmZmY4MDAwMDk5MGUwMDAgeDAgOiBmZmZmODAwMDA5OGVkMDAwCj4gQ2FsbCB0
cmFjZToKPiAgX19kbWFfaW52X2FyZWErMHg0MC8weDU4Cj4gIGRtYV9kaXJlY3Rfc3luY19zaW5n
bGVfZm9yX2NwdSsweDdjLzB4ODAKPiAgZG1hX2RpcmVjdF91bm1hcF9wYWdlKzB4ODAvMHg4OAo+
ICBkbWFfZGlyZWN0X3VubWFwX3NnKzB4NTQvMHg4MAo+ICBkcm1fZ2VtX3NobWVtX2ZyZWVfb2Jq
ZWN0KzB4ZmMvMHgxMDgKPiAgcGFuZnJvc3RfZ2VtX2ZyZWVfb2JqZWN0KzB4MTE4LzB4MTI4IFtw
YW5mcm9zdF0KPiAgZHJtX2dlbV9vYmplY3RfZnJlZSsweDE4LzB4OTAKPiAgZHJtX2dlbV9vYmpl
Y3RfcHV0X3VubG9ja2VkKzB4NTgvMHg4MAo+ICBkcm1fZ2VtX29iamVjdF9oYW5kbGVfcHV0X3Vu
bG9ja2VkKzB4NjQvMHhiMAo+ICBkcm1fZ2VtX29iamVjdF9yZWxlYXNlX2hhbmRsZSsweDcwLzB4
OTgKPiAgZHJtX2dlbV9oYW5kbGVfZGVsZXRlKzB4NjQvMHhiMAo+ICBkcm1fZ2VtX2Nsb3NlX2lv
Y3RsKzB4MjgvMHgzOAo+ICBkcm1faW9jdGxfa2VybmVsKzB4YjgvMHgxMTAKPiAgZHJtX2lvY3Rs
KzB4MjQ0LzB4M2YwCj4gIGRvX3Zmc19pb2N0bCsweGJjLzB4OTEwCj4gIGtzeXNfaW9jdGwrMHg3
OC8weGE4Cj4gIF9fYXJtNjRfc3lzX2lvY3RsKzB4MWMvMHgyOAo+ICBlbDBfc3ZjX2NvbW1vbi5j
b25zdHByb3AuMCsweDg4LzB4MTUwCj4gIGVsMF9zdmNfaGFuZGxlcisweDI4LzB4NzgKPiAgZWww
X3N2YysweDgvMHhjCj4gIENvZGU6IDhhMjMwMDAwIDU0MDAwMDYwIGQ1MGI3ZTIwIDE0MDAwMDAy
IChkNTA4NzYyMCkKPiAKPiBGaXhlczogMTdhY2I5ZjM1ZWQ3ICgiZHJtL3NobWVtOiBBZGQgbWFk
dmlzZSBzdGF0ZSBhbmQgcHVyZ2UgaGVscGVycyIpCj4gQ2M6IE1hYXJ0ZW4gTGFua2hvcnN0IDxt
YWFydGVuLmxhbmtob3JzdEBsaW51eC5pbnRlbC5jb20+Cj4gQ2M6IE1heGltZSBSaXBhcmQgPG1h
eGltZS5yaXBhcmRAYm9vdGxpbi5jb20+Cj4gQ2M6IFNlYW4gUGF1bCA8c2VhbkBwb29ybHkucnVu
Pgo+IENjOiBEYXZpZCBBaXJsaWUgPGFpcmxpZWRAbGludXguaWU+Cj4gQ2M6IERhbmllbCBWZXR0
ZXIgPGRhbmllbEBmZndsbC5jaD4KPiBTaWduZWQtb2ZmLWJ5OiBSb2IgSGVycmluZyA8cm9iaEBr
ZXJuZWwub3JnPgoKTG9va3MgZ29vZCB0byBtZToKClJldmlld2VkLWJ5OiBTdGV2ZW4gUHJpY2Ug
PHN0ZXZlbi5wcmljZUBhcm0uY29tPgoKPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2RybV9nZW1f
c2htZW1faGVscGVyLmMgfCA2ICsrKysrKwo+ICAxIGZpbGUgY2hhbmdlZCwgNiBpbnNlcnRpb25z
KCspCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBl
ci5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fc2htZW1faGVscGVyLmMKPiBpbmRleCBkZjhm
MmM4YWRiMmIuLjU0MjNlYzU2YjUzNSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJt
X2dlbV9zaG1lbV9oZWxwZXIuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVt
X2hlbHBlci5jCj4gQEAgLTM5MCw2ICszOTAsMTIgQEAgdm9pZCBkcm1fZ2VtX3NobWVtX3B1cmdl
X2xvY2tlZChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKPiAgCj4gIAlXQVJOX09OKCFkcm1f
Z2VtX3NobWVtX2lzX3B1cmdlYWJsZShzaG1lbSkpOwo+ICAKPiArCWRtYV91bm1hcF9zZyhvYmot
PmRldi0+ZGV2LCBzaG1lbS0+c2d0LT5zZ2wsCj4gKwkJICAgICBzaG1lbS0+c2d0LT5uZW50cywg
RE1BX0JJRElSRUNUSU9OQUwpOwo+ICsJc2dfZnJlZV90YWJsZShzaG1lbS0+c2d0KTsKPiArCWtm
cmVlKHNobWVtLT5zZ3QpOwo+ICsJc2htZW0tPnNndCA9IE5VTEw7Cj4gKwo+ICAJZHJtX2dlbV9z
aG1lbV9wdXRfcGFnZXNfbG9ja2VkKHNobWVtKTsKPiAgCj4gIAlzaG1lbS0+bWFkdiA9IC0xOwo+
IAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRl
dmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
