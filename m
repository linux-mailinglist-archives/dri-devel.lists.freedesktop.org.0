Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id AC81C2FBE81
	for <lists+dri-devel@lfdr.de>; Tue, 19 Jan 2021 19:05:29 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 48FFB89267;
	Tue, 19 Jan 2021 18:05:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ot1-x336.google.com (mail-ot1-x336.google.com
 [IPv6:2607:f8b0:4864:20::336])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 32592891E3
 for <dri-devel@lists.freedesktop.org>; Tue, 19 Jan 2021 18:05:24 +0000 (UTC)
Received: by mail-ot1-x336.google.com with SMTP id a109so20701218otc.1
 for <dri-devel@lists.freedesktop.org>; Tue, 19 Jan 2021 10:05:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=MN5Mzc43tlwq6EtRJN40ynCgn2661AIhxdjJUP3B4BM=;
 b=bh+gZDjFnh5+7+yw4Na3Yk4WG7v1eVNHYjTYRg8vWkg8QAYKFC63k5jPeXftp0uICR
 kbIysorFXg8aSfOBFOhxx7EuhyxKRAakbrPQFK4UjtwI5Q8gfuUfuu69GcAUH5aXe1jy
 gpQXB/nym9bCLpVZmyRrW6WKRq7XCxEfeYWK8=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=MN5Mzc43tlwq6EtRJN40ynCgn2661AIhxdjJUP3B4BM=;
 b=lkKvryX5DDscPNMBlgjw9KrSEUEa5PL8fPYw6a+ISTRd9OobjTubBQ/VCa+pgKMdeM
 slgAe7Y0dayuefPzXtuwOBEOk0EmDcrlOsSRw3KMyALcpWVk8+aF9GkYKcu4t7sZNCV9
 Li2ayRsnAM10M161MZiyvzEJMBclSB+f6qg+ce5DPwUTSV6RVWW13rDf1SaXJSyiOo51
 xP24Gu7k7orX8QFe4R4oSDkJKRznV/BHoZ2DcixrSOoaPHLYFtJKnki8LVzO9MpAqMd7
 M5FUiMQmXowDbItX6aliqIs+jVXMQ0dBbDZ8v27BHPq9Odj2aOlQGvIKFE8GaaT+C5CW
 KxEg==
X-Gm-Message-State: AOAM532jT8wHmifRXnlHkAYw2BqQRPGGsf9qCmjeCxm6059p5D7/9PTC
 QNwCnqNBQHOhkM4eLN0+v1GqYqEdRyLWiQGi2XiKnw==
X-Google-Smtp-Source: ABdhPJwtIdeMWeFu+lA2nPgrGOH2XPE4P0rmylJ7Y0Z8pZSywLDg/jY7CFpMTHCwGw8HCJM7i35mXaTkRtHmu9FUJUM=
X-Received: by 2002:a05:6830:1bef:: with SMTP id
 k15mr4258013otb.303.1611079523267; 
 Tue, 19 Jan 2021 10:05:23 -0800 (PST)
MIME-Version: 1.0
References: <1611003683-3534-1-git-send-email-andrey.grodzovsky@amd.com>
 <1611003683-3534-12-git-send-email-andrey.grodzovsky@amd.com>
 <35ecd67f-620f-df50-3e03-d24dc12452d6@gmail.com>
 <8925db97-bf81-7e5e-527d-f654713b400d@amd.com>
In-Reply-To: <8925db97-bf81-7e5e-527d-f654713b400d@amd.com>
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Tue, 19 Jan 2021 19:05:12 +0100
Message-ID: <CAKMK7uHCzBpaC2YypKeQwbJiT0JG2Hq7V0BC5yC88f9nqgxUiw@mail.gmail.com>
Subject: Re: [PATCH v4 11/14] drm/amdgpu: Guard against write accesses after
 device removal
To: Andrey Grodzovsky <Andrey.Grodzovsky@amd.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: amd-gfx list <amd-gfx@lists.freedesktop.org>,
 Greg KH <gregkh@linuxfoundation.org>,
 dri-devel <dri-devel@lists.freedesktop.org>, Qiang Yu <yuq825@gmail.com>,
 Alex Deucher <Alexander.Deucher@amd.com>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBKYW4gMTksIDIwMjEgYXQgNDozNSBQTSBBbmRyZXkgR3JvZHpvdnNreQo8QW5kcmV5
Lkdyb2R6b3Zza3lAYW1kLmNvbT4gd3JvdGU6Cj4KPiBUaGVyZSBpcyByZWFsbHkgbm8gb3RoZXIg
d2F5IGFjY29yZGluZyB0byB0aGlzIGFydGljbGUKPiBodHRwczovL2x3bi5uZXQvQXJ0aWNsZXMv
NzY3ODg1Lwo+Cj4gIkEgcGVyZmVjdCBzb2x1dGlvbiBzZWVtcyBuZWFybHkgaW1wb3NzaWJsZSB0
aG91Z2g7IHdlIGNhbm5vdCBhY3F1aXJlIGEgbXV0ZXggb24KPiB0aGUgdXNlcgo+IHRvIHByZXZl
bnQgdGhlbSBmcm9tIHlhbmtpbmcgYSBkZXZpY2UgYW5kIHdlIGNhbm5vdCBjaGVjayBmb3IgYSBw
cmVzZW5jZSBjaGFuZ2UKPiBhZnRlciBldmVyeQo+IGRldmljZSBhY2Nlc3MgZm9yIHBlcmZvcm1h
bmNlIHJlYXNvbnMuICIKPgo+IEJ1dCBJIGFzc3VtZWQgc3JjdV9yZWFkX2xvY2sgc2hvdWxkIGJl
IHByZXR0eSBzZWFtbGVzcyBwZXJmb3JtYW5jZSB3aXNlLCBubyA/CgpUaGUgcmVhZCBzaWRlIGlz
IHN1cHBvc2VkIHRvIGJlIGRpcnQgY2hlYXAsIHRoZSB3cml0ZSBzaWRlIGlzIHdlcmUgd2UKanVz
dCBzdGFsbCBmb3IgYWxsIHJlYWRlcnMgdG8gZXZlbnR1YWxseSBjb21wbGV0ZSBvbiB0aGVpciBv
d24uCkRlZmluaXRlbHkgc2hvdWxkIGJlIG11Y2ggY2hlYXBlciB0aGFuIG1taW8gcmVhZCwgb24g
dGhlIG1taW8gd3JpdGUKc2lkZSBpdCBtaWdodCBhY3R1YWxseSBodXJ0IGEgYml0LiBPdG9oIEkg
dGhpbmsgdGhvc2UgZG9uJ3Qgc3RhbGwgdGhlCmNwdSBieSBkZWZhdWx0IHdoZW4gdGhleSdyZSB0
aW1pbmcgb3V0LCBzbyBtYXliZSBpZiB0aGUgb3ZlcmhlYWQgaXMKdG9vIG11Y2ggZm9yIHRob3Nl
LCB3ZSBjb3VsZCBvbWl0IHRoZW0/CgpNYXliZSBqdXN0IGRvIGEgc21hbGwgbWljcm9iZW5jaG1h
cmsgZm9yIHRoZXNlIGZvciB0ZXN0aW5nLCB3aXRoIGEKcmVnaXN0ZXIgdGhhdCBkb2Vzbid0IGNo
YW5nZSBodyBzdGF0ZS4gU28gd2l0aCBhbmQgd2l0aG91dApkcm1fZGV2X2VudGVyL2V4aXQsIGFu
ZCBhbHNvIG9uZSB3aXRoIHRoZSBodyBwbHVnZ2VkIG91dCBzbyB0aGF0IHdlCmhhdmUgYWN0dWFs
IHRpbWVvdXRzIGluIHRoZSB0cmFuc2FjdGlvbnMuCi1EYW5pZWwKCj4gVGhlIG90aGVyIHNvbHV0
aW9uIHdvdWxkIGJlIGFzIEkgc3VnZ2VzdGVkIHRvIGtlZXAgYWxsIHRoZSBkZXZpY2UgSU8gcmFu
Z2VzCj4gcmVzZXJ2ZWQgYW5kIHN5c3RlbQo+IG1lbW9yeSBwYWdlcyB1bmZyZWVkIHVudGlsIHRo
ZSBkZXZpY2UgaXMgZmluYWxpemVkIGluIHRoZSBkcml2ZXIgYnV0IERhbmllbCBzYWlkCj4gdGhp
cyB3b3VsZCB1cHNldCB0aGUgUENJIGxheWVyICh0aGUgTU1JTyByYW5nZXMgcmVzZXJ2YXRpb24g
cGFydCkuCj4KPiBBbmRyZXkKPgo+Cj4KPgo+IE9uIDEvMTkvMjEgMzo1NSBBTSwgQ2hyaXN0aWFu
IEvDtm5pZyB3cm90ZToKPiA+IEFtIDE4LjAxLjIxIHVtIDIyOjAxIHNjaHJpZWIgQW5kcmV5IEdy
b2R6b3Zza3k6Cj4gPj4gVGhpcyBzaG91bGQgcHJldmVudCB3cml0aW5nIHRvIG1lbW9yeSBvciBJ
TyByYW5nZXMgcG9zc2libHkKPiA+PiBhbHJlYWR5IGFsbG9jYXRlZCBmb3Igb3RoZXIgdXNlcyBh
ZnRlciBvdXIgZGV2aWNlIGlzIHJlbW92ZWQuCj4gPgo+ID4gV293LCB0aGF0IGFkZHMgcXVpdGUg
c29tZSBvdmVyaGVhZCB0byBldmVyeSByZWdpc3RlciBhY2Nlc3MuIEknbSBub3Qgc3VyZSB3ZQo+
ID4gY2FuIGRvIHRoaXMuCj4gPgo+ID4gQ2hyaXN0aWFuLgo+ID4KPiA+Pgo+ID4+IFNpZ25lZC1v
ZmYtYnk6IEFuZHJleSBHcm9kem92c2t5IDxhbmRyZXkuZ3JvZHpvdnNreUBhbWQuY29tPgo+ID4+
IC0tLQo+ID4+ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RldmljZS5jIHwg
NTcgKysrKysrKysrKysrKysrKysrKysrKysrCj4gPj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfZ21jLmMgICAgfCAgOSArKysrCj4gPj4gICBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfcHNwLmMgICAgfCA1MyArKysrKysrKysrKysrLS0tLS0tLS0tCj4gPj4g
ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmggICAgfCAgMyArKwo+ID4+
ICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3JpbmcuYyAgIHwgNzAgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrCj4gPj4gICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfcmluZy5oICAgfCA0OSArKy0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+PiAgIGRyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92MTFfMC5jICAgICB8IDE2ICsrLS0tLS0KPiA+PiAg
IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92MTJfMC5jICAgICB8ICA4ICstLS0KPiA+
PiAgIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92M18xLmMgICAgICB8ICA4ICstLS0K
PiA+PiAgIDkgZmlsZXMgY2hhbmdlZCwgMTg0IGluc2VydGlvbnMoKyksIDg5IGRlbGV0aW9ucygt
KQo+ID4+Cj4gPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9kZXZpY2UuYwo+ID4+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rldmlj
ZS5jCj4gPj4gaW5kZXggZTk5ZjRmMS4uMGE5ZDczYyAxMDA2NDQKPiA+PiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMKPiA+PiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMKPiA+PiBAQCAtNzIsNiArNzIsOCBAQAo+
ID4+ICAgICAjaW5jbHVkZSA8bGludXgvaW9tbXUuaD4KPiA+PiAgICsjaW5jbHVkZSA8ZHJtL2Ry
bV9kcnYuaD4KPiA+PiArCj4gPj4gICBNT0RVTEVfRklSTVdBUkUoImFtZGdwdS92ZWdhMTBfZ3B1
X2luZm8uYmluIik7Cj4gPj4gICBNT0RVTEVfRklSTVdBUkUoImFtZGdwdS92ZWdhMTJfZ3B1X2lu
Zm8uYmluIik7Cj4gPj4gICBNT0RVTEVfRklSTVdBUkUoImFtZGdwdS9yYXZlbl9ncHVfaW5mby5i
aW4iKTsKPiA+PiBAQCAtNDA0LDEzICs0MDYsMjEgQEAgdWludDhfdCBhbWRncHVfbW1fcnJlZzgo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gPj4gdWludDMyX3Qgb2Zmc2V0KQo+ID4+ICAg
ICovCj4gPj4gICB2b2lkIGFtZGdwdV9tbV93cmVnOChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
diwgdWludDMyX3Qgb2Zmc2V0LCB1aW50OF90Cj4gPj4gdmFsdWUpCj4gPj4gICB7Cj4gPj4gKyAg
ICBpbnQgaWR4Owo+ID4+ICsKPiA+PiAgICAgICBpZiAoYWRldi0+aW5fcGNpX2Vycl9yZWNvdmVy
eSkKPiA+PiAgICAgICAgICAgcmV0dXJuOwo+ID4+ICAgKwo+ID4+ICsgICAgaWYgKCFkcm1fZGV2
X2VudGVyKCZhZGV2LT5kZGV2LCAmaWR4KSkKPiA+PiArICAgICAgICByZXR1cm47Cj4gPj4gKwo+
ID4+ICAgICAgIGlmIChvZmZzZXQgPCBhZGV2LT5ybW1pb19zaXplKQo+ID4+ICAgICAgICAgICB3
cml0ZWIodmFsdWUsIGFkZXYtPnJtbWlvICsgb2Zmc2V0KTsKPiA+PiAgICAgICBlbHNlCj4gPj4g
ICAgICAgICAgIEJVRygpOwo+ID4+ICsKPiA+PiArICAgIGRybV9kZXZfZXhpdChpZHgpOwo+ID4+
ICAgfQo+ID4+ICAgICAvKioKPiA+PiBAQCAtNDI3LDkgKzQzNywxNCBAQCB2b2lkIGFtZGdwdV9k
ZXZpY2Vfd3JlZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiA+PiAgICAgICAgICAgICAg
IHVpbnQzMl90IHJlZywgdWludDMyX3QgdiwKPiA+PiAgICAgICAgICAgICAgIHVpbnQzMl90IGFj
Y19mbGFncykKPiA+PiAgIHsKPiA+PiArICAgIGludCBpZHg7Cj4gPj4gKwo+ID4+ICAgICAgIGlm
IChhZGV2LT5pbl9wY2lfZXJyX3JlY292ZXJ5KQo+ID4+ICAgICAgICAgICByZXR1cm47Cj4gPj4g
ICArICAgIGlmICghZHJtX2Rldl9lbnRlcigmYWRldi0+ZGRldiwgJmlkeCkpCj4gPj4gKyAgICAg
ICAgcmV0dXJuOwo+ID4+ICsKPiA+PiAgICAgICBpZiAoKHJlZyAqIDQpIDwgYWRldi0+cm1taW9f
c2l6ZSkgewo+ID4+ICAgICAgICAgICBpZiAoIShhY2NfZmxhZ3MgJiBBTURHUFVfUkVHU19OT19L
SVEpICYmCj4gPj4gICAgICAgICAgICAgICBhbWRncHVfc3Jpb3ZfcnVudGltZShhZGV2KSAmJgo+
ID4+IEBAIC00NDQsNiArNDU5LDggQEAgdm9pZCBhbWRncHVfZGV2aWNlX3dyZWcoc3RydWN0IGFt
ZGdwdV9kZXZpY2UgKmFkZXYsCj4gPj4gICAgICAgfQo+ID4+ICAgICAgICAgdHJhY2VfYW1kZ3B1
X2RldmljZV93cmVnKGFkZXYtPnBkZXYtPmRldmljZSwgcmVnLCB2KTsKPiA+PiArCj4gPj4gKyAg
ICBkcm1fZGV2X2V4aXQoaWR4KTsKPiA+PiAgIH0KPiA+PiAgICAgLyoKPiA+PiBAQCAtNDU0LDkg
KzQ3MSwxNCBAQCB2b2lkIGFtZGdwdV9kZXZpY2Vfd3JlZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldiwKPiA+PiAgIHZvaWQgYW1kZ3B1X21tX3dyZWdfbW1pb19ybGMoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYsCj4gPj4gICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IHJlZywgdWludDMy
X3QgdikKPiA+PiAgIHsKPiA+PiArICAgIGludCBpZHg7Cj4gPj4gKwo+ID4+ICAgICAgIGlmIChh
ZGV2LT5pbl9wY2lfZXJyX3JlY292ZXJ5KQo+ID4+ICAgICAgICAgICByZXR1cm47Cj4gPj4gICAr
ICAgIGlmICghZHJtX2Rldl9lbnRlcigmYWRldi0+ZGRldiwgJmlkeCkpCj4gPj4gKyAgICAgICAg
cmV0dXJuOwo+ID4+ICsKPiA+PiAgICAgICBpZiAoYW1kZ3B1X3NyaW92X2Z1bGxhY2Nlc3MoYWRl
dikgJiYKPiA+PiAgICAgICAgICAgYWRldi0+Z2Z4LnJsYy5mdW5jcyAmJgo+ID4+ICAgICAgICAg
ICBhZGV2LT5nZngucmxjLmZ1bmNzLT5pc19ybGNnX2FjY2Vzc19yYW5nZSkgewo+ID4+IEBAIC00
NjUsNiArNDg3LDggQEAgdm9pZCBhbWRncHVfbW1fd3JlZ19tbWlvX3JsYyhzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldiwKPiA+PiAgICAgICB9IGVsc2Ugewo+ID4+ICAgICAgICAgICB3cml0ZWwo
diwgKCh2b2lkIF9faW9tZW0gKilhZGV2LT5ybW1pbykgKyAocmVnICogNCkpOwo+ID4+ICAgICAg
IH0KPiA+PiArCj4gPj4gKyAgICBkcm1fZGV2X2V4aXQoaWR4KTsKPiA+PiAgIH0KPiA+PiAgICAg
LyoqCj4gPj4gQEAgLTQ5OSwxNSArNTIzLDIyIEBAIHUzMiBhbWRncHVfaW9fcnJlZyhzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiwgdTMyIHJlZykKPiA+PiAgICAqLwo+ID4+ICAgdm9pZCBhbWRn
cHVfaW9fd3JlZyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdTMyIHJlZywgdTMyIHYpCj4g
Pj4gICB7Cj4gPj4gKyAgICBpbnQgaWR4Owo+ID4+ICsKPiA+PiAgICAgICBpZiAoYWRldi0+aW5f
cGNpX2Vycl9yZWNvdmVyeSkKPiA+PiAgICAgICAgICAgcmV0dXJuOwo+ID4+ICAgKyAgICBpZiAo
IWRybV9kZXZfZW50ZXIoJmFkZXYtPmRkZXYsICZpZHgpKQo+ID4+ICsgICAgICAgIHJldHVybjsK
PiA+PiArCj4gPj4gICAgICAgaWYgKChyZWcgKiA0KSA8IGFkZXYtPnJpb19tZW1fc2l6ZSkKPiA+
PiAgICAgICAgICAgaW93cml0ZTMyKHYsIGFkZXYtPnJpb19tZW0gKyAocmVnICogNCkpOwo+ID4+
ICAgICAgIGVsc2Ugewo+ID4+ICAgICAgICAgICBpb3dyaXRlMzIoKHJlZyAqIDQpLCBhZGV2LT5y
aW9fbWVtICsgKG1tTU1fSU5ERVggKiA0KSk7Cj4gPj4gICAgICAgICAgIGlvd3JpdGUzMih2LCBh
ZGV2LT5yaW9fbWVtICsgKG1tTU1fREFUQSAqIDQpKTsKPiA+PiAgICAgICB9Cj4gPj4gKwo+ID4+
ICsgICAgZHJtX2Rldl9leGl0KGlkeCk7Cj4gPj4gICB9Cj4gPj4gICAgIC8qKgo+ID4+IEBAIC01
NDQsMTQgKzU3NSwyMSBAQCB1MzIgYW1kZ3B1X21tX3Jkb29yYmVsbChzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldiwgdTMyCj4gPj4gaW5kZXgpCj4gPj4gICAgKi8KPiA+PiAgIHZvaWQgYW1kZ3B1
X21tX3dkb29yYmVsbChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgdTMyIGluZGV4LCB1MzIg
dikKPiA+PiAgIHsKPiA+PiArICAgIGludCBpZHg7Cj4gPj4gKwo+ID4+ICAgICAgIGlmIChhZGV2
LT5pbl9wY2lfZXJyX3JlY292ZXJ5KQo+ID4+ICAgICAgICAgICByZXR1cm47Cj4gPj4gICArICAg
IGlmICghZHJtX2Rldl9lbnRlcigmYWRldi0+ZGRldiwgJmlkeCkpCj4gPj4gKyAgICAgICAgcmV0
dXJuOwo+ID4+ICsKPiA+PiAgICAgICBpZiAoaW5kZXggPCBhZGV2LT5kb29yYmVsbC5udW1fZG9v
cmJlbGxzKSB7Cj4gPj4gICAgICAgICAgIHdyaXRlbCh2LCBhZGV2LT5kb29yYmVsbC5wdHIgKyBp
bmRleCk7Cj4gPj4gICAgICAgfSBlbHNlIHsKPiA+PiAgICAgICAgICAgRFJNX0VSUk9SKCJ3cml0
aW5nIGJleW9uZCBkb29yYmVsbCBhcGVydHVyZTogMHglMDh4IVxuIiwgaW5kZXgpOwo+ID4+ICAg
ICAgIH0KPiA+PiArCj4gPj4gKyAgICBkcm1fZGV2X2V4aXQoaWR4KTsKPiA+PiAgIH0KPiA+PiAg
ICAgLyoqCj4gPj4gQEAgLTU4OCwxNCArNjI2LDIxIEBAIHU2NCBhbWRncHVfbW1fcmRvb3JiZWxs
NjQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gPj4gdTMyIGluZGV4KQo+ID4+ICAgICov
Cj4gPj4gICB2b2lkIGFtZGdwdV9tbV93ZG9vcmJlbGw2NChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldiwgdTMyIGluZGV4LCB1NjQgdikKPiA+PiAgIHsKPiA+PiArICAgIGludCBpZHg7Cj4gPj4g
Kwo+ID4+ICAgICAgIGlmIChhZGV2LT5pbl9wY2lfZXJyX3JlY292ZXJ5KQo+ID4+ICAgICAgICAg
ICByZXR1cm47Cj4gPj4gICArICAgIGlmICghZHJtX2Rldl9lbnRlcigmYWRldi0+ZGRldiwgJmlk
eCkpCj4gPj4gKyAgICAgICAgcmV0dXJuOwo+ID4+ICsKPiA+PiAgICAgICBpZiAoaW5kZXggPCBh
ZGV2LT5kb29yYmVsbC5udW1fZG9vcmJlbGxzKSB7Cj4gPj4gICAgICAgICAgIGF0b21pYzY0X3Nl
dCgoYXRvbWljNjRfdCAqKShhZGV2LT5kb29yYmVsbC5wdHIgKyBpbmRleCksIHYpOwo+ID4+ICAg
ICAgIH0gZWxzZSB7Cj4gPj4gICAgICAgICAgIERSTV9FUlJPUigid3JpdGluZyBiZXlvbmQgZG9v
cmJlbGwgYXBlcnR1cmU6IDB4JTA4eCFcbiIsIGluZGV4KTsKPiA+PiAgICAgICB9Cj4gPj4gKwo+
ID4+ICsgICAgZHJtX2Rldl9leGl0KGlkeCk7Cj4gPj4gICB9Cj4gPj4gICAgIC8qKgo+ID4+IEBA
IC02ODIsNiArNzI3LDEwIEBAIHZvaWQgYW1kZ3B1X2RldmljZV9pbmRpcmVjdF93cmVnKHN0cnVj
dCBhbWRncHVfZGV2aWNlCj4gPj4gKmFkZXYsCj4gPj4gICAgICAgdW5zaWduZWQgbG9uZyBmbGFn
czsKPiA+PiAgICAgICB2b2lkIF9faW9tZW0gKnBjaWVfaW5kZXhfb2Zmc2V0Owo+ID4+ICAgICAg
IHZvaWQgX19pb21lbSAqcGNpZV9kYXRhX29mZnNldDsKPiA+PiArICAgIGludCBpZHg7Cj4gPj4g
Kwo+ID4+ICsgICAgaWYgKCFkcm1fZGV2X2VudGVyKCZhZGV2LT5kZGV2LCAmaWR4KSkKPiA+PiAr
ICAgICAgICByZXR1cm47Cj4gPj4gICAgICAgICBzcGluX2xvY2tfaXJxc2F2ZSgmYWRldi0+cGNp
ZV9pZHhfbG9jaywgZmxhZ3MpOwo+ID4+ICAgICAgIHBjaWVfaW5kZXhfb2Zmc2V0ID0gKHZvaWQg
X19pb21lbSAqKWFkZXYtPnJtbWlvICsgcGNpZV9pbmRleCAqIDQ7Cj4gPj4gQEAgLTY5Miw2ICs3
NDEsOCBAQCB2b2lkIGFtZGdwdV9kZXZpY2VfaW5kaXJlY3Rfd3JlZyhzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldiwKPiA+PiAgICAgICB3cml0ZWwocmVnX2RhdGEsIHBjaWVfZGF0YV9vZmZzZXQp
Owo+ID4+ICAgICAgIHJlYWRsKHBjaWVfZGF0YV9vZmZzZXQpOwo+ID4+ICAgICAgIHNwaW5fdW5s
b2NrX2lycXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZsYWdzKTsKPiA+PiArCj4gPj4g
KyAgICBkcm1fZGV2X2V4aXQoaWR4KTsKPiA+PiAgIH0KPiA+PiAgICAgLyoqCj4gPj4gQEAgLTcx
MSw2ICs3NjIsMTAgQEAgdm9pZCBhbWRncHVfZGV2aWNlX2luZGlyZWN0X3dyZWc2NChzdHJ1Y3Qg
YW1kZ3B1X2RldmljZQo+ID4+ICphZGV2LAo+ID4+ICAgICAgIHVuc2lnbmVkIGxvbmcgZmxhZ3M7
Cj4gPj4gICAgICAgdm9pZCBfX2lvbWVtICpwY2llX2luZGV4X29mZnNldDsKPiA+PiAgICAgICB2
b2lkIF9faW9tZW0gKnBjaWVfZGF0YV9vZmZzZXQ7Cj4gPj4gKyAgICBpbnQgaWR4Owo+ID4+ICsK
PiA+PiArICAgIGlmICghZHJtX2Rldl9lbnRlcigmYWRldi0+ZGRldiwgJmlkeCkpCj4gPj4gKyAg
ICAgICAgcmV0dXJuOwo+ID4+ICAgICAgICAgc3Bpbl9sb2NrX2lycXNhdmUoJmFkZXYtPnBjaWVf
aWR4X2xvY2ssIGZsYWdzKTsKPiA+PiAgICAgICBwY2llX2luZGV4X29mZnNldCA9ICh2b2lkIF9f
aW9tZW0gKilhZGV2LT5ybW1pbyArIHBjaWVfaW5kZXggKiA0Owo+ID4+IEBAIC03MjcsNiArNzgy
LDggQEAgdm9pZCBhbWRncHVfZGV2aWNlX2luZGlyZWN0X3dyZWc2NChzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZQo+ID4+ICphZGV2LAo+ID4+ICAgICAgIHdyaXRlbCgodTMyKShyZWdfZGF0YSA+PiAzMiks
IHBjaWVfZGF0YV9vZmZzZXQpOwo+ID4+ICAgICAgIHJlYWRsKHBjaWVfZGF0YV9vZmZzZXQpOwo+
ID4+ICAgICAgIHNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmFkZXYtPnBjaWVfaWR4X2xvY2ssIGZs
YWdzKTsKPiA+PiArCj4gPj4gKyAgICBkcm1fZGV2X2V4aXQoaWR4KTsKPiA+PiAgIH0KPiA+PiAg
ICAgLyoqCj4gPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9nbWMuYwo+ID4+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5jCj4g
Pj4gaW5kZXggZmUxYTM5Zi4uMWJlYjRlNiAxMDA2NDQKPiA+PiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmMKPiA+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfZ21jLmMKPiA+PiBAQCAtMzEsNiArMzEsOCBAQAo+ID4+ICAgI2luY2x1
ZGUgImFtZGdwdV9yYXMuaCIKPiA+PiAgICNpbmNsdWRlICJhbWRncHVfeGdtaS5oIgo+ID4+ICAg
KyNpbmNsdWRlIDxkcm0vZHJtX2Rydi5oPgo+ID4+ICsKPiA+PiAgIC8qKgo+ID4+ICAgICogYW1k
Z3B1X2dtY19nZXRfcGRlX2Zvcl9ibyAtIGdldCB0aGUgUERFIGZvciBhIEJPCj4gPj4gICAgKgo+
ID4+IEBAIC05OCw2ICsxMDAsMTAgQEAgaW50IGFtZGdwdV9nbWNfc2V0X3B0ZV9wZGUoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gPj4gdm9pZCAqY3B1X3B0X2FkZHIsCj4gPj4gICB7Cj4g
Pj4gICAgICAgdm9pZCBfX2lvbWVtICpwdHIgPSAodm9pZCAqKWNwdV9wdF9hZGRyOwo+ID4+ICAg
ICAgIHVpbnQ2NF90IHZhbHVlOwo+ID4+ICsgICAgaW50IGlkeDsKPiA+PiArCj4gPj4gKyAgICBp
ZiAoIWRybV9kZXZfZW50ZXIoJmFkZXYtPmRkZXYsICZpZHgpKQo+ID4+ICsgICAgICAgIHJldHVy
biAwOwo+ID4+ICAgICAgICAgLyoKPiA+PiAgICAgICAgKiBUaGUgZm9sbG93aW5nIGlzIGZvciBQ
VEUgb25seS4gR0FSVCBkb2VzIG5vdCBoYXZlIFBERXMuCj4gPj4gQEAgLTEwNSw2ICsxMTEsOSBA
QCBpbnQgYW1kZ3B1X2dtY19zZXRfcHRlX3BkZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwK
PiA+PiB2b2lkICpjcHVfcHRfYWRkciwKPiA+PiAgICAgICB2YWx1ZSA9IGFkZHIgJiAweDAwMDBG
RkZGRkZGRkYwMDBVTEw7Cj4gPj4gICAgICAgdmFsdWUgfD0gZmxhZ3M7Cj4gPj4gICAgICAgd3Jp
dGVxKHZhbHVlLCBwdHIgKyAoZ3B1X3BhZ2VfaWR4ICogOCkpOwo+ID4+ICsKPiA+PiArICAgIGRy
bV9kZXZfZXhpdChpZHgpOwo+ID4+ICsKPiA+PiAgICAgICByZXR1cm4gMDsKPiA+PiAgIH0KPiA+
PiAgIGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmMK
PiA+PiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9wc3AuYwo+ID4+IGluZGV4
IDUyM2QyMmQuLjg5ZTJiZmUgMTAwNjQ0Cj4gPj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X3BzcC5jCj4gPj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3BzcC5jCj4gPj4gQEAgLTM3LDYgKzM3LDggQEAKPiA+PiAgICAgI2luY2x1ZGUgImFt
ZGdwdV9yYXMuaCIKPiA+PiAgICsjaW5jbHVkZSA8ZHJtL2RybV9kcnYuaD4KPiA+PiArCj4gPj4g
ICBzdGF0aWMgaW50IHBzcF9zeXNmc19pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KTsK
PiA+PiAgIHN0YXRpYyB2b2lkIHBzcF9zeXNmc19maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2KTsKPiA+PiAgIEBAIC0yNDgsNyArMjUwLDcgQEAgcHNwX2NtZF9zdWJtaXRfYnVmKHN0cnVj
dCBwc3BfY29udGV4dCAqcHNwLAo+ID4+ICAgICAgICAgICAgICBzdHJ1Y3QgcHNwX2dmeF9jbWRf
cmVzcCAqY21kLCB1aW50NjRfdCBmZW5jZV9tY19hZGRyKQo+ID4+ICAgewo+ID4+ICAgICAgIGlu
dCByZXQ7Cj4gPj4gLSAgICBpbnQgaW5kZXg7Cj4gPj4gKyAgICBpbnQgaW5kZXgsIGlkeDsKPiA+
PiAgICAgICBpbnQgdGltZW91dCA9IDIwMDA7Cj4gPj4gICAgICAgYm9vbCByYXNfaW50ciA9IGZh
bHNlOwo+ID4+ICAgICAgIGJvb2wgc2tpcF91bnN1cHBvcnQgPSBmYWxzZTsKPiA+PiBAQCAtMjU2
LDYgKzI1OCw5IEBAIHBzcF9jbWRfc3VibWl0X2J1ZihzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCwK
PiA+PiAgICAgICBpZiAocHNwLT5hZGV2LT5pbl9wY2lfZXJyX3JlY292ZXJ5KQo+ID4+ICAgICAg
ICAgICByZXR1cm4gMDsKPiA+PiAgICsgICAgaWYgKCFkcm1fZGV2X2VudGVyKCZwc3AtPmFkZXYt
PmRkZXYsICZpZHgpKQo+ID4+ICsgICAgICAgIHJldHVybiAwOwo+ID4+ICsKPiA+PiAgICAgICBt
dXRleF9sb2NrKCZwc3AtPm11dGV4KTsKPiA+PiAgICAgICAgIG1lbXNldChwc3AtPmNtZF9idWZf
bWVtLCAwLCBQU1BfQ01EX0JVRkZFUl9TSVpFKTsKPiA+PiBAQCAtMjY2LDggKzI3MSw3IEBAIHBz
cF9jbWRfc3VibWl0X2J1ZihzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCwKPiA+PiAgICAgICByZXQg
PSBwc3BfcmluZ19jbWRfc3VibWl0KHBzcCwgcHNwLT5jbWRfYnVmX21jX2FkZHIsIGZlbmNlX21j
X2FkZHIsCj4gPj4gaW5kZXgpOwo+ID4+ICAgICAgIGlmIChyZXQpIHsKPiA+PiAgICAgICAgICAg
YXRvbWljX2RlYygmcHNwLT5mZW5jZV92YWx1ZSk7Cj4gPj4gLSAgICAgICAgbXV0ZXhfdW5sb2Nr
KCZwc3AtPm11dGV4KTsKPiA+PiAtICAgICAgICByZXR1cm4gcmV0Owo+ID4+ICsgICAgICAgIGdv
dG8gZXhpdDsKPiA+PiAgICAgICB9Cj4gPj4gICAgICAgICBhbWRncHVfYXNpY19pbnZhbGlkYXRl
X2hkcChwc3AtPmFkZXYsIE5VTEwpOwo+ID4+IEBAIC0zMDcsOCArMzExLDggQEAgcHNwX2NtZF9z
dWJtaXRfYnVmKHN0cnVjdCBwc3BfY29udGV4dCAqcHNwLAo+ID4+ICAgICAgICAgICAgICAgIHBz
cC0+Y21kX2J1Zl9tZW0tPmNtZF9pZCwKPiA+PiAgICAgICAgICAgICAgICBwc3AtPmNtZF9idWZf
bWVtLT5yZXNwLnN0YXR1cyk7Cj4gPj4gICAgICAgICAgIGlmICghdGltZW91dCkgewo+ID4+IC0g
ICAgICAgICAgICBtdXRleF91bmxvY2soJnBzcC0+bXV0ZXgpOwo+ID4+IC0gICAgICAgICAgICBy
ZXR1cm4gLUVJTlZBTDsKPiA+PiArICAgICAgICAgICAgcmV0ID0gLUVJTlZBTDsKPiA+PiArICAg
ICAgICAgICAgZ290byBleGl0Owo+ID4+ICAgICAgICAgICB9Cj4gPj4gICAgICAgfQo+ID4+ICAg
QEAgLTMxNiw4ICszMjAsMTAgQEAgcHNwX2NtZF9zdWJtaXRfYnVmKHN0cnVjdCBwc3BfY29udGV4
dCAqcHNwLAo+ID4+ICAgICAgICAgICB1Y29kZS0+dG1yX21jX2FkZHJfbG8gPSBwc3AtPmNtZF9i
dWZfbWVtLT5yZXNwLmZ3X2FkZHJfbG87Cj4gPj4gICAgICAgICAgIHVjb2RlLT50bXJfbWNfYWRk
cl9oaSA9IHBzcC0+Y21kX2J1Zl9tZW0tPnJlc3AuZndfYWRkcl9oaTsKPiA+PiAgICAgICB9Cj4g
Pj4gLSAgICBtdXRleF91bmxvY2soJnBzcC0+bXV0ZXgpOwo+ID4+ICAgK2V4aXQ6Cj4gPj4gKyAg
ICBtdXRleF91bmxvY2soJnBzcC0+bXV0ZXgpOwo+ID4+ICsgICAgZHJtX2Rldl9leGl0KGlkeCk7
Cj4gPj4gICAgICAgcmV0dXJuIHJldDsKPiA+PiAgIH0KPiA+PiAgIEBAIC0zNTQsOCArMzYwLDcg
QEAgc3RhdGljIGludCBwc3BfbG9hZF90b2Moc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsCj4gPj4g
ICAgICAgaWYgKCFjbWQpCj4gPj4gICAgICAgICAgIHJldHVybiAtRU5PTUVNOwo+ID4+ICAgICAg
IC8qIENvcHkgdG9jIHRvIHBzcCBmaXJtd2FyZSBwcml2YXRlIGJ1ZmZlciAqLwo+ID4+IC0gICAg
bWVtc2V0KHBzcC0+ZndfcHJpX2J1ZiwgMCwgUFNQXzFfTUVHKTsKPiA+PiAtICAgIG1lbWNweShw
c3AtPmZ3X3ByaV9idWYsIHBzcC0+dG9jX3N0YXJ0X2FkZHIsIHBzcC0+dG9jX2Jpbl9zaXplKTsK
PiA+PiArICAgIHBzcF9jb3B5X2Z3KHBzcCwgcHNwLT50b2Nfc3RhcnRfYWRkciwgcHNwLT50b2Nf
YmluX3NpemUpOwo+ID4+ICAgICAgICAgcHNwX3ByZXBfbG9hZF90b2NfY21kX2J1ZihjbWQsIHBz
cC0+ZndfcHJpX21jX2FkZHIsIHBzcC0+dG9jX2Jpbl9zaXplKTsKPiA+PiAgIEBAIC01NzAsOCAr
NTc1LDcgQEAgc3RhdGljIGludCBwc3BfYXNkX2xvYWQoc3RydWN0IHBzcF9jb250ZXh0ICpwc3Ap
Cj4gPj4gICAgICAgaWYgKCFjbWQpCj4gPj4gICAgICAgICAgIHJldHVybiAtRU5PTUVNOwo+ID4+
ICAgLSAgICBtZW1zZXQocHNwLT5md19wcmlfYnVmLCAwLCBQU1BfMV9NRUcpOwo+ID4+IC0gICAg
bWVtY3B5KHBzcC0+ZndfcHJpX2J1ZiwgcHNwLT5hc2Rfc3RhcnRfYWRkciwgcHNwLT5hc2RfdWNv
ZGVfc2l6ZSk7Cj4gPj4gKyAgICBwc3BfY29weV9mdyhwc3AsIHBzcC0+YXNkX3N0YXJ0X2FkZHIs
IHBzcC0+YXNkX3Vjb2RlX3NpemUpOwo+ID4+ICAgICAgICAgcHNwX3ByZXBfYXNkX2xvYWRfY21k
X2J1ZihjbWQsIHBzcC0+ZndfcHJpX21jX2FkZHIsCj4gPj4gICAgICAgICAgICAgICAgICAgICBw
c3AtPmFzZF91Y29kZV9zaXplKTsKPiA+PiBAQCAtNzI2LDggKzczMCw3IEBAIHN0YXRpYyBpbnQg
cHNwX3hnbWlfbG9hZChzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCkKPiA+PiAgICAgICBpZiAoIWNt
ZCkKPiA+PiAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gPj4gICAtICAgIG1lbXNldChwc3At
PmZ3X3ByaV9idWYsIDAsIFBTUF8xX01FRyk7Cj4gPj4gLSAgICBtZW1jcHkocHNwLT5md19wcmlf
YnVmLCBwc3AtPnRhX3hnbWlfc3RhcnRfYWRkciwgcHNwLT50YV94Z21pX3Vjb2RlX3NpemUpOwo+
ID4+ICsgICAgcHNwX2NvcHlfZncocHNwLCBwc3AtPnRhX3hnbWlfc3RhcnRfYWRkciwgcHNwLT50
YV94Z21pX3Vjb2RlX3NpemUpOwo+ID4+ICAgICAgICAgcHNwX3ByZXBfdGFfbG9hZF9jbWRfYnVm
KGNtZCwKPiA+PiAgICAgICAgICAgICAgICAgICAgcHNwLT5md19wcmlfbWNfYWRkciwKPiA+PiBA
QCAtOTgyLDggKzk4NSw3IEBAIHN0YXRpYyBpbnQgcHNwX3Jhc19sb2FkKHN0cnVjdCBwc3BfY29u
dGV4dCAqcHNwKQo+ID4+ICAgICAgIGlmICghY21kKQo+ID4+ICAgICAgICAgICByZXR1cm4gLUVO
T01FTTsKPiA+PiAgIC0gICAgbWVtc2V0KHBzcC0+ZndfcHJpX2J1ZiwgMCwgUFNQXzFfTUVHKTsK
PiA+PiAtICAgIG1lbWNweShwc3AtPmZ3X3ByaV9idWYsIHBzcC0+dGFfcmFzX3N0YXJ0X2FkZHIs
IHBzcC0+dGFfcmFzX3Vjb2RlX3NpemUpOwo+ID4+ICsgICAgcHNwX2NvcHlfZncocHNwLCBwc3At
PnRhX3Jhc19zdGFydF9hZGRyLCBwc3AtPnRhX3Jhc191Y29kZV9zaXplKTsKPiA+PiAgICAgICAg
IHBzcF9wcmVwX3RhX2xvYWRfY21kX2J1ZihjbWQsCj4gPj4gICAgICAgICAgICAgICAgICAgIHBz
cC0+ZndfcHJpX21jX2FkZHIsCj4gPj4gQEAgLTEyMTksOCArMTIyMSw3IEBAIHN0YXRpYyBpbnQg
cHNwX2hkY3BfbG9hZChzdHJ1Y3QgcHNwX2NvbnRleHQgKnBzcCkKPiA+PiAgICAgICBpZiAoIWNt
ZCkKPiA+PiAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gPj4gICAtICAgIG1lbXNldChwc3At
PmZ3X3ByaV9idWYsIDAsIFBTUF8xX01FRyk7Cj4gPj4gLSAgICBtZW1jcHkocHNwLT5md19wcmlf
YnVmLCBwc3AtPnRhX2hkY3Bfc3RhcnRfYWRkciwKPiA+PiArICAgIHBzcF9jb3B5X2Z3KHBzcCwg
cHNwLT50YV9oZGNwX3N0YXJ0X2FkZHIsCj4gPj4gICAgICAgICAgICAgIHBzcC0+dGFfaGRjcF91
Y29kZV9zaXplKTsKPiA+PiAgICAgICAgIHBzcF9wcmVwX3RhX2xvYWRfY21kX2J1ZihjbWQsCj4g
Pj4gQEAgLTEzNjYsOCArMTM2Nyw3IEBAIHN0YXRpYyBpbnQgcHNwX2R0bV9sb2FkKHN0cnVjdCBw
c3BfY29udGV4dCAqcHNwKQo+ID4+ICAgICAgIGlmICghY21kKQo+ID4+ICAgICAgICAgICByZXR1
cm4gLUVOT01FTTsKPiA+PiAgIC0gICAgbWVtc2V0KHBzcC0+ZndfcHJpX2J1ZiwgMCwgUFNQXzFf
TUVHKTsKPiA+PiAtICAgIG1lbWNweShwc3AtPmZ3X3ByaV9idWYsIHBzcC0+dGFfZHRtX3N0YXJ0
X2FkZHIsIHBzcC0+dGFfZHRtX3Vjb2RlX3NpemUpOwo+ID4+ICsgICAgcHNwX2NvcHlfZncocHNw
LCBwc3AtPnRhX2R0bV9zdGFydF9hZGRyLCBwc3AtPnRhX2R0bV91Y29kZV9zaXplKTsKPiA+PiAg
ICAgICAgIHBzcF9wcmVwX3RhX2xvYWRfY21kX2J1ZihjbWQsCj4gPj4gICAgICAgICAgICAgICAg
ICAgIHBzcC0+ZndfcHJpX21jX2FkZHIsCj4gPj4gQEAgLTE1MDcsOCArMTUwNyw3IEBAIHN0YXRp
YyBpbnQgcHNwX3JhcF9sb2FkKHN0cnVjdCBwc3BfY29udGV4dCAqcHNwKQo+ID4+ICAgICAgIGlm
ICghY21kKQo+ID4+ICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiA+PiAgIC0gICAgbWVtc2V0
KHBzcC0+ZndfcHJpX2J1ZiwgMCwgUFNQXzFfTUVHKTsKPiA+PiAtICAgIG1lbWNweShwc3AtPmZ3
X3ByaV9idWYsIHBzcC0+dGFfcmFwX3N0YXJ0X2FkZHIsIHBzcC0+dGFfcmFwX3Vjb2RlX3NpemUp
Owo+ID4+ICsgICAgcHNwX2NvcHlfZncocHNwLCBwc3AtPnRhX3JhcF9zdGFydF9hZGRyLCBwc3At
PnRhX3JhcF91Y29kZV9zaXplKTsKPiA+PiAgICAgICAgIHBzcF9wcmVwX3RhX2xvYWRfY21kX2J1
ZihjbWQsCj4gPj4gICAgICAgICAgICAgICAgICAgIHBzcC0+ZndfcHJpX21jX2FkZHIsCj4gPj4g
QEAgLTI3NzgsNiArMjc3NywyMCBAQCBzdGF0aWMgc3NpemVfdCBwc3BfdXNiY19wZF9md19zeXNm
c193cml0ZShzdHJ1Y3QKPiA+PiBkZXZpY2UgKmRldiwKPiA+PiAgICAgICByZXR1cm4gY291bnQ7
Cj4gPj4gICB9Cj4gPj4gICArdm9pZCBwc3BfY29weV9mdyhzdHJ1Y3QgcHNwX2NvbnRleHQgKnBz
cCwgdWludDhfdCAqc3RhcnRfYWRkciwgdWludDMyX3QKPiA+PiBiaW5fc2l6ZSkKPiA+PiArewo+
ID4+ICsgICAgaW50IGlkeDsKPiA+PiArCj4gPj4gKyAgICBpZiAoIWRybV9kZXZfZW50ZXIoJnBz
cC0+YWRldi0+ZGRldiwgJmlkeCkpCj4gPj4gKyAgICAgICAgcmV0dXJuOwo+ID4+ICsKPiA+PiAr
ICAgIG1lbXNldChwc3AtPmZ3X3ByaV9idWYsIDAsIFBTUF8xX01FRyk7Cj4gPj4gKyAgICBtZW1j
cHkocHNwLT5md19wcmlfYnVmLCBzdGFydF9hZGRyLCBiaW5fc2l6ZSk7Cj4gPj4gKwo+ID4+ICsg
ICAgZHJtX2Rldl9leGl0KGlkeCk7Cj4gPj4gK30KPiA+PiArCj4gPj4gKwo+ID4+ICAgc3RhdGlj
IERFVklDRV9BVFRSKHVzYmNfcGRfZncsIFNfSVJVR08gfCBTX0lXVVNSLAo+ID4+ICAgICAgICAg
ICAgICBwc3BfdXNiY19wZF9md19zeXNmc19yZWFkLAo+ID4+ICAgICAgICAgICAgICBwc3BfdXNi
Y19wZF9md19zeXNmc193cml0ZSk7Cj4gPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9wc3AuaAo+ID4+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3BzcC5oCj4gPj4gaW5kZXggZGEyNTBiYy4uYWM2OTMxNCAxMDA2NDQKPiA+PiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmgKPiA+PiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcHNwLmgKPiA+PiBAQCAtNDAwLDQgKzQwMCw3
IEBAIGludCBwc3BfaW5pdF90YV9taWNyb2NvZGUoc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsCj4g
Pj4gICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIgKmNoaXBfbmFtZSk7Cj4gPj4gICBpbnQgcHNw
X2dldF9md19hdHRlc3RhdGlvbl9yZWNvcmRzX2FkZHIoc3RydWN0IHBzcF9jb250ZXh0ICpwc3As
Cj4gPj4gICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90ICpvdXRwdXRfcHRyKTsKPiA+PiAr
Cj4gPj4gK3ZvaWQgcHNwX2NvcHlfZncoc3RydWN0IHBzcF9jb250ZXh0ICpwc3AsIHVpbnQ4X3Qg
KnN0YXJ0X2FkZHIsIHVpbnQzMl90Cj4gPj4gYmluX3NpemUpOwo+ID4+ICsKPiA+PiAgICNlbmRp
Zgo+ID4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmlu
Zy5jCj4gPj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmluZy5jCj4gPj4g
aW5kZXggMWE2MTJmNS4uZDY1NjQ5NCAxMDA2NDQKPiA+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfcmluZy5jCj4gPj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X3JpbmcuYwo+ID4+IEBAIC0zNSw2ICszNSw4IEBACj4gPj4gICAjaW5jbHVk
ZSAiYW1kZ3B1LmgiCj4gPj4gICAjaW5jbHVkZSAiYXRvbS5oIgo+ID4+ICAgKyNpbmNsdWRlIDxk
cm0vZHJtX2Rydi5oPgo+ID4+ICsKPiA+PiAgIC8qCj4gPj4gICAgKiBSaW5ncwo+ID4+ICAgICog
TW9zdCBlbmdpbmVzIG9uIHRoZSBHUFUgYXJlIGZlZCB2aWEgcmluZyBidWZmZXJzLiAgUmluZwo+
ID4+IEBAIC00NjMsMyArNDY1LDcxIEBAIGludCBhbWRncHVfcmluZ190ZXN0X2hlbHBlcihzdHJ1
Y3QgYW1kZ3B1X3JpbmcgKnJpbmcpCj4gPj4gICAgICAgcmluZy0+c2NoZWQucmVhZHkgPSAhcjsK
PiA+PiAgICAgICByZXR1cm4gcjsKPiA+PiAgIH0KPiA+PiArCj4gPj4gK3ZvaWQgYW1kZ3B1X3Jp
bmdfY2xlYXJfcmluZyhzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcpCj4gPj4gK3sKPiA+PiArICAg
IGludCBpZHg7Cj4gPj4gKyAgICBpbnQgaSA9IDA7Cj4gPj4gKwo+ID4+ICsgICAgaWYgKCFkcm1f
ZGV2X2VudGVyKCZyaW5nLT5hZGV2LT5kZGV2LCAmaWR4KSkKPiA+PiArICAgICAgICByZXR1cm47
Cj4gPj4gKwo+ID4+ICsgICAgd2hpbGUgKGkgPD0gcmluZy0+YnVmX21hc2spCj4gPj4gKyAgICAg
ICAgcmluZy0+cmluZ1tpKytdID0gcmluZy0+ZnVuY3MtPm5vcDsKPiA+PiArCj4gPj4gKyAgICBk
cm1fZGV2X2V4aXQoaWR4KTsKPiA+PiArCj4gPj4gK30KPiA+PiArCj4gPj4gK3ZvaWQgYW1kZ3B1
X3Jpbmdfd3JpdGUoc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLCB1aW50MzJfdCB2KQo+ID4+ICt7
Cj4gPj4gKyAgICBpbnQgaWR4Owo+ID4+ICsKPiA+PiArICAgIGlmICghZHJtX2Rldl9lbnRlcigm
cmluZy0+YWRldi0+ZGRldiwgJmlkeCkpCj4gPj4gKyAgICAgICAgcmV0dXJuOwo+ID4+ICsKPiA+
PiArICAgIGlmIChyaW5nLT5jb3VudF9kdyA8PSAwKQo+ID4+ICsgICAgICAgIERSTV9FUlJPUigi
YW1kZ3B1OiB3cml0aW5nIG1vcmUgZHdvcmRzIHRvIHRoZSByaW5nIHRoYW4gZXhwZWN0ZWQhXG4i
KTsKPiA+PiArICAgIHJpbmctPnJpbmdbcmluZy0+d3B0cisrICYgcmluZy0+YnVmX21hc2tdID0g
djsKPiA+PiArICAgIHJpbmctPndwdHIgJj0gcmluZy0+cHRyX21hc2s7Cj4gPj4gKyAgICByaW5n
LT5jb3VudF9kdy0tOwo+ID4+ICsKPiA+PiArICAgIGRybV9kZXZfZXhpdChpZHgpOwo+ID4+ICt9
Cj4gPj4gKwo+ID4+ICt2b2lkIGFtZGdwdV9yaW5nX3dyaXRlX211bHRpcGxlKHN0cnVjdCBhbWRn
cHVfcmluZyAqcmluZywKPiA+PiArICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkICpzcmMs
IGludCBjb3VudF9kdykKPiA+PiArewo+ID4+ICsgICAgdW5zaWduZWQgb2NjdXBpZWQsIGNodW5r
MSwgY2h1bmsyOwo+ID4+ICsgICAgdm9pZCAqZHN0Owo+ID4+ICsgICAgaW50IGlkeDsKPiA+PiAr
Cj4gPj4gKyAgICBpZiAoIWRybV9kZXZfZW50ZXIoJnJpbmctPmFkZXYtPmRkZXYsICZpZHgpKQo+
ID4+ICsgICAgICAgIHJldHVybjsKPiA+PiArCj4gPj4gKyAgICBpZiAodW5saWtlbHkocmluZy0+
Y291bnRfZHcgPCBjb3VudF9kdykpCj4gPj4gKyAgICAgICAgRFJNX0VSUk9SKCJhbWRncHU6IHdy
aXRpbmcgbW9yZSBkd29yZHMgdG8gdGhlIHJpbmcgdGhhbiBleHBlY3RlZCFcbiIpOwo+ID4+ICsK
PiA+PiArICAgIG9jY3VwaWVkID0gcmluZy0+d3B0ciAmIHJpbmctPmJ1Zl9tYXNrOwo+ID4+ICsg
ICAgZHN0ID0gKHZvaWQgKikmcmluZy0+cmluZ1tvY2N1cGllZF07Cj4gPj4gKyAgICBjaHVuazEg
PSByaW5nLT5idWZfbWFzayArIDEgLSBvY2N1cGllZDsKPiA+PiArICAgIGNodW5rMSA9IChjaHVu
azEgPj0gY291bnRfZHcpID8gY291bnRfZHc6IGNodW5rMTsKPiA+PiArICAgIGNodW5rMiA9IGNv
dW50X2R3IC0gY2h1bmsxOwo+ID4+ICsgICAgY2h1bmsxIDw8PSAyOwo+ID4+ICsgICAgY2h1bmsy
IDw8PSAyOwo+ID4+ICsKPiA+PiArICAgIGlmIChjaHVuazEpCj4gPj4gKyAgICAgICAgbWVtY3B5
KGRzdCwgc3JjLCBjaHVuazEpOwo+ID4+ICsKPiA+PiArICAgIGlmIChjaHVuazIpIHsKPiA+PiAr
ICAgICAgICBzcmMgKz0gY2h1bmsxOwo+ID4+ICsgICAgICAgIGRzdCA9ICh2b2lkICopcmluZy0+
cmluZzsKPiA+PiArICAgICAgICBtZW1jcHkoZHN0LCBzcmMsIGNodW5rMik7Cj4gPj4gKyAgICB9
Cj4gPj4gKwo+ID4+ICsgICAgcmluZy0+d3B0ciArPSBjb3VudF9kdzsKPiA+PiArICAgIHJpbmct
PndwdHIgJj0gcmluZy0+cHRyX21hc2s7Cj4gPj4gKyAgICByaW5nLT5jb3VudF9kdyAtPSBjb3Vu
dF9kdzsKPiA+PiArCj4gPj4gKyAgICBkcm1fZGV2X2V4aXQoaWR4KTsKPiA+PiArfQo+ID4+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmluZy5oCj4gPj4g
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmluZy5oCj4gPj4gaW5kZXggYWNj
YjI0My4uZjkwYjgxZiAxMDA2NDQKPiA+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfcmluZy5oCj4gPj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3JpbmcuaAo+ID4+IEBAIC0zMDAsNTMgKzMwMCwxMiBAQCBzdGF0aWMgaW5saW5lIHZvaWQK
PiA+PiBhbWRncHVfcmluZ19zZXRfcHJlZW1wdF9jb25kX2V4ZWMoc3RydWN0IGFtZGdwdV9yaW5n
ICpyaW5nLAo+ID4+ICAgICAgICpyaW5nLT5jb25kX2V4ZV9jcHVfYWRkciA9IGNvbmRfZXhlYzsK
PiA+PiAgIH0KPiA+PiAgIC1zdGF0aWMgaW5saW5lIHZvaWQgYW1kZ3B1X3JpbmdfY2xlYXJfcmlu
ZyhzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcpCj4gPj4gLXsKPiA+PiAtICAgIGludCBpID0gMDsK
PiA+PiAtICAgIHdoaWxlIChpIDw9IHJpbmctPmJ1Zl9tYXNrKQo+ID4+IC0gICAgICAgIHJpbmct
PnJpbmdbaSsrXSA9IHJpbmctPmZ1bmNzLT5ub3A7Cj4gPj4gLQo+ID4+IC19Cj4gPj4gLQo+ID4+
IC1zdGF0aWMgaW5saW5lIHZvaWQgYW1kZ3B1X3Jpbmdfd3JpdGUoc3RydWN0IGFtZGdwdV9yaW5n
ICpyaW5nLCB1aW50MzJfdCB2KQo+ID4+IC17Cj4gPj4gLSAgICBpZiAocmluZy0+Y291bnRfZHcg
PD0gMCkKPiA+PiAtICAgICAgICBEUk1fRVJST1IoImFtZGdwdTogd3JpdGluZyBtb3JlIGR3b3Jk
cyB0byB0aGUgcmluZyB0aGFuIGV4cGVjdGVkIVxuIik7Cj4gPj4gLSAgICByaW5nLT5yaW5nW3Jp
bmctPndwdHIrKyAmIHJpbmctPmJ1Zl9tYXNrXSA9IHY7Cj4gPj4gLSAgICByaW5nLT53cHRyICY9
IHJpbmctPnB0cl9tYXNrOwo+ID4+IC0gICAgcmluZy0+Y291bnRfZHctLTsKPiA+PiAtfQo+ID4+
ICt2b2lkIGFtZGdwdV9yaW5nX2NsZWFyX3Jpbmcoc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nKTsK
PiA+PiAgIC1zdGF0aWMgaW5saW5lIHZvaWQgYW1kZ3B1X3Jpbmdfd3JpdGVfbXVsdGlwbGUoc3Ry
dWN0IGFtZGdwdV9yaW5nICpyaW5nLAo+ID4+IC0gICAgICAgICAgICAgICAgICAgICAgICAgIHZv
aWQgKnNyYywgaW50IGNvdW50X2R3KQo+ID4+IC17Cj4gPj4gLSAgICB1bnNpZ25lZCBvY2N1cGll
ZCwgY2h1bmsxLCBjaHVuazI7Cj4gPj4gLSAgICB2b2lkICpkc3Q7Cj4gPj4gLQo+ID4+IC0gICAg
aWYgKHVubGlrZWx5KHJpbmctPmNvdW50X2R3IDwgY291bnRfZHcpKQo+ID4+IC0gICAgICAgIERS
TV9FUlJPUigiYW1kZ3B1OiB3cml0aW5nIG1vcmUgZHdvcmRzIHRvIHRoZSByaW5nIHRoYW4gZXhw
ZWN0ZWQhXG4iKTsKPiA+PiAtCj4gPj4gLSAgICBvY2N1cGllZCA9IHJpbmctPndwdHIgJiByaW5n
LT5idWZfbWFzazsKPiA+PiAtICAgIGRzdCA9ICh2b2lkICopJnJpbmctPnJpbmdbb2NjdXBpZWRd
Owo+ID4+IC0gICAgY2h1bmsxID0gcmluZy0+YnVmX21hc2sgKyAxIC0gb2NjdXBpZWQ7Cj4gPj4g
LSAgICBjaHVuazEgPSAoY2h1bmsxID49IGNvdW50X2R3KSA/IGNvdW50X2R3OiBjaHVuazE7Cj4g
Pj4gLSAgICBjaHVuazIgPSBjb3VudF9kdyAtIGNodW5rMTsKPiA+PiAtICAgIGNodW5rMSA8PD0g
MjsKPiA+PiAtICAgIGNodW5rMiA8PD0gMjsKPiA+PiArdm9pZCBhbWRncHVfcmluZ193cml0ZShz
dHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcsIHVpbnQzMl90IHYpOwo+ID4+ICAgLSAgICBpZiAoY2h1
bmsxKQo+ID4+IC0gICAgICAgIG1lbWNweShkc3QsIHNyYywgY2h1bmsxKTsKPiA+PiAtCj4gPj4g
LSAgICBpZiAoY2h1bmsyKSB7Cj4gPj4gLSAgICAgICAgc3JjICs9IGNodW5rMTsKPiA+PiAtICAg
ICAgICBkc3QgPSAodm9pZCAqKXJpbmctPnJpbmc7Cj4gPj4gLSAgICAgICAgbWVtY3B5KGRzdCwg
c3JjLCBjaHVuazIpOwo+ID4+IC0gICAgfQo+ID4+IC0KPiA+PiAtICAgIHJpbmctPndwdHIgKz0g
Y291bnRfZHc7Cj4gPj4gLSAgICByaW5nLT53cHRyICY9IHJpbmctPnB0cl9tYXNrOwo+ID4+IC0g
ICAgcmluZy0+Y291bnRfZHcgLT0gY291bnRfZHc7Cj4gPj4gLX0KPiA+PiArdm9pZCBhbWRncHVf
cmluZ193cml0ZV9tdWx0aXBsZShzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcsCj4gPj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgdm9pZCAqc3JjLCBpbnQgY291bnRfZHcpOwo+ID4+ICAgICBp
bnQgYW1kZ3B1X3JpbmdfdGVzdF9oZWxwZXIoc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nKTsKPiA+
PiAgIGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjExXzAuYwo+
ID4+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3YxMV8wLmMKPiA+PiBpbmRleCBi
ZDQyNDhjLi5iM2NlNWJlIDEwMDY0NAo+ID4+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L3BzcF92MTFfMC5jCj4gPj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNw
X3YxMV8wLmMKPiA+PiBAQCAtMjY5LDEwICsyNjksOCBAQCBzdGF0aWMgaW50IHBzcF92MTFfMF9i
b290bG9hZGVyX2xvYWRfa2RiKHN0cnVjdAo+ID4+IHBzcF9jb250ZXh0ICpwc3ApCj4gPj4gICAg
ICAgaWYgKHJldCkKPiA+PiAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+PiAgIC0gICAgbWVtc2V0
KHBzcC0+ZndfcHJpX2J1ZiwgMCwgUFNQXzFfTUVHKTsKPiA+PiAtCj4gPj4gICAgICAgLyogQ29w
eSBQU1AgS0RCIGJpbmFyeSB0byBtZW1vcnkgKi8KPiA+PiAtICAgIG1lbWNweShwc3AtPmZ3X3By
aV9idWYsIHBzcC0+a2RiX3N0YXJ0X2FkZHIsIHBzcC0+a2RiX2Jpbl9zaXplKTsKPiA+PiArICAg
IHBzcF9jb3B5X2Z3KHBzcCwgcHNwLT5rZGJfc3RhcnRfYWRkciwgcHNwLT5rZGJfYmluX3NpemUp
Owo+ID4+ICAgICAgICAgLyogUHJvdmlkZSB0aGUgUFNQIEtEQiB0byBib290bG9hZGVyICovCj4g
Pj4gICAgICAgV1JFRzMyX1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR18zNiwKPiA+PiBA
QCAtMzAyLDEwICszMDAsOCBAQCBzdGF0aWMgaW50IHBzcF92MTFfMF9ib290bG9hZGVyX2xvYWRf
c3BsKHN0cnVjdAo+ID4+IHBzcF9jb250ZXh0ICpwc3ApCj4gPj4gICAgICAgaWYgKHJldCkKPiA+
PiAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+PiAgIC0gICAgbWVtc2V0KHBzcC0+ZndfcHJpX2J1
ZiwgMCwgUFNQXzFfTUVHKTsKPiA+PiAtCj4gPj4gICAgICAgLyogQ29weSBQU1AgU1BMIGJpbmFy
eSB0byBtZW1vcnkgKi8KPiA+PiAtICAgIG1lbWNweShwc3AtPmZ3X3ByaV9idWYsIHBzcC0+c3Bs
X3N0YXJ0X2FkZHIsIHBzcC0+c3BsX2Jpbl9zaXplKTsKPiA+PiArICAgIHBzcF9jb3B5X2Z3KHBz
cCwgcHNwLT5zcGxfc3RhcnRfYWRkciwgcHNwLT5zcGxfYmluX3NpemUpOwo+ID4+ICAgICAgICAg
LyogUHJvdmlkZSB0aGUgUFNQIFNQTCB0byBib290bG9hZGVyICovCj4gPj4gICAgICAgV1JFRzMy
X1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR18zNiwKPiA+PiBAQCAtMzM1LDEwICszMzEs
OCBAQCBzdGF0aWMgaW50IHBzcF92MTFfMF9ib290bG9hZGVyX2xvYWRfc3lzZHJ2KHN0cnVjdAo+
ID4+IHBzcF9jb250ZXh0ICpwc3ApCj4gPj4gICAgICAgaWYgKHJldCkKPiA+PiAgICAgICAgICAg
cmV0dXJuIHJldDsKPiA+PiAgIC0gICAgbWVtc2V0KHBzcC0+ZndfcHJpX2J1ZiwgMCwgUFNQXzFf
TUVHKTsKPiA+PiAtCj4gPj4gICAgICAgLyogQ29weSBQU1AgU3lzdGVtIERyaXZlciBiaW5hcnkg
dG8gbWVtb3J5ICovCj4gPj4gLSAgICBtZW1jcHkocHNwLT5md19wcmlfYnVmLCBwc3AtPnN5c19z
dGFydF9hZGRyLCBwc3AtPnN5c19iaW5fc2l6ZSk7Cj4gPj4gKyAgICBwc3BfY29weV9mdyhwc3As
IHBzcC0+c3lzX3N0YXJ0X2FkZHIsIHBzcC0+c3lzX2Jpbl9zaXplKTsKPiA+PiAgICAgICAgIC8q
IFByb3ZpZGUgdGhlIHN5cyBkcml2ZXIgdG8gYm9vdGxvYWRlciAqLwo+ID4+ICAgICAgIFdSRUcz
Ml9TT0MxNShNUDAsIDAsIG1tTVAwX1NNTl9DMlBNU0dfMzYsCj4gPj4gQEAgLTM3MSwxMCArMzY1
LDggQEAgc3RhdGljIGludCBwc3BfdjExXzBfYm9vdGxvYWRlcl9sb2FkX3NvcyhzdHJ1Y3QKPiA+
PiBwc3BfY29udGV4dCAqcHNwKQo+ID4+ICAgICAgIGlmIChyZXQpCj4gPj4gICAgICAgICAgIHJl
dHVybiByZXQ7Cj4gPj4gICAtICAgIG1lbXNldChwc3AtPmZ3X3ByaV9idWYsIDAsIFBTUF8xX01F
Ryk7Cj4gPj4gLQo+ID4+ICAgICAgIC8qIENvcHkgU2VjdXJlIE9TIGJpbmFyeSB0byBQU1AgbWVt
b3J5ICovCj4gPj4gLSAgICBtZW1jcHkocHNwLT5md19wcmlfYnVmLCBwc3AtPnNvc19zdGFydF9h
ZGRyLCBwc3AtPnNvc19iaW5fc2l6ZSk7Cj4gPj4gKyAgICBwc3BfY29weV9mdyhwc3AsIHBzcC0+
c29zX3N0YXJ0X2FkZHIsIHBzcC0+c29zX2Jpbl9zaXplKTsKPiA+PiAgICAgICAgIC8qIFByb3Zp
ZGUgdGhlIFBTUCBzZWN1cmUgT1MgdG8gYm9vdGxvYWRlciAqLwo+ID4+ICAgICAgIFdSRUczMl9T
T0MxNShNUDAsIDAsIG1tTVAwX1NNTl9DMlBNU0dfMzYsCj4gPj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92MTJfMC5jCj4gPj4gYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9wc3BfdjEyXzAuYwo+ID4+IGluZGV4IGM0ODI4YmQuLjYxOGU1YjYgMTAwNjQ0
Cj4gPj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3YxMl8wLmMKPiA+PiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjEyXzAuYwo+ID4+IEBAIC0xMzgs
MTAgKzEzOCw4IEBAIHN0YXRpYyBpbnQgcHNwX3YxMl8wX2Jvb3Rsb2FkZXJfbG9hZF9zeXNkcnYo
c3RydWN0Cj4gPj4gcHNwX2NvbnRleHQgKnBzcCkKPiA+PiAgICAgICBpZiAocmV0KQo+ID4+ICAg
ICAgICAgICByZXR1cm4gcmV0Owo+ID4+ICAgLSAgICBtZW1zZXQocHNwLT5md19wcmlfYnVmLCAw
LCBQU1BfMV9NRUcpOwo+ID4+IC0KPiA+PiAgICAgICAvKiBDb3B5IFBTUCBTeXN0ZW0gRHJpdmVy
IGJpbmFyeSB0byBtZW1vcnkgKi8KPiA+PiAtICAgIG1lbWNweShwc3AtPmZ3X3ByaV9idWYsIHBz
cC0+c3lzX3N0YXJ0X2FkZHIsIHBzcC0+c3lzX2Jpbl9zaXplKTsKPiA+PiArICAgIHBzcF9jb3B5
X2Z3KHBzcCwgcHNwLT5zeXNfc3RhcnRfYWRkciwgcHNwLT5zeXNfYmluX3NpemUpOwo+ID4+ICAg
ICAgICAgLyogUHJvdmlkZSB0aGUgc3lzIGRyaXZlciB0byBib290bG9hZGVyICovCj4gPj4gICAg
ICAgV1JFRzMyX1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR18zNiwKPiA+PiBAQCAtMTc5
LDEwICsxNzcsOCBAQCBzdGF0aWMgaW50IHBzcF92MTJfMF9ib290bG9hZGVyX2xvYWRfc29zKHN0
cnVjdAo+ID4+IHBzcF9jb250ZXh0ICpwc3ApCj4gPj4gICAgICAgaWYgKHJldCkKPiA+PiAgICAg
ICAgICAgcmV0dXJuIHJldDsKPiA+PiAgIC0gICAgbWVtc2V0KHBzcC0+ZndfcHJpX2J1ZiwgMCwg
UFNQXzFfTUVHKTsKPiA+PiAtCj4gPj4gICAgICAgLyogQ29weSBTZWN1cmUgT1MgYmluYXJ5IHRv
IFBTUCBtZW1vcnkgKi8KPiA+PiAtICAgIG1lbWNweShwc3AtPmZ3X3ByaV9idWYsIHBzcC0+c29z
X3N0YXJ0X2FkZHIsIHBzcC0+c29zX2Jpbl9zaXplKTsKPiA+PiArICAgIHBzcF9jb3B5X2Z3KHBz
cCwgcHNwLT5zb3Nfc3RhcnRfYWRkciwgcHNwLT5zb3NfYmluX3NpemUpOwo+ID4+ICAgICAgICAg
LyogUHJvdmlkZSB0aGUgUFNQIHNlY3VyZSBPUyB0byBib290bG9hZGVyICovCj4gPj4gICAgICAg
V1JFRzMyX1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR18zNiwKPiA+PiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvcHNwX3YzXzEuYwo+ID4+IGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvcHNwX3YzXzEuYwo+ID4+IGluZGV4IGYyZTcyNWYuLmQwYTZjY2Nk
IDEwMDY0NAo+ID4+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L3BzcF92M18xLmMK
PiA+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9wc3BfdjNfMS5jCj4gPj4gQEAg
LTEwMiwxMCArMTAyLDggQEAgc3RhdGljIGludCBwc3BfdjNfMV9ib290bG9hZGVyX2xvYWRfc3lz
ZHJ2KHN0cnVjdAo+ID4+IHBzcF9jb250ZXh0ICpwc3ApCj4gPj4gICAgICAgaWYgKHJldCkKPiA+
PiAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+PiAgIC0gICAgbWVtc2V0KHBzcC0+ZndfcHJpX2J1
ZiwgMCwgUFNQXzFfTUVHKTsKPiA+PiAtCj4gPj4gICAgICAgLyogQ29weSBQU1AgU3lzdGVtIERy
aXZlciBiaW5hcnkgdG8gbWVtb3J5ICovCj4gPj4gLSAgICBtZW1jcHkocHNwLT5md19wcmlfYnVm
LCBwc3AtPnN5c19zdGFydF9hZGRyLCBwc3AtPnN5c19iaW5fc2l6ZSk7Cj4gPj4gKyAgICBwc3Bf
Y29weV9mdyhwc3AsIHBzcC0+c3lzX3N0YXJ0X2FkZHIsIHBzcC0+c3lzX2Jpbl9zaXplKTsKPiA+
PiAgICAgICAgIC8qIFByb3ZpZGUgdGhlIHN5cyBkcml2ZXIgdG8gYm9vdGxvYWRlciAqLwo+ID4+
ICAgICAgIFdSRUczMl9TT0MxNShNUDAsIDAsIG1tTVAwX1NNTl9DMlBNU0dfMzYsCj4gPj4gQEAg
LTE0MywxMCArMTQxLDggQEAgc3RhdGljIGludCBwc3BfdjNfMV9ib290bG9hZGVyX2xvYWRfc29z
KHN0cnVjdAo+ID4+IHBzcF9jb250ZXh0ICpwc3ApCj4gPj4gICAgICAgaWYgKHJldCkKPiA+PiAg
ICAgICAgICAgcmV0dXJuIHJldDsKPiA+PiAgIC0gICAgbWVtc2V0KHBzcC0+ZndfcHJpX2J1Ziwg
MCwgUFNQXzFfTUVHKTsKPiA+PiAtCj4gPj4gICAgICAgLyogQ29weSBTZWN1cmUgT1MgYmluYXJ5
IHRvIFBTUCBtZW1vcnkgKi8KPiA+PiAtICAgIG1lbWNweShwc3AtPmZ3X3ByaV9idWYsIHBzcC0+
c29zX3N0YXJ0X2FkZHIsIHBzcC0+c29zX2Jpbl9zaXplKTsKPiA+PiArICAgIHBzcF9jb3B5X2Z3
KHBzcCwgcHNwLT5zb3Nfc3RhcnRfYWRkciwgcHNwLT5zb3NfYmluX3NpemUpOwo+ID4+ICAgICAg
ICAgLyogUHJvdmlkZSB0aGUgUFNQIHNlY3VyZSBPUyB0byBib290bG9hZGVyICovCj4gPj4gICAg
ICAgV1JFRzMyX1NPQzE1KE1QMCwgMCwgbW1NUDBfU01OX0MyUE1TR18zNiwKPiA+CgoKCi0tIApE
YW5pZWwgVmV0dGVyClNvZnR3YXJlIEVuZ2luZWVyLCBJbnRlbCBDb3Jwb3JhdGlvbgpodHRwOi8v
YmxvZy5mZndsbC5jaApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2
ZWwK
