Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 54357CBCF2
	for <lists+dri-devel@lfdr.de>; Fri,  4 Oct 2019 16:19:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A79106EBB1;
	Fri,  4 Oct 2019 14:19:34 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga17.intel.com (mga17.intel.com [192.55.52.151])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1BD856EBAF;
 Fri,  4 Oct 2019 14:19:28 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 04 Oct 2019 07:19:27 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.67,256,1566889200"; d="scan'208";a="276067591"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga001.jf.intel.com with SMTP; 04 Oct 2019 07:19:24 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 04 Oct 2019 17:19:24 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 4/4] drm/edid: Prep for HDMI VIC aspect ratio (WIP)
Date: Fri,  4 Oct 2019 17:19:14 +0300
Message-Id: <20191004141914.20600-4-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191004141914.20600-1-ville.syrjala@linux.intel.com>
References: <20191004141914.20600-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org, Wayne Lin <waynelin@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkkg
dGhpbmsgdGhpcyBzaG91bGQgcHJvdmlkZSBtb3N0IG9mIG5lY2Vzc2FyeSBsb2dpYyBmb3IKYWRk
aW5nIGFzcGVjciByYXRpb3MgdG8gdGhlIEhETUkgNGsgbW9kZXMuCgpDYzogV2F5bmUgTGluIDx3
YXluZWxpbkBhbWQuY29tPgpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5
cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fZWRpZC5jIHwg
MzcgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLQogMSBmaWxlIGNoYW5nZWQs
IDMxIGluc2VydGlvbnMoKyksIDYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2RybV9lZGlkLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2VkaWQuYwppbmRleCBjN2Y5
ZjdjYTc1YTIuLmM3NjgxNGVkYzc4NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9l
ZGlkLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9lZGlkLmMKQEAgLTMyMTAsNiArMzIxMCwx
MSBAQCBzdGF0aWMgZW51bSBoZG1pX3BpY3R1cmVfYXNwZWN0IGRybV9nZXRfY2VhX2FzcGVjdF9y
YXRpbyhjb25zdCB1OCB2aWRlb19jb2RlKQogCXJldHVybiBlZGlkX2NlYV9tb2Rlc1t2aWRlb19j
b2RlXS5waWN0dXJlX2FzcGVjdF9yYXRpbzsKIH0KIAorc3RhdGljIGVudW0gaGRtaV9waWN0dXJl
X2FzcGVjdCBkcm1fZ2V0X2hkbWlfYXNwZWN0X3JhdGlvKGNvbnN0IHU4IHZpZGVvX2NvZGUpCit7
CisJcmV0dXJuIGVkaWRfNGtfbW9kZXNbdmlkZW9fY29kZV0ucGljdHVyZV9hc3BlY3RfcmF0aW87
Cit9CisKIC8qCiAgKiBDYWxjdWxhdGUgdGhlIGFsdGVybmF0ZSBjbG9jayBmb3IgSERNSSBtb2Rl
cyAodGhvc2UgZnJvbSB0aGUgSERNSSB2ZW5kb3IKICAqIHNwZWNpZmljIGJsb2NrKS4KQEAgLTMy
MzYsNiArMzI0MSw5IEBAIHN0YXRpYyB1OCBkcm1fbWF0Y2hfaGRtaV9tb2RlX2Nsb2NrX3RvbGVy
YW5jZShjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqdG9fCiAJaWYgKCF0b19tYXRjaC0+
Y2xvY2spCiAJCXJldHVybiAwOwogCisJaWYgKHRvX21hdGNoLT5waWN0dXJlX2FzcGVjdF9yYXRp
bykKKwkJbWF0Y2hfZmxhZ3MgfD0gRFJNX01PREVfTUFUQ0hfQVNQRUNUX1JBVElPOworCiAJZm9y
ICh2aWMgPSAxOyB2aWMgPCBBUlJBWV9TSVpFKGVkaWRfNGtfbW9kZXMpOyB2aWMrKykgewogCQlj
b25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqaGRtaV9tb2RlID0gJmVkaWRfNGtfbW9kZXNb
dmljXTsKIAkJdW5zaWduZWQgaW50IGNsb2NrMSwgY2xvY2syOwpAQCAtMzI3MSw2ICszMjc5LDkg
QEAgc3RhdGljIHU4IGRybV9tYXRjaF9oZG1pX21vZGUoY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKnRvX21hdGNoKQogCWlmICghdG9fbWF0Y2gtPmNsb2NrKQogCQlyZXR1cm4gMDsKIAor
CWlmICh0b19tYXRjaC0+cGljdHVyZV9hc3BlY3RfcmF0aW8pCisJCW1hdGNoX2ZsYWdzIHw9IERS
TV9NT0RFX01BVENIX0FTUEVDVF9SQVRJTzsKKwogCWZvciAodmljID0gMTsgdmljIDwgQVJSQVlf
U0laRShlZGlkXzRrX21vZGVzKTsgdmljKyspIHsKIAkJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKmhkbWlfbW9kZSA9ICZlZGlkXzRrX21vZGVzW3ZpY107CiAJCXVuc2lnbmVkIGludCBj
bG9jazEsIGNsb2NrMjsKQEAgLTUyMTgsNiArNTIyOSw3IEBAIGRybV9oZG1pX2F2aV9pbmZvZnJh
bWVfZnJvbV9kaXNwbGF5X21vZGUoc3RydWN0IGhkbWlfYXZpX2luZm9mcmFtZSAqZnJhbWUsCiAJ
CQkJCSBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKIHsKIAllbnVtIGhkbWlf
cGljdHVyZV9hc3BlY3QgcGljdHVyZV9hc3BlY3Q7CisJdTggdmljLCBoZG1pX3ZpYzsKIAlpbnQg
ZXJyOwogCiAJaWYgKCFmcmFtZSB8fCAhbW9kZSkKQEAgLTUyMzAsNyArNTI0Miw4IEBAIGRybV9o
ZG1pX2F2aV9pbmZvZnJhbWVfZnJvbV9kaXNwbGF5X21vZGUoc3RydWN0IGhkbWlfYXZpX2luZm9m
cmFtZSAqZnJhbWUsCiAJaWYgKG1vZGUtPmZsYWdzICYgRFJNX01PREVfRkxBR19EQkxDTEspCiAJ
CWZyYW1lLT5waXhlbF9yZXBlYXQgPSAxOwogCi0JZnJhbWUtPnZpZGVvX2NvZGUgPSBkcm1fbW9k
ZV9jZWFfdmljKGNvbm5lY3RvciwgbW9kZSk7CisJdmljID0gZHJtX21vZGVfY2VhX3ZpYyhjb25u
ZWN0b3IsIG1vZGUpOworCWhkbWlfdmljID0gZHJtX21vZGVfaGRtaV92aWMoY29ubmVjdG9yLCBt
b2RlKTsKIAogCWZyYW1lLT5waWN0dXJlX2FzcGVjdCA9IEhETUlfUElDVFVSRV9BU1BFQ1RfTk9O
RTsKIApAQCAtNTI0NCwxMSArNTI1NywxNSBAQCBkcm1faGRtaV9hdmlfaW5mb2ZyYW1lX2Zyb21f
ZGlzcGxheV9tb2RlKHN0cnVjdCBoZG1pX2F2aV9pbmZvZnJhbWUgKmZyYW1lLAogCiAJLyoKIAkg
KiBQb3B1bGF0ZSBwaWN0dXJlIGFzcGVjdCByYXRpbyBmcm9tIGVpdGhlcgotCSAqIHVzZXIgaW5w
dXQgKGlmIHNwZWNpZmllZCkgb3IgZnJvbSB0aGUgQ0VBIG1vZGUgbGlzdC4KKwkgKiB1c2VyIGlu
cHV0IChpZiBzcGVjaWZpZWQpIG9yIGZyb20gdGhlIENFQS9IRE1JIG1vZGUgbGlzdHMuCiAJICov
CiAJcGljdHVyZV9hc3BlY3QgPSBtb2RlLT5waWN0dXJlX2FzcGVjdF9yYXRpbzsKLQlpZiAocGlj
dHVyZV9hc3BlY3QgPT0gSERNSV9QSUNUVVJFX0FTUEVDVF9OT05FKQotCQlwaWN0dXJlX2FzcGVj
dCA9IGRybV9nZXRfY2VhX2FzcGVjdF9yYXRpbyhmcmFtZS0+dmlkZW9fY29kZSk7CisJaWYgKHBp
Y3R1cmVfYXNwZWN0ID09IEhETUlfUElDVFVSRV9BU1BFQ1RfTk9ORSkgeworCQlpZiAodmljKQor
CQkJcGljdHVyZV9hc3BlY3QgPSBkcm1fZ2V0X2NlYV9hc3BlY3RfcmF0aW8odmljKTsKKwkJZWxz
ZSBpZiAoaGRtaV92aWMpCisJCQlwaWN0dXJlX2FzcGVjdCA9IGRybV9nZXRfaGRtaV9hc3BlY3Rf
cmF0aW8oaGRtaV92aWMpOworCX0KIAogCS8qCiAJICogVGhlIGluZm9mcmFtZSBjYW4ndCBjb252
ZXkgYW55dGhpbmcgYnV0IG5vbmUsIDQ6MwpAQCAtNTI1NiwxMiArNTI3MywyMCBAQCBkcm1faGRt
aV9hdmlfaW5mb2ZyYW1lX2Zyb21fZGlzcGxheV9tb2RlKHN0cnVjdCBoZG1pX2F2aV9pbmZvZnJh
bWUgKmZyYW1lLAogCSAqIHdlIGNhbiBvbmx5IHNhdGlzZnkgaXQgYnkgc3BlY2lmeWluZyB0aGUg
cmlnaHQgVklDLgogCSAqLwogCWlmIChwaWN0dXJlX2FzcGVjdCA+IEhETUlfUElDVFVSRV9BU1BF
Q1RfMTZfOSkgewotCQlpZiAocGljdHVyZV9hc3BlY3QgIT0KLQkJICAgIGRybV9nZXRfY2VhX2Fz
cGVjdF9yYXRpbyhmcmFtZS0+dmlkZW9fY29kZSkpCisJCWlmICh2aWMpIHsKKwkJCWlmIChwaWN0
dXJlX2FzcGVjdCAhPSBkcm1fZ2V0X2NlYV9hc3BlY3RfcmF0aW8odmljKSkKKwkJCQlyZXR1cm4g
LUVJTlZBTDsKKwkJfSBlbHNlIGlmIChoZG1pX3ZpYykgeworCQkJaWYgKHBpY3R1cmVfYXNwZWN0
ICE9IGRybV9nZXRfaGRtaV9hc3BlY3RfcmF0aW8oaGRtaV92aWMpKQorCQkJCXJldHVybiAtRUlO
VkFMOworCQl9IGVsc2UgewogCQkJcmV0dXJuIC1FSU5WQUw7CisJCX0KKwogCQlwaWN0dXJlX2Fz
cGVjdCA9IEhETUlfUElDVFVSRV9BU1BFQ1RfTk9ORTsKIAl9CiAKKwlmcmFtZS0+dmlkZW9fY29k
ZSA9IHZpYzsKIAlmcmFtZS0+cGljdHVyZV9hc3BlY3QgPSBwaWN0dXJlX2FzcGVjdDsKIAlmcmFt
ZS0+YWN0aXZlX2FzcGVjdCA9IEhETUlfQUNUSVZFX0FTUEVDVF9QSUNUVVJFOwogCWZyYW1lLT5z
Y2FuX21vZGUgPSBIRE1JX1NDQU5fTU9ERV9VTkRFUlNDQU47Ci0tIAoyLjIxLjAKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
