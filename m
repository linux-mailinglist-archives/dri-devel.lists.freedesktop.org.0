Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 73EEF78F83
	for <lists+dri-devel@lfdr.de>; Mon, 29 Jul 2019 17:38:27 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 039F56E03D;
	Mon, 29 Jul 2019 15:38:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from metis.ext.pengutronix.de (metis.ext.pengutronix.de
 [IPv6:2001:67c:670:201:290:27ff:fe1d:cc33])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5BED76E03D
 for <dri-devel@lists.freedesktop.org>; Mon, 29 Jul 2019 15:38:23 +0000 (UTC)
Received: from lupine.hi.pengutronix.de
 ([2001:67c:670:100:3ad5:47ff:feaf:1a17] helo=lupine)
 by metis.ext.pengutronix.de with esmtp (Exim 4.92)
 (envelope-from <p.zabel@pengutronix.de>)
 id 1hs7jB-0003BT-9y; Mon, 29 Jul 2019 17:38:21 +0200
Message-ID: <1564414701.7633.12.camel@pengutronix.de>
Subject: Re: [PATCH v2 7/8] drm/etnaviv: provide MMU context to
 etnaviv_gem_mapping_get
From: Philipp Zabel <p.zabel@pengutronix.de>
To: Lucas Stach <l.stach@pengutronix.de>, etnaviv@lists.freedesktop.org
Date: Mon, 29 Jul 2019 17:38:21 +0200
In-Reply-To: <20190705171727.27501-7-l.stach@pengutronix.de>
References: <20190705171727.27501-1-l.stach@pengutronix.de>
 <20190705171727.27501-7-l.stach@pengutronix.de>
X-Mailer: Evolution 3.22.6-1+deb9u2 
Mime-Version: 1.0
X-SA-Exim-Connect-IP: 2001:67c:670:100:3ad5:47ff:feaf:1a17
X-SA-Exim-Mail-From: p.zabel@pengutronix.de
X-SA-Exim-Scanned: No (on metis.ext.pengutronix.de);
 SAEximRunCond expanded to false
X-PTX-Original-Recipient: dri-devel@lists.freedesktop.org
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Russell King <linux+etnaviv@armlinux.org.uk>,
 dri-devel@lists.freedesktop.org, kernel@pengutronix.de,
 patchwork-lst@pengutronix.de
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCAyMDE5LTA3LTA1IGF0IDE5OjE3ICswMjAwLCBMdWNhcyBTdGFjaCB3cm90ZToKPiBJ
biBwcmVwYXJhdGlvbiB0byBoYXZpbmcgYSBjb250ZXh0IHBlciBwcm9jZXNzLCBldG5hdml2X2dl
bV9tYXBwaW5nX2dldAo+IHNob3VsZCBub3QgdXNlIHRoZSBjdXJyZW50IEdQVSBjb250ZXh0LCBi
dXQgbmVlZHMgdG8gYmUgdG9sZCB3aGljaAo+IGNvbnRleHQgdG8gdXNlLgo+IAo+IFNpZ25lZC1v
ZmYtYnk6IEx1Y2FzIFN0YWNoIDxsLnN0YWNoQHBlbmd1dHJvbml4LmRlPgo+IC0tLQo+ICBkcml2
ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5jICAgICAgICB8IDIwICsrKysrKysrKysr
Ky0tLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmggICAgICAg
IHwgIDMgKystCj4gIGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5j
IHwgIDIgKy0KPiAgMyBmaWxlcyBjaGFuZ2VkLCAxNSBpbnNlcnRpb25zKCspLCAxMCBkZWxldGlv
bnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9n
ZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmMKPiBpbmRleCBlMTgx
NTA1OGQ1ZmMuLjVmZWUwYmIxNDVjOCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZXRu
YXZpdi9ldG5hdml2X2dlbS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZp
dl9nZW0uYwo+IEBAIC0yNDgsNyArMjQ4LDggQEAgdm9pZCBldG5hdml2X2dlbV9tYXBwaW5nX3Vu
cmVmZXJlbmNlKHN0cnVjdCBldG5hdml2X3ZyYW1fbWFwcGluZyAqbWFwcGluZykKPiAgfQo+ICAK
PiAgc3RydWN0IGV0bmF2aXZfdnJhbV9tYXBwaW5nICpldG5hdml2X2dlbV9tYXBwaW5nX2dldCgK
PiAtCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZXRuYXZpdl9ncHUgKmdwdSkK
PiArCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZXRuYXZpdl9ncHUgKmdwdSwK
PiArCXN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQgKm1tdSkKPiAgewo+ICAJc3RydWN0IGV0
bmF2aXZfZ2VtX29iamVjdCAqZXRuYXZpdl9vYmogPSB0b19ldG5hdml2X2JvKG9iaik7Cj4gIAlz
dHJ1Y3QgZXRuYXZpdl92cmFtX21hcHBpbmcgKm1hcHBpbmc7Cj4gQEAgLTI1Niw3ICsyNTcsNyBA
QCBzdHJ1Y3QgZXRuYXZpdl92cmFtX21hcHBpbmcgKmV0bmF2aXZfZ2VtX21hcHBpbmdfZ2V0KAo+
ICAJaW50IHJldCA9IDA7Cj4gIAo+ICAJbXV0ZXhfbG9jaygmZXRuYXZpdl9vYmotPmxvY2spOwo+
IC0JbWFwcGluZyA9IGV0bmF2aXZfZ2VtX2dldF92cmFtX21hcHBpbmcoZXRuYXZpdl9vYmosIGdw
dS0+bW11KTsKPiArCW1hcHBpbmcgPSBldG5hdml2X2dlbV9nZXRfdnJhbV9tYXBwaW5nKGV0bmF2
aXZfb2JqLCBtbXUpOwo+ICAJaWYgKG1hcHBpbmcpIHsKPiAgCQkvKgo+ICAJCSAqIEhvbGRpbmcg
dGhlIG9iamVjdCBsb2NrIHByZXZlbnRzIHRoZSB1c2UgY291bnQgY2hhbmdpbmcKPiBAQCAtMjY1
LDEyICsyNjYsMTIgQEAgc3RydWN0IGV0bmF2aXZfdnJhbV9tYXBwaW5nICpldG5hdml2X2dlbV9t
YXBwaW5nX2dldCgKPiAgCQkgKiB0aGUgTU1VIG93bnMgdGhpcyBtYXBwaW5nIHRvIGNsb3NlIHRo
aXMgcmFjZS4KPiAgCQkgKi8KPiAgCQlpZiAobWFwcGluZy0+dXNlID09IDApIHsKPiAtCQkJbXV0
ZXhfbG9jaygmZ3B1LT5tbXUtPmxvY2spOwo+IC0JCQlpZiAobWFwcGluZy0+Y29udGV4dCA9PSBn
cHUtPm1tdSkKPiArCQkJbXV0ZXhfbG9jaygmbW11LT5sb2NrKTsKPiArCQkJaWYgKG1hcHBpbmct
PmNvbnRleHQgPT0gbW11KQo+ICAJCQkJbWFwcGluZy0+dXNlICs9IDE7Cj4gIAkJCWVsc2UKPiAg
CQkJCW1hcHBpbmcgPSBOVUxMOwo+IC0JCQltdXRleF91bmxvY2soJmdwdS0+bW11LT5sb2NrKTsK
PiArCQkJbXV0ZXhfdW5sb2NrKCZtbXUtPmxvY2spOwo+ICAJCQlpZiAobWFwcGluZykKPiAgCQkJ
CWdvdG8gb3V0Owo+ICAJCX0gZWxzZSB7Cj4gQEAgLTMwMywxMCArMzA0LDExIEBAIHN0cnVjdCBl
dG5hdml2X3ZyYW1fbWFwcGluZyAqZXRuYXZpdl9nZW1fbWFwcGluZ19nZXQoCj4gIAkJbGlzdF9k
ZWwoJm1hcHBpbmctPm9ial9ub2RlKTsKPiAgCX0KPiAgCj4gLQltYXBwaW5nLT5jb250ZXh0ID0g
Z3B1LT5tbXU7Cj4gKwlldG5hdml2X2lvbW11X2NvbnRleHRfZ2V0KG1tdSk7Cj4gKwltYXBwaW5n
LT5jb250ZXh0ID0gbW11Owo+ICAJbWFwcGluZy0+dXNlID0gMTsKPiAgCj4gLQlyZXQgPSBldG5h
dml2X2lvbW11X21hcF9nZW0oZ3B1LT5tbXUsIGV0bmF2aXZfb2JqLCBncHUtPm1lbW9yeV9iYXNl
LAo+ICsJcmV0ID0gZXRuYXZpdl9pb21tdV9tYXBfZ2VtKG1tdSwgZXRuYXZpdl9vYmosIGdwdS0+
bWVtb3J5X2Jhc2UsCj4gIAkJCQkgICAgbWFwcGluZyk7Cj4gIAlpZiAocmV0IDwgMCkKPiAgCQlr
ZnJlZShtYXBwaW5nKTsKPiBAQCAtNTI5LDggKzUzMSwxMCBAQCB2b2lkIGV0bmF2aXZfZ2VtX2Zy
ZWVfb2JqZWN0KHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKQo+ICAKPiAgCQlXQVJOX09OKG1h
cHBpbmctPnVzZSk7Cj4gIAo+IC0JCWlmIChjb250ZXh0KQo+ICsJCWlmIChjb250ZXh0KSB7Cj4g
IAkJCWV0bmF2aXZfaW9tbXVfdW5tYXBfZ2VtKGNvbnRleHQsIG1hcHBpbmcpOwo+ICsJCQlldG5h
dml2X2lvbW11X2NvbnRleHRfcHV0KGNvbnRleHQpOwo+ICsJCX0KPiAgCj4gIAkJbGlzdF9kZWwo
Jm1hcHBpbmctPm9ial9ub2RlKTsKPiAgCQlrZnJlZShtYXBwaW5nKTsKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW0uaCBiL2RyaXZlcnMvZ3B1L2RybS9l
dG5hdml2L2V0bmF2aXZfZ2VtLmgKPiBpbmRleCA1YTAwNGQ1ZTRlYWEuLjM2NDg2MjU0YTNkMyAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5oCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW0uaAo+IEBAIC0xMTksNyArMTE5
LDggQEAgc3RydWN0IHBhZ2UgKipldG5hdml2X2dlbV9nZXRfcGFnZXMoc3RydWN0IGV0bmF2aXZf
Z2VtX29iamVjdCAqb2JqKTsKPiAgdm9pZCBldG5hdml2X2dlbV9wdXRfcGFnZXMoc3RydWN0IGV0
bmF2aXZfZ2VtX29iamVjdCAqb2JqKTsKPiAgCj4gIHN0cnVjdCBldG5hdml2X3ZyYW1fbWFwcGlu
ZyAqZXRuYXZpdl9nZW1fbWFwcGluZ19nZXQoCj4gLQlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9i
aiwgc3RydWN0IGV0bmF2aXZfZ3B1ICpncHUpOwo+ICsJc3RydWN0IGRybV9nZW1fb2JqZWN0ICpv
YmosIHN0cnVjdCBldG5hdml2X2dwdSAqZ3B1LAo+ICsJc3RydWN0IGV0bmF2aXZfaW9tbXVfY29u
dGV4dCAqbW11KTsKPiAgdm9pZCBldG5hdml2X2dlbV9tYXBwaW5nX3VucmVmZXJlbmNlKHN0cnVj
dCBldG5hdml2X3ZyYW1fbWFwcGluZyAqbWFwcGluZyk7Cj4gIAo+ICAjZW5kaWYgLyogX19FVE5B
VklWX0dFTV9IX18gKi8KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRu
YXZpdl9nZW1fc3VibWl0LmMgYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9z
dWJtaXQuYwo+IGluZGV4IDNmNGY2YWIzODhkZS4uMjY3ZmY1ODYzZTVkIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5jCj4gKysrIGIvZHJp
dmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW1fc3VibWl0LmMKPiBAQCAtMjI0LDcgKzIy
NCw3IEBAIHN0YXRpYyBpbnQgc3VibWl0X3Bpbl9vYmplY3RzKHN0cnVjdCBldG5hdml2X2dlbV9z
dWJtaXQgKnN1Ym1pdCkKPiAgCQlzdHJ1Y3QgZXRuYXZpdl92cmFtX21hcHBpbmcgKm1hcHBpbmc7
Cj4gIAo+ICAJCW1hcHBpbmcgPSBldG5hdml2X2dlbV9tYXBwaW5nX2dldCgmZXRuYXZpdl9vYmot
PmJhc2UsCj4gLQkJCQkJCSAgc3VibWl0LT5ncHUpOwo+ICsJCQkJCQkgIHN1Ym1pdC0+Z3B1LCBz
dWJtaXQtPmdwdS0+bW11KTsKPiAgCQlpZiAoSVNfRVJSKG1hcHBpbmcpKSB7Cj4gIAkJCXJldCA9
IFBUUl9FUlIobWFwcGluZyk7Cj4gIAkJCWJyZWFrOwoKUmV2aWV3ZWQtYnk6IFBoaWxpcHAgWmFi
ZWwgPHAuemFiZWxAcGVuZ3V0cm9uaXguZGU+CgpyZWdhcmRzClBoaWxpcHAKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
