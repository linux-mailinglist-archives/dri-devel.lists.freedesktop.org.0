Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0B27557CDB
	for <lists+dri-devel@lfdr.de>; Thu, 27 Jun 2019 09:12:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 73BA76E5C9;
	Thu, 27 Jun 2019 07:11:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from inva020.nxp.com (inva020.nxp.com [92.121.34.13])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 34A7D6E3A6
 for <dri-devel@lists.freedesktop.org>; Wed, 26 Jun 2019 12:08:31 +0000 (UTC)
Received: from inva020.nxp.com (localhost [127.0.0.1])
 by inva020.eu-rdc02.nxp.com (Postfix) with ESMTP id DFB311A0FCC;
 Wed, 26 Jun 2019 14:08:29 +0200 (CEST)
Received: from inva024.eu-rdc02.nxp.com (inva024.eu-rdc02.nxp.com
 [134.27.226.22])
 by inva020.eu-rdc02.nxp.com (Postfix) with ESMTP id D0AC11A0A12;
 Wed, 26 Jun 2019 14:08:29 +0200 (CEST)
Received: from fsr-ub1664-120.ea.freescale.net
 (fsr-ub1664-120.ea.freescale.net [10.171.82.81])
 by inva024.eu-rdc02.nxp.com (Postfix) with ESMTP id 59188205DB;
 Wed, 26 Jun 2019 14:08:29 +0200 (CEST)
From: Robert Chiras <robert.chiras@nxp.com>
To: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>,
 David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>
Subject: [PATCH v6 2/2] drm/panel: Add support for Raydium RM67191 panel driver
Date: Wed, 26 Jun 2019 15:08:27 +0300
Message-Id: <1561550907-9733-3-git-send-email-robert.chiras@nxp.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1561550907-9733-1-git-send-email-robert.chiras@nxp.com>
References: <1561550907-9733-1-git-send-email-robert.chiras@nxp.com>
X-Virus-Scanned: ClamAV using ClamSMTP
X-Mailman-Approved-At: Thu, 27 Jun 2019 07:11:26 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Robert Chiras <robert.chiras@nxp.com>, devicetree@vger.kernel.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 linux-imx@nxp.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBhZGRzIFJheWRpdW0gUk02NzE5MSBURlQgTENEIHBhbmVsIGRyaXZlciAoTUlQ
SS1EU0kKcHJvdG9jb2wpLgoKU2lnbmVkLW9mZi1ieTogUm9iZXJ0IENoaXJhcyA8cm9iZXJ0LmNo
aXJhc0BueHAuY29tPgpSZXZpZXdlZC1ieTogU2FtIFJhdm5ib3JnIDxzYW1AcmF2bmJvcmcub3Jn
PgpSZXZpZXdlZC1ieTogRmFiaW8gRXN0ZXZhbSA8ZmVzdGV2YW1AZ21haWwuY29tPgotLS0KIE1B
SU5UQUlORVJTICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgNiArCiBkcml2
ZXJzL2dwdS9kcm0vcGFuZWwvS2NvbmZpZyAgICAgICAgICAgICAgICAgfCAgIDkgKwogZHJpdmVy
cy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlICAgICAgICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMv
Z3B1L2RybS9wYW5lbC9wYW5lbC1yYXlkaXVtLXJtNjcxOTEuYyB8IDY2OCArKysrKysrKysrKysr
KysrKysrKysrKysrKwogNCBmaWxlcyBjaGFuZ2VkLCA2ODQgaW5zZXJ0aW9ucygrKQogY3JlYXRl
IG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1yYXlkaXVtLXJtNjcxOTEu
YwoKZGlmZiAtLWdpdCBhL01BSU5UQUlORVJTIGIvTUFJTlRBSU5FUlMKaW5kZXggZDY2MDA3MS4u
YmYxN2Y4MyAxMDA2NDQKLS0tIGEvTUFJTlRBSU5FUlMKKysrIGIvTUFJTlRBSU5FUlMKQEAgLTUx
MDEsNiArNTEwMSwxMiBAQCBTOglNYWludGFpbmVkCiBGOglkcml2ZXJzL2dwdS9kcm0vcXhsLwog
RjoJaW5jbHVkZS91YXBpL2RybS9xeGxfZHJtLmgKIAorRFJNIERSSVZFUiBGT1IgUkFZRElVTSBS
TTY3MTkxIFBBTkVMUworTToJUm9iZXJ0IENoaXJhcyA8cm9iZXJ0LmNoaXJhc0BueHAuY29tPgor
UzoJTWFpbnRhaW5lZAorRjoJZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLXJheWRpdW0tcm02
NzE5MS5jCitGOglEb2N1bWVudGF0aW9uL2RldmljZXRyZWUvYmluZGluZ3MvZGlzcGxheS9wYW5l
bC9yYXlkaXVtLHJtNjcxOTEudHh0CisKIERSTSBEUklWRVIgRk9SIFJBR0UgMTI4IFZJREVPIENB
UkRTCiBTOglPcnBoYW4gLyBPYnNvbGV0ZQogRjoJZHJpdmVycy9ncHUvZHJtL3IxMjgvCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvS2NvbmZpZyBiL2RyaXZlcnMvZ3B1L2RybS9w
YW5lbC9LY29uZmlnCmluZGV4IGQ5ZDkzMWEuLjhiZTFhYzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9wYW5lbC9LY29uZmlnCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmln
CkBAIC0xNTksNiArMTU5LDE1IEBAIGNvbmZpZyBEUk1fUEFORUxfUkFTUEJFUlJZUElfVE9VQ0hT
Q1JFRU4KIAkgIFBpIDciIFRvdWNoc2NyZWVuLiAgVG8gY29tcGlsZSB0aGlzIGRyaXZlciBhcyBh
IG1vZHVsZSwKIAkgIGNob29zZSBNIGhlcmUuCiAKK2NvbmZpZyBEUk1fUEFORUxfUkFZRElVTV9S
TTY3MTkxCisJdHJpc3RhdGUgIlJheWRpdW0gUk02NzE5MSBGSEQgMTA4MHgxOTIwIERTSSB2aWRl
byBtb2RlIHBhbmVsIgorCWRlcGVuZHMgb24gT0YKKwlkZXBlbmRzIG9uIERSTV9NSVBJX0RTSQor
CWRlcGVuZHMgb24gQkFDS0xJR0hUX0NMQVNTX0RFVklDRQorCWhlbHAKKwkgIFNheSBZIGhlcmUg
aWYgeW91IHdhbnQgdG8gZW5hYmxlIHN1cHBvcnQgZm9yIFJheWRpdW0gUk02NzE5MSBGSEQKKwkg
ICgxMDgweDE5MjApIERTSSBwYW5lbC4KKwogY29uZmlnIERSTV9QQU5FTF9SQVlESVVNX1JNNjgy
MDAKIAl0cmlzdGF0ZSAiUmF5ZGl1bSBSTTY4MjAwIDcyMHgxMjgwIERTSSB2aWRlbyBtb2RlIHBh
bmVsIgogCWRlcGVuZHMgb24gT0YKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9N
YWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQppbmRleCBmYjBjYjNhLi4x
ZmMwZjY4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlCkBAIC0xNCw2ICsxNCw3IEBAIG9iai0kKENP
TkZJR19EUk1fUEFORUxfT1JJU0VURUNIX09UTTgwMDlBKSArPSBwYW5lbC1vcmlzZXRlY2gtb3Rt
ODAwOWEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9PU0RfT1NEMTAxVDI1ODdfNTNUUykgKz0g
cGFuZWwtb3NkLW9zZDEwMXQyNTg3LTUzdHMubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9QQU5B
U09OSUNfVlZYMTBGMDM0TjAwKSArPSBwYW5lbC1wYW5hc29uaWMtdnZ4MTBmMDM0bjAwLm8KIG9i
ai0kKENPTkZJR19EUk1fUEFORUxfUkFTUEJFUlJZUElfVE9VQ0hTQ1JFRU4pICs9IHBhbmVsLXJh
c3BiZXJyeXBpLXRvdWNoc2NyZWVuLm8KK29iai0kKENPTkZJR19EUk1fUEFORUxfUkFZRElVTV9S
TTY3MTkxKSArPSBwYW5lbC1yYXlkaXVtLXJtNjcxOTEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5F
TF9SQVlESVVNX1JNNjgyMDApICs9IHBhbmVsLXJheWRpdW0tcm02ODIwMC5vCiBvYmotJChDT05G
SUdfRFJNX1BBTkVMX1JPQ0tURUNIX0pIMDU3TjAwOTAwKSArPSBwYW5lbC1yb2NrdGVjaC1qaDA1
N24wMDkwMC5vCiBvYmotJChDT05GSUdfRFJNX1BBTkVMX1JPTkJPX1JCMDcwRDMwKSArPSBwYW5l
bC1yb25iby1yYjA3MGQzMC5vCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFu
ZWwtcmF5ZGl1bS1ybTY3MTkxLmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtcmF5ZGl1
bS1ybTY3MTkxLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMC4uNmE1ZDM3MAot
LS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1yYXlkaXVtLXJt
NjcxOTEuYwpAQCAtMCwwICsxLDY2OCBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQ
TC0yLjAKKy8qCisgKiBSYXlkaXVtIFJNNjcxOTEgTUlQSS1EU0kgcGFuZWwgZHJpdmVyCisgKgor
ICogQ29weXJpZ2h0IDIwMTkgTlhQCisgKi8KKworI2luY2x1ZGUgPGxpbnV4L2JhY2tsaWdodC5o
PgorI2luY2x1ZGUgPGxpbnV4L2RlbGF5Lmg+CisjaW5jbHVkZSA8bGludXgvZ3Bpby9jb25zdW1l
ci5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L29mLmg+Cisj
aW5jbHVkZSA8bGludXgvcmVndWxhdG9yL2NvbnN1bWVyLmg+CisKKyNpbmNsdWRlIDx2aWRlby9t
aXBpX2Rpc3BsYXkuaD4KKyNpbmNsdWRlIDx2aWRlby9vZl92aWRlb21vZGUuaD4KKyNpbmNsdWRl
IDx2aWRlby92aWRlb21vZGUuaD4KKworI2luY2x1ZGUgPGRybS9kcm1fY3J0Yy5oPgorI2luY2x1
ZGUgPGRybS9kcm1fbWlwaV9kc2kuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX3BhbmVsLmg+CisjaW5j
bHVkZSA8ZHJtL2RybV9wcmludC5oPgorCisvKiBQYW5lbCBzcGVjaWZpYyBjb2xvci1mb3JtYXQg
Yml0cyAqLworI2RlZmluZSBDT0xfRk1UXzE2QlBQIDB4NTUKKyNkZWZpbmUgQ09MX0ZNVF8xOEJQ
UCAweDY2CisjZGVmaW5lIENPTF9GTVRfMjRCUFAgMHg3NworCisvKiBXcml0ZSBNYW51ZmFjdHVy
ZSBDb21tYW5kIFNldCBDb250cm9sICovCisjZGVmaW5lIFdSTUFVQ0NUUiAweEZFCisKKy8qIE1h
bnVmYWN0dXJlciBDb21tYW5kIFNldCBwYWdlcyAoQ01EMikgKi8KK3N0cnVjdCBjbWRfc2V0X2Vu
dHJ5IHsKKwl1OCBjbWQ7CisJdTggcGFyYW07Cit9OworCisvKgorICogVGhlcmUgaXMgbm8gZGVz
Y3JpcHRpb24gaW4gdGhlIFJlZmVyZW5jZSBNYW51YWwgYWJvdXQgdGhlc2UgY29tbWFuZHMuCisg
KiBXZSByZWNlaXZlZCB0aGVtIGZyb20gdmVuZG9yLCBzbyBqdXN0IHVzZSB0aGVtIGFzIGlzLgor
ICovCitzdGF0aWMgY29uc3Qgc3RydWN0IGNtZF9zZXRfZW50cnkgbWFudWZhY3R1cmVyX2NtZF9z
ZXRbXSA9IHsKKwl7MHhGRSwgMHgwQn0sCisJezB4MjgsIDB4NDB9LAorCXsweDI5LCAweDRGfSwK
Kwl7MHhGRSwgMHgwRX0sCisJezB4NEIsIDB4MDB9LAorCXsweDRDLCAweDBGfSwKKwl7MHg0RCwg
MHgyMH0sCisJezB4NEUsIDB4NDB9LAorCXsweDRGLCAweDYwfSwKKwl7MHg1MCwgMHhBMH0sCisJ
ezB4NTEsIDB4QzB9LAorCXsweDUyLCAweEUwfSwKKwl7MHg1MywgMHhGRn0sCisJezB4RkUsIDB4
MER9LAorCXsweDE4LCAweDA4fSwKKwl7MHg0MiwgMHgwMH0sCisJezB4MDgsIDB4NDF9LAorCXsw
eDQ2LCAweDAyfSwKKwl7MHg3MiwgMHgwOX0sCisJezB4RkUsIDB4MEF9LAorCXsweDI0LCAweDE3
fSwKKwl7MHgwNCwgMHgwN30sCisJezB4MUEsIDB4MEN9LAorCXsweDBGLCAweDQ0fSwKKwl7MHhG
RSwgMHgwNH0sCisJezB4MDAsIDB4MEN9LAorCXsweDA1LCAweDA4fSwKKwl7MHgwNiwgMHgwOH0s
CisJezB4MDgsIDB4MDh9LAorCXsweDA5LCAweDA4fSwKKwl7MHgwQSwgMHhFNn0sCisJezB4MEIs
IDB4OEN9LAorCXsweDFBLCAweDEyfSwKKwl7MHgxRSwgMHhFMH0sCisJezB4MjksIDB4OTN9LAor
CXsweDJBLCAweDkzfSwKKwl7MHgyRiwgMHgwMn0sCisJezB4MzEsIDB4MDJ9LAorCXsweDMzLCAw
eDA1fSwKKwl7MHgzNywgMHgyRH0sCisJezB4MzgsIDB4MkR9LAorCXsweDNBLCAweDFFfSwKKwl7
MHgzQiwgMHgxRX0sCisJezB4M0QsIDB4Mjd9LAorCXsweDNGLCAweDgwfSwKKwl7MHg0MCwgMHg0
MH0sCisJezB4NDEsIDB4RTB9LAorCXsweDRGLCAweDJGfSwKKwl7MHg1MCwgMHgxRX0sCisJezB4
RkUsIDB4MDZ9LAorCXsweDAwLCAweENDfSwKKwl7MHgwNSwgMHgwNX0sCisJezB4MDcsIDB4QTJ9
LAorCXsweDA4LCAweENDfSwKKwl7MHgwRCwgMHgwM30sCisJezB4MEYsIDB4QTJ9LAorCXsweDMy
LCAweENDfSwKKwl7MHgzNywgMHgwNX0sCisJezB4MzksIDB4ODN9LAorCXsweDNBLCAweENDfSwK
Kwl7MHg0MSwgMHgwNH0sCisJezB4NDMsIDB4ODN9LAorCXsweDQ0LCAweENDfSwKKwl7MHg0OSwg
MHgwNX0sCisJezB4NEIsIDB4QTJ9LAorCXsweDRDLCAweENDfSwKKwl7MHg1MSwgMHgwM30sCisJ
ezB4NTMsIDB4QTJ9LAorCXsweDc1LCAweENDfSwKKwl7MHg3QSwgMHgwM30sCisJezB4N0MsIDB4
ODN9LAorCXsweDdELCAweENDfSwKKwl7MHg4MiwgMHgwMn0sCisJezB4ODQsIDB4ODN9LAorCXsw
eDg1LCAweEVDfSwKKwl7MHg4NiwgMHgwRn0sCisJezB4ODcsIDB4RkZ9LAorCXsweDg4LCAweDAw
fSwKKwl7MHg4QSwgMHgwMn0sCisJezB4OEMsIDB4QTJ9LAorCXsweDhELCAweEVBfSwKKwl7MHg4
RSwgMHgwMX0sCisJezB4OEYsIDB4RTh9LAorCXsweEZFLCAweDA2fSwKKwl7MHg5MCwgMHgwQX0s
CisJezB4OTIsIDB4MDZ9LAorCXsweDkzLCAweEEwfSwKKwl7MHg5NCwgMHhBOH0sCisJezB4OTUs
IDB4RUN9LAorCXsweDk2LCAweDBGfSwKKwl7MHg5NywgMHhGRn0sCisJezB4OTgsIDB4MDB9LAor
CXsweDlBLCAweDAyfSwKKwl7MHg5QywgMHhBMn0sCisJezB4QUMsIDB4MDR9LAorCXsweEZFLCAw
eDA2fSwKKwl7MHhCMSwgMHgxMn0sCisJezB4QjIsIDB4MTd9LAorCXsweEIzLCAweDE3fSwKKwl7
MHhCNCwgMHgxN30sCisJezB4QjUsIDB4MTd9LAorCXsweEI2LCAweDExfSwKKwl7MHhCNywgMHgw
OH0sCisJezB4QjgsIDB4MDl9LAorCXsweEI5LCAweDA2fSwKKwl7MHhCQSwgMHgwN30sCisJezB4
QkIsIDB4MTd9LAorCXsweEJDLCAweDE3fSwKKwl7MHhCRCwgMHgxN30sCisJezB4QkUsIDB4MTd9
LAorCXsweEJGLCAweDE3fSwKKwl7MHhDMCwgMHgxN30sCisJezB4QzEsIDB4MTd9LAorCXsweEMy
LCAweDE3fSwKKwl7MHhDMywgMHgxN30sCisJezB4QzQsIDB4MEZ9LAorCXsweEM1LCAweDBFfSwK
Kwl7MHhDNiwgMHgwMH0sCisJezB4QzcsIDB4MDF9LAorCXsweEM4LCAweDEwfSwKKwl7MHhGRSwg
MHgwNn0sCisJezB4OTUsIDB4RUN9LAorCXsweDhELCAweEVFfSwKKwl7MHg0NCwgMHhFQ30sCisJ
ezB4NEMsIDB4RUN9LAorCXsweDMyLCAweEVDfSwKKwl7MHgzQSwgMHhFQ30sCisJezB4N0QsIDB4
RUN9LAorCXsweDc1LCAweEVDfSwKKwl7MHgwMCwgMHhFQ30sCisJezB4MDgsIDB4RUN9LAorCXsw
eDg1LCAweEVDfSwKKwl7MHhBNiwgMHgyMX0sCisJezB4QTcsIDB4MDV9LAorCXsweEE5LCAweDA2
fSwKKwl7MHg4MiwgMHgwNn0sCisJezB4NDEsIDB4MDZ9LAorCXsweDdBLCAweDA3fSwKKwl7MHgz
NywgMHgwN30sCisJezB4MDUsIDB4MDZ9LAorCXsweDQ5LCAweDA2fSwKKwl7MHgwRCwgMHgwNH0s
CisJezB4NTEsIDB4MDR9LAorfTsKKworc3RhdGljIGNvbnN0IHUzMiByYWRfYnVzX2Zvcm1hdHNb
XSA9IHsKKwlNRURJQV9CVVNfRk1UX1JHQjg4OF8xWDI0LAorCU1FRElBX0JVU19GTVRfUkdCNjY2
XzFYMTgsCisJTUVESUFfQlVTX0ZNVF9SR0I1NjVfMVgxNiwKK307CisKK3N0YXRpYyBjb25zdCB1
MzIgcmFkX2J1c19mbGFncyA9IERSTV9CVVNfRkxBR19ERV9MT1cgfAorCQkJCSBEUk1fQlVTX0ZM
QUdfUElYREFUQV9ORUdFREdFOworCitzdHJ1Y3QgcmFkX3BhbmVsIHsKKwlzdHJ1Y3QgZHJtX3Bh
bmVsIHBhbmVsOworCXN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRzaTsKKworCXN0cnVjdCBncGlv
X2Rlc2MgKnJlc2V0OworCXN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpiYWNrbGlnaHQ7CisKKwlz
dHJ1Y3QgcmVndWxhdG9yX2J1bGtfZGF0YSAqc3VwcGxpZXM7CisJdW5zaWduZWQgaW50IG51bV9z
dXBwbGllczsKKworCWJvb2wgcHJlcGFyZWQ7CisJYm9vbCBlbmFibGVkOworfTsKKworc3RhdGlj
IGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlIGRlZmF1bHRfbW9kZSA9IHsKKwkuY2xvY2sg
PSAxMzIwMDAsCisJLmhkaXNwbGF5ID0gMTA4MCwKKwkuaHN5bmNfc3RhcnQgPSAxMDgwICsgMjAs
CisJLmhzeW5jX2VuZCA9IDEwODAgKyAyMCArIDIsCisJLmh0b3RhbCA9IDEwODAgKyAyMCArIDIg
KyAzNCwKKwkudmRpc3BsYXkgPSAxOTIwLAorCS52c3luY19zdGFydCA9IDE5MjAgKyAxMCwKKwku
dnN5bmNfZW5kID0gMTkyMCArIDEwICsgMiwKKwkudnRvdGFsID0gMTkyMCArIDEwICsgMiArIDQs
CisJLnZyZWZyZXNoID0gNjAsCisJLndpZHRoX21tID0gNjgsCisJLmhlaWdodF9tbSA9IDEyMSwK
KwkuZmxhZ3MgPSBEUk1fTU9ERV9GTEFHX05IU1lOQyB8CisJCSBEUk1fTU9ERV9GTEFHX05WU1lO
QywKK307CisKK3N0YXRpYyBpbmxpbmUgc3RydWN0IHJhZF9wYW5lbCAqdG9fcmFkX3BhbmVsKHN0
cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXJldHVybiBjb250YWluZXJfb2YocGFuZWwsIHN0
cnVjdCByYWRfcGFuZWwsIHBhbmVsKTsKK30KKworc3RhdGljIGludCByYWRfcGFuZWxfcHVzaF9j
bWRfbGlzdChzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCit7CisJc2l6ZV90IGk7CisJc2l6
ZV90IGNvdW50ID0gQVJSQVlfU0laRShtYW51ZmFjdHVyZXJfY21kX3NldCk7CisJaW50IHJldCA9
IDA7CisKKwlmb3IgKGkgPSAwOyBpIDwgY291bnQ7IGkrKykgeworCQljb25zdCBzdHJ1Y3QgY21k
X3NldF9lbnRyeSAqZW50cnkgPSAmbWFudWZhY3R1cmVyX2NtZF9zZXRbaV07CisJCXU4IGJ1ZmZl
clsyXSA9IHsgZW50cnktPmNtZCwgZW50cnktPnBhcmFtIH07CisKKwkJcmV0ID0gbWlwaV9kc2lf
Z2VuZXJpY193cml0ZShkc2ksICZidWZmZXIsIHNpemVvZihidWZmZXIpKTsKKwkJaWYgKHJldCA8
IDApCisJCQlyZXR1cm4gcmV0OworCX0KKworCXJldHVybiByZXQ7Cit9OworCitzdGF0aWMgaW50
IGNvbG9yX2Zvcm1hdF9mcm9tX2RzaV9mb3JtYXQoZW51bSBtaXBpX2RzaV9waXhlbF9mb3JtYXQg
Zm9ybWF0KQoreworCXN3aXRjaCAoZm9ybWF0KSB7CisJY2FzZSBNSVBJX0RTSV9GTVRfUkdCNTY1
OgorCQlyZXR1cm4gQ09MX0ZNVF8xNkJQUDsKKwljYXNlIE1JUElfRFNJX0ZNVF9SR0I2NjY6CisJ
Y2FzZSBNSVBJX0RTSV9GTVRfUkdCNjY2X1BBQ0tFRDoKKwkJcmV0dXJuIENPTF9GTVRfMThCUFA7
CisJY2FzZSBNSVBJX0RTSV9GTVRfUkdCODg4OgorCQlyZXR1cm4gQ09MX0ZNVF8yNEJQUDsKKwlk
ZWZhdWx0OgorCQlyZXR1cm4gQ09MX0ZNVF8yNEJQUDsgLyogZm9yIGJhY2t3YXJkIGNvbXBhdGli
aWxpdHkgKi8KKwl9Cit9OworCitzdGF0aWMgaW50IHJhZF9wYW5lbF9wcmVwYXJlKHN0cnVjdCBk
cm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCByYWRfcGFuZWwgKnJhZCA9IHRvX3JhZF9wYW5l
bChwYW5lbCk7CisJaW50IHJldDsKKworCWlmIChyYWQtPnByZXBhcmVkKQorCQlyZXR1cm4gMDsK
KworCXJldCA9IHJlZ3VsYXRvcl9idWxrX2VuYWJsZShyYWQtPm51bV9zdXBwbGllcywgcmFkLT5z
dXBwbGllcyk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCWlmIChyYWQtPnJlc2V0KSB7
CisJCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChyYWQtPnJlc2V0LCAxKTsKKwkJdXNsZWVwX3Jh
bmdlKDMwMDAsIDUwMDApOworCQlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAocmFkLT5yZXNldCwg
MCk7CisJCXVzbGVlcF9yYW5nZSgxODAwMCwgMjAwMDApOworCX0KKworCXJhZC0+cHJlcGFyZWQg
PSB0cnVlOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgcmFkX3BhbmVsX3VucHJlcGFy
ZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgcmFkX3BhbmVsICpyYWQgPSB0
b19yYWRfcGFuZWwocGFuZWwpOworCWludCByZXQ7CisKKwlpZiAoIXJhZC0+cHJlcGFyZWQpCisJ
CXJldHVybiAwOworCisJLyoKKwkgKiBSaWdodCBhZnRlciBhc3NlcnRpbmcgdGhlIHJlc2V0LCB3
ZSBuZWVkIHRvIHJlbGVhc2UgaXQsIHNvIHRoYXQgdGhlCisJICogdG91Y2ggZHJpdmVyIGNhbiBo
YXZlIGFuIGFjdGl2ZSBjb25uZWN0aW9uIHdpdGggdGhlIHRvdWNoIGNvbnRyb2xsZXIKKwkgKiBl
dmVuIGFmdGVyIHRoZSBkaXNwbGF5IGlzIHR1cm5lZCBvZmYuCisJICovCisJaWYgKHJhZC0+cmVz
ZXQpIHsKKwkJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKHJhZC0+cmVzZXQsIDEpOworCQl1c2xl
ZXBfcmFuZ2UoMTUwMDAsIDE3MDAwKTsKKwkJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKHJhZC0+
cmVzZXQsIDApOworCX0KKworCXJldCA9IHJlZ3VsYXRvcl9idWxrX2Rpc2FibGUocmFkLT5udW1f
c3VwcGxpZXMsIHJhZC0+c3VwcGxpZXMpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwly
YWQtPnByZXBhcmVkID0gZmFsc2U7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCByYWRf
cGFuZWxfZW5hYmxlKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCByYWRfcGFu
ZWwgKnJhZCA9IHRvX3JhZF9wYW5lbChwYW5lbCk7CisJc3RydWN0IG1pcGlfZHNpX2RldmljZSAq
ZHNpID0gcmFkLT5kc2k7CisJc3RydWN0IGRldmljZSAqZGV2ID0gJmRzaS0+ZGV2OworCWludCBj
b2xvcl9mb3JtYXQgPSBjb2xvcl9mb3JtYXRfZnJvbV9kc2lfZm9ybWF0KGRzaS0+Zm9ybWF0KTsK
KwlpbnQgcmV0OworCisJaWYgKHJhZC0+ZW5hYmxlZCkKKwkJcmV0dXJuIDA7CisKKwlkc2ktPm1v
ZGVfZmxhZ3MgfD0gTUlQSV9EU0lfTU9ERV9MUE07CisKKwlyZXQgPSByYWRfcGFuZWxfcHVzaF9j
bWRfbGlzdChkc2kpOworCWlmIChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFp
bGVkIHRvIHNlbmQgTUNTICglZClcbiIsIHJldCk7CisJCWdvdG8gZmFpbDsKKwl9CisKKwkvKiBT
ZWxlY3QgVXNlciBDb21tYW5kIFNldCB0YWJsZSAoQ01EMSkgKi8KKwlyZXQgPSBtaXBpX2RzaV9n
ZW5lcmljX3dyaXRlKGRzaSwgKHU4W10peyBXUk1BVUNDVFIsIDB4MDAgfSwgMik7CisJaWYgKHJl
dCA8IDApCisJCWdvdG8gZmFpbDsKKworCS8qIFNvZnR3YXJlIHJlc2V0ICovCisJcmV0ID0gbWlw
aV9kc2lfZGNzX3NvZnRfcmVzZXQoZHNpKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VS
Uk9SKGRldiwgIkZhaWxlZCB0byBkbyBTb2Z0d2FyZSBSZXNldCAoJWQpXG4iLCByZXQpOworCQln
b3RvIGZhaWw7CisJfQorCisJdXNsZWVwX3JhbmdlKDE1MDAwLCAxNzAwMCk7CisKKwkvKiBTZXQg
RFNJIG1vZGUgKi8KKwlyZXQgPSBtaXBpX2RzaV9nZW5lcmljX3dyaXRlKGRzaSwgKHU4W10peyAw
eEMyLCAweDBCIH0sIDIpOworCWlmIChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZGV2LCAi
RmFpbGVkIHRvIHNldCBEU0kgbW9kZSAoJWQpXG4iLCByZXQpOworCQlnb3RvIGZhaWw7CisJfQor
CS8qIFNldCB0ZWFyIE9OICovCisJcmV0ID0gbWlwaV9kc2lfZGNzX3NldF90ZWFyX29uKGRzaSwg
TUlQSV9EU0lfRENTX1RFQVJfTU9ERV9WQkxBTkspOworCWlmIChyZXQgPCAwKSB7CisJCURSTV9E
RVZfRVJST1IoZGV2LCAiRmFpbGVkIHRvIHNldCB0ZWFyIE9OICglZClcbiIsIHJldCk7CisJCWdv
dG8gZmFpbDsKKwl9CisJLyogU2V0IHRlYXIgc2NhbmxpbmUgKi8KKwlyZXQgPSBtaXBpX2RzaV9k
Y3Nfc2V0X3RlYXJfc2NhbmxpbmUoZHNpLCAweDM4MCk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJN
X0RFVl9FUlJPUihkZXYsICJGYWlsZWQgdG8gc2V0IHRlYXIgc2NhbmxpbmUgKCVkKVxuIiwgcmV0
KTsKKwkJZ290byBmYWlsOworCX0KKwkvKiBTZXQgcGl4ZWwgZm9ybWF0ICovCisJcmV0ID0gbWlw
aV9kc2lfZGNzX3NldF9waXhlbF9mb3JtYXQoZHNpLCBjb2xvcl9mb3JtYXQpOworCURSTV9ERVZf
REVCVUdfRFJJVkVSKGRldiwgIkludGVyZmFjZSBjb2xvciBmb3JtYXQgc2V0IHRvIDB4JXhcbiIs
CisJCQkgICAgIGNvbG9yX2Zvcm1hdCk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RFVl9FUlJP
UihkZXYsICJGYWlsZWQgdG8gc2V0IHBpeGVsIGZvcm1hdCAoJWQpXG4iLCByZXQpOworCQlnb3Rv
IGZhaWw7CisJfQorCS8qIEV4aXQgc2xlZXAgbW9kZSAqLworCXJldCA9IG1pcGlfZHNpX2Rjc19l
eGl0X3NsZWVwX21vZGUoZHNpKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRl
diwgIkZhaWxlZCB0byBleGl0IHNsZWVwIG1vZGUgKCVkKVxuIiwgcmV0KTsKKwkJZ290byBmYWls
OworCX0KKworCXVzbGVlcF9yYW5nZSg1MDAwLCA3MDAwKTsKKworCXJldCA9IG1pcGlfZHNpX2Rj
c19zZXRfZGlzcGxheV9vbihkc2kpOworCWlmIChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1Io
ZGV2LCAiRmFpbGVkIHRvIHNldCBkaXNwbGF5IE9OICglZClcbiIsIHJldCk7CisJCWdvdG8gZmFp
bDsKKwl9CisKKwliYWNrbGlnaHRfZW5hYmxlKHJhZC0+YmFja2xpZ2h0KTsKKworCXJhZC0+ZW5h
YmxlZCA9IHRydWU7CisKKwlyZXR1cm4gMDsKKworZmFpbDoKKwlncGlvZF9zZXRfdmFsdWVfY2Fu
c2xlZXAocmFkLT5yZXNldCwgMSk7CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IHJh
ZF9wYW5lbF9kaXNhYmxlKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCByYWRf
cGFuZWwgKnJhZCA9IHRvX3JhZF9wYW5lbChwYW5lbCk7CisJc3RydWN0IG1pcGlfZHNpX2Rldmlj
ZSAqZHNpID0gcmFkLT5kc2k7CisJc3RydWN0IGRldmljZSAqZGV2ID0gJmRzaS0+ZGV2OworCWlu
dCByZXQ7CisKKwlpZiAoIXJhZC0+ZW5hYmxlZCkKKwkJcmV0dXJuIDA7CisKKwlkc2ktPm1vZGVf
ZmxhZ3MgfD0gTUlQSV9EU0lfTU9ERV9MUE07CisKKwliYWNrbGlnaHRfZGlzYWJsZShyYWQtPmJh
Y2tsaWdodCk7CisKKwl1c2xlZXBfcmFuZ2UoMTAwMDAsIDEyMDAwKTsKKworCXJldCA9IG1pcGlf
ZHNpX2Rjc19zZXRfZGlzcGxheV9vZmYoZHNpKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVW
X0VSUk9SKGRldiwgIkZhaWxlZCB0byBzZXQgZGlzcGxheSBPRkYgKCVkKVxuIiwgcmV0KTsKKwkJ
cmV0dXJuIHJldDsKKwl9CisKKwl1c2xlZXBfcmFuZ2UoNTAwMCwgMTAwMDApOworCisJcmV0ID0g
bWlwaV9kc2lfZGNzX2VudGVyX3NsZWVwX21vZGUoZHNpKTsKKwlpZiAocmV0IDwgMCkgeworCQlE
Uk1fREVWX0VSUk9SKGRldiwgIkZhaWxlZCB0byBlbnRlciBzbGVlcCBtb2RlICglZClcbiIsIHJl
dCk7CisJCXJldHVybiByZXQ7CisJfQorCisJcmFkLT5lbmFibGVkID0gZmFsc2U7CisKKwlyZXR1
cm4gMDsKK30KKworc3RhdGljIGludCByYWRfcGFuZWxfZ2V0X21vZGVzKHN0cnVjdCBkcm1fcGFu
ZWwgKnBhbmVsKQoreworCXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IgPSBwYW5lbC0+
Y29ubmVjdG9yOworCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlOworCisJbW9kZSA9IGRy
bV9tb2RlX2R1cGxpY2F0ZShwYW5lbC0+ZHJtLCAmZGVmYXVsdF9tb2RlKTsKKwlpZiAoIW1vZGUp
IHsKKwkJRFJNX0RFVl9FUlJPUihwYW5lbC0+ZGV2LCAiZmFpbGVkIHRvIGFkZCBtb2RlICV1eCV1
eEAldVxuIiwKKwkJCSAgICAgIGRlZmF1bHRfbW9kZS5oZGlzcGxheSwgZGVmYXVsdF9tb2RlLnZk
aXNwbGF5LAorCQkJICAgICAgZGVmYXVsdF9tb2RlLnZyZWZyZXNoKTsKKwkJcmV0dXJuIC1FTk9N
RU07CisJfQorCisJZHJtX21vZGVfc2V0X25hbWUobW9kZSk7CisJbW9kZS0+dHlwZSA9IERSTV9N
T0RFX1RZUEVfRFJJVkVSIHwgRFJNX01PREVfVFlQRV9QUkVGRVJSRUQ7CisJZHJtX21vZGVfcHJv
YmVkX2FkZChwYW5lbC0+Y29ubmVjdG9yLCBtb2RlKTsKKworCWNvbm5lY3Rvci0+ZGlzcGxheV9p
bmZvLndpZHRoX21tID0gbW9kZS0+d2lkdGhfbW07CisJY29ubmVjdG9yLT5kaXNwbGF5X2luZm8u
aGVpZ2h0X21tID0gbW9kZS0+aGVpZ2h0X21tOworCWNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLmJ1
c19mbGFncyA9IHJhZF9idXNfZmxhZ3M7CisKKwlkcm1fZGlzcGxheV9pbmZvX3NldF9idXNfZm9y
bWF0cygmY29ubmVjdG9yLT5kaXNwbGF5X2luZm8sCisJCQkJCSByYWRfYnVzX2Zvcm1hdHMsCisJ
CQkJCSBBUlJBWV9TSVpFKHJhZF9idXNfZm9ybWF0cykpOworCXJldHVybiAxOworfQorCitzdGF0
aWMgaW50IHJhZF9ibF9nZXRfYnJpZ2h0bmVzcyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmwp
Cit7CisJc3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpID0gYmxfZ2V0X2RhdGEoYmwpOworCXN0
cnVjdCByYWRfcGFuZWwgKnJhZCA9IG1pcGlfZHNpX2dldF9kcnZkYXRhKGRzaSk7CisJdTE2IGJy
aWdodG5lc3M7CisJaW50IHJldDsKKworCWlmICghcmFkLT5wcmVwYXJlZCkKKwkJcmV0dXJuIDA7
CisKKwlkc2ktPm1vZGVfZmxhZ3MgJj0gfk1JUElfRFNJX01PREVfTFBNOworCisJcmV0ID0gbWlw
aV9kc2lfZGNzX2dldF9kaXNwbGF5X2JyaWdodG5lc3MoZHNpLCAmYnJpZ2h0bmVzcyk7CisJaWYg
KHJldCA8IDApCisJCXJldHVybiByZXQ7CisKKwlibC0+cHJvcHMuYnJpZ2h0bmVzcyA9IGJyaWdo
dG5lc3M7CisKKwlyZXR1cm4gYnJpZ2h0bmVzcyAmIDB4ZmY7Cit9CisKK3N0YXRpYyBpbnQgcmFk
X2JsX3VwZGF0ZV9zdGF0dXMoc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJsKQoreworCXN0cnVj
dCBtaXBpX2RzaV9kZXZpY2UgKmRzaSA9IGJsX2dldF9kYXRhKGJsKTsKKwlzdHJ1Y3QgcmFkX3Bh
bmVsICpyYWQgPSBtaXBpX2RzaV9nZXRfZHJ2ZGF0YShkc2kpOworCWludCByZXQgPSAwOworCisJ
aWYgKCFyYWQtPnByZXBhcmVkKQorCQlyZXR1cm4gMDsKKworCWRzaS0+bW9kZV9mbGFncyAmPSB+
TUlQSV9EU0lfTU9ERV9MUE07CisKKwlyZXQgPSBtaXBpX2RzaV9kY3Nfc2V0X2Rpc3BsYXlfYnJp
Z2h0bmVzcyhkc2ksIGJsLT5wcm9wcy5icmlnaHRuZXNzKTsKKwlpZiAocmV0IDwgMCkKKwkJcmV0
dXJuIHJldDsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGJhY2tsaWdo
dF9vcHMgcmFkX2JsX29wcyA9IHsKKwkudXBkYXRlX3N0YXR1cyA9IHJhZF9ibF91cGRhdGVfc3Rh
dHVzLAorCS5nZXRfYnJpZ2h0bmVzcyA9IHJhZF9ibF9nZXRfYnJpZ2h0bmVzcywKK307CisKK3N0
YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3BhbmVsX2Z1bmNzIHJhZF9wYW5lbF9mdW5jcyA9IHsKKwku
cHJlcGFyZSA9IHJhZF9wYW5lbF9wcmVwYXJlLAorCS51bnByZXBhcmUgPSByYWRfcGFuZWxfdW5w
cmVwYXJlLAorCS5lbmFibGUgPSByYWRfcGFuZWxfZW5hYmxlLAorCS5kaXNhYmxlID0gcmFkX3Bh
bmVsX2Rpc2FibGUsCisJLmdldF9tb2RlcyA9IHJhZF9wYW5lbF9nZXRfbW9kZXMsCit9OworCitz
dGF0aWMgY29uc3QgY2hhciAqIGNvbnN0IHJhZF9zdXBwbHlfbmFtZXNbXSA9IHsKKwkidjNwMyIs
CisJInYxcDgiLAorfTsKKworc3RhdGljIGludCByYWRfaW5pdF9yZWd1bGF0b3JzKHN0cnVjdCBy
YWRfcGFuZWwgKnJhZCkKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmcmFkLT5kc2ktPmRldjsK
KwlpbnQgaTsKKworCXJhZC0+bnVtX3N1cHBsaWVzID0gQVJSQVlfU0laRShyYWRfc3VwcGx5X25h
bWVzKTsKKwlyYWQtPnN1cHBsaWVzID0gZGV2bV9rY2FsbG9jKGRldiwgcmFkLT5udW1fc3VwcGxp
ZXMsCisJCQkJICAgICBzaXplb2YoKnJhZC0+c3VwcGxpZXMpLCBHRlBfS0VSTkVMKTsKKwlpZiAo
IXJhZC0+c3VwcGxpZXMpCisJCXJldHVybiAtRU5PTUVNOworCisJZm9yIChpID0gMDsgaSA8IHJh
ZC0+bnVtX3N1cHBsaWVzOyBpKyspCisJCXJhZC0+c3VwcGxpZXNbaV0uc3VwcGx5ID0gcmFkX3N1
cHBseV9uYW1lc1tpXTsKKworCXJldHVybiBkZXZtX3JlZ3VsYXRvcl9idWxrX2dldChkZXYsIHJh
ZC0+bnVtX3N1cHBsaWVzLCByYWQtPnN1cHBsaWVzKTsKK307CisKK3N0YXRpYyBpbnQgcmFkX3Bh
bmVsX3Byb2JlKHN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRzaSkKK3sKKwlzdHJ1Y3QgZGV2aWNl
ICpkZXYgPSAmZHNpLT5kZXY7CisJc3RydWN0IGRldmljZV9ub2RlICpucCA9IGRldi0+b2Zfbm9k
ZTsKKwlzdHJ1Y3QgcmFkX3BhbmVsICpwYW5lbDsKKwlzdHJ1Y3QgYmFja2xpZ2h0X3Byb3BlcnRp
ZXMgYmxfcHJvcHM7CisJaW50IHJldDsKKwl1MzIgdmlkZW9fbW9kZTsKKworCXBhbmVsID0gZGV2
bV9remFsbG9jKCZkc2ktPmRldiwgc2l6ZW9mKCpwYW5lbCksIEdGUF9LRVJORUwpOworCWlmICgh
cGFuZWwpCisJCXJldHVybiAtRU5PTUVNOworCisJbWlwaV9kc2lfc2V0X2RydmRhdGEoZHNpLCBw
YW5lbCk7CisKKwlwYW5lbC0+ZHNpID0gZHNpOworCisJZHNpLT5mb3JtYXQgPSBNSVBJX0RTSV9G
TVRfUkdCODg4OworCWRzaS0+bW9kZV9mbGFncyA9ICBNSVBJX0RTSV9NT0RFX1ZJREVPX0hTRSB8
IE1JUElfRFNJX01PREVfVklERU8gfAorCQkJICAgTUlQSV9EU0lfQ0xPQ0tfTk9OX0NPTlRJTlVP
VVM7CisKKwlyZXQgPSBvZl9wcm9wZXJ0eV9yZWFkX3UzMihucCwgInZpZGVvLW1vZGUiLCAmdmlk
ZW9fbW9kZSk7CisJaWYgKCFyZXQpIHsKKwkJc3dpdGNoICh2aWRlb19tb2RlKSB7CisJCWNhc2Ug
MDoKKwkJCS8qIGJ1cnN0IG1vZGUgKi8KKwkJCWRzaS0+bW9kZV9mbGFncyB8PSBNSVBJX0RTSV9N
T0RFX1ZJREVPX0JVUlNUOworCQkJYnJlYWs7CisJCWNhc2UgMToKKwkJCS8qIG5vbi1idXJzdCBt
b2RlIHdpdGggc3luYyBldmVudCAqLworCQkJYnJlYWs7CisJCWNhc2UgMjoKKwkJCS8qIG5vbi1i
dXJzdCBtb2RlIHdpdGggc3luYyBwdWxzZSAqLworCQkJZHNpLT5tb2RlX2ZsYWdzIHw9IE1JUElf
RFNJX01PREVfVklERU9fU1lOQ19QVUxTRTsKKwkJCWJyZWFrOworCQlkZWZhdWx0OgorCQkJZGV2
X3dhcm4oZGV2LCAiaW52YWxpZCB2aWRlbyBtb2RlICVkXG4iLCB2aWRlb19tb2RlKTsKKwkJCWJy
ZWFrOworCQl9CisJfQorCisJcmV0ID0gb2ZfcHJvcGVydHlfcmVhZF91MzIobnAsICJkc2ktbGFu
ZXMiLCAmZHNpLT5sYW5lcyk7CisJaWYgKHJldCkgeworCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0
byBnZXQgZHNpLWxhbmVzIHByb3BlcnR5ICglZClcbiIsIHJldCk7CisJCXJldHVybiByZXQ7CisJ
fQorCisJcGFuZWwtPnJlc2V0ID0gZGV2bV9ncGlvZF9nZXRfb3B0aW9uYWwoZGV2LCAicmVzZXQi
LCBHUElPRF9PVVRfTE9XKTsKKwlpZiAoSVNfRVJSKHBhbmVsLT5yZXNldCkpCisJCXJldHVybiBQ
VFJfRVJSKHBhbmVsLT5yZXNldCk7CisKKwltZW1zZXQoJmJsX3Byb3BzLCAwLCBzaXplb2YoYmxf
cHJvcHMpKTsKKwlibF9wcm9wcy50eXBlID0gQkFDS0xJR0hUX1JBVzsKKwlibF9wcm9wcy5icmln
aHRuZXNzID0gMjU1OworCWJsX3Byb3BzLm1heF9icmlnaHRuZXNzID0gMjU1OworCisJcGFuZWwt
PmJhY2tsaWdodCA9IGRldm1fYmFja2xpZ2h0X2RldmljZV9yZWdpc3RlcihkZXYsIGRldl9uYW1l
KGRldiksCisJCQkJCQkJICBkZXYsIGRzaSwgJnJhZF9ibF9vcHMsCisJCQkJCQkJICAmYmxfcHJv
cHMpOworCWlmIChJU19FUlIocGFuZWwtPmJhY2tsaWdodCkpIHsKKwkJcmV0ID0gUFRSX0VSUihw
YW5lbC0+YmFja2xpZ2h0KTsKKwkJZGV2X2VycihkZXYsICJGYWlsZWQgdG8gcmVnaXN0ZXIgYmFj
a2xpZ2h0ICglZClcbiIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJcmV0ID0gcmFkX2lu
aXRfcmVndWxhdG9ycyhwYW5lbCk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCWRybV9w
YW5lbF9pbml0KCZwYW5lbC0+cGFuZWwpOworCXBhbmVsLT5wYW5lbC5mdW5jcyA9ICZyYWRfcGFu
ZWxfZnVuY3M7CisJcGFuZWwtPnBhbmVsLmRldiA9IGRldjsKKwlkZXZfc2V0X2RydmRhdGEoZGV2
LCBwYW5lbCk7CisKKwlyZXQgPSBkcm1fcGFuZWxfYWRkKCZwYW5lbC0+cGFuZWwpOworCWlmIChy
ZXQpCisJCXJldHVybiByZXQ7CisKKwlyZXQgPSBtaXBpX2RzaV9hdHRhY2goZHNpKTsKKwlpZiAo
cmV0KQorCQlkcm1fcGFuZWxfcmVtb3ZlKCZwYW5lbC0+cGFuZWwpOworCisJcmV0dXJuIHJldDsK
K30KKworc3RhdGljIGludCByYWRfcGFuZWxfcmVtb3ZlKHN0cnVjdCBtaXBpX2RzaV9kZXZpY2Ug
KmRzaSkKK3sKKwlzdHJ1Y3QgcmFkX3BhbmVsICpyYWQgPSBtaXBpX2RzaV9nZXRfZHJ2ZGF0YShk
c2kpOworCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZkc2ktPmRldjsKKwlpbnQgcmV0OworCisJcmV0
ID0gbWlwaV9kc2lfZGV0YWNoKGRzaSk7CisJaWYgKHJldCkKKwkJRFJNX0RFVl9FUlJPUihkZXYs
ICJGYWlsZWQgdG8gZGV0YWNoIGZyb20gaG9zdCAoJWQpXG4iLAorCQkJICAgICAgcmV0KTsKKwor
CWRybV9wYW5lbF9yZW1vdmUoJnJhZC0+cGFuZWwpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRp
YyB2b2lkIHJhZF9wYW5lbF9zaHV0ZG93bihzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCit7
CisJc3RydWN0IHJhZF9wYW5lbCAqcmFkID0gbWlwaV9kc2lfZ2V0X2RydmRhdGEoZHNpKTsKKwor
CXJhZF9wYW5lbF9kaXNhYmxlKCZyYWQtPnBhbmVsKTsKKwlyYWRfcGFuZWxfdW5wcmVwYXJlKCZy
YWQtPnBhbmVsKTsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgcmFkX29m
X21hdGNoW10gPSB7CisJeyAuY29tcGF0aWJsZSA9ICJyYXlkaXVtLHJtNjcxOTEiLCB9LAorCXsg
Lyogc2VudGluZWwgKi8gfQorfTsKK01PRFVMRV9ERVZJQ0VfVEFCTEUob2YsIHJhZF9vZl9tYXRj
aCk7CisKK3N0YXRpYyBzdHJ1Y3QgbWlwaV9kc2lfZHJpdmVyIHJhZF9wYW5lbF9kcml2ZXIgPSB7
CisJLmRyaXZlciA9IHsKKwkJLm5hbWUgPSAicGFuZWwtcmF5ZGl1bS1ybTY3MTkxIiwKKwkJLm9m
X21hdGNoX3RhYmxlID0gcmFkX29mX21hdGNoLAorCX0sCisJLnByb2JlID0gcmFkX3BhbmVsX3By
b2JlLAorCS5yZW1vdmUgPSByYWRfcGFuZWxfcmVtb3ZlLAorCS5zaHV0ZG93biA9IHJhZF9wYW5l
bF9zaHV0ZG93biwKK307Cittb2R1bGVfbWlwaV9kc2lfZHJpdmVyKHJhZF9wYW5lbF9kcml2ZXIp
OworCitNT0RVTEVfQVVUSE9SKCJSb2JlcnQgQ2hpcmFzIDxyb2JlcnQuY2hpcmFzQG54cC5jb20+
Iik7CitNT0RVTEVfREVTQ1JJUFRJT04oIkRSTSBEcml2ZXIgZm9yIFJheWRpdW0gUk02NzE5MSBN
SVBJIERTSSBwYW5lbCIpOworTU9EVUxFX0xJQ0VOU0UoIkdQTCB2MiIpOwotLSAKMi43LjQKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBt
YWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
