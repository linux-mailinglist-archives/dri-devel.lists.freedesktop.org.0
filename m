Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D16047310E
	for <lists+dri-devel@lfdr.de>; Wed, 24 Jul 2019 16:06:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AA6E56E599;
	Wed, 24 Jul 2019 14:06:12 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7832F88BE3;
 Wed, 24 Jul 2019 14:06:11 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: andrzej.p) with ESMTPSA id EC2AE283CFE
From: Andrzej Pietrasiewicz <andrzej.p@collabora.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v5 23/24] drm/radeon: Provide ddc symlink in connector sysfs
 directory
Date: Wed, 24 Jul 2019 15:59:45 +0200
Message-Id: <0c9783d97ecbbf98cecc5b9b93823e6b3da68b57.1563960855.git.andrzej.p@collabora.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <cover.1563960855.git.andrzej.p@collabora.com>
References: <cover.1563960855.git.andrzej.p@collabora.com>
In-Reply-To: <cover.1563960855.git.andrzej.p@collabora.com>
References: <cover.1563960855.git.andrzej.p@collabora.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Sam Ravnborg <sam@ravnborg.org>, Neil Armstrong <narmstrong@baylibre.com>,
 David Airlie <airlied@linux.ie>, Douglas Anderson <dianders@chromium.org>,
 Thierry Reding <thierry.reding@gmail.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Armijn Hemel <armijn@tjaldur.nl>, kernel@collabora.com,
 linux-samsung-soc@vger.kernel.org, linux-rockchip@lists.infradead.org,
 Vincent Abriou <vincent.abriou@st.com>, Krzysztof Kozlowski <krzk@kernel.org>,
 Jonathan Hunter <jonathanh@nvidia.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>,
 Kukjin Kim <kgene@kernel.org>, NXP Linux Team <linux-imx@nxp.com>,
 Dave Airlie <airlied@redhat.com>, intel-gfx@lists.freedesktop.org,
 freedreno@lists.freedesktop.org, linux-tegra@vger.kernel.org,
 Jonas Karlman <jonas@kwiboo.se>, linux-arm-msm@vger.kernel.org,
 Alexios Zavras <alexios.zavras@intel.com>,
 Mamta Shukla <mamtashukla555@gmail.com>, linux-mediatek@lists.infradead.org,
 Jyri Sarha <jsarha@ti.com>, Rodrigo Vivi <rodrigo.vivi@intel.com>,
 Matthias Brugger <matthias.bgg@gmail.com>,
 Thomas Gleixner <tglx@linutronix.de>, Sean Paul <sean@poorly.run>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 linux-arm-kernel@lists.infradead.org, Enrico Weigelt <info@metux.net>,
 Jernej Skrabec <jernej.skrabec@siol.net>, amd-gfx@lists.freedesktop.org,
 Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Thomas Zimmermann <tzimmermann@suse.de>,
 Seung-Woo Kim <sw0312.kim@samsung.com>, linux-kernel@vger.kernel.org,
 Todor Tomov <todor.tomov@linaro.org>,
 Kyungmin Park <kyungmin.park@samsung.com>, Huang Rui <ray.huang@amd.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Alex Deucher <alexander.deucher@amd.com>, Shawn Guo <shawnguo@kernel.org>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Gerd Hoffmann <kraxel@redhat.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VXNlIHRoZSBkZGMgcG9pbnRlciBwcm92aWRlZCBieSB0aGUgZ2VuZXJpYyBjb25uZWN0b3IuCgpT
aWduZWQtb2ZmLWJ5OiBBbmRyemVqIFBpZXRyYXNpZXdpY3ogPGFuZHJ6ZWoucEBjb2xsYWJvcmEu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2Nvbm5lY3RvcnMuYyB8IDE0
MSArKysrKysrKysrKysrKystLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAxMDUgaW5zZXJ0aW9ucygr
KSwgMzYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9y
YWRlb25fY29ubmVjdG9ycy5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fY29ubmVj
dG9ycy5jCmluZGV4IGM2MGQxYTQ0ZDIyYS4uMWI3NDNlZGIzZmJlIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9jb25uZWN0b3JzLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3JhZGVvbi9yYWRlb25fY29ubmVjdG9ycy5jCkBAIC0xOTQ3LDE3ICsxOTQ3LDIxIEBAIHJh
ZGVvbl9hZGRfYXRvbV9jb25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJcmFkZW9u
X2Nvbm5lY3Rvci0+Y29uX3ByaXYgPSByYWRlb25fZGlnX2Nvbm5lY3RvcjsKIAkJaWYgKGkyY19i
dXMtPnZhbGlkKSB7CiAJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9uX2kyY19s
b29rdXAocmRldiwgaTJjX2J1cyk7Ci0JCQlpZiAocmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cykK
KwkJCWlmIChyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzKSB7CiAJCQkJaGFzX2F1eCA9IHRydWU7
Ci0JCQllbHNlCisJCQkJY29ubmVjdG9yLT5kZGMgPSAmcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1
cy0+YWRhcHRlcjsKKwkJCX0gZWxzZSB7CiAJCQkJRFJNX0VSUk9SKCJEUDogRmFpbGVkIHRvIGFz
c2lnbiBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJfQogCQl9
CiAJCXN3aXRjaCAoY29ubmVjdG9yX3R5cGUpIHsKIAkJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1Jf
VkdBOgogCQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9EVklBOgogCQlkZWZhdWx0OgotCQkJZHJt
X2Nvbm5lY3Rvcl9pbml0KGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsCi0JCQkJCSAgICZy
YWRlb25fZHBfY29ubmVjdG9yX2Z1bmNzLCBjb25uZWN0b3JfdHlwZSk7CisJCQlkcm1fY29ubmVj
dG9yX2luaXRfd2l0aF9kZGMoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwKKwkJCQkJCSAg
ICAmcmFkZW9uX2RwX2Nvbm5lY3Rvcl9mdW5jcywKKwkJCQkJCSAgICBjb25uZWN0b3JfdHlwZSwK
KwkJCQkJCSAgICByYWRlb25fY29ubmVjdG9yLT5iYXNlLmRkYyk7CiAJCQlkcm1fY29ubmVjdG9y
X2hlbHBlcl9hZGQoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsCiAJCQkJCQkgJnJhZGVvbl9kcF9j
b25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJCWNvbm5lY3Rvci0+aW50ZXJsYWNlX2FsbG93ZWQg
PSB0cnVlOwpAQCAtMTk3OSw4ICsxOTgzLDEwIEBAIHJhZGVvbl9hZGRfYXRvbV9jb25uZWN0b3Io
c3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfSERNSUE6
CiAJCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0hETUlCOgogCQljYXNlIERSTV9NT0RFX0NPTk5F
Q1RPUl9EaXNwbGF5UG9ydDoKLQkJCWRybV9jb25uZWN0b3JfaW5pdChkZXYsICZyYWRlb25fY29u
bmVjdG9yLT5iYXNlLAotCQkJCQkgICAmcmFkZW9uX2RwX2Nvbm5lY3Rvcl9mdW5jcywgY29ubmVj
dG9yX3R5cGUpOworCQkJZHJtX2Nvbm5lY3Rvcl9pbml0X3dpdGhfZGRjKGRldiwgJnJhZGVvbl9j
b25uZWN0b3ItPmJhc2UsCisJCQkJCQkgICAgJnJhZGVvbl9kcF9jb25uZWN0b3JfZnVuY3MsCisJ
CQkJCQkgICAgY29ubmVjdG9yX3R5cGUsCisJCQkJCQkgICAgcmFkZW9uX2Nvbm5lY3Rvci0+YmFz
ZS5kZGMpOwogCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5i
YXNlLAogCQkJCQkJICZyYWRlb25fZHBfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlkcm1f
b2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZS5iYXNlLApAQCAt
MjAyNyw4ICsyMDMzLDEwIEBAIHJhZGVvbl9hZGRfYXRvbV9jb25uZWN0b3Ioc3RydWN0IGRybV9k
ZXZpY2UgKmRldiwKIAkJCWJyZWFrOwogCQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9MVkRTOgog
CQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9lRFA6Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2
LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwKLQkJCQkJICAgJnJhZGVvbl9sdmRzX2JyaWRnZV9j
b25uZWN0b3JfZnVuY3MsIGNvbm5lY3Rvcl90eXBlKTsKKwkJCWRybV9jb25uZWN0b3JfaW5pdF93
aXRoX2RkYyhkZXYsICZyYWRlb25fY29ubmVjdG9yLT5iYXNlLAorCQkJCQkJICAgICZyYWRlb25f
bHZkc19icmlkZ2VfY29ubmVjdG9yX2Z1bmNzLAorCQkJCQkJICAgIGNvbm5lY3Rvcl90eXBlLAor
CQkJCQkJICAgIHJhZGVvbl9jb25uZWN0b3ItPmJhc2UuZGRjKTsKIAkJCWRybV9jb25uZWN0b3Jf
aGVscGVyX2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwKIAkJCQkJCSAmcmFkZW9uX2RwX2Nv
bm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHkoJnJh
ZGVvbl9jb25uZWN0b3ItPmJhc2UuYmFzZSwKQEAgLTIwNDIsMTMgKzIwNTAsMTggQEAgcmFkZW9u
X2FkZF9hdG9tX2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCX0gZWxzZSB7CiAJ
CXN3aXRjaCAoY29ubmVjdG9yX3R5cGUpIHsKIAkJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfVkdB
OgotCQkJZHJtX2Nvbm5lY3Rvcl9pbml0KGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZy
YWRlb25fdmdhX2Nvbm5lY3Rvcl9mdW5jcywgY29ubmVjdG9yX3R5cGUpOwotCQkJZHJtX2Nvbm5l
Y3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX3ZnYV9jb25u
ZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJCWlmIChpMmNfYnVzLT52YWxpZCkgewogCQkJCXJhZGVv
bl9jb25uZWN0b3ItPmRkY19idXMgPSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVzKTsK
IAkJCQlpZiAoIXJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMpCiAJCQkJCURSTV9FUlJPUigiVkdB
OiBGYWlsZWQgdG8gYXNzaWduIGRkYyBidXMhIENoZWNrIGRtZXNnIGZvciBpMmMgZXJyb3JzLlxu
Iik7CisJCQkJZWxzZQorCQkJCQljb25uZWN0b3ItPmRkYyA9ICZyYWRlb25fY29ubmVjdG9yLT5k
ZGNfYnVzLT5hZGFwdGVyOwogCQkJfQorCQkJZHJtX2Nvbm5lY3Rvcl9pbml0X3dpdGhfZGRjKGRl
diwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsCisJCQkJCQkgICAgJnJhZGVvbl92Z2FfY29ubmVj
dG9yX2Z1bmNzLAorCQkJCQkJICAgIGNvbm5lY3Rvcl90eXBlLAorCQkJCQkJICAgIHJhZGVvbl9j
b25uZWN0b3ItPmJhc2UuZGRjKTsKKwkJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmcmFkZW9u
X2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl92Z2FfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJ
CQlyYWRlb25fY29ubmVjdG9yLT5kYWNfbG9hZF9kZXRlY3QgPSB0cnVlOwogCQkJZHJtX29iamVj
dF9hdHRhY2hfcHJvcGVydHkoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UuYmFzZSwKIAkJCQkJCSAg
ICAgIHJkZXYtPm1vZGVfaW5mby5sb2FkX2RldGVjdF9wcm9wZXJ0eSwKQEAgLTIwNjcsMTMgKzIw
ODAsMTggQEAgcmFkZW9uX2FkZF9hdG9tX2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LAogCQkJY29ubmVjdG9yLT5kb3VibGVzY2FuX2FsbG93ZWQgPSB0cnVlOwogCQkJYnJlYWs7CiAJ
CWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0RWSUE6Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2
LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl92Z2FfY29ubmVjdG9yX2Z1bmNzLCBj
b25uZWN0b3JfdHlwZSk7Ci0JCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25u
ZWN0b3ItPmJhc2UsICZyYWRlb25fdmdhX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQkJaWYg
KGkyY19idXMtPnZhbGlkKSB7CiAJCQkJcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cyA9IHJhZGVv
bl9pMmNfbG9va3VwKHJkZXYsIGkyY19idXMpOwogCQkJCWlmICghcmFkZW9uX2Nvbm5lY3Rvci0+
ZGRjX2J1cykKIAkJCQkJRFJNX0VSUk9SKCJEVklBOiBGYWlsZWQgdG8gYXNzaWduIGRkYyBidXMh
IENoZWNrIGRtZXNnIGZvciBpMmMgZXJyb3JzLlxuIik7CisJCQkJZWxzZQorCQkJCQljb25uZWN0
b3ItPmRkYyA9ICZyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzLT5hZGFwdGVyOwogCQkJfQorCQkJ
ZHJtX2Nvbm5lY3Rvcl9pbml0X3dpdGhfZGRjKGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2Us
CisJCQkJCQkgICAgJnJhZGVvbl92Z2FfY29ubmVjdG9yX2Z1bmNzLAorCQkJCQkJICAgIGNvbm5l
Y3Rvcl90eXBlLAorCQkJCQkJICAgIHJhZGVvbl9jb25uZWN0b3ItPmJhc2UuZGRjKTsKKwkJCWRy
bV9jb25uZWN0b3JfaGVscGVyX2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl92
Z2FfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlyYWRlb25fY29ubmVjdG9yLT5kYWNfbG9h
ZF9kZXRlY3QgPSB0cnVlOwogCQkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHkoJnJhZGVvbl9j
b25uZWN0b3ItPmJhc2UuYmFzZSwKIAkJCQkJCSAgICAgIHJkZXYtPm1vZGVfaW5mby5sb2FkX2Rl
dGVjdF9wcm9wZXJ0eSwKQEAgLTIwOTgsMTMgKzIxMTYsMTggQEAgcmFkZW9uX2FkZF9hdG9tX2Nv
bm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCWdvdG8gZmFpbGVkOwogCQkJcmFk
ZW9uX2RpZ19jb25uZWN0b3ItPmlncF9sYW5lX2luZm8gPSBpZ3BfbGFuZV9pbmZvOwogCQkJcmFk
ZW9uX2Nvbm5lY3Rvci0+Y29uX3ByaXYgPSByYWRlb25fZGlnX2Nvbm5lY3RvcjsKLQkJCWRybV9j
b25uZWN0b3JfaW5pdChkZXYsICZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2R2aV9j
b25uZWN0b3JfZnVuY3MsIGNvbm5lY3Rvcl90eXBlKTsKLQkJCWRybV9jb25uZWN0b3JfaGVscGVy
X2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9kdmlfY29ubmVjdG9yX2hlbHBl
cl9mdW5jcyk7CiAJCQlpZiAoaTJjX2J1cy0+dmFsaWQpIHsKIAkJCQlyYWRlb25fY29ubmVjdG9y
LT5kZGNfYnVzID0gcmFkZW9uX2kyY19sb29rdXAocmRldiwgaTJjX2J1cyk7CiAJCQkJaWYgKCFy
YWRlb25fY29ubmVjdG9yLT5kZGNfYnVzKQogCQkJCQlEUk1fRVJST1IoIkRWSTogRmFpbGVkIHRv
IGFzc2lnbiBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJCWVs
c2UKKwkJCQkJY29ubmVjdG9yLT5kZGMgPSAmcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cy0+YWRh
cHRlcjsKIAkJCX0KKwkJCWRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhkZXYsICZyYWRlb25f
Y29ubmVjdG9yLT5iYXNlLAorCQkJCQkJICAgICZyYWRlb25fZHZpX2Nvbm5lY3Rvcl9mdW5jcywK
KwkJCQkJCSAgICBjb25uZWN0b3JfdHlwZSwKKwkJCQkJCSAgICByYWRlb25fY29ubmVjdG9yLT5i
YXNlLmRkYyk7CisJCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25uZWN0b3It
PmJhc2UsICZyYWRlb25fZHZpX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQkJc3VicGl4ZWxf
b3JkZXIgPSBTdWJQaXhlbEhvcml6b250YWxSR0I7CiAJCQlkcm1fb2JqZWN0X2F0dGFjaF9wcm9w
ZXJ0eSgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZS5iYXNlLAogCQkJCQkJICAgICAgcmRldi0+bW9k
ZV9pbmZvLmNvaGVyZW50X21vZGVfcHJvcGVydHksCkBAIC0yMTU1LDEzICsyMTc4LDE4IEBAIHJh
ZGVvbl9hZGRfYXRvbV9jb25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJCQlnb3Rv
IGZhaWxlZDsKIAkJCXJhZGVvbl9kaWdfY29ubmVjdG9yLT5pZ3BfbGFuZV9pbmZvID0gaWdwX2xh
bmVfaW5mbzsKIAkJCXJhZGVvbl9jb25uZWN0b3ItPmNvbl9wcml2ID0gcmFkZW9uX2RpZ19jb25u
ZWN0b3I7Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFz
ZSwgJnJhZGVvbl9kdmlfY29ubmVjdG9yX2Z1bmNzLCBjb25uZWN0b3JfdHlwZSk7Ci0JCQlkcm1f
Y29ubmVjdG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fZHZp
X2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQkJaWYgKGkyY19idXMtPnZhbGlkKSB7CiAJCQkJ
cmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cyA9IHJhZGVvbl9pMmNfbG9va3VwKHJkZXYsIGkyY19i
dXMpOwogCQkJCWlmICghcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cykKIAkJCQkJRFJNX0VSUk9S
KCJIRE1JOiBGYWlsZWQgdG8gYXNzaWduIGRkYyBidXMhIENoZWNrIGRtZXNnIGZvciBpMmMgZXJy
b3JzLlxuIik7CisJCQkJZWxzZQorCQkJCQljb25uZWN0b3ItPmRkYyA9ICZyYWRlb25fY29ubmVj
dG9yLT5kZGNfYnVzLT5hZGFwdGVyOwogCQkJfQorCQkJZHJtX2Nvbm5lY3Rvcl9pbml0X3dpdGhf
ZGRjKGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsCisJCQkJCQkgICAgJnJhZGVvbl9kdmlf
Y29ubmVjdG9yX2Z1bmNzLAorCQkJCQkJICAgIGNvbm5lY3Rvcl90eXBlLAorCQkJCQkJICAgIHJh
ZGVvbl9jb25uZWN0b3ItPmJhc2UuZGRjKTsKKwkJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgm
cmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9kdmlfY29ubmVjdG9yX2hlbHBlcl9mdW5j
cyk7CiAJCQlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFz
ZS5iYXNlLAogCQkJCQkJICAgICAgcmRldi0+bW9kZV9pbmZvLmNvaGVyZW50X21vZGVfcHJvcGVy
dHksCiAJCQkJCQkgICAgICAxKTsKQEAgLTIyMDUsMTUgKzIyMzMsMjAgQEAgcmFkZW9uX2FkZF9h
dG9tX2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCWdvdG8gZmFpbGVkOwog
CQkJcmFkZW9uX2RpZ19jb25uZWN0b3ItPmlncF9sYW5lX2luZm8gPSBpZ3BfbGFuZV9pbmZvOwog
CQkJcmFkZW9uX2Nvbm5lY3Rvci0+Y29uX3ByaXYgPSByYWRlb25fZGlnX2Nvbm5lY3RvcjsKLQkJ
CWRybV9jb25uZWN0b3JfaW5pdChkZXYsICZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9u
X2RwX2Nvbm5lY3Rvcl9mdW5jcywgY29ubmVjdG9yX3R5cGUpOwotCQkJZHJtX2Nvbm5lY3Rvcl9o
ZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2RwX2Nvbm5lY3Rvcl9o
ZWxwZXJfZnVuY3MpOwogCQkJaWYgKGkyY19idXMtPnZhbGlkKSB7CiAJCQkJcmFkZW9uX2Nvbm5l
Y3Rvci0+ZGRjX2J1cyA9IHJhZGVvbl9pMmNfbG9va3VwKHJkZXYsIGkyY19idXMpOwotCQkJCWlm
IChyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzKQorCQkJCWlmIChyYWRlb25fY29ubmVjdG9yLT5k
ZGNfYnVzKSB7CiAJCQkJCWhhc19hdXggPSB0cnVlOwotCQkJCWVsc2UKKwkJCQkJY29ubmVjdG9y
LT5kZGMgPSAmcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cy0+YWRhcHRlcjsKKwkJCQl9IGVsc2Ug
ewogCQkJCQlEUk1fRVJST1IoIkRQOiBGYWlsZWQgdG8gYXNzaWduIGRkYyBidXMhIENoZWNrIGRt
ZXNnIGZvciBpMmMgZXJyb3JzLlxuIik7CisJCQkJfQogCQkJfQorCQkJZHJtX2Nvbm5lY3Rvcl9p
bml0X3dpdGhfZGRjKGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsCisJCQkJCQkgICAgJnJh
ZGVvbl9kcF9jb25uZWN0b3JfZnVuY3MsCisJCQkJCQkgICAgY29ubmVjdG9yX3R5cGUsCisJCQkJ
CQkgICAgcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZS5kZGMpOworCQkJZHJtX2Nvbm5lY3Rvcl9oZWxw
ZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2RwX2Nvbm5lY3Rvcl9oZWxw
ZXJfZnVuY3MpOwogCQkJc3VicGl4ZWxfb3JkZXIgPSBTdWJQaXhlbEhvcml6b250YWxSR0I7CiAJ
CQlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZS5iYXNl
LAogCQkJCQkJICAgICAgcmRldi0+bW9kZV9pbmZvLmNvaGVyZW50X21vZGVfcHJvcGVydHksCkBA
IC0yMjU1LDE1ICsyMjg4LDIwIEBAIHJhZGVvbl9hZGRfYXRvbV9jb25uZWN0b3Ioc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwKIAkJCQlnb3RvIGZhaWxlZDsKIAkJCXJhZGVvbl9kaWdfY29ubmVjdG9y
LT5pZ3BfbGFuZV9pbmZvID0gaWdwX2xhbmVfaW5mbzsKIAkJCXJhZGVvbl9jb25uZWN0b3ItPmNv
bl9wcml2ID0gcmFkZW9uX2RpZ19jb25uZWN0b3I7Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2
LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9lZHBfY29ubmVjdG9yX2Z1bmNzLCBj
b25uZWN0b3JfdHlwZSk7Ci0JCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25u
ZWN0b3ItPmJhc2UsICZyYWRlb25fZHBfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlpZiAo
aTJjX2J1cy0+dmFsaWQpIHsKIAkJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9u
X2kyY19sb29rdXAocmRldiwgaTJjX2J1cyk7Ci0JCQkJaWYgKHJhZGVvbl9jb25uZWN0b3ItPmRk
Y19idXMpCisJCQkJaWYgKHJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMpIHsKIAkJCQkJaGFzX2F1
eCA9IHRydWU7Ci0JCQkJZWxzZQorCQkJCQljb25uZWN0b3ItPmRkYyA9ICZyYWRlb25fY29ubmVj
dG9yLT5kZGNfYnVzLT5hZGFwdGVyOworCQkJCX0gZWxzZSB7CiAJCQkJCURSTV9FUlJPUigiRFA6
IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sgZG1lc2cgZm9yIGkyYyBlcnJvcnMuXG4i
KTsKKwkJCQl9CiAJCQl9CisJCQlkcm1fY29ubmVjdG9yX2luaXRfd2l0aF9kZGMoZGV2LCAmcmFk
ZW9uX2Nvbm5lY3Rvci0+YmFzZSwKKwkJCQkJCSAgICAmcmFkZW9uX2VkcF9jb25uZWN0b3JfZnVu
Y3MsCisJCQkJCQkgICAgY29ubmVjdG9yX3R5cGUsCisJCQkJCQkgICAgcmFkZW9uX2Nvbm5lY3Rv
ci0+YmFzZS5kZGMpOworCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVj
dG9yLT5iYXNlLCAmcmFkZW9uX2RwX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQkJZHJtX29i
amVjdF9hdHRhY2hfcHJvcGVydHkoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UuYmFzZSwKIAkJCQkJ
CSAgICAgIGRldi0+bW9kZV9jb25maWcuc2NhbGluZ19tb2RlX3Byb3BlcnR5LAogCQkJCQkJICAg
ICAgRFJNX01PREVfU0NBTEVfRlVMTFNDUkVFTik7CkBAIC0yMjc0LDcgKzIzMTIsMTAgQEAgcmFk
ZW9uX2FkZF9hdG9tX2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQljYXNlIERS
TV9NT0RFX0NPTk5FQ1RPUl9TVklERU86CiAJCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0NvbXBv
c2l0ZToKIAkJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfOVBpbkRJTjoKLQkJCWRybV9jb25uZWN0
b3JfaW5pdChkZXYsICZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX3R2X2Nvbm5lY3Rv
cl9mdW5jcywgY29ubmVjdG9yX3R5cGUpOworCQkJZHJtX2Nvbm5lY3Rvcl9pbml0X3dpdGhfZGRj
KGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsCisJCQkJCQkgICAgJnJhZGVvbl90dl9jb25u
ZWN0b3JfZnVuY3MsCisJCQkJCQkgICAgY29ubmVjdG9yX3R5cGUsCisJCQkJCQkgICAgcmFkZW9u
X2Nvbm5lY3Rvci0+YmFzZS5kZGMpOwogCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRl
b25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX3R2X2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwog
CQkJcmFkZW9uX2Nvbm5lY3Rvci0+ZGFjX2xvYWRfZGV0ZWN0ID0gdHJ1ZTsKIAkJCWRybV9vYmpl
Y3RfYXR0YWNoX3Byb3BlcnR5KCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLmJhc2UsCkBAIC0yMjk0
LDEzICsyMzM1LDE4IEBAIHJhZGVvbl9hZGRfYXRvbV9jb25uZWN0b3Ioc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwKIAkJCQlnb3RvIGZhaWxlZDsKIAkJCXJhZGVvbl9kaWdfY29ubmVjdG9yLT5pZ3Bf
bGFuZV9pbmZvID0gaWdwX2xhbmVfaW5mbzsKIAkJCXJhZGVvbl9jb25uZWN0b3ItPmNvbl9wcml2
ID0gcmFkZW9uX2RpZ19jb25uZWN0b3I7Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2LCAmcmFk
ZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9sdmRzX2Nvbm5lY3Rvcl9mdW5jcywgY29ubmVj
dG9yX3R5cGUpOwotCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9y
LT5iYXNlLCAmcmFkZW9uX2x2ZHNfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlpZiAoaTJj
X2J1cy0+dmFsaWQpIHsKIAkJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9uX2ky
Y19sb29rdXAocmRldiwgaTJjX2J1cyk7CiAJCQkJaWYgKCFyYWRlb25fY29ubmVjdG9yLT5kZGNf
YnVzKQogCQkJCQlEUk1fRVJST1IoIkxWRFM6IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hl
Y2sgZG1lc2cgZm9yIGkyYyBlcnJvcnMuXG4iKTsKKwkJCQllbHNlCisJCQkJCWNvbm5lY3Rvci0+
ZGRjID0gJnJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMtPmFkYXB0ZXI7CiAJCQl9CisJCQlkcm1f
Y29ubmVjdG9yX2luaXRfd2l0aF9kZGMoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwKKwkJ
CQkJCSAgICAmcmFkZW9uX2x2ZHNfY29ubmVjdG9yX2Z1bmNzLAorCQkJCQkJICAgIGNvbm5lY3Rv
cl90eXBlLAorCQkJCQkJICAgIHJhZGVvbl9jb25uZWN0b3ItPmJhc2UuZGRjKTsKKwkJCWRybV9j
b25uZWN0b3JfaGVscGVyX2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9sdmRz
X2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHko
JnJhZGVvbl9jb25uZWN0b3ItPmJhc2UuYmFzZSwKIAkJCQkJCSAgICAgIGRldi0+bW9kZV9jb25m
aWcuc2NhbGluZ19tb2RlX3Byb3BlcnR5LAogCQkJCQkJICAgICAgRFJNX01PREVfU0NBTEVfRlVM
TFNDUkVFTik7CkBAIC0yMzc4LDEzICsyNDI0LDE4IEBAIHJhZGVvbl9hZGRfbGVnYWN5X2Nvbm5l
Y3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCiAJc3dpdGNoIChjb25uZWN0b3JfdHlwZSkg
ewogCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX1ZHQToKLQkJZHJtX2Nvbm5lY3Rvcl9pbml0KGRl
diwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fdmdhX2Nvbm5lY3Rvcl9mdW5jcywg
Y29ubmVjdG9yX3R5cGUpOwotCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25u
ZWN0b3ItPmJhc2UsICZyYWRlb25fdmdhX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQlpZiAo
aTJjX2J1cy0+dmFsaWQpIHsKIAkJCXJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMgPSByYWRlb25f
aTJjX2xvb2t1cChyZGV2LCBpMmNfYnVzKTsKIAkJCWlmICghcmFkZW9uX2Nvbm5lY3Rvci0+ZGRj
X2J1cykKIAkJCQlEUk1fRVJST1IoIlZHQTogRmFpbGVkIHRvIGFzc2lnbiBkZGMgYnVzISBDaGVj
ayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJZWxzZQorCQkJCWNvbm5lY3Rvci0+ZGRj
ID0gJnJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMtPmFkYXB0ZXI7CiAJCX0KKwkJZHJtX2Nvbm5l
Y3Rvcl9pbml0X3dpdGhfZGRjKGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsCisJCQkJCSAg
ICAmcmFkZW9uX3ZnYV9jb25uZWN0b3JfZnVuY3MsCisJCQkJCSAgICBjb25uZWN0b3JfdHlwZSwK
KwkJCQkJICAgIHJhZGVvbl9jb25uZWN0b3ItPmJhc2UuZGRjKTsKKwkJZHJtX2Nvbm5lY3Rvcl9o
ZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX3ZnYV9jb25uZWN0b3Jf
aGVscGVyX2Z1bmNzKTsKIAkJcmFkZW9uX2Nvbm5lY3Rvci0+ZGFjX2xvYWRfZGV0ZWN0ID0gdHJ1
ZTsKIAkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHkoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2Uu
YmFzZSwKIAkJCQkJICAgICAgcmRldi0+bW9kZV9pbmZvLmxvYWRfZGV0ZWN0X3Byb3BlcnR5LApA
QCAtMjM5NSwxMyArMjQ0NiwxOCBAQCByYWRlb25fYWRkX2xlZ2FjeV9jb25uZWN0b3Ioc3RydWN0
IGRybV9kZXZpY2UgKmRldiwKIAkJY29ubmVjdG9yLT5kb3VibGVzY2FuX2FsbG93ZWQgPSB0cnVl
OwogCQlicmVhazsKIAljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9EVklBOgotCQlkcm1fY29ubmVj
dG9yX2luaXQoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl92Z2FfY29ubmVj
dG9yX2Z1bmNzLCBjb25uZWN0b3JfdHlwZSk7Ci0JCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgm
cmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl92Z2FfY29ubmVjdG9yX2hlbHBlcl9mdW5j
cyk7CiAJCWlmIChpMmNfYnVzLT52YWxpZCkgewogCQkJcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1
cyA9IHJhZGVvbl9pMmNfbG9va3VwKHJkZXYsIGkyY19idXMpOwogCQkJaWYgKCFyYWRlb25fY29u
bmVjdG9yLT5kZGNfYnVzKQogCQkJCURSTV9FUlJPUigiRFZJQTogRmFpbGVkIHRvIGFzc2lnbiBk
ZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJZWxzZQorCQkJCWNv
bm5lY3Rvci0+ZGRjID0gJnJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMtPmFkYXB0ZXI7CiAJCX0K
KwkJZHJtX2Nvbm5lY3Rvcl9pbml0X3dpdGhfZGRjKGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJh
c2UsCisJCQkJCSAgICAmcmFkZW9uX3ZnYV9jb25uZWN0b3JfZnVuY3MsCisJCQkJCSAgICBjb25u
ZWN0b3JfdHlwZSwKKwkJCQkJICAgIHJhZGVvbl9jb25uZWN0b3ItPmJhc2UuZGRjKTsKKwkJZHJt
X2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX3Zn
YV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJcmFkZW9uX2Nvbm5lY3Rvci0+ZGFjX2xvYWRf
ZGV0ZWN0ID0gdHJ1ZTsKIAkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHkoJnJhZGVvbl9jb25u
ZWN0b3ItPmJhc2UuYmFzZSwKIAkJCQkJICAgICAgcmRldi0+bW9kZV9pbmZvLmxvYWRfZGV0ZWN0
X3Byb3BlcnR5LApAQCAtMjQxMywxMyArMjQ2OSwxOCBAQCByYWRlb25fYWRkX2xlZ2FjeV9jb25u
ZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJYnJlYWs7CiAJY2FzZSBEUk1fTU9ERV9D
T05ORUNUT1JfRFZJSToKIAljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9EVklEOgotCQlkcm1fY29u
bmVjdG9yX2luaXQoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9kdmlfY29u
bmVjdG9yX2Z1bmNzLCBjb25uZWN0b3JfdHlwZSk7Ci0JCWRybV9jb25uZWN0b3JfaGVscGVyX2Fk
ZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9kdmlfY29ubmVjdG9yX2hlbHBlcl9m
dW5jcyk7CiAJCWlmIChpMmNfYnVzLT52YWxpZCkgewogCQkJcmFkZW9uX2Nvbm5lY3Rvci0+ZGRj
X2J1cyA9IHJhZGVvbl9pMmNfbG9va3VwKHJkZXYsIGkyY19idXMpOwogCQkJaWYgKCFyYWRlb25f
Y29ubmVjdG9yLT5kZGNfYnVzKQogCQkJCURSTV9FUlJPUigiRFZJOiBGYWlsZWQgdG8gYXNzaWdu
IGRkYyBidXMhIENoZWNrIGRtZXNnIGZvciBpMmMgZXJyb3JzLlxuIik7CisJCQllbHNlCisJCQkJ
Y29ubmVjdG9yLT5kZGMgPSAmcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cy0+YWRhcHRlcjsKIAkJ
fQorCQlkcm1fY29ubmVjdG9yX2luaXRfd2l0aF9kZGMoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+
YmFzZSwKKwkJCQkJICAgICZyYWRlb25fZHZpX2Nvbm5lY3Rvcl9mdW5jcywKKwkJCQkJICAgIGNv
bm5lY3Rvcl90eXBlLAorCQkJCQkgICAgcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZS5kZGMpOworCQlk
cm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25f
ZHZpX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQlpZiAoY29ubmVjdG9yX3R5cGUgPT0gRFJN
X01PREVfQ09OTkVDVE9SX0RWSUkpIHsKIAkJCXJhZGVvbl9jb25uZWN0b3ItPmRhY19sb2FkX2Rl
dGVjdCA9IHRydWU7CiAJCQlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmcmFkZW9uX2Nvbm5l
Y3Rvci0+YmFzZS5iYXNlLApAQCAtMjQzNiw3ICsyNDk3LDEwIEBAIHJhZGVvbl9hZGRfbGVnYWN5
X2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCWNhc2UgRFJNX01PREVfQ09OTkVD
VE9SX1NWSURFTzoKIAljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9Db21wb3NpdGU6CiAJY2FzZSBE
Uk1fTU9ERV9DT05ORUNUT1JfOVBpbkRJTjoKLQkJZHJtX2Nvbm5lY3Rvcl9pbml0KGRldiwgJnJh
ZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fdHZfY29ubmVjdG9yX2Z1bmNzLCBjb25uZWN0
b3JfdHlwZSk7CisJCWRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhkZXYsICZyYWRlb25fY29u
bmVjdG9yLT5iYXNlLAorCQkJCQkgICAgJnJhZGVvbl90dl9jb25uZWN0b3JfZnVuY3MsCisJCQkJ
CSAgICBjb25uZWN0b3JfdHlwZSwKKwkJCQkJICAgIHJhZGVvbl9jb25uZWN0b3ItPmJhc2UuZGRj
KTsKIAkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAm
cmFkZW9uX3R2X2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQlyYWRlb25fY29ubmVjdG9yLT5k
YWNfbG9hZF9kZXRlY3QgPSB0cnVlOwogCQkvKiBSUzQwMCxSQzQxMCxSUzQ4MCBjaGlwc2V0IHNl
ZW1zIHRvIHJlcG9ydCBhIGxvdApAQCAtMjQ1OCwxMyArMjUyMiwxOCBAQCByYWRlb25fYWRkX2xl
Z2FjeV9jb25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJY29ubmVjdG9yLT5kb3Vi
bGVzY2FuX2FsbG93ZWQgPSBmYWxzZTsKIAkJYnJlYWs7CiAJY2FzZSBEUk1fTU9ERV9DT05ORUNU
T1JfTFZEUzoKLQkJZHJtX2Nvbm5lY3Rvcl9pbml0KGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJh
c2UsICZyYWRlb25fbHZkc19jb25uZWN0b3JfZnVuY3MsIGNvbm5lY3Rvcl90eXBlKTsKLQkJZHJt
X2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2x2
ZHNfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCWlmIChpMmNfYnVzLT52YWxpZCkgewogCQkJ
cmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cyA9IHJhZGVvbl9pMmNfbG9va3VwKHJkZXYsIGkyY19i
dXMpOwogCQkJaWYgKCFyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzKQogCQkJCURSTV9FUlJPUigi
TFZEUzogRmFpbGVkIHRvIGFzc2lnbiBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9y
cy5cbiIpOworCQkJZWxzZQorCQkJCWNvbm5lY3Rvci0+ZGRjID0gJnJhZGVvbl9jb25uZWN0b3It
PmRkY19idXMtPmFkYXB0ZXI7CiAJCX0KKwkJZHJtX2Nvbm5lY3Rvcl9pbml0X3dpdGhfZGRjKGRl
diwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsCisJCQkJCSAgICAmcmFkZW9uX2x2ZHNfY29ubmVj
dG9yX2Z1bmNzLAorCQkJCQkgICAgY29ubmVjdG9yX3R5cGUsCisJCQkJCSAgICByYWRlb25fY29u
bmVjdG9yLT5iYXNlLmRkYyk7CisJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmcmFkZW9uX2Nv
bm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9sdmRzX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQlk
cm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZS5iYXNlLAog
CQkJCQkgICAgICBkZXYtPm1vZGVfY29uZmlnLnNjYWxpbmdfbW9kZV9wcm9wZXJ0eSwKIAkJCQkJ
ICAgICAgRFJNX01PREVfU0NBTEVfRlVMTFNDUkVFTik7Ci0tIAoyLjE3LjEKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
