Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E21328CAE9
	for <lists+dri-devel@lfdr.de>; Wed, 14 Aug 2019 07:52:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 08D056E25C;
	Wed, 14 Aug 2019 05:52:41 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x549.google.com (mail-pg1-x549.google.com
 [IPv6:2607:f8b0:4864:20::549])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A1C596E25A
 for <dri-devel@lists.freedesktop.org>; Wed, 14 Aug 2019 05:52:37 +0000 (UTC)
Received: by mail-pg1-x549.google.com with SMTP id a9so7102325pga.16
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 22:52:37 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=XH0l4QZOYDxcrm9Hnsl1KHTC8uCLv15fuHSj+Wi/xGg=;
 b=sxTulPy57B94A64kM3FZjRh0iWu2R7sdZ2vuiX1lRLCv92wpYvsVq9z+g0JgOTiJL2
 bZgkXN3NkUCeucDfQ171nEl54ru+FcFUTFkxio6XSND3nNwtpj+I6wsQYvPklxTqKd5g
 /t+CGnvUvdxzXhx19r4UW7aKVZUEJDFv9xxzPg5wmf7qum3yqurnyq6Tg+Pl54PofSJR
 MUPqBfVOpzXjyUcKwIZej6ggspmRAnCLPcVfzNNRZ7Ucmnfo22ar8Pq3AAdbCSscAuVU
 10GYBaWm49jwshHe4rTspBFBI8Cbr35Kr1ECPirp9RWKjFdIDM3cI5Hka5+FgeOqtWeR
 ZZFQ==
X-Gm-Message-State: APjAAAW71w8U3j1ncUbvnbnnR5cocOaVjjJARRyU11kBcA3Ido83hc6g
 27CG7engkHonhp2BixILTJ8g0DKWqBo+KJSBYClKkw==
X-Google-Smtp-Source: APXvYqwgrxSIbb5dBpoHNWBMdetvd9dAqeO26uoNP9wv3lvY01jYA/BMBj/cbnc4N3T7eSSTaKA+LlPcCb1p55CtBte05w==
X-Received: by 2002:a63:d002:: with SMTP id z2mr38307878pgf.364.1565761956413; 
 Tue, 13 Aug 2019 22:52:36 -0700 (PDT)
Date: Tue, 13 Aug 2019 22:51:00 -0700
In-Reply-To: <20190814055108.214253-1-brendanhiggins@google.com>
Message-Id: <20190814055108.214253-11-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190814055108.214253-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.23.0.rc1.153.gdeed80330f-goog
Subject: [PATCH v13 10/18] kunit: test: add tests for kunit test abort
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=XH0l4QZOYDxcrm9Hnsl1KHTC8uCLv15fuHSj+Wi/xGg=;
 b=mOacBRYcWmgRqVSzKikKLDjg7zhpP3PUemmPGKRVjzO2ew5z2Zkj/Hk65RJ6uGIrwP
 QUBosLRENTFXf6RiCidPY997rbpJ7ruAoQNrbzfm0vf9N2ZpGx2+F1sHQF+3RDwpMpD3
 5wBbsQ3AezYqjLn3BiaERyLlQV/SUS65t9t4LtdHmuAjTxStJYjjEiCWlckftDbuPqZw
 b3QHmnJRpTF9BzumU2YfjW8EhJz9MwvE0MYpgG/rhI7mgq9QxskVLZknhVHRypjqa7rH
 GlM5NHuUb7IOioytoRjf6rT/3RscnQY1AOxXmZMGlcCZuP0Qay74HRIZ2v5P19bGVjbH
 ur7g==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIEtVbml0IHRlc3RzIGZvciB0aGUgS1VuaXQgdGVzdCBhYm9ydCBtZWNoYW5pc20gKHNlZSBw
cmVjZWRpbmcKY29tbWl0KS4gQWRkIHRlc3RzIGJvdGggZm9yIGdlbmVyYWwgdHJ5IGNhdGNoIG1l
Y2hhbmlzbSBhcyB3ZWxsIGFzCm5vbi1hcmNoaXRlY3R1cmUgc3BlY2lmaWMgbWVjaGFuaXNtLgoK
U2lnbmVkLW9mZi1ieTogQnJlbmRhbiBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29t
PgpSZXZpZXdlZC1ieTogR3JlZyBLcm9haC1IYXJ0bWFuIDxncmVna2hAbGludXhmb3VuZGF0aW9u
Lm9yZz4KUmV2aWV3ZWQtYnk6IExvZ2FuIEd1bnRob3JwZSA8bG9nYW5nQGRlbHRhdGVlLmNvbT4K
UmV2aWV3ZWQtYnk6IFN0ZXBoZW4gQm95ZCA8c2JveWRAa2VybmVsLm9yZz4KLS0tCiBrdW5pdC9N
YWtlZmlsZSAgICB8ICAgMyArLQoga3VuaXQvdGVzdC10ZXN0LmMgfCAxMDYgKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCAxMDgg
aW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGt1bml0L3Rl
c3QtdGVzdC5jCgpkaWZmIC0tZ2l0IGEva3VuaXQvTWFrZWZpbGUgYi9rdW5pdC9NYWtlZmlsZQpp
bmRleCBjOTE3NmM5YzU3OGM2Li43NjlkOTQwMmI1ZDNhIDEwMDY0NAotLS0gYS9rdW5pdC9NYWtl
ZmlsZQorKysgYi9rdW5pdC9NYWtlZmlsZQpAQCAtMyw2ICszLDcgQEAgb2JqLSQoQ09ORklHX0tV
TklUKSArPQkJCXRlc3QubyBcCiAJCQkJCWFzc2VydC5vIFwKIAkJCQkJdHJ5LWNhdGNoLm8KIAot
b2JqLSQoQ09ORklHX0tVTklUX1RFU1QpICs9CQlzdHJpbmctc3RyZWFtLXRlc3Qubworb2JqLSQo
Q09ORklHX0tVTklUX1RFU1QpICs9CQl0ZXN0LXRlc3QubyBcCisJCQkJCXN0cmluZy1zdHJlYW0t
dGVzdC5vCiAKIG9iai0kKENPTkZJR19LVU5JVF9FWEFNUExFX1RFU1QpICs9CWV4YW1wbGUtdGVz
dC5vCmRpZmYgLS1naXQgYS9rdW5pdC90ZXN0LXRlc3QuYyBiL2t1bml0L3Rlc3QtdGVzdC5jCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMDAuLjA2ZDM0ZDM2YjEwMzgKLS0t
IC9kZXYvbnVsbAorKysgYi9rdW5pdC90ZXN0LXRlc3QuYwpAQCAtMCwwICsxLDEwNiBAQAorLy8g
U1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKKy8qCisgKiBLVW5pdCB0ZXN0IGZvciBj
b3JlIHRlc3QgaW5mcmFzdHJ1Y3R1cmUuCisgKgorICogQ29weXJpZ2h0IChDKSAyMDE5LCBHb29n
bGUgTExDLgorICogQXV0aG9yOiBCcmVuZGFuIEhpZ2dpbnMgPGJyZW5kYW5oaWdnaW5zQGdvb2ds
ZS5jb20+CisgKi8KKyNpbmNsdWRlIDxrdW5pdC90ZXN0Lmg+CisKK3N0cnVjdCBrdW5pdF90cnlf
Y2F0Y2hfdGVzdF9jb250ZXh0IHsKKwlzdHJ1Y3Qga3VuaXRfdHJ5X2NhdGNoICp0cnlfY2F0Y2g7
CisJYm9vbCBmdW5jdGlvbl9jYWxsZWQ7Cit9OworCitzdGF0aWMgdm9pZCBrdW5pdF90ZXN0X3N1
Y2Nlc3NmdWxfdHJ5KHZvaWQgKmRhdGEpCit7CisJc3RydWN0IGt1bml0ICp0ZXN0ID0gZGF0YTsK
KwlzdHJ1Y3Qga3VuaXRfdHJ5X2NhdGNoX3Rlc3RfY29udGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsK
KworCWN0eC0+ZnVuY3Rpb25fY2FsbGVkID0gdHJ1ZTsKK30KKworc3RhdGljIHZvaWQga3VuaXRf
dGVzdF9ub19jYXRjaCh2b2lkICpkYXRhKQoreworCXN0cnVjdCBrdW5pdCAqdGVzdCA9IGRhdGE7
CisKKwlLVU5JVF9GQUlMKHRlc3QsICJDYXRjaCBzaG91bGQgbm90IGJlIGNhbGxlZFxuIik7Cit9
CisKK3N0YXRpYyB2b2lkIGt1bml0X3Rlc3RfdHJ5X2NhdGNoX3N1Y2Nlc3NmdWxfdHJ5X25vX2Nh
dGNoKHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdHJ5X2NhdGNoX3Rlc3Rf
Y29udGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsKKwlzdHJ1Y3Qga3VuaXRfdHJ5X2NhdGNoICp0cnlf
Y2F0Y2ggPSBjdHgtPnRyeV9jYXRjaDsKKworCWt1bml0X3RyeV9jYXRjaF9pbml0KHRyeV9jYXRj
aCwKKwkJCSAgICAgdGVzdCwKKwkJCSAgICAga3VuaXRfdGVzdF9zdWNjZXNzZnVsX3RyeSwKKwkJ
CSAgICAga3VuaXRfdGVzdF9ub19jYXRjaCk7CisJa3VuaXRfdHJ5X2NhdGNoX3J1bih0cnlfY2F0
Y2gsIHRlc3QpOworCisJS1VOSVRfRVhQRUNUX1RSVUUodGVzdCwgY3R4LT5mdW5jdGlvbl9jYWxs
ZWQpOworfQorCitzdGF0aWMgdm9pZCBrdW5pdF90ZXN0X3Vuc3VjY2Vzc2Z1bF90cnkodm9pZCAq
ZGF0YSkKK3sKKwlzdHJ1Y3Qga3VuaXQgKnRlc3QgPSBkYXRhOworCXN0cnVjdCBrdW5pdF90cnlf
Y2F0Y2hfdGVzdF9jb250ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF90cnlf
Y2F0Y2ggKnRyeV9jYXRjaCA9IGN0eC0+dHJ5X2NhdGNoOworCisJa3VuaXRfdHJ5X2NhdGNoX3Ro
cm93KHRyeV9jYXRjaCk7CisJS1VOSVRfRkFJTCh0ZXN0LCAiVGhpcyBsaW5lIHNob3VsZCBuZXZl
ciBiZSByZWFjaGVkXG4iKTsKK30KKworc3RhdGljIHZvaWQga3VuaXRfdGVzdF9jYXRjaCh2b2lk
ICpkYXRhKQoreworCXN0cnVjdCBrdW5pdCAqdGVzdCA9IGRhdGE7CisJc3RydWN0IGt1bml0X3Ry
eV9jYXRjaF90ZXN0X2NvbnRleHQgKmN0eCA9IHRlc3QtPnByaXY7CisKKwljdHgtPmZ1bmN0aW9u
X2NhbGxlZCA9IHRydWU7Cit9CisKK3N0YXRpYyB2b2lkIGt1bml0X3Rlc3RfdHJ5X2NhdGNoX3Vu
c3VjY2Vzc2Z1bF90cnlfZG9lc19jYXRjaChzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0
IGt1bml0X3RyeV9jYXRjaF90ZXN0X2NvbnRleHQgKmN0eCA9IHRlc3QtPnByaXY7CisJc3RydWN0
IGt1bml0X3RyeV9jYXRjaCAqdHJ5X2NhdGNoID0gY3R4LT50cnlfY2F0Y2g7CisKKwlrdW5pdF90
cnlfY2F0Y2hfaW5pdCh0cnlfY2F0Y2gsCisJCQkgICAgIHRlc3QsCisJCQkgICAgIGt1bml0X3Rl
c3RfdW5zdWNjZXNzZnVsX3RyeSwKKwkJCSAgICAga3VuaXRfdGVzdF9jYXRjaCk7CisJa3VuaXRf
dHJ5X2NhdGNoX3J1bih0cnlfY2F0Y2gsIHRlc3QpOworCisJS1VOSVRfRVhQRUNUX1RSVUUodGVz
dCwgY3R4LT5mdW5jdGlvbl9jYWxsZWQpOworfQorCitzdGF0aWMgaW50IGt1bml0X3RyeV9jYXRj
aF90ZXN0X2luaXQoc3RydWN0IGt1bml0ICp0ZXN0KQoreworCXN0cnVjdCBrdW5pdF90cnlfY2F0
Y2hfdGVzdF9jb250ZXh0ICpjdHg7CisKKwljdHggPSBrdW5pdF9remFsbG9jKHRlc3QsIHNpemVv
ZigqY3R4KSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFjdHgpCisJCXJldHVybiAtRU5PTUVNOworCisJ
dGVzdC0+cHJpdiA9IGN0eDsKKworCWN0eC0+dHJ5X2NhdGNoID0ga3VuaXRfa21hbGxvYyh0ZXN0
LAorCQkJCSAgICAgICBzaXplb2YoKmN0eC0+dHJ5X2NhdGNoKSwKKwkJCQkgICAgICAgR0ZQX0tF
Uk5FTCk7CisJaWYgKCFjdHgtPnRyeV9jYXRjaCkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlyZXR1
cm4gMDsKK30KKworc3RhdGljIHN0cnVjdCBrdW5pdF9jYXNlIGt1bml0X3RyeV9jYXRjaF90ZXN0
X2Nhc2VzW10gPSB7CisJS1VOSVRfQ0FTRShrdW5pdF90ZXN0X3RyeV9jYXRjaF9zdWNjZXNzZnVs
X3RyeV9ub19jYXRjaCksCisJS1VOSVRfQ0FTRShrdW5pdF90ZXN0X3RyeV9jYXRjaF91bnN1Y2Nl
c3NmdWxfdHJ5X2RvZXNfY2F0Y2gpLAorCXt9Cit9OworCitzdGF0aWMgc3RydWN0IGt1bml0X3N1
aXRlIGt1bml0X3RyeV9jYXRjaF90ZXN0X3N1aXRlID0geworCS5uYW1lID0gImt1bml0LXRyeS1j
YXRjaC10ZXN0IiwKKwkuaW5pdCA9IGt1bml0X3RyeV9jYXRjaF90ZXN0X2luaXQsCisJLnRlc3Rf
Y2FzZXMgPSBrdW5pdF90cnlfY2F0Y2hfdGVzdF9jYXNlcywKK307CitrdW5pdF90ZXN0X3N1aXRl
KGt1bml0X3RyeV9jYXRjaF90ZXN0X3N1aXRlKTsKLS0gCjIuMjMuMC5yYzEuMTUzLmdkZWVkODAz
MzBmLWdvb2cKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
