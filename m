Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id BD4D061537
	for <lists+dri-devel@lfdr.de>; Sun,  7 Jul 2019 16:22:57 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B0C8489B01;
	Sun,  7 Jul 2019 14:22:54 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.domeneshop.no (smtp.domeneshop.no
 [IPv6:2a01:5b40:0:3005::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 666C489B01
 for <dri-devel@lists.freedesktop.org>; Sun,  7 Jul 2019 14:22:53 +0000 (UTC)
Received: from 211.81-166-168.customer.lyse.net ([81.166.168.211]:61606
 helo=[192.168.10.173])
 by smtp.domeneshop.no with esmtpsa (TLS1.2:ECDHE_RSA_AES_128_GCM_SHA256:128)
 (Exim 4.84_2) (envelope-from <noralf@tronnes.org>)
 id 1hk843-00006D-59; Sun, 07 Jul 2019 16:22:51 +0200
Subject: Re: [PATCH v2 1/6] drm/client: Support unmapping of DRM client buffers
To: Thomas Zimmermann <tzimmermann@suse.de>, airlied@redhat.com,
 daniel@ffwll.ch, kraxel@redhat.com, maarten.lankhorst@linux.intel.com,
 maxime.ripard@bootlin.com, sean@poorly.run, sam@ravnborg.org,
 yc_chen@aspeedtech.com
References: <20190705092613.7621-1-tzimmermann@suse.de>
 <20190705092613.7621-2-tzimmermann@suse.de>
From: =?UTF-8?Q?Noralf_Tr=c3=b8nnes?= <noralf@tronnes.org>
Message-ID: <9fceb4af-082c-9451-c005-38ee4e4db32c@tronnes.org>
Date: Sun, 7 Jul 2019 16:22:43 +0200
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.2
MIME-Version: 1.0
In-Reply-To: <20190705092613.7621-2-tzimmermann@suse.de>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; d=tronnes.org; s=ds201810; 
 h=Content-Transfer-Encoding:Content-Type:In-Reply-To:MIME-Version:Date:Message-ID:From:References:Cc:To:Subject;
 bh=0dsM08NZisZCh0qtOGDWoPl/5siW8/dZzI6C3gf9dG4=; 
 b=Vfg99pejhFLV2jzde3HRrXo2mghLqhE5YE8BAmHMifvyMuAkLrMBGZDWAJalhXsGt4JnMRDpjdC2me6Wudlhu7pkAsGjW6m8b+wPkBhbh+/LJHWT12Rxajo5VeQKnTpMYhGYXvF2BbNBTELLV53B0zgBvjBSPjOy7leFK0vzm4QjIJTx3BUMTSX+mWHEs9fTq/MD+5zeP9ws6kRTSOXfsWWYzjaKk5e2hM6ClYHLEi0F0ingWL8ZY0WXo2lFXMV5WXfi5wD0WQqXE7AJI+Bmj7Y6fZ46BakimMcVpVb7fOQspZYb1KZLgWetUCZ8PyBm7Ok0aKpzcrE7j0UWsrOBDA==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org, virtualization@lists.linux-foundation.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

CgpEZW4gMDUuMDcuMjAxOSAxMS4yNiwgc2tyZXYgVGhvbWFzIFppbW1lcm1hbm46Cj4gRFJNIGNs
aWVudHMsIHN1Y2ggYXMgdGhlIGZiZGV2IGVtdWxhdGlvbiwgaGF2ZSB0aGVpciBidWZmZXIgb2Jq
ZWN0cwo+IG1hcHBlZCBieSBkZWZhdWx0LiBNYXBwaW5nIGEgYnVmZmVyIGltcGxpY2l0bHkgcHJl
dmVudHMgaXRzIHJlbG9jYXRpb24uCj4gSGVuY2UsIHRoZSBidWZmZXIgbWF5IHBlcm1hbmVudGx5
IGNvbnN1bWUgdmlkZW8gbWVtb3J5IHdoaWxlIGl0J3MKPiBhbGxvY2F0ZWQuIFRoaXMgaXMgYSBw
cm9ibGVtIGZvciBkcml2ZXJzIG9mIGxvdy1tZW1vcnkgZGV2aWNlcywgc3VjaCBhcwo+IGFzdCwg
bWdhZzIwMCBvciBvbGRlciBmcmFtZWJ1ZmZlciBoYXJkd2FyZSwgd2hpY2ggd2lsbCB0aGVuIG5v
dCBoYXZlCj4gZW5vdWdoIG1lbW9yeSB0byBkaXNwbGF5IG90aGVyIGNvbnRlbnQgKGUuZy4sIFgx
MSkuCj4gCj4gVGhpcyBwYXRjaCBpbnRyb2R1Y2VzIGRybV9jbGllbnRfYnVmZmVyX3ZtYXAoKSBh
bmQgX3Z1bm1hcCgpLiBJbnRlcm5hbAo+IERSTSBjbGllbnRzIGNhbiB1c2UgdGhlc2UgZnVuY3Rp
b25zIHRvIHVubWFwIGFuZCByZW1hcCBidWZmZXIgb2JqZWN0cwo+IGFzIG5lZWRlZC4KPiAKPiBU
aGVyZSdzIG5vIHJlZmVyZW5jZSBjb3VudGluZyBmb3Igdm1hcCBvcGVyYXRpb25zLiBDYWxsZXJz
IGFyZSBleHBlY3RlZAo+IHRvIGVpdGhlciBrZWVwIGJ1ZmZlcnMgbWFwcGVkIChhcyBpdCBpcyBu
b3cpLCBvciBjYWxsIHZtYXAgYW5kIHZ1bm1hcAo+IGluIHBhaXJzIGFyb3VuZCBjb2RlIHRoYXQg
YWNjZXNzZXMgdGhlIG1hcHBlZCBtZW1vcnkuCj4gCj4gdjI6Cj4gCSogcmVtb3ZlIHNldmVyYWwg
ZHVwbGljYXRlZCBOVUxMLXBvaW50ZXIgY2hlY2tzCj4gCj4gU2lnbmVkLW9mZi1ieTogVGhvbWFz
IFppbW1lcm1hbm4gPHR6aW1tZXJtYW5uQHN1c2UuZGU+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2Ry
bS9kcm1fY2xpZW50LmMgfCA2NyArKysrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0K
PiAgaW5jbHVkZS9kcm0vZHJtX2NsaWVudC5oICAgICB8ICAzICsrCj4gIDIgZmlsZXMgY2hhbmdl
ZCwgNjAgaW5zZXJ0aW9ucygrKSwgMTAgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9kcm1fY2xpZW50LmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2NsaWVudC5j
Cj4gaW5kZXggNDEwNTcyZjE0MjU3Li42NmQ4ZDY0NWFjNzkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2RybV9jbGllbnQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fY2xpZW50
LmMKPiBAQCAtMjgxLDYgKzI4MSw0MyBAQCBkcm1fY2xpZW50X2J1ZmZlcl9jcmVhdGUoc3RydWN0
IGRybV9jbGllbnRfZGV2ICpjbGllbnQsIHUzMiB3aWR0aCwgdTMyIGhlaWdodCwgdQo+ICAKPiAg
CWJ1ZmZlci0+Z2VtID0gb2JqOwo+ICAKPiArCXZhZGRyID0gZHJtX2NsaWVudF9idWZmZXJfdm1h
cChidWZmZXIpOwo+ICsJaWYgKElTX0VSUih2YWRkcikpIHsKPiArCQlyZXQgPSBQVFJfRVJSKHZh
ZGRyKTsKPiArCQlnb3RvIGVycl9kZWxldGU7Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIGJ1ZmZlcjsK
PiArCj4gK2Vycl9kZWxldGU6Cj4gKwlkcm1fY2xpZW50X2J1ZmZlcl9kZWxldGUoYnVmZmVyKTsK
PiArCj4gKwlyZXR1cm4gRVJSX1BUUihyZXQpOwo+ICt9Cj4gKwo+ICsvKioKPiArICogZHJtX2Ns
aWVudF9idWZmZXJfdm1hcCAtIE1hcCBEUk0gY2xpZW50IGJ1ZmZlciBpbnRvIGFkZHJlc3Mgc3Bh
Y2UKPiArICogQGJ1ZmZlcjogRFJNIGNsaWVudCBidWZmZXIKPiArICoKPiArICogVGhpcyBmdW5j
dGlvbiBtYXBzIGEgY2xpZW50IGJ1ZmZlciBpbnRvIGtlcm5lbCBhZGRyZXNzIHNwYWNlLiBJZiB0
aGUKPiArICogYnVmZmVyIGlzIGFscmVhZHkgbWFwcGVkLCBpdCByZXR1cm5zIHRoZSBtYXBwaW5n
J3MgYWRkcmVzcy4KPiArICoKPiArICogQ2xpZW50IGJ1ZmZlciBtYXBwaW5ncyBhcmUgbm90IHJl
Zidjb3VudGVkLiBFYWNoIGNhbGwgdG8KPiArICogZHJtX2NsaWVudF9idWZmZXJfdm1hcCgpIHNo
b3VsZCBiZSBmb2xsb3dlZCBieSBhIGNhbGwgdG8KPiArICogZHJtX2NsaWVudF9idWZmZXJfdnVu
bWFwKCk7IG9yIHRoZSBjbGllbnQgYnVmZmVyIHNob3VsZCBiZSBtYXBwZWQKPiArICogdGhyb3Vn
aG91dCBpdHMgbGlmZXRpbWUuIFRoZSBsYXR0ZXIgaXMgdGhlIGRlZmF1bHQuCj4gKyAqCj4gKyAq
IFJldHVybnM6Cj4gKyAqCVRoZSBtYXBwZWQgbWVtb3J5J3MgYWRkcmVzcwo+ICsgKi8KPiArdm9p
ZCAqCj4gK2RybV9jbGllbnRfYnVmZmVyX3ZtYXAoc3RydWN0IGRybV9jbGllbnRfYnVmZmVyICpi
dWZmZXIpCgpJIHByZWZlciB0byBoYXZlIHRoaXMgb24gb25lIGxpbmUuCgo+ICt7Cj4gKwl2b2lk
ICp2YWRkcjsKPiArCj4gKwlpZiAoYnVmZmVyLT52YWRkcikKPiArCQlyZXR1cm4gYnVmZmVyLT52
YWRkcjsKPiArCj4gIAkvKgo+ICAJICogRklYTUU6IFRoZSBkZXBlbmRlbmN5IG9uIEdFTSBoZXJl
IGlzbid0IHJlcXVpcmVkLCB3ZSBjb3VsZAo+ICAJICogY29udmVydCB0aGUgZHJpdmVyIGhhbmRs
ZSB0byBhIGRtYS1idWYgaW5zdGVhZCBhbmQgdXNlIHRoZQo+IEBAIC0yODksMjEgKzMyNiwzMSBA
QCBkcm1fY2xpZW50X2J1ZmZlcl9jcmVhdGUoc3RydWN0IGRybV9jbGllbnRfZGV2ICpjbGllbnQs
IHUzMiB3aWR0aCwgdTMyIGhlaWdodCwgdQo+ICAJICogZmRfaW5zdGFsbCBzdGVwIG91dCBvZiB0
aGUgZHJpdmVyIGJhY2tlbmQgaG9va3MsIHRvIG1ha2UgdGhhdAo+ICAJICogZmluYWwgc3RlcCBv
cHRpb25hbCBmb3IgaW50ZXJuYWwgdXNlcnMuCj4gIAkgKi8KPiAtCXZhZGRyID0gZHJtX2dlbV92
bWFwKG9iaik7Cj4gLQlpZiAoSVNfRVJSKHZhZGRyKSkgewo+IC0JCXJldCA9IFBUUl9FUlIodmFk
ZHIpOwo+IC0JCWdvdG8gZXJyX2RlbGV0ZTsKPiAtCX0KPiArCXZhZGRyID0gZHJtX2dlbV92bWFw
KGJ1ZmZlci0+Z2VtKTsKPiArCWlmIChJU19FUlIodmFkZHIpKQo+ICsJCXJldHVybiB2YWRkcjsK
PiAgCj4gIAlidWZmZXItPnZhZGRyID0gdmFkZHI7Cj4gIAo+IC0JcmV0dXJuIGJ1ZmZlcjsKPiAt
Cj4gLWVycl9kZWxldGU6Cj4gLQlkcm1fY2xpZW50X2J1ZmZlcl9kZWxldGUoYnVmZmVyKTsKPiAr
CXJldHVybiB2YWRkcjsKPiArfQo+ICtFWFBPUlRfU1lNQk9MKGRybV9jbGllbnRfYnVmZmVyX3Zt
YXApOwo+ICAKPiAtCXJldHVybiBFUlJfUFRSKHJldCk7Cj4gKy8qKgo+ICsgKiBkcm1fY2xpZW50
X2J1ZmZlcl92dW5tYXAgLSBVbm1hcCBEUk0gY2xpZW50IGJ1ZmZlcgo+ICsgKiBAYnVmZmVyOiBE
Uk0gY2xpZW50IGJ1ZmZlcgo+ICsgKgo+ICsgKiBUaGlzIGZ1bmN0aW9uIHJlbW92ZXMgYSBjbGll
bnQgYnVmZmVyJ3MgbWVtb3J5IG1tYXBwaW5nLiBUaGlzCgpzL21tYXBwaW5nL21hcHBpbmcvCgo+
ICsgKiBmdW5jdGlvbiBpcyBvbmx5IHJlcXVpcmVkIGJ5IGNsaWVudHMgdGhhdCBtYW5hZ2UgdGhl
aXIgYnVmZmVycwo+ICsgKiBieSB0aGVtc2VsdmVzLiBCeSBkZWZhdWx0LCBEUk0gY2xpZW50IGJ1
ZmZlcnMgYXJlIG1hcHBlZCB0aHJvdWdob3V0Cj4gKyAqIHRoZWlyIGVudGlyZSBsaWZldGltZS4K
PiArICovCj4gK3ZvaWQgZHJtX2NsaWVudF9idWZmZXJfdnVubWFwKHN0cnVjdCBkcm1fY2xpZW50
X2J1ZmZlciAqYnVmZmVyKQo+ICt7Cj4gKwlkcm1fZ2VtX3Z1bm1hcChidWZmZXItPmdlbSwgYnVm
ZmVyLT52YWRkcik7Cj4gKwlidWZmZXItPnZhZGRyID0gTlVMTDsKPiAgfQo+ICtFWFBPUlRfU1lN
Qk9MKGRybV9jbGllbnRfYnVmZmVyX3Z1bm1hcCk7Cj4gIAo+ICBzdGF0aWMgdm9pZCBkcm1fY2xp
ZW50X2J1ZmZlcl9ybWZiKHN0cnVjdCBkcm1fY2xpZW50X2J1ZmZlciAqYnVmZmVyKQo+ICB7Cj4g
ZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9jbGllbnQuaCBiL2luY2x1ZGUvZHJtL2RybV9j
bGllbnQuaAo+IGluZGV4IDcyZDUxZDFlOWRkOS4uZTFkYjFkOWRhMGJmIDEwMDY0NAo+IC0tLSBh
L2luY2x1ZGUvZHJtL2RybV9jbGllbnQuaAo+ICsrKyBiL2luY2x1ZGUvZHJtL2RybV9jbGllbnQu
aAo+IEBAIC0xNDksNiArMTQ5LDkgQEAgc3RydWN0IGRybV9jbGllbnRfYnVmZmVyIHsKPiAgc3Ry
dWN0IGRybV9jbGllbnRfYnVmZmVyICoKPiAgZHJtX2NsaWVudF9mcmFtZWJ1ZmZlcl9jcmVhdGUo
c3RydWN0IGRybV9jbGllbnRfZGV2ICpjbGllbnQsIHUzMiB3aWR0aCwgdTMyIGhlaWdodCwgdTMy
IGZvcm1hdCk7Cj4gIHZvaWQgZHJtX2NsaWVudF9mcmFtZWJ1ZmZlcl9kZWxldGUoc3RydWN0IGRy
bV9jbGllbnRfYnVmZmVyICpidWZmZXIpOwo+ICt2b2lkICoKPiArZHJtX2NsaWVudF9idWZmZXJf
dm1hcChzdHJ1Y3QgZHJtX2NsaWVudF9idWZmZXIgKmJ1ZmZlcik7CgpQcmVmZXIgdG8gaGF2ZSB0
aGlzIG9uIG9uZSBsaW5lLgoKUmV2aWV3ZWQtYnk6IE5vcmFsZiBUcsO4bm5lcyA8bm9yYWxmQHRy
b25uZXMub3JnPgoKPiArdm9pZCBkcm1fY2xpZW50X2J1ZmZlcl92dW5tYXAoc3RydWN0IGRybV9j
bGllbnRfYnVmZmVyICpidWZmZXIpOwo+ICAKPiAgaW50IGRybV9jbGllbnRfbW9kZXNldF9jcmVh
dGUoc3RydWN0IGRybV9jbGllbnRfZGV2ICpjbGllbnQpOwo+ICB2b2lkIGRybV9jbGllbnRfbW9k
ZXNldF9mcmVlKHN0cnVjdCBkcm1fY2xpZW50X2RldiAqY2xpZW50KTsKPiAKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
