Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A68F688ADA
	for <lists+dri-devel@lfdr.de>; Sat, 10 Aug 2019 12:45:14 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 123286E17C;
	Sat, 10 Aug 2019 10:45:11 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 42B2B6E17C;
 Sat, 10 Aug 2019 10:45:09 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 17952258-1500050 for multiple; Sat, 10 Aug 2019 11:45:06 +0100
MIME-Version: 1.0
To: Matthew Auld <matthew.auld@intel.com>, intel-gfx@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <20190809222643.23142-13-matthew.auld@intel.com>
References: <20190809222643.23142-1-matthew.auld@intel.com>
 <20190809222643.23142-13-matthew.auld@intel.com>
Message-ID: <156543390430.2301.12288579717653653829@skylake-alporthouse-com>
User-Agent: alot/0.6
Subject: Re: [PATCH v3 12/37] drm/i915/blt: support copying objects
Date: Sat, 10 Aug 2019 11:45:04 +0100
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UXVvdGluZyBNYXR0aGV3IEF1bGQgKDIwMTktMDgtMDkgMjM6MjY6MTgpCj4gK3N0cnVjdCBpOTE1
X3ZtYSAqaW50ZWxfZW1pdF92bWFfY29weV9ibHQoc3RydWN0IGludGVsX2VuZ2luZV9wb29sX25v
ZGUgKipwLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0
IGludGVsX2NvbnRleHQgKmNlLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc3RydWN0IGk5MTVfdm1hICpzcmMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzdHJ1Y3QgaTkxNV92bWEgKmRzdCkKPiArewo+ICsgICAgICAgc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBjZS0+dm0tPmk5MTU7Cj4gKyAgICAgICBjb25zdCB1
MzIgYmxvY2tfc2l6ZSA9IFMxNl9NQVggKiBQQUdFX1NJWkU7Cj4gKyAgICAgICBzdHJ1Y3QgaW50
ZWxfZW5naW5lX3Bvb2xfbm9kZSAqcG9vbDsKPiArICAgICAgIHN0cnVjdCBpOTE1X3ZtYSAqYmF0
Y2g7Cj4gKyAgICAgICB1NjQgc3JjX29mZnNldCwgZHN0X29mZnNldDsKPiArICAgICAgIHU2NCBj
b3VudDsKPiArICAgICAgIHU2NCByZW07Cj4gKyAgICAgICB1MzIgc2l6ZTsKPiArICAgICAgIHUz
MiAqY21kOwo+ICsgICAgICAgaW50IGVycjsKPiArCj4gKyAgICAgICBHRU1fQlVHX09OKHNyYy0+
c2l6ZSAhPSBkc3QtPnNpemUpOwo+ICsKPiArICAgICAgIGNvdW50ID0gZGl2X3U2NChkc3QtPnNp
emUsIGJsb2NrX3NpemUpOwo+ICsgICAgICAgc2l6ZSA9ICgxICsgMTEgKiBjb3VudCkgKiBzaXpl
b2YodTMyKTsKPiArICAgICAgIHNpemUgPSByb3VuZF91cChzaXplLCBQQUdFX1NJWkUpOwo+ICsg
ICAgICAgcG9vbCA9IGludGVsX2VuZ2luZV9wb29sX2dldCgmY2UtPmVuZ2luZS0+cG9vbCwgc2l6
ZSk7Cj4gKyAgICAgICBpZiAoSVNfRVJSKHBvb2wpKQo+ICsgICAgICAgICAgICAgICByZXR1cm4g
RVJSX0NBU1QocG9vbCk7Cj4gKwo+ICsgICAgICAgY21kID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9t
YXAocG9vbC0+b2JqLCBJOTE1X01BUF9XQyk7Cj4gKyAgICAgICBpZiAoSVNfRVJSKGNtZCkpIHsK
PiArICAgICAgICAgICAgICAgZXJyID0gUFRSX0VSUihjbWQpOwo+ICsgICAgICAgICAgICAgICBn
b3RvIG91dF9wdXQ7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgcmVtID0gc3JjLT5zaXplOwo+
ICsgICAgICAgc3JjX29mZnNldCA9IHNyYy0+bm9kZS5zdGFydDsKPiArICAgICAgIGRzdF9vZmZz
ZXQgPSBkc3QtPm5vZGUuc3RhcnQ7Cj4gKwo+ICsgICAgICAgZG8gewo+ICsgICAgICAgICAgICAg
ICB1MzIgc2l6ZSA9IG1pbl90KHU2NCwgcmVtLCBibG9ja19zaXplKTsKPiArCj4gKyAgICAgICAg
ICAgICAgIEdFTV9CVUdfT04oc2l6ZSA+PiBQQUdFX1NISUZUID4gUzE2X01BWCk7Cj4gKwo+ICsg
ICAgICAgICAgICAgICBpZiAoSU5URUxfR0VOKGk5MTUpID49IDkpIHsKPiArICAgICAgICAgICAg
ICAgICAgICAgICAqY21kKysgPSBHRU45X1hZX0ZBU1RfQ09QWV9CTFRfQ01EIHwgKDEwIC0gMik7
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgKmNtZCsrID0gQkxUX0RFUFRIXzMyIHwgUEFHRV9T
SVpFOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICpjbWQrKyA9IDA7Cj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgKmNtZCsrID0gc2l6ZSA+PiBQQUdFX1NISUZUIDw8IDE2IHwgUEFHRV9TSVpF
IC8gNDsKPiArICAgICAgICAgICAgICAgICAgICAgICAqY21kKysgPSBsb3dlcl8zMl9iaXRzKGRz
dF9vZmZzZXQpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICpjbWQrKyA9IHVwcGVyXzMyX2Jp
dHMoZHN0X29mZnNldCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgKmNtZCsrID0gMDsKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAqY21kKysgPSBQQUdFX1NJWkU7Cj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgKmNtZCsrID0gbG93ZXJfMzJfYml0cyhzcmNfb2Zmc2V0KTsKPiArICAgICAg
ICAgICAgICAgICAgICAgICAqY21kKysgPSB1cHBlcl8zMl9iaXRzKHNyY19vZmZzZXQpOwo+ICsg
ICAgICAgICAgICAgICB9IGVsc2UgaWYgKElOVEVMX0dFTihpOTE1KSA+PSA4KSB7Cj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgKmNtZCsrID0gWFlfU1JDX0NPUFlfQkxUX0NNRCB8IEJMVF9XUklU
RV9SR0JBIHwgKDEwIC0gMik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgKmNtZCsrID0gQkxU
X0RFUFRIXzMyIHwgQkxUX1JPUF9TUkNfQ09QWSB8IFBBR0VfU0laRTsKPiArICAgICAgICAgICAg
ICAgICAgICAgICAqY21kKysgPSAwOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICpjbWQrKyA9
IHNpemUgPj4gUEFHRV9TSElGVCA8PCAxNiB8IFBBR0VfU0laRSAvIDQ7Cj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgKmNtZCsrID0gbG93ZXJfMzJfYml0cyhkc3Rfb2Zmc2V0KTsKPiArICAgICAg
ICAgICAgICAgICAgICAgICAqY21kKysgPSB1cHBlcl8zMl9iaXRzKGRzdF9vZmZzZXQpOwo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICpjbWQrKyA9IDA7Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgKmNtZCsrID0gUEFHRV9TSVpFOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICpjbWQrKyA9
IGxvd2VyXzMyX2JpdHMoc3JjX29mZnNldCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgKmNt
ZCsrID0gdXBwZXJfMzJfYml0cyhzcmNfb2Zmc2V0KTsKPiArICAgICAgICAgICAgICAgfSBlbHNl
IHsKPiArICAgICAgICAgICAgICAgICAgICAgICAqY21kKysgPSBTUkNfQ09QWV9CTFRfQ01EIHwg
QkxUX1dSSVRFX1JHQkEgfCAoNiAtIDIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICpjbWQr
KyA9IEJMVF9ERVBUSF8zMiB8IEJMVF9ST1BfU1JDX0NPUFkgfCBQQUdFX1NJWkU7Cj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgKmNtZCsrID0gc2l6ZSA+PiBQQUdFX1NISUZUIDw8IDE2IHwgUEFH
RV9TSVpFOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICpjbWQrKyA9IGRzdF9vZmZzZXQ7Cj4g
KyAgICAgICAgICAgICAgICAgICAgICAgKmNtZCsrID0gUEFHRV9TSVpFOwo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICpjbWQrKyA9IHNyY19vZmZzZXQ7Cj4gKyAgICAgICAgICAgICAgIH0KPiAr
Cj4gKyAgICAgICAgICAgICAgIC8qIEFsbG93IG91cnNlbHZlcyB0byBiZSBwcmVlbXB0ZWQgaW4g
YmV0d2VlbiBibG9ja3MuICovCj4gKyAgICAgICAgICAgICAgICpjbWQrKyA9IE1JX0FSQl9DSEVD
SzsKPiArCj4gKyAgICAgICAgICAgICAgIHNyY19vZmZzZXQgKz0gc2l6ZTsKPiArICAgICAgICAg
ICAgICAgZHN0X29mZnNldCArPSBzaXplOwo+ICsgICAgICAgICAgICAgICByZW0gLT0gc2l6ZTsK
PiArICAgICAgIH0gd2hpbGUgKHJlbSk7Cj4gKwo+ICsgICAgICAgKmNtZCA9IE1JX0JBVENIX0JV
RkZFUl9FTkQ7Cj4gKyAgICAgICBpbnRlbF9ndF9jaGlwc2V0X2ZsdXNoKGNlLT52bS0+Z3QpOwo+
ICsKPiArICAgICAgIGk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAocG9vbC0+b2JqKTsKPiArCj4g
KyAgICAgICBiYXRjaCA9IGk5MTVfdm1hX2luc3RhbmNlKHBvb2wtPm9iaiwgY2UtPnZtLCBOVUxM
KTsKPiArICAgICAgIGlmIChJU19FUlIoYmF0Y2gpKSB7Cj4gKyAgICAgICAgICAgICAgIGVyciA9
IFBUUl9FUlIoYmF0Y2gpOwo+ICsgICAgICAgICAgICAgICBnb3RvIG91dF9wdXQ7Cj4gKyAgICAg
ICB9Cj4gKwo+ICsgICAgICAgZXJyID0gaTkxNV92bWFfcGluKGJhdGNoLCAwLCAwLCBQSU5fVVNF
Uik7Cj4gKyAgICAgICBpZiAodW5saWtlbHkoZXJyKSkKPiArICAgICAgICAgICAgICAgZ290byBv
dXRfcHV0Owo+ICsKPiArICAgICAgICpwID0gcG9vbDsKPiArICAgICAgIHJldHVybiBiYXRjaDsK
PiArCj4gK291dF9wdXQ6Cj4gKyAgICAgICBpbnRlbF9lbmdpbmVfcG9vbF9wdXQocG9vbCk7Cj4g
KyAgICAgICByZXR1cm4gRVJSX1BUUihlcnIpOwo+ICt9Cj4gKwo+ICtpbnQgaTkxNV9nZW1fb2Jq
ZWN0X2NvcHlfYmx0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpzcmMsCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqZHN0LAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGludGVsX2NvbnRleHQgKmNlKQo+ICt7
Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9ianNbXSA9IHsgJnNyYy0+YmFzZSwg
JmRzdC0+YmFzZSB9Owo+ICsgICAgICAgc3RydWN0IGk5MTVfYWRkcmVzc19zcGFjZSAqdm0gPSBj
ZS0+dm07Cj4gKyAgICAgICBzdHJ1Y3QgaW50ZWxfZW5naW5lX3Bvb2xfbm9kZSAqcG9vbDsKPiAr
ICAgICAgIHN0cnVjdCB3d19hY3F1aXJlX2N0eCBhY3F1aXJlOwo+ICsgICAgICAgc3RydWN0IGk5
MTVfdm1hICp2bWFfc3JjLCAqdm1hX2RzdDsKPiArICAgICAgIHN0cnVjdCBpOTE1X3ZtYSAqYmF0
Y2g7Cj4gKyAgICAgICBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpycTsKPiArICAgICAgIGludCBlcnI7
Cj4gKwo+ICsgICAgICAgdm1hX3NyYyA9IGk5MTVfdm1hX2luc3RhbmNlKHNyYywgdm0sIE5VTEwp
Owo+ICsgICAgICAgaWYgKElTX0VSUih2bWFfc3JjKSkKPiArICAgICAgICAgICAgICAgcmV0dXJu
IFBUUl9FUlIodm1hX3NyYyk7Cj4gKwo+ICsgICAgICAgZXJyID0gaTkxNV92bWFfcGluKHZtYV9z
cmMsIDAsIDAsIFBJTl9VU0VSKTsKPiArICAgICAgIGlmICh1bmxpa2VseShlcnIpKQo+ICsgICAg
ICAgICAgICAgICByZXR1cm4gZXJyOwo+ICsKPiArICAgICAgIHZtYV9kc3QgPSBpOTE1X3ZtYV9p
bnN0YW5jZShkc3QsIHZtLCBOVUxMKTsKPiArICAgICAgIGlmIChJU19FUlIodm1hX2RzdCkpCj4g
KyAgICAgICAgICAgICAgIGdvdG8gb3V0X3VucGluX3NyYzsKPiArCj4gKyAgICAgICBlcnIgPSBp
OTE1X3ZtYV9waW4odm1hX2RzdCwgMCwgMCwgUElOX1VTRVIpOwo+ICsgICAgICAgaWYgKHVubGlr
ZWx5KGVycikpCj4gKyAgICAgICAgICAgICAgIGdvdG8gb3V0X3VucGluX3NyYzsKPiArCj4gKyAg
ICAgICBpbnRlbF9lbmdpbmVfcG1fZ2V0KGNlLT5lbmdpbmUpOwo+ICsgICAgICAgYmF0Y2ggPSBp
bnRlbF9lbWl0X3ZtYV9jb3B5X2JsdCgmcG9vbCwgY2UsIHZtYV9zcmMsIHZtYV9kc3QpOwo+ICsg
ICAgICAgaWYgKElTX0VSUihiYXRjaCkpIHsKPiArICAgICAgICAgICAgICAgZXJyID0gUFRSX0VS
UihiYXRjaCk7Cj4gKyAgICAgICAgICAgICAgIGdvdG8gb3V0X3VucGluX2RzdDsKPiArICAgICAg
IH0KPiArCj4gKyAgICAgICBycSA9IGludGVsX2NvbnRleHRfY3JlYXRlX3JlcXVlc3QoY2UpOwo+
ICsgICAgICAgaWYgKElTX0VSUihycSkpIHsKPiArICAgICAgICAgICAgICAgZXJyID0gUFRSX0VS
UihycSk7Cj4gKyAgICAgICAgICAgICAgIGdvdG8gb3V0X2JhdGNoOwo+ICsgICAgICAgfQo+ICsK
PiArICAgICAgIGk5MTVfdm1hX2xvY2soYmF0Y2gpOwo+ICsgICAgICAgZXJyID0gaTkxNV92bWFf
bW92ZV90b19hY3RpdmUoYmF0Y2gsIHJxLCAwKTsKPiArICAgICAgIGk5MTVfdm1hX3VubG9jayhi
YXRjaCk7Cj4gKyAgICAgICBpZiAodW5saWtlbHkoZXJyKSkKPiArICAgICAgICAgICAgICAgZ290
byBvdXRfcmVxdWVzdDsKPiArCj4gKyAgICAgICBlcnIgPSBpbnRlbF9lbmdpbmVfcG9vbF9tYXJr
X2FjdGl2ZShwb29sLCBycSk7Cj4gKyAgICAgICBpZiAodW5saWtlbHkoZXJyKSkKPiArICAgICAg
ICAgICAgICAgZ290byBvdXRfcmVxdWVzdDsKPiArCj4gKyAgICAgICBlcnIgPSBkcm1fZ2VtX2xv
Y2tfcmVzZXJ2YXRpb25zKG9ianMsIEFSUkFZX1NJWkUob2JqcyksICZhY3F1aXJlKTsKPiArICAg
ICAgIGlmICh1bmxpa2VseShlcnIpKQo+ICsgICAgICAgICAgICAgICBnb3RvIG91dF9yZXF1ZXN0
Owo+ICsKPiArICAgICAgIGlmIChzcmMtPmNhY2hlX2RpcnR5ICYgfnNyYy0+Y2FjaGVfY29oZXJl
bnQpCj4gKyAgICAgICAgICAgICAgIGk5MTVfZ2VtX2NsZmx1c2hfb2JqZWN0KHNyYywgMCk7Cj4g
Kwo+ICsgICAgICAgaWYgKGRzdC0+Y2FjaGVfZGlydHkgJiB+ZHN0LT5jYWNoZV9jb2hlcmVudCkK
PiArICAgICAgICAgICAgICAgaTkxNV9nZW1fY2xmbHVzaF9vYmplY3QoZHN0LCAwKTsKPiArCj4g
KyAgICAgICBlcnIgPSBpOTE1X3JlcXVlc3RfYXdhaXRfb2JqZWN0KHJxLCBzcmMsIGZhbHNlKTsK
PiArICAgICAgIGlmICh1bmxpa2VseShlcnIpKQo+ICsgICAgICAgICAgICAgICBnb3RvIG91dF91
bmxvY2s7Cj4gKwo+ICsgICAgICAgZXJyID0gaTkxNV92bWFfbW92ZV90b19hY3RpdmUodm1hX3Ny
YywgcnEsIDApOwo+ICsgICAgICAgaWYgKHVubGlrZWx5KGVycikpCj4gKyAgICAgICAgICAgICAg
IGdvdG8gb3V0X3VubG9jazsKPiArCj4gKyAgICAgICBlcnIgPSBpOTE1X3JlcXVlc3RfYXdhaXRf
b2JqZWN0KHJxLCBkc3QsIHRydWUpOwo+ICsgICAgICAgaWYgKHVubGlrZWx5KGVycikpCj4gKyAg
ICAgICAgICAgICAgIGdvdG8gb3V0X3VubG9jazsKPiArCj4gKyAgICAgICBlcnIgPSBpOTE1X3Zt
YV9tb3ZlX3RvX2FjdGl2ZSh2bWFfZHN0LCBycSwgRVhFQ19PQkpFQ1RfV1JJVEUpOwo+ICsgICAg
ICAgaWYgKHVubGlrZWx5KGVycikpCj4gKyAgICAgICAgICAgICAgIGdvdG8gb3V0X3VubG9jazsK
ClN0cmljdGx5LCB3YWl0IG9uIGFsbCBvYmplY3RzLCB0aGVuIHNldHVwIGFsbCBzaWduYWxzLiBB
dm9pZHMgYW55IG5hc3R5CmN5Y2xlcyBpbiB0aGUgZGVwZW5kZW5jeSBncmFwaHMuIFN1Y2ggYXMg
aWYgc29tZW9uZSBwYXNzZWQgaW4gc3JjID0gZHN0LgpUaW1lIGZvciBhbm90aGVyIHNlbGZ0ZXN0
IDspCgpmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShvYmopOyBpKyspIHsKCWNsZmx1c2hfb2Jq
ZWN0KG9ialtpXSk7Cglhd2FpdF9vYmplY3QocnEsIG9ialtpXSk7Cn0KCmZvciAoaSA9IDA7IGkg
PCBBUlJBWV9TSVpFKG9iaik7IGkrKykKCW1vdmVfdG9fYWN0aXZlKG9ialtpXSk7Cgo+ICsKPiAr
ICAgICAgIGlmIChjZS0+ZW5naW5lLT5lbWl0X2luaXRfYnJlYWRjcnVtYikgewo+ICsgICAgICAg
ICAgICAgICBlcnIgPSBjZS0+ZW5naW5lLT5lbWl0X2luaXRfYnJlYWRjcnVtYihycSk7Cj4gKyAg
ICAgICAgICAgICAgIGlmICh1bmxpa2VseShlcnIpKQo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGdvdG8gb3V0X3VubG9jazsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBlcnIgPSBjZS0+ZW5n
aW5lLT5lbWl0X2JiX3N0YXJ0KHJxLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBiYXRjaC0+bm9kZS5zdGFydCwgYmF0Y2gtPm5vZGUuc2l6ZSwKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCk7Cj4gK291dF91bmxvY2s6Cj4gKyAgICAg
ICBkcm1fZ2VtX3VubG9ja19yZXNlcnZhdGlvbnMob2JqcywgQVJSQVlfU0laRShvYmpzKSwgJmFj
cXVpcmUpOwo+ICtvdXRfcmVxdWVzdDoKPiArICAgICAgIGlmICh1bmxpa2VseShlcnIpKQo+ICsg
ICAgICAgICAgICAgICBpOTE1X3JlcXVlc3Rfc2tpcChycSwgZXJyKTsKPiArCj4gKyAgICAgICBp
OTE1X3JlcXVlc3RfYWRkKHJxKTsKPiArb3V0X2JhdGNoOgo+ICsgICAgICAgaTkxNV92bWFfdW5w
aW4oYmF0Y2gpOwo+ICsgICAgICAgaW50ZWxfZW5naW5lX3Bvb2xfcHV0KHBvb2wpOwo+ICtvdXRf
dW5waW5fZHN0Ogo+ICsgICAgICAgaTkxNV92bWFfdW5waW4odm1hX2RzdCk7Cj4gKyAgICAgICBp
bnRlbF9lbmdpbmVfcG1fcHV0KGNlLT5lbmdpbmUpOwo+ICtvdXRfdW5waW5fc3JjOgo+ICsgICAg
ICAgaTkxNV92bWFfdW5waW4odm1hX3NyYyk7Cj4gKyAgICAgICByZXR1cm4gZXJyOwo+ICt9Cl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBt
YWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
