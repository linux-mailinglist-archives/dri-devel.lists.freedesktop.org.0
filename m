Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 652E4EFE76
	for <lists+dri-devel@lfdr.de>; Tue,  5 Nov 2019 14:29:20 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 693136EA50;
	Tue,  5 Nov 2019 13:29:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x44a.google.com (mail-pf1-x44a.google.com
 [IPv6:2607:f8b0:4864:20::44a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B9AE989BB0
 for <dri-devel@lists.freedesktop.org>; Mon,  4 Nov 2019 19:41:58 +0000 (UTC)
Received: by mail-pf1-x44a.google.com with SMTP id w16so3003912pfq.14
 for <dri-devel@lists.freedesktop.org>; Mon, 04 Nov 2019 11:41:58 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc:content-transfer-encoding;
 bh=YdVyYg2TmQWu6y8ro0turwBGFf90uoYSpY3DT2vX64s=;
 b=a+q36HqRQLtyt9PXnVox9aWBE+M1zHp/kRv7F6D1h29a3yISp7y3nuZnnysZ7XwPpz
 WCSPOMHXfEjO5vC0boryWvXuZz28aALaZVJZq1/C94wEhV1t3mpyQl6E9WdA3PI0PMSI
 gCK7PuEY+n1NeV7RHRAeUEsi6SEtzTMzyJx1/0MHsjhib2QxPBO/Ga6YnulDVS3nMccb
 t7adEOr9yfGmvzUgcnWgtPVBWmuzTpFywFXTpsUOiDTA1+jCU+BfniE/kFmvBjJuul7H
 4iTj62rfw+R/hsVuR0oKhgq2Knqhs418VDkKosgVwzn6H0qOG/jLE2sV8kU3XBvpQ8xr
 0hKQ==
X-Gm-Message-State: APjAAAXQy2sD4WdokE5jNGOvuAYMheLM5CMn8kyevp4AdBFScRn+TkZy
 zd3Xv+PW/ZvJWULkzKdClikBGdR8OJPz
X-Google-Smtp-Source: APXvYqzWIBzt1JHFt6ogpAZ9xhFDdJOaQRMhLHY3DaK6aSnDATwEYqL9Z+ZpYF7w/1SgRgoQeZ4Pv0z/pePe
X-Received: by 2002:a63:1a5e:: with SMTP id a30mr27305343pgm.299.1572896517733; 
 Mon, 04 Nov 2019 11:41:57 -0800 (PST)
Date: Mon,  4 Nov 2019 11:41:47 -0800
In-Reply-To: <20191104194147.185642-1-rajatja@google.com>
Message-Id: <20191104194147.185642-3-rajatja@google.com>
Mime-Version: 1.0
References: <20191023001206.15741-1-rajatja@google.com>
 <20191104194147.185642-1-rajatja@google.com>
X-Mailer: git-send-email 2.24.0.rc1.363.gb1bccd3e3d-goog
Subject: [PATCH v2 3/3] drm/i915: Add support for integrated privacy screens
From: Rajat Jain <rajatja@google.com>
To: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Maxime Ripard <mripard@kernel.org>, 
 Sean Paul <sean@poorly.run>, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel@ffwll.ch>, 
 Jani Nikula <jani.nikula@linux.intel.com>, 
 Joonas Lahtinen <joonas.lahtinen@linux.intel.com>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>, 
 "=?UTF-8?q?Ville=20Syrj=C3=A4l=C3=A4?=" <ville.syrjala@linux.intel.com>,
 Chris Wilson <chris@chris-wilson.co.uk>, Imre Deak <imre.deak@intel.com>, 
 "=?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?=" <jose.souza@intel.com>,
 linux-kernel@vger.kernel.org, 
 dri-devel@lists.freedesktop.org, intel-gfx@lists.freedesktop.org, 
 gregkh@linuxfoundation.org, mathewk@google.com, 
 Daniel Thompson <daniel.thompson@linaro.org>, Jonathan Corbet <corbet@lwn.net>,
 Pavel Machek <pavel@denx.de>, seanpaul@google.com,
 Duncan Laurie <dlaurie@google.com>, 
 jsbarnes@google.com, Thierry Reding <thierry.reding@gmail.com>
X-Mailman-Approved-At: Tue, 05 Nov 2019 13:29:07 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc:content-transfer-encoding;
 bh=YdVyYg2TmQWu6y8ro0turwBGFf90uoYSpY3DT2vX64s=;
 b=Awwva4OYZqsgvr4XB0eagEQnkESDAGDOveuMyxA3WOUz8UuvUMXNsmfJCxw8C+D15U
 Y/RcQc3ZcVijXTQNWz8uaJkOx28iDKZscO1fFDaC/dcGcUmHyXv57TEAHJq8C/j7JdAN
 bbR0ylU4f9XtuKy5n5bJttu2tNFrg4HBVhvgX6HHmoyxkJhwlWkJpioZxTnKvp9auQoM
 +HGUS96U5pkKVyfB4aHsK3hCVeRM3xkjLZOHMI1nhB8Cm9KlDxsB3c3ZeEK/xn1Jckzf
 Jgjx+gzf+ZnzOmcXUFx2tKvBiA564FXEaZHx+QpG/kPWTNjkxeCBpx1GgIFjW5uNPB1u
 yKkw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rajat Jain <rajatja@google.com>, rajatxjain@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q2VydGFpbiBsYXB0b3BzIG5vdyBjb21lIHdpdGggcGFuZWxzIHRoYXQgaGF2ZSBpbnRlZ3JhdGVk
IHByaXZhY3kKc2NyZWVucyBvbiB0aGVtLiBUaGlzIHBhdGNoIGFkZHMgc3VwcG9ydCBmb3Igc3Vj
aCBwYW5lbHMgYnkgYWRkaW5nCmEgcHJpdmFjeS1zY3JlZW4gcHJvcGVydHkgdG8gdGhlIGludGVs
X2Nvbm5lY3RvciBmb3IgdGhlIHBhbmVsLCB0aGF0CnRoZSB1c2Vyc3BhY2UgY2FuIHRoZW4gdXNl
IHRvIGNvbnRyb2wgYW5kIGNoZWNrIHRoZSBzdGF0dXMuCgpJZGVudGlmeWluZyB0aGUgcHJlc2Vu
Y2Ugb2YgcHJpdmFjeSBzY3JlZW4sIGFuZCBjb250cm9sbGluZyBpdCwgaXMgZG9uZQp2aWEgQUNQ
SSBfRFNNIG1ldGhvZHMuCgpDdXJyZW50bHksIHRoaXMgaXMgZG9uZSBvbmx5IGZvciB0aGUgSW50
ZWwgZGlzcGxheSBwb3J0cy4gQnV0IGluIGZ1dHVyZSwKdGhpcyBjYW4gYmUgZG9uZSBmb3IgYW55
IG90aGVyIHBvcnRzIGlmIHRoZSBoYXJkd2FyZSBiZWNvbWVzIGF2YWlsYWJsZQooZS5nLiBleHRl
cm5hbCBtb25pdG9ycyBzdXBwb3J0aW5nIGludGVncmF0ZWQgcHJpdmFjeSBzY3JlZW5zPykuCgpT
aWduZWQtb2ZmLWJ5OiBSYWphdCBKYWluIDxyYWphdGphQGdvb2dsZS5jb20+CkNoYW5nZS1JZDog
SWM5ZmYwN2ZjNGE1MDc5N2QyZDBkZmI5MTlmMTFhYTA4MjFhNGI1NDgKLS0tCnYyOiBGb3JtZWQg
Ynkgc3BsaXR0aW5nIHRoZSBvcmlnaW5hbCBwYXRjaCBpbnRvIG11bHRpcGxlIHBhdGNoZXMuCiAg
ICAtIEFsbCBjb2RlIGhhcyBiZWVuIG1vdmVkIGludG8gaTkxNSBub3cuCiAgICAtIFByaXZhY3kg
c2NyZWVuIGlzIGEgaTkxNSBwcm9wZXJ0eQogICAgLSBIYXZlIGEgbG9jYWwgc3RhdGUgdmFyaWFi
bGUgdG8gc3RvcmUgdGhlIHBydmFjeSBzY3JlZW4uIERvbid0IHJlYWQKICAgICAgaXQgZnJvbSBo
YXJkd2FyZS4KCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSAgICAgICAgICAgICAgICAg
fCAgMyArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWMuYyAgIHwg
MTMgKysrLQogLi4uL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Nvbm5lY3Rvci5jICAgIHwg
MzUgKysrKysrKysrKwogLi4uL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Nvbm5lY3Rvci5o
ICAgIHwgIDEgKwogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oICAg
IHwgIDQgKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYyAgICAgICB8
ICA1ICsrCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wcml2YWN5X3NjcmVlbi5jICAgfCA3
MCArKysrKysrKysrKysrKysrKysrCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9wcml2YWN5
X3NjcmVlbi5oICAgfCAyNSArKysrKysrCiBpbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmggICAg
ICAgICAgICAgICAgICAgfCAxNCArKysrCiA5IGZpbGVzIGNoYW5nZWQsIDE2NiBpbnNlcnRpb25z
KCspLCA0IGRlbGV0aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfcHJpdmFjeV9zY3JlZW4uYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHJpdmFjeV9zY3JlZW4uaAoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvTWFrZWZpbGUKaW5kZXggMjU4N2VhODM0ZjA2Li4zNTg5ZWJjZjI3YmMgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L01ha2VmaWxlCkBAIC0xODUsNyArMTg1LDggQEAgaTkxNS15ICs9IFwKIAlkaXNwbGF5L2ludGVs
X3RjLm8KIGk5MTUtJChDT05GSUdfQUNQSSkgKz0gXAogCWRpc3BsYXkvaW50ZWxfYWNwaS5vIFwK
LQlkaXNwbGF5L2ludGVsX29wcmVnaW9uLm8KKwlkaXNwbGF5L2ludGVsX29wcmVnaW9uLm8gXAor
CWRpc3BsYXkvaW50ZWxfcHJpdmFjeV9zY3JlZW4ubwogaTkxNS0kKENPTkZJR19EUk1fRkJERVZf
RU1VTEFUSU9OKSArPSBcCiAJZGlzcGxheS9pbnRlbF9mYmRldi5vCiAKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pYy5jCmluZGV4IGQzZmI3NWJiOWViMS4uMzc4Nzcy
ZDM0NDljIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0
b21pYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmMK
QEAgLTM3LDYgKzM3LDcgQEAKICNpbmNsdWRlICJpbnRlbF9hdG9taWMuaCIKICNpbmNsdWRlICJp
bnRlbF9kaXNwbGF5X3R5cGVzLmgiCiAjaW5jbHVkZSAiaW50ZWxfaGRjcC5oIgorI2luY2x1ZGUg
ImludGVsX3ByaXZhY3lfc2NyZWVuLmgiCiAjaW5jbHVkZSAiaW50ZWxfc3ByaXRlLmgiCiAKIC8q
KgpAQCAtNTcsMTEgKzU4LDE0IEBAIGludCBpbnRlbF9kaWdpdGFsX2Nvbm5lY3Rvcl9hdG9taWNf
Z2V0X3Byb3BlcnR5KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCiAJc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShkZXYpOwogCXN0cnVjdCBpbnRlbF9k
aWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZSAqaW50ZWxfY29ubl9zdGF0ZSA9CiAJCXRvX2ludGVsX2Rp
Z2l0YWxfY29ubmVjdG9yX3N0YXRlKHN0YXRlKTsKKwlzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpp
bnRlbF9jb25uZWN0b3IgPSB0b19pbnRlbF9jb25uZWN0b3IoY29ubmVjdG9yKTsKIAogCWlmIChw
cm9wZXJ0eSA9PSBkZXZfcHJpdi0+Zm9yY2VfYXVkaW9fcHJvcGVydHkpCiAJCSp2YWwgPSBpbnRl
bF9jb25uX3N0YXRlLT5mb3JjZV9hdWRpbzsKIAllbHNlIGlmIChwcm9wZXJ0eSA9PSBkZXZfcHJp
di0+YnJvYWRjYXN0X3JnYl9wcm9wZXJ0eSkKIAkJKnZhbCA9IGludGVsX2Nvbm5fc3RhdGUtPmJy
b2FkY2FzdF9yZ2I7CisJZWxzZSBpZiAocHJvcGVydHkgPT0gaW50ZWxfY29ubmVjdG9yLT5wcml2
YWN5X3NjcmVlbl9wcm9wZXJ0eSkKKwkJKnZhbCA9IGludGVsX2Nvbm5fc3RhdGUtPnByaXZhY3lf
c2NyZWVuX3N0YXR1czsKIAllbHNlIHsKIAkJRFJNX0RFQlVHX0FUT01JQygiVW5rbm93biBwcm9w
ZXJ0eSBbUFJPUDolZDolc11cbiIsCiAJCQkJIHByb3BlcnR5LT5iYXNlLmlkLCBwcm9wZXJ0eS0+
bmFtZSk7CkBAIC04OSwxNSArOTMsMTggQEAgaW50IGludGVsX2RpZ2l0YWxfY29ubmVjdG9yX2F0
b21pY19zZXRfcHJvcGVydHkoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKIAlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGRldik7CiAJc3RydWN0IGlu
dGVsX2RpZ2l0YWxfY29ubmVjdG9yX3N0YXRlICppbnRlbF9jb25uX3N0YXRlID0KIAkJdG9faW50
ZWxfZGlnaXRhbF9jb25uZWN0b3Jfc3RhdGUoc3RhdGUpOworCXN0cnVjdCBpbnRlbF9jb25uZWN0
b3IgKmludGVsX2Nvbm5lY3RvciA9IHRvX2ludGVsX2Nvbm5lY3Rvcihjb25uZWN0b3IpOwogCiAJ
aWYgKHByb3BlcnR5ID09IGRldl9wcml2LT5mb3JjZV9hdWRpb19wcm9wZXJ0eSkgewogCQlpbnRl
bF9jb25uX3N0YXRlLT5mb3JjZV9hdWRpbyA9IHZhbDsKIAkJcmV0dXJuIDA7Ci0JfQotCi0JaWYg
KHByb3BlcnR5ID09IGRldl9wcml2LT5icm9hZGNhc3RfcmdiX3Byb3BlcnR5KSB7CisJfSBlbHNl
IGlmIChwcm9wZXJ0eSA9PSBkZXZfcHJpdi0+YnJvYWRjYXN0X3JnYl9wcm9wZXJ0eSkgewogCQlp
bnRlbF9jb25uX3N0YXRlLT5icm9hZGNhc3RfcmdiID0gdmFsOwogCQlyZXR1cm4gMDsKKwl9IGVs
c2UgaWYgKHByb3BlcnR5ID09IGludGVsX2Nvbm5lY3Rvci0+cHJpdmFjeV9zY3JlZW5fcHJvcGVy
dHkpIHsKKwkJaW50ZWxfcHJpdmFjeV9zY3JlZW5fc2V0X3ZhbChpbnRlbF9jb25uZWN0b3IsIHZh
bCk7CisJCWludGVsX2Nvbm5fc3RhdGUtPnByaXZhY3lfc2NyZWVuX3N0YXR1cyA9IHZhbDsKKwkJ
cmV0dXJuIDA7CiAJfQogCiAJRFJNX0RFQlVHX0FUT01JQygiVW5rbm93biBwcm9wZXJ0eSBbUFJP
UDolZDolc11cbiIsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Nvbm5lY3Rvci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jb25u
ZWN0b3IuYwppbmRleCAzMDhlYzYzMjA3ZWUuLjNjY2JmNTJhZWRmOSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jb25uZWN0b3IuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Nvbm5lY3Rvci5jCkBAIC0yODEsMyArMjgxLDM4
IEBAIGludGVsX2F0dGFjaF9jb2xvcnNwYWNlX3Byb3BlcnR5KHN0cnVjdCBkcm1fY29ubmVjdG9y
ICpjb25uZWN0b3IpCiAJCWRybV9vYmplY3RfYXR0YWNoX3Byb3BlcnR5KCZjb25uZWN0b3ItPmJh
c2UsCiAJCQkJCSAgIGNvbm5lY3Rvci0+Y29sb3JzcGFjZV9wcm9wZXJ0eSwgMCk7CiB9CisKK3N0
YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3Byb3BfZW51bV9saXN0IHByaXZhY3lfc2NyZWVuX2VudW1b
XSA9IHsKKwl7IFBSSVZBQ1lfU0NSRUVOX0RJU0FCTEVELCAiRGlzYWJsZWQiIH0sCisJeyBQUklW
QUNZX1NDUkVFTl9FTkFCTEVELCAiRW5hYmxlZCIgfSwKK307CisKKy8qKgorICogaW50ZWxfYXR0
YWNoX3ByaXZhY3lfc2NyZWVuX3Byb3BlcnR5IC0KKyAqICAgICBjcmVhdGUgYW5kIGF0dGFjaCB0
aGUgY29ubmVjdGVyJ3MgcHJpdmFjeS1zY3JlZW4gcHJvcGVydHkuICoKKyAqIEBjb25uZWN0b3I6
IGNvbm5lY3RvciBmb3Igd2hpY2ggdG8gaW5pdCB0aGUgcHJpdmFjeS1zY3JlZW4gcHJvcGVydHkK
KyAqCisgKiBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgYW5kIGF0dGFjaGVzIHRoZSAicHJpdmFjeS1z
Y3JlZW4iIHByb3BlcnR5IHRvIHRoZQorICogY29ubmVjdG9yLiBJbml0aWFsIHN0YXRlIG9mIHBy
aXZhY3ktc2NyZWVuIGlzIHNldCB0byBkaXNhYmxlZC4KKyAqLwordm9pZAoraW50ZWxfYXR0YWNo
X3ByaXZhY3lfc2NyZWVuX3Byb3BlcnR5KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3Ip
Cit7CisJc3RydWN0IGludGVsX2Nvbm5lY3RvciAqaW50ZWxfY29ubmVjdG9yID0gdG9faW50ZWxf
Y29ubmVjdG9yKGNvbm5lY3Rvcik7CisJc3RydWN0IGRybV9wcm9wZXJ0eSAqcHJvcDsKKworCWlm
ICghaW50ZWxfY29ubmVjdG9yLT5wcml2YWN5X3NjcmVlbl9wcm9wZXJ0eSkgeworCQlwcm9wID0g
ZHJtX3Byb3BlcnR5X2NyZWF0ZV9lbnVtKGNvbm5lY3Rvci0+ZGV2LAorCQkJCQkJRFJNX01PREVf
UFJPUF9FTlVNLAorCQkJCQkJInByaXZhY3ktc2NyZWVuIiwKKwkJCQkJCXByaXZhY3lfc2NyZWVu
X2VudW0sCisJCQkJCSAgICBBUlJBWV9TSVpFKHByaXZhY3lfc2NyZWVuX2VudW0pKTsKKwkJaWYg
KCFwcm9wKQorCQkJcmV0dXJuOworCisJCWludGVsX2Nvbm5lY3Rvci0+cHJpdmFjeV9zY3JlZW5f
cHJvcGVydHkgPSBwcm9wOworCX0KKworCWRybV9vYmplY3RfYXR0YWNoX3Byb3BlcnR5KCZjb25u
ZWN0b3ItPmJhc2UsIHByb3AsCisJCQkJICAgUFJJVkFDWV9TQ1JFRU5fRElTQUJMRUQpOworfQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jb25uZWN0b3Iu
aCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY29ubmVjdG9yLmgKaW5kZXgg
OTNhNzM3NWM4MTk2Li42MTAwNWYzN2EzMzggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfY29ubmVjdG9yLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9jb25uZWN0b3IuaApAQCAtMzEsNSArMzEsNiBAQCB2b2lkIGludGVsX2F0
dGFjaF9mb3JjZV9hdWRpb19wcm9wZXJ0eShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9y
KTsKIHZvaWQgaW50ZWxfYXR0YWNoX2Jyb2FkY2FzdF9yZ2JfcHJvcGVydHkoc3RydWN0IGRybV9j
b25uZWN0b3IgKmNvbm5lY3Rvcik7CiB2b2lkIGludGVsX2F0dGFjaF9hc3BlY3RfcmF0aW9fcHJv
cGVydHkoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3Rvcik7CiB2b2lkIGludGVsX2F0dGFj
aF9jb2xvcnNwYWNlX3Byb3BlcnR5KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpOwor
dm9pZCBpbnRlbF9hdHRhY2hfcHJpdmFjeV9zY3JlZW5fcHJvcGVydHkoc3RydWN0IGRybV9jb25u
ZWN0b3IgKmNvbm5lY3Rvcik7CiAKICNlbmRpZiAvKiBfX0lOVEVMX0NPTk5FQ1RPUl9IX18gKi8K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90
eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVz
LmgKaW5kZXggYzI3MDZhZmMwNjliLi44M2I4Yzk4MDQ5YTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCkBAIC00MjYsNiArNDI2
LDkgQEAgc3RydWN0IGludGVsX2Nvbm5lY3RvciB7CiAJc3RydWN0IHdvcmtfc3RydWN0IG1vZGVz
ZXRfcmV0cnlfd29yazsKIAogCXN0cnVjdCBpbnRlbF9oZGNwIGhkY3A7CisKKwkvKiBPcHRpb25h
bCAicHJpdmFjeS1zY3JlZW4iIHByb3BlcnR5IGZvciB0aGUgY29ubmVjdG9yIHBhbmVsICovCisJ
c3RydWN0IGRybV9wcm9wZXJ0eSAqcHJpdmFjeV9zY3JlZW5fcHJvcGVydHk7CiB9OwogCiBzdHJ1
Y3QgaW50ZWxfZGlnaXRhbF9jb25uZWN0b3Jfc3RhdGUgewpAQCAtNDMzLDYgKzQzNiw3IEBAIHN0
cnVjdCBpbnRlbF9kaWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZSB7CiAKIAllbnVtIGhkbWlfZm9yY2Vf
YXVkaW8gZm9yY2VfYXVkaW87CiAJaW50IGJyb2FkY2FzdF9yZ2I7CisJZW51bSBpbnRlbF9wcml2
YWN5X3NjcmVlbl9zdGF0dXMgcHJpdmFjeV9zY3JlZW5fc3RhdHVzOwogfTsKIAogI2RlZmluZSB0
b19pbnRlbF9kaWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZSh4KSBjb250YWluZXJfb2YoeCwgc3RydWN0
IGludGVsX2RpZ2l0YWxfY29ubmVjdG9yX3N0YXRlLCBiYXNlKQpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9kcC5jCmluZGV4IDRmYWM0MDhhNDI5OS4uMTk2M2U5MjQwNGJhIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCkBAIC02Miw2ICs2Miw3IEBACiAj
aW5jbHVkZSAiaW50ZWxfbHNwY29uLmgiCiAjaW5jbHVkZSAiaW50ZWxfbHZkcy5oIgogI2luY2x1
ZGUgImludGVsX3BhbmVsLmgiCisjaW5jbHVkZSAiaW50ZWxfcHJpdmFjeV9zY3JlZW4uaCIKICNp
bmNsdWRlICJpbnRlbF9wc3IuaCIKICNpbmNsdWRlICJpbnRlbF9zaWRlYmFuZC5oIgogI2luY2x1
ZGUgImludGVsX3RjLmgiCkBAIC02MzU4LDYgKzYzNTksMTAgQEAgaW50ZWxfZHBfYWRkX3Byb3Bl
cnRpZXMoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwgc3RydWN0IGRybV9jb25uZWN0b3IgKmNv
bm5lY3QKIAogCQkvKiBMb29rdXAgdGhlIEFDUEkgbm9kZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBj
b25uZWN0b3IgKi8KIAkJaW50ZWxfY29ubmVjdG9yX2xvb2t1cF9hY3BpX25vZGUoaW50ZWxfY29u
bmVjdG9yKTsKKworCQkvKiBDaGVjayBmb3IgaW50ZWdyYXRlZCBQcml2YWN5IHNjcmVlbiBzdXBw
b3J0ICovCisJCWlmIChpbnRlbF9wcml2YWN5X3NjcmVlbl9wcmVzZW50KGludGVsX2Nvbm5lY3Rv
cikpCisJCQlpbnRlbF9hdHRhY2hfcHJpdmFjeV9zY3JlZW5fcHJvcGVydHkoY29ubmVjdG9yKTsK
IAl9CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
cHJpdmFjeV9zY3JlZW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHJp
dmFjeV9zY3JlZW4uYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjRj
NDIyZTM4YzUxYQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfcHJpdmFjeV9zY3JlZW4uYwpAQCAtMCwwICsxLDcwIEBACisvLyBTUERYLUxpY2Vu
c2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1sYXRlcgorLyoKKyAqIEludGVsIEFDUEkgcHJpdmFj
eSBzY3JlZW4gY29kZQorICoKKyAqIENvcHlyaWdodCDCqSAyMDE5IEdvb2dsZSBJbmMuCisgKi8K
KworI2luY2x1ZGUgPGxpbnV4L2FjcGkuaD4KKworI2luY2x1ZGUgImludGVsX3ByaXZhY3lfc2Ny
ZWVuLmgiCisKKyNkZWZpbmUgQ09OTkVDVE9SX0RTTV9SRVZJRCAxCisKKyNkZWZpbmUgQ09OTkVD
VE9SX0RTTV9GTl9QUklWQUNZX0VOQUJMRQkJMgorI2RlZmluZSBDT05ORUNUT1JfRFNNX0ZOX1BS
SVZBQ1lfRElTQUJMRQkJMworCitzdGF0aWMgY29uc3QgZ3VpZF90IGRybV9jb25uX2RzbV9ndWlk
ID0KKwlHVUlEX0lOSVQoMHhDNzAzMzExMywgMHg4NzIwLCAweDRDRUIsCisJCSAgMHg5MCwgMHg5
MCwgMHg5RCwgMHg1MiwgMHhCMywgMHhFNSwgMHgyRCwgMHg3Myk7CisKKy8qIE1ha2VzIF9EU00g
Y2FsbCB0byBzZXQgcHJpdmFjeSBzY3JlZW4gc3RhdHVzICovCitzdGF0aWMgdm9pZCBhY3BpX3By
aXZhY3lfc2NyZWVuX2NhbGxfZHNtKGFjcGlfaGFuZGxlIGNvbm5faGFuZGxlLCB1NjQgZnVuYykK
K3sKKwl1bmlvbiBhY3BpX29iamVjdCAqb2JqOworCisJb2JqID0gYWNwaV9ldmFsdWF0ZV9kc20o
Y29ubl9oYW5kbGUsICZkcm1fY29ubl9kc21fZ3VpZCwKKwkJCQlDT05ORUNUT1JfRFNNX1JFVklE
LCBmdW5jLCBOVUxMKTsKKwlpZiAoIW9iaikgeworCQlEUk1fREVCVUdfRFJJVkVSKCJmYWlsZWQg
dG8gZXZhbHVhdGUgX0RTTSBmb3IgZm4gJWxseFxuIiwgZnVuYyk7CisJCXJldHVybjsKKwl9CisK
KwlBQ1BJX0ZSRUUob2JqKTsKK30KKwordm9pZCBpbnRlbF9wcml2YWN5X3NjcmVlbl9zZXRfdmFs
KHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmludGVsX2Nvbm5lY3RvciwKKwkJCQkgIGVudW0gaW50
ZWxfcHJpdmFjeV9zY3JlZW5fc3RhdHVzIHZhbCkKK3sKKwlhY3BpX2hhbmRsZSBhY3BpX2hhbmRs
ZSA9IGludGVsX2Nvbm5lY3Rvci0+YWNwaV9oYW5kbGU7CisKKwlpZiAoIWFjcGlfaGFuZGxlKQor
CQlyZXR1cm47CisKKwlpZiAodmFsID09IFBSSVZBQ1lfU0NSRUVOX0RJU0FCTEVEKQorCQlhY3Bp
X3ByaXZhY3lfc2NyZWVuX2NhbGxfZHNtKGFjcGlfaGFuZGxlLAorCQkJCQkgICAgIENPTk5FQ1RP
Ul9EU01fRk5fUFJJVkFDWV9ESVNBQkxFKTsKKwllbHNlIGlmICh2YWwgPT0gUFJJVkFDWV9TQ1JF
RU5fRU5BQkxFRCkKKwkJYWNwaV9wcml2YWN5X3NjcmVlbl9jYWxsX2RzbShhY3BpX2hhbmRsZSwK
KwkJCQkJICAgICBDT05ORUNUT1JfRFNNX0ZOX1BSSVZBQ1lfRU5BQkxFKTsKK30KKworYm9vbCBp
bnRlbF9wcml2YWN5X3NjcmVlbl9wcmVzZW50KHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmludGVs
X2Nvbm5lY3RvcikKK3sKKwlhY3BpX2hhbmRsZSBoYW5kbGUgPSBpbnRlbF9jb25uZWN0b3ItPmFj
cGlfaGFuZGxlOworCisJaWYgKCFoYW5kbGUpCisJCXJldHVybiBmYWxzZTsKKworCWlmICghYWNw
aV9jaGVja19kc20oaGFuZGxlLCAmZHJtX2Nvbm5fZHNtX2d1aWQsCisJCQkgICAgQ09OTkVDVE9S
X0RTTV9SRVZJRCwKKwkJCSAgICAxIDw8IENPTk5FQ1RPUl9EU01fRk5fUFJJVkFDWV9FTkFCTEUg
fAorCQkJICAgIDEgPDwgQ09OTkVDVE9SX0RTTV9GTl9QUklWQUNZX0RJU0FCTEUpKSB7CisJCURS
TV9XQVJOKCIlczogT2RkLCBjb25uZWN0b3IgQUNQSSBub2RlIGJ1dCBubyBwcml2YWN5IHNjcm4/
XG4iLAorCQkJIGRldl9uYW1lKGludGVsX2Nvbm5lY3Rvci0+YmFzZS5kZXYtPmRldikpOworCQly
ZXR1cm4gZmFsc2U7CisJfQorCURSTV9ERVZfSU5GTyhpbnRlbF9jb25uZWN0b3ItPmJhc2UuZGV2
LT5kZXYsCisJCSAgICAgInN1cHBvcnRzIHByaXZhY3kgc2NyZWVuXG4iKTsKKwlyZXR1cm4gdHJ1
ZTsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHJp
dmFjeV9zY3JlZW4uaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHJpdmFj
eV9zY3JlZW4uaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjIxMmY3
MzM0OWEwMAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfcHJpdmFjeV9zY3JlZW4uaApAQCAtMCwwICsxLDI1IEBACisvKiBTUERYLUxpY2Vuc2Ut
SWRlbnRpZmllcjogR1BMLTIuMC1vci1sYXRlciAqLworLyoKKyAqIENvcHlyaWdodCDCqSAyMDE5
IEdvb2dsZSBJbmMuCisgKi8KKworI2lmbmRlZiBfX0RSTV9QUklWQUNZX1NDUkVFTl9IX18KKyNk
ZWZpbmUgX19EUk1fUFJJVkFDWV9TQ1JFRU5fSF9fCisKKyNpbmNsdWRlICJpbnRlbF9kaXNwbGF5
X3R5cGVzLmgiCisKKyNpZmRlZiBDT05GSUdfQUNQSQorYm9vbCBpbnRlbF9wcml2YWN5X3NjcmVl
bl9wcmVzZW50KHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmludGVsX2Nvbm5lY3Rvcik7Cit2b2lk
IGludGVsX3ByaXZhY3lfc2NyZWVuX3NldF92YWwoc3RydWN0IGludGVsX2Nvbm5lY3RvciAqaW50
ZWxfY29ubmVjdG9yLAorCQkJCSAgZW51bSBpbnRlbF9wcml2YWN5X3NjcmVlbl9zdGF0dXMgdmFs
KTsKKyNlbHNlCitib29sIGludGVsX3ByaXZhY3lfc2NyZWVuX3ByZXNlbnQoc3RydWN0IGludGVs
X2Nvbm5lY3RvciAqaW50ZWxfY29ubmVjdG9yKTsKK3sKKwlyZXR1cm4gZmFsc2U7Cit9Cit2b2lk
IGludGVsX3ByaXZhY3lfc2NyZWVuX3NldF92YWwoc3RydWN0IGludGVsX2Nvbm5lY3RvciAqaW50
ZWxfY29ubmVjdG9yLAorCQkJCSAgZW51bSBpbnRlbF9wcml2YWN5X3NjcmVlbl9zdGF0dXMgdmFs
KQoreyB9CisjZW5kaWYgLyogQ09ORklHX0FDUEkgKi8KKworI2VuZGlmIC8qIF9fRFJNX1BSSVZB
Q1lfU0NSRUVOX0hfXyAqLwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5o
IGIvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCmluZGV4IDQ2OWRjNTEyY2NhMy4uY2YwOGQ1
NjM2MzYzIDEwMDY0NAotLS0gYS9pbmNsdWRlL3VhcGkvZHJtL2k5MTVfZHJtLmgKKysrIGIvaW5j
bHVkZS91YXBpL2RybS9pOTE1X2RybS5oCkBAIC0yMTIzLDYgKzIxMjMsMjAgQEAgc3RydWN0IGRy
bV9pOTE1X3F1ZXJ5X2VuZ2luZV9pbmZvIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfZW5naW5lX2luZm8g
ZW5naW5lc1tdOwogfTsKIAorLyoqCisgKiBlbnVtIGludGVsX3ByaXZhY3lfc2NyZWVuX3N0YXR1
cyAtIHByaXZhY3lfc2NyZWVuIHN0YXR1cworICoKKyAqIFRoaXMgZW51bSBpcyB1c2VkIHRvIHRy
YWNrIGFuZCBjb250cm9sIHRoZSBzdGF0ZSBvZiB0aGUgaW50ZWdyYXRlZCBwcml2YWN5CisgKiBz
Y3JlZW4gcHJlc2VudCBvbiBzb21lIGRpc3BsYXkgcGFuZWxzLCB2aWEgdGhlICJwcml2YWN5LXNj
cmVlbiIgcHJvcGVydHkuCisgKgorICogQFBSSVZBQ1lfU0NSRUVOX0RJU0FCTEVEOiBUaGUgcHJp
dmFjeS1zY3JlZW4gb24gdGhlIHBhbmVsIGlzIGRpc2FibGVkCisgKiBAUFJJVkFDWV9TQ1JFRU5f
RU5BQkxFRDogIFRoZSBwcml2YWN5LXNjcmVlbiBvbiB0aGUgcGFuZWwgaXMgZW5hYmxlZAorICoq
LworZW51bSBpbnRlbF9wcml2YWN5X3NjcmVlbl9zdGF0dXMgeworCVBSSVZBQ1lfU0NSRUVOX0RJ
U0FCTEVEID0gMCwKKwlQUklWQUNZX1NDUkVFTl9FTkFCTEVEID0gMSwKK307CisKICNpZiBkZWZp
bmVkKF9fY3BsdXNwbHVzKQogfQogI2VuZGlmCi0tIAoyLjI0LjAucmMxLjM2My5nYjFiY2NkM2Uz
ZC1nb29nCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpk
cmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
