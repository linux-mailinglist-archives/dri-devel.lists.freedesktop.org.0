Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 70F80189F15
	for <lists+dri-devel@lfdr.de>; Wed, 18 Mar 2020 16:09:29 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F13486E90D;
	Wed, 18 Mar 2020 15:09:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from honk.sigxcpu.org (honk.sigxcpu.org [24.134.29.49])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 188426E2A3
 for <dri-devel@lists.freedesktop.org>; Wed, 18 Mar 2020 15:09:22 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by honk.sigxcpu.org (Postfix) with ESMTP id 9CC51FB04;
 Wed, 18 Mar 2020 16:09:20 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at honk.sigxcpu.org
Received: from honk.sigxcpu.org ([127.0.0.1])
 by localhost (honk.sigxcpu.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id Y6dfw3zySf0g; Wed, 18 Mar 2020 16:09:09 +0100 (CET)
Received: by bogon.sigxcpu.org (Postfix, from userid 1000)
 id BFAA0412BB; Wed, 18 Mar 2020 16:09:08 +0100 (CET)
From: =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>
To: David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Shawn Guo <shawnguo@kernel.org>, Sascha Hauer <s.hauer@pengutronix.de>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 Fabio Estevam <festevam@gmail.com>, NXP Linux Team <linux-imx@nxp.com>,
 Andrzej Hajda <a.hajda@samsung.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Jonas Karlman <jonas@kwiboo.se>, Jernej Skrabec <jernej.skrabec@siol.net>,
 Lee Jones <lee.jones@linaro.org>,
 =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>,
 dri-devel@lists.freedesktop.org, devicetree@vger.kernel.org,
 linux-arm-kernel@lists.infradead.org, linux-kernel@vger.kernel.org,
 Robert Chiras <robert.chiras@nxp.com>, Sam Ravnborg <sam@ravnborg.org>,
 Arnd Bergmann <arnd@arndb.de>
Subject: [PATCH v9 2/2] drm/bridge: Add NWL MIPI DSI host controller support
Date: Wed, 18 Mar 2020 16:09:08 +0100
Message-Id: <6f2e65df672a0fe832af29f4ea89fbe7250c3a07.1584544065.git.agx@sigxcpu.org>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <cover.1584544065.git.agx@sigxcpu.org>
References: <cover.1584544065.git.agx@sigxcpu.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBhZGRzIGluaXRpYWwgc3VwcG9ydCBmb3IgdGhlIE5XTCBNSVBJIERTSSBIb3N0IGNvbnRy
b2xsZXIgZm91bmQgb24KaS5NWDggU29Dcy4KCkl0IGFkZHMgc3VwcG9ydCBmb3IgdGhlIGkuTVg4
TVEgYnV0IHRoZSBzYW1lIElQIGNhbiBiZSBmb3VuZCBvbgplLmcuIHRoZSBpLk1YOFFYUC4KCkl0
IGhhcyBiZWVuIHRlc3RlZCBvbiB0aGUgTGlicmVtIDUgZGV2a2l0IHVzaW5nIG14c2ZiLgoKU2ln
bmVkLW9mZi1ieTogR3VpZG8gR8O8bnRoZXIgPGFneEBzaWd4Y3B1Lm9yZz4KQ28tZGV2ZWxvcGVk
LWJ5OiBSb2JlcnQgQ2hpcmFzIDxyb2JlcnQuY2hpcmFzQG54cC5jb20+ClNpZ25lZC1vZmYtYnk6
IFJvYmVydCBDaGlyYXMgPHJvYmVydC5jaGlyYXNAbnhwLmNvbT4KVGVzdGVkLWJ5OiBSb2JlcnQg
Q2hpcmFzIDxyb2JlcnQuY2hpcmFzQG54cC5jb20+ClRlc3RlZC1ieTogTWFydGluIEtlcHBsaW5n
ZXIgPG1hcnRpbi5rZXBwbGluZ2VyQHB1cmkuc20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9LY29uZmlnICAgfCAgIDE2ICsKIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvTWFrZWZpbGUgIHwg
ICAgMyArCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuYyB8IDEyMTMgKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuaCB8
ICAxNDQgKysrKwogNCBmaWxlcyBjaGFuZ2VkLCAxMzc2IGluc2VydGlvbnMoKykKIGNyZWF0ZSBt
b2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuYwogY3JlYXRlIG1vZGUg
MTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS5oCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2JyaWRnZS9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9LY29u
ZmlnCmluZGV4IDgzOTdiZjcyZDJmMy4uZDQxZDkzZDI0ZjE2IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL0tjb25maWcKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9LY29u
ZmlnCkBAIC01NSw2ICs1NSwyMiBAQCBjb25maWcgRFJNX01FR0FDSElQU19TVERQWFhYWF9HRV9C
ODUwVjNfRlcKIAkgIHRvIERQKysuIFRoaXMgaXMgdXNlZCB3aXRoIHRoZSBpLk1YNiBpbXgtbGRi
CiAJICBkcml2ZXIuIFlvdSBhcmUgbGlrZWx5IHRvIHNheSBOIGhlcmUuCiAKK2NvbmZpZyBEUk1f
TldMX01JUElfRFNJCisJdHJpc3RhdGUgIk5vcnRod2VzdCBMb2dpYyBNSVBJIERTSSBIb3N0IGNv
bnRyb2xsZXIiCisJZGVwZW5kcyBvbiBEUk0KKwlkZXBlbmRzIG9uIENPTU1PTl9DTEsKKwlkZXBl
bmRzIG9uIE9GICYmIEhBU19JT01FTQorCXNlbGVjdCBEUk1fS01TX0hFTFBFUgorCXNlbGVjdCBE
Uk1fTUlQSV9EU0kKKwlzZWxlY3QgRFJNX1BBTkVMX0JSSURHRQorCXNlbGVjdCBHRU5FUklDX1BI
WV9NSVBJX0RQSFkKKwlzZWxlY3QgTUZEX1NZU0NPTgorCXNlbGVjdCBNVUxUSVBMRVhFUgorCXNl
bGVjdCBSRUdNQVBfTU1JTworCWhlbHAKKwkgIFRoaXMgZW5hYmxlcyB0aGUgTm9ydGh3ZXN0IExv
Z2ljIE1JUEkgRFNJIEhvc3QgY29udHJvbGxlciBhcworCSAgZm9yIGV4YW1wbGUgZm91bmQgb24g
TlhQJ3MgaS5NWDggUHJvY2Vzc29ycy4KKwogY29uZmlnIERSTV9OWFBfUFROMzQ2MAogCXRyaXN0
YXRlICJOWFAgUFROMzQ2MCBEUC9MVkRTIGJyaWRnZSIKIAlkZXBlbmRzIG9uIE9GCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2Jy
aWRnZS9NYWtlZmlsZQppbmRleCAxZWI1Mzc2YzVkNjguLjk4NTgxYjMxMjhhMyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0v
YnJpZGdlL01ha2VmaWxlCkBAIC0xNSw2ICsxNSw5IEBAIG9iai0kKENPTkZJR19EUk1fVE9TSElC
QV9UQzM1ODc2NykgKz0gdGMzNTg3Njcubwogb2JqLSQoQ09ORklHX0RSTV9JMkNfQURWNzUxMSkg
Kz0gYWR2NzUxMS8KIG9iai0kKENPTkZJR19EUk1fVElfU042NURTSTg2KSArPSB0aS1zbjY1ZHNp
ODYubwogb2JqLSQoQ09ORklHX0RSTV9USV9URlA0MTApICs9IHRpLXRmcDQxMC5vCitvYmotJChD
T05GSUdfRFJNX05XTF9NSVBJX0RTSSkgKz0gbndsLWRzaS5vCiAKIG9iai15ICs9IGFuYWxvZ2l4
Lwogb2JqLXkgKz0gc3lub3BzeXMvCisKK2hlYWRlci10ZXN0LXkgKz0gbndsLWRzaS5oCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9icmlkZ2UvbndsLWRzaS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAw
MC4uYWExMWU0MGRlYWQ3Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9ud2wtZHNpLmMKQEAgLTAsMCArMSwxMjEzIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmll
cjogR1BMLTIuMCsKKy8qCisgKiBpLk1YOCBOV0wgTUlQSSBEU0kgaG9zdCBkcml2ZXIKKyAqCisg
KiBDb3B5cmlnaHQgKEMpIDIwMTcgTlhQCisgKiBDb3B5cmlnaHQgKEMpIDIwMjAgUHVyaXNtIFNQ
QworICovCisKKyNpbmNsdWRlIDxsaW51eC9iaXRmaWVsZC5oPgorI2luY2x1ZGUgPGxpbnV4L2Ns
ay5oPgorI2luY2x1ZGUgPGxpbnV4L2lycS5oPgorI2luY2x1ZGUgPGxpbnV4L21hdGg2NC5oPgor
I2luY2x1ZGUgPGxpbnV4L21mZC9zeXNjb24uaD4KKyNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4K
KyNpbmNsdWRlIDxsaW51eC9tdXgvY29uc3VtZXIuaD4KKyNpbmNsdWRlIDxsaW51eC9vZi5oPgor
I2luY2x1ZGUgPGxpbnV4L29mX3BsYXRmb3JtLmg+CisjaW5jbHVkZSA8bGludXgvcGh5L3BoeS5o
PgorI2luY2x1ZGUgPGxpbnV4L3JlZ21hcC5oPgorI2luY2x1ZGUgPGxpbnV4L3Jlc2V0Lmg+Cisj
aW5jbHVkZSA8bGludXgvc3lzX3NvYy5oPgorI2luY2x1ZGUgPGxpbnV4L3RpbWU2NC5oPgorCisj
aW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfaGVscGVyLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9icmlk
Z2UuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX21pcGlfZHNpLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9v
Zi5oPgorI2luY2x1ZGUgPGRybS9kcm1fcGFuZWwuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX3ByaW50
Lmg+CisjaW5jbHVkZSA8ZHJtL2RybV9wcm9iZV9oZWxwZXIuaD4KKworI2luY2x1ZGUgPHZpZGVv
L21pcGlfZGlzcGxheS5oPgorI2luY2x1ZGUgPHZpZGVvL3ZpZGVvbW9kZS5oPgorCisjaW5jbHVk
ZSAibndsLWRzaS5oIgorCisjZGVmaW5lIERSVl9OQU1FICJud2wtZHNpIgorCisvKiBpLk1YOCBO
V0wgcXVpcmtzICovCisvKiBpLk1YOE1RIGVycmF0YSBFMTE0MTggKi8KKyNkZWZpbmUgRTExNDE4
X0hTX01PREVfUVVJUksJQklUKDApCisKKyNkZWZpbmUgTldMX0RTSV9NSVBJX0ZJRk9fVElNRU9V
VCBtc2Vjc190b19qaWZmaWVzKDUwMCkKKworZW51bSB0cmFuc2Zlcl9kaXJlY3Rpb24geworCURT
SV9QQUNLRVRfU0VORCwKKwlEU0lfUEFDS0VUX1JFQ0VJVkUsCit9OworCisjZGVmaW5lIE5XTF9E
U0lfRU5EUE9JTlRfTENESUYgMAorI2RlZmluZSBOV0xfRFNJX0VORFBPSU5UX0RDU1MgMQorCitz
dHJ1Y3QgbndsX2RzaV9wbGF0X2Nsa19jb25maWcgeworCWNvbnN0IGNoYXIgKmlkOworCXN0cnVj
dCBjbGsgKmNsazsKKwlib29sIHByZXNlbnQ7Cit9OworCitzdHJ1Y3QgbndsX2RzaV90cmFuc2Zl
ciB7CisJY29uc3Qgc3RydWN0IG1pcGlfZHNpX21zZyAqbXNnOworCXN0cnVjdCBtaXBpX2RzaV9w
YWNrZXQgcGFja2V0OworCXN0cnVjdCBjb21wbGV0aW9uIGNvbXBsZXRlZDsKKworCWludCBzdGF0
dXM7IC8qIHN0YXR1cyBvZiB0cmFuc21pc3Npb24gKi8KKwllbnVtIHRyYW5zZmVyX2RpcmVjdGlv
biBkaXJlY3Rpb247CisJYm9vbCBuZWVkX2J0YTsKKwl1OCBjbWQ7CisJdTE2IHJ4X3dvcmRfY291
bnQ7CisJc2l6ZV90IHR4X2xlbjsgLyogaW4gYnl0ZXMgKi8KKwlzaXplX3QgcnhfbGVuOyAvKiBp
biBieXRlcyAqLworfTsKKworc3RydWN0IG53bF9kc2kgeworCXN0cnVjdCBkcm1fYnJpZGdlIGJy
aWRnZTsKKwlzdHJ1Y3QgbWlwaV9kc2lfaG9zdCBkc2lfaG9zdDsKKwlzdHJ1Y3QgZHJtX2JyaWRn
ZSAqcGFuZWxfYnJpZGdlOworCXN0cnVjdCBkZXZpY2UgKmRldjsKKwlzdHJ1Y3QgcGh5ICpwaHk7
CisJdW5pb24gcGh5X2NvbmZpZ3VyZV9vcHRzIHBoeV9jZmc7CisJdW5zaWduZWQgaW50IHF1aXJr
czsKKworCXN0cnVjdCByZWdtYXAgKnJlZ21hcDsKKwlpbnQgaXJxOworCS8qCisJICogVGhlIERT
SSBob3N0IGNvbnRyb2xsZXIgbmVlZHMgdGhpcyByZXNldCBzZXF1ZW5jZSBhY2NvcmRpbmcgdG8g
TldMOgorCSAqIDEuIERlYXNzZXJ0IHBjbGsgcmVzZXQgdG8gZ2V0IGFjY2VzcyB0byBEU0kgcmVn
cworCSAqIDIuIENvbmZpZ3VyZSBEU0kgSG9zdCBhbmQgRFBIWSBhbmQgZW5hYmxlIERQSFkKKwkg
KiAzLiBEZWFzc2VydCBFU0MgYW5kIEJZVEUgcmVzZXRzIHRvIGFsbG93IGhvc3QgVFggb3BlcmF0
aW9ucykKKwkgKiA0LiBTZW5kIERTSSBjbWRzIHRvIGNvbmZpZ3VyZSBwZXJpcGhlcmFsIChoYW5k
bGVkIGJ5IHBhbmVsIGRydikKKwkgKiA1LiBEZWFzc2VydCBEUEkgcmVzZXQgc28gRFBJIHJlY2Vp
dmVzIHBpeGVscyBhbmQgc3RhcnRzIHNlbmRpbmcKKwkgKiAgICBEU0kgZGF0YQorCSAqCisJICog
VE9ETzogU2luY2UgcGFuZWxfYnJpZGdlcyBkbyB0aGVpciBEU0kgc2V0dXAgaW4gZW5hYmxlIHdl
CisJICogY3VycmVudGx5IGhhdmUgNC4gYW5kIDUuIHN3YXBwZWQuCisJICovCisJc3RydWN0IHJl
c2V0X2NvbnRyb2wgKnJzdF9ieXRlOworCXN0cnVjdCByZXNldF9jb250cm9sICpyc3RfZXNjOwor
CXN0cnVjdCByZXNldF9jb250cm9sICpyc3RfZHBpOworCXN0cnVjdCByZXNldF9jb250cm9sICpy
c3RfcGNsazsKKwlzdHJ1Y3QgbXV4X2NvbnRyb2wgKm11eDsKKworCS8qIERTSSBjbG9ja3MgKi8K
KwlzdHJ1Y3QgY2xrICpwaHlfcmVmX2NsazsKKwlzdHJ1Y3QgY2xrICpyeF9lc2NfY2xrOworCXN0
cnVjdCBjbGsgKnR4X2VzY19jbGs7CisJc3RydWN0IGNsayAqY29yZV9jbGs7CisJLyoKKwkgKiBo
YXJkd2FyZSBidWc6IHRoZSBpLk1YOE1RIG5lZWRzIHRoaXMgY2xvY2sgb24gZHVyaW5nIHJlc2V0
CisJICogZXZlbiB3aGVuIG5vdCB1c2luZyBMQ0RJRi4KKwkgKi8KKwlzdHJ1Y3QgY2xrICpsY2Rp
Zl9jbGs7CisKKwkvKiBkc2kgbGFuZXMgKi8KKwl1MzIgbGFuZXM7CisJZW51bSBtaXBpX2RzaV9w
aXhlbF9mb3JtYXQgZm9ybWF0OworCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlIG1vZGU7CisJdW5z
aWduZWQgbG9uZyBkc2lfbW9kZV9mbGFnczsKKwlpbnQgZXJyb3I7CisKKwlzdHJ1Y3QgbndsX2Rz
aV90cmFuc2ZlciAqeGZlcjsKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgcmVnbWFwX2NvbmZp
ZyBud2xfZHNpX3JlZ21hcF9jb25maWcgPSB7CisJLnJlZ19iaXRzID0gMTYsCisJLnZhbF9iaXRz
ID0gMzIsCisJLnJlZ19zdHJpZGUgPSA0LAorCS5tYXhfcmVnaXN0ZXIgPSBOV0xfRFNJX0lSUV9N
QVNLMiwKKwkubmFtZSA9IERSVl9OQU1FLAorfTsKKworc3RhdGljIGlubGluZSBzdHJ1Y3Qgbnds
X2RzaSAqYnJpZGdlX3RvX2RzaShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQoreworCXJldHVy
biBjb250YWluZXJfb2YoYnJpZGdlLCBzdHJ1Y3QgbndsX2RzaSwgYnJpZGdlKTsKK30KKworc3Rh
dGljIGludCBud2xfZHNpX2NsZWFyX2Vycm9yKHN0cnVjdCBud2xfZHNpICpkc2kpCit7CisJaW50
IHJldCA9IGRzaS0+ZXJyb3I7CisKKwlkc2ktPmVycm9yID0gMDsKKwlyZXR1cm4gcmV0OworfQor
CitzdGF0aWMgdm9pZCBud2xfZHNpX3dyaXRlKHN0cnVjdCBud2xfZHNpICpkc2ksIHVuc2lnbmVk
IGludCByZWcsIHUzMiB2YWwpCit7CisJaW50IHJldDsKKworCWlmIChkc2ktPmVycm9yKQorCQly
ZXR1cm47CisKKwlyZXQgPSByZWdtYXBfd3JpdGUoZHNpLT5yZWdtYXAsIHJlZywgdmFsKTsKKwlp
ZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LAorCQkJICAgICAgIkZhaWxl
ZCB0byB3cml0ZSBOV0wgRFNJIHJlZyAweCV4OiAlZFxuIiwgcmVnLAorCQkJICAgICAgcmV0KTsK
KwkJZHNpLT5lcnJvciA9IHJldDsKKwl9Cit9CisKK3N0YXRpYyB1MzIgbndsX2RzaV9yZWFkKHN0
cnVjdCBud2xfZHNpICpkc2ksIHUzMiByZWcpCit7CisJdW5zaWduZWQgaW50IHZhbDsKKwlpbnQg
cmV0OworCisJaWYgKGRzaS0+ZXJyb3IpCisJCXJldHVybiAwOworCisJcmV0ID0gcmVnbWFwX3Jl
YWQoZHNpLT5yZWdtYXAsIHJlZywgJnZhbCk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RFVl9F
UlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byByZWFkIE5XTCBEU0kgcmVnIDB4JXg6ICVkXG4iLAor
CQkJICAgICAgcmVnLCByZXQpOworCQlkc2ktPmVycm9yID0gcmV0OworCX0KKwlyZXR1cm4gdmFs
OworfQorCitzdGF0aWMgaW50IG53bF9kc2lfZ2V0X2RwaV9waXhlbF9mb3JtYXQoZW51bSBtaXBp
X2RzaV9waXhlbF9mb3JtYXQgZm9ybWF0KQoreworCXN3aXRjaCAoZm9ybWF0KSB7CisJY2FzZSBN
SVBJX0RTSV9GTVRfUkdCNTY1OgorCQlyZXR1cm4gTldMX0RTSV9QSVhFTF9GT1JNQVRfMTY7CisJ
Y2FzZSBNSVBJX0RTSV9GTVRfUkdCNjY2OgorCQlyZXR1cm4gTldMX0RTSV9QSVhFTF9GT1JNQVRf
MThMOworCWNhc2UgTUlQSV9EU0lfRk1UX1JHQjY2Nl9QQUNLRUQ6CisJCXJldHVybiBOV0xfRFNJ
X1BJWEVMX0ZPUk1BVF8xODsKKwljYXNlIE1JUElfRFNJX0ZNVF9SR0I4ODg6CisJCXJldHVybiBO
V0xfRFNJX1BJWEVMX0ZPUk1BVF8yNDsKKwlkZWZhdWx0OgorCQlyZXR1cm4gLUVJTlZBTDsKKwl9
Cit9CisKKy8qCisgKiBwczJiYyAtIFBpY29zZWNvbmRzIHRvIGJ5dGUgY2xvY2sgY3ljbGVzCisg
Ki8KK3N0YXRpYyB1MzIgcHMyYmMoc3RydWN0IG53bF9kc2kgKmRzaSwgdW5zaWduZWQgbG9uZyBs
b25nIHBzKQoreworCXUzMiBicHAgPSBtaXBpX2RzaV9waXhlbF9mb3JtYXRfdG9fYnBwKGRzaS0+
Zm9ybWF0KTsKKworCXJldHVybiBESVY2NF9VNjRfUk9VTkRfVVAocHMgKiBkc2ktPm1vZGUuY2xv
Y2sgKiBicHAsCisJCQkJICBkc2ktPmxhbmVzICogOCAqIE5TRUNfUEVSX1NFQyk7Cit9CisKKy8q
CisgKiB1aTJiYyAtIFVJIHRpbWUgcGVyaW9kcyB0byBieXRlIGNsb2NrIGN5Y2xlcworICovCitz
dGF0aWMgdTMyIHVpMmJjKHN0cnVjdCBud2xfZHNpICpkc2ksIHVuc2lnbmVkIGxvbmcgbG9uZyB1
aSkKK3sKKwl1MzIgYnBwID0gbWlwaV9kc2lfcGl4ZWxfZm9ybWF0X3RvX2JwcChkc2ktPmZvcm1h
dCk7CisKKwlyZXR1cm4gRElWNjRfVTY0X1JPVU5EX1VQKHVpICogZHNpLT5sYW5lcywKKwkJCQkg
IGRzaS0+bW9kZS5jbG9jayAqIDEwMDAgKiBicHApOworfQorCisvKgorICogdXMyYmMgLSBtaWNy
byBzZWNvbmRzIHRvIGxwIGNsb2NrIGN5Y2xlcworICovCitzdGF0aWMgdTMyIHVzMmxwKHUzMiBs
cF9jbGtfcmF0ZSwgdW5zaWduZWQgbG9uZyB1cykKK3sKKwlyZXR1cm4gRElWX1JPVU5EX1VQKHVz
ICogbHBfY2xrX3JhdGUsIFVTRUNfUEVSX1NFQyk7Cit9CisKK3N0YXRpYyBpbnQgbndsX2RzaV9j
b25maWdfaG9zdChzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXUzMiBjeWNsZXM7CisJc3RydWN0
IHBoeV9jb25maWd1cmVfb3B0c19taXBpX2RwaHkgKmNmZyA9ICZkc2ktPnBoeV9jZmcubWlwaV9k
cGh5OworCisJaWYgKGRzaS0+bGFuZXMgPCAxIHx8IGRzaS0+bGFuZXMgPiA0KQorCQlyZXR1cm4g
LUVJTlZBTDsKKworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiRFNJIExhbmVzICVk
XG4iLCBkc2ktPmxhbmVzKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfTlVNX0xB
TkVTLCBkc2ktPmxhbmVzIC0gMSk7CisKKwlpZiAoZHNpLT5kc2lfbW9kZV9mbGFncyAmIE1JUElf
RFNJX0NMT0NLX05PTl9DT05USU5VT1VTKSB7CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJ
X0NGR19OT05DT05USU5VT1VTX0NMSywgMHgwMSk7CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xf
RFNJX0NGR19BVVRPSU5TRVJUX0VPVFAsIDB4MDEpOworCX0gZWxzZSB7CisJCW53bF9kc2lfd3Jp
dGUoZHNpLCBOV0xfRFNJX0NGR19OT05DT05USU5VT1VTX0NMSywgMHgwMCk7CisJCW53bF9kc2lf
d3JpdGUoZHNpLCBOV0xfRFNJX0NGR19BVVRPSU5TRVJUX0VPVFAsIDB4MDApOworCX0KKworCS8q
IHZhbHVlcyBpbiBieXRlIGNsb2NrIGN5Y2xlcyAqLworCWN5Y2xlcyA9IHVpMmJjKGRzaSwgY2Zn
LT5jbGtfcHJlKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImNmZ190X3ByZTog
MHgleFxuIiwgY3ljbGVzKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfVF9QUkUs
IGN5Y2xlcyk7CisJY3ljbGVzID0gcHMyYmMoZHNpLCBjZmctPmxweCArIGNmZy0+Y2xrX3ByZXBh
cmUgKyBjZmctPmNsa196ZXJvKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImNm
Z190eF9nYXAgKHByZSk6IDB4JXhcbiIsIGN5Y2xlcyk7CisJY3ljbGVzICs9IHVpMmJjKGRzaSwg
Y2ZnLT5jbGtfcHJlKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImNmZ190X3Bv
c3Q6IDB4JXhcbiIsIGN5Y2xlcyk7CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfQ0ZHX1Rf
UE9TVCwgY3ljbGVzKTsKKwljeWNsZXMgPSBwczJiYyhkc2ksIGNmZy0+aHNfZXhpdCk7CisJRFJN
X0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJjZmdfdHhfZ2FwOiAweCV4XG4iLCBjeWNsZXMp
OworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NGR19UWF9HQVAsIGN5Y2xlcyk7CisKKwlu
d2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfRVhUUkFfQ01EU19BRlRFUl9FT1RQLCAweDAx
KTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfSFRYX1RPX0NPVU5ULCAweDAwKTsK
Kwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfTFJYX0hfVE9fQ09VTlQsIDB4MDApOwor
CW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NGR19CVEFfSF9UT19DT1VOVCwgMHgwMCk7CisJ
LyogSW4gTFAgY2xvY2sgY3ljbGVzICovCisJY3ljbGVzID0gdXMybHAoY2ZnLT5scF9jbGtfcmF0
ZSwgY2ZnLT53YWtldXApOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiY2ZnX3R3
YWtldXA6IDB4JXhcbiIsIGN5Y2xlcyk7CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfQ0ZH
X1RXQUtFVVAsIGN5Y2xlcyk7CisKKwlyZXR1cm4gbndsX2RzaV9jbGVhcl9lcnJvcihkc2kpOwor
fQorCitzdGF0aWMgaW50IG53bF9kc2lfY29uZmlnX2RwaShzdHJ1Y3QgbndsX2RzaSAqZHNpKQor
eworCXUzMiBtb2RlOworCWludCBjb2xvcl9mb3JtYXQ7CisJYm9vbCBidXJzdF9tb2RlOworCWlu
dCBoZnJvbnRfcG9yY2gsIGhiYWNrX3BvcmNoLCB2ZnJvbnRfcG9yY2gsIHZiYWNrX3BvcmNoOwor
CWludCBoc3luY19sZW4sIHZzeW5jX2xlbjsKKworCWhmcm9udF9wb3JjaCA9IGRzaS0+bW9kZS5o
c3luY19zdGFydCAtIGRzaS0+bW9kZS5oZGlzcGxheTsKKwloc3luY19sZW4gPSBkc2ktPm1vZGUu
aHN5bmNfZW5kIC0gZHNpLT5tb2RlLmhzeW5jX3N0YXJ0OworCWhiYWNrX3BvcmNoID0gZHNpLT5t
b2RlLmh0b3RhbCAtIGRzaS0+bW9kZS5oc3luY19lbmQ7CisKKwl2ZnJvbnRfcG9yY2ggPSBkc2kt
Pm1vZGUudnN5bmNfc3RhcnQgLSBkc2ktPm1vZGUudmRpc3BsYXk7CisJdnN5bmNfbGVuID0gZHNp
LT5tb2RlLnZzeW5jX2VuZCAtIGRzaS0+bW9kZS52c3luY19zdGFydDsKKwl2YmFja19wb3JjaCA9
IGRzaS0+bW9kZS52dG90YWwgLSBkc2ktPm1vZGUudnN5bmNfZW5kOworCisJRFJNX0RFVl9ERUJV
R19EUklWRVIoZHNpLT5kZXYsICJoZnJvbnRfcG9yY2ggPSAlZFxuIiwgaGZyb250X3BvcmNoKTsK
KwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImhiYWNrX3BvcmNoID0gJWRcbiIsIGhi
YWNrX3BvcmNoKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImhzeW5jX2xlbiA9
ICVkXG4iLCBoc3luY19sZW4pOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiaGRp
c3BsYXkgPSAlZFxuIiwgZHNpLT5tb2RlLmhkaXNwbGF5KTsKKwlEUk1fREVWX0RFQlVHX0RSSVZF
Uihkc2ktPmRldiwgInZmcm9udF9wb3JjaCA9ICVkXG4iLCB2ZnJvbnRfcG9yY2gpOworCURSTV9E
RVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAidmJhY2tfcG9yY2ggPSAlZFxuIiwgdmJhY2tfcG9y
Y2gpOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAidnN5bmNfbGVuID0gJWRcbiIs
IHZzeW5jX2xlbik7CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJ2YWN0aXZlID0g
JWRcbiIsIGRzaS0+bW9kZS52ZGlzcGxheSk7CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5k
ZXYsICJjbG9jayA9ICVkIGtIelxuIiwgZHNpLT5tb2RlLmNsb2NrKTsKKworCWNvbG9yX2Zvcm1h
dCA9IG53bF9kc2lfZ2V0X2RwaV9waXhlbF9mb3JtYXQoZHNpLT5mb3JtYXQpOworCWlmIChjb2xv
cl9mb3JtYXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJJbnZhbGlkIGNvbG9y
IGZvcm1hdCAweCV4XG4iLAorCQkJICAgICAgZHNpLT5mb3JtYXQpOworCQlyZXR1cm4gY29sb3Jf
Zm9ybWF0OworCX0KKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgInBpeGVsIGZtdCA9
ICVkXG4iLCBkc2ktPmZvcm1hdCk7CisKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9JTlRF
UkZBQ0VfQ09MT1JfQ09ESU5HLCBOV0xfRFNJX0RQSV8yNF9CSVQpOworCW53bF9kc2lfd3JpdGUo
ZHNpLCBOV0xfRFNJX1BJWEVMX0ZPUk1BVCwgY29sb3JfZm9ybWF0KTsKKwkvKgorCSAqIEFkanVz
dGluZyBpbnB1dCBwb2xhcml0eSBiYXNlZCBvbiB0aGUgdmlkZW8gbW9kZSByZXN1bHRzIGluCisJ
ICogYSBibGFjayBzY3JlZW4gc28gYWx3YXlzIHBpY2sgYWN0aXZlIGxvdzoKKwkgKi8KKwlud2xf
ZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9WU1lOQ19QT0xBUklUWSwKKwkJICAgICAgTldMX0RTSV9W
U1lOQ19QT0xBUklUWV9BQ1RJVkVfTE9XKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9I
U1lOQ19QT0xBUklUWSwKKwkJICAgICAgTldMX0RTSV9IU1lOQ19QT0xBUklUWV9BQ1RJVkVfTE9X
KTsKKworCWJ1cnN0X21vZGUgPSAoZHNpLT5kc2lfbW9kZV9mbGFncyAmIE1JUElfRFNJX01PREVf
VklERU9fQlVSU1QpICYmCisJCSAgICAgIShkc2ktPmRzaV9tb2RlX2ZsYWdzICYgTUlQSV9EU0lf
TU9ERV9WSURFT19TWU5DX1BVTFNFKTsKKworCWlmIChidXJzdF9tb2RlKSB7CisJCW53bF9kc2lf
d3JpdGUoZHNpLCBOV0xfRFNJX1ZJREVPX01PREUsIE5XTF9EU0lfVk1fQlVSU1RfTU9ERSk7CisJ
CW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1BJWEVMX0ZJRk9fU0VORF9MRVZFTCwgMjU2KTsK
Kwl9IGVsc2UgeworCQltb2RlID0gKChkc2ktPmRzaV9tb2RlX2ZsYWdzICYgTUlQSV9EU0lfTU9E
RV9WSURFT19TWU5DX1BVTFNFKSA/CisJCQkJTldMX0RTSV9WTV9CVVJTVF9NT0RFX1dJVEhfU1lO
Q19QVUxTRVMgOgorCQkJCU5XTF9EU0lfVk1fTk9OX0JVUlNUX01PREVfV0lUSF9TWU5DX0VWRU5U
Uyk7CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1ZJREVPX01PREUsIG1vZGUpOworCQlu
d2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9QSVhFTF9GSUZPX1NFTkRfTEVWRUwsCisJCQkgICAg
ICBkc2ktPm1vZGUuaGRpc3BsYXkpOworCX0KKworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJ
X0hGUCwgaGZyb250X3BvcmNoKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9IQlAsIGhi
YWNrX3BvcmNoKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9IU0EsIGhzeW5jX2xlbik7
CisKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9FTkFCTEVfTVVMVF9QS1RTLCAweDApOwor
CW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0JMTFBfTU9ERSwgMHgxKTsKKwlud2xfZHNpX3dy
aXRlKGRzaSwgTldMX0RTSV9VU0VfTlVMTF9QS1RfQkxMUCwgMHgwKTsKKwlud2xfZHNpX3dyaXRl
KGRzaSwgTldMX0RTSV9WQywgMHgwKTsKKworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1BJ
WEVMX1BBWUxPQURfU0laRSwgZHNpLT5tb2RlLmhkaXNwbGF5KTsKKwlud2xfZHNpX3dyaXRlKGRz
aSwgTldMX0RTSV9WQUNUSVZFLCBkc2ktPm1vZGUudmRpc3BsYXkgLSAxKTsKKwlud2xfZHNpX3dy
aXRlKGRzaSwgTldMX0RTSV9WQlAsIHZiYWNrX3BvcmNoKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwg
TldMX0RTSV9WRlAsIHZmcm9udF9wb3JjaCk7CisKKwlyZXR1cm4gbndsX2RzaV9jbGVhcl9lcnJv
cihkc2kpOworfQorCitzdGF0aWMgaW50IG53bF9kc2lfaW5pdF9pbnRlcnJ1cHRzKHN0cnVjdCBu
d2xfZHNpICpkc2kpCit7CisJdTMyIGlycV9lbmFibGU7CisKKwlud2xfZHNpX3dyaXRlKGRzaSwg
TldMX0RTSV9JUlFfTUFTSywgMHhmZmZmZmZmZik7CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9E
U0lfSVJRX01BU0syLCAweDcpOworCisJaXJxX2VuYWJsZSA9IH4odTMyKShOV0xfRFNJX1RYX1BL
VF9ET05FX01BU0sgfAorCQkJICAgIE5XTF9EU0lfUlhfUEtUX0hEUl9SQ1ZEX01BU0sgfAorCQkJ
ICAgIE5XTF9EU0lfVFhfRklGT19PVkZMV19NQVNLIHwKKwkJCSAgICBOV0xfRFNJX0hTX1RYX1RJ
TUVPVVRfTUFTSyk7CisKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9JUlFfTUFTSywgaXJx
X2VuYWJsZSk7CisKKwlyZXR1cm4gbndsX2RzaV9jbGVhcl9lcnJvcihkc2kpOworfQorCitzdGF0
aWMgaW50IG53bF9kc2lfaG9zdF9hdHRhY2goc3RydWN0IG1pcGlfZHNpX2hvc3QgKmRzaV9ob3N0
LAorCQkJICAgICAgIHN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRldmljZSkKK3sKKwlzdHJ1Y3Qg
bndsX2RzaSAqZHNpID0gY29udGFpbmVyX29mKGRzaV9ob3N0LCBzdHJ1Y3QgbndsX2RzaSwgZHNp
X2hvc3QpOworCXN0cnVjdCBkZXZpY2UgKmRldiA9IGRzaS0+ZGV2OworCisJRFJNX0RFVl9JTkZP
KGRldiwgImxhbmVzPSV1LCBmb3JtYXQ9MHgleCBmbGFncz0weCVseFxuIiwgZGV2aWNlLT5sYW5l
cywKKwkJICAgICBkZXZpY2UtPmZvcm1hdCwgZGV2aWNlLT5tb2RlX2ZsYWdzKTsKKworCWlmIChk
ZXZpY2UtPmxhbmVzIDwgMSB8fCBkZXZpY2UtPmxhbmVzID4gNCkKKwkJcmV0dXJuIC1FSU5WQUw7
CisKKwlkc2ktPmxhbmVzID0gZGV2aWNlLT5sYW5lczsKKwlkc2ktPmZvcm1hdCA9IGRldmljZS0+
Zm9ybWF0OworCWRzaS0+ZHNpX21vZGVfZmxhZ3MgPSBkZXZpY2UtPm1vZGVfZmxhZ3M7CisKKwly
ZXR1cm4gMDsKK30KKworc3RhdGljIGJvb2wgbndsX2RzaV9yZWFkX3BhY2tldChzdHJ1Y3Qgbnds
X2RzaSAqZHNpLCB1MzIgc3RhdHVzKQoreworCXN0cnVjdCBkZXZpY2UgKmRldiA9IGRzaS0+ZGV2
OworCXN0cnVjdCBud2xfZHNpX3RyYW5zZmVyICp4ZmVyID0gZHNpLT54ZmVyOworCWludCBlcnI7
CisJdTggKnBheWxvYWQgPSB4ZmVyLT5tc2ctPnJ4X2J1ZjsKKwl1MzIgdmFsOworCXUxNiB3b3Jk
X2NvdW50OworCXU4IGNoYW5uZWw7CisJdTggZGF0YV90eXBlOworCisJeGZlci0+c3RhdHVzID0g
MDsKKworCWlmICh4ZmVyLT5yeF93b3JkX2NvdW50ID09IDApIHsKKwkJaWYgKCEoc3RhdHVzICYg
TldMX0RTSV9SWF9QS1RfSERSX1JDVkQpKQorCQkJcmV0dXJuIGZhbHNlOworCQkvKiBHZXQgdGhl
IFJYIGhlYWRlciBhbmQgcGFyc2UgaXQgKi8KKwkJdmFsID0gbndsX2RzaV9yZWFkKGRzaSwgTldM
X0RTSV9SWF9QS1RfSEVBREVSKTsKKwkJZXJyID0gbndsX2RzaV9jbGVhcl9lcnJvcihkc2kpOwor
CQlpZiAoZXJyKQorCQkJeGZlci0+c3RhdHVzID0gZXJyOworCQl3b3JkX2NvdW50ID0gTldMX0RT
SV9XQyh2YWwpOworCQljaGFubmVsID0gTldMX0RTSV9SWF9WQyh2YWwpOworCQlkYXRhX3R5cGUg
PSBOV0xfRFNJX1JYX0RUKHZhbCk7CisKKwkJaWYgKGNoYW5uZWwgIT0geGZlci0+bXNnLT5jaGFu
bmVsKSB7CisJCQlEUk1fREVWX0VSUk9SKGRldiwKKwkJCQkgICAgICAiWyUwMlhdIENoYW5uZWwg
bWlzbWF0Y2ggKCV1ICE9ICV1KVxuIiwKKwkJCQkgICAgICB4ZmVyLT5jbWQsIGNoYW5uZWwsIHhm
ZXItPm1zZy0+Y2hhbm5lbCk7CisJCQl4ZmVyLT5zdGF0dXMgPSAtRUlOVkFMOworCQkJcmV0dXJu
IHRydWU7CisJCX0KKworCQlzd2l0Y2ggKGRhdGFfdHlwZSkgeworCQljYXNlIE1JUElfRFNJX1JY
X0dFTkVSSUNfU0hPUlRfUkVBRF9SRVNQT05TRV8yQllURToKKwkJCWZhbGx0aHJvdWdoOworCQlj
YXNlIE1JUElfRFNJX1JYX0RDU19TSE9SVF9SRUFEX1JFU1BPTlNFXzJCWVRFOgorCQkJaWYgKHhm
ZXItPm1zZy0+cnhfbGVuID4gMSkgeworCQkJCS8qIHJlYWQgc2Vjb25kIGJ5dGUgKi8KKwkJCQlw
YXlsb2FkWzFdID0gd29yZF9jb3VudCA+PiA4OworCQkJCSsreGZlci0+cnhfbGVuOworCQkJfQor
CQkJZmFsbHRocm91Z2g7CisJCWNhc2UgTUlQSV9EU0lfUlhfR0VORVJJQ19TSE9SVF9SRUFEX1JF
U1BPTlNFXzFCWVRFOgorCQkJZmFsbHRocm91Z2g7CisJCWNhc2UgTUlQSV9EU0lfUlhfRENTX1NI
T1JUX1JFQURfUkVTUE9OU0VfMUJZVEU6CisJCQlpZiAoeGZlci0+bXNnLT5yeF9sZW4gPiAwKSB7
CisJCQkJLyogcmVhZCBmaXJzdCBieXRlICovCisJCQkJcGF5bG9hZFswXSA9IHdvcmRfY291bnQg
JiAweGZmOworCQkJCSsreGZlci0+cnhfbGVuOworCQkJfQorCQkJeGZlci0+c3RhdHVzID0geGZl
ci0+cnhfbGVuOworCQkJcmV0dXJuIHRydWU7CisJCWNhc2UgTUlQSV9EU0lfUlhfQUNLTk9XTEVE
R0VfQU5EX0VSUk9SX1JFUE9SVDoKKwkJCXdvcmRfY291bnQgJj0gMHhmZjsKKwkJCURSTV9ERVZf
RVJST1IoZGV2LCAiWyUwMlhdIERTSSBlcnJvciByZXBvcnQ6IDB4JTAyeFxuIiwKKwkJCQkgICAg
ICB4ZmVyLT5jbWQsIHdvcmRfY291bnQpOworCQkJeGZlci0+c3RhdHVzID0gLUVQUk9UTzsKKwkJ
CXJldHVybiB0cnVlOworCQl9CisKKwkJaWYgKHdvcmRfY291bnQgPiB4ZmVyLT5tc2ctPnJ4X2xl
bikgeworCQkJRFJNX0RFVl9FUlJPUigKKwkJCQlkZXYsCisJCQkJIlslMDJYXSBSZWNlaXZlIGJ1
ZmZlciB0b28gc21hbGw6ICV6dSAoPCAldSlcbiIsCisJCQkJeGZlci0+Y21kLCB4ZmVyLT5tc2ct
PnJ4X2xlbiwgd29yZF9jb3VudCk7CisJCQl4ZmVyLT5zdGF0dXMgPSAtRUlOVkFMOworCQkJcmV0
dXJuIHRydWU7CisJCX0KKworCQl4ZmVyLT5yeF93b3JkX2NvdW50ID0gd29yZF9jb3VudDsKKwl9
IGVsc2UgeworCQkvKiBTZXQgd29yZF9jb3VudCBmcm9tIHByZXZpb3VzIGhlYWRlciByZWFkICov
CisJCXdvcmRfY291bnQgPSB4ZmVyLT5yeF93b3JkX2NvdW50OworCX0KKworCS8qIElmIFJYIHBh
eWxvYWQgaXMgbm90IHlldCByZWNlaXZlZCwgd2FpdCBmb3IgaXQgKi8KKwlpZiAoIShzdGF0dXMg
JiBOV0xfRFNJX1JYX1BLVF9QQVlMT0FEX0RBVEFfUkNWRCkpCisJCXJldHVybiBmYWxzZTsKKwor
CS8qIFJlYWQgdGhlIFJYIHBheWxvYWQgKi8KKwl3aGlsZSAod29yZF9jb3VudCA+PSA0KSB7CisJ
CXZhbCA9IG53bF9kc2lfcmVhZChkc2ksIE5XTF9EU0lfUlhfUEFZTE9BRCk7CisJCXBheWxvYWRb
MF0gPSAodmFsID4+IDApICYgMHhmZjsKKwkJcGF5bG9hZFsxXSA9ICh2YWwgPj4gOCkgJiAweGZm
OworCQlwYXlsb2FkWzJdID0gKHZhbCA+PiAxNikgJiAweGZmOworCQlwYXlsb2FkWzNdID0gKHZh
bCA+PiAyNCkgJiAweGZmOworCQlwYXlsb2FkICs9IDQ7CisJCXhmZXItPnJ4X2xlbiArPSA0Owor
CQl3b3JkX2NvdW50IC09IDQ7CisJfQorCisJaWYgKHdvcmRfY291bnQgPiAwKSB7CisJCXZhbCA9
IG53bF9kc2lfcmVhZChkc2ksIE5XTF9EU0lfUlhfUEFZTE9BRCk7CisJCXN3aXRjaCAod29yZF9j
b3VudCkgeworCQljYXNlIDM6CisJCQlwYXlsb2FkWzJdID0gKHZhbCA+PiAxNikgJiAweGZmOwor
CQkJKyt4ZmVyLT5yeF9sZW47CisJCQlmYWxsdGhyb3VnaDsKKwkJY2FzZSAyOgorCQkJcGF5bG9h
ZFsxXSA9ICh2YWwgPj4gOCkgJiAweGZmOworCQkJKyt4ZmVyLT5yeF9sZW47CisJCQlmYWxsdGhy
b3VnaDsKKwkJY2FzZSAxOgorCQkJcGF5bG9hZFswXSA9ICh2YWwgPj4gMCkgJiAweGZmOworCQkJ
Kyt4ZmVyLT5yeF9sZW47CisJCQlicmVhazsKKwkJfQorCX0KKworCXhmZXItPnN0YXR1cyA9IHhm
ZXItPnJ4X2xlbjsKKwllcnIgPSBud2xfZHNpX2NsZWFyX2Vycm9yKGRzaSk7CisJaWYgKGVycikK
KwkJeGZlci0+c3RhdHVzID0gZXJyOworCisJcmV0dXJuIHRydWU7Cit9CisKK3N0YXRpYyB2b2lk
IG53bF9kc2lfZmluaXNoX3RyYW5zbWlzc2lvbihzdHJ1Y3QgbndsX2RzaSAqZHNpLCB1MzIgc3Rh
dHVzKQoreworCXN0cnVjdCBud2xfZHNpX3RyYW5zZmVyICp4ZmVyID0gZHNpLT54ZmVyOworCWJv
b2wgZW5kX3BhY2tldCA9IGZhbHNlOworCisJaWYgKCF4ZmVyKQorCQlyZXR1cm47CisKKwlpZiAo
eGZlci0+ZGlyZWN0aW9uID09IERTSV9QQUNLRVRfU0VORCAmJgorCSAgICBzdGF0dXMgJiBOV0xf
RFNJX1RYX1BLVF9ET05FKSB7CisJCXhmZXItPnN0YXR1cyA9IHhmZXItPnR4X2xlbjsKKwkJZW5k
X3BhY2tldCA9IHRydWU7CisJfSBlbHNlIGlmIChzdGF0dXMgJiBOV0xfRFNJX0RQSFlfRElSRUNU
SU9OICYmCisJCSAgICgoc3RhdHVzICYgKE5XTF9EU0lfUlhfUEtUX0hEUl9SQ1ZEIHwKKwkJCSAg
ICAgICBOV0xfRFNJX1JYX1BLVF9QQVlMT0FEX0RBVEFfUkNWRCkpKSkgeworCQllbmRfcGFja2V0
ID0gbndsX2RzaV9yZWFkX3BhY2tldChkc2ksIHN0YXR1cyk7CisJfQorCisJaWYgKGVuZF9wYWNr
ZXQpCisJCWNvbXBsZXRlKCZ4ZmVyLT5jb21wbGV0ZWQpOworfQorCitzdGF0aWMgdm9pZCBud2xf
ZHNpX2JlZ2luX3RyYW5zbWlzc2lvbihzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXN0cnVjdCBu
d2xfZHNpX3RyYW5zZmVyICp4ZmVyID0gZHNpLT54ZmVyOworCXN0cnVjdCBtaXBpX2RzaV9wYWNr
ZXQgKnBrdCA9ICZ4ZmVyLT5wYWNrZXQ7CisJY29uc3QgdTggKnBheWxvYWQ7CisJc2l6ZV90IGxl
bmd0aDsKKwl1MTYgd29yZF9jb3VudDsKKwl1OCBoc19tb2RlOworCXUzMiB2YWw7CisJdTMyIGhz
X3dvcmthcm91bmQgPSAwOworCisJLyogU2VuZCB0aGUgcGF5bG9hZCwgaWYgYW55ICovCisJbGVu
Z3RoID0gcGt0LT5wYXlsb2FkX2xlbmd0aDsKKwlwYXlsb2FkID0gcGt0LT5wYXlsb2FkOworCisJ
d2hpbGUgKGxlbmd0aCA+PSA0KSB7CisJCXZhbCA9ICoodTMyICopcGF5bG9hZDsKKwkJaHNfd29y
a2Fyb3VuZCB8PSAhKHZhbCAmIDB4RkZGRjAwKTsKKwkJbndsX2RzaV93cml0ZShkc2ksIE5XTF9E
U0lfVFhfUEFZTE9BRCwgdmFsKTsKKwkJcGF5bG9hZCArPSA0OworCQlsZW5ndGggLT0gNDsKKwl9
CisJLyogU2VuZCB0aGUgcmVzdCBvZiB0aGUgcGF5bG9hZCAqLworCXZhbCA9IDA7CisJc3dpdGNo
IChsZW5ndGgpIHsKKwljYXNlIDM6CisJCXZhbCB8PSBwYXlsb2FkWzJdIDw8IDE2OworCQlmYWxs
dGhyb3VnaDsKKwljYXNlIDI6CisJCXZhbCB8PSBwYXlsb2FkWzFdIDw8IDg7CisJCWhzX3dvcmth
cm91bmQgfD0gISh2YWwgJiAweEZGRkYwMCk7CisJCWZhbGx0aHJvdWdoOworCWNhc2UgMToKKwkJ
dmFsIHw9IHBheWxvYWRbMF07CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1RYX1BBWUxP
QUQsIHZhbCk7CisJCWJyZWFrOworCX0KKwl4ZmVyLT50eF9sZW4gPSBwa3QtPnBheWxvYWRfbGVu
Z3RoOworCisJLyoKKwkgKiBTZW5kIHRoZSBoZWFkZXIKKwkgKiBoZWFkZXJbMF0gPSBWaXJ0dWFs
IENoYW5uZWwgKyBEYXRhIFR5cGUKKwkgKiBoZWFkZXJbMV0gPSBXb3JkIENvdW50IExTQiAoTFAp
IG9yIGZpcnN0IHBhcmFtIChTUCkKKwkgKiBoZWFkZXJbMl0gPSBXb3JkIENvdW50IE1TQiAoTFAp
IG9yIHNlY29uZCBwYXJhbSAoU1ApCisJICovCisJd29yZF9jb3VudCA9IHBrdC0+aGVhZGVyWzFd
IHwgKHBrdC0+aGVhZGVyWzJdIDw8IDgpOworCWlmIChoc193b3JrYXJvdW5kICYmIChkc2ktPnF1
aXJrcyAmIEUxMTQxOF9IU19NT0RFX1FVSVJLKSkgeworCQlEUk1fREVWX0RFQlVHX0RSSVZFUihk
c2ktPmRldiwKKwkJCQkgICAgICJVc2luZyBocyBtb2RlIHdvcmthcm91bmQgZm9yIGNtZCAweCV4
XG4iLAorCQkJCSAgICAgeGZlci0+Y21kKTsKKwkJaHNfbW9kZSA9IDE7CisJfSBlbHNlIHsKKwkJ
aHNfbW9kZSA9ICh4ZmVyLT5tc2ctPmZsYWdzICYgTUlQSV9EU0lfTVNHX1VTRV9MUE0pID8gMCA6
IDE7CisJfQorCXZhbCA9IE5XTF9EU0lfV0Mod29yZF9jb3VudCkgfCBOV0xfRFNJX1RYX1ZDKHhm
ZXItPm1zZy0+Y2hhbm5lbCkgfAorCSAgICAgIE5XTF9EU0lfVFhfRFQoeGZlci0+bXNnLT50eXBl
KSB8IE5XTF9EU0lfSFNfU0VMKGhzX21vZGUpIHwKKwkgICAgICBOV0xfRFNJX0JUQV9UWCh4ZmVy
LT5uZWVkX2J0YSk7CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfUEtUX0NPTlRST0wsIHZh
bCk7CisKKwkvKiBTZW5kIHBhY2tldCBjb21tYW5kICovCisJbndsX2RzaV93cml0ZShkc2ksIE5X
TF9EU0lfU0VORF9QQUNLRVQsIDB4MSk7Cit9CisKK3N0YXRpYyBzc2l6ZV90IG53bF9kc2lfaG9z
dF90cmFuc2ZlcihzdHJ1Y3QgbWlwaV9kc2lfaG9zdCAqZHNpX2hvc3QsCisJCQkJICAgICBjb25z
dCBzdHJ1Y3QgbWlwaV9kc2lfbXNnICptc2cpCit7CisJc3RydWN0IG53bF9kc2kgKmRzaSA9IGNv
bnRhaW5lcl9vZihkc2lfaG9zdCwgc3RydWN0IG53bF9kc2ksIGRzaV9ob3N0KTsKKwlzdHJ1Y3Qg
bndsX2RzaV90cmFuc2ZlciB4ZmVyOworCXNzaXplX3QgcmV0ID0gMDsKKworCS8qIENyZWF0ZSBw
YWNrZXQgdG8gYmUgc2VudCAqLworCWRzaS0+eGZlciA9ICZ4ZmVyOworCXJldCA9IG1pcGlfZHNp
X2NyZWF0ZV9wYWNrZXQoJnhmZXIucGFja2V0LCBtc2cpOworCWlmIChyZXQgPCAwKSB7CisJCWRz
aS0+eGZlciA9IE5VTEw7CisJCXJldHVybiByZXQ7CisJfQorCisJaWYgKChtc2ctPnR5cGUgJiBN
SVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8wX1BBUkFNIHx8CisJICAgICBtc2ctPnR5cGUg
JiBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8xX1BBUkFNIHx8CisJICAgICBtc2ctPnR5
cGUgJiBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8yX1BBUkFNIHx8CisJICAgICBtc2ct
PnR5cGUgJiBNSVBJX0RTSV9EQ1NfUkVBRCkgJiYKKwkgICAgbXNnLT5yeF9sZW4gPiAwICYmIG1z
Zy0+cnhfYnVmICE9IE5VTEwpCisJCXhmZXIuZGlyZWN0aW9uID0gRFNJX1BBQ0tFVF9SRUNFSVZF
OworCWVsc2UKKwkJeGZlci5kaXJlY3Rpb24gPSBEU0lfUEFDS0VUX1NFTkQ7CisKKwl4ZmVyLm5l
ZWRfYnRhID0gKHhmZXIuZGlyZWN0aW9uID09IERTSV9QQUNLRVRfUkVDRUlWRSk7CisJeGZlci5u
ZWVkX2J0YSB8PSAobXNnLT5mbGFncyAmIE1JUElfRFNJX01TR19SRVFfQUNLKSA/IDEgOiAwOwor
CXhmZXIubXNnID0gbXNnOworCXhmZXIuc3RhdHVzID0gLUVUSU1FRE9VVDsKKwl4ZmVyLnJ4X3dv
cmRfY291bnQgPSAwOworCXhmZXIucnhfbGVuID0gMDsKKwl4ZmVyLmNtZCA9IDB4MDA7CisJaWYg
KG1zZy0+dHhfbGVuID4gMCkKKwkJeGZlci5jbWQgPSAoKHU4ICopKG1zZy0+dHhfYnVmKSlbMF07
CisJaW5pdF9jb21wbGV0aW9uKCZ4ZmVyLmNvbXBsZXRlZCk7CisKKwlyZXQgPSBjbGtfcHJlcGFy
ZV9lbmFibGUoZHNpLT5yeF9lc2NfY2xrKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VS
Uk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGVuYWJsZSByeF9lc2MgY2xrOiAlemRcbiIsCisJCQkg
ICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2kt
PmRldiwgIkVuYWJsZWQgcnhfZXNjIGNsayBAJWx1IEh6XG4iLAorCQkJICAgICBjbGtfZ2V0X3Jh
dGUoZHNpLT5yeF9lc2NfY2xrKSk7CisKKwkvKiBJbml0aWF0ZSB0aGUgRFNJIHBhY2tldCB0cmFu
c21pc2lvbiAqLworCW53bF9kc2lfYmVnaW5fdHJhbnNtaXNzaW9uKGRzaSk7CisKKwlpZiAoIXdh
aXRfZm9yX2NvbXBsZXRpb25fdGltZW91dCgmeGZlci5jb21wbGV0ZWQsCisJCQkJCSBOV0xfRFNJ
X01JUElfRklGT19USU1FT1VUKSkgeworCQlEUk1fREVWX0VSUk9SKGRzaV9ob3N0LT5kZXYsICJb
JTAyWF0gRFNJIHRyYW5zZmVyIHRpbWVkIG91dFxuIiwKKwkJCSAgICAgIHhmZXIuY21kKTsKKwkJ
cmV0ID0gLUVUSU1FRE9VVDsKKwl9IGVsc2UgeworCQlyZXQgPSB4ZmVyLnN0YXR1czsKKwl9CisK
KwljbGtfZGlzYWJsZV91bnByZXBhcmUoZHNpLT5yeF9lc2NfY2xrKTsKKworCXJldHVybiByZXQ7
Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgbWlwaV9kc2lfaG9zdF9vcHMgbndsX2RzaV9ob3N0
X29wcyA9IHsKKwkuYXR0YWNoID0gbndsX2RzaV9ob3N0X2F0dGFjaCwKKwkudHJhbnNmZXIgPSBu
d2xfZHNpX2hvc3RfdHJhbnNmZXIsCit9OworCitzdGF0aWMgaXJxcmV0dXJuX3QgbndsX2RzaV9p
cnFfaGFuZGxlcihpbnQgaXJxLCB2b2lkICpkYXRhKQoreworCXUzMiBpcnFfc3RhdHVzOworCXN0
cnVjdCBud2xfZHNpICpkc2kgPSBkYXRhOworCisJaXJxX3N0YXR1cyA9IG53bF9kc2lfcmVhZChk
c2ksIE5XTF9EU0lfSVJRX1NUQVRVUyk7CisKKwlpZiAoaXJxX3N0YXR1cyAmIE5XTF9EU0lfVFhf
RklGT19PVkZMVykKKwkJRFJNX0RFVl9FUlJPUl9SQVRFTElNSVRFRChkc2ktPmRldiwgInR4IGZp
Zm8gb3ZlcmZsb3dcbiIpOworCisJaWYgKGlycV9zdGF0dXMgJiBOV0xfRFNJX0hTX1RYX1RJTUVP
VVQpCisJCURSTV9ERVZfRVJST1JfUkFURUxJTUlURUQoZHNpLT5kZXYsICJIUyB0eCB0aW1lb3V0
XG4iKTsKKworCWlmIChpcnFfc3RhdHVzICYgTldMX0RTSV9UWF9QS1RfRE9ORSB8fAorCSAgICBp
cnFfc3RhdHVzICYgTldMX0RTSV9SWF9QS1RfSERSX1JDVkQgfHwKKwkgICAgaXJxX3N0YXR1cyAm
IE5XTF9EU0lfUlhfUEtUX1BBWUxPQURfREFUQV9SQ1ZEKQorCQlud2xfZHNpX2ZpbmlzaF90cmFu
c21pc3Npb24oZHNpLCBpcnFfc3RhdHVzKTsKKworCXJldHVybiBJUlFfSEFORExFRDsKK30KKwor
c3RhdGljIGludCBud2xfZHNpX2VuYWJsZShzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXN0cnVj
dCBkZXZpY2UgKmRldiA9IGRzaS0+ZGV2OworCXVuaW9uIHBoeV9jb25maWd1cmVfb3B0cyAqcGh5
X2NmZyA9ICZkc2ktPnBoeV9jZmc7CisJaW50IHJldDsKKworCWlmICghZHNpLT5sYW5lcykgewor
CQlEUk1fREVWX0VSUk9SKGRldiwgIk5lZWQgRFNJIGxhbmVzOiAlZFxuIiwgZHNpLT5sYW5lcyk7
CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCXJldCA9IHBoeV9pbml0KGRzaS0+cGh5KTsKKwlp
ZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRldiwgIkZhaWxlZCB0byBpbml0IERTSSBw
aHk6ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKworCXJldCA9IHBoeV9jb25maWd1
cmUoZHNpLT5waHksIHBoeV9jZmcpOworCWlmIChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1Io
ZGV2LCAiRmFpbGVkIHRvIGNvbmZpZ3VyZSBEU0kgcGh5OiAlZFxuIiwgcmV0KTsKKwkJZ290byB1
bmluaXRfcGh5OworCX0KKworCXJldCA9IGNsa19wcmVwYXJlX2VuYWJsZShkc2ktPnR4X2VzY19j
bGspOworCWlmIChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQg
dG8gZW5hYmxlIHR4X2VzYyBjbGs6ICVkXG4iLAorCQkJICAgICAgcmV0KTsKKwkJZ290byB1bmlu
aXRfcGh5OworCX0KKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgIkVuYWJsZWQgdHhf
ZXNjIGNsayBAJWx1IEh6XG4iLAorCQkJICAgICBjbGtfZ2V0X3JhdGUoZHNpLT50eF9lc2NfY2xr
KSk7CisKKwlyZXQgPSBud2xfZHNpX2NvbmZpZ19ob3N0KGRzaSk7CisJaWYgKHJldCA8IDApIHsK
KwkJRFJNX0RFVl9FUlJPUihkZXYsICJGYWlsZWQgdG8gc2V0IHVwIERTSTogJWQiLCByZXQpOwor
CQlnb3RvIGRpc2FibGVfY2xvY2s7CisJfQorCisJcmV0ID0gbndsX2RzaV9jb25maWdfZHBpKGRz
aSk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RFVl9FUlJPUihkZXYsICJGYWlsZWQgdG8gc2V0
IHVwIERQSTogJWQiLCByZXQpOworCQlnb3RvIGRpc2FibGVfY2xvY2s7CisJfQorCisJcmV0ID0g
cGh5X3Bvd2VyX29uKGRzaS0+cGh5KTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9S
KGRldiwgIkZhaWxlZCB0byBwb3dlciBvbiBEUEhZICglZClcbiIsIHJldCk7CisJCWdvdG8gZGlz
YWJsZV9jbG9jazsKKwl9CisKKwlyZXQgPSBud2xfZHNpX2luaXRfaW50ZXJydXB0cyhkc2kpOwor
CWlmIChyZXQgPCAwKQorCQlnb3RvIHBvd2VyX29mZl9waHk7CisKKwlyZXR1cm4gcmV0OworCitw
b3dlcl9vZmZfcGh5OgorCXBoeV9wb3dlcl9vZmYoZHNpLT5waHkpOworZGlzYWJsZV9jbG9jazoK
KwljbGtfZGlzYWJsZV91bnByZXBhcmUoZHNpLT50eF9lc2NfY2xrKTsKK3VuaW5pdF9waHk6CisJ
cGh5X2V4aXQoZHNpLT5waHkpOworCisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCBud2xf
ZHNpX2Rpc2FibGUoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYg
PSBkc2ktPmRldjsKKworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRldiwgIkRpc2FibGluZyBjbG9j
a3MgYW5kIHBoeVxuIik7CisKKwlwaHlfcG93ZXJfb2ZmKGRzaS0+cGh5KTsKKwlwaHlfZXhpdChk
c2ktPnBoeSk7CisKKwkvKiBEaXNhYmxpbmcgdGhlIGNsb2NrIGJlZm9yZSB0aGUgcGh5IGJyZWFr
cyBlbmFibGluZyBkc2kgYWdhaW4gKi8KKwljbGtfZGlzYWJsZV91bnByZXBhcmUoZHNpLT50eF9l
c2NfY2xrKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgdm9pZCBud2xfZHNpX2JyaWRnZV9k
aXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCit7CisJc3RydWN0IG53bF9kc2kgKmRz
aSA9IGJyaWRnZV90b19kc2koYnJpZGdlKTsKKwlpbnQgcmV0OworCisJbndsX2RzaV9kaXNhYmxl
KGRzaSk7CisKKwlyZXQgPSByZXNldF9jb250cm9sX2Fzc2VydChkc2ktPnJzdF9kcGkpOworCWlm
IChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gYXNzZXJ0
IERQSTogJWRcbiIsIHJldCk7CisJCXJldHVybjsKKwl9CisJcmV0ID0gcmVzZXRfY29udHJvbF9h
c3NlcnQoZHNpLT5yc3RfYnl0ZSk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RFVl9FUlJPUihk
c2ktPmRldiwgIkZhaWxlZCB0byBhc3NlcnQgRVNDOiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJuOwor
CX0KKwlyZXQgPSByZXNldF9jb250cm9sX2Fzc2VydChkc2ktPnJzdF9lc2MpOworCWlmIChyZXQg
PCAwKSB7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gYXNzZXJ0IEJZVEU6
ICVkXG4iLCByZXQpOworCQlyZXR1cm47CisJfQorCXJldCA9IHJlc2V0X2NvbnRyb2xfYXNzZXJ0
KGRzaS0+cnN0X3BjbGspOworCWlmIChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZHNpLT5k
ZXYsICJGYWlsZWQgdG8gYXNzZXJ0IFBDTEs6ICVkXG4iLCByZXQpOworCQlyZXR1cm47CisJfQor
CisJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKGRzaS0+Y29yZV9jbGspOworCWNsa19kaXNhYmxlX3Vu
cHJlcGFyZShkc2ktPmxjZGlmX2Nsayk7CisKKwlwbV9ydW50aW1lX3B1dChkc2ktPmRldik7Cit9
CisKK3N0YXRpYyBpbnQgbndsX2RzaV9nZXRfZHBoeV9wYXJhbXMoc3RydWN0IG53bF9kc2kgKmRz
aSwKKwkJCQkgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwKKwkJCQkgICB1
bmlvbiBwaHlfY29uZmlndXJlX29wdHMgKnBoeV9vcHRzKQoreworCXVuc2lnbmVkIGxvbmcgcmF0
ZTsKKwlpbnQgcmV0OworCisJaWYgKGRzaS0+bGFuZXMgPCAxIHx8IGRzaS0+bGFuZXMgPiA0KQor
CQlyZXR1cm4gLUVJTlZBTDsKKworCS8qCisJICogU28gZmFyIHRoZSBEUEhZIHNwZWMgbWluaW1h
bCB0aW1pbmdzIHdvcmsgZm9yIGJvdGggbWl4ZWwKKwkgKiBkcGh5IGFuZCBud2wgZHNpIGhvc3QK
KwkgKi8KKwlyZXQgPSBwaHlfbWlwaV9kcGh5X2dldF9kZWZhdWx0X2NvbmZpZygKKwkJbW9kZS0+
Y2xvY2sgKiAxMDAwLAorCQltaXBpX2RzaV9waXhlbF9mb3JtYXRfdG9fYnBwKGRzaS0+Zm9ybWF0
KSwgZHNpLT5sYW5lcywKKwkJJnBoeV9vcHRzLT5taXBpX2RwaHkpOworCWlmIChyZXQgPCAwKQor
CQlyZXR1cm4gcmV0OworCisJcmF0ZSA9IGNsa19nZXRfcmF0ZShkc2ktPnR4X2VzY19jbGspOwor
CURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiTFAgY2xrIGlzIEAlbHUgSHpcbiIsIHJh
dGUpOworCXBoeV9vcHRzLT5taXBpX2RwaHkubHBfY2xrX3JhdGUgPSByYXRlOworCisJcmV0dXJu
IDA7Cit9CisKK3N0YXRpYyBib29sIG53bF9kc2lfYnJpZGdlX21vZGVfZml4dXAoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZSAqbW9kZSwKKwkJCQkgICAgICBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9k
ZSkKK3sKKwkvKiBBdCBsZWFzdCBMQ0RJRiArIE5XTCBuZWVkcyBhY3RpdmUgaGlnaCBzeW5jICov
CisJYWRqdXN0ZWRfbW9kZS0+ZmxhZ3MgfD0gKERSTV9NT0RFX0ZMQUdfUEhTWU5DIHwgRFJNX01P
REVfRkxBR19QVlNZTkMpOworCWFkanVzdGVkX21vZGUtPmZsYWdzICY9IH4oRFJNX01PREVfRkxB
R19OSFNZTkMgfCBEUk1fTU9ERV9GTEFHX05WU1lOQyk7CisKKwlyZXR1cm4gdHJ1ZTsKK30KKwor
c3RhdGljIGVudW0gZHJtX21vZGVfc3RhdHVzCitud2xfZHNpX2JyaWRnZV9tb2RlX3ZhbGlkKHN0
cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlICptb2RlKQoreworCXN0cnVjdCBud2xfZHNpICpkc2kgPSBicmlkZ2VfdG9fZHNpKGJyaWRn
ZSk7CisJaW50IGJwcCA9IG1pcGlfZHNpX3BpeGVsX2Zvcm1hdF90b19icHAoZHNpLT5mb3JtYXQp
OworCisJaWYgKG1vZGUtPmNsb2NrICogYnBwID4gMTUwMDAwMDAgKiBkc2ktPmxhbmVzKQorCQly
ZXR1cm4gTU9ERV9DTE9DS19ISUdIOworCisJaWYgKG1vZGUtPmNsb2NrICogYnBwIDwgODAwMDAg
KiBkc2ktPmxhbmVzKQorCQlyZXR1cm4gTU9ERV9DTE9DS19MT1c7CisKKwlyZXR1cm4gTU9ERV9P
SzsKK30KKworc3RhdGljIHZvaWQKK253bF9kc2lfYnJpZGdlX21vZGVfc2V0KHN0cnVjdCBkcm1f
YnJpZGdlICpicmlkZ2UsCisJCQljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwK
KwkJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlKQoreworCXN0
cnVjdCBud2xfZHNpICpkc2kgPSBicmlkZ2VfdG9fZHNpKGJyaWRnZSk7CisJc3RydWN0IGRldmlj
ZSAqZGV2ID0gZHNpLT5kZXY7CisJdW5pb24gcGh5X2NvbmZpZ3VyZV9vcHRzIG5ld19jZmc7CisJ
dW5zaWduZWQgbG9uZyBwaHlfcmVmX3JhdGU7CisJaW50IHJldDsKKworCXJldCA9IG53bF9kc2lf
Z2V0X2RwaHlfcGFyYW1zKGRzaSwgYWRqdXN0ZWRfbW9kZSwgJm5ld19jZmcpOworCWlmIChyZXQg
PCAwKQorCQlyZXR1cm47CisKKwkvKgorCSAqIElmIGhzIGNsb2NrIGlzIHVuY2hhbmdlZCwgd2Un
cmUgYWxsIGdvb2QgLSBhbGwgcGFyYW1ldGVycyBhcmUKKwkgKiBkZXJpdmVkIGZyb20gaXQgYXRt
LgorCSAqLworCWlmIChuZXdfY2ZnLm1pcGlfZHBoeS5oc19jbGtfcmF0ZSA9PSBkc2ktPnBoeV9j
ZmcubWlwaV9kcGh5LmhzX2Nsa19yYXRlKQorCQlyZXR1cm47CisKKwlwaHlfcmVmX3JhdGUgPSBj
bGtfZ2V0X3JhdGUoZHNpLT5waHlfcmVmX2Nsayk7CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZGV2
LCAiUEhZIGF0IHJlZiByYXRlOiAlbHVcbiIsIHBoeV9yZWZfcmF0ZSk7CisJLyogU2F2ZSB0aGUg
bmV3IGRlc2lyZWQgcGh5IGNvbmZpZyAqLworCW1lbWNweSgmZHNpLT5waHlfY2ZnLCAmbmV3X2Nm
Zywgc2l6ZW9mKG5ld19jZmcpKTsKKworCW1lbWNweSgmZHNpLT5tb2RlLCBhZGp1c3RlZF9tb2Rl
LCBzaXplb2YoZHNpLT5tb2RlKSk7CisJZHJtX21vZGVfZGVidWdfcHJpbnRtb2RlbGluZShhZGp1
c3RlZF9tb2RlKTsKK30KKworc3RhdGljIHZvaWQgbndsX2RzaV9icmlkZ2VfcHJlX2VuYWJsZShz
dHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQoreworCXN0cnVjdCBud2xfZHNpICpkc2kgPSBicmlk
Z2VfdG9fZHNpKGJyaWRnZSk7CisJaW50IHJldDsKKworCXBtX3J1bnRpbWVfZ2V0X3N5bmMoZHNp
LT5kZXYpOworCisJaWYgKGNsa19wcmVwYXJlX2VuYWJsZShkc2ktPmxjZGlmX2NsaykgPCAwKQor
CQlyZXR1cm47CisJaWYgKGNsa19wcmVwYXJlX2VuYWJsZShkc2ktPmNvcmVfY2xrKSA8IDApCisJ
CXJldHVybjsKKworCS8qIFN0ZXAgMSBmcm9tIERTSSByZXNldC1vdXQgaW5zdHJ1Y3Rpb25zICov
CisJcmV0ID0gcmVzZXRfY29udHJvbF9kZWFzc2VydChkc2ktPnJzdF9wY2xrKTsKKwlpZiAocmV0
IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGRlYXNzZXJ0IFBD
TEs6ICVkXG4iLCByZXQpOworCQlyZXR1cm47CisJfQorCisJLyogU3RlcCAyIGZyb20gRFNJIHJl
c2V0LW91dCBpbnN0cnVjdGlvbnMgKi8KKwlud2xfZHNpX2VuYWJsZShkc2kpOworCisJLyogU3Rl
cCAzIGZyb20gRFNJIHJlc2V0LW91dCBpbnN0cnVjdGlvbnMgKi8KKwlyZXQgPSByZXNldF9jb250
cm9sX2RlYXNzZXJ0KGRzaS0+cnN0X2VzYyk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RFVl9F
UlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byBkZWFzc2VydCBFU0M6ICVkXG4iLCByZXQpOworCQly
ZXR1cm47CisJfQorCXJldCA9IHJlc2V0X2NvbnRyb2xfZGVhc3NlcnQoZHNpLT5yc3RfYnl0ZSk7
CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RFVl9FUlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byBk
ZWFzc2VydCBCWVRFOiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJuOworCX0KK30KKworc3RhdGljIHZv
aWQgbndsX2RzaV9icmlkZ2VfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCit7CisJ
c3RydWN0IG53bF9kc2kgKmRzaSA9IGJyaWRnZV90b19kc2koYnJpZGdlKTsKKwlpbnQgcmV0Owor
CisJLyogU3RlcCA1IGZyb20gRFNJIHJlc2V0LW91dCBpbnN0cnVjdGlvbnMgKi8KKwlyZXQgPSBy
ZXNldF9jb250cm9sX2RlYXNzZXJ0KGRzaS0+cnN0X2RwaSk7CisJaWYgKHJldCA8IDApCisJCURS
TV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gZGVhc3NlcnQgRFBJOiAlZFxuIiwgcmV0
KTsKK30KKworc3RhdGljIGludCBud2xfZHNpX2JyaWRnZV9hdHRhY2goc3RydWN0IGRybV9icmlk
Z2UgKmJyaWRnZSkKK3sKKwlzdHJ1Y3QgbndsX2RzaSAqZHNpID0gYnJpZGdlX3RvX2RzaShicmlk
Z2UpOworCXN0cnVjdCBkcm1fYnJpZGdlICpwYW5lbF9icmlkZ2U7CisJc3RydWN0IGRybV9wYW5l
bCAqcGFuZWw7CisJaW50IHJldDsKKworCXJldCA9IGRybV9vZl9maW5kX3BhbmVsX29yX2JyaWRn
ZShkc2ktPmRldi0+b2Zfbm9kZSwgMSwgMCwgJnBhbmVsLAorCQkJCQkgICZwYW5lbF9icmlkZ2Up
OworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwlpZiAocGFuZWwpIHsKKwkJcGFuZWxfYnJp
ZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9hZGQocGFuZWwpOworCQlpZiAoSVNfRVJSKHBhbmVsX2Jy
aWRnZSkpCisJCQlyZXR1cm4gUFRSX0VSUihwYW5lbF9icmlkZ2UpOworCX0KKwlkc2ktPnBhbmVs
X2JyaWRnZSA9IHBhbmVsX2JyaWRnZTsKKworCWlmICghZHNpLT5wYW5lbF9icmlkZ2UpCisJCXJl
dHVybiAtRVBST0JFX0RFRkVSOworCisJcmV0dXJuIGRybV9icmlkZ2VfYXR0YWNoKGJyaWRnZS0+
ZW5jb2RlciwgZHNpLT5wYW5lbF9icmlkZ2UsIGJyaWRnZSk7Cit9CisKK3N0YXRpYyB2b2lkIG53
bF9kc2lfYnJpZGdlX2RldGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQorewlzdHJ1Y3Qg
bndsX2RzaSAqZHNpID0gYnJpZGdlX3RvX2RzaShicmlkZ2UpOworCisJZHJtX29mX3BhbmVsX2Jy
aWRnZV9yZW1vdmUoZHNpLT5kZXYtPm9mX25vZGUsIDEsIDApOworCXJldHVybjsKK30KKworc3Rh
dGljIGNvbnN0IHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIG53bF9kc2lfYnJpZGdlX2Z1bmNzID0g
eworCS5wcmVfZW5hYmxlID0gbndsX2RzaV9icmlkZ2VfcHJlX2VuYWJsZSwKKwkuZW5hYmxlICAg
ICA9IG53bF9kc2lfYnJpZGdlX2VuYWJsZSwKKwkuZGlzYWJsZSAgICA9IG53bF9kc2lfYnJpZGdl
X2Rpc2FibGUsCisJLm1vZGVfZml4dXAgPSBud2xfZHNpX2JyaWRnZV9tb2RlX2ZpeHVwLAorCS5t
b2RlX3NldCAgID0gbndsX2RzaV9icmlkZ2VfbW9kZV9zZXQsCisJLm1vZGVfdmFsaWQgPSBud2xf
ZHNpX2JyaWRnZV9tb2RlX3ZhbGlkLAorCS5hdHRhY2gJICAgID0gbndsX2RzaV9icmlkZ2VfYXR0
YWNoLAorCS5kZXRhY2gJICAgID0gbndsX2RzaV9icmlkZ2VfZGV0YWNoLAorfTsKKworc3RhdGlj
IGludCBud2xfZHNpX3BhcnNlX2R0KHN0cnVjdCBud2xfZHNpICpkc2kpCit7CisJc3RydWN0IHBs
YXRmb3JtX2RldmljZSAqcGRldiA9IHRvX3BsYXRmb3JtX2RldmljZShkc2ktPmRldik7CisJc3Ry
dWN0IGNsayAqY2xrOworCXZvaWQgX19pb21lbSAqYmFzZTsKKwlpbnQgcmV0OworCisJZHNpLT5w
aHkgPSBkZXZtX3BoeV9nZXQoZHNpLT5kZXYsICJkcGh5Iik7CisJaWYgKElTX0VSUihkc2ktPnBo
eSkpIHsKKwkJcmV0ID0gUFRSX0VSUihkc2ktPnBoeSk7CisJCWlmIChyZXQgIT0gLUVQUk9CRV9E
RUZFUikKKwkJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJDb3VsZCBub3QgZ2V0IFBIWTogJWRc
biIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJY2xrID0gZGV2bV9jbGtfZ2V0KGRzaS0+
ZGV2LCAibGNkaWYiKTsKKwlpZiAoSVNfRVJSKGNsaykpIHsKKwkJcmV0ID0gUFRSX0VSUihjbGsp
OworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGdldCBsY2RpZiBjbG9jazog
JWRcbiIsCisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwlkc2ktPmxjZGlmX2Ns
ayA9IGNsazsKKworCWNsayA9IGRldm1fY2xrX2dldChkc2ktPmRldiwgImNvcmUiKTsKKwlpZiAo
SVNfRVJSKGNsaykpIHsKKwkJcmV0ID0gUFRSX0VSUihjbGspOworCQlEUk1fREVWX0VSUk9SKGRz
aS0+ZGV2LCAiRmFpbGVkIHRvIGdldCBjb3JlIGNsb2NrOiAlZFxuIiwKKwkJCSAgICAgIHJldCk7
CisJCXJldHVybiByZXQ7CisJfQorCWRzaS0+Y29yZV9jbGsgPSBjbGs7CisKKworCWNsayA9IGRl
dm1fY2xrX2dldChkc2ktPmRldiwgInBoeV9yZWYiKTsKKwlpZiAoSVNfRVJSKGNsaykpIHsKKwkJ
cmV0ID0gUFRSX0VSUihjbGspOworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRv
IGdldCBwaHlfcmVmIGNsb2NrOiAlZFxuIiwKKwkJCSAgICAgIHJldCk7CisJCXJldHVybiByZXQ7
CisJfQorCWRzaS0+cGh5X3JlZl9jbGsgPSBjbGs7CisKKwljbGsgPSBkZXZtX2Nsa19nZXQoZHNp
LT5kZXYsICJyeF9lc2MiKTsKKwlpZiAoSVNfRVJSKGNsaykpIHsKKwkJcmV0ID0gUFRSX0VSUihj
bGspOworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGdldCByeF9lc2MgY2xv
Y2s6ICVkXG4iLAorCQkJICAgICAgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisJZHNpLT5yeF9l
c2NfY2xrID0gY2xrOworCisJY2xrID0gZGV2bV9jbGtfZ2V0KGRzaS0+ZGV2LCAidHhfZXNjIik7
CisJaWYgKElTX0VSUihjbGspKSB7CisJCXJldCA9IFBUUl9FUlIoY2xrKTsKKwkJRFJNX0RFVl9F
UlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byBnZXQgdHhfZXNjIGNsb2NrOiAlZFxuIiwKKwkJCSAg
ICAgIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCWRzaS0+dHhfZXNjX2NsayA9IGNsazsKKwor
CWRzaS0+bXV4ID0gZGV2bV9tdXhfY29udHJvbF9nZXQoZHNpLT5kZXYsIE5VTEwpOworCWlmIChJ
U19FUlIoZHNpLT5tdXgpKSB7CisJCXJldCA9IFBUUl9FUlIoZHNpLT5tdXgpOworCQlpZiAocmV0
ICE9IC1FUFJPQkVfREVGRVIpCisJCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRv
IGdldCBtdXg6ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKworCWJhc2UgPSBkZXZt
X3BsYXRmb3JtX2lvcmVtYXBfcmVzb3VyY2UocGRldiwgMCk7CisJaWYgKElTX0VSUihiYXNlKSkK
KwkJcmV0dXJuIFBUUl9FUlIoYmFzZSk7CisKKwlkc2ktPnJlZ21hcCA9CisJCWRldm1fcmVnbWFw
X2luaXRfbW1pbyhkc2ktPmRldiwgYmFzZSwgJm53bF9kc2lfcmVnbWFwX2NvbmZpZyk7CisJaWYg
KElTX0VSUihkc2ktPnJlZ21hcCkpIHsKKwkJcmV0ID0gUFRSX0VSUihkc2ktPnJlZ21hcCk7CisJ
CURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gY3JlYXRlIE5XTCBEU0kgcmVnbWFw
OiAlZFxuIiwKKwkJCSAgICAgIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJZHNpLT5pcnEg
PSBwbGF0Zm9ybV9nZXRfaXJxKHBkZXYsIDApOworCWlmIChkc2ktPmlycSA8IDApIHsKKwkJRFJN
X0RFVl9FUlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byBnZXQgZGV2aWNlIElSUTogJWRcbiIsCisJ
CQkgICAgICBkc2ktPmlycSk7CisJCXJldHVybiBkc2ktPmlycTsKKwl9CisKKwlkc2ktPnJzdF9w
Y2xrID0gZGV2bV9yZXNldF9jb250cm9sX2dldF9leGNsdXNpdmUoZHNpLT5kZXYsICJwY2xrIik7
CisJaWYgKElTX0VSUihkc2ktPnJzdF9wY2xrKSkgeworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2
LCAiRmFpbGVkIHRvIGdldCBwY2xrIHJlc2V0OiAlbGRcbiIsCisJCQkgICAgICBQVFJfRVJSKGRz
aS0+cnN0X3BjbGspKTsKKwkJcmV0dXJuIFBUUl9FUlIoZHNpLT5yc3RfcGNsayk7CisJfQorCWRz
aS0+cnN0X2J5dGUgPSBkZXZtX3Jlc2V0X2NvbnRyb2xfZ2V0X2V4Y2x1c2l2ZShkc2ktPmRldiwg
ImJ5dGUiKTsKKwlpZiAoSVNfRVJSKGRzaS0+cnN0X2J5dGUpKSB7CisJCURSTV9ERVZfRVJST1Io
ZHNpLT5kZXYsICJGYWlsZWQgdG8gZ2V0IGJ5dGUgcmVzZXQ6ICVsZFxuIiwKKwkJCSAgICAgIFBU
Ul9FUlIoZHNpLT5yc3RfYnl0ZSkpOworCQlyZXR1cm4gUFRSX0VSUihkc2ktPnJzdF9ieXRlKTsK
Kwl9CisJZHNpLT5yc3RfZXNjID0gZGV2bV9yZXNldF9jb250cm9sX2dldF9leGNsdXNpdmUoZHNp
LT5kZXYsICJlc2MiKTsKKwlpZiAoSVNfRVJSKGRzaS0+cnN0X2VzYykpIHsKKwkJRFJNX0RFVl9F
UlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byBnZXQgZXNjIHJlc2V0OiAlbGRcbiIsCisJCQkgICAg
ICBQVFJfRVJSKGRzaS0+cnN0X2VzYykpOworCQlyZXR1cm4gUFRSX0VSUihkc2ktPnJzdF9lc2Mp
OworCX0KKwlkc2ktPnJzdF9kcGkgPSBkZXZtX3Jlc2V0X2NvbnRyb2xfZ2V0X2V4Y2x1c2l2ZShk
c2ktPmRldiwgImRwaSIpOworCWlmIChJU19FUlIoZHNpLT5yc3RfZHBpKSkgeworCQlEUk1fREVW
X0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGdldCBkcGkgcmVzZXQ6ICVsZFxuIiwKKwkJCSAg
ICAgIFBUUl9FUlIoZHNpLT5yc3RfZHBpKSk7CisJCXJldHVybiBQVFJfRVJSKGRzaS0+cnN0X2Rw
aSk7CisJfQorCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IG53bF9kc2lfc2VsZWN0X2lucHV0
KHN0cnVjdCBud2xfZHNpICpkc2kpCit7CisJc3RydWN0IGRldmljZV9ub2RlICpyZW1vdGU7CisJ
dTMyIHVzZV9kY3NzID0gMTsKKwlpbnQgcmV0OworCisJcmVtb3RlID0gb2ZfZ3JhcGhfZ2V0X3Jl
bW90ZV9ub2RlKGRzaS0+ZGV2LT5vZl9ub2RlLCAwLAorCQkJCQkgIE5XTF9EU0lfRU5EUE9JTlRf
TENESUYpOworCWlmIChyZW1vdGUpIHsKKwkJdXNlX2Rjc3MgPSAwOworCX0gZWxzZSB7CisJCXJl
bW90ZSA9IG9mX2dyYXBoX2dldF9yZW1vdGVfbm9kZShkc2ktPmRldi0+b2Zfbm9kZSwgMCwKKwkJ
CQkJCSAgTldMX0RTSV9FTkRQT0lOVF9EQ1NTKTsKKwkJaWYgKCFyZW1vdGUpIHsKKwkJCURSTV9E
RVZfRVJST1IoZHNpLT5kZXYsCisJCQkJICAgICAgIk5vIHZhbGlkIGlucHV0IGVuZHBvaW50IGZv
dW5kXG4iKTsKKwkJCXJldHVybiAtRUlOVkFMOworCQl9CisJfQorCisJRFJNX0RFVl9JTkZPKGRz
aS0+ZGV2LCAiVXNpbmcgJXMgYXMgaW5wdXQgc291cmNlXG4iLAorCQkgICAgICh1c2VfZGNzcykg
PyAiRENTUyIgOiAiTENESUYiKTsKKwlyZXQgPSBtdXhfY29udHJvbF90cnlfc2VsZWN0KGRzaS0+
bXV4LCB1c2VfZGNzcyk7CisJaWYgKHJldCA8IDApCisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYs
ICJGYWlsZWQgdG8gc2VsZWN0IGlucHV0OiAlZFxuIiwgcmV0KTsKKworCW9mX25vZGVfcHV0KHJl
bW90ZSk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCBud2xfZHNpX2Rlc2VsZWN0X2lu
cHV0KHN0cnVjdCBud2xfZHNpICpkc2kpCit7CisJaW50IHJldDsKKworCXJldCA9IG11eF9jb250
cm9sX2Rlc2VsZWN0KGRzaS0+bXV4KTsKKwlpZiAocmV0IDwgMCkKKwkJRFJNX0RFVl9FUlJPUihk
c2ktPmRldiwgIkZhaWxlZCB0byBkZXNlbGVjdCBpbnB1dDogJWRcbiIsIHJldCk7CisKKwlyZXR1
cm4gcmV0OworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9icmlkZ2VfdGltaW5ncyBud2xf
ZHNpX3RpbWluZ3MgPSB7CisJLmlucHV0X2J1c19mbGFncyA9IERSTV9CVVNfRkxBR19ERV9MT1cs
Cit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBud2xfZHNpX2R0X2lkc1td
ID0geworCXsgLmNvbXBhdGlibGUgPSAiZnNsLGlteDhtcS1ud2wtZHNpIiwgfSwKKwl7IC8qIHNl
bnRpbmVsICovIH0KK307CitNT0RVTEVfREVWSUNFX1RBQkxFKG9mLCBud2xfZHNpX2R0X2lkcyk7
CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgc29jX2RldmljZV9hdHRyaWJ1dGUgbndsX2RzaV9xdWly
a3NfbWF0Y2hbXSA9IHsKKwl7IC5zb2NfaWQgPSAiaS5NWDhNUSIsIC5yZXZpc2lvbiA9ICIyLjAi
LAorCSAgLmRhdGEgPSAodm9pZCAqKUUxMTQxOF9IU19NT0RFX1FVSVJLIH0sCisJeyAvKiBzZW50
aW5lbC4gKi8gfSwKK307CisKK3N0YXRpYyBpbnQgbndsX2RzaV9wcm9iZShzdHJ1Y3QgcGxhdGZv
cm1fZGV2aWNlICpwZGV2KQoreworCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZwZGV2LT5kZXY7CisJ
Y29uc3Qgc3RydWN0IHNvY19kZXZpY2VfYXR0cmlidXRlICphdHRyOworCXN0cnVjdCBud2xfZHNp
ICpkc2k7CisJaW50IHJldDsKKworCWRzaSA9IGRldm1fa3phbGxvYyhkZXYsIHNpemVvZigqZHNp
KSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFkc2kpCisJCXJldHVybiAtRU5PTUVNOworCisJZHNpLT5k
ZXYgPSBkZXY7CisKKwlyZXQgPSBud2xfZHNpX3BhcnNlX2R0KGRzaSk7CisJaWYgKHJldCkKKwkJ
cmV0dXJuIHJldDsKKworCXJldCA9IGRldm1fcmVxdWVzdF9pcnEoZGV2LCBkc2ktPmlycSwgbnds
X2RzaV9pcnFfaGFuZGxlciwgMCwKKwkJCSAgICAgICBkZXZfbmFtZShkZXYpLCBkc2kpOworCWlm
IChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFpbGVkIHRvIHJlcXVlc3QgSVJR
ICVkOiAlZFxuIiwgZHNpLT5pcnEsCisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0K
KworCWRzaS0+ZHNpX2hvc3Qub3BzID0gJm53bF9kc2lfaG9zdF9vcHM7CisJZHNpLT5kc2lfaG9z
dC5kZXYgPSBkZXY7CisJcmV0ID0gbWlwaV9kc2lfaG9zdF9yZWdpc3RlcigmZHNpLT5kc2lfaG9z
dCk7CisJaWYgKHJldCkgeworCQlEUk1fREVWX0VSUk9SKGRldiwgIkZhaWxlZCB0byByZWdpc3Rl
ciBNSVBJIGhvc3Q6ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKworCWF0dHIgPSBz
b2NfZGV2aWNlX21hdGNoKG53bF9kc2lfcXVpcmtzX21hdGNoKTsKKwlpZiAoYXR0cikKKwkJZHNp
LT5xdWlya3MgPSAodWludHB0cl90KWF0dHItPmRhdGE7CisKKwlkc2ktPmJyaWRnZS5kcml2ZXJf
cHJpdmF0ZSA9IGRzaTsKKwlkc2ktPmJyaWRnZS5mdW5jcyA9ICZud2xfZHNpX2JyaWRnZV9mdW5j
czsKKwlkc2ktPmJyaWRnZS5vZl9ub2RlID0gZGV2LT5vZl9ub2RlOworCWRzaS0+YnJpZGdlLnRp
bWluZ3MgPSAmbndsX2RzaV90aW1pbmdzOworCisJZGV2X3NldF9kcnZkYXRhKGRldiwgZHNpKTsK
KwlwbV9ydW50aW1lX2VuYWJsZShkZXYpOworCisJcmV0ID0gbndsX2RzaV9zZWxlY3RfaW5wdXQo
ZHNpKTsKKwlpZiAocmV0IDwgMCkgeworCQltaXBpX2RzaV9ob3N0X3VucmVnaXN0ZXIoJmRzaS0+
ZHNpX2hvc3QpOworCQlyZXR1cm4gcmV0OworCX0KKworCWRybV9icmlkZ2VfYWRkKCZkc2ktPmJy
aWRnZSk7CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbndsX2RzaV9yZW1vdmUoc3RydWN0
IHBsYXRmb3JtX2RldmljZSAqcGRldikKK3sKKwlzdHJ1Y3QgbndsX2RzaSAqZHNpID0gcGxhdGZv
cm1fZ2V0X2RydmRhdGEocGRldik7CisKKwlud2xfZHNpX2Rlc2VsZWN0X2lucHV0KGRzaSk7CisJ
bWlwaV9kc2lfaG9zdF91bnJlZ2lzdGVyKCZkc2ktPmRzaV9ob3N0KTsKKwlkcm1fYnJpZGdlX3Jl
bW92ZSgmZHNpLT5icmlkZ2UpOworCXBtX3J1bnRpbWVfZGlzYWJsZSgmcGRldi0+ZGV2KTsKKwly
ZXR1cm4gMDsKK30KKworc3RhdGljIHN0cnVjdCBwbGF0Zm9ybV9kcml2ZXIgbndsX2RzaV9kcml2
ZXIgPSB7CisJLnByb2JlCQk9IG53bF9kc2lfcHJvYmUsCisJLnJlbW92ZQkJPSBud2xfZHNpX3Jl
bW92ZSwKKwkuZHJpdmVyCQk9IHsKKwkJLm9mX21hdGNoX3RhYmxlID0gbndsX2RzaV9kdF9pZHMs
CisJCS5uYW1lCT0gRFJWX05BTUUsCisJfSwKK307CisKK21vZHVsZV9wbGF0Zm9ybV9kcml2ZXIo
bndsX2RzaV9kcml2ZXIpOworCitNT0RVTEVfQVVUSE9SKCJOWFAgU2VtaWNvbmR1Y3RvciIpOwor
TU9EVUxFX0FVVEhPUigiUHVyaXNtIFNQQyIpOworTU9EVUxFX0RFU0NSSVBUSU9OKCJOb3J0aHdl
c3QgTG9naWMgTUlQSS1EU0kgZHJpdmVyIik7CitNT0RVTEVfTElDRU5TRSgiR1BMIik7IC8qIEdQ
THYyIG9yIGxhdGVyICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1k
c2kuaCBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS5oCm5ldyBmaWxlIG1vZGUgMTAw
NjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uYTI0N2E4YTExYzdjCi0tLSAvZGV2L251bGwKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpLmgKQEAgLTAsMCArMSwxNDQgQEAKKy8qIFNQ
RFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wKyAqLworLyoKKyAqIE5XTCBNSVBJIERTSSBo
b3N0IGRyaXZlcgorICoKKyAqIENvcHlyaWdodCAoQykgMjAxNyBOWFAKKyAqIENvcHlyaWdodCAo
QykgMjAxOSBQdXJpc20gU1BDCisgKi8KKyNpZm5kZWYgX19OV0xfRFNJX0hfXworI2RlZmluZSBf
X05XTF9EU0lfSF9fCisKKy8qIERTSSBIT1NUIHJlZ2lzdGVycyAqLworI2RlZmluZSBOV0xfRFNJ
X0NGR19OVU1fTEFORVMJCQkweDAKKyNkZWZpbmUgTldMX0RTSV9DRkdfTk9OQ09OVElOVU9VU19D
TEsJCTB4NAorI2RlZmluZSBOV0xfRFNJX0NGR19UX1BSRQkJCTB4OAorI2RlZmluZSBOV0xfRFNJ
X0NGR19UX1BPU1QJCQkweGMKKyNkZWZpbmUgTldMX0RTSV9DRkdfVFhfR0FQCQkJMHgxMAorI2Rl
ZmluZSBOV0xfRFNJX0NGR19BVVRPSU5TRVJUX0VPVFAJCTB4MTQKKyNkZWZpbmUgTldMX0RTSV9D
RkdfRVhUUkFfQ01EU19BRlRFUl9FT1RQCTB4MTgKKyNkZWZpbmUgTldMX0RTSV9DRkdfSFRYX1RP
X0NPVU5UCQkweDFjCisjZGVmaW5lIE5XTF9EU0lfQ0ZHX0xSWF9IX1RPX0NPVU5UCQkweDIwCisj
ZGVmaW5lIE5XTF9EU0lfQ0ZHX0JUQV9IX1RPX0NPVU5UCQkweDI0CisjZGVmaW5lIE5XTF9EU0lf
Q0ZHX1RXQUtFVVAJCQkweDI4CisjZGVmaW5lIE5XTF9EU0lfQ0ZHX1NUQVRVU19PVVQJCQkweDJj
CisjZGVmaW5lIE5XTF9EU0lfUlhfRVJST1JfU1RBVFVTCQkJMHgzMAorCisvKiBEU0kgRFBJIHJl
Z2lzdGVycyAqLworI2RlZmluZSBOV0xfRFNJX1BJWEVMX1BBWUxPQURfU0laRQkJMHgyMDAKKyNk
ZWZpbmUgTldMX0RTSV9QSVhFTF9GSUZPX1NFTkRfTEVWRUwJCTB4MjA0CisjZGVmaW5lIE5XTF9E
U0lfSU5URVJGQUNFX0NPTE9SX0NPRElORwkJMHgyMDgKKyNkZWZpbmUgTldMX0RTSV9QSVhFTF9G
T1JNQVQJCQkweDIwYworI2RlZmluZSBOV0xfRFNJX1ZTWU5DX1BPTEFSSVRZCQkJMHgyMTAKKyNk
ZWZpbmUgTldMX0RTSV9WU1lOQ19QT0xBUklUWV9BQ1RJVkVfTE9XCTAKKyNkZWZpbmUgTldMX0RT
SV9WU1lOQ19QT0xBUklUWV9BQ1RJVkVfSElHSAlCSVQoMSkKKworI2RlZmluZSBOV0xfRFNJX0hT
WU5DX1BPTEFSSVRZCQkJMHgyMTQKKyNkZWZpbmUgTldMX0RTSV9IU1lOQ19QT0xBUklUWV9BQ1RJ
VkVfTE9XCTAKKyNkZWZpbmUgTldMX0RTSV9IU1lOQ19QT0xBUklUWV9BQ1RJVkVfSElHSAlCSVQo
MSkKKworI2RlZmluZSBOV0xfRFNJX1ZJREVPX01PREUJCQkweDIxOAorI2RlZmluZSBOV0xfRFNJ
X0hGUAkJCQkweDIxYworI2RlZmluZSBOV0xfRFNJX0hCUAkJCQkweDIyMAorI2RlZmluZSBOV0xf
RFNJX0hTQQkJCQkweDIyNAorI2RlZmluZSBOV0xfRFNJX0VOQUJMRV9NVUxUX1BLVFMJCTB4MjI4
CisjZGVmaW5lIE5XTF9EU0lfVkJQCQkJCTB4MjJjCisjZGVmaW5lIE5XTF9EU0lfVkZQCQkJCTB4
MjMwCisjZGVmaW5lIE5XTF9EU0lfQkxMUF9NT0RFCQkJMHgyMzQKKyNkZWZpbmUgTldMX0RTSV9V
U0VfTlVMTF9QS1RfQkxMUAkJMHgyMzgKKyNkZWZpbmUgTldMX0RTSV9WQUNUSVZFCQkJCTB4MjNj
CisjZGVmaW5lIE5XTF9EU0lfVkMJCQkJMHgyNDAKKworLyogRFNJIEFQQiBQS1QgY29udHJvbCAq
LworI2RlZmluZSBOV0xfRFNJX1RYX1BBWUxPQUQJCQkweDI4MAorI2RlZmluZSBOV0xfRFNJX1BL
VF9DT05UUk9MCQkJMHgyODQKKyNkZWZpbmUgTldMX0RTSV9TRU5EX1BBQ0tFVAkJCTB4Mjg4Cisj
ZGVmaW5lIE5XTF9EU0lfUEtUX1NUQVRVUwkJCTB4MjhjCisjZGVmaW5lIE5XTF9EU0lfUEtUX0ZJ
Rk9fV1JfTEVWRUwJCTB4MjkwCisjZGVmaW5lIE5XTF9EU0lfUEtUX0ZJRk9fUkRfTEVWRUwJCTB4
Mjk0CisjZGVmaW5lIE5XTF9EU0lfUlhfUEFZTE9BRAkJCTB4Mjk4CisjZGVmaW5lIE5XTF9EU0lf
UlhfUEtUX0hFQURFUgkJCTB4MjljCisKKy8qIERTSSBJUlEgaGFuZGxpbmcgKi8KKyNkZWZpbmUg
TldMX0RTSV9JUlFfU1RBVFVTCQkJMHgyYTAKKyNkZWZpbmUgTldMX0RTSV9TTV9OT1RfSURMRQkJ
CUJJVCgwKQorI2RlZmluZSBOV0xfRFNJX1RYX1BLVF9ET05FCQkJQklUKDEpCisjZGVmaW5lIE5X
TF9EU0lfRFBIWV9ESVJFQ1RJT04JCQlCSVQoMikKKyNkZWZpbmUgTldMX0RTSV9UWF9GSUZPX09W
RkxXCQkJQklUKDMpCisjZGVmaW5lIE5XTF9EU0lfVFhfRklGT19VREZMVwkJCUJJVCg0KQorI2Rl
ZmluZSBOV0xfRFNJX1JYX0ZJRk9fT1ZGTFcJCQlCSVQoNSkKKyNkZWZpbmUgTldMX0RTSV9SWF9G
SUZPX1VERkxXCQkJQklUKDYpCisjZGVmaW5lIE5XTF9EU0lfUlhfUEtUX0hEUl9SQ1ZECQkJQklU
KDcpCisjZGVmaW5lIE5XTF9EU0lfUlhfUEtUX1BBWUxPQURfREFUQV9SQ1ZECUJJVCg4KQorI2Rl
ZmluZSBOV0xfRFNJX0JUQV9USU1FT1VUCQkJQklUKDI5KQorI2RlZmluZSBOV0xfRFNJX0xQX1JY
X1RJTUVPVVQJCQlCSVQoMzApCisjZGVmaW5lIE5XTF9EU0lfSFNfVFhfVElNRU9VVAkJCUJJVCgz
MSkKKworI2RlZmluZSBOV0xfRFNJX0lSUV9TVEFUVVMyCQkJMHgyYTQKKyNkZWZpbmUgTldMX0RT
SV9TSU5HTEVfQklUX0VDQ19FUlIJCUJJVCgwKQorI2RlZmluZSBOV0xfRFNJX01VTFRJX0JJVF9F
Q0NfRVJSCQlCSVQoMSkKKyNkZWZpbmUgTldMX0RTSV9DUkNfRVJSCQkJCUJJVCgyKQorCisjZGVm
aW5lIE5XTF9EU0lfSVJRX01BU0sJCQkweDJhOAorI2RlZmluZSBOV0xfRFNJX1NNX05PVF9JRExF
X01BU0sJCUJJVCgwKQorI2RlZmluZSBOV0xfRFNJX1RYX1BLVF9ET05FX01BU0sJCUJJVCgxKQor
I2RlZmluZSBOV0xfRFNJX0RQSFlfRElSRUNUSU9OX01BU0sJCUJJVCgyKQorI2RlZmluZSBOV0xf
RFNJX1RYX0ZJRk9fT1ZGTFdfTUFTSwkJQklUKDMpCisjZGVmaW5lIE5XTF9EU0lfVFhfRklGT19V
REZMV19NQVNLCQlCSVQoNCkKKyNkZWZpbmUgTldMX0RTSV9SWF9GSUZPX09WRkxXX01BU0sJCUJJ
VCg1KQorI2RlZmluZSBOV0xfRFNJX1JYX0ZJRk9fVURGTFdfTUFTSwkJQklUKDYpCisjZGVmaW5l
IE5XTF9EU0lfUlhfUEtUX0hEUl9SQ1ZEX01BU0sJCUJJVCg3KQorI2RlZmluZSBOV0xfRFNJX1JY
X1BLVF9QQVlMT0FEX0RBVEFfUkNWRF9NQVNLCUJJVCg4KQorI2RlZmluZSBOV0xfRFNJX0JUQV9U
SU1FT1VUX01BU0sJCUJJVCgyOSkKKyNkZWZpbmUgTldMX0RTSV9MUF9SWF9USU1FT1VUX01BU0sJ
CUJJVCgzMCkKKyNkZWZpbmUgTldMX0RTSV9IU19UWF9USU1FT1VUX01BU0sJCUJJVCgzMSkKKwor
I2RlZmluZSBOV0xfRFNJX0lSUV9NQVNLMgkJCTB4MmFjCisjZGVmaW5lIE5XTF9EU0lfU0lOR0xF
X0JJVF9FQ0NfRVJSX01BU0sJCUJJVCgwKQorI2RlZmluZSBOV0xfRFNJX01VTFRJX0JJVF9FQ0Nf
RVJSX01BU0sJCUJJVCgxKQorI2RlZmluZSBOV0xfRFNJX0NSQ19FUlJfTUFTSwkJCUJJVCgyKQor
CisvKgorICogUEtUX0NPTlRST0wgZm9ybWF0OgorICogWzE1OiAwXSAtIHdvcmQgY291bnQKKyAq
IFsxNzoxNl0gLSB2aXJ0dWFsIGNoYW5uZWwKKyAqIFsyMzoxOF0gLSBkYXRhIHR5cGUKKyAqIFsy
NF0JICAgLSBMUCBvciBIUyBzZWxlY3QgKDAgLSBMUCwgMSAtIEhTKQorICogWzI1XQkgICAtIHBl
cmZvcm0gQlRBIGFmdGVyIHBhY2tldCBpcyBzZW50CisgKiBbMjZdCSAgIC0gcGVyZm9ybSBCVEEg
b25seSwgbm8gcGFja2V0IHR4CisgKi8KKyNkZWZpbmUgTldMX0RTSV9XQyh4KQkJRklFTERfUFJF
UChHRU5NQVNLKDE1LCAwKSwgKHgpKQorI2RlZmluZSBOV0xfRFNJX1RYX1ZDKHgpCUZJRUxEX1BS
RVAoR0VOTUFTSygxNywgMTYpLCAoeCkpCisjZGVmaW5lIE5XTF9EU0lfVFhfRFQoeCkJRklFTERf
UFJFUChHRU5NQVNLKDIzLCAxOCksICh4KSkKKyNkZWZpbmUgTldMX0RTSV9IU19TRUwoeCkJRklF
TERfUFJFUChHRU5NQVNLKDI0LCAyNCksICh4KSkKKyNkZWZpbmUgTldMX0RTSV9CVEFfVFgoeCkJ
RklFTERfUFJFUChHRU5NQVNLKDI1LCAyNSksICh4KSkKKyNkZWZpbmUgTldMX0RTSV9CVEFfTk9f
VFgoeCkJRklFTERfUFJFUChHRU5NQVNLKDI2LCAyNiksICh4KSkKKworLyoKKyAqIFJYX1BLVF9I
RUFERVIgZm9ybWF0OgorICogWzE1OiAwXSAtIHdvcmQgY291bnQKKyAqIFsyMToxNl0gLSBkYXRh
IHR5cGUKKyAqIFsyMzoyMl0gLSB2aXJ0dWFsIGNoYW5uZWwKKyAqLworI2RlZmluZSBOV0xfRFNJ
X1JYX0RUKHgpCUZJRUxEX0dFVChHRU5NQVNLKDIxLCAxNiksICh4KSkKKyNkZWZpbmUgTldMX0RT
SV9SWF9WQyh4KQlGSUVMRF9HRVQoR0VOTUFTSygyMywgMjIpLCAoeCkpCisKKy8qIERTSSBWaWRl
byBtb2RlICovCisjZGVmaW5lIE5XTF9EU0lfVk1fQlVSU1RfTU9ERV9XSVRIX1NZTkNfUFVMU0VT
CQkwCisjZGVmaW5lIE5XTF9EU0lfVk1fTk9OX0JVUlNUX01PREVfV0lUSF9TWU5DX0VWRU5UUwlC
SVQoMCkKKyNkZWZpbmUgTldMX0RTSV9WTV9CVVJTVF9NT0RFCQkJCUJJVCgxKQorCisvKiAqIERQ
SSBjb2xvciBjb2RpbmcgKi8KKyNkZWZpbmUgTldMX0RTSV9EUElfMTZfQklUXzU2NV9QQUNLRUQJ
MAorI2RlZmluZSBOV0xfRFNJX0RQSV8xNl9CSVRfNTY1X0FMSUdORUQJMQorI2RlZmluZSBOV0xf
RFNJX0RQSV8xNl9CSVRfNTY1X1NISUZURUQJMgorI2RlZmluZSBOV0xfRFNJX0RQSV8xOF9CSVRf
UEFDS0VECTMKKyNkZWZpbmUgTldMX0RTSV9EUElfMThfQklUX0FMSUdORUQJNAorI2RlZmluZSBO
V0xfRFNJX0RQSV8yNF9CSVQJCTUKKworLyogKiBEUEkgUGl4ZWwgZm9ybWF0ICovCisjZGVmaW5l
IE5XTF9EU0lfUElYRUxfRk9STUFUXzE2ICAwCisjZGVmaW5lIE5XTF9EU0lfUElYRUxfRk9STUFU
XzE4ICBCSVQoMCkKKyNkZWZpbmUgTldMX0RTSV9QSVhFTF9GT1JNQVRfMThMIEJJVCgxKQorI2Rl
ZmluZSBOV0xfRFNJX1BJWEVMX0ZPUk1BVF8yNCAgKEJJVCgwKSB8IEJJVCgxKSkKKworI2VuZGlm
IC8qIF9fTldMX0RTSV9IX18gKi8KLS0gCjIuMjMuMAoKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
