Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7B6B7361FE8
	for <lists+dri-devel@lfdr.de>; Fri, 16 Apr 2021 14:31:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1FBA86E155;
	Fri, 16 Apr 2021 12:31:21 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0933B6E0DE
 for <dri-devel@lists.freedesktop.org>; Fri, 16 Apr 2021 12:31:17 +0000 (UTC)
IronPort-SDR: UrMN2JIDez5dP6Q6UKvqsEflnyl5Rja7By+T9ZKsuP0HPJJLvmH/MjZgeYRepjJUVbLvu+obPK
 6DDt1uoolrig==
X-IronPort-AV: E=McAfee;i="6200,9189,9955"; a="256347319"
X-IronPort-AV: E=Sophos;i="5.82,226,1613462400"; d="scan'208";a="256347319"
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga104.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 16 Apr 2021 05:31:15 -0700
IronPort-SDR: WmABmm2ut6skF+lztrUQT0asbI2U9xXaMF4B2GRY7rYNerUxnL0/CVB0ZrIu8zSgrgGiV1HzdX
 MTCOQ4kWPvkA==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.82,226,1613462400"; d="scan'208";a="419100817"
Received: from black.fi.intel.com ([10.237.72.28])
 by fmsmga008.fm.intel.com with ESMTP; 16 Apr 2021 05:31:13 -0700
Received: by black.fi.intel.com (Postfix, from userid 1003)
 id 140C9BA; Fri, 16 Apr 2021 15:31:29 +0300 (EEST)
From: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
To: Andy Shevchenko <andriy.shevchenko@linux.intel.com>,
 dri-devel@lists.freedesktop.org, linux-fbdev@vger.kernel.org,
 linux-staging@lists.linux.dev, linux-kernel@vger.kernel.org
Subject: [PATCH v1 1/2] fbtft: Rectify GPIO handling
Date: Fri, 16 Apr 2021 15:31:16 +0300
Message-Id: <20210416123117.4993-1-andriy.shevchenko@linux.intel.com>
X-Mailer: git-send-email 2.30.2
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Jan=20Sebastian=20G=C3=B6tte?= <linux@jaseg.net>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Phil Reid <preid@electromag.com.au>, Nishad Kamdar <nishadkamdar@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGluZmFtb3VzIGNvbW1pdCBjNDQwZWVlMWE3YTEgKCJTdGFnaW5nOiBmYnRmdDogU3dpdGNo
IHRvCnRoZSBHUElPIGRlc2NyaXB0b3IgaW50ZXJmYWNlIikgYnJva2UgR1BJTyBoYW5kbGluZyBj
b21wbGV0ZWx5LgpJdCBoYXMgYWxyZWFkeSBmb3VyIGNvbW1pdHMgdG8gcmVjdGlmeSBhbmQgaXQg
c2VlbXMgbm90IGVub3VnaC4KSW4gb3JkZXIgdG8gZml4IHRoZSBtZXNzIGhlcmUgd2U6CgogIDEp
IFNldCBkZWZhdWx0IHRvICJpbmFjdGl2ZSIgZm9yIGFsbCByZXF1ZXN0ZWQgcGlucwoKICAyKSBG
aXggQ1MsIFJELCBhbmQgV1IgcGlucyBwb2xhcml0eSBzaW5jZSBpdCdzIGFjdGl2ZSBsb3cgYW5k
CiAgICAgR1BJTyBkZXNjcmlwdG9yIGludGVyZmFjZSB0YWtlcyBpdCBpbnRvIGNvbnNpZGVyYXRp
b24gZnJvbQogICAgIHRoZSBEZXZpY2UgVHJlZSBvciBBQ1BJCgogIDMpIEZpeCBSRVNFVCBwaW4g
cG9sYXJpdHkgaW4gdGhlIHBsYWNlcyBtaXNzZWQgYnkgdGhlIGNvbW1pdAogICAgIGI5MThkMWMy
NzA2NiAoIlN0YWdpbmc6IGZidGZ0OiBGaXggcmVzZXQgYXNzZXJ0aW9uIHdoZW4gdXNpbmcgZ3Bp
byBkZXNjcmlwdG9yIikKCiAgNCkgQ29uc29saWRhdGUgY2hpcCBhY3RpdmF0aW9uIChDUyBhc3Nl
cnQpIHVuZGVyIGRlZmF1bHQKICAgICAtPnJlc2V0KCkgY2FsbGJhY2sKClRvIHN1bW1hcml6ZSB0
aGUgZXhwZWN0YXRpb25zIGFib3V0IHBvbGFyaXR5IGZvciBHUElPczoKCiAgICNSRAkJCUxvdwog
ICAjV1IJCQlMb3cKICAgI0NTCQkJTG93CiAgICNSRVNFVAkJTG93CiAgIERDIG9yIFJTCQlIaWdo
CiAgIFJXCQkJSGlnaAogICBEYXRhCTAuLjE1CQlIaWdoCgpTZWUgYWxzbyBBZGFmcnVpdCBsZWFy
bmluZyBjb3Vyc2UgWzFdIGZvciB0aGUgZXhhbXBsZSBvZiB0aGUgc2NoZW1hdGljcy4KCldoaWxl
IGF0IGl0LCBkcm9wIHVubmVlZGVkIE5VTEwgY2hlY2tzLCBzaW5jZSBHUElPIEFQSSBpcyB0b2xl
cmFudCB0byB0aGF0LgpBdCB0aGUgZW5kLCB1cGRhdGUgVE9ETyB0byBtYXJrIHRoaXMgam9iIGV2
ZW50dWFsbHkgZG9uZS4KClsxXTogaHR0cHM6Ly9sZWFybi5hZGFmcnVpdC5jb20vYWRhZnJ1aXQt
Mi04LWFuZC0zLTItY29sb3ItdGZ0LXRvdWNoc2NyZWVuLWJyZWFrb3V0LXYyL2Rvd25sb2FkcwoK
Rml4ZXM6IDkyZTNlODg0ODg3YyAoIlN0YWdpbmc6IGZidGZ0OiBGaXggR1BJTyBoYW5kbGluZyIp
CkZpeGVzOiBiOTE4ZDFjMjcwNjYgKCJTdGFnaW5nOiBmYnRmdDogRml4IHJlc2V0IGFzc2VydGlv
biB3aGVuIHVzaW5nIGdwaW8gZGVzY3JpcHRvciIpCkZpeGVzOiBkYmM0Zjk4OWM4NzggKCJTdGFn
aW5nOiBmYnRmdDogRml4IHByb2Jpbmcgb2YgZ3BpbyBkZXNjcmlwdG9yIikKRml4ZXM6IGM0NDBl
ZWUxYTdhMSAoIlN0YWdpbmc6IGZidGZ0OiBTd2l0Y2ggdG8gdGhlIGdwaW8gZGVzY3JpcHRvciBp
bnRlcmZhY2UiKQpDYzogSmFuIFNlYmFzdGlhbiBHw7Z0dGUgPGxpbnV4QGphc2VnLm5ldD4KQ2M6
IFBoaWwgUmVpZCA8cHJlaWRAZWxlY3Ryb21hZy5jb20uYXU+CkNjOiBOaXNoYWQgS2FtZGFyIDxu
aXNoYWRrYW1kYXJAZ21haWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBBbmR5IFNoZXZjaGVua28gPGFu
ZHJpeS5zaGV2Y2hlbmtvQGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL3N0YWdpbmcvZmJ0
ZnQvVE9ETyAgICAgICAgICAgICB8ICA1IC0tLS0tCiBkcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJf
YWdtMTI2NGstZmwuYyB8IDIwICsrKysrKysrKystLS0tLS0tLS0tCiBkcml2ZXJzL3N0YWdpbmcv
ZmJ0ZnQvZmJfYmQ2NjM0NzQuYyAgICB8ICA0IC0tLS0KIGRyaXZlcnMvc3RhZ2luZy9mYnRmdC9m
Yl9pbGk5MTYzLmMgICAgIHwgIDQgLS0tLQogZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX2lsaTkz
MjAuYyAgICAgfCAgMSAtCiBkcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfaWxpOTMyNS5jICAgICB8
ICA0IC0tLS0KIGRyaXZlcnMvc3RhZ2luZy9mYnRmdC9mYl9pbGk5MzQwLmMgICAgIHwgIDEgLQog
ZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3M2ZDExMjEuYyAgICAgfCAgNCAtLS0tCiBkcml2ZXJz
L3N0YWdpbmcvZmJ0ZnQvZmJfc2gxMTA2LmMgICAgICB8ICAxIC0KIGRyaXZlcnMvc3RhZ2luZy9m
YnRmdC9mYl9zc2QxMjg5LmMgICAgIHwgIDQgLS0tLQogZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2Zi
X3NzZDEzMjUuYyAgICAgfCAgMiAtLQogZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3NzZDEzMzEu
YyAgICAgfCAgNiArKy0tLS0KIGRyaXZlcnMvc3RhZ2luZy9mYnRmdC9mYl9zc2QxMzUxLmMgICAg
IHwgIDEgLQogZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3VwZDE2MTcwNC5jICAgfCAgNCAtLS0t
CiBkcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfd2F0dGVyb3R0LmMgICB8ICAxIC0KIGRyaXZlcnMv
c3RhZ2luZy9mYnRmdC9mYnRmdC1idXMuYyAgICAgIHwgIDMgKy0tCiBkcml2ZXJzL3N0YWdpbmcv
ZmJ0ZnQvZmJ0ZnQtY29yZS5jICAgICB8IDEzICsrKysrKy0tLS0tLS0KIGRyaXZlcnMvc3RhZ2lu
Zy9mYnRmdC9mYnRmdC1pby5jICAgICAgIHwgMTIgKysrKysrLS0tLS0tCiAxOCBmaWxlcyBjaGFu
Z2VkLCAyNSBpbnNlcnRpb25zKCspLCA2NSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2
ZXJzL3N0YWdpbmcvZmJ0ZnQvVE9ETyBiL2RyaXZlcnMvc3RhZ2luZy9mYnRmdC9UT0RPCmluZGV4
IGE5ZjQ4MDJiYjZiZS4uZTcyYTA4YmYyMjFjIDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcv
ZmJ0ZnQvVE9ETworKysgYi9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvVE9ETwpAQCAtMSw4ICsxLDMg
QEAKLSogY29udmVydCBhbGwgdXNlcyBvZiB0aGUgb2xkIEdQSU8gQVBJIGZyb20gPGxpbnV4L2dw
aW8uaD4gdG8gdGhlCi0gIEdQSU8gZGVzY3JpcHRvciBBUEkgaW4gPGxpbnV4L2dwaW8vY29uc3Vt
ZXIuaD4gYW5kIGxvb2sgdXAgR1BJTwotICBsaW5lcyBmcm9tIGRldmljZSB0cmVlLCBBQ1BJIG9y
IGJvYXJkIGZpbGVzLCBib2FyZCBmaWxlcyBzaG91bGQKLSAgdXNlIDxsaW51eC9ncGlvL21hY2hp
bmUuaD4KLQogKiBjb252ZXJ0IGFsbCB0aGVzZSBvdmVyIHRvIGRybV9zaW1wbGVfZGlzcGxheV9w
aXBlIGFuZCBzdWJtaXQgZm9yIGluY2x1c2lvbgogICBpbnRvIHRoZSBEUk0gc3Vic3lzdGVtIHVu
ZGVyIGRyaXZlcnMvZ3B1L2RybSAtIGZiZGV2IGRvZXNuJ3QgdGFrZSBhbnkgbmV3CiAgIGRyaXZl
cnMgYW55bW9yZS4KZGlmZiAtLWdpdCBhL2RyaXZlcnMvc3RhZ2luZy9mYnRmdC9mYl9hZ20xMjY0
ay1mbC5jIGIvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX2FnbTEyNjRrLWZsLmMKaW5kZXggZWVl
ZWVjOTdhZDI3Li5iNTQ1YzJjYTgwYTQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvc3RhZ2luZy9mYnRm
dC9mYl9hZ20xMjY0ay1mbC5jCisrKyBiL2RyaXZlcnMvc3RhZ2luZy9mYnRmdC9mYl9hZ20xMjY0
ay1mbC5jCkBAIC04NCw5ICs4NCw5IEBAIHN0YXRpYyB2b2lkIHJlc2V0KHN0cnVjdCBmYnRmdF9w
YXIgKnBhcikKIAogCWRldl9kYmcocGFyLT5pbmZvLT5kZXZpY2UsICIlcygpXG4iLCBfX2Z1bmNf
Xyk7CiAKLQlncGlvZF9zZXRfdmFsdWUocGFyLT5ncGlvLnJlc2V0LCAwKTsKLQl1ZGVsYXkoMjAp
OwogCWdwaW9kX3NldF92YWx1ZShwYXItPmdwaW8ucmVzZXQsIDEpOworCXVkZWxheSgyMCk7CisJ
Z3Bpb2Rfc2V0X3ZhbHVlKHBhci0+Z3Bpby5yZXNldCwgMCk7CiAJbWRlbGF5KDEyMCk7CiB9CiAK
QEAgLTE5NCwxMiArMTk0LDEyIEBAIHN0YXRpYyB2b2lkIHdyaXRlX3JlZzhfYnVzOChzdHJ1Y3Qg
ZmJ0ZnRfcGFyICpwYXIsIGludCBsZW4sIC4uLikKIAkvKiBzZWxlY3QgY2hpcCAqLwogCWlmICgq
YnVmKSB7CiAJCS8qIGNzMSAqLwotCQlncGlvZF9zZXRfdmFsdWUocGFyLT5DUzAsIDEpOwotCQln
cGlvZF9zZXRfdmFsdWUocGFyLT5DUzEsIDApOwotCX0gZWxzZSB7Ci0JCS8qIGNzMCAqLwogCQln
cGlvZF9zZXRfdmFsdWUocGFyLT5DUzAsIDApOwogCQlncGlvZF9zZXRfdmFsdWUocGFyLT5DUzEs
IDEpOworCX0gZWxzZSB7CisJCS8qIGNzMCAqLworCQlncGlvZF9zZXRfdmFsdWUocGFyLT5DUzAs
IDEpOworCQlncGlvZF9zZXRfdmFsdWUocGFyLT5DUzEsIDApOwogCX0KIAogCWdwaW9kX3NldF92
YWx1ZShwYXItPlJTLCAwKTsgLyogUlMtPjAgKGNvbW1hbmQgbW9kZSkgKi8KQEAgLTM5Nyw4ICsz
OTcsOCBAQCBzdGF0aWMgaW50IHdyaXRlX3ZtZW0oc3RydWN0IGZidGZ0X3BhciAqcGFyLCBzaXpl
X3Qgb2Zmc2V0LCBzaXplX3QgbGVuKQogCX0KIAlrZnJlZShjb252ZXJ0X2J1Zik7CiAKLQlncGlv
ZF9zZXRfdmFsdWUocGFyLT5DUzAsIDEpOwotCWdwaW9kX3NldF92YWx1ZShwYXItPkNTMSwgMSk7
CisJZ3Bpb2Rfc2V0X3ZhbHVlKHBhci0+Q1MwLCAwKTsKKwlncGlvZF9zZXRfdmFsdWUocGFyLT5D
UzEsIDApOwogCiAJcmV0dXJuIHJldDsKIH0KQEAgLTQxOSwxMCArNDE5LDEwIEBAIHN0YXRpYyBp
bnQgd3JpdGUoc3RydWN0IGZidGZ0X3BhciAqcGFyLCB2b2lkICpidWYsIHNpemVfdCBsZW4pCiAJ
CWZvciAoaSA9IDA7IGkgPCA4OyArK2kpCiAJCQlncGlvZF9zZXRfdmFsdWUocGFyLT5ncGlvLmRi
W2ldLCBkYXRhICYgKDEgPDwgaSkpOwogCQkvKiBzZXQgRSAqLwotCQlncGlvZF9zZXRfdmFsdWUo
cGFyLT5FUElOLCAxKTsKKwkJZ3Bpb2Rfc2V0X3ZhbHVlKHBhci0+RVBJTiwgMCk7CiAJCXVkZWxh
eSg1KTsKIAkJLyogdW5zZXQgRSAtIHdyaXRlICovCi0JCWdwaW9kX3NldF92YWx1ZShwYXItPkVQ
SU4sIDApOworCQlncGlvZF9zZXRfdmFsdWUocGFyLT5FUElOLCAxKTsKIAkJdWRlbGF5KDEpOwog
CX0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX2JkNjYzNDc0LmMgYi9k
cml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfYmQ2NjM0NzQuYwppbmRleCBlMmM3NjQ2NTg4ZjguLjE2
MjljMmM0NDBhOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX2JkNjYzNDc0
LmMKKysrIGIvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX2JkNjYzNDc0LmMKQEAgLTEyLDcgKzEy
LDYgQEAKICNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KICNpbmNsdWRlIDxsaW51eC9rZXJuZWwu
aD4KICNpbmNsdWRlIDxsaW51eC9pbml0Lmg+Ci0jaW5jbHVkZSA8bGludXgvZ3Bpby9jb25zdW1l
ci5oPgogI2luY2x1ZGUgPGxpbnV4L2RlbGF5Lmg+CiAKICNpbmNsdWRlICJmYnRmdC5oIgpAQCAt
MjQsOSArMjMsNiBAQAogCiBzdGF0aWMgaW50IGluaXRfZGlzcGxheShzdHJ1Y3QgZmJ0ZnRfcGFy
ICpwYXIpCiB7Ci0JaWYgKHBhci0+Z3Bpby5jcykKLQkJZ3Bpb2Rfc2V0X3ZhbHVlKHBhci0+Z3Bp
by5jcywgMCk7ICAvKiBBY3RpdmF0ZSBjaGlwICovCi0KIAlwYXItPmZidGZ0b3BzLnJlc2V0KHBh
cik7CiAKIAkvKiBJbml0aWFsaXphdGlvbiBzZXF1ZW5jZSBmcm9tIExpYl9VVEZUICovCmRpZmYg
LS1naXQgYS9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfaWxpOTE2My5jIGIvZHJpdmVycy9zdGFn
aW5nL2ZidGZ0L2ZiX2lsaTkxNjMuYwppbmRleCAwNTY0OGMzZmZlNDcuLjY1ODJhMmM5MGFhZiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX2lsaTkxNjMuYworKysgYi9kcml2
ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfaWxpOTE2My5jCkBAIC0xMSw3ICsxMSw2IEBACiAjaW5jbHVk
ZSA8bGludXgvbW9kdWxlLmg+CiAjaW5jbHVkZSA8bGludXgva2VybmVsLmg+CiAjaW5jbHVkZSA8
bGludXgvaW5pdC5oPgotI2luY2x1ZGUgPGxpbnV4L2dwaW8vY29uc3VtZXIuaD4KICNpbmNsdWRl
IDxsaW51eC9kZWxheS5oPgogI2luY2x1ZGUgPHZpZGVvL21pcGlfZGlzcGxheS5oPgogCkBAIC03
Nyw5ICs3Niw2IEBAIHN0YXRpYyBpbnQgaW5pdF9kaXNwbGF5KHN0cnVjdCBmYnRmdF9wYXIgKnBh
cikKIHsKIAlwYXItPmZidGZ0b3BzLnJlc2V0KHBhcik7CiAKLQlpZiAocGFyLT5ncGlvLmNzKQot
CQlncGlvZF9zZXRfdmFsdWUocGFyLT5ncGlvLmNzLCAwKTsgIC8qIEFjdGl2YXRlIGNoaXAgKi8K
LQogCXdyaXRlX3JlZyhwYXIsIE1JUElfRENTX1NPRlRfUkVTRVQpOyAvKiBzb2Z0d2FyZSByZXNl
dCAqLwogCW1kZWxheSg1MDApOwogCXdyaXRlX3JlZyhwYXIsIE1JUElfRENTX0VYSVRfU0xFRVBf
TU9ERSk7IC8qIGV4aXQgc2xlZXAgKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvc3RhZ2luZy9mYnRm
dC9mYl9pbGk5MzIwLmMgYi9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfaWxpOTMyMC5jCmluZGV4
IGYyZTcyZDE0NDMxZC4uYThmNGM2MThiNzU0IDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcv
ZmJ0ZnQvZmJfaWxpOTMyMC5jCisrKyBiL2RyaXZlcnMvc3RhZ2luZy9mYnRmdC9mYl9pbGk5MzIw
LmMKQEAgLTgsNyArOCw2IEBACiAjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+CiAjaW5jbHVkZSA8
bGludXgva2VybmVsLmg+CiAjaW5jbHVkZSA8bGludXgvaW5pdC5oPgotI2luY2x1ZGUgPGxpbnV4
L2dwaW8vY29uc3VtZXIuaD4KICNpbmNsdWRlIDxsaW51eC9zcGkvc3BpLmg+CiAjaW5jbHVkZSA8
bGludXgvZGVsYXkuaD4KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX2ls
aTkzMjUuYyBiL2RyaXZlcnMvc3RhZ2luZy9mYnRmdC9mYl9pbGk5MzI1LmMKaW5kZXggYzlhYTRj
YjQzMTIzLi4xNmQzYjE3Y2EyNzkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvc3RhZ2luZy9mYnRmdC9m
Yl9pbGk5MzI1LmMKKysrIGIvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX2lsaTkzMjUuYwpAQCAt
MTAsNyArMTAsNiBAQAogI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgogI2luY2x1ZGUgPGxpbnV4
L2tlcm5lbC5oPgogI2luY2x1ZGUgPGxpbnV4L2luaXQuaD4KLSNpbmNsdWRlIDxsaW51eC9ncGlv
L2NvbnN1bWVyLmg+CiAjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KIAogI2luY2x1ZGUgImZidGZ0
LmgiCkBAIC04NSw5ICs4NCw2IEBAIHN0YXRpYyBpbnQgaW5pdF9kaXNwbGF5KHN0cnVjdCBmYnRm
dF9wYXIgKnBhcikKIHsKIAlwYXItPmZidGZ0b3BzLnJlc2V0KHBhcik7CiAKLQlpZiAocGFyLT5n
cGlvLmNzKQotCQlncGlvZF9zZXRfdmFsdWUocGFyLT5ncGlvLmNzLCAwKTsgIC8qIEFjdGl2YXRl
IGNoaXAgKi8KLQogCWJ0ICY9IDB4MDc7CiAJdmMgJj0gMHgwNzsKIAl2cmggJj0gMHgwZjsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvc3RhZ2luZy9mYnRmdC9mYl9pbGk5MzQwLmMgYi9kcml2ZXJzL3N0
YWdpbmcvZmJ0ZnQvZmJfaWxpOTM0MC5jCmluZGV4IDQxNTE4M2M3MDU0YS4uNzA0MjM2YmNhZjNm
IDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfaWxpOTM0MC5jCisrKyBiL2Ry
aXZlcnMvc3RhZ2luZy9mYnRmdC9mYl9pbGk5MzQwLmMKQEAgLTgsNyArOCw2IEBACiAjaW5jbHVk
ZSA8bGludXgvbW9kdWxlLmg+CiAjaW5jbHVkZSA8bGludXgva2VybmVsLmg+CiAjaW5jbHVkZSA8
bGludXgvaW5pdC5oPgotI2luY2x1ZGUgPGxpbnV4L2dwaW8vY29uc3VtZXIuaD4KICNpbmNsdWRl
IDxsaW51eC9kZWxheS5oPgogI2luY2x1ZGUgPHZpZGVvL21pcGlfZGlzcGxheS5oPgogCmRpZmYg
LS1naXQgYS9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfczZkMTEyMS5jIGIvZHJpdmVycy9zdGFn
aW5nL2ZidGZ0L2ZiX3M2ZDExMjEuYwppbmRleCA4YzdkZTMyOTAzNDMuLjYyZjI3MTcyZjg0NCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3M2ZDExMjEuYworKysgYi9kcml2
ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfczZkMTEyMS5jCkBAIC0xMiw3ICsxMiw2IEBACiAjaW5jbHVk
ZSA8bGludXgvbW9kdWxlLmg+CiAjaW5jbHVkZSA8bGludXgva2VybmVsLmg+CiAjaW5jbHVkZSA8
bGludXgvaW5pdC5oPgotI2luY2x1ZGUgPGxpbnV4L2dwaW8vY29uc3VtZXIuaD4KICNpbmNsdWRl
IDxsaW51eC9kZWxheS5oPgogCiAjaW5jbHVkZSAiZmJ0ZnQuaCIKQEAgLTI5LDkgKzI4LDYgQEAg
c3RhdGljIGludCBpbml0X2Rpc3BsYXkoc3RydWN0IGZidGZ0X3BhciAqcGFyKQogewogCXBhci0+
ZmJ0ZnRvcHMucmVzZXQocGFyKTsKIAotCWlmIChwYXItPmdwaW8uY3MpCi0JCWdwaW9kX3NldF92
YWx1ZShwYXItPmdwaW8uY3MsIDApOyAgLyogQWN0aXZhdGUgY2hpcCAqLwotCiAJLyogSW5pdGlh
bGl6YXRpb24gc2VxdWVuY2UgZnJvbSBMaWJfVVRGVCAqLwogCiAJd3JpdGVfcmVnKHBhciwgMHgw
MDExLCAweDIwMDQpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3NoMTEw
Ni5jIGIvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3NoMTEwNi5jCmluZGV4IDZmNzI0OTQ5M2Vh
My4uN2I5YWIzOWUxYzFhIDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfc2gx
MTA2LmMKKysrIGIvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3NoMTEwNi5jCkBAIC05LDcgKzks
NiBAQAogI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgogI2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5o
PgogI2luY2x1ZGUgPGxpbnV4L2luaXQuaD4KLSNpbmNsdWRlIDxsaW51eC9ncGlvL2NvbnN1bWVy
Lmg+CiAjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KIAogI2luY2x1ZGUgImZidGZ0LmgiCmRpZmYg
LS1naXQgYS9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfc3NkMTI4OS5jIGIvZHJpdmVycy9zdGFn
aW5nL2ZidGZ0L2ZiX3NzZDEyODkuYwppbmRleCA3YTNmZTAyMmNjNjkuLmYyN2JhYjM4YjNlYyAx
MDA2NDQKLS0tIGEvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3NzZDEyODkuYworKysgYi9kcml2
ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfc3NkMTI4OS5jCkBAIC0xMCw3ICsxMCw2IEBACiAjaW5jbHVk
ZSA8bGludXgvbW9kdWxlLmg+CiAjaW5jbHVkZSA8bGludXgva2VybmVsLmg+CiAjaW5jbHVkZSA8
bGludXgvaW5pdC5oPgotI2luY2x1ZGUgPGxpbnV4L2dwaW8vY29uc3VtZXIuaD4KIAogI2luY2x1
ZGUgImZidGZ0LmgiCiAKQEAgLTI4LDkgKzI3LDYgQEAgc3RhdGljIGludCBpbml0X2Rpc3BsYXko
c3RydWN0IGZidGZ0X3BhciAqcGFyKQogewogCXBhci0+ZmJ0ZnRvcHMucmVzZXQocGFyKTsKIAot
CWlmIChwYXItPmdwaW8uY3MpCi0JCWdwaW9kX3NldF92YWx1ZShwYXItPmdwaW8uY3MsIDApOyAg
LyogQWN0aXZhdGUgY2hpcCAqLwotCiAJd3JpdGVfcmVnKHBhciwgMHgwMCwgMHgwMDAxKTsKIAl3
cml0ZV9yZWcocGFyLCAweDAzLCAweEE4QTQpOwogCXdyaXRlX3JlZyhwYXIsIDB4MEMsIDB4MDAw
MCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfc3NkMTMyNS5jIGIvZHJp
dmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3NzZDEzMjUuYwppbmRleCA4YTMxNDBkNDFkOGIuLjc5NmEy
YWMzZTE5NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3NzZDEzMjUuYwor
KysgYi9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfc3NkMTMyNS5jCkBAIC0zNSw4ICszNSw2IEBA
IHN0YXRpYyBpbnQgaW5pdF9kaXNwbGF5KHN0cnVjdCBmYnRmdF9wYXIgKnBhcikKIHsKIAlwYXIt
PmZidGZ0b3BzLnJlc2V0KHBhcik7CiAKLQlncGlvZF9zZXRfdmFsdWUocGFyLT5ncGlvLmNzLCAw
KTsKLQogCXdyaXRlX3JlZyhwYXIsIDB4YjMpOwogCXdyaXRlX3JlZyhwYXIsIDB4ZjApOwogCXdy
aXRlX3JlZyhwYXIsIDB4YWUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2Zi
X3NzZDEzMzEuYyBiL2RyaXZlcnMvc3RhZ2luZy9mYnRmdC9mYl9zc2QxMzMxLmMKaW5kZXggMzc2
MjJjOTQ2MmFhLi5lYzVlY2VkN2Y4Y2IgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvc3RhZ2luZy9mYnRm
dC9mYl9zc2QxMzMxLmMKKysrIGIvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3NzZDEzMzEuYwpA
QCAtODEsOCArODEsNyBAQCBzdGF0aWMgdm9pZCB3cml0ZV9yZWc4X2J1czgoc3RydWN0IGZidGZ0
X3BhciAqcGFyLCBpbnQgbGVuLCAuLi4pCiAJdmFfc3RhcnQoYXJncywgbGVuKTsKIAogCSpidWYg
PSAodTgpdmFfYXJnKGFyZ3MsIHVuc2lnbmVkIGludCk7Ci0JaWYgKHBhci0+Z3Bpby5kYykKLQkJ
Z3Bpb2Rfc2V0X3ZhbHVlKHBhci0+Z3Bpby5kYywgMCk7CisJZ3Bpb2Rfc2V0X3ZhbHVlKHBhci0+
Z3Bpby5kYywgMCk7CiAJcmV0ID0gcGFyLT5mYnRmdG9wcy53cml0ZShwYXIsIHBhci0+YnVmLCBz
aXplb2YodTgpKTsKIAlpZiAocmV0IDwgMCkgewogCQl2YV9lbmQoYXJncyk7CkBAIC0xMDQsOCAr
MTAzLDcgQEAgc3RhdGljIHZvaWQgd3JpdGVfcmVnOF9idXM4KHN0cnVjdCBmYnRmdF9wYXIgKnBh
ciwgaW50IGxlbiwgLi4uKQogCQkJcmV0dXJuOwogCQl9CiAJfQotCWlmIChwYXItPmdwaW8uZGMp
Ci0JCWdwaW9kX3NldF92YWx1ZShwYXItPmdwaW8uZGMsIDEpOworCWdwaW9kX3NldF92YWx1ZShw
YXItPmdwaW8uZGMsIDEpOwogCXZhX2VuZChhcmdzKTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9zdGFnaW5nL2ZidGZ0L2ZiX3NzZDEzNTEuYyBiL2RyaXZlcnMvc3RhZ2luZy9mYnRmdC9mYl9z
c2QxMzUxLmMKaW5kZXggOTAwYjI4ZDgyNmIyLi5jZjI2M2E1OGExNDggMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvc3RhZ2luZy9mYnRmdC9mYl9zc2QxMzUxLmMKKysrIGIvZHJpdmVycy9zdGFnaW5nL2Zi
dGZ0L2ZiX3NzZDEzNTEuYwpAQCAtMiw3ICsyLDYgQEAKICNpbmNsdWRlIDxsaW51eC9tb2R1bGUu
aD4KICNpbmNsdWRlIDxsaW51eC9rZXJuZWwuaD4KICNpbmNsdWRlIDxsaW51eC9pbml0Lmg+Ci0j
aW5jbHVkZSA8bGludXgvZ3Bpby9jb25zdW1lci5oPgogI2luY2x1ZGUgPGxpbnV4L3NwaS9zcGku
aD4KICNpbmNsdWRlIDxsaW51eC9kZWxheS5oPgogCmRpZmYgLS1naXQgYS9kcml2ZXJzL3N0YWdp
bmcvZmJ0ZnQvZmJfdXBkMTYxNzA0LmMgYi9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfdXBkMTYx
NzA0LmMKaW5kZXggYzc3ODMyYWU1ZTViLi5jNjgwMTYwZDYzODAgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvc3RhZ2luZy9mYnRmdC9mYl91cGQxNjE3MDQuYworKysgYi9kcml2ZXJzL3N0YWdpbmcvZmJ0
ZnQvZmJfdXBkMTYxNzA0LmMKQEAgLTEyLDcgKzEyLDYgQEAKICNpbmNsdWRlIDxsaW51eC9tb2R1
bGUuaD4KICNpbmNsdWRlIDxsaW51eC9rZXJuZWwuaD4KICNpbmNsdWRlIDxsaW51eC9pbml0Lmg+
Ci0jaW5jbHVkZSA8bGludXgvZ3Bpby9jb25zdW1lci5oPgogI2luY2x1ZGUgPGxpbnV4L2RlbGF5
Lmg+CiAKICNpbmNsdWRlICJmYnRmdC5oIgpAQCAtMjYsOSArMjUsNiBAQCBzdGF0aWMgaW50IGlu
aXRfZGlzcGxheShzdHJ1Y3QgZmJ0ZnRfcGFyICpwYXIpCiB7CiAJcGFyLT5mYnRmdG9wcy5yZXNl
dChwYXIpOwogCi0JaWYgKHBhci0+Z3Bpby5jcykKLQkJZ3Bpb2Rfc2V0X3ZhbHVlKHBhci0+Z3Bp
by5jcywgMCk7ICAvKiBBY3RpdmF0ZSBjaGlwICovCi0KIAkvKiBJbml0aWFsaXphdGlvbiBzZXF1
ZW5jZSBmcm9tIExpYl9VVEZUICovCiAKIAkvKiByZWdpc3RlciByZXNldCAqLwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3dhdHRlcm90dC5jIGIvZHJpdmVycy9zdGFnaW5n
L2ZidGZ0L2ZiX3dhdHRlcm90dC5jCmluZGV4IDc2YjI1ZGYzNzZiOC4uYTU3ZTFmNGZlZWYzIDEw
MDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJfd2F0dGVyb3R0LmMKKysrIGIvZHJp
dmVycy9zdGFnaW5nL2ZidGZ0L2ZiX3dhdHRlcm90dC5jCkBAIC04LDcgKzgsNiBAQAogI2luY2x1
ZGUgPGxpbnV4L21vZHVsZS5oPgogI2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5oPgogI2luY2x1ZGUg
PGxpbnV4L2luaXQuaD4KLSNpbmNsdWRlIDxsaW51eC9ncGlvL2NvbnN1bWVyLmg+CiAjaW5jbHVk
ZSA8bGludXgvZGVsYXkuaD4KIAogI2luY2x1ZGUgImZidGZ0LmgiCmRpZmYgLS1naXQgYS9kcml2
ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJ0ZnQtYnVzLmMgYi9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJ0
ZnQtYnVzLmMKaW5kZXggNjNjNjVkZDY3YjE3Li4zZDQyMmJjMTE2NDEgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvc3RhZ2luZy9mYnRmdC9mYnRmdC1idXMuYworKysgYi9kcml2ZXJzL3N0YWdpbmcvZmJ0
ZnQvZmJ0ZnQtYnVzLmMKQEAgLTEzNSw4ICsxMzUsNyBAQCBpbnQgZmJ0ZnRfd3JpdGVfdm1lbTE2
X2J1czgoc3RydWN0IGZidGZ0X3BhciAqcGFyLCBzaXplX3Qgb2Zmc2V0LCBzaXplX3QgbGVuKQog
CXJlbWFpbiA9IGxlbiAvIDI7CiAJdm1lbTE2ID0gKHUxNiAqKShwYXItPmluZm8tPnNjcmVlbl9i
dWZmZXIgKyBvZmZzZXQpOwogCi0JaWYgKHBhci0+Z3Bpby5kYykKLQkJZ3Bpb2Rfc2V0X3ZhbHVl
KHBhci0+Z3Bpby5kYywgMSk7CisJZ3Bpb2Rfc2V0X3ZhbHVlKHBhci0+Z3Bpby5kYywgMSk7CiAK
IAkvKiBub24gYnVmZmVyZWQgd3JpdGUgKi8KIAlpZiAoIXBhci0+dHhidWYuYnVmKQpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9zdGFnaW5nL2ZidGZ0L2ZidGZ0LWNvcmUuYyBiL2RyaXZlcnMvc3RhZ2lu
Zy9mYnRmdC9mYnRmdC1jb3JlLmMKaW5kZXggNGYzNjJkYWQ0NDM2Li42N2MzYjE5NzVhNGQgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvc3RhZ2luZy9mYnRmdC9mYnRmdC1jb3JlLmMKKysrIGIvZHJpdmVy
cy9zdGFnaW5nL2ZidGZ0L2ZidGZ0LWNvcmUuYwpAQCAtMzgsOCArMzgsNyBAQCBpbnQgZmJ0ZnRf
d3JpdGVfYnVmX2RjKHN0cnVjdCBmYnRmdF9wYXIgKnBhciwgdm9pZCAqYnVmLCBzaXplX3QgbGVu
LCBpbnQgZGMpCiB7CiAJaW50IHJldDsKIAotCWlmIChwYXItPmdwaW8uZGMpCi0JCWdwaW9kX3Nl
dF92YWx1ZShwYXItPmdwaW8uZGMsIGRjKTsKKwlncGlvZF9zZXRfdmFsdWUocGFyLT5ncGlvLmRj
LCBkYyk7CiAKIAlyZXQgPSBwYXItPmZidGZ0b3BzLndyaXRlKHBhciwgYnVmLCBsZW4pOwogCWlm
IChyZXQgPCAwKQpAQCAtNzksNyArNzgsNyBAQCBzdGF0aWMgaW50IGZidGZ0X3JlcXVlc3Rfb25l
X2dwaW8oc3RydWN0IGZidGZ0X3BhciAqcGFyLAogCWludCByZXQgPSAwOwogCiAJKmdwaW9wID0g
ZGV2bV9ncGlvZF9nZXRfaW5kZXhfb3B0aW9uYWwoZGV2LCBuYW1lLCBpbmRleCwKLQkJCQkJICAg
ICAgIEdQSU9EX09VVF9ISUdIKTsKKwkJCQkJICAgICAgIEdQSU9EX09VVF9MT1cpOwogCWlmIChJ
U19FUlIoKmdwaW9wKSkgewogCQlyZXQgPSBQVFJfRVJSKCpncGlvcCk7CiAJCWRldl9lcnIoZGV2
LApAQCAtMjI2LDExICsyMjUsMTUgQEAgc3RhdGljIHZvaWQgZmJ0ZnRfcmVzZXQoc3RydWN0IGZi
dGZ0X3BhciAqcGFyKQogewogCWlmICghcGFyLT5ncGlvLnJlc2V0KQogCQlyZXR1cm47CisKIAlm
YnRmdF9wYXJfZGJnKERFQlVHX1JFU0VULCBwYXIsICIlcygpXG4iLCBfX2Z1bmNfXyk7CisKIAln
cGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAocGFyLT5ncGlvLnJlc2V0LCAxKTsKIAl1c2xlZXBfcmFu
Z2UoMjAsIDQwKTsKIAlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAocGFyLT5ncGlvLnJlc2V0LCAw
KTsKIAltc2xlZXAoMTIwKTsKKworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChwYXItPmdwaW8u
Y3MsIDEpOyAgLyogQWN0aXZhdGUgY2hpcCAqLwogfQogCiBzdGF0aWMgdm9pZCBmYnRmdF91cGRh
dGVfZGlzcGxheShzdHJ1Y3QgZmJ0ZnRfcGFyICpwYXIsIHVuc2lnbmVkIGludCBzdGFydF9saW5l
LApAQCAtOTIyLDggKzkyNSw2IEBAIHN0YXRpYyBpbnQgZmJ0ZnRfaW5pdF9kaXNwbGF5X2Zyb21f
cHJvcGVydHkoc3RydWN0IGZidGZ0X3BhciAqcGFyKQogCQlnb3RvIG91dF9mcmVlOwogCiAJcGFy
LT5mYnRmdG9wcy5yZXNldChwYXIpOwotCWlmIChwYXItPmdwaW8uY3MpCi0JCWdwaW9kX3NldF92
YWx1ZShwYXItPmdwaW8uY3MsIDApOyAgLyogQWN0aXZhdGUgY2hpcCAqLwogCiAJaW5kZXggPSAt
MTsKIAl2YWwgPSB2YWx1ZXNbKytpbmRleF07CkBAIC0xMDE4LDggKzEwMTksNiBAQCBpbnQgZmJ0
ZnRfaW5pdF9kaXNwbGF5KHN0cnVjdCBmYnRmdF9wYXIgKnBhcikKIAl9CiAKIAlwYXItPmZidGZ0
b3BzLnJlc2V0KHBhcik7Ci0JaWYgKHBhci0+Z3Bpby5jcykKLQkJZ3Bpb2Rfc2V0X3ZhbHVlKHBh
ci0+Z3Bpby5jcywgMCk7ICAvKiBBY3RpdmF0ZSBjaGlwICovCiAKIAlpID0gMDsKIAl3aGlsZSAo
aSA8IEZCVEZUX01BWF9JTklUX1NFUVVFTkNFKSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL3N0YWdp
bmcvZmJ0ZnQvZmJ0ZnQtaW8uYyBiL2RyaXZlcnMvc3RhZ2luZy9mYnRmdC9mYnRmdC1pby5jCmlu
ZGV4IDA4NjNkMjU3ZDc2Mi4uZGUxOTA0YTQ0M2MyIDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0YWdp
bmcvZmJ0ZnQvZmJ0ZnQtaW8uYworKysgYi9kcml2ZXJzL3N0YWdpbmcvZmJ0ZnQvZmJ0ZnQtaW8u
YwpAQCAtMTQyLDEyICsxNDIsMTIgQEAgaW50IGZidGZ0X3dyaXRlX2dwaW84X3dyKHN0cnVjdCBm
YnRmdF9wYXIgKnBhciwgdm9pZCAqYnVmLCBzaXplX3QgbGVuKQogCQlkYXRhID0gKih1OCAqKWJ1
ZjsKIAogCQkvKiBTdGFydCB3cml0aW5nIGJ5IHB1bGxpbmcgZG93biAvV1IgKi8KLQkJZ3Bpb2Rf
c2V0X3ZhbHVlKHBhci0+Z3Bpby53ciwgMCk7CisJCWdwaW9kX3NldF92YWx1ZShwYXItPmdwaW8u
d3IsIDEpOwogCiAJCS8qIFNldCBkYXRhICovCiAjaWZuZGVmIERPX05PVF9PUFRJTUlaRV9GQlRG
VF9XUklURV9HUElPCiAJCWlmIChkYXRhID09IHByZXZfZGF0YSkgewotCQkJZ3Bpb2Rfc2V0X3Zh
bHVlKHBhci0+Z3Bpby53ciwgMCk7IC8qIHVzZWQgYXMgZGVsYXkgKi8KKwkJCWdwaW9kX3NldF92
YWx1ZShwYXItPmdwaW8ud3IsIDEpOyAvKiB1c2VkIGFzIGRlbGF5ICovCiAJCX0gZWxzZSB7CiAJ
CQlmb3IgKGkgPSAwOyBpIDwgODsgaSsrKSB7CiAJCQkJaWYgKChkYXRhICYgMSkgIT0gKHByZXZf
ZGF0YSAmIDEpKQpAQCAtMTY1LDcgKzE2NSw3IEBAIGludCBmYnRmdF93cml0ZV9ncGlvOF93cihz
dHJ1Y3QgZmJ0ZnRfcGFyICpwYXIsIHZvaWQgKmJ1Ziwgc2l6ZV90IGxlbikKICNlbmRpZgogCiAJ
CS8qIFB1bGx1cCAvV1IgKi8KLQkJZ3Bpb2Rfc2V0X3ZhbHVlKHBhci0+Z3Bpby53ciwgMSk7CisJ
CWdwaW9kX3NldF92YWx1ZShwYXItPmdwaW8ud3IsIDApOwogCiAjaWZuZGVmIERPX05PVF9PUFRJ
TUlaRV9GQlRGVF9XUklURV9HUElPCiAJCXByZXZfZGF0YSA9ICoodTggKilidWY7CkBAIC0xOTIs
MTIgKzE5MiwxMiBAQCBpbnQgZmJ0ZnRfd3JpdGVfZ3BpbzE2X3dyKHN0cnVjdCBmYnRmdF9wYXIg
KnBhciwgdm9pZCAqYnVmLCBzaXplX3QgbGVuKQogCQlkYXRhID0gKih1MTYgKilidWY7CiAKIAkJ
LyogU3RhcnQgd3JpdGluZyBieSBwdWxsaW5nIGRvd24gL1dSICovCi0JCWdwaW9kX3NldF92YWx1
ZShwYXItPmdwaW8ud3IsIDApOworCQlncGlvZF9zZXRfdmFsdWUocGFyLT5ncGlvLndyLCAxKTsK
IAogCQkvKiBTZXQgZGF0YSAqLwogI2lmbmRlZiBET19OT1RfT1BUSU1JWkVfRkJURlRfV1JJVEVf
R1BJTwogCQlpZiAoZGF0YSA9PSBwcmV2X2RhdGEpIHsKLQkJCWdwaW9kX3NldF92YWx1ZShwYXIt
PmdwaW8ud3IsIDApOyAvKiB1c2VkIGFzIGRlbGF5ICovCisJCQlncGlvZF9zZXRfdmFsdWUocGFy
LT5ncGlvLndyLCAxKTsgLyogdXNlZCBhcyBkZWxheSAqLwogCQl9IGVsc2UgewogCQkJZm9yIChp
ID0gMDsgaSA8IDE2OyBpKyspIHsKIAkJCQlpZiAoKGRhdGEgJiAxKSAhPSAocHJldl9kYXRhICYg
MSkpCkBAIC0yMTUsNyArMjE1LDcgQEAgaW50IGZidGZ0X3dyaXRlX2dwaW8xNl93cihzdHJ1Y3Qg
ZmJ0ZnRfcGFyICpwYXIsIHZvaWQgKmJ1Ziwgc2l6ZV90IGxlbikKICNlbmRpZgogCiAJCS8qIFB1
bGx1cCAvV1IgKi8KLQkJZ3Bpb2Rfc2V0X3ZhbHVlKHBhci0+Z3Bpby53ciwgMSk7CisJCWdwaW9k
X3NldF92YWx1ZShwYXItPmdwaW8ud3IsIDApOwogCiAjaWZuZGVmIERPX05PVF9PUFRJTUlaRV9G
QlRGVF9XUklURV9HUElPCiAJCXByZXZfZGF0YSA9ICoodTE2ICopYnVmOwotLSAKMi4zMC4yCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwg
bWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
