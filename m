Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A249239C62B
	for <lists+dri-devel@lfdr.de>; Sat,  5 Jun 2021 08:19:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B00006E423;
	Sat,  5 Jun 2021 06:19:34 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from m13119.mail.163.com (m13119.mail.163.com [220.181.13.119])
 by gabe.freedesktop.org (Postfix) with ESMTP id 9F6896E423
 for <dri-devel@lists.freedesktop.org>; Sat,  5 Jun 2021 06:19:32 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=163.com;
 s=s110527; h=Date:From:Subject:MIME-Version:Message-ID; bh=wFa/8
 3njBIpxlwaObGOT9MnB8GIZ7xgRsyJt78KMzaI=; b=jv5eXYQezpa4Gr6mGyVWi
 yyopM+RagKE34jAol4rb7tI8HVYYTudm8PiSnSFMVi+/rBuQKeRvWYgWvLd5SO9s
 DgYNqM5yjDiDZs80JEtWbQJ1L6M2mKHne0yenMmlOTtQ3mp6gLR9E1659mQ5oXrf
 3FTG6k9rE8uQjgfwR9/YoY=
Received: from liplay$163.com ( [114.242.206.180] ) by ajax-webmail-wmsvr119
 (Coremail) ; Sat, 5 Jun 2021 14:19:27 +0800 (CST)
X-Originating-IP: [114.242.206.180]
Date: Sat, 5 Jun 2021 14:19:27 +0800 (CST)
From: lichenyang  <liplay@163.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 1/3] drm/loongson: Add DRM Driver for Loongson 7A1000 bridge
 chip
X-Priority: 3
X-Mailer: Coremail Webmail Server Version XT5.0.13 build 20210104(ab8c30b6)
 Copyright (c) 2002-2021 www.mailtech.cn 163com
X-CM-CTRLDATA: ZNIvFmZvb3Rlcl9odG09MzAzMTM6NTY=
Content-Type: multipart/alternative; 
 boundary="----=_Part_16666_34794156.1622873967309"
MIME-Version: 1.0
Message-ID: <3958db6e.11d9.179dad38acd.Coremail.liplay@163.com>
X-Coremail-Locale: zh_CN
X-CM-TRANSID: d8GowAC3zn5vF7tgoBXtAA--.54322W
X-CM-SenderInfo: xolsztr16rljoofrz/1tbiDx6nHFUMYT3P4wABsC
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

------=_Part_16666_34794156.1622873967309
Content-Type: text/plain; charset=GBK
Content-Transfer-Encoding: base64

RnJvbTogQ2hlbnlhbmcgTGkgPGxpY2hlbnlhbmdAbG9vbmdzb24uY24+CgpUaGlzIHBhdGNoIGFk
ZHMgYW4gaW5pdGlhbCBEUk0gZHJpdmVyIGZvciB0aGUgTG9vbmdzb24gTFM3QTEwMDAKYnJpZGdl
IGNoaXAoTFM3QSkuIFRoZSBMUzdBIGJyaWRnZSBjaGlwIGNvbnRhaW5zIHR3byBkaXNwbGF5CmNv
bnRyb2xsZXJzLCBzdXBwb3J0IGR1YWwgZGlzcGxheSBvdXRwdXQuIFRoZSBtYXhpbXVtIHN1cHBv
cnQgZm9yCmVhY2ggY2hhbm5lbCBkaXNwbGF5IGlzIHRvIDE5MjB4MTA4MEA2MEh6LgpBdCBwcmVz
ZW50LCBEQyBkZXZpY2UgZGV0ZWN0aW9uIGFuZCBEUk0gZHJpdmVyIHJlZ2lzdHJhdGlvbiBhcmUK
Y29tcGxldGVkLCB0aGUgY3J0Yy9wbGFuZS9lbmNvZGVyL2Nvbm5lY3RvciBvYmplY3RzIGhhcyBi
ZWVuCmltcGxlbWVudGVkLgpPbiBMb29uZ3NvbiAzQTQwMDAgQ1BVIGFuZCA3QTEwMDAgc3lzdGVt
LCB3ZSBoYXZlIGFjaGlldmVkIHRoZSB1c2UKb2YgZHVhbCBzY3JlZW4sIGFuZCBzdXBwb3J0IGR1
YWwgc2NyZWVuIGNsb25lIG1vZGUgYW5kIGV4cGFuc2lvbgptb2RlLgoKdjg6Ci0gVXBkYXRlIHRo
ZSBhdG9taWNfdXBkYXRlIGZ1bmN0aW9uIGludGVyZmFjZS4KCnY3OgotIFRoZSBwaXhlbCBjbG9j
ayBpcyBsaW1pdGVkIHRvIGxlc3MgdGhhbiAxNzMwMDAuCgp2NjoKLSBSZW1vdmUgc3Bpbl9sb2Nr
IGluIG1taW8gcmVnIHJlYWQgYW5kIHdyaXRlLgotIFRPX1VOQ0FDIGlzIHJlcGxhYyB3aXRoIGlv
cmVtYXAuCi0gRml4IGVycm9yIGFyZ3VtZW50cyBpbiBjcnRjX2F0b21pY19lbmFibGUvZGlzYWJs
ZS9tb2RlX3ZhbGlkLgoKdjU6Ci0gQ2hhbmdlIHRoZSBuYW1lIG9mIHRoZSBjaGlwIHRvIExTN0Eu
Ci0gQ2hhbmdlIG1hZ2ljIHZhbHVlIGluIGNydGMgdG8gbWFjcm9zLgotIENvcnJlY3QgbWlzdGFr
ZXMgd29yZHMuCi0gQ2hhbmdlIHRoZSByZWdpc3RlciBvcGVyYXRpb24gZnVuY3Rpb24gcHJlZml4
IHRvIGxzN2EuCgp2NDoKLSBNb3ZlIHRoZSBtb2RlX3ZhbGlkIGZ1bmN0aW9uIHRvIHRoZSBjcnRj
LgoKdjM6Ci0gTW92ZSB0aGUgbW9kZV92YWxpZCBmdW5jdGlvbiB0byB0aGUgY29ubmVjdG9yIGFu
ZCBvcHRpbWl6ZSBpdC4KLSBGaXggbnVtX2NydGMgY2FsY3VsYXRpb24gbWV0aG9kLgoKdjI6Ci0g
Q29tcGxldGUgdGhlIGNhc2Ugb2YgMzItYml0IGNvbG9yIGluIENSVEMuCgpTaWduZWQtb2ZmLWJ5
OiBDaGVueWFuZyBMaSA8bGljaGVueWFuZ0Bsb29uZ3Nvbi5jbj4KLS0tCiBkcml2ZXJzL2dwdS9k
cm0vS2NvbmZpZyAgICAgICAgICAgICAgICAgICAgICAgfCAgIDIgKwogZHJpdmVycy9ncHUvZHJt
L01ha2VmaWxlICAgICAgICAgICAgICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9s
b29uZ3Nvbi9LY29uZmlnICAgICAgICAgICAgICB8ICAxNCArCiBkcml2ZXJzL2dwdS9kcm0vbG9v
bmdzb24vTWFrZWZpbGUgICAgICAgICAgICAgfCAgMTQgKwogZHJpdmVycy9ncHUvZHJtL2xvb25n
c29uL2xvb25nc29uX2Nvbm5lY3Rvci5jIHwgIDQ4ICsrKysKIGRyaXZlcnMvZ3B1L2RybS9sb29u
Z3Nvbi9sb29uZ3Nvbl9jcnRjLmMgICAgICB8IDI0MyArKysrKysrKysrKysrKysrCiBkcml2ZXJz
L2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZGV2aWNlLmMgICAgfCAgNDcgKysrCiBkcml2ZXJz
L2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2LmMgICAgICAgfCAyNzAgKysrKysrKysrKysr
KysrKysrCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2LmggICAgICAgfCAx
MzkgKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZW5jb2Rlci5j
ICAgfCAgMzcgKysrCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fcGxhbmUuYyAg
ICAgfCAxMDIgKysrKysrKwogMTEgZmlsZXMgY2hhbmdlZCwgOTE3IGluc2VydGlvbnMoKykKIGNy
ZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZwogY3JlYXRl
IG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9NYWtlZmlsZQogY3JlYXRlIG1v
ZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYwog
Y3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jcnRj
LmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25f
ZGV2aWNlLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9v
bmdzb25fZHJ2LmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24v
bG9vbmdzb25fZHJ2LmgKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdz
b24vbG9vbmdzb25fZW5jb2Rlci5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJt
L2xvb25nc29uL2xvb25nc29uX3BsYW5lLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
S2NvbmZpZyBiL2RyaXZlcnMvZ3B1L2RybS9LY29uZmlnCmluZGV4IDNjMTZiZDFhZmQ4Ny4uYzBj
MjgxNjM1Y2VlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vS2NvbmZpZworKysgYi9kcml2
ZXJzL2dwdS9kcm0vS2NvbmZpZwpAQCAtMzcyLDYgKzM3Miw4IEBAIHNvdXJjZSAiZHJpdmVycy9n
cHUvZHJtL3hlbi9LY29uZmlnIgogCiBzb3VyY2UgImRyaXZlcnMvZ3B1L2RybS92Ym94dmlkZW8v
S2NvbmZpZyIKIAorc291cmNlICJkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZyIKKwog
c291cmNlICJkcml2ZXJzL2dwdS9kcm0vbGltYS9LY29uZmlnIgogCiBzb3VyY2UgImRyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9LY29uZmlnIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL01h
a2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL01ha2VmaWxlCmluZGV4IDUyNzlkYjQzOTJkZi4uNzc5
NzVmZGI0ZDUxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKKysrIGIvZHJp
dmVycy9ncHUvZHJtL01ha2VmaWxlCkBAIC0xMTksNiArMTE5LDcgQEAgb2JqLSQoQ09ORklHX0RS
TV9QTDExMSkgKz0gcGwxMTEvCiBvYmotJChDT05GSUdfRFJNX1RWRTIwMCkgKz0gdHZlMjAwLwog
b2JqLSQoQ09ORklHX0RSTV9YRU4pICs9IHhlbi8KIG9iai0kKENPTkZJR19EUk1fVkJPWFZJREVP
KSArPSB2Ym94dmlkZW8vCitvYmotJChDT05GSUdfRFJNX0xPT05HU09OKSArPSBsb29uZ3Nvbi8K
IG9iai0kKENPTkZJR19EUk1fTElNQSkgICs9IGxpbWEvCiBvYmotJChDT05GSUdfRFJNX1BBTkZS
T1NUKSArPSBwYW5mcm9zdC8KIG9iai0kKENPTkZJR19EUk1fQVNQRUVEX0dGWCkgKz0gYXNwZWVk
LwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL0tjb25maWcgYi9kcml2ZXJz
L2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAw
MDAwMDAwMDAuLjNjZjQyYTRjY2EwOAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9sb29uZ3Nvbi9LY29uZmlnCkBAIC0wLDAgKzEsMTQgQEAKKyMgU1BEWC1MaWNlbnNlLUlkZW50
aWZpZXI6IEdQTC0yLjAtb25seQorCitjb25maWcgRFJNX0xPT05HU09OCisJdHJpc3RhdGUgIkRS
TSBzdXBwb3J0IGZvciBMUzdBIGJyaWRnZSBjaGlwc2V0IgorCWRlcGVuZHMgb24gRFJNICYmIFBD
SQorCWRlcGVuZHMgb24gQ1BVX0xPT05HU09ONjQKKwlzZWxlY3QgRFJNX0tNU19IRUxQRVIKKwlz
ZWxlY3QgRFJNX1ZSQU1fSEVMUEVSCisJc2VsZWN0IERSTV9UVE0KKwlzZWxlY3QgRFJNX1RUTV9I
RUxQRVIKKwlkZWZhdWx0IG4KKwloZWxwCisJICBTdXBwb3J0IHRoZSBkaXNwbGF5IGNvbnRyb2xs
ZXJzIGZvdW5kIG9uIHRoZSBMb29uZ3NvbiBMUzdBCisJICBicmlkZ2UuCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdz
b24vTWFrZWZpbGUKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi4yMmQw
NjM5NTNiNzgKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFr
ZWZpbGUKQEAgLTAsMCArMSwxNCBAQAorIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIu
MC1vbmx5CisjCisjIE1ha2VmaWxlIGZvciBsb29uZ3NvbiBkcm0gZHJpdmVycy4KKyMgVGhpcyBk
cml2ZXIgcHJvdmlkZXMgc3VwcG9ydCBmb3IgdGhlCisjIERpcmVjdCBSZW5kZXJpbmcgSW5mcmFz
dHJ1Y3R1cmUgKERSSSkKKworY2NmbGFncy15IDo9IC1JaW5jbHVkZS9kcm0KK2xvb25nc29uLXkg
Oj0gbG9vbmdzb25fZHJ2Lm8gXAorCWxvb25nc29uX2NydGMubyBcCisJbG9vbmdzb25fcGxhbmUu
byBcCisJbG9vbmdzb25fZGV2aWNlLm8gXAorCWxvb25nc29uX2Nvbm5lY3Rvci5vIFwKKwlsb29u
Z3Nvbl9lbmNvZGVyLm8KK29iai0kKENPTkZJR19EUk1fTE9PTkdTT04pICs9IGxvb25nc29uLm8K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3Iu
YyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYwpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjZiMWYwZmZhMzNiZAotLS0gL2Rldi9u
dWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYwpA
QCAtMCwwICsxLDQ4IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1s
YXRlcgorCisjaW5jbHVkZSAibG9vbmdzb25fZHJ2LmgiCisKK3N0YXRpYyBpbnQgbG9vbmdzb25f
Z2V0X21vZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCit7CisJaW50IGNvdW50
OworCisJY291bnQgPSBkcm1fYWRkX21vZGVzX25vZWRpZChjb25uZWN0b3IsIDE5MjAsIDEwODAp
OworCWRybV9zZXRfcHJlZmVycmVkX21vZGUoY29ubmVjdG9yLCAxMDI0LCA3NjgpOworCisJcmV0
dXJuIGNvdW50OworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfaGVscGVy
X2Z1bmNzIGxvb25nc29uX2Nvbm5lY3Rvcl9oZWxwZXIgPSB7CisJLmdldF9tb2RlcyA9IGxvb25n
c29uX2dldF9tb2RlcywKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9m
dW5jcyBsb29uZ3Nvbl9jb25uZWN0b3JfZnVuY3MgPSB7CisJLmZpbGxfbW9kZXMgPSBkcm1faGVs
cGVyX3Byb2JlX3NpbmdsZV9jb25uZWN0b3JfbW9kZXMsCisJLmRlc3Ryb3kgPSBkcm1fY29ubmVj
dG9yX2NsZWFudXAsCisJLnJlc2V0ID0gZHJtX2F0b21pY19oZWxwZXJfY29ubmVjdG9yX3Jlc2V0
LAorCS5hdG9taWNfZHVwbGljYXRlX3N0YXRlID0gZHJtX2F0b21pY19oZWxwZXJfY29ubmVjdG9y
X2R1cGxpY2F0ZV9zdGF0ZSwKKwkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hl
bHBlcl9jb25uZWN0b3JfZGVzdHJveV9zdGF0ZSwKK307CisKK2ludCBsb29uZ3Nvbl9jb25uZWN0
b3JfaW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpCit7CisJc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKKwlzdHJ1Y3QgbG9vbmdzb25fY29ubmVjdG9y
ICpsY29ubmVjdG9yOworCisJbGNvbm5lY3RvciA9IGt6YWxsb2Moc2l6ZW9mKHN0cnVjdCBsb29u
Z3Nvbl9jb25uZWN0b3IpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIWxjb25uZWN0b3IpIHsKKwkJRFJN
X0lORk8oImxvb25nc29uIGNvbm5lY3RvciBremFsbG9jIGZhaWxlZFxuIik7CisJCXJldHVybiAt
MTsKKwl9CisKKwlsY29ubmVjdG9yLT5sZGV2ID0gbGRldjsKKwlsY29ubmVjdG9yLT5pZCA9IGlu
ZGV4OworCisJbGRldi0+bW9kZV9pbmZvW2luZGV4XS5jb25uZWN0b3IgPSBsY29ubmVjdG9yOwor
CWNvbm5lY3RvciA9ICZsY29ubmVjdG9yLT5iYXNlOworCWRybV9jb25uZWN0b3JfaW5pdChsZGV2
LT5kZXYsIGNvbm5lY3RvciwgJmxvb25nc29uX2Nvbm5lY3Rvcl9mdW5jcywKKwkJCSAgIERSTV9N
T0RFX0NPTk5FQ1RPUl9Vbmtub3duKTsKKwlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoY29ubmVj
dG9yLCAmbG9vbmdzb25fY29ubmVjdG9yX2hlbHBlcik7CisKKwlyZXR1cm4gMDsKK30KZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jcnRjLmMgYi9kcml2ZXJz
L2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAwMDAwMC4uNGNiNjVmYTA4Nzc4Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2NydGMuYwpAQCAtMCwwICsxLDI0MyBAQAorLy8g
U1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKworI2luY2x1ZGUgImxv
b25nc29uX2Rydi5oIgorCitzdGF0aWMgdm9pZCB0cnlfZWFjaF9sb29wYyh1MzIgY2xrLCB1MzIg
cHN0ZGl2LCB1MzIgZnJlZmMsCisJCQkgICBzdHJ1Y3QgcGl4X3BsbCAqcGxsX2NvbmZpZykKK3sK
Kwl1MzIgbG9vcGM7CisJdTMyIGNsa19vdXQ7CisJdTMyIHByZWNpc2lvbjsKKwl1MzIgbWluID0g
MTAwMDsKKwl1MzIgYmFzZV9jbGsgPSAxMDAwMDBMOworCisJZm9yIChsb29wYyA9IExPT1BDX01J
TjsgbG9vcGMgPCBMT09QQ19NQVg7IGxvb3BjKyspIHsKKwkJaWYgKChsb29wYyA8IEZSRV9SRUZf
TUlOICogZnJlZmMpIHx8CisJCSAgICAobG9vcGMgPiBGUkVfUkVGX01BWCAqIGZyZWZjKSkKKwkJ
CWNvbnRpbnVlOworCisJCWNsa19vdXQgPSBiYXNlX2NsayAqIGxvb3BjIC8gZnJlZmM7CisJCXBy
ZWNpc2lvbiA9IChjbGsgPiBjbGtfb3V0KSA/IChjbGsgLSBjbGtfb3V0KSA6IChjbGtfb3V0IC0g
Y2xrKTsKKwkJaWYgKHByZWNpc2lvbiA8IG1pbikgeworCQkJcGxsX2NvbmZpZy0+bDJfZGl2ID0g
cHN0ZGl2OworCQkJcGxsX2NvbmZpZy0+bDFfbG9vcGMgPSBsb29wYzsKKwkJCXBsbF9jb25maWct
PmwxX2ZyZWZjID0gZnJlZmM7CisJCX0KKwl9Cit9CisKK3N0YXRpYyB2b2lkIGNhbF9mcmVxKHUz
MiBwaXhjbG9jaywgc3RydWN0IHBpeF9wbGwgKnBsbF9jb25maWcpCit7CisJdTMyIHBzdGRpdjsK
Kwl1MzIgZnJlZmM7CisJdTMyIGNsazsKKworCWZvciAocHN0ZGl2ID0gMTsgcHN0ZGl2IDwgUFNU
X0RJVl9NQVg7IHBzdGRpdisrKSB7CisJCWNsayA9IHBpeGNsb2NrICogcHN0ZGl2OworCQlmb3Ig
KGZyZWZjID0gRElWX1JFRl9NSU47IGZyZWZjIDw9IERJVl9SRUZfTUFYOyBmcmVmYysrKQorCQkJ
dHJ5X2VhY2hfbG9vcGMoY2xrLCBwc3RkaXYsIGZyZWZjLCBwbGxfY29uZmlnKTsKKwl9Cit9CisK
K3N0YXRpYyB2b2lkIGNvbmZpZ19wbGwoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdW5z
aWduZWQgbG9uZyBwbGxfYmFzZSwKKwkJICAgICAgIHN0cnVjdCBwaXhfcGxsICpwbGxfY2ZnKQor
eworCXUzMiB2YWw7CisJdTMyIGNvdW50ID0gMDsKKworCS8qIGNsZWFyIHNlbF9wbGxfb3V0MCAq
LworCXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCk7CisJdmFsICY9IH4o
MVVMIDw8IDgpOworCWxzN2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKwor
CS8qIHNldCBwbGxfcGQgKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAw
eDQpOworCXZhbCB8PSAoMVVMIDw8IDEzKTsKKwlsczdhX2lvX3dyZWcobGRldiwgcGxsX2Jhc2Ug
KyAweDQsIHZhbCk7CisKKwkvKiBjbGVhciBzZXRfcGxsX3BhcmFtICovCisJdmFsID0gbHM3YV9p
b19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KTsKKwl2YWwgJj0gfigxVUwgPDwgMTEpOworCWxz
N2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKworCS8qIGNsZWFyIG9sZCB2
YWx1ZSAmIGNvbmZpZyBuZXcgdmFsdWUgKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxs
X2Jhc2UgKyAweDQpOworCXZhbCAmPSB+KDB4N2ZVTCA8PCAwKTsKKwl2YWwgfD0gKHBsbF9jZmct
PmwxX2ZyZWZjIDw8IDApOyAvKiByZWZjICovCisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNl
ICsgMHg0LCB2YWwpOworCXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4MCk7
CisJdmFsICY9IH4oMHg3ZlVMIDw8IDApOworCXZhbCB8PSAocGxsX2NmZy0+bDJfZGl2IDw8IDAp
OyAvKiBkaXYgKi8KKwl2YWwgJj0gfigweDFmZlVMIDw8IDIxKTsKKwl2YWwgfD0gKHBsbF9jZmct
PmwxX2xvb3BjIDw8IDIxKTsgLyogbG9vcGMgKi8KKwlsczdhX2lvX3dyZWcobGRldiwgcGxsX2Jh
c2UgKyAweDAsIHZhbCk7CisKKwkvKiBzZXQgc2V0X3BsbF9wYXJhbSAqLworCXZhbCA9IGxzN2Ff
aW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCk7CisJdmFsIHw9ICgxVUwgPDwgMTEpOworCWxz
N2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKwkvKiBjbGVhciBwbGxfcGQg
Ki8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQpOworCXZhbCAmPSB+
KDFVTCA8PCAxMyk7CisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0LCB2YWwpOwor
CisJd2hpbGUgKCEobHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KSAmIDB4ODApKSB7
CisJCWNwdV9yZWxheCgpOworCQljb3VudCsrOworCQlpZiAoY291bnQgPj0gMTAwMCkgeworCQkJ
RFJNX0VSUk9SKCJsb29uZ3Nvbi03QSBQTEwgbG9jayBmYWlsZWRcbiIpOworCQkJYnJlYWs7CisJ
CX0KKwl9CisKKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQpOworCXZh
bCB8PSAoMVVMIDw8IDgpOworCWxzN2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFs
KTsKK30KKworc3RhdGljIHZvaWQgbG9vbmdzb25fY3J0Y19tb2RlX3NldF9ub2ZiKHN0cnVjdCBk
cm1fY3J0YyAqY3J0YykKK3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gY3J0Yy0+ZGV2Owor
CXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYgPSBkZXYtPmRldl9wcml2YXRlOworCXN0cnVj
dCBsb29uZ3Nvbl9jcnRjICpsY3J0YyA9IHRvX2xvb25nc29uX2NydGMoY3J0Yyk7CisJc3RydWN0
IGRybV9kaXNwbGF5X21vZGUgKm1vZGUgPSAmY3J0Yy0+c3RhdGUtPmFkanVzdGVkX21vZGU7CisJ
Y29uc3Qgc3RydWN0IGRybV9mb3JtYXRfaW5mbyAqZm9ybWF0OworCXN0cnVjdCBwaXhfcGxsIHBs
bF9jZmc7CisJdTMyIGhyLCBoc3MsIGhzZSwgaGZsOworCXUzMiB2ciwgdnNzLCB2c2UsIHZmbDsK
Kwl1MzIgcGl4X2ZyZXE7CisJdTMyIHJlZ19vZmZzZXQ7CisKKwlociA9IG1vZGUtPmhkaXNwbGF5
OworCWhzcyA9IG1vZGUtPmhzeW5jX3N0YXJ0OworCWhzZSA9IG1vZGUtPmhzeW5jX2VuZDsKKwlo
ZmwgPSBtb2RlLT5odG90YWw7CisKKwl2ciA9IG1vZGUtPnZkaXNwbGF5OworCXZzcyA9IG1vZGUt
PnZzeW5jX3N0YXJ0OworCXZzZSA9IG1vZGUtPnZzeW5jX2VuZDsKKwl2ZmwgPSBtb2RlLT52dG90
YWw7CisKKwlwaXhfZnJlcSA9IG1vZGUtPmNsb2NrOworCXJlZ19vZmZzZXQgPSBsY3J0Yy0+cmVn
X29mZnNldDsKKwlmb3JtYXQgPSBjcnRjLT5wcmltYXJ5LT5zdGF0ZS0+ZmItPmZvcm1hdDsKKwor
CWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9ESVRDRkdfUkVHICsgcmVnX29mZnNldCwgMCk7CisJbHM3
YV9tbV93cmVnKGxkZXYsIEZCX0RJVFRBQl9MT19SRUcgKyByZWdfb2Zmc2V0LCAwKTsKKwlsczdh
X21tX3dyZWcobGRldiwgRkJfRElUVEFCX0hJX1JFRyArIHJlZ19vZmZzZXQsIDApOworCWxzN2Ff
bW1fd3JlZyhsZGV2LCBGQl9QQU5DRkdfUkVHICsgcmVnX29mZnNldCwgRkJfUEFOQ0ZHX0RFRik7
CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX1BBTlRJTV9SRUcgKyByZWdfb2Zmc2V0LCAwKTsKKwor
CWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9IRElTUExBWV9SRUcgKyByZWdfb2Zmc2V0LCAoaGZsIDw8
IDE2KSB8IGhyKTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfSFNZTkNfUkVHICsgcmVnX29mZnNl
dCwKKwkJICAgICBGQl9IU1lOQ19QVUxTRSB8IChoc2UgPDwgMTYpIHwgaHNzKTsKKworCWxzN2Ff
bW1fd3JlZyhsZGV2LCBGQl9WRElTUExBWV9SRUcgKyByZWdfb2Zmc2V0LCAodmZsIDw8IDE2KSB8
IHZyKTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfVlNZTkNfUkVHICsgcmVnX29mZnNldCwKKwkJ
ICAgICBGQl9WU1lOQ19QVUxTRSB8ICh2c2UgPDwgMTYpIHwgdnNzKTsKKworCXN3aXRjaCAoZm9y
bWF0LT5mb3JtYXQpIHsKKwljYXNlIERSTV9GT1JNQVRfUkdCNTY1OgorCQlsY3J0Yy0+Y2ZnX3Jl
ZyB8PSAweDM7CisJCWJyZWFrOworCWNhc2UgRFJNX0ZPUk1BVF9SR0I4ODg6CisJY2FzZSBEUk1f
Rk9STUFUX1hSR0I4ODg4OgorCWNhc2UgRFJNX0ZPUk1BVF9BUkdCODg4ODoKKwlkZWZhdWx0Ogor
CQlsY3J0Yy0+Y2ZnX3JlZyB8PSAweDQ7CisJCWJyZWFrOworCX0KKwlsczdhX21tX3dyZWcobGRl
diwgRkJfQ0ZHX1JFRyArIHJlZ19vZmZzZXQsIGxjcnRjLT5jZmdfcmVnKTsKKworCWNhbF9mcmVx
KHBpeF9mcmVxLCAmcGxsX2NmZyk7CisJY29uZmlnX3BsbChsZGV2LCBMUzdBX1BJWF9QTEwgKyBy
ZWdfb2Zmc2V0LCAmcGxsX2NmZyk7Cit9CisKK3N0YXRpYyB2b2lkIGxvb25nc29uX2NydGNfYXRv
bWljX2VuYWJsZShzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCisJCQkJCXN0cnVjdCBkcm1fYXRvbWlj
X3N0YXRlICpvbGRfc3RhdGUpCit7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtPmRl
djsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwlz
dHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGMgPSB0b19sb29uZ3Nvbl9jcnRjKGNydGMpOworCXUz
MiByZWdfb2Zmc2V0ID0gbGNydGMtPnJlZ19vZmZzZXQ7CisKKwlsY3J0Yy0+Y2ZnX3JlZyB8PSBD
RkdfRU5BQkxFOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdfUkVHICsgcmVnX29mZnNldCwg
bGNydGMtPmNmZ19yZWcpOworfQorCitzdGF0aWMgdm9pZCBsb29uZ3Nvbl9jcnRjX2F0b21pY19k
aXNhYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKKwkJCQkJIHN0cnVjdCBkcm1fYXRvbWljX3N0
YXRlICpvbGRfc3RhdGUpCit7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtPmRldjsK
KwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwlzdHJ1
Y3QgbG9vbmdzb25fY3J0YyAqbGNydGMgPSB0b19sb29uZ3Nvbl9jcnRjKGNydGMpOworCXUzMiBy
ZWdfb2Zmc2V0ID0gbGNydGMtPnJlZ19vZmZzZXQ7CisKKwlsY3J0Yy0+Y2ZnX3JlZyAmPSB+Q0ZH
X0VOQUJMRTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfQ0ZHX1JFRyArIHJlZ19vZmZzZXQsIGxj
cnRjLT5jZmdfcmVnKTsKK30KKworc3RhdGljIGVudW0gZHJtX21vZGVfc3RhdHVzIGxvb25nc29u
X21vZGVfdmFsaWQoc3RydWN0IGRybV9jcnRjICpjcnRjLAorCQkJCQkJY29uc3Qgc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKm1vZGUpCit7CisJaWYgKG1vZGUtPmhkaXNwbGF5ID4gMTkyMCkKKwkJ
cmV0dXJuIE1PREVfQkFEOworCWlmIChtb2RlLT52ZGlzcGxheSA+IDEwODApCisJCXJldHVybiBN
T0RFX0JBRDsKKwlpZiAobW9kZS0+aGRpc3BsYXkgJSA2NCkKKwkJcmV0dXJuIE1PREVfQkFEOwor
CWlmIChtb2RlLT5jbG9jayA+PSAxNzMwMDApCisJCXJldHVybiBNT0RFX0NMT0NLX0hJR0g7CisK
KwlyZXR1cm4gTU9ERV9PSzsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY3J0Y19oZWxw
ZXJfZnVuY3MgbG9vbmdzb25fY3J0Y19oZWxwZXJfZnVuY3MgPSB7CisJLm1vZGVfdmFsaWQgPSBs
b29uZ3Nvbl9tb2RlX3ZhbGlkLAorCS5hdG9taWNfZW5hYmxlID0gbG9vbmdzb25fY3J0Y19hdG9t
aWNfZW5hYmxlLAorCS5hdG9taWNfZGlzYWJsZSA9IGxvb25nc29uX2NydGNfYXRvbWljX2Rpc2Fi
bGUsCisJLm1vZGVfc2V0X25vZmIgPSBsb29uZ3Nvbl9jcnRjX21vZGVfc2V0X25vZmIsCit9Owor
CitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jcnRjX2Z1bmNzIGxvb25nc29uX2NydGNfZnVuY3Mg
PSB7CisJLnNldF9jb25maWcgPSBkcm1fYXRvbWljX2hlbHBlcl9zZXRfY29uZmlnLAorCS5wYWdl
X2ZsaXAgPSBkcm1fYXRvbWljX2hlbHBlcl9wYWdlX2ZsaXAsCisJLnJlc2V0ID0gZHJtX2F0b21p
Y19oZWxwZXJfY3J0Y19yZXNldCwKKwkuZGVzdHJveSA9IGRybV9jcnRjX2NsZWFudXAsCisJLmF0
b21pY19kdXBsaWNhdGVfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jcnRjX2R1cGxpY2F0ZV9z
dGF0ZSwKKwkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jcnRjX2Rl
c3Ryb3lfc3RhdGUsCit9OworCitpbnQgbG9vbmdzb25fY3J0Y19pbml0KHN0cnVjdCBsb29uZ3Nv
bl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCkKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNy
dGM7CisJdTMyIHJldDsKKworCWxjcnRjID0ga3phbGxvYyhzaXplb2Yoc3RydWN0IGxvb25nc29u
X2NydGMpLCBHRlBfS0VSTkVMKTsKKwlpZiAobGNydGMgPT0gTlVMTCkKKwkJcmV0dXJuIC0xOwor
CisJbGNydGMtPmxkZXYgPSBsZGV2OworCWxjcnRjLT5yZWdfb2Zmc2V0ID0gaW5kZXggKiBSRUdf
T0ZGU0VUOworCWxjcnRjLT5jZmdfcmVnID0gQ0ZHX1JFU0VUOworCWxjcnRjLT5jcnRjX2lkID0g
aW5kZXg7CisKKwlyZXQgPSBsb29uZ3Nvbl9wbGFuZV9pbml0KGxjcnRjKTsKKwlpZiAocmV0KQor
CQlyZXR1cm4gcmV0OworCisJcmV0ID0gZHJtX2NydGNfaW5pdF93aXRoX3BsYW5lcyhsZGV2LT5k
ZXYsICZsY3J0Yy0+YmFzZSwgbGNydGMtPnBsYW5lLAorCQkJCQlOVUxMLCAmbG9vbmdzb25fY3J0
Y19mdW5jcywgTlVMTCk7CisJaWYgKHJldCkgeworCQlEUk1fRVJST1IoImZhaWxlZCB0byBpbml0
IGNydGMgJWRcbiIsIGluZGV4KTsKKwkJZHJtX3BsYW5lX2NsZWFudXAobGNydGMtPnBsYW5lKTsK
KwkJcmV0dXJuIHJldDsKKwl9CisKKwlkcm1fY3J0Y19oZWxwZXJfYWRkKCZsY3J0Yy0+YmFzZSwg
Jmxvb25nc29uX2NydGNfaGVscGVyX2Z1bmNzKTsKKworCWxkZXYtPm1vZGVfaW5mb1tpbmRleF0u
Y3J0YyA9IGxjcnRjOworCisJcmV0dXJuIDA7Cit9CisKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nv
bi9sb29uZ3Nvbl9kZXZpY2UuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAw
MDAuLmU1M2JkOGRlZDg5YgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29u
Z3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYwpAQCAtMCwwICsxLDQ3IEBACisvLyBTUERYLUxpY2Vuc2Ut
SWRlbnRpZmllcjogR1BMLTIuMC1vci1sYXRlcgorCisjaW5jbHVkZSAibG9vbmdzb25fZHJ2Lmgi
CisKK3UzMiBsb29uZ3Nvbl9ncHVfb2Zmc2V0KHN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKnN0YXRl
KQoreworCXN0cnVjdCBkcm1fZ2VtX3ZyYW1fb2JqZWN0ICpnYm87CisJc3RydWN0IGxvb25nc29u
X2NydGMgKmxjcnRjOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJdTMyIGdwdV9h
ZGRyOworCisJbGNydGMgPSB0b19sb29uZ3Nvbl9jcnRjKHN0YXRlLT5jcnRjKTsKKwlsZGV2ID0g
bGNydGMtPmxkZXY7CisKKwlnYm8gPSBkcm1fZ2VtX3ZyYW1fb2ZfZ2VtKHN0YXRlLT5mYi0+b2Jq
WzBdKTsKKwlncHVfYWRkciA9IGxkZXYtPnZyYW1fc3RhcnQgKyBkcm1fZ2VtX3ZyYW1fb2Zmc2V0
KGdibyk7CisKKwlyZXR1cm4gZ3B1X2FkZHI7Cit9CisKK3UzMiBsczdhX2lvX3JyZWcoc3RydWN0
IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCkKK3sKKwl1MzIgdmFsOworCisJdmFs
ID0gcmVhZGwobGRldi0+aW8gKyBvZmZzZXQpOworCisJcmV0dXJuIHZhbDsKK30KKwordm9pZCBs
czdhX2lvX3dyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCwgdTMy
IHZhbCkKK3sKKwl3cml0ZWwodmFsLCBsZGV2LT5pbyArIG9mZnNldCk7Cit9CisKK3UzMiBsczdh
X21tX3JyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCkKK3sKKwl1
MzIgdmFsOworCisJdmFsID0gcmVhZGwobGRldi0+bW1pbyArIG9mZnNldCk7CisKKwlyZXR1cm4g
dmFsOworfQorCit2b2lkIGxzN2FfbW1fd3JlZyhzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2
LCB1MzIgb2Zmc2V0LCB1MzIgdmFsKQoreworCXdyaXRlbCh2YWwsIGxkZXYtPm1taW8gKyBvZmZz
ZXQpOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Ry
di5jIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5jCm5ldyBmaWxlIG1v
ZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uZTQwNTE5OWEzZGY2Ci0tLSAvZGV2L251bGwK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5jCkBAIC0wLDAgKzEs
MjcwIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1sYXRlcgorLyoK
KyAqIExvb25nc29uIExTN0ExMDAwIGJyaWRnZSBjaGlwc2V0IGRybSBkcml2ZXIKKyAqLworCisj
aW5jbHVkZSA8bGludXgvY29uc29sZS5oPgorI2luY2x1ZGUgPGxpbnV4L3BjaS5oPgorI2luY2x1
ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5oPgorI2luY2x1ZGUg
Imxvb25nc29uX2Rydi5oIgorCisvKiBJbnRlcmZhY2UgaGlzdG9yeToKKyAqIDAuMSAtIG9yaWdp
bmFsLgorICovCisjZGVmaW5lIERSSVZFUl9NQUpPUiAwCisjZGVmaW5lIERSSVZFUl9NSU5PUiAx
CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX21vZGVfY29uZmlnX2Z1bmNzIGxvb25nc29uX21v
ZGVfZnVuY3MgPSB7CisJLmZiX2NyZWF0ZSA9IGRybV9nZW1fZmJfY3JlYXRlLAorCS5hdG9taWNf
Y2hlY2sgPSBkcm1fYXRvbWljX2hlbHBlcl9jaGVjaywKKwkuYXRvbWljX2NvbW1pdCA9IGRybV9h
dG9taWNfaGVscGVyX2NvbW1pdCwKKwkub3V0cHV0X3BvbGxfY2hhbmdlZCA9IGRybV9mYl9oZWxw
ZXJfb3V0cHV0X3BvbGxfY2hhbmdlZCwKKwkubW9kZV92YWxpZCA9IGRybV92cmFtX2hlbHBlcl9t
b2RlX3ZhbGlkCit9OworCitzdGF0aWMgaW50IGxvb25nc29uX2RldmljZV9pbml0KHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsIHVpbnQzMl90IGZsYWdzKQoreworCXN0cnVjdCBsb29uZ3Nvbl9kZXZp
Y2UgKmxkZXYgPSBkZXYtPmRldl9wcml2YXRlOworCXN0cnVjdCBwY2lfZGV2ICpncHVfcGRldjsK
KwlyZXNvdXJjZV9zaXplX3QgYXBlcl9iYXNlOworCXJlc291cmNlX3NpemVfdCBhcGVyX3NpemU7
CisJcmVzb3VyY2Vfc2l6ZV90IG1taW9fYmFzZTsKKwlyZXNvdXJjZV9zaXplX3QgbW1pb19zaXpl
OworCisJLyogR1BVIE1FTSAqLworCS8qIFdlIG5lZWQgZ2V0IDdBLWdwdSBwY2kgZGV2aWNlIGlu
Zm9ybWF0aW9uIGZvciBsZGV2LT5ncHVfcGRldiAqLworCS8qIGRldi0+cGRldiBzYXZlIDdBLWRj
IHBjaSBkZXZpY2UgaW5mb3JtYXRpb24gKi8KKwlncHVfcGRldiA9IHBjaV9nZXRfZGV2aWNlKFBD
SV9WRU5ET1JfSURfTE9PTkdTT04sCisJCQkJICBQQ0lfREVWSUNFX0lEX0xPT05HU09OX0dQVSwg
TlVMTCk7CisJaWYgKElTX0VSUihncHVfcGRldikpCisJCXJldHVybiBQVFJfRVJSKGdwdV9wZGV2
KTsKKworCWxkZXYtPmdwdV9wZGV2ID0gZ3B1X3BkZXY7CisJYXBlcl9iYXNlID0gcGNpX3Jlc291
cmNlX3N0YXJ0KGdwdV9wZGV2LCAyKTsKKwlhcGVyX3NpemUgPSBwY2lfcmVzb3VyY2VfbGVuKGdw
dV9wZGV2LCAyKTsKKwlsZGV2LT52cmFtX3N0YXJ0ID0gKHUzMilhcGVyX2Jhc2U7CisJbGRldi0+
dnJhbV9zaXplID0gKHUzMilhcGVyX3NpemU7CisKKwlpZiAoIWRldm1fcmVxdWVzdF9tZW1fcmVn
aW9uKGxkZXYtPmRldi0+ZGV2LCBsZGV2LT52cmFtX3N0YXJ0LAorCQkJCSAgICAgbGRldi0+dnJh
bV9zaXplLCAibG9vbmdzb25fdnJhbSIpKSB7CisJCURSTV9FUlJPUigiQ2FuJ3QgcmVzZXJ2ZSBW
UkFNXG4iKTsKKwkJcmV0dXJuIC1FTlhJTzsKKwl9CisKKwkvKiBEQyBNRU0gKi8KKwltbWlvX2Jh
c2UgPSBwY2lfcmVzb3VyY2Vfc3RhcnQobGRldi0+ZGV2LT5wZGV2LCAwKTsKKwltbWlvX3NpemUg
PSBwY2lfcmVzb3VyY2VfbGVuKGxkZXYtPmRldi0+cGRldiwgMCk7CisJbGRldi0+bW1pbyA9IGRl
dm1faW9yZW1hcChkZXYtPmRldiwgbW1pb19iYXNlLCBtbWlvX3NpemUpOworCWlmICghbGRldi0+
bW1pbykgeworCQlkcm1fZXJyKGRldiwgIkNhbm5vdCBtYXAgbW1pbyByZWdpb25cbiIpOworCQly
ZXR1cm4gLUVOT01FTTsKKwl9CisKKwlpZiAoIWRldm1fcmVxdWVzdF9tZW1fcmVnaW9uKGxkZXYt
PmRldi0+ZGV2LCBtbWlvX2Jhc2UsCisJCQkJICAgICBtbWlvX3NpemUsICJsb29uZ3Nvbl9tbWlv
IikpIHsKKwkJRFJNX0VSUk9SKCJDYW4ndCByZXNlcnZlIG1taW8gcmVnaXN0ZXJzXG4iKTsKKwkJ
cmV0dXJuIC1FTk9NRU07CisJfQorCisJLyogREMgSU8gKi8KKwlsZGV2LT5pbyA9IGlvcmVtYXAo
TFM3QV9DSElQQ0ZHX1JFR19CQVNFLCAweGYpOworCWlmIChsZGV2LT5pbyA9PSBOVUxMKQorCQly
ZXR1cm4gLUVOT01FTTsKKworCURSTV9JTkZPKCJEQyBtbWlvIGJhc2UgMHglbGx4IHNpemUgMHgl
bGx4IGlvIDB4JWxseFxuIiwKKwkJIG1taW9fYmFzZSwgbW1pb19zaXplLCAqKHU2NCAqKWxkZXYt
PmlvKTsKKwlEUk1fSU5GTygiR1BVIHZyYW0gc3RhcnQgPSAweCV4IHNpemUgPSAweCV4XG4iLAor
CQkgbGRldi0+dnJhbV9zdGFydCwgbGRldi0+dnJhbV9zaXplKTsKKworCXJldHVybiAwOworfQor
CitpbnQgbG9vbmdzb25fbW9kZXNldF9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYp
Cit7CisJc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyOworCXN0cnVjdCBkcm1fY29ubmVjdG9y
ICpjb25uZWN0b3I7CisJaW50IGk7CisJdTMyIHJldDsKKworCWxkZXYtPmRldi0+bW9kZV9jb25m
aWcuYWxsb3dfZmJfbW9kaWZpZXJzID0gdHJ1ZTsKKworCWZvciAoaSA9IDA7IGkgPCAyOyBpKysp
IHsKKwkJcmV0ID0gbG9vbmdzb25fY3J0Y19pbml0KGxkZXYsIGkpOworCQlpZiAocmV0KSB7CisJ
CQlEUk1fV0FSTigibG9vbmdzb24gY3J0YyVkIGluaXQgZmFpbGVkXG4iLCBpKTsKKwkJCWNvbnRp
bnVlOworCQl9CisKKwkJcmV0ID0gbG9vbmdzb25fZW5jb2Rlcl9pbml0KGxkZXYsIGkpOworCQlp
ZiAocmV0KSB7CisJCQlEUk1fRVJST1IoImxvb25nc29uX2VuY29kZXJfaW5pdCBmYWlsZWRcbiIp
OworCQkJcmV0dXJuIC0xOworCQl9CisKKwkJcmV0ID0gbG9vbmdzb25fY29ubmVjdG9yX2luaXQo
bGRldiwgaSk7CisJCWlmIChyZXQpIHsKKwkJCURSTV9FUlJPUigibG9vbmdzb25fY29ubmVjdG9y
X2luaXQgZmFpbGVkXG4iKTsKKwkJCXJldHVybiAtMTsKKwkJfQorCisJCWVuY29kZXIgPSAmbGRl
di0+bW9kZV9pbmZvW2ldLmVuY29kZXItPmJhc2U7CisJCWNvbm5lY3RvciA9ICZsZGV2LT5tb2Rl
X2luZm9baV0uY29ubmVjdG9yLT5iYXNlOworCQlkcm1fY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVy
KGNvbm5lY3RvciwgZW5jb2Rlcik7CisJCWxkZXYtPm51bV9jcnRjKys7CisJfQorCisJcmV0dXJu
IDA7Cit9CisKK3N0YXRpYyBpbnQgbG9vbmdzb25fZHJtX2xvYWQoc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwgdW5zaWduZWQgbG9uZyBmbGFncykKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICps
ZGV2OworCWludCByZXQ7CisKKwlsZGV2ID0gZGV2bV9remFsbG9jKGRldi0+ZGV2LCBzaXplb2Yo
KmxkZXYpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIWxkZXYpCisJCXJldHVybiAtRU5PTUVNOworCisJ
ZGV2LT5kZXZfcHJpdmF0ZSA9IGxkZXY7CisJbGRldi0+ZGV2ID0gZGV2OworCisJcmV0ID0gbG9v
bmdzb25fZGV2aWNlX2luaXQoZGV2LCBmbGFncyk7CisJaWYgKHJldCkKKwkJZ290byBlcnI7CisK
KwlyZXQgPSBkcm1tX3ZyYW1faGVscGVyX2luaXQoZGV2LCBsZGV2LT52cmFtX3N0YXJ0LCBsZGV2
LT52cmFtX3NpemUpOworCWlmIChyZXQpCisJCWdvdG8gZXJyOworCisJZHJtX21vZGVfY29uZmln
X2luaXQoZGV2KTsKKwlkZXYtPm1vZGVfY29uZmlnLmZ1bmNzID0gKHZvaWQgKikmbG9vbmdzb25f
bW9kZV9mdW5jczsKKwlkZXYtPm1vZGVfY29uZmlnLm1pbl93aWR0aCA9IDE7CisJZGV2LT5tb2Rl
X2NvbmZpZy5taW5faGVpZ2h0ID0gMTsKKwlkZXYtPm1vZGVfY29uZmlnLm1heF93aWR0aCA9IDQw
OTY7CisJZGV2LT5tb2RlX2NvbmZpZy5tYXhfaGVpZ2h0ID0gNDA5NjsKKwlkZXYtPm1vZGVfY29u
ZmlnLnByZWZlcnJlZF9kZXB0aCA9IDMyOworCWRldi0+bW9kZV9jb25maWcucHJlZmVyX3NoYWRv
dyA9IDE7CisJZGV2LT5tb2RlX2NvbmZpZy5mYl9iYXNlID0gbGRldi0+dnJhbV9zdGFydDsKKwor
CXBjaV9zZXRfZHJ2ZGF0YShkZXYtPnBkZXYsIGRldik7CisKKwlyZXQgPSBsb29uZ3Nvbl9tb2Rl
c2V0X2luaXQobGRldik7CisJaWYgKHJldCkKKwkJZGV2X2VycihkZXYtPmRldiwgIkZhdGFsIGVy
cm9yIGR1cmluZyBtb2Rlc2V0IGluaXQ6ICVkXG4iLCByZXQpOworCisJZHJtX2ttc19oZWxwZXJf
cG9sbF9pbml0KGRldik7CisJZHJtX21vZGVfY29uZmlnX3Jlc2V0KGRldik7CisKKwlyZXR1cm4g
MDsKKworZXJyOgorCWRybV9lcnIoZGV2LCAiZmFpbGVkIHRvIGluaXRpYWxpemUgZHJtIGRyaXZl
cjogJWRcbiIsIHJldCk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZvaWQgbG9vbmdzb25f
ZHJtX3VubG9hZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQoreworCWRybV92cmFtX2hlbHBlcl9y
ZWxlYXNlX21tKGRldik7CisJZHJtX21vZGVfY29uZmlnX2NsZWFudXAoZGV2KTsKKwlkZXYtPmRl
dl9wcml2YXRlID0gTlVMTDsKKwlkZXZfc2V0X2RydmRhdGEoZGV2LT5kZXYsIE5VTEwpOworfQor
CitERUZJTkVfRFJNX0dFTV9GT1BTKGZvcHMpOworCitzdGF0aWMgc3RydWN0IGRybV9kcml2ZXIg
bG9vbmdzb25fZHJtX2RyaXZlciA9IHsKKwkuZHJpdmVyX2ZlYXR1cmVzID0gRFJJVkVSX01PREVT
RVQgfCBEUklWRVJfR0VNIHwgRFJJVkVSX0FUT01JQywKKwkuZm9wcyA9ICZmb3BzLAorCURSTV9H
RU1fVlJBTV9EUklWRVIsCisKKwkubmFtZSA9IERSSVZFUl9OQU1FLAorCS5kZXNjID0gRFJJVkVS
X0RFU0MsCisJLmRhdGUgPSBEUklWRVJfREFURSwKKwkubWFqb3IgPSBEUklWRVJfTUFKT1IsCisJ
Lm1pbm9yID0gRFJJVkVSX01JTk9SLAorfTsKKworc3RhdGljIGludCBsb29uZ3Nvbl9wY2lfcHJv
YmUoc3RydWN0IHBjaV9kZXYgKnBkZXYsCisJCQkgICAgICBjb25zdCBzdHJ1Y3QgcGNpX2Rldmlj
ZV9pZCAqZW50KQoreworCWludCByZXQ7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldjsKKworCURS
TV9JTkZPKCJTdGFydCBsb29uZ3NvbiBkcm0gcHJvYmVcbiIpOworCWRldiA9IGRybV9kZXZfYWxs
b2MoJmxvb25nc29uX2RybV9kcml2ZXIsICZwZGV2LT5kZXYpOworCWlmIChJU19FUlIoZGV2KSkg
eworCQlEUk1fRVJST1IoImZhaWxlZCB0byBhbGxvY2F0ZSBkcm1fZGV2aWNlXG4iKTsKKwkJcmV0
dXJuIFBUUl9FUlIoZGV2KTsKKwl9CisKKwlkZXYtPnBkZXYgPSBwZGV2OworCXBjaV9zZXRfZHJ2
ZGF0YShwZGV2LCBkZXYpOworCisJcmV0ID0gcGNpX2VuYWJsZV9kZXZpY2UocGRldik7CisJaWYg
KHJldCkgeworCQlkcm1fZXJyKGRldiwgImZhaWxlZCB0byBlbmFibGUgcGNpIGRldmljZTogJWRc
biIsIHJldCk7CisJCWdvdG8gZXJyX2ZyZWU7CisJfQorCisJcmV0ID0gbG9vbmdzb25fZHJtX2xv
YWQoZGV2LCAweDApOworCWlmIChyZXQpIHsKKwkJZHJtX2VycihkZXYsICJmYWlsZWQgdG8gbG9h
ZCBsb29uZ3NvbjogJWRcbiIsIHJldCk7CisJCWdvdG8gZXJyX3BkZXY7CisJfQorCisJcmV0ID0g
ZHJtX2Rldl9yZWdpc3RlcihkZXYsIDApOworCWlmIChyZXQpIHsKKwkJZHJtX2VycihkZXYsICJm
YWlsZWQgdG8gcmVnaXN0ZXIgZHJ2IGZvciB1c2Vyc3BhY2UgYWNjZXNzOiAlZFxuIiwKKwkJCXJl
dCk7CisJCWdvdG8gZXJyX3BkZXY7CisJfQorCisJZHJtX2ZiZGV2X2dlbmVyaWNfc2V0dXAoZGV2
LCBkZXYtPm1vZGVfY29uZmlnLnByZWZlcnJlZF9kZXB0aCk7CisKKwlyZXR1cm4gMDsKKworZXJy
X3BkZXY6CisJcGNpX2Rpc2FibGVfZGV2aWNlKHBkZXYpOworZXJyX2ZyZWU6CisJZHJtX2Rldl9w
dXQoZGV2KTsKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgdm9pZCBsb29uZ3Nvbl9wY2lfcmVt
b3ZlKHN0cnVjdCBwY2lfZGV2ICpwZGV2KQoreworCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBw
Y2lfZ2V0X2RydmRhdGEocGRldik7CisKKwlkcm1fZGV2X3VucmVnaXN0ZXIoZGV2KTsKKwlsb29u
Z3Nvbl9kcm1fdW5sb2FkKGRldik7CisJZHJtX2Rldl9wdXQoZGV2KTsKK30KKworc3RhdGljIHN0
cnVjdCBwY2lfZGV2aWNlX2lkIGxvb25nc29uX3BjaV9kZXZpY2VzW10gPSB7CisJeyBQQ0lfREVW
SUNFKFBDSV9WRU5ET1JfSURfTE9PTkdTT04sIFBDSV9ERVZJQ0VfSURfTE9PTkdTT05fREMpIH0s
CisJezAsfQorfTsKKworc3RhdGljIHN0cnVjdCBwY2lfZHJpdmVyIGxvb25nc29uX2RybV9wY2lf
ZHJpdmVyID0geworCS5uYW1lID0gRFJJVkVSX05BTUUsCisJLmlkX3RhYmxlID0gbG9vbmdzb25f
cGNpX2RldmljZXMsCisJLnByb2JlID0gbG9vbmdzb25fcGNpX3Byb2JlLAorCS5yZW1vdmUgPSBs
b29uZ3Nvbl9wY2lfcmVtb3ZlLAorfTsKKworc3RhdGljIGludCBfX2luaXQgbG9vbmdzb25fZHJt
X2luaXQodm9pZCkKK3sKKwlyZXR1cm4gcGNpX3JlZ2lzdGVyX2RyaXZlcigmbG9vbmdzb25fZHJt
X3BjaV9kcml2ZXIpOworfQorCitzdGF0aWMgdm9pZCBfX2V4aXQgbG9vbmdzb25fZHJtX2V4aXQo
dm9pZCkKK3sKKwlwY2lfdW5yZWdpc3Rlcl9kcml2ZXIoJmxvb25nc29uX2RybV9wY2lfZHJpdmVy
KTsKK30KKworbW9kdWxlX2luaXQobG9vbmdzb25fZHJtX2luaXQpOworbW9kdWxlX2V4aXQobG9v
bmdzb25fZHJtX2V4aXQpOworCitNT0RVTEVfQVVUSE9SKERSSVZFUl9BVVRIT1IpOworTU9EVUxF
X0RFU0NSSVBUSU9OKERSSVZFUl9ERVNDKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaCBiL2RyaXZl
cnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaApuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwMDAwMDAuLjQ5OGQxYjA4MmExOQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaApAQCAtMCwwICsxLDEzOSBAQAorLyog
U1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb25seSAqLworCisjaWZuZGVmIF9fTE9P
TkdTT05fRFJWX0hfXworI2RlZmluZSBfX0xPT05HU09OX0RSVl9IX18KKworI2luY2x1ZGUgPGRy
bS9kcm1fZHJ2Lmg+CisjaW5jbHVkZSA8ZHJtL2RybV9nZW0uaD4KKyNpbmNsdWRlIDxkcm0vZHJt
X2ZiX2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fZm91cmNjLmg+CisjaW5jbHVkZSA8ZHJt
L2RybV9wcm9iZV9oZWxwZXIuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2F0b21pYy5oPgorI2luY2x1
ZGUgPGRybS9kcm1fYXRvbWljX2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fZ2VtX2ZyYW1l
YnVmZmVyX2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmg+Cisj
aW5jbHVkZSA8ZHJtL2RybV9wbGFuZS5oPgorI2luY2x1ZGUgPGRybS9kcm1fcGxhbmVfaGVscGVy
Lmg+CisjaW5jbHVkZSA8ZHJtL2RybV9jcnRjLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9jcnRjX2hl
bHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fY29ubmVjdG9yLmg+CisjaW5jbHVkZSA8ZHJtL2Ry
bV9lbmNvZGVyLmg+CisKKy8qIEdlbmVyYWwgY3VzdG9taXphdGlvbjoKKyAqLworI2RlZmluZSBE
UklWRVJfQVVUSE9SICJMb29uZ3NvbiBncmFwaGljcyBkcml2ZXIgdGVhbSIKKyNkZWZpbmUgRFJJ
VkVSX05BTUUgImxvb25nc29uLWRybSIKKyNkZWZpbmUgRFJJVkVSX0RFU0MgIkxvb25nc29uIExT
N0EgRFJNIGRyaXZlciIKKyNkZWZpbmUgRFJJVkVSX0RBVEUgIjIwMjAwOTE1IgorCisjZGVmaW5l
IHRvX2xvb25nc29uX2NydGMoeCkgY29udGFpbmVyX29mKHgsIHN0cnVjdCBsb29uZ3Nvbl9jcnRj
LCBiYXNlKQorI2RlZmluZSB0b19sb29uZ3Nvbl9lbmNvZGVyKHgpIGNvbnRhaW5lcl9vZih4LCBz
dHJ1Y3QgbG9vbmdzb25fZW5jb2RlciwgYmFzZSkKKworI2RlZmluZSBMUzdBX0NISVBDRkdfUkVH
X0JBU0UgKDB4MTAwMTAwMDApCisjZGVmaW5lIFBDSV9ERVZJQ0VfSURfTE9PTkdTT05fREMgMHg3
YTA2CisjZGVmaW5lIFBDSV9ERVZJQ0VfSURfTE9PTkdTT05fR1BVIDB4N2ExNQorI2RlZmluZSBM
UzdBX1BJWF9QTEwgKDB4MDRiMCkKKyNkZWZpbmUgUkVHX09GRlNFVCAoMHgxMCkKKyNkZWZpbmUg
RkJfQ0ZHX1JFRyAoMHgxMjQwKQorI2RlZmluZSBGQl9BRERSMF9SRUcgKDB4MTI2MCkKKyNkZWZp
bmUgRkJfQUREUjFfUkVHICgweDE1ODApCisjZGVmaW5lIEZCX1NUUklfUkVHICgweDEyODApCisj
ZGVmaW5lIEZCX0RJVENGR19SRUcgKDB4MTM2MCkKKyNkZWZpbmUgRkJfRElUVEFCX0xPX1JFRyAo
MHgxMzgwKQorI2RlZmluZSBGQl9ESVRUQUJfSElfUkVHICgweDEzYTApCisjZGVmaW5lIEZCX1BB
TkNGR19SRUcgKDB4MTNjMCkKKyNkZWZpbmUgRkJfUEFOVElNX1JFRyAoMHgxM2UwKQorI2RlZmlu
ZSBGQl9IRElTUExBWV9SRUcgKDB4MTQwMCkKKyNkZWZpbmUgRkJfSFNZTkNfUkVHICgweDE0MjAp
CisjZGVmaW5lIEZCX1ZESVNQTEFZX1JFRyAoMHgxNDgwKQorI2RlZmluZSBGQl9WU1lOQ19SRUcg
KDB4MTRhMCkKKworI2RlZmluZSBDRkdfRk1UIEdFTk1BU0soMiwgMCkKKyNkZWZpbmUgQ0ZHX0ZC
U1dJVENIIEJJVCg3KQorI2RlZmluZSBDRkdfRU5BQkxFIEJJVCg4KQorI2RlZmluZSBDRkdfRkJO
VU0gQklUKDExKQorI2RlZmluZSBDRkdfR0FNTUFSIEJJVCgxMikKKyNkZWZpbmUgQ0ZHX1JFU0VU
IEJJVCgyMCkKKworI2RlZmluZSBGQl9QQU5DRkdfREVGIDB4ODAwMDEzMTEKKyNkZWZpbmUgRkJf
SFNZTkNfUFVMU0UgKDEgPDwgMzApCisjZGVmaW5lIEZCX1ZTWU5DX1BVTFNFICgxIDw8IDMwKQor
CisvKiBQSVggUExMICovCisjZGVmaW5lIExPT1BDX01JTiAyNAorI2RlZmluZSBMT09QQ19NQVgg
MTYxCisjZGVmaW5lIEZSRV9SRUZfTUlOIDEyCisjZGVmaW5lIEZSRV9SRUZfTUFYIDMyCisjZGVm
aW5lIERJVl9SRUZfTUlOIDMKKyNkZWZpbmUgRElWX1JFRl9NQVggNQorI2RlZmluZSBQU1RfRElW
X01BWCA2NAorCitzdHJ1Y3QgcGl4X3BsbCB7CisJdTMyIGwyX2RpdjsKKwl1MzIgbDFfbG9vcGM7
CisJdTMyIGwxX2ZyZWZjOworfTsKKworc3RydWN0IGxvb25nc29uX2NydGMgeworCXN0cnVjdCBk
cm1fY3J0YyBiYXNlOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJdTMyIGNydGNf
aWQ7CisJdTMyIHJlZ19vZmZzZXQ7CisJdTMyIGNmZ19yZWc7CisJc3RydWN0IGRybV9wbGFuZSAq
cGxhbmU7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciB7CisJc3RydWN0IGRybV9lbmNv
ZGVyIGJhc2U7CisJc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldjsKKwlzdHJ1Y3QgbG9vbmdz
b25fY3J0YyAqbGNydGM7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fY29ubmVjdG9yIHsKKwlzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciBiYXNlOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJ
dTE2IGlkOworCXUzMiB0eXBlOworfTsKKworc3RydWN0IGxvb25nc29uX21vZGVfaW5mbyB7CisJ
c3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldjsKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqY3J0
YzsKKwlzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciAqZW5jb2RlcjsKKwlzdHJ1Y3QgbG9vbmdzb25f
Y29ubmVjdG9yICpjb25uZWN0b3I7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlIHsKKwlz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2OworCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZTsK
KworCXZvaWQgX19pb21lbSAqbW1pbzsKKwl2b2lkIF9faW9tZW0gKmlvOworCXUzMiB2cmFtX3N0
YXJ0OworCXUzMiB2cmFtX3NpemU7CisKKwl1MzIgbnVtX2NydGM7CisJc3RydWN0IGxvb25nc29u
X21vZGVfaW5mbyBtb2RlX2luZm9bMl07CisJc3RydWN0IHBjaV9kZXYgKmdwdV9wZGV2OyAvKiBM
UzdBIGdwdSBkZXZpY2UgaW5mbyAqLworfTsKKworLyogY3J0YyAqLworaW50IGxvb25nc29uX2Ny
dGNfaW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpOworCisvKiBj
b25uZWN0b3IgKi8KK2ludCBsb29uZ3Nvbl9jb25uZWN0b3JfaW5pdChzdHJ1Y3QgbG9vbmdzb25f
ZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpOworCisvKiBlbmNvZGVyICovCitpbnQgbG9vbmdzb25f
ZW5jb2Rlcl9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCk7CisK
Ky8qIHBsYW5lICovCitpbnQgbG9vbmdzb25fcGxhbmVfaW5pdChzdHJ1Y3QgbG9vbmdzb25fY3J0
YyAqbGNydGMpOworCisvKiBkZXZpY2UgKi8KK3UzMiBsb29uZ3Nvbl9ncHVfb2Zmc2V0KHN0cnVj
dCBkcm1fcGxhbmVfc3RhdGUgKnN0YXRlKTsKK3UzMiBsczdhX21tX3JyZWcoc3RydWN0IGxvb25n
c29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCk7Cit2b2lkIGxzN2FfbW1fd3JlZyhzdHJ1Y3Qg
bG9vbmdzb25fZGV2aWNlICpsZGV2LCB1MzIgb2Zmc2V0LCB1MzIgdmFsKTsKK3UzMiBsczdhX2lv
X3JyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCk7Cit2b2lkIGxz
N2FfaW9fd3JlZyhzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCB1MzIgb2Zmc2V0LCB1MzIg
dmFsKTsKKworI2VuZGlmIC8qIF9fTE9PTkdTT05fRFJWX0hfXyAqLwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2VuY29kZXIuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9sb29uZ3Nvbi9sb29uZ3Nvbl9lbmNvZGVyLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
MDAwMDAwMDAwMDAwLi4yMDAyY2VlMDAzMDMKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZW5jb2Rlci5jCkBAIC0wLDAgKzEsMzcgQEAKKy8vIFNQ
RFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCisKKyNpbmNsdWRlICJsb29u
Z3Nvbl9kcnYuaCIKKworc3RhdGljIHZvaWQgbG9vbmdzb25fZW5jb2Rlcl9kZXN0cm95KHN0cnVj
dCBkcm1fZW5jb2RlciAqZW5jb2RlcikKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciAqbGVu
Y29kZXIgPSB0b19sb29uZ3Nvbl9lbmNvZGVyKGVuY29kZXIpOworCisJZHJtX2VuY29kZXJfY2xl
YW51cChlbmNvZGVyKTsKKwlrZnJlZShsZW5jb2Rlcik7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1
Y3QgZHJtX2VuY29kZXJfZnVuY3MgbG9vbmdzb25fZW5jb2Rlcl9mdW5jcyA9IHsKKwkuZGVzdHJv
eSA9IGxvb25nc29uX2VuY29kZXJfZGVzdHJveSwKK307CisKK2ludCBsb29uZ3Nvbl9lbmNvZGVy
X2luaXQoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgaW50IGluZGV4KQoreworCXN0cnVj
dCBkcm1fZW5jb2RlciAqZW5jb2RlcjsKKwlzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciAqbGVuY29k
ZXI7CisKKwlsZW5jb2RlciA9IGt6YWxsb2Moc2l6ZW9mKHN0cnVjdCBsb29uZ3Nvbl9lbmNvZGVy
KSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFsZW5jb2RlcikKKwkJcmV0dXJuIC0xOworCisJbGVuY29k
ZXItPmxjcnRjID0gbGRldi0+bW9kZV9pbmZvW2luZGV4XS5jcnRjOworCWxlbmNvZGVyLT5sZGV2
ID0gbGRldjsKKwllbmNvZGVyID0gJmxlbmNvZGVyLT5iYXNlOworCWVuY29kZXItPnBvc3NpYmxl
X2NydGNzID0gMSA8PCBpbmRleDsKKworCWRybV9lbmNvZGVyX2luaXQobGRldi0+ZGV2LCBlbmNv
ZGVyLCAmbG9vbmdzb25fZW5jb2Rlcl9mdW5jcywKKwkJCSBEUk1fTU9ERV9FTkNPREVSX0RBQywg
TlVMTCk7CisKKwlsZGV2LT5tb2RlX2luZm9baW5kZXhdLmVuY29kZXIgPSBsZW5jb2RlcjsKKwor
CXJldHVybiAwOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25n
c29uX3BsYW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fcGxhbmUuYwpu
ZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmI4YzI0N2QxY2UwOQotLS0g
L2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9wbGFuZS5j
CkBAIC0wLDAgKzEsMTAyIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1v
ci1sYXRlcgorCisjaW5jbHVkZSAibG9vbmdzb25fZHJ2LmgiCisKK3N0YXRpYyB2b2lkIGxvb25n
c29uX3BsYW5lX2F0b21pY191cGRhdGUoc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCisJCQkJCSBz
dHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCit7CisJc3RydWN0IGxvb25nc29uX2NydGMg
KmxjcnRjOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJc3RydWN0IGRybV9wbGFu
ZV9zdGF0ZSAqbHN0YXRlID0gcGxhbmUtPnN0YXRlOworCXUzMiBncHVfYWRkciA9IDA7CisJdTMy
IGZiX2FkZHIgPSAwOworCXUzMiByZWdfdmFsID0gMDsKKwl1MzIgcmVnX29mZnNldDsKKwl1MzIg
cGl0Y2g7CisJdTggZGVwdGg7CisJdTMyIHgsIHk7CisKKwlpZiAoIWxzdGF0ZS0+Y3J0YyB8fCAh
bHN0YXRlLT5mYikKKwkJcmV0dXJuOworCisJcGl0Y2ggPSBsc3RhdGUtPmZiLT5waXRjaGVzWzBd
OworCWxjcnRjID0gdG9fbG9vbmdzb25fY3J0Yyhsc3RhdGUtPmNydGMpOworCWxkZXYgPSBsY3J0
Yy0+bGRldjsKKwlyZWdfb2Zmc2V0ID0gbGNydGMtPnJlZ19vZmZzZXQ7CisJeCA9IGxzdGF0ZS0+
Y3J0Yy0+eDsKKwl5ID0gbHN0YXRlLT5jcnRjLT55OworCWRlcHRoID0gbHN0YXRlLT5mYi0+Zm9y
bWF0LT5jcHBbMF0gPDwgMzsKKworCWdwdV9hZGRyID0gbG9vbmdzb25fZ3B1X29mZnNldChsc3Rh
dGUpOworCXJlZ192YWwgPSAocGl0Y2ggKyAyNTUpICYgfjI1NTsKKwlsczdhX21tX3dyZWcobGRl
diwgRkJfU1RSSV9SRUcgKyByZWdfb2Zmc2V0LCByZWdfdmFsKTsKKworCXN3aXRjaCAoZGVwdGgp
IHsKKwljYXNlIDEyIC4uLiAxNjoKKwkJZmJfYWRkciA9IGdwdV9hZGRyICsgeSAqIHBpdGNoICsg
QUxJR04oeCwgNjQpICogMjsKKwkJYnJlYWs7CisJY2FzZSAyNCAuLi4gMzI6CisJZGVmYXVsdDoK
KwkJZmJfYWRkciA9IGdwdV9hZGRyICsgeSAqIHBpdGNoICsgQUxJR04oeCwgNjQpICogNDsKKwkJ
YnJlYWs7CisJfQorCisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0FERFIwX1JFRyArIHJlZ19vZmZz
ZXQsIGZiX2FkZHIpOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9BRERSMV9SRUcgKyByZWdfb2Zm
c2V0LCBmYl9hZGRyKTsKKwlyZWdfdmFsID0gbGNydGMtPmNmZ19yZWcgfCBDRkdfRU5BQkxFOwor
CWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdfUkVHICsgcmVnX29mZnNldCwgcmVnX3ZhbCk7Cit9
CisKK3N0YXRpYyBjb25zdCB1aW50MzJfdCBsb29uZ3Nvbl9mb3JtYXRzW10gPSB7CisJRFJNX0ZP
Uk1BVF9SR0I1NjUsCisJRFJNX0ZPUk1BVF9SR0I4ODgsCisJRFJNX0ZPUk1BVF9YUkdCODg4OCwK
KwlEUk1fRk9STUFUX0FSR0I4ODg4LAorfTsKKworc3RhdGljIGNvbnN0IHVpbnQ2NF90IGxvb25n
c29uX2Zvcm1hdF9tb2RpZmllcnNbXSA9IHsgRFJNX0ZPUk1BVF9NT0RfTElORUFSLAorCQkJCQkJ
ICAgICAgRFJNX0ZPUk1BVF9NT0RfSU5WQUxJRCB9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9wbGFuZV9mdW5jcyBsb29uZ3Nvbl9wbGFuZV9mdW5jcyA9IHsKKwkuYXRvbWljX2R1cGxpY2F0
ZV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX3BsYW5lX2R1cGxpY2F0ZV9zdGF0ZSwKKwkuYXRv
bWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9wbGFuZV9kZXN0cm95X3N0YXRl
LAorCS5kZXN0cm95ID0gZHJtX3BsYW5lX2NsZWFudXAsCisJLmRpc2FibGVfcGxhbmUgPSBkcm1f
YXRvbWljX2hlbHBlcl9kaXNhYmxlX3BsYW5lLAorCS5yZXNldCA9IGRybV9hdG9taWNfaGVscGVy
X3BsYW5lX3Jlc2V0LAorCS51cGRhdGVfcGxhbmUgPSBkcm1fYXRvbWljX2hlbHBlcl91cGRhdGVf
cGxhbmUsCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9wbGFuZV9oZWxwZXJfZnVuY3Mg
bG9vbmdzb25fcGxhbmVfaGVscGVyX2Z1bmNzID0geworCS5wcmVwYXJlX2ZiCT0gZHJtX2dlbV92
cmFtX3BsYW5lX2hlbHBlcl9wcmVwYXJlX2ZiLAorCS5jbGVhbnVwX2ZiCT0gZHJtX2dlbV92cmFt
X3BsYW5lX2hlbHBlcl9jbGVhbnVwX2ZiLAorCS5hdG9taWNfdXBkYXRlID0gbG9vbmdzb25fcGxh
bmVfYXRvbWljX3VwZGF0ZSwKK307CisKK2ludCBsb29uZ3Nvbl9wbGFuZV9pbml0KHN0cnVjdCBs
b29uZ3Nvbl9jcnRjICpsY3J0YykKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2Owor
CWludCBjcnRjX2lkOworCWludCByZXQ7CisKKwlsZGV2ID0gbGNydGMtPmxkZXY7CisJY3J0Y19p
ZCA9IGxjcnRjLT5jcnRjX2lkOworCisJbGNydGMtPnBsYW5lID0gZGV2bV9remFsbG9jKGxkZXYt
PmRldi0+ZGV2LCBzaXplb2YoKmxjcnRjLT5wbGFuZSksCisJCQkJICAgIEdGUF9LRVJORUwpOwor
CWlmICghbGNydGMtPnBsYW5lKQorCQlyZXR1cm4gLUVOT01FTTsKKworCXJldCA9IGRybV91bml2
ZXJzYWxfcGxhbmVfaW5pdChsZGV2LT5kZXYsIGxjcnRjLT5wbGFuZSwgQklUKGNydGNfaWQpLAor
CQkJCSAgICAgICAmbG9vbmdzb25fcGxhbmVfZnVuY3MsIGxvb25nc29uX2Zvcm1hdHMsCisJCQkJ
ICAgICAgIEFSUkFZX1NJWkUobG9vbmdzb25fZm9ybWF0cyksCisJCQkJICAgICAgIGxvb25nc29u
X2Zvcm1hdF9tb2RpZmllcnMsCisJCQkJICAgICAgIERSTV9QTEFORV9UWVBFX1BSSU1BUlksIE5V
TEwpOworCWlmIChyZXQpIHsKKwkJRFJNX0VSUk9SKCJmYWlsIHRvIGluaXQgcGxhbmVkIGNydGMg
JWRcbiIsIGNydGNfaWQpOworCQlyZXR1cm4gcmV0OworCX0KKworCWRybV9wbGFuZV9oZWxwZXJf
YWRkKGxjcnRjLT5wbGFuZSwgJmxvb25nc29uX3BsYW5lX2hlbHBlcl9mdW5jcyk7CisKKwlyZXR1
cm4gMDsKK30KLS0gCjIuMzEuMQo=
------=_Part_16666_34794156.1622873967309
Content-Type: text/html; charset=GBK
Content-Transfer-Encoding: base64

PGRpdiBzdHlsZT0ibGluZS1oZWlnaHQ6MS43O2NvbG9yOiMwMDAwMDA7Zm9udC1zaXplOjE0cHg7
Zm9udC1mYW1pbHk6QXJpYWwiPjxwIHN0eWxlPSJtYXJnaW46IDA7Ij48c3BhbiBzdHlsZT0iZm9u
dC1mYW1pbHk6IGFyaWFsOyB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7Ij5Gcm9tOiBDaGVueWFuZyBM
aSAmbHQ7bGljaGVueWFuZ0Bsb29uZ3Nvbi5jbiZndDs8L3NwYW4+PC9wPjxwcmU+VGhpcyBwYXRj
aCBhZGRzIGFuIGluaXRpYWwgRFJNIGRyaXZlciBmb3IgdGhlIExvb25nc29uIExTN0ExMDAwCmJy
aWRnZSBjaGlwKExTN0EpLiBUaGUgTFM3QSBicmlkZ2UgY2hpcCBjb250YWlucyB0d28gZGlzcGxh
eQpjb250cm9sbGVycywgc3VwcG9ydCBkdWFsIGRpc3BsYXkgb3V0cHV0LiBUaGUgbWF4aW11bSBz
dXBwb3J0IGZvcgplYWNoIGNoYW5uZWwgZGlzcGxheSBpcyB0byAxOTIweDEwODBANjBIei4KQXQg
cHJlc2VudCwgREMgZGV2aWNlIGRldGVjdGlvbiBhbmQgRFJNIGRyaXZlciByZWdpc3RyYXRpb24g
YXJlCmNvbXBsZXRlZCwgdGhlIGNydGMvcGxhbmUvZW5jb2Rlci9jb25uZWN0b3Igb2JqZWN0cyBo
YXMgYmVlbgppbXBsZW1lbnRlZC4KT24gTG9vbmdzb24gM0E0MDAwIENQVSBhbmQgN0ExMDAwIHN5
c3RlbSwgd2UgaGF2ZSBhY2hpZXZlZCB0aGUgdXNlCm9mIGR1YWwgc2NyZWVuLCBhbmQgc3VwcG9y
dCBkdWFsIHNjcmVlbiBjbG9uZSBtb2RlIGFuZCBleHBhbnNpb24KbW9kZS4KCnY4OgotIFVwZGF0
ZSB0aGUgYXRvbWljX3VwZGF0ZSBmdW5jdGlvbiBpbnRlcmZhY2UuCgp2NzoKLSBUaGUgcGl4ZWwg
Y2xvY2sgaXMgbGltaXRlZCB0byBsZXNzIHRoYW4gMTczMDAwLgoKdjY6Ci0gUmVtb3ZlIHNwaW5f
bG9jayBpbiBtbWlvIHJlZyByZWFkIGFuZCB3cml0ZS4KLSBUT19VTkNBQyBpcyByZXBsYWMgd2l0
aCBpb3JlbWFwLgotIEZpeCBlcnJvciBhcmd1bWVudHMgaW4gY3J0Y19hdG9taWNfZW5hYmxlL2Rp
c2FibGUvbW9kZV92YWxpZC4KCnY1OgotIENoYW5nZSB0aGUgbmFtZSBvZiB0aGUgY2hpcCB0byBM
UzdBLgotIENoYW5nZSBtYWdpYyB2YWx1ZSBpbiBjcnRjIHRvIG1hY3Jvcy4KLSBDb3JyZWN0IG1p
c3Rha2VzIHdvcmRzLgotIENoYW5nZSB0aGUgcmVnaXN0ZXIgb3BlcmF0aW9uIGZ1bmN0aW9uIHBy
ZWZpeCB0byBsczdhLgoKdjQ6Ci0gTW92ZSB0aGUgbW9kZV92YWxpZCBmdW5jdGlvbiB0byB0aGUg
Y3J0Yy4KCnYzOgotIE1vdmUgdGhlIG1vZGVfdmFsaWQgZnVuY3Rpb24gdG8gdGhlIGNvbm5lY3Rv
ciBhbmQgb3B0aW1pemUgaXQuCi0gRml4IG51bV9jcnRjIGNhbGN1bGF0aW9uIG1ldGhvZC4KCnYy
OgotIENvbXBsZXRlIHRoZSBjYXNlIG9mIDMyLWJpdCBjb2xvciBpbiBDUlRDLgoKU2lnbmVkLW9m
Zi1ieTogQ2hlbnlhbmcgTGkgJmx0O2xpY2hlbnlhbmdAbG9vbmdzb24uY24mZ3Q7Ci0tLQogZHJp
dmVycy9ncHUvZHJtL0tjb25maWcgICAgICAgICAgICAgICAgICAgICAgIHwgICAyICsKIGRyaXZl
cnMvZ3B1L2RybS9NYWtlZmlsZSAgICAgICAgICAgICAgICAgICAgICB8ICAgMSArCiBkcml2ZXJz
L2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZyAgICAgICAgICAgICAgfCAgMTQgKwogZHJpdmVycy9n
cHUvZHJtL2xvb25nc29uL01ha2VmaWxlICAgICAgICAgICAgIHwgIDE0ICsKIGRyaXZlcnMvZ3B1
L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYyB8ICA0OCArKysrCiBkcml2ZXJzL2dw
dS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5jICAgICAgfCAyNDMgKysrKysrKysrKysrKysr
KwogZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2RldmljZS5jICAgIHwgIDQ3ICsr
KwogZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5jICAgICAgIHwgMjcwICsr
KysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5o
ICAgICAgIHwgMTM5ICsrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29u
X2VuY29kZXIuYyAgIHwgIDM3ICsrKwogZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29u
X3BsYW5lLmMgICAgIHwgMTAyICsrKysrKysKIDExIGZpbGVzIGNoYW5nZWQsIDkxNyBpbnNlcnRp
b25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL0tjb25m
aWcKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFrZWZpbGUK
IGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY29u
bmVjdG9yLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9v
bmdzb25fY3J0Yy5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xvb25nc29u
L2xvb25nc29uX2RldmljZS5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xv
b25nc29uL2xvb25nc29uX2Rydi5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJt
L2xvb25nc29uL2xvb25nc29uX2Rydi5oCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUv
ZHJtL2xvb25nc29uL2xvb25nc29uX2VuY29kZXIuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZl
cnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9wbGFuZS5jCgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL0tjb25maWcgYi9kcml2ZXJzL2dwdS9kcm0vS2NvbmZpZwppbmRleCAzYzE2YmQx
YWZkODcuLmMwYzI4MTYzNWNlZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL0tjb25maWcK
KysrIGIvZHJpdmVycy9ncHUvZHJtL0tjb25maWcKQEAgLTM3Miw2ICszNzIsOCBAQCBzb3VyY2Ug
ImRyaXZlcnMvZ3B1L2RybS94ZW4vS2NvbmZpZyIKIAogc291cmNlICJkcml2ZXJzL2dwdS9kcm0v
dmJveHZpZGVvL0tjb25maWciCiAKK3NvdXJjZSAiZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL0tj
b25maWciCisKIHNvdXJjZSAiZHJpdmVycy9ncHUvZHJtL2xpbWEvS2NvbmZpZyIKIAogc291cmNl
ICJkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvS2NvbmZpZyIKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9NYWtlZmlsZQppbmRleCA1Mjc5ZGI0
MzkyZGYuLjc3OTc1ZmRiNGQ1MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL01ha2VmaWxl
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9NYWtlZmlsZQpAQCAtMTE5LDYgKzExOSw3IEBAIG9iai0k
KENPTkZJR19EUk1fUEwxMTEpICs9IHBsMTExLwogb2JqLSQoQ09ORklHX0RSTV9UVkUyMDApICs9
IHR2ZTIwMC8KIG9iai0kKENPTkZJR19EUk1fWEVOKSArPSB4ZW4vCiBvYmotJChDT05GSUdfRFJN
X1ZCT1hWSURFTykgKz0gdmJveHZpZGVvLworb2JqLSQoQ09ORklHX0RSTV9MT09OR1NPTikgKz0g
bG9vbmdzb24vCiBvYmotJChDT05GSUdfRFJNX0xJTUEpICArPSBsaW1hLwogb2JqLSQoQ09ORklH
X0RSTV9QQU5GUk9TVCkgKz0gcGFuZnJvc3QvCiBvYmotJChDT05GSUdfRFJNX0FTUEVFRF9HRlgp
ICs9IGFzcGVlZC8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9LY29uZmln
IGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL0tjb25maWcKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMDAwMDAwLi4zY2Y0MmE0Y2NhMDgKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZwpAQCAtMCwwICsxLDE0IEBACisjIFNQRFgtTGlj
ZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkKKworY29uZmlnIERSTV9MT09OR1NPTgorCXRy
aXN0YXRlICJEUk0gc3VwcG9ydCBmb3IgTFM3QSBicmlkZ2UgY2hpcHNldCIKKwlkZXBlbmRzIG9u
IERSTSAmYW1wOyZhbXA7IFBDSQorCWRlcGVuZHMgb24gQ1BVX0xPT05HU09ONjQKKwlzZWxlY3Qg
RFJNX0tNU19IRUxQRVIKKwlzZWxlY3QgRFJNX1ZSQU1fSEVMUEVSCisJc2VsZWN0IERSTV9UVE0K
KwlzZWxlY3QgRFJNX1RUTV9IRUxQRVIKKwlkZWZhdWx0IG4KKwloZWxwCisJICBTdXBwb3J0IHRo
ZSBkaXNwbGF5IGNvbnRyb2xsZXJzIGZvdW5kIG9uIHRoZSBMb29uZ3NvbiBMUzdBCisJICBicmlk
Z2UuCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFrZWZpbGUgYi9kcml2
ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFrZWZpbGUKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
MDAwMDAwMDAwMDAwLi4yMmQwNjM5NTNiNzgKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vbG9vbmdzb24vTWFrZWZpbGUKQEAgLTAsMCArMSwxNCBAQAorIyBTUERYLUxpY2Vuc2Ut
SWRlbnRpZmllcjogR1BMLTIuMC1vbmx5CisjCisjIE1ha2VmaWxlIGZvciBsb29uZ3NvbiBkcm0g
ZHJpdmVycy4KKyMgVGhpcyBkcml2ZXIgcHJvdmlkZXMgc3VwcG9ydCBmb3IgdGhlCisjIERpcmVj
dCBSZW5kZXJpbmcgSW5mcmFzdHJ1Y3R1cmUgKERSSSkKKworY2NmbGFncy15IDo9IC1JaW5jbHVk
ZS9kcm0KK2xvb25nc29uLXkgOj0gbG9vbmdzb25fZHJ2Lm8gXAorCWxvb25nc29uX2NydGMubyBc
CisJbG9vbmdzb25fcGxhbmUubyBcCisJbG9vbmdzb25fZGV2aWNlLm8gXAorCWxvb25nc29uX2Nv
bm5lY3Rvci5vIFwKKwlsb29uZ3Nvbl9lbmNvZGVyLm8KK29iai0kKENPTkZJR19EUk1fTE9PTkdT
T04pICs9IGxvb25nc29uLm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9s
b29uZ3Nvbl9jb25uZWN0b3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9j
b25uZWN0b3IuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjZiMWYw
ZmZhMzNiZAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29u
Z3Nvbl9jb25uZWN0b3IuYwpAQCAtMCwwICsxLDQ4IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRp
ZmllcjogR1BMLTIuMC1vci1sYXRlcgorCisjaW5jbHVkZSAibG9vbmdzb25fZHJ2LmgiCisKK3N0
YXRpYyBpbnQgbG9vbmdzb25fZ2V0X21vZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0
b3IpCit7CisJaW50IGNvdW50OworCisJY291bnQgPSBkcm1fYWRkX21vZGVzX25vZWRpZChjb25u
ZWN0b3IsIDE5MjAsIDEwODApOworCWRybV9zZXRfcHJlZmVycmVkX21vZGUoY29ubmVjdG9yLCAx
MDI0LCA3NjgpOworCisJcmV0dXJuIGNvdW50OworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzIGxvb25nc29uX2Nvbm5lY3Rvcl9oZWxwZXIgPSB7CisJ
LmdldF9tb2RlcyA9IGxvb25nc29uX2dldF9tb2RlcywKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1
Y3QgZHJtX2Nvbm5lY3Rvcl9mdW5jcyBsb29uZ3Nvbl9jb25uZWN0b3JfZnVuY3MgPSB7CisJLmZp
bGxfbW9kZXMgPSBkcm1faGVscGVyX3Byb2JlX3NpbmdsZV9jb25uZWN0b3JfbW9kZXMsCisJLmRl
c3Ryb3kgPSBkcm1fY29ubmVjdG9yX2NsZWFudXAsCisJLnJlc2V0ID0gZHJtX2F0b21pY19oZWxw
ZXJfY29ubmVjdG9yX3Jlc2V0LAorCS5hdG9taWNfZHVwbGljYXRlX3N0YXRlID0gZHJtX2F0b21p
Y19oZWxwZXJfY29ubmVjdG9yX2R1cGxpY2F0ZV9zdGF0ZSwKKwkuYXRvbWljX2Rlc3Ryb3lfc3Rh
dGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jb25uZWN0b3JfZGVzdHJveV9zdGF0ZSwKK307CisKK2lu
dCBsb29uZ3Nvbl9jb25uZWN0b3JfaW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCBp
bnQgaW5kZXgpCit7CisJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKKwlzdHJ1Y3Qg
bG9vbmdzb25fY29ubmVjdG9yICpsY29ubmVjdG9yOworCisJbGNvbm5lY3RvciA9IGt6YWxsb2Mo
c2l6ZW9mKHN0cnVjdCBsb29uZ3Nvbl9jb25uZWN0b3IpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIWxj
b25uZWN0b3IpIHsKKwkJRFJNX0lORk8oImxvb25nc29uIGNvbm5lY3RvciBremFsbG9jIGZhaWxl
ZFxuIik7CisJCXJldHVybiAtMTsKKwl9CisKKwlsY29ubmVjdG9yLSZndDtsZGV2ID0gbGRldjsK
KwlsY29ubmVjdG9yLSZndDtpZCA9IGluZGV4OworCisJbGRldi0mZ3Q7bW9kZV9pbmZvW2luZGV4
XS5jb25uZWN0b3IgPSBsY29ubmVjdG9yOworCWNvbm5lY3RvciA9ICZhbXA7bGNvbm5lY3Rvci0m
Z3Q7YmFzZTsKKwlkcm1fY29ubmVjdG9yX2luaXQobGRldi0mZ3Q7ZGV2LCBjb25uZWN0b3IsICZh
bXA7bG9vbmdzb25fY29ubmVjdG9yX2Z1bmNzLAorCQkJICAgRFJNX01PREVfQ09OTkVDVE9SX1Vu
a25vd24pOworCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZChjb25uZWN0b3IsICZhbXA7bG9vbmdz
b25fY29ubmVjdG9yX2hlbHBlcik7CisKKwlyZXR1cm4gMDsKK30KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jcnRjLmMgYi9kcml2ZXJzL2dwdS9kcm0vbG9v
bmdzb24vbG9vbmdzb25fY3J0Yy5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAw
MDAwMC4uNGNiNjVmYTA4Nzc4Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2xv
b25nc29uL2xvb25nc29uX2NydGMuYwpAQCAtMCwwICsxLDI0MyBAQAorLy8gU1BEWC1MaWNlbnNl
LUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKworI2luY2x1ZGUgImxvb25nc29uX2Rydi5o
IgorCitzdGF0aWMgdm9pZCB0cnlfZWFjaF9sb29wYyh1MzIgY2xrLCB1MzIgcHN0ZGl2LCB1MzIg
ZnJlZmMsCisJCQkgICBzdHJ1Y3QgcGl4X3BsbCAqcGxsX2NvbmZpZykKK3sKKwl1MzIgbG9vcGM7
CisJdTMyIGNsa19vdXQ7CisJdTMyIHByZWNpc2lvbjsKKwl1MzIgbWluID0gMTAwMDsKKwl1MzIg
YmFzZV9jbGsgPSAxMDAwMDBMOworCisJZm9yIChsb29wYyA9IExPT1BDX01JTjsgbG9vcGMgJmx0
OyBMT09QQ19NQVg7IGxvb3BjKyspIHsKKwkJaWYgKChsb29wYyAmbHQ7IEZSRV9SRUZfTUlOICog
ZnJlZmMpIHx8CisJCSAgICAobG9vcGMgJmd0OyBGUkVfUkVGX01BWCAqIGZyZWZjKSkKKwkJCWNv
bnRpbnVlOworCisJCWNsa19vdXQgPSBiYXNlX2NsayAqIGxvb3BjIC8gZnJlZmM7CisJCXByZWNp
c2lvbiA9IChjbGsgJmd0OyBjbGtfb3V0KSA/IChjbGsgLSBjbGtfb3V0KSA6IChjbGtfb3V0IC0g
Y2xrKTsKKwkJaWYgKHByZWNpc2lvbiAmbHQ7IG1pbikgeworCQkJcGxsX2NvbmZpZy0mZ3Q7bDJf
ZGl2ID0gcHN0ZGl2OworCQkJcGxsX2NvbmZpZy0mZ3Q7bDFfbG9vcGMgPSBsb29wYzsKKwkJCXBs
bF9jb25maWctJmd0O2wxX2ZyZWZjID0gZnJlZmM7CisJCX0KKwl9Cit9CisKK3N0YXRpYyB2b2lk
IGNhbF9mcmVxKHUzMiBwaXhjbG9jaywgc3RydWN0IHBpeF9wbGwgKnBsbF9jb25maWcpCit7CisJ
dTMyIHBzdGRpdjsKKwl1MzIgZnJlZmM7CisJdTMyIGNsazsKKworCWZvciAocHN0ZGl2ID0gMTsg
cHN0ZGl2ICZsdDsgUFNUX0RJVl9NQVg7IHBzdGRpdisrKSB7CisJCWNsayA9IHBpeGNsb2NrICog
cHN0ZGl2OworCQlmb3IgKGZyZWZjID0gRElWX1JFRl9NSU47IGZyZWZjICZsdDs9IERJVl9SRUZf
TUFYOyBmcmVmYysrKQorCQkJdHJ5X2VhY2hfbG9vcGMoY2xrLCBwc3RkaXYsIGZyZWZjLCBwbGxf
Y29uZmlnKTsKKwl9Cit9CisKK3N0YXRpYyB2b2lkIGNvbmZpZ19wbGwoc3RydWN0IGxvb25nc29u
X2RldmljZSAqbGRldiwgdW5zaWduZWQgbG9uZyBwbGxfYmFzZSwKKwkJICAgICAgIHN0cnVjdCBw
aXhfcGxsICpwbGxfY2ZnKQoreworCXUzMiB2YWw7CisJdTMyIGNvdW50ID0gMDsKKworCS8qIGNs
ZWFyIHNlbF9wbGxfb3V0MCAqLworCXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSAr
IDB4NCk7CisJdmFsICZhbXA7PSB+KDFVTCAmbHQ7Jmx0OyA4KTsKKwlsczdhX2lvX3dyZWcobGRl
diwgcGxsX2Jhc2UgKyAweDQsIHZhbCk7CisKKwkvKiBzZXQgcGxsX3BkICovCisJdmFsID0gbHM3
YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KTsKKwl2YWwgfD0gKDFVTCAmbHQ7Jmx0OyAx
Myk7CisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0LCB2YWwpOworCisJLyogY2xl
YXIgc2V0X3BsbF9wYXJhbSAqLworCXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSAr
IDB4NCk7CisJdmFsICZhbXA7PSB+KDFVTCAmbHQ7Jmx0OyAxMSk7CisJbHM3YV9pb193cmVnKGxk
ZXYsIHBsbF9iYXNlICsgMHg0LCB2YWwpOworCisJLyogY2xlYXIgb2xkIHZhbHVlICZhbXA7IGNv
bmZpZyBuZXcgdmFsdWUgKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAw
eDQpOworCXZhbCAmYW1wOz0gfigweDdmVUwgJmx0OyZsdDsgMCk7CisJdmFsIHw9IChwbGxfY2Zn
LSZndDtsMV9mcmVmYyAmbHQ7Jmx0OyAwKTsgLyogcmVmYyAqLworCWxzN2FfaW9fd3JlZyhsZGV2
LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jh
c2UgKyAweDApOworCXZhbCAmYW1wOz0gfigweDdmVUwgJmx0OyZsdDsgMCk7CisJdmFsIHw9IChw
bGxfY2ZnLSZndDtsMl9kaXYgJmx0OyZsdDsgMCk7IC8qIGRpdiAqLworCXZhbCAmYW1wOz0gfigw
eDFmZlVMICZsdDsmbHQ7IDIxKTsKKwl2YWwgfD0gKHBsbF9jZmctJmd0O2wxX2xvb3BjICZsdDsm
bHQ7IDIxKTsgLyogbG9vcGMgKi8KKwlsczdhX2lvX3dyZWcobGRldiwgcGxsX2Jhc2UgKyAweDAs
IHZhbCk7CisKKwkvKiBzZXQgc2V0X3BsbF9wYXJhbSAqLworCXZhbCA9IGxzN2FfaW9fcnJlZyhs
ZGV2LCBwbGxfYmFzZSArIDB4NCk7CisJdmFsIHw9ICgxVUwgJmx0OyZsdDsgMTEpOworCWxzN2Ff
aW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKwkvKiBjbGVhciBwbGxfcGQgKi8K
Kwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQpOworCXZhbCAmYW1wOz0g
figxVUwgJmx0OyZsdDsgMTMpOworCWxzN2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwg
dmFsKTsKKworCXdoaWxlICghKGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCkgJmFt
cDsgMHg4MCkpIHsKKwkJY3B1X3JlbGF4KCk7CisJCWNvdW50Kys7CisJCWlmIChjb3VudCAmZ3Q7
PSAxMDAwKSB7CisJCQlEUk1fRVJST1IoImxvb25nc29uLTdBIFBMTCBsb2NrIGZhaWxlZFxuIik7
CisJCQlicmVhazsKKwkJfQorCX0KKworCXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFz
ZSArIDB4NCk7CisJdmFsIHw9ICgxVUwgJmx0OyZsdDsgOCk7CisJbHM3YV9pb193cmVnKGxkZXYs
IHBsbF9iYXNlICsgMHg0LCB2YWwpOworfQorCitzdGF0aWMgdm9pZCBsb29uZ3Nvbl9jcnRjX21v
ZGVfc2V0X25vZmIoc3RydWN0IGRybV9jcnRjICpjcnRjKQoreworCXN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYgPSBjcnRjLSZndDtkZXY7CisJc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiA9IGRl
di0mZ3Q7ZGV2X3ByaXZhdGU7CisJc3RydWN0IGxvb25nc29uX2NydGMgKmxjcnRjID0gdG9fbG9v
bmdzb25fY3J0YyhjcnRjKTsKKwlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSA9ICZhbXA7
Y3J0Yy0mZ3Q7c3RhdGUtJmd0O2FkanVzdGVkX21vZGU7CisJY29uc3Qgc3RydWN0IGRybV9mb3Jt
YXRfaW5mbyAqZm9ybWF0OworCXN0cnVjdCBwaXhfcGxsIHBsbF9jZmc7CisJdTMyIGhyLCBoc3Ms
IGhzZSwgaGZsOworCXUzMiB2ciwgdnNzLCB2c2UsIHZmbDsKKwl1MzIgcGl4X2ZyZXE7CisJdTMy
IHJlZ19vZmZzZXQ7CisKKwlociA9IG1vZGUtJmd0O2hkaXNwbGF5OworCWhzcyA9IG1vZGUtJmd0
O2hzeW5jX3N0YXJ0OworCWhzZSA9IG1vZGUtJmd0O2hzeW5jX2VuZDsKKwloZmwgPSBtb2RlLSZn
dDtodG90YWw7CisKKwl2ciA9IG1vZGUtJmd0O3ZkaXNwbGF5OworCXZzcyA9IG1vZGUtJmd0O3Zz
eW5jX3N0YXJ0OworCXZzZSA9IG1vZGUtJmd0O3ZzeW5jX2VuZDsKKwl2ZmwgPSBtb2RlLSZndDt2
dG90YWw7CisKKwlwaXhfZnJlcSA9IG1vZGUtJmd0O2Nsb2NrOworCXJlZ19vZmZzZXQgPSBsY3J0
Yy0mZ3Q7cmVnX29mZnNldDsKKwlmb3JtYXQgPSBjcnRjLSZndDtwcmltYXJ5LSZndDtzdGF0ZS0m
Z3Q7ZmItJmd0O2Zvcm1hdDsKKworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9ESVRDRkdfUkVHICsg
cmVnX29mZnNldCwgMCk7CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0RJVFRBQl9MT19SRUcgKyBy
ZWdfb2Zmc2V0LCAwKTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfRElUVEFCX0hJX1JFRyArIHJl
Z19vZmZzZXQsIDApOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9QQU5DRkdfUkVHICsgcmVnX29m
ZnNldCwgRkJfUEFOQ0ZHX0RFRik7CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX1BBTlRJTV9SRUcg
KyByZWdfb2Zmc2V0LCAwKTsKKworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9IRElTUExBWV9SRUcg
KyByZWdfb2Zmc2V0LCAoaGZsICZsdDsmbHQ7IDE2KSB8IGhyKTsKKwlsczdhX21tX3dyZWcobGRl
diwgRkJfSFNZTkNfUkVHICsgcmVnX29mZnNldCwKKwkJICAgICBGQl9IU1lOQ19QVUxTRSB8ICho
c2UgJmx0OyZsdDsgMTYpIHwgaHNzKTsKKworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9WRElTUExB
WV9SRUcgKyByZWdfb2Zmc2V0LCAodmZsICZsdDsmbHQ7IDE2KSB8IHZyKTsKKwlsczdhX21tX3dy
ZWcobGRldiwgRkJfVlNZTkNfUkVHICsgcmVnX29mZnNldCwKKwkJICAgICBGQl9WU1lOQ19QVUxT
RSB8ICh2c2UgJmx0OyZsdDsgMTYpIHwgdnNzKTsKKworCXN3aXRjaCAoZm9ybWF0LSZndDtmb3Jt
YXQpIHsKKwljYXNlIERSTV9GT1JNQVRfUkdCNTY1OgorCQlsY3J0Yy0mZ3Q7Y2ZnX3JlZyB8PSAw
eDM7CisJCWJyZWFrOworCWNhc2UgRFJNX0ZPUk1BVF9SR0I4ODg6CisJY2FzZSBEUk1fRk9STUFU
X1hSR0I4ODg4OgorCWNhc2UgRFJNX0ZPUk1BVF9BUkdCODg4ODoKKwlkZWZhdWx0OgorCQlsY3J0
Yy0mZ3Q7Y2ZnX3JlZyB8PSAweDQ7CisJCWJyZWFrOworCX0KKwlsczdhX21tX3dyZWcobGRldiwg
RkJfQ0ZHX1JFRyArIHJlZ19vZmZzZXQsIGxjcnRjLSZndDtjZmdfcmVnKTsKKworCWNhbF9mcmVx
KHBpeF9mcmVxLCAmYW1wO3BsbF9jZmcpOworCWNvbmZpZ19wbGwobGRldiwgTFM3QV9QSVhfUExM
ICsgcmVnX29mZnNldCwgJmFtcDtwbGxfY2ZnKTsKK30KKworc3RhdGljIHZvaWQgbG9vbmdzb25f
Y3J0Y19hdG9taWNfZW5hYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKKwkJCQkJc3RydWN0IGRy
bV9hdG9taWNfc3RhdGUgKm9sZF9zdGF0ZSkKK3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0g
Y3J0Yy0mZ3Q7ZGV2OworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYgPSBkZXYtJmd0O2Rl
dl9wcml2YXRlOworCXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YyA9IHRvX2xvb25nc29uX2Ny
dGMoY3J0Yyk7CisJdTMyIHJlZ19vZmZzZXQgPSBsY3J0Yy0mZ3Q7cmVnX29mZnNldDsKKworCWxj
cnRjLSZndDtjZmdfcmVnIHw9IENGR19FTkFCTEU7CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0NG
R19SRUcgKyByZWdfb2Zmc2V0LCBsY3J0Yy0mZ3Q7Y2ZnX3JlZyk7Cit9CisKK3N0YXRpYyB2b2lk
IGxvb25nc29uX2NydGNfYXRvbWljX2Rpc2FibGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAorCQkJ
CQkgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKm9sZF9zdGF0ZSkKK3sKKwlzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2ID0gY3J0Yy0mZ3Q7ZGV2OworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYg
PSBkZXYtJmd0O2Rldl9wcml2YXRlOworCXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YyA9IHRv
X2xvb25nc29uX2NydGMoY3J0Yyk7CisJdTMyIHJlZ19vZmZzZXQgPSBsY3J0Yy0mZ3Q7cmVnX29m
ZnNldDsKKworCWxjcnRjLSZndDtjZmdfcmVnICZhbXA7PSB+Q0ZHX0VOQUJMRTsKKwlsczdhX21t
X3dyZWcobGRldiwgRkJfQ0ZHX1JFRyArIHJlZ19vZmZzZXQsIGxjcnRjLSZndDtjZmdfcmVnKTsK
K30KKworc3RhdGljIGVudW0gZHJtX21vZGVfc3RhdHVzIGxvb25nc29uX21vZGVfdmFsaWQoc3Ry
dWN0IGRybV9jcnRjICpjcnRjLAorCQkJCQkJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUg
Km1vZGUpCit7CisJaWYgKG1vZGUtJmd0O2hkaXNwbGF5ICZndDsgMTkyMCkKKwkJcmV0dXJuIE1P
REVfQkFEOworCWlmIChtb2RlLSZndDt2ZGlzcGxheSAmZ3Q7IDEwODApCisJCXJldHVybiBNT0RF
X0JBRDsKKwlpZiAobW9kZS0mZ3Q7aGRpc3BsYXkgJSA2NCkKKwkJcmV0dXJuIE1PREVfQkFEOwor
CWlmIChtb2RlLSZndDtjbG9jayAmZ3Q7PSAxNzMwMDApCisJCXJldHVybiBNT0RFX0NMT0NLX0hJ
R0g7CisKKwlyZXR1cm4gTU9ERV9PSzsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY3J0
Y19oZWxwZXJfZnVuY3MgbG9vbmdzb25fY3J0Y19oZWxwZXJfZnVuY3MgPSB7CisJLm1vZGVfdmFs
aWQgPSBsb29uZ3Nvbl9tb2RlX3ZhbGlkLAorCS5hdG9taWNfZW5hYmxlID0gbG9vbmdzb25fY3J0
Y19hdG9taWNfZW5hYmxlLAorCS5hdG9taWNfZGlzYWJsZSA9IGxvb25nc29uX2NydGNfYXRvbWlj
X2Rpc2FibGUsCisJLm1vZGVfc2V0X25vZmIgPSBsb29uZ3Nvbl9jcnRjX21vZGVfc2V0X25vZmIs
Cit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jcnRjX2Z1bmNzIGxvb25nc29uX2NydGNf
ZnVuY3MgPSB7CisJLnNldF9jb25maWcgPSBkcm1fYXRvbWljX2hlbHBlcl9zZXRfY29uZmlnLAor
CS5wYWdlX2ZsaXAgPSBkcm1fYXRvbWljX2hlbHBlcl9wYWdlX2ZsaXAsCisJLnJlc2V0ID0gZHJt
X2F0b21pY19oZWxwZXJfY3J0Y19yZXNldCwKKwkuZGVzdHJveSA9IGRybV9jcnRjX2NsZWFudXAs
CisJLmF0b21pY19kdXBsaWNhdGVfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jcnRjX2R1cGxp
Y2F0ZV9zdGF0ZSwKKwkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9j
cnRjX2Rlc3Ryb3lfc3RhdGUsCit9OworCitpbnQgbG9vbmdzb25fY3J0Y19pbml0KHN0cnVjdCBs
b29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCkKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0
YyAqbGNydGM7CisJdTMyIHJldDsKKworCWxjcnRjID0ga3phbGxvYyhzaXplb2Yoc3RydWN0IGxv
b25nc29uX2NydGMpLCBHRlBfS0VSTkVMKTsKKwlpZiAobGNydGMgPT0gTlVMTCkKKwkJcmV0dXJu
IC0xOworCisJbGNydGMtJmd0O2xkZXYgPSBsZGV2OworCWxjcnRjLSZndDtyZWdfb2Zmc2V0ID0g
aW5kZXggKiBSRUdfT0ZGU0VUOworCWxjcnRjLSZndDtjZmdfcmVnID0gQ0ZHX1JFU0VUOworCWxj
cnRjLSZndDtjcnRjX2lkID0gaW5kZXg7CisKKwlyZXQgPSBsb29uZ3Nvbl9wbGFuZV9pbml0KGxj
cnRjKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJcmV0ID0gZHJtX2NydGNfaW5pdF93
aXRoX3BsYW5lcyhsZGV2LSZndDtkZXYsICZhbXA7bGNydGMtJmd0O2Jhc2UsIGxjcnRjLSZndDtw
bGFuZSwKKwkJCQkJTlVMTCwgJmFtcDtsb29uZ3Nvbl9jcnRjX2Z1bmNzLCBOVUxMKTsKKwlpZiAo
cmV0KSB7CisJCURSTV9FUlJPUigiZmFpbGVkIHRvIGluaXQgY3J0YyAlZFxuIiwgaW5kZXgpOwor
CQlkcm1fcGxhbmVfY2xlYW51cChsY3J0Yy0mZ3Q7cGxhbmUpOworCQlyZXR1cm4gcmV0OworCX0K
KworCWRybV9jcnRjX2hlbHBlcl9hZGQoJmFtcDtsY3J0Yy0mZ3Q7YmFzZSwgJmFtcDtsb29uZ3Nv
bl9jcnRjX2hlbHBlcl9mdW5jcyk7CisKKwlsZGV2LSZndDttb2RlX2luZm9baW5kZXhdLmNydGMg
PSBsY3J0YzsKKworCXJldHVybiAwOworfQorCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
bG9vbmdzb24vbG9vbmdzb25fZGV2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9v
bmdzb25fZGV2aWNlLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5l
NTNiZDhkZWQ4OWIKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24v
bG9vbmdzb25fZGV2aWNlLmMKQEAgLTAsMCArMSw0NyBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50
aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKworI2luY2x1ZGUgImxvb25nc29uX2Rydi5oIgorCit1
MzIgbG9vbmdzb25fZ3B1X29mZnNldChzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSkKK3sK
KwlzdHJ1Y3QgZHJtX2dlbV92cmFtX29iamVjdCAqZ2JvOworCXN0cnVjdCBsb29uZ3Nvbl9jcnRj
ICpsY3J0YzsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2OworCXUzMiBncHVfYWRkcjsK
KworCWxjcnRjID0gdG9fbG9vbmdzb25fY3J0YyhzdGF0ZS0mZ3Q7Y3J0Yyk7CisJbGRldiA9IGxj
cnRjLSZndDtsZGV2OworCisJZ2JvID0gZHJtX2dlbV92cmFtX29mX2dlbShzdGF0ZS0mZ3Q7ZmIt
Jmd0O29ialswXSk7CisJZ3B1X2FkZHIgPSBsZGV2LSZndDt2cmFtX3N0YXJ0ICsgZHJtX2dlbV92
cmFtX29mZnNldChnYm8pOworCisJcmV0dXJuIGdwdV9hZGRyOworfQorCit1MzIgbHM3YV9pb19y
cmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIHUzMiBvZmZzZXQpCit7CisJdTMyIHZh
bDsKKworCXZhbCA9IHJlYWRsKGxkZXYtJmd0O2lvICsgb2Zmc2V0KTsKKworCXJldHVybiB2YWw7
Cit9CisKK3ZvaWQgbHM3YV9pb193cmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIHUz
MiBvZmZzZXQsIHUzMiB2YWwpCit7CisJd3JpdGVsKHZhbCwgbGRldi0mZ3Q7aW8gKyBvZmZzZXQp
OworfQorCit1MzIgbHM3YV9tbV9ycmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIHUz
MiBvZmZzZXQpCit7CisJdTMyIHZhbDsKKworCXZhbCA9IHJlYWRsKGxkZXYtJmd0O21taW8gKyBv
ZmZzZXQpOworCisJcmV0dXJuIHZhbDsKK30KKwordm9pZCBsczdhX21tX3dyZWcoc3RydWN0IGxv
b25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCwgdTMyIHZhbCkKK3sKKwl3cml0ZWwodmFs
LCBsZGV2LSZndDttbWlvICsgb2Zmc2V0KTsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29u
Z3Nvbl9kcnYuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmU0MDUx
OTlhM2RmNgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29u
Z3Nvbl9kcnYuYwpAQCAtMCwwICsxLDI3MCBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6
IEdQTC0yLjAtb3ItbGF0ZXIKKy8qCisgKiBMb29uZ3NvbiBMUzdBMTAwMCBicmlkZ2UgY2hpcHNl
dCBkcm0gZHJpdmVyCisgKi8KKworI2luY2x1ZGUgJmx0O2xpbnV4L2NvbnNvbGUuaCZndDsKKyNp
bmNsdWRlICZsdDtsaW51eC9wY2kuaCZndDsKKyNpbmNsdWRlICZsdDtsaW51eC9tb2R1bGUuaCZn
dDsKKyNpbmNsdWRlICZsdDtsaW51eC9rZXJuZWwuaCZndDsKKyNpbmNsdWRlICJsb29uZ3Nvbl9k
cnYuaCIKKworLyogSW50ZXJmYWNlIGhpc3Rvcnk6CisgKiAwLjEgLSBvcmlnaW5hbC4KKyAqLwor
I2RlZmluZSBEUklWRVJfTUFKT1IgMAorI2RlZmluZSBEUklWRVJfTUlOT1IgMQorCitzdGF0aWMg
Y29uc3Qgc3RydWN0IGRybV9tb2RlX2NvbmZpZ19mdW5jcyBsb29uZ3Nvbl9tb2RlX2Z1bmNzID0g
eworCS5mYl9jcmVhdGUgPSBkcm1fZ2VtX2ZiX2NyZWF0ZSwKKwkuYXRvbWljX2NoZWNrID0gZHJt
X2F0b21pY19oZWxwZXJfY2hlY2ssCisJLmF0b21pY19jb21taXQgPSBkcm1fYXRvbWljX2hlbHBl
cl9jb21taXQsCisJLm91dHB1dF9wb2xsX2NoYW5nZWQgPSBkcm1fZmJfaGVscGVyX291dHB1dF9w
b2xsX2NoYW5nZWQsCisJLm1vZGVfdmFsaWQgPSBkcm1fdnJhbV9oZWxwZXJfbW9kZV92YWxpZAor
fTsKKworc3RhdGljIGludCBsb29uZ3Nvbl9kZXZpY2VfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LCB1aW50MzJfdCBmbGFncykKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0g
ZGV2LSZndDtkZXZfcHJpdmF0ZTsKKwlzdHJ1Y3QgcGNpX2RldiAqZ3B1X3BkZXY7CisJcmVzb3Vy
Y2Vfc2l6ZV90IGFwZXJfYmFzZTsKKwlyZXNvdXJjZV9zaXplX3QgYXBlcl9zaXplOworCXJlc291
cmNlX3NpemVfdCBtbWlvX2Jhc2U7CisJcmVzb3VyY2Vfc2l6ZV90IG1taW9fc2l6ZTsKKworCS8q
IEdQVSBNRU0gKi8KKwkvKiBXZSBuZWVkIGdldCA3QS1ncHUgcGNpIGRldmljZSBpbmZvcm1hdGlv
biBmb3IgbGRldi0mZ3Q7Z3B1X3BkZXYgKi8KKwkvKiBkZXYtJmd0O3BkZXYgc2F2ZSA3QS1kYyBw
Y2kgZGV2aWNlIGluZm9ybWF0aW9uICovCisJZ3B1X3BkZXYgPSBwY2lfZ2V0X2RldmljZShQQ0lf
VkVORE9SX0lEX0xPT05HU09OLAorCQkJCSAgUENJX0RFVklDRV9JRF9MT09OR1NPTl9HUFUsIE5V
TEwpOworCWlmIChJU19FUlIoZ3B1X3BkZXYpKQorCQlyZXR1cm4gUFRSX0VSUihncHVfcGRldik7
CisKKwlsZGV2LSZndDtncHVfcGRldiA9IGdwdV9wZGV2OworCWFwZXJfYmFzZSA9IHBjaV9yZXNv
dXJjZV9zdGFydChncHVfcGRldiwgMik7CisJYXBlcl9zaXplID0gcGNpX3Jlc291cmNlX2xlbihn
cHVfcGRldiwgMik7CisJbGRldi0mZ3Q7dnJhbV9zdGFydCA9ICh1MzIpYXBlcl9iYXNlOworCWxk
ZXYtJmd0O3ZyYW1fc2l6ZSA9ICh1MzIpYXBlcl9zaXplOworCisJaWYgKCFkZXZtX3JlcXVlc3Rf
bWVtX3JlZ2lvbihsZGV2LSZndDtkZXYtJmd0O2RldiwgbGRldi0mZ3Q7dnJhbV9zdGFydCwKKwkJ
CQkgICAgIGxkZXYtJmd0O3ZyYW1fc2l6ZSwgImxvb25nc29uX3ZyYW0iKSkgeworCQlEUk1fRVJS
T1IoIkNhbid0IHJlc2VydmUgVlJBTVxuIik7CisJCXJldHVybiAtRU5YSU87CisJfQorCisJLyog
REMgTUVNICovCisJbW1pb19iYXNlID0gcGNpX3Jlc291cmNlX3N0YXJ0KGxkZXYtJmd0O2Rldi0m
Z3Q7cGRldiwgMCk7CisJbW1pb19zaXplID0gcGNpX3Jlc291cmNlX2xlbihsZGV2LSZndDtkZXYt
Jmd0O3BkZXYsIDApOworCWxkZXYtJmd0O21taW8gPSBkZXZtX2lvcmVtYXAoZGV2LSZndDtkZXYs
IG1taW9fYmFzZSwgbW1pb19zaXplKTsKKwlpZiAoIWxkZXYtJmd0O21taW8pIHsKKwkJZHJtX2Vy
cihkZXYsICJDYW5ub3QgbWFwIG1taW8gcmVnaW9uXG4iKTsKKwkJcmV0dXJuIC1FTk9NRU07CisJ
fQorCisJaWYgKCFkZXZtX3JlcXVlc3RfbWVtX3JlZ2lvbihsZGV2LSZndDtkZXYtJmd0O2Rldiwg
bW1pb19iYXNlLAorCQkJCSAgICAgbW1pb19zaXplLCAibG9vbmdzb25fbW1pbyIpKSB7CisJCURS
TV9FUlJPUigiQ2FuJ3QgcmVzZXJ2ZSBtbWlvIHJlZ2lzdGVyc1xuIik7CisJCXJldHVybiAtRU5P
TUVNOworCX0KKworCS8qIERDIElPICovCisJbGRldi0mZ3Q7aW8gPSBpb3JlbWFwKExTN0FfQ0hJ
UENGR19SRUdfQkFTRSwgMHhmKTsKKwlpZiAobGRldi0mZ3Q7aW8gPT0gTlVMTCkKKwkJcmV0dXJu
IC1FTk9NRU07CisKKwlEUk1fSU5GTygiREMgbW1pbyBiYXNlIDB4JWxseCBzaXplIDB4JWxseCBp
byAweCVsbHhcbiIsCisJCSBtbWlvX2Jhc2UsIG1taW9fc2l6ZSwgKih1NjQgKilsZGV2LSZndDtp
byk7CisJRFJNX0lORk8oIkdQVSB2cmFtIHN0YXJ0ID0gMHgleCBzaXplID0gMHgleFxuIiwKKwkJ
IGxkZXYtJmd0O3ZyYW1fc3RhcnQsIGxkZXYtJmd0O3ZyYW1fc2l6ZSk7CisKKwlyZXR1cm4gMDsK
K30KKworaW50IGxvb25nc29uX21vZGVzZXRfaW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICps
ZGV2KQoreworCXN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcjsKKwlzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubmVjdG9yOworCWludCBpOworCXUzMiByZXQ7CisKKwlsZGV2LSZndDtkZXYtJmd0
O21vZGVfY29uZmlnLmFsbG93X2ZiX21vZGlmaWVycyA9IHRydWU7CisKKwlmb3IgKGkgPSAwOyBp
ICZsdDsgMjsgaSsrKSB7CisJCXJldCA9IGxvb25nc29uX2NydGNfaW5pdChsZGV2LCBpKTsKKwkJ
aWYgKHJldCkgeworCQkJRFJNX1dBUk4oImxvb25nc29uIGNydGMlZCBpbml0IGZhaWxlZFxuIiwg
aSk7CisJCQljb250aW51ZTsKKwkJfQorCisJCXJldCA9IGxvb25nc29uX2VuY29kZXJfaW5pdChs
ZGV2LCBpKTsKKwkJaWYgKHJldCkgeworCQkJRFJNX0VSUk9SKCJsb29uZ3Nvbl9lbmNvZGVyX2lu
aXQgZmFpbGVkXG4iKTsKKwkJCXJldHVybiAtMTsKKwkJfQorCisJCXJldCA9IGxvb25nc29uX2Nv
bm5lY3Rvcl9pbml0KGxkZXYsIGkpOworCQlpZiAocmV0KSB7CisJCQlEUk1fRVJST1IoImxvb25n
c29uX2Nvbm5lY3Rvcl9pbml0IGZhaWxlZFxuIik7CisJCQlyZXR1cm4gLTE7CisJCX0KKworCQll
bmNvZGVyID0gJmFtcDtsZGV2LSZndDttb2RlX2luZm9baV0uZW5jb2Rlci0mZ3Q7YmFzZTsKKwkJ
Y29ubmVjdG9yID0gJmFtcDtsZGV2LSZndDttb2RlX2luZm9baV0uY29ubmVjdG9yLSZndDtiYXNl
OworCQlkcm1fY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVyKGNvbm5lY3RvciwgZW5jb2Rlcik7CisJ
CWxkZXYtJmd0O251bV9jcnRjKys7CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQg
bG9vbmdzb25fZHJtX2xvYWQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdW5zaWduZWQgbG9uZyBm
bGFncykKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2OworCWludCByZXQ7CisKKwls
ZGV2ID0gZGV2bV9remFsbG9jKGRldi0mZ3Q7ZGV2LCBzaXplb2YoKmxkZXYpLCBHRlBfS0VSTkVM
KTsKKwlpZiAoIWxkZXYpCisJCXJldHVybiAtRU5PTUVNOworCisJZGV2LSZndDtkZXZfcHJpdmF0
ZSA9IGxkZXY7CisJbGRldi0mZ3Q7ZGV2ID0gZGV2OworCisJcmV0ID0gbG9vbmdzb25fZGV2aWNl
X2luaXQoZGV2LCBmbGFncyk7CisJaWYgKHJldCkKKwkJZ290byBlcnI7CisKKwlyZXQgPSBkcm1t
X3ZyYW1faGVscGVyX2luaXQoZGV2LCBsZGV2LSZndDt2cmFtX3N0YXJ0LCBsZGV2LSZndDt2cmFt
X3NpemUpOworCWlmIChyZXQpCisJCWdvdG8gZXJyOworCisJZHJtX21vZGVfY29uZmlnX2luaXQo
ZGV2KTsKKwlkZXYtJmd0O21vZGVfY29uZmlnLmZ1bmNzID0gKHZvaWQgKikmYW1wO2xvb25nc29u
X21vZGVfZnVuY3M7CisJZGV2LSZndDttb2RlX2NvbmZpZy5taW5fd2lkdGggPSAxOworCWRldi0m
Z3Q7bW9kZV9jb25maWcubWluX2hlaWdodCA9IDE7CisJZGV2LSZndDttb2RlX2NvbmZpZy5tYXhf
d2lkdGggPSA0MDk2OworCWRldi0mZ3Q7bW9kZV9jb25maWcubWF4X2hlaWdodCA9IDQwOTY7CisJ
ZGV2LSZndDttb2RlX2NvbmZpZy5wcmVmZXJyZWRfZGVwdGggPSAzMjsKKwlkZXYtJmd0O21vZGVf
Y29uZmlnLnByZWZlcl9zaGFkb3cgPSAxOworCWRldi0mZ3Q7bW9kZV9jb25maWcuZmJfYmFzZSA9
IGxkZXYtJmd0O3ZyYW1fc3RhcnQ7CisKKwlwY2lfc2V0X2RydmRhdGEoZGV2LSZndDtwZGV2LCBk
ZXYpOworCisJcmV0ID0gbG9vbmdzb25fbW9kZXNldF9pbml0KGxkZXYpOworCWlmIChyZXQpCisJ
CWRldl9lcnIoZGV2LSZndDtkZXYsICJGYXRhbCBlcnJvciBkdXJpbmcgbW9kZXNldCBpbml0OiAl
ZFxuIiwgcmV0KTsKKworCWRybV9rbXNfaGVscGVyX3BvbGxfaW5pdChkZXYpOworCWRybV9tb2Rl
X2NvbmZpZ19yZXNldChkZXYpOworCisJcmV0dXJuIDA7CisKK2VycjoKKwlkcm1fZXJyKGRldiwg
ImZhaWxlZCB0byBpbml0aWFsaXplIGRybSBkcml2ZXI6ICVkXG4iLCByZXQpOworCXJldHVybiBy
ZXQ7Cit9CisKK3N0YXRpYyB2b2lkIGxvb25nc29uX2RybV91bmxvYWQoc3RydWN0IGRybV9kZXZp
Y2UgKmRldikKK3sKKwlkcm1fdnJhbV9oZWxwZXJfcmVsZWFzZV9tbShkZXYpOworCWRybV9tb2Rl
X2NvbmZpZ19jbGVhbnVwKGRldik7CisJZGV2LSZndDtkZXZfcHJpdmF0ZSA9IE5VTEw7CisJZGV2
X3NldF9kcnZkYXRhKGRldi0mZ3Q7ZGV2LCBOVUxMKTsKK30KKworREVGSU5FX0RSTV9HRU1fRk9Q
Uyhmb3BzKTsKKworc3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIGxvb25nc29uX2RybV9kcml2ZXIg
PSB7CisJLmRyaXZlcl9mZWF0dXJlcyA9IERSSVZFUl9NT0RFU0VUIHwgRFJJVkVSX0dFTSB8IERS
SVZFUl9BVE9NSUMsCisJLmZvcHMgPSAmYW1wO2ZvcHMsCisJRFJNX0dFTV9WUkFNX0RSSVZFUiwK
KworCS5uYW1lID0gRFJJVkVSX05BTUUsCisJLmRlc2MgPSBEUklWRVJfREVTQywKKwkuZGF0ZSA9
IERSSVZFUl9EQVRFLAorCS5tYWpvciA9IERSSVZFUl9NQUpPUiwKKwkubWlub3IgPSBEUklWRVJf
TUlOT1IsCit9OworCitzdGF0aWMgaW50IGxvb25nc29uX3BjaV9wcm9iZShzdHJ1Y3QgcGNpX2Rl
diAqcGRldiwKKwkJCSAgICAgIGNvbnN0IHN0cnVjdCBwY2lfZGV2aWNlX2lkICplbnQpCit7CisJ
aW50IHJldDsKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2OworCisJRFJNX0lORk8oIlN0YXJ0IGxv
b25nc29uIGRybSBwcm9iZVxuIik7CisJZGV2ID0gZHJtX2Rldl9hbGxvYygmYW1wO2xvb25nc29u
X2RybV9kcml2ZXIsICZhbXA7cGRldi0mZ3Q7ZGV2KTsKKwlpZiAoSVNfRVJSKGRldikpIHsKKwkJ
RFJNX0VSUk9SKCJmYWlsZWQgdG8gYWxsb2NhdGUgZHJtX2RldmljZVxuIik7CisJCXJldHVybiBQ
VFJfRVJSKGRldik7CisJfQorCisJZGV2LSZndDtwZGV2ID0gcGRldjsKKwlwY2lfc2V0X2RydmRh
dGEocGRldiwgZGV2KTsKKworCXJldCA9IHBjaV9lbmFibGVfZGV2aWNlKHBkZXYpOworCWlmIChy
ZXQpIHsKKwkJZHJtX2VycihkZXYsICJmYWlsZWQgdG8gZW5hYmxlIHBjaSBkZXZpY2U6ICVkXG4i
LCByZXQpOworCQlnb3RvIGVycl9mcmVlOworCX0KKworCXJldCA9IGxvb25nc29uX2RybV9sb2Fk
KGRldiwgMHgwKTsKKwlpZiAocmV0KSB7CisJCWRybV9lcnIoZGV2LCAiZmFpbGVkIHRvIGxvYWQg
bG9vbmdzb246ICVkXG4iLCByZXQpOworCQlnb3RvIGVycl9wZGV2OworCX0KKworCXJldCA9IGRy
bV9kZXZfcmVnaXN0ZXIoZGV2LCAwKTsKKwlpZiAocmV0KSB7CisJCWRybV9lcnIoZGV2LCAiZmFp
bGVkIHRvIHJlZ2lzdGVyIGRydiBmb3IgdXNlcnNwYWNlIGFjY2VzczogJWRcbiIsCisJCQlyZXQp
OworCQlnb3RvIGVycl9wZGV2OworCX0KKworCWRybV9mYmRldl9nZW5lcmljX3NldHVwKGRldiwg
ZGV2LSZndDttb2RlX2NvbmZpZy5wcmVmZXJyZWRfZGVwdGgpOworCisJcmV0dXJuIDA7CisKK2Vy
cl9wZGV2OgorCXBjaV9kaXNhYmxlX2RldmljZShwZGV2KTsKK2Vycl9mcmVlOgorCWRybV9kZXZf
cHV0KGRldik7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZvaWQgbG9vbmdzb25fcGNpX3Jl
bW92ZShzdHJ1Y3QgcGNpX2RldiAqcGRldikKK3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0g
cGNpX2dldF9kcnZkYXRhKHBkZXYpOworCisJZHJtX2Rldl91bnJlZ2lzdGVyKGRldik7CisJbG9v
bmdzb25fZHJtX3VubG9hZChkZXYpOworCWRybV9kZXZfcHV0KGRldik7Cit9CisKK3N0YXRpYyBz
dHJ1Y3QgcGNpX2RldmljZV9pZCBsb29uZ3Nvbl9wY2lfZGV2aWNlc1tdID0geworCXsgUENJX0RF
VklDRShQQ0lfVkVORE9SX0lEX0xPT05HU09OLCBQQ0lfREVWSUNFX0lEX0xPT05HU09OX0RDKSB9
LAorCXswLH0KK307CisKK3N0YXRpYyBzdHJ1Y3QgcGNpX2RyaXZlciBsb29uZ3Nvbl9kcm1fcGNp
X2RyaXZlciA9IHsKKwkubmFtZSA9IERSSVZFUl9OQU1FLAorCS5pZF90YWJsZSA9IGxvb25nc29u
X3BjaV9kZXZpY2VzLAorCS5wcm9iZSA9IGxvb25nc29uX3BjaV9wcm9iZSwKKwkucmVtb3ZlID0g
bG9vbmdzb25fcGNpX3JlbW92ZSwKK307CisKK3N0YXRpYyBpbnQgX19pbml0IGxvb25nc29uX2Ry
bV9pbml0KHZvaWQpCit7CisJcmV0dXJuIHBjaV9yZWdpc3Rlcl9kcml2ZXIoJmFtcDtsb29uZ3Nv
bl9kcm1fcGNpX2RyaXZlcik7Cit9CisKK3N0YXRpYyB2b2lkIF9fZXhpdCBsb29uZ3Nvbl9kcm1f
ZXhpdCh2b2lkKQoreworCXBjaV91bnJlZ2lzdGVyX2RyaXZlcigmYW1wO2xvb25nc29uX2RybV9w
Y2lfZHJpdmVyKTsKK30KKworbW9kdWxlX2luaXQobG9vbmdzb25fZHJtX2luaXQpOworbW9kdWxl
X2V4aXQobG9vbmdzb25fZHJtX2V4aXQpOworCitNT0RVTEVfQVVUSE9SKERSSVZFUl9BVVRIT1Ip
OworTU9EVUxFX0RFU0NSSVBUSU9OKERSSVZFUl9ERVNDKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwg
djIiKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYu
aCBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaApuZXcgZmlsZSBtb2Rl
IDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjQ5OGQxYjA4MmExOQotLS0gL2Rldi9udWxsCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaApAQCAtMCwwICsxLDEz
OSBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb25seSAqLworCisjaWZu
ZGVmIF9fTE9PTkdTT05fRFJWX0hfXworI2RlZmluZSBfX0xPT05HU09OX0RSVl9IX18KKworI2lu
Y2x1ZGUgJmx0O2RybS9kcm1fZHJ2LmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9nZW0uaCZn
dDsKKyNpbmNsdWRlICZsdDtkcm0vZHJtX2ZiX2hlbHBlci5oJmd0OworI2luY2x1ZGUgJmx0O2Ry
bS9kcm1fZm91cmNjLmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9wcm9iZV9oZWxwZXIuaCZn
dDsKKyNpbmNsdWRlICZsdDtkcm0vZHJtX2F0b21pYy5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9k
cm1fYXRvbWljX2hlbHBlci5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9kcm1fZ2VtX2ZyYW1lYnVm
ZmVyX2hlbHBlci5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmgm
Z3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9wbGFuZS5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9k
cm1fcGxhbmVfaGVscGVyLmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9jcnRjLmgmZ3Q7Cisj
aW5jbHVkZSAmbHQ7ZHJtL2RybV9jcnRjX2hlbHBlci5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9k
cm1fY29ubmVjdG9yLmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9lbmNvZGVyLmgmZ3Q7CisK
Ky8qIEdlbmVyYWwgY3VzdG9taXphdGlvbjoKKyAqLworI2RlZmluZSBEUklWRVJfQVVUSE9SICJM
b29uZ3NvbiBncmFwaGljcyBkcml2ZXIgdGVhbSIKKyNkZWZpbmUgRFJJVkVSX05BTUUgImxvb25n
c29uLWRybSIKKyNkZWZpbmUgRFJJVkVSX0RFU0MgIkxvb25nc29uIExTN0EgRFJNIGRyaXZlciIK
KyNkZWZpbmUgRFJJVkVSX0RBVEUgIjIwMjAwOTE1IgorCisjZGVmaW5lIHRvX2xvb25nc29uX2Ny
dGMoeCkgY29udGFpbmVyX29mKHgsIHN0cnVjdCBsb29uZ3Nvbl9jcnRjLCBiYXNlKQorI2RlZmlu
ZSB0b19sb29uZ3Nvbl9lbmNvZGVyKHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3QgbG9vbmdzb25f
ZW5jb2RlciwgYmFzZSkKKworI2RlZmluZSBMUzdBX0NISVBDRkdfUkVHX0JBU0UgKDB4MTAwMTAw
MDApCisjZGVmaW5lIFBDSV9ERVZJQ0VfSURfTE9PTkdTT05fREMgMHg3YTA2CisjZGVmaW5lIFBD
SV9ERVZJQ0VfSURfTE9PTkdTT05fR1BVIDB4N2ExNQorI2RlZmluZSBMUzdBX1BJWF9QTEwgKDB4
MDRiMCkKKyNkZWZpbmUgUkVHX09GRlNFVCAoMHgxMCkKKyNkZWZpbmUgRkJfQ0ZHX1JFRyAoMHgx
MjQwKQorI2RlZmluZSBGQl9BRERSMF9SRUcgKDB4MTI2MCkKKyNkZWZpbmUgRkJfQUREUjFfUkVH
ICgweDE1ODApCisjZGVmaW5lIEZCX1NUUklfUkVHICgweDEyODApCisjZGVmaW5lIEZCX0RJVENG
R19SRUcgKDB4MTM2MCkKKyNkZWZpbmUgRkJfRElUVEFCX0xPX1JFRyAoMHgxMzgwKQorI2RlZmlu
ZSBGQl9ESVRUQUJfSElfUkVHICgweDEzYTApCisjZGVmaW5lIEZCX1BBTkNGR19SRUcgKDB4MTNj
MCkKKyNkZWZpbmUgRkJfUEFOVElNX1JFRyAoMHgxM2UwKQorI2RlZmluZSBGQl9IRElTUExBWV9S
RUcgKDB4MTQwMCkKKyNkZWZpbmUgRkJfSFNZTkNfUkVHICgweDE0MjApCisjZGVmaW5lIEZCX1ZE
SVNQTEFZX1JFRyAoMHgxNDgwKQorI2RlZmluZSBGQl9WU1lOQ19SRUcgKDB4MTRhMCkKKworI2Rl
ZmluZSBDRkdfRk1UIEdFTk1BU0soMiwgMCkKKyNkZWZpbmUgQ0ZHX0ZCU1dJVENIIEJJVCg3KQor
I2RlZmluZSBDRkdfRU5BQkxFIEJJVCg4KQorI2RlZmluZSBDRkdfRkJOVU0gQklUKDExKQorI2Rl
ZmluZSBDRkdfR0FNTUFSIEJJVCgxMikKKyNkZWZpbmUgQ0ZHX1JFU0VUIEJJVCgyMCkKKworI2Rl
ZmluZSBGQl9QQU5DRkdfREVGIDB4ODAwMDEzMTEKKyNkZWZpbmUgRkJfSFNZTkNfUFVMU0UgKDEg
Jmx0OyZsdDsgMzApCisjZGVmaW5lIEZCX1ZTWU5DX1BVTFNFICgxICZsdDsmbHQ7IDMwKQorCisv
KiBQSVggUExMICovCisjZGVmaW5lIExPT1BDX01JTiAyNAorI2RlZmluZSBMT09QQ19NQVggMTYx
CisjZGVmaW5lIEZSRV9SRUZfTUlOIDEyCisjZGVmaW5lIEZSRV9SRUZfTUFYIDMyCisjZGVmaW5l
IERJVl9SRUZfTUlOIDMKKyNkZWZpbmUgRElWX1JFRl9NQVggNQorI2RlZmluZSBQU1RfRElWX01B
WCA2NAorCitzdHJ1Y3QgcGl4X3BsbCB7CisJdTMyIGwyX2RpdjsKKwl1MzIgbDFfbG9vcGM7CisJ
dTMyIGwxX2ZyZWZjOworfTsKKworc3RydWN0IGxvb25nc29uX2NydGMgeworCXN0cnVjdCBkcm1f
Y3J0YyBiYXNlOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJdTMyIGNydGNfaWQ7
CisJdTMyIHJlZ19vZmZzZXQ7CisJdTMyIGNmZ19yZWc7CisJc3RydWN0IGRybV9wbGFuZSAqcGxh
bmU7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciB7CisJc3RydWN0IGRybV9lbmNvZGVy
IGJhc2U7CisJc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldjsKKwlzdHJ1Y3QgbG9vbmdzb25f
Y3J0YyAqbGNydGM7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fY29ubmVjdG9yIHsKKwlzdHJ1Y3Qg
ZHJtX2Nvbm5lY3RvciBiYXNlOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJdTE2
IGlkOworCXUzMiB0eXBlOworfTsKKworc3RydWN0IGxvb25nc29uX21vZGVfaW5mbyB7CisJc3Ry
dWN0IGxvb25nc29uX2RldmljZSAqbGRldjsKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqY3J0YzsK
KwlzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciAqZW5jb2RlcjsKKwlzdHJ1Y3QgbG9vbmdzb25fY29u
bmVjdG9yICpjb25uZWN0b3I7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlIHsKKwlzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2OworCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZTsKKwor
CXZvaWQgX19pb21lbSAqbW1pbzsKKwl2b2lkIF9faW9tZW0gKmlvOworCXUzMiB2cmFtX3N0YXJ0
OworCXUzMiB2cmFtX3NpemU7CisKKwl1MzIgbnVtX2NydGM7CisJc3RydWN0IGxvb25nc29uX21v
ZGVfaW5mbyBtb2RlX2luZm9bMl07CisJc3RydWN0IHBjaV9kZXYgKmdwdV9wZGV2OyAvKiBMUzdB
IGdwdSBkZXZpY2UgaW5mbyAqLworfTsKKworLyogY3J0YyAqLworaW50IGxvb25nc29uX2NydGNf
aW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpOworCisvKiBjb25u
ZWN0b3IgKi8KK2ludCBsb29uZ3Nvbl9jb25uZWN0b3JfaW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2
aWNlICpsZGV2LCBpbnQgaW5kZXgpOworCisvKiBlbmNvZGVyICovCitpbnQgbG9vbmdzb25fZW5j
b2Rlcl9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCk7CisKKy8q
IHBsYW5lICovCitpbnQgbG9vbmdzb25fcGxhbmVfaW5pdChzdHJ1Y3QgbG9vbmdzb25fY3J0YyAq
bGNydGMpOworCisvKiBkZXZpY2UgKi8KK3UzMiBsb29uZ3Nvbl9ncHVfb2Zmc2V0KHN0cnVjdCBk
cm1fcGxhbmVfc3RhdGUgKnN0YXRlKTsKK3UzMiBsczdhX21tX3JyZWcoc3RydWN0IGxvb25nc29u
X2RldmljZSAqbGRldiwgdTMyIG9mZnNldCk7Cit2b2lkIGxzN2FfbW1fd3JlZyhzdHJ1Y3QgbG9v
bmdzb25fZGV2aWNlICpsZGV2LCB1MzIgb2Zmc2V0LCB1MzIgdmFsKTsKK3UzMiBsczdhX2lvX3Jy
ZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCk7Cit2b2lkIGxzN2Ff
aW9fd3JlZyhzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCB1MzIgb2Zmc2V0LCB1MzIgdmFs
KTsKKworI2VuZGlmIC8qIF9fTE9PTkdTT05fRFJWX0hfXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2VuY29kZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9s
b29uZ3Nvbi9sb29uZ3Nvbl9lbmNvZGVyLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAw
MDAwMDAwMDAwLi4yMDAyY2VlMDAzMDMKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vbG9vbmdzb24vbG9vbmdzb25fZW5jb2Rlci5jCkBAIC0wLDAgKzEsMzcgQEAKKy8vIFNQRFgt
TGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCisKKyNpbmNsdWRlICJsb29uZ3Nv
bl9kcnYuaCIKKworc3RhdGljIHZvaWQgbG9vbmdzb25fZW5jb2Rlcl9kZXN0cm95KHN0cnVjdCBk
cm1fZW5jb2RlciAqZW5jb2RlcikKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciAqbGVuY29k
ZXIgPSB0b19sb29uZ3Nvbl9lbmNvZGVyKGVuY29kZXIpOworCisJZHJtX2VuY29kZXJfY2xlYW51
cChlbmNvZGVyKTsKKwlrZnJlZShsZW5jb2Rlcik7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZHJtX2VuY29kZXJfZnVuY3MgbG9vbmdzb25fZW5jb2Rlcl9mdW5jcyA9IHsKKwkuZGVzdHJveSA9
IGxvb25nc29uX2VuY29kZXJfZGVzdHJveSwKK307CisKK2ludCBsb29uZ3Nvbl9lbmNvZGVyX2lu
aXQoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgaW50IGluZGV4KQoreworCXN0cnVjdCBk
cm1fZW5jb2RlciAqZW5jb2RlcjsKKwlzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciAqbGVuY29kZXI7
CisKKwlsZW5jb2RlciA9IGt6YWxsb2Moc2l6ZW9mKHN0cnVjdCBsb29uZ3Nvbl9lbmNvZGVyKSwg
R0ZQX0tFUk5FTCk7CisJaWYgKCFsZW5jb2RlcikKKwkJcmV0dXJuIC0xOworCisJbGVuY29kZXIt
Jmd0O2xjcnRjID0gbGRldi0mZ3Q7bW9kZV9pbmZvW2luZGV4XS5jcnRjOworCWxlbmNvZGVyLSZn
dDtsZGV2ID0gbGRldjsKKwllbmNvZGVyID0gJmFtcDtsZW5jb2Rlci0mZ3Q7YmFzZTsKKwllbmNv
ZGVyLSZndDtwb3NzaWJsZV9jcnRjcyA9IDEgJmx0OyZsdDsgaW5kZXg7CisKKwlkcm1fZW5jb2Rl
cl9pbml0KGxkZXYtJmd0O2RldiwgZW5jb2RlciwgJmFtcDtsb29uZ3Nvbl9lbmNvZGVyX2Z1bmNz
LAorCQkJIERSTV9NT0RFX0VOQ09ERVJfREFDLCBOVUxMKTsKKworCWxkZXYtJmd0O21vZGVfaW5m
b1tpbmRleF0uZW5jb2RlciA9IGxlbmNvZGVyOworCisJcmV0dXJuIDA7Cit9CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fcGxhbmUuYyBiL2RyaXZlcnMvZ3B1
L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9wbGFuZS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAwMDAwMC4uYjhjMjQ3ZDFjZTA5Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2xvb25nc29uL2xvb25nc29uX3BsYW5lLmMKQEAgLTAsMCArMSwxMDIgQEAKKy8vIFNQ
RFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCisKKyNpbmNsdWRlICJsb29u
Z3Nvbl9kcnYuaCIKKworc3RhdGljIHZvaWQgbG9vbmdzb25fcGxhbmVfYXRvbWljX3VwZGF0ZShz
dHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwKKwkJCQkJIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpz
dGF0ZSkKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGM7CisJc3RydWN0IGxvb25nc29u
X2RldmljZSAqbGRldjsKKwlzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpsc3RhdGUgPSBwbGFuZS0m
Z3Q7c3RhdGU7CisJdTMyIGdwdV9hZGRyID0gMDsKKwl1MzIgZmJfYWRkciA9IDA7CisJdTMyIHJl
Z192YWwgPSAwOworCXUzMiByZWdfb2Zmc2V0OworCXUzMiBwaXRjaDsKKwl1OCBkZXB0aDsKKwl1
MzIgeCwgeTsKKworCWlmICghbHN0YXRlLSZndDtjcnRjIHx8ICFsc3RhdGUtJmd0O2ZiKQorCQly
ZXR1cm47CisKKwlwaXRjaCA9IGxzdGF0ZS0mZ3Q7ZmItJmd0O3BpdGNoZXNbMF07CisJbGNydGMg
PSB0b19sb29uZ3Nvbl9jcnRjKGxzdGF0ZS0mZ3Q7Y3J0Yyk7CisJbGRldiA9IGxjcnRjLSZndDts
ZGV2OworCXJlZ19vZmZzZXQgPSBsY3J0Yy0mZ3Q7cmVnX29mZnNldDsKKwl4ID0gbHN0YXRlLSZn
dDtjcnRjLSZndDt4OworCXkgPSBsc3RhdGUtJmd0O2NydGMtJmd0O3k7CisJZGVwdGggPSBsc3Rh
dGUtJmd0O2ZiLSZndDtmb3JtYXQtJmd0O2NwcFswXSAmbHQ7Jmx0OyAzOworCisJZ3B1X2FkZHIg
PSBsb29uZ3Nvbl9ncHVfb2Zmc2V0KGxzdGF0ZSk7CisJcmVnX3ZhbCA9IChwaXRjaCArIDI1NSkg
JmFtcDsgfjI1NTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfU1RSSV9SRUcgKyByZWdfb2Zmc2V0
LCByZWdfdmFsKTsKKworCXN3aXRjaCAoZGVwdGgpIHsKKwljYXNlIDEyIC4uLiAxNjoKKwkJZmJf
YWRkciA9IGdwdV9hZGRyICsgeSAqIHBpdGNoICsgQUxJR04oeCwgNjQpICogMjsKKwkJYnJlYWs7
CisJY2FzZSAyNCAuLi4gMzI6CisJZGVmYXVsdDoKKwkJZmJfYWRkciA9IGdwdV9hZGRyICsgeSAq
IHBpdGNoICsgQUxJR04oeCwgNjQpICogNDsKKwkJYnJlYWs7CisJfQorCisJbHM3YV9tbV93cmVn
KGxkZXYsIEZCX0FERFIwX1JFRyArIHJlZ19vZmZzZXQsIGZiX2FkZHIpOworCWxzN2FfbW1fd3Jl
ZyhsZGV2LCBGQl9BRERSMV9SRUcgKyByZWdfb2Zmc2V0LCBmYl9hZGRyKTsKKwlyZWdfdmFsID0g
bGNydGMtJmd0O2NmZ19yZWcgfCBDRkdfRU5BQkxFOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9D
RkdfUkVHICsgcmVnX29mZnNldCwgcmVnX3ZhbCk7Cit9CisKK3N0YXRpYyBjb25zdCB1aW50MzJf
dCBsb29uZ3Nvbl9mb3JtYXRzW10gPSB7CisJRFJNX0ZPUk1BVF9SR0I1NjUsCisJRFJNX0ZPUk1B
VF9SR0I4ODgsCisJRFJNX0ZPUk1BVF9YUkdCODg4OCwKKwlEUk1fRk9STUFUX0FSR0I4ODg4LAor
fTsKKworc3RhdGljIGNvbnN0IHVpbnQ2NF90IGxvb25nc29uX2Zvcm1hdF9tb2RpZmllcnNbXSA9
IHsgRFJNX0ZPUk1BVF9NT0RfTElORUFSLAorCQkJCQkJICAgICAgRFJNX0ZPUk1BVF9NT0RfSU5W
QUxJRCB9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9wbGFuZV9mdW5jcyBsb29uZ3Nvbl9w
bGFuZV9mdW5jcyA9IHsKKwkuYXRvbWljX2R1cGxpY2F0ZV9zdGF0ZSA9IGRybV9hdG9taWNfaGVs
cGVyX3BsYW5lX2R1cGxpY2F0ZV9zdGF0ZSwKKwkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1f
YXRvbWljX2hlbHBlcl9wbGFuZV9kZXN0cm95X3N0YXRlLAorCS5kZXN0cm95ID0gZHJtX3BsYW5l
X2NsZWFudXAsCisJLmRpc2FibGVfcGxhbmUgPSBkcm1fYXRvbWljX2hlbHBlcl9kaXNhYmxlX3Bs
YW5lLAorCS5yZXNldCA9IGRybV9hdG9taWNfaGVscGVyX3BsYW5lX3Jlc2V0LAorCS51cGRhdGVf
cGxhbmUgPSBkcm1fYXRvbWljX2hlbHBlcl91cGRhdGVfcGxhbmUsCit9OworCitzdGF0aWMgY29u
c3Qgc3RydWN0IGRybV9wbGFuZV9oZWxwZXJfZnVuY3MgbG9vbmdzb25fcGxhbmVfaGVscGVyX2Z1
bmNzID0geworCS5wcmVwYXJlX2ZiCT0gZHJtX2dlbV92cmFtX3BsYW5lX2hlbHBlcl9wcmVwYXJl
X2ZiLAorCS5jbGVhbnVwX2ZiCT0gZHJtX2dlbV92cmFtX3BsYW5lX2hlbHBlcl9jbGVhbnVwX2Zi
LAorCS5hdG9taWNfdXBkYXRlID0gbG9vbmdzb25fcGxhbmVfYXRvbWljX3VwZGF0ZSwKK307CisK
K2ludCBsb29uZ3Nvbl9wbGFuZV9pbml0KHN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YykKK3sK
KwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2OworCWludCBjcnRjX2lkOworCWludCByZXQ7
CisKKwlsZGV2ID0gbGNydGMtJmd0O2xkZXY7CisJY3J0Y19pZCA9IGxjcnRjLSZndDtjcnRjX2lk
OworCisJbGNydGMtJmd0O3BsYW5lID0gZGV2bV9remFsbG9jKGxkZXYtJmd0O2Rldi0mZ3Q7ZGV2
LCBzaXplb2YoKmxjcnRjLSZndDtwbGFuZSksCisJCQkJICAgIEdGUF9LRVJORUwpOworCWlmICgh
bGNydGMtJmd0O3BsYW5lKQorCQlyZXR1cm4gLUVOT01FTTsKKworCXJldCA9IGRybV91bml2ZXJz
YWxfcGxhbmVfaW5pdChsZGV2LSZndDtkZXYsIGxjcnRjLSZndDtwbGFuZSwgQklUKGNydGNfaWQp
LAorCQkJCSAgICAgICAmYW1wO2xvb25nc29uX3BsYW5lX2Z1bmNzLCBsb29uZ3Nvbl9mb3JtYXRz
LAorCQkJCSAgICAgICBBUlJBWV9TSVpFKGxvb25nc29uX2Zvcm1hdHMpLAorCQkJCSAgICAgICBs
b29uZ3Nvbl9mb3JtYXRfbW9kaWZpZXJzLAorCQkJCSAgICAgICBEUk1fUExBTkVfVFlQRV9QUklN
QVJZLCBOVUxMKTsKKwlpZiAocmV0KSB7CisJCURSTV9FUlJPUigiZmFpbCB0byBpbml0IHBsYW5l
ZCBjcnRjICVkXG4iLCBjcnRjX2lkKTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlkcm1fcGxhbmVf
aGVscGVyX2FkZChsY3J0Yy0mZ3Q7cGxhbmUsICZhbXA7bG9vbmdzb25fcGxhbmVfaGVscGVyX2Z1
bmNzKTsKKworCXJldHVybiAwOworfQotLSAKMi4zMS4xCjwvcHJlPjwvZGl2Pjxicj48YnI+PHNw
YW4gdGl0bGU9Im5ldGVhc2Vmb290ZXIiPjxwPiZuYnNwOzwvcD48L3NwYW4+
------=_Part_16666_34794156.1622873967309--

