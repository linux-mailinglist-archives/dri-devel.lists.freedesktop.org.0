Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EDAB45E66D
	for <lists+dri-devel@lfdr.de>; Wed,  3 Jul 2019 16:20:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C47B26E148;
	Wed,  3 Jul 2019 14:20:44 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.domeneshop.no (smtp.domeneshop.no
 [IPv6:2a01:5b40:0:3005::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 609CB6E148
 for <dri-devel@lists.freedesktop.org>; Wed,  3 Jul 2019 14:20:43 +0000 (UTC)
Received: from 211.81-166-168.customer.lyse.net ([81.166.168.211]:62867
 helo=[192.168.10.173])
 by smtp.domeneshop.no with esmtpsa (TLS1.2:ECDHE_RSA_AES_128_GCM_SHA256:128)
 (Exim 4.84_2) (envelope-from <noralf@tronnes.org>)
 id 1hig7l-0000WC-Ce; Wed, 03 Jul 2019 16:20:41 +0200
Subject: Re: [PATCH 3/5] drm/ast: Replace struct ast_fbdev with generic
 framebuffer emulation
To: Thomas Zimmermann <tzimmermann@suse.de>, airlied@redhat.com,
 daniel@ffwll.ch, kraxel@redhat.com, maarten.lankhorst@linux.intel.com,
 maxime.ripard@bootlin.com, sean@poorly.run, sam@ravnborg.org,
 yc_chen@aspeedtech.com
References: <20190703083302.2609-1-tzimmermann@suse.de>
 <20190703083302.2609-4-tzimmermann@suse.de>
From: =?UTF-8?Q?Noralf_Tr=c3=b8nnes?= <noralf@tronnes.org>
Message-ID: <e30060c9-1cd1-2b22-92b6-acefe51b2077@tronnes.org>
Date: Wed, 3 Jul 2019 16:20:39 +0200
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.2
MIME-Version: 1.0
In-Reply-To: <20190703083302.2609-4-tzimmermann@suse.de>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; d=tronnes.org; s=ds201810; 
 h=Content-Transfer-Encoding:Content-Type:In-Reply-To:MIME-Version:Date:Message-ID:From:References:Cc:To:Subject;
 bh=iBKC7OVvbbW+wXke58rw49iWAD6flAUI8ygolRpdjsk=; 
 b=Uz8kGcaDp+ZddGriA/OUBqUE8ekIG/NUdl5vtF/Y3WS8AUBzc0NzC1Kz064edSzYiIq9Vit1mIJP0CTGU8O/eJCLTXWc2dliF/M7R1c51JMvAm04W4C8RBw4tQaanb1tItf3rxIZgdD8FgiOU5i37ckr25IDd1WIDRJi25uPLmgHsiHV3BMjWrwUCmghJVs7W4DVtA7kmO9qg1SD+EpdoY54TVTd+bd2qWllOrnVGcFfmnp2/cch15K6vDEbHf3HfKq/PuMYv6BFPccjaSOV52wf05yV0OcGnZIbVnF+44V7O7Ou+Lf5vKHsJ+QN+VdlQY5mDcDZ8xX9Hu3ySmM7Tw==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org, virtualization@lists.linux-foundation.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

CgpEZW4gMDMuMDcuMjAxOSAxMC4zMywgc2tyZXYgVGhvbWFzIFppbW1lcm1hbm46Cj4gVGhpcyBw
YXRjaCByZXBsYWNlcyBhc3QncyBmcmFtZWJ1ZmZlciBjb25zb2xlIHdpdGggRFJNJ3MgZ2VuZXJp
Ywo+IGltcGxlbWVtdGF0aW9uLiBBbGwgcmVzcGVjdGl2ZSBjb2RlIGlzIGJlaW5nIHJlbW92ZWQg
ZnJvbSB0aGUgZHJpdmVyLgo+IAo+IFRoZSBjb25zb2xlIGlzIHNldCB1cCB3aXRoIGEgc2hhZG93
IGJ1ZmZlci4gVGhlIGFjdHVhbCBidWZmZXIgb2JqZWN0IGlzCj4gbm90IHBlcm1hbmVudGx5IHBp
bm5lZCBpbiB2aWRlbyByYW0sIGJ1dCBqdXN0IGFub3RoZXIgYnVmZmVyIG9iamVjdCB0aGF0Cj4g
dGhlIGRyaXZlciBtb3ZlcyBpbiBhbmQgb3V0IG9mIHZyYW0gYXMgbmVjZXNzYXJ5LiBUaGUgZHJp
dmVyJ3MgZnVuY3Rpb24KPiBhc3RfY3J0Y19kb19zZXRfYmFzZSgpIHVzZWQgdG8gY29udGFpbiBz
cGVjaWFsIGhhbmRsaW5nIGZvciB0aGUgZnJhbWVidWZmZXIKPiBjb25zb2xlLiBXaXRoIHRoZSBu
ZXcgZ2VuZXJpYyBmcmFtZWJ1ZmZlciwgdGhlIGRyaXZlciBkb2VzIG5vdCBuZWVkIHRoaXMKPiBj
b2RlIGFuIGxvbmdlci4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBUaG9tYXMgWmltbWVybWFubiA8dHpp
bW1lcm1hbm5Ac3VzZS5kZT4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2FzdC9NYWtlZmlsZSAg
IHwgICAyICstCj4gIGRyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X2Rydi5jICB8ICAyMiArKy0KPiAg
ZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfZHJ2LmggIHwgIDE3IC0tCj4gIGRyaXZlcnMvZ3B1L2Ry
bS9hc3QvYXN0X2ZiLmMgICB8IDM0MSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
PiAgZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbWFpbi5jIHwgIDMwICsrLQo+ICBkcml2ZXJzL2dw
dS9kcm0vYXN0L2FzdF9tb2RlLmMgfCAgMjEgLS0KPiAgNiBmaWxlcyBjaGFuZ2VkLCA0MSBpbnNl
cnRpb25zKCspLCAzOTIgZGVsZXRpb25zKC0pCj4gIGRlbGV0ZSBtb2RlIDEwMDY0NCBkcml2ZXJz
L2dwdS9kcm0vYXN0L2FzdF9mYi5jCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
c3QvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vYXN0L01ha2VmaWxlCj4gaW5kZXggYjA4NmRh
ZTE3MDEzLi41NjFmN2M0MTk5ZTQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FzdC9N
YWtlZmlsZQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hc3QvTWFrZWZpbGUKPiBAQCAtMyw2ICsz
LDYgQEAKPiAgIyBNYWtlZmlsZSBmb3IgdGhlIGRybSBkZXZpY2UgZHJpdmVyLiAgVGhpcyBkcml2
ZXIgcHJvdmlkZXMgc3VwcG9ydCBmb3IgdGhlCj4gICMgRGlyZWN0IFJlbmRlcmluZyBJbmZyYXN0
cnVjdHVyZSAoRFJJKSBpbiBYRnJlZTg2IDQuMS4wIGFuZCBoaWdoZXIuCj4gIAo+IC1hc3QteSA6
PSBhc3RfZHJ2Lm8gYXN0X21haW4ubyBhc3RfbW9kZS5vIGFzdF9mYi5vIGFzdF90dG0ubyBhc3Rf
cG9zdC5vIGFzdF9kcDUwMS5vCj4gK2FzdC15IDo9IGFzdF9kcnYubyBhc3RfbWFpbi5vIGFzdF9t
b2RlLm8gYXN0X3R0bS5vIGFzdF9wb3N0Lm8gYXN0X2RwNTAxLm8KPiAgCj4gIG9iai0kKENPTkZJ
R19EUk1fQVNUKSA6PSBhc3Qubwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYXN0L2Fz
dF9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X2Rydi5jCj4gaW5kZXggMzgxMTk5N2U3
OGM0Li43NWY1NWFjMWEyMTggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FzdC9hc3Rf
ZHJ2LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9kcnYuYwo+IEBAIC0xMDMsMjUg
KzEwMywyOSBAQCBzdGF0aWMgaW50IGFzdF9kcm1fZnJlZXplKHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYpCj4gIAo+ICAJcGNpX3NhdmVfc3RhdGUoZGV2LT5wZGV2KTsKPiAgCj4gLQljb25zb2xlX2xv
Y2soKTsKPiAtCWFzdF9mYmRldl9zZXRfc3VzcGVuZChkZXYsIDEpOwo+IC0JY29uc29sZV91bmxv
Y2soKTsKPiArCWlmIChkZXYtPmZiX2hlbHBlcikgewo+ICsJCWNvbnNvbGVfbG9jaygpOwo+ICsJ
CWRybV9mYl9oZWxwZXJfc2V0X3N1c3BlbmQoZGV2LT5mYl9oZWxwZXIsIDEpOwo+ICsJCWNvbnNv
bGVfdW5sb2NrKCk7Cj4gKwl9CgpZb3UgY2FuIGNhbGwgZHJtX2ZiX2hlbHBlcl9zZXRfc3VzcGVu
ZF91bmxvY2tlZCgpIHVuY29uZGl0aW9uYWxseSBoZXJlCmFuZCBpdCB3aWxsIGRvIHRoZSBOVUxM
IGNoZWNrIGFuZCBsb2NraW5nIGZvciB5b3UuCgo+ICsKPiAgCXJldHVybiAwOwo+ICB9Cj4gIAo+
ICBzdGF0aWMgaW50IGFzdF9kcm1fdGhhdyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQo+ICB7Cj4g
LQlpbnQgZXJyb3IgPSAwOwo+IC0KPiAgCWFzdF9wb3N0X2dwdShkZXYpOwo+ICAKPiAgCWRybV9t
b2RlX2NvbmZpZ19yZXNldChkZXYpOwo+ICAJZHJtX2hlbHBlcl9yZXN1bWVfZm9yY2VfbW9kZShk
ZXYpOwo+ICAKPiAtCWNvbnNvbGVfbG9jaygpOwo+IC0JYXN0X2ZiZGV2X3NldF9zdXNwZW5kKGRl
diwgMCk7Cj4gLQljb25zb2xlX3VubG9jaygpOwo+IC0JcmV0dXJuIGVycm9yOwo+ICsJaWYgKGRl
di0+ZmJfaGVscGVyKSB7Cj4gKwkJY29uc29sZV9sb2NrKCk7Cj4gKwkJZHJtX2ZiX2hlbHBlcl9z
ZXRfc3VzcGVuZChkZXYtPmZiX2hlbHBlciwgMCk7Cj4gKwkJY29uc29sZV91bmxvY2soKTsKPiAr
CX0KClNhbWUgaGVyZS4KCldpdGggdGhhdDoKCkFja2VkLWJ5OiBOb3JhbGYgVHLDuG5uZXMgPG5v
cmFsZkB0cm9ubmVzLm9yZz4KCj4gKwo+ICsJcmV0dXJuIDA7Cj4gIH0KPiAgCj4gIHN0YXRpYyBp
bnQgYXN0X2RybV9yZXN1bWUoc3RydWN0IGRybV9kZXZpY2UgKmRldikKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9k
cnYuaAo+IGluZGV4IGNhNzk0YTNmY2Y4Zi4uOTA3ZDc0ODBiN2JhIDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hc3QvYXN0X2Rydi5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FzdC9h
c3RfZHJ2LmgKPiBAQCAtODEsOCArODEsNiBAQCBlbnVtIGFzdF90eF9jaGlwIHsKPiAgI2RlZmlu
ZSBBU1RfRFJBTV80R3gxNiAgIDcKPiAgI2RlZmluZSBBU1RfRFJBTV84R3gxNiAgIDgKPiAgCj4g
LXN0cnVjdCBhc3RfZmJkZXY7Cj4gLQo+ICBzdHJ1Y3QgYXN0X3ByaXZhdGUgewo+ICAJc3RydWN0
IGRybV9kZXZpY2UgKmRldjsKPiAgCj4gQEAgLTk2LDggKzk0LDYgQEAgc3RydWN0IGFzdF9wcml2
YXRlIHsKPiAgCXVpbnQzMl90IG1jbGs7Cj4gIAl1aW50MzJfdCB2cmFtX3NpemU7Cj4gIAo+IC0J
c3RydWN0IGFzdF9mYmRldiAqZmJkZXY7Cj4gLQo+ICAJaW50IGZiX210cnI7Cj4gIAo+ICAJc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpjdXJzb3JfY2FjaGU7Cj4gQEAgLTIzOSwxNCArMjM1LDYgQEAg
c3RydWN0IGFzdF9lbmNvZGVyIHsKPiAgCXN0cnVjdCBkcm1fZW5jb2RlciBiYXNlOwo+ICB9Owo+
ICAKPiAtc3RydWN0IGFzdF9mYmRldiB7Cj4gLQlzdHJ1Y3QgZHJtX2ZiX2hlbHBlciBoZWxwZXI7
IC8qIG11c3QgYmUgZmlyc3QgKi8KPiAtCXZvaWQgKnN5c3JhbTsKPiAtCWludCBzaXplOwo+IC0J
aW50IHgxLCB5MSwgeDIsIHkyOyAvKiBkaXJ0eSByZWN0ICovCj4gLQlzcGlubG9ja190IGRpcnR5
X2xvY2s7Cj4gLX07Cj4gLQo+ICAjZGVmaW5lIHRvX2FzdF9jcnRjKHgpIGNvbnRhaW5lcl9vZih4
LCBzdHJ1Y3QgYXN0X2NydGMsIGJhc2UpCj4gICNkZWZpbmUgdG9fYXN0X2Nvbm5lY3Rvcih4KSBj
b250YWluZXJfb2YoeCwgc3RydWN0IGFzdF9jb25uZWN0b3IsIGJhc2UpCj4gICNkZWZpbmUgdG9f
YXN0X2VuY29kZXIoeCkgY29udGFpbmVyX29mKHgsIHN0cnVjdCBhc3RfZW5jb2RlciwgYmFzZSkK
PiBAQCAtMjg5LDExICsyNzcsNiBAQCBzdHJ1Y3QgYXN0X3ZiaW9zX21vZGVfaW5mbyB7Cj4gIGV4
dGVybiBpbnQgYXN0X21vZGVfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKPiAgZXh0ZXJu
IHZvaWQgYXN0X21vZGVfZmluaShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKPiAgCj4gLWludCBh
c3RfZmJkZXZfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKPiAtdm9pZCBhc3RfZmJkZXZf
ZmluaShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKPiAtdm9pZCBhc3RfZmJkZXZfc2V0X3N1c3Bl
bmQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgaW50IHN0YXRlKTsKPiAtdm9pZCBhc3RfZmJkZXZf
c2V0X2Jhc2Uoc3RydWN0IGFzdF9wcml2YXRlICphc3QsIHVuc2lnbmVkIGxvbmcgZ3B1X2FkZHIp
Owo+IC0KPiAgI2RlZmluZSBBU1RfTU1fQUxJR05fU0hJRlQgNAo+ICAjZGVmaW5lIEFTVF9NTV9B
TElHTl9NQVNLICgoMSA8PCBBU1RfTU1fQUxJR05fU0hJRlQpIC0gMSkKPiAgCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X2ZiLmMgYi9kcml2ZXJzL2dwdS9kcm0vYXN0L2Fz
dF9mYi5jCj4gZGVsZXRlZCBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggYTg0OWU1OGI0MGJjLi4w
MDAwMDAwMDAwMDAKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9mYi5jCj4gKysrIC9k
ZXYvbnVsbAo+IEBAIC0xLDM0MSArMCwwIEBACj4gLS8qCj4gLSAqIENvcHlyaWdodCAyMDEyIFJl
ZCBIYXQgSW5jLgo+IC0gKgo+IC0gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVl
IG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQo+IC0gKiBjb3B5IG9mIHRoaXMg
c29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCj4gLSAqICJT
b2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBp
bmNsdWRpbmcKPiAtICogd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5
LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAo+IC0gKiBkaXN0cmlidXRlLCBzdWIgbGljZW5zZSwg
YW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvCj4gLSAqIHBlcm1pdCBw
ZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVj
dCB0bwo+IC0gKiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6Cj4gLSAqCj4gLSAqIFRIRSBTT0ZU
V0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBF
WFBSRVNTIE9SCj4gLSAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhF
IFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAo+IC0gKiBGSVRORVNTIEZPUiBBIFBBUlRJ
Q1VMQVIgUFVSUE9TRSBBTkQgTk9OLUlORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwKPiAt
ICogVEhFIENPUFlSSUdIVCBIT0xERVJTLCBBVVRIT1JTIEFORC9PUiBJVFMgU1VQUExJRVJTIEJF
IExJQUJMRSBGT1IgQU5ZIENMQUlNLAo+IC0gKiBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwg
V0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKPiAtICogT1RIRVJXSVNF
LCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJF
IE9SIFRIRQo+IC0gKiBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgo+IC0g
Kgo+IC0gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5v
dGljZSAoaW5jbHVkaW5nIHRoZQo+IC0gKiBuZXh0IHBhcmFncmFwaCkgc2hhbGwgYmUgaW5jbHVk
ZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucwo+IC0gKiBvZiB0aGUgU29m
dHdhcmUuCj4gLSAqCj4gLSAqLwo+IC0vKgo+IC0gKiBBdXRob3JzOiBEYXZlIEFpcmxpZSA8YWly
bGllZEByZWRoYXQuY29tPgo+IC0gKi8KPiAtI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgo+IC0j
aW5jbHVkZSA8bGludXgva2VybmVsLmg+Cj4gLSNpbmNsdWRlIDxsaW51eC9lcnJuby5oPgo+IC0j
aW5jbHVkZSA8bGludXgvc3RyaW5nLmg+Cj4gLSNpbmNsdWRlIDxsaW51eC9tbS5oPgo+IC0jaW5j
bHVkZSA8bGludXgvdHR5Lmg+Cj4gLSNpbmNsdWRlIDxsaW51eC9zeXNycS5oPgo+IC0jaW5jbHVk
ZSA8bGludXgvZGVsYXkuaD4KPiAtI2luY2x1ZGUgPGxpbnV4L2luaXQuaD4KPiAtCj4gLQo+IC0j
aW5jbHVkZSA8ZHJtL2RybVAuaD4KPiAtI2luY2x1ZGUgPGRybS9kcm1fY3J0Yy5oPgo+IC0jaW5j
bHVkZSA8ZHJtL2RybV9jcnRjX2hlbHBlci5oPgo+IC0jaW5jbHVkZSA8ZHJtL2RybV9mYl9oZWxw
ZXIuaD4KPiAtI2luY2x1ZGUgPGRybS9kcm1fZ2VtX2ZyYW1lYnVmZmVyX2hlbHBlci5oPgo+IC0j
aW5jbHVkZSA8ZHJtL2RybV91dGlsLmg+Cj4gLQo+IC0jaW5jbHVkZSAiYXN0X2Rydi5oIgo+IC0K
PiAtc3RhdGljIHZvaWQgYXN0X2RpcnR5X3VwZGF0ZShzdHJ1Y3QgYXN0X2ZiZGV2ICphZmJkZXYs
Cj4gLQkJCSAgICAgaW50IHgsIGludCB5LCBpbnQgd2lkdGgsIGludCBoZWlnaHQpCj4gLXsKPiAt
CWludCBpOwo+IC0Jc3RydWN0IGRybV9nZW1fdnJhbV9vYmplY3QgKmdibzsKPiAtCWludCBzcmNf
b2Zmc2V0LCBkc3Rfb2Zmc2V0Owo+IC0JaW50IHJldDsKPiAtCXU4ICpkc3Q7Cj4gLQlib29sIHVu
bWFwID0gZmFsc2U7Cj4gLQlib29sIHN0b3JlX2Zvcl9sYXRlciA9IGZhbHNlOwo+IC0JaW50IHgy
LCB5MjsKPiAtCXVuc2lnbmVkIGxvbmcgZmxhZ3M7Cj4gLQlzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVy
ICpmYiA9IGFmYmRldi0+aGVscGVyLmZiOwo+IC0JaW50IGJwcCA9IGZiLT5mb3JtYXQtPmNwcFsw
XTsKPiAtCj4gLQlnYm8gPSBkcm1fZ2VtX3ZyYW1fb2ZfZ2VtKGZiLT5vYmpbMF0pOwo+IC0KPiAt
CWlmIChkcm1fY2FuX3NsZWVwKCkpIHsKPiAtCQkvKiBXZSBwaW4gdGhlIEJPIHNvIGl0IHdvbid0
IGJlIG1vdmVkIGR1cmluZyB0aGUKPiAtCQkgKiB1cGRhdGUuIFRoZSBhY3R1YWwgbG9jYXRpb24s
IHZpZGVvIFJBTSBvciBzeXN0ZW0KPiAtCQkgKiBtZW1vcnksIGlzIG5vdCBpbXBvcnRhbnQuCj4g
LQkJICovCj4gLQkJcmV0ID0gZHJtX2dlbV92cmFtX3BpbihnYm8sIDApOwo+IC0JCWlmIChyZXQp
IHsKPiAtCQkJaWYgKHJldCAhPSAtRUJVU1kpCj4gLQkJCQlyZXR1cm47Cj4gLQkJCXN0b3JlX2Zv
cl9sYXRlciA9IHRydWU7Cj4gLQkJfQo+IC0JfSBlbHNlIHsKPiAtCQlzdG9yZV9mb3JfbGF0ZXIg
PSB0cnVlOwo+IC0JfQo+IC0KPiAtCXgyID0geCArIHdpZHRoIC0gMTsKPiAtCXkyID0geSArIGhl
aWdodCAtIDE7Cj4gLQlzcGluX2xvY2tfaXJxc2F2ZSgmYWZiZGV2LT5kaXJ0eV9sb2NrLCBmbGFn
cyk7Cj4gLQo+IC0JaWYgKGFmYmRldi0+eTEgPCB5KQo+IC0JCXkgPSBhZmJkZXYtPnkxOwo+IC0J
aWYgKGFmYmRldi0+eTIgPiB5MikKPiAtCQl5MiA9IGFmYmRldi0+eTI7Cj4gLQlpZiAoYWZiZGV2
LT54MSA8IHgpCj4gLQkJeCA9IGFmYmRldi0+eDE7Cj4gLQlpZiAoYWZiZGV2LT54MiA+IHgyKQo+
IC0JCXgyID0gYWZiZGV2LT54MjsKPiAtCj4gLQlpZiAoc3RvcmVfZm9yX2xhdGVyKSB7Cj4gLQkJ
YWZiZGV2LT54MSA9IHg7Cj4gLQkJYWZiZGV2LT54MiA9IHgyOwo+IC0JCWFmYmRldi0+eTEgPSB5
Owo+IC0JCWFmYmRldi0+eTIgPSB5MjsKPiAtCQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZhZmJk
ZXYtPmRpcnR5X2xvY2ssIGZsYWdzKTsKPiAtCQlyZXR1cm47Cj4gLQl9Cj4gLQo+IC0JYWZiZGV2
LT54MSA9IGFmYmRldi0+eTEgPSBJTlRfTUFYOwo+IC0JYWZiZGV2LT54MiA9IGFmYmRldi0+eTIg
PSAwOwo+IC0Jc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmYWZiZGV2LT5kaXJ0eV9sb2NrLCBmbGFn
cyk7Cj4gLQo+IC0JZHN0ID0gZHJtX2dlbV92cmFtX2ttYXAoZ2JvLCBmYWxzZSwgTlVMTCk7Cj4g
LQlpZiAoSVNfRVJSKGRzdCkpIHsKPiAtCQlEUk1fRVJST1IoImZhaWxlZCB0byBrbWFwIGZiIHVw
ZGF0ZXNcbiIpOwo+IC0JCWdvdG8gb3V0Owo+IC0JfSBlbHNlIGlmICghZHN0KSB7Cj4gLQkJZHN0
ID0gZHJtX2dlbV92cmFtX2ttYXAoZ2JvLCB0cnVlLCBOVUxMKTsKPiAtCQlpZiAoSVNfRVJSKGRz
dCkpIHsKPiAtCQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8ga21hcCBmYiB1cGRhdGVzXG4iKTsKPiAt
CQkJZ290byBvdXQ7Cj4gLQkJfQo+IC0JCXVubWFwID0gdHJ1ZTsKPiAtCX0KPiAtCj4gLQlmb3Ig
KGkgPSB5OyBpIDw9IHkyOyBpKyspIHsKPiAtCQkvKiBhc3N1bWUgZXF1YWwgc3RyaWRlIGZvciBu
b3cgKi8KPiAtCQlzcmNfb2Zmc2V0ID0gZHN0X29mZnNldCA9IGkgKiBmYi0+cGl0Y2hlc1swXSAr
ICh4ICogYnBwKTsKPiAtCQltZW1jcHlfdG9pbyhkc3QgKyBkc3Rfb2Zmc2V0LCBhZmJkZXYtPnN5
c3JhbSArIHNyY19vZmZzZXQsCj4gLQkJCSAgICAoeDIgLSB4ICsgMSkgKiBicHApOwo+IC0JfQo+
IC0KPiAtCWlmICh1bm1hcCkKPiAtCQlkcm1fZ2VtX3ZyYW1fa3VubWFwKGdibyk7Cj4gLQo+IC1v
dXQ6Cj4gLQlkcm1fZ2VtX3ZyYW1fdW5waW4oZ2JvKTsKPiAtfQo+IC0KPiAtc3RhdGljIHZvaWQg
YXN0X2ZpbGxyZWN0KHN0cnVjdCBmYl9pbmZvICppbmZvLAo+IC0JCQkgY29uc3Qgc3RydWN0IGZi
X2ZpbGxyZWN0ICpyZWN0KQo+IC17Cj4gLQlzdHJ1Y3QgYXN0X2ZiZGV2ICphZmJkZXYgPSBpbmZv
LT5wYXI7Cj4gLQlkcm1fZmJfaGVscGVyX3N5c19maWxscmVjdChpbmZvLCByZWN0KTsKPiAtCWFz
dF9kaXJ0eV91cGRhdGUoYWZiZGV2LCByZWN0LT5keCwgcmVjdC0+ZHksIHJlY3QtPndpZHRoLAo+
IC0JCQkgcmVjdC0+aGVpZ2h0KTsKPiAtfQo+IC0KPiAtc3RhdGljIHZvaWQgYXN0X2NvcHlhcmVh
KHN0cnVjdCBmYl9pbmZvICppbmZvLAo+IC0JCQkgY29uc3Qgc3RydWN0IGZiX2NvcHlhcmVhICph
cmVhKQo+IC17Cj4gLQlzdHJ1Y3QgYXN0X2ZiZGV2ICphZmJkZXYgPSBpbmZvLT5wYXI7Cj4gLQlk
cm1fZmJfaGVscGVyX3N5c19jb3B5YXJlYShpbmZvLCBhcmVhKTsKPiAtCWFzdF9kaXJ0eV91cGRh
dGUoYWZiZGV2LCBhcmVhLT5keCwgYXJlYS0+ZHksIGFyZWEtPndpZHRoLAo+IC0JCQkgYXJlYS0+
aGVpZ2h0KTsKPiAtfQo+IC0KPiAtc3RhdGljIHZvaWQgYXN0X2ltYWdlYmxpdChzdHJ1Y3QgZmJf
aW5mbyAqaW5mbywKPiAtCQkJICBjb25zdCBzdHJ1Y3QgZmJfaW1hZ2UgKmltYWdlKQo+IC17Cj4g
LQlzdHJ1Y3QgYXN0X2ZiZGV2ICphZmJkZXYgPSBpbmZvLT5wYXI7Cj4gLQlkcm1fZmJfaGVscGVy
X3N5c19pbWFnZWJsaXQoaW5mbywgaW1hZ2UpOwo+IC0JYXN0X2RpcnR5X3VwZGF0ZShhZmJkZXYs
IGltYWdlLT5keCwgaW1hZ2UtPmR5LCBpbWFnZS0+d2lkdGgsCj4gLQkJCSBpbWFnZS0+aGVpZ2h0
KTsKPiAtfQo+IC0KPiAtc3RhdGljIHN0cnVjdCBmYl9vcHMgYXN0ZmJfb3BzID0gewo+IC0JLm93
bmVyID0gVEhJU19NT0RVTEUsCj4gLQkuZmJfY2hlY2tfdmFyID0gZHJtX2ZiX2hlbHBlcl9jaGVj
a192YXIsCj4gLQkuZmJfc2V0X3BhciA9IGRybV9mYl9oZWxwZXJfc2V0X3BhciwKPiAtCS5mYl9m
aWxscmVjdCA9IGFzdF9maWxscmVjdCwKPiAtCS5mYl9jb3B5YXJlYSA9IGFzdF9jb3B5YXJlYSwK
PiAtCS5mYl9pbWFnZWJsaXQgPSBhc3RfaW1hZ2VibGl0LAo+IC0JLmZiX3Bhbl9kaXNwbGF5ID0g
ZHJtX2ZiX2hlbHBlcl9wYW5fZGlzcGxheSwKPiAtCS5mYl9ibGFuayA9IGRybV9mYl9oZWxwZXJf
YmxhbmssCj4gLQkuZmJfc2V0Y21hcCA9IGRybV9mYl9oZWxwZXJfc2V0Y21hcCwKPiAtfTsKPiAt
Cj4gLXN0YXRpYyBpbnQgYXN0ZmJfY3JlYXRlX29iamVjdChzdHJ1Y3QgYXN0X2ZiZGV2ICphZmJk
ZXYsCj4gLQkJCSAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX21vZGVfZmJfY21kMiAqbW9kZV9jbWQs
Cj4gLQkJCSAgICAgICBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKipnb2JqX3ApCj4gLXsKPiAtCXN0
cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBhZmJkZXYtPmhlbHBlci5kZXY7Cj4gLQl1MzIgc2l6ZTsK
PiAtCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAqZ29iajsKPiAtCWludCByZXQgPSAwOwo+IC0KPiAt
CXNpemUgPSBtb2RlX2NtZC0+cGl0Y2hlc1swXSAqIG1vZGVfY21kLT5oZWlnaHQ7Cj4gLQlyZXQg
PSBhc3RfZ2VtX2NyZWF0ZShkZXYsIHNpemUsIHRydWUsICZnb2JqKTsKPiAtCWlmIChyZXQpCj4g
LQkJcmV0dXJuIHJldDsKPiAtCj4gLQkqZ29ial9wID0gZ29iajsKPiAtCXJldHVybiByZXQ7Cj4g
LX0KPiAtCj4gLXN0YXRpYyBpbnQgYXN0ZmJfY3JlYXRlKHN0cnVjdCBkcm1fZmJfaGVscGVyICpo
ZWxwZXIsCj4gLQkJCXN0cnVjdCBkcm1fZmJfaGVscGVyX3N1cmZhY2Vfc2l6ZSAqc2l6ZXMpCj4g
LXsKPiAtCXN0cnVjdCBhc3RfZmJkZXYgKmFmYmRldiA9Cj4gLQkJY29udGFpbmVyX29mKGhlbHBl
ciwgc3RydWN0IGFzdF9mYmRldiwgaGVscGVyKTsKPiAtCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYg
PSBhZmJkZXYtPmhlbHBlci5kZXY7Cj4gLQlzdHJ1Y3QgZHJtX21vZGVfZmJfY21kMiBtb2RlX2Nt
ZDsKPiAtCXN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiOwo+IC0Jc3RydWN0IGZiX2luZm8gKmlu
Zm87Cj4gLQlpbnQgc2l6ZSwgcmV0Owo+IC0Jdm9pZCAqc3lzcmFtOwo+IC0Jc3RydWN0IGRybV9n
ZW1fb2JqZWN0ICpnb2JqID0gTlVMTDsKPiAtCW1vZGVfY21kLndpZHRoID0gc2l6ZXMtPnN1cmZh
Y2Vfd2lkdGg7Cj4gLQltb2RlX2NtZC5oZWlnaHQgPSBzaXplcy0+c3VyZmFjZV9oZWlnaHQ7Cj4g
LQltb2RlX2NtZC5waXRjaGVzWzBdID0gbW9kZV9jbWQud2lkdGggKiAoKHNpemVzLT5zdXJmYWNl
X2JwcCArIDcpLzgpOwo+IC0KPiAtCW1vZGVfY21kLnBpeGVsX2Zvcm1hdCA9IGRybV9tb2RlX2xl
Z2FjeV9mYl9mb3JtYXQoc2l6ZXMtPnN1cmZhY2VfYnBwLAo+IC0JCQkJCQkJICBzaXplcy0+c3Vy
ZmFjZV9kZXB0aCk7Cj4gLQo+IC0Jc2l6ZSA9IG1vZGVfY21kLnBpdGNoZXNbMF0gKiBtb2RlX2Nt
ZC5oZWlnaHQ7Cj4gLQo+IC0JcmV0ID0gYXN0ZmJfY3JlYXRlX29iamVjdChhZmJkZXYsICZtb2Rl
X2NtZCwgJmdvYmopOwo+IC0JaWYgKHJldCkgewo+IC0JCURSTV9FUlJPUigiZmFpbGVkIHRvIGNy
ZWF0ZSBmYmNvbiBiYWNraW5nIG9iamVjdCAlZFxuIiwgcmV0KTsKPiAtCQlyZXR1cm4gcmV0Owo+
IC0JfQo+IC0KPiAtCXN5c3JhbSA9IHZtYWxsb2Moc2l6ZSk7Cj4gLQlpZiAoIXN5c3JhbSkKPiAt
CQlyZXR1cm4gLUVOT01FTTsKPiAtCj4gLQlpbmZvID0gZHJtX2ZiX2hlbHBlcl9hbGxvY19mYmko
aGVscGVyKTsKPiAtCWlmIChJU19FUlIoaW5mbykpIHsKPiAtCQlyZXQgPSBQVFJfRVJSKGluZm8p
Owo+IC0JCWdvdG8gb3V0Owo+IC0JfQo+IC0JZmIgPSBkcm1fZ2VtX2ZiZGV2X2ZiX2NyZWF0ZShk
ZXYsIHNpemVzLCAwLCBnb2JqLCBOVUxMKTsKPiAtCWlmIChJU19FUlIoZmIpKSB7Cj4gLQkJcmV0
ID0gUFRSX0VSUihmYik7Cj4gLQkJZ290byBvdXQ7Cj4gLQl9Cj4gLQo+IC0JYWZiZGV2LT5zeXNy
YW0gPSBzeXNyYW07Cj4gLQlhZmJkZXYtPnNpemUgPSBzaXplOwo+IC0KPiAtCWFmYmRldi0+aGVs
cGVyLmZiID0gZmI7Cj4gLQo+IC0JaW5mby0+ZmJvcHMgPSAmYXN0ZmJfb3BzOwo+IC0KPiAtCWlu
Zm8tPmFwZXJ0dXJlcy0+cmFuZ2VzWzBdLmJhc2UgPSBwY2lfcmVzb3VyY2Vfc3RhcnQoZGV2LT5w
ZGV2LCAwKTsKPiAtCWluZm8tPmFwZXJ0dXJlcy0+cmFuZ2VzWzBdLnNpemUgPSBwY2lfcmVzb3Vy
Y2VfbGVuKGRldi0+cGRldiwgMCk7Cj4gLQo+IC0JZHJtX2ZiX2hlbHBlcl9maWxsX2luZm8oaW5m
bywgJmFmYmRldi0+aGVscGVyLCBzaXplcyk7Cj4gLQo+IC0JaW5mby0+c2NyZWVuX2Jhc2UgPSBz
eXNyYW07Cj4gLQlpbmZvLT5zY3JlZW5fc2l6ZSA9IHNpemU7Cj4gLQo+IC0JaW5mby0+cGl4bWFw
LmZsYWdzID0gRkJfUElYTUFQX1NZU1RFTTsKPiAtCj4gLQlEUk1fREVCVUdfS01TKCJhbGxvY2F0
ZWQgJWR4JWRcbiIsCj4gLQkJICAgICAgZmItPndpZHRoLCBmYi0+aGVpZ2h0KTsKPiAtCj4gLQly
ZXR1cm4gMDsKPiAtCj4gLW91dDoKPiAtCXZmcmVlKHN5c3JhbSk7Cj4gLQlyZXR1cm4gcmV0Owo+
IC19Cj4gLQo+IC1zdGF0aWMgY29uc3Qgc3RydWN0IGRybV9mYl9oZWxwZXJfZnVuY3MgYXN0X2Zi
X2hlbHBlcl9mdW5jcyA9IHsKPiAtCS5mYl9wcm9iZSA9IGFzdGZiX2NyZWF0ZSwKPiAtfTsKPiAt
Cj4gLXN0YXRpYyB2b2lkIGFzdF9mYmRldl9kZXN0cm95KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYs
Cj4gLQkJCSAgICAgIHN0cnVjdCBhc3RfZmJkZXYgKmFmYmRldikKPiAtewo+IC0JZHJtX2hlbHBl
cl9mb3JjZV9kaXNhYmxlX2FsbChkZXYpOwo+IC0JZHJtX2ZiX2hlbHBlcl91bnJlZ2lzdGVyX2Zi
aSgmYWZiZGV2LT5oZWxwZXIpOwo+IC0KPiAtCWRybV9mYl9oZWxwZXJfZmluaSgmYWZiZGV2LT5o
ZWxwZXIpOwo+IC0JZHJtX2ZyYW1lYnVmZmVyX3B1dChhZmJkZXYtPmhlbHBlci5mYik7Cj4gLQo+
IC0JdmZyZWUoYWZiZGV2LT5zeXNyYW0pOwo+IC19Cj4gLQo+IC1pbnQgYXN0X2ZiZGV2X2luaXQo
c3RydWN0IGRybV9kZXZpY2UgKmRldikKPiAtewo+IC0Jc3RydWN0IGFzdF9wcml2YXRlICphc3Qg
PSBkZXYtPmRldl9wcml2YXRlOwo+IC0Jc3RydWN0IGFzdF9mYmRldiAqYWZiZGV2Owo+IC0JaW50
IHJldDsKPiAtCj4gLQlhZmJkZXYgPSBremFsbG9jKHNpemVvZihzdHJ1Y3QgYXN0X2ZiZGV2KSwg
R0ZQX0tFUk5FTCk7Cj4gLQlpZiAoIWFmYmRldikKPiAtCQlyZXR1cm4gLUVOT01FTTsKPiAtCj4g
LQlhc3QtPmZiZGV2ID0gYWZiZGV2Owo+IC0Jc3Bpbl9sb2NrX2luaXQoJmFmYmRldi0+ZGlydHlf
bG9jayk7Cj4gLQo+IC0JZHJtX2ZiX2hlbHBlcl9wcmVwYXJlKGRldiwgJmFmYmRldi0+aGVscGVy
LCAmYXN0X2ZiX2hlbHBlcl9mdW5jcyk7Cj4gLQo+IC0JcmV0ID0gZHJtX2ZiX2hlbHBlcl9pbml0
KGRldiwgJmFmYmRldi0+aGVscGVyLCAxKTsKPiAtCWlmIChyZXQpCj4gLQkJZ290byBmcmVlOwo+
IC0KPiAtCXJldCA9IGRybV9mYl9oZWxwZXJfc2luZ2xlX2FkZF9hbGxfY29ubmVjdG9ycygmYWZi
ZGV2LT5oZWxwZXIpOwo+IC0JaWYgKHJldCkKPiAtCQlnb3RvIGZpbmk7Cj4gLQo+IC0JLyogZGlz
YWJsZSBhbGwgdGhlIHBvc3NpYmxlIG91dHB1dHMvY3J0Y3MgYmVmb3JlIGVudGVyaW5nIEtNUyBt
b2RlICovCj4gLQlkcm1faGVscGVyX2Rpc2FibGVfdW51c2VkX2Z1bmN0aW9ucyhkZXYpOwo+IC0K
PiAtCXJldCA9IGRybV9mYl9oZWxwZXJfaW5pdGlhbF9jb25maWcoJmFmYmRldi0+aGVscGVyLCAz
Mik7Cj4gLQlpZiAocmV0KQo+IC0JCWdvdG8gZmluaTsKPiAtCj4gLQlyZXR1cm4gMDsKPiAtCj4g
LWZpbmk6Cj4gLQlkcm1fZmJfaGVscGVyX2ZpbmkoJmFmYmRldi0+aGVscGVyKTsKPiAtZnJlZToK
PiAtCWtmcmVlKGFmYmRldik7Cj4gLQlyZXR1cm4gcmV0Owo+IC19Cj4gLQo+IC12b2lkIGFzdF9m
YmRldl9maW5pKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCj4gLXsKPiAtCXN0cnVjdCBhc3RfcHJp
dmF0ZSAqYXN0ID0gZGV2LT5kZXZfcHJpdmF0ZTsKPiAtCj4gLQlpZiAoIWFzdC0+ZmJkZXYpCj4g
LQkJcmV0dXJuOwo+IC0KPiAtCWFzdF9mYmRldl9kZXN0cm95KGRldiwgYXN0LT5mYmRldik7Cj4g
LQlrZnJlZShhc3QtPmZiZGV2KTsKPiAtCWFzdC0+ZmJkZXYgPSBOVUxMOwo+IC19Cj4gLQo+IC12
b2lkIGFzdF9mYmRldl9zZXRfc3VzcGVuZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBpbnQgc3Rh
dGUpCj4gLXsKPiAtCXN0cnVjdCBhc3RfcHJpdmF0ZSAqYXN0ID0gZGV2LT5kZXZfcHJpdmF0ZTsK
PiAtCj4gLQlpZiAoIWFzdC0+ZmJkZXYpCj4gLQkJcmV0dXJuOwo+IC0KPiAtCWRybV9mYl9oZWxw
ZXJfc2V0X3N1c3BlbmQoJmFzdC0+ZmJkZXYtPmhlbHBlciwgc3RhdGUpOwo+IC19Cj4gLQo+IC12
b2lkIGFzdF9mYmRldl9zZXRfYmFzZShzdHJ1Y3QgYXN0X3ByaXZhdGUgKmFzdCwgdW5zaWduZWQg
bG9uZyBncHVfYWRkcikKPiAtewo+IC0JYXN0LT5mYmRldi0+aGVscGVyLmZiZGV2LT5maXguc21l
bV9zdGFydCA9Cj4gLQkJYXN0LT5mYmRldi0+aGVscGVyLmZiZGV2LT5hcGVydHVyZXMtPnJhbmdl
c1swXS5iYXNlICsgZ3B1X2FkZHI7Cj4gLQlhc3QtPmZiZGV2LT5oZWxwZXIuZmJkZXYtPmZpeC5z
bWVtX2xlbiA9IGFzdC0+dnJhbV9zaXplIC0gZ3B1X2FkZHI7Cj4gLX0KPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbWFpbi5jIGIvZHJpdmVycy9ncHUvZHJtL2FzdC9hc3Rf
bWFpbi5jCj4gaW5kZXggMWJkNjE2OTZlNTA5Li43OGU4ZTIwZmY1NzcgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbWFpbi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2Fz
dC9hc3RfbWFpbi5jCj4gQEAgLTM4Myw4ICszODMsMzMgQEAgc3RhdGljIGludCBhc3RfZ2V0X2Ry
YW1faW5mbyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQo+ICAJcmV0dXJuIDA7Cj4gIH0KPiAgCj4g
K3N0YXRpYyBpbnQgYXN0X2ZyYW1lYnVmZmVyX2RpcnR5ZmIoc3RydWN0IGRybV9mcmFtZWJ1ZmZl
ciAqZmIsCj4gKwkJCQkgICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwKPiArCQkJCSAgIHVu
c2lnbmVkIGludCBmbGFncywKPiArCQkJCSAgIHVuc2lnbmVkIGludCBjb2xvciwKPiArCQkJCSAg
IHN0cnVjdCBkcm1fY2xpcF9yZWN0ICpjbGlwcywKPiArCQkJCSAgIHVuc2lnbmVkIGludCBudW1f
Y2xpcHMpCj4gK3sKPiArCS8qIGVtcHR5IHBsYWNlaG9sZGVyIGZ1bmN0aW9uIHRvIGVuYWJsZSBm
YmNvbiBzaGFkb3cgYnVmZmVyICovCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIGNv
bnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXJfZnVuY3MgYXN0X2ZyYW1lYnVmZmVyX2Z1bmNzID0g
ewo+ICsJLmRlc3Ryb3kJPSBkcm1fZ2VtX2ZiX2Rlc3Ryb3ksCj4gKwkuY3JlYXRlX2hhbmRsZQk9
IGRybV9nZW1fZmJfY3JlYXRlX2hhbmRsZSwKPiArCS5kaXJ0eQkJPSBhc3RfZnJhbWVidWZmZXJf
ZGlydHlmYiwKPiArfTsKPiArCj4gK3N0YXRpYyBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICoKPiAr
YXN0X21vZGVfY29uZmlnX2ZiX2NyZWF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3Qg
ZHJtX2ZpbGUgKmZpbGUsCj4gKwkJCSAgY29uc3Qgc3RydWN0IGRybV9tb2RlX2ZiX2NtZDIgKm1v
ZGVfY21kKQo+ICt7Cj4gKwlyZXR1cm4gZHJtX2dlbV9mYl9jcmVhdGVfd2l0aF9mdW5jcyhkZXYs
IGZpbGUsIG1vZGVfY21kLAo+ICsJCQkJCSAgICAmYXN0X2ZyYW1lYnVmZmVyX2Z1bmNzKTsKPiAr
fQo+ICsKPiAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fbW9kZV9jb25maWdfZnVuY3MgYXN0X21v
ZGVfZnVuY3MgPSB7Cj4gLQkuZmJfY3JlYXRlID0gZHJtX2dlbV9mYl9jcmVhdGUKPiArCS5mYl9j
cmVhdGUgPSBhc3RfbW9kZV9jb25maWdfZmJfY3JlYXRlCj4gIH07Cj4gIAo+ICBzdGF0aWMgdTMy
IGFzdF9nZXRfdnJhbV9pbmZvKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCj4gQEAgLTUwMiw3ICs1
MjcsNyBAQCBpbnQgYXN0X2RyaXZlcl9sb2FkKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHVuc2ln
bmVkIGxvbmcgZmxhZ3MpCj4gIAlpZiAocmV0KQo+ICAJCWdvdG8gb3V0X2ZyZWU7Cj4gIAo+IC0J
cmV0ID0gYXN0X2ZiZGV2X2luaXQoZGV2KTsKPiArCXJldCA9IGRybV9mYmRldl9nZW5lcmljX3Nl
dHVwKGRldiwgMzIpOwo+ICAJaWYgKHJldCkKPiAgCQlnb3RvIG91dF9mcmVlOwo+ICAKPiBAQCAt
NTIwLDcgKzU0NSw2IEBAIHZvaWQgYXN0X2RyaXZlcl91bmxvYWQoc3RydWN0IGRybV9kZXZpY2Ug
KmRldikKPiAgCWFzdF9yZWxlYXNlX2Zpcm13YXJlKGRldik7Cj4gIAlrZnJlZShhc3QtPmRwNTAx
X2Z3X2FkZHIpOwo+ICAJYXN0X21vZGVfZmluaShkZXYpOwo+IC0JYXN0X2ZiZGV2X2ZpbmkoZGV2
KTsKPiAgCWRybV9tb2RlX2NvbmZpZ19jbGVhbnVwKGRldik7Cj4gIAo+ICAJYXN0X21tX2Zpbmko
YXN0KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jIGIvZHJp
dmVycy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jCj4gaW5kZXggYzQ4MjQ5ZGY3NThlLi4zYzA3MTY4
OTFiMjkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jCj4gQEAgLTUyNSwxOCArNTI1LDEyIEBA
IHN0YXRpYyBpbnQgYXN0X2NydGNfZG9fc2V0X2Jhc2Uoc3RydWN0IGRybV9jcnRjICpjcnRjLAo+
ICAJCQkJc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsCj4gIAkJCQlpbnQgeCwgaW50IHksIGlu
dCBhdG9taWMpCj4gIHsKPiAtCXN0cnVjdCBhc3RfcHJpdmF0ZSAqYXN0ID0gY3J0Yy0+ZGV2LT5k
ZXZfcHJpdmF0ZTsKPiAgCXN0cnVjdCBkcm1fZ2VtX3ZyYW1fb2JqZWN0ICpnYm87Cj4gIAlpbnQg
cmV0Owo+ICAJczY0IGdwdV9hZGRyOwo+IC0Jdm9pZCAqYmFzZTsKPiAgCj4gIAlpZiAoIWF0b21p
YyAmJiBmYikgewo+ICAJCWdibyA9IGRybV9nZW1fdnJhbV9vZl9nZW0oZmItPm9ialswXSk7Cj4g
LQo+IC0JCS8qIHVubWFwIGlmIGNvbnNvbGUgKi8KPiAtCQlpZiAoYXN0LT5mYmRldi0+aGVscGVy
LmZiID09IGZiKQo+IC0JCQlkcm1fZ2VtX3ZyYW1fa3VubWFwKGdibyk7Cj4gIAkJZHJtX2dlbV92
cmFtX3VucGluKGdibyk7Cj4gIAl9Cj4gIAo+IEBAIC01NTEsMTcgKzU0NSw2IEBAIHN0YXRpYyBp
bnQgYXN0X2NydGNfZG9fc2V0X2Jhc2Uoc3RydWN0IGRybV9jcnRjICpjcnRjLAo+ICAJCWdvdG8g
ZXJyX2RybV9nZW1fdnJhbV91bnBpbjsKPiAgCX0KPiAgCj4gLQlpZiAoYXN0LT5mYmRldi0+aGVs
cGVyLmZiID09IGNydGMtPnByaW1hcnktPmZiKSB7Cj4gLQkJLyogaWYgcHVzaGluZyBjb25zb2xl
IGluIGttYXAgaXQgKi8KPiAtCQliYXNlID0gZHJtX2dlbV92cmFtX2ttYXAoZ2JvLCB0cnVlLCBO
VUxMKTsKPiAtCQlpZiAoSVNfRVJSKGJhc2UpKSB7Cj4gLQkJCXJldCA9IFBUUl9FUlIoYmFzZSk7
Cj4gLQkJCURSTV9FUlJPUigiZmFpbGVkIHRvIGttYXAgZmJjb25cbiIpOwo+IC0JCX0gZWxzZSB7
Cj4gLQkJCWFzdF9mYmRldl9zZXRfYmFzZShhc3QsIGdwdV9hZGRyKTsKPiAtCQl9Cj4gLQl9Cj4g
LQo+ICAJYXN0X3NldF9vZmZzZXRfcmVnKGNydGMpOwo+ICAJYXN0X3NldF9zdGFydF9hZGRyZXNz
X2NydDEoY3J0YywgKHUzMilncHVfYWRkcik7Cj4gIAo+IEBAIC02MTgsMTQgKzYwMSwxMCBAQCBz
dGF0aWMgdm9pZCBhc3RfY3J0Y19kaXNhYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKPiAgCURS
TV9ERUJVR19LTVMoIlxuIik7Cj4gIAlhc3RfY3J0Y19kcG1zKGNydGMsIERSTV9NT0RFX0RQTVNf
T0ZGKTsKPiAgCWlmIChjcnRjLT5wcmltYXJ5LT5mYikgewo+IC0JCXN0cnVjdCBhc3RfcHJpdmF0
ZSAqYXN0ID0gY3J0Yy0+ZGV2LT5kZXZfcHJpdmF0ZTsKPiAgCQlzdHJ1Y3QgZHJtX2ZyYW1lYnVm
ZmVyICpmYiA9IGNydGMtPnByaW1hcnktPmZiOwo+ICAJCXN0cnVjdCBkcm1fZ2VtX3ZyYW1fb2Jq
ZWN0ICpnYm8gPQo+ICAJCQlkcm1fZ2VtX3ZyYW1fb2ZfZ2VtKGZiLT5vYmpbMF0pOwo+ICAKPiAt
CQkvKiB1bm1hcCBpZiBjb25zb2xlICovCj4gLQkJaWYgKGFzdC0+ZmJkZXYtPmhlbHBlci5mYiA9
PSBmYikKPiAtCQkJZHJtX2dlbV92cmFtX2t1bm1hcChnYm8pOwo+ICAJCWRybV9nZW1fdnJhbV91
bnBpbihnYm8pOwo+ICAJfQo+ICAJY3J0Yy0+cHJpbWFyeS0+ZmIgPSBOVUxMOwo+IApfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGlu
ZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
