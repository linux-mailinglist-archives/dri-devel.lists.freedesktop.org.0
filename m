Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1C3EDD1744
	for <lists+dri-devel@lfdr.de>; Wed,  9 Oct 2019 20:01:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AA02B6EA1B;
	Wed,  9 Oct 2019 18:01:40 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yw1-xc44.google.com (mail-yw1-xc44.google.com
 [IPv6:2607:f8b0:4864:20::c44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 168496EA1B
 for <dri-devel@lists.freedesktop.org>; Wed,  9 Oct 2019 18:01:39 +0000 (UTC)
Received: by mail-yw1-xc44.google.com with SMTP id s6so1146628ywe.5
 for <dri-devel@lists.freedesktop.org>; Wed, 09 Oct 2019 11:01:39 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=LPpUEhvI0bZLulxcrYkJkJ+lzun+XdvU2Vu2WdYuTZ8=;
 b=g++D0tNfXgRv8O1NRwEojIa5s+a9696PLDOhNflCYF9Gr/1H9aSA3tDEoRckPnXwY1
 Yzb1wBXRtxSUPlykjOUjgn9FaYYDp1FVo/7yybgx5lk/dE8lXVLZmF6jR6xpMkSQJViD
 /GPi8PAFJNZWToX4A58ZyVNGVAIR3GYlsggadMZtV3UgDyViJpEJza9ziO8DGDw2LtbS
 c8lIBbzX9SzwReU71y9L5HCL5Zmyb/DjDjMUM6j5aRISEgOee/ozs2alqt1lu1LDijiB
 0/hkFxELoNiRXvwyYEFdsUTyE5vrOttyH6RqOrJHnZIRrnOEP+HGOonkIgqSgZl3R4WG
 wPPQ==
X-Gm-Message-State: APjAAAUoiES396tluDySNOJpQwiVxfoTJafVfaPm2DP8dqU9lXUAkpGP
 jkmSyYcrsAMD5d5lTEJYIWMhcA==
X-Google-Smtp-Source: APXvYqzYhTtEeQRFIlqmr4bznvStGp8OA+0qf0t+kkKg6OBbjK6o3CGLYEsImZFw98cQN67OtAF/Mg==
X-Received: by 2002:a0d:da42:: with SMTP id c63mr3944761ywe.47.1570644097911; 
 Wed, 09 Oct 2019 11:01:37 -0700 (PDT)
Received: from localhost ([2620:0:1013:11:89c6:2139:5435:371d])
 by smtp.gmail.com with ESMTPSA id 12sm792691ywu.59.2019.10.09.11.01.37
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 09 Oct 2019 11:01:37 -0700 (PDT)
Date: Wed, 9 Oct 2019 14:01:36 -0400
From: Sean Paul <sean@poorly.run>
To: Ezequiel Garcia <ezequiel@collabora.com>
Subject: Re: [PATCH v4 2/3] drm/rockchip: Add optional support for CRTC gamma
 LUT
Message-ID: <20191009180136.GE85762@art_vandelay>
References: <20191008230038.24037-1-ezequiel@collabora.com>
 <20191008230038.24037-3-ezequiel@collabora.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191008230038.24037-3-ezequiel@collabora.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=poorly.run; s=google;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=LPpUEhvI0bZLulxcrYkJkJ+lzun+XdvU2Vu2WdYuTZ8=;
 b=Mo8DsmcHaLz/rLTG5gAbMv+WtBU6RbT7m0NFsa48euU4QA+SuseWLHbHwPylfwayco
 M/Yr7IHTlccuL9lu8o/8+2M3kaef5OvBEm1SQvP1wLme8dkhyeFW/qsY6GvhmSva68Y6
 bc+fzbIwBExkDXCRGaTrkqxFHKyrx67WeiVUhSGqTlsg45vTrRadR3merjczwrJneBr8
 X797Xyc6qUk9Yck2wwHXqzy3pfntOZQOc6NtRqcZjpkERd4qX1ujnfRW3jvAPbV1QhgS
 BEKLE+uzattujw/kl25/EXpRjtwKKk3K8Sxsnz2zhoYxcEH5c1iZqZ8gpizr6wmk3pjB
 buRw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Mark Rutland <mark.rutland@arm.com>, devicetree@vger.kernel.org,
 Jacopo Mondi <jacopo@jmondi.org>, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, Douglas Anderson <dianders@chromium.org>,
 linux-rockchip@lists.infradead.org,
 Boris Brezillon <boris.brezillon@collabora.com>,
 Sean Paul <seanpaul@chromium.org>, Rob Herring <robh+dt@kernel.org>,
 kernel@collabora.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBPY3QgMDgsIDIwMTkgYXQgMDg6MDA6MzdQTSAtMDMwMCwgRXplcXVpZWwgR2FyY2lh
IHdyb3RlOgo+IEFkZCBhbiBvcHRpb25hbCBDUlRDIGdhbW1hIExVVCBzdXBwb3J0LCBhbmQgZW5h
YmxlIGl0IG9uIFJLMzI4OC4KPiBUaGlzIGlzIGN1cnJlbnRseSBlbmFibGVkIHZpYSBhIHNlcGFy
YXRlIGFkZHJlc3MgcmVzb3VyY2UsCj4gd2hpY2ggbmVlZHMgdG8gYmUgc3BlY2lmaWVkIGluIHRo
ZSBkZXZpY2V0cmVlLgo+IAo+IFRoZSBhZGRyZXNzIHJlc291cmNlIGlzIHJlcXVpcmVkIGJlY2F1
c2Ugb24gc29tZSBTb0NzLCBzdWNoIGFzCj4gUkszMjg4LCB0aGUgTFVUIGFkZHJlc3MgaXMgYWZ0
ZXIgdGhlIE1NVSBhZGRyZXNzLCBhbmQgdGhlIGxhdHRlcgo+IGlzIHN1cHBvcnRlZCBieSBhIGRp
ZmZlcmVudCBkcml2ZXIuIFRoaXMgcHJldmVudHMgdGhlIERSTSBkcml2ZXIKPiBmcm9tIHJlcXVl
c3RpbmcgYW4gZW50aXJlIHJlZ2lzdGVyIHNwYWNlLgo+IAo+IFRoZSBjdXJyZW50IGltcGxlbWVu
dGF0aW9uIHdvcmtzIGZvciBSR0IgMTAtYml0IHRhYmxlcywgYXMgdGhhdAo+IGlzIHdoYXQgc2Vl
bXMgdG8gd29yayBvbiBSSzMyODguCj4gCj4gU2lnbmVkLW9mZi1ieTogRXplcXVpZWwgR2FyY2lh
IDxlemVxdWllbEBjb2xsYWJvcmEuY29tPgoKSGV5IEV6ZXF1aWVsLApKdXN0IGEgZmV3IGNvbW1l
bnRzIG9uIHRoZSBhY3R1YWwgY29udGVudCBvZiB0aGUgcGF0Y2ggYXMgb3Bwb3NlZCB0byBteSBo
aWdoZXIKbGV2ZWwgY29tbWVudHMgeWVzdGVyZGF5LiBJIHRoaW5rIHdlJ3JlIGFsbW9zdCB0aGVy
ZSwgdGhhbmtzIGZvciBzdGlja2luZyB0aGlzCm91dCEKCj4gLS0tCj4gQ2hhbmdlcyBmcm9tIHYz
Ogo+ICogTW92ZSB0byBhdG9taWNfZW5hYmxlIGFuZCBhdG9taWNfYmVnaW4sCj4gICBhcyBkaXNj
dXNzZWQgd2l0aCBTZWFuIFBhdWwuCj4gKiBEcm9wcGVkIHRoZSBSZXZpZXdlZC1ieXMuCj4gQ2hh
bmdlcyBmcm9tIHYyOgo+ICogTm9uZS4KPiBDaGFuZ2VzIGZyb20gdjE6Cj4gKiBkcm9wIGV4cGxp
Y2l0IGxpbmVhciBMVVQgYWZ0ZXIgZmluZGluZyBhIHByb3Blcgo+ICAgd2F5IHRvIGRpc2FibGUg
Z2FtbWEgY29ycmVjdGlvbi4KPiAqIGF2b2lkIHNldHRpbmcgZ2FtbWEgaXMgdGhlIENSVEMgaXMg
bm90IGFjdGl2ZS4KPiAqIHMvaW50L3Vuc2lnbmVkIGludCBhcyBzdWdnZXN0ZWQgYnkgSmFjb3Bv
Lgo+ICogb25seSBlbmFibGUgY29sb3IgbWFuYWdlbWVudCBhbmQgc2V0IGdhbW1hIHNpemUKPiAg
IGlmIGdhbW1hIExVVCBpcyBzdXBwb3J0ZWQsIHN1Z2dlc3RlZCBieSBEb3VnLgo+ICogZHJvcCB0
aGUgcmVnLW5hbWVzIHVzYWdlLCBhbmQgaW5zdGVhZCBqdXN0IHVzZSBpbmRleGVkIHJlZwo+ICAg
c3BlY2lmaWVycywgc3VnZ2VzdGVkIGJ5IERvdWcuCj4gQ2hhbmdlcyBmcm9tIFJGQzoKPiAqIFJl
cXVlc3QgKGFuIG9wdGlvbmFsKSBhZGRyZXNzIHJlc291cmNlIGZvciB0aGUgTFVULgo+ICogRHJv
cCBzdXBwb3J0IGZvciBSSzMzOTksIHdoaWNoIGRvZXNuJ3Qgc2VlbSB0byB3b3JrCj4gICBvdXQg
b2YgdGhlIGJveCBhbmQgbmVlZHMgbW9yZSByZXNlYXJjaC4KPiAqIFN1cHBvcnQgcGFzcy10aHJ1
IHNldHRpbmcgd2hlbiBHQU1NQV9MVVQgaXMgTlVMTC4KPiAqIEFkZCBhIGNoZWNrIGZvciB0aGUg
Z2FtbWEgc2l6ZSwgYXMgc3VnZ2VzdGVkIGJ5IElsaWEuCj4gKiBNb3ZlIGdhbW1hIHNldHRpbmcg
dG8gYXRvbWljX2NvbW1pdF90YWlsLCBhcyBwb2ludGVkCj4gICBvdXQgYnkgSmFjb3BvL0xhdXJl
bnQsIGlzIHRoZSBjb3JyZWN0IHdheS4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlw
L3JvY2tjaGlwX2RybV9mYi5jICB8ICAgMSArCj4gIGRyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9y
b2NrY2hpcF9kcm1fdm9wLmMgfCAxMjUgKysrKysrKysrKysrKysrKysrKysKPiAgZHJpdmVycy9n
cHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX2RybV92b3AuaCB8ICAgNSArCj4gIGRyaXZlcnMvZ3B1
L2RybS9yb2NrY2hpcC9yb2NrY2hpcF92b3BfcmVnLmMgfCAgIDIgKwo+ICA0IGZpbGVzIGNoYW5n
ZWQsIDEzMyBpbnNlcnRpb25zKCspCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9y
b2NrY2hpcC9yb2NrY2hpcF9kcm1fZmIuYyBiL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2Nr
Y2hpcF9kcm1fZmIuYwo+IGluZGV4IGNhMDEyMzRjMDM3Yy4uNjk3ZWUwNGI4NWNmIDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9kcm1fZmIuYwo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9kcm1fZmIuYwo+IEBAIC0xNyw2ICsx
Nyw3IEBACj4gICNpbmNsdWRlICJyb2NrY2hpcF9kcm1fZHJ2LmgiCj4gICNpbmNsdWRlICJyb2Nr
Y2hpcF9kcm1fZmIuaCIKPiAgI2luY2x1ZGUgInJvY2tjaGlwX2RybV9nZW0uaCIKPiArI2luY2x1
ZGUgInJvY2tjaGlwX2RybV92b3AuaCIKCkxlZnRvdmVyIGZyb20gdGhlIHByZXZpb3VzIHZlcnNp
b24/Cgo+ICAKPiAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXJfZnVuY3Mgcm9j
a2NoaXBfZHJtX2ZiX2Z1bmNzID0gewo+ICAJLmRlc3Ryb3kgICAgICAgPSBkcm1fZ2VtX2ZiX2Rl
c3Ryb3ksCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9k
cm1fdm9wLmMgYi9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvcm9ja2NoaXBfZHJtX3ZvcC5jCj4g
aW5kZXggNjEzNDA0Zjg2NjY4Li44NWMxMjY5YTEyMTggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX2RybV92b3AuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9yb2NrY2hpcC9yb2NrY2hpcF9kcm1fdm9wLmMKPiBAQCAtMTM5LDYgKzEzOSw3IEBAIHN0cnVj
dCB2b3Agewo+ICAKPiAgCXVpbnQzMl90ICpyZWdzYmFrOwo+ICAJdm9pZCBfX2lvbWVtICpyZWdz
Owo+ICsJdm9pZCBfX2lvbWVtICpsdXRfcmVnczsKPiAgCj4gIAkvKiBwaHlzaWNhbCBtYXAgbGVu
Z3RoIG9mIHZvcCByZWdpc3RlciAqLwo+ICAJdWludDMyX3QgbGVuOwo+IEBAIC0xMDQ4LDYgKzEw
NDksODQgQEAgc3RhdGljIGJvb2wgdm9wX2NydGNfbW9kZV9maXh1cChzdHJ1Y3QgZHJtX2NydGMg
KmNydGMsCj4gIAlyZXR1cm4gdHJ1ZTsKPiAgfQo+ICAKPiArc3RhdGljIGJvb2wgdm9wX2RzcF9s
dXRfaXNfZW5hYmxlKHN0cnVjdCB2b3AgKnZvcCkKCiplbmFibGVkCgo+ICt7Cj4gKwlyZXR1cm4g
dm9wX3JlYWRfcmVnKHZvcCwgMCwgJnZvcC0+ZGF0YS0+Y29tbW9uLT5kc3BfbHV0X2VuKTsKPiAr
fQo+ICsKPiArc3RhdGljIHZvaWQgdm9wX2NydGNfd3JpdGVfZ2FtbWFfbHV0KHN0cnVjdCB2b3Ag
KnZvcCwgc3RydWN0IGRybV9jcnRjICpjcnRjKQo+ICt7Cj4gKwlzdHJ1Y3QgZHJtX2NvbG9yX2x1
dCAqbHV0ID0gY3J0Yy0+c3RhdGUtPmdhbW1hX2x1dC0+ZGF0YTsKPiArCXVuc2lnbmVkIGludCBp
Owo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBjcnRjLT5nYW1tYV9zaXplOyBpKyspIHsKPiArCQl1
MzIgd29yZDsKPiArCj4gKwkJd29yZCA9IChkcm1fY29sb3JfbHV0X2V4dHJhY3QobHV0W2ldLnJl
ZCwgMTApIDw8IDIwKSB8Cj4gKwkJICAgICAgIChkcm1fY29sb3JfbHV0X2V4dHJhY3QobHV0W2ld
LmdyZWVuLCAxMCkgPDwgMTApIHwKPiArCQkJZHJtX2NvbG9yX2x1dF9leHRyYWN0KGx1dFtpXS5i
bHVlLCAxMCk7Cj4gKwkJd3JpdGVsKHdvcmQsIHZvcC0+bHV0X3JlZ3MgKyBpICogNCk7Cj4gKwl9
Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHZvcF9jcnRjX2dhbW1hX3NldChzdHJ1Y3Qgdm9wICp2
b3AsIHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKPiArCQkJICAgICAgIHN0cnVjdCBkcm1fY3J0Y19z
dGF0ZSAqb2xkX2NydGNfc3RhdGUpCj4gK3sKPiArCXVuc2lnbmVkIGludCBpZGxlOwo+ICsJaW50
IHJldDsKPiArCgpIb3cgYWJvdXQ6CgogICAgICAgIGlmICghdm9wLT5sdXRfcmVncykKICAgICAg
ICAgICAgICAgIHJldHVybjsKCmhlcmUgYW5kIHRoZW4geW91IGNhbiByZW1vdmUgdGhhdCBjb25k
aXRpb24gYWJvdmUgdGhlIDIgY2FsbHNpdGVzCgo+ICsJLyoKPiArCSAqIEluIG9yZGVyIHRvIHdy
aXRlIHRoZSBMVVQgdG8gdGhlIGludGVybmFsIG1lbW9yeSwKPiArCSAqIHdlIG5lZWQgdG8gZmly
c3QgbWFrZSBzdXJlIHRoZSBkc3BfbHV0X2VuIGJpdCBpcyBjbGVhcmVkLgo+ICsJICovCj4gKwlz
cGluX2xvY2soJnZvcC0+cmVnX2xvY2spOwo+ICsJVk9QX1JFR19TRVQodm9wLCBjb21tb24sIGRz
cF9sdXRfZW4sIDApOwo+ICsJdm9wX2NmZ19kb25lKHZvcCk7Cj4gKwlzcGluX3VubG9jaygmdm9w
LT5yZWdfbG9jayk7Cj4gKwo+ICsJLyoKPiArCSAqIElmIHRoZSBDUlRDIGlzIG5vdCBhY3RpdmUs
IGRzcF9sdXRfZW4gd2lsbCBub3QgZ2V0IGNsZWFyZWQuCj4gKwkgKiBBcHBhcmVudGx5IHdlIHN0
aWxsIG5lZWQgdG8gZG8gdGhlIGFib3ZlIHN0ZXAgdG8gZm9yCj4gKwkgKiBnYW1tYSBjb3JyZWN0
aW9uIHRvIGJlIGRpc2FibGVkLgo+ICsJICovCj4gKwlpZiAoIWNydGMtPnN0YXRlLT5hY3RpdmUp
Cj4gKwkJcmV0dXJuOwo+ICsKPiArCXJldCA9IHJlYWR4X3BvbGxfdGltZW91dCh2b3BfZHNwX2x1
dF9pc19lbmFibGUsIHZvcCwKPiArCQkJCSBpZGxlLCAhaWRsZSwgNSwgMzAgKiAxMDAwKTsKPiAr
CWlmIChyZXQpIHsKPiArCQlEUk1fREVWX0VSUk9SKHZvcC0+ZGV2LCAiZGlzcGxheSBMVVQgUkFN
IGVuYWJsZSB0aW1lb3V0IVxuIik7Cj4gKwkJcmV0dXJuOwo+ICsJfQo+ICsKPiArCWlmIChjcnRj
LT5zdGF0ZS0+Z2FtbWFfbHV0ICYmCj4gKwkgICAoIW9sZF9jcnRjX3N0YXRlLT5nYW1tYV9sdXQg
fHwgKGNydGMtPnN0YXRlLT5nYW1tYV9sdXQtPmJhc2UuaWQgIT0KPiArCQkJCQlvbGRfY3J0Y19z
dGF0ZS0+Z2FtbWFfbHV0LT5iYXNlLmlkKSkpIHsKClNpbGx5IHF1ZXN0aW9uLCBidXQgaXNuJ3Qg
dGhlIHNlY29uZCBwYXJ0IG9mIHRoaXMgY2hlY2sgcmVkdW5kYW50IHNpbmNlIHlvdSBuZWVkIApj
b2xvcl9tZ210X2NoYW5nZWQgfHwgYWN0aXZlX2NoYW5nZWQgdG8gZ2V0IGludG8gdGhpcyBmdW5j
dGlvbj8KClNvIG1heWJlIGludmVydCB0aGUgY29uZGl0aW9uYWwgaGVyZSBhbmQgZXhpdCBlYXJs
eSAodG8gc2F2ZSBhIGxldmVsIG9mCmluZGVudGF0aW9uIGluIHRoZSBibG9jayBiZWxvdyk6Cgog
ICAgICAgIGlmICghY3J0Yy0+c3RhdGUtPmdhbW1hX2x1dCkKICAgICAgICAgICAgICAgIHJldHVy
bjsKCiAgICAgICAgc3Bpbl9sb2NrKCZ2b3AtPnJlZ19sb2NrKTsKCiAgICAgICAgdm9wX2NydGNf
d3JpdGVfZ2FtbWFfbHV0KHZvcCwgY3J0Yyk7CiAgICAgICAgVk9QX1JFR19TRVQodm9wLCBjb21t
b24sIGRzcF9sdXRfZW4sIDEpOwogICAgICAgIHZvcF9jZmdfZG9uZSh2b3ApOwoKICAgICAgICBz
cGluX3VubG9jaygmdm9wLT5yZWdfbG9jayk7Cgo+ICsKPiArCQlzcGluX2xvY2soJnZvcC0+cmVn
X2xvY2spOwo+ICsKPiArCQl2b3BfY3J0Y193cml0ZV9nYW1tYV9sdXQodm9wLCBjcnRjKTsKPiAr
CQlWT1BfUkVHX1NFVCh2b3AsIGNvbW1vbiwgZHNwX2x1dF9lbiwgMSk7Cj4gKwkJdm9wX2NmZ19k
b25lKHZvcCk7Cj4gKwo+ICsJCXNwaW5fdW5sb2NrKCZ2b3AtPnJlZ19sb2NrKTsKPiArCX0KPiAr
fQo+ICsKPiArc3RhdGljIHZvaWQgdm9wX2NydGNfYXRvbWljX2JlZ2luKHN0cnVjdCBkcm1fY3J0
YyAqY3J0YywKPiArCQkJCSAgIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUp
Cj4gK3sKPiArCXN0cnVjdCB2b3AgKnZvcCA9IHRvX3ZvcChjcnRjKTsKPiArCj4gKwkvKgo+ICsJ
ICogT25seSB1cGRhdGUgR0FNTUEgaWYgdGhlICdhY3RpdmUnIGZsYWcgaXMgbm90IGNoYW5nZWQs
Cj4gKwkgKiBvdGhlcndpc2UgaXQncyB1cGRhdGVkIGJ5IC5hdG9taWNfZW5hYmxlLgo+ICsJICov
Cj4gKwlpZiAodm9wLT5sdXRfcmVncyAmJiBjcnRjLT5zdGF0ZS0+Y29sb3JfbWdtdF9jaGFuZ2Vk
ICYmCj4gKwkgICAgIWNydGMtPnN0YXRlLT5hY3RpdmVfY2hhbmdlZCkKPiArCQl2b3BfY3J0Y19n
YW1tYV9zZXQodm9wLCBjcnRjLCBvbGRfY3J0Y19zdGF0ZSk7Cj4gK30KPiArCj4gIHN0YXRpYyB2
b2lkIHZvcF9jcnRjX2F0b21pY19lbmFibGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAo+ICAJCQkJ
ICAgc3RydWN0IGRybV9jcnRjX3N0YXRlICpvbGRfc3RhdGUpCj4gIHsKPiBAQCAtMTA3NSw2ICsx
MTU0LDE0IEBAIHN0YXRpYyB2b2lkIHZvcF9jcnRjX2F0b21pY19lbmFibGUoc3RydWN0IGRybV9j
cnRjICpjcnRjLAo+ICAJCXJldHVybjsKPiAgCX0KPiAgCj4gKwkvKgo+ICsJICogSWYgd2UgaGF2
ZSBhIEdBTU1BIExVVCBpbiB0aGUgc3RhdGUsIHRoZW4gbGV0J3MgbWFrZSBzdXJlCj4gKwkgKiBp
dCdzIHVwZGF0ZWQuIFdlIG1pZ2h0IGJlIGNvbWluZyBvdXQgb2Ygc3VzcGVuZCwKPiArCSAqIHdo
aWNoIG1lYW5zIHRoZSBMVVQgaW50ZXJuYWwgbWVtb3J5IG5lZWRzIHRvIGJlIHJlLXdyaXR0ZW4u
Cj4gKwkgKi8KPiArCWlmICh2b3AtPmx1dF9yZWdzICYmIGNydGMtPnN0YXRlLT5nYW1tYV9sdXQp
Cj4gKwkJdm9wX2NydGNfZ2FtbWFfc2V0KHZvcCwgY3J0Yywgb2xkX3N0YXRlKTsKPiArCj4gIAlt
dXRleF9sb2NrKCZ2b3AtPnZvcF9sb2NrKTsKPiAgCj4gIAlXQVJOX09OKHZvcC0+ZXZlbnQpOwo+
IEBAIC0xMTkxLDYgKzEyNzgsMjYgQEAgc3RhdGljIHZvaWQgdm9wX3dhaXRfZm9yX2lycV9oYW5k
bGVyKHN0cnVjdCB2b3AgKnZvcCkKPiAgCXN5bmNocm9uaXplX2lycSh2b3AtPmlycSk7Cj4gIH0K
PiAgCj4gK3N0YXRpYyBpbnQgdm9wX2NydGNfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fY3J0YyAq
Y3J0YywKPiArCQkJCSBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKmNydGNfc3RhdGUpCj4gK3sKPiAr
CXN0cnVjdCB2b3AgKnZvcCA9IHRvX3ZvcChjcnRjKTsKPiArCj4gKwlpZiAodm9wLT5sdXRfcmVn
cyAmJiBjcnRjX3N0YXRlLT5jb2xvcl9tZ210X2NoYW5nZWQgJiYKPiArCSAgICBjcnRjX3N0YXRl
LT5nYW1tYV9sdXQpIHsKPiArCQl1bnNpZ25lZCBpbnQgbGVuOwo+ICsKPiArCQlsZW4gPSBkcm1f
Y29sb3JfbHV0X3NpemUoY3J0Y19zdGF0ZS0+Z2FtbWFfbHV0KTsKPiArCQlpZiAobGVuICE9IGNy
dGMtPmdhbW1hX3NpemUpIHsKPiArCQkJRFJNX0RFQlVHX0tNUygiSW52YWxpZCBMVVQgc2l6ZTsg
Z290ICVkLCBleHBlY3RlZCAlZFxuIiwKPiArCQkJCSAgICAgIGxlbiwgY3J0Yy0+Z2FtbWFfc2l6
ZSk7Cj4gKwkJCXJldHVybiAtRUlOVkFMOwo+ICsJCX0KCk92ZXJmbG93IGlzIGF2b2lkZWQgaW4g
ZHJtX21vZGVfZ2FtbWFfc2V0X2lvY3RsKCksIHNvIEkgZG9uJ3QgdGhpbmsgeW91IG5lZWQKdGhp
cyBmdW5jdGlvbi4KClNlYW4KCj4gKwl9Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gIHN0
YXRpYyB2b2lkIHZvcF9jcnRjX2F0b21pY19mbHVzaChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4g
IAkJCQkgIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3RhdGUpCj4gIHsKPiBAQCAt
MTI0Myw2ICsxMzUwLDggQEAgc3RhdGljIHZvaWQgdm9wX2NydGNfYXRvbWljX2ZsdXNoKHN0cnVj
dCBkcm1fY3J0YyAqY3J0YywKPiAgCj4gIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2NydGNfaGVs
cGVyX2Z1bmNzIHZvcF9jcnRjX2hlbHBlcl9mdW5jcyA9IHsKPiAgCS5tb2RlX2ZpeHVwID0gdm9w
X2NydGNfbW9kZV9maXh1cCwKPiArCS5hdG9taWNfY2hlY2sgPSB2b3BfY3J0Y19hdG9taWNfY2hl
Y2ssCj4gKwkuYXRvbWljX2JlZ2luID0gdm9wX2NydGNfYXRvbWljX2JlZ2luLAo+ICAJLmF0b21p
Y19mbHVzaCA9IHZvcF9jcnRjX2F0b21pY19mbHVzaCwKPiAgCS5hdG9taWNfZW5hYmxlID0gdm9w
X2NydGNfYXRvbWljX2VuYWJsZSwKPiAgCS5hdG9taWNfZGlzYWJsZSA9IHZvcF9jcnRjX2F0b21p
Y19kaXNhYmxlLAo+IEBAIC0xMzYxLDYgKzE0NzAsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9jcnRjX2Z1bmNzIHZvcF9jcnRjX2Z1bmNzID0gewo+ICAJLmRpc2FibGVfdmJsYW5rID0gdm9w
X2NydGNfZGlzYWJsZV92YmxhbmssCj4gIAkuc2V0X2NyY19zb3VyY2UgPSB2b3BfY3J0Y19zZXRf
Y3JjX3NvdXJjZSwKPiAgCS52ZXJpZnlfY3JjX3NvdXJjZSA9IHZvcF9jcnRjX3ZlcmlmeV9jcmNf
c291cmNlLAo+ICsJLmdhbW1hX3NldCA9IGRybV9hdG9taWNfaGVscGVyX2xlZ2FjeV9nYW1tYV9z
ZXQsCj4gIH07Cj4gIAo+ICBzdGF0aWMgdm9pZCB2b3BfZmJfdW5yZWZfd29ya2VyKHN0cnVjdCBk
cm1fZmxpcF93b3JrICp3b3JrLCB2b2lkICp2YWwpCj4gQEAgLTE1MTgsNiArMTYyOCwxMCBAQCBz
dGF0aWMgaW50IHZvcF9jcmVhdGVfY3J0YyhzdHJ1Y3Qgdm9wICp2b3ApCj4gIAkJZ290byBlcnJf
Y2xlYW51cF9wbGFuZXM7Cj4gIAo+ICAJZHJtX2NydGNfaGVscGVyX2FkZChjcnRjLCAmdm9wX2Ny
dGNfaGVscGVyX2Z1bmNzKTsKPiArCWlmICh2b3AtPmx1dF9yZWdzKSB7Cj4gKwkJZHJtX21vZGVf
Y3J0Y19zZXRfZ2FtbWFfc2l6ZShjcnRjLCB2b3BfZGF0YS0+bHV0X3NpemUpOwo+ICsJCWRybV9j
cnRjX2VuYWJsZV9jb2xvcl9tZ210KGNydGMsIDAsIGZhbHNlLCB2b3BfZGF0YS0+bHV0X3NpemUp
Owo+ICsJfQo+ICAKPiAgCS8qCj4gIAkgKiBDcmVhdGUgZHJtX3BsYW5lcyBmb3Igb3ZlcmxheSB3
aW5kb3dzIHdpdGggcG9zc2libGVfY3J0Y3MgcmVzdHJpY3RlZAo+IEBAIC0xODIyLDYgKzE5MzYs
MTcgQEAgc3RhdGljIGludCB2b3BfYmluZChzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBkZXZp
Y2UgKm1hc3Rlciwgdm9pZCAqZGF0YSkKPiAgCWlmIChJU19FUlIodm9wLT5yZWdzKSkKPiAgCQly
ZXR1cm4gUFRSX0VSUih2b3AtPnJlZ3MpOwo+ICAKPiArCXJlcyA9IHBsYXRmb3JtX2dldF9yZXNv
dXJjZShwZGV2LCBJT1JFU09VUkNFX01FTSwgMSk7Cj4gKwlpZiAocmVzKSB7Cj4gKwkJaWYgKCF2
b3BfZGF0YS0+bHV0X3NpemUpIHsKPiArCQkJRFJNX0RFVl9FUlJPUihkZXYsICJubyBnYW1tYSBM
VVQgc2l6ZSBkZWZpbmVkXG4iKTsKPiArCQkJcmV0dXJuIC1FSU5WQUw7Cj4gKwkJfQo+ICsJCXZv
cC0+bHV0X3JlZ3MgPSBkZXZtX2lvcmVtYXBfcmVzb3VyY2UoZGV2LCByZXMpOwo+ICsJCWlmIChJ
U19FUlIodm9wLT5sdXRfcmVncykpCj4gKwkJCXJldHVybiBQVFJfRVJSKHZvcC0+bHV0X3JlZ3Mp
Owo+ICsJfQo+ICsKPiAgCXZvcC0+cmVnc2JhayA9IGRldm1fa3phbGxvYyhkZXYsIHZvcC0+bGVu
LCBHRlBfS0VSTkVMKTsKPiAgCWlmICghdm9wLT5yZWdzYmFrKQo+ICAJCXJldHVybiAtRU5PTUVN
Owo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvcm9ja2NoaXBfZHJtX3Zv
cC5oIGIvZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX2RybV92b3AuaAo+IGluZGV4
IDIxNDlhODg5YzI5ZC4uODE5MmM5MGQ0OGM0IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9yb2NrY2hpcC9yb2NrY2hpcF9kcm1fdm9wLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcm9j
a2NoaXAvcm9ja2NoaXBfZHJtX3ZvcC5oCj4gQEAgLTcsNiArNyw4IEBACj4gICNpZm5kZWYgX1JP
Q0tDSElQX0RSTV9WT1BfSAo+ICAjZGVmaW5lIF9ST0NLQ0hJUF9EUk1fVk9QX0gKPiAgCj4gKyNp
bmNsdWRlIDxkcm0vZHJtX2F0b21pYy5oPgo+ICsKPiAgLyoKPiAgICogbWFqb3I6IElQIG1ham9y
IHZlcnNpb24sIHVzZWQgZm9yIElQIHN0cnVjdHVyZQo+ICAgKiBtaW5vcjogYmlnIGZlYXR1cmUg
Y2hhbmdlIHVuZGVyIHNhbWUgc3RydWN0dXJlCj4gQEAgLTY3LDYgKzY5LDcgQEAgc3RydWN0IHZv
cF9jb21tb24gewo+ICAJc3RydWN0IHZvcF9yZWcgZGl0aGVyX2Rvd25fbW9kZTsKPiAgCXN0cnVj
dCB2b3BfcmVnIGRpdGhlcl9kb3duX2VuOwo+ICAJc3RydWN0IHZvcF9yZWcgZGl0aGVyX3VwOwo+
ICsJc3RydWN0IHZvcF9yZWcgZHNwX2x1dF9lbjsKPiAgCXN0cnVjdCB2b3BfcmVnIGdhdGVfZW47
Cj4gIAlzdHJ1Y3Qgdm9wX3JlZyBtbXVfZW47Cj4gIAlzdHJ1Y3Qgdm9wX3JlZyBvdXRfbW9kZTsK
PiBAQCAtMTcwLDYgKzE3Myw3IEBAIHN0cnVjdCB2b3BfZGF0YSB7Cj4gIAljb25zdCBzdHJ1Y3Qg
dm9wX3dpbl95dXYyeXV2X2RhdGEgKndpbl95dXYyeXV2Owo+ICAJY29uc3Qgc3RydWN0IHZvcF93
aW5fZGF0YSAqd2luOwo+ICAJdW5zaWduZWQgaW50IHdpbl9zaXplOwo+ICsJdW5zaWduZWQgaW50
IGx1dF9zaXplOwo+ICAKPiAgI2RlZmluZSBWT1BfRkVBVFVSRV9PVVRQVVRfUkdCMTAJQklUKDAp
Cj4gICNkZWZpbmUgVk9QX0ZFQVRVUkVfSU5URVJOQUxfUkdCCUJJVCgxKQo+IEBAIC0zNzMsNCAr
Mzc3LDUgQEAgc3RhdGljIGlubGluZSBpbnQgc2NsX3ZvcF9jYWxfbGJfbW9kZShpbnQgd2lkdGgs
IGJvb2wgaXNfeXV2KQo+ICB9Cj4gIAo+ICBleHRlcm4gY29uc3Qgc3RydWN0IGNvbXBvbmVudF9v
cHMgdm9wX2NvbXBvbmVudF9vcHM7Cj4gKwo+ICAjZW5kaWYgLyogX1JPQ0tDSElQX0RSTV9WT1Bf
SCAqLwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvcm9ja2NoaXBfdm9w
X3JlZy5jIGIvZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX3ZvcF9yZWcuYwo+IGlu
ZGV4IGQxNDk0YmUxNDQ3MS4uNDJkZGNiNjk4YzgyIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9yb2NrY2hpcC9yb2NrY2hpcF92b3BfcmVnLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
cm9ja2NoaXAvcm9ja2NoaXBfdm9wX3JlZy5jCj4gQEAgLTU5OCw2ICs1OTgsNyBAQCBzdGF0aWMg
Y29uc3Qgc3RydWN0IHZvcF9jb21tb24gcmszMjg4X2NvbW1vbiA9IHsKPiAgCS5kaXRoZXJfZG93
bl9lbiA9IFZPUF9SRUcoUkszMjg4X0RTUF9DVFJMMSwgMHgxLCAyKSwKPiAgCS5wcmVfZGl0aGVy
X2Rvd24gPSBWT1BfUkVHKFJLMzI4OF9EU1BfQ1RSTDEsIDB4MSwgMSksCj4gIAkuZGl0aGVyX3Vw
ID0gVk9QX1JFRyhSSzMyODhfRFNQX0NUUkwxLCAweDEsIDYpLAo+ICsJLmRzcF9sdXRfZW4gPSBW
T1BfUkVHKFJLMzI4OF9EU1BfQ1RSTDEsIDB4MSwgMCksCj4gIAkuZGF0YV9ibGFuayA9IFZPUF9S
RUcoUkszMjg4X0RTUF9DVFJMMCwgMHgxLCAxOSksCj4gIAkuZHNwX2JsYW5rID0gVk9QX1JFRyhS
SzMyODhfRFNQX0NUUkwwLCAweDMsIDE4KSwKPiAgCS5vdXRfbW9kZSA9IFZPUF9SRUcoUkszMjg4
X0RTUF9DVFJMMCwgMHhmLCAwKSwKPiBAQCAtNjQ2LDYgKzY0Nyw3IEBAIHN0YXRpYyBjb25zdCBz
dHJ1Y3Qgdm9wX2RhdGEgcmszMjg4X3ZvcCA9IHsKPiAgCS5vdXRwdXQgPSAmcmszMjg4X291dHB1
dCwKPiAgCS53aW4gPSByazMyODhfdm9wX3dpbl9kYXRhLAo+ICAJLndpbl9zaXplID0gQVJSQVlf
U0laRShyazMyODhfdm9wX3dpbl9kYXRhKSwKPiArCS5sdXRfc2l6ZSA9IDEwMjQsCj4gIH07Cj4g
IAo+ICBzdGF0aWMgY29uc3QgaW50IHJrMzM2OF92b3BfaW50cnNbXSA9IHsKPiAtLSAKPiAyLjIy
LjAKPiAKCi0tIApTZWFuIFBhdWwsIFNvZnR3YXJlIEVuZ2luZWVyLCBHb29nbGUgLyBDaHJvbWl1
bSBPUwpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmkt
ZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
