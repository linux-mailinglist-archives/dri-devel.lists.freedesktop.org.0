Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EDAC6372E31
	for <lists+dri-devel@lfdr.de>; Tue,  4 May 2021 18:41:54 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 56B396EB31;
	Tue,  4 May 2021 16:41:50 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 75FF46EB30;
 Tue,  4 May 2021 16:41:48 +0000 (UTC)
IronPort-SDR: aU4k4TcOA4PBh8M9Blt3kW3VV42c7DSiGyNWz8uvL3NpkJTmyPhbPQnYrs2fOtW6H+rvliEdU5
 HWZ0aeeM9xIA==
X-IronPort-AV: E=McAfee;i="6200,9189,9974"; a="185159704"
X-IronPort-AV: E=Sophos;i="5.82,272,1613462400"; d="scan'208";a="185159704"
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga101.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 04 May 2021 09:41:47 -0700
IronPort-SDR: JR5P8L59PXTQO5Mvcz5fQqoDxZUUX7FUTzR13h4dDcYL4T5D/RR0wuvrXHmaMPVgjZzOAYSMXP
 +ijKPeUtPR+w==
X-IronPort-AV: E=Sophos;i="5.82,272,1613462400"; d="scan'208";a="433357367"
Received: from mjjankow-mobl.ger.corp.intel.com (HELO
 mwauld-desk1.ger.corp.intel.com) ([10.252.21.117])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 04 May 2021 09:41:45 -0700
From: Matthew Auld <matthew.auld@intel.com>
To: intel-gfx@lists.freedesktop.org
Subject: [PATCH] drm/i915: drop the __i915_active_call pointer packing
Date: Tue,  4 May 2021 17:41:36 +0100
Message-Id: <20210504164136.96456-1-matthew.auld@intel.com>
X-Mailer: git-send-email 2.26.3
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V2UgdXNlIHNvbWUgb2YgdGhlIGxvd2VyIGJpdHMgb2YgdGhlIHJldGlyZSBmdW5jdGlvbiBwb2lu
dGVyIGZvcgpwb3RlbnRpYWwgZmxhZ3MsIHdoaWNoIGlzIHF1aXRlIHRob3JueSwgc2luY2UgdGhl
IGNhbGxlciBuZWVkcyB0bwpyZW1lbWJlciB0byBnaXZlIHRoZSBmdW5jdGlvbiB0aGUgY29ycmVj
dCBhbGlnbm1lbnQgd2l0aApfX2k5MTVfYWN0aXZlX2NhbGwsIG90aGVyd2lzZSB3ZSBtaWdodCBp
bmNvcnJlY3RseSB1bnBhY2sgdGhlIHBvaW50ZXIKYW5kIGp1bXAgdG8gc29tZSBnYXJiYWdlIGFk
ZHJlc3MgbGF0ZXIuIEluc3RlYWQgb2YgYWxsIHRoaXMgbGV0J3MganVzdApwYXNzIHRoZSBmbGFn
cyBhbG9uZyBhcyBhIHNlcGFyYXRlIHBhcmFtZXRlci4KClN1Z2dlc3RlZC1ieTogVmlsbGUgU3ly
asOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KU3VnZ2VzdGVkLWJ5OiBEYW5p
ZWwgVmV0dGVyIDxkYW5pZWxAZmZ3bGwuY2g+ClJlZmVyZW5jZXM6IGNhNDE5ZjQwN2I0MyAoImRy
bS9pOTE1OiBGaXggY3Jhc2ggaW4gYXV0b19yZXRpcmUiKQpSZWZlcmVuY2VzOiBkOGU0NGU0ZGQy
MjEgKCJkcm0vaTkxNS9vdmVybGF5OiBGaXggYWN0aXZlIHJldGlyZSBjYWxsYmFjayBhbGlnbm1l
bnQiKQpSZWZlcmVuY2VzOiBmZDVmMjYyZGIxMTggKCJkcm0vaTkxNS9zZWxmdGVzdHM6IEZpeCBh
Y3RpdmUgcmV0aXJlIGNhbGxiYWNrIGFsaWdubWVudCIpClNpZ25lZC1vZmYtYnk6IE1hdHRoZXcg
QXVsZCA8bWF0dGhldy5hdWxkQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2Zyb250YnVmZmVyLmMgICB8ICA0ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfb3ZlcmxheS5jICAgICAgIHwgIDUgKystLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMgICAgICAgIHwgIDMgKy0tCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9nZW42X3BwZ3R0LmMgICAgICAgICAgICAgICB8ICAyICstCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmMgICAgICAgICAgICB8ICAzICstLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ2d0dF9mZW5jaW5nLmMgICAgICAgfCAgMiAr
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfYnVmZmVyX3Bvb2wuYyAgICAgfCAg
MyArLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3RpbWVsaW5lLmMgICAgICAgICAg
IHwgIDQgKystLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvbW9ja19lbmdpbmUuYyAgICAgICAg
ICAgICAgfCAgMiArLQogLi4uL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9lbmdpbmVfaGVhcnRi
ZWF0LmMgICAgfCAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2FjdGl2ZS5jICAg
ICAgICAgICAgICAgICB8IDE0ICsrKysrLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2FjdGl2ZS5oICAgICAgICAgICAgICAgICB8IDExICsrKysrKy0tLS0tCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pOTE1X2FjdGl2ZV90eXBlcy5oICAgICAgICAgICB8ICA1IC0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jICAgICAgICAgICAgICAgICAgICB8ICAzICstLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVfYWN0aXZlLmMgICAgICAgfCAgNCAr
Ky0tCiAxNSBmaWxlcyBjaGFuZ2VkLCAyOCBpbnNlcnRpb25zKCspLCA0MSBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Zyb250YnVm
ZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Zyb250YnVmZmVyLmMK
aW5kZXggODE2MWQ0OWU3OGJhLi44ZTc1ZGViY2NlMWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZnJvbnRidWZmZXIuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2Zyb250YnVmZmVyLmMKQEAgLTIxMSw3ICsyMTEsNiBAQCBz
dGF0aWMgaW50IGZyb250YnVmZmVyX2FjdGl2ZShzdHJ1Y3QgaTkxNV9hY3RpdmUgKnJlZikKIAly
ZXR1cm4gMDsKIH0KIAotX19pOTE1X2FjdGl2ZV9jYWxsCiBzdGF0aWMgdm9pZCBmcm9udGJ1ZmZl
cl9yZXRpcmUoc3RydWN0IGk5MTVfYWN0aXZlICpyZWYpCiB7CiAJc3RydWN0IGludGVsX2Zyb250
YnVmZmVyICpmcm9udCA9CkBAIC0yNjYsNyArMjY1LDggQEAgaW50ZWxfZnJvbnRidWZmZXJfZ2V0
KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAJYXRvbWljX3NldCgmZnJvbnQtPmJp
dHMsIDApOwogCWk5MTVfYWN0aXZlX2luaXQoJmZyb250LT53cml0ZSwKIAkJCSBmcm9udGJ1ZmZl
cl9hY3RpdmUsCi0JCQkgaTkxNV9hY3RpdmVfbWF5X3NsZWVwKGZyb250YnVmZmVyX3JldGlyZSkp
OworCQkJIGZyb250YnVmZmVyX3JldGlyZSwKKwkJCSBJOTE1X0FDVElWRV9SRVRJUkVfU0xFRVBT
KTsKIAogCXNwaW5fbG9jaygmaTkxNS0+ZmJfdHJhY2tpbmcubG9jayk7CiAJaWYgKHJjdV9hY2Nl
c3NfcG9pbnRlcihvYmotPmZyb250YnVmZmVyKSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9vdmVybGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX292ZXJsYXkuYwppbmRleCA0Mjg4MTliYTE4ZGQuLmYxZTA0YzE1MzVjNyAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9vdmVybGF5LmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9vdmVybGF5LmMKQEAgLTM4
Myw4ICszODMsNyBAQCBzdGF0aWMgdm9pZCBpbnRlbF9vdmVybGF5X29mZl90YWlsKHN0cnVjdCBp
bnRlbF9vdmVybGF5ICpvdmVybGF5KQogCQlpODMwX292ZXJsYXlfY2xvY2tfZ2F0aW5nKGRldl9w
cml2LCB0cnVlKTsKIH0KIAotX19pOTE1X2FjdGl2ZV9jYWxsIHN0YXRpYyB2b2lkCi1pbnRlbF9v
dmVybGF5X2xhc3RfZmxpcF9yZXRpcmUoc3RydWN0IGk5MTVfYWN0aXZlICphY3RpdmUpCitzdGF0
aWMgdm9pZCBpbnRlbF9vdmVybGF5X2xhc3RfZmxpcF9yZXRpcmUoc3RydWN0IGk5MTVfYWN0aXZl
ICphY3RpdmUpCiB7CiAJc3RydWN0IGludGVsX292ZXJsYXkgKm92ZXJsYXkgPQogCQljb250YWlu
ZXJfb2YoYWN0aXZlLCB0eXBlb2YoKm92ZXJsYXkpLCBsYXN0X2ZsaXApOwpAQCAtMTQwMSw3ICsx
NDAwLDcgQEAgdm9pZCBpbnRlbF9vdmVybGF5X3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2YXRl
ICpkZXZfcHJpdikKIAlvdmVybGF5LT5zYXR1cmF0aW9uID0gMTQ2OwogCiAJaTkxNV9hY3RpdmVf
aW5pdCgmb3ZlcmxheS0+bGFzdF9mbGlwLAotCQkJIE5VTEwsIGludGVsX292ZXJsYXlfbGFzdF9m
bGlwX3JldGlyZSk7CisJCQkgTlVMTCwgaW50ZWxfb3ZlcmxheV9sYXN0X2ZsaXBfcmV0aXJlLCAw
KTsKIAogCXJldCA9IGdldF9yZWdpc3RlcnMob3ZlcmxheSwgT1ZFUkxBWV9ORUVEU19QSFlTSUNB
TChkZXZfcHJpdikpOwogCWlmIChyZXQpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVf
Z2VtX2NvbnRleHQuYwppbmRleCBmZDhlZTUyZTE3YTQuLjE4OGRlZTEzZTAxNyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCkBAIC0xMDQ2LDcgKzEwNDYs
NiBAQCBzdHJ1Y3QgY29udGV4dF9iYXJyaWVyX3Rhc2sgewogCXZvaWQgKmRhdGE7CiB9OwogCi1f
X2k5MTVfYWN0aXZlX2NhbGwKIHN0YXRpYyB2b2lkIGNiX3JldGlyZShzdHJ1Y3QgaTkxNV9hY3Rp
dmUgKmJhc2UpCiB7CiAJc3RydWN0IGNvbnRleHRfYmFycmllcl90YXNrICpjYiA9IGNvbnRhaW5l
cl9vZihiYXNlLCB0eXBlb2YoKmNiKSwgYmFzZSk7CkBAIC0xMDgwLDcgKzEwNzksNyBAQCBzdGF0
aWMgaW50IGNvbnRleHRfYmFycmllcl90YXNrKHN0cnVjdCBpOTE1X2dlbV9jb250ZXh0ICpjdHgs
CiAJaWYgKCFjYikKIAkJcmV0dXJuIC1FTk9NRU07CiAKLQlpOTE1X2FjdGl2ZV9pbml0KCZjYi0+
YmFzZSwgTlVMTCwgY2JfcmV0aXJlKTsKKwlpOTE1X2FjdGl2ZV9pbml0KCZjYi0+YmFzZSwgTlVM
TCwgY2JfcmV0aXJlLCAwKTsKIAllcnIgPSBpOTE1X2FjdGl2ZV9hY3F1aXJlKCZjYi0+YmFzZSk7
CiAJaWYgKGVycikgewogCQlrZnJlZShjYik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9nZW42X3BwZ3R0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9nZW42X3BwZ3R0
LmMKaW5kZXggMjFiMTA4NTc2OWJlLi4xYWVlNWU2YjFiMjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2d0L2dlbjZfcHBndHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9nZW42X3BwZ3R0LmMKQEAgLTM0Myw3ICszNDMsNyBAQCBzdGF0aWMgc3RydWN0IGk5MTVfdm1h
ICpwZF92bWFfY3JlYXRlKHN0cnVjdCBnZW42X3BwZ3R0ICpwcGd0dCwgaW50IHNpemUpCiAJaWYg
KCF2bWEpCiAJCXJldHVybiBFUlJfUFRSKC1FTk9NRU0pOwogCi0JaTkxNV9hY3RpdmVfaW5pdCgm
dm1hLT5hY3RpdmUsIE5VTEwsIE5VTEwpOworCWk5MTVfYWN0aXZlX2luaXQoJnZtYS0+YWN0aXZl
LCBOVUxMLCBOVUxMLCAwKTsKIAogCWtyZWZfaW5pdCgmdm1hLT5yZWYpOwogCW11dGV4X2luaXQo
JnZtYS0+cGFnZXNfbXV0ZXgpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfY29udGV4dC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfY29udGV4dC5j
CmluZGV4IDE3Y2YyNjQwYjA4Mi4uNDAzMzE4NGYxM2I5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9jb250ZXh0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfY29udGV4dC5jCkBAIC0zMjYsNyArMzI2LDYgQEAgdm9pZCBpbnRlbF9jb250ZXh0
X3VucGluKHN0cnVjdCBpbnRlbF9jb250ZXh0ICpjZSkKIAlpbnRlbF9jb250ZXh0X3B1dChjZSk7
CiB9CiAKLV9faTkxNV9hY3RpdmVfY2FsbAogc3RhdGljIHZvaWQgX19pbnRlbF9jb250ZXh0X3Jl
dGlyZShzdHJ1Y3QgaTkxNV9hY3RpdmUgKmFjdGl2ZSkKIHsKIAlzdHJ1Y3QgaW50ZWxfY29udGV4
dCAqY2UgPSBjb250YWluZXJfb2YoYWN0aXZlLCB0eXBlb2YoKmNlKSwgYWN0aXZlKTsKQEAgLTM4
NSw3ICszODQsNyBAQCBpbnRlbF9jb250ZXh0X2luaXQoc3RydWN0IGludGVsX2NvbnRleHQgKmNl
LCBzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJbXV0ZXhfaW5pdCgmY2UtPnBpbl9t
dXRleCk7CiAKIAlpOTE1X2FjdGl2ZV9pbml0KCZjZS0+YWN0aXZlLAotCQkJIF9faW50ZWxfY29u
dGV4dF9hY3RpdmUsIF9faW50ZWxfY29udGV4dF9yZXRpcmUpOworCQkJIF9faW50ZWxfY29udGV4
dF9hY3RpdmUsIF9faW50ZWxfY29udGV4dF9yZXRpcmUsIDApOwogfQogCiB2b2lkIGludGVsX2Nv
bnRleHRfZmluaShzdHJ1Y3QgaW50ZWxfY29udGV4dCAqY2UpCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9nZ3R0X2ZlbmNpbmcuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L2ludGVsX2dndHRfZmVuY2luZy5jCmluZGV4IDBmYTZjMzg4OTNmNy4uN2JmODRjZDIx
NTQzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9nZ3R0X2ZlbmNp
bmcuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9nZ3R0X2ZlbmNpbmcuYwpA
QCAtODY3LDcgKzg2Nyw3IEBAIHZvaWQgaW50ZWxfZ2d0dF9pbml0X2ZlbmNlcyhzdHJ1Y3QgaTkx
NV9nZ3R0ICpnZ3R0KQogCWZvciAoaSA9IDA7IGkgPCBudW1fZmVuY2VzOyBpKyspIHsKIAkJc3Ry
dWN0IGk5MTVfZmVuY2VfcmVnICpmZW5jZSA9ICZnZ3R0LT5mZW5jZV9yZWdzW2ldOwogCi0JCWk5
MTVfYWN0aXZlX2luaXQoJmZlbmNlLT5hY3RpdmUsIE5VTEwsIE5VTEwpOworCQlpOTE1X2FjdGl2
ZV9pbml0KCZmZW5jZS0+YWN0aXZlLCBOVUxMLCBOVUxMLCAwKTsKIAkJZmVuY2UtPmdndHQgPSBn
Z3R0OwogCQlmZW5jZS0+aWQgPSBpOwogCQlsaXN0X2FkZF90YWlsKCZmZW5jZS0+bGluaywgJmdn
dHQtPmZlbmNlX2xpc3QpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZ3RfYnVmZmVyX3Bvb2wuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2J1
ZmZlcl9wb29sLmMKaW5kZXggYzU5NDY4MTA3NTk4Li5hYTBhNTljNWI2MTQgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2d0X2J1ZmZlcl9wb29sLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfZ3RfYnVmZmVyX3Bvb2wuYwpAQCAtOTgsNyArOTgs
NiBAQCBzdGF0aWMgdm9pZCBwb29sX2ZyZWVfd29yayhzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndyaykK
IAkJCQkgICAgICByb3VuZF9qaWZmaWVzX3VwX3JlbGF0aXZlKEhaKSk7CiB9CiAKLV9faTkxNV9h
Y3RpdmVfY2FsbAogc3RhdGljIHZvaWQgcG9vbF9yZXRpcmUoc3RydWN0IGk5MTVfYWN0aXZlICpy
ZWYpCiB7CiAJc3RydWN0IGludGVsX2d0X2J1ZmZlcl9wb29sX25vZGUgKm5vZGUgPQpAQCAtMTU0
LDcgKzE1Myw3IEBAIG5vZGVfY3JlYXRlKHN0cnVjdCBpbnRlbF9ndF9idWZmZXJfcG9vbCAqcG9v
bCwgc2l6ZV90IHN6LAogCW5vZGUtPmFnZSA9IDA7CiAJbm9kZS0+cG9vbCA9IHBvb2w7CiAJbm9k
ZS0+cGlubmVkID0gZmFsc2U7Ci0JaTkxNV9hY3RpdmVfaW5pdCgmbm9kZS0+YWN0aXZlLCBOVUxM
LCBwb29sX3JldGlyZSk7CisJaTkxNV9hY3RpdmVfaW5pdCgmbm9kZS0+YWN0aXZlLCBOVUxMLCBw
b29sX3JldGlyZSwgMCk7CiAKIAlvYmogPSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX2ludGVybmFs
KGd0LT5pOTE1LCBzeik7CiAJaWYgKElTX0VSUihvYmopKSB7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfdGltZWxpbmUuYwppbmRleCBmMTljZjZkMmZhODUuLmM0YTEyNmM4Y2FlZiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfdGltZWxpbmUuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF90aW1lbGluZS5jCkBAIC0zMiw3ICszMiw2IEBA
IHN0YXRpYyBzdHJ1Y3QgaTkxNV92bWEgKmh3c3BfYWxsb2Moc3RydWN0IGludGVsX2d0ICpndCkK
IAlyZXR1cm4gdm1hOwogfQogCi1fX2k5MTVfYWN0aXZlX2NhbGwKIHN0YXRpYyB2b2lkIF9fdGlt
ZWxpbmVfcmV0aXJlKHN0cnVjdCBpOTE1X2FjdGl2ZSAqYWN0aXZlKQogewogCXN0cnVjdCBpbnRl
bF90aW1lbGluZSAqdGwgPQpAQCAtMTA0LDcgKzEwMyw4IEBAIHN0YXRpYyBpbnQgaW50ZWxfdGlt
ZWxpbmVfaW5pdChzdHJ1Y3QgaW50ZWxfdGltZWxpbmUgKnRpbWVsaW5lLAogCUlOSVRfTElTVF9I
RUFEKCZ0aW1lbGluZS0+cmVxdWVzdHMpOwogCiAJaTkxNV9zeW5jbWFwX2luaXQoJnRpbWVsaW5l
LT5zeW5jKTsKLQlpOTE1X2FjdGl2ZV9pbml0KCZ0aW1lbGluZS0+YWN0aXZlLCBfX3RpbWVsaW5l
X2FjdGl2ZSwgX190aW1lbGluZV9yZXRpcmUpOworCWk5MTVfYWN0aXZlX2luaXQoJnRpbWVsaW5l
LT5hY3RpdmUsIF9fdGltZWxpbmVfYWN0aXZlLAorCQkJIF9fdGltZWxpbmVfcmV0aXJlLCAwKTsK
IAogCXJldHVybiAwOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvbW9j
a19lbmdpbmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L21vY2tfZW5naW5lLmMKaW5kZXgg
ZTFiYTAzYjkzZmZhLi4zMjU4OWM2NjI1ZTEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d0L21vY2tfZW5naW5lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvbW9ja19l
bmdpbmUuYwpAQCAtNTUsNyArNTUsNyBAQCBzdGF0aWMgc3RydWN0IGludGVsX3JpbmcgKm1vY2tf
cmluZyhzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJCWtmcmVlKHJpbmcpOwogCQly
ZXR1cm4gTlVMTDsKIAl9Ci0JaTkxNV9hY3RpdmVfaW5pdCgmcmluZy0+dm1hLT5hY3RpdmUsIE5V
TEwsIE5VTEwpOworCWk5MTVfYWN0aXZlX2luaXQoJnJpbmctPnZtYS0+YWN0aXZlLCBOVUxMLCBO
VUxMLCAwKTsKIAlfX3NldF9iaXQoSTkxNV9WTUFfR0dUVF9CSVQsIF9faTkxNV92bWFfZmxhZ3Mo
cmluZy0+dm1hKSk7CiAJX19zZXRfYml0KERSTV9NTV9OT0RFX0FMTE9DQVRFRF9CSVQsICZyaW5n
LT52bWEtPm5vZGUuZmxhZ3MpOwogCXJpbmctPnZtYS0+bm9kZS5zaXplID0gc3o7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9lbmdpbmVfaGVhcnRiZWF0LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9zZWxmdGVzdF9lbmdpbmVfaGVhcnRiZWF0LmMKaW5k
ZXggZmNkZTIyM2UyNmZmLi40ODk2ZTRjY2FkNTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L3NlbGZ0ZXN0X2VuZ2luZV9oZWFydGJlYXQuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9zZWxmdGVzdF9lbmdpbmVfaGVhcnRiZWF0LmMKQEAgLTYzLDcgKzYzLDcgQEAg
c3RhdGljIHZvaWQgcHVsc2VfcHV0KHN0cnVjdCBwdWxzZSAqcCkKIAlrcmVmX3B1dCgmcC0+a3Jl
ZiwgcHVsc2VfZnJlZSk7CiB9CiAKLV9faTkxNV9hY3RpdmVfY2FsbCBzdGF0aWMgdm9pZCBwdWxz
ZV9yZXRpcmUoc3RydWN0IGk5MTVfYWN0aXZlICphY3RpdmUpCitzdGF0aWMgdm9pZCBwdWxzZV9y
ZXRpcmUoc3RydWN0IGk5MTVfYWN0aXZlICphY3RpdmUpCiB7CiAJcHVsc2VfcHV0KGNvbnRhaW5l
cl9vZihhY3RpdmUsIHN0cnVjdCBwdWxzZSwgYWN0aXZlKSk7CiB9CkBAIC03Nyw3ICs3Nyw3IEBA
IHN0YXRpYyBzdHJ1Y3QgcHVsc2UgKnB1bHNlX2NyZWF0ZSh2b2lkKQogCQlyZXR1cm4gcDsKIAog
CWtyZWZfaW5pdCgmcC0+a3JlZik7Ci0JaTkxNV9hY3RpdmVfaW5pdCgmcC0+YWN0aXZlLCBwdWxz
ZV9hY3RpdmUsIHB1bHNlX3JldGlyZSk7CisJaTkxNV9hY3RpdmVfaW5pdCgmcC0+YWN0aXZlLCBw
dWxzZV9hY3RpdmUsIHB1bHNlX3JldGlyZSwgMCk7CiAKIAlyZXR1cm4gcDsKIH0KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfYWN0aXZlLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2FjdGl2ZS5jCmluZGV4IGFhNTczYjA3OGFlNy4uYjFhYTFjNDgyYzMyIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2FjdGl2ZS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfYWN0aXZlLmMKQEAgLTM0MywxOCArMzQzLDE1IEBAIGFjdGl2ZV9p
bnN0YW5jZShzdHJ1Y3QgaTkxNV9hY3RpdmUgKnJlZiwgdTY0IGlkeCkKIHZvaWQgX19pOTE1X2Fj
dGl2ZV9pbml0KHN0cnVjdCBpOTE1X2FjdGl2ZSAqcmVmLAogCQkJaW50ICgqYWN0aXZlKShzdHJ1
Y3QgaTkxNV9hY3RpdmUgKnJlZiksCiAJCQl2b2lkICgqcmV0aXJlKShzdHJ1Y3QgaTkxNV9hY3Rp
dmUgKnJlZiksCisJCQl1bnNpZ25lZCBsb25nIGZsYWdzLAogCQkJc3RydWN0IGxvY2tfY2xhc3Nf
a2V5ICpta2V5LAogCQkJc3RydWN0IGxvY2tfY2xhc3Nfa2V5ICp3a2V5KQogewotCXVuc2lnbmVk
IGxvbmcgYml0czsKLQogCWRlYnVnX2FjdGl2ZV9pbml0KHJlZik7CiAKLQlyZWYtPmZsYWdzID0g
MDsKKwlyZWYtPmZsYWdzID0gZmxhZ3M7CiAJcmVmLT5hY3RpdmUgPSBhY3RpdmU7Ci0JcmVmLT5y
ZXRpcmUgPSBwdHJfdW5wYWNrX2JpdHMocmV0aXJlLCAmYml0cywgMik7Ci0JaWYgKGJpdHMgJiBJ
OTE1X0FDVElWRV9NQVlfU0xFRVApCi0JCXJlZi0+ZmxhZ3MgfD0gSTkxNV9BQ1RJVkVfUkVUSVJF
X1NMRUVQUzsKKwlyZWYtPnJldGlyZSA9IHJldGlyZTsKIAogCXNwaW5fbG9ja19pbml0KCZyZWYt
PnRyZWVfbG9jayk7CiAJcmVmLT50cmVlID0gUkJfUk9PVDsKQEAgLTExNTYsOCArMTE1Myw3IEBA
IHN0YXRpYyBpbnQgYXV0b19hY3RpdmUoc3RydWN0IGk5MTVfYWN0aXZlICpyZWYpCiAJcmV0dXJu
IDA7CiB9CiAKLV9faTkxNV9hY3RpdmVfY2FsbCBzdGF0aWMgdm9pZAotYXV0b19yZXRpcmUoc3Ry
dWN0IGk5MTVfYWN0aXZlICpyZWYpCitzdGF0aWMgdm9pZCBhdXRvX3JldGlyZShzdHJ1Y3QgaTkx
NV9hY3RpdmUgKnJlZikKIHsKIAlpOTE1X2FjdGl2ZV9wdXQocmVmKTsKIH0KQEAgLTExNzEsNyAr
MTE2Nyw3IEBAIHN0cnVjdCBpOTE1X2FjdGl2ZSAqaTkxNV9hY3RpdmVfY3JlYXRlKHZvaWQpCiAJ
CXJldHVybiBOVUxMOwogCiAJa3JlZl9pbml0KCZhYS0+cmVmKTsKLQlpOTE1X2FjdGl2ZV9pbml0
KCZhYS0+YmFzZSwgYXV0b19hY3RpdmUsIGF1dG9fcmV0aXJlKTsKKwlpOTE1X2FjdGl2ZV9pbml0
KCZhYS0+YmFzZSwgYXV0b19hY3RpdmUsIGF1dG9fcmV0aXJlLCAwKTsKIAogCXJldHVybiAmYWEt
PmJhc2U7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2FjdGl2ZS5o
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9hY3RpdmUuaAppbmRleCBmYjE2NWQzZjAxY2Yu
LmQwZmVkYTY4Yjg3NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9hY3Rp
dmUuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2FjdGl2ZS5oCkBAIC0xNTIsMTUg
KzE1MiwxNiBAQCBpOTE1X2FjdGl2ZV9mZW5jZV9pc3NldChjb25zdCBzdHJ1Y3QgaTkxNV9hY3Rp
dmVfZmVuY2UgKmFjdGl2ZSkKIHZvaWQgX19pOTE1X2FjdGl2ZV9pbml0KHN0cnVjdCBpOTE1X2Fj
dGl2ZSAqcmVmLAogCQkJaW50ICgqYWN0aXZlKShzdHJ1Y3QgaTkxNV9hY3RpdmUgKnJlZiksCiAJ
CQl2b2lkICgqcmV0aXJlKShzdHJ1Y3QgaTkxNV9hY3RpdmUgKnJlZiksCisJCQl1bnNpZ25lZCBs
b25nIGZsYWdzLAogCQkJc3RydWN0IGxvY2tfY2xhc3Nfa2V5ICpta2V5LAogCQkJc3RydWN0IGxv
Y2tfY2xhc3Nfa2V5ICp3a2V5KTsKIAogLyogU3BlY2lhbGlzZSBlYWNoIGNsYXNzIG9mIGk5MTVf
YWN0aXZlIHRvIGF2b2lkIGltcG9zc2libGUgbG9ja2RlcCBjeWNsZXMuICovCi0jZGVmaW5lIGk5
MTVfYWN0aXZlX2luaXQocmVmLCBhY3RpdmUsIHJldGlyZSkgZG8gewkJXAotCXN0YXRpYyBzdHJ1
Y3QgbG9ja19jbGFzc19rZXkgX19ta2V5OwkJCQlcCi0Jc3RhdGljIHN0cnVjdCBsb2NrX2NsYXNz
X2tleSBfX3drZXk7CQkJCVwKLQkJCQkJCQkJCVwKLQlfX2k5MTVfYWN0aXZlX2luaXQocmVmLCBh
Y3RpdmUsIHJldGlyZSwgJl9fbWtleSwgJl9fd2tleSk7CVwKKyNkZWZpbmUgaTkxNV9hY3RpdmVf
aW5pdChyZWYsIGFjdGl2ZSwgcmV0aXJlLCBmbGFncykgZG8gewkJCVwKKwlzdGF0aWMgc3RydWN0
IGxvY2tfY2xhc3Nfa2V5IF9fbWtleTsJCQkJCVwKKwlzdGF0aWMgc3RydWN0IGxvY2tfY2xhc3Nf
a2V5IF9fd2tleTsJCQkJCVwKKwkJCQkJCQkJCQlcCisJX19pOTE1X2FjdGl2ZV9pbml0KHJlZiwg
YWN0aXZlLCByZXRpcmUsIGZsYWdzLCAmX19ta2V5LCAmX193a2V5KTsJXAogfSB3aGlsZSAoMCkK
IAogc3RydWN0IGRtYV9mZW5jZSAqCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2FjdGl2ZV90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9hY3RpdmVfdHlw
ZXMuaAppbmRleCA2MzYwYzNlNGI3NjUuLmMxNDlmMzQ4YTk3MiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV9hY3RpdmVfdHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2FjdGl2ZV90eXBlcy5oCkBAIC0yNCwxMSArMjQsNiBAQCBzdHJ1Y3QgaTkxNV9h
Y3RpdmVfZmVuY2UgewogCiBzdHJ1Y3QgYWN0aXZlX25vZGU7CiAKLSNkZWZpbmUgSTkxNV9BQ1RJ
VkVfTUFZX1NMRUVQIEJJVCgwKQotCi0jZGVmaW5lIF9faTkxNV9hY3RpdmVfY2FsbCBfX2FsaWdu
ZWQoNCkKLSNkZWZpbmUgaTkxNV9hY3RpdmVfbWF5X3NsZWVwKGZuKSBwdHJfcGFja19iaXRzKCYo
Zm4pLCBJOTE1X0FDVElWRV9NQVlfU0xFRVAsIDIpCi0KIHN0cnVjdCBpOTE1X2FjdGl2ZSB7CiAJ
YXRvbWljX3QgY291bnQ7CiAJc3RydWN0IG11dGV4IG11dGV4OwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1h
LmMKaW5kZXggNDY4MzE3ZTNiNDc3Li5hNmNkMGZhNjI4NDcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2k5MTVfdm1hLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92
bWEuYwpAQCAtOTQsNyArOTQsNiBAQCBzdGF0aWMgaW50IF9faTkxNV92bWFfYWN0aXZlKHN0cnVj
dCBpOTE1X2FjdGl2ZSAqcmVmKQogCXJldHVybiBpOTE1X3ZtYV90cnlnZXQoYWN0aXZlX3RvX3Zt
YShyZWYpKSA/IDAgOiAtRU5PRU5UOwogfQogCi1fX2k5MTVfYWN0aXZlX2NhbGwKIHN0YXRpYyB2
b2lkIF9faTkxNV92bWFfcmV0aXJlKHN0cnVjdCBpOTE1X2FjdGl2ZSAqcmVmKQogewogCWk5MTVf
dm1hX3B1dChhY3RpdmVfdG9fdm1hKHJlZikpOwpAQCAtMTI1LDcgKzEyNCw3IEBAIHZtYV9jcmVh
dGUoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAl2bWEtPnNpemUgPSBvYmotPmJh
c2Uuc2l6ZTsKIAl2bWEtPmRpc3BsYXlfYWxpZ25tZW50ID0gSTkxNV9HVFRfTUlOX0FMSUdOTUVO
VDsKIAotCWk5MTVfYWN0aXZlX2luaXQoJnZtYS0+YWN0aXZlLCBfX2k5MTVfdm1hX2FjdGl2ZSwg
X19pOTE1X3ZtYV9yZXRpcmUpOworCWk5MTVfYWN0aXZlX2luaXQoJnZtYS0+YWN0aXZlLCBfX2k5
MTVfdm1hX2FjdGl2ZSwgX19pOTE1X3ZtYV9yZXRpcmUsIDApOwogCiAJLyogRGVjbGFyZSBvdXJz
ZWx2ZXMgc2FmZSBmb3IgdXNlIGluc2lkZSBzaHJpbmtlcnMgKi8KIAlpZiAoSVNfRU5BQkxFRChD
T05GSUdfTE9DS0RFUCkpIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0
ZXN0cy9pOTE1X2FjdGl2ZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL2k5MTVf
YWN0aXZlLmMKaW5kZXggMWFhNTJiNWNjNDg4Li42MWJmNDU2MGQ4YWYgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2FjdGl2ZS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2FjdGl2ZS5jCkBAIC01MSw3ICs1MSw3IEBAIHN0
YXRpYyBpbnQgX19saXZlX2FjdGl2ZShzdHJ1Y3QgaTkxNV9hY3RpdmUgKmJhc2UpCiAJcmV0dXJu
IDA7CiB9CiAKLV9faTkxNV9hY3RpdmVfY2FsbCBzdGF0aWMgdm9pZCBfX2xpdmVfcmV0aXJlKHN0
cnVjdCBpOTE1X2FjdGl2ZSAqYmFzZSkKK3N0YXRpYyB2b2lkIF9fbGl2ZV9yZXRpcmUoc3RydWN0
IGk5MTVfYWN0aXZlICpiYXNlKQogewogCXN0cnVjdCBsaXZlX2FjdGl2ZSAqYWN0aXZlID0gY29u
dGFpbmVyX29mKGJhc2UsIHR5cGVvZigqYWN0aXZlKSwgYmFzZSk7CiAKQEAgLTY4LDcgKzY4LDcg
QEAgc3RhdGljIHN0cnVjdCBsaXZlX2FjdGl2ZSAqX19saXZlX2FsbG9jKHN0cnVjdCBkcm1faTkx
NV9wcml2YXRlICppOTE1KQogCQlyZXR1cm4gTlVMTDsKIAogCWtyZWZfaW5pdCgmYWN0aXZlLT5y
ZWYpOwotCWk5MTVfYWN0aXZlX2luaXQoJmFjdGl2ZS0+YmFzZSwgX19saXZlX2FjdGl2ZSwgX19s
aXZlX3JldGlyZSk7CisJaTkxNV9hY3RpdmVfaW5pdCgmYWN0aXZlLT5iYXNlLCBfX2xpdmVfYWN0
aXZlLCBfX2xpdmVfcmV0aXJlLCAwKTsKIAogCXJldHVybiBhY3RpdmU7CiB9Ci0tIAoyLjI2LjMK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZl
bCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
