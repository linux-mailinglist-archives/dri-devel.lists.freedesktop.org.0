Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A524F100079
	for <lists+dri-devel@lfdr.de>; Mon, 18 Nov 2019 09:37:21 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 384166E0BB;
	Mon, 18 Nov 2019 08:37:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mo6-p01-ob.smtp.rzone.de (mo6-p01-ob.smtp.rzone.de
 [IPv6:2a01:238:20a:202:5301::10])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D99AE89E23
 for <dri-devel@lists.freedesktop.org>; Sun, 17 Nov 2019 19:23:09 +0000 (UTC)
X-RZG-AUTH: ":JGIXVUS7cutRB/49FwqZ7WcJeFKiMgPgp8VKxflSZ1P34KBj5Qpw97WFDlSaXA4JLWE="
X-RZG-CLASS-ID: mo00
Received: from imac.fritz.box by smtp.strato.de (RZmta 44.29.0 DYNA|AUTH)
 with ESMTPSA id L09db3vAHJN5P6e
 (using TLSv1 with cipher ECDHE-RSA-AES256-SHA (curve secp521r1 with 521 ECDH
 bits, eq. 15360 bits RSA)) (Client did not present a certificate);
 Sun, 17 Nov 2019 20:23:05 +0100 (CET)
Mime-Version: 1.0 (Mac OS X Mail 9.3 \(3124\))
Subject: Re: [RFCv1 32/42] drm/omap: dsi: convert to drm_panel
From: "H. Nikolaus Schaller" <hns@goldelico.com>
In-Reply-To: <20191117024028.2233-33-sebastian.reichel@collabora.com>
Date: Sun, 17 Nov 2019 20:23:05 +0100
Message-Id: <D109D867-1C8E-44F6-9C91-AF55BCB3FDD3@goldelico.com>
References: <20191117024028.2233-1-sebastian.reichel@collabora.com>
 <20191117024028.2233-33-sebastian.reichel@collabora.com>
To: Sebastian Reichel <sebastian.reichel@collabora.com>
X-Mailer: Apple Mail (2.3124)
X-Mailman-Approved-At: Mon, 18 Nov 2019 08:36:58 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 t=1574018587; 
 s=strato-dkim-0002; d=goldelico.com;
 h=To:References:Message-Id:Cc:Date:In-Reply-To:From:Subject:
 X-RZG-CLASS-ID:X-RZG-AUTH:From:Subject:Sender;
 bh=rgiZXi+ar+VnJzZLC/PH3gwZjuNS22z31UtkdK9GzIc=;
 b=MEAj/Sh+lpR40BJOq888Qqz4HYzEyCj2xa4CHVkl+gBwWpk7OuTooteYMitaKvgqoq
 tt30yRo9sOH0NVyB0WWlmFvxcGN4ShOixfJHJt0kCc4kMFw1FJGGGTzUNQRHWegzbGY+
 HezVaXoeFgsNVEE6EnQ78WwA6tI/GNoePc+I/7LQ41jBouBfQnnbAe5keCivbY2z42uT
 hE/gvNsXKlhMApQvxZdiIpkbvnIKPf6vh2Bjn5JELGc4xZEDbui99O2iAhvwlpngwyaQ
 hpf+Z10ha1KSR379+nF2Nr+gf6McHWSdrYnUv9JUD8DfiGjhCKWYfveD7IbQkqBBSNhj
 7xlQ==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: kernel@collabora.com, Tony Lindgren <tony@atomide.com>,
 Merlijn Wajer <merlijn@wizzup.org>, Sebastian Reichel <sre@kernel.org>,
 dri-devel@lists.freedesktop.org, Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 linux-omap@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGksCgo+IEFtIDE3LjExLjIwMTkgdW0gMDM6NDAgc2NocmllYiBTZWJhc3RpYW4gUmVpY2hlbCA8
c2ViYXN0aWFuLnJlaWNoZWxAY29sbGFib3JhLmNvbT46Cj4gCj4gVGhpcyBjb252ZXJ0cyB0aGUg
RFNJIG1vZHVsZSB0byBleHBlY3QgY29tbW9uIGRybV9wYW5lbCBkaXNwbGF5Cj4gZHJpdmVycyBp
bnN0ZWFkIG9mIGRzc2RldiBiYXNlZCBvbmVzLgo+IAo+IFRoaXMgY29tbWl0IGlzIFdJUC4gV2Ug
c29tZWhvdyBuZWVkIHRvIGtub3cgdGhlIHBhbmVscyByZXNvbHV0aW9uCj4gaW4gb21hcF9kc2lf
aG9zdF9hdHRhY2goKSwgc28gdGhhdCB3ZSBjYW4gcHJvcGVybHkgY29uZmlndXJlIHRoZQo+IERT
SSBidXMgY2xvY2sgYmVmb3JlIGVuYWJsaW5nIHRoZSBidXMuIFRoZSBjb250cm9sIGJ1cyBtdXN0
IGJlCj4gZW5hYmxlZCBhdCB0aGlzIHBvaW50LCBzbyB0aGF0IHRoZSBwYW5lbCBjYW4gdXNlIGl0
Lgo+IAo+IE90aGVyIGRyaXZlcnMgcnVuIGRybV9wYW5lbF9hdHRhY2goKSBpbiB0aGVpciBkc2kg
aG9zdCBhdHRhY2gsCj4gd2hpY2ggbWFrZXMgaXQgcG9zc2libGUgdG8gY2FsbCBkcm1fcGFuZWxf
Z2V0X21vZGVzKCkgYWZ0ZXJ3YXJkcwo+IGFuZCB0aGUgZ2V0IHRoZSBjb3JyZWN0IG1vZGUgZnJv
bSB0aGUgY29ubmVjdG9yLgo+IAo+IFNpZ25lZC1vZmYtYnk6IFNlYmFzdGlhbiBSZWljaGVsIDxz
ZWJhc3RpYW4ucmVpY2hlbEBjb2xsYWJvcmEuY29tPgo+IC0tLQo+IC4uLi9ncHUvZHJtL29tYXBk
cm0vZGlzcGxheXMvcGFuZWwtZHNpLWNtLmMgICB8IDIxNyArKysrKysrLS0tLS0tLS0tLS0KPiBk
cml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvZHNpLmMgICAgICAgICAgICAgfCAxNDEgKysrKysr
KysrKy0tCj4gLi4uL2dwdS9kcm0vb21hcGRybS9kc3Mvb21hcGRzcy1ib290LWluaXQuYyAgIHwg
ICAxIC0KPiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb21hcGRzcy5oICAgICAgICAgfCAg
MjIgKy0KPiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2NydGMuYyAgICAgICAgICAgfCAg
MTcgKy0KPiA1IGZpbGVzIGNoYW5nZWQsIDIwNSBpbnNlcnRpb25zKCspLCAxOTMgZGVsZXRpb25z
KC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL3Bh
bmVsLWRzaS1jbS5jIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvcGFuZWwtZHNp
LWNtLmMKPiBpbmRleCAxODAyMGFjNDNhODMuLjg0YjBlNzljMDI1ZSAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vb21hcGRybS9kaXNwbGF5cy9wYW5lbC1kc2ktY20uYwo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL3BhbmVsLWRzaS1jbS5jCj4gQEAgLTYsOCAr
Niw2IEBACj4gICogQXV0aG9yOiBUb21pIFZhbGtlaW5lbiA8dG9taS52YWxrZWluZW5AdGkuY29t
Pgo+ICAqLwo+IAo+IC0vKiAjZGVmaW5lIERFQlVHICovCj4gLQo+ICNpbmNsdWRlIDxsaW51eC9i
YWNrbGlnaHQuaD4KPiAjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KPiAjaW5jbHVkZSA8bGludXgv
Z3Bpby9jb25zdW1lci5oPgo+IEBAIC0yMCwxMSArMTgsMTQgQEAKPiAjaW5jbHVkZSA8bGludXgv
cmVndWxhdG9yL2NvbnN1bWVyLmg+Cj4gCj4gI2luY2x1ZGUgPGRybS9kcm1fY29ubmVjdG9yLmg+
Cj4gKyNpbmNsdWRlIDxkcm0vZHJtX21pcGlfZHNpLmg+Cj4gKyNpbmNsdWRlIDxkcm0vZHJtX3Bh
bmVsLmg+Cj4gKyNpbmNsdWRlIDxkcm0vZHJtX21vZGVzLmg+Cj4gCj4gKyNpbmNsdWRlIDx2aWRl
by9kaXNwbGF5X3RpbWluZy5oPgo+ICNpbmNsdWRlIDx2aWRlby9taXBpX2Rpc3BsYXkuaD4KPiAj
aW5jbHVkZSA8dmlkZW8vb2ZfZGlzcGxheV90aW1pbmcuaD4KPiAtCj4gLSNpbmNsdWRlICIuLi9k
c3Mvb21hcGRzcy5oIgo+ICsjaW5jbHVkZSA8dmlkZW8vdmlkZW9tb2RlLmg+Cj4gCj4gI2RlZmlu
ZSBEQ1NfUkVBRF9OVU1fRVJST1JTCTB4MDUKPiAjZGVmaW5lIERDU19HRVRfSUQxCQkweGRhCj4g
QEAgLTM1LDExICszNiw4IEBACj4gCj4gc3RydWN0IHBhbmVsX2Rydl9kYXRhIHsKPiAJc3RydWN0
IG1pcGlfZHNpX2RldmljZSAqZHNpOwo+IC0KPiAtCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgZHNz
ZGV2Owo+IC0Jc3RydWN0IG9tYXBfZHNzX2RldmljZSAqc3JjOwo+IC0KPiAtCXN0cnVjdCB2aWRl
b21vZGUgdm07Cj4gKwlzdHJ1Y3QgZHJtX3BhbmVsIHBhbmVsOwo+ICsJc3RydWN0IGRybV9kaXNw
bGF5X21vZGUgbW9kZTsKPiAKPiAJc3RydWN0IG11dGV4IGxvY2s7Cj4gCj4gQEAgLTcxLDcgKzY5
LDExIEBAIHN0cnVjdCBwYW5lbF9kcnZfZGF0YSB7Cj4gCWJvb2wgdWxwc19lbmFibGVkOwo+IH07
Cj4gCj4gLSNkZWZpbmUgdG9fcGFuZWxfZGF0YShwKSBjb250YWluZXJfb2YocCwgc3RydWN0IHBh
bmVsX2Rydl9kYXRhLCBkc3NkZXYpCj4gKwo+ICtzdGF0aWMgaW5saW5lIHN0cnVjdCBwYW5lbF9k
cnZfZGF0YSAqcGFuZWxfdG9fZGRhdGEoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCj4gK3sKPiAr
CXJldHVybiBjb250YWluZXJfb2YocGFuZWwsIHN0cnVjdCBwYW5lbF9kcnZfZGF0YSwgcGFuZWwp
Owo+ICt9Cj4gCj4gc3RhdGljIGludCBfZHNpY21fZW5hYmxlX3RlKHN0cnVjdCBwYW5lbF9kcnZf
ZGF0YSAqZGRhdGEsIGJvb2wgZW5hYmxlKTsKPiAKPiBAQCAtMjg1LDEwICsyODcsMTUgQEAgc3Rh
dGljIHZvaWQgZHNpY21faHdfcmVzZXQoc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSkKPiAK
PiBzdGF0aWMgaW50IGRzaWNtX3Bvd2VyX29uKHN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEp
Cj4gewo+IC0Jc3RydWN0IG9tYXBfZHNzX2RldmljZSAqc3JjID0gZGRhdGEtPnNyYzsKPiAJdTgg
aWQxLCBpZDIsIGlkMzsKPiAJaW50IHI7Cj4gCj4gKwlyID0gcmVndWxhdG9yX2J1bGtfZW5hYmxl
KERDU19SRUdVTEFUT1JfU1VQUExZX05VTSwgZGRhdGEtPnN1cHBsaWVzKTsKPiArCWlmIChyKSB7
Cj4gKwkJZGV2X2VycigmZGRhdGEtPmRzaS0+ZGV2LCAiZmFpbGVkIHRvIGVuYWJsZSBzdXBwbGll
czogJWRcbiIsIHIpOwo+ICsJCXJldHVybiByOwo+ICsJfQo+ICsKPiAJZHNpY21faHdfcmVzZXQo
ZGRhdGEpOwo+IAo+IAlkZGF0YS0+ZHNpLT5tb2RlX2ZsYWdzIHw9IE1JUElfRFNJX01PREVfTFBN
Owo+IEBAIC0zMjIsMTAgKzMyOSw2IEBAIHN0YXRpYyBpbnQgZHNpY21fcG93ZXJfb24oc3RydWN0
IHBhbmVsX2Rydl9kYXRhICpkZGF0YSkKPiAJaWYgKHIpCj4gCQlnb3RvIGVycjsKPiAKPiAtCXIg
PSBzcmMtPm9wcy0+ZHNpLmVuYWJsZV92aWRlb19vdXRwdXQoc3JjLCBkZGF0YS0+ZHNpLT5jaGFu
bmVsKTsKPiAtCWlmIChyKQo+IC0JCWdvdG8gZXJyOwo+IC0KPiAJZGRhdGEtPmVuYWJsZWQgPSAx
Owo+IAo+IAlpZiAoIWRkYXRhLT5pbnRyb19wcmludGVkKSB7Cj4gQEAgLTM0MiwxOCArMzQ1LDE3
IEBAIHN0YXRpYyBpbnQgZHNpY21fcG93ZXJfb24oc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0
YSkKPiAKPiAJZHNpY21faHdfcmVzZXQoZGRhdGEpOwo+IAo+ICsJcmVndWxhdG9yX2J1bGtfZGlz
YWJsZShEQ1NfUkVHVUxBVE9SX1NVUFBMWV9OVU0sIGRkYXRhLT5zdXBwbGllcyk7Cj4gKwo+IAly
ZXR1cm4gcjsKPiB9Cj4gCj4gLXN0YXRpYyB2b2lkIGRzaWNtX3Bvd2VyX29mZihzdHJ1Y3QgcGFu
ZWxfZHJ2X2RhdGEgKmRkYXRhKQo+ICtzdGF0aWMgaW50IGRzaWNtX3Bvd2VyX29mZihzdHJ1Y3Qg
cGFuZWxfZHJ2X2RhdGEgKmRkYXRhKQo+IHsKPiAtCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKnNy
YyA9IGRkYXRhLT5zcmM7Cj4gCWludCByOwo+IAo+IAlkZGF0YS0+ZW5hYmxlZCA9IDA7Cj4gCj4g
LQlzcmMtPm9wcy0+ZHNpLmRpc2FibGVfdmlkZW9fb3V0cHV0KHNyYywgZGRhdGEtPmRzaS0+Y2hh
bm5lbCk7Cj4gLQo+IAlyID0gbWlwaV9kc2lfZGNzX3NldF9kaXNwbGF5X29mZihkZGF0YS0+ZHNp
KTsKPiAJaWYgKCFyKQo+IAkJciA9IGRzaWNtX3NsZWVwX2luKGRkYXRhKTsKPiBAQCAtMzYzLDUy
ICszNjUsMTcgQEAgc3RhdGljIHZvaWQgZHNpY21fcG93ZXJfb2ZmKHN0cnVjdCBwYW5lbF9kcnZf
ZGF0YSAqZGRhdGEpCj4gCQkJCSJlcnJvciBkaXNhYmxpbmcgcGFuZWwsIGlzc3VpbmcgSFcgcmVz
ZXRcbiIpOwo+IAkJZHNpY21faHdfcmVzZXQoZGRhdGEpOwo+IAl9Cj4gLX0KPiAKPiAtc3RhdGlj
IGludCBkc2ljbV9jb25uZWN0KHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKnNyYywKPiAtCQkJIHN0
cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzdCkKPiAtewo+IC0Jc3RydWN0IHBhbmVsX2Rydl9kYXRh
ICpkZGF0YSA9IHRvX3BhbmVsX2RhdGEoZHN0KTsKPiAtCj4gLQlkZGF0YS0+c3JjID0gc3JjOwo+
IC0JcmV0dXJuIDA7Cj4gLX0KPiAtCj4gLXN0YXRpYyB2b2lkIGRzaWNtX2Rpc2Nvbm5lY3Qoc3Ry
dWN0IG9tYXBfZHNzX2RldmljZSAqc3JjLAo+IC0JCQkgICAgIHN0cnVjdCBvbWFwX2Rzc19kZXZp
Y2UgKmRzdCkKPiAtewo+IC0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHRvX3BhbmVs
X2RhdGEoZHN0KTsKPiAtCj4gLQlkZGF0YS0+c3JjID0gTlVMTDsKPiAtfQo+IC0KPiAtc3RhdGlj
IHZvaWQgZHNpY21fcHJlX2VuYWJsZShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYpCj4g
LXsKPiAtCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSB0b19wYW5lbF9kYXRhKGRzc2Rl
dik7Cj4gLQlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpzcmMgPSBkZGF0YS0+c3JjOwo+IC0JaW50
IHI7Cj4gLQlzdHJ1Y3Qgb21hcF9kc3NfZHNpX2NvbmZpZyBkc2lfY29uZmlnID0gewo+IC0JCS52
bSA9ICZkZGF0YS0+dm0sCj4gLQkJLmhzX2Nsa19taW4gPSAxNTAwMDAwMDAsCj4gLQkJLmhzX2Ns
a19tYXggPSAzMDAwMDAwMDAsCj4gLQkJLmxwX2Nsa19taW4gPSA3MDAwMDAwLAo+IC0JCS5scF9j
bGtfbWF4ID0gMTAwMDAwMDAsCj4gLQl9Owo+IC0KPiAtCXIgPSByZWd1bGF0b3JfYnVsa19lbmFi
bGUoRENTX1JFR1VMQVRPUl9TVVBQTFlfTlVNLCBkZGF0YS0+c3VwcGxpZXMpOwo+IC0JaWYgKHIp
IHsKPiAtCQlkZXZfZXJyKCZkZGF0YS0+ZHNpLT5kZXYsICJmYWlsZWQgdG8gZW5hYmxlIHN1cHBs
aWVzOiAlZFxuIiwgcik7Cj4gLQl9Cj4gKwlyID0gcmVndWxhdG9yX2J1bGtfZGlzYWJsZShEQ1Nf
UkVHVUxBVE9SX1NVUFBMWV9OVU0sIGRkYXRhLT5zdXBwbGllcyk7Cj4gKwlpZiAocikKPiArCQlk
ZXZfZXJyKCZkZGF0YS0+ZHNpLT5kZXYsICJmYWlsZWQgdG8gZGlzYWJsZSBzdXBwbGllczogJWRc
biIsIHIpOwo+IAo+IC0JciA9IHNyYy0+b3BzLT5kc2kuc2V0X2NvbmZpZyhzcmMsICZkc2lfY29u
ZmlnKTsKPiAtCWlmIChyKSB7Cj4gLQkJZGV2X2VycigmZGRhdGEtPmRzaS0+ZGV2LCAiZmFpbGVk
IHRvIGNvbmZpZ3VyZSBEU0lcbiIpOwo+IC0JfQo+ICsJcmV0dXJuIHI7Cj4gfQo+IAo+IC1zdGF0
aWMgdm9pZCBkc2ljbV9lbmFibGUoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2KQo+ICtz
dGF0aWMgaW50IGRzaWNtX3ByZXBhcmUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCj4gewo+IC0J
c3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHRvX3BhbmVsX2RhdGEoZHNzZGV2KTsKPiAr
CXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBwYW5lbF90b19kZGF0YShwYW5lbCk7Cj4g
CWludCByOwo+IAo+IAltdXRleF9sb2NrKCZkZGF0YS0+bG9jayk7Cj4gQEAgLTQyMSwzMyArMzg4
LDI3IEBAIHN0YXRpYyB2b2lkIGRzaWNtX2VuYWJsZShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpk
c3NkZXYpCj4gCj4gCWRzaWNtX2JsX3Bvd2VyKGRkYXRhLCB0cnVlKTsKPiAKPiAtCXJldHVybjsK
PiArCXJldHVybiAwOwo+IGVycjoKPiAtCWRldl9kYmcoJmRkYXRhLT5kc2ktPmRldiwgImVuYWJs
ZSBmYWlsZWQgKCVkKVxuIiwgcik7Cj4gKwlkZXZfZXJyKCZkZGF0YS0+ZHNpLT5kZXYsICJlbmFi
bGUgZmFpbGVkICglZClcbiIsIHIpOwo+IAltdXRleF91bmxvY2soJmRkYXRhLT5sb2NrKTsKPiAr
CXJldHVybiByOwo+IH0KPiAKPiAtc3RhdGljIHZvaWQgZHNpY21fZGlzYWJsZShzdHJ1Y3Qgb21h
cF9kc3NfZGV2aWNlICpkc3NkZXYpCj4gK3N0YXRpYyBpbnQgZHNpY21fdW5wcmVwYXJlKHN0cnVj
dCBkcm1fcGFuZWwgKnBhbmVsKQo+IHsKPiAtCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEg
PSB0b19wYW5lbF9kYXRhKGRzc2Rldik7Cj4gKwlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRh
ID0gcGFuZWxfdG9fZGRhdGEocGFuZWwpOwo+ICsJaW50IHI7Cj4gCj4gCWRzaWNtX2JsX3Bvd2Vy
KGRkYXRhLCBmYWxzZSk7Cj4gCj4gCW11dGV4X2xvY2soJmRkYXRhLT5sb2NrKTsKPiAKPiAtCWRz
aWNtX3Bvd2VyX29mZihkZGF0YSk7Cj4gKwlyID0gZHNpY21fcG93ZXJfb2ZmKGRkYXRhKTsKPiAK
PiAJbXV0ZXhfdW5sb2NrKCZkZGF0YS0+bG9jayk7Cj4gLX0KPiAtCj4gLXN0YXRpYyB2b2lkIGRz
aWNtX3Bvc3RfZGlzYWJsZShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYpCj4gLXsKPiAt
CXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSB0b19wYW5lbF9kYXRhKGRzc2Rldik7Cj4g
LQlpbnQgcjsKPiAKPiAtCXIgPSByZWd1bGF0b3JfYnVsa19kaXNhYmxlKERDU19SRUdVTEFUT1Jf
U1VQUExZX05VTSwgZGRhdGEtPnN1cHBsaWVzKTsKPiAtCWlmIChyKQo+IC0JCWRldl9lcnIoJmRk
YXRhLT5kc2ktPmRldiwgImZhaWxlZCB0byBkaXNhYmxlIHN1cHBsaWVzOiAlZFxuIiwgcik7Cj4g
KwlyZXR1cm4gcjsKPiB9Cj4gCj4gc3RhdGljIGludCBfZHNpY21fZW5hYmxlX3RlKHN0cnVjdCBw
YW5lbF9kcnZfZGF0YSAqZGRhdGEsIGJvb2wgZW5hYmxlKQo+IEBAIC00NjYsNTAgKzQyNywzNSBA
QCBzdGF0aWMgaW50IF9kc2ljbV9lbmFibGVfdGUoc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0
YSwgYm9vbCBlbmFibGUpCj4gCXJldHVybiByOwo+IH0KPiAKPiAtc3RhdGljIGludCBkc2ljbV9n
ZXRfbW9kZXMoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LAo+IC0JCQkgICBzdHJ1Y3Qg
ZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQo+ICtzdGF0aWMgaW50IGRzaWNtX2dldF9tb2Rlcyhz
dHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKPiB7Cj4gLQlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRk
YXRhID0gdG9fcGFuZWxfZGF0YShkc3NkZXYpOwo+IC0KPiAtCWNvbm5lY3Rvci0+ZGlzcGxheV9p
bmZvLndpZHRoX21tID0gZGRhdGEtPndpZHRoX21tOwo+IC0JY29ubmVjdG9yLT5kaXNwbGF5X2lu
Zm8uaGVpZ2h0X21tID0gZGRhdGEtPmhlaWdodF9tbTsKPiAtCj4gLQlyZXR1cm4gb21hcGRzc19k
aXNwbGF5X2dldF9tb2Rlcyhjb25uZWN0b3IsICZkZGF0YS0+dm0pOwo+IC19Cj4gLQo+IC1zdGF0
aWMgaW50IGRzaWNtX2NoZWNrX3RpbWluZ3Moc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2
LAo+IC0JCQkgICAgICAgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCj4gLXsKPiAtCXN0
cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSB0b19wYW5lbF9kYXRhKGRzc2Rldik7Cj4gLQlp
bnQgcmV0ID0gMDsKPiArCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBwYW5lbF90b19k
ZGF0YShwYW5lbCk7Cj4gKwlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yID0gcGFuZWwt
PmNvbm5lY3RvcjsKPiArCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlOwo+ICsKPiArCW1v
ZGUgPSBkcm1fbW9kZV9kdXBsaWNhdGUocGFuZWwtPmRybSwgJmRkYXRhLT5tb2RlKTsKPiArCWlm
ICghbW9kZSkgewo+ICsJCWRldl9lcnIoJmRkYXRhLT5kc2ktPmRldiwgImZhaWxlZCB0byBhZGQg
bW9kZSAldXgldXhAJXVcbiIsCj4gKwkJCWRkYXRhLT5tb2RlLmhkaXNwbGF5LCBkZGF0YS0+bW9k
ZS52ZGlzcGxheSwKPiArCQkJZGRhdGEtPm1vZGUudnJlZnJlc2gpOwo+ICsJCXJldHVybiAtRU5P
TUVNOwo+ICsJfQo+IAo+IC0JaWYgKG1vZGUtPmhkaXNwbGF5ICE9IGRkYXRhLT52bS5oYWN0aXZl
KQo+IC0JCXJldCA9IC1FSU5WQUw7Cj4gKwlkcm1fbW9kZV9zZXRfbmFtZShtb2RlKTsKPiAKPiAt
CWlmIChtb2RlLT52ZGlzcGxheSAhPSBkZGF0YS0+dm0udmFjdGl2ZSkKPiAtCQlyZXQgPSAtRUlO
VkFMOwo+ICsJbW9kZS0+dHlwZSA9IERSTV9NT0RFX1RZUEVfRFJJVkVSIHwgRFJNX01PREVfVFlQ
RV9QUkVGRVJSRUQ7Cj4gKwlkcm1fbW9kZV9wcm9iZWRfYWRkKGNvbm5lY3RvciwgbW9kZSk7Cj4g
Cj4gLQlpZiAocmV0KSB7Cj4gLQkJZGV2X3dhcm4oZHNzZGV2LT5kZXYsICJ3cm9uZyByZXNvbHV0
aW9uOiAlZCB4ICVkIiwKPiAtCQkJIG1vZGUtPmhkaXNwbGF5LCBtb2RlLT52ZGlzcGxheSk7Cj4g
LQkJZGV2X3dhcm4oZHNzZGV2LT5kZXYsICJwYW5lbCByZXNvbHV0aW9uOiAlZCB4ICVkIiwKPiAt
CQkJIGRkYXRhLT52bS5oYWN0aXZlLCBkZGF0YS0+dm0udmFjdGl2ZSk7Cj4gLQl9Cj4gKwljb25u
ZWN0b3ItPmRpc3BsYXlfaW5mby53aWR0aF9tbSA9IGRkYXRhLT53aWR0aF9tbTsKPiArCWNvbm5l
Y3Rvci0+ZGlzcGxheV9pbmZvLmhlaWdodF9tbSA9IGRkYXRhLT5oZWlnaHRfbW07Cj4gCj4gLQly
ZXR1cm4gcmV0Owo+ICsJcmV0dXJuIDE7Cj4gfQo+IAo+IC1zdGF0aWMgY29uc3Qgc3RydWN0IG9t
YXBfZHNzX2RldmljZV9vcHMgZHNpY21fb3BzID0gewo+IC0JLmNvbm5lY3QJPSBkc2ljbV9jb25u
ZWN0LAo+IC0JLmRpc2Nvbm5lY3QJPSBkc2ljbV9kaXNjb25uZWN0LAo+IC0KPiAtCS5wcmVfZW5h
YmxlCT0gZHNpY21fcHJlX2VuYWJsZSwKPiAtCS5lbmFibGUJCT0gZHNpY21fZW5hYmxlLAo+IC0J
LmRpc2FibGUJPSBkc2ljbV9kaXNhYmxlLAo+IC0JLnBvc3RfZGlzYWJsZQk9IGRzaWNtX3Bvc3Rf
ZGlzYWJsZSwKPiAtCj4gLQkuZ2V0X21vZGVzCT0gZHNpY21fZ2V0X21vZGVzLAo+IC0JLmNoZWNr
X3RpbWluZ3MJPSBkc2ljbV9jaGVja190aW1pbmdzLAo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9wYW5lbF9mdW5jcyBkc2ljbV9wYW5lbF9mdW5jcyA9IHsKPiArCS51bnByZXBhcmUgPSBkc2lj
bV91bnByZXBhcmUsCj4gKwkucHJlcGFyZSA9IGRzaWNtX3ByZXBhcmUsCj4gKwkuZ2V0X21vZGVz
ID0gZHNpY21fZ2V0X21vZGVzLAo+IH07Cj4gCj4gc3RhdGljIGludCBkc2ljbV9wcm9iZV9vZihz
dHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCj4gQEAgLTUxOCw4ICs0NjQsMTIgQEAgc3RhdGlj
IGludCBkc2ljbV9wcm9iZV9vZihzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCj4gCXN0cnVj
dCBkZXZpY2Vfbm9kZSAqYmFja2xpZ2h0Owo+IAlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRh
ID0gbWlwaV9kc2lfZ2V0X2RydmRhdGEoZHNpKTsKPiAJc3RydWN0IGRpc3BsYXlfdGltaW5nIHRp
bWluZzsKPiArCXN0cnVjdCB2aWRlb21vZGUgdm07Cj4gCWludCBlcnI7Cj4gCj4gKwl2bS5oYWN0
aXZlID0gODY0Owo+ICsJdm0udmFjdGl2ZSA9IDQ4MDsKPiArCj4gCWRkYXRhLT5yZXNldF9ncGlv
ID0gZGV2bV9ncGlvZF9nZXQoJmRzaS0+ZGV2LCAicmVzZXQiLCBHUElPRF9PVVRfTE9XKTsKPiAJ
aWYgKElTX0VSUihkZGF0YS0+cmVzZXRfZ3BpbykpIHsKPiAJCWVyciA9IFBUUl9FUlIoZGRhdGEt
PnJlc2V0X2dwaW8pOwo+IEBAIC01MjksMTUgKzQ3OSwxNiBAQCBzdGF0aWMgaW50IGRzaWNtX3By
b2JlX29mKHN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRzaSkKPiAKPiAJZXJyID0gb2ZfZ2V0X2Rp
c3BsYXlfdGltaW5nKG5vZGUsICJwYW5lbC10aW1pbmciLCAmdGltaW5nKTsKPiAJaWYgKCFlcnIp
IHsKPiAtCQl2aWRlb21vZGVfZnJvbV90aW1pbmcoJnRpbWluZywgJmRkYXRhLT52bSk7Cj4gLQkJ
aWYgKCFkZGF0YS0+dm0ucGl4ZWxjbG9jaykKPiAtCQkJZGRhdGEtPnZtLnBpeGVsY2xvY2sgPQo+
IC0JCQkJZGRhdGEtPnZtLmhhY3RpdmUgKiBkZGF0YS0+dm0udmFjdGl2ZSAqIDYwOwo+ICsJCXZp
ZGVvbW9kZV9mcm9tX3RpbWluZygmdGltaW5nLCAmdm0pOwo+IAl9IGVsc2Ugewo+IAkJZGV2X3dh
cm4oJmRzaS0+ZGV2LAo+IAkJCSAiZmFpbGVkIHRvIGdldCB2aWRlbyB0aW1pbmcsIHVzaW5nIGRl
ZmF1bHRzXG4iKTsKPiAJfQo+IAo+ICsJaWYgKCF2bS5waXhlbGNsb2NrKQo+ICsJCXZtLnBpeGVs
Y2xvY2sgPSB2bS5oYWN0aXZlICogdm0udmFjdGl2ZSAqIDYwOwo+ICsJZHJtX2Rpc3BsYXlfbW9k
ZV9mcm9tX3ZpZGVvbW9kZSgmdm0sICZkZGF0YS0+bW9kZSk7Cj4gKwo+IAlkZGF0YS0+d2lkdGhf
bW0gPSAwOwo+IAlvZl9wcm9wZXJ0eV9yZWFkX3UzMihub2RlLCAid2lkdGgtbW0iLCAmZGRhdGEt
PndpZHRoX21tKTsKPiAKPiBAQCAtNTczLDcgKzUyNCw2IEBAIHN0YXRpYyBpbnQgZHNpY21fcHJv
YmUoc3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpKQo+IAlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEg
KmRkYXRhOwo+IAlzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmxkZXYgPSBOVUxMOwo+IAlzdHJ1
Y3QgZGV2aWNlICpkZXYgPSAmZHNpLT5kZXY7Cj4gLQlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpk
c3NkZXY7Cj4gCWludCByOwo+IAo+IAlkZXZfZGJnKGRldiwgInByb2JlXG4iKTsKPiBAQCAtNTg1
LDMzICs1MzUsMTcgQEAgc3RhdGljIGludCBkc2ljbV9wcm9iZShzdHJ1Y3QgbWlwaV9kc2lfZGV2
aWNlICpkc2kpCj4gCW1pcGlfZHNpX3NldF9kcnZkYXRhKGRzaSwgZGRhdGEpOwo+IAlkZGF0YS0+
ZHNpID0gZHNpOwo+IAo+IC0JZGRhdGEtPnZtLmhhY3RpdmUgPSA4NjQ7Cj4gLQlkZGF0YS0+dm0u
dmFjdGl2ZSA9IDQ4MDsKPiAtCWRkYXRhLT52bS5waXhlbGNsb2NrID0gODY0ICogNDgwICogNjA7
Cj4gLQo+IAlyID0gZHNpY21fcHJvYmVfb2YoZHNpKTsKPiAJaWYgKHIpCj4gCQlyZXR1cm4gcjsK
PiAKPiAtCWRzc2RldiA9ICZkZGF0YS0+ZHNzZGV2Owo+IC0JZHNzZGV2LT5kZXYgPSBkZXY7Cj4g
LQlkc3NkZXYtPm9wcyA9ICZkc2ljbV9vcHM7Cj4gLQlkc3NkZXYtPnR5cGUgPSBPTUFQX0RJU1BM
QVlfVFlQRV9EU0k7Cj4gLQlkc3NkZXYtPmRpc3BsYXkgPSB0cnVlOwo+IC0JZHNzZGV2LT5vd25l
ciA9IFRISVNfTU9EVUxFOwo+IC0JZHNzZGV2LT5vZl9wb3J0cyA9IEJJVCgwKTsKPiAtCWRzc2Rl
di0+b3BzX2ZsYWdzID0gT01BUF9EU1NfREVWSUNFX09QX01PREVTOwo+IC0KPiAtCWRzc2Rldi0+
Y2FwcyA9IE9NQVBfRFNTX0RJU1BMQVlfQ0FQX01BTlVBTF9VUERBVEUgfAo+IC0JCU9NQVBfRFNT
X0RJU1BMQVlfQ0FQX1RFQVJfRUxJTTsKPiAtCj4gLQlvbWFwZHNzX2Rpc3BsYXlfaW5pdChkc3Nk
ZXYpOwo+IC0Jb21hcGRzc19kZXZpY2VfcmVnaXN0ZXIoZHNzZGV2KTsKPiAtCj4gCW11dGV4X2lu
aXQoJmRkYXRhLT5sb2NrKTsKPiAKPiAJZHNpY21faHdfcmVzZXQoZGRhdGEpOwo+IAo+ICsJZHJt
X3BhbmVsX2luaXQoJmRkYXRhLT5wYW5lbCwgZGV2LCAmZHNpY21fcGFuZWxfZnVuY3MsCj4gKwkJ
ICAgICAgIERSTV9NT0RFX0NPTk5FQ1RPUl9EU0kpOwo+ICsKClRoaXMgbGVhZHMgdG8KCmRyaXZl
cnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1kc2ktY20uYzogSW4gZnVuY3Rpb24gJ2RzaWNtX3Byb2Jl
JzoKZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWRzaS1jbS5jOjU1MjoyOiBlcnJvcjogdG9v
IG1hbnkgYXJndW1lbnRzIHRvIGZ1bmN0aW9uICdkcm1fcGFuZWxfaW5pdCcKICBkcm1fcGFuZWxf
aW5pdCgmZGRhdGEtPnBhbmVsLCBkZXYsICZkc2ljbV9wYW5lbF9mdW5jcywKICBeCkluIGZpbGUg
aW5jbHVkZWQgZnJvbSBkcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtZHNpLWNtLmM6MjI6MDoK
Li9pbmNsdWRlL2RybS9kcm1fcGFuZWwuaDoxNTA6Njogbm90ZTogZGVjbGFyZWQgaGVyZQogdm9p
ZCBkcm1fcGFuZWxfaW5pdChzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCk7CiAgICAgIF4KCih3aGVu
IGFwcGxpZWQgdG8gdjUuNC1yYzcpCgo+IAlpZiAoZGRhdGEtPnVzZV9kc2lfYmFja2xpZ2h0KSB7
Cj4gCQlzdHJ1Y3QgYmFja2xpZ2h0X3Byb3BlcnRpZXMgcHJvcHMgPSB7IDAgfTsKPiAJCXByb3Bz
Lm1heF9icmlnaHRuZXNzID0gMjU1Owo+IEBAIC02NDMsNiArNTc3LDEwIEBAIHN0YXRpYyBpbnQg
ZHNpY21fcHJvYmUoc3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpKQo+IAlpZiAoZGRhdGEtPnVs
cHNfZW5hYmxlZCkKPiAJCWRzaS0+bW9kZV9mbGFncyB8PSBNSVBJX0RTSV9NT0RFX1VMUFNfSURM
RTsKPiAKPiArCXIgPSBkcm1fcGFuZWxfYWRkKCZkZGF0YS0+cGFuZWwpOwo+ICsJaWYgKHIgPCAw
KQo+ICsJCWdvdG8gZXJyX3BhbmVsX2FkZDsKPiArCj4gCXIgPSBtaXBpX2RzaV9hdHRhY2goZHNp
KTsKPiAJaWYgKHIgPCAwKQo+IAkJZ290byBlcnJfZHNpX2F0dGFjaDsKPiBAQCAtNjUwLDYgKzU4
OCw4IEBAIHN0YXRpYyBpbnQgZHNpY21fcHJvYmUoc3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNp
KQo+IAlyZXR1cm4gMDsKPiAKPiBlcnJfZHNpX2F0dGFjaDoKPiArCWRybV9wYW5lbF9yZW1vdmUo
JmRkYXRhLT5wYW5lbCk7Cj4gK2Vycl9wYW5lbF9hZGQ6Cj4gCXN5c2ZzX3JlbW92ZV9ncm91cCgm
ZHNpLT5kZXYua29iaiwgJmRzaWNtX2F0dHJfZ3JvdXApOwo+IGVycl9ibDoKPiAJaWYgKGRkYXRh
LT5leHRibGRldikKPiBAQCAtNjYxLDE1ICs2MDEsMTIgQEAgc3RhdGljIGludCBkc2ljbV9wcm9i
ZShzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCj4gc3RhdGljIGludCBfX2V4aXQgZHNpY21f
cmVtb3ZlKHN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRzaSkKPiB7Cj4gCXN0cnVjdCBwYW5lbF9k
cnZfZGF0YSAqZGRhdGEgPSBtaXBpX2RzaV9nZXRfZHJ2ZGF0YShkc2kpOwo+IC0Jc3RydWN0IG9t
YXBfZHNzX2RldmljZSAqZHNzZGV2ID0gJmRkYXRhLT5kc3NkZXY7Cj4gCj4gCWRldl9kYmcoJmRz
aS0+ZGV2LCAicmVtb3ZlXG4iKTsKPiAKPiAJbWlwaV9kc2lfZGV0YWNoKGRzaSk7Cj4gCj4gLQlv
bWFwZHNzX2RldmljZV91bnJlZ2lzdGVyKGRzc2Rldik7Cj4gLQo+IC0Jb21hcGRzc19kZXZpY2Vf
ZGlzY29ubmVjdChkZGF0YS0+c3JjLCBkc3NkZXYpOwo+ICsJZHJtX3BhbmVsX3JlbW92ZSgmZGRh
dGEtPnBhbmVsKTsKPiAKPiAJc3lzZnNfcmVtb3ZlX2dyb3VwKCZkc2ktPmRldi5rb2JqLCAmZHNp
Y21fYXR0cl9ncm91cCk7Cj4gCj4gQEAgLTY4Myw3ICs2MjAsNyBAQCBzdGF0aWMgaW50IF9fZXhp
dCBkc2ljbV9yZW1vdmUoc3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpKQo+IH0KPiAKPiBzdGF0
aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBkc2ljbV9vZl9tYXRjaFtdID0gewo+IC0JeyAu
Y29tcGF0aWJsZSA9ICJvbWFwZHNzLHBhbmVsLWRzaS1jbSIsIH0sCj4gKwl7IC5jb21wYXRpYmxl
ID0gInBhbmVsLWRzaS1jbSIsIH0sCj4gCXt9LAo+IH07Cj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9kc2kuYyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rz
cy9kc2kuYwo+IGluZGV4IDY2YWQ3ZGJjNjZhMi4uNzU0ODE1MDY4OTI3IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9kc2kuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9vbWFwZHJtL2Rzcy9kc2kuYwo+IEBAIC0zNyw2ICszNyw3IEBACj4gCj4gI2luY2x1ZGUgPHZp
ZGVvL21pcGlfZGlzcGxheS5oPgo+ICNpbmNsdWRlIDxkcm0vZHJtX21pcGlfZHNpLmg+Cj4gKyNp
bmNsdWRlIDxkcm0vZHJtX3BhbmVsLmg+Cj4gCj4gI2luY2x1ZGUgIm9tYXBkc3MuaCIKPiAjaW5j
bHVkZSAiZHNzLmgiCj4gQEAgLTIyMCw2ICsyMjEsOCBAQCBzdGF0aWMgaW50IGRzaV92Y19zZW5k
X251bGwoc3RydWN0IGRzaV9kYXRhICpkc2ksIGludCBjaGFubmVsKTsKPiBzdGF0aWMgc3NpemVf
dCBfb21hcF9kc2lfaG9zdF90cmFuc2ZlcihzdHJ1Y3QgZHNpX2RhdGEgKmRzaSwKPiAJCQkJICAg
ICAgIGNvbnN0IHN0cnVjdCBtaXBpX2RzaV9tc2cgKm1zZyk7Cj4gCj4gK3N0YXRpYyB2b2lkIGRz
aV9kaXNwbGF5X2Rpc2FibGUoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2KTsKPiArCj4g
LyogRFNJIFBMTCBIU0RJViBpbmRpY2VzICovCj4gI2RlZmluZSBIU0RJVl9ESVNQQwkwCj4gI2Rl
ZmluZSBIU0RJVl9EU0kJMQo+IEBAIC0zODYsNiArMzg5LDcgQEAgc3RydWN0IGRzaV9kYXRhIHsK
PiAJYm9vbCB0ZV9lbmFibGVkOwo+IAlib29sIHVscHNfZW5hYmxlZDsKPiAJYm9vbCB1bHBzX2F1
dG9faWRsZTsKPiArCWJvb2wgdmlkZW9fZW5hYmxlZDsKPiAKPiAJc3RydWN0IGRlbGF5ZWRfd29y
ayB1bHBzX3dvcms7Cj4gCj4gQEAgLTQyNiw2ICs0MzAsOCBAQCBzdHJ1Y3QgZHNpX2RhdGEgewo+
IAo+IAl1bnNpZ25lZCBpbnQgc2NwX2Nsa19yZWZjb3VudDsKPiAKPiArCXN0cnVjdCBvbWFwX2Rz
c19kc2lfY29uZmlnIGNvbmZpZzsKPiArCj4gCXN0cnVjdCBkc3NfbGNkX21ncl9jb25maWcgbWdy
X2NvbmZpZzsKPiAJc3RydWN0IHZpZGVvbW9kZSB2bTsKPiAJZW51bSBtaXBpX2RzaV9waXhlbF9m
b3JtYXQgcGl4X2ZtdDsKPiBAQCAtMzYyOSw3ICszNjM1LDcgQEAgc3RhdGljIGludCBkc2lfY29u
ZmlndXJlX3BpbnMoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LAo+IAlyZXR1cm4gMDsK
PiB9Cj4gCj4gLXN0YXRpYyBpbnQgZHNpX2VuYWJsZV92aWRlb19vdXRwdXQoc3RydWN0IG9tYXBf
ZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCkKPiArc3RhdGljIHZvaWQgZHNpX2VuYWJs
ZV92aWRlb19vdXRwdXQoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5l
bCkKPiB7Cj4gCXN0cnVjdCBkc2lfZGF0YSAqZHNpID0gdG9fZHNpX2RhdGEoZHNzZGV2KTsKPiAJ
aW50IGJwcCA9IG1pcGlfZHNpX3BpeGVsX2Zvcm1hdF90b19icHAoZHNpLT5waXhfZm10KTsKPiBA
QCAtMzYzOCw4ICszNjQ0LDEwIEBAIHN0YXRpYyBpbnQgZHNpX2VuYWJsZV92aWRlb19vdXRwdXQo
c3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCkKPiAJaW50IHI7Cj4g
Cj4gCXIgPSBkc2lfZGlzcGxheV9pbml0X2Rpc3BjKGRzaSk7Cj4gLQlpZiAocikKPiAtCQlyZXR1
cm4gcjsKPiArCWlmIChyKSB7Cj4gKwkJZGV2X2Vycihkc2ktPmRldiwgImZhaWxlZCB0byBpbml0
IGRpc3BjIVxuIik7Cj4gKwkJcmV0dXJuOwo+ICsJfQo+IAo+IAlpZiAoZHNpLT5tb2RlID09IE9N
QVBfRFNTX0RTSV9WSURFT19NT0RFKSB7Cj4gCQlzd2l0Y2ggKGRzaS0+cGl4X2ZtdCkgewo+IEBA
IC0zNjc5LDcgKzM2ODcsNyBAQCBzdGF0aWMgaW50IGRzaV9lbmFibGVfdmlkZW9fb3V0cHV0KHN0
cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwgaW50IGNoYW5uZWwpCj4gCWlmIChyKQo+IAkJ
Z290byBlcnJfbWdyX2VuYWJsZTsKPiAKPiAtCXJldHVybiAwOwo+ICsJcmV0dXJuOwo+IAo+IGVy
cl9tZ3JfZW5hYmxlOgo+IAlpZiAoZHNpLT5tb2RlID09IE9NQVBfRFNTX0RTSV9WSURFT19NT0RF
KSB7Cj4gQEAgLTM2ODgsNyArMzY5Niw4IEBAIHN0YXRpYyBpbnQgZHNpX2VuYWJsZV92aWRlb19v
dXRwdXQoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCkKPiAJfQo+
IGVycl9waXhfZm10Ogo+IAlkc2lfZGlzcGxheV91bmluaXRfZGlzcGMoZHNpKTsKPiAtCXJldHVy
biByOwo+ICsJZGV2X2Vycihkc2ktPmRldiwgImZhaWxlZCB0byBlbmFibGUgRFNJIGVuY29kZXIh
XG4iKTsKPiArCXJldHVybjsKPiB9Cj4gCj4gc3RhdGljIHZvaWQgZHNpX2Rpc2FibGVfdmlkZW9f
b3V0cHV0KHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwgaW50IGNoYW5uZWwpCj4gQEAg
LTM3MTEsNiArMzcyMCwyNSBAQCBzdGF0aWMgdm9pZCBkc2lfZGlzYWJsZV92aWRlb19vdXRwdXQo
c3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbAo+IAlkc2lfZGlzcGxh
eV91bmluaXRfZGlzcGMoZHNpKTsKPiB9Cj4gCj4gK3N0YXRpYyB2b2lkIGRzaV9kaXNhYmxlX3Zp
ZGVvX291dHB1dHMoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2KQo+ICt7Cj4gKwlzdHJ1
Y3QgZHNpX2RhdGEgKmRzaSA9IHRvX2RzaV9kYXRhKGRzc2Rldik7Cj4gKwlpbnQgaTsKPiArCj4g
Kwlkc2lfYnVzX2xvY2soZHNpKTsKPiArCWRzaS0+dmlkZW9fZW5hYmxlZCA9IGZhbHNlOwo+ICsK
PiArCWZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHsKPiArCQlpZiAoIWRzaS0+dmNbaV0uZGVzdCkK
PiArCQkJY29udGludWU7Cj4gKwkJZHNpX2Rpc2FibGVfdmlkZW9fb3V0cHV0KGRzc2RldiwgaSk7
Cj4gKwl9Cj4gKwo+ICsJZHNpX2Rpc3BsYXlfZGlzYWJsZShkc3NkZXYpOwo+ICsKPiArCWRzaV9i
dXNfdW5sb2NrKGRzaSk7Cj4gK30KPiArCj4gc3RhdGljIHZvaWQgZHNpX3VwZGF0ZV9zY3JlZW5f
ZGlzcGMoc3RydWN0IGRzaV9kYXRhICpkc2kpCj4gewo+IAl1bnNpZ25lZCBpbnQgYnl0ZXNwcDsK
PiBAQCAtMzkwNCw2ICszOTMyLDExIEBAIHN0YXRpYyBpbnQgZHNpX3VwZGF0ZV9jaGFubmVsKHN0
cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwgaW50IGNoYW5uZWwpCj4gCj4gCWRzaV9idXNf
bG9jayhkc2kpOwo+IAo+ICsJaWYgKCFkc2ktPnZpZGVvX2VuYWJsZWQpIHsKPiArCQlyID0gLUVJ
TzsKPiArCQlnb3RvIGVycjsKPiArCX0KPiArCj4gCWlmICghZHNpLT52Y1tjaGFubmVsXS5kZXN0
KSB7Cj4gCQlyID0gLUVOT0RFVjsKPiAJCWdvdG8gZXJyOwo+IEBAIC0zOTQ5LDcgKzM5ODIsNyBA
QCBzdGF0aWMgaW50IGRzaV91cGRhdGVfYWxsKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2Rl
dikKPiAKPiAJZm9yIChpID0gMDsgaSA8IDQ7IGkrKykgewo+IAkJciA9IGRzaV91cGRhdGVfY2hh
bm5lbChkc3NkZXYsIGkpOwo+IC0JCWlmIChyICE9IC1FTk9ERVYpCj4gKwkJaWYgKHIgJiYgciAh
PSAtRU5PREVWKQo+IAkJCXJldHVybiByOwo+IAl9Cj4gCj4gQEAgLTQxNzIsOCArNDIwNSwzMCBA
QCBzdGF0aWMgdm9pZCBkc2lfZGlzcGxheV9lbmFibGUoc3RydWN0IG9tYXBfZHNzX2RldmljZSAq
ZHNzZGV2KQo+IHsKPiAJc3RydWN0IGRzaV9kYXRhICpkc2kgPSB0b19kc2lfZGF0YShkc3NkZXYp
Owo+IAlEU1NEQkcoImRzaV9kaXNwbGF5X2VuYWJsZVxuIik7Cj4gLQlkc2lfYnVzX2xvY2soZHNp
KTsKPiArCVdBUk5fT04oIWRzaV9idXNfaXNfbG9ja2VkKGRzaSkpOwo+ICsKPiAJZHNpX2Rpc3Bs
YXlfdWxwc19lbmFibGUoZHNpKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgZHNpX2VuYWJsZV92
aWRlb19vdXRwdXRzKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldikKPiArewo+ICsJc3Ry
dWN0IGRzaV9kYXRhICpkc2kgPSB0b19kc2lfZGF0YShkc3NkZXYpOwo+ICsJaW50IGk7Cj4gKwo+
ICsJZHNpX2J1c19sb2NrKGRzaSk7Cj4gKwo+ICsJZHNpX2Rpc3BsYXlfZW5hYmxlKGRzc2Rldik7
Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IDM7IGkrKykgewo+ICsJCWlmICghZHNpLT52Y1tpXS5k
ZXN0KQo+ICsJCQljb250aW51ZTsKPiArCQlkc2lfZW5hYmxlX3ZpZGVvX291dHB1dChkc3NkZXYs
IGkpOwo+ICsJfQo+ICsKPiArCWRzaS0+dmlkZW9fZW5hYmxlZCA9IHRydWU7Cj4gKwo+ICsJZHNp
X3NldF91bHBzX2F1dG8oZHNpLCB0cnVlKTsKPiArCj4gCWRzaV9idXNfdW5sb2NrKGRzaSk7Cj4g
fQo+IAo+IEBAIC00MTk5LDEwICs0MjU0LDEwIEBAIHN0YXRpYyB2b2lkIGRzaV9kaXNwbGF5X3Vs
cHNfZGlzYWJsZShzdHJ1Y3QgZHNpX2RhdGEgKmRzaSwKPiBzdGF0aWMgdm9pZCBkc2lfZGlzcGxh
eV9kaXNhYmxlKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldikKPiB7Cj4gCXN0cnVjdCBk
c2lfZGF0YSAqZHNpID0gdG9fZHNpX2RhdGEoZHNzZGV2KTsKPiArCVdBUk5fT04oIWRzaV9idXNf
aXNfbG9ja2VkKGRzaSkpOwo+IAlEU1NEQkcoImRzaV9kaXNwbGF5X2Rpc2FibGVcbiIpOwo+IC0J
ZHNpX2J1c19sb2NrKGRzaSk7Cj4gKwo+IAlkc2lfZGlzcGxheV91bHBzX2Rpc2FibGUoZHNpLCB0
cnVlLCBmYWxzZSk7Cj4gLQlkc2lfYnVzX3VubG9jayhkc2kpOwo+IH0KPiAKPiBzdGF0aWMgaW50
IGRzaV9lbmFibGVfdGUoc3RydWN0IGRzaV9kYXRhICpkc2ksIGJvb2wgZW5hYmxlKQo+IEBAIC00
NzMyLDE1ICs0Nzg3LDI2IEBAIHN0YXRpYyBib29sIGRzaV92bV9jYWxjKHN0cnVjdCBkc2lfZGF0
YSAqZHNpLAo+IAkJCWRzaV92bV9jYWxjX3BsbF9jYiwgY3R4KTsKPiB9Cj4gCj4gK3N0YXRpYyBi
b29sIGRzaV9pc192aWRlb19tb2RlKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldikKPiAr
ewo+ICsJc3RydWN0IGRzaV9kYXRhICpkc2kgPSB0b19kc2lfZGF0YShkc3NkZXYpOwo+ICsKPiAr
CXJldHVybiAoZHNpLT5tb2RlID09IE9NQVBfRFNTX0RTSV9WSURFT19NT0RFKTsKPiArfQo+ICsK
PiBzdGF0aWMgaW50IGRzaV9zZXRfY29uZmlnKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2Rl
diwKPiAtCQljb25zdCBzdHJ1Y3Qgb21hcF9kc3NfZHNpX2NvbmZpZyAqY29uZmlnKQo+ICsJCWNv
bnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKQo+IHsKPiAJc3RydWN0IGRzaV9kYXRh
ICpkc2kgPSB0b19kc2lfZGF0YShkc3NkZXYpOwo+IAlzdHJ1Y3QgZHNpX2Nsa19jYWxjX2N0eCBj
dHg7Cj4gLQlzdHJ1Y3Qgb21hcF9kc3NfZHNpX2NvbmZpZyBjZmcgPSAqY29uZmlnOwo+ICsJc3Ry
dWN0IHZpZGVvbW9kZSB2bTsKPiArCXN0cnVjdCBvbWFwX2Rzc19kc2lfY29uZmlnIGNmZyA9IGRz
aS0+Y29uZmlnOwo+IAlib29sIG9rOwo+IAlpbnQgcjsKPiAKPiArCWRybV9kaXNwbGF5X21vZGVf
dG9fdmlkZW9tb2RlKG1vZGUsICZ2bSk7Cj4gKwljZmcudm0gPSAmdm07Cj4gKwo+IAltdXRleF9s
b2NrKCZkc2ktPmxvY2spOwo+IAo+IAljZmcubW9kZSA9IGRzaS0+bW9kZTsKPiBAQCAtNDkwMyw5
ICs0OTY5LDE1IEBAIHN0YXRpYyBzc2l6ZV90IG9tYXBfZHNpX2hvc3RfdHJhbnNmZXIoc3RydWN0
IG1pcGlfZHNpX2hvc3QgKmhvc3QsCj4gCWludCByOwo+IAo+IAlkc2lfYnVzX2xvY2soZHNpKTsK
PiAtCWRzaV9zZXRfdWxwc19hdXRvKGRzaSwgZmFsc2UpOwo+IC0JciA9IF9vbWFwX2RzaV9ob3N0
X3RyYW5zZmVyKGRzaSwgbXNnKTsKPiAtCWRzaV9zZXRfdWxwc19hdXRvKGRzaSwgdHJ1ZSk7Cj4g
Kwo+ICsJaWYgKGRzaS0+dmlkZW9fZW5hYmxlZCkgewo+ICsJCWRzaV9zZXRfdWxwc19hdXRvKGRz
aSwgZmFsc2UpOwo+ICsJCXIgPSBfb21hcF9kc2lfaG9zdF90cmFuc2Zlcihkc2ksIG1zZyk7Cj4g
KwkJZHNpX3NldF91bHBzX2F1dG8oZHNpLCB0cnVlKTsKPiArCX0gZWxzZSB7Cj4gKwkJciA9IC1F
SU87Cj4gKwl9Cj4gKwo+IAlkc2lfYnVzX3VubG9jayhkc2kpOwo+IAo+IAlyZXR1cm4gcjsKPiBA
QCAtNDkyNiw2ICs0OTk4LDIzIEBAIHN0YXRpYyBpbnQgZHNpX2dldF9jbG9ja3Moc3RydWN0IGRz
aV9kYXRhICpkc2kpCj4gCXJldHVybiAwOwo+IH0KPiAKPiArc3RhdGljIHZvaWQgZHNpX3NldF90
aW1pbmdzKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwKPiArCQkJICAgIGNvbnN0IHN0
cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKQo+ICt7Cj4gKwlEU1NEQkcoImRzaV9zZXRfdGlt
aW5nc1xuIik7Cj4gKwlkc2lfc2V0X2NvbmZpZyhkc3NkZXYsIG1vZGUpOwo+ICt9Cj4gKwo+ICtz
dGF0aWMgaW50IGRzaV9jaGVja190aW1pbmdzKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2Rl
diwKPiArCQkJICAgICBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKPiArewo+ICsJRFNT
REJHKCJkc2lfY2hlY2tfdGltaW5nc1xuIik7Cj4gKwo+ICsJLyogVE9ETyAqLwo+ICsKPiArCXJl
dHVybiAwOwo+ICt9Cj4gKwo+IHN0YXRpYyBpbnQgZHNpX2Nvbm5lY3Qoc3RydWN0IG9tYXBfZHNz
X2RldmljZSAqc3JjLAo+IAkJICAgICAgIHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzdCkKPiB7
Cj4gQEAgLTQ5NDEsMTYgKzUwMzAsMTUgQEAgc3RhdGljIHZvaWQgZHNpX2Rpc2Nvbm5lY3Qoc3Ry
dWN0IG9tYXBfZHNzX2RldmljZSAqc3JjLAo+IHN0YXRpYyBjb25zdCBzdHJ1Y3Qgb21hcF9kc3Nf
ZGV2aWNlX29wcyBkc2lfb3BzID0gewo+IAkuY29ubmVjdCA9IGRzaV9jb25uZWN0LAo+IAkuZGlz
Y29ubmVjdCA9IGRzaV9kaXNjb25uZWN0LAo+IC0JLmVuYWJsZSA9IGRzaV9kaXNwbGF5X2VuYWJs
ZSwKPiAtCS5kaXNhYmxlID0gZHNpX2Rpc3BsYXlfZGlzYWJsZSwKPiAtCj4gLQkuZHNpID0gewo+
IC0JCS5zZXRfY29uZmlnID0gZHNpX3NldF9jb25maWcsCj4gKwkuZW5hYmxlID0gZHNpX2VuYWJs
ZV92aWRlb19vdXRwdXRzLAo+ICsJLmRpc2FibGUgPSBkc2lfZGlzYWJsZV92aWRlb19vdXRwdXRz
LAo+IAo+IC0JCS5lbmFibGVfdmlkZW9fb3V0cHV0ID0gZHNpX2VuYWJsZV92aWRlb19vdXRwdXQs
Cj4gLQkJLmRpc2FibGVfdmlkZW9fb3V0cHV0ID0gZHNpX2Rpc2FibGVfdmlkZW9fb3V0cHV0LAo+
ICsJLmNoZWNrX3RpbWluZ3MgPSBkc2lfY2hlY2tfdGltaW5ncywKPiArCS5zZXRfdGltaW5ncyA9
IGRzaV9zZXRfdGltaW5ncywKPiAKPiArCS5kc2kgPSB7Cj4gCQkudXBkYXRlID0gZHNpX3VwZGF0
ZV9hbGwsCj4gKwkJLmlzX3ZpZGVvX21vZGUgPSBkc2lfaXNfdmlkZW9fbW9kZSwKPiAJfSwKPiB9
Owo+IAo+IEBAIC01MDM4LDYgKzUxMjYsNyBAQCBpbnQgb21hcF9kc2lfaG9zdF9hdHRhY2goc3Ry
dWN0IG1pcGlfZHNpX2hvc3QgKmhvc3QsCj4gewo+IAlzdHJ1Y3QgZHNpX2RhdGEgKmRzaSA9IGhv
c3RfdG9fb21hcChob3N0KTsKPiAJdW5zaWduZWQgaW50IGNoYW5uZWwgPSBjbGllbnQtPmNoYW5u
ZWw7Cj4gKwlzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbDsKPiAJaW50IHI7Cj4gCj4gCWlmIChjaGFu
bmVsID4gMykKPiBAQCAtNTA1MCw2ICs1MTM5LDEwIEBAIGludCBvbWFwX2RzaV9ob3N0X2F0dGFj
aChzdHJ1Y3QgbWlwaV9kc2lfaG9zdCAqaG9zdCwKPiAKPiAJZHNpX2J1c19sb2NrKGRzaSk7Cj4g
Cj4gKwlwYW5lbCA9IG9mX2RybV9maW5kX3BhbmVsKGNsaWVudC0+ZGV2Lm9mX25vZGUpOwo+ICsJ
aWYgKElTX0VSUihwYW5lbCkpCj4gKwkJcmV0dXJuIFBUUl9FUlIocGFuZWwpOwo+ICsKPiAJYXRv
bWljX3NldCgmZHNpLT5kb19leHRfdGVfdXBkYXRlLCAwKTsKPiAKPiAJaWYgKGNsaWVudC0+bW9k
ZV9mbGFncyAmIE1JUElfRFNJX01PREVfVklERU8pIHsKPiBAQCAtNTA3MCw4ICs1MTYzLDEyIEBA
IGludCBvbWFwX2RzaV9ob3N0X2F0dGFjaChzdHJ1Y3QgbWlwaV9kc2lfaG9zdCAqaG9zdCwKPiAJ
SU5JVF9ERUZFUlJBQkxFX1dPUksoJmRzaS0+dWxwc193b3JrLAo+IAkJCSAgICAgb21hcF9kc2lf
dWxwc193b3JrX2NhbGxiYWNrKTsKPiAKPiArCWRzaS0+Y29uZmlnLmhzX2Nsa19taW4gPSAxNTAw
MDAwMDA7IC8vIFRPRE86IGdldCBmcm9tIGNsaWVudD8KPiArCWRzaS0+Y29uZmlnLmhzX2Nsa19t
YXggPSBjbGllbnQtPmhzX3JhdGU7Cj4gKwlkc2ktPmNvbmZpZy5scF9jbGtfbWluID0gNzAwMDAw
MDsgLy8gVE9ETzogZ2V0IGZyb20gY2xpZW50Pwo+ICsJZHNpLT5jb25maWcubHBfY2xrX21heCA9
IGNsaWVudC0+bHBfcmF0ZTsKPiArCj4gCWRzaS0+dWxwc19hdXRvX2lkbGUgPSAhIShjbGllbnQt
Pm1vZGVfZmxhZ3MgJiBNSVBJX0RTSV9NT0RFX1VMUFNfSURMRSk7Cj4gLQlkc2lfc2V0X3VscHNf
YXV0byhkc2ksIHRydWUpOwo+IAo+IAlkc2lfYnVzX3VubG9jayhkc2kpOwo+IAlyZXR1cm4gMDsK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL29tYXBkc3MtYm9vdC1p
bml0LmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb21hcGRzcy1ib290LWluaXQuYwo+
IGluZGV4IDMxNTAyODU3ZjAxMy4uMDVhYzJlMWNkNzdlIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLWJvb3QtaW5pdC5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL29tYXBkcm0vZHNzL29tYXBkc3MtYm9vdC1pbml0LmMKPiBAQCAtMTc2LDcgKzE3Niw2
IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIG9tYXBkc3Nfb2ZfbWF0Y2hbXSBf
X2luaXRjb25zdCA9IHsKPiBzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBvbWFwZHNz
X29mX2ZpeHVwc193aGl0ZWxpc3RbXSBfX2luaXRjb25zdCA9IHsKPiAJeyAuY29tcGF0aWJsZSA9
ICJjb21wb3NpdGUtdmlkZW8tY29ubmVjdG9yIiB9LAo+IAl7IC5jb21wYXRpYmxlID0gImhkbWkt
Y29ubmVjdG9yIiB9LAo+IC0JeyAuY29tcGF0aWJsZSA9ICJwYW5lbC1kc2ktY20iIH0sCj4gCXsg
LmNvbXBhdGlibGUgPSAic3ZpZGVvLWNvbm5lY3RvciIgfSwKPiAJeyAuY29tcGF0aWJsZSA9ICJ0
aSxvcGEzNjIiIH0sCj4gCXsgLmNvbXBhdGlibGUgPSAidGksdHBkMTJzMDE1IiB9LAo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb21hcGRzcy5oIGIvZHJpdmVycy9n
cHUvZHJtL29tYXBkcm0vZHNzL29tYXBkc3MuaAo+IGluZGV4IDIxNjAxYWYyOWVlNC4uYmZiNDAy
YTg4NDc1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNz
LmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb21hcGRzcy5oCj4gQEAgLTEy
MiwxMSArMTIyLDYgQEAgZW51bSBvbWFwX2Rzc19kc2lfbW9kZSB7Cj4gCU9NQVBfRFNTX0RTSV9W
SURFT19NT0RFLAo+IH07Cj4gCj4gLWVudW0gb21hcF9kaXNwbGF5X2NhcHMgewo+IC0JT01BUF9E
U1NfRElTUExBWV9DQVBfTUFOVUFMX1VQREFURQk9IDEgPDwgMCwKPiAtCU9NQVBfRFNTX0RJU1BM
QVlfQ0FQX1RFQVJfRUxJTQkJPSAxIDw8IDEsCj4gLX07Cj4gLQo+IGVudW0gb21hcF9kc3NfZGlz
cGxheV9zdGF0ZSB7Cj4gCU9NQVBfRFNTX0RJU1BMQVlfRElTQUJMRUQgPSAwLAo+IAlPTUFQX0RT
U19ESVNQTEFZX0FDVElWRSwKPiBAQCAtMjg4LDE0ICsyODMsNyBAQCBzdHJ1Y3Qgb21hcGRzc19o
ZG1pX29wcyB7Cj4gCj4gc3RydWN0IG9tYXBkc3NfZHNpX29wcyB7Cj4gCWludCAoKnVwZGF0ZSko
c3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2KTsKPiAtCj4gLQkvKiBsZWdhY3kgQVBJIHVz
ZWQgYnkgb21hcGRzcyBwYW5lbHMgKi8KPiAtCWludCAoKnNldF9jb25maWcpKHN0cnVjdCBvbWFw
X2Rzc19kZXZpY2UgKmRzc2RldiwKPiAtCQkJY29uc3Qgc3RydWN0IG9tYXBfZHNzX2RzaV9jb25m
aWcgKmNmZyk7Cj4gLQo+IC0JaW50ICgqZW5hYmxlX3ZpZGVvX291dHB1dCkoc3RydWN0IG9tYXBf
ZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCk7Cj4gLQl2b2lkICgqZGlzYWJsZV92aWRl
b19vdXRwdXQpKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwKPiAtCQkJaW50IGNoYW5u
ZWwpOwo+ICsJYm9vbCAoKmlzX3ZpZGVvX21vZGUpKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRz
c2Rldik7Cj4gfTsKPiAKPiBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlX29wcyB7Cj4gQEAgLTM3NCwx
MyArMzYyLDEwIEBAIHN0cnVjdCBvbWFwX2Rzc19kZXZpY2Ugewo+IAo+IAljb25zdCBjaGFyICpu
YW1lOwo+IAo+IC0JY29uc3Qgc3RydWN0IG9tYXBfZHNzX2RyaXZlciAqZHJpdmVyOwo+IAljb25z
dCBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlX29wcyAqb3BzOwo+IAl1bnNpZ25lZCBsb25nIG9wc19m
bGFnczsKPiAJdTMyIGJ1c19mbGFnczsKPiAKPiAtCWVudW0gb21hcF9kaXNwbGF5X2NhcHMgY2Fw
czsKPiAtCj4gCWVudW0gb21hcF9kc3NfZGlzcGxheV9zdGF0ZSBzdGF0ZTsKPiAKPiAJLyogT01B
UCBEU1Mgb3V0cHV0IHNwZWNpZmljIGZpZWxkcyAqLwo+IEBAIC0zOTUsMTEgKzM4MCw2IEBAIHN0
cnVjdCBvbWFwX2Rzc19kZXZpY2Ugewo+IAl1bnNpZ25lZCBpbnQgb2ZfcG9ydHM7Cj4gfTsKPiAK
PiAtc3RydWN0IG9tYXBfZHNzX2RyaXZlciB7Cj4gLQlpbnQgKCp1cGRhdGUpKHN0cnVjdCBvbWFw
X2Rzc19kZXZpY2UgKmRzc2RldiwKPiAtCQkJICAgICAgIHUxNiB4LCB1MTYgeSwgdTE2IHcsIHUx
NiBoKTsKPiAtfTsKPiAtCj4gc3RydWN0IGRzc19kZXZpY2UgKm9tYXBkc3NfZ2V0X2Rzcyh2b2lk
KTsKPiB2b2lkIG9tYXBkc3Nfc2V0X2RzcyhzdHJ1Y3QgZHNzX2RldmljZSAqZHNzKTsKPiBzdGF0
aWMgaW5saW5lIGJvb2wgb21hcGRzc19pc19pbml0aWFsaXplZCh2b2lkKQo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2NydGMuYyBiL2RyaXZlcnMvZ3B1L2RybS9v
bWFwZHJtL29tYXBfY3J0Yy5jCj4gaW5kZXggYThkMDU0M2QxMjk2Li44MGVkMWIxNWJhNDkgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9jcnRjLmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2NydGMuYwo+IEBAIC00OTUsOCArNDk1LDcgQEAg
c3RhdGljIGVudW0gZHJtX21vZGVfc3RhdHVzIG9tYXBfY3J0Y19tb2RlX3ZhbGlkKHN0cnVjdCBk
cm1fY3J0YyAqY3J0YywKPiAJICogdmFsaWQgRElTUEMgbW9kZS4gRFNJIHdpbGwgY2FsY3VsYXRl
IGFuZCBjb25maWd1cmUgdGhlCj4gCSAqIHByb3BlciBESVNQQyBtb2RlIGxhdGVyLgo+IAkgKi8K
PiAtCWlmIChvbWFwX2NydGMtPnBpcGUtPm91dHB1dC0+bmV4dCA9PSBOVUxMIHx8Cj4gLQkgICAg
b21hcF9jcnRjLT5waXBlLT5vdXRwdXQtPm5leHQtPnR5cGUgIT0gT01BUF9ESVNQTEFZX1RZUEVf
RFNJKSB7Cj4gKwlpZiAob21hcF9jcnRjLT5waXBlLT5vdXRwdXQtPnR5cGUgIT0gT01BUF9ESVNQ
TEFZX1RZUEVfRFNJKSB7Cj4gCQlyID0gcHJpdi0+ZGlzcGNfb3BzLT5tZ3JfY2hlY2tfdGltaW5n
cyhwcml2LT5kaXNwYywKPiAJCQkJCQkgICAgICAgb21hcF9jcnRjLT5jaGFubmVsLAo+IAkJCQkJ
CSAgICAgICAmdm0pOwo+IEBAIC01NDgsMTcgKzU0NywxNyBAQCBzdGF0aWMgdm9pZCBvbWFwX2Ny
dGNfbW9kZV9zZXRfbm9mYihzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCj4gc3RhdGljIGJvb2wgb21h
cF9jcnRjX2lzX21hbnVhbGx5X3VwZGF0ZWQoc3RydWN0IGRybV9jcnRjICpjcnRjKQo+IHsKPiAJ
c3RydWN0IG9tYXBfY3J0YyAqb21hcF9jcnRjID0gdG9fb21hcF9jcnRjKGNydGMpOwo+IC0Jc3Ry
dWN0IG9tYXBfZHNzX2RldmljZSAqZGlzcGxheSA9IG9tYXBfY3J0Yy0+cGlwZS0+b3V0cHV0LT5u
ZXh0Owo+ICsJc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2ID0gb21hcF9jcnRjLT5waXBl
LT5vdXRwdXQ7Cj4gCj4gLQlpZiAoIWRpc3BsYXkpCj4gKwlpZiAoZHNzZGV2LT50eXBlICE9IE9N
QVBfRElTUExBWV9UWVBFX0RTSSB8fAo+ICsJICAgICFkc3NkZXYtPm9wcy0+ZHNpLmlzX3ZpZGVv
X21vZGUpCj4gCQlyZXR1cm4gZmFsc2U7Cj4gCj4gLQlpZiAoZGlzcGxheS0+Y2FwcyAmIE9NQVBf
RFNTX0RJU1BMQVlfQ0FQX01BTlVBTF9VUERBVEUpIHsKPiAtCQlEQkcoImRldGVjdGVkIG1hbnVh
bGx5IHVwZGF0ZWQgZGlzcGxheSEiKTsKPiAtCQlyZXR1cm4gdHJ1ZTsKPiAtCX0KPiArCWlmIChk
c3NkZXYtPm9wcy0+ZHNpLmlzX3ZpZGVvX21vZGUoZHNzZGV2KSkKPiArCQlyZXR1cm4gZmFsc2U7
Cj4gCj4gLQlyZXR1cm4gZmFsc2U7Cj4gKwlEQkcoImRldGVjdGVkIG1hbnVhbGx5IHVwZGF0ZWQg
ZGlzcGxheSEiKTsKPiArCXJldHVybiB0cnVlOwo+IH0KPiAKPiBzdGF0aWMgaW50IG9tYXBfY3J0
Y19hdG9taWNfY2hlY2soc3RydWN0IGRybV9jcnRjICpjcnRjLAo+IC0tIAo+IDIuMjQuMAo+IAoK
T3RoZXJ3aXNlIHRoZSBwYXRjaGVzIGNvbXBpbGUgZmluZSBhbmQgbXkgd29yay1pbiBwcm9ncmVz
cwpEU0kgcGFuZWwgZHJpdmVyIGlzIHByb2JpbmcsIGJ1dCBub3QgaW5pdGlhbGl6aW5nLgoKQlIs
Ck5pa29sYXVzCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
