Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D1A622A61DB
	for <lists+dri-devel@lfdr.de>; Wed,  4 Nov 2020 11:37:50 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 063526E999;
	Wed,  4 Nov 2020 10:37:49 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mailout1.w1.samsung.com (mailout1.w1.samsung.com
 [210.118.77.11])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 090A36E999
 for <dri-devel@lists.freedesktop.org>; Wed,  4 Nov 2020 10:37:47 +0000 (UTC)
Received: from eucas1p1.samsung.com (unknown [182.198.249.206])
 by mailout1.w1.samsung.com (KnoxPortal) with ESMTP id
 20201104103735euoutp011f98ea75cc48df61031a9c7b929281b8~ER7_q7RTG0747807478euoutp01X
 for <dri-devel@lists.freedesktop.org>; Wed,  4 Nov 2020 10:37:35 +0000 (GMT)
DKIM-Filter: OpenDKIM Filter v2.11.0 mailout1.w1.samsung.com
 20201104103735euoutp011f98ea75cc48df61031a9c7b929281b8~ER7_q7RTG0747807478euoutp01X
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=samsung.com;
 s=mail20170921; t=1604486255;
 bh=L+nUe8U5E5ks5/FEagAgoRj80kpW/jqICao80QN6k0g=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=FnOlOz5wvAIh5Kq29XqFesaT/v7WBYqPWnON4PRrnDwUgEsP/y1oiOxx+PWw3dNs8
 jWkiIa+toM4LYYkhJPUx5ibT+4osaHYmPwSujaEBHMeLa8xgCQgyV4h++LjsJzb0T2
 JuIiz1gVfRQvB6uMLY4oBS4EE8Rx0mPcGl5aY/rQ=
Received: from eusmges3new.samsung.com (unknown [203.254.199.245]) by
 eucas1p1.samsung.com (KnoxPortal) with ESMTP id
 20201104103730eucas1p1d04a432aab4d69de891146cde7c5e324~ER75uwSz91564115641eucas1p16;
 Wed,  4 Nov 2020 10:37:30 +0000 (GMT)
Received: from eucas1p1.samsung.com ( [182.198.249.206]) by
 eusmges3new.samsung.com (EUCPMTA) with SMTP id BA.0A.06318.A6482AF5; Wed,  4
 Nov 2020 10:37:30 +0000 (GMT)
Received: from eusmtrp1.samsung.com (unknown [182.198.249.138]) by
 eucas1p2.samsung.com (KnoxPortal) with ESMTPA id
 20201104103730eucas1p2964e5910a1319fc1c931db8f02a447de~ER75aGe1E1144911449eucas1p2v;
 Wed,  4 Nov 2020 10:37:30 +0000 (GMT)
Received: from eusmgms1.samsung.com (unknown [182.198.249.179]) by
 eusmtrp1.samsung.com (KnoxPortal) with ESMTP id
 20201104103730eusmtrp146cc5014ba082336862476c9514104a2~ER75ZTVyE0613806138eusmtrp1m;
 Wed,  4 Nov 2020 10:37:30 +0000 (GMT)
X-AuditID: cbfec7f5-371ff700000018ae-a4-5fa2846adf0d
Received: from eusmtip2.samsung.com ( [203.254.199.222]) by
 eusmgms1.samsung.com (EUCPMTA) with SMTP id 35.85.06314.A6482AF5; Wed,  4
 Nov 2020 10:37:30 +0000 (GMT)
Received: from AMDC3061.digital.local (unknown [106.120.51.75]) by
 eusmtip2.samsung.com (KnoxPortal) with ESMTPA id
 20201104103729eusmtip2cae8ed3d402fdf6b98a5eafd8e0f4d28~ER74sPJoW1361713617eusmtip2Z;
 Wed,  4 Nov 2020 10:37:29 +0000 (GMT)
From: Sylwester Nawrocki <s.nawrocki@samsung.com>
To: georgi.djakov@linaro.org, cw00.choi@samsung.com, krzk@kernel.org
Subject: [PATCH v8 7/7] drm: exynos: mixer: Add interconnect support
Date: Wed,  4 Nov 2020 11:36:57 +0100
Message-Id: <20201104103657.18007-8-s.nawrocki@samsung.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20201104103657.18007-1-s.nawrocki@samsung.com>
MIME-Version: 1.0
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFrrCKsWRmVeSWpSXmKPExsWy7djPc7pZLYviDXYdlba4P6+V0WLjjPWs
 Fte/PGe1mH/kHKvFla/v2Sym793EZjHp/gQWi/PnN7BbbHp8jdXi8q45bBafe48wWsw4v4/J
 Yu2Ru+wWtxtXsFm07j3CbnH4TTurxYzJL9kcBD02repk87hzbQ+bx/3u40wem5fUe/RtWcXo
 8XmTXABbFJdNSmpOZllqkb5dAlfGtJ6ZTAVN7hWPZrWwNDAetOxi5OCQEDCRmHwquYuRi0NI
 YAWjxJZZB9m6GDmBnC+MEtvXSkIkPjNKtO//yQSSAGl48LedDSKxnFHi3bmjzBAOUMe2x2/Y
 QarYBAwleo/2MYLYIgIuEm1P57GAFDELdDBLbNsxiRkkIQyU6J95HWwfi4CqxMKGC6wgNq+A
 tcSJmY/YIdbJS6zecACsnlPARuLi52Z2iBpBiZMzn7CA2MxANc1bZ4NdISHwk12i8/VfqFtd
 JG61LWWBsIUlXh3fAjVURuL05B4WiIZmRome3bfZIZwJjBL3jy9ghKiylrhz7hcbKJiYBTQl
 1u/Shwg7SlxbtYIFEnp8EjfeCkIcwScxadt0Zogwr0RHmxBEtYrE71XToc6Rkuh+8h+q00Ni
 Zpv0BEbFWUi+mYXkm1kIaxcwMq9iFE8tLc5NTy02zkst1ytOzC0uzUvXS87P3cQITGun/x3/
 uoNx35+kQ4wCHIxKPLwHti2MF2JNLCuuzD3EKMHBrCTC63T2dJwQb0piZVVqUX58UWlOavEh
 RmkOFiVxXuNFL2OFBNITS1KzU1MLUotgskwcnFINjK58Yod2qO3vW50c5X5LwHaComtI83nP
 N5wVWxN33PLezGfn/0/lmXKVEOPpZU7lZw2FnB4zujbdjHxYyR7WIG6QE7pbUvmqokLC7YsF
 5TGcq3XL/666Z6m0N/LH/ZTzCRdXTknnlj9w/HXmNhW5/w3zv/AvKHawu5pfk+22ItDCOy3O
 r7FViaU4I9FQi7moOBEAFRVhKGcDAAA=
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFrrOIsWRmVeSWpSXmKPExsVy+t/xe7pZLYviDaYeYba4P6+V0WLjjPWs
 Fte/PGe1mH/kHKvFla/v2Sym793EZjHp/gQWi/PnN7BbbHp8jdXi8q45bBafe48wWsw4v4/J
 Yu2Ru+wWtxtXsFm07j3CbnH4TTurxYzJL9kcBD02repk87hzbQ+bx/3u40wem5fUe/RtWcXo
 8XmTXABblJ5NUX5pSapCRn5xia1StKGFkZ6hpYWekYmlnqGxeayVkamSvp1NSmpOZllqkb5d
 gl7GtJ6ZTAVN7hWPZrWwNDAetOxi5OSQEDCRePC3na2LkYtDSGApo8T5978Zuxg5gBJSEvNb
 lCBqhCX+XOtiA7GFBD4xSmzprAKx2QQMJXqP9jGC2CICHhKnWteygtjMAjOYJU7PMgWxhQVc
 JPpnXgfrZRFQlVjYcAGshlfAWuLEzEfsEPPlJVZvOMAMYnMK2Ehc/NzMDrHLWmLx83NMEPWC
 EidnPmEBOY1ZQF1i/TwhiFXyEs1bZzNPYBSchaRqFkLVLCRVCxiZVzGKpJYW56bnFhvqFSfm
 Fpfmpesl5+duYgRG6rZjPzfvYLy0MfgQowAHoxIP74FtC+OFWBPLiitzDzFKcDArifA6nT0d
 J8SbklhZlVqUH19UmpNafIjRFOi1icxSosn5wCSSVxJvaGpobmFpaG5sbmxmoSTO2yFwMEZI
 ID2xJDU7NbUgtQimj4mDU6qBkV/vcGDugUWCcTJ7xS/EP3mjGe+wft3xI48Lv+w14nsu/fL/
 0+TfD7Z+2vN9wgElHZYVvftSb1+R49BP+qLaKDDjx+TJxT39ah8eRUhuuLw8Qb7355mqh9Pl
 Oebu+v1OqY3XrS5N6u9SoU3MhufX31N4k115dZHV6g0VJq6/db7qnj6Zv7nqVbMSS3FGoqEW
 c1FxIgCxxSkg6gIAAA==
X-CMS-MailID: 20201104103730eucas1p2964e5910a1319fc1c931db8f02a447de
X-Msg-Generator: CA
X-RootMTR: 20201104103730eucas1p2964e5910a1319fc1c931db8f02a447de
X-EPHeader: CA
CMS-TYPE: 201P
X-CMS-RootMailID: 20201104103730eucas1p2964e5910a1319fc1c931db8f02a447de
References: <20201104103657.18007-1-s.nawrocki@samsung.com>
 <CGME20201104103730eucas1p2964e5910a1319fc1c931db8f02a447de@eucas1p2.samsung.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, linux-samsung-soc@vger.kernel.org,
 b.zolnierkie@samsung.com, linux-pm@vger.kernel.org, sw0312.kim@samsung.com,
 a.swigon@samsung.com, robh+dt@kernel.org, linux-kernel@vger.kernel.org,
 myungjoo.ham@samsung.com, dri-devel@lists.freedesktop.org,
 s.nawrocki@samsung.com, linux-arm-kernel@lists.infradead.org,
 m.szyprowski@samsung.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBhZGRzIGludGVyY29ubmVjdCBzdXBwb3J0IHRvIGV4eW5vcy1taXhlci4gVGhl
IG1peGVyIHdvcmtzCnRoZSBzYW1lIGFzIGJlZm9yZSB3aGVuIENPTkZJR19JTlRFUkNPTk5FQ1Qg
aXMgJ24nLgoKRm9yIHByb3BlciBvcGVyYXRpb24gb2YgdGhlIHZpZGVvIG1peGVyIGJsb2NrIHdl
IG5lZWQgdG8gZW5zdXJlIHRoZQppbnRlcmNvbm5lY3QgYnVzc2VzIGxpa2UgRE1DIG9yIExFRlRC
VVMgcHJvdmlkZSBlbm91Z2ggYmFuZHdpZHRoIHNvCmFzIHRvIGF2b2lkIERNQSBidWZmZXIgdW5k
ZXJydW5zIGluIHRoZSBtaXhlciBibG9jay4gSS5lIHdlIG5lZWQgdG8KcHJldmVudCB0aG9zZSBi
dXNzZXMgZnJvbSBvcGVyYXRpbmcgaW4gbG93IHBlcmZvbWFuY2UgT1BQcyB3aGVuCnRoZSBtaXhl
ciBpcyBydW5uaW5nLgpJbiB0aGlzIHBhdGNoIHRoZSBidXMgYmFuZHdpZHRoIHJlcXVlc3QgaXMg
ZG9uZSB0aHJvdWdoIHRoZSBpbnRlcmNvbm5lY3QKQVBJLCB0aGUgYmFuZHdpZHRoIHZhbHVlIGlz
IGNhbGN1bGF0ZWQgZnJvbSBzZWxlY3RlZCBEUk0gbW9kZSwgaS5lLgp2aWRlbyBwbGFuZSB3aWR0
aCwgaGVpZ2h0LCByZWZyZXNoIHJhdGUgYW5kIHBpeGVsIGZvcm1hdC4KClRoZSBiYW5kd2lkdGgg
c2V0dGluZyBpcyBzeW5jaHJvbml6ZWQgd2l0aCBWU1lOQyB3aGVuIHdlIGFyZSBzd2l0Y2hpbmcK
dG8gbG93ZXIgYmFuZHdpZHRoLiBUaGlzIGlzIHJlcXVpcmVkIHRvIGVuc3VyZSBlbm91Z2ggYmFu
ZHdpZHRoIGZvcgp0aGUgZGV2aWNlIHNpbmNlIG5ldyBzZXR0aW5ncyBhcmUgbm9ybWFsbHkgYmVp
bmcgYXBwbGllZCBpbiB0aGUgaGFyZHdhcmUKc3luY2hyb25vdXNseSB3aXRoIFZTWU5DLgoKQWNr
ZWQtYnk6IEtyenlzenRvZiBLb3psb3dza2kgPGtyemtAa2VybmVsLm9yZz4KQ28tZGV2ZWxvcGVk
LWJ5OiBBcnR1ciDFmndpZ2/FhCA8YS5zd2lnb25Ac2Ftc3VuZy5jb20+ClNpZ25lZC1vZmYtYnk6
IE1hcmVrIFN6eXByb3dza2kgPG0uc3p5cHJvd3NraUBzYW1zdW5nLmNvbT4KU2lnbmVkLW9mZi1i
eTogU3lsd2VzdGVyIE5hd3JvY2tpIDxzLm5hd3JvY2tpQHNhbXN1bmcuY29tPgotLS0KQ2hhbmdl
cyBmb3Igdjg6CiAtIHVwZGF0ZWQgY29tbWVudCBpbiBtaXhlcl9wcm9iZSgpCgpDaGFuZ2VzIGZv
ciB2NzoKIC0gZml4ZWQgaW5jb3JyZWN0IHNldHRpbmcgb2YgdGhlIElDQyBiYW5kd2lkdGggd2hl
biB0aGUgbWl4ZXIgaXMKICAgZGlzYWJsZWQsIG5vdyB0aGUgYmFuZHdpZHRoIGlzIHNldCBleHBs
aWNpdGx5IHRvIDAgaW4gc3VjaCBjYXNlLgoKQ2hhbmdlcyBmb3IgdjY6CiAtIHRoZSBpY2Nfc2V0
X2J3KCkgY2FsbCBpcyBub3cgb25seSBkb25lIHdoZW4gY2FsY3VsYXRlZCB2YWx1ZSBmb3IKICAg
YSBjcnRjIGNoYW5nZXMsIHRoaXMgYXZvaWRzIHVubmVjZXNzYXJ5IGNhbGxzIHBlciBlYWNoIHZp
ZGVvIGZyYW1lCiAtIGFkZGVkIHN5bmNocm9uaXphdGlvbiBvZiB0aGUgaW50ZXJjb25uZWN0IGJh
bmR3aWR0aCBzZXR0aW5nIHdpdGgKICAgdGhlIG1peGVyIFZTWU5DIGluIG9yZGVyIHRvIGF2b2lk
IGJ1ZmZlciB1bmRlcmZsb3cgd2hlbiB3ZSBsb3dlcgogICB0aGUgaW50ZXJjb25uZWN0IGJhbmR3
aWR0aCB3aGVuIHRoZSBoYXJkd2FyZSBzdGlsbCBvcGVyYXRlcyB3aXRoCiAgIHByZXZpb3VzIG1v
ZGUgc2V0dGluZ3MgdGhhdCByZXF1aXJlIGhpZ2hlciBiYW5kd2lkdGguIFRoaXMgZml4ZWQKICAg
SU9NTVUgZmF1bHRzIG9ic2VydmVkIGUuZy4gZHVyaW5nIHN3aXRjaGluZyBmcm9tIHR3byBwbGFu
ZXMgdG8KICAgYSBzaW5nbGUgcGxhbmUgb3BlcmF0aW9uLgoKQ2hhbmdlcyBmb3IgdjU6CiAtIHJl
bmFtZWQgc29jX3BhdGggdmFyaWFibGUgdG8gaWNjX3BhdGgKLS0tCiBkcml2ZXJzL2dwdS9kcm0v
ZXh5bm9zL2V4eW5vc19taXhlci5jIHwgMTQ2ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrLS0KIDEgZmlsZSBjaGFuZ2VkLCAxMzggaW5zZXJ0aW9ucygrKSwgOCBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4eW5vc19taXhlci5jIGIvZHJp
dmVycy9ncHUvZHJtL2V4eW5vcy9leHlub3NfbWl4ZXIuYwppbmRleCBhZjE5MmU1Li44YzE1MDll
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4eW5vc19taXhlci5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX21peGVyLmMKQEAgLTEzLDYgKzEzLDcgQEAK
ICNpbmNsdWRlIDxsaW51eC9jb21wb25lbnQuaD4KICNpbmNsdWRlIDxsaW51eC9kZWxheS5oPgog
I2luY2x1ZGUgPGxpbnV4L2kyYy5oPgorI2luY2x1ZGUgPGxpbnV4L2ludGVyY29ubmVjdC5oPgog
I2luY2x1ZGUgPGxpbnV4L2ludGVycnVwdC5oPgogI2luY2x1ZGUgPGxpbnV4L2lycS5oPgogI2lu
Y2x1ZGUgPGxpbnV4L2tlcm5lbC5oPgpAQCAtNzMsNiArNzQsNyBAQCBlbnVtIG1peGVyX2ZsYWdf
Yml0cyB7CiAJTVhSX0JJVF9JTlRFUkxBQ0UsCiAJTVhSX0JJVF9WUF9FTkFCTEVELAogCU1YUl9C
SVRfSEFTX1NDTEssCisJTVhSX0JJVF9SRVFVRVNUX0JXLAogfTsKIAogc3RhdGljIGNvbnN0IHVp
bnQzMl90IG1peGVyX2Zvcm1hdHNbXSA9IHsKQEAgLTk5LDYgKzEwMSwxMyBAQCBzdHJ1Y3QgbWl4
ZXJfY29udGV4dCB7CiAJc3RydWN0IGV4eW5vc19kcm1fcGxhbmUJcGxhbmVzW01JWEVSX1dJTl9O
Ul07CiAJdW5zaWduZWQgbG9uZwkJZmxhZ3M7CiAKKwlzdHJ1Y3QgaWNjX3BhdGgJCSppY2NfcGF0
aDsKKwkvKiBtZW1vcnkgYmFuZHdpZHRoIG9uIHRoZSBpbnRlcmNvbm5lY3QgYnVzIGluIEIvcyAq
LworCXVuc2lnbmVkIGxvbmcJCWljY19iYW5kd2lkdGg7CisJLyogbXV0ZXggcHJvdGVjdGluZyBA
aWNjX2JhbmR3aWR0aCAqLworCXN0cnVjdCBtdXRleCAJCWljY19sb2NrOworCXN0cnVjdCB3b3Jr
X3N0cnVjdAl3b3JrOworCiAJaW50CQkJaXJxOwogCXZvaWQgX19pb21lbQkJKm1peGVyX3JlZ3M7
CiAJdm9pZCBfX2lvbWVtCQkqdnBfcmVnczsKQEAgLTc1NCw2ICs3NjMsOSBAQCBzdGF0aWMgaXJx
cmV0dXJuX3QgbWl4ZXJfaXJxX2hhbmRsZXIoaW50IGlycSwgdm9pZCAqYXJnKQogCQl2YWwgfD0g
TVhSX0lOVF9DTEVBUl9WU1lOQzsKIAkJdmFsICY9IH5NWFJfSU5UX1NUQVRVU19WU1lOQzsKIAor
CQlpZiAodGVzdF9hbmRfY2xlYXJfYml0KE1YUl9CSVRfUkVRVUVTVF9CVywgJmN0eC0+ZmxhZ3Mp
KQorCQkJc2NoZWR1bGVfd29yaygmY3R4LT53b3JrKTsKKwogCQkvKiBpbnRlcmxhY2Ugc2NhbiBu
ZWVkIHRvIGNoZWNrIHNoYWRvdyByZWdpc3RlciAqLwogCQlpZiAodGVzdF9iaXQoTVhSX0JJVF9J
TlRFUkxBQ0UsICZjdHgtPmZsYWdzKQogCQkgICAgJiYgIW1peGVyX2lzX3N5bmNlZChjdHgpKQpA
QCAtOTM0LDYgKzk0Niw3NiBAQCBzdGF0aWMgdm9pZCBtaXhlcl9kaXNhYmxlX3ZibGFuayhzdHJ1
Y3QgZXh5bm9zX2RybV9jcnRjICpjcnRjKQogCW1peGVyX3JlZ193cml0ZW1hc2sobWl4ZXJfY3R4
LCBNWFJfSU5UX0VOLCAwLCBNWFJfSU5UX0VOX1ZTWU5DKTsKIH0KIAorLyoqCisgKiBtaXhlcl9n
ZXRfbWVtb3J5X2JhbmR3aWR0aCAtIGNhbGN1bGF0ZSBtZW1vcnkgYmFuZHdpZHRoIGZvciBjdXJy
ZW50IGNydGMgbW9kZQorICogQGNydGM6IGEgY3J0YyB3aXRoIERSTSBtb2RlIHRvIGNhbGN1bGF0
ZSB0aGUgYmFuZHdpZHRoIGZvcgorICoKKyAqIFJldHVybjogbWVtb3J5IGJhbmR3aWR0aCBpbiBC
L3MKKyAqCisgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgbWVtb3J5IGJhbmR3aWR0aCBjYWxjdWxh
dGVkIGFzIGEgc3VtIG9mIGFtb3VudCBvZiBkYXRhCisgKiBwZXIgc2Vjb25kIGZvciBlYWNoIHBs
YW5lLiBUaGUgY2FsY3VsYXRpb24gaXMgYmFzZWQgb24gbWF4aW11bSBwb3NzaWJsZSBwaXhlbAor
ICogcmVzb2x1dGlvbiBmb3IgYSBwbGFuZSBzbyBhcyB0byBhdm9pZCBkaWZmZXJlbnQgYmFuZHdp
ZHRoIHJlcXVlc3QgcGVyIGVhY2gKKyAqIHZpZGVvIGZyYW1lLiBUaGUgZm9ybXVsYSB1c2VkIGZv
ciBjYWxjdWxhdGlvbiBmb3IgZWFjaCBwbGFuZSBpczoKKyAqCisgKiBidyA9IHdpZHRoICogaGVp
Z2h0ICogZnJhbWVfcmF0ZSAvIGludGVybGFjZSAvIChob3Jfc3VicyAqIHZlcnRfc3VicykKKyAq
CisgKiB3aGVyZToKKyAqICAtIHdpZHRoLCBoZWlnaHQgLSAoRFJNIG1vZGUpIHZpZGVvIGZyYW1l
IHdpZHRoIGFuZCBoZWlnaHQgaW4gcGl4ZWxzLAorICogIC0gZnJhbWVfcmF0ZSAtIERSTSBtb2Rl
IGZyYW1lIHJlZnJlc2ggcmF0ZSwKKyAqICAtIGludGVybGFjZTogMSAtIGluIGNhc2Ugb2YgcHJv
Z3Jlc3NpdmUgYW5kIDIgaW4gY2FzZSBvZiBpbnRlcmxhY2VkIHZpZGVvLAorICogIC0gaG9yX3N1
YnMsIHZlcnRfc3VicyAtIGFjY29yZGluZ2x5IGhvcml6b250YWwgYW5kIHZlcnRpY2FsIHBpeGVs
CisgKiAgICBzdWJzYW1wbGluZyBmb3IgYSBwbGFuZS4KKyAqLworc3RhdGljIHVuc2lnbmVkIGlu
dCBtaXhlcl9nZXRfbWVtb3J5X2JhbmR3aWR0aChzdHJ1Y3QgZXh5bm9zX2RybV9jcnRjICpjcnRj
KQoreworCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlID0gJmNydGMtPmJhc2Uuc3RhdGUt
PmFkanVzdGVkX21vZGU7CisJc3RydWN0IG1peGVyX2NvbnRleHQgKmN0eCA9IGNydGMtPmN0eDsK
Kwl1bnNpZ25lZCBsb25nIGJ3LCBiYW5kd2lkdGggPSAwOworCWludCBpLCBqLCBzdWI7CisKKwlm
b3IgKGkgPSAwOyBpIDwgTUlYRVJfV0lOX05SOyBpKyspIHsKKwkJc3RydWN0IGRybV9wbGFuZSAq
cGxhbmUgPSAmY3R4LT5wbGFuZXNbaV0uYmFzZTsKKwkJY29uc3Qgc3RydWN0IGRybV9mb3JtYXRf
aW5mbyAqZm9ybWF0OworCisJCWlmIChwbGFuZS0+c3RhdGUgJiYgcGxhbmUtPnN0YXRlLT5jcnRj
ICYmIHBsYW5lLT5zdGF0ZS0+ZmIpIHsKKwkJCWZvcm1hdCA9IHBsYW5lLT5zdGF0ZS0+ZmItPmZv
cm1hdDsKKwkJCWJ3ID0gbW9kZS0+aGRpc3BsYXkgKiBtb2RlLT52ZGlzcGxheSAqCisJCQkJCQkJ
ZHJtX21vZGVfdnJlZnJlc2gobW9kZSk7CisJCQlpZiAobW9kZS0+ZmxhZ3MgJiBEUk1fTU9ERV9G
TEFHX0lOVEVSTEFDRSkKKwkJCQlidyAvPSAyOworCQkJZm9yIChqID0gMDsgaiA8IGZvcm1hdC0+
bnVtX3BsYW5lczsgaisrKSB7CisJCQkJc3ViID0gaiA/IChmb3JtYXQtPnZzdWIgKiBmb3JtYXQt
PmhzdWIpIDogMTsKKwkJCQliYW5kd2lkdGggKz0gZm9ybWF0LT5jcHBbal0gKiBidyAvIHN1YjsK
KwkJCX0KKwkJfQorCX0KKworCXJldHVybiBiYW5kd2lkdGg7Cit9CisKK3N0YXRpYyB2b2lkIG1p
eGVyX3NldF9pY2NfYmFuZHdpZHRoKHN0cnVjdCBtaXhlcl9jb250ZXh0ICpjdHgsCisJCQkJICAg
IHVuc2lnbmVkIGxvbmcgYmFuZHdpZHRoKQoreworCXUzMiBhdmdfYncsIHBlYWtfYnc7CisKKwkv
KiBhZGQgMjAlIHNhZmV0eSBtYXJnaW4gKi8KKwliYW5kd2lkdGggPSBiYW5kd2lkdGggLyA0ICog
NTsKKworCWF2Z19idyA9IHBlYWtfYncgPSBCcHNfdG9faWNjKGJhbmR3aWR0aCk7CisJaWNjX3Nl
dF9idyhjdHgtPmljY19wYXRoLCBhdmdfYncsIHBlYWtfYncpOworCisJZGV2X2RiZyhjdHgtPmRl
diwgInNhZmUgYmFuZHdpZHRoICVsdSBCcHNcbiIsIGJhbmR3aWR0aCk7Cit9CisKK3N0YXRpYyB2
b2lkIG1peGVyX2ljY19yZXF1ZXN0X2ZuKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKK3sKKwlz
dHJ1Y3QgbWl4ZXJfY29udGV4dCAqY3R4ID0gY29udGFpbmVyX29mKHdvcmssIHN0cnVjdCBtaXhl
cl9jb250ZXh0LAorCQkJCQkJIHdvcmspOworCW11dGV4X2xvY2soJmN0eC0+aWNjX2xvY2spOwor
CW1peGVyX3NldF9pY2NfYmFuZHdpZHRoKGN0eCwgY3R4LT5pY2NfYmFuZHdpZHRoKTsKKwltdXRl
eF91bmxvY2soJmN0eC0+aWNjX2xvY2spOworfQorCiBzdGF0aWMgdm9pZCBtaXhlcl9hdG9taWNf
YmVnaW4oc3RydWN0IGV4eW5vc19kcm1fY3J0YyAqY3J0YykKIHsKIAlzdHJ1Y3QgbWl4ZXJfY29u
dGV4dCAqY3R4ID0gY3J0Yy0+Y3R4OwpAQCAtOTgwLDEyICsxMDYyLDM1IEBAIHN0YXRpYyB2b2lk
IG1peGVyX2Rpc2FibGVfcGxhbmUoc3RydWN0IGV4eW5vc19kcm1fY3J0YyAqY3J0YywKIAogc3Rh
dGljIHZvaWQgbWl4ZXJfYXRvbWljX2ZsdXNoKHN0cnVjdCBleHlub3NfZHJtX2NydGMgKmNydGMp
CiB7Ci0Jc3RydWN0IG1peGVyX2NvbnRleHQgKm1peGVyX2N0eCA9IGNydGMtPmN0eDsKKwlzdHJ1
Y3QgbWl4ZXJfY29udGV4dCAqY3R4ID0gY3J0Yy0+Y3R4OworCWludCBidywgcHJldl9idzsKIAot
CWlmICghdGVzdF9iaXQoTVhSX0JJVF9QT1dFUkVELCAmbWl4ZXJfY3R4LT5mbGFncykpCisJaWYg
KCF0ZXN0X2JpdChNWFJfQklUX1BPV0VSRUQsICZjdHgtPmZsYWdzKSkKIAkJcmV0dXJuOwogCi0J
bWl4ZXJfZW5hYmxlX3N5bmMobWl4ZXJfY3R4KTsKKwkvKgorCSAqIFJlcXVlc3QgbmVjZXNzYXJ5
IGJhbmR3aWR0aCBvbiB0aGUgaW50ZXJjb25uZWN0cy4gSWYgbmV3CisJICogYmFuZHdpZHRoIGlz
IGdyZWF0ZXIgdGhhbiBjdXJyZW50IHZhbHVlIHNldCB0aGUgbmV3IHZhbHVlCisJICogaW1tZWRp
YXRlbHkuIE90aGVyd2lzZSByZXF1ZXN0IGxvd2VyIGJhbmR3aWR0aCBvbmx5IGFmdGVyCisJICog
VlNZTkMsIGFmdGVyIHRoZSBIVyBoYXMgYWN0dWFsbHkgc3dpdGNoZWQgdG8gbmV3IHZpZGVvCisJ
ICogZnJhbWUgc2V0dGluZ3MuCisJICovCisJaWYgKGN0eC0+aWNjX3BhdGgpIHsKKwkJYncgPSBt
aXhlcl9nZXRfbWVtb3J5X2JhbmR3aWR0aChjcnRjKTsKKworCQltdXRleF9sb2NrKCZjdHgtPmlj
Y19sb2NrKTsKKwkJcHJldl9idyA9IGN0eC0+aWNjX2JhbmR3aWR0aDsKKwkJY3R4LT5pY2NfYmFu
ZHdpZHRoID0gYnc7CisKKwkJaWYgKGJ3ID4gcHJldl9idykKKwkJCW1peGVyX3NldF9pY2NfYmFu
ZHdpZHRoKGN0eCwgYncpOworCQllbHNlIGlmIChidyA8IHByZXZfYncpCisJCQlzZXRfYml0KE1Y
Ul9CSVRfUkVRVUVTVF9CVywgJmN0eC0+ZmxhZ3MpOworCisJCW11dGV4X3VubG9jaygmY3R4LT5p
Y2NfbG9jayk7CisJfQorCisJbWl4ZXJfZW5hYmxlX3N5bmMoY3R4KTsKIAlleHlub3NfY3J0Y19o
YW5kbGVfZXZlbnQoY3J0Yyk7CiB9CiAKQEAgLTEwMzYsNiArMTE0MSw4IEBAIHN0YXRpYyB2b2lk
IG1peGVyX2F0b21pY19kaXNhYmxlKHN0cnVjdCBleHlub3NfZHJtX2NydGMgKmNydGMpCiAKIAlw
bV9ydW50aW1lX3B1dChjdHgtPmRldik7CiAKKwltaXhlcl9zZXRfaWNjX2JhbmR3aWR0aChjdHgs
IDApOworCiAJY2xlYXJfYml0KE1YUl9CSVRfUE9XRVJFRCwgJmN0eC0+ZmxhZ3MpOwogfQogCkBA
IC0xMjIzLDE5ICsxMzMwLDMzIEBAIHN0YXRpYyBpbnQgbWl4ZXJfcHJvYmUoc3RydWN0IHBsYXRm
b3JtX2RldmljZSAqcGRldikKIAlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmcGRldi0+ZGV2OwogCWNv
bnN0IHN0cnVjdCBtaXhlcl9kcnZfZGF0YSAqZHJ2OwogCXN0cnVjdCBtaXhlcl9jb250ZXh0ICpj
dHg7CisJc3RydWN0IGljY19wYXRoICpwYXRoOwogCWludCByZXQ7CiAKKwkvKgorCSAqIFJldHVy
bnMgTlVMTCBpZiBDT05GSUdfSU5URVJDT05ORUNUIGlzIGRpc2FibGVkIG9yIGlmICJpbnRlcmNv
bm5lY3RzIgorCSAqIHByb3BlcnR5IGRvZXMgbm90IGV4aXN0LiBNYXkgcmV0dXJuIEVSUl9QVFIo
LUVQUk9CRV9ERUZFUikuCisJICovCisJcGF0aCA9IG9mX2ljY19nZXQoZGV2LCBOVUxMKTsKKwlp
ZiAoSVNfRVJSKHBhdGgpKQorCQlyZXR1cm4gUFRSX0VSUihwYXRoKTsKKwogCWN0eCA9IGRldm1f
a3phbGxvYygmcGRldi0+ZGV2LCBzaXplb2YoKmN0eCksIEdGUF9LRVJORUwpOwogCWlmICghY3R4
KSB7CiAJCURSTV9ERVZfRVJST1IoZGV2LCAiZmFpbGVkIHRvIGFsbG9jIG1peGVyIGNvbnRleHQu
XG4iKTsKLQkJcmV0dXJuIC1FTk9NRU07CisJCXJldCA9IC1FTk9NRU07CisJCWdvdG8gZXJyOwog
CX0KIAogCWRydiA9IG9mX2RldmljZV9nZXRfbWF0Y2hfZGF0YShkZXYpOwogCisJSU5JVF9XT1JL
KCZjdHgtPndvcmssIG1peGVyX2ljY19yZXF1ZXN0X2ZuKTsKKwltdXRleF9pbml0KCZjdHgtPmlj
Y19sb2NrKTsKKwogCWN0eC0+cGRldiA9IHBkZXY7CiAJY3R4LT5kZXYgPSBkZXY7CiAJY3R4LT5t
eHJfdmVyID0gZHJ2LT52ZXJzaW9uOworCWN0eC0+aWNjX3BhdGggPSBwYXRoOwogCiAJaWYgKGRy
di0+aXNfdnBfZW5hYmxlZCkKIAkJX19zZXRfYml0KE1YUl9CSVRfVlBfRU5BQkxFRCwgJmN0eC0+
ZmxhZ3MpOwpAQCAtMTI0NywxNyArMTM2OCwyNiBAQCBzdGF0aWMgaW50IG1peGVyX3Byb2JlKHN0
cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAJcG1fcnVudGltZV9lbmFibGUoZGV2KTsKIAog
CXJldCA9IGNvbXBvbmVudF9hZGQoJnBkZXYtPmRldiwgJm1peGVyX2NvbXBvbmVudF9vcHMpOwot
CWlmIChyZXQpCisJaWYgKHJldCkgewogCQlwbV9ydW50aW1lX2Rpc2FibGUoZGV2KTsKLQorCQln
b3RvIGVycjsKKwl9CisJcmV0dXJuIDA7CitlcnI6CisJaWNjX3B1dChwYXRoKTsKIAlyZXR1cm4g
cmV0OwogfQogCiBzdGF0aWMgaW50IG1peGVyX3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNl
ICpwZGV2KQogewotCXBtX3J1bnRpbWVfZGlzYWJsZSgmcGRldi0+ZGV2KTsKKwlzdHJ1Y3QgZGV2
aWNlICpkZXYgPSAmcGRldi0+ZGV2OworCXN0cnVjdCBtaXhlcl9jb250ZXh0ICpjdHggPSBkZXZf
Z2V0X2RydmRhdGEoZGV2KTsKKworCXBtX3J1bnRpbWVfZGlzYWJsZShkZXYpOworCisJY29tcG9u
ZW50X2RlbChkZXYsICZtaXhlcl9jb21wb25lbnRfb3BzKTsKIAotCWNvbXBvbmVudF9kZWwoJnBk
ZXYtPmRldiwgJm1peGVyX2NvbXBvbmVudF9vcHMpOworCWljY19wdXQoY3R4LT5pY2NfcGF0aCk7
CiAKIAlyZXR1cm4gMDsKIH0KLS0gCjIuNy40CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9kcmktZGV2ZWwK
