Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D5CB317935
	for <lists+dri-devel@lfdr.de>; Wed,  8 May 2019 14:15:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B43CE891F8;
	Wed,  8 May 2019 12:15:29 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 028DF898A3
 for <dri-devel@lists.freedesktop.org>; Wed,  8 May 2019 12:15:27 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 08 May 2019 05:15:27 -0700
X-ExtLoop1: 1
Received: from jzapadkx-mobl1.ger.corp.intel.com (HELO [10.252.0.159])
 ([10.252.0.159])
 by fmsmga005.fm.intel.com with ESMTP; 08 May 2019 05:15:25 -0700
Subject: Re: [PATCH 2/2] dma-fence: Refactor signaling for manual invocation
To: Chris Wilson <chris@chris-wilson.co.uk>, dri-devel@lists.freedesktop.org
References: <20190508120542.28377-1-chris@chris-wilson.co.uk>
 <20190508120542.28377-3-chris@chris-wilson.co.uk>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <1c785a7a-dc94-d838-7892-049360548048@linux.intel.com>
Date: Wed, 8 May 2019 13:15:24 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <20190508120542.28377-3-chris@chris-wilson.co.uk>
Content-Language: en-US
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Ck9uIDA4LzA1LzIwMTkgMTM6MDUsIENocmlzIFdpbHNvbiB3cm90ZToKPiBNb3ZlIHRoZSBkdXBs
aWNhdGVkIGNvZGUgd2l0aGluIGRtYS1mZW5jZS5jIGludG8gdGhlIGhlYWRlciBmb3Igd2lkZXIK
PiByZXVzZS4gSW4gdGhlIHByb2Nlc3MgYXBwbHkgYSBzbWFsbCBtaWNyby1vcHRpbWlzYXRpb24g
dG8gb25seSBwcnVuZSB0aGUKPiBmZW5jZS0+Y2JfbGlzdCBvbmNlIHJhdGhlciB0aGFuIHVzZSBs
aXN0X2RlbCBvbiBldmVyeSBlbnRyeS4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24g
PGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KPiBSZXZpZXdlZC1ieTogVHZydGtvIFVyc3VsaW4g
PHR2cnRrby51cnN1bGluQGludGVsLmNvbT4KCkkgZGlkIG5vdCBnaXZlIHItYiB5ZXQsIHRoaXMg
d2FzIHByb2JhYmx5IGEgbWlzdW5kZXJzdGFuZGluZy4KCkkgc2FpZCB0aGUgZ2VuZXJhbCBpZGVh
IHNvdW5kcyByaWdodCB0byBtZSwgYnV0IEkgd2FzIHVuc3VyZSB3aGV0aGVyIHRvIApnbyB0aGUg
c3RhdGljIGlubGluZSByb3V0ZSwgb3IgbWF5YmUgRVhQT1JUX1NZTUJPTCB0aGUgZGVjb21wb3Nl
ZCBoZWxwZXJzLgoKUmVnYXJkcywKClR2cnRrbwoKPiAtLS0KPiAgIGRyaXZlcnMvZG1hLWJ1Zi9N
YWtlZmlsZSAgICAgICAgICAgICAgICAgICAgfCAgMTAgKy0KPiAgIGRyaXZlcnMvZG1hLWJ1Zi9k
bWEtZmVuY2UtdHJhY2UuYyAgICAgICAgICAgfCAgMjggKysrCj4gICBkcml2ZXJzL2RtYS1idWYv
ZG1hLWZlbmNlLmMgICAgICAgICAgICAgICAgIHwgIDMyICstLQo+ICAgZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMuYyB8ICAzMCAtLS0KPiAgIGluY2x1ZGUvbGludXgv
ZG1hLWZlbmNlLXR5cGVzLmggICAgICAgICAgICAgfCAyNDggKysrKysrKysrKysrKysrKysrKwo+
ICAgaW5jbHVkZS9saW51eC9kbWEtZmVuY2UuaCAgICAgICAgICAgICAgICAgICB8IDI1MSArKyst
LS0tLS0tLS0tLS0tLS0tLQo+ICAgNiBmaWxlcyBjaGFuZ2VkLCAzMjEgaW5zZXJ0aW9ucygrKSwg
Mjc4IGRlbGV0aW9ucygtKQo+ICAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZG1hLWJ1Zi9k
bWEtZmVuY2UtdHJhY2UuYwo+ICAgY3JlYXRlIG1vZGUgMTAwNjQ0IGluY2x1ZGUvbGludXgvZG1h
LWZlbmNlLXR5cGVzLmgKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVmL01ha2VmaWxl
IGIvZHJpdmVycy9kbWEtYnVmL01ha2VmaWxlCj4gaW5kZXggMWYwMDZlMDgzZWI5Li41NmU1Nzk4
NzhmMjYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9kbWEtYnVmL01ha2VmaWxlCj4gKysrIGIvZHJp
dmVycy9kbWEtYnVmL01ha2VmaWxlCj4gQEAgLTEsNSArMSwxMSBAQAo+IC1vYmoteSA6PSBkbWEt
YnVmLm8gZG1hLWZlbmNlLm8gZG1hLWZlbmNlLWFycmF5Lm8gZG1hLWZlbmNlLWNoYWluLm8gXAo+
IC0JIHJlc2VydmF0aW9uLm8gc2Vxbm8tZmVuY2Uubwo+ICtvYmoteSA6PSBcCj4gKwlkbWEtYnVm
Lm8gXAo+ICsJZG1hLWZlbmNlLm8gXAo+ICsJZG1hLWZlbmNlLWFycmF5Lm8gXAo+ICsJZG1hLWZl
bmNlLWNoYWluLm8gXAo+ICsJZG1hLWZlbmNlLXRyYWNlLm8gXAo+ICsJcmVzZXJ2YXRpb24ubyBc
Cj4gKwlzZXFuby1mZW5jZS5vCj4gICBvYmotJChDT05GSUdfU1lOQ19GSUxFKQkJKz0gc3luY19m
aWxlLm8KPiAgIG9iai0kKENPTkZJR19TV19TWU5DKQkJKz0gc3dfc3luYy5vIHN5bmNfZGVidWcu
bwo+ICAgb2JqLSQoQ09ORklHX1VETUFCVUYpCQkrPSB1ZG1hYnVmLm8KPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9kbWEtYnVmL2RtYS1mZW5jZS10cmFjZS5jIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1m
ZW5jZS10cmFjZS5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAu
LmViNmYyODJiZTRjMAo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJzL2RtYS1idWYvZG1h
LWZlbmNlLXRyYWNlLmMKPiBAQCAtMCwwICsxLDI4IEBACj4gKy8qCj4gKyAqIEZlbmNlIG1lY2hh
bmlzbSBmb3IgZG1hLWJ1ZiBhbmQgdG8gYWxsb3cgZm9yIGFzeW5jaHJvbm91cyBkbWEgYWNjZXNz
Cj4gKyAqCj4gKyAqIENvcHlyaWdodCAoQykgMjAxMiBDYW5vbmljYWwgTHRkCj4gKyAqIENvcHly
aWdodCAoQykgMjAxMiBUZXhhcyBJbnN0cnVtZW50cwo+ICsgKgo+ICsgKiBBdXRob3JzOgo+ICsg
KiBSb2IgQ2xhcmsgPHJvYmRjbGFya0BnbWFpbC5jb20+Cj4gKyAqIE1hYXJ0ZW4gTGFua2hvcnN0
IDxtYWFydGVuLmxhbmtob3JzdEBjYW5vbmljYWwuY29tPgo+ICsgKgo+ICsgKiBUaGlzIHByb2dy
YW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlm
eSBpdAo+ICsgKiB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNl
bnNlIHZlcnNpb24gMiBhcyBwdWJsaXNoZWQgYnkKPiArICogdGhlIEZyZWUgU29mdHdhcmUgRm91
bmRhdGlvbi4KPiArICoKPiArICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBo
b3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUCj4gKyAqIEFOWSBXQVJSQU5U
WTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSBv
cgo+ICsgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VIEdl
bmVyYWwgUHVibGljIExpY2Vuc2UgZm9yCj4gKyAqIG1vcmUgZGV0YWlscy4KPiArICovCj4gKwo+
ICsjaW5jbHVkZSA8bGludXgvZG1hLWZlbmNlLXR5cGVzLmg+Cj4gKwo+ICsjZGVmaW5lIENSRUFU
RV9UUkFDRV9QT0lOVFMKPiArI2luY2x1ZGUgPHRyYWNlL2V2ZW50cy9kbWFfZmVuY2UuaD4KPiAr
Cj4gK0VYUE9SVF9UUkFDRVBPSU5UX1NZTUJPTChkbWFfZmVuY2VfZW1pdCk7Cj4gK0VYUE9SVF9U
UkFDRVBPSU5UX1NZTUJPTChkbWFfZmVuY2VfZW5hYmxlX3NpZ25hbCk7Cj4gK0VYUE9SVF9UUkFD
RVBPSU5UX1NZTUJPTChkbWFfZmVuY2Vfc2lnbmFsZWQpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2RtYS1idWYvZG1hLWZlbmNlLmMgYi9kcml2ZXJzL2RtYS1idWYvZG1hLWZlbmNlLmMKPiBpbmRl
eCA5YmYwNjA0MjYxOWEuLjgxOTZhMTc5ZmRjMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2RtYS1i
dWYvZG1hLWZlbmNlLmMKPiArKysgYi9kcml2ZXJzL2RtYS1idWYvZG1hLWZlbmNlLmMKPiBAQCAt
MjQsMTMgKzI0LDYgQEAKPiAgICNpbmNsdWRlIDxsaW51eC9kbWEtZmVuY2UuaD4KPiAgICNpbmNs
dWRlIDxsaW51eC9zY2hlZC9zaWduYWwuaD4KPiAgIAo+IC0jZGVmaW5lIENSRUFURV9UUkFDRV9Q
T0lOVFMKPiAtI2luY2x1ZGUgPHRyYWNlL2V2ZW50cy9kbWFfZmVuY2UuaD4KPiAtCj4gLUVYUE9S
VF9UUkFDRVBPSU5UX1NZTUJPTChkbWFfZmVuY2VfZW1pdCk7Cj4gLUVYUE9SVF9UUkFDRVBPSU5U
X1NZTUJPTChkbWFfZmVuY2VfZW5hYmxlX3NpZ25hbCk7Cj4gLUVYUE9SVF9UUkFDRVBPSU5UX1NZ
TUJPTChkbWFfZmVuY2Vfc2lnbmFsZWQpOwo+IC0KPiAgIHN0YXRpYyBERUZJTkVfU1BJTkxPQ0so
ZG1hX2ZlbmNlX3N0dWJfbG9jayk7Cj4gICBzdGF0aWMgc3RydWN0IGRtYV9mZW5jZSBkbWFfZmVu
Y2Vfc3R1YjsKPiAgIAo+IEBAIC0xMzYsNyArMTI5LDYgQEAgRVhQT1JUX1NZTUJPTChkbWFfZmVu
Y2VfY29udGV4dF9hbGxvYyk7Cj4gICAgKi8KPiAgIGludCBkbWFfZmVuY2Vfc2lnbmFsX2xvY2tl
ZChzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkKPiAgIHsKPiAtCXN0cnVjdCBkbWFfZmVuY2VfY2Ig
KmN1ciwgKnRtcDsKPiAgIAlpbnQgcmV0ID0gMDsKPiAgIAo+ICAgCWxvY2tkZXBfYXNzZXJ0X2hl
bGQoZmVuY2UtPmxvY2spOwo+IEBAIC0xNDQsNyArMTM2LDcgQEAgaW50IGRtYV9mZW5jZV9zaWdu
YWxfbG9ja2VkKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQo+ICAgCWlmIChXQVJOX09OKCFmZW5j
ZSkpCj4gICAJCXJldHVybiAtRUlOVkFMOwo+ICAgCj4gLQlpZiAodGVzdF9hbmRfc2V0X2JpdChE
TUFfRkVOQ0VfRkxBR19TSUdOQUxFRF9CSVQsICZmZW5jZS0+ZmxhZ3MpKSB7Cj4gKwlpZiAoIV9f
ZG1hX2ZlbmNlX3NpZ25hbChmZW5jZSkpIHsKPiAgIAkJcmV0ID0gLUVJTlZBTDsKPiAgIAo+ICAg
CQkvKgo+IEBAIC0xNTIsMTUgKzE0NCwxMCBAQCBpbnQgZG1hX2ZlbmNlX3NpZ25hbF9sb2NrZWQo
c3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCj4gICAJCSAqIHN0aWxsIHJ1biB0aHJvdWdoIGFsbCBj
YWxsYmFja3MKPiAgIAkJICovCj4gICAJfSBlbHNlIHsKPiAtCQlmZW5jZS0+dGltZXN0YW1wID0g
a3RpbWVfZ2V0KCk7Cj4gLQkJc2V0X2JpdChETUFfRkVOQ0VfRkxBR19USU1FU1RBTVBfQklULCAm
ZmVuY2UtPmZsYWdzKTsKPiAtCQl0cmFjZV9kbWFfZmVuY2Vfc2lnbmFsZWQoZmVuY2UpOwo+ICsJ
CV9fZG1hX2ZlbmNlX3NpZ25hbF9fdGltZXN0YW1wKGZlbmNlLCBrdGltZV9nZXQoKSk7Cj4gICAJ
fQo+ICAgCj4gLQlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUoY3VyLCB0bXAsICZmZW5jZS0+Y2Jf
bGlzdCwgbm9kZSkgewo+IC0JCWxpc3RfZGVsX2luaXQoJmN1ci0+bm9kZSk7Cj4gLQkJY3VyLT5m
dW5jKGZlbmNlLCBjdXIpOwo+IC0JfQo+ICsJX19kbWFfZmVuY2Vfc2lnbmFsX19ub3RpZnkoZmVu
Y2UpOwo+ICAgCXJldHVybiByZXQ7Cj4gICB9Cj4gICBFWFBPUlRfU1lNQk9MKGRtYV9mZW5jZV9z
aWduYWxfbG9ja2VkKTsKPiBAQCAtMTg1LDIxICsxNzIsMTQgQEAgaW50IGRtYV9mZW5jZV9zaWdu
YWwoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCj4gICAJaWYgKCFmZW5jZSkKPiAgIAkJcmV0dXJu
IC1FSU5WQUw7Cj4gICAKPiAtCWlmICh0ZXN0X2FuZF9zZXRfYml0KERNQV9GRU5DRV9GTEFHX1NJ
R05BTEVEX0JJVCwgJmZlbmNlLT5mbGFncykpCj4gKwlpZiAoIV9fZG1hX2ZlbmNlX3NpZ25hbChm
ZW5jZSkpCj4gICAJCXJldHVybiAtRUlOVkFMOwo+ICAgCj4gLQlmZW5jZS0+dGltZXN0YW1wID0g
a3RpbWVfZ2V0KCk7Cj4gLQlzZXRfYml0KERNQV9GRU5DRV9GTEFHX1RJTUVTVEFNUF9CSVQsICZm
ZW5jZS0+ZmxhZ3MpOwo+IC0JdHJhY2VfZG1hX2ZlbmNlX3NpZ25hbGVkKGZlbmNlKTsKPiArCV9f
ZG1hX2ZlbmNlX3NpZ25hbF9fdGltZXN0YW1wKGZlbmNlLCBrdGltZV9nZXQoKSk7Cj4gICAKPiAg
IAlpZiAodGVzdF9iaXQoRE1BX0ZFTkNFX0ZMQUdfRU5BQkxFX1NJR05BTF9CSVQsICZmZW5jZS0+
ZmxhZ3MpKSB7Cj4gLQkJc3RydWN0IGRtYV9mZW5jZV9jYiAqY3VyLCAqdG1wOwo+IC0KPiAgIAkJ
c3Bpbl9sb2NrX2lycXNhdmUoZmVuY2UtPmxvY2ssIGZsYWdzKTsKPiAtCQlsaXN0X2Zvcl9lYWNo
X2VudHJ5X3NhZmUoY3VyLCB0bXAsICZmZW5jZS0+Y2JfbGlzdCwgbm9kZSkgewo+IC0JCQlsaXN0
X2RlbF9pbml0KCZjdXItPm5vZGUpOwo+IC0JCQljdXItPmZ1bmMoZmVuY2UsIGN1cik7Cj4gLQkJ
fQo+ICsJCV9fZG1hX2ZlbmNlX3NpZ25hbF9fbm90aWZ5KGZlbmNlKTsKPiAgIAkJc3Bpbl91bmxv
Y2tfaXJxcmVzdG9yZShmZW5jZS0+bG9jaywgZmxhZ3MpOwo+ICAgCX0KPiAgIAlyZXR1cm4gMDsK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxfYnJlYWRjcnVtYnMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2JyZWFkY3J1bWJzLmMKPiBpbmRleCBj
MDkyYmRmNWYwYmYuLmQxZjg1NzIxMDBjMyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndC9pbnRlbF9icmVhZGNydW1icy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z3QvaW50ZWxfYnJlYWRjcnVtYnMuYwo+IEBAIC0yMyw3ICsyMyw2IEBACj4gICAgKi8KPiAgIAo+
ICAgI2luY2x1ZGUgPGxpbnV4L2t0aHJlYWQuaD4KPiAtI2luY2x1ZGUgPHRyYWNlL2V2ZW50cy9k
bWFfZmVuY2UuaD4KPiAgICNpbmNsdWRlIDx1YXBpL2xpbnV4L3NjaGVkL3R5cGVzLmg+Cj4gICAK
PiAgICNpbmNsdWRlICJpOTE1X2Rydi5oIgo+IEBAIC05NywzNSArOTYsNiBAQCBjaGVja19zaWdu
YWxfb3JkZXIoc3RydWN0IGludGVsX2NvbnRleHQgKmNlLCBzdHJ1Y3QgaTkxNV9yZXF1ZXN0ICpy
cSkKPiAgIAlyZXR1cm4gdHJ1ZTsKPiAgIH0KPiAgIAo+IC1zdGF0aWMgYm9vbAo+IC1fX2RtYV9m
ZW5jZV9zaWduYWwoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCj4gLXsKPiAtCXJldHVybiAhdGVz
dF9hbmRfc2V0X2JpdChETUFfRkVOQ0VfRkxBR19TSUdOQUxFRF9CSVQsICZmZW5jZS0+ZmxhZ3Mp
Owo+IC19Cj4gLQo+IC1zdGF0aWMgdm9pZAo+IC1fX2RtYV9mZW5jZV9zaWduYWxfX3RpbWVzdGFt
cChzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwga3RpbWVfdCB0aW1lc3RhbXApCj4gLXsKPiAtCWZl
bmNlLT50aW1lc3RhbXAgPSB0aW1lc3RhbXA7Cj4gLQlzZXRfYml0KERNQV9GRU5DRV9GTEFHX1RJ
TUVTVEFNUF9CSVQsICZmZW5jZS0+ZmxhZ3MpOwo+IC0JdHJhY2VfZG1hX2ZlbmNlX3NpZ25hbGVk
KGZlbmNlKTsKPiAtfQo+IC0KPiAtc3RhdGljIHZvaWQKPiAtX19kbWFfZmVuY2Vfc2lnbmFsX19u
b3RpZnkoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCj4gLXsKPiAtCXN0cnVjdCBkbWFfZmVuY2Vf
Y2IgKmN1ciwgKnRtcDsKPiAtCj4gLQlsb2NrZGVwX2Fzc2VydF9oZWxkKGZlbmNlLT5sb2NrKTsK
PiAtCWxvY2tkZXBfYXNzZXJ0X2lycXNfZGlzYWJsZWQoKTsKPiAtCj4gLQlsaXN0X2Zvcl9lYWNo
X2VudHJ5X3NhZmUoY3VyLCB0bXAsICZmZW5jZS0+Y2JfbGlzdCwgbm9kZSkgewo+IC0JCUlOSVRf
TElTVF9IRUFEKCZjdXItPm5vZGUpOwo+IC0JCWN1ci0+ZnVuYyhmZW5jZSwgY3VyKTsKPiAtCX0K
PiAtCUlOSVRfTElTVF9IRUFEKCZmZW5jZS0+Y2JfbGlzdCk7Cj4gLX0KPiAtCj4gICB2b2lkIGlu
dGVsX2VuZ2luZV9icmVhZGNydW1ic19pcnEoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5l
KQo+ICAgewo+ICAgCXN0cnVjdCBpbnRlbF9icmVhZGNydW1icyAqYiA9ICZlbmdpbmUtPmJyZWFk
Y3J1bWJzOwo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2RtYS1mZW5jZS10eXBlcy5oIGIv
aW5jbHVkZS9saW51eC9kbWEtZmVuY2UtdHlwZXMuaAo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4g
aW5kZXggMDAwMDAwMDAwMDAwLi4xOGU3NTExYzBlZWQKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIv
aW5jbHVkZS9saW51eC9kbWEtZmVuY2UtdHlwZXMuaAo+IEBAIC0wLDAgKzEsMjQ4IEBACj4gKy8q
Cj4gKyAqIEZlbmNlIG1lY2hhbmlzbSBmb3IgZG1hLWJ1ZiB0byBhbGxvdyBmb3IgYXN5bmNocm9u
b3VzIGRtYSBhY2Nlc3MKPiArICoKPiArICogQ29weXJpZ2h0IChDKSAyMDEyIENhbm9uaWNhbCBM
dGQKPiArICogQ29weXJpZ2h0IChDKSAyMDEyIFRleGFzIEluc3RydW1lbnRzCj4gKyAqCj4gKyAq
IEF1dGhvcnM6Cj4gKyAqIFJvYiBDbGFyayA8cm9iZGNsYXJrQGdtYWlsLmNvbT4KPiArICogTWFh
cnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGNhbm9uaWNhbC5jb20+Cj4gKyAqCj4g
KyAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBp
dCBhbmQvb3IgbW9kaWZ5IGl0Cj4gKyAqIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVy
YWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAyIGFzIHB1Ymxpc2hlZCBieQo+ICsgKiB0aGUgRnJl
ZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLgo+ICsgKgo+ICsgKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJp
YnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwgYnV0IFdJVEhPVVQKPiAr
ICogQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVS
Q0hBTlRBQklMSVRZIG9yCj4gKyAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAg
U2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IKPiArICogbW9yZSBkZXRhaWxz
Lgo+ICsgKi8KPiArCj4gKyNpZm5kZWYgX19MSU5VWF9ETUFfRkVOQ0VfVFlQRVNfSAo+ICsjZGVm
aW5lIF9fTElOVVhfRE1BX0ZFTkNFX1RZUEVTX0gKPiArCj4gKyNpbmNsdWRlIDxsaW51eC9rcmVm
Lmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9rdGltZS5oPgo+ICsKPiArc3RydWN0IGRtYV9mZW5jZTsK
PiArc3RydWN0IGRtYV9mZW5jZV9vcHM7Cj4gK3N0cnVjdCBkbWFfZmVuY2VfY2I7Cj4gKwo+ICsv
KioKPiArICogc3RydWN0IGRtYV9mZW5jZSAtIHNvZnR3YXJlIHN5bmNocm9uaXphdGlvbiBwcmlt
aXRpdmUKPiArICogQHJlZmNvdW50OiByZWZjb3VudCBmb3IgdGhpcyBmZW5jZQo+ICsgKiBAb3Bz
OiBkbWFfZmVuY2Vfb3BzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGZlbmNlCj4gKyAqIEByY3U6IHVz
ZWQgZm9yIHJlbGVhc2luZyBmZW5jZSB3aXRoIGtmcmVlX3JjdQo+ICsgKiBAY2JfbGlzdDogbGlz
dCBvZiBhbGwgY2FsbGJhY2tzIHRvIGNhbGwKPiArICogQGxvY2s6IHNwaW5fbG9ja19pcnFzYXZl
IHVzZWQgZm9yIGxvY2tpbmcKPiArICogQGNvbnRleHQ6IGV4ZWN1dGlvbiBjb250ZXh0IHRoaXMg
ZmVuY2UgYmVsb25ncyB0bywgcmV0dXJuZWQgYnkKPiArICogICAgICAgICAgIGRtYV9mZW5jZV9j
b250ZXh0X2FsbG9jKCkKPiArICogQHNlcW5vOiB0aGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoaXMg
ZmVuY2UgaW5zaWRlIHRoZSBleGVjdXRpb24gY29udGV4dCwKPiArICogY2FuIGJlIGNvbXBhcmVk
IHRvIGRlY2lkZSB3aGljaCBmZW5jZSB3b3VsZCBiZSBzaWduYWxlZCBsYXRlci4KPiArICogQGZs
YWdzOiBBIG1hc2sgb2YgRE1BX0ZFTkNFX0ZMQUdfKiBkZWZpbmVkIGJlbG93Cj4gKyAqIEB0aW1l
c3RhbXA6IFRpbWVzdGFtcCB3aGVuIHRoZSBmZW5jZSB3YXMgc2lnbmFsZWQuCj4gKyAqIEBlcnJv
cjogT3B0aW9uYWwsIG9ubHkgdmFsaWQgaWYgPCAwLCBtdXN0IGJlIHNldCBiZWZvcmUgY2FsbGlu
Zwo+ICsgKiBkbWFfZmVuY2Vfc2lnbmFsLCBpbmRpY2F0ZXMgdGhhdCB0aGUgZmVuY2UgaGFzIGNv
bXBsZXRlZCB3aXRoIGFuIGVycm9yLgo+ICsgKgo+ICsgKiB0aGUgZmxhZ3MgbWVtYmVyIG11c3Qg
YmUgbWFuaXB1bGF0ZWQgYW5kIHJlYWQgdXNpbmcgdGhlIGFwcHJvcHJpYXRlCj4gKyAqIGF0b21p
YyBvcHMgKGJpdF8qKSwgc28gdGFraW5nIHRoZSBzcGlubG9jayB3aWxsIG5vdCBiZSBuZWVkZWQg
bW9zdAo+ICsgKiBvZiB0aGUgdGltZS4KPiArICoKPiArICogRE1BX0ZFTkNFX0ZMQUdfU0lHTkFM
RURfQklUIC0gZmVuY2UgaXMgYWxyZWFkeSBzaWduYWxlZAo+ICsgKiBETUFfRkVOQ0VfRkxBR19U
SU1FU1RBTVBfQklUIC0gdGltZXN0YW1wIHJlY29yZGVkIGZvciBmZW5jZSBzaWduYWxpbmcKPiAr
ICogRE1BX0ZFTkNFX0ZMQUdfRU5BQkxFX1NJR05BTF9CSVQgLSBlbmFibGVfc2lnbmFsaW5nIG1p
Z2h0IGhhdmUgYmVlbiBjYWxsZWQKPiArICogRE1BX0ZFTkNFX0ZMQUdfVVNFUl9CSVRTIC0gc3Rh
cnQgb2YgdGhlIHVudXNlZCBiaXRzLCBjYW4gYmUgdXNlZCBieSB0aGUKPiArICogaW1wbGVtZW50
ZXIgb2YgdGhlIGZlbmNlIGZvciBpdHMgb3duIHB1cnBvc2VzLiBDYW4gYmUgdXNlZCBpbiBkaWZm
ZXJlbnQKPiArICogd2F5cyBieSBkaWZmZXJlbnQgZmVuY2UgaW1wbGVtZW50ZXJzLCBzbyBkbyBu
b3QgcmVseSBvbiB0aGlzLgo+ICsgKgo+ICsgKiBTaW5jZSBhdG9taWMgYml0b3BzIGFyZSB1c2Vk
LCB0aGlzIGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIHRoZSBjYXNlLgo+ICsgKiBQYXJ0aWN1bGFy
bHksIGlmIHRoZSBiaXQgd2FzIHNldCwgYnV0IGRtYV9mZW5jZV9zaWduYWwgd2FzIGNhbGxlZCBy
aWdodAo+ICsgKiBiZWZvcmUgdGhpcyBiaXQgd2FzIHNldCwgaXQgd291bGQgaGF2ZSBiZWVuIGFi
bGUgdG8gc2V0IHRoZQo+ICsgKiBETUFfRkVOQ0VfRkxBR19TSUdOQUxFRF9CSVQsIGJlZm9yZSBl
bmFibGVfc2lnbmFsaW5nIHdhcyBjYWxsZWQuCj4gKyAqIEFkZGluZyBhIGNoZWNrIGZvciBETUFf
RkVOQ0VfRkxBR19TSUdOQUxFRF9CSVQgYWZ0ZXIgc2V0dGluZwo+ICsgKiBETUFfRkVOQ0VfRkxB
R19FTkFCTEVfU0lHTkFMX0JJVCBjbG9zZXMgdGhpcyByYWNlLCBhbmQgbWFrZXMgc3VyZSB0aGF0
Cj4gKyAqIGFmdGVyIGRtYV9mZW5jZV9zaWduYWwgd2FzIGNhbGxlZCwgYW55IGVuYWJsZV9zaWdu
YWxpbmcgY2FsbCB3aWxsIGhhdmUgZWl0aGVyCj4gKyAqIGJlZW4gY29tcGxldGVkLCBvciBuZXZl
ciBjYWxsZWQgYXQgYWxsLgo+ICsgKi8KPiArc3RydWN0IGRtYV9mZW5jZSB7Cj4gKwlzdHJ1Y3Qg
a3JlZiByZWZjb3VudDsKPiArCWNvbnN0IHN0cnVjdCBkbWFfZmVuY2Vfb3BzICpvcHM7Cj4gKwlz
dHJ1Y3QgcmN1X2hlYWQgcmN1Owo+ICsJc3RydWN0IGxpc3RfaGVhZCBjYl9saXN0Owo+ICsJc3Bp
bmxvY2tfdCAqbG9jazsKPiArCXU2NCBjb250ZXh0Owo+ICsJdTY0IHNlcW5vOwo+ICsJdW5zaWdu
ZWQgbG9uZyBmbGFnczsKPiArCWt0aW1lX3QgdGltZXN0YW1wOwo+ICsJaW50IGVycm9yOwo+ICt9
Owo+ICsKPiArZW51bSBkbWFfZmVuY2VfZmxhZ19iaXRzIHsKPiArCURNQV9GRU5DRV9GTEFHX1NJ
R05BTEVEX0JJVCwKPiArCURNQV9GRU5DRV9GTEFHX1RJTUVTVEFNUF9CSVQsCj4gKwlETUFfRkVO
Q0VfRkxBR19FTkFCTEVfU0lHTkFMX0JJVCwKPiArCURNQV9GRU5DRV9GTEFHX1VTRVJfQklUUywg
LyogbXVzdCBhbHdheXMgYmUgbGFzdCBtZW1iZXIgKi8KPiArfTsKPiArCj4gK3R5cGVkZWYgdm9p
ZCAoKmRtYV9mZW5jZV9mdW5jX3QpKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLAo+ICsJCQkJIHN0
cnVjdCBkbWFfZmVuY2VfY2IgKmNiKTsKPiArCj4gKy8qKgo+ICsgKiBzdHJ1Y3QgZG1hX2ZlbmNl
X2NiIC0gY2FsbGJhY2sgZm9yIGRtYV9mZW5jZV9hZGRfY2FsbGJhY2soKQo+ICsgKiBAbm9kZTog
dXNlZCBieSBkbWFfZmVuY2VfYWRkX2NhbGxiYWNrKCkgdG8gYXBwZW5kIHRoaXMgc3RydWN0IHRv
IGZlbmNlOjpjYl9saXN0Cj4gKyAqIEBmdW5jOiBkbWFfZmVuY2VfZnVuY190IHRvIGNhbGwKPiAr
ICoKPiArICogVGhpcyBzdHJ1Y3Qgd2lsbCBiZSBpbml0aWFsaXplZCBieSBkbWFfZmVuY2VfYWRk
X2NhbGxiYWNrKCksIGFkZGl0aW9uYWwKPiArICogZGF0YSBjYW4gYmUgcGFzc2VkIGFsb25nIGJ5
IGVtYmVkZGluZyBkbWFfZmVuY2VfY2IgaW4gYW5vdGhlciBzdHJ1Y3QuCj4gKyAqLwo+ICtzdHJ1
Y3QgZG1hX2ZlbmNlX2NiIHsKPiArCXN0cnVjdCBsaXN0X2hlYWQgbm9kZTsKPiArCWRtYV9mZW5j
ZV9mdW5jX3QgZnVuYzsKPiArfTsKPiArCj4gKy8qKgo+ICsgKiBzdHJ1Y3QgZG1hX2ZlbmNlX29w
cyAtIG9wZXJhdGlvbnMgaW1wbGVtZW50ZWQgZm9yIGZlbmNlCj4gKyAqCj4gKyAqLwo+ICtzdHJ1
Y3QgZG1hX2ZlbmNlX29wcyB7Cj4gKwkvKioKPiArCSAqIEB1c2VfNjRiaXRfc2Vxbm86Cj4gKwkg
Kgo+ICsJICogVHJ1ZSBpZiB0aGlzIGRtYV9mZW5jZSBpbXBsZW1lbnRhdGlvbiB1c2VzIDY0Yml0
IHNlcW5vLCBmYWxzZQo+ICsJICogb3RoZXJ3aXNlLgo+ICsJICovCj4gKwlib29sIHVzZV82NGJp
dF9zZXFubzsKPiArCj4gKwkvKioKPiArCSAqIEBnZXRfZHJpdmVyX25hbWU6Cj4gKwkgKgo+ICsJ
ICogUmV0dXJucyB0aGUgZHJpdmVyIG5hbWUuIFRoaXMgaXMgYSBjYWxsYmFjayB0byBhbGxvdyBk
cml2ZXJzIHRvCj4gKwkgKiBjb21wdXRlIHRoZSBuYW1lIGF0IHJ1bnRpbWUsIHdpdGhvdXQgaGF2
aW5nIGl0IHRvIHN0b3JlIHBlcm1hbmVudGx5Cj4gKwkgKiBmb3IgZWFjaCBmZW5jZSwgb3IgYnVp
bGQgYSBjYWNoZSBvZiBzb21lIHNvcnQuCj4gKwkgKgo+ICsJICogVGhpcyBjYWxsYmFjayBpcyBt
YW5kYXRvcnkuCj4gKwkgKi8KPiArCWNvbnN0IGNoYXIgKiAoKmdldF9kcml2ZXJfbmFtZSkoc3Ry
dWN0IGRtYV9mZW5jZSAqZmVuY2UpOwo+ICsKPiArCS8qKgo+ICsJICogQGdldF90aW1lbGluZV9u
YW1lOgo+ICsJICoKPiArCSAqIFJldHVybiB0aGUgbmFtZSBvZiB0aGUgY29udGV4dCB0aGlzIGZl
bmNlIGJlbG9uZ3MgdG8uIFRoaXMgaXMgYQo+ICsJICogY2FsbGJhY2sgdG8gYWxsb3cgZHJpdmVy
cyB0byBjb21wdXRlIHRoZSBuYW1lIGF0IHJ1bnRpbWUsIHdpdGhvdXQKPiArCSAqIGhhdmluZyBp
dCB0byBzdG9yZSBwZXJtYW5lbnRseSBmb3IgZWFjaCBmZW5jZSwgb3IgYnVpbGQgYSBjYWNoZSBv
Zgo+ICsJICogc29tZSBzb3J0Lgo+ICsJICoKPiArCSAqIFRoaXMgY2FsbGJhY2sgaXMgbWFuZGF0
b3J5Lgo+ICsJICovCj4gKwljb25zdCBjaGFyICogKCpnZXRfdGltZWxpbmVfbmFtZSkoc3RydWN0
IGRtYV9mZW5jZSAqZmVuY2UpOwo+ICsKPiArCS8qKgo+ICsJICogQGVuYWJsZV9zaWduYWxpbmc6
Cj4gKwkgKgo+ICsJICogRW5hYmxlIHNvZnR3YXJlIHNpZ25hbGluZyBvZiBmZW5jZS4KPiArCSAq
Cj4gKwkgKiBGb3IgZmVuY2UgaW1wbGVtZW50YXRpb25zIHRoYXQgaGF2ZSB0aGUgY2FwYWJpbGl0
eSBmb3IgaHctPmh3Cj4gKwkgKiBzaWduYWxpbmcsIHRoZXkgY2FuIGltcGxlbWVudCB0aGlzIG9w
IHRvIGVuYWJsZSB0aGUgbmVjZXNzYXJ5Cj4gKwkgKiBpbnRlcnJ1cHRzLCBvciBpbnNlcnQgY29t
bWFuZHMgaW50byBjbWRzdHJlYW0sIGV0YywgdG8gYXZvaWQgdGhlc2UKPiArCSAqIGNvc3RseSBv
cGVyYXRpb25zIGZvciB0aGUgY29tbW9uIGNhc2Ugd2hlcmUgb25seSBody0+aHcKPiArCSAqIHN5
bmNocm9uaXphdGlvbiBpcyByZXF1aXJlZC4gIFRoaXMgaXMgY2FsbGVkIGluIHRoZSBmaXJzdAo+
ICsJICogZG1hX2ZlbmNlX3dhaXQoKSBvciBkbWFfZmVuY2VfYWRkX2NhbGxiYWNrKCkgcGF0aCB0
byBsZXQgdGhlIGZlbmNlCj4gKwkgKiBpbXBsZW1lbnRhdGlvbiBrbm93IHRoYXQgdGhlcmUgaXMg
YW5vdGhlciBkcml2ZXIgd2FpdGluZyBvbiB0aGUKPiArCSAqIHNpZ25hbCAoaWUuIGh3LT5zdyBj
YXNlKS4KPiArCSAqCj4gKwkgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgZnJvbSBhdG9t
aWMgY29udGV4dCwgYnV0IG5vdAo+ICsJICogZnJvbSBpcnEgY29udGV4dCwgc28gbm9ybWFsIHNw
aW5sb2NrcyBjYW4gYmUgdXNlZC4KPiArCSAqCj4gKwkgKiBBIHJldHVybiB2YWx1ZSBvZiBmYWxz
ZSBpbmRpY2F0ZXMgdGhlIGZlbmNlIGFscmVhZHkgcGFzc2VkLAo+ICsJICogb3Igc29tZSBmYWls
dXJlIG9jY3VycmVkIHRoYXQgbWFkZSBpdCBpbXBvc3NpYmxlIHRvIGVuYWJsZQo+ICsJICogc2ln
bmFsaW5nLiBUcnVlIGluZGljYXRlcyBzdWNjZXNzZnVsIGVuYWJsaW5nLgo+ICsJICoKPiArCSAq
ICZkbWFfZmVuY2UuZXJyb3IgbWF5IGJlIHNldCBpbiBlbmFibGVfc2lnbmFsaW5nLCBidXQgb25s
eSB3aGVuIGZhbHNlCj4gKwkgKiBpcyByZXR1cm5lZC4KPiArCSAqCj4gKwkgKiBTaW5jZSBtYW55
IGltcGxlbWVudGF0aW9ucyBjYW4gY2FsbCBkbWFfZmVuY2Vfc2lnbmFsKCkgZXZlbiB3aGVuIGJl
Zm9yZQo+ICsJICogQGVuYWJsZV9zaWduYWxpbmcgaGFzIGJlZW4gY2FsbGVkIHRoZXJlJ3MgYSBy
YWNlIHdpbmRvdywgd2hlcmUgdGhlCj4gKwkgKiBkbWFfZmVuY2Vfc2lnbmFsKCkgbWlnaHQgcmVz
dWx0IGluIHRoZSBmaW5hbCBmZW5jZSByZWZlcmVuY2UgYmVpbmcKPiArCSAqIHJlbGVhc2VkIGFu
ZCBpdHMgbWVtb3J5IGZyZWVkLiBUbyBhdm9pZCB0aGlzLCBpbXBsZW1lbnRhdGlvbnMgb2YgdGhp
cwo+ICsJICogY2FsbGJhY2sgc2hvdWxkIGdyYWIgdGhlaXIgb3duIHJlZmVyZW5jZSB1c2luZyBk
bWFfZmVuY2VfZ2V0KCksIHRvIGJlCj4gKwkgKiByZWxlYXNlZCB3aGVuIHRoZSBmZW5jZSBpcyBz
aWduYWxsZWQgKHRocm91Z2ggZS5nLiB0aGUgaW50ZXJydXB0Cj4gKwkgKiBoYW5kbGVyKS4KPiAr
CSAqCj4gKwkgKiBUaGlzIGNhbGxiYWNrIGlzIG9wdGlvbmFsLiBJZiB0aGlzIGNhbGxiYWNrIGlz
IG5vdCBwcmVzZW50LCB0aGVuIHRoZQo+ICsJICogZHJpdmVyIG11c3QgYWx3YXlzIGhhdmUgc2ln
bmFsaW5nIGVuYWJsZWQuCj4gKwkgKi8KPiArCWJvb2wgKCplbmFibGVfc2lnbmFsaW5nKShzdHJ1
Y3QgZG1hX2ZlbmNlICpmZW5jZSk7Cj4gKwo+ICsJLyoqCj4gKwkgKiBAc2lnbmFsZWQ6Cj4gKwkg
Kgo+ICsJICogUGVlayB3aGV0aGVyIHRoZSBmZW5jZSBpcyBzaWduYWxlZCwgYXMgYSBmYXN0cGF0
aCBvcHRpbWl6YXRpb24gZm9yCj4gKwkgKiBlLmcuIGRtYV9mZW5jZV93YWl0KCkgb3IgZG1hX2Zl
bmNlX2FkZF9jYWxsYmFjaygpLiBOb3RlIHRoYXQgdGhpcwo+ICsJICogY2FsbGJhY2sgZG9lcyBu
b3QgbmVlZCB0byBtYWtlIGFueSBndWFyYW50ZWVzIGJleW9uZCB0aGF0IGEgZmVuY2UKPiArCSAq
IG9uY2UgaW5kaWNhdGVzIGFzIHNpZ25hbGxlZCBtdXN0IGFsd2F5cyByZXR1cm4gdHJ1ZSBmcm9t
IHRoaXMKPiArCSAqIGNhbGxiYWNrLiBUaGlzIGNhbGxiYWNrIG1heSByZXR1cm4gZmFsc2UgZXZl
biBpZiB0aGUgZmVuY2UgaGFzCj4gKwkgKiBjb21wbGV0ZWQgYWxyZWFkeSwgaW4gdGhpcyBjYXNl
IGluZm9ybWF0aW9uIGhhc24ndCBwcm9wb2dhdGVkIHRocm91Zwo+ICsJICogdGhlIHN5c3RlbSB5
ZXQuIFNlZSBhbHNvIGRtYV9mZW5jZV9pc19zaWduYWxlZCgpLgo+ICsJICoKPiArCSAqIE1heSBz
ZXQgJmRtYV9mZW5jZS5lcnJvciBpZiByZXR1cm5pbmcgdHJ1ZS4KPiArCSAqCj4gKwkgKiBUaGlz
IGNhbGxiYWNrIGlzIG9wdGlvbmFsLgo+ICsJICovCj4gKwlib29sICgqc2lnbmFsZWQpKHN0cnVj
dCBkbWFfZmVuY2UgKmZlbmNlKTsKPiArCj4gKwkvKioKPiArCSAqIEB3YWl0Ogo+ICsJICoKPiAr
CSAqIEN1c3RvbSB3YWl0IGltcGxlbWVudGF0aW9uLCBkZWZhdWx0cyB0byBkbWFfZmVuY2VfZGVm
YXVsdF93YWl0KCkgaWYKPiArCSAqIG5vdCBzZXQuCj4gKwkgKgo+ICsJICogVGhlIGRtYV9mZW5j
ZV9kZWZhdWx0X3dhaXQgaW1wbGVtZW50YXRpb24gc2hvdWxkIHdvcmsgZm9yIGFueSBmZW5jZSwg
YXMgbG9uZwo+ICsJICogYXMgQGVuYWJsZV9zaWduYWxpbmcgd29ya3MgY29ycmVjdGx5LiBUaGlz
IGhvb2sgYWxsb3dzIGRyaXZlcnMgdG8KPiArCSAqIGhhdmUgYW4gb3B0aW1pemVkIHZlcnNpb24g
Zm9yIHRoZSBjYXNlIHdoZXJlIGEgcHJvY2VzcyBjb250ZXh0IGlzCj4gKwkgKiBhbHJlYWR5IGF2
YWlsYWJsZSwgZS5nLiBpZiBAZW5hYmxlX3NpZ25hbGluZyBmb3IgdGhlIGdlbmVyYWwgY2FzZQo+
ICsJICogbmVlZHMgdG8gc2V0IHVwIGEgd29ya2VyIHRocmVhZC4KPiArCSAqCj4gKwkgKiBNdXN0
IHJldHVybiAtRVJFU1RBUlRTWVMgaWYgdGhlIHdhaXQgaXMgaW50ciA9IHRydWUgYW5kIHRoZSB3
YWl0IHdhcwo+ICsJICogaW50ZXJydXB0ZWQsIGFuZCByZW1haW5pbmcgamlmZmllcyBpZiBmZW5j
ZSBoYXMgc2lnbmFsZWQsIG9yIDAgaWYgd2FpdAo+ICsJICogdGltZWQgb3V0LiBDYW4gYWxzbyBy
ZXR1cm4gb3RoZXIgZXJyb3IgdmFsdWVzIG9uIGN1c3RvbSBpbXBsZW1lbnRhdGlvbnMsCj4gKwkg
KiB3aGljaCBzaG91bGQgYmUgdHJlYXRlZCBhcyBpZiB0aGUgZmVuY2UgaXMgc2lnbmFsZWQuIEZv
ciBleGFtcGxlIGEgaGFyZHdhcmUKPiArCSAqIGxvY2t1cCBjb3VsZCBiZSByZXBvcnRlZCBsaWtl
IHRoYXQuCj4gKwkgKgo+ICsJICogVGhpcyBjYWxsYmFjayBpcyBvcHRpb25hbC4KPiArCSAqLwo+
ICsJc2lnbmVkIGxvbmcgKCp3YWl0KShzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwKPiArCQkJICAg
IGJvb2wgaW50ciwgc2lnbmVkIGxvbmcgdGltZW91dCk7Cj4gKwo+ICsJLyoqCj4gKwkgKiBAcmVs
ZWFzZToKPiArCSAqCj4gKwkgKiBDYWxsZWQgb24gZGVzdHJ1Y3Rpb24gb2YgZmVuY2UgdG8gcmVs
ZWFzZSBhZGRpdGlvbmFsIHJlc291cmNlcy4KPiArCSAqIENhbiBiZSBjYWxsZWQgZnJvbSBpcnEg
Y29udGV4dC4gIFRoaXMgY2FsbGJhY2sgaXMgb3B0aW9uYWwuIElmIGl0IGlzCj4gKwkgKiBOVUxM
LCB0aGVuIGRtYV9mZW5jZV9mcmVlKCkgaXMgaW5zdGVhZCBjYWxsZWQgYXMgdGhlIGRlZmF1bHQK
PiArCSAqIGltcGxlbWVudGF0aW9uLgo+ICsJICovCj4gKwl2b2lkICgqcmVsZWFzZSkoc3RydWN0
IGRtYV9mZW5jZSAqZmVuY2UpOwo+ICsKPiArCS8qKgo+ICsJICogQGZlbmNlX3ZhbHVlX3N0cjoK
PiArCSAqCj4gKwkgKiBDYWxsYmFjayB0byBmaWxsIGluIGZyZWUtZm9ybSBkZWJ1ZyBpbmZvIHNw
ZWNpZmljIHRvIHRoaXMgZmVuY2UsIGxpa2UKPiArCSAqIHRoZSBzZXF1ZW5jZSBudW1iZXIuCj4g
KwkgKgo+ICsJICogVGhpcyBjYWxsYmFjayBpcyBvcHRpb25hbC4KPiArCSAqLwo+ICsJdm9pZCAo
KmZlbmNlX3ZhbHVlX3N0cikoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsIGNoYXIgKnN0ciwgaW50
IHNpemUpOwo+ICsKPiArCS8qKgo+ICsJICogQHRpbWVsaW5lX3ZhbHVlX3N0cjoKPiArCSAqCj4g
KwkgKiBGaWxscyBpbiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdGltZWxpbmUgYXMgYSBzdHJp
bmcsIGxpa2UgdGhlCj4gKwkgKiBzZXF1ZW5jZSBudW1iZXIuIE5vdGUgdGhhdCB0aGUgc3BlY2lm
aWMgZmVuY2UgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24KPiArCSAqIHNob3VsZCBub3QgbWF0dGVy
LCBkcml2ZXJzIHNob3VsZCBvbmx5IHVzZSBpdCB0byBsb29rIHVwIHRoZQo+ICsJICogY29ycmVz
cG9uZGluZyB0aW1lbGluZSBzdHJ1Y3R1cmVzLgo+ICsJICovCj4gKwl2b2lkICgqdGltZWxpbmVf
dmFsdWVfc3RyKShzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwKPiArCQkJCSAgIGNoYXIgKnN0ciwg
aW50IHNpemUpOwo+ICt9Owo+ICsKPiArI2VuZGlmIC8qIF9fTElOVVhfRE1BX0ZFTkNFX1RZUEVT
X0ggKi8KPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9kbWEtZmVuY2UuaCBiL2luY2x1ZGUv
bGludXgvZG1hLWZlbmNlLmgKPiBpbmRleCA5NzQ3MTdkNmFjMGMuLjE0MmViNjdlNjk1ZiAxMDA2
NDQKPiAtLS0gYS9pbmNsdWRlL2xpbnV4L2RtYS1mZW5jZS5oCj4gKysrIGIvaW5jbHVkZS9saW51
eC9kbWEtZmVuY2UuaAo+IEBAIC0yMSw2ICsyMSw3IEBACj4gICAjaWZuZGVmIF9fTElOVVhfRE1B
X0ZFTkNFX0gKPiAgICNkZWZpbmUgX19MSU5VWF9ETUFfRkVOQ0VfSAo+ICAgCj4gKyNpbmNsdWRl
IDxsaW51eC9kbWEtZmVuY2UtdHlwZXMuaD4KPiAgICNpbmNsdWRlIDxsaW51eC9lcnIuaD4KPiAg
ICNpbmNsdWRlIDxsaW51eC93YWl0Lmg+Cj4gICAjaW5jbHVkZSA8bGludXgvbGlzdC5oPgo+IEBA
IC0zMCwyMjYgKzMxLDcgQEAKPiAgICNpbmNsdWRlIDxsaW51eC9wcmludGsuaD4KPiAgICNpbmNs
dWRlIDxsaW51eC9yY3VwZGF0ZS5oPgo+ICAgCj4gLXN0cnVjdCBkbWFfZmVuY2U7Cj4gLXN0cnVj
dCBkbWFfZmVuY2Vfb3BzOwo+IC1zdHJ1Y3QgZG1hX2ZlbmNlX2NiOwo+IC0KPiAtLyoqCj4gLSAq
IHN0cnVjdCBkbWFfZmVuY2UgLSBzb2Z0d2FyZSBzeW5jaHJvbml6YXRpb24gcHJpbWl0aXZlCj4g
LSAqIEByZWZjb3VudDogcmVmY291bnQgZm9yIHRoaXMgZmVuY2UKPiAtICogQG9wczogZG1hX2Zl
bmNlX29wcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBmZW5jZQo+IC0gKiBAcmN1OiB1c2VkIGZvciBy
ZWxlYXNpbmcgZmVuY2Ugd2l0aCBrZnJlZV9yY3UKPiAtICogQGNiX2xpc3Q6IGxpc3Qgb2YgYWxs
IGNhbGxiYWNrcyB0byBjYWxsCj4gLSAqIEBsb2NrOiBzcGluX2xvY2tfaXJxc2F2ZSB1c2VkIGZv
ciBsb2NraW5nCj4gLSAqIEBjb250ZXh0OiBleGVjdXRpb24gY29udGV4dCB0aGlzIGZlbmNlIGJl
bG9uZ3MgdG8sIHJldHVybmVkIGJ5Cj4gLSAqICAgICAgICAgICBkbWFfZmVuY2VfY29udGV4dF9h
bGxvYygpCj4gLSAqIEBzZXFubzogdGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGlzIGZlbmNlIGlu
c2lkZSB0aGUgZXhlY3V0aW9uIGNvbnRleHQsCj4gLSAqIGNhbiBiZSBjb21wYXJlZCB0byBkZWNp
ZGUgd2hpY2ggZmVuY2Ugd291bGQgYmUgc2lnbmFsZWQgbGF0ZXIuCj4gLSAqIEBmbGFnczogQSBt
YXNrIG9mIERNQV9GRU5DRV9GTEFHXyogZGVmaW5lZCBiZWxvdwo+IC0gKiBAdGltZXN0YW1wOiBU
aW1lc3RhbXAgd2hlbiB0aGUgZmVuY2Ugd2FzIHNpZ25hbGVkLgo+IC0gKiBAZXJyb3I6IE9wdGlv
bmFsLCBvbmx5IHZhbGlkIGlmIDwgMCwgbXVzdCBiZSBzZXQgYmVmb3JlIGNhbGxpbmcKPiAtICog
ZG1hX2ZlbmNlX3NpZ25hbCwgaW5kaWNhdGVzIHRoYXQgdGhlIGZlbmNlIGhhcyBjb21wbGV0ZWQg
d2l0aCBhbiBlcnJvci4KPiAtICoKPiAtICogdGhlIGZsYWdzIG1lbWJlciBtdXN0IGJlIG1hbmlw
dWxhdGVkIGFuZCByZWFkIHVzaW5nIHRoZSBhcHByb3ByaWF0ZQo+IC0gKiBhdG9taWMgb3BzIChi
aXRfKiksIHNvIHRha2luZyB0aGUgc3BpbmxvY2sgd2lsbCBub3QgYmUgbmVlZGVkIG1vc3QKPiAt
ICogb2YgdGhlIHRpbWUuCj4gLSAqCj4gLSAqIERNQV9GRU5DRV9GTEFHX1NJR05BTEVEX0JJVCAt
IGZlbmNlIGlzIGFscmVhZHkgc2lnbmFsZWQKPiAtICogRE1BX0ZFTkNFX0ZMQUdfVElNRVNUQU1Q
X0JJVCAtIHRpbWVzdGFtcCByZWNvcmRlZCBmb3IgZmVuY2Ugc2lnbmFsaW5nCj4gLSAqIERNQV9G
RU5DRV9GTEFHX0VOQUJMRV9TSUdOQUxfQklUIC0gZW5hYmxlX3NpZ25hbGluZyBtaWdodCBoYXZl
IGJlZW4gY2FsbGVkCj4gLSAqIERNQV9GRU5DRV9GTEFHX1VTRVJfQklUUyAtIHN0YXJ0IG9mIHRo
ZSB1bnVzZWQgYml0cywgY2FuIGJlIHVzZWQgYnkgdGhlCj4gLSAqIGltcGxlbWVudGVyIG9mIHRo
ZSBmZW5jZSBmb3IgaXRzIG93biBwdXJwb3Nlcy4gQ2FuIGJlIHVzZWQgaW4gZGlmZmVyZW50Cj4g
LSAqIHdheXMgYnkgZGlmZmVyZW50IGZlbmNlIGltcGxlbWVudGVycywgc28gZG8gbm90IHJlbHkg
b24gdGhpcy4KPiAtICoKPiAtICogU2luY2UgYXRvbWljIGJpdG9wcyBhcmUgdXNlZCwgdGhpcyBp
cyBub3QgZ3VhcmFudGVlZCB0byBiZSB0aGUgY2FzZS4KPiAtICogUGFydGljdWxhcmx5LCBpZiB0
aGUgYml0IHdhcyBzZXQsIGJ1dCBkbWFfZmVuY2Vfc2lnbmFsIHdhcyBjYWxsZWQgcmlnaHQKPiAt
ICogYmVmb3JlIHRoaXMgYml0IHdhcyBzZXQsIGl0IHdvdWxkIGhhdmUgYmVlbiBhYmxlIHRvIHNl
dCB0aGUKPiAtICogRE1BX0ZFTkNFX0ZMQUdfU0lHTkFMRURfQklULCBiZWZvcmUgZW5hYmxlX3Np
Z25hbGluZyB3YXMgY2FsbGVkLgo+IC0gKiBBZGRpbmcgYSBjaGVjayBmb3IgRE1BX0ZFTkNFX0ZM
QUdfU0lHTkFMRURfQklUIGFmdGVyIHNldHRpbmcKPiAtICogRE1BX0ZFTkNFX0ZMQUdfRU5BQkxF
X1NJR05BTF9CSVQgY2xvc2VzIHRoaXMgcmFjZSwgYW5kIG1ha2VzIHN1cmUgdGhhdAo+IC0gKiBh
ZnRlciBkbWFfZmVuY2Vfc2lnbmFsIHdhcyBjYWxsZWQsIGFueSBlbmFibGVfc2lnbmFsaW5nIGNh
bGwgd2lsbCBoYXZlIGVpdGhlcgo+IC0gKiBiZWVuIGNvbXBsZXRlZCwgb3IgbmV2ZXIgY2FsbGVk
IGF0IGFsbC4KPiAtICovCj4gLXN0cnVjdCBkbWFfZmVuY2Ugewo+IC0Jc3RydWN0IGtyZWYgcmVm
Y291bnQ7Cj4gLQljb25zdCBzdHJ1Y3QgZG1hX2ZlbmNlX29wcyAqb3BzOwo+IC0Jc3RydWN0IHJj
dV9oZWFkIHJjdTsKPiAtCXN0cnVjdCBsaXN0X2hlYWQgY2JfbGlzdDsKPiAtCXNwaW5sb2NrX3Qg
KmxvY2s7Cj4gLQl1NjQgY29udGV4dDsKPiAtCXU2NCBzZXFubzsKPiAtCXVuc2lnbmVkIGxvbmcg
ZmxhZ3M7Cj4gLQlrdGltZV90IHRpbWVzdGFtcDsKPiAtCWludCBlcnJvcjsKPiAtfTsKPiAtCj4g
LWVudW0gZG1hX2ZlbmNlX2ZsYWdfYml0cyB7Cj4gLQlETUFfRkVOQ0VfRkxBR19TSUdOQUxFRF9C
SVQsCj4gLQlETUFfRkVOQ0VfRkxBR19USU1FU1RBTVBfQklULAo+IC0JRE1BX0ZFTkNFX0ZMQUdf
RU5BQkxFX1NJR05BTF9CSVQsCj4gLQlETUFfRkVOQ0VfRkxBR19VU0VSX0JJVFMsIC8qIG11c3Qg
YWx3YXlzIGJlIGxhc3QgbWVtYmVyICovCj4gLX07Cj4gLQo+IC10eXBlZGVmIHZvaWQgKCpkbWFf
ZmVuY2VfZnVuY190KShzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwKPiAtCQkJCSBzdHJ1Y3QgZG1h
X2ZlbmNlX2NiICpjYik7Cj4gLQo+IC0vKioKPiAtICogc3RydWN0IGRtYV9mZW5jZV9jYiAtIGNh
bGxiYWNrIGZvciBkbWFfZmVuY2VfYWRkX2NhbGxiYWNrKCkKPiAtICogQG5vZGU6IHVzZWQgYnkg
ZG1hX2ZlbmNlX2FkZF9jYWxsYmFjaygpIHRvIGFwcGVuZCB0aGlzIHN0cnVjdCB0byBmZW5jZTo6
Y2JfbGlzdAo+IC0gKiBAZnVuYzogZG1hX2ZlbmNlX2Z1bmNfdCB0byBjYWxsCj4gLSAqCj4gLSAq
IFRoaXMgc3RydWN0IHdpbGwgYmUgaW5pdGlhbGl6ZWQgYnkgZG1hX2ZlbmNlX2FkZF9jYWxsYmFj
aygpLCBhZGRpdGlvbmFsCj4gLSAqIGRhdGEgY2FuIGJlIHBhc3NlZCBhbG9uZyBieSBlbWJlZGRp
bmcgZG1hX2ZlbmNlX2NiIGluIGFub3RoZXIgc3RydWN0Lgo+IC0gKi8KPiAtc3RydWN0IGRtYV9m
ZW5jZV9jYiB7Cj4gLQlzdHJ1Y3QgbGlzdF9oZWFkIG5vZGU7Cj4gLQlkbWFfZmVuY2VfZnVuY190
IGZ1bmM7Cj4gLX07Cj4gLQo+IC0vKioKPiAtICogc3RydWN0IGRtYV9mZW5jZV9vcHMgLSBvcGVy
YXRpb25zIGltcGxlbWVudGVkIGZvciBmZW5jZQo+IC0gKgo+IC0gKi8KPiAtc3RydWN0IGRtYV9m
ZW5jZV9vcHMgewo+IC0JLyoqCj4gLQkgKiBAdXNlXzY0Yml0X3NlcW5vOgo+IC0JICoKPiAtCSAq
IFRydWUgaWYgdGhpcyBkbWFfZmVuY2UgaW1wbGVtZW50YXRpb24gdXNlcyA2NGJpdCBzZXFubywg
ZmFsc2UKPiAtCSAqIG90aGVyd2lzZS4KPiAtCSAqLwo+IC0JYm9vbCB1c2VfNjRiaXRfc2Vxbm87
Cj4gLQo+IC0JLyoqCj4gLQkgKiBAZ2V0X2RyaXZlcl9uYW1lOgo+IC0JICoKPiAtCSAqIFJldHVy
bnMgdGhlIGRyaXZlciBuYW1lLiBUaGlzIGlzIGEgY2FsbGJhY2sgdG8gYWxsb3cgZHJpdmVycyB0
bwo+IC0JICogY29tcHV0ZSB0aGUgbmFtZSBhdCBydW50aW1lLCB3aXRob3V0IGhhdmluZyBpdCB0
byBzdG9yZSBwZXJtYW5lbnRseQo+IC0JICogZm9yIGVhY2ggZmVuY2UsIG9yIGJ1aWxkIGEgY2Fj
aGUgb2Ygc29tZSBzb3J0Lgo+IC0JICoKPiAtCSAqIFRoaXMgY2FsbGJhY2sgaXMgbWFuZGF0b3J5
Lgo+IC0JICovCj4gLQljb25zdCBjaGFyICogKCpnZXRfZHJpdmVyX25hbWUpKHN0cnVjdCBkbWFf
ZmVuY2UgKmZlbmNlKTsKPiAtCj4gLQkvKioKPiAtCSAqIEBnZXRfdGltZWxpbmVfbmFtZToKPiAt
CSAqCj4gLQkgKiBSZXR1cm4gdGhlIG5hbWUgb2YgdGhlIGNvbnRleHQgdGhpcyBmZW5jZSBiZWxv
bmdzIHRvLiBUaGlzIGlzIGEKPiAtCSAqIGNhbGxiYWNrIHRvIGFsbG93IGRyaXZlcnMgdG8gY29t
cHV0ZSB0aGUgbmFtZSBhdCBydW50aW1lLCB3aXRob3V0Cj4gLQkgKiBoYXZpbmcgaXQgdG8gc3Rv
cmUgcGVybWFuZW50bHkgZm9yIGVhY2ggZmVuY2UsIG9yIGJ1aWxkIGEgY2FjaGUgb2YKPiAtCSAq
IHNvbWUgc29ydC4KPiAtCSAqCj4gLQkgKiBUaGlzIGNhbGxiYWNrIGlzIG1hbmRhdG9yeS4KPiAt
CSAqLwo+IC0JY29uc3QgY2hhciAqICgqZ2V0X3RpbWVsaW5lX25hbWUpKHN0cnVjdCBkbWFfZmVu
Y2UgKmZlbmNlKTsKPiAtCj4gLQkvKioKPiAtCSAqIEBlbmFibGVfc2lnbmFsaW5nOgo+IC0JICoK
PiAtCSAqIEVuYWJsZSBzb2Z0d2FyZSBzaWduYWxpbmcgb2YgZmVuY2UuCj4gLQkgKgo+IC0JICog
Rm9yIGZlbmNlIGltcGxlbWVudGF0aW9ucyB0aGF0IGhhdmUgdGhlIGNhcGFiaWxpdHkgZm9yIGh3
LT5odwo+IC0JICogc2lnbmFsaW5nLCB0aGV5IGNhbiBpbXBsZW1lbnQgdGhpcyBvcCB0byBlbmFi
bGUgdGhlIG5lY2Vzc2FyeQo+IC0JICogaW50ZXJydXB0cywgb3IgaW5zZXJ0IGNvbW1hbmRzIGlu
dG8gY21kc3RyZWFtLCBldGMsIHRvIGF2b2lkIHRoZXNlCj4gLQkgKiBjb3N0bHkgb3BlcmF0aW9u
cyBmb3IgdGhlIGNvbW1vbiBjYXNlIHdoZXJlIG9ubHkgaHctPmh3Cj4gLQkgKiBzeW5jaHJvbml6
YXRpb24gaXMgcmVxdWlyZWQuICBUaGlzIGlzIGNhbGxlZCBpbiB0aGUgZmlyc3QKPiAtCSAqIGRt
YV9mZW5jZV93YWl0KCkgb3IgZG1hX2ZlbmNlX2FkZF9jYWxsYmFjaygpIHBhdGggdG8gbGV0IHRo
ZSBmZW5jZQo+IC0JICogaW1wbGVtZW50YXRpb24ga25vdyB0aGF0IHRoZXJlIGlzIGFub3RoZXIg
ZHJpdmVyIHdhaXRpbmcgb24gdGhlCj4gLQkgKiBzaWduYWwgKGllLiBody0+c3cgY2FzZSkuCj4g
LQkgKgo+IC0JICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIGZyb20gYXRvbWljIGNvbnRl
eHQsIGJ1dCBub3QKPiAtCSAqIGZyb20gaXJxIGNvbnRleHQsIHNvIG5vcm1hbCBzcGlubG9ja3Mg
Y2FuIGJlIHVzZWQuCj4gLQkgKgo+IC0JICogQSByZXR1cm4gdmFsdWUgb2YgZmFsc2UgaW5kaWNh
dGVzIHRoZSBmZW5jZSBhbHJlYWR5IHBhc3NlZCwKPiAtCSAqIG9yIHNvbWUgZmFpbHVyZSBvY2N1
cnJlZCB0aGF0IG1hZGUgaXQgaW1wb3NzaWJsZSB0byBlbmFibGUKPiAtCSAqIHNpZ25hbGluZy4g
VHJ1ZSBpbmRpY2F0ZXMgc3VjY2Vzc2Z1bCBlbmFibGluZy4KPiAtCSAqCj4gLQkgKiAmZG1hX2Zl
bmNlLmVycm9yIG1heSBiZSBzZXQgaW4gZW5hYmxlX3NpZ25hbGluZywgYnV0IG9ubHkgd2hlbiBm
YWxzZQo+IC0JICogaXMgcmV0dXJuZWQuCj4gLQkgKgo+IC0JICogU2luY2UgbWFueSBpbXBsZW1l
bnRhdGlvbnMgY2FuIGNhbGwgZG1hX2ZlbmNlX3NpZ25hbCgpIGV2ZW4gd2hlbiBiZWZvcmUKPiAt
CSAqIEBlbmFibGVfc2lnbmFsaW5nIGhhcyBiZWVuIGNhbGxlZCB0aGVyZSdzIGEgcmFjZSB3aW5k
b3csIHdoZXJlIHRoZQo+IC0JICogZG1hX2ZlbmNlX3NpZ25hbCgpIG1pZ2h0IHJlc3VsdCBpbiB0
aGUgZmluYWwgZmVuY2UgcmVmZXJlbmNlIGJlaW5nCj4gLQkgKiByZWxlYXNlZCBhbmQgaXRzIG1l
bW9yeSBmcmVlZC4gVG8gYXZvaWQgdGhpcywgaW1wbGVtZW50YXRpb25zIG9mIHRoaXMKPiAtCSAq
IGNhbGxiYWNrIHNob3VsZCBncmFiIHRoZWlyIG93biByZWZlcmVuY2UgdXNpbmcgZG1hX2ZlbmNl
X2dldCgpLCB0byBiZQo+IC0JICogcmVsZWFzZWQgd2hlbiB0aGUgZmVuY2UgaXMgc2lnbmFsbGVk
ICh0aHJvdWdoIGUuZy4gdGhlIGludGVycnVwdAo+IC0JICogaGFuZGxlcikuCj4gLQkgKgo+IC0J
ICogVGhpcyBjYWxsYmFjayBpcyBvcHRpb25hbC4gSWYgdGhpcyBjYWxsYmFjayBpcyBub3QgcHJl
c2VudCwgdGhlbiB0aGUKPiAtCSAqIGRyaXZlciBtdXN0IGFsd2F5cyBoYXZlIHNpZ25hbGluZyBl
bmFibGVkLgo+IC0JICovCj4gLQlib29sICgqZW5hYmxlX3NpZ25hbGluZykoc3RydWN0IGRtYV9m
ZW5jZSAqZmVuY2UpOwo+IC0KPiAtCS8qKgo+IC0JICogQHNpZ25hbGVkOgo+IC0JICoKPiAtCSAq
IFBlZWsgd2hldGhlciB0aGUgZmVuY2UgaXMgc2lnbmFsZWQsIGFzIGEgZmFzdHBhdGggb3B0aW1p
emF0aW9uIGZvcgo+IC0JICogZS5nLiBkbWFfZmVuY2Vfd2FpdCgpIG9yIGRtYV9mZW5jZV9hZGRf
Y2FsbGJhY2soKS4gTm90ZSB0aGF0IHRoaXMKPiAtCSAqIGNhbGxiYWNrIGRvZXMgbm90IG5lZWQg
dG8gbWFrZSBhbnkgZ3VhcmFudGVlcyBiZXlvbmQgdGhhdCBhIGZlbmNlCj4gLQkgKiBvbmNlIGlu
ZGljYXRlcyBhcyBzaWduYWxsZWQgbXVzdCBhbHdheXMgcmV0dXJuIHRydWUgZnJvbSB0aGlzCj4g
LQkgKiBjYWxsYmFjay4gVGhpcyBjYWxsYmFjayBtYXkgcmV0dXJuIGZhbHNlIGV2ZW4gaWYgdGhl
IGZlbmNlIGhhcwo+IC0JICogY29tcGxldGVkIGFscmVhZHksIGluIHRoaXMgY2FzZSBpbmZvcm1h
dGlvbiBoYXNuJ3QgcHJvcG9nYXRlZCB0aHJvdWcKPiAtCSAqIHRoZSBzeXN0ZW0geWV0LiBTZWUg
YWxzbyBkbWFfZmVuY2VfaXNfc2lnbmFsZWQoKS4KPiAtCSAqCj4gLQkgKiBNYXkgc2V0ICZkbWFf
ZmVuY2UuZXJyb3IgaWYgcmV0dXJuaW5nIHRydWUuCj4gLQkgKgo+IC0JICogVGhpcyBjYWxsYmFj
ayBpcyBvcHRpb25hbC4KPiAtCSAqLwo+IC0JYm9vbCAoKnNpZ25hbGVkKShzdHJ1Y3QgZG1hX2Zl
bmNlICpmZW5jZSk7Cj4gLQo+IC0JLyoqCj4gLQkgKiBAd2FpdDoKPiAtCSAqCj4gLQkgKiBDdXN0
b20gd2FpdCBpbXBsZW1lbnRhdGlvbiwgZGVmYXVsdHMgdG8gZG1hX2ZlbmNlX2RlZmF1bHRfd2Fp
dCgpIGlmCj4gLQkgKiBub3Qgc2V0Lgo+IC0JICoKPiAtCSAqIFRoZSBkbWFfZmVuY2VfZGVmYXVs
dF93YWl0IGltcGxlbWVudGF0aW9uIHNob3VsZCB3b3JrIGZvciBhbnkgZmVuY2UsIGFzIGxvbmcK
PiAtCSAqIGFzIEBlbmFibGVfc2lnbmFsaW5nIHdvcmtzIGNvcnJlY3RseS4gVGhpcyBob29rIGFs
bG93cyBkcml2ZXJzIHRvCj4gLQkgKiBoYXZlIGFuIG9wdGltaXplZCB2ZXJzaW9uIGZvciB0aGUg
Y2FzZSB3aGVyZSBhIHByb2Nlc3MgY29udGV4dCBpcwo+IC0JICogYWxyZWFkeSBhdmFpbGFibGUs
IGUuZy4gaWYgQGVuYWJsZV9zaWduYWxpbmcgZm9yIHRoZSBnZW5lcmFsIGNhc2UKPiAtCSAqIG5l
ZWRzIHRvIHNldCB1cCBhIHdvcmtlciB0aHJlYWQuCj4gLQkgKgo+IC0JICogTXVzdCByZXR1cm4g
LUVSRVNUQVJUU1lTIGlmIHRoZSB3YWl0IGlzIGludHIgPSB0cnVlIGFuZCB0aGUgd2FpdCB3YXMK
PiAtCSAqIGludGVycnVwdGVkLCBhbmQgcmVtYWluaW5nIGppZmZpZXMgaWYgZmVuY2UgaGFzIHNp
Z25hbGVkLCBvciAwIGlmIHdhaXQKPiAtCSAqIHRpbWVkIG91dC4gQ2FuIGFsc28gcmV0dXJuIG90
aGVyIGVycm9yIHZhbHVlcyBvbiBjdXN0b20gaW1wbGVtZW50YXRpb25zLAo+IC0JICogd2hpY2gg
c2hvdWxkIGJlIHRyZWF0ZWQgYXMgaWYgdGhlIGZlbmNlIGlzIHNpZ25hbGVkLiBGb3IgZXhhbXBs
ZSBhIGhhcmR3YXJlCj4gLQkgKiBsb2NrdXAgY291bGQgYmUgcmVwb3J0ZWQgbGlrZSB0aGF0Lgo+
IC0JICoKPiAtCSAqIFRoaXMgY2FsbGJhY2sgaXMgb3B0aW9uYWwuCj4gLQkgKi8KPiAtCXNpZ25l
ZCBsb25nICgqd2FpdCkoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsCj4gLQkJCSAgICBib29sIGlu
dHIsIHNpZ25lZCBsb25nIHRpbWVvdXQpOwo+IC0KPiAtCS8qKgo+IC0JICogQHJlbGVhc2U6Cj4g
LQkgKgo+IC0JICogQ2FsbGVkIG9uIGRlc3RydWN0aW9uIG9mIGZlbmNlIHRvIHJlbGVhc2UgYWRk
aXRpb25hbCByZXNvdXJjZXMuCj4gLQkgKiBDYW4gYmUgY2FsbGVkIGZyb20gaXJxIGNvbnRleHQu
ICBUaGlzIGNhbGxiYWNrIGlzIG9wdGlvbmFsLiBJZiBpdCBpcwo+IC0JICogTlVMTCwgdGhlbiBk
bWFfZmVuY2VfZnJlZSgpIGlzIGluc3RlYWQgY2FsbGVkIGFzIHRoZSBkZWZhdWx0Cj4gLQkgKiBp
bXBsZW1lbnRhdGlvbi4KPiAtCSAqLwo+IC0Jdm9pZCAoKnJlbGVhc2UpKHN0cnVjdCBkbWFfZmVu
Y2UgKmZlbmNlKTsKPiAtCj4gLQkvKioKPiAtCSAqIEBmZW5jZV92YWx1ZV9zdHI6Cj4gLQkgKgo+
IC0JICogQ2FsbGJhY2sgdG8gZmlsbCBpbiBmcmVlLWZvcm0gZGVidWcgaW5mbyBzcGVjaWZpYyB0
byB0aGlzIGZlbmNlLCBsaWtlCj4gLQkgKiB0aGUgc2VxdWVuY2UgbnVtYmVyLgo+IC0JICoKPiAt
CSAqIFRoaXMgY2FsbGJhY2sgaXMgb3B0aW9uYWwuCj4gLQkgKi8KPiAtCXZvaWQgKCpmZW5jZV92
YWx1ZV9zdHIpKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLCBjaGFyICpzdHIsIGludCBzaXplKTsK
PiAtCj4gLQkvKioKPiAtCSAqIEB0aW1lbGluZV92YWx1ZV9zdHI6Cj4gLQkgKgo+IC0JICogRmls
bHMgaW4gdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHRpbWVsaW5lIGFzIGEgc3RyaW5nLCBsaWtl
IHRoZQo+IC0JICogc2VxdWVuY2UgbnVtYmVyLiBOb3RlIHRoYXQgdGhlIHNwZWNpZmljIGZlbmNl
IHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uCj4gLQkgKiBzaG91bGQgbm90IG1hdHRlciwgZHJpdmVy
cyBzaG91bGQgb25seSB1c2UgaXQgdG8gbG9vayB1cCB0aGUKPiAtCSAqIGNvcnJlc3BvbmRpbmcg
dGltZWxpbmUgc3RydWN0dXJlcy4KPiAtCSAqLwo+IC0Jdm9pZCAoKnRpbWVsaW5lX3ZhbHVlX3N0
cikoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsCj4gLQkJCQkgICBjaGFyICpzdHIsIGludCBzaXpl
KTsKPiAtfTsKPiArI2luY2x1ZGUgPHRyYWNlL2V2ZW50cy9kbWFfZmVuY2UuaD4KPiAgIAo+ICAg
dm9pZCBkbWFfZmVuY2VfaW5pdChzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwgY29uc3Qgc3RydWN0
IGRtYV9mZW5jZV9vcHMgKm9wcywKPiAgIAkJICAgIHNwaW5sb2NrX3QgKmxvY2ssIHU2NCBjb250
ZXh0LCB1NjQgc2Vxbm8pOwo+IEBAIC01NjEsNiArMzQzLDM1IEBAIHN0YXRpYyBpbmxpbmUgc2ln
bmVkIGxvbmcgZG1hX2ZlbmNlX3dhaXQoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsIGJvb2wgaW50
cikKPiAgIHN0cnVjdCBkbWFfZmVuY2UgKmRtYV9mZW5jZV9nZXRfc3R1Yih2b2lkKTsKPiAgIHU2
NCBkbWFfZmVuY2VfY29udGV4dF9hbGxvYyh1bnNpZ25lZCBudW0pOwo+ICAgCj4gK3N0YXRpYyBp
bmxpbmUgYm9vbAo+ICtfX2RtYV9mZW5jZV9zaWduYWwoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2Up
Cj4gK3sKPiArCXJldHVybiAhdGVzdF9hbmRfc2V0X2JpdChETUFfRkVOQ0VfRkxBR19TSUdOQUxF
RF9CSVQsICZmZW5jZS0+ZmxhZ3MpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW5saW5lIHZvaWQKPiAr
X19kbWFfZmVuY2Vfc2lnbmFsX190aW1lc3RhbXAoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsIGt0
aW1lX3QgdGltZXN0YW1wKQo+ICt7Cj4gKwlmZW5jZS0+dGltZXN0YW1wID0gdGltZXN0YW1wOwo+
ICsJc2V0X2JpdChETUFfRkVOQ0VfRkxBR19USU1FU1RBTVBfQklULCAmZmVuY2UtPmZsYWdzKTsK
PiArCXRyYWNlX2RtYV9mZW5jZV9zaWduYWxlZChmZW5jZSk7Cj4gK30KPiArCj4gK3N0YXRpYyBp
bmxpbmUgdm9pZAo+ICtfX2RtYV9mZW5jZV9zaWduYWxfX25vdGlmeShzdHJ1Y3QgZG1hX2ZlbmNl
ICpmZW5jZSkKPiArewo+ICsJc3RydWN0IGRtYV9mZW5jZV9jYiAqY3VyLCAqdG1wOwo+ICsKPiAr
CWxvY2tkZXBfYXNzZXJ0X2hlbGQoZmVuY2UtPmxvY2spOwo+ICsJbG9ja2RlcF9hc3NlcnRfaXJx
c19kaXNhYmxlZCgpOwo+ICsKPiArCWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShjdXIsIHRtcCwg
JmZlbmNlLT5jYl9saXN0LCBub2RlKSB7Cj4gKwkJSU5JVF9MSVNUX0hFQUQoJmN1ci0+bm9kZSk7
Cj4gKwkJY3VyLT5mdW5jKGZlbmNlLCBjdXIpOwo+ICsJfQo+ICsJSU5JVF9MSVNUX0hFQUQoJmZl
bmNlLT5jYl9saXN0KTsKPiArfQo+ICsKPiAgICNkZWZpbmUgRE1BX0ZFTkNFX1RSQUNFKGYsIGZt
dCwgYXJncy4uLikgXAo+ICAgCWRvIHsJCQkJCQkJCVwKPiAgIAkJc3RydWN0IGRtYV9mZW5jZSAq
X19mZiA9IChmKTsJCQkJXAo+IApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9k
cmktZGV2ZWw=
