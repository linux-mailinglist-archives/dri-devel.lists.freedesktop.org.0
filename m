Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3A32C524B0
	for <lists+dri-devel@lfdr.de>; Tue, 25 Jun 2019 09:29:55 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3FED96E05D;
	Tue, 25 Jun 2019 07:28:11 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x443.google.com (mail-wr1-x443.google.com
 [IPv6:2a00:1450:4864:20::443])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3987A89DE5
 for <dri-devel@lists.freedesktop.org>; Mon, 24 Jun 2019 21:02:06 +0000 (UTC)
Received: by mail-wr1-x443.google.com with SMTP id k11so15401727wrl.1
 for <dri-devel@lists.freedesktop.org>; Mon, 24 Jun 2019 14:02:06 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=bvrLwS8goK61NFHHKG+L59ElQQ6a+tjA3TuLNO1hols=;
 b=RoRTLDEFWbfPdtvgUmyzSS8Qis6p8zV1j/QBWeqNLtyjCfYXPnQ8NnaHtgbgpA9bKo
 UQprsGANX2IUIqXjdnnjZwAZdYLIVZTt6s1PFruN7wMBKH850+pGtBg2Fgyeelu+0DCa
 0kZvThNhbyeDzp526frrzIt+/Wr4+UVdoVcE+DFOoCNXfijhA534ShJCDlgGns/mnsxw
 HeQFMCT1qi05riO4QBsIC0bWvkDNLHdAKMhTHeiObIVzcP2tfB5n1QD6AH/zFk8SjSLq
 b+a0xDkYIhhaf0p3+GH6zygTk0Cujbz0yIrUfsu1cCNb+xUcD5V42pBuLRH6Kx+GmzIj
 vIrw==
X-Gm-Message-State: APjAAAWDu7bOHmoG7goe9CtyxI+tFiincOvT8FFYPiihDrrdguiCbu9X
 tvEmoTa1x0lDDfBjqVExkHUIrw==
X-Google-Smtp-Source: APXvYqzXxflttImXsUfCwAd7r65RK1DVJZBGVN7mipcY4Irf1EG1vjNhQIrTK0Km8IeO1SnCpwVb8g==
X-Received: by 2002:adf:b1ca:: with SMTP id r10mr34168985wra.156.1561410124460; 
 Mon, 24 Jun 2019 14:02:04 -0700 (PDT)
Received: from ziepe.ca ([66.187.232.66])
 by smtp.gmail.com with ESMTPSA id n14sm26883973wra.75.2019.06.24.14.02.02
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Mon, 24 Jun 2019 14:02:02 -0700 (PDT)
Received: from jgg by jggl.ziepe.ca with local (Exim 4.90_1)
 (envelope-from <jgg@ziepe.ca>)
 id 1hfW6C-0001M7-PX; Mon, 24 Jun 2019 18:02:00 -0300
From: Jason Gunthorpe <jgg@ziepe.ca>
To: Jerome Glisse <jglisse@redhat.com>, Ralph Campbell <rcampbell@nvidia.com>,
 John Hubbard <jhubbard@nvidia.com>, Felix.Kuehling@amd.com
Subject: [PATCH v4 hmm 02/12] mm/hmm: Use hmm_mirror not mm as an argument for
 hmm_range_register
Date: Mon, 24 Jun 2019 18:01:00 -0300
Message-Id: <20190624210110.5098-3-jgg@ziepe.ca>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190624210110.5098-1-jgg@ziepe.ca>
References: <20190624210110.5098-1-jgg@ziepe.ca>
MIME-Version: 1.0
X-Mailman-Approved-At: Tue, 25 Jun 2019 07:27:07 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ziepe.ca; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=bvrLwS8goK61NFHHKG+L59ElQQ6a+tjA3TuLNO1hols=;
 b=eVFuqGal7MmrKBtKN1rp7PO9U9nA5Z3G5ySp7ACdyjU8KPVJwiMhZOX3ijBDCcRL1S
 GTWW6OsNpDRwAQ99IpOKbjE4ke8ZJxp+O8FP/MG8xEtB6bNNyhoddDXqx09MksC3ucTO
 oJ93yVe3SvCZh0B9cLyVmwFyg4NWK+yvtmHIR5Ht19fKXdc1deBlAadM2MfQOo7DpfxL
 u45+uLrEWPgz5VW+SYVHONBoIIEBy3hHaaX9UXvxqchVA5MxvXU51AT2KJdXKstwNhpK
 HS8SeD4+RAjEkcCeH/9NHi+z2QOq0pKZI8APHroOaypyHDbREEEL9MVSPuU3viLHbv3C
 +MFg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Andrea Arcangeli <aarcange@redhat.com>, Philip Yang <Philip.Yang@amd.com>,
 linux-rdma@vger.kernel.org, amd-gfx@lists.freedesktop.org, linux-mm@kvack.org,
 Jason Gunthorpe <jgg@mellanox.com>, dri-devel@lists.freedesktop.org,
 Ira Weiny <ira.weiny@intel.com>, Christoph Hellwig <hch@lst.de>,
 Ben Skeggs <bskeggs@redhat.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogSmFzb24gR3VudGhvcnBlIDxqZ2dAbWVsbGFub3guY29tPgoKUmFscGggb2JzZXJ2ZXMg
dGhhdCBobW1fcmFuZ2VfcmVnaXN0ZXIoKSBjYW4gb25seSBiZSBjYWxsZWQgYnkgYSBkcml2ZXIK
d2hpbGUgYSBtaXJyb3IgaXMgcmVnaXN0ZXJlZC4gTWFrZSB0aGlzIGNsZWFyIGluIHRoZSBBUEkg
YnkgcGFzc2luZyBpbiB0aGUKbWlycm9yIHN0cnVjdHVyZSBhcyBhIHBhcmFtZXRlci4KClRoaXMg
YWxzbyBzaW1wbGlmaWVzIHVuZGVyc3RhbmRpbmcgdGhlIGxpZmV0aW1lIG1vZGVsIGZvciBzdHJ1
Y3QgaG1tLCBhcwp0aGUgaG1tIHBvaW50ZXIgbXVzdCBiZSB2YWxpZCBhcyBwYXJ0IG9mIGEgcmVn
aXN0ZXJlZCBtaXJyb3Igc28gYWxsIHdlCm5lZWQgaW4gaG1tX3JlZ2lzdGVyX3JhbmdlKCkgaXMg
YSBzaW1wbGUga3JlZl9nZXQuCgpTdWdnZXN0ZWQtYnk6IFJhbHBoIENhbXBiZWxsIDxyY2FtcGJl
bGxAbnZpZGlhLmNvbT4KU2lnbmVkLW9mZi1ieTogSmFzb24gR3VudGhvcnBlIDxqZ2dAbWVsbGFu
b3guY29tPgpSZXZpZXdlZC1ieTogSm9obiBIdWJiYXJkIDxqaHViYmFyZEBudmlkaWEuY29tPgpS
ZXZpZXdlZC1ieTogUmFscGggQ2FtcGJlbGwgPHJjYW1wYmVsbEBudmlkaWEuY29tPgpSZXZpZXdl
ZC1ieTogSXJhIFdlaW55IDxpcmEud2VpbnlAaW50ZWwuY29tPgpSZXZpZXdlZC1ieTogQ2hyaXN0
b3BoIEhlbGx3aWcgPGhjaEBsc3QuZGU+ClRlc3RlZC1ieTogUGhpbGlwIFlhbmcgPFBoaWxpcC5Z
YW5nQGFtZC5jb20+Ci0tLQp2MgotIEluY2x1ZGUgdGhlIG9uZWxpbmUgcGF0Y2ggdG8gbm91dmVh
dV9zdm0uYwotLS0KIGRyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfc3ZtLmMgfCAgMiAr
LQogaW5jbHVkZS9saW51eC9obW0uaCAgICAgICAgICAgICAgICAgICB8ICA3ICsrKystLS0KIG1t
L2htbS5jICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAxMyArKysrLS0tLS0tLS0tCiAz
IGZpbGVzIGNoYW5nZWQsIDkgaW5zZXJ0aW9ucygrKSwgMTMgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9zdm0uYyBiL2RyaXZlcnMvZ3B1
L2RybS9ub3V2ZWF1L25vdXZlYXVfc3ZtLmMKaW5kZXggOTNlZDQzYzQxM2YwYmIuLjhjOTIzNzRh
ZmNmMjI3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3N2bS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfc3ZtLmMKQEAgLTY0OSw3ICs2
NDksNyBAQCBub3V2ZWF1X3N2bV9mYXVsdChzdHJ1Y3QgbnZpZl9ub3RpZnkgKm5vdGlmeSkKIAkJ
cmFuZ2UudmFsdWVzID0gbm91dmVhdV9zdm1fcGZuX3ZhbHVlczsKIAkJcmFuZ2UucGZuX3NoaWZ0
ID0gTlZJRl9WTU1fUEZOTUFQX1YwX0FERFJfU0hJRlQ7CiBhZ2FpbjoKLQkJcmV0ID0gaG1tX3Zt
YV9mYXVsdCgmcmFuZ2UsIHRydWUpOworCQlyZXQgPSBobW1fdm1hX2ZhdWx0KCZzdm1tLT5taXJy
b3IsICZyYW5nZSwgdHJ1ZSk7CiAJCWlmIChyZXQgPT0gMCkgewogCQkJbXV0ZXhfbG9jaygmc3Zt
bS0+bXV0ZXgpOwogCQkJaWYgKCFobW1fdm1hX3JhbmdlX2RvbmUoJnJhbmdlKSkgewpkaWZmIC0t
Z2l0IGEvaW5jbHVkZS9saW51eC9obW0uaCBiL2luY2x1ZGUvbGludXgvaG1tLmgKaW5kZXggY2Iw
MWNmMWZhM2MwOGIuLjFmYmE2OTc5YWRmNDYwIDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4L2ht
bS5oCisrKyBiL2luY2x1ZGUvbGludXgvaG1tLmgKQEAgLTQ5Niw3ICs0OTYsNyBAQCBzdGF0aWMg
aW5saW5lIGJvb2wgaG1tX21pcnJvcl9tbV9pc19hbGl2ZShzdHJ1Y3QgaG1tX21pcnJvciAqbWly
cm9yKQogICogUGxlYXNlIHNlZSBEb2N1bWVudGF0aW9uL3ZtL2htbS5yc3QgZm9yIGhvdyB0byB1
c2UgdGhlIHJhbmdlIEFQSS4KICAqLwogaW50IGhtbV9yYW5nZV9yZWdpc3RlcihzdHJ1Y3QgaG1t
X3JhbmdlICpyYW5nZSwKLQkJICAgICAgIHN0cnVjdCBtbV9zdHJ1Y3QgKm1tLAorCQkgICAgICAg
c3RydWN0IGhtbV9taXJyb3IgKm1pcnJvciwKIAkJICAgICAgIHVuc2lnbmVkIGxvbmcgc3RhcnQs
CiAJCSAgICAgICB1bnNpZ25lZCBsb25nIGVuZCwKIAkJICAgICAgIHVuc2lnbmVkIHBhZ2Vfc2hp
ZnQpOwpAQCAtNTMyLDcgKzUzMiw4IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBobW1fdm1hX3Jhbmdl
X2RvbmUoc3RydWN0IGhtbV9yYW5nZSAqcmFuZ2UpCiB9CiAKIC8qIFRoaXMgaXMgYSB0ZW1wb3Jh
cnkgaGVscGVyIHRvIGF2b2lkIG1lcmdlIGNvbmZsaWN0IGJldHdlZW4gdHJlZXMuICovCi1zdGF0
aWMgaW5saW5lIGludCBobW1fdm1hX2ZhdWx0KHN0cnVjdCBobW1fcmFuZ2UgKnJhbmdlLCBib29s
IGJsb2NrKQorc3RhdGljIGlubGluZSBpbnQgaG1tX3ZtYV9mYXVsdChzdHJ1Y3QgaG1tX21pcnJv
ciAqbWlycm9yLAorCQkJCXN0cnVjdCBobW1fcmFuZ2UgKnJhbmdlLCBib29sIGJsb2NrKQogewog
CWxvbmcgcmV0OwogCkBAIC01NDUsNyArNTQ2LDcgQEAgc3RhdGljIGlubGluZSBpbnQgaG1tX3Zt
YV9mYXVsdChzdHJ1Y3QgaG1tX3JhbmdlICpyYW5nZSwgYm9vbCBibG9jaykKIAlyYW5nZS0+ZGVm
YXVsdF9mbGFncyA9IDA7CiAJcmFuZ2UtPnBmbl9mbGFnc19tYXNrID0gLTFVTDsKIAotCXJldCA9
IGhtbV9yYW5nZV9yZWdpc3RlcihyYW5nZSwgcmFuZ2UtPnZtYS0+dm1fbW0sCisJcmV0ID0gaG1t
X3JhbmdlX3JlZ2lzdGVyKHJhbmdlLCBtaXJyb3IsCiAJCQkJIHJhbmdlLT5zdGFydCwgcmFuZ2Ut
PmVuZCwKIAkJCQkgUEFHRV9TSElGVCk7CiAJaWYgKHJldCkKZGlmZiAtLWdpdCBhL21tL2htbS5j
IGIvbW0vaG1tLmMKaW5kZXggZjY5NTZkNzhlM2NiMjUuLjIyYTk3YWRhMTA4YjRlIDEwMDY0NAot
LS0gYS9tbS9obW0uYworKysgYi9tbS9obW0uYwpAQCAtOTE0LDEzICs5MTQsMTMgQEAgc3RhdGlj
IHZvaWQgaG1tX3BmbnNfY2xlYXIoc3RydWN0IGhtbV9yYW5nZSAqcmFuZ2UsCiAgKiBUcmFjayB1
cGRhdGVzIHRvIHRoZSBDUFUgcGFnZSB0YWJsZSBzZWUgaW5jbHVkZS9saW51eC9obW0uaAogICov
CiBpbnQgaG1tX3JhbmdlX3JlZ2lzdGVyKHN0cnVjdCBobW1fcmFuZ2UgKnJhbmdlLAotCQkgICAg
ICAgc3RydWN0IG1tX3N0cnVjdCAqbW0sCisJCSAgICAgICBzdHJ1Y3QgaG1tX21pcnJvciAqbWly
cm9yLAogCQkgICAgICAgdW5zaWduZWQgbG9uZyBzdGFydCwKIAkJICAgICAgIHVuc2lnbmVkIGxv
bmcgZW5kLAogCQkgICAgICAgdW5zaWduZWQgcGFnZV9zaGlmdCkKIHsKIAl1bnNpZ25lZCBsb25n
IG1hc2sgPSAoKDFVTCA8PCBwYWdlX3NoaWZ0KSAtIDFVTCk7Ci0Jc3RydWN0IGhtbSAqaG1tOwor
CXN0cnVjdCBobW0gKmhtbSA9IG1pcnJvci0+aG1tOwogCiAJcmFuZ2UtPnZhbGlkID0gZmFsc2U7
CiAJcmFuZ2UtPmhtbSA9IE5VTEw7CkBAIC05MzQsMjAgKzkzNCwxNSBAQCBpbnQgaG1tX3Jhbmdl
X3JlZ2lzdGVyKHN0cnVjdCBobW1fcmFuZ2UgKnJhbmdlLAogCXJhbmdlLT5zdGFydCA9IHN0YXJ0
OwogCXJhbmdlLT5lbmQgPSBlbmQ7CiAKLQlobW0gPSBobW1fZ2V0X29yX2NyZWF0ZShtbSk7Ci0J
aWYgKCFobW0pCi0JCXJldHVybiAtRUZBVUxUOwotCiAJLyogQ2hlY2sgaWYgaG1tX21tX2Rlc3Ry
b3koKSB3YXMgY2FsbC4gKi8KLQlpZiAoaG1tLT5tbSA9PSBOVUxMIHx8IGhtbS0+ZGVhZCkgewot
CQlobW1fcHV0KGhtbSk7CisJaWYgKGhtbS0+bW0gPT0gTlVMTCB8fCBobW0tPmRlYWQpCiAJCXJl
dHVybiAtRUZBVUxUOwotCX0KIAogCS8qIEluaXRpYWxpemUgcmFuZ2UgdG8gdHJhY2sgQ1BVIHBh
Z2UgdGFibGUgdXBkYXRlcy4gKi8KIAltdXRleF9sb2NrKCZobW0tPmxvY2spOwogCiAJcmFuZ2Ut
PmhtbSA9IGhtbTsKKwlrcmVmX2dldCgmaG1tLT5rcmVmKTsKIAlsaXN0X2FkZF9yY3UoJnJhbmdl
LT5saXN0LCAmaG1tLT5yYW5nZXMpOwogCiAJLyoKLS0gCjIuMjIuMAoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApk
cmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
