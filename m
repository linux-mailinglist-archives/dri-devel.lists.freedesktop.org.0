Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BC39610F013
	for <lists+dri-devel@lfdr.de>; Mon,  2 Dec 2019 20:33:13 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3C89A6E2B6;
	Mon,  2 Dec 2019 19:33:10 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lj1-x244.google.com (mail-lj1-x244.google.com
 [IPv6:2a00:1450:4864:20::244])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3C5086E2B6
 for <dri-devel@lists.freedesktop.org>; Mon,  2 Dec 2019 19:33:09 +0000 (UTC)
Received: by mail-lj1-x244.google.com with SMTP id u17so847927lja.4
 for <dri-devel@lists.freedesktop.org>; Mon, 02 Dec 2019 11:33:09 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:from:to:cc:subject:date:message-id
 :in-reply-to:references:mime-version:content-transfer-encoding;
 bh=kQQWTzPxFOvUW0DGcl4YpgZWZHH+8BFvj48Hp2FKfa8=;
 b=ZO2Kp/Z9rq6GporupirNDl8ykifrXb/A0SoPa3s/ApKwpJbGnnjdTzrxXT2RuGbXdq
 CMYpjeVHZzj+smUNb8ovDpstw5ixwGva9TDbnaStZjk7s+amhnOZ6oTOFOZasORB7tw2
 hKZcHjWNNM/DXvZMZ/pU1HaKENmhqG1Kz6xVpoH/LfbiagH61cw36b9gzGlZMhYyB9it
 a8mEgiio+xqxFYUZlOBt/Z8dUM9khPU0kqPsow2Sxlb8WehFYh/xL5//U+eM9tsrXYRo
 EwSmiPWBaEe+m0xSp35gxxZ4yYqr2ma+Qw26ddWXiJzQjgp1TIa2jOpD3L3OZOEANczH
 zpsg==
X-Gm-Message-State: APjAAAXkaoYgnpBLS2kxXWD/pIygnrDoXCVYdymPQNBcuH5PLNfhD5Wn
 AWvlr+UdYZpS8YXxTMaqmUyE7pEcbVn52w==
X-Google-Smtp-Source: APXvYqwYpJfjizEaD5IBDV4xc3cEeqEstQeeKZaXT9Z/vSBZFIXZ28HzUNDZprk6Zlxob1NmomY5yg==
X-Received: by 2002:a2e:7202:: with SMTP id n2mr243436ljc.194.1575315187338;
 Mon, 02 Dec 2019 11:33:07 -0800 (PST)
Received: from saturn.lan (18.158-248-194.customer.lyse.net. [158.248.194.18])
 by smtp.gmail.com with ESMTPSA id
 g13sm79482lfb.74.2019.12.02.11.33.05
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 02 Dec 2019 11:33:06 -0800 (PST)
From: Sam Ravnborg <sam@ravnborg.org>
To: dri-devel@lists.freedesktop.org, Thierry Reding <thierry.reding@gmail.com>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Subject: [PATCH v1 02/26] drm/panel: add backlight support
Date: Mon,  2 Dec 2019 20:32:06 +0100
Message-Id: <20191202193230.21310-3-sam@ravnborg.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191202193230.21310-1-sam@ravnborg.org>
References: <20191202193230.21310-1-sam@ravnborg.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=sender:from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=kQQWTzPxFOvUW0DGcl4YpgZWZHH+8BFvj48Hp2FKfa8=;
 b=P7qfmJB7gvDRX9cK4SwTcYkfCK+h7HfN6dil8iCxOUJpUAmm2axESYkmf6IUXBX3Uq
 WcmlNpE+pVguPwT3omJfvN4fWDZrMuwuXEfiWzGRCml/b3t3ZWCkG9cu3t157dFuaOZ4
 knqGQ/aw7yV6rIykXAsY3sKhFeY0GXLkogBkJISKrtaz0Sg96uheXMKaETsEE+NqE9IT
 ZdhniU0NKn8/PWLne5hKZW5BgXUi5yRzYPX6+vg4Ld9cFLnyLSViVJjpseH9TI5H5NnG
 s3acjDx6kOTjbCM4IaA1oKdjgaptx3ddRgMYzaOgdb/V3KEUtBt6imN+MtGr+WV3pNPE
 w16g==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Neil Armstrong <narmstrong@baylibre.com>, David Airlie <airlied@linux.ie>,
 Sam Ravnborg <sam@ravnborg.org>, Maxime Ripard <maxime.ripard@bootlin.com>,
 linux-samsung-soc@vger.kernel.org, linux-rockchip@lists.infradead.org,
 Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Jagan Teki <jagan@amarulasolutions.com>, NXP Linux Team <linux-imx@nxp.com>,
 Jitao Shi <jitao.shi@mediatek.com>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 linux-mediatek@lists.infradead.org, Abhinav Kumar <abhinavk@codeaurora.org>,
 linux-tegra@vger.kernel.org, Sean Paul <sean@poorly.run>,
 linux-arm-kernel@lists.infradead.org, Purism Kernel Team <kernel@puri.sm>,
 linux-renesas-soc@vger.kernel.org,
 Boris Brezillon <boris.brezillon@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UGFuZWxzIG9mdGVuIHN1cHBvcnRzIGJhY2tsaWdodCBhcyBzcGVjaWZpZWQgaW4gYSBkZXZpY2Ug
dHJlZS4KVXBkYXRlIHRoZSBkcm1fcGFuZWwgaW5mcmFzdHJ1Y3R1cmUgdG8gc3VwcG9ydCB0aGlz
IHRvCnNpbXBsaWZ5IHRoZSBkcml2ZXJzLgoKV2l0aCB0aGlzIHRoZSBwYW5lbCBkcml2ZXIganVz
dCBuZWVkcyB0byBhZGQgdGhlIGZvbGxvd2luZyB0byB0aGUKcHJvYmUoKSBmdW5jdGlvbjoKCiAg
ICBlcnIgPSBkcm1fcGFuZWxfb2ZfYmFja2xpZ2h0KHBhbmVsKTsKICAgIGlmIChlcnIpCiAgICAg
ICAgICAgIHJldHVybiBlcnI7CgpUaGVuIGRybV9wYW5lbCB3aWxsIGhhbmRsZSBhbGwgdGhlIHJl
c3QuCgp2MjoKLSBEcm9wIHRlc3Qgb2YgQ09ORklHX0RSTV9QQU5FTCBpbiBoZWFkZXItZmlsZSAo
TGF1cmVudCkKLSBkbyBub3QgZW5hYmxlIGJhY2tsaWdodCBpZiAtPmVuYWJsZSgpIHJldHVybnMg
YW4gZXJyb3IKClNpZ25lZC1vZmYtYnk6IFNhbSBSYXZuYm9yZyA8c2FtQHJhdm5ib3JnLm9yZz4K
Q2M6IE1hYXJ0ZW4gTGFua2hvcnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51eC5pbnRlbC5jb20+
CkNjOiBNYXhpbWUgUmlwYXJkIDxtYXhpbWUucmlwYXJkQGJvb3RsaW4uY29tPgpDYzogU2VhbiBQ
YXVsIDxzZWFuQHBvb3JseS5ydW4+CkNjOiBUaGllcnJ5IFJlZGluZyA8dGhpZXJyeS5yZWRpbmdA
Z21haWwuY29tPgpDYzogU2FtIFJhdm5ib3JnIDxzYW1AcmF2bmJvcmcub3JnPgpDYzogRGF2aWQg
QWlybGllIDxhaXJsaWVkQGxpbnV4LmllPgpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xs
LmNoPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fcGFuZWwuYyB8IDQ5ICsrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrLS0KIGluY2x1ZGUvZHJtL2RybV9wYW5lbC5oICAgICB8IDIz
ICsrKysrKysrKysrKysrKysrCiAyIGZpbGVzIGNoYW5nZWQsIDcwIGluc2VydGlvbnMoKyksIDIg
ZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9wYW5lbC5jIGIv
ZHJpdmVycy9ncHUvZHJtL2RybV9wYW5lbC5jCmluZGV4IDJkNTljZGQwNWU1MC4uMzU2MDljOTBl
NDY3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX3BhbmVsLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2RybV9wYW5lbC5jCkBAIC0yMSw2ICsyMSw3IEBACiAgKiBERUFMSU5HUyBJTiBU
SEUgU09GVFdBUkUuCiAgKi8KIAorI2luY2x1ZGUgPGxpbnV4L2JhY2tsaWdodC5oPgogI2luY2x1
ZGUgPGxpbnV4L2Vyci5oPgogI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgogCkBAIC0xOTYsMTMg
KzE5NywxOCBAQCBFWFBPUlRfU1lNQk9MKGRybV9wYW5lbF91bnByZXBhcmUpOwogICovCiBpbnQg
ZHJtX3BhbmVsX2VuYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKIHsKKwlpbnQgcmV0ID0g
MDsKKwogCWlmICghcGFuZWwpCiAJCXJldHVybiAtRUlOVkFMOwogCiAJaWYgKHBhbmVsLT5mdW5j
cyAmJiBwYW5lbC0+ZnVuY3MtPmVuYWJsZSkKLQkJcmV0dXJuIHBhbmVsLT5mdW5jcy0+ZW5hYmxl
KHBhbmVsKTsKKwkJcmV0ID0gcGFuZWwtPmZ1bmNzLT5lbmFibGUocGFuZWwpOwogCi0JcmV0dXJu
IDA7CisJaWYgKHJldCA+PSAwKQorCQliYWNrbGlnaHRfZW5hYmxlKHBhbmVsLT5iYWNrbGlnaHQp
OworCisJcmV0dXJuIHJldDsKIH0KIEVYUE9SVF9TWU1CT0woZHJtX3BhbmVsX2VuYWJsZSk7CiAK
QEAgLTIyMSw2ICsyMjcsOCBAQCBpbnQgZHJtX3BhbmVsX2Rpc2FibGUoc3RydWN0IGRybV9wYW5l
bCAqcGFuZWwpCiAJaWYgKCFwYW5lbCkKIAkJcmV0dXJuIC1FSU5WQUw7CiAKKwliYWNrbGlnaHRf
ZGlzYWJsZShwYW5lbC0+YmFja2xpZ2h0KTsKKwogCWlmIChwYW5lbC0+ZnVuY3MgJiYgcGFuZWwt
PmZ1bmNzLT5kaXNhYmxlKQogCQlyZXR1cm4gcGFuZWwtPmZ1bmNzLT5kaXNhYmxlKHBhbmVsKTsK
IApAQCAtMjg5LDYgKzI5Nyw0MyBAQCBzdHJ1Y3QgZHJtX3BhbmVsICpvZl9kcm1fZmluZF9wYW5l
bChjb25zdCBzdHJ1Y3QgZGV2aWNlX25vZGUgKm5wKQogRVhQT1JUX1NZTUJPTChvZl9kcm1fZmlu
ZF9wYW5lbCk7CiAjZW5kaWYKIAorI2lmZGVmIENPTkZJR19CQUNLTElHSFRfQ0xBU1NfREVWSUNF
CisvKioKKyAqIGRybV9wYW5lbF9vZl9iYWNrbGlnaHQgLSB1c2UgYmFja2xpZ2h0IGRldmljZSBu
b2RlIGZvciBiYWNrbGlnaHQKKyAqIEBwYW5lbDogRFJNIHBhbmVsCisgKgorICogVXNlIHRoaXMg
ZnVuY3Rpb24gdG8gZW5hYmxlIGJhY2tsaWdodCBoYW5kbGluZyBpZiB5b3VyIHBhbmVsCisgKiB1
c2VzIGRldmljZSB0cmVlIGFuZCBoYXMgYSBiYWNrbGlnaHQgaGFuZGxlLgorICoKKyAqIFdoZW4g
cGFuZWwgaXMgZW5hYmxlZCBiYWNrbGlnaHQgd2lsbCBiZSBlbmFibGVkIGFmdGVyIGEKKyAqIHN1
Y2Nlc3NmdWxsIGNhbGwgdG8gJmRybV9wYW5lbF9mdW5jcy5lbmFibGUoKQorICoKKyAqIFdoZW4g
cGFuZWwgaXMgZGlzYWJsZWQgYmFja2xpZ2h0IHdpbGwgYmUgZGlzYWJsZWQgYmVmb3JlIHRoZQor
ICogY2FsbCB0byAmZHJtX3BhbmVsX2Z1bmNzLmRpc2FibGUoKS4KKyAqCisgKiBBIHR5cGljYWwg
aW1wbGVtZW50YXRpb24gZm9yIGEgcGFuZWwgZHJpdmVyIHN1cHBvcnRpbmcgZGV2aWNlIHRyZWUK
KyAqIHdpbGwgY2FsbCB0aGlzIGZ1bmN0aW9uIGFuZCB0aGVuIGJhY2tsaWdodCBqdXN0IHdvcmtz
LgorICoKKyAqIFJldHVybjogMCBvbiBzdWNjZXNzIG9yIGEgbmVnYXRpdmUgZXJyb3IgY29kZSBv
biBmYWlsdXJlLgorICovCitpbnQgZHJtX3BhbmVsX29mX2JhY2tsaWdodChzdHJ1Y3QgZHJtX3Bh
bmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmFja2xpZ2h0OworCisJ
aWYgKCFwYW5lbCB8fCAhcGFuZWwtPmRldikKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwliYWNrbGln
aHQgPSBkZXZtX29mX2ZpbmRfYmFja2xpZ2h0KHBhbmVsLT5kZXYpOworCisJaWYgKElTX0VSUihi
YWNrbGlnaHQpKQorICAgICAgICAgICAgICAgIHJldHVybiBQVFJfRVJSKGJhY2tsaWdodCk7CisK
KwlwYW5lbC0+YmFja2xpZ2h0ID0gYmFja2xpZ2h0OworCXJldHVybiAwOworfQorRVhQT1JUX1NZ
TUJPTChkcm1fcGFuZWxfb2ZfYmFja2xpZ2h0KTsKKyNlbmRpZgorCiBNT0RVTEVfQVVUSE9SKCJU
aGllcnJ5IFJlZGluZyA8dHJlZGluZ0BudmlkaWEuY29tPiIpOwogTU9EVUxFX0RFU0NSSVBUSU9O
KCJEUk0gcGFuZWwgaW5mcmFzdHJ1Y3R1cmUiKTsKIE1PRFVMRV9MSUNFTlNFKCJHUEwgYW5kIGFk
ZGl0aW9uYWwgcmlnaHRzIik7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fcGFuZWwuaCBi
L2luY2x1ZGUvZHJtL2RybV9wYW5lbC5oCmluZGV4IGNlOGRhNjQwMjJiNC4uZDMwYzk4NTY3Mzg0
IDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS9kcm1fcGFuZWwuaAorKysgYi9pbmNsdWRlL2RybS9k
cm1fcGFuZWwuaApAQCAtMjgsNiArMjgsNyBAQAogI2luY2x1ZGUgPGxpbnV4L2Vycm5vLmg+CiAj
aW5jbHVkZSA8bGludXgvbGlzdC5oPgogCitzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZTsKIHN0cnVj
dCBkZXZpY2Vfbm9kZTsKIHN0cnVjdCBkcm1fY29ubmVjdG9yOwogc3RydWN0IGRybV9kZXZpY2U7
CkBAIC01OSw2ICs2MCwxMCBAQCBzdHJ1Y3QgZGlzcGxheV90aW1pbmc7CiAgKgogICogVG8gc2F2
ZSBwb3dlciB3aGVuIG5vIHZpZGVvIGRhdGEgaXMgdHJhbnNtaXR0ZWQsIGEgZHJpdmVyIGNhbiBw
b3dlciBkb3duCiAgKiB0aGUgcGFuZWwuIFRoaXMgaXMgdGhlIGpvYiBvZiB0aGUgLnVucHJlcGFy
ZSgpIGZ1bmN0aW9uLgorICoKKyAqIEJhY2tsaWdodCBjYW4gYmUgaGFuZGxlZCBhdXRvbWF0aWNh
bGx5IGlmIGNvbmZpZ3VyZWQgdXNpbmcKKyAqIGRybV9wYW5lbF9vZl9iYWNrbGlnaHQoKS4gVGhl
biB0aGUgZHJpdmVyIGRvIG5vdCBuZWVkIHRvIGltcGxlbWVudCB0aGUKKyAqIGZ1bmN0aW9uYWxp
dHkgdG8gZW5hYmxlL2Rpc2FibGUgYmFja2xpZ2h0LgogICovCiBzdHJ1Y3QgZHJtX3BhbmVsX2Z1
bmNzIHsKIAkvKioKQEAgLTEzMiw2ICsxMzcsMTUgQEAgc3RydWN0IGRybV9wYW5lbCB7CiAJICov
CiAJc3RydWN0IGRldmljZSAqZGV2OwogCisJLyoqCisJICogQGJhY2tsaWdodDoKKwkgKgorCSAq
IEJhY2tsaWdodCBkZXZpY2UsIHVzZWQgdG8gdHVybiBvbiBiYWNrbGlnaHQgYWZ0ZXIKKwkgKiB0
aGUgY2FsbCB0byBlbmFibGUoKSwgYW5kIHRvIHR1cm4gb2ZmCisJICogYmFja2xpZ2h0IGJlZm9y
ZSBjYWxsIHRvIGRpc2FibGUoKS4KKwkgKi8KKwlzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmFj
a2xpZ2h0OworCiAJLyoqCiAJICogQGZ1bmNzOgogCSAqCkBAIC0xODMsNCArMTk3LDEzIEBAIHN0
YXRpYyBpbmxpbmUgc3RydWN0IGRybV9wYW5lbCAqb2ZfZHJtX2ZpbmRfcGFuZWwoY29uc3Qgc3Ry
dWN0IGRldmljZV9ub2RlICpucCkKIH0KICNlbmRpZgogCisjaWYgSVNfRU5BQkxFRChDT05GSUdf
QkFDS0xJR0hUX0NMQVNTX0RFVklDRSkKK2ludCBkcm1fcGFuZWxfb2ZfYmFja2xpZ2h0KHN0cnVj
dCBkcm1fcGFuZWwgKnBhbmVsKTsKKyNlbHNlCitzdGF0aWMgaW5saW5lIGludCBkcm1fcGFuZWxf
b2ZfYmFja2xpZ2h0KHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXJldHVybiAtRUlOVkFM
OworfQorI2VuZGlmCisKICNlbmRpZgotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZl
bEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
