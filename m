Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 529B386548
	for <lists+dri-devel@lfdr.de>; Thu,  8 Aug 2019 17:12:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0DA386E860;
	Thu,  8 Aug 2019 15:12:04 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 993876E85F
 for <dri-devel@lists.freedesktop.org>; Thu,  8 Aug 2019 15:12:01 +0000 (UTC)
Received: from localhost.localdomain (unknown
 [IPv6:2a01:e0a:2c:6930:5cf4:84a1:2763:fe0d])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: bbrezillon)
 by bhuna.collabora.co.uk (Postfix) with ESMTPSA id 7D43328CA95;
 Thu,  8 Aug 2019 16:11:59 +0100 (BST)
From: Boris Brezillon <boris.brezillon@collabora.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH RFC 06/19] drm/bridge: Create drm_bridge_chain_xx() wrappers
Date: Thu,  8 Aug 2019 17:11:37 +0200
Message-Id: <20190808151150.16336-7-boris.brezillon@collabora.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190808151150.16336-1-boris.brezillon@collabora.com>
References: <20190808151150.16336-1-boris.brezillon@collabora.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jernej Skrabec <jernej.skrabec@siol.net>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Neil Armstrong <narmstrong@baylibre.com>, Jonas Karlman <jonas@kwiboo.se>,
 Seung-Woo Kim <sw0312.kim@samsung.com>,
 Kyungmin Park <kyungmin.park@samsung.com>,
 Thierry Reding <thierry.reding@gmail.com>, Chris Healy <Chris.Healy@zii.aero>,
 Boris Brezillon <boris.brezillon@collabora.com>, kernel@collabora.com,
 Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RFJNIGJyaWRnZXMgc2hvdWxkIG5vdCBiZSBvcGVyYXRlZCBpbmRlcGVuZGVudGx5LiBMZXQncyBy
ZW5hbWUgdGhlCmRybV9icmlkZ2VfeHh4KCkgaGVscGVycyB0aGF0IHRha2UgdGhlIGZpcnN0IGJy
aWRnZSBvZiB0aGUgY2hhaW4gYW5kCml0ZXJhdGUgb3ZlciB0aGUgd2hvbGUgY2hhaW4gaW50byBk
cm1fYnJpZGdlX2NoYWluX3h4KCkuIFdlIGFsc28gcGFzcwppdCB0aGUgZW5jb2RlciBjb250YWlu
aW5nIHRoZSBicmlkZ2UgY2hhaW4gaW5zdGVhZCBvZiB0aGUgZGVyZWZlcmVuY2luZwplbmNvZGVy
LT5icmlkZ2UuCgpTaWduZWQtb2ZmLWJ5OiBCb3JpcyBCcmV6aWxsb24gPGJvcmlzLmJyZXppbGxv
bkBjb2xsYWJvcmEuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX2hlbHBlci5j
ICAgICB8ICAxOSArLQogZHJpdmVycy9ncHUvZHJtL2RybV9icmlkZ2UuYyAgICAgICAgICAgIHwg
MzY1ICsrKysrKysrKysrKystLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2RybV9jcnRjX2hl
bHBlci5jICAgICAgIHwgIDI3ICstCiBkcml2ZXJzL2dwdS9kcm0vZHJtX3Byb2JlX2hlbHBlci5j
ICAgICAgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kc2kuYyB8
ICAgOCArLQogZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19oZG1pLmMgICAgIHwgICA0ICst
CiBkcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kc2kuYyAgICAgICAgICAgfCAgIDggKy0KIGluY2x1
ZGUvZHJtL2RybV9icmlkZ2UuaCAgICAgICAgICAgICAgICB8ICA2NCArKystLQogOCBmaWxlcyBj
aGFuZ2VkLCAyNzMgaW5zZXJ0aW9ucygrKSwgMjI0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX2hlbHBlci5jIGIvZHJpdmVycy9ncHUvZHJtL2Ry
bV9hdG9taWNfaGVscGVyLmMKaW5kZXggMTVlYTYxODc3MTIyLi4wZGViNTQwOTk1NzAgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX2hlbHBlci5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9kcm1fYXRvbWljX2hlbHBlci5jCkBAIC00NDUsOCArNDQ1LDkgQEAgbW9kZV9maXh1
cChzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCiAJCWVuY29kZXIgPSBuZXdfY29ubl9z
dGF0ZS0+YmVzdF9lbmNvZGVyOwogCQlmdW5jcyA9IGVuY29kZXItPmhlbHBlcl9wcml2YXRlOwog
Ci0JCXJldCA9IGRybV9icmlkZ2VfbW9kZV9maXh1cChlbmNvZGVyLT5icmlkZ2UsICZuZXdfY3J0
Y19zdGF0ZS0+bW9kZSwKLQkJCQkmbmV3X2NydGNfc3RhdGUtPmFkanVzdGVkX21vZGUpOworCQly
ZXQgPSBkcm1fYnJpZGdlX2NoYWluX21vZGVfZml4dXAoZW5jb2RlciwKKwkJCQkJJm5ld19jcnRj
X3N0YXRlLT5tb2RlLAorCQkJCQkmbmV3X2NydGNfc3RhdGUtPmFkanVzdGVkX21vZGUpOwogCQlp
ZiAoIXJldCkgewogCQkJRFJNX0RFQlVHX0FUT01JQygiQnJpZGdlIGZpeHVwIGZhaWxlZFxuIik7
CiAJCQlyZXR1cm4gLUVJTlZBTDsKQEAgLTUxMSw3ICs1MTIsNyBAQCBzdGF0aWMgZW51bSBkcm1f
bW9kZV9zdGF0dXMgbW9kZV92YWxpZF9wYXRoKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0
b3IsCiAJCXJldHVybiByZXQ7CiAJfQogCi0JcmV0ID0gZHJtX2JyaWRnZV9tb2RlX3ZhbGlkKGVu
Y29kZXItPmJyaWRnZSwgbW9kZSk7CisJcmV0ID0gZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3ZhbGlk
KGVuY29kZXIsIG1vZGUpOwogCWlmIChyZXQgIT0gTU9ERV9PSykgewogCQlEUk1fREVCVUdfQVRP
TUlDKCJbQlJJREdFXSBtb2RlX3ZhbGlkKCkgZmFpbGVkXG4iKTsKIAkJcmV0dXJuIHJldDsKQEAg
LTEwMzEsNyArMTAzMiw3IEBAIGRpc2FibGVfb3V0cHV0cyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LCBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX3N0YXRlKQogCQkgKiBpdCBhd2F5KSwgc28g
d2Ugd29uJ3QgY2FsbCBkaXNhYmxlIGhvb2tzIHR3aWNlLgogCQkgKi8KIAkJaWYgKCFlbmNvZGVy
LT5jdXN0b21fYnJpZGdlX2VuYWJsZV9kaXNhYmxlX3NlcSkKLQkJCWRybV9hdG9taWNfYnJpZGdl
X2Rpc2FibGUoZW5jb2Rlci0+YnJpZGdlLCBvbGRfc3RhdGUpOworCQkJZHJtX2F0b21pY19icmlk
Z2VfY2hhaW5fZGlzYWJsZShlbmNvZGVyLCBvbGRfc3RhdGUpOwogCiAJCS8qIFJpZ2h0IGZ1bmN0
aW9uIGRlcGVuZHMgdXBvbiB0YXJnZXQgc3RhdGUuICovCiAJCWlmIChmdW5jcykgewpAQCAtMTA0
Niw4ICsxMDQ3LDggQEAgZGlzYWJsZV9vdXRwdXRzKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0
cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpCiAJCX0KIAogCQlpZiAoIWVuY29kZXIt
PmN1c3RvbV9icmlkZ2VfZW5hYmxlX2Rpc2FibGVfc2VxKQotCQkJZHJtX2F0b21pY19icmlkZ2Vf
cG9zdF9kaXNhYmxlKGVuY29kZXItPmJyaWRnZSwKLQkJCQkJCSAgICAgICBvbGRfc3RhdGUpOwor
CQkJZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlKGVuY29kZXIsCisJCQkJCQkJ
ICAgICBvbGRfc3RhdGUpOwogCX0KIAogCWZvcl9lYWNoX29sZG5ld19jcnRjX2luX3N0YXRlKG9s
ZF9zdGF0ZSwgY3J0Yywgb2xkX2NydGNfc3RhdGUsIG5ld19jcnRjX3N0YXRlLCBpKSB7CkBAIC0x
MjI4LDcgKzEyMjksNyBAQCBjcnRjX3NldF9tb2RlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0
cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpCiAJCQlmdW5jcy0+bW9kZV9zZXQoZW5j
b2RlciwgbW9kZSwgYWRqdXN0ZWRfbW9kZSk7CiAJCX0KIAotCQlkcm1fYnJpZGdlX21vZGVfc2V0
KGVuY29kZXItPmJyaWRnZSwgbW9kZSwgYWRqdXN0ZWRfbW9kZSk7CisJCWRybV9icmlkZ2VfY2hh
aW5fbW9kZV9zZXQoZW5jb2RlciwgbW9kZSwgYWRqdXN0ZWRfbW9kZSk7CiAJfQogfQogCkBAIC0x
MzQ2LDcgKzEzNDcsNyBAQCB2b2lkIGRybV9hdG9taWNfaGVscGVyX2NvbW1pdF9tb2Rlc2V0X2Vu
YWJsZXMoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJICogaXQgYXdheSksIHNvIHdlIHdvbid0
IGNhbGwgZW5hYmxlIGhvb2tzIHR3aWNlLgogCQkgKi8KIAkJaWYgKCFlbmNvZGVyLT5jdXN0b21f
YnJpZGdlX2VuYWJsZV9kaXNhYmxlX3NlcSkKLQkJCWRybV9hdG9taWNfYnJpZGdlX3ByZV9lbmFi
bGUoZW5jb2Rlci0+YnJpZGdlLCBvbGRfc3RhdGUpOworCQkJZHJtX2F0b21pY19icmlkZ2VfY2hh
aW5fcHJlX2VuYWJsZShlbmNvZGVyLCBvbGRfc3RhdGUpOwogCiAJCWlmIChmdW5jcykgewogCQkJ
aWYgKGZ1bmNzLT5hdG9taWNfZW5hYmxlKQpAQCAtMTM1OCw3ICsxMzU5LDcgQEAgdm9pZCBkcm1f
YXRvbWljX2hlbHBlcl9jb21taXRfbW9kZXNldF9lbmFibGVzKHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYsCiAJCX0KIAogCQlpZiAoIWVuY29kZXItPmN1c3RvbV9icmlkZ2VfZW5hYmxlX2Rpc2FibGVf
c2VxKQotCQkJZHJtX2F0b21pY19icmlkZ2VfZW5hYmxlKGVuY29kZXItPmJyaWRnZSwgb2xkX3N0
YXRlKTsKKwkJCWRybV9hdG9taWNfYnJpZGdlX2NoYWluX2VuYWJsZShlbmNvZGVyLCBvbGRfc3Rh
dGUpOwogCX0KIAogCWRybV9hdG9taWNfaGVscGVyX2NvbW1pdF93cml0ZWJhY2tzKGRldiwgb2xk
X3N0YXRlKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYnJpZGdlLmMgYi9kcml2
ZXJzL2dwdS9kcm0vZHJtX2JyaWRnZS5jCmluZGV4IGNiYTUzN2M5OWU0My4uMmJmOWExOWUxMWJm
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2JyaWRnZS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9kcm1fYnJpZGdlLmMKQEAgLTE3MSwyNCArMTcxLDkgQEAgdm9pZCBkcm1fYnJpZGdl
X2RldGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogICogRm9yIGRldGFpbGVkIHNwZWNp
ZmljYXRpb24gb2YgdGhlIGJyaWRnZSBjYWxsYmFja3Mgc2VlICZkcm1fYnJpZGdlX2Z1bmNzLgog
ICovCiAKLS8qKgotICogZHJtX2JyaWRnZV9tb2RlX2ZpeHVwIC0gZml4dXAgcHJvcG9zZWQgbW9k
ZSBmb3IgYWxsIGJyaWRnZXMgaW4gdGhlCi0gKgkJCSAgIGVuY29kZXIgY2hhaW4KLSAqIEBicmlk
Z2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVyZQotICogQG1vZGU6IGRlc2lyZWQgbW9kZSB0byBi
ZSBzZXQgZm9yIHRoZSBicmlkZ2UKLSAqIEBhZGp1c3RlZF9tb2RlOiB1cGRhdGVkIG1vZGUgdGhh
dCB3b3JrcyBmb3IgdGhpcyBicmlkZ2UKLSAqCi0gKiBDYWxscyAmZHJtX2JyaWRnZV9mdW5jcy5t
b2RlX2ZpeHVwIGZvciBhbGwgdGhlIGJyaWRnZXMgaW4gdGhlCi0gKiBlbmNvZGVyIGNoYWluLCBz
dGFydGluZyBmcm9tIHRoZSBmaXJzdCBicmlkZ2UgdG8gdGhlIGxhc3QuCi0gKgotICogTm90ZTog
dGhlIGJyaWRnZSBwYXNzZWQgc2hvdWxkIGJlIHRoZSBvbmUgY2xvc2VzdCB0byB0aGUgZW5jb2Rl
cgotICoKLSAqIFJFVFVSTlM6Ci0gKiB0cnVlIG9uIHN1Y2Nlc3MsIGZhbHNlIG9uIGZhaWx1cmUK
LSAqLwotYm9vbCBkcm1fYnJpZGdlX21vZGVfZml4dXAoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSwKLQkJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAotCQkJc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpCitzdGF0aWMgYm9vbCBkcm1fYnJpZGdlX21v
ZGVfZml4dXAoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgIGNvbnN0IHN0cnVjdCBk
cm1fZGlzcGxheV9tb2RlICptb2RlLAorCQkJCSAgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFk
anVzdGVkX21vZGUpCiB7CiAJYm9vbCByZXQgPSB0cnVlOwogCkBAIC0yMDIsMjUgKzE4NywxMCBA
QCBib29sIGRybV9icmlkZ2VfbW9kZV9maXh1cChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAog
CiAJcmV0dXJuIHJldDsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9tb2RlX2ZpeHVwKTsK
IAotLyoqCi0gKiBkcm1fYnJpZGdlX21vZGVfdmFsaWQgLSB2YWxpZGF0ZSB0aGUgbW9kZSBhZ2Fp
bnN0IGFsbCBicmlkZ2VzIGluIHRoZQotICogCQkJICAgZW5jb2RlciBjaGFpbi4KLSAqIEBicmlk
Z2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVyZQotICogQG1vZGU6IGRlc2lyZWQgbW9kZSB0byBi
ZSB2YWxpZGF0ZWQKLSAqCi0gKiBDYWxscyAmZHJtX2JyaWRnZV9mdW5jcy5tb2RlX3ZhbGlkIGZv
ciBhbGwgdGhlIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIKLSAqIGNoYWluLCBzdGFydGluZyBmcm9t
IHRoZSBmaXJzdCBicmlkZ2UgdG8gdGhlIGxhc3QuIElmIGF0IGxlYXN0IG9uZSBicmlkZ2UKLSAq
IGRvZXMgbm90IGFjY2VwdCB0aGUgbW9kZSB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgZXJyb3Ig
Y29kZS4KLSAqCi0gKiBOb3RlOiB0aGUgYnJpZGdlIHBhc3NlZCBzaG91bGQgYmUgdGhlIG9uZSBj
bG9zZXN0IHRvIHRoZSBlbmNvZGVyLgotICoKLSAqIFJFVFVSTlM6Ci0gKiBNT0RFX09LIG9uIHN1
Y2Nlc3MsIGRybV9tb2RlX3N0YXR1cyBFbnVtIGVycm9yIGNvZGUgb24gZmFpbHVyZQotICovCi1l
bnVtIGRybV9tb2RlX3N0YXR1cyBkcm1fYnJpZGdlX21vZGVfdmFsaWQoc3RydWN0IGRybV9icmlk
Z2UgKmJyaWRnZSwKLQkJCQkJICAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUp
CitzdGF0aWMgZW51bSBkcm1fbW9kZV9zdGF0dXMKK2RybV9icmlkZ2VfbW9kZV92YWxpZChzdHJ1
Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlf
bW9kZSAqbW9kZSkKIHsKIAllbnVtIGRybV9tb2RlX3N0YXR1cyByZXQgPSBNT0RFX09LOwogCkBA
IC0yMzUsMTkgKzIwNSw4IEBAIGVudW0gZHJtX21vZGVfc3RhdHVzIGRybV9icmlkZ2VfbW9kZV92
YWxpZChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCiAJcmV0dXJuIGRybV9icmlkZ2VfbW9k
ZV92YWxpZChicmlkZ2UtPm5leHQsIG1vZGUpOwogfQotRVhQT1JUX1NZTUJPTChkcm1fYnJpZGdl
X21vZGVfdmFsaWQpOwogCi0vKioKLSAqIGRybV9icmlkZ2VfZGlzYWJsZSAtIGRpc2FibGVzIGFs
bCBicmlkZ2VzIGluIHRoZSBlbmNvZGVyIGNoYWluCi0gKiBAYnJpZGdlOiBicmlkZ2UgY29udHJv
bCBzdHJ1Y3R1cmUKLSAqCi0gKiBDYWxscyAmZHJtX2JyaWRnZV9mdW5jcy5kaXNhYmxlIG9wIGZv
ciBhbGwgdGhlIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIKLSAqIGNoYWluLCBzdGFydGluZyBmcm9t
IHRoZSBsYXN0IGJyaWRnZSB0byB0aGUgZmlyc3QuIFRoZXNlIGFyZSBjYWxsZWQgYmVmb3JlCi0g
KiBjYWxsaW5nIHRoZSBlbmNvZGVyJ3MgcHJlcGFyZSBvcC4KLSAqCi0gKiBOb3RlOiB0aGUgYnJp
ZGdlIHBhc3NlZCBzaG91bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBlbmNvZGVyCi0gKi8K
LXZvaWQgZHJtX2JyaWRnZV9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCitzdGF0
aWMgdm9pZCBkcm1fYnJpZGdlX2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIHsK
IAlpZiAoIWJyaWRnZSkKIAkJcmV0dXJuOwpAQCAtMjU3LDE5ICsyMTYsOCBAQCB2b2lkIGRybV9i
cmlkZ2VfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogCWlmIChicmlkZ2UtPmZ1
bmNzLT5kaXNhYmxlKQogCQlicmlkZ2UtPmZ1bmNzLT5kaXNhYmxlKGJyaWRnZSk7CiB9Ci1FWFBP
UlRfU1lNQk9MKGRybV9icmlkZ2VfZGlzYWJsZSk7CiAKLS8qKgotICogZHJtX2JyaWRnZV9wb3N0
X2Rpc2FibGUgLSBjbGVhbnMgdXAgYWZ0ZXIgZGlzYWJsaW5nIGFsbCBicmlkZ2VzIGluIHRoZSBl
bmNvZGVyIGNoYWluCi0gKiBAYnJpZGdlOiBicmlkZ2UgY29udHJvbCBzdHJ1Y3R1cmUKLSAqCi0g
KiBDYWxscyAmZHJtX2JyaWRnZV9mdW5jcy5wb3N0X2Rpc2FibGUgb3AgZm9yIGFsbCB0aGUgYnJp
ZGdlcyBpbiB0aGUKLSAqIGVuY29kZXIgY2hhaW4sIHN0YXJ0aW5nIGZyb20gdGhlIGZpcnN0IGJy
aWRnZSB0byB0aGUgbGFzdC4gVGhlc2UgYXJlIGNhbGxlZAotICogYWZ0ZXIgY29tcGxldGluZyB0
aGUgZW5jb2RlcidzIHByZXBhcmUgb3AuCi0gKgotICogTm90ZTogdGhlIGJyaWRnZSBwYXNzZWQg
c2hvdWxkIGJlIHRoZSBvbmUgY2xvc2VzdCB0byB0aGUgZW5jb2RlcgotICovCi12b2lkIGRybV9i
cmlkZ2VfcG9zdF9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCitzdGF0aWMgdm9p
ZCBkcm1fYnJpZGdlX3Bvc3RfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogewog
CWlmICghYnJpZGdlKQogCQlyZXR1cm47CkBAIC0yNzksMjMgKzIyNywxMCBAQCB2b2lkIGRybV9i
cmlkZ2VfcG9zdF9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCiAKIAlkcm1fYnJp
ZGdlX3Bvc3RfZGlzYWJsZShicmlkZ2UtPm5leHQpOwogfQotRVhQT1JUX1NZTUJPTChkcm1fYnJp
ZGdlX3Bvc3RfZGlzYWJsZSk7CiAKLS8qKgotICogZHJtX2JyaWRnZV9tb2RlX3NldCAtIHNldCBw
cm9wb3NlZCBtb2RlIGZvciBhbGwgYnJpZGdlcyBpbiB0aGUKLSAqCQkJIGVuY29kZXIgY2hhaW4K
LSAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVyZQotICogQG1vZGU6IGRlc2lyZWQg
bW9kZSB0byBiZSBzZXQgZm9yIHRoZSBicmlkZ2UKLSAqIEBhZGp1c3RlZF9tb2RlOiB1cGRhdGVk
IG1vZGUgdGhhdCB3b3JrcyBmb3IgdGhpcyBicmlkZ2UKLSAqCi0gKiBDYWxscyAmZHJtX2JyaWRn
ZV9mdW5jcy5tb2RlX3NldCBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGluIHRoZQotICogZW5jb2Rl
ciBjaGFpbiwgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3QgYnJpZGdlIHRvIHRoZSBsYXN0LgotICoK
LSAqIE5vdGU6IHRoZSBicmlkZ2UgcGFzc2VkIHNob3VsZCBiZSB0aGUgb25lIGNsb3Nlc3QgdG8g
dGhlIGVuY29kZXIKLSAqLwotdm9pZCBkcm1fYnJpZGdlX21vZGVfc2V0KHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UsCi0JCQkgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCi0J
CQkgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpCitzdGF0aWMg
dm9pZCBkcm1fYnJpZGdlX21vZGVfc2V0KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJ
Y29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCisJCQkJY29uc3Qgc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpCiB7CiAJaWYgKCFicmlkZ2UpCiAJCXJldHVy
bjsKQEAgLTMwNSwyMCArMjQwLDggQEAgdm9pZCBkcm1fYnJpZGdlX21vZGVfc2V0KHN0cnVjdCBk
cm1fYnJpZGdlICpicmlkZ2UsCiAKIAlkcm1fYnJpZGdlX21vZGVfc2V0KGJyaWRnZS0+bmV4dCwg
bW9kZSwgYWRqdXN0ZWRfbW9kZSk7CiB9Ci1FWFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfbW9kZV9z
ZXQpOwogCi0vKioKLSAqIGRybV9icmlkZ2VfcHJlX2VuYWJsZSAtIHByZXBhcmVzIGZvciBlbmFi
bGluZyBhbGwKLSAqCQkJICAgYnJpZGdlcyBpbiB0aGUgZW5jb2RlciBjaGFpbgotICogQGJyaWRn
ZTogYnJpZGdlIGNvbnRyb2wgc3RydWN0dXJlCi0gKgotICogQ2FsbHMgJmRybV9icmlkZ2VfZnVu
Y3MucHJlX2VuYWJsZSBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGluIHRoZSBlbmNvZGVyCi0gKiBj
aGFpbiwgc3RhcnRpbmcgZnJvbSB0aGUgbGFzdCBicmlkZ2UgdG8gdGhlIGZpcnN0LiBUaGVzZSBh
cmUgY2FsbGVkCi0gKiBiZWZvcmUgY2FsbGluZyB0aGUgZW5jb2RlcidzIGNvbW1pdCBvcC4KLSAq
Ci0gKiBOb3RlOiB0aGUgYnJpZGdlIHBhc3NlZCBzaG91bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRv
IHRoZSBlbmNvZGVyCi0gKi8KLXZvaWQgZHJtX2JyaWRnZV9wcmVfZW5hYmxlKHN0cnVjdCBkcm1f
YnJpZGdlICpicmlkZ2UpCitzdGF0aWMgdm9pZCBkcm1fYnJpZGdlX3ByZV9lbmFibGUoc3RydWN0
IGRybV9icmlkZ2UgKmJyaWRnZSkKIHsKIAlpZiAoIWJyaWRnZSkKIAkJcmV0dXJuOwpAQCAtMzI4
LDE5ICsyNTEsOCBAQCB2b2lkIGRybV9icmlkZ2VfcHJlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRn
ZSAqYnJpZGdlKQogCWlmIChicmlkZ2UtPmZ1bmNzLT5wcmVfZW5hYmxlKQogCQlicmlkZ2UtPmZ1
bmNzLT5wcmVfZW5hYmxlKGJyaWRnZSk7CiB9Ci1FWFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfcHJl
X2VuYWJsZSk7CiAKLS8qKgotICogZHJtX2JyaWRnZV9lbmFibGUgLSBlbmFibGVzIGFsbCBicmlk
Z2VzIGluIHRoZSBlbmNvZGVyIGNoYWluCi0gKiBAYnJpZGdlOiBicmlkZ2UgY29udHJvbCBzdHJ1
Y3R1cmUKLSAqCi0gKiBDYWxscyAmZHJtX2JyaWRnZV9mdW5jcy5lbmFibGUgb3AgZm9yIGFsbCB0
aGUgYnJpZGdlcyBpbiB0aGUgZW5jb2RlcgotICogY2hhaW4sIHN0YXJ0aW5nIGZyb20gdGhlIGZp
cnN0IGJyaWRnZSB0byB0aGUgbGFzdC4gVGhlc2UgYXJlIGNhbGxlZAotICogYWZ0ZXIgY29tcGxl
dGluZyB0aGUgZW5jb2RlcidzIGNvbW1pdCBvcC4KLSAqCi0gKiBOb3RlIHRoYXQgdGhlIGJyaWRn
ZSBwYXNzZWQgc2hvdWxkIGJlIHRoZSBvbmUgY2xvc2VzdCB0byB0aGUgZW5jb2RlcgotICovCi12
b2lkIGRybV9icmlkZ2VfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCitzdGF0aWMg
dm9pZCBkcm1fYnJpZGdlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogewogCWlm
ICghYnJpZGdlKQogCQlyZXR1cm47CkBAIC0zNTAsMjIgKzI2MiwxMjcgQEAgdm9pZCBkcm1fYnJp
ZGdlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogCiAJZHJtX2JyaWRnZV9lbmFi
bGUoYnJpZGdlLT5uZXh0KTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9lbmFibGUpOwog
CiAvKioKLSAqIGRybV9hdG9taWNfYnJpZGdlX2Rpc2FibGUgLSBkaXNhYmxlcyBhbGwgYnJpZGdl
cyBpbiB0aGUgZW5jb2RlciBjaGFpbgotICogQGJyaWRnZTogYnJpZGdlIGNvbnRyb2wgc3RydWN0
dXJlCi0gKiBAc3RhdGU6IGF0b21pYyBzdGF0ZSBiZWluZyBjb21taXR0ZWQKKyAqIGRybV9icmlk
Z2VfY2hhaW5fbW9kZV9maXh1cCAtIGZpeHVwIHByb3Bvc2VkIG1vZGUgZm9yIGFsbCBicmlkZ2Vz
IGluIHRoZQorICoJCQkJIGVuY29kZXIgY2hhaW4KKyAqIEBlbmNvZGVyOiBlbmNvZGVyIG9iamVj
dAorICogQG1vZGU6IGRlc2lyZWQgbW9kZSB0byBiZSBzZXQgZm9yIHRoZSBicmlkZ2UKKyAqIEBh
ZGp1c3RlZF9tb2RlOiB1cGRhdGVkIG1vZGUgdGhhdCB3b3JrcyBmb3IgdGhpcyBicmlkZ2UKICAq
Ci0gKiBDYWxscyAmZHJtX2JyaWRnZV9mdW5jcy5hdG9taWNfZGlzYWJsZSAoZmFsbHMgYmFjayBv
bgotICogJmRybV9icmlkZ2VfZnVuY3MuZGlzYWJsZSkgb3AgZm9yIGFsbCB0aGUgYnJpZGdlcyBp
biB0aGUgZW5jb2RlciBjaGFpbiwKLSAqIHN0YXJ0aW5nIGZyb20gdGhlIGxhc3QgYnJpZGdlIHRv
IHRoZSBmaXJzdC4gVGhlc2UgYXJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZwotICogJmRybV9lbmNv
ZGVyX2hlbHBlcl9mdW5jcy5hdG9taWNfZGlzYWJsZQorICogQ2FsbHMgJmRybV9icmlkZ2VfZnVu
Y3MubW9kZV9maXh1cCBmb3IgYWxsIHRoZSBicmlkZ2VzIGluIHRoZQorICogZW5jb2RlciBjaGFp
biwgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3QgYnJpZGdlIHRvIHRoZSBsYXN0LgogICoKLSAqIE5v
dGU6IHRoZSBicmlkZ2UgcGFzc2VkIHNob3VsZCBiZSB0aGUgb25lIGNsb3Nlc3QgdG8gdGhlIGVu
Y29kZXIKKyAqIFJFVFVSTlM6CisgKiB0cnVlIG9uIHN1Y2Nlc3MsIGZhbHNlIG9uIGZhaWx1cmUK
ICAqLwotdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpi
cmlkZ2UsCi0JCQkgICAgICAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQorYm9vbCBk
cm1fYnJpZGdlX2NoYWluX21vZGVfZml4dXAoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyLAor
CQkJCSBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwKKwkJCQkgc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpCit7CisJcmV0dXJuIGRybV9icmlkZ2VfbW9k
ZV9maXh1cChlbmNvZGVyLT5icmlkZ2UsIG1vZGUsIGFkanVzdGVkX21vZGUpOworfQorRVhQT1JU
X1NZTUJPTChkcm1fYnJpZGdlX2NoYWluX21vZGVfZml4dXApOworCisvKioKKyAqIGRybV9icmlk
Z2VfY2hhaW5fbW9kZV92YWxpZCAtIHZhbGlkYXRlIHRoZSBtb2RlIGFnYWluc3QgYWxsIGJyaWRn
ZXMgaW4gdGhlCisgKgkJCQkgZW5jb2RlciBjaGFpbi4KKyAqIEBlbmNvZGVyOiBlbmNvZGVyIG9i
amVjdAorICogQG1vZGU6IGRlc2lyZWQgbW9kZSB0byBiZSB2YWxpZGF0ZWQKKyAqCisgKiBDYWxs
cyAmZHJtX2JyaWRnZV9mdW5jcy5tb2RlX3ZhbGlkIGZvciBhbGwgdGhlIGJyaWRnZXMgaW4gdGhl
IGVuY29kZXIKKyAqIGNoYWluLCBzdGFydGluZyBmcm9tIHRoZSBmaXJzdCBicmlkZ2UgdG8gdGhl
IGxhc3QuIElmIGF0IGxlYXN0IG9uZSBicmlkZ2UKKyAqIGRvZXMgbm90IGFjY2VwdCB0aGUgbW9k
ZSB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgZXJyb3IgY29kZS4KKyAqCisgKiBSRVRVUk5TOgor
ICogTU9ERV9PSyBvbiBzdWNjZXNzLCBkcm1fbW9kZV9zdGF0dXMgRW51bSBlcnJvciBjb2RlIG9u
IGZhaWx1cmUKKyAqLworZW51bSBkcm1fbW9kZV9zdGF0dXMKK2RybV9icmlkZ2VfY2hhaW5fbW9k
ZV92YWxpZChzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIsCisJCQkgICAgY29uc3Qgc3RydWN0
IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCit7CisJcmV0dXJuIGRybV9icmlkZ2VfbW9kZV92YWxp
ZChlbmNvZGVyLT5icmlkZ2UsIG1vZGUpOworfQorRVhQT1JUX1NZTUJPTChkcm1fYnJpZGdlX2No
YWluX21vZGVfdmFsaWQpOworCisvKioKKyAqIGRybV9icmlkZ2VfY2hhaW5fZGlzYWJsZSAtIGRp
c2FibGVzIGFsbCBicmlkZ2VzIGluIHRoZSBlbmNvZGVyIGNoYWluCisgKiBAZW5jb2RlcjogZW5j
b2RlciBvYmplY3QKKyAqCisgKiBDYWxscyAmZHJtX2JyaWRnZV9mdW5jcy5kaXNhYmxlIG9wIGZv
ciBhbGwgdGhlIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIKKyAqIGNoYWluLCBzdGFydGluZyBmcm9t
IHRoZSBsYXN0IGJyaWRnZSB0byB0aGUgZmlyc3QuIFRoZXNlIGFyZSBjYWxsZWQgYmVmb3JlCisg
KiBjYWxsaW5nIHRoZSBlbmNvZGVyJ3MgcHJlcGFyZSBvcC4KKyAqLwordm9pZCBkcm1fYnJpZGdl
X2NoYWluX2Rpc2FibGUoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQoreworCWRybV9icmlk
Z2VfZGlzYWJsZShlbmNvZGVyLT5icmlkZ2UpOworfQorRVhQT1JUX1NZTUJPTChkcm1fYnJpZGdl
X2NoYWluX2Rpc2FibGUpOworCisvKioKKyAqIGRybV9icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxl
IC0gY2xlYW5zIHVwIGFmdGVyIGRpc2FibGluZyBhbGwgYnJpZGdlcyBpbiB0aGUKKyAqCQkJCSAg
IGVuY29kZXIgY2hhaW4KKyAqIEBlbmNvZGVyOiBlbmNvZGVyIG9iamVjdAorICoKKyAqIENhbGxz
ICZkcm1fYnJpZGdlX2Z1bmNzLnBvc3RfZGlzYWJsZSBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGlu
IHRoZQorICogZW5jb2RlciBjaGFpbiwgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3QgYnJpZGdlIHRv
IHRoZSBsYXN0LiBUaGVzZSBhcmUgY2FsbGVkCisgKiBhZnRlciBjb21wbGV0aW5nIHRoZSBlbmNv
ZGVyJ3MgcHJlcGFyZSBvcC4KKyAqLwordm9pZCBkcm1fYnJpZGdlX2NoYWluX3Bvc3RfZGlzYWJs
ZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCit7CisJZHJtX2JyaWRnZV9wb3N0X2Rpc2Fi
bGUoZW5jb2Rlci0+YnJpZGdlKTsKK30KK0VYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9jaGFpbl9w
b3N0X2Rpc2FibGUpOworCisvKioKKyAqIGRybV9icmlkZ2VfY2hhaW5fbW9kZV9zZXQgLSBzZXQg
cHJvcG9zZWQgbW9kZSBmb3IgYWxsIGJyaWRnZXMgaW4gdGhlCisgKgkJCSAgICAgICBlbmNvZGVy
IGNoYWluCisgKiBAZW5jb2RlcjogZW5jb2RlciBvYmplY3QKKyAqIEBtb2RlOiBkZXNpcmVkIG1v
ZGUgdG8gYmUgc2V0IGZvciB0aGUgZW5jb2RlciBjaGFpbgorICogQGFkanVzdGVkX21vZGU6IHVw
ZGF0ZWQgbW9kZSB0aGF0IHdvcmtzIGZvciB0aGlzIGVuY29kZXIgY2hhaW4KKyAqCisgKiBDYWxs
cyAmZHJtX2JyaWRnZV9mdW5jcy5tb2RlX3NldCBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGluIHRo
ZQorICogZW5jb2RlciBjaGFpbiwgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3QgYnJpZGdlIHRvIHRo
ZSBsYXN0LgorICovCit2b2lkIGRybV9icmlkZ2VfY2hhaW5fbW9kZV9zZXQoc3RydWN0IGRybV9l
bmNvZGVyICplbmNvZGVyLAorCQkJICAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2Rl
ICptb2RlLAorCQkJICAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3Rl
ZF9tb2RlKQoreworCWRybV9icmlkZ2VfbW9kZV9zZXQoZW5jb2Rlci0+YnJpZGdlLCBtb2RlLCBh
ZGp1c3RlZF9tb2RlKTsKK30KK0VYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3Nl
dCk7CisKKy8qKgorICogZHJtX2JyaWRnZV9jaGFpbl9wcmVfZW5hYmxlIC0gcHJlcGFyZXMgZm9y
IGVuYWJsaW5nIGFsbCBicmlkZ2VzIGluIHRoZQorICoJCQkJIGVuY29kZXIgY2hhaW4KKyAqIEBl
bmNvZGVyOiBlbmNvZGVyIG9iamVjdAorICoKKyAqIENhbGxzICZkcm1fYnJpZGdlX2Z1bmNzLnBy
ZV9lbmFibGUgb3AgZm9yIGFsbCB0aGUgYnJpZGdlcyBpbiB0aGUgZW5jb2RlcgorICogY2hhaW4s
IHN0YXJ0aW5nIGZyb20gdGhlIGxhc3QgYnJpZGdlIHRvIHRoZSBmaXJzdC4gVGhlc2UgYXJlIGNh
bGxlZAorICogYmVmb3JlIGNhbGxpbmcgdGhlIGVuY29kZXIncyBjb21taXQgb3AuCisgKi8KK3Zv
aWQgZHJtX2JyaWRnZV9jaGFpbl9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2Rl
cikKK3sKKwlkcm1fYnJpZGdlX3ByZV9lbmFibGUoZW5jb2Rlci0+YnJpZGdlKTsKK30KK0VYUE9S
VF9TWU1CT0woZHJtX2JyaWRnZV9jaGFpbl9wcmVfZW5hYmxlKTsKKworLyoqCisgKiBkcm1fYnJp
ZGdlX2NoYWluX2VuYWJsZSAtIGVuYWJsZXMgYWxsIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIgY2hh
aW4KKyAqIEBlbmNvZGVyOiBlbmNvZGVyIG9iamVjdAorICoKKyAqIENhbGxzICZkcm1fYnJpZGdl
X2Z1bmNzLmVuYWJsZSBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGluIHRoZSBlbmNvZGVyCisgKiBj
aGFpbiwgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3QgYnJpZGdlIHRvIHRoZSBsYXN0LiBUaGVzZSBh
cmUgY2FsbGVkCisgKiBhZnRlciBjb21wbGV0aW5nIHRoZSBlbmNvZGVyJ3MgY29tbWl0IG9wLgor
ICovCit2b2lkIGRybV9icmlkZ2VfY2hhaW5fZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5j
b2RlcikKK3sKKwlkcm1fYnJpZGdlX2VuYWJsZShlbmNvZGVyLT5icmlkZ2UpOworfQorRVhQT1JU
X1NZTUJPTChkcm1fYnJpZGdlX2NoYWluX2VuYWJsZSk7CisKK3N0YXRpYyB2b2lkIGRybV9hdG9t
aWNfYnJpZGdlX2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgICAgICBz
dHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCiB7CiAJaWYgKCFicmlkZ2UpCiAJCXJldHVy
bjsKQEAgLTM3NywyMyArMzk0LDkgQEAgdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9kaXNhYmxlKHN0
cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJZWxzZSBpZiAoYnJpZGdlLT5mdW5jcy0+ZGlzYWJs
ZSkKIAkJYnJpZGdlLT5mdW5jcy0+ZGlzYWJsZShicmlkZ2UpOwogfQotRVhQT1JUX1NZTUJPTChk
cm1fYXRvbWljX2JyaWRnZV9kaXNhYmxlKTsKIAotLyoqCi0gKiBkcm1fYXRvbWljX2JyaWRnZV9w
b3N0X2Rpc2FibGUgLSBjbGVhbnMgdXAgYWZ0ZXIgZGlzYWJsaW5nIGFsbCBicmlkZ2VzIGluIHRo
ZQotICoJCQkJICAgIGVuY29kZXIgY2hhaW4KLSAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0
cnVjdHVyZQotICogQHN0YXRlOiBhdG9taWMgc3RhdGUgYmVpbmcgY29tbWl0dGVkCi0gKgotICog
Q2FsbHMgJmRybV9icmlkZ2VfZnVuY3MuYXRvbWljX3Bvc3RfZGlzYWJsZSAoZmFsbHMgYmFjayBv
bgotICogJmRybV9icmlkZ2VfZnVuY3MucG9zdF9kaXNhYmxlKSBvcCBmb3IgYWxsIHRoZSBicmlk
Z2VzIGluIHRoZSBlbmNvZGVyIGNoYWluLAotICogc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3QgYnJp
ZGdlIHRvIHRoZSBsYXN0LiBUaGVzZSBhcmUgY2FsbGVkIGFmdGVyIGNvbXBsZXRpbmcKLSAqICZk
cm1fZW5jb2Rlcl9oZWxwZXJfZnVuY3MuYXRvbWljX2Rpc2FibGUKLSAqCi0gKiBOb3RlOiB0aGUg
YnJpZGdlIHBhc3NlZCBzaG91bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBlbmNvZGVyCi0g
Ki8KLXZvaWQgZHJtX2F0b21pY19icmlkZ2VfcG9zdF9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdl
ICpicmlkZ2UsCi0JCQkJICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSkKK3N0YXRp
YyB2b2lkIGRybV9hdG9taWNfYnJpZGdlX3Bvc3RfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAq
YnJpZGdlLAorCQkJCQkgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCiB7CiAJaWYg
KCFicmlkZ2UpCiAJCXJldHVybjsKQEAgLTQwNSwyMyArNDA4LDkgQEAgdm9pZCBkcm1fYXRvbWlj
X2JyaWRnZV9wb3N0X2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKIAogCWRybV9h
dG9taWNfYnJpZGdlX3Bvc3RfZGlzYWJsZShicmlkZ2UtPm5leHQsIHN0YXRlKTsKIH0KLUVYUE9S
VF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfcG9zdF9kaXNhYmxlKTsKIAotLyoqCi0gKiBkcm1f
YXRvbWljX2JyaWRnZV9wcmVfZW5hYmxlIC0gcHJlcGFyZXMgZm9yIGVuYWJsaW5nIGFsbCBicmlk
Z2VzIGluIHRoZQotICoJCQkJICBlbmNvZGVyIGNoYWluCi0gKiBAYnJpZGdlOiBicmlkZ2UgY29u
dHJvbCBzdHJ1Y3R1cmUKLSAqIEBzdGF0ZTogYXRvbWljIHN0YXRlIGJlaW5nIGNvbW1pdHRlZAot
ICoKLSAqIENhbGxzICZkcm1fYnJpZGdlX2Z1bmNzLmF0b21pY19wcmVfZW5hYmxlIChmYWxscyBi
YWNrIG9uCi0gKiAmZHJtX2JyaWRnZV9mdW5jcy5wcmVfZW5hYmxlKSBvcCBmb3IgYWxsIHRoZSBi
cmlkZ2VzIGluIHRoZSBlbmNvZGVyIGNoYWluLAotICogc3RhcnRpbmcgZnJvbSB0aGUgbGFzdCBi
cmlkZ2UgdG8gdGhlIGZpcnN0LiBUaGVzZSBhcmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nCi0gKiAm
ZHJtX2VuY29kZXJfaGVscGVyX2Z1bmNzLmF0b21pY19lbmFibGUKLSAqCi0gKiBOb3RlOiB0aGUg
YnJpZGdlIHBhc3NlZCBzaG91bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBlbmNvZGVyCi0g
Ki8KLXZvaWQgZHJtX2F0b21pY19icmlkZ2VfcHJlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAq
YnJpZGdlLAotCQkJCSAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQorc3RhdGljIHZv
aWQgZHJtX2F0b21pY19icmlkZ2VfcHJlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdl
LAorCQkJCQkgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQogewogCWlmICghYnJpZGdl
KQogCQlyZXR1cm47CkBAIC00MzMsMjIgKzQyMiw5IEBAIHZvaWQgZHJtX2F0b21pY19icmlkZ2Vf
cHJlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCWVsc2UgaWYgKGJyaWRnZS0+
ZnVuY3MtPnByZV9lbmFibGUpCiAJCWJyaWRnZS0+ZnVuY3MtPnByZV9lbmFibGUoYnJpZGdlKTsK
IH0KLUVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfcHJlX2VuYWJsZSk7CiAKLS8qKgot
ICogZHJtX2F0b21pY19icmlkZ2VfZW5hYmxlIC0gZW5hYmxlcyBhbGwgYnJpZGdlcyBpbiB0aGUg
ZW5jb2RlciBjaGFpbgotICogQGJyaWRnZTogYnJpZGdlIGNvbnRyb2wgc3RydWN0dXJlCi0gKiBA
c3RhdGU6IGF0b21pYyBzdGF0ZSBiZWluZyBjb21taXR0ZWQKLSAqCi0gKiBDYWxscyAmZHJtX2Jy
aWRnZV9mdW5jcy5hdG9taWNfZW5hYmxlIChmYWxscyBiYWNrIG9uCi0gKiAmZHJtX2JyaWRnZV9m
dW5jcy5lbmFibGUpIG9wIGZvciBhbGwgdGhlIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIgY2hhaW4s
Ci0gKiBzdGFydGluZyBmcm9tIHRoZSBmaXJzdCBicmlkZ2UgdG8gdGhlIGxhc3QuIFRoZXNlIGFy
ZSBjYWxsZWQgYWZ0ZXIgY29tcGxldGluZwotICogJmRybV9lbmNvZGVyX2hlbHBlcl9mdW5jcy5h
dG9taWNfZW5hYmxlCi0gKgotICogTm90ZTogdGhlIGJyaWRnZSBwYXNzZWQgc2hvdWxkIGJlIHRo
ZSBvbmUgY2xvc2VzdCB0byB0aGUgZW5jb2RlcgotICovCi12b2lkIGRybV9hdG9taWNfYnJpZGdl
X2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJICAgICAgc3RydWN0IGRybV9h
dG9taWNfc3RhdGUgKnN0YXRlKQorc3RhdGljIHZvaWQgZHJtX2F0b21pY19icmlkZ2VfZW5hYmxl
KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJICAgICBzdHJ1Y3QgZHJtX2F0b21pY19z
dGF0ZSAqc3RhdGUpCiB7CiAJaWYgKCFicmlkZ2UpCiAJCXJldHVybjsKQEAgLTQ2MCw3ICs0MzYs
NzYgQEAgdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJy
aWRnZSwKIAogCWRybV9hdG9taWNfYnJpZGdlX2VuYWJsZShicmlkZ2UtPm5leHQsIHN0YXRlKTsK
IH0KLUVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfZW5hYmxlKTsKKworLyoqCisgKiBk
cm1fYXRvbWljX2JyaWRnZV9jaGFpbl9kaXNhYmxlIC0gZGlzYWJsZXMgYWxsIGJyaWRnZXMgaW4g
dGhlIGVuY29kZXIgY2hhaW4KKyAqIEBlbmNvZGVyOiBlbmNvZGVyIG9iamVjdAorICogQHN0YXRl
OiBhdG9taWMgc3RhdGUgYmVpbmcgY29tbWl0dGVkCisgKgorICogQ2FsbHMgJmRybV9icmlkZ2Vf
ZnVuY3MuYXRvbWljX2Rpc2FibGUgKGZhbGxzIGJhY2sgb24KKyAqICZkcm1fYnJpZGdlX2Z1bmNz
LmRpc2FibGUpIG9wIGZvciBhbGwgdGhlIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIgY2hhaW4sCisg
KiBzdGFydGluZyBmcm9tIHRoZSBsYXN0IGJyaWRnZSB0byB0aGUgZmlyc3QuIFRoZXNlIGFyZSBj
YWxsZWQgYmVmb3JlIGNhbGxpbmcKKyAqICZkcm1fZW5jb2Rlcl9oZWxwZXJfZnVuY3MuYXRvbWlj
X2Rpc2FibGUKKyAqLwordm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9kaXNhYmxlKHN0cnVj
dCBkcm1fZW5jb2RlciAqZW5jb2RlciwKKwkJCQkgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRl
ICpzdGF0ZSkKK3sKKwlkcm1fYXRvbWljX2JyaWRnZV9kaXNhYmxlKGVuY29kZXItPmJyaWRnZSwg
c3RhdGUpOworfQorRVhQT1JUX1NZTUJPTChkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9kaXNhYmxl
KTsKKworLyoqCisgKiBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9wb3N0X2Rpc2FibGUgLSBjbGVh
bnMgdXAgYWZ0ZXIgZGlzYWJsaW5nIGFsbCBicmlkZ2VzCisgKgkJCQkJICBpbiB0aGUgZW5jb2Rl
ciBjaGFpbgorICogQGVuY29kZXI6IGVuY29kZXIgb2JqZWN0CisgKiBAc3RhdGU6IGF0b21pYyBz
dGF0ZSBiZWluZyBjb21taXR0ZWQKKyAqCisgKiBDYWxscyAmZHJtX2JyaWRnZV9mdW5jcy5hdG9t
aWNfcG9zdF9kaXNhYmxlIChmYWxscyBiYWNrIG9uCisgKiAmZHJtX2JyaWRnZV9mdW5jcy5wb3N0
X2Rpc2FibGUpIG9wIGZvciBhbGwgdGhlIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIgY2hhaW4sCisg
KiBzdGFydGluZyBmcm9tIHRoZSBmaXJzdCBicmlkZ2UgdG8gdGhlIGxhc3QuIFRoZXNlIGFyZSBj
YWxsZWQgYWZ0ZXIgY29tcGxldGluZworICogJmRybV9lbmNvZGVyX2hlbHBlcl9mdW5jcy5hdG9t
aWNfZGlzYWJsZQorICovCit2b2lkIGRybV9hdG9taWNfYnJpZGdlX2NoYWluX3Bvc3RfZGlzYWJs
ZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIsCisJCQkJCSAgc3RydWN0IGRybV9hdG9taWNf
c3RhdGUgKnN0YXRlKQoreworCWRybV9hdG9taWNfYnJpZGdlX3Bvc3RfZGlzYWJsZShlbmNvZGVy
LT5icmlkZ2UsIHN0YXRlKTsKK30KK0VYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfY2hh
aW5fcG9zdF9kaXNhYmxlKTsKKworLyoqCisgKiBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9wcmVf
ZW5hYmxlIC0gcHJlcGFyZXMgZm9yIGVuYWJsaW5nIGFsbCBicmlkZ2VzIGluCisgKgkJCQkJdGhl
IGVuY29kZXIgY2hhaW4KKyAqIEBlbmNvZGVyOiBlbmNvZGVyIG9iamVjdAorICogQHN0YXRlOiBh
dG9taWMgc3RhdGUgYmVpbmcgY29tbWl0dGVkCisgKgorICogQ2FsbHMgJmRybV9icmlkZ2VfZnVu
Y3MuYXRvbWljX3ByZV9lbmFibGUgKGZhbGxzIGJhY2sgb24KKyAqICZkcm1fYnJpZGdlX2Z1bmNz
LnByZV9lbmFibGUpIG9wIGZvciBhbGwgdGhlIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIgY2hhaW4s
CisgKiBzdGFydGluZyBmcm9tIHRoZSBsYXN0IGJyaWRnZSB0byB0aGUgZmlyc3QuIFRoZXNlIGFy
ZSBjYWxsZWQgYmVmb3JlIGNhbGxpbmcKKyAqICZkcm1fZW5jb2Rlcl9oZWxwZXJfZnVuY3MuYXRv
bWljX2VuYWJsZQorICovCit2b2lkIGRybV9hdG9taWNfYnJpZGdlX2NoYWluX3ByZV9lbmFibGUo
c3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyLAorCQkJCQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0
ZSAqc3RhdGUpCit7CisJZHJtX2F0b21pY19icmlkZ2VfcHJlX2VuYWJsZShlbmNvZGVyLT5icmlk
Z2UsIHN0YXRlKTsKK30KK0VYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fcHJl
X2VuYWJsZSk7CisKKy8qKgorICogZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fZW5hYmxlIC0gZW5h
YmxlcyBhbGwgYnJpZGdlcyBpbiB0aGUgZW5jb2RlciBjaGFpbgorICogQGVuY29kZXI6IGVuY29k
ZXIgb2JqZWN0CisgKiBAc3RhdGU6IGF0b21pYyBzdGF0ZSBiZWluZyBjb21taXR0ZWQKKyAqCisg
KiBDYWxscyAmZHJtX2JyaWRnZV9mdW5jcy5hdG9taWNfZW5hYmxlIChmYWxscyBiYWNrIG9uCisg
KiAmZHJtX2JyaWRnZV9mdW5jcy5lbmFibGUpIG9wIGZvciBhbGwgdGhlIGJyaWRnZXMgaW4gdGhl
IGVuY29kZXIgY2hhaW4sCisgKiBzdGFydGluZyBmcm9tIHRoZSBmaXJzdCBicmlkZ2UgdG8gdGhl
IGxhc3QuIFRoZXNlIGFyZSBjYWxsZWQgYWZ0ZXIgY29tcGxldGluZworICogJmRybV9lbmNvZGVy
X2hlbHBlcl9mdW5jcy5hdG9taWNfZW5hYmxlCisgKi8KK3ZvaWQgZHJtX2F0b21pY19icmlkZ2Vf
Y2hhaW5fZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwKKwkJCQkgICAgc3RydWN0
IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQoreworCWRybV9hdG9taWNfYnJpZGdlX2VuYWJsZShl
bmNvZGVyLT5icmlkZ2UsIHN0YXRlKTsKK30KK0VYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlk
Z2VfY2hhaW5fZW5hYmxlKTsKIAogI2lmZGVmIENPTkZJR19PRgogLyoqCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vZHJtX2NydGNfaGVscGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2Ny
dGNfaGVscGVyLmMKaW5kZXggODdkYWUzN2ZlYzEyLi5mOGEzNjFkMzk2ZGYgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9kcm1fY3J0Y19oZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
ZHJtX2NydGNfaGVscGVyLmMKQEAgLTE2MSw3ICsxNjEsNyBAQCBkcm1fZW5jb2Rlcl9kaXNhYmxl
KHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKIAkJcmV0dXJuOwogCiAJaWYgKCFlbmNvZGVy
LT5jdXN0b21fYnJpZGdlX2VuYWJsZV9kaXNhYmxlX3NlcSkKLQkJZHJtX2JyaWRnZV9kaXNhYmxl
KGVuY29kZXItPmJyaWRnZSk7CisJCWRybV9icmlkZ2VfY2hhaW5fZGlzYWJsZShlbmNvZGVyKTsK
IAogCWlmIChlbmNvZGVyX2Z1bmNzLT5kaXNhYmxlKQogCQkoKmVuY29kZXJfZnVuY3MtPmRpc2Fi
bGUpKGVuY29kZXIpOwpAQCAtMTY5LDcgKzE2OSw3IEBAIGRybV9lbmNvZGVyX2Rpc2FibGUoc3Ry
dWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQogCQkoKmVuY29kZXJfZnVuY3MtPmRwbXMpKGVuY29k
ZXIsIERSTV9NT0RFX0RQTVNfT0ZGKTsKIAogCWlmICghZW5jb2Rlci0+Y3VzdG9tX2JyaWRnZV9l
bmFibGVfZGlzYWJsZV9zZXEpCi0JCWRybV9icmlkZ2VfcG9zdF9kaXNhYmxlKGVuY29kZXItPmJy
aWRnZSk7CisJCWRybV9icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlKGVuY29kZXIpOwogfQogCiBz
dGF0aWMgdm9pZCBfX2RybV9oZWxwZXJfZGlzYWJsZV91bnVzZWRfZnVuY3Rpb25zKHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYpCkBAIC0zMjksOCArMzI5LDggQEAgYm9vbCBkcm1fY3J0Y19oZWxwZXJf
c2V0X21vZGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCQlpZiAoIWVuY29kZXJfZnVuY3MpCiAJ
CQljb250aW51ZTsKIAotCQlyZXQgPSBkcm1fYnJpZGdlX21vZGVfZml4dXAoZW5jb2Rlci0+YnJp
ZGdlLAotCQkJbW9kZSwgYWRqdXN0ZWRfbW9kZSk7CisJCXJldCA9IGRybV9icmlkZ2VfY2hhaW5f
bW9kZV9maXh1cChlbmNvZGVyLCBtb2RlLAorCQkJCQkJICBhZGp1c3RlZF9tb2RlKTsKIAkJaWYg
KCFyZXQpIHsKIAkJCURSTV9ERUJVR19LTVMoIkJyaWRnZSBmaXh1cCBmYWlsZWRcbiIpOwogCQkJ
Z290byBkb25lOwpAQCAtMzY4LDE0ICszNjgsMTQgQEAgYm9vbCBkcm1fY3J0Y19oZWxwZXJfc2V0
X21vZGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCQkJY29udGludWU7CiAKIAkJaWYgKCFlbmNv
ZGVyLT5jdXN0b21fYnJpZGdlX2VuYWJsZV9kaXNhYmxlX3NlcSkKLQkJCWRybV9icmlkZ2VfZGlz
YWJsZShlbmNvZGVyLT5icmlkZ2UpOworCQkJZHJtX2JyaWRnZV9jaGFpbl9kaXNhYmxlKGVuY29k
ZXIpOwogCiAJCS8qIERpc2FibGUgdGhlIGVuY29kZXJzIGFzIHRoZSBmaXJzdCB0aGluZyB3ZSBk
by4gKi8KIAkJaWYgKGVuY29kZXJfZnVuY3MtPnByZXBhcmUpCiAJCQllbmNvZGVyX2Z1bmNzLT5w
cmVwYXJlKGVuY29kZXIpOwogCiAJCWlmICghZW5jb2Rlci0+Y3VzdG9tX2JyaWRnZV9lbmFibGVf
ZGlzYWJsZV9zZXEpCi0JCQlkcm1fYnJpZGdlX3Bvc3RfZGlzYWJsZShlbmNvZGVyLT5icmlkZ2Up
OworCQkJZHJtX2JyaWRnZV9jaGFpbl9wb3N0X2Rpc2FibGUoZW5jb2Rlcik7CiAJfQogCiAJZHJt
X2NydGNfcHJlcGFyZV9lbmNvZGVycyhkZXYpOwpAQCAtNDAzLDcgKzQwMyw3IEBAIGJvb2wgZHJt
X2NydGNfaGVscGVyX3NldF9tb2RlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAkJaWYgKGVuY29k
ZXJfZnVuY3MtPm1vZGVfc2V0KQogCQkJZW5jb2Rlcl9mdW5jcy0+bW9kZV9zZXQoZW5jb2Rlciwg
bW9kZSwgYWRqdXN0ZWRfbW9kZSk7CiAKLQkJZHJtX2JyaWRnZV9tb2RlX3NldChlbmNvZGVyLT5i
cmlkZ2UsIG1vZGUsIGFkanVzdGVkX21vZGUpOworCQlkcm1fYnJpZGdlX2NoYWluX21vZGVfc2V0
KGVuY29kZXIsIG1vZGUsIGFkanVzdGVkX21vZGUpOwogCX0KIAogCS8qIE5vdyBlbmFibGUgdGhl
IGNsb2NrcywgcGxhbmUsIHBpcGUsIGFuZCBjb25uZWN0b3JzIHRoYXQgd2Ugc2V0IHVwLiAqLwpA
QCAtNDE5LDEzICs0MTksMTMgQEAgYm9vbCBkcm1fY3J0Y19oZWxwZXJfc2V0X21vZGUoc3RydWN0
IGRybV9jcnRjICpjcnRjLAogCQkJY29udGludWU7CiAKIAkJaWYgKCFlbmNvZGVyLT5jdXN0b21f
YnJpZGdlX2VuYWJsZV9kaXNhYmxlX3NlcSkKLQkJCWRybV9icmlkZ2VfcHJlX2VuYWJsZShlbmNv
ZGVyLT5icmlkZ2UpOworCQkJZHJtX2JyaWRnZV9jaGFpbl9wcmVfZW5hYmxlKGVuY29kZXIpOwog
CiAJCWlmIChlbmNvZGVyX2Z1bmNzLT5jb21taXQpCiAJCQllbmNvZGVyX2Z1bmNzLT5jb21taXQo
ZW5jb2Rlcik7CiAKIAkJaWYgKCFlbmNvZGVyLT5jdXN0b21fYnJpZGdlX2VuYWJsZV9kaXNhYmxl
X3NlcSkKLQkJCWRybV9icmlkZ2VfZW5hYmxlKGVuY29kZXItPmJyaWRnZSk7CisJCQlkcm1fYnJp
ZGdlX2NoYWluX2VuYWJsZShlbmNvZGVyKTsKIAl9CiAKIAkvKiBDYWxjdWxhdGUgYW5kIHN0b3Jl
IHZhcmlvdXMgY29uc3RhbnRzIHdoaWNoCkBAIC04MjQsNyArODI0LDYgQEAgc3RhdGljIGludCBk
cm1faGVscGVyX2Nob29zZV9lbmNvZGVyX2RwbXMoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVy
KQogLyogSGVscGVyIHdoaWNoIGhhbmRsZXMgYnJpZGdlIG9yZGVyaW5nIGFyb3VuZCBlbmNvZGVy
IGRwbXMgKi8KIHN0YXRpYyB2b2lkIGRybV9oZWxwZXJfZW5jb2Rlcl9kcG1zKHN0cnVjdCBkcm1f
ZW5jb2RlciAqZW5jb2RlciwgaW50IG1vZGUpCiB7Ci0Jc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSA9IGVuY29kZXItPmJyaWRnZTsKIAljb25zdCBzdHJ1Y3QgZHJtX2VuY29kZXJfaGVscGVyX2Z1
bmNzICplbmNvZGVyX2Z1bmNzOwogCiAJZW5jb2Rlcl9mdW5jcyA9IGVuY29kZXItPmhlbHBlcl9w
cml2YXRlOwpAQCAtODMzLDkgKzgzMiw5IEBAIHN0YXRpYyB2b2lkIGRybV9oZWxwZXJfZW5jb2Rl
cl9kcG1zKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwgaW50IG1vZGUpCiAKIAlpZiAoIWVu
Y29kZXItPmN1c3RvbV9icmlkZ2VfZW5hYmxlX2Rpc2FibGVfc2VxKSB7CiAJCWlmIChtb2RlID09
IERSTV9NT0RFX0RQTVNfT04pCi0JCQlkcm1fYnJpZGdlX3ByZV9lbmFibGUoYnJpZGdlKTsKKwkJ
CWRybV9icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZShlbmNvZGVyKTsKIAkJZWxzZQotCQkJZHJtX2Jy
aWRnZV9kaXNhYmxlKGJyaWRnZSk7CisJCQlkcm1fYnJpZGdlX2NoYWluX2Rpc2FibGUoZW5jb2Rl
cik7CiAJfQogCiAJaWYgKGVuY29kZXJfZnVuY3MtPmRwbXMpCkBAIC04NDMsOSArODQyLDkgQEAg
c3RhdGljIHZvaWQgZHJtX2hlbHBlcl9lbmNvZGVyX2RwbXMoc3RydWN0IGRybV9lbmNvZGVyICpl
bmNvZGVyLCBpbnQgbW9kZSkKIAogCWlmICghZW5jb2Rlci0+Y3VzdG9tX2JyaWRnZV9lbmFibGVf
ZGlzYWJsZV9zZXEpIHsKIAkJaWYgKG1vZGUgPT0gRFJNX01PREVfRFBNU19PTikKLQkJCWRybV9i
cmlkZ2VfZW5hYmxlKGJyaWRnZSk7CisJCQlkcm1fYnJpZGdlX2NoYWluX2VuYWJsZShlbmNvZGVy
KTsKIAkJZWxzZQotCQkJZHJtX2JyaWRnZV9wb3N0X2Rpc2FibGUoYnJpZGdlKTsKKwkJCWRybV9i
cmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlKGVuY29kZXIpOwogCX0KIH0KIApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2RybV9wcm9iZV9oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1f
cHJvYmVfaGVscGVyLmMKaW5kZXggMzUxY2JjNDBmMGY4Li40NjExOTliYzI4YzAgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fcHJvYmVfaGVscGVyLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2RybV9wcm9iZV9oZWxwZXIuYwpAQCAtMTEzLDcgKzExMyw3IEBAIGRybV9tb2RlX3ZhbGlk
YXRlX3BpcGVsaW5lKHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAogCQkJY29udGludWU7
CiAJCX0KIAotCQlyZXQgPSBkcm1fYnJpZGdlX21vZGVfdmFsaWQoZW5jb2Rlci0+YnJpZGdlLCBt
b2RlKTsKKwkJcmV0ID0gZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3ZhbGlkKGVuY29kZXIsIG1vZGUp
OwogCQlpZiAocmV0ICE9IE1PREVfT0spIHsKIAkJCS8qIFRoZXJlIGlzIGFsc28gbm8gcG9pbnQg
aW4gY29udGludWluZyBmb3IgY3J0YyBjaGVjawogCQkJICogaGVyZS4gKi8KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kc2kuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9leHlub3MvZXh5bm9zX2RybV9kc2kuYwppbmRleCA4NTkzYzg3YmRmOTYuLjlhOTZiYzQ4Yjgx
ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2V4eW5vcy9leHlub3NfZHJtX2RzaS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kc2kuYwpAQCAtMTM4OSw3ICsx
Mzg5LDcgQEAgc3RhdGljIHZvaWQgZXh5bm9zX2RzaV9lbmFibGUoc3RydWN0IGRybV9lbmNvZGVy
ICplbmNvZGVyKQogCQlpZiAocmV0IDwgMCkKIAkJCWdvdG8gZXJyX3B1dF9zeW5jOwogCX0gZWxz
ZSB7Ci0JCWRybV9icmlkZ2VfcHJlX2VuYWJsZShlbmNvZGVyLT5icmlkZ2UpOworCQlkcm1fYnJp
ZGdlX2NoYWluX3ByZV9lbmFibGUoZW5jb2Rlcik7CiAJfQogCiAJZXh5bm9zX2RzaV9zZXRfZGlz
cGxheV9tb2RlKGRzaSk7CkBAIC0xNDAwLDcgKzE0MDAsNyBAQCBzdGF0aWMgdm9pZCBleHlub3Nf
ZHNpX2VuYWJsZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCiAJCWlmIChyZXQgPCAwKQog
CQkJZ290byBlcnJfZGlzcGxheV9kaXNhYmxlOwogCX0gZWxzZSB7Ci0JCWRybV9icmlkZ2VfZW5h
YmxlKGVuY29kZXItPmJyaWRnZSk7CisJCWRybV9icmlkZ2VfY2hhaW5fZW5hYmxlKGVuY29kZXIp
OwogCX0KIAogCWRzaS0+c3RhdGUgfD0gRFNJTV9TVEFURV9WSURPVVRfQVZBSUxBQkxFOwpAQCAt
MTQyNSwxMCArMTQyNSwxMCBAQCBzdGF0aWMgdm9pZCBleHlub3NfZHNpX2Rpc2FibGUoc3RydWN0
IGRybV9lbmNvZGVyICplbmNvZGVyKQogCWRzaS0+c3RhdGUgJj0gfkRTSU1fU1RBVEVfVklET1VU
X0FWQUlMQUJMRTsKIAogCWRybV9wYW5lbF9kaXNhYmxlKGRzaS0+cGFuZWwpOwotCWRybV9icmlk
Z2VfZGlzYWJsZShlbmNvZGVyLT5icmlkZ2UpOworCWRybV9icmlkZ2VfY2hhaW5fZGlzYWJsZShl
bmNvZGVyKTsKIAlleHlub3NfZHNpX3NldF9kaXNwbGF5X2VuYWJsZShkc2ksIGZhbHNlKTsKIAlk
cm1fcGFuZWxfdW5wcmVwYXJlKGRzaS0+cGFuZWwpOwotCWRybV9icmlkZ2VfcG9zdF9kaXNhYmxl
KGVuY29kZXItPmJyaWRnZSk7CisJZHJtX2JyaWRnZV9jaGFpbl9wb3N0X2Rpc2FibGUoZW5jb2Rl
cik7CiAJZHNpLT5zdGF0ZSAmPSB+RFNJTV9TVEFURV9FTkFCTEVEOwogCXBtX3J1bnRpbWVfcHV0
X3N5bmMoZHNpLT5kZXYpOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVr
L210a19oZG1pLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2hkbWkuYwppbmRleCBj
NzliMWY4NTVkODkuLjZlYzNkMjU4NDUzOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21l
ZGlhdGVrL210a19oZG1pLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19oZG1p
LmMKQEAgLTEyNDcsOCArMTI0Nyw4IEBAIHN0YXRpYyBpbnQgbXRrX2hkbWlfY29ubl9tb2RlX3Zh
bGlkKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uLAogCQlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZSBhZGp1c3RlZF9tb2RlOwogCiAJCWRybV9tb2RlX2NvcHkoJmFkanVzdGVkX21vZGUsIG1vZGUp
OwotCQlpZiAoIWRybV9icmlkZ2VfbW9kZV9maXh1cChoZG1pLT5icmlkZ2UubmV4dCwgbW9kZSwK
LQkJCQkJICAgJmFkanVzdGVkX21vZGUpKQorCQlpZiAoIWRybV9icmlkZ2VfY2hhaW5fbW9kZV9m
aXh1cChoZG1pLT5icmlkZ2UuZW5jb2RlciwgbW9kZSwKKwkJCQkJCSAmYWRqdXN0ZWRfbW9kZSkp
CiAJCQlyZXR1cm4gTU9ERV9CQUQ7CiAJfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
dmM0L3ZjNF9kc2kuYyBiL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2RzaS5jCmluZGV4IGI2NzBj
YTQ3Mzc4Ni4uZDdjZDcyMGM0ZWZhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmM0L3Zj
NF9kc2kuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kc2kuYwpAQCAtNzUyLDkgKzc1
Miw5IEBAIHN0YXRpYyB2b2lkIHZjNF9kc2lfZW5jb2Rlcl9kaXNhYmxlKHN0cnVjdCBkcm1fZW5j
b2RlciAqZW5jb2RlcikKIAlzdHJ1Y3QgdmM0X2RzaSAqZHNpID0gdmM0X2VuY29kZXItPmRzaTsK
IAlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmZHNpLT5wZGV2LT5kZXY7CiAKLQlkcm1fYnJpZGdlX2Rp
c2FibGUoZW5jb2Rlci0+YnJpZGdlKTsKKwlkcm1fYnJpZGdlX2NoYWluX2Rpc2FibGUoZW5jb2Rl
cik7CiAJdmM0X2RzaV91bHBzKGRzaSwgdHJ1ZSk7Ci0JZHJtX2JyaWRnZV9wb3N0X2Rpc2FibGUo
ZW5jb2Rlci0+YnJpZGdlKTsKKwlkcm1fYnJpZGdlX2NoYWluX3Bvc3RfZGlzYWJsZShlbmNvZGVy
KTsKIAogCWNsa19kaXNhYmxlX3VucHJlcGFyZShkc2ktPnBsbF9waHlfY2xvY2spOwogCWNsa19k
aXNhYmxlX3VucHJlcGFyZShkc2ktPmVzY2FwZV9jbG9jayk7CkBAIC0xMDU0LDcgKzEwNTQsNyBA
QCBzdGF0aWMgdm9pZCB2YzRfZHNpX2VuY29kZXJfZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAq
ZW5jb2RlcikKIAogCXZjNF9kc2lfdWxwcyhkc2ksIGZhbHNlKTsKIAotCWRybV9icmlkZ2VfcHJl
X2VuYWJsZShlbmNvZGVyLT5icmlkZ2UpOworCWRybV9icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZShl
bmNvZGVyKTsKIAogCWlmIChkc2ktPm1vZGVfZmxhZ3MgJiBNSVBJX0RTSV9NT0RFX1ZJREVPKSB7
CiAJCURTSV9QT1JUX1dSSVRFKERJU1AwX0NUUkwsCkBAIC0xMDcxLDcgKzEwNzEsNyBAQCBzdGF0
aWMgdm9pZCB2YzRfZHNpX2VuY29kZXJfZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2Rl
cikKIAkJCSAgICAgICBEU0lfRElTUDBfRU5BQkxFKTsKIAl9CiAKLQlkcm1fYnJpZGdlX2VuYWJs
ZShlbmNvZGVyLT5icmlkZ2UpOworCWRybV9icmlkZ2VfY2hhaW5fZW5hYmxlKGVuY29kZXIpOwog
CiAJaWYgKGRlYnVnX2R1bXBfcmVncykgewogCQlzdHJ1Y3QgZHJtX3ByaW50ZXIgcCA9IGRybV9p
bmZvX3ByaW50ZXIoJmRzaS0+cGRldi0+ZGV2KTsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2Ry
bV9icmlkZ2UuaCBiL2luY2x1ZGUvZHJtL2RybV9icmlkZ2UuaAppbmRleCA3NjE2ZjY1NjJmZTQu
LjMwNTdlMjE1M2Y2MiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2JyaWRnZS5oCisrKyBi
L2luY2x1ZGUvZHJtL2RybV9icmlkZ2UuaApAQCAtMjU0LDkgKzI1NCwxMCBAQCBzdHJ1Y3QgZHJt
X2JyaWRnZV9mdW5jcyB7CiAJICogdGhlcmUgaXMgb25lKSB3aGVuIHRoaXMgY2FsbGJhY2sgaXMg
Y2FsbGVkLgogCSAqCiAJICogTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gd2lsbCBvbmx5IGJlIGlu
dm9rZWQgaW4gdGhlIGNvbnRleHQgb2YgYW4KLQkgKiBhdG9taWMgY29tbWl0LiBJdCB3aWxsIG5v
dCBiZSBpbnZva2VkIGZyb20gJmRybV9icmlkZ2VfcHJlX2VuYWJsZS4gSXQKLQkgKiB3b3VsZCBi
ZSBwcnVkZW50IHRvIGFsc28gcHJvdmlkZSBhbiBpbXBsZW1lbnRhdGlvbiBvZiBAcHJlX2VuYWJs
ZSBpZgotCSAqIHlvdSBhcmUgZXhwZWN0aW5nIGRyaXZlciBjYWxscyBpbnRvICZkcm1fYnJpZGdl
X3ByZV9lbmFibGUuCisJICogYXRvbWljIGNvbW1pdC4gSXQgd2lsbCBub3QgYmUgaW52b2tlZCBm
cm9tCisJICogJmRybV9icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZS4gSXQgd291bGQgYmUgcHJ1ZGVu
dCB0byBhbHNvIHByb3ZpZGUgYW4KKwkgKiBpbXBsZW1lbnRhdGlvbiBvZiBAcHJlX2VuYWJsZSBp
ZiB5b3UgYXJlIGV4cGVjdGluZyBkcml2ZXIgY2FsbHMgaW50bworCSAqICZkcm1fYnJpZGdlX2No
YWluX3ByZV9lbmFibGUuCiAJICoKIAkgKiBUaGUgQGF0b21pY19wcmVfZW5hYmxlIGNhbGxiYWNr
IGlzIG9wdGlvbmFsLgogCSAqLwpAQCAtMjc5LDkgKzI4MCw5IEBAIHN0cnVjdCBkcm1fYnJpZGdl
X2Z1bmNzIHsKIAkgKiBjaGFpbiBpZiB0aGVyZSBpcyBvbmUuCiAJICoKIAkgKiBOb3RlIHRoYXQg
dGhpcyBmdW5jdGlvbiB3aWxsIG9ubHkgYmUgaW52b2tlZCBpbiB0aGUgY29udGV4dCBvZiBhbgot
CSAqIGF0b21pYyBjb21taXQuIEl0IHdpbGwgbm90IGJlIGludm9rZWQgZnJvbSAmZHJtX2JyaWRn
ZV9lbmFibGUuIEl0Ci0JICogd291bGQgYmUgcHJ1ZGVudCB0byBhbHNvIHByb3ZpZGUgYW4gaW1w
bGVtZW50YXRpb24gb2YgQGVuYWJsZSBpZgotCSAqIHlvdSBhcmUgZXhwZWN0aW5nIGRyaXZlciBj
YWxscyBpbnRvICZkcm1fYnJpZGdlX2VuYWJsZS4KKwkgKiBhdG9taWMgY29tbWl0LiBJdCB3aWxs
IG5vdCBiZSBpbnZva2VkIGZyb20gJmRybV9icmlkZ2VfY2hhaW5fZW5hYmxlLgorCSAqIEl0IHdv
dWxkIGJlIHBydWRlbnQgdG8gYWxzbyBwcm92aWRlIGFuIGltcGxlbWVudGF0aW9uIG9mIEBlbmFi
bGUgaWYKKwkgKiB5b3UgYXJlIGV4cGVjdGluZyBkcml2ZXIgY2FsbHMgaW50byAmZHJtX2JyaWRn
ZV9jaGFpbl9lbmFibGUuCiAJICoKIAkgKiBUaGUgZW5hYmxlIGNhbGxiYWNrIGlzIG9wdGlvbmFs
LgogCSAqLwpAQCAtMzAxLDkgKzMwMiwxMCBAQCBzdHJ1Y3QgZHJtX2JyaWRnZV9mdW5jcyB7CiAJ
ICogc2lnbmFscykgZmVlZGluZyBpdCBpcyBzdGlsbCBydW5uaW5nIHdoZW4gdGhpcyBjYWxsYmFj
ayBpcyBjYWxsZWQuCiAJICoKIAkgKiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiB3aWxsIG9ubHkg
YmUgaW52b2tlZCBpbiB0aGUgY29udGV4dCBvZiBhbgotCSAqIGF0b21pYyBjb21taXQuIEl0IHdp
bGwgbm90IGJlIGludm9rZWQgZnJvbSAmZHJtX2JyaWRnZV9kaXNhYmxlLiBJdAotCSAqIHdvdWxk
IGJlIHBydWRlbnQgdG8gYWxzbyBwcm92aWRlIGFuIGltcGxlbWVudGF0aW9uIG9mIEBkaXNhYmxl
IGlmCi0JICogeW91IGFyZSBleHBlY3RpbmcgZHJpdmVyIGNhbGxzIGludG8gJmRybV9icmlkZ2Vf
ZGlzYWJsZS4KKwkgKiBhdG9taWMgY29tbWl0LiBJdCB3aWxsIG5vdCBiZSBpbnZva2VkIGZyb20K
KwkgKiAmZHJtX2JyaWRnZV9jaGFpbl9kaXNhYmxlLiBJdCB3b3VsZCBiZSBwcnVkZW50IHRvIGFs
c28gcHJvdmlkZSBhbgorCSAqIGltcGxlbWVudGF0aW9uIG9mIEBkaXNhYmxlIGlmIHlvdSBhcmUg
ZXhwZWN0aW5nIGRyaXZlciBjYWxscyBpbnRvCisJICogJmRybV9icmlkZ2VfY2hhaW5fZGlzYWJs
ZS4KIAkgKgogCSAqIFRoZSBkaXNhYmxlIGNhbGxiYWNrIGlzIG9wdGlvbmFsLgogCSAqLwpAQCAt
MzI1LDEwICszMjcsMTEgQEAgc3RydWN0IGRybV9icmlkZ2VfZnVuY3MgewogCSAqIGNhbGxlZC4K
IAkgKgogCSAqIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIHdpbGwgb25seSBiZSBpbnZva2VkIGlu
IHRoZSBjb250ZXh0IG9mIGFuCi0JICogYXRvbWljIGNvbW1pdC4gSXQgd2lsbCBub3QgYmUgaW52
b2tlZCBmcm9tICZkcm1fYnJpZGdlX3Bvc3RfZGlzYWJsZS4KKwkgKiBhdG9taWMgY29tbWl0LiBJ
dCB3aWxsIG5vdCBiZSBpbnZva2VkIGZyb20KKwkgKiAmZHJtX2JyaWRnZV9jaGFpbl9wb3N0X2Rp
c2FibGUuCiAJICogSXQgd291bGQgYmUgcHJ1ZGVudCB0byBhbHNvIHByb3ZpZGUgYW4gaW1wbGVt
ZW50YXRpb24gb2YKIAkgKiBAcG9zdF9kaXNhYmxlIGlmIHlvdSBhcmUgZXhwZWN0aW5nIGRyaXZl
ciBjYWxscyBpbnRvCi0JICogJmRybV9icmlkZ2VfcG9zdF9kaXNhYmxlLgorCSAqICZkcm1fYnJp
ZGdlX2NoYWluX3Bvc3RfZGlzYWJsZS4KIAkgKgogCSAqIFRoZSBwb3N0X2Rpc2FibGUgY2FsbGJh
Y2sgaXMgb3B0aW9uYWwuCiAJICovCkBAIC00MDYsMjcgKzQwOSwyOCBAQCBzdHJ1Y3QgZHJtX2Jy
aWRnZSAqb2ZfZHJtX2ZpbmRfYnJpZGdlKHN0cnVjdCBkZXZpY2Vfbm9kZSAqbnApOwogaW50IGRy
bV9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2Rlciwgc3RydWN0IGRybV9i
cmlkZ2UgKmJyaWRnZSwKIAkJICAgICAgc3RydWN0IGRybV9icmlkZ2UgKnByZXZpb3VzKTsKIAot
Ym9vbCBkcm1fYnJpZGdlX21vZGVfZml4dXAoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJ
CSAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAotCQkJICAgc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpOwotZW51bSBkcm1fbW9kZV9zdGF0dXMgZHJt
X2JyaWRnZV9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCi0JCQkJCSAgIGNv
bnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKTsKLXZvaWQgZHJtX2JyaWRnZV9kaXNh
YmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpOwotdm9pZCBkcm1fYnJpZGdlX3Bvc3RfZGlz
YWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKTsKLXZvaWQgZHJtX2JyaWRnZV9tb2RlX3Nl
dChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxh
eV9tb2RlICptb2RlLAotCQkJIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3Rl
ZF9tb2RlKTsKLXZvaWQgZHJtX2JyaWRnZV9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpi
cmlkZ2UpOwotdm9pZCBkcm1fYnJpZGdlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdl
KTsKK2Jvb2wgZHJtX2JyaWRnZV9jaGFpbl9tb2RlX2ZpeHVwKHN0cnVjdCBkcm1fZW5jb2RlciAq
ZW5jb2RlciwKKwkJCQkgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCisJCQkJ
IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlKTsKK2VudW0gZHJtX21vZGVf
c3RhdHVzCitkcm1fYnJpZGdlX2NoYWluX21vZGVfdmFsaWQoc3RydWN0IGRybV9lbmNvZGVyICpl
bmNvZGVyLAorCQkJICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKTsKK3Zv
aWQgZHJtX2JyaWRnZV9jaGFpbl9kaXNhYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2Rlcik7
Cit2b2lkIGRybV9icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAq
ZW5jb2Rlcik7Cit2b2lkIGRybV9icmlkZ2VfY2hhaW5fbW9kZV9zZXQoc3RydWN0IGRybV9lbmNv
ZGVyICplbmNvZGVyLAorCQkJICAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICpt
b2RlLAorCQkJICAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9t
b2RlKTsKK3ZvaWQgZHJtX2JyaWRnZV9jaGFpbl9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2Rl
ciAqZW5jb2Rlcik7Cit2b2lkIGRybV9icmlkZ2VfY2hhaW5fZW5hYmxlKHN0cnVjdCBkcm1fZW5j
b2RlciAqZW5jb2Rlcik7CiAKLXZvaWQgZHJtX2F0b21pY19icmlkZ2VfZGlzYWJsZShzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJICAgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpz
dGF0ZSk7Ci12b2lkIGRybV9hdG9taWNfYnJpZGdlX3Bvc3RfZGlzYWJsZShzdHJ1Y3QgZHJtX2Jy
aWRnZSAqYnJpZGdlLAordm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9kaXNhYmxlKHN0cnVj
dCBkcm1fZW5jb2RlciAqZW5jb2RlciwKKwkJCQkgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRl
ICpzdGF0ZSk7Cit2b2lkIGRybV9hdG9taWNfYnJpZGdlX2NoYWluX3Bvc3RfZGlzYWJsZShzdHJ1
Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIsCisJCQkJCSAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUg
KnN0YXRlKTsKK3ZvaWQgZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZShzdHJ1Y3Qg
ZHJtX2VuY29kZXIgKmVuY29kZXIsCisJCQkJCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0
ZSk7Cit2b2lkIGRybV9hdG9taWNfYnJpZGdlX2NoYWluX2VuYWJsZShzdHJ1Y3QgZHJtX2VuY29k
ZXIgKmVuY29kZXIsCiAJCQkJICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSk7Ci12
b2lkIGRybV9hdG9taWNfYnJpZGdlX3ByZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSwKLQkJCQkgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSk7Ci12b2lkIGRybV9hdG9t
aWNfYnJpZGdlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJICAgICAgc3Ry
dWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKTsKIAogI2lmZGVmIENPTkZJR19EUk1fUEFORUxf
QlJJREdFCiBzdHJ1Y3QgZHJtX2JyaWRnZSAqZHJtX3BhbmVsX2JyaWRnZV9hZGQoc3RydWN0IGRy
bV9wYW5lbCAqcGFuZWwsCi0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2RyaS1kZXZlbA==
