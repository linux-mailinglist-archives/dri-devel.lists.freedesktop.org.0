Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 700CC293C4
	for <lists+dri-devel@lfdr.de>; Fri, 24 May 2019 10:55:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C7DF16E0EE;
	Fri, 24 May 2019 08:54:52 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x542.google.com (mail-ed1-x542.google.com
 [IPv6:2a00:1450:4864:20::542])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9F0ED6E0EE
 for <dri-devel@lists.freedesktop.org>; Fri, 24 May 2019 08:54:42 +0000 (UTC)
Received: by mail-ed1-x542.google.com with SMTP id p27so13377800eda.1
 for <dri-devel@lists.freedesktop.org>; Fri, 24 May 2019 01:54:42 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=9ZrSyhoeiYgvzCfWeakTuwz0fktgmWsWuXz1tdE6AX8=;
 b=sEAyRltst6wAduJqyXP/X+KmTj+GsAgpuUD32b8NCzkhqppolgtJDRq3Q/QiNNL1Hb
 4T98DtMBkEK1SLIiDRGWxxuMNajwzPY1d6Ldyvi40CYUHG0+BRoVbIM861RaHjM//bvL
 xBLmJ2tiVkgz0fV1cif/Ocx/apE/EkVLq9fUV0hFgLGDPkYgjcsLZ9iJF3CetFqBiWUk
 qI6IO8T3uoUqaLrPBcKLR7uXkzTB8ocm4BK8OAOhNLVJrmVk/x77E8RZmPVYioeYFIaW
 YRS01rHnHeNyn1x+VpduzNmM6MTRcf76jZSyOtVWyBrkETKspJmvGMjh/7juBUEaEzUH
 Ks3w==
X-Gm-Message-State: APjAAAWilQM7b3gAfEJY/dv7pD4gNPUh5dJKBxr6jHs2DMcMQ1MGvjdw
 q64Ko2bS8B3b4LrmOA1VZgY91A==
X-Google-Smtp-Source: APXvYqxAGYA1i432oev1BkHA875UHlbkrwGVVbALgbPxoR11drupuahsiZKvn16rCUi9aJ1JUeCIJQ==
X-Received: by 2002:a17:906:9390:: with SMTP id
 l16mr77799879ejx.57.1558688081194; 
 Fri, 24 May 2019 01:54:41 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id 96sm567082edq.68.2019.05.24.01.54.39
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Fri, 24 May 2019 01:54:40 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: LKML <linux-kernel@vger.kernel.org>
Subject: [PATCH 30/33] fbcon: Call con2fb_map functions directly
Date: Fri, 24 May 2019 10:53:51 +0200
Message-Id: <20190524085354.27411-31-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190524085354.27411-1-daniel.vetter@ffwll.ch>
References: <20190524085354.27411-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=9ZrSyhoeiYgvzCfWeakTuwz0fktgmWsWuXz1tdE6AX8=;
 b=YKUXozh43MsDiuUY16sGi+9HdS4S3ek6jmfjMDtOihDcyKLB9axY+r4yVA7UyPoprw
 702RQz0sWDiUrrbiAlHKKDY14hsJ9XzNhHLVo1bUpjagWow6yDn9ATy2jbJz7PRbvsPD
 Ru4YoOu9vC5XZMqjz2kRCBlfidCKxeV4+hP08=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 =?UTF-8?q?Micha=C5=82=20Miros=C5=82aw?= <mirq-linux@rere.qmqm.pl>,
 Yisheng Xie <ysxie@foxmail.com>, Hans de Goede <hdegoede@redhat.com>,
 Mikulas Patocka <mpatocka@redhat.com>, Daniel Vetter <daniel.vetter@intel.com>,
 Peter Rosin <peda@axentia.se>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlc2UgYXJlIGFjdHVhbGx5IGZiY29uIGlvY3RscyB3aGljaCBqdXN0IGhhcHBlbiB0byBiZSBl
eHBvc2VkCnRocm91Z2ggL2Rldi9mYiouIFRoZXkgY29tcGxldGVseSBpZ25vcmUgd2hpY2ggZmJf
aW5mbyB0aGV5J3JlIGNhbGxlZApvbiwgYW5kIEkgdGhpbmsgdGhlIHVzZXJzcGFjZSB0b29sIGV2
ZW4gaGFyZGNvZGVzIHRvIC9kZXYvZmIwLgoKSGVuY2UganVzdCBmb3J3YXJkIHRoZSBlbnRpcmUg
dGhpbmcgdG8gZmJjb24uYyB3aG9sZXNhbGUuCgpOb3RlIHRoYXQgdGhpcyBwYXRjaCBkcm9wcyB0
aGUgZmJfbG9jay91bmxvY2sgb24gdGhlIHNldCBzaWRlLiBTaW5jZQp0aGUgaW9jdGwgY2FuIG9w
ZXJhdGUgb24gYW55IGZiIChhcyBwYXNzZWQgaW4gdGhyb3VnaApjb24yZmIuZnJhbWVidWZmZXIp
IHRoaXMgaXMgYm9ndXMuIEFsc28gbm90ZSB0aGF0IGZiY29uLmMgaW4gZ2VuZXJhbApuZXZlciBj
YWxscyBmYl9sb2NrIG9uIGFueXRoaW5nLCBzbyB0aGlzIGhhcyBiZWVuIGJhZGx5IGJyb2tlbgph
bHJlYWR5LgoKV2l0aCB0aGlzIHRoZSBsYXN0IHVzZXIgb2YgdGhlIGZiY29uIG5vdGlmaWVyIGNh
bGxiYWNrIGlzIGdvbmUsIGFuZCB3ZQpjYW4gZ2FyYmFnZSBjb2xsZWN0IHRoYXQgdG9vLgoKdjI6
IGFkZCBtaXNzaW5nIHVhY2Nlc3MuaCBpbmNsdWRlIChhbHBoYSBmYWlscyB0byBjb21waWxlIG90
aGVyd2lzZSksCnJlcG9ydGVkIGJ5IGtidWlsZC4KCnYzOiBSZW1lbWJlciB0byBhbHNvIGRyb3Ag
dGhlICNkZWZpbmVzIChNYWFydGVuKQoKdjQ6IEFkZCB0aGUgc3RhdGljIGlubGluZSB0byBkdW1t
eSBmdW5jdGlvbnMuCgpTaWduZWQtb2ZmLWJ5OiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVy
QGludGVsLmNvbT4KQ2M6IE1hYXJ0ZW4gTGFua2hvcnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51
eC5pbnRlbC5jb20+CkNjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgpD
YzogQmFydGxvbWllaiBab2xuaWVya2lld2ljeiA8Yi56b2xuaWVya2llQHNhbXN1bmcuY29tPgpD
YzogSGFucyBkZSBHb2VkZSA8aGRlZ29lZGVAcmVkaGF0LmNvbT4KQ2M6IFlpc2hlbmcgWGllIDx5
c3hpZUBmb3htYWlsLmNvbT4KQ2M6ICJNaWNoYcWCIE1pcm9zxYJhdyIgPG1pcnEtbGludXhAcmVy
ZS5xbXFtLnBsPgpDYzogUGV0ZXIgUm9zaW4gPHBlZGFAYXhlbnRpYS5zZT4KQ2M6IE1pa3VsYXMg
UGF0b2NrYSA8bXBhdG9ja2FAcmVkaGF0LmNvbT4KLS0tCiBkcml2ZXJzL3ZpZGVvL2ZiZGV2L2Nv
cmUvZmJjb24uYyB8IDU5ICsrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tCiBkcml2ZXJz
L3ZpZGVvL2ZiZGV2L2NvcmUvZmJtZW0uYyB8IDM0ICsrLS0tLS0tLS0tLS0tLS0tLQogaW5jbHVk
ZS9saW51eC9mYi5oICAgICAgICAgICAgICAgfCAgNCAtLS0KIGluY2x1ZGUvbGludXgvZmJjb24u
aCAgICAgICAgICAgIHwgIDQgKysrCiA0IGZpbGVzIGNoYW5nZWQsIDQyIGluc2VydGlvbnMoKyks
IDU5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vZmJkZXYvY29yZS9m
YmNvbi5jIGIvZHJpdmVycy92aWRlby9mYmRldi9jb3JlL2ZiY29uLmMKaW5kZXggZTA4ZTk4NGUy
NTExLi42YTRiYmI4NDA3YzAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8vZmJkZXYvY29yZS9m
YmNvbi5jCisrKyBiL2RyaXZlcnMvdmlkZW8vZmJkZXYvY29yZS9mYmNvbi5jCkBAIC03Niw2ICs3
Niw3IEBACiAjaW5jbHVkZSA8bGludXgvaW5pdC5oPgogI2luY2x1ZGUgPGxpbnV4L2ludGVycnVw
dC5oPgogI2luY2x1ZGUgPGxpbnV4L2NyYzMyLmg+IC8qIEZvciBjb3VudGluZyBmb250IGNoZWNr
c3VtcyAqLworI2luY2x1ZGUgPGxpbnV4L3VhY2Nlc3MuaD4KICNpbmNsdWRlIDxhc20vZmIuaD4K
ICNpbmNsdWRlIDxhc20vaXJxLmg+CiAKQEAgLTMzMTgsMjkgKzMzMTksNDcgQEAgdm9pZCBmYmNv
bl9nZXRfcmVxdWlyZW1lbnQoc3RydWN0IGZiX2luZm8gKmluZm8sCiAJfQogfQogCi1zdGF0aWMg
aW50IGZiY29uX2V2ZW50X25vdGlmeShzdHJ1Y3Qgbm90aWZpZXJfYmxvY2sgKnNlbGYsCi0JCQkg
ICAgICB1bnNpZ25lZCBsb25nIGFjdGlvbiwgdm9pZCAqZGF0YSkKK2ludCBmYmNvbl9zZXRfY29u
MmZiX21hcF9pb2N0bCh2b2lkIF9fdXNlciAqYXJncCkKIHsKLQlzdHJ1Y3QgZmJfZXZlbnQgKmV2
ZW50ID0gZGF0YTsKLQlzdHJ1Y3QgZmJfaW5mbyAqaW5mbyA9IGV2ZW50LT5pbmZvOwotCXN0cnVj
dCBmYl9jb24yZmJtYXAgKmNvbjJmYjsKLQlpbnQgaWR4LCByZXQgPSAwOworCXN0cnVjdCBmYl9j
b24yZmJtYXAgY29uMmZiOworCWludCByZXQ7CiAKLQlzd2l0Y2goYWN0aW9uKSB7Ci0JY2FzZSBG
Ql9FVkVOVF9TRVRfQ09OU09MRV9NQVA6Ci0JCS8qIGNhbGxlZCB3aXRoIGNvbnNvbGUgbG9jayBo
ZWxkICovCi0JCWNvbjJmYiA9IGV2ZW50LT5kYXRhOwotCQlyZXQgPSBzZXRfY29uMmZiX21hcChj
b24yZmItPmNvbnNvbGUgLSAxLAotCQkJCSAgICAgY29uMmZiLT5mcmFtZWJ1ZmZlciwgMSk7Ci0J
CWJyZWFrOwotCWNhc2UgRkJfRVZFTlRfR0VUX0NPTlNPTEVfTUFQOgotCQljb24yZmIgPSBldmVu
dC0+ZGF0YTsKLQkJY29uMmZiLT5mcmFtZWJ1ZmZlciA9IGNvbjJmYl9tYXBbY29uMmZiLT5jb25z
b2xlIC0gMV07Ci0JCWJyZWFrOworCWlmIChjb3B5X2Zyb21fdXNlcigmY29uMmZiLCBhcmdwLCBz
aXplb2YoY29uMmZiKSkpCisJCXJldHVybiAtRUZBVUxUOworCWlmIChjb24yZmIuY29uc29sZSA8
IDEgfHwgY29uMmZiLmNvbnNvbGUgPiBNQVhfTlJfQ09OU09MRVMpCisJCXJldHVybiAtRUlOVkFM
OworCWlmIChjb24yZmIuZnJhbWVidWZmZXIgPj0gRkJfTUFYKQorCQlyZXR1cm4gLUVJTlZBTDsK
KwlpZiAoIXJlZ2lzdGVyZWRfZmJbY29uMmZiLmZyYW1lYnVmZmVyXSkKKwkJcmVxdWVzdF9tb2R1
bGUoImZiJWQiLCBjb24yZmIuZnJhbWVidWZmZXIpOworCWlmICghcmVnaXN0ZXJlZF9mYltjb24y
ZmIuZnJhbWVidWZmZXJdKSB7CisJCXJldHVybiAtRUlOVkFMOwogCX0KKworCWNvbnNvbGVfbG9j
aygpOworCXJldCA9IHNldF9jb24yZmJfbWFwKGNvbjJmYi5jb25zb2xlIC0gMSwKKwkJCSAgICAg
Y29uMmZiLmZyYW1lYnVmZmVyLCAxKTsKKwljb25zb2xlX3VubG9jaygpOworCiAJcmV0dXJuIHJl
dDsKIH0KIAoraW50IGZiY29uX2dldF9jb24yZmJfbWFwX2lvY3RsKHZvaWQgX191c2VyICphcmdw
KQoreworCXN0cnVjdCBmYl9jb24yZmJtYXAgY29uMmZiOworCisJaWYgKGNvcHlfZnJvbV91c2Vy
KCZjb24yZmIsIGFyZ3AsIHNpemVvZihjb24yZmIpKSkKKwkJcmV0dXJuIC1FRkFVTFQ7CisJaWYg
KGNvbjJmYi5jb25zb2xlIDwgMSB8fCBjb24yZmIuY29uc29sZSA+IE1BWF9OUl9DT05TT0xFUykK
KwkJcmV0dXJuIC1FSU5WQUw7CisKKwljb25zb2xlX2xvY2soKTsKKwljb24yZmIuZnJhbWVidWZm
ZXIgPSBjb24yZmJfbWFwW2NvbjJmYi5jb25zb2xlIC0gMV07CisJY29uc29sZV91bmxvY2soKTsK
KworCXJldHVybiBjb3B5X3RvX3VzZXIoYXJncCwgJmNvbjJmYiwgc2l6ZW9mKGNvbjJmYikpID8g
LUVGQVVMVCA6IDA7Cit9CisKIC8qCiAgKiAgVGhlIGNvbnNvbGUgYHN3aXRjaCcgc3RydWN0dXJl
IGZvciB0aGUgZnJhbWUgYnVmZmVyIGJhc2VkIGNvbnNvbGUKICAqLwpAQCAtMzM3MiwxMCArMzM5
MSw2IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgY29uc3cgZmJfY29uID0gewogCS5jb25fZGVidWdf
bGVhdmUJPSBmYmNvbl9kZWJ1Z19sZWF2ZSwKIH07CiAKLXN0YXRpYyBzdHJ1Y3Qgbm90aWZpZXJf
YmxvY2sgZmJjb25fZXZlbnRfbm90aWZpZXIgPSB7Ci0JLm5vdGlmaWVyX2NhbGwJPSBmYmNvbl9l
dmVudF9ub3RpZnksCi19OwotCiBzdGF0aWMgc3NpemVfdCBzdG9yZV9yb3RhdGUoc3RydWN0IGRl
dmljZSAqZGV2aWNlLAogCQkJICAgIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICphdHRyLCBjb25z
dCBjaGFyICpidWYsCiAJCQkgICAgc2l6ZV90IGNvdW50KQpAQCAtMzY0OCw3ICszNjYzLDYgQEAg
dm9pZCBfX2luaXQgZmJfY29uc29sZV9pbml0KHZvaWQpCiAJaW50IGk7CiAKIAljb25zb2xlX2xv
Y2soKTsKLQlmYl9yZWdpc3Rlcl9jbGllbnQoJmZiY29uX2V2ZW50X25vdGlmaWVyKTsKIAlmYmNv
bl9kZXZpY2UgPSBkZXZpY2VfY3JlYXRlKGZiX2NsYXNzLCBOVUxMLCBNS0RFVigwLCAwKSwgTlVM
TCwKIAkJCQkgICAgICJmYmNvbiIpOwogCkBAIC0zNjg0LDcgKzM2OTgsNiBAQCBzdGF0aWMgdm9p
ZCBfX2V4aXQgZmJjb25fZGVpbml0X2RldmljZSh2b2lkKQogdm9pZCBfX2V4aXQgZmJfY29uc29s
ZV9leGl0KHZvaWQpCiB7CiAJY29uc29sZV9sb2NrKCk7Ci0JZmJfdW5yZWdpc3Rlcl9jbGllbnQo
JmZiY29uX2V2ZW50X25vdGlmaWVyKTsKIAlmYmNvbl9kZWluaXRfZGV2aWNlKCk7CiAJZGV2aWNl
X2Rlc3Ryb3koZmJfY2xhc3MsIE1LREVWKDAsIDApKTsKIAlmYmNvbl9leGl0KCk7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJtZW0uYyBiL2RyaXZlcnMvdmlkZW8vZmJk
ZXYvY29yZS9mYm1lbS5jCmluZGV4IGRkMWE3MDhkZjFhNy4uNjRkZDczMjAyMWQ4IDEwMDY0NAot
LS0gYS9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJtZW0uYworKysgYi9kcml2ZXJzL3ZpZGVv
L2ZiZGV2L2NvcmUvZmJtZW0uYwpAQCAtMTA5MiwxMCArMTA5Miw4IEBAIHN0YXRpYyBsb25nIGRv
X2ZiX2lvY3RsKHN0cnVjdCBmYl9pbmZvICppbmZvLCB1bnNpZ25lZCBpbnQgY21kLAogCXN0cnVj
dCBmYl9vcHMgKmZiOwogCXN0cnVjdCBmYl92YXJfc2NyZWVuaW5mbyB2YXI7CiAJc3RydWN0IGZi
X2ZpeF9zY3JlZW5pbmZvIGZpeDsKLQlzdHJ1Y3QgZmJfY29uMmZibWFwIGNvbjJmYjsKIAlzdHJ1
Y3QgZmJfY21hcCBjbWFwX2Zyb207CiAJc3RydWN0IGZiX2NtYXBfdXNlciBjbWFwOwotCXN0cnVj
dCBmYl9ldmVudCBldmVudDsKIAl2b2lkIF9fdXNlciAqYXJncCA9ICh2b2lkIF9fdXNlciAqKWFy
ZzsKIAlsb25nIHJldCA9IDA7CiAKQEAgLTExNTcsMzggKzExNTUsMTAgQEAgc3RhdGljIGxvbmcg
ZG9fZmJfaW9jdGwoc3RydWN0IGZiX2luZm8gKmluZm8sIHVuc2lnbmVkIGludCBjbWQsCiAJCXJl
dCA9IC1FSU5WQUw7CiAJCWJyZWFrOwogCWNhc2UgRkJJT0dFVF9DT04yRkJNQVA6Ci0JCWlmIChj
b3B5X2Zyb21fdXNlcigmY29uMmZiLCBhcmdwLCBzaXplb2YoY29uMmZiKSkpCi0JCQlyZXR1cm4g
LUVGQVVMVDsKLQkJaWYgKGNvbjJmYi5jb25zb2xlIDwgMSB8fCBjb24yZmIuY29uc29sZSA+IE1B
WF9OUl9DT05TT0xFUykKLQkJCXJldHVybiAtRUlOVkFMOwotCQljb24yZmIuZnJhbWVidWZmZXIg
PSAtMTsKLQkJZXZlbnQuZGF0YSA9ICZjb24yZmI7Ci0JCWxvY2tfZmJfaW5mbyhpbmZvKTsKLQkJ
ZXZlbnQuaW5mbyA9IGluZm87Ci0JCWZiX25vdGlmaWVyX2NhbGxfY2hhaW4oRkJfRVZFTlRfR0VU
X0NPTlNPTEVfTUFQLCAmZXZlbnQpOwotCQl1bmxvY2tfZmJfaW5mbyhpbmZvKTsKLQkJcmV0ID0g
Y29weV90b191c2VyKGFyZ3AsICZjb24yZmIsIHNpemVvZihjb24yZmIpKSA/IC1FRkFVTFQgOiAw
OworCQlyZXQgPSBmYmNvbl9nZXRfY29uMmZiX21hcF9pb2N0bChhcmdwKTsKIAkJYnJlYWs7CiAJ
Y2FzZSBGQklPUFVUX0NPTjJGQk1BUDoKLQkJaWYgKGNvcHlfZnJvbV91c2VyKCZjb24yZmIsIGFy
Z3AsIHNpemVvZihjb24yZmIpKSkKLQkJCXJldHVybiAtRUZBVUxUOwotCQlpZiAoY29uMmZiLmNv
bnNvbGUgPCAxIHx8IGNvbjJmYi5jb25zb2xlID4gTUFYX05SX0NPTlNPTEVTKQotCQkJcmV0dXJu
IC1FSU5WQUw7Ci0JCWlmIChjb24yZmIuZnJhbWVidWZmZXIgPj0gRkJfTUFYKQotCQkJcmV0dXJu
IC1FSU5WQUw7Ci0JCWlmICghcmVnaXN0ZXJlZF9mYltjb24yZmIuZnJhbWVidWZmZXJdKQotCQkJ
cmVxdWVzdF9tb2R1bGUoImZiJWQiLCBjb24yZmIuZnJhbWVidWZmZXIpOwotCQlpZiAoIXJlZ2lz
dGVyZWRfZmJbY29uMmZiLmZyYW1lYnVmZmVyXSkgewotCQkJcmV0ID0gLUVJTlZBTDsKLQkJCWJy
ZWFrOwotCQl9Ci0JCWV2ZW50LmRhdGEgPSAmY29uMmZiOwotCQljb25zb2xlX2xvY2soKTsKLQkJ
bG9ja19mYl9pbmZvKGluZm8pOwotCQlldmVudC5pbmZvID0gaW5mbzsKLQkJcmV0ID0gZmJfbm90
aWZpZXJfY2FsbF9jaGFpbihGQl9FVkVOVF9TRVRfQ09OU09MRV9NQVAsICZldmVudCk7Ci0JCXVu
bG9ja19mYl9pbmZvKGluZm8pOwotCQljb25zb2xlX3VubG9jaygpOworCQlyZXQgPSBmYmNvbl9z
ZXRfY29uMmZiX21hcF9pb2N0bChhcmdwKTsKIAkJYnJlYWs7CiAJY2FzZSBGQklPQkxBTks6CiAJ
CWNvbnNvbGVfbG9jaygpOwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9mYi5oIGIvaW5jbHVk
ZS9saW51eC9mYi5oCmluZGV4IDI1ZTRiODg1ZjViMy4uMzAzNzcxMjY0NjQ0IDEwMDY0NAotLS0g
YS9pbmNsdWRlL2xpbnV4L2ZiLmgKKysrIGIvaW5jbHVkZS9saW51eC9mYi5oCkBAIC0xMzMsMTAg
KzEzMyw2IEBAIHN0cnVjdCBmYl9jdXJzb3JfdXNlciB7CiAjZGVmaW5lIEZCX0VWRU5UX0ZCX1VO
UkVHSVNURVJFRCAgICAgICAgMHgwNgogI2VuZGlmCiAKLS8qICAgICAgQ09OU09MRS1TUEVDSUZJ
QzogZ2V0IGNvbnNvbGUgdG8gZnJhbWVidWZmZXIgbWFwcGluZyAqLwotI2RlZmluZSBGQl9FVkVO
VF9HRVRfQ09OU09MRV9NQVAgICAgICAgIDB4MDcKLS8qICAgICAgQ09OU09MRS1TUEVDSUZJQzog
c2V0IGNvbnNvbGUgdG8gZnJhbWVidWZmZXIgbWFwcGluZyAqLwotI2RlZmluZSBGQl9FVkVOVF9T
RVRfQ09OU09MRV9NQVAgICAgICAgIDB4MDgKIC8qICAgICAgQSBkaXNwbGF5IGJsYW5rIGlzIHJl
cXVlc3RlZCAgICAgICAqLwogI2RlZmluZSBGQl9FVkVOVF9CTEFOSyAgICAgICAgICAgICAgICAg
IDB4MDkKIC8qICAgICAgQSBoYXJkd2FyZSBkaXNwbGF5IGJsYW5rIGVhcmx5IGNoYW5nZSBvY2N1
cnJlZCAqLwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9mYmNvbi5oIGIvaW5jbHVkZS9saW51
eC9mYmNvbi5oCmluZGV4IDY5ZjkwMGQyODliMi4uZmY1NTk2ZGQzMGY4IDEwMDY0NAotLS0gYS9p
bmNsdWRlL2xpbnV4L2ZiY29uLmgKKysrIGIvaW5jbHVkZS9saW51eC9mYmNvbi5oCkBAIC0xNyw2
ICsxNyw4IEBAIHZvaWQgZmJjb25fZ2V0X3JlcXVpcmVtZW50KHN0cnVjdCBmYl9pbmZvICppbmZv
LAogdm9pZCBmYmNvbl9mYl9ibGFua2VkKHN0cnVjdCBmYl9pbmZvICppbmZvLCBpbnQgYmxhbmsp
Owogdm9pZCBmYmNvbl91cGRhdGVfdmNzKHN0cnVjdCBmYl9pbmZvICppbmZvLCBib29sIGFsbCk7
CiB2b2lkIGZiY29uX3JlbWFwX2FsbChzdHJ1Y3QgZmJfaW5mbyAqaW5mbyk7CitpbnQgZmJjb25f
c2V0X2NvbjJmYl9tYXBfaW9jdGwodm9pZCBfX3VzZXIgKmFyZ3ApOworaW50IGZiY29uX2dldF9j
b24yZmJfbWFwX2lvY3RsKHZvaWQgX191c2VyICphcmdwKTsKICNlbHNlCiBzdGF0aWMgaW5saW5l
IHZvaWQgZmJfY29uc29sZV9pbml0KHZvaWQpIHt9CiBzdGF0aWMgaW5saW5lIHZvaWQgZmJfY29u
c29sZV9leGl0KHZvaWQpIHt9CkBAIC0zMyw2ICszNSw4IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBm
YmNvbl9nZXRfcmVxdWlyZW1lbnQoc3RydWN0IGZiX2luZm8gKmluZm8sCiBzdGF0aWMgaW5saW5l
IHZvaWQgZmJjb25fZmJfYmxhbmtlZChzdHJ1Y3QgZmJfaW5mbyAqaW5mbywgaW50IGJsYW5rKSB7
fQogc3RhdGljIGlubGluZSB2b2lkIGZiY29uX3VwZGF0ZV92Y3Moc3RydWN0IGZiX2luZm8gKmlu
Zm8sIGJvb2wgYWxsKSB7fQogc3RhdGljIGlubGluZSB2b2lkIGZiY29uX3JlbWFwX2FsbChzdHJ1
Y3QgZmJfaW5mbyAqaW5mbykge30KK3N0YXRpYyBpbmxpbmUgaW50IGZiY29uX3NldF9jb24yZmJf
bWFwX2lvY3RsKHZvaWQgX191c2VyICphcmdwKSB7IHJldHVybiAwOyB9CitzdGF0aWMgaW5saW5l
IGludCBmYmNvbl9nZXRfY29uMmZiX21hcF9pb2N0bCh2b2lkIF9fdXNlciAqYXJncCkgeyByZXR1
cm4gMDsgfQogI2VuZGlmCiAKICNlbmRpZiAvKiBfTElOVVhfRkJDT05fSCAqLwotLSAKMi4yMC4x
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2
ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
