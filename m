Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D51CF21B1F6
	for <lists+dri-devel@lfdr.de>; Fri, 10 Jul 2020 11:05:47 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DC7E06EBA1;
	Fri, 10 Jul 2020 09:05:44 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from foss.arm.com (foss.arm.com [217.140.110.172])
 by gabe.freedesktop.org (Postfix) with ESMTP id 1F7F36EBA1
 for <dri-devel@lists.freedesktop.org>; Fri, 10 Jul 2020 09:05:44 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 4C4BA31B;
 Fri, 10 Jul 2020 02:05:43 -0700 (PDT)
Received: from [192.168.1.84] (unknown [172.31.20.19])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id C40243F68F;
 Fri, 10 Jul 2020 02:05:41 -0700 (PDT)
Subject: Re: [PATCH v3 08/14] drm/panfrost: move devfreq_init()/fini() in
 device
To: =?UTF-8?B?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>,
 Rob Herring <robh@kernel.org>, Tomeu Vizoso <tomeu.vizoso@collabora.com>,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>,
 Viresh Kumar <vireshk@kernel.org>, Nishanth Menon <nm@ti.com>,
 Stephen Boyd <sboyd@kernel.org>, Maxime Ripard <mripard@kernel.org>,
 Chen-Yu Tsai <wens@csie.org>
References: <20200709140322.131320-1-peron.clem@gmail.com>
 <20200709140322.131320-9-peron.clem@gmail.com>
From: Steven Price <steven.price@arm.com>
Message-ID: <2c8776ae-6342-8932-47c7-bf32b60967ab@arm.com>
Date: Fri, 10 Jul 2020 10:05:40 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.8.0
MIME-Version: 1.0
In-Reply-To: <20200709140322.131320-9-peron.clem@gmail.com>
Content-Language: en-GB
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gMDkvMDcvMjAyMCAxNTowMywgQ2zDqW1lbnQgUMOpcm9uIHdyb3RlOgo+IExhdGVyIHdlIHdp
bGwgaW50cm9kdWNlIGRldmZyZXEgcHJvYmluZyByZWd1bGF0b3IgaWYgdGhleQo+IGFyZSBwcmVz
ZW50LiBBcyByZWd1bGF0b3Igc2hvdWxkIGJlIHByb2JlIG9ubHkgb25lIHRpbWUgd2UKPiBuZWVk
IHRvIGdldCB0aGlzIGxvZ2ljIGluIHRoZSBkZXZpY2VfaW5pdCgpLgo+IAo+IHBhbmZyb3N0X2Rl
dmljZSBpcyBhbHJlYWR5IHRha2luZyBjYXJlIG9mIGRldmZyZXFfcmVzdW1lKCkKPiBhbmQgZGV2
ZnJlcV9zdXNwZW5kKCksIHNvIGl0J3Mgbm90IHRvdGFsbHkgaWxsb2dpYyB0byBtb3ZlCj4gdGhl
IGRldmZyZXFfaW5pdCgpIGFuZCBkZXZmcmVxX2ZpbmkoKSBoZXJlLgo+IAo+IFJldmlld2VkLWJ5
OiBBbHlzc2EgUm9zZW56d2VpZyA8YWx5c3NhLnJvc2VuendlaWdAY29sbGFib3JhLmNvbT4KPiBT
aWduZWQtb2ZmLWJ5OiBDbMOpbWVudCBQw6lyb24gPHBlcm9uLmNsZW1AZ21haWwuY29tPgoKUmV2
aWV3ZWQtYnk6IFN0ZXZlbiBQcmljZSA8c3RldmVuLnByaWNlQGFybS5jb20+Cgo+IC0tLQo+ICAg
ZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5jIHwgMTIgKysrKysrKysr
KystCj4gICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZHJ2LmMgICAgfCAxNSAr
Ky0tLS0tLS0tLS0tLS0KPiAgIDIgZmlsZXMgY2hhbmdlZCwgMTMgaW5zZXJ0aW9ucygrKSwgMTQg
ZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9w
YW5mcm9zdF9kZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZp
Y2UuYwo+IGluZGV4IGNjMTZkMTAyYjI3NS4uNDY0ZGExNjQ2Mzk4IDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2UuYwo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2UuYwo+IEBAIC0yMTIsMTAgKzIxMiwxNyBA
QCBpbnQgcGFuZnJvc3RfZGV2aWNlX2luaXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYp
Cj4gICAJCXJldHVybiBlcnI7Cj4gICAJfQo+ICAgCj4gKwllcnIgPSBwYW5mcm9zdF9kZXZmcmVx
X2luaXQocGZkZXYpOwo+ICsJaWYgKGVycikgewo+ICsJCWlmIChlcnIgIT0gLUVQUk9CRV9ERUZF
UikKPiArCQkJZGV2X2VycihwZmRldi0+ZGV2LCAiZGV2ZnJlcSBpbml0IGZhaWxlZCAlZFxuIiwg
ZXJyKTsKPiArCQlnb3RvIG91dF9jbGs7Cj4gKwl9Cj4gKwo+ICAgCWVyciA9IHBhbmZyb3N0X3Jl
Z3VsYXRvcl9pbml0KHBmZGV2KTsKPiAgIAlpZiAoZXJyKSB7Cj4gICAJCWRldl9lcnIocGZkZXYt
PmRldiwgInJlZ3VsYXRvciBpbml0IGZhaWxlZCAlZFxuIiwgZXJyKTsKPiAtCQlnb3RvIG91dF9j
bGs7Cj4gKwkJZ290byBvdXRfZGV2ZnJlcTsKPiAgIAl9Cj4gICAKPiAgIAllcnIgPSBwYW5mcm9z
dF9yZXNldF9pbml0KHBmZGV2KTsKPiBAQCAtMjY1LDYgKzI3Miw4IEBAIGludCBwYW5mcm9zdF9k
ZXZpY2VfaW5pdChzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldikKPiAgIAlwYW5mcm9zdF9y
ZXNldF9maW5pKHBmZGV2KTsKPiAgIG91dF9yZWd1bGF0b3I6Cj4gICAJcGFuZnJvc3RfcmVndWxh
dG9yX2ZpbmkocGZkZXYpOwo+ICtvdXRfZGV2ZnJlcToKPiArCXBhbmZyb3N0X2RldmZyZXFfZmlu
aShwZmRldik7Cj4gICBvdXRfY2xrOgo+ICAgCXBhbmZyb3N0X2Nsa19maW5pKHBmZGV2KTsKPiAg
IAlyZXR1cm4gZXJyOwo+IEBAIC0yNzgsNiArMjg3LDcgQEAgdm9pZCBwYW5mcm9zdF9kZXZpY2Vf
ZmluaShzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldikKPiAgIAlwYW5mcm9zdF9ncHVfZmlu
aShwZmRldik7Cj4gICAJcGFuZnJvc3RfcG1fZG9tYWluX2ZpbmkocGZkZXYpOwo+ICAgCXBhbmZy
b3N0X3Jlc2V0X2ZpbmkocGZkZXYpOwo+ICsJcGFuZnJvc3RfZGV2ZnJlcV9maW5pKHBmZGV2KTsK
PiAgIAlwYW5mcm9zdF9yZWd1bGF0b3JfZmluaShwZmRldik7Cj4gICAJcGFuZnJvc3RfY2xrX2Zp
bmkocGZkZXYpOwo+ICAgfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3Qv
cGFuZnJvc3RfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZHJ2LmMK
PiBpbmRleCA4ODJmZWNjMzNmZGIuLjRkZGE2ODY4OTAxNSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZHJ2LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
cGFuZnJvc3QvcGFuZnJvc3RfZHJ2LmMKPiBAQCAtMTQsNyArMTQsNiBAQAo+ICAgI2luY2x1ZGUg
PGRybS9kcm1fdXRpbHMuaD4KPiAgIAo+ICAgI2luY2x1ZGUgInBhbmZyb3N0X2RldmljZS5oIgo+
IC0jaW5jbHVkZSAicGFuZnJvc3RfZGV2ZnJlcS5oIgo+ICAgI2luY2x1ZGUgInBhbmZyb3N0X2dl
bS5oIgo+ICAgI2luY2x1ZGUgInBhbmZyb3N0X21tdS5oIgo+ICAgI2luY2x1ZGUgInBhbmZyb3N0
X2pvYi5oIgo+IEBAIC02MDYsMTMgKzYwNSw2IEBAIHN0YXRpYyBpbnQgcGFuZnJvc3RfcHJvYmUo
c3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKPiAgIAkJZ290byBlcnJfb3V0MDsKPiAgIAl9
Cj4gICAKPiAtCWVyciA9IHBhbmZyb3N0X2RldmZyZXFfaW5pdChwZmRldik7Cj4gLQlpZiAoZXJy
KSB7Cj4gLQkJaWYgKGVyciAhPSAtRVBST0JFX0RFRkVSKQo+IC0JCQlkZXZfZXJyKCZwZGV2LT5k
ZXYsICJGYXRhbCBlcnJvciBkdXJpbmcgZGV2ZnJlcSBpbml0XG4iKTsKPiAtCQlnb3RvIGVycl9v
dXQxOwo+IC0JfQo+IC0KPiAgIAlwbV9ydW50aW1lX3NldF9hY3RpdmUocGZkZXYtPmRldik7Cj4g
ICAJcG1fcnVudGltZV9tYXJrX2xhc3RfYnVzeShwZmRldi0+ZGV2KTsKPiAgIAlwbV9ydW50aW1l
X2VuYWJsZShwZmRldi0+ZGV2KTsKPiBAQCAtNjI1LDE2ICs2MTcsMTQgQEAgc3RhdGljIGludCBw
YW5mcm9zdF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQo+ICAgCSAqLwo+ICAg
CWVyciA9IGRybV9kZXZfcmVnaXN0ZXIoZGRldiwgMCk7Cj4gICAJaWYgKGVyciA8IDApCj4gLQkJ
Z290byBlcnJfb3V0MjsKPiArCQlnb3RvIGVycl9vdXQxOwo+ICAgCj4gICAJcGFuZnJvc3RfZ2Vt
X3Nocmlua2VyX2luaXQoZGRldik7Cj4gICAKPiAgIAlyZXR1cm4gMDsKPiAgIAo+IC1lcnJfb3V0
MjoKPiAtCXBtX3J1bnRpbWVfZGlzYWJsZShwZmRldi0+ZGV2KTsKPiAtCXBhbmZyb3N0X2RldmZy
ZXFfZmluaShwZmRldik7Cj4gICBlcnJfb3V0MToKPiArCXBtX3J1bnRpbWVfZGlzYWJsZShwZmRl
di0+ZGV2KTsKPiAgIAlwYW5mcm9zdF9kZXZpY2VfZmluaShwZmRldik7Cj4gICBlcnJfb3V0MDoK
PiAgIAlkcm1fZGV2X3B1dChkZGV2KTsKPiBAQCAtNjUwLDcgKzY0MCw2IEBAIHN0YXRpYyBpbnQg
cGFuZnJvc3RfcmVtb3ZlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gICAJcGFuZnJv
c3RfZ2VtX3Nocmlua2VyX2NsZWFudXAoZGRldik7Cj4gICAKPiAgIAlwbV9ydW50aW1lX2dldF9z
eW5jKHBmZGV2LT5kZXYpOwo+IC0JcGFuZnJvc3RfZGV2ZnJlcV9maW5pKHBmZGV2KTsKPiAgIAlw
YW5mcm9zdF9kZXZpY2VfZmluaShwZmRldik7Cj4gICAJcG1fcnVudGltZV9wdXRfc3luY19zdXNw
ZW5kKHBmZGV2LT5kZXYpOwo+ICAgCXBtX3J1bnRpbWVfZGlzYWJsZShwZmRldi0+ZGV2KTsKPiAK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZl
bCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
