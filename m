Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2B151A4FCD
	for <lists+dri-devel@lfdr.de>; Mon,  2 Sep 2019 09:24:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 29AEA89199;
	Mon,  2 Sep 2019 07:24:36 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B5160890C7;
 Fri, 30 Aug 2019 16:14:56 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 4BB3BAC0C;
 Fri, 30 Aug 2019 16:14:55 +0000 (UTC)
Date: Fri, 30 Aug 2019 18:15:03 +0200
From: Jean Delvare <jdelvare@suse.de>
To: amd-gfx@lists.freedesktop.org, dri-devel@lists.freedesktop.org
Subject: [PATCH 1/3] drm/amd: be quiet when no SAD block is found
Message-ID: <20190830181503.5dd2ed81@endymion>
In-Reply-To: <20190830181423.4f31a28f@endymion>
References: <20190830181423.4f31a28f@endymion>
Organization: SUSE Linux
X-Mailer: Claws Mail 3.17.3 (GTK+ 2.24.32; x86_64-suse-linux-gnu)
MIME-Version: 1.0
X-Mailman-Approved-At: Mon, 02 Sep 2019 07:24:25 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>, David Airlie <airlied@linux.ie>,
 Sean Paul <sean@poorly.run>, Leo Li <sunpeng.li@amd.com>,
 Alex Deucher <alexander.deucher@amd.com>, Christian =?UTF-8?B?S8O2?=
 =?UTF-8?B?bmln?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SXQgaXMgZmluZSBmb3IgZGlzcGxheXMgd2l0aG91dCBhdWRpbyBmdW5jdGlvbmFsaXR5IHRvIG5v
dCBwcm92aWRlCmFueSBTQUQgYmxvY2sgaW4gdGhlaXIgRURJRC4gRG8gbm90IGxvZyBhbiBlcnJv
ciBpbiB0aGF0IGNhc2UsCmp1c3QgcmV0dXJuIHF1aWV0bHkuCgpUaGlzIGZpeGVzIGhhbGYgb2Yg
YnVnIGZkbyMxMDc4MjU6Cmh0dHBzOi8vYnVncy5mcmVlZGVza3RvcC5vcmcvc2hvd19idWcuY2dp
P2lkPTEwNzgyNQoKU2lnbmVkLW9mZi1ieTogSmVhbiBEZWx2YXJlIDxqZGVsdmFyZUBzdXNlLmRl
PgpDYzogQWxleCBEZXVjaGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgpDYzogIkNocmlz
dGlhbiBLw7ZuaWciIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+CkNjOiAiRGF2aWQgKENodW5N
aW5nKSBaaG91IiA8RGF2aWQxLlpob3VAYW1kLmNvbT4KQ2M6IERhdmlkIEFpcmxpZSA8YWlybGll
ZEBsaW51eC5pZT4KQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZndsbC5jaD4KQ2M6IEhhcnJ5
IFdlbnRsYW5kIDxoYXJyeS53ZW50bGFuZEBhbWQuY29tPgpDYzogTGVvIExpIDxzdW5wZW5nLmxp
QGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3YxMF8wLmMgICAg
ICAgICAgICAgICAgICAgIHwgICAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9k
Y2VfdjExXzAuYyAgICAgICAgICAgICAgICAgICAgfCAgICA0ICsrLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2RjZV92Nl8wLmMgICAgICAgICAgICAgICAgICAgICB8ICAgIDQgKystLQog
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3Y4XzAuYyAgICAgICAgICAgICAgICAgICAg
IHwgICAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdw
dV9kbV9oZWxwZXJzLmMgfCAgICA3ICsrKy0tLS0KIDUgZmlsZXMgY2hhbmdlZCwgMTEgaW5zZXJ0
aW9ucygrKSwgMTIgZGVsZXRpb25zKC0pCgotLS0gbGludXgtNS4yLm9yaWcvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvZGNlX3YxMF8wLmMJMjAxOS0wNy0wOCAwMDo0MTo1Ni4wMDAwMDAwMDAg
KzAyMDAKKysrIGxpbnV4LTUuMi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kY2VfdjEwXzAu
YwkyMDE5LTA4LTMwIDE0OjI4OjQ2LjA4MTY4MjIyMyArMDIwMApAQCAtMTM0NSwxMCArMTM0NSwx
MCBAQCBzdGF0aWMgdm9pZCBkY2VfdjEwXzBfYXVkaW9fd3JpdGVfc2FkX3JlCiAJfQogCiAJc2Fk
X2NvdW50ID0gZHJtX2VkaWRfdG9fc2FkKGFtZGdwdV9jb25uZWN0b3JfZWRpZChjb25uZWN0b3Ip
LCAmc2Fkcyk7Ci0JaWYgKHNhZF9jb3VudCA8PSAwKSB7CisJaWYgKHNhZF9jb3VudCA8IDApCiAJ
CURSTV9FUlJPUigiQ291bGRuJ3QgcmVhZCBTQURzOiAlZFxuIiwgc2FkX2NvdW50KTsKKwlpZiAo
c2FkX2NvdW50IDw9IDApCiAJCXJldHVybjsKLQl9CiAJQlVHX09OKCFzYWRzKTsKIAogCWZvciAo
aSA9IDA7IGkgPCBBUlJBWV9TSVpFKGVsZF9yZWdfdG9fdHlwZSk7IGkrKykgewotLS0gbGludXgt
NS4yLm9yaWcvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3YxMV8wLmMJMjAxOS0wNy0w
OCAwMDo0MTo1Ni4wMDAwMDAwMDAgKzAyMDAKKysrIGxpbnV4LTUuMi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9kY2VfdjExXzAuYwkyMDE5LTA4LTMwIDE0OjI5OjI3LjI3NjIwNTMxMCArMDIw
MApAQCAtMTM3MSwxMCArMTM3MSwxMCBAQCBzdGF0aWMgdm9pZCBkY2VfdjExXzBfYXVkaW9fd3Jp
dGVfc2FkX3JlCiAJfQogCiAJc2FkX2NvdW50ID0gZHJtX2VkaWRfdG9fc2FkKGFtZGdwdV9jb25u
ZWN0b3JfZWRpZChjb25uZWN0b3IpLCAmc2Fkcyk7Ci0JaWYgKHNhZF9jb3VudCA8PSAwKSB7CisJ
aWYgKHNhZF9jb3VudCA8IDApCiAJCURSTV9FUlJPUigiQ291bGRuJ3QgcmVhZCBTQURzOiAlZFxu
Iiwgc2FkX2NvdW50KTsKKwlpZiAoc2FkX2NvdW50IDw9IDApCiAJCXJldHVybjsKLQl9CiAJQlVH
X09OKCFzYWRzKTsKIAogCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGVsZF9yZWdfdG9fdHlw
ZSk7IGkrKykgewotLS0gbGludXgtNS4yLm9yaWcvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
ZGNlX3Y2XzAuYwkyMDE5LTA3LTA4IDAwOjQxOjU2LjAwMDAwMDAwMCArMDIwMAorKysgbGludXgt
NS4yL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RjZV92Nl8wLmMJMjAxOS0wOC0zMCAxNzo1
ODo1My42MTM5NTM0NTggKzAyMDAKQEAgLTEyNDgsMTAgKzEyNDgsMTAgQEAgc3RhdGljIHZvaWQg
ZGNlX3Y2XzBfYXVkaW9fd3JpdGVfc2FkX3JlZwogCX0KIAogCXNhZF9jb3VudCA9IGRybV9lZGlk
X3RvX3NhZChhbWRncHVfY29ubmVjdG9yX2VkaWQoY29ubmVjdG9yKSwgJnNhZHMpOwotCWlmIChz
YWRfY291bnQgPD0gMCkgeworCWlmIChzYWRfY291bnQgPCAwKQogCQlEUk1fRVJST1IoIkNvdWxk
bid0IHJlYWQgU0FEczogJWRcbiIsIHNhZF9jb3VudCk7CisJaWYgKHNhZF9jb3VudCA8PSAwKQog
CQlyZXR1cm47Ci0JfQogCiAJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUoZWxkX3JlZ190b190
eXBlKTsgaSsrKSB7CiAJCXUzMiB0bXAgPSAwOwotLS0gbGludXgtNS4yLm9yaWcvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvZGNlX3Y4XzAuYwkyMDE5LTA3LTA4IDAwOjQxOjU2LjAwMDAwMDAw
MCArMDIwMAorKysgbGludXgtNS4yL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RjZV92OF8w
LmMJMjAxOS0wOC0zMCAxNDoyOTowMS45NDg4ODM3MDggKzAyMDAKQEAgLTEyOTgsMTAgKzEyOTgs
MTAgQEAgc3RhdGljIHZvaWQgZGNlX3Y4XzBfYXVkaW9fd3JpdGVfc2FkX3JlZwogCX0KIAogCXNh
ZF9jb3VudCA9IGRybV9lZGlkX3RvX3NhZChhbWRncHVfY29ubmVjdG9yX2VkaWQoY29ubmVjdG9y
KSwgJnNhZHMpOwotCWlmIChzYWRfY291bnQgPD0gMCkgeworCWlmIChzYWRfY291bnQgPCAwKQog
CQlEUk1fRVJST1IoIkNvdWxkbid0IHJlYWQgU0FEczogJWRcbiIsIHNhZF9jb3VudCk7CisJaWYg
KHNhZF9jb3VudCA8PSAwKQogCQlyZXR1cm47Ci0JfQogCUJVR19PTighc2Fkcyk7CiAKIAlmb3Ig
KGkgPSAwOyBpIDwgQVJSQVlfU0laRShlbGRfcmVnX3RvX3R5cGUpOyBpKyspIHsKLS0tIGxpbnV4
LTUuMi5vcmlnL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2Rt
X2hlbHBlcnMuYwkyMDE5LTA3LTA4IDAwOjQxOjU2LjAwMDAwMDAwMCArMDIwMAorKysgbGludXgt
NS4yL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtX2hlbHBl
cnMuYwkyMDE5LTA4LTMwIDE0OjMxOjAzLjA4NjQyMTkxMCArMDIwMApAQCAtOTgsMTEgKzk4LDEw
IEBAIGVudW0gZGNfZWRpZF9zdGF0dXMgZG1faGVscGVyc19wYXJzZV9lZGkKIAkJCShzdHJ1Y3Qg
ZWRpZCAqKSBlZGlkLT5yYXdfZWRpZCk7CiAKIAlzYWRfY291bnQgPSBkcm1fZWRpZF90b19zYWQo
KHN0cnVjdCBlZGlkICopIGVkaWQtPnJhd19lZGlkLCAmc2Fkcyk7Ci0JaWYgKHNhZF9jb3VudCA8
PSAwKSB7Ci0JCURSTV9JTkZPKCJTQURzIGNvdW50IGlzOiAlZCwgZG9uJ3QgbmVlZCB0byByZWFk
IGl0XG4iLAotCQkJCXNhZF9jb3VudCk7CisJaWYgKHNhZF9jb3VudCA8IDApCisJCURSTV9FUlJP
UigiQ291bGRuJ3QgcmVhZCBTQURzOiAlZFxuIiwgc2FkX2NvdW50KTsKKwlpZiAoc2FkX2NvdW50
IDw9IDApCiAJCXJldHVybiByZXN1bHQ7Ci0JfQogCiAJZWRpZF9jYXBzLT5hdWRpb19tb2RlX2Nv
dW50ID0gc2FkX2NvdW50IDwgRENfTUFYX0FVRElPX0RFU0NfQ09VTlQgPyBzYWRfY291bnQgOiBE
Q19NQVhfQVVESU9fREVTQ19DT1VOVDsKIAlmb3IgKGkgPSAwOyBpIDwgZWRpZF9jYXBzLT5hdWRp
b19tb2RlX2NvdW50OyArK2kpIHsKCi0tIApKZWFuIERlbHZhcmUKU1VTRSBMMyBTdXBwb3J0Cl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBt
YWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
