Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 2E8AD421C46
	for <lists+dri-devel@lfdr.de>; Tue,  5 Oct 2021 04:05:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BEB776EB30;
	Tue,  5 Oct 2021 02:05:12 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga18.intel.com (mga18.intel.com [134.134.136.126])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 445F56EB1D;
 Tue,  5 Oct 2021 02:05:11 +0000 (UTC)
X-IronPort-AV: E=McAfee;i="6200,9189,10127"; a="212567426"
X-IronPort-AV: E=Sophos;i="5.85,347,1624345200"; d="scan'208";a="212567426"
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by orsmga106.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 04 Oct 2021 19:05:10 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.85,347,1624345200"; d="scan'208";a="589169253"
Received: from fmsmsx602.amr.corp.intel.com ([10.18.126.82])
 by orsmga004.jf.intel.com with ESMTP; 04 Oct 2021 19:05:09 -0700
Received: from fmsmsx612.amr.corp.intel.com (10.18.126.92) by
 fmsmsx602.amr.corp.intel.com (10.18.126.82) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id
 15.1.2242.12; Mon, 4 Oct 2021 19:05:09 -0700
Received: from fmsmsx602.amr.corp.intel.com (10.18.126.82) by
 fmsmsx612.amr.corp.intel.com (10.18.126.92) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id
 15.1.2242.12; Mon, 4 Oct 2021 19:05:08 -0700
Received: from fmsedg601.ED.cps.intel.com (10.1.192.135) by
 fmsmsx602.amr.corp.intel.com (10.18.126.82) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id
 15.1.2242.12 via Frontend Transport; Mon, 4 Oct 2021 19:05:08 -0700
Received: from NAM11-BN8-obe.outbound.protection.outlook.com (104.47.58.169)
 by edgegateway.intel.com (192.55.55.70) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.1.2242.12; Mon, 4 Oct 2021 19:05:08 -0700
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=fOHqD6bXKcuFU3kgWUxEi0Ix3RxPcAkRJXCMBmuA2D0HwQfmBjxKQmUNGpnzz2y5hYEld9zywbM0PAYRyi4x6bdyTyAUoYjxTIMY4k9HrySYd/DMbKmlUlLag3XCabtztq/Eo+loyEgJkiYgHqm6ekkpizmrC4/p2JCi5gzEtIYO+pP0/os7IY/7lQHfsBysC0m9AnJhmUQb5pSFl8jes+n06QV+rBx5gQrLKsEHay/WPdQNvLAtYdVhD5dVcQ0gHehxbF1/Q1FoegyoODBx5F8rfUMPZd3iKlxcBTpuw0WMkW1GbMZCAQ7plwyqnJbqnVFmW7Th64/4gDz7x4v54g==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=VKm14i8jAfHuXlCi/0MMmIfFUinpbhpbxu/LEUq2XwA=;
 b=a56BJ/PI7atnRBQQ0E2i0HebL2mXvFrREdysGhd9qwyRNj2iXM9VZtV48MchnPFlv1AyQAduNejhAcibj+8yCmXPeVxB3YXx7XFQFgINKKE28fdMspo7G7Av2o8KtuEv9N7fTge6/2hpFH+KCkONpdbmKeJ5Cq2igxljxCHclWdtMi4PnkmOkeY7PSTeZF/1rjcBVQf1EgobAiGvXs8ztaTLIqD0rImDJeoHTjk8QnuAu0CxEo2fv968Y/088faC+cIXfdiF3HKfn4CQsAgAujsHZ6FguzaeIfrJSS1acODIIa36uQyXmUVdEGN00HnRSbaepedRJKV/1y+ZdcxnJA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=intel.com; dmarc=pass action=none header.from=intel.com;
 dkim=pass header.d=intel.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=intel.onmicrosoft.com; 
 s=selector2-intel-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=VKm14i8jAfHuXlCi/0MMmIfFUinpbhpbxu/LEUq2XwA=;
 b=m0YIlSFWEAwjCaEIantrAmIAgSECW8pNYtCYQpZf3pDMYOeTSIFh4cKulemeu+g5/rCw+mB2FlijgtrnzBU7l028TKHzqRG70euNVIVj4vvcZRzicnqSf2U0T0r3jPdmLM33YIBFcorh/D9u5kMHeEDBldhFD4PnolNkwP2HGbo=
Received: from CO6PR11MB5665.namprd11.prod.outlook.com (2603:10b6:5:354::24)
 by CO6PR11MB5601.namprd11.prod.outlook.com (2603:10b6:303:13d::7) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.4566.13; Tue, 5 Oct
 2021 02:05:03 +0000
Received: from CO6PR11MB5665.namprd11.prod.outlook.com
 ([fe80::2c89:ed01:24f7:5311]) by CO6PR11MB5665.namprd11.prod.outlook.com
 ([fe80::2c89:ed01:24f7:5311%5]) with mapi id 15.20.4566.022; Tue, 5 Oct 2021
 02:05:03 +0000
From: "Zeng, Oak" <oak.zeng@intel.com>
To: "Auld, Matthew" <matthew.auld@intel.com>,
 "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>
CC: "dri-devel@lists.freedesktop.org" <dri-devel@lists.freedesktop.org>,
 =?utf-8?B?VGhvbWFzIEhlbGxzdHLDtm0=?= <thomas.hellstrom@linux.intel.com>,
 =?utf-8?B?Q2hyaXN0aWFuIEvDtm5pZw==?= <christian.koenig@amd.com>
Subject: RE: [Intel-gfx] [PATCH v5 09/13] drm/i915/ttm: add tt shmem backend
Thread-Topic: [Intel-gfx] [PATCH v5 09/13] drm/i915/ttm: add tt shmem backend
Thread-Index: AQHXs5TrxGbjplNjUkOhk+Up46y92KvDrvIA
Date: Tue, 5 Oct 2021 02:05:03 +0000
Message-ID: <CO6PR11MB56656C7E2B63C88AB6A40FE392AF9@CO6PR11MB5665.namprd11.prod.outlook.com>
References: <20210927114114.152310-1-matthew.auld@intel.com>
 <20210927114114.152310-9-matthew.auld@intel.com>
In-Reply-To: <20210927114114.152310-9-matthew.auld@intel.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
dlp-product: dlpe-windows
dlp-version: 11.6.200.16
dlp-reaction: no-action
authentication-results: intel.com; dkim=none (message not signed)
 header.d=none;intel.com; dmarc=none action=none header.from=intel.com;
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 6679f150-ebc8-41d3-ad0c-08d987a48bb1
x-ms-traffictypediagnostic: CO6PR11MB5601:
x-ld-processed: 46c98d88-e344-4ed4-8496-4ed7712e255d,ExtAddr
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <CO6PR11MB5601A8FBE98C9CE73EFDAC3D92AF9@CO6PR11MB5601.namprd11.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:5797;
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: bLtNnptYWA9p+jcoblvCt3xI76wDNki7x6C6oUx4kALeCsrXDWRNU7EqAimYJeKDZadH6z1irT1NbW2sP30pGLluaBf2NgwbWwJVndqlIQh668DmOeFuZdodgD1AQm/wvOHJ0ILdgoemlfmPp8nTMhImcaaX66FN/42BVPURsuB5+dDcRBaQX20gDr8BIdk6AuealI4sPrQp0HsXdWdRbHRRQ7HhzUCv3hOJAtlnnjh5drxkXH9dj2KU1GCKfaCfXNAlcHp77uHs/1j9gMZylMLYbnHSRym2BGiJ6Sl1v4CFrWjsPBztxEFCr1LfmPEAs1tJtu6ekssGOuaG4UKCe/g0ShgZuHmcKEinaHnK8Z1MxqHxLymPxIzaTpC4vco1iHVv3wqBYf5mLE29dP3JRbaj2Eennf87M9oId6oppdCoI4aw+/aO2e87X53bMnn7Uhv9YcaCrT6GSJ1jbVy02Rtu5ARwI/V18pbyjX1LKLVhGiH+YeFRSm/90zOlF+0XwX4wQDKFEovLb7I+Kmbi7ZiXvZDcupZaK3oL4UihvRVaZDAz/Imo6EAgXNCHpfKo1lQPS/lAt+3eB/r3Zqvyv8S9e8Lew2avT4WPqT50nLKPT9UDXUB8Qvrrtt+QRw6kOL1cUowafcUrRxSoHH1Ij+uWFQaR3C6czswCQkq5Rd7yGTSlDHZ946QMP6rE2kv07LCf3/KiqYrJBKjGM5dKJKyJjbLlpXdoPhgGNWT3EMQOT5UPgp9qI9P+ceUhmmfjNVlj+LvJmi/3xlgtZZTlCEoLfXP021R5nKmREU7ftpA=
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:CO6PR11MB5665.namprd11.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(366004)(6506007)(83380400001)(66574015)(122000001)(8936002)(8676002)(38070700005)(2906002)(38100700002)(33656002)(53546011)(66476007)(66556008)(66946007)(76116006)(9686003)(55016002)(7696005)(66446008)(4326008)(64756008)(508600001)(110136005)(26005)(86362001)(71200400001)(30864003)(966005)(316002)(54906003)(52536014)(5660300002)(186003)(579004);
 DIR:OUT; SFP:1102; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?RkhFVUgrNkRQWnB1YkxwalVoN1lIcWtPejdhWXBFNEYxVnYwTllMSW5DNnYz?=
 =?utf-8?B?Z1lDMlhZOEJkQXNFNUVHQ09HU1RKWURXN1NwbmpiVWJGUGQ3bXIzYkwyUnRU?=
 =?utf-8?B?Ni9KVmx2a29za0pxSWlCVWZtelQ0L09FSDB3RUdlSlZNRU9manZydkFNcHlP?=
 =?utf-8?B?UzROU0kwRU5iSDlZckJleGFRTXdtSUpDOUhSUWNHR0FKK1c4N1FUWGpEeWxu?=
 =?utf-8?B?K1ZrbGhkQXRnOHpiSHdzQVBGQ0hzTWkyWVVJZ241eXkxMzVpSkZ4L3FUV3BE?=
 =?utf-8?B?ZmxjbXhkTG03VjlVQnh0WjVJNmFVY1piUGduZ3VLbkcrcTFwQW1DNTRTM2FV?=
 =?utf-8?B?WEdoZXNHcUphV0VvbUVNZitxNFZzZnFiQzlkQjNKZWNCaTFiOVNPbk9FLzlE?=
 =?utf-8?B?a1ZsT2RNcXBEa0F4cWk1Z1R6U3l1blVpREkwb25HU3l1MngzMEptQ0gvZ1J4?=
 =?utf-8?B?eDRoMTByWGtKWjBiQVdZMDNOQkt1MUhpUk40M3VSQlhTdWZsMlpBd2h4eUFz?=
 =?utf-8?B?YjNuQk5ZRUZqaEEwZkNqMmh2ZVlMMW5KNDVXWjFDT2ZCWlBTQUw0N2l5ZzZx?=
 =?utf-8?B?LysyOEEvQWZJZnEwaHJFa1BtVUxsYlduYVhBT1YzZkR0Z0s4VmJ6QWNkUHpZ?=
 =?utf-8?B?cHNYYTRIM0NTTk9lQzlmdFRtbWkxclkvWXR6ekxnSDUzUXF1Y3ZVcDRtcEEv?=
 =?utf-8?B?UDdoTjFOUXZkNk40aDZTbUhuYWFmNmpYNUxWOTAxQ0VzUFhsVk5YV2lwREc4?=
 =?utf-8?B?eXViblNMV3hSZUxhT2VDY0IzT2MzQlhBcEcxaU51U0NqMVdhOE1hOHFZWW9j?=
 =?utf-8?B?SmQ2VERjLzlsQ1RLdFVJbHJYRGFxWjkyU2RSbnY5anI5S0FMTFhOeEFYOEZN?=
 =?utf-8?B?ZEF2VjRPS1U3THFEM29TT0RvWDBsNjdYbUgreEIrYXFXc0x5Wll0d1NKWGUw?=
 =?utf-8?B?Rk9FNEQ1c2NUWDdLSXJxZ2tyUjVaTWRZbXhzeFZpeWxiN3JkUFF4WGp3VXpx?=
 =?utf-8?B?dEhwVWN2UHJUTVR0SWhJaVdtV1RZMTBxWEtZaHB1NDAybHoxcGJqRTF0MDFH?=
 =?utf-8?B?KzNENTZmcm8waFZoU1pZVWJJTjlYRTQ1ejI0a3JscGJZUWE1RFFTZzBuZjUx?=
 =?utf-8?B?MVI0T2FkWVZQR0YzOHRQQmVsRFJkWjBuS285cW1KWmh6TDhBY0tra2VTN2pn?=
 =?utf-8?B?SVVnMlhGR0hJQmt3bER2S3JCQkh4UmRZUElTbXZsaHlpcElFQjJnRWlrREpI?=
 =?utf-8?B?eDJyRDl6Z0VsOUdCcTMwMmFRSUhsVFNKN0laRHgyUVk5cWtVbGZLWWczZ1dl?=
 =?utf-8?B?clQ4RzFMb1NIUXlkQklkbWc4NU5oVytCMkFlMjl6all4N0lEeWdtMDllaDBU?=
 =?utf-8?B?NkwyWFlhQTdwcXNMendreS9QV3dBUE1ydVhLOWI1dEwydS91UC9sWEUraDEv?=
 =?utf-8?B?U0RRVnZRZzZLUTI2WnFmQUJLWkQ2UU9WbTk2Y3B3bE1NYWx6cGFpK3lmeHN2?=
 =?utf-8?B?Vm54UHRJeWRjVlF0dHhqRHNSSWZHS25ISFZxTzB6Ni9XeUE4QnNEak9keWNW?=
 =?utf-8?B?VVVxdGV1c3lXeGhtYTllNlZDeFcydWY0VGJGTGtsU3d1SGJzZm1oekVLcHdv?=
 =?utf-8?B?L0tHbEhGeXA2RXlmYUpXbVorQ2U0OVg4VzZBYU9LSVFzS1E5dlhYSnN1UDA1?=
 =?utf-8?B?cWRidW9XQmtUNW5DbVlNYUVQSVp5a2EvUDhjd1dYaVYzWWtVSHAyY2wrbktP?=
 =?utf-8?Q?thNMCq3cn/HvrtKFnU6OVYRppPCmMpnqyQmibwk?=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: CO6PR11MB5665.namprd11.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 6679f150-ebc8-41d3-ad0c-08d987a48bb1
X-MS-Exchange-CrossTenant-originalarrivaltime: 05 Oct 2021 02:05:03.6086 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 46c98d88-e344-4ed4-8496-4ed7712e255d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: G2wwPHc+YerWvURpaWI86UGl1OkeJXbN5HrfXUnS6wtohzl6ehBZbvMC4BIPIdjWjyCj0y/IJZTZGSi5SoRyPw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: CO6PR11MB5601
X-OriginatorOrg: intel.com
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgTWF0dGhldy9UaG9tYXMsDQoNClNlZSBvbmUgcXVlc3Rpb24gaW5saW5lDQoNClJlZ2FyZHMs
DQpPYWsNCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IEludGVsLWdmeCA8aW50
ZWwtZ2Z4LWJvdW5jZXNAbGlzdHMuZnJlZWRlc2t0b3Aub3JnPiBPbiBCZWhhbGYgT2YgTWF0dGhl
dyBBdWxkDQpTZW50OiBTZXB0ZW1iZXIgMjcsIDIwMjEgNzo0MSBBTQ0KVG86IGludGVsLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcNCkNjOiBkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
OyBUaG9tYXMgSGVsbHN0csO2bSA8dGhvbWFzLmhlbGxzdHJvbUBsaW51eC5pbnRlbC5jb20+OyBD
aHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+DQpTdWJqZWN0OiBbSW50
ZWwtZ2Z4XSBbUEFUQ0ggdjUgMDkvMTNdIGRybS9pOTE1L3R0bTogYWRkIHR0IHNobWVtIGJhY2tl
bmQNCg0KRm9yIGNhY2hlZCBvYmplY3RzIHdlIGNhbiBhbGxvY2F0ZSBvdXIgcGFnZXMgZGlyZWN0
bHkgaW4gc2htZW0uIFRoaXMgc2hvdWxkIG1ha2UgaXQgcG9zc2libGUoaW4gYSBsYXRlciBwYXRj
aCkgdG8gdXRpbGlzZSB0aGUgZXhpc3RpbmcgaTkxNS1nZW0gc2hyaW5rZXIgY29kZSBmb3Igc3Vj
aCBvYmplY3RzLiBGb3Igbm93IHRoaXMgaXMgc3RpbGwgZGlzYWJsZWQuDQoNCnYyKFRob21hcyk6
DQogIC0gQWRkIG9wdGlvbmFsIHRyeV90b193cml0ZWJhY2sgaG9vayBmb3Igb2JqZWN0cy4gSW1w
b3J0YW50bHkgd2UgbmVlZA0KICAgIHRvIGNoZWNrIGlmIHRoZSBvYmplY3QgaXMgZXZlbiBzdGls
bCBzaHJpbmthYmxlOyBpbiBiZXR3ZWVuIHVzDQogICAgZHJvcHBpbmcgdGhlIHNocmlua2VyIExS
VSBsb2NrIGFuZCBhY3F1aXJpbmcgdGhlIG9iamVjdCBsb2NrIGl0IGNvdWxkIGZvcg0KICAgIGV4
YW1wbGUgaGF2ZSBiZWVuIG1vdmVkLiBBbHNvIHdlIG5lZWQgdG8gZGlmZmVyZW50aWF0ZSBiZXR3
ZWVuDQogICAgImxhenkiIHNocmlua2luZyBhbmQgdGhlIGltbWVkaWF0ZSB3cml0ZWJhY2sgbW9k
ZS4gQWxzbyBsYXRlciB3ZSBuZWVkIHRvDQogICAgaGFuZGxlIG9iamVjdHMgd2hpY2ggZG9uJ3Qg
ZXZlbiBoYXZlIG1tLnBhZ2VzLCBzbyBidW5kbGluZyB0aGlzIGludG8NCiAgICBwdXRfcGFnZXMo
KSB3b3VsZCByZXF1aXJlIHNvbWVob3cgaGFuZGxpbmcgdGhhdCBlZGdlIGNhc2UsIGhlbmNlDQog
ICAganVzdCBsZXR0aW5nIHRoZSB0dG0gYmFja2VuZCBoYW5kbGUgZXZlcnl0aGluZyBpbiB0cnlf
dG9fd3JpdGViYWNrDQogICAgZG9lc24ndCBzZWVtIHRvbyBiYWQuDQp2MyhUaG9tYXMpOg0KICAt
IExpa2VseSBhIGJhZCBpZGVhIHRvIHRvdWNoIHRoZSBvYmplY3QgZnJvbSB0aGUgdW5wb3B1bGF0
ZSBob29rLA0KICAgIHNpbmNlIGl0J3Mgbm90IHBvc3NpYmxlIHRvIGhvbGQgYSByZWZlcmVuY2Us
IHdpdGhvdXQgYWxzbyBjcmVhdGluZw0KICAgIGNpcmN1bGFyIGRlcGVuZGVuY3ksIHNvIGxpa2Vs
eSB0aGlzIGlzIHRvbyBmcmFnaWxlLiBGb3Igbm93IGp1c3QNCiAgICBlbnN1cmUgd2UgYXQgbGVh
c3QgbWFyayB0aGUgcGFnZXMgYXMgZGlydHkvYWNjZXNzZWQgd2hlbiBjYWxsZWQgZnJvbSB0aGUN
CiAgICBzaHJpbmtlciBvbiBXSUxMTkVFRCBvYmplY3RzLg0KICAtIHMvdHJ5X3RvX3dyaXRlYmFj
ay9zaHJpbmtlcl9yZWxlYXNlX3BhZ2VzLCBzaW5jZSB0aGlzIGNhbiBkbyBtb3JlDQogICAgdGhh
biBqdXN0IHdyaXRlYmFjay4NCiAgLSBHZXQgcmlkIG9mIGRvX2JhY2t1cCBib29sZWFuIGFuZCBq
dXN0IHNldCB0aGUgU1dBUFBFRCBmbGFnIHByaW9yIHRvDQogICAgY2FsbGluZyB1bnBvcHVsYXRl
Lg0KICAtIEtlZXAgc2htZW1fdHQgYXMgbG93ZXN0IHByaW9yaXR5IGZvciB0aGUgVFRNIExSVSBi
b19zd2Fwb3V0IHdhbGssIHNpbmNlDQogICAgdGhlc2UganVzdCBnZXQgc2tpcHBlZCBhbnl3YXku
IFdlIGNhbiB0cnkgdG8gY29tZSB1cCB3aXRoIHNvbWV0aGluZw0KICAgIGJldHRlciBsYXRlci4N
Cg0KU2lnbmVkLW9mZi1ieTogTWF0dGhldyBBdWxkIDxtYXR0aGV3LmF1bGRAaW50ZWwuY29tPg0K
Q2M6IFRob21hcyBIZWxsc3Ryw7ZtIDx0aG9tYXMuaGVsbHN0cm9tQGxpbnV4LmludGVsLmNvbT4N
CkNjOiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+DQotLS0NCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmggICAgfCAgIDggKw0KIC4u
Li9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oICB8ICAgMiArDQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3NobWVtLmMgICAgIHwgIDE0ICstDQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3Nocmlua2VyLmMgIHwgIDE3ICstDQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3R0bS5jICAgICAgIHwgMjQwICsrKysrKysr
KysrKysrKystLQ0KIDUgZmlsZXMgY2hhbmdlZCwgMjQ1IGluc2VydGlvbnMoKyksIDM2IGRlbGV0
aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X29iamVjdC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oDQpp
bmRleCAzMDQzZmNiZDMxYmQuLjFjOWExZDhkMzQzNCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaA0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oDQpAQCAtNjAxLDYgKzYwMSwxNCBAQCBpbnQgaTkxNV9n
ZW1fb2JqZWN0X3dhaXRfbWlncmF0aW9uKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmos
ICBib29sIGk5MTVfZ2VtX29iamVjdF9wbGFjZW1lbnRfcG9zc2libGUoc3RydWN0IGRybV9pOTE1
X2dlbV9vYmplY3QgKm9iaiwNCiAJCQkJCWVudW0gaW50ZWxfbWVtb3J5X3R5cGUgdHlwZSk7DQog
DQorc3RydWN0IHNnX3RhYmxlICpzaG1lbV9hbGxvY19zdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSwNCisJCQkJc2l6ZV90IHNpemUsIHN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICpt
ciwNCisJCQkJc3RydWN0IGFkZHJlc3Nfc3BhY2UgKm1hcHBpbmcsDQorCQkJCXVuc2lnbmVkIGlu
dCBtYXhfc2VnbWVudCk7DQordm9pZCBzaG1lbV9mcmVlX3N0KHN0cnVjdCBzZ190YWJsZSAqc3Qs
IHN0cnVjdCBhZGRyZXNzX3NwYWNlICptYXBwaW5nLA0KKwkJICAgYm9vbCBkaXJ0eSwgYm9vbCBi
YWNrdXApOw0KK3ZvaWQgX19zaG1lbV93cml0ZWJhY2soc2l6ZV90IHNpemUsIHN0cnVjdCBhZGRy
ZXNzX3NwYWNlICptYXBwaW5nKTsNCisNCiAjaWZkZWYgQ09ORklHX01NVV9OT1RJRklFUg0KIHN0
YXRpYyBpbmxpbmUgYm9vbA0KIGk5MTVfZ2VtX29iamVjdF9pc191c2VycHRyKHN0cnVjdCBkcm1f
aTkxNV9nZW1fb2JqZWN0ICpvYmopIGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fb2JqZWN0X3R5cGVzLmgNCmluZGV4IGZhMmJhOWUyYTRkMC4uZjBmYjE3YmUyZjdhIDEw
MDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBl
cy5oDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVz
LmgNCkBAIC01Niw2ICs1Niw4IEBAIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0X29wcyB7DQog
CQkJICBzdHJ1Y3Qgc2dfdGFibGUgKnBhZ2VzKTsNCiAJdm9pZCAoKnRydW5jYXRlKShzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsNCiAJdm9pZCAoKndyaXRlYmFjaykoc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iaik7DQorCWludCAoKnNocmlua2VyX3JlbGVhc2VfcGFnZXMp
KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosDQorCQkJCSAgICAgIGJvb2wgc2hvdWxk
X3dyaXRlYmFjayk7DQogDQogCWludCAoKnByZWFkKShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqLA0KIAkJICAgICBjb25zdCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX3ByZWFkICphcmcpOyBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3NobWVtLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fc2htZW0uYw0KaW5kZXggMzZiNzExYWU5
ZTI4Li4xOWU1NWNjMjlhMTUgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fc2htZW0uYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X3NobWVtLmMNCkBAIC0yNSw4ICsyNSw4IEBAIHN0YXRpYyB2b2lkIGNoZWNrX3JlbGVhc2VfcGFn
ZXZlYyhzdHJ1Y3QgcGFnZXZlYyAqcHZlYykNCiAJY29uZF9yZXNjaGVkKCk7DQogfQ0KIA0KLXN0
YXRpYyB2b2lkIHNobWVtX2ZyZWVfc3Qoc3RydWN0IHNnX3RhYmxlICpzdCwgc3RydWN0IGFkZHJl
c3Nfc3BhY2UgKm1hcHBpbmcsDQotCQkJICBib29sIGRpcnR5LCBib29sIGJhY2t1cCkNCit2b2lk
IHNobWVtX2ZyZWVfc3Qoc3RydWN0IHNnX3RhYmxlICpzdCwgc3RydWN0IGFkZHJlc3Nfc3BhY2Ug
Km1hcHBpbmcsDQorCQkgICBib29sIGRpcnR5LCBib29sIGJhY2t1cCkNCiB7DQogCXN0cnVjdCBz
Z3RfaXRlciBzZ3RfaXRlcjsNCiAJc3RydWN0IHBhZ2V2ZWMgcHZlYzsNCkBAIC01MiwxMCArNTIs
MTAgQEAgc3RhdGljIHZvaWQgc2htZW1fZnJlZV9zdChzdHJ1Y3Qgc2dfdGFibGUgKnN0LCBzdHJ1
Y3QgYWRkcmVzc19zcGFjZSAqbWFwcGluZywNCiAJa2ZyZWUoc3QpOw0KIH0NCiANCi1zdGF0aWMg
c3RydWN0IHNnX3RhYmxlICpzaG1lbV9hbGxvY19zdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSwNCi0JCQkJICAgICAgIHNpemVfdCBzaXplLCBzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lv
biAqbXIsDQotCQkJCSAgICAgICBzdHJ1Y3QgYWRkcmVzc19zcGFjZSAqbWFwcGluZywNCi0JCQkJ
ICAgICAgIHVuc2lnbmVkIGludCBtYXhfc2VnbWVudCkNCitzdHJ1Y3Qgc2dfdGFibGUgKnNobWVt
X2FsbG9jX3N0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LA0KKwkJCQlzaXplX3Qgc2l6
ZSwgc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1yLA0KKwkJCQlzdHJ1Y3QgYWRkcmVzc19z
cGFjZSAqbWFwcGluZywNCisJCQkJdW5zaWduZWQgaW50IG1heF9zZWdtZW50KQ0KIHsNCiAJY29u
c3QgdW5zaWduZWQgbG9uZyBwYWdlX2NvdW50ID0gc2l6ZSAvIFBBR0VfU0laRTsNCiAJdW5zaWdu
ZWQgbG9uZyBpOw0KQEAgLTMwMCw3ICszMDAsNyBAQCBzaG1lbV90cnVuY2F0ZShzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX29iamVjdCAqb2JqKQ0KIAlvYmotPm1tLnBhZ2VzID0gRVJSX1BUUigtRUZBVUxU
KTsNCiB9DQogDQotc3RhdGljIHZvaWQgX19zaG1lbV93cml0ZWJhY2soc2l6ZV90IHNpemUsIHN0
cnVjdCBhZGRyZXNzX3NwYWNlICptYXBwaW5nKQ0KK3ZvaWQgX19zaG1lbV93cml0ZWJhY2soc2l6
ZV90IHNpemUsIHN0cnVjdCBhZGRyZXNzX3NwYWNlICptYXBwaW5nKQ0KIHsNCiAJc3RydWN0IHdy
aXRlYmFja19jb250cm9sIHdiYyA9IHsNCiAJCS5zeW5jX21vZGUgPSBXQl9TWU5DX05PTkUsDQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3Nocmlua2VyLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fc2hyaW5rZXIuYw0KaW5kZXggZTM4
MmI3ZjIzNTNiLi5jYzgwYmQyM2QzMjMgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fc2hyaW5rZXIuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX3Nocmlua2VyLmMNCkBAIC01NiwxOSArNTYsMjQgQEAgc3RhdGljIGJvb2wgdW5z
YWZlX2Ryb3BfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwNCiAJcmV0dXJu
IGZhbHNlOw0KIH0NCiANCi1zdGF0aWMgdm9pZCB0cnlfdG9fd3JpdGViYWNrKHN0cnVjdCBkcm1f
aTkxNV9nZW1fb2JqZWN0ICpvYmosDQotCQkJICAgICB1bnNpZ25lZCBpbnQgZmxhZ3MpDQorc3Rh
dGljIGludCB0cnlfdG9fd3JpdGViYWNrKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmos
IHVuc2lnbmVkIA0KK2ludCBmbGFncykNCiB7DQorCWlmIChvYmotPm9wcy0+c2hyaW5rZXJfcmVs
ZWFzZV9wYWdlcykNCisJCXJldHVybiBvYmotPm9wcy0+c2hyaW5rZXJfcmVsZWFzZV9wYWdlcyhv
YmosDQorCQkJCQkJCWZsYWdzICYgSTkxNV9TSFJJTktfV1JJVEVCQUNLKTsNCisNCiAJc3dpdGNo
IChvYmotPm1tLm1hZHYpIHsNCiAJY2FzZSBJOTE1X01BRFZfRE9OVE5FRUQ6DQogCQlpOTE1X2dl
bV9vYmplY3RfdHJ1bmNhdGUob2JqKTsNCi0JCXJldHVybjsNCisJCXJldHVybiAwOw0KIAljYXNl
IF9fSTkxNV9NQURWX1BVUkdFRDoNCi0JCXJldHVybjsNCisJCXJldHVybiAwOw0KIAl9DQogDQog
CWlmIChmbGFncyAmIEk5MTVfU0hSSU5LX1dSSVRFQkFDSykNCiAJCWk5MTVfZ2VtX29iamVjdF93
cml0ZWJhY2sob2JqKTsNCisNCisJcmV0dXJuIDA7DQogfQ0KIA0KIC8qKg0KQEAgLTIyMiw4ICsy
MjcsOCBAQCBpOTE1X2dlbV9zaHJpbmsoc3RydWN0IGk5MTVfZ2VtX3d3X2N0eCAqd3csDQogCQkJ
CX0NCiANCiAJCQkJaWYgKCFfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqKSkgew0KLQkJ
CQkJdHJ5X3RvX3dyaXRlYmFjayhvYmosIHNocmluayk7DQotCQkJCQljb3VudCArPSBvYmotPmJh
c2Uuc2l6ZSA+PiBQQUdFX1NISUZUOw0KKwkJCQkJaWYgKCF0cnlfdG9fd3JpdGViYWNrKG9iaiwg
c2hyaW5rKSkNCisJCQkJCQljb3VudCArPSBvYmotPmJhc2Uuc2l6ZSA+PiBQQUdFX1NISUZUOw0K
IAkJCQl9DQogCQkJCWlmICghd3cpDQogCQkJCQlpOTE1X2dlbV9vYmplY3RfdW5sb2NrKG9iaik7
DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3R0bS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3R0bS5jDQppbmRleCBhNzdlOTBmMzAw
ZmUuLmM3NDAyOTk1YThmOSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV90dG0uYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3R0
bS5jDQpAQCAtMzUsNiArMzUsOCBAQA0KICAqIEB0dG06IFRoZSBiYXNlIFRUTSBwYWdlIHZlY3Rv
ci4NCiAgKiBAZGV2OiBUaGUgc3RydWN0IGRldmljZSB1c2VkIGZvciBkbWEgbWFwcGluZyBhbmQg
dW5tYXBwaW5nLg0KICAqIEBjYWNoZWRfc3Q6IFRoZSBjYWNoZWQgc2NhdHRlci1nYXRoZXIgdGFi
bGUuDQorICogQGlzX3NobWVtOiBTZXQgaWYgdXNpbmcgc2htZW0uDQorICogQGZpbHA6IFRoZSBz
aG1lbSBmaWxlLCBpZiB1c2luZyBzaG1lbSBiYWNrZW5kLg0KICAqDQogICogTm90ZSB0aGF0IERN
QSBtYXkgYmUgZ29pbmcgb24gcmlnaHQgdXAgdG8gdGhlIHBvaW50IHdoZXJlIHRoZSBwYWdlLQ0K
ICAqIHZlY3RvciBpcyB1bnBvcHVsYXRlZCBpbiBkZWxheWVkIGRlc3Ryb3kuIEhlbmNlIGtlZXAg
dGhlIEBAIC00Niw2ICs0OCw5IEBAIHN0cnVjdCBpOTE1X3R0bV90dCB7DQogCXN0cnVjdCB0dG1f
dHQgdHRtOw0KIAlzdHJ1Y3QgZGV2aWNlICpkZXY7DQogCXN0cnVjdCBzZ190YWJsZSAqY2FjaGVk
X3N0Ow0KKw0KKwlib29sIGlzX3NobWVtOw0KKwlzdHJ1Y3QgZmlsZSAqZmlscDsNCiB9Ow0KIA0K
IHN0YXRpYyBjb25zdCBzdHJ1Y3QgdHRtX3BsYWNlIHN5c19wbGFjZW1lbnRfZmxhZ3MgPSB7IEBA
IC0xNzksMTIgKzE4NCw5MCBAQCBpOTE1X3R0bV9wbGFjZW1lbnRfZnJvbV9vYmooY29uc3Qgc3Ry
dWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwNCiAJcGxhY2VtZW50LT5idXN5X3BsYWNlbWVu
dCA9IGJ1c3k7DQogfQ0KIA0KK3N0YXRpYyBpbnQgaTkxNV90dG1fdHRfc2htZW1fcG9wdWxhdGUo
c3RydWN0IHR0bV9kZXZpY2UgKmJkZXYsDQorCQkJCSAgICAgIHN0cnVjdCB0dG1fdHQgKnR0bSwN
CisJCQkJICAgICAgc3RydWN0IHR0bV9vcGVyYXRpb25fY3R4ICpjdHgpIHsNCisJc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBjb250YWluZXJfb2YoYmRldiwgdHlwZW9mKCppOTE1KSwg
YmRldik7DQorCXN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICptciA9IGk5MTUtPm1tLnJlZ2lv
bnNbSU5URUxfTUVNT1JZX1NZU1RFTV07DQorCXN0cnVjdCBpOTE1X3R0bV90dCAqaTkxNV90dCA9
IGNvbnRhaW5lcl9vZih0dG0sIHR5cGVvZigqaTkxNV90dCksIHR0bSk7DQorCWNvbnN0IHVuc2ln
bmVkIGludCBtYXhfc2VnbWVudCA9IGk5MTVfc2dfc2VnbWVudF9zaXplKCk7DQorCWNvbnN0IHNp
emVfdCBzaXplID0gdHRtLT5udW1fcGFnZXMgPDwgUEFHRV9TSElGVDsNCisJc3RydWN0IGZpbGUg
KmZpbHAgPSBpOTE1X3R0LT5maWxwOw0KKwlzdHJ1Y3Qgc2d0X2l0ZXIgc2d0X2l0ZXI7DQorCXN0
cnVjdCBzZ190YWJsZSAqc3Q7DQorCXN0cnVjdCBwYWdlICpwYWdlOw0KKwl1bnNpZ25lZCBsb25n
IGk7DQorCWludCBlcnI7DQorDQorCWlmICghZmlscCkgew0KKwkJc3RydWN0IGFkZHJlc3Nfc3Bh
Y2UgKm1hcHBpbmc7DQorCQlnZnBfdCBtYXNrOw0KKw0KKwkJZmlscCA9IHNobWVtX2ZpbGVfc2V0
dXAoImk5MTUtc2htZW0tdHQiLCBzaXplLCBWTV9OT1JFU0VSVkUpOw0KKwkJaWYgKElTX0VSUihm
aWxwKSkNCisJCQlyZXR1cm4gUFRSX0VSUihmaWxwKTsNCisNCisJCW1hc2sgPSBHRlBfSElHSFVT
RVIgfCBfX0dGUF9SRUNMQUlNQUJMRTsNCisNCisJCW1hcHBpbmcgPSBmaWxwLT5mX21hcHBpbmc7
DQorCQltYXBwaW5nX3NldF9nZnBfbWFzayhtYXBwaW5nLCBtYXNrKTsNCisJCUdFTV9CVUdfT04o
IShtYXBwaW5nX2dmcF9tYXNrKG1hcHBpbmcpICYgX19HRlBfUkVDTEFJTSkpOw0KKw0KKwkJaTkx
NV90dC0+ZmlscCA9IGZpbHA7DQorCX0NCisNCisJc3QgPSBzaG1lbV9hbGxvY19zdChpOTE1LCBz
aXplLCBtciwgZmlscC0+Zl9tYXBwaW5nLCBtYXhfc2VnbWVudCk7DQorCWlmIChJU19FUlIoc3Qp
KQ0KKwkJcmV0dXJuIFBUUl9FUlIoc3QpOw0KKw0KKwllcnIgPSBkbWFfbWFwX3NnX2F0dHJzKGk5
MTVfdHQtPmRldiwNCisJCQkgICAgICAgc3QtPnNnbCwgc3QtPm5lbnRzLA0KKwkJCSAgICAgICBQ
Q0lfRE1BX0JJRElSRUNUSU9OQUwsDQorCQkJICAgICAgIERNQV9BVFRSX1NLSVBfQ1BVX1NZTkMg
fA0KKwkJCSAgICAgICBETUFfQVRUUl9OT19LRVJORUxfTUFQUElORyB8DQorCQkJICAgICAgIERN
QV9BVFRSX05PX1dBUk4pOw0KKwlpZiAoZXJyIDw9IDApIHsNCisJCWVyciA9IC1FSU5WQUw7DQor
CQlnb3RvIGVycl9mcmVlX3N0Ow0KKwl9DQorDQorCWkgPSAwOw0KKwlmb3JfZWFjaF9zZ3RfcGFn
ZShwYWdlLCBzZ3RfaXRlciwgc3QpDQorCQl0dG0tPnBhZ2VzW2krK10gPSBwYWdlOw0KKw0KKwlp
ZiAodHRtLT5wYWdlX2ZsYWdzICYgVFRNX1RUX0ZMQUdfU1dBUFBFRCkNCisJCXR0bS0+cGFnZV9m
bGFncyAmPSB+VFRNX1RUX0ZMQUdfU1dBUFBFRDsNCisNCisJaTkxNV90dC0+Y2FjaGVkX3N0ID0g
c3Q7DQorCXJldHVybiAwOw0KKw0KK2Vycl9mcmVlX3N0Og0KKwlzaG1lbV9mcmVlX3N0KHN0LCBm
aWxwLT5mX21hcHBpbmcsIGZhbHNlLCBmYWxzZSk7DQorCXJldHVybiBlcnI7DQorfQ0KKw0KK3N0
YXRpYyB2b2lkIGk5MTVfdHRtX3R0X3NobWVtX3VucG9wdWxhdGUoc3RydWN0IHR0bV90dCAqdHRt
KSB7DQorCXN0cnVjdCBpOTE1X3R0bV90dCAqaTkxNV90dCA9IGNvbnRhaW5lcl9vZih0dG0sIHR5
cGVvZigqaTkxNV90dCksIHR0bSk7DQorCWJvb2wgYmFja3VwID0gdHRtLT5wYWdlX2ZsYWdzICYg
VFRNX1RUX0ZMQUdfU1dBUFBFRDsNCisNCisJZG1hX3VubWFwX3NnKGk5MTVfdHQtPmRldiwgaTkx
NV90dC0+Y2FjaGVkX3N0LT5zZ2wsDQorCQkgICAgIGk5MTVfdHQtPmNhY2hlZF9zdC0+bmVudHMs
DQorCQkgICAgIFBDSV9ETUFfQklESVJFQ1RJT05BTCk7DQorDQorCXNobWVtX2ZyZWVfc3QoZmV0
Y2hfYW5kX3plcm8oJmk5MTVfdHQtPmNhY2hlZF9zdCksDQorCQkgICAgICBmaWxlX2lub2RlKGk5
MTVfdHQtPmZpbHApLT5pX21hcHBpbmcsDQorCQkgICAgICBiYWNrdXAsIGJhY2t1cCk7DQoNClNo
b3VsZCB3ZSBkbyBzb21ldGhpbmcgdG8gdW5kbyB0aGUgIHNobWVtX2ZpbGVfc2V0dXAgb3BlcmF0
aW9uIGhlcmU/IEZyb20gaXRzIGltcGxlbWVudGF0aW9uIGl0IGRvZXMgdGFrZSBhIHJlZmVyZW5j
ZSBjb3VudGVyIG9mIGlub2RlIGFuZCBhbGxvY2F0ZSBmaWxlOiAgaHR0cHM6Ly9lbGl4aXIuYm9v
dGxpbi5jb20vbGludXgvbGF0ZXN0L3NvdXJjZS9tbS9zaG1lbS5jI0w0MDg0DQoNClJlZ2FyZHMs
DQpPYWsNCg0KK30NCisNCiBzdGF0aWMgc3RydWN0IHR0bV90dCAqaTkxNV90dG1fdHRfY3JlYXRl
KHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sDQogCQkJCQkgdWludDMyX3QgcGFnZV9mbGFn
cykNCiB7DQogCXN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAqbWFuID0NCiAJCXR0bV9tYW5h
Z2VyX3R5cGUoYm8tPmJkZXYsIGJvLT5yZXNvdXJjZS0+bWVtX3R5cGUpOw0KIAlzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX29iamVjdCAqb2JqID0gaTkxNV90dG1fdG9fZ2VtKGJvKTsNCisJZW51bSB0dG1f
Y2FjaGluZyBjYWNoaW5nID0gaTkxNV90dG1fc2VsZWN0X3R0X2NhY2hpbmcob2JqKTsNCiAJc3Ry
dWN0IGk5MTVfdHRtX3R0ICppOTE1X3R0Ow0KIAlpbnQgcmV0Ow0KIA0KQEAgLTE5NiwzNiArMjc5
LDYyIEBAIHN0YXRpYyBzdHJ1Y3QgdHRtX3R0ICppOTE1X3R0bV90dF9jcmVhdGUoc3RydWN0IHR0
bV9idWZmZXJfb2JqZWN0ICpibywNCiAJICAgIG1hbi0+dXNlX3R0KQ0KIAkJcGFnZV9mbGFncyB8
PSBUVE1fVFRfRkxBR19aRVJPX0FMTE9DOw0KIA0KLQlyZXQgPSB0dG1fdHRfaW5pdCgmaTkxNV90
dC0+dHRtLCBibywgcGFnZV9mbGFncywNCi0JCQkgIGk5MTVfdHRtX3NlbGVjdF90dF9jYWNoaW5n
KG9iaikpOw0KLQlpZiAocmV0KSB7DQotCQlrZnJlZShpOTE1X3R0KTsNCi0JCXJldHVybiBOVUxM
Ow0KKwlpZiAoaTkxNV9nZW1fb2JqZWN0X2lzX3Nocmlua2FibGUob2JqKSAmJiBjYWNoaW5nID09
IHR0bV9jYWNoZWQpIHsNCisJCXBhZ2VfZmxhZ3MgfD0gVFRNX1RUX0ZMQUdfRVhURVJOQUwgfA0K
KwkJCSAgICAgIFRUTV9UVF9GTEFHX0VYVEVSTkFMX01BUFBBQkxFOw0KKwkJaTkxNV90dC0+aXNf
c2htZW0gPSB0cnVlOw0KIAl9DQogDQorCXJldCA9IHR0bV90dF9pbml0KCZpOTE1X3R0LT50dG0s
IGJvLCBwYWdlX2ZsYWdzLCBjYWNoaW5nKTsNCisJaWYgKHJldCkNCisJCWdvdG8gZXJyX2ZyZWU7
DQorDQogCWk5MTVfdHQtPmRldiA9IG9iai0+YmFzZS5kZXYtPmRldjsNCiANCiAJcmV0dXJuICZp
OTE1X3R0LT50dG07DQorDQorZXJyX2ZyZWU6DQorCWtmcmVlKGk5MTVfdHQpOw0KKwlyZXR1cm4g
TlVMTDsNCit9DQorDQorc3RhdGljIGludCBpOTE1X3R0bV90dF9wb3B1bGF0ZShzdHJ1Y3QgdHRt
X2RldmljZSAqYmRldiwNCisJCQkJc3RydWN0IHR0bV90dCAqdHRtLA0KKwkJCQlzdHJ1Y3QgdHRt
X29wZXJhdGlvbl9jdHggKmN0eCkNCit7DQorCXN0cnVjdCBpOTE1X3R0bV90dCAqaTkxNV90dCA9
IGNvbnRhaW5lcl9vZih0dG0sIHR5cGVvZigqaTkxNV90dCksIA0KK3R0bSk7DQorDQorCWlmIChp
OTE1X3R0LT5pc19zaG1lbSkNCisJCXJldHVybiBpOTE1X3R0bV90dF9zaG1lbV9wb3B1bGF0ZShi
ZGV2LCB0dG0sIGN0eCk7DQorDQorCXJldHVybiB0dG1fcG9vbF9hbGxvYygmYmRldi0+cG9vbCwg
dHRtLCBjdHgpOw0KIH0NCiANCiBzdGF0aWMgdm9pZCBpOTE1X3R0bV90dF91bnBvcHVsYXRlKHN0
cnVjdCB0dG1fZGV2aWNlICpiZGV2LCBzdHJ1Y3QgdHRtX3R0ICp0dG0pICB7DQogCXN0cnVjdCBp
OTE1X3R0bV90dCAqaTkxNV90dCA9IGNvbnRhaW5lcl9vZih0dG0sIHR5cGVvZigqaTkxNV90dCks
IHR0bSk7DQogDQotCWlmIChpOTE1X3R0LT5jYWNoZWRfc3QpIHsNCi0JCWRtYV91bm1hcF9zZ3Rh
YmxlKGk5MTVfdHQtPmRldiwgaTkxNV90dC0+Y2FjaGVkX3N0LA0KLQkJCQkgIERNQV9CSURJUkVD
VElPTkFMLCAwKTsNCi0JCXNnX2ZyZWVfdGFibGUoaTkxNV90dC0+Y2FjaGVkX3N0KTsNCi0JCWtm
cmVlKGk5MTVfdHQtPmNhY2hlZF9zdCk7DQotCQlpOTE1X3R0LT5jYWNoZWRfc3QgPSBOVUxMOw0K
KwlpZiAoaTkxNV90dC0+aXNfc2htZW0pIHsNCisJCWk5MTVfdHRtX3R0X3NobWVtX3VucG9wdWxh
dGUodHRtKTsNCisJfSBlbHNlIHsNCisJCWlmIChpOTE1X3R0LT5jYWNoZWRfc3QpIHsNCisJCQlk
bWFfdW5tYXBfc2d0YWJsZShpOTE1X3R0LT5kZXYsIGk5MTVfdHQtPmNhY2hlZF9zdCwNCisJCQkJ
CSAgRE1BX0JJRElSRUNUSU9OQUwsIDApOw0KKwkJCXNnX2ZyZWVfdGFibGUoaTkxNV90dC0+Y2Fj
aGVkX3N0KTsNCisJCQlrZnJlZShpOTE1X3R0LT5jYWNoZWRfc3QpOw0KKwkJCWk5MTVfdHQtPmNh
Y2hlZF9zdCA9IE5VTEw7DQorCQl9DQorCQl0dG1fcG9vbF9mcmVlKCZiZGV2LT5wb29sLCB0dG0p
Ow0KIAl9DQotCXR0bV9wb29sX2ZyZWUoJmJkZXYtPnBvb2wsIHR0bSk7DQogfQ0KIA0KIHN0YXRp
YyB2b2lkIGk5MTVfdHRtX3R0X2Rlc3Ryb3koc3RydWN0IHR0bV9kZXZpY2UgKmJkZXYsIHN0cnVj
dCB0dG1fdHQgKnR0bSkgIHsNCiAJc3RydWN0IGk5MTVfdHRtX3R0ICppOTE1X3R0ID0gY29udGFp
bmVyX29mKHR0bSwgdHlwZW9mKCppOTE1X3R0KSwgdHRtKTsNCiANCisJaWYgKGk5MTVfdHQtPmZp
bHApDQorCQlmcHV0KGk5MTVfdHQtPmZpbHApOw0KKw0KIAl0dG1fdHRfZmluaSh0dG0pOw0KIAlr
ZnJlZShpOTE1X3R0KTsNCiB9DQpAQCAtMjM1LDYgKzM0NCwxNCBAQCBzdGF0aWMgYm9vbCBpOTE1
X3R0bV9ldmljdGlvbl92YWx1YWJsZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCAgew0K
IAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0gaTkxNV90dG1fdG9fZ2VtKGJvKTsN
CiANCisJLyoNCisJICogRVhURVJOQUwgb2JqZWN0cyBzaG91bGQgbmV2ZXIgYmUgc3dhcHBlZCBv
dXQgYnkgVFRNLCBpbnN0ZWFkIHdlIG5lZWQNCisJICogdG8gaGFuZGxlIHRoYXQgb3Vyc2VsdmVz
LiBUVE0gd2lsbCBhbHJlYWR5IHNraXAgc3VjaCBvYmplY3RzIGZvciB1cywNCisJICogYnV0IHdl
IHdvdWxkIGxpa2UgdG8gYXZvaWQgZ3JhYmJpbmcgbG9ja3MgZm9yIG5vIGdvb2QgcmVhc29uLg0K
KwkgKi8NCisJaWYgKGJvLT50dG0gJiYgYm8tPnR0bS0+cGFnZV9mbGFncyAmIFRUTV9UVF9GTEFH
X0VYVEVSTkFMKQ0KKwkJcmV0dXJuIC1FQlVTWTsNCisNCiAJLyogV2lsbCBkbyBmb3Igbm93LiBP
dXIgcGlubmVkIG9iamVjdHMgYXJlIHN0aWxsIG9uIFRUTSdzIExSVSBsaXN0cyAqLw0KIAlyZXR1
cm4gaTkxNV9nZW1fb2JqZWN0X2V2aWN0YWJsZShvYmopOyAgfSBAQCAtMzI4LDkgKzQ0NSwxMSBA
QCBzdGF0aWMgdm9pZCBpOTE1X3R0bV9hZGp1c3RfZ2VtX2FmdGVyX21vdmUoc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKm9iaikNCiAJaTkxNV9nZW1fb2JqZWN0X3NldF9jYWNoZV9jb2hlcmVu
Y3kob2JqLCBjYWNoZV9sZXZlbCk7ICB9DQogDQotc3RhdGljIHZvaWQgaTkxNV90dG1fcHVyZ2Uo
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikNCitzdGF0aWMgaW50IF9faTkxNV90dG1f
cHVyZ2Uoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikNCiB7DQogCXN0cnVjdCB0dG1f
YnVmZmVyX29iamVjdCAqYm8gPSBpOTE1X2dlbV90b190dG0ob2JqKTsNCisJc3RydWN0IGk5MTVf
dHRtX3R0ICppOTE1X3R0ID0NCisJCWNvbnRhaW5lcl9vZihiby0+dHRtLCB0eXBlb2YoKmk5MTVf
dHQpLCB0dG0pOw0KIAlzdHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHggY3R4ID0gew0KIAkJLmludGVy
cnVwdGlibGUgPSB0cnVlLA0KIAkJLm5vX3dhaXRfZ3B1ID0gZmFsc2UsDQpAQCAtMzM5LDE3ICs0
NTgsNzkgQEAgc3RhdGljIHZvaWQgaTkxNV90dG1fcHVyZ2Uoc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3QgKm9iaikNCiAJaW50IHJldDsNCiANCiAJaWYgKG9iai0+bW0ubWFkdiA9PSBfX0k5MTVf
TUFEVl9QVVJHRUQpDQotCQlyZXR1cm47DQorCQlyZXR1cm4gMDsNCiANCi0JLyogVFRNJ3MgcHVy
Z2UgaW50ZXJmYWNlLiBOb3RlIHRoYXQgd2UgbWlnaHQgYmUgcmVlbnRlcmluZy4gKi8NCiAJcmV0
ID0gdHRtX2JvX3ZhbGlkYXRlKGJvLCAmcGxhY2UsICZjdHgpOw0KLQlpZiAoIXJldCkgew0KLQkJ
b2JqLT53cml0ZV9kb21haW4gPSAwOw0KLQkJb2JqLT5yZWFkX2RvbWFpbnMgPSAwOw0KLQkJaTkx
NV90dG1fYWRqdXN0X2dlbV9hZnRlcl9tb3ZlKG9iaik7DQotCQlpOTE1X3R0bV9mcmVlX2NhY2hl
ZF9pb19zdChvYmopOw0KLQkJb2JqLT5tbS5tYWR2ID0gX19JOTE1X01BRFZfUFVSR0VEOw0KKwlp
ZiAocmV0KQ0KKwkJcmV0dXJuIHJldDsNCisNCisJaWYgKGJvLT50dG0gJiYgaTkxNV90dC0+Zmls
cCkgew0KKwkJLyoNCisJCSAqIFRoZSBiZWxvdyBmcHV0KHdoaWNoIGV2ZW50dWFsbHkgY2FsbHMg
c2htZW1fdHJ1bmNhdGUpIG1pZ2h0DQorCQkgKiBiZSBkZWxheWVkIGJ5IHdvcmtlciwgc28gd2hl
biBkaXJlY3RseSBjYWxsZWQgdG8gcHVyZ2UgdGhlDQorCQkgKiBwYWdlcyhsaWtlIGJ5IHRoZSBz
aHJpbmtlcikgd2Ugc2hvdWxkIHRyeSB0byBiZSBtb3JlDQorCQkgKiBhZ2dyZXNzaXZlIGFuZCBy
ZWxlYXNlIHRoZSBwYWdlcyBpbW1lZGlhdGVseS4NCisJCSAqLw0KKwkJc2htZW1fdHJ1bmNhdGVf
cmFuZ2UoZmlsZV9pbm9kZShpOTE1X3R0LT5maWxwKSwNCisJCQkJICAgICAwLCAobG9mZl90KS0x
KTsNCisJCWZwdXQoZmV0Y2hfYW5kX3plcm8oJmk5MTVfdHQtPmZpbHApKTsNCisJfQ0KKw0KKwlv
YmotPndyaXRlX2RvbWFpbiA9IDA7DQorCW9iai0+cmVhZF9kb21haW5zID0gMDsNCisJaTkxNV90
dG1fYWRqdXN0X2dlbV9hZnRlcl9tb3ZlKG9iaik7DQorCWk5MTVfdHRtX2ZyZWVfY2FjaGVkX2lv
X3N0KG9iaik7DQorCW9iai0+bW0ubWFkdiA9IF9fSTkxNV9NQURWX1BVUkdFRDsNCisJcmV0dXJu
IDA7DQorfQ0KKw0KK3N0YXRpYyB2b2lkIGk5MTVfdHRtX3B1cmdlKHN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmopIHsNCisJX19pOTE1X3R0bV9wdXJnZShvYmopOw0KK30NCisNCitzdGF0
aWMgaW50IGk5MTVfdHRtX3Nocmlua2VyX3JlbGVhc2VfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dl
bV9vYmplY3QgKm9iaiwNCisJCQkJCSAgIGJvb2wgc2hvdWxkX3dyaXRlYmFjaykNCit7DQorCXN0
cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8gPSBpOTE1X2dlbV90b190dG0ob2JqKTsNCisJc3Ry
dWN0IGk5MTVfdHRtX3R0ICppOTE1X3R0ID0NCisJCWNvbnRhaW5lcl9vZihiby0+dHRtLCB0eXBl
b2YoKmk5MTVfdHQpLCB0dG0pOw0KKwlzdHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHggY3R4ID0gew0K
KwkJLmludGVycnVwdGlibGUgPSB0cnVlLA0KKwkJLm5vX3dhaXRfZ3B1ID0gZmFsc2UsDQorCX07
DQorCXN0cnVjdCB0dG1fcGxhY2VtZW50IHBsYWNlID0ge307DQorCWludCByZXQ7DQorDQorCWlm
ICghYm8tPnR0bSB8fCBiby0+cmVzb3VyY2UtPm1lbV90eXBlICE9IFRUTV9QTF9TWVNURU0pDQor
CQlyZXR1cm4gMDsNCisNCisJR0VNX0JVR19PTighaTkxNV90dC0+aXNfc2htZW0pOw0KKw0KKwlp
ZiAoIWk5MTVfdHQtPmZpbHApDQorCQlyZXR1cm4gMDsNCisNCisJc3dpdGNoIChvYmotPm1tLm1h
ZHYpIHsNCisJY2FzZSBJOTE1X01BRFZfRE9OVE5FRUQ6DQorCQlyZXR1cm4gX19pOTE1X3R0bV9w
dXJnZShvYmopOw0KKwljYXNlIF9fSTkxNV9NQURWX1BVUkdFRDoNCisJCXJldHVybiAwOw0KKwl9
DQorDQorCWlmIChiby0+dHRtLT5wYWdlX2ZsYWdzICYgVFRNX1RUX0ZMQUdfU1dBUFBFRCkNCisJ
CXJldHVybiAwOw0KKw0KKwliby0+dHRtLT5wYWdlX2ZsYWdzIHw9IFRUTV9UVF9GTEFHX1NXQVBQ
RUQ7DQorCXJldCA9IHR0bV9ib192YWxpZGF0ZShibywgJnBsYWNlLCAmY3R4KTsNCisJaWYgKHJl
dCkgew0KKwkJYm8tPnR0bS0+cGFnZV9mbGFncyAmPSB+VFRNX1RUX0ZMQUdfU1dBUFBFRDsNCisJ
CXJldHVybiByZXQ7DQogCX0NCisNCisJaWYgKHNob3VsZF93cml0ZWJhY2spDQorCQlfX3NobWVt
X3dyaXRlYmFjayhvYmotPmJhc2Uuc2l6ZSwgaTkxNV90dC0+ZmlscC0+Zl9tYXBwaW5nKTsNCisN
CisJcmV0dXJuIDA7DQogfQ0KIA0KIHN0YXRpYyB2b2lkIGk5MTVfdHRtX3N3YXBfbm90aWZ5KHN0
cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8pIEBAIC02MTgsNiArNzk5LDcgQEAgc3RhdGljIHVu
c2lnbmVkIGxvbmcgaTkxNV90dG1faW9fbWVtX3BmbihzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3Qg
KmJvLA0KIA0KIHN0YXRpYyBzdHJ1Y3QgdHRtX2RldmljZV9mdW5jcyBpOTE1X3R0bV9ib19kcml2
ZXIgPSB7DQogCS50dG1fdHRfY3JlYXRlID0gaTkxNV90dG1fdHRfY3JlYXRlLA0KKwkudHRtX3R0
X3BvcHVsYXRlID0gaTkxNV90dG1fdHRfcG9wdWxhdGUsDQogCS50dG1fdHRfdW5wb3B1bGF0ZSA9
IGk5MTVfdHRtX3R0X3VucG9wdWxhdGUsDQogCS50dG1fdHRfZGVzdHJveSA9IGk5MTVfdHRtX3R0
X2Rlc3Ryb3ksDQogCS5ldmljdGlvbl92YWx1YWJsZSA9IGk5MTVfdHRtX2V2aWN0aW9uX3ZhbHVh
YmxlLCBAQCAtNjg1LDEyICs4NjcsMTcgQEAgc3RhdGljIGludCBfX2k5MTVfdHRtX2dldF9wYWdl
cyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLA0KIAl9DQogDQogCWlmICghaTkxNV9n
ZW1fb2JqZWN0X2hhc19wYWdlcyhvYmopKSB7DQorCQlzdHJ1Y3QgaTkxNV90dG1fdHQgKmk5MTVf
dHQgPQ0KKwkJCWNvbnRhaW5lcl9vZihiby0+dHRtLCB0eXBlb2YoKmk5MTVfdHQpLCB0dG0pOw0K
Kw0KIAkJLyogT2JqZWN0IGVpdGhlciBoYXMgYSBwYWdlIHZlY3RvciBvciBpcyBhbiBpb21lbSBv
YmplY3QgKi8NCiAJCXN0ID0gYm8tPnR0bSA/IGk5MTVfdHRtX3R0X2dldF9zdChiby0+dHRtKSA6
IG9iai0+dHRtLmNhY2hlZF9pb19zdDsNCiAJCWlmIChJU19FUlIoc3QpKQ0KIAkJCXJldHVybiBQ
VFJfRVJSKHN0KTsNCiANCiAJCV9faTkxNV9nZW1fb2JqZWN0X3NldF9wYWdlcyhvYmosIHN0LCBp
OTE1X3NnX2RtYV9zaXplcyhzdC0+c2dsKSk7DQorCQlpZiAoIWJvLT50dG0gfHwgIWk5MTVfdHQt
PmlzX3NobWVtKQ0KKwkJCWk5MTVfZ2VtX29iamVjdF9tYWtlX3Vuc2hyaW5rYWJsZShvYmopOw0K
IAl9DQogDQogCXJldHVybiByZXQ7DQpAQCAtNzcwLDYgKzk1Nyw4IEBAIHN0YXRpYyB2b2lkIGk5
MTVfdHRtX3B1dF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLCAgc3RhdGlj
IHZvaWQgaTkxNV90dG1fYWRqdXN0X2xydShzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2Jq
KSAgew0KIAlzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvID0gaTkxNV9nZW1fdG9fdHRtKG9i
aik7DQorCXN0cnVjdCBpOTE1X3R0bV90dCAqaTkxNV90dCA9DQorCQljb250YWluZXJfb2YoYm8t
PnR0bSwgdHlwZW9mKCppOTE1X3R0KSwgdHRtKTsNCiANCiAJLyoNCiAJICogRG9uJ3QgbWFuaXB1
bGF0ZSB0aGUgVFRNIExSVXMgd2hpbGUgaW4gVFRNIGJvIGRlc3RydWN0aW9uLg0KQEAgLTc4Miw3
ICs5NzEsMTAgQEAgc3RhdGljIHZvaWQgaTkxNV90dG1fYWRqdXN0X2xydShzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqKQ0KIAkgKiBQdXQgb24gdGhlIGNvcnJlY3QgTFJVIGxpc3QgZGVw
ZW5kaW5nIG9uIHRoZSBNQURWIHN0YXR1cw0KIAkgKi8NCiAJc3Bpbl9sb2NrKCZiby0+YmRldi0+
bHJ1X2xvY2spOw0KLQlpZiAob2JqLT5tbS5tYWR2ICE9IEk5MTVfTUFEVl9XSUxMTkVFRCkgew0K
KwlpZiAoYm8tPnR0bSAmJiBpOTE1X3R0LT5maWxwKSB7DQorCQkvKiBUcnkgdG8ga2VlcCBzaG1l
bV90dCBmcm9tIGJlaW5nIGNvbnNpZGVyZWQgZm9yIHNocmlua2luZy4gKi8NCisJCWJvLT5wcmlv
cml0eSA9IFRUTV9NQVhfQk9fUFJJT1JJVFkgLSAxOw0KKwl9IGVsc2UgaWYgKG9iai0+bW0ubWFk
diAhPSBJOTE1X01BRFZfV0lMTE5FRUQpIHsNCiAJCWJvLT5wcmlvcml0eSA9IEk5MTVfVFRNX1BS
SU9fUFVSR0U7DQogCX0gZWxzZSBpZiAoIWk5MTVfZ2VtX29iamVjdF9oYXNfcGFnZXMob2JqKSkg
ew0KIAkJaWYgKGJvLT5wcmlvcml0eSA8IEk5MTVfVFRNX1BSSU9fSEFTX1BBR0VTKSBAQCAtODg3
LDkgKzEwNzksMTIgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0X29w
cyBpOTE1X2dlbV90dG1fb2JqX29wcyA9IHsNCiAJLmdldF9wYWdlcyA9IGk5MTVfdHRtX2dldF9w
YWdlcywNCiAJLnB1dF9wYWdlcyA9IGk5MTVfdHRtX3B1dF9wYWdlcywNCiAJLnRydW5jYXRlID0g
aTkxNV90dG1fcHVyZ2UsDQorCS5zaHJpbmtlcl9yZWxlYXNlX3BhZ2VzID0gaTkxNV90dG1fc2hy
aW5rZXJfcmVsZWFzZV9wYWdlcywNCisNCiAJLmFkanVzdF9scnUgPSBpOTE1X3R0bV9hZGp1c3Rf
bHJ1LA0KIAkuZGVsYXllZF9mcmVlID0gaTkxNV90dG1fZGVsYXllZF9mcmVlLA0KIAkubWlncmF0
ZSA9IGk5MTVfdHRtX21pZ3JhdGUsDQorDQogCS5tbWFwX29mZnNldCA9IGk5MTVfdHRtX21tYXBf
b2Zmc2V0LA0KIAkubW1hcF9vcHMgPSAmdm1fb3BzX3R0bSwNCiB9Ow0KQEAgLTkzNyw3ICsxMTMy
LDYgQEAgaW50IF9faTkxNV9nZW1fdHRtX29iamVjdF9pbml0KHN0cnVjdCBpbnRlbF9tZW1vcnlf
cmVnaW9uICptZW0sDQogCWRybV9nZW1fcHJpdmF0ZV9vYmplY3RfaW5pdCgmaTkxNS0+ZHJtLCAm
b2JqLT5iYXNlLCBzaXplKTsNCiAJaTkxNV9nZW1fb2JqZWN0X2luaXQob2JqLCAmaTkxNV9nZW1f
dHRtX29ial9vcHMsICZsb2NrX2NsYXNzLCBmbGFncyk7DQogCWk5MTVfZ2VtX29iamVjdF9pbml0
X21lbW9yeV9yZWdpb24ob2JqLCBtZW0pOw0KLQlpOTE1X2dlbV9vYmplY3RfbWFrZV91bnNocmlu
a2FibGUob2JqKTsNCiAJSU5JVF9SQURJWF9UUkVFKCZvYmotPnR0bS5nZXRfaW9fcGFnZS5yYWRp
eCwgR0ZQX0tFUk5FTCB8IF9fR0ZQX05PV0FSTik7DQogCW11dGV4X2luaXQoJm9iai0+dHRtLmdl
dF9pb19wYWdlLmxvY2spOw0KIAlib190eXBlID0gKG9iai0+ZmxhZ3MgJiBJOTE1X0JPX0FMTE9D
X1VTRVIpID8gdHRtX2JvX3R5cGVfZGV2aWNlIDoNCi0tDQoyLjI2LjMNCg0K
