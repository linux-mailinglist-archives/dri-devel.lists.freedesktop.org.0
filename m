Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 60C766C108
	for <lists+dri-devel@lfdr.de>; Wed, 17 Jul 2019 20:34:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7240F6E29D;
	Wed, 17 Jul 2019 18:34:06 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-f65.google.com (mail-io1-f65.google.com
 [209.85.166.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 645DD6E299
 for <dri-devel@lists.freedesktop.org>; Wed, 17 Jul 2019 18:33:58 +0000 (UTC)
Received: by mail-io1-f65.google.com with SMTP id k8so47417094iot.1
 for <dri-devel@lists.freedesktop.org>; Wed, 17 Jul 2019 11:33:58 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=jq4eSH6hla4aQ1CV+O0m+YbLlUpIZd8dCqrEOeNad44=;
 b=DHJC8+OoFdTkyahsjPjX89+LrGm6S7ovR1oys84HlQcDNNAjY0rrGk7KNheNYG7Jg4
 xRZXCyPCRmd61YkFbH4NI/G3p0pZfImRTZ8n3sTjx6bExo8nK/HVz8ybkPBVn41xrE44
 K3FP/n0lV/DGbatlezkf2HYqNJ4g0662GJ+EqPS9SvfUnbO0xEEWrdCl/SP84wtIEnU0
 kffrdlJJG8jBhqRAYQNdC/CQIkG5A3zSWtwPt6CcK02NwrDfJqPRm21lxSSG+29sOeK4
 6PNKeZjGqvJ4ETbwaE1eazcPrztpNYuee49DraNHFwWnzarPwm12UFy9FzRn1ucvobJA
 PaDg==
X-Gm-Message-State: APjAAAUmhtO09ipXrJ3+sZ7LWKBQWebJytqnGdc3V4s/Bqxm2qSjKmyc
 /ZYdW/FgAPSEMWSTCWdvHOtPP4A=
X-Google-Smtp-Source: APXvYqzsOlkY6xnq0TXoMVhfvDoL2z0m89n70UYF1FZ+2+liU7LUxKO4uAXCZvdE42qb1BqoHqnjQQ==
X-Received: by 2002:a02:ce37:: with SMTP id v23mr42123968jar.2.1563388437454; 
 Wed, 17 Jul 2019 11:33:57 -0700 (PDT)
Received: from xps15.herring.priv ([64.188.179.255])
 by smtp.googlemail.com with ESMTPSA id v10sm22109472iob.43.2019.07.17.11.33.56
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 17 Jul 2019 11:33:56 -0700 (PDT)
From: Rob Herring <robh@kernel.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 3/5] drm/panfrost: Add a no execute flag for BO allocations
Date: Wed, 17 Jul 2019 12:33:50 -0600
Message-Id: <20190717183352.22519-3-robh@kernel.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190717183352.22519-1-robh@kernel.org>
References: <20190717183352.22519-1-robh@kernel.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Boris Brezillon <boris.brezillon@collabora.com>,
 Robin Murphy <robin.murphy@arm.com>, Alyssa Rosenzweig <alyssa@rosenzweig.io>,
 Tomeu Vizoso <tomeu.vizoso@collabora.com>, Steven Price <steven.price@arm.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RXhlY3V0YWJsZSBidWZmZXJzIGhhdmUgYW4gYWxpZ25tZW50IHJlc3RyaWN0aW9uIHRoYXQgdGhl
eSBjYW4ndCBjcm9zcwoxNk1CIGJvdW5kYXJ5IGFzIHRoZSBHUFUgcHJvZ3JhbSBjb3VudGVyIGlz
IDI0LWJpdHMuIFRoaXMgcmVzdHJpY3Rpb24gaXMKY3VycmVudGx5IG5vdCBoYW5kbGVkIGFuZCB3
ZSBqdXN0IGdldCBsdWNreS4gQXMgY3VycmVudCB1c2Vyc3BhY2UKYXNzdW1lcyBhbGwgQk9zIGFy
ZSBleGVjdXRhYmxlLCB0aGF0IGhhcyB0byByZW1haW4gdGhlIGRlZmF1bHQuIFNvIGFkZCBhCm5l
dyBQQU5GUk9TVF9CT19OT0VYRUMgZmxhZyB0byBhbGxvdyB1c2Vyc3BhY2UgdG8gaW5kaWNhdGUg
d2hpY2ggQk9zIGFyZQpub3QgZXhlY3V0YWJsZS4KClRoZXJlIGlzIGFsc28gYSByZXN0cmljdGlv
biB0aGF0IGV4ZWN1dGFibGUgYnVmZmVycyBjYW5ub3Qgc3RhcnQgb3IgZW5kCm9uIGEgNEdCIGJv
dW5kYXJ5LiBUaGlzIGlzIG1vc3RseSBhdm9pZGVkIGFzIHRoZXJlIGlzIG9ubHkgNEdCIG9mIHNw
YWNlCmN1cnJlbnRseSBhbmQgdGhlIGJlZ2lubmluZyBpcyBhbHJlYWR5IGJsb2NrZWQgb3V0IGZv
ciBOVUxMIHB0cgpkZXRlY3Rpb24uIEFkZCBzdXBwb3J0IHRvIGhhbmRsZSB0aGlzIHJlc3RyaWN0
aW9uIGZ1bGx5IHJlZ2FyZGxlc3Mgb2YKdGhlIGN1cnJlbnQgY29uc3RyYWludHMuCgpGb3IgZXhp
c3RpbmcgdXNlcnNwYWNlLCBhbGwgY3JlYXRlZCBCT3MgcmVtYWluIGV4ZWN1dGFibGUsIGJ1dCB0
aGUgR1BVClZBIGFsaWdubWVudCB3aWxsIGJlIGluY3JlYXNlZCB0byB0aGUgc2l6ZSBvZiB0aGUg
Qk8uIFRoaXMgc2hvdWxkbid0Cm1hdHRlciBhcyB0aGVyZSBpcyBwbGVudHkgb2YgR1BVIFZBIHNw
YWNlLgoKQ2M6IFRvbWV1IFZpem9zbyA8dG9tZXUudml6b3NvQGNvbGxhYm9yYS5jb20+CkNjOiBC
b3JpcyBCcmV6aWxsb24gPGJvcmlzLmJyZXppbGxvbkBjb2xsYWJvcmEuY29tPgpDYzogUm9iaW4g
TXVycGh5IDxyb2Jpbi5tdXJwaHlAYXJtLmNvbT4KQ2M6IFN0ZXZlbiBQcmljZSA8c3RldmVuLnBy
aWNlQGFybS5jb20+CkNjOiBBbHlzc2EgUm9zZW56d2VpZyA8YWx5c3NhQHJvc2VuendlaWcuaW8+
ClNpZ25lZC1vZmYtYnk6IFJvYiBIZXJyaW5nIDxyb2JoQGtlcm5lbC5vcmc+Ci0tLQogZHJpdmVy
cy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jIHwgMjAgKysrKysrKysrKysrKysrKysr
Ky0KIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uYyB8IDE4ICsrKysrKysr
KysrKysrKystLQogZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbS5oIHwgIDMg
KystCiBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfbW11LmMgfCAgMyArKysKIGlu
Y2x1ZGUvdWFwaS9kcm0vcGFuZnJvc3RfZHJtLmggICAgICAgICB8ICAyICsrCiA1IGZpbGVzIGNo
YW5nZWQsIDQyIGluc2VydGlvbnMoKyksIDQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmZyb3N0L3BhbmZyb3N0X2Rydi5jCmluZGV4IGQzNTRiOTI5NjRkNS4uYjkxZTk5MWJjNmEzIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZHJ2LmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jCkBAIC00OSw3ICs0OSw4IEBA
IHN0YXRpYyBpbnQgcGFuZnJvc3RfaW9jdGxfY3JlYXRlX2JvKHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYsIHZvaWQgKmRhdGEsCiAJc3RydWN0IHBhbmZyb3N0X2dlbV9vYmplY3QgKmJvOwogCXN0cnVj
dCBkcm1fcGFuZnJvc3RfY3JlYXRlX2JvICphcmdzID0gZGF0YTsKIAotCWlmICghYXJncy0+c2l6
ZSB8fCBhcmdzLT5mbGFncyB8fCBhcmdzLT5wYWQpCisJaWYgKCFhcmdzLT5zaXplIHx8IGFyZ3Mt
PnBhZCB8fAorCSAgICAoYXJncy0+ZmxhZ3MgJiB+UEFORlJPU1RfQk9fTk9FWEVDKSkKIAkJcmV0
dXJuIC1FSU5WQUw7CiAKIAlibyA9IHBhbmZyb3N0X2dlbV9jcmVhdGVfd2l0aF9oYW5kbGUoZmls
ZSwgZGV2LCBhcmdzLT5zaXplLCBhcmdzLT5mbGFncywKQEAgLTM2Nyw2ICszNjgsMjIgQEAgc3Rh
dGljIHN0cnVjdCBkcm1fZHJpdmVyIHBhbmZyb3N0X2RybV9kcml2ZXIgPSB7CiAJLmdlbV9wcmlt
ZV9tbWFwCQk9IGRybV9nZW1fcHJpbWVfbW1hcCwKIH07CiAKKyNkZWZpbmUgUEZOXzRHX01BU0sg
ICAgKChTWl80RyAtIDEpID4+IFBBR0VfU0hJRlQpCisKK3N0YXRpYyB2b2lkIHBhbmZyb3N0X2Ry
bV9tbV9jb2xvcl9hZGp1c3QoY29uc3Qgc3RydWN0IGRybV9tbV9ub2RlICpub2RlLAorCQkJCQkg
dW5zaWduZWQgbG9uZyBjb2xvciwKKwkJCQkJIHU2NCAqc3RhcnQsIHU2NCAqZW5kKQoreworCS8q
IEV4ZWN1dGFibGUgYnVmZmVycyBjYW4ndCBzdGFydCBvciBlbmQgb24gYSA0R0IgYm91bmRhcnkg
Ki8KKwlpZiAoIWNvbG9yKSB7CisJCWlmICgoKnN0YXJ0ICYgUEZOXzRHX01BU0spID09IDApCisJ
CQkoKnN0YXJ0KSsrOworCisJCWlmICgoKmVuZCAmIFBGTl80R19NQVNLKSA9PSAwKQorCQkJKCpl
bmQpLS07CisJfQorfQorCiBzdGF0aWMgaW50IHBhbmZyb3N0X3Byb2JlKHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYpCiB7CiAJc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXY7CkBAIC0z
OTQsNiArNDExLDcgQEAgc3RhdGljIGludCBwYW5mcm9zdF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1f
ZGV2aWNlICpwZGV2KQogCiAJLyogNEcgZW5vdWdoIGZvciBub3cuIGNhbiBiZSA0OC1iaXQgKi8K
IAlkcm1fbW1faW5pdCgmcGZkZXYtPm1tLCBTWl8zMk0gPj4gUEFHRV9TSElGVCwgKFNaXzRHIC0g
U1pfMzJNKSA+PiBQQUdFX1NISUZUKTsKKwlwZmRldi0+bW0uY29sb3JfYWRqdXN0ID0gcGFuZnJv
c3RfZHJtX21tX2NvbG9yX2FkanVzdDsKIAogCXBtX3J1bnRpbWVfdXNlX2F1dG9zdXNwZW5kKHBm
ZGV2LT5kZXYpOwogCXBtX3J1bnRpbWVfc2V0X2F1dG9zdXNwZW5kX2RlbGF5KHBmZGV2LT5kZXYs
IDUwKTsgLyogfjMgZnJhbWVzICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJv
c3QvcGFuZnJvc3RfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ2Vt
LmMKaW5kZXggZGY3MGRjZjNjYjJmLi4zN2ZmZWM4MzkxZGEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFu
ZnJvc3QvcGFuZnJvc3RfZ2VtLmMKQEAgLTY2LDExICs2NiwyMyBAQCBzdGF0aWMgaW50IHBhbmZy
b3N0X2dlbV9tYXAoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIHN0cnVjdCBwYW5mcm9z
dF9nZW1fbwogewogCWludCByZXQ7CiAJc2l6ZV90IHNpemUgPSBiby0+YmFzZS5iYXNlLnNpemU7
Ci0JdTY0IGFsaWduID0gc2l6ZSA+PSBTWl8yTSA/IFNaXzJNID4+IFBBR0VfU0hJRlQgOiAwOwor
CXU2NCBhbGlnbjsKKworCS8qCisJICogRXhlY3V0YWJsZSBidWZmZXJzIGNhbm5vdCBjcm9zcyBh
IDE2TUIgYm91bmRhcnkgYXMgdGhlIHByb2dyYW0KKwkgKiBjb3VudGVyIGlzIDI0LWJpdHMuIFdl
IGFzc3VtZSBleGVjdXRhYmxlIGJ1ZmZlcnMgd2lsbCBiZSBsZXNzIHRoYW4KKwkgKiAxNk1CIGFu
ZCBhbGlnbmluZyBleGVjdXRhYmxlIGJ1ZmZlcnMgdG8gdGhlaXIgc2l6ZSB3aWxsIGF2b2lkCisJ
ICogY3Jvc3NpbmcgYSAxNk1CIGJvdW5kYXJ5LgorCSAqLworCWlmICghYm8tPm5vZXhlYykKKwkJ
YWxpZ24gPSBzaXplID4+IFBBR0VfU0hJRlQ7CisJZWxzZQorCQlhbGlnbiA9IHNpemUgPj0gU1pf
Mk0gPyBTWl8yTSA+PiBQQUdFX1NISUZUIDogMDsKIAogCXNwaW5fbG9jaygmcGZkZXYtPm1tX2xv
Y2spOwogCXJldCA9IGRybV9tbV9pbnNlcnRfbm9kZV9nZW5lcmljKCZwZmRldi0+bW0sICZiby0+
bm9kZSwKLQkJCQkJIHNpemUgPj4gUEFHRV9TSElGVCwgYWxpZ24sIDAsIDApOworCQkJCQkgc2l6
ZSA+PiBQQUdFX1NISUZULCBhbGlnbiwKKwkJCQkJIGJvLT5ub2V4ZWMsIDApOwogCXNwaW5fdW5s
b2NrKCZwZmRldi0+bW1fbG9jayk7CiAJaWYgKHJldCkKIAkJcmV0dXJuIHJldDsKQEAgLTk2LDYg
KzEwOCw3IEBAIHBhbmZyb3N0X2dlbV9jcmVhdGVfd2l0aF9oYW5kbGUoc3RydWN0IGRybV9maWxl
ICpmaWxlX3ByaXYsCiAJCXJldHVybiBFUlJfQ0FTVChzaG1lbSk7CiAKIAlibyA9IHRvX3BhbmZy
b3N0X2JvKCZzaG1lbS0+YmFzZSk7CisJYm8tPm5vZXhlYyA9ICEhKGZsYWdzICYgUEFORlJPU1Rf
Qk9fTk9FWEVDKTsKIAogCXJldCA9IHBhbmZyb3N0X2dlbV9tYXAocGZkZXYsIGJvKTsKIAlpZiAo
cmV0KQpAQCAtMTIzLDYgKzEzNiw3IEBAIHBhbmZyb3N0X2dlbV9wcmltZV9pbXBvcnRfc2dfdGFi
bGUoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJcmV0dXJuIEVSUl9DQVNUKG9iaik7CiAKIAlw
b2JqID0gdG9fcGFuZnJvc3RfYm8ob2JqKTsKKwlwb2JqLT5ub2V4ZWMgPSB0cnVlOwogCiAJcmV0
ID0gcGFuZnJvc3RfZ2VtX21hcChwZmRldiwgcG9iaik7CiAJaWYgKHJldCkKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaAppbmRleCBjZTA2NTI3MDcyMGIuLjEzMmYwMjM5OWI3
YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbS5oCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaApAQCAtMTEsNyArMTEs
OCBAQCBzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCB7CiAJc3RydWN0IGRybV9nZW1fc2htZW1f
b2JqZWN0IGJhc2U7CiAKIAlzdHJ1Y3QgZHJtX21tX25vZGUgbm9kZTsKLQlib29sIGlzX21hcHBl
ZDsKKwlib29sIGlzX21hcHBlZAkJOjE7CisJYm9vbCBub2V4ZWMJCToxOwogfTsKIAogc3RhdGlj
IGlubGluZQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21t
dS5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5jCmluZGV4IDUzODNi
ODM3ZjA0Yi4uZDE4NDg0YTA3YmZhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJv
c3QvcGFuZnJvc3RfbW11LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0
X21tdS5jCkBAIC0yMTIsNiArMjEyLDkgQEAgaW50IHBhbmZyb3N0X21tdV9tYXAoc3RydWN0IHBh
bmZyb3N0X2dlbV9vYmplY3QgKmJvKQogCWlmIChXQVJOX09OKGJvLT5pc19tYXBwZWQpKQogCQly
ZXR1cm4gMDsKIAorCWlmIChiby0+bm9leGVjKQorCQlwcm90IHw9IElPTU1VX05PRVhFQzsKKwog
CXNndCA9IGRybV9nZW1fc2htZW1fZ2V0X3BhZ2VzX3NndChvYmopOwogCWlmIChXQVJOX09OKElT
X0VSUihzZ3QpKSkKIAkJcmV0dXJuIFBUUl9FUlIoc2d0KTsKZGlmZiAtLWdpdCBhL2luY2x1ZGUv
dWFwaS9kcm0vcGFuZnJvc3RfZHJtLmggYi9pbmNsdWRlL3VhcGkvZHJtL3BhbmZyb3N0X2RybS5o
CmluZGV4IGI1ZDM3MDYzODg0Ni4uMTdmYjVkMjAwZjdhIDEwMDY0NAotLS0gYS9pbmNsdWRlL3Vh
cGkvZHJtL3BhbmZyb3N0X2RybS5oCisrKyBiL2luY2x1ZGUvdWFwaS9kcm0vcGFuZnJvc3RfZHJt
LmgKQEAgLTgyLDYgKzgyLDggQEAgc3RydWN0IGRybV9wYW5mcm9zdF93YWl0X2JvIHsKIAlfX3M2
NCB0aW1lb3V0X25zOwkvKiBhYnNvbHV0ZSAqLwogfTsKIAorI2RlZmluZSBQQU5GUk9TVF9CT19O
T0VYRUMJMQorCiAvKioKICAqIHN0cnVjdCBkcm1fcGFuZnJvc3RfY3JlYXRlX2JvIC0gaW9jdGwg
YXJndW1lbnQgZm9yIGNyZWF0aW5nIFBhbmZyb3N0IEJPcy4KICAqCi0tIAoyLjIwLjEKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
