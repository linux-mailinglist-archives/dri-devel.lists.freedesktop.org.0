Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5968EC0025
	for <lists+dri-devel@lfdr.de>; Fri, 27 Sep 2019 09:41:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A22246EE80;
	Fri, 27 Sep 2019 07:41:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x344.google.com (mail-wm1-x344.google.com
 [IPv6:2a00:1450:4864:20::344])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 08E7D6ED25;
 Thu, 26 Sep 2019 10:53:27 +0000 (UTC)
Received: by mail-wm1-x344.google.com with SMTP id i16so2191867wmd.3;
 Thu, 26 Sep 2019 03:53:26 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=YX2q2l0IB9GS+/BKJU46b4Bovrv9gcTs5FXGmQGtRPc=;
 b=IpBtkeDShUGaG9PJ2hsFG97MRWQ3K1gszLULh9AWrCNtS8oiG89/IR7x1j5cq1YJtt
 nHEItnfkaCHKOPwbizI7UK0kydHH454PRkt0h7+wVO3+uyj8hgAaz7t+ZPLtZsXb7Rsf
 7ABxURsGW8QlTIOjVOMYjT9eZSKc9V98cCFEDR1FHWeQD4bMekTI874boqg89Y/ANzcS
 xZGwS+5f8kF77lNqVr9i0UVe/cYy7Wmwh6kHH9r/4YKjN9KJ0hwWwiK1dyyQAxsanvEU
 bhX3yayIrEA5cqX35BXPsMTDF6splNtySbHiUSyJpowsVzqht23H8BO9l0h8TxpKNKC/
 2AuQ==
X-Gm-Message-State: APjAAAUdfGtxQIuuW3LiBUCAglVfdGKNDpqbPF1BuoXL7LEEicV4uRBU
 q4T6MYly59+hlnoLbPoNMxQ=
X-Google-Smtp-Source: APXvYqygBVHxolMaQX4WABLgHD4ZJgEc3yTU3QyzNNqaz2sztZBoMKKYa/fzTuLZmPKHBD2tG9Snug==
X-Received: by 2002:a05:600c:34e:: with SMTP id
 u14mr2301720wmd.110.1569495205426; 
 Thu, 26 Sep 2019 03:53:25 -0700 (PDT)
Received: from IcarusMOD.eternityproject.eu ([93.51.16.173])
 by smtp.gmail.com with ESMTPSA id d9sm3468412wrc.44.2019.09.26.03.53.24
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Thu, 26 Sep 2019 03:53:24 -0700 (PDT)
From: kholk11@gmail.com
To: linux-arm-msm@vger.kernel.org
Subject: [PATCH v2 5/5] drm/msm/adreno: Add support for Adreno 510 GPU
Date: Thu, 26 Sep 2019 12:52:56 +0200
Message-Id: <20190926105256.61412-6-kholk11@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190926105256.61412-1-kholk11@gmail.com>
References: <20190926105256.61412-1-kholk11@gmail.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Fri, 27 Sep 2019 07:40:57 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=YX2q2l0IB9GS+/BKJU46b4Bovrv9gcTs5FXGmQGtRPc=;
 b=keiNF0rml3xsx0arv5W/KSyQHbNQKT7tWYoqsRluNg5J9hCDOgbBdlASZZSsdjtwJG
 s8gambwY9uejDWxIuUZkyPnL7AnTHXEMpjhP+7FKHxXMY3alXXI5lRX4EYlhNsKD69qD
 gyI4Ma7f85+klCPXn2Bzt1AA8C2FavJccfiD85EI2ktw6YJfrMKwsv5Otrn8v+jddq5k
 7X99UKsSnDIBLPgY2jXndSdWwzo9EN/Uahx5i1gnCIINA/U3Puh+/UZcasV/vyZb8aX+
 ZYZGLshCc1h85atr/tXZ9a3lJGEtWo6CEsAyAVitIn2lASqfQxOZ7KY5p5nRmRYyfgAN
 S3XQ==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, freedreno@lists.freedesktop.org, marijns95@gmail.com,
 jonathan@marek.ca, airlied@linux.ie, gregkh@linuxfoundation.org,
 dri-devel@lists.freedesktop.org, bjorn.andersson@linaro.org,
 robh+dt@kernel.org, tglx@linutronix.de, kholk11@gmail.com, sean@poorly.run,
 georgi.djakov@linaro.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogIkFuZ2VsbyBHLiBEZWwgUmVnbm8iIDxraG9sazExQGdtYWlsLmNvbT4KClRoZSBBZHJl
bm8gNTEwIEdQVSBpcyBhIHN0cmlwcGVkIHZlcnNpb24gb2YgdGhlIEFkcmVubyA1eHgsCmZvdW5k
IGluIGxvdy1lbmQgU29DcyBsaWtlIDh4NTYgYW5kIDh4NzYsIHdoaWNoIGhhcyAyNTZLIG9mCkdN
RU0sIHdpdGggbm8gR1BNVSBub3IgWkFQLgpBbHNvLCBzaW5jZSB0aGUgQWRyZW5vIDV4eCBwYXJ0
IG9mIHRoaXMgZHJpdmVyIHNlZW1zIHRvIGJlCmRldmVsb3BlZCB3aXRoIGhpZ2gtZW5kIEFkcmVu
byBHUFVzIGluIG1pbmQsIGFuZCBzaW5jZSB0aGlzCmlzIGEgbG93ZXIgZW5kIG9uZSwgYWRkIGEg
Y29tbWVudCBtYWtpbmcgY2xlYXIgd2hpY2ggR1BVcwp3aGljaCBzdXBwb3J0IGlzIG5vdCBpbXBs
ZW1lbnRlZCB5ZXQgaXMgbm90IHVzaW5nIHRoZSBHUE1VCnJlbGF0ZWQgaHcgaW5pdCBjb2RlLCBz
byB0aGF0IGZ1dHVyZSBkZXZlbG9wZXJzIHdpbGwgbm90IGdvCmNyYXp5IHdpdGggdGhhdC4KCkJ5
IHRoZSB3YXksIHRoZSBsb3dlciBlbmQgQWRyZW5vIEdQVXMgd2l0aCBubyBHUE1VIGFyZToKQTUw
NS9BNTA2L0E1MTAgKHVzdWFsbHkgbm8gWkFQIGZpcm13YXJlKQpBNTA4L0E1MDkvQTUxMiAodXN1
YWxseSB3aXRoIFpBUCBmaXJtd2FyZSkKClNpZ25lZC1vZmYtYnk6IEFuZ2VsbyBHLiBEZWwgUmVn
bm8gPGtob2xrMTFAZ21haWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBBbmdlbG9HaW9hY2NoaW5vIERl
bCBSZWdubyA8a2hvbGsxMUBnbWFpbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL21zbS9hZHJl
bm8vYTV4eF9ncHUuYyAgICAgIHwgNzMgKysrKysrKysrKysrKysrKystLS0tLQogZHJpdmVycy9n
cHUvZHJtL21zbS9hZHJlbm8vYTV4eF9wb3dlci5jICAgIHwgIDcgKysrCiBkcml2ZXJzL2dwdS9k
cm0vbXNtL2FkcmVuby9hZHJlbm9fZGV2aWNlLmMgfCAxNSArKysrKwogZHJpdmVycy9ncHUvZHJt
L21zbS9hZHJlbm8vYWRyZW5vX2dwdS5oICAgIHwgIDUgKysKIDQgZmlsZXMgY2hhbmdlZCwgODYg
aW5zZXJ0aW9ucygrKSwgMTQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL21zbS9hZHJlbm8vYTV4eF9ncHUuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E1
eHhfZ3B1LmMKaW5kZXggZTljNTVkMWQ2YzA0Li5lNDk3ZTA4YjA4ZjcgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E1eHhfZ3B1LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L21zbS9hZHJlbm8vYTV4eF9ncHUuYwpAQCAtMzUzLDYgKzM1Myw5IEBAIHN0YXRpYyBpbnQgYTV4
eF9tZV9pbml0KHN0cnVjdCBtc21fZ3B1ICpncHUpCiAJCSAqIDJEIG1vZGUgMyBkcmF3CiAJCSAq
LwogCQlPVVRfUklORyhyaW5nLCAweDAwMDAwMDBCKTsKKwl9IGVsc2UgaWYgKGFkcmVub19pc19h
NTEwKGFkcmVub19ncHUpKSB7CisJCS8qIFdvcmthcm91bmQgZm9yIHRva2VuIGFuZCBzeW5jcyAq
LworCQlPVVRfUklORyhyaW5nLCAweDAwMDAwMDAxKTsKIAl9IGVsc2UgewogCQkvKiBObyB3b3Jr
YXJvdW5kcyBlbmFibGVkICovCiAJCU9VVF9SSU5HKHJpbmcsIDB4MDAwMDAwMDApOwpAQCAtNTY4
LDE1ICs1NzEsMjQgQEAgc3RhdGljIGludCBhNXh4X2h3X2luaXQoc3RydWN0IG1zbV9ncHUgKmdw
dSkKIAkJMHgwMDEwMDAwMCArIGFkcmVub19ncHUtPmdtZW0gLSAxKTsKIAlncHVfd3JpdGUoZ3B1
LCBSRUdfQTVYWF9VQ0hFX0dNRU1fUkFOR0VfTUFYX0hJLCAweDAwMDAwMDAwKTsKIAotCWdwdV93
cml0ZShncHUsIFJFR19BNVhYX0NQX01FUV9USFJFU0hPTERTLCAweDQwKTsKLQlpZiAoYWRyZW5v
X2lzX2E1MzAoYWRyZW5vX2dwdSkpCi0JCWdwdV93cml0ZShncHUsIFJFR19BNVhYX0NQX01FUkNJ
VV9TSVpFLCAweDQwKTsKLQlpZiAoYWRyZW5vX2lzX2E1NDAoYWRyZW5vX2dwdSkpCi0JCWdwdV93
cml0ZShncHUsIFJFR19BNVhYX0NQX01FUkNJVV9TSVpFLCAweDQwMCk7Ci0JZ3B1X3dyaXRlKGdw
dSwgUkVHX0E1WFhfQ1BfUk9RX1RIUkVTSE9MRFNfMiwgMHg4MDAwMDA2MCk7Ci0JZ3B1X3dyaXRl
KGdwdSwgUkVHX0E1WFhfQ1BfUk9RX1RIUkVTSE9MRFNfMSwgMHg0MDIwMUIxNik7Ci0KLQlncHVf
d3JpdGUoZ3B1LCBSRUdfQTVYWF9QQ19EQkdfRUNPX0NOVEwsICgweDQwMCA8PCAxMSB8IDB4MzAw
IDw8IDIyKSk7CisJaWYgKGFkcmVub19pc19hNTEwKGFkcmVub19ncHUpKSB7CisJCWdwdV93cml0
ZShncHUsIFJFR19BNVhYX0NQX01FUV9USFJFU0hPTERTLCAweDIwKTsKKwkJZ3B1X3dyaXRlKGdw
dSwgUkVHX0E1WFhfQ1BfTUVSQ0lVX1NJWkUsIDB4MjApOworCQlncHVfd3JpdGUoZ3B1LCBSRUdf
QTVYWF9DUF9ST1FfVEhSRVNIT0xEU18yLCAweDQwMDAwMDMwKTsKKwkJZ3B1X3dyaXRlKGdwdSwg
UkVHX0E1WFhfQ1BfUk9RX1RIUkVTSE9MRFNfMSwgMHgyMDEwMEQwQSk7CisJCWdwdV93cml0ZShn
cHUsIFJFR19BNVhYX1BDX0RCR19FQ09fQ05UTCwKKwkJCSAgKDB4MjAwIDw8IDExIHwgMHgyMDAg
PDwgMjIpKTsKKwl9IGVsc2UgeworCQlncHVfd3JpdGUoZ3B1LCBSRUdfQTVYWF9DUF9NRVFfVEhS
RVNIT0xEUywgMHg0MCk7CisJCWlmIChhZHJlbm9faXNfYTUzMChhZHJlbm9fZ3B1KSkKKwkJCWdw
dV93cml0ZShncHUsIFJFR19BNVhYX0NQX01FUkNJVV9TSVpFLCAweDQwKTsKKwkJaWYgKGFkcmVu
b19pc19hNTQwKGFkcmVub19ncHUpKQorCQkJZ3B1X3dyaXRlKGdwdSwgUkVHX0E1WFhfQ1BfTUVS
Q0lVX1NJWkUsIDB4NDAwKTsKKwkJZ3B1X3dyaXRlKGdwdSwgUkVHX0E1WFhfQ1BfUk9RX1RIUkVT
SE9MRFNfMiwgMHg4MDAwMDA2MCk7CisJCWdwdV93cml0ZShncHUsIFJFR19BNVhYX0NQX1JPUV9U
SFJFU0hPTERTXzEsIDB4NDAyMDFCMTYpOworCQlncHVfd3JpdGUoZ3B1LCBSRUdfQTVYWF9QQ19E
QkdfRUNPX0NOVEwsCisJCQkgICgweDQwMCA8PCAxMSB8IDB4MzAwIDw8IDIyKSk7CisJfQogCiAJ
aWYgKGFkcmVub19ncHUtPmluZm8tPnF1aXJrcyAmIEFEUkVOT19RVUlSS19UV09fUEFTU19VU0Vf
V0ZJKQogCQlncHVfcm13KGdwdSwgUkVHX0E1WFhfUENfREJHX0VDT19DTlRMLCAwLCAoMSA8PCA4
KSk7CkBAIC01ODksNiArNjAxLDE5IEBAIHN0YXRpYyBpbnQgYTV4eF9od19pbml0KHN0cnVjdCBt
c21fZ3B1ICpncHUpCiAJLyogRW5hYmxlIE1FL1BGUCBzcGxpdCBub3RpZmljYXRpb24gKi8KIAln
cHVfd3JpdGUoZ3B1LCBSRUdfQTVYWF9SQkJNX0FIQl9DTlRMMSwgMHhBNkZGRkZGRik7CiAKKwkv
KgorCSAqICBJbiBBNXgsIENDVSBjYW4gc2VuZCBjb250ZXh0X2RvbmUgZXZlbnQgb2YgYSBwYXJ0
aWN1bGFyIGNvbnRleHQgdG8KKwkgKiAgVUNIRSB3aGljaCB1bHRpbWF0ZWx5IHJlYWNoZXMgQ1Ag
ZXZlbiB3aGVuIHRoZXJlIGlzIHZhbGlkCisJICogIHRyYW5zYWN0aW9uIG9mIHRoYXQgY29udGV4
dCBpbnNpZGUgQ0NVLiBUaGlzIGNhbiBsZXQgQ1AgdG8gcHJvZ3JhbQorCSAqICBjb25maWcgcmVn
aXN0ZXJzLCB3aGljaCB3aWxsIG1ha2UgdGhlICJ2YWxpZCB0cmFuc2FjdGlvbiIgaW5zaWRlCisJ
ICogIENDVSB0byBiZSBpbnRlcnByZXRlZCBkaWZmZXJlbnRseS4gVGhpcyBjYW4gY2F1c2UgZ3B1
IGZhdWx0LiBUaGlzCisJICogIGJ1ZyBpcyBmaXhlZCBpbiBsYXRlc3QgQTUxMCByZXZpc2lvbi4g
VG8gZW5hYmxlIHRoaXMgYnVnIGZpeCAtCisJICogIGJpdFsxMV0gb2YgUkJfREJHX0VDT19DTlRM
IG5lZWQgdG8gYmUgc2V0IHRvIDAsIGRlZmF1bHQgaXMgMQorCSAqICAoZGlzYWJsZSkuIEZvciBv
bGRlciBBNTEwIHZlcnNpb24gdGhpcyBiaXQgaXMgdW51c2VkLgorCSAqLworCWlmIChhZHJlbm9f
aXNfYTUxMChhZHJlbm9fZ3B1KSkKKwkJZ3B1X3JtdyhncHUsIFJFR19BNVhYX1JCX0RCR19FQ09f
Q05UTCwgKDEgPDwgMTEpLCAwKTsKKwogCS8qIEVuYWJsZSBIV0NHICovCiAJYTV4eF9zZXRfaHdj
ZyhncHUsIHRydWUpOwogCkBAIC02MzUsNyArNjYwLDcgQEAgc3RhdGljIGludCBhNXh4X2h3X2lu
aXQoc3RydWN0IG1zbV9ncHUgKmdwdSkKIAkvKiBVQ0hFICovCiAJZ3B1X3dyaXRlKGdwdSwgUkVH
X0E1WFhfQ1BfUFJPVEVDVCgxNiksIEFEUkVOT19QUk9URUNUX1JXKDB4RTgwLCAxNikpOwogCi0J
aWYgKGFkcmVub19pc19hNTMwKGFkcmVub19ncHUpKQorCWlmIChhZHJlbm9faXNfYTUzMChhZHJl
bm9fZ3B1KSB8fCBhZHJlbm9faXNfYTUxMChhZHJlbm9fZ3B1KSkKIAkJZ3B1X3dyaXRlKGdwdSwg
UkVHX0E1WFhfQ1BfUFJPVEVDVCgxNyksCiAJCQlBRFJFTk9fUFJPVEVDVF9SVygweDEwMDAwLCAw
eDgwMDApKTsKIApAQCAtNjc5LDcgKzcwNCw4IEBAIHN0YXRpYyBpbnQgYTV4eF9od19pbml0KHN0
cnVjdCBtc21fZ3B1ICpncHUpCiAKIAlhNXh4X3ByZWVtcHRfaHdfaW5pdChncHUpOwogCi0JYTV4
eF9ncG11X3Vjb2RlX2luaXQoZ3B1KTsKKwlpZiAoIWFkcmVub19pc19hNTEwKGFkcmVub19ncHUp
KQorCQlhNXh4X2dwbXVfdWNvZGVfaW5pdChncHUpOwogCiAJcmV0ID0gYTV4eF91Y29kZV9pbml0
KGdwdSk7CiAJaWYgKHJldCkKQEAgLTcxMiw3ICs3MzgsOCBAQCBzdGF0aWMgaW50IGE1eHhfaHdf
aW5pdChzdHJ1Y3QgbXNtX2dwdSAqZ3B1KQogCX0KIAogCS8qCi0JICogVHJ5IHRvIGxvYWQgYSB6
YXAgc2hhZGVyIGludG8gdGhlIHNlY3VyZSB3b3JsZC4gSWYgc3VjY2Vzc2Z1bAorCSAqIElmIHRo
ZSBjaGlwIHRoYXQgd2UgYXJlIHVzaW5nIGRvZXMgc3VwcG9ydCBsb2FkaW5nIG9uZSwgdGhlbgor
CSAqIHRyeSB0byBsb2FkIGEgemFwIHNoYWRlciBpbnRvIHRoZSBzZWN1cmUgd29ybGQuIElmIHN1
Y2Nlc3NmdWwKIAkgKiB3ZSBjYW4gdXNlIHRoZSBDUCB0byBzd2l0Y2ggb3V0IG9mIHNlY3VyZSBt
b2RlLiBJZiBub3QgdGhlbiB3ZQogCSAqIGhhdmUgbm8gcmVzb3VyY2UgYnV0IHRvIHRyeSB0byBz
d2l0Y2ggb3Vyc2VsdmVzIG91dCBtYW51YWxseS4gSWYgd2UKIAkgKiBndWVzc2VkIHdyb25nIHRo
ZW4gYWNjZXNzIHRvIHRoZSBSQkJNX1NFQ1ZJRF9UUlVTVF9DTlRMIHJlZ2lzdGVyIHdpbGwKQEAg
LTEwNjYsNiArMTA5Myw3IEBAIHN0YXRpYyB2b2lkIGE1eHhfZHVtcChzdHJ1Y3QgbXNtX2dwdSAq
Z3B1KQogCiBzdGF0aWMgaW50IGE1eHhfcG1fcmVzdW1lKHN0cnVjdCBtc21fZ3B1ICpncHUpCiB7
CisJc3RydWN0IGFkcmVub19ncHUgKmFkcmVub19ncHUgPSB0b19hZHJlbm9fZ3B1KGdwdSk7CiAJ
aW50IHJldDsKIAogCS8qIFR1cm4gb24gdGhlIGNvcmUgcG93ZXIgKi8KQEAgLTEwNzMsNiArMTEw
MSwxNSBAQCBzdGF0aWMgaW50IGE1eHhfcG1fcmVzdW1lKHN0cnVjdCBtc21fZ3B1ICpncHUpCiAJ
aWYgKHJldCkKIAkJcmV0dXJuIHJldDsKIAorCWlmIChhZHJlbm9faXNfYTUxMChhZHJlbm9fZ3B1
KSkgeworCQkvKiBIYWx0IHRoZSBzcF9pbnB1dF9jbGsgYXQgSE0gbGV2ZWwgKi8KKwkJZ3B1X3dy
aXRlKGdwdSwgUkVHX0E1WFhfUkJCTV9DTE9DS19DTlRMLCAweDAwMDAwMDU1KTsKKwkJYTV4eF9z
ZXRfaHdjZyhncHUsIHRydWUpOworCQkvKiBUdXJuIG9uIHNwX2lucHV0X2NsayBhdCBITSBsZXZl
bCAqLworCQlncHVfcm13KGdwdSwgUkVHX0E1WFhfUkJCTV9DTE9DS19DTlRMLCAweGZmLCAwKTsK
KwkJcmV0dXJuIDA7CisJfQorCiAJLyogVHVybiB0aGUgUkJDQ1UgZG9tYWluIGZpcnN0IHRvIGxp
bWl0IHRoZSBjaGFuY2VzIG9mIHZvbHRhZ2UgZHJvb3AgKi8KIAlncHVfd3JpdGUoZ3B1LCBSRUdf
QTVYWF9HUE1VX1JCQ0NVX1BPV0VSX0NOVEwsIDB4Nzc4MDAwKTsKIApAQCAtMTEwMSw5ICsxMTM4
LDE3IEBAIHN0YXRpYyBpbnQgYTV4eF9wbV9yZXN1bWUoc3RydWN0IG1zbV9ncHUgKmdwdSkKIAog
c3RhdGljIGludCBhNXh4X3BtX3N1c3BlbmQoc3RydWN0IG1zbV9ncHUgKmdwdSkKIHsKKwlzdHJ1
Y3QgYWRyZW5vX2dwdSAqYWRyZW5vX2dwdSA9IHRvX2FkcmVub19ncHUoZ3B1KTsKKwl1MzIgbWFz
ayA9IDB4ZjsKKworCS8qIEE1MTAgaGFzIDMgWElOIHBvcnRzIGluIFZCSUYgKi8KKwlpZiAoYWRy
ZW5vX2lzX2E1MTAoYWRyZW5vX2dwdSkpCisJCW1hc2sgPSAweDc7CisKIAkvKiBDbGVhciB0aGUg
VkJJRiBwaXBlIGJlZm9yZSBzaHV0dGluZyBkb3duICovCi0JZ3B1X3dyaXRlKGdwdSwgUkVHX0E1
WFhfVkJJRl9YSU5fSEFMVF9DVFJMMCwgMHhGKTsKLQlzcGluX3VudGlsKChncHVfcmVhZChncHUs
IFJFR19BNVhYX1ZCSUZfWElOX0hBTFRfQ1RSTDEpICYgMHhGKSA9PSAweEYpOworCWdwdV93cml0
ZShncHUsIFJFR19BNVhYX1ZCSUZfWElOX0hBTFRfQ1RSTDAsIG1hc2spOworCXNwaW5fdW50aWwo
KGdwdV9yZWFkKGdwdSwgUkVHX0E1WFhfVkJJRl9YSU5fSEFMVF9DVFJMMSkgJgorCQkJCW1hc2sp
ID09IG1hc2spOwogCiAJZ3B1X3dyaXRlKGdwdSwgUkVHX0E1WFhfVkJJRl9YSU5fSEFMVF9DVFJM
MCwgMCk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E1eHhfcG93
ZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E1eHhfcG93ZXIuYwppbmRleCBhM2Ew
NmRiNjc1YmEuLjMyMWE4MDYxZmQzMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9h
ZHJlbm8vYTV4eF9wb3dlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E1eHhf
cG93ZXIuYwpAQCAtMjk3LDYgKzI5NywxMCBAQCBpbnQgYTV4eF9wb3dlcl9pbml0KHN0cnVjdCBt
c21fZ3B1ICpncHUpCiAJc3RydWN0IGFkcmVub19ncHUgKmFkcmVub19ncHUgPSB0b19hZHJlbm9f
Z3B1KGdwdSk7CiAJaW50IHJldDsKIAorCS8qIE5vdCBhbGwgQTV4eCBjaGlwcyBoYXZlIGEgR1BN
VSAqLworCWlmIChhZHJlbm9faXNfYTUxMChhZHJlbm9fZ3B1KSkKKwkJcmV0dXJuIDA7CisKIAkv
KiBTZXQgdXAgdGhlIGxpbWl0cyBtYW5hZ2VtZW50ICovCiAJaWYgKGFkcmVub19pc19hNTMwKGFk
cmVub19ncHUpKQogCQlhNTMwX2xtX3NldHVwKGdwdSk7CkBAIC0zMjYsNiArMzMwLDkgQEAgdm9p
ZCBhNXh4X2dwbXVfdWNvZGVfaW5pdChzdHJ1Y3QgbXNtX2dwdSAqZ3B1KQogCXVuc2lnbmVkIGlu
dCAqZGF0YSwgKnB0ciwgKmNtZHM7CiAJdW5zaWduZWQgaW50IGNtZHNfc2l6ZTsKIAorCWlmIChh
ZHJlbm9faXNfYTUxMChhZHJlbm9fZ3B1KSkKKwkJcmV0dXJuOworCiAJaWYgKGE1eHhfZ3B1LT5n
cG11X2JvKQogCQlyZXR1cm47CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRy
ZW5vL2FkcmVub19kZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19k
ZXZpY2UuYwppbmRleCA0MDEzM2E0Mzk2MGMuLmQwY2Q2YmMwMTIzYiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2RldmljZS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9tc20vYWRyZW5vL2FkcmVub19kZXZpY2UuYwpAQCAtMTE0LDYgKzExNCwyMSBAQCBzdGF0
aWMgY29uc3Qgc3RydWN0IGFkcmVub19pbmZvIGdwdWxpc3RbXSA9IHsKIAkJLmdtZW0gID0gKFNa
XzFNICsgU1pfNTEySyksCiAJCS5pbmFjdGl2ZV9wZXJpb2QgPSBEUk1fTVNNX0lOQUNUSVZFX1BF
UklPRCwKIAkJLmluaXQgID0gYTR4eF9ncHVfaW5pdCwKKwl9LCB7CisJCS5yZXYgICA9IEFEUkVO
T19SRVYoNSwgMSwgMCwgQU5ZX0lEKSwKKwkJLnJldm4gPSA1MTAsCisJCS5uYW1lID0gIkE1MTAi
LAorCQkuZncgPSB7CisJCQlbQURSRU5PX0ZXX1BNNF0gPSAiYTUzMF9wbTQuZnciLAorCQkJW0FE
UkVOT19GV19QRlBdID0gImE1MzBfcGZwLmZ3IiwKKwkJfSwKKwkJLmdtZW0gPSBTWl8yNTZLLAor
CQkvKgorCQkgKiBJbmNyZWFzZSBpbmFjdGl2ZSBwZXJpb2QgdG8gMjUwIHRvIGF2b2lkIGJvdW5j
aW5nCisJCSAqIHRoZSBHRFNDIHdoaWNoIGFwcGVhcnMgdG8gbWFrZSBpdCBncnVtcHkKKwkJICov
CisJCS5pbmFjdGl2ZV9wZXJpb2QgPSAyNTAsCisJCS5pbml0ID0gYTV4eF9ncHVfaW5pdCwKIAl9
LCB7CiAJCS5yZXYgPSBBRFJFTk9fUkVWKDUsIDMsIDAsIDIpLAogCQkucmV2biA9IDUzMCwKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUuaCBiL2RyaXZl
cnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUuaAppbmRleCBjNzQ0MWZiODMxM2UuLjlm
OTM5MTZjODkxMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYWRyZW5v
X2dwdS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUuaApAQCAt
MjA2LDYgKzIwNiwxMSBAQCBzdGF0aWMgaW5saW5lIGludCBhZHJlbm9faXNfYTQzMChzdHJ1Y3Qg
YWRyZW5vX2dwdSAqZ3B1KQogICAgICAgIHJldHVybiBncHUtPnJldm4gPT0gNDMwOwogfQogCitz
dGF0aWMgaW5saW5lIGludCBhZHJlbm9faXNfYTUxMChzdHJ1Y3QgYWRyZW5vX2dwdSAqZ3B1KQor
eworCXJldHVybiBncHUtPnJldm4gPT0gNTEwOworfQorCiBzdGF0aWMgaW5saW5lIGludCBhZHJl
bm9faXNfYTUzMChzdHJ1Y3QgYWRyZW5vX2dwdSAqZ3B1KQogewogCXJldHVybiBncHUtPnJldm4g
PT0gNTMwOwotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9k
cmktZGV2ZWw=
