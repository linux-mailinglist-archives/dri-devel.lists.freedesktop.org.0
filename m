Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CCDB7B6A10
	for <lists+dri-devel@lfdr.de>; Wed, 18 Sep 2019 19:55:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 227E86F62F;
	Wed, 18 Sep 2019 17:55:33 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x32b.google.com (mail-wm1-x32b.google.com
 [IPv6:2a00:1450:4864:20::32b])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 95E676F610
 for <dri-devel@lists.freedesktop.org>; Wed, 18 Sep 2019 17:55:29 +0000 (UTC)
Received: by mail-wm1-x32b.google.com with SMTP id 3so1042643wmi.3
 for <dri-devel@lists.freedesktop.org>; Wed, 18 Sep 2019 10:55:29 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=ho1LQMIIQ97XIEoVYAf5CIZaPAfuRW7Cy16MxRs6ujQ=;
 b=eB4p/kN4/73rRZEoGequ5qIG8dR5d4Mp2pswWqMNmdURbyLhe7Mu1W3LdlMBugNI4X
 gH3I0nZB23Qe/bex9oH6hrd3bT7J8wpBYgAiWnU4Or6CcxCJ6E32Ca9EuhPii8PI6+Oy
 D238xxiPEmRBe0/S5rS0TQ4i8Fxj8m32rBEX6Qq4sVT80jB4hLtJSn1Rh2zP+YrxH9U3
 LrDSySTuZxMW4wdD7jMzKJFSO5RIOppZ/1T5TQuQture4xEP+DbPHTgW7nSQES8c5mBW
 CCDR2MWsCt8LMrmsTSd1XRrgxCmPbd/NCeExhdw4JZnNNagaolZMF/2oB33IlsMYS59X
 WELg==
X-Gm-Message-State: APjAAAXj5q8XOh9gnGsUsTtoUMHjdApyz/aKmJfRbuJpaoDIeWNpwZdQ
 tByP56xXEGzzsnb+V6BeOkNG4fJC
X-Google-Smtp-Source: APXvYqzQg3ToFRk1PeghwFyRpg+5dQFEdUeTj50aVbA24YhfSNWvUZtM98Oh3Q/XHRBCswFoyI19Dg==
X-Received: by 2002:a1c:1bcf:: with SMTP id b198mr4139859wmb.0.1568829327086; 
 Wed, 18 Sep 2019 10:55:27 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:f002:ffad:c852:eff6])
 by smtp.gmail.com with ESMTPSA id q3sm4074027wru.33.2019.09.18.10.55.26
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 18 Sep 2019 10:55:26 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org, linux-media@vger.kernel.org,
 chris@chris-wilson.co.uk, daniel@ffwll.ch, sumit.semwal@linaro.org
Subject: [PATCH 2/3] drm/ttm: switch ttm_execbuf_util to new drm_resv_ctx
Date: Wed, 18 Sep 2019 19:55:24 +0200
Message-Id: <20190918175525.49441-2-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190918175525.49441-1-christian.koenig@amd.com>
References: <20190918175525.49441-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=ho1LQMIIQ97XIEoVYAf5CIZaPAfuRW7Cy16MxRs6ujQ=;
 b=Ksm+3Di0ABS6Qg9FjzyrKFN8JI6d2swkzFHRdfYn4PN8JAf8uMgJ+P4LVQJlwDobb/
 Iun2TMSjMsxOC+Cb/aaWN5lrksjUX5YhO7Ce0iwDIg9IWTb27601EPhlh6KCCgvfFuUK
 evaJOZpMeP5X6RI8T2B08t9sUw7nWcDoDj1OuczTKYdH3YzD2l0UmPQmeeIjtj7kmvsD
 WFkmysSFYzNIDa1iLYsjjG9UNlFoqEJgAepLFH4MS6h/31HwUOOYb1jLMn6GcRK2Kgyf
 olUsQvDE/fsB49+Io4sRHqv8SyZfHZs6yujaNP9ATuK4FRkGypVQ9NU8Jozt+ATxrxJq
 Xfqg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q2hhbmdlIHR0bV9leGVjYnVmX3V0aWwgdG8gdXNlIHRoZSBuZXcgcmVzZXJ2YXRpb24gY29udGV4
dApvYmplY3QgZm9yIGRlYWRsb2NrIGhhbmRsaW5nLgoKU2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFu
IEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdS5oICAgICAgICAgICB8ICAgMiArLQogLi4uL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMgIHwgICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfY3MuYyAgICAgICAgfCAgIDQgKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9jc2EuYyAgICAgICB8ICAgMiArLQogZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2dlbS5jICAgICAgIHwgICA0ICstCiAuLi4vZ3B1L2RybS9hbWQvZGlzcGxh
eS9hbWRncHVfZG0vYW1kZ3B1X2RtLmMgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9xeGwvcXhs
X2Rydi5oICAgICAgICAgICAgICAgICB8ICAgMiArLQogZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxf
cmVsZWFzZS5jICAgICAgICAgICAgIHwgICAyICstCiBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3Jh
ZGVvbi5oICAgICAgICAgICAgICAgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFk
ZW9uX2dlbS5jICAgICAgICAgICB8ICAgMiArLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRl
b25fb2JqZWN0LmMgICAgICAgIHwgICAyICstCiBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVv
bl9vYmplY3QuaCAgICAgICAgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2V4ZWNi
dWZfdXRpbC5jICAgICAgICB8IDExNyArKysrKysrKy0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2Ry
bS92bXdnZngvdm13Z2Z4X3Jlc291cmNlLmMgICAgICB8ICAgOCArLQogZHJpdmVycy9ncHUvZHJt
L3Ztd2dmeC92bXdnZnhfdmFsaWRhdGlvbi5oICAgIHwgICAyICstCiBpbmNsdWRlL2RybS90dG0v
dHRtX2V4ZWNidWZfdXRpbC5oICAgICAgICAgICAgfCAgMTMgKy0KIDE2IGZpbGVzIGNoYW5nZWQs
IDc4IGluc2VydGlvbnMoKyksIDkyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1LmgKaW5kZXggODE5OWQyMDFiNDNhLi4wNjQ0ODI5ZDk5MGUgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdS5oCkBAIC00NjUsNyArNDY1LDcgQEAgc3RydWN0IGFtZGdwdV9jc19w
YXJzZXIgewogCXN0cnVjdCBkcm1fc2NoZWRfZW50aXR5CSplbnRpdHk7CiAKIAkvKiBidWZmZXIg
b2JqZWN0cyAqLwotCXN0cnVjdCB3d19hY3F1aXJlX2N0eAkJdGlja2V0OworCXN0cnVjdCBkbWFf
cmVzdl9jdHgJCXRpY2tldDsKIAlzdHJ1Y3QgYW1kZ3B1X2JvX2xpc3QJCSpib19saXN0OwogCXN0
cnVjdCBhbWRncHVfbW4JCSptbjsKIAlzdHJ1Y3QgYW1kZ3B1X2JvX2xpc3RfZW50cnkJdm1fcGQ7
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dw
dXZtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMK
aW5kZXggNzZlMzUxNjQ4NGU3Li5iOWJiMzVkMTY5OWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ3B1dm0uYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMKQEAgLTU0MCw3ICs1NDAsNyBAQCBz
dHJ1Y3QgYm9fdm1fcmVzZXJ2YXRpb25fY29udGV4dCB7CiAJc3RydWN0IGFtZGdwdV9ib19saXN0
X2VudHJ5IGtmZF9ibzsgLyogQk8gbGlzdCBlbnRyeSBmb3IgdGhlIEtGRCBCTyAqLwogCXVuc2ln
bmVkIGludCBuX3ZtczsJCSAgICAvKiBOdW1iZXIgb2YgVk1zIHJlc2VydmVkCSAgICAqLwogCXN0
cnVjdCBhbWRncHVfYm9fbGlzdF9lbnRyeSAqdm1fcGQ7IC8qIEFycmF5IG9mIFZNIEJPIGxpc3Qg
ZW50cmllcyAgKi8KLQlzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0OwkgICAgLyogUmVzZXJ2
YXRpb24gdGlja2V0CSAgICAqLworCXN0cnVjdCBkbWFfcmVzdl9jdHggdGlja2V0OyAgLyogUmVz
ZXJ2YXRpb24gdGlja2V0CSAgICAqLwogCXN0cnVjdCBsaXN0X2hlYWQgbGlzdCwgZHVwbGljYXRl
czsgIC8qIEJPIGxpc3RzCQkJICAgICovCiAJc3RydWN0IGFtZGdwdV9zeW5jICpzeW5jOwkgICAg
LyogUG9pbnRlciB0byBzeW5jIG9iamVjdAkgICAgKi8KIAlib29sIHJlc2VydmVkOwkJCSAgICAv
KiBXaGV0aGVyIEJPcyBhcmUgcmVzZXJ2ZWQJICAgICovCkBAIC0xNzYwLDcgKzE3NjAsNyBAQCBz
dGF0aWMgaW50IHZhbGlkYXRlX2ludmFsaWRfdXNlcl9wYWdlcyhzdHJ1Y3QgYW1ka2ZkX3Byb2Nl
c3NfaW5mbyAqcHJvY2Vzc19pbmZvKQogewogCXN0cnVjdCBhbWRncHVfYm9fbGlzdF9lbnRyeSAq
cGRfYm9fbGlzdF9lbnRyaWVzOwogCXN0cnVjdCBsaXN0X2hlYWQgcmVzdl9saXN0LCBkdXBsaWNh
dGVzOwotCXN0cnVjdCB3d19hY3F1aXJlX2N0eCB0aWNrZXQ7CisJc3RydWN0IGRtYV9yZXN2X2N0
eCB0aWNrZXQ7CiAJc3RydWN0IGFtZGdwdV9zeW5jIHN5bmM7CiAKIAlzdHJ1Y3QgYW1kZ3B1X3Zt
ICpwZWVyX3ZtOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2NzLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYwppbmRleCAyMjIz
NmQzNjdlMjYuLjk1ZWM5NjVmY2MyZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2NzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2NzLmMKQEAgLTEzMjUsNyArMTMyNSw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3N1Ym1pdChz
dHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCwKIAlhbWRncHVfam9iX2ZyZWVfcmVzb3VyY2VzKGpv
Yik7CiAKIAl0cmFjZV9hbWRncHVfY3NfaW9jdGwoam9iKTsKLQlhbWRncHVfdm1fYm9fdHJhY2Vf
Y3MoJmZwcml2LT52bSwgJnAtPnRpY2tldCk7CisJYW1kZ3B1X3ZtX2JvX3RyYWNlX2NzKCZmcHJp
di0+dm0sICZwLT50aWNrZXQuYmFzZSk7CiAJcHJpb3JpdHkgPSBqb2ItPmJhc2Uuc19wcmlvcml0
eTsKIAlkcm1fc2NoZWRfZW50aXR5X3B1c2hfam9iKCZqb2ItPmJhc2UsIGVudGl0eSk7CiAKQEAg
LTE3MjksNyArMTcyOSw3IEBAIGludCBhbWRncHVfY3NfZmluZF9tYXBwaW5nKHN0cnVjdCBhbWRn
cHVfY3NfcGFyc2VyICpwYXJzZXIsCiAJKm1hcCA9IG1hcHBpbmc7CiAKIAkvKiBEb3VibGUgY2hl
Y2sgdGhhdCB0aGUgQk8gaXMgcmVzZXJ2ZWQgYnkgdGhpcyBDUyAqLwotCWlmIChkbWFfcmVzdl9s
b2NraW5nX2N0eCgoKmJvKS0+dGJvLmJhc2UucmVzdikgIT0gJnBhcnNlci0+dGlja2V0KQorCWlm
IChkbWFfcmVzdl9sb2NraW5nX2N0eCgoKmJvKS0+dGJvLmJhc2UucmVzdikgIT0gJnBhcnNlci0+
dGlja2V0LmJhc2UpCiAJCXJldHVybiAtRUlOVkFMOwogCiAJaWYgKCEoKCpibyktPmZsYWdzICYg
QU1ER1BVX0dFTV9DUkVBVEVfVlJBTV9DT05USUdVT1VTKSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2NzYS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2NzYS5jCmluZGV4IDM1YThkM2M5NmZjOS4uNjA1ZjgzMDQ2MDM5IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3NhLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2NzYS5jCkBAIC02Niw3ICs2Niw3IEBAIGlu
dCBhbWRncHVfbWFwX3N0YXRpY19jc2Eoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVj
dCBhbWRncHVfdm0gKnZtLAogCQkJICBzdHJ1Y3QgYW1kZ3B1X2JvICpibywgc3RydWN0IGFtZGdw
dV9ib192YSAqKmJvX3ZhLAogCQkJICB1aW50NjRfdCBjc2FfYWRkciwgdWludDMyX3Qgc2l6ZSkK
IHsKLQlzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0OworCXN0cnVjdCBkbWFfcmVzdl9jdHgg
dGlja2V0OwogCXN0cnVjdCBsaXN0X2hlYWQgbGlzdDsKIAlzdHJ1Y3QgYW1kZ3B1X2JvX2xpc3Rf
ZW50cnkgcGQ7CiAJc3RydWN0IHR0bV92YWxpZGF0ZV9idWZmZXIgY3NhX3R2OwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dlbS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dlbS5jCmluZGV4IDQwZjY3M2NmYmJmZS4uYjI1YTU5YzRi
ZWM2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ2VtLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dlbS5jCkBAIC0xNjIsNyAr
MTYyLDcgQEAgdm9pZCBhbWRncHVfZ2VtX29iamVjdF9jbG9zZShzdHJ1Y3QgZHJtX2dlbV9vYmpl
Y3QgKm9iaiwKIAlzdHJ1Y3QgYW1kZ3B1X2JvX2xpc3RfZW50cnkgdm1fcGQ7CiAJc3RydWN0IGxp
c3RfaGVhZCBsaXN0LCBkdXBsaWNhdGVzOwogCXN0cnVjdCB0dG1fdmFsaWRhdGVfYnVmZmVyIHR2
OwotCXN0cnVjdCB3d19hY3F1aXJlX2N0eCB0aWNrZXQ7CisJc3RydWN0IGRtYV9yZXN2X2N0eCB0
aWNrZXQ7CiAJc3RydWN0IGFtZGdwdV9ib192YSAqYm9fdmE7CiAJaW50IHI7CiAKQEAgLTU0OSw3
ICs1NDksNyBAQCBpbnQgYW1kZ3B1X2dlbV92YV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LCB2b2lkICpkYXRhLAogCXN0cnVjdCBhbWRncHVfYm9fdmEgKmJvX3ZhOwogCXN0cnVjdCBhbWRn
cHVfYm9fbGlzdF9lbnRyeSB2bV9wZDsKIAlzdHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZlciB0djsK
LQlzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0OworCXN0cnVjdCBkbWFfcmVzdl9jdHggdGlj
a2V0OwogCXN0cnVjdCBsaXN0X2hlYWQgbGlzdCwgZHVwbGljYXRlczsKIAl1aW50NjRfdCB2YV9m
bGFnczsKIAlpbnQgciA9IDA7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3Bs
YXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2Ft
ZGdwdV9kbS9hbWRncHVfZG0uYwppbmRleCA3NjBhZjY2OGY2NzguLjVkZjJlZTFlMTBkOCAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG0u
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5j
CkBAIC00NDE2LDcgKzQ0MTYsNyBAQCBzdGF0aWMgaW50IGRtX3BsYW5lX2hlbHBlcl9wcmVwYXJl
X2ZiKHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAogCXN0cnVjdCBkbV9wbGFuZV9zdGF0ZSAqZG1f
cGxhbmVfc3RhdGVfbmV3LCAqZG1fcGxhbmVfc3RhdGVfb2xkOwogCXN0cnVjdCBsaXN0X2hlYWQg
bGlzdDsKIAlzdHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZlciB0djsKLQlzdHJ1Y3Qgd3dfYWNxdWly
ZV9jdHggdGlja2V0OworCXN0cnVjdCBkbWFfcmVzdl9jdHggdGlja2V0OwogCXVpbnQ2NF90IHRp
bGluZ19mbGFnczsKIAl1aW50MzJfdCBkb21haW47CiAJaW50IHI7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vcXhsL3F4bF9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX2Rydi5o
CmluZGV4IGQ0MDUxNDA5Y2U2NC4uMzc4YjJjODE5MjBhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vcXhsL3F4bF9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9kcnYuaApA
QCAtMTU0LDcgKzE1NCw3IEBAIHN0cnVjdCBxeGxfcmVsZWFzZSB7CiAJc3RydWN0IHF4bF9ibyAq
cmVsZWFzZV9ibzsKIAl1aW50MzJfdCByZWxlYXNlX29mZnNldDsKIAl1aW50MzJfdCBzdXJmYWNl
X3JlbGVhc2VfaWQ7Ci0Jc3RydWN0IHd3X2FjcXVpcmVfY3R4IHRpY2tldDsKKwlzdHJ1Y3QgZG1h
X3Jlc3ZfY3R4IHRpY2tldDsKIAlzdHJ1Y3QgbGlzdF9oZWFkIGJvczsKIH07CiAKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3JlbGVhc2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9x
eGwvcXhsX3JlbGVhc2UuYwppbmRleCAzMTIyMTZjYWVlYTIuLmFhN2EyODc5NTY0NSAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfcmVsZWFzZS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9xeGwvcXhsX3JlbGVhc2UuYwpAQCAtNDYzLDYgKzQ2Myw2IEBAIHZvaWQgcXhsX3JlbGVh
c2VfZmVuY2VfYnVmZmVyX29iamVjdHMoc3RydWN0IHF4bF9yZWxlYXNlICpyZWxlYXNlKQogCQlk
bWFfcmVzdl91bmxvY2soYm8tPmJhc2UucmVzdik7CiAJfQogCXNwaW5fdW5sb2NrKCZnbG9iLT5s
cnVfbG9jayk7Ci0Jd3dfYWNxdWlyZV9maW5pKCZyZWxlYXNlLT50aWNrZXQpOworCWRtYV9yZXN2
X2N0eF9maW5pKCZyZWxlYXNlLT50aWNrZXQpOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vcmFkZW9uL3JhZGVvbi5oIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb24uaApp
bmRleCBkZTFkMDkwZGYwMzQuLjVhYWRiNTU3MzFjMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL3JhZGVvbi9yYWRlb24uaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbi5o
CkBAIC0xMDgzLDcgKzEwODMsNyBAQCBzdHJ1Y3QgcmFkZW9uX2NzX3BhcnNlciB7CiAJdTMyCQkJ
Y3NfZmxhZ3M7CiAJdTMyCQkJcmluZzsKIAlzMzIJCQlwcmlvcml0eTsKLQlzdHJ1Y3Qgd3dfYWNx
dWlyZV9jdHgJdGlja2V0OworCXN0cnVjdCBkbWFfcmVzdl9jdHgJdGlja2V0OwogfTsKIAogc3Rh
dGljIGlubGluZSB1MzIgcmFkZW9uX2dldF9pYl92YWx1ZShzdHJ1Y3QgcmFkZW9uX2NzX3BhcnNl
ciAqcCwgaW50IGlkeCkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9u
X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fZ2VtLmMKaW5kZXggNGNmNThk
YmJlNDM5Li5jNDhjMmZiMzU0NTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24v
cmFkZW9uX2dlbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2dlbS5jCkBA
IC01NDksNyArNTQ5LDcgQEAgc3RhdGljIHZvaWQgcmFkZW9uX2dlbV92YV91cGRhdGVfdm0oc3Ry
dWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYsCiB7CiAJc3RydWN0IHR0bV92YWxpZGF0ZV9idWZmZXIg
dHYsICplbnRyeTsKIAlzdHJ1Y3QgcmFkZW9uX2JvX2xpc3QgKnZtX2JvczsKLQlzdHJ1Y3Qgd3df
YWNxdWlyZV9jdHggdGlja2V0OworCXN0cnVjdCBkbWFfcmVzdl9jdHggdGlja2V0OwogCXN0cnVj
dCBsaXN0X2hlYWQgbGlzdDsKIAl1bnNpZ25lZCBkb21haW47CiAJaW50IHI7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9yYWRlb24vcmFkZW9uX29iamVjdC5jCmluZGV4IDJhYmUxZWFiNDcxZi4uNjUzZmQ3OTM3YjM5
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuYwpAQCAtNTMxLDcgKzUzMSw3
IEBAIHN0YXRpYyB1NjQgcmFkZW9uX2JvX2dldF90aHJlc2hvbGRfZm9yX21vdmVzKHN0cnVjdCBy
YWRlb25fZGV2aWNlICpyZGV2KQogfQogCiBpbnQgcmFkZW9uX2JvX2xpc3RfdmFsaWRhdGUoc3Ry
dWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYsCi0JCQkgICAgc3RydWN0IHd3X2FjcXVpcmVfY3R4ICp0
aWNrZXQsCisJCQkgICAgc3RydWN0IGRtYV9yZXN2X2N0eCAqdGlja2V0LAogCQkJICAgIHN0cnVj
dCBsaXN0X2hlYWQgKmhlYWQsIGludCByaW5nKQogewogCXN0cnVjdCB0dG1fb3BlcmF0aW9uX2N0
eCBjdHggPSB7IHRydWUsIGZhbHNlIH07CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFk
ZW9uL3JhZGVvbl9vYmplY3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX29iamVj
dC5oCmluZGV4IGQyM2YyZWQ0MTI2ZS4uZTU2MzhjOTE5Yzk4IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFk
ZW9uL3JhZGVvbl9vYmplY3QuaApAQCAtMTQxLDcgKzE0MSw3IEBAIGV4dGVybiB2b2lkIHJhZGVv
bl9ib19mb3JjZV9kZWxldGUoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpOwogZXh0ZXJuIGlu
dCByYWRlb25fYm9faW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldik7CiBleHRlcm4gdm9p
ZCByYWRlb25fYm9fZmluaShzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldik7CiBleHRlcm4gaW50
IHJhZGVvbl9ib19saXN0X3ZhbGlkYXRlKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2LAotCQkJ
CSAgIHN0cnVjdCB3d19hY3F1aXJlX2N0eCAqdGlja2V0LAorCQkJCSAgIHN0cnVjdCBkbWFfcmVz
dl9jdHggKnRpY2tldCwKIAkJCQkgICBzdHJ1Y3QgbGlzdF9oZWFkICpoZWFkLCBpbnQgcmluZyk7
CiBleHRlcm4gaW50IHJhZGVvbl9ib19zZXRfdGlsaW5nX2ZsYWdzKHN0cnVjdCByYWRlb25fYm8g
KmJvLAogCQkJCXUzMiB0aWxpbmdfZmxhZ3MsIHUzMiBwaXRjaCk7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vdHRtL3R0bV9leGVjYnVmX3V0aWwuYyBiL2RyaXZlcnMvZ3B1L2RybS90dG0v
dHRtX2V4ZWNidWZfdXRpbC5jCmluZGV4IDEzMWRhZThmNDE3MC4uNzExNDhjODNjYzRmIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9leGVjYnVmX3V0aWwuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vdHRtL3R0bV9leGVjYnVmX3V0aWwuYwpAQCAtMzMsMTYgKzMzLDYgQEAKICNp
bmNsdWRlIDxsaW51eC9zY2hlZC5oPgogI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgogCi1zdGF0
aWMgdm9pZCB0dG1fZXVfYmFja29mZl9yZXNlcnZhdGlvbl9yZXZlcnNlKHN0cnVjdCBsaXN0X2hl
YWQgKmxpc3QsCi0JCQkJCSAgICAgIHN0cnVjdCB0dG1fdmFsaWRhdGVfYnVmZmVyICplbnRyeSkK
LXsKLQlsaXN0X2Zvcl9lYWNoX2VudHJ5X2NvbnRpbnVlX3JldmVyc2UoZW50cnksIGxpc3QsIGhl
YWQpIHsKLQkJc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibyA9IGVudHJ5LT5ibzsKLQotCQlk
bWFfcmVzdl91bmxvY2soYm8tPmJhc2UucmVzdik7Ci0JfQotfQotCiBzdGF0aWMgdm9pZCB0dG1f
ZXVfZGVsX2Zyb21fbHJ1X2xvY2tlZChzdHJ1Y3QgbGlzdF9oZWFkICpsaXN0KQogewogCXN0cnVj
dCB0dG1fdmFsaWRhdGVfYnVmZmVyICplbnRyeTsKQEAgLTUzLDcgKzQzLDcgQEAgc3RhdGljIHZv
aWQgdHRtX2V1X2RlbF9mcm9tX2xydV9sb2NrZWQoc3RydWN0IGxpc3RfaGVhZCAqbGlzdCkKIAl9
CiB9CiAKLXZvaWQgdHRtX2V1X2JhY2tvZmZfcmVzZXJ2YXRpb24oc3RydWN0IHd3X2FjcXVpcmVf
Y3R4ICp0aWNrZXQsCit2b2lkIHR0bV9ldV9iYWNrb2ZmX3Jlc2VydmF0aW9uKHN0cnVjdCBkbWFf
cmVzdl9jdHggKnRpY2tldCwKIAkJCQlzdHJ1Y3QgbGlzdF9oZWFkICpsaXN0KQogewogCXN0cnVj
dCB0dG1fdmFsaWRhdGVfYnVmZmVyICplbnRyeTsKQEAgLTcxLDEyICs2MSwxNSBAQCB2b2lkIHR0
bV9ldV9iYWNrb2ZmX3Jlc2VydmF0aW9uKHN0cnVjdCB3d19hY3F1aXJlX2N0eCAqdGlja2V0LAog
CiAJCWlmIChsaXN0X2VtcHR5KCZiby0+bHJ1KSkKIAkJCXR0bV9ib19hZGRfdG9fbHJ1KGJvKTsK
LQkJZG1hX3Jlc3ZfdW5sb2NrKGJvLT5iYXNlLnJlc3YpOworCQlpZiAoIXRpY2tldCkKKwkJCWRt
YV9yZXN2X3VubG9jayhiby0+YmFzZS5yZXN2KTsKIAl9CiAJc3Bpbl91bmxvY2soJmdsb2ItPmxy
dV9sb2NrKTsKIAotCWlmICh0aWNrZXQpCi0JCXd3X2FjcXVpcmVfZmluaSh0aWNrZXQpOworCWlm
ICh0aWNrZXQpIHsKKwkJZG1hX3Jlc3ZfY3R4X3VubG9ja19hbGwodGlja2V0KTsKKwkJZG1hX3Jl
c3ZfY3R4X2ZpbmkodGlja2V0KTsKKwl9CiB9CiBFWFBPUlRfU1lNQk9MKHR0bV9ldV9iYWNrb2Zm
X3Jlc2VydmF0aW9uKTsKIApAQCAtOTIsMTIgKzg1LDEyIEBAIEVYUE9SVF9TWU1CT0wodHRtX2V1
X2JhY2tvZmZfcmVzZXJ2YXRpb24pOwogICogYnVmZmVycyBpbiBkaWZmZXJlbnQgb3JkZXJzLgog
ICovCiAKLWludCB0dG1fZXVfcmVzZXJ2ZV9idWZmZXJzKHN0cnVjdCB3d19hY3F1aXJlX2N0eCAq
dGlja2V0LAoraW50IHR0bV9ldV9yZXNlcnZlX2J1ZmZlcnMoc3RydWN0IGRtYV9yZXN2X2N0eCAq
dGlja2V0LAogCQkJICAgc3RydWN0IGxpc3RfaGVhZCAqbGlzdCwgYm9vbCBpbnRyLAogCQkJICAg
c3RydWN0IGxpc3RfaGVhZCAqZHVwcywgYm9vbCBkZWxfbHJ1KQogewotCXN0cnVjdCB0dG1fYm9f
Z2xvYmFsICpnbG9iOwogCXN0cnVjdCB0dG1fdmFsaWRhdGVfYnVmZmVyICplbnRyeTsKKwlzdHJ1
Y3QgdHRtX2JvX2dsb2JhbCAqZ2xvYjsKIAlpbnQgcmV0OwogCiAJaWYgKGxpc3RfZW1wdHkobGlz
dCkpCkBAIC0xMDcsNzAgKzEwMCw0NiBAQCBpbnQgdHRtX2V1X3Jlc2VydmVfYnVmZmVycyhzdHJ1
Y3Qgd3dfYWNxdWlyZV9jdHggKnRpY2tldCwKIAlnbG9iID0gZW50cnktPmJvLT5iZGV2LT5nbG9i
OwogCiAJaWYgKHRpY2tldCkKLQkJd3dfYWNxdWlyZV9pbml0KHRpY2tldCwgJnJlc2VydmF0aW9u
X3d3X2NsYXNzKTsKKwkJZG1hX3Jlc3ZfY3R4X2luaXQodGlja2V0KTsKIAorcmV0cnk6CiAJbGlz
dF9mb3JfZWFjaF9lbnRyeShlbnRyeSwgbGlzdCwgaGVhZCkgewogCQlzdHJ1Y3QgdHRtX2J1ZmZl
cl9vYmplY3QgKmJvID0gZW50cnktPmJvOwogCi0JCXJldCA9IF9fdHRtX2JvX3Jlc2VydmUoYm8s
IGludHIsICh0aWNrZXQgPT0gTlVMTCksIHRpY2tldCk7Ci0JCWlmICghcmV0ICYmIHVubGlrZWx5
KGF0b21pY19yZWFkKCZiby0+Y3B1X3dyaXRlcnMpID4gMCkpIHsKLQkJCWRtYV9yZXN2X3VubG9j
ayhiby0+YmFzZS5yZXN2KTsKKwkJaWYgKGxpa2VseSh0aWNrZXQpKSB7CisJCQlyZXQgPSBkbWFf
cmVzdl9jdHhfbG9jayh0aWNrZXQsIGJvLT5iYXNlLnJlc3YsIGludHIpOworCQkJaWYgKHJldCA9
PSAtRURFQURMSykKKwkJCQlnb3RvIHJldHJ5OworCQl9IGVsc2UgeworCQkJcmV0ID0gZG1hX3Jl
c3ZfdHJ5bG9jayhiby0+YmFzZS5yZXN2KSA/IDAgOiAtRUJVU1k7CisJCX0KIAorCQlpZiAoIXJl
dCAmJiB1bmxpa2VseShhdG9taWNfcmVhZCgmYm8tPmNwdV93cml0ZXJzKSA+IDApKSB7CisJCQlp
ZiAoIXRpY2tldCkKKwkJCQlkbWFfcmVzdl91bmxvY2soYm8tPmJhc2UucmVzdik7CiAJCQlyZXQg
PSAtRUJVU1k7CiAKIAkJfSBlbHNlIGlmIChyZXQgPT0gLUVBTFJFQURZICYmIGR1cHMpIHsKIAkJ
CXN0cnVjdCB0dG1fdmFsaWRhdGVfYnVmZmVyICpzYWZlID0gZW50cnk7CisKIAkJCWVudHJ5ID0g
bGlzdF9wcmV2X2VudHJ5KGVudHJ5LCBoZWFkKTsKIAkJCWxpc3RfZGVsKCZzYWZlLT5oZWFkKTsK
IAkJCWxpc3RfYWRkKCZzYWZlLT5oZWFkLCBkdXBzKTsKIAkJCWNvbnRpbnVlOwogCQl9CiAKLQkJ
aWYgKCFyZXQpIHsKLQkJCWlmICghZW50cnktPm51bV9zaGFyZWQpCi0JCQkJY29udGludWU7CisJ
CWlmICh1bmxpa2VseShyZXQpKQorCQkJZ290byBlcnJvcjsKIAotCQkJcmV0ID0gZG1hX3Jlc3Zf
cmVzZXJ2ZV9zaGFyZWQoYm8tPmJhc2UucmVzdiwKLQkJCQkJCQkJZW50cnktPm51bV9zaGFyZWQp
OwotCQkJaWYgKCFyZXQpCi0JCQkJY29udGludWU7Ci0JCX0KLQotCQkvKiB1aCBvaCwgd2UgbG9z
dCBvdXQsIGRyb3AgZXZlcnkgcmVzZXJ2YXRpb24gYW5kIHRyeQotCQkgKiB0byBvbmx5IHJlc2Vy
dmUgdGhpcyBidWZmZXIsIHRoZW4gc3RhcnQgb3ZlciBpZgotCQkgKiB0aGlzIHN1Y2NlZWRzLgot
CQkgKi8KLQkJdHRtX2V1X2JhY2tvZmZfcmVzZXJ2YXRpb25fcmV2ZXJzZShsaXN0LCBlbnRyeSk7
Ci0KLQkJaWYgKHJldCA9PSAtRURFQURMSykgewotCQkJaWYgKGludHIpIHsKLQkJCQlyZXQgPSBk
bWFfcmVzdl9sb2NrX3Nsb3dfaW50ZXJydXB0aWJsZShiby0+YmFzZS5yZXN2LAotCQkJCQkJCQkJ
CSB0aWNrZXQpOwotCQkJfSBlbHNlIHsKLQkJCQlkbWFfcmVzdl9sb2NrX3Nsb3coYm8tPmJhc2Uu
cmVzdiwgdGlja2V0KTsKLQkJCQlyZXQgPSAwOwotCQkJfQotCQl9CisJCWlmICghZW50cnktPm51
bV9zaGFyZWQpCisJCQljb250aW51ZTsKIAotCQlpZiAoIXJldCAmJiBlbnRyeS0+bnVtX3NoYXJl
ZCkKLQkJCXJldCA9IGRtYV9yZXN2X3Jlc2VydmVfc2hhcmVkKGJvLT5iYXNlLnJlc3YsCi0JCQkJ
CQkJCWVudHJ5LT5udW1fc2hhcmVkKTsKLQotCQlpZiAodW5saWtlbHkocmV0ICE9IDApKSB7Ci0J
CQlpZiAocmV0ID09IC1FSU5UUikKLQkJCQlyZXQgPSAtRVJFU1RBUlRTWVM7Ci0JCQlpZiAodGlj
a2V0KSB7Ci0JCQkJd3dfYWNxdWlyZV9kb25lKHRpY2tldCk7Ci0JCQkJd3dfYWNxdWlyZV9maW5p
KHRpY2tldCk7Ci0JCQl9Ci0JCQlyZXR1cm4gcmV0OworCQlyZXQgPSBkbWFfcmVzdl9yZXNlcnZl
X3NoYXJlZChiby0+YmFzZS5yZXN2LCBlbnRyeS0+bnVtX3NoYXJlZCk7CisJCWlmICh1bmxpa2Vs
eShyZXQpKSB7CisJCQlpZiAoIXRpY2tldCkKKwkJCQlkbWFfcmVzdl91bmxvY2soYm8tPmJhc2Uu
cmVzdik7CisJCQlnb3RvIGVycm9yOwogCQl9Ci0KLQkJLyogbW92ZSB0aGlzIGl0ZW0gdG8gdGhl
IGZyb250IG9mIHRoZSBsaXN0LAotCQkgKiBmb3JjZXMgY29ycmVjdCBpdGVyYXRpb24gb2YgdGhl
IGxvb3Agd2l0aG91dCBrZWVwaW5nIHRyYWNrCi0JCSAqLwotCQlsaXN0X2RlbCgmZW50cnktPmhl
YWQpOwotCQlsaXN0X2FkZCgmZW50cnktPmhlYWQsIGxpc3QpOwogCX0KIAogCWlmIChkZWxfbHJ1
KSB7CkBAIC0xNzksMTAgKzE0OCwyMyBAQCBpbnQgdHRtX2V1X3Jlc2VydmVfYnVmZmVycyhzdHJ1
Y3Qgd3dfYWNxdWlyZV9jdHggKnRpY2tldCwKIAkJc3Bpbl91bmxvY2soJmdsb2ItPmxydV9sb2Nr
KTsKIAl9CiAJcmV0dXJuIDA7CisKK2Vycm9yOgorCWlmIChyZXQgPT0gLUVJTlRSKQorCQlyZXQg
PSAtRVJFU1RBUlRTWVM7CisJaWYgKHRpY2tldCkgeworCQlkbWFfcmVzdl9jdHhfdW5sb2NrX2Fs
bCh0aWNrZXQpOworCQlkbWFfcmVzdl9jdHhfZG9uZSh0aWNrZXQpOworCQlkbWFfcmVzdl9jdHhf
ZmluaSh0aWNrZXQpOworCX0gZWxzZSB7CisJCWxpc3RfZm9yX2VhY2hfZW50cnlfY29udGludWVf
cmV2ZXJzZShlbnRyeSwgbGlzdCwgaGVhZCkKKwkJCWRtYV9yZXN2X3VubG9jayhlbnRyeS0+Ym8t
PmJhc2UucmVzdik7CisJfQorCXJldHVybiByZXQ7CiB9CiBFWFBPUlRfU1lNQk9MKHR0bV9ldV9y
ZXNlcnZlX2J1ZmZlcnMpOwogCi12b2lkIHR0bV9ldV9mZW5jZV9idWZmZXJfb2JqZWN0cyhzdHJ1
Y3Qgd3dfYWNxdWlyZV9jdHggKnRpY2tldCwKK3ZvaWQgdHRtX2V1X2ZlbmNlX2J1ZmZlcl9vYmpl
Y3RzKHN0cnVjdCBkbWFfcmVzdl9jdHggKnRpY2tldCwKIAkJCQkgc3RydWN0IGxpc3RfaGVhZCAq
bGlzdCwKIAkJCQkgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCiB7CkBAIC0yMDgsMTAgKzE5MCwx
MyBAQCB2b2lkIHR0bV9ldV9mZW5jZV9idWZmZXJfb2JqZWN0cyhzdHJ1Y3Qgd3dfYWNxdWlyZV9j
dHggKnRpY2tldCwKIAkJCXR0bV9ib19hZGRfdG9fbHJ1KGJvKTsKIAkJZWxzZQogCQkJdHRtX2Jv
X21vdmVfdG9fbHJ1X3RhaWwoYm8sIE5VTEwpOwotCQlkbWFfcmVzdl91bmxvY2soYm8tPmJhc2Uu
cmVzdik7CisJCWlmICghdGlja2V0KQorCQkJZG1hX3Jlc3ZfdW5sb2NrKGJvLT5iYXNlLnJlc3Yp
OwogCX0KIAlzcGluX3VubG9jaygmZ2xvYi0+bHJ1X2xvY2spOwotCWlmICh0aWNrZXQpCi0JCXd3
X2FjcXVpcmVfZmluaSh0aWNrZXQpOworCWlmICh0aWNrZXQpIHsKKwkJZG1hX3Jlc3ZfY3R4X3Vu
bG9ja19hbGwodGlja2V0KTsKKwkJZG1hX3Jlc3ZfY3R4X2ZpbmkodGlja2V0KTsKKwl9CiB9CiBF
WFBPUlRfU1lNQk9MKHR0bV9ldV9mZW5jZV9idWZmZXJfb2JqZWN0cyk7CmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9yZXNvdXJjZS5jIGIvZHJpdmVycy9ncHUvZHJt
L3Ztd2dmeC92bXdnZnhfcmVzb3VyY2UuYwppbmRleCAwYjU0NzI0NTA2MzMuLjJkN2M1YWQyNTM1
OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfcmVzb3VyY2UuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9yZXNvdXJjZS5jCkBAIC00NDMsNyAr
NDQzLDcgQEAgdm9pZCB2bXdfcmVzb3VyY2VfdW5yZXNlcnZlKHN0cnVjdCB2bXdfcmVzb3VyY2Ug
KnJlcywKICAqICAgICAgICAgICAgICAgICAgcmVzZXJ2ZWQgYW5kIHZhbGlkYXRlZCBiYWNrdXAg
YnVmZmVyLgogICovCiBzdGF0aWMgaW50Ci12bXdfcmVzb3VyY2VfY2hlY2tfYnVmZmVyKHN0cnVj
dCB3d19hY3F1aXJlX2N0eCAqdGlja2V0LAordm13X3Jlc291cmNlX2NoZWNrX2J1ZmZlcihzdHJ1
Y3QgZG1hX3Jlc3ZfY3R4ICp0aWNrZXQsCiAJCQkgIHN0cnVjdCB2bXdfcmVzb3VyY2UgKnJlcywK
IAkJCSAgYm9vbCBpbnRlcnJ1cHRpYmxlLAogCQkJICBzdHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZl
ciAqdmFsX2J1ZikKQEAgLTUzNSw3ICs1MzUsNyBAQCBpbnQgdm13X3Jlc291cmNlX3Jlc2VydmUo
c3RydWN0IHZtd19yZXNvdXJjZSAqcmVzLCBib29sIGludGVycnVwdGlibGUsCiAgKiBAdmFsX2J1
ZjogICAgICAgIEJhY2t1cCBidWZmZXIgaW5mb3JtYXRpb24uCiAgKi8KIHN0YXRpYyB2b2lkCi12
bXdfcmVzb3VyY2VfYmFja29mZl9yZXNlcnZhdGlvbihzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggKnRp
Y2tldCwKK3Ztd19yZXNvdXJjZV9iYWNrb2ZmX3Jlc2VydmF0aW9uKHN0cnVjdCBkbWFfcmVzdl9j
dHggKnRpY2tldCwKIAkJCQkgc3RydWN0IHR0bV92YWxpZGF0ZV9idWZmZXIgKnZhbF9idWYpCiB7
CiAJc3RydWN0IGxpc3RfaGVhZCB2YWxfbGlzdDsKQEAgLTU1OCw3ICs1NTgsNyBAQCB2bXdfcmVz
b3VyY2VfYmFja29mZl9yZXNlcnZhdGlvbihzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggKnRpY2tldCwK
ICAqIEByZXM6ICAgICAgICAgICAgVGhlIHJlc291cmNlIHRvIGV2aWN0LgogICogQGludGVycnVw
dGlibGU6ICBXaGV0aGVyIHRvIHdhaXQgaW50ZXJydXB0aWJsZS4KICAqLwotc3RhdGljIGludCB2
bXdfcmVzb3VyY2VfZG9fZXZpY3Qoc3RydWN0IHd3X2FjcXVpcmVfY3R4ICp0aWNrZXQsCitzdGF0
aWMgaW50IHZtd19yZXNvdXJjZV9kb19ldmljdChzdHJ1Y3QgZG1hX3Jlc3ZfY3R4ICp0aWNrZXQs
CiAJCQkJIHN0cnVjdCB2bXdfcmVzb3VyY2UgKnJlcywgYm9vbCBpbnRlcnJ1cHRpYmxlKQogewog
CXN0cnVjdCB0dG1fdmFsaWRhdGVfYnVmZmVyIHZhbF9idWY7CkBAIC04MjIsNyArODIyLDcgQEAg
c3RhdGljIHZvaWQgdm13X3Jlc291cmNlX2V2aWN0X3R5cGUoc3RydWN0IHZtd19wcml2YXRlICpk
ZXZfcHJpdiwKIAlzdHJ1Y3Qgdm13X3Jlc291cmNlICpldmljdF9yZXM7CiAJdW5zaWduZWQgZXJy
X2NvdW50ID0gMDsKIAlpbnQgcmV0OwotCXN0cnVjdCB3d19hY3F1aXJlX2N0eCB0aWNrZXQ7CisJ
c3RydWN0IGRtYV9yZXN2X2N0eCB0aWNrZXQ7CiAKIAlkbyB7CiAJCXNwaW5fbG9jaygmZGV2X3By
aXYtPnJlc291cmNlX2xvY2spOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92
bXdnZnhfdmFsaWRhdGlvbi5oIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfdmFsaWRh
dGlvbi5oCmluZGV4IDFkMjMyMmFkNmZkNS4uNDNmNDhkZjM4NDRmIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF92YWxpZGF0aW9uLmgKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3Ztd2dmeC92bXdnZnhfdmFsaWRhdGlvbi5oCkBAIC03Nyw3ICs3Nyw3IEBAIHN0cnVjdCB2
bXdfdmFsaWRhdGlvbl9jb250ZXh0IHsKIAlzdHJ1Y3QgbGlzdF9oZWFkIHJlc291cmNlX2N0eF9s
aXN0OwogCXN0cnVjdCBsaXN0X2hlYWQgYm9fbGlzdDsKIAlzdHJ1Y3QgbGlzdF9oZWFkIHBhZ2Vf
bGlzdDsKLQlzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0OworCXN0cnVjdCBkbWFfcmVzdl9j
dHggdGlja2V0OwogCXN0cnVjdCBtdXRleCAqcmVzX211dGV4OwogCXVuc2lnbmVkIGludCBtZXJn
ZV9kdXBzOwogCXVuc2lnbmVkIGludCBtZW1fc2l6ZV9sZWZ0OwpkaWZmIC0tZ2l0IGEvaW5jbHVk
ZS9kcm0vdHRtL3R0bV9leGVjYnVmX3V0aWwuaCBiL2luY2x1ZGUvZHJtL3R0bS90dG1fZXhlY2J1
Zl91dGlsLmgKaW5kZXggN2U0NmNjNjc4ZTdlLi40ZTg2YjZmZDZjNTcgMTAwNjQ0Ci0tLSBhL2lu
Y2x1ZGUvZHJtL3R0bS90dG1fZXhlY2J1Zl91dGlsLmgKKysrIGIvaW5jbHVkZS9kcm0vdHRtL3R0
bV9leGVjYnVmX3V0aWwuaApAQCAtMzIsNiArMzIsNyBAQAogI2RlZmluZSBfVFRNX0VYRUNCVUZf
VVRJTF9IXwogCiAjaW5jbHVkZSA8bGludXgvbGlzdC5oPgorI2luY2x1ZGUgPGxpbnV4L2RtYS1y
ZXN2LWN0eC5oPgogCiAjaW5jbHVkZSAidHRtX2JvX2FwaS5oIgogCkBAIC01MiwyMCArNTMsMjAg
QEAgc3RydWN0IHR0bV92YWxpZGF0ZV9idWZmZXIgewogLyoqCiAgKiBmdW5jdGlvbiB0dG1fZXVf
YmFja29mZl9yZXNlcnZhdGlvbgogICoKLSAqIEB0aWNrZXQ6ICAgd3dfYWNxdWlyZV9jdHggZnJv
bSByZXNlcnZlIGNhbGwKKyAqIEB0aWNrZXQ6ICAgcmVzZXJ2YXRpb25fY29udGV4dCBmcm9tIHJl
c2VydmUgY2FsbAogICogQGxpc3Q6ICAgICB0aHJlYWQgcHJpdmF0ZSBsaXN0IG9mIHR0bV92YWxp
ZGF0ZV9idWZmZXIgc3RydWN0cy4KICAqCiAgKiBVbmRvZXMgYWxsIGJ1ZmZlciB2YWxpZGF0aW9u
IHJlc2VydmF0aW9ucyBmb3IgYm9zIHBvaW50ZWQgdG8gYnkKICAqIHRoZSBsaXN0IGVudHJpZXMu
CiAgKi8KIAotZXh0ZXJuIHZvaWQgdHRtX2V1X2JhY2tvZmZfcmVzZXJ2YXRpb24oc3RydWN0IHd3
X2FjcXVpcmVfY3R4ICp0aWNrZXQsCitleHRlcm4gdm9pZCB0dG1fZXVfYmFja29mZl9yZXNlcnZh
dGlvbihzdHJ1Y3QgZG1hX3Jlc3ZfY3R4ICp0aWNrZXQsCiAJCQkJICAgICAgIHN0cnVjdCBsaXN0
X2hlYWQgKmxpc3QpOwogCiAvKioKICAqIGZ1bmN0aW9uIHR0bV9ldV9yZXNlcnZlX2J1ZmZlcnMK
ICAqCi0gKiBAdGlja2V0OiAgW291dF0gd3dfYWNxdWlyZV9jdHggZmlsbGVkIGluIGJ5IGNhbGws
IG9yIE5VTEwgaWYgb25seQorICogQHRpY2tldDogIFtvdXRdIHJlc2VydmF0aW9uX2NvbnRleHQg
ZmlsbGVkIGluIGJ5IGNhbGxlciwgb3IgTlVMTCBpZiBvbmx5CiAgKiAgICAgICAgICAgbm9uLWJs
b2NraW5nIHJlc2VydmVzIHNob3VsZCBiZSB0cmllZC4KICAqIEBsaXN0OiAgICB0aHJlYWQgcHJp
dmF0ZSBsaXN0IG9mIHR0bV92YWxpZGF0ZV9idWZmZXIgc3RydWN0cy4KICAqIEBpbnRyOiAgICBz
aG91bGQgdGhlIHdhaXQgYmUgaW50ZXJydXB0aWJsZQpAQCAtOTcsMTQgKzk4LDE0IEBAIGV4dGVy
biB2b2lkIHR0bV9ldV9iYWNrb2ZmX3Jlc2VydmF0aW9uKHN0cnVjdCB3d19hY3F1aXJlX2N0eCAq
dGlja2V0LAogICogaGFzIGZhaWxlZC4KICAqLwogCi1leHRlcm4gaW50IHR0bV9ldV9yZXNlcnZl
X2J1ZmZlcnMoc3RydWN0IHd3X2FjcXVpcmVfY3R4ICp0aWNrZXQsCitleHRlcm4gaW50IHR0bV9l
dV9yZXNlcnZlX2J1ZmZlcnMoc3RydWN0IGRtYV9yZXN2X2N0eCAqdGlja2V0LAogCQkJCSAgc3Ry
dWN0IGxpc3RfaGVhZCAqbGlzdCwgYm9vbCBpbnRyLAogCQkJCSAgc3RydWN0IGxpc3RfaGVhZCAq
ZHVwcywgYm9vbCBkZWxfbHJ1KTsKIAogLyoqCiAgKiBmdW5jdGlvbiB0dG1fZXVfZmVuY2VfYnVm
ZmVyX29iamVjdHMuCiAgKgotICogQHRpY2tldDogICAgICB3d19hY3F1aXJlX2N0eCBmcm9tIHJl
c2VydmUgY2FsbAorICogQHRpY2tldDogICAgICByZXNlcnZhdGlvbl9jb250ZXh0IGZyb20gcmVz
ZXJ2ZSBjYWxsCiAgKiBAbGlzdDogICAgICAgIHRocmVhZCBwcml2YXRlIGxpc3Qgb2YgdHRtX3Zh
bGlkYXRlX2J1ZmZlciBzdHJ1Y3RzLgogICogQGZlbmNlOiAgICAgICBUaGUgbmV3IGV4Y2x1c2l2
ZSBmZW5jZSBmb3IgdGhlIGJ1ZmZlcnMuCiAgKgpAQCAtMTE0LDcgKzExNSw3IEBAIGV4dGVybiBp
bnQgdHRtX2V1X3Jlc2VydmVfYnVmZmVycyhzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggKnRpY2tldCwK
ICAqCiAgKi8KIAotZXh0ZXJuIHZvaWQgdHRtX2V1X2ZlbmNlX2J1ZmZlcl9vYmplY3RzKHN0cnVj
dCB3d19hY3F1aXJlX2N0eCAqdGlja2V0LAorZXh0ZXJuIHZvaWQgdHRtX2V1X2ZlbmNlX2J1ZmZl
cl9vYmplY3RzKHN0cnVjdCBkbWFfcmVzdl9jdHggKnRpY2tldCwKIAkJCQkJc3RydWN0IGxpc3Rf
aGVhZCAqbGlzdCwKIAkJCQkJc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpOwogCi0tIAoyLjE3LjEK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZl
bCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
