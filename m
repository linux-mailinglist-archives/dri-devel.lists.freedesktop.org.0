Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AC75FD8995
	for <lists+dri-devel@lfdr.de>; Wed, 16 Oct 2019 09:34:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C5E526E8D5;
	Wed, 16 Oct 2019 07:34:23 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd42.google.com (mail-io1-xd42.google.com
 [IPv6:2607:f8b0:4864:20::d42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 714446E392
 for <dri-devel@lists.freedesktop.org>; Tue, 15 Oct 2019 18:16:19 +0000 (UTC)
Received: by mail-io1-xd42.google.com with SMTP id b136so48187844iof.3
 for <dri-devel@lists.freedesktop.org>; Tue, 15 Oct 2019 11:16:19 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=WfIQH4tk+jUOonGw5eHzSQiiQvMtZVfR6+iWlPPVdkI=;
 b=aINRkhW6KcCzlXVO8geca7iCj7IbpF2Oznve2shUd/YnIZ5SJSzVaSHiObWOW5VxV2
 NTSCdDSnlSMWXPfLagvSEH3Xh353UX4Pk9tK+Hqs/Jd2ZvN8LeSL6PeD4LATpbAnAkla
 4MyZr3o5QyMTS6Uny9ekuYoDS2dZoull9udhxiXw7LmzhUPtD+yxfJHo3CoOR5hPUn0z
 fP4duY0daAjYtQDSHaG3xRL7jXLe/yGwNgqIeCdgiSb9YgSqv3XfLS3EHGTc3CytGDbG
 qkMUjf0590a3nPkLGUFL9V7l4RShtB1xIzhcvW5mcoaJksIE/8v6NiT+lWjy/euZmaIv
 QHaw==
X-Gm-Message-State: APjAAAWcxeFJVFq/Gt+r+VC0g5NTNAbbIphlB3OWvplT11KWvHS+hzcX
 H5ZVWmNzlro7AGBRX2kWtseg6KbaQM2JGw==
X-Google-Smtp-Source: APXvYqxEjrp/uDemzyvVkjQc4L3qEF8AW7ZLBXVDwz8QrvvO4wa36cushKl2306+frYUuWXlDw8kNg==
X-Received: by 2002:a92:de02:: with SMTP id x2mr7816727ilm.168.1571163378684; 
 Tue, 15 Oct 2019 11:16:18 -0700 (PDT)
Received: from ziepe.ca ([24.114.26.129])
 by smtp.gmail.com with ESMTPSA id f12sm13969106iob.58.2019.10.15.11.16.17
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Tue, 15 Oct 2019 11:16:18 -0700 (PDT)
Received: from jgg by jggl.ziepe.ca with local (Exim 4.90_1)
 (envelope-from <jgg@ziepe.ca>)
 id 1iKRJT-0002Cp-QA; Tue, 15 Oct 2019 15:12:51 -0300
From: Jason Gunthorpe <jgg@ziepe.ca>
To: Jerome Glisse <jglisse@redhat.com>, Ralph Campbell <rcampbell@nvidia.com>,
 John Hubbard <jhubbard@nvidia.com>, Felix.Kuehling@amd.com
Subject: [PATCH hmm 14/15] drm/amdgpu: Use mmu_range_notifier instead of
 hmm_mirror
Date: Tue, 15 Oct 2019 15:12:41 -0300
Message-Id: <20191015181242.8343-15-jgg@ziepe.ca>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191015181242.8343-1-jgg@ziepe.ca>
References: <20191015181242.8343-1-jgg@ziepe.ca>
MIME-Version: 1.0
X-Mailman-Approved-At: Wed, 16 Oct 2019 07:33:45 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ziepe.ca; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=WfIQH4tk+jUOonGw5eHzSQiiQvMtZVfR6+iWlPPVdkI=;
 b=Gkpgm7IB9R36HOjU9V5xHkyYVZnXK17gB3WuhrLWKOvMJVvWgaNEPUNRRA79lhLrun
 u4cUOqpyKACjKLXAQhAKpjMEzrhgHRDnltmeUMduk7Di6yCu8GeKoJdPZIRao7aQ7/3d
 VdQ6/woDJz9R7+KfpiCnYOPiDVsRvy5gyhU8lQ/Afsr1kofR+cd+x+mLJsAWs3q2Wuhb
 4NwkGQAG/3oglPKjNhiwLXqqcxa56WqECl2fsX78Du3tgzeUFo2eE9yJLd4ybhRA+d3m
 HiXQTHjnTyDLKphGQSUL+6lZdKVzzRox/x1CqlUqK51Rg9t8TkFtWG+YFmwv410Q69IE
 YJsw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Andrea Arcangeli <aarcange@redhat.com>, linux-rdma@vger.kernel.org,
 amd-gfx@lists.freedesktop.org, linux-mm@kvack.org,
 Jason Gunthorpe <jgg@mellanox.com>, dri-devel@lists.freedesktop.org,
 Alex Deucher <alexander.deucher@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Ben Skeggs <bskeggs@redhat.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogSmFzb24gR3VudGhvcnBlIDxqZ2dAbWVsbGFub3guY29tPgoKQ29udmVydCB0aGUgY29s
bGlzaW9uLXJldHJ5IGxvY2sgYXJvdW5kIGhtbV9yYW5nZV9mYXVsdCB0byB1c2UgdGhlIG9uZSBu
b3cKcHJvdmlkZWQgYnkgdGhlIG1tdV9yYW5nZSBub3RpZmllci4KCkFsdGhvdWdoIHRoaXMgZHJp
dmVyIGRvZXMgbm90IHNlZW0gdG8gdXNlIHRoZSBjb2xsaXNpb24gcmV0cnkgbG9jayB0aGF0Cmht
bSBwcm92aWRlcyBjb3JyZWN0bHksIGl0IGNhbiBzdGlsbCBiZSBjb252ZXJ0ZWQgb3ZlciB0byB1
c2UgdGhlCm1tdV9yYW5nZV9ub3RpZmllciBhcGkgaW5zdGVhZCBvZiBobW1fbWlycm9yIHdpdGhv
dXQgdG9vIG11Y2ggdHJvdWJsZS4KClRoaXMgYWxzbyBkZWxldGVzIGFub3RoZXIgcGxhY2Ugd2hl
cmUgYSBkcml2ZXIgaXMgYXNzb2NpYXRpbmcgYWRkaXRpb25hbApkYXRhIChzdHJ1Y3QgYW1kZ3B1
X21uKSB3aXRoIGEgbW11X3N0cnVjdC4KCkNjOiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVj
aGVyQGFtZC5jb20+CkNjOiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5j
b20+CkNjOiBEYXZpZCAoQ2h1bk1pbmcpIFpob3UgPERhdmlkMS5aaG91QGFtZC5jb20+CkNjOiBh
bWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpTaWduZWQtb2ZmLWJ5OiBKYXNvbiBHdW50aG9y
cGUgPGpnZ0BtZWxsYW5veC5jb20+Ci0tLQogLi4uL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
YW1ka2ZkX2dwdXZtLmMgIHwgICA0ICsKIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9jcy5jICAgICAgICB8ICAxNCArLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X21uLmMgICAgICAgIHwgMTMwIC0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X21uLmggICAgICAgIHwgIDQ5IC0tLS0tLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYyAgICAgICB8ICA3NiArKysrKy0tLS0tCiA1IGZpbGVz
IGNoYW5nZWQsIDUwIGluc2VydGlvbnMoKyksIDIyMyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMKaW5kZXggNDc3MDAz
MDJhMDhiN2YuLjFiY2VkYjliNDc3ZGNlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2FtZGtmZF9ncHV2bS5jCkBAIC0xNzM4LDYgKzE3MzgsMTAgQEAgc3RhdGlj
IGludCB1cGRhdGVfaW52YWxpZF91c2VyX3BhZ2VzKHN0cnVjdCBhbWRrZmRfcHJvY2Vzc19pbmZv
ICpwcm9jZXNzX2luZm8sCiAJCQlyZXR1cm4gcmV0OwogCQl9CiAKKwkJLyoKKwkJICogRklYTUU6
IENhbm5vdCBpZ25vcmUgdGhlIHJldHVybiBjb2RlLCBtdXN0IGhvbGQKKwkJICogbm90aWZpZXJf
bG9jaworCQkgKi8KIAkJYW1kZ3B1X3R0bV90dF9nZXRfdXNlcl9wYWdlc19kb25lKGJvLT50Ym8u
dHRtKTsKIAogCQkvKiBNYXJrIHRoZSBCTyBhcyB2YWxpZCB1bmxlc3MgaXQgd2FzIGludmFsaWRh
dGVkCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5jCmluZGV4IDJlNTNmZWVkNDBl
MjMwLi43Njc3MWY1ZjBiNjBhYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2NzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Nz
LmMKQEAgLTYwNyw4ICs2MDcsNiBAQCBzdGF0aWMgaW50IGFtZGdwdV9jc19wYXJzZXJfYm9zKHN0
cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLAogCQllLT50di5udW1fc2hhcmVkID0gMjsKIAogCWFt
ZGdwdV9ib19saXN0X2dldF9saXN0KHAtPmJvX2xpc3QsICZwLT52YWxpZGF0ZWQpOwotCWlmIChw
LT5ib19saXN0LT5maXJzdF91c2VycHRyICE9IHAtPmJvX2xpc3QtPm51bV9lbnRyaWVzKQotCQlw
LT5tbiA9IGFtZGdwdV9tbl9nZXQocC0+YWRldiwgQU1ER1BVX01OX1RZUEVfR0ZYKTsKIAogCUlO
SVRfTElTVF9IRUFEKCZkdXBsaWNhdGVzKTsKIAlhbWRncHVfdm1fZ2V0X3BkX2JvKCZmcHJpdi0+
dm0sICZwLT52YWxpZGF0ZWQsICZwLT52bV9wZCk7CkBAIC0xMjkxLDExICsxMjg5LDExIEBAIHN0
YXRpYyBpbnQgYW1kZ3B1X2NzX3N1Ym1pdChzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCwKIAlp
ZiAocikKIAkJZ290byBlcnJvcl91bmxvY2s7CiAKLQkvKiBObyBtZW1vcnkgYWxsb2NhdGlvbiBp
cyBhbGxvd2VkIHdoaWxlIGhvbGRpbmcgdGhlIG1uIGxvY2suCi0JICogcC0+bW4gaXMgaG9sZCB1
bnRpbCBhbWRncHVfY3Nfc3VibWl0IGlzIGZpbmlzaGVkIGFuZCBmZW5jZSBpcyBhZGRlZAotCSAq
IHRvIEJPcy4KKwkvKiBObyBtZW1vcnkgYWxsb2NhdGlvbiBpcyBhbGxvd2VkIHdoaWxlIGhvbGRp
bmcgdGhlIG5vdGlmaWVyIGxvY2suCisJICogVGhlIGxvY2sgaXMgaGVsZCB1bnRpbCBhbWRncHVf
Y3Nfc3VibWl0IGlzIGZpbmlzaGVkIGFuZCBmZW5jZSBpcworCSAqIGFkZGVkIHRvIEJPcy4KIAkg
Ki8KLQlhbWRncHVfbW5fbG9jayhwLT5tbik7CisJbXV0ZXhfbG9jaygmcC0+YWRldi0+bm90aWZp
ZXJfbG9jayk7CiAKIAkvKiBJZiB1c2VycHRyIGFyZSBpbnZhbGlkYXRlZCBhZnRlciBhbWRncHVf
Y3NfcGFyc2VyX2JvcygpLCByZXR1cm4KIAkgKiAtRUFHQUlOLCBkcm1Jb2N0bCBpbiBsaWJkcm0g
d2lsbCByZXN0YXJ0IHRoZSBhbWRncHVfY3NfaW9jdGwuCkBAIC0xMzM4LDEzICsxMzM2LDEzIEBA
IHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3N1Ym1pdChzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCwK
IAlhbWRncHVfdm1fbW92ZV90b19scnVfdGFpbChwLT5hZGV2LCAmZnByaXYtPnZtKTsKIAogCXR0
bV9ldV9mZW5jZV9idWZmZXJfb2JqZWN0cygmcC0+dGlja2V0LCAmcC0+dmFsaWRhdGVkLCBwLT5m
ZW5jZSk7Ci0JYW1kZ3B1X21uX3VubG9jayhwLT5tbik7CisJbXV0ZXhfdW5sb2NrKCZwLT5hZGV2
LT5ub3RpZmllcl9sb2NrKTsKIAogCXJldHVybiAwOwogCiBlcnJvcl9hYm9ydDoKIAlkcm1fc2No
ZWRfam9iX2NsZWFudXAoJmpvYi0+YmFzZSk7Ci0JYW1kZ3B1X21uX3VubG9jayhwLT5tbik7CisJ
bXV0ZXhfdW5sb2NrKCZwLT5hZGV2LT5ub3RpZmllcl9sb2NrKTsKIAogZXJyb3JfdW5sb2NrOgog
CWFtZGdwdV9qb2JfZnJlZShqb2IpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X21uLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfbW4u
YwppbmRleCA0ZmZkN2I5MGY0ZDkwNy4uY2YxZWZlN2ZmYzNhODMgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9tbi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9tbi5jCkBAIC01MCwyOCArNTAsNiBAQAogI2luY2x1ZGUgImFtZGdw
dS5oIgogI2luY2x1ZGUgImFtZGdwdV9hbWRrZmQuaCIKIAotLyoqCi0gKiBhbWRncHVfbW5fbG9j
ayAtIHRha2UgdGhlIHdyaXRlIHNpZGUgbG9jayBmb3IgdGhpcyBub3RpZmllcgotICoKLSAqIEBt
bjogb3VyIG5vdGlmaWVyCi0gKi8KLXZvaWQgYW1kZ3B1X21uX2xvY2soc3RydWN0IGFtZGdwdV9t
biAqbW4pCi17Ci0JaWYgKG1uKQotCQlkb3duX3dyaXRlKCZtbi0+bG9jayk7Ci19Ci0KLS8qKgot
ICogYW1kZ3B1X21uX3VubG9jayAtIGRyb3AgdGhlIHdyaXRlIHNpZGUgbG9jayBmb3IgdGhpcyBu
b3RpZmllcgotICoKLSAqIEBtbjogb3VyIG5vdGlmaWVyCi0gKi8KLXZvaWQgYW1kZ3B1X21uX3Vu
bG9jayhzdHJ1Y3QgYW1kZ3B1X21uICptbikKLXsKLQlpZiAobW4pCi0JCXVwX3dyaXRlKCZtbi0+
bG9jayk7Ci19Ci0KIC8qKgogICogYW1kZ3B1X21uX2ludmFsaWRhdGVfZ2Z4IC0gY2FsbGJhY2sg
dG8gbm90aWZ5IGFib3V0IG1tIGNoYW5nZQogICoKQEAgLTE0Myw5MiArMTIxLDYgQEAgc3RhdGlj
IGNvbnN0IHN0cnVjdCBtbXVfcmFuZ2Vfbm90aWZpZXJfb3BzIGFtZGdwdV9tbl9oc2Ffb3BzID0g
ewogCS5pbnZhbGlkYXRlID0gYW1kZ3B1X21uX2ludmFsaWRhdGVfaHNhLAogfTsKIAotc3RhdGlj
IGludCBhbWRncHVfbW5fc3luY19wYWdldGFibGVzKHN0cnVjdCBobW1fbWlycm9yICptaXJyb3Is
Ci0JCQkJICAgICBjb25zdCBzdHJ1Y3QgbW11X25vdGlmaWVyX3JhbmdlICp1cGRhdGUpCi17Ci0J
c3RydWN0IGFtZGdwdV9tbiAqYW1uID0gY29udGFpbmVyX29mKG1pcnJvciwgc3RydWN0IGFtZGdw
dV9tbiwgbWlycm9yKTsKLQotCWlmICghbW11X25vdGlmaWVyX3JhbmdlX2Jsb2NrYWJsZSh1cGRh
dGUpKQotCQlyZXR1cm4gZmFsc2U7Ci0KLQlkb3duX3JlYWQoJmFtbi0+bG9jayk7Ci0JdXBfcmVh
ZCgmYW1uLT5sb2NrKTsKLQlyZXR1cm4gMDsKLX0KLQotLyogTG93IGJpdHMgb2YgYW55IHJlYXNv
bmFibGUgbW0gcG9pbnRlciB3aWxsIGJlIHVudXNlZCBkdWUgdG8gc3RydWN0Ci0gKiBhbGlnbm1l
bnQuIFVzZSB0aGVzZSBiaXRzIHRvIG1ha2UgYSB1bmlxdWUga2V5IGZyb20gdGhlIG1tIHBvaW50
ZXIKLSAqIGFuZCBub3RpZmllciB0eXBlLgotICovCi0jZGVmaW5lIEFNREdQVV9NTl9LRVkobW0s
IHR5cGUpICgodW5zaWduZWQgbG9uZykobW0pICsgKHR5cGUpKQotCi1zdGF0aWMgc3RydWN0IGht
bV9taXJyb3Jfb3BzIGFtZGdwdV9obW1fbWlycm9yX29wc1tdID0gewotCVtBTURHUFVfTU5fVFlQ
RV9HRlhdID0gewotCQkuc3luY19jcHVfZGV2aWNlX3BhZ2V0YWJsZXMgPSBhbWRncHVfbW5fc3lu
Y19wYWdldGFibGVzLAotCX0sCi0JW0FNREdQVV9NTl9UWVBFX0hTQV0gPSB7Ci0JCS5zeW5jX2Nw
dV9kZXZpY2VfcGFnZXRhYmxlcyA9IGFtZGdwdV9tbl9zeW5jX3BhZ2V0YWJsZXMsCi0JfSwKLX07
Ci0KLS8qKgotICogYW1kZ3B1X21uX2dldCAtIGNyZWF0ZSBITU0gbWlycm9yIGNvbnRleHQKLSAq
Ci0gKiBAYWRldjogYW1kZ3B1IGRldmljZSBwb2ludGVyCi0gKiBAdHlwZTogdHlwZSBvZiBNTVUg
bm90aWZpZXIgY29udGV4dAotICoKLSAqIENyZWF0ZXMgYSBITU0gbWlycm9yIGNvbnRleHQgZm9y
IGN1cnJlbnQtPm1tLgotICovCi1zdHJ1Y3QgYW1kZ3B1X21uICphbWRncHVfbW5fZ2V0KHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2LAotCQkJCWVudW0gYW1kZ3B1X21uX3R5cGUgdHlwZSkKLXsK
LQlzdHJ1Y3QgbW1fc3RydWN0ICptbSA9IGN1cnJlbnQtPm1tOwotCXN0cnVjdCBhbWRncHVfbW4g
KmFtbjsKLQl1bnNpZ25lZCBsb25nIGtleSA9IEFNREdQVV9NTl9LRVkobW0sIHR5cGUpOwotCWlu
dCByOwotCi0JbXV0ZXhfbG9jaygmYWRldi0+bW5fbG9jayk7Ci0JaWYgKGRvd25fd3JpdGVfa2ls
bGFibGUoJm1tLT5tbWFwX3NlbSkpIHsKLQkJbXV0ZXhfdW5sb2NrKCZhZGV2LT5tbl9sb2NrKTsK
LQkJcmV0dXJuIEVSUl9QVFIoLUVJTlRSKTsKLQl9Ci0KLQloYXNoX2Zvcl9lYWNoX3Bvc3NpYmxl
KGFkZXYtPm1uX2hhc2gsIGFtbiwgbm9kZSwga2V5KQotCQlpZiAoQU1ER1BVX01OX0tFWShhbW4t
Pm1pcnJvci5obW0tPm1tdV9ub3RpZmllci5tbSwKLQkJCQkgIGFtbi0+dHlwZSkgPT0ga2V5KQot
CQkJZ290byByZWxlYXNlX2xvY2tzOwotCi0JYW1uID0ga3phbGxvYyhzaXplb2YoKmFtbiksIEdG
UF9LRVJORUwpOwotCWlmICghYW1uKSB7Ci0JCWFtbiA9IEVSUl9QVFIoLUVOT01FTSk7Ci0JCWdv
dG8gcmVsZWFzZV9sb2NrczsKLQl9Ci0KLQlhbW4tPmFkZXYgPSBhZGV2OwotCWluaXRfcndzZW0o
JmFtbi0+bG9jayk7Ci0JYW1uLT50eXBlID0gdHlwZTsKLQotCWFtbi0+bWlycm9yLm9wcyA9ICZh
bWRncHVfaG1tX21pcnJvcl9vcHNbdHlwZV07Ci0JciA9IGhtbV9taXJyb3JfcmVnaXN0ZXIoJmFt
bi0+bWlycm9yLCBtbSk7Ci0JaWYgKHIpCi0JCWdvdG8gZnJlZV9hbW47Ci0KLQloYXNoX2FkZChh
ZGV2LT5tbl9oYXNoLCAmYW1uLT5ub2RlLCBBTURHUFVfTU5fS0VZKG1tLCB0eXBlKSk7Ci0KLXJl
bGVhc2VfbG9ja3M6Ci0JdXBfd3JpdGUoJm1tLT5tbWFwX3NlbSk7Ci0JbXV0ZXhfdW5sb2NrKCZh
ZGV2LT5tbl9sb2NrKTsKLQotCXJldHVybiBhbW47Ci0KLWZyZWVfYW1uOgotCXVwX3dyaXRlKCZt
bS0+bW1hcF9zZW0pOwotCW11dGV4X3VubG9jaygmYWRldi0+bW5fbG9jayk7Ci0Ja2ZyZWUoYW1u
KTsKLQotCXJldHVybiBFUlJfUFRSKHIpOwotfQotCiAvKioKICAqIGFtZGdwdV9tbl9yZWdpc3Rl
ciAtIHJlZ2lzdGVyIGEgQk8gZm9yIG5vdGlmaWVyIHVwZGF0ZXMKICAqCkBAIC0yNjMsMjUgKzE1
NSwzIEBAIHZvaWQgYW1kZ3B1X21uX3VucmVnaXN0ZXIoc3RydWN0IGFtZGdwdV9ibyAqYm8pCiAJ
bW11X3JhbmdlX25vdGlmaWVyX3JlbW92ZSgmYm8tPm5vdGlmaWVyKTsKIAliby0+bm90aWZpZXIu
bW0gPSBOVUxMOwogfQotCi0vKiBmbGFncyB1c2VkIGJ5IEhNTSBpbnRlcm5hbCwgbm90IHJlbGF0
ZWQgdG8gQ1BVL0dQVSBQVEUgZmxhZ3MgKi8KLXN0YXRpYyBjb25zdCB1aW50NjRfdCBobW1fcmFu
Z2VfZmxhZ3NbSE1NX1BGTl9GTEFHX01BWF0gPSB7Ci0JCSgxIDw8IDApLCAvKiBITU1fUEZOX1ZB
TElEICovCi0JCSgxIDw8IDEpLCAvKiBITU1fUEZOX1dSSVRFICovCi0JCTAgLyogSE1NX1BGTl9E
RVZJQ0VfUFJJVkFURSAqLwotfTsKLQotc3RhdGljIGNvbnN0IHVpbnQ2NF90IGhtbV9yYW5nZV92
YWx1ZXNbSE1NX1BGTl9WQUxVRV9NQVhdID0gewotCQkweGZmZmZmZmZmZmZmZmZmZmVVTCwgLyog
SE1NX1BGTl9FUlJPUiAqLwotCQkwLCAvKiBITU1fUEZOX05PTkUgKi8KLQkJMHhmZmZmZmZmZmZm
ZmZmZmZjVUwgLyogSE1NX1BGTl9TUEVDSUFMICovCi19OwotCi12b2lkIGFtZGdwdV9obW1faW5p
dF9yYW5nZShzdHJ1Y3QgaG1tX3JhbmdlICpyYW5nZSkKLXsKLQlpZiAocmFuZ2UpIHsKLQkJcmFu
Z2UtPmZsYWdzID0gaG1tX3JhbmdlX2ZsYWdzOwotCQlyYW5nZS0+dmFsdWVzID0gaG1tX3Jhbmdl
X3ZhbHVlczsKLQkJcmFuZ2UtPnBmbl9zaGlmdCA9IFBBR0VfU0hJRlQ7Ci0JfQotfQpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X21uLmggYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfbW4uaAppbmRleCBkNzNhYjI5NDdiMjJiMi4uYTI5MjIz
OGY3NWViYWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9t
bi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9tbi5oCkBAIC0zMCw1
OSArMzAsMTAgQEAKICNpbmNsdWRlIDxsaW51eC93b3JrcXVldWUuaD4KICNpbmNsdWRlIDxsaW51
eC9pbnRlcnZhbF90cmVlLmg+CiAKLWVudW0gYW1kZ3B1X21uX3R5cGUgewotCUFNREdQVV9NTl9U
WVBFX0dGWCwKLQlBTURHUFVfTU5fVFlQRV9IU0EsCi19OwotCi0vKioKLSAqIHN0cnVjdCBhbWRn
cHVfbW4KLSAqCi0gKiBAYWRldjogYW1kZ3B1IGRldmljZSBwb2ludGVyCi0gKiBAdHlwZTogdHlw
ZSBvZiBNTVUgbm90aWZpZXIKLSAqIEB3b3JrOiBkZXN0cnVjdGlvbiB3b3JrIGl0ZW0KLSAqIEBu
b2RlOiBoYXNoIHRhYmxlIG5vZGUgdG8gZmluZCBzdHJ1Y3R1cmUgYnkgYWRldiBhbmQgbW4KLSAq
IEBsb2NrOiBydyBzZW1hcGhvcmUgcHJvdGVjdGluZyB0aGUgbm90aWZpZXIgbm9kZXMKLSAqIEBt
aXJyb3I6IEhNTSBtaXJyb3IgZnVuY3Rpb24gc3VwcG9ydAotICoKLSAqIERhdGEgZm9yIGVhY2gg
YW1kZ3B1IGRldmljZSBhbmQgcHJvY2VzcyBhZGRyZXNzIHNwYWNlLgotICovCi1zdHJ1Y3QgYW1k
Z3B1X21uIHsKLQkvKiBjb25zdGFudCBhZnRlciBpbml0aWFsaXNhdGlvbiAqLwotCXN0cnVjdCBh
bWRncHVfZGV2aWNlCSphZGV2OwotCWVudW0gYW1kZ3B1X21uX3R5cGUJdHlwZTsKLQotCS8qIG9u
bHkgdXNlZCBvbiBkZXN0cnVjdGlvbiAqLwotCXN0cnVjdCB3b3JrX3N0cnVjdAl3b3JrOwotCi0J
LyogcHJvdGVjdGVkIGJ5IGFkZXYtPm1uX2xvY2sgKi8KLQlzdHJ1Y3QgaGxpc3Rfbm9kZQlub2Rl
OwotCi0JLyogb2JqZWN0cyBwcm90ZWN0ZWQgYnkgbG9jayAqLwotCXN0cnVjdCByd19zZW1hcGhv
cmUJbG9jazsKLQotI2lmZGVmIENPTkZJR19ITU1fTUlSUk9SCi0JLyogSE1NIG1pcnJvciAqLwot
CXN0cnVjdCBobW1fbWlycm9yCW1pcnJvcjsKLSNlbmRpZgotfTsKLQogI2lmIGRlZmluZWQoQ09O
RklHX0hNTV9NSVJST1IpCi12b2lkIGFtZGdwdV9tbl9sb2NrKHN0cnVjdCBhbWRncHVfbW4gKm1u
KTsKLXZvaWQgYW1kZ3B1X21uX3VubG9jayhzdHJ1Y3QgYW1kZ3B1X21uICptbik7Ci1zdHJ1Y3Qg
YW1kZ3B1X21uICphbWRncHVfbW5fZ2V0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAotCQkJ
CWVudW0gYW1kZ3B1X21uX3R5cGUgdHlwZSk7CiBpbnQgYW1kZ3B1X21uX3JlZ2lzdGVyKHN0cnVj
dCBhbWRncHVfYm8gKmJvLCB1bnNpZ25lZCBsb25nIGFkZHIpOwogdm9pZCBhbWRncHVfbW5fdW5y
ZWdpc3RlcihzdHJ1Y3QgYW1kZ3B1X2JvICpibyk7Ci12b2lkIGFtZGdwdV9obW1faW5pdF9yYW5n
ZShzdHJ1Y3QgaG1tX3JhbmdlICpyYW5nZSk7CiAjZWxzZQotc3RhdGljIGlubGluZSB2b2lkIGFt
ZGdwdV9tbl9sb2NrKHN0cnVjdCBhbWRncHVfbW4gKm1uKSB7fQotc3RhdGljIGlubGluZSB2b2lk
IGFtZGdwdV9tbl91bmxvY2soc3RydWN0IGFtZGdwdV9tbiAqbW4pIHt9Ci1zdGF0aWMgaW5saW5l
IHN0cnVjdCBhbWRncHVfbW4gKmFtZGdwdV9tbl9nZXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFk
ZXYsCi0JCQkJCSAgICAgIGVudW0gYW1kZ3B1X21uX3R5cGUgdHlwZSkKLXsKLQlyZXR1cm4gTlVM
TDsKLX0KIHN0YXRpYyBpbmxpbmUgaW50IGFtZGdwdV9tbl9yZWdpc3RlcihzdHJ1Y3QgYW1kZ3B1
X2JvICpibywgdW5zaWduZWQgbG9uZyBhZGRyKQogewogCURSTV9XQVJOX09OQ0UoIkhNTV9NSVJS
T1Iga2VybmVsIGNvbmZpZyBvcHRpb24gaXMgbm90IGVuYWJsZWQsICIKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV90dG0uYwppbmRleCBjMGU0MWYxZjBjMjM2NS4uNjVkOTgyNGI1NGYy
YTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKQEAgLTc3Myw2ICs3
NzMsMjAgQEAgc3RydWN0IGFtZGdwdV90dG1fdHQgewogI2VuZGlmCiB9OwogCisjaWZkZWYgQ09O
RklHX0RSTV9BTURHUFVfVVNFUlBUUgorLyogZmxhZ3MgdXNlZCBieSBITU0gaW50ZXJuYWwsIG5v
dCByZWxhdGVkIHRvIENQVS9HUFUgUFRFIGZsYWdzICovCitzdGF0aWMgY29uc3QgdWludDY0X3Qg
aG1tX3JhbmdlX2ZsYWdzW0hNTV9QRk5fRkxBR19NQVhdID0geworCSgxIDw8IDApLCAvKiBITU1f
UEZOX1ZBTElEICovCisJKDEgPDwgMSksIC8qIEhNTV9QRk5fV1JJVEUgKi8KKwkwIC8qIEhNTV9Q
Rk5fREVWSUNFX1BSSVZBVEUgKi8KK307CisKK3N0YXRpYyBjb25zdCB1aW50NjRfdCBobW1fcmFu
Z2VfdmFsdWVzW0hNTV9QRk5fVkFMVUVfTUFYXSA9IHsKKwkweGZmZmZmZmZmZmZmZmZmZmVVTCwg
LyogSE1NX1BGTl9FUlJPUiAqLworCTAsIC8qIEhNTV9QRk5fTk9ORSAqLworCTB4ZmZmZmZmZmZm
ZmZmZmZmY1VMIC8qIEhNTV9QRk5fU1BFQ0lBTCAqLworfTsKKwogLyoqCiAgKiBhbWRncHVfdHRt
X3R0X2dldF91c2VyX3BhZ2VzIC0gZ2V0IGRldmljZSBhY2Nlc3NpYmxlIHBhZ2VzIHRoYXQgYmFj
ayB1c2VyCiAgKiBtZW1vcnkgYW5kIHN0YXJ0IEhNTSB0cmFja2luZyBDUFUgcGFnZSB0YWJsZSB1
cGRhdGUKQEAgLTc4MCwyOSArNzk0LDI3IEBAIHN0cnVjdCBhbWRncHVfdHRtX3R0IHsKICAqIENh
bGxpbmcgZnVuY3Rpb24gbXVzdCBjYWxsIGFtZGdwdV90dG1fdHRfdXNlcnB0cl9yYW5nZV9kb25l
KCkgb25jZSBhbmQgb25seQogICogb25jZSBhZnRlcndhcmRzIHRvIHN0b3AgSE1NIHRyYWNraW5n
CiAgKi8KLSNpZiBJU19FTkFCTEVEKENPTkZJR19EUk1fQU1ER1BVX1VTRVJQVFIpCi0KLSNkZWZp
bmUgTUFYX1JFVFJZX0hNTV9SQU5HRV9GQVVMVAkxNgotCiBpbnQgYW1kZ3B1X3R0bV90dF9nZXRf
dXNlcl9wYWdlcyhzdHJ1Y3QgYW1kZ3B1X2JvICpibywgc3RydWN0IHBhZ2UgKipwYWdlcykKIHsK
LQlzdHJ1Y3QgaG1tX21pcnJvciAqbWlycm9yID0gYm8tPm1uID8gJmJvLT5tbi0+bWlycm9yIDog
TlVMTDsKIAlzdHJ1Y3QgdHRtX3R0ICp0dG0gPSBiby0+dGJvLnR0bTsKIAlzdHJ1Y3QgYW1kZ3B1
X3R0bV90dCAqZ3R0ID0gKHZvaWQgKil0dG07CiAJc3RydWN0IG1tX3N0cnVjdCAqbW07CisJc3Ry
dWN0IGhtbV9yYW5nZSAqcmFuZ2U7CiAJdW5zaWduZWQgbG9uZyBzdGFydCA9IGd0dC0+dXNlcnB0
cjsKIAlzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYTsKLQlzdHJ1Y3QgaG1tX3JhbmdlICpyYW5n
ZTsKIAl1bnNpZ25lZCBsb25nIGk7Ci0JdWludDY0X3QgKnBmbnM7CiAJaW50IHIgPSAwOwogCi0J
aWYgKHVubGlrZWx5KCFtaXJyb3IpKSB7Ci0JCURSTV9ERUJVR19EUklWRVIoIkZhaWxlZCB0byBn
ZXQgaG1tX21pcnJvclxuIik7CisJbW0gPSBiby0+bm90aWZpZXIubW07CisJaWYgKHVubGlrZWx5
KCFtbSkpIHsKKwkJRFJNX0RFQlVHX0RSSVZFUigiQk8gaXMgbm90IHJlZ2lzdGVyZWQ/XG4iKTsK
IAkJcmV0dXJuIC1FRkFVTFQ7CiAJfQogCi0JbW0gPSBtaXJyb3ItPmhtbS0+bW11X25vdGlmaWVy
Lm1tOworCS8qIEFub3RoZXIgZ2V0X3VzZXJfcGFnZXMgaXMgcnVubmluZyBhdCB0aGUgc2FtZSB0
aW1lPz8gKi8KKwlpZiAoV0FSTl9PTihndHQtPnJhbmdlKSkKKwkJcmV0dXJuIC1FRkFVTFQ7CisK
IAlpZiAoIW1tZ2V0X25vdF96ZXJvKG1tKSkgLyogSGFwcGVucyBkdXJpbmcgcHJvY2VzcyBzaHV0
ZG93biAqLwogCQlyZXR1cm4gLUVTUkNIOwogCkBAIC04MTEsMzAgKzgyMywyNCBAQCBpbnQgYW1k
Z3B1X3R0bV90dF9nZXRfdXNlcl9wYWdlcyhzdHJ1Y3QgYW1kZ3B1X2JvICpibywgc3RydWN0IHBh
Z2UgKipwYWdlcykKIAkJciA9IC1FTk9NRU07CiAJCWdvdG8gb3V0OwogCX0KKwlyYW5nZS0+bm90
aWZpZXIgPSAmYm8tPm5vdGlmaWVyOworCXJhbmdlLT5mbGFncyA9IGhtbV9yYW5nZV9mbGFnczsK
KwlyYW5nZS0+dmFsdWVzID0gaG1tX3JhbmdlX3ZhbHVlczsKKwlyYW5nZS0+cGZuX3NoaWZ0ID0g
UEFHRV9TSElGVDsKKwlyYW5nZS0+c3RhcnQgPSBiby0+bm90aWZpZXIuaW50ZXJ2YWxfdHJlZS5z
dGFydDsKKwlyYW5nZS0+ZW5kID0gYm8tPm5vdGlmaWVyLmludGVydmFsX3RyZWUubGFzdCArIDE7
CisJcmFuZ2UtPmRlZmF1bHRfZmxhZ3MgPSBobW1fcmFuZ2VfZmxhZ3NbSE1NX1BGTl9WQUxJRF07
CisJaWYgKCFhbWRncHVfdHRtX3R0X2lzX3JlYWRvbmx5KHR0bSkpCisJCXJhbmdlLT5kZWZhdWx0
X2ZsYWdzIHw9IHJhbmdlLT5mbGFnc1tITU1fUEZOX1dSSVRFXTsKIAotCXBmbnMgPSBrdm1hbGxv
Y19hcnJheSh0dG0tPm51bV9wYWdlcywgc2l6ZW9mKCpwZm5zKSwgR0ZQX0tFUk5FTCk7Ci0JaWYg
KHVubGlrZWx5KCFwZm5zKSkgeworCXJhbmdlLT5wZm5zID0ga3ZtYWxsb2NfYXJyYXkodHRtLT5u
dW1fcGFnZXMsIHNpemVvZigqcmFuZ2UtPnBmbnMpLAorCQkJCSAgICAgR0ZQX0tFUk5FTCk7CisJ
aWYgKHVubGlrZWx5KCFyYW5nZS0+cGZucykpIHsKIAkJciA9IC1FTk9NRU07CiAJCWdvdG8gb3V0
X2ZyZWVfcmFuZ2VzOwogCX0KIAotCWFtZGdwdV9obW1faW5pdF9yYW5nZShyYW5nZSk7Ci0JcmFu
Z2UtPmRlZmF1bHRfZmxhZ3MgPSByYW5nZS0+ZmxhZ3NbSE1NX1BGTl9WQUxJRF07Ci0JcmFuZ2Ut
PmRlZmF1bHRfZmxhZ3MgfD0gYW1kZ3B1X3R0bV90dF9pc19yZWFkb25seSh0dG0pID8KLQkJCQkw
IDogcmFuZ2UtPmZsYWdzW0hNTV9QRk5fV1JJVEVdOwotCXJhbmdlLT5wZm5fZmxhZ3NfbWFzayA9
IDA7Ci0JcmFuZ2UtPnBmbnMgPSBwZm5zOwotCXJhbmdlLT5zdGFydCA9IHN0YXJ0OwotCXJhbmdl
LT5lbmQgPSBzdGFydCArIHR0bS0+bnVtX3BhZ2VzICogUEFHRV9TSVpFOwotCi0JaG1tX3Jhbmdl
X3JlZ2lzdGVyKHJhbmdlLCBtaXJyb3IpOwotCi0JLyoKLQkgKiBKdXN0IHdhaXQgZm9yIHJhbmdl
IHRvIGJlIHZhbGlkLCBzYWZlIHRvIGlnbm9yZSByZXR1cm4gdmFsdWUgYXMgd2UKLQkgKiB3aWxs
IHVzZSB0aGUgcmV0dXJuIHZhbHVlIG9mIGhtbV9yYW5nZV9mYXVsdCgpIGJlbG93IHVuZGVyIHRo
ZQotCSAqIG1tYXBfc2VtIHRvIGFzY2VydGFpbiB0aGUgdmFsaWRpdHkgb2YgdGhlIHJhbmdlLgot
CSAqLwotCWhtbV9yYW5nZV93YWl0X3VudGlsX3ZhbGlkKHJhbmdlLCBITU1fUkFOR0VfREVGQVVM
VF9USU1FT1VUKTsKKwlyYW5nZS0+bm90aWZpZXJfc2VxID0gbW11X3JhbmdlX3JlYWRfYmVnaW4o
JmJvLT5ub3RpZmllcik7CiAKIAlkb3duX3JlYWQoJm1tLT5tbWFwX3NlbSk7CiAJdm1hID0gZmlu
ZF92bWEobW0sIHN0YXJ0KTsKQEAgLTg1NSwxMCArODYxLDEwIEBAIGludCBhbWRncHVfdHRtX3R0
X2dldF91c2VyX3BhZ2VzKHN0cnVjdCBhbWRncHVfYm8gKmJvLCBzdHJ1Y3QgcGFnZSAqKnBhZ2Vz
KQogCQlnb3RvIG91dF9mcmVlX3BmbnM7CiAKIAlmb3IgKGkgPSAwOyBpIDwgdHRtLT5udW1fcGFn
ZXM7IGkrKykgewotCQlwYWdlc1tpXSA9IGhtbV9kZXZpY2VfZW50cnlfdG9fcGFnZShyYW5nZSwg
cGZuc1tpXSk7CisJCXBhZ2VzW2ldID0gaG1tX2RldmljZV9lbnRyeV90b19wYWdlKHJhbmdlLCBy
YW5nZS0+cGZuc1tpXSk7CiAJCWlmICh1bmxpa2VseSghcGFnZXNbaV0pKSB7CiAJCQlwcl9lcnIo
IlBhZ2UgZmF1bHQgZmFpbGVkIGZvciBwZm5bJWx1XSA9IDB4JWxseFxuIiwKLQkJCSAgICAgICBp
LCBwZm5zW2ldKTsKKwkJCSAgICAgICBpLCByYW5nZS0+cGZuc1tpXSk7CiAJCQlyID0gLUVOT01F
TTsKIAogCQkJZ290byBvdXRfZnJlZV9wZm5zOwpAQCAtODczLDggKzg3OSw3IEBAIGludCBhbWRn
cHVfdHRtX3R0X2dldF91c2VyX3BhZ2VzKHN0cnVjdCBhbWRncHVfYm8gKmJvLCBzdHJ1Y3QgcGFn
ZSAqKnBhZ2VzKQogb3V0X3VubG9jazoKIAl1cF9yZWFkKCZtbS0+bW1hcF9zZW0pOwogb3V0X2Zy
ZWVfcGZuczoKLQlobW1fcmFuZ2VfdW5yZWdpc3RlcihyYW5nZSk7Ci0Ja3ZmcmVlKHBmbnMpOwor
CWt2ZnJlZShyYW5nZS0+cGZucyk7CiBvdXRfZnJlZV9yYW5nZXM6CiAJa2ZyZWUocmFuZ2UpOwog
b3V0OgpAQCAtOTAzLDkgKzkwOCw4IEBAIGJvb2wgYW1kZ3B1X3R0bV90dF9nZXRfdXNlcl9wYWdl
c19kb25lKHN0cnVjdCB0dG1fdHQgKnR0bSkKIAkJIk5vIHVzZXIgcGFnZXMgdG8gY2hlY2tcbiIp
OwogCiAJaWYgKGd0dC0+cmFuZ2UpIHsKLQkJciA9IGhtbV9yYW5nZV92YWxpZChndHQtPnJhbmdl
KTsKLQkJaG1tX3JhbmdlX3VucmVnaXN0ZXIoZ3R0LT5yYW5nZSk7Ci0KKwkJciA9IG1tdV9yYW5n
ZV9yZWFkX3JldHJ5KGd0dC0+cmFuZ2UtPm5vdGlmaWVyLAorCQkJCQkgZ3R0LT5yYW5nZS0+bm90
aWZpZXJfc2VxKTsKIAkJa3ZmcmVlKGd0dC0+cmFuZ2UtPnBmbnMpOwogCQlrZnJlZShndHQtPnJh
bmdlKTsKIAkJZ3R0LT5yYW5nZSA9IE5VTEw7Ci0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJp
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
