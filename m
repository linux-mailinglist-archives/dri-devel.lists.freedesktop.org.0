Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E9B9839BC5
	for <lists+dri-devel@lfdr.de>; Sat,  8 Jun 2019 10:19:39 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C9D14892B2;
	Sat,  8 Jun 2019 08:19:34 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lj1-x243.google.com (mail-lj1-x243.google.com
 [IPv6:2a00:1450:4864:20::243])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1A956892B1
 for <dri-devel@lists.freedesktop.org>; Sat,  8 Jun 2019 08:19:33 +0000 (UTC)
Received: by mail-lj1-x243.google.com with SMTP id t28so3667584lje.9
 for <dri-devel@lists.freedesktop.org>; Sat, 08 Jun 2019 01:19:33 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:from:to:cc:subject:date:message-id
 :in-reply-to:references:mime-version:content-transfer-encoding;
 bh=qqsrwsMqkcaXAzVzLd5SCYNwibNKyTk9KhOcLZythnk=;
 b=csoOt3LZgM3AWgbHp0M0zfchgN34k4pwiz1rR+P5Zbj+jjHT/C5VOWvSt/168jf0e2
 kVifUDnuEPQJl2gicwz5Cp+RoCjdhzBzncNoFD7imSDYVijY9g9YsBYk0WS4iaphj0Jn
 azqcrZorYC3Xs8GHK9+v2qPmh07cJip/Xz8O8V8kfJIh+N+RQJXeImKYJwjUsrm/3gAC
 4zAGstUrBh8qi5lDE1nvziuyFxNZHDVUPwvE/gstL/kXwl05aUVN5Gq9mwUmMtb1IO9d
 WB7uxCtpUX1hivk74mLFcDHVwwewDOrT9tEhm/c3pA447jzpxwBsb3z298vEkJ5FfNlu
 gWWQ==
X-Gm-Message-State: APjAAAUIA0lx3yVd/IFcZeGhmJeN5AWX91QYbjoXWBvB3jKBpA5otZna
 muCsN7GPKLe8YFquiB1s8ELwcvJISsc=
X-Google-Smtp-Source: APXvYqxhr/a9D5Xf1MHYnf2i8EdFZjXbrStzVrQi1IJ8LDxPPQ8Uf8qgXp9gIpgx3pl+AzrxPTy+SQ==
X-Received: by 2002:a2e:b0f0:: with SMTP id h16mr6180490ljl.21.1559981971279; 
 Sat, 08 Jun 2019 01:19:31 -0700 (PDT)
Received: from saturn.lan (18.158-248-194.customer.lyse.net. [158.248.194.18])
 by smtp.gmail.com with ESMTPSA id
 k82sm747311lje.30.2019.06.08.01.19.30
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Sat, 08 Jun 2019 01:19:30 -0700 (PDT)
From: Sam Ravnborg <sam@ravnborg.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v1 1/4] drm/mga: drop dependency on drm_os_linux.h
Date: Sat,  8 Jun 2019 10:19:20 +0200
Message-Id: <20190608081923.6274-2-sam@ravnborg.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190608081923.6274-1-sam@ravnborg.org>
References: <20190608081923.6274-1-sam@ravnborg.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=sender:from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=qqsrwsMqkcaXAzVzLd5SCYNwibNKyTk9KhOcLZythnk=;
 b=c8Iy16QmzKrPOgc79UNa4rnU8AZnYxuv4lFUlFMOI4yssAFeM2ZyqukQEnCF9WIS5x
 VoSnJ3nGJ4GlkObn1wYgRxmf/Z3TgtHIxtWKGMWTPc3fOnlXNH1pmKymWId2OeBEBRag
 EVCgrdvBwqTKYgYWM75sLUdh/mqXJjQCpDSpLGzkdiwb1yceh74/QyBNQsBha3LZlmrT
 As+P98MnrymSqD02FkxGoPsyKnIJ3cvGeeScmfkuf8/yiFH7TTCG1gBD2V4hleaxjgMh
 cSSMYV2y/q5mdBCyz/gH/RIHzPv1HQO6UIMd8Z8OTMLntDNdS986JwsVlbcR5getTkDc
 yfDQ==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, Sam Ravnborg <sam@ravnborg.org>,
 Thomas Zimmermann <tzimmermann@suse.de>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T3BlbmNvZGUgYWxsIG1hY3JvcyB1c2VkIGZyb20gdGhlIGRlcHJlY2F0ZWQgZHJtX29zX2xpbnV4
LmggaGVhZGVyIGZpbGUuClRoZSBEUk1fV0FJVF9PTiB1c2VkIDMgKiBIWiBhcyB0aW1lb3V0LgpU
aGlzIHdhcyB0cmFuc2xhdGVkIHRvIDMwIG1zZWMuCgpTaWduZWQtb2ZmLWJ5OiBTYW0gUmF2bmJv
cmcgPHNhbUByYXZuYm9yZy5vcmc+CkNjOiBUaG9tYXMgWmltbWVybWFubiA8dHppbW1lcm1hbm5A
c3VzZS5kZT4KQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZndsbC5jaD4KQ2M6IERhdmlkIEFp
cmxpZSA8YWlybGllZEBsaW51eC5pZT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vbWdhL21nYV9kbWEu
YyAgIHwgMTIgKysrKysrKystLS0tCiBkcml2ZXJzL2dwdS9kcm0vbWdhL21nYV9kcnYuaCAgIHwg
MTIgKysrKysrKystLS0tCiBkcml2ZXJzL2dwdS9kcm0vbWdhL21nYV9pcnEuYyAgIHwgIDggKysr
Ky0tLS0KIGRyaXZlcnMvZ3B1L2RybS9tZ2EvbWdhX3N0YXRlLmMgfCAgNiArKystLS0KIDQgZmls
ZXMgY2hhbmdlZCwgMjMgaW5zZXJ0aW9ucygrKSwgMTUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL21nYS9tZ2FfZG1hLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWdhL21n
YV9kbWEuYwppbmRleCAxZmZkYWZlYTI3ZTQuLjEyM2JlMmYzYTE1MSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL21nYS9tZ2FfZG1hLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21nYS9tZ2Ff
ZG1hLmMKQEAgLTM1LDYgKzM1LDggQEAKICAqIFxhdXRob3IgR2FyZXRoIEh1Z2hlcyA8Z2FyZXRo
QHZhbGludXguY29tPgogICovCiAKKyNpbmNsdWRlIDxsaW51eC9kZWxheS5oPgorCiAjaW5jbHVk
ZSA8ZHJtL2RybVAuaD4KICNpbmNsdWRlIDxkcm0vbWdhX2RybS5oPgogI2luY2x1ZGUgIm1nYV9k
cnYuaCIKQEAgLTYyLDcgKzY0LDcgQEAgaW50IG1nYV9kb193YWl0X2Zvcl9pZGxlKGRybV9tZ2Ff
cHJpdmF0ZV90ICpkZXZfcHJpdikKIAkJCU1HQV9XUklURTgoTUdBX0NSVENfSU5ERVgsIDApOwog
CQkJcmV0dXJuIDA7CiAJCX0KLQkJRFJNX1VERUxBWSgxKTsKKwkJdWRlbGF5KDEpOwogCX0KIAog
I2lmIE1HQV9ETUFfREVCVUcKQEAgLTExNCw3ICsxMTYsNyBAQCB2b2lkIG1nYV9kb19kbWFfZmx1
c2goZHJtX21nYV9wcml2YXRlX3QgKmRldl9wcml2KQogCQlzdGF0dXMgPSBNR0FfUkVBRChNR0Ff
U1RBVFVTKSAmIE1HQV9FTkdJTkVfSURMRV9NQVNLOwogCQlpZiAoc3RhdHVzID09IE1HQV9FTkRQ
UkRNQVNUUykKIAkJCWJyZWFrOwotCQlEUk1fVURFTEFZKDEpOworCQl1ZGVsYXkoMSk7CiAJfQog
CiAJaWYgKHByaW1hcnktPnRhaWwgPT0gcHJpbWFyeS0+bGFzdF9mbHVzaCkgewpAQCAtMTEyMCw3
ICsxMTIyLDcgQEAgaW50IG1nYV9kbWFfYnVmZmVycyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2
b2lkICpkYXRhLAogCSAqLwogCWlmIChkLT5zZW5kX2NvdW50ICE9IDApIHsKIAkJRFJNX0VSUk9S
KCJQcm9jZXNzICVkIHRyeWluZyB0byBzZW5kICVkIGJ1ZmZlcnMgdmlhIGRybURNQVxuIiwKLQkJ
CSAgRFJNX0NVUlJFTlRQSUQsIGQtPnNlbmRfY291bnQpOworCQkJICB0YXNrX3BpZF9ucihjdXJy
ZW50KSwgZC0+c2VuZF9jb3VudCk7CiAJCXJldHVybiAtRUlOVkFMOwogCX0KIApAQCAtMTEyOCw3
ICsxMTMwLDkgQEAgaW50IG1nYV9kbWFfYnVmZmVycyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2
b2lkICpkYXRhLAogCSAqLwogCWlmIChkLT5yZXF1ZXN0X2NvdW50IDwgMCB8fCBkLT5yZXF1ZXN0
X2NvdW50ID4gZG1hLT5idWZfY291bnQpIHsKIAkJRFJNX0VSUk9SKCJQcm9jZXNzICVkIHRyeWlu
ZyB0byBnZXQgJWQgYnVmZmVycyAob2YgJWQgbWF4KVxuIiwKLQkJCSAgRFJNX0NVUlJFTlRQSUQs
IGQtPnJlcXVlc3RfY291bnQsIGRtYS0+YnVmX2NvdW50KTsKKwkJCSAgdGFza19waWRfbnIoY3Vy
cmVudCksCisJCQkgIGQtPnJlcXVlc3RfY291bnQsCisJCQkgIGRtYS0+YnVmX2NvdW50KTsKIAkJ
cmV0dXJuIC1FSU5WQUw7CiAJfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWdhL21n
YV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9tZ2EvbWdhX2Rydi5oCmluZGV4IGE0NWJiMjIyNzVh
Ny4uNzg0NGE5ZTQ2M2Y2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWdhL21nYV9kcnYu
aAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbWdhL21nYV9kcnYuaApAQCAtMTk5LDEwICsxOTksMTQg
QEAgZXh0ZXJuIGxvbmcgbWdhX2NvbXBhdF9pb2N0bChzdHJ1Y3QgZmlsZSAqZmlscCwgdW5zaWdu
ZWQgaW50IGNtZCwKIAogI2RlZmluZSBtZ2FfZmx1c2hfd3JpdGVfY29tYmluZSgpCXdtYigpCiAK
LSNkZWZpbmUgTUdBX1JFQUQ4KHJlZykJCURSTV9SRUFEOChkZXZfcHJpdi0+bW1pbywgKHJlZykp
Ci0jZGVmaW5lIE1HQV9SRUFEKHJlZykJCURSTV9SRUFEMzIoZGV2X3ByaXYtPm1taW8sIChyZWcp
KQotI2RlZmluZSBNR0FfV1JJVEU4KHJlZywgdmFsKQlEUk1fV1JJVEU4KGRldl9wcml2LT5tbWlv
LCAocmVnKSwgKHZhbCkpCi0jZGVmaW5lIE1HQV9XUklURShyZWcsIHZhbCkJRFJNX1dSSVRFMzIo
ZGV2X3ByaXYtPm1taW8sIChyZWcpLCAodmFsKSkKKyNkZWZpbmUgTUdBX1JFQUQ4KHJlZykgXAor
CXJlYWRiKCgodm9pZCBfX2lvbWVtICopZGV2X3ByaXYtPm1taW8tPmhhbmRsZSkgKyAocmVnKSkK
KyNkZWZpbmUgTUdBX1JFQUQocmVnKSBcCisJcmVhZGwoKCh2b2lkIF9faW9tZW0gKilkZXZfcHJp
di0+bW1pby0+aGFuZGxlKSArIChyZWcpKQorI2RlZmluZSBNR0FfV1JJVEU4KHJlZywgdmFsKSBc
CisJd3JpdGViKHZhbCwgKCh2b2lkIF9faW9tZW0gKilkZXZfcHJpdi0+bW1pby0+aGFuZGxlKSAr
IChyZWcpKQorI2RlZmluZSBNR0FfV1JJVEUocmVnLCB2YWwpIFwKKwl3cml0ZWwodmFsLCAoKHZv
aWQgX19pb21lbSAqKWRldl9wcml2LT5tbWlvLT5oYW5kbGUpICsgKHJlZykpCiAKICNkZWZpbmUg
RFdHUkVHMAkJMHgxYzAwCiAjZGVmaW5lIERXR1JFRzBfRU5ECTB4MWRmZgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL21nYS9tZ2FfaXJxLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWdhL21nYV9p
cnEuYwppbmRleCA2OTNiYTcwOGNmZWQuLmM2YTNmYWI1YjBjNCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL21nYS9tZ2FfaXJxLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21nYS9tZ2FfaXJx
LmMKQEAgLTEyMiwxOSArMTIyLDE5IEBAIGludCBtZ2FfZHJpdmVyX2ZlbmNlX3dhaXQoc3RydWN0
IGRybV9kZXZpY2UgKmRldiwgdW5zaWduZWQgaW50ICpzZXF1ZW5jZSkKIHsKIAlkcm1fbWdhX3By
aXZhdGVfdCAqZGV2X3ByaXYgPSAoZHJtX21nYV9wcml2YXRlX3QgKikgZGV2LT5kZXZfcHJpdmF0
ZTsKIAl1bnNpZ25lZCBpbnQgY3VyX2ZlbmNlOwotCWludCByZXQgPSAwOwogCiAJLyogQXNzdW1l
IHRoYXQgdGhlIHVzZXIgaGFzIG1pc3NlZCB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIKIAkg
KiBieSBhYm91dCBhIGRheSByYXRoZXIgdGhhbiBzaGUgd2FudHMgdG8gd2FpdCBmb3IgeWVhcnMK
IAkgKiB1c2luZyBmZW5jZXMuCiAJICovCi0JRFJNX1dBSVRfT04ocmV0LCBkZXZfcHJpdi0+ZmVu
Y2VfcXVldWUsIDMgKiBIWiwKKwl3YWl0X2V2ZW50X3RpbWVvdXQoZGV2X3ByaXYtPmZlbmNlX3F1
ZXVlLAogCQkgICAgKCgoY3VyX2ZlbmNlID0gYXRvbWljX3JlYWQoJmRldl9wcml2LT5sYXN0X2Zl
bmNlX3JldGlyZWQpKQotCQkgICAgICAtICpzZXF1ZW5jZSkgPD0gKDEgPDwgMjMpKSk7CisJCSAg
ICAgIC0gKnNlcXVlbmNlKSA8PSAoMSA8PCAyMykpLAorCQkgICAgbXNlY3NfdG9famlmZmllcygz
MCkpOwogCiAJKnNlcXVlbmNlID0gY3VyX2ZlbmNlOwogCi0JcmV0dXJuIHJldDsKKwlyZXR1cm4g
MDsKIH0KIAogdm9pZCBtZ2FfZHJpdmVyX2lycV9wcmVpbnN0YWxsKHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWdhL21nYV9zdGF0ZS5jIGIvZHJp
dmVycy9ncHUvZHJtL21nYS9tZ2Ffc3RhdGUuYwppbmRleCBlNWY2YjczNWY1NzUuLjI5NmExZGI3
ZTVlZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21nYS9tZ2Ffc3RhdGUuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vbWdhL21nYV9zdGF0ZS5jCkBAIC0xMDE2LDcgKzEwMTYsNyBAQCBpbnQg
bWdhX2dldHBhcmFtKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsIHN0cnVjdCBk
cm1fZmlsZSAqZmlsZV9wcml2KQogCQlyZXR1cm4gLUVJTlZBTDsKIAl9CiAKLQlEUk1fREVCVUco
InBpZD0lZFxuIiwgRFJNX0NVUlJFTlRQSUQpOworCURSTV9ERUJVRygicGlkPSVkXG4iLCB0YXNr
X3BpZF9ucihjdXJyZW50KSk7CiAKIAlzd2l0Y2ggKHBhcmFtLT5wYXJhbSkgewogCWNhc2UgTUdB
X1BBUkFNX0lSUV9OUjoKQEAgLTEwNDgsNyArMTA0OCw3IEBAIHN0YXRpYyBpbnQgbWdhX3NldF9m
ZW5jZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLCBzdHJ1Y3QgZHJtX2ZpbGUg
KmZpCiAJCXJldHVybiAtRUlOVkFMOwogCX0KIAotCURSTV9ERUJVRygicGlkPSVkXG4iLCBEUk1f
Q1VSUkVOVFBJRCk7CisJRFJNX0RFQlVHKCJwaWQ9JWRcbiIsIHRhc2tfcGlkX25yKGN1cnJlbnQp
KTsKIAogCS8qIEkgd291bGQgbm9ybWFsIGRvIHRoaXMgYXNzaWdubWVudCBpbiB0aGUgZGVjbGFy
YXRpb24gb2YgZmVuY2UsCiAJICogYnV0IGRldl9wcml2IG1heSBiZSBOVUxMLgpAQCAtMTA3Nyw3
ICsxMDc3LDcgQEAgZmlsZV9wcml2KQogCQlyZXR1cm4gLUVJTlZBTDsKIAl9CiAKLQlEUk1fREVC
VUcoInBpZD0lZFxuIiwgRFJNX0NVUlJFTlRQSUQpOworCURSTV9ERUJVRygicGlkPSVkXG4iLCB0
YXNrX3BpZF9ucihjdXJyZW50KSk7CiAKIAltZ2FfZHJpdmVyX2ZlbmNlX3dhaXQoZGV2LCBmZW5j
ZSk7CiAJcmV0dXJuIDA7Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2RyaS1kZXZlbA==
