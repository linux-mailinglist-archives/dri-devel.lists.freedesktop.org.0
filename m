Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7BE693386D7
	for <lists+dri-devel@lfdr.de>; Fri, 12 Mar 2021 08:53:47 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2035D6F465;
	Fri, 12 Mar 2021 07:53:45 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
X-Greylist: delayed 911 seconds by postgrey-1.36 at gabe;
 Fri, 12 Mar 2021 01:44:15 UTC
Received: from m1387.mail.163.com (m1387.mail.163.com [220.181.13.87])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 955C36E52A
 for <dri-devel@lists.freedesktop.org>; Fri, 12 Mar 2021 01:44:15 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=163.com;
 s=s110527; h=Date:From:Subject:MIME-Version:Message-ID; bh=2BMcw
 I2b6UmmjCuGhKMED6B/dswl5EGMa1cmEhrSvqY=; b=TgxsUFGDdtTVYZigEs3XA
 gHlR0TL95YxNqm40GpxekB8N+ljkytxoasjMersDD+NnaBAii7HNJ+mt2jSA1vQw
 rTqFcqY5/UJGOquSB9zUjm2X23/8OTfbXSEEOzBcNt3psSyn5nq1mswdHkt5BBtO
 L5V1dRXysVAb5n212vjzOg=
Received: from liplay$163.com ( [114.242.206.180] ) by ajax-webmail-wmsvr87
 (Coremail) ; Fri, 12 Mar 2021 09:28:56 +0800 (CST)
X-Originating-IP: [114.242.206.180]
Date: Fri, 12 Mar 2021 09:28:56 +0800 (CST)
From: lichenyang <liplay@163.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v6] drm/loongson: Add DRM Driver for Loongson 7A1000 bridge
 chip
X-Priority: 3
X-Mailer: Coremail Webmail Server Version XT5.0.13 build 20210104(ab8c30b6)
 Copyright (c) 2002-2021 www.mailtech.cn 163com
X-CM-CTRLDATA: wA5qhmZvb3Rlcl9odG09MzAwNzI6NTY=
MIME-Version: 1.0
Message-ID: <7480ebf4.dd2.178240d0554.Coremail.liplay@163.com>
X-Coremail-Locale: zh_CN
X-CM-TRANSID: V8GowABnhVLYw0pgkGTdAA--.21457W
X-CM-SenderInfo: xolsztr16rljoofrz/1tbiWww+HFSIpDU5EAACsT
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==
X-Mailman-Approved-At: Fri, 12 Mar 2021 07:53:44 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0489477681=="
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

--===============0489477681==
Content-Type: multipart/alternative; 
	boundary="----=_Part_12870_954473136.1615512536404"

------=_Part_12870_954473136.1615512536404
Content-Type: text/plain; charset=GBK
Content-Transfer-Encoding: base64

VGhpcyBwYXRjaCBhZGRzIGFuIGluaXRpYWwgRFJNIGRyaXZlciBmb3IgdGhlIExvb25nc29uIExT
N0ExMDAwCmJyaWRnZSBjaGlwKExTN0EpLiBUaGUgTFM3QSBicmlkZ2UgY2hpcCBjb250YWlucyB0
d28gZGlzcGxheQpjb250cm9sbGVycywgc3VwcG9ydCBkdWFsIGRpc3BsYXkgb3V0cHV0LiBUaGUg
bWF4aW11bSBzdXBwb3J0IGZvcgplYWNoIGNoYW5uZWwgZGlzcGxheSBpcyB0byAxOTIweDEwODBA
NjBIei4KQXQgcHJlc2VudCwgREMgZGV2aWNlIGRldGVjdGlvbiBhbmQgRFJNIGRyaXZlciByZWdp
c3RyYXRpb24gYXJlCmNvbXBsZXRlZCwgdGhlIGNydGMvcGxhbmUvZW5jb2Rlci9jb25uZWN0b3Ig
b2JqZWN0cyBoYXMgYmVlbgppbXBsZW1lbnRlZC4KT24gTG9vbmdzb24gM0E0MDAwIENQVSBhbmQg
N0ExMDAwIHN5c3RlbSwgd2UgaGF2ZSBhY2hpZXZlZCB0aGUgdXNlCm9mIGR1YWwgc2NyZWVuLCBh
bmQgc3VwcG9ydCBkdWFsIHNjcmVlbiBjbG9uZSBtb2RlIGFuZCBleHBhbnNpb24KbW9kZS4KCnY2
OgotIFJlbW92ZSBzcGluX2xvY2sgaW4gbW1pbyByZWcgcmVhZCBhbmQgd3JpdGUuCi0gVE9fVU5D
QUMgaXMgcmVwbGFjIHdpdGggaW9yZW1hcC4KLSBGaXggZXJyb3IgYXJndW1lbnRzIGluIGNydGNf
YXRvbWljX2VuYWJsZS9kaXNhYmxlL21vZGVfdmFsaWQuCgp2NToKLSBDaGFuZ2UgdGhlIG5hbWUg
b2YgdGhlIGNoaXAgdG8gTFM3QS4KLSBDaGFuZ2UgbWFnaWMgdmFsdWUgaW4gY3J0YyB0byBtYWNy
b3MuCi0gQ29ycmVjdCBtaXN0YWtlcyB3b3Jkcy4KLSBDaGFuZ2UgdGhlIHJlZ2lzdGVyIG9wZXJh
dGlvbiBmdW5jdGlvbiBwcmVmaXggdG8gbHM3YS4KCnY0OgotIE1vdmUgdGhlIG1vZGVfdmFsaWQg
ZnVuY3Rpb24gdG8gdGhlIGNydGMuCgp2MzoKLSBNb3ZlIHRoZSBtb2RlX3ZhbGlkIGZ1bmN0aW9u
IHRvIHRoZSBjb25uZWN0b3IgYW5kIG9wdGltaXplIGl0LgotIEZpeCBudW1fY3J0YyBjYWxjdWxh
dGlvbiBtZXRob2QuCgp2MjoKLSBDb21wbGV0ZSB0aGUgY2FzZSBvZiAzMi1iaXQgY29sb3IgaW4g
Q1JUQy4KClNpZ25lZC1vZmYtYnk6IENoZW55YW5nIExpIDxsaWNoZW55YW5nQGxvb25nc29uLmNu
PgotLS0KIGRyaXZlcnMvZ3B1L2RybS9LY29uZmlnICAgICAgICAgICAgICAgICAgICAgICB8ICAg
MiArCiBkcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUgICAgICAgICAgICAgICAgICAgICAgfCAgIDEg
KwogZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL0tjb25maWcgICAgICAgICAgICAgIHwgIDE0ICsK
IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9NYWtlZmlsZSAgICAgICAgICAgICB8ICAxNCArCiBk
cml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY29ubmVjdG9yLmMgfCAgNDggKysrKwog
ZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2NydGMuYyAgICAgIHwgMjQzICsrKysr
KysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYyAg
ICB8ICA0NyArKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuYyAgICAg
ICB8IDI3MCArKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29u
Z3Nvbl9kcnYuaCAgICAgICB8IDEzOSArKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nv
bi9sb29uZ3Nvbl9lbmNvZGVyLmMgICB8ICAzNyArKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nv
bi9sb29uZ3Nvbl9wbGFuZS5jICAgICB8IDEwMiArKysrKysrCiAxMSBmaWxlcyBjaGFuZ2VkLCA5
MTcgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29u
Z3Nvbi9LY29uZmlnCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xvb25nc29u
L01ha2VmaWxlCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xv
b25nc29uX2Nvbm5lY3Rvci5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xv
b25nc29uL2xvb25nc29uX2NydGMuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2Ry
bS9sb29uZ3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMv
Z3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZl
cnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaAogY3JlYXRlIG1vZGUgMTAwNjQ0IGRy
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9lbmNvZGVyLmMKIGNyZWF0ZSBtb2RlIDEw
MDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fcGxhbmUuYwoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL0tjb25maWcKaW5k
ZXggMDk3M2Y0MDhkNzVmLi42ZWQxYjZkYzJmMjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9LY29uZmlnCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9LY29uZmlnCkBAIC0zNzQsNiArMzc0LDgg
QEAgc291cmNlICJkcml2ZXJzL2dwdS9kcm0veGVuL0tjb25maWciCiAKIHNvdXJjZSAiZHJpdmVy
cy9ncHUvZHJtL3Zib3h2aWRlby9LY29uZmlnIgogCitzb3VyY2UgImRyaXZlcnMvZ3B1L2RybS9s
b29uZ3Nvbi9LY29uZmlnIgorCiBzb3VyY2UgImRyaXZlcnMvZ3B1L2RybS9saW1hL0tjb25maWci
CiAKIHNvdXJjZSAiZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L0tjb25maWciCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKaW5k
ZXggZmVmYWZmNGM4MzJkLi5mODdkYTczMGVhNmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKQEAgLTExOSw2ICsxMTks
NyBAQCBvYmotJChDT05GSUdfRFJNX1BMMTExKSArPSBwbDExMS8KIG9iai0kKENPTkZJR19EUk1f
VFZFMjAwKSArPSB0dmUyMDAvCiBvYmotJChDT05GSUdfRFJNX1hFTikgKz0geGVuLwogb2JqLSQo
Q09ORklHX0RSTV9WQk9YVklERU8pICs9IHZib3h2aWRlby8KK29iai0kKENPTkZJR19EUk1fTE9P
TkdTT04pICs9IGxvb25nc29uLwogb2JqLSQoQ09ORklHX0RSTV9MSU1BKSAgKz0gbGltYS8KIG9i
ai0kKENPTkZJR19EUk1fUEFORlJPU1QpICs9IHBhbmZyb3N0Lwogb2JqLSQoQ09ORklHX0RSTV9B
U1BFRURfR0ZYKSArPSBhc3BlZWQvCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdz
b24vS2NvbmZpZyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9LY29uZmlnCm5ldyBmaWxlIG1v
ZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uM2NmNDJhNGNjYTA4Ci0tLSAvZGV2L251bGwK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL0tjb25maWcKQEAgLTAsMCArMSwxNCBAQAor
IyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vbmx5CisKK2NvbmZpZyBEUk1fTE9P
TkdTT04KKwl0cmlzdGF0ZSAiRFJNIHN1cHBvcnQgZm9yIExTN0EgYnJpZGdlIGNoaXBzZXQiCisJ
ZGVwZW5kcyBvbiBEUk0gJiYgUENJCisJZGVwZW5kcyBvbiBDUFVfTE9PTkdTT042NAorCXNlbGVj
dCBEUk1fS01TX0hFTFBFUgorCXNlbGVjdCBEUk1fVlJBTV9IRUxQRVIKKwlzZWxlY3QgRFJNX1RU
TQorCXNlbGVjdCBEUk1fVFRNX0hFTFBFUgorCWRlZmF1bHQgbgorCWhlbHAKKwkgIFN1cHBvcnQg
dGhlIGRpc3BsYXkgY29udHJvbGxlcnMgZm91bmQgb24gdGhlIExvb25nc29uIExTN0EKKwkgIGJy
aWRnZS4KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9NYWtlZmlsZSBiL2Ry
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9NYWtlZmlsZQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwMDAwMDAuLjIyZDA2Mzk1M2I3OAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9sb29uZ3Nvbi9NYWtlZmlsZQpAQCAtMCwwICsxLDE0IEBACisjIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkKKyMKKyMgTWFrZWZpbGUgZm9yIGxvb25nc29uIGRy
bSBkcml2ZXJzLgorIyBUaGlzIGRyaXZlciBwcm92aWRlcyBzdXBwb3J0IGZvciB0aGUKKyMgRGly
ZWN0IFJlbmRlcmluZyBJbmZyYXN0cnVjdHVyZSAoRFJJKQorCitjY2ZsYWdzLXkgOj0gLUlpbmNs
dWRlL2RybQorbG9vbmdzb24teSA6PSBsb29uZ3Nvbl9kcnYubyBcCisJbG9vbmdzb25fY3J0Yy5v
IFwKKwlsb29uZ3Nvbl9wbGFuZS5vIFwKKwlsb29uZ3Nvbl9kZXZpY2UubyBcCisJbG9vbmdzb25f
Y29ubmVjdG9yLm8gXAorCWxvb25nc29uX2VuY29kZXIubworb2JqLSQoQ09ORklHX0RSTV9MT09O
R1NPTikgKz0gbG9vbmdzb24ubwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29u
L2xvb25nc29uX2Nvbm5lY3Rvci5jIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29u
X2Nvbm5lY3Rvci5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uNmIx
ZjBmZmEzM2JkCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xv
b25nc29uX2Nvbm5lY3Rvci5jCkBAIC0wLDAgKzEsNDggQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVu
dGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCisKKyNpbmNsdWRlICJsb29uZ3Nvbl9kcnYuaCIKKwor
c3RhdGljIGludCBsb29uZ3Nvbl9nZXRfbW9kZXMoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5l
Y3RvcikKK3sKKwlpbnQgY291bnQ7CisKKwljb3VudCA9IGRybV9hZGRfbW9kZXNfbm9lZGlkKGNv
bm5lY3RvciwgMTkyMCwgMTA4MCk7CisJZHJtX3NldF9wcmVmZXJyZWRfbW9kZShjb25uZWN0b3Is
IDEwMjQsIDc2OCk7CisKKwlyZXR1cm4gY291bnQ7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MgbG9vbmdzb25fY29ubmVjdG9yX2hlbHBlciA9IHsK
KwkuZ2V0X21vZGVzID0gbG9vbmdzb25fZ2V0X21vZGVzLAorfTsKKworc3RhdGljIGNvbnN0IHN0
cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIGxvb25nc29uX2Nvbm5lY3Rvcl9mdW5jcyA9IHsKKwku
ZmlsbF9tb2RlcyA9IGRybV9oZWxwZXJfcHJvYmVfc2luZ2xlX2Nvbm5lY3Rvcl9tb2RlcywKKwku
ZGVzdHJveSA9IGRybV9jb25uZWN0b3JfY2xlYW51cCwKKwkucmVzZXQgPSBkcm1fYXRvbWljX2hl
bHBlcl9jb25uZWN0b3JfcmVzZXQsCisJLmF0b21pY19kdXBsaWNhdGVfc3RhdGUgPSBkcm1fYXRv
bWljX2hlbHBlcl9jb25uZWN0b3JfZHVwbGljYXRlX3N0YXRlLAorCS5hdG9taWNfZGVzdHJveV9z
dGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX2Nvbm5lY3Rvcl9kZXN0cm95X3N0YXRlLAorfTsKKwor
aW50IGxvb25nc29uX2Nvbm5lY3Rvcl9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYs
IGludCBpbmRleCkKK3sKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOworCXN0cnVj
dCBsb29uZ3Nvbl9jb25uZWN0b3IgKmxjb25uZWN0b3I7CisKKwlsY29ubmVjdG9yID0ga3phbGxv
YyhzaXplb2Yoc3RydWN0IGxvb25nc29uX2Nvbm5lY3RvciksIEdGUF9LRVJORUwpOworCWlmICgh
bGNvbm5lY3RvcikgeworCQlEUk1fSU5GTygibG9vbmdzb24gY29ubmVjdG9yIGt6YWxsb2MgZmFp
bGVkXG4iKTsKKwkJcmV0dXJuIC0xOworCX0KKworCWxjb25uZWN0b3ItPmxkZXYgPSBsZGV2Owor
CWxjb25uZWN0b3ItPmlkID0gaW5kZXg7CisKKwlsZGV2LT5tb2RlX2luZm9baW5kZXhdLmNvbm5l
Y3RvciA9IGxjb25uZWN0b3I7CisJY29ubmVjdG9yID0gJmxjb25uZWN0b3ItPmJhc2U7CisJZHJt
X2Nvbm5lY3Rvcl9pbml0KGxkZXYtPmRldiwgY29ubmVjdG9yLCAmbG9vbmdzb25fY29ubmVjdG9y
X2Z1bmNzLAorCQkJICAgRFJNX01PREVfQ09OTkVDVE9SX1Vua25vd24pOworCWRybV9jb25uZWN0
b3JfaGVscGVyX2FkZChjb25uZWN0b3IsICZsb29uZ3Nvbl9jb25uZWN0b3JfaGVscGVyKTsKKwor
CXJldHVybiAwOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25n
c29uX2NydGMuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jcnRjLmMKbmV3
IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi41Y2Y2OTQ0N2IzOTQKLS0tIC9k
ZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5jCkBA
IC0wLDAgKzEsMjQzIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1s
YXRlcgorCisjaW5jbHVkZSAibG9vbmdzb25fZHJ2LmgiCisKK3N0YXRpYyB2b2lkIHRyeV9lYWNo
X2xvb3BjKHUzMiBjbGssIHUzMiBwc3RkaXYsIHUzMiBmcmVmYywKKwkJCSAgIHN0cnVjdCBwaXhf
cGxsICpwbGxfY29uZmlnKQoreworCXUzMiBsb29wYzsKKwl1MzIgY2xrX291dDsKKwl1MzIgcHJl
Y2lzaW9uOworCXUzMiBtaW4gPSAxMDAwOworCXUzMiBiYXNlX2NsayA9IDEwMDAwMEw7CisKKwlm
b3IgKGxvb3BjID0gTE9PUENfTUlOOyBsb29wYyA8IExPT1BDX01BWDsgbG9vcGMrKykgeworCQlp
ZiAoKGxvb3BjIDwgRlJFX1JFRl9NSU4gKiBmcmVmYykgfHwKKwkJICAgIChsb29wYyA+IEZSRV9S
RUZfTUFYICogZnJlZmMpKQorCQkJY29udGludWU7CisKKwkJY2xrX291dCA9IGJhc2VfY2xrICog
bG9vcGMgLyBmcmVmYzsKKwkJcHJlY2lzaW9uID0gKGNsayA+IGNsa19vdXQpID8gKGNsayAtIGNs
a19vdXQpIDogKGNsa19vdXQgLSBjbGspOworCQlpZiAocHJlY2lzaW9uIDwgbWluKSB7CisJCQlw
bGxfY29uZmlnLT5sMl9kaXYgPSBwc3RkaXY7CisJCQlwbGxfY29uZmlnLT5sMV9sb29wYyA9IGxv
b3BjOworCQkJcGxsX2NvbmZpZy0+bDFfZnJlZmMgPSBmcmVmYzsKKwkJfQorCX0KK30KKworc3Rh
dGljIHZvaWQgY2FsX2ZyZXEodTMyIHBpeGNsb2NrLCBzdHJ1Y3QgcGl4X3BsbCAqcGxsX2NvbmZp
ZykKK3sKKwl1MzIgcHN0ZGl2OworCXUzMiBmcmVmYzsKKwl1MzIgY2xrOworCisJZm9yIChwc3Rk
aXYgPSAxOyBwc3RkaXYgPCBQU1RfRElWX01BWDsgcHN0ZGl2KyspIHsKKwkJY2xrID0gcGl4Y2xv
Y2sgKiBwc3RkaXY7CisJCWZvciAoZnJlZmMgPSBESVZfUkVGX01JTjsgZnJlZmMgPD0gRElWX1JF
Rl9NQVg7IGZyZWZjKyspCisJCQl0cnlfZWFjaF9sb29wYyhjbGssIHBzdGRpdiwgZnJlZmMsIHBs
bF9jb25maWcpOworCX0KK30KKworc3RhdGljIHZvaWQgY29uZmlnX3BsbChzdHJ1Y3QgbG9vbmdz
b25fZGV2aWNlICpsZGV2LCB1bnNpZ25lZCBsb25nIHBsbF9iYXNlLAorCQkgICAgICAgc3RydWN0
IHBpeF9wbGwgKnBsbF9jZmcpCit7CisJdTMyIHZhbDsKKwl1MzIgY291bnQgPSAwOworCisJLyog
Y2xlYXIgc2VsX3BsbF9vdXQwICovCisJdmFsID0gbHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNl
ICsgMHg0KTsKKwl2YWwgJj0gfigxVUwgPDwgOCk7CisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9i
YXNlICsgMHg0LCB2YWwpOworCisJLyogc2V0IHBsbF9wZCAqLworCXZhbCA9IGxzN2FfaW9fcnJl
ZyhsZGV2LCBwbGxfYmFzZSArIDB4NCk7CisJdmFsIHw9ICgxVUwgPDwgMTMpOworCWxzN2FfaW9f
d3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKworCS8qIGNsZWFyIHNldF9wbGxfcGFy
YW0gKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQpOworCXZhbCAm
PSB+KDFVTCA8PCAxMSk7CisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0LCB2YWwp
OworCisJLyogY2xlYXIgb2xkIHZhbHVlICYgY29uZmlnIG5ldyB2YWx1ZSAqLworCXZhbCA9IGxz
N2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCk7CisJdmFsICY9IH4oMHg3ZlVMIDw8IDAp
OworCXZhbCB8PSAocGxsX2NmZy0+bDFfZnJlZmMgPDwgMCk7IC8qIHJlZmMgKi8KKwlsczdhX2lv
X3dyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQsIHZhbCk7CisJdmFsID0gbHM3YV9pb19ycmVnKGxk
ZXYsIHBsbF9iYXNlICsgMHgwKTsKKwl2YWwgJj0gfigweDdmVUwgPDwgMCk7CisJdmFsIHw9IChw
bGxfY2ZnLT5sMl9kaXYgPDwgMCk7IC8qIGRpdiAqLworCXZhbCAmPSB+KDB4MWZmVUwgPDwgMjEp
OworCXZhbCB8PSAocGxsX2NmZy0+bDFfbG9vcGMgPDwgMjEpOyAvKiBsb29wYyAqLworCWxzN2Ff
aW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4MCwgdmFsKTsKKworCS8qIHNldCBzZXRfcGxsX3Bh
cmFtICovCisJdmFsID0gbHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KTsKKwl2YWwg
fD0gKDFVTCA8PCAxMSk7CisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0LCB2YWwp
OworCS8qIGNsZWFyIHBsbF9wZCAqLworCXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFz
ZSArIDB4NCk7CisJdmFsICY9IH4oMVVMIDw8IDEzKTsKKwlsczdhX2lvX3dyZWcobGRldiwgcGxs
X2Jhc2UgKyAweDQsIHZhbCk7CisKKwl3aGlsZSAoIShsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jh
c2UgKyAweDQpICYgMHg4MCkpIHsKKwkJY3B1X3JlbGF4KCk7CisJCWNvdW50Kys7CisJCWlmIChj
b3VudCA+PSAxMDAwKSB7CisJCQlEUk1fRVJST1IoImxvb25nc29uLTdBIFBMTCBsb2NrIGZhaWxl
ZFxuIik7CisJCQlicmVhazsKKwkJfQorCX0KKworCXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBw
bGxfYmFzZSArIDB4NCk7CisJdmFsIHw9ICgxVUwgPDwgOCk7CisJbHM3YV9pb193cmVnKGxkZXYs
IHBsbF9iYXNlICsgMHg0LCB2YWwpOworfQorCitzdGF0aWMgdm9pZCBsb29uZ3Nvbl9jcnRjX21v
ZGVfc2V0X25vZmIoc3RydWN0IGRybV9jcnRjICpjcnRjKQoreworCXN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYgPSBjcnRjLT5kZXY7CisJc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiA9IGRldi0+
ZGV2X3ByaXZhdGU7CisJc3RydWN0IGxvb25nc29uX2NydGMgKmxjcnRjID0gdG9fbG9vbmdzb25f
Y3J0YyhjcnRjKTsKKwlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSA9ICZjcnRjLT5zdGF0
ZS0+YWRqdXN0ZWRfbW9kZTsKKwljb25zdCBzdHJ1Y3QgZHJtX2Zvcm1hdF9pbmZvICpmb3JtYXQ7
CisJc3RydWN0IHBpeF9wbGwgcGxsX2NmZzsKKwl1MzIgaHIsIGhzcywgaHNlLCBoZmw7CisJdTMy
IHZyLCB2c3MsIHZzZSwgdmZsOworCXUzMiBwaXhfZnJlcTsKKwl1MzIgcmVnX29mZnNldDsKKwor
CWhyID0gbW9kZS0+aGRpc3BsYXk7CisJaHNzID0gbW9kZS0+aHN5bmNfc3RhcnQ7CisJaHNlID0g
bW9kZS0+aHN5bmNfZW5kOworCWhmbCA9IG1vZGUtPmh0b3RhbDsKKworCXZyID0gbW9kZS0+dmRp
c3BsYXk7CisJdnNzID0gbW9kZS0+dnN5bmNfc3RhcnQ7CisJdnNlID0gbW9kZS0+dnN5bmNfZW5k
OworCXZmbCA9IG1vZGUtPnZ0b3RhbDsKKworCXBpeF9mcmVxID0gbW9kZS0+Y2xvY2s7CisJcmVn
X29mZnNldCA9IGxjcnRjLT5yZWdfb2Zmc2V0OworCWZvcm1hdCA9IGNydGMtPnByaW1hcnktPnN0
YXRlLT5mYi0+Zm9ybWF0OworCisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0RJVENGR19SRUcgKyBy
ZWdfb2Zmc2V0LCAwKTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfRElUVEFCX0xPX1JFRyArIHJl
Z19vZmZzZXQsIDApOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9ESVRUQUJfSElfUkVHICsgcmVn
X29mZnNldCwgMCk7CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX1BBTkNGR19SRUcgKyByZWdfb2Zm
c2V0LCBGQl9QQU5DRkdfREVGKTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfUEFOVElNX1JFRyAr
IHJlZ19vZmZzZXQsIDApOworCisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0hESVNQTEFZX1JFRyAr
IHJlZ19vZmZzZXQsIChoZmwgPDwgMTYpIHwgaHIpOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9I
U1lOQ19SRUcgKyByZWdfb2Zmc2V0LAorCQkgICAgIEZCX0hTWU5DX1BVTFNFIHwgKGhzZSA8PCAx
NikgfCBoc3MpOworCisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX1ZESVNQTEFZX1JFRyArIHJlZ19v
ZmZzZXQsICh2ZmwgPDwgMTYpIHwgdnIpOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9WU1lOQ19S
RUcgKyByZWdfb2Zmc2V0LAorCQkgICAgIEZCX1ZTWU5DX1BVTFNFIHwgKHZzZSA8PCAxNikgfCB2
c3MpOworCisJc3dpdGNoIChmb3JtYXQtPmZvcm1hdCkgeworCWNhc2UgRFJNX0ZPUk1BVF9SR0I1
NjU6CisJCWxjcnRjLT5jZmdfcmVnIHw9IDB4MzsKKwkJYnJlYWs7CisJY2FzZSBEUk1fRk9STUFU
X1JHQjg4ODoKKwljYXNlIERSTV9GT1JNQVRfWFJHQjg4ODg6CisJY2FzZSBEUk1fRk9STUFUX0FS
R0I4ODg4OgorCWRlZmF1bHQ6CisJCWxjcnRjLT5jZmdfcmVnIHw9IDB4NDsKKwkJYnJlYWs7CisJ
fQorCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdfUkVHICsgcmVnX29mZnNldCwgbGNydGMtPmNm
Z19yZWcpOworCisJY2FsX2ZyZXEocGl4X2ZyZXEsICZwbGxfY2ZnKTsKKwljb25maWdfcGxsKGxk
ZXYsIExTN0FfUElYX1BMTCArIHJlZ19vZmZzZXQsICZwbGxfY2ZnKTsKK30KKworc3RhdGljIHZv
aWQgbG9vbmdzb25fY3J0Y19hdG9taWNfZW5hYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKKwkJ
CQkJc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKm9sZF9zdGF0ZSkKK3sKKwlzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2ID0gY3J0Yy0+ZGV2OworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYgPSBk
ZXYtPmRldl9wcml2YXRlOworCXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YyA9IHRvX2xvb25n
c29uX2NydGMoY3J0Yyk7CisJdTMyIHJlZ19vZmZzZXQgPSBsY3J0Yy0+cmVnX29mZnNldDsKKwor
CWxjcnRjLT5jZmdfcmVnIHw9IENGR19FTkFCTEU7CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0NG
R19SRUcgKyByZWdfb2Zmc2V0LCBsY3J0Yy0+Y2ZnX3JlZyk7Cit9CisKK3N0YXRpYyB2b2lkIGxv
b25nc29uX2NydGNfYXRvbWljX2Rpc2FibGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAorCQkJCQkg
c3RydWN0IGRybV9hdG9taWNfc3RhdGUgKm9sZF9zdGF0ZSkKK3sKKwlzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZGV2ID0gY3J0Yy0+ZGV2OworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYgPSBkZXYt
PmRldl9wcml2YXRlOworCXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YyA9IHRvX2xvb25nc29u
X2NydGMoY3J0Yyk7CisJdTMyIHJlZ19vZmZzZXQgPSBsY3J0Yy0+cmVnX29mZnNldDsKKworCWxj
cnRjLT5jZmdfcmVnICY9IH5DRkdfRU5BQkxFOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdf
UkVHICsgcmVnX29mZnNldCwgbGNydGMtPmNmZ19yZWcpOworfQorCitzdGF0aWMgZW51bSBkcm1f
bW9kZV9zdGF0dXMgbG9vbmdzb25fbW9kZV92YWxpZChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCisJ
CQkJCQljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKK3sKKwlpZiAobW9kZS0+
aGRpc3BsYXkgPiAxOTIwKQorCQlyZXR1cm4gTU9ERV9CQUQ7CisJaWYgKG1vZGUtPnZkaXNwbGF5
ID4gMTA4MCkKKwkJcmV0dXJuIE1PREVfQkFEOworCWlmIChtb2RlLT5oZGlzcGxheSAlIDY0KQor
CQlyZXR1cm4gTU9ERV9CQUQ7CisJaWYgKG1vZGUtPmNsb2NrID4gMTczMDAwKQorCQlyZXR1cm4g
TU9ERV9DTE9DS19ISUdIOworCisJcmV0dXJuIE1PREVfT0s7Cit9CisKK3N0YXRpYyBjb25zdCBz
dHJ1Y3QgZHJtX2NydGNfaGVscGVyX2Z1bmNzIGxvb25nc29uX2NydGNfaGVscGVyX2Z1bmNzID0g
eworCS5tb2RlX3ZhbGlkID0gbG9vbmdzb25fbW9kZV92YWxpZCwKKwkuYXRvbWljX2VuYWJsZSA9
IGxvb25nc29uX2NydGNfYXRvbWljX2VuYWJsZSwKKwkuYXRvbWljX2Rpc2FibGUgPSBsb29uZ3Nv
bl9jcnRjX2F0b21pY19kaXNhYmxlLAorCS5tb2RlX3NldF9ub2ZiID0gbG9vbmdzb25fY3J0Y19t
b2RlX3NldF9ub2ZiLAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY3J0Y19mdW5jcyBs
b29uZ3Nvbl9jcnRjX2Z1bmNzID0geworCS5zZXRfY29uZmlnID0gZHJtX2F0b21pY19oZWxwZXJf
c2V0X2NvbmZpZywKKwkucGFnZV9mbGlwID0gZHJtX2F0b21pY19oZWxwZXJfcGFnZV9mbGlwLAor
CS5yZXNldCA9IGRybV9hdG9taWNfaGVscGVyX2NydGNfcmVzZXQsCisJLmRlc3Ryb3kgPSBkcm1f
Y3J0Y19jbGVhbnVwLAorCS5hdG9taWNfZHVwbGljYXRlX3N0YXRlID0gZHJtX2F0b21pY19oZWxw
ZXJfY3J0Y19kdXBsaWNhdGVfc3RhdGUsCisJLmF0b21pY19kZXN0cm95X3N0YXRlID0gZHJtX2F0
b21pY19oZWxwZXJfY3J0Y19kZXN0cm95X3N0YXRlLAorfTsKKworaW50IGxvb25nc29uX2NydGNf
aW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpCit7CisJc3RydWN0
IGxvb25nc29uX2NydGMgKmxjcnRjOworCXUzMiByZXQ7CisKKwlsY3J0YyA9IGt6YWxsb2Moc2l6
ZW9mKHN0cnVjdCBsb29uZ3Nvbl9jcnRjKSwgR0ZQX0tFUk5FTCk7CisJaWYgKGxjcnRjID09IE5V
TEwpCisJCXJldHVybiAtMTsKKworCWxjcnRjLT5sZGV2ID0gbGRldjsKKwlsY3J0Yy0+cmVnX29m
ZnNldCA9IGluZGV4ICogUkVHX09GRlNFVDsKKwlsY3J0Yy0+Y2ZnX3JlZyA9IENGR19SRVNFVDsK
KwlsY3J0Yy0+Y3J0Y19pZCA9IGluZGV4OworCisJcmV0ID0gbG9vbmdzb25fcGxhbmVfaW5pdChs
Y3J0Yyk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCXJldCA9IGRybV9jcnRjX2luaXRf
d2l0aF9wbGFuZXMobGRldi0+ZGV2LCAmbGNydGMtPmJhc2UsIGxjcnRjLT5wbGFuZSwKKwkJCQkJ
TlVMTCwgJmxvb25nc29uX2NydGNfZnVuY3MsIE5VTEwpOworCWlmIChyZXQpIHsKKwkJRFJNX0VS
Uk9SKCJmYWlsZWQgdG8gaW5pdCBjcnRjICVkXG4iLCBpbmRleCk7CisJCWRybV9wbGFuZV9jbGVh
bnVwKGxjcnRjLT5wbGFuZSk7CisJCXJldHVybiByZXQ7CisJfQorCisJZHJtX2NydGNfaGVscGVy
X2FkZCgmbGNydGMtPmJhc2UsICZsb29uZ3Nvbl9jcnRjX2hlbHBlcl9mdW5jcyk7CisKKwlsZGV2
LT5tb2RlX2luZm9baW5kZXhdLmNydGMgPSBsY3J0YzsKKworCXJldHVybiAwOworfQorCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZGV2aWNlLmMgYi9kcml2
ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZGV2aWNlLmMKbmV3IGZpbGUgbW9kZSAxMDA2
NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5lNTNiZDhkZWQ4OWIKLS0tIC9kZXYvbnVsbAorKysgYi9k
cml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZGV2aWNlLmMKQEAgLTAsMCArMSw0NyBA
QAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKworI2luY2x1
ZGUgImxvb25nc29uX2Rydi5oIgorCit1MzIgbG9vbmdzb25fZ3B1X29mZnNldChzdHJ1Y3QgZHJt
X3BsYW5lX3N0YXRlICpzdGF0ZSkKK3sKKwlzdHJ1Y3QgZHJtX2dlbV92cmFtX29iamVjdCAqZ2Jv
OworCXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YzsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNl
ICpsZGV2OworCXUzMiBncHVfYWRkcjsKKworCWxjcnRjID0gdG9fbG9vbmdzb25fY3J0YyhzdGF0
ZS0+Y3J0Yyk7CisJbGRldiA9IGxjcnRjLT5sZGV2OworCisJZ2JvID0gZHJtX2dlbV92cmFtX29m
X2dlbShzdGF0ZS0+ZmItPm9ialswXSk7CisJZ3B1X2FkZHIgPSBsZGV2LT52cmFtX3N0YXJ0ICsg
ZHJtX2dlbV92cmFtX29mZnNldChnYm8pOworCisJcmV0dXJuIGdwdV9hZGRyOworfQorCit1MzIg
bHM3YV9pb19ycmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIHUzMiBvZmZzZXQpCit7
CisJdTMyIHZhbDsKKworCXZhbCA9IHJlYWRsKGxkZXYtPmlvICsgb2Zmc2V0KTsKKworCXJldHVy
biB2YWw7Cit9CisKK3ZvaWQgbHM3YV9pb193cmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxk
ZXYsIHUzMiBvZmZzZXQsIHUzMiB2YWwpCit7CisJd3JpdGVsKHZhbCwgbGRldi0+aW8gKyBvZmZz
ZXQpOworfQorCit1MzIgbHM3YV9tbV9ycmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYs
IHUzMiBvZmZzZXQpCit7CisJdTMyIHZhbDsKKworCXZhbCA9IHJlYWRsKGxkZXYtPm1taW8gKyBv
ZmZzZXQpOworCisJcmV0dXJuIHZhbDsKK30KKwordm9pZCBsczdhX21tX3dyZWcoc3RydWN0IGxv
b25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCwgdTMyIHZhbCkKK3sKKwl3cml0ZWwodmFs
LCBsZGV2LT5tbWlvICsgb2Zmc2V0KTsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9s
b29uZ3Nvbi9sb29uZ3Nvbl9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nv
bl9kcnYuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmU0MDUxOTlh
M2RmNgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nv
bl9kcnYuYwpAQCAtMCwwICsxLDI3MCBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQ
TC0yLjAtb3ItbGF0ZXIKKy8qCisgKiBMb29uZ3NvbiBMUzdBMTAwMCBicmlkZ2UgY2hpcHNldCBk
cm0gZHJpdmVyCisgKi8KKworI2luY2x1ZGUgPGxpbnV4L2NvbnNvbGUuaD4KKyNpbmNsdWRlIDxs
aW51eC9wY2kuaD4KKyNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KKyNpbmNsdWRlIDxsaW51eC9r
ZXJuZWwuaD4KKyNpbmNsdWRlICJsb29uZ3Nvbl9kcnYuaCIKKworLyogSW50ZXJmYWNlIGhpc3Rv
cnk6CisgKiAwLjEgLSBvcmlnaW5hbC4KKyAqLworI2RlZmluZSBEUklWRVJfTUFKT1IgMAorI2Rl
ZmluZSBEUklWRVJfTUlOT1IgMQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9tb2RlX2NvbmZp
Z19mdW5jcyBsb29uZ3Nvbl9tb2RlX2Z1bmNzID0geworCS5mYl9jcmVhdGUgPSBkcm1fZ2VtX2Zi
X2NyZWF0ZSwKKwkuYXRvbWljX2NoZWNrID0gZHJtX2F0b21pY19oZWxwZXJfY2hlY2ssCisJLmF0
b21pY19jb21taXQgPSBkcm1fYXRvbWljX2hlbHBlcl9jb21taXQsCisJLm91dHB1dF9wb2xsX2No
YW5nZWQgPSBkcm1fZmJfaGVscGVyX291dHB1dF9wb2xsX2NoYW5nZWQsCisJLm1vZGVfdmFsaWQg
PSBkcm1fdnJhbV9oZWxwZXJfbW9kZV92YWxpZAorfTsKKworc3RhdGljIGludCBsb29uZ3Nvbl9k
ZXZpY2VfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1aW50MzJfdCBmbGFncykKK3sKKwlz
dHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwlzdHJ1Y3Qg
cGNpX2RldiAqZ3B1X3BkZXY7CisJcmVzb3VyY2Vfc2l6ZV90IGFwZXJfYmFzZTsKKwlyZXNvdXJj
ZV9zaXplX3QgYXBlcl9zaXplOworCXJlc291cmNlX3NpemVfdCBtbWlvX2Jhc2U7CisJcmVzb3Vy
Y2Vfc2l6ZV90IG1taW9fc2l6ZTsKKworCS8qIEdQVSBNRU0gKi8KKwkvKiBXZSBuZWVkIGdldCA3
QS1ncHUgcGNpIGRldmljZSBpbmZvcm1hdGlvbiBmb3IgbGRldi0+Z3B1X3BkZXYgKi8KKwkvKiBk
ZXYtPnBkZXYgc2F2ZSA3QS1kYyBwY2kgZGV2aWNlIGluZm9ybWF0aW9uICovCisJZ3B1X3BkZXYg
PSBwY2lfZ2V0X2RldmljZShQQ0lfVkVORE9SX0lEX0xPT05HU09OLAorCQkJCSAgUENJX0RFVklD
RV9JRF9MT09OR1NPTl9HUFUsIE5VTEwpOworCWlmIChJU19FUlIoZ3B1X3BkZXYpKQorCQlyZXR1
cm4gUFRSX0VSUihncHVfcGRldik7CisKKwlsZGV2LT5ncHVfcGRldiA9IGdwdV9wZGV2OworCWFw
ZXJfYmFzZSA9IHBjaV9yZXNvdXJjZV9zdGFydChncHVfcGRldiwgMik7CisJYXBlcl9zaXplID0g
cGNpX3Jlc291cmNlX2xlbihncHVfcGRldiwgMik7CisJbGRldi0+dnJhbV9zdGFydCA9ICh1MzIp
YXBlcl9iYXNlOworCWxkZXYtPnZyYW1fc2l6ZSA9ICh1MzIpYXBlcl9zaXplOworCisJaWYgKCFk
ZXZtX3JlcXVlc3RfbWVtX3JlZ2lvbihsZGV2LT5kZXYtPmRldiwgbGRldi0+dnJhbV9zdGFydCwK
KwkJCQkgICAgIGxkZXYtPnZyYW1fc2l6ZSwgImxvb25nc29uX3ZyYW0iKSkgeworCQlEUk1fRVJS
T1IoIkNhbid0IHJlc2VydmUgVlJBTVxuIik7CisJCXJldHVybiAtRU5YSU87CisJfQorCisJLyog
REMgTUVNICovCisJbW1pb19iYXNlID0gcGNpX3Jlc291cmNlX3N0YXJ0KGxkZXYtPmRldi0+cGRl
diwgMCk7CisJbW1pb19zaXplID0gcGNpX3Jlc291cmNlX2xlbihsZGV2LT5kZXYtPnBkZXYsIDAp
OworCWxkZXYtPm1taW8gPSBkZXZtX2lvcmVtYXAoZGV2LT5kZXYsIG1taW9fYmFzZSwgbW1pb19z
aXplKTsKKwlpZiAoIWxkZXYtPm1taW8pIHsKKwkJZHJtX2VycihkZXYsICJDYW5ub3QgbWFwIG1t
aW8gcmVnaW9uXG4iKTsKKwkJcmV0dXJuIC1FTk9NRU07CisJfQorCisJaWYgKCFkZXZtX3JlcXVl
c3RfbWVtX3JlZ2lvbihsZGV2LT5kZXYtPmRldiwgbW1pb19iYXNlLAorCQkJCSAgICAgbW1pb19z
aXplLCAibG9vbmdzb25fbW1pbyIpKSB7CisJCURSTV9FUlJPUigiQ2FuJ3QgcmVzZXJ2ZSBtbWlv
IHJlZ2lzdGVyc1xuIik7CisJCXJldHVybiAtRU5PTUVNOworCX0KKworCS8qIERDIElPICovCisJ
bGRldi0+aW8gPSBpb3JlbWFwKExTN0FfQ0hJUENGR19SRUdfQkFTRSwgMHhmKTsKKwlpZiAobGRl
di0+aW8gPT0gTlVMTCkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlEUk1fSU5GTygiREMgbW1pbyBi
YXNlIDB4JWxseCBzaXplIDB4JWxseCBpbyAweCVsbHhcbiIsCisJCSBtbWlvX2Jhc2UsIG1taW9f
c2l6ZSwgKih1NjQgKilsZGV2LT5pbyk7CisJRFJNX0lORk8oIkdQVSB2cmFtIHN0YXJ0ID0gMHgl
eCBzaXplID0gMHgleFxuIiwKKwkJIGxkZXYtPnZyYW1fc3RhcnQsIGxkZXYtPnZyYW1fc2l6ZSk7
CisKKwlyZXR1cm4gMDsKK30KKworaW50IGxvb25nc29uX21vZGVzZXRfaW5pdChzdHJ1Y3QgbG9v
bmdzb25fZGV2aWNlICpsZGV2KQoreworCXN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcjsKKwlz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOworCWludCBpOworCXUzMiByZXQ7CisKKwls
ZGV2LT5kZXYtPm1vZGVfY29uZmlnLmFsbG93X2ZiX21vZGlmaWVycyA9IHRydWU7CisKKwlmb3Ig
KGkgPSAwOyBpIDwgMjsgaSsrKSB7CisJCXJldCA9IGxvb25nc29uX2NydGNfaW5pdChsZGV2LCBp
KTsKKwkJaWYgKHJldCkgeworCQkJRFJNX1dBUk4oImxvb25nc29uIGNydGMlZCBpbml0IGZhaWxl
ZFxuIiwgaSk7CisJCQljb250aW51ZTsKKwkJfQorCisJCXJldCA9IGxvb25nc29uX2VuY29kZXJf
aW5pdChsZGV2LCBpKTsKKwkJaWYgKHJldCkgeworCQkJRFJNX0VSUk9SKCJsb29uZ3Nvbl9lbmNv
ZGVyX2luaXQgZmFpbGVkXG4iKTsKKwkJCXJldHVybiAtMTsKKwkJfQorCisJCXJldCA9IGxvb25n
c29uX2Nvbm5lY3Rvcl9pbml0KGxkZXYsIGkpOworCQlpZiAocmV0KSB7CisJCQlEUk1fRVJST1Io
Imxvb25nc29uX2Nvbm5lY3Rvcl9pbml0IGZhaWxlZFxuIik7CisJCQlyZXR1cm4gLTE7CisJCX0K
KworCQllbmNvZGVyID0gJmxkZXYtPm1vZGVfaW5mb1tpXS5lbmNvZGVyLT5iYXNlOworCQljb25u
ZWN0b3IgPSAmbGRldi0+bW9kZV9pbmZvW2ldLmNvbm5lY3Rvci0+YmFzZTsKKwkJZHJtX2Nvbm5l
Y3Rvcl9hdHRhY2hfZW5jb2Rlcihjb25uZWN0b3IsIGVuY29kZXIpOworCQlsZGV2LT5udW1fY3J0
YysrOworCX0KKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IGxvb25nc29uX2RybV9sb2Fk
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHVuc2lnbmVkIGxvbmcgZmxhZ3MpCit7CisJc3RydWN0
IGxvb25nc29uX2RldmljZSAqbGRldjsKKwlpbnQgcmV0OworCisJbGRldiA9IGRldm1fa3phbGxv
YyhkZXYtPmRldiwgc2l6ZW9mKCpsZGV2KSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFsZGV2KQorCQly
ZXR1cm4gLUVOT01FTTsKKworCWRldi0+ZGV2X3ByaXZhdGUgPSBsZGV2OworCWxkZXYtPmRldiA9
IGRldjsKKworCXJldCA9IGxvb25nc29uX2RldmljZV9pbml0KGRldiwgZmxhZ3MpOworCWlmIChy
ZXQpCisJCWdvdG8gZXJyOworCisJcmV0ID0gZHJtbV92cmFtX2hlbHBlcl9pbml0KGRldiwgbGRl
di0+dnJhbV9zdGFydCwgbGRldi0+dnJhbV9zaXplKTsKKwlpZiAocmV0KQorCQlnb3RvIGVycjsK
KworCWRybV9tb2RlX2NvbmZpZ19pbml0KGRldik7CisJZGV2LT5tb2RlX2NvbmZpZy5mdW5jcyA9
ICh2b2lkICopJmxvb25nc29uX21vZGVfZnVuY3M7CisJZGV2LT5tb2RlX2NvbmZpZy5taW5fd2lk
dGggPSAxOworCWRldi0+bW9kZV9jb25maWcubWluX2hlaWdodCA9IDE7CisJZGV2LT5tb2RlX2Nv
bmZpZy5tYXhfd2lkdGggPSA0MDk2OworCWRldi0+bW9kZV9jb25maWcubWF4X2hlaWdodCA9IDQw
OTY7CisJZGV2LT5tb2RlX2NvbmZpZy5wcmVmZXJyZWRfZGVwdGggPSAzMjsKKwlkZXYtPm1vZGVf
Y29uZmlnLnByZWZlcl9zaGFkb3cgPSAxOworCWRldi0+bW9kZV9jb25maWcuZmJfYmFzZSA9IGxk
ZXYtPnZyYW1fc3RhcnQ7CisKKwlwY2lfc2V0X2RydmRhdGEoZGV2LT5wZGV2LCBkZXYpOworCisJ
cmV0ID0gbG9vbmdzb25fbW9kZXNldF9pbml0KGxkZXYpOworCWlmIChyZXQpCisJCWRldl9lcnIo
ZGV2LT5kZXYsICJGYXRhbCBlcnJvciBkdXJpbmcgbW9kZXNldCBpbml0OiAlZFxuIiwgcmV0KTsK
KworCWRybV9rbXNfaGVscGVyX3BvbGxfaW5pdChkZXYpOworCWRybV9tb2RlX2NvbmZpZ19yZXNl
dChkZXYpOworCisJcmV0dXJuIDA7CisKK2VycjoKKwlkcm1fZXJyKGRldiwgImZhaWxlZCB0byBp
bml0aWFsaXplIGRybSBkcml2ZXI6ICVkXG4iLCByZXQpOworCXJldHVybiByZXQ7Cit9CisKK3N0
YXRpYyB2b2lkIGxvb25nc29uX2RybV91bmxvYWQoc3RydWN0IGRybV9kZXZpY2UgKmRldikKK3sK
Kwlkcm1fdnJhbV9oZWxwZXJfcmVsZWFzZV9tbShkZXYpOworCWRybV9tb2RlX2NvbmZpZ19jbGVh
bnVwKGRldik7CisJZGV2LT5kZXZfcHJpdmF0ZSA9IE5VTEw7CisJZGV2X3NldF9kcnZkYXRhKGRl
di0+ZGV2LCBOVUxMKTsKK30KKworREVGSU5FX0RSTV9HRU1fRk9QUyhmb3BzKTsKKworc3RhdGlj
IHN0cnVjdCBkcm1fZHJpdmVyIGxvb25nc29uX2RybV9kcml2ZXIgPSB7CisJLmRyaXZlcl9mZWF0
dXJlcyA9IERSSVZFUl9NT0RFU0VUIHwgRFJJVkVSX0dFTSB8IERSSVZFUl9BVE9NSUMsCisJLmZv
cHMgPSAmZm9wcywKKwlEUk1fR0VNX1ZSQU1fRFJJVkVSLAorCisJLm5hbWUgPSBEUklWRVJfTkFN
RSwKKwkuZGVzYyA9IERSSVZFUl9ERVNDLAorCS5kYXRlID0gRFJJVkVSX0RBVEUsCisJLm1ham9y
ID0gRFJJVkVSX01BSk9SLAorCS5taW5vciA9IERSSVZFUl9NSU5PUiwKK307CisKK3N0YXRpYyBp
bnQgbG9vbmdzb25fcGNpX3Byb2JlKHN0cnVjdCBwY2lfZGV2ICpwZGV2LAorCQkJICAgICAgY29u
c3Qgc3RydWN0IHBjaV9kZXZpY2VfaWQgKmVudCkKK3sKKwlpbnQgcmV0OworCXN0cnVjdCBkcm1f
ZGV2aWNlICpkZXY7CisKKwlEUk1fSU5GTygiU3RhcnQgbG9vbmdzb24gZHJtIHByb2JlXG4iKTsK
KwlkZXYgPSBkcm1fZGV2X2FsbG9jKCZsb29uZ3Nvbl9kcm1fZHJpdmVyLCAmcGRldi0+ZGV2KTsK
KwlpZiAoSVNfRVJSKGRldikpIHsKKwkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gYWxsb2NhdGUgZHJt
X2RldmljZVxuIik7CisJCXJldHVybiBQVFJfRVJSKGRldik7CisJfQorCisJZGV2LT5wZGV2ID0g
cGRldjsKKwlwY2lfc2V0X2RydmRhdGEocGRldiwgZGV2KTsKKworCXJldCA9IHBjaV9lbmFibGVf
ZGV2aWNlKHBkZXYpOworCWlmIChyZXQpIHsKKwkJZHJtX2VycihkZXYsICJmYWlsZWQgdG8gZW5h
YmxlIHBjaSBkZXZpY2U6ICVkXG4iLCByZXQpOworCQlnb3RvIGVycl9mcmVlOworCX0KKworCXJl
dCA9IGxvb25nc29uX2RybV9sb2FkKGRldiwgMHgwKTsKKwlpZiAocmV0KSB7CisJCWRybV9lcnIo
ZGV2LCAiZmFpbGVkIHRvIGxvYWQgbG9vbmdzb246ICVkXG4iLCByZXQpOworCQlnb3RvIGVycl9w
ZGV2OworCX0KKworCXJldCA9IGRybV9kZXZfcmVnaXN0ZXIoZGV2LCAwKTsKKwlpZiAocmV0KSB7
CisJCWRybV9lcnIoZGV2LCAiZmFpbGVkIHRvIHJlZ2lzdGVyIGRydiBmb3IgdXNlcnNwYWNlIGFj
Y2VzczogJWRcbiIsCisJCQlyZXQpOworCQlnb3RvIGVycl9wZGV2OworCX0KKworCWRybV9mYmRl
dl9nZW5lcmljX3NldHVwKGRldiwgZGV2LT5tb2RlX2NvbmZpZy5wcmVmZXJyZWRfZGVwdGgpOwor
CisJcmV0dXJuIDA7CisKK2Vycl9wZGV2OgorCXBjaV9kaXNhYmxlX2RldmljZShwZGV2KTsKK2Vy
cl9mcmVlOgorCWRybV9kZXZfcHV0KGRldik7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZv
aWQgbG9vbmdzb25fcGNpX3JlbW92ZShzdHJ1Y3QgcGNpX2RldiAqcGRldikKK3sKKwlzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2ID0gcGNpX2dldF9kcnZkYXRhKHBkZXYpOworCisJZHJtX2Rldl91bnJl
Z2lzdGVyKGRldik7CisJbG9vbmdzb25fZHJtX3VubG9hZChkZXYpOworCWRybV9kZXZfcHV0KGRl
dik7Cit9CisKK3N0YXRpYyBzdHJ1Y3QgcGNpX2RldmljZV9pZCBsb29uZ3Nvbl9wY2lfZGV2aWNl
c1tdID0geworCXsgUENJX0RFVklDRShQQ0lfVkVORE9SX0lEX0xPT05HU09OLCBQQ0lfREVWSUNF
X0lEX0xPT05HU09OX0RDKSB9LAorCXswLH0KK307CisKK3N0YXRpYyBzdHJ1Y3QgcGNpX2RyaXZl
ciBsb29uZ3Nvbl9kcm1fcGNpX2RyaXZlciA9IHsKKwkubmFtZSA9IERSSVZFUl9OQU1FLAorCS5p
ZF90YWJsZSA9IGxvb25nc29uX3BjaV9kZXZpY2VzLAorCS5wcm9iZSA9IGxvb25nc29uX3BjaV9w
cm9iZSwKKwkucmVtb3ZlID0gbG9vbmdzb25fcGNpX3JlbW92ZSwKK307CisKK3N0YXRpYyBpbnQg
X19pbml0IGxvb25nc29uX2RybV9pbml0KHZvaWQpCit7CisJcmV0dXJuIHBjaV9yZWdpc3Rlcl9k
cml2ZXIoJmxvb25nc29uX2RybV9wY2lfZHJpdmVyKTsKK30KKworc3RhdGljIHZvaWQgX19leGl0
IGxvb25nc29uX2RybV9leGl0KHZvaWQpCit7CisJcGNpX3VucmVnaXN0ZXJfZHJpdmVyKCZsb29u
Z3Nvbl9kcm1fcGNpX2RyaXZlcik7Cit9CisKK21vZHVsZV9pbml0KGxvb25nc29uX2RybV9pbml0
KTsKK21vZHVsZV9leGl0KGxvb25nc29uX2RybV9leGl0KTsKKworTU9EVUxFX0FVVEhPUihEUklW
RVJfQVVUSE9SKTsKK01PRFVMRV9ERVNDUklQVElPTihEUklWRVJfREVTQyk7CitNT0RVTEVfTElD
RU5TRSgiR1BMIHYyIik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9v
bmdzb25fZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2LmgKbmV3
IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi40OThkMWIwODJhMTkKLS0tIC9k
ZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2LmgKQEAg
LTAsMCArMSwxMzkgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkg
Ki8KKworI2lmbmRlZiBfX0xPT05HU09OX0RSVl9IX18KKyNkZWZpbmUgX19MT09OR1NPTl9EUlZf
SF9fCisKKyNpbmNsdWRlIDxkcm0vZHJtX2Rydi5oPgorI2luY2x1ZGUgPGRybS9kcm1fZ2VtLmg+
CisjaW5jbHVkZSA8ZHJtL2RybV9mYl9oZWxwZXIuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2ZvdXJj
Yy5oPgorI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+CisjaW5jbHVkZSA8ZHJtL2Ry
bV9hdG9taWMuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2F0b21pY19oZWxwZXIuaD4KKyNpbmNsdWRl
IDxkcm0vZHJtX2dlbV9mcmFtZWJ1ZmZlcl9oZWxwZXIuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2dl
bV92cmFtX2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fcGxhbmUuaD4KKyNpbmNsdWRlIDxk
cm0vZHJtX3BsYW5lX2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fY3J0Yy5oPgorI2luY2x1
ZGUgPGRybS9kcm1fY3J0Y19oZWxwZXIuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2Nvbm5lY3Rvci5o
PgorI2luY2x1ZGUgPGRybS9kcm1fZW5jb2Rlci5oPgorCisvKiBHZW5lcmFsIGN1c3RvbWl6YXRp
b246CisgKi8KKyNkZWZpbmUgRFJJVkVSX0FVVEhPUiAiTG9vbmdzb24gZ3JhcGhpY3MgZHJpdmVy
IHRlYW0iCisjZGVmaW5lIERSSVZFUl9OQU1FICJsb29uZ3Nvbi1kcm0iCisjZGVmaW5lIERSSVZF
Ul9ERVNDICJMb29uZ3NvbiBMUzdBIERSTSBkcml2ZXIiCisjZGVmaW5lIERSSVZFUl9EQVRFICIy
MDIwMDkxNSIKKworI2RlZmluZSB0b19sb29uZ3Nvbl9jcnRjKHgpIGNvbnRhaW5lcl9vZih4LCBz
dHJ1Y3QgbG9vbmdzb25fY3J0YywgYmFzZSkKKyNkZWZpbmUgdG9fbG9vbmdzb25fZW5jb2Rlcih4
KSBjb250YWluZXJfb2YoeCwgc3RydWN0IGxvb25nc29uX2VuY29kZXIsIGJhc2UpCisKKyNkZWZp
bmUgTFM3QV9DSElQQ0ZHX1JFR19CQVNFICgweDEwMDEwMDAwKQorI2RlZmluZSBQQ0lfREVWSUNF
X0lEX0xPT05HU09OX0RDIDB4N2EwNgorI2RlZmluZSBQQ0lfREVWSUNFX0lEX0xPT05HU09OX0dQ
VSAweDdhMTUKKyNkZWZpbmUgTFM3QV9QSVhfUExMICgweDA0YjApCisjZGVmaW5lIFJFR19PRkZT
RVQgKDB4MTApCisjZGVmaW5lIEZCX0NGR19SRUcgKDB4MTI0MCkKKyNkZWZpbmUgRkJfQUREUjBf
UkVHICgweDEyNjApCisjZGVmaW5lIEZCX0FERFIxX1JFRyAoMHgxNTgwKQorI2RlZmluZSBGQl9T
VFJJX1JFRyAoMHgxMjgwKQorI2RlZmluZSBGQl9ESVRDRkdfUkVHICgweDEzNjApCisjZGVmaW5l
IEZCX0RJVFRBQl9MT19SRUcgKDB4MTM4MCkKKyNkZWZpbmUgRkJfRElUVEFCX0hJX1JFRyAoMHgx
M2EwKQorI2RlZmluZSBGQl9QQU5DRkdfUkVHICgweDEzYzApCisjZGVmaW5lIEZCX1BBTlRJTV9S
RUcgKDB4MTNlMCkKKyNkZWZpbmUgRkJfSERJU1BMQVlfUkVHICgweDE0MDApCisjZGVmaW5lIEZC
X0hTWU5DX1JFRyAoMHgxNDIwKQorI2RlZmluZSBGQl9WRElTUExBWV9SRUcgKDB4MTQ4MCkKKyNk
ZWZpbmUgRkJfVlNZTkNfUkVHICgweDE0YTApCisKKyNkZWZpbmUgQ0ZHX0ZNVCBHRU5NQVNLKDIs
IDApCisjZGVmaW5lIENGR19GQlNXSVRDSCBCSVQoNykKKyNkZWZpbmUgQ0ZHX0VOQUJMRSBCSVQo
OCkKKyNkZWZpbmUgQ0ZHX0ZCTlVNIEJJVCgxMSkKKyNkZWZpbmUgQ0ZHX0dBTU1BUiBCSVQoMTIp
CisjZGVmaW5lIENGR19SRVNFVCBCSVQoMjApCisKKyNkZWZpbmUgRkJfUEFOQ0ZHX0RFRiAweDgw
MDAxMzExCisjZGVmaW5lIEZCX0hTWU5DX1BVTFNFICgxIDw8IDMwKQorI2RlZmluZSBGQl9WU1lO
Q19QVUxTRSAoMSA8PCAzMCkKKworLyogUElYIFBMTCAqLworI2RlZmluZSBMT09QQ19NSU4gMjQK
KyNkZWZpbmUgTE9PUENfTUFYIDE2MQorI2RlZmluZSBGUkVfUkVGX01JTiAxMgorI2RlZmluZSBG
UkVfUkVGX01BWCAzMgorI2RlZmluZSBESVZfUkVGX01JTiAzCisjZGVmaW5lIERJVl9SRUZfTUFY
IDUKKyNkZWZpbmUgUFNUX0RJVl9NQVggNjQKKworc3RydWN0IHBpeF9wbGwgeworCXUzMiBsMl9k
aXY7CisJdTMyIGwxX2xvb3BjOworCXUzMiBsMV9mcmVmYzsKK307CisKK3N0cnVjdCBsb29uZ3Nv
bl9jcnRjIHsKKwlzdHJ1Y3QgZHJtX2NydGMgYmFzZTsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNl
ICpsZGV2OworCXUzMiBjcnRjX2lkOworCXUzMiByZWdfb2Zmc2V0OworCXUzMiBjZmdfcmVnOwor
CXN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lOworfTsKKworc3RydWN0IGxvb25nc29uX2VuY29kZXIg
eworCXN0cnVjdCBkcm1fZW5jb2RlciBiYXNlOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxk
ZXY7CisJc3RydWN0IGxvb25nc29uX2NydGMgKmxjcnRjOworfTsKKworc3RydWN0IGxvb25nc29u
X2Nvbm5lY3RvciB7CisJc3RydWN0IGRybV9jb25uZWN0b3IgYmFzZTsKKwlzdHJ1Y3QgbG9vbmdz
b25fZGV2aWNlICpsZGV2OworCXUxNiBpZDsKKwl1MzIgdHlwZTsKK307CisKK3N0cnVjdCBsb29u
Z3Nvbl9tb2RlX2luZm8geworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJc3RydWN0
IGxvb25nc29uX2NydGMgKmNydGM7CisJc3RydWN0IGxvb25nc29uX2VuY29kZXIgKmVuY29kZXI7
CisJc3RydWN0IGxvb25nc29uX2Nvbm5lY3RvciAqY29ubmVjdG9yOworfTsKKworc3RydWN0IGxv
b25nc29uX2RldmljZSB7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldjsKKwlzdHJ1Y3QgZHJtX2F0
b21pY19zdGF0ZSAqc3RhdGU7CisKKwl2b2lkIF9faW9tZW0gKm1taW87CisJdm9pZCBfX2lvbWVt
ICppbzsKKwl1MzIgdnJhbV9zdGFydDsKKwl1MzIgdnJhbV9zaXplOworCisJdTMyIG51bV9jcnRj
OworCXN0cnVjdCBsb29uZ3Nvbl9tb2RlX2luZm8gbW9kZV9pbmZvWzJdOworCXN0cnVjdCBwY2lf
ZGV2ICpncHVfcGRldjsgLyogTFM3QSBncHUgZGV2aWNlIGluZm8gKi8KK307CisKKy8qIGNydGMg
Ki8KK2ludCBsb29uZ3Nvbl9jcnRjX2luaXQoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwg
aW50IGluZGV4KTsKKworLyogY29ubmVjdG9yICovCitpbnQgbG9vbmdzb25fY29ubmVjdG9yX2lu
aXQoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgaW50IGluZGV4KTsKKworLyogZW5jb2Rl
ciAqLworaW50IGxvb25nc29uX2VuY29kZXJfaW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICps
ZGV2LCBpbnQgaW5kZXgpOworCisvKiBwbGFuZSAqLworaW50IGxvb25nc29uX3BsYW5lX2luaXQo
c3RydWN0IGxvb25nc29uX2NydGMgKmxjcnRjKTsKKworLyogZGV2aWNlICovCit1MzIgbG9vbmdz
b25fZ3B1X29mZnNldChzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSk7Cit1MzIgbHM3YV9t
bV9ycmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIHUzMiBvZmZzZXQpOwordm9pZCBs
czdhX21tX3dyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCwgdTMy
IHZhbCk7Cit1MzIgbHM3YV9pb19ycmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIHUz
MiBvZmZzZXQpOwordm9pZCBsczdhX2lvX3dyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRl
diwgdTMyIG9mZnNldCwgdTMyIHZhbCk7CisKKyNlbmRpZiAvKiBfX0xPT05HU09OX0RSVl9IX18g
Ki8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9lbmNvZGVy
LmMgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZW5jb2Rlci5jCm5ldyBmaWxl
IG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uMjAwMmNlZTAwMzAzCi0tLSAvZGV2L251
bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2VuY29kZXIuYwpAQCAt
MCwwICsxLDM3IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1sYXRl
cgorCisjaW5jbHVkZSAibG9vbmdzb25fZHJ2LmgiCisKK3N0YXRpYyB2b2lkIGxvb25nc29uX2Vu
Y29kZXJfZGVzdHJveShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCit7CisJc3RydWN0IGxv
b25nc29uX2VuY29kZXIgKmxlbmNvZGVyID0gdG9fbG9vbmdzb25fZW5jb2RlcihlbmNvZGVyKTsK
KworCWRybV9lbmNvZGVyX2NsZWFudXAoZW5jb2Rlcik7CisJa2ZyZWUobGVuY29kZXIpOworfQor
CitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9lbmNvZGVyX2Z1bmNzIGxvb25nc29uX2VuY29kZXJf
ZnVuY3MgPSB7CisJLmRlc3Ryb3kgPSBsb29uZ3Nvbl9lbmNvZGVyX2Rlc3Ryb3ksCit9OworCitp
bnQgbG9vbmdzb25fZW5jb2Rlcl9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGlu
dCBpbmRleCkKK3sKKwlzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXI7CisJc3RydWN0IGxvb25n
c29uX2VuY29kZXIgKmxlbmNvZGVyOworCisJbGVuY29kZXIgPSBremFsbG9jKHNpemVvZihzdHJ1
Y3QgbG9vbmdzb25fZW5jb2RlciksIEdGUF9LRVJORUwpOworCWlmICghbGVuY29kZXIpCisJCXJl
dHVybiAtMTsKKworCWxlbmNvZGVyLT5sY3J0YyA9IGxkZXYtPm1vZGVfaW5mb1tpbmRleF0uY3J0
YzsKKwlsZW5jb2Rlci0+bGRldiA9IGxkZXY7CisJZW5jb2RlciA9ICZsZW5jb2Rlci0+YmFzZTsK
KwllbmNvZGVyLT5wb3NzaWJsZV9jcnRjcyA9IDEgPDwgaW5kZXg7CisKKwlkcm1fZW5jb2Rlcl9p
bml0KGxkZXYtPmRldiwgZW5jb2RlciwgJmxvb25nc29uX2VuY29kZXJfZnVuY3MsCisJCQkgRFJN
X01PREVfRU5DT0RFUl9EQUMsIE5VTEwpOworCisJbGRldi0+bW9kZV9pbmZvW2luZGV4XS5lbmNv
ZGVyID0gbGVuY29kZXI7CisKKwlyZXR1cm4gMDsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9wbGFuZS5jIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29u
L2xvb25nc29uX3BsYW5lLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAw
Li5mNDY5NGRjYmYxMjIKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdz
b24vbG9vbmdzb25fcGxhbmUuYwpAQCAtMCwwICsxLDEwMiBAQAorLy8gU1BEWC1MaWNlbnNlLUlk
ZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKworI2luY2x1ZGUgImxvb25nc29uX2Rydi5oIgor
CitzdGF0aWMgdm9pZCBsb29uZ3Nvbl9wbGFuZV9hdG9taWNfdXBkYXRlKHN0cnVjdCBkcm1fcGxh
bmUgKnBsYW5lLAorCQkJCQkgc3RydWN0IGRybV9wbGFuZV9zdGF0ZSAqb2xkX3N0YXRlKQorewor
CXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YzsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICps
ZGV2OworCXN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKnN0YXRlID0gcGxhbmUtPnN0YXRlOworCXUz
MiBncHVfYWRkciA9IDA7CisJdTMyIGZiX2FkZHIgPSAwOworCXUzMiByZWdfdmFsID0gMDsKKwl1
MzIgcmVnX29mZnNldDsKKwl1MzIgcGl0Y2g7CisJdTggZGVwdGg7CisJdTMyIHgsIHk7CisKKwlp
ZiAoIXN0YXRlLT5jcnRjIHx8ICFzdGF0ZS0+ZmIpCisJCXJldHVybjsKKworCXBpdGNoID0gc3Rh
dGUtPmZiLT5waXRjaGVzWzBdOworCWxjcnRjID0gdG9fbG9vbmdzb25fY3J0YyhzdGF0ZS0+Y3J0
Yyk7CisJbGRldiA9IGxjcnRjLT5sZGV2OworCXJlZ19vZmZzZXQgPSBsY3J0Yy0+cmVnX29mZnNl
dDsKKwl4ID0gc3RhdGUtPmNydGMtPng7CisJeSA9IHN0YXRlLT5jcnRjLT55OworCWRlcHRoID0g
c3RhdGUtPmZiLT5mb3JtYXQtPmNwcFswXSA8PCAzOworCisJZ3B1X2FkZHIgPSBsb29uZ3Nvbl9n
cHVfb2Zmc2V0KHN0YXRlKTsKKwlyZWdfdmFsID0gKHBpdGNoICsgMjU1KSAmIH4yNTU7CisJbHM3
YV9tbV93cmVnKGxkZXYsIEZCX1NUUklfUkVHICsgcmVnX29mZnNldCwgcmVnX3ZhbCk7CisKKwlz
d2l0Y2ggKGRlcHRoKSB7CisJY2FzZSAxMiAuLi4gMTY6CisJCWZiX2FkZHIgPSBncHVfYWRkciAr
IHkgKiBwaXRjaCArIEFMSUdOKHgsIDY0KSAqIDI7CisJCWJyZWFrOworCWNhc2UgMjQgLi4uIDMy
OgorCWRlZmF1bHQ6CisJCWZiX2FkZHIgPSBncHVfYWRkciArIHkgKiBwaXRjaCArIEFMSUdOKHgs
IDY0KSAqIDQ7CisJCWJyZWFrOworCX0KKworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9BRERSMF9S
RUcgKyByZWdfb2Zmc2V0LCBmYl9hZGRyKTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfQUREUjFf
UkVHICsgcmVnX29mZnNldCwgZmJfYWRkcik7CisJcmVnX3ZhbCA9IGxjcnRjLT5jZmdfcmVnIHwg
Q0ZHX0VOQUJMRTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfQ0ZHX1JFRyArIHJlZ19vZmZzZXQs
IHJlZ192YWwpOworfQorCitzdGF0aWMgY29uc3QgdWludDMyX3QgbG9vbmdzb25fZm9ybWF0c1td
ID0geworCURSTV9GT1JNQVRfUkdCNTY1LAorCURSTV9GT1JNQVRfUkdCODg4LAorCURSTV9GT1JN
QVRfWFJHQjg4ODgsCisJRFJNX0ZPUk1BVF9BUkdCODg4OCwKK307CisKK3N0YXRpYyBjb25zdCB1
aW50NjRfdCBsb29uZ3Nvbl9mb3JtYXRfbW9kaWZpZXJzW10gPSB7IERSTV9GT1JNQVRfTU9EX0xJ
TkVBUiwKKwkJCQkJCSAgICAgIERSTV9GT1JNQVRfTU9EX0lOVkFMSUQgfTsKKworc3RhdGljIGNv
bnN0IHN0cnVjdCBkcm1fcGxhbmVfZnVuY3MgbG9vbmdzb25fcGxhbmVfZnVuY3MgPSB7CisJLmF0
b21pY19kdXBsaWNhdGVfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9wbGFuZV9kdXBsaWNhdGVf
c3RhdGUsCisJLmF0b21pY19kZXN0cm95X3N0YXRlID0gZHJtX2F0b21pY19oZWxwZXJfcGxhbmVf
ZGVzdHJveV9zdGF0ZSwKKwkuZGVzdHJveSA9IGRybV9wbGFuZV9jbGVhbnVwLAorCS5kaXNhYmxl
X3BsYW5lID0gZHJtX2F0b21pY19oZWxwZXJfZGlzYWJsZV9wbGFuZSwKKwkucmVzZXQgPSBkcm1f
YXRvbWljX2hlbHBlcl9wbGFuZV9yZXNldCwKKwkudXBkYXRlX3BsYW5lID0gZHJtX2F0b21pY19o
ZWxwZXJfdXBkYXRlX3BsYW5lLAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcGxhbmVf
aGVscGVyX2Z1bmNzIGxvb25nc29uX3BsYW5lX2hlbHBlcl9mdW5jcyA9IHsKKwkucHJlcGFyZV9m
Ygk9IGRybV9nZW1fdnJhbV9wbGFuZV9oZWxwZXJfcHJlcGFyZV9mYiwKKwkuY2xlYW51cF9mYgk9
IGRybV9nZW1fdnJhbV9wbGFuZV9oZWxwZXJfY2xlYW51cF9mYiwKKwkuYXRvbWljX3VwZGF0ZSA9
IGxvb25nc29uX3BsYW5lX2F0b21pY191cGRhdGUsCit9OworCitpbnQgbG9vbmdzb25fcGxhbmVf
aW5pdChzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGMpCit7CisJc3RydWN0IGxvb25nc29uX2Rl
dmljZSAqbGRldjsKKwlpbnQgY3J0Y19pZDsKKwlpbnQgcmV0OworCisJbGRldiA9IGxjcnRjLT5s
ZGV2OworCWNydGNfaWQgPSBsY3J0Yy0+Y3J0Y19pZDsKKworCWxjcnRjLT5wbGFuZSA9IGRldm1f
a3phbGxvYyhsZGV2LT5kZXYtPmRldiwgc2l6ZW9mKCpsY3J0Yy0+cGxhbmUpLAorCQkJCSAgICBH
RlBfS0VSTkVMKTsKKwlpZiAoIWxjcnRjLT5wbGFuZSkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwly
ZXQgPSBkcm1fdW5pdmVyc2FsX3BsYW5lX2luaXQobGRldi0+ZGV2LCBsY3J0Yy0+cGxhbmUsIEJJ
VChjcnRjX2lkKSwKKwkJCQkgICAgICAgJmxvb25nc29uX3BsYW5lX2Z1bmNzLCBsb29uZ3Nvbl9m
b3JtYXRzLAorCQkJCSAgICAgICBBUlJBWV9TSVpFKGxvb25nc29uX2Zvcm1hdHMpLAorCQkJCSAg
ICAgICBsb29uZ3Nvbl9mb3JtYXRfbW9kaWZpZXJzLAorCQkJCSAgICAgICBEUk1fUExBTkVfVFlQ
RV9QUklNQVJZLCBOVUxMKTsKKwlpZiAocmV0KSB7CisJCURSTV9FUlJPUigiZmFpbCB0byBpbml0
IHBsYW5lZCBjcnRjICVkXG4iLCBjcnRjX2lkKTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlkcm1f
cGxhbmVfaGVscGVyX2FkZChsY3J0Yy0+cGxhbmUsICZsb29uZ3Nvbl9wbGFuZV9oZWxwZXJfZnVu
Y3MpOworCisJcmV0dXJuIDA7Cit9Ci0tIAoyLjMwLjE=
------=_Part_12870_954473136.1615512536404
Content-Type: text/html; charset=GBK
Content-Transfer-Encoding: base64

PGRpdiBzdHlsZT0ibGluZS1oZWlnaHQ6MS43O2NvbG9yOiMwMDAwMDA7Zm9udC1zaXplOjE0cHg7
Zm9udC1mYW1pbHk6QXJpYWwiPjxwcmUgd3JhcD0ic29mdCI+VGhpcyBwYXRjaCBhZGRzIGFuIGlu
aXRpYWwgRFJNIGRyaXZlciBmb3IgdGhlIExvb25nc29uIExTN0ExMDAwCmJyaWRnZSBjaGlwKExT
N0EpLiBUaGUgTFM3QSBicmlkZ2UgY2hpcCBjb250YWlucyB0d28gZGlzcGxheQpjb250cm9sbGVy
cywgc3VwcG9ydCBkdWFsIGRpc3BsYXkgb3V0cHV0LiBUaGUgbWF4aW11bSBzdXBwb3J0IGZvcgpl
YWNoIGNoYW5uZWwgZGlzcGxheSBpcyB0byAxOTIweDEwODBANjBIei4KQXQgcHJlc2VudCwgREMg
ZGV2aWNlIGRldGVjdGlvbiBhbmQgRFJNIGRyaXZlciByZWdpc3RyYXRpb24gYXJlCmNvbXBsZXRl
ZCwgdGhlIGNydGMvcGxhbmUvZW5jb2Rlci9jb25uZWN0b3Igb2JqZWN0cyBoYXMgYmVlbgppbXBs
ZW1lbnRlZC4KT24gTG9vbmdzb24gM0E0MDAwIENQVSBhbmQgN0ExMDAwIHN5c3RlbSwgd2UgaGF2
ZSBhY2hpZXZlZCB0aGUgdXNlCm9mIGR1YWwgc2NyZWVuLCBhbmQgc3VwcG9ydCBkdWFsIHNjcmVl
biBjbG9uZSBtb2RlIGFuZCBleHBhbnNpb24KbW9kZS4KCnY2OgotIFJlbW92ZSBzcGluX2xvY2sg
aW4gbW1pbyByZWcgcmVhZCBhbmQgd3JpdGUuCi0gVE9fVU5DQUMgaXMgcmVwbGFjIHdpdGggaW9y
ZW1hcC4KLSBGaXggZXJyb3IgYXJndW1lbnRzIGluIGNydGNfYXRvbWljX2VuYWJsZS9kaXNhYmxl
L21vZGVfdmFsaWQuCgp2NToKLSBDaGFuZ2UgdGhlIG5hbWUgb2YgdGhlIGNoaXAgdG8gTFM3QS4K
LSBDaGFuZ2UgbWFnaWMgdmFsdWUgaW4gY3J0YyB0byBtYWNyb3MuCi0gQ29ycmVjdCBtaXN0YWtl
cyB3b3Jkcy4KLSBDaGFuZ2UgdGhlIHJlZ2lzdGVyIG9wZXJhdGlvbiBmdW5jdGlvbiBwcmVmaXgg
dG8gbHM3YS4KCnY0OgotIE1vdmUgdGhlIG1vZGVfdmFsaWQgZnVuY3Rpb24gdG8gdGhlIGNydGMu
Cgp2MzoKLSBNb3ZlIHRoZSBtb2RlX3ZhbGlkIGZ1bmN0aW9uIHRvIHRoZSBjb25uZWN0b3IgYW5k
IG9wdGltaXplIGl0LgotIEZpeCBudW1fY3J0YyBjYWxjdWxhdGlvbiBtZXRob2QuCgp2MjoKLSBD
b21wbGV0ZSB0aGUgY2FzZSBvZiAzMi1iaXQgY29sb3IgaW4gQ1JUQy4KClNpZ25lZC1vZmYtYnk6
IENoZW55YW5nIExpICZsdDtsaWNoZW55YW5nQGxvb25nc29uLmNuJmd0OwotLS0KIGRyaXZlcnMv
Z3B1L2RybS9LY29uZmlnICAgICAgICAgICAgICAgICAgICAgICB8ICAgMiArCiBkcml2ZXJzL2dw
dS9kcm0vTWFrZWZpbGUgICAgICAgICAgICAgICAgICAgICAgfCAgIDEgKwogZHJpdmVycy9ncHUv
ZHJtL2xvb25nc29uL0tjb25maWcgICAgICAgICAgICAgIHwgIDE0ICsKIGRyaXZlcnMvZ3B1L2Ry
bS9sb29uZ3Nvbi9NYWtlZmlsZSAgICAgICAgICAgICB8ICAxNCArCiBkcml2ZXJzL2dwdS9kcm0v
bG9vbmdzb24vbG9vbmdzb25fY29ubmVjdG9yLmMgfCAgNDggKysrKwogZHJpdmVycy9ncHUvZHJt
L2xvb25nc29uL2xvb25nc29uX2NydGMuYyAgICAgIHwgMjQzICsrKysrKysrKysrKysrKysKIGRy
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYyAgICB8ICA0NyArKysKIGRy
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuYyAgICAgICB8IDI3MCArKysrKysr
KysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaCAgICAg
ICB8IDEzOSArKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9lbmNv
ZGVyLmMgICB8ICAzNyArKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9wbGFu
ZS5jICAgICB8IDEwMiArKysrKysrCiAxMSBmaWxlcyBjaGFuZ2VkLCA5MTcgaW5zZXJ0aW9ucygr
KQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9LY29uZmlnCiBj
cmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL01ha2VmaWxlCiBjcmVh
dGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Nvbm5lY3Rv
ci5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29u
X2NydGMuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29u
Z3Nvbl9kZXZpY2UuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nv
bi9sb29uZ3Nvbl9kcnYuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29u
Z3Nvbi9sb29uZ3Nvbl9kcnYuaAogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9s
b29uZ3Nvbi9sb29uZ3Nvbl9lbmNvZGVyLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dw
dS9kcm0vbG9vbmdzb24vbG9vbmdzb25fcGxhbmUuYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL0tjb25maWcKaW5kZXggMDk3M2Y0MDhkNzVm
Li42ZWQxYjZkYzJmMjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9LY29uZmlnCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9LY29uZmlnCkBAIC0zNzQsNiArMzc0LDggQEAgc291cmNlICJkcml2
ZXJzL2dwdS9kcm0veGVuL0tjb25maWciCiAKIHNvdXJjZSAiZHJpdmVycy9ncHUvZHJtL3Zib3h2
aWRlby9LY29uZmlnIgogCitzb3VyY2UgImRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9LY29uZmln
IgorCiBzb3VyY2UgImRyaXZlcnMvZ3B1L2RybS9saW1hL0tjb25maWciCiAKIHNvdXJjZSAiZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L0tjb25maWciCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKaW5kZXggZmVmYWZmNGM4MzJk
Li5mODdkYTczMGVhNmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9NYWtlZmlsZQorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKQEAgLTExOSw2ICsxMTksNyBAQCBvYmotJChDT05G
SUdfRFJNX1BMMTExKSArPSBwbDExMS8KIG9iai0kKENPTkZJR19EUk1fVFZFMjAwKSArPSB0dmUy
MDAvCiBvYmotJChDT05GSUdfRFJNX1hFTikgKz0geGVuLwogb2JqLSQoQ09ORklHX0RSTV9WQk9Y
VklERU8pICs9IHZib3h2aWRlby8KK29iai0kKENPTkZJR19EUk1fTE9PTkdTT04pICs9IGxvb25n
c29uLwogb2JqLSQoQ09ORklHX0RSTV9MSU1BKSAgKz0gbGltYS8KIG9iai0kKENPTkZJR19EUk1f
UEFORlJPU1QpICs9IHBhbmZyb3N0Lwogb2JqLSQoQ09ORklHX0RSTV9BU1BFRURfR0ZYKSArPSBh
c3BlZWQvCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZyBiL2Ry
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9LY29uZmlnCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAwMDAwMC4uM2NmNDJhNGNjYTA4Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2xvb25nc29uL0tjb25maWcKQEAgLTAsMCArMSwxNCBAQAorIyBTUERYLUxpY2Vuc2Ut
SWRlbnRpZmllcjogR1BMLTIuMC1vbmx5CisKK2NvbmZpZyBEUk1fTE9PTkdTT04KKwl0cmlzdGF0
ZSAiRFJNIHN1cHBvcnQgZm9yIExTN0EgYnJpZGdlIGNoaXBzZXQiCisJZGVwZW5kcyBvbiBEUk0g
JmFtcDsmYW1wOyBQQ0kKKwlkZXBlbmRzIG9uIENQVV9MT09OR1NPTjY0CisJc2VsZWN0IERSTV9L
TVNfSEVMUEVSCisJc2VsZWN0IERSTV9WUkFNX0hFTFBFUgorCXNlbGVjdCBEUk1fVFRNCisJc2Vs
ZWN0IERSTV9UVE1fSEVMUEVSCisJZGVmYXVsdCBuCisJaGVscAorCSAgU3VwcG9ydCB0aGUgZGlz
cGxheSBjb250cm9sbGVycyBmb3VuZCBvbiB0aGUgTG9vbmdzb24gTFM3QQorCSAgYnJpZGdlLgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL01ha2VmaWxlIGIvZHJpdmVycy9n
cHUvZHJtL2xvb25nc29uL01ha2VmaWxlCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAwMDAwMC4uMjJkMDYzOTUzYjc4Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2xvb25nc29uL01ha2VmaWxlCkBAIC0wLDAgKzEsMTQgQEAKKyMgU1BEWC1MaWNlbnNlLUlkZW50
aWZpZXI6IEdQTC0yLjAtb25seQorIworIyBNYWtlZmlsZSBmb3IgbG9vbmdzb24gZHJtIGRyaXZl
cnMuCisjIFRoaXMgZHJpdmVyIHByb3ZpZGVzIHN1cHBvcnQgZm9yIHRoZQorIyBEaXJlY3QgUmVu
ZGVyaW5nIEluZnJhc3RydWN0dXJlIChEUkkpCisKK2NjZmxhZ3MteSA6PSAtSWluY2x1ZGUvZHJt
Citsb29uZ3Nvbi15IDo9IGxvb25nc29uX2Rydi5vIFwKKwlsb29uZ3Nvbl9jcnRjLm8gXAorCWxv
b25nc29uX3BsYW5lLm8gXAorCWxvb25nc29uX2RldmljZS5vIFwKKwlsb29uZ3Nvbl9jb25uZWN0
b3IubyBcCisJbG9vbmdzb25fZW5jb2Rlci5vCitvYmotJChDT05GSUdfRFJNX0xPT05HU09OKSAr
PSBsb29uZ3Nvbi5vCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdz
b25fY29ubmVjdG9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY29ubmVj
dG9yLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi42YjFmMGZmYTMz
YmQKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25f
Y29ubmVjdG9yLmMKQEAgLTAsMCArMSw0OCBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6
IEdQTC0yLjAtb3ItbGF0ZXIKKworI2luY2x1ZGUgImxvb25nc29uX2Rydi5oIgorCitzdGF0aWMg
aW50IGxvb25nc29uX2dldF9tb2RlcyhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQor
eworCWludCBjb3VudDsKKworCWNvdW50ID0gZHJtX2FkZF9tb2Rlc19ub2VkaWQoY29ubmVjdG9y
LCAxOTIwLCAxMDgwKTsKKwlkcm1fc2V0X3ByZWZlcnJlZF9tb2RlKGNvbm5lY3RvciwgMTAyNCwg
NzY4KTsKKworCXJldHVybiBjb3VudDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29u
bmVjdG9yX2hlbHBlcl9mdW5jcyBsb29uZ3Nvbl9jb25uZWN0b3JfaGVscGVyID0geworCS5nZXRf
bW9kZXMgPSBsb29uZ3Nvbl9nZXRfbW9kZXMsCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9jb25uZWN0b3JfZnVuY3MgbG9vbmdzb25fY29ubmVjdG9yX2Z1bmNzID0geworCS5maWxsX21v
ZGVzID0gZHJtX2hlbHBlcl9wcm9iZV9zaW5nbGVfY29ubmVjdG9yX21vZGVzLAorCS5kZXN0cm95
ID0gZHJtX2Nvbm5lY3Rvcl9jbGVhbnVwLAorCS5yZXNldCA9IGRybV9hdG9taWNfaGVscGVyX2Nv
bm5lY3Rvcl9yZXNldCwKKwkuYXRvbWljX2R1cGxpY2F0ZV9zdGF0ZSA9IGRybV9hdG9taWNfaGVs
cGVyX2Nvbm5lY3Rvcl9kdXBsaWNhdGVfc3RhdGUsCisJLmF0b21pY19kZXN0cm95X3N0YXRlID0g
ZHJtX2F0b21pY19oZWxwZXJfY29ubmVjdG9yX2Rlc3Ryb3lfc3RhdGUsCit9OworCitpbnQgbG9v
bmdzb25fY29ubmVjdG9yX2luaXQoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgaW50IGlu
ZGV4KQoreworCXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3I7CisJc3RydWN0IGxvb25n
c29uX2Nvbm5lY3RvciAqbGNvbm5lY3RvcjsKKworCWxjb25uZWN0b3IgPSBremFsbG9jKHNpemVv
ZihzdHJ1Y3QgbG9vbmdzb25fY29ubmVjdG9yKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFsY29ubmVj
dG9yKSB7CisJCURSTV9JTkZPKCJsb29uZ3NvbiBjb25uZWN0b3Iga3phbGxvYyBmYWlsZWRcbiIp
OworCQlyZXR1cm4gLTE7CisJfQorCisJbGNvbm5lY3Rvci0mZ3Q7bGRldiA9IGxkZXY7CisJbGNv
bm5lY3Rvci0mZ3Q7aWQgPSBpbmRleDsKKworCWxkZXYtJmd0O21vZGVfaW5mb1tpbmRleF0uY29u
bmVjdG9yID0gbGNvbm5lY3RvcjsKKwljb25uZWN0b3IgPSAmYW1wO2xjb25uZWN0b3ItJmd0O2Jh
c2U7CisJZHJtX2Nvbm5lY3Rvcl9pbml0KGxkZXYtJmd0O2RldiwgY29ubmVjdG9yLCAmYW1wO2xv
b25nc29uX2Nvbm5lY3Rvcl9mdW5jcywKKwkJCSAgIERSTV9NT0RFX0NPTk5FQ1RPUl9Vbmtub3du
KTsKKwlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoY29ubmVjdG9yLCAmYW1wO2xvb25nc29uX2Nv
bm5lY3Rvcl9oZWxwZXIpOworCisJcmV0dXJuIDA7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5jIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29u
L2xvb25nc29uX2NydGMuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAu
LjVjZjY5NDQ3YjM5NAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nv
bi9sb29uZ3Nvbl9jcnRjLmMKQEAgLTAsMCArMSwyNDMgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVu
dGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCisKKyNpbmNsdWRlICJsb29uZ3Nvbl9kcnYuaCIKKwor
c3RhdGljIHZvaWQgdHJ5X2VhY2hfbG9vcGModTMyIGNsaywgdTMyIHBzdGRpdiwgdTMyIGZyZWZj
LAorCQkJICAgc3RydWN0IHBpeF9wbGwgKnBsbF9jb25maWcpCit7CisJdTMyIGxvb3BjOworCXUz
MiBjbGtfb3V0OworCXUzMiBwcmVjaXNpb247CisJdTMyIG1pbiA9IDEwMDA7CisJdTMyIGJhc2Vf
Y2xrID0gMTAwMDAwTDsKKworCWZvciAobG9vcGMgPSBMT09QQ19NSU47IGxvb3BjICZsdDsgTE9P
UENfTUFYOyBsb29wYysrKSB7CisJCWlmICgobG9vcGMgJmx0OyBGUkVfUkVGX01JTiAqIGZyZWZj
KSB8fAorCQkgICAgKGxvb3BjICZndDsgRlJFX1JFRl9NQVggKiBmcmVmYykpCisJCQljb250aW51
ZTsKKworCQljbGtfb3V0ID0gYmFzZV9jbGsgKiBsb29wYyAvIGZyZWZjOworCQlwcmVjaXNpb24g
PSAoY2xrICZndDsgY2xrX291dCkgPyAoY2xrIC0gY2xrX291dCkgOiAoY2xrX291dCAtIGNsayk7
CisJCWlmIChwcmVjaXNpb24gJmx0OyBtaW4pIHsKKwkJCXBsbF9jb25maWctJmd0O2wyX2RpdiA9
IHBzdGRpdjsKKwkJCXBsbF9jb25maWctJmd0O2wxX2xvb3BjID0gbG9vcGM7CisJCQlwbGxfY29u
ZmlnLSZndDtsMV9mcmVmYyA9IGZyZWZjOworCQl9CisJfQorfQorCitzdGF0aWMgdm9pZCBjYWxf
ZnJlcSh1MzIgcGl4Y2xvY2ssIHN0cnVjdCBwaXhfcGxsICpwbGxfY29uZmlnKQoreworCXUzMiBw
c3RkaXY7CisJdTMyIGZyZWZjOworCXUzMiBjbGs7CisKKwlmb3IgKHBzdGRpdiA9IDE7IHBzdGRp
diAmbHQ7IFBTVF9ESVZfTUFYOyBwc3RkaXYrKykgeworCQljbGsgPSBwaXhjbG9jayAqIHBzdGRp
djsKKwkJZm9yIChmcmVmYyA9IERJVl9SRUZfTUlOOyBmcmVmYyAmbHQ7PSBESVZfUkVGX01BWDsg
ZnJlZmMrKykKKwkJCXRyeV9lYWNoX2xvb3BjKGNsaywgcHN0ZGl2LCBmcmVmYywgcGxsX2NvbmZp
Zyk7CisJfQorfQorCitzdGF0aWMgdm9pZCBjb25maWdfcGxsKHN0cnVjdCBsb29uZ3Nvbl9kZXZp
Y2UgKmxkZXYsIHVuc2lnbmVkIGxvbmcgcGxsX2Jhc2UsCisJCSAgICAgICBzdHJ1Y3QgcGl4X3Bs
bCAqcGxsX2NmZykKK3sKKwl1MzIgdmFsOworCXUzMiBjb3VudCA9IDA7CisKKwkvKiBjbGVhciBz
ZWxfcGxsX291dDAgKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQp
OworCXZhbCAmYW1wOz0gfigxVUwgJmx0OyZsdDsgOCk7CisJbHM3YV9pb193cmVnKGxkZXYsIHBs
bF9iYXNlICsgMHg0LCB2YWwpOworCisJLyogc2V0IHBsbF9wZCAqLworCXZhbCA9IGxzN2FfaW9f
cnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCk7CisJdmFsIHw9ICgxVUwgJmx0OyZsdDsgMTMpOwor
CWxzN2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKworCS8qIGNsZWFyIHNl
dF9wbGxfcGFyYW0gKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQp
OworCXZhbCAmYW1wOz0gfigxVUwgJmx0OyZsdDsgMTEpOworCWxzN2FfaW9fd3JlZyhsZGV2LCBw
bGxfYmFzZSArIDB4NCwgdmFsKTsKKworCS8qIGNsZWFyIG9sZCB2YWx1ZSAmYW1wOyBjb25maWcg
bmV3IHZhbHVlICovCisJdmFsID0gbHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KTsK
Kwl2YWwgJmFtcDs9IH4oMHg3ZlVMICZsdDsmbHQ7IDApOworCXZhbCB8PSAocGxsX2NmZy0mZ3Q7
bDFfZnJlZmMgJmx0OyZsdDsgMCk7IC8qIHJlZmMgKi8KKwlsczdhX2lvX3dyZWcobGRldiwgcGxs
X2Jhc2UgKyAweDQsIHZhbCk7CisJdmFsID0gbHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsg
MHgwKTsKKwl2YWwgJmFtcDs9IH4oMHg3ZlVMICZsdDsmbHQ7IDApOworCXZhbCB8PSAocGxsX2Nm
Zy0mZ3Q7bDJfZGl2ICZsdDsmbHQ7IDApOyAvKiBkaXYgKi8KKwl2YWwgJmFtcDs9IH4oMHgxZmZV
TCAmbHQ7Jmx0OyAyMSk7CisJdmFsIHw9IChwbGxfY2ZnLSZndDtsMV9sb29wYyAmbHQ7Jmx0OyAy
MSk7IC8qIGxvb3BjICovCisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNlICsgMHgwLCB2YWwp
OworCisJLyogc2V0IHNldF9wbGxfcGFyYW0gKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwg
cGxsX2Jhc2UgKyAweDQpOworCXZhbCB8PSAoMVVMICZsdDsmbHQ7IDExKTsKKwlsczdhX2lvX3dy
ZWcobGRldiwgcGxsX2Jhc2UgKyAweDQsIHZhbCk7CisJLyogY2xlYXIgcGxsX3BkICovCisJdmFs
ID0gbHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KTsKKwl2YWwgJmFtcDs9IH4oMVVM
ICZsdDsmbHQ7IDEzKTsKKwlsczdhX2lvX3dyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQsIHZhbCk7
CisKKwl3aGlsZSAoIShsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQpICZhbXA7IDB4
ODApKSB7CisJCWNwdV9yZWxheCgpOworCQljb3VudCsrOworCQlpZiAoY291bnQgJmd0Oz0gMTAw
MCkgeworCQkJRFJNX0VSUk9SKCJsb29uZ3Nvbi03QSBQTEwgbG9jayBmYWlsZWRcbiIpOworCQkJ
YnJlYWs7CisJCX0KKwl9CisKKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAw
eDQpOworCXZhbCB8PSAoMVVMICZsdDsmbHQ7IDgpOworCWxzN2FfaW9fd3JlZyhsZGV2LCBwbGxf
YmFzZSArIDB4NCwgdmFsKTsKK30KKworc3RhdGljIHZvaWQgbG9vbmdzb25fY3J0Y19tb2RlX3Nl
dF9ub2ZiKHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKK3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
ID0gY3J0Yy0mZ3Q7ZGV2OworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYgPSBkZXYtJmd0
O2Rldl9wcml2YXRlOworCXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YyA9IHRvX2xvb25nc29u
X2NydGMoY3J0Yyk7CisJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUgPSAmYW1wO2NydGMt
Jmd0O3N0YXRlLSZndDthZGp1c3RlZF9tb2RlOworCWNvbnN0IHN0cnVjdCBkcm1fZm9ybWF0X2lu
Zm8gKmZvcm1hdDsKKwlzdHJ1Y3QgcGl4X3BsbCBwbGxfY2ZnOworCXUzMiBociwgaHNzLCBoc2Us
IGhmbDsKKwl1MzIgdnIsIHZzcywgdnNlLCB2Zmw7CisJdTMyIHBpeF9mcmVxOworCXUzMiByZWdf
b2Zmc2V0OworCisJaHIgPSBtb2RlLSZndDtoZGlzcGxheTsKKwloc3MgPSBtb2RlLSZndDtoc3lu
Y19zdGFydDsKKwloc2UgPSBtb2RlLSZndDtoc3luY19lbmQ7CisJaGZsID0gbW9kZS0mZ3Q7aHRv
dGFsOworCisJdnIgPSBtb2RlLSZndDt2ZGlzcGxheTsKKwl2c3MgPSBtb2RlLSZndDt2c3luY19z
dGFydDsKKwl2c2UgPSBtb2RlLSZndDt2c3luY19lbmQ7CisJdmZsID0gbW9kZS0mZ3Q7dnRvdGFs
OworCisJcGl4X2ZyZXEgPSBtb2RlLSZndDtjbG9jazsKKwlyZWdfb2Zmc2V0ID0gbGNydGMtJmd0
O3JlZ19vZmZzZXQ7CisJZm9ybWF0ID0gY3J0Yy0mZ3Q7cHJpbWFyeS0mZ3Q7c3RhdGUtJmd0O2Zi
LSZndDtmb3JtYXQ7CisKKwlsczdhX21tX3dyZWcobGRldiwgRkJfRElUQ0ZHX1JFRyArIHJlZ19v
ZmZzZXQsIDApOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9ESVRUQUJfTE9fUkVHICsgcmVnX29m
ZnNldCwgMCk7CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0RJVFRBQl9ISV9SRUcgKyByZWdfb2Zm
c2V0LCAwKTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfUEFOQ0ZHX1JFRyArIHJlZ19vZmZzZXQs
IEZCX1BBTkNGR19ERUYpOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9QQU5USU1fUkVHICsgcmVn
X29mZnNldCwgMCk7CisKKwlsczdhX21tX3dyZWcobGRldiwgRkJfSERJU1BMQVlfUkVHICsgcmVn
X29mZnNldCwgKGhmbCAmbHQ7Jmx0OyAxNikgfCBocik7CisJbHM3YV9tbV93cmVnKGxkZXYsIEZC
X0hTWU5DX1JFRyArIHJlZ19vZmZzZXQsCisJCSAgICAgRkJfSFNZTkNfUFVMU0UgfCAoaHNlICZs
dDsmbHQ7IDE2KSB8IGhzcyk7CisKKwlsczdhX21tX3dyZWcobGRldiwgRkJfVkRJU1BMQVlfUkVH
ICsgcmVnX29mZnNldCwgKHZmbCAmbHQ7Jmx0OyAxNikgfCB2cik7CisJbHM3YV9tbV93cmVnKGxk
ZXYsIEZCX1ZTWU5DX1JFRyArIHJlZ19vZmZzZXQsCisJCSAgICAgRkJfVlNZTkNfUFVMU0UgfCAo
dnNlICZsdDsmbHQ7IDE2KSB8IHZzcyk7CisKKwlzd2l0Y2ggKGZvcm1hdC0mZ3Q7Zm9ybWF0KSB7
CisJY2FzZSBEUk1fRk9STUFUX1JHQjU2NToKKwkJbGNydGMtJmd0O2NmZ19yZWcgfD0gMHgzOwor
CQlicmVhazsKKwljYXNlIERSTV9GT1JNQVRfUkdCODg4OgorCWNhc2UgRFJNX0ZPUk1BVF9YUkdC
ODg4ODoKKwljYXNlIERSTV9GT1JNQVRfQVJHQjg4ODg6CisJZGVmYXVsdDoKKwkJbGNydGMtJmd0
O2NmZ19yZWcgfD0gMHg0OworCQlicmVhazsKKwl9CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0NG
R19SRUcgKyByZWdfb2Zmc2V0LCBsY3J0Yy0mZ3Q7Y2ZnX3JlZyk7CisKKwljYWxfZnJlcShwaXhf
ZnJlcSwgJmFtcDtwbGxfY2ZnKTsKKwljb25maWdfcGxsKGxkZXYsIExTN0FfUElYX1BMTCArIHJl
Z19vZmZzZXQsICZhbXA7cGxsX2NmZyk7Cit9CisKK3N0YXRpYyB2b2lkIGxvb25nc29uX2NydGNf
YXRvbWljX2VuYWJsZShzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCisJCQkJCXN0cnVjdCBkcm1fYXRv
bWljX3N0YXRlICpvbGRfc3RhdGUpCit7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMt
Jmd0O2RldjsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2LSZndDtkZXZfcHJp
dmF0ZTsKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGMgPSB0b19sb29uZ3Nvbl9jcnRjKGNy
dGMpOworCXUzMiByZWdfb2Zmc2V0ID0gbGNydGMtJmd0O3JlZ19vZmZzZXQ7CisKKwlsY3J0Yy0m
Z3Q7Y2ZnX3JlZyB8PSBDRkdfRU5BQkxFOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdfUkVH
ICsgcmVnX29mZnNldCwgbGNydGMtJmd0O2NmZ19yZWcpOworfQorCitzdGF0aWMgdm9pZCBsb29u
Z3Nvbl9jcnRjX2F0b21pY19kaXNhYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKKwkJCQkJIHN0
cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpCit7CisJc3RydWN0IGRybV9kZXZpY2Ug
KmRldiA9IGNydGMtJmd0O2RldjsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2
LSZndDtkZXZfcHJpdmF0ZTsKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGMgPSB0b19sb29u
Z3Nvbl9jcnRjKGNydGMpOworCXUzMiByZWdfb2Zmc2V0ID0gbGNydGMtJmd0O3JlZ19vZmZzZXQ7
CisKKwlsY3J0Yy0mZ3Q7Y2ZnX3JlZyAmYW1wOz0gfkNGR19FTkFCTEU7CisJbHM3YV9tbV93cmVn
KGxkZXYsIEZCX0NGR19SRUcgKyByZWdfb2Zmc2V0LCBsY3J0Yy0mZ3Q7Y2ZnX3JlZyk7Cit9CisK
K3N0YXRpYyBlbnVtIGRybV9tb2RlX3N0YXR1cyBsb29uZ3Nvbl9tb2RlX3ZhbGlkKHN0cnVjdCBk
cm1fY3J0YyAqY3J0YywKKwkJCQkJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2Rl
KQoreworCWlmIChtb2RlLSZndDtoZGlzcGxheSAmZ3Q7IDE5MjApCisJCXJldHVybiBNT0RFX0JB
RDsKKwlpZiAobW9kZS0mZ3Q7dmRpc3BsYXkgJmd0OyAxMDgwKQorCQlyZXR1cm4gTU9ERV9CQUQ7
CisJaWYgKG1vZGUtJmd0O2hkaXNwbGF5ICUgNjQpCisJCXJldHVybiBNT0RFX0JBRDsKKwlpZiAo
bW9kZS0mZ3Q7Y2xvY2sgJmd0OyAxNzMwMDApCisJCXJldHVybiBNT0RFX0NMT0NLX0hJR0g7CisK
KwlyZXR1cm4gTU9ERV9PSzsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY3J0Y19oZWxw
ZXJfZnVuY3MgbG9vbmdzb25fY3J0Y19oZWxwZXJfZnVuY3MgPSB7CisJLm1vZGVfdmFsaWQgPSBs
b29uZ3Nvbl9tb2RlX3ZhbGlkLAorCS5hdG9taWNfZW5hYmxlID0gbG9vbmdzb25fY3J0Y19hdG9t
aWNfZW5hYmxlLAorCS5hdG9taWNfZGlzYWJsZSA9IGxvb25nc29uX2NydGNfYXRvbWljX2Rpc2Fi
bGUsCisJLm1vZGVfc2V0X25vZmIgPSBsb29uZ3Nvbl9jcnRjX21vZGVfc2V0X25vZmIsCit9Owor
CitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jcnRjX2Z1bmNzIGxvb25nc29uX2NydGNfZnVuY3Mg
PSB7CisJLnNldF9jb25maWcgPSBkcm1fYXRvbWljX2hlbHBlcl9zZXRfY29uZmlnLAorCS5wYWdl
X2ZsaXAgPSBkcm1fYXRvbWljX2hlbHBlcl9wYWdlX2ZsaXAsCisJLnJlc2V0ID0gZHJtX2F0b21p
Y19oZWxwZXJfY3J0Y19yZXNldCwKKwkuZGVzdHJveSA9IGRybV9jcnRjX2NsZWFudXAsCisJLmF0
b21pY19kdXBsaWNhdGVfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jcnRjX2R1cGxpY2F0ZV9z
dGF0ZSwKKwkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jcnRjX2Rl
c3Ryb3lfc3RhdGUsCit9OworCitpbnQgbG9vbmdzb25fY3J0Y19pbml0KHN0cnVjdCBsb29uZ3Nv
bl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCkKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNy
dGM7CisJdTMyIHJldDsKKworCWxjcnRjID0ga3phbGxvYyhzaXplb2Yoc3RydWN0IGxvb25nc29u
X2NydGMpLCBHRlBfS0VSTkVMKTsKKwlpZiAobGNydGMgPT0gTlVMTCkKKwkJcmV0dXJuIC0xOwor
CisJbGNydGMtJmd0O2xkZXYgPSBsZGV2OworCWxjcnRjLSZndDtyZWdfb2Zmc2V0ID0gaW5kZXgg
KiBSRUdfT0ZGU0VUOworCWxjcnRjLSZndDtjZmdfcmVnID0gQ0ZHX1JFU0VUOworCWxjcnRjLSZn
dDtjcnRjX2lkID0gaW5kZXg7CisKKwlyZXQgPSBsb29uZ3Nvbl9wbGFuZV9pbml0KGxjcnRjKTsK
KwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJcmV0ID0gZHJtX2NydGNfaW5pdF93aXRoX3Bs
YW5lcyhsZGV2LSZndDtkZXYsICZhbXA7bGNydGMtJmd0O2Jhc2UsIGxjcnRjLSZndDtwbGFuZSwK
KwkJCQkJTlVMTCwgJmFtcDtsb29uZ3Nvbl9jcnRjX2Z1bmNzLCBOVUxMKTsKKwlpZiAocmV0KSB7
CisJCURSTV9FUlJPUigiZmFpbGVkIHRvIGluaXQgY3J0YyAlZFxuIiwgaW5kZXgpOworCQlkcm1f
cGxhbmVfY2xlYW51cChsY3J0Yy0mZ3Q7cGxhbmUpOworCQlyZXR1cm4gcmV0OworCX0KKworCWRy
bV9jcnRjX2hlbHBlcl9hZGQoJmFtcDtsY3J0Yy0mZ3Q7YmFzZSwgJmFtcDtsb29uZ3Nvbl9jcnRj
X2hlbHBlcl9mdW5jcyk7CisKKwlsZGV2LSZndDttb2RlX2luZm9baW5kZXhdLmNydGMgPSBsY3J0
YzsKKworCXJldHVybiAwOworfQorCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdz
b24vbG9vbmdzb25fZGV2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25f
ZGV2aWNlLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5lNTNiZDhk
ZWQ4OWIKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdz
b25fZGV2aWNlLmMKQEAgLTAsMCArMSw0NyBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6
IEdQTC0yLjAtb3ItbGF0ZXIKKworI2luY2x1ZGUgImxvb25nc29uX2Rydi5oIgorCit1MzIgbG9v
bmdzb25fZ3B1X29mZnNldChzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSkKK3sKKwlzdHJ1
Y3QgZHJtX2dlbV92cmFtX29iamVjdCAqZ2JvOworCXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0
YzsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2OworCXUzMiBncHVfYWRkcjsKKworCWxj
cnRjID0gdG9fbG9vbmdzb25fY3J0YyhzdGF0ZS0mZ3Q7Y3J0Yyk7CisJbGRldiA9IGxjcnRjLSZn
dDtsZGV2OworCisJZ2JvID0gZHJtX2dlbV92cmFtX29mX2dlbShzdGF0ZS0mZ3Q7ZmItJmd0O29i
alswXSk7CisJZ3B1X2FkZHIgPSBsZGV2LSZndDt2cmFtX3N0YXJ0ICsgZHJtX2dlbV92cmFtX29m
ZnNldChnYm8pOworCisJcmV0dXJuIGdwdV9hZGRyOworfQorCit1MzIgbHM3YV9pb19ycmVnKHN0
cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIHUzMiBvZmZzZXQpCit7CisJdTMyIHZhbDsKKwor
CXZhbCA9IHJlYWRsKGxkZXYtJmd0O2lvICsgb2Zmc2V0KTsKKworCXJldHVybiB2YWw7Cit9CisK
K3ZvaWQgbHM3YV9pb193cmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIHUzMiBvZmZz
ZXQsIHUzMiB2YWwpCit7CisJd3JpdGVsKHZhbCwgbGRldi0mZ3Q7aW8gKyBvZmZzZXQpOworfQor
Cit1MzIgbHM3YV9tbV9ycmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIHUzMiBvZmZz
ZXQpCit7CisJdTMyIHZhbDsKKworCXZhbCA9IHJlYWRsKGxkZXYtJmd0O21taW8gKyBvZmZzZXQp
OworCisJcmV0dXJuIHZhbDsKK30KKwordm9pZCBsczdhX21tX3dyZWcoc3RydWN0IGxvb25nc29u
X2RldmljZSAqbGRldiwgdTMyIG9mZnNldCwgdTMyIHZhbCkKK3sKKwl3cml0ZWwodmFsLCBsZGV2
LSZndDttbWlvICsgb2Zmc2V0KTsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29u
Z3Nvbi9sb29uZ3Nvbl9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9k
cnYuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmU0MDUxOTlhM2Rm
NgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9k
cnYuYwpAQCAtMCwwICsxLDI3MCBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0y
LjAtb3ItbGF0ZXIKKy8qCisgKiBMb29uZ3NvbiBMUzdBMTAwMCBicmlkZ2UgY2hpcHNldCBkcm0g
ZHJpdmVyCisgKi8KKworI2luY2x1ZGUgJmx0O2xpbnV4L2NvbnNvbGUuaCZndDsKKyNpbmNsdWRl
ICZsdDtsaW51eC9wY2kuaCZndDsKKyNpbmNsdWRlICZsdDtsaW51eC9tb2R1bGUuaCZndDsKKyNp
bmNsdWRlICZsdDtsaW51eC9rZXJuZWwuaCZndDsKKyNpbmNsdWRlICJsb29uZ3Nvbl9kcnYuaCIK
KworLyogSW50ZXJmYWNlIGhpc3Rvcnk6CisgKiAwLjEgLSBvcmlnaW5hbC4KKyAqLworI2RlZmlu
ZSBEUklWRVJfTUFKT1IgMAorI2RlZmluZSBEUklWRVJfTUlOT1IgMQorCitzdGF0aWMgY29uc3Qg
c3RydWN0IGRybV9tb2RlX2NvbmZpZ19mdW5jcyBsb29uZ3Nvbl9tb2RlX2Z1bmNzID0geworCS5m
Yl9jcmVhdGUgPSBkcm1fZ2VtX2ZiX2NyZWF0ZSwKKwkuYXRvbWljX2NoZWNrID0gZHJtX2F0b21p
Y19oZWxwZXJfY2hlY2ssCisJLmF0b21pY19jb21taXQgPSBkcm1fYXRvbWljX2hlbHBlcl9jb21t
aXQsCisJLm91dHB1dF9wb2xsX2NoYW5nZWQgPSBkcm1fZmJfaGVscGVyX291dHB1dF9wb2xsX2No
YW5nZWQsCisJLm1vZGVfdmFsaWQgPSBkcm1fdnJhbV9oZWxwZXJfbW9kZV92YWxpZAorfTsKKwor
c3RhdGljIGludCBsb29uZ3Nvbl9kZXZpY2VfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1
aW50MzJfdCBmbGFncykKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2LSZn
dDtkZXZfcHJpdmF0ZTsKKwlzdHJ1Y3QgcGNpX2RldiAqZ3B1X3BkZXY7CisJcmVzb3VyY2Vfc2l6
ZV90IGFwZXJfYmFzZTsKKwlyZXNvdXJjZV9zaXplX3QgYXBlcl9zaXplOworCXJlc291cmNlX3Np
emVfdCBtbWlvX2Jhc2U7CisJcmVzb3VyY2Vfc2l6ZV90IG1taW9fc2l6ZTsKKworCS8qIEdQVSBN
RU0gKi8KKwkvKiBXZSBuZWVkIGdldCA3QS1ncHUgcGNpIGRldmljZSBpbmZvcm1hdGlvbiBmb3Ig
bGRldi0mZ3Q7Z3B1X3BkZXYgKi8KKwkvKiBkZXYtJmd0O3BkZXYgc2F2ZSA3QS1kYyBwY2kgZGV2
aWNlIGluZm9ybWF0aW9uICovCisJZ3B1X3BkZXYgPSBwY2lfZ2V0X2RldmljZShQQ0lfVkVORE9S
X0lEX0xPT05HU09OLAorCQkJCSAgUENJX0RFVklDRV9JRF9MT09OR1NPTl9HUFUsIE5VTEwpOwor
CWlmIChJU19FUlIoZ3B1X3BkZXYpKQorCQlyZXR1cm4gUFRSX0VSUihncHVfcGRldik7CisKKwls
ZGV2LSZndDtncHVfcGRldiA9IGdwdV9wZGV2OworCWFwZXJfYmFzZSA9IHBjaV9yZXNvdXJjZV9z
dGFydChncHVfcGRldiwgMik7CisJYXBlcl9zaXplID0gcGNpX3Jlc291cmNlX2xlbihncHVfcGRl
diwgMik7CisJbGRldi0mZ3Q7dnJhbV9zdGFydCA9ICh1MzIpYXBlcl9iYXNlOworCWxkZXYtJmd0
O3ZyYW1fc2l6ZSA9ICh1MzIpYXBlcl9zaXplOworCisJaWYgKCFkZXZtX3JlcXVlc3RfbWVtX3Jl
Z2lvbihsZGV2LSZndDtkZXYtJmd0O2RldiwgbGRldi0mZ3Q7dnJhbV9zdGFydCwKKwkJCQkgICAg
IGxkZXYtJmd0O3ZyYW1fc2l6ZSwgImxvb25nc29uX3ZyYW0iKSkgeworCQlEUk1fRVJST1IoIkNh
bid0IHJlc2VydmUgVlJBTVxuIik7CisJCXJldHVybiAtRU5YSU87CisJfQorCisJLyogREMgTUVN
ICovCisJbW1pb19iYXNlID0gcGNpX3Jlc291cmNlX3N0YXJ0KGxkZXYtJmd0O2Rldi0mZ3Q7cGRl
diwgMCk7CisJbW1pb19zaXplID0gcGNpX3Jlc291cmNlX2xlbihsZGV2LSZndDtkZXYtJmd0O3Bk
ZXYsIDApOworCWxkZXYtJmd0O21taW8gPSBkZXZtX2lvcmVtYXAoZGV2LSZndDtkZXYsIG1taW9f
YmFzZSwgbW1pb19zaXplKTsKKwlpZiAoIWxkZXYtJmd0O21taW8pIHsKKwkJZHJtX2VycihkZXYs
ICJDYW5ub3QgbWFwIG1taW8gcmVnaW9uXG4iKTsKKwkJcmV0dXJuIC1FTk9NRU07CisJfQorCisJ
aWYgKCFkZXZtX3JlcXVlc3RfbWVtX3JlZ2lvbihsZGV2LSZndDtkZXYtJmd0O2RldiwgbW1pb19i
YXNlLAorCQkJCSAgICAgbW1pb19zaXplLCAibG9vbmdzb25fbW1pbyIpKSB7CisJCURSTV9FUlJP
UigiQ2FuJ3QgcmVzZXJ2ZSBtbWlvIHJlZ2lzdGVyc1xuIik7CisJCXJldHVybiAtRU5PTUVNOwor
CX0KKworCS8qIERDIElPICovCisJbGRldi0mZ3Q7aW8gPSBpb3JlbWFwKExTN0FfQ0hJUENGR19S
RUdfQkFTRSwgMHhmKTsKKwlpZiAobGRldi0mZ3Q7aW8gPT0gTlVMTCkKKwkJcmV0dXJuIC1FTk9N
RU07CisKKwlEUk1fSU5GTygiREMgbW1pbyBiYXNlIDB4JWxseCBzaXplIDB4JWxseCBpbyAweCVs
bHhcbiIsCisJCSBtbWlvX2Jhc2UsIG1taW9fc2l6ZSwgKih1NjQgKilsZGV2LSZndDtpbyk7CisJ
RFJNX0lORk8oIkdQVSB2cmFtIHN0YXJ0ID0gMHgleCBzaXplID0gMHgleFxuIiwKKwkJIGxkZXYt
Jmd0O3ZyYW1fc3RhcnQsIGxkZXYtJmd0O3ZyYW1fc2l6ZSk7CisKKwlyZXR1cm4gMDsKK30KKwor
aW50IGxvb25nc29uX21vZGVzZXRfaW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2KQor
eworCXN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcjsKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAq
Y29ubmVjdG9yOworCWludCBpOworCXUzMiByZXQ7CisKKwlsZGV2LSZndDtkZXYtJmd0O21vZGVf
Y29uZmlnLmFsbG93X2ZiX21vZGlmaWVycyA9IHRydWU7CisKKwlmb3IgKGkgPSAwOyBpICZsdDsg
MjsgaSsrKSB7CisJCXJldCA9IGxvb25nc29uX2NydGNfaW5pdChsZGV2LCBpKTsKKwkJaWYgKHJl
dCkgeworCQkJRFJNX1dBUk4oImxvb25nc29uIGNydGMlZCBpbml0IGZhaWxlZFxuIiwgaSk7CisJ
CQljb250aW51ZTsKKwkJfQorCisJCXJldCA9IGxvb25nc29uX2VuY29kZXJfaW5pdChsZGV2LCBp
KTsKKwkJaWYgKHJldCkgeworCQkJRFJNX0VSUk9SKCJsb29uZ3Nvbl9lbmNvZGVyX2luaXQgZmFp
bGVkXG4iKTsKKwkJCXJldHVybiAtMTsKKwkJfQorCisJCXJldCA9IGxvb25nc29uX2Nvbm5lY3Rv
cl9pbml0KGxkZXYsIGkpOworCQlpZiAocmV0KSB7CisJCQlEUk1fRVJST1IoImxvb25nc29uX2Nv
bm5lY3Rvcl9pbml0IGZhaWxlZFxuIik7CisJCQlyZXR1cm4gLTE7CisJCX0KKworCQllbmNvZGVy
ID0gJmFtcDtsZGV2LSZndDttb2RlX2luZm9baV0uZW5jb2Rlci0mZ3Q7YmFzZTsKKwkJY29ubmVj
dG9yID0gJmFtcDtsZGV2LSZndDttb2RlX2luZm9baV0uY29ubmVjdG9yLSZndDtiYXNlOworCQlk
cm1fY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVyKGNvbm5lY3RvciwgZW5jb2Rlcik7CisJCWxkZXYt
Jmd0O251bV9jcnRjKys7CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbG9vbmdz
b25fZHJtX2xvYWQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdW5zaWduZWQgbG9uZyBmbGFncykK
K3sKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2OworCWludCByZXQ7CisKKwlsZGV2ID0g
ZGV2bV9remFsbG9jKGRldi0mZ3Q7ZGV2LCBzaXplb2YoKmxkZXYpLCBHRlBfS0VSTkVMKTsKKwlp
ZiAoIWxkZXYpCisJCXJldHVybiAtRU5PTUVNOworCisJZGV2LSZndDtkZXZfcHJpdmF0ZSA9IGxk
ZXY7CisJbGRldi0mZ3Q7ZGV2ID0gZGV2OworCisJcmV0ID0gbG9vbmdzb25fZGV2aWNlX2luaXQo
ZGV2LCBmbGFncyk7CisJaWYgKHJldCkKKwkJZ290byBlcnI7CisKKwlyZXQgPSBkcm1tX3ZyYW1f
aGVscGVyX2luaXQoZGV2LCBsZGV2LSZndDt2cmFtX3N0YXJ0LCBsZGV2LSZndDt2cmFtX3NpemUp
OworCWlmIChyZXQpCisJCWdvdG8gZXJyOworCisJZHJtX21vZGVfY29uZmlnX2luaXQoZGV2KTsK
KwlkZXYtJmd0O21vZGVfY29uZmlnLmZ1bmNzID0gKHZvaWQgKikmYW1wO2xvb25nc29uX21vZGVf
ZnVuY3M7CisJZGV2LSZndDttb2RlX2NvbmZpZy5taW5fd2lkdGggPSAxOworCWRldi0mZ3Q7bW9k
ZV9jb25maWcubWluX2hlaWdodCA9IDE7CisJZGV2LSZndDttb2RlX2NvbmZpZy5tYXhfd2lkdGgg
PSA0MDk2OworCWRldi0mZ3Q7bW9kZV9jb25maWcubWF4X2hlaWdodCA9IDQwOTY7CisJZGV2LSZn
dDttb2RlX2NvbmZpZy5wcmVmZXJyZWRfZGVwdGggPSAzMjsKKwlkZXYtJmd0O21vZGVfY29uZmln
LnByZWZlcl9zaGFkb3cgPSAxOworCWRldi0mZ3Q7bW9kZV9jb25maWcuZmJfYmFzZSA9IGxkZXYt
Jmd0O3ZyYW1fc3RhcnQ7CisKKwlwY2lfc2V0X2RydmRhdGEoZGV2LSZndDtwZGV2LCBkZXYpOwor
CisJcmV0ID0gbG9vbmdzb25fbW9kZXNldF9pbml0KGxkZXYpOworCWlmIChyZXQpCisJCWRldl9l
cnIoZGV2LSZndDtkZXYsICJGYXRhbCBlcnJvciBkdXJpbmcgbW9kZXNldCBpbml0OiAlZFxuIiwg
cmV0KTsKKworCWRybV9rbXNfaGVscGVyX3BvbGxfaW5pdChkZXYpOworCWRybV9tb2RlX2NvbmZp
Z19yZXNldChkZXYpOworCisJcmV0dXJuIDA7CisKK2VycjoKKwlkcm1fZXJyKGRldiwgImZhaWxl
ZCB0byBpbml0aWFsaXplIGRybSBkcml2ZXI6ICVkXG4iLCByZXQpOworCXJldHVybiByZXQ7Cit9
CisKK3N0YXRpYyB2b2lkIGxvb25nc29uX2RybV91bmxvYWQoc3RydWN0IGRybV9kZXZpY2UgKmRl
dikKK3sKKwlkcm1fdnJhbV9oZWxwZXJfcmVsZWFzZV9tbShkZXYpOworCWRybV9tb2RlX2NvbmZp
Z19jbGVhbnVwKGRldik7CisJZGV2LSZndDtkZXZfcHJpdmF0ZSA9IE5VTEw7CisJZGV2X3NldF9k
cnZkYXRhKGRldi0mZ3Q7ZGV2LCBOVUxMKTsKK30KKworREVGSU5FX0RSTV9HRU1fRk9QUyhmb3Bz
KTsKKworc3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIGxvb25nc29uX2RybV9kcml2ZXIgPSB7CisJ
LmRyaXZlcl9mZWF0dXJlcyA9IERSSVZFUl9NT0RFU0VUIHwgRFJJVkVSX0dFTSB8IERSSVZFUl9B
VE9NSUMsCisJLmZvcHMgPSAmYW1wO2ZvcHMsCisJRFJNX0dFTV9WUkFNX0RSSVZFUiwKKworCS5u
YW1lID0gRFJJVkVSX05BTUUsCisJLmRlc2MgPSBEUklWRVJfREVTQywKKwkuZGF0ZSA9IERSSVZF
Ul9EQVRFLAorCS5tYWpvciA9IERSSVZFUl9NQUpPUiwKKwkubWlub3IgPSBEUklWRVJfTUlOT1Is
Cit9OworCitzdGF0aWMgaW50IGxvb25nc29uX3BjaV9wcm9iZShzdHJ1Y3QgcGNpX2RldiAqcGRl
diwKKwkJCSAgICAgIGNvbnN0IHN0cnVjdCBwY2lfZGV2aWNlX2lkICplbnQpCit7CisJaW50IHJl
dDsKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2OworCisJRFJNX0lORk8oIlN0YXJ0IGxvb25nc29u
IGRybSBwcm9iZVxuIik7CisJZGV2ID0gZHJtX2Rldl9hbGxvYygmYW1wO2xvb25nc29uX2RybV9k
cml2ZXIsICZhbXA7cGRldi0mZ3Q7ZGV2KTsKKwlpZiAoSVNfRVJSKGRldikpIHsKKwkJRFJNX0VS
Uk9SKCJmYWlsZWQgdG8gYWxsb2NhdGUgZHJtX2RldmljZVxuIik7CisJCXJldHVybiBQVFJfRVJS
KGRldik7CisJfQorCisJZGV2LSZndDtwZGV2ID0gcGRldjsKKwlwY2lfc2V0X2RydmRhdGEocGRl
diwgZGV2KTsKKworCXJldCA9IHBjaV9lbmFibGVfZGV2aWNlKHBkZXYpOworCWlmIChyZXQpIHsK
KwkJZHJtX2VycihkZXYsICJmYWlsZWQgdG8gZW5hYmxlIHBjaSBkZXZpY2U6ICVkXG4iLCByZXQp
OworCQlnb3RvIGVycl9mcmVlOworCX0KKworCXJldCA9IGxvb25nc29uX2RybV9sb2FkKGRldiwg
MHgwKTsKKwlpZiAocmV0KSB7CisJCWRybV9lcnIoZGV2LCAiZmFpbGVkIHRvIGxvYWQgbG9vbmdz
b246ICVkXG4iLCByZXQpOworCQlnb3RvIGVycl9wZGV2OworCX0KKworCXJldCA9IGRybV9kZXZf
cmVnaXN0ZXIoZGV2LCAwKTsKKwlpZiAocmV0KSB7CisJCWRybV9lcnIoZGV2LCAiZmFpbGVkIHRv
IHJlZ2lzdGVyIGRydiBmb3IgdXNlcnNwYWNlIGFjY2VzczogJWRcbiIsCisJCQlyZXQpOworCQln
b3RvIGVycl9wZGV2OworCX0KKworCWRybV9mYmRldl9nZW5lcmljX3NldHVwKGRldiwgZGV2LSZn
dDttb2RlX2NvbmZpZy5wcmVmZXJyZWRfZGVwdGgpOworCisJcmV0dXJuIDA7CisKK2Vycl9wZGV2
OgorCXBjaV9kaXNhYmxlX2RldmljZShwZGV2KTsKK2Vycl9mcmVlOgorCWRybV9kZXZfcHV0KGRl
dik7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZvaWQgbG9vbmdzb25fcGNpX3JlbW92ZShz
dHJ1Y3QgcGNpX2RldiAqcGRldikKK3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gcGNpX2dl
dF9kcnZkYXRhKHBkZXYpOworCisJZHJtX2Rldl91bnJlZ2lzdGVyKGRldik7CisJbG9vbmdzb25f
ZHJtX3VubG9hZChkZXYpOworCWRybV9kZXZfcHV0KGRldik7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qg
cGNpX2RldmljZV9pZCBsb29uZ3Nvbl9wY2lfZGV2aWNlc1tdID0geworCXsgUENJX0RFVklDRShQ
Q0lfVkVORE9SX0lEX0xPT05HU09OLCBQQ0lfREVWSUNFX0lEX0xPT05HU09OX0RDKSB9LAorCXsw
LH0KK307CisKK3N0YXRpYyBzdHJ1Y3QgcGNpX2RyaXZlciBsb29uZ3Nvbl9kcm1fcGNpX2RyaXZl
ciA9IHsKKwkubmFtZSA9IERSSVZFUl9OQU1FLAorCS5pZF90YWJsZSA9IGxvb25nc29uX3BjaV9k
ZXZpY2VzLAorCS5wcm9iZSA9IGxvb25nc29uX3BjaV9wcm9iZSwKKwkucmVtb3ZlID0gbG9vbmdz
b25fcGNpX3JlbW92ZSwKK307CisKK3N0YXRpYyBpbnQgX19pbml0IGxvb25nc29uX2RybV9pbml0
KHZvaWQpCit7CisJcmV0dXJuIHBjaV9yZWdpc3Rlcl9kcml2ZXIoJmFtcDtsb29uZ3Nvbl9kcm1f
cGNpX2RyaXZlcik7Cit9CisKK3N0YXRpYyB2b2lkIF9fZXhpdCBsb29uZ3Nvbl9kcm1fZXhpdCh2
b2lkKQoreworCXBjaV91bnJlZ2lzdGVyX2RyaXZlcigmYW1wO2xvb25nc29uX2RybV9wY2lfZHJp
dmVyKTsKK30KKworbW9kdWxlX2luaXQobG9vbmdzb25fZHJtX2luaXQpOworbW9kdWxlX2V4aXQo
bG9vbmdzb25fZHJtX2V4aXQpOworCitNT0RVTEVfQVVUSE9SKERSSVZFUl9BVVRIT1IpOworTU9E
VUxFX0RFU0NSSVBUSU9OKERSSVZFUl9ERVNDKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaCBiL2Ry
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaApuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwMDAwMDAuLjQ5OGQxYjA4MmExOQotLS0gL2Rldi9udWxsCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaApAQCAtMCwwICsxLDEzOSBAQAor
LyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb25seSAqLworCisjaWZuZGVmIF9f
TE9PTkdTT05fRFJWX0hfXworI2RlZmluZSBfX0xPT05HU09OX0RSVl9IX18KKworI2luY2x1ZGUg
Jmx0O2RybS9kcm1fZHJ2LmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9nZW0uaCZndDsKKyNp
bmNsdWRlICZsdDtkcm0vZHJtX2ZiX2hlbHBlci5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9kcm1f
Zm91cmNjLmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9wcm9iZV9oZWxwZXIuaCZndDsKKyNp
bmNsdWRlICZsdDtkcm0vZHJtX2F0b21pYy5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9kcm1fYXRv
bWljX2hlbHBlci5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9kcm1fZ2VtX2ZyYW1lYnVmZmVyX2hl
bHBlci5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmgmZ3Q7Cisj
aW5jbHVkZSAmbHQ7ZHJtL2RybV9wbGFuZS5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9kcm1fcGxh
bmVfaGVscGVyLmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9jcnRjLmgmZ3Q7CisjaW5jbHVk
ZSAmbHQ7ZHJtL2RybV9jcnRjX2hlbHBlci5oJmd0OworI2luY2x1ZGUgJmx0O2RybS9kcm1fY29u
bmVjdG9yLmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9lbmNvZGVyLmgmZ3Q7CisKKy8qIEdl
bmVyYWwgY3VzdG9taXphdGlvbjoKKyAqLworI2RlZmluZSBEUklWRVJfQVVUSE9SICJMb29uZ3Nv
biBncmFwaGljcyBkcml2ZXIgdGVhbSIKKyNkZWZpbmUgRFJJVkVSX05BTUUgImxvb25nc29uLWRy
bSIKKyNkZWZpbmUgRFJJVkVSX0RFU0MgIkxvb25nc29uIExTN0EgRFJNIGRyaXZlciIKKyNkZWZp
bmUgRFJJVkVSX0RBVEUgIjIwMjAwOTE1IgorCisjZGVmaW5lIHRvX2xvb25nc29uX2NydGMoeCkg
Y29udGFpbmVyX29mKHgsIHN0cnVjdCBsb29uZ3Nvbl9jcnRjLCBiYXNlKQorI2RlZmluZSB0b19s
b29uZ3Nvbl9lbmNvZGVyKHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3QgbG9vbmdzb25fZW5jb2Rl
ciwgYmFzZSkKKworI2RlZmluZSBMUzdBX0NISVBDRkdfUkVHX0JBU0UgKDB4MTAwMTAwMDApCisj
ZGVmaW5lIFBDSV9ERVZJQ0VfSURfTE9PTkdTT05fREMgMHg3YTA2CisjZGVmaW5lIFBDSV9ERVZJ
Q0VfSURfTE9PTkdTT05fR1BVIDB4N2ExNQorI2RlZmluZSBMUzdBX1BJWF9QTEwgKDB4MDRiMCkK
KyNkZWZpbmUgUkVHX09GRlNFVCAoMHgxMCkKKyNkZWZpbmUgRkJfQ0ZHX1JFRyAoMHgxMjQwKQor
I2RlZmluZSBGQl9BRERSMF9SRUcgKDB4MTI2MCkKKyNkZWZpbmUgRkJfQUREUjFfUkVHICgweDE1
ODApCisjZGVmaW5lIEZCX1NUUklfUkVHICgweDEyODApCisjZGVmaW5lIEZCX0RJVENGR19SRUcg
KDB4MTM2MCkKKyNkZWZpbmUgRkJfRElUVEFCX0xPX1JFRyAoMHgxMzgwKQorI2RlZmluZSBGQl9E
SVRUQUJfSElfUkVHICgweDEzYTApCisjZGVmaW5lIEZCX1BBTkNGR19SRUcgKDB4MTNjMCkKKyNk
ZWZpbmUgRkJfUEFOVElNX1JFRyAoMHgxM2UwKQorI2RlZmluZSBGQl9IRElTUExBWV9SRUcgKDB4
MTQwMCkKKyNkZWZpbmUgRkJfSFNZTkNfUkVHICgweDE0MjApCisjZGVmaW5lIEZCX1ZESVNQTEFZ
X1JFRyAoMHgxNDgwKQorI2RlZmluZSBGQl9WU1lOQ19SRUcgKDB4MTRhMCkKKworI2RlZmluZSBD
RkdfRk1UIEdFTk1BU0soMiwgMCkKKyNkZWZpbmUgQ0ZHX0ZCU1dJVENIIEJJVCg3KQorI2RlZmlu
ZSBDRkdfRU5BQkxFIEJJVCg4KQorI2RlZmluZSBDRkdfRkJOVU0gQklUKDExKQorI2RlZmluZSBD
RkdfR0FNTUFSIEJJVCgxMikKKyNkZWZpbmUgQ0ZHX1JFU0VUIEJJVCgyMCkKKworI2RlZmluZSBG
Ql9QQU5DRkdfREVGIDB4ODAwMDEzMTEKKyNkZWZpbmUgRkJfSFNZTkNfUFVMU0UgKDEgJmx0OyZs
dDsgMzApCisjZGVmaW5lIEZCX1ZTWU5DX1BVTFNFICgxICZsdDsmbHQ7IDMwKQorCisvKiBQSVgg
UExMICovCisjZGVmaW5lIExPT1BDX01JTiAyNAorI2RlZmluZSBMT09QQ19NQVggMTYxCisjZGVm
aW5lIEZSRV9SRUZfTUlOIDEyCisjZGVmaW5lIEZSRV9SRUZfTUFYIDMyCisjZGVmaW5lIERJVl9S
RUZfTUlOIDMKKyNkZWZpbmUgRElWX1JFRl9NQVggNQorI2RlZmluZSBQU1RfRElWX01BWCA2NAor
CitzdHJ1Y3QgcGl4X3BsbCB7CisJdTMyIGwyX2RpdjsKKwl1MzIgbDFfbG9vcGM7CisJdTMyIGwx
X2ZyZWZjOworfTsKKworc3RydWN0IGxvb25nc29uX2NydGMgeworCXN0cnVjdCBkcm1fY3J0YyBi
YXNlOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJdTMyIGNydGNfaWQ7CisJdTMy
IHJlZ19vZmZzZXQ7CisJdTMyIGNmZ19yZWc7CisJc3RydWN0IGRybV9wbGFuZSAqcGxhbmU7Cit9
OworCitzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciB7CisJc3RydWN0IGRybV9lbmNvZGVyIGJhc2U7
CisJc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldjsKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAq
bGNydGM7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fY29ubmVjdG9yIHsKKwlzdHJ1Y3QgZHJtX2Nv
bm5lY3RvciBiYXNlOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJdTE2IGlkOwor
CXUzMiB0eXBlOworfTsKKworc3RydWN0IGxvb25nc29uX21vZGVfaW5mbyB7CisJc3RydWN0IGxv
b25nc29uX2RldmljZSAqbGRldjsKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqY3J0YzsKKwlzdHJ1
Y3QgbG9vbmdzb25fZW5jb2RlciAqZW5jb2RlcjsKKwlzdHJ1Y3QgbG9vbmdzb25fY29ubmVjdG9y
ICpjb25uZWN0b3I7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlIHsKKwlzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2OworCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZTsKKworCXZvaWQg
X19pb21lbSAqbW1pbzsKKwl2b2lkIF9faW9tZW0gKmlvOworCXUzMiB2cmFtX3N0YXJ0OworCXUz
MiB2cmFtX3NpemU7CisKKwl1MzIgbnVtX2NydGM7CisJc3RydWN0IGxvb25nc29uX21vZGVfaW5m
byBtb2RlX2luZm9bMl07CisJc3RydWN0IHBjaV9kZXYgKmdwdV9wZGV2OyAvKiBMUzdBIGdwdSBk
ZXZpY2UgaW5mbyAqLworfTsKKworLyogY3J0YyAqLworaW50IGxvb25nc29uX2NydGNfaW5pdChz
dHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpOworCisvKiBjb25uZWN0b3Ig
Ki8KK2ludCBsb29uZ3Nvbl9jb25uZWN0b3JfaW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICps
ZGV2LCBpbnQgaW5kZXgpOworCisvKiBlbmNvZGVyICovCitpbnQgbG9vbmdzb25fZW5jb2Rlcl9p
bml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCk7CisKKy8qIHBsYW5l
ICovCitpbnQgbG9vbmdzb25fcGxhbmVfaW5pdChzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGMp
OworCisvKiBkZXZpY2UgKi8KK3UzMiBsb29uZ3Nvbl9ncHVfb2Zmc2V0KHN0cnVjdCBkcm1fcGxh
bmVfc3RhdGUgKnN0YXRlKTsKK3UzMiBsczdhX21tX3JyZWcoc3RydWN0IGxvb25nc29uX2Rldmlj
ZSAqbGRldiwgdTMyIG9mZnNldCk7Cit2b2lkIGxzN2FfbW1fd3JlZyhzdHJ1Y3QgbG9vbmdzb25f
ZGV2aWNlICpsZGV2LCB1MzIgb2Zmc2V0LCB1MzIgdmFsKTsKK3UzMiBsczdhX2lvX3JyZWcoc3Ry
dWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCk7Cit2b2lkIGxzN2FfaW9fd3Jl
ZyhzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCB1MzIgb2Zmc2V0LCB1MzIgdmFsKTsKKwor
I2VuZGlmIC8qIF9fTE9PTkdTT05fRFJWX0hfXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2xvb25nc29uL2xvb25nc29uX2VuY29kZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nv
bi9sb29uZ3Nvbl9lbmNvZGVyLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAw
MDAwLi4yMDAyY2VlMDAzMDMKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9v
bmdzb24vbG9vbmdzb25fZW5jb2Rlci5jCkBAIC0wLDAgKzEsMzcgQEAKKy8vIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCisKKyNpbmNsdWRlICJsb29uZ3Nvbl9kcnYu
aCIKKworc3RhdGljIHZvaWQgbG9vbmdzb25fZW5jb2Rlcl9kZXN0cm95KHN0cnVjdCBkcm1fZW5j
b2RlciAqZW5jb2RlcikKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciAqbGVuY29kZXIgPSB0
b19sb29uZ3Nvbl9lbmNvZGVyKGVuY29kZXIpOworCisJZHJtX2VuY29kZXJfY2xlYW51cChlbmNv
ZGVyKTsKKwlrZnJlZShsZW5jb2Rlcik7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Vu
Y29kZXJfZnVuY3MgbG9vbmdzb25fZW5jb2Rlcl9mdW5jcyA9IHsKKwkuZGVzdHJveSA9IGxvb25n
c29uX2VuY29kZXJfZGVzdHJveSwKK307CisKK2ludCBsb29uZ3Nvbl9lbmNvZGVyX2luaXQoc3Ry
dWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgaW50IGluZGV4KQoreworCXN0cnVjdCBkcm1fZW5j
b2RlciAqZW5jb2RlcjsKKwlzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciAqbGVuY29kZXI7CisKKwls
ZW5jb2RlciA9IGt6YWxsb2Moc2l6ZW9mKHN0cnVjdCBsb29uZ3Nvbl9lbmNvZGVyKSwgR0ZQX0tF
Uk5FTCk7CisJaWYgKCFsZW5jb2RlcikKKwkJcmV0dXJuIC0xOworCisJbGVuY29kZXItJmd0O2xj
cnRjID0gbGRldi0mZ3Q7bW9kZV9pbmZvW2luZGV4XS5jcnRjOworCWxlbmNvZGVyLSZndDtsZGV2
ID0gbGRldjsKKwllbmNvZGVyID0gJmFtcDtsZW5jb2Rlci0mZ3Q7YmFzZTsKKwllbmNvZGVyLSZn
dDtwb3NzaWJsZV9jcnRjcyA9IDEgJmx0OyZsdDsgaW5kZXg7CisKKwlkcm1fZW5jb2Rlcl9pbml0
KGxkZXYtJmd0O2RldiwgZW5jb2RlciwgJmFtcDtsb29uZ3Nvbl9lbmNvZGVyX2Z1bmNzLAorCQkJ
IERSTV9NT0RFX0VOQ09ERVJfREFDLCBOVUxMKTsKKworCWxkZXYtJmd0O21vZGVfaW5mb1tpbmRl
eF0uZW5jb2RlciA9IGxlbmNvZGVyOworCisJcmV0dXJuIDA7Cit9CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fcGxhbmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9s
b29uZ3Nvbi9sb29uZ3Nvbl9wbGFuZS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAwMDAwMC4uZjQ2OTRkY2JmMTIyCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2xvb25nc29uL2xvb25nc29uX3BsYW5lLmMKQEAgLTAsMCArMSwxMDIgQEAKKy8vIFNQRFgtTGlj
ZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCisKKyNpbmNsdWRlICJsb29uZ3Nvbl9k
cnYuaCIKKworc3RhdGljIHZvaWQgbG9vbmdzb25fcGxhbmVfYXRvbWljX3VwZGF0ZShzdHJ1Y3Qg
ZHJtX3BsYW5lICpwbGFuZSwKKwkJCQkJIHN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKm9sZF9zdGF0
ZSkKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGM7CisJc3RydWN0IGxvb25nc29uX2Rl
dmljZSAqbGRldjsKKwlzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSA9IHBsYW5lLSZndDtz
dGF0ZTsKKwl1MzIgZ3B1X2FkZHIgPSAwOworCXUzMiBmYl9hZGRyID0gMDsKKwl1MzIgcmVnX3Zh
bCA9IDA7CisJdTMyIHJlZ19vZmZzZXQ7CisJdTMyIHBpdGNoOworCXU4IGRlcHRoOworCXUzMiB4
LCB5OworCisJaWYgKCFzdGF0ZS0mZ3Q7Y3J0YyB8fCAhc3RhdGUtJmd0O2ZiKQorCQlyZXR1cm47
CisKKwlwaXRjaCA9IHN0YXRlLSZndDtmYi0mZ3Q7cGl0Y2hlc1swXTsKKwlsY3J0YyA9IHRvX2xv
b25nc29uX2NydGMoc3RhdGUtJmd0O2NydGMpOworCWxkZXYgPSBsY3J0Yy0mZ3Q7bGRldjsKKwly
ZWdfb2Zmc2V0ID0gbGNydGMtJmd0O3JlZ19vZmZzZXQ7CisJeCA9IHN0YXRlLSZndDtjcnRjLSZn
dDt4OworCXkgPSBzdGF0ZS0mZ3Q7Y3J0Yy0mZ3Q7eTsKKwlkZXB0aCA9IHN0YXRlLSZndDtmYi0m
Z3Q7Zm9ybWF0LSZndDtjcHBbMF0gJmx0OyZsdDsgMzsKKworCWdwdV9hZGRyID0gbG9vbmdzb25f
Z3B1X29mZnNldChzdGF0ZSk7CisJcmVnX3ZhbCA9IChwaXRjaCArIDI1NSkgJmFtcDsgfjI1NTsK
KwlsczdhX21tX3dyZWcobGRldiwgRkJfU1RSSV9SRUcgKyByZWdfb2Zmc2V0LCByZWdfdmFsKTsK
KworCXN3aXRjaCAoZGVwdGgpIHsKKwljYXNlIDEyIC4uLiAxNjoKKwkJZmJfYWRkciA9IGdwdV9h
ZGRyICsgeSAqIHBpdGNoICsgQUxJR04oeCwgNjQpICogMjsKKwkJYnJlYWs7CisJY2FzZSAyNCAu
Li4gMzI6CisJZGVmYXVsdDoKKwkJZmJfYWRkciA9IGdwdV9hZGRyICsgeSAqIHBpdGNoICsgQUxJ
R04oeCwgNjQpICogNDsKKwkJYnJlYWs7CisJfQorCisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0FE
RFIwX1JFRyArIHJlZ19vZmZzZXQsIGZiX2FkZHIpOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9B
RERSMV9SRUcgKyByZWdfb2Zmc2V0LCBmYl9hZGRyKTsKKwlyZWdfdmFsID0gbGNydGMtJmd0O2Nm
Z19yZWcgfCBDRkdfRU5BQkxFOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdfUkVHICsgcmVn
X29mZnNldCwgcmVnX3ZhbCk7Cit9CisKK3N0YXRpYyBjb25zdCB1aW50MzJfdCBsb29uZ3Nvbl9m
b3JtYXRzW10gPSB7CisJRFJNX0ZPUk1BVF9SR0I1NjUsCisJRFJNX0ZPUk1BVF9SR0I4ODgsCisJ
RFJNX0ZPUk1BVF9YUkdCODg4OCwKKwlEUk1fRk9STUFUX0FSR0I4ODg4LAorfTsKKworc3RhdGlj
IGNvbnN0IHVpbnQ2NF90IGxvb25nc29uX2Zvcm1hdF9tb2RpZmllcnNbXSA9IHsgRFJNX0ZPUk1B
VF9NT0RfTElORUFSLAorCQkJCQkJICAgICAgRFJNX0ZPUk1BVF9NT0RfSU5WQUxJRCB9OworCitz
dGF0aWMgY29uc3Qgc3RydWN0IGRybV9wbGFuZV9mdW5jcyBsb29uZ3Nvbl9wbGFuZV9mdW5jcyA9
IHsKKwkuYXRvbWljX2R1cGxpY2F0ZV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX3BsYW5lX2R1
cGxpY2F0ZV9zdGF0ZSwKKwkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBl
cl9wbGFuZV9kZXN0cm95X3N0YXRlLAorCS5kZXN0cm95ID0gZHJtX3BsYW5lX2NsZWFudXAsCisJ
LmRpc2FibGVfcGxhbmUgPSBkcm1fYXRvbWljX2hlbHBlcl9kaXNhYmxlX3BsYW5lLAorCS5yZXNl
dCA9IGRybV9hdG9taWNfaGVscGVyX3BsYW5lX3Jlc2V0LAorCS51cGRhdGVfcGxhbmUgPSBkcm1f
YXRvbWljX2hlbHBlcl91cGRhdGVfcGxhbmUsCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9wbGFuZV9oZWxwZXJfZnVuY3MgbG9vbmdzb25fcGxhbmVfaGVscGVyX2Z1bmNzID0geworCS5w
cmVwYXJlX2ZiCT0gZHJtX2dlbV92cmFtX3BsYW5lX2hlbHBlcl9wcmVwYXJlX2ZiLAorCS5jbGVh
bnVwX2ZiCT0gZHJtX2dlbV92cmFtX3BsYW5lX2hlbHBlcl9jbGVhbnVwX2ZiLAorCS5hdG9taWNf
dXBkYXRlID0gbG9vbmdzb25fcGxhbmVfYXRvbWljX3VwZGF0ZSwKK307CisKK2ludCBsb29uZ3Nv
bl9wbGFuZV9pbml0KHN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YykKK3sKKwlzdHJ1Y3QgbG9v
bmdzb25fZGV2aWNlICpsZGV2OworCWludCBjcnRjX2lkOworCWludCByZXQ7CisKKwlsZGV2ID0g
bGNydGMtJmd0O2xkZXY7CisJY3J0Y19pZCA9IGxjcnRjLSZndDtjcnRjX2lkOworCisJbGNydGMt
Jmd0O3BsYW5lID0gZGV2bV9remFsbG9jKGxkZXYtJmd0O2Rldi0mZ3Q7ZGV2LCBzaXplb2YoKmxj
cnRjLSZndDtwbGFuZSksCisJCQkJICAgIEdGUF9LRVJORUwpOworCWlmICghbGNydGMtJmd0O3Bs
YW5lKQorCQlyZXR1cm4gLUVOT01FTTsKKworCXJldCA9IGRybV91bml2ZXJzYWxfcGxhbmVfaW5p
dChsZGV2LSZndDtkZXYsIGxjcnRjLSZndDtwbGFuZSwgQklUKGNydGNfaWQpLAorCQkJCSAgICAg
ICAmYW1wO2xvb25nc29uX3BsYW5lX2Z1bmNzLCBsb29uZ3Nvbl9mb3JtYXRzLAorCQkJCSAgICAg
ICBBUlJBWV9TSVpFKGxvb25nc29uX2Zvcm1hdHMpLAorCQkJCSAgICAgICBsb29uZ3Nvbl9mb3Jt
YXRfbW9kaWZpZXJzLAorCQkJCSAgICAgICBEUk1fUExBTkVfVFlQRV9QUklNQVJZLCBOVUxMKTsK
KwlpZiAocmV0KSB7CisJCURSTV9FUlJPUigiZmFpbCB0byBpbml0IHBsYW5lZCBjcnRjICVkXG4i
LCBjcnRjX2lkKTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlkcm1fcGxhbmVfaGVscGVyX2FkZChs
Y3J0Yy0mZ3Q7cGxhbmUsICZhbXA7bG9vbmdzb25fcGxhbmVfaGVscGVyX2Z1bmNzKTsKKworCXJl
dHVybiAwOworfQotLSAKMi4zMC4xPC9wcmU+PC9kaXY+PGJyPjxicj48c3BhbiB0aXRsZT0ibmV0
ZWFzZWZvb3RlciI+PHA+Jm5ic3A7PC9wPjwvc3Bhbj4=
------=_Part_12870_954473136.1615512536404--


--===============0489477681==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
dri-devel mailing list
dri-devel@lists.freedesktop.org
https://lists.freedesktop.org/mailman/listinfo/dri-devel

--===============0489477681==--

