Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 48D7FBC953
	for <lists+dri-devel@lfdr.de>; Tue, 24 Sep 2019 15:55:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7CEEC6EA36;
	Tue, 24 Sep 2019 13:54:58 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2889789F77;
 Tue, 24 Sep 2019 13:54:57 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx05.intmail.prod.int.phx2.redhat.com
 [10.5.11.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 6FE763058E0A;
 Tue, 24 Sep 2019 13:54:56 +0000 (UTC)
Received: from jason-ThinkPad-X1-Carbon-6th.redhat.com
 (ovpn-12-44.pek2.redhat.com [10.72.12.44])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 0D09161F24;
 Tue, 24 Sep 2019 13:54:31 +0000 (UTC)
From: Jason Wang <jasowang@redhat.com>
To: kvm@vger.kernel.org, linux-s390@vger.kernel.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 intel-gfx@lists.freedesktop.org, intel-gvt-dev@lists.freedesktop.org,
 kwankhede@nvidia.com, alex.williamson@redhat.com, mst@redhat.com,
 tiwei.bie@intel.com
Subject: [PATCH V2 2/8] mdev: class id support
Date: Tue, 24 Sep 2019 21:53:26 +0800
Message-Id: <20190924135332.14160-3-jasowang@redhat.com>
In-Reply-To: <20190924135332.14160-1-jasowang@redhat.com>
References: <20190924135332.14160-1-jasowang@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.15
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.47]); Tue, 24 Sep 2019 13:54:56 +0000 (UTC)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: christophe.de.dinechin@gmail.com, sebott@linux.ibm.com, airlied@linux.ie,
 Jason Wang <jasowang@redhat.com>, heiko.carstens@de.ibm.com,
 kevin.tian@intel.com, virtualization@lists.linux-foundation.org,
 rob.miller@broadcom.com, lulu@redhat.com, eperezma@redhat.com,
 pasic@linux.ibm.com, borntraeger@de.ibm.com, haotian.wang@sifive.com,
 zhi.a.wang@intel.com, farman@linux.ibm.com, idos@mellanox.com,
 gor@linux.ibm.com, cunming.liang@intel.com, rodrigo.vivi@intel.com,
 xiao.w.wang@intel.com, freude@linux.ibm.com, parav@mellanox.com,
 zhihong.wang@intel.com, akrowiak@linux.ibm.com, netdev@vger.kernel.org,
 cohuck@redhat.com, oberpar@linux.ibm.com, maxime.coquelin@redhat.com,
 lingshan.zhu@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TWRldiBidXMgb25seSBzdXBwb3J0cyB2ZmlvIGRyaXZlciByaWdodCBub3csIHNvIGl0IGRvZXNu
J3QgaW1wbGVtZW50Cm1hdGNoIG1ldGhvZC4gQnV0IGluIHRoZSBmdXR1cmUsIHdlIG1heSBhZGQg
ZHJpdmVycyBvdGhlciB0aGFuIHZmaW8sCnRoZSBmaXJzdCBkcml2ZXIgY291bGQgYmUgdmlydGlv
LW1kZXYuIFRoaXMgbWVhbnMgd2UgbmVlZCB0byBhZGQKZGV2aWNlIGNsYXNzIGlkIHN1cHBvcnQg
aW4gYnVzIG1hdGNoIG1ldGhvZCB0byBwYWlyIHRoZSBtZGV2IGRldmljZQphbmQgbWRldiBkcml2
ZXIgY29ycmVjdGx5LgoKU28gdGhpcyBwYXRjaCBhZGRzIGlkX3RhYmxlIHRvIG1kZXZfZHJpdmVy
IGFuZCBjbGFzc19pZCBmb3IgbWRldgpwYXJlbnQgd2l0aCB0aGUgbWF0Y2ggbWV0aG9kIGZvciBt
ZGV2IGJ1cy4KClNpZ25lZC1vZmYtYnk6IEphc29uIFdhbmcgPGphc293YW5nQHJlZGhhdC5jb20+
Ci0tLQogRG9jdW1lbnRhdGlvbi9kcml2ZXItYXBpL3ZmaW8tbWVkaWF0ZWQtZGV2aWNlLnJzdCB8
ICAzICsrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2t2bWd0LmMgICAgICAgICAgICAgICAg
ICB8ICAxICsKIGRyaXZlcnMvczM5MC9jaW8vdmZpb19jY3dfb3BzLmMgICAgICAgICAgICAgICAg
ICAgfCAgMSArCiBkcml2ZXJzL3MzOTAvY3J5cHRvL3ZmaW9fYXBfb3BzLmMgICAgICAgICAgICAg
ICAgIHwgIDEgKwogZHJpdmVycy92ZmlvL21kZXYvbWRldl9jb3JlLmMgICAgICAgICAgICAgICAg
ICAgICB8ICA3ICsrKysrKysKIGRyaXZlcnMvdmZpby9tZGV2L21kZXZfZHJpdmVyLmMgICAgICAg
ICAgICAgICAgICAgfCAxNCArKysrKysrKysrKysrKwogZHJpdmVycy92ZmlvL21kZXYvbWRldl9w
cml2YXRlLmggICAgICAgICAgICAgICAgICB8ICAxICsKIGRyaXZlcnMvdmZpby9tZGV2L3ZmaW9f
bWRldi5jICAgICAgICAgICAgICAgICAgICAgfCAgNiArKysrKysKIGluY2x1ZGUvbGludXgvbWRl
di5oICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgOCArKysrKysrKwogaW5jbHVkZS9s
aW51eC9tb2RfZGV2aWNldGFibGUuaCAgICAgICAgICAgICAgICAgICB8ICA4ICsrKysrKysrCiBz
YW1wbGVzL3ZmaW8tbWRldi9tYm9jaHMuYyAgICAgICAgICAgICAgICAgICAgICAgIHwgIDEgKwog
c2FtcGxlcy92ZmlvLW1kZXYvbWRweS5jICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAxICsK
IHNhbXBsZXMvdmZpby1tZGV2L210dHkuYyAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgMSAr
CiAxMyBmaWxlcyBjaGFuZ2VkLCA1MyBpbnNlcnRpb25zKCspCgpkaWZmIC0tZ2l0IGEvRG9jdW1l
bnRhdGlvbi9kcml2ZXItYXBpL3ZmaW8tbWVkaWF0ZWQtZGV2aWNlLnJzdCBiL0RvY3VtZW50YXRp
b24vZHJpdmVyLWFwaS92ZmlvLW1lZGlhdGVkLWRldmljZS5yc3QKaW5kZXggMjVlYjdkNWI4MzRi
Li5hNWJkYzYwZDYyYTEgMTAwNjQ0Ci0tLSBhL0RvY3VtZW50YXRpb24vZHJpdmVyLWFwaS92Zmlv
LW1lZGlhdGVkLWRldmljZS5yc3QKKysrIGIvRG9jdW1lbnRhdGlvbi9kcml2ZXItYXBpL3ZmaW8t
bWVkaWF0ZWQtZGV2aWNlLnJzdApAQCAtMTAyLDEyICsxMDIsMTQgQEAgc3RydWN0dXJlIHRvIHJl
cHJlc2VudCBhIG1lZGlhdGVkIGRldmljZSdzIGRyaXZlcjo6CiAgICAgICAqIEBwcm9iZTogY2Fs
bGVkIHdoZW4gbmV3IGRldmljZSBjcmVhdGVkCiAgICAgICAqIEByZW1vdmU6IGNhbGxlZCB3aGVu
IGRldmljZSByZW1vdmVkCiAgICAgICAqIEBkcml2ZXI6IGRldmljZSBkcml2ZXIgc3RydWN0dXJl
CisgICAgICAqIEBpZF90YWJsZTogdGhlIGlkcyBzZXJ2aWNlZCBieSB0aGlzIGRyaXZlcgogICAg
ICAgKi8KICAgICAgc3RydWN0IG1kZXZfZHJpdmVyIHsKIAkgICAgIGNvbnN0IGNoYXIgKm5hbWU7
CiAJICAgICBpbnQgICgqcHJvYmUpICAoc3RydWN0IGRldmljZSAqZGV2KTsKIAkgICAgIHZvaWQg
KCpyZW1vdmUpIChzdHJ1Y3QgZGV2aWNlICpkZXYpOwogCSAgICAgc3RydWN0IGRldmljZV9kcml2
ZXIgICAgZHJpdmVyOworCSAgICAgY29uc3Qgc3RydWN0IG1kZXZfY2xhc3NfaWQgKmlkX3RhYmxl
OwogICAgICB9OwogCiBBIG1lZGlhdGVkIGJ1cyBkcml2ZXIgZm9yIG1kZXYgc2hvdWxkIHVzZSB0
aGlzIHN0cnVjdHVyZSBpbiB0aGUgZnVuY3Rpb24gY2FsbHMKQEAgLTE2NSw2ICsxNjcsNyBAQCBy
ZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgbWRldiBjb3JlIGRyaXZlcjo6CiAJZXh0ZXJuIGludCAg
bWRldl9yZWdpc3Rlcl9kZXZpY2Uoc3RydWN0IGRldmljZSAqZGV2LAogCSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBtZGV2X3BhcmVudF9vcHMgKm9wcyk7CiAK
KwogSG93ZXZlciwgdGhlIG1kZXZfcGFyZW50X29wcyBzdHJ1Y3R1cmUgaXMgbm90IHJlcXVpcmVk
IGluIHRoZSBmdW5jdGlvbiBjYWxsCiB0aGF0IGEgZHJpdmVyIHNob3VsZCB1c2UgdG8gdW5yZWdp
c3RlciBpdHNlbGYgd2l0aCB0aGUgbWRldiBjb3JlIGRyaXZlcjo6CiAKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9rdm1ndC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0
L2t2bWd0LmMKaW5kZXggMjNhYTNlNTBjYmY4Li5mNzkzMjUyYTNkMmEgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9rdm1ndC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2d2dC9rdm1ndC5jCkBAIC02NzgsNiArNjc4LDcgQEAgc3RhdGljIGludCBpbnRlbF92Z3B1X2Ny
ZWF0ZShzdHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IG1kZXZfZGV2aWNlICptZGV2KQogCQkg
ICAgIGRldl9uYW1lKG1kZXZfZGV2KG1kZXYpKSk7CiAJcmV0ID0gMDsKIAorCW1kZXZfc2V0X2Ns
YXNzX2lkKG1kZXYsIE1ERVZfSURfVkZJTyk7CiBvdXQ6CiAJcmV0dXJuIHJldDsKIH0KZGlmZiAt
LWdpdCBhL2RyaXZlcnMvczM5MC9jaW8vdmZpb19jY3dfb3BzLmMgYi9kcml2ZXJzL3MzOTAvY2lv
L3ZmaW9fY2N3X29wcy5jCmluZGV4IGYwZDcxYWI3N2M1MC4uZDI1OGVmMWZlZGI5IDEwMDY0NAot
LS0gYS9kcml2ZXJzL3MzOTAvY2lvL3ZmaW9fY2N3X29wcy5jCisrKyBiL2RyaXZlcnMvczM5MC9j
aW8vdmZpb19jY3dfb3BzLmMKQEAgLTEyOSw2ICsxMjksNyBAQCBzdGF0aWMgaW50IHZmaW9fY2N3
X21kZXZfY3JlYXRlKHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3QgbWRldl9kZXZpY2UgKm1k
ZXYpCiAJCQkgICBwcml2YXRlLT5zY2gtPnNjaGlkLnNzaWQsCiAJCQkgICBwcml2YXRlLT5zY2gt
PnNjaGlkLnNjaF9ubyk7CiAKKwltZGV2X3NldF9jbGFzc19pZChtZGV2LCBNREVWX0lEX1ZGSU8p
OwogCXJldHVybiAwOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL3MzOTAvY3J5cHRvL3ZmaW9f
YXBfb3BzLmMgYi9kcml2ZXJzL3MzOTAvY3J5cHRvL3ZmaW9fYXBfb3BzLmMKaW5kZXggNWMwZjUz
YzZkZGU3Li4yY2ZkOTYxMTJhYTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvczM5MC9jcnlwdG8vdmZp
b19hcF9vcHMuYworKysgYi9kcml2ZXJzL3MzOTAvY3J5cHRvL3ZmaW9fYXBfb3BzLmMKQEAgLTM0
Myw2ICszNDMsNyBAQCBzdGF0aWMgaW50IHZmaW9fYXBfbWRldl9jcmVhdGUoc3RydWN0IGtvYmpl
Y3QgKmtvYmosIHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKIAlsaXN0X2FkZCgmbWF0cml4X21k
ZXYtPm5vZGUsICZtYXRyaXhfZGV2LT5tZGV2X2xpc3QpOwogCW11dGV4X3VubG9jaygmbWF0cml4
X2Rldi0+bG9jayk7CiAKKwltZGV2X3NldF9jbGFzc19pZChtZGV2LCBNREVWX0lEX1ZGSU8pOwog
CXJldHVybiAwOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL3ZmaW8vbWRldi9tZGV2X2NvcmUu
YyBiL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfY29yZS5jCmluZGV4IGI1NThkNGNmZDA4Mi4uODc2
NGNmNGEyNzZkIDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZmaW8vbWRldi9tZGV2X2NvcmUuYworKysg
Yi9kcml2ZXJzL3ZmaW8vbWRldi9tZGV2X2NvcmUuYwpAQCAtNDUsNiArNDUsMTIgQEAgdm9pZCBt
ZGV2X3NldF9kcnZkYXRhKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdm9pZCAqZGF0YSkKIH0K
IEVYUE9SVF9TWU1CT0wobWRldl9zZXRfZHJ2ZGF0YSk7CiAKK3ZvaWQgbWRldl9zZXRfY2xhc3Nf
aWQoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LCB1MTYgaWQpCit7CisJbWRldi0+Y2xhc3NfaWQg
PSBpZDsKK30KK0VYUE9SVF9TWU1CT0wobWRldl9zZXRfY2xhc3NfaWQpOworCiBzdHJ1Y3QgZGV2
aWNlICptZGV2X2RldihzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpCiB7CiAJcmV0dXJuICZtZGV2
LT5kZXY7CkBAIC0xMzUsNiArMTQxLDcgQEAgc3RhdGljIGludCBtZGV2X2RldmljZV9yZW1vdmVf
Y2Ioc3RydWN0IGRldmljZSAqZGV2LCB2b2lkICpkYXRhKQogICogbWRldl9yZWdpc3Rlcl9kZXZp
Y2UgOiBSZWdpc3RlciBhIGRldmljZQogICogQGRldjogZGV2aWNlIHN0cnVjdHVyZSByZXByZXNl
bnRpbmcgcGFyZW50IGRldmljZS4KICAqIEBvcHM6IFBhcmVudCBkZXZpY2Ugb3BlcmF0aW9uIHN0
cnVjdHVyZSB0byBiZSByZWdpc3RlcmVkLgorICogQGlkOiBkZXZpY2UgaWQuCiAgKgogICogQWRk
IGRldmljZSB0byBsaXN0IG9mIHJlZ2lzdGVyZWQgcGFyZW50IGRldmljZXMuCiAgKiBSZXR1cm5z
IGEgbmVnYXRpdmUgdmFsdWUgb24gZXJyb3IsIG90aGVyd2lzZSAwLgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy92ZmlvL21kZXYvbWRldl9kcml2ZXIuYyBiL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfZHJp
dmVyLmMKaW5kZXggMGQzMjIzYWVlMjBiLi5iN2M0MGNlODZlZTMgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvdmZpby9tZGV2L21kZXZfZHJpdmVyLmMKKysrIGIvZHJpdmVycy92ZmlvL21kZXYvbWRldl9k
cml2ZXIuYwpAQCAtNjksOCArNjksMjIgQEAgc3RhdGljIGludCBtZGV2X3JlbW92ZShzdHJ1Y3Qg
ZGV2aWNlICpkZXYpCiAJcmV0dXJuIDA7CiB9CiAKK3N0YXRpYyBpbnQgbWRldl9tYXRjaChzdHJ1
Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBkZXZpY2VfZHJpdmVyICpkcnYpCit7CisJdW5zaWduZWQg
aW50IGk7CisJc3RydWN0IG1kZXZfZGV2aWNlICptZGV2ID0gdG9fbWRldl9kZXZpY2UoZGV2KTsK
KwlzdHJ1Y3QgbWRldl9kcml2ZXIgKm1kcnYgPSB0b19tZGV2X2RyaXZlcihkcnYpOworCWNvbnN0
IHN0cnVjdCBtZGV2X2NsYXNzX2lkICppZHMgPSBtZHJ2LT5pZF90YWJsZTsKKworCWZvciAoaSA9
IDA7IGlkc1tpXS5pZDsgaSsrKQorCQlpZiAoaWRzW2ldLmlkID09IG1kZXYtPmNsYXNzX2lkKQor
CQkJcmV0dXJuIDE7CisJcmV0dXJuIDA7Cit9CisKIHN0cnVjdCBidXNfdHlwZSBtZGV2X2J1c190
eXBlID0gewogCS5uYW1lCQk9ICJtZGV2IiwKKwkubWF0Y2gJCT0gbWRldl9tYXRjaCwKIAkucHJv
YmUJCT0gbWRldl9wcm9iZSwKIAkucmVtb3ZlCQk9IG1kZXZfcmVtb3ZlLAogfTsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfcHJpdmF0ZS5oIGIvZHJpdmVycy92ZmlvL21kZXYv
bWRldl9wcml2YXRlLmgKaW5kZXggN2Q5MjI5NTBjYWFmLi5jNjVmNDM2YzE4NjkgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfcHJpdmF0ZS5oCisrKyBiL2RyaXZlcnMvdmZpby9t
ZGV2L21kZXZfcHJpdmF0ZS5oCkBAIC0zMyw2ICszMyw3IEBAIHN0cnVjdCBtZGV2X2RldmljZSB7
CiAJc3RydWN0IGtvYmplY3QgKnR5cGVfa29iajsKIAlzdHJ1Y3QgZGV2aWNlICppb21tdV9kZXZp
Y2U7CiAJYm9vbCBhY3RpdmU7CisJdTE2IGNsYXNzX2lkOwogfTsKIAogI2RlZmluZSB0b19tZGV2
X2RldmljZShkZXYpCWNvbnRhaW5lcl9vZihkZXYsIHN0cnVjdCBtZGV2X2RldmljZSwgZGV2KQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy92ZmlvL21kZXYvdmZpb19tZGV2LmMgYi9kcml2ZXJzL3ZmaW8v
bWRldi92ZmlvX21kZXYuYwppbmRleCAzMDk2NGE0ZTBhMjguLmZkMmE0ZDlhM2YyNiAxMDA2NDQK
LS0tIGEvZHJpdmVycy92ZmlvL21kZXYvdmZpb19tZGV2LmMKKysrIGIvZHJpdmVycy92ZmlvL21k
ZXYvdmZpb19tZGV2LmMKQEAgLTEyMCwxMCArMTIwLDE2IEBAIHN0YXRpYyB2b2lkIHZmaW9fbWRl
dl9yZW1vdmUoc3RydWN0IGRldmljZSAqZGV2KQogCXZmaW9fZGVsX2dyb3VwX2RldihkZXYpOwog
fQogCitzdGF0aWMgc3RydWN0IG1kZXZfY2xhc3NfaWQgaWRfdGFibGVbXSA9IHsKKwl7IE1ERVZf
SURfVkZJTyB9LAorCXsgMCB9LAorfTsKKwogc3RhdGljIHN0cnVjdCBtZGV2X2RyaXZlciB2Zmlv
X21kZXZfZHJpdmVyID0gewogCS5uYW1lCT0gInZmaW9fbWRldiIsCiAJLnByb2JlCT0gdmZpb19t
ZGV2X3Byb2JlLAogCS5yZW1vdmUJPSB2ZmlvX21kZXZfcmVtb3ZlLAorCS5pZF90YWJsZSA9IGlk
X3RhYmxlLAogfTsKIAogc3RhdGljIGludCBfX2luaXQgdmZpb19tZGV2X2luaXQodm9pZCkKZGlm
ZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvbWRldi5oIGIvaW5jbHVkZS9saW51eC9tZGV2LmgKaW5k
ZXggMGNlMzBjYTc4ZGIwLi4zOTc0NjUwYzA3NGYgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgv
bWRldi5oCisrKyBiL2luY2x1ZGUvbGludXgvbWRldi5oCkBAIC0xMTgsNiArMTE4LDcgQEAgc3Ry
dWN0IG1kZXZfdHlwZV9hdHRyaWJ1dGUgbWRldl90eXBlX2F0dHJfIyNfbmFtZSA9CQlcCiAgKiBA
cHJvYmU6IGNhbGxlZCB3aGVuIG5ldyBkZXZpY2UgY3JlYXRlZAogICogQHJlbW92ZTogY2FsbGVk
IHdoZW4gZGV2aWNlIHJlbW92ZWQKICAqIEBkcml2ZXI6IGRldmljZSBkcml2ZXIgc3RydWN0dXJl
CisgKiBAaWRfdGFibGU6IHRoZSBpZHMgc2VydmljZWQgYnkgdGhpcyBkcml2ZXIuCiAgKgogICoq
Lwogc3RydWN0IG1kZXZfZHJpdmVyIHsKQEAgLTEyNSwxMiArMTI2LDE0IEBAIHN0cnVjdCBtZGV2
X2RyaXZlciB7CiAJaW50ICAoKnByb2JlKShzdHJ1Y3QgZGV2aWNlICpkZXYpOwogCXZvaWQgKCpy
ZW1vdmUpKHN0cnVjdCBkZXZpY2UgKmRldik7CiAJc3RydWN0IGRldmljZV9kcml2ZXIgZHJpdmVy
OworCWNvbnN0IHN0cnVjdCBtZGV2X2NsYXNzX2lkICppZF90YWJsZTsKIH07CiAKICNkZWZpbmUg
dG9fbWRldl9kcml2ZXIoZHJ2KQljb250YWluZXJfb2YoZHJ2LCBzdHJ1Y3QgbWRldl9kcml2ZXIs
IGRyaXZlcikKIAogdm9pZCAqbWRldl9nZXRfZHJ2ZGF0YShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1k
ZXYpOwogdm9pZCBtZGV2X3NldF9kcnZkYXRhKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdm9p
ZCAqZGF0YSk7Cit2b2lkIG1kZXZfc2V0X2NsYXNzX2lkKHN0cnVjdCBtZGV2X2RldmljZSAqbWRl
diwgdTE2IGlkKTsKIGNvbnN0IGd1aWRfdCAqbWRldl91dWlkKHN0cnVjdCBtZGV2X2RldmljZSAq
bWRldik7CiAKIGV4dGVybiBzdHJ1Y3QgYnVzX3R5cGUgbWRldl9idXNfdHlwZTsKQEAgLTE0NSw0
ICsxNDgsOSBAQCBzdHJ1Y3QgZGV2aWNlICptZGV2X3BhcmVudF9kZXYoc3RydWN0IG1kZXZfZGV2
aWNlICptZGV2KTsKIHN0cnVjdCBkZXZpY2UgKm1kZXZfZGV2KHN0cnVjdCBtZGV2X2RldmljZSAq
bWRldik7CiBzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXZfZnJvbV9kZXYoc3RydWN0IGRldmljZSAq
ZGV2KTsKIAorZW51bSB7CisJTURFVl9JRF9WRklPID0gMSwKKwkvKiBOZXcgZW50cmllcyBtdXN0
IGJlIGFkZGVkIGhlcmUgKi8KK307CisKICNlbmRpZiAvKiBNREVWX0ggKi8KZGlmZiAtLWdpdCBh
L2luY2x1ZGUvbGludXgvbW9kX2RldmljZXRhYmxlLmggYi9pbmNsdWRlL2xpbnV4L21vZF9kZXZp
Y2V0YWJsZS5oCmluZGV4IDU3MTRmZDM1YTgzYy4uZjMyYzZlNDRmYjFhIDEwMDY0NAotLS0gYS9p
bmNsdWRlL2xpbnV4L21vZF9kZXZpY2V0YWJsZS5oCisrKyBiL2luY2x1ZGUvbGludXgvbW9kX2Rl
dmljZXRhYmxlLmgKQEAgLTgyMSw0ICs4MjEsMTIgQEAgc3RydWN0IHdtaV9kZXZpY2VfaWQgewog
CWNvbnN0IHZvaWQgKmNvbnRleHQ7CiB9OwogCisvKioKKyAqIHN0cnVjdCBtZGV2X2NsYXNzX2lk
IC0gTURFViBkZXZpY2UgY2xhc3MgaWRlbnRpZmllcgorICogQGlkOiBVc2VkIHRvIGlkZW50aWZ5
IGEgc3BlY2lmaWMgY2xhc3Mgb2YgZGV2aWNlLCBlLmcgdmZpby1tZGV2IGRldmljZS4KKyAqLwor
c3RydWN0IG1kZXZfY2xhc3NfaWQgeworCV9fdTE2IGlkOworfTsKKwogI2VuZGlmIC8qIExJTlVY
X01PRF9ERVZJQ0VUQUJMRV9IICovCmRpZmYgLS1naXQgYS9zYW1wbGVzL3ZmaW8tbWRldi9tYm9j
aHMuYyBiL3NhbXBsZXMvdmZpby1tZGV2L21ib2Nocy5jCmluZGV4IGFjNWM4YzE3YjFmZi4uOGE4
NTgzYzg5MmIyIDEwMDY0NAotLS0gYS9zYW1wbGVzL3ZmaW8tbWRldi9tYm9jaHMuYworKysgYi9z
YW1wbGVzL3ZmaW8tbWRldi9tYm9jaHMuYwpAQCAtNTYxLDYgKzU2MSw3IEBAIHN0YXRpYyBpbnQg
bWJvY2hzX2NyZWF0ZShzdHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IG1kZXZfZGV2aWNlICpt
ZGV2KQogCW1ib2Noc19yZXNldChtZGV2KTsKIAogCW1ib2Noc191c2VkX21ieXRlcyArPSB0eXBl
LT5tYnl0ZXM7CisJbWRldl9zZXRfY2xhc3NfaWQobWRldiwgTURFVl9JRF9WRklPKTsKIAlyZXR1
cm4gMDsKIAogZXJyX21lbToKZGlmZiAtLWdpdCBhL3NhbXBsZXMvdmZpby1tZGV2L21kcHkuYyBi
L3NhbXBsZXMvdmZpby1tZGV2L21kcHkuYwppbmRleCBjYzg2YmY2NTY2ZTQuLjg4ZDdlNzZmMzgz
NiAxMDA2NDQKLS0tIGEvc2FtcGxlcy92ZmlvLW1kZXYvbWRweS5jCisrKyBiL3NhbXBsZXMvdmZp
by1tZGV2L21kcHkuYwpAQCAtMjY5LDYgKzI2OSw3IEBAIHN0YXRpYyBpbnQgbWRweV9jcmVhdGUo
c3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKIAltZHB5X3Jl
c2V0KG1kZXYpOwogCiAJbWRweV9jb3VudCsrOworCW1kZXZfc2V0X2NsYXNzX2lkKG1kZXYsIE1E
RVZfSURfVkZJTyk7CiAJcmV0dXJuIDA7CiB9CiAKZGlmZiAtLWdpdCBhL3NhbXBsZXMvdmZpby1t
ZGV2L210dHkuYyBiL3NhbXBsZXMvdmZpby1tZGV2L210dHkuYwppbmRleCA5MmU3NzBhMDZlYTIu
LjRlMDczNTE0M2I2OSAxMDA2NDQKLS0tIGEvc2FtcGxlcy92ZmlvLW1kZXYvbXR0eS5jCisrKyBi
L3NhbXBsZXMvdmZpby1tZGV2L210dHkuYwpAQCAtNzcwLDYgKzc3MCw3IEBAIHN0YXRpYyBpbnQg
bXR0eV9jcmVhdGUoc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBtZGV2X2RldmljZSAqbWRl
dikKIAlsaXN0X2FkZCgmbWRldl9zdGF0ZS0+bmV4dCwgJm1kZXZfZGV2aWNlc19saXN0KTsKIAlt
dXRleF91bmxvY2soJm1kZXZfbGlzdF9sb2NrKTsKIAorCW1kZXZfc2V0X2NsYXNzX2lkKG1kZXYs
IE1ERVZfSURfVkZJTyk7CiAJcmV0dXJuIDA7CiB9CiAKLS0gCjIuMTkuMQoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
