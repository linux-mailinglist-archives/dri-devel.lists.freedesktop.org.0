Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D826510DA7A
	for <lists+dri-devel@lfdr.de>; Fri, 29 Nov 2019 21:12:22 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AC9A56EA87;
	Fri, 29 Nov 2019 20:12:19 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x443.google.com (mail-wr1-x443.google.com
 [IPv6:2a00:1450:4864:20::443])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AA47A6EA87
 for <dri-devel@lists.freedesktop.org>; Fri, 29 Nov 2019 20:12:17 +0000 (UTC)
Received: by mail-wr1-x443.google.com with SMTP id z7so33100405wrl.13
 for <dri-devel@lists.freedesktop.org>; Fri, 29 Nov 2019 12:12:17 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=3YI+d2NvmVkEloaZilnvp4D1sppM2GPkI8u4Su78MwI=;
 b=HYqSNj3mRP1V29/kylgvTABnzQHvPM7p3ZG48TJZIkt+N6OTIqokX5V4iVzErrMlGX
 d1VNph9dbGjodh+fpNeKt4Xrq122CG87gmeLrJtVbJPHUFGFiepb1gbkl4ecioilE90c
 PpkLsFs4fe9Ni1mMTgg+PwXA5Ez1DIhx+AZUMJQf/S5l+LALBQl6GBxcCrcWV84TDiqN
 ICIpXsZzTIY6igKanhdwVCEhQVlA6sQsGUWfTD6UU9N0I3eG1taXZMrWzkF7Fvg4h1aq
 FKLOdMFoGQnvJDOKWU2A3hlpYO6ePPtc4990r3QDY2A4owP/n/nnxEdWsvUA9fH9ErY8
 eymw==
X-Gm-Message-State: APjAAAXF15+YtQbwX8pzFhF5GN6MUhaMjyqQxQrEOrOrbcXrIsRbBk08
 MowdiGaOiUxYSW6MnOCfOZOGGGDk8Fo=
X-Google-Smtp-Source: APXvYqwtG45fdmkUsPnDsNlglM4M8netn7p3FnAXaWvyij1hujYYOR9XinVc43pwVOGYPw5BsC9qwg==
X-Received: by 2002:a5d:6408:: with SMTP id z8mr10832347wru.122.1575058336266; 
 Fri, 29 Nov 2019 12:12:16 -0800 (PST)
Received: from phenom.ffwll.local (212-51-149-96.fiber7.init7.net.
 [212.51.149.96])
 by smtp.gmail.com with ESMTPSA id r6sm15353546wrq.92.2019.11.29.12.12.15
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 29 Nov 2019 12:12:15 -0800 (PST)
Date: Fri, 29 Nov 2019 21:12:13 +0100
From: Daniel Vetter <daniel@ffwll.ch>
To: Boris Brezillon <boris.brezillon@collabora.com>
Subject: Re: [PATCH 6/8] drm/panfrost: Make sure imported/exported BOs are
 never purged
Message-ID: <20191129201213.GR624164@phenom.ffwll.local>
References: <20191129135908.2439529-1-boris.brezillon@collabora.com>
 <20191129135908.2439529-7-boris.brezillon@collabora.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191129135908.2439529-7-boris.brezillon@collabora.com>
X-Operating-System: Linux phenom 5.3.0-2-amd64 
User-Agent: Mutt/1.12.2 (2019-09-21)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=3YI+d2NvmVkEloaZilnvp4D1sppM2GPkI8u4Su78MwI=;
 b=Q+yEJbTyD2DOywKyV/g4X6WA2kgZRfVCZGRrnfhlWF0THUjvvkC8uMHOJINEck592H
 wQ/VbaMPFlTuW4hSrXcRzdXfsGgJd1KUBkxA2nYMgm0g16cYKdP7nJVFcsMGPzuiwAWo
 L1gJheOZXJV9js+ormZoQDfJjOcxij0CytfqU=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: stable@vger.kernel.org, Steven Price <steven.price@arm.com>,
 Rob Herring <robh+dt@kernel.org>, dri-devel@lists.freedesktop.org,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBOb3YgMjksIDIwMTkgYXQgMDI6NTk6MDZQTSArMDEwMCwgQm9yaXMgQnJlemlsbG9u
IHdyb3RlOgo+IFdlIGRvbid0IHdhbnQgaW1wb3J0ZWQvZXhwb3J0ZWQgQk9zIHRvIGJlIHB1cmdl
cywgYXMgdGhvc2UgYXJlIHNoYXJlZAo+IHdpdGggb3RoZXIgcHJvY2Vzc2VzIHRoYXQgbWlnaHQg
c3RpbGwgdXNlIHRoZW0uIFdlIHNob3VsZCBhbHNvIHJlZnVzZQo+IHRvIGV4cG9ydCBhIEJPIGlm
IGl0J3MgYmVlbiBtYXJrZWQgcHVyZ2VhYmxlIG9yIGhhcyBhbHJlYWR5IGJlZW4gcHVyZ2VkLgo+
IAo+IEZpeGVzOiAwMTNiNjUxMDEzMTUgKCJkcm0vcGFuZnJvc3Q6IEFkZCBtYWR2aXNlIGFuZCBz
aHJpbmtlciBzdXBwb3J0IikKPiBDYzogPHN0YWJsZUB2Z2VyLmtlcm5lbC5vcmc+Cj4gU2lnbmVk
LW9mZi1ieTogQm9yaXMgQnJlemlsbG9uIDxib3Jpcy5icmV6aWxsb25AY29sbGFib3JhLmNvbT4K
PiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jIHwgMTkgKysr
KysrKysrKysrKysrKy0KPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbS5j
IHwgMjcgKysrKysrKysrKysrKysrKysrKysrKysrKwo+ICAyIGZpbGVzIGNoYW5nZWQsIDQ1IGlu
c2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3Bh
bmZyb3N0X2Rydi5jCj4gaW5kZXggMWM2N2FjNDM0ZTEwLi43NTFkZjk3NTUzNGYgMTAwNjQ0Cj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jCj4gKysrIGIvZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jCj4gQEAgLTM0Myw2ICszNDMsNyBA
QCBzdGF0aWMgaW50IHBhbmZyb3N0X2lvY3RsX21hZHZpc2Uoc3RydWN0IGRybV9kZXZpY2UgKmRl
diwgdm9pZCAqZGF0YSwKPiAgCXN0cnVjdCBkcm1fcGFuZnJvc3RfbWFkdmlzZSAqYXJncyA9IGRh
dGE7Cj4gIAlzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiA9IGRldi0+ZGV2X3ByaXZhdGU7
Cj4gIAlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdlbV9vYmo7Cj4gKwlpbnQgcmV0Owo+ICAKPiAg
CWdlbV9vYmogPSBkcm1fZ2VtX29iamVjdF9sb29rdXAoZmlsZV9wcml2LCBhcmdzLT5oYW5kbGUp
Owo+ICAJaWYgKCFnZW1fb2JqKSB7Cj4gQEAgLTM1MCw2ICszNTEsMTkgQEAgc3RhdGljIGludCBw
YW5mcm9zdF9pb2N0bF9tYWR2aXNlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEs
Cj4gIAkJcmV0dXJuIC1FTk9FTlQ7Cj4gIAl9Cj4gIAo+ICsJLyoKPiArCSAqIFdlIGRvbid0IHdh
bnQgdG8gbWFyayBleHBvcnRlZC9pbXBvcnRlZCBCT3MgYXMgcHVyZ2VhYmxlOiB3ZSdyZSBub3QK
PiArCSAqIHRoZSBvbmx5IG93bmVyIGluIHRoYXQgY2FzZS4KPiArCSAqLwo+ICsJbXV0ZXhfbG9j
aygmZGV2LT5vYmplY3RfbmFtZV9sb2NrKTsKCktpbmRhIG5vdCBhd2Vzb21lIHRoYXQgeW91IGhh
dmUgdG8gdGFrZSB0aGlzIGNvcmUgbG9jayBoZXJlIGFuZCBlbmN1bWJlcgpjb3JlIGRybSBsb2Nr
aW5nIHdpdGggcmFuZG9tIGRyaXZlciBzdHVmZi4KCkNhbid0IHRoaXMgYmUgc29sdmVkIHdpdGgg
eW91ciBvd24gbG9ja2luZyBvbmx5IGFuZCBzb21lIHJlYXNvbmFibGUKb3JkZXJpbmcgb2YgY2hl
Y2tzPyBiaWcgbG9ja3MgYmVjYXVzZSBpdCdzIGVhc3kgaXMgZW5kbGVzcyBsb25nLXRlcm0gcGFp
bi4KCkFsc28gZXhwb3J0aW5nIHB1cmdlYWJsZSBvYmplY3RzIGlzIGtpbmRhIGEgdXNlcnNwYWNl
IGJ1ZywgYWxsIHlvdSBoYXZlIHRvCmRvIGlzIG5vdCBvb3BzIGluIGRtYV9idWZfYXR0YWNobWVu
dF9tYXAuIE5vIG5lZWQgdG8gcHJldmVudCB0aGUgZGFtYWdlCmhlcmUgaW1vLgotRGFuaWVsCgo+
ICsJaWYgKGdlbV9vYmotPmRtYV9idWYpCj4gKwkJcmV0ID0gLUVJTlZBTDsKPiArCWVsc2UKPiAr
CQlyZXQgPSAwOwo+ICsKPiArCWlmIChyZXQpCj4gKwkJZ290byBvdXRfdW5sb2NrX29iamVjdF9u
YW1lOwo+ICsKPiAgCW11dGV4X2xvY2soJnBmZGV2LT5zaHJpbmtlcl9sb2NrKTsKPiAgCWFyZ3Mt
PnJldGFpbmVkID0gZHJtX2dlbV9zaG1lbV9tYWR2aXNlKGdlbV9vYmosIGFyZ3MtPm1hZHYpOwo+
ICAKPiBAQCAtMzY0LDggKzM3OCwxMSBAQCBzdGF0aWMgaW50IHBhbmZyb3N0X2lvY3RsX21hZHZp
c2Uoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKPiAgCX0KPiAgCW11dGV4X3Vu
bG9jaygmcGZkZXYtPnNocmlua2VyX2xvY2spOwo+ICAKPiArb3V0X3VubG9ja19vYmplY3RfbmFt
ZToKPiArCW11dGV4X3VubG9jaygmZGV2LT5vYmplY3RfbmFtZV9sb2NrKTsKPiArCj4gIAlkcm1f
Z2VtX29iamVjdF9wdXRfdW5sb2NrZWQoZ2VtX29iaik7Cj4gLQlyZXR1cm4gMDsKPiArCXJldHVy
biByZXQ7Cj4gIH0KPiAgCj4gIGludCBwYW5mcm9zdF91bnN0YWJsZV9pb2N0bF9jaGVjayh2b2lk
KQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ2VtLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ2VtLmMKPiBpbmRleCA5MmE5NTIx
MGE4OTkuLjMxZDY0MTdkZDIxYyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJv
c3QvcGFuZnJvc3RfZ2VtLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJv
c3RfZ2VtLmMKPiBAQCAtOTksNiArOTksMzIgQEAgdm9pZCBwYW5mcm9zdF9nZW1fY2xvc2Uoc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2KQo+ICAJ
c3Bpbl91bmxvY2soJnByaXYtPm1tX2xvY2spOwo+ICB9Cj4gIAo+ICtzdGF0aWMgc3RydWN0IGRt
YV9idWYgKgo+ICtwYW5mcm9zdF9nZW1fZXhwb3J0KHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2Jq
LCBpbnQgZmxhZ3MpCj4gK3sKPiArCXN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0ICpibyA9IHRv
X3BhbmZyb3N0X2JvKG9iaik7Cj4gKwlpbnQgcmV0Owo+ICsKPiArCS8qCj4gKwkgKiBXZSBtdXN0
IG1ha2Ugc3VyZSB0aGUgQk8gaGFzIG5vdCBiZWVuIG1hcmtlZCBwdXJnZWFibGUvcHVyZ2VkIGJl
Zm9yZQo+ICsJICogYWRkaW5nIHRoZSBtYXBwaW5nLgo+ICsJICogTm90ZSB0aGF0IHdlIGRvbid0
IG5lZWQgdG8gcHJvdGVjdCB0aGlzIHRlc3Qgd2l0aCBhIGxvY2sgYmVjYXVzZQo+ICsJICogJmRy
bV9nZW1fb2JqZWN0X2Z1bmNzLmV4cG9ydCgpIGlzIGNhbGxlZCB3aXRoCj4gKwkgKiAmZHJtX2Rl
dmljZS5vYmplY3RfbG9jayBoZWxkLCBhbmQgcGFuZnJvc3RfaW9jdGxfbWFkdmlzZSgpIHRha2Vz
Cj4gKwkgKiB0aGlzIGxvY2sgYmVmb3JlIGNhbGxpbmcgZHJtX2dlbV9zaG1lbV9tYWR2aXNlKCkg
KHRoZSBmdW5jdGlvbiB0aGF0Cj4gKwkgKiBtb2RpZmllcyBiby0+YmFzZS5tYWR2KS4KPiArCSAq
Lwo+ICsJaWYgKGJvLT5iYXNlLm1hZHYgPT0gUEFORlJPU1RfTUFEVl9XSUxMTkVFRCkKPiArCQly
ZXQgPSAtRUlOVkFMOwo+ICsJZWxzZQo+ICsJCXJldCA9IDA7Cj4gKwo+ICsJaWYgKHJldCkKPiAr
CQlyZXR1cm4gRVJSX1BUUihyZXQpOwo+ICsKPiArCXJldHVybiBkcm1fZ2VtX3ByaW1lX2V4cG9y
dChvYmosIGZsYWdzKTsKPiArfQo+ICsKPiAgc3RhdGljIGludCBwYW5mcm9zdF9nZW1fcGluKHN0
cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKQo+ICB7Cj4gIAlpZiAodG9fcGFuZnJvc3RfYm8ob2Jq
KS0+aXNfaGVhcCkKPiBAQCAtMTEyLDYgKzEzOCw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJt
X2dlbV9vYmplY3RfZnVuY3MgcGFuZnJvc3RfZ2VtX2Z1bmNzID0gewo+ICAJLm9wZW4gPSBwYW5m
cm9zdF9nZW1fb3BlbiwKPiAgCS5jbG9zZSA9IHBhbmZyb3N0X2dlbV9jbG9zZSwKPiAgCS5wcmlu
dF9pbmZvID0gZHJtX2dlbV9zaG1lbV9wcmludF9pbmZvLAo+ICsJLmV4cG9ydCA9IHBhbmZyb3N0
X2dlbV9leHBvcnQsCj4gIAkucGluID0gcGFuZnJvc3RfZ2VtX3BpbiwKPiAgCS51bnBpbiA9IGRy
bV9nZW1fc2htZW1fdW5waW4sCj4gIAkuZ2V0X3NnX3RhYmxlID0gZHJtX2dlbV9zaG1lbV9nZXRf
c2dfdGFibGUsCj4gLS0gCj4gMi4yMy4wCj4gCj4gX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KPiBkcmktZGV2ZWwgbWFpbGluZyBsaXN0Cj4gZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCgotLSAKRGFuaWVsIFZldHRlcgpTb2Z0d2FyZSBFbmdp
bmVlciwgSW50ZWwgQ29ycG9yYXRpb24KaHR0cDovL2Jsb2cuZmZ3bGwuY2gKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
