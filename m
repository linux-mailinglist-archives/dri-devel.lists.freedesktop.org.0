Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4E8C0E1C60
	for <lists+dri-devel@lfdr.de>; Wed, 23 Oct 2019 15:23:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CAEAB6EAB3;
	Wed, 23 Oct 2019 13:23:37 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from us-smtp-1.mimecast.com (us-smtp-delivery-1.mimecast.com
 [205.139.110.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A45C16EAB1
 for <dri-devel@lists.freedesktop.org>; Wed, 23 Oct 2019 13:23:36 +0000 (UTC)
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-282-SjDw5hsHPSuhoHLQQPtesw-1; Wed, 23 Oct 2019 09:23:32 -0400
Received: from smtp.corp.redhat.com (int-mx01.intmail.prod.int.phx2.redhat.com
 [10.5.11.11])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 26DE4800D59;
 Wed, 23 Oct 2019 13:23:28 +0000 (UTC)
Received: from jason-ThinkPad-X1-Carbon-6th.redhat.com
 (ovpn-12-126.pek2.redhat.com [10.72.12.126])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 30BD8600CC;
 Wed, 23 Oct 2019 13:20:18 +0000 (UTC)
From: Jason Wang <jasowang@redhat.com>
To: kvm@vger.kernel.org, linux-s390@vger.kernel.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 intel-gfx@lists.freedesktop.org, intel-gvt-dev@lists.freedesktop.org,
 kwankhede@nvidia.com, alex.williamson@redhat.com, mst@redhat.com,
 tiwei.bie@intel.com
Subject: [PATCH V5 4/6] mdev: introduce virtio device and its device ops
Date: Wed, 23 Oct 2019 21:07:50 +0800
Message-Id: <20191023130752.18980-5-jasowang@redhat.com>
In-Reply-To: <20191023130752.18980-1-jasowang@redhat.com>
References: <20191023130752.18980-1-jasowang@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.11
X-MC-Unique: SjDw5hsHPSuhoHLQQPtesw-1
X-Mimecast-Spam-Score: 0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=redhat.com; 
 s=mimecast20190719; t=1571837015;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=9esACzUJF0u6QtBjv/epLb0yRS+8Z5hwILebZ4esYPQ=;
 b=Cmc5oaMUln77A1emLNgVxA36hYHslfQEd1TOKYJkKUPjFEEMxvdl/5iJb7BR2Duz/d7ULI
 Tx6AyjgW0NZjZFryrvNMuYYsOvaf/Kwt71iUZTddj7EWmM5uzDY9vNu8f8PlyBGjgvdIP9
 ru7YnB36uW0b66uM77sIRuszf4SXfGE=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: christophe.de.dinechin@gmail.com, sebott@linux.ibm.com, airlied@linux.ie,
 Jason Wang <jasowang@redhat.com>, heiko.carstens@de.ibm.com,
 kevin.tian@intel.com, virtualization@lists.linux-foundation.org,
 rob.miller@broadcom.com, lulu@redhat.com, eperezma@redhat.com,
 pasic@linux.ibm.com, borntraeger@de.ibm.com, haotian.wang@sifive.com,
 zhi.a.wang@intel.com, farman@linux.ibm.com, idos@mellanox.com,
 gor@linux.ibm.com, cunming.liang@intel.com, rodrigo.vivi@intel.com,
 xiao.w.wang@intel.com, freude@linux.ibm.com, parav@mellanox.com,
 zhihong.wang@intel.com, stefanha@redhat.com, akrowiak@linux.ibm.com,
 netdev@vger.kernel.org, cohuck@redhat.com, oberpar@linux.ibm.com,
 maxime.coquelin@redhat.com, lingshan.zhu@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBpbXBsZW1lbnRzIGJhc2ljIHN1cHBvcnQgZm9yIG1kZXYgZHJpdmVyIHRoYXQg
c3VwcG9ydHMKdmlydGlvIHRyYW5zcG9ydCBmb3Iga2VybmVsIHZpcnRpbyBkcml2ZXIuCgpTaWdu
ZWQtb2ZmLWJ5OiBKYXNvbiBXYW5nIDxqYXNvd2FuZ0ByZWRoYXQuY29tPgotLS0KIGRyaXZlcnMv
dmZpby9tZGV2L21kZXZfY29yZS5jICAgIHwgIDIwICsrKysKIGRyaXZlcnMvdmZpby9tZGV2L21k
ZXZfcHJpdmF0ZS5oIHwgICAyICsKIGluY2x1ZGUvbGludXgvbWRldi5oICAgICAgICAgICAgIHwg
ICA2ICsrCiBpbmNsdWRlL2xpbnV4L3ZpcnRpb19tZGV2X29wcy5oICB8IDE1OSArKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrCiA0IGZpbGVzIGNoYW5nZWQsIDE4NyBpbnNlcnRpb25zKCsp
CiBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS9saW51eC92aXJ0aW9fbWRldl9vcHMuaAoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfY29yZS5jIGIvZHJpdmVycy92ZmlvL21k
ZXYvbWRldl9jb3JlLmMKaW5kZXggNTU1YmQ2MWQ4YzM4Li45YjAwYzM1MTMxMjAgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfY29yZS5jCisrKyBiL2RyaXZlcnMvdmZpby9tZGV2
L21kZXZfY29yZS5jCkBAIC03Niw2ICs3NiwyNiBAQCBjb25zdCBzdHJ1Y3QgdmZpb19tZGV2X2Rl
dmljZV9vcHMgKm1kZXZfZ2V0X3ZmaW9fb3BzKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKIH0K
IEVYUE9SVF9TWU1CT0wobWRldl9nZXRfdmZpb19vcHMpOwogCisvKiBTcGVjaWZ5IHRoZSB2aXJ0
aW8gZGV2aWNlIG9wcyBmb3IgdGhlIG1kZXYgZGV2aWNlLCB0aGlzCisgKiBtdXN0IGJlIGNhbGxl
ZCBkdXJpbmcgY3JlYXRlKCkgY2FsbGJhY2sgZm9yIHZpcnRpbyBtZGV2IGRldmljZS4KKyAqLwor
dm9pZCBtZGV2X3NldF92aXJ0aW9fb3BzKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwKKwkJCSBj
b25zdCBzdHJ1Y3QgdmlydGlvX21kZXZfZGV2aWNlX29wcyAqdmlydGlvX29wcykKK3sKKwltZGV2
X3NldF9jbGFzcyhtZGV2LCBNREVWX0NMQVNTX0lEX1ZJUlRJTyk7CisJbWRldi0+dmlydGlvX29w
cyA9IHZpcnRpb19vcHM7Cit9CitFWFBPUlRfU1lNQk9MKG1kZXZfc2V0X3ZpcnRpb19vcHMpOwor
CisvKiBHZXQgdGhlIHZpcnRpbyBkZXZpY2Ugb3BzIGZvciB0aGUgbWRldiBkZXZpY2UuICovCitj
b25zdCBzdHJ1Y3QgdmlydGlvX21kZXZfZGV2aWNlX29wcyAqCittZGV2X2dldF92aXJ0aW9fb3Bz
KHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKK3sKKwlXQVJOX09OKG1kZXYtPmNsYXNzX2lkICE9
IE1ERVZfQ0xBU1NfSURfVklSVElPKTsKKwlyZXR1cm4gbWRldi0+dmlydGlvX29wczsKK30KK0VY
UE9SVF9TWU1CT0wobWRldl9nZXRfdmlydGlvX29wcyk7CisKIHN0cnVjdCBkZXZpY2UgKm1kZXZf
ZGV2KHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKIHsKIAlyZXR1cm4gJm1kZXYtPmRldjsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfcHJpdmF0ZS5oIGIvZHJpdmVycy92Zmlv
L21kZXYvbWRldl9wcml2YXRlLmgKaW5kZXggMDc3MDQxMGRlZDJhLi43YjQ3ODkwYzM0ZTcgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfcHJpdmF0ZS5oCisrKyBiL2RyaXZlcnMv
dmZpby9tZGV2L21kZXZfcHJpdmF0ZS5oCkBAIC0xMSw2ICsxMSw3IEBACiAjZGVmaW5lIE1ERVZf
UFJJVkFURV9ICiAKICNpbmNsdWRlIDxsaW51eC92ZmlvX21kZXZfb3BzLmg+CisjaW5jbHVkZSA8
bGludXgvdmlydGlvX21kZXZfb3BzLmg+CiAKIGludCAgbWRldl9idXNfcmVnaXN0ZXIodm9pZCk7
CiB2b2lkIG1kZXZfYnVzX3VucmVnaXN0ZXIodm9pZCk7CkBAIC0zOCw2ICszOSw3IEBAIHN0cnVj
dCBtZGV2X2RldmljZSB7CiAJdTE2IGNsYXNzX2lkOwogCXVuaW9uIHsKIAkJY29uc3Qgc3RydWN0
IHZmaW9fbWRldl9kZXZpY2Vfb3BzICp2ZmlvX29wczsKKwkJY29uc3Qgc3RydWN0IHZpcnRpb19t
ZGV2X2RldmljZV9vcHMgKnZpcnRpb19vcHM7CiAJfTsKIH07CiAKZGlmZiAtLWdpdCBhL2luY2x1
ZGUvbGludXgvbWRldi5oIGIvaW5jbHVkZS9saW51eC9tZGV2LmgKaW5kZXggNDYyNWYxYTExMDE0
Li45YjY5YjBiYmViZmQgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvbWRldi5oCisrKyBiL2lu
Y2x1ZGUvbGludXgvbWRldi5oCkBAIC0xNyw2ICsxNyw3IEBACiAKIHN0cnVjdCBtZGV2X2Rldmlj
ZTsKIHN0cnVjdCB2ZmlvX21kZXZfZGV2aWNlX29wczsKK3N0cnVjdCB2aXJ0aW9fbWRldl9kZXZp
Y2Vfb3BzOwogCiAvKgogICogQ2FsbGVkIGJ5IHRoZSBwYXJlbnQgZGV2aWNlIGRyaXZlciB0byBz
ZXQgdGhlIGRldmljZSB3aGljaCByZXByZXNlbnRzCkBAIC0xMTIsNiArMTEzLDEwIEBAIHZvaWQg
bWRldl9zZXRfY2xhc3Moc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LCB1MTYgaWQpOwogdm9pZCBt
ZGV2X3NldF92ZmlvX29wcyhzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsCiAJCSAgICAgICBjb25z
dCBzdHJ1Y3QgdmZpb19tZGV2X2RldmljZV9vcHMgKnZmaW9fb3BzKTsKIGNvbnN0IHN0cnVjdCB2
ZmlvX21kZXZfZGV2aWNlX29wcyAqbWRldl9nZXRfdmZpb19vcHMoc3RydWN0IG1kZXZfZGV2aWNl
ICptZGV2KTsKK3ZvaWQgbWRldl9zZXRfdmlydGlvX29wcyhzdHJ1Y3QgbWRldl9kZXZpY2UgKm1k
ZXYsCisJCQkgY29uc3Qgc3RydWN0IHZpcnRpb19tZGV2X2RldmljZV9vcHMgKnZpcnRpb19vcHMp
OworY29uc3Qgc3RydWN0IHZpcnRpb19tZGV2X2RldmljZV9vcHMgKgorbWRldl9nZXRfdmlydGlv
X29wcyhzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpOwogCiBleHRlcm4gc3RydWN0IGJ1c190eXBl
IG1kZXZfYnVzX3R5cGU7CiAKQEAgLTEyNyw2ICsxMzIsNyBAQCBzdHJ1Y3QgbWRldl9kZXZpY2Ug
Km1kZXZfZnJvbV9kZXYoc3RydWN0IGRldmljZSAqZGV2KTsKIAogZW51bSB7CiAJTURFVl9DTEFT
U19JRF9WRklPID0gMSwKKwlNREVWX0NMQVNTX0lEX1ZJUlRJTyA9IDIsCiAJLyogTmV3IGVudHJp
ZXMgbXVzdCBiZSBhZGRlZCBoZXJlICovCiB9OwogCmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4
L3ZpcnRpb19tZGV2X29wcy5oIGIvaW5jbHVkZS9saW51eC92aXJ0aW9fbWRldl9vcHMuaApuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmQ0MTdiNDFmMjg0NQotLS0gL2Rl
di9udWxsCisrKyBiL2luY2x1ZGUvbGludXgvdmlydGlvX21kZXZfb3BzLmgKQEAgLTAsMCArMSwx
NTkgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkgKi8KKy8qCisg
KiBWaXJ0aW8gbWVkaWF0ZWQgZGV2aWNlIGRyaXZlcgorICoKKyAqIENvcHlyaWdodCAyMDE5LCBS
ZWQgSGF0IENvcnAuCisgKiAgICAgQXV0aG9yOiBKYXNvbiBXYW5nIDxqYXNvd2FuZ0ByZWRoYXQu
Y29tPgorICovCisjaWZuZGVmIF9MSU5VWF9WSVJUSU9fTURFVl9ICisjZGVmaW5lIF9MSU5VWF9W
SVJUSU9fTURFVl9ICisKKyNpbmNsdWRlIDxsaW51eC9pbnRlcnJ1cHQuaD4KKyNpbmNsdWRlIDxs
aW51eC9tZGV2Lmg+CisjaW5jbHVkZSA8dWFwaS9saW51eC92aG9zdC5oPgorCisjZGVmaW5lIFZJ
UlRJT19NREVWX0RFVklDRV9BUElfU1RSSU5HCQkidmlydGlvLW1kZXYiCisjZGVmaW5lIFZJUlRJ
T19NREVWX0ZfVkVSU0lPTl8xIDB4MQorCitzdHJ1Y3QgdmlydGlvX21kZXZfY2FsbGJhY2sgewor
CWlycXJldHVybl90ICgqY2FsbGJhY2spKHZvaWQgKmRhdGEpOworCXZvaWQgKnByaXZhdGU7Cit9
OworCisvKioKKyAqIHN0cnVjdCB2ZmlvX21kZXZfZGV2aWNlX29wcyAtIFN0cnVjdHVyZSB0byBi
ZSByZWdpc3RlcmVkIGZvciBlYWNoCisgKiBtZGV2IGRldmljZSB0byByZWdpc3RlciB0aGUgZGV2
aWNlIGZvciB2aXJ0aW8vdmhvc3QgZHJpdmVycy4KKyAqCisgKiBUaGUgZGV2aWNlIG9wcyB0aGF0
IGlzIHN1cHBvcnRlZCBieSBWSVJUSU9fTURFVl9GX1ZFUlNJT05fMSwgdGhlCisgKiBjYWxsYmFj
a3MgYXJlIG1hbmRhdG9yeSB1bmxlc3MgZXhwbGljaXR5IG1lbnRpb25lZC4KKyAqCisgKiBAc2V0
X3ZxX2FkZHJlc3M6CQlTZXQgdGhlIGFkZHJlc3Mgb2YgdmlydHF1ZXVlCisgKgkJCQlAbWRldjog
bWVkaWF0ZWQgZGV2aWNlCisgKgkJCQlAaWR4OiB2aXJ0cXVldWUgaW5kZXgKKyAqCQkJCUBkZXNj
X2FyZWE6IGFkZHJlc3Mgb2YgZGVzYyBhcmVhCisgKgkJCQlAZHJpdmVyX2FyZWE6IGFkZHJlc3Mg
b2YgZHJpdmVyIGFyZWEKKyAqCQkJCUBkZXZpY2VfYXJlYTogYWRkcmVzcyBvZiBkZXZpY2UgYXJl
YQorICoJCQkJUmV0dXJucyBpbnRlZ2VyOiBzdWNjZXNzICgwKSBvciBlcnJvciAoPCAwKQorICog
QHNldF92cV9udW06CQkJU2V0IHRoZSBzaXplIG9mIHZpcnRxdWV1ZQorICoJCQkJQG1kZXY6IG1l
ZGlhdGVkIGRldmljZQorICoJCQkJQGlkeDogdmlydHF1ZXVlIGluZGV4CisgKgkJCQlAbnVtOiB0
aGUgc2l6ZSBvZiB2aXJ0cXVldWUKKyAqIEBraWNrX3ZxOgkJCUtpY2sgdGhlIHZpcnRxdWV1ZQor
ICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQorICoJCQkJQGlkeDogdmlydHF1ZXVlIGluZGV4
CisgKiBAc2V0X3ZxX2NiOgkJCVNldCB0aGUgaW50ZXJydXB0IGNhbGxiYWNrIGZ1bmN0aW9uIGZv
cgorICoJCQkJYSB2aXJ0cXVldWUKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJ
CUBpZHg6IHZpcnRxdWV1ZSBpbmRleAorICoJCQkJQGNiOiB2aXJ0aW8tbWRldiBpbnRlcnJ1cHQg
Y2FsbGJhY2sgc3RydWN0dXJlCisgKiBAc2V0X3ZxX3JlYWR5OgkJU2V0IHJlYWR5IHN0YXR1cyBm
b3IgYSB2aXJ0cXVldWUKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCUBpZHg6
IHZpcnRxdWV1ZSBpbmRleAorICoJCQkJQHJlYWR5OiByZWFkeSAodHJ1ZSkgbm90IHJlYWR5KGZh
bHNlKQorICogQGdldF92cV9yZWFkeToJCUdldCByZWFkeSBzdGF0dXMgZm9yIGEgdmlydHF1ZXVl
CisgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCisgKgkJCQlAaWR4OiB2aXJ0cXVldWUgaW5k
ZXgKKyAqCQkJCVJldHVybnMgYm9vbGVhbjogcmVhZHkgKHRydWUpIG9yIG5vdCAoZmFsc2UpCisg
KiBAc2V0X3ZxX3N0YXRlOgkJU2V0IHRoZSBzdGF0ZSBmb3IgYSB2aXJ0cXVldWUKKyAqCQkJCUBt
ZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCUBpZHg6IHZpcnRxdWV1ZSBpbmRleAorICoJCQkJ
QHN0YXRlOiB2aXJ0cXVldWUgc3RhdGUgKGxhc3RfYXZhaWxfaWR4KQorICoJCQkJUmV0dXJucyBp
bnRlZ2VyOiBzdWNjZXNzICgwKSBvciBlcnJvciAoPCAwKQorICogQGdldF92cV9zdGF0ZToJCUdl
dCB0aGUgc3RhdGUgZm9yIGEgdmlydHF1ZXVlCisgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNl
CisgKgkJCQlAaWR4OiB2aXJ0cXVldWUgaW5kZXgKKyAqCQkJCVJldHVybnMgdmlydHF1ZXVlIHN0
YXRlIChsYXN0X2F2YWlsX2lkeCkKKyAqIEBnZXRfdnFfYWxpZ246CQlHZXQgdGhlIHZpcnRxdWV1
ZSBhbGlnbiByZXF1aXJlbWVudAorICoJCQkJZm9yIHRoZSBkZXZpY2UKKyAqCQkJCUBtZGV2OiBt
ZWRpYXRlZCBkZXZpY2UKKyAqCQkJCVJldHVybnMgdmlydHF1ZXVlIGFsZ2luIHJlcXVpcmVtZW50
CisgKiBAZ2V0X2ZlYXR1cmVzOgkJR2V0IHZpcnRpbyBmZWF0dXJlcyBzdXBwb3J0ZWQgYnkgdGhl
IGRldmljZQorICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQorICoJCQkJUmV0dXJucyB0aGUg
dmlydGlvIGZlYXR1cmVzIHN1cHBvcnQgYnkgdGhlCisgKgkJCQlkZXZpY2UKKyAqIEBnZXRfZmVh
dHVyZXM6CQlTZXQgdmlydGlvIGZlYXR1cmVzIHN1cHBvcnRlZCBieSB0aGUgZHJpdmVyCisgKgkJ
CQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCisgKgkJCQlAZmVhdHVyZXM6IGZlYXR1cmUgc3VwcG9y
dCBieSB0aGUgZHJpdmVyCisgKgkJCQlSZXR1cm5zIGludGVnZXI6IHN1Y2Nlc3MgKDApIG9yIGVy
cm9yICg8IDApCisgKiBAc2V0X2NvbmZpZ19jYjoJCVNldCB0aGUgY29uZmlnIGludGVycnVwdCBj
YWxsYmFjaworICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQorICoJCQkJQGNiOiB2aXJ0aW8t
bWRldiBpbnRlcnJ1cHQgY2FsbGJhY2sgc3RydWN0dXJlCisgKiBAZ2V0X3ZxX251bV9tYXg6CQlH
ZXQgdGhlIG1heCBzaXplIG9mIHZpcnRxdWV1ZQorICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmlj
ZQorICoJCQkJUmV0dXJucyB1MTY6IG1heCBzaXplIG9mIHZpcnRxdWV1ZQorICogQGdldF9kZXZp
Y2VfaWQ6CQlHZXQgdmlydGlvIGRldmljZSBpZAorICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmlj
ZQorICoJCQkJUmV0dXJucyB1MzI6IHZpcnRpbyBkZXZpY2UgaWQKKyAqIEBnZXRfdmVuZG9yX2lk
OgkJR2V0IGlkIGZvciB0aGUgdmVuZG9yIHRoYXQgcHJvdmlkZXMgdGhpcyBkZXZpY2UKKyAqCQkJ
CUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCVJldHVybnMgdTMyOiB2aXJ0aW8gdmVuZG9y
IGlkCisgKiBAZ2V0X3N0YXR1czoJCQlHZXQgdGhlIGRldmljZSBzdGF0dXMKKyAqCQkJCUBtZGV2
OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCVJldHVybnMgdTg6IHZpcnRpbyBkZXZpY2Ugc3RhdHVz
CisgKiBAc2V0X3N0YXR1czoJCQlTZXQgdGhlIGRldmljZSBzdGF0dXMKKyAqCQkJCUBtZGV2OiBt
ZWRpYXRlZCBkZXZpY2UKKyAqCQkJCUBzdGF0dXM6IHZpcnRpbyBkZXZpY2Ugc3RhdHVzCisgKiBA
Z2V0X2NvbmZpZzoJCQlSZWFkIGZyb20gZGV2aWNlIHNwZWNpZmljIGNvbmZpZ3VyYXRpb24gc3Bh
Y2UKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCUBvZmZzZXQ6IG9mZnNldCBm
cm9tIHRoZSBiZWdpbm5pbmcgb2YKKyAqCQkJCWNvbmZpZ3VyYXRpb24gc3BhY2UKKyAqCQkJCUBi
dWY6IGJ1ZmZlciB1c2VkIHRvIHJlYWQgdG8KKyAqCQkJCUBsZW46IHRoZSBsZW5ndGggdG8gcmVh
ZCBmcm9tCisgKgkJCQljb25maWdyYXRpb24gc3BhY2UKKyAqIEBzZXRfY29uZmlnOgkJCVdyaXRl
IHRvIGRldmljZSBzcGVjaWZpYyBjb25maWd1cmF0aW9uIHNwYWNlCisgKgkJCQlAbWRldjogbWVk
aWF0ZWQgZGV2aWNlCisgKgkJCQlAb2Zmc2V0OiBvZmZzZXQgZnJvbSB0aGUgYmVnaW5uaW5nIG9m
CisgKgkJCQljb25maWd1cmF0aW9uIHNwYWNlCisgKgkJCQlAYnVmOiBidWZmZXIgdXNlZCB0byB3
cml0ZSBmcm9tCisgKgkJCQlAbGVuOiB0aGUgbGVuZ3RoIHRvIHdyaXRlIHRvCisgKgkJCQljb25m
aWdyYXRpb24gc3BhY2UKKyAqIEBnZXRfbWRldl9mZWF0dXJlczoJCUdldCBhIHNldCBvZiBiaXRz
IHRoYXQgZGVtb25zdHJhdGUKKyAqCQkJCXRoZWNhcGFiaWxpdHkgb2YgdGhlIG1kZXYgZGV2aWNl
LiBOZXcKKyAqCQkJCWZlYXR1cmVzIGJpdHMgbXVzdCBiZSBhZGRlZCB3aGVuCisgKgkJCQlpbnRy
b2R1Y2luZyBuZXcgZGV2aWNlIG9wcy4KKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAq
CQkJCVJldHVybnMgdGhlIG1kZXYgZmVhdHVyZXMgKEFQSSkgc3VwcG9ydCBieQorICoJCQkJdGhl
IGRldmljZS4KKyAqIEBnZXRfZ2VuZXJhdGlvbjoJCUdldCBkZXZpY2UgY29uZmlnIGdlbmVyYXRv
biAob3B0aW9uYWxseSkKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCVJldHVy
bnMgdTMyOiBkZXZpY2UgZ2VuZXJhdGlvbgorICovCitzdHJ1Y3QgdmlydGlvX21kZXZfZGV2aWNl
X29wcyB7CisJLyogVmlydHF1ZXVlIG9wcyAqLworCWludCAoKnNldF92cV9hZGRyZXNzKShzdHJ1
Y3QgbWRldl9kZXZpY2UgKm1kZXYsCisJCQkgICAgICB1MTYgaWR4LCB1NjQgZGVzY19hcmVhLCB1
NjQgZHJpdmVyX2FyZWEsCisJCQkgICAgICB1NjQgZGV2aWNlX2FyZWEpOworCXZvaWQgKCpzZXRf
dnFfbnVtKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUxNiBpZHgsIHUzMiBudW0pOworCXZv
aWQgKCpraWNrX3ZxKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUxNiBpZHgpOworCXZvaWQg
KCpzZXRfdnFfY2IpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdTE2IGlkeCwKKwkJCSAgc3Ry
dWN0IHZpcnRpb19tZGV2X2NhbGxiYWNrICpjYik7CisJdm9pZCAoKnNldF92cV9yZWFkeSkoc3Ry
dWN0IG1kZXZfZGV2aWNlICptZGV2LCB1MTYgaWR4LCBib29sIHJlYWR5KTsKKwlib29sICgqZ2V0
X3ZxX3JlYWR5KShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUxNiBpZHgpOworCWludCAoKnNl
dF92cV9zdGF0ZSkoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LCB1MTYgaWR4LCB1NjQgc3RhdGUp
OworCXU2NCAoKmdldF92cV9zdGF0ZSkoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LCB1MTYgaWR4
KTsKKworCS8qIFZpcnRpbyBkZXZpY2Ugb3BzICovCisJdTE2ICgqZ2V0X3ZxX2FsaWduKShzdHJ1
Y3QgbWRldl9kZXZpY2UgKm1kZXYpOworCXU2NCAoKmdldF9mZWF0dXJlcykoc3RydWN0IG1kZXZf
ZGV2aWNlICptZGV2KTsKKwlpbnQgKCpzZXRfZmVhdHVyZXMpKHN0cnVjdCBtZGV2X2RldmljZSAq
bWRldiwgdTY0IGZlYXR1cmVzKTsKKwl2b2lkICgqc2V0X2NvbmZpZ19jYikoc3RydWN0IG1kZXZf
ZGV2aWNlICptZGV2LAorCQkJICAgICAgc3RydWN0IHZpcnRpb19tZGV2X2NhbGxiYWNrICpjYik7
CisJdTE2ICgqZ2V0X3ZxX251bV9tYXgpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7CisJdTMy
ICgqZ2V0X2RldmljZV9pZCkoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2KTsKKwl1MzIgKCpnZXRf
dmVuZG9yX2lkKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpOworCXU4ICgqZ2V0X3N0YXR1cyko
c3RydWN0IG1kZXZfZGV2aWNlICptZGV2KTsKKwl2b2lkICgqc2V0X3N0YXR1cykoc3RydWN0IG1k
ZXZfZGV2aWNlICptZGV2LCB1OCBzdGF0dXMpOworCXZvaWQgKCpnZXRfY29uZmlnKShzdHJ1Y3Qg
bWRldl9kZXZpY2UgKm1kZXYsIHVuc2lnbmVkIGludCBvZmZzZXQsCisJCQkgICB2b2lkICpidWYs
IHVuc2lnbmVkIGludCBsZW4pOworCXZvaWQgKCpzZXRfY29uZmlnKShzdHJ1Y3QgbWRldl9kZXZp
Y2UgKm1kZXYsIHVuc2lnbmVkIGludCBvZmZzZXQsCisJCQkgICBjb25zdCB2b2lkICpidWYsIHVu
c2lnbmVkIGludCBsZW4pOworCXUzMiAoKmdldF9nZW5lcmF0aW9uKShzdHJ1Y3QgbWRldl9kZXZp
Y2UgKm1kZXYpOworCisJLyogTWRldiBkZXZpY2Ugb3BzICovCisJdTY0ICgqZ2V0X21kZXZfZmVh
dHVyZXMpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7Cit9OworCit2b2lkIG1kZXZfc2V0X3Zp
cnRpb19vcHMoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LAorCQkJIGNvbnN0IHN0cnVjdCB2aXJ0
aW9fbWRldl9kZXZpY2Vfb3BzICp2aXJ0aW9fb3BzKTsKKworI2VuZGlmCi0tIAoyLjE5LjEKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBt
YWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
