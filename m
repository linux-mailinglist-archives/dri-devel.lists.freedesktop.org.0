Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 207A6FC721
	for <lists+dri-devel@lfdr.de>; Thu, 14 Nov 2019 14:15:39 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9B4746E258;
	Thu, 14 Nov 2019 13:15:36 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lf1-x143.google.com (mail-lf1-x143.google.com
 [IPv6:2a00:1450:4864:20::143])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 48F5E6E2C7
 for <dri-devel@lists.freedesktop.org>; Thu, 14 Nov 2019 13:15:34 +0000 (UTC)
Received: by mail-lf1-x143.google.com with SMTP id x22so881383lfa.3
 for <dri-devel@lists.freedesktop.org>; Thu, 14 Nov 2019 05:15:34 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=vrYNWZKVDdctkiL8VeF9vvo4uBCjPTCOEtoL4cULlKo=;
 b=Mr12m6n6M0IyMJOXvHHh9m7PcTP1YYc6It9cYhWrGrdImhTKMhIkLpqOVUxOqHb+pW
 mXCqu2a7UvHwKy/0TCIkQtSrkAq02g7nWyUDNVH5X6D9DXSRvVde4ApXt3R91Mx7yhEn
 LzNyCAOPdLtg+CXHg6wN2HF0mDLtUkFxIjVUfSDl6ck4IM9pMdMugpXRrd62+LCYArkf
 Yuddf5pzvg+nqEAoTK3++RlLTK0KX7TQbjgERpZ3ep5lqBZ/CqHP++edNCjTx1/mrxF7
 pXs8vgkI59kSBwSHlfHHBCLFEPJX1mtksPyluHUxT5BpId4sIkxeAqXU4aWNpmMlV8SP
 KI+A==
X-Gm-Message-State: APjAAAX8l2CnZTaV2ZVMXHmX6TLIsw/KWtLpDPs3Syrsc1jw3VwU6Ev0
 7GUBfSCKObv7CR2dBd1No/iJmQ==
X-Google-Smtp-Source: APXvYqy46vd3gfbiefnHcKHThDTL8g/lyJvy64oySfPxbZkRDFp0SQW6nToqnnqzmgf4gJxTwt+QkQ==
X-Received: by 2002:ac2:4a8a:: with SMTP id l10mr6691528lfp.185.1573737332417; 
 Thu, 14 Nov 2019 05:15:32 -0800 (PST)
Received: from genomnajs.ideon.se ([85.235.10.227])
 by smtp.gmail.com with ESMTPSA id r7sm2283515ljc.74.2019.11.14.05.15.31
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 14 Nov 2019 05:15:31 -0800 (PST)
From: Linus Walleij <linus.walleij@linaro.org>
To: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>,
 dri-devel@lists.freedesktop.org, Rob Herring <robh@kernel.org>
Subject: [PATCH 2/2 v6] drm/panel: Add driver for Sony ACX424AKP panel
Date: Thu, 14 Nov 2019 14:15:25 +0100
Message-Id: <20191114131525.3988-2-linus.walleij@linaro.org>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191114131525.3988-1-linus.walleij@linaro.org>
References: <20191114131525.3988-1-linus.walleij@linaro.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=vrYNWZKVDdctkiL8VeF9vvo4uBCjPTCOEtoL4cULlKo=;
 b=Dj8bRnrlIaNGMmRamxgpnZmPTwp4ob/pCJ3PMQ4hoivA3WhRuZV58+ILGqtZhsggEy
 Glap1eDIlzyxPdLhMHX72GQysV3EVOQ5mqN+ULauQ52JhmDaLeEVcQPcimal5bxzff2y
 /tSnzc3Ngm+V1EscHtL1DXYOhAvmN7x38u/HIw6gyqvRk/jlCEGIZGIPafkDH/4CW6IU
 4EbPvwjoOm93C4ilTLKKJv9Re646WG5O0CYGpCpzHlfIM5m+8ljvGkTe+wKMnXpVCUH/
 ZqIPBJKT2i+CMQkT2QBeIqxUXGvRk6u8qHftT2Vt+DoBtufN9bCtwxwbq2HFx8zFDOtH
 rZmA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Stephan Gerhold <stephan@gerhold.net>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIFNvbnkgQUNYNDI0QUtQIGlzIGEgY29tbWFuZC92aWRlb21vZGUgRFNJIHBhbmVsIGZvcgpt
b2JpbGUgZGV2aWNlcy4gSXQgaXMgdXNlZCBvbiB0aGUgU1QtRXJpY3Nzb24gSFJFRjUyMApyZWZl
cmVuY2UgZGVzaWduLiBXZSBzdXBwb3J0IHZpZGVvIG1vZGUgYnkgZGVmYXVsdCwgYnV0Cml0IGlz
IHBvc3NpYmxlIHRvIHN3aXRjaCB0aGUgcGFuZWwgaW50byBjb21tYW5kIG1vZGUKYnkgdXNpbmcg
dGhlIGJvb2wgcHJvcGVydHkgImRzaS1jb21tYW5kLW1vZGUiLgoKQ2M6IFN0ZXBoYW4gR2VyaG9s
ZCA8c3RlcGhhbkBnZXJob2xkLm5ldD4KU2lnbmVkLW9mZi1ieTogTGludXMgV2FsbGVpaiA8bGlu
dXMud2FsbGVpakBsaW5hcm8ub3JnPgotLS0KQ2hhbmdlTG9nIHY0LT52NToKLSBCaW5kaW5ncyB3
ZXJlIGl0ZXJhdGVkIHNlcGFyYXRlbHkgc28gYSBqdW1wIGluIHZlcnNpb25pbmcuCi0gQWRkIFN0
ZXBoYW4gYXMgcmV2aWV3ZXIuCkNoYW5nZUxvZyB2My0+djQ6Ci0gTm8gY2hhbmdlcyBqdXN0IHJl
c2VuZGluZyB3aXRoIHRoZSBuZXcgYmluZGluZyB1cGRhdGVzLgpDaGFuZ2VMb2cgdjItPnYzOgot
IE5vIGNoYW5nZXMganVzdCByZXNlbmRpbmcgd2l0aCB0aGUgbmV3IGJpbmRpbmcgdXBkYXRlcy4K
Q2hhbmdlTG9nIHYxLT52MjoKLSBGaXggdXAgdGhlIElEIHJlYWQgZnVuY3Rpb24gdG8gc3BsaXQg
aW50byByZWFkaW5nIGhlYWRlciwKICB2ZXJzaW9uIGFuZCBJRCwgc3RvcmUgdGhlIHZlcnNpb24g
aW4gdGhlIHN0cnVjdC4KLSBHZXQgcmlkIG9mIGEgc3VycGx1cyBzZW1pY29sb24gZm91bmQgYnkg
dGhlIGJ1aWxkIHJvYm90CiAgd2hpbGUgcmV3cml0aW5nIHRoZSBhYm92ZSBjb2RlLgotIFVzZSB1
bnNpZ25lZCBpbnQgaW4gcHJvYmUoKSBsb29wLgotIFNldCB2cmVmcmVzaCB0byA2MEh6LCBhcyBn
b29kIGFzIGFueSwgdGhlIG1lYXN1cmVkIHZyZWZyZXNoCiAgaW4gY29udGlub3VzIGNvbW1hbmQg
bW9kZSBpcyB+MTE3IEh6LgotIFVzZSBhIGRpZmZlcmVudCBmb3IoKSBpZGlvbSB3aGlsZSByZXRy
eWluZyB0byByZWFkIElECiAgNSB0aW1lcy4KLSBEcm9wIHRoZSBzeW5jIHB1bHNlIHNldHRpbmcs
IHdlIGFyZSBub3QgdXNpbmcgdGhpcywgdGhpcwogIHBhbmVsIHVzZXMgYW4gZXZlbnQuCi0gVXNl
IHRoZSBnZW5lcmljICJlbmZvcmNlLXZpZGVvLW1vZGUiIGZvciB2aWRlbyBtb2RlCiAgZW5mb3Jj
ZW1lbnQuCi0tLQogZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcgICAgICAgICAgICAgICAg
fCAgIDcgKwogZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlICAgICAgICAgICAgICAgfCAg
IDEgKwogZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLXNvbnktYWN4NDI0YWtwLmMgfCA1NDAg
KysrKysrKysrKysrKysrKysrKwogaW5jbHVkZS92aWRlby9taXBpX2Rpc3BsYXkuaCAgICAgICAg
ICAgICAgICAgfCAgIDEgKwogNCBmaWxlcyBjaGFuZ2VkLCA1NDkgaW5zZXJ0aW9ucygrKQogY3Jl
YXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1zb255LWFjeDQyNGFr
cC5jCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcgYi9kcml2ZXJz
L2dwdS9kcm0vcGFuZWwvS2NvbmZpZwppbmRleCBmMTUyYmM0ZWViNTMuLjk1OWRmNWJlYTdkMiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcKKysrIGIvZHJpdmVycy9n
cHUvZHJtL3BhbmVsL0tjb25maWcKQEAgLTMxNiw2ICszMTYsMTMgQEAgY29uZmlnIERSTV9QQU5F
TF9TSVRST05JWF9TVDc3ODlWCiAJICBTYXkgWSBoZXJlIGlmIHlvdSB3YW50IHRvIGVuYWJsZSBz
dXBwb3J0IGZvciB0aGUgU2l0cm9uaXgKIAkgIFNUNzc4OVYgY29udHJvbGxlciBmb3IgMjQweDMy
MCBMQ0QgcGFuZWxzCiAKK2NvbmZpZyBEUk1fUEFORUxfU09OWV9BQ1g0MjRBS1AKKwl0cmlzdGF0
ZSAiU29ueSBBQ1g0MjRBS1AgRFNJIGNvbW1hbmQgbW9kZSBwYW5lbCIKKwlkZXBlbmRzIG9uIE9G
CisJZGVwZW5kcyBvbiBEUk1fTUlQSV9EU0kKKwlkZXBlbmRzIG9uIEJBQ0tMSUdIVF9DTEFTU19E
RVZJQ0UKKwlzZWxlY3QgVklERU9NT0RFX0hFTFBFUlMKKwogY29uZmlnIERSTV9QQU5FTF9TT05Z
X0FDWDU2NUFLTQogCXRyaXN0YXRlICJTb255IEFDWDU2NUFLTSBwYW5lbCIKIAlkZXBlbmRzIG9u
IEdQSU9MSUIgJiYgT0YgJiYgU1BJCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwv
TWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKaW5kZXggYjZjZDM5ZmUw
ZjIwLi4wYjUxNzkzZTNiNDMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtl
ZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKQEAgLTMzLDYgKzMzLDcg
QEAgb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9TSEFSUF9MUzAzN1Y3RFcwMSkgKz0gcGFuZWwtc2hh
cnAtbHMwMzd2N2R3MDEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9TSEFSUF9MUzA0M1QxTEUw
MSkgKz0gcGFuZWwtc2hhcnAtbHMwNDN0MWxlMDEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9T
SVRST05JWF9TVDc3MDEpICs9IHBhbmVsLXNpdHJvbml4LXN0NzcwMS5vCiBvYmotJChDT05GSUdf
RFJNX1BBTkVMX1NJVFJPTklYX1NUNzc4OVYpICs9IHBhbmVsLXNpdHJvbml4LXN0Nzc4OXYubwor
b2JqLSQoQ09ORklHX0RSTV9QQU5FTF9TT05ZX0FDWDQyNEFLUCkgKz0gcGFuZWwtc29ueS1hY3g0
MjRha3Aubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9TT05ZX0FDWDU2NUFLTSkgKz0gcGFuZWwt
c29ueS1hY3g1NjVha20ubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9UUE9fVEQwMjhUVEVDMSkg
Kz0gcGFuZWwtdHBvLXRkMDI4dHRlYzEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9UUE9fVEQw
NDNNVEVBMSkgKz0gcGFuZWwtdHBvLXRkMDQzbXRlYTEubwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3BhbmVsL3BhbmVsLXNvbnktYWN4NDI0YWtwLmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFu
ZWwvcGFuZWwtc29ueS1hY3g0MjRha3AuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAw
MDAwMDAwMDAuLjIzODJiNjA4YjY3YgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9wYW5lbC9wYW5lbC1zb255LWFjeDQyNGFrcC5jCkBAIC0wLDAgKzEsNTQwIEBACisvLyBTUERY
LUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCsKKy8qCisgKiBNSVBJLURTSSBTb255IEFDWDQy
NEFLUCBwYW5lbCBkcml2ZXIuIFRoaXMgaXMgYSA0ODB4ODY0CisgKiBBTU9MRUQgcGFuZWwgd2l0
aCBhIGNvbW1hbmQtb25seSBEU0kgaW50ZXJmYWNlLgorICoKKyAqIENvcHlyaWdodCAoQykgTGlu
YXJvIEx0ZC4gMjAxOQorICogQXV0aG9yOiBMaW51cyBXYWxsZWlqCisgKiBCYXNlZCBvbiBjb2Rl
IGFuZCBrbm93LWhvdyBmcm9tIE1hcmN1cyBMb3JlbnR6b24KKyAqIENvcHlyaWdodCAoQykgU1Qt
RXJpY3Nzb24gU0EgMjAxMAorICovCisKKyNpbmNsdWRlIDxkcm0vZHJtX21vZGVzLmg+CisjaW5j
bHVkZSA8ZHJtL2RybV9taXBpX2RzaS5oPgorI2luY2x1ZGUgPGRybS9kcm1fcGFuZWwuaD4KKyNp
bmNsdWRlIDxkcm0vZHJtX3ByaW50Lmg+CisjaW5jbHVkZSA8dmlkZW8vbWlwaV9kaXNwbGF5Lmg+
CisKKyNpbmNsdWRlIDxsaW51eC9ncGlvL2NvbnN1bWVyLmg+CisjaW5jbHVkZSA8bGludXgvcmVn
dWxhdG9yL2NvbnN1bWVyLmg+CisjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KKyNpbmNsdWRlIDxs
aW51eC9vZi5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L2Jh
Y2tsaWdodC5oPgorCisjZGVmaW5lIEFDWDQyNF9EQ1NfUkVBRF9JRDEJCTB4REEKKyNkZWZpbmUg
QUNYNDI0X0RDU19SRUFEX0lEMgkJMHhEQgorI2RlZmluZSBBQ1g0MjRfRENTX1JFQURfSUQzCQkw
eERDCisKKyNkZWZpbmUgRElTUExBWV9TT05ZX0FDWDQyNEFLUF9JRDEJMHg4MTFiCisjZGVmaW5l
IERJU1BMQVlfU09OWV9BQ1g0MjRBS1BfSUQyCTB4ODExYQorI2RlZmluZSBESVNQTEFZX1NPTllf
QUNYNDI0QUtQX0lEMwkweDgwMDAKKworc3RydWN0IGFjeDQyNGFrcCB7CisJc3RydWN0IGRldmlj
ZSAqZGV2OworCXN0cnVjdCBkcm1fcGFuZWwgcGFuZWw7CisJc3RydWN0IGJhY2tsaWdodF9kZXZp
Y2UgKmJsOworCXN0cnVjdCByZWd1bGF0b3IgKnN1cHBseTsKKwlzdHJ1Y3QgZ3Bpb19kZXNjICpy
ZXNldF9ncGlvOworCXU4IHZlcnNpb247CisJYm9vbCB2aWRlb19tb2RlOworfTsKKworc3RhdGlj
IGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlIHNvbnlfYWN4NDI0YWtwX3ZpZF9tb2RlID0g
eworCS5jbG9jayA9IDMzMDAwMCwKKwkuaGRpc3BsYXkgPSA0ODAsCisJLmhzeW5jX3N0YXJ0ID0g
NDgwICsgMTUsCisJLmhzeW5jX2VuZCA9IDQ4MCArIDE1ICsgMCwKKwkuaHRvdGFsID0gNDgwICsg
MTUgKyAwICsgMTUsCisJLnZkaXNwbGF5ID0gODY0LAorCS52c3luY19zdGFydCA9IDg2NCArIDE0
LAorCS52c3luY19lbmQgPSA4NjQgKyAxNCArIDEsCisJLnZ0b3RhbCA9IDg2NCArIDE0ICsgMSAr
IDExLAorCS52cmVmcmVzaCA9IDYwLAorCS53aWR0aF9tbSA9IDQ4LAorCS5oZWlnaHRfbW0gPSA4
NCwKKwkuZmxhZ3MgPSBEUk1fTU9ERV9GTEFHX1BWU1lOQywKK307CisKKy8qCisgKiBUaGUgdGlt
aW5ncyBhcmUgbm90IHZlcnkgaGVscGZ1bCBhcyB0aGUgZGlzcGxheSBpcyB1c2VkIGluCisgKiBj
b21tYW5kIG1vZGUgdXNpbmcgdGhlIG1heGltdW0gSFMgZnJlcXVlbmN5LgorICovCitzdGF0aWMg
Y29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgc29ueV9hY3g0MjRha3BfY21kX21vZGUgPSB7
CisJLmNsb2NrID0gNDIwMTYwLAorCS5oZGlzcGxheSA9IDQ4MCwKKwkuaHN5bmNfc3RhcnQgPSA0
ODAgKyAxNTQsCisJLmhzeW5jX2VuZCA9IDQ4MCArIDE1NCArIDE2LAorCS5odG90YWwgPSA0ODAg
KyAxNTQgKyAxNiArIDMyLAorCS52ZGlzcGxheSA9IDg2NCwKKwkudnN5bmNfc3RhcnQgPSA4NjQg
KyAxLAorCS52c3luY19lbmQgPSA4NjQgKyAxICsgMSwKKwkudnRvdGFsID0gODY0ICsgMSArIDEg
KyAxLAorCS8qCisJICogU29tZSBkZXNpcmVkIHJlZnJlc2ggcmF0ZSwgZXhwZXJpbWVudHMgYXQg
dGhlIG1heGltdW0gInBpeGVsIgorCSAqIGNsb2NrIHNwZWVkIChIUyBjbG9jayA0MjAgTUh6KSB5
aWVsZHMgYXJvdW5kIDExN0h6LgorCSAqLworCS52cmVmcmVzaCA9IDYwLAorCS53aWR0aF9tbSA9
IDQ4LAorCS5oZWlnaHRfbW0gPSA4NCwKK307CisKK3N0YXRpYyBpbmxpbmUgc3RydWN0IGFjeDQy
NGFrcCAqcGFuZWxfdG9fYWN4NDI0YWtwKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXJl
dHVybiBjb250YWluZXJfb2YocGFuZWwsIHN0cnVjdCBhY3g0MjRha3AsIHBhbmVsKTsKK30KKwor
I2RlZmluZSBGT1NDCQkJMjAgLyogMjBNaHogKi8KKyNkZWZpbmUgU0NBTEVfRkFDVE9SX05TX0RJ
Vl9NSFoJMTAwMAorCitzdGF0aWMgaW50IGFjeDQyNGFrcF9zZXRfYnJpZ2h0bmVzcyhzdHJ1Y3Qg
YmFja2xpZ2h0X2RldmljZSAqYmwpCit7CisJc3RydWN0IGFjeDQyNGFrcCAqYWN4ID0gYmxfZ2V0
X2RhdGEoYmwpOworCXN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRzaSA9IHRvX21pcGlfZHNpX2Rl
dmljZShhY3gtPmRldik7CisJaW50IHBlcmlvZF9ucyA9IDEwMjM7CisJaW50IGR1dHlfbnMgPSBi
bC0+cHJvcHMuYnJpZ2h0bmVzczsKKwl1OCBwd21fcmF0aW87CisJdTggcHdtX2RpdjsKKwl1OCBw
YXI7CisJaW50IHJldDsKKworCS8qIENhbGN1bGF0ZSB0aGUgUFdNIGR1dHkgY3ljbGUgaW4gbi8y
NTYncyAqLworCXB3bV9yYXRpbyA9IG1heCgoKGR1dHlfbnMgKiAyNTYpIC8gcGVyaW9kX25zKSAt
IDEsIDEpOworCXB3bV9kaXYgPSBtYXgoMSwKKwkJICAgICAgKChGT1NDICogcGVyaW9kX25zKSAv
IDI1NikgLworCQkgICAgICBTQ0FMRV9GQUNUT1JfTlNfRElWX01IWik7CisKKwkvKiBTZXQgdXAg
UFdNIGR1dHljeWNsZSBPTkUgYnl0ZSAoZGlmZmVycyBmcm9tIHRoZSBzdGFuZGFyZCkgKi8KKwlE
Uk1fREVWX0RFQlVHKGFjeC0+ZGV2LCAiY2FsY3VsYXRlZCBkdXR5IGN5Y2xlICUwMnhcbiIsIHB3
bV9yYXRpbyk7CisJcmV0ID0gbWlwaV9kc2lfZGNzX3dyaXRlKGRzaSwgTUlQSV9EQ1NfU0VUX0RJ
U1BMQVlfQlJJR0hUTkVTUywKKwkJCQkgJnB3bV9yYXRpbywgMSk7CisJaWYgKHJldCA8IDApIHsK
KwkJRFJNX0RFVl9FUlJPUihhY3gtPmRldiwKKwkJCSAgICAgICJmYWlsZWQgdG8gc2V0IGRpc3Bs
YXkgUFdNIHJhdGlvICglZClcbiIsCisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0K
KworCS8qCisJICogU2VxdWVuY2UgdG8gd3JpdGUgUFdNRElWOgorCSAqCWFkZHJlc3MJCWRhdGEK
KwkgKgkweEYzCQkweEFBICAgQ01EMiBVbmxvY2sKKwkgKgkweDAwCQkweDAxICAgRW50ZXIgQ01E
MiBwYWdlIDAKKwkgKgkwWDdECQkweDAxICAgTm8gcmVsb2FkIE1UUCBvZiBDTUQyIFAxCisJICoJ
MHgyMgkJUFdNRElWCisJICoJMHg3RgkJMHhBQSAgIENNRDIgcGFnZSAxIGxvY2sKKwkgKi8KKwlw
YXIgPSAweGFhOworCXJldCA9IG1pcGlfZHNpX2Rjc193cml0ZShkc2ksIDB4ZjMsICZwYXIsIDEp
OworCWlmIChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoYWN4LT5kZXYsCisJCQkgICAgICAi
ZmFpbGVkIHRvIHVubG9jayBDTUQgMiAoJWQpXG4iLAorCQkJICAgICAgcmV0KTsKKwkJcmV0dXJu
IHJldDsKKwl9CisJcGFyID0gMHgwMTsKKwlyZXQgPSBtaXBpX2RzaV9kY3Nfd3JpdGUoZHNpLCAw
eDAwLCAmcGFyLCAxKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGFjeC0+ZGV2
LAorCQkJICAgICAgImZhaWxlZCB0byBlbnRlciBwYWdlIDEgKCVkKVxuIiwKKwkJCSAgICAgIHJl
dCk7CisJCXJldHVybiByZXQ7CisJfQorCXBhciA9IDB4MDE7CisJcmV0ID0gbWlwaV9kc2lfZGNz
X3dyaXRlKGRzaSwgMHg3ZCwgJnBhciwgMSk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RFVl9F
UlJPUihhY3gtPmRldiwKKwkJCSAgICAgICJmYWlsZWQgdG8gZGlzYWJsZSBNVFAgcmVsb2FkICgl
ZClcbiIsCisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwlyZXQgPSBtaXBpX2Rz
aV9kY3Nfd3JpdGUoZHNpLCAweDIyLCAmcHdtX2RpdiwgMSk7CisJaWYgKHJldCA8IDApIHsKKwkJ
RFJNX0RFVl9FUlJPUihhY3gtPmRldiwKKwkJCSAgICAgICJmYWlsZWQgdG8gc2V0IFBXTSBkaXZp
c29yICglZClcbiIsCisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwlwYXIgPSAw
eGFhOworCXJldCA9IG1pcGlfZHNpX2Rjc193cml0ZShkc2ksIDB4N2YsICZwYXIsIDEpOworCWlm
IChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoYWN4LT5kZXYsCisJCQkgICAgICAiZmFpbGVk
IHRvIGxvY2sgQ01EIDIgKCVkKVxuIiwKKwkJCSAgICAgIHJldCk7CisJCXJldHVybiByZXQ7CisJ
fQorCisJLyogRW5hYmxlIGJhY2tsaWdodCAqLworCXBhciA9IDB4MjQ7CisJcmV0ID0gbWlwaV9k
c2lfZGNzX3dyaXRlKGRzaSwgTUlQSV9EQ1NfV1JJVEVfQ09OVFJPTF9ESVNQTEFZLAorCQkJCSAm
cGFyLCAxKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGFjeC0+ZGV2LAorCQkJ
ICAgICAgImZhaWxlZCB0byBlbmFibGUgZGlzcGxheSBiYWNrbGlnaHQgKCVkKVxuIiwKKwkJCSAg
ICAgIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBj
b25zdCBzdHJ1Y3QgYmFja2xpZ2h0X29wcyBhY3g0MjRha3BfYmxfb3BzID0geworCS51cGRhdGVf
c3RhdHVzID0gYWN4NDI0YWtwX3NldF9icmlnaHRuZXNzLAorfTsKKworc3RhdGljIGludCBhY3g0
MjRha3BfcmVhZF9pZChzdHJ1Y3QgYWN4NDI0YWtwICphY3gpCit7CisJc3RydWN0IG1pcGlfZHNp
X2RldmljZSAqZHNpID0gdG9fbWlwaV9kc2lfZGV2aWNlKGFjeC0+ZGV2KTsKKwl1OCBoZWFkZXIs
IHZlcnNpb24sIGlkOworCXUxNiB2YWw7CisJaW50IHJldDsKKworCXJldCA9IG1pcGlfZHNpX2Rj
c19yZWFkKGRzaSwgQUNYNDI0X0RDU19SRUFEX0lEMSwgJmhlYWRlciwgMSk7CisJaWYgKHJldCA8
IDApIHsKKwkJRFJNX0RFVl9FUlJPUihhY3gtPmRldiwgImNvdWxkIG5vdCByZWFkIElEIGhlYWRl
ciBieXRlXG4iKTsKKwkJcmV0dXJuIHJldDsKKwl9CisJcmV0ID0gbWlwaV9kc2lfZGNzX3JlYWQo
ZHNpLCBBQ1g0MjRfRENTX1JFQURfSUQyLCAmaWQsIDEpOworCWlmIChyZXQgPCAwKSB7CisJCURS
TV9ERVZfRVJST1IoYWN4LT5kZXYsICJjb3VsZCBub3QgcmVhZCBkZXZpY2UgSUQgYnl0ZVxuIik7
CisJCXJldHVybiByZXQ7CisJfQorCXJldCA9IG1pcGlfZHNpX2Rjc19yZWFkKGRzaSwgQUNYNDI0
X0RDU19SRUFEX0lEMywgJnZlcnNpb24sIDEpOworCWlmIChyZXQgPCAwKSB7CisJCURSTV9ERVZf
RVJST1IoYWN4LT5kZXYsICJjb3VsZCBub3QgcmVhZCB2ZXJzaW9uIGJ5dGVcbiIpOworCQlyZXR1
cm4gcmV0OworCX0KKworCWlmIChoZWFkZXIgPT0gMHgwMCkgeworCQlEUk1fREVWX0VSUk9SKGFj
eC0+ZGV2LCAiZGV2aWNlIElEIGhlYWRlciBpcyB6ZXJvXG4iKTsKKwkJcmV0dXJuIC1FTk9ERVY7
CisJfQorCisJdmFsID0gKGlkIDw8IDgpIHwgdmVyc2lvbjsKKwlzd2l0Y2ggKHZhbCkgeworCWNh
c2UgRElTUExBWV9TT05ZX0FDWDQyNEFLUF9JRDE6CisJY2FzZSBESVNQTEFZX1NPTllfQUNYNDI0
QUtQX0lEMjoKKwljYXNlIERJU1BMQVlfU09OWV9BQ1g0MjRBS1BfSUQzOgorCQlEUk1fREVWX0lO
Rk8oYWN4LT5kZXYsICJwYW5lbCBJRCAlMDJ4LCB2ZXJzaW9uOiAlMDJ4XG4iLAorCQkJICAgICBp
ZCwgdmVyc2lvbik7CisJCWJyZWFrOworCWRlZmF1bHQ6CisJCURSTV9ERVZfSU5GTyhhY3gtPmRl
diwgInVua25vd24gcGFuZWwgSUQgJTAyeCwgdmVyc2lvbjogJTAyeFxuIiwKKwkJCSAgICAgaWQs
IHZlcnNpb24pOworCQlicmVhazsKKwl9CisJYWN4LT52ZXJzaW9uID0gdmVyc2lvbjsKKworCXJl
dHVybiAwOworfQorCitzdGF0aWMgaW50IGFjeDQyNGFrcF9wb3dlcl9vbihzdHJ1Y3QgYWN4NDI0
YWtwICphY3gpCit7CisJaW50IHJldDsKKworCXJldCA9IHJlZ3VsYXRvcl9lbmFibGUoYWN4LT5z
dXBwbHkpOworCWlmIChyZXQpIHsKKwkJRFJNX0RFVl9FUlJPUihhY3gtPmRldiwgImZhaWxlZCB0
byBlbmFibGUgc3VwcGx5ICglZClcbiIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJLyog
QXNzZXJ0IFJFU0VUICovCisJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGFjeC0+cmVzZXRfZ3Bp
bywgMSk7CisJdWRlbGF5KDIwKTsKKwkvKiBEZS1hc3NlcnQgUkVTRVQgKi8KKwlncGlvZF9zZXRf
dmFsdWVfY2Fuc2xlZXAoYWN4LT5yZXNldF9ncGlvLCAwKTsKKwltc2xlZXAoMTEpOworCisJcmV0
dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgYWN4NDI0YWtwX3ByZXBhcmUoc3RydWN0IGRybV9wYW5l
bCAqcGFuZWwpCit7CisJc3RydWN0IGFjeDQyNGFrcCAqYWN4ID0gcGFuZWxfdG9fYWN4NDI0YWtw
KHBhbmVsKTsKKwlzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kgPSB0b19taXBpX2RzaV9kZXZp
Y2UoYWN4LT5kZXYpOworCWNvbnN0IHU4IG1kZGkgPSAzOworCWludCByZXQ7CisKKwlyZXQgPSBh
Y3g0MjRha3BfcG93ZXJfb24oYWN4KTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJLyog
RW5hYmUgdGVhcmluZyBtb2RlOiBzZW5kIFRFICh0ZWFyaW5nIGVmZmVjdCkgYXQgVkJMQU5LICov
CisJcmV0ID0gbWlwaV9kc2lfZGNzX3NldF90ZWFyX29uKGRzaSwKKwkJCQkgICAgICAgTUlQSV9E
U0lfRENTX1RFQVJfTU9ERV9WQkxBTkspOworCWlmIChyZXQpIHsKKwkJRFJNX0RFVl9FUlJPUihh
Y3gtPmRldiwgImZhaWxlZCB0byBlbmFibGUgdmJsYW5rIFRFICglZClcbiIsCisJCQkgICAgICBy
ZXQpOworCQlyZXR1cm4gcmV0OworCX0KKworCS8qIFNldCBNRERJICovCisJcmV0ID0gbWlwaV9k
c2lfZGNzX3dyaXRlKGRzaSwgTUlQSV9EU0lfRENTX1NFVF9NRERJLAorCQkJCSAmbWRkaSwgc2l6
ZW9mKG1kZGkpKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGFjeC0+ZGV2LCAi
ZmFpbGVkIHRvIHNldCBNRERJICglZClcbiIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJ
LyogRXhpdCBzbGVlcCBtb2RlICovCisJcmV0ID0gbWlwaV9kc2lfZGNzX2V4aXRfc2xlZXBfbW9k
ZShkc2kpOworCWlmIChyZXQpIHsKKwkJRFJNX0RFVl9FUlJPUihhY3gtPmRldiwgImZhaWxlZCB0
byBleGl0IHNsZWVwIG1vZGUgKCVkKVxuIiwKKwkJCSAgICAgIHJldCk7CisJCXJldHVybiByZXQ7
CisJfQorCW1zbGVlcCgxNDApOworCisJcmV0ID0gbWlwaV9kc2lfZGNzX3NldF9kaXNwbGF5X29u
KGRzaSk7CisJaWYgKHJldCkgeworCQlEUk1fREVWX0VSUk9SKGFjeC0+ZGV2LCAiZmFpbGVkIHRv
IHR1cm4gZGlzcGxheSBvbiAoJWQpXG4iLAorCQkJICAgICAgcmV0KTsKKwkJcmV0dXJuIHJldDsK
Kwl9CisJaWYgKGFjeC0+dmlkZW9fbW9kZSkgeworCQkvKiBJbiB2aWRlbyBtb2RlIHR1cm4gcGVy
aXBoZXJhbCBvbiAqLworCQlyZXQgPSBtaXBpX2RzaV90dXJuX29uX3BlcmlwaGVyYWwoZHNpKTsK
KwkJaWYgKHJldCkgeworCQkJZGV2X2VycihhY3gtPmRldiwgImZhaWxlZCB0byB0dXJuIG9uIHBl
cmlwaGVyYWxcbiIpOworCQkJcmV0dXJuIHJldDsKKwkJfQorCX0KKworCWFjeC0+YmwtPnByb3Bz
LnBvd2VyID0gRkJfQkxBTktfTk9STUFMOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lk
IGFjeDQyNGFrcF9wb3dlcl9vZmYoc3RydWN0IGFjeDQyNGFrcCAqYWN4KQoreworCS8qIEFzc2Vy
dCBSRVNFVCAqLworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChhY3gtPnJlc2V0X2dwaW8sIDEp
OworCW1zbGVlcCgxMSk7CisKKwlyZWd1bGF0b3JfZGlzYWJsZShhY3gtPnN1cHBseSk7Cit9CisK
K3N0YXRpYyBpbnQgYWN4NDI0YWtwX3VucHJlcGFyZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkK
K3sKKwlzdHJ1Y3QgYWN4NDI0YWtwICphY3ggPSBwYW5lbF90b19hY3g0MjRha3AocGFuZWwpOwor
CXN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRzaSA9IHRvX21pcGlfZHNpX2RldmljZShhY3gtPmRl
dik7CisJdTggcGFyOworCWludCByZXQ7CisKKwkvKiBEaXNhYmxlIGJhY2tsaWdodCAqLworCXBh
ciA9IDB4MDA7CisJcmV0ID0gbWlwaV9kc2lfZGNzX3dyaXRlKGRzaSwgTUlQSV9EQ1NfV1JJVEVf
Q09OVFJPTF9ESVNQTEFZLAorCQkJCSAmcGFyLCAxKTsKKwlpZiAocmV0KSB7CisJCURSTV9ERVZf
RVJST1IoYWN4LT5kZXYsCisJCQkgICAgICAiZmFpbGVkIHRvIGRpc2FibGUgZGlzcGxheSBiYWNr
bGlnaHQgKCVkKVxuIiwKKwkJCSAgICAgIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJcmV0
ID0gbWlwaV9kc2lfZGNzX3NldF9kaXNwbGF5X29mZihkc2kpOworCWlmIChyZXQpIHsKKwkJRFJN
X0RFVl9FUlJPUihhY3gtPmRldiwgImZhaWxlZCB0byB0dXJuIGRpc3BsYXkgb2ZmICglZClcbiIs
CisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKworCS8qIEVudGVyIHNsZWVwIG1v
ZGUgKi8KKwlyZXQgPSBtaXBpX2RzaV9kY3NfZW50ZXJfc2xlZXBfbW9kZShkc2kpOworCWlmIChy
ZXQpIHsKKwkJRFJNX0RFVl9FUlJPUihhY3gtPmRldiwgImZhaWxlZCB0byBlbnRlciBzbGVlcCBt
b2RlICglZClcbiIsCisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwltc2xlZXAo
ODUpOworCisJYWN4NDI0YWtwX3Bvd2VyX29mZihhY3gpOworCWFjeC0+YmwtPnByb3BzLnBvd2Vy
ID0gRkJfQkxBTktfUE9XRVJET1dOOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgYWN4
NDI0YWtwX2VuYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgYWN4NDI0
YWtwICphY3ggPSBwYW5lbF90b19hY3g0MjRha3AocGFuZWwpOworCisJYWN4LT5ibC0+cHJvcHMu
cG93ZXIgPSBGQl9CTEFOS19VTkJMQU5LOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQg
YWN4NDI0YWtwX2Rpc2FibGUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJc3RydWN0IGFj
eDQyNGFrcCAqYWN4ID0gcGFuZWxfdG9fYWN4NDI0YWtwKHBhbmVsKTsKKworCWFjeC0+YmwtPnBy
b3BzLnBvd2VyID0gRkJfQkxBTktfTk9STUFMOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBp
bnQgYWN4NDI0YWtwX2dldF9tb2RlcyhzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1
Y3QgYWN4NDI0YWtwICphY3ggPSBwYW5lbF90b19hY3g0MjRha3AocGFuZWwpOworCXN0cnVjdCBk
cm1fY29ubmVjdG9yICpjb25uZWN0b3IgPSBwYW5lbC0+Y29ubmVjdG9yOworCXN0cnVjdCBkcm1f
ZGlzcGxheV9tb2RlICptb2RlOworCisJaWYgKGFjeC0+dmlkZW9fbW9kZSkKKwkJbW9kZSA9IGRy
bV9tb2RlX2R1cGxpY2F0ZShwYW5lbC0+ZHJtLAorCQkJCQkgICZzb255X2FjeDQyNGFrcF92aWRf
bW9kZSk7CisJZWxzZQorCQltb2RlID0gZHJtX21vZGVfZHVwbGljYXRlKHBhbmVsLT5kcm0sCisJ
CQkJCSAgJnNvbnlfYWN4NDI0YWtwX2NtZF9tb2RlKTsKKwlpZiAoIW1vZGUpIHsKKwkJRFJNX0VS
Uk9SKCJiYWQgbW9kZSBvciBmYWlsZWQgdG8gYWRkIG1vZGVcbiIpOworCQlyZXR1cm4gLUVJTlZB
TDsKKwl9CisJZHJtX21vZGVfc2V0X25hbWUobW9kZSk7CisJbW9kZS0+dHlwZSA9IERSTV9NT0RF
X1RZUEVfRFJJVkVSIHwgRFJNX01PREVfVFlQRV9QUkVGRVJSRUQ7CisKKwljb25uZWN0b3ItPmRp
c3BsYXlfaW5mby53aWR0aF9tbSA9IG1vZGUtPndpZHRoX21tOworCWNvbm5lY3Rvci0+ZGlzcGxh
eV9pbmZvLmhlaWdodF9tbSA9IG1vZGUtPmhlaWdodF9tbTsKKworCWRybV9tb2RlX3Byb2JlZF9h
ZGQoY29ubmVjdG9yLCBtb2RlKTsKKworCXJldHVybiAxOyAvKiBOdW1iZXIgb2YgbW9kZXMgKi8K
K30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcGFuZWxfZnVuY3MgYWN4NDI0YWtwX2RybV9m
dW5jcyA9IHsKKwkuZGlzYWJsZSA9IGFjeDQyNGFrcF9kaXNhYmxlLAorCS51bnByZXBhcmUgPSBh
Y3g0MjRha3BfdW5wcmVwYXJlLAorCS5wcmVwYXJlID0gYWN4NDI0YWtwX3ByZXBhcmUsCisJLmVu
YWJsZSA9IGFjeDQyNGFrcF9lbmFibGUsCisJLmdldF9tb2RlcyA9IGFjeDQyNGFrcF9nZXRfbW9k
ZXMsCit9OworCitzdGF0aWMgaW50IGFjeDQyNGFrcF9wcm9iZShzdHJ1Y3QgbWlwaV9kc2lfZGV2
aWNlICpkc2kpCit7CisJc3RydWN0IGRldmljZSAqZGV2ID0gJmRzaS0+ZGV2OworCXN0cnVjdCBh
Y3g0MjRha3AgKmFjeDsKKwlpbnQgcmV0OworCXVuc2lnbmVkIGludCBpOworCisJYWN4ID0gZGV2
bV9remFsbG9jKGRldiwgc2l6ZW9mKHN0cnVjdCBhY3g0MjRha3ApLCBHRlBfS0VSTkVMKTsKKwlp
ZiAoIWFjeCkKKwkJcmV0dXJuIC1FTk9NRU07CisJYWN4LT52aWRlb19tb2RlID0gb2ZfcHJvcGVy
dHlfcmVhZF9ib29sKGRldi0+b2Zfbm9kZSwKKwkJCQkJCSJlbmZvcmNlLXZpZGVvLW1vZGUiKTsK
KworCW1pcGlfZHNpX3NldF9kcnZkYXRhKGRzaSwgYWN4KTsKKwlhY3gtPmRldiA9IGRldjsKKwor
CWRzaS0+bGFuZXMgPSAyOworCWRzaS0+Zm9ybWF0ID0gTUlQSV9EU0lfRk1UX1JHQjg4ODsKKwkv
KgorCSAqIEZJWE1FOiB0aGVzZSBjb21lIGZyb20gdGhlIFNULUVyaWNzc29uIHZlbmRvciBkcml2
ZXIgZm9yIHRoZQorCSAqIEhSRUY1MjAgYW5kIHNlZW1zIHRvIHJlZmxlY3QgbGltaXRhdGlvbnMg
aW4gdGhlIFBMTHMgb24gdGhhdAorCSAqIHBsYXRmb3JtLCBpZiB5b3UgaGF2ZSB0aGUgZGF0YXNo
ZWV0LCBwbGVhc2UgY3Jvc3MtY2hlY2sgdGhlCisJICogYWN0dWFsIG1heCByYXRlcy4KKwkgKi8K
Kwlkc2ktPmxwX3JhdGUgPSAxOTIwMDAwMDsKKwlkc2ktPmhzX3JhdGUgPSA0MjAxNjAwMDA7CisK
KwlpZiAoYWN4LT52aWRlb19tb2RlKQorCQkvKiBCdXJzdCBtb2RlIHVzaW5nIGV2ZW50IGZvciBz
eW5jICovCisJCWRzaS0+bW9kZV9mbGFncyA9CisJCQlNSVBJX0RTSV9NT0RFX1ZJREVPIHwKKwkJ
CU1JUElfRFNJX01PREVfVklERU9fQlVSU1Q7CisJZWxzZQorCQlkc2ktPm1vZGVfZmxhZ3MgPQor
CQkJTUlQSV9EU0lfQ0xPQ0tfTk9OX0NPTlRJTlVPVVMgfAorCQkJTUlQSV9EU0lfTU9ERV9FT1Rf
UEFDS0VUOworCisJYWN4LT5zdXBwbHkgPSBkZXZtX3JlZ3VsYXRvcl9nZXQoZGV2LCAidmRkaSIp
OworCWlmIChJU19FUlIoYWN4LT5zdXBwbHkpKQorCQlyZXR1cm4gUFRSX0VSUihhY3gtPnN1cHBs
eSk7CisKKwkvKiBUaGlzIGFzc2VydHMgUkVTRVQgYnkgZGVmYXVsdCAqLworCWFjeC0+cmVzZXRf
Z3BpbyA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlvbmFsKGRldiwgInJlc2V0IiwKKwkJCQkJCSBHUElP
RF9PVVRfSElHSCk7CisJaWYgKElTX0VSUihhY3gtPnJlc2V0X2dwaW8pKSB7CisJCXJldCA9IFBU
Ul9FUlIoYWN4LT5yZXNldF9ncGlvKTsKKwkJaWYgKHJldCAhPSAtRVBST0JFX0RFRkVSKQorCQkJ
RFJNX0RFVl9FUlJPUihkZXYsICJmYWlsZWQgdG8gcmVxdWVzdCBHUElPICglZClcbiIsCisJCQkJ
ICAgICAgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlkcm1fcGFuZWxfaW5pdCgmYWN4LT5w
YW5lbCk7CisJYWN4LT5wYW5lbC5kZXYgPSBkZXY7CisJYWN4LT5wYW5lbC5mdW5jcyA9ICZhY3g0
MjRha3BfZHJtX2Z1bmNzOworCisJYWN4LT5ibCA9IGRldm1fYmFja2xpZ2h0X2RldmljZV9yZWdp
c3RlcihkZXYsICJhY3g0MjRha3AiLCBkZXYsIGFjeCwKKwkJCQkJCSAmYWN4NDI0YWtwX2JsX29w
cywgTlVMTCk7CisJaWYgKElTX0VSUihhY3gtPmJsKSkgeworCQlEUk1fREVWX0VSUk9SKGRldiwg
ImZhaWxlZCB0byByZWdpc3RlciBiYWNrbGlnaHQgZGV2aWNlXG4iKTsKKwkJcmV0dXJuIFBUUl9F
UlIoYWN4LT5ibCk7CisJfQorCWFjeC0+YmwtPnByb3BzLm1heF9icmlnaHRuZXNzID0gMTAyMzsK
KwlhY3gtPmJsLT5wcm9wcy5icmlnaHRuZXNzID0gNTEyOworCWFjeC0+YmwtPnByb3BzLnBvd2Vy
ID0gRkJfQkxBTktfUE9XRVJET1dOOworCisJcmV0ID0gZHJtX3BhbmVsX2FkZCgmYWN4LT5wYW5l
bCk7CisJaWYgKHJldCA8IDApCisJCXJldHVybiByZXQ7CisKKwlyZXQgPSBhY3g0MjRha3BfcG93
ZXJfb24oYWN4KTsKKwlpZiAocmV0KSB7CisJCURSTV9ERVZfRVJST1IoZGV2LCAiZmFpbGVkIHRv
IHBvd2VyIHVwIGRpc3BsYXlcbiIpOworCQlnb3RvIG91dF9yZW1vdmU7CisJfQorCisJLyogVHJ5
IDUgdGltZXMgdG8gcmVhZCB0aGUgZGV2aWNlIElEICovCisJZm9yIChpID0gMDsgaSA8IDU7IGkr
KykgeworCQlyZXQgPSBhY3g0MjRha3BfcmVhZF9pZChhY3gpOworCQlpZiAoIXJldCkKKwkJCWJy
ZWFrOworCX0KKworCWlmIChyZXQpIHsKKwkJRFJNX0RFVl9FUlJPUihhY3gtPmRldiwgImZhaWxl
ZCB0byByZWFkIHBhbmVsIElEICglZClcbiIsIHJldCk7CisJCWdvdG8gb3V0X3Bvd2Vyb2ZmOwor
CX0KKwlhY3g0MjRha3BfcG93ZXJfb2ZmKGFjeCk7CisKKwlyZXQgPSBtaXBpX2RzaV9hdHRhY2go
ZHNpKTsKKwlpZiAocmV0IDwgMCkKKwkJZ290byBvdXRfcG93ZXJvZmY7CisKKwlyZXR1cm4gMDsK
Kworb3V0X3Bvd2Vyb2ZmOgorCWFjeDQyNGFrcF9wb3dlcl9vZmYoYWN4KTsKK291dF9yZW1vdmU6
CisJZHJtX3BhbmVsX3JlbW92ZSgmYWN4LT5wYW5lbCk7CisJcmV0dXJuIHJldDsKK30KKworc3Rh
dGljIGludCBhY3g0MjRha3BfcmVtb3ZlKHN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRzaSkKK3sK
KwlzdHJ1Y3QgYWN4NDI0YWtwICphY3ggPSBtaXBpX2RzaV9nZXRfZHJ2ZGF0YShkc2kpOworCisJ
bWlwaV9kc2lfZGV0YWNoKGRzaSk7CisJZHJtX3BhbmVsX3JlbW92ZSgmYWN4LT5wYW5lbCk7CisK
KwlyZXR1cm4gMDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgYWN4NDI0
YWtwX29mX21hdGNoW10gPSB7CisJeyAuY29tcGF0aWJsZSA9ICJzb255LGFjeDQyNGFrcCIgfSwK
Kwl7IH0KK307CitNT0RVTEVfREVWSUNFX1RBQkxFKG9mLCBhY3g0MjRha3Bfb2ZfbWF0Y2gpOwor
CitzdGF0aWMgc3RydWN0IG1pcGlfZHNpX2RyaXZlciBhY3g0MjRha3BfZHJpdmVyID0geworCS5w
cm9iZSA9IGFjeDQyNGFrcF9wcm9iZSwKKwkucmVtb3ZlID0gYWN4NDI0YWtwX3JlbW92ZSwKKwku
ZHJpdmVyID0geworCQkubmFtZSA9ICJwYW5lbC1zb255LWFjeDQyNGFrcCIsCisJCS5vZl9tYXRj
aF90YWJsZSA9IGFjeDQyNGFrcF9vZl9tYXRjaCwKKwl9LAorfTsKK21vZHVsZV9taXBpX2RzaV9k
cml2ZXIoYWN4NDI0YWtwX2RyaXZlcik7CisKK01PRFVMRV9BVVRIT1IoIkxpbnVzIFdhbGxlaSA8
bGludXMud2FsbGVpakBsaW5hcm8ub3JnPiIpOworTU9EVUxFX0RFU0NSSVBUSU9OKCJNSVBJLURT
SSBTb255IGFjeDQyNGFrcCBQYW5lbCBEcml2ZXIiKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIi
KTsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvdmlkZW8vbWlwaV9kaXNwbGF5LmggYi9pbmNsdWRlL3Zp
ZGVvL21pcGlfZGlzcGxheS5oCmluZGV4IGNiYTU3YTY3OGRhZi4uY2Y5OWM2YTUxOWQ1IDEwMDY0
NAotLS0gYS9pbmNsdWRlL3ZpZGVvL21pcGlfZGlzcGxheS5oCisrKyBiL2luY2x1ZGUvdmlkZW8v
bWlwaV9kaXNwbGF5LmgKQEAgLTEyNSw2ICsxMjUsNyBAQCBlbnVtIHsKIAlNSVBJX0RDU19HRVRf
Q0FCQ19NSU5fQlJJR0hUTkVTUyA9IDB4NUYsCS8qIE1JUEkgRENTIDEuMyAqLwogCU1JUElfRENT
X1JFQURfRERCX1NUQVJUCQk9IDB4QTEsCiAJTUlQSV9EQ1NfUkVBRF9EREJfQ09OVElOVUUJPSAw
eEE4LAorCU1JUElfRFNJX0RDU19TRVRfTURESQkJPSAweEFFLAogfTsKIAogLyogTUlQSSBEQ1Mg
cGl4ZWwgZm9ybWF0cyAqLwotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9kcmktZGV2ZWw=
