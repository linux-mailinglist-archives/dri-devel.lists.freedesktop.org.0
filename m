Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 98C0355DCA
	for <lists+dri-devel@lfdr.de>; Wed, 26 Jun 2019 03:37:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5CE4F6E1C0;
	Wed, 26 Jun 2019 01:37:13 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qt1-x841.google.com (mail-qt1-x841.google.com
 [IPv6:2607:f8b0:4864:20::841])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D21D56E1C0
 for <dri-devel@lists.freedesktop.org>; Wed, 26 Jun 2019 01:37:11 +0000 (UTC)
Received: by mail-qt1-x841.google.com with SMTP id y57so674540qtk.4
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 18:37:11 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=MTm41ch/IfvllWh6ceCA6B/jdUDfYL6v6ai7er0SEjM=;
 b=PVYDhQYREz82T/qvxE2Jet0KNn7CPlD/rQCySufd54sWy3jnl8UaE1RVFWOhBstBAL
 msKNqjsRtyOdXE90RwWWCEWZdnO1KELKGm/cH14QgFk5z2+9cDSJl2oIKQWQ/X8kf+Rn
 M22KJPz6H5TXX8w9NpCa4NCWG+hzcByOYuqgIUjh3gNNG8ehhokitmyL7YBQnPQBZzeH
 D1n4YiZKMYHJSBBDyntM925R0x4EgHSqh3InEGMzJ2arrmk8DexUMypyj1pwlKj139gE
 urrUM27JYoZPuckDfX4BO3P+NCsw53T/8QZOUE9B/ddyEYs/1py0/ioCYEogUHiGqmdN
 mBuw==
X-Gm-Message-State: APjAAAXi7eNfh4i5xFBDn5aMMr+98dv8Oc672tYQ8bkMs/QKtIcbwdmf
 Nd6mpM3wV7Tp/gq8tKQ6Jbo=
X-Google-Smtp-Source: APXvYqzxA+g6e5QrKilO8wnViqL2u7CvVy8VVi4GfIy0gRitpkA2gxLb8qoJ+j6lZ3+IlRBQ6zsYWA==
X-Received: by 2002:a0c:8af0:: with SMTP id 45mr1221276qvw.111.1561513030816; 
 Tue, 25 Jun 2019 18:37:10 -0700 (PDT)
Received: from smtp.gmail.com ([187.121.151.146])
 by smtp.gmail.com with ESMTPSA id k123sm8562327qkf.13.2019.06.25.18.37.07
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Tue, 25 Jun 2019 18:37:10 -0700 (PDT)
Date: Tue, 25 Jun 2019 22:37:05 -0300
From: Rodrigo Siqueira <rodrigosiqueiramelo@gmail.com>
To: Brian Starkey <brian.starkey@arm.com>,
 Liviu Dudau <liviu.dudau@arm.com>, Daniel Vetter <daniel@ffwll.ch>,
 Haneen Mohammed <hamohammed.sa@gmail.com>, Simon Ser <contact@emersion.fr>
Subject: [PATCH V3 2/5] drm/vkms: Rename vkms_crc.c into vkms_composer.c
Message-ID: <dea62063077ebf5cc1dfce8876e56788d15367e6.1561491964.git.rodrigosiqueiramelo@gmail.com>
References: <cover.1561491964.git.rodrigosiqueiramelo@gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <cover.1561491964.git.rodrigosiqueiramelo@gmail.com>
User-Agent: NeoMutt/20180716
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=MTm41ch/IfvllWh6ceCA6B/jdUDfYL6v6ai7er0SEjM=;
 b=PEBeUKwWSA1k0XFj/VGoMqYYtgXCq2FZV37WLIOLfobE7ShUVuJZhGl5Ubftuzh6ga
 0ZHGv0Je291rq/UHeMPkuUwLnk62xQngAy36yNf+oOp/BjZkO15pmfrZf6hlIt5csA48
 GaxtCsT1woEFmXGmIxFNuYbjZw8SxLMQvOlaQYYvhXhd5Yl205UbcNdrmGyfCUymG1b7
 TE6fMXA79m2QAeBd8YsiXkj+5/7XhwZIrCY7bEjIPnn4OKFSPSc05/vO+aAtinvrYnpc
 1Gg/c20QY6TMJj57P5f7gEWAACMB1NcWSUmjRIJFprKp7OoSqy+SH+/UuQpnmcJcaPhP
 tSzg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QXMgYSBwcmVwYXJhdGlvbiB3b3JrIGZvciBpbnRyb2R1Y2luZyB3cml0ZWJhY2sgdG8gdmttcywg
dGhpcyBwYXRjaApyZW5hbWVzIHRoZSBmaWxlIHZrbXNfY3JjLmMgaW50byB2a21zX2NvbXBvc2Vy
LmMuIEFjY29yZGluZ2x5LCBpdCBhbHNvCmFkanVzdHMgdGhlIGZ1bmN0aW9ucyBhbmQgZGF0YSBz
dHJ1Y3R1cmVzIHRvIG1hdGNoIHRoZSBjaGFuZ2VzLgoKTm8gZnVuY3Rpb25hbCBjaGFuZ2UuCgpT
aWduZWQtb2ZmLWJ5OiBSb2RyaWdvIFNpcXVlaXJhIDxyb2RyaWdvc2lxdWVpcmFtZWxvQGdtYWls
LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vdmttcy9NYWtlZmlsZSAgICAgICAgICAgICAgICAg
fCAgMiArLQogLi4uL2RybS92a21zL3t2a21zX2NyYy5jID0+IHZrbXNfY29tcG9zZXIuY30gIHwg
OTggKysrKysrKysrKy0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19jcnRjLmMg
ICAgICAgICAgICAgIHwgMzAgKysrLS0tCiBkcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2Rydi5j
ICAgICAgICAgICAgICAgfCAgNCArLQogZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuaCAg
ICAgICAgICAgICAgIHwgMjggKysrLS0tCiBkcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX3BsYW5l
LmMgICAgICAgICAgICAgfCAzNiArKystLS0tCiA2IGZpbGVzIGNoYW5nZWQsIDEwMSBpbnNlcnRp
b25zKCspLCA5NyBkZWxldGlvbnMoLSkKIHJlbmFtZSBkcml2ZXJzL2dwdS9kcm0vdmttcy97dmtt
c19jcmMuYyA9PiB2a21zX2NvbXBvc2VyLmN9ICg2NSUpCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3ZrbXMvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vdmttcy9NYWtlZmlsZQppbmRl
eCA4OWYwOWJlYzdiMjMuLjBiNzY3ZDdlZmEyNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L3ZrbXMvTWFrZWZpbGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvTWFrZWZpbGUKQEAgLTEs
NCArMSw0IEBACiAjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkKLXZrbXMt
eSA6PSB2a21zX2Rydi5vIHZrbXNfcGxhbmUubyB2a21zX291dHB1dC5vIHZrbXNfY3J0Yy5vIHZr
bXNfZ2VtLm8gdmttc19jcmMubwordmttcy15IDo9IHZrbXNfZHJ2Lm8gdmttc19wbGFuZS5vIHZr
bXNfb3V0cHV0Lm8gdmttc19jcnRjLm8gdmttc19nZW0ubyB2a21zX2NvbXBvc2VyLm8KIAogb2Jq
LSQoQ09ORklHX0RSTV9WS01TKSArPSB2a21zLm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS92a21zL3ZrbXNfY3JjLmMgYi9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2NvbXBvc2VyLmMK
c2ltaWxhcml0eSBpbmRleCA2NSUKcmVuYW1lIGZyb20gZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmtt
c19jcmMuYwpyZW5hbWUgdG8gZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19jb21wb3Nlci5jCmlu
ZGV4IDMwYjA0OGI2N2EzMi4uZWI3ZWE4YmUxZjk4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vdmttcy92a21zX2NyYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92a21zL3ZrbXNfY29tcG9z
ZXIuYwpAQCAtMTAsMjUgKzEwLDI1IEBACiAgKiBjb21wdXRlX2NyYyAtIENvbXB1dGUgQ1JDIHZh
bHVlIG9uIG91dHB1dCBmcmFtZQogICoKICAqIEB2YWRkcl9vdXQ6IGFkZHJlc3MgdG8gZmluYWwg
ZnJhbWVidWZmZXIKLSAqIEBjcmNfb3V0OiBmcmFtZWJ1ZmZlcidzIG1ldGFkYXRhCisgKiBAY29t
cG9zZXI6IGZyYW1lYnVmZmVyJ3MgbWV0YWRhdGEKICAqCiAgKiByZXR1cm5zIENSQyB2YWx1ZSBj
b21wdXRlZCB1c2luZyBjcmMzMiBvbiB0aGUgdmlzaWJsZSBwb3J0aW9uIG9mCiAgKiB0aGUgZmlu
YWwgZnJhbWVidWZmZXIgYXQgdmFkZHJfb3V0CiAgKi8KLXN0YXRpYyB1aW50MzJfdCBjb21wdXRl
X2NyYyh2b2lkICp2YWRkcl9vdXQsIHN0cnVjdCB2a21zX2NyY19kYXRhICpjcmNfb3V0KQorc3Rh
dGljIHVpbnQzMl90IGNvbXB1dGVfY3JjKHZvaWQgKnZhZGRyX291dCwgc3RydWN0IHZrbXNfY29t
cG9zZXIgKmNvbXBvc2VyKQogewogCWludCBpLCBqLCBzcmNfb2Zmc2V0OwotCWludCB4X3NyYyA9
IGNyY19vdXQtPnNyYy54MSA+PiAxNjsKLQlpbnQgeV9zcmMgPSBjcmNfb3V0LT5zcmMueTEgPj4g
MTY7Ci0JaW50IGhfc3JjID0gZHJtX3JlY3RfaGVpZ2h0KCZjcmNfb3V0LT5zcmMpID4+IDE2Owot
CWludCB3X3NyYyA9IGRybV9yZWN0X3dpZHRoKCZjcmNfb3V0LT5zcmMpID4+IDE2OworCWludCB4
X3NyYyA9IGNvbXBvc2VyLT5zcmMueDEgPj4gMTY7CisJaW50IHlfc3JjID0gY29tcG9zZXItPnNy
Yy55MSA+PiAxNjsKKwlpbnQgaF9zcmMgPSBkcm1fcmVjdF9oZWlnaHQoJmNvbXBvc2VyLT5zcmMp
ID4+IDE2OworCWludCB3X3NyYyA9IGRybV9yZWN0X3dpZHRoKCZjb21wb3Nlci0+c3JjKSA+PiAx
NjsKIAl1MzIgY3JjID0gMDsKIAogCWZvciAoaSA9IHlfc3JjOyBpIDwgeV9zcmMgKyBoX3NyYzsg
KytpKSB7CiAJCWZvciAoaiA9IHhfc3JjOyBqIDwgeF9zcmMgKyB3X3NyYzsgKytqKSB7Ci0JCQlz
cmNfb2Zmc2V0ID0gY3JjX291dC0+b2Zmc2V0Ci0JCQkJICAgICArIChpICogY3JjX291dC0+cGl0
Y2gpCi0JCQkJICAgICArIChqICogY3JjX291dC0+Y3BwKTsKKwkJCXNyY19vZmZzZXQgPSBjb21w
b3Nlci0+b2Zmc2V0CisJCQkJICAgICArIChpICogY29tcG9zZXItPnBpdGNoKQorCQkJCSAgICAg
KyAoaiAqIGNvbXBvc2VyLT5jcHApOwogCQkJLyogWFJHQiBmb3JtYXQgaWdub3JlcyBBbHBoYSBj
aGFubmVsICovCiAJCQltZW1zZXQodmFkZHJfb3V0ICsgc3JjX29mZnNldCArIDI0LCAwLCAgOCk7
CiAJCQljcmMgPSBjcmMzMl9sZShjcmMsIHZhZGRyX291dCArIHNyY19vZmZzZXQsCkBAIC00Myw4
ICs0Myw4IEBAIHN0YXRpYyB1aW50MzJfdCBjb21wdXRlX2NyYyh2b2lkICp2YWRkcl9vdXQsIHN0
cnVjdCB2a21zX2NyY19kYXRhICpjcmNfb3V0KQogICogYmxlbmQgLSBiZWxuZCB2YWx1ZSBhdCB2
YWRkcl9zcmMgd2l0aCB2YWx1ZSBhdCB2YWRkcl9kc3QKICAqIEB2YWRkcl9kc3Q6IGRlc3RpbmF0
aW9uIGFkZHJlc3MKICAqIEB2YWRkcl9zcmM6IHNvdXJjZSBhZGRyZXNzCi0gKiBAY3JjX2RzdDog
ZGVzdGluYXRpb24gZnJhbWVidWZmZXIncyBtZXRhZGF0YQotICogQGNyY19zcmM6IHNvdXJjZSBm
cmFtZWJ1ZmZlcidzIG1ldGFkYXRhCisgKiBAZGVzdF9jb21wb3NlcjogZGVzdGluYXRpb24gZnJh
bWVidWZmZXIncyBtZXRhZGF0YQorICogQHNyY19jb21wb3Nlcjogc291cmNlIGZyYW1lYnVmZmVy
J3MgbWV0YWRhdGEKICAqCiAgKiBCbGVuZCB2YWx1ZSBhdCB2YWRkcl9zcmMgd2l0aCB2YWx1ZSBh
dCB2YWRkcl9kc3QuCiAgKiBDdXJyZW50bHksIHRoaXMgZnVuY3Rpb24gd3JpdGUgdmFsdWUgYXQg
dmFkZHJfc3JjIG9uIHZhbHVlCkBAIC01NSwzMSArNTUsMzEgQEAgc3RhdGljIHVpbnQzMl90IGNv
bXB1dGVfY3JjKHZvaWQgKnZhZGRyX291dCwgc3RydWN0IHZrbXNfY3JjX2RhdGEgKmNyY19vdXQp
CiAgKgkgaW5zdGVhZCBvZiBvdmVyd3JpdGluZyBpdC4KICAqLwogc3RhdGljIHZvaWQgYmxlbmQo
dm9pZCAqdmFkZHJfZHN0LCB2b2lkICp2YWRkcl9zcmMsCi0JCSAgc3RydWN0IHZrbXNfY3JjX2Rh
dGEgKmNyY19kc3QsCi0JCSAgc3RydWN0IHZrbXNfY3JjX2RhdGEgKmNyY19zcmMpCisJCSAgc3Ry
dWN0IHZrbXNfY29tcG9zZXIgKmRlc3RfY29tcG9zZXIsCisJCSAgc3RydWN0IHZrbXNfY29tcG9z
ZXIgKnNyY19jb21wb3NlcikKIHsKIAlpbnQgaSwgaiwgal9kc3QsIGlfZHN0OwogCWludCBvZmZz
ZXRfc3JjLCBvZmZzZXRfZHN0OwogCi0JaW50IHhfc3JjID0gY3JjX3NyYy0+c3JjLngxID4+IDE2
OwotCWludCB5X3NyYyA9IGNyY19zcmMtPnNyYy55MSA+PiAxNjsKKwlpbnQgeF9zcmMgPSBzcmNf
Y29tcG9zZXItPnNyYy54MSA+PiAxNjsKKwlpbnQgeV9zcmMgPSBzcmNfY29tcG9zZXItPnNyYy55
MSA+PiAxNjsKIAotCWludCB4X2RzdCA9IGNyY19zcmMtPmRzdC54MTsKLQlpbnQgeV9kc3QgPSBj
cmNfc3JjLT5kc3QueTE7Ci0JaW50IGhfZHN0ID0gZHJtX3JlY3RfaGVpZ2h0KCZjcmNfc3JjLT5k
c3QpOwotCWludCB3X2RzdCA9IGRybV9yZWN0X3dpZHRoKCZjcmNfc3JjLT5kc3QpOworCWludCB4
X2RzdCA9IHNyY19jb21wb3Nlci0+ZHN0LngxOworCWludCB5X2RzdCA9IHNyY19jb21wb3Nlci0+
ZHN0LnkxOworCWludCBoX2RzdCA9IGRybV9yZWN0X2hlaWdodCgmc3JjX2NvbXBvc2VyLT5kc3Qp
OworCWludCB3X2RzdCA9IGRybV9yZWN0X3dpZHRoKCZzcmNfY29tcG9zZXItPmRzdCk7CiAKIAlp
bnQgeV9saW1pdCA9IHlfc3JjICsgaF9kc3Q7CiAJaW50IHhfbGltaXQgPSB4X3NyYyArIHdfZHN0
OwogCiAJZm9yIChpID0geV9zcmMsIGlfZHN0ID0geV9kc3Q7IGkgPCB5X2xpbWl0OyArK2kpIHsK
IAkJZm9yIChqID0geF9zcmMsIGpfZHN0ID0geF9kc3Q7IGogPCB4X2xpbWl0OyArK2opIHsKLQkJ
CW9mZnNldF9kc3QgPSBjcmNfZHN0LT5vZmZzZXQKLQkJCQkgICAgICsgKGlfZHN0ICogY3JjX2Rz
dC0+cGl0Y2gpCi0JCQkJICAgICArIChqX2RzdCsrICogY3JjX2RzdC0+Y3BwKTsKLQkJCW9mZnNl
dF9zcmMgPSBjcmNfc3JjLT5vZmZzZXQKLQkJCQkgICAgICsgKGkgKiBjcmNfc3JjLT5waXRjaCkK
LQkJCQkgICAgICsgKGogKiBjcmNfc3JjLT5jcHApOworCQkJb2Zmc2V0X2RzdCA9IGRlc3RfY29t
cG9zZXItPm9mZnNldAorCQkJCSAgICAgKyAoaV9kc3QgKiBkZXN0X2NvbXBvc2VyLT5waXRjaCkK
KwkJCQkgICAgICsgKGpfZHN0KysgKiBkZXN0X2NvbXBvc2VyLT5jcHApOworCQkJb2Zmc2V0X3Ny
YyA9IHNyY19jb21wb3Nlci0+b2Zmc2V0CisJCQkJICAgICArIChpICogc3JjX2NvbXBvc2VyLT5w
aXRjaCkKKwkJCQkgICAgICsgKGogKiBzcmNfY29tcG9zZXItPmNwcCk7CiAKIAkJCW1lbWNweSh2
YWRkcl9kc3QgKyBvZmZzZXRfZHN0LAogCQkJICAgICAgIHZhZGRyX3NyYyArIG9mZnNldF9zcmMs
IHNpemVvZih1MzIpKTsKQEAgLTg4LDI1ICs4OCwyNyBAQCBzdGF0aWMgdm9pZCBibGVuZCh2b2lk
ICp2YWRkcl9kc3QsIHZvaWQgKnZhZGRyX3NyYywKIAl9CiB9CiAKLXN0YXRpYyB2b2lkIGNvbXBv
c2VfY3Vyc29yKHN0cnVjdCB2a21zX2NyY19kYXRhICpjdXJzb3JfY3JjLAotCQkJICAgc3RydWN0
IHZrbXNfY3JjX2RhdGEgKnByaW1hcnlfY3JjLCB2b2lkICp2YWRkcl9vdXQpCitzdGF0aWMgdm9p
ZCBjb21wb3NlX2N1cnNvcihzdHJ1Y3Qgdmttc19jb21wb3NlciAqY3Vyc29yX2NvbXBvc2VyLAor
CQkJICAgc3RydWN0IHZrbXNfY29tcG9zZXIgKnByaW1hcnlfY29tcG9zZXIsCisJCQkgICB2b2lk
ICp2YWRkcl9vdXQpCiB7CiAJc3RydWN0IGRybV9nZW1fb2JqZWN0ICpjdXJzb3Jfb2JqOwogCXN0
cnVjdCB2a21zX2dlbV9vYmplY3QgKmN1cnNvcl92a21zX29iajsKIAotCWN1cnNvcl9vYmogPSBk
cm1fZ2VtX2ZiX2dldF9vYmooJmN1cnNvcl9jcmMtPmZiLCAwKTsKKwljdXJzb3Jfb2JqID0gZHJt
X2dlbV9mYl9nZXRfb2JqKCZjdXJzb3JfY29tcG9zZXItPmZiLCAwKTsKIAljdXJzb3Jfdmttc19v
YmogPSBkcm1fZ2VtX3RvX3ZrbXNfZ2VtKGN1cnNvcl9vYmopOwogCiAJaWYgKFdBUk5fT04oIWN1
cnNvcl92a21zX29iai0+dmFkZHIpKQogCQlyZXR1cm47CiAKLQlibGVuZCh2YWRkcl9vdXQsIGN1
cnNvcl92a21zX29iai0+dmFkZHIsIHByaW1hcnlfY3JjLCBjdXJzb3JfY3JjKTsKKwlibGVuZCh2
YWRkcl9vdXQsIGN1cnNvcl92a21zX29iai0+dmFkZHIsCisJICAgICAgcHJpbWFyeV9jb21wb3Nl
ciwgY3Vyc29yX2NvbXBvc2VyKTsKIH0KIAotc3RhdGljIHVpbnQzMl90IF92a21zX2dldF9jcmMo
c3RydWN0IHZrbXNfY3JjX2RhdGEgKnByaW1hcnlfY3JjLAotCQkJICAgICAgc3RydWN0IHZrbXNf
Y3JjX2RhdGEgKmN1cnNvcl9jcmMpCitzdGF0aWMgdWludDMyX3QgX3ZrbXNfZ2V0X2NyYyhzdHJ1
Y3Qgdmttc19jb21wb3NlciAqcHJpbWFyeV9jb21wb3NlciwKKwkJCSAgICAgIHN0cnVjdCB2a21z
X2NvbXBvc2VyICpjdXJzb3JfY29tcG9zZXIpCiB7Ci0Jc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAq
ZmIgPSAmcHJpbWFyeV9jcmMtPmZiOworCXN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0gJnBy
aW1hcnlfY29tcG9zZXItPmZiOwogCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAqZ2VtX29iaiA9IGRy
bV9nZW1fZmJfZ2V0X29iaihmYiwgMCk7CiAJc3RydWN0IHZrbXNfZ2VtX29iamVjdCAqdmttc19v
YmogPSBkcm1fZ2VtX3RvX3ZrbXNfZ2VtKGdlbV9vYmopOwogCXZvaWQgKnZhZGRyX291dCA9IGt6
YWxsb2Modmttc19vYmotPmdlbS5zaXplLCBHRlBfS0VSTkVMKTsKQEAgLTEyNCwxMCArMTI2LDEw
IEBAIHN0YXRpYyB1aW50MzJfdCBfdmttc19nZXRfY3JjKHN0cnVjdCB2a21zX2NyY19kYXRhICpw
cmltYXJ5X2NyYywKIAogCW1lbWNweSh2YWRkcl9vdXQsIHZrbXNfb2JqLT52YWRkciwgdmttc19v
YmotPmdlbS5zaXplKTsKIAotCWlmIChjdXJzb3JfY3JjKQotCQljb21wb3NlX2N1cnNvcihjdXJz
b3JfY3JjLCBwcmltYXJ5X2NyYywgdmFkZHJfb3V0KTsKKwlpZiAoY3Vyc29yX2NvbXBvc2VyKQor
CQljb21wb3NlX2N1cnNvcihjdXJzb3JfY29tcG9zZXIsIHByaW1hcnlfY29tcG9zZXIsIHZhZGRy
X291dCk7CiAKLQljcmMgPSBjb21wdXRlX2NyYyh2YWRkcl9vdXQsIHByaW1hcnlfY3JjKTsKKwlj
cmMgPSBjb21wdXRlX2NyYyh2YWRkcl9vdXQsIHByaW1hcnlfY29tcG9zZXIpOwogCiAJa2ZyZWUo
dmFkZHJfb3V0KTsKIApAQCAtMTM1LDM1ICsxMzcsMzUgQEAgc3RhdGljIHVpbnQzMl90IF92a21z
X2dldF9jcmMoc3RydWN0IHZrbXNfY3JjX2RhdGEgKnByaW1hcnlfY3JjLAogfQogCiAvKioKLSAq
IHZrbXNfY3JjX3dvcmtfaGFuZGxlIC0gb3JkZXJlZCB3b3JrX3N0cnVjdCB0byBjb21wdXRlIENS
QworICogdmttc19jb21wb3Nlcl93b3JrZXIgLSBvcmRlcmVkIHdvcmtfc3RydWN0IHRvIGNvbXB1
dGUgQ1JDCiAgKgogICogQHdvcms6IHdvcmtfc3RydWN0CiAgKgotICogV29yayBoYW5kbGVyIGZv
ciBjb21wdXRpbmcgQ1JDcy4gd29ya19zdHJ1Y3Qgc2NoZWR1bGVkIGluCisgKiBXb3JrIGhhbmRs
ZXIgZm9yIGNvbXBvc2luZyBhbmQgY29tcHV0aW5nIENSQ3MuIHdvcmtfc3RydWN0IHNjaGVkdWxl
ZCBpbgogICogYW4gb3JkZXJlZCB3b3JrcXVldWUgdGhhdCdzIHBlcmlvZGljYWxseSBzY2hlZHVs
ZWQgdG8gcnVuIGJ5CiAgKiBfdmJsYW5rX2hhbmRsZSgpIGFuZCBmbHVzaGVkIGF0IHZrbXNfYXRv
bWljX2NydGNfZGVzdHJveV9zdGF0ZSgpLgogICovCi12b2lkIHZrbXNfY3JjX3dvcmtfaGFuZGxl
KHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKK3ZvaWQgdmttc19jb21wb3Nlcl93b3JrZXIoc3Ry
dWN0IHdvcmtfc3RydWN0ICp3b3JrKQogewogCXN0cnVjdCB2a21zX2NydGNfc3RhdGUgKmNydGNf
c3RhdGUgPSBjb250YWluZXJfb2Yod29yaywKIAkJCQkJCXN0cnVjdCB2a21zX2NydGNfc3RhdGUs
Ci0JCQkJCQljcmNfd29yayk7CisJCQkJCQljb21wb3Nlcl93b3JrKTsKIAlzdHJ1Y3QgZHJtX2Ny
dGMgKmNydGMgPSBjcnRjX3N0YXRlLT5iYXNlLmNydGM7CiAJc3RydWN0IHZrbXNfb3V0cHV0ICpv
dXQgPSBkcm1fY3J0Y190b192a21zX291dHB1dChjcnRjKTsKLQlzdHJ1Y3Qgdmttc19jcmNfZGF0
YSAqcHJpbWFyeV9jcmMgPSBOVUxMOwotCXN0cnVjdCB2a21zX2NyY19kYXRhICpjdXJzb3JfY3Jj
ID0gTlVMTDsKKwlzdHJ1Y3Qgdmttc19jb21wb3NlciAqcHJpbWFyeV9jb21wb3NlciA9IE5VTEw7
CisJc3RydWN0IHZrbXNfY29tcG9zZXIgKmN1cnNvcl9jb21wb3NlciA9IE5VTEw7CiAJdTMyIGNy
YzMyID0gMDsKIAl1NjQgZnJhbWVfc3RhcnQsIGZyYW1lX2VuZDsKIAlib29sIGNyY19wZW5kaW5n
OwogCi0Jc3Bpbl9sb2NrX2lycSgmb3V0LT5jcmNfbG9jayk7CisJc3Bpbl9sb2NrX2lycSgmb3V0
LT5jb21wb3Nlcl9sb2NrKTsKIAlmcmFtZV9zdGFydCA9IGNydGNfc3RhdGUtPmZyYW1lX3N0YXJ0
OwogCWZyYW1lX2VuZCA9IGNydGNfc3RhdGUtPmZyYW1lX2VuZDsKIAljcmNfcGVuZGluZyA9IGNy
dGNfc3RhdGUtPmNyY19wZW5kaW5nOwogCWNydGNfc3RhdGUtPmZyYW1lX3N0YXJ0ID0gMDsKIAlj
cnRjX3N0YXRlLT5mcmFtZV9lbmQgPSAwOwogCWNydGNfc3RhdGUtPmNyY19wZW5kaW5nID0gZmFs
c2U7Ci0Jc3Bpbl91bmxvY2tfaXJxKCZvdXQtPmNyY19sb2NrKTsKKwlzcGluX3VubG9ja19pcnEo
Jm91dC0+Y29tcG9zZXJfbG9jayk7CiAKIAkvKgogCSAqIFdlIHJhY2VkIHdpdGggdGhlIHZibGFu
ayBocnRpbWVyIGFuZCBwcmV2aW91cyB3b3JrIGFscmVhZHkgY29tcHV0ZWQKQEAgLTE3MywxMyAr
MTc1LDEzIEBAIHZvaWQgdmttc19jcmNfd29ya19oYW5kbGUoc3RydWN0IHdvcmtfc3RydWN0ICp3
b3JrKQogCQlyZXR1cm47CiAKIAlpZiAoY3J0Y19zdGF0ZS0+bnVtX2FjdGl2ZV9wbGFuZXMgPj0g
MSkKLQkJcHJpbWFyeV9jcmMgPSBjcnRjX3N0YXRlLT5hY3RpdmVfcGxhbmVzWzBdLT5jcmNfZGF0
YTsKKwkJcHJpbWFyeV9jb21wb3NlciA9IGNydGNfc3RhdGUtPmFjdGl2ZV9wbGFuZXNbMF0tPmNv
bXBvc2VyOwogCiAJaWYgKGNydGNfc3RhdGUtPm51bV9hY3RpdmVfcGxhbmVzID09IDIpCi0JCWN1
cnNvcl9jcmMgPSBjcnRjX3N0YXRlLT5hY3RpdmVfcGxhbmVzWzFdLT5jcmNfZGF0YTsKKwkJY3Vy
c29yX2NvbXBvc2VyID0gY3J0Y19zdGF0ZS0+YWN0aXZlX3BsYW5lc1sxXS0+Y29tcG9zZXI7CiAK
LQlpZiAocHJpbWFyeV9jcmMpCi0JCWNyYzMyID0gX3ZrbXNfZ2V0X2NyYyhwcmltYXJ5X2NyYywg
Y3Vyc29yX2NyYyk7CisJaWYgKHByaW1hcnlfY29tcG9zZXIpCisJCWNyYzMyID0gX3ZrbXNfZ2V0
X2NyYyhwcmltYXJ5X2NvbXBvc2VyLCBjdXJzb3JfY29tcG9zZXIpOwogCiAJLyoKIAkgKiBUaGUg
d29ya2VyIGNhbiBmYWxsIGJlaGluZCB0aGUgdmJsYW5rIGhydGltZXIsIG1ha2Ugc3VyZSB3ZSBj
YXRjaCB1cC4KQEAgLTIzNyw3ICsyMzksNyBAQCBpbnQgdmttc19zZXRfY3JjX3NvdXJjZShzdHJ1
Y3QgZHJtX2NydGMgKmNydGMsIGNvbnN0IGNoYXIgKnNyY19uYW1lKQogCXJldCA9IHZrbXNfY3Jj
X3BhcnNlX3NvdXJjZShzcmNfbmFtZSwgJmVuYWJsZWQpOwogCiAJc3Bpbl9sb2NrX2lycSgmb3V0
LT5sb2NrKTsKLQlvdXQtPmNyY19lbmFibGVkID0gZW5hYmxlZDsKKwlvdXQtPmNvbXBvc2VyX2Vu
YWJsZWQgPSBlbmFibGVkOwogCXNwaW5fdW5sb2NrX2lycSgmb3V0LT5sb2NrKTsKIAogCXJldHVy
biByZXQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2NydGMuYyBiL2Ry
aXZlcnMvZ3B1L2RybS92a21zL3ZrbXNfY3J0Yy5jCmluZGV4IGE2NDg4OTIzNzljMy4uMDRjNmY0
MjUwZGVhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2NydGMuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2NydGMuYwpAQCAtMjQsMTQgKzI0LDE0IEBAIHN0
YXRpYyBlbnVtIGhydGltZXJfcmVzdGFydCB2a21zX3ZibGFua19zaW11bGF0ZShzdHJ1Y3QgaHJ0
aW1lciAqdGltZXIpCiAJaWYgKCFyZXQpCiAJCURSTV9FUlJPUigidmttcyBmYWlsdXJlIG9uIGhh
bmRsaW5nIHZibGFuayIpOwogCi0Jc3RhdGUgPSBvdXRwdXQtPmNyY19zdGF0ZTsKLQlpZiAoc3Rh
dGUgJiYgb3V0cHV0LT5jcmNfZW5hYmxlZCkgeworCXN0YXRlID0gb3V0cHV0LT5jb21wb3Nlcl9z
dGF0ZTsKKwlpZiAoc3RhdGUgJiYgb3V0cHV0LT5jb21wb3Nlcl9lbmFibGVkKSB7CiAJCXU2NCBm
cmFtZSA9IGRybV9jcnRjX2FjY3VyYXRlX3ZibGFua19jb3VudChjcnRjKTsKIAotCQkvKiB1cGRh
dGUgZnJhbWVfc3RhcnQgb25seSBpZiBhIHF1ZXVlZCB2a21zX2NyY193b3JrX2hhbmRsZSgpCisJ
CS8qIHVwZGF0ZSBmcmFtZV9zdGFydCBvbmx5IGlmIGEgcXVldWVkIHZrbXNfY29tcG9zZXJfd29y
a2VyKCkKIAkJICogaGFzIHJlYWQgdGhlIGRhdGEKIAkJICovCi0JCXNwaW5fbG9jaygmb3V0cHV0
LT5jcmNfbG9jayk7CisJCXNwaW5fbG9jaygmb3V0cHV0LT5jb21wb3Nlcl9sb2NrKTsKIAkJaWYg
KCFzdGF0ZS0+Y3JjX3BlbmRpbmcpCiAJCQlzdGF0ZS0+ZnJhbWVfc3RhcnQgPSBmcmFtZTsKIAkJ
ZWxzZQpAQCAtMzksMTEgKzM5LDExIEBAIHN0YXRpYyBlbnVtIGhydGltZXJfcmVzdGFydCB2a21z
X3ZibGFua19zaW11bGF0ZShzdHJ1Y3QgaHJ0aW1lciAqdGltZXIpCiAJCQkJCSBzdGF0ZS0+ZnJh
bWVfc3RhcnQsIGZyYW1lKTsKIAkJc3RhdGUtPmZyYW1lX2VuZCA9IGZyYW1lOwogCQlzdGF0ZS0+
Y3JjX3BlbmRpbmcgPSB0cnVlOwotCQlzcGluX3VubG9jaygmb3V0cHV0LT5jcmNfbG9jayk7CisJ
CXNwaW5fdW5sb2NrKCZvdXRwdXQtPmNvbXBvc2VyX2xvY2spOwogCi0JCXJldCA9IHF1ZXVlX3dv
cmsob3V0cHV0LT5jcmNfd29ya3EsICZzdGF0ZS0+Y3JjX3dvcmspOworCQlyZXQgPSBxdWV1ZV93
b3JrKG91dHB1dC0+Y29tcG9zZXJfd29ya3EsICZzdGF0ZS0+Y29tcG9zZXJfd29yayk7CiAJCWlm
ICghcmV0KQotCQkJRFJNX0RFQlVHX0RSSVZFUigidmttc19jcmNfd29ya19oYW5kbGUgYWxyZWFk
eSBxdWV1ZWRcbiIpOworCQkJRFJNX0RFQlVHX0RSSVZFUigiQ29tcG9zZXIgd29ya2VyIGFscmVh
ZHkgcXVldWVkXG4iKTsKIAl9CiAKIAlzcGluX3VubG9jaygmb3V0cHV0LT5sb2NrKTsKQEAgLTEx
NCw3ICsxMTQsNyBAQCB2a21zX2F0b21pY19jcnRjX2R1cGxpY2F0ZV9zdGF0ZShzdHJ1Y3QgZHJt
X2NydGMgKmNydGMpCiAKIAlfX2RybV9hdG9taWNfaGVscGVyX2NydGNfZHVwbGljYXRlX3N0YXRl
KGNydGMsICZ2a21zX3N0YXRlLT5iYXNlKTsKIAotCUlOSVRfV09SSygmdmttc19zdGF0ZS0+Y3Jj
X3dvcmssIHZrbXNfY3JjX3dvcmtfaGFuZGxlKTsKKwlJTklUX1dPUksoJnZrbXNfc3RhdGUtPmNv
bXBvc2VyX3dvcmssIHZrbXNfY29tcG9zZXJfd29ya2VyKTsKIAogCXJldHVybiAmdmttc19zdGF0
ZS0+YmFzZTsKIH0KQEAgLTEyNiw3ICsxMjYsNyBAQCBzdGF0aWMgdm9pZCB2a21zX2F0b21pY19j
cnRjX2Rlc3Ryb3lfc3RhdGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCiAJX19kcm1fYXRvbWlj
X2hlbHBlcl9jcnRjX2Rlc3Ryb3lfc3RhdGUoc3RhdGUpOwogCi0JV0FSTl9PTih3b3JrX3BlbmRp
bmcoJnZrbXNfc3RhdGUtPmNyY193b3JrKSk7CisJV0FSTl9PTih3b3JrX3BlbmRpbmcoJnZrbXNf
c3RhdGUtPmNvbXBvc2VyX3dvcmspKTsKIAlrZnJlZSh2a21zX3N0YXRlLT5hY3RpdmVfcGxhbmVz
KTsKIAlrZnJlZSh2a21zX3N0YXRlKTsKIH0KQEAgLTE0MSw3ICsxNDEsNyBAQCBzdGF0aWMgdm9p
ZCB2a21zX2F0b21pY19jcnRjX3Jlc2V0KHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKIAogCV9fZHJt
X2F0b21pY19oZWxwZXJfY3J0Y19yZXNldChjcnRjLCAmdmttc19zdGF0ZS0+YmFzZSk7CiAJaWYg
KHZrbXNfc3RhdGUpCi0JCUlOSVRfV09SSygmdmttc19zdGF0ZS0+Y3JjX3dvcmssIHZrbXNfY3Jj
X3dvcmtfaGFuZGxlKTsKKwkJSU5JVF9XT1JLKCZ2a21zX3N0YXRlLT5jb21wb3Nlcl93b3JrLCB2
a21zX2NvbXBvc2VyX3dvcmtlcik7CiB9CiAKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2NydGNf
ZnVuY3Mgdmttc19jcnRjX2Z1bmNzID0gewpAQCAtMjIyLDcgKzIyMiw3IEBAIHN0YXRpYyB2b2lk
IHZrbXNfY3J0Y19hdG9taWNfYmVnaW4oc3RydWN0IGRybV9jcnRjICpjcnRjLAogCXN0cnVjdCB2
a21zX291dHB1dCAqdmttc19vdXRwdXQgPSBkcm1fY3J0Y190b192a21zX291dHB1dChjcnRjKTsK
IAogCS8qIFRoaXMgbG9jayBpcyBoZWxkIGFjcm9zcyB0aGUgYXRvbWljIGNvbW1pdCB0byBibG9j
ayB2YmxhbmsgdGltZXIKLQkgKiBmcm9tIHNjaGVkdWxpbmcgdmttc19jcmNfd29ya19oYW5kbGUg
dW50aWwgdGhlIGNyY19kYXRhIGlzIHVwZGF0ZWQKKwkgKiBmcm9tIHNjaGVkdWxpbmcgdmttc19j
b21wb3Nlcl93b3JrZXIgdW50aWwgdGhlIGNvbXBvc2VyIGlzIHVwZGF0ZWQKIAkgKi8KIAlzcGlu
X2xvY2tfaXJxKCZ2a21zX291dHB1dC0+bG9jayk7CiB9CkBAIC0yNDUsNyArMjQ1LDcgQEAgc3Rh
dGljIHZvaWQgdmttc19jcnRjX2F0b21pY19mbHVzaChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCiAJ
CWNydGMtPnN0YXRlLT5ldmVudCA9IE5VTEw7CiAJfQogCi0Jdmttc19vdXRwdXQtPmNyY19zdGF0
ZSA9IHRvX3ZrbXNfY3J0Y19zdGF0ZShjcnRjLT5zdGF0ZSk7CisJdmttc19vdXRwdXQtPmNvbXBv
c2VyX3N0YXRlID0gdG9fdmttc19jcnRjX3N0YXRlKGNydGMtPnN0YXRlKTsKIAogCXNwaW5fdW5s
b2NrX2lycSgmdmttc19vdXRwdXQtPmxvY2spOwogfQpAQCAtMjc0LDEwICsyNzQsMTAgQEAgaW50
IHZrbXNfY3J0Y19pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fY3J0YyAq
Y3J0YywKIAlkcm1fY3J0Y19oZWxwZXJfYWRkKGNydGMsICZ2a21zX2NydGNfaGVscGVyX2Z1bmNz
KTsKIAogCXNwaW5fbG9ja19pbml0KCZ2a21zX291dC0+bG9jayk7Ci0Jc3Bpbl9sb2NrX2luaXQo
JnZrbXNfb3V0LT5jcmNfbG9jayk7CisJc3Bpbl9sb2NrX2luaXQoJnZrbXNfb3V0LT5jb21wb3Nl
cl9sb2NrKTsKIAotCXZrbXNfb3V0LT5jcmNfd29ya3EgPSBhbGxvY19vcmRlcmVkX3dvcmtxdWV1
ZSgidmttc19jcmNfd29ya3EiLCAwKTsKLQlpZiAoIXZrbXNfb3V0LT5jcmNfd29ya3EpCisJdmtt
c19vdXQtPmNvbXBvc2VyX3dvcmtxID0gYWxsb2Nfb3JkZXJlZF93b3JrcXVldWUoInZrbXNfY29t
cG9zZXIiLCAwKTsKKwlpZiAoIXZrbXNfb3V0LT5jb21wb3Nlcl93b3JrcSkKIAkJcmV0dXJuIC1F
Tk9NRU07CiAKIAlyZXR1cm4gcmV0OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZrbXMv
dmttc19kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS92a21zL3ZrbXNfZHJ2LmMKaW5kZXggOTY2YjNk
NjUzMTg5Li5hYzc5MGI2NTI3ZTQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92a21zL3Zr
bXNfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuYwpAQCAtNTYsNyAr
NTYsNyBAQCBzdGF0aWMgdm9pZCB2a21zX3JlbGVhc2Uoc3RydWN0IGRybV9kZXZpY2UgKmRldikK
IAlkcm1fYXRvbWljX2hlbHBlcl9zaHV0ZG93bigmdmttcy0+ZHJtKTsKIAlkcm1fbW9kZV9jb25m
aWdfY2xlYW51cCgmdmttcy0+ZHJtKTsKIAlkcm1fZGV2X2ZpbmkoJnZrbXMtPmRybSk7Ci0JZGVz
dHJveV93b3JrcXVldWUodmttcy0+b3V0cHV0LmNyY193b3JrcSk7CisJZGVzdHJveV93b3JrcXVl
dWUodmttcy0+b3V0cHV0LmNvbXBvc2VyX3dvcmtxKTsKIH0KIAogc3RhdGljIHZvaWQgdmttc19h
dG9taWNfY29tbWl0X3RhaWwoc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKm9sZF9zdGF0ZSkKQEAg
LTgyLDcgKzgyLDcgQEAgc3RhdGljIHZvaWQgdmttc19hdG9taWNfY29tbWl0X3RhaWwoc3RydWN0
IGRybV9hdG9taWNfc3RhdGUgKm9sZF9zdGF0ZSkKIAkJc3RydWN0IHZrbXNfY3J0Y19zdGF0ZSAq
dmttc19zdGF0ZSA9CiAJCQl0b192a21zX2NydGNfc3RhdGUob2xkX2NydGNfc3RhdGUpOwogCi0J
CWZsdXNoX3dvcmsoJnZrbXNfc3RhdGUtPmNyY193b3JrKTsKKwkJZmx1c2hfd29yaygmdmttc19z
dGF0ZS0+Y29tcG9zZXJfd29yayk7CiAJfQogCiAJZHJtX2F0b21pY19oZWxwZXJfY2xlYW51cF9w
bGFuZXMoZGV2LCBvbGRfc3RhdGUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZrbXMv
dmttc19kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS92a21zL3ZrbXNfZHJ2LmgKaW5kZXggZTJkMWFh
MDg5ZGVjLi5mYzZjZGExNjQzMzYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92a21zL3Zr
bXNfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuaApAQCAtMjAsNyAr
MjAsNyBAQAogCiBleHRlcm4gYm9vbCBlbmFibGVfY3Vyc29yOwogCi1zdHJ1Y3Qgdmttc19jcmNf
ZGF0YSB7CitzdHJ1Y3Qgdmttc19jb21wb3NlciB7CiAJc3RydWN0IGRybV9mcmFtZWJ1ZmZlciBm
YjsKIAlzdHJ1Y3QgZHJtX3JlY3Qgc3JjLCBkc3Q7CiAJdW5zaWduZWQgaW50IG9mZnNldDsKQEAg
LTMxLDI5ICszMSwyOSBAQCBzdHJ1Y3Qgdmttc19jcmNfZGF0YSB7CiAvKioKICAqIHZrbXNfcGxh
bmVfc3RhdGUgLSBEcml2ZXIgc3BlY2lmaWMgcGxhbmUgc3RhdGUKICAqIEBiYXNlOiBiYXNlIHBs
YW5lIHN0YXRlCi0gKiBAY3JjX2RhdGE6IGRhdGEgcmVxdWlyZWQgZm9yIENSQyBjb21wdXRhdGlv
bgorICogQGNvbXBvc2VyOiBkYXRhIHJlcXVpcmVkIGZvciBjb21wb3NpbmcgY29tcHV0YXRpb24K
ICAqLwogc3RydWN0IHZrbXNfcGxhbmVfc3RhdGUgewogCXN0cnVjdCBkcm1fcGxhbmVfc3RhdGUg
YmFzZTsKLQlzdHJ1Y3Qgdmttc19jcmNfZGF0YSAqY3JjX2RhdGE7CisJc3RydWN0IHZrbXNfY29t
cG9zZXIgKmNvbXBvc2VyOwogfTsKIAogLyoqCiAgKiB2a21zX2NydGNfc3RhdGUgLSBEcml2ZXIg
c3BlY2lmaWMgQ1JUQyBzdGF0ZQogICogQGJhc2U6IGJhc2UgQ1JUQyBzdGF0ZQotICogQGNyY193
b3JrOiB3b3JrIHN0cnVjdCB0byBjb21wdXRlIGFuZCBhZGQgQ1JDIGVudHJpZXMKKyAqIEBjb21w
b3Nlcl93b3JrOiB3b3JrIHN0cnVjdCB0byBjb21wb3NlIGFuZCBhZGQgQ1JDIGVudHJpZXMKICAq
IEBuX2ZyYW1lX3N0YXJ0OiBzdGFydCBmcmFtZSBudW1iZXIgZm9yIGNvbXB1dGVkIENSQwogICog
QG5fZnJhbWVfZW5kOiBlbmQgZnJhbWUgbnVtYmVyIGZvciBjb21wdXRlZCBDUkMKICAqLwogc3Ry
dWN0IHZrbXNfY3J0Y19zdGF0ZSB7CiAJc3RydWN0IGRybV9jcnRjX3N0YXRlIGJhc2U7Ci0Jc3Ry
dWN0IHdvcmtfc3RydWN0IGNyY193b3JrOworCXN0cnVjdCB3b3JrX3N0cnVjdCBjb21wb3Nlcl93
b3JrOwogCiAJaW50IG51bV9hY3RpdmVfcGxhbmVzOwogCS8qIHN0YWNrIG9mIGFjdGl2ZSBwbGFu
ZXMgZm9yIGNyYyBjb21wdXRhdGlvbiwgc2hvdWxkIGJlIGluIHogb3JkZXIgKi8KIAlzdHJ1Y3Qg
dmttc19wbGFuZV9zdGF0ZSAqKmFjdGl2ZV9wbGFuZXM7CiAKLQkvKiBiZWxvdyB0aHJlZSBhcmUg
cHJvdGVjdGVkIGJ5IHZrbXNfb3V0cHV0LmNyY19sb2NrICovCisJLyogYmVsb3cgdGhyZWUgYXJl
IHByb3RlY3RlZCBieSB2a21zX291dHB1dC5jb21wb3Nlcl9sb2NrICovCiAJYm9vbCBjcmNfcGVu
ZGluZzsKIAl1NjQgZnJhbWVfc3RhcnQ7CiAJdTY0IGZyYW1lX2VuZDsKQEAgLTY2LDE2ICs2Niwx
NiBAQCBzdHJ1Y3Qgdmttc19vdXRwdXQgewogCXN0cnVjdCBocnRpbWVyIHZibGFua19ocnRpbWVy
OwogCWt0aW1lX3QgcGVyaW9kX25zOwogCXN0cnVjdCBkcm1fcGVuZGluZ192YmxhbmtfZXZlbnQg
KmV2ZW50OwotCS8qIG9yZGVyZWQgd3EgZm9yIGNyY193b3JrICovCi0Jc3RydWN0IHdvcmtxdWV1
ZV9zdHJ1Y3QgKmNyY193b3JrcTsKLQkvKiBwcm90ZWN0cyBjb25jdXJyZW50IGFjY2VzcyB0byBj
cmNfZGF0YSAqLworCS8qIG9yZGVyZWQgd3EgZm9yIGNvbXBvc2VyX3dvcmsgKi8KKwlzdHJ1Y3Qg
d29ya3F1ZXVlX3N0cnVjdCAqY29tcG9zZXJfd29ya3E7CisJLyogcHJvdGVjdHMgY29uY3VycmVu
dCBhY2Nlc3MgdG8gY29tcG9zZXIgKi8KIAlzcGlubG9ja190IGxvY2s7CiAKIAkvKiBwcm90ZWN0
ZWQgYnkgQGxvY2sgKi8KLQlib29sIGNyY19lbmFibGVkOwotCXN0cnVjdCB2a21zX2NydGNfc3Rh
dGUgKmNyY19zdGF0ZTsKKwlib29sIGNvbXBvc2VyX2VuYWJsZWQ7CisJc3RydWN0IHZrbXNfY3J0
Y19zdGF0ZSAqY29tcG9zZXJfc3RhdGU7CiAKLQlzcGlubG9ja190IGNyY19sb2NrOworCXNwaW5s
b2NrX3QgY29tcG9zZXJfbG9jazsKIH07CiAKIHN0cnVjdCB2a21zX2RldmljZSB7CkBAIC0xNDMs
NiArMTQzLDggQEAgY29uc3QgY2hhciAqY29uc3QgKnZrbXNfZ2V0X2NyY19zb3VyY2VzKHN0cnVj
dCBkcm1fY3J0YyAqY3J0YywKIGludCB2a21zX3NldF9jcmNfc291cmNlKHN0cnVjdCBkcm1fY3J0
YyAqY3J0YywgY29uc3QgY2hhciAqc3JjX25hbWUpOwogaW50IHZrbXNfdmVyaWZ5X2NyY19zb3Vy
Y2Uoc3RydWN0IGRybV9jcnRjICpjcnRjLCBjb25zdCBjaGFyICpzb3VyY2VfbmFtZSwKIAkJCSAg
IHNpemVfdCAqdmFsdWVzX2NudCk7Ci12b2lkIHZrbXNfY3JjX3dvcmtfaGFuZGxlKHN0cnVjdCB3
b3JrX3N0cnVjdCAqd29yayk7CisKKy8qIENvbXBvc2VyIFN1cHBvcnQgKi8KK3ZvaWQgdmttc19j
b21wb3Nlcl93b3JrZXIoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKTsKIAogI2VuZGlmIC8qIF9W
S01TX0RSVl9IXyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19wbGFu
ZS5jIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19wbGFuZS5jCmluZGV4IDE4YzYzMGNmYzQ4
NS4uOGI2MGQzNDM0ZDc1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX3Bs
YW5lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19wbGFuZS5jCkBAIC0xOCwyMCAr
MTgsMjAgQEAgc3RhdGljIHN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKgogdmttc19wbGFuZV9kdXBs
aWNhdGVfc3RhdGUoc3RydWN0IGRybV9wbGFuZSAqcGxhbmUpCiB7CiAJc3RydWN0IHZrbXNfcGxh
bmVfc3RhdGUgKnZrbXNfc3RhdGU7Ci0Jc3RydWN0IHZrbXNfY3JjX2RhdGEgKmNyY19kYXRhOwor
CXN0cnVjdCB2a21zX2NvbXBvc2VyICpjb21wb3NlcjsKIAogCXZrbXNfc3RhdGUgPSBremFsbG9j
KHNpemVvZigqdmttc19zdGF0ZSksIEdGUF9LRVJORUwpOwogCWlmICghdmttc19zdGF0ZSkKIAkJ
cmV0dXJuIE5VTEw7CiAKLQljcmNfZGF0YSA9IGt6YWxsb2Moc2l6ZW9mKCpjcmNfZGF0YSksIEdG
UF9LRVJORUwpOwotCWlmICghY3JjX2RhdGEpIHsKLQkJRFJNX0RFQlVHX0tNUygiQ291bGRuJ3Qg
YWxsb2NhdGUgY3JjX2RhdGFcbiIpOworCWNvbXBvc2VyID0ga3phbGxvYyhzaXplb2YoKmNvbXBv
c2VyKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFjb21wb3NlcikgeworCQlEUk1fREVCVUdfS01TKCJD
b3VsZG4ndCBhbGxvY2F0ZSBjb21wb3NlclxuIik7CiAJCWtmcmVlKHZrbXNfc3RhdGUpOwogCQly
ZXR1cm4gTlVMTDsKIAl9CiAKLQl2a21zX3N0YXRlLT5jcmNfZGF0YSA9IGNyY19kYXRhOworCXZr
bXNfc3RhdGUtPmNvbXBvc2VyID0gY29tcG9zZXI7CiAKIAlfX2RybV9hdG9taWNfaGVscGVyX3Bs
YW5lX2R1cGxpY2F0ZV9zdGF0ZShwbGFuZSwKIAkJCQkJCSAgJnZrbXNfc3RhdGUtPmJhc2UpOwpA
QCAtNDksMTIgKzQ5LDEyIEBAIHN0YXRpYyB2b2lkIHZrbXNfcGxhbmVfZGVzdHJveV9zdGF0ZShz
dHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwKIAkJLyogZHJvcHBpbmcgdGhlIHJlZmVyZW5jZSB3ZSBh
Y3F1aXJlZCBpbgogCQkgKiB2a21zX3ByaW1hcnlfcGxhbmVfdXBkYXRlKCkKIAkJICovCi0JCWlm
IChkcm1fZnJhbWVidWZmZXJfcmVhZF9yZWZjb3VudCgmdmttc19zdGF0ZS0+Y3JjX2RhdGEtPmZi
KSkKLQkJCWRybV9mcmFtZWJ1ZmZlcl9wdXQoJnZrbXNfc3RhdGUtPmNyY19kYXRhLT5mYik7CisJ
CWlmIChkcm1fZnJhbWVidWZmZXJfcmVhZF9yZWZjb3VudCgmdmttc19zdGF0ZS0+Y29tcG9zZXIt
PmZiKSkKKwkJCWRybV9mcmFtZWJ1ZmZlcl9wdXQoJnZrbXNfc3RhdGUtPmNvbXBvc2VyLT5mYik7
CiAJfQogCi0Ja2ZyZWUodmttc19zdGF0ZS0+Y3JjX2RhdGEpOwotCXZrbXNfc3RhdGUtPmNyY19k
YXRhID0gTlVMTDsKKwlrZnJlZSh2a21zX3N0YXRlLT5jb21wb3Nlcik7CisJdmttc19zdGF0ZS0+
Y29tcG9zZXIgPSBOVUxMOwogCiAJX19kcm1fYXRvbWljX2hlbHBlcl9wbGFuZV9kZXN0cm95X3N0
YXRlKG9sZF9zdGF0ZSk7CiAJa2ZyZWUodmttc19zdGF0ZSk7CkBAIC05MSwyMSArOTEsMjEgQEAg
c3RhdGljIHZvaWQgdmttc19wbGFuZV9hdG9taWNfdXBkYXRlKHN0cnVjdCBkcm1fcGxhbmUgKnBs
YW5lLAogewogCXN0cnVjdCB2a21zX3BsYW5lX3N0YXRlICp2a21zX3BsYW5lX3N0YXRlOwogCXN0
cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0gcGxhbmUtPnN0YXRlLT5mYjsKLQlzdHJ1Y3Qgdmtt
c19jcmNfZGF0YSAqY3JjX2RhdGE7CisJc3RydWN0IHZrbXNfY29tcG9zZXIgKmNvbXBvc2VyOwog
CiAJaWYgKCFwbGFuZS0+c3RhdGUtPmNydGMgfHwgIWZiKQogCQlyZXR1cm47CiAKIAl2a21zX3Bs
YW5lX3N0YXRlID0gdG9fdmttc19wbGFuZV9zdGF0ZShwbGFuZS0+c3RhdGUpOwogCi0JY3JjX2Rh
dGEgPSB2a21zX3BsYW5lX3N0YXRlLT5jcmNfZGF0YTsKLQltZW1jcHkoJmNyY19kYXRhLT5zcmMs
ICZwbGFuZS0+c3RhdGUtPnNyYywgc2l6ZW9mKHN0cnVjdCBkcm1fcmVjdCkpOwotCW1lbWNweSgm
Y3JjX2RhdGEtPmRzdCwgJnBsYW5lLT5zdGF0ZS0+ZHN0LCBzaXplb2Yoc3RydWN0IGRybV9yZWN0
KSk7Ci0JbWVtY3B5KCZjcmNfZGF0YS0+ZmIsIGZiLCBzaXplb2Yoc3RydWN0IGRybV9mcmFtZWJ1
ZmZlcikpOwotCWRybV9mcmFtZWJ1ZmZlcl9nZXQoJmNyY19kYXRhLT5mYik7Ci0JY3JjX2RhdGEt
Pm9mZnNldCA9IGZiLT5vZmZzZXRzWzBdOwotCWNyY19kYXRhLT5waXRjaCA9IGZiLT5waXRjaGVz
WzBdOwotCWNyY19kYXRhLT5jcHAgPSBmYi0+Zm9ybWF0LT5jcHBbMF07CisJY29tcG9zZXIgPSB2
a21zX3BsYW5lX3N0YXRlLT5jb21wb3NlcjsKKwltZW1jcHkoJmNvbXBvc2VyLT5zcmMsICZwbGFu
ZS0+c3RhdGUtPnNyYywgc2l6ZW9mKHN0cnVjdCBkcm1fcmVjdCkpOworCW1lbWNweSgmY29tcG9z
ZXItPmRzdCwgJnBsYW5lLT5zdGF0ZS0+ZHN0LCBzaXplb2Yoc3RydWN0IGRybV9yZWN0KSk7CisJ
bWVtY3B5KCZjb21wb3Nlci0+ZmIsIGZiLCBzaXplb2Yoc3RydWN0IGRybV9mcmFtZWJ1ZmZlcikp
OworCWRybV9mcmFtZWJ1ZmZlcl9nZXQoJmNvbXBvc2VyLT5mYik7CisJY29tcG9zZXItPm9mZnNl
dCA9IGZiLT5vZmZzZXRzWzBdOworCWNvbXBvc2VyLT5waXRjaCA9IGZiLT5waXRjaGVzWzBdOwor
CWNvbXBvc2VyLT5jcHAgPSBmYi0+Zm9ybWF0LT5jcHBbMF07CiB9CiAKIHN0YXRpYyBpbnQgdmtt
c19wbGFuZV9hdG9taWNfY2hlY2soc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCi0tIAoyLjIxLjAK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZl
bCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
