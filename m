Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 94475527CB
	for <lists+dri-devel@lfdr.de>; Tue, 25 Jun 2019 11:19:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C99006E0B3;
	Tue, 25 Jun 2019 09:19:48 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ot1-f65.google.com (mail-ot1-f65.google.com
 [209.85.210.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 621626E0B1
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 09:19:47 +0000 (UTC)
Received: by mail-ot1-f65.google.com with SMTP id d17so16548505oth.5
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 02:19:47 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=k5LQsWpv7xV0Wgl0HYgy1wutj8cDknwC5U5sYqSS+Ug=;
 b=XUGGaS7V9oCl77xV55S9ctVk3/Kh6Wf7bHWVgoEXeqfuDsdPdnM2N8ObmgqDb30vcW
 yHLNrHpVPBCrhSuj6OdwNhmolkQl/fbikiNt1FBOjzGmV7wEyVw2gTICLj5lu0jcP2N1
 butP5342ZzEM2+izYhmbwspCWri+OrBL5EMc/w/op4IGh4AmjOvgs1XCC2nnz2kNP4TM
 sXc642twTZcZMWJC9LouBpnw2B/A1f2+iRoGWOuRfgMG9hhszBMO+r949tRt5tuZFbb+
 Ed/1oLNW4r7psk0g07nzI7k1sYEQCXQOMMmtXkfrKpLEP8bzvdgVkIgYTugWzA1pPGlC
 VaFA==
X-Gm-Message-State: APjAAAUHEy3+CG147+ruRZyeyP5q/a3x9VOzbb3RW0j90nFHoVHoYUUU
 7Qs5kO6Zt/KWkFLx3YS8uBdLt/6JwocvZPwvzkSsDg==
X-Google-Smtp-Source: APXvYqxp9eXxmqy4xBaZWJOGN5U7ExzII89gM5xE1PskzmbsArEEVEUyHwMYubqXXaZSeo7TVaTId8X9Glqtfqt4M0M=
X-Received: by 2002:a9d:7d90:: with SMTP id j16mr26514175otn.95.1561454386480; 
 Tue, 25 Jun 2019 02:19:46 -0700 (PDT)
MIME-Version: 1.0
References: <20190624165012.GH3436@hirez.programming.kicks-ass.net>
In-Reply-To: <20190624165012.GH3436@hirez.programming.kicks-ass.net>
From: Andreas Gruenbacher <agruenba@redhat.com>
Date: Tue, 25 Jun 2019 11:19:35 +0200
Message-ID: <CAHc6FU7j5iW7WQoxN_OSfvK4zxv_MxTWJpiNsqFW8TEDMX1rjw@mail.gmail.com>
Subject: Re: [RFC][PATCH] wake_up_var() memory ordering
To: Peter Zijlstra <peterz@infradead.org>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Martin Brandenburg <martin@omnibond.com>, linux-cachefs@redhat.com,
 Mike Snitzer <snitzer@redhat.com>, linux-aio@kvack.org,
 David Airlie <airlied@linux.ie>,
 samba-technical <samba-technical@lists.samba.org>,
 Will Deacon <will.deacon@arm.com>, dri-devel@lists.freedesktop.org,
 David Howells <dhowells@redhat.com>, Chris Mason <clm@fb.com>,
 dm-devel@redhat.com, keyrings@vger.kernel.org, Ingo Molnar <mingo@redhat.com>,
 linux-afs@lists.infradead.org, Alasdair Kergon <agk@redhat.com>,
 Mike Marshall <hubcap@omnibond.com>, linux-cifs@vger.kernel.org,
 rds-devel@oss.oracle.com, linux-rdma@vger.kernel.org,
 James Morris <jmorris@namei.org>, cluster-devel <cluster-devel@redhat.com>,
 Matthias Brugger <matthias.bgg@gmail.com>,
 Paul McKenney <paulmck@linux.vnet.ibm.com>, intel-gfx@lists.freedesktop.org,
 devel@lists.orangefs.org, "Serge E. Hallyn" <serge@hallyn.com>,
 Santosh Shilimkar <santosh.shilimkar@oracle.com>,
 Johan Hedberg <johan.hedberg@gmail.com>, Marcel Holtmann <marcel@holtmann.org>,
 Sean Wang <sean.wang@mediatek.com>, Josef Bacik <josef@toxicpanda.com>,
 linux-fsdevel <linux-fsdevel@vger.kernel.org>,
 linux-mediatek@lists.infradead.org, Alexander Viro <viro@zeniv.linux.org.uk>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>, David Sterba <dsterba@suse.com>,
 MauroCarvalho Chehab <mchehab@kernel.org>,
 Trond Myklebust <trond.myklebust@hammerspace.com>,
 linux-arm-kernel@lists.infradead.org, "J. Bruce Fields" <bfields@fieldses.org>,
 Linux NFS Mailing List <linux-nfs@vger.kernel.org>, netdev@vger.kernel.org,
 Jeff Layton <jlayton@kernel.org>, LKML <linux-kernel@vger.kernel.org>,
 "David S. Miller" <davem@davemloft.net>, Steve French <sfrench@samba.org>,
 linux-bluetooth@vger.kernel.org, LSM <linux-security-module@vger.kernel.org>,
 Benjamin LaHaise <bcrl@kvack.org>, Bob Peterson <rpeterso@redhat.com>,
 linux-media@vger.kernel.org, Anna Schumaker <anna.schumaker@netapp.com>,
 linux-btrfs@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UGV0ZXIsCgp0aGFua3MgZm9yIHRoZSBmaXhlcy4KCk9uIE1vbiwgMjQgSnVuIDIwMTkgYXQgMTg6
NTMsIFBldGVyIFppamxzdHJhIDxwZXRlcnpAaW5mcmFkZWFkLm9yZz4gd3JvdGU6Cj4gSGkgYWxs
LAo+Cj4gSSB0cmllZCB1c2luZyB3YWtlX3VwX3ZhcigpIHRvZGF5IGFuZCBhY2NpZGVudGFsbHkg
bm90aWNlZCB0aGF0IGl0Cj4gZGlkbid0IGltcGx5IGFuIHNtcF9tYigpIGFuZCBzcGVjaWZpY2Fs
bHkgcmVxdWlyZXMgaXQgdGhyb3VnaAo+IHdha2VfdXBfYml0KCkgLyB3YWl0cXVldWVfYWN0aXZl
KCkuCj4KPiBOb3csIHdha2VfdXBfYml0KCkgZG9lc24ndCBpbXBseSB0aGUgYmFycmllciBiZWNh
dXNlIGl0IGlzIGFzc3VtZWQgdG8gYmUKPiB1c2VkIHdpdGggdGhlIGF0b21pYyBiaXRvcHMgQVBJ
IHdoaWNoIGVpdGhlciBpbXBsaWVzICh0ZXN0X2FuZF9jbGVhcikgb3IKPiBvbmx5IG5lZWRzIHNt
cF9tYl9fYWZ0ZXJfYXRvbWljKCksIHdoaWNoIGlzICdtdWNoJyBjaGVhcGVyIHRoYW4gYW4KPiB1
bmNvbmRpdGlvbmFsIHNtcF9tYigpLgo+Cj4gU3RpbGwsIHdoaWxlIGF1ZGl0aW5nIGFsbCB0aGF0
LCBJIGZvdW5kIGEgd2hvbGUgYnVuY2ggb2YgdGhpbmdzIHRoYXQKPiBjb3VsZCBiZSBpbXByb3Zl
ZC4gVGhlcmUgd2VyZSBtaXNzaW5nIGJhcnJpZXJzLCBzdXBlcmZsdW91cyBiYXJyaWVycyBhbmQK
PiBhIHdob2xlIGJ1bmNoIG9mIHNpdGVzIHRoYXQgY291bGQgdXNlIGNsZWFyX2FuZF93YWtlX3Vw
X2JpdCgpLgo+Cj4gU28gdGhpcyBmaXhlcyBhbGwgd2FrZV91cF9iaXQoKSB1c2FnZSB3aXRob3V0
IGFjdHVhbGx5IGNoYW5naW5nCj4gc2VtYW50aWNzIG9mIGl0ICh3aGljaCBhcmUgdW5mb3J0dW5h
dGUgYnV0IHVuZGVyc3RhbmRhYmxlKS4KCnRoYW5rcyBmb3IgdGhlIGZpeGVzLgoKPiBUaGlzIGRv
ZXMKPiBob3dldmVyIGNoYW5nZSB0aGUgc2VtYW50aWNzIG9mIHdha2VfdXBfdmFyKCk7IGV2ZW4g
dGhvdWdoIHdha2VfdXBfdmFyKCkKPiBpcyBtb3N0IG9mdGVuIHVzZWQgd2l0aCBhdG9taWNzIGFu
ZCB0aGVuIHRoZSBhZGRpdGlvbmFsIHNtcF9tYigpIGlzIG1vc3QKPiBvZnRlbiBzdXBlcmZsdW91
cyA6Lwo+Cj4gVGhlcmUgaXNuJ3QgcmVhbGx5IGEgZ29vZCBvcHRpb24gaGVyZSwgY29tbWVudHMg
KG90aGVyIHRoYW4gSSBuZWVkIHRvCj4gc3BsaXQgdGhpcyB1cCk/Cj4KPgo+IC0tLQo+ICBkcml2
ZXJzL2JsdWV0b290aC9idG10a3NkaW8uYyAgICAgICAgICAgICAgIHwgIDUgKy0tLS0KPiAgZHJp
dmVycy9ibHVldG9vdGgvYnRtdGt1YXJ0LmMgICAgICAgICAgICAgICB8ICA1ICstLS0tCj4gIGRy
aXZlcnMvYmx1ZXRvb3RoL2hjaV9tcnZsLmMgICAgICAgICAgICAgICAgfCAgOCArKy0tLS0tLQo+
ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3Jlc2V0LmMgICAgICAgICAgIHwgIDYgKystLS0t
Cj4gIGRyaXZlcnMvbWQvZG0tYnVmaW8uYyAgICAgICAgICAgICAgICAgICAgICAgfCAxMCArKy0t
LS0tLS0tCj4gIGRyaXZlcnMvbWVkaWEvdXNiL2R2Yi11c2ItdjIvZHZiX3VzYl9jb3JlLmMgfCAx
NSArKysrLS0tLS0tLS0tLS0KPiAgZnMvYWZzL2ZzX3Byb2JlLmMgICAgICAgICAgICAgICAgICAg
ICAgICAgICB8ICAxICsKPiAgZnMvYWZzL3NlcnZlci5jICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB8ICAxICsKPiAgZnMvYWZzL3ZsX3Byb2JlLmMgICAgICAgICAgICAgICAgICAgICAgICAg
ICB8ICAxICsKPiAgZnMvYWZzL3ZvbHVtZS5jICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8
ICAxICsKPiAgZnMvYWlvLmMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICA0
ICstLS0KPiAgZnMvYmxvY2tfZGV2LmMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAx
ICsKPiAgZnMvYnRyZnMvZXh0ZW50X2lvLmMgICAgICAgICAgICAgICAgICAgICAgICB8ICA0ICst
LS0KPiAgZnMvY2FjaGVmaWxlcy9uYW1laS5jICAgICAgICAgICAgICAgICAgICAgICB8ICAxICsK
PiAgZnMvY2lmcy9jb25uZWN0LmMgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAzICstLQo+
ICBmcy9jaWZzL21pc2MuYyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMTUgKysrKyst
LS0tLS0tLS0tCj4gIGZzL2ZzY2FjaGUvY29va2llLmMgICAgICAgICAgICAgICAgICAgICAgICAg
fCAgMiArKwo+ICBmcy9mc2NhY2hlL29iamVjdC5jICAgICAgICAgICAgICAgICAgICAgICAgIHwg
IDIgKysKPiAgZnMvZnNjYWNoZS9wYWdlLmMgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAz
ICsrKwo+ICBmcy9nZnMyL2dsb2NrLmMgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDgg
KystLS0tLS0KPiAgZnMvZ2ZzMi9nbG9wcy5jICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8
ICAxICsKPiAgZnMvZ2ZzMi9sb2NrX2RsbS5jICAgICAgICAgICAgICAgICAgICAgICAgICB8ICA4
ICsrLS0tLS0tCj4gIGZzL2dmczIvcmVjb3ZlcnkuYyAgICAgICAgICAgICAgICAgICAgICAgICAg
fCAgNCArLS0tCj4gIGZzL2dmczIvc3VwZXIuYyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
fCAgMSArCj4gIGZzL2dmczIvc3lzLmMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAg
NCArLS0tCj4gIGZzL25mcy9uZnM0c3RhdGUuYyAgICAgICAgICAgICAgICAgICAgICAgICAgfCAg
NCArLS0tCj4gIGZzL25mcy9wbmZzX25mcy5jICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAg
NCArLS0tCj4gIGZzL25mc2QvbmZzNHJlY292ZXIuYyAgICAgICAgICAgICAgICAgICAgICAgfCAg
NCArLS0tCj4gIGZzL29yYW5nZWZzL2ZpbGUuYyAgICAgICAgICAgICAgICAgICAgICAgICAgfCAg
MiArLQo+ICBrZXJuZWwvc2NoZWQvd2FpdF9iaXQuYyAgICAgICAgICAgICAgICAgICAgIHwgIDEg
Kwo+ICBuZXQvYmx1ZXRvb3RoL2hjaV9ldmVudC5jICAgICAgICAgICAgICAgICAgIHwgIDUgKy0t
LS0KPiAgbmV0L3Jkcy9pYl9yZWN2LmMgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAxICsK
PiAgc2VjdXJpdHkva2V5cy9nYy5jICAgICAgICAgICAgICAgICAgICAgICAgICB8ICA1ICsrLS0t
Cj4gIDMzIGZpbGVzIGNoYW5nZWQsIDUwIGluc2VydGlvbnMoKyksIDkwIGRlbGV0aW9ucygtKQo+
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvYmx1ZXRvb3RoL2J0bXRrc2Rpby5jIGIvZHJpdmVycy9i
bHVldG9vdGgvYnRtdGtzZGlvLmMKPiBpbmRleCA4MTMzMzgyODg0NTMuLjI3NTIzY2ZlYWM5YSAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2JsdWV0b290aC9idG10a3NkaW8uYwo+ICsrKyBiL2RyaXZl
cnMvYmx1ZXRvb3RoL2J0bXRrc2Rpby5jCj4gQEAgLTM1NiwxMSArMzU2LDggQEAgc3RhdGljIGlu
dCBidG10a3NkaW9fcmVjdl9ldmVudChzdHJ1Y3QgaGNpX2RldiAqaGRldiwgc3RydWN0IHNrX2J1
ZmYgKnNrYikKPgo+ICAgICAgICAgaWYgKGhkci0+ZXZ0ID09IEhDSV9FVl9WRU5ET1IpIHsKPiAg
ICAgICAgICAgICAgICAgaWYgKHRlc3RfYW5kX2NsZWFyX2JpdChCVE1US1NESU9fVFhfV0FJVF9W
TkRfRVZULAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZiZGV2LT50
eF9zdGF0ZSkpIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICAvKiBCYXJyaWVyIHRvIHN5bmMg
d2l0aCBvdGhlciBDUFVzICovCj4gLSAgICAgICAgICAgICAgICAgICAgICAgc21wX21iX19hZnRl
cl9hdG9taWMoKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmYmRl
di0+dHhfc3RhdGUpKQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHdha2VfdXBfYml0KCZiZGV2
LT50eF9zdGF0ZSwgQlRNVEtTRElPX1RYX1dBSVRfVk5EX0VWVCk7Cj4gLSAgICAgICAgICAgICAg
IH0KPiAgICAgICAgIH0KPgo+ICAgICAgICAgcmV0dXJuIDA7Cj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvYmx1ZXRvb3RoL2J0bXRrdWFydC5jIGIvZHJpdmVycy9ibHVldG9vdGgvYnRtdGt1YXJ0LmMK
PiBpbmRleCBmNWRiZWVjOGUyNzQuLjdmZTMyNGRmMzc5OSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2JsdWV0b290aC9idG10a3VhcnQuYwo+ICsrKyBiL2RyaXZlcnMvYmx1ZXRvb3RoL2J0bXRrdWFy
dC5jCj4gQEAgLTM0MCwxMSArMzQwLDggQEAgc3RhdGljIGludCBidG10a3VhcnRfcmVjdl9ldmVu
dChzdHJ1Y3QgaGNpX2RldiAqaGRldiwgc3RydWN0IHNrX2J1ZmYgKnNrYikKPgo+ICAgICAgICAg
aWYgKGhkci0+ZXZ0ID09IEhDSV9FVl9WRU5ET1IpIHsKPiAgICAgICAgICAgICAgICAgaWYgKHRl
c3RfYW5kX2NsZWFyX2JpdChCVE1US1VBUlRfVFhfV0FJVF9WTkRfRVZULAo+IC0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICZiZGV2LT50eF9zdGF0ZSkpIHsKPiAtICAgICAg
ICAgICAgICAgICAgICAgICAvKiBCYXJyaWVyIHRvIHN5bmMgd2l0aCBvdGhlciBDUFVzICovCj4g
LSAgICAgICAgICAgICAgICAgICAgICAgc21wX21iX19hZnRlcl9hdG9taWMoKTsKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmYmRldi0+dHhfc3RhdGUpKQo+ICAgICAg
ICAgICAgICAgICAgICAgICAgIHdha2VfdXBfYml0KCZiZGV2LT50eF9zdGF0ZSwgQlRNVEtVQVJU
X1RYX1dBSVRfVk5EX0VWVCk7Cj4gLSAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPgo+ICAg
ICAgICAgcmV0dXJuIDA7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvYmx1ZXRvb3RoL2hjaV9tcnZs
LmMgYi9kcml2ZXJzL2JsdWV0b290aC9oY2lfbXJ2bC5jCj4gaW5kZXggNTAyMTJhYzYyOWUzLi5m
MDMyOTRkMzlkMDggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ibHVldG9vdGgvaGNpX21ydmwuYwo+
ICsrKyBiL2RyaXZlcnMvYmx1ZXRvb3RoL2hjaV9tcnZsLmMKPiBAQCAtMTU3LDkgKzE1Nyw3IEBA
IHN0YXRpYyBpbnQgbXJ2bF9yZWN2X2Z3X3JlcShzdHJ1Y3QgaGNpX2RldiAqaGRldiwgc3RydWN0
IHNrX2J1ZmYgKnNrYikKPgo+ICAgICAgICAgbXJ2bC0+dHhfbGVuID0gbGUxNl90b19jcHUocGt0
LT5saHMpOwo+Cj4gLSAgICAgICBjbGVhcl9iaXQoU1RBVEVfRldfUkVRX1BFTkRJTkcsICZtcnZs
LT5mbGFncyk7Cj4gLSAgICAgICBzbXBfbWJfX2FmdGVyX2F0b21pYygpOwo+IC0gICAgICAgd2Fr
ZV91cF9iaXQoJm1ydmwtPmZsYWdzLCBTVEFURV9GV19SRVFfUEVORElORyk7Cj4gKyAgICAgICBj
bGVhcl9hbmRfd2FrZV91cF9iaXQoU1RBVEVfRldfUkVRX1BFTkRJTkcsICZtcnZsLT5mbGFncyk7
Cj4KPiAgZG9uZToKPiAgICAgICAgIGtmcmVlX3NrYihza2IpOwo+IEBAIC0xOTIsOSArMTkwLDcg
QEAgc3RhdGljIGludCBtcnZsX3JlY3ZfY2hpcF92ZXIoc3RydWN0IGhjaV9kZXYgKmhkZXYsIHN0
cnVjdCBza19idWZmICpza2IpCj4KPiAgICAgICAgIGJ0X2Rldl9pbmZvKGhkZXYsICJDb250cm9s
bGVyIGlkID0gJXgsIHJldiA9ICV4IiwgbXJ2bC0+aWQsIG1ydmwtPnJldik7Cj4KPiAtICAgICAg
IGNsZWFyX2JpdChTVEFURV9DSElQX1ZFUl9QRU5ESU5HLCAmbXJ2bC0+ZmxhZ3MpOwo+IC0gICAg
ICAgc21wX21iX19hZnRlcl9hdG9taWMoKTsKPiAtICAgICAgIHdha2VfdXBfYml0KCZtcnZsLT5m
bGFncywgU1RBVEVfQ0hJUF9WRVJfUEVORElORyk7Cj4gKyAgICAgICBjbGVhcl9hbmRfd2FrZV91
cF9iaXQoU1RBVEVfQ0hJUF9WRVJfUEVORElORywgJm1ydmwtPmZsYWdzKTsKPgo+ICBkb25lOgo+
ICAgICAgICAga2ZyZWVfc2tiKHNrYik7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcmVzZXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVzZXQuYwo+IGlu
ZGV4IDY3N2Q1OTMwNGU3OC4uNjgwOTM2N2RiZmE5IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfcmVzZXQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
cmVzZXQuYwo+IEBAIC0xMzI0LDEwICsxMzI0LDggQEAgdm9pZCBpOTE1X2hhbmRsZV9lcnJvcihz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwKPiAgICAgICAgICAgICAgICAgICAgICAgICBp
ZiAoaTkxNV9yZXNldF9lbmdpbmUoZW5naW5lLCBtc2cpID09IDApCj4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBlbmdpbmVfbWFzayAmPSB+ZW5naW5lLT5tYXNrOwo+Cj4gLSAgICAg
ICAgICAgICAgICAgICAgICAgY2xlYXJfYml0KEk5MTVfUkVTRVRfRU5HSU5FICsgZW5naW5lLT5p
ZCwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmVycm9yLT5mbGFncyk7Cj4g
LSAgICAgICAgICAgICAgICAgICAgICAgd2FrZV91cF9iaXQoJmVycm9yLT5mbGFncywKPiAtICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJOTE1X1JFU0VUX0VOR0lORSArIGVuZ2lu
ZS0+aWQpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyX2FuZF93YWtlX3VwX2JpdChJ
OTE1X1JFU0VUX0VOR0lORSArIGVuZ2luZS0+aWQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZlcnJvci0+ZmxhZ3MpOwo+ICAgICAgICAgICAgICAgICB9
Cj4gICAgICAgICB9Cj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZC9kbS1idWZpby5jIGIvZHJp
dmVycy9tZC9kbS1idWZpby5jCj4gaW5kZXggMmE0OGVhM2YxYjMwLi4zMTE0ODM2Y2M3MTcgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9tZC9kbS1idWZpby5jCj4gKysrIGIvZHJpdmVycy9tZC9kbS1i
dWZpby5jCj4gQEAgLTY2NywxMCArNjY3LDcgQEAgc3RhdGljIHZvaWQgd3JpdGVfZW5kaW8oc3Ry
dWN0IGRtX2J1ZmZlciAqYiwgYmxrX3N0YXR1c190IHN0YXR1cykKPiAgICAgICAgIEJVR19PTigh
dGVzdF9iaXQoQl9XUklUSU5HLCAmYi0+c3RhdGUpKTsKPgo+ICAgICAgICAgc21wX21iX19iZWZv
cmVfYXRvbWljKCk7Cj4gLSAgICAgICBjbGVhcl9iaXQoQl9XUklUSU5HLCAmYi0+c3RhdGUpOwo+
IC0gICAgICAgc21wX21iX19hZnRlcl9hdG9taWMoKTsKPiAtCj4gLSAgICAgICB3YWtlX3VwX2Jp
dCgmYi0+c3RhdGUsIEJfV1JJVElORyk7Cj4gKyAgICAgICBjbGVhcl9hbmRfd2FrZV91cF9iaXQo
Ql9XUklUSU5HLCAmYi0+c3RhdGUpOwo+ICB9Cj4KPiAgLyoKPiBAQCAtMTA0NSwxMCArMTA0Miw3
IEBAIHN0YXRpYyB2b2lkIHJlYWRfZW5kaW8oc3RydWN0IGRtX2J1ZmZlciAqYiwgYmxrX3N0YXR1
c190IHN0YXR1cykKPiAgICAgICAgIEJVR19PTighdGVzdF9iaXQoQl9SRUFESU5HLCAmYi0+c3Rh
dGUpKTsKPgo+ICAgICAgICAgc21wX21iX19iZWZvcmVfYXRvbWljKCk7Cj4gLSAgICAgICBjbGVh
cl9iaXQoQl9SRUFESU5HLCAmYi0+c3RhdGUpOwo+IC0gICAgICAgc21wX21iX19hZnRlcl9hdG9t
aWMoKTsKPiAtCj4gLSAgICAgICB3YWtlX3VwX2JpdCgmYi0+c3RhdGUsIEJfUkVBRElORyk7Cj4g
KyAgICAgICBjbGVhcl9hbmRfd2FrZV91cF9iaXQoQl9SRUFESU5HLCAmYi0+c3RhdGUpOwo+ICB9
Cj4KPiAgLyoKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZWRpYS91c2IvZHZiLXVzYi12Mi9kdmJf
dXNiX2NvcmUuYyBiL2RyaXZlcnMvbWVkaWEvdXNiL2R2Yi11c2ItdjIvZHZiX3VzYl9jb3JlLmMK
PiBpbmRleCBlNWUwNTZiZjlkZmEuLmZhNDZiYzkzMDcwNCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L21lZGlhL3VzYi9kdmItdXNiLXYyL2R2Yl91c2JfY29yZS5jCj4gKysrIGIvZHJpdmVycy9tZWRp
YS91c2IvZHZiLXVzYi12Mi9kdmJfdXNiX2NvcmUuYwo+IEBAIC0zNzQsOSArMzc0LDcgQEAgc3Rh
dGljIGludCBkdmJfdXNiX3N0b3BfZmVlZChzdHJ1Y3QgZHZiX2RlbXV4X2ZlZWQgKmR2YmRteGZl
ZWQpCj4gICAgICAgICB1c2JfdXJiX2tpbGx2MigmYWRhcC0+c3RyZWFtKTsKPgo+ICAgICAgICAg
LyogY2xlYXIgJ3N0cmVhbWluZycgc3RhdHVzIGJpdCAqLwo+IC0gICAgICAgY2xlYXJfYml0KEFE
QVBfU1RSRUFNSU5HLCAmYWRhcC0+c3RhdGVfYml0cyk7Cj4gLSAgICAgICBzbXBfbWJfX2FmdGVy
X2F0b21pYygpOwo+IC0gICAgICAgd2FrZV91cF9iaXQoJmFkYXAtPnN0YXRlX2JpdHMsIEFEQVBf
U1RSRUFNSU5HKTsKPiArICAgICAgIGNsZWFyX2FuZF93YWtlX3VwX2JpdChBREFQX1NUUkVBTUlO
RywgJmFkYXAtPnN0YXRlX2JpdHMpOwo+ICBza2lwX2ZlZWRfc3RvcDoKPgo+ICAgICAgICAgaWYg
KHJldCkKPiBAQCAtNTc4LDExICs1NzYsOCBAQCBzdGF0aWMgaW50IGR2Yl91c2JfZmVfaW5pdChz
dHJ1Y3QgZHZiX2Zyb250ZW5kICpmZSkKPiAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVy
cjsKPiAgICAgICAgIH0KPiAgZXJyOgo+IC0gICAgICAgaWYgKCFhZGFwLT5zdXNwZW5kX3Jlc3Vt
ZV9hY3RpdmUpIHsKPiAtICAgICAgICAgICAgICAgY2xlYXJfYml0KEFEQVBfSU5JVCwgJmFkYXAt
PnN0YXRlX2JpdHMpOwo+IC0gICAgICAgICAgICAgICBzbXBfbWJfX2FmdGVyX2F0b21pYygpOwo+
IC0gICAgICAgICAgICAgICB3YWtlX3VwX2JpdCgmYWRhcC0+c3RhdGVfYml0cywgQURBUF9JTklU
KTsKPiAtICAgICAgIH0KPiArICAgICAgIGlmICghYWRhcC0+c3VzcGVuZF9yZXN1bWVfYWN0aXZl
KQo+ICsgICAgICAgICAgICAgICBjbGVhcl9hbmRfd2FrZV91cF9iaXQoQURBUF9JTklULCAmYWRh
cC0+c3RhdGVfYml0cyk7Cj4KPiAgICAgICAgIGRldl9kYmcoJmQtPnVkZXYtPmRldiwgIiVzOiBy
ZXQ9JWRcbiIsIF9fZnVuY19fLCByZXQpOwo+ICAgICAgICAgcmV0dXJuIHJldDsKPiBAQCAtNjE5
LDkgKzYxNCw3IEBAIHN0YXRpYyBpbnQgZHZiX3VzYl9mZV9zbGVlcChzdHJ1Y3QgZHZiX2Zyb250
ZW5kICpmZSkKPiAgZXJyOgo+ICAgICAgICAgaWYgKCFhZGFwLT5zdXNwZW5kX3Jlc3VtZV9hY3Rp
dmUpIHsKPiAgICAgICAgICAgICAgICAgYWRhcC0+YWN0aXZlX2ZlID0gLTE7Cj4gLSAgICAgICAg
ICAgICAgIGNsZWFyX2JpdChBREFQX1NMRUVQLCAmYWRhcC0+c3RhdGVfYml0cyk7Cj4gLSAgICAg
ICAgICAgICAgIHNtcF9tYl9fYWZ0ZXJfYXRvbWljKCk7Cj4gLSAgICAgICAgICAgICAgIHdha2Vf
dXBfYml0KCZhZGFwLT5zdGF0ZV9iaXRzLCBBREFQX1NMRUVQKTsKPiArICAgICAgICAgICAgICAg
Y2xlYXJfYW5kX3dha2VfdXBfYml0KEFEQVBfU0xFRVAsICZhZGFwLT5zdGF0ZV9iaXRzKTsKPiAg
ICAgICAgIH0KPgo+ICAgICAgICAgZGV2X2RiZygmZC0+dWRldi0+ZGV2LCAiJXM6IHJldD0lZFxu
IiwgX19mdW5jX18sIHJldCk7Cj4gZGlmZiAtLWdpdCBhL2ZzL2Fmcy9mc19wcm9iZS5jIGIvZnMv
YWZzL2ZzX3Byb2JlLmMKPiBpbmRleCBjZmU2MmIxNTRmNjguLjM3N2VlMDdkNWY3NiAxMDA2NDQK
PiAtLS0gYS9mcy9hZnMvZnNfcHJvYmUuYwo+ICsrKyBiL2ZzL2Fmcy9mc19wcm9iZS5jCj4gQEAg
LTE4LDYgKzE4LDcgQEAgc3RhdGljIGJvb2wgYWZzX2ZzX3Byb2JlX2RvbmUoc3RydWN0IGFmc19z
ZXJ2ZXIgKnNlcnZlcikKPgo+ICAgICAgICAgd2FrZV91cF92YXIoJnNlcnZlci0+cHJvYmVfb3V0
c3RhbmRpbmcpOwo+ICAgICAgICAgY2xlYXJfYml0X3VubG9jayhBRlNfU0VSVkVSX0ZMX1BST0JJ
TkcsICZzZXJ2ZXItPmZsYWdzKTsKPiArICAgICAgIHNtcF9tYl9fYWZ0ZXJfYXRvbWljKCk7Cj4g
ICAgICAgICB3YWtlX3VwX2JpdCgmc2VydmVyLT5mbGFncywgQUZTX1NFUlZFUl9GTF9QUk9CSU5H
KTsKPiAgICAgICAgIHJldHVybiB0cnVlOwo+ICB9Cj4gZGlmZiAtLWdpdCBhL2ZzL2Fmcy9zZXJ2
ZXIuYyBiL2ZzL2Fmcy9zZXJ2ZXIuYwo+IGluZGV4IGU5MDBjZDc0MzYxYi4uYzliNzRhMzk3Y2Mx
IDEwMDY0NAo+IC0tLSBhL2ZzL2Fmcy9zZXJ2ZXIuYwo+ICsrKyBiL2ZzL2Fmcy9zZXJ2ZXIuYwo+
IEBAIC01NjksNiArNTY5LDcgQEAgYm9vbCBhZnNfY2hlY2tfc2VydmVyX3JlY29yZChzdHJ1Y3Qg
YWZzX2ZzX2N1cnNvciAqZmMsIHN0cnVjdCBhZnNfc2VydmVyICpzZXJ2ZXIKPiAgICAgICAgIGlm
ICghdGVzdF9hbmRfc2V0X2JpdF9sb2NrKEFGU19TRVJWRVJfRkxfVVBEQVRJTkcsICZzZXJ2ZXIt
PmZsYWdzKSkgewo+ICAgICAgICAgICAgICAgICBzdWNjZXNzID0gYWZzX3VwZGF0ZV9zZXJ2ZXJf
cmVjb3JkKGZjLCBzZXJ2ZXIpOwo+ICAgICAgICAgICAgICAgICBjbGVhcl9iaXRfdW5sb2NrKEFG
U19TRVJWRVJfRkxfVVBEQVRJTkcsICZzZXJ2ZXItPmZsYWdzKTsKPiArICAgICAgICAgICAgICAg
c21wX21iX19hZnRlcl9hdG9taWMoKTsKPiAgICAgICAgICAgICAgICAgd2FrZV91cF9iaXQoJnNl
cnZlci0+ZmxhZ3MsIEFGU19TRVJWRVJfRkxfVVBEQVRJTkcpOwo+ICAgICAgICAgICAgICAgICBf
bGVhdmUoIiA9ICVkIiwgc3VjY2Vzcyk7Cj4gICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNz
Owo+IGRpZmYgLS1naXQgYS9mcy9hZnMvdmxfcHJvYmUuYyBiL2ZzL2Fmcy92bF9wcm9iZS5jCj4g
aW5kZXggODU4NDk4Y2MxYjA1Li4xOTM5NjI0YWExNDcgMTAwNjQ0Cj4gLS0tIGEvZnMvYWZzL3Zs
X3Byb2JlLmMKPiArKysgYi9mcy9hZnMvdmxfcHJvYmUuYwo+IEBAIC0xOCw2ICsxOCw3IEBAIHN0
YXRpYyBib29sIGFmc192bF9wcm9iZV9kb25lKHN0cnVjdCBhZnNfdmxzZXJ2ZXIgKnNlcnZlcikK
Pgo+ICAgICAgICAgd2FrZV91cF92YXIoJnNlcnZlci0+cHJvYmVfb3V0c3RhbmRpbmcpOwo+ICAg
ICAgICAgY2xlYXJfYml0X3VubG9jayhBRlNfVkxTRVJWRVJfRkxfUFJPQklORywgJnNlcnZlci0+
ZmxhZ3MpOwo+ICsgICAgICAgc21wX21iX19hZnRlcl9hdG9taWMoKTsKPiAgICAgICAgIHdha2Vf
dXBfYml0KCZzZXJ2ZXItPmZsYWdzLCBBRlNfVkxTRVJWRVJfRkxfUFJPQklORyk7Cj4gICAgICAg
ICByZXR1cm4gdHJ1ZTsKPiAgfQo+IGRpZmYgLS1naXQgYS9mcy9hZnMvdm9sdW1lLmMgYi9mcy9h
ZnMvdm9sdW1lLmMKPiBpbmRleCAwOGZkYjM5NTFjNDkuLmI5NjhlNGU5NmY2YiAxMDA2NDQKPiAt
LS0gYS9mcy9hZnMvdm9sdW1lLmMKPiArKysgYi9mcy9hZnMvdm9sdW1lLmMKPiBAQCAtMzAzLDYg
KzMwMyw3IEBAIGludCBhZnNfY2hlY2tfdm9sdW1lX3N0YXR1cyhzdHJ1Y3QgYWZzX3ZvbHVtZSAq
dm9sdW1lLCBzdHJ1Y3Qga2V5ICprZXkpCj4gICAgICAgICAgICAgICAgIHJldCA9IGFmc191cGRh
dGVfdm9sdW1lX3N0YXR1cyh2b2x1bWUsIGtleSk7Cj4gICAgICAgICAgICAgICAgIGNsZWFyX2Jp
dF91bmxvY2soQUZTX1ZPTFVNRV9XQUlULCAmdm9sdW1lLT5mbGFncyk7Cj4gICAgICAgICAgICAg
ICAgIGNsZWFyX2JpdF91bmxvY2soQUZTX1ZPTFVNRV9VUERBVElORywgJnZvbHVtZS0+ZmxhZ3Mp
Owo+ICsgICAgICAgICAgICAgICBzbXBfbWJfX2FmdGVyX2F0b21pYygpOwo+ICAgICAgICAgICAg
ICAgICB3YWtlX3VwX2JpdCgmdm9sdW1lLT5mbGFncywgQUZTX1ZPTFVNRV9XQUlUKTsKPiAgICAg
ICAgICAgICAgICAgX2xlYXZlKCIgPSAlZCIsIHJldCk7Cj4gICAgICAgICAgICAgICAgIHJldHVy
biByZXQ7Cj4gZGlmZiAtLWdpdCBhL2ZzL2Fpby5jIGIvZnMvYWlvLmMKPiBpbmRleCAzNDkwZDFm
YTBlMTYuLmEyMWFjYjdlZTJhNSAxMDA2NDQKPiAtLS0gYS9mcy9haW8uYwo+ICsrKyBiL2ZzL2Fp
by5jCj4gQEAgLTExNTQsOSArMTE1NCw3IEBAIHN0YXRpYyB2b2lkIGFpb19jb21wbGV0ZShzdHJ1
Y3QgYWlvX2tpb2NiICppb2NiKQo+ICAgICAgICAgICogbGlrZSBpbiB3YWtlX3VwX2JpdCgpIHdo
ZXJlIGNsZWFyaW5nIGEgYml0IGhhcyB0byBiZQo+ICAgICAgICAgICogb3JkZXJlZCB3aXRoIHRo
ZSB1bmxvY2tlZCB0ZXN0Lgo+ICAgICAgICAgICovCj4gLSAgICAgICBzbXBfbWIoKTsKPiAtCj4g
LSAgICAgICBpZiAod2FpdHF1ZXVlX2FjdGl2ZSgmY3R4LT53YWl0KSkKPiArICAgICAgIGlmICh3
cV9oYXNfc2xlZXBlcigmY3R4LT53YWl0KSkKPiAgICAgICAgICAgICAgICAgd2FrZV91cCgmY3R4
LT53YWl0KTsKPiAgfQo+Cj4gZGlmZiAtLWdpdCBhL2ZzL2Jsb2NrX2Rldi5jIGIvZnMvYmxvY2tf
ZGV2LmMKPiBpbmRleCA3NDlmNTk4NDQyNWQuLjgwZTM1Y2JmYzdjYyAxMDA2NDQKPiAtLS0gYS9m
cy9ibG9ja19kZXYuYwo+ICsrKyBiL2ZzL2Jsb2NrX2Rldi5jCj4gQEAgLTE2ODcsNiArMTY4Nyw3
IEBAIGludCBibGtkZXZfZ2V0KHN0cnVjdCBibG9ja19kZXZpY2UgKmJkZXYsIGZtb2RlX3QgbW9k
ZSwgdm9pZCAqaG9sZGVyKQo+ICAgICAgICAgICAgICAgICAvKiB0ZWxsIG90aGVycyB0aGF0IHdl
J3JlIGRvbmUgKi8KPiAgICAgICAgICAgICAgICAgQlVHX09OKHdob2xlLT5iZF9jbGFpbWluZyAh
PSBob2xkZXIpOwo+ICAgICAgICAgICAgICAgICB3aG9sZS0+YmRfY2xhaW1pbmcgPSBOVUxMOwo+
ICsgICAgICAgICAgICAgICBzbXBfbWIoKTsKPiAgICAgICAgICAgICAgICAgd2FrZV91cF9iaXQo
Jndob2xlLT5iZF9jbGFpbWluZywgMCk7Cj4KPiAgICAgICAgICAgICAgICAgc3Bpbl91bmxvY2so
JmJkZXZfbG9jayk7Cj4gZGlmZiAtLWdpdCBhL2ZzL2J0cmZzL2V4dGVudF9pby5jIGIvZnMvYnRy
ZnMvZXh0ZW50X2lvLmMKPiBpbmRleCBkYjMzN2U1M2FhYjMuLmVlMTEzNmFlNDZmZCAxMDA2NDQK
PiAtLS0gYS9mcy9idHJmcy9leHRlbnRfaW8uYwo+ICsrKyBiL2ZzL2J0cmZzL2V4dGVudF9pby5j
Cj4gQEAgLTM2ODMsOSArMzY4Myw3IEBAIHN0YXRpYyBub2lubGluZV9mb3Jfc3RhY2sgaW50IGxv
Y2tfZXh0ZW50X2J1ZmZlcl9mb3JfaW8oc3RydWN0IGV4dGVudF9idWZmZXIgKmViCj4KPiAgc3Rh
dGljIHZvaWQgZW5kX2V4dGVudF9idWZmZXJfd3JpdGViYWNrKHN0cnVjdCBleHRlbnRfYnVmZmVy
ICplYikKPiAgewo+IC0gICAgICAgY2xlYXJfYml0KEVYVEVOVF9CVUZGRVJfV1JJVEVCQUNLLCAm
ZWItPmJmbGFncyk7Cj4gLSAgICAgICBzbXBfbWJfX2FmdGVyX2F0b21pYygpOwo+IC0gICAgICAg
d2FrZV91cF9iaXQoJmViLT5iZmxhZ3MsIEVYVEVOVF9CVUZGRVJfV1JJVEVCQUNLKTsKPiArICAg
ICAgIGNsZWFyX2FuZF93YWtlX3VwX2JpdChFWFRFTlRfQlVGRkVSX1dSSVRFQkFDSywgJmViLT5i
ZmxhZ3MpOwo+ICB9Cj4KPiAgc3RhdGljIHZvaWQgc2V0X2J0cmVlX2lvZXJyKHN0cnVjdCBwYWdl
ICpwYWdlKQo+IGRpZmYgLS1naXQgYS9mcy9jYWNoZWZpbGVzL25hbWVpLmMgYi9mcy9jYWNoZWZp
bGVzL25hbWVpLmMKPiBpbmRleCBlY2M4ZWNiYmZhNWEuLmVjZWJiYTcyZWM3ZCAxMDA2NDQKPiAt
LS0gYS9mcy9jYWNoZWZpbGVzL25hbWVpLmMKPiArKysgYi9mcy9jYWNoZWZpbGVzL25hbWVpLmMK
PiBAQCAtMjY3LDYgKzI2Nyw3IEBAIHZvaWQgY2FjaGVmaWxlc19tYXJrX29iamVjdF9pbmFjdGl2
ZShzdHJ1Y3QgY2FjaGVmaWxlc19jYWNoZSAqY2FjaGUsCj4gICAgICAgICBjbGVhcl9iaXQoQ0FD
SEVGSUxFU19PQkpFQ1RfQUNUSVZFLCAmb2JqZWN0LT5mbGFncyk7Cj4gICAgICAgICB3cml0ZV91
bmxvY2soJmNhY2hlLT5hY3RpdmVfbG9jayk7Cj4KPiArICAgICAgIHNtcF9tYl9fYWZ0ZXJfYXRv
bWljKCk7Cj4gICAgICAgICB3YWtlX3VwX2JpdCgmb2JqZWN0LT5mbGFncywgQ0FDSEVGSUxFU19P
QkpFQ1RfQUNUSVZFKTsKPgo+ICAgICAgICAgLyogVGhpcyBvYmplY3QgY2FuIG5vdyBiZSBjdWxs
ZWQsIHNvIHdlIG5lZWQgdG8gbGV0IHRoZSBkYWVtb24ga25vdwo+IGRpZmYgLS1naXQgYS9mcy9j
aWZzL2Nvbm5lY3QuYyBiL2ZzL2NpZnMvY29ubmVjdC5jCj4gaW5kZXggOGM0MTIxZGE2MjRlLi44
YzExMTVlZDFjMjggMTAwNjQ0Cj4gLS0tIGEvZnMvY2lmcy9jb25uZWN0LmMKPiArKysgYi9mcy9j
aWZzL2Nvbm5lY3QuYwo+IEBAIC01MjM1LDggKzUyMzUsNyBAQCBjaWZzX3NiX3RsaW5rKHN0cnVj
dCBjaWZzX3NiX2luZm8gKmNpZnNfc2IpCj4gICAgICAgICB9Cj4KPiAgICAgICAgIHRsaW5rLT50
bF90Y29uID0gY2lmc19jb25zdHJ1Y3RfdGNvbihjaWZzX3NiLCBmc3VpZCk7Cj4gLSAgICAgICBj
bGVhcl9iaXQoVENPTl9MSU5LX1BFTkRJTkcsICZ0bGluay0+dGxfZmxhZ3MpOwo+IC0gICAgICAg
d2FrZV91cF9iaXQoJnRsaW5rLT50bF9mbGFncywgVENPTl9MSU5LX1BFTkRJTkcpOwo+ICsgICAg
ICAgY2xlYXJfYW5kX3dha2VfdXBfYml0KFRDT05fTElOS19QRU5ESU5HLCAmdGxpbmstPnRsX2Zs
YWdzKTsKPgo+ICAgICAgICAgaWYgKElTX0VSUih0bGluay0+dGxfdGNvbikpIHsKPiAgICAgICAg
ICAgICAgICAgY2lmc19wdXRfdGxpbmsodGxpbmspOwo+IGRpZmYgLS1naXQgYS9mcy9jaWZzL21p
c2MuYyBiL2ZzL2NpZnMvbWlzYy5jCj4gaW5kZXggYjFhNjk2YTczZjdjLi45NjE3NTFkODkxMTMg
MTAwNjQ0Cj4gLS0tIGEvZnMvY2lmcy9taXNjLmMKPiArKysgYi9mcy9jaWZzL21pc2MuYwo+IEBA
IC01ODQsMTAgKzU4NCw4IEBAIGludCBjaWZzX2dldF93cml0ZXIoc3RydWN0IGNpZnNJbm9kZUlu
Zm8gKmNpbm9kZSkKPiAgICAgICAgIC8qIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIHN0YXJ0ZWQg
c2VydmljaW5nIGFuIG9wbG9jayBicmVhayAqLwo+ICAgICAgICAgaWYgKHRlc3RfYml0KENJRlNf
SU5PREVfUEVORElOR19PUExPQ0tfQlJFQUssICZjaW5vZGUtPmZsYWdzKSkgewo+ICAgICAgICAg
ICAgICAgICBjaW5vZGUtPndyaXRlcnMtLTsKPiAtICAgICAgICAgICAgICAgaWYgKGNpbm9kZS0+
d3JpdGVycyA9PSAwKSB7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJfYml0KENJRlNf
SU5PREVfUEVORElOR19XUklURVJTLCAmY2lub2RlLT5mbGFncyk7Cj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgd2FrZV91cF9iaXQoJmNpbm9kZS0+ZmxhZ3MsIENJRlNfSU5PREVfUEVORElOR19X
UklURVJTKTsKPiAtICAgICAgICAgICAgICAgfQo+ICsgICAgICAgICAgICAgICBpZiAoY2lub2Rl
LT53cml0ZXJzID09IDApCj4gKyAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJfYW5kX3dha2Vf
dXBfYml0KENJRlNfSU5PREVfUEVORElOR19XUklURVJTLCAmY2lub2RlLT5mbGFncyk7Cj4gICAg
ICAgICAgICAgICAgIHNwaW5fdW5sb2NrKCZjaW5vZGUtPndyaXRlcnNfbG9jayk7Cj4gICAgICAg
ICAgICAgICAgIGdvdG8gc3RhcnQ7Cj4gICAgICAgICB9Cj4gQEAgLTU5OSwxMCArNTk3LDggQEAg
dm9pZCBjaWZzX3B1dF93cml0ZXIoc3RydWN0IGNpZnNJbm9kZUluZm8gKmNpbm9kZSkKPiAgewo+
ICAgICAgICAgc3Bpbl9sb2NrKCZjaW5vZGUtPndyaXRlcnNfbG9jayk7Cj4gICAgICAgICBjaW5v
ZGUtPndyaXRlcnMtLTsKPiAtICAgICAgIGlmIChjaW5vZGUtPndyaXRlcnMgPT0gMCkgewo+IC0g
ICAgICAgICAgICAgICBjbGVhcl9iaXQoQ0lGU19JTk9ERV9QRU5ESU5HX1dSSVRFUlMsICZjaW5v
ZGUtPmZsYWdzKTsKPiAtICAgICAgICAgICAgICAgd2FrZV91cF9iaXQoJmNpbm9kZS0+ZmxhZ3Ms
IENJRlNfSU5PREVfUEVORElOR19XUklURVJTKTsKPiAtICAgICAgIH0KPiArICAgICAgIGlmIChj
aW5vZGUtPndyaXRlcnMgPT0gMCkKPiArICAgICAgICAgICAgICAgY2xlYXJfYW5kX3dha2VfdXBf
Yml0KENJRlNfSU5PREVfUEVORElOR19XUklURVJTLCAmY2lub2RlLT5mbGFncyk7Cj4gICAgICAg
ICBzcGluX3VubG9jaygmY2lub2RlLT53cml0ZXJzX2xvY2spOwo+ICB9Cj4KPiBAQCAtNjMwLDgg
KzYyNiw3IEBAIHZvaWQgY2lmc19xdWV1ZV9vcGxvY2tfYnJlYWsoc3RydWN0IGNpZnNGaWxlSW5m
byAqY2ZpbGUpCj4KPiAgdm9pZCBjaWZzX2RvbmVfb3Bsb2NrX2JyZWFrKHN0cnVjdCBjaWZzSW5v
ZGVJbmZvICpjaW5vZGUpCj4gIHsKPiAtICAgICAgIGNsZWFyX2JpdChDSUZTX0lOT0RFX1BFTkRJ
TkdfT1BMT0NLX0JSRUFLLCAmY2lub2RlLT5mbGFncyk7Cj4gLSAgICAgICB3YWtlX3VwX2JpdCgm
Y2lub2RlLT5mbGFncywgQ0lGU19JTk9ERV9QRU5ESU5HX09QTE9DS19CUkVBSyk7Cj4gKyAgICAg
ICBjbGVhcl9hbmRfd2FrZV91cF9iaXQoQ0lGU19JTk9ERV9QRU5ESU5HX09QTE9DS19CUkVBSywg
JmNpbm9kZS0+ZmxhZ3MpOwo+ICB9Cj4KPiAgYm9vbAo+IGRpZmYgLS1naXQgYS9mcy9mc2NhY2hl
L2Nvb2tpZS5jIGIvZnMvZnNjYWNoZS9jb29raWUuYwo+IGluZGV4IDBjZTM5NjU4YTYyMC4uNDBi
YTg5NTdlYmYwIDEwMDY0NAo+IC0tLSBhL2ZzL2ZzY2FjaGUvY29va2llLmMKPiArKysgYi9mcy9m
c2NhY2hlL2Nvb2tpZS5jCj4gQEAgLTM4MSw2ICszODEsNyBAQCB2b2lkIF9fZnNjYWNoZV9lbmFi
bGVfY29va2llKHN0cnVjdCBmc2NhY2hlX2Nvb2tpZSAqY29va2llLAo+Cj4gIG91dF91bmxvY2s6
Cj4gICAgICAgICBjbGVhcl9iaXRfdW5sb2NrKEZTQ0FDSEVfQ09PS0lFX0VOQUJMRU1FTlRfTE9D
SywgJmNvb2tpZS0+ZmxhZ3MpOwo+ICsgICAgICAgc21wX21iX19hZnRlcl9hdG9taWMoKTsKPiAg
ICAgICAgIHdha2VfdXBfYml0KCZjb29raWUtPmZsYWdzLCBGU0NBQ0hFX0NPT0tJRV9FTkFCTEVN
RU5UX0xPQ0spOwo+ICB9Cj4gIEVYUE9SVF9TWU1CT0woX19mc2NhY2hlX2VuYWJsZV9jb29raWUp
Owo+IEBAIC03NzgsNiArNzc5LDcgQEAgdm9pZCBfX2ZzY2FjaGVfZGlzYWJsZV9jb29raWUoc3Ry
dWN0IGZzY2FjaGVfY29va2llICpjb29raWUsCj4KPiAgb3V0X3VubG9ja19lbmFibGU6Cj4gICAg
ICAgICBjbGVhcl9iaXRfdW5sb2NrKEZTQ0FDSEVfQ09PS0lFX0VOQUJMRU1FTlRfTE9DSywgJmNv
b2tpZS0+ZmxhZ3MpOwo+ICsgICAgICAgc21wX21iX19hZnRlcl9hdG9taWMoKTsKPiAgICAgICAg
IHdha2VfdXBfYml0KCZjb29raWUtPmZsYWdzLCBGU0NBQ0hFX0NPT0tJRV9FTkFCTEVNRU5UX0xP
Q0spOwo+ICAgICAgICAgX2xlYXZlKCIiKTsKPiAgfQo+IGRpZmYgLS1naXQgYS9mcy9mc2NhY2hl
L29iamVjdC5jIGIvZnMvZnNjYWNoZS9vYmplY3QuYwo+IGluZGV4IGNmZWJhODM5YTBmMi4uMDhi
MmVkZWM2NTk2IDEwMDY0NAo+IC0tLSBhL2ZzL2ZzY2FjaGUvb2JqZWN0LmMKPiArKysgYi9mcy9m
c2NhY2hlL29iamVjdC5jCj4gQEAgLTUyNCw2ICs1MjQsNyBAQCB2b2lkIGZzY2FjaGVfb2JqZWN0
X2xvb2t1cF9uZWdhdGl2ZShzdHJ1Y3QgZnNjYWNoZV9vYmplY3QgKm9iamVjdCkKPgo+ICAgICAg
ICAgICAgICAgICBfZGVidWcoIndha2UgdXAgbG9va3VwICVwIiwgJmNvb2tpZS0+ZmxhZ3MpOwo+
ICAgICAgICAgICAgICAgICBjbGVhcl9iaXRfdW5sb2NrKEZTQ0FDSEVfQ09PS0lFX0xPT0tJTkdf
VVAsICZjb29raWUtPmZsYWdzKTsKPiArICAgICAgICAgICAgICAgc21wX21iX19hZnRlcl9hdG9t
aWMoKTsKPiAgICAgICAgICAgICAgICAgd2FrZV91cF9iaXQoJmNvb2tpZS0+ZmxhZ3MsIEZTQ0FD
SEVfQ09PS0lFX0xPT0tJTkdfVVApOwo+ICAgICAgICAgfQo+ICAgICAgICAgX2xlYXZlKCIiKTsK
PiBAQCAtNTU5LDYgKzU2MCw3IEBAIHZvaWQgZnNjYWNoZV9vYnRhaW5lZF9vYmplY3Qoc3RydWN0
IGZzY2FjaGVfb2JqZWN0ICpvYmplY3QpCj4gICAgICAgICAgICAgICAgICAqIHRvIGJlZ2luIHNo
b3ZlbGxpbmcgZGF0YS4KPiAgICAgICAgICAgICAgICAgICovCj4gICAgICAgICAgICAgICAgIGNs
ZWFyX2JpdF91bmxvY2soRlNDQUNIRV9DT09LSUVfTE9PS0lOR19VUCwgJmNvb2tpZS0+ZmxhZ3Mp
Owo+ICsgICAgICAgICAgICAgICBzbXBfbWJfX2FmdGVyX2F0b21pYygpOwo+ICAgICAgICAgICAg
ICAgICB3YWtlX3VwX2JpdCgmY29va2llLT5mbGFncywgRlNDQUNIRV9DT09LSUVfTE9PS0lOR19V
UCk7Cj4gICAgICAgICB9IGVsc2Ugewo+ICAgICAgICAgICAgICAgICBmc2NhY2hlX3N0YXQoJmZz
Y2FjaGVfbl9vYmplY3RfY3JlYXRlZCk7Cj4gZGlmZiAtLWdpdCBhL2ZzL2ZzY2FjaGUvcGFnZS5j
IGIvZnMvZnNjYWNoZS9wYWdlLmMKPiBpbmRleCAyNmFmNmZkZjE1MzguLjQ5ZWYyMzg1MDJhMyAx
MDA2NDQKPiAtLS0gYS9mcy9mc2NhY2hlL3BhZ2UuYwo+ICsrKyBiL2ZzL2ZzY2FjaGUvcGFnZS5j
Cj4gQEAgLTExMyw2ICsxMTMsNyBAQCBib29sIF9fZnNjYWNoZV9tYXliZV9yZWxlYXNlX3BhZ2Uo
c3RydWN0IGZzY2FjaGVfY29va2llICpjb29raWUsCj4gICAgICAgICAgICAgICAgIGZzY2FjaGVf
c3RhdCgmZnNjYWNoZV9uX3N0b3JlX3Ztc2Nhbl9nb25lKTsKPiAgICAgICAgIH0KPgo+ICsgICAg
ICAgc21wX21iKCk7Cj4gICAgICAgICB3YWtlX3VwX2JpdCgmY29va2llLT5mbGFncywgMCk7Cj4g
ICAgICAgICB0cmFjZV9mc2NhY2hlX3dha2VfY29va2llKGNvb2tpZSk7Cj4gICAgICAgICBpZiAo
eHBhZ2UpCj4gQEAgLTE3MSw2ICsxNzIsNyBAQCBzdGF0aWMgdm9pZCBmc2NhY2hlX2VuZF9wYWdl
X3dyaXRlKHN0cnVjdCBmc2NhY2hlX29iamVjdCAqb2JqZWN0LAo+ICAgICAgICAgICAgICAgICAg
ICAgICAgIHRyYWNlX2ZzY2FjaGVfcGFnZShjb29raWUsIHBhZ2UsIGZzY2FjaGVfcGFnZV93cml0
ZV9lbmRfcGVuZCk7Cj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgICAgICAgICAgc3Bpbl91
bmxvY2soJmNvb2tpZS0+c3RvcmVzX2xvY2spOwo+ICsgICAgICAgICAgICAgICBzbXBfbWIoKTsK
PiAgICAgICAgICAgICAgICAgd2FrZV91cF9iaXQoJmNvb2tpZS0+ZmxhZ3MsIDApOwo+ICAgICAg
ICAgICAgICAgICB0cmFjZV9mc2NhY2hlX3dha2VfY29va2llKGNvb2tpZSk7Cj4gICAgICAgICB9
IGVsc2Ugewo+IEBAIC05MjIsNiArOTI0LDcgQEAgdm9pZCBmc2NhY2hlX2ludmFsaWRhdGVfd3Jp
dGVzKHN0cnVjdCBmc2NhY2hlX2Nvb2tpZSAqY29va2llKQo+ICAgICAgICAgICAgICAgICAgICAg
ICAgIHB1dF9wYWdlKHJlc3VsdHNbaV0pOwo+ICAgICAgICAgfQo+Cj4gKyAgICAgICBzbXBfbWIo
KTsKPiAgICAgICAgIHdha2VfdXBfYml0KCZjb29raWUtPmZsYWdzLCAwKTsKPiAgICAgICAgIHRy
YWNlX2ZzY2FjaGVfd2FrZV9jb29raWUoY29va2llKTsKPgo+IGRpZmYgLS1naXQgYS9mcy9nZnMy
L2dsb2NrLmMgYi9mcy9nZnMyL2dsb2NrLmMKPiBpbmRleCBmMWViY2I0MmNiZjUuLjgwMjRiNmJk
YjZkNCAxMDA2NDQKPiAtLS0gYS9mcy9nZnMyL2dsb2NrLmMKPiArKysgYi9mcy9nZnMyL2dsb2Nr
LmMKPiBAQCAtMzAyLDkgKzMwMiw3IEBAIHN0YXRpYyBpbmxpbmUgaW50IG1heV9ncmFudChjb25z
dCBzdHJ1Y3QgZ2ZzMl9nbG9jayAqZ2wsIGNvbnN0IHN0cnVjdCBnZnMyX2hvbGRlCj4KPiAgc3Rh
dGljIHZvaWQgZ2ZzMl9ob2xkZXJfd2FrZShzdHJ1Y3QgZ2ZzMl9ob2xkZXIgKmdoKQo+ICB7Cj4g
LSAgICAgICBjbGVhcl9iaXQoSElGX1dBSVQsICZnaC0+Z2hfaWZsYWdzKTsKPiAtICAgICAgIHNt
cF9tYl9fYWZ0ZXJfYXRvbWljKCk7Cj4gLSAgICAgICB3YWtlX3VwX2JpdCgmZ2gtPmdoX2lmbGFn
cywgSElGX1dBSVQpOwo+ICsgICAgICAgY2xlYXJfYW5kX3dha2VfdXBfYml0KEhJRl9XQUlULCAm
Z2gtPmdoX2lmbGFncyk7Cj4gIH0KPgo+ICAvKioKPiBAQCAtNDM2LDkgKzQzNCw3IEBAIHN0YXRp
YyB2b2lkIHN0YXRlX2NoYW5nZShzdHJ1Y3QgZ2ZzMl9nbG9jayAqZ2wsIHVuc2lnbmVkIGludCBu
ZXdfc3RhdGUpCj4gIHN0YXRpYyB2b2lkIGdmczJfZGVtb3RlX3dha2Uoc3RydWN0IGdmczJfZ2xv
Y2sgKmdsKQo+ICB7Cj4gICAgICAgICBnbC0+Z2xfZGVtb3RlX3N0YXRlID0gTE1fU1RfRVhDTFVT
SVZFOwo+IC0gICAgICAgY2xlYXJfYml0KEdMRl9ERU1PVEUsICZnbC0+Z2xfZmxhZ3MpOwo+IC0g
ICAgICAgc21wX21iX19hZnRlcl9hdG9taWMoKTsKPiAtICAgICAgIHdha2VfdXBfYml0KCZnbC0+
Z2xfZmxhZ3MsIEdMRl9ERU1PVEUpOwo+ICsgICAgICAgY2xlYXJfYW5kX3dha2VfdXBfYml0KEdM
Rl9ERU1PVEUsICZnbC0+Z2xfZmxhZ3MpOwo+ICB9Cj4KPiAgLyoqCj4gZGlmZiAtLWdpdCBhL2Zz
L2dmczIvZ2xvcHMuYyBiL2ZzL2dmczIvZ2xvcHMuYwo+IGluZGV4IGNmNGM3NjcwMDViMS4uNjY2
NjI5ZWE1ZGE3IDEwMDY0NAo+IC0tLSBhL2ZzL2dmczIvZ2xvcHMuYwo+ICsrKyBiL2ZzL2dmczIv
Z2xvcHMuYwo+IEBAIC0yMjcsNiArMjI3LDcgQEAgc3RhdGljIHZvaWQgZ2ZzMl9jbGVhcl9nbG9w
X3BlbmRpbmcoc3RydWN0IGdmczJfaW5vZGUgKmlwKQo+ICAgICAgICAgICAgICAgICByZXR1cm47
Cj4KPiAgICAgICAgIGNsZWFyX2JpdF91bmxvY2soR0lGX0dMT1BfUEVORElORywgJmlwLT5pX2Zs
YWdzKTsKPiArICAgICAgIHNtcF9tYl9fYWZ0ZXJfYXRvbWljKCk7Cj4gICAgICAgICB3YWtlX3Vw
X2JpdCgmaXAtPmlfZmxhZ3MsIEdJRl9HTE9QX1BFTkRJTkcpOwoKVGhpcyBzaG91bGQgYmVjb21l
IGNsZWFyX2FuZF93YWtlX3VwX2JpdCBhcyB3ZWxsLCByaWdodD8gVGhlcmUgYXJlCnNldmVyYWwg
bW9yZSBpbnN0YW5jZXMgb2YgdGhlIHNhbWUgcGF0dGVybi4KCj4gIH0KPgo+IGRpZmYgLS1naXQg
YS9mcy9nZnMyL2xvY2tfZGxtLmMgYi9mcy9nZnMyL2xvY2tfZGxtLmMKPiBpbmRleCA0MzYxODA0
NjQ2ZDguLjBmYTE4NjVkZDYwMCAxMDA2NDQKPiAtLS0gYS9mcy9nZnMyL2xvY2tfZGxtLmMKPiAr
KysgYi9mcy9nZnMyL2xvY2tfZGxtLmMKPiBAQCAtMTEzOSw5ICsxMTM5LDcgQEAgc3RhdGljIHZv
aWQgZ2RsbV9yZWNvdmVyX2RvbmUodm9pZCAqYXJnLCBzdHJ1Y3QgZGxtX3Nsb3QgKnNsb3RzLCBp
bnQgbnVtX3Nsb3RzLAo+ICAgICAgICAgaWYgKCF0ZXN0X2JpdChERkxfVU5NT1VOVCwgJmxzLT5s
c19yZWNvdmVyX2ZsYWdzKSkKPiAgICAgICAgICAgICAgICAgcXVldWVfZGVsYXllZF93b3JrKGdm
czJfY29udHJvbF93cSwgJnNkcC0+c2RfY29udHJvbF93b3JrLCAwKTsKPgo+IC0gICAgICAgY2xl
YXJfYml0KERGTF9ETE1fUkVDT1ZFUlksICZscy0+bHNfcmVjb3Zlcl9mbGFncyk7Cj4gLSAgICAg
ICBzbXBfbWJfX2FmdGVyX2F0b21pYygpOwo+IC0gICAgICAgd2FrZV91cF9iaXQoJmxzLT5sc19y
ZWNvdmVyX2ZsYWdzLCBERkxfRExNX1JFQ09WRVJZKTsKPiArICAgICAgIGNsZWFyX2FuZF93YWtl
X3VwX2JpdChERkxfRExNX1JFQ09WRVJZLCAmbHMtPmxzX3JlY292ZXJfZmxhZ3MpOwo+ICAgICAg
ICAgc3Bpbl91bmxvY2soJmxzLT5sc19yZWNvdmVyX3NwaW4pOwo+ICB9Cj4KPiBAQCAtMTI3Niw5
ICsxMjc0LDcgQEAgc3RhdGljIGludCBnZGxtX21vdW50KHN0cnVjdCBnZnMyX3NiZCAqc2RwLCBj
b25zdCBjaGFyICp0YWJsZSkKPiAgICAgICAgIH0KPgo+ICAgICAgICAgbHMtPmxzX2ZpcnN0ID0g
ISF0ZXN0X2JpdChERkxfRklSU1RfTU9VTlQsICZscy0+bHNfcmVjb3Zlcl9mbGFncyk7Cj4gLSAg
ICAgICBjbGVhcl9iaXQoU0RGX05PSk9VUk5BTElELCAmc2RwLT5zZF9mbGFncyk7Cj4gLSAgICAg
ICBzbXBfbWJfX2FmdGVyX2F0b21pYygpOwo+IC0gICAgICAgd2FrZV91cF9iaXQoJnNkcC0+c2Rf
ZmxhZ3MsIFNERl9OT0pPVVJOQUxJRCk7Cj4gKyAgICAgICBjbGVhcl9hbmRfd2FrZV91cF9iaXQo
U0RGX05PSk9VUk5BTElELCAmc2RwLT5zZF9mbGFncyk7Cj4gICAgICAgICByZXR1cm4gMDsKPgo+
ICBmYWlsX3JlbGVhc2U6Cj4gZGlmZiAtLWdpdCBhL2ZzL2dmczIvcmVjb3ZlcnkuYyBiL2ZzL2dm
czIvcmVjb3ZlcnkuYwo+IGluZGV4IDIyOTlhM2ZhMTkxMS4uZWY5YThlZjY2ODliIDEwMDY0NAo+
IC0tLSBhL2ZzL2dmczIvcmVjb3ZlcnkuYwo+ICsrKyBiL2ZzL2dmczIvcmVjb3ZlcnkuYwo+IEBA
IC00MzYsOSArNDM2LDcgQEAgdm9pZCBnZnMyX3JlY292ZXJfZnVuYyhzdHJ1Y3Qgd29ya19zdHJ1
Y3QgKndvcmspCj4gICAgICAgICBqZC0+amRfcmVjb3Zlcl9lcnJvciA9IGVycm9yOwo+ICAgICAg
ICAgZ2ZzMl9yZWNvdmVyeV9kb25lKHNkcCwgamQtPmpkX2ppZCwgTE1fUkRfR0FWRVVQKTsKPiAg
ZG9uZToKPiAtICAgICAgIGNsZWFyX2JpdChKREZfUkVDT1ZFUlksICZqZC0+amRfZmxhZ3MpOwo+
IC0gICAgICAgc21wX21iX19hZnRlcl9hdG9taWMoKTsKPiAtICAgICAgIHdha2VfdXBfYml0KCZq
ZC0+amRfZmxhZ3MsIEpERl9SRUNPVkVSWSk7Cj4gKyAgICAgICBjbGVhcl9hbmRfd2FrZV91cF9i
aXQoSkRGX1JFQ09WRVJZLCAmamQtPmpkX2ZsYWdzKTsKPiAgfQo+Cj4gIGludCBnZnMyX3JlY292
ZXJfam91cm5hbChzdHJ1Y3QgZ2ZzMl9qZGVzYyAqamQsIGJvb2wgd2FpdCkKPiBkaWZmIC0tZ2l0
IGEvZnMvZ2ZzMi9zdXBlci5jIGIvZnMvZ2ZzMi9zdXBlci5jCj4gaW5kZXggYjcwY2VhNWM4YzU5
Li4yOGZmMmUxMGJkZDkgMTAwNjQ0Cj4gLS0tIGEvZnMvZ2ZzMi9zdXBlci5jCj4gKysrIGIvZnMv
Z2ZzMi9zdXBlci5jCj4gQEAgLTk4NSw2ICs5ODUsNyBAQCB2b2lkIGdmczJfZnJlZXplX2Z1bmMo
c3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQo+ICAgICAgICAgfQo+ICAgICAgICAgZGVhY3RpdmF0
ZV9zdXBlcihzYik7Cj4gICAgICAgICBjbGVhcl9iaXRfdW5sb2NrKFNERl9GU19GUk9aRU4sICZz
ZHAtPnNkX2ZsYWdzKTsKPiArICAgICAgIHNtcF9tYl9fYWZ0ZXJfYXRvbWljKCk7Cj4gICAgICAg
ICB3YWtlX3VwX2JpdCgmc2RwLT5zZF9mbGFncywgU0RGX0ZTX0ZST1pFTik7Cj4gICAgICAgICBy
ZXR1cm47Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZnMvZ2ZzMi9zeXMuYyBiL2ZzL2dmczIvc3lzLmMK
PiBpbmRleCAxNTlhZWRmNjNjMmEuLmIzMzc3OThkODk1NyAxMDA2NDQKPiAtLS0gYS9mcy9nZnMy
L3N5cy5jCj4gKysrIGIvZnMvZ2ZzMi9zeXMuYwo+IEBAIC01MDUsOSArNTA1LDcgQEAgc3RhdGlj
IHNzaXplX3QgamlkX3N0b3JlKHN0cnVjdCBnZnMyX3NiZCAqc2RwLCBjb25zdCBjaGFyICpidWYs
IHNpemVfdCBsZW4pCj4gICAgICAgICBpZiAoc2RwLT5zZF9hcmdzLmFyX3NwZWN0YXRvciAmJiBq
aWQgPiAwKQo+ICAgICAgICAgICAgICAgICBydiA9IGppZCA9IC1FSU5WQUw7Cj4gICAgICAgICBz
ZHAtPnNkX2xvY2tzdHJ1Y3QubHNfamlkID0gamlkOwo+IC0gICAgICAgY2xlYXJfYml0KFNERl9O
T0pPVVJOQUxJRCwgJnNkcC0+c2RfZmxhZ3MpOwo+IC0gICAgICAgc21wX21iX19hZnRlcl9hdG9t
aWMoKTsKPiAtICAgICAgIHdha2VfdXBfYml0KCZzZHAtPnNkX2ZsYWdzLCBTREZfTk9KT1VSTkFM
SUQpOwo+ICsgICAgICAgY2xlYXJfYW5kX3dha2VfdXBfYml0KFNERl9OT0pPVVJOQUxJRCwgJnNk
cC0+c2RfZmxhZ3MpOwo+ICBvdXQ6Cj4gICAgICAgICBzcGluX3VubG9jaygmc2RwLT5zZF9qaW5k
ZXhfc3Bpbik7Cj4gICAgICAgICByZXR1cm4gcnYgPyBydiA6IGxlbjsKPiBkaWZmIC0tZ2l0IGEv
ZnMvbmZzL25mczRzdGF0ZS5jIGIvZnMvbmZzL25mczRzdGF0ZS5jCj4gaW5kZXggZTJlM2M0ZjA0
ZDNlLi5hM2VkNDEzYTM4YzUgMTAwNjQ0Cj4gLS0tIGEvZnMvbmZzL25mczRzdGF0ZS5jCj4gKysr
IGIvZnMvbmZzL25mczRzdGF0ZS5jCj4gQEAgLTExOTYsOSArMTE5Niw3IEBAIHN0YXRpYyBpbnQg
bmZzNF9ydW5fc3RhdGVfbWFuYWdlcih2b2lkICopOwo+ICBzdGF0aWMgdm9pZCBuZnM0X2NsZWFy
X3N0YXRlX21hbmFnZXJfYml0KHN0cnVjdCBuZnNfY2xpZW50ICpjbHApCj4gIHsKPiAgICAgICAg
IHNtcF9tYl9fYmVmb3JlX2F0b21pYygpOwo+IC0gICAgICAgY2xlYXJfYml0KE5GUzRDTE5UX01B
TkFHRVJfUlVOTklORywgJmNscC0+Y2xfc3RhdGUpOwo+IC0gICAgICAgc21wX21iX19hZnRlcl9h
dG9taWMoKTsKPiAtICAgICAgIHdha2VfdXBfYml0KCZjbHAtPmNsX3N0YXRlLCBORlM0Q0xOVF9N
QU5BR0VSX1JVTk5JTkcpOwo+ICsgICAgICAgY2xlYXJfYW5kX3dha2VfdXBfYml0KE5GUzRDTE5U
X01BTkFHRVJfUlVOTklORywgJmNscC0+Y2xfc3RhdGUpOwo+ICAgICAgICAgcnBjX3dha2VfdXAo
JmNscC0+Y2xfcnBjd2FpdHEpOwo+ICB9Cj4KPiBkaWZmIC0tZ2l0IGEvZnMvbmZzL3BuZnNfbmZz
LmMgYi9mcy9uZnMvcG5mc19uZnMuYwo+IGluZGV4IGMwMDQ2YzM0ODkxMC4uMzdjNGZlNWE1OTVj
IDEwMDY0NAo+IC0tLSBhL2ZzL25mcy9wbmZzX25mcy5jCj4gKysrIGIvZnMvbmZzL3BuZnNfbmZz
LmMKPiBAQCAtNTY3LDkgKzU2Nyw3IEBAIHN0YXRpYyB2b2lkIG5mczRfd2FpdF9kc19jb25uZWN0
KHN0cnVjdCBuZnM0X3BuZnNfZHMgKmRzKQo+ICBzdGF0aWMgdm9pZCBuZnM0X2NsZWFyX2RzX2Nv
bm5fYml0KHN0cnVjdCBuZnM0X3BuZnNfZHMgKmRzKQo+ICB7Cj4gICAgICAgICBzbXBfbWJfX2Jl
Zm9yZV9hdG9taWMoKTsKPiAtICAgICAgIGNsZWFyX2JpdChORlM0RFNfQ09OTkVDVElORywgJmRz
LT5kc19zdGF0ZSk7Cj4gLSAgICAgICBzbXBfbWJfX2FmdGVyX2F0b21pYygpOwo+IC0gICAgICAg
d2FrZV91cF9iaXQoJmRzLT5kc19zdGF0ZSwgTkZTNERTX0NPTk5FQ1RJTkcpOwo+ICsgICAgICAg
Y2xlYXJfYW5kX3dha2VfdXBfYml0KE5GUzREU19DT05ORUNUSU5HLCAmZHMtPmRzX3N0YXRlKTsK
PiAgfQo+Cj4gIHN0YXRpYyBzdHJ1Y3QgbmZzX2NsaWVudCAqKCpnZXRfdjNfZHNfY29ubmVjdCko
Cj4gZGlmZiAtLWdpdCBhL2ZzL25mc2QvbmZzNHJlY292ZXIuYyBiL2ZzL25mc2QvbmZzNHJlY292
ZXIuYwo+IGluZGV4IDg3Njc5NTU3ZDBkNi4uMGEzMGY5Y2RmNjZhIDEwMDY0NAo+IC0tLSBhL2Zz
L25mc2QvbmZzNHJlY292ZXIuYwo+ICsrKyBiL2ZzL25mc2QvbmZzNHJlY292ZXIuYwo+IEBAIC0x
NjM4LDkgKzE2MzgsNyBAQCBzdGF0aWMgdm9pZAo+ICBuZnNkNF9jbHRyYWNrX3VwY2FsbF91bmxv
Y2soc3RydWN0IG5mczRfY2xpZW50ICpjbHApCj4gIHsKPiAgICAgICAgIHNtcF9tYl9fYmVmb3Jl
X2F0b21pYygpOwo+IC0gICAgICAgY2xlYXJfYml0KE5GU0Q0X0NMSUVOVF9VUENBTExfTE9DSywg
JmNscC0+Y2xfZmxhZ3MpOwo+IC0gICAgICAgc21wX21iX19hZnRlcl9hdG9taWMoKTsKPiAtICAg
ICAgIHdha2VfdXBfYml0KCZjbHAtPmNsX2ZsYWdzLCBORlNENF9DTElFTlRfVVBDQUxMX0xPQ0sp
Owo+ICsgICAgICAgY2xlYXJfYW5kX3dha2VfdXBfYml0KE5GU0Q0X0NMSUVOVF9VUENBTExfTE9D
SywgJmNscC0+Y2xfZmxhZ3MpOwo+ICB9Cj4KPiAgc3RhdGljIHZvaWQKPiBkaWZmIC0tZ2l0IGEv
ZnMvb3JhbmdlZnMvZmlsZS5jIGIvZnMvb3JhbmdlZnMvZmlsZS5jCj4gaW5kZXggYTM1YzE3MDE3
MjEwLi4xOTU4YmI0NTcxNDMgMTAwNjQ0Cj4gLS0tIGEvZnMvb3JhbmdlZnMvZmlsZS5jCj4gKysr
IGIvZnMvb3JhbmdlZnMvZmlsZS5jCj4gQEAgLTMwMiw3ICszMDIsNyBAQCBpbnQgb3JhbmdlZnNf
cmV2YWxpZGF0ZV9tYXBwaW5nKHN0cnVjdCBpbm9kZSAqaW5vZGUpCj4gICAgICAgICBvcmFuZ2Vm
c19pbm9kZS0+bWFwcGluZ190aW1lID0gamlmZmllcyArCj4gICAgICAgICAgICAgb3JhbmdlZnNf
Y2FjaGVfdGltZW91dF9tc2VjcypIWi8xMDAwOwo+Cj4gLSAgICAgICBjbGVhcl9iaXQoMSwgYml0
bG9jayk7Cj4gKyAgICAgICBjbGVhcl9iaXRfdW5sb2NrKDEsIGJpdGxvY2spOwo+ICAgICAgICAg
c21wX21iX19hZnRlcl9hdG9taWMoKTsKPiAgICAgICAgIHdha2VfdXBfYml0KGJpdGxvY2ssIDEp
Owo+Cj4gZGlmZiAtLWdpdCBhL2tlcm5lbC9zY2hlZC93YWl0X2JpdC5jIGIva2VybmVsL3NjaGVk
L3dhaXRfYml0LmMKPiBpbmRleCA0NWViYTE4YTI4OTguLjI2NjI5NzU0NzNlMyAxMDA2NDQKPiAt
LS0gYS9rZXJuZWwvc2NoZWQvd2FpdF9iaXQuYwo+ICsrKyBiL2tlcm5lbC9zY2hlZC93YWl0X2Jp
dC5jCj4gQEAgLTE4OSw2ICsxODksNyBAQCBFWFBPUlRfU1lNQk9MKGluaXRfd2FpdF92YXJfZW50
cnkpOwo+Cj4gIHZvaWQgd2FrZV91cF92YXIodm9pZCAqdmFyKQo+ICB7Cj4gKyAgICAgICBzbXBf
bWIoKTsKPiAgICAgICAgIF9fd2FrZV91cF9iaXQoX192YXJfd2FpdHF1ZXVlKHZhciksIHZhciwg
LTEpOwo+ICB9Cj4gIEVYUE9SVF9TWU1CT0wod2FrZV91cF92YXIpOwo+IGRpZmYgLS1naXQgYS9u
ZXQvYmx1ZXRvb3RoL2hjaV9ldmVudC5jIGIvbmV0L2JsdWV0b290aC9oY2lfZXZlbnQuYwo+IGlu
ZGV4IDllNGZjZjQwNmQ5Yy4uNGU1N2YxYTFiN2EyIDEwMDY0NAo+IC0tLSBhL25ldC9ibHVldG9v
dGgvaGNpX2V2ZW50LmMKPiArKysgYi9uZXQvYmx1ZXRvb3RoL2hjaV9ldmVudC5jCj4gQEAgLTUw
LDkgKzUwLDcgQEAgc3RhdGljIHZvaWQgaGNpX2NjX2lucXVpcnlfY2FuY2VsKHN0cnVjdCBoY2lf
ZGV2ICpoZGV2LCBzdHJ1Y3Qgc2tfYnVmZiAqc2tiKQo+ICAgICAgICAgaWYgKHN0YXR1cykKPiAg
ICAgICAgICAgICAgICAgcmV0dXJuOwo+Cj4gLSAgICAgICBjbGVhcl9iaXQoSENJX0lOUVVJUlks
ICZoZGV2LT5mbGFncyk7Cj4gLSAgICAgICBzbXBfbWJfX2FmdGVyX2F0b21pYygpOyAvKiB3YWtl
X3VwX2JpdCBhZHZpc2VzIGFib3V0IHRoaXMgYmFycmllciAqLwo+IC0gICAgICAgd2FrZV91cF9i
aXQoJmhkZXYtPmZsYWdzLCBIQ0lfSU5RVUlSWSk7Cj4gKyAgICAgICBjbGVhcl9hbmRfd2FrZV91
cF9iaXQoSENJX0lOUVVJUlksICZoZGV2LT5mbGFncyk7Cj4KPiAgICAgICAgIGhjaV9kZXZfbG9j
ayhoZGV2KTsKPiAgICAgICAgIC8qIFNldCBkaXNjb3Zlcnkgc3RhdGUgdG8gc3RvcHBlZCBpZiB3
ZSdyZSBub3QgZG9pbmcgTEUgYWN0aXZlCj4gQEAgLTIzNDIsNyArMjM0MCw2IEBAIHN0YXRpYyB2
b2lkIGhjaV9pbnF1aXJ5X2NvbXBsZXRlX2V2dChzdHJ1Y3QgaGNpX2RldiAqaGRldiwgc3RydWN0
IHNrX2J1ZmYgKnNrYikKPiAgICAgICAgIGlmICghdGVzdF9hbmRfY2xlYXJfYml0KEhDSV9JTlFV
SVJZLCAmaGRldi0+ZmxhZ3MpKQo+ICAgICAgICAgICAgICAgICByZXR1cm47Cj4KPiAtICAgICAg
IHNtcF9tYl9fYWZ0ZXJfYXRvbWljKCk7IC8qIHdha2VfdXBfYml0IGFkdmlzZXMgYWJvdXQgdGhp
cyBiYXJyaWVyICovCj4gICAgICAgICB3YWtlX3VwX2JpdCgmaGRldi0+ZmxhZ3MsIEhDSV9JTlFV
SVJZKTsKPgo+ICAgICAgICAgaWYgKCFoY2lfZGV2X3Rlc3RfZmxhZyhoZGV2LCBIQ0lfTUdNVCkp
Cj4gZGlmZiAtLWdpdCBhL25ldC9yZHMvaWJfcmVjdi5jIGIvbmV0L3Jkcy9pYl9yZWN2LmMKPiBp
bmRleCAzY2FlODhjYmRhYTAuLjJjMjc3MzE3Mjk2NCAxMDA2NDQKPiAtLS0gYS9uZXQvcmRzL2li
X3JlY3YuYwo+ICsrKyBiL25ldC9yZHMvaWJfcmVjdi5jCj4gQEAgLTM2Myw2ICszNjMsNyBAQCBz
dGF0aWMgaW50IGFjcXVpcmVfcmVmaWxsKHN0cnVjdCByZHNfY29ubmVjdGlvbiAqY29ubikKPiAg
c3RhdGljIHZvaWQgcmVsZWFzZV9yZWZpbGwoc3RydWN0IHJkc19jb25uZWN0aW9uICpjb25uKQo+
ICB7Cj4gICAgICAgICBjbGVhcl9iaXQoUkRTX1JFQ1ZfUkVGSUxMLCAmY29ubi0+Y19mbGFncyk7
Cj4gKyAgICAgICBzbXBfbWJfX2FmdGVyX2F0b21pYygpOwo+Cj4gICAgICAgICAvKiBXZSBkb24n
dCB1c2Ugd2FpdF9vbl9iaXQoKS93YWtlX3VwX2JpdCgpIGJlY2F1c2Ugb3VyIHdha2luZyBpcyBp
biBhCj4gICAgICAgICAgKiBob3QgcGF0aCBhbmQgZmluZGluZyB3YWl0ZXJzIGlzIHZlcnkgcmFy
ZS4gIFdlIGRvbid0IHdhbnQgdG8gd2Fsawo+IGRpZmYgLS1naXQgYS9zZWN1cml0eS9rZXlzL2dj
LmMgYi9zZWN1cml0eS9rZXlzL2djLmMKPiBpbmRleCA0NGU1OGEzZTU2NjMuLmY0NTI4MTZiZDdk
MCAxMDA2NDQKPiAtLS0gYS9zZWN1cml0eS9rZXlzL2djLmMKPiArKysgYi9zZWN1cml0eS9rZXlz
L2djLmMKPiBAQCAtMzA4LDkgKzMwOCw4IEBAIHN0YXRpYyB2b2lkIGtleV9nYXJiYWdlX2NvbGxl
Y3RvcihzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCj4KPiAgICAgICAgIGlmICh1bmxpa2VseShn
Y19zdGF0ZSAmIEtFWV9HQ19SRUFQSU5HX0RFQURfMykpIHsKPiAgICAgICAgICAgICAgICAga2Rl
YnVnKCJkZWFkIHdha2UiKTsKPiAtICAgICAgICAgICAgICAgc21wX21iKCk7Cj4gLSAgICAgICAg
ICAgICAgIGNsZWFyX2JpdChLRVlfR0NfUkVBUElOR19LRVlUWVBFLCAma2V5X2djX2ZsYWdzKTsK
PiAtICAgICAgICAgICAgICAgd2FrZV91cF9iaXQoJmtleV9nY19mbGFncywgS0VZX0dDX1JFQVBJ
TkdfS0VZVFlQRSk7Cj4gKyAgICAgICAgICAgICAgIHNtcF9tYl9fYmVmb3JlX2F0b21pYygpOwo+
ICsgICAgICAgICAgICAgICBjbGVhcl9hbmRfd2FrZV91cF9iaXQoS0VZX0dDX1JFQVBJTkdfS0VZ
VFlQRSwgJmtleV9nY19mbGFncyk7Cj4gICAgICAgICB9Cj4KPiAgICAgICAgIGlmIChnY19zdGF0
ZSAmIEtFWV9HQ19SRUFQX0FHQUlOKQoKVGhhbmtzLApBbmRyZWFzCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJp
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
