Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4DB92FC124
	for <lists+dri-devel@lfdr.de>; Thu, 14 Nov 2019 09:08:44 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EB5E26E2D7;
	Thu, 14 Nov 2019 08:07:57 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from relmlie5.idc.renesas.com (relmlor1.renesas.com
 [210.160.252.171])
 by gabe.freedesktop.org (Postfix) with ESMTP id 407066ED75
 for <dri-devel@lists.freedesktop.org>; Wed, 13 Nov 2019 15:57:50 +0000 (UTC)
X-IronPort-AV: E=Sophos;i="5.68,300,1569250800"; d="scan'208";a="31593920"
Received: from unknown (HELO relmlir6.idc.renesas.com) ([10.200.68.152])
 by relmlie5.idc.renesas.com with ESMTP; 14 Nov 2019 00:52:06 +0900
Received: from fabrizio-dev.ree.adwin.renesas.com (unknown [10.226.36.196])
 by relmlir6.idc.renesas.com (Postfix) with ESMTP id CBC4B400ED5C;
 Thu, 14 Nov 2019 00:52:01 +0900 (JST)
From: Fabrizio Castro <fabrizio.castro@bp.renesas.com>
To: Neil Armstrong <narmstrong@baylibre.com>, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel@ffwll.ch>, Rob Herring <robh+dt@kernel.org>,
 Mark Rutland <mark.rutland@arm.com>, Andrzej Hajda <a.hajda@samsung.com>
Subject: [PATCH v4 05/13] drm/bridge: Repurpose lvds-encoder.c
Date: Wed, 13 Nov 2019 15:51:24 +0000
Message-Id: <1573660292-10629-6-git-send-email-fabrizio.castro@bp.renesas.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1573660292-10629-1-git-send-email-fabrizio.castro@bp.renesas.com>
References: <1573660292-10629-1-git-send-email-fabrizio.castro@bp.renesas.com>
X-Mailman-Approved-At: Thu, 14 Nov 2019 08:07:50 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Fabrizio Castro <fabrizio.castro@bp.renesas.com>,
 devicetree@vger.kernel.org, Chris Paterson <Chris.Paterson2@renesas.com>,
 Geert Uytterhoeven <geert+renesas@glider.be>,
 Kieran Bingham <kieran.bingham+renesas@ideasonboard.com>,
 Magnus Damm <magnus.damm@gmail.com>, dri-devel@lists.freedesktop.org,
 Biju Das <biju.das@bp.renesas.com>, linux-renesas-soc@vger.kernel.org,
 Simon Horman <horms@verge.net.au>, Jacopo Mondi <jacopo+renesas@jmondi.org>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Peter Rosin <peda@axentia.se>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

bHZkcy1lbmNvZGVyLmMgaW1wbGVtZW50YXRpb24gaXMgYWxzbyBzdWl0YWJsZSBmb3IgTFZEUyBk
ZWNvZGVycywKbm90IGp1c3QgTFZEUyBlbmNvZGVycy4KSW5zdGVhZCBvZiBjcmVhdGluZyBhIG5l
dyBkcml2ZXIgZm9yIGFkZHJlc3Npbmcgc3VwcG9ydCBmb3IKdHJhbnNwYXJlbnQgTFZEUyBkZWNv
ZGVycywgcmVwdXJwb3NlIGx2ZHMtZW5jb2Rlci5jIGZvciB0aGUgZ3JlYXRlcgpnb29kIHdpdGgg
dGhpcyBwYXRjaC4KClRoaXMgcGF0Y2ggb25seSAicmVicmFuZHMiIHRoZSBsdmRzLWVuY29kZXIu
YyBkcml2ZXIsIHRvIG1ha2UgaXQKc3VpdGFibGUgZm9yIGhvc3RpbmcgTFZEUyBkZWNvZGVycyBz
dXBwb3J0LiBUaGUgYWN0dWFsIHN1cHBvcnQgZm9yCkxWRFMgZGVjb2RlcnMgd2lsbCBjb21lIHdp
dGggYSBsYXRlciBwYXRjaC4KClNpZ25lZC1vZmYtYnk6IEZhYnJpemlvIENhc3RybyA8ZmFicml6
aW8uY2FzdHJvQGJwLnJlbmVzYXMuY29tPgoKLS0tCnYzLT52NDoKKiBUaGUgcGF0Y2ggbm93IG9u
bHkgcmVuYW1lcyB0aGUgZHJpdmVyICh3aXRoIHJlbGF0ZWQgZGF0YSBzdHJ1Y3R1cmVzCiAgYW5k
IGJ1aWxkIG9wdGlvbnMpLCBjaGFuZ2VzIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgbW9kdWxlLCBh
bmQKICByZWZyZXNoZXMgdGhlIGNvcHlyaWdodAp2Mi0+djM6CiogTm8gY2hhbmdlCnYxLT52MjoK
KiBObyBjaGFuZ2UKLS0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL0tjb25maWcgICAgICAgICAg
ICAgICAgICAgICB8ICA4ICstCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL01ha2VmaWxlICAgICAg
ICAgICAgICAgICAgICB8ICAyICstCiAuLi4vZHJtL2JyaWRnZS97bHZkcy1lbmNvZGVyLmMgPT4g
bHZkcy1jb2RlYy5jfSAgICB8IDk3ICsrKysrKysrKysrLS0tLS0tLS0tLS0KIDMgZmlsZXMgY2hh
bmdlZCwgNTMgaW5zZXJ0aW9ucygrKSwgNTQgZGVsZXRpb25zKC0pCiByZW5hbWUgZHJpdmVycy9n
cHUvZHJtL2JyaWRnZS97bHZkcy1lbmNvZGVyLmMgPT4gbHZkcy1jb2RlYy5jfSAoNDUlKQoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvS2NvbmZpZyBiL2RyaXZlcnMvZ3B1L2Ry
bS9icmlkZ2UvS2NvbmZpZwppbmRleCAzNDM2Mjk3Li5mYmJlYTQ2IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYnJpZGdlL0tjb25maWcKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9L
Y29uZmlnCkBAIC00NSwxNCArNDUsMTQgQEAgY29uZmlnIERSTV9EVU1CX1ZHQV9EQUMKIAkgIFN1
cHBvcnQgZm9yIG5vbi1wcm9ncmFtbWFibGUgUkdCIHRvIFZHQSBEQUMgYnJpZGdlcywgc3VjaCBh
cyBBREkKIAkgIEFEVjcxMjMsIFRJIFRIUzgxMzQgYW5kIFRIUzgxMzUgb3IgcGFzc2l2ZSByZXNp
c3RvciBsYWRkZXIgREFDcy4KIAotY29uZmlnIERSTV9MVkRTX0VOQ09ERVIKLQl0cmlzdGF0ZSAi
VHJhbnNwYXJlbnQgcGFyYWxsZWwgdG8gTFZEUyBlbmNvZGVyIHN1cHBvcnQiCitjb25maWcgRFJN
X0xWRFNfQ09ERUMKKwl0cmlzdGF0ZSAiVHJhbnNwYXJlbnQgTFZEUyBlbmNvZGVycyBhbmQgZGVj
b2RlcnMgc3VwcG9ydCIKIAlkZXBlbmRzIG9uIE9GCiAJc2VsZWN0IERSTV9LTVNfSEVMUEVSCiAJ
c2VsZWN0IERSTV9QQU5FTF9CUklER0UKIAloZWxwCi0JICBTdXBwb3J0IGZvciB0cmFuc3BhcmVu
dCBwYXJhbGxlbCB0byBMVkRTIGVuY29kZXJzIHRoYXQgZG9uJ3QgcmVxdWlyZQotCSAgYW55IGNv
bmZpZ3VyYXRpb24uCisJICBTdXBwb3J0IGZvciB0cmFuc3BhcmVudCBMVkRTIGVuY29kZXJzIGFu
ZCBkZWNvZGVycyB0aGF0IGRvbid0CisJICByZXF1aXJlIGFueSBjb25maWd1cmF0aW9uLgogCiBj
b25maWcgRFJNX01FR0FDSElQU19TVERQWFhYWF9HRV9CODUwVjNfRlcKIAl0cmlzdGF0ZSAiTWVn
YUNoaXBzIHN0ZHA0MDI4LWdlLWI4NTB2My1mdyBhbmQgc3RkcDI2OTAtZ2UtYjg1MHYzLWZ3Igpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1
L2RybS9icmlkZ2UvTWFrZWZpbGUKaW5kZXggNDkzNGZjZi4uOGE5MTc4YSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJp
ZGdlL01ha2VmaWxlCkBAIC0yLDcgKzIsNyBAQAogb2JqLSQoQ09ORklHX0RSTV9BTkFMT0dJWF9B
Tlg3OFhYKSArPSBhbmFsb2dpeC1hbng3OHh4Lm8KIG9iai0kKENPTkZJR19EUk1fQ0ROU19EU0kp
ICs9IGNkbnMtZHNpLm8KIG9iai0kKENPTkZJR19EUk1fRFVNQl9WR0FfREFDKSArPSBkdW1iLXZn
YS1kYWMubwotb2JqLSQoQ09ORklHX0RSTV9MVkRTX0VOQ09ERVIpICs9IGx2ZHMtZW5jb2Rlci5v
CitvYmotJChDT05GSUdfRFJNX0xWRFNfQ09ERUMpICs9IGx2ZHMtY29kZWMubwogb2JqLSQoQ09O
RklHX0RSTV9NRUdBQ0hJUFNfU1REUFhYWFhfR0VfQjg1MFYzX0ZXKSArPSBtZWdhY2hpcHMtc3Rk
cHh4eHgtZ2UtYjg1MHYzLWZ3Lm8KIG9iai0kKENPTkZJR19EUk1fTlhQX1BUTjM0NjApICs9IG54
cC1wdG4zNDYwLm8KIG9iai0kKENPTkZJR19EUk1fUEFSQURFX1BTODYyMikgKz0gcGFyYWRlLXBz
ODYyMi5vCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2x2ZHMtZW5jb2Rlci5j
IGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9sdmRzLWNvZGVjLmMKc2ltaWxhcml0eSBpbmRleCA0
NSUKcmVuYW1lIGZyb20gZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9sdmRzLWVuY29kZXIuYwpyZW5h
bWUgdG8gZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9sdmRzLWNvZGVjLmMKaW5kZXggZTIxMzJhOC4u
YjU4MDFhMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9sdmRzLWVuY29kZXIu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2x2ZHMtY29kZWMuYwpAQCAtMSw1ICsxLDYg
QEAKIC8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCiAvKgorICog
Q29weXJpZ2h0IChDKSAyMDE5IFJlbmVzYXMgRWxlY3Ryb25pY3MgQ29ycG9yYXRpb24KICAqIENv
cHlyaWdodCAoQykgMjAxNiBMYXVyZW50IFBpbmNoYXJ0IDxsYXVyZW50LnBpbmNoYXJ0QGlkZWFz
b25ib2FyZC5jb20+CiAgKi8KIApAQCAtMTIsNjUgKzEzLDYyIEBACiAjaW5jbHVkZSA8ZHJtL2Ry
bV9icmlkZ2UuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3BhbmVsLmg+CiAKLXN0cnVjdCBsdmRzX2Vu
Y29kZXIgeworc3RydWN0IGx2ZHNfY29kZWMgewogCXN0cnVjdCBkcm1fYnJpZGdlIGJyaWRnZTsK
IAlzdHJ1Y3QgZHJtX2JyaWRnZSAqcGFuZWxfYnJpZGdlOwogCXN0cnVjdCBncGlvX2Rlc2MgKnBv
d2VyZG93bl9ncGlvOwogfTsKIAotc3RhdGljIGludCBsdmRzX2VuY29kZXJfYXR0YWNoKHN0cnVj
dCBkcm1fYnJpZGdlICpicmlkZ2UpCitzdGF0aWMgaW50IGx2ZHNfY29kZWNfYXR0YWNoKHN0cnVj
dCBkcm1fYnJpZGdlICpicmlkZ2UpCiB7Ci0Jc3RydWN0IGx2ZHNfZW5jb2RlciAqbHZkc19lbmNv
ZGVyID0gY29udGFpbmVyX29mKGJyaWRnZSwKLQkJCQkJCQkgc3RydWN0IGx2ZHNfZW5jb2RlciwK
LQkJCQkJCQkgYnJpZGdlKTsKKwlzdHJ1Y3QgbHZkc19jb2RlYyAqbHZkc19jb2RlYyA9IGNvbnRh
aW5lcl9vZihicmlkZ2UsCisJCQkJCQkgICAgIHN0cnVjdCBsdmRzX2NvZGVjLCBicmlkZ2UpOwog
Ci0JcmV0dXJuIGRybV9icmlkZ2VfYXR0YWNoKGJyaWRnZS0+ZW5jb2RlciwgbHZkc19lbmNvZGVy
LT5wYW5lbF9icmlkZ2UsCisJcmV0dXJuIGRybV9icmlkZ2VfYXR0YWNoKGJyaWRnZS0+ZW5jb2Rl
ciwgbHZkc19jb2RlYy0+cGFuZWxfYnJpZGdlLAogCQkJCSBicmlkZ2UpOwogfQogCi1zdGF0aWMg
dm9pZCBsdmRzX2VuY29kZXJfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCitzdGF0
aWMgdm9pZCBsdmRzX2NvZGVjX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogewot
CXN0cnVjdCBsdmRzX2VuY29kZXIgKmx2ZHNfZW5jb2RlciA9IGNvbnRhaW5lcl9vZihicmlkZ2Us
Ci0JCQkJCQkJIHN0cnVjdCBsdmRzX2VuY29kZXIsCi0JCQkJCQkJIGJyaWRnZSk7CisJc3RydWN0
IGx2ZHNfY29kZWMgKmx2ZHNfY29kZWMgPSBjb250YWluZXJfb2YoYnJpZGdlLAorCQkJCQkJICAg
ICBzdHJ1Y3QgbHZkc19jb2RlYywgYnJpZGdlKTsKIAotCWlmIChsdmRzX2VuY29kZXItPnBvd2Vy
ZG93bl9ncGlvKQotCQlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAobHZkc19lbmNvZGVyLT5wb3dl
cmRvd25fZ3BpbywgMCk7CisJaWYgKGx2ZHNfY29kZWMtPnBvd2VyZG93bl9ncGlvKQorCQlncGlv
ZF9zZXRfdmFsdWVfY2Fuc2xlZXAobHZkc19jb2RlYy0+cG93ZXJkb3duX2dwaW8sIDApOwogfQog
Ci1zdGF0aWMgdm9pZCBsdmRzX2VuY29kZXJfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJp
ZGdlKQorc3RhdGljIHZvaWQgbHZkc19jb2RlY19kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpi
cmlkZ2UpCiB7Ci0Jc3RydWN0IGx2ZHNfZW5jb2RlciAqbHZkc19lbmNvZGVyID0gY29udGFpbmVy
X29mKGJyaWRnZSwKLQkJCQkJCQkgc3RydWN0IGx2ZHNfZW5jb2RlciwKLQkJCQkJCQkgYnJpZGdl
KTsKKwlzdHJ1Y3QgbHZkc19jb2RlYyAqbHZkc19jb2RlYyA9IGNvbnRhaW5lcl9vZihicmlkZ2Us
CisJCQkJCQkgICAgIHN0cnVjdCBsdmRzX2NvZGVjLCBicmlkZ2UpOwogCi0JaWYgKGx2ZHNfZW5j
b2Rlci0+cG93ZXJkb3duX2dwaW8pCi0JCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChsdmRzX2Vu
Y29kZXItPnBvd2VyZG93bl9ncGlvLCAxKTsKKwlpZiAobHZkc19jb2RlYy0+cG93ZXJkb3duX2dw
aW8pCisJCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChsdmRzX2NvZGVjLT5wb3dlcmRvd25fZ3Bp
bywgMSk7CiB9CiAKIHN0YXRpYyBzdHJ1Y3QgZHJtX2JyaWRnZV9mdW5jcyBmdW5jcyA9IHsKLQku
YXR0YWNoID0gbHZkc19lbmNvZGVyX2F0dGFjaCwKLQkuZW5hYmxlID0gbHZkc19lbmNvZGVyX2Vu
YWJsZSwKLQkuZGlzYWJsZSA9IGx2ZHNfZW5jb2Rlcl9kaXNhYmxlLAorCS5hdHRhY2ggPSBsdmRz
X2NvZGVjX2F0dGFjaCwKKwkuZW5hYmxlID0gbHZkc19jb2RlY19lbmFibGUsCisJLmRpc2FibGUg
PSBsdmRzX2NvZGVjX2Rpc2FibGUsCiB9OwogCi1zdGF0aWMgaW50IGx2ZHNfZW5jb2Rlcl9wcm9i
ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQorc3RhdGljIGludCBsdmRzX2NvZGVjX3By
b2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiB7CiAJc3RydWN0IGRldmljZSAqZGV2
ID0gJnBkZXYtPmRldjsKIAlzdHJ1Y3QgZGV2aWNlX25vZGUgKnBvcnQ7CiAJc3RydWN0IGRldmlj
ZV9ub2RlICplbmRwb2ludDsKIAlzdHJ1Y3QgZGV2aWNlX25vZGUgKnBhbmVsX25vZGU7CiAJc3Ry
dWN0IGRybV9wYW5lbCAqcGFuZWw7Ci0Jc3RydWN0IGx2ZHNfZW5jb2RlciAqbHZkc19lbmNvZGVy
OworCXN0cnVjdCBsdmRzX2NvZGVjICpsdmRzX2NvZGVjOwogCi0JbHZkc19lbmNvZGVyID0gZGV2
bV9remFsbG9jKGRldiwgc2l6ZW9mKCpsdmRzX2VuY29kZXIpLCBHRlBfS0VSTkVMKTsKLQlpZiAo
IWx2ZHNfZW5jb2RlcikKKwlsdmRzX2NvZGVjID0gZGV2bV9remFsbG9jKGRldiwgc2l6ZW9mKCps
dmRzX2NvZGVjKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFsdmRzX2NvZGVjKQogCQlyZXR1cm4gLUVO
T01FTTsKIAotCWx2ZHNfZW5jb2Rlci0+cG93ZXJkb3duX2dwaW8gPSBkZXZtX2dwaW9kX2dldF9v
cHRpb25hbChkZXYsICJwb3dlcmRvd24iLAotCQkJCQkJCSAgICAgICBHUElPRF9PVVRfSElHSCk7
Ci0JaWYgKElTX0VSUihsdmRzX2VuY29kZXItPnBvd2VyZG93bl9ncGlvKSkgewotCQlpbnQgZXJy
ID0gUFRSX0VSUihsdmRzX2VuY29kZXItPnBvd2VyZG93bl9ncGlvKTsKKwlsdmRzX2NvZGVjLT5w
b3dlcmRvd25fZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlvbmFsKGRldiwgInBvd2VyZG93biIs
CisJCQkJCQkJICAgICBHUElPRF9PVVRfSElHSCk7CisJaWYgKElTX0VSUihsdmRzX2NvZGVjLT5w
b3dlcmRvd25fZ3BpbykpIHsKKwkJaW50IGVyciA9IFBUUl9FUlIobHZkc19jb2RlYy0+cG93ZXJk
b3duX2dwaW8pOwogCiAJCWlmIChlcnIgIT0gLUVQUk9CRV9ERUZFUikKIAkJCWRldl9lcnIoZGV2
LCAicG93ZXJkb3duIEdQSU8gZmFpbHVyZTogJWRcbiIsIGVycik7CkBAIC0xMDUsNTEgKzEwMyw1
MiBAQCBzdGF0aWMgaW50IGx2ZHNfZW5jb2Rlcl9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNl
ICpwZGV2KQogCQlyZXR1cm4gUFRSX0VSUihwYW5lbCk7CiAJfQogCi0JbHZkc19lbmNvZGVyLT5w
YW5lbF9icmlkZ2UgPQorCWx2ZHNfY29kZWMtPnBhbmVsX2JyaWRnZSA9CiAJCWRldm1fZHJtX3Bh
bmVsX2JyaWRnZV9hZGRfdHlwZWQoZGV2LCBwYW5lbCwKIAkJCQkJCURSTV9NT0RFX0NPTk5FQ1RP
Ul9MVkRTKTsKLQlpZiAoSVNfRVJSKGx2ZHNfZW5jb2Rlci0+cGFuZWxfYnJpZGdlKSkKLQkJcmV0
dXJuIFBUUl9FUlIobHZkc19lbmNvZGVyLT5wYW5lbF9icmlkZ2UpOworCWlmIChJU19FUlIobHZk
c19jb2RlYy0+cGFuZWxfYnJpZGdlKSkKKwkJcmV0dXJuIFBUUl9FUlIobHZkc19jb2RlYy0+cGFu
ZWxfYnJpZGdlKTsKIAotCS8qIFRoZSBwYW5lbF9icmlkZ2UgYnJpZGdlIGlzIGF0dGFjaGVkIHRv
IHRoZSBwYW5lbCdzIG9mX25vZGUsCisJLyoKKwkgKiBUaGUgcGFuZWxfYnJpZGdlIGJyaWRnZSBp
cyBhdHRhY2hlZCB0byB0aGUgcGFuZWwncyBvZl9ub2RlLAogCSAqIGJ1dCB3ZSBuZWVkIGEgYnJp
ZGdlIGF0dGFjaGVkIHRvIG91ciBvZl9ub2RlIGZvciBvdXIgdXNlcgogCSAqIHRvIGxvb2sgdXAu
CiAJICovCi0JbHZkc19lbmNvZGVyLT5icmlkZ2Uub2Zfbm9kZSA9IGRldi0+b2Zfbm9kZTsKLQls
dmRzX2VuY29kZXItPmJyaWRnZS5mdW5jcyA9ICZmdW5jczsKLQlkcm1fYnJpZGdlX2FkZCgmbHZk
c19lbmNvZGVyLT5icmlkZ2UpOworCWx2ZHNfY29kZWMtPmJyaWRnZS5vZl9ub2RlID0gZGV2LT5v
Zl9ub2RlOworCWx2ZHNfY29kZWMtPmJyaWRnZS5mdW5jcyA9ICZmdW5jczsKKwlkcm1fYnJpZGdl
X2FkZCgmbHZkc19jb2RlYy0+YnJpZGdlKTsKIAotCXBsYXRmb3JtX3NldF9kcnZkYXRhKHBkZXYs
IGx2ZHNfZW5jb2Rlcik7CisJcGxhdGZvcm1fc2V0X2RydmRhdGEocGRldiwgbHZkc19jb2RlYyk7
CiAKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIGludCBsdmRzX2VuY29kZXJfcmVtb3ZlKHN0cnVj
dCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCitzdGF0aWMgaW50IGx2ZHNfY29kZWNfcmVtb3ZlKHN0
cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiB7Ci0Jc3RydWN0IGx2ZHNfZW5jb2RlciAqbHZk
c19lbmNvZGVyID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7CisJc3RydWN0IGx2ZHNfY29k
ZWMgKmx2ZHNfY29kZWMgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKIAotCWRybV9icmlk
Z2VfcmVtb3ZlKCZsdmRzX2VuY29kZXItPmJyaWRnZSk7CisJZHJtX2JyaWRnZV9yZW1vdmUoJmx2
ZHNfY29kZWMtPmJyaWRnZSk7CiAKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIGNvbnN0IHN0cnVj
dCBvZl9kZXZpY2VfaWQgbHZkc19lbmNvZGVyX21hdGNoW10gPSB7CitzdGF0aWMgY29uc3Qgc3Ry
dWN0IG9mX2RldmljZV9pZCBsdmRzX2NvZGVjX21hdGNoW10gPSB7CiAJeyAuY29tcGF0aWJsZSA9
ICJsdmRzLWVuY29kZXIiIH0sCiAJeyAuY29tcGF0aWJsZSA9ICJ0aGluZSx0aGM2M2x2ZG04M2Qi
IH0sCiAJe30sCiB9OwotTU9EVUxFX0RFVklDRV9UQUJMRShvZiwgbHZkc19lbmNvZGVyX21hdGNo
KTsKK01PRFVMRV9ERVZJQ0VfVEFCTEUob2YsIGx2ZHNfY29kZWNfbWF0Y2gpOwogCi1zdGF0aWMg
c3RydWN0IHBsYXRmb3JtX2RyaXZlciBsdmRzX2VuY29kZXJfZHJpdmVyID0gewotCS5wcm9iZQk9
IGx2ZHNfZW5jb2Rlcl9wcm9iZSwKLQkucmVtb3ZlCT0gbHZkc19lbmNvZGVyX3JlbW92ZSwKK3N0
YXRpYyBzdHJ1Y3QgcGxhdGZvcm1fZHJpdmVyIGx2ZHNfY29kZWNfZHJpdmVyID0geworCS5wcm9i
ZQk9IGx2ZHNfY29kZWNfcHJvYmUsCisJLnJlbW92ZQk9IGx2ZHNfY29kZWNfcmVtb3ZlLAogCS5k
cml2ZXIJCT0gewotCQkubmFtZQkJPSAibHZkcy1lbmNvZGVyIiwKLQkJLm9mX21hdGNoX3RhYmxl
CT0gbHZkc19lbmNvZGVyX21hdGNoLAorCQkubmFtZQkJPSAibHZkcy1jb2RlYyIsCisJCS5vZl9t
YXRjaF90YWJsZQk9IGx2ZHNfY29kZWNfbWF0Y2gsCiAJfSwKIH07Ci1tb2R1bGVfcGxhdGZvcm1f
ZHJpdmVyKGx2ZHNfZW5jb2Rlcl9kcml2ZXIpOworbW9kdWxlX3BsYXRmb3JtX2RyaXZlcihsdmRz
X2NvZGVjX2RyaXZlcik7CiAKIE1PRFVMRV9BVVRIT1IoIkxhdXJlbnQgUGluY2hhcnQgPGxhdXJl
bnQucGluY2hhcnRAaWRlYXNvbmJvYXJkLmNvbT4iKTsKLU1PRFVMRV9ERVNDUklQVElPTigiVHJh
bnNwYXJlbnQgcGFyYWxsZWwgdG8gTFZEUyBlbmNvZGVyIik7CitNT0RVTEVfREVTQ1JJUFRJT04o
IkxWRFMgZW5jb2RlcnMgYW5kIGRlY29kZXJzIik7CiBNT0RVTEVfTElDRU5TRSgiR1BMIik7Ci0t
IAoyLjcuNAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
ZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
