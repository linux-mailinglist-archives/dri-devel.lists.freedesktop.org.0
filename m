Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CC5C89DECB
	for <lists+dri-devel@lfdr.de>; Tue, 27 Aug 2019 09:30:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 19D0B8991C;
	Tue, 27 Aug 2019 07:30:22 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd44.google.com (mail-io1-xd44.google.com
 [IPv6:2607:f8b0:4864:20::d44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0B7DA89B95
 for <dri-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 04:25:11 +0000 (UTC)
Received: by mail-io1-xd44.google.com with SMTP id j5so43076863ioj.8
 for <dri-devel@lists.freedesktop.org>; Mon, 26 Aug 2019 21:25:11 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=50AsWxywlUQnTpKVGriNJYvkgwgK3KTBsrNIGfbmuJg=;
 b=dH1MRvi63+a+g+Qr4+8M2brSFuDexBTmNKXHhHbWtZ5IAAnIGK5S+sWysbbGcd7vdX
 0I4cvcN1Q2YnNBx5k463KmwZBPHnuZRNUt4z/6e4h3DDq7hRC/4fhq2b+nByfsClH8wl
 nfUWr6h9S1eNPQHQ1L5rPZ6bB/48tQHnHTr8LIZucjZjwMpdxGfF8fst9z5MQBgBTUje
 VizrYf/Pz0g3IVoTVcx4TyAf8UFgxBL2Q8VuN8hgIs5hxbYaPY5lC28wJHOX3gRgT1LJ
 KzxIhhI/n+cyyfQl1n1QdR24gQWl3xZbDTmkWUOAMFBGDz5wlu6UKz1GttIhYop8cHHW
 VFGA==
X-Gm-Message-State: APjAAAVkBn4AX5jWoJPppssaTHb4dXI4Hh7IG99QF3ibnOdEc+KIjjqZ
 L7ZFXkJwH7IniUaVWNsvEIS5hEc9CVfF5XGmEPc=
X-Google-Smtp-Source: APXvYqwAnYBYhGBIk4q1AhmMKkEfDX6WoyU27/d93CGIhu/pT4/AweH1krcpzwa0imyijNZtlQVuRIyyogHdeMtIxxM=
X-Received: by 2002:a02:654d:: with SMTP id u74mr21888139jab.115.1566879910001; 
 Mon, 26 Aug 2019 21:25:10 -0700 (PDT)
MIME-Version: 1.0
References: <20190826182524.5064-1-andrew.smirnov@gmail.com>
 <20190826220807.GK5031@pendragon.ideasonboard.com>
In-Reply-To: <20190826220807.GK5031@pendragon.ideasonboard.com>
From: Andrey Smirnov <andrew.smirnov@gmail.com>
Date: Mon, 26 Aug 2019 21:24:57 -0700
Message-ID: <CAHQ1cqHuJNTH=HDfEP9de0Df_D45VV034riH4J3+ix23v=aM4Q@mail.gmail.com>
Subject: Re: [PATCH] drm/bridge: tc358767: Expose test mode functionality via
 debugfs
To: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
X-Mailman-Approved-At: Tue, 27 Aug 2019 07:29:19 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=50AsWxywlUQnTpKVGriNJYvkgwgK3KTBsrNIGfbmuJg=;
 b=dBANGAYWISHTeTavGx+Oq+JztZ48oyMY2VNfywPY9FNaLGhDilAJBBa4FDN/CblBCA
 zxO77qI8sPK4WdvgpCDRmw+ggpkCe8mUbFN7zWIUiPn+g1FRFnww5a5I+8rVjt94fMCk
 cF5jjlpMTS622rv8B3yEVKE9kiP+HhHk6sEYqTKkpfibJBPQy4E5+/qU6fbG/Th8K0GN
 HMM88LSvNR7JV1Xw3YqOhAZGcdoPHETjZTGvp5b/27VnaX3ZRapVP13/GPcE9BW8ZYyo
 vZJaiaU27pcaZXAZV6SaY6eSF+dDIKaHpV5HeY/YNxyVlUu7c4ZVrQ4gbUn2FrdqNCGM
 OtFA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Cory Tusar <cory.tusar@zii.aero>,
 linux-kernel <linux-kernel@vger.kernel.org>, dri-devel@lists.freedesktop.org,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Chris Healy <cphealy@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gTW9uLCBBdWcgMjYsIDIwMTkgYXQgMzowOCBQTSBMYXVyZW50IFBpbmNoYXJ0CjxsYXVyZW50
LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+IHdyb3RlOgo+Cj4gSGkgQW5kcmV5LAo+Cj4gVGhh
bmsgeW91IGZvciB0aGUgcGF0Y2guCj4KPiBPbiBNb24sIEF1ZyAyNiwgMjAxOSBhdCAxMToyNToy
NEFNIC0wNzAwLCBBbmRyZXkgU21pcm5vdiB3cm90ZToKPiA+IFByZXNlbnRseSwgdGhlIGRyaXZl
ciBjb2RlIGFydGlmaWNpYWxseSBsaW1pdHMgdGVzdCBwYXR0ZXJuIG1vZGUgdG8gYQo+ID4gc2lu
Z2xlIHBhdHRlcm4gd2l0aCBmaXhlZCBjb2xvciBzZWxlY3Rpb24uIEl0IGJlaW5nIGEga2VybmVs
IG1vZHVsZQo+ID4gcGFyYW1ldGVyIG1ha2VzIHN3aXRjaGluZyAidGVzdCBwYXR0ZXIiIDwtPiAi
cHJvcGVyIG91dHB1dCIgbW9kZXMKPiA+IG9uLXRoZS1mbHkgY2x1bmt5IGFuZCBvdXRyaWdodCBp
bXBvc3NpYmxlIGlmIHRoZSBkcml2ZXIgaXMgYnVpbHQgaW50bwo+ID4gdGhlIGtlcm5lbC4KPiA+
Cj4gPiBUbyBpbXByb3ZlIHRoZSBzaXR1YXRpb24gYSBiaXQsIGNvbnZlcnQgY3VycmVudCB0ZXN0
IHBhdHRlcm4gY29kZSB0bwo+ID4gdXNlIGRlYnVnZnMgaW5zdGVhZCBieSBleHBvc2luZyAiVGVz
dEN0bCIgcmVnaXN0ZXIuIFRoaXMgd2F5IG9sZAo+ID4gInRjX3Rlc3RfcGF0dGVybj0xIiBmdW5j
dGlvbmFsaXR5IGNhbiBiZSBlbXVsYXRlZCB2aWE6Cj4gPgo+ID4gICAgIGVjaG8gLW4gMHg3ODE0
NjMxMiA+IHRzdGN0bAo+ID4KPiA+IGFuZCBzd2l0Y2ggYmFjayB0byByZWd1bGFyIG1vZGUgY2Fu
IGJlIGRvbmUgd2l0aDoKPiA+Cj4gPiAgICAgZWNobyAtbiAweDc4MTQ2MzEwID4gdHN0Y3RsCj4K
PiBDYW4ndCB3ZSBtYWtlIHRoaXMgbW9yZSB1c2VyZnJpZW5kbHkgYnkgZXhwb3NpbmcgZWl0aGVy
IGEgdGVzdCBwYXR0ZXJuCj4gaW5kZXgsIG9yIGEgc3RyaW5nID8KCldlIGNvdWxkLCBidXQgdGhl
biBhKSBpdCB3b3VsZCByZXF1aXJlIG1vcmUgY29kZSBpbiB0aGUgZHJpdmVyIGIpIHRoZQpmaWxl
cyB3b3VsZG4ndCBjb3JyZXNwb25kIGRpcmVjdGx5IHRvIHNvbWV0aGluZyBkZXNjcmliZWQgaW4g
dGhlCnBhcnQncyBkYXRhc2hlZXQuIEp1c3QgZGlkbid0IHNlZW0gd29ydGggaXQgdG8gbWUuCgo+
IERvIGFsbCBiaXRzIGluIHRoZSByZWdpc3RlciBuZWVkIHRvIGJlIGNvbnRyb2xsZWQKPiBmcm9t
IHVzZXJzcGFjZSA/CgpQcmV0dHkgbXVjaCwgeWVzLiBJdCdzIGZvcm1hdHRlZCBhcyBSUl9HR19C
Ql9YX00sIHdoZXJlIFIsIEcsIEIKc3BlY2lmaWVzIGNvbG9yIHVzZWQgZm9yIHZhcmlvdXMgcGF0
dGVybnMsIFggaXMgaXJyZWxldmFudCBhbmQgTQpzcGVjaWZpZXMgdGVzdCBwYXR0ZXJuIHRvIHVz
ZS4KCj4KPiA+IE5vdGUgdGhhdCBzd2l0Y2hpbmcgdG8gYW55IG9mIHRoZSB0ZXN0IHBhdHRlcm5z
LCB3aWxsIE5PVCB0cmlnZ2VyIGxpbmsKPiA+IHJlLWVzdGFibGlzaG1lbnQgd2hlcmVhcyBzd2l0
Y2hpbmcgdG8gbm9ybWFsIG9wZXJhdGlvbiBXSUxMLiBUaGlzIGlzCj4gPiBkb25lIHNvOgo+ID4K
PiA+IGEpIHdlIGNhbiBpc29sYXRlIGFuZCB2ZXJpZnkgKGUpRFAgbGluayBmdW5jdGlvbmFsaXR5
IGJ5IHN3aXRjaGluZyB0bwo+ID4gICAgb25lIG9mIHRoZSB0ZXN0IHBhdHRlcnMKPiA+Cj4gPiBi
KSB0cmlnZ2VyIGEgbGluayByZS1lc3RhYmxpc2htZW50IGJ5IHN3aXRjaGluZyBiYWNrIHRvIG5v
cm1hbCBtb2RlCj4gPgo+ID4gU2lnbmVkLW9mZi1ieTogQW5kcmV5IFNtaXJub3YgPGFuZHJldy5z
bWlybm92QGdtYWlsLmNvbT4KPiA+IENjOiBBbmRyemVqIEhhamRhIDxhLmhhamRhQHNhbXN1bmcu
Y29tPgo+ID4gQ2M6IExhdXJlbnQgUGluY2hhcnQgPExhdXJlbnQucGluY2hhcnRAaWRlYXNvbmJv
YXJkLmNvbT4KPiA+IENjOiBUb21pIFZhbGtlaW5lbiA8dG9taS52YWxrZWluZW5AdGkuY29tPgo+
ID4gQ2M6IENvcnkgVHVzYXIgPGNvcnkudHVzYXJAemlpLmFlcm8+Cj4gPiBDYzogQ2hyaXMgSGVh
bHkgPGNwaGVhbHlAZ21haWwuY29tPgo+ID4gQ2M6IEx1Y2FzIFN0YWNoIDxsLnN0YWNoQHBlbmd1
dHJvbml4LmRlPgo+ID4gQ2M6IGRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiA+IENj
OiBsaW51eC1rZXJuZWxAdmdlci5rZXJuZWwub3JnCj4gPiAtLS0KPiA+ICBkcml2ZXJzL2dwdS9k
cm0vYnJpZGdlL3RjMzU4NzY3LmMgfCAxMzcgKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0t
Cj4gPiAgMSBmaWxlIGNoYW5nZWQsIDEwMSBpbnNlcnRpb25zKCspLCAzNiBkZWxldGlvbnMoLSkK
PiA+Cj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS90YzM1ODc2Ny5jIGIv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS90YzM1ODc2Ny5jCj4gPiBpbmRleCA2MzA4ZDkzYWQ5MWQu
LjdhNzk1YjYxM2VkMCAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGMz
NTg3NjcuYwo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS90YzM1ODc2Ny5jCj4gPiBA
QCAtMTcsNiArMTcsNyBAQAo+ID4KPiA+ICAjaW5jbHVkZSA8bGludXgvYml0ZmllbGQuaD4KPiA+
ICAjaW5jbHVkZSA8bGludXgvY2xrLmg+Cj4gPiArI2luY2x1ZGUgPGxpbnV4L2RlYnVnZnMuaD4K
PiA+ICAjaW5jbHVkZSA8bGludXgvZGV2aWNlLmg+Cj4gPiAgI2luY2x1ZGUgPGxpbnV4L2dwaW8v
Y29uc3VtZXIuaD4KPiA+ICAjaW5jbHVkZSA8bGludXgvaTJjLmg+Cj4gPiBAQCAtMjIyLDExICsy
MjMsMTAgQEAKPiA+ICAjZGVmaW5lIENPTE9SX0IgICAgICAgICAgICAgICAgICAgICAgR0VOTUFT
SygxNSwgOCkKPiA+ICAjZGVmaW5lIEVOSTJDRklMVEVSICAgICAgICAgIEJJVCg0KQo+ID4gICNk
ZWZpbmUgQ09MT1JfQkFSX01PREUgICAgICAgICAgICAgICBHRU5NQVNLKDEsIDApCj4gPiArI2Rl
ZmluZSBDT0xPUl9CQVJfTU9ERV9OT1JNQUwgICAgICAgIDAKPiA+ICAjZGVmaW5lIENPTE9SX0JB
Ul9NT0RFX0JBUlMgIDIKPiA+IC0jZGVmaW5lIFBMTF9EQkcgICAgICAgICAgICAgICAgICAgICAg
MHgwYTA0Cj4gPgo+ID4gLXN0YXRpYyBib29sIHRjX3Rlc3RfcGF0dGVybjsKPiA+IC1tb2R1bGVf
cGFyYW1fbmFtZWQodGVzdCwgdGNfdGVzdF9wYXR0ZXJuLCBib29sLCAwNjQ0KTsKPgo+IEkgYXNz
dW1lIHRoYXQgaGlzIGJlaW5nIGEgZGVidWcgZmVhdHVyZSB0aGVyZSdzIG5vIHN5c3RlbSByZWx5
aW5nIG9uIHRoZQo+IG1vZHVsZSBwYXJhbWV0ZXIgdGhhdCB3b3VsZCBicmVhayBpZiB5b3UgcmVt
b3ZlIGl0ID8KPgoKWWVhaCwgSSBkb24ndCBrbm93IG9mIGFueSBzeXN0ZW0gdGhhdCBuZWVkcyB0
aGF0IHBhcmFtZXRlci4gSXQgc2VlbXMKcHJldHR5IHVzZWxlc3MgZm9yIGFueXRoaW5nIGJ1dCBi
YXNpYyBkZWJ1Z2dpbmcuCgo+ID4gKyNkZWZpbmUgUExMX0RCRyAgICAgICAgICAgICAgICAgICAg
ICAweDBhMDQKPiA+Cj4gPiAgc3RydWN0IHRjX2VkcF9saW5rIHsKPiA+ICAgICAgIHN0cnVjdCBk
cm1fZHBfbGluayAgICAgIGJhc2U7Cj4gPiBAQCAtNzg5LDE2ICs3ODksNiBAQCBzdGF0aWMgaW50
IHRjX3NldF92aWRlb19tb2RlKHN0cnVjdCB0Y19kYXRhICp0YywKPiA+ICAgICAgIGlmIChyZXQp
Cj4gPiAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gPgo+ID4gLSAgICAgLyogVGVzdCBwYXR0
ZXJuIHNldHRpbmdzICovCj4gPiAtICAgICByZXQgPSByZWdtYXBfd3JpdGUodGMtPnJlZ21hcCwg
VFNUQ1RMLAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgIEZJRUxEX1BSRVAoQ09MT1JfUiwg
MTIwKSB8Cj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgRklFTERfUFJFUChDT0xPUl9HLCAy
MCkgfAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgIEZJRUxEX1BSRVAoQ09MT1JfQiwgOTkp
IHwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICBFTkkyQ0ZJTFRFUiB8Cj4gPiAtICAgICAg
ICAgICAgICAgICAgICAgICAgRklFTERfUFJFUChDT0xPUl9CQVJfTU9ERSwgQ09MT1JfQkFSX01P
REVfQkFSUykpOwo+ID4gLSAgICAgaWYgKHJldCkKPiA+IC0gICAgICAgICAgICAgcmV0dXJuIHJl
dDsKPiA+IC0KPiA+ICAgICAgIC8qIERQIE1haW4gU3RyZWFtIEF0dHJpYnV0ZXMgKi8KPiA+ICAg
ICAgIHZpZF9zeW5jX2RseSA9IGhzeW5jX2xlbiArIGxlZnRfbWFyZ2luICsgbW9kZS0+aGRpc3Bs
YXk7Cj4gPiAgICAgICByZXQgPSByZWdtYXBfd3JpdGUodGMtPnJlZ21hcCwgRFAwX1ZJRFNZTkNE
RUxBWSwKPiA+IEBAIC0xMTUwLDE0ICsxMTQwLDYgQEAgc3RhdGljIGludCB0Y19zdHJlYW1fZW5h
YmxlKHN0cnVjdCB0Y19kYXRhICp0YykKPiA+Cj4gPiAgICAgICBkZXZfZGJnKHRjLT5kZXYsICJl
bmFibGUgdmlkZW8gc3RyZWFtXG4iKTsKPiA+Cj4gPiAtICAgICAvKiBQWEwgUExMIHNldHVwICov
Cj4gPiAtICAgICBpZiAodGNfdGVzdF9wYXR0ZXJuKSB7Cj4gPiAtICAgICAgICAgICAgIHJldCA9
IHRjX3B4bF9wbGxfZW4odGMsIGNsa19nZXRfcmF0ZSh0Yy0+cmVmY2xrKSwKPiA+IC0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAxMDAwICogdGMtPm1vZGUuY2xvY2spOwo+ID4gLSAg
ICAgICAgICAgICBpZiAocmV0KQo+ID4gLSAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7
Cj4gPiAtICAgICB9Cj4gPiAtCj4gPiAgICAgICByZXQgPSB0Y19zZXRfdmlkZW9fbW9kZSh0Yywg
JnRjLT5tb2RlKTsKPiA+ICAgICAgIGlmIChyZXQpCj4gPiAgICAgICAgICAgICAgIHJldHVybiBy
ZXQ7Cj4gPiBAQCAtMTE4NiwxMiArMTE2OCw4IEBAIHN0YXRpYyBpbnQgdGNfc3RyZWFtX2VuYWJs
ZShzdHJ1Y3QgdGNfZGF0YSAqdGMpCj4gPiAgICAgICBpZiAocmV0KQo+ID4gICAgICAgICAgICAg
ICByZXR1cm4gcmV0Owo+ID4gICAgICAgLyogU2V0IGlucHV0IGludGVyZmFjZSAqLwo+ID4gLSAg
ICAgdmFsdWUgPSBEUDBfQVVEU1JDX05PX0lOUFVUOwo+ID4gLSAgICAgaWYgKHRjX3Rlc3RfcGF0
dGVybikKPiA+IC0gICAgICAgICAgICAgdmFsdWUgfD0gRFAwX1ZJRFNSQ19DT0xPUl9CQVI7Cj4g
PiAtICAgICBlbHNlCj4gPiAtICAgICAgICAgICAgIHZhbHVlIHw9IERQMF9WSURTUkNfRFBJX1JY
Owo+ID4gLSAgICAgcmV0ID0gcmVnbWFwX3dyaXRlKHRjLT5yZWdtYXAsIFNZU0NUUkwsIHZhbHVl
KTsKPiA+ICsgICAgIHJldCA9IHJlZ21hcF93cml0ZSh0Yy0+cmVnbWFwLCBTWVNDVFJMLAo+ID4g
KyAgICAgICAgICAgICAgICAgICAgICAgIERQMF9BVURTUkNfTk9fSU5QVVQgfCBEUDBfVklEU1JD
X0RQSV9SWCk7Cj4gPiAgICAgICBpZiAocmV0KQo+ID4gICAgICAgICAgICAgICByZXR1cm4gcmV0
Owo+ID4KPiA+IEBAIC0xMjIwLDM5ICsxMTk4LDQ0IEBAIHN0YXRpYyB2b2lkIHRjX2JyaWRnZV9w
cmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCj4gPiAgICAgICBkcm1fcGFuZWxf
cHJlcGFyZSh0Yy0+cGFuZWwpOwo+ID4gIH0KPiA+Cj4gPiAtc3RhdGljIHZvaWQgdGNfYnJpZGdl
X2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQo+ID4gK3N0YXRpYyBpbnQgX190Y19i
cmlkZ2VfZW5hYmxlKHN0cnVjdCB0Y19kYXRhICp0YykKPiA+ICB7Cj4gPiAtICAgICBzdHJ1Y3Qg
dGNfZGF0YSAqdGMgPSBicmlkZ2VfdG9fdGMoYnJpZGdlKTsKPiA+ICAgICAgIGludCByZXQ7Cj4g
Pgo+ID4gICAgICAgcmV0ID0gdGNfZ2V0X2Rpc3BsYXlfcHJvcHModGMpOwo+ID4gICAgICAgaWYg
KHJldCA8IDApIHsKPiA+ICAgICAgICAgICAgICAgZGV2X2Vycih0Yy0+ZGV2LCAiZmFpbGVkIHRv
IHJlYWQgZGlzcGxheSBwcm9wczogJWRcbiIsIHJldCk7Cj4gPiAtICAgICAgICAgICAgIHJldHVy
bjsKPiA+ICsgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+ICAgICAgIH0KPiA+Cj4gPiAgICAg
ICByZXQgPSB0Y19tYWluX2xpbmtfZW5hYmxlKHRjKTsKPiA+ICAgICAgIGlmIChyZXQgPCAwKSB7
Cj4gPiAgICAgICAgICAgICAgIGRldl9lcnIodGMtPmRldiwgIm1haW4gbGluayBlbmFibGUgZXJy
b3I6ICVkXG4iLCByZXQpOwo+ID4gLSAgICAgICAgICAgICByZXR1cm47Cj4gPiArICAgICAgICAg
ICAgIHJldHVybiByZXQ7Cj4gPiAgICAgICB9Cj4gPgo+ID4gICAgICAgcmV0ID0gdGNfc3RyZWFt
X2VuYWJsZSh0Yyk7Cj4gPiAgICAgICBpZiAocmV0IDwgMCkgewo+ID4gICAgICAgICAgICAgICBk
ZXZfZXJyKHRjLT5kZXYsICJtYWluIGxpbmsgc3RyZWFtIHN0YXJ0IGVycm9yOiAlZFxuIiwgcmV0
KTsKPiA+ICAgICAgICAgICAgICAgdGNfbWFpbl9saW5rX2Rpc2FibGUodGMpOwo+ID4gLSAgICAg
ICAgICAgICByZXR1cm47Cj4gPiAgICAgICB9Cj4gPgo+ID4gLSAgICAgZHJtX3BhbmVsX2VuYWJs
ZSh0Yy0+cGFuZWwpOwo+ID4gKyAgICAgcmV0dXJuIHJldDsKPiA+ICB9Cj4gPgo+ID4gLXN0YXRp
YyB2b2lkIHRjX2JyaWRnZV9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCj4gPiAr
c3RhdGljIHZvaWQgdGNfYnJpZGdlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQo+
ID4gIHsKPiA+ICAgICAgIHN0cnVjdCB0Y19kYXRhICp0YyA9IGJyaWRnZV90b190YyhicmlkZ2Up
Owo+ID4gLSAgICAgaW50IHJldDsKPiA+Cj4gPiAtICAgICBkcm1fcGFuZWxfZGlzYWJsZSh0Yy0+
cGFuZWwpOwo+ID4gKyAgICAgaWYgKF9fdGNfYnJpZGdlX2VuYWJsZSh0YykgPCAwKQo+ID4gKyAg
ICAgICAgICAgICByZXR1cm47Cj4gPiArCj4gPiArICAgICBkcm1fcGFuZWxfZW5hYmxlKHRjLT5w
YW5lbCk7Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyBpbnQgX190Y19icmlkZ2VfZGlzYWJsZShz
dHJ1Y3QgdGNfZGF0YSAqdGMpCj4gPiArewo+ID4gKyAgICAgaW50IHJldDsKPiA+Cj4gPiAgICAg
ICByZXQgPSB0Y19zdHJlYW1fZGlzYWJsZSh0Yyk7Cj4gPiAgICAgICBpZiAocmV0IDwgMCkKPiA+
IEBAIC0xMjYxLDYgKzEyNDQsMTYgQEAgc3RhdGljIHZvaWQgdGNfYnJpZGdlX2Rpc2FibGUoc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKPiA+ICAgICAgIHJldCA9IHRjX21haW5fbGlua19kaXNh
YmxlKHRjKTsKPiA+ICAgICAgIGlmIChyZXQgPCAwKQo+ID4gICAgICAgICAgICAgICBkZXZfZXJy
KHRjLT5kZXYsICJtYWluIGxpbmsgZGlzYWJsZSBlcnJvcjogJWRcbiIsIHJldCk7Cj4gPiArCj4g
PiArICAgICByZXR1cm4gcmV0Owo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgdm9pZCB0Y19icmlk
Z2VfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQo+ID4gK3sKPiA+ICsgICAgIHN0
cnVjdCB0Y19kYXRhICp0YyA9IGJyaWRnZV90b190YyhicmlkZ2UpOwo+ID4gKwo+ID4gKyAgICAg
ZHJtX3BhbmVsX2Rpc2FibGUodGMtPnBhbmVsKTsKPiA+ICsgICAgIF9fdGNfYnJpZGdlX2Rpc2Fi
bGUodGMpOwo+ID4gIH0KPiA+Cj4gPiAgc3RhdGljIHZvaWQgdGNfYnJpZGdlX3Bvc3RfZGlzYWJs
ZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQo+ID4gQEAgLTEzNzIsNiArMTM2NSw3NyBAQCBz
dGF0aWMgZW51bSBkcm1fY29ubmVjdG9yX3N0YXR1cyB0Y19jb25uZWN0b3JfZGV0ZWN0KHN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZQo+ID4gICAgICAgICAgICAgICByZXR1cm4gY29ubmVjdG9y
X3N0YXR1c19kaXNjb25uZWN0ZWQ7Cj4gPiAgfQo+ID4KPiA+ICtzdGF0aWMgaW50IHRjX3RzdGN0
bF9zZXQodm9pZCAqZGF0YSwgdTY0IHZhbCkKPiA+ICt7Cj4gPiArICAgICBzdHJ1Y3QgdGNfZGF0
YSAqdGMgPSBkYXRhOwo+ID4gKyAgICAgaW50IHJldDsKPiA+ICsKPiA+ICsgICAgIGlmIChGSUVM
RF9HRVQoQ09MT1JfQkFSX01PREUsIHZhbCkgPT0gQ09MT1JfQkFSX01PREVfTk9STUFMKSB7Cj4g
PiArICAgICAgICAgICAgIHJldCA9IHJlZ21hcF93cml0ZSh0Yy0+cmVnbWFwLCBTWVNDVFJMLCBE
UDBfVklEU1JDX0RQSV9SWCk7Cj4gPiArICAgICAgICAgICAgIGlmIChyZXQpIHsKPiA+ICsgICAg
ICAgICAgICAgICAgICAgICBkZXZfZXJyKHRjLT5kZXYsCj4gPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAiZmFpbGVkIHRvIHNlbGVjdCBkcGkgdmlkZW8gc3RyZWFtXG4iKTsKPiA+ICsg
ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4gKyAgICAgICAgICAgICB9Cj4gPiAr
Cj4gPiArICAgICAgICAgICAgIHJldCA9IHJlZ21hcF93cml0ZSh0Yy0+cmVnbWFwLCBUU1RDVEws
IHZhbCB8IEVOSTJDRklMVEVSKTsKPiA+ICsgICAgICAgICAgICAgaWYgKHJldCkgewo+ID4gKyAg
ICAgICAgICAgICAgICAgICAgIGRldl9lcnIodGMtPmRldiwgImZhaWxlZCB0byBzZXQgVFNUQ1RM
XG4iKTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4gKyAgICAgICAg
ICAgICB9Cj4gPiArCj4gPiArICAgICAgICAgICAgIHJldCA9IHRjX3B4bF9wbGxfZGlzKHRjKTsK
PiA+ICsgICAgICAgICAgICAgaWYgKHJldCkgewo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGRl
dl9lcnIodGMtPmRldiwgImZhaWxlZCB0byBkaXNhYmxlIFBMTFxuIik7Cj4gPiArICAgICAgICAg
ICAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+ICsgICAgICAgICAgICAgfQo+ID4gKwo+ID4gKyAg
ICAgICAgICAgICAvKgo+ID4gKyAgICAgICAgICAgICAgKiBSZS1lc3RhYmxpc2ggRFAgbGluawo+
ID4gKyAgICAgICAgICAgICAgKi8KPiA+ICsgICAgICAgICAgICAgcmV0ID0gX190Y19icmlkZ2Vf
ZGlzYWJsZSh0Yyk7Cj4gPiArICAgICAgICAgICAgIGlmIChyZXQpCj4gPiArICAgICAgICAgICAg
ICAgICAgICAgcmV0dXJuIHJldDsKPiA+ICsKPiA+ICsgICAgICAgICAgICAgcmV0ID0gX190Y19i
cmlkZ2VfZW5hYmxlKHRjKTsKPiA+ICsgICAgICAgICAgICAgaWYgKHJldCkKPiA+ICsgICAgICAg
ICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+Cj4gSWYgdGhlIGJyaWRnZSBpcyBjdXJyZW50bHkg
ZGlzYWJsZWQgeW91IHNob3VsZCBub3QgZW5hYmxlIGl0LiBJIHRoaW5rCj4geW91IG5lZWQgdG8g
Z3VhcmQgYWdhaW5zdCByYWNlIGNvbmRpdGlvbnMgd2l0aCB0aGUgZW5hYmxlL2Rpc2FibGUKPiBm
dW5jdGlvbnMsIGFzIHdlbGwgYXMgZGVsYXkgd3JpdGVzIHVudGlsIHRoZSBicmlkZ2UgZ2V0cyBl
bmFibGVkIGlmIGl0Cj4gaXMgY3VycmVudGx5IGRpc2FibGVkLgo+CgpPSywgd2lsbCBkbyBpbiB2
Mi4KCj4gPiArICAgICB9IGVsc2Ugewo+ID4gKyAgICAgICAgICAgICByZXQgPSB0Y19weGxfcGxs
X2VuKHRjLCBjbGtfZ2V0X3JhdGUodGMtPnJlZmNsayksCj4gPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgMTAwMCAqIHRjLT5tb2RlLmNsb2NrKTsKPiA+ICsgICAgICAgICAgICAg
aWYgKHJldCkgewo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGRldl9lcnIodGMtPmRldiwgImZh
aWxlZCB0byBlbmFibGUgUExMXG4iKTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICByZXR1cm4g
cmV0Owo+ID4gKyAgICAgICAgICAgICB9Cj4gPiArCj4gPiArICAgICAgICAgICAgIHJldCA9IHJl
Z21hcF93cml0ZSh0Yy0+cmVnbWFwLCBUU1RDVEwsIHZhbCB8IEVOSTJDRklMVEVSKTsKPiA+ICsg
ICAgICAgICAgICAgaWYgKHJldCkgewo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGRldl9lcnIo
dGMtPmRldiwgImZhaWxlZCB0byBzZXQgVFNUQ1RMXG4iKTsKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICByZXR1cm4gcmV0Owo+ID4gKyAgICAgICAgICAgICB9Cj4gPiArCj4gPiArICAgICAgICAg
ICAgIHJldCA9IHJlZ21hcF93cml0ZSh0Yy0+cmVnbWFwLCBTWVNDVFJMLCBEUDBfVklEU1JDX0NP
TE9SX0JBUik7Cj4gPiArICAgICAgICAgICAgIGlmIChyZXQpIHsKPiA+ICsgICAgICAgICAgICAg
ICAgICAgICBkZXZfZXJyKHRjLT5kZXYsICJmYWlsZWQgdG8gY29sb3IgYmFyIHZpZGVvIHN0cmVh
bVxuIik7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+ICsgICAgICAg
ICAgICAgfQo+ID4gKyAgICAgfQo+ID4gKwo+ID4gKyAgICAgcmV0dXJuIDA7Cj4gPiArfQo+ID4g
Kwo+ID4gK0RFRklORV9TSU1QTEVfQVRUUklCVVRFKHRjX3RzdGN0bF9mb3BzLCBOVUxMLCB0Y190
c3RjdGxfc2V0LCAiJWxsdVxuIik7Cj4KPiBTaG91bGRuJ3QgeW91IGFsc28gcHJvdmlkZSBhIGdl
dCBoYW5kbGVyID8KClRoZXJlIHJlYWxseSBpc24ndCBhIHVzZS1jYXNlIGZvciByZWFkaW5nIHRo
ZSB2YWx1ZSBvZiBUZXN0Q3RsIEFGQUlDVCwKc28sIEkgc2tpcHBlZCBpdCB0byBhdm9pZCBoYXZp
bmcgZXh0cmEgY29kZS4KCj4KPiA+ICtzdGF0aWMgaW50IHRjX2xhdGVfcmVnaXN0ZXIoc3RydWN0
IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKPiA+ICt7Cj4gPiArICAgICBpZiAoY29ubmVjdG9y
LT5kZWJ1Z2ZzX2VudHJ5KQo+ID4gKyAgICAgICAgICAgICBkZWJ1Z2ZzX2NyZWF0ZV9maWxlX3Vu
c2FmZSgidHN0Y3RsIiwgMDY0NCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgY29ubmVjdG9yLT5kZWJ1Z2ZzX2VudHJ5LAo+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0b3JfdG9fdGMoY29ubmVjdG9yKSwKPiA+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnRjX3RzdGN0bF9mb3BzKTsK
PiA+ICsgICAgIHJldHVybiAwOwo+ID4gK30KPgo+IFdoeSBhIC5sYXRlX3JlZ2lzdGVyKCkgaGFu
ZGxlciwgY2FuJ3QgeW91IGRvIHRoaXMgYXQgcHJvYmUgdGltZSA/Cj4KCi5sYXRlX3JlZ2lzdGVy
KCkgaGFwcGVucyBhZnRlciBkcm1fZGVidWdmc19jb25uZWN0b3JfYWRkKCkgd2hlcmUKY29ubmVj
dG9yLT5kZWJ1Z2ZzX2VudHJ5IGdldHMgaW5pdGlhbGl6ZWQuIEFGQUlDVCwgSSBjb3VsZCBtb3Zl
IHRoYXQKY29kZSB0byBwcm9iZSwgYnV0IHRoZW4gSSdkIGhhdmUgY3JlYXRlIGEgc2VwYXJhdGUg
ZGVidWdmcyByb290CmRpcmVjdG9yeSBhcyB3ZWxsIGFzIGFkZCBjb2RlIHRvIGNsZWFuIGl0IHVw
IChjdXJyZW50bHkgSSByZWx5IG9uCmRybV9kZWJ1Z2ZzX2Nvbm5lY3Rvcl9yZW1vdmUoKSByZW1v
dmluZyBldmVyeXRoaW5nIHJlY3Vyc2l2ZWx5LgoKVGhhbmtzLApBbmRyZXkgU21pcm5vdgpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFp
bGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
