Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 996CD187F0
	for <lists+dri-devel@lfdr.de>; Thu,  9 May 2019 11:48:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6B3F58967F;
	Thu,  9 May 2019 09:48:47 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from metis.ext.pengutronix.de (metis.ext.pengutronix.de
 [IPv6:2001:67c:670:201:290:27ff:fe1d:cc33])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BEA52895B2
 for <dri-devel@lists.freedesktop.org>; Thu,  9 May 2019 09:48:45 +0000 (UTC)
Received: from dude02.hi.pengutronix.de ([2001:67c:670:100:1d::28]
 helo=dude02.pengutronix.de.)
 by metis.ext.pengutronix.de with esmtp (Exim 4.89)
 (envelope-from <p.zabel@pengutronix.de>)
 id 1hOffP-0002Eo-VR; Thu, 09 May 2019 11:48:44 +0200
From: Philipp Zabel <p.zabel@pengutronix.de>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH] drm/imx: ipuv3-plane: fix atomic update status query for
 non-plus i.MX6Q
Date: Thu,  9 May 2019 11:48:33 +0200
Message-Id: <20190509094833.7979-1-p.zabel@pengutronix.de>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
X-SA-Exim-Connect-IP: 2001:67c:670:100:1d::28
X-SA-Exim-Mail-From: p.zabel@pengutronix.de
X-SA-Exim-Scanned: No (on metis.ext.pengutronix.de);
 SAEximRunCond expanded to false
X-PTX-Original-Recipient: dri-devel@lists.freedesktop.org
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Marco Felsch <m.felsch@pengutronix.de>, kernel@pengutronix.de
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGN1cnJlbnQgYnVmZmVyIGNoZWNrIGhhbHZlcyB0aGUgZnJhbWUgcmF0ZSBvbiBub24tcGx1
cyBpLk1YNlEsCmFzIHRoZSBJRE1BQyBjdXJyZW50IGJ1ZmZlciBwb2ludGVyIGlzIG5vdCB5ZXQg
dXBkYXRlZCB3aGVuCmlwdV9wbGFuZV9hdG9taWNfdXBkYXRlX3BlbmRpbmcgaXMgY2FsbGVkIGZy
b20gdGhlIEVPRiBpcnEgaGFuZGxlci4KCkZpeGVzOiA3MGU4YTBjNzFlOSAoImRybS9pbXg6IGlw
dXYzLXBsYW5lOiBhZGQgZnVuY3Rpb24gdG8gcXVlcnkgYXRvbWljIHVwZGF0ZSBzdGF0dXMiKQpU
ZXN0ZWQtYnk6IE1hcmNvIEZlbHNjaCA8bS5mZWxzY2hAcGVuZ3V0cm9uaXguZGU+ClNpZ25lZC1v
ZmYtYnk6IFBoaWxpcHAgWmFiZWwgPHAuemFiZWxAcGVuZ3V0cm9uaXguZGU+Ci0tLQogZHJpdmVy
cy9ncHUvZHJtL2lteC9pcHV2My1wbGFuZS5jIHwgMTMgKysrKysrKystLS0tLQogZHJpdmVycy9n
cHUvZHJtL2lteC9pcHV2My1wbGFuZS5oIHwgIDEgLQogMiBmaWxlcyBjaGFuZ2VkLCA4IGluc2Vy
dGlvbnMoKyksIDYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2lt
eC9pcHV2My1wbGFuZS5jIGIvZHJpdmVycy9ncHUvZHJtL2lteC9pcHV2My1wbGFuZS5jCmluZGV4
IGQ3YTcyN2E2ZTNkNy4uOTFlZGZlMjQ5OGE2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aW14L2lwdXYzLXBsYW5lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2lteC9pcHV2My1wbGFuZS5j
CkBAIC02MDUsNyArNjA1LDYgQEAgc3RhdGljIHZvaWQgaXB1X3BsYW5lX2F0b21pY191cGRhdGUo
c3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCiAJCWFjdGl2ZSA9IGlwdV9pZG1hY19nZXRfY3VycmVu
dF9idWZmZXIoaXB1X3BsYW5lLT5pcHVfY2gpOwogCQlpcHVfY3BtZW1fc2V0X2J1ZmZlcihpcHVf
cGxhbmUtPmlwdV9jaCwgIWFjdGl2ZSwgZWJhKTsKIAkJaXB1X2lkbWFjX3NlbGVjdF9idWZmZXIo
aXB1X3BsYW5lLT5pcHVfY2gsICFhY3RpdmUpOwotCQlpcHVfcGxhbmUtPm5leHRfYnVmID0gIWFj
dGl2ZTsKIAkJaWYgKGlwdV9wbGFuZV9zZXBhcmF0ZV9hbHBoYShpcHVfcGxhbmUpKSB7CiAJCQlh
Y3RpdmUgPSBpcHVfaWRtYWNfZ2V0X2N1cnJlbnRfYnVmZmVyKGlwdV9wbGFuZS0+YWxwaGFfY2gp
OwogCQkJaXB1X2NwbWVtX3NldF9idWZmZXIoaXB1X3BsYW5lLT5hbHBoYV9jaCwgIWFjdGl2ZSwK
QEAgLTcxMCw3ICs3MDksNiBAQCBzdGF0aWMgdm9pZCBpcHVfcGxhbmVfYXRvbWljX3VwZGF0ZShz
dHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwKIAlpcHVfY3BtZW1fc2V0X2J1ZmZlcihpcHVfcGxhbmUt
PmlwdV9jaCwgMSwgZWJhKTsKIAlpcHVfaWRtYWNfbG9ja19lbmFibGUoaXB1X3BsYW5lLT5pcHVf
Y2gsIG51bV9idXJzdHMpOwogCWlwdV9wbGFuZV9lbmFibGUoaXB1X3BsYW5lKTsKLQlpcHVfcGxh
bmUtPm5leHRfYnVmID0gLTE7CiB9CiAKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3BsYW5lX2hl
bHBlcl9mdW5jcyBpcHVfcGxhbmVfaGVscGVyX2Z1bmNzID0gewpAQCAtNzMyLDEwICs3MzAsMTUg
QEAgYm9vbCBpcHVfcGxhbmVfYXRvbWljX3VwZGF0ZV9wZW5kaW5nKHN0cnVjdCBkcm1fcGxhbmUg
KnBsYW5lKQogCiAJaWYgKGlwdV9zdGF0ZS0+dXNlX3ByZSkKIAkJcmV0dXJuIGlwdV9wcmdfY2hh
bm5lbF9jb25maWd1cmVfcGVuZGluZyhpcHVfcGxhbmUtPmlwdV9jaCk7Ci0JZWxzZSBpZiAoaXB1
X3BsYW5lLT5uZXh0X2J1ZiA+PSAwKQotCQlyZXR1cm4gaXB1X2lkbWFjX2dldF9jdXJyZW50X2J1
ZmZlcihpcHVfcGxhbmUtPmlwdV9jaCkgIT0KLQkJICAgICAgIGlwdV9wbGFuZS0+bmV4dF9idWY7
CiAKKwkvKgorCSAqIFByZXRlbmQgbm8gdXBkYXRlIGlzIHBlbmRpbmcgaW4gdGhlIG5vbi1QUkUv
UFJHIGNhc2UuIEZvciB0aGlzIHRvCisJICogaGFwcGVuLCBhbiBhdG9taWMgdXBkYXRlIHdvdWxk
IGhhdmUgdG8gYmUgZGVmZXJyZWQgdW50aWwgYWZ0ZXIgdGhlCisJICogc3RhcnQgb2YgdGhlIG5l
eHQgZnJhbWUgYW5kIHNpbXVsdGFuZW91c2x5IGludGVycnVwdCBsYXRlbmN5IHdvdWxkCisJICog
aGF2ZSB0byBiZSBoaWdoIGVub3VnaCB0byBsZXQgdGhlIGF0b21pYyB1cGRhdGUgZmluaXNoIGFu
ZCBpc3N1ZSBhbgorCSAqIGV2ZW50IGJlZm9yZSB0aGUgcHJldmlvdXMgZW5kIG9mIGZyYW1lIGlu
dGVycnVwdCBoYW5kbGVyIGNhbiBiZQorCSAqIGV4ZWN1dGVkLgorCSAqLwogCXJldHVybiBmYWxz
ZTsKIH0KIGludCBpcHVfcGxhbmVzX2Fzc2lnbl9wcmUoc3RydWN0IGRybV9kZXZpY2UgKmRldiwK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pbXgvaXB1djMtcGxhbmUuaCBiL2RyaXZlcnMv
Z3B1L2RybS9pbXgvaXB1djMtcGxhbmUuaAppbmRleCAxNWU4NWUxNWQzNWMuLmZmYWNiY2RkMmY5
OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2lteC9pcHV2My1wbGFuZS5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pbXgvaXB1djMtcGxhbmUuaApAQCAtMjcsNyArMjcsNiBAQCBzdHJ1Y3Qg
aXB1X3BsYW5lIHsKIAlpbnQJCQlkcF9mbG93OwogCiAJYm9vbAkJCWRpc2FibGluZzsKLQlpbnQJ
CQluZXh0X2J1ZjsKIH07CiAKIHN0cnVjdCBpcHVfcGxhbmUgKmlwdV9wbGFuZV9pbml0KHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBpcHVfc29jICppcHUsCi0tIAoyLjIwLjEKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
