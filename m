Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 2DBC7B7BE8
	for <lists+dri-devel@lfdr.de>; Thu, 19 Sep 2019 16:14:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 87C9E6F8E6;
	Thu, 19 Sep 2019 14:14:16 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yw1-xc43.google.com (mail-yw1-xc43.google.com
 [IPv6:2607:f8b0:4864:20::c43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 692436F8E6
 for <dri-devel@lists.freedesktop.org>; Thu, 19 Sep 2019 14:14:15 +0000 (UTC)
Received: by mail-yw1-xc43.google.com with SMTP id n11so1276671ywn.6
 for <dri-devel@lists.freedesktop.org>; Thu, 19 Sep 2019 07:14:15 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=udmOyjd9D9tkFljgvi3r1XrIW/XfmorOvAaN7s+8Jwc=;
 b=iLrUZdAWd5DvOYKjsoZ2mloT4gNmN088ZJ+rlrN3eHkmO/O3j5okqzleb36kCs+7zs
 OXZWybUqSV+1KlnckUxoNzG5c2j6Wr/qSRsadlW45mNzR/bgXVuIPWzaxwvOGEz5+gz8
 9rmi4mKVMO54YdfkEXCs1A/ZZ474Xt/C7gklDf1T80jXZEkOKw/mcJfzhdR89qPuf/D1
 TRYK/WI5ubdO2i14Vpe0sQYCf5Abse+rm+l/+98ryneMXySkYXDYwXwmfE9u83IvXf9p
 VXpa7Keii5+RXiyNqj1v0Mryte+ivUhUAcXQF6BvjWlhT9UBxQ0ZFgggfateGf5/cAKz
 JZYg==
X-Gm-Message-State: APjAAAV6Ucn7PSeUL1Gk9CdukFvaTUJL7HKiT/tvlZxZbrfHK+WRcUzx
 u0P/oRLYkPMwhBRyLdDXfE75oP2q+40iQQ==
X-Google-Smtp-Source: APXvYqyIrM/I2o6POD5dYaVuNOMphdTt9P9xMiGUBl7nZ1fEtJ9pCoBZy7YCeft7N+10PTFz7M/TMQ==
X-Received: by 2002:a0d:c907:: with SMTP id l7mr7869011ywd.246.1568902454106; 
 Thu, 19 Sep 2019 07:14:14 -0700 (PDT)
Received: from localhost ([2620:0:1013:11:89c6:2139:5435:371d])
 by smtp.gmail.com with ESMTPSA id h136sm1947725ywc.83.2019.09.19.07.14.13
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 19 Sep 2019 07:14:13 -0700 (PDT)
Date: Thu, 19 Sep 2019 10:14:13 -0400
From: Sean Paul <sean@poorly.run>
To: dri-devel@lists.freedesktop.org
Subject: Re: [PATCH v2 2/3] drm: Measure Self Refresh Entry/Exit times to
 avoid thrashing
Message-ID: <20190919141413.GU218215@art_vandelay>
References: <20190918200734.149876-1-sean@poorly.run>
 <20190918200734.149876-2-sean@poorly.run>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190918200734.149876-2-sean@poorly.run>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=poorly.run; s=google;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=udmOyjd9D9tkFljgvi3r1XrIW/XfmorOvAaN7s+8Jwc=;
 b=fpN3uw4uMXsVCezAjyNW9ur4T/pM6qJb5e5n7XGGJT2qSrDhkNkfgnDxJ9KmlBNQPB
 p0hAx5NW9K5Hq5XDqWTdvHuA6lTLTFDCxijZZpZTqickdBBlvmIUexdUxX15HPnVLZxw
 Wq+HizWLYftCTSKiPDmsEE/8EUAP/YgIH44FPvc783K07en1rxX7f3lH8KI84SvRrX4r
 Sk4E7QxyYHYSiX5/2GikWfvc5Q/Kjh5BGUTBuhCOsHJ9AkQyuFDXMI2uXdY2jaR2Jk41
 6oOmPqXmarqNl1Ee3KHYlIUBdNwL/F84RBYG47UxIhjncPGdS90FbhA6O66w0j6UDWun
 vkSg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, Daniel Vetter <daniel.vetter@ffwll.ch>,
 linux-kernel@vger.kernel.org, linux-rockchip@lists.infradead.org,
 Sean Paul <seanpaul@chromium.org>, jekarl@iki.fi, Sean Paul <sean@poorly.run>,
 linux-arm-kernel@lists.infradead.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBTZXAgMTgsIDIwMTkgYXQgMDQ6MDc6MjlQTSAtMDQwMCwgU2VhbiBQYXVsIHdyb3Rl
Ogo+IEZyb206IFNlYW4gUGF1bCA8c2VhbnBhdWxAY2hyb21pdW0ub3JnPgo+IAo+IEN1cnJlbnRs
eSB0aGUgc2VsZiByZWZyZXNoIGlkbGUgdGltZXIgaXMgYSBjb25zdCBzZXQgYnkgdGhlIGNydGMu
IFRoaXMKPiBpcyBmaW5lIGlmIHRoZSBzZWxmIHJlZnJlc2ggZW50cnkvZXhpdCB0aW1lcyBhcmUg
d2VsbC1rbm93biBmb3IgYWxsCj4gcGFuZWxzIHVzZWQgb24gdGhhdCBjcnRjLiBIb3dldmVyIHBh
bmVscyBhbmQgd29ya2xvYWRzIGNhbiB2YXJ5IHF1aXRlIGEKPiBiaXQsIGFuZCBhIHRpbWVvdXQg
d2hpY2ggd29ya3Mgd2VsbCBmb3Igb25lIGRvZXNuJ3Qgd29yayB3ZWxsIGZvcgo+IGFub3RoZXIu
Cj4gCj4gSW4gdGhlIGV4dHJlbWUsIGlmIHRoZSB0aW1lb3V0IGlzIHRvbyBzaG9ydCB3ZSBjb3Vs
ZCBnZXQgaW4gYSBzaXR1YXRpb24KPiB3aGVyZSB0aGUgc2VsZiByZWZyZXNoIGV4aXRzIGFyZSB0
YWtpbmcgc28gbG9uZyB3ZSBxdWV1ZSB1cCBhIHNlbGYgcmVmcmVzaAo+IGVudHJ5IGJlZm9yZSB0
aGUgZXhpdCBjb21taXQgaXMgZXZlbiBmaW5pc2hlZC4KPiAKPiBUaGlzIHBhdGNoIGNoYW5nZXMg
dGhlIGlkbGUgdGltZW91dCB0byBhIG1vdmluZyBhdmVyYWdlIG9mIHRoZSBlbnRyeQo+IHRpbWVz
ICsgYSBtb3ZpbmcgYXZlcmFnZSBvZiBleGl0IHRpbWVzICsgdGhlIGNydGMgY29uc3RhbnQuCj4g
Cj4gVGhpcyBwYXRjaCB3YXMgdGVzdGVkIG9uIHJvY2tjaGlwLCB3aXRoIGEga2V2aW4gQ3JPUyBw
YW5lbCB0aGUgaWRsZQo+IGRlbGF5IGF2ZXJhZ2VzIG91dCB0byBhYm91dCB+MjM1bXMgKDM1IGVu
dHJ5ICsgMTAwIGV4aXQgKyAxMDAgY29uc3QpLiBPbgo+IHRoZSBzYW1lIGJvYXJkLCB0aGUgYm9i
IHBhbmVsIGlkbGUgZGVsYXkgbGFuZHMgYXJvdW5kIH4zNDBtcyAoOTAgZW50cnkKPiArIDE1MCBl
eGl0ICsgMTAwIGNvbnN0KS4KPiAKPiBXUlQgdGhlIGRlZGljYXRlZCBtdXRleCBpbiBzZWxmX3Jl
ZnJlc2hfZGF0YSwgaXQgd291bGQgYmUgbmljZSBpZiB3ZQo+IGNvdWxkIHJlbHkgb24gZHJtX2Ny
dGMubXV0ZXggdG8gcHJvdGVjdCB0aGUgYXZlcmFnZSB0aW1lcywgYnV0IHRoZXJlIGFyZQo+IGEg
ZmV3IHJlYXNvbnMgd2h5IGEgc2VwYXJhdGUgbG9jayBpcyBhIGJldHRlciBjaG9pY2U6Cj4gLSBX
ZSBjYW4ndCByZWx5IG9uIGRybV9jcnRjLm11dGV4IGJlaW5nIGhlbGQgaWYgd2UncmUgZG9pbmcg
YSBub25ibG9ja2luZwo+ICAgY29tbWl0Cj4gLSBXZSBjYW4ndCBncmFiIGRybV9jcnRjLm11dGV4
IHNpbmNlIGRybV9tb2Rlc2V0X2xvY2soKSBkb2Vzbid0IHRlbGwgdXMKPiAgIHdoZXRoZXIgdGhl
IGxvY2sgd2FzIGFscmVhZHkgaGVsZCBpbiB0aGUgYWNxdWlyZSBjb250ZXh0IChpdCBlYXRzCj4g
ICAtRUFMUkVBRFkpLCBzbyB3ZSBjYW4ndCB0ZWxsIGlmIHdlIHNob3VsZCBkcm9wIGl0IG9yIG5v
dAo+IC0gV2UgZG9uJ3QgbmVlZCBzdWNoIGEgaGVhdnktaGFuZGVkIGxvY2sgZm9yIHdoYXQgd2Un
cmUgdHJ5aW5nIHRvIGRvLAo+ICAgY29tbWl0IG9yZGVyaW5nIGRvZXNuJ3QgbWF0dGVyLCBzbyBh
IHBvaW50LW9mLXVzZSBsb2NrIHdpbGwgYmUgbGVzcwo+ICAgY29udGVudGlvdXMKPiAKPiBSZXZp
ZXdlZC1ieTogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBmZndsbC5jaD4KClB1c2hlZCB0
aGUgZmlyc3QgMiB0byBkcm0tbWlzYy1uZXh0LWZpeGVzIHRvIGZpeCB0aGUgZ3J1LWJvYiByZWdy
ZXNzaW9uLiBJJ2xsCmZpeCB1cCB0aGUgM3JkIHBhdGNoIHNlcGFyYXRlbHkuCgpUaGFuayB5b3Ug
Zm9yIHRoZSByZXZpZXdzIQoKU2VhbgoKPiBTaWduZWQtb2ZmLWJ5OiBTZWFuIFBhdWwgPHNlYW5w
YXVsQGNocm9taXVtLm9yZz4KPiBMaW5rIHRvIHYxOiBodHRwczovL3BhdGNod29yay5mcmVlZGVz
a3RvcC5vcmcvcGF0Y2gvbXNnaWQvMjAxOTA5MTcyMDA0NDMuNjQ0ODEtMi1zZWFuQHBvb3JseS5y
dW4KPiAKPiBDaGFuZ2VzIGluIHYyOgo+IC0gTWlncmF0ZSBsb2NraW5nIGV4cGxhbmF0aW9uIGZy
b20gY29tbWVudCB0byBjb21taXQgbXNnIChEYW5pZWwpCj4gLSBUdXJmIGNvbnN0YW50IGVudHJ5
IGRlbGF5IGFuZCBtdWx0aXBseSB0aGUgYXZnIHRpbWVzIGJ5IDIgKERhbmllbCkKPiAtLS0KPiAg
ZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfaGVscGVyLmMgICAgICAgICB8IDIwICsrKysrKwo+
ICBkcml2ZXJzL2dwdS9kcm0vZHJtX3NlbGZfcmVmcmVzaF9oZWxwZXIuYyAgIHwgNzIgKysrKysr
KysrKysrKysrKysrKy0tCj4gIGRyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9kcm1f
dm9wLmMgfCAgNSArLQo+ICBpbmNsdWRlL2RybS9kcm1fc2VsZl9yZWZyZXNoX2hlbHBlci5oICAg
ICAgIHwgIDYgKy0KPiAgNCBmaWxlcyBjaGFuZ2VkLCA5MCBpbnNlcnRpb25zKCspLCAxMyBkZWxl
dGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfaGVs
cGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19oZWxwZXIuYwo+IGluZGV4IDlkN2U0
ZGE2YzI5Mi4uM2YxM2ZhOWE5ZTI0IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1f
YXRvbWljX2hlbHBlci5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfaGVscGVy
LmMKPiBAQCAtMjYsNiArMjYsNyBAQAo+ICAgKi8KPiAgCj4gICNpbmNsdWRlIDxsaW51eC9kbWEt
ZmVuY2UuaD4KPiArI2luY2x1ZGUgPGxpbnV4L2t0aW1lLmg+Cj4gIAo+ICAjaW5jbHVkZSA8ZHJt
L2RybV9hdG9taWMuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fYXRvbWljX2hlbHBlci5oPgo+IEBA
IC0xNTcwLDkgKzE1NzEsMjMgQEAgc3RhdGljIHZvaWQgY29tbWl0X3RhaWwoc3RydWN0IGRybV9h
dG9taWNfc3RhdGUgKm9sZF9zdGF0ZSkKPiAgewo+ICAJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9
IG9sZF9zdGF0ZS0+ZGV2Owo+ICAJY29uc3Qgc3RydWN0IGRybV9tb2RlX2NvbmZpZ19oZWxwZXJf
ZnVuY3MgKmZ1bmNzOwo+ICsJa3RpbWVfdCBzdGFydDsKPiArCXM2NCBjb21taXRfdGltZV9tczsK
PiAgCj4gIAlmdW5jcyA9IGRldi0+bW9kZV9jb25maWcuaGVscGVyX3ByaXZhdGU7Cj4gIAo+ICsJ
LyoKPiArCSAqIFdlJ3JlIG1lYXN1cmluZyB0aGUgX2VudGlyZV8gY29tbWl0LCBzbyB0aGUgdGlt
ZSB3aWxsIHZhcnkgZGVwZW5kaW5nCj4gKwkgKiBvbiBob3cgbWFueSBmZW5jZXMgYW5kIG9iamVj
dHMgYXJlIGludm9sdmVkLiBGb3IgdGhlIHB1cnBvc2VzIG9mIHNlbGYKPiArCSAqIHJlZnJlc2gs
IHRoaXMgaXMgZGVzaXJhYmxlIHNpbmNlIGl0J2xsIGdpdmUgdXMgYW4gaWRlYSBvZiBob3cKPiAr
CSAqIGNvbmdlc3RlZCB0aGluZ3MgYXJlLiBUaGlzIHdpbGwgaW5mb3JtIG91ciBkZWNpc2lvbiBv
biBob3cgb2Z0ZW4gd2UKPiArCSAqIHNob3VsZCBlbnRlciBzZWxmIHJlZnJlc2ggYWZ0ZXIgaWRs
ZS4KPiArCSAqCj4gKwkgKiBUaGVzZSB0aW1lcyB3aWxsIGJlIGF2ZXJhZ2VkIG91dCBpbiB0aGUg
c2VsZiByZWZyZXNoIGhlbHBlcnMgdG8gYXZvaWQKPiArCSAqIG92ZXJyZWFjdGluZyBvdmVyIG9u
ZSBvdXRsaWVyIGZyYW1lCj4gKwkgKi8KPiArCXN0YXJ0ID0ga3RpbWVfZ2V0KCk7Cj4gKwo+ICAJ
ZHJtX2F0b21pY19oZWxwZXJfd2FpdF9mb3JfZmVuY2VzKGRldiwgb2xkX3N0YXRlLCBmYWxzZSk7
Cj4gIAo+ICAJZHJtX2F0b21pY19oZWxwZXJfd2FpdF9mb3JfZGVwZW5kZW5jaWVzKG9sZF9zdGF0
ZSk7Cj4gQEAgLTE1ODIsNiArMTU5NywxMSBAQCBzdGF0aWMgdm9pZCBjb21taXRfdGFpbChzdHJ1
Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX3N0YXRlKQo+ICAJZWxzZQo+ICAJCWRybV9hdG9taWNf
aGVscGVyX2NvbW1pdF90YWlsKG9sZF9zdGF0ZSk7Cj4gIAo+ICsJY29tbWl0X3RpbWVfbXMgPSBr
dGltZV9tc19kZWx0YShrdGltZV9nZXQoKSwgc3RhcnQpOwo+ICsJaWYgKGNvbW1pdF90aW1lX21z
ID4gMCkKPiArCQlkcm1fc2VsZl9yZWZyZXNoX2hlbHBlcl91cGRhdGVfYXZnX3RpbWVzKG9sZF9z
dGF0ZSwKPiArCQkJCQkJICh1bnNpZ25lZCBsb25nKWNvbW1pdF90aW1lX21zKTsKPiArCj4gIAlk
cm1fYXRvbWljX2hlbHBlcl9jb21taXRfY2xlYW51cF9kb25lKG9sZF9zdGF0ZSk7Cj4gIAo+ICAJ
ZHJtX2F0b21pY19zdGF0ZV9wdXQob2xkX3N0YXRlKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2RybV9zZWxmX3JlZnJlc2hfaGVscGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3Nl
bGZfcmVmcmVzaF9oZWxwZXIuYwo+IGluZGV4IDkwOTVjZWJmMjE0Ny4uNjhmNDc2NWE1ODk2IDEw
MDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fc2VsZl9yZWZyZXNoX2hlbHBlci5jCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9zZWxmX3JlZnJlc2hfaGVscGVyLmMKPiBAQCAtNSw2
ICs1LDcgQEAKPiAgICogQXV0aG9yczoKPiAgICogU2VhbiBQYXVsIDxzZWFucGF1bEBjaHJvbWl1
bS5vcmc+Cj4gICAqLwo+ICsjaW5jbHVkZSA8bGludXgvYXZlcmFnZS5oPgo+ICAjaW5jbHVkZSA8
bGludXgvYml0b3BzLmg+Cj4gICNpbmNsdWRlIDxsaW51eC9zbGFiLmg+Cj4gICNpbmNsdWRlIDxs
aW51eC93b3JrcXVldWUuaD4KPiBAQCAtNTAsMTAgKzUxLDE3IEBACj4gICAqIGF0b21pY19jaGVj
ayB3aGVuICZkcm1fY3J0Y19zdGF0ZS5zZWxmX3JlZnJlc2hfYWN0aXZlIGlzIHRydWUuCj4gICAq
Lwo+ICAKPiArI2RlZmluZSBTRUxGX1JFRlJFU0hfQVZHX1NFRURfTVMgMjAwCj4gKwo+ICtERUNM
QVJFX0VXTUEocHNyX3RpbWUsIDQsIDQpCj4gKwo+ICBzdHJ1Y3QgZHJtX3NlbGZfcmVmcmVzaF9k
YXRhIHsKPiAgCXN0cnVjdCBkcm1fY3J0YyAqY3J0YzsKPiAgCXN0cnVjdCBkZWxheWVkX3dvcmsg
ZW50cnlfd29yazsKPiAtCXVuc2lnbmVkIGludCBlbnRyeV9kZWxheV9tczsKPiArCj4gKwlzdHJ1
Y3QgbXV0ZXggYXZnX211dGV4Owo+ICsJc3RydWN0IGV3bWFfcHNyX3RpbWUgZW50cnlfYXZnX21z
Owo+ICsJc3RydWN0IGV3bWFfcHNyX3RpbWUgZXhpdF9hdmdfbXM7Cj4gIH07Cj4gIAo+ICBzdGF0
aWMgdm9pZCBkcm1fc2VsZl9yZWZyZXNoX2hlbHBlcl9lbnRyeV93b3JrKHN0cnVjdCB3b3JrX3N0
cnVjdCAqd29yaykKPiBAQCAtMTIxLDYgKzEyOSw0NCBAQCBzdGF0aWMgdm9pZCBkcm1fc2VsZl9y
ZWZyZXNoX2hlbHBlcl9lbnRyeV93b3JrKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKPiAgCWRy
bV9tb2Rlc2V0X2FjcXVpcmVfZmluaSgmY3R4KTsKPiAgfQo+ICAKPiArLyoqCj4gKyAqIGRybV9z
ZWxmX3JlZnJlc2hfaGVscGVyX3VwZGF0ZV9hdmdfdGltZXMgLSBVcGRhdGVzIGEgY3J0YydzIFNS
IHRpbWUgYXZlcmFnZXMKPiArICogQHN0YXRlOiB0aGUgc3RhdGUgd2hpY2ggaGFzIGp1c3QgYmVl
biBhcHBsaWVkIHRvIGhhcmR3YXJlCj4gKyAqIEBjb21taXRfdGltZV9tczogdGhlIGFtb3VudCBv
ZiB0aW1lIGluIG1zIHRoYXQgdGhpcyBjb21taXQgdG9vayB0byBjb21wbGV0ZQo+ICsgKgo+ICsg
KiBDYWxsZWQgYWZ0ZXIgJmRybV9tb2RlX2NvbmZpZ19mdW5jcy5hdG9taWNfY29tbWl0X3RhaWws
IHRoaXMgZnVuY3Rpb24gd2lsbAo+ICsgKiB1cGRhdGUgdGhlIGF2ZXJhZ2UgZW50cnkvZXhpdCBz
ZWxmIHJlZnJlc2ggdGltZXMgb24gc2VsZiByZWZyZXNoIHRyYW5zaXRpb25zLgo+ICsgKiBUaGVz
ZSBhdmVyYWdlcyB3aWxsIGJlIHVzZWQgd2hlbiBjYWxjdWxhdGluZyBob3cgbG9uZyB0byBkZWxh
eSBiZWZvcmUKPiArICogZW50ZXJpbmcgc2VsZiByZWZyZXNoIG1vZGUgYWZ0ZXIgYWN0aXZpdHku
Cj4gKyAqLwo+ICt2b2lkIGRybV9zZWxmX3JlZnJlc2hfaGVscGVyX3VwZGF0ZV9hdmdfdGltZXMo
c3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlLAo+ICsJCQkJCSAgICAgIHVuc2lnbmVkIGlu
dCBjb21taXRfdGltZV9tcykKPiArewo+ICsJc3RydWN0IGRybV9jcnRjICpjcnRjOwo+ICsJc3Ry
dWN0IGRybV9jcnRjX3N0YXRlICpvbGRfY3J0Y19zdGF0ZSwgKm5ld19jcnRjX3N0YXRlOwo+ICsJ
aW50IGk7Cj4gKwo+ICsJZm9yX2VhY2hfb2xkbmV3X2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMs
IG9sZF9jcnRjX3N0YXRlLAo+ICsJCQkJICAgICAgbmV3X2NydGNfc3RhdGUsIGkpIHsKPiArCQlz
dHJ1Y3QgZHJtX3NlbGZfcmVmcmVzaF9kYXRhICpzcl9kYXRhID0gY3J0Yy0+c2VsZl9yZWZyZXNo
X2RhdGE7Cj4gKwkJc3RydWN0IGV3bWFfcHNyX3RpbWUgKnRpbWU7Cj4gKwo+ICsJCWlmIChvbGRf
Y3J0Y19zdGF0ZS0+c2VsZl9yZWZyZXNoX2FjdGl2ZSA9PQo+ICsJCSAgICBuZXdfY3J0Y19zdGF0
ZS0+c2VsZl9yZWZyZXNoX2FjdGl2ZSkKPiArCQkJY29udGludWU7Cj4gKwo+ICsJCWlmIChuZXdf
Y3J0Y19zdGF0ZS0+c2VsZl9yZWZyZXNoX2FjdGl2ZSkKPiArCQkJdGltZSA9ICZzcl9kYXRhLT5l
bnRyeV9hdmdfbXM7Cj4gKwkJZWxzZQo+ICsJCQl0aW1lID0gJnNyX2RhdGEtPmV4aXRfYXZnX21z
Owo+ICsKPiArCQltdXRleF9sb2NrKCZzcl9kYXRhLT5hdmdfbXV0ZXgpOwo+ICsJCWV3bWFfcHNy
X3RpbWVfYWRkKHRpbWUsIGNvbW1pdF90aW1lX21zKTsKPiArCQltdXRleF91bmxvY2soJnNyX2Rh
dGEtPmF2Z19tdXRleCk7Cj4gKwl9Cj4gK30KPiArRVhQT1JUX1NZTUJPTChkcm1fc2VsZl9yZWZy
ZXNoX2hlbHBlcl91cGRhdGVfYXZnX3RpbWVzKTsKPiArCj4gIC8qKgo+ICAgKiBkcm1fc2VsZl9y
ZWZyZXNoX2hlbHBlcl9hbHRlcl9zdGF0ZSAtIEFsdGVycyB0aGUgYXRvbWljIHN0YXRlIGZvciBT
UiBleGl0Cj4gICAqIEBzdGF0ZTogdGhlIHN0YXRlIGN1cnJlbnRseSBiZWluZyBjaGVja2VkCj4g
QEAgLTE1Miw2ICsxOTgsNyBAQCB2b2lkIGRybV9zZWxmX3JlZnJlc2hfaGVscGVyX2FsdGVyX3N0
YXRlKHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSkKPiAgCj4gIAlmb3JfZWFjaF9uZXdf
Y3J0Y19pbl9zdGF0ZShzdGF0ZSwgY3J0YywgY3J0Y19zdGF0ZSwgaSkgewo+ICAJCXN0cnVjdCBk
cm1fc2VsZl9yZWZyZXNoX2RhdGEgKnNyX2RhdGE7Cj4gKwkJdW5zaWduZWQgaW50IGRlbGF5Owo+
ICAKPiAgCQkvKiBEb24ndCB0cmlnZ2VyIHRoZSBlbnRyeSB0aW1lciB3aGVuIHdlJ3JlIGFscmVh
ZHkgaW4gU1IgKi8KPiAgCQlpZiAoY3J0Y19zdGF0ZS0+c2VsZl9yZWZyZXNoX2FjdGl2ZSkKPiBA
QCAtMTYxLDggKzIwOCwxMyBAQCB2b2lkIGRybV9zZWxmX3JlZnJlc2hfaGVscGVyX2FsdGVyX3N0
YXRlKHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSkKPiAgCQlpZiAoIXNyX2RhdGEpCj4g
IAkJCWNvbnRpbnVlOwo+ICAKPiArCQltdXRleF9sb2NrKCZzcl9kYXRhLT5hdmdfbXV0ZXgpOwo+
ICsJCWRlbGF5ID0gKGV3bWFfcHNyX3RpbWVfcmVhZCgmc3JfZGF0YS0+ZW50cnlfYXZnX21zKSAr
Cj4gKwkJCSBld21hX3Bzcl90aW1lX3JlYWQoJnNyX2RhdGEtPmV4aXRfYXZnX21zKSkgKiAyOwo+
ICsJCW11dGV4X3VubG9jaygmc3JfZGF0YS0+YXZnX211dGV4KTsKPiArCj4gIAkJbW9kX2RlbGF5
ZWRfd29yayhzeXN0ZW1fd3EsICZzcl9kYXRhLT5lbnRyeV93b3JrLAo+IC0JCQkJIG1zZWNzX3Rv
X2ppZmZpZXMoc3JfZGF0YS0+ZW50cnlfZGVsYXlfbXMpKTsKPiArCQkJCSBtc2Vjc190b19qaWZm
aWVzKGRlbGF5KSk7Cj4gIAl9Cj4gIH0KPiAgRVhQT1JUX1NZTUJPTChkcm1fc2VsZl9yZWZyZXNo
X2hlbHBlcl9hbHRlcl9zdGF0ZSk7Cj4gQEAgLTE3MCwxMiArMjIyLDEwIEBAIEVYUE9SVF9TWU1C
T0woZHJtX3NlbGZfcmVmcmVzaF9oZWxwZXJfYWx0ZXJfc3RhdGUpOwo+ICAvKioKPiAgICogZHJt
X3NlbGZfcmVmcmVzaF9oZWxwZXJfaW5pdCAtIEluaXRpYWxpemVzIHNlbGYgcmVmcmVzaCBoZWxw
ZXJzIGZvciBhIGNydGMKPiAgICogQGNydGM6IHRoZSBjcnRjIHdoaWNoIHN1cHBvcnRzIHNlbGYg
cmVmcmVzaCBzdXBwb3J0ZWQgZGlzcGxheXMKPiAtICogQGVudHJ5X2RlbGF5X21zOiBhbW91bnQg
b2YgaW5hY3Rpdml0eSB0byB3YWl0IGJlZm9yZSBlbnRlcmluZyBzZWxmIHJlZnJlc2gKPiAgICoK
PiAgICogUmV0dXJucyB6ZXJvIGlmIHN1Y2Nlc3NmdWwgb3IgLWVycm5vIG9uIGZhaWx1cmUKPiAg
ICovCj4gLWludCBkcm1fc2VsZl9yZWZyZXNoX2hlbHBlcl9pbml0KHN0cnVjdCBkcm1fY3J0YyAq
Y3J0YywKPiAtCQkJCSB1bnNpZ25lZCBpbnQgZW50cnlfZGVsYXlfbXMpCj4gK2ludCBkcm1fc2Vs
Zl9yZWZyZXNoX2hlbHBlcl9pbml0KHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKPiAgewo+ICAJc3Ry
dWN0IGRybV9zZWxmX3JlZnJlc2hfZGF0YSAqc3JfZGF0YSA9IGNydGMtPnNlbGZfcmVmcmVzaF9k
YXRhOwo+ICAKPiBAQCAtMTg5LDggKzIzOSwxOCBAQCBpbnQgZHJtX3NlbGZfcmVmcmVzaF9oZWxw
ZXJfaW5pdChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4gIAo+ICAJSU5JVF9ERUxBWUVEX1dPUkso
JnNyX2RhdGEtPmVudHJ5X3dvcmssCj4gIAkJCSAgZHJtX3NlbGZfcmVmcmVzaF9oZWxwZXJfZW50
cnlfd29yayk7Cj4gLQlzcl9kYXRhLT5lbnRyeV9kZWxheV9tcyA9IGVudHJ5X2RlbGF5X21zOwo+
ICAJc3JfZGF0YS0+Y3J0YyA9IGNydGM7Cj4gKwltdXRleF9pbml0KCZzcl9kYXRhLT5hdmdfbXV0
ZXgpOwo+ICsJZXdtYV9wc3JfdGltZV9pbml0KCZzcl9kYXRhLT5lbnRyeV9hdmdfbXMpOwo+ICsJ
ZXdtYV9wc3JfdGltZV9pbml0KCZzcl9kYXRhLT5leGl0X2F2Z19tcyk7Cj4gKwo+ICsJLyoKPiAr
CSAqIFNlZWQgdGhlIGF2ZXJhZ2VzIHNvIHRoZXkncmUgbm9uLXplcm8gKGFuZCBzdWZmaWNpZW50
bHkgbGFyZ2UKPiArCSAqIGZvciBldmVuIHBvb3JseSBwZXJmb3JtaW5nIHBhbmVscykuIEFzIHRp
bWUgZ29lcyBvbiwgdGhpcyB3aWxsIGJlCj4gKwkgKiBhdmVyYWdlZCBvdXQgYW5kIHRoZSB2YWx1
ZXMgd2lsbCB0cmVuZCB0byB0aGVpciB0cnVlIHZhbHVlLgo+ICsJICovCj4gKwlld21hX3Bzcl90
aW1lX2FkZCgmc3JfZGF0YS0+ZW50cnlfYXZnX21zLCBTRUxGX1JFRlJFU0hfQVZHX1NFRURfTVMp
Owo+ICsJZXdtYV9wc3JfdGltZV9hZGQoJnNyX2RhdGEtPmV4aXRfYXZnX21zLCBTRUxGX1JFRlJF
U0hfQVZHX1NFRURfTVMpOwo+ICAKPiAgCWNydGMtPnNlbGZfcmVmcmVzaF9kYXRhID0gc3JfZGF0
YTsKPiAgCXJldHVybiAwOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAv
cm9ja2NoaXBfZHJtX3ZvcC5jIGIvZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX2Ry
bV92b3AuYwo+IGluZGV4IDJmODIxYzU4MDA3Yy4uNjEzNDA0Zjg2NjY4IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9kcm1fdm9wLmMKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vcm9ja2NoaXAvcm9ja2NoaXBfZHJtX3ZvcC5jCj4gQEAgLTM5LDggKzM5LDYg
QEAKPiAgI2luY2x1ZGUgInJvY2tjaGlwX2RybV92b3AuaCIKPiAgI2luY2x1ZGUgInJvY2tjaGlw
X3JnYi5oIgo+ICAKPiAtI2RlZmluZSBWT1BfU0VMRl9SRUZSRVNIX0VOVFJZX0RFTEFZX01TIDEw
MAo+IC0KPiAgI2RlZmluZSBWT1BfV0lOX1NFVCh2b3AsIHdpbiwgbmFtZSwgdikgXAo+ICAJCXZv
cF9yZWdfc2V0KHZvcCwgJndpbi0+cGh5LT5uYW1lLCB3aW4tPmJhc2UsIH4wLCB2LCAjbmFtZSkK
PiAgI2RlZmluZSBWT1BfU0NMX1NFVCh2b3AsIHdpbiwgbmFtZSwgdikgXAo+IEBAIC0xNTYzLDgg
KzE1NjEsNyBAQCBzdGF0aWMgaW50IHZvcF9jcmVhdGVfY3J0YyhzdHJ1Y3Qgdm9wICp2b3ApCj4g
IAlpbml0X2NvbXBsZXRpb24oJnZvcC0+bGluZV9mbGFnX2NvbXBsZXRpb24pOwo+ICAJY3J0Yy0+
cG9ydCA9IHBvcnQ7Cj4gIAo+IC0JcmV0ID0gZHJtX3NlbGZfcmVmcmVzaF9oZWxwZXJfaW5pdChj
cnRjLAo+IC0JCQkJCSAgIFZPUF9TRUxGX1JFRlJFU0hfRU5UUllfREVMQVlfTVMpOwo+ICsJcmV0
ID0gZHJtX3NlbGZfcmVmcmVzaF9oZWxwZXJfaW5pdChjcnRjKTsKPiAgCWlmIChyZXQpCj4gIAkJ
RFJNX0RFVl9ERUJVR19LTVModm9wLT5kZXYsCj4gIAkJCSJGYWlsZWQgdG8gaW5pdCAlcyB3aXRo
IFNSIGhlbHBlcnMgJWQsIGlnbm9yaW5nXG4iLAo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9k
cm1fc2VsZl9yZWZyZXNoX2hlbHBlci5oIGIvaW5jbHVkZS9kcm0vZHJtX3NlbGZfcmVmcmVzaF9o
ZWxwZXIuaAo+IGluZGV4IDM5N2E1ODNjY2NhNy4uNWI3OWQyNTNmYjQ2IDEwMDY0NAo+IC0tLSBh
L2luY2x1ZGUvZHJtL2RybV9zZWxmX3JlZnJlc2hfaGVscGVyLmgKPiArKysgYi9pbmNsdWRlL2Ry
bS9kcm1fc2VsZl9yZWZyZXNoX2hlbHBlci5oCj4gQEAgLTEyLDkgKzEyLDkgQEAgc3RydWN0IGRy
bV9hdG9taWNfc3RhdGU7Cj4gIHN0cnVjdCBkcm1fY3J0YzsKPiAgCj4gIHZvaWQgZHJtX3NlbGZf
cmVmcmVzaF9oZWxwZXJfYWx0ZXJfc3RhdGUoc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRl
KTsKPiArdm9pZCBkcm1fc2VsZl9yZWZyZXNoX2hlbHBlcl91cGRhdGVfYXZnX3RpbWVzKHN0cnVj
dCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSwKPiArCQkJCQkgICAgICB1bnNpZ25lZCBpbnQgY29t
bWl0X3RpbWVfbXMpOwo+ICAKPiAtaW50IGRybV9zZWxmX3JlZnJlc2hfaGVscGVyX2luaXQoc3Ry
dWN0IGRybV9jcnRjICpjcnRjLAo+IC0JCQkJIHVuc2lnbmVkIGludCBlbnRyeV9kZWxheV9tcyk7
Cj4gLQo+ICtpbnQgZHJtX3NlbGZfcmVmcmVzaF9oZWxwZXJfaW5pdChzdHJ1Y3QgZHJtX2NydGMg
KmNydGMpOwo+ICB2b2lkIGRybV9zZWxmX3JlZnJlc2hfaGVscGVyX2NsZWFudXAoc3RydWN0IGRy
bV9jcnRjICpjcnRjKTsKPiAgI2VuZGlmCj4gLS0gCj4gU2VhbiBQYXVsLCBTb2Z0d2FyZSBFbmdp
bmVlciwgR29vZ2xlIC8gQ2hyb21pdW0gT1MKPiAKCi0tIApTZWFuIFBhdWwsIFNvZnR3YXJlIEVu
Z2luZWVyLCBHb29nbGUgLyBDaHJvbWl1bSBPUwpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9kcmktZGV2ZWw=
