Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3A29D278667
	for <lists+dri-devel@lfdr.de>; Fri, 25 Sep 2020 13:56:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 456B56ECA5;
	Fri, 25 Sep 2020 11:56:09 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx2.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9BDCF6EC9B;
 Fri, 25 Sep 2020 11:56:07 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
 by mx2.suse.de (Postfix) with ESMTP id 286F6AF3F;
 Fri, 25 Sep 2020 11:56:06 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: sumit.semwal@linaro.org, christian.koenig@amd.com, afd@ti.com,
 corbet@lwn.net, benjamin.gaignard@linaro.org, lmark@codeaurora.org,
 labbott@redhat.com, Brian.Starkey@arm.com, john.stultz@linaro.org,
 maarten.lankhorst@linux.intel.com, mripard@kernel.org, airlied@linux.ie,
 daniel@ffwll.ch, l.stach@pengutronix.de, linux+etnaviv@armlinux.org.uk,
 christian.gmeiner@gmail.com, jani.nikula@linux.intel.com,
 joonas.lahtinen@linux.intel.com, rodrigo.vivi@intel.com,
 thierry.reding@gmail.com, jonathanh@nvidia.com, pawel@osciak.com,
 m.szyprowski@samsung.com, kyungmin.park@samsung.com, tfiga@chromium.org,
 mchehab@kernel.org, matthew.auld@intel.com, robin.murphy@arm.com,
 thomas.hellstrom@intel.com, sam@ravnborg.org, kraxel@redhat.com,
 arnd@arndb.de, gregkh@linuxfoundation.org
Subject: [PATCH v3 3/4] dma-buf: Use struct dma_buf_map in dma_buf_vunmap()
 interfaces
Date: Fri, 25 Sep 2020 13:56:00 +0200
Message-Id: <20200925115601.23955-4-tzimmermann@suse.de>
X-Mailer: git-send-email 2.28.0
In-Reply-To: <20200925115601.23955-1-tzimmermann@suse.de>
References: <20200925115601.23955-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-doc@vger.kernel.org, Daniel Vetter <daniel.vetter@ffwll.ch>,
 intel-gfx@lists.freedesktop.org, etnaviv@lists.freedesktop.org,
 dri-devel@lists.freedesktop.org, linaro-mm-sig@lists.linaro.org,
 Thomas Zimmermann <tzimmermann@suse.de>, linux-tegra@vger.kernel.org,
 linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCB1cGRhdGVzIGRtYV9idWZfdnVubWFwKCkgYW5kIGRtYS1idWYncyB2dW5tYXAg
Y2FsbGJhY2sgdG8KdXNlIHN0cnVjdCBkbWFfYnVmX21hcC4gVGhlIGludGVyZmFjZXMgdXNlZCB0
byByZWNlaXZlIGEgYnVmZmVyIGFkZHJlc3MuClRoaXMgYWRkcmVzcyBpcyBub3cgZ2l2ZW4gaW4g
YW4gaW5zdGFuY2Ugb2YgdGhlIHN0cnVjdHVyZS4KClVzZXJzIG9mIHRoZSBmdW5jdGlvbnMgYXJl
IHVwZGF0ZWQgYWNjb3JkaW5nbHkuIFRoaXMgaXMgb25seSBhbiBpbnRlcmZhY2UKY2hhbmdlLiBJ
dCBpcyBjdXJyZW50bHkgZXhwZWN0ZWQgdGhhdCBkbWEtYnVmIG1lbW9yeSBjYW4gYmUgYWNjZXNz
ZWQgd2l0aApzeXN0ZW0gbWVtb3J5IGxvYWQvc3RvcmUgb3BlcmF0aW9ucy4KCnYyOgoJKiBpbmNs
dWRlIGRtYS1idWYtaGVhcHMgYW5kIGk5MTUgc2VsZnRlc3RzIChrZXJuZWwgdGVzdCByb2JvdCkK
CSogaW5pdGlhbGl6ZSBjbWFfb2JqIGJlZm9yZSB1c2luZyBpdCBpbiBkcm1fZ2VtX2NtYV9mcmVl
X29iamVjdCgpCgkgIChrZXJuZWwgdGVzdCByb2JvdCkKClNpZ25lZC1vZmYtYnk6IFRob21hcyBa
aW1tZXJtYW5uIDx0emltbWVybWFubkBzdXNlLmRlPgpBY2tlZC1ieTogU3VtaXQgU2Vtd2FsIDxz
dW1pdC5zZW13YWxAbGluYXJvLm9yZz4KQWNrZWQtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlz
dGlhbi5rb2VuaWdAYW1kLmNvbT4KQWNrZWQtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0
ZXJAZmZ3bGwuY2g+Ci0tLQogZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYyAgICAgICAgICAgICAg
ICAgICAgIHwgIDggKystLS0KIGRyaXZlcnMvZG1hLWJ1Zi9oZWFwcy9oZWFwLWhlbHBlcnMuYyAg
ICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9jbWFfaGVscGVyLmMgICAg
ICAgICAgfCAgOSArKystLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5j
ICAgICAgICB8ICAzICstCiBkcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW1lLmMgICAgICAgICAgICAg
ICAgICAgfCAgNiArKy0tCiBkcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9wcmlt
ZS5jICAgfCAgNSArLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYu
YyAgICB8ICAyICstCiAuLi4vZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9kbWFidWYu
YyAgfCAgNiArKy0tCiAuLi4vZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19kbWFidWYu
YyAgfCAgNCArLS0KIGRyaXZlcnMvZ3B1L2RybS90ZWdyYS9nZW0uYyAgICAgICAgICAgICAgICAg
ICB8ICA1ICstLQogLi4uL2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLWRtYS1jb250aWcuYyAg
IHwgIDMgKy0KIC4uLi9tZWRpYS9jb21tb24vdmlkZW9idWYyL3ZpZGVvYnVmMi1kbWEtc2cuYyB8
ICAzICstCiAuLi4vY29tbW9uL3ZpZGVvYnVmMi92aWRlb2J1ZjItdm1hbGxvYy5jICAgICAgfCAg
NiArKy0tCiBpbmNsdWRlL2RybS9kcm1fcHJpbWUuaCAgICAgICAgICAgICAgICAgICAgICAgfCAg
MiArLQogaW5jbHVkZS9saW51eC9kbWEtYnVmLW1hcC5oICAgICAgICAgICAgICAgICAgIHwgMzIg
KysrKysrKysrKysrKysrKystLQogaW5jbHVkZS9saW51eC9kbWEtYnVmLmggICAgICAgICAgICAg
ICAgICAgICAgIHwgIDQgKy0tCiAxNiBmaWxlcyBjaGFuZ2VkLCA2NiBpbnNlcnRpb25zKCspLCAz
NCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jIGIv
ZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYwppbmRleCA2MWJkMjRkMjFiMzguLmE2YmE0ZDU5OGYw
ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYworKysgYi9kcml2ZXJzL2Rt
YS1idWYvZG1hLWJ1Zi5jCkBAIC0xMjM2LDIxICsxMjM2LDIxIEBAIEVYUE9SVF9TWU1CT0xfR1BM
KGRtYV9idWZfdm1hcCk7CiAvKioKICAqIGRtYV9idWZfdnVubWFwIC0gVW5tYXAgYSB2bWFwIG9i
dGFpbmVkIGJ5IGRtYV9idWZfdm1hcC4KICAqIEBkbWFidWY6CVtpbl0JYnVmZmVyIHRvIHZ1bm1h
cAotICogQHZhZGRyOglbaW5dCXZtYXAgdG8gdnVubWFwCisgKiBAbWFwOglbaW5dCXZtYXAgcG9p
bnRlciB0byB2dW5tYXAKICAqLwotdm9pZCBkbWFfYnVmX3Z1bm1hcChzdHJ1Y3QgZG1hX2J1ZiAq
ZG1hYnVmLCB2b2lkICp2YWRkcikKK3ZvaWQgZG1hX2J1Zl92dW5tYXAoc3RydWN0IGRtYV9idWYg
KmRtYWJ1Ziwgc3RydWN0IGRtYV9idWZfbWFwICptYXApCiB7CiAJaWYgKFdBUk5fT04oIWRtYWJ1
ZikpCiAJCXJldHVybjsKIAogCUJVR19PTihkbWFfYnVmX21hcF9pc19udWxsKCZkbWFidWYtPnZt
YXBfcHRyKSk7CiAJQlVHX09OKGRtYWJ1Zi0+dm1hcHBpbmdfY291bnRlciA9PSAwKTsKLQlCVUdf
T04oIWRtYV9idWZfbWFwX2lzX3ZhZGRyKCZkbWFidWYtPnZtYXBfcHRyLCB2YWRkcikpOworCUJV
R19PTighZG1hX2J1Zl9tYXBfaXNfZXF1YWwoJmRtYWJ1Zi0+dm1hcF9wdHIsIG1hcCkpOwogCiAJ
bXV0ZXhfbG9jaygmZG1hYnVmLT5sb2NrKTsKIAlpZiAoLS1kbWFidWYtPnZtYXBwaW5nX2NvdW50
ZXIgPT0gMCkgewogCQlpZiAoZG1hYnVmLT5vcHMtPnZ1bm1hcCkKLQkJCWRtYWJ1Zi0+b3BzLT52
dW5tYXAoZG1hYnVmLCB2YWRkcik7CisJCQlkbWFidWYtPm9wcy0+dnVubWFwKGRtYWJ1ZiwgbWFw
KTsKIAkJZG1hX2J1Zl9tYXBfY2xlYXIoJmRtYWJ1Zi0+dm1hcF9wdHIpOwogCX0KIAltdXRleF91
bmxvY2soJmRtYWJ1Zi0+bG9jayk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2RtYS1idWYvaGVhcHMv
aGVhcC1oZWxwZXJzLmMgYi9kcml2ZXJzL2RtYS1idWYvaGVhcHMvaGVhcC1oZWxwZXJzLmMKaW5k
ZXggYWViOWUxMDBmMzM5Li5mY2Y0Y2UzZTJjYmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZG1hLWJ1
Zi9oZWFwcy9oZWFwLWhlbHBlcnMuYworKysgYi9kcml2ZXJzL2RtYS1idWYvaGVhcHMvaGVhcC1o
ZWxwZXJzLmMKQEAgLTI1MSw3ICsyNTEsNyBAQCBzdGF0aWMgaW50IGRtYV9oZWFwX2RtYV9idWZf
dm1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgZG1hX2J1Zl9tYXAgKm1hcAogCXJl
dHVybiAwOwogfQogCi1zdGF0aWMgdm9pZCBkbWFfaGVhcF9kbWFfYnVmX3Z1bm1hcChzdHJ1Y3Qg
ZG1hX2J1ZiAqZG1hYnVmLCB2b2lkICp2YWRkcikKK3N0YXRpYyB2b2lkIGRtYV9oZWFwX2RtYV9i
dWZfdnVubWFwKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVjdCBkbWFfYnVmX21hcCAqbWFw
KQogewogCXN0cnVjdCBoZWFwX2hlbHBlcl9idWZmZXIgKmJ1ZmZlciA9IGRtYWJ1Zi0+cHJpdjsK
IApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fY21hX2hlbHBlci5jIGIvZHJp
dmVycy9ncHUvZHJtL2RybV9nZW1fY21hX2hlbHBlci5jCmluZGV4IDE5NjcwYjA1ZWFkNS4uMjE2
NTYzM2M5YjllIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9jbWFfaGVscGVy
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fY21hX2hlbHBlci5jCkBAIC0xNzUsMTMg
KzE3NSwxMiBAQCBkcm1fZ2VtX2NtYV9jcmVhdGVfd2l0aF9oYW5kbGUoc3RydWN0IGRybV9maWxl
ICpmaWxlX3ByaXYsCiAgKi8KIHZvaWQgZHJtX2dlbV9jbWFfZnJlZV9vYmplY3Qoc3RydWN0IGRy
bV9nZW1fb2JqZWN0ICpnZW1fb2JqKQogewotCXN0cnVjdCBkcm1fZ2VtX2NtYV9vYmplY3QgKmNt
YV9vYmo7Ci0KLQljbWFfb2JqID0gdG9fZHJtX2dlbV9jbWFfb2JqKGdlbV9vYmopOworCXN0cnVj
dCBkcm1fZ2VtX2NtYV9vYmplY3QgKmNtYV9vYmogPSB0b19kcm1fZ2VtX2NtYV9vYmooZ2VtX29i
aik7CisJc3RydWN0IGRtYV9idWZfbWFwIG1hcCA9IERNQV9CVUZfTUFQX0lOSVRfVkFERFIoY21h
X29iai0+dmFkZHIpOwogCiAJaWYgKGdlbV9vYmotPmltcG9ydF9hdHRhY2gpIHsKIAkJaWYgKGNt
YV9vYmotPnZhZGRyKQotCQkJZG1hX2J1Zl92dW5tYXAoZ2VtX29iai0+aW1wb3J0X2F0dGFjaC0+
ZG1hYnVmLCBjbWFfb2JqLT52YWRkcik7CisJCQlkbWFfYnVmX3Z1bm1hcChnZW1fb2JqLT5pbXBv
cnRfYXR0YWNoLT5kbWFidWYsICZtYXApOwogCQlkcm1fcHJpbWVfZ2VtX2Rlc3Ryb3koZ2VtX29i
aiwgY21hX29iai0+c2d0KTsKIAl9IGVsc2UgaWYgKGNtYV9vYmotPnZhZGRyKSB7CiAJCWRtYV9m
cmVlX3djKGdlbV9vYmotPmRldi0+ZGV2LCBjbWFfb2JqLT5iYXNlLnNpemUsCkBAIC02MjgsNyAr
NjI3LDcgQEAgZHJtX2dlbV9jbWFfcHJpbWVfaW1wb3J0X3NnX3RhYmxlX3ZtYXAoc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwKIAogCW9iaiA9IGRybV9nZW1fY21hX3ByaW1lX2ltcG9ydF9zZ190YWJs
ZShkZXYsIGF0dGFjaCwgc2d0KTsKIAlpZiAoSVNfRVJSKG9iaikpIHsKLQkJZG1hX2J1Zl92dW5t
YXAoYXR0YWNoLT5kbWFidWYsIG1hcC52YWRkcik7CisJCWRtYV9idWZfdnVubWFwKGF0dGFjaC0+
ZG1hYnVmLCAmbWFwKTsKIAkJcmV0dXJuIG9iajsKIAl9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1f
c2htZW1faGVscGVyLmMKaW5kZXggNjMyOGNmYmI4MjhlLi5mYjExZGY3YWNlZDUgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jCkBAIC0zMzcsNiArMzM3LDcgQEAgRVhQT1JU
X1NZTUJPTChkcm1fZ2VtX3NobWVtX3ZtYXApOwogc3RhdGljIHZvaWQgZHJtX2dlbV9zaG1lbV92
dW5tYXBfbG9ja2VkKHN0cnVjdCBkcm1fZ2VtX3NobWVtX29iamVjdCAqc2htZW0pCiB7CiAJc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpvYmogPSAmc2htZW0tPmJhc2U7CisJc3RydWN0IGRtYV9idWZf
bWFwIG1hcCA9IERNQV9CVUZfTUFQX0lOSVRfVkFERFIoc2htZW0tPnZhZGRyKTsKIAogCWlmIChX
QVJOX09OX09OQ0UoIXNobWVtLT52bWFwX3VzZV9jb3VudCkpCiAJCXJldHVybjsKQEAgLTM0NSw3
ICszNDYsNyBAQCBzdGF0aWMgdm9pZCBkcm1fZ2VtX3NobWVtX3Z1bm1hcF9sb2NrZWQoc3RydWN0
IGRybV9nZW1fc2htZW1fb2JqZWN0ICpzaG1lbSkKIAkJcmV0dXJuOwogCiAJaWYgKG9iai0+aW1w
b3J0X2F0dGFjaCkKLQkJZG1hX2J1Zl92dW5tYXAob2JqLT5pbXBvcnRfYXR0YWNoLT5kbWFidWYs
IHNobWVtLT52YWRkcik7CisJCWRtYV9idWZfdnVubWFwKG9iai0+aW1wb3J0X2F0dGFjaC0+ZG1h
YnVmLCAmbWFwKTsKIAllbHNlCiAJCXZ1bm1hcChzaG1lbS0+dmFkZHIpOwogCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW1lLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW1l
LmMKaW5kZXggNDJkMDgxYzQzYmM4Li44OWUyYTI0OTY3MzQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9kcm1fcHJpbWUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW1lLmMKQEAg
LTY4OCwxNiArNjg4LDE2IEBAIEVYUE9SVF9TWU1CT0woZHJtX2dlbV9kbWFidWZfdm1hcCk7CiAv
KioKICAqIGRybV9nZW1fZG1hYnVmX3Z1bm1hcCAtIGRtYV9idWYgdnVubWFwIGltcGxlbWVudGF0
aW9uIGZvciBHRU0KICAqIEBkbWFfYnVmOiBidWZmZXIgdG8gYmUgdW5tYXBwZWQKLSAqIEB2YWRk
cjogdGhlIHZpcnR1YWwgYWRkcmVzcyBvZiB0aGUgYnVmZmVyCisgKiBAbWFwOiB0aGUgdmlydHVh
bCBhZGRyZXNzIG9mIHRoZSBidWZmZXIKICAqCiAgKiBSZWxlYXNlcyBhIGtlcm5lbCB2aXJ0dWFs
IG1hcHBpbmcuIFRoaXMgY2FuIGJlIHVzZWQgYXMgdGhlCiAgKiAmZG1hX2J1Zl9vcHMudnVubWFw
IGNhbGxiYWNrLiBDYWxscyBpbnRvICZkcm1fZ2VtX29iamVjdF9mdW5jcy52dW5tYXAgZm9yIGRl
dmljZSBzcGVjaWZpYyBoYW5kbGluZy4KICAqLwotdm9pZCBkcm1fZ2VtX2RtYWJ1Zl92dW5tYXAo
c3RydWN0IGRtYV9idWYgKmRtYV9idWYsIHZvaWQgKnZhZGRyKQordm9pZCBkcm1fZ2VtX2RtYWJ1
Zl92dW5tYXAoc3RydWN0IGRtYV9idWYgKmRtYV9idWYsIHN0cnVjdCBkbWFfYnVmX21hcCAqbWFw
KQogewogCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqID0gZG1hX2J1Zi0+cHJpdjsKIAotCWRy
bV9nZW1fdnVubWFwKG9iaiwgdmFkZHIpOworCWRybV9nZW1fdnVubWFwKG9iaiwgbWFwLT52YWRk
cik7CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9nZW1fZG1hYnVmX3Z1bm1hcCk7CiAKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3ByaW1lLmMgYi9kcml2ZXJz
L2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9wcmltZS5jCmluZGV4IDgwYTlmYzE0M2JiYi4u
MTM1ZmJmZjZmZWNmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2
X2dlbV9wcmltZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3By
aW1lLmMKQEAgLTcwLDkgKzcwLDEwIEBAIHZvaWQgZXRuYXZpdl9nZW1fcHJpbWVfdW5waW4oc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCiAKIHN0YXRpYyB2b2lkIGV0bmF2aXZfZ2VtX3ByaW1l
X3JlbGVhc2Uoc3RydWN0IGV0bmF2aXZfZ2VtX29iamVjdCAqZXRuYXZpdl9vYmopCiB7CisJc3Ry
dWN0IGRtYV9idWZfbWFwIG1hcCA9IERNQV9CVUZfTUFQX0lOSVRfVkFERFIoZXRuYXZpdl9vYmot
PnZhZGRyKTsKKwogCWlmIChldG5hdml2X29iai0+dmFkZHIpCi0JCWRtYV9idWZfdnVubWFwKGV0
bmF2aXZfb2JqLT5iYXNlLmltcG9ydF9hdHRhY2gtPmRtYWJ1ZiwKLQkJCSAgICAgICBldG5hdml2
X29iai0+dmFkZHIpOworCQlkbWFfYnVmX3Z1bm1hcChldG5hdml2X29iai0+YmFzZS5pbXBvcnRf
YXR0YWNoLT5kbWFidWYsICZtYXApOwogCiAJLyogRG9uJ3QgZHJvcCB0aGUgcGFnZXMgZm9yIGlt
cG9ydGVkIGRtYWJ1ZiwgYXMgdGhleSBhcmUgbm90CiAJICogb3VycywganVzdCBmcmVlIHRoZSBh
cnJheSB3ZSBhbGxvY2F0ZWQ6CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fZG1hYnVmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG1h
YnVmLmMKaW5kZXggNmVlOGYyY2ZkOGMxLi4wZGQ0NzdlNTY1NzMgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fZG1hYnVmLmMKQEAgLTkxLDcgKzkxLDcgQEAgc3RhdGljIGlu
dCBpOTE1X2dlbV9kbWFidWZfdm1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1Ziwgc3RydWN0IGRt
YV9idWZfbWFwICptYXAKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIHZvaWQgaTkxNV9nZW1fZG1h
YnVmX3Z1bm1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1Ziwgdm9pZCAqdmFkZHIpCitzdGF0aWMg
dm9pZCBpOTE1X2dlbV9kbWFidWZfdnVubWFwKHN0cnVjdCBkbWFfYnVmICpkbWFfYnVmLCBzdHJ1
Y3QgZG1hX2J1Zl9tYXAgKm1hcCkKIHsKIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2Jq
ID0gZG1hX2J1Zl90b19vYmooZG1hX2J1Zik7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2RtYWJ1Zi5jCmluZGV4IGY3OWViYzUzMjliNy4u
MGI0ZDE5NzI5ZTFmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL2k5MTVfZ2VtX2RtYWJ1Zi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxm
dGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMKQEAgLTE1Miw3ICsxNTIsNyBAQCBzdGF0aWMgaW50IGln
dF9kbWFidWZfaW1wb3J0KHZvaWQgKmFyZykKIAogCWVyciA9IDA7CiBvdXRfZG1hX21hcDoKLQlk
bWFfYnVmX3Z1bm1hcChkbWFidWYsIGRtYV9tYXApOworCWRtYV9idWZfdnVubWFwKGRtYWJ1Ziwg
Jm1hcCk7CiBvdXRfb2JqOgogCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKIG91dF9kbWFidWY6
CkBAIC0xODIsNyArMTgyLDcgQEAgc3RhdGljIGludCBpZ3RfZG1hYnVmX2ltcG9ydF9vd25lcnNo
aXAodm9pZCAqYXJnKQogCX0KIAogCW1lbXNldChwdHIsIDB4YzUsIFBBR0VfU0laRSk7Ci0JZG1h
X2J1Zl92dW5tYXAoZG1hYnVmLCBwdHIpOworCWRtYV9idWZfdnVubWFwKGRtYWJ1ZiwgJm1hcCk7
CiAKIAlvYmogPSB0b19pbnRlbF9ibyhpOTE1X2dlbV9wcmltZV9pbXBvcnQoJmk5MTUtPmRybSwg
ZG1hYnVmKSk7CiAJaWYgKElTX0VSUihvYmopKSB7CkBAIC0yNTAsNyArMjUwLDcgQEAgc3RhdGlj
IGludCBpZ3RfZG1hYnVmX2V4cG9ydF92bWFwKHZvaWQgKmFyZykKIAltZW1zZXQocHRyLCAweGM1
LCBkbWFidWYtPnNpemUpOwogCiAJZXJyID0gMDsKLQlkbWFfYnVmX3Z1bm1hcChkbWFidWYsIHB0
cik7CisJZG1hX2J1Zl92dW5tYXAoZG1hYnVmLCAmbWFwKTsKIG91dDoKIAlkbWFfYnVmX3B1dChk
bWFidWYpOwogCXJldHVybiBlcnI7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vc2VsZnRlc3RzL21vY2tfZG1hYnVmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2Vs
ZnRlc3RzL21vY2tfZG1hYnVmLmMKaW5kZXggYmVjZDlmYjk1ZDU4Li4yODU1ZDExYzdhNTEgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvbW9ja19kbWFidWYu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfZG1hYnVmLmMK
QEAgLTc0LDExICs3NCwxMSBAQCBzdGF0aWMgaW50IG1vY2tfZG1hYnVmX3ZtYXAoc3RydWN0IGRt
YV9idWYgKmRtYV9idWYsIHN0cnVjdCBkbWFfYnVmX21hcCAqbWFwKQogCXJldHVybiAwOwogfQog
Ci1zdGF0aWMgdm9pZCBtb2NrX2RtYWJ1Zl92dW5tYXAoc3RydWN0IGRtYV9idWYgKmRtYV9idWYs
IHZvaWQgKnZhZGRyKQorc3RhdGljIHZvaWQgbW9ja19kbWFidWZfdnVubWFwKHN0cnVjdCBkbWFf
YnVmICpkbWFfYnVmLCBzdHJ1Y3QgZG1hX2J1Zl9tYXAgKm1hcCkKIHsKIAlzdHJ1Y3QgbW9ja19k
bWFidWYgKm1vY2sgPSB0b19tb2NrKGRtYV9idWYpOwogCi0Jdm1fdW5tYXBfcmFtKHZhZGRyLCBt
b2NrLT5ucGFnZXMpOworCXZtX3VubWFwX3JhbShtYXAtPnZhZGRyLCBtb2NrLT5ucGFnZXMpOwog
fQogCiBzdGF0aWMgaW50IG1vY2tfZG1hYnVmX21tYXAoc3RydWN0IGRtYV9idWYgKmRtYV9idWYs
IHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3RlZ3JhL2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2dlbS5jCmluZGV4IGNkNDk3ZWRh
ZDg1MC4uMjZhZjhkYWE5YTE2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGVncmEvZ2Vt
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2dlbS5jCkBAIC0xNDksMTEgKzE0OSwxMiBA
QCBzdGF0aWMgdm9pZCAqdGVncmFfYm9fbW1hcChzdHJ1Y3QgaG9zdDF4X2JvICpibykKIHN0YXRp
YyB2b2lkIHRlZ3JhX2JvX211bm1hcChzdHJ1Y3QgaG9zdDF4X2JvICpibywgdm9pZCAqYWRkcikK
IHsKIAlzdHJ1Y3QgdGVncmFfYm8gKm9iaiA9IGhvc3QxeF90b190ZWdyYV9ibyhibyk7CisJc3Ry
dWN0IGRtYV9idWZfbWFwIG1hcCA9IERNQV9CVUZfTUFQX0lOSVRfVkFERFIoYWRkcik7CiAKIAlp
ZiAob2JqLT52YWRkcikKIAkJcmV0dXJuOwogCWVsc2UgaWYgKG9iai0+Z2VtLmltcG9ydF9hdHRh
Y2gpCi0JCWRtYV9idWZfdnVubWFwKG9iai0+Z2VtLmltcG9ydF9hdHRhY2gtPmRtYWJ1ZiwgYWRk
cik7CisJCWRtYV9idWZfdnVubWFwKG9iai0+Z2VtLmltcG9ydF9hdHRhY2gtPmRtYWJ1ZiwgJm1h
cCk7CiAJZWxzZQogCQl2dW5tYXAoYWRkcik7CiB9CkBAIC02NTYsNyArNjU3LDcgQEAgc3RhdGlj
IGludCB0ZWdyYV9nZW1fcHJpbWVfdm1hcChzdHJ1Y3QgZG1hX2J1ZiAqYnVmLCBzdHJ1Y3QgZG1h
X2J1Zl9tYXAgKm1hcCkKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIHZvaWQgdGVncmFfZ2VtX3By
aW1lX3Z1bm1hcChzdHJ1Y3QgZG1hX2J1ZiAqYnVmLCB2b2lkICp2YWRkcikKK3N0YXRpYyB2b2lk
IHRlZ3JhX2dlbV9wcmltZV92dW5tYXAoc3RydWN0IGRtYV9idWYgKmJ1Ziwgc3RydWN0IGRtYV9i
dWZfbWFwICptYXApCiB7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbWVkaWEvY29tbW9uL3Zp
ZGVvYnVmMi92aWRlb2J1ZjItZG1hLWNvbnRpZy5jIGIvZHJpdmVycy9tZWRpYS9jb21tb24vdmlk
ZW9idWYyL3ZpZGVvYnVmMi1kbWEtY29udGlnLmMKaW5kZXggMTE0MjgyODdiZGYzLi5hMWViODI3
OWIxMTMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbWVkaWEvY29tbW9uL3ZpZGVvYnVmMi92aWRlb2J1
ZjItZG1hLWNvbnRpZy5jCisrKyBiL2RyaXZlcnMvbWVkaWEvY29tbW9uL3ZpZGVvYnVmMi92aWRl
b2J1ZjItZG1hLWNvbnRpZy5jCkBAIC02NDgsNiArNjQ4LDcgQEAgc3RhdGljIHZvaWQgdmIyX2Rj
X3VubWFwX2RtYWJ1Zih2b2lkICptZW1fcHJpdikKIHsKIAlzdHJ1Y3QgdmIyX2RjX2J1ZiAqYnVm
ID0gbWVtX3ByaXY7CiAJc3RydWN0IHNnX3RhYmxlICpzZ3QgPSBidWYtPmRtYV9zZ3Q7CisJc3Ry
dWN0IGRtYV9idWZfbWFwIG1hcCA9IERNQV9CVUZfTUFQX0lOSVRfVkFERFIoYnVmLT52YWRkcik7
CiAKIAlpZiAoV0FSTl9PTighYnVmLT5kYl9hdHRhY2gpKSB7CiAJCXByX2VycigidHJ5aW5nIHRv
IHVucGluIGEgbm90IGF0dGFjaGVkIGJ1ZmZlclxuIik7CkBAIC02NjAsNyArNjYxLDcgQEAgc3Rh
dGljIHZvaWQgdmIyX2RjX3VubWFwX2RtYWJ1Zih2b2lkICptZW1fcHJpdikKIAl9CiAKIAlpZiAo
YnVmLT52YWRkcikgewotCQlkbWFfYnVmX3Z1bm1hcChidWYtPmRiX2F0dGFjaC0+ZG1hYnVmLCBi
dWYtPnZhZGRyKTsKKwkJZG1hX2J1Zl92dW5tYXAoYnVmLT5kYl9hdHRhY2gtPmRtYWJ1ZiwgJm1h
cCk7CiAJCWJ1Zi0+dmFkZHIgPSBOVUxMOwogCX0KIAlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQo
YnVmLT5kYl9hdHRhY2gsIHNndCwgYnVmLT5kbWFfZGlyKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
bWVkaWEvY29tbW9uL3ZpZGVvYnVmMi92aWRlb2J1ZjItZG1hLXNnLmMgYi9kcml2ZXJzL21lZGlh
L2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLWRtYS1zZy5jCmluZGV4IGM1MTE3MGU5YzFiOS4u
ZDUxNTdlOTAzZTI3IDEwMDY0NAotLS0gYS9kcml2ZXJzL21lZGlhL2NvbW1vbi92aWRlb2J1ZjIv
dmlkZW9idWYyLWRtYS1zZy5jCisrKyBiL2RyaXZlcnMvbWVkaWEvY29tbW9uL3ZpZGVvYnVmMi92
aWRlb2J1ZjItZG1hLXNnLmMKQEAgLTU4MCw2ICs1ODAsNyBAQCBzdGF0aWMgdm9pZCB2YjJfZG1h
X3NnX3VubWFwX2RtYWJ1Zih2b2lkICptZW1fcHJpdikKIHsKIAlzdHJ1Y3QgdmIyX2RtYV9zZ19i
dWYgKmJ1ZiA9IG1lbV9wcml2OwogCXN0cnVjdCBzZ190YWJsZSAqc2d0ID0gYnVmLT5kbWFfc2d0
OworCXN0cnVjdCBkbWFfYnVmX21hcCBtYXAgPSBETUFfQlVGX01BUF9JTklUX1ZBRERSKGJ1Zi0+
dmFkZHIpOwogCiAJaWYgKFdBUk5fT04oIWJ1Zi0+ZGJfYXR0YWNoKSkgewogCQlwcl9lcnIoInRy
eWluZyB0byB1bnBpbiBhIG5vdCBhdHRhY2hlZCBidWZmZXJcbiIpOwpAQCAtNTkyLDcgKzU5Myw3
IEBAIHN0YXRpYyB2b2lkIHZiMl9kbWFfc2dfdW5tYXBfZG1hYnVmKHZvaWQgKm1lbV9wcml2KQog
CX0KIAogCWlmIChidWYtPnZhZGRyKSB7Ci0JCWRtYV9idWZfdnVubWFwKGJ1Zi0+ZGJfYXR0YWNo
LT5kbWFidWYsIGJ1Zi0+dmFkZHIpOworCQlkbWFfYnVmX3Z1bm1hcChidWYtPmRiX2F0dGFjaC0+
ZG1hYnVmLCAmbWFwKTsKIAkJYnVmLT52YWRkciA9IE5VTEw7CiAJfQogCWRtYV9idWZfdW5tYXBf
YXR0YWNobWVudChidWYtPmRiX2F0dGFjaCwgc2d0LCBidWYtPmRtYV9kaXIpOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9tZWRpYS9jb21tb24vdmlkZW9idWYyL3ZpZGVvYnVmMi12bWFsbG9jLmMgYi9k
cml2ZXJzL21lZGlhL2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLXZtYWxsb2MuYwppbmRleCA3
YjY4ZTIzNzljNjUuLjExYmEwZWIxMzE1YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9tZWRpYS9jb21t
b24vdmlkZW9idWYyL3ZpZGVvYnVmMi12bWFsbG9jLmMKKysrIGIvZHJpdmVycy9tZWRpYS9jb21t
b24vdmlkZW9idWYyL3ZpZGVvYnVmMi12bWFsbG9jLmMKQEAgLTM5MCwxNyArMzkwLDE5IEBAIHN0
YXRpYyBpbnQgdmIyX3ZtYWxsb2NfbWFwX2RtYWJ1Zih2b2lkICptZW1fcHJpdikKIHN0YXRpYyB2
b2lkIHZiMl92bWFsbG9jX3VubWFwX2RtYWJ1Zih2b2lkICptZW1fcHJpdikKIHsKIAlzdHJ1Y3Qg
dmIyX3ZtYWxsb2NfYnVmICpidWYgPSBtZW1fcHJpdjsKKwlzdHJ1Y3QgZG1hX2J1Zl9tYXAgbWFw
ID0gRE1BX0JVRl9NQVBfSU5JVF9WQUREUihidWYtPnZhZGRyKTsKIAotCWRtYV9idWZfdnVubWFw
KGJ1Zi0+ZGJ1ZiwgYnVmLT52YWRkcik7CisJZG1hX2J1Zl92dW5tYXAoYnVmLT5kYnVmLCAmbWFw
KTsKIAlidWYtPnZhZGRyID0gTlVMTDsKIH0KIAogc3RhdGljIHZvaWQgdmIyX3ZtYWxsb2NfZGV0
YWNoX2RtYWJ1Zih2b2lkICptZW1fcHJpdikKIHsKIAlzdHJ1Y3QgdmIyX3ZtYWxsb2NfYnVmICpi
dWYgPSBtZW1fcHJpdjsKKwlzdHJ1Y3QgZG1hX2J1Zl9tYXAgbWFwID0gRE1BX0JVRl9NQVBfSU5J
VF9WQUREUihidWYtPnZhZGRyKTsKIAogCWlmIChidWYtPnZhZGRyKQotCQlkbWFfYnVmX3Z1bm1h
cChidWYtPmRidWYsIGJ1Zi0+dmFkZHIpOworCQlkbWFfYnVmX3Z1bm1hcChidWYtPmRidWYsICZt
YXApOwogCiAJa2ZyZWUoYnVmKTsKIH0KZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9wcmlt
ZS5oIGIvaW5jbHVkZS9kcm0vZHJtX3ByaW1lLmgKaW5kZXggNTEyNWY4NGMyOGY2Li4wOTkxYTQ3
YTE1NjcgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL2RybV9wcmltZS5oCisrKyBiL2luY2x1ZGUv
ZHJtL2RybV9wcmltZS5oCkBAIC04NCw3ICs4NCw3IEBAIHZvaWQgZHJtX2dlbV91bm1hcF9kbWFf
YnVmKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwKIAkJCSAgIHN0cnVjdCBzZ190
YWJsZSAqc2d0LAogCQkJICAgZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyKTsKIGludCBkcm1f
Z2VtX2RtYWJ1Zl92bWFwKHN0cnVjdCBkbWFfYnVmICpkbWFfYnVmLCBzdHJ1Y3QgZG1hX2J1Zl9t
YXAgKm1hcCk7Ci12b2lkIGRybV9nZW1fZG1hYnVmX3Z1bm1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1h
X2J1Ziwgdm9pZCAqdmFkZHIpOwordm9pZCBkcm1fZ2VtX2RtYWJ1Zl92dW5tYXAoc3RydWN0IGRt
YV9idWYgKmRtYV9idWYsIHN0cnVjdCBkbWFfYnVmX21hcCAqbWFwKTsKIAogaW50IGRybV9nZW1f
cHJpbWVfbW1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgc3RydWN0IHZtX2FyZWFfc3Ry
dWN0ICp2bWEpOwogaW50IGRybV9nZW1fZG1hYnVmX21tYXAoc3RydWN0IGRtYV9idWYgKmRtYV9i
dWYsIHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hKTsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGlu
dXgvZG1hLWJ1Zi1tYXAuaCBiL2luY2x1ZGUvbGludXgvZG1hLWJ1Zi1tYXAuaAppbmRleCA1YWU3
MzJkMzczZWIuLmMxNzNhNGFiZjRiYSAxMDA2NDQKLS0tIGEvaW5jbHVkZS9saW51eC9kbWEtYnVm
LW1hcC5oCisrKyBiL2luY2x1ZGUvbGludXgvZG1hLWJ1Zi1tYXAuaApAQCAtMjMsNiArMjMsMTYg
QEAgc3RydWN0IGRtYV9idWZfbWFwIHsKIAlib29sIGlzX2lvbWVtOwogfTsKIAorLyoqCisgKiBE
TUFfQlVGX01BUF9JTklUX1ZBRERSIC0gSW5pdGlhbGl6ZXMgc3RydWN0IGRtYV9idWZfbWFwIHRv
IGFuIGFkZHJlc3MgaW4gc3lzdGVtIG1lbW9yeQorICogQHZhZGRyOglBIHN5c3RlbS1tZW1vcnkg
YWRkcmVzcworICovCisjZGVmaW5lIERNQV9CVUZfTUFQX0lOSVRfVkFERFIodmFkZHJfKSBcCisJ
eyBcCisJCS52YWRkciA9ICh2YWRkcl8pLCBcCisJCS5pc19pb21lbSA9IGZhbHNlLCBcCisJfQor
CiAvKioKICAqIGRtYV9idWZfbWFwX3NldF92YWRkciAtIFNldHMgYSBkbWEtYnVmIG1hcHBpbmcg
c3RydWN0dXJlIHRvIGFuIGFkZHJlc3MgaW4gc3lzdGVtIG1lbW9yeQogICogQG1hcDoJVGhlIGRt
YS1idWYgbWFwcGluZyBzdHJ1Y3R1cmUKQEAgLTM2LDEwICs0NiwyNiBAQCBzdGF0aWMgaW5saW5l
IHZvaWQgZG1hX2J1Zl9tYXBfc2V0X3ZhZGRyKHN0cnVjdCBkbWFfYnVmX21hcCAqbWFwLCB2b2lk
ICp2YWRkcikKIAltYXAtPmlzX2lvbWVtID0gZmFsc2U7CiB9CiAKLS8qIEFQSSB0cmFuc2l0aW9u
IGhlbHBlciAqLwotc3RhdGljIGlubGluZSBib29sIGRtYV9idWZfbWFwX2lzX3ZhZGRyKGNvbnN0
IHN0cnVjdCBkbWFfYnVmX21hcCAqbWFwLCBjb25zdCB2b2lkICp2YWRkcikKKy8qKgorICogZG1h
X2J1Zl9tYXBfaXNfZXF1YWwgLSBDb21wYXJlcyB0d28gZG1hLWJ1ZiBtYXBwaW5nIHN0cnVjdHVy
ZXMgZm9yIGVxdWFsaXR5CisgKiBAbGhzOglUaGUgZG1hLWJ1ZiBtYXBwaW5nIHN0cnVjdHVyZQor
ICogQHJoczoJQSBkbWEtYnVmIG1hcHBpbmcgc3RydWN0dXJlIHRvIGNvbXBhcmUgd2l0aAorICoK
KyAqIFR3byBkbWEtYnVmIG1hcHBpbmcgc3RydWN0dXJlcyBhcmUgZXF1YWwgaWYgdGhleSBib3Ro
IHJlZmVyIHRvIHRoZSBzYW1lIHR5cGUgb2YgbWVtb3J5CisgKiBhbmQgdG8gdGhlIHNhbWUgYWRk
cmVzcyB3aXRoaW4gdGhhdCBtZW1vcnkuCisgKgorICogUmV0dXJuczoKKyAqIFRydWUgaXMgYm90
aCBzdHJ1Y3R1cmVzIGFyZSBlcXVhbCwgb3IgZmFsc2Ugb3RoZXJ3aXNlLgorICovCitzdGF0aWMg
aW5saW5lIGJvb2wgZG1hX2J1Zl9tYXBfaXNfZXF1YWwoY29uc3Qgc3RydWN0IGRtYV9idWZfbWFw
ICpsaHMsCisJCQkJCWNvbnN0IHN0cnVjdCBkbWFfYnVmX21hcCAqcmhzKQogewotCXJldHVybiAh
bWFwLT5pc19pb21lbSAmJiAobWFwLT52YWRkciA9PSB2YWRkcik7CisJaWYgKGxocy0+aXNfaW9t
ZW0gIT0gcmhzLT5pc19pb21lbSkKKwkJcmV0dXJuIGZhbHNlOworCWVsc2UgaWYgKGxocy0+aXNf
aW9tZW0pCisJCXJldHVybiBsaHMtPnZhZGRyX2lvbWVtID09IHJocy0+dmFkZHJfaW9tZW07CisJ
ZWxzZQorCQlyZXR1cm4gbGhzLT52YWRkciA9PSByaHMtPnZhZGRyOwogfQogCiAvKioKZGlmZiAt
LWdpdCBhL2luY2x1ZGUvbGludXgvZG1hLWJ1Zi5oIGIvaW5jbHVkZS9saW51eC9kbWEtYnVmLmgK
aW5kZXggNzIzNzk5N2NmYTM4Li5jZjc3Y2MxNWY0YmEgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGlu
dXgvZG1hLWJ1Zi5oCisrKyBiL2luY2x1ZGUvbGludXgvZG1hLWJ1Zi5oCkBAIC0yNjcsNyArMjY3
LDcgQEAgc3RydWN0IGRtYV9idWZfb3BzIHsKIAlpbnQgKCptbWFwKShzdHJ1Y3QgZG1hX2J1ZiAq
LCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSk7CiAKIAlpbnQgKCp2bWFwKShzdHJ1Y3QgZG1h
X2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgZG1hX2J1Zl9tYXAgKm1hcCk7Ci0Jdm9pZCAoKnZ1bm1hcCko
c3RydWN0IGRtYV9idWYgKiwgdm9pZCAqdmFkZHIpOworCXZvaWQgKCp2dW5tYXApKHN0cnVjdCBk
bWFfYnVmICpkbWFidWYsIHN0cnVjdCBkbWFfYnVmX21hcCAqbWFwKTsKIH07CiAKIC8qKgpAQCAt
NTA0LDUgKzUwNCw1IEBAIGludCBkbWFfYnVmX2VuZF9jcHVfYWNjZXNzKHN0cnVjdCBkbWFfYnVm
ICpkbWFfYnVmLAogaW50IGRtYV9idWZfbW1hcChzdHJ1Y3QgZG1hX2J1ZiAqLCBzdHJ1Y3Qgdm1f
YXJlYV9zdHJ1Y3QgKiwKIAkJIHVuc2lnbmVkIGxvbmcpOwogaW50IGRtYV9idWZfdm1hcChzdHJ1
Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgZG1hX2J1Zl9tYXAgKm1hcCk7Ci12b2lkIGRtYV9i
dWZfdnVubWFwKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHZvaWQgKnZhZGRyKTsKK3ZvaWQgZG1h
X2J1Zl92dW5tYXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGRtYV9idWZfbWFwICpt
YXApOwogI2VuZGlmIC8qIF9fRE1BX0JVRl9IX18gKi8KLS0gCjIuMjguMAoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
