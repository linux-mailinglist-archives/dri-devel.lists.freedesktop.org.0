Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3CB5227432A
	for <lists+dri-devel@lfdr.de>; Tue, 22 Sep 2020 15:32:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 843EB6E887;
	Tue, 22 Sep 2020 13:32:46 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ej1-x642.google.com (mail-ej1-x642.google.com
 [IPv6:2a00:1450:4864:20::642])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DB0286E873;
 Tue, 22 Sep 2020 13:32:13 +0000 (UTC)
Received: by mail-ej1-x642.google.com with SMTP id z22so22862269ejl.7;
 Tue, 22 Sep 2020 06:32:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=gIwvaGu0/ez3s30RdTjkad6600orRRxpuT5bdDTF8Eg=;
 b=RUF36+vQA+xpJ5T44sOMrBMDGcW0uoUqC0nzuhA1Wty2HROAuA2zRhIl+K4o6NqfWe
 LH5FMC8RkEUNMSN2KpD4IhEQYgLmNI1oYjFujUvKcHQNnSmfJQekxrk26DOrdE7ZARXR
 WBgqKhlQaoAz7UF06JxJW9muaDd2IcIU6Wfl1pqcsO0a08CvLAFANfntm7t3cQbvYFJF
 ZftVUJb4ZnomphZoZXldfPlgHzva6DT1KAWArkyzqFwNh3vcYIGs0L77XZ42FOHDhZCI
 +LqT02k6Oki61shcBxlf1MEtYDsNbcxVSPqKUYkFr/aLZwv282LspoedJ+PtTImQfjAl
 c/8Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=gIwvaGu0/ez3s30RdTjkad6600orRRxpuT5bdDTF8Eg=;
 b=APHH3KE8PuEVYoeWGkU0Ra/sTXW12BMfr0CMgrqGKBk4lb+8/PlJoFn7y+dYlFsocs
 cy8SiSLszk6RQxjNx/AsxIBMigvhOLesJ/YjyFa0aG0dmdrKQa6c3zXDv1UrYHDHyHtJ
 558OVmlSd7w3EMgxHZQu/xIhVyWv2W8U1jnGbLCfCZwLw5wNHWZpg5tfry/0HHOb9r7T
 jbW9K1h1YbAqhvNc6Mawj32LhSt7a41ZKMDwnJ/ijNL+x4pKx0hRr7Vhpz459Hcq1PYj
 WQ6PJA3nkPMc+6BquPVJ2F1TleqLdZw0Fe4oIvtY0lUjuDHl8tyBjFMr9d6BuBvC93jZ
 /sVA==
X-Gm-Message-State: AOAM533vRz7cuZDvuvjdci3JhtPm8zPgm8qUHmClKHAM5pIDMGsql14n
 GIi/QhfZy8UWl/jSMNfT+Ns=
X-Google-Smtp-Source: ABdhPJwRTXg4mdwLbo3gbeRtelzuqekZD1mmohirZ537FwAVUxofFd1WPv6gcopxJmEEKG9mlfzmZg==
X-Received: by 2002:a17:906:9718:: with SMTP id
 k24mr4684905ejx.365.1600781532484; 
 Tue, 22 Sep 2020 06:32:12 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:11af:3d77:a1c7:4f3a])
 by smtp.gmail.com with ESMTPSA id z21sm11541028eja.72.2020.09.22.06.32.11
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 22 Sep 2020 06:32:11 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: linux-graphics-maintainer@vmware.com, sroland@vmware.com, airlied@linux.ie,
 daniel@ffwll.ch, amd-gfx@lists.freedesktop.org,
 dri-devel@lists.freedesktop.org, ray.huang@amd.com
Subject: [PATCH 03/11] drm/vmwgfx: stop using ttm_bo_create
Date: Tue, 22 Sep 2020 15:32:00 +0200
Message-Id: <20200922133208.1273-3-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200922133208.1273-1-christian.koenig@amd.com>
References: <20200922133208.1273-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW1wbGVtZW50IGluIHRoZSBkcml2ZXIgaW5zdGVhZCBzaW5jZSBpdCBpcyB0aGUgb25seSB1c2Vy
IG9mIHRoYXQgZnVuY3Rpb24uCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJp
c3RpYW4ua29lbmlnQGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhf
Ym8uYyAgICAgICAgIHwgNDIgKysrKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJt
L3Ztd2dmeC92bXdnZnhfY21kYnVmLmMgICAgIHwgIDYgKystLQogZHJpdmVycy9ncHUvZHJtL3Zt
d2dmeC92bXdnZnhfZHJ2LmggICAgICAgIHwgIDQgKysrCiBkcml2ZXJzL2dwdS9kcm0vdm13Z2Z4
L3Ztd2dmeF90dG1fYnVmZmVyLmMgfCAgOCArKy0tLQogNCBmaWxlcyBjaGFuZ2VkLCA1MiBpbnNl
cnRpb25zKCspLCA4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92
bXdnZngvdm13Z2Z4X2JvLmMgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9iby5jCmlu
ZGV4IDgxM2YxYjE0ODA5NC4uMzBkMTliNDViNjAyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vdm13Z2Z4L3Ztd2dmeF9iby5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4
X2JvLmMKQEAgLTQ4Nyw2ICs0ODcsNDggQEAgc3RhdGljIHZvaWQgdm13X3VzZXJfYm9fZGVzdHJv
eShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvKQogCXR0bV9wcmltZV9vYmplY3Rfa2ZyZWUo
dm13X3VzZXJfYm8sIHByaW1lKTsKIH0KIAorLyoqCisgKiB2bXdfYm9fY3JlYXRlX2tlcm5lbCAt
IENyZWF0ZSBhIHBpbm5lZCBCTyBmb3IgaW50ZXJuYWwga2VybmVsIHVzZS4KKyAqCisgKiBAZGV2
X3ByaXY6IFBvaW50ZXIgdG8gdGhlIGRldmljZSBwcml2YXRlIHN0cnVjdAorICogQHNpemU6IHNp
emUgb2YgdGhlIEJPIHdlIG5lZWQKKyAqIEBwbGFjZW1lbnQ6IHdoZXJlIHRvIHB1dCBpdAorICog
QHBfYm86IHJlc3VsdGluZyBCTworICoKKyAqIENyZWF0ZXMgYW5kIHBpbiBhIHNpbXBsZSBCTyBm
b3IgaW4ga2VybmVsIHVzZS4KKyAqLworaW50IHZtd19ib19jcmVhdGVfa2VybmVsKHN0cnVjdCB2
bXdfcHJpdmF0ZSAqZGV2X3ByaXYsIHVuc2lnbmVkIGxvbmcgc2l6ZSwKKwkJCSBzdHJ1Y3QgdHRt
X3BsYWNlbWVudCAqcGxhY2VtZW50LAorCQkJIHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqKnBf
Ym8pCit7CisJdW5zaWduZWQgbnBhZ2VzID0gUEFHRV9BTElHTihzaXplKSA+PiBQQUdFX1NISUZU
OworCXN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm87CisJc2l6ZV90IGFjY19zaXplOworCWlu
dCByZXQ7CisKKwlibyA9IGt6YWxsb2Moc2l6ZW9mKCpibyksIEdGUF9LRVJORUwpOworCWlmICh1
bmxpa2VseSghYm8pKQorCQlyZXR1cm4gLUVOT01FTTsKKworCWFjY19zaXplID0gdHRtX3JvdW5k
X3BvdChzaXplb2YoKmJvKSk7CisJYWNjX3NpemUgKz0gdHRtX3JvdW5kX3BvdChucGFnZXMgKiBz
aXplb2Yodm9pZCAqKSk7CisJYWNjX3NpemUgKz0gdHRtX3JvdW5kX3BvdChzaXplb2Yoc3RydWN0
IHR0bV90dCkpOworCXJldCA9IHR0bV9ib19pbml0X3Jlc2VydmVkKCZkZXZfcHJpdi0+YmRldiwg
Ym8sIHNpemUsCisJCQkJICAgdHRtX2JvX3R5cGVfZGV2aWNlLCBwbGFjZW1lbnQsIDAsCisJCQkJ
ICAgZmFsc2UsIGFjY19zaXplLCBOVUxMLCBOVUxMLCBOVUxMKTsKKwlpZiAodW5saWtlbHkocmV0
KSkKKwkJZ290byBlcnJvcl9mcmVlOworCisJdHRtX2JvX3Bpbihibyk7CisJdHRtX2JvX3VucmVz
ZXJ2ZShibyk7CisJKnBfYm8gPSBibzsKKworCXJldHVybiAwOworCitlcnJvcl9mcmVlOgorCWtm
cmVlKGJvKTsKKwlyZXR1cm4gcmV0OworfQogCiAvKioKICAqIHZtd19ib19pbml0IC0gSW5pdGlh
bGl6ZSBhIHZtdyBidWZmZXIgb2JqZWN0CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdm13
Z2Z4L3Ztd2dmeF9jbWRidWYuYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2NtZGJ1
Zi5jCmluZGV4IDNiNDFjZjYzMTEwYS4uOWE5ZmUxMGQ4MjliIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9jbWRidWYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdm13
Z2Z4L3Ztd2dmeF9jbWRidWYuYwpAQCAtMTI0NSw5ICsxMjQ1LDkgQEAgaW50IHZtd19jbWRidWZf
c2V0X3Bvb2xfc2l6ZShzdHJ1Y3Qgdm13X2NtZGJ1Zl9tYW4gKm1hbiwKIAkJICAgICFkZXZfcHJp
di0+aGFzX21vYikKIAkJCXJldHVybiAtRU5PTUVNOwogCi0JCXJldCA9IHR0bV9ib19jcmVhdGUo
JmRldl9wcml2LT5iZGV2LCBzaXplLCB0dG1fYm9fdHlwZV9kZXZpY2UsCi0JCQkJICAgICZ2bXdf
bW9iX25lX3BsYWNlbWVudCwgMCwgZmFsc2UsCi0JCQkJICAgICZtYW4tPmNtZF9zcGFjZSk7CisJ
CXJldCA9IHZtd19ib19jcmVhdGVfa2VybmVsKGRldl9wcml2LCBzaXplLAorCQkJCQkgICAmdm13
X21vYl9wbGFjZW1lbnQsCisJCQkJCSAgICZtYW4tPmNtZF9zcGFjZSk7CiAJCWlmIChyZXQpCiAJ
CQlyZXR1cm4gcmV0OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dm
eF9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2Rydi5oCmluZGV4IDljZWVl
NGViMGIxMy4uNWQwN2RlNTE4M2UxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4
L3Ztd2dmeF9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9kcnYuaApA
QCAtODQ1LDYgKzg0NSwxMCBAQCBleHRlcm4gdm9pZCB2bXdfYm9fZ2V0X2d1ZXN0X3B0cihjb25z
dCBzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJ1ZiwKIAkJCQkgU1ZHQUd1ZXN0UHRyICpwdHIp
OwogZXh0ZXJuIHZvaWQgdm13X2JvX3Bpbl9yZXNlcnZlZChzdHJ1Y3Qgdm13X2J1ZmZlcl9vYmpl
Y3QgKmJvLCBib29sIHBpbik7CiBleHRlcm4gdm9pZCB2bXdfYm9fYm9fZnJlZShzdHJ1Y3QgdHRt
X2J1ZmZlcl9vYmplY3QgKmJvKTsKK2V4dGVybiBpbnQgdm13X2JvX2NyZWF0ZV9rZXJuZWwoc3Ry
dWN0IHZtd19wcml2YXRlICpkZXZfcHJpdiwKKwkJCQl1bnNpZ25lZCBsb25nIHNpemUsCisJCQkJ
c3RydWN0IHR0bV9wbGFjZW1lbnQgKnBsYWNlbWVudCwKKwkJCQlzdHJ1Y3QgdHRtX2J1ZmZlcl9v
YmplY3QgKipwX2JvKTsKIGV4dGVybiBpbnQgdm13X2JvX2luaXQoc3RydWN0IHZtd19wcml2YXRl
ICpkZXZfcHJpdiwKIAkJICAgICAgIHN0cnVjdCB2bXdfYnVmZmVyX29iamVjdCAqdm13X2JvLAog
CQkgICAgICAgc2l6ZV90IHNpemUsIHN0cnVjdCB0dG1fcGxhY2VtZW50ICpwbGFjZW1lbnQsCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF90dG1fYnVmZmVyLmMgYi9k
cml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF90dG1fYnVmZmVyLmMKaW5kZXggZDdlYTY1OGU5
OTEwLi4zOWEyZjcyMGY0ZWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13
Z2Z4X3R0bV9idWZmZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF90dG1f
YnVmZmVyLmMKQEAgLTc5MywxMSArNzkzLDkgQEAgaW50IHZtd19ib19jcmVhdGVfYW5kX3BvcHVs
YXRlKHN0cnVjdCB2bXdfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJc3RydWN0IHR0bV9idWZmZXJfb2Jq
ZWN0ICpibzsKIAlpbnQgcmV0OwogCi0JcmV0ID0gdHRtX2JvX2NyZWF0ZSgmZGV2X3ByaXYtPmJk
ZXYsIGJvX3NpemUsCi0JCQkgICAgdHRtX2JvX3R5cGVfZGV2aWNlLAotCQkJICAgICZ2bXdfc3lz
X25lX3BsYWNlbWVudCwKLQkJCSAgICAwLCBmYWxzZSwgJmJvKTsKLQorCXJldCA9IHZtd19ib19j
cmVhdGVfa2VybmVsKGRldl9wcml2LCBib19zaXplLAorCQkJCSAgICZ2bXdfc3lzX3BsYWNlbWVu
dCwKKwkJCQkgICAmYm8pOwogCWlmICh1bmxpa2VseShyZXQgIT0gMCkpCiAJCXJldHVybiByZXQ7
CiAKLS0gCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVsCg==
