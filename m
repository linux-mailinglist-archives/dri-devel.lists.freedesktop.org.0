Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7A8266BC08
	for <lists+dri-devel@lfdr.de>; Wed, 17 Jul 2019 13:58:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B0F9C6E149;
	Wed, 17 Jul 2019 11:58:45 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.domeneshop.no (smtp.domeneshop.no
 [IPv6:2a01:5b40:0:3005::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D484E6E13A
 for <dri-devel@lists.freedesktop.org>; Wed, 17 Jul 2019 11:58:32 +0000 (UTC)
Received: from 211.81-166-168.customer.lyse.net ([81.166.168.211]:54758
 helo=localhost.localdomain)
 by smtp.domeneshop.no with esmtpsa (TLS1.2:ECDHE_RSA_AES_128_CBC_SHA1:128)
 (Exim 4.84_2) (envelope-from <noralf@tronnes.org>)
 id 1hniZr-0007Eh-0Y; Wed, 17 Jul 2019 13:58:31 +0200
From: =?UTF-8?q?Noralf=20Tr=C3=B8nnes?= <noralf@tronnes.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 08/10] drm/tinydrm/repaper: Don't use
 tinydrm_display_pipe_init()
Date: Wed, 17 Jul 2019 13:58:15 +0200
Message-Id: <20190717115817.30110-9-noralf@tronnes.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190717115817.30110-1-noralf@tronnes.org>
References: <20190717115817.30110-1-noralf@tronnes.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; d=tronnes.org; s=ds201810; 
 h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From;
 bh=Owft4fLtUcbM9GEHIPRQFbHArU3SUUvfZl9ooBpuOXg=; 
 b=CMPwFkuJfOkjn6zoN5oWn5MEBrJxU6oKYls8QefJUZEI+eRP/H/0EWFlbynXYwUG/wvCqatWiepQuU2jcdVVRrl+G77vu0aOw0ckmeonrcWGH3jgfYX0JGgfALEuSaxerKWv0aTC1pRqN+IqH72HaghZ/hcgcq63ra26wNB2RIxNO7W5rWfht4Dt5hvaBhn9V8AwCyJfAyc0dzdro2G/AA7BAXYQPdOL4QVFasA61N82BnaNKKLqXieoi8DV8Iy7wWhbMa7Bxts9V6IYLTZAbT7FZZ8nxAyW0ymBw333N4V1eiW6r2mLL0i1Vo/CgCYVVYPgrQavrojZM2uuTsYA4w==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: david@lechnology.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

dGlueWRybS5rbyBpcyBnb2luZyBhd2F5IHNvIGxldCdzIGltcGxlbWVudCBhIGNvbm5lY3Rvci4K
ClNpZ25lZC1vZmYtYnk6IE5vcmFsZiBUcsO4bm5lcyA8bm9yYWxmQHRyb25uZXMub3JnPgotLS0K
IGRyaXZlcnMvZ3B1L2RybS90aW55ZHJtL3JlcGFwZXIuYyB8IDU4ICsrKysrKysrKysrKysrKysr
KysrKysrKysrKystLS0KIDEgZmlsZSBjaGFuZ2VkLCA1MyBpbnNlcnRpb25zKCspLCA1IGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL3JlcGFwZXIuYyBi
L2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL3JlcGFwZXIuYwppbmRleCA0MGFmYTY2MTA3ZTUuLjc2
ZDE3OTIwMDc3NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0vcmVwYXBlci5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL3JlcGFwZXIuYwpAQCAtMjMsNiArMjMsNyBA
QAogI2luY2x1ZGUgPGxpbnV4L3RoZXJtYWwuaD4KIAogI2luY2x1ZGUgPGRybS9kcm1fYXRvbWlj
X2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fY29ubmVjdG9yLmg+CiAjaW5jbHVkZSA8ZHJt
L2RybV9kYW1hZ2VfaGVscGVyLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9kcnYuaD4KICNpbmNsdWRl
IDxkcm0vZHJtX2ZiX2NtYV9oZWxwZXIuaD4KQEAgLTMwLDEwICszMSwxMSBAQAogI2luY2x1ZGUg
PGRybS9kcm1fZm9ybWF0X2hlbHBlci5oPgogI2luY2x1ZGUgPGRybS9kcm1fZ2VtX2NtYV9oZWxw
ZXIuaD4KICNpbmNsdWRlIDxkcm0vZHJtX2dlbV9mcmFtZWJ1ZmZlcl9oZWxwZXIuaD4KKyNpbmNs
dWRlIDxkcm0vZHJtX21vZGVzLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9yZWN0Lmg+CiAjaW5jbHVk
ZSA8ZHJtL2RybV92YmxhbmsuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX3Byb2JlX2hlbHBlci5oPgog
I2luY2x1ZGUgPGRybS9kcm1fc2ltcGxlX2ttc19oZWxwZXIuaD4KLSNpbmNsdWRlIDxkcm0vdGlu
eWRybS90aW55ZHJtLWhlbHBlcnMuaD4KIAogI2RlZmluZSBSRVBBUEVSX1JJRF9HMl9DT0dfSUQJ
MHgxMgogCkBAIC02MCw2ICs2Miw4IEBAIGVudW0gcmVwYXBlcl9lcGRfYm9yZGVyX2J5dGUgewog
c3RydWN0IHJlcGFwZXJfZXBkIHsKIAlzdHJ1Y3QgZHJtX2RldmljZSBkcm07CiAJc3RydWN0IGRy
bV9zaW1wbGVfZGlzcGxheV9waXBlIHBpcGU7CisJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21v
ZGUgKm1vZGU7CisJc3RydWN0IGRybV9jb25uZWN0b3IgY29ubmVjdG9yOwogCXN0cnVjdCBzcGlf
ZGV2aWNlICpzcGk7CiAKIAlzdHJ1Y3QgZ3Bpb19kZXNjICpwYW5lbF9vbjsKQEAgLTg3Myw2ICs4
NzcsMzkgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fc2ltcGxlX2Rpc3BsYXlfcGlwZV9mdW5j
cyByZXBhcGVyX3BpcGVfZnVuY3MgPSB7CiAJLnByZXBhcmVfZmIgPSBkcm1fZ2VtX2ZiX3NpbXBs
ZV9kaXNwbGF5X3BpcGVfcHJlcGFyZV9mYiwKIH07CiAKK3N0YXRpYyBpbnQgcmVwYXBlcl9jb25u
ZWN0b3JfZ2V0X21vZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCit7CisJc3Ry
dWN0IHJlcGFwZXJfZXBkICplcGQgPSBkcm1fdG9fZXBkKGNvbm5lY3Rvci0+ZGV2KTsKKwlzdHJ1
Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZTsKKworCW1vZGUgPSBkcm1fbW9kZV9kdXBsaWNhdGUo
Y29ubmVjdG9yLT5kZXYsIGVwZC0+bW9kZSk7CisJaWYgKCFtb2RlKSB7CisJCURSTV9FUlJPUigi
RmFpbGVkIHRvIGR1cGxpY2F0ZSBtb2RlXG4iKTsKKwkJcmV0dXJuIDA7CisJfQorCisJZHJtX21v
ZGVfc2V0X25hbWUobW9kZSk7CisJbW9kZS0+dHlwZSB8PSBEUk1fTU9ERV9UWVBFX1BSRUZFUlJF
RDsKKwlkcm1fbW9kZV9wcm9iZWRfYWRkKGNvbm5lY3RvciwgbW9kZSk7CisKKwljb25uZWN0b3It
PmRpc3BsYXlfaW5mby53aWR0aF9tbSA9IG1vZGUtPndpZHRoX21tOworCWNvbm5lY3Rvci0+ZGlz
cGxheV9pbmZvLmhlaWdodF9tbSA9IG1vZGUtPmhlaWdodF9tbTsKKworCXJldHVybiAxOworfQor
CitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzIHJlcGFwZXJf
Y29ubmVjdG9yX2hmdW5jcyA9IHsKKwkuZ2V0X21vZGVzID0gcmVwYXBlcl9jb25uZWN0b3JfZ2V0
X21vZGVzLAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIHJl
cGFwZXJfY29ubmVjdG9yX2Z1bmNzID0geworCS5yZXNldCA9IGRybV9hdG9taWNfaGVscGVyX2Nv
bm5lY3Rvcl9yZXNldCwKKwkuZmlsbF9tb2RlcyA9IGRybV9oZWxwZXJfcHJvYmVfc2luZ2xlX2Nv
bm5lY3Rvcl9tb2RlcywKKwkuZGVzdHJveSA9IGRybV9jb25uZWN0b3JfY2xlYW51cCwKKwkuYXRv
bWljX2R1cGxpY2F0ZV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX2Nvbm5lY3Rvcl9kdXBsaWNh
dGVfc3RhdGUsCisJLmF0b21pY19kZXN0cm95X3N0YXRlID0gZHJtX2F0b21pY19oZWxwZXJfY29u
bmVjdG9yX2Rlc3Ryb3lfc3RhdGUsCit9OworCiBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9tb2Rl
X2NvbmZpZ19mdW5jcyByZXBhcGVyX21vZGVfY29uZmlnX2Z1bmNzID0gewogCS5mYl9jcmVhdGUg
PSBkcm1fZ2VtX2ZiX2NyZWF0ZV93aXRoX2RpcnR5LAogCS5hdG9taWNfY2hlY2sgPSBkcm1fYXRv
bWljX2hlbHBlcl9jaGVjaywKQEAgLTEwOTUsNiArMTEzMiw3IEBAIHN0YXRpYyBpbnQgcmVwYXBl
cl9wcm9iZShzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpKQogCQlyZXR1cm4gLUVOT0RFVjsKIAl9CiAK
KwllcGQtPm1vZGUgPSBtb2RlOwogCWVwZC0+d2lkdGggPSBtb2RlLT5oZGlzcGxheTsKIAllcGQt
PmhlaWdodCA9IG1vZGUtPnZkaXNwbGF5OwogCWVwZC0+ZmFjdG9yZWRfc3RhZ2VfdGltZSA9IGVw
ZC0+c3RhZ2VfdGltZTsKQEAgLTExMDksMTAgKzExNDcsMjAgQEAgc3RhdGljIGludCByZXBhcGVy
X3Byb2JlKHN0cnVjdCBzcGlfZGV2aWNlICpzcGkpCiAJaWYgKCFlcGQtPmN1cnJlbnRfZnJhbWUp
CiAJCXJldHVybiAtRU5PTUVNOwogCi0JcmV0ID0gdGlueWRybV9kaXNwbGF5X3BpcGVfaW5pdChk
cm0sICZlcGQtPnBpcGUsICZyZXBhcGVyX3BpcGVfZnVuY3MsCi0JCQkJCURSTV9NT0RFX0NPTk5F
Q1RPUl9TUEksCi0JCQkJCXJlcGFwZXJfZm9ybWF0cywKLQkJCQkJQVJSQVlfU0laRShyZXBhcGVy
X2Zvcm1hdHMpLCBtb2RlLCAwKTsKKwlkcm0tPm1vZGVfY29uZmlnLm1pbl93aWR0aCA9IG1vZGUt
PmhkaXNwbGF5OworCWRybS0+bW9kZV9jb25maWcubWF4X3dpZHRoID0gbW9kZS0+aGRpc3BsYXk7
CisJZHJtLT5tb2RlX2NvbmZpZy5taW5faGVpZ2h0ID0gbW9kZS0+dmRpc3BsYXk7CisJZHJtLT5t
b2RlX2NvbmZpZy5tYXhfaGVpZ2h0ID0gbW9kZS0+dmRpc3BsYXk7CisKKwlkcm1fY29ubmVjdG9y
X2hlbHBlcl9hZGQoJmVwZC0+Y29ubmVjdG9yLCAmcmVwYXBlcl9jb25uZWN0b3JfaGZ1bmNzKTsK
KwlyZXQgPSBkcm1fY29ubmVjdG9yX2luaXQoZHJtLCAmZXBkLT5jb25uZWN0b3IsICZyZXBhcGVy
X2Nvbm5lY3Rvcl9mdW5jcywKKwkJCQkgRFJNX01PREVfQ09OTkVDVE9SX1NQSSk7CisJaWYgKHJl
dCkKKwkJcmV0dXJuIHJldDsKKworCXJldCA9IGRybV9zaW1wbGVfZGlzcGxheV9waXBlX2luaXQo
ZHJtLCAmZXBkLT5waXBlLCAmcmVwYXBlcl9waXBlX2Z1bmNzLAorCQkJCQkgICByZXBhcGVyX2Zv
cm1hdHMsIEFSUkFZX1NJWkUocmVwYXBlcl9mb3JtYXRzKSwKKwkJCQkJICAgTlVMTCwgJmVwZC0+
Y29ubmVjdG9yKTsKIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCi0tIAoyLjIwLjEKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
