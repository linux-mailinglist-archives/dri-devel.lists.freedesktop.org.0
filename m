Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EE38CBAE20
	for <lists+dri-devel@lfdr.de>; Mon, 23 Sep 2019 08:56:20 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DC9126E11B;
	Mon, 23 Sep 2019 06:56:17 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x343.google.com (mail-wm1-x343.google.com
 [IPv6:2a00:1450:4864:20::343])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D131F8977A;
 Sat, 21 Sep 2019 10:04:49 +0000 (UTC)
Received: by mail-wm1-x343.google.com with SMTP id f16so4482926wmb.2;
 Sat, 21 Sep 2019 03:04:49 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=Q8/BDI92jpkaa4ryYznN/YwsABWh0qF2Ab9kswszJkU=;
 b=MBXSjjYb3uB4GRtk9IrfLKByIPSiP0bxd5YLCb9hIirttRMDrcjUrht+0Dmx+L8xhU
 d+XklovWzkpQZ4oNCatEJS12ZUbrlV2XrdYxdbDPodXE+tTuK3EiyUKbYmWVC67N3Q7K
 Uz0ucTRt5Y/IU3nPWxDixmgIQsBPSMTzBgkoEXjjsfcqkg0NnkkR5weACYTLIBvcCSJu
 GLpOhIhLzoV0e/XyjYqekExYG9+YOKlWmnv2tLkqKHS5WEKPe5RXJOT1GI+iofkTi5Ss
 oV3mVB1GC6IdyijeCP+5PuPNw+eNcKMMfWAh1uz6Gxb+nITfzaj/i33pVTvV8esxqKRA
 dCuQ==
X-Gm-Message-State: APjAAAXAbZ/PrSzHOw1N+YEwZfFBCakcLUHSmCZriWUg2I7Fjw/ex/20
 sFpYrXVajW9xHYQYDVqY/PY=
X-Google-Smtp-Source: APXvYqwzhtQsP1hcb6xTXYlxqTtXUx/3mcR3KQwu5f44LlI7nw/SJ4s1F5MJRfQUMliVZqPaF3Y1+w==
X-Received: by 2002:a1c:cf05:: with SMTP id f5mr6606907wmg.131.1569060288233; 
 Sat, 21 Sep 2019 03:04:48 -0700 (PDT)
Received: from IcarusMOD.eternityproject.eu ([93.51.16.173])
 by smtp.gmail.com with ESMTPSA id g1sm3963575wrv.68.2019.09.21.03.04.47
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Sat, 21 Sep 2019 03:04:47 -0700 (PDT)
From: kholk11@gmail.com
To: linux-arm-msm@vger.kernel.org
Subject: [PATCH 5/5] drm/msm/adreno: Add support for Adreno 510 GPU
Date: Sat, 21 Sep 2019 12:04:39 +0200
Message-Id: <20190921100439.64402-6-kholk11@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190921100439.64402-1-kholk11@gmail.com>
References: <20190921100439.64402-1-kholk11@gmail.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Mon, 23 Sep 2019 06:55:22 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=Q8/BDI92jpkaa4ryYznN/YwsABWh0qF2Ab9kswszJkU=;
 b=fupBjAIDtQgDh7PPfdJuBT74xwoQSvYYJL9NgVYGAIDEr/musHLogUMxq65e78tfm4
 85IPgmMxrzkk0KKUx/t+tSI98DwtAiIUF6giCLndol158jrGygMHhUThXmiD3Ijoe2Fu
 G198s+4RJc5tANhzV+w9DkVCGAdDoIRyjQRB5wz6+oV20d26Q0aJuLhj/+CTj016dybx
 R5QtP8Lqe2Ap9dQLBM0dt7FbZhBaFOXdumAzk3+I/81vpZ5ggWZvDm0Wqmt6KL28XQ7v
 WSYEYSpdaO8BXCLQYMc83Qic93oODOZ5D7+uXjjObz0oX5F3HwHTs5dZSe2uHYcITzs4
 oejg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, freedreno@lists.freedesktop.org, marijns95@gmail.com,
 jonathan@marek.ca, airlied@linux.ie, gregkh@linuxfoundation.org,
 dri-devel@lists.freedesktop.org, bjorn.andersson@linaro.org,
 robh+dt@kernel.org, tglx@linutronix.de, kholk11@gmail.com, sean@poorly.run,
 georgi.djakov@linaro.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogIkFuZ2VsbyBHLiBEZWwgUmVnbm8iIDxraG9sazExQGdtYWlsLmNvbT4KClRoZSBBZHJl
bm8gNTEwIEdQVSBpcyBhIHN0cmlwcGVkIHZlcnNpb24gb2YgdGhlIEFkcmVubyA1eHgsCmZvdW5k
IGluIGxvdy1lbmQgU29DcyBsaWtlIDh4NTYgYW5kIDh4NzYsIHdoaWNoIGhhcyAyNTZLIG9mCkdN
RU0sIHdpdGggbm8gR1BNVSBub3IgWkFQLgpBbHNvLCBzaW5jZSB0aGUgQWRyZW5vIDV4eCBwYXJ0
IG9mIHRoaXMgZHJpdmVyIHNlZW1zIHRvIGJlCmRldmVsb3BlZCB3aXRoIGhpZ2gtZW5kIEFkcmVu
byBHUFVzIGluIG1pbmQsIGFuZCBzaW5jZSB0aGlzCmlzIGEgbG93ZXIgZW5kIG9uZSwgYWRkIGEg
Y29tbWVudCBtYWtpbmcgY2xlYXIgd2hpY2ggR1BVcwp3aGljaCBzdXBwb3J0IGlzIG5vdCBpbXBs
ZW1lbnRlZCB5ZXQgaXMgbm90IHVzaW5nIHRoZSBHUE1VCnJlbGF0ZWQgaHcgaW5pdCBjb2RlLCBz
byB0aGF0IGZ1dHVyZSBkZXZlbG9wZXJzIHdpbGwgbm90IGdvCmNyYXp5IHdpdGggdGhhdC4KCkJ5
IHRoZSB3YXksIHRoZSBsb3dlciBlbmQgQWRyZW5vIEdQVXMgd2l0aCBubyBHUE1VIGFyZToKQTUw
NS9BNTA2L0E1MTAgKG5vIFpBUCBmaXJtd2FyZSkKQTUwOC9BNTA5L0E1MTIgKHdpdGggWkFQIGZp
cm13YXJlKQoKU2lnbmVkLW9mZi1ieTogQW5nZWxvIEcuIERlbCBSZWdubyA8a2hvbGsxMUBnbWFp
bC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTV4eF9ncHUuYyAgICAgIHwg
ODcgKysrKysrKysrKysrKysrKysrKy0tLQogZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTV4
eF9wb3dlci5jICAgIHwgIDcgKysKIGRyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19k
ZXZpY2UuYyB8IDE1ICsrKysKIGRyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUu
aCAgICB8ICA1ICsrCiA0IGZpbGVzIGNoYW5nZWQsIDEwMiBpbnNlcnRpb25zKCspLCAxMiBkZWxl
dGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNXh4X2dw
dS5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTV4eF9ncHUuYwppbmRleCBlOWM1NWQx
ZDZjMDQuLmMzODE0YTY1YmEyZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJl
bm8vYTV4eF9ncHUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNXh4X2dwdS5j
CkBAIC0zNTMsNiArMzUzLDkgQEAgc3RhdGljIGludCBhNXh4X21lX2luaXQoc3RydWN0IG1zbV9n
cHUgKmdwdSkKIAkJICogMkQgbW9kZSAzIGRyYXcKIAkJICovCiAJCU9VVF9SSU5HKHJpbmcsIDB4
MDAwMDAwMEIpOworCX0gZWxzZSBpZiAoYWRyZW5vX2lzX2E1MTAoYWRyZW5vX2dwdSkpIHsKKwkJ
LyogV29ya2Fyb3VuZCBmb3IgdG9rZW4gYW5kIHN5bmNzICovCisJCU9VVF9SSU5HKHJpbmcsIDB4
MDAwMDAwMDEpOwogCX0gZWxzZSB7CiAJCS8qIE5vIHdvcmthcm91bmRzIGVuYWJsZWQgKi8KIAkJ
T1VUX1JJTkcocmluZywgMHgwMDAwMDAwMCk7CkBAIC01MDIsNiArNTA1LDggQEAgc3RhdGljIGlu
dCBhNXh4X3phcF9zaGFkZXJfaW5pdChzdHJ1Y3QgbXNtX2dwdSAqZ3B1KQogc3RhdGljIGludCBh
NXh4X2h3X2luaXQoc3RydWN0IG1zbV9ncHUgKmdwdSkKIHsKIAlzdHJ1Y3QgYWRyZW5vX2dwdSAq
YWRyZW5vX2dwdSA9IHRvX2FkcmVub19ncHUoZ3B1KTsKKwl1MzIgbWVxX3RocmVzaCwgbWVyY2l1
X3N6LCByb3FfdGhyZXNoXzEsIHJvcV90aHJlc2hfMiwgZWNvX2NudGw7CisJdTMyIGN1cl9lY29f
Y250OwogCWludCByZXQ7CiAKIAlncHVfd3JpdGUoZ3B1LCBSRUdfQTVYWF9WQklGX1JPVU5EX1JP
QklOX1FPU19BUkIsIDB4MDAwMDAwMDMpOwpAQCAtNTY4LDE1ICs1NzMsMzEgQEAgc3RhdGljIGlu
dCBhNXh4X2h3X2luaXQoc3RydWN0IG1zbV9ncHUgKmdwdSkKIAkJMHgwMDEwMDAwMCArIGFkcmVu
b19ncHUtPmdtZW0gLSAxKTsKIAlncHVfd3JpdGUoZ3B1LCBSRUdfQTVYWF9VQ0hFX0dNRU1fUkFO
R0VfTUFYX0hJLCAweDAwMDAwMDAwKTsKIAotCWdwdV93cml0ZShncHUsIFJFR19BNVhYX0NQX01F
UV9USFJFU0hPTERTLCAweDQwKTsKLQlpZiAoYWRyZW5vX2lzX2E1MzAoYWRyZW5vX2dwdSkpCi0J
CWdwdV93cml0ZShncHUsIFJFR19BNVhYX0NQX01FUkNJVV9TSVpFLCAweDQwKTsKKwkvKiBWYWx1
ZXMgZm9yIHRoZSBtYWpvcml0eSBvZiB0aGUgbW9kZWxzICovCisJbWVxX3RocmVzaCA9IDB4NDA7
CisJbWVyY2l1X3N6ID0gMHg0MDsKKwlyb3FfdGhyZXNoXzIgPSAweDgwMDAwMDYwOworCXJvcV90
aHJlc2hfMSA9IDB4NDAyMDFCMTY7CisJZWNvX2NudGwgPSAoMHg0MDAgPDwgMTEgfCAweDMwMCA8
PCAyMik7CisKKwkvKiBtb2RlbCBzcGVjaWZpYyBvdmVycmlkZXMgKi8KKwlpZiAoYWRyZW5vX2lz
X2E1MTAoYWRyZW5vX2dwdSkpIHsKKwkJbWVxX3RocmVzaCA9IDB4MjA7CisJCW1lcmNpdV9zeiA9
IDB4MjA7CisJCXJvcV90aHJlc2hfMiA9IDB4NDAwMDAwMzA7CisJCXJvcV90aHJlc2hfMSA9IDB4
MjAxMDBEMEE7CisJCWVjb19jbnRsID0gKDB4MjAwIDw8IDExIHwgMHgyMDAgPDwgMjIpOworCX0K
KwogCWlmIChhZHJlbm9faXNfYTU0MChhZHJlbm9fZ3B1KSkKLQkJZ3B1X3dyaXRlKGdwdSwgUkVH
X0E1WFhfQ1BfTUVSQ0lVX1NJWkUsIDB4NDAwKTsKLQlncHVfd3JpdGUoZ3B1LCBSRUdfQTVYWF9D
UF9ST1FfVEhSRVNIT0xEU18yLCAweDgwMDAwMDYwKTsKLQlncHVfd3JpdGUoZ3B1LCBSRUdfQTVY
WF9DUF9ST1FfVEhSRVNIT0xEU18xLCAweDQwMjAxQjE2KTsKKwkJbWVyY2l1X3N6ID0gMHg0MDA7
CisKKwlncHVfd3JpdGUoZ3B1LCBSRUdfQTVYWF9DUF9NRVFfVEhSRVNIT0xEUywgbWVxX3RocmVz
aCk7CisJZ3B1X3dyaXRlKGdwdSwgUkVHX0E1WFhfQ1BfTUVSQ0lVX1NJWkUsIG1lcmNpdV9zeik7
CisJZ3B1X3dyaXRlKGdwdSwgUkVHX0E1WFhfQ1BfUk9RX1RIUkVTSE9MRFNfMiwgcm9xX3RocmVz
aF8yKTsKKwlncHVfd3JpdGUoZ3B1LCBSRUdfQTVYWF9DUF9ST1FfVEhSRVNIT0xEU18xLCByb3Ff
dGhyZXNoXzEpOwogCi0JZ3B1X3dyaXRlKGdwdSwgUkVHX0E1WFhfUENfREJHX0VDT19DTlRMLCAo
MHg0MDAgPDwgMTEgfCAweDMwMCA8PCAyMikpOworCWdwdV93cml0ZShncHUsIFJFR19BNVhYX1BD
X0RCR19FQ09fQ05UTCwgZWNvX2NudGwpOwogCiAJaWYgKGFkcmVub19ncHUtPmluZm8tPnF1aXJr
cyAmIEFEUkVOT19RVUlSS19UV09fUEFTU19VU0VfV0ZJKQogCQlncHVfcm13KGdwdSwgUkVHX0E1
WFhfUENfREJHX0VDT19DTlRMLCAwLCAoMSA8PCA4KSk7CkBAIC01ODksNiArNjEwLDIyIEBAIHN0
YXRpYyBpbnQgYTV4eF9od19pbml0KHN0cnVjdCBtc21fZ3B1ICpncHUpCiAJLyogRW5hYmxlIE1F
L1BGUCBzcGxpdCBub3RpZmljYXRpb24gKi8KIAlncHVfd3JpdGUoZ3B1LCBSRUdfQTVYWF9SQkJN
X0FIQl9DTlRMMSwgMHhBNkZGRkZGRik7CiAKKwkvKgorCSAqICBJbiBBNXgsIENDVSBjYW4gc2Vu
ZCBjb250ZXh0X2RvbmUgZXZlbnQgb2YgYSBwYXJ0aWN1bGFyIGNvbnRleHQgdG8KKwkgKiAgVUNI
RSB3aGljaCB1bHRpbWF0ZWx5IHJlYWNoZXMgQ1AgZXZlbiB3aGVuIHRoZXJlIGlzIHZhbGlkCisJ
ICogIHRyYW5zYWN0aW9uIG9mIHRoYXQgY29udGV4dCBpbnNpZGUgQ0NVLiBUaGlzIGNhbiBsZXQg
Q1AgdG8gcHJvZ3JhbQorCSAqICBjb25maWcgcmVnaXN0ZXJzLCB3aGljaCB3aWxsIG1ha2UgdGhl
ICJ2YWxpZCB0cmFuc2FjdGlvbiIgaW5zaWRlCisJICogIENDVSB0byBiZSBpbnRlcnByZXRlZCBk
aWZmZXJlbnRseS4gVGhpcyBjYW4gY2F1c2UgZ3B1IGZhdWx0LiBUaGlzCisJICogIGJ1ZyBpcyBm
aXhlZCBpbiBsYXRlc3QgQTUxMCByZXZpc2lvbi4gVG8gZW5hYmxlIHRoaXMgYnVnIGZpeCAtCisJ
ICogIGJpdFsxMV0gb2YgUkJfREJHX0VDT19DTlRMIG5lZWQgdG8gYmUgc2V0IHRvIDAsIGRlZmF1
bHQgaXMgMQorCSAqICAoZGlzYWJsZSkuIEZvciBvbGRlciBBNTEwIHZlcnNpb24gdGhpcyBiaXQg
aXMgdW51c2VkLgorCSAqLworCWlmIChhZHJlbm9faXNfYTUxMChhZHJlbm9fZ3B1KSkgeworCQlj
dXJfZWNvX2NudCA9IGdwdV9yZWFkKGdwdSwgUkVHX0E1WFhfUkJfREJHX0VDT19DTlRMKTsKKwkJ
Y3VyX2Vjb19jbnQgJj0gfigxIDw8IDExKTsKKwkJZ3B1X3dyaXRlKGdwdSwgUkVHX0E1WFhfUkJf
REJHX0VDT19DTlRMLCBjdXJfZWNvX2NudCk7CisJfQorCiAJLyogRW5hYmxlIEhXQ0cgKi8KIAlh
NXh4X3NldF9od2NnKGdwdSwgdHJ1ZSk7CiAKQEAgLTYzNSw3ICs2NzIsNyBAQCBzdGF0aWMgaW50
IGE1eHhfaHdfaW5pdChzdHJ1Y3QgbXNtX2dwdSAqZ3B1KQogCS8qIFVDSEUgKi8KIAlncHVfd3Jp
dGUoZ3B1LCBSRUdfQTVYWF9DUF9QUk9URUNUKDE2KSwgQURSRU5PX1BST1RFQ1RfUlcoMHhFODAs
IDE2KSk7CiAKLQlpZiAoYWRyZW5vX2lzX2E1MzAoYWRyZW5vX2dwdSkpCisJaWYgKGFkcmVub19p
c19hNTMwKGFkcmVub19ncHUpIHx8IGFkcmVub19pc19hNTEwKGFkcmVub19ncHUpKQogCQlncHVf
d3JpdGUoZ3B1LCBSRUdfQTVYWF9DUF9QUk9URUNUKDE3KSwKIAkJCUFEUkVOT19QUk9URUNUX1JX
KDB4MTAwMDAsIDB4ODAwMCkpOwogCkBAIC02NzksNyArNzE2LDggQEAgc3RhdGljIGludCBhNXh4
X2h3X2luaXQoc3RydWN0IG1zbV9ncHUgKmdwdSkKIAogCWE1eHhfcHJlZW1wdF9od19pbml0KGdw
dSk7CiAKLQlhNXh4X2dwbXVfdWNvZGVfaW5pdChncHUpOworCWlmICghYWRyZW5vX2lzX2E1MTAo
YWRyZW5vX2dwdSkpCisJCWE1eHhfZ3BtdV91Y29kZV9pbml0KGdwdSk7CiAKIAlyZXQgPSBhNXh4
X3Vjb2RlX2luaXQoZ3B1KTsKIAlpZiAocmV0KQpAQCAtNzEyLDEyICs3NTAsMTggQEAgc3RhdGlj
IGludCBhNXh4X2h3X2luaXQoc3RydWN0IG1zbV9ncHUgKmdwdSkKIAl9CiAKIAkvKgotCSAqIFRy
eSB0byBsb2FkIGEgemFwIHNoYWRlciBpbnRvIHRoZSBzZWN1cmUgd29ybGQuIElmIHN1Y2Nlc3Nm
dWwKKwkgKiBJZiB0aGUgY2hpcCB0aGF0IHdlIGFyZSB1c2luZyBkb2VzIHN1cHBvcnQgbG9hZGlu
ZyBvbmUsIHRoZW4KKwkgKiB0cnkgdG8gbG9hZCBhIHphcCBzaGFkZXIgaW50byB0aGUgc2VjdXJl
IHdvcmxkLiBJZiBzdWNjZXNzZnVsCiAJICogd2UgY2FuIHVzZSB0aGUgQ1AgdG8gc3dpdGNoIG91
dCBvZiBzZWN1cmUgbW9kZS4gSWYgbm90IHRoZW4gd2UKIAkgKiBoYXZlIG5vIHJlc291cmNlIGJ1
dCB0byB0cnkgdG8gc3dpdGNoIG91cnNlbHZlcyBvdXQgbWFudWFsbHkuIElmIHdlCiAJICogZ3Vl
c3NlZCB3cm9uZyB0aGVuIGFjY2VzcyB0byB0aGUgUkJCTV9TRUNWSURfVFJVU1RfQ05UTCByZWdp
c3RlciB3aWxsCiAJICogYmUgYmxvY2tlZCBhbmQgYSBwZXJtaXNzaW9ucyB2aW9sYXRpb24gd2ls
bCBzb29uIGZvbGxvdy4KIAkgKi8KKwlpZiAoYWRyZW5vX2lzX2E1MTAoYWRyZW5vX2dwdSkpIHsK
KwkJZ3B1X3dyaXRlKGdwdSwgUkVHX0E1WFhfUkJCTV9TRUNWSURfVFJVU1RfQ05UTCwgMHgwKTsK
KwkJZ290byBza2lwX3phcDsKKwl9CisKIAlyZXQgPSBhNXh4X3phcF9zaGFkZXJfaW5pdChncHUp
OwogCWlmICghcmV0KSB7CiAJCU9VVF9QS1Q3KGdwdS0+cmJbMF0sIENQX1NFVF9TRUNVUkVfTU9E
RSwgMSk7CkBAIC03MzMsNiArNzc3LDcgQEAgc3RhdGljIGludCBhNXh4X2h3X2luaXQoc3RydWN0
IG1zbV9ncHUgKmdwdSkKIAkJZ3B1X3dyaXRlKGdwdSwgUkVHX0E1WFhfUkJCTV9TRUNWSURfVFJV
U1RfQ05UTCwgMHgwKTsKIAl9CiAKK3NraXBfemFwOgogCS8qIExhc3Qgc3RlcCAtIHlpZWxkIHRo
ZSByaW5nYnVmZmVyICovCiAJYTV4eF9wcmVlbXB0X3N0YXJ0KGdwdSk7CiAKQEAgLTEwNjYsNiAr
MTExMSw3IEBAIHN0YXRpYyB2b2lkIGE1eHhfZHVtcChzdHJ1Y3QgbXNtX2dwdSAqZ3B1KQogCiBz
dGF0aWMgaW50IGE1eHhfcG1fcmVzdW1lKHN0cnVjdCBtc21fZ3B1ICpncHUpCiB7CisJc3RydWN0
IGFkcmVub19ncHUgKmFkcmVub19ncHUgPSB0b19hZHJlbm9fZ3B1KGdwdSk7CiAJaW50IHJldDsK
IAogCS8qIFR1cm4gb24gdGhlIGNvcmUgcG93ZXIgKi8KQEAgLTEwNzMsNiArMTExOSwxNSBAQCBz
dGF0aWMgaW50IGE1eHhfcG1fcmVzdW1lKHN0cnVjdCBtc21fZ3B1ICpncHUpCiAJaWYgKHJldCkK
IAkJcmV0dXJuIHJldDsKIAorCWlmIChhZHJlbm9faXNfYTUxMChhZHJlbm9fZ3B1KSkgeworCQkv
KiBIYWx0IHRoZSBzcF9pbnB1dF9jbGsgYXQgSE0gbGV2ZWwgKi8KKwkJZ3B1X3dyaXRlKGdwdSwg
UkVHX0E1WFhfUkJCTV9DTE9DS19DTlRMLCAweDAwMDAwMDU1KTsKKwkJYTV4eF9zZXRfaHdjZyhn
cHUsIHRydWUpOworCQkvKiBUdXJuIG9uIHNwX2lucHV0X2NsayBhdCBITSBsZXZlbCAqLworCQln
cHVfcm13KGdwdSwgUkVHX0E1WFhfUkJCTV9DTE9DS19DTlRMLCAweEZGLCAwKTsKKwkJcmV0dXJu
IDA7CisJfQorCiAJLyogVHVybiB0aGUgUkJDQ1UgZG9tYWluIGZpcnN0IHRvIGxpbWl0IHRoZSBj
aGFuY2VzIG9mIHZvbHRhZ2UgZHJvb3AgKi8KIAlncHVfd3JpdGUoZ3B1LCBSRUdfQTVYWF9HUE1V
X1JCQ0NVX1BPV0VSX0NOVEwsIDB4Nzc4MDAwKTsKIApAQCAtMTEwMSw5ICsxMTU2LDE3IEBAIHN0
YXRpYyBpbnQgYTV4eF9wbV9yZXN1bWUoc3RydWN0IG1zbV9ncHUgKmdwdSkKIAogc3RhdGljIGlu
dCBhNXh4X3BtX3N1c3BlbmQoc3RydWN0IG1zbV9ncHUgKmdwdSkKIHsKKwlzdHJ1Y3QgYWRyZW5v
X2dwdSAqYWRyZW5vX2dwdSA9IHRvX2FkcmVub19ncHUoZ3B1KTsKKwl1MzIgeGluX2hhbHRfY3Ry
bDBfbWFzayA9IDB4RjsKKworCS8qIEE1MTAgaGFzIDMgWElOIHBvcnRzIGluIFZCSUYgKi8KKwlp
ZiAoYWRyZW5vX2lzX2E1MTAoYWRyZW5vX2dwdSkpCisJCXhpbl9oYWx0X2N0cmwwX21hc2sgPSAw
eDc7CisKIAkvKiBDbGVhciB0aGUgVkJJRiBwaXBlIGJlZm9yZSBzaHV0dGluZyBkb3duICovCi0J
Z3B1X3dyaXRlKGdwdSwgUkVHX0E1WFhfVkJJRl9YSU5fSEFMVF9DVFJMMCwgMHhGKTsKLQlzcGlu
X3VudGlsKChncHVfcmVhZChncHUsIFJFR19BNVhYX1ZCSUZfWElOX0hBTFRfQ1RSTDEpICYgMHhG
KSA9PSAweEYpOworCWdwdV93cml0ZShncHUsIFJFR19BNVhYX1ZCSUZfWElOX0hBTFRfQ1RSTDAs
IHhpbl9oYWx0X2N0cmwwX21hc2spOworCXNwaW5fdW50aWwoKGdwdV9yZWFkKGdwdSwgUkVHX0E1
WFhfVkJJRl9YSU5fSEFMVF9DVFJMMSkgJgorCQkJCXhpbl9oYWx0X2N0cmwwX21hc2spID09IHhp
bl9oYWx0X2N0cmwwX21hc2spOwogCiAJZ3B1X3dyaXRlKGdwdSwgUkVHX0E1WFhfVkJJRl9YSU5f
SEFMVF9DVFJMMCwgMCk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5v
L2E1eHhfcG93ZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E1eHhfcG93ZXIuYwpp
bmRleCBhM2EwNmRiNjc1YmEuLjU4YzM3NDY2NGM3ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL21zbS9hZHJlbm8vYTV4eF9wb3dlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRy
ZW5vL2E1eHhfcG93ZXIuYwpAQCAtMjk3LDYgKzI5NywxMCBAQCBpbnQgYTV4eF9wb3dlcl9pbml0
KHN0cnVjdCBtc21fZ3B1ICpncHUpCiAJc3RydWN0IGFkcmVub19ncHUgKmFkcmVub19ncHUgPSB0
b19hZHJlbm9fZ3B1KGdwdSk7CiAJaW50IHJldDsKIAorCS8qIEE1MDUvQTUwNi9BNTEwIChubyBa
QVApIGFuZCBBNTA4L0E1MDkvQTUxMiAody9aQVApIGhhdmUgbm8gR1BNVSAqLworCWlmIChhZHJl
bm9faXNfYTUxMChhZHJlbm9fZ3B1KSkKKwkJcmV0dXJuIDA7CisKIAkvKiBTZXQgdXAgdGhlIGxp
bWl0cyBtYW5hZ2VtZW50ICovCiAJaWYgKGFkcmVub19pc19hNTMwKGFkcmVub19ncHUpKQogCQlh
NTMwX2xtX3NldHVwKGdwdSk7CkBAIC0zMjYsNiArMzMwLDkgQEAgdm9pZCBhNXh4X2dwbXVfdWNv
ZGVfaW5pdChzdHJ1Y3QgbXNtX2dwdSAqZ3B1KQogCXVuc2lnbmVkIGludCAqZGF0YSwgKnB0ciwg
KmNtZHM7CiAJdW5zaWduZWQgaW50IGNtZHNfc2l6ZTsKIAorCWlmIChhZHJlbm9faXNfYTUxMChh
ZHJlbm9fZ3B1KSkKKwkJcmV0dXJuOworCiAJaWYgKGE1eHhfZ3B1LT5ncG11X2JvKQogCQlyZXR1
cm47CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19kZXZp
Y2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19kZXZpY2UuYwppbmRleCA0
MDEzM2E0Mzk2MGMuLmQwY2Q2YmMwMTIzYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21z
bS9hZHJlbm8vYWRyZW5vX2RldmljZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5v
L2FkcmVub19kZXZpY2UuYwpAQCAtMTE0LDYgKzExNCwyMSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0
IGFkcmVub19pbmZvIGdwdWxpc3RbXSA9IHsKIAkJLmdtZW0gID0gKFNaXzFNICsgU1pfNTEySyks
CiAJCS5pbmFjdGl2ZV9wZXJpb2QgPSBEUk1fTVNNX0lOQUNUSVZFX1BFUklPRCwKIAkJLmluaXQg
ID0gYTR4eF9ncHVfaW5pdCwKKwl9LCB7CisJCS5yZXYgICA9IEFEUkVOT19SRVYoNSwgMSwgMCwg
QU5ZX0lEKSwKKwkJLnJldm4gPSA1MTAsCisJCS5uYW1lID0gIkE1MTAiLAorCQkuZncgPSB7CisJ
CQlbQURSRU5PX0ZXX1BNNF0gPSAiYTUzMF9wbTQuZnciLAorCQkJW0FEUkVOT19GV19QRlBdID0g
ImE1MzBfcGZwLmZ3IiwKKwkJfSwKKwkJLmdtZW0gPSBTWl8yNTZLLAorCQkvKgorCQkgKiBJbmNy
ZWFzZSBpbmFjdGl2ZSBwZXJpb2QgdG8gMjUwIHRvIGF2b2lkIGJvdW5jaW5nCisJCSAqIHRoZSBH
RFNDIHdoaWNoIGFwcGVhcnMgdG8gbWFrZSBpdCBncnVtcHkKKwkJICovCisJCS5pbmFjdGl2ZV9w
ZXJpb2QgPSAyNTAsCisJCS5pbml0ID0gYTV4eF9ncHVfaW5pdCwKIAl9LCB7CiAJCS5yZXYgPSBB
RFJFTk9fUkVWKDUsIDMsIDAsIDIpLAogCQkucmV2biA9IDUzMCwKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUuaCBiL2RyaXZlcnMvZ3B1L2RybS9tc20v
YWRyZW5vL2FkcmVub19ncHUuaAppbmRleCBjNzQ0MWZiODMxM2UuLjlmOTM5MTZjODkxMCAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2dwdS5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUuaApAQCAtMjA2LDYgKzIwNiwxMSBA
QCBzdGF0aWMgaW5saW5lIGludCBhZHJlbm9faXNfYTQzMChzdHJ1Y3QgYWRyZW5vX2dwdSAqZ3B1
KQogICAgICAgIHJldHVybiBncHUtPnJldm4gPT0gNDMwOwogfQogCitzdGF0aWMgaW5saW5lIGlu
dCBhZHJlbm9faXNfYTUxMChzdHJ1Y3QgYWRyZW5vX2dwdSAqZ3B1KQoreworCXJldHVybiBncHUt
PnJldm4gPT0gNTEwOworfQorCiBzdGF0aWMgaW5saW5lIGludCBhZHJlbm9faXNfYTUzMChzdHJ1
Y3QgYWRyZW5vX2dwdSAqZ3B1KQogewogCXJldHVybiBncHUtPnJldm4gPT0gNTMwOwotLSAKMi4y
MS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmkt
ZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
