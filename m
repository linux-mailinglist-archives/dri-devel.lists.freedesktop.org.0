Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6F5E2A1AA9
	for <lists+dri-devel@lfdr.de>; Thu, 29 Aug 2019 15:04:54 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EB5568977A;
	Thu, 29 Aug 2019 13:04:51 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yb1-xb42.google.com (mail-yb1-xb42.google.com
 [IPv6:2607:f8b0:4864:20::b42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3C1A089740
 for <dri-devel@lists.freedesktop.org>; Thu, 29 Aug 2019 13:04:50 +0000 (UTC)
Received: by mail-yb1-xb42.google.com with SMTP id c9so1162819ybf.2
 for <dri-devel@lists.freedesktop.org>; Thu, 29 Aug 2019 06:04:50 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=tvJNWYMvJA/G6Rdd1ai/v3++cBaw7Tof/WctnqR3Glo=;
 b=J505zgWcNe4HgOzHBRiZSThKKyWvvbk1q5iEuNjPhbbMQwPteYCAvCjYhUT4iwjVzM
 jA0/rdSngQ70YKOfgGH8hUXy5Ybe4JfArVF7iRI56442BWwa+QEiWaV2cbL1c6pTqyzF
 brjreeBaUDvs8+OY4clVfqTZUEQgWhNfd11+8XRop1MU7VYHYkTPjQDFKmnl33OjLOv+
 ajqIwYH0mgth4+mEfqgVA6S5Y7pGm+9pI8svQZGQE+adiBpTPZoFkhe4gGn0mSx4hgr7
 MAlegnrwitxoX1v34z2/GgYyH5R9bRdOlFTB6OF5aniPjoaIlZ0BdlElFSamQwIHemRu
 DrAw==
X-Gm-Message-State: APjAAAUNspnij4rhMS9OdaRb7+md6kaXQxB00mpTWGePAk86dxVgJ1vb
 Wd1D+FWqmib9tiXxLetXtAX83A==
X-Google-Smtp-Source: APXvYqzBJh1z/VJTjZgdcXKiel+Kpba9/6xd0lkwSBRa5Kz6xahceVpVlaO/ZF0Tw5Y4Y0//jPhI5A==
X-Received: by 2002:a25:9803:: with SMTP id a3mr6723537ybo.27.1567083889248;
 Thu, 29 Aug 2019 06:04:49 -0700 (PDT)
Received: from localhost ([2620:0:1013:11:89c6:2139:5435:371d])
 by smtp.gmail.com with ESMTPSA id e12sm466936ywe.85.2019.08.29.06.04.48
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 29 Aug 2019 06:04:48 -0700 (PDT)
Date: Thu, 29 Aug 2019 09:04:48 -0400
From: Sean Paul <sean@poorly.run>
To: Rob Clark <robdclark@gmail.com>
Subject: Re: [PATCH 1/9] drm/msm/dpu: unwind async commit handling
Message-ID: <20190829130448.GF218215@art_vandelay>
References: <20190827213421.21917-1-robdclark@gmail.com>
 <20190827213421.21917-2-robdclark@gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190827213421.21917-2-robdclark@gmail.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=poorly.run; s=google;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=tvJNWYMvJA/G6Rdd1ai/v3++cBaw7Tof/WctnqR3Glo=;
 b=AMg6HMnZOOzLQ05y/zHnlpWZX/h5j2mH87Rus3lJ24OeblYgsGwuBFQV6oNnCAXe3E
 UC42t/GPknHbrRiVRuHcVxFKJhGCb+igMOyIqafnxCZ2bIySj4WxrPRsk8CorDsX8uP0
 Yn6rUF1LJvqE7kW0ohJkBqi50HoBMyW+DWr05lkjJ1XrFZ+xhOzgXu0Xe67SxxznydxN
 MsCnNBJo7mediPT/wncqlatjYhAR32Jk7HIyz4vECcOlG3sRkt9oEEQHEmOGdROFaN7Q
 fLQwHT1OQBwvIgCDjEifJJhBeeGEGRULoCrs0FThQjx3OeRI4BwZBd+J8djxuDNGtsEc
 qc7g==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rob Clark <robdclark@chromium.org>,
 "open list:DRM DRIVER FOR MSM ADRENO GPU"
 <freedreno@lists.freedesktop.org>, Fritz Koenig <frkoenig@google.com>,
 David Airlie <airlied@linux.ie>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 open list <linux-kernel@vger.kernel.org>, dri-devel@lists.freedesktop.org,
 Bruce Wang <bzwang@chromium.org>, Alexios Zavras <alexios.zavras@intel.com>,
 Abhinav Kumar <abhinavk@codeaurora.org>,
 "open list:DRM DRIVER FOR MSM ADRENO GPU" <linux-arm-msm@vger.kernel.org>,
 Sean Paul <sean@poorly.run>, Thomas Gleixner <tglx@linutronix.de>,
 Sravanthi Kollukuduru <skolluku@codeaurora.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBBdWcgMjcsIDIwMTkgYXQgMDI6MzM6MzFQTSAtMDcwMCwgUm9iIENsYXJrIHdyb3Rl
Ogo+IEZyb206IFJvYiBDbGFyayA8cm9iZGNsYXJrQGNocm9taXVtLm9yZz4KPiAKPiBJdCBhdHRl
bXB0ZWQgdG8gYXZvaWQgZnBzIGRyb3BzIGluIHRoZSBwcmVzZW5jZSBvZiBjdXJzb3IgdXBkYXRl
cy4gIEJ1dAo+IGl0IGlzIHJhY2luZywgYW5kIGNhbiByZXN1bHQgaW4gaHcgdXBkYXRlcyBhZnRl
ciBmbHVzaCBiZWZvcmUgdmJsYW5rLAo+IHdoaWNoIGxlYWRzIHRvIHVuZGVycnVucy4KPiAKPiBT
aWduZWQtb2ZmLWJ5OiBSb2IgQ2xhcmsgPHJvYmRjbGFya0BjaHJvbWl1bS5vcmc+CgpSZXZpZXdl
ZC1ieTogU2VhbiBQYXVsIDxzZWFuQHBvb3JseS5ydW4+Cgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9k
cm0vbXNtL2Rpc3AvZHB1MS9kcHVfY3J0Yy5jICAgIHwgNDEgKysrKysrKysrKy0tLS0tLS0tLS0t
Cj4gIGRyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9jcnRjLmggICAgfCAgMyArLQo+
ICBkcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlci5jIHwgMzkgKysrKysr
Ky0tLS0tLS0tLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2VuY29k
ZXIuaCB8ICAzICstCj4gIGRyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuYyAg
ICAgfCAgNSArLS0KPiAgZHJpdmVycy9ncHUvZHJtL21zbS9tc21fYXRvbWljLmMgICAgICAgICAg
ICB8ICAzICstCj4gIDYgZmlsZXMgY2hhbmdlZCwgMzcgaW5zZXJ0aW9ucygrKSwgNTcgZGVsZXRp
b25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2Rw
dV9jcnRjLmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfY3J0Yy5jCj4gaW5k
ZXggYTUyNDM5ZTAyOWM5Li5jM2Y3MTU0MDE3YzQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL21zbS9kaXNwL2RwdTEvZHB1X2NydGMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20v
ZGlzcC9kcHUxL2RwdV9jcnRjLmMKPiBAQCAtNjEwLDcgKzYxMCw3IEBAIHN0YXRpYyBpbnQgX2Rw
dV9jcnRjX3dhaXRfZm9yX2ZyYW1lX2RvbmUoc3RydWN0IGRybV9jcnRjICpjcnRjKQo+ICAJcmV0
dXJuIHJjOwo+ICB9Cj4gIAo+IC12b2lkIGRwdV9jcnRjX2NvbW1pdF9raWNrb2ZmKHN0cnVjdCBk
cm1fY3J0YyAqY3J0YywgYm9vbCBhc3luYykKPiArdm9pZCBkcHVfY3J0Y19jb21taXRfa2lja29m
ZihzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCj4gIHsKPiAgCXN0cnVjdCBkcm1fZW5jb2RlciAqZW5j
b2RlcjsKPiAgCXN0cnVjdCBkcHVfY3J0YyAqZHB1X2NydGMgPSB0b19kcHVfY3J0YyhjcnRjKTsK
PiBAQCAtNjM2LDM1ICs2MzYsMzIgQEAgdm9pZCBkcHVfY3J0Y19jb21taXRfa2lja29mZihzdHJ1
Y3QgZHJtX2NydGMgKmNydGMsIGJvb2wgYXN5bmMpCj4gIAkJCQkgIGNydGMtPnN0YXRlLT5lbmNv
ZGVyX21hc2spCj4gIAkJZHB1X2VuY29kZXJfcHJlcGFyZV9mb3Jfa2lja29mZihlbmNvZGVyKTsK
PiAgCj4gLQlpZiAoIWFzeW5jKSB7Cj4gLQkJLyogd2FpdCBmb3IgcHJldmlvdXMgZnJhbWVfZXZl
bnRfZG9uZSBjb21wbGV0aW9uICovCj4gLQkJRFBVX0FUUkFDRV9CRUdJTigid2FpdF9mb3JfZnJh
bWVfZG9uZV9ldmVudCIpOwo+IC0JCXJldCA9IF9kcHVfY3J0Y193YWl0X2Zvcl9mcmFtZV9kb25l
KGNydGMpOwo+IC0JCURQVV9BVFJBQ0VfRU5EKCJ3YWl0X2Zvcl9mcmFtZV9kb25lX2V2ZW50Iik7
Cj4gLQkJaWYgKHJldCkgewo+IC0JCQlEUFVfRVJST1IoImNydGMlZCB3YWl0IGZvciBmcmFtZSBk
b25lIGZhaWxlZDtmcmFtZV9wZW5kaW5nJWRcbiIsCj4gLQkJCQkJY3J0Yy0+YmFzZS5pZCwKPiAt
CQkJCQlhdG9taWNfcmVhZCgmZHB1X2NydGMtPmZyYW1lX3BlbmRpbmcpKTsKPiAtCQkJZ290byBl
bmQ7Cj4gLQkJfQo+ICsJLyogd2FpdCBmb3IgcHJldmlvdXMgZnJhbWVfZXZlbnRfZG9uZSBjb21w
bGV0aW9uICovCj4gKwlEUFVfQVRSQUNFX0JFR0lOKCJ3YWl0X2Zvcl9mcmFtZV9kb25lX2V2ZW50
Iik7Cj4gKwlyZXQgPSBfZHB1X2NydGNfd2FpdF9mb3JfZnJhbWVfZG9uZShjcnRjKTsKPiArCURQ
VV9BVFJBQ0VfRU5EKCJ3YWl0X2Zvcl9mcmFtZV9kb25lX2V2ZW50Iik7Cj4gKwlpZiAocmV0KSB7
Cj4gKwkJRFBVX0VSUk9SKCJjcnRjJWQgd2FpdCBmb3IgZnJhbWUgZG9uZSBmYWlsZWQ7ZnJhbWVf
cGVuZGluZyVkXG4iLAo+ICsJCQkJY3J0Yy0+YmFzZS5pZCwKPiArCQkJCWF0b21pY19yZWFkKCZk
cHVfY3J0Yy0+ZnJhbWVfcGVuZGluZykpOwo+ICsJCWdvdG8gZW5kOwo+ICsJfQo+ICAKPiAtCQlp
ZiAoYXRvbWljX2luY19yZXR1cm4oJmRwdV9jcnRjLT5mcmFtZV9wZW5kaW5nKSA9PSAxKSB7Cj4g
LQkJCS8qIGFjcXVpcmUgYmFuZHdpZHRoIGFuZCBvdGhlciByZXNvdXJjZXMgKi8KPiAtCQkJRFBV
X0RFQlVHKCJjcnRjJWQgZmlyc3QgY29tbWl0XG4iLCBjcnRjLT5iYXNlLmlkKTsKPiAtCQl9IGVs
c2UKPiAtCQkJRFBVX0RFQlVHKCJjcnRjJWQgY29tbWl0XG4iLCBjcnRjLT5iYXNlLmlkKTsKPiAr
CWlmIChhdG9taWNfaW5jX3JldHVybigmZHB1X2NydGMtPmZyYW1lX3BlbmRpbmcpID09IDEpIHsK
PiArCQkvKiBhY3F1aXJlIGJhbmR3aWR0aCBhbmQgb3RoZXIgcmVzb3VyY2VzICovCj4gKwkJRFBV
X0RFQlVHKCJjcnRjJWQgZmlyc3QgY29tbWl0XG4iLCBjcnRjLT5iYXNlLmlkKTsKPiArCX0gZWxz
ZQo+ICsJCURQVV9ERUJVRygiY3J0YyVkIGNvbW1pdFxuIiwgY3J0Yy0+YmFzZS5pZCk7Cj4gIAo+
IC0JCWRwdV9jcnRjLT5wbGF5X2NvdW50Kys7Cj4gLQl9Cj4gKwlkcHVfY3J0Yy0+cGxheV9jb3Vu
dCsrOwo+ICAKPiAgCWRwdV92YmlmX2NsZWFyX2Vycm9ycyhkcHVfa21zKTsKPiAgCj4gIAlkcm1f
Zm9yX2VhY2hfZW5jb2Rlcl9tYXNrKGVuY29kZXIsIGNydGMtPmRldiwgY3J0Yy0+c3RhdGUtPmVu
Y29kZXJfbWFzaykKPiAtCQlkcHVfZW5jb2Rlcl9raWNrb2ZmKGVuY29kZXIsIGFzeW5jKTsKPiAr
CQlkcHVfZW5jb2Rlcl9raWNrb2ZmKGVuY29kZXIpOwo+ICAKPiAgZW5kOgo+IC0JaWYgKCFhc3lu
YykKPiAtCQlyZWluaXRfY29tcGxldGlvbigmZHB1X2NydGMtPmZyYW1lX2RvbmVfY29tcCk7Cj4g
KwlyZWluaXRfY29tcGxldGlvbigmZHB1X2NydGMtPmZyYW1lX2RvbmVfY29tcCk7Cj4gIAlEUFVf
QVRSQUNFX0VORCgiY3J0Y19jb21taXQiKTsKPiAgfQo+ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2NydGMuaCBiL2RyaXZlcnMvZ3B1L2RybS9tc20v
ZGlzcC9kcHUxL2RwdV9jcnRjLmgKPiBpbmRleCA1MTgxZjA3OWE2YTEuLjEwZjc4NDU5ZjZjMiAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfY3J0Yy5oCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2NydGMuaAo+IEBAIC0yMzgs
OSArMjM4LDggQEAgdm9pZCBkcHVfY3J0Y192YmxhbmtfY2FsbGJhY2soc3RydWN0IGRybV9jcnRj
ICpjcnRjKTsKPiAgLyoqCj4gICAqIGRwdV9jcnRjX2NvbW1pdF9raWNrb2ZmIC0gdHJpZ2dlciBr
aWNrb2ZmIG9mIHRoZSBjb21taXQgZm9yIHRoaXMgY3J0Ywo+ICAgKiBAY3J0YzogUG9pbnRlciB0
byBkcm0gY3J0YyBvYmplY3QKPiAtICogQGFzeW5jOiB0cnVlIGlmIHRoZSBjb21taXQgaXMgYXN5
bmNocm9ub3VzLCBmYWxzZSBvdGhlcndpc2UKPiAgICovCj4gLXZvaWQgZHB1X2NydGNfY29tbWl0
X2tpY2tvZmYoc3RydWN0IGRybV9jcnRjICpjcnRjLCBib29sIGFzeW5jKTsKPiArdm9pZCBkcHVf
Y3J0Y19jb21taXRfa2lja29mZihzdHJ1Y3QgZHJtX2NydGMgKmNydGMpOwo+ICAKPiAgLyoqCj4g
ICAqIGRwdV9jcnRjX2NvbXBsZXRlX2NvbW1pdCAtIGNhbGxiYWNrIHNpZ25hbGxpbmcgY29tcGxl
dGlvbiBvZiBjdXJyZW50IGNvbW1pdAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNt
L2Rpc3AvZHB1MS9kcHVfZW5jb2Rlci5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEv
ZHB1X2VuY29kZXIuYwo+IGluZGV4IDYyN2M1NzU5NDIyMS4uYWMyZDUzNGJmNTllIDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyLmMKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlci5jCj4gQEAgLTE0MjEs
OCArMTQyMSw3IEBAIHN0YXRpYyB2b2lkIGRwdV9lbmNvZGVyX29mZl93b3JrKHN0cnVjdCB3b3Jr
X3N0cnVjdCAqd29yaykKPiAgICogZXh0cmFfZmx1c2hfYml0czogQWRkaXRpb25hbCBiaXQgbWFz
ayB0byBpbmNsdWRlIGluIGZsdXNoIHRyaWdnZXIKPiAgICovCj4gIHN0YXRpYyB2b2lkIF9kcHVf
ZW5jb2Rlcl90cmlnZ2VyX2ZsdXNoKHN0cnVjdCBkcm1fZW5jb2RlciAqZHJtX2VuYywKPiAtCQlz
dHJ1Y3QgZHB1X2VuY29kZXJfcGh5cyAqcGh5cywgdWludDMyX3QgZXh0cmFfZmx1c2hfYml0cywK
PiAtCQlib29sIGFzeW5jKQo+ICsJCXN0cnVjdCBkcHVfZW5jb2Rlcl9waHlzICpwaHlzLCB1aW50
MzJfdCBleHRyYV9mbHVzaF9iaXRzKQo+ICB7Cj4gIAlzdHJ1Y3QgZHB1X2h3X2N0bCAqY3RsOwo+
ICAJaW50IHBlbmRpbmdfa2lja29mZl9jbnQ7Cj4gQEAgLTE0MzksMTAgKzE0MzgsNyBAQCBzdGF0
aWMgdm9pZCBfZHB1X2VuY29kZXJfdHJpZ2dlcl9mbHVzaChzdHJ1Y3QgZHJtX2VuY29kZXIgKmRy
bV9lbmMsCj4gIAkJcmV0dXJuOwo+ICAJfQo+ICAKPiAtCWlmICghYXN5bmMpCj4gLQkJcGVuZGlu
Z19raWNrb2ZmX2NudCA9IGRwdV9lbmNvZGVyX3BoeXNfaW5jX3BlbmRpbmcocGh5cyk7Cj4gLQll
bHNlCj4gLQkJcGVuZGluZ19raWNrb2ZmX2NudCA9IGF0b21pY19yZWFkKCZwaHlzLT5wZW5kaW5n
X2tpY2tvZmZfY250KTsKPiArCXBlbmRpbmdfa2lja29mZl9jbnQgPSBkcHVfZW5jb2Rlcl9waHlz
X2luY19wZW5kaW5nKHBoeXMpOwo+ICAKPiAgCWlmIChleHRyYV9mbHVzaF9iaXRzICYmIGN0bC0+
b3BzLnVwZGF0ZV9wZW5kaW5nX2ZsdXNoKQo+ICAJCWN0bC0+b3BzLnVwZGF0ZV9wZW5kaW5nX2Zs
dXNoKGN0bCwgZXh0cmFfZmx1c2hfYml0cyk7Cj4gQEAgLTE1NTMsOCArMTU0OSw3IEBAIHN0YXRp
YyB2b2lkIGRwdV9lbmNvZGVyX2hlbHBlcl9od19yZXNldChzdHJ1Y3QgZHB1X2VuY29kZXJfcGh5
cyAqcGh5c19lbmMpCj4gICAqCWEgdGltZS4KPiAgICogZHB1X2VuYzogUG9pbnRlciB0byB2aXJ0
dWFsIGVuY29kZXIgc3RydWN0dXJlCj4gICAqLwo+IC1zdGF0aWMgdm9pZCBfZHB1X2VuY29kZXJf
a2lja29mZl9waHlzKHN0cnVjdCBkcHVfZW5jb2Rlcl92aXJ0ICpkcHVfZW5jLAo+IC0JCQkJICAg
ICAgYm9vbCBhc3luYykKPiArc3RhdGljIHZvaWQgX2RwdV9lbmNvZGVyX2tpY2tvZmZfcGh5cyhz
dHJ1Y3QgZHB1X2VuY29kZXJfdmlydCAqZHB1X2VuYykKPiAgewo+ICAJc3RydWN0IGRwdV9od19j
dGwgKmN0bDsKPiAgCXVpbnQzMl90IGksIHBlbmRpbmdfZmx1c2g7Cj4gQEAgLTE1ODEsMTMgKzE1
NzYsMTIgQEAgc3RhdGljIHZvaWQgX2RwdV9lbmNvZGVyX2tpY2tvZmZfcGh5cyhzdHJ1Y3QgZHB1
X2VuY29kZXJfdmlydCAqZHB1X2VuYywKPiAgCQkgKiBmb3IgYXN5bmMgY29tbWl0cy4gU28gZG9u
J3Qgc2V0IHRoaXMgZm9yIGFzeW5jLCBzaW5jZSBpdCdsbAo+ICAJCSAqIHJvbGwgb3ZlciB0byB0
aGUgbmV4dCBjb21taXQuCj4gIAkJICovCj4gLQkJaWYgKCFhc3luYyAmJiBwaHlzLT5zcGxpdF9y
b2xlICE9IEVOQ19ST0xFX1NMQVZFKQo+ICsJCWlmIChwaHlzLT5zcGxpdF9yb2xlICE9IEVOQ19S
T0xFX1NMQVZFKQo+ICAJCQlzZXRfYml0KGksIGRwdV9lbmMtPmZyYW1lX2J1c3lfbWFzayk7Cj4g
IAo+ICAJCWlmICghcGh5cy0+b3BzLm5lZWRzX3NpbmdsZV9mbHVzaCB8fAo+ICAJCQkJIXBoeXMt
Pm9wcy5uZWVkc19zaW5nbGVfZmx1c2gocGh5cykpCj4gLQkJCV9kcHVfZW5jb2Rlcl90cmlnZ2Vy
X2ZsdXNoKCZkcHVfZW5jLT5iYXNlLCBwaHlzLCAweDAsCj4gLQkJCQkJCSAgIGFzeW5jKTsKPiAr
CQkJX2RwdV9lbmNvZGVyX3RyaWdnZXJfZmx1c2goJmRwdV9lbmMtPmJhc2UsIHBoeXMsIDB4MCk7
Cj4gIAkJZWxzZSBpZiAoY3RsLT5vcHMuZ2V0X3BlbmRpbmdfZmx1c2gpCj4gIAkJCXBlbmRpbmdf
Zmx1c2ggfD0gY3RsLT5vcHMuZ2V0X3BlbmRpbmdfZmx1c2goY3RsKTsKPiAgCX0KPiBAQCAtMTU5
Nyw3ICsxNTkxLDcgQEAgc3RhdGljIHZvaWQgX2RwdV9lbmNvZGVyX2tpY2tvZmZfcGh5cyhzdHJ1
Y3QgZHB1X2VuY29kZXJfdmlydCAqZHB1X2VuYywKPiAgCQlfZHB1X2VuY29kZXJfdHJpZ2dlcl9m
bHVzaCgKPiAgCQkJCSZkcHVfZW5jLT5iYXNlLAo+ICAJCQkJZHB1X2VuYy0+Y3VyX21hc3RlciwK
PiAtCQkJCXBlbmRpbmdfZmx1c2gsIGFzeW5jKTsKPiArCQkJCXBlbmRpbmdfZmx1c2gpOwo+ICAJ
fQo+ICAKPiAgCV9kcHVfZW5jb2Rlcl90cmlnZ2VyX3N0YXJ0KGRwdV9lbmMtPmN1cl9tYXN0ZXIp
Owo+IEBAIC0xODE1LDExICsxODA5LDEyIEBAIHZvaWQgZHB1X2VuY29kZXJfcHJlcGFyZV9mb3Jf
a2lja29mZihzdHJ1Y3QgZHJtX2VuY29kZXIgKmRybV9lbmMpCj4gIAl9Cj4gIH0KPiAgCj4gLXZv
aWQgZHB1X2VuY29kZXJfa2lja29mZihzdHJ1Y3QgZHJtX2VuY29kZXIgKmRybV9lbmMsIGJvb2wg
YXN5bmMpCj4gK3ZvaWQgZHB1X2VuY29kZXJfa2lja29mZihzdHJ1Y3QgZHJtX2VuY29kZXIgKmRy
bV9lbmMpCj4gIHsKPiAgCXN0cnVjdCBkcHVfZW5jb2Rlcl92aXJ0ICpkcHVfZW5jOwo+ICAJc3Ry
dWN0IGRwdV9lbmNvZGVyX3BoeXMgKnBoeXM7Cj4gIAlrdGltZV90IHdha2V1cF90aW1lOwo+ICsJ
dW5zaWduZWQgbG9uZyB0aW1lb3V0X21zOwo+ICAJdW5zaWduZWQgaW50IGk7Cj4gIAo+ICAJRFBV
X0FUUkFDRV9CRUdJTigiZW5jb2Rlcl9raWNrb2ZmIik7Cj4gQEAgLTE4MjcsMjMgKzE4MjIsMTUg
QEAgdm9pZCBkcHVfZW5jb2Rlcl9raWNrb2ZmKHN0cnVjdCBkcm1fZW5jb2RlciAqZHJtX2VuYywg
Ym9vbCBhc3luYykKPiAgCj4gIAl0cmFjZV9kcHVfZW5jX2tpY2tvZmYoRFJNSUQoZHJtX2VuYykp
Owo+ICAKPiAtCS8qCj4gLQkgKiBBc3luY2hyb25vdXMgZnJhbWVzIGRvbid0IGhhbmRsZSBGUkFN
RV9ET05FIGV2ZW50cy4gQXMgc3VjaCwgdGhleQo+IC0JICogc2hvdWxkbid0IGVuYWJsZSB0aGUg
ZnJhbWVfZG9uZSB3YXRjaGRvZyBzaW5jZSBpdCB3aWxsIGFsd2F5cyB0aW1lCj4gLQkgKiBvdXQu
Cj4gLQkgKi8KPiAtCWlmICghYXN5bmMpIHsKPiAtCQl1bnNpZ25lZCBsb25nIHRpbWVvdXRfbXM7
Cj4gLQkJdGltZW91dF9tcyA9IERQVV9FTkNPREVSX0ZSQU1FX0RPTkVfVElNRU9VVF9GUkFNRVMg
KiAxMDAwIC8KPiArCXRpbWVvdXRfbXMgPSBEUFVfRU5DT0RFUl9GUkFNRV9ET05FX1RJTUVPVVRf
RlJBTUVTICogMTAwMCAvCj4gIAkJCWRybV9tb2RlX3ZyZWZyZXNoKCZkcm1fZW5jLT5jcnRjLT5z
dGF0ZS0+YWRqdXN0ZWRfbW9kZSk7Cj4gIAo+IC0JCWF0b21pY19zZXQoJmRwdV9lbmMtPmZyYW1l
X2RvbmVfdGltZW91dF9tcywgdGltZW91dF9tcyk7Cj4gLQkJbW9kX3RpbWVyKCZkcHVfZW5jLT5m
cmFtZV9kb25lX3RpbWVyLAo+IC0JCQkgIGppZmZpZXMgKyBtc2Vjc190b19qaWZmaWVzKHRpbWVv
dXRfbXMpKTsKPiAtCX0KPiArCWF0b21pY19zZXQoJmRwdV9lbmMtPmZyYW1lX2RvbmVfdGltZW91
dF9tcywgdGltZW91dF9tcyk7Cj4gKwltb2RfdGltZXIoJmRwdV9lbmMtPmZyYW1lX2RvbmVfdGlt
ZXIsCj4gKwkJCWppZmZpZXMgKyBtc2Vjc190b19qaWZmaWVzKHRpbWVvdXRfbXMpKTsKPiAgCj4g
IAkvKiBBbGwgcGh5cyBlbmNzIGFyZSByZWFkeSB0byBnbywgdHJpZ2dlciB0aGUga2lja29mZiAq
Lwo+IC0JX2RwdV9lbmNvZGVyX2tpY2tvZmZfcGh5cyhkcHVfZW5jLCBhc3luYyk7Cj4gKwlfZHB1
X2VuY29kZXJfa2lja29mZl9waHlzKGRwdV9lbmMpOwo+ICAKPiAgCS8qIGFsbG93IHBoeXMgZW5j
cyB0byBoYW5kbGUgYW55IHBvc3Qta2lja29mZiBidXNpbmVzcyAqLwo+ICAJZm9yIChpID0gMDsg
aSA8IGRwdV9lbmMtPm51bV9waHlzX2VuY3M7IGkrKykgewo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlci5oIGIvZHJpdmVycy9ncHUvZHJtL21z
bS9kaXNwL2RwdTEvZHB1X2VuY29kZXIuaAo+IGluZGV4IDk5N2QxMzFjMjQ0MC4uODQ2NWIzN2Fk
ZjNiIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNv
ZGVyLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlci5o
Cj4gQEAgLTgyLDkgKzgyLDggQEAgdm9pZCBkcHVfZW5jb2Rlcl90cmlnZ2VyX2tpY2tvZmZfcGVu
ZGluZyhzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpOwo+ICAgKiBkcHVfZW5jb2Rlcl9raWNr
b2ZmIC0gdHJpZ2dlciBhIGRvdWJsZSBidWZmZXIgZmxpcCBvZiB0aGUgY3RsIHBhdGgKPiAgICoJ
KGkuZS4gY3RsIGZsdXNoIGFuZCBzdGFydCkgaW1tZWRpYXRlbHkuCj4gICAqIEBlbmNvZGVyOgll
bmNvZGVyIHBvaW50ZXIKPiAtICogQGFzeW5jOgl0cnVlIGlmIHRoaXMgaXMgYW4gYXN5bmNocm9u
b3VzIGNvbW1pdAo+ICAgKi8KPiAtdm9pZCBkcHVfZW5jb2Rlcl9raWNrb2ZmKHN0cnVjdCBkcm1f
ZW5jb2RlciAqZW5jb2RlciwgYm9vbCBhc3luYyk7Cj4gK3ZvaWQgZHB1X2VuY29kZXJfa2lja29m
ZihzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpOwo+ICAKPiAgLyoqCj4gICAqIGRwdV9lbmNv
ZGVyX3dhaXRfZm9yX2V2ZW50IC0gV2FpdHMgZm9yIGVuY29kZXIgZXZlbnRzCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuYwo+IGluZGV4IGI4ZDI2NGJkMTVkZi4uMzE0NTRj
YzVkOGM1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9r
bXMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuYwo+IEBA
IC0yOTgsNyArMjk4LDcgQEAgdm9pZCBkcHVfa21zX2VuY29kZXJfZW5hYmxlKHN0cnVjdCBkcm1f
ZW5jb2RlciAqZW5jb2RlcikKPiAgCQkJY29udGludWU7Cj4gIAo+ICAJCXRyYWNlX2RwdV9rbXNf
ZW5jX2VuYWJsZShEUk1JRChjcnRjKSk7Cj4gLQkJZHB1X2NydGNfY29tbWl0X2tpY2tvZmYoY3J0
YywgZmFsc2UpOwo+ICsJCWRwdV9jcnRjX2NvbW1pdF9raWNrb2ZmKGNydGMpOwo+ICAJfQo+ICB9
Cj4gIAo+IEBAIC0zMTUsOCArMzE1LDcgQEAgc3RhdGljIHZvaWQgZHB1X2ttc19jb21taXQoc3Ry
dWN0IG1zbV9rbXMgKmttcywgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQo+ICAKPiAg
CQlpZiAoY3J0Yy0+c3RhdGUtPmFjdGl2ZSkgewo+ICAJCQl0cmFjZV9kcHVfa21zX2NvbW1pdChE
Uk1JRChjcnRjKSk7Cj4gLQkJCWRwdV9jcnRjX2NvbW1pdF9raWNrb2ZmKGNydGMsCj4gLQkJCQkJ
CXN0YXRlLT5sZWdhY3lfY3Vyc29yX3VwZGF0ZSk7Cj4gKwkJCWRwdV9jcnRjX2NvbW1pdF9raWNr
b2ZmKGNydGMpOwo+ICAJCX0KPiAgCX0KPiAgfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vbXNtL21zbV9hdG9taWMuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2F0b21pYy5jCj4g
aW5kZXggZGQxNmJhYmRkOGMwLi5lNWFhZTE2NDU5MzMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL21zbS9tc21fYXRvbWljLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9h
dG9taWMuYwo+IEBAIC03MCw4ICs3MCw3IEBAIHZvaWQgbXNtX2F0b21pY19jb21taXRfdGFpbChz
dHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gIAkJa21zLT5mdW5jcy0+Y29tbWl0KGtt
cywgc3RhdGUpOwo+ICAJfQo+ICAKPiAtCWlmICghc3RhdGUtPmxlZ2FjeV9jdXJzb3JfdXBkYXRl
KQo+IC0JCW1zbV9hdG9taWNfd2FpdF9mb3JfY29tbWl0X2RvbmUoZGV2LCBzdGF0ZSk7Cj4gKwlt
c21fYXRvbWljX3dhaXRfZm9yX2NvbW1pdF9kb25lKGRldiwgc3RhdGUpOwo+ICAKPiAgCWttcy0+
ZnVuY3MtPmNvbXBsZXRlX2NvbW1pdChrbXMsIHN0YXRlKTsKPiAgCj4gLS0gCj4gMi4yMS4wCj4g
CgotLSAKU2VhbiBQYXVsLCBTb2Z0d2FyZSBFbmdpbmVlciwgR29vZ2xlIC8gQ2hyb21pdW0gT1MK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVs
IG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
