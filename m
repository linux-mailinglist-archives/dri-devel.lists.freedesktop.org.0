Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id F0953A31B5
	for <lists+dri-devel@lfdr.de>; Fri, 30 Aug 2019 09:58:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2B7D76E282;
	Fri, 30 Aug 2019 07:58:47 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mailgw01.mediatek.com (unknown [210.61.82.183])
 by gabe.freedesktop.org (Postfix) with ESMTP id CCD9A6E282
 for <dri-devel@lists.freedesktop.org>; Fri, 30 Aug 2019 07:58:45 +0000 (UTC)
X-UUID: aff4f7e1145840429534e97f9f3cfe17-20190830
X-UUID: aff4f7e1145840429534e97f9f3cfe17-20190830
Received: from mtkexhb02.mediatek.inc [(172.21.101.103)] by
 mailgw01.mediatek.com (envelope-from <ck.hu@mediatek.com>)
 (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
 with ESMTP id 1705467666; Fri, 30 Aug 2019 15:58:43 +0800
Received: from mtkcas08.mediatek.inc (172.21.101.126) by
 mtkmbs01n2.mediatek.inc (172.21.101.79) with Microsoft SMTP Server (TLS) id
 15.0.1395.4; Fri, 30 Aug 2019 15:58:40 +0800
Received: from [172.21.77.4] (172.21.77.4) by mtkcas08.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1395.4 via Frontend
 Transport; Fri, 30 Aug 2019 15:58:40 +0800
Message-ID: <1567151915.31732.3.camel@mtksdaap41>
Subject: Re: [PATCH 2/2] drm/mediatek: Apply CMDQ control flow
From: CK Hu <ck.hu@mediatek.com>
To: Bibby Hsieh <bibby.hsieh@mediatek.com>
Date: Fri, 30 Aug 2019 15:58:35 +0800
In-Reply-To: <20190830074103.16671-3-bibby.hsieh@mediatek.com>
References: <20190830074103.16671-1-bibby.hsieh@mediatek.com>
 <20190830074103.16671-3-bibby.hsieh@mediatek.com>
X-Mailer: Evolution 3.10.4-0ubuntu2 
MIME-Version: 1.0
X-TM-SNTS-SMTP: E915D1E1CB4CF6C5A92924673061987181FFA9A61F16E33BEE3D54C88A82F89F2000:8
X-MTK: N
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: drinkcat@chromium.org, Yongqiang Niu <yongqiang.niu@mediatek.com>,
 David Airlie <airlied@linux.ie>, Daniel Vetter <daniel.vetter@ffwll.ch>,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 tfiga@chromium.org, Thierry Reding <thierry.reding@gmail.com>,
 linux-mediatek@lists.infradead.org, Matthias Brugger <matthias.bgg@gmail.com>,
 linux-arm-kernel@lists.infradead.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGksIEJpYmJ5OgoKT24gRnJpLCAyMDE5LTA4LTMwIGF0IDE1OjQxICswODAwLCBCaWJieSBIc2ll
aCB3cm90ZToKPiBVbmxpa2Ugb3RoZXIgU29DcywgTVQ4MTgzIGRvZXMgbm90IGhhdmUgInNoYWRv
dyIKPiByZWdpc3RlcnMgZm9yIHBlcmZvcm1haW5nIGFuIGF0b21pYyB2aWRlbyBtb2RlCj4gc2V0
IG9yIHBhZ2UgZmxpcCBhdCB2YmxhbmsvdnN5bmMuCj4gCj4gVGhlIENNRFEgKENvbW1lbmQgUXVl
dWUpIGluIE1UODE4MyBpcyB1c2VkIHRvIGhlbHAKPiB1cGRhdGUgYWxsIHJlbGV2YW50IGRpc3Bs
YXkgY29udHJvbGxlciByZWdpc3RlcnMKPiB3aXRoIGNyaXRpY2FsIHRpbWUgbGltYXRpb24uCj4g
Cj4gU2lnbmVkLW9mZi1ieTogWVQgU2hlbiA8eXQuc2hlbkBtZWRpYXRlay5jb20+Cj4gU2lnbmVk
LW9mZi1ieTogQ0sgSHUgPGNrLmh1QG1lZGlhdGVrLmNvbT4KPiBTaWduZWQtb2ZmLWJ5OiBQaGls
aXBwIFphYmVsIDxwLnphYmVsQHBlbmd1dHJvbml4LmRlPgo+IFNpZ25lZC1vZmYtYnk6IEJpYmJ5
IEhzaWVoIDxiaWJieS5oc2llaEBtZWRpYXRlay5jb20+Cj4gU2lnbmVkLW9mZi1ieTogWW9uZ3Fp
YW5nIE5pdSA8eW9uZ3FpYW5nLm5pdUBtZWRpYXRlay5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1
L2RybS9tZWRpYXRlay9tdGtfZHJtX2NydGMuYyAgICAgfCAxOTAgKysrKysrKysrKysrKysrKyst
LS0KPiAgZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fY3J0Yy5oICAgICB8ICAgMiAr
Cj4gIGRyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2RkcF9jb21wLmMgfCAgMzQgKysr
Kwo+ICBkcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kZHBfY29tcC5oIHwgICAyICsK
PiAgZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fcGxhbmUuYyAgICB8ICAgNCArCj4g
IDUgZmlsZXMgY2hhbmdlZCwgMjA2IGluc2VydGlvbnMoKyksIDI2IGRlbGV0aW9ucygtKQo+IAo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9jcnRjLmMgYi9k
cml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9jcnRjLmMKPiBpbmRleCAwOTJlNTAyZWQy
N2IuLjMyOWNhNWExNGMzOSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsv
bXRrX2RybV9jcnRjLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9j
cnRjLmMKPiBAQCAtMTAsNyArMTAsOSBAQAo+ICAjaW5jbHVkZSA8ZHJtL2RybV9wbGFuZV9oZWxw
ZXIuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+Cj4gICNpbmNsdWRlIDxs
aW51eC9jbGsuaD4KPiArI2luY2x1ZGUgPGxpbnV4L29mX2FkZHJlc3MuaD4KPiAgI2luY2x1ZGUg
PGxpbnV4L3BtX3J1bnRpbWUuaD4KPiArI2luY2x1ZGUgPGxpbnV4L3NvYy9tZWRpYXRlay9tdGst
Y21kcS5oPgo+ICAKPiAgI2luY2x1ZGUgIm10a19kcm1fZHJ2LmgiCj4gICNpbmNsdWRlICJtdGtf
ZHJtX2NydGMuaCIKPiBAQCAtNDEsNiArNDMsMTAgQEAgc3RydWN0IG10a19kcm1fY3J0YyB7Cj4g
IAl1bnNpZ25lZCBpbnQJCQlsYXllcl9ucjsKPiAgCWJvb2wJCQkJcGVuZGluZ19wbGFuZXM7Cj4g
IAlib29sICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcl91cGRhdGU7Cj4gKwo+ICsJ
c3RydWN0IGNtZHFfY2xpZW50CQkqY21kcV9jbGllbnQ7Cj4gKwl1MzIJCQkJY21kcV9ldmVudDsK
PiArCj4gIAl2b2lkIF9faW9tZW0JCQkqY29uZmlnX3JlZ3M7Cj4gIAljb25zdCBzdHJ1Y3QgbXRr
X21tc3lzX3JlZ19kYXRhICptbXN5c19yZWdfZGF0YTsKPiAgCXN0cnVjdCBtdGtfZGlzcF9tdXRl
eAkJKm11dGV4Owo+IEBAIC01Nyw2ICs2MywxMiBAQCBzdHJ1Y3QgbXRrX2NydGNfc3RhdGUgewo+
ICAJdW5zaWduZWQgaW50CQkJcGVuZGluZ193aWR0aDsKPiAgCXVuc2lnbmVkIGludAkJCXBlbmRp
bmdfaGVpZ2h0Owo+ICAJdW5zaWduZWQgaW50CQkJcGVuZGluZ192cmVmcmVzaDsKPiArCXN0cnVj
dCBjbWRxX3BrdAkJCSpjbWRxX2hhbmRsZTsKPiArfTsKPiArCj4gK3N0cnVjdCBtdGtfY21kcV9j
Yl9kYXRhIHsKPiArCXN0cnVjdCBkcm1fY3J0Y19zdGF0ZQkJKnN0YXRlOwo+ICsJc3RydWN0IGNt
ZHFfcGt0CQkJKmNtZHFfaGFuZGxlOwo+ICB9Owo+ICAKPiAgc3RhdGljIGlubGluZSBzdHJ1Y3Qg
bXRrX2RybV9jcnRjICp0b19tdGtfY3J0YyhzdHJ1Y3QgZHJtX2NydGMgKmMpCj4gQEAgLTIwOCw2
ICsyMjAsNDYgQEAgc3RhdGljIHZvaWQgbXRrX2NydGNfZGRwX2Nsa19kaXNhYmxlKHN0cnVjdCBt
dGtfZHJtX2NydGMgKm10a19jcnRjKQo+ICAJCWNsa19kaXNhYmxlX3VucHJlcGFyZShtdGtfY3J0
Yy0+ZGRwX2NvbXBbaV0tPmNsayk7Cj4gIH0KPiAgCj4gK3N0YXRpYyB2b2lkIGRkcF9jbWRxX2N1
cnNvcl9jYihzdHJ1Y3QgY21kcV9jYl9kYXRhIGRhdGEpCj4gK3sKPiArCj4gKyNpZiBJU19FTkFC
TEVEKENPTkZJR19NVEtfQ01EUSkKCkkgd291bGQgbGlrZSB0aGUgd2hvbGUgZGRwX2NtZHFfY3Vy
c29yX2NiKCkgYW5kIGRkcF9jbWRxX2NiKCkgaW5zaWRlCnRoaXMgcGFydC4KCj4gKwlzdHJ1Y3Qg
bXRrX2NtZHFfY2JfZGF0YSAqY2JfZGF0YSA9IGRhdGEuZGF0YTsKPiArCj4gKwlEUk1fREVCVUdf
RFJJVkVSKCIlc1xuIiwgX19mdW5jX18pOwo+ICsKPiArCWNtZHFfcGt0X2Rlc3Ryb3koY2JfZGF0
YS0+Y21kcV9oYW5kbGUpOwo+ICsJa2ZyZWUoY2JfZGF0YSk7Cj4gKyNlbmRpZgo+ICsKPiArfQo+
ICsKPiArc3RhdGljIHZvaWQgZGRwX2NtZHFfY2Ioc3RydWN0IGNtZHFfY2JfZGF0YSBkYXRhKQo+
ICt7Cj4gKwo+ICsjaWYgSVNfRU5BQkxFRChDT05GSUdfTVRLX0NNRFEpCj4gKwlzdHJ1Y3QgbXRr
X2NtZHFfY2JfZGF0YSAqY2JfZGF0YSA9IGRhdGEuZGF0YTsKPiArCXN0cnVjdCBkcm1fY3J0Y19z
dGF0ZSAqY3J0Y19zdGF0ZSA9IGNiX2RhdGEtPnN0YXRlOwo+ICsJc3RydWN0IGRybV9hdG9taWNf
c3RhdGUgKmF0b21pY19zdGF0ZSA9IGNydGNfc3RhdGUtPnN0YXRlOwo+ICsJc3RydWN0IGRybV9j
cnRjICpjcnRjID0gY3J0Y19zdGF0ZS0+Y3J0YzsKPiArCXN0cnVjdCBtdGtfZHJtX2NydGMgKm10
a19jcnRjID0gdG9fbXRrX2NydGMoY3J0Yyk7Cj4gKwo+ICsJRFJNX0RFQlVHX0RSSVZFUigiJXNc
biIsIF9fZnVuY19fKTsKPiArCj4gKwlpZiAobXRrX2NydGMtPnBlbmRpbmdfbmVlZHNfdmJsYW5r
KSB7Cj4gKwkJLyogY21kcV92YmxhbmtfZXZlbnQgbXVzdCBiZSByZWFkIGFmdGVyIGNtZHFfbmVl
ZHNfZXZlbnQgKi8KPiArCQlzbXBfcm1iKCk7Cj4gKwo+ICsJCW10a19kcm1fY3J0Y19maW5pc2hf
cGFnZV9mbGlwKG10a19jcnRjKTsKPiArCQltdGtfY3J0Yy0+cGVuZGluZ19uZWVkc192Ymxhbmsg
PSBmYWxzZTsKPiArCX0KPiArCW10a19hdG9taWNfc3RhdGVfcHV0X3F1ZXVlKGF0b21pY19zdGF0
ZSk7Cj4gKwljbWRxX3BrdF9kZXN0cm95KGNiX2RhdGEtPmNtZHFfaGFuZGxlKTsKPiArCWtmcmVl
KGNiX2RhdGEpOwo+ICsjZW5kaWYKPiArCj4gK30KPiArCj4gIHN0YXRpYyBpbnQgbXRrX2NydGNf
ZGRwX2h3X2luaXQoc3RydWN0IG10a19kcm1fY3J0YyAqbXRrX2NydGMpCj4gIHsKPiAgCXN0cnVj
dCBkcm1fY3J0YyAqY3J0YyA9ICZtdGtfY3J0Yy0+YmFzZTsKPiBAQCAtMjgzLDcgKzMzNSw4IEBA
IHN0YXRpYyBpbnQgbXRrX2NydGNfZGRwX2h3X2luaXQoc3RydWN0IG10a19kcm1fY3J0YyAqbXRr
X2NydGMpCj4gIAkJaWYgKHByZXYgPT0gRERQX0NPTVBPTkVOVF9PVkwwKQo+ICAJCQltdGtfZGRw
X2NvbXBfYmdjbHJfaW5fb24oY29tcCk7Cj4gIAo+IC0JCW10a19kZHBfY29tcF9jb25maWcoY29t
cCwgd2lkdGgsIGhlaWdodCwgdnJlZnJlc2gsIGJwYyk7Cj4gKwkJbXRrX2RkcF9jb21wX2NvbmZp
Zyhjb21wLCB3aWR0aCwgaGVpZ2h0LAo+ICsJCQkJICAgIHZyZWZyZXNoLCBicGMsIE5VTEwpOwo+
ICAJCW10a19kZHBfY29tcF9zdGFydChjb21wKTsKPiAgCX0KPiAgCj4gQEAgLTMwMyw3ICszNTYs
NyBAQCBzdGF0aWMgaW50IG10a19jcnRjX2RkcF9od19pbml0KHN0cnVjdCBtdGtfZHJtX2NydGMg
Km10a19jcnRjKQo+ICAJCX0gZWxzZQo+ICAJCQlsb2NhbF9sYXllciA9IGk7Cj4gIAkJbXRrX2Rk
cF9jb21wX2xheWVyX2NvbmZpZyhjb21wLCBsb2NhbF9sYXllciwKPiAtCQkJCQkgIHBsYW5lX3N0
YXRlKTsKPiArCQkJCQkgIHBsYW5lX3N0YXRlLCBOVUxMKTsKPiAgCX0KPiAgCj4gIAlyZXR1cm4g
MDsKPiBAQCAtMzYxLDcgKzQxNCw3IEBAIHN0YXRpYyB2b2lkIG10a19jcnRjX2RkcF9jb25maWco
c3RydWN0IGRybV9jcnRjICpjcnRjKQo+ICAJaWYgKHN0YXRlLT5wZW5kaW5nX2NvbmZpZykgewo+
ICAJCW10a19kZHBfY29tcF9jb25maWcoY29tcCwgc3RhdGUtPnBlbmRpbmdfd2lkdGgsCj4gIAkJ
CQkgICAgc3RhdGUtPnBlbmRpbmdfaGVpZ2h0LAo+IC0JCQkJICAgIHN0YXRlLT5wZW5kaW5nX3Zy
ZWZyZXNoLCAwKTsKPiArCQkJCSAgICBzdGF0ZS0+cGVuZGluZ192cmVmcmVzaCwgMCwgTlVMTCk7
Cj4gIAo+ICAJCXN0YXRlLT5wZW5kaW5nX2NvbmZpZyA9IGZhbHNlOwo+ICAJfQo+IEBAIC0zODEs
NyArNDM0LDcgQEAgc3RhdGljIHZvaWQgbXRrX2NydGNfZGRwX2NvbmZpZyhzdHJ1Y3QgZHJtX2Ny
dGMgKmNydGMpCj4gIAkJCQkJbG9jYWxfbGF5ZXIgPSBpOwo+ICAKPiAgCQkJCW10a19kZHBfY29t
cF9sYXllcl9jb25maWcoY29tcCwgbG9jYWxfbGF5ZXIsCj4gLQkJCQkJCQkgIHBsYW5lX3N0YXRl
KTsKPiArCQkJCQkJCSAgcGxhbmVfc3RhdGUsIE5VTEwpOwo+ICAJCQkJcGxhbmVfc3RhdGUtPnBl
bmRpbmcuY29uZmlnID0gZmFsc2U7Cj4gIAkJCX0KPiAgCQl9Cj4gQEAgLTQwNSwyNiArNDU4LDY5
IEBAIHZvaWQgbXRrX2RybV9jcnRjX2N1cnNvcl91cGRhdGUoc3RydWN0IGRybV9jcnRjICpjcnRj
LCBzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwKPiAgCQlyZXR1cm47Cj4gIAo+ICAJbXV0ZXhfbG9j
aygmcHJpdi0+aHdfbG9jayk7Cj4gLQlwbGFuZV9oZWxwZXJfZnVuY3MtPmF0b21pY191cGRhdGUo
cGxhbmUsIHBsYW5lX3N0YXRlKTsKPiAtCWZvciAoaSA9IDA7IGkgPCBtdGtfY3J0Yy0+bGF5ZXJf
bnI7IGkrKykgewo+IC0JCXN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lID0gJm10a19jcnRjLT5wbGFu
ZXNbaV07Cj4gLQkJc3RydWN0IG10a19wbGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGU7Cj4gKwlpZiAo
SVNfRU5BQkxFRChDT05GSUdfTVRLX0NNRFEpICYmIG10a19jcnRjLT5jbWRxX2NsaWVudCkgewo+
ICsJCXN0cnVjdCBtdGtfY3J0Y19zdGF0ZSAqbXRrX2NydGNfc3RhdGUgPQo+ICsJCQkJdG9fbXRr
X2NydGNfc3RhdGUoY3J0Yy0+c3RhdGUpOwo+ICsJCXN0cnVjdCBtdGtfY21kcV9jYl9kYXRhICpj
Yl9kYXRhOwo+ICsKPiArCQltdGtfY3J0Y19zdGF0ZS0+Y21kcV9oYW5kbGUgPQo+ICsJCQkJY21k
cV9wa3RfY3JlYXRlKG10a19jcnRjLT5jbWRxX2NsaWVudCwKPiArCQkJCQkJUEFHRV9TSVpFKTsK
PiArCQljbWRxX3BrdF9jbGVhcl9ldmVudChtdGtfY3J0Y19zdGF0ZS0+Y21kcV9oYW5kbGUsCj4g
KwkJCQkgICAgIG10a19jcnRjLT5jbWRxX2V2ZW50KTsKPiArCQljbWRxX3BrdF93ZmUobXRrX2Ny
dGNfc3RhdGUtPmNtZHFfaGFuZGxlLCBtdGtfY3J0Yy0+Y21kcV9ldmVudCk7Cj4gKwkJcGxhbmVf
aGVscGVyX2Z1bmNzLT5hdG9taWNfdXBkYXRlKHBsYW5lLCBwbGFuZV9zdGF0ZSk7Cj4gKwkJY2Jf
ZGF0YSA9IGttYWxsb2Moc2l6ZW9mKCpjYl9kYXRhKSwgR0ZQX0tFUk5FTCk7Cj4gKwkJY2JfZGF0
YS0+Y21kcV9oYW5kbGUgPSBtdGtfY3J0Y19zdGF0ZS0+Y21kcV9oYW5kbGU7Cj4gKwkJY21kcV9w
a3RfZmx1c2hfYXN5bmMobXRrX2NydGNfc3RhdGUtPmNtZHFfaGFuZGxlLAo+ICsJCQkJICAgICBk
ZHBfY21kcV9jdXJzb3JfY2IsIGNiX2RhdGEpOwo+ICsJfSBlbHNlIHsKPiArCQlwbGFuZV9oZWxw
ZXJfZnVuY3MtPmF0b21pY191cGRhdGUocGxhbmUsIHBsYW5lX3N0YXRlKTsKPiAgCj4gLQkJcGxh
bmVfc3RhdGUgPSB0b19tdGtfcGxhbmVfc3RhdGUocGxhbmUtPnN0YXRlKTsKPiAtCQlpZiAocGxh
bmVfc3RhdGUtPnBlbmRpbmcuZGlydHkpIHsKPiAtCQkJcGxhbmVfc3RhdGUtPnBlbmRpbmcuY29u
ZmlnID0gdHJ1ZTsKPiAtCQkJcGxhbmVfc3RhdGUtPnBlbmRpbmcuZGlydHkgPSBmYWxzZTsKPiAr
CQlmb3IgKGkgPSAwOyBpIDwgbXRrX2NydGMtPmxheWVyX25yOyBpKyspIHsKPiArCQkJc3RydWN0
IGRybV9wbGFuZSAqcGxhbmUgPSAmbXRrX2NydGMtPnBsYW5lc1tpXTsKPiArCQkJc3RydWN0IG10
a19wbGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGU7Cj4gKwo+ICsJCQlwbGFuZV9zdGF0ZSA9IHRvX210
a19wbGFuZV9zdGF0ZShwbGFuZS0+c3RhdGUpOwo+ICsJCQlpZiAocGxhbmVfc3RhdGUtPnBlbmRp
bmcuZGlydHkpIHsKPiArCQkJCXBsYW5lX3N0YXRlLT5wZW5kaW5nLmNvbmZpZyA9IHRydWU7Cj4g
KwkJCQlwbGFuZV9zdGF0ZS0+cGVuZGluZy5kaXJ0eSA9IGZhbHNlOwo+ICsJCQl9Cj4gKwkJfQo+
ICsJCW10a19jcnRjLT5wZW5kaW5nX3BsYW5lcyA9IHRydWU7Cj4gKwkJbXRrX2NydGMtPmN1cnNv
cl91cGRhdGUgPSB0cnVlOwo+ICsJCWlmIChwcml2LT5kYXRhLT5zaGFkb3dfcmVnaXN0ZXIpIHsK
PiArCQkJbXRrX2Rpc3BfbXV0ZXhfYWNxdWlyZShtdGtfY3J0Yy0+bXV0ZXgpOwo+ICsJCQltdGtf
Y3J0Y19kZHBfY29uZmlnKGNydGMpOwo+ICsJCQltdGtfZGlzcF9tdXRleF9yZWxlYXNlKG10a19j
cnRjLT5tdXRleCk7Cj4gIAkJfQo+ICAJfQo+IC0JbXRrX2NydGMtPnBlbmRpbmdfcGxhbmVzID0g
dHJ1ZTsKPiAtCW10a19jcnRjLT5jdXJzb3JfdXBkYXRlID0gdHJ1ZTsKPiArCW11dGV4X3VubG9j
aygmcHJpdi0+aHdfbG9jayk7Cj4gK30KPiAgCj4gLQlpZiAocHJpdi0+ZGF0YS0+c2hhZG93X3Jl
Z2lzdGVyKSB7Cj4gLQkJbXRrX2Rpc3BfbXV0ZXhfYWNxdWlyZShtdGtfY3J0Yy0+bXV0ZXgpOwo+
IC0JCW10a19jcnRjX2RkcF9jb25maWcoY3J0Yyk7Cj4gLQkJbXRrX2Rpc3BfbXV0ZXhfcmVsZWFz
ZShtdGtfY3J0Yy0+bXV0ZXgpOwoKTXkgaWRlYSBmb3IgdGhlIGNvbnRyb2wgZmxvdyBpczoKCjEu
IEluIHRoZSBlbmQgb2YgbXRrX2RybV9jcnRjX2F0b21pY19mbHVzaCgpLCBkbyBzb21ldGhpbmcg
bGlrZSBzaGFkb3cKcmVnaXN0ZXIgY29udHJvbCwKCmlmIChwcml2LT5kYXRhLT5jbWRxKSB7CiAg
ICAvKiBhYm9ydCBjbWQgaW4gcXVldWUgKi8KICAgIC8qIENhbGwgbXRrX2NydGNfZGRwX2NvbmZp
ZygpIHRvIGdlbmVyYXRlIGNvbW1hbmQgKi8KICAgIC8qIHNlbmQgY21kIHRvIHF1ZXVlICovCn0K
Mi4gSW4gbXRrX2NydGNfZGRwX2NvbmZpZygpLCBpZiBjbWRxIGlzIHVzZWQsIHN0YXRlLT5wZW5k
aW5nX2NvbmZpZyBhbmQKbXRrX2NydGMtPnBlbmRpbmdfcGxhbmVzIHdvdWxkIG5vdCBiZSBzZXQg
dG8gZmFsc2UuIFRoZXNlIHR3byB2YXJpYWJsZQp3b3VsZCBiZSBzZXQgdG8gZmFsc2UgaW4gY21k
cSBjYWxsYmFjay4KClJlZ2FyZHMsCkNLCgo+ICt2b2lkIG10a19kcm1fY3J0Y19wbGFuZV91cGRh
dGUoc3RydWN0IGRybV9jcnRjICpjcnRjLCBzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwKPiArCQkJ
ICAgICAgIHN0cnVjdCBtdGtfcGxhbmVfc3RhdGUgKnN0YXRlKQo+ICt7Cj4gKwlzdHJ1Y3QgbXRr
X2RybV9jcnRjICptdGtfY3J0YyA9IHRvX210a19jcnRjKGNydGMpOwo+ICsJc3RydWN0IG10a19k
ZHBfY29tcCAqY29tcCA9IG10a19jcnRjLT5kZHBfY29tcFswXTsKPiArCXN0cnVjdCBkcm1fY3J0
Y19zdGF0ZSAqY3J0Y19zdGF0ZSA9IGNydGMtPnN0YXRlOwo+ICsJc3RydWN0IG10a19jcnRjX3N0
YXRlICptdGtfY3J0Y19zdGF0ZSA9IHRvX210a19jcnRjX3N0YXRlKGNydGNfc3RhdGUpOwo+ICsJ
c3RydWN0IGNtZHFfcGt0ICpjbWRxX2hhbmRsZSA9IG10a19jcnRjX3N0YXRlLT5jbWRxX2hhbmRs
ZTsKPiArCXVuc2lnbmVkIGludCBjb21wX2xheWVyX25yID0gbXRrX2RkcF9jb21wX2xheWVyX25y
KGNvbXApOwo+ICsJdW5zaWduZWQgaW50IGxvY2FsX2xheWVyOwo+ICsJdW5zaWduZWQgaW50IHBs
YW5lX2luZGV4ID0gcGxhbmUgLSBtdGtfY3J0Yy0+cGxhbmVzOwo+ICsKPiArCURSTV9ERUJVR19E
UklWRVIoIiVzXG4iLCBfX2Z1bmNfXyk7Cj4gKwlpZiAobXRrX2NydGMtPmNtZHFfY2xpZW50KSB7
Cj4gKwkJaWYgKHBsYW5lX2luZGV4ID49IGNvbXBfbGF5ZXJfbnIpIHsKPiArCQkJY29tcCA9IG10
a19jcnRjLT5kZHBfY29tcFsxXTsKPiArCQkJbG9jYWxfbGF5ZXIgPSBwbGFuZV9pbmRleCAtIGNv
bXBfbGF5ZXJfbnI7Cj4gKwkJfSBlbHNlIHsKPiArCQkJbG9jYWxfbGF5ZXIgPSBwbGFuZV9pbmRl
eDsKPiArCQl9Cj4gKwkJbXRrX2RkcF9jb21wX2xheWVyX2NvbmZpZyhjb21wLCBsb2NhbF9sYXll
ciwgc3RhdGUsCj4gKwkJCQkJICBjbWRxX2hhbmRsZSk7Cj4gIAl9Cj4gLQltdXRleF91bmxvY2so
JnByaXYtPmh3X2xvY2spOwo+ICB9Cj4gIAo+ICBzdGF0aWMgdm9pZCBtdGtfZHJtX2NydGNfYXRv
bWljX2VuYWJsZShzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4gQEAgLTQ4Nyw2ICs1ODMsMTUgQEAg
c3RhdGljIHZvaWQgbXRrX2RybV9jcnRjX2F0b21pY19iZWdpbihzdHJ1Y3QgZHJtX2NydGMgKmNy
dGMsCj4gIAkJV0FSTl9PTihkcm1fY3J0Y192YmxhbmtfZ2V0KGNydGMpICE9IDApOwo+ICAJCW10
a19jcnRjLT5ldmVudCA9IHN0YXRlLT5iYXNlLmV2ZW50Owo+ICAJCXN0YXRlLT5iYXNlLmV2ZW50
ID0gTlVMTDsKPiArCQkvKiBNYWtlIHN1cmUgdGhlIGFib3ZlIHBhcmFtZXRlciBpcyBzZXQgYmVm
b3JlIHVwZGF0ZSAqLwo+ICsJCXNtcF93bWIoKTsKPiArCQltdGtfY3J0Yy0+cGVuZGluZ19uZWVk
c192YmxhbmsgPSB0cnVlOwo+ICsJfQo+ICsJaWYgKElTX0VOQUJMRUQoQ09ORklHX01US19DTURR
KSAmJiBtdGtfY3J0Yy0+Y21kcV9jbGllbnQpIHsKPiArCQlzdGF0ZS0+Y21kcV9oYW5kbGUgPSBj
bWRxX3BrdF9jcmVhdGUobXRrX2NydGMtPmNtZHFfY2xpZW50LAo+ICsJCQkJCQkgICAgIFBBR0Vf
U0laRSk7Cj4gKwkJY21kcV9wa3RfY2xlYXJfZXZlbnQoc3RhdGUtPmNtZHFfaGFuZGxlLCBtdGtf
Y3J0Yy0+Y21kcV9ldmVudCk7Cj4gKwkJY21kcV9wa3Rfd2ZlKHN0YXRlLT5jbWRxX2hhbmRsZSwg
bXRrX2NydGMtPmNtZHFfZXZlbnQpOwo+ICAJfQo+ICB9Cj4gIAo+IEBAIC00OTQsMTMgKzU5OSwy
OSBAQCBzdGF0aWMgdm9pZCBtdGtfZHJtX2NydGNfYXRvbWljX2ZsdXNoKHN0cnVjdCBkcm1fY3J0
YyAqY3J0YywKPiAgCQkJCSAgICAgIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqb2xkX2NydGNfc3Rh
dGUpCj4gIHsKPiAgCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfYXRvbWljX3N0YXRlID0g
b2xkX2NydGNfc3RhdGUtPnN0YXRlOwo+ICsJc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRjX3N0
YXRlID0gY3J0Yy0+c3RhdGU7Cj4gKwlzdHJ1Y3QgbXRrX2NydGNfc3RhdGUgKnN0YXRlID0gdG9f
bXRrX2NydGNfc3RhdGUoY3J0Y19zdGF0ZSk7Cj4gKwlzdHJ1Y3QgY21kcV9wa3QgKmNtZHFfaGFu
ZGxlID0gc3RhdGUtPmNtZHFfaGFuZGxlOwo+ICAJc3RydWN0IG10a19kcm1fY3J0YyAqbXRrX2Ny
dGMgPSB0b19tdGtfY3J0YyhjcnRjKTsKPiAgCXN0cnVjdCBtdGtfZHJtX3ByaXZhdGUgKnByaXYg
PSBjcnRjLT5kZXYtPmRldl9wcml2YXRlOwo+ICsJc3RydWN0IG10a19jbWRxX2NiX2RhdGEgKmNi
X2RhdGE7Cj4gIAl1bnNpZ25lZCBpbnQgcGVuZGluZ19wbGFuZXMgPSAwOwo+ICAJaW50IGk7Cj4g
IAo+IC0JaWYgKG10a19jcnRjLT5ldmVudCkKPiAtCQltdGtfY3J0Yy0+cGVuZGluZ19uZWVkc192
YmxhbmsgPSB0cnVlOwo+ICsJRFJNX0RFQlVHX0RSSVZFUigiW0NSVEM6JXVdIFtTVEFURTolcCgl
cCktPiVwKCVwKV1cbiIsIGNydGMtPmJhc2UuaWQsCj4gKwkJCSBvbGRfY3J0Y19zdGF0ZSwgb2xk
X2NydGNfc3RhdGUtPnN0YXRlLAo+ICsJCQkgY3J0Y19zdGF0ZSwgY3J0Y19zdGF0ZS0+c3RhdGUp
Owo+ICsKPiArCWlmIChJU19FTkFCTEVEKENPTkZJR19NVEtfQ01EUSkgJiYgbXRrX2NydGMtPmNt
ZHFfY2xpZW50KSB7Cj4gKwkJZHJtX2F0b21pY19zdGF0ZV9nZXQob2xkX2F0b21pY19zdGF0ZSk7
Cj4gKwkJY2JfZGF0YSA9IGttYWxsb2Moc2l6ZW9mKCpjYl9kYXRhKSwgR0ZQX0tFUk5FTCk7Cj4g
KwkJY2JfZGF0YS0+c3RhdGUgPSBvbGRfY3J0Y19zdGF0ZTsKPiArCQljYl9kYXRhLT5jbWRxX2hh
bmRsZSA9IGNtZHFfaGFuZGxlOwo+ICsJCWNtZHFfcGt0X2ZsdXNoX2FzeW5jKGNtZHFfaGFuZGxl
LCBkZHBfY21kcV9jYiwgY2JfZGF0YSk7Cj4gKwo+ICsJCXJldHVybjsKPiArCX0KPiArCj4gIAlm
b3IgKGkgPSAwOyBpIDwgbXRrX2NydGMtPmxheWVyX25yOyBpKyspIHsKPiAgCQlzdHJ1Y3QgZHJt
X3BsYW5lICpwbGFuZSA9ICZtdGtfY3J0Yy0+cGxhbmVzW2ldOwo+ICAJCXN0cnVjdCBtdGtfcGxh
bmVfc3RhdGUgKnBsYW5lX3N0YXRlOwo+IEBAIC01MjEsNyArNjQyLDggQEAgc3RhdGljIHZvaWQg
bXRrX2RybV9jcnRjX2F0b21pY19mbHVzaChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4gIAo+ICAJ
aWYgKGNydGMtPnN0YXRlLT5jb2xvcl9tZ210X2NoYW5nZWQpCj4gIAkJZm9yIChpID0gMDsgaSA8
IG10a19jcnRjLT5kZHBfY29tcF9ucjsgaSsrKQo+IC0JCQltdGtfZGRwX2dhbW1hX3NldChtdGtf
Y3J0Yy0+ZGRwX2NvbXBbaV0sIGNydGMtPnN0YXRlKTsKPiArCQkJbXRrX2RkcF9nYW1tYV9zZXQo
bXRrX2NydGMtPmRkcF9jb21wW2ldLAo+ICsJCQkJCSAgY3J0Yy0+c3RhdGUsIE5VTEwpOwo+ICAK
PiAgCWlmIChwcml2LT5kYXRhLT5zaGFkb3dfcmVnaXN0ZXIpIHsKPiAgCQltdGtfZGlzcF9tdXRl
eF9hY3F1aXJlKG10a19jcnRjLT5tdXRleCk7Cj4gQEAgLTU3OCwxMCArNzAwLDEzIEBAIHZvaWQg
bXRrX2NydGNfZGRwX2lycShzdHJ1Y3QgZHJtX2NydGMgKmNydGMsIHN0cnVjdCBtdGtfZGRwX2Nv
bXAgKmNvbXApCj4gIAlzdHJ1Y3QgbXRrX2RybV9jcnRjICptdGtfY3J0YyA9IHRvX210a19jcnRj
KGNydGMpOwo+ICAJc3RydWN0IG10a19kcm1fcHJpdmF0ZSAqcHJpdiA9IGNydGMtPmRldi0+ZGV2
X3ByaXZhdGU7Cj4gIAo+IC0JaWYgKCFwcml2LT5kYXRhLT5zaGFkb3dfcmVnaXN0ZXIpCj4gLQkJ
bXRrX2NydGNfZGRwX2NvbmZpZyhjcnRjKTsKPiAtCj4gLQltdGtfZHJtX2ZpbmlzaF9wYWdlX2Zs
aXAobXRrX2NydGMpOwo+ICsJaWYgKG10a19jcnRjLT5jbWRxX2NsaWVudCkgewo+ICsJCWRybV9j
cnRjX2hhbmRsZV92YmxhbmsoY3J0Yyk7Cj4gKwl9IGVsc2Ugewo+ICsJCWlmICghcHJpdi0+ZGF0
YS0+c2hhZG93X3JlZ2lzdGVyKQo+ICsJCQltdGtfY3J0Y19kZHBfY29uZmlnKGNydGMpOwo+ICsJ
CW10a19kcm1fZmluaXNoX3BhZ2VfZmxpcChtdGtfY3J0Yyk7Cj4gKwl9Cj4gIH0KPiAgCj4gIGlu
dCBtdGtfZHJtX2NydGNfY3JlYXRlKHN0cnVjdCBkcm1fZGV2aWNlICpkcm1fZGV2LAo+IEBAIC02
NzgsNSArODAzLDE4IEBAIGludCBtdGtfZHJtX2NydGNfY3JlYXRlKHN0cnVjdCBkcm1fZGV2aWNl
ICpkcm1fZGV2LAo+ICAJZHJtX2NydGNfZW5hYmxlX2NvbG9yX21nbXQoJm10a19jcnRjLT5iYXNl
LCAwLCBmYWxzZSwgTVRLX0xVVF9TSVpFKTsKPiAgCXByaXYtPm51bV9waXBlcysrOwo+ICAKPiAr
CWlmIChJU19FTkFCTEVEKENPTkZJR19NVEtfQ01EUSkpIHsKPiArCQltdGtfY3J0Yy0+Y21kcV9j
bGllbnQgPSBjbWRxX21ib3hfY3JlYXRlKGRldiwKPiArCQkJCWRybV9jcnRjX2luZGV4KCZtdGtf
Y3J0Yy0+YmFzZSksIDIwMDApOwo+ICsJCW9mX3Byb3BlcnR5X3JlYWRfdTMyX2luZGV4KGRldi0+
b2Zfbm9kZSwgIm1lZGlhdGVrLGdjZS1ldmVudHMiLAo+ICsJCQkJCSAgIGRybV9jcnRjX2luZGV4
KCZtdGtfY3J0Yy0+YmFzZSksCj4gKwkJCQkJICAgJm10a19jcnRjLT5jbWRxX2V2ZW50KTsKPiAr
CQlpZiAoSVNfRVJSKG10a19jcnRjLT5jbWRxX2NsaWVudCkpIHsKPiArCQkJZGV2X2RiZyhkZXYs
ICJtdGtfY3J0YyAlZCBmYWlsZWQgdG8gY3JlYXRlIG1haWxib3ggY2xpZW50LCB3cml0aW5nIHJl
Z2lzdGVyIGJ5IENQVSBub3dcbiIsCj4gKwkJCQlkcm1fY3J0Y19pbmRleCgmbXRrX2NydGMtPmJh
c2UpKTsKPiArCQkJbXRrX2NydGMtPmNtZHFfY2xpZW50ID0gTlVMTDsKPiArCQl9Cj4gKwl9Cj4g
Kwo+ICAJcmV0dXJuIDA7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21lZGlh
dGVrL210a19kcm1fY3J0Yy5oIGIvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fY3J0
Yy5oCj4gaW5kZXggNDZlOTAzYmU2OGVjLi42YjI0MjNjODg0MTYgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fY3J0Yy5oCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL21lZGlhdGVrL210a19kcm1fY3J0Yy5oCj4gQEAgLTE5LDYgKzE5LDggQEAgdm9pZCBtdGtf
Y3J0Y19kZHBfaXJxKHN0cnVjdCBkcm1fY3J0YyAqY3J0Yywgc3RydWN0IG10a19kZHBfY29tcCAq
Y29tcCk7Cj4gIGludCBtdGtfZHJtX2NydGNfY3JlYXRlKHN0cnVjdCBkcm1fZGV2aWNlICpkcm1f
ZGV2LAo+ICAJCQljb25zdCBlbnVtIG10a19kZHBfY29tcF9pZCAqcGF0aCwKPiAgCQkJdW5zaWdu
ZWQgaW50IHBhdGhfbGVuKTsKPiArdm9pZCBtdGtfZHJtX2NydGNfcGxhbmVfdXBkYXRlKHN0cnVj
dCBkcm1fY3J0YyAqY3J0Yywgc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCj4gKwkJCSAgICAgICBz
dHJ1Y3QgbXRrX3BsYW5lX3N0YXRlICpzdGF0ZSk7Cj4gIHZvaWQgbXRrX2RybV9jcnRjX2N1cnNv
cl91cGRhdGUoc3RydWN0IGRybV9jcnRjICpjcnRjLCBzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwK
PiAgCQkJCXN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlKTsKPiAgCj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2RkcF9jb21wLmMgYi9kcml2
ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kZHBfY29tcC5jCj4gaW5kZXggNzY0MTZjMWNi
YjI4Li4wNTZlYmM2YTgxOTkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVr
L210a19kcm1fZGRwX2NvbXAuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtf
ZHJtX2RkcF9jb21wLmMKPiBAQCAtMzk1LDYgKzM5NSw0MCBAQCBpbnQgbXRrX2RkcF9jb21wX2lu
aXQoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlX25vZGUgKm5vZGUsCj4gIAlpZiAo
SVNfRVJSKGNvbXAtPmNsaykpCj4gIAkJcmV0dXJuIFBUUl9FUlIoY29tcC0+Y2xrKTsKPiAgCj4g
KwlpZiAoSVNfRU5BQkxFRChDT05GSUdfTVRLX0NNRFEpKSB7Cj4gKwkJc3RydWN0IHBsYXRmb3Jt
X2RldmljZSAqY29tcF9wZGV2Owo+ICsJCXN0cnVjdCByZXNvdXJjZSByZXM7Cj4gKwkJc3RydWN0
IGNtZHFfY2xpZW50X3JlZyAqY21kcV9yZWc7Cj4gKwkJaW50IHJldCA9IDA7Cj4gKwo+ICsJCWlm
IChvZl9hZGRyZXNzX3RvX3Jlc291cmNlKG5vZGUsIDAsICZyZXMpICE9IDApIHsKPiArCQkJZGV2
X2VycihkZXYsICJNaXNzaW5nIHJlZyBpbiAlcyBub2RlXG4iLAo+ICsJCQkJbm9kZS0+ZnVsbF9u
YW1lKTsKPiArCQkJcmV0dXJuIC1FSU5WQUw7Cj4gKwkJfQo+ICsJCWNvbXAtPnJlZ3NfcGEgPSBy
ZXMuc3RhcnQ7Cj4gKwo+ICsJCWNvbXBfcGRldiA9IG9mX2ZpbmRfZGV2aWNlX2J5X25vZGUobm9k
ZSk7Cj4gKwkJaWYgKCFjb21wX3BkZXYpIHsKPiArCQkJZGV2X3dhcm4oZGV2LCAiV2FpdGluZyBm
b3IgY29tcG9uZW50IGRldmljZSAlc1xuIiwKPiArCQkJCSBub2RlLT5mdWxsX25hbWUpOwo+ICsJ
CQlyZXR1cm4gLUVQUk9CRV9ERUZFUjsKPiArCQl9Cj4gKwo+ICsJCWNtZHFfcmVnID0ga3phbGxv
YyhzaXplb2YoKmNtZHFfcmVnKSwgR0ZQX0tFUk5FTCk7Cj4gKwkJaWYgKCFjbWRxX3JlZykKPiAr
CQkJcmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsJCXJldCA9IGNtZHFfZGV2X2dldF9jbGllbnRfcmVn
KCZjb21wX3BkZXYtPmRldiwgY21kcV9yZWcsIDApOwo+ICsJCWlmIChyZXQgIT0gMCkKPiArCQkJ
ZGV2X2RiZygmY29tcF9wZGV2LT5kZXYsCj4gKwkJCQkiZ2V0IG1lZGlhdGVrLGdjZS1jbGllbnQt
cmVnIGZhaWwhXG4iKTsKPiArCQllbHNlCj4gKwkJCWNvbXAtPnN1YnN5cyA9IGNtZHFfcmVnLT5z
dWJzeXM7Cj4gKwo+ICsJCWtmcmVlKGNtZHFfcmVnKTsKPiArCX0KPiArCj4gIAlyZXR1cm4gMDsK
PiAgfQo+ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1f
ZGRwX2NvbXAuaCBiL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2RkcF9jb21wLmgK
PiBpbmRleCA2YmJjMzVmOTI4MTUuLjBmYWVjMmRhZDVhMyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kZHBfY29tcC5oCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL21lZGlhdGVrL210a19kcm1fZGRwX2NvbXAuaAo+IEBAIC05OSw2ICs5OSw4IEBAIHN0cnVj
dCBtdGtfZGRwX2NvbXAgewo+ICAJaW50IGlycTsKPiAgCWVudW0gbXRrX2RkcF9jb21wX2lkIGlk
Owo+ICAJY29uc3Qgc3RydWN0IG10a19kZHBfY29tcF9mdW5jcyAqZnVuY3M7Cj4gKwlyZXNvdXJj
ZV9zaXplX3QgcmVnc19wYTsKPiArCXU4IHN1YnN5czsKPiAgfTsKPiAgCj4gIHN0YXRpYyBpbmxp
bmUgdm9pZCBtdGtfZGRwX2NvbXBfY29uZmlnKHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXAsCj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX3BsYW5lLmMgYi9k
cml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9wbGFuZS5jCj4gaW5kZXggNTlkYmRhZjA3
NDI1Li5lZjQ2YzBmNDMwMzkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVr
L210a19kcm1fcGxhbmUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJt
X3BsYW5lLmMKPiBAQCAtMjAyLDYgKzIwMiw4IEBAIHN0YXRpYyB2b2lkIG10a19wbGFuZV9hdG9t
aWNfdXBkYXRlKHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAo+ICAJc3RhdGUtPnBlbmRpbmcuaGVp
Z2h0ID0gZHJtX3JlY3RfaGVpZ2h0KCZwbGFuZS0+c3RhdGUtPmRzdCk7Cj4gIAl3bWIoKTsgLyog
TWFrZSBzdXJlIHRoZSBhYm92ZSBwYXJhbWV0ZXJzIGFyZSBzZXQgYmVmb3JlIHVwZGF0ZSAqLwo+
ICAJc3RhdGUtPnBlbmRpbmcuZGlydHkgPSB0cnVlOwo+ICsKPiArCW10a19kcm1fY3J0Y19wbGFu
ZV91cGRhdGUoY3J0YywgcGxhbmUsIHN0YXRlKTsKPiAgfQo+ICAKPiAgc3RhdGljIHZvaWQgbXRr
X3BsYW5lX2F0b21pY19kaXNhYmxlKHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAo+IEBAIC0yMTIs
NiArMjE0LDggQEAgc3RhdGljIHZvaWQgbXRrX3BsYW5lX2F0b21pY19kaXNhYmxlKHN0cnVjdCBk
cm1fcGxhbmUgKnBsYW5lLAo+ICAJc3RhdGUtPnBlbmRpbmcuZW5hYmxlID0gZmFsc2U7Cj4gIAl3
bWIoKTsgLyogTWFrZSBzdXJlIHRoZSBhYm92ZSBwYXJhbWV0ZXIgaXMgc2V0IGJlZm9yZSB1cGRh
dGUgKi8KPiAgCXN0YXRlLT5wZW5kaW5nLmRpcnR5ID0gdHJ1ZTsKPiArCS8qIEZldGNoIENSVEMg
ZnJvbSBvbGQgcGxhbmUgc3RhdGUgd2hlbiBkaXNhYmxpbmcuICovCj4gKwltdGtfZHJtX2NydGNf
cGxhbmVfdXBkYXRlKG9sZF9zdGF0ZS0+Y3J0YywgcGxhbmUsIHN0YXRlKTsKPiAgfQo+ICAKPiAg
c3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcGxhbmVfaGVscGVyX2Z1bmNzIG10a19wbGFuZV9oZWxw
ZXJfZnVuY3MgPSB7CgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
