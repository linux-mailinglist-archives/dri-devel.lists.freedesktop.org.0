Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7BA7010F7E5
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 07:39:53 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5875A6E39C;
	Tue,  3 Dec 2019 06:39:51 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F1E9C6E39C
 for <dri-devel@lists.freedesktop.org>; Tue,  3 Dec 2019 06:39:48 +0000 (UTC)
Received: from pendragon.ideasonboard.com (81-175-216-236.bb.dnainternet.fi
 [81.175.216.236])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 70227309;
 Tue,  3 Dec 2019 07:39:46 +0100 (CET)
Date: Tue, 3 Dec 2019 08:39:40 +0200
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Sam Ravnborg <sam@ravnborg.org>
Subject: Re: [PATCH v1 03/26] drm/panel: simple: use drm_panel backlight
 support
Message-ID: <20191203063940.GC4730@pendragon.ideasonboard.com>
References: <20191202193230.21310-1-sam@ravnborg.org>
 <20191202193230.21310-4-sam@ravnborg.org>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191202193230.21310-4-sam@ravnborg.org>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1575355186;
 bh=NKJAGVwnbEA5vcxRJnNw/eHXqWVE7J8TQMaQ6WQ1rME=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=D14DfDQGqmcPI/cWzbaSwFmIu2oGRWeQ94ouc59CDImFZ8t3SX6+BbiXsn2fRsOZk
 Tnv6M49uf5jSzTHOa93zxLqOpHWEUA/ltoic1as76ib31vB5+Oo8hU9R8nUV2Cj5eu
 z/3+mXvqwo0HuNNUiRzpAUwj6s6qiSBMTuin2TnY=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Neil Armstrong <narmstrong@baylibre.com>, David Airlie <airlied@linux.ie>,
 dri-devel@lists.freedesktop.org, Thierry Reding <thierry.reding@gmail.com>,
 linux-samsung-soc@vger.kernel.org, linux-rockchip@lists.infradead.org,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, NXP Linux Team <linux-imx@nxp.com>,
 Jagan Teki <jagan@amarulasolutions.com>, Jitao Shi <jitao.shi@mediatek.com>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 linux-mediatek@lists.infradead.org, Abhinav Kumar <abhinavk@codeaurora.org>,
 linux-tegra@vger.kernel.org, Sean Paul <sean@poorly.run>,
 linux-arm-kernel@lists.infradead.org, Purism Kernel Team <kernel@puri.sm>,
 linux-renesas-soc@vger.kernel.org,
 Boris Brezillon <boris.brezillon@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgU2FtLAoKVGhhbmsgeW91IGZvciB0aGUgcGF0Y2guCgpPbiBNb24sIERlYyAwMiwgMjAxOSBh
dCAwODozMjowN1BNICswMTAwLCBTYW0gUmF2bmJvcmcgd3JvdGU6Cj4gVXNlIGRybV9wYW5lbCBp
bmZyYXN0cnVjdHVyZSBmb3IgYmFja2xpZ2h0Lgo+IFJlcGxhY2UgZGlyZWN0IGNhbGxzIHdpdGgg
ZHJtX3BhbmVsXyooKSBjYWxscwo+IHRvIHV0aWxpemUgdGhlIGRybV9wYW5lbCBzdXBwb3J0Lgo+
IAo+IFNpZ25lZC1vZmYtYnk6IFNhbSBSYXZuYm9yZyA8c2FtQHJhdm5ib3JnLm9yZz4KPiBjYzog
TGF1cmVudCBQaW5jaGFydCA8bGF1cmVudC5waW5jaGFydEBpZGVhc29uYm9hcmQuY29tPgo+IENj
OiBUaGllcnJ5IFJlZGluZyA8dGhpZXJyeS5yZWRpbmdAZ21haWwuY29tPgo+IENjOiBTYW0gUmF2
bmJvcmcgPHNhbUByYXZuYm9yZy5vcmc+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9w
YW5lbC1zaW1wbGUuYyB8IDUwICsrKysrKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiAgMSBmaWxl
IGNoYW5nZWQsIDExIGluc2VydGlvbnMoKyksIDM5IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtc2ltcGxlLmMgYi9kcml2ZXJzL2dwdS9k
cm0vcGFuZWwvcGFuZWwtc2ltcGxlLmMKPiBpbmRleCA3MmY2OTcwOWYzNDkuLmE1ZGY2ZDZkZDQ1
NSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtc2ltcGxlLmMKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtc2ltcGxlLmMKPiBAQCAtMjEsNyArMjEs
NiBAQAo+ICAgKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCj4gICAqLwo+ICAKPiAtI2luY2x1
ZGUgPGxpbnV4L2JhY2tsaWdodC5oPgo+ICAjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KPiAgI2lu
Y2x1ZGUgPGxpbnV4L2dwaW8vY29uc3VtZXIuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5o
Pgo+IEBAIC0xMDUsNyArMTA0LDYgQEAgc3RydWN0IHBhbmVsX3NpbXBsZSB7Cj4gIAo+ICAJY29u
c3Qgc3RydWN0IHBhbmVsX2Rlc2MgKmRlc2M7Cj4gIAo+IC0Jc3RydWN0IGJhY2tsaWdodF9kZXZp
Y2UgKmJhY2tsaWdodDsKPiAgCXN0cnVjdCByZWd1bGF0b3IgKnN1cHBseTsKPiAgCXN0cnVjdCBp
MmNfYWRhcHRlciAqZGRjOwo+ICAKPiBAQCAtMjM2LDEyICsyMzQsNiBAQCBzdGF0aWMgaW50IHBh
bmVsX3NpbXBsZV9kaXNhYmxlKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQo+ICAJaWYgKCFwLT5l
bmFibGVkKQo+ICAJCXJldHVybiAwOwo+ICAKPiAtCWlmIChwLT5iYWNrbGlnaHQpIHsKPiAtCQlw
LT5iYWNrbGlnaHQtPnByb3BzLnBvd2VyID0gRkJfQkxBTktfUE9XRVJET1dOOwo+IC0JCXAtPmJh
Y2tsaWdodC0+cHJvcHMuc3RhdGUgfD0gQkxfQ09SRV9GQkJMQU5LOwo+IC0JCWJhY2tsaWdodF91
cGRhdGVfc3RhdHVzKHAtPmJhY2tsaWdodCk7Cj4gLQl9Cj4gLQo+ICAJaWYgKHAtPmRlc2MtPmRl
bGF5LmRpc2FibGUpCj4gIAkJbXNsZWVwKHAtPmRlc2MtPmRlbGF5LmRpc2FibGUpOwo+ICAKPiBA
QCAtMzA3LDEyICsyOTksNiBAQCBzdGF0aWMgaW50IHBhbmVsX3NpbXBsZV9lbmFibGUoc3RydWN0
IGRybV9wYW5lbCAqcGFuZWwpCj4gIAlpZiAocC0+ZGVzYy0+ZGVsYXkuZW5hYmxlKQo+ICAJCW1z
bGVlcChwLT5kZXNjLT5kZWxheS5lbmFibGUpOwo+ICAKPiAtCWlmIChwLT5iYWNrbGlnaHQpIHsK
PiAtCQlwLT5iYWNrbGlnaHQtPnByb3BzLnN0YXRlICY9IH5CTF9DT1JFX0ZCQkxBTks7Cj4gLQkJ
cC0+YmFja2xpZ2h0LT5wcm9wcy5wb3dlciA9IEZCX0JMQU5LX1VOQkxBTks7Cj4gLQkJYmFja2xp
Z2h0X3VwZGF0ZV9zdGF0dXMocC0+YmFja2xpZ2h0KTsKPiAtCX0KPiAtCj4gIAlwLT5lbmFibGVk
ID0gdHJ1ZTsKPiAgCj4gIAlyZXR1cm4gMDsKPiBAQCAtNDE0LDkgKzQwMCw5IEBAIHN0YXRpYyB2
b2lkIHBhbmVsX3NpbXBsZV9wYXJzZV9wYW5lbF90aW1pbmdfbm9kZShzdHJ1Y3QgZGV2aWNlICpk
ZXYsCj4gIAo+ICBzdGF0aWMgaW50IHBhbmVsX3NpbXBsZV9wcm9iZShzdHJ1Y3QgZGV2aWNlICpk
ZXYsIGNvbnN0IHN0cnVjdCBwYW5lbF9kZXNjICpkZXNjKQo+ICB7Cj4gLQlzdHJ1Y3QgZGV2aWNl
X25vZGUgKmJhY2tsaWdodCwgKmRkYzsKPiAgCXN0cnVjdCBwYW5lbF9zaW1wbGUgKnBhbmVsOwo+
ICAJc3RydWN0IGRpc3BsYXlfdGltaW5nIGR0Owo+ICsJc3RydWN0IGRldmljZV9ub2RlICpkZGM7
Cj4gIAlpbnQgZXJyOwo+ICAKPiAgCXBhbmVsID0gZGV2bV9remFsbG9jKGRldiwgc2l6ZW9mKCpw
YW5lbCksIEdGUF9LRVJORUwpOwo+IEBAIC00NDIsMjQgKzQyOCwxMyBAQCBzdGF0aWMgaW50IHBh
bmVsX3NpbXBsZV9wcm9iZShzdHJ1Y3QgZGV2aWNlICpkZXYsIGNvbnN0IHN0cnVjdCBwYW5lbF9k
ZXNjICpkZXNjKQo+ICAJCXJldHVybiBlcnI7Cj4gIAl9Cj4gIAo+IC0JYmFja2xpZ2h0ID0gb2Zf
cGFyc2VfcGhhbmRsZShkZXYtPm9mX25vZGUsICJiYWNrbGlnaHQiLCAwKTsKPiAtCWlmIChiYWNr
bGlnaHQpIHsKPiAtCQlwYW5lbC0+YmFja2xpZ2h0ID0gb2ZfZmluZF9iYWNrbGlnaHRfYnlfbm9k
ZShiYWNrbGlnaHQpOwo+IC0JCW9mX25vZGVfcHV0KGJhY2tsaWdodCk7Cj4gLQo+IC0JCWlmICgh
cGFuZWwtPmJhY2tsaWdodCkKPiAtCQkJcmV0dXJuIC1FUFJPQkVfREVGRVI7Cj4gLQl9Cj4gLQo+
ICAJZGRjID0gb2ZfcGFyc2VfcGhhbmRsZShkZXYtPm9mX25vZGUsICJkZGMtaTJjLWJ1cyIsIDAp
Owo+ICAJaWYgKGRkYykgewo+ICAJCXBhbmVsLT5kZGMgPSBvZl9maW5kX2kyY19hZGFwdGVyX2J5
X25vZGUoZGRjKTsKPiAgCQlvZl9ub2RlX3B1dChkZGMpOwo+ICAKPiAtCQlpZiAoIXBhbmVsLT5k
ZGMpIHsKPiAtCQkJZXJyID0gLUVQUk9CRV9ERUZFUjsKPiAtCQkJZ290byBmcmVlX2JhY2tsaWdo
dDsKPiAtCQl9Cj4gKwkJaWYgKCFwYW5lbC0+ZGRjKQo+ICsJCQlyZXR1cm4gLUVQUk9CRV9ERUZF
UjsKPiAgCX0KPiAgCj4gIAlpZiAoIW9mX2dldF9kaXNwbGF5X3RpbWluZyhkZXYtPm9mX25vZGUs
ICJwYW5lbC10aW1pbmciLCAmZHQpKQo+IEBAIC00NjgsNiArNDQzLDEwIEBAIHN0YXRpYyBpbnQg
cGFuZWxfc2ltcGxlX3Byb2JlKHN0cnVjdCBkZXZpY2UgKmRldiwgY29uc3Qgc3RydWN0IHBhbmVs
X2Rlc2MgKmRlc2MpCj4gIAlkcm1fcGFuZWxfaW5pdCgmcGFuZWwtPmJhc2UsIGRldiwgJnBhbmVs
X3NpbXBsZV9mdW5jcywKPiAgCQkgICAgICAgZGVzYy0+Y29ubmVjdG9yX3R5cGUpOwo+ICAKPiAr
CWVyciA9IGRybV9wYW5lbF9vZl9iYWNrbGlnaHQoJnBhbmVsLT5iYXNlKTsKPiArCWlmIChlcnIp
Cj4gKwkJZ290byBmcmVlX2RkYzsKPiArCj4gIAllcnIgPSBkcm1fcGFuZWxfYWRkKCZwYW5lbC0+
YmFzZSk7Cj4gIAlpZiAoZXJyIDwgMCkKPiAgCQlnb3RvIGZyZWVfZGRjOwo+IEBAIC00NzksOSAr
NDU4LDYgQEAgc3RhdGljIGludCBwYW5lbF9zaW1wbGVfcHJvYmUoc3RydWN0IGRldmljZSAqZGV2
LCBjb25zdCBzdHJ1Y3QgcGFuZWxfZGVzYyAqZGVzYykKPiAgZnJlZV9kZGM6Cj4gIAlpZiAocGFu
ZWwtPmRkYykKPiAgCQlwdXRfZGV2aWNlKCZwYW5lbC0+ZGRjLT5kZXYpOwo+IC1mcmVlX2JhY2ts
aWdodDoKPiAtCWlmIChwYW5lbC0+YmFja2xpZ2h0KQo+IC0JCXB1dF9kZXZpY2UoJnBhbmVsLT5i
YWNrbGlnaHQtPmRldik7Cj4gIAo+ICAJcmV0dXJuIGVycjsKPiAgfQo+IEBAIC00OTEsMTYgKzQ2
NywxMiBAQCBzdGF0aWMgaW50IHBhbmVsX3NpbXBsZV9yZW1vdmUoc3RydWN0IGRldmljZSAqZGV2
KQo+ICAJc3RydWN0IHBhbmVsX3NpbXBsZSAqcGFuZWwgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsK
PiAgCj4gIAlkcm1fcGFuZWxfcmVtb3ZlKCZwYW5lbC0+YmFzZSk7Cj4gLQo+IC0JcGFuZWxfc2lt
cGxlX2Rpc2FibGUoJnBhbmVsLT5iYXNlKTsKPiAtCXBhbmVsX3NpbXBsZV91bnByZXBhcmUoJnBh
bmVsLT5iYXNlKTsKPiArCWRybV9wYW5lbF9kaXNhYmxlKCZwYW5lbC0+YmFzZSk7Cj4gKwlkcm1f
cGFuZWxfdW5wcmVwYXJlKCZwYW5lbC0+YmFzZSk7Cj4gIAo+ICAJaWYgKHBhbmVsLT5kZGMpCj4g
IAkJcHV0X2RldmljZSgmcGFuZWwtPmRkYy0+ZGV2KTsKPiAgCj4gLQlpZiAocGFuZWwtPmJhY2ts
aWdodCkKPiAtCQlwdXRfZGV2aWNlKCZwYW5lbC0+YmFja2xpZ2h0LT5kZXYpOwo+IC0KPiAgCXJl
dHVybiAwOwo+ICB9Cj4gIAo+IEBAIC01MDgsOCArNDgwLDggQEAgc3RhdGljIHZvaWQgcGFuZWxf
c2ltcGxlX3NodXRkb3duKHN0cnVjdCBkZXZpY2UgKmRldikKPiAgewo+ICAJc3RydWN0IHBhbmVs
X3NpbXBsZSAqcGFuZWwgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiAgCj4gLQlwYW5lbF9zaW1w
bGVfZGlzYWJsZSgmcGFuZWwtPmJhc2UpOwo+IC0JcGFuZWxfc2ltcGxlX3VucHJlcGFyZSgmcGFu
ZWwtPmJhc2UpOwo+ICsJZHJtX3BhbmVsX2Rpc2FibGUoJnBhbmVsLT5iYXNlKTsKPiArCWRybV9w
YW5lbF91bnByZXBhcmUoJnBhbmVsLT5iYXNlKTsKCldpdGhvdXQgeW91ciBwYW5lbCBkb3VibGUt
ZGlzYWJsZSBwcm90ZWN0aW9uIHNlcmllcywgeW91IHJpc2sgZGlzYWJsaW5nCnRoZSBiYWNrbGln
aHQgdHdpY2UuIEkgdGhpbmsgYmFja2xpZ2h0X2Rpc2FibGUoKSB3aWxsIHdvcmsgZmluZSwgYnV0
IHlvdQptYXkgd2FudCB0byBkb3VibGUtY2hlY2suCgpXaXRoIHRoaXMgY2hlY2tlZCAoYW5kIHBv
c3NpYmx5IGFkZHJlc3NlZCBpZiBuZWVkZWQpLAoKUmV2aWV3ZWQtYnk6IExhdXJlbnQgUGluY2hh
cnQgPGxhdXJlbnQucGluY2hhcnRAaWRlYXNvbmJvYXJkLmNvbT4KCj4gIH0KPiAgCj4gIHN0YXRp
YyBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSBhbXBpcmVfYW1fNDgwMjcyaDN0bXF3X3Qw
MWhfbW9kZSA9IHsKCi0tIApSZWdhcmRzLAoKTGF1cmVudCBQaW5jaGFydApfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0
CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
