Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 97B681200B
	for <lists+dri-devel@lfdr.de>; Thu,  2 May 2019 18:24:27 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 88EDA89708;
	Thu,  2 May 2019 16:24:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from foss.arm.com (foss.arm.com [217.140.101.70])
 by gabe.freedesktop.org (Postfix) with ESMTP id AC2EF89708
 for <dri-devel@lists.freedesktop.org>; Thu,  2 May 2019 16:24:24 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.72.51.249])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 92A1AA78;
 Thu,  2 May 2019 09:24:24 -0700 (PDT)
Received: from e110455-lin.cambridge.arm.com (usa-sjc-imap-foss1.foss.arm.com
 [10.72.51.249])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 3BB1B3F5AF;
 Thu,  2 May 2019 09:24:24 -0700 (PDT)
Received: by e110455-lin.cambridge.arm.com (Postfix, from userid 1000)
 id 7776268240E; Thu,  2 May 2019 17:24:22 +0100 (BST)
Date: Thu, 2 May 2019 17:24:22 +0100
From: Liviu Dudau <Liviu.Dudau@arm.com>
To: Ben Davis <Ben.Davis@arm.com>
Subject: Re: [PATCH v4 2/2] drm/malidp: Enable writeback scaling
Message-ID: <20190502162422.GZ15144@e110455-lin.cambridge.arm.com>
References: <1556813386-18823-1-git-send-email-ben.davis@arm.com>
 <1556813386-18823-3-git-send-email-ben.davis@arm.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <1556813386-18823-3-git-send-email-ben.davis@arm.com>
User-Agent: Mutt/1.11.4 (2019-03-13)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: "airlied@linux.ie" <airlied@linux.ie>,
 "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
 "dri-devel@lists.freedesktop.org" <dri-devel@lists.freedesktop.org>,
 "maxime.ripard@bootlin.com" <maxime.ripard@bootlin.com>, nd <nd@arm.com>,
 "sean@poorly.run" <sean@poorly.run>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBNYXkgMDIsIDIwMTkgYXQgMDU6MTA6MTBQTSArMDEwMCwgQmVuIERhdmlzIHdyb3Rl
Ogo+IFRoZSBwaGFzZSBzZXR0aW5nIHBhcnQgb2YgbWFsaWRwX2NydGNfYXRvbWljX2NoZWNrX3Nj
YWxpbmcgaXMgcmVmYWN0b3JlZAo+IHRvIGFsbG93IHVzZSBpbiB3cml0ZWJhY2sgc2NhbGluZy4K
PiAKPiBBbHNvIHRoZSBlbmFibGVfbWVtd3JpdGUgZnVuY3Rpb24gcHJvdG90eXBlIGlzIHNpbXBs
aWZpZWQgYnkgZGlyZWN0bHkKPiBwYXNzaW5nIG13X3N0YXRlLgo+IAo+IFNpZ25lZC1vZmYtYnk6
IEJlbiBEYXZpcyA8YmVuLmRhdmlzQGFybS5jb20+CgpSZXZpZXdlZC1ieTogTGl2aXUgRHVkYXUg
PGxpdml1LmR1ZGF1QGFybS5jb20+CgpJIHdpbGwgcHVsbCB0aGlzIHNlcmllcyB0aGUgbWFsaS1k
cCB0cmVlIGFmdGVyIG1vcmUgcGVvcGxlIGhhZCBhIGNoYW5jZQp0byByZXZpZXcgaXQuIEkgdGhp
bmsgdGhlIG5leHQgdGhpbmcgdG8gZG8gd291bGQgYmUgdG8gY29tZSB1cCB3aXRoIGEKdGVzdCBp
biBpZ3QgZm9yIHRoZXNlIHByb3BlcnRpZXMuCgpUaGFua3MsCkxpdml1Cgo+IC0tLQo+ICBkcml2
ZXJzL2dwdS9kcm0vYXJtL21hbGlkcF9jcnRjLmMgfCAgNDcgKysrKysrKystLS0tLS0tCj4gIGRy
aXZlcnMvZ3B1L2RybS9hcm0vbWFsaWRwX2Rydi5jICB8ICAxMCArKystCj4gIGRyaXZlcnMvZ3B1
L2RybS9hcm0vbWFsaWRwX2Rydi5oICB8ICAgMiArCj4gIGRyaXZlcnMvZ3B1L2RybS9hcm0vbWFs
aWRwX2h3LmMgICB8ICA0NSArKysrKysrKysrLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL2FybS9t
YWxpZHBfaHcuaCAgIHwgIDE5ICsrKysrKy0KPiAgZHJpdmVycy9ncHUvZHJtL2FybS9tYWxpZHBf
bXcuYyAgIHwgMTE3ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tCj4gIGRy
aXZlcnMvZ3B1L2RybS9hcm0vbWFsaWRwX3JlZ3MuaCB8ICAgMSArCj4gIDcgZmlsZXMgY2hhbmdl
ZCwgMTc2IGluc2VydGlvbnMoKyksIDY1IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vYXJtL21hbGlkcF9jcnRjLmMgYi9kcml2ZXJzL2dwdS9kcm0vYXJtL21h
bGlkcF9jcnRjLmMKPiBpbmRleCAzZjY1OTk2Li42NTQ4ODU5IDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hcm0vbWFsaWRwX2NydGMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hcm0v
bWFsaWRwX2NydGMuYwo+IEBAIC0yNjUsNiArMjY1LDI5IEBAIHN0YXRpYyBpbnQgbWFsaWRwX2Ny
dGNfYXRvbWljX2NoZWNrX2N0bShzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4gIAlyZXR1cm4gMDsK
PiAgfQo+ICAKPiArdm9pZCBtYWxpZHBfc2V0X3NlX2NvbmZpZ19waGFzZShzdHJ1Y3QgbWFsaWRw
X3NlX2NvbmZpZyAqcykKPiArewo+ICsjZGVmaW5lIFNFX05fUEhBU0UgNAo+ICsjZGVmaW5lIFNF
X1NISUZUX05fUEhBU0UgMTIKPiArCXUzMiBwaGFzZTsKPiArCj4gKwkvKiBDYWxjdWxhdGUgaW5p
dGlhbF9waGFzZSBhbmQgZGVsdGFfcGhhc2UgZm9yIGhvcml6b250YWwuICovCj4gKwlwaGFzZSA9
IHMtPmlucHV0X3c7Cj4gKwlzLT5oX2luaXRfcGhhc2UgPSAoKHBoYXNlIDw8IFNFX05fUEhBU0Up
IC8gcy0+b3V0cHV0X3cgKyAxKSAvIDI7Cj4gKwo+ICsJcGhhc2UgPDw9IChTRV9TSElGVF9OX1BI
QVNFICsgU0VfTl9QSEFTRSk7Cj4gKwlzLT5oX2RlbHRhX3BoYXNlID0gcGhhc2UgLyBzLT5vdXRw
dXRfdzsKPiArCj4gKwkvKiBTYW1lIGZvciB2ZXJ0aWNhbC4gKi8KPiArCXBoYXNlID0gcy0+aW5w
dXRfaDsKPiArCXMtPnZfaW5pdF9waGFzZSA9ICgocGhhc2UgPDwgU0VfTl9QSEFTRSkgLyBzLT5v
dXRwdXRfaCArIDEpIC8gMjsKPiArCj4gKwlwaGFzZSA8PD0gKFNFX1NISUZUX05fUEhBU0UgKyBT
RV9OX1BIQVNFKTsKPiArCXMtPnZfZGVsdGFfcGhhc2UgPSBwaGFzZSAvIHMtPm91dHB1dF9oOwo+
ICsjdW5kZWYgU0VfTl9QSEFTRQo+ICsjdW5kZWYgU0VfU0hJRlRfTl9QSEFTRQo+ICt9Cj4gKwo+
ICBzdGF0aWMgaW50IG1hbGlkcF9jcnRjX2F0b21pY19jaGVja19zY2FsaW5nKHN0cnVjdCBkcm1f
Y3J0YyAqY3J0YywKPiAgCQkJCQkgICAgc3RydWN0IGRybV9jcnRjX3N0YXRlICpzdGF0ZSkKPiAg
ewo+IEBAIC0yOTEsNyArMzE0LDYgQEAgc3RhdGljIGludCBtYWxpZHBfY3J0Y19hdG9taWNfY2hl
Y2tfc2NhbGluZyhzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4gIAo+ICAJZHJtX2F0b21pY19jcnRj
X3N0YXRlX2Zvcl9lYWNoX3BsYW5lX3N0YXRlKHBsYW5lLCBwc3RhdGUsIHN0YXRlKSB7Cj4gIAkJ
c3RydWN0IG1hbGlkcF9wbGFuZSAqbXAgPSB0b19tYWxpZHBfcGxhbmUocGxhbmUpOwo+IC0JCXUz
MiBwaGFzZTsKPiAgCj4gIAkJaWYgKCEobXAtPmxheWVyLT5pZCAmIHNjYWxpbmcpKQo+ICAJCQlj
b250aW51ZTsKPiBAQCAtMzE5LDI3ICszNDEsOCBAQCBzdGF0aWMgaW50IG1hbGlkcF9jcnRjX2F0
b21pY19jaGVja19zY2FsaW5nKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKPiAgCQlzLT5vdXRwdXRf
dyA9IHBzdGF0ZS0+Y3J0Y193Owo+ICAJCXMtPm91dHB1dF9oID0gcHN0YXRlLT5jcnRjX2g7Cj4g
IAo+IC0jZGVmaW5lIFNFX05fUEhBU0UgNAo+IC0jZGVmaW5lIFNFX1NISUZUX05fUEhBU0UgMTIK
PiAtCQkvKiBDYWxjdWxhdGUgaW5pdGlhbF9waGFzZSBhbmQgZGVsdGFfcGhhc2UgZm9yIGhvcml6
b250YWwuICovCj4gLQkJcGhhc2UgPSBzLT5pbnB1dF93Owo+IC0JCXMtPmhfaW5pdF9waGFzZSA9
Cj4gLQkJCQkoKHBoYXNlIDw8IFNFX05fUEhBU0UpIC8gcy0+b3V0cHV0X3cgKyAxKSAvIDI7Cj4g
LQo+IC0JCXBoYXNlID0gcy0+aW5wdXRfdzsKPiAtCQlwaGFzZSA8PD0gKFNFX1NISUZUX05fUEhB
U0UgKyBTRV9OX1BIQVNFKTsKPiAtCQlzLT5oX2RlbHRhX3BoYXNlID0gcGhhc2UgLyBzLT5vdXRw
dXRfdzsKPiAtCj4gLQkJLyogU2FtZSBmb3IgdmVydGljYWwuICovCj4gLQkJcGhhc2UgPSBzLT5p
bnB1dF9oOwo+IC0JCXMtPnZfaW5pdF9waGFzZSA9Cj4gLQkJCQkoKHBoYXNlIDw8IFNFX05fUEhB
U0UpIC8gcy0+b3V0cHV0X2ggKyAxKSAvIDI7Cj4gLQo+IC0JCXBoYXNlID0gcy0+aW5wdXRfaDsK
PiAtCQlwaGFzZSA8PD0gKFNFX1NISUZUX05fUEhBU0UgKyBTRV9OX1BIQVNFKTsKPiAtCQlzLT52
X2RlbHRhX3BoYXNlID0gcGhhc2UgLyBzLT5vdXRwdXRfaDsKPiAtI3VuZGVmIFNFX05fUEhBU0UK
PiAtI3VuZGVmIFNFX1NISUZUX05fUEhBU0UKPiArCj4gKwkJbWFsaWRwX3NldF9zZV9jb25maWdf
cGhhc2Uocyk7Cj4gIAkJcy0+cGxhbmVfc3JjX2lkID0gbXAtPmxheWVyLT5pZDsKPiAgCX0KPiAg
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hcm0vbWFsaWRwX2Rydi5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FybS9tYWxpZHBfZHJ2LmMKPiBpbmRleCBkMzdmZjlkLi5lMjQ2NWU5IDEwMDY0
NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hcm0vbWFsaWRwX2Rydi5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FybS9tYWxpZHBfZHJ2LmMKPiBAQCAtMTM4LDcgKzEzOCw3IEBAIHN0YXRpYyB2
b2lkIG1hbGlkcF9hdG9taWNfY29tbWl0X3NlX2NvbmZpZyhzdHJ1Y3QgZHJtX2NydGMgKmNydGMs
Cj4gIAl1MzIgdmFsOwo+ICAKPiAgCS8qIFNldCBTRV9DT05UUk9MICovCj4gLQlpZiAoIXMtPnNj
YWxlX2VuYWJsZSkgewo+ICsJaWYgKCFzLT5zY2FsZV9lbmFibGUgJiYgIXMtPndiX3NjYWxlX2Vu
YWJsZSkgewo+ICAJCXZhbCA9IG1hbGlkcF9od19yZWFkKGh3ZGV2LCBzZV9jb250cm9sKTsKPiAg
CQl2YWwgJj0gfk1BTElEUF9TRV9TQ0FMSU5HX0VOOwo+ICAJCW1hbGlkcF9od193cml0ZShod2Rl
diwgdmFsLCBzZV9jb250cm9sKTsKPiBAQCAtMTQ3LDEyICsxNDcsMTYgQEAgc3RhdGljIHZvaWQg
bWFsaWRwX2F0b21pY19jb21taXRfc2VfY29uZmlnKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKPiAg
Cj4gIAlod2Rldi0+aHctPnNlX3NldF9zY2FsaW5nX2NvZWZmcyhod2Rldiwgcywgb2xkX3MpOwo+
ICAJdmFsID0gbWFsaWRwX2h3X3JlYWQoaHdkZXYsIHNlX2NvbnRyb2wpOwo+IC0JdmFsIHw9IE1B
TElEUF9TRV9TQ0FMSU5HX0VOIHwgTUFMSURQX1NFX0FMUEhBX0VOOwo+ICsJdmFsIHw9IE1BTElE
UF9TRV9TQ0FMSU5HX0VOOwo+ICAKPiAgCXZhbCAmPSB+TUFMSURQX1NFX0VOSChNQUxJRFBfU0Vf
RU5IX01BU0spOwo+ICAJdmFsIHw9IHMtPmVuaGFuY2VyX2VuYWJsZSA/IE1BTElEUF9TRV9FTkgo
MykgOiAwOwo+ICAKPiAtCXZhbCB8PSBNQUxJRFBfU0VfUkdCT19JRl9FTjsKPiArCWlmIChzLT5z
Y2FsZV9lbmFibGUpCj4gKwkJdmFsIHw9IChNQUxJRFBfU0VfUkdCT19JRl9FTiB8IE1BTElEUF9T
RV9BTFBIQV9FTik7Cj4gKwllbHNlCj4gKwkJdmFsICY9IH4oKE1BTElEUF9TRV9SR0JPX0lGX0VO
IHwgTUFMSURQX1NFX0FMUEhBX0VOKSk7Cj4gKwo+ICAJbWFsaWRwX2h3X3dyaXRlKGh3ZGV2LCB2
YWwsIHNlX2NvbnRyb2wpOwo+ICAKPiAgCS8qIFNldCBJTl9TSVpFICYgT1VUX1NJWkUuICovCj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hcm0vbWFsaWRwX2Rydi5oIGIvZHJpdmVycy9n
cHUvZHJtL2FybS9tYWxpZHBfZHJ2LmgKPiBpbmRleCAzOTFkNmZmLi45MjRmODMxIDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hcm0vbWFsaWRwX2Rydi5oCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FybS9tYWxpZHBfZHJ2LmgKPiBAQCAtMTA0LDYgKzEwNCw4IEBAIHN0cnVjdCBtYWxp
ZHBfY3J0Y19zdGF0ZSB7Cj4gIGludCBtYWxpZHBfZGVfcGxhbmVzX2luaXQoc3RydWN0IGRybV9k
ZXZpY2UgKmRybSk7Cj4gIGludCBtYWxpZHBfY3J0Y19pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpk
cm0pOwo+ICAKPiArdm9pZCBtYWxpZHBfc2V0X3NlX2NvbmZpZ19waGFzZShzdHJ1Y3QgbWFsaWRw
X3NlX2NvbmZpZyAqcyk7Cj4gKwo+ICBib29sIG1hbGlkcF9od19mb3JtYXRfaXNfbGluZWFyX29u
bHkodTMyIGZvcm1hdCk7Cj4gIGJvb2wgbWFsaWRwX2h3X2Zvcm1hdF9pc19hZmJjX29ubHkodTMy
IGZvcm1hdCk7Cj4gIAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYXJtL21hbGlkcF9o
dy5jIGIvZHJpdmVycy9ncHUvZHJtL2FybS9tYWxpZHBfaHcuYwo+IGluZGV4IDFhMzY3MTguLjZm
NTljMGUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FybS9tYWxpZHBfaHcuYwo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9hcm0vbWFsaWRwX2h3LmMKPiBAQCAtNDk3LDEzICs0OTcsMTgg
QEAgc3RhdGljIGxvbmcgbWFsaWRwNTAwX3NlX2NhbGNfbWNsayhzdHJ1Y3QgbWFsaWRwX2h3X2Rl
dmljZSAqaHdkZXYsCj4gIAlyZXR1cm4gcmV0Owo+ICB9Cj4gIAo+IC1zdGF0aWMgaW50IG1hbGlk
cDUwMF9lbmFibGVfbWVtd3JpdGUoc3RydWN0IG1hbGlkcF9od19kZXZpY2UgKmh3ZGV2LAo+IC0J
CQkJICAgICBkbWFfYWRkcl90ICphZGRycywgczMyICpwaXRjaGVzLAo+IC0JCQkJICAgICBpbnQg
bnVtX3BsYW5lcywgdTE2IHcsIHUxNiBoLCB1MzIgZm10X2lkLAo+IC0JCQkJICAgICBjb25zdCBz
MTYgKnJnYjJ5dXZfY29lZmZzKQo+ICtzdGF0aWMgaW50IG1hbGlkcDUwMF9lbmFibGVfbWVtd3Jp
dGUoc3RydWN0IG1hbGlkcF9od19kZXZpY2UgKmh3ZGV2LCB1MTYgdywgdTE2IGgsCj4gKwkJCQkg
ICAgIHN0cnVjdCBtYWxpZHBfbXdfY29ubmVjdG9yX3N0YXRlICptd19zdGF0ZSkKPiAgewo+ICsK
PiArCWludCBudW1fcGxhbmVzID0gbXdfc3RhdGUtPm5fcGxhbmVzOwo+ICsJZG1hX2FkZHJfdCAq
YWRkcnMgPSBtd19zdGF0ZS0+YWRkcnM7Cj4gKwlzMzIgKnBpdGNoZXMgPSBtd19zdGF0ZS0+cGl0
Y2hlczsKPiArCXUzMiBmbXRfaWQgPSBtd19zdGF0ZS0+Zm9ybWF0Owo+ICAJdTMyIGJhc2UgPSBN
QUxJRFA1MDBfU0VfTUVNV1JJVEVfQkFTRTsKPiAgCXUzMiBkZV9iYXNlID0gbWFsaWRwX2dldF9i
bG9ja19iYXNlKGh3ZGV2LCBNQUxJRFBfREVfQkxPQ0spOwo+ICsJY29uc3QgczE2ICpyZ2IyeXV2
X2NvZWZmcyA9ICFtd19zdGF0ZS0+cmdiMnl1dl9pbml0aWFsaXplZCA/Cj4gKwkJCQkJbXdfc3Rh
dGUtPnJnYjJ5dXZfY29lZmZzIDogTlVMTDsKPiAgCj4gIAkvKiBlbmFibGUgdGhlIHNjYWxpbmcg
ZW5naW5lIGJsb2NrICovCj4gIAltYWxpZHBfaHdfc2V0Yml0cyhod2RldiwgTUFMSURQX1NDQUxF
X0VOR0lORV9FTiwgZGVfYmFzZSArIE1BTElEUF9ERV9ESVNQTEFZX0ZVTkMpOwo+IEBAIC04NDcs
MTMgKzg1MiwxOCBAQCBzdGF0aWMgbG9uZyBtYWxpZHA1NTBfc2VfY2FsY19tY2xrKHN0cnVjdCBt
YWxpZHBfaHdfZGV2aWNlICpod2RldiwKPiAgCXJldHVybiByZXQ7Cj4gIH0KPiAgCj4gLXN0YXRp
YyBpbnQgbWFsaWRwNTUwX2VuYWJsZV9tZW13cml0ZShzdHJ1Y3QgbWFsaWRwX2h3X2RldmljZSAq
aHdkZXYsCj4gLQkJCQkgICAgIGRtYV9hZGRyX3QgKmFkZHJzLCBzMzIgKnBpdGNoZXMsCj4gLQkJ
CQkgICAgIGludCBudW1fcGxhbmVzLCB1MTYgdywgdTE2IGgsIHUzMiBmbXRfaWQsCj4gLQkJCQkg
ICAgIGNvbnN0IHMxNiAqcmdiMnl1dl9jb2VmZnMpCj4gK3N0YXRpYyBpbnQgbWFsaWRwNTUwX2Vu
YWJsZV9tZW13cml0ZShzdHJ1Y3QgbWFsaWRwX2h3X2RldmljZSAqaHdkZXYsIHUxNiB3LCB1MTYg
aCwKPiArCQkJCSAgICAgc3RydWN0IG1hbGlkcF9td19jb25uZWN0b3Jfc3RhdGUgKm13X3N0YXRl
KQo+ICB7Cj4gKwlpbnQgbnVtX3BsYW5lcyA9IG13X3N0YXRlLT5uX3BsYW5lczsKPiArCWJvb2wg
c2NhbGluZyA9IG13X3N0YXRlLT53Yl9zY2FsZV9lbmFibGU7Cj4gKwlkbWFfYWRkcl90ICphZGRy
cyA9IG13X3N0YXRlLT5hZGRyczsKPiArCXMzMiAqcGl0Y2hlcyA9IG13X3N0YXRlLT5waXRjaGVz
Owo+ICsJdTMyIGZtdF9pZCA9IG13X3N0YXRlLT5mb3JtYXQ7Cj4gIAl1MzIgYmFzZSA9IE1BTElE
UDU1MF9TRV9NRU1XUklURV9CQVNFOwo+ICAJdTMyIGRlX2Jhc2UgPSBtYWxpZHBfZ2V0X2Jsb2Nr
X2Jhc2UoaHdkZXYsIE1BTElEUF9ERV9CTE9DSyk7Cj4gKwljb25zdCBzMTYgKnJnYjJ5dXZfY29l
ZmZzID0gIW13X3N0YXRlLT5yZ2IyeXV2X2luaXRpYWxpemVkID8KPiArCQkJCQltd19zdGF0ZS0+
cmdiMnl1dl9jb2VmZnMgOiBOVUxMOwo+ICAKPiAgCS8qIGVuYWJsZSB0aGUgc2NhbGluZyBlbmdp
bmUgYmxvY2sgKi8KPiAgCW1hbGlkcF9od19zZXRiaXRzKGh3ZGV2LCBNQUxJRFBfU0NBTEVfRU5H
SU5FX0VOLCBkZV9iYXNlICsgTUFMSURQX0RFX0RJU1BMQVlfRlVOQyk7Cj4gQEAgLTg3NiwxMCAr
ODg2LDE4IEBAIHN0YXRpYyBpbnQgbWFsaWRwNTUwX2VuYWJsZV9tZW13cml0ZShzdHJ1Y3QgbWFs
aWRwX2h3X2RldmljZSAqaHdkZXYsCj4gIAkJV0FSTigxLCAiSW52YWxpZCBudW1iZXIgb2YgcGxh
bmVzIik7Cj4gIAl9Cj4gIAo+IC0JbWFsaWRwX2h3X3dyaXRlKGh3ZGV2LCBNQUxJRFBfREVfSF9B
Q1RJVkUodykgfCBNQUxJRFBfREVfVl9BQ1RJVkUoaCksCj4gLQkJCU1BTElEUDU1MF9TRV9NRU1X
UklURV9PVVRfU0laRSk7Cj4gLQltYWxpZHBfaHdfc2V0Yml0cyhod2RldiwgTUFMSURQNTUwX1NF
X01FTVdSSVRFX09ORVNIT1QgfCBNQUxJRFBfU0VfTUVNV1JJVEVfRU4sCj4gLQkJCSAgTUFMSURQ
NTUwX1NFX0NPTlRST0wpOwo+ICsJbWFsaWRwX2h3X2NsZWFyYml0cyhod2RldiwgTUFMSURQX1NF
X01FTVdSSVRFX0VOIHwgTUFMSURQX1NFX01FTVdSSVRFX1NDTF9FTiwKPiArCQkJICAgIE1BTElE
UDU1MF9TRV9DT05UUk9MKTsKPiArCj4gKwlpZiAoc2NhbGluZykgewo+ICsJCW1hbGlkcF9od19z
ZXRiaXRzKGh3ZGV2LCBNQUxJRFA1NTBfU0VfTUVNV1JJVEVfT05FU0hPVCB8IE1BTElEUF9TRV9N
RU1XUklURV9TQ0xfRU4sCj4gKwkJCQkgIE1BTElEUDU1MF9TRV9DT05UUk9MKTsKPiArCX0gZWxz
ZSB7Cj4gKwkJbWFsaWRwX2h3X3dyaXRlKGh3ZGV2LCBNQUxJRFBfREVfSF9BQ1RJVkUodykgfCBN
QUxJRFBfREVfVl9BQ1RJVkUoaCksCj4gKwkJCQlNQUxJRFA1NTBfU0VfTUVNV1JJVEVfT1VUX1NJ
WkUpOwo+ICsJCW1hbGlkcF9od19zZXRiaXRzKGh3ZGV2LCBNQUxJRFA1NTBfU0VfTUVNV1JJVEVf
T05FU0hPVCB8IE1BTElEUF9TRV9NRU1XUklURV9FTiwKPiArCQkJCSAgTUFMSURQNTUwX1NFX0NP
TlRST0wpOwo+ICsJfQo+ICAKPiAgCWlmIChyZ2IyeXV2X2NvZWZmcykgewo+ICAJCWludCBpOwo+
IEBAIC04OTcsNyArOTE1LDggQEAgc3RhdGljIHZvaWQgbWFsaWRwNTUwX2Rpc2FibGVfbWVtd3Jp
dGUoc3RydWN0IG1hbGlkcF9od19kZXZpY2UgKmh3ZGV2KQo+ICB7Cj4gIAl1MzIgYmFzZSA9IG1h
bGlkcF9nZXRfYmxvY2tfYmFzZShod2RldiwgTUFMSURQX0RFX0JMT0NLKTsKPiAgCj4gLQltYWxp
ZHBfaHdfY2xlYXJiaXRzKGh3ZGV2LCBNQUxJRFA1NTBfU0VfTUVNV1JJVEVfT05FU0hPVCB8IE1B
TElEUF9TRV9NRU1XUklURV9FTiwKPiArCW1hbGlkcF9od19jbGVhcmJpdHMoaHdkZXYsCj4gKwkJ
CSAgICBNQUxJRFA1NTBfU0VfTUVNV1JJVEVfT05FU0hPVCB8IE1BTElEUF9TRV9NRU1XUklURV9F
TiB8IE1BTElEUF9TRV9NRU1XUklURV9TQ0xfRU4sCj4gIAkJCSAgICBNQUxJRFA1NTBfU0VfQ09O
VFJPTCk7Cj4gIAltYWxpZHBfaHdfY2xlYXJiaXRzKGh3ZGV2LCBNQUxJRFBfU0NBTEVfRU5HSU5F
X0VOLCBiYXNlICsgTUFMSURQX0RFX0RJU1BMQVlfRlVOQyk7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FybS9tYWxpZHBfaHcuaCBiL2RyaXZlcnMvZ3B1L2RybS9hcm0vbWFs
aWRwX2h3LmgKPiBpbmRleCA4MzUyYTJlLi42MWRkY2I1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hcm0vbWFsaWRwX2h3LmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYXJtL21hbGlk
cF9ody5oCj4gQEAgLTg1LDYgKzg1LDcgQEAgZW51bSBtYWxpZHBfc2NhbGluZ19jb2VmZl9zZXQg
ewo+ICBzdHJ1Y3QgbWFsaWRwX3NlX2NvbmZpZyB7Cj4gIAl1OCBzY2FsZV9lbmFibGUgOiAxOwo+
ICAJdTggZW5oYW5jZXJfZW5hYmxlIDogMTsKPiArCXU4IHdiX3NjYWxlX2VuYWJsZSA6IDE7Cj4g
IAl1OCBoY29lZmYgOiAzOwo+ICAJdTggdmNvZWZmIDogMzsKPiAgCXU4IHBsYW5lX3NyY19pZDsK
PiBAQCAtOTQsNiArOTUsMTkgQEAgc3RydWN0IG1hbGlkcF9zZV9jb25maWcgewo+ICAJdTMyIHZf
aW5pdF9waGFzZSwgdl9kZWx0YV9waGFzZTsKPiAgfTsKPiAgCj4gKyNkZWZpbmUgdG9fbXdfc3Rh
dGUoX3N0YXRlKSAoc3RydWN0IG1hbGlkcF9td19jb25uZWN0b3Jfc3RhdGUgKikoX3N0YXRlKQo+
ICsKPiArc3RydWN0IG1hbGlkcF9td19jb25uZWN0b3Jfc3RhdGUgewo+ICsJc3RydWN0IGRybV9j
b25uZWN0b3Jfc3RhdGUgYmFzZTsKPiArCWRtYV9hZGRyX3QgYWRkcnNbMl07Cj4gKwlzMzIgcGl0
Y2hlc1syXTsKPiArCXU4IGZvcm1hdDsKPiArCXU4IG5fcGxhbmVzOwo+ICsJYm9vbCByZ2IyeXV2
X2luaXRpYWxpemVkOwo+ICsJY29uc3QgczE2ICpyZ2IyeXV2X2NvZWZmczsKPiArCWJvb2wgd2Jf
c2NhbGVfZW5hYmxlOwo+ICt9Owo+ICsKPiAgLyogcmVnbWFwIGZlYXR1cmVzICovCj4gICNkZWZp
bmUgTUFMSURQX1JFR01BUF9IQVNfQ0xFQVJJUlEJCQkJQklUKDApCj4gICNkZWZpbmUgTUFMSURQ
X0RFVklDRV9BRkJDX1NVUFBPUlRfU1BMSVQJCQlCSVQoMSkKPiBAQCAtMjA2LDkgKzIyMCw4IEBA
IHN0cnVjdCBtYWxpZHBfaHcgewo+ICAJICogQHBhcmFtIGggLSBoZWlnaHQgb2YgdGhlIG91dHB1
dCBmcmFtZQo+ICAJICogQHBhcmFtIGZtdF9pZCAtIGludGVybmFsIGZvcm1hdCBJRCBvZiBvdXRw
dXQgYnVmZmVyCj4gIAkgKi8KPiAtCWludCAoKmVuYWJsZV9tZW13cml0ZSkoc3RydWN0IG1hbGlk
cF9od19kZXZpY2UgKmh3ZGV2LCBkbWFfYWRkcl90ICphZGRycywKPiAtCQkJICAgICAgIHMzMiAq
cGl0Y2hlcywgaW50IG51bV9wbGFuZXMsIHUxNiB3LCB1MTYgaCwgdTMyIGZtdF9pZCwKPiAtCQkJ
ICAgICAgIGNvbnN0IHMxNiAqcmdiMnl1dl9jb2VmZnMpOwo+ICsJaW50ICgqZW5hYmxlX21lbXdy
aXRlKShzdHJ1Y3QgbWFsaWRwX2h3X2RldmljZSAqaHdkZXYsIHUxNiB3LCB1MTYgaCwKPiArCQkJ
ICAgICAgIHN0cnVjdCBtYWxpZHBfbXdfY29ubmVjdG9yX3N0YXRlICptd19zdGF0ZSk7Cj4gIAo+
ICAJLyoKPiAgCSAqIERpc2FibGUgdGhlIHdyaXRpbmcgdG8gbWVtb3J5IG9mIHRoZSBuZXh0IGZy
YW1lJ3MgY29udGVudC4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FybS9tYWxpZHBf
bXcuYyBiL2RyaXZlcnMvZ3B1L2RybS9hcm0vbWFsaWRwX213LmMKPiBpbmRleCAyODY1ZjdhLi5m
MWFkNTg4IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hcm0vbWFsaWRwX213LmMKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vYXJtL21hbGlkcF9tdy5jCj4gQEAgLTEzLDIzICsxMywxMiBA
QAo+ICAjaW5jbHVkZSA8ZHJtL2RybV9nZW1fY21hX2hlbHBlci5oPgo+ICAjaW5jbHVkZSA8ZHJt
L2RybVAuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fd3JpdGViYWNrLmg+Cj4gKyNpbmNsdWRlIDx2
aWRlby92aWRlb21vZGUuaD4KPiAgCj4gICNpbmNsdWRlICJtYWxpZHBfZHJ2LmgiCj4gICNpbmNs
dWRlICJtYWxpZHBfaHcuaCIKPiAgI2luY2x1ZGUgIm1hbGlkcF9tdy5oIgo+ICAKPiAtI2RlZmlu
ZSB0b19td19zdGF0ZShfc3RhdGUpIChzdHJ1Y3QgbWFsaWRwX213X2Nvbm5lY3Rvcl9zdGF0ZSAq
KShfc3RhdGUpCj4gLQo+IC1zdHJ1Y3QgbWFsaWRwX213X2Nvbm5lY3Rvcl9zdGF0ZSB7Cj4gLQlz
dHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSBiYXNlOwo+IC0JZG1hX2FkZHJfdCBhZGRyc1syXTsK
PiAtCXMzMiBwaXRjaGVzWzJdOwo+IC0JdTggZm9ybWF0Owo+IC0JdTggbl9wbGFuZXM7Cj4gLQli
b29sIHJnYjJ5dXZfaW5pdGlhbGl6ZWQ7Cj4gLQljb25zdCBzMTYgKnJnYjJ5dXZfY29lZmZzOwo+
IC19Owo+IC0KPiAgc3RhdGljIGludCBtYWxpZHBfbXdfY29ubmVjdG9yX2dldF9tb2RlcyhzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQo+ICB7Cj4gIAlzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2ID0gY29ubmVjdG9yLT5kZXY7Cj4gQEAgLTEyNiwxOSArMTE1LDkxIEBAIG1hbGlkcF9td19l
bmNvZGVyX2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIsCj4gIAkJCSAg
ICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZSkKPiAgewo+ICAJc3Ry
dWN0IG1hbGlkcF9td19jb25uZWN0b3Jfc3RhdGUgKm13X3N0YXRlID0gdG9fbXdfc3RhdGUoY29u
bl9zdGF0ZSk7Cj4gKwlzdHJ1Y3QgbWFsaWRwX2NydGNfc3RhdGUgKmNzID0gdG9fbWFsaWRwX2Ny
dGNfc3RhdGUoY3J0Y19zdGF0ZSk7Cj4gKwlzdHJ1Y3QgbWFsaWRwX3NlX2NvbmZpZyAqcyA9ICZj
cy0+c2NhbGVyX2NvbmZpZzsKPiAgCXN0cnVjdCBtYWxpZHBfZHJtICptYWxpZHAgPSBlbmNvZGVy
LT5kZXYtPmRldl9wcml2YXRlOwo+ICAJc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmI7Cj4gLQlp
bnQgaSwgbl9wbGFuZXM7Cj4gKwlpbnQgaSwgbl9wbGFuZXMsIHJldDsKPiArCXN0cnVjdCBtYWxp
ZHBfaHdfZGV2aWNlICpod2RldiA9IG1hbGlkcC0+ZGV2Owo+ICsJc3RydWN0IHZpZGVvbW9kZSB2
bTsKPiArCXUzMiBoX3Vwc2NhbGVfZmFjdG9yID0gMDsgLyogVTE2LjE2ICovCj4gKwl1MzIgdl91
cHNjYWxlX2ZhY3RvciA9IDA7IC8qIFUxNi4xNiAqLwo+ICsKPiArCXMtPndiX3NjYWxlX2VuYWJs
ZSA9IDA7Cj4gIAo+ICAJaWYgKCFjb25uX3N0YXRlLT53cml0ZWJhY2tfam9iIHx8ICFjb25uX3N0
YXRlLT53cml0ZWJhY2tfam9iLT5mYikKPiAgCQlyZXR1cm4gMDsKPiAgCj4gKwo+ICsJLyogMHMg
YXJlIHRoZSBkZWZhdWx0IGZvciB3cml0ZWJhY2tfZGVzdF93LGggLSBzbyBkb24ndCBzY2FsZS4K
PiArCSAqIFRoZSBjYXNlIHdoZXJlIG9uZSBvZiB3LGggaXMgc2V0IGJ1dCB0aGUgb3RoZXIgaXMg
MCBpcyBtZWFuaW5nbGVzcwo+ICsJICogc28gaWdub3JlIGl0Cj4gKwkgKi8KPiArCWlmIChjb25u
X3N0YXRlLT53cml0ZWJhY2tfZGVzdF93ICYmIGNvbm5fc3RhdGUtPndyaXRlYmFja19kZXN0X2gp
IHsKPiArCQlpZiAoKGNvbm5fc3RhdGUtPndyaXRlYmFja19kZXN0X3cgIT0gY3J0Y19zdGF0ZS0+
bW9kZS5oZGlzcGxheSkgfHwKPiArCQkgICAgKGNvbm5fc3RhdGUtPndyaXRlYmFja19kZXN0X2gg
IT0gY3J0Y19zdGF0ZS0+bW9kZS52ZGlzcGxheSkpIHsKPiArCQkJcy0+d2Jfc2NhbGVfZW5hYmxl
ID0gMTsKPiArCQkJbXdfc3RhdGUtPndiX3NjYWxlX2VuYWJsZSA9IHRydWU7Cj4gKwkJfQo+ICsJ
fQo+ICsKPiAgCWZiID0gY29ubl9zdGF0ZS0+d3JpdGViYWNrX2pvYi0+ZmI7Cj4gLQlpZiAoKGZi
LT53aWR0aCAhPSBjcnRjX3N0YXRlLT5tb2RlLmhkaXNwbGF5KSB8fAo+IC0JICAgIChmYi0+aGVp
Z2h0ICE9IGNydGNfc3RhdGUtPm1vZGUudmRpc3BsYXkpKSB7Cj4gLQkJRFJNX0RFQlVHX0tNUygi
SW52YWxpZCBmcmFtZWJ1ZmZlciBzaXplICV1eCV1XG4iLAo+IC0JCQkJZmItPndpZHRoLCBmYi0+
aGVpZ2h0KTsKPiAtCQlyZXR1cm4gLUVJTlZBTDsKPiArCWlmIChzLT53Yl9zY2FsZV9lbmFibGUp
IHsKPiArCQlpZiAocy0+c2NhbGVfZW5hYmxlKSB7Cj4gKwkJCURSTV9ERUJVR19LTVMoIkF0dGVt
cHRpbmcgdG8gc2NhbGUgb24gd3JpdGViYWNrIHdoaWxlIHNjYWxpbmcgYSBsYXllclxuIik7Cj4g
KwkJCXJldHVybiAtRUlOVkFMOwo+ICsJCX0KPiArCj4gKwkJcy0+aW5wdXRfdyA9IGNydGNfc3Rh
dGUtPm1vZGUuaGRpc3BsYXk7Cj4gKwkJcy0+aW5wdXRfaCA9IGNydGNfc3RhdGUtPm1vZGUudmRp
c3BsYXk7Cj4gKwkJcy0+b3V0cHV0X3cgPSBjb25uX3N0YXRlLT53cml0ZWJhY2tfZGVzdF93Owo+
ICsJCXMtPm91dHB1dF9oID0gY29ubl9zdGF0ZS0+d3JpdGViYWNrX2Rlc3RfaDsKPiArCj4gKwkJ
aWYgKGZiLT53aWR0aCA8IHMtPm91dHB1dF93ICsgY29ubl9zdGF0ZS0+d3JpdGViYWNrX2Rlc3Rf
eCB8fAo+ICsJCSAgICBmYi0+aGVpZ2h0IDwgcy0+b3V0cHV0X2ggKyBjb25uX3N0YXRlLT53cml0
ZWJhY2tfZGVzdF95KSB7Cj4gKwkJCURSTV9ERUJVR19LTVMoIkludmFsaWQgZnJhbWVidWZmZXIg
c2l6ZSAldXgldSBmb3Igd3JpdGViYWNrIHgseSx3LGggJXUsJXUsJXUsJXVcbiIsCj4gKwkJCQkJ
ZmItPndpZHRoLCBmYi0+aGVpZ2h0LAo+ICsJCQkJCWNvbm5fc3RhdGUtPndyaXRlYmFja19kZXN0
X3gsCj4gKwkJCQkJY29ubl9zdGF0ZS0+d3JpdGViYWNrX2Rlc3RfeSwKPiArCQkJCQlzLT5vdXRw
dXRfdywgcy0+b3V0cHV0X2gpOwo+ICsJCQlyZXR1cm4gLUVJTlZBTDsKPiArCQl9Cj4gKwo+ICsJ
CWlmICgocy0+b3V0cHV0X3cgPiBzLT5pbnB1dF93KSB8fCAocy0+b3V0cHV0X2ggPiBzLT5pbnB1
dF9oKSkgewo+ICsJCQlEUk1fREVCVUdfS01TKCJVcHNjYWxpbmcgb24gd3JpdGViYWNrIGlzIG5v
dCBzdXBwb3J0ZWRcbiIpOwo+ICsJCQlyZXR1cm4gLUVJTlZBTDsKPiArCQl9Cj4gKwo+ICsJCS8q
Cj4gKwkJICogQ29udmVydCBjcnRjX1t3fGhdIHRvIFUzMi4zMiwgdGhlbiBkaXZpZGUgYnkgVTE2
LjE2IHNyY19bd3xoXQo+ICsJCSAqIHRvIGdldCB0aGUgVTE2LjE2IHJlc3VsdC4KPiArCQkgKi8K
PiArCQloX3Vwc2NhbGVfZmFjdG9yID0gZGl2X3U2NCgodTY0KXMtPm91dHB1dF93IDw8IDMyLAo+
ICsJCQkJCSAgICh1MzIpcy0+aW5wdXRfdyA8PCAxNik7Cj4gKwkJdl91cHNjYWxlX2ZhY3RvciA9
IGRpdl91NjQoKHU2NClzLT5vdXRwdXRfaCA8PCAzMiwKPiArCQkJCQkgICAodTMyKXMtPmlucHV0
X2ggPDwgMTYpOwo+ICsKPiArCQkvKiBlbmhhbmNlciBpcyBmb3IgdXBzY2FsaW5nICovCj4gKwkJ
cy0+ZW5oYW5jZXJfZW5hYmxlID0gMDsKPiArCj4gKwkJbWFsaWRwX3NldF9zZV9jb25maWdfcGhh
c2Uocyk7Cj4gKwo+ICsJCXMtPmhjb2VmZiA9IG1hbGlkcF9zZV9zZWxlY3RfY29lZmZzKGhfdXBz
Y2FsZV9mYWN0b3IpOwo+ICsJCXMtPnZjb2VmZiA9IG1hbGlkcF9zZV9zZWxlY3RfY29lZmZzKHZf
dXBzY2FsZV9mYWN0b3IpOwo+ICsKPiArCQlkcm1fZGlzcGxheV9tb2RlX3RvX3ZpZGVvbW9kZSgm
Y3J0Y19zdGF0ZS0+YWRqdXN0ZWRfbW9kZSwgJnZtKTsKPiArCQlyZXQgPSBod2Rldi0+aHctPnNl
X2NhbGNfbWNsayhod2RldiwgcywgJnZtKTsKPiArCQlpZiAocmV0IDwgMCkKPiArCQkJcmV0dXJu
IC1FSU5WQUw7Cj4gKwl9Cj4gKwo+ICsJZWxzZSB7Cj4gKwkJaWYgKChmYi0+d2lkdGggPCBjcnRj
X3N0YXRlLT5tb2RlLmhkaXNwbGF5ICsgY29ubl9zdGF0ZS0+d3JpdGViYWNrX2Rlc3RfeCkgfHwK
PiArCQkgICAgKGZiLT5oZWlnaHQgPCBjcnRjX3N0YXRlLT5tb2RlLnZkaXNwbGF5ICsgY29ubl9z
dGF0ZS0+d3JpdGViYWNrX2Rlc3RfeSkpIHsKPiArCQkJRFJNX0RFQlVHX0tNUygiSW52YWxpZCBm
cmFtZWJ1ZmZlciBzaXplICV1eCV1XG4iLAo+ICsJCQkJCWZiLT53aWR0aCwgZmItPmhlaWdodCk7
Cj4gKwkJCXJldHVybiAtRUlOVkFMOwo+ICsJICAgICAgIH0KPiAgCX0KPiAgCj4gIAlpZiAoZmIt
Pm1vZGlmaWVyKSB7Cj4gQEAgLTE2Myw2ICsyMjQsOCBAQCBtYWxpZHBfbXdfZW5jb2Rlcl9hdG9t
aWNfY2hlY2soc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyLAo+ICAJCXN0cnVjdCBkcm1fZ2Vt
X2NtYV9vYmplY3QgKm9iaiA9IGRybV9mYl9jbWFfZ2V0X2dlbV9vYmooZmIsIGkpOwo+ICAJCS8q
IG1lbW9yeSB3cml0ZSBidWZmZXJzIGFyZSBuZXZlciByb3RhdGVkICovCj4gIAkJdTggYWxpZ25t
ZW50ID0gbWFsaWRwX2h3X2dldF9waXRjaF9hbGlnbihtYWxpZHAtPmRldiwgMCk7Cj4gKwkJdW5z
aWduZWQgaW50IGNwcCA9IGZiLT5mb3JtYXQtPmNwcFtpXTsKPiArCQl1bnNpZ25lZCBpbnQgcGl0
Y2ggPSBmYi0+cGl0Y2hlc1tpXTsKPiAgCj4gIAkJaWYgKGZiLT5waXRjaGVzW2ldICYgKGFsaWdu
bWVudCAtIDEpKSB7Cj4gIAkJCURSTV9ERUJVR19LTVMoIkludmFsaWQgcGl0Y2ggJXUgZm9yIHBs
YW5lICVkXG4iLAo+IEBAIC0xNzAsNyArMjMzLDkgQEAgbWFsaWRwX213X2VuY29kZXJfYXRvbWlj
X2NoZWNrKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwKPiAgCQkJcmV0dXJuIC1FSU5WQUw7
Cj4gIAkJfQo+ICAJCW13X3N0YXRlLT5waXRjaGVzW2ldID0gZmItPnBpdGNoZXNbaV07Cj4gLQkJ
bXdfc3RhdGUtPmFkZHJzW2ldID0gb2JqLT5wYWRkciArIGZiLT5vZmZzZXRzW2ldOwo+ICsJCW13
X3N0YXRlLT5hZGRyc1tpXSA9IG9iai0+cGFkZHIgKyBmYi0+b2Zmc2V0c1tpXSArCj4gKwkJCQkg
ICAgIChjb25uX3N0YXRlLT53cml0ZWJhY2tfZGVzdF95ICogcGl0Y2gpICsKPiArCQkJCSAgICAg
KGNvbm5fc3RhdGUtPndyaXRlYmFja19kZXN0X3ggKiBjcHApOwo+ICAJfQo+ICAJbXdfc3RhdGUt
Pm5fcGxhbmVzID0gbl9wbGFuZXM7Cj4gIAo+IEBAIC0yNTcsMTMgKzMyMiwxNyBAQCB2b2lkIG1h
bGlkcF9td19hdG9taWNfY29tbWl0KHN0cnVjdCBkcm1fZGV2aWNlICpkcm0sCj4gIAkJCQkgICAg
ICZtd19zdGF0ZS0+YWRkcnNbMF0sCj4gIAkJCQkgICAgIG13X3N0YXRlLT5mb3JtYXQpOwo+ICAK
PiArCQlpZiAobXdfc3RhdGUtPndiX3NjYWxlX2VuYWJsZSkgewo+ICsJCQlEUk1fREVWX0RFQlVH
X0RSSVZFUihkcm0tPmRldiwKPiArCQkJCQkgICAgICJTY2FsaW5nIHdyaXRlYmFjayB0byAldXgl
dVxuIiwKPiArCQkJCQkgICAgIGNvbm5fc3RhdGUtPndyaXRlYmFja19kZXN0X3csCj4gKwkJCQkJ
ICAgICBjb25uX3N0YXRlLT53cml0ZWJhY2tfZGVzdF9oKTsKPiArCQl9Cj4gKwo+ICAJCWRybV93
cml0ZWJhY2tfcXVldWVfam9iKG13X2Nvbm4sIGNvbm5fc3RhdGUtPndyaXRlYmFja19qb2IpOwo+
ICAJCWNvbm5fc3RhdGUtPndyaXRlYmFja19qb2IgPSBOVUxMOwo+IC0JCWh3ZGV2LT5ody0+ZW5h
YmxlX21lbXdyaXRlKGh3ZGV2LCBtd19zdGF0ZS0+YWRkcnMsCj4gLQkJCQkJICAgbXdfc3RhdGUt
PnBpdGNoZXMsIG13X3N0YXRlLT5uX3BsYW5lcywKPiAtCQkJCQkgICBmYi0+d2lkdGgsIGZiLT5o
ZWlnaHQsIG13X3N0YXRlLT5mb3JtYXQsCj4gLQkJCQkJICAgIW13X3N0YXRlLT5yZ2IyeXV2X2lu
aXRpYWxpemVkID8KPiAtCQkJCQkgICBtd19zdGF0ZS0+cmdiMnl1dl9jb2VmZnMgOiBOVUxMKTsK
PiArCQlod2Rldi0+aHctPmVuYWJsZV9tZW13cml0ZShod2RldiwgY29ubl9zdGF0ZS0+d3JpdGVi
YWNrX2Rlc3RfdywKPiArCQkJCQkgICBjb25uX3N0YXRlLT53cml0ZWJhY2tfZGVzdF9oLCBtd19z
dGF0ZSk7Cj4gIAkJbXdfc3RhdGUtPnJnYjJ5dXZfaW5pdGlhbGl6ZWQgPSAhIW13X3N0YXRlLT5y
Z2IyeXV2X2NvZWZmczsKPiAgCX0gZWxzZSB7Cj4gIAkJRFJNX0RFVl9ERUJVR19EUklWRVIoZHJt
LT5kZXYsICJEaXNhYmxlIG1lbXdyaXRlXG4iKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FybS9tYWxpZHBfcmVncy5oIGIvZHJpdmVycy9ncHUvZHJtL2FybS9tYWxpZHBfcmVncy5o
Cj4gaW5kZXggYTMzNjNmMy4uMjU0YWE5OCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YXJtL21hbGlkcF9yZWdzLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYXJtL21hbGlkcF9yZWdz
LmgKPiBAQCAtNzMsNiArNzMsNyBAQAo+ICAjZGVmaW5lICAgTUFMSURQX0RJU1BfRlVOQ19DQURK
CQkoMSA8PCA0KQo+ICAjZGVmaW5lICAgTUFMSURQX0RJU1BfRlVOQ19JTEFDRUQJKDEgPDwgOCkK
PiAgI2RlZmluZSAgIE1BTElEUF9TQ0FMRV9FTkdJTkVfRU4JKDEgPDwgMTYpCj4gKyNkZWZpbmUg
ICBNQUxJRFBfU0VfTUVNV1JJVEVfU0NMX0VOCSgxIDw8IDUpCj4gICNkZWZpbmUgICBNQUxJRFBf
U0VfTUVNV1JJVEVfRU4JCSgyIDw8IDUpCj4gIAo+ICAvKiByZWdpc3RlciBvZmZzZXRzIGZvciBJ
UlEgbWFuYWdlbWVudCAqLwo+IC0tIAo+IDIuNy40Cj4gCgotLSAKPT09PT09PT09PT09PT09PT09
PT0KfCBJIHdvdWxkIGxpa2UgdG8gfAp8IGZpeCB0aGUgd29ybGQsICB8CnwgYnV0IHRoZXkncmUg
bm90IHwKfCBnaXZpbmcgbWUgdGhlICAgfAogXCBzb3VyY2UgY29kZSEgIC8KICAtLS0tLS0tLS0t
LS0tLS0KICAgIMKvXF8o44OEKV8vwq8KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZHJpLWRldmVs
