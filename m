Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A5B0CE389D
	for <lists+dri-devel@lfdr.de>; Thu, 24 Oct 2019 18:46:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9A8C46E4C4;
	Thu, 24 Oct 2019 16:46:17 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x444.google.com (mail-wr1-x444.google.com
 [IPv6:2a00:1450:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3D8026E4BB
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 16:46:15 +0000 (UTC)
Received: by mail-wr1-x444.google.com with SMTP id c2so21631868wrr.10
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 09:46:15 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=joZo+BWPZThfhlDpKBzdXgwzEqvhDB4Lk+BS10COeWA=;
 b=tuIHHnXjYod8ucYdvIgl25Oo230XFJ0ht1Y2VwrfjRMTxRixP2Om5ls1N8wbZNtSQo
 rk5Lb95G3JVTFZRsTEI39LoucKGiVeAqM5CUimW8TtinOWdBl1SjsLe23F6yg123VtX+
 LbtAwGyrka7IfQLZM1fqkzHA/4Ku+/Q+2LyYEIYoGFzOOo1yZg7H++qFUfl2gwI7vL4B
 UXG2F7U71IndiumisaAA3pXFggxPt8EMzhig+9bTkfP477ffvntJGeBp5AZfyTu/0WNd
 ZfFxDDnv5Rw3zSuxBvvKtCgszpfUSHKWcBxveNyF5v/20I0mvXUg9DISPjPqPrrdqzPW
 Brdg==
X-Gm-Message-State: APjAAAUkx7/QiAd9f9rFwMu1a1ekaZ4OCr2kQJwBV6I5OYuUlRpnhSIF
 5RueCbkAiQgzjjlFYs/X7hQ=
X-Google-Smtp-Source: APXvYqwkz9er/GhH6UB4gPyOoVw5v+gKNFltNjnWjyMG0M9HlRp8R3/SfBp1DWCLyUm06LWse8J48A==
X-Received: by 2002:a5d:544b:: with SMTP id w11mr4744025wrv.205.1571935573338; 
 Thu, 24 Oct 2019 09:46:13 -0700 (PDT)
Received: from localhost (p2E5BE2CE.dip0.t-ipconnect.de. [46.91.226.206])
 by smtp.gmail.com with ESMTPSA id r81sm3058153wme.16.2019.10.24.09.46.11
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 24 Oct 2019 09:46:11 -0700 (PDT)
From: Thierry Reding <thierry.reding@gmail.com>
To: Thierry Reding <thierry.reding@gmail.com>
Subject: [PATCH 16/32] drm/tegra: dp: Add DisplayPort link training helper
Date: Thu, 24 Oct 2019 18:45:18 +0200
Message-Id: <20191024164534.132764-17-thierry.reding@gmail.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191024164534.132764-1-thierry.reding@gmail.com>
References: <20191024164534.132764-1-thierry.reding@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=joZo+BWPZThfhlDpKBzdXgwzEqvhDB4Lk+BS10COeWA=;
 b=E70YqYgU5PCSYUtPQSiG2KMOz64dncOipa29l7T1Yl/4NJ3pIxIspzO8Yn2XwCt0mQ
 +W70ldmjgk6pIdGWUm9JD14EW8P2qIM1TZFtgBhJXcYFIF+Ut7ynFfWTmxAtwxQ4Xkb/
 lUTosN1bbQTjkUAxwx0mxUxnn2t8T8GNzHsBuCPD79kORmxCjN1JMGZZ77ZcSZpwNfmY
 HGLPUwnKTMjVjBINQi+zaMmI9OeGTkR9dTNGqCAakLDPke37SEMEKqkacNj8cR+yBiXT
 vny45FXJ1pujQec3ZKVCRiU6Au9SeZLFrLczeGIkYvykVS3CVL0HUcef/aS8LcI2SWFq
 zhow==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-tegra@vger.kernel.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVGhpZXJyeSBSZWRpbmcgPHRyZWRpbmdAbnZpZGlhLmNvbT4KCkFkZCBhIGhlbHBlciB0
aGF0IHdpbGwgcGVyZm9ybSBsaW5rIHRyYWluaW5nIGFzIGRlc2NyaWJlZCBpbiB0aGUKRGlzcGxh
eVBvcnQgc3BlY2lmaWNhdGlvbi4KClNpZ25lZC1vZmYtYnk6IFRoaWVycnkgUmVkaW5nIDx0cmVk
aW5nQG52aWRpYS5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2RwLmMgfCA0NTYgKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL3RlZ3Jh
L2RwLmggfCAgNjggKysrKysrCiAyIGZpbGVzIGNoYW5nZWQsIDUyNCBpbnNlcnRpb25zKCspCgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2RwLmMgYi9kcml2ZXJzL2dwdS9kcm0v
dGVncmEvZHAuYwppbmRleCBiY2Y5ZGY5NjVlZjguLjViNjc2NWQ2NTNiNCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2RwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2Rw
LmMKQEAgLTMzNCw2ICszMzQsMTQgQEAgaW50IGRybV9kcF9saW5rX2NvbmZpZ3VyZShzdHJ1Y3Qg
ZHJtX2RwX2F1eCAqYXV4LCBzdHJ1Y3QgZHJtX2RwX2xpbmsgKmxpbmspCiAJdTggdmFsdWVzWzJd
LCB2YWx1ZTsKIAlpbnQgZXJyOwogCisJaWYgKGxpbmstPm9wcyAmJiBsaW5rLT5vcHMtPmNvbmZp
Z3VyZSkgeworCQllcnIgPSBsaW5rLT5vcHMtPmNvbmZpZ3VyZShsaW5rKTsKKwkJaWYgKGVyciA8
IDApIHsKKwkJCURSTV9FUlJPUigiZmFpbGVkIHRvIGNvbmZpZ3VyZSBEUCBsaW5rOiAlZFxuIiwg
ZXJyKTsKKwkJCXJldHVybiBlcnI7CisJCX0KKwl9CisKIAl2YWx1ZXNbMF0gPSBkcm1fZHBfbGlu
a19yYXRlX3RvX2J3X2NvZGUobGluay0+cmF0ZSk7CiAJdmFsdWVzWzFdID0gbGluay0+bGFuZXM7
CiAKQEAgLTQxNiwzICs0MjQsNDUxIEBAIGludCBkcm1fZHBfbGlua19jaG9vc2Uoc3RydWN0IGRy
bV9kcF9saW5rICpsaW5rLAogCiAJcmV0dXJuIC1FUkFOR0U7CiB9CisKKy8qKgorICogRE9DOiBM
aW5rIHRyYWluaW5nCisgKgorICogVGhlc2UgZnVuY3Rpb25zIGNvbnRhaW4gY29tbW9uIGxvZ2lj
IGFuZCBoZWxwZXJzIHRvIGltcGxlbWVudCBEaXNwbGF5UG9ydAorICogbGluayB0cmFpbmluZy4K
KyAqLworCisvKioKKyAqIGRybV9kcF9saW5rX3RyYWluX2luaXQoKSAtIGluaXRpYWxpemUgRGlz
cGxheVBvcnQgbGluayB0cmFpbmluZyBzdGF0ZQorICogQHRyYWluOiBEaXNwbGF5UG9ydCBsaW5r
IHRyYWluaW5nIHN0YXRlCisgKi8KK3ZvaWQgZHJtX2RwX2xpbmtfdHJhaW5faW5pdChzdHJ1Y3Qg
ZHJtX2RwX2xpbmtfdHJhaW4gKnRyYWluKQoreworCXN0cnVjdCBkcm1fZHBfbGlua190cmFpbl9z
ZXQgKnJlcXVlc3QgPSAmdHJhaW4tPnJlcXVlc3Q7CisJc3RydWN0IGRybV9kcF9saW5rX3RyYWlu
X3NldCAqYWRqdXN0ID0gJnRyYWluLT5hZGp1c3Q7CisJdW5zaWduZWQgaW50IGk7CisKKwlmb3Ig
KGkgPSAwOyBpIDwgNDsgaSsrKSB7CisJCXJlcXVlc3QtPnZvbHRhZ2Vfc3dpbmdbaV0gPSAwOwor
CQlhZGp1c3QtPnZvbHRhZ2Vfc3dpbmdbaV0gPSAwOworCisJCXJlcXVlc3QtPnByZV9lbXBoYXNp
c1tpXSA9IDA7CisJCWFkanVzdC0+cHJlX2VtcGhhc2lzW2ldID0gMDsKKworCQlyZXF1ZXN0LT5w
b3N0X2N1cnNvcltpXSA9IDA7CisJCWFkanVzdC0+cG9zdF9jdXJzb3JbaV0gPSAwOworCX0KKwor
CXRyYWluLT5wYXR0ZXJuID0gRFBfVFJBSU5JTkdfUEFUVEVSTl9ESVNBQkxFOworCXRyYWluLT5j
bG9ja19yZWNvdmVyZWQgPSBmYWxzZTsKKwl0cmFpbi0+Y2hhbm5lbF9lcXVhbGl6ZWQgPSBmYWxz
ZTsKK30KKworc3RhdGljIGJvb2wgZHJtX2RwX2xpbmtfdHJhaW5fdmFsaWQoY29uc3Qgc3RydWN0
IGRybV9kcF9saW5rX3RyYWluICp0cmFpbikKK3sKKwlyZXR1cm4gdHJhaW4tPmNsb2NrX3JlY292
ZXJlZCAmJiB0cmFpbi0+Y2hhbm5lbF9lcXVhbGl6ZWQ7Cit9CisKK3N0YXRpYyBpbnQgZHJtX2Rw
X2xpbmtfYXBwbHlfdHJhaW5pbmcoc3RydWN0IGRybV9kcF9saW5rICpsaW5rKQoreworCXN0cnVj
dCBkcm1fZHBfbGlua190cmFpbl9zZXQgKnJlcXVlc3QgPSAmbGluay0+dHJhaW4ucmVxdWVzdDsK
Kwl1bnNpZ25lZCBpbnQgbGFuZXMgPSBsaW5rLT5sYW5lcywgKnZzLCAqcGUsICpwYywgaTsKKwlz
dHJ1Y3QgZHJtX2RwX2F1eCAqYXV4ID0gbGluay0+YXV4OworCXU4IHZhbHVlc1s0XSwgcGF0dGVy
biA9IDA7CisJaW50IGVycjsKKworCWVyciA9IGxpbmstPm9wcy0+YXBwbHlfdHJhaW5pbmcobGlu
ayk7CisJaWYgKGVyciA8IDApIHsKKwkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gYXBwbHkgbGluayB0
cmFpbmluZzogJWRcbiIsIGVycik7CisJCXJldHVybiBlcnI7CisJfQorCisJdnMgPSByZXF1ZXN0
LT52b2x0YWdlX3N3aW5nOworCXBlID0gcmVxdWVzdC0+cHJlX2VtcGhhc2lzOworCXBjID0gcmVx
dWVzdC0+cG9zdF9jdXJzb3I7CisKKwkvKiB3cml0ZSBjdXJyZW50bHkgc2VsZWN0ZWQgdm9sdGFn
ZS1zd2luZyBhbmQgcHJlLWVtcGhhc2lzIGxldmVscyAqLworCWZvciAoaSA9IDA7IGkgPCBsYW5l
czsgaSsrKQorCQl2YWx1ZXNbaV0gPSBEUF9UUkFJTl9WT0xUQUdFX1NXSU5HX0xFVkVMKHZzW2ld
KSB8CisJCQkgICAgRFBfVFJBSU5fUFJFX0VNUEhBU0lTX0xFVkVMKHBlW2ldKTsKKworCWVyciA9
IGRybV9kcF9kcGNkX3dyaXRlKGF1eCwgRFBfVFJBSU5JTkdfTEFORTBfU0VULCB2YWx1ZXMsIGxh
bmVzKTsKKwlpZiAoZXJyIDwgMCkgeworCQlEUk1fRVJST1IoImZhaWxlZCB0byBzZXQgdHJhaW5p
bmcgcGFyYW1ldGVyczogJWRcbiIsIGVycik7CisJCXJldHVybiBlcnI7CisJfQorCisJLyogd3Jp
dGUgY3VycmVudGx5IHNlbGVjdGVkIHBvc3QtY3Vyc29yIGxldmVsIChpZiBzdXBwb3J0ZWQpICov
CisJaWYgKGxpbmstPnJldmlzaW9uID49IDB4MTIgJiYgbGluay0+cmF0ZSA9PSA1NDAwMDApIHsK
KwkJdmFsdWVzWzBdID0gdmFsdWVzWzFdID0gMDsKKworCQlmb3IgKGkgPSAwOyBpIDwgbGFuZXM7
IGkrKykKKwkJCXZhbHVlc1tpIC8gMl0gfD0gRFBfTEFORV9QT1NUX0NVUlNPUihpLCBwY1tpXSk7
CisKKwkJZXJyID0gZHJtX2RwX2RwY2Rfd3JpdGUoYXV4LCBEUF9UUkFJTklOR19MQU5FMF8xX1NF
VDIsIHZhbHVlcywKKwkJCQkJRElWX1JPVU5EX1VQKGxhbmVzLCAyKSk7CisJCWlmIChlcnIgPCAw
KSB7CisJCQlEUk1fRVJST1IoImZhaWxlZCB0byBzZXQgcG9zdC1jdXJzb3I6ICVkXG4iLCBlcnIp
OworCQkJcmV0dXJuIGVycjsKKwkJfQorCX0KKworCS8qIHdyaXRlIGxpbmsgcGF0dGVybiAqLwor
CWlmIChsaW5rLT50cmFpbi5wYXR0ZXJuICE9IERQX1RSQUlOSU5HX1BBVFRFUk5fRElTQUJMRSkK
KwkJcGF0dGVybiB8PSBEUF9MSU5LX1NDUkFNQkxJTkdfRElTQUJMRTsKKworCXBhdHRlcm4gfD0g
bGluay0+dHJhaW4ucGF0dGVybjsKKworCWVyciA9IGRybV9kcF9kcGNkX3dyaXRlYihhdXgsIERQ
X1RSQUlOSU5HX1BBVFRFUk5fU0VULCBwYXR0ZXJuKTsKKwlpZiAoZXJyIDwgMCkgeworCQlEUk1f
RVJST1IoImZhaWxlZCB0byBzZXQgdHJhaW5pbmcgcGF0dGVybjogJWRcbiIsIGVycik7CisJCXJl
dHVybiBlcnI7CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lkIGRybV9kcF9saW5r
X3RyYWluX3dhaXQoc3RydWN0IGRybV9kcF9saW5rICpsaW5rKQoreworCXVuc2lnbmVkIGxvbmcg
bWluID0gMDsKKworCXN3aXRjaCAobGluay0+dHJhaW4ucGF0dGVybikgeworCWNhc2UgRFBfVFJB
SU5JTkdfUEFUVEVSTl8xOgorCQltaW4gPSBsaW5rLT5hdXhfcmRfaW50ZXJ2YWwuY3I7CisJCWJy
ZWFrOworCisJY2FzZSBEUF9UUkFJTklOR19QQVRURVJOXzI6CisJY2FzZSBEUF9UUkFJTklOR19Q
QVRURVJOXzM6CisJCW1pbiA9IGxpbmstPmF1eF9yZF9pbnRlcnZhbC5jZTsKKwkJYnJlYWs7CisK
KwlkZWZhdWx0OgorCQlicmVhazsKKwl9CisKKwlpZiAobWluID4gMCkKKwkJdXNsZWVwX3Jhbmdl
KG1pbiwgMiAqIG1pbik7Cit9CisKK3N0YXRpYyB2b2lkIGRybV9kcF9saW5rX2dldF9hZGp1c3Rt
ZW50cyhzdHJ1Y3QgZHJtX2RwX2xpbmsgKmxpbmssCisJCQkJCXU4IHN0YXR1c1tEUF9MSU5LX1NU
QVRVU19TSVpFXSkKK3sKKwlzdHJ1Y3QgZHJtX2RwX2xpbmtfdHJhaW5fc2V0ICphZGp1c3QgPSAm
bGluay0+dHJhaW4uYWRqdXN0OworCXVuc2lnbmVkIGludCBpOworCisJZm9yIChpID0gMDsgaSA8
IGxpbmstPmxhbmVzOyBpKyspIHsKKwkJYWRqdXN0LT52b2x0YWdlX3N3aW5nW2ldID0KKwkJCWRy
bV9kcF9nZXRfYWRqdXN0X3JlcXVlc3Rfdm9sdGFnZShzdGF0dXMsIGkpID4+CisJCQkJRFBfVFJB
SU5fVk9MVEFHRV9TV0lOR19TSElGVDsKKworCQlhZGp1c3QtPnByZV9lbXBoYXNpc1tpXSA9CisJ
CQlkcm1fZHBfZ2V0X2FkanVzdF9yZXF1ZXN0X3ByZV9lbXBoYXNpcyhzdGF0dXMsIGkpID4+CisJ
CQkJRFBfVFJBSU5fUFJFX0VNUEhBU0lTX1NISUZUOworCisJCWFkanVzdC0+cG9zdF9jdXJzb3Jb
aV0gPQorCQkJZHJtX2RwX2dldF9hZGp1c3RfcmVxdWVzdF9wb3N0X2N1cnNvcihzdGF0dXMsIGkp
OworCX0KK30KKworc3RhdGljIHZvaWQgZHJtX2RwX2xpbmtfdHJhaW5fYWRqdXN0KHN0cnVjdCBk
cm1fZHBfbGlua190cmFpbiAqdHJhaW4pCit7CisJc3RydWN0IGRybV9kcF9saW5rX3RyYWluX3Nl
dCAqcmVxdWVzdCA9ICZ0cmFpbi0+cmVxdWVzdDsKKwlzdHJ1Y3QgZHJtX2RwX2xpbmtfdHJhaW5f
c2V0ICphZGp1c3QgPSAmdHJhaW4tPmFkanVzdDsKKwl1bnNpZ25lZCBpbnQgaTsKKworCWZvciAo
aSA9IDA7IGkgPCA0OyBpKyspCisJCWlmIChyZXF1ZXN0LT52b2x0YWdlX3N3aW5nW2ldICE9IGFk
anVzdC0+dm9sdGFnZV9zd2luZ1tpXSkKKwkJCXJlcXVlc3QtPnZvbHRhZ2Vfc3dpbmdbaV0gPSBh
ZGp1c3QtPnZvbHRhZ2Vfc3dpbmdbaV07CisKKwlmb3IgKGkgPSAwOyBpIDwgNDsgaSsrKQorCQlp
ZiAocmVxdWVzdC0+cHJlX2VtcGhhc2lzW2ldICE9IGFkanVzdC0+cHJlX2VtcGhhc2lzW2ldKQor
CQkJcmVxdWVzdC0+cHJlX2VtcGhhc2lzW2ldID0gYWRqdXN0LT5wcmVfZW1waGFzaXNbaV07CisK
Kwlmb3IgKGkgPSAwOyBpIDwgNDsgaSsrKQorCQlpZiAocmVxdWVzdC0+cG9zdF9jdXJzb3JbaV0g
IT0gYWRqdXN0LT5wb3N0X2N1cnNvcltpXSkKKwkJCXJlcXVlc3QtPnBvc3RfY3Vyc29yW2ldID0g
YWRqdXN0LT5wb3N0X2N1cnNvcltpXTsKK30KKworc3RhdGljIGludCBkcm1fZHBfbGlua19yZWNv
dmVyX2Nsb2NrKHN0cnVjdCBkcm1fZHBfbGluayAqbGluaykKK3sKKwl1OCBzdGF0dXNbRFBfTElO
S19TVEFUVVNfU0laRV07CisJaW50IGVycjsKKworCWVyciA9IGRybV9kcF9saW5rX2FwcGx5X3Ry
YWluaW5nKGxpbmspOworCWlmIChlcnIgPCAwKQorCQlyZXR1cm4gZXJyOworCisJZHJtX2RwX2xp
bmtfdHJhaW5fd2FpdChsaW5rKTsKKworCWVyciA9IGRybV9kcF9kcGNkX3JlYWRfbGlua19zdGF0
dXMobGluay0+YXV4LCBzdGF0dXMpOworCWlmIChlcnIgPCAwKSB7CisJCURSTV9FUlJPUigiZmFp
bGVkIHRvIHJlYWQgbGluayBzdGF0dXM6ICVkXG4iLCBlcnIpOworCQlyZXR1cm4gZXJyOworCX0K
KworCWlmICghZHJtX2RwX2Nsb2NrX3JlY292ZXJ5X29rKHN0YXR1cywgbGluay0+bGFuZXMpKQor
CQlkcm1fZHBfbGlua19nZXRfYWRqdXN0bWVudHMobGluaywgc3RhdHVzKTsKKwllbHNlCisJCWxp
bmstPnRyYWluLmNsb2NrX3JlY292ZXJlZCA9IHRydWU7CisKKwlyZXR1cm4gMDsKK30KKworc3Rh
dGljIGludCBkcm1fZHBfbGlua19jbG9ja19yZWNvdmVyeShzdHJ1Y3QgZHJtX2RwX2xpbmsgKmxp
bmspCit7CisJdW5zaWduZWQgaW50IHJlcGVhdDsKKwlpbnQgZXJyOworCisJLyogc3RhcnQgY2xv
Y2sgcmVjb3ZlcnkgdXNpbmcgdHJhaW5pbmcgcGF0dGVybiAxICovCisJbGluay0+dHJhaW4ucGF0
dGVybiA9IERQX1RSQUlOSU5HX1BBVFRFUk5fMTsKKworCWZvciAocmVwZWF0ID0gMTsgcmVwZWF0
IDwgNTsgcmVwZWF0KyspIHsKKwkJZXJyID0gZHJtX2RwX2xpbmtfcmVjb3Zlcl9jbG9jayhsaW5r
KTsKKwkJaWYgKGVyciA8IDApIHsKKwkJCURSTV9FUlJPUigiZmFpbGVkIHRvIHJlY292ZXIgY2xv
Y2s6ICVkXG4iLCBlcnIpOworCQkJcmV0dXJuIGVycjsKKwkJfQorCisJCWRybV9kcF9saW5rX3Ry
YWluX2FkanVzdCgmbGluay0+dHJhaW4pOworCisJCWlmIChsaW5rLT50cmFpbi5jbG9ja19yZWNv
dmVyZWQpCisJCQlicmVhazsKKwl9CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBkcm1f
ZHBfbGlua19lcXVhbGl6ZV9jaGFubmVsKHN0cnVjdCBkcm1fZHBfbGluayAqbGluaykKK3sKKwlz
dHJ1Y3QgZHJtX2RwX2F1eCAqYXV4ID0gbGluay0+YXV4OworCXU4IHN0YXR1c1tEUF9MSU5LX1NU
QVRVU19TSVpFXTsKKwlpbnQgZXJyOworCisJZXJyID0gZHJtX2RwX2xpbmtfYXBwbHlfdHJhaW5p
bmcobGluayk7CisJaWYgKGVyciA8IDApCisJCXJldHVybiBlcnI7CisKKwlkcm1fZHBfbGlua190
cmFpbl93YWl0KGxpbmspOworCisJZXJyID0gZHJtX2RwX2RwY2RfcmVhZF9saW5rX3N0YXR1cyhh
dXgsIHN0YXR1cyk7CisJaWYgKGVyciA8IDApIHsKKwkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gcmVh
ZCBsaW5rIHN0YXR1czogJWRcbiIsIGVycik7CisJCXJldHVybiBlcnI7CisJfQorCisJaWYgKCFk
cm1fZHBfY2xvY2tfcmVjb3Zlcnlfb2soc3RhdHVzLCBsaW5rLT5sYW5lcykpIHsKKwkJRFJNX0VS
Uk9SKCJjbG9jayByZWNvdmVyeSBsb3N0IHdoaWxlIGVxdWFsaXppbmcgY2hhbm5lbFxuIik7CisJ
CWxpbmstPnRyYWluLmNsb2NrX3JlY292ZXJlZCA9IGZhbHNlOworCQlyZXR1cm4gMDsKKwl9CisK
KwlpZiAoIWRybV9kcF9jaGFubmVsX2VxX29rKHN0YXR1cywgbGluay0+bGFuZXMpKQorCQlkcm1f
ZHBfbGlua19nZXRfYWRqdXN0bWVudHMobGluaywgc3RhdHVzKTsKKwllbHNlCisJCWxpbmstPnRy
YWluLmNoYW5uZWxfZXF1YWxpemVkID0gdHJ1ZTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMg
aW50IGRybV9kcF9saW5rX2NoYW5uZWxfZXF1YWxpemF0aW9uKHN0cnVjdCBkcm1fZHBfbGluayAq
bGluaykKK3sKKwl1bnNpZ25lZCBpbnQgcmVwZWF0OworCWludCBlcnI7CisKKwkvKiBzdGFydCBj
aGFubmVsIGVxdWFsaXphdGlvbiB1c2luZyBwYXR0ZXJuIDIgb3IgMyAqLworCWlmIChsaW5rLT5j
YXBzLnRwczNfc3VwcG9ydGVkKQorCQlsaW5rLT50cmFpbi5wYXR0ZXJuID0gRFBfVFJBSU5JTkdf
UEFUVEVSTl8zOworCWVsc2UKKwkJbGluay0+dHJhaW4ucGF0dGVybiA9IERQX1RSQUlOSU5HX1BB
VFRFUk5fMjsKKworCWZvciAocmVwZWF0ID0gMTsgcmVwZWF0IDwgNTsgcmVwZWF0KyspIHsKKwkJ
ZXJyID0gZHJtX2RwX2xpbmtfZXF1YWxpemVfY2hhbm5lbChsaW5rKTsKKwkJaWYgKGVyciA8IDAp
IHsKKwkJCURSTV9FUlJPUigiZmFpbGVkIHRvIGVxdWFsaXplIGNoYW5uZWw6ICVkXG4iLCBlcnIp
OworCQkJcmV0dXJuIGVycjsKKwkJfQorCisJCWRybV9kcF9saW5rX3RyYWluX2FkanVzdCgmbGlu
ay0+dHJhaW4pOworCisJCWlmIChsaW5rLT50cmFpbi5jaGFubmVsX2VxdWFsaXplZCkKKwkJCWJy
ZWFrOworCX0KKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IGRybV9kcF9saW5rX2Rvd25n
cmFkZShzdHJ1Y3QgZHJtX2RwX2xpbmsgKmxpbmspCit7CisJc3dpdGNoIChsaW5rLT5yYXRlKSB7
CisJY2FzZSAxNjIwMDA6CisJCXJldHVybiAtRUlOVkFMOworCisJY2FzZSAyNzAwMDA6CisJCWxp
bmstPnJhdGUgPSAxNjIwMDA7CisJCWJyZWFrOworCisJY2FzZSA1NDAwMDA6CisJCWxpbmstPnJh
dGUgPSAyNzAwMDA7CisJCXJldHVybiAwOworCX0KKworCXJldHVybiAwOworfQorCitzdGF0aWMg
dm9pZCBkcm1fZHBfbGlua190cmFpbl9kaXNhYmxlKHN0cnVjdCBkcm1fZHBfbGluayAqbGluaykK
K3sKKwlpbnQgZXJyOworCisJbGluay0+dHJhaW4ucGF0dGVybiA9IERQX1RSQUlOSU5HX1BBVFRF
Uk5fRElTQUJMRTsKKworCWVyciA9IGRybV9kcF9saW5rX2FwcGx5X3RyYWluaW5nKGxpbmspOwor
CWlmIChlcnIgPCAwKQorCQlEUk1fRVJST1IoImZhaWxlZCB0byBkaXNhYmxlIGxpbmsgdHJhaW5p
bmc6ICVkXG4iLCBlcnIpOworfQorCitzdGF0aWMgaW50IGRybV9kcF9saW5rX3RyYWluX2Z1bGwo
c3RydWN0IGRybV9kcF9saW5rICpsaW5rKQoreworCWludCBlcnI7CisKK3JldHJ5OgorCURSTV9E
RUJVR19LTVMoImZ1bGwtdHJhaW5pbmcgbGluazogJXUgbGFuZSVzIGF0ICV1IE1IelxuIiwKKwkJ
ICAgICAgbGluay0+bGFuZXMsIChsaW5rLT5sYW5lcyA+IDEpID8gInMiIDogIiIsCisJCSAgICAg
IGxpbmstPnJhdGUgLyAxMDApOworCisJZXJyID0gZHJtX2RwX2xpbmtfY29uZmlndXJlKGxpbmst
PmF1eCwgbGluayk7CisJaWYgKGVyciA8IDApIHsKKwkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY29u
ZmlndXJlIERQIGxpbms6ICVkXG4iLCBlcnIpOworCQlyZXR1cm4gZXJyOworCX0KKworCWVyciA9
IGRybV9kcF9saW5rX2Nsb2NrX3JlY292ZXJ5KGxpbmspOworCWlmIChlcnIgPCAwKSB7CisJCURS
TV9FUlJPUigiY2xvY2sgcmVjb3ZlcnkgZmFpbGVkOiAlZFxuIiwgZXJyKTsKKwkJZ290byBvdXQ7
CisJfQorCisJaWYgKCFsaW5rLT50cmFpbi5jbG9ja19yZWNvdmVyZWQpIHsKKwkJRFJNX0VSUk9S
KCJjbG9jayByZWNvdmVyeSBmYWlsZWQsIGRvd25ncmFkaW5nIGxpbmtcbiIpOworCisJCWVyciA9
IGRybV9kcF9saW5rX2Rvd25ncmFkZShsaW5rKTsKKwkJaWYgKGVyciA8IDApCisJCQlnb3RvIG91
dDsKKworCQlnb3RvIHJldHJ5OworCX0KKworCURSTV9ERUJVR19LTVMoImNsb2NrIHJlY292ZXJ5
IHN1Y2NlZWRlZFxuIik7CisKKwllcnIgPSBkcm1fZHBfbGlua19jaGFubmVsX2VxdWFsaXphdGlv
bihsaW5rKTsKKwlpZiAoZXJyIDwgMCkgeworCQlEUk1fRVJST1IoImNoYW5uZWwgZXF1YWxpemF0
aW9uIGZhaWxlZDogJWRcbiIsIGVycik7CisJCWdvdG8gb3V0OworCX0KKworCWlmICghbGluay0+
dHJhaW4uY2hhbm5lbF9lcXVhbGl6ZWQpIHsKKwkJRFJNX0VSUk9SKCJjaGFubmVsIGVxdWFsaXph
dGlvbiBmYWlsZWQsIGRvd25ncmFkaW5nIGxpbmtcbiIpOworCisJCWVyciA9IGRybV9kcF9saW5r
X2Rvd25ncmFkZShsaW5rKTsKKwkJaWYgKGVyciA8IDApCisJCQlnb3RvIG91dDsKKworCQlnb3Rv
IHJldHJ5OworCX0KKworCURSTV9ERUJVR19LTVMoImNoYW5uZWwgZXF1YWxpemF0aW9uIHN1Y2Nl
ZWRlZFxuIik7CisKK291dDoKKwlkcm1fZHBfbGlua190cmFpbl9kaXNhYmxlKGxpbmspOworCXJl
dHVybiBlcnI7Cit9CisKK3N0YXRpYyBpbnQgZHJtX2RwX2xpbmtfdHJhaW5fZmFzdChzdHJ1Y3Qg
ZHJtX2RwX2xpbmsgKmxpbmspCit7CisJdTggc3RhdHVzW0RQX0xJTktfU1RBVFVTX1NJWkVdOwor
CWludCBlcnI7CisKKwlEUk1fREVCVUdfS01TKCJmYXN0LXRyYWluaW5nIGxpbms6ICV1IGxhbmUl
cyBhdCAldSBNSHpcbiIsCisJCSAgICAgIGxpbmstPmxhbmVzLCAobGluay0+bGFuZXMgPiAxKSA/
ICJzIiA6ICIiLAorCQkgICAgICBsaW5rLT5yYXRlIC8gMTAwKTsKKworCWVyciA9IGRybV9kcF9s
aW5rX2NvbmZpZ3VyZShsaW5rLT5hdXgsIGxpbmspOworCWlmIChlcnIgPCAwKSB7CisJCURSTV9F
UlJPUigiZmFpbGVkIHRvIGNvbmZpZ3VyZSBEUCBsaW5rOiAlZFxuIiwgZXJyKTsKKwkJcmV0dXJu
IGVycjsKKwl9CisKKwkvKiB0cmFuc21pdCB0cmFpbmluZyBwYXR0ZXJuIDEgZm9yIDUwMCBtaWNy
b3NlY29uZHMgKi8KKwlsaW5rLT50cmFpbi5wYXR0ZXJuID0gRFBfVFJBSU5JTkdfUEFUVEVSTl8x
OworCisJZXJyID0gZHJtX2RwX2xpbmtfYXBwbHlfdHJhaW5pbmcobGluayk7CisJaWYgKGVyciA8
IDApCisJCWdvdG8gb3V0OworCisJdXNsZWVwX3JhbmdlKDUwMCwgMTAwMCk7CisKKwkvKiB0cmFu
c21pdCB0cmFpbmluZyBwYXR0ZXJuIDIgb3IgMyBmb3IgNTAwIG1pY3Jvc2Vjb25kcyAqLworCWlm
IChsaW5rLT5jYXBzLnRwczNfc3VwcG9ydGVkKQorCQlsaW5rLT50cmFpbi5wYXR0ZXJuID0gRFBf
VFJBSU5JTkdfUEFUVEVSTl8zOworCWVsc2UKKwkJbGluay0+dHJhaW4ucGF0dGVybiA9IERQX1RS
QUlOSU5HX1BBVFRFUk5fMjsKKworCWVyciA9IGRybV9kcF9saW5rX2FwcGx5X3RyYWluaW5nKGxp
bmspOworCWlmIChlcnIgPCAwKQorCQlnb3RvIG91dDsKKworCXVzbGVlcF9yYW5nZSg1MDAsIDEw
MDApOworCisJZXJyID0gZHJtX2RwX2RwY2RfcmVhZF9saW5rX3N0YXR1cyhsaW5rLT5hdXgsIHN0
YXR1cyk7CisJaWYgKGVyciA8IDApIHsKKwkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gcmVhZCBsaW5r
IHN0YXR1czogJWRcbiIsIGVycik7CisJCWdvdG8gb3V0OworCX0KKworCWlmICghZHJtX2RwX2Ns
b2NrX3JlY292ZXJ5X29rKHN0YXR1cywgbGluay0+bGFuZXMpKSB7CisJCURSTV9FUlJPUigiY2xv
Y2sgcmVjb3ZlcnkgZmFpbGVkXG4iKTsKKwkJZXJyID0gLUVJTzsKKwl9CisKKwlpZiAoIWRybV9k
cF9jaGFubmVsX2VxX29rKHN0YXR1cywgbGluay0+bGFuZXMpKSB7CisJCURSTV9FUlJPUigiY2hh
bm5lbCBlcXVhbGl6YXRpb24gZmFpbGVkXG4iKTsKKwkJZXJyID0gLUVJTzsKKwl9CisKK291dDoK
Kwlkcm1fZHBfbGlua190cmFpbl9kaXNhYmxlKGxpbmspOworCXJldHVybiBlcnI7Cit9CisKKy8q
KgorICogZHJtX2RwX2xpbmtfdHJhaW4oKSAtIHBlcmZvcm0gRGlzcGxheVBvcnQgbGluayB0cmFp
bmluZworICogQGxpbms6IGEgRFAgbGluayBvYmplY3QKKyAqCisgKiBVc2VzIHRoZSBjb250ZXh0
IHN0b3JlZCBpbiB0aGUgRFAgbGluayBvYmplY3QgdG8gcGVyZm9ybSBsaW5rIHRyYWluaW5nLiBJ
dAorICogaXMgZXhwZWN0ZWQgdGhhdCBkcml2ZXJzIHdpbGwgY2FsbCBkcm1fZHBfbGlua19wcm9i
ZSgpIHRvIG9idGFpbiB0aGUgbGluaworICogY2FwYWJpbGl0aWVzIGJlZm9yZSBwZXJmb3JtaW5n
IGxpbmsgdHJhaW5pbmcuCisgKgorICogSWYgdGhlIHNpbmsgc3VwcG9ydHMgZmFzdCBsaW5rIHRy
YWluaW5nIChubyBBVVggQ0ggaGFuZHNoYWtlKSBhbmQgdmFsaWQKKyAqIHRyYWluaW5nIHNldHRp
bmdzIGFyZSBhdmFpbGFibGUsIHRoaXMgZnVuY3Rpb24gd2lsbCB0cnkgdG8gcGVyZm9ybSBmYXN0
CisgKiBsaW5rIHRyYWluaW5nIGFuZCBmYWxsIGJhY2sgdG8gZnVsbCBsaW5rIHRyYWluaW5nIG9u
IGZhaWx1cmUuCisgKgorICogUmV0dXJuczogMCBvbiBzdWNjZXNzIG9yIGEgbmVnYXRpdmUgZXJy
b3IgY29kZSBvbiBmYWlsdXJlLgorICovCitpbnQgZHJtX2RwX2xpbmtfdHJhaW4oc3RydWN0IGRy
bV9kcF9saW5rICpsaW5rKQoreworCWludCBlcnI7CisKKwlpZiAobGluay0+Y2Fwcy5mYXN0X3Ry
YWluaW5nKSB7CisJCWlmIChkcm1fZHBfbGlua190cmFpbl92YWxpZCgmbGluay0+dHJhaW4pKSB7
CisJCQllcnIgPSBkcm1fZHBfbGlua190cmFpbl9mYXN0KGxpbmspOworCQkJaWYgKGVyciA8IDAp
CisJCQkJRFJNX0VSUk9SKCJmYXN0IGxpbmsgdHJhaW5pbmcgZmFpbGVkOiAlZFxuIiwKKwkJCQkJ
ICBlcnIpOworCQkJZWxzZQorCQkJCXJldHVybiAwOworCQl9IGVsc2UgeworCQkJRFJNX0RFQlVH
X0tNUygidHJhaW5pbmcgcGFyYW1ldGVycyBub3QgYXZhaWxhYmxlXG4iKTsKKwkJfQorCX0gZWxz
ZSB7CisJCURSTV9ERUJVR19LTVMoImZhc3QgbGluayB0cmFpbmluZyBub3Qgc3VwcG9ydGVkXG4i
KTsKKwl9CisKKwllcnIgPSBkcm1fZHBfbGlua190cmFpbl9mdWxsKGxpbmspOworCWlmIChlcnIg
PCAwKQorCQlEUk1fRVJST1IoImZ1bGwgbGluayB0cmFpbmluZyBmYWlsZWQ6ICVkXG4iLCBlcnIp
OworCisJcmV0dXJuIGVycjsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9k
cC5oIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2RwLmgKaW5kZXggYTIwZWU5ZjFmMWI2Li5jYjEy
ZWQwYzU0ZTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9kcC5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS90ZWdyYS9kcC5oCkBAIC0xMiw2ICsxMiw3IEBACiBzdHJ1Y3QgZHJtX2Rp
c3BsYXlfaW5mbzsKIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlOwogc3RydWN0IGRybV9kcF9hdXg7
CitzdHJ1Y3QgZHJtX2RwX2xpbms7CiAKIC8qKgogICogc3RydWN0IGRybV9kcF9saW5rX2NhcHMg
LSBEUCBsaW5rIGNhcGFiaWxpdGllcwpAQCAtNTYsNiArNTcsNTUgQEAgc3RydWN0IGRybV9kcF9s
aW5rX2NhcHMgewogdm9pZCBkcm1fZHBfbGlua19jYXBzX2NvcHkoc3RydWN0IGRybV9kcF9saW5r
X2NhcHMgKmRlc3QsCiAJCQkgICBjb25zdCBzdHJ1Y3QgZHJtX2RwX2xpbmtfY2FwcyAqc3JjKTsK
IAorLyoqCisgKiBzdHJ1Y3QgZHJtX2RwX2xpbmtfb3BzIC0gRFAgbGluayBvcGVyYXRpb25zCisg
Ki8KK3N0cnVjdCBkcm1fZHBfbGlua19vcHMgeworCS8qKgorCSAqIEBhcHBseV90cmFpbmluZzoK
KwkgKi8KKwlpbnQgKCphcHBseV90cmFpbmluZykoc3RydWN0IGRybV9kcF9saW5rICpsaW5rKTsK
KworCS8qKgorCSAqIEBjb25maWd1cmU6CisJICovCisJaW50ICgqY29uZmlndXJlKShzdHJ1Y3Qg
ZHJtX2RwX2xpbmsgKmxpbmspOworfTsKKworI2RlZmluZSBEUF9UUkFJTl9WT0xUQUdFX1NXSU5H
X0xFVkVMKHgpICgoeCkgPDwgMCkKKyNkZWZpbmUgRFBfVFJBSU5fUFJFX0VNUEhBU0lTX0xFVkVM
KHgpICgoeCkgPDwgMykKKyNkZWZpbmUgRFBfTEFORV9QT1NUX0NVUlNPUihpLCB4KSAoKCh4KSAm
IDB4MykgPDwgKCgoaSkgJiAxKSA8PCAyKSkKKworLyoqCisgKiBzdHJ1Y3QgZHJtX2RwX2xpbmtf
dHJhaW5fc2V0IC0gbGluayB0cmFpbmluZyBzZXR0aW5ncworICogQHZvbHRhZ2Vfc3dpbmc6IHBl
ci1sYW5lIHZvbHRhZ2Ugc3dpbmcKKyAqIEBwcmVfZW1waGFzaXM6IHBlci1sYW5lIHByZS1lbXBo
YXNpcworICogQHBvc3RfY3Vyc29yOiBwZXItbGFuZSBwb3N0LWN1cnNvcgorICovCitzdHJ1Y3Qg
ZHJtX2RwX2xpbmtfdHJhaW5fc2V0IHsKKwl1bnNpZ25lZCBpbnQgdm9sdGFnZV9zd2luZ1s0XTsK
Kwl1bnNpZ25lZCBpbnQgcHJlX2VtcGhhc2lzWzRdOworCXVuc2lnbmVkIGludCBwb3N0X2N1cnNv
cls0XTsKK307CisKKy8qKgorICogc3RydWN0IGRybV9kcF9saW5rX3RyYWluIC0gbGluayB0cmFp
bmluZyBzdGF0ZSBpbmZvcm1hdGlvbgorICogQHJlcXVlc3Q6IGN1cnJlbnRseSByZXF1ZXN0ZWQg
c2V0dGluZ3MKKyAqIEBhZGp1c3Q6IGFkanVzdG1lbnRzIHJlcXVlc3RlZCBieSBzaW5rCisgKiBA
cGF0dGVybjogY3VycmVudGx5IHJlcXVlc3RlZCB0cmFpbmluZyBwYXR0ZXJuCisgKiBAY2xvY2tf
cmVjb3ZlcmVkOiBmbGFnIHRvIHRyYWNrIGlmIGNsb2NrIHJlY292ZXJ5IGhhcyBjb21wbGV0ZWQK
KyAqIEBjaGFubmVsX2VxdWFsaXplZDogZmxhZyB0byB0cmFjayBpZiBjaGFubmVsIGVxdWFsaXph
dGlvbiBoYXMgY29tcGxldGVkCisgKi8KK3N0cnVjdCBkcm1fZHBfbGlua190cmFpbiB7CisJc3Ry
dWN0IGRybV9kcF9saW5rX3RyYWluX3NldCByZXF1ZXN0OworCXN0cnVjdCBkcm1fZHBfbGlua190
cmFpbl9zZXQgYWRqdXN0OworCisJdW5zaWduZWQgaW50IHBhdHRlcm47CisKKwlib29sIGNsb2Nr
X3JlY292ZXJlZDsKKwlib29sIGNoYW5uZWxfZXF1YWxpemVkOworfTsKKwogLyoqCiAgKiBzdHJ1
Y3QgZHJtX2RwX2xpbmsgLSBEUCBsaW5rIGNhcGFiaWxpdGllcyBhbmQgY29uZmlndXJhdGlvbgog
ICogQHJldmlzaW9uOiBEUCBzcGVjaWZpY2F0aW9uIHJldmlzaW9uIHN1cHBvcnRlZCBvbiB0aGUg
bGluawpAQCAtOTIsNiArMTQyLDIxIEBAIHN0cnVjdCBkcm1fZHBfbGluayB7CiAKIAl1bnNpZ25l
ZCBsb25nIHJhdGVzW0RQX01BWF9TVVBQT1JURURfUkFURVNdOwogCXVuc2lnbmVkIGludCBudW1f
cmF0ZXM7CisKKwkvKioKKwkgKiBAb3BzOiBEUCBsaW5rIG9wZXJhdGlvbnMKKwkgKi8KKwljb25z
dCBzdHJ1Y3QgZHJtX2RwX2xpbmtfb3BzICpvcHM7CisKKwkvKioKKwkgKiBAYXV4OiBEUCBBVVgg
Y2hhbm5lbAorCSAqLworCXN0cnVjdCBkcm1fZHBfYXV4ICphdXg7CisKKwkvKioKKwkgKiBAdHJh
aW46IERQIGxpbmsgdHJhaW5pbmcgc3RhdGUKKwkgKi8KKwlzdHJ1Y3QgZHJtX2RwX2xpbmtfdHJh
aW4gdHJhaW47CiB9OwogCiBpbnQgZHJtX2RwX2xpbmtfYWRkX3JhdGUoc3RydWN0IGRybV9kcF9s
aW5rICpsaW5rLCB1bnNpZ25lZCBsb25nIHJhdGUpOwpAQCAtMTA2LDQgKzE3MSw3IEBAIGludCBk
cm1fZHBfbGlua19jaG9vc2Uoc3RydWN0IGRybV9kcF9saW5rICpsaW5rLAogCQkgICAgICAgY29u
c3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCiAJCSAgICAgICBjb25zdCBzdHJ1Y3Qg
ZHJtX2Rpc3BsYXlfaW5mbyAqaW5mbyk7CiAKK3ZvaWQgZHJtX2RwX2xpbmtfdHJhaW5faW5pdChz
dHJ1Y3QgZHJtX2RwX2xpbmtfdHJhaW4gKnRyYWluKTsKK2ludCBkcm1fZHBfbGlua190cmFpbihz
dHJ1Y3QgZHJtX2RwX2xpbmsgKmxpbmspOworCiAjZW5kaWYKLS0gCjIuMjMuMAoKX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcg
bGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRl
c2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
