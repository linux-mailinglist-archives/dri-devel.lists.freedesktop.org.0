Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 58C7D7A169
	for <lists+dri-devel@lfdr.de>; Tue, 30 Jul 2019 08:46:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8E6416E409;
	Tue, 30 Jul 2019 06:46:15 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ua1-x942.google.com (mail-ua1-x942.google.com
 [IPv6:2607:f8b0:4864:20::942])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CD1736E409
 for <dri-devel@lists.freedesktop.org>; Tue, 30 Jul 2019 06:46:14 +0000 (UTC)
Received: by mail-ua1-x942.google.com with SMTP id j2so25033561uaq.5
 for <dri-devel@lists.freedesktop.org>; Mon, 29 Jul 2019 23:46:14 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=CWXxlRS+R1sDQEHnArdYXczXz/WzP/JyyPJ/zHrsj38=;
 b=Vo5sHTo9wQRGxR1PPj2grFkm6TiJJ93dADIUeKlAm6N++xekyHt3axcxLdnuRW63ma
 0J3TG5NNM2GLOB1BbqHUucKK40dqD2rRzCBtV6ODVYVT+3NnfLlM9powsF9/xkuMx3yq
 rCXjwq4z2vk7TtJPW1c68OGJtL7/hFGy6olW11wZ3C39PlYzrMRTBUW09U01n6edquee
 p0eTGa/UyeyKUZL29d3of+BZDLlTFVxgGIN7x7/Y7htrHifE0Vu3lZQBohwXtQdm8kDL
 A9K1rJL7e3KTZqB41OhZD/7acTFx72wlKYrLEn04v/AtXEr/vOstslyQzGVzLYuTRJbt
 zzhQ==
X-Gm-Message-State: APjAAAWA16FH7aH5pkj08j9oPwzXk96zm1YGj/ezfbOgIE3FjIUVAEF0
 YHj79Pm3HmuK9jpbWXx93j/7NMdoYsq1dNdFpsFgFrue
X-Google-Smtp-Source: APXvYqxLvQczo4pjR6O9UnRKCvlBsiRpspJAHiJv5npxkgE74HZD0yCdNfJ7AjWphMg+TOwXCR7o4nSAlTRG65u1Yxc=
X-Received: by 2002:ab0:74c7:: with SMTP id f7mr13968072uaq.106.1564469173828; 
 Mon, 29 Jul 2019 23:46:13 -0700 (PDT)
MIME-Version: 1.0
References: <20190729195526.13337-1-noralf@tronnes.org>
 <20190729195526.13337-3-noralf@tronnes.org>
In-Reply-To: <20190729195526.13337-3-noralf@tronnes.org>
From: =?UTF-8?B?Sm9zZWYgTHXFoXRpY2vDvQ==?= <josef@lusticky.cz>
Date: Tue, 30 Jul 2019 08:45:37 +0200
Message-ID: <CAMqqaJFmSa1CVMzrq4D0u40v7FBdJdhs8w-VNL7bGT17uV8VXA@mail.gmail.com>
Subject: Re: [RFC 2/4] drm/panel/ili9341: Rebase and some more
To: =?UTF-8?Q?Noralf_Tr=C3=B8nnes?= <noralf@tronnes.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=lusticky.cz; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=CWXxlRS+R1sDQEHnArdYXczXz/WzP/JyyPJ/zHrsj38=;
 b=TdipbO8Tpi7yfNIZlvp7RCXF8lUch0B+D0USP1GywWS1e8mk7LVFAApwjVKKmf/GYr
 DjKUpd+v3zAmOUTDZJqY1trxQNXVk1gAkATqIvOxn5c6154EM9f4pihvk8wVngFohCT4
 eBOeitdWRB3yM9GXmVwdqqb2mDrwkxYSCmoN8mAHcrry/KZJi1lU8Ojw6A4UhrUWI8I5
 /7PSbss545sacgwd0ivZpXQX3ip4OQ5vicIyQcKpqoqFCF/2ukrBzCRVjvCJjTzu7tDx
 cmSL4BjucFegtfk3MuGJIoh7vL1vd8reEMqDn5Xw/TunPWRxqiylcXusZllfHjsA8bPr
 /LyA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: daniel.vetter@ffwll.ch, dri-devel <dri-devel@lists.freedesktop.org>,
 Thierry Reding <thierry.reding@gmail.com>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgTm9yYWxmLApzZWUgY29tbWVudCBiZWxsb3cuCgpwbyAyOS4gNy4gMjAxOSB2IDIxOjU1IG9k
ZXPDrWxhdGVsIE5vcmFsZiBUcsO4bm5lcyA8bm9yYWxmQHRyb25uZXMub3JnPiBuYXBzYWw6Cj4K
PiBFbWJlZCBtaXBpX2RiaSBpbiBzdHJ1Y3QgaWxpOTM0MS4KPiBSZWJhc2Ugb24gbW92ZWQgbWlw
aS1kYmksIHJlbmFtZSB2YXJpYWJsZSBuYW1lLgo+IEFkZCBiYWNrbGlnaHRfZGV2aWNlIHRvIHBh
bmVsIHN0cnVjdC4KPiBtaXBpX2RiaV9od19yZXNldCgpIGFscmVhZHkgaGFzIGEgTlVMTCBjaGVj
ayBvbiB0aGUgcmVzZXQgZ3Bpby4KPiBQcmVwYXJlIGZvciBtb3JlIHBhbmVscyBieSByZXdvcmtp
bmcgaWxpOTM0MV9jb25maWcuCj4KPiBTaWduZWQtb2ZmLWJ5OiBOb3JhbGYgVHLDuG5uZXMgPG5v
cmFsZkB0cm9ubmVzLm9yZz4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWls
aXRlay1pbGk5MzQxLmMgfCAxMDQgKysrKysrKysrLS0tLS0tLS0tLQo+ICAxIGZpbGUgY2hhbmdl
ZCwgNTIgaW5zZXJ0aW9ucygrKSwgNTIgZGVsZXRpb25zKC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWlsaXRlay1pbGk5MzQxLmMgYi9kcml2ZXJzL2dwdS9k
cm0vcGFuZWwvcGFuZWwtaWxpdGVrLWlsaTkzNDEuYwo+IGluZGV4IDBjNzAwYjE3MTAyNS4uYTc1
NWYzZTYwMTExIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1pbGl0
ZWstaWxpOTM0MS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWlsaXRlay1p
bGk5MzQxLmMKPiBAQCAtMjgsNyArMjgsNyBAQAo+ICAjaW5jbHVkZSA8ZHJtL2RybV9tb2Rlcy5o
Pgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9wYW5lbC5oPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9wcmlu
dC5oPgo+IC0jaW5jbHVkZSA8ZHJtL3Rpbnlkcm0vbWlwaS1kYmkuaD4KPiArI2luY2x1ZGUgPGRy
bS9kcm1fbWlwaV9kYmkuaD4KPgo+ICAvKiBJTEk5MzQxIGV4dGVuZGVkIHJlZ2lzdGVyIHNldCAo
VmVuZG9yIENvbW1hbmQgU2V0KSAqLwo+ICAjZGVmaW5lIElMSTkzNDFfSUZNT0RFICAgICAgICAg
MHhCMCAvLyBjbG9jayBwb2xhcml0eQo+IEBAIC00MiwxNyArNDIsMTggQEAKPgo+ICAvKioKPiAg
ICogc3RydWN0IGlsaTkzNDFfY29uZmlnIC0gdGhlIGRpc3BsYXkgc3BlY2lmaWMgY29uZmlndXJh
dGlvbgo+IC0gKiBAd2lkdGhfbW06IHBoeXNpY2FsIHBhbmVsIHdpZHRoIFttbV0KPiAtICogQGhl
aWdodF9tbTogcGh5c2ljYWwgcGFuZWwgaGVpZ2h0IFttbV0KPiArICogQGZ1bmNzOiBQYW5lbCBm
dW5jdGlvbnMKPiArICogQG1vZGU6IERpc3BsYXkgbW9kZQo+ICAgKi8KPiAgc3RydWN0IGlsaTkz
NDFfY29uZmlnIHsKPiAtICAgICAgIHUzMiB3aWR0aF9tbTsKPiAtICAgICAgIHUzMiBoZWlnaHRf
bW07Cj4gKyAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX3BhbmVsX2Z1bmNzICpmdW5jczsKPiArICAg
ICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlOwo+ICB9Owo+Cj4gIHN0cnVj
dCBpbGk5MzQxIHsKPiAgICAgICAgIHN0cnVjdCBkcm1fcGFuZWwgcGFuZWw7Cj4gLSAgICAgICBz
dHJ1Y3QgbWlwaV9kYmkgKm1pcGk7Cj4gKyAgICAgICBzdHJ1Y3QgbWlwaV9kYmkgZGJpOwo+ICsg
ICAgICAgc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJhY2tsaWdodDsKPiAgICAgICAgIGNvbnN0
IHN0cnVjdCBpbGk5MzQxX2NvbmZpZyAqY29uZjsKPiAgfTsKPgo+IEBAIC02Myw0NyArNjQsNTAg
QEAgc3RhdGljIGlubGluZSBzdHJ1Y3QgaWxpOTM0MSAqcGFuZWxfdG9faWxpOTM0MShzdHJ1Y3Qg
ZHJtX3BhbmVsICpwYW5lbCkKPgo+ICBzdGF0aWMgaW50IGlsaTkzNDFfZGVpbml0KHN0cnVjdCBk
cm1fcGFuZWwgKnBhbmVsLCBzdHJ1Y3QgaWxpOTM0MSAqaWxpKQo+ICB7Cj4gLSAgICAgICBtaXBp
X2RiaV9jb21tYW5kKGlsaS0+bWlwaSwgTUlQSV9EQ1NfU0VUX0RJU1BMQVlfT0ZGKTsKPiAtICAg
ICAgIG1pcGlfZGJpX2NvbW1hbmQoaWxpLT5taXBpLCBNSVBJX0RDU19FTlRFUl9TTEVFUF9NT0RF
KTsKPiArICAgICAgIHN0cnVjdCBtaXBpX2RiaSAqZGJpID0gJmlsaS0+ZGJpOwo+ICsKPiArICAg
ICAgIG1pcGlfZGJpX2NvbW1hbmQoZGJpLCBNSVBJX0RDU19TRVRfRElTUExBWV9PRkYpOwo+ICsg
ICAgICAgbWlwaV9kYmlfY29tbWFuZChkYmksIE1JUElfRENTX0VOVEVSX1NMRUVQX01PREUpOwo+
ICAgICAgICAgbXNsZWVwKDUpOwo+ICAgICAgICAgcmV0dXJuIDA7Cj4gIH0KPgo+IC1zdGF0aWMg
aW50IGlsaTkzNDFfaW5pdChzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCwgc3RydWN0IGlsaTkzNDEg
KmlsaSkKPiArc3RhdGljIGludCBkdDAyNGN0ZnRfaW5pdChzdHJ1Y3QgZHJtX3BhbmVsICpwYW5l
bCwgc3RydWN0IGlsaTkzNDEgKmlsaSkKSSdkIHByZWZlciB0byBuYW1lIHRoaXMgZnVuY3Rpb24g
c29tZXRoaW5nIGxpa2UgaWxpOTM0MV9wcmdiX2luaXQuCkluIHRoZSBmdXR1cmUsIHRoZXJlIG1h
eSBiZSBtb3JlIGRpc3BsYXlzIHdpdGggSUxJOTM0MSBjaGlwIGFuZCBwcmdiIHN1cHBvcnQKYXBh
cnQgZnJvbSBEaXNwbGF5VGVjaCBEVDAyNENURlQuCj4gIHsKPiAtICAgICAgIC8qIEhXIC8gU1cg
UmVzZXQgZGlzcGxheSBhbmQgd2FpdCAqLwo+IC0gICAgICAgaWYgKGlsaS0+bWlwaS0+cmVzZXQp
Cj4gLSAgICAgICAgICAgICAgIG1pcGlfZGJpX2h3X3Jlc2V0KGlsaS0+bWlwaSk7Cj4gKyAgICAg
ICBzdHJ1Y3QgbWlwaV9kYmkgKmRiaSA9ICZpbGktPmRiaTsKPgo+IC0gICAgICAgbWlwaV9kYmlf
Y29tbWFuZChpbGktPm1pcGksIE1JUElfRENTX1NPRlRfUkVTRVQpOwo+ICsgICAgICAgLyogSFcg
LyBTVyBSZXNldCBkaXNwbGF5IGFuZCB3YWl0ICovCj4gKyAgICAgICBtaXBpX2RiaV9od19yZXNl
dChkYmkpOwo+ICsKPiArICAgICAgIG1pcGlfZGJpX2NvbW1hbmQoZGJpLCBNSVBJX0RDU19TT0ZU
X1JFU0VUKTsKPiAgICAgICAgIG1zbGVlcCgxMjApOwo+Cj4gICAgICAgICAvKiBQb2xhcml0eSAq
Lwo+IC0gICAgICAgbWlwaV9kYmlfY29tbWFuZChpbGktPm1pcGksIElMSTkzNDFfSUZNT0RFLCAw
eEMwKTsKPiArICAgICAgIG1pcGlfZGJpX2NvbW1hbmQoZGJpLCBJTEk5MzQxX0lGTU9ERSwgMHhD
MCk7Cj4KPiAgICAgICAgIC8qIEludGVyZmFjZSBjb250cm9sICovCj4gLSAgICAgICBtaXBpX2Ri
aV9jb21tYW5kKGlsaS0+bWlwaSwgSUxJOTM0MV9JRkNUTCwgMHgwOSwgMHgwMSwgMHgyNik7Cj4g
KyAgICAgICBtaXBpX2RiaV9jb21tYW5kKGRiaSwgSUxJOTM0MV9JRkNUTCwgMHgwOSwgMHgwMSwg
MHgyNik7Cj4KPiAgICAgICAgIC8qIFBpeGVsIGZvcm1hdCAqLwo+IC0gICAgICAgbWlwaV9kYmlf
Y29tbWFuZChpbGktPm1pcGksIE1JUElfRENTX1NFVF9QSVhFTF9GT1JNQVQsIE1JUElfRENTX1BJ
WEVMX0ZNVF8xOEJJVCA8PCA0KTsKPiArICAgICAgIG1pcGlfZGJpX2NvbW1hbmQoZGJpLCBNSVBJ
X0RDU19TRVRfUElYRUxfRk9STUFULCBNSVBJX0RDU19QSVhFTF9GTVRfMThCSVQgPDwgNCk7Cj4K
PiAgICAgICAgIC8qIEdhbW1hICovCj4gLSAgICAgICBtaXBpX2RiaV9jb21tYW5kKGlsaS0+bWlw
aSwgTUlQSV9EQ1NfU0VUX0dBTU1BX0NVUlZFLCAweDAxKTsKPiAtICAgICAgIG1pcGlfZGJpX2Nv
bW1hbmQoaWxpLT5taXBpLCBJTEk5MzQxX1BHQU1DVFJMLAo+ICsgICAgICAgbWlwaV9kYmlfY29t
bWFuZChkYmksIE1JUElfRENTX1NFVF9HQU1NQV9DVVJWRSwgMHgwMSk7Cj4gKyAgICAgICBtaXBp
X2RiaV9jb21tYW5kKGRiaSwgSUxJOTM0MV9QR0FNQ1RSTCwKPiAgICAgICAgICAgICAgICAgMHgw
ZiwgMHgzMSwgMHgyYiwgMHgwYywgMHgwZSwgMHgwOCwgMHg0ZSwgMHhmMSwKPiAgICAgICAgICAg
ICAgICAgMHgzNywgMHgwNywgMHgxMCwgMHgwMywgMHgwZSwgMHgwOSwgMHgwMCk7Cj4gLSAgICAg
ICBtaXBpX2RiaV9jb21tYW5kKGlsaS0+bWlwaSwgSUxJOTM0MV9OR0FNQ1RSTCwKPiArICAgICAg
IG1pcGlfZGJpX2NvbW1hbmQoZGJpLCBJTEk5MzQxX05HQU1DVFJMLAo+ICAgICAgICAgICAgICAg
ICAweDAwLCAweDBlLCAweDE0LCAweDAzLCAweDExLCAweDA3LCAweDMxLCAweGMxLAo+ICAgICAg
ICAgICAgICAgICAweDQ4LCAweDA4LCAweDBmLCAweDBjLCAweDMxLCAweDM2LCAweDBmKTsKPgo+
ICAgICAgICAgLyogUm90YXRpb24gKi8KPiAtICAgICAgIG1pcGlfZGJpX2NvbW1hbmQoaWxpLT5t
aXBpLCBNSVBJX0RDU19TRVRfQUREUkVTU19NT0RFLCBJTEk5MzQxX01BRENUTF9NWCk7Cj4gKyAg
ICAgICBtaXBpX2RiaV9jb21tYW5kKGRiaSwgTUlQSV9EQ1NfU0VUX0FERFJFU1NfTU9ERSwgSUxJ
OTM0MV9NQURDVExfTVgpOwo+Cj4gICAgICAgICAvKiBFeGl0IHNsZWVwIG1vZGUgKi8KPiAtICAg
ICAgIG1pcGlfZGJpX2NvbW1hbmQoaWxpLT5taXBpLCBNSVBJX0RDU19FWElUX1NMRUVQX01PREUp
Owo+ICsgICAgICAgbWlwaV9kYmlfY29tbWFuZChkYmksIE1JUElfRENTX0VYSVRfU0xFRVBfTU9E
RSk7Cj4gICAgICAgICBtc2xlZXAoMTIwKTsKPgo+IC0gICAgICAgbWlwaV9kYmlfY29tbWFuZChp
bGktPm1pcGksIE1JUElfRENTX1NFVF9ESVNQTEFZX09OKTsKPiArICAgICAgIG1pcGlfZGJpX2Nv
bW1hbmQoZGJpLCBNSVBJX0RDU19TRVRfRElTUExBWV9PTik7Cj4KPiAgICAgICAgIHJldHVybiAw
Owo+ICB9Cj4gQEAgLTExNSwxMiArMTE5LDEyIEBAIHN0YXRpYyBpbnQgaWxpOTM0MV91bnByZXBh
cmUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCj4gICAgICAgICByZXR1cm4gaWxpOTM0MV9kZWlu
aXQocGFuZWwsIGlsaSk7Cj4gIH0KPgo+IC1zdGF0aWMgaW50IGlsaTkzNDFfcHJlcGFyZShzdHJ1
Y3QgZHJtX3BhbmVsICpwYW5lbCkKPiArc3RhdGljIGludCBkdDAyNGN0ZnRfcHJlcGFyZShzdHJ1
Y3QgZHJtX3BhbmVsICpwYW5lbCkKPiAgewo+ICAgICAgICAgc3RydWN0IGlsaTkzNDEgKmlsaSA9
IHBhbmVsX3RvX2lsaTkzNDEocGFuZWwpOwo+ICAgICAgICAgaW50IHJldDsKPgo+IC0gICAgICAg
cmV0ID0gaWxpOTM0MV9pbml0KHBhbmVsLCBpbGkpOwo+ICsgICAgICAgcmV0ID0gZHQwMjRjdGZ0
X2luaXQocGFuZWwsIGlsaSk7Cj4gICAgICAgICBpZiAocmV0IDwgMCkKPiAgICAgICAgICAgICAg
ICAgaWxpOTM0MV91bnByZXBhcmUocGFuZWwpOwo+ICAgICAgICAgcmV0dXJuIHJldDsKPiBAQCAt
MTMwLDE0ICsxMzQsMTQgQEAgc3RhdGljIGludCBpbGk5MzQxX2VuYWJsZShzdHJ1Y3QgZHJtX3Bh
bmVsICpwYW5lbCkKPiAgewo+ICAgICAgICAgc3RydWN0IGlsaTkzNDEgKmlsaSA9IHBhbmVsX3Rv
X2lsaTkzNDEocGFuZWwpOwo+Cj4gLSAgICAgICByZXR1cm4gYmFja2xpZ2h0X2VuYWJsZShpbGkt
Pm1pcGktPmJhY2tsaWdodCk7Cj4gKyAgICAgICByZXR1cm4gYmFja2xpZ2h0X2VuYWJsZShpbGkt
PmJhY2tsaWdodCk7Cj4gIH0KPgo+ICBzdGF0aWMgaW50IGlsaTkzNDFfZGlzYWJsZShzdHJ1Y3Qg
ZHJtX3BhbmVsICpwYW5lbCkKPiAgewo+ICAgICAgICAgc3RydWN0IGlsaTkzNDEgKmlsaSA9IHBh
bmVsX3RvX2lsaTkzNDEocGFuZWwpOwo+Cj4gLSAgICAgICByZXR1cm4gYmFja2xpZ2h0X2Rpc2Fi
bGUoaWxpLT5taXBpLT5iYWNrbGlnaHQpOwo+ICsgICAgICAgcmV0dXJuIGJhY2tsaWdodF9kaXNh
YmxlKGlsaS0+YmFja2xpZ2h0KTsKPiAgfQo+Cj4gIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Rp
c3BsYXlfbW9kZSBwcmdiXzI0MHgzMjBfbW9kZSA9IHsKPiBAQCAtMTU0LDcgKzE1OCwxMCBAQCBz
dGF0aWMgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgcHJnYl8yNDB4MzIwX21vZGUgPSB7
Cj4gICAgICAgICAudnRvdGFsID0gMzIwICsgNCArIDIgKyAyLAo+Cj4gICAgICAgICAuZmxhZ3Mg
PSBEUk1fTU9ERV9GTEFHX05IU1lOQyB8IERSTV9NT0RFX0ZMQUdfTlZTWU5DLAo+IC0gICAgICAg
LnR5cGUgPSBEUk1fTU9ERV9UWVBFX0RSSVZFUiB8IERSTV9NT0RFX1RZUEVfUFJFRkVSUkVECj4g
KyAgICAgICAudHlwZSA9IERSTV9NT0RFX1RZUEVfRFJJVkVSIHwgRFJNX01PREVfVFlQRV9QUkVG
RVJSRUQsCj4gKwo+ICsgICAgICAgLndpZHRoX21tID0gMzcsCj4gKyAgICAgICAuaGVpZ2h0X21t
ID0gNDksCj4gIH07Cj4KPiAgc3RhdGljIGludCBpbGk5MzQxX2dldF9tb2RlcyhzdHJ1Y3QgZHJt
X3BhbmVsICpwYW5lbCkKPiBAQCAtMTYzLDcgKzE3MCw3IEBAIHN0YXRpYyBpbnQgaWxpOTM0MV9n
ZXRfbW9kZXMoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCj4gICAgICAgICBzdHJ1Y3QgaWxpOTM0
MSAqaWxpID0gcGFuZWxfdG9faWxpOTM0MShwYW5lbCk7Cj4gICAgICAgICBzdHJ1Y3QgZHJtX2Rp
c3BsYXlfbW9kZSAqbW9kZTsKPgo+IC0gICAgICAgbW9kZSA9IGRybV9tb2RlX2R1cGxpY2F0ZShw
YW5lbC0+ZHJtLCAmcHJnYl8yNDB4MzIwX21vZGUpOwo+ICsgICAgICAgbW9kZSA9IGRybV9tb2Rl
X2R1cGxpY2F0ZShwYW5lbC0+ZHJtLCBpbGktPmNvbmYtPm1vZGUpOwo+ICAgICAgICAgaWYgKCFt
b2RlKSB7Cj4gICAgICAgICAgICAgICAgIERSTV9ERVZfRVJST1IocGFuZWwtPmRybS0+ZGV2LCAi
YmFkIG1vZGUgb3IgZmFpbGVkIHRvIGFkZCBtb2RlXG4iKTsKPiAgICAgICAgICAgICAgICAgcmV0
dXJuIC1FTk9NRU07Cj4gQEAgLTE3MSw5ICsxNzgsNiBAQCBzdGF0aWMgaW50IGlsaTkzNDFfZ2V0
X21vZGVzKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQo+Cj4gICAgICAgICBkcm1fbW9kZV9zZXRf
bmFtZShtb2RlKTsKPgo+IC0gICAgICAgbW9kZS0+d2lkdGhfbW0gPSBpbGktPmNvbmYtPndpZHRo
X21tOwo+IC0gICAgICAgbW9kZS0+aGVpZ2h0X21tID0gaWxpLT5jb25mLT5oZWlnaHRfbW07Cj4g
LQo+ICAgICAgICAgY29ubmVjdG9yLT5kaXNwbGF5X2luZm8ud2lkdGhfbW0gPSBtb2RlLT53aWR0
aF9tbTsKPiAgICAgICAgIGNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLmhlaWdodF9tbSA9IG1vZGUt
PmhlaWdodF9tbTsKPiAgICAgICAgIGNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLmJ1c19mbGFncyB8
PSBEUk1fQlVTX0ZMQUdfREVfSElHSCB8Cj4gQEAgLTE4NCwzMSArMTg4LDMyIEBAIHN0YXRpYyBp
bnQgaWxpOTM0MV9nZXRfbW9kZXMoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCj4gICAgICAgICBy
ZXR1cm4gMTsgLyogTnVtYmVyIG9mIG1vZGVzICovCj4gIH0KPgo+IC1zdGF0aWMgY29uc3Qgc3Ry
dWN0IGRybV9wYW5lbF9mdW5jcyBpbGk5MzQxX2RybV9mdW5jcyA9IHsKPiArc3RhdGljIGNvbnN0
IHN0cnVjdCBkcm1fcGFuZWxfZnVuY3MgZHQwMjRjdGZ0X2RybV9mdW5jcyA9IHsKPiAgICAgICAg
IC5kaXNhYmxlID0gaWxpOTM0MV9kaXNhYmxlLAo+ICAgICAgICAgLnVucHJlcGFyZSA9IGlsaTkz
NDFfdW5wcmVwYXJlLAo+IC0gICAgICAgLnByZXBhcmUgPSBpbGk5MzQxX3ByZXBhcmUsCj4gKyAg
ICAgICAucHJlcGFyZSA9IGR0MDI0Y3RmdF9wcmVwYXJlLAo+ICAgICAgICAgLmVuYWJsZSA9IGls
aTkzNDFfZW5hYmxlLAo+ICAgICAgICAgLmdldF9tb2RlcyA9IGlsaTkzNDFfZ2V0X21vZGVzLAo+
ICB9Owo+Cj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3QgaWxpOTM0MV9jb25maWcgZHQwMjRjdGZ0X2Rh
dGEgPSB7Cj4gKyAgICAgICAuZnVuY3MgPSAmZHQwMjRjdGZ0X2RybV9mdW5jcywKPiArICAgICAg
IC5tb2RlID0gJnByZ2JfMjQweDMyMF9tb2RlLAo+ICt9Owo+ICsKPiAgc3RhdGljIGludCBpbGk5
MzQxX3Byb2JlKHN0cnVjdCBzcGlfZGV2aWNlICpzcGkpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBk
ZXZpY2UgKmRldiA9ICZzcGktPmRldjsKPiAgICAgICAgIHN0cnVjdCBpbGk5MzQxICppbGk7Cj4g
LSAgICAgICBzdHJ1Y3QgbWlwaV9kYmkgKm1pcGk7Cj4gKyAgICAgICBzdHJ1Y3QgbWlwaV9kYmkg
KmRiaTsKPiAgICAgICAgIHN0cnVjdCBncGlvX2Rlc2MgKmRjX2dwaW87Cj4gICAgICAgICBpbnQg
cmV0Owo+Cj4gLSAgICAgICBtaXBpID0gZGV2bV9remFsbG9jKGRldiwgc2l6ZW9mKCptaXBpKSwg
R0ZQX0tFUk5FTCk7Cj4gLSAgICAgICBpZiAoIW1pcGkpCj4gLSAgICAgICAgICAgICAgIHJldHVy
biAtRU5PTUVNOwo+IC0KPiAgICAgICAgIGlsaSA9IGRldm1fa3phbGxvYyhkZXYsIHNpemVvZigq
aWxpKSwgR0ZQX0tFUk5FTCk7Cj4gICAgICAgICBpZiAoIWlsaSkKPiAgICAgICAgICAgICAgICAg
cmV0dXJuIC1FTk9NRU07Cj4KPiAtICAgICAgIGlsaS0+bWlwaSA9IG1pcGk7Cj4gKyAgICAgICBk
YmkgPSAmaWxpLT5kYmk7Cj4KPiAgICAgICAgIHNwaV9zZXRfZHJ2ZGF0YShzcGksIGlsaSk7Cj4K
PiBAQCAtMjIyLDE2ICsyMjcsMTYgQEAgc3RhdGljIGludCBpbGk5MzQxX3Byb2JlKHN0cnVjdCBz
cGlfZGV2aWNlICpzcGkpCj4gICAgICAgICAgICAgICAgIHJldHVybiAtRU5PREVWOwo+ICAgICAg
ICAgfQo+Cj4gLSAgICAgICBpbGktPm1pcGktPnJlc2V0ID0gZGV2bV9ncGlvZF9nZXRfb3B0aW9u
YWwoZGV2LCAicmVzZXQiLCBHUElPRF9PVVRfSElHSCk7Cj4gLSAgICAgICBpZiAoSVNfRVJSKGls
aS0+bWlwaS0+cmVzZXQpKSB7Cj4gKyAgICAgICBkYmktPnJlc2V0ID0gZGV2bV9ncGlvZF9nZXRf
b3B0aW9uYWwoZGV2LCAicmVzZXQiLCBHUElPRF9PVVRfSElHSCk7Cj4gKyAgICAgICBpZiAoSVNf
RVJSKGRiaS0+cmVzZXQpKSB7Cj4gICAgICAgICAgICAgICAgIERSTV9ERVZfRVJST1IoZGV2LCAi
ZmFpbGVkIHRvIGdldCBncGlvICdyZXNldCdcbiIpOwo+IC0gICAgICAgICAgICAgICByZXR1cm4g
UFRSX0VSUihpbGktPm1pcGktPnJlc2V0KTsKPiArICAgICAgICAgICAgICAgcmV0dXJuIFBUUl9F
UlIoZGJpLT5yZXNldCk7Cj4gICAgICAgICB9Cj4KPiAtICAgICAgIGlsaS0+bWlwaS0+YmFja2xp
Z2h0ID0gZGV2bV9vZl9maW5kX2JhY2tsaWdodChkZXYpOwo+IC0gICAgICAgaWYgKElTX0VSUihp
bGktPm1pcGktPmJhY2tsaWdodCkpIHsKPiArICAgICAgIGlsaS0+YmFja2xpZ2h0ID0gZGV2bV9v
Zl9maW5kX2JhY2tsaWdodChkZXYpOwo+ICsgICAgICAgaWYgKElTX0VSUihpbGktPmJhY2tsaWdo
dCkpIHsKPiAgICAgICAgICAgICAgICAgRFJNX0RFVl9FUlJPUihkZXYsICJmYWlsZWQgdG8gZ2V0
IGJhY2tsaWdodFxuIik7Cj4gLSAgICAgICAgICAgICAgIHJldHVybiBQVFJfRVJSKGlsaS0+bWlw
aS0+YmFja2xpZ2h0KTsKPiArICAgICAgICAgICAgICAgcmV0dXJuIFBUUl9FUlIoaWxpLT5iYWNr
bGlnaHQpOwo+ICAgICAgICAgfQo+Cj4gICAgICAgICBkY19ncGlvID0gZGV2bV9ncGlvZF9nZXRf
b3B0aW9uYWwoZGV2LCAiZGMiLCBHUElPRF9PVVRfTE9XKTsKPiBAQCAtMjQwLDcgKzI0NSw3IEBA
IHN0YXRpYyBpbnQgaWxpOTM0MV9wcm9iZShzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpKQo+ICAgICAg
ICAgICAgICAgICByZXR1cm4gUFRSX0VSUihkY19ncGlvKTsKPiAgICAgICAgIH0KPgo+IC0gICAg
ICAgcmV0ID0gbWlwaV9kYmlfc3BpX2luaXQoc3BpLCBpbGktPm1pcGksIGRjX2dwaW8pOwo+ICsg
ICAgICAgcmV0ID0gbWlwaV9kYmlfc3BpX2luaXQoc3BpLCBkYmksIGRjX2dwaW8pOwo+ICAgICAg
ICAgaWYgKHJldCkgewo+ICAgICAgICAgICAgICAgICBEUk1fREVWX0VSUk9SKGRldiwgIk1JUEkt
REJJIFNQSSBzZXR1cCBmYWlsZWRcbiIpOwo+ICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+
IEBAIC0yNDgsNyArMjUzLDcgQEAgc3RhdGljIGludCBpbGk5MzQxX3Byb2JlKHN0cnVjdCBzcGlf
ZGV2aWNlICpzcGkpCj4KPiAgICAgICAgIGRybV9wYW5lbF9pbml0KCZpbGktPnBhbmVsKTsKPiAg
ICAgICAgIGlsaS0+cGFuZWwuZGV2ID0gZGV2Owo+IC0gICAgICAgaWxpLT5wYW5lbC5mdW5jcyA9
ICZpbGk5MzQxX2RybV9mdW5jczsKPiArICAgICAgIGlsaS0+cGFuZWwuZnVuY3MgPSBpbGktPmNv
bmYtPmZ1bmNzOwo+Cj4gICAgICAgICByZXR1cm4gZHJtX3BhbmVsX2FkZCgmaWxpLT5wYW5lbCk7
Cj4gIH0KPiBAQCAtMjY1LDExICsyNzAsNiBAQCBzdGF0aWMgaW50IGlsaTkzNDFfcmVtb3ZlKHN0
cnVjdCBzcGlfZGV2aWNlICpzcGkpCj4gICAgICAgICByZXR1cm4gMDsKPiAgfQo+Cj4gLXN0YXRp
YyBjb25zdCBzdHJ1Y3QgaWxpOTM0MV9jb25maWcgZHQwMjRjdGZ0X2RhdGEgPSB7Cj4gLSAgICAg
ICAud2lkdGhfbW0gPSAzNywKPiAtICAgICAgIC5oZWlnaHRfbW0gPSA0OSwKPiAtfTsKPiAtCj4g
IHN0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIGlsaTkzNDFfb2ZfbWF0Y2hbXSA9IHsK
PiAgICAgICAgIHsgLmNvbXBhdGlibGUgPSAiZGlzcGxheXRlY2gsZHQwMjRjdGZ0IiwgLmRhdGEg
PSAmZHQwMjRjdGZ0X2RhdGEgfSwKPiAgICAgICAgIHsgLyogc2VudGluZWwgKi8gfQo+IC0tCj4g
Mi4yMC4xCj4KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
ZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
