Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7991895EC9
	for <lists+dri-devel@lfdr.de>; Tue, 20 Aug 2019 14:36:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3828D6E2D1;
	Tue, 20 Aug 2019 12:36:02 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 215846E2D1
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 12:36:01 +0000 (UTC)
Received: from mail-qt1-f179.google.com (mail-qt1-f179.google.com
 [209.85.160.179])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id D22EE233FE
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 12:36:00 +0000 (UTC)
Received: by mail-qt1-f179.google.com with SMTP id 44so5742728qtg.11
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 05:36:00 -0700 (PDT)
X-Gm-Message-State: APjAAAUIHN6jDqVZ7oRciAcEIIGGhUveAN64yUSvOUOcNNLmOfkGiYxM
 bez07618orTB6XvTKVUUHzz631TMaRO3b1Wjlw==
X-Google-Smtp-Source: APXvYqyzm0BdHn7rvRpf4kjVYwvj+ZoKnXPsfPAdGh0Z6VlOGkZH/bvPtscGtW7OVD04nM+PVbg6wAzmWAYgyjIBQPI=
X-Received: by 2002:ac8:7593:: with SMTP id s19mr25885974qtq.136.1566304559948; 
 Tue, 20 Aug 2019 05:35:59 -0700 (PDT)
MIME-Version: 1.0
References: <20190819161204.3106-1-robh@kernel.org>
 <20190819161204.3106-3-robh@kernel.org>
 <20190820090543.GE11147@phenom.ffwll.local>
In-Reply-To: <20190820090543.GE11147@phenom.ffwll.local>
From: Rob Herring <robh@kernel.org>
Date: Tue, 20 Aug 2019 07:35:47 -0500
X-Gmail-Original-Message-ID: <CAL_JsqL5JsFbQAe1DJ1AbtYjZjVv1++ooH4hxEhiQUzw3MVjXA@mail.gmail.com>
Message-ID: <CAL_JsqL5JsFbQAe1DJ1AbtYjZjVv1++ooH4hxEhiQUzw3MVjXA@mail.gmail.com>
Subject: Re: [PATCH 2/4] drm/shmem: Use mutex_trylock in drm_gem_shmem_purge
To: Daniel Vetter <daniel@ffwll.ch>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=kernel.org; s=default; t=1566304561;
 bh=Sk5uXbefh5unf2hhXRpkCG975rclGvXy+v5qBo0bk5M=;
 h=References:In-Reply-To:From:Date:Subject:To:Cc:From;
 b=UI2siSmmfOh9BPyJLTbJ7T4i2uP7XTFMQ4oqNK3zVwM7N1JEXIyHLlSS+MsjD0jwH
 WaGQRCzncu7DcHXSPcyyjA9Kyrj8OrHCoeCz1eOA/EqRb4q6hP4O1HQccCGOqFtUYL
 wgydQA041jdb25gY8c9KGm+1JcjdlWn7UV4+p3Qs=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Tomeu Vizoso <tomeu.vizoso@collabora.com>, David Airlie <airlied@linux.ie>,
 Sean Paul <sean@poorly.run>, dri-devel <dri-devel@lists.freedesktop.org>,
 Steven Price <steven.price@arm.com>,
 Boris Brezillon <boris.brezillon@collabora.com>,
 Robin Murphy <robin.murphy@arm.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBBdWcgMjAsIDIwMTkgYXQgNDowNSBBTSBEYW5pZWwgVmV0dGVyIDxkYW5pZWxAZmZ3
bGwuY2g+IHdyb3RlOgo+Cj4gT24gTW9uLCBBdWcgMTksIDIwMTkgYXQgMTE6MTI6MDJBTSAtMDUw
MCwgUm9iIEhlcnJpbmcgd3JvdGU6Cj4gPiBMb2NrZGVwIHJlcG9ydHMgYSBjaXJjdWxhciBsb2Nr
aW5nIGRlcGVuZGVuY3kgd2l0aCBwYWdlc19sb2NrIHRha2VuIGluCj4gPiB0aGUgc2hyaW5rZXIg
Y2FsbGJhY2suIFRoZSBkZWFkbG9jayBjYW4ndCBhY3R1YWxseSBoYXBwZW4gd2l0aCBjdXJyZW50
Cj4gPiB1c2VycyBhdCBsZWFzdCBhcyBhIEJPIHdpbGwgbmV2ZXIgYmUgcHVyZ2VhYmxlIHdoZW4g
cGFnZXNfbG9jayBpcyBoZWxkLgo+ID4gVG8gYmUgc2FmZSwgbGV0J3MgdXNlIG11dGV4X3RyeWxv
Y2soKSBpbnN0ZWFkIGFuZCBiYWlsIGlmIGEgQk8gaXMgbG9ja2VkCj4gPiBhbHJlYWR5Lgo+ID4K
PiA+IFdBUk5JTkc6IHBvc3NpYmxlIGNpcmN1bGFyIGxvY2tpbmcgZGVwZW5kZW5jeSBkZXRlY3Rl
ZAo+ID4gNS4zLjAtcmMxKyAjMTAwIFRhaW50ZWQ6IEcgICAgICAgICAgICAgTAo+ID4gLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiBrc3dh
cGQwLzE3MSBpcyB0cnlpbmcgdG8gYWNxdWlyZSBsb2NrOgo+ID4gMDAwMDAwMDA5Yjk4MjNmZCAo
JnNobWVtLT5wYWdlc19sb2NrKXsrLisufSwgYXQ6IGRybV9nZW1fc2htZW1fcHVyZ2UrMHgyMC8w
eDQwCj4gPgo+ID4gYnV0IHRhc2sgaXMgYWxyZWFkeSBob2xkaW5nIGxvY2s6Cj4gPiAwMDAwMDAw
MGY4MjM2OWI2IChmc19yZWNsYWltKXsrLisufSwgYXQ6IF9fZnNfcmVjbGFpbV9hY3F1aXJlKzB4
MC8weDQwCj4gPgo+ID4gd2hpY2ggbG9jayBhbHJlYWR5IGRlcGVuZHMgb24gdGhlIG5ldyBsb2Nr
Lgo+ID4KPiA+IHRoZSBleGlzdGluZyBkZXBlbmRlbmN5IGNoYWluIChpbiByZXZlcnNlIG9yZGVy
KSBpczoKPiA+Cj4gPiAtPiAjMSAoZnNfcmVjbGFpbSl7Ky4rLn06Cj4gPiAgICAgICAgZnNfcmVj
bGFpbV9hY3F1aXJlLnBhcnQuMTgrMHgzNC8weDQwCj4gPiAgICAgICAgZnNfcmVjbGFpbV9hY3F1
aXJlKzB4MjAvMHgyOAo+ID4gICAgICAgIF9fa21hbGxvY19ub2RlKzB4NmMvMHg0YzAKPiA+ICAg
ICAgICBrdm1hbGxvY19ub2RlKzB4MzgvMHhhOAo+ID4gICAgICAgIGRybV9nZW1fZ2V0X3BhZ2Vz
KzB4ODAvMHgxZDAKPiA+ICAgICAgICBkcm1fZ2VtX3NobWVtX2dldF9wYWdlcysweDU4LzB4YTAK
PiA+ICAgICAgICBkcm1fZ2VtX3NobWVtX2dldF9wYWdlc19zZ3QrMHg0OC8weGQwCj4gPiAgICAg
ICAgcGFuZnJvc3RfbW11X21hcCsweDM4LzB4ZjggW3BhbmZyb3N0XQo+ID4gICAgICAgIHBhbmZy
b3N0X2dlbV9vcGVuKzB4YzAvMHhlOCBbcGFuZnJvc3RdCj4gPiAgICAgICAgZHJtX2dlbV9oYW5k
bGVfY3JlYXRlX3RhaWwrMHhlOC8weDE5OAo+ID4gICAgICAgIGRybV9nZW1faGFuZGxlX2NyZWF0
ZSsweDNjLzB4NTAKPiA+ICAgICAgICBwYW5mcm9zdF9nZW1fY3JlYXRlX3dpdGhfaGFuZGxlKzB4
NzAvMHhhMCBbcGFuZnJvc3RdCj4gPiAgICAgICAgcGFuZnJvc3RfaW9jdGxfY3JlYXRlX2JvKzB4
NDgvMHg4MCBbcGFuZnJvc3RdCj4gPiAgICAgICAgZHJtX2lvY3RsX2tlcm5lbCsweGI4LzB4MTEw
Cj4gPiAgICAgICAgZHJtX2lvY3RsKzB4MjQ0LzB4M2YwCj4gPiAgICAgICAgZG9fdmZzX2lvY3Rs
KzB4YmMvMHg5MTAKPiA+ICAgICAgICBrc3lzX2lvY3RsKzB4NzgvMHhhOAo+ID4gICAgICAgIF9f
YXJtNjRfc3lzX2lvY3RsKzB4MWMvMHgyOAo+ID4gICAgICAgIGVsMF9zdmNfY29tbW9uLmNvbnN0
cHJvcC4wKzB4OTAvMHgxNjgKPiA+ICAgICAgICBlbDBfc3ZjX2hhbmRsZXIrMHgyOC8weDc4Cj4g
PiAgICAgICAgZWwwX3N2YysweDgvMHhjCj4gPgo+ID4gLT4gIzAgKCZzaG1lbS0+cGFnZXNfbG9j
ayl7Ky4rLn06Cj4gPiAgICAgICAgX19sb2NrX2FjcXVpcmUrMHhhMmMvMHgxZDcwCj4gPiAgICAg
ICAgbG9ja19hY3F1aXJlKzB4ZGMvMHgyMjgKPiA+ICAgICAgICBfX211dGV4X2xvY2srMHg4Yy8w
eDgwMAo+ID4gICAgICAgIG11dGV4X2xvY2tfbmVzdGVkKzB4MWMvMHgyOAo+ID4gICAgICAgIGRy
bV9nZW1fc2htZW1fcHVyZ2UrMHgyMC8weDQwCj4gPiAgICAgICAgcGFuZnJvc3RfZ2VtX3Nocmlu
a2VyX3NjYW4rMHhjMC8weDE4MCBbcGFuZnJvc3RdCj4gPiAgICAgICAgZG9fc2hyaW5rX3NsYWIr
MHgyMDgvMHg1MDAKPiA+ICAgICAgICBzaHJpbmtfc2xhYisweDEwYy8weDJjMAo+ID4gICAgICAg
IHNocmlua19ub2RlKzB4MjhjLzB4NGQ4Cj4gPiAgICAgICAgYmFsYW5jZV9wZ2RhdCsweDJjOC8w
eDU3MAo+ID4gICAgICAgIGtzd2FwZCsweDIyYy8weDYzOAo+ID4gICAgICAgIGt0aHJlYWQrMHgx
MjgvMHgxMzAKPiA+ICAgICAgICByZXRfZnJvbV9mb3JrKzB4MTAvMHgxOAo+ID4KPiA+IG90aGVy
IGluZm8gdGhhdCBtaWdodCBoZWxwIHVzIGRlYnVnIHRoaXM6Cj4gPgo+ID4gIFBvc3NpYmxlIHVu
c2FmZSBsb2NraW5nIHNjZW5hcmlvOgo+ID4KPiA+ICAgICAgICBDUFUwICAgICAgICAgICAgICAg
ICAgICBDUFUxCj4gPiAgICAgICAgLS0tLSAgICAgICAgICAgICAgICAgICAgLS0tLQo+ID4gICBs
b2NrKGZzX3JlY2xhaW0pOwo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2so
JnNobWVtLT5wYWdlc19sb2NrKTsKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBs
b2NrKGZzX3JlY2xhaW0pOwo+ID4gICBsb2NrKCZzaG1lbS0+cGFnZXNfbG9jayk7Cj4gPgo+ID4g
ICoqKiBERUFETE9DSyAqKioKPiA+Cj4gPiAzIGxvY2tzIGhlbGQgYnkga3N3YXBkMC8xNzE6Cj4g
PiAgIzA6IDAwMDAwMDAwZjgyMzY5YjYgKGZzX3JlY2xhaW0peysuKy59LCBhdDogX19mc19yZWNs
YWltX2FjcXVpcmUrMHgwLzB4NDAKPiA+ICAjMTogMDAwMDAwMDBjZWIzNzgwOCAoc2hyaW5rZXJf
cndzZW0peysrKyt9LCBhdDogc2hyaW5rX3NsYWIrMHhiYy8weDJjMAo+ID4gICMyOiAwMDAwMDAw
MGYzMWVmYTgxICgmcGZkZXYtPnNocmlua2VyX2xvY2speysuKy59LCBhdDogcGFuZnJvc3RfZ2Vt
X3Nocmlua2VyX3NjYW4rMHgzNC8weDE4MCBbcGFuZnJvc3RdCj4gPgo+ID4gRml4ZXM6IDE3YWNi
OWYzNWVkNyAoImRybS9zaG1lbTogQWRkIG1hZHZpc2Ugc3RhdGUgYW5kIHB1cmdlIGhlbHBlcnMi
KQo+ID4gQ2M6IE1hYXJ0ZW4gTGFua2hvcnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51eC5pbnRl
bC5jb20+Cj4gPiBDYzogTWF4aW1lIFJpcGFyZCA8bWF4aW1lLnJpcGFyZEBib290bGluLmNvbT4K
PiA+IENjOiBTZWFuIFBhdWwgPHNlYW5AcG9vcmx5LnJ1bj4KPiA+IENjOiBEYXZpZCBBaXJsaWUg
PGFpcmxpZWRAbGludXguaWU+Cj4gPiBDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xsLmNo
Pgo+ID4gU2lnbmVkLW9mZi1ieTogUm9iIEhlcnJpbmcgPHJvYmhAa2VybmVsLm9yZz4KPiA+IC0t
LQo+ID4gIGRyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jIHwgNyArKysrKy0t
Cj4gPiAgaW5jbHVkZS9kcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIuaCAgICAgfCAyICstCj4gPiAg
MiBmaWxlcyBjaGFuZ2VkLCA2IGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pCj4gPgo+ID4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jIGIvZHJp
dmVycy9ncHUvZHJtL2RybV9nZW1fc2htZW1faGVscGVyLmMKPiA+IGluZGV4IDU0MjNlYzU2YjUz
NS4uZjU5MTg3MDc2NzJmIDEwMDY0NAo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1f
c2htZW1faGVscGVyLmMKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hl
bHBlci5jCj4gPiBAQCAtNDE1LDEzICs0MTUsMTYgQEAgdm9pZCBkcm1fZ2VtX3NobWVtX3B1cmdl
X2xvY2tlZChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKPiA+ICB9Cj4gPiAgRVhQT1JUX1NZ
TUJPTChkcm1fZ2VtX3NobWVtX3B1cmdlX2xvY2tlZCk7Cj4gPgo+ID4gLXZvaWQgZHJtX2dlbV9z
aG1lbV9wdXJnZShzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKPiA+ICtib29sIGRybV9nZW1f
c2htZW1fcHVyZ2Uoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCj4gPiAgewo+ID4gICAgICAg
c3RydWN0IGRybV9nZW1fc2htZW1fb2JqZWN0ICpzaG1lbSA9IHRvX2RybV9nZW1fc2htZW1fb2Jq
KG9iaik7Cj4gPgo+ID4gLSAgICAgbXV0ZXhfbG9jaygmc2htZW0tPnBhZ2VzX2xvY2spOwo+ID4g
KyAgICAgaWYgKCFtdXRleF90cnlsb2NrKCZzaG1lbS0+cGFnZXNfbG9jaykpCj4KPiBEaWQgeW91
IHNlZSBteSBwaW5nIGFib3V0IGN1dHRpbmcgYWxsIHRoZSBsb2NraW5nIG92ZXIgdG8gZG1hX3Jl
c3Y/CgpZZXMsIGJ1dCB5b3UgZGlkbid0IHJlcGx5IHRvIFJvYiBDLiBhYm91dCBpdC4gSSBndWVz
cyBJJ2xsIGhhdmUgdG8gZ28KZmlndXJlIG91dCBob3cgcmVzZXJ2YXRpb24gb2JqZWN0cyB3b3Jr
Li4uCgo+IFdvdWxkCj4gYWxpZ24gc2htZW0gaGVscGVycyB3aXRoIHR0bSBhIGxvdCBtb3JlLCBm
b3IgdGhhdCBicmlnaHQgZ2xvcmlvdXMgZnV0dXJlCj4gdGFzdGUuIFNob3VsZCB3ZSBjYXB0dXJl
IHRoYXQgaW4gc29tZSB0b2RvLnJzdCBlbnRyeT8KClN1cmUuCgpSb2IKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApk
cmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
