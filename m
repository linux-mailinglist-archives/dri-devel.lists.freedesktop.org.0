Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B37253D145
	for <lists+dri-devel@lfdr.de>; Tue, 11 Jun 2019 17:47:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4937C8922A;
	Tue, 11 Jun 2019 15:46:59 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x544.google.com (mail-ed1-x544.google.com
 [IPv6:2a00:1450:4864:20::544])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7BD738922A
 for <dri-devel@lists.freedesktop.org>; Tue, 11 Jun 2019 15:46:57 +0000 (UTC)
Received: by mail-ed1-x544.google.com with SMTP id w33so20783531edb.10
 for <dri-devel@lists.freedesktop.org>; Tue, 11 Jun 2019 08:46:57 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:date:from:to:cc:subject:message-id
 :references:mime-version:content-disposition:in-reply-to:user-agent;
 bh=lMz9703vlKeV7mzsDDgBqi+4Ala0QcHLWsLbTPKIHwY=;
 b=mYYxr9XdDKuN9jXoVPXvtDshbiGZN64k/lYBjamjpaRugQDVFCHJ9vXiiMOF6OEtNb
 UO+04c47EXtc+W6QSpVntzxXJJS3AfmhIovNYveLL2L4MAVta2TCBMO7/WeSkmePrij7
 79aZ0ygl3s7IAyaOnq0sgGEs+PjqImqDXKLiv5gQU/B4VkJ1rVY8uOxWeVgt9GPEyjy8
 aP20HfcgOA6/sCh1H+Mkunr+Xo2rjvNrhI8ww5388pqgUGCQoaQWKgoCqyLl82wjRip6
 Uv33fa2Ondnn5sc3lKuFgzbyo8KDEN7mZEE+disFbWrO9tNvq+6adSjSyYiee35F+GKX
 fmwA==
X-Gm-Message-State: APjAAAWmxs15eZSPFQCjSBdPqfnfIVQBB+Tc0ta6jPAmOk5BOlD0jv9R
 d1K2Dky3q8/njlEdOpdSgAHIYQ==
X-Google-Smtp-Source: APXvYqwyzdFmLMoaLwZlluebt2127UtHLTQ2NFksRC9pZLfkSAdUnYhY6G0lVsyeY4eiealDXGawsQ==
X-Received: by 2002:a50:ca48:: with SMTP id e8mr5821991edi.101.1560268015995; 
 Tue, 11 Jun 2019 08:46:55 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id k51sm2681548edb.7.2019.06.11.08.46.53
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Tue, 11 Jun 2019 08:46:54 -0700 (PDT)
Date: Tue, 11 Jun 2019 17:46:52 +0200
From: Daniel Vetter <daniel@ffwll.ch>
To: Thomas Zimmermann <tzimmermann@suse.de>
Subject: Re: [PATCH v2] drm: Reverse lock order in DRM display-panning
 helpers()
Message-ID: <20190611154652.GH2458@phenom.ffwll.local>
References: <20190611143114.24003-1-tzimmermann@suse.de>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190611143114.24003-1-tzimmermann@suse.de>
X-Operating-System: Linux phenom 4.14.0-3-amd64 
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=sender:date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=lMz9703vlKeV7mzsDDgBqi+4Ala0QcHLWsLbTPKIHwY=;
 b=P0oVGOdW80Q+4sbMO5/h0lIZuKrxuhKzECe5TC6Me/S3ToW1DkWTQHxTzn1sBNV3EG
 UDXx89/5LmfvAmRiwM67mW7i0G0ZOadswoqbqmY6DJNnq7DZD4/FJa7BpO0HrAcapKyz
 2YUmcq6TS/af+/rVYHLnpHxaHaxxMpGOq2n0s=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: sam@ravnborg.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBKdW4gMTEsIDIwMTkgYXQgMDQ6MzE6MTRQTSArMDIwMCwgVGhvbWFzIFppbW1lcm1h
bm4gd3JvdGU6Cj4gRHVyaW5nIGRpc3BsYXkgcGFubmluZywgYWNxdWlyaW5nIGRybV9jbGllbnRf
ZGV2Lm1vZGVzZXRfbXV0ZXggYWZ0ZXIgdGhlCj4gbG9ja3MgaW4gZHJtX2ZiX2hlbHBlci5kZXYg
Y3JlYXRlcyBhIGRlYWRsb2NrIHdpdGggZHJtX3NldHVwX2NydGNzKCkgYXMKPiBzaG93biBiZWxv
dzoKPiAKPiAgIFsgICAgNC45NTkzMTldIGZiY29uOiByYWRlb25kcm1mYiAoZmIwKSBpcyBwcmlt
YXJ5IGRldmljZQo+ICAgWyAgICA0Ljk5Mzk1Ml0gQ29uc29sZTogc3dpdGNoaW5nIHRvIGNvbG91
ciBmcmFtZSBidWZmZXIgZGV2aWNlIDI0MHg2Nwo+ICAgWyAgICA0Ljk5NDA0MF0KPiAgIFsgICAg
NC45OTQwNDFdID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PQo+ICAgWyAgICA0Ljk5NDA0MV0gV0FSTklORzogcG9zc2libGUgY2lyY3VsYXIgbG9j
a2luZyBkZXBlbmRlbmN5IGRldGVjdGVkCj4gICBbICAgIDQuOTk0MDQyXSA1LjIuMC1yYzQtMS1k
ZWZhdWx0KyAjMzkgVGFpbnRlZDogRyAgICAgICAgICAgIEUKPiAgIFsgICAgNC45OTQwNDNdIC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ICAg
WyAgICA0Ljk5NDA0M10gc3lzdGVtZC11ZGV2ZC8zNjkgaXMgdHJ5aW5nIHRvIGFjcXVpcmUgbG9j
azoKPiAgIFsgICAgNC45OTQwNDRdIDAwMDAwMDAwZmI2MjJhY2IgKCZjbGllbnQtPm1vZGVzZXRf
bXV0ZXgpeysuKy59LCBhdDogZHJtX2ZiX2hlbHBlcl9wYW5fZGlzcGxheSsweDEwMy8weDFmMCBb
ZHJtX2ttc19oZWxwZXJdCj4gICBbICAgIDQuOTk0MDU1XQo+ICAgWyAgICA0Ljk5NDA1NV0gYnV0
IHRhc2sgaXMgYWxyZWFkeSBob2xkaW5nIGxvY2s6Cj4gICBbICAgIDQuOTk0MDU1XSAwMDAwMDAw
MDI4NzY3YWU0IChjcnRjX3d3X2NsYXNzX211dGV4KXsrLisufSwgYXQ6IGRybV9tb2Rlc2V0X2xv
Y2srMHg0Mi8weGYwIFtkcm1dCj4gICBbICAgIDQuOTk0MDcyXQo+ICAgWyAgICA0Ljk5NDA3Ml0g
d2hpY2ggbG9jayBhbHJlYWR5IGRlcGVuZHMgb24gdGhlIG5ldyBsb2NrLgo+ICAgWyAgICA0Ljk5
NDA3Ml0KPiAgIFsgICAgNC45OTQwNzJdCj4gICBbICAgIDQuOTk0MDcyXSB0aGUgZXhpc3Rpbmcg
ZGVwZW5kZW5jeSBjaGFpbiAoaW4gcmV2ZXJzZSBvcmRlcikgaXM6Cj4gICBbICAgIDQuOTk0MDcz
XQo+ICAgWyAgICA0Ljk5NDA3M10gLT4gIzMgKGNydGNfd3dfY2xhc3NfbXV0ZXgpeysuKy59Ogo+
ICAgWyAgICA0Ljk5NDA3Nl0gICAgICAgIGxvY2tfYWNxdWlyZSsweDllLzB4MTcwCj4gICBbICAg
IDQuOTk0MDc5XSAgICAgICAgX193d19tdXRleF9sb2NrLmNvbnN0cHJvcC4xOCsweDk3LzB4ZjQw
Cj4gICBbICAgIDQuOTk0MDgwXSAgICAgICAgd3dfbXV0ZXhfbG9jaysweDMwLzB4OTAKPiAgIFsg
ICAgNC45OTQwOTFdICAgICAgICBkcm1fbW9kZXNldF9sb2NrKzB4NDIvMHhmMCBbZHJtXQo+ICAg
WyAgICA0Ljk5NDEwMl0gICAgICAgIGRybV9tb2Rlc2V0X2xvY2tfYWxsX2N0eCsweDFmLzB4ZTAg
W2RybV0KPiAgIFsgICAgNC45OTQxMTNdICAgICAgICBkcm1fbW9kZXNldF9sb2NrX2FsbCsweDVl
LzB4MWEwIFtkcm1dCj4gICBbICAgIDQuOTk0MTYzXSAgICAgICAgaW50ZWxfbW9kZXNldF9pbml0
KzB4NjBiLzB4ZGEwIFtpOTE1XQo+ICAgLi4KPiAgIFsgICAgNC45OTQyNTNdCj4gICBbICAgIDQu
OTk0MjUzXSAtPiAjMiAoY3J0Y193d19jbGFzc19hY3F1aXJlKXsrLisufToKPiAgIFsgICAgNC45
OTQyNTVdICAgICAgICBsb2NrX2FjcXVpcmUrMHg5ZS8weDE3MAo+ICAgWyAgICA0Ljk5NDI3MF0g
ICAgICAgIGRybV9tb2Rlc2V0X2FjcXVpcmVfaW5pdCsweGNjLzB4MTAwIFtkcm1dCj4gICBbICAg
IDQuOTk0MjgwXSAgICAgICAgZHJtX21vZGVzZXRfbG9ja19hbGwrMHg0NC8weDFhMCBbZHJtXQo+
ICAgWyAgICA0Ljk5NDMyMF0gICAgICAgIGludGVsX21vZGVzZXRfaW5pdCsweDYwYi8weGRhMCBb
aTkxNV0KPiAgIC4uCj4gICBbICAgIDQuOTk0NDAzXQo+ICAgWyAgICA0Ljk5NDQwM10gLT4gIzEg
KCZkZXYtPm1vZGVfY29uZmlnLm11dGV4KXsrLisufToKPiAgIFsgICAgNC45OTQ0MDVdICAgICAg
ICBsb2NrX2FjcXVpcmUrMHg5ZS8weDE3MAo+ICAgWyAgICA0Ljk5NDQwOF0gICAgICAgIF9fbXV0
ZXhfbG9jaysweDYyLzB4OGMwCj4gICBbICAgIDQuOTk0NDEzXSAgICAgICAgZHJtX3NldHVwX2Ny
dGNzKzB4MTdjLzB4YzUwIFtkcm1fa21zX2hlbHBlcl0KPiAgIFsgICAgNC45OTQ0MThdICAgICAg
ICBfX2RybV9mYl9oZWxwZXJfaW5pdGlhbF9jb25maWdfYW5kX3VubG9jaysweDM0LzB4NTMwIFtk
cm1fa21zX2hlbHBlcl0KPiAgIFsgICAgNC45OTQ0NTBdICAgICAgICByYWRlb25fZmJkZXZfaW5p
dCsweDExMC8weDEzMCBbcmFkZW9uXQo+ICAgLi4KPiAgIFsgICAgNC45OTQ1MzVdCj4gICBbICAg
IDQuOTk0NTM1XSAtPiAjMCAoJmNsaWVudC0+bW9kZXNldF9tdXRleCl7Ky4rLn06Cj4gICBbICAg
IDQuOTk0NTM3XSAgICAgICAgX19sb2NrX2FjcXVpcmUrMHhhODUvMHhlOTAKPiAgIFsgICAgNC45
OTQ1MzhdICAgICAgICBsb2NrX2FjcXVpcmUrMHg5ZS8weDE3MAo+ICAgWyAgICA0Ljk5NDU0MF0g
ICAgICAgIF9fbXV0ZXhfbG9jaysweDYyLzB4OGMwCj4gICBbICAgIDQuOTk0NTQ1XSAgICAgICAg
ZHJtX2ZiX2hlbHBlcl9wYW5fZGlzcGxheSsweDEwMy8weDFmMCBbZHJtX2ttc19oZWxwZXJdCj4g
ICBbICAgIDQuOTk0NTQ3XSAgICAgICAgZmJfcGFuX2Rpc3BsYXkrMHg5Mi8weDEyMAo+ICAgWyAg
ICA0Ljk5NDU0OV0gICAgICAgIGJpdF91cGRhdGVfc3RhcnQrMHgxYS8weDQwCj4gICBbICAgIDQu
OTk0NTUwXSAgICAgICAgZmJjb25fc3dpdGNoKzB4MzkyLzB4NTgwCj4gICBbICAgIDQuOTk0NTUy
XSAgICAgICAgcmVkcmF3X3NjcmVlbisweDEyYy8weDIyMAo+ICAgWyAgICA0Ljk5NDU1M10gICAg
ICAgIGRvX2JpbmRfY29uX2RyaXZlci5jb2xkLjMwKzB4ZTEvMHgxMGQKPiAgIFsgICAgNC45OTQ1
NTRdICAgICAgICBkb190YWtlX292ZXJfY29uc29sZSsweDExMy8weDE5MAo+ICAgWyAgICA0Ljk5
NDU1NV0gICAgICAgIGRvX2ZiY29uX3Rha2VvdmVyKzB4NTgvMHhiMAo+ICAgWyAgICA0Ljk5NDU1
N10gICAgICAgIG5vdGlmaWVyX2NhbGxfY2hhaW4rMHg0Ny8weDcwCj4gICBbICAgIDQuOTk0NTU4
XSAgICAgICAgYmxvY2tpbmdfbm90aWZpZXJfY2FsbF9jaGFpbisweDQ0LzB4NjAKPiAgIFsgICAg
NC45OTQ1NTldICAgICAgICByZWdpc3Rlcl9mcmFtZWJ1ZmZlcisweDIzMS8weDMxMAo+ICAgWyAg
ICA0Ljk5NDU2NF0gICAgICAgIF9fZHJtX2ZiX2hlbHBlcl9pbml0aWFsX2NvbmZpZ19hbmRfdW5s
b2NrKzB4MmZkLzB4NTMwIFtkcm1fa21zX2hlbHBlcl0KPiAgIFsgICAgNC45OTQ1OTBdICAgICAg
ICByYWRlb25fZmJkZXZfaW5pdCsweDExMC8weDEzMCBbcmFkZW9uXQo+ICAgLi4KPiAKPiBUaGlz
IHByb2JsZW0gd2FzIGludHJvZHVjZWQgaW4KPiAKPiAgIGQ4MTI5NGFmZQlkcm0vZmItaGVscGVy
OiBSZW1vdmUgZHJtX2ZiX2hlbHBlcl9jcnRjCj4gCj4gUmV2ZXJzaW5nIHRoZSBsb2NrIG9yZGVy
aW5nIGluIHRoZSBkaXNwbGF5LXBhbm5pbmcgY29kZSBmaXhlcyB0aGUgaXNzdWUuIEluCj4gYWRk
aXRpb24gdG8gdGhlIGZpeCwgdGhlIERSTSBjbGllbnQgbm93IGltcGxlbWVudHMgdGhlIHBhbm5p
bmcuIFRoZSBjYWxsIHRvCj4gZHJtX2NsaWVudF9tb2Rlc2V0X3Bhbl9kaXNwbGF5KCkgYWNxdWly
ZXMgZHJtX2NsaWVudF9kZXYubW9kZXNldF9tdXRleCBvbmNlCj4gZm9yIHRoZSB3aG9sZSBvcGVy
YXRpb24uCj4gCj4gVGhlIGNoYW5nZSB3YXMgc3VnZ2VzdGVkIGJ5IERhbmllbCBWZXR0ZXIgYW5k
IE5vcmFsZiBUcm9ubmVzLgo+IAo+IHYyOgo+IAkqIG1vdmUgZGlzcGxheSBwYW5uaW5nIHRvIERS
TSBjbGllbnQKPiAJKiBhY3F1aXJlIG1vZGVzZXRfbXV0ZXggb25jZSBpbiBkcm1fY2xpZW50X21v
ZGVzZXRfcGFuX2Rpc3BsYXkoKQo+IAo+IFNpZ25lZC1vZmYtYnk6IFRob21hcyBaaW1tZXJtYW5u
IDx0emltbWVybWFubkBzdXNlLmRlPgo+IEZpeGVzOiBkODEyOTRhZmVlY2RhY2M4ZDg0ODA0YmEw
YmNiM2QzOWU2NGQwZjI3CgpUaGlzIHdvbid0IHBhc3MgZGltJ3MgY2hlY2tzLiBTZWUKCiQgZGlt
IGZpeGVzIDxzaGExPgoKZm9yIGEgdG9vbCBmb3IgdGhpcy4KCldydCB0aGUgYnVnZml4LCBJJ2Qg
c2F5IGxldHMgZ28gd2l0aCB5b3VyIHNpbXBsZXIgZml4IGZpcnN0LCBzaW5jZSBJIHRoaW5rCnRo
aXMgb25lIGhlcmUgbmVlZHMgYSBiaXQgbW9yZSB3b3JrIHRvIHByb3ZpZGUgYSBuaWNlIGludGVy
ZmFjZS4KCj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9kcm1fY2xpZW50X21vZGVzZXQuYyB8IDEx
MCArKysrKysrKysrKysrKysrKysrKysrKysrLS0KPiAgZHJpdmVycy9ncHUvZHJtL2RybV9mYl9o
ZWxwZXIuYyAgICAgIHwgIDc5ICsrLS0tLS0tLS0tLS0tLS0tLS0KPiAgaW5jbHVkZS9kcm0vZHJt
X2NsaWVudC5oICAgICAgICAgICAgIHwgICA0ICsKPiAgMyBmaWxlcyBjaGFuZ2VkLCAxMTcgaW5z
ZXJ0aW9ucygrKSwgNzYgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9kcm1fY2xpZW50X21vZGVzZXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fY2xpZW50X21v
ZGVzZXQuYwo+IGluZGV4IGIxOTg0ZjkwMWE2ZC4uMjBjOGZlOTQyNDllIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9kcm1fY2xpZW50X21vZGVzZXQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9kcm1fY2xpZW50X21vZGVzZXQuYwo+IEBAIC0yODgsNiArMjg4LDE5IEBAIHN0YXRpYyBp
bnQgZHJtX2NsaWVudF9tb2Rlc2V0X2NvbW1pdF9sZWdhY3koc3RydWN0IGRybV9jbGllbnRfZGV2
ICpjbGllbnQpCj4gIAlyZXR1cm4gcmV0Owo+ICB9Cj4gIAo+ICtzdGF0aWMgaW50IF9fZHJtX2Ns
aWVudF9tb2Rlc2V0X2NvbW1pdF9mb3JjZShzdHJ1Y3QgZHJtX2NsaWVudF9kZXYgKmNsaWVudCkK
PiArewo+ICsJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNsaWVudC0+ZGV2Owo+ICsJaW50IHJl
dDsKPiArCj4gKwlpZiAoZHJtX2Rydl91c2VzX2F0b21pY19tb2Rlc2V0KGRldikpCj4gKwkJcmV0
ID0gZHJtX2NsaWVudF9tb2Rlc2V0X2NvbW1pdF9hdG9taWMoY2xpZW50LCB0cnVlKTsKPiArCWVs
c2UKPiArCQlyZXQgPSBkcm1fY2xpZW50X21vZGVzZXRfY29tbWl0X2xlZ2FjeShjbGllbnQpOwo+
ICsKPiArCXJldHVybiByZXQ7Cj4gK30KPiArCj4gIC8qKgo+ICAgKiBkcm1fY2xpZW50X21vZGVz
ZXRfY29tbWl0X2ZvcmNlKCkgLSBGb3JjZSBjb21taXQgQ1JUQyBjb25maWd1cmF0aW9uCj4gICAq
IEBjbGllbnQ6IERSTSBjbGllbnQKPiBAQCAtMjk5LDE0ICszMTIsMTAgQEAgc3RhdGljIGludCBk
cm1fY2xpZW50X21vZGVzZXRfY29tbWl0X2xlZ2FjeShzdHJ1Y3QgZHJtX2NsaWVudF9kZXYgKmNs
aWVudCkKPiAgICovCj4gIGludCBkcm1fY2xpZW50X21vZGVzZXRfY29tbWl0X2ZvcmNlKHN0cnVj
dCBkcm1fY2xpZW50X2RldiAqY2xpZW50KQo+ICB7Cj4gLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
ID0gY2xpZW50LT5kZXY7Cj4gIAlpbnQgcmV0Owo+ICAKPiAgCW11dGV4X2xvY2soJmNsaWVudC0+
bW9kZXNldF9tdXRleCk7Cj4gLQlpZiAoZHJtX2Rydl91c2VzX2F0b21pY19tb2Rlc2V0KGRldikp
Cj4gLQkJcmV0ID0gZHJtX2NsaWVudF9tb2Rlc2V0X2NvbW1pdF9hdG9taWMoY2xpZW50LCB0cnVl
KTsKPiAtCWVsc2UKPiAtCQlyZXQgPSBkcm1fY2xpZW50X21vZGVzZXRfY29tbWl0X2xlZ2FjeShj
bGllbnQpOwo+ICsJcmV0ID0gX19kcm1fY2xpZW50X21vZGVzZXRfY29tbWl0X2ZvcmNlKGNsaWVu
dCk7Cj4gIAltdXRleF91bmxvY2soJmNsaWVudC0+bW9kZXNldF9tdXRleCk7Cj4gIAo+ICAJcmV0
dXJuIHJldDsKPiBAQCAtMzkwLDMgKzM5OSw5NCBAQCBpbnQgZHJtX2NsaWVudF9tb2Rlc2V0X2Rw
bXMoc3RydWN0IGRybV9jbGllbnRfZGV2ICpjbGllbnQsIGludCBtb2RlKQo+ICAJcmV0dXJuIHJl
dDsKPiAgfQo+ICBFWFBPUlRfU1lNQk9MKGRybV9jbGllbnRfbW9kZXNldF9kcG1zKTsKPiArCj4g
K3N0YXRpYyB2b2lkIHBhbl9zZXQoc3RydWN0IGRybV9jbGllbnRfZGV2ICpjbGllbnQsIHVuc2ln
bmVkIGludCB4LAo+ICsJCSAgICB1bnNpZ25lZCBpbnQgeSkKPiArewo+ICsJc3RydWN0IGRybV9t
b2RlX3NldCAqbW9kZV9zZXQ7Cj4gKwo+ICsJZHJtX2NsaWVudF9mb3JfZWFjaF9tb2Rlc2V0KG1v
ZGVfc2V0LCBjbGllbnQpIHsKPiArCQltb2RlX3NldC0+eCA9IHg7Cj4gKwkJbW9kZV9zZXQtPnkg
PSB5Owo+ICsJfQo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IGRybV9jbGllbnRfbW9kZXNldF9wYW5f
ZGlzcGxheV9hdG9taWMoc3RydWN0IGRybV9jbGllbnRfZGV2ICpjbGllbnQsCj4gKwkJCQkJCSB1
bnNpZ25lZCBpbnQgeCwKPiArCQkJCQkJIHVuc2lnbmVkIGludCB5LAo+ICsJCQkJCQkgdW5zaWdu
ZWQgaW50IGRlZmF1bHRfeCwKPiArCQkJCQkJIHVuc2lnbmVkIGludCBkZWZhdWx0X3kpCj4gK3sK
PiArCWludCByZXQ7Cj4gKwo+ICsJcGFuX3NldChjbGllbnQsIHgsIHkpOwo+ICsKPiArCXJldCA9
IF9fZHJtX2NsaWVudF9tb2Rlc2V0X2NvbW1pdF9mb3JjZShjbGllbnQpOwo+ICsJaWYgKHJldCkK
PiArCQlwYW5fc2V0KGNsaWVudCwgZGVmYXVsdF94LCBkZWZhdWx0X3kpOwo+ICsKPiArCXJldHVy
biByZXQ7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgZHJtX2NsaWVudF9tb2Rlc2V0X3Bhbl9kaXNw
bGF5X2xlZ2FjeShzdHJ1Y3QgZHJtX2NsaWVudF9kZXYgKmNsaWVudCwKPiArCQkJCQkJIHVuc2ln
bmVkIGludCB4LAo+ICsJCQkJCQkgdW5zaWduZWQgaW50IHkpCj4gK3sKPiArCXN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYgPSBjbGllbnQtPmRldjsKPiArCXN0cnVjdCBkcm1fbW9kZV9zZXQgKm1vZGVz
ZXQ7Cj4gKwlpbnQgcmV0ID0gMDsKPiArCj4gKwlkcm1fbW9kZXNldF9sb2NrX2FsbChkZXYpOwo+
ICsJZHJtX2NsaWVudF9mb3JfZWFjaF9tb2Rlc2V0KG1vZGVzZXQsIGNsaWVudCkgewo+ICsJCW1v
ZGVzZXQtPnggPSB4Owo+ICsJCW1vZGVzZXQtPnkgPSB5Owo+ICsKPiArCQlpZiAobW9kZXNldC0+
bnVtX2Nvbm5lY3RvcnMpCj4gKwkJCXJldCA9IGRybV9tb2RlX3NldF9jb25maWdfaW50ZXJuYWwo
bW9kZXNldCk7Cj4gKwl9Cj4gKwlkcm1fbW9kZXNldF91bmxvY2tfYWxsKGRldik7Cj4gKwo+ICsJ
cmV0dXJuIHJldDsKPiArfQo+ICsKPiArLyoqCj4gKyAqIGRybV9jbGllbnRfbW9kZXNldF9kcG1z
KCkgLSBTZXQgZGlzcGxheSBwYW5uaW5nCj4gKyAqIEBjbGllbnQ6IERSTSBjbGllbnQKPiArICog
QHg6IEhvcml6b250YWwgY29vcmRpbmF0ZQo+ICsgKiBAeTogVmVydGljYWwgY29vcmRpbmF0ZQo+
ICsgKiBAZGVmYXVsdF94OiBGYWxsYmFjayBob3Jpem9udGFsIGNvb3JkaW5hdGUKPiArICogQGRl
ZmF1bHRfeTogRmFsbGJhY2sgdmVydGljYWwgY29vcmRpbmF0ZQoKV2h5IGRvIHdlIG5lZWQgdGhl
c2U/IENhbid0IHdlIG1ha2UgYSBsb2NhbCBjb3B5IG9mIG1vZGVzZXQtPngveSBhbmQKcmVzdG9y
ZSB0aGVtIGlmIGl0IGFsbCBnb2VzIGJvb20/IFdvdWxkIGJlIGEgbXVjaCBuaWNlciBpbnRlcmZh
Y2UgaW1vLgotRGFuaWVsCgo+ICsgKgo+ICsgKiBUaGlzIGZ1bmN0aW9uIHNldHMgdGhlIGRpc3Bs
YXkgcGFubmluZyBmb3Igc2NyZWVucyB3aXRoIGEgdmlydHVhbAo+ICsgKiByZXNvbHV0aW9uLiBU
aGUgeCBhbmQgeSBjb29yZGluYXRlcyByZWZlciB0byB0aGUgZGlzcGxheSdzIHVwcGVyCj4gKyAq
IGxlZnQgcGl4ZWwuIElmIHVwZGF0aW5nIGZhaWxzLCB0aGUgZmFsbGJhY2sgY29vcmRpbmF0ZXMg
cHJvdmlkZSBhCj4gKyAqIHNhZmUgZGVmYXVsdCB2YWx1ZSwgc3VjaCBhcyAoMCwwKS4KPiArICoK
PiArICogUmV0dXJuczoKPiArICogWmVybyBvbiBzdWNjZXNzIG9yIG5lZ2F0aXZlIGVycm9yIGNv
ZGUgb24gZmFpbHVyZS4KPiArICovCj4gK2ludCBkcm1fY2xpZW50X21vZGVzZXRfcGFuX2Rpc3Bs
YXkoc3RydWN0IGRybV9jbGllbnRfZGV2ICpjbGllbnQsCj4gKwkJCQkgICB1bnNpZ25lZCBpbnQg
eCwgdW5zaWduZWQgaW50IHksCj4gKwkJCQkgICB1bnNpZ25lZCBpbnQgZGVmYXVsdF94LAo+ICsJ
CQkJICAgdW5zaWduZWQgaW50IGRlZmF1bHRfeSkKPiArewo+ICsJc3RydWN0IGRybV9kZXZpY2Ug
KmRldiA9IGNsaWVudC0+ZGV2Owo+ICsJaW50IHJldDsKPiArCj4gKwlpZiAoIWRybV9tYXN0ZXJf
aW50ZXJuYWxfYWNxdWlyZShkZXYpKQo+ICsJCXJldHVybiAtRUJVU1k7Cj4gKwo+ICsJbXV0ZXhf
bG9jaygmY2xpZW50LT5tb2Rlc2V0X211dGV4KTsKPiArCWlmIChkcm1fZHJ2X3VzZXNfYXRvbWlj
X21vZGVzZXQoZGV2KSkKPiArCQlyZXQgPSBkcm1fY2xpZW50X21vZGVzZXRfcGFuX2Rpc3BsYXlf
YXRvbWljKGNsaWVudCwgeCwgeSwKPiArCQkJCQkJCSAgICBkZWZhdWx0X3gsCj4gKwkJCQkJCQkg
ICAgZGVmYXVsdF95KTsKPiArCWVsc2UKPiArCQlyZXQgPSBkcm1fY2xpZW50X21vZGVzZXRfcGFu
X2Rpc3BsYXlfbGVnYWN5KGNsaWVudCwgeCwgeSk7Cj4gKwltdXRleF91bmxvY2soJmNsaWVudC0+
bW9kZXNldF9tdXRleCk7Cj4gKwo+ICsJZHJtX21hc3Rlcl9pbnRlcm5hbF9yZWxlYXNlKGRldik7
Cj4gKwo+ICsJcmV0dXJuIHJldDsKPiArfQo+ICtFWFBPUlRfU1lNQk9MKGRybV9jbGllbnRfbW9k
ZXNldF9wYW5fZGlzcGxheSk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZmJf
aGVscGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2ZiX2hlbHBlci5jCj4gaW5kZXggN2IzODg2
NzRhNDU2Li40ODJlOTJjMTgyYzggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9m
Yl9oZWxwZXIuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZmJfaGVscGVyLmMKPiBAQCAt
MTU0OCw2NCArMTU0OCw2IEBAIGludCBkcm1fZmJfaGVscGVyX3NldF9wYXIoc3RydWN0IGZiX2lu
Zm8gKmluZm8pCj4gIH0KPiAgRVhQT1JUX1NZTUJPTChkcm1fZmJfaGVscGVyX3NldF9wYXIpOwo+
ICAKPiAtc3RhdGljIHZvaWQgcGFuX3NldChzdHJ1Y3QgZHJtX2ZiX2hlbHBlciAqZmJfaGVscGVy
LCBpbnQgeCwgaW50IHkpCj4gLXsKPiAtCXN0cnVjdCBkcm1fbW9kZV9zZXQgKm1vZGVfc2V0Owo+
IC0KPiAtCW11dGV4X2xvY2soJmZiX2hlbHBlci0+Y2xpZW50Lm1vZGVzZXRfbXV0ZXgpOwo+IC0J
ZHJtX2NsaWVudF9mb3JfZWFjaF9tb2Rlc2V0KG1vZGVfc2V0LCAmZmJfaGVscGVyLT5jbGllbnQp
IHsKPiAtCQltb2RlX3NldC0+eCA9IHg7Cj4gLQkJbW9kZV9zZXQtPnkgPSB5Owo+IC0JfQo+IC0J
bXV0ZXhfdW5sb2NrKCZmYl9oZWxwZXItPmNsaWVudC5tb2Rlc2V0X211dGV4KTsKPiAtfQo+IC0K
PiAtc3RhdGljIGludCBwYW5fZGlzcGxheV9hdG9taWMoc3RydWN0IGZiX3Zhcl9zY3JlZW5pbmZv
ICp2YXIsCj4gLQkJCSAgICAgIHN0cnVjdCBmYl9pbmZvICppbmZvKQo+IC17Cj4gLQlzdHJ1Y3Qg
ZHJtX2ZiX2hlbHBlciAqZmJfaGVscGVyID0gaW5mby0+cGFyOwo+IC0JaW50IHJldDsKPiAtCj4g
LQlwYW5fc2V0KGZiX2hlbHBlciwgdmFyLT54b2Zmc2V0LCB2YXItPnlvZmZzZXQpOwo+IC0KPiAt
CXJldCA9IGRybV9jbGllbnRfbW9kZXNldF9jb21taXRfZm9yY2UoJmZiX2hlbHBlci0+Y2xpZW50
KTsKPiAtCWlmICghcmV0KSB7Cj4gLQkJaW5mby0+dmFyLnhvZmZzZXQgPSB2YXItPnhvZmZzZXQ7
Cj4gLQkJaW5mby0+dmFyLnlvZmZzZXQgPSB2YXItPnlvZmZzZXQ7Cj4gLQl9IGVsc2UKPiAtCQlw
YW5fc2V0KGZiX2hlbHBlciwgaW5mby0+dmFyLnhvZmZzZXQsIGluZm8tPnZhci55b2Zmc2V0KTsK
PiAtCj4gLQlyZXR1cm4gcmV0Owo+IC19Cj4gLQo+IC1zdGF0aWMgaW50IHBhbl9kaXNwbGF5X2xl
Z2FjeShzdHJ1Y3QgZmJfdmFyX3NjcmVlbmluZm8gKnZhciwKPiAtCQkJICAgICAgc3RydWN0IGZi
X2luZm8gKmluZm8pCj4gLXsKPiAtCXN0cnVjdCBkcm1fZmJfaGVscGVyICpmYl9oZWxwZXIgPSBp
bmZvLT5wYXI7Cj4gLQlzdHJ1Y3QgZHJtX2NsaWVudF9kZXYgKmNsaWVudCA9ICZmYl9oZWxwZXIt
PmNsaWVudDsKPiAtCXN0cnVjdCBkcm1fbW9kZV9zZXQgKm1vZGVzZXQ7Cj4gLQlpbnQgcmV0ID0g
MDsKPiAtCj4gLQlkcm1fbW9kZXNldF9sb2NrX2FsbChmYl9oZWxwZXItPmRldik7Cj4gLQltdXRl
eF9sb2NrKCZjbGllbnQtPm1vZGVzZXRfbXV0ZXgpOwo+IC0JZHJtX2NsaWVudF9mb3JfZWFjaF9t
b2Rlc2V0KG1vZGVzZXQsIGNsaWVudCkgewo+IC0JCW1vZGVzZXQtPnggPSB2YXItPnhvZmZzZXQ7
Cj4gLQkJbW9kZXNldC0+eSA9IHZhci0+eW9mZnNldDsKPiAtCj4gLQkJaWYgKG1vZGVzZXQtPm51
bV9jb25uZWN0b3JzKSB7Cj4gLQkJCXJldCA9IGRybV9tb2RlX3NldF9jb25maWdfaW50ZXJuYWwo
bW9kZXNldCk7Cj4gLQkJCWlmICghcmV0KSB7Cj4gLQkJCQlpbmZvLT52YXIueG9mZnNldCA9IHZh
ci0+eG9mZnNldDsKPiAtCQkJCWluZm8tPnZhci55b2Zmc2V0ID0gdmFyLT55b2Zmc2V0Owo+IC0J
CQl9Cj4gLQkJfQo+IC0JfQo+IC0JbXV0ZXhfdW5sb2NrKCZjbGllbnQtPm1vZGVzZXRfbXV0ZXgp
Owo+IC0JZHJtX21vZGVzZXRfdW5sb2NrX2FsbChmYl9oZWxwZXItPmRldik7Cj4gLQo+IC0JcmV0
dXJuIHJldDsKPiAtfQo+IC0KPiAgLyoqCj4gICAqIGRybV9mYl9oZWxwZXJfcGFuX2Rpc3BsYXkg
LSBpbXBsZW1lbnRhdGlvbiBmb3IgJmZiX29wcy5mYl9wYW5fZGlzcGxheQo+ICAgKiBAdmFyOiB1
cGRhdGVkIHNjcmVlbiBpbmZvcm1hdGlvbgo+IEBAIC0xNjE1LDI3ICsxNTU3LDIyIEBAIGludCBk
cm1fZmJfaGVscGVyX3Bhbl9kaXNwbGF5KHN0cnVjdCBmYl92YXJfc2NyZWVuaW5mbyAqdmFyLAo+
ICAJCQkgICAgICBzdHJ1Y3QgZmJfaW5mbyAqaW5mbykKPiAgewo+ICAJc3RydWN0IGRybV9mYl9o
ZWxwZXIgKmZiX2hlbHBlciA9IGluZm8tPnBhcjsKPiAtCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYg
PSBmYl9oZWxwZXItPmRldjsKPiAgCWludCByZXQ7Cj4gIAo+ICAJaWYgKG9vcHNfaW5fcHJvZ3Jl
c3MpCj4gIAkJcmV0dXJuIC1FQlVTWTsKPiAgCj4gIAltdXRleF9sb2NrKCZmYl9oZWxwZXItPmxv
Y2spOwo+IC0JaWYgKCFkcm1fbWFzdGVyX2ludGVybmFsX2FjcXVpcmUoZGV2KSkgewo+IC0JCXJl
dCA9IC1FQlVTWTsKPiAtCQlnb3RvIHVubG9jazsKPiAtCX0KPiAtCj4gLQlpZiAoZHJtX2Rydl91
c2VzX2F0b21pY19tb2Rlc2V0KGRldikpCj4gLQkJcmV0ID0gcGFuX2Rpc3BsYXlfYXRvbWljKHZh
ciwgaW5mbyk7Cj4gLQllbHNlCj4gLQkJcmV0ID0gcGFuX2Rpc3BsYXlfbGVnYWN5KHZhciwgaW5m
byk7Cj4gLQo+IC0JZHJtX21hc3Rlcl9pbnRlcm5hbF9yZWxlYXNlKGRldik7Cj4gLXVubG9jazoK
PiArCXJldCA9IGRybV9jbGllbnRfbW9kZXNldF9wYW5fZGlzcGxheSgmZmJfaGVscGVyLT5jbGll
bnQsIHZhci0+eG9mZnNldCwKPiArCQkJCQkgICAgIHZhci0+eW9mZnNldCwgaW5mby0+dmFyLnhv
ZmZzZXQsCj4gKwkJCQkJICAgICBpbmZvLT52YXIueW9mZnNldCk7Cj4gIAltdXRleF91bmxvY2so
JmZiX2hlbHBlci0+bG9jayk7Cj4gIAo+ICsJaWYgKCFyZXQpIHsKPiArCQlpbmZvLT52YXIueG9m
ZnNldCA9IHZhci0+eG9mZnNldDsKPiArCQlpbmZvLT52YXIueW9mZnNldCA9IHZhci0+eW9mZnNl
dDsKPiArCX0KPiArCj4gIAlyZXR1cm4gcmV0Owo+ICB9Cj4gIEVYUE9SVF9TWU1CT0woZHJtX2Zi
X2hlbHBlcl9wYW5fZGlzcGxheSk7Cj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9jbGll
bnQuaCBiL2luY2x1ZGUvZHJtL2RybV9jbGllbnQuaAo+IGluZGV4IDZjZjQ4NDE5Zjc3Zi4uMzdi
ZjU1NjM0MjI3IDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvZHJtL2RybV9jbGllbnQuaAo+ICsrKyBi
L2luY2x1ZGUvZHJtL2RybV9jbGllbnQuaAo+IEBAIC0xNTksNiArMTU5LDEwIEBAIGJvb2wgZHJt
X2NsaWVudF9wYW5lbF9yb3RhdGlvbihzdHJ1Y3QgZHJtX21vZGVfc2V0ICptb2Rlc2V0LCB1bnNp
Z25lZCBpbnQgKnJvdGF0Cj4gIGludCBkcm1fY2xpZW50X21vZGVzZXRfY29tbWl0X2ZvcmNlKHN0
cnVjdCBkcm1fY2xpZW50X2RldiAqY2xpZW50KTsKPiAgaW50IGRybV9jbGllbnRfbW9kZXNldF9j
b21taXQoc3RydWN0IGRybV9jbGllbnRfZGV2ICpjbGllbnQpOwo+ICBpbnQgZHJtX2NsaWVudF9t
b2Rlc2V0X2RwbXMoc3RydWN0IGRybV9jbGllbnRfZGV2ICpjbGllbnQsIGludCBtb2RlKTsKPiAr
aW50IGRybV9jbGllbnRfbW9kZXNldF9wYW5fZGlzcGxheShzdHJ1Y3QgZHJtX2NsaWVudF9kZXYg
KmNsaWVudCwKPiArCQkJCSAgIHVuc2lnbmVkIGludCB4LCB1bnNpZ25lZCBpbnQgeSwKPiArCQkJ
CSAgIHVuc2lnbmVkIGludCBkZWZhdWx0X3gsCj4gKwkJCQkgICB1bnNpZ25lZCBpbnQgZGVmYXVs
dF95KTsKPiAgCj4gIC8qKgo+ICAgKiBkcm1fY2xpZW50X2Zvcl9lYWNoX21vZGVzZXQoKSAtIEl0
ZXJhdGUgb3ZlciBjbGllbnQgbW9kZXNldHMKPiAtLSAKPiAyLjIxLjAKPiAKCi0tIApEYW5pZWwg
VmV0dGVyClNvZnR3YXJlIEVuZ2luZWVyLCBJbnRlbCBDb3Jwb3JhdGlvbgpodHRwOi8vYmxvZy5m
ZndsbC5jaApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpk
cmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
