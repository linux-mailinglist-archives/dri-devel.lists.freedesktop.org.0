Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0639848615
	for <lists+dri-devel@lfdr.de>; Mon, 17 Jun 2019 16:52:27 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5BEB489310;
	Mon, 17 Jun 2019 14:52:24 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from relay12.mail.gandi.net (relay12.mail.gandi.net [217.70.178.232])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2794689310
 for <dri-devel@lists.freedesktop.org>; Mon, 17 Jun 2019 14:52:19 +0000 (UTC)
Received: from localhost (aaubervilliers-681-1-81-150.w90-88.abo.wanadoo.fr
 [90.88.23.150]) (Authenticated sender: maxime.ripard@bootlin.com)
 by relay12.mail.gandi.net (Postfix) with ESMTPSA id 9D57420001A;
 Mon, 17 Jun 2019 14:52:16 +0000 (UTC)
From: Maxime Ripard <maxime.ripard@bootlin.com>
To: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Sean Paul <seanpaul@chromium.org>,
 Maxime Ripard <maxime.ripard@bootlin.com>,
 Daniel Vetter <daniel.vetter@intel.com>, David Airlie <airlied@linux.ie>
Subject: [PATCH v5 06/12] drm/modes: Support modes names on the command line
Date: Mon, 17 Jun 2019 16:51:33 +0200
Message-Id: <18443e0c3bdbbd16cea4ec63bc7f2079b820b43b.1560783090.git-series.maxime.ripard@bootlin.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <cover.5190d070d1439d762d7ab273f4ae2573087fee20.1560783090.git-series.maxime.ripard@bootlin.com>
References: <cover.5190d070d1439d762d7ab273f4ae2573087fee20.1560783090.git-series.maxime.ripard@bootlin.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: eben@raspberrypi.org, dri-devel@lists.freedesktop.org,
 Paul Kocialkowski <paul.kocialkowski@bootlin.com>,
 Thomas Petazzoni <thomas.petazzoni@bootlin.com>,
 Maxime Ripard <maxime.ripard@free-electrons.com>,
 linux-arm-kernel@lists.infradead.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogTWF4aW1lIFJpcGFyZCA8bWF4aW1lLnJpcGFyZEBmcmVlLWVsZWN0cm9ucy5jb20+CgpU
aGUgZHJtIHN1YnN5c3RlbSBhbHNvIHVzZXMgdGhlIHZpZGVvPSBrZXJuZWwgcGFyYW1ldGVyLCBh
bmQgaW4gdGhlCmRvY3VtZW50YXRpb24gcmVmZXJzIHRvIHRoZSBmYmRldiBkb2N1bWVudGF0aW9u
IGZvciB0aGF0IHBhcmFtZXRlci4KCkhvd2V2ZXIsIHRoYXQgZG9jdW1lbnRhdGlvbiBhbHNvIHNh
eXMgdGhhdCBpbnN0ZWFkIG9mIGdpdmluZyB0aGUgbW9kZSB1c2luZwppdHMgcmVzb2x1dGlvbiB3
ZSBjYW4gYWxzbyBnaXZlIGEgbmFtZS4gSG93ZXZlciwgRFJNIGRvZXNuJ3QgaGFuZGxlIHRoYXQK
Y2FzZSBhdCB0aGUgbW9tZW50LiBFdmVuIHRob3VnaCBpbiBtb3N0IGNhc2UgaXQgc2hvdWxkbid0
IG1ha2UgYW55CmRpZmZlcmVuY2UsIGl0IG1pZ2h0IGJlIHVzZWZ1bCBmb3IgYW5hbG9nIG1vZGVz
LCB3aGVyZSBkaWZmZXJlbnQgc3RhbmRhcmRzCm1pZ2h0IGhhdmUgdGhlIHNhbWUgcmVzb2x1dGlv
biwgYnV0IHN0aWxsIGhhdmUgYSBmZXcgZGlmZmVyZW50IHBhcmFtZXRlcnMKdGhhdCBhcmUgbm90
IGVuY29kZWQgaW4gdGhlIG1vZGVzIChOVFNDIHZzIE5UU0MtSiB2cyBQQUwtTSBmb3IgZXhhbXBs
ZSkuCgpSZXZpZXdlZC1ieTogTm9yYWxmIFRyw7hubmVzIDxub3JhbGZAdHJvbm5lcy5vcmc+ClNp
Z25lZC1vZmYtYnk6IE1heGltZSBSaXBhcmQgPG1heGltZS5yaXBhcmRAZnJlZS1lbGVjdHJvbnMu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fY2xpZW50X21vZGVzZXQuYyB8ICA0ICsrLQog
ZHJpdmVycy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYyAgICAgIHwgIDMgKy0KIGRyaXZlcnMvZ3B1
L2RybS9kcm1fbW9kZXMuYyAgICAgICAgICB8IDYyICsrKysrKysrKysrKysrKysrKysrKy0tLS0t
LS0tCiBpbmNsdWRlL2RybS9kcm1fY29ubmVjdG9yLmggICAgICAgICAgfCAgNyArKystCiA0IGZp
bGVzIGNoYW5nZWQsIDU5IGluc2VydGlvbnMoKyksIDE3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fY2xpZW50X21vZGVzZXQuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9kcm1fY2xpZW50X21vZGVzZXQuYwppbmRleCA0ODY5YTAxNzBiZWMuLjMzZDQ5ODhmMjJhZSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9jbGllbnRfbW9kZXNldC5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9kcm1fY2xpZW50X21vZGVzZXQuYwpAQCAtMTQ5LDYgKzE0OSwxMCBAQCBk
cm1fY29ubmVjdG9yX3BpY2tfY21kbGluZV9tb2RlKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25u
ZWN0b3IpCiAJcHJlZmVyX25vbl9pbnRlcmxhY2UgPSAhY21kbGluZV9tb2RlLT5pbnRlcmxhY2U7
CiBhZ2FpbjoKIAlsaXN0X2Zvcl9lYWNoX2VudHJ5KG1vZGUsICZjb25uZWN0b3ItPm1vZGVzLCBo
ZWFkKSB7CisJCS8qIENoZWNrIChvcHRpb25hbCkgbW9kZSBuYW1lIGZpcnN0ICovCisJCWlmICgh
c3RyY21wKG1vZGUtPm5hbWUsIGNtZGxpbmVfbW9kZS0+bmFtZSkpCisJCQlyZXR1cm4gbW9kZTsK
KwogCQkvKiBjaGVjayB3aWR0aC9oZWlnaHQgKi8KIAkJaWYgKG1vZGUtPmhkaXNwbGF5ICE9IGNt
ZGxpbmVfbW9kZS0+eHJlcyB8fAogCQkgICAgbW9kZS0+dmRpc3BsYXkgIT0gY21kbGluZV9tb2Rl
LT55cmVzKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9kcm1fY29ubmVjdG9yLmMKaW5kZXggM2NjZGNmM2RmY2RlLi4zYWZlZDU2
Nzc5NDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fY29ubmVjdG9yLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYwpAQCAtMTM5LDggKzEzOSw5IEBAIHN0YXRp
YyB2b2lkIGRybV9jb25uZWN0b3JfZ2V0X2NtZGxpbmVfbW9kZShzdHJ1Y3QgZHJtX2Nvbm5lY3Rv
ciAqY29ubmVjdG9yKQogCQljb25uZWN0b3ItPmZvcmNlID0gbW9kZS0+Zm9yY2U7CiAJfQogCi0J
RFJNX0RFQlVHX0tNUygiY21kbGluZSBtb2RlIGZvciBjb25uZWN0b3IgJXMgJWR4JWRAJWRIeiVz
JXMlc1xuIiwKKwlEUk1fREVCVUdfS01TKCJjbWRsaW5lIG1vZGUgZm9yIGNvbm5lY3RvciAlcyAl
cyAlZHglZEAlZEh6JXMlcyVzXG4iLAogCQkgICAgICBjb25uZWN0b3ItPm5hbWUsCisJCSAgICAg
IG1vZGUtPm5hbWUgPyBtb2RlLT5uYW1lIDogIiIsCiAJCSAgICAgIG1vZGUtPnhyZXMsIG1vZGUt
PnlyZXMsCiAJCSAgICAgIG1vZGUtPnJlZnJlc2hfc3BlY2lmaWVkID8gbW9kZS0+cmVmcmVzaCA6
IDYwLAogCQkgICAgICBtb2RlLT5yYiA/ICIgcmVkdWNlZCBibGFua2luZyIgOiAiIiwKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fbW9kZXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1f
bW9kZXMuYwppbmRleCA2ZGViYmQ2YzE3NjMuLjQyOWQzYmUxNzgwMCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2RybV9tb2Rlcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fbW9kZXMu
YwpAQCAtMTU4MCw3ICsxNTgwLDcgQEAgYm9vbCBkcm1fbW9kZV9wYXJzZV9jb21tYW5kX2xpbmVf
Zm9yX2Nvbm5lY3Rvcihjb25zdCBjaGFyICptb2RlX29wdGlvbiwKIAkJCQkJICAgICAgIHN0cnVj
dCBkcm1fY21kbGluZV9tb2RlICptb2RlKQogewogCWNvbnN0IGNoYXIgKm5hbWU7Ci0JYm9vbCBw
YXJzZV9leHRyYXMgPSBmYWxzZTsKKwlib29sIG5hbWVkX21vZGUgPSBmYWxzZSwgcGFyc2VfZXh0
cmFzID0gZmFsc2U7CiAJdW5zaWduZWQgaW50IGJwcF9vZmYgPSAwLCByZWZyZXNoX29mZiA9IDA7
CiAJdW5zaWduZWQgaW50IG1vZGVfZW5kID0gMDsKIAljaGFyICpicHBfcHRyID0gTlVMTCwgKnJl
ZnJlc2hfcHRyID0gTlVMTCwgKmV4dHJhX3B0ciA9IE5VTEw7CkBAIC0xNTk5LDggKzE1OTksMjIg
QEAgYm9vbCBkcm1fbW9kZV9wYXJzZV9jb21tYW5kX2xpbmVfZm9yX2Nvbm5lY3Rvcihjb25zdCBj
aGFyICptb2RlX29wdGlvbiwKIAogCW5hbWUgPSBtb2RlX29wdGlvbjsKIAotCWlmICghaXNkaWdp
dChuYW1lWzBdKSkKLQkJcmV0dXJuIGZhbHNlOworCS8qCisJICogVGhpcyBpcyBhIGJpdCBjb252
b2x1dGVkLiBUbyBkaWZmZXJlbnRpYXRlIGJldHdlZW4gdGhlCisJICogbmFtZWQgbW9kZXMgYW5k
IHBvb3JseSBmb3JtYXR0ZWQgcmVzb2x1dGlvbnMsIHdlIG5lZWQgYQorCSAqIGJ1bmNoIG9mIHRo
aW5nczoKKwkgKiAgIC0gV2UgbmVlZCB0byBtYWtlIHN1cmUgdGhhdCB0aGUgZmlyc3QgY2hhcmFj
dGVyICh3aGljaAorCSAqICAgICB3b3VsZCBiZSBvdXIgcmVzb2x1dGlvbiBpbiBYKSBpcyBhIGRp
Z2l0LgorCSAqICAgLSBIb3dldmVyLCBpZiB0aGUgWCByZXNvbHV0aW9uIGlzIG1pc3NpbmcsIHRo
ZW4gd2UgZW5kIHVwCisJICogICAgIHdpdGggc29tZXRoaW5nIGxpa2UgeDx5cmVzPiwgd2l0aCBv
dXIgZmlyc3QgY2hhcmFjdGVyCisJICogICAgIGJlaW5nIGFuIGFscGhhLW51bWVyaWNhbCBjaGFy
YWN0ZXIsIHdoaWNoIHdvdWxkIGJlCisJICogICAgIGNvbnNpZGVyZWQgYSBuYW1lZCBtb2RlLgor
CSAqCisJICogSWYgdGhpcyBpc24ndCBlbm91Z2gsIHdlIHNob3VsZCBhZGQgbW9yZSBoZXVyaXN0
aWNzIGhlcmUsCisJICogYW5kIG1hdGNoaW5nIHVuaXQtdGVzdHMuCisJICovCisJaWYgKCFpc2Rp
Z2l0KG5hbWVbMF0pICYmIG5hbWVbMF0gIT0gJ3gnKQorCQluYW1lZF9tb2RlID0gdHJ1ZTsKIAog
CS8qIFRyeSB0byBsb2NhdGUgdGhlIGJwcCBhbmQgcmVmcmVzaCBzcGVjaWZpZXJzLCBpZiBhbnkg
Ki8KIAlicHBfcHRyID0gc3RyY2hyKG5hbWUsICctJyk7CkBAIC0xNjExLDYgKzE2MjUsOSBAQCBi
b29sIGRybV9tb2RlX3BhcnNlX2NvbW1hbmRfbGluZV9mb3JfY29ubmVjdG9yKGNvbnN0IGNoYXIg
Km1vZGVfb3B0aW9uLAogCiAJcmVmcmVzaF9wdHIgPSBzdHJjaHIobmFtZSwgJ0AnKTsKIAlpZiAo
cmVmcmVzaF9wdHIpIHsKKwkJaWYgKG5hbWVkX21vZGUpCisJCQlyZXR1cm4gZmFsc2U7CisKIAkJ
cmVmcmVzaF9vZmYgPSByZWZyZXNoX3B0ciAtIG5hbWU7CiAJCW1vZGUtPnJlZnJlc2hfc3BlY2lm
aWVkID0gdHJ1ZTsKIAl9CkBAIC0xNjI3LDEyICsxNjQ0LDE2IEBAIGJvb2wgZHJtX21vZGVfcGFy
c2VfY29tbWFuZF9saW5lX2Zvcl9jb25uZWN0b3IoY29uc3QgY2hhciAqbW9kZV9vcHRpb24sCiAJ
CXBhcnNlX2V4dHJhcyA9IHRydWU7CiAJfQogCi0JcmV0ID0gZHJtX21vZGVfcGFyc2VfY21kbGlu
ZV9yZXNfbW9kZShuYW1lLCBtb2RlX2VuZCwKLQkJCQkJICAgICAgcGFyc2VfZXh0cmFzLAotCQkJ
CQkgICAgICBjb25uZWN0b3IsCi0JCQkJCSAgICAgIG1vZGUpOwotCWlmIChyZXQpCi0JCXJldHVy
biBmYWxzZTsKKwlpZiAobmFtZWRfbW9kZSkgeworCQlzdHJuY3B5KG1vZGUtPm5hbWUsIG5hbWUs
IG1vZGVfZW5kKTsKKwl9IGVsc2UgeworCQlyZXQgPSBkcm1fbW9kZV9wYXJzZV9jbWRsaW5lX3Jl
c19tb2RlKG5hbWUsIG1vZGVfZW5kLAorCQkJCQkJICAgICAgcGFyc2VfZXh0cmFzLAorCQkJCQkJ
ICAgICAgY29ubmVjdG9yLAorCQkJCQkJICAgICAgbW9kZSk7CisJCWlmIChyZXQpCisJCQlyZXR1
cm4gZmFsc2U7CisJfQogCW1vZGUtPnNwZWNpZmllZCA9IHRydWU7CiAKIAlpZiAoYnBwX3B0cikg
ewpAQCAtMTY2MCwxNCArMTY4MSwyMyBAQCBib29sIGRybV9tb2RlX3BhcnNlX2NvbW1hbmRfbGlu
ZV9mb3JfY29ubmVjdG9yKGNvbnN0IGNoYXIgKm1vZGVfb3B0aW9uLAogCQlleHRyYV9wdHIgPSBy
ZWZyZXNoX2VuZF9wdHI7CiAKIAlpZiAoZXh0cmFfcHRyKSB7Ci0JCWludCByZW1haW5pbmcgPSBz
dHJsZW4obmFtZSkgLSAoZXh0cmFfcHRyIC0gbmFtZSk7CisJCWlmICghbmFtZWRfbW9kZSkgewor
CQkJaW50IGxlbiA9IHN0cmxlbihuYW1lKSAtIChleHRyYV9wdHIgLSBuYW1lKTsKIAotCQkvKgot
CQkgKiBXZSBzdGlsbCBoYXZlIGNoYXJhY3RlcnMgdG8gcHJvY2Vzcywgd2hpbGUKLQkJICogd2Ug
c2hvdWxkbid0IGhhdmUgYW55Ci0JCSAqLwotCQlpZiAocmVtYWluaW5nID4gMCkKLQkJCXJldHVy
biBmYWxzZTsKKwkJCXJldCA9IGRybV9tb2RlX3BhcnNlX2NtZGxpbmVfZXh0cmEoZXh0cmFfcHRy
LCBsZW4sCisJCQkJCQkJICAgY29ubmVjdG9yLCBtb2RlKTsKKwkJCWlmIChyZXQpCisJCQkJcmV0
dXJuIGZhbHNlOworCQl9IGVsc2UgeworCQkJaW50IHJlbWFpbmluZyA9IHN0cmxlbihuYW1lKSAt
IChleHRyYV9wdHIgLSBuYW1lKTsKKworCQkJLyoKKwkJCSAqIFdlIHN0aWxsIGhhdmUgY2hhcmFj
dGVycyB0byBwcm9jZXNzLCB3aGlsZQorCQkJICogd2Ugc2hvdWxkbid0IGhhdmUgYW55CisJCQkg
Ki8KKwkJCWlmIChyZW1haW5pbmcgPiAwKQorCQkJCXJldHVybiBmYWxzZTsKKwkJfQogCX0KIAog
CXJldHVybiB0cnVlOwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2Nvbm5lY3Rvci5oIGIv
aW5jbHVkZS9kcm0vZHJtX2Nvbm5lY3Rvci5oCmluZGV4IGM4MDI3ODBiMGJmYy4uY2RmMmZiOTEw
MDEwIDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS9kcm1fY29ubmVjdG9yLmgKKysrIGIvaW5jbHVk
ZS9kcm0vZHJtX2Nvbm5lY3Rvci5oCkBAIC05MzMsNiArOTMzLDEzIEBAIHN0cnVjdCBkcm1fY29u
bmVjdG9yX2Z1bmNzIHsKICAqLwogc3RydWN0IGRybV9jbWRsaW5lX21vZGUgewogCS8qKgorCSAq
IEBuYW1lOgorCSAqCisJICogTmFtZSBvZiB0aGUgbW9kZS4KKwkgKi8KKwljaGFyIG5hbWVbRFJN
X0RJU1BMQVlfTU9ERV9MRU5dOworCisJLyoqCiAJICogQHNwZWNpZmllZDoKIAkgKgogCSAqIEhh
cyBhIG1vZGUgYmVlbiByZWFkIGZyb20gdGhlIGNvbW1hbmQtbGluZT8KLS0gCmdpdC1zZXJpZXMg
MC45LjEKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJp
LWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
