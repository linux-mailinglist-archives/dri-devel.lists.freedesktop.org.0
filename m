Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 527074B2AF
	for <lists+dri-devel@lfdr.de>; Wed, 19 Jun 2019 09:11:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E743B6E2B0;
	Wed, 19 Jun 2019 07:10:24 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from onstation.org (onstation.org [52.200.56.107])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5176F6E282;
 Wed, 19 Jun 2019 02:32:15 +0000 (UTC)
Received: from localhost.localdomain (c-98-239-145-235.hsd1.wv.comcast.net
 [98.239.145.235])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: masneyb)
 by onstation.org (Postfix) with ESMTPSA id 4D7393EA0D;
 Wed, 19 Jun 2019 02:32:14 +0000 (UTC)
From: Brian Masney <masneyb@onstation.org>
To: bjorn.andersson@linaro.org, agross@kernel.org, david.brown@linaro.org,
 robdclark@gmail.com, sean@poorly.run, robh+dt@kernel.org
Subject: [PATCH v2 4/6] firmware: qcom: scm: add support to restore secure
 config to qcm_scm-32
Date: Tue, 18 Jun 2019 22:32:07 -0400
Message-Id: <20190619023209.10036-5-masneyb@onstation.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190619023209.10036-1-masneyb@onstation.org>
References: <20190619023209.10036-1-masneyb@onstation.org>
MIME-Version: 1.0
X-Mailman-Approved-At: Wed, 19 Jun 2019 07:10:14 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=onstation.org; s=default; t=1560911534;
 bh=1+NXX67/bRUJsu03Irla7/7eCzmSMg+Ju9LZ6b7ktys=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=YnAKrL3/1yOv2GAuymyahF80MYRDT6og4pJZ+jr5iqgvpSKDyi+u0yCAMWtpGqpyu
 nesaTbwEjmuu68rB4hEuGxl3ItHgh1YMyafDvGEKVtMCC8vEC6gBNDl1iOCqKGgbA9
 PcpUPS0oc81oaUS/PiP9UCzCBwoFpX4tDgt0gZa0=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org, jonathan@marek.ca,
 airlied@linux.ie, linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, freedreno@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9iIENsYXJrIDxyb2JkY2xhcmtAZ21haWwuY29tPgoKQWRkIHN1cHBvcnQgdG8gcmVz
dG9yZSB0aGUgc2VjdXJlIGNvbmZpZ3VyYXRpb24gZm9yIHFjbV9zY20tMzIuYy4gVGhpcwppcyBu
ZWVkZWQgYnkgdGhlIE9uIENoaXAgTUVNb3J5IChPQ01FTSkgdGhhdCBpcyBwcmVzZW50IG9uIHNv
bWUKU25hcGRyYWdvbiBkZXZpY2VzLgoKU2lnbmVkLW9mZi1ieTogUm9iIENsYXJrIDxyb2JkY2xh
cmtAZ21haWwuY29tPgpbbWFzbmV5YkBvbnN0YXRpb24ub3JnOiBwb3J0ZWQgdG8gbGF0ZXN0IGtl
cm5lbDsgc2V0IGN0eF9iYW5rX251bSB0bwogc3BhcmUgcGFyYW1ldGVyLl0KU2lnbmVkLW9mZi1i
eTogQnJpYW4gTWFzbmV5IDxtYXNuZXliQG9uc3RhdGlvbi5vcmc+Ci0tLQpDaGFuZ2VzIHNpbmNl
IHYxOgotIFVzZSBleGlzdGluZyBfX3Fjb21fc2NtX3Jlc3RvcmVfc2VjX2NmZygpIGZ1bmN0aW9u
IHN0dWIgaW4KICBxY29tX3NjbS0zMi5jIHRoYXQgd2FzIHVuaW1wbGVtZW50ZWQKLSBTZXQgdGhl
IGNmZy5jdHhfYmFua19udW0gdG8gdGhlIHNwYXJlIGZ1bmN0aW9uIHBhcmFtZXRlci4gSXQgd2Fz
CiAgcHJldmlvdXNseSBzZXQgdG8gdGhlIGRldmljZV9pZC4KCiBkcml2ZXJzL2Zpcm13YXJlL3Fj
b21fc2NtLTMyLmMgfCAxNyArKysrKysrKysrKysrKysrLQogZHJpdmVycy9maXJtd2FyZS9xY29t
X3NjbS5jICAgIHwgMTMgKysrKysrKysrKysrKwogaW5jbHVkZS9saW51eC9xY29tX3NjbS5oICAg
ICAgIHwgMTEgKysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdlZCwgNDAgaW5zZXJ0aW9ucygrKSwg
MSBkZWxldGlvbigtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20tMzIu
YyBiL2RyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20tMzIuYwppbmRleCA0YzI1MTRlNWUyNDkuLjVk
OTBiN2Y1YWI1YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS0zMi5jCisr
KyBiL2RyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20tMzIuYwpAQCAtNjE3LDcgKzYxNywyMiBAQCBp
bnQgX19xY29tX3NjbV9hc3NpZ25fbWVtKHN0cnVjdCBkZXZpY2UgKmRldiwgcGh5c19hZGRyX3Qg
bWVtX3JlZ2lvbiwKIGludCBfX3Fjb21fc2NtX3Jlc3RvcmVfc2VjX2NmZyhzdHJ1Y3QgZGV2aWNl
ICpkZXYsIHUzMiBkZXZpY2VfaWQsCiAJCQkgICAgICAgdTMyIHNwYXJlKQogewotCXJldHVybiAt
RU5PREVWOworCXN0cnVjdCBtc21fc2NtX3NlY19jZmcgeworCQlfX2xlMzIgaWQ7CisJCV9fbGUz
MiBjdHhfYmFua19udW07CisJfSBjZmc7CisJaW50IHJldCwgc2NtX3JldCA9IDA7CisKKwljZmcu
aWQgPSBjcHVfdG9fbGUzMihkZXZpY2VfaWQpOworCWNmZy5jdHhfYmFua19udW0gPSBjcHVfdG9f
bGUzMihzcGFyZSk7CisKKwlyZXQgPSBxY29tX3NjbV9jYWxsKGRldiwgUUNPTV9TQ01fU1ZDX01Q
LCBRQ09NX1NDTV9SRVNUT1JFX1NFQ19DRkcsCisJCQkgICAgJmNmZywgc2l6ZW9mKGNmZyksICZz
Y21fcmV0LCBzaXplb2Yoc2NtX3JldCkpOworCisJaWYgKHJldCB8fCBzY21fcmV0KQorCQlyZXR1
cm4gcmV0ID8gcmV0IDogLUVJTlZBTDsKKworCXJldHVybiAwOwogfQogCiBpbnQgX19xY29tX3Nj
bV9pb21tdV9zZWN1cmVfcHRibF9zaXplKHN0cnVjdCBkZXZpY2UgKmRldiwgdTMyIHNwYXJlLApk
aWZmIC0tZ2l0IGEvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS5jIGIvZHJpdmVycy9maXJtd2Fy
ZS9xY29tX3NjbS5jCmluZGV4IDJlMTJlYTU2YzM0Yy4uNTQ1MzIzMzFkZGMxIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMKKysrIGIvZHJpdmVycy9maXJtd2FyZS9xY29t
X3NjbS5jCkBAIC0zNjYsNiArMzY2LDE5IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcmVzZXRfY29u
dHJvbF9vcHMgcWNvbV9zY21fcGFzX3Jlc2V0X29wcyA9IHsKIAkuZGVhc3NlcnQgPSBxY29tX3Nj
bV9wYXNfcmVzZXRfZGVhc3NlcnQsCiB9OwogCisvKioKKyAqIHFjb21fc2NtX3Jlc3RvcmVfc2Vj
X2NmZ19hdmFpbGFibGUoKSAtIENoZWNrIGlmIHNlY3VyZSBlbnZpcm9ubWVudAorICogc3VwcG9y
dHMgcmVzdG9yZSBzZWN1cml0eSBjb25maWcgaW50ZXJmYWNlLgorICoKKyAqIFJldHVybiB0cnVl
IGlmIHJlc3RvcmUtY2ZnIGludGVyZmFjZSBpcyBzdXBwb3J0ZWQsIGZhbHNlIGlmIG5vdC4KKyAq
LworYm9vbCBxY29tX3NjbV9yZXN0b3JlX3NlY19jZmdfYXZhaWxhYmxlKHZvaWQpCit7CisJcmV0
dXJuIF9fcWNvbV9zY21faXNfY2FsbF9hdmFpbGFibGUoX19zY20tPmRldiwgUUNPTV9TQ01fU1ZD
X01QLAorCQkJCQkgICAgUUNPTV9TQ01fUkVTVE9SRV9TRUNfQ0ZHKTsKK30KK0VYUE9SVF9TWU1C
T0wocWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnX2F2YWlsYWJsZSk7CisKIGludCBxY29tX3NjbV9y
ZXN0b3JlX3NlY19jZmcodTMyIGRldmljZV9pZCwgdTMyIHNwYXJlKQogewogCXJldHVybiBfX3Fj
b21fc2NtX3Jlc3RvcmVfc2VjX2NmZyhfX3NjbS0+ZGV2LCBkZXZpY2VfaWQsIHNwYXJlKTsKZGlm
ZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvcWNvbV9zY20uaCBiL2luY2x1ZGUvbGludXgvcWNvbV9z
Y20uaAppbmRleCA1MjFiMDg5YmUxYzkuLjhhMjRmN2ViMjU4OCAxMDA2NDQKLS0tIGEvaW5jbHVk
ZS9saW51eC9xY29tX3NjbS5oCisrKyBiL2luY2x1ZGUvbGludXgvcWNvbV9zY20uaApAQCAtMzQs
NiArMzQsMTYgQEAgZW51bSBxY29tX3NjbV9vY21lbV9jbGllbnQgewogCVFDT01fU0NNX09DTUVN
X0RFQlVHX0lELAogfTsKIAorZW51bSBxY29tX3NjbV9zZWNfZGV2X2lkIHsKKwlRQ09NX1NDTV9N
RFNTX0RFVl9JRCAgICA9IDEsCisJUUNPTV9TQ01fT0NNRU1fREVWX0lEICAgPSA1LAorCVFDT01f
U0NNX1BDSUUwX0RFVl9JRCAgID0gMTEsCisJUUNPTV9TQ01fUENJRTFfREVWX0lEICAgPSAxMiwK
KwlRQ09NX1NDTV9HRlhfREVWX0lEICAgICA9IDE4LAorCVFDT01fU0NNX1VGU19ERVZfSUQgICAg
ID0gMTksCisJUUNPTV9TQ01fSUNFX0RFVl9JRCAgICAgPSAyMCwKK307CisKICNkZWZpbmUgUUNP
TV9TQ01fVk1JRF9ITE9TICAgICAgIDB4MwogI2RlZmluZSBRQ09NX1NDTV9WTUlEX01TU19NU0Eg
ICAgMHhGCiAjZGVmaW5lIFFDT01fU0NNX1ZNSURfV0xBTiAgICAgICAweDE4CkBAIC02OSw2ICs3
OSw3IEBAIGV4dGVybiBpbnQgcWNvbV9zY21fYXNzaWduX21lbShwaHlzX2FkZHJfdCBtZW1fYWRk
ciwgc2l6ZV90IG1lbV9zeiwKIGV4dGVybiB2b2lkIHFjb21fc2NtX2NwdV9wb3dlcl9kb3duKHUz
MiBmbGFncyk7CiBleHRlcm4gdTMyIHFjb21fc2NtX2dldF92ZXJzaW9uKHZvaWQpOwogZXh0ZXJu
IGludCBxY29tX3NjbV9zZXRfcmVtb3RlX3N0YXRlKHUzMiBzdGF0ZSwgdTMyIGlkKTsKK2V4dGVy
biBib29sIHFjb21fc2NtX3Jlc3RvcmVfc2VjX2NmZ19hdmFpbGFibGUodm9pZCk7CiBleHRlcm4g
aW50IHFjb21fc2NtX3Jlc3RvcmVfc2VjX2NmZyh1MzIgZGV2aWNlX2lkLCB1MzIgc3BhcmUpOwog
ZXh0ZXJuIGludCBxY29tX3NjbV9pb21tdV9zZWN1cmVfcHRibF9zaXplKHUzMiBzcGFyZSwgc2l6
ZV90ICpzaXplKTsKIGV4dGVybiBpbnQgcWNvbV9zY21faW9tbXVfc2VjdXJlX3B0YmxfaW5pdCh1
NjQgYWRkciwgdTMyIHNpemUsIHUzMiBzcGFyZSk7Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QK
ZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
