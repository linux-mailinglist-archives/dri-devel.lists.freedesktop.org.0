Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 371D423C52B
	for <lists+dri-devel@lfdr.de>; Wed,  5 Aug 2020 07:42:24 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5619889F99;
	Wed,  5 Aug 2020 05:42:22 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yb1-xb43.google.com (mail-yb1-xb43.google.com
 [IPv6:2607:f8b0:4864:20::b43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B5BAB89F99
 for <dri-devel@lists.freedesktop.org>; Wed,  5 Aug 2020 05:42:20 +0000 (UTC)
Received: by mail-yb1-xb43.google.com with SMTP id e14so9331149ybf.4
 for <dri-devel@lists.freedesktop.org>; Tue, 04 Aug 2020 22:42:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=+v88ZpubOjQbozYa/6o76jyNXaao2d67MC+FYzZYGO8=;
 b=bzsPzP1fVjz34kvdetcgMG2si5UO8pOEagH79E9Q+hMzxuvetZIgxlXxcG4j9w0f3b
 GFuhcbMtllAVOIr0QbDiP0Yn3jw64g1cWQYD/T6zH7r7qT6q6Eiu8+ZudNTvmQ7wBzU+
 QFPrOYNthQ8ZL736qxAJ0AXAamXQVxizxHm9Pw5ecFs4BA7PiP6xFX5vTenh/xkl/soM
 BRjNFsSprV8OzAa8XTrUeBQoUVtjXx5sCMJgjHkZiCvNPxXlyoWIooCgi9MEt7IRXQkm
 vdgpK39XBkXfQ1Psn+thkcPVTGaWqeTUbYy5tmpvb4Bo13tMW/DtWAmcp/kBiJyHCBjB
 MS9A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=+v88ZpubOjQbozYa/6o76jyNXaao2d67MC+FYzZYGO8=;
 b=VFmFgtWFdTfuoHHcE5D2Pq8DPGoa9e/XZ15d5XpUwrU2ULkxIYvfFFN5mjrNhd0iek
 c1x43uC2VuLGUGqpdl30nIHqj0dTlRadfXu6GU8jUrhAmf393s2ttqGL4XImYNymEzb0
 Kiqow/JP0yv3fSjPIkkKzA4oM+KKOPy7qzRaMMM9GCZxOZM6e3hFGRBW1VimHXdT7zQg
 IclJ0tmFe2rX8u7OlixcFus5lE+yurZzMTlcPfZMrXr7ILbNDlFbMtbKRp59Cbz0QJHr
 gQVh1SFA6kkJuRQFlRop3e32+264cu+YbQfe1XJpZ2c7fhYPNmkt0AekP54tJlgz4Dc1
 Hw2Q==
X-Gm-Message-State: AOAM5312u0KZek7+Ncg3/9x31DEyw6JUGnlhqRHJ2qJkXRcDfpEt9LWn
 fWw/wu2lpFm2dyBeFlqbTDIV/Ad2cVlM3wuNKpN8chbhsj4=
X-Google-Smtp-Source: ABdhPJz1G3zFV/Q5Ip1Ollk+NJCFyJRshXqCkk+DYQGwzIsBpAYAWuRUs/LyCWeBQxJ98WMKww16st5a2VsJBDwZN/0=
X-Received: by 2002:a25:2e12:: with SMTP id u18mr2226094ybu.200.1596606140021; 
 Tue, 04 Aug 2020 22:42:20 -0700 (PDT)
MIME-Version: 1.0
References: <20200804025632.3868079-1-airlied@gmail.com>
 <20200804025632.3868079-25-airlied@gmail.com>
In-Reply-To: <20200804025632.3868079-25-airlied@gmail.com>
From: Ben Skeggs <skeggsb@gmail.com>
Date: Wed, 5 Aug 2020 15:42:09 +1000
Message-ID: <CACAvsv6yshUkoRgFZARED+Pw8uT59QfvL0yqjNGifbcuRF8m3A@mail.gmail.com>
Subject: Re: [PATCH 24/59] drm/ttm: pass man around instead of mem_type in
 some places
To: Dave Airlie <airlied@gmail.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: sroland@vmware.com, ML dri-devel <dri-devel@lists.freedesktop.org>,
 linux-graphics-maintainer@vmware.com, Gerd Hoffmann <kraxel@redhat.com>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>,
 Ben Skeggs <bskeggs@redhat.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCA0IEF1ZyAyMDIwIGF0IDEyOjU3LCBEYXZlIEFpcmxpZSA8YWlybGllZEBnbWFpbC5j
b20+IHdyb3RlOgo+Cj4gRnJvbTogRGF2ZSBBaXJsaWUgPGFpcmxpZWRAcmVkaGF0LmNvbT4KPgo+
IFRoaXMgbWFrZXMgaXQgZWFzaWVyIHRvIGNsZWFudXAgdGhpbmdzCj4KPiBSZXZpZXdlZC1ieTog
Q2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPgo+IFNpZ25lZC1vZmYt
Ynk6IERhdmUgQWlybGllIDxhaXJsaWVkQHJlZGhhdC5jb20+ClJldmlld2VkLWJ5OiBCZW4gU2tl
Z2dzIDxic2tlZ2dzQHJlZGhhdC5jb20+Cgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0
bV9iby5jIHwgMTQgKysrKysrLS0tLS0tLS0KPiAgMSBmaWxlIGNoYW5nZWQsIDYgaW5zZXJ0aW9u
cygrKSwgOCBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRt
L3R0bV9iby5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYwo+IGluZGV4IGRhODhlYTZj
YjgxNC4uYWYxYjFjM2Y2ZWQyIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRt
X2JvLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCj4gQEAgLTc2OSwxMyAr
NzY5LDEyIEBAIHN0YXRpYyBpbnQgdHRtX21lbV9ldmljdF93YWl0X2J1c3koc3RydWN0IHR0bV9i
dWZmZXJfb2JqZWN0ICpidXN5X2JvLAo+ICB9Cj4KPiAgc3RhdGljIGludCB0dG1fbWVtX2V2aWN0
X2ZpcnN0KHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LAo+IC0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB1aW50MzJfdCBtZW1fdHlwZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc3RydWN0IHR0bV9tZW1fdHlwZV9tYW5hZ2VyICptYW4sCj4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCB0dG1fcGxhY2UgKnBsYWNlLAo+ICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHggKmN0eCwKPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHd3X2FjcXVpcmVfY3R4ICp0aWNr
ZXQpCj4gIHsKPiAgICAgICAgIHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8gPSBOVUxMLCAq
YnVzeV9ibyA9IE5VTEw7Cj4gLSAgICAgICBzdHJ1Y3QgdHRtX21lbV90eXBlX21hbmFnZXIgKm1h
biA9ICZiZGV2LT5tYW5bbWVtX3R5cGVdOwo+ICAgICAgICAgYm9vbCBsb2NrZWQgPSBmYWxzZTsK
PiAgICAgICAgIHVuc2lnbmVkIGk7Cj4gICAgICAgICBpbnQgcmV0Owo+IEBAIC05MjQsNyArOTIz
LDcgQEAgc3RhdGljIGludCB0dG1fYm9fbWVtX2ZvcmNlX3NwYWNlKHN0cnVjdCB0dG1fYnVmZmVy
X29iamVjdCAqYm8sCj4gICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gICAgICAgICAg
ICAgICAgIGlmICh1bmxpa2VseShyZXQgIT0gLUVOT1NQQykpCj4gICAgICAgICAgICAgICAgICAg
ICAgICAgcmV0dXJuIHJldDsKPiAtICAgICAgICAgICAgICAgcmV0ID0gdHRtX21lbV9ldmljdF9m
aXJzdChiZGV2LCBtZW0tPm1lbV90eXBlLCBwbGFjZSwgY3R4LAo+ICsgICAgICAgICAgICAgICBy
ZXQgPSB0dG1fbWVtX2V2aWN0X2ZpcnN0KGJkZXYsIG1hbiwgcGxhY2UsIGN0eCwKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXQpOwo+ICAgICAgICAgICAg
ICAgICBpZiAodW5saWtlbHkocmV0ICE9IDApKQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHJl
dHVybiByZXQ7Cj4gQEAgLTE0MDksMTQgKzE0MDgsMTMgQEAgaW50IHR0bV9ib19jcmVhdGUoc3Ry
dWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCj4gIEVYUE9SVF9TWU1CT0wodHRtX2JvX2NyZWF0ZSk7
Cj4KPiAgc3RhdGljIGludCB0dG1fYm9fZm9yY2VfbGlzdF9jbGVhbihzdHJ1Y3QgdHRtX2JvX2Rl
dmljZSAqYmRldiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVk
IG1lbV90eXBlKQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHR0
bV9tZW1fdHlwZV9tYW5hZ2VyICptYW4pCj4gIHsKPiAgICAgICAgIHN0cnVjdCB0dG1fb3BlcmF0
aW9uX2N0eCBjdHggPSB7Cj4gICAgICAgICAgICAgICAgIC5pbnRlcnJ1cHRpYmxlID0gZmFsc2Us
Cj4gICAgICAgICAgICAgICAgIC5ub193YWl0X2dwdSA9IGZhbHNlLAo+ICAgICAgICAgICAgICAg
ICAuZmxhZ3MgPSBUVE1fT1BUX0ZMQUdfRk9SQ0VfQUxMT0MKPiAgICAgICAgIH07Cj4gLSAgICAg
ICBzdHJ1Y3QgdHRtX21lbV90eXBlX21hbmFnZXIgKm1hbiA9ICZiZGV2LT5tYW5bbWVtX3R5cGVd
Owo+ICAgICAgICAgc3RydWN0IHR0bV9ib19nbG9iYWwgKmdsb2IgPSAmdHRtX2JvX2dsb2I7Cj4g
ICAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZTsKPiAgICAgICAgIGludCByZXQ7Cj4gQEAg
LTE0MzAsNyArMTQyOCw3IEBAIHN0YXRpYyBpbnQgdHRtX2JvX2ZvcmNlX2xpc3RfY2xlYW4oc3Ry
dWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCj4gICAgICAgICBmb3IgKGkgPSAwOyBpIDwgVFRNX01B
WF9CT19QUklPUklUWTsgKytpKSB7Cj4gICAgICAgICAgICAgICAgIHdoaWxlICghbGlzdF9lbXB0
eSgmbWFuLT5scnVbaV0pKSB7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbl91bmxvY2so
Jmdsb2ItPmxydV9sb2NrKTsKPiAtICAgICAgICAgICAgICAgICAgICAgICByZXQgPSB0dG1fbWVt
X2V2aWN0X2ZpcnN0KGJkZXYsIG1lbV90eXBlLCBOVUxMLCAmY3R4LAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgIHJldCA9IHR0bV9tZW1fZXZpY3RfZmlyc3QoYmRldiwgbWFuLCBOVUxMLCAmY3R4
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTlVM
TCk7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldCkKPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gQEAgLTE0NzUsNyArMTQ3Myw3IEBAIGludCB0
dG1fYm9fY2xlYW5fbW0oc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsIHVuc2lnbmVkIG1lbV90
eXBlKQo+Cj4gICAgICAgICByZXQgPSAwOwo+ICAgICAgICAgaWYgKG1lbV90eXBlID4gMCkgewo+
IC0gICAgICAgICAgICAgICByZXQgPSB0dG1fYm9fZm9yY2VfbGlzdF9jbGVhbihiZGV2LCBtZW1f
dHlwZSk7Cj4gKyAgICAgICAgICAgICAgIHJldCA9IHR0bV9ib19mb3JjZV9saXN0X2NsZWFuKGJk
ZXYsIG1hbik7Cj4gICAgICAgICAgICAgICAgIGlmIChyZXQpIHsKPiAgICAgICAgICAgICAgICAg
ICAgICAgICBwcl9lcnIoIkNsZWFudXAgZXZpY3Rpb24gZmFpbGVkXG4iKTsKPiAgICAgICAgICAg
ICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+IEBAIC0xNTA1LDcgKzE1MDMsNyBAQCBpbnQgdHRt
X2JvX2V2aWN0X21tKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LCB1bnNpZ25lZCBtZW1fdHlw
ZSkKPiAgICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4gICAgICAgICB9Cj4KPiAtICAgICAgIHJl
dHVybiB0dG1fYm9fZm9yY2VfbGlzdF9jbGVhbihiZGV2LCBtZW1fdHlwZSk7Cj4gKyAgICAgICBy
ZXR1cm4gdHRtX2JvX2ZvcmNlX2xpc3RfY2xlYW4oYmRldiwgbWFuKTsKPiAgfQo+ICBFWFBPUlRf
U1lNQk9MKHR0bV9ib19ldmljdF9tbSk7Cj4KPiAtLQo+IDIuMjYuMgo+Cj4gX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBkcmktZGV2ZWwgbWFpbGluZyBs
aXN0Cj4gZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJp
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
