Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EE84FBAE11
	for <lists+dri-devel@lfdr.de>; Mon, 23 Sep 2019 08:55:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 978EC6E0ED;
	Mon, 23 Sep 2019 06:55:23 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
X-Greylist: delayed 442 seconds by postgrey-1.36 at gabe;
 Sat, 21 Sep 2019 12:57:36 UTC
Received: from mx1.riseup.net (mx1.riseup.net [198.252.153.129])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 47A7D6E04A
 for <dri-devel@lists.freedesktop.org>; Sat, 21 Sep 2019 12:57:36 +0000 (UTC)
Received: from capuchin.riseup.net (capuchin-pn.riseup.net [10.0.1.176])
 (using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
 (Client CN "*.riseup.net",
 Issuer "COMODO RSA Domain Validation Secure Server CA" (verified OK))
 by mx1.riseup.net (Postfix) with ESMTPS id 5F6C51B932C;
 Sat, 21 Sep 2019 05:49:40 -0700 (PDT)
X-Riseup-User-ID: E904BF54A9D00DEAC807850919DC7C9386AA0504DF66F720342B6B7C22BA1A3A
Received: from [127.0.0.1] (localhost [127.0.0.1])
 by capuchin.riseup.net (Postfix) with ESMTPSA id A3A7F120063;
 Sat, 21 Sep 2019 05:49:36 -0700 (PDT)
From: =?UTF-8?q?Joonas=20Kylm=C3=A4l=C3=A4?= <joonas.kylmala@iki.fi>
To: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>,
 David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>,
 dri-devel@lists.freedesktop.org, linux-kernel@vger.kernel.org
Subject: [PATCH] drm/panel: samsung: s6e8aa0: Add backlight control support
Date: Sat, 21 Sep 2019 15:48:43 +0300
Message-Id: <20190921124843.6967-1-joonas.kylmala@iki.fi>
MIME-Version: 1.0
X-Mailman-Approved-At: Mon, 23 Sep 2019 06:55:22 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: paul.kocialkowski@bootlin.com,
 =?UTF-8?q?Joonas=20Kylm=C3=A4l=C3=A4?= <joonas.kylmala@iki.fi>,
 GNUtoo@cyberdimension.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBtYWtlcyB0aGUgYmFja2xpZ2h0IGJyaWdodG5lc3MgY29udHJvbGxhYmxlIGZyb20gdGhl
CnVzZXJzcGFjZS4KClNpZ25lZC1vZmYtYnk6IEpvb25hcyBLeWxtw6Rsw6QgPGpvb25hcy5reWxt
YWxhQGlraS5maT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtc2Ftc3VuZy1zNmU4
YWEwLmMgfCA4MiArKysrKysrKysrKysrKysrKysrKy0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA2
MCBpbnNlcnRpb25zKCspLCAyMiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vcGFuZWwvcGFuZWwtc2Ftc3VuZy1zNmU4YWEwLmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFu
ZWwvcGFuZWwtc2Ftc3VuZy1zNmU4YWEwLmMKaW5kZXggZGJjZWQ2NTAxMjA0Li5hYTc1OTM0ZjVi
ZWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1zYW1zdW5nLXM2ZThh
YTAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtc2Ftc3VuZy1zNmU4YWEwLmMK
QEAgLTEwLDggKzEwLDEyIEBACiAgKiBFdW5jaHVsIEtpbSA8Y2h1bHNwcm8ua2ltQHNhbXN1bmcu
Y29tPgogICogVG9tYXN6IEZpZ2EgPHQuZmlnYUBzYW1zdW5nLmNvbT4KICAqIEFuZHJ6ZWogSGFq
ZGEgPGEuaGFqZGFAc2Ftc3VuZy5jb20+CisgKgorICogRGVyaXZlZCBmcm9tIHBhbmVsLXNhbXN1
bmctczZlNjNtMC5jOgorICogIENvcHlyaWdodCAoQykgMjAxOSBQYXdlxYIgQ2htaWVsIDxwYXdl
bC5taWtvbGFqLmNobWllbEBnbWFpbC5jb20+CiAqLwogCisjaW5jbHVkZSA8bGludXgvYmFja2xp
Z2h0Lmg+CiAjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KICNpbmNsdWRlIDxsaW51eC9ncGlvL2Nv
bnN1bWVyLmg+CiAjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+CkBAIC04NSw2ICs4OSw4IEBACiAj
ZGVmaW5lIEFJRF8yCQkJCSgweDYpCiAjZGVmaW5lIEFJRF8zCQkJCSgweDcpCiAKKyNkZWZpbmUg
TUFYX0JSSUdIVE5FU1MgKEdBTU1BX0xFVkVMX05VTSAtIDEpCisKIHR5cGVkZWYgdTggczZlOGFh
MF9nYW1tYV90YWJsZVtHQU1NQV9UQUJMRV9MRU5dOwogCiBzdHJ1Y3QgczZlOGFhMF92YXJpYW50
IHsKQEAgLTk1LDYgKzEwMSw3IEBAIHN0cnVjdCBzNmU4YWEwX3ZhcmlhbnQgewogc3RydWN0IHM2
ZThhYTAgewogCXN0cnVjdCBkZXZpY2UgKmRldjsKIAlzdHJ1Y3QgZHJtX3BhbmVsIHBhbmVsOwor
CXN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpibF9kZXY7CiAKIAlzdHJ1Y3QgcmVndWxhdG9yX2J1
bGtfZGF0YSBzdXBwbGllc1syXTsKIAlzdHJ1Y3QgZ3Bpb19kZXNjICpyZXNldF9ncGlvOwpAQCAt
MTEwLDcgKzExNyw2IEBAIHN0cnVjdCBzNmU4YWEwIHsKIAl1OCB2ZXJzaW9uOwogCXU4IGlkOwog
CWNvbnN0IHN0cnVjdCBzNmU4YWEwX3ZhcmlhbnQgKnZhcmlhbnQ7Ci0JaW50IGJyaWdodG5lc3M7
CiAKIAkvKiBUaGlzIGZpZWxkIGlzIHRlc3RlZCBieSBmdW5jdGlvbnMgZGlyZWN0bHkgYWNjZXNz
aW5nIERTSSBidXMgYmVmb3JlCiAJICogdHJhbnNmZXIsIHRyYW5zZmVyIGlzIHNraXBwZWQgaWYg
aXQgaXMgc2V0LiBJbiBjYXNlIG9mIHRyYW5zZmVyCkBAIC0zMjEsOSArMzI3LDEwIEBAIHN0YXRp
YyB2b2lkIHM2ZThhYTBfZXRjX2VsdnNzX2NvbnRyb2woc3RydWN0IHM2ZThhYTAgKmN0eCkKIAog
c3RhdGljIHZvaWQgczZlOGFhMF9lbHZzc19udm1fc2V0X3YxNDIoc3RydWN0IHM2ZThhYTAgKmN0
eCkKIHsKKwlzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmQgPSBjdHgtPmJsX2RldjsKIAl1OCBi
cjsKIAotCXN3aXRjaCAoY3R4LT5icmlnaHRuZXNzKSB7CisJc3dpdGNoIChiZC0+cHJvcHMuYnJp
Z2h0bmVzcykgewogCWNhc2UgMCAuLi4gNjogLyogMzBjZCB+IDEwMGNkICovCiAJCWJyID0gMHhk
ZjsKIAkJYnJlYWs7CkBAIC03NjIsMjQgKzc2OSw2IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgczZl
OGFhMF92YXJpYW50IHM2ZThhYTBfdmFyaWFudHNbXSA9IHsKIAl9CiB9OwogCi1zdGF0aWMgdm9p
ZCBzNmU4YWEwX2JyaWdodG5lc3Nfc2V0KHN0cnVjdCBzNmU4YWEwICpjdHgpCi17Ci0JY29uc3Qg
dTggKmdhbW1hOwotCi0JaWYgKGN0eC0+ZXJyb3IpCi0JCXJldHVybjsKLQotCWdhbW1hID0gY3R4
LT52YXJpYW50LT5nYW1tYV90YWJsZXNbY3R4LT5icmlnaHRuZXNzXTsKLQotCWlmIChjdHgtPnZl
cnNpb24gPj0gMTQyKQotCQlzNmU4YWEwX2VsdnNzX252bV9zZXQoY3R4KTsKLQotCXM2ZThhYTBf
ZGNzX3dyaXRlKGN0eCwgZ2FtbWEsIEdBTU1BX1RBQkxFX0xFTik7Ci0KLQkvKiB1cGRhdGUgZ2Ft
bWEgdGFibGUuICovCi0JczZlOGFhMF9kY3Nfd3JpdGVfc2VxX3N0YXRpYyhjdHgsIDB4ZjcsIDB4
MDMpOwotfQotCiBzdGF0aWMgdm9pZCBzNmU4YWEwX3BhbmVsX2luaXQoc3RydWN0IHM2ZThhYTAg
KmN0eCkKIHsKIAlzNmU4YWEwX2FwcGx5X2xldmVsXzFfa2V5KGN0eCk7CkBAIC03OTEsNyArNzgw
LDcgQEAgc3RhdGljIHZvaWQgczZlOGFhMF9wYW5lbF9pbml0KHN0cnVjdCBzNmU4YWEwICpjdHgp
CiAKIAlzNmU4YWEwX3BhbmVsX2NvbmRfc2V0KGN0eCk7CiAJczZlOGFhMF9kaXNwbGF5X2NvbmRp
dGlvbl9zZXQoY3R4KTsKLQlzNmU4YWEwX2JyaWdodG5lc3Nfc2V0KGN0eCk7CisJYmFja2xpZ2h0
X2VuYWJsZShjdHgtPmJsX2Rldik7CiAJczZlOGFhMF9ldGNfc291cmNlX2NvbnRyb2woY3R4KTsK
IAlzNmU4YWEwX2V0Y19wZW50aWxlX2NvbnRyb2woY3R4KTsKIAlzNmU4YWEwX2VsdnNzX252bV9z
ZXQoY3R4KTsKQEAgLTk3NCw2ICs5NjMsNTMgQEAgc3RhdGljIGludCBzNmU4YWEwX3BhcnNlX2R0
KHN0cnVjdCBzNmU4YWEwICpjdHgpCiAJcmV0dXJuIDA7CiB9CiAKK3N0YXRpYyBpbnQgczZlOGFh
MF9zZXRfYnJpZ2h0bmVzcyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmQpCit7CisJc3RydWN0
IHM2ZThhYTAgKmN0eCA9IGJsX2dldF9kYXRhKGJkKTsKKwljb25zdCB1OCAqZ2FtbWE7CisKKwlp
ZiAoY3R4LT5lcnJvcikKKwkJcmV0dXJuOworCisJZ2FtbWEgPSBjdHgtPnZhcmlhbnQtPmdhbW1h
X3RhYmxlc1tiZC0+cHJvcHMuYnJpZ2h0bmVzc107CisKKwlpZiAoY3R4LT52ZXJzaW9uID49IDE0
MikKKwkJczZlOGFhMF9lbHZzc19udm1fc2V0KGN0eCk7CisKKwlzNmU4YWEwX2Rjc193cml0ZShj
dHgsIGdhbW1hLCBHQU1NQV9UQUJMRV9MRU4pOworCisJLyogdXBkYXRlIGdhbW1hIHRhYmxlLiAq
LworCXM2ZThhYTBfZGNzX3dyaXRlX3NlcV9zdGF0aWMoY3R4LCAweGY3LCAweDAzKTsKKworCXJl
dHVybiBzNmU4YWEwX2NsZWFyX2Vycm9yKGN0eCk7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qg
YmFja2xpZ2h0X29wcyBzNmU4YWEwX2JhY2tsaWdodF9vcHMgPSB7CisJLnVwZGF0ZV9zdGF0dXMJ
PSBzNmU4YWEwX3NldF9icmlnaHRuZXNzLAorfTsKKworc3RhdGljIGludCBzNmU4YWEwX2JhY2ts
aWdodF9yZWdpc3RlcihzdHJ1Y3QgczZlOGFhMCAqY3R4KQoreworCXN0cnVjdCBiYWNrbGlnaHRf
cHJvcGVydGllcyBwcm9wcyA9IHsKKwkJLnR5cGUJCT0gQkFDS0xJR0hUX1JBVywKKwkJLmJyaWdo
dG5lc3MJPSBNQVhfQlJJR0hUTkVTUywKKwkJLm1heF9icmlnaHRuZXNzID0gTUFYX0JSSUdIVE5F
U1MKKwl9OworCXN0cnVjdCBkZXZpY2UgKmRldiA9IGN0eC0+ZGV2OworCWludCByZXQgPSAwOwor
CisJY3R4LT5ibF9kZXYgPSBkZXZtX2JhY2tsaWdodF9kZXZpY2VfcmVnaXN0ZXIoZGV2LCAicGFu
ZWwiLCBkZXYsIGN0eCwKKwkJCQkJCSAgICAgJnM2ZThhYTBfYmFja2xpZ2h0X29wcywKKwkJCQkJ
CSAgICAgJnByb3BzKTsKKwlpZiAoSVNfRVJSKGN0eC0+YmxfZGV2KSkgeworCQlyZXQgPSBQVFJf
RVJSKGN0eC0+YmxfZGV2KTsKKwkJRFJNX0RFVl9FUlJPUihkZXYsICJlcnJvciByZWdpc3Rlcmlu
ZyBiYWNrbGlnaHQgZGV2aWNlICglZClcbiIsCisJCQkgICAgICByZXQpOworCX0KKworCXJldHVy
biByZXQ7Cit9CisKIHN0YXRpYyBpbnQgczZlOGFhMF9wcm9iZShzdHJ1Y3QgbWlwaV9kc2lfZGV2
aWNlICpkc2kpCiB7CiAJc3RydWN0IGRldmljZSAqZGV2ID0gJmRzaS0+ZGV2OwpAQCAtMTAxNSw3
ICsxMDUxLDkgQEAgc3RhdGljIGludCBzNmU4YWEwX3Byb2JlKHN0cnVjdCBtaXBpX2RzaV9kZXZp
Y2UgKmRzaSkKIAkJcmV0dXJuIFBUUl9FUlIoY3R4LT5yZXNldF9ncGlvKTsKIAl9CiAKLQljdHgt
PmJyaWdodG5lc3MgPSBHQU1NQV9MRVZFTF9OVU0gLSAxOworCXJldCA9IHM2ZThhYTBfYmFja2xp
Z2h0X3JlZ2lzdGVyKGN0eCk7CisJaWYgKHJldCA8IDApCisJCXJldHVybiByZXQ7CiAKIAlkcm1f
cGFuZWxfaW5pdCgmY3R4LT5wYW5lbCwgZGV2LCAmczZlOGFhMF9kcm1fZnVuY3MsCiAJCSAgICAg
ICBEUk1fTU9ERV9DT05ORUNUT1JfRFNJKTsKLS0gCjIuMTEuMAoKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmkt
ZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
