Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B70CD2AA15B
	for <lists+dri-devel@lfdr.de>; Sat,  7 Nov 2020 00:30:36 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1CD9F6EB55;
	Fri,  6 Nov 2020 23:30:30 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [216.205.24.124])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D8A306EB52
 for <dri-devel@lists.freedesktop.org>; Fri,  6 Nov 2020 23:30:28 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1604705427;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=vDgX3SGasD3utlrsjMY0mHpM+QOYJZoctAzfwPbauUI=;
 b=QMLk1zH87+ky3taVSuZOCZXgr9M7WjIGVDSVxOKKAf3YTDW0UQ7j1JU8rf+kCfElC6NUbF
 YKM1R005DOvVSq10bDTHi4btrEpVA9irBbKdkdpIDy2G1+KWwEPZOj4TPn1B1xDErkPhN1
 6PU7eTQWpYa0od9qnaClaOJ3w1bXmNo=
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-153-iYHkdA6IPSqm6X6vZ5nzvw-1; Fri, 06 Nov 2020 18:30:26 -0500
X-MC-Unique: iYHkdA6IPSqm6X6vZ5nzvw-1
Received: from smtp.corp.redhat.com (int-mx05.intmail.prod.int.phx2.redhat.com
 [10.5.11.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 6CB331868416;
 Fri,  6 Nov 2020 23:30:24 +0000 (UTC)
Received: from Whitewolf.lyude.net (ovpn-115-78.rdu2.redhat.com [10.10.115.78])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 01EF35578B;
 Fri,  6 Nov 2020 23:30:22 +0000 (UTC)
From: Lyude Paul <lyude@redhat.com>
To: gregkh@linuxfoundation.org, stable@vger.kernel.org,
 nouveau@lists.freedesktop.org, dri-devel@lists.freedesktop.org
Subject: [PATCH 1/2] drm/nouveau/kms/nv50-: Get rid of bogus
 nouveau_conn_mode_valid()
Date: Fri,  6 Nov 2020 18:30:14 -0500
Message-Id: <20201106233016.2481179-2-lyude@redhat.com>
In-Reply-To: <20201106233016.2481179-1-lyude@redhat.com>
References: <160459060724988@kroah.com>
 <20201106233016.2481179-1-lyude@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.15
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, Ben Skeggs <bskeggs@redhat.com>,
 open list <linux-kernel@vger.kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VmlsbGUgYWxzbyBwb2ludGVkIG91dCB0aGF0IEkgZ290IGEgbG90IG9mIHRoZSBsb2dpYyBoZXJl
IHdyb25nIGFzIHdlbGwsIHdob29wcy4KV2hpbGUgSSBkb24ndCB0aGluayBhbnlvbmUncyBsaWtl
bHkgdXNpbmcgM0Qgb3V0cHV0IHdpdGggbm91dmVhdSwgdGhlIG5leHQgcGF0Y2gKd2lsbCBtYWtl
IG5vdXZlYXVfY29ubl9tb2RlX3ZhbGlkKCkgbWFrZSBhIGxvdCBsZXNzIHNlbnNlLiBTbywgbGV0
J3MganVzdCBnZXQKcmlkIG9mIGl0IGFuZCBvcGVuLWNvZGUgaXQgbGlrZSBiZWZvcmUsIHdoaWxl
IHRha2luZyBjYXJlIHRvIG1vdmUgdGhlIDNEIGZyYW1lCnBhY2tpbmcgY2FsY3VsYXRpb25zIG9u
IHRoZSBkb3QgY2xvY2sgaW50byB0aGUgcmlnaHQgcGxhY2UuCgpTaWduZWQtb2ZmLWJ5OiBMeXVk
ZSBQYXVsIDxseXVkZUByZWRoYXQuY29tPgpGaXhlczogZDZhOWVmZWNlNzI0ICgiZHJtL25vdXZl
YXUva21zL252NTAtOiBTaGFyZSBEUCBTU1QgbW9kZV92YWxpZCgpIGhhbmRsaW5nIHdpdGggTVNU
IikKQ2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+CkNj
OiA8c3RhYmxlQHZnZXIua2VybmVsLm9yZz4gIyB2NS44KwpTaWduZWQtb2ZmLWJ5OiBCZW4gU2tl
Z2dzIDxic2tlZ2dzQHJlZGhhdC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91
dmVhdV9jb25uZWN0b3IuYyB8IDM2ICsrKysrKy0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUv
ZHJtL25vdXZlYXUvbm91dmVhdV9kcC5jICAgICAgICB8IDE1ICsrKysrKy0tLQogMiBmaWxlcyBj
aGFuZ2VkLCAyMCBpbnNlcnRpb25zKCspLCAzMSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2Nvbm5lY3Rvci5jIGIvZHJpdmVycy9ncHUv
ZHJtL25vdXZlYXUvbm91dmVhdV9jb25uZWN0b3IuYwppbmRleCA3Njc0MDI1YTRiZmU4Li4xZDkx
ZDUyZWU1MDgzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2Nv
bm5lY3Rvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfY29ubmVjdG9y
LmMKQEAgLTEwMzUsMjkgKzEwMzUsNiBAQCBnZXRfdG1kc19saW5rX2JhbmR3aWR0aChzdHJ1Y3Qg
ZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogCQlyZXR1cm4gMTEyMDAwICogZHVhbGxpbmtfc2Nh
bGU7CiB9CiAKLWVudW0gZHJtX21vZGVfc3RhdHVzCi1ub3V2ZWF1X2Nvbm5fbW9kZV9jbG9ja192
YWxpZChjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwKLQkJCSAgICAgIGNvbnN0
IHVuc2lnbmVkIG1pbl9jbG9jaywKLQkJCSAgICAgIGNvbnN0IHVuc2lnbmVkIG1heF9jbG9jaywK
LQkJCSAgICAgIHVuc2lnbmVkIGludCAqY2xvY2tfb3V0KQotewotCXVuc2lnbmVkIGludCBjbG9j
ayA9IG1vZGUtPmNsb2NrOwotCi0JaWYgKChtb2RlLT5mbGFncyAmIERSTV9NT0RFX0ZMQUdfM0Rf
TUFTSykgPT0KLQkgICAgRFJNX01PREVfRkxBR18zRF9GUkFNRV9QQUNLSU5HKQotCQljbG9jayAq
PSAyOwotCi0JaWYgKGNsb2NrIDwgbWluX2Nsb2NrKQotCQlyZXR1cm4gTU9ERV9DTE9DS19MT1c7
Ci0JaWYgKGNsb2NrID4gbWF4X2Nsb2NrKQotCQlyZXR1cm4gTU9ERV9DTE9DS19ISUdIOwotCi0J
aWYgKGNsb2NrX291dCkKLQkJKmNsb2NrX291dCA9IGNsb2NrOwotCi0JcmV0dXJuIE1PREVfT0s7
Ci19Ci0KIHN0YXRpYyBlbnVtIGRybV9tb2RlX3N0YXR1cwogbm91dmVhdV9jb25uZWN0b3JfbW9k
ZV92YWxpZChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQkJICAgICBzdHJ1Y3Qg
ZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKQEAgLTEwNjUsNyArMTA0Miw3IEBAIG5vdXZlYXVfY29u
bmVjdG9yX21vZGVfdmFsaWQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKIAlzdHJ1
Y3Qgbm91dmVhdV9jb25uZWN0b3IgKm52X2Nvbm5lY3RvciA9IG5vdXZlYXVfY29ubmVjdG9yKGNv
bm5lY3Rvcik7CiAJc3RydWN0IG5vdXZlYXVfZW5jb2RlciAqbnZfZW5jb2RlciA9IG52X2Nvbm5l
Y3Rvci0+ZGV0ZWN0ZWRfZW5jb2RlcjsKIAlzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIgPSB0
b19kcm1fZW5jb2Rlcihudl9lbmNvZGVyKTsKLQl1bnNpZ25lZCBtaW5fY2xvY2sgPSAyNTAwMCwg
bWF4X2Nsb2NrID0gbWluX2Nsb2NrOworCXVuc2lnbmVkIGludCBtaW5fY2xvY2sgPSAyNTAwMCwg
bWF4X2Nsb2NrID0gbWluX2Nsb2NrLCBjbG9jayA9IG1vZGUtPmNsb2NrOwogCiAJc3dpdGNoIChu
dl9lbmNvZGVyLT5kY2ItPnR5cGUpIHsKIAljYXNlIERDQl9PVVRQVVRfTFZEUzoKQEAgLTEwOTQs
OCArMTA3MSwxNSBAQCBub3V2ZWF1X2Nvbm5lY3Rvcl9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fY29u
bmVjdG9yICpjb25uZWN0b3IsCiAJCXJldHVybiBNT0RFX0JBRDsKIAl9CiAKLQlyZXR1cm4gbm91
dmVhdV9jb25uX21vZGVfY2xvY2tfdmFsaWQobW9kZSwgbWluX2Nsb2NrLCBtYXhfY2xvY2ssCi0J
CQkJCSAgICAgTlVMTCk7CisJaWYgKChtb2RlLT5mbGFncyAmIERSTV9NT0RFX0ZMQUdfM0RfTUFT
SykgPT0gRFJNX01PREVfRkxBR18zRF9GUkFNRV9QQUNLSU5HKQorCQljbG9jayAqPSAyOworCisJ
aWYgKGNsb2NrIDwgbWluX2Nsb2NrKQorCQlyZXR1cm4gTU9ERV9DTE9DS19MT1c7CisJaWYgKGNs
b2NrID4gbWF4X2Nsb2NrKQorCQlyZXR1cm4gTU9ERV9DTE9DS19ISUdIOworCisJcmV0dXJuIE1P
REVfT0s7CiB9CiAKIHN0YXRpYyBzdHJ1Y3QgZHJtX2VuY29kZXIgKgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9kcC5jIGIvZHJpdmVycy9ncHUvZHJtL25vdXZl
YXUvbm91dmVhdV9kcC5jCmluZGV4IDhhMGY3OTk0ZTFhZWIuLjQwNjgzZTEyNDRjM2YgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZHAuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2RwLmMKQEAgLTExNCwxOCArMTE0LDIzIEBAIG52NTBf
ZHBfbW9kZV92YWxpZChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQkgICB1bnNp
Z25lZCAqb3V0X2Nsb2NrKQogewogCWNvbnN0IHVuc2lnbmVkIG1pbl9jbG9jayA9IDI1MDAwOwot
CXVuc2lnbmVkIG1heF9jbG9jaywgY2xvY2s7Ci0JZW51bSBkcm1fbW9kZV9zdGF0dXMgcmV0Owor
CXVuc2lnbmVkIG1heF9jbG9jaywgY2xvY2sgPSBtb2RlLT5jbG9jazsKIAogCWlmIChtb2RlLT5m
bGFncyAmIERSTV9NT0RFX0ZMQUdfSU5URVJMQUNFICYmICFvdXRwLT5jYXBzLmRwX2ludGVybGFj
ZSkKIAkJcmV0dXJuIE1PREVfTk9fSU5URVJMQUNFOwogCisJaWYgKChtb2RlLT5mbGFncyAmIERS
TV9NT0RFX0ZMQUdfM0RfTUFTSykgPT0gRFJNX01PREVfRkxBR18zRF9GUkFNRV9QQUNLSU5HKQor
CQljbG9jayAqPSAyOworCiAJbWF4X2Nsb2NrID0gb3V0cC0+ZHAubGlua19uciAqIG91dHAtPmRw
LmxpbmtfYnc7CiAJY2xvY2sgPSBtb2RlLT5jbG9jayAqIChjb25uZWN0b3ItPmRpc3BsYXlfaW5m
by5icGMgKiAzKSAvIDEwOworCWlmIChjbG9jayA8IG1pbl9jbG9jaykKKwkJcmV0dXJuIE1PREVf
Q0xPQ0tfTE9XOworCWlmIChjbG9jayA+IG1heF9jbG9jaykKKwkJcmV0dXJuIE1PREVfQ0xPQ0tf
SElHSDsKIAotCXJldCA9IG5vdXZlYXVfY29ubl9tb2RlX2Nsb2NrX3ZhbGlkKG1vZGUsIG1pbl9j
bG9jaywgbWF4X2Nsb2NrLAotCQkJCQkgICAgJmNsb2NrKTsKIAlpZiAob3V0X2Nsb2NrKQogCQkq
b3V0X2Nsb2NrID0gY2xvY2s7Ci0JcmV0dXJuIHJldDsKKworCXJldHVybiBNT0RFX09LOwogfQot
LSAKMi4yOC4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
