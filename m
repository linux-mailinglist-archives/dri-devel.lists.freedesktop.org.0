Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CA62C10A56A
	for <lists+dri-devel@lfdr.de>; Tue, 26 Nov 2019 21:28:07 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5F20E6E488;
	Tue, 26 Nov 2019 20:28:05 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk [46.235.227.227])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 873566E488
 for <dri-devel@lists.freedesktop.org>; Tue, 26 Nov 2019 20:28:03 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: andrzej.p) with ESMTPSA id 0A0E528EDA3
Subject: Re: [PATCHv3/RFC 1/4] drm/arm: Factor out generic afbc helpers
To: Daniel Vetter <daniel@ffwll.ch>
References: <20191119083429.GA2881@jamwan02-TSP300>
 <20191121172247.31150-1-andrzej.p@collabora.com>
 <20191121172247.31150-2-andrzej.p@collabora.com>
 <20191125085506.GA29965@phenom.ffwll.local>
From: Andrzej Pietrasiewicz <andrzej.p@collabora.com>
Message-ID: <0ba48306-e625-3850-dc92-221dfd3f1ef3@collabora.com>
Date: Tue, 26 Nov 2019 21:27:59 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191125085506.GA29965@phenom.ffwll.local>
Content-Language: en-US
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: kernel@collabora.com, Mihail Atanassov <mihail.atanassov@arm.com>,
 David Airlie <airlied@linux.ie>, Liviu Dudau <liviu.dudau@arm.com>,
 dri-devel@lists.freedesktop.org, James Wang <james.qian.wang@arm.com>,
 Ayan Halder <Ayan.Halder@arm.com>, Sean Paul <sean@poorly.run>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgRGFuaWVsLAoKVGhhbmtzIGZvciB0aGUgY29tbWVudHMsIHBsZWFzZSBzZWUgaW5saW5lCgpX
IGRuaXUgMjUuMTEuMjAxOSBvwqAwOTo1NSwgRGFuaWVsIFZldHRlciBwaXN6ZToKPiBPbiBUaHUs
IE5vdiAyMSwgMjAxOSBhdCAwNjoyMjo0NFBNICswMTAwLCBBbmRyemVqIFBpZXRyYXNpZXdpY3og
d3JvdGU6Cj4+IFRoZXNlIGFyZSB1c2VmdWwgZm9yIG90aGVyIHVzZXJzIG9mIGFmYmMsIGUuZy4g
cm9ja2NoaXAuCj4+Cj4+IFNpZ25lZC1vZmYtYnk6IEFuZHJ6ZWogUGlldHJhc2lld2ljeiA8YW5k
cnplai5wQGNvbGxhYm9yYS5jb20+Cj4+IC0tLQo+PiAgIGRyaXZlcnMvZ3B1L2RybS9NYWtlZmls
ZSAgICAgICAgICB8ICAyICstCj4+ICAgZHJpdmVycy9ncHUvZHJtL2RybV9hZmJjLmMgICAgICAg
IHwgODQgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwo+PiAgIGRyaXZlcnMvZ3B1L2Ry
bS9kcm1fZm91cmNjLmMgICAgICB8IDExICsrKy0KPj4gICBkcml2ZXJzL2dwdS9kcm0vZHJtX2Zy
YW1lYnVmZmVyLmMgfCA3MSArKysrKysrKysrKysrKysrKysrKysrKysrLQo+PiAgIGluY2x1ZGUv
ZHJtL2RybV9hZmJjLmggICAgICAgICAgICB8IDM1ICsrKysrKysrKysrKysKPj4gICA1IGZpbGVz
IGNoYW5nZWQsIDE5OSBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQo+PiAgIGNyZWF0ZSBt
b2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vZHJtX2FmYmMuYwo+PiAgIGNyZWF0ZSBtb2RlIDEw
MDY0NCBpbmNsdWRlL2RybS9kcm1fYWZiYy5oCj4+Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKPj4gaW5kZXggZDliY2M5
ZjJhMGE0Li4zYTU4ZjMwYjgzYTYgMTAwNjQ0Cj4+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9NYWtl
ZmlsZQo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKPj4gQEAgLTQ0LDcgKzQ0LDcg
QEAgZHJtX2ttc19oZWxwZXIteSA6PSBkcm1fY3J0Y19oZWxwZXIubyBkcm1fZHBfaGVscGVyLm8g
ZHJtX2RzYy5vIGRybV9wcm9iZV9oZWxwZXIKPj4gICAJCWRybV9zaW1wbGVfa21zX2hlbHBlci5v
IGRybV9tb2Rlc2V0X2hlbHBlci5vIFwKPj4gICAJCWRybV9zY2RjX2hlbHBlci5vIGRybV9nZW1f
ZnJhbWVidWZmZXJfaGVscGVyLm8gXAo+PiAgIAkJZHJtX2F0b21pY19zdGF0ZV9oZWxwZXIubyBk
cm1fZGFtYWdlX2hlbHBlci5vIFwKPj4gLQkJZHJtX2Zvcm1hdF9oZWxwZXIubyBkcm1fc2VsZl9y
ZWZyZXNoX2hlbHBlci5vCj4+ICsJCWRybV9mb3JtYXRfaGVscGVyLm8gZHJtX3NlbGZfcmVmcmVz
aF9oZWxwZXIubyBkcm1fYWZiYy5vCj4gCj4gSnVzdCBhIHF1aWNrIGRyaXZlLWJ5Ogo+IC0geW91
IGNhbid0IHB1dCB0aGlzIGludG8gaGVscGVycyBhbmQgY2FsbCBmcm9tIGNvcmUgY29kZS4gVGhp
cyBzaG91bGQgYmUKPiAgICBjb3JlIGNvZGUuIEFsc28sIEknZCBoYXZlIGp1c3Qgc3R1ZmZlZCBp
dCBpbnRvIGRybV9mb3JtYXQuYy4KPiAKCmRybV9mb3JtYXQuYyBkb2VzIG5vdCBleGlzdC4gRGlk
IHlvdSBtZWFuIGRybV9mb3JtYXRfaGVscGVyLmM/Cgo8c25pcD4KCj4+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vZHJtX2ZyYW1lYnVmZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2Zy
YW1lYnVmZmVyLmMKPj4gaW5kZXggNTc1NjQzMThjZWVhLi4zMDNlZWE2MjRhMDIgMTAwNjQ0Cj4+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZnJhbWVidWZmZXIuYwo+PiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vZHJtX2ZyYW1lYnVmZmVyLmMKPj4gQEAgLTIzLDYgKzIzLDcgQEAKPj4gICAjaW5j
bHVkZSA8bGludXgvZXhwb3J0Lmg+Cj4+ICAgI2luY2x1ZGUgPGxpbnV4L3VhY2Nlc3MuaD4KPj4g
ICAKPj4gKyNpbmNsdWRlIDxkcm0vZHJtX2FmYmMuaD4KPj4gICAjaW5jbHVkZSA8ZHJtL2RybV9h
dG9taWMuaD4KPj4gICAjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfdWFwaS5oPgo+PiAgICNpbmNs
dWRlIDxkcm0vZHJtX2F1dGguaD4KPj4gQEAgLTMxLDYgKzMyLDcgQEAKPj4gICAjaW5jbHVkZSA8
ZHJtL2RybV9maWxlLmg+Cj4+ICAgI2luY2x1ZGUgPGRybS9kcm1fZm91cmNjLmg+Cj4+ICAgI2lu
Y2x1ZGUgPGRybS9kcm1fZnJhbWVidWZmZXIuaD4KPj4gKyNpbmNsdWRlIDxkcm0vZHJtX2dlbS5o
Pgo+PiAgICNpbmNsdWRlIDxkcm0vZHJtX3ByaW50Lmg+Cj4+ICAgI2luY2x1ZGUgPGRybS9kcm1f
dXRpbC5oPgo+PiAgIAo+PiBAQCAtMTY4LDcgKzE3MCw2OSBAQCBzdGF0aWMgaW50IGZiX3BsYW5l
X2hlaWdodChpbnQgaGVpZ2h0LAo+PiAgIAlyZXR1cm4gRElWX1JPVU5EX1VQKGhlaWdodCwgZm9y
bWF0LT52c3ViKTsKPj4gICB9Cj4+ICAgCj4+ICtzdGF0aWMgaW50IGFmYmNfY2hlY2soc3RydWN0
IGRybV9maWxlICpmaWxlX3ByaXYsCj4+ICsJCSAgICAgIGNvbnN0IHN0cnVjdCBkcm1fbW9kZV9m
Yl9jbWQyICpyLCBpbnQgaSwKPj4gKwkJICAgICAgY29uc3Qgc3RydWN0IGRybV9mb3JtYXRfaW5m
byAqaW5mbykKPj4gK3sKPj4gKwlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iajsKPj4gKwlpbnQg
YnBwID0gaW5mby0+Y3BwWzBdICogODsKPj4gKwlpbnQgdGlsZXM7Cj4+ICsJdTMyIHcsIGgsIGhl
aWdodCwgdGlsZV9zeiwgYWZiY19zaXplOwo+PiArCWludCByZXN1bHQgPSAwOwo+PiArCj4+ICsJ
aWYgKGkpIHsKPj4gKwkJRFJNX0RFQlVHX0tNUygiQUZCQyBzdXBwb3J0ZWQgb25seSBmb3IgcGxh
bmUgMFxuIik7Cj4+ICsKPj4gKwkJcmV0dXJuIDE7Cj4+ICsJfQo+PiArCj4+ICsJLyogZ2V0IHRp
bGUgdy9oICovCj4+ICsJaWYgKCFkcm1fYWZiY19nZXRfc3VwZXJibGtfd2goci0+bW9kaWZpZXJb
MF0sICZ3LCAmaCkpCj4+ICsJCXJldHVybiAxOwo+PiArCj4+ICsJLyogcGl0Y2ggbXVzdCBiZSBk
aXZpc2libGUgYnkgdGlsZSB3aWR0aCAqLwo+PiArCWlmIChyLT5waXRjaGVzWzBdICUgdykgewo+
PiArCQlEUk1fREVCVUdfS01TKCJJbnZhbGlkIHBpdGNoIGZvciBwbGFuZSAlZFxuIiwgaSk7Cj4+
ICsKPj4gKwkJcmV0dXJuIDE7Cj4+ICsJfQo+PiArCj4+ICsJb2JqID0gZHJtX2dlbV9vYmplY3Rf
bG9va3VwKGZpbGVfcHJpdiwgci0+aGFuZGxlc1swXSk7Cj4gCj4gSSB0aGluayB0aGlzIGlzIGEg
Yml0IHVnbHkgLi4uIEknZCBzcGxpdCB0aGlzIGludG8gYSBuZXcKPiBmcmFtZWJ1ZmZlcl9jaGVj
a19wb3N0KCkgZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGZiX2NyZWF0ZSwgYXQgdGhh
dAo+IHBvaW50IHlvdSBkbyBoYXZlIHRoZSBvYmplY3RzIGFscmVhZHkgbG9va2VkIHVwLgo+IAo+
IEFsc28gSSBzdWdnZXN0ZWQgdGhhdCB0aGlzIGNvdWxkIGJlIGRvbmUgYXMgYSBoZWxwZXIgaW1w
bGVtZW50YXRpb24gZm9yCj4gZmJfY3JlYXRlLCB3cmFwcGluZyBpdCBhcm91bmQgdGhlIGRlZmF1
bHQgZ2VtIGltcGxlbWVudGF0aW9uLiBUaGF0IHdheSB5b3UKPiBjb3VsZCBrZWVwIGFsbCB0aGUg
YWZiYyBzdHVmZiBpbiBoZWxwZXJzIGVudGlyZWx5IChidXQgZHJpdmVycyBjb3VsZCBzY3Jldwo+
IHRoaW5ncyB1cCwgc28gdGhlcmUncyBhIHRyYWRlb2ZmKS4KPiAKPiBXaGF0J3MgZGVmaW5pdGVs
eSBub3Qgb2sgaXMgY2FsbGluZyBkcm1fZ2VtX29iamVjdF9sb29rdXAgdW5jb25kaXRpb25hbGx5
Cj4gZnJvbSBjb3JlIGNvZGUgaGVyZS4gRm9yIGNvbnNpc3RlbmN5IEkgdGhpbmsgdGhlIGhlbHBl
ciBhcHByb2FjaCB3b3VsZCBiZQo+IGdvb2QsIHNpbmNlIGN1cnJlbnRseSB0aGUgc2l6ZSByZWxh
dGVkIGNoZWNrcyBhcmUgZG9uZSBpbgo+IGRybV9nZW1fZmJfY3JlYXRlKCkgLSBpLmUuIGluIHRo
ZSBoZWxwZXJzLCBub3QgaW4gY29yZS4gT3RvaCBoYXZpbmcgY2hlY2tzCj4gc3BsaXQgbGlrZSB0
aGlzIGlzIGFsc28gdWdseSwgc28gbWF5YmUgd2Ugc2hvdWxkIGhhdmUgYQo+IGZyYW1lYnVmZmVy
X2NoZWNrX3Bvc3QgZm9yIGV2ZXJ5b25lLCBhbmQgbW92ZSBhbGwgdGhlIHNpemUgY2hlY2tzIGlu
dG8KPiBjb3JlIChub3QganVzdCBmb3IgYWZiYykuCj4gLURhbmllbAoKQXMgZmFyIGFzIEkgdW5k
ZXJzdGFuZCB5b3Ugc2VlIG1vcmUgdGhhbiBvbmUgd2F5IGZvcndhcmQuCkNhbiB5b3UgcGxlYXNl
IGNvbW1lbnQgb24gdGhlIGJlbG93PyBBbmQgaW4gcGFydGljdWxhciwgY2FuIHlvdSBzYXkKaWYg
SSB1bmRlcnN0b29kIHlvdSBjb3JyZWN0bHk/IFNvLCBteSB1bmRlcnN0YW5kaW5nIG9mIHdoYXQg
eW91CnNhaWQgYWJvdmUgaXMgdG8gZWl0aGVyOgoKMSkgbW92ZSB0aGUgcGFydCBvZiB0aGUgY29k
ZSB3aGljaCByZXF1aXJlcyBvYmplY3RzIHRvIGJlIGxvb2tlZCB1cAp0byBhIG5ldyBmcmFtZWJ1
ZmZlcl9jaGVja19wb3N0KCkgY2FsbGVkIGFmdGVyIGZiX2NyZWF0ZSwgdGhhdCBpcwpmcm9tIGRy
bV9pbnRlcm5hbF9mcmFtZWJ1ZmZlcl9jcmVhdGUoKSBhZnRlcgoKZmIgPSBkZXYtPm1vZGVfY29u
ZmlnLmZ1bmNzLT5mYl9jcmVhdGUoZGV2LCBmaWxlX3ByaXYsIHIpOwoKYmVjYXVzZSBhdCB0aGF0
IHBvaW50IHRoZSBvYmplY3RzIGhhdmUgYWxyZWFkeSBiZWVuIGxvb2tlZCB1cC4KSG93IGRyaXZl
ci1zcGVjaWZpYyBjaGVja3MgY2FuIGJlIGRvbmUgaW4gdGhpcyBzY2hlbWU/CgpvcgoKMikgTW92
ZSB0aGUgYm9keSBvZiBhZmJjX2NoZWNrKCkgdG8gYSBoZWxwZXIgaW1wbGVtZW50YXRpb24gdG8g
YmUgdXNlZCBieQpkcml2ZXItc3BlY2lmaWMgZmJfY3JlYXRlIGltcGxlbWVudGF0aW9ucy4gU29y
cnkgZm9yIG15IGlnbm9yYW5jZSwgaXQgc2VlbXMKdGhhdCAiaGVscGVycyIgYW5kICJjb3JlIiBo
YXZlIHByZWNpc2UgbWVhbmluZyBoZXJlIGJ1dCBJIGRvbid0IHF1aXRlCnVuZGVyc3RhbmQgd2hh
dCBpcyB3aGF0IG9mIHdoYXQsIHNvIEkgYWxzbyBkb24ndCBxdWl0ZSB1bmRlcnN0YW5kIHdoZXJl
CnRvIG1vdmUgdGhlIGNvZGUgdG8gYW5kIHdoeSB0aGlzIHdvdWxkIG1lYW4ga2VlcGluZyBhbGwg
dGhlIGFmYmMgc3R1ZmYKZW50aXJlbHkgaW4gaGVscGVycyA6TyBDYW4geW91IGV4cGxhaW4/CgpE
aWQgeW91IG1lYW4gdGhhdCBhbGwgdGhlIGNoZWNraW5nIGNvZGUgaXMgY2FsbGVkIGJ5IHNwZWNp
ZmljIGRyaXZlcnMKb24gYW4gb3B0LWluIGJhc2lzPyBJIHRob3VnaHQgeW91IHdlcmUgbm90IGlu
IGZhdm9yIG9mIGRyaXZlcnMgb3B0aW5nLWluLAphcyBzb21lIG9mIHRoZW0gbWlnaHQgb3B0LWlu
IHdoaWxlIHNvbWUgb3RoZXJzIG9wdC1vdXQsIG9yIHVzZSBkaWZmZXJlbnQKc3Vic2V0cyBvZiBh
dmFpbGFibGUgY2hlY2tzLgoKb3IKCjMpIGUuZy4gcm9ja2NoaXAgZG9lcyBub3QgdXNlIGRybV9n
ZW1fZmJfY3JlYXRlKCkuIEl0IHVzZXMKZHJtX2dlbV9mYl9jcmVhdGVfaGFuZGxlKCksIHRob3Vn
aC4gQW55d2F5LCB0aGUgdGhpcmQgd2F5IGZvcndhcmQKaXMgdG8gaGF2ZSBmcmFtZWJ1ZmZlcl9j
aGVja19wb3N0KCkgYXMgaW4gMSkgYW5kIG1vdmUgdGhlIHNpemUgY2hlY2tzCnRvICJjb3JlIiAt
IHdoaWNoIEkgZG9uJ3QgcXVpdGUgdW5kZXJzdGFuZCB3aGVyZSBleGFjdGx5IGl0IGlzLgpXaGF0
IGlzIHRoZSBkaWZmZXJlbmNlIHRvIDEpPwoKPiAKPj4gKwlpZiAoIW9iaikgewo+PiArCQlEUk1f
REVCVUdfS01TKCJGYWlsZWQgdG8gbG9va3VwIEdFTSBvYmplY3RcbiIpOwo+PiArCj4+ICsJCXJl
dHVybiAxOwo+PiArCX0KPj4gKwo+PiArCS8qIGVzdGltYXRlIGhlaWdodCBiYXNlZCBvbiB0aWxl
IHNpemUgYW5kIGhlaWdodCBmcm9tIHVzZXJzcGFjZSAqLwo+PiArCWhlaWdodCA9IERJVl9ST1VO
RF9VUChyLT5oZWlnaHQsIGgpICogaDsKPj4gKwo+PiArCXRpbGVzID0gKHItPnBpdGNoZXNbMF0g
LyB3KSAqIChoZWlnaHQgLyBoKTsKPj4gKwlhZmJjX3NpemUgPSBBTElHTih0aWxlcyAqIEFGQkNf
SEVBREVSX1NJWkUsIEFGQkNfU1VQRVJCTEtfQUxJR05NRU5UKTsKClRoaXMgY29tcHV0YXRpb24g
aXMgZm9yIG1hbGlkcC9yb2NrY2hpcCwgYnV0IGZvciBrb21lZGEgdGhlIGFsaWdubWVudAppcyBk
aWZmZXJlbnQuIFNvIGl0IHNlZW1zIGl0IGlzIGRyaXZlci1zcGVjaWZpYy4gSWYgc28sIHdlIG5l
ZWQKc29tZSB3YXkgZm9yIHNwZWNpZmljIGRyaXZlcnMgdG8gcHJvdmlkZSB0aGVpciBzcGVjaWZp
YyBjaGVja3MKYW5kL29yIHNwZWNpZmljIGRhdGEgZm9yIGdlbmVyaWMgY2hlY2tpbmcgY29kZSB0
byB1c2UuCgpUaGFua3MKCkFuZHJ6ZWoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZHJpLWRldmVs
