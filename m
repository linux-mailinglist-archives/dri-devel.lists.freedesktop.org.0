Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BCB60E38C1
	for <lists+dri-devel@lfdr.de>; Thu, 24 Oct 2019 18:46:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0C1896E51B;
	Thu, 24 Oct 2019 16:46:52 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x343.google.com (mail-wm1-x343.google.com
 [IPv6:2a00:1450:4864:20::343])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 728D66E507
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 16:46:40 +0000 (UTC)
Received: by mail-wm1-x343.google.com with SMTP id g24so3594440wmh.5
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 09:46:40 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=Cu4ZaTXoU6RcuFW1hTOweUU/CS+vekzJPEEygzQ/x1w=;
 b=NBsdVXwJyX/ybimr3eFKduHmUQHuqyNQrCG3IqAcEgJ84dUpgh+f3PpsMtaUNR831O
 WeQq/Nme/vjTIJ049nwYCYzgoCxvw46JlbbIgQKMgOrwtmJNRWwO5i/e860TMTJPUD+m
 W3BhAjEFagdvVtjlJxMjEOT1W8VTx0Q7Spj3XuCFK0sUUrQ5O4PGT0XBbwjSYMt3XX6d
 +degL4QVQ2nzsAJpCR8AcROvuvZYhsjxmfmFiYxe1GeYpPlVWCOBC7yK4gGlDJVp1ywr
 Kb1PnjIDx/P5kXrYrxWf7gyh2NE9VcCLu8xL1jqVWH6YvpEqYG7vfsysaMbZjn/d+559
 78Rg==
X-Gm-Message-State: APjAAAUMj+gNBhDbKZJBEMSr9W6MkKEBYHgI3J0dLuMFLLPGoX4yNMgA
 FDikOriU8IK8SQWQiqlqnIc=
X-Google-Smtp-Source: APXvYqzYfyl8FGtJ4trA5xN0bWqUzXTku3LpNYYPzDs5/TORC9PUXuZhVK55Zn6eufQ3hXzfzIN9qQ==
X-Received: by 2002:a1c:f011:: with SMTP id a17mr5597342wmb.18.1571935598210; 
 Thu, 24 Oct 2019 09:46:38 -0700 (PDT)
Received: from localhost (p2E5BE2CE.dip0.t-ipconnect.de. [46.91.226.206])
 by smtp.gmail.com with ESMTPSA id s14sm3185170wmh.18.2019.10.24.09.46.36
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 24 Oct 2019 09:46:37 -0700 (PDT)
From: Thierry Reding <thierry.reding@gmail.com>
To: Thierry Reding <thierry.reding@gmail.com>
Subject: [PATCH 27/32] drm/tegra: sor: Unify clock setup for eDP, HDMI and DP
Date: Thu, 24 Oct 2019 18:45:29 +0200
Message-Id: <20191024164534.132764-28-thierry.reding@gmail.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191024164534.132764-1-thierry.reding@gmail.com>
References: <20191024164534.132764-1-thierry.reding@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=Cu4ZaTXoU6RcuFW1hTOweUU/CS+vekzJPEEygzQ/x1w=;
 b=E3hc2PdcoligcilS1Kw1X8ZfxWgKwt3Sn8FUwTdkYAO/B+ELfzi2jRgQ3/FVdjbPgC
 q6DfwU3DGGjZqeqZU+802JCciaFCVi4RZsJLiLc/7G9IiwgI+z+XEda2H+Alw6ku6B3i
 yzkuFXC3Ql72K+rbQiA+7QnCVq97du+gGp1NqUJA6P1DK2Ul9JRZrAaOYcNwBvow6W1f
 D+BUvTTxysGS/laJQaNnE/J2qaDJ2fPBsR4P/4oIN+E4xa2Al2lt2xqTzDD2YyCGoyN0
 V252QhgP6DpfTSsY8lj9UYqwcX7cnC97/Jc/LTTILTBAE1Pn0iFmZrt2+lrRFM64Uvau
 eEVQ==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-tegra@vger.kernel.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVGhpZXJyeSBSZWRpbmcgPHRyZWRpbmdAbnZpZGlhLmNvbT4KCldpdGggdGhlIGNsb2Nr
cyBtb2RlbGxlZCBjb25zaXN0ZW50bHkgYWNyb3NzIFNvQyBnZW5lcmF0aW9ucywgdGhlIGNsb2Nr
CnNldHVwIGZvciBlRFAsIEhETUkgYW5kIERQIGNhbiBub3cgYmUgdW5pZmllZC4KClNpZ25lZC1v
ZmYtYnk6IFRoaWVycnkgUmVkaW5nIDx0cmVkaW5nQG52aWRpYS5jb20+Ci0tLQogZHJpdmVycy9n
cHUvZHJtL3RlZ3JhL3Nvci5jIHwgOTIgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKyst
LS0tLQogMSBmaWxlIGNoYW5nZWQsIDgxIGluc2VydGlvbnMoKyksIDExIGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9zb3IuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS90ZWdyYS9zb3IuYwppbmRleCBmZGJkNzZlYzFjZjcuLmEyNDViYmJkNjM4YSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL3Nvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90ZWdy
YS9zb3IuYwpAQCAtNTI3LDYgKzUyNywxNCBAQCBzdGF0aWMgY29uc3QgY2hhciAqIGNvbnN0IHRl
Z3JhX2Nsa19zb3JfcGFkX3BhcmVudHNbMl1bMl0gPSB7CiAJeyAicGxsX2QyX291dDAiLCAicGxs
X2RwIiB9LAogfTsKIAorLyoKKyAqIEltcGxlbWVudGluZyAtPnNldF9wYXJlbnQoKSBoZXJlIGlz
bid0IHJlYWxseSByZXF1aXJlZCBiZWNhdXNlIHRoZSBwYXJlbnQKKyAqIHdpbGwgYmUgZXhwbGlj
aXRseSBzZWxlY3RlZCBpbiB0aGUgZHJpdmVyIGNvZGUgdmlhIHRoZSBEUF9DTEtfU0VMIG11eCBp
bgorICogdGhlIFNPUl9DTEtfQ05UUkwgcmVnaXN0ZXIuIFRoaXMgaXMgcHJpbWFyaWx5IGZvciBj
b21wYXRpYmlsaXR5IHdpdGggdGhlCisgKiBUZWdyYTE4NiBhbmQgbGF0ZXIgU29DIGdlbmVyYXRp
b25zIHdoZXJlIHRoZSBCUE1QIGltcGxlbWVudHMgdGhpcyBjbG9jaworICogYW5kIGRvZXNuJ3Qg
ZXhwb3NlIHRoZSBtdXggdmlhIHRoZSBjb21tb24gY2xvY2sgZnJhbWV3b3JrLgorICovCisKIHN0
YXRpYyBpbnQgdGVncmFfY2xrX3Nvcl9wYWRfc2V0X3BhcmVudChzdHJ1Y3QgY2xrX2h3ICpodywg
dTggaW5kZXgpCiB7CiAJc3RydWN0IHRlZ3JhX2Nsa19zb3JfcGFkICpwYWQgPSB0b19wYWQoaHcp
OwpAQCAtMTk4NywxMCArMTk5NSwzNiBAQCBzdGF0aWMgdm9pZCB0ZWdyYV9zb3JfZWRwX2VuYWJs
ZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCiAJdGVncmFfc29yX3dyaXRlbChzb3IsIDB4
MDAwMDAwMDAsIFNPUl9YQkFSX1BPTCk7CiAJdGVncmFfc29yX3dyaXRlbChzb3IsIHZhbHVlLCBT
T1JfWEJBUl9DVFJMKTsKIAotCS8qIHN3aXRjaCB0byBEUCBwYXJlbnQgY2xvY2sgKi8KLQllcnIg
PSB0ZWdyYV9zb3Jfc2V0X3BhcmVudF9jbG9jayhzb3IsIHNvci0+Y2xrX2RwKTsKLQlpZiAoZXJy
IDwgMCkKLQkJZGV2X2Vycihzb3ItPmRldiwgImZhaWxlZCB0byBzZXQgcGFyZW50IGNsb2NrOiAl
ZFxuIiwgZXJyKTsKKwkvKgorCSAqIFN3aXRjaCB0aGUgcGFkIGNsb2NrIHRvIHRoZSBEUCBjbG9j
ay4gTm90ZSB0aGF0IHdlIGNhbm5vdCBhY3R1YWxseQorCSAqIGRvIHRoaXMgYmVjYXVzZSBUZWdy
YTE4NiBhbmQgbGF0ZXIgZG9uJ3Qgc3VwcG9ydCBjbGtfc2V0X3BhcmVudCgpCisJICogb24gdGhl
IHNvclhfcGFkX2Nsa291dCBjbG9ja3MuIFdlIGFscmVhZHkgZG8gdGhlIGVxdWl2YWxlbnQgYWJv
dmUKKwkgKiB1c2luZyB0aGUgRFBfQ0xLX1NFTCBtdXggb2YgdGhlIFNPUl9DTEtfQ05UUkwgcmVn
aXN0ZXIuCisJICovCisjaWYgMAorCWVyciA9IGNsa19zZXRfcGFyZW50KHNvci0+Y2xrX3BhZCwg
c29yLT5jbGtfZHApOworCWlmIChlcnIgPCAwKSB7CisJCWRldl9lcnIoc29yLT5kZXYsICJmYWls
ZWQgdG8gc2VsZWN0IHBhZCBwYXJlbnQgY2xvY2s6ICVkXG4iLAorCQkJZXJyKTsKKwkJcmV0dXJu
OworCX0KKyNlbmRpZgorCisJLyogc3dpdGNoIHRoZSBTT1IgY2xvY2sgdG8gdGhlIHBhZCBjbG9j
ayAqLworCWVyciA9IHRlZ3JhX3Nvcl9zZXRfcGFyZW50X2Nsb2NrKHNvciwgc29yLT5jbGtfcGFk
KTsKKwlpZiAoZXJyIDwgMCkgeworCQlkZXZfZXJyKHNvci0+ZGV2LCAiZmFpbGVkIHRvIHNlbGVj
dCBTT1IgcGFyZW50IGNsb2NrOiAlZFxuIiwKKwkJCWVycik7CisJCXJldHVybjsKKwl9CisKKwkv
KiBzd2l0Y2ggdGhlIG91dHB1dCBjbG9jayB0byB0aGUgcGFyZW50IHBpeGVsIGNsb2NrICovCisJ
ZXJyID0gY2xrX3NldF9wYXJlbnQoc29yLT5jbGssIHNvci0+Y2xrX3BhcmVudCk7CisJaWYgKGVy
ciA8IDApIHsKKwkJZGV2X2Vycihzb3ItPmRldiwgImZhaWxlZCB0byBzZWxlY3Qgb3V0cHV0IHBh
cmVudCBjbG9jazogJWRcbiIsCisJCQllcnIpOworCQlyZXR1cm47CisJfQogCiAJLyogdXNlIERQ
LUEgcHJvdG9jb2wgKi8KIAl2YWx1ZSA9IHRlZ3JhX3Nvcl9yZWFkbChzb3IsIFNPUl9TVEFURTEp
OwpAQCAtMjY2MSwxNiArMjY5NSwzNCBAQCBzdGF0aWMgdm9pZCB0ZWdyYV9zb3JfaGRtaV9lbmFi
bGUoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQogCXRlZ3JhX3Nvcl93cml0ZWwoc29yLCAw
eDAwMDAwMDAwLCBTT1JfWEJBUl9QT0wpOwogCXRlZ3JhX3Nvcl93cml0ZWwoc29yLCB2YWx1ZSwg
U09SX1hCQVJfQ1RSTCk7CiAKLQkvKiBzd2l0Y2ggdG8gcGFyZW50IGNsb2NrICovCi0JZXJyID0g
Y2xrX3NldF9wYXJlbnQoc29yLT5jbGssIHNvci0+Y2xrX3BhcmVudCk7CisJLyoKKwkgKiBTd2l0
Y2ggdGhlIHBhZCBjbG9jayB0byB0aGUgRFAgY2xvY2suIE5vdGUgdGhhdCB3ZSBjYW5ub3QgYWN0
dWFsbHkKKwkgKiBkbyB0aGlzIGJlY2F1c2UgVGVncmExODYgYW5kIGxhdGVyIGRvbid0IHN1cHBv
cnQgY2xrX3NldF9wYXJlbnQoKQorCSAqIG9uIHRoZSBzb3JYX3BhZF9jbGtvdXQgY2xvY2tzLiBX
ZSBhbHJlYWR5IGRvIHRoZSBlcXVpdmFsZW50IGFib3ZlCisJICogdXNpbmcgdGhlIERQX0NMS19T
RUwgbXV4IG9mIHRoZSBTT1JfQ0xLX0NOVFJMIHJlZ2lzdGVyLgorCSAqLworI2lmIDAKKwllcnIg
PSBjbGtfc2V0X3BhcmVudChzb3ItPmNsa19wYWQsIHNvci0+Y2xrX2RwKTsKIAlpZiAoZXJyIDwg
MCkgewotCQlkZXZfZXJyKHNvci0+ZGV2LCAiZmFpbGVkIHRvIHNldCBwYXJlbnQgY2xvY2s6ICVk
XG4iLCBlcnIpOworCQlkZXZfZXJyKHNvci0+ZGV2LCAiZmFpbGVkIHRvIHNlbGVjdCBwYWQgcGFy
ZW50IGNsb2NrOiAlZFxuIiwKKwkJCWVycik7CiAJCXJldHVybjsKIAl9CisjZW5kaWYKIAorCS8q
IHN3aXRjaCB0aGUgU09SIGNsb2NrIHRvIHRoZSBwYWQgY2xvY2sgKi8KIAllcnIgPSB0ZWdyYV9z
b3Jfc2V0X3BhcmVudF9jbG9jayhzb3IsIHNvci0+Y2xrX3BhZCk7CiAJaWYgKGVyciA8IDApIHsK
LQkJZGV2X2Vycihzb3ItPmRldiwgImZhaWxlZCB0byBzZXQgcGFkIGNsb2NrOiAlZFxuIiwgZXJy
KTsKKwkJZGV2X2Vycihzb3ItPmRldiwgImZhaWxlZCB0byBzZWxlY3QgU09SIHBhcmVudCBjbG9j
azogJWRcbiIsCisJCQllcnIpOworCQlyZXR1cm47CisJfQorCisJLyogc3dpdGNoIHRoZSBvdXRw
dXQgY2xvY2sgdG8gdGhlIHBhcmVudCBwaXhlbCBjbG9jayAqLworCWVyciA9IGNsa19zZXRfcGFy
ZW50KHNvci0+Y2xrLCBzb3ItPmNsa19wYXJlbnQpOworCWlmIChlcnIgPCAwKSB7CisJCWRldl9l
cnIoc29yLT5kZXYsICJmYWlsZWQgdG8gc2VsZWN0IG91dHB1dCBwYXJlbnQgY2xvY2s6ICVkXG4i
LAorCQkJZXJyKTsKIAkJcmV0dXJuOwogCX0KIApAQCAtMzA2MSwxNiArMzExMywzNCBAQCBzdGF0
aWMgdm9pZCB0ZWdyYV9zb3JfZHBfZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikK
IAl0ZWdyYV9zb3Jfd3JpdGVsKHNvciwgMHgwMDAwMDAwMCwgU09SX1hCQVJfUE9MKTsKIAl0ZWdy
YV9zb3Jfd3JpdGVsKHNvciwgdmFsdWUsIFNPUl9YQkFSX0NUUkwpOwogCi0JLyogc3dpdGNoIHRv
IERQIHBhcmVudCBjbG9jayAqLworCS8qCisJICogU3dpdGNoIHRoZSBwYWQgY2xvY2sgdG8gdGhl
IERQIGNsb2NrLiBOb3RlIHRoYXQgd2UgY2Fubm90IGFjdHVhbGx5CisJICogZG8gdGhpcyBiZWNh
dXNlIFRlZ3JhMTg2IGFuZCBsYXRlciBkb24ndCBzdXBwb3J0IGNsa19zZXRfcGFyZW50KCkKKwkg
KiBvbiB0aGUgc29yWF9wYWRfY2xrb3V0IGNsb2Nrcy4gV2UgYWxyZWFkeSBkbyB0aGUgZXF1aXZh
bGVudCBhYm92ZQorCSAqIHVzaW5nIHRoZSBEUF9DTEtfU0VMIG11eCBvZiB0aGUgU09SX0NMS19D
TlRSTCByZWdpc3Rlci4KKwkgKi8KKyNpZiAwCisJZXJyID0gY2xrX3NldF9wYXJlbnQoc29yLT5j
bGtfcGFkLCBzb3ItPmNsa19wYXJlbnQpOworCWlmIChlcnIgPCAwKSB7CisJCWRldl9lcnIoc29y
LT5kZXYsICJmYWlsZWQgdG8gc2VsZWN0IHBhZCBwYXJlbnQgY2xvY2s6ICVkXG4iLAorCQkJZXJy
KTsKKwkJcmV0dXJuOworCX0KKyNlbmRpZgorCisJLyogc3dpdGNoIHRoZSBTT1IgY2xvY2sgdG8g
dGhlIHBhZCBjbG9jayAqLwogCWVyciA9IHRlZ3JhX3Nvcl9zZXRfcGFyZW50X2Nsb2NrKHNvciwg
c29yLT5jbGtfcGFkKTsKIAlpZiAoZXJyIDwgMCkgewotCQlkZXZfZXJyKHNvci0+ZGV2LCAiZmFp
bGVkIHRvIHN3aXRjaCB0byBwYWQgY2xvY2s6ICVkXG4iLCBlcnIpOworCQlkZXZfZXJyKHNvci0+
ZGV2LCAiZmFpbGVkIHRvIHNlbGVjdCBTT1IgcGFyZW50IGNsb2NrOiAlZFxuIiwKKwkJCWVycik7
CiAJCXJldHVybjsKIAl9CiAKKwkvKiBzd2l0Y2ggdGhlIG91dHB1dCBjbG9jayB0byB0aGUgcGFy
ZW50IHBpeGVsIGNsb2NrICovCiAJZXJyID0gY2xrX3NldF9wYXJlbnQoc29yLT5jbGssIHNvci0+
Y2xrX3BhcmVudCk7CiAJaWYgKGVyciA8IDApIHsKLQkJZGV2X2Vycihzb3ItPmRldiwgImZhaWxl
ZCB0byBzd2l0Y2ggdG8gcGFyZW50IGNsb2NrOiAlZFxuIiwgZXJyKTsKKwkJZGV2X2Vycihzb3It
PmRldiwgImZhaWxlZCB0byBzZWxlY3Qgb3V0cHV0IHBhcmVudCBjbG9jazogJWRcbiIsCisJCQll
cnIpOwogCQlyZXR1cm47CiAJfQogCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
