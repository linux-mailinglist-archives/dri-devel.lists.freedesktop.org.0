Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 57DD11E4C6
	for <lists+dri-devel@lfdr.de>; Wed, 15 May 2019 00:19:47 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 310A8893A7;
	Tue, 14 May 2019 22:19:45 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x64a.google.com (mail-pl1-x64a.google.com
 [IPv6:2607:f8b0:4864:20::64a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 30B64893A4
 for <dri-devel@lists.freedesktop.org>; Tue, 14 May 2019 22:19:44 +0000 (UTC)
Received: by mail-pl1-x64a.google.com with SMTP id g11so442574plb.3
 for <dri-devel@lists.freedesktop.org>; Tue, 14 May 2019 15:19:44 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=Lws/EEgAna63rQ3vCEL1Uuu3Iu+1ZPUf+T+yTIZZ48c=;
 b=tdl93SCXfWEaIbgN4sYmK/Wo+Ld37wIuBJcAEs/kgFO7doFg85zmhxDvDKxVS++cuz
 c3nrFHHRAecGf9xiChU65SuXjxZpPTJz9t18yJKt2FUSPQZ0w3TDH4Tv1OfoC+H1RYHK
 wYfBUXPAxhyyArssr1kT5TGyo4gpp9ioCGMTUCy2//QdP8Go3QvcDDwqbnHCPr/eOt8C
 iliG30LSoS8GN9iLObFuWlUB3Up3xhtFaSKEDETa7clsWpOVct//tiRiSxVEdQiIXYkM
 hUn802Q0lllT6G5jNJwju+gTCUmcdzB0jgaNRgmXqL1WOaKJ3dg4zaVTddGiosTRAcah
 PMyw==
X-Gm-Message-State: APjAAAVEiosDVNX7n7mWu7YGDB1jBGPhW24QzM8BKcX7gTfJt9yqL7Ji
 wVT7EKCZChuJqr+6bZaNjygyO9B0lAgeC0AgqpeHaA==
X-Google-Smtp-Source: APXvYqyZO5hIVWx6sj5d5P+JfXAMjq8I7SEzOnNldWvrtI+QS/XQfLFxsuITIB0YkKXfskRKbkqe8bGObCnzw53RKnA6Hg==
X-Received: by 2002:a63:1a42:: with SMTP id a2mr39736396pgm.358.1557872383130; 
 Tue, 14 May 2019 15:19:43 -0700 (PDT)
Date: Tue, 14 May 2019 15:17:10 -0700
In-Reply-To: <20190514221711.248228-1-brendanhiggins@google.com>
Message-Id: <20190514221711.248228-18-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190514221711.248228-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.21.0.1020.gf2820cf01a-goog
Subject: [PATCH v4 17/18] kernel/sysctl-test: Add null pointer test for
 sysctl.c:proc_dointvec()
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=Lws/EEgAna63rQ3vCEL1Uuu3Iu+1ZPUf+T+yTIZZ48c=;
 b=e/AVxKLY/BTIPy4M0b2OmdVg9I3Cjf+83tQc/8RUiKrxRYVCGqg3Zl0SrlluXiU/O/
 pwRWVuewqkQb+4jm3lDA+uWqqZl/5Qp2jsoqkSh7txRje8sBKgc2T24cBCYyPIDbL3Td
 2vOT6mtX7FAkvYixgfpQMuOXbD+WsLVTxJRWRjPcIHwh7xhhVzaUINCrENO+6zqHBIXX
 1IbAD9CKmDlwv5PLKIqbnItGhE3IuhWhKpDPTriVbhNQOEnRRWM36VOw1YpDb6jyrZ4J
 jLuqmwKAU9M8W3HAZbA4spHc+Ryxcow/wAF3N76tVz5jJtszzJCzEVPYaTO2Oq9+4bCM
 GX3w==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com,
 Iurii Zaikin <yzaikin@google.com>, jdike@addtoit.com, dan.carpenter@oracle.com,
 devicetree@vger.kernel.org, linux-kbuild@vger.kernel.org, Tim.Bird@sony.com,
 linux-um@lists.infradead.org, rostedt@goodmis.org, julia.lawall@lip6.fr,
 kunit-dev@googlegroups.com, richard@nod.at, rdunlap@infradead.org,
 linux-kernel@vger.kernel.org, mpe@ellerman.id.au,
 linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogSXVyaWkgWmFpa2luIDx5emFpa2luQGdvb2dsZS5jb20+CgpLVW5pdCB0ZXN0cyBmb3Ig
aW5pdGlhbGl6ZWQgZGF0YSBiZWhhdmlvciBvZiBwcm9jX2RvaW50dmVjIHRoYXQgaXMKZXhwbGlj
aXRseSBjaGVja2VkIGluIHRoZSBjb2RlLiBJbmNsdWRlcyBiYXNpYyBwYXJzaW5nIHRlc3RzIGlu
Y2x1ZGluZwppbnQgbWluL21heCBvdmVyZmxvdy4KClNpZ25lZC1vZmYtYnk6IEl1cmlpIFphaWtp
biA8eXphaWtpbkBnb29nbGUuY29tPgpTaWduZWQtb2ZmLWJ5OiBCcmVuZGFuIEhpZ2dpbnMgPGJy
ZW5kYW5oaWdnaW5zQGdvb2dsZS5jb20+ClJldmlld2VkLWJ5OiBHcmVnIEtyb2FoLUhhcnRtYW4g
PGdyZWdraEBsaW51eGZvdW5kYXRpb24ub3JnPgpSZXZpZXdlZC1ieTogTG9nYW4gR3VudGhvcnBl
IDxsb2dhbmdAZGVsdGF0ZWUuY29tPgotLS0KIGtlcm5lbC9NYWtlZmlsZSAgICAgIHwgICAyICsK
IGtlcm5lbC9zeXNjdGwtdGVzdC5jIHwgMjkzICsrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysKIGxpYi9LY29uZmlnLmRlYnVnICAgIHwgICA2ICsKIDMgZmlsZXMgY2hh
bmdlZCwgMzAxIGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEwMDY0NCBrZXJuZWwvc3lzY3Rs
LXRlc3QuYwoKZGlmZiAtLWdpdCBhL2tlcm5lbC9NYWtlZmlsZSBiL2tlcm5lbC9NYWtlZmlsZQpp
bmRleCA2YzU3ZTc4ODE3ZGFkLi5jODFhODk3NmI2YTRiIDEwMDY0NAotLS0gYS9rZXJuZWwvTWFr
ZWZpbGUKKysrIGIva2VybmVsL01ha2VmaWxlCkBAIC0xMTIsNiArMTEyLDggQEAgb2JqLSQoQ09O
RklHX0hBU19JT01FTSkgKz0gaW9tZW0ubwogb2JqLSQoQ09ORklHX1pPTkVfREVWSUNFKSArPSBt
ZW1yZW1hcC5vCiBvYmotJChDT05GSUdfUlNFUSkgKz0gcnNlcS5vCiAKK29iai0kKENPTkZJR19T
WVNDVExfS1VOSVRfVEVTVCkgKz0gc3lzY3RsLXRlc3QubworCiBvYmotJChDT05GSUdfR0NDX1BM
VUdJTl9TVEFDS0xFQUspICs9IHN0YWNrbGVhay5vCiBLQVNBTl9TQU5JVElaRV9zdGFja2xlYWsu
byA6PSBuCiBLQ09WX0lOU1RSVU1FTlRfc3RhY2tsZWFrLm8gOj0gbgpkaWZmIC0tZ2l0IGEva2Vy
bmVsL3N5c2N0bC10ZXN0LmMgYi9rZXJuZWwvc3lzY3RsLXRlc3QuYwpuZXcgZmlsZSBtb2RlIDEw
MDY0NAppbmRleCAwMDAwMDAwMDAwMDAwLi5mZTBmMmJhZTY2MDg1Ci0tLSAvZGV2L251bGwKKysr
IGIva2VybmVsL3N5c2N0bC10ZXN0LmMKQEAgLTAsMCArMSwyOTMgQEAKKy8vIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBHUEwtMi4wCisvKgorICogS1VuaXQgdGVzdCBvZiBwcm9jIHN5c2N0bC4K
KyAqLworCisjaW5jbHVkZSA8a3VuaXQvdGVzdC5oPgorI2luY2x1ZGUgPGxpbnV4L3ByaW50ay5o
PgorI2luY2x1ZGUgPGxpbnV4L3N5c2N0bC5oPgorI2luY2x1ZGUgPGxpbnV4L3VhY2Nlc3MuaD4K
Kworc3RhdGljIGludCBpX3plcm87CitzdGF0aWMgaW50IGlfb25lX2h1bmRyZWQgPSAxMDA7CisK
K3N0cnVjdCB0ZXN0X3N5c2N0bF9kYXRhIHsKKwlpbnQgaW50XzAwMDE7CisJaW50IGludF8wMDAy
OworCWludCBpbnRfMDAwM1s0XTsKKworCXVuc2lnbmVkIGludCB1aW50XzAwMDE7CisKKwljaGFy
IHN0cmluZ18wMDAxWzY1XTsKK307CisKK3N0YXRpYyBzdHJ1Y3QgdGVzdF9zeXNjdGxfZGF0YSB0
ZXN0X2RhdGEgPSB7CisJLmludF8wMDAxID0gNjAsCisJLmludF8wMDAyID0gMSwKKworCS5pbnRf
MDAwM1swXSA9IDAsCisJLmludF8wMDAzWzFdID0gMSwKKwkuaW50XzAwMDNbMl0gPSAyLAorCS5p
bnRfMDAwM1szXSA9IDMsCisKKwkudWludF8wMDAxID0gMzE0LAorCisJLnN0cmluZ18wMDAxID0g
Iihub25lKSIsCit9OworCitzdGF0aWMgdm9pZCBzeXNjdGxfdGVzdF9kb2ludHZlY19udWxsX3Ri
bF9kYXRhKHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3QgY3RsX3RhYmxlIHRhYmxlID0g
eworCQkucHJvY25hbWUgPSAiZm9vIiwKKwkJLmRhdGEJCT0gTlVMTCwKKwkJLm1heGxlbgkJPSBz
aXplb2YoaW50KSwKKwkJLm1vZGUJCT0gMDY0NCwKKwkJLnByb2NfaGFuZGxlcgk9IHByb2NfZG9p
bnR2ZWMsCisJCS5leHRyYTEJCT0gJmlfemVybywKKwkJLmV4dHJhMiAgICAgICAgID0gJmlfb25l
X2h1bmRyZWQsCisJfTsKKwl2b2lkICAqYnVmZmVyID0ga3VuaXRfa3phbGxvYyh0ZXN0LCBzaXpl
b2YoaW50KSwgR0ZQX1VTRVIpOworCXNpemVfdCBsZW47CisJbG9mZl90IHBvczsKKworCWxlbiA9
IDEyMzQ7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIDAsIHByb2NfZG9pbnR2ZWMoJnRhYmxlLCAw
LCBidWZmZXIsICZsZW4sICZwb3MpKTsKKwlLVU5JVF9FWFBFQ1RfRVEodGVzdCwgMCwgbGVuKTsK
KwlsZW4gPSAxMjM0OworCUtVTklUX0VYUEVDVF9FUSh0ZXN0LCAwLCBwcm9jX2RvaW50dmVjKCZ0
YWJsZSwgMSwgYnVmZmVyLCAmbGVuLCAmcG9zKSk7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIDAs
IGxlbik7Cit9CisKK3N0YXRpYyB2b2lkIHN5c2N0bF90ZXN0X2RvaW50dmVjX3RhYmxlX21heGxl
bl91bnNldChzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0IGN0bF90YWJsZSB0YWJsZSA9
IHsKKwkJLnByb2NuYW1lID0gImZvbyIsCisJCS5kYXRhCQk9ICZ0ZXN0X2RhdGEuaW50XzAwMDEs
CisJCS5tYXhsZW4JCT0gMCwKKwkJLm1vZGUJCT0gMDY0NCwKKwkJLnByb2NfaGFuZGxlcgk9IHBy
b2NfZG9pbnR2ZWMsCisJCS5leHRyYTEJCT0gJmlfemVybywKKwkJLmV4dHJhMiAgICAgICAgID0g
Jmlfb25lX2h1bmRyZWQsCisJfTsKKwl2b2lkICAqYnVmZmVyID0ga3VuaXRfa3phbGxvYyh0ZXN0
LCBzaXplb2YoaW50KSwgR0ZQX1VTRVIpOworCXNpemVfdCBsZW47CisJbG9mZl90IHBvczsKKwor
CWxlbiA9IDEyMzQ7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIDAsIHByb2NfZG9pbnR2ZWMoJnRh
YmxlLCAwLCBidWZmZXIsICZsZW4sICZwb3MpKTsKKwlLVU5JVF9FWFBFQ1RfRVEodGVzdCwgMCwg
bGVuKTsKKwlsZW4gPSAxMjM0OworCUtVTklUX0VYUEVDVF9FUSh0ZXN0LCAwLCBwcm9jX2RvaW50
dmVjKCZ0YWJsZSwgMSwgYnVmZmVyLCAmbGVuLCAmcG9zKSk7CisJS1VOSVRfRVhQRUNUX0VRKHRl
c3QsIDAsIGxlbik7Cit9CisKK3N0YXRpYyB2b2lkIHN5c2N0bF90ZXN0X2RvaW50dmVjX3RhYmxl
X2xlbl9pc196ZXJvKHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3QgY3RsX3RhYmxlIHRh
YmxlID0geworCQkucHJvY25hbWUgPSAiZm9vIiwKKwkJLmRhdGEJCT0gJnRlc3RfZGF0YS5pbnRf
MDAwMSwKKwkJLm1heGxlbgkJPSBzaXplb2YoaW50KSwKKwkJLm1vZGUJCT0gMDY0NCwKKwkJLnBy
b2NfaGFuZGxlcgk9IHByb2NfZG9pbnR2ZWMsCisJCS5leHRyYTEJCT0gJmlfemVybywKKwkJLmV4
dHJhMiAgICAgICAgID0gJmlfb25lX2h1bmRyZWQsCisJfTsKKwl2b2lkICAqYnVmZmVyID0ga3Vu
aXRfa3phbGxvYyh0ZXN0LCBzaXplb2YoaW50KSwgR0ZQX1VTRVIpOworCXNpemVfdCBsZW47CisJ
bG9mZl90IHBvczsKKworCWxlbiA9IDA7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIDAsIHByb2Nf
ZG9pbnR2ZWMoJnRhYmxlLCAwLCBidWZmZXIsICZsZW4sICZwb3MpKTsKKwlLVU5JVF9FWFBFQ1Rf
RVEodGVzdCwgMCwgbGVuKTsKKwlLVU5JVF9FWFBFQ1RfRVEodGVzdCwgMCwgcHJvY19kb2ludHZl
YygmdGFibGUsIDEsIGJ1ZmZlciwgJmxlbiwgJnBvcykpOworCUtVTklUX0VYUEVDVF9FUSh0ZXN0
LCAwLCBsZW4pOworfQorCitzdGF0aWMgdm9pZCBzeXNjdGxfdGVzdF9kb2ludHZlY190YWJsZV9y
ZWFkX2J1dF9wb3NpdGlvbl9zZXQoc3RydWN0IGt1bml0ICp0ZXN0KQoreworCXN0cnVjdCBjdGxf
dGFibGUgdGFibGUgPSB7CisJCS5wcm9jbmFtZSA9ICJmb28iLAorCQkuZGF0YQkJPSAmdGVzdF9k
YXRhLmludF8wMDAxLAorCQkubWF4bGVuCQk9IHNpemVvZihpbnQpLAorCQkubW9kZQkJPSAwNjQ0
LAorCQkucHJvY19oYW5kbGVyCT0gcHJvY19kb2ludHZlYywKKwkJLmV4dHJhMQkJPSAmaV96ZXJv
LAorCQkuZXh0cmEyICAgICAgICAgPSAmaV9vbmVfaHVuZHJlZCwKKwl9OworCXZvaWQgICpidWZm
ZXIgPSBrdW5pdF9remFsbG9jKHRlc3QsIHNpemVvZihpbnQpLCBHRlBfVVNFUik7CisJc2l6ZV90
IGxlbjsKKwlsb2ZmX3QgcG9zOworCisJbGVuID0gMTIzNDsKKwlwb3MgPSAxOworCUtVTklUX0VY
UEVDVF9FUSh0ZXN0LCAwLCBwcm9jX2RvaW50dmVjKCZ0YWJsZSwgMCwgYnVmZmVyLCAmbGVuLCAm
cG9zKSk7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIDAsIGxlbik7Cit9CisKK3N0YXRpYyB2b2lk
IHN5c2N0bF90ZXN0X2RvaW50dmVjX2hhcHB5X3NpbmdsZV9wb3NpdGl2ZShzdHJ1Y3Qga3VuaXQg
KnRlc3QpCit7CisJc3RydWN0IGN0bF90YWJsZSB0YWJsZSA9IHsKKwkJLnByb2NuYW1lID0gImZv
byIsCisJCS5kYXRhCQk9ICZ0ZXN0X2RhdGEuaW50XzAwMDEsCisJCS5tYXhsZW4JCT0gc2l6ZW9m
KGludCksCisJCS5tb2RlCQk9IDA2NDQsCisJCS5wcm9jX2hhbmRsZXIJPSBwcm9jX2RvaW50dmVj
LAorCQkuZXh0cmExCQk9ICZpX3plcm8sCisJCS5leHRyYTIgICAgICAgICA9ICZpX29uZV9odW5k
cmVkLAorCX07CisJY2hhciBpbnB1dFtdID0gIjkiOworCXNpemVfdCBsZW4gPSBzaXplb2YoaW5w
dXQpIC0gMTsKKwlsb2ZmX3QgcG9zID0gMDsKKworCXRhYmxlLmRhdGEgPSBrdW5pdF9remFsbG9j
KHRlc3QsIHNpemVvZihpbnQpLCBHRlBfVVNFUik7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIDAs
IHByb2NfZG9pbnR2ZWMoJnRhYmxlLCAxLCBpbnB1dCwgJmxlbiwgJnBvcykpOworCUtVTklUX0VY
UEVDVF9FUSh0ZXN0LCBzaXplb2YoaW5wdXQpIC0gMSwgbGVuKTsKKwlLVU5JVF9FWFBFQ1RfRVEo
dGVzdCwgc2l6ZW9mKGlucHV0KSAtIDEsIHBvcyk7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIDks
ICooaW50ICopdGFibGUuZGF0YSk7Cit9CisKK3N0YXRpYyB2b2lkIHN5c2N0bF90ZXN0X2RvaW50
dmVjX2hhcHB5X3NpbmdsZV9uZWdhdGl2ZShzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0
IGN0bF90YWJsZSB0YWJsZSA9IHsKKwkJLnByb2NuYW1lID0gImZvbyIsCisJCS5kYXRhCQk9ICZ0
ZXN0X2RhdGEuaW50XzAwMDEsCisJCS5tYXhsZW4JCT0gc2l6ZW9mKGludCksCisJCS5tb2RlCQk9
IDA2NDQsCisJCS5wcm9jX2hhbmRsZXIJPSBwcm9jX2RvaW50dmVjLAorCQkuZXh0cmExCQk9ICZp
X3plcm8sCisJCS5leHRyYTIgICAgICAgICA9ICZpX29uZV9odW5kcmVkLAorCX07CisJY2hhciBp
bnB1dFtdID0gIi05IjsKKwlzaXplX3QgbGVuID0gc2l6ZW9mKGlucHV0KSAtIDE7CisJbG9mZl90
IHBvcyA9IDA7CisKKwl0YWJsZS5kYXRhID0ga3VuaXRfa3phbGxvYyh0ZXN0LCBzaXplb2YoaW50
KSwgR0ZQX1VTRVIpOworCUtVTklUX0VYUEVDVF9FUSh0ZXN0LCAwLCBwcm9jX2RvaW50dmVjKCZ0
YWJsZSwgMSwgaW5wdXQsICZsZW4sICZwb3MpKTsKKwlLVU5JVF9FWFBFQ1RfRVEodGVzdCwgc2l6
ZW9mKGlucHV0KSAtIDEsIGxlbik7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIHNpemVvZihpbnB1
dCkgLSAxLCBwb3MpOworCUtVTklUX0VYUEVDVF9FUSh0ZXN0LCAtOSwgKihpbnQgKil0YWJsZS5k
YXRhKTsKK30KKworc3RhdGljIHZvaWQgc3lzY3RsX3Rlc3RfZG9pbnR2ZWNfc2luZ2xlX2xlc3Nf
aW50X21pbihzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0IGN0bF90YWJsZSB0YWJsZSA9
IHsKKwkJLnByb2NuYW1lID0gImZvbyIsCisJCS5kYXRhCQk9ICZ0ZXN0X2RhdGEuaW50XzAwMDEs
CisJCS5tYXhsZW4JCT0gc2l6ZW9mKGludCksCisJCS5tb2RlCQk9IDA2NDQsCisJCS5wcm9jX2hh
bmRsZXIJPSBwcm9jX2RvaW50dmVjLAorCQkuZXh0cmExCQk9ICZpX3plcm8sCisJCS5leHRyYTIg
ICAgICAgICA9ICZpX29uZV9odW5kcmVkLAorCX07CisJY2hhciBpbnB1dFszMl07CisJc2l6ZV90
IGxlbiA9IHNpemVvZihpbnB1dCkgLSAxOworCWxvZmZfdCBwb3MgPSAwOworCXVuc2lnbmVkIGxv
bmcgYWJzX29mX2xlc3NfdGhhbl9taW4gPSAodW5zaWduZWQgbG9uZylJTlRfTUFYCisJCQkJCSAg
ICAgLSAoSU5UX01BWCArIElOVF9NSU4pICsgMTsKKworCUtVTklUX0VYUEVDVF9MVCh0ZXN0LAor
CQkJc25wcmludGYoaW5wdXQsIHNpemVvZihpbnB1dCksICItJWx1IiwKKwkJCQkgYWJzX29mX2xl
c3NfdGhhbl9taW4pLAorCQkJc2l6ZW9mKGlucHV0KSk7CisKKwl0YWJsZS5kYXRhID0ga3VuaXRf
a3phbGxvYyh0ZXN0LCBzaXplb2YoaW50KSwgR0ZQX1VTRVIpOworCUtVTklUX0VYUEVDVF9FUSh0
ZXN0LCAtRUlOVkFMLAorCQkJcHJvY19kb2ludHZlYygmdGFibGUsIDEsIGlucHV0LCAmbGVuLCAm
cG9zKSk7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIHNpemVvZihpbnB1dCkgLSAxLCBsZW4pOwor
CUtVTklUX0VYUEVDVF9FUSh0ZXN0LCAwLCAqKGludCAqKXRhYmxlLmRhdGEpOworfQorCitzdGF0
aWMgdm9pZCBzeXNjdGxfdGVzdF9kb2ludHZlY19zaW5nbGVfZ3JlYXRlcl9pbnRfbWF4KHN0cnVj
dCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3QgY3RsX3RhYmxlIHRhYmxlID0geworCQkucHJvY25h
bWUgPSAiZm9vIiwKKwkJLmRhdGEJCT0gJnRlc3RfZGF0YS5pbnRfMDAwMSwKKwkJLm1heGxlbgkJ
PSBzaXplb2YoaW50KSwKKwkJLm1vZGUJCT0gMDY0NCwKKwkJLnByb2NfaGFuZGxlcgk9IHByb2Nf
ZG9pbnR2ZWMsCisJCS5leHRyYTEJCT0gJmlfemVybywKKwkJLmV4dHJhMiAgICAgICAgID0gJmlf
b25lX2h1bmRyZWQsCisJfTsKKwljaGFyIGlucHV0WzMyXTsKKwlzaXplX3QgbGVuID0gc2l6ZW9m
KGlucHV0KSAtIDE7CisJbG9mZl90IHBvcyA9IDA7CisJdW5zaWduZWQgbG9uZyBncmVhdGVyX3Ro
YW5fbWF4ID0gKHVuc2lnbmVkIGxvbmcpSU5UX01BWCArIDE7CisKKwlLVU5JVF9FWFBFQ1RfR1Qo
dGVzdCwgZ3JlYXRlcl90aGFuX21heCwgSU5UX01BWCk7CisJS1VOSVRfRVhQRUNUX0xUKHRlc3Qs
IHNucHJpbnRmKGlucHV0LCBzaXplb2YoaW5wdXQpLCAiJWx1IiwKKwkJCQkgICAgICAgZ3JlYXRl
cl90aGFuX21heCksCisJCQlzaXplb2YoaW5wdXQpKTsKKwl0YWJsZS5kYXRhID0ga3VuaXRfa3ph
bGxvYyh0ZXN0LCBzaXplb2YoaW50KSwgR0ZQX1VTRVIpOworCUtVTklUX0VYUEVDVF9FUSh0ZXN0
LCAtRUlOVkFMLAorCQkJcHJvY19kb2ludHZlYygmdGFibGUsIDEsIGlucHV0LCAmbGVuLCAmcG9z
KSk7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIHNpemVvZihpbnB1dCkgLSAxLCBsZW4pOworCUtV
TklUX0VYUEVDVF9FUSh0ZXN0LCAwLCAqKGludCAqKXRhYmxlLmRhdGEpOworfQorCitzdGF0aWMg
aW50IHN5c2N0bF90ZXN0X2luaXQoc3RydWN0IGt1bml0ICp0ZXN0KQoreworCXJldHVybiAwOwor
fQorCisvKgorICogVGhpcyBpcyBydW4gb25jZSBhZnRlciBlYWNoIHRlc3QgY2FzZSwgc2VlIHRo
ZSBjb21tZW50IG9uIGV4YW1wbGVfdGVzdF9tb2R1bGUKKyAqIGZvciBtb3JlIGluZm9ybWF0aW9u
LgorICovCitzdGF0aWMgdm9pZCBzeXNjdGxfdGVzdF9leGl0KHN0cnVjdCBrdW5pdCAqdGVzdCkK
K3sKK30KKworLyoKKyAqIEhlcmUgd2UgbWFrZSBhIGxpc3Qgb2YgYWxsIHRoZSB0ZXN0IGNhc2Vz
IHdlIHdhbnQgdG8gYWRkIHRvIHRoZSB0ZXN0IG1vZHVsZQorICogYmVsb3cuCisgKi8KK3N0YXRp
YyBzdHJ1Y3Qga3VuaXRfY2FzZSBzeXNjdGxfdGVzdF9jYXNlc1tdID0geworCS8qCisJICogVGhp
cyBpcyBhIGhlbHBlciB0byBjcmVhdGUgYSB0ZXN0IGNhc2Ugb2JqZWN0IGZyb20gYSB0ZXN0IGNh
c2UKKwkgKiBmdW5jdGlvbjsgaXRzIGV4YWN0IGZ1bmN0aW9uIGlzIG5vdCBpbXBvcnRhbnQgdG8g
dW5kZXJzdGFuZCBob3cgdG8KKwkgKiB1c2UgS1VuaXQsIGp1c3Qga25vdyB0aGF0IHRoaXMgaXMg
aG93IHlvdSBhc3NvY2lhdGUgdGVzdCBjYXNlcyB3aXRoIGEKKwkgKiB0ZXN0IG1vZHVsZS4KKwkg
Ki8KKwlLVU5JVF9DQVNFKHN5c2N0bF90ZXN0X2RvaW50dmVjX251bGxfdGJsX2RhdGEpLAorCUtV
TklUX0NBU0Uoc3lzY3RsX3Rlc3RfZG9pbnR2ZWNfdGFibGVfbWF4bGVuX3Vuc2V0KSwKKwlLVU5J
VF9DQVNFKHN5c2N0bF90ZXN0X2RvaW50dmVjX3RhYmxlX2xlbl9pc196ZXJvKSwKKwlLVU5JVF9D
QVNFKHN5c2N0bF90ZXN0X2RvaW50dmVjX3RhYmxlX3JlYWRfYnV0X3Bvc2l0aW9uX3NldCksCisJ
S1VOSVRfQ0FTRShzeXNjdGxfdGVzdF9kb2ludHZlY19oYXBweV9zaW5nbGVfcG9zaXRpdmUpLAor
CUtVTklUX0NBU0Uoc3lzY3RsX3Rlc3RfZG9pbnR2ZWNfaGFwcHlfc2luZ2xlX25lZ2F0aXZlKSwK
KwlLVU5JVF9DQVNFKHN5c2N0bF90ZXN0X2RvaW50dmVjX3NpbmdsZV9sZXNzX2ludF9taW4pLAor
CUtVTklUX0NBU0Uoc3lzY3RsX3Rlc3RfZG9pbnR2ZWNfc2luZ2xlX2dyZWF0ZXJfaW50X21heCks
CisJe30sCit9OworCisvKgorICogVGhpcyBkZWZpbmVzIGEgc3VpdGUgb3IgZ3JvdXBpbmcgb2Yg
dGVzdHMuCisgKgorICogVGVzdCBjYXNlcyBhcmUgZGVmaW5lZCBhcyBiZWxvbmdpbmcgdG8gdGhl
IHN1aXRlIGJ5IGFkZGluZyB0aGVtIHRvCisgKiBgdGVzdF9jYXNlc2AuCisgKgorICogT2Z0ZW4g
aXQgaXMgZGVzaXJhYmxlIHRvIHJ1biBzb21lIGZ1bmN0aW9uIHdoaWNoIHdpbGwgc2V0IHVwIHRo
aW5ncyB3aGljaAorICogd2lsbCBiZSB1c2VkIGJ5IGV2ZXJ5IHRlc3Q7IHRoaXMgaXMgYWNjb21w
bGlzaGVkIHdpdGggYW4gYGluaXRgIGZ1bmN0aW9uCisgKiB3aGljaCBydW5zIGJlZm9yZSBlYWNo
IHRlc3QgY2FzZSBpcyBpbnZva2VkLiBTaW1pbGFybHksIGFuIGBleGl0YCBmdW5jdGlvbgorICog
bWF5IGJlIHNwZWNpZmllZCB3aGljaCBydW5zIGFmdGVyIGV2ZXJ5IHRlc3QgY2FzZSBhbmQgY2Fu
IGJlIHVzZWQgdG8gZm9yCisgKiBjbGVhbnVwLiBGb3IgY2xhcml0eSwgcnVubmluZyB0ZXN0cyBp
biBhIHRlc3QgbW9kdWxlIHdvdWxkIGJlaGF2ZSBhcyBmb2xsb3dzOgorICoKKyAqIG1vZHVsZS5p
bml0KHRlc3QpOworICogbW9kdWxlLnRlc3RfY2FzZVswXSh0ZXN0KTsKKyAqIG1vZHVsZS5leGl0
KHRlc3QpOworICogbW9kdWxlLmluaXQodGVzdCk7CisgKiBtb2R1bGUudGVzdF9jYXNlWzFdKHRl
c3QpOworICogbW9kdWxlLmV4aXQodGVzdCk7CisgKiAuLi47CisgKi8KK3N0YXRpYyBzdHJ1Y3Qg
a3VuaXRfbW9kdWxlIHN5c2N0bF90ZXN0X21vZHVsZSA9IHsKKwkubmFtZSA9ICJzeXNjdGxfdGVz
dCIsCisJLmluaXQgPSBzeXNjdGxfdGVzdF9pbml0LAorCS5leGl0ID0gc3lzY3RsX3Rlc3RfZXhp
dCwKKwkudGVzdF9jYXNlcyA9IHN5c2N0bF90ZXN0X2Nhc2VzLAorfTsKKworLyoKKyAqIFRoaXMg
cmVnaXN0ZXJzIHRoZSBhYm92ZSB0ZXN0IG1vZHVsZSB0ZWxsaW5nIEtVbml0IHRoYXQgdGhpcyBp
cyBhIHN1aXRlIG9mCisgKiB0ZXN0cyB0aGF0IG5lZWQgdG8gYmUgcnVuLgorICovCittb2R1bGVf
dGVzdChzeXNjdGxfdGVzdF9tb2R1bGUpOwpkaWZmIC0tZ2l0IGEvbGliL0tjb25maWcuZGVidWcg
Yi9saWIvS2NvbmZpZy5kZWJ1ZwppbmRleCBkNWE0YTQwMzZkMmY4Li43NzJhZjRlYzcwMTExIDEw
MDY0NAotLS0gYS9saWIvS2NvbmZpZy5kZWJ1ZworKysgYi9saWIvS2NvbmZpZy5kZWJ1ZwpAQCAt
MTkwOCw2ICsxOTA4LDEyIEBAIGNvbmZpZyBURVNUX1NZU0NUTAogCiAJICBJZiB1bnN1cmUsIHNh
eSBOLgogCitjb25maWcgU1lTQ1RMX0tVTklUX1RFU1QKKwlib29sICJLVW5pdCB0ZXN0IGZvciBz
eXNjdGwiCisJZGVwZW5kcyBvbiBLVU5JVAorCWhlbHAKKwkgIEVuYWJsZXMgS1VuaXQgc3lzY3Rs
IHRlc3QuCisKIGNvbmZpZyBURVNUX1VERUxBWQogCXRyaXN0YXRlICJ1ZGVsYXkgdGVzdCBkcml2
ZXIiCiAJaGVscAotLSAKMi4yMS4wLjEwMjAuZ2YyODIwY2YwMWEtZ29vZwoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
