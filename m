Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2A74EF122A
	for <lists+dri-devel@lfdr.de>; Wed,  6 Nov 2019 10:31:34 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3051D6EC76;
	Wed,  6 Nov 2019 09:31:29 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C38EA6EC78
 for <dri-devel@lists.freedesktop.org>; Wed,  6 Nov 2019 09:31:26 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 3F197B411;
 Wed,  6 Nov 2019 09:31:25 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: daniel@ffwll.ch,
	christian.koenig@amd.com,
	noralf@tronnes.org
Subject: [PATCH 3/8] drm: Add is_iomem return parameter to struct
 drm_gem_object_funcs.vmap
Date: Wed,  6 Nov 2019 10:31:16 +0100
Message-Id: <20191106093121.21762-4-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191106093121.21762-1-tzimmermann@suse.de>
References: <20191106093121.21762-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIHZtYXAgb3BlcmF0aW9uIGNhbiByZXR1cm4gc3lzdGVtIG9yIEkvTyBtZW1vcnksIHdoaWNo
IHRoZSBjYWxsZXIgbWF5CmhhdmUgdG8gdHJlYXQgZGlmZmVyZW50bHkuIFRoZSBwYXJhbWV0ZXIg
aXNfaW9tZW0gcmV0dXJucyAndHJ1ZScgaWYgdGhlCnJldHVybmVkIHBvaW50ZXIgcmVmZXJzIHRv
IEkvTyBtZW1vcnksIG9yICdmYWxzZScgb3RoZXJ3aXNlLgoKSW4gbWFueSBjYXNlcywgc3VjaCBh
cyBDTUEgYW5zIFNITUVNLCB0aGUgcmV0dXJuZWQgdmFsdWUgaXMgJ2ZhbHNlJy4gRm9yClRUTS1i
YXNlZCBkcml2ZXJzLCB0aGUgY29ycmVjdCB2YWx1ZSBpcyBwcm92aWRlZCBieSBUVE0gaXRzZWxm
LiBGb3IgRE1BCmJ1ZmZlcnMgdGhhdCBhcmUgc2hhcmVkIGFtb25nIGRldmljZXMsIHdlIGFzc3Vt
ZSBzeXN0ZW0gbWVtb3J5IGFzIHdlbGwuCgpTaWduZWQtb2ZmLWJ5OiBUaG9tYXMgWmltbWVybWFu
biA8dHppbW1lcm1hbm5Ac3VzZS5kZT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfZG1hX2J1Zi5jIHwgIDYgKysrKystCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfZG1hX2J1Zi5oIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9jaXJydXMvY2lycnVzLmMg
ICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2RybV9nZW0uYyAgICAgICAgICAg
ICAgICAgICB8ICA0ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX2NtYV9oZWxwZXIuYyAg
ICAgICAgfCAgNyArKysrKystCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIu
YyAgICAgIHwgMTIgKysrKysrKysrLS0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV92cmFtX2hl
bHBlci5jICAgICAgIHwgIDcgKysrKystLQogZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZp
dl9kcnYuaCAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dl
bV9wcmltZS5jIHwgIDQgKysrLQogZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9nZW0u
aCAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3ByaW1lLmMg
ICAgIHwgIDQgKysrLQogZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQu
YyB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9kcnYuaCAgICAgICAgICAgICAgIHwg
IDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3ByaW1lLmMgICAgICAgICAgICAgfCAgNCAr
Ky0tCiBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9kcnYuYyAgICAgICAgIHwgIDIgKy0K
IGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3ByaW1lLmMgICAgICAgfCAgNCArKystCiBk
cml2ZXJzL2dwdS9kcm0vdGlueS9nbTEydTMyMC5jICAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZl
cnMvZ3B1L2RybS92YzQvdmM0X2JvLmMgICAgICAgICAgICAgICAgfCAgNCArKy0tCiBkcml2ZXJz
L2dwdS9kcm0vdmM0L3ZjNF9kcnYuaCAgICAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1
L2RybS92Z2VtL3ZnZW1fZHJ2LmMgICAgICAgICAgICAgfCAgNSArKysrLQogZHJpdmVycy9ncHUv
ZHJtL3hlbi94ZW5fZHJtX2Zyb250X2dlbS5jICAgICB8ICA2ICsrKysrLQogZHJpdmVycy9ncHUv
ZHJtL3hlbi94ZW5fZHJtX2Zyb250X2dlbS5oICAgICB8ICAzICsrLQogaW5jbHVkZS9kcm0vZHJt
X2Rydi5oICAgICAgICAgICAgICAgICAgICAgICB8ICAyICstCiBpbmNsdWRlL2RybS9kcm1fZ2Vt
LmggICAgICAgICAgICAgICAgICAgICAgIHwgIDIgKy0KIGluY2x1ZGUvZHJtL2RybV9nZW1fY21h
X2hlbHBlci5oICAgICAgICAgICAgfCAgMiArLQogaW5jbHVkZS9kcm0vZHJtX2dlbV9zaG1lbV9o
ZWxwZXIuaCAgICAgICAgICB8ICAyICstCiAyNiBmaWxlcyBjaGFuZ2VkLCA2NCBpbnNlcnRpb25z
KCspLCAzMiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfZG1hX2J1Zi5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2RtYV9idWYuYwppbmRleCA0OTE3YjU0OGI3ZjIuLjk3Yjc3ZTdlMTVkYyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5jCkBAIC01NywxMyArNTcsMTUgQEAg
c3RydWN0IHNnX3RhYmxlICphbWRncHVfZ2VtX3ByaW1lX2dldF9zZ190YWJsZShzdHJ1Y3QgZHJt
X2dlbV9vYmplY3QgKm9iaikKIC8qKgogICogYW1kZ3B1X2dlbV9wcmltZV92bWFwIC0gJmRtYV9i
dWZfb3BzLnZtYXAgaW1wbGVtZW50YXRpb24KICAqIEBvYmo6IEdFTSBCTworICogQGlzX2lvbWVt
OiByZXR1cm5zIHRydWUgaWYgdGhlIG1hcHBlZCBtZW1vcnkgaXMgSS9PIG1lbW9yeSwgb3IgZmFs
c2UKKyAqICAgICAgICAgICAgb3RoZXJ3aXNlOyBjYW4gYmUgTlVMTAogICoKICAqIFNldHMgdXAg
YW4gaW4ta2VybmVsIHZpcnR1YWwgbWFwcGluZyBvZiB0aGUgQk8ncyBtZW1vcnkuCiAgKgogICog
UmV0dXJuczoKICAqIFRoZSB2aXJ0dWFsIGFkZHJlc3Mgb2YgdGhlIG1hcHBpbmcgb3IgYW4gZXJy
b3IgcG9pbnRlci4KICAqLwotdm9pZCAqYW1kZ3B1X2dlbV9wcmltZV92bWFwKHN0cnVjdCBkcm1f
Z2VtX29iamVjdCAqb2JqKQordm9pZCAqYW1kZ3B1X2dlbV9wcmltZV92bWFwKHN0cnVjdCBkcm1f
Z2VtX29iamVjdCAqb2JqLCBib29sICppc19pb21lbSkKIHsKIAlzdHJ1Y3QgYW1kZ3B1X2JvICpi
byA9IGdlbV90b19hbWRncHVfYm8ob2JqKTsKIAlpbnQgcmV0OwpAQCAtNzMsNiArNzUsOCBAQCB2
b2lkICphbWRncHVfZ2VtX3ByaW1lX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCiAJ
aWYgKHJldCkKIAkJcmV0dXJuIEVSUl9QVFIocmV0KTsKIAorCWlmIChpc19pb21lbSkKKwkJcmV0
dXJuIHR0bV9rbWFwX29ial92aXJ0dWFsKCZiby0+ZG1hX2J1Zl92bWFwLCBpc19pb21lbSk7CiAJ
cmV0dXJuIGJvLT5kbWFfYnVmX3ZtYXAudmlydHVhbDsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYuaCBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmgKaW5kZXggNTAxMmU2YWI1OGYxLi45MTBjZjJlZjM0
NWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVm
LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYuaApAQCAt
MzQsNyArMzQsNyBAQCBzdHJ1Y3QgZG1hX2J1ZiAqYW1kZ3B1X2dlbV9wcmltZV9leHBvcnQoc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpnb2JqLAogCQkJCQlpbnQgZmxhZ3MpOwogc3RydWN0IGRybV9n
ZW1fb2JqZWN0ICphbWRncHVfZ2VtX3ByaW1lX2ltcG9ydChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LAogCQkJCQkgICAgc3RydWN0IGRtYV9idWYgKmRtYV9idWYpOwotdm9pZCAqYW1kZ3B1X2dlbV9w
cmltZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKTsKK3ZvaWQgKmFtZGdwdV9nZW1f
cHJpbWVfdm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgYm9vbCAqaXNfaW9tZW0pOwog
dm9pZCBhbWRncHVfZ2VtX3ByaW1lX3Z1bm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwg
dm9pZCAqdmFkZHIpOwogaW50IGFtZGdwdV9nZW1fcHJpbWVfbW1hcChzdHJ1Y3QgZHJtX2dlbV9v
YmplY3QgKm9iaiwKIAkJCSAgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2NpcnJ1cy9jaXJydXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9jaXJy
dXMvY2lycnVzLmMKaW5kZXggMjQ4YzlmNzY1YzQ1Li42NTE4ZTVjMzFlYjQgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9jaXJydXMvY2lycnVzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2Np
cnJ1cy9jaXJydXMuYwpAQCAtMzAyLDcgKzMwMiw3IEBAIHN0YXRpYyBpbnQgY2lycnVzX2ZiX2Js
aXRfcmVjdChzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiwKIAlzdHJ1Y3QgY2lycnVzX2Rldmlj
ZSAqY2lycnVzID0gZmItPmRldi0+ZGV2X3ByaXZhdGU7CiAJdm9pZCAqdm1hcDsKIAotCXZtYXAg
PSBkcm1fZ2VtX3NobWVtX3ZtYXAoZmItPm9ialswXSk7CisJdm1hcCA9IGRybV9nZW1fc2htZW1f
dm1hcChmYi0+b2JqWzBdLCBOVUxMKTsKIAlpZiAoIXZtYXApCiAJCXJldHVybiAtRU5PTUVNOwog
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbS5jIGIvZHJpdmVycy9ncHUvZHJt
L2RybV9nZW0uYwppbmRleCA1NmY0MmUwZjI1ODQuLjBhY2ZiZDEzNGUwNCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2RybV9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbS5j
CkBAIC0xMjUxLDkgKzEyNTEsOSBAQCB2b2lkICpkcm1fZ2VtX3ZtYXAoc3RydWN0IGRybV9nZW1f
b2JqZWN0ICpvYmopCiAJdm9pZCAqdmFkZHI7CiAKIAlpZiAob2JqLT5mdW5jcyAmJiBvYmotPmZ1
bmNzLT52bWFwKQotCQl2YWRkciA9IG9iai0+ZnVuY3MtPnZtYXAob2JqKTsKKwkJdmFkZHIgPSBv
YmotPmZ1bmNzLT52bWFwKG9iaiwgTlVMTCk7CiAJZWxzZSBpZiAob2JqLT5kZXYtPmRyaXZlci0+
Z2VtX3ByaW1lX3ZtYXApCi0JCXZhZGRyID0gb2JqLT5kZXYtPmRyaXZlci0+Z2VtX3ByaW1lX3Zt
YXAob2JqKTsKKwkJdmFkZHIgPSBvYmotPmRldi0+ZHJpdmVyLT5nZW1fcHJpbWVfdm1hcChvYmos
IE5VTEwpOwogCWVsc2UKIAkJdmFkZHIgPSBFUlJfUFRSKC1FT1BOT1RTVVBQKTsKIApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fY21hX2hlbHBlci5jIGIvZHJpdmVycy9ncHUv
ZHJtL2RybV9nZW1fY21hX2hlbHBlci5jCmluZGV4IDEyZTk4ZmIyODIyOS4uYjE0ZTg4MzM3NTI5
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9jbWFfaGVscGVyLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fY21hX2hlbHBlci5jCkBAIC01MzcsNiArNTM3LDggQEAg
RVhQT1JUX1NZTUJPTF9HUEwoZHJtX2dlbV9jbWFfcHJpbWVfbW1hcCk7CiAgKiBkcm1fZ2VtX2Nt
YV9wcmltZV92bWFwIC0gbWFwIGEgQ01BIEdFTSBvYmplY3QgaW50byB0aGUga2VybmVsJ3Mgdmly
dHVhbAogICogICAgIGFkZHJlc3Mgc3BhY2UKICAqIEBvYmo6IEdFTSBvYmplY3QKKyAqIEBpc19p
b21lbTogcmV0dXJucyB0cnVlIGlmIHRoZSBtYXBwZWQgbWVtb3J5IGlzIEkvTyBtZW1vcnksIG9y
IGZhbHNlCisgKiAgICAgICAgICAgIG90aGVyd2lzZTsgY2FuIGJlIE5VTEwKICAqCiAgKiBUaGlz
IGZ1bmN0aW9uIG1hcHMgYSBidWZmZXIgZXhwb3J0ZWQgdmlhIERSTSBQUklNRSBpbnRvIHRoZSBr
ZXJuZWwncwogICogdmlydHVhbCBhZGRyZXNzIHNwYWNlLiBTaW5jZSB0aGUgQ01BIGJ1ZmZlcnMg
YXJlIGFscmVhZHkgbWFwcGVkIGludG8gdGhlCkBAIC01NDcsMTAgKzU0OSwxMyBAQCBFWFBPUlRf
U1lNQk9MX0dQTChkcm1fZ2VtX2NtYV9wcmltZV9tbWFwKTsKICAqIFJldHVybnM6CiAgKiBUaGUg
a2VybmVsIHZpcnR1YWwgYWRkcmVzcyBvZiB0aGUgQ01BIEdFTSBvYmplY3QncyBiYWNraW5nIHN0
b3JlLgogICovCi12b2lkICpkcm1fZ2VtX2NtYV9wcmltZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29i
amVjdCAqb2JqKQordm9pZCAqZHJtX2dlbV9jbWFfcHJpbWVfdm1hcChzdHJ1Y3QgZHJtX2dlbV9v
YmplY3QgKm9iaiwgYm9vbCAqaXNfaW9tZW0pCiB7CiAJc3RydWN0IGRybV9nZW1fY21hX29iamVj
dCAqY21hX29iaiA9IHRvX2RybV9nZW1fY21hX29iaihvYmopOwogCisJaWYgKGlzX2lvbWVtKQor
CQkqaXNfaW9tZW0gPSBmYWxzZTsKKwogCXJldHVybiBjbWFfb2JqLT52YWRkcjsKIH0KIEVYUE9S
VF9TWU1CT0xfR1BMKGRybV9nZW1fY21hX3ByaW1lX3ZtYXApOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2RybV9nZW1fc2htZW1faGVscGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dl
bV9zaG1lbV9oZWxwZXIuYwppbmRleCAzYmM2OWIxZmZhN2QuLmE4YThlMWIxM2EzMCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fc2htZW1faGVscGVyLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2RybV9nZW1fc2htZW1faGVscGVyLmMKQEAgLTI0Miw3ICsyNDIsOCBAQCB2b2lk
IGRybV9nZW1fc2htZW1fdW5waW4oc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCiB9CiBFWFBP
UlRfU1lNQk9MKGRybV9nZW1fc2htZW1fdW5waW4pOwogCi1zdGF0aWMgdm9pZCAqZHJtX2dlbV9z
aG1lbV92bWFwX2xvY2tlZChzdHJ1Y3QgZHJtX2dlbV9zaG1lbV9vYmplY3QgKnNobWVtKQorc3Rh
dGljIHZvaWQgKmRybV9nZW1fc2htZW1fdm1hcF9sb2NrZWQoc3RydWN0IGRybV9nZW1fc2htZW1f
b2JqZWN0ICpzaG1lbSwKKwkJCQkgICAgICAgYm9vbCAqaXNfaW9tZW0pCiB7CiAJc3RydWN0IGRy
bV9nZW1fb2JqZWN0ICpvYmogPSAmc2htZW0tPmJhc2U7CiAJaW50IHJldDsKQEAgLTI2Niw2ICsy
NjcsOSBAQCBzdGF0aWMgdm9pZCAqZHJtX2dlbV9zaG1lbV92bWFwX2xvY2tlZChzdHJ1Y3QgZHJt
X2dlbV9zaG1lbV9vYmplY3QgKnNobWVtKQogCQlnb3RvIGVycl9wdXRfcGFnZXM7CiAJfQogCisJ
aWYgKGlzX2lvbWVtKQorCQkqaXNfaW9tZW0gPSBmYWxzZTsKKwogCXJldHVybiBzaG1lbS0+dmFk
ZHI7CiAKIGVycl9wdXRfcGFnZXM6CkBAIC0yNzksNiArMjgzLDggQEAgc3RhdGljIHZvaWQgKmRy
bV9nZW1fc2htZW1fdm1hcF9sb2NrZWQoc3RydWN0IGRybV9nZW1fc2htZW1fb2JqZWN0ICpzaG1l
bSkKIC8qCiAgKiBkcm1fZ2VtX3NobWVtX3ZtYXAgLSBDcmVhdGUgYSB2aXJ0dWFsIG1hcHBpbmcg
Zm9yIGEgc2htZW0gR0VNIG9iamVjdAogICogQHNobWVtOiBzaG1lbSBHRU0gb2JqZWN0CisgKiBA
aXNfaW9tZW06IHJldHVybnMgdHJ1ZSBpZiB0aGUgbWFwcGVkIG1lbW9yeSBpcyBJL08gbWVtb3J5
LCBvciBmYWxzZQorICogICAgICAgICAgICBvdGhlcndpc2U7IGNhbiBiZSBOVUxMCiAgKgogICog
VGhpcyBmdW5jdGlvbiBtYWtlcyBzdXJlIHRoYXQgYSB2aXJ0dWFsIGFkZHJlc3MgZXhpc3RzIGZv
ciB0aGUgYnVmZmVyIGJhY2tpbmcKICAqIHRoZSBzaG1lbSBHRU0gb2JqZWN0LgpAQCAtMjg2LDcg
KzI5Miw3IEBAIHN0YXRpYyB2b2lkICpkcm1fZ2VtX3NobWVtX3ZtYXBfbG9ja2VkKHN0cnVjdCBk
cm1fZ2VtX3NobWVtX29iamVjdCAqc2htZW0pCiAgKiBSZXR1cm5zOgogICogMCBvbiBzdWNjZXNz
IG9yIGEgbmVnYXRpdmUgZXJyb3IgY29kZSBvbiBmYWlsdXJlLgogICovCi12b2lkICpkcm1fZ2Vt
X3NobWVtX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCit2b2lkICpkcm1fZ2VtX3No
bWVtX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIGJvb2wgKmlzX2lvbWVtKQogewog
CXN0cnVjdCBkcm1fZ2VtX3NobWVtX29iamVjdCAqc2htZW0gPSB0b19kcm1fZ2VtX3NobWVtX29i
aihvYmopOwogCXZvaWQgKnZhZGRyOwpAQCAtMjk1LDcgKzMwMSw3IEBAIHZvaWQgKmRybV9nZW1f
c2htZW1fdm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKIAlyZXQgPSBtdXRleF9sb2Nr
X2ludGVycnVwdGlibGUoJnNobWVtLT52bWFwX2xvY2spOwogCWlmIChyZXQpCiAJCXJldHVybiBF
UlJfUFRSKHJldCk7Ci0JdmFkZHIgPSBkcm1fZ2VtX3NobWVtX3ZtYXBfbG9ja2VkKHNobWVtKTsK
Kwl2YWRkciA9IGRybV9nZW1fc2htZW1fdm1hcF9sb2NrZWQoc2htZW0sIGlzX2lvbWVtKTsKIAlt
dXRleF91bmxvY2soJnNobWVtLT52bWFwX2xvY2spOwogCiAJcmV0dXJuIHZhZGRyOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1
L2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmMKaW5kZXggMDVmNjNmMjg4MTRkLi43NzY1OGY4MzU3
NzQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYwpAQCAtODE4LDE3ICs4MTgs
MjAgQEAgc3RhdGljIHZvaWQgZHJtX2dlbV92cmFtX29iamVjdF91bnBpbihzdHJ1Y3QgZHJtX2dl
bV9vYmplY3QgKmdlbSkKICAqIGRybV9nZW1fdnJhbV9vYmplY3Rfdm1hcCgpIC0gXAogCUltcGxl
bWVudHMgJnN0cnVjdCBkcm1fZ2VtX29iamVjdF9mdW5jcy52bWFwCiAgKiBAZ2VtOglUaGUgR0VN
IG9iamVjdCB0byBtYXAKKyAqIEBpc19pb21lbToJcmV0dXJucyB0cnVlIGlmIHRoZSBtYXBwZWQg
bWVtb3J5IGlzIEkvTyBtZW1vcnksIG9yIGZhbHNlCisgKiAgICAgICAgICAgICAgb3RoZXJ3aXNl
OyBjYW4gYmUgTlVMTAogICoKICAqIFJldHVybnM6CiAgKiBUaGUgYnVmZmVycyB2aXJ0dWFsIGFk
ZHJlc3Mgb24gc3VjY2Vzcywgb3IKICAqIE5VTEwgb3RoZXJ3aXNlLgogICovCi1zdGF0aWMgdm9p
ZCAqZHJtX2dlbV92cmFtX29iamVjdF92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqZ2VtKQor
c3RhdGljIHZvaWQgKmRybV9nZW1fdnJhbV9vYmplY3Rfdm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmpl
Y3QgKmdlbSwKKwkJCQkgICAgICBib29sICppc19pb21lbSkKIHsKIAlzdHJ1Y3QgZHJtX2dlbV92
cmFtX29iamVjdCAqZ2JvID0gZHJtX2dlbV92cmFtX29mX2dlbShnZW0pOwogCXZvaWQgKmJhc2U7
CiAKLQliYXNlID0gZHJtX2dlbV92cmFtX3ZtYXAoZ2JvLCBOVUxMKTsKKwliYXNlID0gZHJtX2dl
bV92cmFtX3ZtYXAoZ2JvLCBpc19pb21lbSk7CiAJaWYgKElTX0VSUihiYXNlKSkKIAkJcmV0dXJu
IE5VTEw7CiAJcmV0dXJuIGJhc2U7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZp
di9ldG5hdml2X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9kcnYuaApp
bmRleCAzMmNmYTVhNDhkNDIuLjU1OGI3OTM2NmJmNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2V0bmF2aXYvZXRuYXZpdl9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9l
dG5hdml2X2Rydi5oCkBAIC01MSw3ICs1MSw3IEBAIGludCBldG5hdml2X2dlbV9tbWFwKHN0cnVj
dCBmaWxlICpmaWxwLCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSk7CiB2bV9mYXVsdF90IGV0
bmF2aXZfZ2VtX2ZhdWx0KHN0cnVjdCB2bV9mYXVsdCAqdm1mKTsKIGludCBldG5hdml2X2dlbV9t
bWFwX29mZnNldChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgdTY0ICpvZmZzZXQpOwogc3Ry
dWN0IHNnX3RhYmxlICpldG5hdml2X2dlbV9wcmltZV9nZXRfc2dfdGFibGUoc3RydWN0IGRybV9n
ZW1fb2JqZWN0ICpvYmopOwotdm9pZCAqZXRuYXZpdl9nZW1fcHJpbWVfdm1hcChzdHJ1Y3QgZHJt
X2dlbV9vYmplY3QgKm9iaik7Cit2b2lkICpldG5hdml2X2dlbV9wcmltZV92bWFwKHN0cnVjdCBk
cm1fZ2VtX29iamVjdCAqb2JqLCBib29sICppc19pb21lbSk7CiB2b2lkIGV0bmF2aXZfZ2VtX3By
aW1lX3Z1bm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgdm9pZCAqdmFkZHIpOwogaW50
IGV0bmF2aXZfZ2VtX3ByaW1lX21tYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosCiAJCQkg
ICBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vZXRuYXZpdi9ldG5hdml2X2dlbV9wcmltZS5jIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYv
ZXRuYXZpdl9nZW1fcHJpbWUuYwppbmRleCBmMjRkZDIxYzIzNjMuLmM4YjA5ZWQ3ZjkzNiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW1fcHJpbWUuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9wcmltZS5jCkBAIC0yMiw4ICsy
MiwxMCBAQCBzdHJ1Y3Qgc2dfdGFibGUgKmV0bmF2aXZfZ2VtX3ByaW1lX2dldF9zZ190YWJsZShz
dHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKIAlyZXR1cm4gZHJtX3ByaW1lX3BhZ2VzX3RvX3Nn
KGV0bmF2aXZfb2JqLT5wYWdlcywgbnBhZ2VzKTsKIH0KIAotdm9pZCAqZXRuYXZpdl9nZW1fcHJp
bWVfdm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKK3ZvaWQgKmV0bmF2aXZfZ2VtX3By
aW1lX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIGJvb2wgKmlzX2lvbWVtKQogewor
CWlmIChpc19pb21lbSkKKwkJKmlzX2lvbWVtID0gZmFsc2U7CiAJcmV0dXJuIGV0bmF2aXZfZ2Vt
X3ZtYXAob2JqKTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91
dmVhdV9nZW0uaCBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZ2VtLmgKaW5kZXgg
OTc4ZTA3NTkxOTkwLi40NmZmMTFhMzlmMjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9u
b3V2ZWF1L25vdXZlYXVfZ2VtLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVh
dV9nZW0uaApAQCAtMzUsNyArMzUsNyBAQCBleHRlcm4gdm9pZCBub3V2ZWF1X2dlbV9wcmltZV91
bnBpbihzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKik7CiBleHRlcm4gc3RydWN0IHNnX3RhYmxlICpu
b3V2ZWF1X2dlbV9wcmltZV9nZXRfc2dfdGFibGUoc3RydWN0IGRybV9nZW1fb2JqZWN0ICopOwog
ZXh0ZXJuIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqbm91dmVhdV9nZW1fcHJpbWVfaW1wb3J0X3Nn
X3RhYmxlKAogCXN0cnVjdCBkcm1fZGV2aWNlICosIHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQg
Kiwgc3RydWN0IHNnX3RhYmxlICopOwotZXh0ZXJuIHZvaWQgKm5vdXZlYXVfZ2VtX3ByaW1lX3Zt
YXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICopOworZXh0ZXJuIHZvaWQgKm5vdXZlYXVfZ2VtX3By
aW1lX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICosIGJvb2wgKik7CiBleHRlcm4gdm9pZCBu
b3V2ZWF1X2dlbV9wcmltZV92dW5tYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICosIHZvaWQgKik7
CiAKICNlbmRpZgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9w
cmltZS5jIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9wcmltZS5jCmluZGV4IGJh
ZTZhM2VjY2VlMC4uYjYxMzc2YzkxZDMxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbm91
dmVhdS9ub3V2ZWF1X3ByaW1lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVh
dV9wcmltZS5jCkBAIC0zNSw3ICszNSw3IEBAIHN0cnVjdCBzZ190YWJsZSAqbm91dmVhdV9nZW1f
cHJpbWVfZ2V0X3NnX3RhYmxlKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKQogCXJldHVybiBk
cm1fcHJpbWVfcGFnZXNfdG9fc2cobnZiby0+Ym8udHRtLT5wYWdlcywgbnBhZ2VzKTsKIH0KIAot
dm9pZCAqbm91dmVhdV9nZW1fcHJpbWVfdm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikK
K3ZvaWQgKm5vdXZlYXVfZ2VtX3ByaW1lX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmos
IGJvb2wgKmlzX2lvbWVtKQogewogCXN0cnVjdCBub3V2ZWF1X2JvICpudmJvID0gbm91dmVhdV9n
ZW1fb2JqZWN0KG9iaik7CiAJaW50IHJldDsKQEAgLTQ1LDYgKzQ1LDggQEAgdm9pZCAqbm91dmVh
dV9nZW1fcHJpbWVfdm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKIAlpZiAocmV0KQog
CQlyZXR1cm4gRVJSX1BUUihyZXQpOwogCisJaWYgKGlzX2lvbWVtKQorCQlyZXR1cm4gdHRtX2tt
YXBfb2JqX3ZpcnR1YWwoJm52Ym8tPmRtYV9idWZfdm1hcCwgaXNfaW9tZW0pOwogCXJldHVybiBu
dmJvLT5kbWFfYnVmX3ZtYXAudmlydHVhbDsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9z
dC9wYW5mcm9zdF9wZXJmY250LmMKaW5kZXggODNjNTdkMzI1Y2E4Li5mODMzZDgzNzZkNDQgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9wZXJmY250LmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQuYwpAQCAtOTQsNyAr
OTQsNyBAQCBzdGF0aWMgaW50IHBhbmZyb3N0X3BlcmZjbnRfZW5hYmxlX2xvY2tlZChzdHJ1Y3Qg
cGFuZnJvc3RfZGV2aWNlICpwZmRldiwKIAlpZiAocmV0KQogCQlnb3RvIGVycl9wdXRfYm87CiAK
LQlwZXJmY250LT5idWYgPSBkcm1fZ2VtX3NobWVtX3ZtYXAoJmJvLT5iYXNlKTsKKwlwZXJmY250
LT5idWYgPSBkcm1fZ2VtX3NobWVtX3ZtYXAoJmJvLT5iYXNlLCBOVUxMKTsKIAlpZiAoSVNfRVJS
KHBlcmZjbnQtPmJ1ZikpIHsKIAkJcmV0ID0gUFRSX0VSUihwZXJmY250LT5idWYpOwogCQlnb3Rv
IGVycl9wdXRfYm87CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9kcnYuaCBi
L2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX2Rydi5oCmluZGV4IGU3NDljMGQwZTgxOS4uM2Y4MGIy
MjE1ZjI1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9kcnYuaAorKysgYi9k
cml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9kcnYuaApAQCAtNDUyLDcgKzQ1Miw3IEBAIHN0cnVjdCBz
Z190YWJsZSAqcXhsX2dlbV9wcmltZV9nZXRfc2dfdGFibGUoc3RydWN0IGRybV9nZW1fb2JqZWN0
ICpvYmopOwogc3RydWN0IGRybV9nZW1fb2JqZWN0ICpxeGxfZ2VtX3ByaW1lX2ltcG9ydF9zZ190
YWJsZSgKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50
ICphdHRhY2gsCiAJc3RydWN0IHNnX3RhYmxlICpzZ3QpOwotdm9pZCAqcXhsX2dlbV9wcmltZV92
bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKTsKK3ZvaWQgKnF4bF9nZW1fcHJpbWVfdm1h
cChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgYm9vbCAqaXNfaW9tZW0pOwogdm9pZCBxeGxf
Z2VtX3ByaW1lX3Z1bm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgdm9pZCAqdmFkZHIp
OwogaW50IHF4bF9nZW1fcHJpbWVfbW1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwKIAkJ
CQlzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vcXhsL3F4bF9wcmltZS5jIGIvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfcHJpbWUuYwppbmRl
eCBlNjdlYmJkZWI3ZjIuLjliMmQ0MDE1ZTBkNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L3F4bC9xeGxfcHJpbWUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9wcmltZS5jCkBA
IC01NCwxMyArNTQsMTMgQEAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICpxeGxfZ2VtX3ByaW1lX2lt
cG9ydF9zZ190YWJsZSgKIAlyZXR1cm4gRVJSX1BUUigtRU5PU1lTKTsKIH0KIAotdm9pZCAqcXhs
X2dlbV9wcmltZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKQordm9pZCAqcXhsX2dl
bV9wcmltZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBib29sICppc19pb21lbSkK
IHsKIAlzdHJ1Y3QgcXhsX2JvICpibyA9IGdlbV90b19xeGxfYm8ob2JqKTsKIAl2b2lkICpwdHI7
CiAJaW50IHJldDsKIAotCXJldCA9IHF4bF9ib19rbWFwKGJvLCAmcHRyLCBOVUxMKTsKKwlyZXQg
PSBxeGxfYm9fa21hcChibywgJnB0ciwgaXNfaW9tZW0pOwogCWlmIChyZXQgPCAwKQogCQlyZXR1
cm4gRVJSX1BUUihyZXQpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3Jh
ZGVvbl9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2Rydi5jCmluZGV4IDg4
OGUwZjM4NGM2MS4uN2Y5Y2ZmOWNiNTcyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFk
ZW9uL3JhZGVvbl9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9kcnYu
YwpAQCAtMTUzLDcgKzE1Myw3IEBAIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqcmFkZW9uX2dlbV9w
cmltZV9pbXBvcnRfc2dfdGFibGUoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJCQkJCQlzdHJ1
Y3Qgc2dfdGFibGUgKnNnKTsKIGludCByYWRlb25fZ2VtX3ByaW1lX3BpbihzdHJ1Y3QgZHJtX2dl
bV9vYmplY3QgKm9iaik7CiB2b2lkIHJhZGVvbl9nZW1fcHJpbWVfdW5waW4oc3RydWN0IGRybV9n
ZW1fb2JqZWN0ICpvYmopOwotdm9pZCAqcmFkZW9uX2dlbV9wcmltZV92bWFwKHN0cnVjdCBkcm1f
Z2VtX29iamVjdCAqb2JqKTsKK3ZvaWQgKnJhZGVvbl9nZW1fcHJpbWVfdm1hcChzdHJ1Y3QgZHJt
X2dlbV9vYmplY3QgKm9iaiwgYm9vbCAqaXNfaW9tZW0pOwogdm9pZCByYWRlb25fZ2VtX3ByaW1l
X3Z1bm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgdm9pZCAqdmFkZHIpOwogCiAvKiBh
dHB4IGhhbmRsZXIgKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9u
X3ByaW1lLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9wcmltZS5jCmluZGV4IGI5
MDZlOGZiZDVmMy4uMjAxOWI1NDI3N2U0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFk
ZW9uL3JhZGVvbl9wcmltZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3By
aW1lLmMKQEAgLTM5LDcgKzM5LDcgQEAgc3RydWN0IHNnX3RhYmxlICpyYWRlb25fZ2VtX3ByaW1l
X2dldF9zZ190YWJsZShzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKIAlyZXR1cm4gZHJtX3By
aW1lX3BhZ2VzX3RvX3NnKGJvLT50Ym8udHRtLT5wYWdlcywgbnBhZ2VzKTsKIH0KIAotdm9pZCAq
cmFkZW9uX2dlbV9wcmltZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKQordm9pZCAq
cmFkZW9uX2dlbV9wcmltZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBib29sICpp
c19pb21lbSkKIHsKIAlzdHJ1Y3QgcmFkZW9uX2JvICpibyA9IGdlbV90b19yYWRlb25fYm8ob2Jq
KTsKIAlpbnQgcmV0OwpAQCAtNDksNiArNDksOCBAQCB2b2lkICpyYWRlb25fZ2VtX3ByaW1lX3Zt
YXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCiAJaWYgKHJldCkKIAkJcmV0dXJuIEVSUl9Q
VFIocmV0KTsKIAorCWlmIChpc19pb21lbSkKKwkJcmV0dXJuIHR0bV9rbWFwX29ial92aXJ0dWFs
KCZiby0+ZG1hX2J1Zl92bWFwLCBpc19pb21lbSk7CiAJcmV0dXJuIGJvLT5kbWFfYnVmX3ZtYXAu
dmlydHVhbDsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3RpbnkvZ20xMnUzMjAu
YyBiL2RyaXZlcnMvZ3B1L2RybS90aW55L2dtMTJ1MzIwLmMKaW5kZXggOTRmYjFmNTkzNTY0Li40
YzRiMTkwNGUwNDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90aW55L2dtMTJ1MzIwLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL3RpbnkvZ20xMnUzMjAuYwpAQCAtMjc4LDcgKzI3OCw3IEBA
IHN0YXRpYyB2b2lkIGdtMTJ1MzIwX2NvcHlfZmJfdG9fYmxvY2tzKHN0cnVjdCBnbTEydTMyMF9k
ZXZpY2UgKmdtMTJ1MzIwKQogCXkxID0gZ20xMnUzMjAtPmZiX3VwZGF0ZS5yZWN0LnkxOwogCXky
ID0gZ20xMnUzMjAtPmZiX3VwZGF0ZS5yZWN0LnkyOwogCi0JdmFkZHIgPSBkcm1fZ2VtX3NobWVt
X3ZtYXAoZmItPm9ialswXSk7CisJdmFkZHIgPSBkcm1fZ2VtX3NobWVtX3ZtYXAoZmItPm9ialsw
XSwgTlVMTCk7CiAJaWYgKElTX0VSUih2YWRkcikpIHsKIAkJR00xMlUzMjBfRVJSKCJmYWlsZWQg
dG8gdm1hcCBmYjogJWxkXG4iLCBQVFJfRVJSKHZhZGRyKSk7CiAJCWdvdG8gcHV0X2ZiOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfYm8uYyBiL2RyaXZlcnMvZ3B1L2RybS92
YzQvdmM0X2JvLmMKaW5kZXggNzJkMzBkOTBiODU2Li5jMDM0NjJjZWYwMWMgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2JvLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZjNC92
YzRfYm8uYwpAQCAtNzY3LDcgKzc2Nyw3IEBAIGludCB2YzRfcHJpbWVfbW1hcChzdHJ1Y3QgZHJt
X2dlbV9vYmplY3QgKm9iaiwgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpCiAJcmV0dXJuIGRy
bV9nZW1fY21hX3ByaW1lX21tYXAob2JqLCB2bWEpOwogfQogCi12b2lkICp2YzRfcHJpbWVfdm1h
cChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKK3ZvaWQgKnZjNF9wcmltZV92bWFwKHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqb2JqLCBib29sICppc19pb21lbSkKIHsKIAlzdHJ1Y3QgdmM0X2Jv
ICpibyA9IHRvX3ZjNF9ibyhvYmopOwogCkBAIC03NzYsNyArNzc2LDcgQEAgdm9pZCAqdmM0X3By
aW1lX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCiAJCXJldHVybiBFUlJfUFRSKC1F
SU5WQUwpOwogCX0KIAotCXJldHVybiBkcm1fZ2VtX2NtYV9wcmltZV92bWFwKG9iaik7CisJcmV0
dXJuIGRybV9nZW1fY21hX3ByaW1lX3ZtYXAob2JqLCBpc19pb21lbSk7CiB9CiAKIHN0cnVjdCBk
cm1fZ2VtX29iamVjdCAqCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kcnYu
aCBiL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2Rydi5oCmluZGV4IDY2MjdiMjBjOTllOS4uYzg0
YTdlYWYxZjNlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kcnYuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kcnYuaApAQCAtNzMzLDcgKzczMyw3IEBAIGludCB2
YzRfcHJpbWVfbW1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgc3RydWN0IHZtX2FyZWFf
c3RydWN0ICp2bWEpOwogc3RydWN0IGRybV9nZW1fb2JqZWN0ICp2YzRfcHJpbWVfaW1wb3J0X3Nn
X3RhYmxlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJCQkJCQkgc3RydWN0IGRtYV9idWZfYXR0
YWNobWVudCAqYXR0YWNoLAogCQkJCQkJIHN0cnVjdCBzZ190YWJsZSAqc2d0KTsKLXZvaWQgKnZj
NF9wcmltZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKTsKK3ZvaWQgKnZjNF9wcmlt
ZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBib29sICppc19pb21lbSk7CiBpbnQg
dmM0X2JvX2NhY2hlX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldik7CiB2b2lkIHZjNF9ib19j
YWNoZV9kZXN0cm95KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwogaW50IHZjNF9ib19pbmNfdXNl
Y250KHN0cnVjdCB2YzRfYm8gKmJvKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92Z2Vt
L3ZnZW1fZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vdmdlbS92Z2VtX2Rydi5jCmluZGV4IDViZDYw
ZGVkM2Q4MS4uYjk5MWNmY2UzZDkxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmdlbS92
Z2VtX2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92Z2VtL3ZnZW1fZHJ2LmMKQEAgLTM3OSw3
ICszNzksNyBAQCBzdGF0aWMgc3RydWN0IGRybV9nZW1fb2JqZWN0ICp2Z2VtX3ByaW1lX2ltcG9y
dF9zZ190YWJsZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCXJldHVybiAmb2JqLT5iYXNlOwog
fQogCi1zdGF0aWMgdm9pZCAqdmdlbV9wcmltZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAq
b2JqKQorc3RhdGljIHZvaWQgKnZnZW1fcHJpbWVfdm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3Qg
Km9iaiwgYm9vbCAqaXNfaW9tZW0pCiB7CiAJc3RydWN0IGRybV92Z2VtX2dlbV9vYmplY3QgKmJv
ID0gdG9fdmdlbV9ibyhvYmopOwogCWxvbmcgbl9wYWdlcyA9IG9iai0+c2l6ZSA+PiBQQUdFX1NI
SUZUOwpAQCAtMzg5LDYgKzM4OSw5IEBAIHN0YXRpYyB2b2lkICp2Z2VtX3ByaW1lX3ZtYXAoc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCiAJaWYgKElTX0VSUihwYWdlcykpCiAJCXJldHVybiBO
VUxMOwogCisJaWYgKGlzX2lvbWVtKQorCQkqaXNfaW9tZW0gPSBmYWxzZTsKKwogCXJldHVybiB2
bWFwKHBhZ2VzLCBuX3BhZ2VzLCAwLCBwZ3Byb3Rfd3JpdGVjb21iaW5lKFBBR0VfS0VSTkVMKSk7
CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS94ZW4veGVuX2RybV9mcm9udF9nZW0u
YyBiL2RyaXZlcnMvZ3B1L2RybS94ZW4veGVuX2RybV9mcm9udF9nZW0uYwppbmRleCBmMGI4NWUw
OTQxMTEuLmIzYzNiYTY2MWYzOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3hlbi94ZW5f
ZHJtX2Zyb250X2dlbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS94ZW4veGVuX2RybV9mcm9udF9n
ZW0uYwpAQCAtMjcyLDEzICsyNzIsMTcgQEAgaW50IHhlbl9kcm1fZnJvbnRfZ2VtX21tYXAoc3Ry
dWN0IGZpbGUgKmZpbHAsIHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hKQogCXJldHVybiBnZW1f
bW1hcF9vYmooeGVuX29iaiwgdm1hKTsKIH0KIAotdm9pZCAqeGVuX2RybV9mcm9udF9nZW1fcHJp
bWVfdm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdlbV9vYmopCit2b2lkICp4ZW5fZHJtX2Zy
b250X2dlbV9wcmltZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqZ2VtX29iaiwKKwkJCQkg
ICBib29sICppc19pb21lbSkKIHsKIAlzdHJ1Y3QgeGVuX2dlbV9vYmplY3QgKnhlbl9vYmogPSB0
b194ZW5fZ2VtX29iaihnZW1fb2JqKTsKIAogCWlmICgheGVuX29iai0+cGFnZXMpCiAJCXJldHVy
biBOVUxMOwogCisJaWYgKGlzX2lvbWVtKQorCQkqaXNfaW9tZW0gPSBmYWxzZTsKKwogCS8qIFBs
ZWFzZSBzZWUgY29tbWVudCBpbiBnZW1fbW1hcF9vYmogb24gbWFwcGluZyBhbmQgYXR0cmlidXRl
cy4gKi8KIAlyZXR1cm4gdm1hcCh4ZW5fb2JqLT5wYWdlcywgeGVuX29iai0+bnVtX3BhZ2VzLAog
CQkgICAgVk1fTUFQLCBQQUdFX0tFUk5FTCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
eGVuL3hlbl9kcm1fZnJvbnRfZ2VtLmggYi9kcml2ZXJzL2dwdS9kcm0veGVuL3hlbl9kcm1fZnJv
bnRfZ2VtLmgKaW5kZXggYTM5Njc1ZmEzMWIyLi5hZGNmM2Q4MDljNzUgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS94ZW4veGVuX2RybV9mcm9udF9nZW0uaAorKysgYi9kcml2ZXJzL2dwdS9k
cm0veGVuL3hlbl9kcm1fZnJvbnRfZ2VtLmgKQEAgLTM0LDcgKzM0LDggQEAgdm9pZCB4ZW5fZHJt
X2Zyb250X2dlbV9mcmVlX29iamVjdF91bmxvY2tlZChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdl
bV9vYmopOwogCiBpbnQgeGVuX2RybV9mcm9udF9nZW1fbW1hcChzdHJ1Y3QgZmlsZSAqZmlscCwg
c3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpOwogCi12b2lkICp4ZW5fZHJtX2Zyb250X2dlbV9w
cmltZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqZ2VtX29iaik7Cit2b2lkICp4ZW5fZHJt
X2Zyb250X2dlbV9wcmltZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqZ2VtX29iaiwKKwkJ
CQkgICBib29sICppc19pb21lbSk7CiAKIHZvaWQgeGVuX2RybV9mcm9udF9nZW1fcHJpbWVfdnVu
bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqZ2VtX29iaiwKIAkJCQkgICAgdm9pZCAqdmFkZHIp
OwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2Rydi5oIGIvaW5jbHVkZS9kcm0vZHJtX2Ry
di5oCmluZGV4IGNmMTM0NzA4MTBhNS4uNjYyYzVkNWRmZDA1IDEwMDY0NAotLS0gYS9pbmNsdWRl
L2RybS9kcm1fZHJ2LmgKKysrIGIvaW5jbHVkZS9kcm0vZHJtX2Rydi5oCkBAIC02MzEsNyArNjMx
LDcgQEAgc3RydWN0IGRybV9kcml2ZXIgewogCSAqIERlcHJlY2F0ZWQgdm1hcCBob29rIGZvciBH
RU0gZHJpdmVycy4gUGxlYXNlIHVzZQogCSAqICZkcm1fZ2VtX29iamVjdF9mdW5jcy52bWFwIGlu
c3RlYWQuCiAJICovCi0Jdm9pZCAqKCpnZW1fcHJpbWVfdm1hcCkoc3RydWN0IGRybV9nZW1fb2Jq
ZWN0ICpvYmopOworCXZvaWQgKigqZ2VtX3ByaW1lX3ZtYXApKHN0cnVjdCBkcm1fZ2VtX29iamVj
dCAqb2JqLCBib29sICppc19pb21lbSk7CiAKIAkvKioKIAkgKiBAZ2VtX3ByaW1lX3Z1bm1hcDoK
ZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9nZW0uaCBiL2luY2x1ZGUvZHJtL2RybV9nZW0u
aAppbmRleCBlNzFmNzVhMmFiNTcuLmVkYzczYjY4NmM2MCAxMDA2NDQKLS0tIGEvaW5jbHVkZS9k
cm0vZHJtX2dlbS5oCisrKyBiL2luY2x1ZGUvZHJtL2RybV9nZW0uaApAQCAtMTM4LDcgKzEzOCw3
IEBAIHN0cnVjdCBkcm1fZ2VtX29iamVjdF9mdW5jcyB7CiAJICoKIAkgKiBUaGlzIGNhbGxiYWNr
IGlzIG9wdGlvbmFsLgogCSAqLwotCXZvaWQgKigqdm1hcCkoc3RydWN0IGRybV9nZW1fb2JqZWN0
ICpvYmopOworCXZvaWQgKigqdm1hcCkoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIGJvb2wg
KmlzX2lvbWVtKTsKIAogCS8qKgogCSAqIEB2dW5tYXA6CmRpZmYgLS1naXQgYS9pbmNsdWRlL2Ry
bS9kcm1fZ2VtX2NtYV9oZWxwZXIuaCBiL2luY2x1ZGUvZHJtL2RybV9nZW1fY21hX2hlbHBlci5o
CmluZGV4IDk0N2FjOTVlYjI0YS4uNjlmZGQxOGRjN2IyIDEwMDY0NAotLS0gYS9pbmNsdWRlL2Ry
bS9kcm1fZ2VtX2NtYV9oZWxwZXIuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fZ2VtX2NtYV9oZWxw
ZXIuaApAQCAtMTAzLDcgKzEwMyw3IEBAIGRybV9nZW1fY21hX3ByaW1lX2ltcG9ydF9zZ190YWJs
ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCSAgc3RydWN0IHNnX3RhYmxlICpzZ3QpOwog
aW50IGRybV9nZW1fY21hX3ByaW1lX21tYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosCiAJ
CQkgICBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSk7Ci12b2lkICpkcm1fZ2VtX2NtYV9wcmlt
ZV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKTsKK3ZvaWQgKmRybV9nZW1fY21hX3By
aW1lX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIGJvb2wgKmlzX2lvbWVtKTsKIHZv
aWQgZHJtX2dlbV9jbWFfcHJpbWVfdnVubWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCB2
b2lkICp2YWRkcik7CiAKIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqCmRpZmYgLS1naXQgYS9pbmNs
dWRlL2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5oIGIvaW5jbHVkZS9kcm0vZHJtX2dlbV9zaG1l
bV9oZWxwZXIuaAppbmRleCA2NzQ4Mzc5YTBiNDQuLmRkYjU0YWExYWMxYSAxMDA2NDQKLS0tIGEv
aW5jbHVkZS9kcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIuaAorKysgYi9pbmNsdWRlL2RybS9kcm1f
Z2VtX3NobWVtX2hlbHBlci5oCkBAIC05NSw3ICs5NSw3IEBAIGludCBkcm1fZ2VtX3NobWVtX2dl
dF9wYWdlcyhzdHJ1Y3QgZHJtX2dlbV9zaG1lbV9vYmplY3QgKnNobWVtKTsKIHZvaWQgZHJtX2dl
bV9zaG1lbV9wdXRfcGFnZXMoc3RydWN0IGRybV9nZW1fc2htZW1fb2JqZWN0ICpzaG1lbSk7CiBp
bnQgZHJtX2dlbV9zaG1lbV9waW4oc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopOwogdm9pZCBk
cm1fZ2VtX3NobWVtX3VucGluKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKTsKLXZvaWQgKmRy
bV9nZW1fc2htZW1fdm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaik7Cit2b2lkICpkcm1f
Z2VtX3NobWVtX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIGJvb2wgKmlzX2lvbWVt
KTsKIHZvaWQgZHJtX2dlbV9zaG1lbV92dW5tYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmos
IHZvaWQgKnZhZGRyKTsKIAogaW50IGRybV9nZW1fc2htZW1fbWFkdmlzZShzdHJ1Y3QgZHJtX2dl
bV9vYmplY3QgKm9iaiwgaW50IG1hZHYpOwotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1k
ZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
