Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AB24EE7582
	for <lists+dri-devel@lfdr.de>; Mon, 28 Oct 2019 16:49:54 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A8ABC6E961;
	Mon, 28 Oct 2019 15:49:50 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 751BE6E95A
 for <dri-devel@lists.freedesktop.org>; Mon, 28 Oct 2019 15:49:34 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id BE221B5AA;
 Mon, 28 Oct 2019 15:49:31 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: airlied@redhat.com, daniel@ffwll.ch, kraxel@redhat.com, sam@ravnborg.org,
 chen@aspeedtech.com
Subject: [PATCH 5/9] drm/ast: Split ast_set_vbios_mode_info()
Date: Mon, 28 Oct 2019 16:49:24 +0100
Message-Id: <20191028154928.4058-6-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191028154928.4058-1-tzimmermann@suse.de>
References: <20191028154928.4058-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGltcGxlbWVudGF0aW9uIG9mIGFzdF9zZXRfdmJpb3NfbW9kZSgpIGNvbnZlcnRzIGEgRFJN
IGRpc3BsYXkgbW9kZQphbmQgZnJhbWVidWZmZXIgaW50byBhbiBhZGp1c3RlZCBtb2RlIGFuZCBz
dG9yZXMgaW5mb3JtYXRpb24gZm9yIHRoZQp2aWRlbyBCSU9TIHRvIHNldmVyYWwgc2NyYXRjaCBy
ZWdzaXRlcnMuCgpIZXJlIHdlIHNwbGl0IHRoZSBmdW5jdGlvbiBpbnRvIGluZGl2aWR1YWwgZnVu
Y3Rpb25zIHRoYXQgZG8gdGhlCmNvbnZlcnNpb24sIHNldCB0aGUgVkJJT1MgbW9kZSBpbmZvcm1h
dGlvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uLgpUaGlzIG1ha2VzIGl0IGNvbXBhdGlibGUgd2l0
aCBzdXBwb3J0IGZvciBwcmltYXJ5IHBsYW5lcyBhbmQgYXRvbWljCm1vZGVzZXR0aW5nLgoKU2ln
bmVkLW9mZi1ieTogVGhvbWFzIFppbW1lcm1hbm4gPHR6aW1tZXJtYW5uQHN1c2UuZGU+Ci0tLQog
ZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jIHwgMTExICsrKysrKysrKysrKysrKysrKysr
Ky0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDcyIGluc2VydGlvbnMoKyksIDM5IGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X21vZGUuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9hc3QvYXN0X21vZGUuYwppbmRleCA1ZmViNjg3MTkxZTAuLmM0YzlmY2Ew
ZjAwYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9hc3QvYXN0X21vZGUuYwpAQCAtODIsMTMgKzgyLDEyIEBAIHN0YXRpYyB2
b2lkIGFzdF9jcnRjX2xvYWRfbHV0KHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKIAkJYXN0X2xvYWRf
cGFsZXR0ZV9pbmRleChhc3QsIGksICpyKysgPj4gOCwgKmcrKyA+PiA4LCAqYisrID4+IDgpOwog
fQogCi1zdGF0aWMgYm9vbCBhc3RfZ2V0X3ZiaW9zX21vZGVfaW5mbyhzdHJ1Y3QgZHJtX2NydGMg
KmNydGMsIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAorc3RhdGljIGJvb2wgYXN0X2dl
dF92Ymlvc19tb2RlX2luZm8oY29uc3Qgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsCisJCQkJ
ICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAogCQkJCSAgICBzdHJ1Y3Qg
ZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSwKIAkJCQkgICAgc3RydWN0IGFzdF92Ymlv
c19tb2RlX2luZm8gKnZiaW9zX21vZGUpCiB7Ci0Jc3RydWN0IGFzdF9wcml2YXRlICphc3QgPSBj
cnRjLT5kZXYtPmRldl9wcml2YXRlOwotCWNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZi
ID0gY3J0Yy0+cHJpbWFyeS0+ZmI7Ci0JdTMyIHJlZnJlc2hfcmF0ZV9pbmRleCA9IDAsIG1vZGVf
aWQsIGNvbG9yX2luZGV4LCByZWZyZXNoX3JhdGU7CisJdTMyIHJlZnJlc2hfcmF0ZV9pbmRleCA9
IDAsIHJlZnJlc2hfcmF0ZTsKIAljb25zdCBzdHJ1Y3QgYXN0X3ZiaW9zX2VuaHRhYmxlICpiZXN0
ID0gTlVMTDsKIAl1MzIgaGJvcmRlciwgdmJvcmRlcjsKIAlib29sIGNoZWNrX3N5bmM7CkBAIC05
NiwyMiArOTUsMTkgQEAgc3RhdGljIGJvb2wgYXN0X2dldF92Ymlvc19tb2RlX2luZm8oc3RydWN0
IGRybV9jcnRjICpjcnRjLCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW8KIAlzd2l0Y2ggKGZiLT5mb3Jt
YXQtPmNwcFswXSAqIDgpIHsKIAljYXNlIDg6CiAJCXZiaW9zX21vZGUtPnN0ZF90YWJsZSA9ICZ2
Ymlvc19zdGR0YWJsZVtWR0FNb2RlSW5kZXhdOwotCQljb2xvcl9pbmRleCA9IFZHQU1vZGVJbmRl
eCAtIDE7CiAJCWJyZWFrOwogCWNhc2UgMTY6CiAJCXZiaW9zX21vZGUtPnN0ZF90YWJsZSA9ICZ2
Ymlvc19zdGR0YWJsZVtIaUNNb2RlSW5kZXhdOwotCQljb2xvcl9pbmRleCA9IEhpQ01vZGVJbmRl
eDsKIAkJYnJlYWs7CiAJY2FzZSAyNDoKIAljYXNlIDMyOgogCQl2Ymlvc19tb2RlLT5zdGRfdGFi
bGUgPSAmdmJpb3Nfc3RkdGFibGVbVHJ1ZUNNb2RlSW5kZXhdOwotCQljb2xvcl9pbmRleCA9IFRy
dWVDTW9kZUluZGV4OwogCQlicmVhazsKIAlkZWZhdWx0OgogCQlyZXR1cm4gZmFsc2U7CiAJfQog
Ci0Jc3dpdGNoIChjcnRjLT5tb2RlLmNydGNfaGRpc3BsYXkpIHsKKwlzd2l0Y2ggKG1vZGUtPmNy
dGNfaGRpc3BsYXkpIHsKIAljYXNlIDY0MDoKIAkJdmJpb3NfbW9kZS0+ZW5oX3RhYmxlID0gJnJl
c182NDB4NDgwW3JlZnJlc2hfcmF0ZV9pbmRleF07CiAJCWJyZWFrOwpAQCAtMTIyLDcgKzExOCw3
IEBAIHN0YXRpYyBib29sIGFzdF9nZXRfdmJpb3NfbW9kZV9pbmZvKHN0cnVjdCBkcm1fY3J0YyAq
Y3J0Yywgc3RydWN0IGRybV9kaXNwbGF5X21vCiAJCXZiaW9zX21vZGUtPmVuaF90YWJsZSA9ICZy
ZXNfMTAyNHg3NjhbcmVmcmVzaF9yYXRlX2luZGV4XTsKIAkJYnJlYWs7CiAJY2FzZSAxMjgwOgot
CQlpZiAoY3J0Yy0+bW9kZS5jcnRjX3ZkaXNwbGF5ID09IDgwMCkKKwkJaWYgKG1vZGUtPmNydGNf
dmRpc3BsYXkgPT0gODAwKQogCQkJdmJpb3NfbW9kZS0+ZW5oX3RhYmxlID0gJnJlc18xMjgweDgw
MFtyZWZyZXNoX3JhdGVfaW5kZXhdOwogCQllbHNlCiAJCQl2Ymlvc19tb2RlLT5lbmhfdGFibGUg
PSAmcmVzXzEyODB4MTAyNFtyZWZyZXNoX3JhdGVfaW5kZXhdOwpAQCAtMTM0LDcgKzEzMCw3IEBA
IHN0YXRpYyBib29sIGFzdF9nZXRfdmJpb3NfbW9kZV9pbmZvKHN0cnVjdCBkcm1fY3J0YyAqY3J0
Yywgc3RydWN0IGRybV9kaXNwbGF5X21vCiAJCXZiaW9zX21vZGUtPmVuaF90YWJsZSA9ICZyZXNf
MTQ0MHg5MDBbcmVmcmVzaF9yYXRlX2luZGV4XTsKIAkJYnJlYWs7CiAJY2FzZSAxNjAwOgotCQlp
ZiAoY3J0Yy0+bW9kZS5jcnRjX3ZkaXNwbGF5ID09IDkwMCkKKwkJaWYgKG1vZGUtPmNydGNfdmRp
c3BsYXkgPT0gOTAwKQogCQkJdmJpb3NfbW9kZS0+ZW5oX3RhYmxlID0gJnJlc18xNjAweDkwMFty
ZWZyZXNoX3JhdGVfaW5kZXhdOwogCQllbHNlCiAJCQl2Ymlvc19tb2RlLT5lbmhfdGFibGUgPSAm
cmVzXzE2MDB4MTIwMFtyZWZyZXNoX3JhdGVfaW5kZXhdOwpAQCAtMTQzLDcgKzEzOSw3IEBAIHN0
YXRpYyBib29sIGFzdF9nZXRfdmJpb3NfbW9kZV9pbmZvKHN0cnVjdCBkcm1fY3J0YyAqY3J0Yywg
c3RydWN0IGRybV9kaXNwbGF5X21vCiAJCXZiaW9zX21vZGUtPmVuaF90YWJsZSA9ICZyZXNfMTY4
MHgxMDUwW3JlZnJlc2hfcmF0ZV9pbmRleF07CiAJCWJyZWFrOwogCWNhc2UgMTkyMDoKLQkJaWYg
KGNydGMtPm1vZGUuY3J0Y192ZGlzcGxheSA9PSAxMDgwKQorCQlpZiAobW9kZS0+Y3J0Y192ZGlz
cGxheSA9PSAxMDgwKQogCQkJdmJpb3NfbW9kZS0+ZW5oX3RhYmxlID0gJnJlc18xOTIweDEwODBb
cmVmcmVzaF9yYXRlX2luZGV4XTsKIAkJZWxzZQogCQkJdmJpb3NfbW9kZS0+ZW5oX3RhYmxlID0g
JnJlc18xOTIweDEyMDBbcmVmcmVzaF9yYXRlX2luZGV4XTsKQEAgLTE1NCw3ICsxNTAsOCBAQCBz
dGF0aWMgYm9vbCBhc3RfZ2V0X3ZiaW9zX21vZGVfaW5mbyhzdHJ1Y3QgZHJtX2NydGMgKmNydGMs
IHN0cnVjdCBkcm1fZGlzcGxheV9tbwogCiAJcmVmcmVzaF9yYXRlID0gZHJtX21vZGVfdnJlZnJl
c2gobW9kZSk7CiAJY2hlY2tfc3luYyA9IHZiaW9zX21vZGUtPmVuaF90YWJsZS0+ZmxhZ3MgJiBX
aWRlU2NyZWVuTW9kZTsKLQlkbyB7CisKKwl3aGlsZSAoMSkgewogCQljb25zdCBzdHJ1Y3QgYXN0
X3ZiaW9zX2VuaHRhYmxlICpsb29wID0gdmJpb3NfbW9kZS0+ZW5oX3RhYmxlOwogCiAJCXdoaWxl
IChsb29wLT5yZWZyZXNoX3JhdGUgIT0gMHhmZikgewpAQCAtMTc4LDcgKzE3NSw4IEBAIHN0YXRp
YyBib29sIGFzdF9nZXRfdmJpb3NfbW9kZV9pbmZvKHN0cnVjdCBkcm1fY3J0YyAqY3J0Yywgc3Ry
dWN0IGRybV9kaXNwbGF5X21vCiAJCWlmIChiZXN0IHx8ICFjaGVja19zeW5jKQogCQkJYnJlYWs7
CiAJCWNoZWNrX3N5bmMgPSAwOwotCX0gd2hpbGUgKDEpOworCX0KKwogCWlmIChiZXN0KQogCQl2
Ymlvc19tb2RlLT5lbmhfdGFibGUgPSBiZXN0OwogCkBAIC0yMDMsMzQgKzIwMSw2NSBAQCBzdGF0
aWMgYm9vbCBhc3RfZ2V0X3ZiaW9zX21vZGVfaW5mbyhzdHJ1Y3QgZHJtX2NydGMgKmNydGMsIHN0
cnVjdCBkcm1fZGlzcGxheV9tbwogCQkJCQkgdmJpb3NfbW9kZS0+ZW5oX3RhYmxlLT52ZnAgKwog
CQkJCQkgdmJpb3NfbW9kZS0+ZW5oX3RhYmxlLT52c3luYyk7CiAKLQlyZWZyZXNoX3JhdGVfaW5k
ZXggPSB2Ymlvc19tb2RlLT5lbmhfdGFibGUtPnJlZnJlc2hfcmF0ZV9pbmRleDsKLQltb2RlX2lk
ID0gdmJpb3NfbW9kZS0+ZW5oX3RhYmxlLT5tb2RlX2lkOworCXJldHVybiB0cnVlOworfQogCi0J
aWYgKGFzdC0+Y2hpcCA9PSBBU1QxMTgwKSB7Ci0JCS8qIFRPRE8gMTE4MCAqLwotCX0gZWxzZSB7
Ci0JCWFzdF9zZXRfaW5kZXhfcmVnKGFzdCwgQVNUX0lPX0NSVENfUE9SVCwgMHg4YywgKHU4KSgo
Y29sb3JfaW5kZXggJiAweGYpIDw8IDQpKTsKLQkJYXN0X3NldF9pbmRleF9yZWcoYXN0LCBBU1Rf
SU9fQ1JUQ19QT1JULCAweDhkLCByZWZyZXNoX3JhdGVfaW5kZXggJiAweGZmKTsKLQkJYXN0X3Nl
dF9pbmRleF9yZWcoYXN0LCBBU1RfSU9fQ1JUQ19QT1JULCAweDhlLCBtb2RlX2lkICYgMHhmZik7
Ci0KLQkJYXN0X3NldF9pbmRleF9yZWcoYXN0LCBBU1RfSU9fQ1JUQ19QT1JULCAweDkxLCAweDAw
KTsKLQkJaWYgKHZiaW9zX21vZGUtPmVuaF90YWJsZS0+ZmxhZ3MgJiBOZXdNb2RlSW5mbykgewot
CQkJYXN0X3NldF9pbmRleF9yZWcoYXN0LCBBU1RfSU9fQ1JUQ19QT1JULCAweDkxLCAweGE4KTsK
LQkJCWFzdF9zZXRfaW5kZXhfcmVnKGFzdCwgQVNUX0lPX0NSVENfUE9SVCwgMHg5MiwKLQkJCQkJ
ICBmYi0+Zm9ybWF0LT5jcHBbMF0gKiA4KTsKLQkJCWFzdF9zZXRfaW5kZXhfcmVnKGFzdCwgQVNU
X0lPX0NSVENfUE9SVCwgMHg5MywgYWRqdXN0ZWRfbW9kZS0+Y2xvY2sgLyAxMDAwKTsKLQkJCWFz
dF9zZXRfaW5kZXhfcmVnKGFzdCwgQVNUX0lPX0NSVENfUE9SVCwgMHg5NCwgYWRqdXN0ZWRfbW9k
ZS0+Y3J0Y19oZGlzcGxheSk7Ci0JCQlhc3Rfc2V0X2luZGV4X3JlZyhhc3QsIEFTVF9JT19DUlRD
X1BPUlQsIDB4OTUsIGFkanVzdGVkX21vZGUtPmNydGNfaGRpc3BsYXkgPj4gOCk7Ci0KLQkJCWFz
dF9zZXRfaW5kZXhfcmVnKGFzdCwgQVNUX0lPX0NSVENfUE9SVCwgMHg5NiwgYWRqdXN0ZWRfbW9k
ZS0+Y3J0Y192ZGlzcGxheSk7Ci0JCQlhc3Rfc2V0X2luZGV4X3JlZyhhc3QsIEFTVF9JT19DUlRD
X1BPUlQsIDB4OTcsIGFkanVzdGVkX21vZGUtPmNydGNfdmRpc3BsYXkgPj4gOCk7Ci0JCX0KK3N0
YXRpYyB2b2lkIGFzdF9zZXRfdmJpb3NfY29sb3JfcmVnKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywK
KwkJCQkgICAgY29uc3Qgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsCisJCQkJICAgIGNvbnN0
IHN0cnVjdCBhc3RfdmJpb3NfbW9kZV9pbmZvICp2Ymlvc19tb2RlKQoreworCXN0cnVjdCBhc3Rf
cHJpdmF0ZSAqYXN0ID0gY3J0Yy0+ZGV2LT5kZXZfcHJpdmF0ZTsKKwl1MzIgY29sb3JfaW5kZXg7
CisKKwlzd2l0Y2ggKGZiLT5mb3JtYXQtPmNwcFswXSkgeworCWNhc2UgMToKKwkJY29sb3JfaW5k
ZXggPSBWR0FNb2RlSW5kZXggLSAxOworCQlicmVhazsKKwljYXNlIDI6CisJCWNvbG9yX2luZGV4
ID0gSGlDTW9kZUluZGV4OworCQlicmVhazsKKwljYXNlIDM6CisJY2FzZSA0OgorCQljb2xvcl9p
bmRleCA9IFRydWVDTW9kZUluZGV4OworCWRlZmF1bHQ6CisJCXJldHVybjsKIAl9CiAKLQlyZXR1
cm4gdHJ1ZTsKKwlhc3Rfc2V0X2luZGV4X3JlZyhhc3QsIEFTVF9JT19DUlRDX1BPUlQsIDB4OGMs
ICh1OCkoKGNvbG9yX2luZGV4ICYgMHgwZikgPDwgNCkpOworCisJYXN0X3NldF9pbmRleF9yZWco
YXN0LCBBU1RfSU9fQ1JUQ19QT1JULCAweDkxLCAweDAwKTsKKworCWlmICh2Ymlvc19tb2RlLT5l
bmhfdGFibGUtPmZsYWdzICYgTmV3TW9kZUluZm8pIHsKKwkJYXN0X3NldF9pbmRleF9yZWcoYXN0
LCBBU1RfSU9fQ1JUQ19QT1JULCAweDkxLCAweGE4KTsKKwkJYXN0X3NldF9pbmRleF9yZWcoYXN0
LCBBU1RfSU9fQ1JUQ19QT1JULCAweDkyLCBmYi0+Zm9ybWF0LT5jcHBbMF0gKiA4KTsKKwl9Cit9
CisKK3N0YXRpYyB2b2lkIGFzdF9zZXRfdmJpb3NfbW9kZV9yZWcoc3RydWN0IGRybV9jcnRjICpj
cnRjLAorCQkJCSAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2Rl
LAorCQkJCSAgIGNvbnN0IHN0cnVjdCBhc3RfdmJpb3NfbW9kZV9pbmZvICp2Ymlvc19tb2RlKQor
eworCXN0cnVjdCBhc3RfcHJpdmF0ZSAqYXN0ID0gY3J0Yy0+ZGV2LT5kZXZfcHJpdmF0ZTsKKwl1
MzIgcmVmcmVzaF9yYXRlX2luZGV4LCBtb2RlX2lkOworCisJcmVmcmVzaF9yYXRlX2luZGV4ID0g
dmJpb3NfbW9kZS0+ZW5oX3RhYmxlLT5yZWZyZXNoX3JhdGVfaW5kZXg7CisJbW9kZV9pZCA9IHZi
aW9zX21vZGUtPmVuaF90YWJsZS0+bW9kZV9pZDsKKworCWFzdF9zZXRfaW5kZXhfcmVnKGFzdCwg
QVNUX0lPX0NSVENfUE9SVCwgMHg4ZCwgcmVmcmVzaF9yYXRlX2luZGV4ICYgMHhmZik7CisJYXN0
X3NldF9pbmRleF9yZWcoYXN0LCBBU1RfSU9fQ1JUQ19QT1JULCAweDhlLCBtb2RlX2lkICYgMHhm
Zik7CiAKKwlhc3Rfc2V0X2luZGV4X3JlZyhhc3QsIEFTVF9JT19DUlRDX1BPUlQsIDB4OTEsIDB4
MDApOwogCisJaWYgKHZiaW9zX21vZGUtPmVuaF90YWJsZS0+ZmxhZ3MgJiBOZXdNb2RlSW5mbykg
eworCQlhc3Rfc2V0X2luZGV4X3JlZyhhc3QsIEFTVF9JT19DUlRDX1BPUlQsIDB4OTEsIDB4YTgp
OworCQlhc3Rfc2V0X2luZGV4X3JlZyhhc3QsIEFTVF9JT19DUlRDX1BPUlQsIDB4OTMsIGFkanVz
dGVkX21vZGUtPmNsb2NrIC8gMTAwMCk7CisJCWFzdF9zZXRfaW5kZXhfcmVnKGFzdCwgQVNUX0lP
X0NSVENfUE9SVCwgMHg5NCwgYWRqdXN0ZWRfbW9kZS0+Y3J0Y19oZGlzcGxheSk7CisJCWFzdF9z
ZXRfaW5kZXhfcmVnKGFzdCwgQVNUX0lPX0NSVENfUE9SVCwgMHg5NSwgYWRqdXN0ZWRfbW9kZS0+
Y3J0Y19oZGlzcGxheSA+PiA4KTsKKwkJYXN0X3NldF9pbmRleF9yZWcoYXN0LCBBU1RfSU9fQ1JU
Q19QT1JULCAweDk2LCBhZGp1c3RlZF9tb2RlLT5jcnRjX3ZkaXNwbGF5KTsKKwkJYXN0X3NldF9p
bmRleF9yZWcoYXN0LCBBU1RfSU9fQ1JUQ19QT1JULCAweDk3LCBhZGp1c3RlZF9tb2RlLT5jcnRj
X3ZkaXNwbGF5ID4+IDgpOworCX0KIH0KKwogc3RhdGljIHZvaWQgYXN0X3NldF9zdGRfcmVnKHN0
cnVjdCBkcm1fY3J0YyAqY3J0Yywgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCiAJCQkg
ICAgc3RydWN0IGFzdF92Ymlvc19tb2RlX2luZm8gKnZiaW9zX21vZGUpCiB7CkBAIC01ODEsMjAg
KzYxMCwyNCBAQCBzdGF0aWMgaW50IGFzdF9jcnRjX21vZGVfc2V0KHN0cnVjdCBkcm1fY3J0YyAq
Y3J0YywKIHsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gY3J0Yy0+ZGV2OwogCXN0cnVjdCBh
c3RfcHJpdmF0ZSAqYXN0ID0gY3J0Yy0+ZGV2LT5kZXZfcHJpdmF0ZTsKKwljb25zdCBzdHJ1Y3Qg
ZHJtX2ZyYW1lYnVmZmVyICpmYiA9IGNydGMtPnByaW1hcnktPmZiOwogCXN0cnVjdCBhc3RfdmJp
b3NfbW9kZV9pbmZvIHZiaW9zX21vZGU7Ci0JYm9vbCByZXQ7CisJYm9vbCBzdWNjOworCiAJaWYg
KGFzdC0+Y2hpcCA9PSBBU1QxMTgwKSB7CiAJCURSTV9FUlJPUigiQVNUIDExODAgbW9kZXNldHRp
bmcgbm90IHN1cHBvcnRlZFxuIik7CiAJCXJldHVybiAtRUlOVkFMOwogCX0KIAotCXJldCA9IGFz
dF9nZXRfdmJpb3NfbW9kZV9pbmZvKGNydGMsIG1vZGUsIGFkanVzdGVkX21vZGUsICZ2Ymlvc19t
b2RlKTsKLQlpZiAocmV0ID09IGZhbHNlKQorCXN1Y2MgPSBhc3RfZ2V0X3ZiaW9zX21vZGVfaW5m
byhmYiwgbW9kZSwgYWRqdXN0ZWRfbW9kZSwgJnZiaW9zX21vZGUpOworCWlmICghc3VjYykKIAkJ
cmV0dXJuIC1FSU5WQUw7CisKIAlhc3Rfb3Blbl9rZXkoYXN0KTsKIAorCWFzdF9zZXRfdmJpb3Nf
Y29sb3JfcmVnKGNydGMsIGZiLCAmdmJpb3NfbW9kZSk7CisJYXN0X3NldF92Ymlvc19tb2RlX3Jl
ZyhjcnRjLCBhZGp1c3RlZF9tb2RlLCAmdmJpb3NfbW9kZSk7CiAJYXN0X3NldF9pbmRleF9yZWco
YXN0LCBBU1RfSU9fQ1JUQ19QT1JULCAweGExLCAweDA2KTsKLQogCWFzdF9zZXRfc3RkX3JlZyhj
cnRjLCBhZGp1c3RlZF9tb2RlLCAmdmJpb3NfbW9kZSk7CiAJYXN0X3NldF9jcnRjX3JlZyhjcnRj
LCBhZGp1c3RlZF9tb2RlLCAmdmJpb3NfbW9kZSk7CiAJYXN0X3NldF9vZmZzZXRfcmVnKGNydGMp
OwotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2
ZWw=
