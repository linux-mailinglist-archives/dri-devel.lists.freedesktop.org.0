Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A80D182CA3
	for <lists+dri-devel@lfdr.de>; Tue,  6 Aug 2019 09:25:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7F70089EB4;
	Tue,  6 Aug 2019 07:24:38 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from onstation.org (onstation.org [52.200.56.107])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 03DA26E1E9;
 Tue,  6 Aug 2019 00:22:59 +0000 (UTC)
Received: from localhost.localdomain (c-98-239-145-235.hsd1.wv.comcast.net
 [98.239.145.235])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: masneyb)
 by onstation.org (Postfix) with ESMTPSA id 080F63E916;
 Tue,  6 Aug 2019 00:22:58 +0000 (UTC)
From: Brian Masney <masneyb@onstation.org>
To: agross@kernel.org, robdclark@gmail.com, sean@poorly.run,
 robh+dt@kernel.org, bjorn.andersson@linaro.org
Subject: [PATCH v5 4/7] firmware: qcom: scm: add support to restore secure
 config to qcm_scm-32
Date: Mon,  5 Aug 2019 20:22:26 -0400
Message-Id: <20190806002229.8304-5-masneyb@onstation.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190806002229.8304-1-masneyb@onstation.org>
References: <20190806002229.8304-1-masneyb@onstation.org>
X-Mailman-Approved-At: Tue, 06 Aug 2019 07:24:35 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=onstation.org; s=default; t=1565050978;
 bh=IQhXf+A0bqjtZ5xj4NWh6EORXhsS6v3VvILOTL0ar4c=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=UrNTAitJgUWYHDvxNeF52hjy+kLrncoVz5t7TjWnqsKkUa0EFYMJ53z3opQiw8B98
 /Q3jX7lUODkPSA6freeg67U5m55JCCB6pxDdwNxME1SMGtR19k1JrdFHeP13Yrm6wx
 5yLJt7N/G1SMaZj/u17a1xaLtrN+GmP5k12vX8Dc=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org, jonathan@marek.ca,
 airlied@linux.ie, linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, freedreno@lists.freedesktop.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9iIENsYXJrIDxyb2JkY2xhcmtAZ21haWwuY29tPgoKQWRkIHN1cHBvcnQgdG8gcmVz
dG9yZSB0aGUgc2VjdXJlIGNvbmZpZ3VyYXRpb24gZm9yIHFjbV9zY20tMzIuYy4gVGhpcwppcyBu
ZWVkZWQgYnkgdGhlIE9uIENoaXAgTUVNb3J5IChPQ01FTSkgdGhhdCBpcyBwcmVzZW50IG9uIHNv
bWUKU25hcGRyYWdvbiBkZXZpY2VzLgoKU2lnbmVkLW9mZi1ieTogUm9iIENsYXJrIDxyb2JkY2xh
cmtAZ21haWwuY29tPgpbbWFzbmV5YkBvbnN0YXRpb24ub3JnOiBwb3J0ZWQgdG8gbGF0ZXN0IGtl
cm5lbDsgc2V0IGN0eF9iYW5rX251bSB0bwogc3BhcmUgcGFyYW1ldGVyLl0KU2lnbmVkLW9mZi1i
eTogQnJpYW4gTWFzbmV5IDxtYXNuZXliQG9uc3RhdGlvbi5vcmc+Ci0tLQpDaGFuZ2VzIHNpbmNl
IHY0OgotIE5vbmUKCkNoYW5nZXMgc2luY2UgdjM6Ci0gTm9uZQoKQ2hhbmdlcyBzaW5jZSB2MjoK
LSBOb25lCgpDaGFuZ2VzIHNpbmNlIHYxOgotIFVzZSBleGlzdGluZyBfX3Fjb21fc2NtX3Jlc3Rv
cmVfc2VjX2NmZygpIGZ1bmN0aW9uIHN0dWIgaW4KICBxY29tX3NjbS0zMi5jIHRoYXQgd2FzIHVu
aW1wbGVtZW50ZWQKLSBTZXQgdGhlIGNmZy5jdHhfYmFua19udW0gdG8gdGhlIHNwYXJlIGZ1bmN0
aW9uIHBhcmFtZXRlci4gSXQgd2FzCiAgcHJldmlvdXNseSBzZXQgdG8gdGhlIGRldmljZV9pZC4K
CiBkcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLTMyLmMgfCAxNyArKysrKysrKysrKysrKysrLQog
ZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS5jICAgIHwgMTMgKysrKysrKysrKysrKwogaW5jbHVk
ZS9saW51eC9xY29tX3NjbS5oICAgICAgIHwgMTEgKysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdl
ZCwgNDAgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
ZmlybXdhcmUvcWNvbV9zY20tMzIuYyBiL2RyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20tMzIuYwpp
bmRleCA0YzI1MTRlNWUyNDkuLjVkOTBiN2Y1YWI1YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9maXJt
d2FyZS9xY29tX3NjbS0zMi5jCisrKyBiL2RyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20tMzIuYwpA
QCAtNjE3LDcgKzYxNywyMiBAQCBpbnQgX19xY29tX3NjbV9hc3NpZ25fbWVtKHN0cnVjdCBkZXZp
Y2UgKmRldiwgcGh5c19hZGRyX3QgbWVtX3JlZ2lvbiwKIGludCBfX3Fjb21fc2NtX3Jlc3RvcmVf
c2VjX2NmZyhzdHJ1Y3QgZGV2aWNlICpkZXYsIHUzMiBkZXZpY2VfaWQsCiAJCQkgICAgICAgdTMy
IHNwYXJlKQogewotCXJldHVybiAtRU5PREVWOworCXN0cnVjdCBtc21fc2NtX3NlY19jZmcgewor
CQlfX2xlMzIgaWQ7CisJCV9fbGUzMiBjdHhfYmFua19udW07CisJfSBjZmc7CisJaW50IHJldCwg
c2NtX3JldCA9IDA7CisKKwljZmcuaWQgPSBjcHVfdG9fbGUzMihkZXZpY2VfaWQpOworCWNmZy5j
dHhfYmFua19udW0gPSBjcHVfdG9fbGUzMihzcGFyZSk7CisKKwlyZXQgPSBxY29tX3NjbV9jYWxs
KGRldiwgUUNPTV9TQ01fU1ZDX01QLCBRQ09NX1NDTV9SRVNUT1JFX1NFQ19DRkcsCisJCQkgICAg
JmNmZywgc2l6ZW9mKGNmZyksICZzY21fcmV0LCBzaXplb2Yoc2NtX3JldCkpOworCisJaWYgKHJl
dCB8fCBzY21fcmV0KQorCQlyZXR1cm4gcmV0ID8gcmV0IDogLUVJTlZBTDsKKworCXJldHVybiAw
OwogfQogCiBpbnQgX19xY29tX3NjbV9pb21tdV9zZWN1cmVfcHRibF9zaXplKHN0cnVjdCBkZXZp
Y2UgKmRldiwgdTMyIHNwYXJlLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9maXJtd2FyZS9xY29tX3Nj
bS5jIGIvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS5jCmluZGV4IDdlMjg1ZmYzOTYxZC4uMjdj
MWQ5OGEzNGU2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMKKysrIGIv
ZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS5jCkBAIC0zNjcsNiArMzY3LDE5IEBAIHN0YXRpYyBj
b25zdCBzdHJ1Y3QgcmVzZXRfY29udHJvbF9vcHMgcWNvbV9zY21fcGFzX3Jlc2V0X29wcyA9IHsK
IAkuZGVhc3NlcnQgPSBxY29tX3NjbV9wYXNfcmVzZXRfZGVhc3NlcnQsCiB9OwogCisvKioKKyAq
IHFjb21fc2NtX3Jlc3RvcmVfc2VjX2NmZ19hdmFpbGFibGUoKSAtIENoZWNrIGlmIHNlY3VyZSBl
bnZpcm9ubWVudAorICogc3VwcG9ydHMgcmVzdG9yZSBzZWN1cml0eSBjb25maWcgaW50ZXJmYWNl
LgorICoKKyAqIFJldHVybiB0cnVlIGlmIHJlc3RvcmUtY2ZnIGludGVyZmFjZSBpcyBzdXBwb3J0
ZWQsIGZhbHNlIGlmIG5vdC4KKyAqLworYm9vbCBxY29tX3NjbV9yZXN0b3JlX3NlY19jZmdfYXZh
aWxhYmxlKHZvaWQpCit7CisJcmV0dXJuIF9fcWNvbV9zY21faXNfY2FsbF9hdmFpbGFibGUoX19z
Y20tPmRldiwgUUNPTV9TQ01fU1ZDX01QLAorCQkJCQkgICAgUUNPTV9TQ01fUkVTVE9SRV9TRUNf
Q0ZHKTsKK30KK0VYUE9SVF9TWU1CT0wocWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnX2F2YWlsYWJs
ZSk7CisKIGludCBxY29tX3NjbV9yZXN0b3JlX3NlY19jZmcodTMyIGRldmljZV9pZCwgdTMyIHNw
YXJlKQogewogCXJldHVybiBfX3Fjb21fc2NtX3Jlc3RvcmVfc2VjX2NmZyhfX3NjbS0+ZGV2LCBk
ZXZpY2VfaWQsIHNwYXJlKTsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvcWNvbV9zY20uaCBi
L2luY2x1ZGUvbGludXgvcWNvbV9zY20uaAppbmRleCBiNDliNzM0ZDY2MmMuLjA0MzgyZTE3OThl
NCAxMDA2NDQKLS0tIGEvaW5jbHVkZS9saW51eC9xY29tX3NjbS5oCisrKyBiL2luY2x1ZGUvbGlu
dXgvcWNvbV9zY20uaApAQCAtMzQsNiArMzQsMTYgQEAgZW51bSBxY29tX3NjbV9vY21lbV9jbGll
bnQgewogCVFDT01fU0NNX09DTUVNX0RFQlVHX0lELAogfTsKIAorZW51bSBxY29tX3NjbV9zZWNf
ZGV2X2lkIHsKKwlRQ09NX1NDTV9NRFNTX0RFVl9JRCAgICA9IDEsCisJUUNPTV9TQ01fT0NNRU1f
REVWX0lEICAgPSA1LAorCVFDT01fU0NNX1BDSUUwX0RFVl9JRCAgID0gMTEsCisJUUNPTV9TQ01f
UENJRTFfREVWX0lEICAgPSAxMiwKKwlRQ09NX1NDTV9HRlhfREVWX0lEICAgICA9IDE4LAorCVFD
T01fU0NNX1VGU19ERVZfSUQgICAgID0gMTksCisJUUNPTV9TQ01fSUNFX0RFVl9JRCAgICAgPSAy
MCwKK307CisKICNkZWZpbmUgUUNPTV9TQ01fVk1JRF9ITE9TICAgICAgIDB4MwogI2RlZmluZSBR
Q09NX1NDTV9WTUlEX01TU19NU0EgICAgMHhGCiAjZGVmaW5lIFFDT01fU0NNX1ZNSURfV0xBTiAg
ICAgICAweDE4CkBAIC03MCw2ICs4MCw3IEBAIGV4dGVybiBpbnQgcWNvbV9zY21fYXNzaWduX21l
bShwaHlzX2FkZHJfdCBtZW1fYWRkciwgc2l6ZV90IG1lbV9zeiwKIGV4dGVybiB2b2lkIHFjb21f
c2NtX2NwdV9wb3dlcl9kb3duKHUzMiBmbGFncyk7CiBleHRlcm4gdTMyIHFjb21fc2NtX2dldF92
ZXJzaW9uKHZvaWQpOwogZXh0ZXJuIGludCBxY29tX3NjbV9zZXRfcmVtb3RlX3N0YXRlKHUzMiBz
dGF0ZSwgdTMyIGlkKTsKK2V4dGVybiBib29sIHFjb21fc2NtX3Jlc3RvcmVfc2VjX2NmZ19hdmFp
bGFibGUodm9pZCk7CiBleHRlcm4gaW50IHFjb21fc2NtX3Jlc3RvcmVfc2VjX2NmZyh1MzIgZGV2
aWNlX2lkLCB1MzIgc3BhcmUpOwogZXh0ZXJuIGludCBxY29tX3NjbV9pb21tdV9zZWN1cmVfcHRi
bF9zaXplKHUzMiBzcGFyZSwgc2l6ZV90ICpzaXplKTsKIGV4dGVybiBpbnQgcWNvbV9zY21faW9t
bXVfc2VjdXJlX3B0YmxfaW5pdCh1NjQgYWRkciwgdTMyIHNpemUsIHUzMiBzcGFyZSk7Ci0tIAoy
LjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRy
aS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
