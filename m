Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id F043D2B174B
	for <lists+dri-devel@lfdr.de>; Fri, 13 Nov 2020 09:38:12 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 469966E436;
	Fri, 13 Nov 2020 08:38:03 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from hqnvemgate25.nvidia.com (hqnvemgate25.nvidia.com
 [216.228.121.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 427B66E102
 for <dri-devel@lists.freedesktop.org>; Thu, 12 Nov 2020 18:53:21 +0000 (UTC)
Received: from hqmail.nvidia.com (Not Verified[216.228.121.13]) by
 hqnvemgate25.nvidia.com (using TLS: TLSv1.2, AES256-SHA)
 id <B5fad849a0000>; Thu, 12 Nov 2020 10:53:14 -0800
Received: from [10.20.23.185] (10.124.1.5) by HQMAIL107.nvidia.com
 (172.20.187.13) with Microsoft SMTP Server (TLS) id 15.0.1473.3; Thu, 12 Nov
 2020 18:53:18 +0000
Subject: Re: [PATCH v4] platform/x86: Add new vga-switcheroo gmux driver for
 ACPI-driven muxes
To: Hans de Goede <hdegoede@redhat.com>, <platform-driver-x86@vger.kernel.org>
References: <c7dcb052-0ccf-dae3-49dd-1518f5ab182e@nvidia.com>
 <20200902173851.224368-1-ddadap@nvidia.com>
 <92f0b784-a931-2c45-a98c-789430d4c6e9@redhat.com>
From: Daniel Dadap <ddadap@nvidia.com>
Message-ID: <35147557-4fc1-be3f-8edc-ce6393144165@nvidia.com>
Date: Thu, 12 Nov 2020 12:53:15 -0600
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.12.0
MIME-Version: 1.0
In-Reply-To: <92f0b784-a931-2c45-a98c-789430d4c6e9@redhat.com>
Content-Language: en-US
X-Originating-IP: [10.124.1.5]
X-ClientProxiedBy: HQMAIL101.nvidia.com (172.20.187.10) To
 HQMAIL107.nvidia.com (172.20.187.13)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=nvidia.com; s=n1;
 t=1605207194; bh=vV9FLwyqX1AYWXt1/AYYw2ce2CINl2FFRj/lWhUbeUU=;
 h=Subject:To:CC:References:From:Message-ID:Date:User-Agent:
 MIME-Version:In-Reply-To:Content-Type:Content-Transfer-Encoding:
 Content-Language:X-Originating-IP:X-ClientProxiedBy;
 b=cm+/77aEPUbBLTagxEXwnp422Rizq1VniJsGyodlDSiTUms6FbfKY9Bok4VD2yZh+
 HZ7NG0PVtY7/ruqkgvIwmY+xsqBWixZ70gHY3rOZ5KirAD5uUQGFuiSOHynOUxQL/h
 KOXWK7TruSG5yBpfhHpKuURdQgDg09MW4V633yMb4mIvDt0F94JqwvdzSKSfneF4xY
 66iBvWfqiKtspyOx5KF+sPiCAAyCNxHHXypRQxti/Vrm2rM7YosP/AIF5GVrrbtcy+
 q1NYom93euwCn8CM+J8PvGh+FKXZpDzuUPj5wxkRbzItY5w/VhiMM2tmcCrZdE0UfP
 JddrnGGOzsvAA==
X-Mailman-Approved-At: Fri, 13 Nov 2020 08:38:02 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org, pobrn@protonmail.com, peter@lekensteyn.nl,
 dvhart@infradead.org, andy@infradead.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Ck9uIDExLzEwLzIwIDM6MjkgQU0sIEhhbnMgZGUgR29lZGUgd3JvdGU6Cj4gSGkgRGFuaWVsLAoK
CkhpIEhhbnMsCgoKPiBRdWljayBzZWxmIGludHJvOiBJIGhhdmUgdGFrZSBvdmVyIGRyaXZlcnMv
cGxhdGZvcm0veDg2Cj4gbWFpbnRhaW5lcnNoaXAgZnJvbSBBbmR5OyBhbmQgSSdtIHdvcmtpbmcg
bXkgd2F5IHRocm91Z2gKPiB0aGUgYmFja2xvZyBvZiBvbGQgcGF0Y2hlcyBpbiBwYXRjaHdvcms6
Cj4gaHR0cHM6Ly9wYXRjaHdvcmsua2VybmVsLm9yZy9wcm9qZWN0L3BsYXRmb3JtLWRyaXZlci14
ODYvbGlzdC8KCgpUaGFua3MgZm9yIHRoZSBpbnRyb2R1Y3Rpb24uIEkgYmVsaWV2ZSB3ZSBoYXZl
IGNvcnJlc3BvbmRlZCBpbiB0aGUgcGFzdCAKcmVnYXJkaW5nIG90aGVyIGlzc3Vlcy4gVGhhbmsg
eW91IGZvciBmb2xsb3dpbmcgdXAgb24gdGhpcyBwYXRjaCBzZXQuCgoKPiBPbiA5LzIvMjAgNzoz
OCBQTSwgRGFuaWVsIERhZGFwIHdyb3RlOgo+PiBTb21lIHVwY29taW5nIG5vdGVib29rIGRlc2ln
bnMgdXRpbGl6ZSBkaXNwbGF5IG11eGVzIGRyaXZlbiBieSBhCj4+IHBhaXIgb2YgQUNQSSBtZXRo
b2RzLCBNWERNIHRvIHF1ZXJ5IGFuZCBjb25maWd1cmUgdGhlIG9wZXJhdGlvbmFsCj4+IG1vZGUg
b2YgdGhlIG11eCAoaW50ZWdyYXRlZCBvbmx5LCBkaXNjcmV0ZSBvbmx5LCBoeWJyaWQgbm9uLW11
eGVkLAo+PiBoeWJyaWQgd2l0aCBkeW5hbWljIG11eCBzd2l0Y2hpbmcpLCBhbmQgTVhEUyB0byBx
dWVyeSBhbmQgc2V0IHRoZQo+PiBtdXggc3RhdGUgd2hlbiBydW5uaW5nIGluIGR5bmFtaWMgc3dp
dGNoIG1vZGUuCj4+Cj4+IEFkZCBhIHZnYS1zd2l0Y2hlcm9vIGRyaXZlciB0byBzdXBwb3J0IHN3
aXRjaGluZyB0aGUgbXV4IG9uIHN5c3RlbXMKPj4gd2l0aCB0aGUgQUNQSSBNWERNL01YRFMgaW50
ZXJmYWNlLiBUaGUgbXV4IG1vZGUgY2Fubm90IGJlIGNoYW5nZWQKPj4gZHluYW1pY2FsbHkgKGNh
bGxpbmcgTVhETSB0byBjaGFuZ2UgdGhlIG1vZGUgd29uJ3QgaGF2ZSBlZmZlY3QgdW50aWwKPj4g
dGhlIG5leHQgYm9vdCwgYW5kIGNhbGxpbmcgTVhETSB0byByZWFkIHRoZSBtdXggbW9kZSByZXR1
cm5zIHRoZQo+PiBhY3RpdmUgbW9kZSwgbm90IHRoZSBtb2RlIHRoYXQgd2lsbCBiZSBlbmFibGVk
IG9uIG5leHQgYm9vdCksIGFuZAo+PiBNWERTIG9ubHkgd29ya3Mgd2hlbiB0aGUgbXV4IG1vZGUg
aXMgc2V0IHRvIGR5bmFtaWMgc3dpdGNoLCBzbyB0aGlzCj4+IGRyaXZlciB3aWxsIGZhaWwgdG8g
bG9hZCB3aGVuIE1YRE0gcmVwb3J0cyBhbnkgbm9uLWR5bmFtaWMgbW9kZS4KPj4KPj4gVGhpcyBk
cml2ZXIgY3VycmVudGx5IG9ubHkgc3VwcG9ydHMgc3lzdGVtcyB3aXRoIEludGVsIGludGVncmF0
ZWQKPj4gZ3JhcGhpY3MgYW5kIE5WSURJQSBkaXNjcmV0ZSBncmFwaGljcy4gSXQgd2lsbCBuZWVk
IHRvIGJlIHVwZGF0ZWQgaWYKPj4gZGVzaWducyBhcmUgZGV2ZWxvcGVkIHVzaW5nIHRoZSBzYW1l
IGludGVyZmFjZXMgd2hpY2ggdXRpbGl6ZSBHUFVzCj4+IGZyb20gb3RoZXIgdmVuZG9ycy4KPj4K
Pj4gdjIsdjM6IG1pc2MuIGZpeGVzIHN1Z2dlc3RlZCBieSBCYXJuYWLDoXMgUMWRY3plIDxwb2Jy
bkBwcm90b25tYWlsLmNvbT4KPj4gdjQ6IG1pc2MuIGNoYW5nZXMgc3VnZ2VzdGVkIGJ5IEx1a2Fz
IFd1bm5lciA8bHVrYXNAd3VubmVyLmRlPgo+IEFjY29yZGluZyB0byB0aGUgZGlzY3Vzc2lvbiBh
cmNoaXZlZCBoZXJlOgo+IGh0dHBzOi8vcGF0Y2h3b3JrLmtlcm5lbC5vcmcvcHJvamVjdC9wbGF0
Zm9ybS1kcml2ZXIteDg2L3BhdGNoLzIwMjAwOTAyMTczODUxLjIyNDM2OC0xLWRkYWRhcEBudmlk
aWEuY29tLwo+Cj4gQW5keSBkaWQgYSByZXZpZXcgYW5kIHlvdSBwcm9taXNlZCBhIG5ldyB2ZXJz
aW9uLCBidXQgSSBkb24ndCBzZWUKPiBhIG5ld2VyIHZlcnNpb24gaW4gcGF0Y2h3b3JrLiBDYW4g
eW91IHBsZWFzZSBzdWJtaXQgYSBuZXcgdmVyc2lvbgo+IGFkZHJlc3NpbmcgQW5keSdzIHJlbWFy
a3MgPyBUaGVuIEkgd2lsbCByZXZpZXcgYW5kIG1lcmdlIHRoZSBuZXcKPiB2ZXJzaW9uLgo+Cj4g
SW4gdGhhdCBkaXNjdXNzaW9uIHlvdSBhbHNvIHByb21pc2VkIGEgbmV3IHZlcnNpb24gb2YgdGhp
cyBwYXRjaDoKPiBodHRwczovL3BhdGNod29yay5rZXJuZWwub3JnL3Byb2plY3QvcGxhdGZvcm0t
ZHJpdmVyLXg4Ni9wYXRjaC8yMDIwMDczMTIwMjE1NC4xMTM4Mi0xLWRkYWRhcEBudmlkaWEuY29t
Lwo+Cj4gU28gcGxlYXNlIGFsc28gc3VibWl0IGEgbmV3IHZlcnNpb24gb2YgdGhhdCBzZXJpZXMu
CgoKWW91IGFyZSByaWdodC4gSSBkbyBoYXZlIHVwZGF0ZWQgdmVyc2lvbnMgb2YgdGhvc2UgcGF0
Y2hlcywgYnV0IGVub3VnaCAKdGltZSBoYXMgcGFzc2VkIHRoYXQgSSBkbyBub3QgcmVjYWxsIGlm
IEkgdGVzdGVkIHRoZW0gYW5kIGZhaWxlZCB0byAKZm9sbG93IHVwIG9uIHRoZSBlLW1haWwgdGhy
ZWFkcywgb3IgaGFkIHlldCB0byB0ZXN0IHRoZW0uIFNvIEkgd2lsbCB0ZXN0IAp0aGUgdXBkYXRl
ZCBwYXRjaGVzIGFuZCBnZXQgdGhlbSB0byB5b3UuIFRoYW5rcy4KCgo+IFRoYW5rcyAmIFJlZ2Fy
ZHMsCj4KPiBIYW5zCj4KPgo+Cj4KPgo+PiBTaWduZWQtb2ZmLWJ5OiBEYW5pZWwgRGFkYXAgPGRk
YWRhcEBudmlkaWEuY29tPgo+PiAtLS0KPj4gICBNQUlOVEFJTkVSUyAgICAgICAgICAgICAgICAg
ICAgICB8ICAgNiArCj4+ICAgZHJpdmVycy9wbGF0Zm9ybS94ODYvS2NvbmZpZyAgICAgfCAgIDkg
KysKPj4gICBkcml2ZXJzL3BsYXRmb3JtL3g4Ni9NYWtlZmlsZSAgICB8ICAgMiArCj4+ICAgZHJp
dmVycy9wbGF0Zm9ybS94ODYvbXhkcy1nbXV4LmMgfCAyNjUgKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKwo+PiAgIDQgZmlsZXMgY2hhbmdlZCwgMjgyIGluc2VydGlvbnMoKykKPj4gICBj
cmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9wbGF0Zm9ybS94ODYvbXhkcy1nbXV4LmMKPj4KPj4g
ZGlmZiAtLWdpdCBhL01BSU5UQUlORVJTIGIvTUFJTlRBSU5FUlMKPj4gaW5kZXggZWVmZjU1NTYw
NzU5Li42MzZjOTI1OWIzNDUgMTAwNjQ0Cj4+IC0tLSBhL01BSU5UQUlORVJTCj4+ICsrKyBiL01B
SU5UQUlORVJTCj4+IEBAIC0xMTUxMCw2ICsxMTUxMCwxMiBAQCBMOiAgIGxpbnV4LXVzYkB2Z2Vy
Lmtlcm5lbC5vcmcKPj4gICBTOiAgIE1haW50YWluZWQKPj4gICBGOiAgIGRyaXZlcnMvdXNiL211
c2IvCj4+Cj4+ICtNWERTIEdNVVggRFJJVkVSCj4+ICtNOiAgIERhbmllbCBEYWRhcCA8ZGRhZGFw
QG52aWRpYS5jb20+Cj4+ICtMOiAgIHBsYXRmb3JtLWRyaXZlci14ODZAdmdlci5rZXJuZWwub3Jn
Cj4+ICtTOiAgIFN1cHBvcnRlZAo+PiArRjogICBkcml2ZXJzL3BsYXRmb3JtL3g4Ni9teGRzLWdt
dXguYwo+PiArCj4+ICAgTVhMMzAxUkYgTUVESUEgRFJJVkVSCj4+ICAgTTogICBBa2loaXJvIFRz
dWthZGEgPHRza2QwOEBnbWFpbC5jb20+Cj4+ICAgTDogICBsaW51eC1tZWRpYUB2Z2VyLmtlcm5l
bC5vcmcKPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvcGxhdGZvcm0veDg2L0tjb25maWcgYi9kcml2
ZXJzL3BsYXRmb3JtL3g4Ni9LY29uZmlnCj4+IGluZGV4IDBhZDdhZDhjZjhlMS4uNWQwMGFkMWZm
YzBlIDEwMDY0NAo+PiAtLS0gYS9kcml2ZXJzL3BsYXRmb3JtL3g4Ni9LY29uZmlnCj4+ICsrKyBi
L2RyaXZlcnMvcGxhdGZvcm0veDg2L0tjb25maWcKPj4gQEAgLTEzNjgsNiArMTM2OCwxNSBAQCBj
b25maWcgSU5URUxfVEVMRU1FVFJZCj4+ICAgICAgICAgIGRpcmVjdGx5IHZpYSBkZWJ1Z2ZzIGZp
bGVzLiBWYXJpb3VzIHRvb2xzIG1heSB1c2UKPj4gICAgICAgICAgdGhpcyBpbnRlcmZhY2UgZm9y
IFNvQyBzdGF0ZSBtb25pdG9yaW5nLgo+Pgo+PiArY29uZmlnIE1YRFNfR01VWAo+PiArICAgICB0
cmlzdGF0ZSAiQUNQSSBNWERTIEdtdXggRHJpdmVyIgo+PiArICAgICBkZXBlbmRzIG9uIEFDUElf
V01JCj4+ICsgICAgIGRlcGVuZHMgb24gQUNQSQo+PiArICAgICBkZXBlbmRzIG9uIFZHQV9TV0lU
Q0hFUk9PCj4+ICsgICAgIGhlbHAKPj4gKyAgICAgICBUaGlzIGRyaXZlciBwcm92aWRlcyBzdXBw
b3J0IGZvciBBQ1BJLWRyaXZlbiBnbXV4IGRldmljZXMgd2hpY2ggYXJlCj4+ICsgICAgICAgcHJl
c2VudCBvbiBzb21lIG5vdGVib29rIGRlc2lnbnMgd2l0aCBoeWJyaWQgZ3JhcGhpY3MuCj4+ICsK
Pj4gICBlbmRpZiAjIFg4Nl9QTEFURk9STV9ERVZJQ0VTCj4+Cj4+ICAgY29uZmlnIFBNQ19BVE9N
Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3BsYXRmb3JtL3g4Ni9NYWtlZmlsZSBiL2RyaXZlcnMv
cGxhdGZvcm0veDg2L01ha2VmaWxlCj4+IGluZGV4IDUzNDA4ZDk2NTg3NC4uYjc5MDAwNzMzZmFl
IDEwMDY0NAo+PiAtLS0gYS9kcml2ZXJzL3BsYXRmb3JtL3g4Ni9NYWtlZmlsZQo+PiArKysgYi9k
cml2ZXJzL3BsYXRmb3JtL3g4Ni9NYWtlZmlsZQo+PiBAQCAtMTQ2LDMgKzE0Niw1IEBAIG9iai0k
KENPTkZJR19JTlRFTF9URUxFTUVUUlkpICAgICAgICAgICAgICs9IGludGVsX3RlbGVtZXRyeV9j
b3JlLm8gXAo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRl
bF90ZWxlbWV0cnlfcGx0ZHJ2Lm8gXAo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBpbnRlbF90ZWxlbWV0cnlfZGVidWdmcy5vCj4+ICAgb2JqLSQoQ09ORklHX1BN
Q19BVE9NKSAgICAgICAgICAgICAgICAgICAgICAgKz0gcG1jX2F0b20ubwo+PiArCj4+ICtvYmot
JChDT05GSUdfTVhEU19HTVVYKSAgICAgICAgICAgICAgICAgICAgICArPSBteGRzLWdtdXgubwo+
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9wbGF0Zm9ybS94ODYvbXhkcy1nbXV4LmMgYi9kcml2ZXJz
L3BsYXRmb3JtL3g4Ni9teGRzLWdtdXguYwo+PiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+PiBpbmRl
eCAwMDAwMDAwMDAwMDAuLmRkN2Y2ZWRhZjBmMwo+PiAtLS0gL2Rldi9udWxsCj4+ICsrKyBiL2Ry
aXZlcnMvcGxhdGZvcm0veDg2L214ZHMtZ211eC5jCj4+IEBAIC0wLDAgKzEsMjY1IEBACj4+ICsv
LyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vbmx5Cj4+ICsvKgo+PiArICogbXhk
cy1nbXV4OiB2Z2Ffc3dpdGNoZXJvbyBtdXggaGFuZGxlciBmb3IgQUNQSSBNWERTIG11eGVzCj4+
ICsgKgo+PiArICogQ29weXJpZ2h0IChDKSAyMDIwIE5WSURJQSBDb3Jwb3JhdGlvbgo+PiArICoK
Pj4gKyAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0
ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0Cj4+ICsgKiB1bmRlciB0aGUgdGVybXMgYW5kIGNvbmRpdGlv
bnMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLAo+PiArICogdmVyc2lvbiAyLCBh
cyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi4KPj4gKyAqCj4+ICsg
KiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJl
IHVzZWZ1bCwgYnV0IFdJVEhPVVQKPj4gKyAqIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRo
ZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSBvcgo+PiArICogRklUTkVTUyBG
T1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNl
bnNlIGZvcgo+PiArICogbW9yZSBkZXRhaWxzLgo+PiArICoKPj4gKyAqIFlvdSBzaG91bGQgaGF2
ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCj4+ICsg
KiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9y
Zy9saWNlbnNlcz4uCj4+ICsgKgo+PiArICovCj4+ICsKPj4gKyNkZWZpbmUgcHJfZm10KGZtdCkg
S0JVSUxEX01PRE5BTUUgIjogIiBmbXQKPj4gKwo+PiArI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5o
Pgo+PiArI2luY2x1ZGUgPGxpbnV4L2FjcGkuaD4KPj4gKyNpbmNsdWRlIDxsaW51eC9wY2kuaD4K
Pj4gKyNpbmNsdWRlIDxsaW51eC92Z2Ffc3dpdGNoZXJvby5oPgo+PiArI2luY2x1ZGUgPGxpbnV4
L2RlbGF5Lmg+Cj4+ICsKPj4gK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsKPj4gK01PRFVMRV9E
RVNDUklQVElPTigidmdhX3N3aXRjaGVyb28gbXV4IGhhbmRsZXIgZm9yIEFDUEkgTVhEUyBtdXhl
cyIpOwo+PiArTU9EVUxFX0FVVEhPUigiRGFuaWVsIERhZGFwIDxkZGFkYXBAbnZpZGlhLmNvbT4i
KTsKPj4gKwo+PiArLyoKPj4gKyAqIFRoZSBtdXggZG9lc24ndCBoYXZlIGl0cyBvd24gQUNQSSBI
SUQvQ0lELCBvciBXTUkgd3JhcHBlciwgc28ga2V5IG9mZiBvZgo+PiArICogdGhlIFdNSSB3cmFw
cGVyIGZvciB0aGUgcmVsYXRlZCBXTUFBIG1ldGhvZCBmb3IgYmFja2xpZ2h0IGNvbnRyb2wuCj4+
ICsgKi8KPj4gK01PRFVMRV9BTElBUygid21pOjYwM0U5NjEzLUVGMjUtNDMzOC1BM0QwLUM0NjE3
NzUxNkRCNyIpOwo+PiArCj4+ICtzdGF0aWMgc3RydWN0IHBjaV9kZXYgKmlnX2RldiwgKmRnX2Rl
djsKPj4gK3N0YXRpYyBhY3BpX2hhbmRsZSBpbnRlcm5hbF9tdXhfaGFuZGxlOwo+PiArc3RhdGlj
IGFjcGlfaGFuZGxlIGV4dGVybmFsX211eF9oYW5kbGU7Cj4+ICsKPj4gK2VudW0gYWNwaV9tZXRo
b2Qgewo+PiArICAgICBNWERNID0gMCwKPj4gKyAgICAgTVhEUywKPj4gKyAgICAgTlVNX0FDUElf
TUVUSE9EUwo+PiArfTsKPj4gKwo+PiArc3RhdGljIGNoYXIgKmFjcGlfbWV0aG9kc1tOVU1fQUNQ
SV9NRVRIT0RTXSA9IHsKPj4gKyAgICAgW01YRE1dID0gIk1YRE0iLAo+PiArICAgICBbTVhEU10g
PSAiTVhEUyIsCj4+ICt9Owo+PiArCj4+ICtlbnVtIG11eF9tb2RlX2NvbW1hbmQgewo+PiArICAg
ICBNVVhfTU9ERV9HRVQgPSAwLAo+PiArfTsKPj4gKwo+PiArZW51bSBtdXhfbW9kZSB7Cj4+ICsg
ICAgIE1VWF9NT0RFX0RHUFVfT05MWSA9IDEsCj4+ICsgICAgIE1VWF9NT0RFX0lHUFVfT05MWSA9
IDIsCj4+ICsgICAgIE1VWF9NT0RFX01TSFlCUklEID0gMywgIC8qIER1YWwgR1BVLCBtdXggc3dp
dGNoZWQgdG8gaUdQVSAqLwo+PiArICAgICBNVVhfTU9ERV9EWU5BTUlDID0gNCwgICAvKiBEdWFs
IEdQVSwgZHluYW1pYyBtdXggc3dpdGNoaW5nICovCj4+ICt9Owo+PiArCj4+ICsvKgo+PiArICog
Q2FsbCBNWERTIHdpdGggYXJndW1lbnQgdmFsdWUgMCB0byByZWFkIHRoZSBjdXJyZW50IHN0YXRl
Lgo+PiArICogV2hlbiByZWFkaW5nLCBhIHJldHVybiB2YWx1ZSBvZiAxIG1lYW5zIGlHUFUgYW5k
IDIgbWVhbnMgZEdQVS4KPj4gKyAqIENhbGwgTVhEUyB3aXRoIGJpdCAwIHNldCB0byBjaGFuZ2Ug
dGhlIGN1cnJlbnQgc3RhdGUuCj4+ICsgKiBXaGVuIGNoYW5naW5nIHN0YXRlLCBjbGVhciBiaXQg
NCBmb3IgaUdQVSBhbmQgc2V0IGJpdCA0IGZvciBkR1BVLgo+PiArICovCj4+ICsKPj4gK2VudW0g
bXV4X3N0YXRlIHsKPj4gKyAgICAgTVVYX1NUQVRFX0lHUFUgPSAxLAo+PiArICAgICBNVVhfU1RB
VEVfREdQVSA9IDIsCj4+ICt9Owo+PiArCj4+ICtlbnVtIG11eF9zdGF0ZV9jb21tYW5kIHsKPj4g
KyAgICAgTVVYX1NUQVRFX0dFVCA9IDAsCj4+ICsgICAgIE1VWF9TVEFURV9TRVRfSUdQVSA9IEJJ
VCgwKSwKPj4gKyAgICAgTVVYX1NUQVRFX1NFVF9ER1BVID0gQklUKDQpIHwgQklUKDApLAo+PiAr
fTsKPj4gKwo+PiArc3RhdGljIGFjcGlfaW50ZWdlciBhY3BpX2hlbHBlcihhY3BpX2hhbmRsZSBo
YW5kbGUsIGVudW0gYWNwaV9tZXRob2QgbWV0aG9kLAo+PiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBhY3BpX2ludGVnZXIgYWN0aW9uKQo+PiArewo+PiArICAgICB1bmlvbiBhY3BpX29i
amVjdCBhcmcgPSB7Cj4+ICsgICAgICAgICAgICAgLmludGVnZXIgPSB7IC50eXBlID0gQUNQSV9U
WVBFX0lOVEVHRVIsIC52YWx1ZSA9IGFjdGlvbiB9Cj4+ICsgICAgIH07Cj4+ICsgICAgIHN0cnVj
dCBhY3BpX29iamVjdF9saXN0IGluID0gey5jb3VudCA9IDEsIC5wb2ludGVyID0gJmFyZ307Cj4+
ICsgICAgIGFjcGlfaW50ZWdlciByZXQ7Cj4+ICsgICAgIGFjcGlfc3RhdHVzIHN0YXR1czsKPj4g
Kwo+PiArICAgICBzdGF0dXMgPSBhY3BpX2V2YWx1YXRlX2ludGVnZXIoaGFuZGxlLCBhY3BpX21l
dGhvZHNbbWV0aG9kXSwgJmluLCAmcmV0KTsKPj4gKwo+PiArICAgICBpZiAoQUNQSV9GQUlMVVJF
KHN0YXR1cykpIHsKPj4gKyAgICAgICAgICAgICBwcl9lcnIoIkFDUEkgJXMgZmFpbGVkOiAlc1xu
IiwgYWNwaV9tZXRob2RzW21ldGhvZF0sCj4+ICsgICAgICAgICAgICAgICAgICAgICBhY3BpX2Zv
cm1hdF9leGNlcHRpb24oc3RhdHVzKSk7Cj4+ICsgICAgICAgICAgICAgcmV0dXJuIDA7Cj4+ICsg
ICAgIH0KPj4gKwo+PiArICAgICByZXR1cm4gcmV0Owo+PiArfQo+PiArCj4+ICtzdGF0aWMgYWNw
aV9pbnRlZ2VyIGdldF9tdXhfbW9kZShhY3BpX2hhbmRsZSBoYW5kbGUpCj4+ICt7Cj4+ICsgICAg
IHJldHVybiBhY3BpX2hlbHBlcihoYW5kbGUsIE1YRE0sIE1VWF9NT0RFX0dFVCk7Cj4+ICt9Cj4+
ICsKPj4gK3N0YXRpYyBhY3BpX2ludGVnZXIgZ2V0X211eF9zdGF0ZShhY3BpX2hhbmRsZSBoYW5k
bGUpCj4+ICt7Cj4+ICsgICAgIHJldHVybiBhY3BpX2hlbHBlcihoYW5kbGUsIE1YRFMsIE1VWF9T
VEFURV9HRVQpOwo+PiArfQo+PiArCj4+ICtzdGF0aWMgdm9pZCBzZXRfbXV4X3N0YXRlKGFjcGlf
aGFuZGxlIGhhbmRsZSwgZW51bSBtdXhfc3RhdGUgc3RhdGUpCj4+ICt7Cj4+ICsgICAgIGVudW0g
bXV4X3N0YXRlX2NvbW1hbmQgY29tbWFuZDsKPj4gKwo+PiArICAgICBzd2l0Y2ggKHN0YXRlKSB7
Cj4+ICsgICAgIGNhc2UgTVVYX1NUQVRFX0lHUFU6Cj4+ICsgICAgICAgICAgICAgY29tbWFuZCA9
IE1VWF9TVEFURV9TRVRfSUdQVTsKPj4gKyAgICAgICAgICAgICBicmVhazsKPj4gKyAgICAgY2Fz
ZSBNVVhfU1RBVEVfREdQVToKPj4gKyAgICAgICAgICAgICBjb21tYW5kID0gTVVYX1NUQVRFX1NF
VF9ER1BVOwo+PiArICAgICAgICAgICAgIGJyZWFrOwo+PiArICAgICBkZWZhdWx0Ogo+PiArICAg
ICAgICAgICAgIHJldHVybjsKPj4gKyAgICAgfQo+PiArCj4+ICsgICAgIGFjcGlfaGVscGVyKGhh
bmRsZSwgTVhEUywgY29tbWFuZCk7Cj4+ICt9Cj4+ICsKPj4gK3N0YXRpYyBpbnQgbXhkc19nbXV4
X3N3aXRjaHRvKGVudW0gdmdhX3N3aXRjaGVyb29fY2xpZW50X2lkIGlkKQo+PiArewo+PiArICAg
ICBlbnVtIG11eF9zdGF0ZSBzdGF0ZTsKPj4gKwo+PiArICAgICBzd2l0Y2ggKGlkKSB7Cj4+ICsg
ICAgIGNhc2UgVkdBX1NXSVRDSEVST09fSUdEOgo+PiArICAgICAgICAgICAgIHN0YXRlID0gTVVY
X1NUQVRFX0lHUFU7Cj4+ICsgICAgICAgICAgICAgYnJlYWs7Cj4+ICsgICAgIGNhc2UgVkdBX1NX
SVRDSEVST09fRElTOgo+PiArICAgICAgICAgICAgIHN0YXRlID0gTVVYX1NUQVRFX0RHUFU7Cj4+
ICsgICAgICAgICAgICAgYnJlYWs7Cj4+ICsgICAgIGRlZmF1bHQ6Cj4+ICsgICAgICAgICAgICAg
cmV0dXJuIC1FSU5WQUw7Cj4+ICsgICAgIH0KPj4gKwo+PiArICAgICBpZiAoaW50ZXJuYWxfbXV4
X2hhbmRsZSkgewo+PiArICAgICAgICAgICAgIHNldF9tdXhfc3RhdGUoaW50ZXJuYWxfbXV4X2hh
bmRsZSwgc3RhdGUpOwo+PiArICAgICAgICAgICAgIGlmIChnZXRfbXV4X3N0YXRlKGludGVybmFs
X211eF9oYW5kbGUpICE9IHN0YXRlKQo+PiArICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1F
QUdBSU47Cj4+ICsgICAgIH0KPj4gKwo+PiArICAgICBpZiAoZXh0ZXJuYWxfbXV4X2hhbmRsZSkg
ewo+PiArICAgICAgICAgICAgIHNldF9tdXhfc3RhdGUoZXh0ZXJuYWxfbXV4X2hhbmRsZSwgc3Rh
dGUpOwo+PiArICAgICAgICAgICAgIGlmIChnZXRfbXV4X3N0YXRlKGV4dGVybmFsX211eF9oYW5k
bGUpICE9IHN0YXRlKQo+PiArICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1FQUdBSU47Cj4+
ICsgICAgIH0KPj4gKwo+PiArICAgICAvKiBEUCBBVVggY2FuIHRha2UgdXAgdG8gMTAwbXMgdG8g
c2V0dGxlIGFmdGVyIG11eCBzd2l0Y2ggKi8KPj4gKyAgICAgbWRlbGF5KDEwMCk7Cj4+ICsKPj4g
KyAgICAgcmV0dXJuIDA7Cj4+ICt9Cj4+ICsKPj4gK3N0YXRpYyBlbnVtIHZnYV9zd2l0Y2hlcm9v
X2NsaWVudF9pZCBteGRzX2dtdXhfZ2V0X2NsaWVudF9pZCgKPj4gKyAgICAgc3RydWN0IHBjaV9k
ZXYgKmRldikKPj4gK3sKPj4gKyAgICAgaWYgKGRldiA9PSBpZ19kZXYpCj4+ICsgICAgICAgICAg
ICAgcmV0dXJuIFZHQV9TV0lUQ0hFUk9PX0lHRDsKPj4gKyAgICAgaWYgKGRldiA9PSBkZ19kZXYp
Cj4+ICsgICAgICAgICAgICAgcmV0dXJuIFZHQV9TV0lUQ0hFUk9PX0RJUzsKPj4gKwo+PiArICAg
ICByZXR1cm4gVkdBX1NXSVRDSEVST09fVU5LTk9XTl9JRDsKPj4gK30KPj4gKwo+PiArc3RhdGlj
IGNvbnN0IHN0cnVjdCB2Z2Ffc3dpdGNoZXJvb19oYW5kbGVyIGhhbmRsZXIgPSB7Cj4+ICsgICAg
IC5zd2l0Y2h0byA9IG14ZHNfZ211eF9zd2l0Y2h0bywKPj4gKyAgICAgLmdldF9jbGllbnRfaWQg
PSBteGRzX2dtdXhfZ2V0X2NsaWVudF9pZCwKPj4gK307Cj4+ICsKPj4gK3N0YXRpYyBhY3BpX3N0
YXR1cyBmaW5kX2FjcGlfbWV0aG9kcygKPj4gKyAgICAgYWNwaV9oYW5kbGUgb2JqZWN0LCB1MzIg
bmVzdGluZ19sZXZlbCwgdm9pZCAqY29udGV4dCwKPj4gKyAgICAgdm9pZCAqKnJldHVybl92YWx1
ZSkKPj4gK3sKPj4gKyAgICAgYWNwaV9oYW5kbGUgc2VhcmNoOwo+PiArCj4+ICsgICAgIC8qIElm
IGVpdGhlciBNWERNIG9yIE1YRFMgaXMgbWlzc2luZywgd2UgY2FuJ3QgdXNlIHRoaXMgb2JqZWN0
ICovCj4+ICsgICAgIGlmIChhY3BpX2dldF9oYW5kbGUob2JqZWN0LCAiTVhETSIsICZzZWFyY2gp
KQo+PiArICAgICAgICAgICAgIHJldHVybiBBRV9PSzsKPj4gKyAgICAgaWYgKGFjcGlfZ2V0X2hh
bmRsZShvYmplY3QsICJNWERTIiwgJnNlYXJjaCkpCj4+ICsgICAgICAgICAgICAgcmV0dXJuIEFF
X09LOwo+PiArCj4+ICsgICAgIC8qIE1YRFMgb25seSB3b3JrcyB3aGVuIE1YRE0gaW5kaWNhdGVz
IGR5bmFtaWMgbW9kZSAqLwo+PiArICAgICBpZiAoZ2V0X211eF9tb2RlKG9iamVjdCkgIT0gTVVY
X01PREVfRFlOQU1JQykKPj4gKyAgICAgICAgICAgICByZXR1cm4gQUVfT0s7Cj4+ICsKPj4gKyAg
ICAgLyogSW50ZXJuYWwgZGlzcGxheSBoYXMgX0JDTDsgZXh0ZXJuYWwgZG9lcyBub3QgKi8KPj4g
KyAgICAgaWYgKGFjcGlfZ2V0X2hhbmRsZShvYmplY3QsICJfQkNMIiwgJnNlYXJjaCkpCj4+ICsg
ICAgICAgICAgICAgZXh0ZXJuYWxfbXV4X2hhbmRsZSA9IG9iamVjdDsKPj4gKyAgICAgZWxzZQo+
PiArICAgICAgICAgICAgIGludGVybmFsX211eF9oYW5kbGUgPSBvYmplY3Q7Cj4+ICsKPj4gKyAg
ICAgcmV0dXJuIEFFX09LOwo+PiArfQo+PiArCj4+ICtzdGF0aWMgaW50IF9faW5pdCBteGRzX2dt
dXhfaW5pdCh2b2lkKQo+PiArewo+PiArICAgICBpbnQgcmV0ID0gMDsKPj4gKyAgICAgc3RydWN0
IHBjaV9kZXYgKmRldiA9IE5VTEw7Cj4+ICsKPj4gKyAgICAgLyogQ3VycmVudGx5IG9ubHkgc3Vw
cG9ydHMgSW50ZWwgaW50ZWdyYXRlZCBhbmQgTlZJRElBIGRpc2NyZXRlIEdQVXMgKi8KPj4gKyAg
ICAgd2hpbGUgKChkZXYgPSBwY2lfZ2V0X2NsYXNzKFBDSV9DTEFTU19ESVNQTEFZX1ZHQSA8PCA4
LCBkZXYpKSkgewo+PiArICAgICAgICAgICAgIC8qIElnbm9yZSBlR1BVICovCj4+ICsgICAgICAg
ICAgICAgaWYgKHBjaV9pc190aHVuZGVyYm9sdF9hdHRhY2hlZChkZXYpKQo+PiArICAgICAgICAg
ICAgICAgICAgICAgY29udGludWU7Cj4+ICsKPj4gKyAgICAgICAgICAgICBzd2l0Y2ggKGRldi0+
dmVuZG9yKSB7Cj4+ICsgICAgICAgICAgICAgY2FzZSBQQ0lfVkVORE9SX0lEX0lOVEVMOgo+PiAr
ICAgICAgICAgICAgICAgICAgICAgcGNpX2Rldl9wdXQoaWdfZGV2KTsKPj4gKyAgICAgICAgICAg
ICAgICAgICAgIGlnX2RldiA9IHBjaV9kZXZfZ2V0KGRldik7Cj4+ICsgICAgICAgICAgICAgICAg
ICAgICBicmVhazsKPj4gKyAgICAgICAgICAgICBjYXNlIFBDSV9WRU5ET1JfSURfTlZJRElBOgo+
PiArICAgICAgICAgICAgICAgICAgICAgcGNpX2Rldl9wdXQoZGdfZGV2KTsKPj4gKyAgICAgICAg
ICAgICAgICAgICAgIGRnX2RldiA9IHBjaV9kZXZfZ2V0KGRldik7Cj4+ICsgICAgICAgICAgICAg
ICAgICAgICBicmVhazsKPj4gKyAgICAgICAgICAgICBkZWZhdWx0Ogo+PiArICAgICAgICAgICAg
ICAgICAgICAgYnJlYWs7Cj4+ICsgICAgICAgICAgICAgfQo+PiArICAgICB9Cj4+ICsKPj4gKyAg
ICAgLyogUmVxdWlyZSBib3RoIGludGVncmF0ZWQgYW5kIGRpc2NyZXRlIEdQVXMgKi8KPj4gKyAg
ICAgaWYgKCFpZ19kZXYgfHwgIWRnX2Rldikgewo+PiArICAgICAgICAgICAgIHJldCA9IC1FTk9E
RVY7Cj4+ICsgICAgICAgICAgICAgZ290byBkb25lOwo+PiArICAgICB9Cj4+ICsKPj4gKyAgICAg
YWNwaV93YWxrX25hbWVzcGFjZShBQ1BJX1RZUEVfREVWSUNFLCBBQ1BJX1JPT1RfT0JKRUNULCBB
Q1BJX1VJTlQzMl9NQVgsCj4+ICsgICAgICAgICAgICAgZmluZF9hY3BpX21ldGhvZHMsIE5VTEws
IE5VTEwsIE5VTEwpOwo+PiArCj4+ICsgICAgIC8qIFJlcXVpcmUgYXQgbGVhc3Qgb25lIG11eCAq
Lwo+PiArICAgICBpZiAoIWludGVybmFsX211eF9oYW5kbGUgJiYgIWV4dGVybmFsX211eF9oYW5k
bGUpIHsKPj4gKyAgICAgICAgICAgICByZXQgPSAtRU5PREVWOwo+PiArICAgICAgICAgICAgIGdv
dG8gZG9uZTsKPj4gKyAgICAgfQo+PiArCj4+ICsgICAgIHJldCA9IHZnYV9zd2l0Y2hlcm9vX3Jl
Z2lzdGVyX2hhbmRsZXIoJmhhbmRsZXIsIDApOwo+PiArCj4+ICtkb25lOgo+PiArCj4+ICsgICAg
IGlmIChyZXQpIHsKPj4gKyAgICAgICAgICAgICBwY2lfZGV2X3B1dChpZ19kZXYpOwo+PiArICAg
ICAgICAgICAgIHBjaV9kZXZfcHV0KGRnX2Rldik7Cj4+ICsgICAgIH0KPj4gKwo+PiArICAgICBy
ZXR1cm4gcmV0Owo+PiArfQo+PiArbW9kdWxlX2luaXQobXhkc19nbXV4X2luaXQpOwo+PiArCj4+
ICtzdGF0aWMgdm9pZCBfX2V4aXQgbXhkc19nbXV4X2V4aXQodm9pZCkKPj4gK3sKPj4gKyAgICAg
dmdhX3N3aXRjaGVyb29fdW5yZWdpc3Rlcl9oYW5kbGVyKCk7Cj4+ICsgICAgIHBjaV9kZXZfcHV0
KGlnX2Rldik7Cj4+ICsgICAgIHBjaV9kZXZfcHV0KGRnX2Rldik7Cj4+ICt9Cj4+ICttb2R1bGVf
ZXhpdChteGRzX2dtdXhfZXhpdCk7Cj4+Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2RyaS1kZXZlbAo=
