Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 191532CD55
	for <lists+dri-devel@lfdr.de>; Tue, 28 May 2019 19:14:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B89E46E02F;
	Tue, 28 May 2019 17:13:52 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-it1-x141.google.com (mail-it1-x141.google.com
 [IPv6:2607:f8b0:4864:20::141])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 95B2B89826
 for <dri-devel@lists.freedesktop.org>; Mon, 27 May 2019 19:16:13 +0000 (UTC)
Received: by mail-it1-x141.google.com with SMTP id m140so588785itg.2
 for <dri-devel@lists.freedesktop.org>; Mon, 27 May 2019 12:16:13 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=R8/iFdWejLczB8BKk2sa3IeHBpahb+b0Wsxw58n9MfY=;
 b=knhGI1XpUy9kHKzaJ7wr4CI6URnKZ272Bogdp4ramWm7s0HOdCDpKTlxH9yN0Z0y5d
 5rNjcdWlrkR1OOCXXDhTEfriu6FrUaYHRxQa8uXRWJWEGf6sMwrZ82WRxFwf0lS9V1vR
 RyntwykB6Tv1+C+20HABFOYJ74ImfPKkEEKKBRAdsyEWjt60alO6YtIehWY2Mlx954qP
 f9/jcp14qrfk6jl8NYrxcgifqtfQftsGewqbnlXol+tx2jfdQOxIODxj3QQWJwBhKQrR
 9zdDA0GPdvBuK3QEHPr3elD3o/jjNLPSJn3vapkwQtqQknngqj8KbLrdi8XiJvST/yNb
 NH8Q==
X-Gm-Message-State: APjAAAVS7mlucbm3JL2X8leEm1zAFDfETVi0+++DxvnZnAoU9gULWgBa
 BngiYUGwDOh3TrHjs6/ecn4=
X-Google-Smtp-Source: APXvYqzs2bR57gQD3gU61Jdm9RH7M6/cgNwa7JB66L19wtp9SanMzs8VBCGygAxuxHan4uP6KSxd+Q==
X-Received: by 2002:a24:c0c1:: with SMTP id u184mr439128itf.9.1558984572688;
 Mon, 27 May 2019 12:16:12 -0700 (PDT)
Received: from svens-asus.arcx.com ([184.94.50.30])
 by smtp.gmail.com with ESMTPSA id h26sm176750itf.13.2019.05.27.12.16.12
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Mon, 27 May 2019 12:16:12 -0700 (PDT)
From: Sven Van Asbroeck <thesven73@gmail.com>
X-Google-Original-From: Sven Van Asbroeck <TheSven73@gmail.com>
To: Russell King <linux@armlinux.org.uk>
Subject: [PATCH v1 2/2] drm/i2c: tda998x: remove indirect reg_read/_write()
 calls
Date: Mon, 27 May 2019 15:15:52 -0400
Message-Id: <20190527191552.10413-2-TheSven73@gmail.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190527191552.10413-1-TheSven73@gmail.com>
References: <20190527191552.10413-1-TheSven73@gmail.com>
X-Mailman-Approved-At: Tue, 28 May 2019 17:13:51 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=R8/iFdWejLczB8BKk2sa3IeHBpahb+b0Wsxw58n9MfY=;
 b=jeo2Ptya1YMu0fev0kNjUIVZZTPjPc8Mmzv+cNCQ9ah3Uq9xBJeRaHIPrhV9DQPSAp
 FTuCg0l3vMtBbhx7HuRdYd11W9IHk1ZJ2ZJfge+D/Fh0IMriZIaCtG2DtDNXLf4PCj5X
 OJkhF5O8r5bN0Vo8ZC6OzEnXPFcXq2pOYo3VbYaP9HWlux41hf5qUoTBoOrOIHqbfdPU
 InL401XoxpCraBhnHHh/jqDsfiDAS+Iv82zid53S9L61m9glNTQe6vMZhU4Nj8baZV73
 1lisapIJanAsLvUDsCg7zW3ah5sik9GKq9Cd4+p3V2DbB6S9CnLcQdfeSH08VKfnMeFk
 Qx4w==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, Peter Rosin <peda@axentia.se>,
 dri-devel@lists.freedesktop.org, linux-kernel@vger.kernel.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UmVtb3ZlIGluZGlyZWN0IHJlZ19yZWFkL193cml0ZSgpIGNhbGxzLCBhbmQgcmVwbGFjZSB0aGVt
CndpdGggZGlyZWN0IGNhbGxzIHRvIHJlZ21hcCBmdW5jdGlvbnMuCgpGb3IgdGhlIHNha2Ugb2Yg
cmVhZGFiaWxpdHksIGtlZXAgdGhlIGZvbGxvd2luZyBpbmRpcmVjdApyZWdpc3RlciBhY2Nlc3Mg
Y2FsbHM6Ci0gcmVnX3NldCgpCi0gcmVnX2NsZWFyKCkKLSByZWdfd3JpdGUxNigpCgpTaWduZWQt
b2ZmLWJ5OiBTdmVuIFZhbiBBc2Jyb2VjayA8VGhlU3ZlbjczQGdtYWlsLmNvbT4KLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTJjL3RkYTk5OHhfZHJ2LmMgfCAzMzMgKysrKysrKysrKysrKystLS0tLS0t
LS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgMTU3IGluc2VydGlvbnMoKyksIDE3NiBkZWxldGlv
bnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTJjL3RkYTk5OHhfZHJ2LmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTJjL3RkYTk5OHhfZHJ2LmMKaW5kZXggODE1M2UyZTE5ZTE4Li4xYmRk
ZDJjZjkyZWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pMmMvdGRhOTk4eF9kcnYuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTJjL3RkYTk5OHhfZHJ2LmMKQEAgLTU0OCw4OSArNTQ4LDU5
IEBAIHN0YXRpYyB2b2lkIHRkYTk5OHhfY2VjX2hvb2tfcmVsZWFzZSh2b2lkICpkYXRhKQogfQog
CiBzdGF0aWMgaW50Ci1yZWdfcmVhZF9yYW5nZShzdHJ1Y3QgdGRhOTk4eF9wcml2ICpwcml2LCB1
MTYgcmVnLCBjaGFyICpidWYsIGludCBjbnQpCi17Ci0JaW50IHJldDsKLQotCXJldCA9IHJlZ21h
cF9idWxrX3JlYWQocHJpdi0+cmVnbWFwLCByZWcsIGJ1ZiwgY250KTsKLQlpZiAocmV0IDwgMCkK
LQkJcmV0dXJuIHJldDsKLQlyZXR1cm4gY250OwotfQotCi1zdGF0aWMgdm9pZAotcmVnX3dyaXRl
X3JhbmdlKHN0cnVjdCB0ZGE5OTh4X3ByaXYgKnByaXYsIHUxNiByZWcsIHU4ICpwLCBpbnQgY250
KQotewotCXJlZ21hcF9idWxrX3dyaXRlKHByaXYtPnJlZ21hcCwgcmVnLCBwLCBjbnQpOwotfQot
Ci1zdGF0aWMgaW50Ci1yZWdfcmVhZChzdHJ1Y3QgdGRhOTk4eF9wcml2ICpwcml2LCB1MTYgcmVn
KQotewotCWludCByZXQsIHZhbDsKLQotCXJldCA9IHJlZ21hcF9yZWFkKHByaXYtPnJlZ21hcCwg
cmVnLCAmdmFsKTsKLQlpZiAocmV0IDwgMCkKLQkJcmV0dXJuIHJldDsKLQlyZXR1cm4gdmFsOwot
fQotCi1zdGF0aWMgdm9pZAotcmVnX3dyaXRlKHN0cnVjdCB0ZGE5OTh4X3ByaXYgKnByaXYsIHUx
NiByZWcsIHU4IHZhbCkKLXsKLQlyZWdtYXBfd3JpdGUocHJpdi0+cmVnbWFwLCByZWcsIHZhbCk7
Ci19Ci0KLXN0YXRpYyB2b2lkCi1yZWdfd3JpdGUxNihzdHJ1Y3QgdGRhOTk4eF9wcml2ICpwcml2
LCB1MTYgcmVnLCB1MTYgdmFsKQorcmVnX3dyaXRlMTYoc3RydWN0IHJlZ21hcCAqcmVnbWFwLCB1
MTYgcmVnLCB1MTYgdmFsKQogewogCXU4IGJ1ZltdID0ge3ZhbCA+PiA4LCB2YWx9OwogCi0JcmVn
bWFwX2J1bGtfd3JpdGUocHJpdi0+cmVnbWFwLCByZWcsIGJ1ZiwgQVJSQVlfU0laRShidWYpKTsK
KwlyZXR1cm4gcmVnbWFwX2J1bGtfd3JpdGUocmVnbWFwLCByZWcsIGJ1ZiwgQVJSQVlfU0laRShi
dWYpKTsKIH0KIAotc3RhdGljIHZvaWQKLXJlZ19zZXQoc3RydWN0IHRkYTk5OHhfcHJpdiAqcHJp
diwgdTE2IHJlZywgdTggdmFsKQorc3RhdGljIGludAorcmVnX3NldChzdHJ1Y3QgcmVnbWFwICpy
ZWdtYXAsIHUxNiByZWcsIHU4IHZhbCkKIHsKLQlyZWdtYXBfdXBkYXRlX2JpdHMocHJpdi0+cmVn
bWFwLCByZWcsIHZhbCwgdmFsKTsKKwlyZXR1cm4gcmVnbWFwX3VwZGF0ZV9iaXRzKHJlZ21hcCwg
cmVnLCB2YWwsIHZhbCk7CiB9CiAKLXN0YXRpYyB2b2lkCi1yZWdfY2xlYXIoc3RydWN0IHRkYTk5
OHhfcHJpdiAqcHJpdiwgdTE2IHJlZywgdTggdmFsKQorc3RhdGljIGludAorcmVnX2NsZWFyKHN0
cnVjdCByZWdtYXAgKnJlZ21hcCwgdTE2IHJlZywgdTggdmFsKQogewotCXJlZ21hcF91cGRhdGVf
Yml0cyhwcml2LT5yZWdtYXAsIHJlZywgdmFsLCAwKTsKKwlyZXR1cm4gcmVnbWFwX3VwZGF0ZV9i
aXRzKHJlZ21hcCwgcmVnLCB2YWwsIDApOwogfQogCiBzdGF0aWMgdm9pZAogdGRhOTk4eF9yZXNl
dChzdHJ1Y3QgdGRhOTk4eF9wcml2ICpwcml2KQogeworCXN0cnVjdCByZWdtYXAgKnJlZ21hcCA9
IHByaXYtPnJlZ21hcDsKKwogCS8qIHJlc2V0IGF1ZGlvIGFuZCBpMmMgbWFzdGVyOiAqLwotCXJl
Z193cml0ZShwcml2LCBSRUdfU09GVFJFU0VULCBTT0ZUUkVTRVRfQVVESU8gfCBTT0ZUUkVTRVRf
STJDX01BU1RFUik7CisJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVHX1NPRlRSRVNFVCwKKwkJCVNP
RlRSRVNFVF9BVURJTyB8IFNPRlRSRVNFVF9JMkNfTUFTVEVSKTsKIAltc2xlZXAoNTApOwotCXJl
Z193cml0ZShwcml2LCBSRUdfU09GVFJFU0VULCAwKTsKKwlyZWdtYXBfd3JpdGUocmVnbWFwLCBS
RUdfU09GVFJFU0VULCAwKTsKIAltc2xlZXAoNTApOwogCiAJLyogcmVzZXQgdHJhbnNtaXR0ZXI6
ICovCi0JcmVnX3NldChwcml2LCBSRUdfTUFJTl9DTlRSTDAsIE1BSU5fQ05UUkwwX1NSKTsKLQly
ZWdfY2xlYXIocHJpdiwgUkVHX01BSU5fQ05UUkwwLCBNQUlOX0NOVFJMMF9TUik7CisJcmVnX3Nl
dChyZWdtYXAsIFJFR19NQUlOX0NOVFJMMCwgTUFJTl9DTlRSTDBfU1IpOworCXJlZ19jbGVhcihy
ZWdtYXAsIFJFR19NQUlOX0NOVFJMMCwgTUFJTl9DTlRSTDBfU1IpOwogCiAJLyogUExMIHJlZ2lz
dGVycyBjb21tb24gY29uZmlndXJhdGlvbiAqLwotCXJlZ193cml0ZShwcml2LCBSRUdfUExMX1NF
UklBTF8xLCAweDAwKTsKLQlyZWdfd3JpdGUocHJpdiwgUkVHX1BMTF9TRVJJQUxfMiwgUExMX1NF
UklBTF8yX1NSTF9OT1NDKDEpKTsKLQlyZWdfd3JpdGUocHJpdiwgUkVHX1BMTF9TRVJJQUxfMywg
MHgwMCk7Ci0JcmVnX3dyaXRlKHByaXYsIFJFR19TRVJJQUxJWkVSLCAgIDB4MDApOwotCXJlZ193
cml0ZShwcml2LCBSRUdfQlVGRkVSX09VVCwgICAweDAwKTsKLQlyZWdfd3JpdGUocHJpdiwgUkVH
X1BMTF9TQ0cxLCAgICAgMHgwMCk7Ci0JcmVnX3dyaXRlKHByaXYsIFJFR19BVURJT19ESVYsICAg
IEFVRElPX0RJVl9TRVJDTEtfOCk7Ci0JcmVnX3dyaXRlKHByaXYsIFJFR19TRUxfQ0xLLCAgICAg
IFNFTF9DTEtfU0VMX0NMSzEgfCBTRUxfQ0xLX0VOQV9TQ19DTEspOwotCXJlZ193cml0ZShwcml2
LCBSRUdfUExMX1NDR04xLCAgICAweGZhKTsKLQlyZWdfd3JpdGUocHJpdiwgUkVHX1BMTF9TQ0dO
MiwgICAgMHgwMCk7Ci0JcmVnX3dyaXRlKHByaXYsIFJFR19QTExfU0NHUjEsICAgIDB4NWIpOwot
CXJlZ193cml0ZShwcml2LCBSRUdfUExMX1NDR1IyLCAgICAweDAwKTsKLQlyZWdfd3JpdGUocHJp
diwgUkVHX1BMTF9TQ0cyLCAgICAgMHgxMCk7CisJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVHX1BM
TF9TRVJJQUxfMSwgMHgwMCk7CisJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVHX1BMTF9TRVJJQUxf
MiwgUExMX1NFUklBTF8yX1NSTF9OT1NDKDEpKTsKKwlyZWdtYXBfd3JpdGUocmVnbWFwLCBSRUdf
UExMX1NFUklBTF8zLCAweDAwKTsKKwlyZWdtYXBfd3JpdGUocmVnbWFwLCBSRUdfU0VSSUFMSVpF
UiwgICAweDAwKTsKKwlyZWdtYXBfd3JpdGUocmVnbWFwLCBSRUdfQlVGRkVSX09VVCwgICAweDAw
KTsKKwlyZWdtYXBfd3JpdGUocmVnbWFwLCBSRUdfUExMX1NDRzEsICAgICAweDAwKTsKKwlyZWdt
YXBfd3JpdGUocmVnbWFwLCBSRUdfQVVESU9fRElWLCAgICBBVURJT19ESVZfU0VSQ0xLXzgpOwor
CXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19TRUxfQ0xLLAorCQkJCVNFTF9DTEtfU0VMX0NMSzEg
fCBTRUxfQ0xLX0VOQV9TQ19DTEspOworCXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19QTExfU0NH
TjEsICAgIDB4ZmEpOworCXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19QTExfU0NHTjIsICAgIDB4
MDApOworCXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19QTExfU0NHUjEsICAgIDB4NWIpOworCXJl
Z21hcF93cml0ZShyZWdtYXAsIFJFR19QTExfU0NHUjIsICAgIDB4MDApOworCXJlZ21hcF93cml0
ZShyZWdtYXAsIFJFR19QTExfU0NHMiwgICAgIDB4MTApOwogCiAJLyogV3JpdGUgdGhlIGRlZmF1
bHQgdmFsdWUgTVVYIHJlZ2lzdGVyICovCi0JcmVnX3dyaXRlKHByaXYsIFJFR19NVVhfVlBfVklQ
X09VVCwgMHgyNCk7CisJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVHX01VWF9WUF9WSVBfT1VULCAw
eDI0KTsKIH0KIAogLyoKQEAgLTY4NSwxNiArNjU1LDE4IEBAIHN0YXRpYyB2b2lkIHRkYTk5OHhf
ZGV0ZWN0X3dvcmsoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQogc3RhdGljIGlycXJldHVybl90
IHRkYTk5OHhfaXJxX3RocmVhZChpbnQgaXJxLCB2b2lkICpkYXRhKQogewogCXN0cnVjdCB0ZGE5
OTh4X3ByaXYgKnByaXYgPSBkYXRhOwotCXU4IHN0YSwgY2VjLCBsdmwsIGZsYWcwLCBmbGFnMSwg
ZmxhZzI7CisJc3RydWN0IHJlZ21hcCAqcmVnbWFwID0gcHJpdi0+cmVnbWFwOworCXU4IHN0YSwg
Y2VjLCBsdmw7CisJdW5zaWduZWQgaW50IGZsYWcwLCBmbGFnMSwgZmxhZzI7CiAJYm9vbCBoYW5k
bGVkID0gZmFsc2U7CiAKIAlzdGEgPSBjZWNfcmVhZChwcml2LCBSRUdfQ0VDX0lOVFNUQVRVUyk7
CiAJaWYgKHN0YSAmIENFQ19JTlRTVEFUVVNfSERNSSkgewogCQljZWMgPSBjZWNfcmVhZChwcml2
LCBSRUdfQ0VDX1JYU0hQRElOVCk7CiAJCWx2bCA9IGNlY19yZWFkKHByaXYsIFJFR19DRUNfUlhT
SFBETEVWKTsKLQkJZmxhZzAgPSByZWdfcmVhZChwcml2LCBSRUdfSU5UX0ZMQUdTXzApOwotCQlm
bGFnMSA9IHJlZ19yZWFkKHByaXYsIFJFR19JTlRfRkxBR1NfMSk7Ci0JCWZsYWcyID0gcmVnX3Jl
YWQocHJpdiwgUkVHX0lOVF9GTEFHU18yKTsKKwkJcmVnbWFwX3JlYWQocmVnbWFwLCBSRUdfSU5U
X0ZMQUdTXzAsICZmbGFnMCk7CisJCXJlZ21hcF9yZWFkKHJlZ21hcCwgUkVHX0lOVF9GTEFHU18x
LCAmZmxhZzEpOworCQlyZWdtYXBfcmVhZChyZWdtYXAsIFJFR19JTlRfRkxBR1NfMiwgJmZsYWcy
KTsKIAkJRFJNX0RFQlVHX0RSSVZFUigKIAkJCSJ0ZGEgaXJxIHN0YSAlMDJ4IGNlYyAlMDJ4IGx2
bCAlMDJ4IGYwICUwMnggZjEgJTAyeCBmMiAlMDJ4XG4iLAogCQkJc3RhLCBjZWMsIGx2bCwgZmxh
ZzAsIGZsYWcxLCBmbGFnMik7CkBAIC03MjUsNiArNjk3LDcgQEAgc3RhdGljIHZvaWQKIHRkYTk5
OHhfd3JpdGVfaWYoc3RydWN0IHRkYTk5OHhfcHJpdiAqcHJpdiwgdTggYml0LCB1MTYgYWRkciwK
IAkJIHVuaW9uIGhkbWlfaW5mb2ZyYW1lICpmcmFtZSkKIHsKKwlzdHJ1Y3QgcmVnbWFwICpyZWdt
YXAgPSBwcml2LT5yZWdtYXA7CiAJdTggYnVmWzMyXTsKIAlzc2l6ZV90IGxlbjsKIApAQCAtNzM2
LDkgKzcwOSw5IEBAIHRkYTk5OHhfd3JpdGVfaWYoc3RydWN0IHRkYTk5OHhfcHJpdiAqcHJpdiwg
dTggYml0LCB1MTYgYWRkciwKIAkJcmV0dXJuOwogCX0KIAotCXJlZ19jbGVhcihwcml2LCBSRUdf
RElQX0lGX0ZMQUdTLCBiaXQpOwotCXJlZ193cml0ZV9yYW5nZShwcml2LCBhZGRyLCBidWYsIGxl
bik7Ci0JcmVnX3NldChwcml2LCBSRUdfRElQX0lGX0ZMQUdTLCBiaXQpOworCXJlZ19jbGVhcihy
ZWdtYXAsIFJFR19ESVBfSUZfRkxBR1MsIGJpdCk7CisJcmVnbWFwX2J1bGtfd3JpdGUocmVnbWFw
LCBhZGRyLCBidWYsIGxlbik7CisJcmVnX3NldChyZWdtYXAsIFJFR19ESVBfSUZfRkxBR1MsIGJp
dCk7CiB9CiAKIHN0YXRpYyBpbnQgdGRhOTk4eF93cml0ZV9haWYoc3RydWN0IHRkYTk5OHhfcHJp
diAqcHJpdiwKQEAgLTc2NywxNCArNzQwLDE0IEBAIHRkYTk5OHhfd3JpdGVfYXZpKHN0cnVjdCB0
ZGE5OTh4X3ByaXYgKnByaXYsIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlCiAK
IC8qIEF1ZGlvIHN1cHBvcnQgKi8KIAotc3RhdGljIHZvaWQgdGRhOTk4eF9hdWRpb19tdXRlKHN0
cnVjdCB0ZGE5OTh4X3ByaXYgKnByaXYsIGJvb2wgb24pCitzdGF0aWMgdm9pZCB0ZGE5OTh4X2F1
ZGlvX211dGUoc3RydWN0IHJlZ21hcCAqcmVnbWFwLCBib29sIG9uKQogewogCWlmIChvbikgewot
CQlyZWdfc2V0KHByaXYsIFJFR19TT0ZUUkVTRVQsIFNPRlRSRVNFVF9BVURJTyk7Ci0JCXJlZ19j
bGVhcihwcml2LCBSRUdfU09GVFJFU0VULCBTT0ZUUkVTRVRfQVVESU8pOwotCQlyZWdfc2V0KHBy
aXYsIFJFR19BSVBfQ05UUkxfMCwgQUlQX0NOVFJMXzBfUlNUX0ZJRk8pOworCQlyZWdfc2V0KHJl
Z21hcCwgUkVHX1NPRlRSRVNFVCwgU09GVFJFU0VUX0FVRElPKTsKKwkJcmVnX2NsZWFyKHJlZ21h
cCwgUkVHX1NPRlRSRVNFVCwgU09GVFJFU0VUX0FVRElPKTsKKwkJcmVnX3NldChyZWdtYXAsIFJF
R19BSVBfQ05UUkxfMCwgQUlQX0NOVFJMXzBfUlNUX0ZJRk8pOwogCX0gZWxzZSB7Ci0JCXJlZ19j
bGVhcihwcml2LCBSRUdfQUlQX0NOVFJMXzAsIEFJUF9DTlRSTF8wX1JTVF9GSUZPKTsKKwkJcmVn
X2NsZWFyKHJlZ21hcCwgUkVHX0FJUF9DTlRSTF8wLCBBSVBfQ05UUkxfMF9SU1RfRklGTyk7CiAJ
fQogfQogCkBAIC03ODIsMjUgKzc1NSwyNiBAQCBzdGF0aWMgaW50CiB0ZGE5OTh4X2NvbmZpZ3Vy
ZV9hdWRpbyhzdHJ1Y3QgdGRhOTk4eF9wcml2ICpwcml2LAogCQkJc3RydWN0IHRkYTk5OHhfYXVk
aW9fcGFyYW1zICpwYXJhbXMpCiB7CisJc3RydWN0IHJlZ21hcCAqcmVnbWFwID0gcHJpdi0+cmVn
bWFwOwogCXU4IGJ1Zls2XSwgY2xrc2VsX2FpcCwgY2xrc2VsX2ZzLCBjdHNfbiwgYWRpdjsKIAl1
MzIgbjsKIAogCS8qIEVuYWJsZSBhdWRpbyBwb3J0cyAqLwotCXJlZ193cml0ZShwcml2LCBSRUdf
RU5BX0FQLCBwYXJhbXMtPmNvbmZpZyk7CisJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVHX0VOQV9B
UCwgcGFyYW1zLT5jb25maWcpOwogCiAJLyogU2V0IGF1ZGlvIGlucHV0IHNvdXJjZSAqLwogCXN3
aXRjaCAocGFyYW1zLT5mb3JtYXQpIHsKIAljYXNlIEFGTVRfU1BESUY6Ci0JCXJlZ193cml0ZShw
cml2LCBSRUdfRU5BX0FDTEssIDApOwotCQlyZWdfd3JpdGUocHJpdiwgUkVHX01VWF9BUCwgTVVY
X0FQX1NFTEVDVF9TUERJRik7CisJCXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19FTkFfQUNMSywg
MCk7CisJCXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19NVVhfQVAsIE1VWF9BUF9TRUxFQ1RfU1BE
SUYpOwogCQljbGtzZWxfYWlwID0gQUlQX0NMS1NFTF9BSVBfU1BESUY7CiAJCWNsa3NlbF9mcyA9
IEFJUF9DTEtTRUxfRlNfRlM2NFNQRElGOwogCQljdHNfbiA9IENUU19OX00oMykgfCBDVFNfTl9L
KDMpOwogCQlicmVhazsKIAogCWNhc2UgQUZNVF9JMlM6Ci0JCXJlZ193cml0ZShwcml2LCBSRUdf
RU5BX0FDTEssIDEpOwotCQlyZWdfd3JpdGUocHJpdiwgUkVHX01VWF9BUCwgTVVYX0FQX1NFTEVD
VF9JMlMpOworCQlyZWdtYXBfd3JpdGUocmVnbWFwLCBSRUdfRU5BX0FDTEssIDEpOworCQlyZWdt
YXBfd3JpdGUocmVnbWFwLCBSRUdfTVVYX0FQLCBNVVhfQVBfU0VMRUNUX0kyUyk7CiAJCWNsa3Nl
bF9haXAgPSBBSVBfQ0xLU0VMX0FJUF9JMlM7CiAJCWNsa3NlbF9mcyA9IEFJUF9DTEtTRUxfRlNf
QUNMSzsKIAkJc3dpdGNoIChwYXJhbXMtPnNhbXBsZV93aWR0aCkgewpAQCAtODI0LDEwICs3OTgs
MTAgQEAgdGRhOTk4eF9jb25maWd1cmVfYXVkaW8oc3RydWN0IHRkYTk5OHhfcHJpdiAqcHJpdiwK
IAkJcmV0dXJuIC1FSU5WQUw7CiAJfQogCi0JcmVnX3dyaXRlKHByaXYsIFJFR19BSVBfQ0xLU0VM
LCBjbGtzZWxfYWlwKTsKLQlyZWdfY2xlYXIocHJpdiwgUkVHX0FJUF9DTlRSTF8wLCBBSVBfQ05U
UkxfMF9MQVlPVVQgfAorCXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19BSVBfQ0xLU0VMLCBjbGtz
ZWxfYWlwKTsKKwlyZWdfY2xlYXIocmVnbWFwLCBSRUdfQUlQX0NOVFJMXzAsIEFJUF9DTlRSTF8w
X0xBWU9VVCB8CiAJCQkJCUFJUF9DTlRSTF8wX0FDUl9NQU4pOwkvKiBhdXRvIENUUyAqLwotCXJl
Z193cml0ZShwcml2LCBSRUdfQ1RTX04sIGN0c19uKTsKKwlyZWdtYXBfd3JpdGUocmVnbWFwLCBS
RUdfQ1RTX04sIGN0c19uKTsKIAogCS8qCiAJICogQXVkaW8gaW5wdXQgc29tZWhvdyBkZXBlbmRz
IG9uIEhETUkgbGluZSByYXRlIHdoaWNoIGlzCkBAIC04NDQsNyArODE4LDcgQEAgdGRhOTk4eF9j
b25maWd1cmVfYXVkaW8oc3RydWN0IHRkYTk5OHhfcHJpdiAqcHJpdiwKIAlpZiAocGFyYW1zLT5m
b3JtYXQgPT0gQUZNVF9TUERJRikKIAkJYWRpdisrOwkJCS8qIEFVRElPX0RJVl9TRVJDTEtfMTYg
b3IgXzMyICovCiAKLQlyZWdfd3JpdGUocHJpdiwgUkVHX0FVRElPX0RJViwgYWRpdik7CisJcmVn
bWFwX3dyaXRlKHJlZ21hcCwgUkVHX0FVRElPX0RJViwgYWRpdik7CiAKIAkvKgogCSAqIFRoaXMg
aXMgdGhlIGFwcHJveGltYXRlIHZhbHVlIG9mIE4sIHdoaWNoIGhhcHBlbnMgdG8gYmUKQEAgLTg1
OSwxNCArODMzLDE0IEBAIHRkYTk5OHhfY29uZmlndXJlX2F1ZGlvKHN0cnVjdCB0ZGE5OTh4X3By
aXYgKnByaXYsCiAJYnVmWzNdID0gbjsKIAlidWZbNF0gPSBuID4+IDg7CiAJYnVmWzVdID0gbiA+
PiAxNjsKLQlyZWdfd3JpdGVfcmFuZ2UocHJpdiwgUkVHX0FDUl9DVFNfMCwgYnVmLCA2KTsKKwly
ZWdtYXBfYnVsa193cml0ZShyZWdtYXAsIFJFR19BQ1JfQ1RTXzAsIGJ1ZiwgNik7CiAKIAkvKiBT
ZXQgQ1RTIGNsb2NrIHJlZmVyZW5jZSAqLwotCXJlZ193cml0ZShwcml2LCBSRUdfQUlQX0NMS1NF
TCwgY2xrc2VsX2FpcCB8IGNsa3NlbF9mcyk7CisJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVHX0FJ
UF9DTEtTRUwsIGNsa3NlbF9haXAgfCBjbGtzZWxfZnMpOwogCiAJLyogUmVzZXQgQ1RTIGdlbmVy
YXRvciAqLwotCXJlZ19zZXQocHJpdiwgUkVHX0FJUF9DTlRSTF8wLCBBSVBfQ05UUkxfMF9SU1Rf
Q1RTKTsKLQlyZWdfY2xlYXIocHJpdiwgUkVHX0FJUF9DTlRSTF8wLCBBSVBfQ05UUkxfMF9SU1Rf
Q1RTKTsKKwlyZWdfc2V0KHJlZ21hcCwgUkVHX0FJUF9DTlRSTF8wLCBBSVBfQ05UUkxfMF9SU1Rf
Q1RTKTsKKwlyZWdfY2xlYXIocmVnbWFwLCBSRUdfQUlQX0NOVFJMXzAsIEFJUF9DTlRSTF8wX1JT
VF9DVFMpOwogCiAJLyogV3JpdGUgdGhlIGNoYW5uZWwgc3RhdHVzCiAJICogVGhlIFJFR19DSF9T
VEFUX0ItcmVnaXN0ZXJzIHNraXAgSUVDOTU4IEFFUzIgYnl0ZSwgYmVjYXVzZQpAQCAtODc2LDEx
ICs4NTAsMTEgQEAgdGRhOTk4eF9jb25maWd1cmVfYXVkaW8oc3RydWN0IHRkYTk5OHhfcHJpdiAq
cHJpdiwKIAlidWZbMV0gPSBwYXJhbXMtPnN0YXR1c1sxXTsKIAlidWZbMl0gPSBwYXJhbXMtPnN0
YXR1c1szXTsKIAlidWZbM10gPSBwYXJhbXMtPnN0YXR1c1s0XTsKLQlyZWdfd3JpdGVfcmFuZ2Uo
cHJpdiwgUkVHX0NIX1NUQVRfQigwKSwgYnVmLCA0KTsKKwlyZWdtYXBfYnVsa193cml0ZShyZWdt
YXAsIFJFR19DSF9TVEFUX0IoMCksIGJ1ZiwgNCk7CiAKLQl0ZGE5OTh4X2F1ZGlvX211dGUocHJp
diwgdHJ1ZSk7CisJdGRhOTk4eF9hdWRpb19tdXRlKHJlZ21hcCwgdHJ1ZSk7CiAJbXNsZWVwKDIw
KTsKLQl0ZGE5OTh4X2F1ZGlvX211dGUocHJpdiwgZmFsc2UpOworCXRkYTk5OHhfYXVkaW9fbXV0
ZShyZWdtYXAsIGZhbHNlKTsKIAogCXJldHVybiB0ZGE5OTh4X3dyaXRlX2FpZihwcml2LCAmcGFy
YW1zLT5jZWEpOwogfQpAQCAtOTUwLDcgKzkyNCw3IEBAIHN0YXRpYyB2b2lkIHRkYTk5OHhfYXVk
aW9fc2h1dGRvd24oc3RydWN0IGRldmljZSAqZGV2LCB2b2lkICpkYXRhKQogCiAJbXV0ZXhfbG9j
aygmcHJpdi0+YXVkaW9fbXV0ZXgpOwogCi0JcmVnX3dyaXRlKHByaXYsIFJFR19FTkFfQVAsIDAp
OworCXJlZ21hcF93cml0ZShwcml2LT5yZWdtYXAsIFJFR19FTkFfQVAsIDApOwogCiAJcHJpdi0+
YXVkaW9fcGFyYW1zLmZvcm1hdCA9IEFGTVRfVU5VU0VEOwogCkBAIC05NjMsNyArOTM3LDcgQEAg
aW50IHRkYTk5OHhfYXVkaW9fZGlnaXRhbF9tdXRlKHN0cnVjdCBkZXZpY2UgKmRldiwgdm9pZCAq
ZGF0YSwgYm9vbCBlbmFibGUpCiAKIAltdXRleF9sb2NrKCZwcml2LT5hdWRpb19tdXRleCk7CiAK
LQl0ZGE5OTh4X2F1ZGlvX211dGUocHJpdiwgZW5hYmxlKTsKKwl0ZGE5OTh4X2F1ZGlvX211dGUo
cHJpdi0+cmVnbWFwLCBlbmFibGUpOwogCiAJbXV0ZXhfdW5sb2NrKCZwcml2LT5hdWRpb19tdXRl
eCk7CiAJcmV0dXJuIDA7CkBAIC0xMDQzLDYgKzEwMTcsOCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0
IGRybV9jb25uZWN0b3JfZnVuY3MgdGRhOTk4eF9jb25uZWN0b3JfZnVuY3MgPSB7CiBzdGF0aWMg
aW50IHJlYWRfZWRpZF9ibG9jayh2b2lkICpkYXRhLCB1OCAqYnVmLCB1bnNpZ25lZCBpbnQgYmxr
LCBzaXplX3QgbGVuZ3RoKQogewogCXN0cnVjdCB0ZGE5OTh4X3ByaXYgKnByaXYgPSBkYXRhOwor
CXN0cnVjdCByZWdtYXAgKnJlZ21hcCA9IHByaXYtPnJlZ21hcDsKKwl1bnNpZ25lZCBpbnQgZmxh
ZzI7CiAJdTggb2Zmc2V0LCBzZWdwdHI7CiAJaW50IHJldCwgaTsKIApAQCAtMTA1MSwxNyArMTAy
NywxNyBAQCBzdGF0aWMgaW50IHJlYWRfZWRpZF9ibG9jayh2b2lkICpkYXRhLCB1OCAqYnVmLCB1
bnNpZ25lZCBpbnQgYmxrLCBzaXplX3QgbGVuZ3RoKQogCiAJbXV0ZXhfbG9jaygmcHJpdi0+ZWRp
ZF9tdXRleCk7CiAKLQlyZWdfd3JpdGUocHJpdiwgUkVHX0REQ19BRERSLCAweGEwKTsKLQlyZWdf
d3JpdGUocHJpdiwgUkVHX0REQ19PRkZTLCBvZmZzZXQpOwotCXJlZ193cml0ZShwcml2LCBSRUdf
RERDX1NFR01fQUREUiwgMHg2MCk7Ci0JcmVnX3dyaXRlKHByaXYsIFJFR19ERENfU0VHTSwgc2Vn
cHRyKTsKKwlyZWdtYXBfd3JpdGUocmVnbWFwLCBSRUdfRERDX0FERFIsIDB4YTApOworCXJlZ21h
cF93cml0ZShyZWdtYXAsIFJFR19ERENfT0ZGUywgb2Zmc2V0KTsKKwlyZWdtYXBfd3JpdGUocmVn
bWFwLCBSRUdfRERDX1NFR01fQUREUiwgMHg2MCk7CisJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVH
X0REQ19TRUdNLCBzZWdwdHIpOwogCiAJLyogZW5hYmxlIHJlYWRpbmcgRURJRDogKi8KIAlwcml2
LT53cV9lZGlkX3dhaXQgPSAxOwotCXJlZ193cml0ZShwcml2LCBSRUdfRURJRF9DVFJMLCAweDEp
OworCXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19FRElEX0NUUkwsIDB4MSk7CiAKIAkvKiBmbGFn
IG11c3QgYmUgY2xlYXJlZCBieSBzdzogKi8KLQlyZWdfd3JpdGUocHJpdiwgUkVHX0VESURfQ1RS
TCwgMHgwKTsKKwlyZWdtYXBfd3JpdGUocmVnbWFwLCBSRUdfRURJRF9DVFJMLCAweDApOwogCiAJ
Lyogd2FpdCBmb3IgYmxvY2sgcmVhZCB0byBjb21wbGV0ZTogKi8KIAlpZiAocHJpdi0+aGRtaS0+
aXJxKSB7CkBAIC0xMDc2LDEwICsxMDUyLDEwIEBAIHN0YXRpYyBpbnQgcmVhZF9lZGlkX2Jsb2Nr
KHZvaWQgKmRhdGEsIHU4ICpidWYsIHVuc2lnbmVkIGludCBibGssIHNpemVfdCBsZW5ndGgpCiAJ
fSBlbHNlIHsKIAkJZm9yIChpID0gMTAwOyBpID4gMDsgaS0tKSB7CiAJCQltc2xlZXAoMSk7Ci0J
CQlyZXQgPSByZWdfcmVhZChwcml2LCBSRUdfSU5UX0ZMQUdTXzIpOwotCQkJaWYgKHJldCA8IDAp
CisJCQlyZXQgPSByZWdtYXBfcmVhZChyZWdtYXAsIFJFR19JTlRfRkxBR1NfMiwgJmZsYWcyKTsK
KwkJCWlmIChyZXQpCiAJCQkJZ290byBmYWlsZWQ7Ci0JCQlpZiAocmV0ICYgSU5UX0ZMQUdTXzJf
RURJRF9CTEtfUkQpCisJCQlpZiAoZmxhZzIgJiBJTlRfRkxBR1NfMl9FRElEX0JMS19SRCkKIAkJ
CQlicmVhazsKIAkJfQogCX0KQEAgLTEwOTAsOCArMTA2Niw4IEBAIHN0YXRpYyBpbnQgcmVhZF9l
ZGlkX2Jsb2NrKHZvaWQgKmRhdGEsIHU4ICpidWYsIHVuc2lnbmVkIGludCBibGssIHNpemVfdCBs
ZW5ndGgpCiAJCWdvdG8gZmFpbGVkOwogCX0KIAotCXJldCA9IHJlZ19yZWFkX3JhbmdlKHByaXYs
IFJFR19FRElEX0RBVEFfMCwgYnVmLCBsZW5ndGgpOwotCWlmIChyZXQgIT0gbGVuZ3RoKSB7CisJ
cmV0ID0gcmVnbWFwX2J1bGtfcmVhZChyZWdtYXAsIFJFR19FRElEX0RBVEFfMCwgYnVmLCBsZW5n
dGgpOworCWlmIChyZXQpIHsKIAkJZGV2X2VycigmcHJpdi0+aGRtaS0+ZGV2LCAiZmFpbGVkIHRv
IHJlYWQgZWRpZCBibG9jayAlZDogJWRcbiIsCiAJCQlibGssIHJldCk7CiAJCWdvdG8gZmFpbGVk
OwpAQCAtMTEwNyw2ICsxMDgzLDcgQEAgc3RhdGljIGludCByZWFkX2VkaWRfYmxvY2sodm9pZCAq
ZGF0YSwgdTggKmJ1ZiwgdW5zaWduZWQgaW50IGJsaywgc2l6ZV90IGxlbmd0aCkKIHN0YXRpYyBp
bnQgdGRhOTk4eF9jb25uZWN0b3JfZ2V0X21vZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25u
ZWN0b3IpCiB7CiAJc3RydWN0IHRkYTk5OHhfcHJpdiAqcHJpdiA9IGNvbm5fdG9fdGRhOTk4eF9w
cml2KGNvbm5lY3Rvcik7CisJc3RydWN0IHJlZ21hcCAqcmVnbWFwID0gcHJpdi0+cmVnbWFwOwog
CXN0cnVjdCBlZGlkICplZGlkOwogCWludCBuOwogCkBAIC0xMTE5LDEyICsxMDk2LDEyIEBAIHN0
YXRpYyBpbnQgdGRhOTk4eF9jb25uZWN0b3JfZ2V0X21vZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9y
ICpjb25uZWN0b3IpCiAJCXJldHVybiAwOwogCiAJaWYgKHByaXYtPnJldiA9PSBUREExOTk4OCkK
LQkJcmVnX2NsZWFyKHByaXYsIFJFR19UWDQsIFRYNF9QRF9SQU0pOworCQlyZWdfY2xlYXIocmVn
bWFwLCBSRUdfVFg0LCBUWDRfUERfUkFNKTsKIAogCWVkaWQgPSBkcm1fZG9fZ2V0X2VkaWQoY29u
bmVjdG9yLCByZWFkX2VkaWRfYmxvY2ssIHByaXYpOwogCiAJaWYgKHByaXYtPnJldiA9PSBUREEx
OTk4OCkKLQkJcmVnX3NldChwcml2LCBSRUdfVFg0LCBUWDRfUERfUkFNKTsKKwkJcmVnX3NldChy
ZWdtYXAsIFJFR19UWDQsIFRYNF9QRF9SQU0pOwogCiAJaWYgKCFlZGlkKSB7CiAJCWRldl93YXJu
KCZwcml2LT5oZG1pLT5kZXYsICJmYWlsZWQgdG8gcmVhZCBFRElEXG4iKTsKQEAgLTEyMTgsMTYg
KzExOTUsMTcgQEAgc3RhdGljIGVudW0gZHJtX21vZGVfc3RhdHVzIHRkYTk5OHhfYnJpZGdlX21v
ZGVfdmFsaWQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKIHN0YXRpYyB2b2lkIHRkYTk5OHhf
YnJpZGdlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogewogCXN0cnVjdCB0ZGE5
OTh4X3ByaXYgKnByaXYgPSBicmlkZ2VfdG9fdGRhOTk4eF9wcml2KGJyaWRnZSk7CisJc3RydWN0
IHJlZ21hcCAqcmVnbWFwID0gcHJpdi0+cmVnbWFwOwogCiAJaWYgKCFwcml2LT5pc19vbikgewog
CQkvKiBlbmFibGUgdmlkZW8gcG9ydHMsIGF1ZGlvIHdpbGwgYmUgZW5hYmxlZCBsYXRlciAqLwot
CQlyZWdfd3JpdGUocHJpdiwgUkVHX0VOQV9WUF8wLCAweGZmKTsKLQkJcmVnX3dyaXRlKHByaXYs
IFJFR19FTkFfVlBfMSwgMHhmZik7Ci0JCXJlZ193cml0ZShwcml2LCBSRUdfRU5BX1ZQXzIsIDB4
ZmYpOworCQlyZWdtYXBfd3JpdGUocmVnbWFwLCBSRUdfRU5BX1ZQXzAsIDB4ZmYpOworCQlyZWdt
YXBfd3JpdGUocmVnbWFwLCBSRUdfRU5BX1ZQXzEsIDB4ZmYpOworCQlyZWdtYXBfd3JpdGUocmVn
bWFwLCBSRUdfRU5BX1ZQXzIsIDB4ZmYpOwogCQkvKiBzZXQgbXV4aW5nIGFmdGVyIGVuYWJsaW5n
IHBvcnRzOiAqLwotCQlyZWdfd3JpdGUocHJpdiwgUkVHX1ZJUF9DTlRSTF8wLCBwcml2LT52aXBf
Y250cmxfMCk7Ci0JCXJlZ193cml0ZShwcml2LCBSRUdfVklQX0NOVFJMXzEsIHByaXYtPnZpcF9j
bnRybF8xKTsKLQkJcmVnX3dyaXRlKHByaXYsIFJFR19WSVBfQ05UUkxfMiwgcHJpdi0+dmlwX2Nu
dHJsXzIpOworCQlyZWdtYXBfd3JpdGUocmVnbWFwLCBSRUdfVklQX0NOVFJMXzAsIHByaXYtPnZp
cF9jbnRybF8wKTsKKwkJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVHX1ZJUF9DTlRSTF8xLCBwcml2
LT52aXBfY250cmxfMSk7CisJCXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19WSVBfQ05UUkxfMiwg
cHJpdi0+dmlwX2NudHJsXzIpOwogCiAJCXByaXYtPmlzX29uID0gdHJ1ZTsKIAl9CkBAIC0xMjM2
LDEyICsxMjE0LDEzIEBAIHN0YXRpYyB2b2lkIHRkYTk5OHhfYnJpZGdlX2VuYWJsZShzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlKQogc3RhdGljIHZvaWQgdGRhOTk4eF9icmlkZ2VfZGlzYWJsZShz
dHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogewogCXN0cnVjdCB0ZGE5OTh4X3ByaXYgKnByaXYg
PSBicmlkZ2VfdG9fdGRhOTk4eF9wcml2KGJyaWRnZSk7CisJc3RydWN0IHJlZ21hcCAqcmVnbWFw
ID0gcHJpdi0+cmVnbWFwOwogCiAJaWYgKHByaXYtPmlzX29uKSB7CiAJCS8qIGRpc2FibGUgdmlk
ZW8gcG9ydHMgKi8KLQkJcmVnX3dyaXRlKHByaXYsIFJFR19FTkFfVlBfMCwgMHgwMCk7Ci0JCXJl
Z193cml0ZShwcml2LCBSRUdfRU5BX1ZQXzEsIDB4MDApOwotCQlyZWdfd3JpdGUocHJpdiwgUkVH
X0VOQV9WUF8yLCAweDAwKTsKKwkJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVHX0VOQV9WUF8wLCAw
eDAwKTsKKwkJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVHX0VOQV9WUF8xLCAweDAwKTsKKwkJcmVn
bWFwX3dyaXRlKHJlZ21hcCwgUkVHX0VOQV9WUF8yLCAweDAwKTsKIAogCQlwcml2LT5pc19vbiA9
IGZhbHNlOwogCX0KQEAgLTEyNTIsNiArMTIzMSw3IEBAIHN0YXRpYyB2b2lkIHRkYTk5OHhfYnJp
ZGdlX21vZGVfc2V0KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJCQkJICAgIGNvbnN0IHN0
cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlKQogewogCXN0cnVjdCB0ZGE5OTh4
X3ByaXYgKnByaXYgPSBicmlkZ2VfdG9fdGRhOTk4eF9wcml2KGJyaWRnZSk7CisJc3RydWN0IHJl
Z21hcCAqcmVnbWFwID0gcHJpdi0+cmVnbWFwOwogCXVuc2lnbmVkIGxvbmcgdG1kc19jbG9jazsK
IAl1MTYgcmVmX3BpeCwgcmVmX2xpbmUsIG5fcGl4LCBuX2xpbmU7CiAJdTE2IGhzX3BpeF9zLCBo
c19waXhfZTsKQEAgLTEzNDAsNDMgKzEzMjAsNDMgQEAgc3RhdGljIHZvaWQgdGRhOTk4eF9icmlk
Z2VfbW9kZV9zZXQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKIAltdXRleF9sb2NrKCZwcml2
LT5hdWRpb19tdXRleCk7CiAKIAkvKiBtdXRlIHRoZSBhdWRpbyBGSUZPOiAqLwotCXJlZ19zZXQo
cHJpdiwgUkVHX0FJUF9DTlRSTF8wLCBBSVBfQ05UUkxfMF9SU1RfRklGTyk7CisJcmVnX3NldChy
ZWdtYXAsIFJFR19BSVBfQ05UUkxfMCwgQUlQX0NOVFJMXzBfUlNUX0ZJRk8pOwogCiAJLyogc2V0
IEhETUkgSERDUCBtb2RlIG9mZjogKi8KLQlyZWdfd3JpdGUocHJpdiwgUkVHX1RCR19DTlRSTF8x
LCBUQkdfQ05UUkxfMV9EV0lOX0RJUyk7Ci0JcmVnX2NsZWFyKHByaXYsIFJFR19UWDMzLCBUWDMz
X0hETUkpOwotCXJlZ193cml0ZShwcml2LCBSRUdfRU5DX0NOVFJMLCBFTkNfQ05UUkxfQ1RMX0NP
REUoMCkpOworCXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19UQkdfQ05UUkxfMSwgVEJHX0NOVFJM
XzFfRFdJTl9ESVMpOworCXJlZ19jbGVhcihyZWdtYXAsIFJFR19UWDMzLCBUWDMzX0hETUkpOwor
CXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19FTkNfQ05UUkwsIEVOQ19DTlRSTF9DVExfQ09ERSgw
KSk7CiAKIAkvKiBubyBwcmUtZmlsdGVyIG9yIGludGVycG9sYXRvcjogKi8KLQlyZWdfd3JpdGUo
cHJpdiwgUkVHX0hWRl9DTlRSTF8wLCBIVkZfQ05UUkxfMF9QUkVGSUwoMCkgfAorCXJlZ21hcF93
cml0ZShyZWdtYXAsIFJFR19IVkZfQ05UUkxfMCwgSFZGX0NOVFJMXzBfUFJFRklMKDApIHwKIAkJ
CUhWRl9DTlRSTF8wX0lOVFBPTCgwKSk7Ci0JcmVnX3NldChwcml2LCBSRUdfRkVBVF9QT1dFUkRP
V04sIEZFQVRfUE9XRVJET1dOX1BSRUZJTFQpOwotCXJlZ193cml0ZShwcml2LCBSRUdfVklQX0NO
VFJMXzUsIFZJUF9DTlRSTF81X1NQX0NOVCgwKSk7Ci0JcmVnX3dyaXRlKHByaXYsIFJFR19WSVBf
Q05UUkxfNCwgVklQX0NOVFJMXzRfQkxBTktJVCgwKSB8CisJcmVnX3NldChyZWdtYXAsIFJFR19G
RUFUX1BPV0VSRE9XTiwgRkVBVF9QT1dFUkRPV05fUFJFRklMVCk7CisJcmVnbWFwX3dyaXRlKHJl
Z21hcCwgUkVHX1ZJUF9DTlRSTF81LCBWSVBfQ05UUkxfNV9TUF9DTlQoMCkpOworCXJlZ21hcF93
cml0ZShyZWdtYXAsIFJFR19WSVBfQ05UUkxfNCwgVklQX0NOVFJMXzRfQkxBTktJVCgwKSB8CiAJ
CQlWSVBfQ05UUkxfNF9CTEMoMCkpOwogCi0JcmVnX2NsZWFyKHByaXYsIFJFR19QTExfU0VSSUFM
XzEsIFBMTF9TRVJJQUxfMV9TUkxfTUFOX0laKTsKLQlyZWdfY2xlYXIocHJpdiwgUkVHX1BMTF9T
RVJJQUxfMywgUExMX1NFUklBTF8zX1NSTF9DQ0lSIHwKKwlyZWdfY2xlYXIocmVnbWFwLCBSRUdf
UExMX1NFUklBTF8xLCBQTExfU0VSSUFMXzFfU1JMX01BTl9JWik7CisJcmVnX2NsZWFyKHJlZ21h
cCwgUkVHX1BMTF9TRVJJQUxfMywgUExMX1NFUklBTF8zX1NSTF9DQ0lSIHwKIAkJCQkJICBQTExf
U0VSSUFMXzNfU1JMX0RFKTsKLQlyZWdfd3JpdGUocHJpdiwgUkVHX1NFUklBTElaRVIsIDApOwot
CXJlZ193cml0ZShwcml2LCBSRUdfSFZGX0NOVFJMXzEsIEhWRl9DTlRSTF8xX1ZRUigwKSk7CisJ
cmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVHX1NFUklBTElaRVIsIDApOworCXJlZ21hcF93cml0ZShy
ZWdtYXAsIFJFR19IVkZfQ05UUkxfMSwgSFZGX0NOVFJMXzFfVlFSKDApKTsKIAogCS8qIFRPRE8g
ZW5hYmxlIHBpeGVsIHJlcGVhdCBmb3IgcGl4ZWwgcmF0ZXMgbGVzcyB0aGFuIDI1TXNhbXAvcyAq
LwogCXJlcCA9IDA7Ci0JcmVnX3dyaXRlKHByaXYsIFJFR19SUFRfQ05UUkwsIDApOwotCXJlZ193
cml0ZShwcml2LCBSRUdfU0VMX0NMSywgU0VMX0NMS19TRUxfVlJGX0NMSygwKSB8CisJcmVnbWFw
X3dyaXRlKHJlZ21hcCwgUkVHX1JQVF9DTlRSTCwgMCk7CisJcmVnbWFwX3dyaXRlKHJlZ21hcCwg
UkVHX1NFTF9DTEssIFNFTF9DTEtfU0VMX1ZSRl9DTEsoMCkgfAogCQkJU0VMX0NMS19TRUxfQ0xL
MSB8IFNFTF9DTEtfRU5BX1NDX0NMSyk7CiAKLQlyZWdfd3JpdGUocHJpdiwgUkVHX1BMTF9TRVJJ
QUxfMiwgUExMX1NFUklBTF8yX1NSTF9OT1NDKGRpdikgfAorCXJlZ21hcF93cml0ZShyZWdtYXAs
IFJFR19QTExfU0VSSUFMXzIsIFBMTF9TRVJJQUxfMl9TUkxfTk9TQyhkaXYpIHwKIAkJCVBMTF9T
RVJJQUxfMl9TUkxfUFIocmVwKSk7CiAKIAkvKiBzZXQgY29sb3IgbWF0cml4IGJ5cGFzcyBmbGFn
OiAqLwotCXJlZ193cml0ZShwcml2LCBSRUdfTUFUX0NPTlRSTCwgTUFUX0NPTlRSTF9NQVRfQlAg
fAorCXJlZ21hcF93cml0ZShyZWdtYXAsIFJFR19NQVRfQ09OVFJMLCBNQVRfQ09OVFJMX01BVF9C
UCB8CiAJCQkJTUFUX0NPTlRSTF9NQVRfU0MoMSkpOwotCXJlZ19zZXQocHJpdiwgUkVHX0ZFQVRf
UE9XRVJET1dOLCBGRUFUX1BPV0VSRE9XTl9DU0MpOworCXJlZ19zZXQocmVnbWFwLCBSRUdfRkVB
VF9QT1dFUkRPV04sIEZFQVRfUE9XRVJET1dOX0NTQyk7CiAKIAkvKiBzZXQgQklBUyB0bWRzIHZh
bHVlOiAqLwotCXJlZ193cml0ZShwcml2LCBSRUdfQU5BX0dFTkVSQUwsIDB4MDkpOworCXJlZ21h
cF93cml0ZShyZWdtYXAsIFJFR19BTkFfR0VORVJBTCwgMHgwOSk7CiAKIAkvKgogCSAqIFN5bmMg
b24gcmlzaW5nIEhTWU5DL1ZTWU5DCkBAIC0xMzkxLDMzICsxMzcxLDMzIEBAIHN0YXRpYyB2b2lk
IHRkYTk5OHhfYnJpZGdlX21vZGVfc2V0KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJCXJl
ZyB8PSBWSVBfQ05UUkxfM19IX1RHTDsKIAlpZiAobW9kZS0+ZmxhZ3MgJiBEUk1fTU9ERV9GTEFH
X05WU1lOQykKIAkJcmVnIHw9IFZJUF9DTlRSTF8zX1ZfVEdMOwotCXJlZ193cml0ZShwcml2LCBS
RUdfVklQX0NOVFJMXzMsIHJlZyk7Ci0KLQlyZWdfd3JpdGUocHJpdiwgUkVHX1ZJREZPUk1BVCwg
MHgwMCk7Ci0JcmVnX3dyaXRlMTYocHJpdiwgUkVHX1JFRlBJWF9NU0IsIHJlZl9waXgpOwotCXJl
Z193cml0ZTE2KHByaXYsIFJFR19SRUZMSU5FX01TQiwgcmVmX2xpbmUpOwotCXJlZ193cml0ZTE2
KHByaXYsIFJFR19OUElYX01TQiwgbl9waXgpOwotCXJlZ193cml0ZTE2KHByaXYsIFJFR19OTElO
RV9NU0IsIG5fbGluZSk7Ci0JcmVnX3dyaXRlMTYocHJpdiwgUkVHX1ZTX0xJTkVfU1RSVF8xX01T
QiwgdnMxX2xpbmVfcyk7Ci0JcmVnX3dyaXRlMTYocHJpdiwgUkVHX1ZTX1BJWF9TVFJUXzFfTVNC
LCB2czFfcGl4X3MpOwotCXJlZ193cml0ZTE2KHByaXYsIFJFR19WU19MSU5FX0VORF8xX01TQiwg
dnMxX2xpbmVfZSk7Ci0JcmVnX3dyaXRlMTYocHJpdiwgUkVHX1ZTX1BJWF9FTkRfMV9NU0IsIHZz
MV9waXhfZSk7Ci0JcmVnX3dyaXRlMTYocHJpdiwgUkVHX1ZTX0xJTkVfU1RSVF8yX01TQiwgdnMy
X2xpbmVfcyk7Ci0JcmVnX3dyaXRlMTYocHJpdiwgUkVHX1ZTX1BJWF9TVFJUXzJfTVNCLCB2czJf
cGl4X3MpOwotCXJlZ193cml0ZTE2KHByaXYsIFJFR19WU19MSU5FX0VORF8yX01TQiwgdnMyX2xp
bmVfZSk7Ci0JcmVnX3dyaXRlMTYocHJpdiwgUkVHX1ZTX1BJWF9FTkRfMl9NU0IsIHZzMl9waXhf
ZSk7Ci0JcmVnX3dyaXRlMTYocHJpdiwgUkVHX0hTX1BJWF9TVEFSVF9NU0IsIGhzX3BpeF9zKTsK
LQlyZWdfd3JpdGUxNihwcml2LCBSRUdfSFNfUElYX1NUT1BfTVNCLCBoc19waXhfZSk7Ci0JcmVn
X3dyaXRlMTYocHJpdiwgUkVHX1ZXSU5fU1RBUlRfMV9NU0IsIHZ3aW4xX2xpbmVfcyk7Ci0JcmVn
X3dyaXRlMTYocHJpdiwgUkVHX1ZXSU5fRU5EXzFfTVNCLCB2d2luMV9saW5lX2UpOwotCXJlZ193
cml0ZTE2KHByaXYsIFJFR19WV0lOX1NUQVJUXzJfTVNCLCB2d2luMl9saW5lX3MpOwotCXJlZ193
cml0ZTE2KHByaXYsIFJFR19WV0lOX0VORF8yX01TQiwgdndpbjJfbGluZV9lKTsKLQlyZWdfd3Jp
dGUxNihwcml2LCBSRUdfREVfU1RBUlRfTVNCLCBkZV9waXhfcyk7Ci0JcmVnX3dyaXRlMTYocHJp
diwgUkVHX0RFX1NUT1BfTVNCLCBkZV9waXhfZSk7CisJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVH
X1ZJUF9DTlRSTF8zLCByZWcpOworCisJcmVnbWFwX3dyaXRlKHJlZ21hcCwgUkVHX1ZJREZPUk1B
VCwgMHgwMCk7CisJcmVnX3dyaXRlMTYocmVnbWFwLCBSRUdfUkVGUElYX01TQiwgcmVmX3BpeCk7
CisJcmVnX3dyaXRlMTYocmVnbWFwLCBSRUdfUkVGTElORV9NU0IsIHJlZl9saW5lKTsKKwlyZWdf
d3JpdGUxNihyZWdtYXAsIFJFR19OUElYX01TQiwgbl9waXgpOworCXJlZ193cml0ZTE2KHJlZ21h
cCwgUkVHX05MSU5FX01TQiwgbl9saW5lKTsKKwlyZWdfd3JpdGUxNihyZWdtYXAsIFJFR19WU19M
SU5FX1NUUlRfMV9NU0IsIHZzMV9saW5lX3MpOworCXJlZ193cml0ZTE2KHJlZ21hcCwgUkVHX1ZT
X1BJWF9TVFJUXzFfTVNCLCB2czFfcGl4X3MpOworCXJlZ193cml0ZTE2KHJlZ21hcCwgUkVHX1ZT
X0xJTkVfRU5EXzFfTVNCLCB2czFfbGluZV9lKTsKKwlyZWdfd3JpdGUxNihyZWdtYXAsIFJFR19W
U19QSVhfRU5EXzFfTVNCLCB2czFfcGl4X2UpOworCXJlZ193cml0ZTE2KHJlZ21hcCwgUkVHX1ZT
X0xJTkVfU1RSVF8yX01TQiwgdnMyX2xpbmVfcyk7CisJcmVnX3dyaXRlMTYocmVnbWFwLCBSRUdf
VlNfUElYX1NUUlRfMl9NU0IsIHZzMl9waXhfcyk7CisJcmVnX3dyaXRlMTYocmVnbWFwLCBSRUdf
VlNfTElORV9FTkRfMl9NU0IsIHZzMl9saW5lX2UpOworCXJlZ193cml0ZTE2KHJlZ21hcCwgUkVH
X1ZTX1BJWF9FTkRfMl9NU0IsIHZzMl9waXhfZSk7CisJcmVnX3dyaXRlMTYocmVnbWFwLCBSRUdf
SFNfUElYX1NUQVJUX01TQiwgaHNfcGl4X3MpOworCXJlZ193cml0ZTE2KHJlZ21hcCwgUkVHX0hT
X1BJWF9TVE9QX01TQiwgaHNfcGl4X2UpOworCXJlZ193cml0ZTE2KHJlZ21hcCwgUkVHX1ZXSU5f
U1RBUlRfMV9NU0IsIHZ3aW4xX2xpbmVfcyk7CisJcmVnX3dyaXRlMTYocmVnbWFwLCBSRUdfVldJ
Tl9FTkRfMV9NU0IsIHZ3aW4xX2xpbmVfZSk7CisJcmVnX3dyaXRlMTYocmVnbWFwLCBSRUdfVldJ
Tl9TVEFSVF8yX01TQiwgdndpbjJfbGluZV9zKTsKKwlyZWdfd3JpdGUxNihyZWdtYXAsIFJFR19W
V0lOX0VORF8yX01TQiwgdndpbjJfbGluZV9lKTsKKwlyZWdfd3JpdGUxNihyZWdtYXAsIFJFR19E
RV9TVEFSVF9NU0IsIGRlX3BpeF9zKTsKKwlyZWdfd3JpdGUxNihyZWdtYXAsIFJFR19ERV9TVE9Q
X01TQiwgZGVfcGl4X2UpOwogCiAJaWYgKHByaXYtPnJldiA9PSBUREExOTk4OCkgewogCQkvKiBs
ZXQgaW5jb21pbmcgcGl4ZWxzIGZpbGwgdGhlIGFjdGl2ZSBzcGFjZSAoaWYgYW55KSAqLwotCQly
ZWdfd3JpdGUocHJpdiwgUkVHX0VOQUJMRV9TUEFDRSwgMHgwMCk7CisJCXJlZ21hcF93cml0ZShy
ZWdtYXAsIFJFR19FTkFCTEVfU1BBQ0UsIDB4MDApOwogCX0KIAogCS8qCkBAIC0xNDI5LDEwICsx
NDA5LDEwIEBAIHN0YXRpYyB2b2lkIHRkYTk5OHhfYnJpZGdlX21vZGVfc2V0KHN0cnVjdCBkcm1f
YnJpZGdlICpicmlkZ2UsCiAJCXJlZyB8PSBUQkdfQ05UUkxfMV9IX1RHTDsKIAlpZiAobW9kZS0+
ZmxhZ3MgJiBEUk1fTU9ERV9GTEFHX05WU1lOQykKIAkJcmVnIHw9IFRCR19DTlRSTF8xX1ZfVEdM
OwotCXJlZ193cml0ZShwcml2LCBSRUdfVEJHX0NOVFJMXzEsIHJlZyk7CisJcmVnbWFwX3dyaXRl
KHJlZ21hcCwgUkVHX1RCR19DTlRSTF8xLCByZWcpOwogCiAJLyogbXVzdCBiZSBsYXN0IHJlZ2lz
dGVyIHNldDogKi8KLQlyZWdfd3JpdGUocHJpdiwgUkVHX1RCR19DTlRSTF8wLCAwKTsKKwlyZWdt
YXBfd3JpdGUocmVnbWFwLCBSRUdfVEJHX0NOVFJMXzAsIDApOwogCiAJcHJpdi0+dG1kc19jbG9j
ayA9IGFkanVzdGVkX21vZGUtPmNsb2NrOwogCkBAIC0xNDUyLDkgKzE0MzIsOSBAQCBzdGF0aWMg
dm9pZCB0ZGE5OTh4X2JyaWRnZV9tb2RlX3NldChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAog
CWlmIChwcml2LT5zdXBwb3J0c19pbmZvZnJhbWVzKSB7CiAJCS8qIFdlIG5lZWQgdG8gdHVybiBI
RE1JIEhEQ1Agc3R1ZmYgb24gdG8gZ2V0IGF1ZGlvIHRocm91Z2ggKi8KIAkJcmVnICY9IH5UQkdf
Q05UUkxfMV9EV0lOX0RJUzsKLQkJcmVnX3dyaXRlKHByaXYsIFJFR19UQkdfQ05UUkxfMSwgcmVn
KTsKLQkJcmVnX3dyaXRlKHByaXYsIFJFR19FTkNfQ05UUkwsIEVOQ19DTlRSTF9DVExfQ09ERSgx
KSk7Ci0JCXJlZ19zZXQocHJpdiwgUkVHX1RYMzMsIFRYMzNfSERNSSk7CisJCXJlZ21hcF93cml0
ZShyZWdtYXAsIFJFR19UQkdfQ05UUkxfMSwgcmVnKTsKKwkJcmVnbWFwX3dyaXRlKHJlZ21hcCwg
UkVHX0VOQ19DTlRSTCwgRU5DX0NOVFJMX0NUTF9DT0RFKDEpKTsKKwkJcmVnX3NldChyZWdtYXAs
IFJFR19UWDMzLCBUWDMzX0hETUkpOwogCiAJCXRkYTk5OHhfd3JpdGVfYXZpKHByaXYsIGFkanVz
dGVkX21vZGUpOwogCkBAIC0xNTQ2LDcgKzE1MjYsNyBAQCBzdGF0aWMgdm9pZCB0ZGE5OTh4X2Rl
c3Ryb3koc3RydWN0IGRldmljZSAqZGV2KQogCiAJLyogZGlzYWJsZSBhbGwgSVJRcyBhbmQgZnJl
ZSB0aGUgSVJRIGhhbmRsZXIgKi8KIAljZWNfd3JpdGUocHJpdiwgUkVHX0NFQ19SWFNIUERJTlRF
TkEsIDApOwotCXJlZ19jbGVhcihwcml2LCBSRUdfSU5UX0ZMQUdTXzIsIElOVF9GTEFHU18yX0VE
SURfQkxLX1JEKTsKKwlyZWdfY2xlYXIocHJpdi0+cmVnbWFwLCBSRUdfSU5UX0ZMQUdTXzIsIElO
VF9GTEFHU18yX0VESURfQkxLX1JEKTsKIAogCWlmIChwcml2LT5hdWRpb19wZGV2KQogCQlwbGF0
Zm9ybV9kZXZpY2VfdW5yZWdpc3Rlcihwcml2LT5hdWRpb19wZGV2KTsKQEAgLTE3NzMsOSArMTc1
MywxMCBAQCBzdGF0aWMgaW50IHRkYTk5OHhfY3JlYXRlKHN0cnVjdCBkZXZpY2UgKmRldikKIAlz
dHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50ID0gdG9faTJjX2NsaWVudChkZXYpOwogCXN0cnVjdCBk
ZXZpY2Vfbm9kZSAqbnAgPSBjbGllbnQtPmRldi5vZl9ub2RlOwogCXN0cnVjdCBpMmNfYm9hcmRf
aW5mbyBjZWNfaW5mbzsKKwl1bnNpZ25lZCBpbnQgcmV2X2xvLCByZXZfaGksIGR1bW15OwogCXN0
cnVjdCB0ZGE5OTh4X3ByaXYgKnByaXY7CiAJdTMyIHZpZGVvOwotCWludCByZXZfbG8sIHJldl9o
aSwgcmV0OworCWludCByZXQ7CiAKIAlwcml2ID0gZGV2bV9remFsbG9jKGRldiwgc2l6ZW9mKCpw
cml2KSwgR0ZQX0tFUk5FTCk7CiAJaWYgKCFwcml2KQpAQCAtMTgxMSwxNiArMTc5MiwxNiBAQCBz
dGF0aWMgaW50IHRkYTk5OHhfY3JlYXRlKHN0cnVjdCBkZXZpY2UgKmRldikKIAl0ZGE5OTh4X3Jl
c2V0KHByaXYpOwogCiAJLyogcmVhZCB2ZXJzaW9uOiAqLwotCXJldl9sbyA9IHJlZ19yZWFkKHBy
aXYsIFJFR19WRVJTSU9OX0xTQik7Ci0JaWYgKHJldl9sbyA8IDApIHsKLQkJZGV2X2VycihkZXYs
ICJmYWlsZWQgdG8gcmVhZCB2ZXJzaW9uOiAlZFxuIiwgcmV2X2xvKTsKLQkJcmV0dXJuIHJldl9s
bzsKKwlyZXQgPSByZWdtYXBfcmVhZChwcml2LT5yZWdtYXAsIFJFR19WRVJTSU9OX0xTQiwgJnJl
dl9sbyk7CisJaWYgKHJldCkgeworCQlkZXZfZXJyKGRldiwgImZhaWxlZCB0byByZWFkIHZlcnNp
b246ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OwogCX0KIAotCXJldl9oaSA9IHJlZ19yZWFk
KHByaXYsIFJFR19WRVJTSU9OX01TQik7Ci0JaWYgKHJldl9oaSA8IDApIHsKLQkJZGV2X2Vycihk
ZXYsICJmYWlsZWQgdG8gcmVhZCB2ZXJzaW9uOiAlZFxuIiwgcmV2X2hpKTsKLQkJcmV0dXJuIHJl
dl9oaTsKKwlyZXQgPSByZWdtYXBfcmVhZChwcml2LT5yZWdtYXAsIFJFR19WRVJTSU9OX01TQiwg
JnJldl9oaSk7CisJaWYgKHJldCkgeworCQlkZXZfZXJyKGRldiwgImZhaWxlZCB0byByZWFkIHZl
cnNpb246ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OwogCX0KIAogCXByaXYtPnJldiA9IHJl
dl9sbyB8IHJldl9oaSA8PCA4OwpAQCAtMTg0NywxNCArMTgyOCwxNCBAQCBzdGF0aWMgaW50IHRk
YTk5OHhfY3JlYXRlKHN0cnVjdCBkZXZpY2UgKmRldikKIAl9CiAKIAkvKiBhZnRlciByZXNldCwg
ZW5hYmxlIEREQzogKi8KLQlyZWdfd3JpdGUocHJpdiwgUkVHX0REQ19ESVNBQkxFLCAweDAwKTsK
KwlyZWdtYXBfd3JpdGUocHJpdi0+cmVnbWFwLCBSRUdfRERDX0RJU0FCTEUsIDB4MDApOwogCiAJ
Lyogc2V0IGNsb2NrIG9uIEREQyBjaGFubmVsOiAqLwotCXJlZ193cml0ZShwcml2LCBSRUdfVFgz
LCAzOSk7CisJcmVnbWFwX3dyaXRlKHByaXYtPnJlZ21hcCwgUkVHX1RYMywgMzkpOwogCiAJLyog
aWYgbmVjZXNzYXJ5LCBkaXNhYmxlIG11bHRpLW1hc3RlcjogKi8KIAlpZiAocHJpdi0+cmV2ID09
IFREQTE5OTg5KQotCQlyZWdfc2V0KHByaXYsIFJFR19JMkNfTUFTVEVSLCBJMkNfTUFTVEVSX0RJ
U19NTSk7CisJCXJlZ19zZXQocHJpdi0+cmVnbWFwLCBSRUdfSTJDX01BU1RFUiwgSTJDX01BU1RF
Ul9ESVNfTU0pOwogCiAJY2VjX3dyaXRlKHByaXYsIFJFR19DRUNfRlJPX0lNX0NMS19DVFJMLAog
CQkJQ0VDX0ZST19JTV9DTEtfQ1RSTF9HSE9TVF9ESVMgfCBDRUNfRlJPX0lNX0NMS19DVFJMX0lN
Q0xLX1NFTCk7CkBAIC0xODY0LDkgKzE4NDUsOSBAQCBzdGF0aWMgaW50IHRkYTk5OHhfY3JlYXRl
KHN0cnVjdCBkZXZpY2UgKmRldikKIAogCS8qIGNsZWFyIHBlbmRpbmcgaW50ZXJydXB0cyAqLwog
CWNlY19yZWFkKHByaXYsIFJFR19DRUNfUlhTSFBESU5UKTsKLQlyZWdfcmVhZChwcml2LCBSRUdf
SU5UX0ZMQUdTXzApOwotCXJlZ19yZWFkKHByaXYsIFJFR19JTlRfRkxBR1NfMSk7Ci0JcmVnX3Jl
YWQocHJpdiwgUkVHX0lOVF9GTEFHU18yKTsKKwlyZWdtYXBfcmVhZChwcml2LT5yZWdtYXAsIFJF
R19JTlRfRkxBR1NfMCwgJmR1bW15KTsKKwlyZWdtYXBfcmVhZChwcml2LT5yZWdtYXAsIFJFR19J
TlRfRkxBR1NfMSwgJmR1bW15KTsKKwlyZWdtYXBfcmVhZChwcml2LT5yZWdtYXAsIFJFR19JTlRf
RkxBR1NfMiwgJmR1bW15KTsKIAogCS8qIGluaXRpYWxpemUgdGhlIG9wdGlvbmFsIElSUSAqLwog
CWlmIChjbGllbnQtPmlycSkgewpAQCAtMTkyOCw3ICsxOTA5LDcgQEAgc3RhdGljIGludCB0ZGE5
OTh4X2NyZWF0ZShzdHJ1Y3QgZGV2aWNlICpkZXYpCiAJfQogCiAJLyogZW5hYmxlIEVESUQgcmVh
ZCBpcnE6ICovCi0JcmVnX3NldChwcml2LCBSRUdfSU5UX0ZMQUdTXzIsIElOVF9GTEFHU18yX0VE
SURfQkxLX1JEKTsKKwlyZWdfc2V0KHByaXYtPnJlZ21hcCwgUkVHX0lOVF9GTEFHU18yLCBJTlRf
RkxBR1NfMl9FRElEX0JMS19SRCk7CiAKIAlpZiAobnApIHsKIAkJLyogZ2V0IHRoZSBkZXZpY2Ug
dHJlZSBwYXJhbWV0ZXJzICovCi0tIAoyLjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2RyaS1kZXZlbA==
