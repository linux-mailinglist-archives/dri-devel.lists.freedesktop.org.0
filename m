Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 375BBE81CB
	for <lists+dri-devel@lfdr.de>; Tue, 29 Oct 2019 08:06:34 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3D5856E0AF;
	Tue, 29 Oct 2019 07:06:22 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6D95C6E0BF
 for <dri-devel@lists.freedesktop.org>; Tue, 29 Oct 2019 07:06:21 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id C52EDB47D;
 Tue, 29 Oct 2019 07:06:19 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: daniel@ffwll.ch,
	noralf@tronnes.org
Subject: [PATCH 2/2] drm/fb-helper: Remove drm_fb_helper_fbdev_{setup,
 teardown}()
Date: Tue, 29 Oct 2019 08:06:16 +0100
Message-Id: <20191029070616.3521-3-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191029070616.3521-1-tzimmermann@suse.de>
References: <20191029070616.3521-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Qm90aCBmdW5jdGlvbnMgYXJlIHVudXNlZCBhbmQgY2FuIGJlIHJlbW92ZWQuIERyaXZlcnMgc2hv
dWxkIHVzZQpkcm1fZmJkZXZfZ2VuZXJpY19zZXR1cCgpIGluc3RlYWQuCgpTaWduZWQtb2ZmLWJ5
OiBUaG9tYXMgWmltbWVybWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4KLS0tCiBkcml2ZXJzL2dw
dS9kcm0vZHJtX2ZiX2hlbHBlci5jIHwgMTA5ICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCiBpbmNsdWRlL2RybS9kcm1fZmJfaGVscGVyLmggICAgIHwgIDI1IC0tLS0tLS0tCiAyIGZp
bGVzIGNoYW5nZWQsIDEgaW5zZXJ0aW9uKCspLCAxMzMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2RybV9mYl9oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1f
ZmJfaGVscGVyLmMKaW5kZXggOGViZWNjZGVlZDIzLi4xMDM4YTJmMDYzOWUgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9kcm1fZmJfaGVscGVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ry
bV9mYl9oZWxwZXIuYwpAQCAtOTUsMTAgKzk1LDYgQEAgc3RhdGljIERFRklORV9NVVRFWChrZXJu
ZWxfZmJfaGVscGVyX2xvY2spOwogICogSXQgd2lsbCBhdXRvbWF0aWNhbGx5IHNldCB1cCBkZWZl
cnJlZCBJL08gaWYgdGhlIGRyaXZlciByZXF1aXJlcyBhIHNoYWRvdwogICogYnVmZmVyLgogICoK
LSAqIEZvciBvdGhlciBkcml2ZXJzLCBzZXR1cCBmYmRldiBlbXVsYXRpb24gYnkgY2FsbGluZwot
ICogZHJtX2ZiX2hlbHBlcl9mYmRldl9zZXR1cCgpIGFuZCB0ZWFyIGl0IGRvd24gYnkgY2FsbGlu
ZwotICogZHJtX2ZiX2hlbHBlcl9mYmRldl90ZWFyZG93bigpLgotICoKICAqIEF0IHJ1bnRpbWUg
ZHJpdmVycyBzaG91bGQgcmVzdG9yZSB0aGUgZmJkZXYgY29uc29sZSBieSB1c2luZwogICogZHJt
X2ZiX2hlbHBlcl9sYXN0Y2xvc2UoKSBhcyB0aGVpciAmZHJtX2RyaXZlci5sYXN0Y2xvc2UgY2Fs
bGJhY2suCiAgKiBUaGV5IHNob3VsZCBhbHNvIG5vdGlmeSB0aGUgZmIgaGVscGVyIGNvZGUgZnJv
bSB1cGRhdGVzIHRvIHRoZSBvdXRwdXQKQEAgLTE5MTksMTA4ICsxOTE1LDYgQEAgaW50IGRybV9m
Yl9oZWxwZXJfaG90cGx1Z19ldmVudChzdHJ1Y3QgZHJtX2ZiX2hlbHBlciAqZmJfaGVscGVyKQog
fQogRVhQT1JUX1NZTUJPTChkcm1fZmJfaGVscGVyX2hvdHBsdWdfZXZlbnQpOwogCi0vKioKLSAq
IGRybV9mYl9oZWxwZXJfZmJkZXZfc2V0dXAoKSAtIFNldHVwIGZiZGV2IGVtdWxhdGlvbgotICog
QGRldjogRFJNIGRldmljZQotICogQGZiX2hlbHBlcjogZmJkZXYgaGVscGVyIHN0cnVjdHVyZSB0
byBzZXQgdXAKLSAqIEBmdW5jczogZmJkZXYgaGVscGVyIGZ1bmN0aW9ucwotICogQHByZWZlcnJl
ZF9icHA6IFByZWZlcnJlZCBiaXRzIHBlciBwaXhlbCBmb3IgdGhlIGRldmljZS4KLSAqICAgICAg
ICAgICAgICAgICBAZGV2LT5tb2RlX2NvbmZpZy5wcmVmZXJyZWRfZGVwdGggaXMgdXNlZCBpZiB0
aGlzIGlzIHplcm8uCi0gKiBAbWF4X2Nvbm5fY291bnQ6IE1heGltdW0gbnVtYmVyIG9mIGNvbm5l
Y3RvcnMgKG5vdCB1c2VkKQotICoKLSAqIFRoaXMgZnVuY3Rpb24gc2V0cyB1cCBmYmRldiBlbXVs
YXRpb24gYW5kIHJlZ2lzdGVycyBmYmRldiBmb3IgYWNjZXNzIGJ5Ci0gKiB1c2Vyc3BhY2UuIElm
IGFsbCBjb25uZWN0b3JzIGFyZSBkaXNjb25uZWN0ZWQsIHNldHVwIGlzIGRlZmVycmVkIHRvIHRo
ZSBuZXh0Ci0gKiB0aW1lIGRybV9mYl9oZWxwZXJfaG90cGx1Z19ldmVudCgpIGlzIGNhbGxlZC4K
LSAqIFRoZSBjYWxsZXIgbXVzdCB0byBwcm92aWRlIGEgJmRybV9mYl9oZWxwZXJfZnVuY3MtPmZi
X3Byb2JlIGNhbGxiYWNrCi0gKiBmdW5jdGlvbi4KLSAqCi0gKiBVc2UgZHJtX2ZiX2hlbHBlcl9m
YmRldl90ZWFyZG93bigpIHRvIGRlc3Ryb3kgdGhlIGZiZGV2LgotICoKLSAqIFNlZSBhbHNvOiBk
cm1fZmJfaGVscGVyX2luaXRpYWxfY29uZmlnKCksIGRybV9mYmRldl9nZW5lcmljX3NldHVwKCku
Ci0gKgotICogUmV0dXJuczoKLSAqIFplcm8gb24gc3VjY2VzcyBvciBuZWdhdGl2ZSBlcnJvciBj
b2RlIG9uIGZhaWx1cmUuCi0gKi8KLWludCBkcm1fZmJfaGVscGVyX2ZiZGV2X3NldHVwKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsCi0JCQkgICAgICBzdHJ1Y3QgZHJtX2ZiX2hlbHBlciAqZmJfaGVs
cGVyLAotCQkJICAgICAgY29uc3Qgc3RydWN0IGRybV9mYl9oZWxwZXJfZnVuY3MgKmZ1bmNzLAot
CQkJICAgICAgdW5zaWduZWQgaW50IHByZWZlcnJlZF9icHAsCi0JCQkgICAgICB1bnNpZ25lZCBp
bnQgbWF4X2Nvbm5fY291bnQpCi17Ci0JaW50IHJldDsKLQotCWlmICghcHJlZmVycmVkX2JwcCkK
LQkJcHJlZmVycmVkX2JwcCA9IGRldi0+bW9kZV9jb25maWcucHJlZmVycmVkX2RlcHRoOwotCWlm
ICghcHJlZmVycmVkX2JwcCkKLQkJcHJlZmVycmVkX2JwcCA9IDMyOwotCi0JZHJtX2ZiX2hlbHBl
cl9wcmVwYXJlKGRldiwgZmJfaGVscGVyLCBmdW5jcyk7Ci0KLQlyZXQgPSBkcm1fZmJfaGVscGVy
X2luaXQoZGV2LCBmYl9oZWxwZXIsIDApOwotCWlmIChyZXQgPCAwKSB7Ci0JCURSTV9ERVZfRVJS
T1IoZGV2LT5kZXYsICJmYmRldjogRmFpbGVkIHRvIGluaXRpYWxpemUgKHJldD0lZClcbiIsIHJl
dCk7Ci0JCXJldHVybiByZXQ7Ci0JfQotCi0JaWYgKCFkcm1fZHJ2X3VzZXNfYXRvbWljX21vZGVz
ZXQoZGV2KSkKLQkJZHJtX2hlbHBlcl9kaXNhYmxlX3VudXNlZF9mdW5jdGlvbnMoZGV2KTsKLQot
CXJldCA9IGRybV9mYl9oZWxwZXJfaW5pdGlhbF9jb25maWcoZmJfaGVscGVyLCBwcmVmZXJyZWRf
YnBwKTsKLQlpZiAocmV0IDwgMCkgewotCQlEUk1fREVWX0VSUk9SKGRldi0+ZGV2LCAiZmJkZXY6
IEZhaWxlZCB0byBzZXQgY29uZmlndXJhdGlvbiAocmV0PSVkKVxuIiwgcmV0KTsKLQkJZ290byBl
cnJfZHJtX2ZiX2hlbHBlcl9maW5pOwotCX0KLQotCXJldHVybiAwOwotCi1lcnJfZHJtX2ZiX2hl
bHBlcl9maW5pOgotCWRybV9mYl9oZWxwZXJfZmJkZXZfdGVhcmRvd24oZGV2KTsKLQotCXJldHVy
biByZXQ7Ci19Ci1FWFBPUlRfU1lNQk9MKGRybV9mYl9oZWxwZXJfZmJkZXZfc2V0dXApOwotCi0v
KioKLSAqIGRybV9mYl9oZWxwZXJfZmJkZXZfdGVhcmRvd24gLSBUZWFyIGRvd24gZmJkZXYgZW11
bGF0aW9uCi0gKiBAZGV2OiBEUk0gZGV2aWNlCi0gKgotICogVGhpcyBmdW5jdGlvbiB1bnJlZ2lz
dGVycyBmYmRldiBpZiBub3QgYWxyZWFkeSBkb25lIGFuZCBjbGVhbnMgdXAgdGhlCi0gKiBhc3Nv
Y2lhdGVkIHJlc291cmNlcyBpbmNsdWRpbmcgdGhlICZkcm1fZnJhbWVidWZmZXIuCi0gKiBUaGUg
ZHJpdmVyIGlzIHJlc3BvbnNpYmxlIGZvciBmcmVlaW5nIHRoZSAmZHJtX2ZiX2hlbHBlciBzdHJ1
Y3R1cmUgd2hpY2ggaXMKLSAqIHN0b3JlZCBpbiAmZHJtX2RldmljZS0+ZmJfaGVscGVyLiBEbyBu
b3RlIHRoYXQgdGhpcyBwb2ludGVyIGhhcyBiZWVuIGNsZWFyZWQKLSAqIHdoZW4gdGhpcyBmdW5j
dGlvbiByZXR1cm5zLgotICoKLSAqIEluIG9yZGVyIHRvIHN1cHBvcnQgZGV2aWNlIHJlbW92YWwv
dW5wbHVnIHdoaWxlIGZpbGUgaGFuZGxlcyBhcmUgc3RpbGwgb3BlbiwKLSAqIGRybV9mYl9oZWxw
ZXJfdW5yZWdpc3Rlcl9mYmkoKSBzaG91bGQgYmUgY2FsbGVkIG9uIGRldmljZSByZW1vdmFsIGFu
ZAotICogZHJtX2ZiX2hlbHBlcl9mYmRldl90ZWFyZG93bigpIGluIHRoZSAmZHJtX2RyaXZlci0+
cmVsZWFzZSBjYWxsYmFjayB3aGVuCi0gKiBmaWxlIGhhbmRsZXMgYXJlIGNsb3NlZC4KLSAqLwot
dm9pZCBkcm1fZmJfaGVscGVyX2ZiZGV2X3RlYXJkb3duKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYp
Ci17Ci0Jc3RydWN0IGRybV9mYl9oZWxwZXIgKmZiX2hlbHBlciA9IGRldi0+ZmJfaGVscGVyOwot
CXN0cnVjdCBmYl9vcHMgKmZib3BzID0gTlVMTDsKLQotCWlmICghZmJfaGVscGVyKQotCQlyZXR1
cm47Ci0KLQkvKiBVbnJlZ2lzdGVyIGlmIGl0IGhhc24ndCBiZWVuIGRvbmUgYWxyZWFkeSAqLwot
CWlmIChmYl9oZWxwZXItPmZiZGV2ICYmIGZiX2hlbHBlci0+ZmJkZXYtPmRldikKLQkJZHJtX2Zi
X2hlbHBlcl91bnJlZ2lzdGVyX2ZiaShmYl9oZWxwZXIpOwotCi0JaWYgKGZiX2hlbHBlci0+ZmJk
ZXYgJiYgZmJfaGVscGVyLT5mYmRldi0+ZmJkZWZpbykgewotCQlmYl9kZWZlcnJlZF9pb19jbGVh
bnVwKGZiX2hlbHBlci0+ZmJkZXYpOwotCQlrZnJlZShmYl9oZWxwZXItPmZiZGV2LT5mYmRlZmlv
KTsKLQkJZmJvcHMgPSBmYl9oZWxwZXItPmZiZGV2LT5mYm9wczsKLQl9Ci0KLQlkcm1fZmJfaGVs
cGVyX2ZpbmkoZmJfaGVscGVyKTsKLQlrZnJlZShmYm9wcyk7Ci0KLQlpZiAoZmJfaGVscGVyLT5m
YikKLQkJZHJtX2ZyYW1lYnVmZmVyX3JlbW92ZShmYl9oZWxwZXItPmZiKTsKLX0KLUVYUE9SVF9T
WU1CT0woZHJtX2ZiX2hlbHBlcl9mYmRldl90ZWFyZG93bik7Ci0KIC8qKgogICogZHJtX2ZiX2hl
bHBlcl9sYXN0Y2xvc2UgLSBEUk0gZHJpdmVyIGxhc3RjbG9zZSBoZWxwZXIgZm9yIGZiZGV2IGVt
dWxhdGlvbgogICogQGRldjogRFJNIGRldmljZQpAQCAtMjMwOSw4ICsyMjAzLDcgQEAgc3RhdGlj
IGNvbnN0IHN0cnVjdCBkcm1fY2xpZW50X2Z1bmNzIGRybV9mYmRldl9jbGllbnRfZnVuY3MgPSB7
CiAgKiAgICAgICAgICAgICAgICAgQGRldi0+bW9kZV9jb25maWcucHJlZmVycmVkX2RlcHRoIGlz
IHVzZWQgaWYgdGhpcyBpcyB6ZXJvLgogICoKICAqIFRoaXMgZnVuY3Rpb24gc2V0cyB1cCBnZW5l
cmljIGZiZGV2IGVtdWxhdGlvbiBmb3IgZHJpdmVycyB0aGF0IHN1cHBvcnRzCi0gKiBkdW1iIGJ1
ZmZlcnMgd2l0aCBhIHZpcnR1YWwgYWRkcmVzcyBhbmQgdGhhdCBjYW4gYmUgbW1hcCdlZC4gSWYg
dGhlIGRyaXZlcgotICogZG9lcyBub3Qgc3VwcG9ydCB0aGVzZSBmdW5jdGlvbnMsIGl0IGNvdWxk
IHVzZSBkcm1fZmJfaGVscGVyX2ZiZGV2X3NldHVwKCkuCisgKiBkdW1iIGJ1ZmZlcnMgd2l0aCBh
IHZpcnR1YWwgYWRkcmVzcyBhbmQgdGhhdCBjYW4gYmUgbW1hcCdlZC4KICAqCiAgKiBSZXN0b3Jl
LCBob3RwbHVnIGV2ZW50cyBhbmQgdGVhcmRvd24gYXJlIGFsbCB0YWtlbiBjYXJlIG9mLiBEcml2
ZXJzIHRoYXQgZG8KICAqIHN1c3BlbmQvcmVzdW1lIG5lZWQgdG8gY2FsbCBkcm1fZmJfaGVscGVy
X3NldF9zdXNwZW5kX3VubG9ja2VkKCkgdGhlbXNlbHZlcy4KZGlmZiAtLWdpdCBhL2luY2x1ZGUv
ZHJtL2RybV9mYl9oZWxwZXIuaCBiL2luY2x1ZGUvZHJtL2RybV9mYl9oZWxwZXIuaAppbmRleCAy
MzM4ZTlmOTRhMDMuLmUzYTc1ZmYwNzM5MCAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2Zi
X2hlbHBlci5oCisrKyBiL2luY2x1ZGUvZHJtL2RybV9mYl9oZWxwZXIuaApAQCAtMjY5LDEzICsy
NjksNiBAQCBpbnQgZHJtX2ZiX2hlbHBlcl9pbml0aWFsX2NvbmZpZyhzdHJ1Y3QgZHJtX2ZiX2hl
bHBlciAqZmJfaGVscGVyLCBpbnQgYnBwX3NlbCk7CiBpbnQgZHJtX2ZiX2hlbHBlcl9kZWJ1Z19l
bnRlcihzdHJ1Y3QgZmJfaW5mbyAqaW5mbyk7CiBpbnQgZHJtX2ZiX2hlbHBlcl9kZWJ1Z19sZWF2
ZShzdHJ1Y3QgZmJfaW5mbyAqaW5mbyk7CiAKLWludCBkcm1fZmJfaGVscGVyX2ZiZGV2X3NldHVw
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCi0JCQkgICAgICBzdHJ1Y3QgZHJtX2ZiX2hlbHBlciAq
ZmJfaGVscGVyLAotCQkJICAgICAgY29uc3Qgc3RydWN0IGRybV9mYl9oZWxwZXJfZnVuY3MgKmZ1
bmNzLAotCQkJICAgICAgdW5zaWduZWQgaW50IHByZWZlcnJlZF9icHAsCi0JCQkgICAgICB1bnNp
Z25lZCBpbnQgbWF4X2Nvbm5fY291bnQpOwotdm9pZCBkcm1fZmJfaGVscGVyX2ZiZGV2X3RlYXJk
b3duKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwotCiB2b2lkIGRybV9mYl9oZWxwZXJfbGFzdGNs
b3NlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwogdm9pZCBkcm1fZmJfaGVscGVyX291dHB1dF9w
b2xsX2NoYW5nZWQoc3RydWN0IGRybV9kZXZpY2UgKmRldik7CiAKQEAgLTQ1MiwyNCArNDQ1LDYg
QEAgc3RhdGljIGlubGluZSBpbnQgZHJtX2ZiX2hlbHBlcl9kZWJ1Z19sZWF2ZShzdHJ1Y3QgZmJf
aW5mbyAqaW5mbykKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIGlubGluZSBpbnQKLWRybV9mYl9o
ZWxwZXJfZmJkZXZfc2V0dXAoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKLQkJCSAgc3RydWN0IGRy
bV9mYl9oZWxwZXIgKmZiX2hlbHBlciwKLQkJCSAgY29uc3Qgc3RydWN0IGRybV9mYl9oZWxwZXJf
ZnVuY3MgKmZ1bmNzLAotCQkJICB1bnNpZ25lZCBpbnQgcHJlZmVycmVkX2JwcCwKLQkJCSAgdW5z
aWduZWQgaW50IG1heF9jb25uX2NvdW50KQotewotCS8qIFNvIGRyaXZlcnMgY2FuIHVzZSBpdCB0
byBmcmVlIHRoZSBzdHJ1Y3QgKi8KLQlkZXYtPmZiX2hlbHBlciA9IGZiX2hlbHBlcjsKLQotCXJl
dHVybiAwOwotfQotCi1zdGF0aWMgaW5saW5lIHZvaWQgZHJtX2ZiX2hlbHBlcl9mYmRldl90ZWFy
ZG93bihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQotewotCWRldi0+ZmJfaGVscGVyID0gTlVMTDsK
LX0KLQogc3RhdGljIGlubGluZSB2b2lkIGRybV9mYl9oZWxwZXJfbGFzdGNsb3NlKHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYpCiB7CiB9Ci0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
