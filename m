Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8F7B8BB4CE
	for <lists+dri-devel@lfdr.de>; Mon, 23 Sep 2019 15:05:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D1F856E8F5;
	Mon, 23 Sep 2019 13:05:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 60CF96E8F2;
 Mon, 23 Sep 2019 13:05:07 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx07.intmail.prod.int.phx2.redhat.com
 [10.5.11.22])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 815C23680A;
 Mon, 23 Sep 2019 13:05:06 +0000 (UTC)
Received: from jason-ThinkPad-X1-Carbon-6th.redhat.com
 (ovpn-12-93.pek2.redhat.com [10.72.12.93])
 by smtp.corp.redhat.com (Postfix) with ESMTP id C72D410013D9;
 Mon, 23 Sep 2019 13:04:45 +0000 (UTC)
From: Jason Wang <jasowang@redhat.com>
To: kvm@vger.kernel.org, linux-s390@vger.kernel.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 intel-gfx@lists.freedesktop.org, intel-gvt-dev@lists.freedesktop.org,
 kwankhede@nvidia.com, alex.williamson@redhat.com, mst@redhat.com,
 tiwei.bie@intel.com
Subject: [PATCH 3/6] mdev: introduce virtio device and its device ops
Date: Mon, 23 Sep 2019 21:03:28 +0800
Message-Id: <20190923130331.29324-4-jasowang@redhat.com>
In-Reply-To: <20190923130331.29324-1-jasowang@redhat.com>
References: <20190923130331.29324-1-jasowang@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.22
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.30]); Mon, 23 Sep 2019 13:05:07 +0000 (UTC)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: sebott@linux.ibm.com, airlied@linux.ie, Jason Wang <jasowang@redhat.com>,
 heiko.carstens@de.ibm.com, virtualization@lists.linux-foundation.org,
 rob.miller@broadcom.com, lulu@redhat.com, eperezma@redhat.com,
 pasic@linux.ibm.com, borntraeger@de.ibm.com, haotian.wang@sifive.com,
 zhi.a.wang@intel.com, farman@linux.ibm.com, idos@mellanox.com,
 gor@linux.ibm.com, cunming.liang@intel.com, rodrigo.vivi@intel.com,
 xiao.w.wang@intel.com, freude@linux.ibm.com, parav@mellanox.com,
 zhihong.wang@intel.com, akrowiak@linux.ibm.com, netdev@vger.kernel.org,
 cohuck@redhat.com, oberpar@linux.ibm.com, maxime.coquelin@redhat.com,
 lingshan.zhu@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBpbXBsZW1lbnRzIGJhc2ljIHN1cHBvcnQgZm9yIG1kZXYgZHJpdmVyIHRoYXQg
c3VwcG9ydHMKdmlydGlvIHRyYW5zcG9ydCBmb3Iga2VybmVsIHZpcnRpbyBkcml2ZXIuCgpTaWdu
ZWQtb2ZmLWJ5OiBKYXNvbiBXYW5nIDxqYXNvd2FuZ0ByZWRoYXQuY29tPgotLS0KIGRyaXZlcnMv
dmZpby9tZGV2L21kZXZfY29yZS5jIHwgICA3ICsrCiBpbmNsdWRlL2xpbnV4L21kZXYuaCAgICAg
ICAgICB8ICAgNCArCiBpbmNsdWRlL2xpbnV4L3ZpcnRpb19tZGV2LmggICB8IDE0NCArKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrCiAzIGZpbGVzIGNoYW5nZWQsIDE1NSBpbnNlcnRp
b25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS9saW51eC92aXJ0aW9fbWRldi5oCgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy92ZmlvL21kZXYvbWRldl9jb3JlLmMgYi9kcml2ZXJzL3ZmaW8v
bWRldi9tZGV2X2NvcmUuYwppbmRleCBhMDJjMjU2YTM1MTQuLjZkMzljYWY5NjIyMiAxMDA2NDQK
LS0tIGEvZHJpdmVycy92ZmlvL21kZXYvbWRldl9jb3JlLmMKKysrIGIvZHJpdmVycy92ZmlvL21k
ZXYvbWRldl9jb3JlLmMKQEAgLTIyMCw2ICsyMjAsMTMgQEAgaW50IG1kZXZfcmVnaXN0ZXJfdmZp
b19kZXZpY2Uoc3RydWN0IGRldmljZSAqZGV2LAogfQogRVhQT1JUX1NZTUJPTChtZGV2X3JlZ2lz
dGVyX3ZmaW9fZGV2aWNlKTsKIAoraW50IG1kZXZfcmVnaXN0ZXJfdmlydGlvX2RldmljZShzdHJ1
Y3QgZGV2aWNlICpkZXYsCisJCQkJY29uc3Qgc3RydWN0IG1kZXZfcGFyZW50X29wcyAqb3BzKQor
eworCXJldHVybiBtZGV2X3JlZ2lzdGVyX2RldmljZShkZXYsIG9wcywgTURFVl9JRF9WSVJUSU8p
OworfQorRVhQT1JUX1NZTUJPTChtZGV2X3JlZ2lzdGVyX3ZpcnRpb19kZXZpY2UpOworCiAvKgog
ICogbWRldl91bnJlZ2lzdGVyX2RldmljZSA6IFVucmVnaXN0ZXIgYSBwYXJlbnQgZGV2aWNlCiAg
KiBAZGV2OiBkZXZpY2Ugc3RydWN0dXJlIHJlcHJlc2VudGluZyBwYXJlbnQgZGV2aWNlLgpkaWZm
IC0tZ2l0IGEvaW5jbHVkZS9saW51eC9tZGV2LmggYi9pbmNsdWRlL2xpbnV4L21kZXYuaAppbmRl
eCBmYTE2N2JjYjgxZTEuLjFkMDYxNzM5MDIxZSAxMDA2NDQKLS0tIGEvaW5jbHVkZS9saW51eC9t
ZGV2LmgKKysrIGIvaW5jbHVkZS9saW51eC9tZGV2LmgKQEAgLTEwOSw2ICsxMDksOCBAQCBleHRl
cm4gc3RydWN0IGJ1c190eXBlIG1kZXZfYnVzX3R5cGU7CiAKIGludCBtZGV2X3JlZ2lzdGVyX3Zm
aW9fZGV2aWNlKHN0cnVjdCBkZXZpY2UgKmRldiwKIAkJCSAgICAgIGNvbnN0IHN0cnVjdCBtZGV2
X3BhcmVudF9vcHMgKm9wcyk7CitpbnQgbWRldl9yZWdpc3Rlcl92aXJ0aW9fZGV2aWNlKHN0cnVj
dCBkZXZpY2UgKmRldiwKKwkJCQljb25zdCBzdHJ1Y3QgbWRldl9wYXJlbnRfb3BzICpvcHMpOwog
dm9pZCBtZGV2X3VucmVnaXN0ZXJfZGV2aWNlKHN0cnVjdCBkZXZpY2UgKmRldik7CiAKIGludCBt
ZGV2X3JlZ2lzdGVyX2RyaXZlcihzdHJ1Y3QgbWRldl9kcml2ZXIgKmRydiwgc3RydWN0IG1vZHVs
ZSAqb3duZXIpOwpAQCAtMTE5LDUgKzEyMSw3IEBAIHN0cnVjdCBkZXZpY2UgKm1kZXZfZGV2KHN0
cnVjdCBtZGV2X2RldmljZSAqbWRldik7CiBzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXZfZnJvbV9k
ZXYoc3RydWN0IGRldmljZSAqZGV2KTsKIAogI2RlZmluZSBNREVWX0lEX1ZGSU8gMSAvKiBWRklP
IGRldmljZSAqLworI2RlZmluZSBNREVWX0lEX1ZJUlRJTyAyIC8qIFZpcnRpbyBEZXZpY2UgKi8K
KyNkZWZpbmUgTURFVl9JRF9WSE9TVCAzIC8qIFZob3N0IERldmljZSAqLwogCiAjZW5kaWYgLyog
TURFVl9IICovCmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L3ZpcnRpb19tZGV2LmggYi9pbmNs
dWRlL2xpbnV4L3ZpcnRpb19tZGV2LmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MDAwMDAwLi5mOGRiMDNjOTNkMzYKLS0tIC9kZXYvbnVsbAorKysgYi9pbmNsdWRlL2xpbnV4L3Zp
cnRpb19tZGV2LmgKQEAgLTAsMCArMSwxNDQgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVy
OiBHUEwtMi4wLW9ubHkgKi8KKy8qCisgKiBWaXJ0aW8gbWVkaWF0ZWQgZGV2aWNlIGRyaXZlcgor
ICoKKyAqIENvcHlyaWdodCAyMDE5LCBSZWQgSGF0IENvcnAuCisgKiAgICAgQXV0aG9yOiBKYXNv
biBXYW5nIDxqYXNvd2FuZ0ByZWRoYXQuY29tPgorICovCisjaWZuZGVmIF9MSU5VWF9WSVJUSU9f
TURFVl9ICisjZGVmaW5lIF9MSU5VWF9WSVJUSU9fTURFVl9ICisKKyNpbmNsdWRlIDxsaW51eC9p
bnRlcnJ1cHQuaD4KKyNpbmNsdWRlIDx1YXBpL2xpbnV4L3Zob3N0Lmg+CisKKyNkZWZpbmUgVklS
VElPX01ERVZfREVWSUNFX0FQSV9TVFJJTkcJCSJ2aXJ0aW8tbWRldiIKKyNkZWZpbmUgVklSVElP
X01ERVZfVkVSU0lPTiAweDEKKworc3RydWN0IHZpcnRpb19tZGV2X2NhbGxiYWNrIHsKKwlpcnFy
ZXR1cm5fdCAoKmNhbGxiYWNrKSh2b2lkICpkYXRhKTsKKwl2b2lkICpwcml2YXRlOworfTsKKwor
LyoqCisgKiBzdHJ1Y3QgdmZpb19tZGV2X3BhcmVudF9vcHMgLSBTdHJ1Y3R1cmUgdG8gYmUgcmVn
aXN0ZXJlZCBmb3IgZWFjaAorICogcGFyZW50IGRldmljZSB0byByZWdpc3RlciB0aGUgZGV2aWNl
IHRvIHZpcnRpby1tZGV2IG1vZHVsZS4KKyAqCisgKiBAc2V0X3ZxX2FkZHJlc3M6CQlTZXQgdGhl
IGFkZHJlc3Mgb2YgdmlydHF1ZXVlCisgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCisgKgkJ
CQlAaWR4OiB2aXJ0cXVldWUgaW5kZXgKKyAqCQkJCUBkZXNjX2FyZWE6IGFkZHJlc3Mgb2YgZGVz
YyBhcmVhCisgKgkJCQlAZHJpdmVyX2FyZWE6IGFkZHJlc3Mgb2YgZHJpdmVyIGFyZWEKKyAqCQkJ
CUBkZXZpY2VfYXJlYTogYWRkcmVzcyBvZiBkZXZpY2UgYXJlYQorICoJCQkJUmV0dXJucyBpbnRl
Z2VyOiBzdWNjZXNzICgwKSBvciBlcnJvciAoPCAwKQorICogQHNldF92cV9udW06CQlTZXQgdGhl
IHNpemUgb2YgdmlydHF1ZXVlCisgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCisgKgkJCQlA
aWR4OiB2aXJ0cXVldWUgaW5kZXgKKyAqCQkJCUBudW06IHRoZSBzaXplIG9mIHZpcnRxdWV1ZQor
ICogQGtpY2tfdnE6CQkJS2ljayB0aGUgdmlydHF1ZXVlCisgKgkJCQlAbWRldjogbWVkaWF0ZWQg
ZGV2aWNlCisgKgkJCQlAaWR4OiB2aXJ0cXVldWUgaW5kZXgKKyAqIEBzZXRfdnFfY2I6CQkJU2V0
IHRoZSBpbnRlcnJ1dCBjYWxiYWNrIGZ1bmN0aW9uIGZvcgorICoJCQkJYSB2aXJ0cXVldWUKKyAq
CQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCUBpZHg6IHZpcnRxdWV1ZSBpbmRleAor
ICoJCQkJQGNiOiB2aXJ0aW8tbWRldiBpbnRlcnJ1cHQgY2FsbGJhY2sgc3RydWN0dXJlCisgKiBA
c2V0X3ZxX3JlYWR5OgkJU2V0IHJlYWR5IHN0YXR1cyBmb3IgYSB2aXJ0cXVldWUKKyAqCQkJCUBt
ZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCUBpZHg6IHZpcnRxdWV1ZSBpbmRleAorICoJCQkJ
QHJlYWR5OiByZWFkeSAodHJ1ZSkgbm90IHJlYWR5KGZhbHNlKQorICogQGdldF92cV9yZWFkeToJ
CUdldCByZWFkeSBzdGF0dXMgZm9yIGEgdmlydHF1ZXVlCisgKgkJCQlAbWRldjogbWVkaWF0ZWQg
ZGV2aWNlCisgKgkJCQlAaWR4OiB2aXJ0cXVldWUgaW5kZXgKKyAqCQkJCVJldHVybnMgYm9vbGVh
bjogcmVhZHkgKHRydWUpIG9yIG5vdCAoZmFsc2UpCisgKiBAc2V0X3ZxX3N0YXRlOgkJU2V0IHRo
ZSBzdGF0ZSBmb3IgYSB2aXJ0cXVldWUKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAq
CQkJCUBpZHg6IHZpcnRxdWV1ZSBpbmRleAorICoJCQkJQHN0YXRlOiB2aXJ0cXVldWUgc3RhdGUg
KGxhc3RfYXZhaWxfaWR4KQorICoJCQkJUmV0dXJucyBpbnRlZ2VyOiBzdWNjZXNzICgwKSBvciBl
cnJvciAoPCAwKQorICogQGdldF92cV9zdGF0ZToJCUdldCB0aGUgc3RhdGUgZm9yIGEgdmlydHF1
ZXVlCisgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCisgKgkJCQlAaWR4OiB2aXJ0cXVldWUg
aW5kZXgKKyAqCQkJCVJldHVybnMgdmlydHF1ZXVlIHN0YXRlIChsYXN0X2F2YWlsX2lkeCkKKyAq
IEBnZXRfdnFfYWxpZ246CQlHZXQgdGhlIHZpcnRxdWV1ZSBhbGlnbiByZXF1aXJlbWVudAorICoJ
CQkJZm9yIHRoZSBkZXZpY2UKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCVJl
dHVybnMgdmlydHF1ZXVlIGFsZ2luIHJlcXVpcmVtZW50CisgKiBAZ2V0X2ZlYXR1cmVzOgkJR2V0
IHZpcnRpbyBmZWF0dXJlcyBzdXBwb3J0ZWQgYnkgdGhlIGRldmljZQorICoJCQkJQG1kZXY6IG1l
ZGlhdGVkIGRldmljZQorICoJCQkJUmV0dXJucyB0aGUgZmVhdHVyZXMgc3VwcG9ydCBieSB0aGUK
KyAqCQkJCWRldmljZQorICogQGdldF9mZWF0dXJlczoJCVNldCB2aXJ0aW8gZmVhdHVyZXMgc3Vw
cG9ydGVkIGJ5IHRoZSBkcml2ZXIKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJ
CUBmZWF0dXJlczogZmVhdHVyZSBzdXBwb3J0IGJ5IHRoZSBkcml2ZXIKKyAqCQkJCVJldHVybnMg
aW50ZWdlcjogc3VjY2VzcyAoMCkgb3IgZXJyb3IgKDwgMCkKKyAqIEBzZXRfY29uZmlnX2NiOgkJ
U2V0IHRoZSBjb25maWcgaW50ZXJydXB0IGNhbGxiYWNrCisgKgkJCQlAbWRldjogbWVkaWF0ZWQg
ZGV2aWNlCisgKgkJCQlAY2I6IHZpcnRpby1tZGV2IGludGVycnVwdCBjYWxsYmFjayBzdHJ1Y3R1
cmUKKyAqIEBnZXRfZGV2aWNlX2lkOgkJR2V0IHZpcnRpbyBkZXZpY2UgaWQKKyAqCQkJCUBtZGV2
OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCVJldHVybnMgdTMyOiB2aXJ0aW8gZGV2aWNlIGlkCisg
KiBAZ2V0X3ZlbmRvcl9pZDoJCUdldCB2aXJ0aW8gdmVuZG9yIGlkCisgKgkJCQlAbWRldjogbWVk
aWF0ZWQgZGV2aWNlCisgKgkJCQlSZXR1cm5zIHUzMjogdmlydGlvIHZlbmRvciBpZAorICogQGdl
dF9zdGF0dXM6CQlHZXQgdGhlIGRldmljZSBzdGF0dXMKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBk
ZXZpY2UKKyAqCQkJCVJldHVybnMgdTg6IHZpcnRpbyBkZXZpY2Ugc3RhdHVzCisgKiBAc2V0X3N0
YXR1czoJCVNldCB0aGUgZGV2aWNlIHN0YXR1cworICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmlj
ZQorICoJCQkJQHN0YXR1czogdmlydGlvIGRldmljZSBzdGF0dXMKKyAqIEBnZXRfY29uZmlnOgkJ
UmVhZCBmcm9tIGRldmljZSBzcGVjaWZpYyBjb25maXVncmF0aW9uIHNwYWNlCisgKgkJCQlAbWRl
djogbWVkaWF0ZWQgZGV2aWNlCisgKgkJCQlAb2Zmc2V0OiBvZmZzZXQgZnJvbSB0aGUgYmVnaW5u
aW5nIG9mCisgKgkJCQljb25maWd1cmF0aW9uIHNwYWNlCisgKgkJCQlAYnVmOiBidWZmZXIgdXNl
ZCB0byByZWFkIHRvCisgKgkJCQlAbGVuOiB0aGUgbGVuZ3RoIHRvIHJlYWQgZnJvbQorICoJCQkJ
Y29uZmlncmF0aW9uIHNwYWNlCisgKiBAc2V0X2NvbmZpZzoJCVdyaXRlIHRvIGRldmljZSBzcGVj
aWZpYyBjb25maXVncmF0aW9uIHNwYWNlCisgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCisg
KgkJCQlAb2Zmc2V0OiBvZmZzZXQgZnJvbSB0aGUgYmVnaW5uaW5nIG9mCisgKgkJCQljb25maWd1
cmF0aW9uIHNwYWNlCisgKgkJCQlAYnVmOiBidWZmZXIgdXNlZCB0byB3cml0ZSBmcm9tCisgKgkJ
CQlAbGVuOiB0aGUgbGVuZ3RoIHRvIHdyaXRlIHRvCisgKgkJCQljb25maWdyYXRpb24gc3BhY2UK
KyAqIEBnZXRfdmVyc2lvbjoJCUdldCB0aGUgdmVyc2lvbiBvZiB2aXJ0aW8gbWRldiBkZXZpY2UK
KyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCVJldHVybnMgaW50ZWdlcjogdmVy
c2lvbiBvZiB0aGUgZGV2aWNlCisgKiBAZ2V0X2dlbmVyYXRpb246CQlHZXQgZGV2aWNlIGdlbmVy
YXRvbgorICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQorICoJCQkJUmV0dXJucyB1MzI6IGRl
dmljZSBnZW5lcmF0aW9uCisgKi8KK3N0cnVjdCB2aXJ0aW9fbWRldl9wYXJlbnRfb3BzIHsKKwkv
KiBWaXJ0cXVldWUgb3BzICovCisJaW50ICgqc2V0X3ZxX2FkZHJlc3MpKHN0cnVjdCBtZGV2X2Rl
dmljZSAqbWRldiwKKwkJCSAgICAgIHUxNiBpZHgsIHU2NCBkZXNjX2FyZWEsIHU2NCBkcml2ZXJf
YXJlYSwKKwkJCSAgICAgIHU2NCBkZXZpY2VfYXJlYSk7CisJdm9pZCAoKnNldF92cV9udW0pKHN0
cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdTE2IGlkeCwgdTMyIG51bSk7CisJdm9pZCAoKmtpY2tf
dnEpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdTE2IGlkeCk7CisJdm9pZCAoKnNldF92cV9j
Yikoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LCB1MTYgaWR4LAorCQkJICBzdHJ1Y3QgdmlydGlv
X21kZXZfY2FsbGJhY2sgKmNiKTsKKwl2b2lkICgqc2V0X3ZxX3JlYWR5KShzdHJ1Y3QgbWRldl9k
ZXZpY2UgKm1kZXYsIHUxNiBpZHgsIGJvb2wgcmVhZHkpOworCWJvb2wgKCpnZXRfdnFfcmVhZHkp
KHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdTE2IGlkeCk7CisJaW50ICgqc2V0X3ZxX3N0YXRl
KShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUxNiBpZHgsIHU2NCBzdGF0ZSk7CisJdTY0ICgq
Z2V0X3ZxX3N0YXRlKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUxNiBpZHgpOworCisJLyog
RGV2aWNlIG9wcyAqLworCXUxNiAoKmdldF92cV9hbGlnbikoc3RydWN0IG1kZXZfZGV2aWNlICpt
ZGV2KTsKKwl1NjQgKCpnZXRfZmVhdHVyZXMpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7CisJ
aW50ICgqc2V0X2ZlYXR1cmVzKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHU2NCBmZWF0dXJl
cyk7CisJdm9pZCAoKnNldF9jb25maWdfY2IpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwKKwkJ
CSAgICAgIHN0cnVjdCB2aXJ0aW9fbWRldl9jYWxsYmFjayAqY2IpOworCXUxNiAoKmdldF9xdWV1
ZV9tYXgpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7CisJdTMyICgqZ2V0X2RldmljZV9pZCko
c3RydWN0IG1kZXZfZGV2aWNlICptZGV2KTsKKwl1MzIgKCpnZXRfdmVuZG9yX2lkKShzdHJ1Y3Qg
bWRldl9kZXZpY2UgKm1kZXYpOworCXU4ICgqZ2V0X3N0YXR1cykoc3RydWN0IG1kZXZfZGV2aWNl
ICptZGV2KTsKKwl2b2lkICgqc2V0X3N0YXR1cykoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LCB1
OCBzdGF0dXMpOworCXZvaWQgKCpnZXRfY29uZmlnKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYs
IHVuc2lnbmVkIGludCBvZmZzZXQsCisJCQkgICB2b2lkICpidWYsIHVuc2lnbmVkIGludCBsZW4p
OworCXZvaWQgKCpzZXRfY29uZmlnKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHVuc2lnbmVk
IGludCBvZmZzZXQsCisJCQkgICBjb25zdCB2b2lkICpidWYsIHVuc2lnbmVkIGludCBsZW4pOwor
CWludCAoKmdldF92ZXJzaW9uKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpOworCXUzMiAoKmdl
dF9nZW5lcmF0aW9uKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpOworfTsKKworI2VuZGlmCisK
LS0gCjIuMTkuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
