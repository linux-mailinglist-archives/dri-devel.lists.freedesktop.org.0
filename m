Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 250265593D
	for <lists+dri-devel@lfdr.de>; Tue, 25 Jun 2019 22:42:34 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 84B0A6E22F;
	Tue, 25 Jun 2019 20:42:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x541.google.com (mail-ed1-x541.google.com
 [IPv6:2a00:1450:4864:20::541])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 196986E22E
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 20:42:23 +0000 (UTC)
Received: by mail-ed1-x541.google.com with SMTP id i11so29164354edq.0
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 13:42:23 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=pNePK7yt6YozF71CQyNI+aGRQy+Gg9BGLxajnYU/ZeY=;
 b=nQOG490DTEf+Zu4QVB2UO8UVHb0+vM3s2QvSM9obIqcxVHyFe3fENgPhI6MoVYqOy6
 79IpwNt1k/l2HWsg5H2g2V0upQlwvJtrzNvZqZfTGXhDTvI9UY9+NLnVecl1ku2LrT09
 b9NkLPMTLd8HemetFfPCnb6wekkS/Ie3oTw3rKG6sx/8pEEJGCVTmT4kRa79uRYTCwd9
 ZfRazyysWm0IX5p4E/V5fUwymNcAYP8F91wODKZQ6rRfz9uiukNtOLGuTsGNPt2IhgN5
 UHwkEEf+2Et1yAOzNmbtuiBriEXlBzdHSlHbzp7BemsvvJZSdvE1s6t5AzyxqHCmspvu
 FpJw==
X-Gm-Message-State: APjAAAV/unqEEEwZ0GCAsHXSd25FbDy08kb1Z+YmVrtOuqYDlon4o+eh
 bPlhy3QD02ho4uv/atVUfF1Opbzkyuk=
X-Google-Smtp-Source: APXvYqznaiBplpt5PugpuVGK7NwKmjp3puavpJB4WOhv8I+IsYUlgWCYddrGDrXGgZD85fKa8U7Y2g==
X-Received: by 2002:a17:906:8386:: with SMTP id
 p6mr454910ejx.139.1561495341486; 
 Tue, 25 Jun 2019 13:42:21 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id u9sm5187262edm.71.2019.06.25.13.42.19
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Tue, 25 Jun 2019 13:42:20 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: DRI Development <dri-devel@lists.freedesktop.org>
Subject: [PATCH 6/7] drm/amdgpu: Fill out gem_object->resv
Date: Tue, 25 Jun 2019 22:42:07 +0200
Message-Id: <20190625204208.5614-7-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190625204208.5614-1-daniel.vetter@ffwll.ch>
References: <20190625204208.5614-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=pNePK7yt6YozF71CQyNI+aGRQy+Gg9BGLxajnYU/ZeY=;
 b=YTXNc/aDLgcxMrAr4XdKpEPk1qft1glVhEFDKjGChqCNdBTbnDpQPM8hDPyvrN6k3h
 5o2RdyhDC2tHeaZRjJ7Bnl7/7smNG8KmVmIxE4wloiZgaZP0u3k7BpO9aI+ui/rcYR9y
 PicAdC5OaP6Wn3OjR+v7qXD0iuq9AIlNaJzuA=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <contact@tzimmermann.org>, Amber Lin <Amber.Lin@amd.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Felix Kuehling <Felix.Kuehling@amd.com>,
 =?UTF-8?q?Michel=20D=C3=A4nzer?= <michel.daenzer@amd.com>,
 Samuel Li <Samuel.Li@amd.com>, Sonny Jiang <sonny.jiang@amd.com>,
 Junwei Zhang <Jerry.Zhang@amd.com>, Huang Rui <ray.huang@amd.com>,
 =?UTF-8?q?Micha=C5=82=20Miros=C5=82aw?= <mirq-linux@rere.qmqm.pl>,
 Alex Deucher <alexander.deucher@amd.com>,
 Daniel Vetter <daniel.vetter@intel.com>, Evan Quan <evan.quan@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Emil Velikov <emil.velikov@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhhdCB3YXkgd2UgY2FuIGRpdGNoIG91ciBnZW1fcHJpbWVfcmVzX29iaiBpbXBsZW1lbnRhdGlv
bi4gU2luY2UgdHRtCmFic29sdXRlbHkgbmVlZHMgdGhlIHJpZ2h0IHJlc2VydmF0aW9uIG9iamVj
dCBhbGwgdGhlIGJvaWxlcnBsYXRlIGlzCmFscmVhZHkgdGhlcmUgYW5kIHdlIGp1c3QgaGF2ZSB0
byB3aXJlIGl0IHVwIGNvcnJlY3RseS4KCk5vdGUgdGhhdCBnZW0vcHJpbWUgZG9lc24ndCBjYXJl
IHdoZW4gd2UgZG8gdGhpcywgYXMgbG9uZyBhcyB3ZSBkbyBpdApiZWZvcmUgdGhlIGJvIGlzIHJl
Z2lzdGVyZWQgYW5kIHNvbWVvbmUgY2FuIGNhbGwgdGhlIGhhbmRsZTJmZCBpb2N0bApvbiBpdC4K
CkFzaWRlOiB0dG1fYnVmZmVyX29iamVjdC50dG1fcmVzdiBjb3VsZCBwcm9iYWJseSBiZSBkaXRj
aGVkIGluIGZhdm91cgpvZiBhbHdheXMgcGFzc2luZyBhIG5vbi1OVUxMIHJlc3YgdG8gdHRtX2Jv
X2luaXQoKS4gQXQgbGVhc3QgZm9yIGdlbQpkcml2ZXJzIHRoYXQgd291bGQgYXZvaWQgaGF2aW5n
IHR3byBvZiB0aGVzZSwgb24gaW4gdHRtX2J1ZmZlcl9vYmplY3QKYW5kIHRoZSBvdGhlciBpbiBk
cm1fZ2VtX29iamVjdCwgb25lIGp1c3QgdGhlcmUgZm9yIGNvbmZ1c2lvbi4KClJldmlld2VkLWJ5
OiBFbWlsIFZlbGlrb3YgPGVtaWwudmVsaWtvdkBjb2xsYWJvcmEuY29tPgpTaWduZWQtb2ZmLWJ5
OiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGludGVsLmNvbT4KQ2M6IEFsZXggRGV1Y2hl
ciA8YWxleGFuZGVyLmRldWNoZXJAYW1kLmNvbT4KQ2M6ICJDaHJpc3RpYW4gS8O2bmlnIiA8Y2hy
aXN0aWFuLmtvZW5pZ0BhbWQuY29tPgpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBm
ZndsbC5jaD4KQ2M6ICJNaWNoZWwgRMOkbnplciIgPG1pY2hlbC5kYWVuemVyQGFtZC5jb20+CkNj
OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KQ2M6IEh1YW5nIFJ1aSA8
cmF5Lmh1YW5nQGFtZC5jb20+CkNjOiBGZWxpeCBLdWVobGluZyA8RmVsaXguS3VlaGxpbmdAYW1k
LmNvbT4KQ2M6IEFuZHJleSBHcm9kem92c2t5IDxhbmRyZXkuZ3JvZHpvdnNreUBhbWQuY29tPgpD
YzogRXZhbiBRdWFuIDxldmFuLnF1YW5AYW1kLmNvbT4KQ2M6IFNvbm55IEppYW5nIDxzb25ueS5q
aWFuZ0BhbWQuY29tPgpDYzogQW1iZXIgTGluIDxBbWJlci5MaW5AYW1kLmNvbT4KQ2M6ICJNaWNo
YcWCIE1pcm9zxYJhdyIgPG1pcnEtbGludXhAcmVyZS5xbXFtLnBsPgpDYzogSnVud2VpIFpoYW5n
IDxKZXJyeS5aaGFuZ0BhbWQuY29tPgpDYzogVGhvbWFzIFppbW1lcm1hbm4gPGNvbnRhY3RAdHpp
bW1lcm1hbm4ub3JnPgpDYzogU2FtdWVsIExpIDxTYW11ZWwuTGlAYW1kLmNvbT4KLS0tCiBkcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5jIHwgMTcgKy0tLS0tLS0tLS0t
LS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmggfCAgMSAt
CiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMgICAgIHwgIDEgLQogZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5jICB8ICAyICsrCiA0IGZpbGVz
IGNoYW5nZWQsIDMgaW5zZXJ0aW9ucygrKSwgMTggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYuYyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmMKaW5kZXggNDgwOWQ0YTVkNzJhLi4wMmNk
ODQ1ZTc3YjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9k
bWFfYnVmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYu
YwpAQCAtMjY3LDIwICsyNjcsNiBAQCBzdGF0aWMgdm9pZCBhbWRncHVfZG1hX2J1Zl9tYXBfZGV0
YWNoKHN0cnVjdCBkbWFfYnVmICpkbWFfYnVmLAogCWRybV9nZW1fbWFwX2RldGFjaChkbWFfYnVm
LCBhdHRhY2gpOwogfQogCi0vKioKLSAqIGFtZGdwdV9nZW1fcHJpbWVfcmVzX29iaiAtICZkcm1f
ZHJpdmVyLmdlbV9wcmltZV9yZXNfb2JqIGltcGxlbWVudGF0aW9uCi0gKiBAb2JqOiBHRU0gQk8K
LSAqCi0gKiBSZXR1cm5zOgotICogVGhlIEJPJ3MgcmVzZXJ2YXRpb24gb2JqZWN0LgotICovCi1z
dHJ1Y3QgcmVzZXJ2YXRpb25fb2JqZWN0ICphbWRncHVfZ2VtX3ByaW1lX3Jlc19vYmooc3RydWN0
IGRybV9nZW1fb2JqZWN0ICpvYmopCi17Ci0Jc3RydWN0IGFtZGdwdV9ibyAqYm8gPSBnZW1fdG9f
YW1kZ3B1X2JvKG9iaik7Ci0KLQlyZXR1cm4gYm8tPnRiby5yZXN2OwotfQotCiAvKioKICAqIGFt
ZGdwdV9kbWFfYnVmX2JlZ2luX2NwdV9hY2Nlc3MgLSAmZG1hX2J1Zl9vcHMuYmVnaW5fY3B1X2Fj
Y2VzcyBpbXBsZW1lbnRhdGlvbgogICogQGRtYV9idWY6IFNoYXJlZCBETUEgYnVmZmVyCkBAIC0z
MzksOCArMzI1LDcgQEAgY29uc3Qgc3RydWN0IGRtYV9idWZfb3BzIGFtZGdwdV9kbWFidWZfb3Bz
ID0gewogICogQGdvYmo6IEdFTSBCTwogICogQGZsYWdzOiBGbGFncyBzdWNoIGFzIERSTV9DTE9F
WEVDIGFuZCBEUk1fUkRXUi4KICAqCi0gKiBUaGUgbWFpbiB3b3JrIGlzIGRvbmUgYnkgdGhlICZk
cm1fZ2VtX3ByaW1lX2V4cG9ydCBoZWxwZXIsIHdoaWNoIGluIHR1cm4KLSAqIHVzZXMgJmFtZGdw
dV9nZW1fcHJpbWVfcmVzX29iai4KKyAqIFRoZSBtYWluIHdvcmsgaXMgZG9uZSBieSB0aGUgJmRy
bV9nZW1fcHJpbWVfZXhwb3J0IGhlbHBlci4KICAqCiAgKiBSZXR1cm5zOgogICogU2hhcmVkIERN
QSBidWZmZXIgcmVwcmVzZW50aW5nIHRoZSBHRU0gQk8gZnJvbSB0aGUgZ2l2ZW4gZGV2aWNlLgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYuaCBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmgKaW5kZXggN2Y3M2E0
Zjk0MjA0Li41MDEyZTZhYjU4ZjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9kbWFfYnVmLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2RtYV9idWYuaApAQCAtMzQsNyArMzQsNiBAQCBzdHJ1Y3QgZG1hX2J1ZiAqYW1kZ3B1X2dl
bV9wcmltZV9leHBvcnQoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpnb2JqLAogCQkJCQlpbnQgZmxh
Z3MpOwogc3RydWN0IGRybV9nZW1fb2JqZWN0ICphbWRncHVfZ2VtX3ByaW1lX2ltcG9ydChzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCQkgICAgc3RydWN0IGRtYV9idWYgKmRtYV9idWYpOwot
c3RydWN0IHJlc2VydmF0aW9uX29iamVjdCAqYW1kZ3B1X2dlbV9wcmltZV9yZXNfb2JqKHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqKTsKIHZvaWQgKmFtZGdwdV9nZW1fcHJpbWVfdm1hcChzdHJ1Y3Qg
ZHJtX2dlbV9vYmplY3QgKm9iaik7CiB2b2lkIGFtZGdwdV9nZW1fcHJpbWVfdnVubWFwKHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqb2JqLCB2b2lkICp2YWRkcik7CiBpbnQgYW1kZ3B1X2dlbV9wcmlt
ZV9tbWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2Rydi5jCmluZGV4IDhlMWIyNjkzNTFlOC4uMzIzM2M1YWJmNWI2IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rydi5jCkBAIC0xMzMzLDcgKzEzMzMsNiBAQCBz
dGF0aWMgc3RydWN0IGRybV9kcml2ZXIga21zX2RyaXZlciA9IHsKIAkucHJpbWVfZmRfdG9faGFu
ZGxlID0gZHJtX2dlbV9wcmltZV9mZF90b19oYW5kbGUsCiAJLmdlbV9wcmltZV9leHBvcnQgPSBh
bWRncHVfZ2VtX3ByaW1lX2V4cG9ydCwKIAkuZ2VtX3ByaW1lX2ltcG9ydCA9IGFtZGdwdV9nZW1f
cHJpbWVfaW1wb3J0LAotCS5nZW1fcHJpbWVfcmVzX29iaiA9IGFtZGdwdV9nZW1fcHJpbWVfcmVz
X29iaiwKIAkuZ2VtX3ByaW1lX2dldF9zZ190YWJsZSA9IGFtZGdwdV9nZW1fcHJpbWVfZ2V0X3Nn
X3RhYmxlLAogCS5nZW1fcHJpbWVfaW1wb3J0X3NnX3RhYmxlID0gYW1kZ3B1X2dlbV9wcmltZV9p
bXBvcnRfc2dfdGFibGUsCiAJLmdlbV9wcmltZV92bWFwID0gYW1kZ3B1X2dlbV9wcmltZV92bWFw
LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5j
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5jCmluZGV4IDE2Zjk2
ZjJlMzY3MS4uN2IyNTFmZDI2YmQ1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfb2JqZWN0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X29iamVjdC5jCkBAIC01MDUsNiArNTA1LDggQEAgc3RhdGljIGludCBhbWRncHVfYm9fZG9f
Y3JlYXRlKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogCWlmICh1bmxpa2VseShyICE9IDAp
KQogCQlyZXR1cm4gcjsKIAorCWJvLT5nZW1fYmFzZS5yZXN2ID0gYm8tPnRiby5yZXN2OworCiAJ
aWYgKCFhbWRncHVfZ21jX3ZyYW1fZnVsbF92aXNpYmxlKCZhZGV2LT5nbWMpICYmCiAJICAgIGJv
LT50Ym8ubWVtLm1lbV90eXBlID09IFRUTV9QTF9WUkFNICYmCiAJICAgIGJvLT50Ym8ubWVtLnN0
YXJ0IDwgYWRldi0+Z21jLnZpc2libGVfdnJhbV9zaXplID4+IFBBR0VfU0hJRlQpCi0tIAoyLjIw
LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1k
ZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
