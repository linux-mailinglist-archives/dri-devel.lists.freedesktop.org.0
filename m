Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5A20D4C2C5
	for <lists+dri-devel@lfdr.de>; Wed, 19 Jun 2019 23:11:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5C86D6E46B;
	Wed, 19 Jun 2019 21:11:49 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x443.google.com (mail-pf1-x443.google.com
 [IPv6:2607:f8b0:4864:20::443])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 572D56E46B
 for <dri-devel@lists.freedesktop.org>; Wed, 19 Jun 2019 21:11:48 +0000 (UTC)
Received: by mail-pf1-x443.google.com with SMTP id p184so313295pfp.7
 for <dri-devel@lists.freedesktop.org>; Wed, 19 Jun 2019 14:11:48 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=UqQ12c8oFg0dcVTOrMLNZkNDHBR+LaLcBh/sRyeBypc=;
 b=UPHYwEJNqPuGcZLX4KRoOGHLvalWU5glq2+BwT6G48dS/4wNA2NGGwAHBq0w46SxHd
 CQKWm12dCp6MIiumIxq87mQt12AkBiNBVILYIXckAi6UBDw9UghEDIPwltJq6V/zqSHS
 3g4PaK+fuTrhZqKSJyLdf9Qpm7ZXZiueYEYCYhoAieNxcBZ2JA3FtDHAyu/MAbbfp6IF
 rrWBZfCqJE9Ti+OvnqxXEr/cfhJPZp5csi6Z0wtIyZF5e+Q4LHS/X6CyJAOmwRcL/HQZ
 o3KW79R91FKwOD98Q+dvSxhiQzYPkJi/dkN/ppEzfn1SC8lpTUZ5JGv9xN8uHo0UayLd
 t8OQ==
X-Gm-Message-State: APjAAAVbDwYK+e2p7bS8Z+bDQENtKLJ6cH8F1kHD0MeWZTAcmKKUBuCg
 wEs2QYKdgTmFPzgVq7mZaiEetw==
X-Google-Smtp-Source: APXvYqx/c2t5NAwX8FA7Uq82W2txp2Rp4HlmYnUIfyHTrU/eW2XjahPhf+pM0HN78yZeg0mPG3pJhg==
X-Received: by 2002:a63:4e10:: with SMTP id c16mr9364838pgb.214.1560978707695; 
 Wed, 19 Jun 2019 14:11:47 -0700 (PDT)
Received: from tictac2.mtv.corp.google.com
 ([2620:15c:202:1:24fa:e766:52c9:e3b2])
 by smtp.gmail.com with ESMTPSA id p7sm35319117pfp.131.2019.06.19.14.11.46
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 19 Jun 2019 14:11:46 -0700 (PDT)
From: Douglas Anderson <dianders@chromium.org>
To: Andrzej Hajda <a.hajda@samsung.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>, seanpaul@chromium.org
Subject: [PATCH v2 1/2] drm/bridge/synopsys: dw-hdmi: Handle audio for more
 clock rates
Date: Wed, 19 Jun 2019 14:07:17 -0700
Message-Id: <20190619210718.134951-1-dianders@chromium.org>
X-Mailer: git-send-email 2.22.0.410.gd8fdbe21b5-goog
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=chromium.org; s=google;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=UqQ12c8oFg0dcVTOrMLNZkNDHBR+LaLcBh/sRyeBypc=;
 b=iC9Di/9ZfP4OrwV3ZKuhmT3/TWXjDaE8BipQuK4Mc8V4Wac6ZYwuWY88MLeJ+H8/GD
 GLMqFmf7buOvo4UFZFCCfc2Kj8U9iWaZAmw4FhQ/NSKRbb79uNm6j5a9ssPg++X1A0vO
 HmyVHVARdgLUPpYi/WEw4emKtf9OdEifHXQ0s=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: jernej.skrabec@siol.net, narmstrong@baylibre.com, maxime.ripard@bootlin.com,
 David Airlie <airlied@linux.ie>, jonas@kwiboo.se,
 Douglas Anderson <dianders@chromium.org>, dri-devel@lists.freedesktop.org,
 linux-kernel@vger.kernel.org, linux-rockchip@lists.infradead.org,
 dgreid@chromium.org, jbrunet@baylibre.com, Sam Ravnborg <sam@ravnborg.org>,
 cychiang@chromium.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TGV0J3MgYWRkIHNvbWUgYmV0dGVyIHN1cHBvcnQgZm9yIEhETUkgYXVkaW8gdG8gZHdfaGRtaS4K
U3BlY2lmaWNhbGx5OgoKMS4gRm9yIDQ0LjEga0h6IGF1ZGlvIHRoZSBvbGQgY29kZSBtYWRlIHRo
ZSBhc3N1bXB0aW9uIHRoYXQgYW4gTiBvZgo2MjcyIHdhcyByaWdodCBtb3N0IG9mIHRoZSB0aW1l
LiAgVGhhdCB3YXNuJ3QgdHJ1ZSBhbmQgdGhlIG5ldyB0YWJsZQpzaG91bGQgcGljayBhIG1vcmUg
aWRlYWwgdmFsdWUuCgoyLiBUaGUgbmV3IHRhYmxlIGhhcyB2YWx1ZXMgZnJvbSB0aGUgSERNSSBz
cGVjIGZvciAyOTcgTUh6IGFuZCA1OTQKTUh6LgoKMy4gVGhlcmUgaXMgbm93IGNvZGUgdG8gdHJ5
IHRvIGNvbWUgdXAgd2l0aCBhIG1vcmUgaWRlYSBOL0NUUyBmb3IKY2xvY2sgcmF0ZXMgdGhhdCBh
cmVuJ3QgaW4gdGhlIHRhYmxlLiAgVGhpcyBjb2RlIGlzIGEgYml0IHNsb3cgYmVjYXVzZQppdCBp
dGVyYXRlcyBvdmVyIGV2ZXJ5IHBvc3NpYmxlIHZhbHVlIG9mIE4gYW5kIHBpY2tzIHRoZSBiZXN0
IG9uZSwgYnV0Cml0IHNob3VsZCBtYWtlIGEgZ29vZCBmYWxsYmFjay4KCk5PVEVTOgotIFRoZSBv
ZGRlc3QgcGFydCBvZiB0aGlzIHBhdGNoIGNvbWVzIGFib3V0IGJlY2F1c2UgY29tcHV0aW5nIHRo
ZQogIGlkZWFsIE4vQ1RTIG1lYW5zIGtub3dpbmcgdGhlIF9leGFjdF8gY2xvY2sgcmF0ZSwgbm90
IGEgcm91bmRlZAogIHZlcnNpb24gb2YgaXQuICBUaGUgZHJtIGZyYW1ld29yayBtYWtlcyB0aGlz
IGhhcmRlciBieSByb3VuZGluZwogIHJhdGVzIHRvIGtIeiwgYnV0IGV2ZW4gaWYgaXQgZGlkbid0
IHRoZXJlIG1pZ2h0IGJlIGNhc2VzIHdoZXJlIHRoZQogIGlkZWFsIHJhdGUgY291bGQgb25seSBi
ZSBjYWxjdWxhdGVkIGlmIHdlIGtuZXcgdGhlIHJlYWwKICAobm9uLWludGVncmFsKSByYXRlLiAg
VGhpcyBtZWFucyB0aGF0IGluIGNhc2VzIHdoZXJlIHdlIGtub3cgKG9yCiAgYmVsaWV2ZSkgdGhh
dCB0aGUgdHJ1ZSByYXRlIGlzIHNvbWV0aGluZyBvdGhlciB0aGFuIHRoZSByYXRlIHdlIGFyZQog
IHRvbGQgYnkgZHJtLgotIFRoaXMgcGF0Y2ggbWFrZXMgbXVjaCBsZXNzIG9mIGEgZGlmZmVyZW5j
ZSBhZnRlciB0aGUgcGF0Y2gKICAoImRybS9icmlkZ2U6IGR3LWhkbWk6IFVzZSBhdXRvbWF0aWMg
Q1RTIGdlbmVyYXRpb24gbW9kZSB3aGVuIHVzaW5nCiAgbm9uLUFIQiBhdWRpbyIpLCBhdCBsZWFz
dCBpZiB5b3UncmUgdXNpbmcgSTJTIGF1ZGlvLiAgVGhlIG1haW4gZ29hbAogIG9mIHBpY2tpbmcg
YSBnb29kIE4gaXMgdG8gbWFrZSBpdCBwb3NzaWJsZSB0byBnZXQgYSBuaWNlIGludGVncmFsCiAg
Q1RTIHZhbHVlLCBidXQgaWYgQ1RTIGlzIGF1dG9tYXRpYyB0aGVuIHRoYXQncyBtdWNoIGxlc3Mg
Y3JpdGljYWwuCgpTaWduZWQtb2ZmLWJ5OiBEb3VnbGFzIEFuZGVyc29uIDxkaWFuZGVyc0BjaHJv
bWl1bS5vcmc+Ci0tLQoKQ2hhbmdlcyBpbiB2MjoKLSBBdG9wICgiZHJtL2JyaWRnZTogZHctaGRt
aTogVXNlIGF1dG9tYXRpYyBDVFMgZ2VuZXJhdGlvbiBtb2RlIHdoZW4KICB1c2luZyBub24tQUhC
IGF1ZGlvIikuCi0gU3BsaXQgb3V0IHRoZSBhYmlsaXR5IG9mIGEgcGxhdGZvcm0gdG8gcHJvdmlk
ZSBjdXN0b20gdGFibGVzLgoKIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctaGRt
aS5jIHwgMjAzICsrKysrKysrKysrKysrKysrLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAxNjIgaW5z
ZXJ0aW9ucygrKSwgNDEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9w
c3lzL2R3LWhkbWkuYwppbmRleCBkZTRjMzY2OWM4M2YuLjdjZGZmZWJjYzdjYiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMKQEAgLTYwLDYgKzYwLDgyIEBAIGVu
dW0gaGRtaV9kYXRhbWFwIHsKIAlZQ2JDcjQyMl8xMkIgPSAweDEyLAogfTsKIAorc3RydWN0IGR3
X2hkbWlfYXVkaW9fdG1kc19uIHsKKwl1bnNpZ25lZCBsb25nIHRtZHM7CisJdW5zaWduZWQgaW50
IG5fMzJrOworCXVuc2lnbmVkIGludCBuXzQ0azE7CisJdW5zaWduZWQgaW50IG5fNDhrOworfTsK
KworLyoKKyAqIFVubGVzcyBvdGhlcndpc2Ugbm90ZWQsIGVudHJpZXMgaW4gdGhpcyB0YWJsZSBh
cmUgMTAwJSBvcHRpbWl6YXRpb24uCisgKiBWYWx1ZXMgY2FuIGJlIG9idGFpbmVkIGZyb20gaGRt
aV9jb21wdXRlX24oKSBidXQgdGhhdCBmdW5jdGlvbiBpcworICogc2xvdyBzbyB3ZSBwcmUtY29t
cHV0ZSB2YWx1ZXMgd2UgZXhwZWN0IHRvIHNlZS4KKyAqCisgKiBBbGwgMzJrIGFuZCA0OGsgdmFs
dWVzIGFyZSBleHBlY3RlZCB0byBiZSB0aGUgc2FtZSAoZHVlIHRvIHRoZSB3YXkKKyAqIHRoZSBt
YXRoIHdvcmtzKSBmb3IgYW55IHJhdGUgdGhhdCdzIGFuIGV4YWN0IGtIei4KKyAqCisgKiBJZiBh
IHBhcnRpY3VsYXIgcGxhdGZvcm0ga25vd3MgdGhhdCBpdCBtYWtlcyBhIHJhdGUgc2xpZ2h0bHkK
KyAqIGRpZmZlcmVudGx5IHRoZW4gaXQgc2hvdWxkIGFkZCBhIHBsYXRmb3JtLXNwZWNpZmljIG1h
dGNoLgorICovCitzdGF0aWMgY29uc3Qgc3RydWN0IGR3X2hkbWlfYXVkaW9fdG1kc19uIGNvbW1v
bl90bWRzX25fdGFibGVbXSA9IHsKKwkvKiBEb2Vzbid0IG1hdGNoIGNvbXB1dGF0aW9ucywgYXNz
dW1lcyByZWFsIGNsb2NrID0gMjUuMiBNSHogLyAxLjAwMSAqLworCXsgLnRtZHMgPSAyNTE3NTAw
MCwgLm5fMzJrID0gNDU3NiwgLm5fNDRrMSA9IDcwMDcsIC5uXzQ4ayA9IDY4NjQsIH0sCisKKwl7
IC50bWRzID0gMjUyMDAwMDAsIC5uXzMyayA9IDQwOTYsIC5uXzQ0azEgPSA1NjU2LCAubl80OGsg
PSA2MTQ0LCB9LAorCXsgLnRtZHMgPSAyNzAwMDAwMCwgLm5fMzJrID0gNDA5NiwgLm5fNDRrMSA9
IDU0ODgsIC5uXzQ4ayA9IDYxNDQsIH0sCisJeyAudG1kcyA9IDI3MDI3MDAwLCAubl8zMmsgPSA0
MDk2LCAubl80NGsxID0gNjI3MiwgLm5fNDhrID0gNjE0NCwgfSwKKwl7IC50bWRzID0gMjgzMjAw
MDAsIC5uXzMyayA9IDQwOTYsIC5uXzQ0azEgPSA1NTg2LCAubl80OGsgPSA2MTQ0LCB9LAorCXsg
LnRtZHMgPSAzMDI0MDAwMCwgLm5fMzJrID0gNDA5NiwgLm5fNDRrMSA9IDU2NDIsIC5uXzQ4ayA9
IDYxNDQsIH0sCisJeyAudG1kcyA9IDMxNTAwMDAwLCAubl8zMmsgPSA0MDk2LCAubl80NGsxID0g
NTYwMCwgLm5fNDhrID0gNjE0NCwgfSwKKwl7IC50bWRzID0gMzIwMDAwMDAsIC5uXzMyayA9IDQw
OTYsIC5uXzQ0azEgPSA1NzMzLCAubl80OGsgPSA2MTQ0LCB9LAorCXsgLnRtZHMgPSAzMzc1MDAw
MCwgLm5fMzJrID0gNDA5NiwgLm5fNDRrMSA9IDYyNzIsIC5uXzQ4ayA9IDYxNDQsIH0sCisJeyAu
dG1kcyA9IDM2MDAwMDAwLCAubl8zMmsgPSA0MDk2LCAubl80NGsxID0gNTY4NCwgLm5fNDhrID0g
NjE0NCwgfSwKKwl7IC50bWRzID0gNDAwMDAwMDAsIC5uXzMyayA9IDQwOTYsIC5uXzQ0azEgPSA1
NzMzLCAubl80OGsgPSA2MTQ0LCB9LAorCXsgLnRtZHMgPSA0OTUwMDAwMCwgLm5fMzJrID0gNDA5
NiwgLm5fNDRrMSA9IDU0ODgsIC5uXzQ4ayA9IDYxNDQsIH0sCisJeyAudG1kcyA9IDUwMDAwMDAw
LCAubl8zMmsgPSA0MDk2LCAubl80NGsxID0gNTI5MiwgLm5fNDhrID0gNjE0NCwgfSwKKwl7IC50
bWRzID0gNTQwMDAwMDAsIC5uXzMyayA9IDQwOTYsIC5uXzQ0azEgPSA1Njg0LCAubl80OGsgPSA2
MTQ0LCB9LAorCXsgLnRtZHMgPSA2NTAwMDAwMCwgLm5fMzJrID0gNDA5NiwgLm5fNDRrMSA9IDcw
NTYsIC5uXzQ4ayA9IDYxNDQsIH0sCisJeyAudG1kcyA9IDY4MjUwMDAwLCAubl8zMmsgPSA0MDk2
LCAubl80NGsxID0gNTM3NiwgLm5fNDhrID0gNjE0NCwgfSwKKwl7IC50bWRzID0gNzEwMDAwMDAs
IC5uXzMyayA9IDQwOTYsIC5uXzQ0azEgPSA3MDU2LCAubl80OGsgPSA2MTQ0LCB9LAorCXsgLnRt
ZHMgPSA3MjAwMDAwMCwgLm5fMzJrID0gNDA5NiwgLm5fNDRrMSA9IDU2MzUsIC5uXzQ4ayA9IDYx
NDQsIH0sCisJeyAudG1kcyA9IDczMjUwMDAwLCAubl8zMmsgPSA0MDk2LCAubl80NGsxID0gMTQx
MTIsIC5uXzQ4ayA9IDYxNDQsIH0sCisKKwkvKiBEb2Vzbid0IG1hdGNoIGNvbXB1dGF0aW9ucywg
YXNzdW1lcyByZWFsIGNsb2NrID0gNzQuMjUgTUh6IC8gMS4wMDEgKi8KKwl7IC50bWRzID0gNzQx
NzYwMDAsIC5uXzMyayA9IDExNjQ4LCAubl80NGsxID0gMTc4MzYsIC5uXzQ4ayA9IDExNjQ4LCB9
LAorCisJeyAudG1kcyA9IDc0MjUwMDAwLCAubl8zMmsgPSA0MDk2LCAubl80NGsxID0gNjI3Miwg
Lm5fNDhrID0gNjE0NCwgfSwKKwl7IC50bWRzID0gNzUwMDAwMDAsIC5uXzMyayA9IDQwOTYsIC5u
XzQ0azEgPSA1ODgwLCAubl80OGsgPSA2MTQ0LCB9LAorCXsgLnRtZHMgPSA3ODc1MDAwMCwgLm5f
MzJrID0gNDA5NiwgLm5fNDRrMSA9IDU2MDAsIC5uXzQ4ayA9IDYxNDQsIH0sCisJeyAudG1kcyA9
IDc4ODAwMDAwLCAubl8zMmsgPSA0MDk2LCAubl80NGsxID0gNTI5MiwgLm5fNDhrID0gNjE0NCwg
fSwKKwl7IC50bWRzID0gNzk1MDAwMDAsIC5uXzMyayA9IDQwOTYsIC5uXzQ0azEgPSA0NzA0LCAu
bl80OGsgPSA2MTQ0LCB9LAorCXsgLnRtZHMgPSA4MzUwMDAwMCwgLm5fMzJrID0gNDA5NiwgLm5f
NDRrMSA9IDcwNTYsIC5uXzQ4ayA9IDYxNDQsIH0sCisJeyAudG1kcyA9IDg1NTAwMDAwLCAubl8z
MmsgPSA0MDk2LCAubl80NGsxID0gNTQ4OCwgLm5fNDhrID0gNjE0NCwgfSwKKwl7IC50bWRzID0g
ODg3NTAwMDAsIC5uXzMyayA9IDQwOTYsIC5uXzQ0azEgPSAxNDExMiwgLm5fNDhrID0gNjE0NCwg
fSwKKwl7IC50bWRzID0gOTc3NTAwMDAsIC5uXzMyayA9IDQwOTYsIC5uXzQ0azEgPSAxNDExMiwg
Lm5fNDhrID0gNjE0NCwgfSwKKwl7IC50bWRzID0gMTAxMDAwMDAwLCAubl8zMmsgPSA0MDk2LCAu
bl80NGsxID0gNzA1NiwgLm5fNDhrID0gNjE0NCwgfSwKKwl7IC50bWRzID0gMTA2NTAwMDAwLCAu
bl8zMmsgPSA0MDk2LCAubl80NGsxID0gNDcwNCwgLm5fNDhrID0gNjE0NCwgfSwKKwl7IC50bWRz
ID0gMTA4MDAwMDAwLCAubl8zMmsgPSA0MDk2LCAubl80NGsxID0gNTY4NCwgLm5fNDhrID0gNjE0
NCwgfSwKKwl7IC50bWRzID0gMTE1NTAwMDAwLCAubl8zMmsgPSA0MDk2LCAubl80NGsxID0gNTcx
MiwgLm5fNDhrID0gNjE0NCwgfSwKKwl7IC50bWRzID0gMTE5MDAwMDAwLCAubl8zMmsgPSA0MDk2
LCAubl80NGsxID0gNTU0NCwgLm5fNDhrID0gNjE0NCwgfSwKKwl7IC50bWRzID0gMTM1MDAwMDAw
LCAubl8zMmsgPSA0MDk2LCAubl80NGsxID0gNTQ4OCwgLm5fNDhrID0gNjE0NCwgfSwKKwl7IC50
bWRzID0gMTQ2MjUwMDAwLCAubl8zMmsgPSA0MDk2LCAubl80NGsxID0gNjI3MiwgLm5fNDhrID0g
NjE0NCwgfSwKKworCS8qIERvZXNuJ3QgbWF0Y2ggY29tcHV0YXRpb25zLCBhc3N1bWVzIHJlYWwg
Y2xvY2sgPSAxNDguNSBNSHogLyAxLjAwMSAqLworCXsgLnRtZHMgPSAxNDgzNTIwMDAsIC5uXzMy
ayA9IDExNjQ4LCAubl80NGsxID0gODkxOCwgLm5fNDhrID0gNTgyNCwgfSwKKworCXsgLnRtZHMg
PSAxNDg1MDAwMDAsIC5uXzMyayA9IDQwOTYsIC5uXzQ0azEgPSA1NDg4LCAubl80OGsgPSA2MTQ0
LCB9LAorCXsgLnRtZHMgPSAxNTQwMDAwMDAsIC5uXzMyayA9IDQwOTYsIC5uXzQ0azEgPSA1NTQ0
LCAubl80OGsgPSA2MTQ0LCB9LAorCXsgLnRtZHMgPSAxNjIwMDAwMDAsIC5uXzMyayA9IDQwOTYs
IC5uXzQ0azEgPSA1Njg0LCAubl80OGsgPSA2MTQ0LCB9LAorCisJLyogRm9yIDI5NyBNSHorIEhE
TUkgc3BlYyBoYXMgc29tZSBvdGhlciBydWxlIGZvciBzZXR0aW5nIE4gKi8KKwl7IC50bWRzID0g
Mjk3MDAwMDAwLCAubl8zMmsgPSAzMDczLCAubl80NGsxID0gNDcwNCwgLm5fNDhrID0gNTEyMCwg
fSwKKwl7IC50bWRzID0gNTk0MDAwMDAwLCAubl8zMmsgPSAzMDczLCAubl80NGsxID0gOTQwOCwg
Lm5fNDhrID0gMTAyNDAsIH0sCisKKwkvKiBFbmQgb2YgdGFibGUgKi8KKwl7IC50bWRzID0gMCwg
ICAgICAgICAubl8zMmsgPSAwLCAgICAubl80NGsxID0gMCwgICAgLm5fNDhrID0gMCwgfSwKK307
CisKIHN0YXRpYyBjb25zdCB1MTYgY3NjX2NvZWZmX2RlZmF1bHRbM11bNF0gPSB7CiAJeyAweDIw
MDAsIDB4MDAwMCwgMHgwMDAwLCAweDAwMDAgfSwKIAl7IDB4MDAwMCwgMHgyMDAwLCAweDAwMDAs
IDB4MDAwMCB9LApAQCAtNTI0LDYwICs2MDAsMTA1IEBAIHN0YXRpYyB2b2lkIGhkbWlfc2V0X2N0
c19uKHN0cnVjdCBkd19oZG1pICpoZG1pLCB1bnNpZ25lZCBpbnQgY3RzLAogCWhkbWlfd3JpdGVi
KGhkbWksIG4gJiAweGZmLCBIRE1JX0FVRF9OMSk7CiB9CiAKLXN0YXRpYyB1bnNpZ25lZCBpbnQg
aGRtaV9jb21wdXRlX24odW5zaWduZWQgaW50IGZyZXEsIHVuc2lnbmVkIGxvbmcgcGl4ZWxfY2xr
KQorc3RhdGljIGludCBoZG1pX21hdGNoX3RtZHNfbl90YWJsZShzdHJ1Y3QgZHdfaGRtaSAqaGRt
aSwgdW5zaWduZWQgaW50IGZyZXEsCisJCQkJICAgdW5zaWduZWQgbG9uZyBwaXhlbF9jbGspCiB7
Ci0JdW5zaWduZWQgaW50IG4gPSAoMTI4ICogZnJlcSkgLyAxMDAwOwotCXVuc2lnbmVkIGludCBt
dWx0ID0gMTsKKwljb25zdCBzdHJ1Y3QgZHdfaGRtaV9hdWRpb190bWRzX24gKnRtZHNfbiA9IE5V
TEw7CisJaW50IG11bHQgPSAxOworCWludCBpOwogCiAJd2hpbGUgKGZyZXEgPiA0ODAwMCkgewog
CQltdWx0ICo9IDI7CiAJCWZyZXEgLz0gMjsKIAl9CiAKKwlmb3IgKGkgPSAwOyBjb21tb25fdG1k
c19uX3RhYmxlW2ldLnRtZHMgIT0gMDsgaSsrKSB7CisJCWlmIChwaXhlbF9jbGsgPT0gY29tbW9u
X3RtZHNfbl90YWJsZVtpXS50bWRzKSB7CisJCQl0bWRzX24gPSAmY29tbW9uX3RtZHNfbl90YWJs
ZVtpXTsKKwkJCWJyZWFrOworCQl9CisJfQorCisJaWYgKHRtZHNfbiA9PSBOVUxMKQorCQlyZXR1
cm4gLUVOT0VOVDsKKwogCXN3aXRjaCAoZnJlcSkgewogCWNhc2UgMzIwMDA6Ci0JCWlmIChwaXhl
bF9jbGsgPT0gMjUxNzUwMDApCi0JCQluID0gNDU3NjsKLQkJZWxzZSBpZiAocGl4ZWxfY2xrID09
IDI3MDI3MDAwKQotCQkJbiA9IDQwOTY7Ci0JCWVsc2UgaWYgKHBpeGVsX2NsayA9PSA3NDE3NjAw
MCB8fCBwaXhlbF9jbGsgPT0gMTQ4MzUyMDAwKQotCQkJbiA9IDExNjQ4OwotCQllbHNlCi0JCQlu
ID0gNDA5NjsKLQkJbiAqPSBtdWx0OwotCQlicmVhazsKLQorCQlyZXR1cm4gdG1kc19uLT5uXzMy
ayAqIG11bHQ7CiAJY2FzZSA0NDEwMDoKLQkJaWYgKHBpeGVsX2NsayA9PSAyNTE3NTAwMCkKLQkJ
CW4gPSA3MDA3OwotCQllbHNlIGlmIChwaXhlbF9jbGsgPT0gNzQxNzYwMDApCi0JCQluID0gMTc4
MzY7Ci0JCWVsc2UgaWYgKHBpeGVsX2NsayA9PSAxNDgzNTIwMDApCi0JCQluID0gODkxODsKLQkJ
ZWxzZQotCQkJbiA9IDYyNzI7Ci0JCW4gKj0gbXVsdDsKLQkJYnJlYWs7Ci0KKwkJcmV0dXJuIHRt
ZHNfbi0+bl80NGsxICogbXVsdDsKIAljYXNlIDQ4MDAwOgotCQlpZiAocGl4ZWxfY2xrID09IDI1
MTc1MDAwKQotCQkJbiA9IDY4NjQ7Ci0JCWVsc2UgaWYgKHBpeGVsX2NsayA9PSAyNzAyNzAwMCkK
LQkJCW4gPSA2MTQ0OwotCQllbHNlIGlmIChwaXhlbF9jbGsgPT0gNzQxNzYwMDApCi0JCQluID0g
MTE2NDg7Ci0JCWVsc2UgaWYgKHBpeGVsX2NsayA9PSAxNDgzNTIwMDApCi0JCQluID0gNTgyNDsK
LQkJZWxzZQotCQkJbiA9IDYxNDQ7Ci0JCW4gKj0gbXVsdDsKLQkJYnJlYWs7Ci0KKwkJcmV0dXJu
IHRtZHNfbi0+bl80OGsgKiBtdWx0OwogCWRlZmF1bHQ6Ci0JCWJyZWFrOworCQlyZXR1cm4gLUVO
T0VOVDsKKwl9Cit9CisKK3N0YXRpYyB1NjQgaGRtaV9hdWRpb19tYXRoX2RpZmYodW5zaWduZWQg
aW50IGZyZXEsIHVuc2lnbmVkIGludCBuLAorCQkJCXVuc2lnbmVkIGludCBwaXhlbF9jbGspCit7
CisJdTY0IGZpbmFsLCBkaWZmOworCXU2NCBjdHM7CisKKwlmaW5hbCA9ICh1NjQpcGl4ZWxfY2xr
ICogbjsKKworCWN0cyA9IGZpbmFsOworCWRvX2RpdihjdHMsIDEyOCAqIGZyZXEpOworCisJZGlm
ZiA9IGZpbmFsIC0gKHU2NCljdHMgKiAoMTI4ICogZnJlcSk7CisKKwlyZXR1cm4gZGlmZjsKK30K
Kworc3RhdGljIHVuc2lnbmVkIGludCBoZG1pX2NvbXB1dGVfbihzdHJ1Y3QgZHdfaGRtaSAqaGRt
aSwgdW5zaWduZWQgaW50IGZyZXEsCisJCQkJICAgdW5zaWduZWQgbG9uZyBwaXhlbF9jbGspCit7
CisJdW5zaWduZWQgaW50IG1pbl9uID0gRElWX1JPVU5EX1VQKCgxMjggKiBmcmVxKSwgMTUwMCk7
CisJdW5zaWduZWQgaW50IG1heF9uID0gKDEyOCAqIGZyZXEpIC8gMzAwOworCXVuc2lnbmVkIGlu
dCBpZGVhbF9uID0gKDEyOCAqIGZyZXEpIC8gMTAwMDsKKwl1bnNpZ25lZCBpbnQgYmVzdF9uX2Rp
c3RhbmNlID0gaWRlYWxfbjsKKwl1bnNpZ25lZCBpbnQgYmVzdF9uID0gMDsKKwl1NjQgYmVzdF9k
aWZmID0gVTY0X01BWDsKKwlpbnQgbjsKKworCS8qIElmIHRoZSBpZGVhbCBOIGNvdWxkIHNhdGlz
ZnkgdGhlIGF1ZGlvIG1hdGgsIHRoZW4ganVzdCB0YWtlIGl0ICovCisJaWYgKGhkbWlfYXVkaW9f
bWF0aF9kaWZmKGZyZXEsIGlkZWFsX24sIHBpeGVsX2NsaykgPT0gMCkKKwkJcmV0dXJuIGlkZWFs
X247CisKKwlmb3IgKG4gPSBtaW5fbjsgbiA8PSBtYXhfbjsgbisrKSB7CisJCXU2NCBkaWZmID0g
aGRtaV9hdWRpb19tYXRoX2RpZmYoZnJlcSwgbiwgcGl4ZWxfY2xrKTsKKworCQlpZiAoZGlmZiA8
IGJlc3RfZGlmZiB8fCAoZGlmZiA9PSBiZXN0X2RpZmYgJiYKKwkJICAgIGFicyhuIC0gaWRlYWxf
bikgPCBiZXN0X25fZGlzdGFuY2UpKSB7CisJCQliZXN0X24gPSBuOworCQkJYmVzdF9kaWZmID0g
ZGlmZjsKKwkJCWJlc3Rfbl9kaXN0YW5jZSA9IGFicyhiZXN0X24gLSBpZGVhbF9uKTsKKwkJfQor
CisJCS8qCisJCSAqIFRoZSBiZXN0IE4gYWxyZWFkeSBzYXRpc2Z5IHRoZSBhdWRpbyBtYXRoLCBh
bmQgYWxzbyBiZQorCQkgKiB0aGUgY2xvc2VzdCB2YWx1ZSB0byBpZGVhbCBOLCBzbyBqdXN0IGN1
dCB0aGUgbG9vcC4KKwkJICovCisJCWlmICgoYmVzdF9kaWZmID09IDApICYmIChhYnMobiAtIGlk
ZWFsX24pID4gYmVzdF9uX2Rpc3RhbmNlKSkKKwkJCWJyZWFrOwogCX0KIAotCXJldHVybiBuOwor
CXJldHVybiBiZXN0X247Cit9CisKK3N0YXRpYyB1bnNpZ25lZCBpbnQgaGRtaV9maW5kX24oc3Ry
dWN0IGR3X2hkbWkgKmhkbWksIHVuc2lnbmVkIGludCBmcmVxLAorCQkJCXVuc2lnbmVkIGxvbmcg
cGl4ZWxfY2xrKQoreworCWludCBuOworCisJbiA9IGhkbWlfbWF0Y2hfdG1kc19uX3RhYmxlKGhk
bWksIGZyZXEsIHBpeGVsX2Nsayk7CisJaWYgKG4gPiAwKQorCQlyZXR1cm4gbjsKKworCWRldl93
YXJuKGhkbWktPmRldiwgIlJhdGUgJWx1IG1pc3Npbmc7IGNvbXB1dGUgTiBkeW5hbWljYWxseVxu
IiwKKwkJIHBpeGVsX2Nsayk7CisKKwlyZXR1cm4gaGRtaV9jb21wdXRlX24oaGRtaSwgZnJlcSwg
cGl4ZWxfY2xrKTsKIH0KIAogc3RhdGljIHZvaWQgaGRtaV9zZXRfY2xrX3JlZ2VuZXJhdG9yKHN0
cnVjdCBkd19oZG1pICpoZG1pLApAQCAtNTg4LDcgKzcwOSw3IEBAIHN0YXRpYyB2b2lkIGhkbWlf
c2V0X2Nsa19yZWdlbmVyYXRvcihzdHJ1Y3QgZHdfaGRtaSAqaGRtaSwKIAl1OCBjb25maWczOwog
CXU2NCB0bXA7CiAKLQluID0gaGRtaV9jb21wdXRlX24oc2FtcGxlX3JhdGUsIHBpeGVsX2Nsayk7
CisJbiA9IGhkbWlfZmluZF9uKGhkbWksIHNhbXBsZV9yYXRlLCBwaXhlbF9jbGspOwogCiAJY29u
ZmlnMyA9IGhkbWlfcmVhZGIoaGRtaSwgSERNSV9DT05GSUczX0lEKTsKIAotLSAKMi4yMi4wLjQx
MC5nZDhmZGJlMjFiNS1nb29nCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9k
cmktZGV2ZWw=
