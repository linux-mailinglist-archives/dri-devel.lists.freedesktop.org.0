Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E49E023591D
	for <lists+dri-devel@lfdr.de>; Sun,  2 Aug 2020 18:44:10 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4BCC96E12D;
	Sun,  2 Aug 2020 16:44:06 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtprelay.hostedemail.com (smtprelay0159.hostedemail.com
 [216.40.44.159])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DEAE46E158
 for <dri-devel@lists.freedesktop.org>; Sun,  2 Aug 2020 16:44:04 +0000 (UTC)
Received: from filter.hostedemail.com (clb03-v110.bra.tucows.net
 [216.40.38.60])
 by smtprelay07.hostedemail.com (Postfix) with ESMTP id DE99B181D341E;
 Sun,  2 Aug 2020 16:44:03 +0000 (UTC)
X-Session-Marker: 6A6F6540706572636865732E636F6D
X-Spam-Summary: 2, 0, 0, , d41d8cd98f00b204, joe@perches.com, ,
 RULES_HIT:41:69:152:327:355:379:800:960:966:968:973:988:989:1260:1277:1311:1313:1314:1345:1359:1437:1515:1516:1518:1593:1594:1605:1730:1747:1777:1792:1801:2196:2198:2199:2200:2393:2559:2562:2899:3138:3139:3140:3141:3142:3865:3867:3868:3870:3871:3872:3874:4250:4321:4385:4605:5007:6117:6119:6742:7875:7903:9592:10004:10394:10848:11026:11232:11473:11657:11658:11914:12043:12296:12297:12438:12555:12986:13161:13229:13894:13972:14096:14097:14394:14659:21080:21451:21611:21619:21789:21990:30012:30029:30046:30054:30070,
 0, RBL:none, CacheIP:none, Bayesian:0.5, 0.5, 0.5, Netcheck:none,
 DomainCache:0, MSF:not bulk, SPF:, MSBL:0, DNSBL:none, Custom_rules:0:0:0,
 LFtime:1, LUA_SUMMARY:none
X-HE-Tag: chin04_0d079c426f96
X-Filterd-Recvd-Size: 25490
Received: from XPS-9350.home (unknown [47.151.133.149])
 (Authenticated sender: joe@perches.com)
 by omf05.hostedemail.com (Postfix) with ESMTPA;
 Sun,  2 Aug 2020 16:44:00 +0000 (UTC)
Message-ID: <9e13761020750b1ce2f1fabee23ef6e2a2942882.camel@perches.com>
Subject: [PATCH V2] drm: Remove unnecessary drm_panel_attach and
 drm_panel_detach
From: Joe Perches <joe@perches.com>
To: Sam Ravnborg <sam@ravnborg.org>
Date: Sun, 02 Aug 2020 09:43:59 -0700
In-Reply-To: <20200802084411.GA908790@ravnborg.org>
References: <20200801120216.8488-1-bernard@vivo.com>
 <20200802070743.GA822300@ravnborg.org>
 <f1fbc362695af155a30627ef69b375e8a3daaa55.camel@perches.com>
 <20200802084411.GA908790@ravnborg.org>
User-Agent: Evolution 3.36.3-0ubuntu1 
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org, opensource.kernel@vivo.com,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Stefan Mavrodiev <stefan@olimex.com>, David Airlie <airlied@linux.ie>,
 Bernard Zhao <bernard@vivo.com>,
 Jerry Han <hanxu5@huaqin.corp-partner.google.com>,
 linux-kernel@vger.kernel.org, Thierry Reding <thierry.reding@gmail.com>,
 Jagan Teki <jagan@amarulasolutions.com>,
 Thomas Zimmermann <tzimmermann@suse.de>, Robert Chiras <robert.chiras@nxp.com>,
 Icenowy Zheng <icenowy@aosc.io>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlc2UgZnVuY3Rpb25zIGFyZSBub3cgZW1wdHkgYW5kIG5vIGxvbmdlcgp1c2VmdWwgc28gcmVt
b3ZlIHRoZSBmdW5jdGlvbnMgYW5kIHRoZWlyIHVzZXMuCgpTaWduZWQtb2ZmLWJ5OiBKb2UgUGVy
Y2hlcyA8am9lQHBlcmNoZXMuY29tPgotLS0KCj4gPiBJdCdzIHRvbyB0ZWRpb3VzIHRvIGJyZWFr
IGFwYXJ0IGludG8gbXVsdGlwbGUgcGF0Y2hlcy4KPiA+IERvbmUgd2l0aCBjb2NjaW5lbGxlIGFu
ZCB0eXBpbmcuCj4gPiAKPiA+IENvbXBpbGVkIGFsbHllc2NvbmZpZyB4ODYtNjQgb25seS4KClYy
OiBSZW1vdmVkIDMgYWRkaXRpb25hbCBsaW5lcwoKZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21h
cF9kcnYuYzozOTA6Mjc6IHdhcm5pbmc6IHVudXNlZCB2YXJpYWJsZSDigJhwcml24oCZIFstV3Vu
dXNlZC12YXJpYWJsZV0KZHJpdmVycy9ncHUvZHJtL2V4eW5vcy9leHlub3NfZHJtX2RwaS5jOjQ1
OjIxOiB3YXJuaW5nOiB1bnVzZWQgdmFyaWFibGUg4oCYY3R44oCZIFstV3VudXNlZC12YXJpYWJs
ZV0KZHJpdmVycy9ncHUvZHJtL3N1bjRpL3N1bjRpX2x2ZHMuYzo1NzoyMTogd2FybmluZzogdW51
c2VkIHZhcmlhYmxlIOKAmGx2ZHPigJkgWy1XdW51c2VkLXZhcmlhYmxlXQoKIGRyaXZlcnMvZ3B1
L2RybS9icmlkZ2UvYW5hbG9naXgvYW5hbG9naXgtYW54NjM0NS5jIHwgMTIgLS0tLS0tLS0KIGRy
aXZlcnMvZ3B1L2RybS9icmlkZ2UvYW5hbG9naXgvYW5hbG9naXhfZHBfY29yZS5jIHwgIDkgLS0t
LS0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL254cC1wdG4zNDYwLmMgICAgICAgICAgICAgICB8
ICAzIC0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3BhbmVsLmMgICAgICAgICAgICAgICAgICAg
ICB8ICA3IC0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3BhcmFkZS1wczg2MjIuYyAgICAg
ICAgICAgICB8ICAzIC0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY0LmMgICAgICAg
ICAgICAgICAgICB8ICAyIC0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY3LmMgICAg
ICAgICAgICAgICAgICB8ICAzIC0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RpLXNuNjVkc2k4
Ni5jICAgICAgICAgICAgICB8ICAzIC0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX3BhbmVsLmMgICAg
ICAgICAgICAgICAgICAgICAgICB8IDM2IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMv
Z3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kcGkuYyAgICAgICAgICAgIHwgIDggLS0tLS0KIGRy
aXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kc2kuYyAgICAgICAgICAgIHwgIDcgKyst
LS0KIGRyaXZlcnMvZ3B1L2RybS9mc2wtZGN1L2ZzbF9kY3VfZHJtX3JnYi5jICAgICAgICAgIHwg
IDcgLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pbXgvaW14LWxkYi5jICAgICAgICAgICAgICAgICAg
ICAgIHwgMTAgLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaW14L3BhcmFsbGVsLWRpc3BsYXkuYyAg
ICAgICAgICAgICB8ICA2IC0tLS0KIC4uLi9ncHUvZHJtL21zbS9kaXNwL21kcDQvbWRwNF9sdmRz
X2Nvbm5lY3Rvci5jICAgIHwgIDcgKy0tLS0KIGRyaXZlcnMvZ3B1L2RybS9tc20vZHNpL2RzaV9t
YW5hZ2VyLmMgICAgICAgICAgICAgIHwgIDEgLQogZHJpdmVycy9ncHUvZHJtL214c2ZiL214c2Zi
X2Rydi5jICAgICAgICAgICAgICAgICAgfCAgNyArLS0tLQogZHJpdmVycy9ncHUvZHJtL214c2Zi
L214c2ZiX291dC5jICAgICAgICAgICAgICAgICAgfCAgNiAtLS0tCiBkcml2ZXJzL2dwdS9kcm0v
b21hcGRybS9vbWFwX2Rydi5jICAgICAgICAgICAgICAgICB8IDE3IC0tLS0tLS0tLS0KIGRyaXZl
cnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfbHZkcy5jICAgICAgICAgICAgICAgIHwgIDYgKy0tLQog
ZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX2x2ZHMuYyAgICAgICAgICAgfCAgOSAt
LS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9zdGkvc3RpX2R2by5jICAgICAgICAgICAgICAgICAgICAg
IHwgIDIgLS0KIGRyaXZlcnMvZ3B1L2RybS9zdW40aS9zdW40aV9sdmRzLmMgICAgICAgICAgICAg
ICAgIHwgIDkgLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vc3VuNGkvc3VuNGlfcmdiLmMgICAgICAg
ICAgICAgICAgICB8ICA3IC0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vc3VuNGkvc3VuNmlfbWlwaV9k
c2kuYyAgICAgICAgICAgICB8ICAyIC0tCiBkcml2ZXJzL2dwdS9kcm0vdGVncmEvZHNpLmMgICAg
ICAgICAgICAgICAgICAgICAgICB8ICA0ICstLQogZHJpdmVycy9ncHUvZHJtL3RlZ3JhL291dHB1
dC5jICAgICAgICAgICAgICAgICAgICAgfCAxMCAtLS0tLS0KIGluY2x1ZGUvZHJtL2RybV9wYW5l
bC5oICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDMgLS0KIDI4IGZpbGVzIGNoYW5nZWQs
IDYgaW5zZXJ0aW9ucygrKSwgMjAwIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9icmlkZ2UvYW5hbG9naXgvYW5hbG9naXgtYW54NjM0NS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS9hbmFsb2dpeC9hbmFsb2dpeC1hbng2MzQ1LmMKaW5kZXggZjA4MmI0ZWQ0ODc4
Li5kOTE2NGZhYjA0NGQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvYW5hbG9n
aXgvYW5hbG9naXgtYW54NjM0NS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvYW5hbG9n
aXgvYW5hbG9naXgtYW54NjM0NS5jCkBAIC01MDcsMTAgKzUwNyw2IEBAIHN0YXRpYyBjb25zdCBz
dHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MgYW54NjM0NV9jb25uZWN0b3JfaGVscGVy
X2Z1bmNzID0KIHN0YXRpYyB2b2lkCiBhbng2MzQ1X2Nvbm5lY3Rvcl9kZXN0cm95KHN0cnVjdCBk
cm1fY29ubmVjdG9yICpjb25uZWN0b3IpCiB7Ci0Jc3RydWN0IGFueDYzNDUgKmFueDYzNDUgPSBj
b25uZWN0b3JfdG9fYW54NjM0NShjb25uZWN0b3IpOwotCi0JaWYgKGFueDYzNDUtPnBhbmVsKQot
CQlkcm1fcGFuZWxfZGV0YWNoKGFueDYzNDUtPnBhbmVsKTsKIAlkcm1fY29ubmVjdG9yX2NsZWFu
dXAoY29ubmVjdG9yKTsKIH0KIApAQCAtNTc1LDE0ICs1NzEsNiBAQCBzdGF0aWMgaW50IGFueDYz
NDVfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCQlyZXR1cm4gZXJy
OwogCX0KIAotCWlmIChhbng2MzQ1LT5wYW5lbCkgewotCQllcnIgPSBkcm1fcGFuZWxfYXR0YWNo
KGFueDYzNDUtPnBhbmVsLCAmYW54NjM0NS0+Y29ubmVjdG9yKTsKLQkJaWYgKGVycikgewotCQkJ
RFJNX0VSUk9SKCJGYWlsZWQgdG8gYXR0YWNoIHBhbmVsOiAlZFxuIiwgZXJyKTsKLQkJCXJldHVy
biBlcnI7Ci0JCX0KLQl9Ci0KIAlyZXR1cm4gMDsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2JyaWRnZS9hbmFsb2dpeC9hbmFsb2dpeF9kcF9jb3JlLmMgYi9kcml2ZXJzL2dwdS9k
cm0vYnJpZGdlL2FuYWxvZ2l4L2FuYWxvZ2l4X2RwX2NvcmUuYwppbmRleCA3NjczNmZiOGVkOTQu
LmFhMWJiODYyOTNmZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9hbmFsb2dp
eC9hbmFsb2dpeF9kcF9jb3JlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9hbmFsb2dp
eC9hbmFsb2dpeF9kcF9jb3JlLmMKQEAgLTEyNjUsMTQgKzEyNjUsNiBAQCBzdGF0aWMgaW50IGFu
YWxvZ2l4X2RwX2JyaWRnZV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKIAkJfQog
CX0KIAotCWlmIChkcC0+cGxhdF9kYXRhLT5wYW5lbCkgewotCQlyZXQgPSBkcm1fcGFuZWxfYXR0
YWNoKGRwLT5wbGF0X2RhdGEtPnBhbmVsLCAmZHAtPmNvbm5lY3Rvcik7Ci0JCWlmIChyZXQpIHsK
LQkJCURSTV9FUlJPUigiRmFpbGVkIHRvIGF0dGFjaCBwYW5lbFxuIik7Ci0JCQlyZXR1cm4gcmV0
OwotCQl9Ci0JfQotCiAJcmV0dXJuIDA7CiB9CiAKQEAgLTE4MDMsNyArMTc5NSw2IEBAIHZvaWQg
YW5hbG9naXhfZHBfdW5iaW5kKHN0cnVjdCBhbmFsb2dpeF9kcF9kZXZpY2UgKmRwKQogCWlmIChk
cC0+cGxhdF9kYXRhLT5wYW5lbCkgewogCQlpZiAoZHJtX3BhbmVsX3VucHJlcGFyZShkcC0+cGxh
dF9kYXRhLT5wYW5lbCkpCiAJCQlEUk1fRVJST1IoImZhaWxlZCB0byB0dXJub2ZmIHRoZSBwYW5l
bFxuIik7Ci0JCWRybV9wYW5lbF9kZXRhY2goZHAtPnBsYXRfZGF0YS0+cGFuZWwpOwogCX0KIAog
CWRybV9kcF9hdXhfdW5yZWdpc3RlcigmZHAtPmF1eCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYnJpZGdlL254cC1wdG4zNDYwLmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL254cC1w
dG4zNDYwLmMKaW5kZXggNDM4ZTU2NmNlMGE0Li5kNDMzOTAyZDk3ZTUgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9icmlkZ2UvbnhwLXB0bjM0NjAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
YnJpZGdlL254cC1wdG4zNDYwLmMKQEAgLTI2NSw5ICsyNjUsNiBAQCBzdGF0aWMgaW50IHB0bjM0
NjBfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCWRybV9jb25uZWN0
b3JfYXR0YWNoX2VuY29kZXIoJnB0bl9icmlkZ2UtPmNvbm5lY3RvciwKIAkJCQkJCQlicmlkZ2Ut
PmVuY29kZXIpOwogCi0JaWYgKHB0bl9icmlkZ2UtPnBhbmVsKQotCQlkcm1fcGFuZWxfYXR0YWNo
KHB0bl9icmlkZ2UtPnBhbmVsLCAmcHRuX2JyaWRnZS0+Y29ubmVjdG9yKTsKLQogCWRybV9oZWxw
ZXJfaHBkX2lycV9ldmVudChwdG5fYnJpZGdlLT5jb25uZWN0b3IuZGV2KTsKIAogCXJldHVybiBy
ZXQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3BhbmVsLmMgYi9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL3BhbmVsLmMKaW5kZXggMWU2M2VkNmIxOGFhLi4wZGRjMzc1NTExOTQg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvcGFuZWwuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL3BhbmVsLmMKQEAgLTgyLDE4ICs4MiwxMSBAQCBzdGF0aWMgaW50IHBh
bmVsX2JyaWRnZV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKIAlkcm1fY29ubmVj
dG9yX2F0dGFjaF9lbmNvZGVyKCZwYW5lbF9icmlkZ2UtPmNvbm5lY3RvciwKIAkJCQkJICBicmlk
Z2UtPmVuY29kZXIpOwogCi0JcmV0ID0gZHJtX3BhbmVsX2F0dGFjaChwYW5lbF9icmlkZ2UtPnBh
bmVsLCAmcGFuZWxfYnJpZGdlLT5jb25uZWN0b3IpOwotCWlmIChyZXQgPCAwKQotCQlyZXR1cm4g
cmV0OwotCiAJcmV0dXJuIDA7CiB9CiAKIHN0YXRpYyB2b2lkIHBhbmVsX2JyaWRnZV9kZXRhY2go
c3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIHsKLQlzdHJ1Y3QgcGFuZWxfYnJpZGdlICpwYW5l
bF9icmlkZ2UgPSBkcm1fYnJpZGdlX3RvX3BhbmVsX2JyaWRnZShicmlkZ2UpOwotCi0JZHJtX3Bh
bmVsX2RldGFjaChwYW5lbF9icmlkZ2UtPnBhbmVsKTsKIH0KIAogc3RhdGljIHZvaWQgcGFuZWxf
YnJpZGdlX3ByZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvcGFyYWRlLXBzODYyMi5jIGIvZHJpdmVycy9ncHUvZHJt
L2JyaWRnZS9wYXJhZGUtcHM4NjIyLmMKaW5kZXggZDc4OWVhMmE3ZmI5Li5jMTNlYzc3ZDg1OGIg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvcGFyYWRlLXBzODYyMi5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvcGFyYWRlLXBzODYyMi5jCkBAIC01MDUsOSArNTA1LDYg
QEAgc3RhdGljIGludCBwczg2MjJfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJ
ZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfZW5jb2RlcigmcHM4NjIyLT5jb25uZWN0b3IsCiAJCQkJCQkJ
YnJpZGdlLT5lbmNvZGVyKTsKIAotCWlmIChwczg2MjItPnBhbmVsKQotCQlkcm1fcGFuZWxfYXR0
YWNoKHBzODYyMi0+cGFuZWwsICZwczg2MjItPmNvbm5lY3Rvcik7Ci0KIAlkcm1faGVscGVyX2hw
ZF9pcnFfZXZlbnQocHM4NjIyLT5jb25uZWN0b3IuZGV2KTsKIAogCXJldHVybiByZXQ7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY0LmMgYi9kcml2ZXJzL2dwdS9k
cm0vYnJpZGdlL3RjMzU4NzY0LmMKaW5kZXggNWFjMTQzMGZhYjA0Li5jMWUzNWJkZjkyMzIgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGMzNTg3NjQuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY0LmMKQEAgLTM3Myw3ICszNzMsNiBAQCBzdGF0aWMgaW50
IHRjMzU4NzY0X2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCWRybV9jb25uZWN0
b3JfaGVscGVyX2FkZCgmY3R4LT5jb25uZWN0b3IsCiAJCQkJICZ0YzM1ODc2NF9jb25uZWN0b3Jf
aGVscGVyX2Z1bmNzKTsKIAlkcm1fY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVyKCZjdHgtPmNvbm5l
Y3RvciwgYnJpZGdlLT5lbmNvZGVyKTsKLQlkcm1fcGFuZWxfYXR0YWNoKGN0eC0+cGFuZWwsICZj
dHgtPmNvbm5lY3Rvcik7CiAJY3R4LT5jb25uZWN0b3IuZnVuY3MtPnJlc2V0KCZjdHgtPmNvbm5l
Y3Rvcik7CiAJZHJtX2Nvbm5lY3Rvcl9yZWdpc3RlcigmY3R4LT5jb25uZWN0b3IpOwogCkBAIC0z
ODUsNyArMzg0LDYgQEAgc3RhdGljIHZvaWQgdGMzNTg3NjRfZGV0YWNoKHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UpCiAJc3RydWN0IHRjMzU4NzY0ICpjdHggPSBicmlkZ2VfdG9fdGMzNTg3NjQo
YnJpZGdlKTsKIAogCWRybV9jb25uZWN0b3JfdW5yZWdpc3RlcigmY3R4LT5jb25uZWN0b3IpOwot
CWRybV9wYW5lbF9kZXRhY2goY3R4LT5wYW5lbCk7CiAJY3R4LT5wYW5lbCA9IE5VTEw7CiAJZHJt
X2Nvbm5lY3Rvcl9wdXQoJmN0eC0+Y29ubmVjdG9yKTsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9icmlkZ2UvdGMzNTg3NjcuYyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGMzNTg3
NjcuYwppbmRleCBjMjc3N2IyMjZjNzUuLjA3NDY0NjJiYTBmNiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2JyaWRnZS90YzM1ODc2Ny5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uv
dGMzNTg3NjcuYwpAQCAtMTQzNSw5ICsxNDM1LDYgQEAgc3RhdGljIGludCB0Y19icmlkZ2VfYXR0
YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJCQkJCSAgICAgICBEUk1fQ09OTkVDVE9S
X1BPTExfRElTQ09OTkVDVDsKIAl9CiAKLQlpZiAodGMtPnBhbmVsKQotCQlkcm1fcGFuZWxfYXR0
YWNoKHRjLT5wYW5lbCwgJnRjLT5jb25uZWN0b3IpOwotCiAJZHJtX2Rpc3BsYXlfaW5mb19zZXRf
YnVzX2Zvcm1hdHMoJnRjLT5jb25uZWN0b3IuZGlzcGxheV9pbmZvLAogCQkJCQkgJmJ1c19mb3Jt
YXQsIDEpOwogCXRjLT5jb25uZWN0b3IuZGlzcGxheV9pbmZvLmJ1c19mbGFncyA9CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RpLXNuNjVkc2k4Ni5jIGIvZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS90aS1zbjY1ZHNpODYuYwppbmRleCA4NmI5ZjBmODdhMTQuLjQ1NDU0NGUwZGE3
ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS90aS1zbjY1ZHNpODYuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RpLXNuNjVkc2k4Ni5jCkBAIC0zOTQsOSArMzk0LDYg
QEAgc3RhdGljIGludCB0aV9zbl9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlk
Z2UsCiAJfQogCXBkYXRhLT5kc2kgPSBkc2k7CiAKLQkvKiBhdHRhY2ggcGFuZWwgdG8gYnJpZGdl
ICovCi0JZHJtX3BhbmVsX2F0dGFjaChwZGF0YS0+cGFuZWwsICZwZGF0YS0+Y29ubmVjdG9yKTsK
LQogCXJldHVybiAwOwogCiBlcnJfZHNpX2F0dGFjaDoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9kcm1fcGFuZWwuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fcGFuZWwuYwppbmRleCA4Yzdi
YWM4NWE3OTMuLjc4MDRiOTk0N2ZlOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9w
YW5lbC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fcGFuZWwuYwpAQCAtOTcsNDIgKzk3LDYg
QEAgdm9pZCBkcm1fcGFuZWxfcmVtb3ZlKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQogfQogRVhQ
T1JUX1NZTUJPTChkcm1fcGFuZWxfcmVtb3ZlKTsKIAotLyoqCi0gKiBkcm1fcGFuZWxfYXR0YWNo
IC0gYXR0YWNoIGEgcGFuZWwgdG8gYSBjb25uZWN0b3IKLSAqIEBwYW5lbDogRFJNIHBhbmVsCi0g
KiBAY29ubmVjdG9yOiBEUk0gY29ubmVjdG9yCi0gKgotICogQWZ0ZXIgb2J0YWluaW5nIGEgcG9p
bnRlciB0byBhIERSTSBwYW5lbCBhIGRpc3BsYXkgZHJpdmVyIGNhbGxzIHRoaXMKLSAqIGZ1bmN0
aW9uIHRvIGF0dGFjaCBhIHBhbmVsIHRvIGEgY29ubmVjdG9yLgotICoKLSAqIEFuIGVycm9yIGlz
IHJldHVybmVkIGlmIHRoZSBwYW5lbCBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIGFub3RoZXIgY29u
bmVjdG9yLgotICoKLSAqIFdoZW4gdW5sb2FkaW5nLCB0aGUgZHJpdmVyIHNob3VsZCBkZXRhY2gg
ZnJvbSB0aGUgcGFuZWwgYnkgY2FsbGluZwotICogZHJtX3BhbmVsX2RldGFjaCgpLgotICoKLSAq
IFJldHVybjogMCBvbiBzdWNjZXNzIG9yIGEgbmVnYXRpdmUgZXJyb3IgY29kZSBvbiBmYWlsdXJl
LgotICovCi1pbnQgZHJtX3BhbmVsX2F0dGFjaChzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCwgc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKLXsKLQlyZXR1cm4gMDsKLX0KLUVYUE9SVF9T
WU1CT0woZHJtX3BhbmVsX2F0dGFjaCk7Ci0KLS8qKgotICogZHJtX3BhbmVsX2RldGFjaCAtIGRl
dGFjaCBhIHBhbmVsIGZyb20gYSBjb25uZWN0b3IKLSAqIEBwYW5lbDogRFJNIHBhbmVsCi0gKgot
ICogRGV0YWNoZXMgYSBwYW5lbCBmcm9tIHRoZSBjb25uZWN0b3IgaXQgaXMgYXR0YWNoZWQgdG8u
IElmIGEgcGFuZWwgaXMgbm90Ci0gKiBhdHRhY2hlZCB0byBhbnkgY29ubmVjdG9yIHRoaXMgaXMg
ZWZmZWN0aXZlbHkgYSBuby1vcC4KLSAqCi0gKiBUaGlzIGZ1bmN0aW9uIHNob3VsZCBub3QgYmUg
Y2FsbGVkIGJ5IHRoZSBwYW5lbCBkZXZpY2UgaXRzZWxmLiBJdAotICogaXMgb25seSBmb3IgdGhl
IGRybSBkZXZpY2UgdGhhdCBjYWxsZWQgZHJtX3BhbmVsX2F0dGFjaCgpLgotICovCi12b2lkIGRy
bV9wYW5lbF9kZXRhY2goc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCi17Ci19Ci1FWFBPUlRfU1lN
Qk9MKGRybV9wYW5lbF9kZXRhY2gpOwotCiAvKioKICAqIGRybV9wYW5lbF9wcmVwYXJlIC0gcG93
ZXIgb24gYSBwYW5lbAogICogQHBhbmVsOiBEUk0gcGFuZWwKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kcGkuYyBiL2RyaXZlcnMvZ3B1L2RybS9leHlub3Mv
ZXh5bm9zX2RybV9kcGkuYwppbmRleCA3YmE1MzU0ZTdkOTQuLjc0MTMyM2EyZTZjMyAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2V4eW5vcy9leHlub3NfZHJtX2RwaS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kcGkuYwpAQCAtNDIsMTEgKzQyLDYgQEAgc3Rh
dGljIGlubGluZSBzdHJ1Y3QgZXh5bm9zX2RwaSAqZW5jb2Rlcl90b19kcGkoc3RydWN0IGRybV9l
bmNvZGVyICplKQogc3RhdGljIGVudW0gZHJtX2Nvbm5lY3Rvcl9zdGF0dXMKIGV4eW5vc19kcGlf
ZGV0ZWN0KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsIGJvb2wgZm9yY2UpCiB7Ci0J
c3RydWN0IGV4eW5vc19kcGkgKmN0eCA9IGNvbm5lY3Rvcl90b19kcGkoY29ubmVjdG9yKTsKLQot
CWlmIChjdHgtPnBhbmVsKQotCQlkcm1fcGFuZWxfYXR0YWNoKGN0eC0+cGFuZWwsICZjdHgtPmNv
bm5lY3Rvcik7Ci0KIAlyZXR1cm4gY29ubmVjdG9yX3N0YXR1c19jb25uZWN0ZWQ7CiB9CiAKQEAg
LTI0OSw4ICsyNDQsNSBAQCBpbnQgZXh5bm9zX2RwaV9yZW1vdmUoc3RydWN0IGRybV9lbmNvZGVy
ICplbmNvZGVyKQogCiAJZXh5bm9zX2RwaV9kaXNhYmxlKCZjdHgtPmVuY29kZXIpOwogCi0JaWYg
KGN0eC0+cGFuZWwpCi0JCWRybV9wYW5lbF9kZXRhY2goY3R4LT5wYW5lbCk7Ci0KIAlyZXR1cm4g
MDsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kc2ku
YyBiL2RyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kc2kuYwppbmRleCA3YTZmNmRm
NWU5NTQuLjg0M2RmY2VmYzQ2YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2V4eW5vcy9l
eHlub3NfZHJtX2RzaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9k
c2kuYwpAQCAtMTU1MSwxMiArMTU1MSwxMCBAQCBzdGF0aWMgaW50IGV4eW5vc19kc2lfaG9zdF9h
dHRhY2goc3RydWN0IG1pcGlfZHNpX2hvc3QgKmhvc3QsCiAJCX0KIAogCQlkc2ktPnBhbmVsID0g
b2ZfZHJtX2ZpbmRfcGFuZWwoZGV2aWNlLT5kZXYub2Zfbm9kZSk7Ci0JCWlmIChJU19FUlIoZHNp
LT5wYW5lbCkpIHsKKwkJaWYgKElTX0VSUihkc2ktPnBhbmVsKSkKIAkJCWRzaS0+cGFuZWwgPSBO
VUxMOwotCQl9IGVsc2UgewotCQkJZHJtX3BhbmVsX2F0dGFjaChkc2ktPnBhbmVsLCAmZHNpLT5j
b25uZWN0b3IpOworCQllbHNlCiAJCQlkc2ktPmNvbm5lY3Rvci5zdGF0dXMgPSBjb25uZWN0b3Jf
c3RhdHVzX2Nvbm5lY3RlZDsKLQkJfQogCX0KIAogCS8qCkBAIC0xNTk2LDcgKzE1OTQsNiBAQCBz
dGF0aWMgaW50IGV4eW5vc19kc2lfaG9zdF9kZXRhY2goc3RydWN0IG1pcGlfZHNpX2hvc3QgKmhv
c3QsCiAJaWYgKGRzaS0+cGFuZWwpIHsKIAkJbXV0ZXhfbG9jaygmZHJtLT5tb2RlX2NvbmZpZy5t
dXRleCk7CiAJCWV4eW5vc19kc2lfZGlzYWJsZSgmZHNpLT5lbmNvZGVyKTsKLQkJZHJtX3BhbmVs
X2RldGFjaChkc2ktPnBhbmVsKTsKIAkJZHNpLT5wYW5lbCA9IE5VTEw7CiAJCWRzaS0+Y29ubmVj
dG9yLnN0YXR1cyA9IGNvbm5lY3Rvcl9zdGF0dXNfZGlzY29ubmVjdGVkOwogCQltdXRleF91bmxv
Y2soJmRybS0+bW9kZV9jb25maWcubXV0ZXgpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2ZzbC1kY3UvZnNsX2RjdV9kcm1fcmdiLmMgYi9kcml2ZXJzL2dwdS9kcm0vZnNsLWRjdS9mc2xf
ZGN1X2RybV9yZ2IuYwppbmRleCA5YjBjNDczNmMyMWEuLjBhNzA3MTgyNzUzMyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2ZzbC1kY3UvZnNsX2RjdV9kcm1fcmdiLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2ZzbC1kY3UvZnNsX2RjdV9kcm1fcmdiLmMKQEAgLTQzLDcgKzQzLDYgQEAgc3Rh
dGljIHZvaWQgZnNsX2RjdV9kcm1fY29ubmVjdG9yX2Rlc3Ryb3koc3RydWN0IGRybV9jb25uZWN0
b3IgKmNvbm5lY3RvcikKIAlzdHJ1Y3QgZnNsX2RjdV9kcm1fY29ubmVjdG9yICpmc2xfY29uID0g
dG9fZnNsX2RjdV9jb25uZWN0b3IoY29ubmVjdG9yKTsKIAogCWRybV9jb25uZWN0b3JfdW5yZWdp
c3Rlcihjb25uZWN0b3IpOwotCWRybV9wYW5lbF9kZXRhY2goZnNsX2Nvbi0+cGFuZWwpOwogCWRy
bV9jb25uZWN0b3JfY2xlYW51cChjb25uZWN0b3IpOwogfQogCkBAIC0xMDEsMTIgKzEwMCw2IEBA
IHN0YXRpYyBpbnQgZnNsX2RjdV9hdHRhY2hfcGFuZWwoc3RydWN0IGZzbF9kY3VfZHJtX2Rldmlj
ZSAqZnNsX2RldiwKIAlpZiAocmV0IDwgMCkKIAkJZ290byBlcnJfc3lzZnM7CiAKLQlyZXQgPSBk
cm1fcGFuZWxfYXR0YWNoKHBhbmVsLCBjb25uZWN0b3IpOwotCWlmIChyZXQpIHsKLQkJZGV2X2Vy
cihmc2xfZGV2LT5kZXYsICJmYWlsZWQgdG8gYXR0YWNoIHBhbmVsXG4iKTsKLQkJZ290byBlcnJf
c3lzZnM7Ci0JfQotCiAJcmV0dXJuIDA7CiAKIGVycl9zeXNmczoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pbXgvaW14LWxkYi5jIGIvZHJpdmVycy9ncHUvZHJtL2lteC9pbXgtbGRiLmMK
aW5kZXggODc5MWQ2MGJlOTJlLi5hZjc1N2QxZTIxZmUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pbXgvaW14LWxkYi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pbXgvaW14LWxkYi5jCkBA
IC00NTUsMTMgKzQ1NSw2IEBAIHN0YXRpYyBpbnQgaW14X2xkYl9yZWdpc3RlcihzdHJ1Y3QgZHJt
X2RldmljZSAqZHJtLAogCQlkcm1fY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVyKCZpbXhfbGRiX2No
LT5jb25uZWN0b3IsIGVuY29kZXIpOwogCX0KIAotCWlmIChpbXhfbGRiX2NoLT5wYW5lbCkgewot
CQlyZXQgPSBkcm1fcGFuZWxfYXR0YWNoKGlteF9sZGJfY2gtPnBhbmVsLAotCQkJCSAgICAgICAm
aW14X2xkYl9jaC0+Y29ubmVjdG9yKTsKLQkJaWYgKHJldCkKLQkJCXJldHVybiByZXQ7Ci0JfQot
CiAJcmV0dXJuIDA7CiB9CiAKQEAgLTcwMiw5ICs2OTUsNiBAQCBzdGF0aWMgdm9pZCBpbXhfbGRi
X3VuYmluZChzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBkZXZpY2UgKm1hc3RlciwKIAlmb3Ig
KGkgPSAwOyBpIDwgMjsgaSsrKSB7CiAJCXN0cnVjdCBpbXhfbGRiX2NoYW5uZWwgKmNoYW5uZWwg
PSAmaW14X2xkYi0+Y2hhbm5lbFtpXTsKIAotCQlpZiAoY2hhbm5lbC0+cGFuZWwpCi0JCQlkcm1f
cGFuZWxfZGV0YWNoKGNoYW5uZWwtPnBhbmVsKTsKLQogCQlrZnJlZShjaGFubmVsLT5lZGlkKTsK
IAkJaTJjX3B1dF9hZGFwdGVyKGNoYW5uZWwtPmRkYyk7CiAJfQpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2lteC9wYXJhbGxlbC1kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaW14L3Bh
cmFsbGVsLWRpc3BsYXkuYwppbmRleCBhODMxYjViZDE2MTMuLjgyMzJmNTEyYjllZCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2lteC9wYXJhbGxlbC1kaXNwbGF5LmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2lteC9wYXJhbGxlbC1kaXNwbGF5LmMKQEAgLTI4OSw5ICsyODksNiBAQCBzdGF0
aWMgaW50IGlteF9wZF9yZWdpc3RlcihzdHJ1Y3QgZHJtX2RldmljZSAqZHJtLAogCQkJCSAgIERS
TV9NT0RFX0NPTk5FQ1RPUl9EUEkpOwogCX0KIAotCWlmIChpbXhwZC0+cGFuZWwpCi0JCWRybV9w
YW5lbF9hdHRhY2goaW14cGQtPnBhbmVsLCAmaW14cGQtPmNvbm5lY3Rvcik7Ci0KIAlpZiAoaW14
cGQtPm5leHRfYnJpZGdlKSB7CiAJCXJldCA9IGRybV9icmlkZ2VfYXR0YWNoKGVuY29kZXIsIGlt
eHBkLT5uZXh0X2JyaWRnZSwKIAkJCQkJJmlteHBkLT5icmlkZ2UsIDApOwpAQCAtMzU3LDkgKzM1
NCw2IEBAIHN0YXRpYyB2b2lkIGlteF9wZF91bmJpbmQoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1
Y3QgZGV2aWNlICptYXN0ZXIsCiB7CiAJc3RydWN0IGlteF9wYXJhbGxlbF9kaXNwbGF5ICppbXhw
ZCA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwogCi0JaWYgKGlteHBkLT5wYW5lbCkKLQkJZHJtX3Bh
bmVsX2RldGFjaChpbXhwZC0+cGFuZWwpOwotCiAJa2ZyZWUoaW14cGQtPmVkaWQpOwogfQogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvbWRwNC9tZHA0X2x2ZHNfY29ubmVj
dG9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvbWRwNC9tZHA0X2x2ZHNfY29ubmVjdG9y
LmMKaW5kZXggYzdkZjcxZTJmYWZjLi43Mjg4MDQxZGQ4NmEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9tc20vZGlzcC9tZHA0L21kcDRfbHZkc19jb25uZWN0b3IuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vbXNtL2Rpc3AvbWRwNC9tZHA0X2x2ZHNfY29ubmVjdG9yLmMKQEAgLTUwLDE0ICs1
MCw5IEBAIHN0YXRpYyBpbnQgbWRwNF9sdmRzX2Nvbm5lY3Rvcl9nZXRfbW9kZXMoc3RydWN0IGRy
bV9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAlzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCA9IG1kcDRf
bHZkc19jb25uZWN0b3ItPnBhbmVsOwogCWludCByZXQgPSAwOwogCi0JaWYgKHBhbmVsKSB7Ci0J
CWRybV9wYW5lbF9hdHRhY2gocGFuZWwsIGNvbm5lY3Rvcik7Ci0KKwlpZiAocGFuZWwpCiAJCXJl
dCA9IGRybV9wYW5lbF9nZXRfbW9kZXMocGFuZWwsIGNvbm5lY3Rvcik7CiAKLQkJZHJtX3BhbmVs
X2RldGFjaChwYW5lbCk7Ci0JfQotCiAJcmV0dXJuIHJldDsKIH0KIApkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL21zbS9kc2kvZHNpX21hbmFnZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20v
ZHNpL2RzaV9tYW5hZ2VyLmMKaW5kZXggNGIzNjNiZDdkZGZmLi4xZDI4ZGZiYTJjOWIgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZHNpL2RzaV9tYW5hZ2VyLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL21zbS9kc2kvZHNpX21hbmFnZXIuYwpAQCAtMzI4LDcgKzMyOCw2IEBAIHN0YXRp
YyBpbnQgZHNpX21ncl9jb25uZWN0b3JfZ2V0X21vZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpj
b25uZWN0b3IpCiAJICogSW4gZHVhbCBEU0kgbW9kZSwgd2UgaGF2ZSBvbmUgY29ubmVjdG9yIHRo
YXQgY2FuIGJlCiAJICogYXR0YWNoZWQgdG8gdGhlIGRybV9wYW5lbC4KIAkgKi8KLQlkcm1fcGFu
ZWxfYXR0YWNoKHBhbmVsLCBjb25uZWN0b3IpOwogCW51bSA9IGRybV9wYW5lbF9nZXRfbW9kZXMo
cGFuZWwsIGNvbm5lY3Rvcik7CiAJaWYgKCFudW0pCiAJCXJldHVybiAwOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL214c2ZiL214c2ZiX2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL214c2Zi
L214c2ZiX2Rydi5jCmluZGV4IDUwODc2NGZjY2QyNy4uNTFkYTBlM2RlNTg3IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vbXhzZmIvbXhzZmJfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L214c2ZiL214c2ZiX2Rydi5jCkBAIC0yNjUsMTEgKzI2NSw3IEBAIHN0YXRpYyBpbnQgbXhzZmJf
bG9hZChzdHJ1Y3QgZHJtX2RldmljZSAqZHJtKQogCSAqLwogCiAJaWYgKG14c2ZiLT5wYW5lbCkg
ewotCQlyZXQgPSBkcm1fcGFuZWxfYXR0YWNoKG14c2ZiLT5wYW5lbCwgbXhzZmItPmNvbm5lY3Rv
cik7Ci0JCWlmIChyZXQpIHsKLQkJCWRldl9lcnIoZHJtLT5kZXYsICJDYW5ub3QgY29ubmVjdCBw
YW5lbDogJWRcbiIsIHJldCk7Ci0JCQlnb3RvIGVycl92Ymxhbms7Ci0JCX0KKwkJOwogCX0gZWxz
ZSBpZiAobXhzZmItPmJyaWRnZSkgewogCQlyZXQgPSBkcm1fc2ltcGxlX2Rpc3BsYXlfcGlwZV9h
dHRhY2hfYnJpZGdlKCZteHNmYi0+cGlwZSwKIAkJCQkJCQkgICAgbXhzZmItPmJyaWRnZSk7CkBA
IC0zMDYsNyArMzAyLDYgQEAgc3RhdGljIGludCBteHNmYl9sb2FkKHN0cnVjdCBkcm1fZGV2aWNl
ICpkcm0pCiAJcmV0dXJuIDA7CiAKIGVycl9pcnE6Ci0JZHJtX3BhbmVsX2RldGFjaChteHNmYi0+
cGFuZWwpOwogZXJyX3ZibGFuazoKIAlwbV9ydW50aW1lX2Rpc2FibGUoZHJtLT5kZXYpOwogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXhzZmIvbXhzZmJfb3V0LmMgYi9kcml2ZXJzL2dw
dS9kcm0vbXhzZmIvbXhzZmJfb3V0LmMKaW5kZXggOWVjYTE2MDVkMTFkLi5mOTNlN2E0ZDRjMTUg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9teHNmYi9teHNmYl9vdXQuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vbXhzZmIvbXhzZmJfb3V0LmMKQEAgLTU1LDEyICs1NSw2IEBAIG14c2ZiX3Bh
bmVsX2Nvbm5lY3Rvcl9kZXRlY3Qoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwgYm9v
bCBmb3JjZSkKIAogc3RhdGljIHZvaWQgbXhzZmJfcGFuZWxfY29ubmVjdG9yX2Rlc3Ryb3koc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKIHsKLQlzdHJ1Y3QgbXhzZmJfZHJtX3ByaXZh
dGUgKm14c2ZiID0KLQkJCWRybV9jb25uZWN0b3JfdG9fbXhzZmJfZHJtX3ByaXZhdGUoY29ubmVj
dG9yKTsKLQotCWlmIChteHNmYi0+cGFuZWwpCi0JCWRybV9wYW5lbF9kZXRhY2gobXhzZmItPnBh
bmVsKTsKLQogCWRybV9jb25uZWN0b3JfdW5yZWdpc3Rlcihjb25uZWN0b3IpOwogCWRybV9jb25u
ZWN0b3JfY2xlYW51cChjb25uZWN0b3IpOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L29tYXBkcm0vb21hcF9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBfZHJ2LmMK
aW5kZXggNDUyNjk2Nzk3OGI3Li41M2Q1ZTE4NGVlNzcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9vbWFwZHJtL29tYXBfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21h
cF9kcnYuYwpAQCAtMzQ5LDEzICszNDksNiBAQCBzdGF0aWMgaW50IG9tYXBfbW9kZXNldF9pbml0
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiAKIAkJZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfZW5jb2Rl
cihwaXBlLT5jb25uZWN0b3IsIGVuY29kZXIpOwogCi0JCWlmIChwaXBlLT5vdXRwdXQtPnBhbmVs
KSB7Ci0JCQlyZXQgPSBkcm1fcGFuZWxfYXR0YWNoKHBpcGUtPm91dHB1dC0+cGFuZWwsCi0JCQkJ
CSAgICAgICBwaXBlLT5jb25uZWN0b3IpOwotCQkJaWYgKHJldCA8IDApCi0JCQkJcmV0dXJuIHJl
dDsKLQkJfQotCiAJCWNydGMgPSBvbWFwX2NydGNfaW5pdChkZXYsIHBpcGUsIHByaXYtPnBsYW5l
c1tpXSk7CiAJCWlmIChJU19FUlIoY3J0YykpCiAJCQlyZXR1cm4gUFRSX0VSUihjcnRjKTsKQEAg
LTM5NCwxOCArMzg3LDggQEAgc3RhdGljIGludCBvbWFwX21vZGVzZXRfaW5pdChzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2KQogCiBzdGF0aWMgdm9pZCBvbWFwX21vZGVzZXRfZmluaShzdHJ1Y3QgZHJt
X2RldmljZSAqZGRldikKIHsKLQlzdHJ1Y3Qgb21hcF9kcm1fcHJpdmF0ZSAqcHJpdiA9IGRkZXYt
PmRldl9wcml2YXRlOwotCXVuc2lnbmVkIGludCBpOwotCiAJb21hcF9kcm1faXJxX3VuaW5zdGFs
bChkZGV2KTsKIAotCWZvciAoaSA9IDA7IGkgPCBwcml2LT5udW1fcGlwZXM7IGkrKykgewotCQlz
dHJ1Y3Qgb21hcF9kcm1fcGlwZWxpbmUgKnBpcGUgPSAmcHJpdi0+cGlwZXNbaV07Ci0KLQkJaWYg
KHBpcGUtPm91dHB1dC0+cGFuZWwpCi0JCQlkcm1fcGFuZWxfZGV0YWNoKHBpcGUtPm91dHB1dC0+
cGFuZWwpOwotCX0KLQogCWRybV9tb2RlX2NvbmZpZ19jbGVhbnVwKGRkZXYpOwogfQogCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2x2ZHMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9yY2FyLWR1L3JjYXJfbHZkcy5jCmluZGV4IGFiMGQ0OTYxOGNmOS4uYmNlZDcyOWE5NmZl
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2x2ZHMuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2x2ZHMuYwpAQCAtNjc3LDE1ICs2NzcsMTEgQEAg
c3RhdGljIGludCByY2FyX2x2ZHNfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJ
aWYgKHJldCA8IDApCiAJCXJldHVybiByZXQ7CiAKLQlyZXR1cm4gZHJtX3BhbmVsX2F0dGFjaChs
dmRzLT5wYW5lbCwgY29ubmVjdG9yKTsKKwlyZXR1cm4gMDsKIH0KIAogc3RhdGljIHZvaWQgcmNh
cl9sdmRzX2RldGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogewotCXN0cnVjdCByY2Fy
X2x2ZHMgKmx2ZHMgPSBicmlkZ2VfdG9fcmNhcl9sdmRzKGJyaWRnZSk7Ci0KLQlpZiAobHZkcy0+
cGFuZWwpCi0JCWRybV9wYW5lbF9kZXRhY2gobHZkcy0+cGFuZWwpOwogfQogCiBzdGF0aWMgY29u
c3Qgc3RydWN0IGRybV9icmlkZ2VfZnVuY3MgcmNhcl9sdmRzX2JyaWRnZV9vcHMgPSB7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvcm9ja2NoaXBfbHZkcy5jIGIvZHJpdmVy
cy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX2x2ZHMuYwppbmRleCA2M2Y5Njc5MDJjMmQuLmYy
OTJjNmE2ZTIwZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlw
X2x2ZHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvcm9ja2NoaXBfbHZkcy5jCkBA
IC02MzQsMTMgKzYzNCw2IEBAIHN0YXRpYyBpbnQgcm9ja2NoaXBfbHZkc19iaW5kKHN0cnVjdCBk
ZXZpY2UgKmRldiwgc3RydWN0IGRldmljZSAqbWFzdGVyLAogCQkJCSAgICAgICJmYWlsZWQgdG8g
YXR0YWNoIGVuY29kZXI6ICVkXG4iLCByZXQpOwogCQkJZ290byBlcnJfZnJlZV9jb25uZWN0b3I7
CiAJCX0KLQotCQlyZXQgPSBkcm1fcGFuZWxfYXR0YWNoKGx2ZHMtPnBhbmVsLCBjb25uZWN0b3Ip
OwotCQlpZiAocmV0IDwgMCkgewotCQkJRFJNX0RFVl9FUlJPUihkcm1fZGV2LT5kZXYsCi0JCQkJ
ICAgICAgImZhaWxlZCB0byBhdHRhY2ggcGFuZWw6ICVkXG4iLCByZXQpOwotCQkJZ290byBlcnJf
ZnJlZV9jb25uZWN0b3I7Ci0JCX0KIAl9IGVsc2UgewogCQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFj
aChlbmNvZGVyLCBsdmRzLT5icmlkZ2UsIE5VTEwsIDApOwogCQlpZiAocmV0KSB7CkBAIC02NzYs
OCArNjY5LDYgQEAgc3RhdGljIHZvaWQgcm9ja2NoaXBfbHZkc191bmJpbmQoc3RydWN0IGRldmlj
ZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlICptYXN0ZXIsCiAKIAllbmNvZGVyX2Z1bmNzID0gbHZkcy0+
c29jX2RhdGEtPmhlbHBlcl9mdW5jczsKIAllbmNvZGVyX2Z1bmNzLT5kaXNhYmxlKCZsdmRzLT5l
bmNvZGVyKTsKLQlpZiAobHZkcy0+cGFuZWwpCi0JCWRybV9wYW5lbF9kZXRhY2gobHZkcy0+cGFu
ZWwpOwogCXBtX3J1bnRpbWVfZGlzYWJsZShkZXYpOwogCWRybV9jb25uZWN0b3JfY2xlYW51cCgm
bHZkcy0+Y29ubmVjdG9yKTsKIAlkcm1fZW5jb2Rlcl9jbGVhbnVwKCZsdmRzLT5lbmNvZGVyKTsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9zdGkvc3RpX2R2by5jIGIvZHJpdmVycy9ncHUv
ZHJtL3N0aS9zdGlfZHZvLmMKaW5kZXggZGU0YWY3NzM1YzQ2Li5kZGI0MTg0ZjA3MjYgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9zdGkvc3RpX2R2by5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9zdGkvc3RpX2R2by5jCkBAIC0zODksOCArMzg5LDYgQEAgc3RpX2R2b19jb25uZWN0b3JfZGV0
ZWN0KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsIGJvb2wgZm9yY2UpCiAJCWR2by0+
cGFuZWwgPSBvZl9kcm1fZmluZF9wYW5lbChkdm8tPnBhbmVsX25vZGUpOwogCQlpZiAoSVNfRVJS
KGR2by0+cGFuZWwpKQogCQkJZHZvLT5wYW5lbCA9IE5VTEw7Ci0JCWVsc2UKLQkJCWRybV9wYW5l
bF9hdHRhY2goZHZvLT5wYW5lbCwgY29ubmVjdG9yKTsKIAl9CiAKIAlpZiAoZHZvLT5wYW5lbCkK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9zdW40aS9zdW40aV9sdmRzLmMgYi9kcml2ZXJz
L2dwdS9kcm0vc3VuNGkvc3VuNGlfbHZkcy5jCmluZGV4IGZmZGEzMTg0YWExMi4uZDA2ZGQzMTNk
M2MwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vc3VuNGkvc3VuNGlfbHZkcy5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9zdW40aS9zdW40aV9sdmRzLmMKQEAgLTU0LDkgKzU0LDYgQEAgc3Rh
dGljIHN0cnVjdCBkcm1fY29ubmVjdG9yX2hlbHBlcl9mdW5jcyBzdW40aV9sdmRzX2Nvbl9oZWxw
ZXJfZnVuY3MgPSB7CiBzdGF0aWMgdm9pZAogc3VuNGlfbHZkc19jb25uZWN0b3JfZGVzdHJveShz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogewotCXN0cnVjdCBzdW40aV9sdmRzICps
dmRzID0gZHJtX2Nvbm5lY3Rvcl90b19zdW40aV9sdmRzKGNvbm5lY3Rvcik7Ci0KLQlkcm1fcGFu
ZWxfZGV0YWNoKGx2ZHMtPnBhbmVsKTsKIAlkcm1fY29ubmVjdG9yX2NsZWFudXAoY29ubmVjdG9y
KTsKIH0KIApAQCAtMTQxLDEyICsxMzgsNiBAQCBpbnQgc3VuNGlfbHZkc19pbml0KHN0cnVjdCBk
cm1fZGV2aWNlICpkcm0sIHN0cnVjdCBzdW40aV90Y29uICp0Y29uKQogCiAJCWRybV9jb25uZWN0
b3JfYXR0YWNoX2VuY29kZXIoJmx2ZHMtPmNvbm5lY3RvciwKIAkJCQkJCSAgJmx2ZHMtPmVuY29k
ZXIpOwotCi0JCXJldCA9IGRybV9wYW5lbF9hdHRhY2gobHZkcy0+cGFuZWwsICZsdmRzLT5jb25u
ZWN0b3IpOwotCQlpZiAocmV0KSB7Ci0JCQlkZXZfZXJyKGRybS0+ZGV2LCAiQ291bGRuJ3QgYXR0
YWNoIG91ciBwYW5lbFxuIik7Ci0JCQlnb3RvIGVycl9jbGVhbnVwX2Nvbm5lY3RvcjsKLQkJfQog
CX0KIAogCWlmIChicmlkZ2UpIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9zdW40aS9z
dW40aV9yZ2IuYyBiL2RyaXZlcnMvZ3B1L2RybS9zdW40aS9zdW40aV9yZ2IuYwppbmRleCA1YTdk
NDM5MzlhZTYuLmUwOGFmZGZmZWY1MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3N1bjRp
L3N1bjRpX3JnYi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9zdW40aS9zdW40aV9yZ2IuYwpAQCAt
MTQ3LDcgKzE0Nyw2IEBAIHN1bjRpX3JnYl9jb25uZWN0b3JfZGVzdHJveShzdHJ1Y3QgZHJtX2Nv
bm5lY3RvciAqY29ubmVjdG9yKQogewogCXN0cnVjdCBzdW40aV9yZ2IgKnJnYiA9IGRybV9jb25u
ZWN0b3JfdG9fc3VuNGlfcmdiKGNvbm5lY3Rvcik7CiAKLQlkcm1fcGFuZWxfZGV0YWNoKHJnYi0+
cGFuZWwpOwogCWRybV9jb25uZWN0b3JfY2xlYW51cChjb25uZWN0b3IpOwogfQogCkBAIC0yMzMs
MTIgKzIzMiw2IEBAIGludCBzdW40aV9yZ2JfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZHJtLCBz
dHJ1Y3Qgc3VuNGlfdGNvbiAqdGNvbikKIAogCQlkcm1fY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVy
KCZyZ2ItPmNvbm5lY3RvciwKIAkJCQkJCSAgJnJnYi0+ZW5jb2Rlcik7Ci0KLQkJcmV0ID0gZHJt
X3BhbmVsX2F0dGFjaChyZ2ItPnBhbmVsLCAmcmdiLT5jb25uZWN0b3IpOwotCQlpZiAocmV0KSB7
Ci0JCQlkZXZfZXJyKGRybS0+ZGV2LCAiQ291bGRuJ3QgYXR0YWNoIG91ciBwYW5lbFxuIik7Ci0J
CQlnb3RvIGVycl9jbGVhbnVwX2Nvbm5lY3RvcjsKLQkJfQogCX0KIAogCWlmIChyZ2ItPmJyaWRn
ZSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3N1bjRpL3N1bjZpX21pcGlfZHNpLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vc3VuNGkvc3VuNmlfbWlwaV9kc2kuYwppbmRleCBhYTY3Y2IwMzdl
OWQuLjEyODQ3MWI2NWY2NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3N1bjRpL3N1bjZp
X21pcGlfZHNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3N1bjRpL3N1bjZpX21pcGlfZHNpLmMK
QEAgLTk3Myw3ICs5NzMsNiBAQCBzdGF0aWMgaW50IHN1bjZpX2RzaV9hdHRhY2goc3RydWN0IG1p
cGlfZHNpX2hvc3QgKmhvc3QsCiAJZHNpLT5wYW5lbCA9IHBhbmVsOwogCWRzaS0+ZGV2aWNlID0g
ZGV2aWNlOwogCi0JZHJtX3BhbmVsX2F0dGFjaChkc2ktPnBhbmVsLCAmZHNpLT5jb25uZWN0b3Ip
OwogCWRybV9rbXNfaGVscGVyX2hvdHBsdWdfZXZlbnQoZHNpLT5kcm0pOwogCiAJZGV2X2luZm8o
aG9zdC0+ZGV2LCAiQXR0YWNoZWQgZGV2aWNlICVzXG4iLCBkZXZpY2UtPm5hbWUpOwpAQCAtOTkw
LDcgKzk4OSw2IEBAIHN0YXRpYyBpbnQgc3VuNmlfZHNpX2RldGFjaChzdHJ1Y3QgbWlwaV9kc2lf
aG9zdCAqaG9zdCwKIAlkc2ktPnBhbmVsID0gTlVMTDsKIAlkc2ktPmRldmljZSA9IE5VTEw7CiAK
LQlkcm1fcGFuZWxfZGV0YWNoKHBhbmVsKTsKIAlkcm1fa21zX2hlbHBlcl9ob3RwbHVnX2V2ZW50
KGRzaS0+ZHJtKTsKIAogCXJldHVybiAwOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Rl
Z3JhL2RzaS5jIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2RzaS5jCmluZGV4IDM4MjBlOGRmZjE0
Yi4uMzM4N2RlNzk3MThiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGVncmEvZHNpLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2RzaS5jCkBAIC0xNDk4LDEwICsxNDk4LDggQEAg
c3RhdGljIGludCB0ZWdyYV9kc2lfaG9zdF9hdHRhY2goc3RydWN0IG1pcGlfZHNpX2hvc3QgKmhv
c3QsCiAJCWlmIChJU19FUlIob3V0cHV0LT5wYW5lbCkpCiAJCQlvdXRwdXQtPnBhbmVsID0gTlVM
TDsKIAotCQlpZiAob3V0cHV0LT5wYW5lbCAmJiBvdXRwdXQtPmNvbm5lY3Rvci5kZXYpIHsKLQkJ
CWRybV9wYW5lbF9hdHRhY2gob3V0cHV0LT5wYW5lbCwgJm91dHB1dC0+Y29ubmVjdG9yKTsKKwkJ
aWYgKG91dHB1dC0+cGFuZWwgJiYgb3V0cHV0LT5jb25uZWN0b3IuZGV2KQogCQkJZHJtX2hlbHBl
cl9ocGRfaXJxX2V2ZW50KG91dHB1dC0+Y29ubmVjdG9yLmRldik7Ci0JCX0KIAl9CiAKIAlyZXR1
cm4gMDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9vdXRwdXQuYyBiL2RyaXZl
cnMvZ3B1L2RybS90ZWdyYS9vdXRwdXQuYwppbmRleCBlMzZlNWU3YzJmNjkuLmEzYWRiOWU0ZGVi
ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL291dHB1dC5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS90ZWdyYS9vdXRwdXQuYwpAQCAtMTc5LDEzICsxNzksNiBAQCB2b2lkIHRlZ3Jh
X291dHB1dF9yZW1vdmUoc3RydWN0IHRlZ3JhX291dHB1dCAqb3V0cHV0KQogaW50IHRlZ3JhX291
dHB1dF9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkcm0sIHN0cnVjdCB0ZWdyYV9vdXRwdXQgKm91
dHB1dCkKIHsKIAlpbnQgY29ubmVjdG9yX3R5cGU7Ci0JaW50IGVycjsKLQotCWlmIChvdXRwdXQt
PnBhbmVsKSB7Ci0JCWVyciA9IGRybV9wYW5lbF9hdHRhY2gob3V0cHV0LT5wYW5lbCwgJm91dHB1
dC0+Y29ubmVjdG9yKTsKLQkJaWYgKGVyciA8IDApCi0JCQlyZXR1cm4gZXJyOwotCX0KIAogCS8q
CiAJICogVGhlIGNvbm5lY3RvciBpcyBub3cgcmVnaXN0ZXJlZCBhbmQgcmVhZHkgdG8gcmVjZWl2
ZSBob3RwbHVnIGV2ZW50cwpAQCAtMjIwLDkgKzIxMyw2IEBAIHZvaWQgdGVncmFfb3V0cHV0X2V4
aXQoc3RydWN0IHRlZ3JhX291dHB1dCAqb3V0cHV0KQogCSAqLwogCWlmIChvdXRwdXQtPmhwZF9n
cGlvKQogCQlkaXNhYmxlX2lycShvdXRwdXQtPmhwZF9pcnEpOwotCi0JaWYgKG91dHB1dC0+cGFu
ZWwpCi0JCWRybV9wYW5lbF9kZXRhY2gob3V0cHV0LT5wYW5lbCk7CiB9CiAKIHZvaWQgdGVncmFf
b3V0cHV0X2ZpbmRfcG9zc2libGVfY3J0Y3Moc3RydWN0IHRlZ3JhX291dHB1dCAqb3V0cHV0LApk
aWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX3BhbmVsLmggYi9pbmNsdWRlL2RybS9kcm1fcGFu
ZWwuaAppbmRleCA2MTkzY2I1NTVhY2MuLjliMzc0Zjg4ZmI3NiAxMDA2NDQKLS0tIGEvaW5jbHVk
ZS9kcm0vZHJtX3BhbmVsLmgKKysrIGIvaW5jbHVkZS9kcm0vZHJtX3BhbmVsLmgKQEAgLTE3OCw5
ICsxNzgsNiBAQCB2b2lkIGRybV9wYW5lbF9pbml0KHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsLCBz
dHJ1Y3QgZGV2aWNlICpkZXYsCiBpbnQgZHJtX3BhbmVsX2FkZChzdHJ1Y3QgZHJtX3BhbmVsICpw
YW5lbCk7CiB2b2lkIGRybV9wYW5lbF9yZW1vdmUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpOwog
Ci1pbnQgZHJtX3BhbmVsX2F0dGFjaChzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCwgc3RydWN0IGRy
bV9jb25uZWN0b3IgKmNvbm5lY3Rvcik7Ci12b2lkIGRybV9wYW5lbF9kZXRhY2goc3RydWN0IGRy
bV9wYW5lbCAqcGFuZWwpOwotCiBpbnQgZHJtX3BhbmVsX3ByZXBhcmUoc3RydWN0IGRybV9wYW5l
bCAqcGFuZWwpOwogaW50IGRybV9wYW5lbF91bnByZXBhcmUoc3RydWN0IGRybV9wYW5lbCAqcGFu
ZWwpOwogCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpk
cmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
