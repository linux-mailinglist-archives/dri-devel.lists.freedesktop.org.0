Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 138D9A56C2
	for <lists+dri-devel@lfdr.de>; Mon,  2 Sep 2019 14:54:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E0552890CD;
	Mon,  2 Sep 2019 12:54:52 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from lelv0143.ext.ti.com (lelv0143.ext.ti.com [198.47.23.248])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 600F9890CD
 for <dri-devel@lists.freedesktop.org>; Mon,  2 Sep 2019 12:54:51 +0000 (UTC)
Received: from lelv0266.itg.ti.com ([10.180.67.225])
 by lelv0143.ext.ti.com (8.15.2/8.15.2) with ESMTP id x82CsnCi021208;
 Mon, 2 Sep 2019 07:54:49 -0500
Received: from DFLE104.ent.ti.com (dfle104.ent.ti.com [10.64.6.25])
 by lelv0266.itg.ti.com (8.15.2/8.15.2) with ESMTPS id x82CsnT7102717
 (version=TLSv1.2 cipher=AES256-GCM-SHA384 bits=256 verify=FAIL);
 Mon, 2 Sep 2019 07:54:49 -0500
Received: from DFLE108.ent.ti.com (10.64.6.29) by DFLE104.ent.ti.com
 (10.64.6.25) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5; Mon, 2 Sep
 2019 07:54:48 -0500
Received: from fllv0039.itg.ti.com (10.64.41.19) by DFLE108.ent.ti.com
 (10.64.6.29) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5 via
 Frontend Transport; Mon, 2 Sep 2019 07:54:48 -0500
Received: from deskari.lan (ileax41-snat.itg.ti.com [10.172.224.153])
 by fllv0039.itg.ti.com (8.15.2/8.15.2) with ESMTP id x82CsYYP126767;
 Mon, 2 Sep 2019 07:54:47 -0500
From: Tomi Valkeinen <tomi.valkeinen@ti.com>
To: <dri-devel@lists.freedesktop.org>, Laurent Pinchart
 <laurent.pinchart@ideasonboard.com>
Subject: [PATCH 7/7] drm/omap: hdmi5: automatically choose limited/full range
 output
Date: Mon, 2 Sep 2019 15:53:59 +0300
Message-ID: <20190902125359.18001-8-tomi.valkeinen@ti.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190902125359.18001-1-tomi.valkeinen@ti.com>
References: <20190902125359.18001-1-tomi.valkeinen@ti.com>
MIME-Version: 1.0
X-EXCLAIMER-MD-CONFIG: e1e8a2fd-e40a-4ac6-ac9b-f7e9cc9ee180
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ti.com; s=ti-com-17Q1; t=1567428889;
 bh=Bz3QeoSE5BHX36iSaS/cu2Tqcp9FDmDMac+qmAOyVHA=;
 h=From:To:CC:Subject:Date:In-Reply-To:References;
 b=Vc2IS6ESl/u6p/lorJd/v0Si64AD+s1IGNyWzgJSEZBgtLtA8cVelWlPOlfN4rxfB
 lQJlS9CiUQbCozNo2yRp943mJjAhI9EbQBVkmMgMDAylxNUy+Gr0HlOTUz+HeJVoCD
 /hScw81VzZHbptQqfAG33AS5wJVdbC3w7+zkxIhc=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Tomi Valkeinen <tomi.valkeinen@ti.com>, Jyri Sarha <jsarha@ti.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q3VycmVudGx5IHRoZSBIRE1JIGRyaXZlciB1c2VzIGFsd2F5cyBsaW1pdGVkIHJhbmdlIFJHQiBv
dXRwdXQuIFRoaXMKcGF0Y2ggaW1wcm92ZXMgdGhlIGJlaGF2aW9yIGJ5IHVzaW5nIGxpbWl0ZWQg
cmFuZ2Ugb25seSBpZiB0aGUgb3V0cHV0IGlzCmlkZW50aWZpZWQgYXMgYSBIRE1JIGRpc3BsYXks
IGFuZCBWSUMgPiAxLgoKU2lnbmVkLW9mZi1ieTogVG9taSBWYWxrZWluZW4gPHRvbWkudmFsa2Vp
bmVuQHRpLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvaGRtaTVfY29yZS5j
IHwgMTIxICsrKysrKysrKysrKy0tLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgNjUgaW5zZXJ0
aW9ucygrKSwgNTYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29t
YXBkcm0vZHNzL2hkbWk1X2NvcmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1p
NV9jb3JlLmMKaW5kZXggNGM1ODhlYzc2MzRhLi45NmY1Y2QxNzc2OGMgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNV9jb3JlLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL29tYXBkcm0vZHNzL2hkbWk1X2NvcmUuYwpAQCAtMjMsMTggKzIzLDYgQEAKIAogI2luY2x1
ZGUgImhkbWk1X2NvcmUuaCIKIAotLyogb25seSAyNCBiaXQgY29sb3IgZGVwdGggdXNlZCBmb3Ig
bm93ICovCi1zdGF0aWMgY29uc3Qgc3RydWN0IGNzY190YWJsZSBjc2NfdGFibGVfZGVlcGNvbG9y
W10gPSB7Ci0JLyogSERNSV9ERUVQX0NPTE9SXzI0QklUICovCi0JWzBdID0geyA3MDM2LCAwLCAw
LCAzMiwgMCwgNzAzNiwgMCwgMzIsIDAsIDAsIDcwMzYsIDMyLCB9LAotCS8qIEhETUlfREVFUF9D
T0xPUl8zMEJJVCAqLwotCVsxXSA9IHsgNzAxNSwgMCwgMCwgMTI4LCAwLCA3MDE1LCAwLCAxMjgs
IDAsIDAsIDcwMTUsIDEyOCwgfSwKLQkvKiBIRE1JX0RFRVBfQ09MT1JfMzZCSVQgKi8KLQlbMl0g
PSB7IDcwMTAsIDAsIDAsIDUxMiwgMCwgNzAxMCwgMCwgNTEyLCAwLCAwLCA3MDEwLCA1MTIsIH0s
Ci0JLyogRlVMTCBSQU5HRSAqLwotCVszXSA9IHsgODE5MiwgMCwgMCwgMCwgMCwgODE5MiwgMCwg
MCwgMCwgMCwgODE5MiwgMCwgfSwKLX07Ci0KIHN0YXRpYyB2b2lkIGhkbWlfY29yZV9kZGNfaW5p
dChzdHJ1Y3QgaGRtaV9jb3JlX2RhdGEgKmNvcmUpCiB7CiAJdm9pZCBfX2lvbWVtICpiYXNlID0g
Y29yZS0+YmFzZTsKQEAgLTM5NywxNCArMzg1LDYgQEAgc3RhdGljIHZvaWQgaGRtaV9jb3JlX2Nv
bmZpZ192aWRlb19wYWNrZXRpemVyKHN0cnVjdCBoZG1pX2NvcmVfZGF0YSAqY29yZSkKIAlSRUdf
RkxEX01PRChiYXNlLCBIRE1JX0NPUkVfVlBfQ09ORiwgY2xyX2RlcHRoID8gMCA6IDIsIDEsIDAp
OwogfQogCi1zdGF0aWMgdm9pZCBoZG1pX2NvcmVfY29uZmlnX2NzYyhzdHJ1Y3QgaGRtaV9jb3Jl
X2RhdGEgKmNvcmUpCi17Ci0JaW50IGNscl9kZXB0aCA9IDA7CS8qIDI0IGJpdCBjb2xvciBkZXB0
aCAqLwotCi0JLyogQ1NDX0NPTE9SREVQVEggKi8KLQlSRUdfRkxEX01PRChjb3JlLT5iYXNlLCBI
RE1JX0NPUkVfQ1NDX1NDQUxFLCBjbHJfZGVwdGgsIDcsIDQpOwotfQotCiBzdGF0aWMgdm9pZCBo
ZG1pX2NvcmVfY29uZmlnX3ZpZGVvX3NhbXBsZXIoc3RydWN0IGhkbWlfY29yZV9kYXRhICpjb3Jl
KQogewogCWludCB2aWRlb19tYXBwaW5nID0gMTsJLyogZm9yIDI0IGJpdCBjb2xvciBkZXB0aCAq
LwpAQCAtNDY5LDQ3ICs0NDksNjcgQEAgc3RhdGljIHZvaWQgaGRtaV9jb3JlX3dyaXRlX2F2aV9p
bmZvZnJhbWUoc3RydWN0IGhkbWlfY29yZV9kYXRhICpjb3JlLAogCVJFR19GTERfTU9EKGJhc2Us
IEhETUlfQ09SRV9GQ19QUkNPTkYsIHByLCAzLCAwKTsKIH0KIAotc3RhdGljIHZvaWQgaGRtaV9j
b3JlX2NzY19jb25maWcoc3RydWN0IGhkbWlfY29yZV9kYXRhICpjb3JlLAotCQlzdHJ1Y3QgY3Nj
X3RhYmxlIGNzY19jb2VmZikKK3N0YXRpYyB2b2lkIGhkbWlfY29yZV93cml0ZV9jc2Moc3RydWN0
IGhkbWlfY29yZV9kYXRhICpjb3JlLAorCQljb25zdCBzdHJ1Y3QgY3NjX3RhYmxlICpjc2NfY29l
ZmYpCiB7CiAJdm9pZCBfX2lvbWVtICpiYXNlID0gY29yZS0+YmFzZTsKIAotCVJFR19GTERfTU9E
KGJhc2UsIEhETUlfQ09SRV9DU0NfQ09FRl9BMV9NU0IsIGNzY19jb2VmZi5hMSA+PiA4ICwgNiwg
MCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0ExX0xTQiwgY3NjX2Nv
ZWZmLmExLCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQTJf
TVNCLCBjc2NfY29lZmYuYTIgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9D
T1JFX0NTQ19DT0VGX0EyX0xTQiwgY3NjX2NvZWZmLmEyLCA3LCAwKTsKLQlSRUdfRkxEX01PRChi
YXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQTNfTVNCLCBjc2NfY29lZmYuYTMgPj4gOCwgNiwgMCk7
Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0EzX0xTQiwgY3NjX2NvZWZm
LmEzLCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQTRfTVNC
LCBjc2NfY29lZmYuYTQgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JF
X0NTQ19DT0VGX0E0X0xTQiwgY3NjX2NvZWZmLmE0LCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNl
LCBIRE1JX0NPUkVfQ1NDX0NPRUZfQjFfTVNCLCBjc2NfY29lZmYuYjEgPj4gOCwgNiwgMCk7Ci0J
UkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0IxX0xTQiwgY3NjX2NvZWZmLmIx
LCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQjJfTVNCLCBj
c2NfY29lZmYuYjIgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NT
Q19DT0VGX0IyX0xTQiwgY3NjX2NvZWZmLmIyLCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBI
RE1JX0NPUkVfQ1NDX0NPRUZfQjNfTVNCLCBjc2NfY29lZmYuYjMgPj4gOCwgNiwgMCk7Ci0JUkVH
X0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0IzX0xTQiwgY3NjX2NvZWZmLmIzLCA3
LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQjRfTVNCLCBjc2Nf
Y29lZmYuYjQgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19D
T0VGX0I0X0xTQiwgY3NjX2NvZWZmLmI0LCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1J
X0NPUkVfQ1NDX0NPRUZfQzFfTVNCLCBjc2NfY29lZmYuYzEgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZM
RF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0MxX0xTQiwgY3NjX2NvZWZmLmMxLCA3LCAw
KTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQzJfTVNCLCBjc2NfY29l
ZmYuYzIgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VG
X0MyX0xTQiwgY3NjX2NvZWZmLmMyLCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NP
UkVfQ1NDX0NPRUZfQzNfTVNCLCBjc2NfY29lZmYuYzMgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9N
T0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0MzX0xTQiwgY3NjX2NvZWZmLmMzLCA3LCAwKTsK
LQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQzRfTVNCLCBjc2NfY29lZmYu
YzQgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0M0
X0xTQiwgY3NjX2NvZWZmLmM0LCA3LCAwKTsKLQorCVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09S
RV9DU0NfQ09FRl9BMV9NU0IsIGNzY19jb2VmZi0+YTEgPj4gOCwgNiwgMCk7CisJUkVHX0ZMRF9N
T0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0ExX0xTQiwgY3NjX2NvZWZmLT5hMSwgNywgMCk7
CisJUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0EyX01TQiwgY3NjX2NvZWZm
LT5hMiA+PiA4LCA2LCAwKTsKKwlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZf
QTJfTFNCLCBjc2NfY29lZmYtPmEyLCA3LCAwKTsKKwlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NP
UkVfQ1NDX0NPRUZfQTNfTVNCLCBjc2NfY29lZmYtPmEzID4+IDgsIDYsIDApOworCVJFR19GTERf
TU9EKGJhc2UsIEhETUlfQ09SRV9DU0NfQ09FRl9BM19MU0IsIGNzY19jb2VmZi0+YTMsIDcsIDAp
OworCVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09SRV9DU0NfQ09FRl9BNF9NU0IsIGNzY19jb2Vm
Zi0+YTQgPj4gOCwgNiwgMCk7CisJUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VG
X0E0X0xTQiwgY3NjX2NvZWZmLT5hNCwgNywgMCk7CisJUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9D
T1JFX0NTQ19DT0VGX0IxX01TQiwgY3NjX2NvZWZmLT5iMSA+PiA4LCA2LCAwKTsKKwlSRUdfRkxE
X01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQjFfTFNCLCBjc2NfY29lZmYtPmIxLCA3LCAw
KTsKKwlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQjJfTVNCLCBjc2NfY29l
ZmYtPmIyID4+IDgsIDYsIDApOworCVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09SRV9DU0NfQ09F
Rl9CMl9MU0IsIGNzY19jb2VmZi0+YjIsIDcsIDApOworCVJFR19GTERfTU9EKGJhc2UsIEhETUlf
Q09SRV9DU0NfQ09FRl9CM19NU0IsIGNzY19jb2VmZi0+YjMgPj4gOCwgNiwgMCk7CisJUkVHX0ZM
RF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0IzX0xTQiwgY3NjX2NvZWZmLT5iMywgNywg
MCk7CisJUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0I0X01TQiwgY3NjX2Nv
ZWZmLT5iNCA+PiA4LCA2LCAwKTsKKwlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NP
RUZfQjRfTFNCLCBjc2NfY29lZmYtPmI0LCA3LCAwKTsKKwlSRUdfRkxEX01PRChiYXNlLCBIRE1J
X0NPUkVfQ1NDX0NPRUZfQzFfTVNCLCBjc2NfY29lZmYtPmMxID4+IDgsIDYsIDApOworCVJFR19G
TERfTU9EKGJhc2UsIEhETUlfQ09SRV9DU0NfQ09FRl9DMV9MU0IsIGNzY19jb2VmZi0+YzEsIDcs
IDApOworCVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09SRV9DU0NfQ09FRl9DMl9NU0IsIGNzY19j
b2VmZi0+YzIgPj4gOCwgNiwgMCk7CisJUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19D
T0VGX0MyX0xTQiwgY3NjX2NvZWZmLT5jMiwgNywgMCk7CisJUkVHX0ZMRF9NT0QoYmFzZSwgSERN
SV9DT1JFX0NTQ19DT0VGX0MzX01TQiwgY3NjX2NvZWZmLT5jMyA+PiA4LCA2LCAwKTsKKwlSRUdf
RkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQzNfTFNCLCBjc2NfY29lZmYtPmMzLCA3
LCAwKTsKKwlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQzRfTVNCLCBjc2Nf
Y29lZmYtPmM0ID4+IDgsIDYsIDApOworCVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09SRV9DU0Nf
Q09FRl9DNF9MU0IsIGNzY19jb2VmZi0+YzQsIDcsIDApOworCisJLyogZW5hYmxlIENTQyAqLwog
CVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09SRV9NQ19GTE9XQ1RSTCwgMHgxLCAwLCAwKTsKIH0K
IAotc3RhdGljIHZvaWQgaGRtaV9jb3JlX2NvbmZpZ3VyZV9yYW5nZShzdHJ1Y3QgaGRtaV9jb3Jl
X2RhdGEgKmNvcmUpCitzdGF0aWMgdm9pZCBoZG1pX2NvcmVfY29uZmlndXJlX3JhbmdlKHN0cnVj
dCBoZG1pX2NvcmVfZGF0YSAqY29yZSwKKwkJCQkgICAgICBlbnVtIGhkbWlfcXVhbnRpemF0aW9u
X3JhbmdlIHJhbmdlKQogewotCXN0cnVjdCBjc2NfdGFibGUgY3NjX2NvZWZmID0geyAwIH07CisJ
c3RhdGljIGNvbnN0IHN0cnVjdCBjc2NfdGFibGUgY3NjX2xpbWl0ZWRfcmFuZ2UgPSB7CisJCTcw
MzYsIDAsIDAsIDMyLCAwLCA3MDM2LCAwLCAzMiwgMCwgMCwgNzAzNiwgMzIKKwl9OworCXN0YXRp
YyBjb25zdCBzdHJ1Y3QgY3NjX3RhYmxlIGNzY19mdWxsX3JhbmdlID0geworCQk4MTkyLCAwLCAw
LCAwLCAwLCA4MTkyLCAwLCAwLCAwLCAwLCA4MTkyLCAwCisJfTsKKwljb25zdCBzdHJ1Y3QgY3Nj
X3RhYmxlICpjc2NfY29lZmY7CisKKwkvKiBDU0NfQ09MT1JERVBUSCAgPSAyNCBiaXRzKi8KKwlS
RUdfRkxEX01PRChjb3JlLT5iYXNlLCBIRE1JX0NPUkVfQ1NDX1NDQUxFLCAwLCA3LCA0KTsKKwor
CXN3aXRjaCAocmFuZ2UpIHsKKwljYXNlIEhETUlfUVVBTlRJWkFUSU9OX1JBTkdFX0ZVTEw6CisJ
CWNzY19jb2VmZiA9ICZjc2NfZnVsbF9yYW5nZTsKKwkJYnJlYWs7CiAKLQkvKiBzdXBwb3J0IGxp
bWl0ZWQgcmFuZ2Ugd2l0aCAyNCBiaXQgY29sb3IgZGVwdGggZm9yIG5vdyAqLwotCWNzY19jb2Vm
ZiA9IGNzY190YWJsZV9kZWVwY29sb3JbMF07CisJY2FzZSBIRE1JX1FVQU5USVpBVElPTl9SQU5H
RV9ERUZBVUxUOgorCWNhc2UgSERNSV9RVUFOVElaQVRJT05fUkFOR0VfTElNSVRFRDoKKwlkZWZh
dWx0OgorCQljc2NfY29lZmYgPSAmY3NjX2xpbWl0ZWRfcmFuZ2U7CisJCWJyZWFrOworCX0KIAot
CWhkbWlfY29yZV9jc2NfY29uZmlnKGNvcmUsIGNzY19jb2VmZik7CisJaGRtaV9jb3JlX3dyaXRl
X2NzYyhjb3JlLCBjc2NfY29lZmYpOwogfQogCiBzdGF0aWMgdm9pZCBoZG1pX2NvcmVfZW5hYmxl
X3ZpZGVvX3BhdGgoc3RydWN0IGhkbWlfY29yZV9kYXRhICpjb3JlKQpAQCAtNjAwLDkgKzYwMCwy
MCBAQCB2b2lkIGhkbWk1X2NvbmZpZ3VyZShzdHJ1Y3QgaGRtaV9jb3JlX2RhdGEgKmNvcmUsIHN0
cnVjdCBoZG1pX3dwX2RhdGEgKndwLAogCXN0cnVjdCB2aWRlb21vZGUgdm07CiAJc3RydWN0IGhk
bWlfdmlkZW9fZm9ybWF0IHZpZGVvX2Zvcm1hdDsKIAlzdHJ1Y3QgaGRtaV9jb3JlX3ZpZF9jb25m
aWcgdl9jb3JlX2NmZzsKKwllbnVtIGhkbWlfcXVhbnRpemF0aW9uX3JhbmdlIHJhbmdlOwogCiAJ
aGRtaV9jb3JlX21hc2tfaW50ZXJydXB0cyhjb3JlKTsKIAorCWlmIChjZmctPmhkbWlfZHZpX21v
ZGUgPT0gSERNSV9IRE1JKSB7CisJCWNoYXIgdmljID0gY2ZnLT5pbmZvZnJhbWUudmlkZW9fY29k
ZTsKKworCQkvKiBBbGwgQ0VBIG1vZGVzIG90aGVyIHRoYW4gVklDIDEgdXNlIGxpbWl0ZWQgcXVh
bnRpemF0aW9uIHJhbmdlLiAqLworCQlyYW5nZSA9IHZpYyA+IDEgPyBIRE1JX1FVQU5USVpBVElP
Tl9SQU5HRV9MSU1JVEVEIDoKKwkJCUhETUlfUVVBTlRJWkFUSU9OX1JBTkdFX0ZVTEw7CisJfSBl
bHNlIHsKKwkJcmFuZ2UgPSBIRE1JX1FVQU5USVpBVElPTl9SQU5HRV9GVUxMOworCX0KKwogCWhk
bWlfY29yZV9pbml0KCZ2X2NvcmVfY2ZnLCBjZmcpOwogCiAJaGRtaV93cF9pbml0X3ZpZF9mbXRf
dGltaW5ncygmdmlkZW9fZm9ybWF0LCAmdm0sIGNmZyk7CkBAIC02MTYsOSArNjI3LDggQEAgdm9p
ZCBoZG1pNV9jb25maWd1cmUoc3RydWN0IGhkbWlfY29yZV9kYXRhICpjb3JlLCBzdHJ1Y3QgaGRt
aV93cF9kYXRhICp3cCwKIAogCWhkbWlfd3BfdmlkZW9fY29uZmlnX2ludGVyZmFjZSh3cCwgJnZt
KTsKIAotCS8qIHN1cHBvcnQgbGltaXRlZCByYW5nZSB3aXRoIDI0IGJpdCBjb2xvciBkZXB0aCBm
b3Igbm93ICovCi0JaGRtaV9jb3JlX2NvbmZpZ3VyZV9yYW5nZShjb3JlKTsKLQljZmctPmluZm9m
cmFtZS5xdWFudGl6YXRpb25fcmFuZ2UgPSBIRE1JX1FVQU5USVpBVElPTl9SQU5HRV9MSU1JVEVE
OworCWhkbWlfY29yZV9jb25maWd1cmVfcmFuZ2UoY29yZSwgcmFuZ2UpOworCWNmZy0+aW5mb2Zy
YW1lLnF1YW50aXphdGlvbl9yYW5nZSA9IHJhbmdlOwogCiAJLyoKIAkgKiBjb25maWd1cmUgY29y
ZSB2aWRlbyBwYXJ0LCBzZXQgc29mdHdhcmUgcmVzZXQgaW4gdGhlIGNvcmUKQEAgLTYyOCw3ICs2
MzgsNiBAQCB2b2lkIGhkbWk1X2NvbmZpZ3VyZShzdHJ1Y3QgaGRtaV9jb3JlX2RhdGEgKmNvcmUs
IHN0cnVjdCBoZG1pX3dwX2RhdGEgKndwLAogCWhkbWlfY29yZV92aWRlb19jb25maWcoY29yZSwg
JnZfY29yZV9jZmcpOwogCiAJaGRtaV9jb3JlX2NvbmZpZ192aWRlb19wYWNrZXRpemVyKGNvcmUp
OwotCWhkbWlfY29yZV9jb25maWdfY3NjKGNvcmUpOwogCWhkbWlfY29yZV9jb25maWdfdmlkZW9f
c2FtcGxlcihjb3JlKTsKIAogCWlmIChjZmctPmhkbWlfZHZpX21vZGUgPT0gSERNSV9IRE1JKQot
LSAKVGV4YXMgSW5zdHJ1bWVudHMgRmlubGFuZCBPeSwgUG9ya2thbGFua2F0dSAyMiwgMDAxODAg
SGVsc2lua2kuClktdHVubnVzL0J1c2luZXNzIElEOiAwNjE1NTIxLTQuIEtvdGlwYWlra2EvRG9t
aWNpbGU6IEhlbHNpbmtpCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmkt
ZGV2ZWw=
