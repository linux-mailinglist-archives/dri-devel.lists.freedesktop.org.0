Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 567632C6468
	for <lists+dri-devel@lfdr.de>; Fri, 27 Nov 2020 13:08:53 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8906D6EC1F;
	Fri, 27 Nov 2020 12:08:12 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 300D56EC13;
 Fri, 27 Nov 2020 12:08:07 +0000 (UTC)
IronPort-SDR: wdo/Exx4HJmDck2X/XpCrvJxVNP8CTFF9eSSETibdsnnp9Mn/wmEx+ltilngti98nA+0RsoInJ
 3+JiEdeh945w==
X-IronPort-AV: E=McAfee;i="6000,8403,9817"; a="168883406"
X-IronPort-AV: E=Sophos;i="5.78,374,1599548400"; d="scan'208";a="168883406"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by fmsmga102.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 27 Nov 2020 04:08:06 -0800
IronPort-SDR: vwmg+2jIjaMJ6/N/fTXk4TH+Du1TKFeHt8mttxnyZLRXemw3s3B3lpAmLZo9GZ0F6ltoK2yuiY
 HMvfHBu2a9sw==
X-IronPort-AV: E=Sophos;i="5.78,374,1599548400"; d="scan'208";a="548028628"
Received: from mjgleeso-mobl.ger.corp.intel.com (HELO
 mwauld-desk1.ger.corp.intel.com) ([10.251.85.2])
 by orsmga005-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 27 Nov 2020 04:08:05 -0800
From: Matthew Auld <matthew.auld@intel.com>
To: intel-gfx@lists.freedesktop.org
Subject: [RFC PATCH 022/162] drm/i915: Reject more ioctls for userptr
Date: Fri, 27 Nov 2020 12:04:58 +0000
Message-Id: <20201127120718.454037-23-matthew.auld@intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20201127120718.454037-1-matthew.auld@intel.com>
References: <20201127120718.454037-1-matthew.auld@intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org,
 =?UTF-8?q?Thomas=20Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNv
bT4KClRoZXJlIGFyZSBhIGNvdXBsZSBvZiBpb2N0bCdzIHJlbGF0ZWQgdG8gdGlsaW5nIGFuZCBj
YWNoZSBwbGFjZW1lbnQsCnRoYXQgbWFrZSBubyBzZW5zZSBmb3IgdXNlcnB0ciwgcmVqZWN0IHRo
b3NlOgotIGk5MTVfZ2VtX3NldF90aWxpbmdfaW9jdGwoKQogICAgVGlsaW5nIHNob3VsZCBhbHdh
eXMgYmUgbGluZWFyIGZvciB1c2VycHRyLiBDaGFuZ2luZyBwbGFjZW1lbnQgd2lsbAogICAgZmFp
bCB3aXRoIC1FTlhJTy4KLSBpOTE1X2dlbV9zZXRfY2FjaGluZ19pb2N0bCgpCiAgICBVc2VycHRy
IG1lbW9yeSBzaG91bGQgYWx3YXlzIGJlIGNhY2hlZC4gQ2hhbmdpbmcgd2lsbCBmYWlsIHdpdGgK
ICAgIC1FTlhJTy4KLSBpOTE1X2dlbV9zZXRfZG9tYWluX2lvY3RsKCkKICAgIENoYW5nZWQgdG8g
YmUgZXF1aXZhbGVudCB0byBnZW1fd2FpdCwgd2hpY2ggaXMgY29ycmVjdCBmb3IgdGhlCiAgICBj
YWNoZWQgbGluZWFyIHVzZXJwdHIgcG9pbnRlcnMuIFRoaXMgaXMgcmVxdWlyZWQgYmVjYXVzZSB3
ZQogICAgY2Fubm90IGdyYWIgYSByZWZlcmVuY2UgdG8gdGhlIHBhZ2VzIGluIHRoZSByZXdvcmss
IGJ1dCB3YWl0aW5nCiAgICBmb3IgaWRsZSB3aWxsIGRvIHRoZSBzYW1lLgpTdGlsbCBuZWVkcyBh
biBhY2sgZnJvbSByZWxldmFudCB1c2Vyc3BhY2UgdGhhdCBpdCB3b24ndCBicmVhaywKYnV0IHNo
b3VsZCBiZSBnb29kLgoKU2lnbmVkLW9mZi1ieTogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4u
bGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KQ2M6IFRob21hcyBIZWxsc3Ryw7ZtIDx0aG9tYXMu
aGVsbHN0cm9tQGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2Rpc3BsYXkuYyB8IDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9kb21haW4uYyAgIHwgNCArKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fb2JqZWN0LmggICB8IDYgKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fdXNlcnB0ci5jICB8IDMgKystCiA0IGZpbGVzIGNoYW5nZWQsIDEyIGluc2VydGlvbnMoKyks
IDMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rp
c3BsYXkuYwppbmRleCBiYTI2NTQ1MzkyYmMuLmYzNjkyMWEzYzRiYyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKQEAgLTE3ODU0LDcgKzE3ODU0LDcg
QEAgc3RhdGljIGludCBpbnRlbF91c2VyX2ZyYW1lYnVmZmVyX2NyZWF0ZV9oYW5kbGUoc3RydWN0
IGRybV9mcmFtZWJ1ZmZlciAqZmIsCiAJc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiA9
IGludGVsX2ZiX29iaihmYik7CiAJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSB0b19p
OTE1KG9iai0+YmFzZS5kZXYpOwogCi0JaWYgKG9iai0+dXNlcnB0ci5tbSkgeworCWlmIChpOTE1
X2dlbV9vYmplY3RfaXNfdXNlcnB0cihvYmopKSB7CiAJCWRybV9kYmcoJmk5MTUtPmRybSwKIAkJ
CSJhdHRlbXB0aW5nIHRvIHVzZSBhIHVzZXJwdHIgZm9yIGEgZnJhbWVidWZmZXIsIGRlbmllZFxu
Iik7CiAJCXJldHVybiAtRUlOVkFMOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX2RvbWFpbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X2RvbWFpbi5jCmluZGV4IGZjY2U2OTA5ZjIwMS4uYzFkNGJmNjJiM2VhIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG9tYWluLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RvbWFpbi5jCkBAIC01MjgsNyArNTI4LDkgQEAgaTkx
NV9nZW1fc2V0X2RvbWFpbl9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRh
LAogCSAqIGNvbnNpZGVyZWQgdG8gYmUgb3V0c2lkZSBvZiBhbnkgY2FjaGUgZG9tYWluLgogCSAq
LwogCWlmIChpOTE1X2dlbV9vYmplY3RfaXNfcHJveHkob2JqKSkgewotCQllcnIgPSAtRU5YSU87
CisJCS8qIHNpbGVudGx5IGFsbG93IHVzZXJwdHIgdG8gY29tcGxldGUgKi8KKwkJaWYgKCFpOTE1
X2dlbV9vYmplY3RfaXNfdXNlcnB0cihvYmopKQorCQkJZXJyID0gLUVOWElPOwogCQlnb3RvIG91
dDsKIAl9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9v
YmplY3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaAppbmRl
eCA0N2RhM2FmZjJhNzkuLjk1OTA3YjhlYjRjNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9vYmplY3QuaApAQCAtNTUxLDYgKzU1MSwxMiBAQCB2b2lkIF9faTkxNV9nZW1f
b2JqZWN0X2ZsdXNoX2Zyb250YnVmZmVyKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmos
CiB2b2lkIF9faTkxNV9nZW1fb2JqZWN0X2ludmFsaWRhdGVfZnJvbnRidWZmZXIoc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJCQkJICAgICAgZW51bSBmYl9vcF9vcmlnaW4gb3Jp
Z2luKTsKIAorc3RhdGljIGlubGluZSBib29sCitpOTE1X2dlbV9vYmplY3RfaXNfdXNlcnB0cihz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQoreworCXJldHVybiBvYmotPnVzZXJwdHIu
bW07Cit9CisKIHN0YXRpYyBpbmxpbmUgdm9pZAogaTkxNV9nZW1fb2JqZWN0X2ZsdXNoX2Zyb250
YnVmZmVyKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJCQkJICBlbnVtIGZiX29w
X29yaWdpbiBvcmlnaW4pCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fdXNlcnB0ci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3VzZXJw
dHIuYwppbmRleCA0NGFmNjI2NTk0OGQuLjY0YTk0NmQ1Zjc1MyAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3VzZXJwdHIuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0ci5jCkBAIC03MjEsNyArNzIxLDggQEAgc3RhdGlj
IGNvbnN0IHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0X29wcyBpOTE1X2dlbV91c2VycHRyX29w
cyA9IHsKIAkubmFtZSA9ICJpOTE1X2dlbV9vYmplY3RfdXNlcnB0ciIsCiAJLmZsYWdzID0gSTkx
NV9HRU1fT0JKRUNUX0lTX1NIUklOS0FCTEUgfAogCQkgSTkxNV9HRU1fT0JKRUNUX05PX01NQVAg
fAotCQkgSTkxNV9HRU1fT0JKRUNUX0FTWU5DX0NBTkNFTCwKKwkJIEk5MTVfR0VNX09CSkVDVF9B
U1lOQ19DQU5DRUwgfAorCQkgSTkxNV9HRU1fT0JKRUNUX0lTX1BST1hZLAogCS5nZXRfcGFnZXMg
PSBpOTE1X2dlbV91c2VycHRyX2dldF9wYWdlcywKIAkucHV0X3BhZ2VzID0gaTkxNV9nZW1fdXNl
cnB0cl9wdXRfcGFnZXMsCiAJLmRtYWJ1Zl9leHBvcnQgPSBpOTE1X2dlbV91c2VycHRyX2RtYWJ1
Zl9leHBvcnQsCi0tIAoyLjI2LjIKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2RyaS1kZXZlbAo=
