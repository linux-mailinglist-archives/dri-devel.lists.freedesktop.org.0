Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 62E64837FF
	for <lists+dri-devel@lfdr.de>; Tue,  6 Aug 2019 19:39:57 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 11D7A89A8B;
	Tue,  6 Aug 2019 17:39:54 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7B59189A8B;
 Tue,  6 Aug 2019 17:39:52 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 06 Aug 2019 10:39:46 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,353,1559545200"; d="scan'208";a="174242846"
Received: from iweiny-desk2.sc.intel.com ([10.3.52.157])
 by fmsmga008.fm.intel.com with ESMTP; 06 Aug 2019 10:39:46 -0700
Date: Tue, 6 Aug 2019 10:39:46 -0700
From: Ira Weiny <ira.weiny@intel.com>
To: john.hubbard@gmail.com
Subject: Re: [PATCH v2 01/34] mm/gup: add make_dirty arg to
 put_user_pages_dirty_lock()
Message-ID: <20190806173945.GA4748@iweiny-DESK2.sc.intel.com>
References: <20190804224915.28669-1-jhubbard@nvidia.com>
 <20190804224915.28669-2-jhubbard@nvidia.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190804224915.28669-2-jhubbard@nvidia.com>
User-Agent: Mutt/1.11.1 (2018-12-01)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-fbdev@vger.kernel.org, Jan Kara <jack@suse.cz>, kvm@vger.kernel.org,
 Dave Hansen <dave.hansen@linux.intel.com>, Dave Chinner <david@fromorbit.com>,
 dri-devel@lists.freedesktop.org, linux-mm@kvack.org,
 Matthew Wilcox <willy@infradead.org>, sparclinux@vger.kernel.org,
 Dan Williams <dan.j.williams@intel.com>, devel@driverdev.osuosl.org,
 rds-devel@oss.oracle.com, linux-rdma@vger.kernel.org, x86@kernel.org,
 amd-gfx@lists.freedesktop.org, Christoph Hellwig <hch@lst.de>,
 Christoph Hellwig <hch@infradead.org>, Jason Gunthorpe <jgg@ziepe.ca>,
 xen-devel@lists.xenproject.org, devel@lists.orangefs.org,
 linux-media@vger.kernel.org, John Hubbard <jhubbard@nvidia.com>,
 intel-gfx@lists.freedesktop.org, linux-block@vger.kernel.org,
 =?iso-8859-1?B?Suly9G1l?= Glisse <jglisse@redhat.com>,
 linux-rpi-kernel@lists.infradead.org, ceph-devel@vger.kernel.org,
 linux-arm-kernel@lists.infradead.org, linux-nfs@vger.kernel.org,
 netdev@vger.kernel.org, LKML <linux-kernel@vger.kernel.org>,
 linux-xfs@vger.kernel.org, linux-crypto@vger.kernel.org,
 linux-fsdevel@vger.kernel.org, Andrew Morton <akpm@linux-foundation.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gU3VuLCBBdWcgMDQsIDIwMTkgYXQgMDM6NDg6NDJQTSAtMDcwMCwgam9obi5odWJiYXJkQGdt
YWlsLmNvbSB3cm90ZToKPiBGcm9tOiBKb2huIEh1YmJhcmQgPGpodWJiYXJkQG52aWRpYS5jb20+
Cj4gCj4gUHJvdmlkZSBhIG1vcmUgY2FwYWJsZSB2YXJpYXRpb24gb2YgcHV0X3VzZXJfcGFnZXNf
ZGlydHlfbG9jaygpLAo+IGFuZCBkZWxldGUgcHV0X3VzZXJfcGFnZXNfZGlydHkoKS4gVGhpcyBp
cyBiYXNlZCBvbiB0aGUKPiBmb2xsb3dpbmc6Cj4gCj4gMS4gTG90cyBvZiBjYWxsIHNpdGVzIGJl
Y29tZSBzaW1wbGVyIGlmIGEgYm9vbCBpcyBwYXNzZWQKPiBpbnRvIHB1dF91c2VyX3BhZ2UqKCks
IGluc3RlYWQgb2YgbWFraW5nIHRoZSBjYWxsIHNpdGUKPiBjaG9vc2Ugd2hpY2ggcHV0X3VzZXJf
cGFnZSooKSB2YXJpYW50IHRvIGNhbGwuCj4gCj4gMi4gQ2hyaXN0b3BoIEhlbGx3aWcncyBvYnNl
cnZhdGlvbiB0aGF0IHNldF9wYWdlX2RpcnR5X2xvY2soKQo+IGlzIHVzdWFsbHkgY29ycmVjdCwg
YW5kIHNldF9wYWdlX2RpcnR5KCkgaXMgdXN1YWxseSBhCj4gYnVnLCBvciBhdCBsZWFzdCBxdWVz
dGlvbmFibGUsIHdpdGhpbiBhIHB1dF91c2VyX3BhZ2UqKCkKPiBjYWxsaW5nIGNoYWluLgo+IAo+
IFRoaXMgbGVhZHMgdG8gdGhlIGZvbGxvd2luZyBBUEkgY2hvaWNlczoKPiAKPiAgICAgKiBwdXRf
dXNlcl9wYWdlc19kaXJ0eV9sb2NrKHBhZ2UsIG5wYWdlcywgbWFrZV9kaXJ0eSkKPiAKPiAgICAg
KiBUaGVyZSBpcyBubyBwdXRfdXNlcl9wYWdlc19kaXJ0eSgpLiBZb3UgaGF2ZSB0bwo+ICAgICAg
IGhhbmQgY29kZSB0aGF0LCBpbiB0aGUgcmFyZSBjYXNlIHRoYXQgaXQncwo+ICAgICAgIHJlcXVp
cmVkLgo+IAo+IFJldmlld2VkLWJ5OiBDaHJpc3RvcGggSGVsbHdpZyA8aGNoQGxzdC5kZT4KPiBD
YzogTWF0dGhldyBXaWxjb3ggPHdpbGx5QGluZnJhZGVhZC5vcmc+Cj4gQ2M6IEphbiBLYXJhIDxq
YWNrQHN1c2UuY3o+Cj4gQ2M6IElyYSBXZWlueSA8aXJhLndlaW55QGludGVsLmNvbT4KPiBDYzog
SmFzb24gR3VudGhvcnBlIDxqZ2dAemllcGUuY2E+Cj4gU2lnbmVkLW9mZi1ieTogSm9obiBIdWJi
YXJkIDxqaHViYmFyZEBudmlkaWEuY29tPgo+IC0tLQo+ICBkcml2ZXJzL2luZmluaWJhbmQvY29y
ZS91bWVtLmMgICAgICAgICAgICAgfCAgIDUgKy0KPiAgZHJpdmVycy9pbmZpbmliYW5kL2h3L2hm
aTEvdXNlcl9wYWdlcy5jICAgIHwgICA1ICstCj4gIGRyaXZlcnMvaW5maW5pYmFuZC9ody9xaWIv
cWliX3VzZXJfcGFnZXMuYyB8ICAxMyArLS0KPiAgZHJpdmVycy9pbmZpbmliYW5kL2h3L3Vzbmlj
L3VzbmljX3Vpb20uYyAgIHwgICA1ICstCj4gIGRyaXZlcnMvaW5maW5pYmFuZC9zdy9zaXcvc2l3
X21lbS5jICAgICAgICB8ICAxOSArLS0tCj4gIGluY2x1ZGUvbGludXgvbW0uaCAgICAgICAgICAg
ICAgICAgICAgICAgICB8ICAgNSArLQo+ICBtbS9ndXAuYyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgfCAxMTUgKysrKysrKysrLS0tLS0tLS0tLS0tCj4gIDcgZmlsZXMgY2hhbmdl
ZCwgNjEgaW5zZXJ0aW9ucygrKSwgMTA2IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVtLmMgYi9kcml2ZXJzL2luZmluaWJhbmQvY29yZS91
bWVtLmMKPiBpbmRleCAwOGRhODQwZWQ3ZWUuLjk2NWNmOWRlYTcxYSAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVtLmMKPiArKysgYi9kcml2ZXJzL2luZmluaWJhbmQv
Y29yZS91bWVtLmMKPiBAQCAtNTQsMTAgKzU0LDcgQEAgc3RhdGljIHZvaWQgX19pYl91bWVtX3Jl
bGVhc2Uoc3RydWN0IGliX2RldmljZSAqZGV2LCBzdHJ1Y3QgaWJfdW1lbSAqdW1lbSwgaW50IGQK
PiAgCj4gIAlmb3JfZWFjaF9zZ19wYWdlKHVtZW0tPnNnX2hlYWQuc2dsLCAmc2dfaXRlciwgdW1l
bS0+c2dfbmVudHMsIDApIHsKPiAgCQlwYWdlID0gc2dfcGFnZV9pdGVyX3BhZ2UoJnNnX2l0ZXIp
Owo+IC0JCWlmICh1bWVtLT53cml0YWJsZSAmJiBkaXJ0eSkKPiAtCQkJcHV0X3VzZXJfcGFnZXNf
ZGlydHlfbG9jaygmcGFnZSwgMSk7Cj4gLQkJZWxzZQo+IC0JCQlwdXRfdXNlcl9wYWdlKHBhZ2Up
Owo+ICsJCXB1dF91c2VyX3BhZ2VzX2RpcnR5X2xvY2soJnBhZ2UsIDEsIHVtZW0tPndyaXRhYmxl
ICYmIGRpcnR5KTsKPiAgCX0KPiAgCj4gIAlzZ19mcmVlX3RhYmxlKCZ1bWVtLT5zZ19oZWFkKTsK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9pbmZpbmliYW5kL2h3L2hmaTEvdXNlcl9wYWdlcy5jIGIv
ZHJpdmVycy9pbmZpbmliYW5kL2h3L2hmaTEvdXNlcl9wYWdlcy5jCj4gaW5kZXggYjg5YTliOWFl
ZjdhLi40NjlhY2I5NjFmYmQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9pbmZpbmliYW5kL2h3L2hm
aTEvdXNlcl9wYWdlcy5jCj4gKysrIGIvZHJpdmVycy9pbmZpbmliYW5kL2h3L2hmaTEvdXNlcl9w
YWdlcy5jCj4gQEAgLTExOCwxMCArMTE4LDcgQEAgaW50IGhmaTFfYWNxdWlyZV91c2VyX3BhZ2Vz
KHN0cnVjdCBtbV9zdHJ1Y3QgKm1tLCB1bnNpZ25lZCBsb25nIHZhZGRyLCBzaXplX3QgbnAKPiAg
dm9pZCBoZmkxX3JlbGVhc2VfdXNlcl9wYWdlcyhzdHJ1Y3QgbW1fc3RydWN0ICptbSwgc3RydWN0
IHBhZ2UgKipwLAo+ICAJCQkgICAgIHNpemVfdCBucGFnZXMsIGJvb2wgZGlydHkpCj4gIHsKPiAt
CWlmIChkaXJ0eSkKPiAtCQlwdXRfdXNlcl9wYWdlc19kaXJ0eV9sb2NrKHAsIG5wYWdlcyk7Cj4g
LQllbHNlCj4gLQkJcHV0X3VzZXJfcGFnZXMocCwgbnBhZ2VzKTsKPiArCXB1dF91c2VyX3BhZ2Vz
X2RpcnR5X2xvY2socCwgbnBhZ2VzLCBkaXJ0eSk7Cj4gIAo+ICAJaWYgKG1tKSB7IC8qIGR1cmlu
ZyBjbG9zZSBhZnRlciBzaWduYWwsIG1tIGNhbiBiZSBOVUxMICovCj4gIAkJYXRvbWljNjRfc3Vi
KG5wYWdlcywgJm1tLT5waW5uZWRfdm0pOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2luZmluaWJh
bmQvaHcvcWliL3FpYl91c2VyX3BhZ2VzLmMgYi9kcml2ZXJzL2luZmluaWJhbmQvaHcvcWliL3Fp
Yl91c2VyX3BhZ2VzLmMKPiBpbmRleCBiZmJmYmI3ZTBmZjQuLjI2YzFmYjhkNDVjYyAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2luZmluaWJhbmQvaHcvcWliL3FpYl91c2VyX3BhZ2VzLmMKPiArKysg
Yi9kcml2ZXJzL2luZmluaWJhbmQvaHcvcWliL3FpYl91c2VyX3BhZ2VzLmMKPiBAQCAtMzcsMTUg
KzM3LDYgQEAKPiAgCj4gICNpbmNsdWRlICJxaWIuaCIKPiAgCj4gLXN0YXRpYyB2b2lkIF9fcWli
X3JlbGVhc2VfdXNlcl9wYWdlcyhzdHJ1Y3QgcGFnZSAqKnAsIHNpemVfdCBudW1fcGFnZXMsCj4g
LQkJCQkgICAgIGludCBkaXJ0eSkKPiAtewo+IC0JaWYgKGRpcnR5KQo+IC0JCXB1dF91c2VyX3Bh
Z2VzX2RpcnR5X2xvY2socCwgbnVtX3BhZ2VzKTsKPiAtCWVsc2UKPiAtCQlwdXRfdXNlcl9wYWdl
cyhwLCBudW1fcGFnZXMpOwo+IC19Cj4gLQo+ICAvKioKPiAgICogcWliX21hcF9wYWdlIC0gYSBz
YWZldHkgd3JhcHBlciBhcm91bmQgcGNpX21hcF9wYWdlKCkKPiAgICoKPiBAQCAtMTI0LDcgKzEx
NSw3IEBAIGludCBxaWJfZ2V0X3VzZXJfcGFnZXModW5zaWduZWQgbG9uZyBzdGFydF9wYWdlLCBz
aXplX3QgbnVtX3BhZ2VzLAo+ICAKPiAgCXJldHVybiAwOwo+ICBiYWlsX3JlbGVhc2U6Cj4gLQlf
X3FpYl9yZWxlYXNlX3VzZXJfcGFnZXMocCwgZ290LCAwKTsKPiArCXB1dF91c2VyX3BhZ2VzX2Rp
cnR5X2xvY2socCwgZ290LCBmYWxzZSk7Cj4gIGJhaWw6Cj4gIAlhdG9taWM2NF9zdWIobnVtX3Bh
Z2VzLCAmY3VycmVudC0+bW0tPnBpbm5lZF92bSk7Cj4gIAlyZXR1cm4gcmV0Owo+IEBAIC0xMzIs
NyArMTIzLDcgQEAgaW50IHFpYl9nZXRfdXNlcl9wYWdlcyh1bnNpZ25lZCBsb25nIHN0YXJ0X3Bh
Z2UsIHNpemVfdCBudW1fcGFnZXMsCj4gIAo+ICB2b2lkIHFpYl9yZWxlYXNlX3VzZXJfcGFnZXMo
c3RydWN0IHBhZ2UgKipwLCBzaXplX3QgbnVtX3BhZ2VzKQo+ICB7Cj4gLQlfX3FpYl9yZWxlYXNl
X3VzZXJfcGFnZXMocCwgbnVtX3BhZ2VzLCAxKTsKPiArCXB1dF91c2VyX3BhZ2VzX2RpcnR5X2xv
Y2socCwgbnVtX3BhZ2VzLCB0cnVlKTsKPiAgCj4gIAkvKiBkdXJpbmcgY2xvc2UgYWZ0ZXIgc2ln
bmFsLCBtbSBjYW4gYmUgTlVMTCAqLwo+ICAJaWYgKGN1cnJlbnQtPm1tKQo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2luZmluaWJhbmQvaHcvdXNuaWMvdXNuaWNfdWlvbS5jIGIvZHJpdmVycy9pbmZp
bmliYW5kL2h3L3VzbmljL3VzbmljX3Vpb20uYwo+IGluZGV4IDBiMDIzN2Q0MTYxMy4uNjJlNmZm
YTlhZDc4IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvaW5maW5pYmFuZC9ody91c25pYy91c25pY191
aW9tLmMKPiArKysgYi9kcml2ZXJzL2luZmluaWJhbmQvaHcvdXNuaWMvdXNuaWNfdWlvbS5jCj4g
QEAgLTc1LDEwICs3NSw3IEBAIHN0YXRpYyB2b2lkIHVzbmljX3Vpb21fcHV0X3BhZ2VzKHN0cnVj
dCBsaXN0X2hlYWQgKmNodW5rX2xpc3QsIGludCBkaXJ0eSkKPiAgCQlmb3JfZWFjaF9zZyhjaHVu
ay0+cGFnZV9saXN0LCBzZywgY2h1bmstPm5lbnRzLCBpKSB7Cj4gIAkJCXBhZ2UgPSBzZ19wYWdl
KHNnKTsKPiAgCQkJcGEgPSBzZ19waHlzKHNnKTsKPiAtCQkJaWYgKGRpcnR5KQo+IC0JCQkJcHV0
X3VzZXJfcGFnZXNfZGlydHlfbG9jaygmcGFnZSwgMSk7Cj4gLQkJCWVsc2UKPiAtCQkJCXB1dF91
c2VyX3BhZ2UocGFnZSk7Cj4gKwkJCXB1dF91c2VyX3BhZ2VzX2RpcnR5X2xvY2soJnBhZ2UsIDEs
IGRpcnR5KTsKPiAgCQkJdXNuaWNfZGJnKCJwYTogJXBhXG4iLCAmcGEpOwo+ICAJCX0KPiAgCQlr
ZnJlZShjaHVuayk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvaW5maW5pYmFuZC9zdy9zaXcvc2l3
X21lbS5jIGIvZHJpdmVycy9pbmZpbmliYW5kL3N3L3Npdy9zaXdfbWVtLmMKPiBpbmRleCA2NzE3
MWM4MmIwYzQuLjFlMTk3NzUzYmYyZiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2luZmluaWJhbmQv
c3cvc2l3L3Npd19tZW0uYwo+ICsrKyBiL2RyaXZlcnMvaW5maW5pYmFuZC9zdy9zaXcvc2l3X21l
bS5jCj4gQEAgLTYwLDIwICs2MCw2IEBAIHN0cnVjdCBzaXdfbWVtICpzaXdfbWVtX2lkMm9iaihz
dHJ1Y3Qgc2l3X2RldmljZSAqc2RldiwgaW50IHN0YWdfaW5kZXgpCj4gIAlyZXR1cm4gTlVMTDsK
PiAgfQo+ICAKPiAtc3RhdGljIHZvaWQgc2l3X2ZyZWVfcGxpc3Qoc3RydWN0IHNpd19wYWdlX2No
dW5rICpjaHVuaywgaW50IG51bV9wYWdlcywKPiAtCQkJICAgYm9vbCBkaXJ0eSkKPiAtewo+IC0J
c3RydWN0IHBhZ2UgKipwID0gY2h1bmstPnBsaXN0Owo+IC0KPiAtCXdoaWxlIChudW1fcGFnZXMt
LSkgewo+IC0JCWlmICghUGFnZURpcnR5KCpwKSAmJiBkaXJ0eSkKPiAtCQkJcHV0X3VzZXJfcGFn
ZXNfZGlydHlfbG9jayhwLCAxKTsKPiAtCQllbHNlCj4gLQkJCXB1dF91c2VyX3BhZ2UoKnApOwo+
IC0JCXArKzsKPiAtCX0KPiAtfQo+IC0KPiAgdm9pZCBzaXdfdW1lbV9yZWxlYXNlKHN0cnVjdCBz
aXdfdW1lbSAqdW1lbSwgYm9vbCBkaXJ0eSkKPiAgewo+ICAJc3RydWN0IG1tX3N0cnVjdCAqbW1f
cyA9IHVtZW0tPm93bmluZ19tbTsKPiBAQCAtODIsOCArNjgsOSBAQCB2b2lkIHNpd191bWVtX3Jl
bGVhc2Uoc3RydWN0IHNpd191bWVtICp1bWVtLCBib29sIGRpcnR5KQo+ICAJZm9yIChpID0gMDsg
bnVtX3BhZ2VzOyBpKyspIHsKPiAgCQlpbnQgdG9fZnJlZSA9IG1pbl90KGludCwgUEFHRVNfUEVS
X0NIVU5LLCBudW1fcGFnZXMpOwo+ICAKPiAtCQlzaXdfZnJlZV9wbGlzdCgmdW1lbS0+cGFnZV9j
aHVua1tpXSwgdG9fZnJlZSwKPiAtCQkJICAgICAgIHVtZW0tPndyaXRhYmxlICYmIGRpcnR5KTsK
PiArCQlwdXRfdXNlcl9wYWdlc19kaXJ0eV9sb2NrKHVtZW0tPnBhZ2VfY2h1bmtbaV0ucGxpc3Qs
Cj4gKwkJCQkJICB0b19mcmVlLAo+ICsJCQkJCSAgdW1lbS0+d3JpdGFibGUgJiYgZGlydHkpOwo+
ICAJCWtmcmVlKHVtZW0tPnBhZ2VfY2h1bmtbaV0ucGxpc3QpOwo+ICAJCW51bV9wYWdlcyAtPSB0
b19mcmVlOwo+ICAJfQo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L21tLmggYi9pbmNsdWRl
L2xpbnV4L21tLmgKPiBpbmRleCAwMzM0Y2E5N2M1ODQuLjk3NTliNmEyNDQyMCAxMDA2NDQKPiAt
LS0gYS9pbmNsdWRlL2xpbnV4L21tLmgKPiArKysgYi9pbmNsdWRlL2xpbnV4L21tLmgKPiBAQCAt
MTA1Nyw4ICsxMDU3LDkgQEAgc3RhdGljIGlubGluZSB2b2lkIHB1dF91c2VyX3BhZ2Uoc3RydWN0
IHBhZ2UgKnBhZ2UpCj4gIAlwdXRfcGFnZShwYWdlKTsKPiAgfQo+ICAKPiAtdm9pZCBwdXRfdXNl
cl9wYWdlc19kaXJ0eShzdHJ1Y3QgcGFnZSAqKnBhZ2VzLCB1bnNpZ25lZCBsb25nIG5wYWdlcyk7
Cj4gLXZvaWQgcHV0X3VzZXJfcGFnZXNfZGlydHlfbG9jayhzdHJ1Y3QgcGFnZSAqKnBhZ2VzLCB1
bnNpZ25lZCBsb25nIG5wYWdlcyk7Cj4gK3ZvaWQgcHV0X3VzZXJfcGFnZXNfZGlydHlfbG9jayhz
dHJ1Y3QgcGFnZSAqKnBhZ2VzLCB1bnNpZ25lZCBsb25nIG5wYWdlcywKPiArCQkJICAgICAgIGJv
b2wgbWFrZV9kaXJ0eSk7Cj4gKwo+ICB2b2lkIHB1dF91c2VyX3BhZ2VzKHN0cnVjdCBwYWdlICoq
cGFnZXMsIHVuc2lnbmVkIGxvbmcgbnBhZ2VzKTsKPiAgCj4gICNpZiBkZWZpbmVkKENPTkZJR19T
UEFSU0VNRU0pICYmICFkZWZpbmVkKENPTkZJR19TUEFSU0VNRU1fVk1FTU1BUCkKPiBkaWZmIC0t
Z2l0IGEvbW0vZ3VwLmMgYi9tbS9ndXAuYwo+IGluZGV4IDk4ZjEzYWIzN2JhYy4uN2ZlZmQ3YWIw
MmM0IDEwMDY0NAo+IC0tLSBhL21tL2d1cC5jCj4gKysrIGIvbW0vZ3VwLmMKPiBAQCAtMjksODUg
KzI5LDcwIEBAIHN0cnVjdCBmb2xsb3dfcGFnZV9jb250ZXh0IHsKPiAgCXVuc2lnbmVkIGludCBw
YWdlX21hc2s7Cj4gIH07Cj4gIAo+IC10eXBlZGVmIGludCAoKnNldF9kaXJ0eV9mdW5jX3QpKHN0
cnVjdCBwYWdlICpwYWdlKTsKPiAtCj4gLXN0YXRpYyB2b2lkIF9fcHV0X3VzZXJfcGFnZXNfZGly
dHkoc3RydWN0IHBhZ2UgKipwYWdlcywKPiAtCQkJCSAgIHVuc2lnbmVkIGxvbmcgbnBhZ2VzLAo+
IC0JCQkJICAgc2V0X2RpcnR5X2Z1bmNfdCBzZGYpCj4gLXsKPiAtCXVuc2lnbmVkIGxvbmcgaW5k
ZXg7Cj4gLQo+IC0JZm9yIChpbmRleCA9IDA7IGluZGV4IDwgbnBhZ2VzOyBpbmRleCsrKSB7Cj4g
LQkJc3RydWN0IHBhZ2UgKnBhZ2UgPSBjb21wb3VuZF9oZWFkKHBhZ2VzW2luZGV4XSk7Cj4gLQo+
IC0JCS8qCj4gLQkJICogQ2hlY2tpbmcgUGFnZURpcnR5IGF0IHRoaXMgcG9pbnQgbWF5IHJhY2Ug
d2l0aAo+IC0JCSAqIGNsZWFyX3BhZ2VfZGlydHlfZm9yX2lvKCksIGJ1dCB0aGF0J3MgT0suIFR3
byBrZXkgY2FzZXM6Cj4gLQkJICoKPiAtCQkgKiAxKSBUaGlzIGNvZGUgc2VlcyB0aGUgcGFnZSBh
cyBhbHJlYWR5IGRpcnR5LCBzbyBpdCBza2lwcwo+IC0JCSAqIHRoZSBjYWxsIHRvIHNkZigpLiBU
aGF0IGNvdWxkIGhhcHBlbiBiZWNhdXNlCj4gLQkJICogY2xlYXJfcGFnZV9kaXJ0eV9mb3JfaW8o
KSBjYWxsZWQgcGFnZV9ta2NsZWFuKCksCj4gLQkJICogZm9sbG93ZWQgYnkgc2V0X3BhZ2VfZGly
dHkoKS4gSG93ZXZlciwgbm93IHRoZSBwYWdlIGlzCj4gLQkJICogZ29pbmcgdG8gZ2V0IHdyaXR0
ZW4gYmFjaywgd2hpY2ggbWVldHMgdGhlIG9yaWdpbmFsCj4gLQkJICogaW50ZW50aW9uIG9mIHNl
dHRpbmcgaXQgZGlydHksIHNvIGFsbCBpcyB3ZWxsOgo+IC0JCSAqIGNsZWFyX3BhZ2VfZGlydHlf
Zm9yX2lvKCkgZ29lcyBvbiB0byBjYWxsCj4gLQkJICogVGVzdENsZWFyUGFnZURpcnR5KCksIGFu
ZCB3cml0ZSB0aGUgcGFnZSBiYWNrLgo+IC0JCSAqCj4gLQkJICogMikgVGhpcyBjb2RlIHNlZXMg
dGhlIHBhZ2UgYXMgY2xlYW4sIHNvIGl0IGNhbGxzIHNkZigpLgo+IC0JCSAqIFRoZSBwYWdlIHN0
YXlzIGRpcnR5LCBkZXNwaXRlIGJlaW5nIHdyaXR0ZW4gYmFjaywgc28gaXQKPiAtCQkgKiBnZXRz
IHdyaXR0ZW4gYmFjayBhZ2FpbiBpbiB0aGUgbmV4dCB3cml0ZWJhY2sgY3ljbGUuCj4gLQkJICog
VGhpcyBpcyBoYXJtbGVzcy4KPiAtCQkgKi8KPiAtCQlpZiAoIVBhZ2VEaXJ0eShwYWdlKSkKPiAt
CQkJc2RmKHBhZ2UpOwo+IC0KPiAtCQlwdXRfdXNlcl9wYWdlKHBhZ2UpOwo+IC0JfQo+IC19Cj4g
LQo+ICAvKioKPiAtICogcHV0X3VzZXJfcGFnZXNfZGlydHkoKSAtIHJlbGVhc2UgYW5kIGRpcnR5
IGFuIGFycmF5IG9mIGd1cC1waW5uZWQgcGFnZXMKPiAtICogQHBhZ2VzOiAgYXJyYXkgb2YgcGFn
ZXMgdG8gYmUgbWFya2VkIGRpcnR5IGFuZCByZWxlYXNlZC4KPiArICogcHV0X3VzZXJfcGFnZXNf
ZGlydHlfbG9jaygpIC0gcmVsZWFzZSBhbmQgb3B0aW9uYWxseSBkaXJ0eSBndXAtcGlubmVkIHBh
Z2VzCj4gKyAqIEBwYWdlczogIGFycmF5IG9mIHBhZ2VzIHRvIGJlIG1heWJlIG1hcmtlZCBkaXJ0
eSwgYW5kIGRlZmluaXRlbHkgcmVsZWFzZWQuCgpCZXR0ZXIgd291bGQgYmUuCgpAcGFnZXM6ICBh
cnJheSBvZiBwYWdlcyB0byBiZSBwdXQKCj4gICAqIEBucGFnZXM6IG51bWJlciBvZiBwYWdlcyBp
biB0aGUgQHBhZ2VzIGFycmF5Lgo+ICsgKiBAbWFrZV9kaXJ0eTogd2hldGhlciB0byBtYXJrIHRo
ZSBwYWdlcyBkaXJ0eQo+ICAgKgo+ICAgKiAiZ3VwLXBpbm5lZCBwYWdlIiByZWZlcnMgdG8gYSBw
YWdlIHRoYXQgaGFzIGhhZCBvbmUgb2YgdGhlIGdldF91c2VyX3BhZ2VzKCkKPiAgICogdmFyaWFu
dHMgY2FsbGVkIG9uIHRoYXQgcGFnZS4KPiAgICoKPiAgICogRm9yIGVhY2ggcGFnZSBpbiB0aGUg
QHBhZ2VzIGFycmF5LCBtYWtlIHRoYXQgcGFnZSAob3IgaXRzIGhlYWQgcGFnZSwgaWYgYQo+IC0g
KiBjb21wb3VuZCBwYWdlKSBkaXJ0eSwgaWYgaXQgd2FzIHByZXZpb3VzbHkgbGlzdGVkIGFzIGNs
ZWFuLiBUaGVuLCByZWxlYXNlCj4gLSAqIHRoZSBwYWdlIHVzaW5nIHB1dF91c2VyX3BhZ2UoKS4K
PiArICogY29tcG91bmQgcGFnZSkgZGlydHksIGlmIEBtYWtlX2RpcnR5IGlzIHRydWUsIGFuZCBp
ZiB0aGUgcGFnZSB3YXMgcHJldmlvdXNseQo+ICsgKiBsaXN0ZWQgYXMgY2xlYW4uIEluIGFueSBj
YXNlLCByZWxlYXNlcyBhbGwgcGFnZXMgdXNpbmcgcHV0X3VzZXJfcGFnZSgpLAo+ICsgKiBwb3Nz
aWJseSB2aWEgcHV0X3VzZXJfcGFnZXMoKSwgZm9yIHRoZSBub24tZGlydHkgY2FzZS4KCkkgZG9u
J3QgdGhpbmsgdXNlcnMgb2YgdGhpcyBpbnRlcmZhY2UgbmVlZCB0aGlzIGxldmVsIG9mIGRldGFp
bC4gIEkgdGhpbmsKc29tZXRoaW5nIGxpa2UuCgogKiBGb3IgZWFjaCBwYWdlIGluIHRoZSBAcGFn
ZXMgYXJyYXksIHJlbGVhc2UgdGhlIHBhZ2UuICBJZiBAbWFrZV9kaXJ0eSBpcwogKiB0cnVlLCBt
YXJrIHRoZSBwYWdlIGRpcnR5IHByaW9yIHRvIHJlbGVhc2UuCgoKPiAgICoKPiAgICogUGxlYXNl
IHNlZSB0aGUgcHV0X3VzZXJfcGFnZSgpIGRvY3VtZW50YXRpb24gZm9yIGRldGFpbHMuCj4gICAq
Cj4gLSAqIHNldF9wYWdlX2RpcnR5KCksIHdoaWNoIGRvZXMgbm90IGxvY2sgdGhlIHBhZ2UsIGlz
IHVzZWQgaGVyZS4KPiAtICogVGhlcmVmb3JlLCBpdCBpcyB0aGUgY2FsbGVyJ3MgcmVzcG9uc2li
aWxpdHkgdG8gZW5zdXJlIHRoYXQgdGhpcyBpcwo+IC0gKiBzYWZlLiBJZiBub3QsIHRoZW4gcHV0
X3VzZXJfcGFnZXNfZGlydHlfbG9jaygpIHNob3VsZCBiZSBjYWxsZWQgaW5zdGVhZC4KPiArICog
c2V0X3BhZ2VfZGlydHlfbG9jaygpIGlzIHVzZWQgaW50ZXJuYWxseS4gSWYgaW5zdGVhZCwgc2V0
X3BhZ2VfZGlydHkoKSBpcwo+ICsgKiByZXF1aXJlZCwgdGhlbiB0aGUgY2FsbGVyIHNob3VsZCBh
KSB2ZXJpZnkgdGhhdCB0aGlzIGlzIHJlYWxseSBjb3JyZWN0LAo+ICsgKiBiZWNhdXNlIF9sb2Nr
KCkgaXMgdXN1YWxseSByZXF1aXJlZCwgYW5kIGIpIGhhbmQgY29kZSBpdDoKPiArICogc2V0X3Bh
Z2VfZGlydHlfbG9jaygpLCBwdXRfdXNlcl9wYWdlKCkuCj4gICAqCj4gICAqLwo+IC12b2lkIHB1
dF91c2VyX3BhZ2VzX2RpcnR5KHN0cnVjdCBwYWdlICoqcGFnZXMsIHVuc2lnbmVkIGxvbmcgbnBh
Z2VzKQo+ICt2b2lkIHB1dF91c2VyX3BhZ2VzX2RpcnR5X2xvY2soc3RydWN0IHBhZ2UgKipwYWdl
cywgdW5zaWduZWQgbG9uZyBucGFnZXMsCj4gKwkJCSAgICAgICBib29sIG1ha2VfZGlydHkpCj4g
IHsKPiAtCV9fcHV0X3VzZXJfcGFnZXNfZGlydHkocGFnZXMsIG5wYWdlcywgc2V0X3BhZ2VfZGly
dHkpOwo+IC19Cj4gLUVYUE9SVF9TWU1CT0wocHV0X3VzZXJfcGFnZXNfZGlydHkpOwo+ICsJdW5z
aWduZWQgbG9uZyBpbmRleDsKPiAgCj4gLS8qKgo+IC0gKiBwdXRfdXNlcl9wYWdlc19kaXJ0eV9s
b2NrKCkgLSByZWxlYXNlIGFuZCBkaXJ0eSBhbiBhcnJheSBvZiBndXAtcGlubmVkIHBhZ2VzCj4g
LSAqIEBwYWdlczogIGFycmF5IG9mIHBhZ2VzIHRvIGJlIG1hcmtlZCBkaXJ0eSBhbmQgcmVsZWFz
ZWQuCj4gLSAqIEBucGFnZXM6IG51bWJlciBvZiBwYWdlcyBpbiB0aGUgQHBhZ2VzIGFycmF5Lgo+
IC0gKgo+IC0gKiBGb3IgZWFjaCBwYWdlIGluIHRoZSBAcGFnZXMgYXJyYXksIG1ha2UgdGhhdCBw
YWdlIChvciBpdHMgaGVhZCBwYWdlLCBpZiBhCj4gLSAqIGNvbXBvdW5kIHBhZ2UpIGRpcnR5LCBp
ZiBpdCB3YXMgcHJldmlvdXNseSBsaXN0ZWQgYXMgY2xlYW4uIFRoZW4sIHJlbGVhc2UKPiAtICog
dGhlIHBhZ2UgdXNpbmcgcHV0X3VzZXJfcGFnZSgpLgo+IC0gKgo+IC0gKiBQbGVhc2Ugc2VlIHRo
ZSBwdXRfdXNlcl9wYWdlKCkgZG9jdW1lbnRhdGlvbiBmb3IgZGV0YWlscy4KPiAtICoKPiAtICog
VGhpcyBpcyBqdXN0IGxpa2UgcHV0X3VzZXJfcGFnZXNfZGlydHkoKSwgZXhjZXB0IHRoYXQgaXQg
aW52b2tlcwo+IC0gKiBzZXRfcGFnZV9kaXJ0eV9sb2NrKCksIGluc3RlYWQgb2Ygc2V0X3BhZ2Vf
ZGlydHkoKS4KPiAtICoKPiAtICovCj4gLXZvaWQgcHV0X3VzZXJfcGFnZXNfZGlydHlfbG9jayhz
dHJ1Y3QgcGFnZSAqKnBhZ2VzLCB1bnNpZ25lZCBsb25nIG5wYWdlcykKPiAtewo+IC0JX19wdXRf
dXNlcl9wYWdlc19kaXJ0eShwYWdlcywgbnBhZ2VzLCBzZXRfcGFnZV9kaXJ0eV9sb2NrKTsKPiAr
CS8qCj4gKwkgKiBUT0RPOiB0aGlzIGNhbiBiZSBvcHRpbWl6ZWQgZm9yIGh1Z2UgcGFnZXM6IGlm
IGEgc2VyaWVzIG9mIHBhZ2VzIGlzCj4gKwkgKiBwaHlzaWNhbGx5IGNvbnRpZ3VvdXMgYW5kIHBh
cnQgb2YgdGhlIHNhbWUgY29tcG91bmQgcGFnZSwgdGhlbiBhCj4gKwkgKiBzaW5nbGUgb3BlcmF0
aW9uIHRvIHRoZSBoZWFkIHBhZ2Ugc2hvdWxkIHN1ZmZpY2UuCj4gKwkgKi8KCkkgdGhpbmsgdGhp
cyBjb21tZW50IGJlbG9uZ3MgdG8gdGhlIGZvciBsb29wIGJlbG93Li4uICBvciBqdXN0IHNvbWV0
aGluZyBhYm91dApob3cgdG8gbWFrZSB0aGlzIGFuZCBwdXRfdXNlcl9wYWdlcygpIG1vcmUgZWZm
aWNpZW50LiAgSXQgaXMgb2RkLCB0aGF0IHRoaXMgaXMKdGhlIHNhbWUgY29tbWVudCBhcyBpbiBw
dXRfdXNlcl9wYWdlcygpLi4uCgpUaGUgY29kZSBpcyBnb29kLiAgU28uLi4gT3RoZXIgdGhhbiB0
aGUgY29tbWVudHMuCgpSZXZpZXdlZC1ieTogSXJhIFdlaW55IDxpcmEud2VpbnlAaW50ZWwuY29t
PgoKSXJhCgo+ICsKPiArCWlmICghbWFrZV9kaXJ0eSkgewo+ICsJCXB1dF91c2VyX3BhZ2VzKHBh
Z2VzLCBucGFnZXMpOwo+ICsJCXJldHVybjsKPiArCX0KPiArCj4gKwlmb3IgKGluZGV4ID0gMDsg
aW5kZXggPCBucGFnZXM7IGluZGV4KyspIHsKPiArCQlzdHJ1Y3QgcGFnZSAqcGFnZSA9IGNvbXBv
dW5kX2hlYWQocGFnZXNbaW5kZXhdKTsKPiArCQkvKgo+ICsJCSAqIENoZWNraW5nIFBhZ2VEaXJ0
eSBhdCB0aGlzIHBvaW50IG1heSByYWNlIHdpdGgKPiArCQkgKiBjbGVhcl9wYWdlX2RpcnR5X2Zv
cl9pbygpLCBidXQgdGhhdCdzIE9LLiBUd28ga2V5Cj4gKwkJICogY2FzZXM6Cj4gKwkJICoKPiAr
CQkgKiAxKSBUaGlzIGNvZGUgc2VlcyB0aGUgcGFnZSBhcyBhbHJlYWR5IGRpcnR5LCBzbyBpdAo+
ICsJCSAqIHNraXBzIHRoZSBjYWxsIHRvIHNldF9wYWdlX2RpcnR5KCkuIFRoYXQgY291bGQgaGFw
cGVuCj4gKwkJICogYmVjYXVzZSBjbGVhcl9wYWdlX2RpcnR5X2Zvcl9pbygpIGNhbGxlZAo+ICsJ
CSAqIHBhZ2VfbWtjbGVhbigpLCBmb2xsb3dlZCBieSBzZXRfcGFnZV9kaXJ0eSgpLgo+ICsJCSAq
IEhvd2V2ZXIsIG5vdyB0aGUgcGFnZSBpcyBnb2luZyB0byBnZXQgd3JpdHRlbiBiYWNrLAo+ICsJ
CSAqIHdoaWNoIG1lZXRzIHRoZSBvcmlnaW5hbCBpbnRlbnRpb24gb2Ygc2V0dGluZyBpdAo+ICsJ
CSAqIGRpcnR5LCBzbyBhbGwgaXMgd2VsbDogY2xlYXJfcGFnZV9kaXJ0eV9mb3JfaW8oKSBnb2Vz
Cj4gKwkJICogb24gdG8gY2FsbCBUZXN0Q2xlYXJQYWdlRGlydHkoKSwgYW5kIHdyaXRlIHRoZSBw
YWdlCj4gKwkJICogYmFjay4KPiArCQkgKgo+ICsJCSAqIDIpIFRoaXMgY29kZSBzZWVzIHRoZSBw
YWdlIGFzIGNsZWFuLCBzbyBpdCBjYWxscwo+ICsJCSAqIHNldF9wYWdlX2RpcnR5KCkuIFRoZSBw
YWdlIHN0YXlzIGRpcnR5LCBkZXNwaXRlIGJlaW5nCj4gKwkJICogd3JpdHRlbiBiYWNrLCBzbyBp
dCBnZXRzIHdyaXR0ZW4gYmFjayBhZ2FpbiBpbiB0aGUKPiArCQkgKiBuZXh0IHdyaXRlYmFjayBj
eWNsZS4gVGhpcyBpcyBoYXJtbGVzcy4KPiArCQkgKi8KPiArCQlpZiAoIVBhZ2VEaXJ0eShwYWdl
KSkKPiArCQkJc2V0X3BhZ2VfZGlydHlfbG9jayhwYWdlKTsKPiArCQlwdXRfdXNlcl9wYWdlKHBh
Z2UpOwo+ICsJfQo+ICB9Cj4gIEVYUE9SVF9TWU1CT0wocHV0X3VzZXJfcGFnZXNfZGlydHlfbG9j
ayk7Cj4gIAo+IC0tIAo+IDIuMjIuMAo+IApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
