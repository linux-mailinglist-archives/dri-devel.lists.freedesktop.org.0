Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CA9581C6A76
	for <lists+dri-devel@lfdr.de>; Wed,  6 May 2020 09:52:29 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F2B4089DA2;
	Wed,  6 May 2020 07:52:27 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0CEEC89DA2
 for <dri-devel@lists.freedesktop.org>; Wed,  6 May 2020 07:52:26 +0000 (UTC)
From: bugzilla-daemon@bugzilla.kernel.org
Authentication-Results: mail.kernel.org;
 dkim=permerror (bad message/signature format)
To: dri-devel@lists.freedesktop.org
Subject: [Bug 207593] New: [AMDGPU] The HDMI status(/sys) is not change after
 HDMI connector pull out
Date: Wed, 06 May 2020 07:52:25 +0000
X-Bugzilla-Reason: None
X-Bugzilla-Type: new
X-Bugzilla-Watch-Reason: AssignedTo drivers_video-dri@kernel-bugs.osdl.org
X-Bugzilla-Product: Drivers
X-Bugzilla-Component: Video(DRI - non Intel)
X-Bugzilla-Version: 2.5
X-Bugzilla-Keywords: 
X-Bugzilla-Severity: normal
X-Bugzilla-Who: zhoubb.aaron@gmail.com
X-Bugzilla-Status: NEW
X-Bugzilla-Resolution: 
X-Bugzilla-Priority: P1
X-Bugzilla-Assigned-To: drivers_video-dri@kernel-bugs.osdl.org
X-Bugzilla-Flags: 
X-Bugzilla-Changed-Fields: bug_id short_desc product version
 cf_kernel_version rep_platform op_sys cf_tree bug_status bug_severity
 priority component assigned_to reporter cf_regression
Message-ID: <bug-207593-2300@https.bugzilla.kernel.org/>
X-Bugzilla-URL: https://bugzilla.kernel.org/
Auto-Submitted: auto-generated
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

aHR0cHM6Ly9idWd6aWxsYS5rZXJuZWwub3JnL3Nob3dfYnVnLmNnaT9pZD0yMDc1OTMKCiAgICAg
ICAgICAgIEJ1ZyBJRDogMjA3NTkzCiAgICAgICAgICAgU3VtbWFyeTogW0FNREdQVV0gVGhlIEhE
TUkgc3RhdHVzKC9zeXMpIGlzIG5vdCBjaGFuZ2UgYWZ0ZXIKICAgICAgICAgICAgICAgICAgICBI
RE1JIGNvbm5lY3RvciBwdWxsIG91dAogICAgICAgICAgIFByb2R1Y3Q6IERyaXZlcnMKICAgICAg
ICAgICBWZXJzaW9uOiAyLjUKICAgIEtlcm5lbCBWZXJzaW9uOiA0LjE5LjkwCiAgICAgICAgICBI
YXJkd2FyZTogQWxsCiAgICAgICAgICAgICAgICBPUzogTGludXgKICAgICAgICAgICAgICBUcmVl
OiBNYWlubGluZQogICAgICAgICAgICBTdGF0dXM6IE5FVwogICAgICAgICAgU2V2ZXJpdHk6IG5v
cm1hbAogICAgICAgICAgUHJpb3JpdHk6IFAxCiAgICAgICAgIENvbXBvbmVudDogVmlkZW8oRFJJ
IC0gbm9uIEludGVsKQogICAgICAgICAgQXNzaWduZWU6IGRyaXZlcnNfdmlkZW8tZHJpQGtlcm5l
bC1idWdzLm9zZGwub3JnCiAgICAgICAgICBSZXBvcnRlcjogemhvdWJiLmFhcm9uQGdtYWlsLmNv
bQogICAgICAgIFJlZ3Jlc3Npb246IE5vCgpIaSBhbGw6CgpJJ20gYSBuZXdlciBhYm91dCB0aGUg
YW1kZ3B1IGRyaXZlci4KSSBoYXZlIGEgcXVlc3Rpb24gYWJvdXQgaXQuCkluIG15IGNvbXBhbnks
IHRoZXJlIGFyZSBzb21lIGV4cGVyaW1lbnRzIGFib3V0IEhETUkgaG90cGx1Zy4KRmlyc3QsIEkg
aW50cm9kdWNlIHRoZSBsYWIgZW52aXJvbm1lbnQ6CmNwdTogaHVhd2VpIGt1bnBlbmcKb3M6IHVv
cwprZXJuZWw6IDQuMTkuOTAKdmlkZW8gY2FyZDogUmFkZW9uIEhEIDcwMAoKdGhlIGxhYiBzdGVw
IGlzOgoxLCBJIGNvbm5lY3QgdGhlIGhkbWkgYW5kIHZnYSB3aXRoIHRoZSBleHBhbmQgbW9kZTsK
Mi4gSSBkaXNjb25uZWN0IHRoZSBoZG1pIGNvbm5lY3RvciwgYnV0IHRoZSBhcHAgZGlzcGxheSBp
biB0aGUgaGRtaSBpcwpub3QgYmFjayB0byB2Z2EsIGFuZCB0aGUgbW9kZSBpcyBzdGlsbCBleHBh
bmQgbW9kZS4KCkkgZm91bmQgd2hlbiBJIGRpc2Nvbm5lY3QgdGhlIGhkbWkgY29ubmVjdG9yLCB0
aGUgc3lzIGZpbGVzIGFib3V0IEhETUkKYXJlIGtlZXAgdGhlIGNvbm5lY3Rpb24gc3RhdHVzLgpT
dWNoIGFzIHRoZSB2YWx1ZSBvZiAvc3lzL2NsYXNzL2RybS9jYXJkMC1IRE1JLUEtMS9zdGF0dXMg
aXMKY29ubmVjdGVkLCBhbmQgSSBjYW4gcmVhZCB0aGUgZWRpZCBmaWxlIGNvcnJlY3RseS4KQXQg
dGhpcyBtb21lbnQsIEkgdXNlIEkyQyBkcml2ZXIgdG8gcmVhZCB0aGUgZWRpZCB2aWEgL2Rldi9p
MmMtWC4gSQpjYW4gbm90IGdldCB0aGUgZWRpZCB2YWx1ZS4KCkluIGtlcm5lbCBzb3VyY2UgLEkg
Zm91bmQgdGhlIHN1c3BpY2lvdXMgcG9pbnRzIGluCmFtZGdwdV9jb25uZWN0b3JfZHZpX2RldGVj
dCgpIChhbWRncHVfY29ubmVjdG9yLmMpCgpJbiBhbWRncHVfY29ubmVjdG9yX2R2aV9kZXRlY3Qo
KSBmdW5jdGlvbiwKVGhlIGhwZCBzdGF0dXMgd2FzIGNvcnJlY3RseSB0aHJvdWdoIHRoZSBhbWRn
cHVfZGlzcGxheV9ocGRfc2VuY2UoKSwKYnV0IHRoZSBkZGMgcHJvYmUgb3BlcmF0aW9uIGlzIHN1
Y2Nlc3NlZCB2aWEKYW1kZ3B1X2Rpc3BsYXlfZGRjX3Byb2JlKCkKCkkgYW0gc28gY29uZnVzZWQu
CgpJcyBpdCBhIG5vcm1hbCBiZWhhdmlvcj8KCkkgaGF2ZSB3cml0dGVuIGEgd29ya2Fyb3VuZCBw
YXRjaCB0byBmaXggdGhpcyBwcm9ibGVtLgoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9jb25uZWN0b3JzLmMKYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfY29ubmVjdG9ycy5jCmluZGV4IGM3NzBkNzMzNTJhNy4uNDgwOWNlYjU2ZjVlIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY29ubmVjdG9ycy5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jb25uZWN0b3JzLmMKQEAg
LTk3NSw3ICs5NzUsNyBAQCBhbWRncHVfY29ubmVjdG9yX2R2aV9kZXRlY3Qoc3RydWN0IGRybV9j
b25uZWN0b3IKKmNvbm5lY3RvciwgYm9vbCBmb3JjZSkKICAgICAgICBjb25zdCBzdHJ1Y3QgZHJt
X2VuY29kZXJfaGVscGVyX2Z1bmNzICplbmNvZGVyX2Z1bmNzOwogICAgICAgIGludCByOwogICAg
ICAgIGVudW0gZHJtX2Nvbm5lY3Rvcl9zdGF0dXMgcmV0ID0gY29ubmVjdG9yX3N0YXR1c19kaXNj
b25uZWN0ZWQ7Ci0gICAgICAgYm9vbCBkcmV0ID0gZmFsc2UsIGJyb2tlbl9lZGlkID0gZmFsc2U7
CisgICAgICAgYm9vbCBkcmV0ID0gZmFsc2UsIGJyb2tlbl9lZGlkID0gZmFsc2UsIHVua25vd25f
c3RhdHVzID0gZmFsc2U7CgogICAgICAgIGlmICghZHJtX2ttc19oZWxwZXJfaXNfcG9sbF93b3Jr
ZXIoKSkgewogICAgICAgICAgICAgICAgciA9IHBtX3J1bnRpbWVfZ2V0X3N5bmMoY29ubmVjdG9y
LT5kZXYtPmRldik7CkBAIC05OTAsNyArOTkwLDExIEBAIGFtZGdwdV9jb25uZWN0b3JfZHZpX2Rl
dGVjdChzdHJ1Y3QgZHJtX2Nvbm5lY3RvcgoqY29ubmVjdG9yLCBib29sIGZvcmNlKQoKICAgICAg
ICBpZiAoYW1kZ3B1X2Nvbm5lY3Rvci0+ZGRjX2J1cykKICAgICAgICAgICAgICAgIGRyZXQgPSBh
bWRncHVfZGlzcGxheV9kZGNfcHJvYmUoYW1kZ3B1X2Nvbm5lY3RvciwgZmFsc2UpOwotICAgICAg
IGlmIChkcmV0KSB7CisKKyAgICAgICBpZiAoIWFtZGdwdV9kaXNwbGF5X2hwZF9zZW5zZShhZGV2
LCBhbWRncHVfY29ubmVjdG9yLT5ocGQuaHBkKSkKKyAgICAgICAgICAgICAgIHVua25vd25fc3Rh
dHVzID0gdHJ1ZTsKKworICAgICAgIGlmIChkcmV0ICYmICF1bmtub3duX3N0YXR1cykgewogICAg
ICAgICAgICAgICAgYW1kZ3B1X2Nvbm5lY3Rvci0+ZGV0ZWN0ZWRfYnlfbG9hZCA9IGZhbHNlOwog
ICAgICAgICAgICAgICAgYW1kZ3B1X2Nvbm5lY3Rvcl9mcmVlX2VkaWQoY29ubmVjdG9yKTsKICAg
ICAgICAgICAgICAgIGFtZGdwdV9jb25uZWN0b3JfZ2V0X2VkaWQoY29ubmVjdG9yKTsKCklzIGl0
IGNvcnJlY3Rsee+8nwoKLS0gCllvdSBhcmUgcmVjZWl2aW5nIHRoaXMgbWFpbCBiZWNhdXNlOgpZ
b3UgYXJlIHdhdGNoaW5nIHRoZSBhc3NpZ25lZSBvZiB0aGUgYnVnLgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRy
aS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
