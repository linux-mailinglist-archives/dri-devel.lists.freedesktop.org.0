Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D23EA10CC6D
	for <lists+dri-devel@lfdr.de>; Thu, 28 Nov 2019 17:03:27 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 554476E853;
	Thu, 28 Nov 2019 16:03:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x444.google.com (mail-wr1-x444.google.com
 [IPv6:2a00:1450:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EB0046E850
 for <dri-devel@lists.freedesktop.org>; Thu, 28 Nov 2019 16:03:20 +0000 (UTC)
Received: by mail-wr1-x444.google.com with SMTP id w15so807120wru.4
 for <dri-devel@lists.freedesktop.org>; Thu, 28 Nov 2019 08:03:20 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=lOL2WwXKMkqlZX6wUQQ6MwqMeR5NI46AhAiQFt0R8fk=;
 b=l737nuF8Nymh5wPeB4DiahNhNlDxAcJQXH8ZuzE8aDFu+67N9yokIr5JYqsftIDfBx
 VZsnqFNN51DvMvhmXtYELwVvLJoAB1cy4eE5uQOkk4KNPpB16r45pXtLQCLw9pPruRFl
 IblnagMT3qeUblhJLHrPxKUTpYLz8tIWOyOynCOTGLvsn/HHywY+hhQBe8tC+luOZpyO
 0eT1F3rToGBfNj0dFszSpKvV7J2tOq9N4BUzu3mjiUDMzcJ+rrzVQW5ooWztmTEUbs9g
 woXIIrICNZqf2dHQWyrIAcw44lyRXAhmyMekJWwoqcEa9GDAuJZWoVBn5pU2OV0+Kc43
 osZw==
X-Gm-Message-State: APjAAAUz9RHTRc21znC7Omb7P9sZ7p3cugrlTsHNHrr9DtUQKonzOLx4
 xJ/2AyshyKXG51II92jPrdw=
X-Google-Smtp-Source: APXvYqwURFbvadsjM8yhtZLmDVxnsZK14DaAfPq8tFyanA5Uc6CobSzma1LQagRMoEn6yPCP6+rw1g==
X-Received: by 2002:a5d:4602:: with SMTP id t2mr3193411wrq.37.1574956999474;
 Thu, 28 Nov 2019 08:03:19 -0800 (PST)
Received: from localhost (pD9E518ED.dip0.t-ipconnect.de. [217.229.24.237])
 by smtp.gmail.com with ESMTPSA id g21sm25945451wrb.48.2019.11.28.08.03.18
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 28 Nov 2019 08:03:18 -0800 (PST)
From: Thierry Reding <thierry.reding@gmail.com>
To: "Rafael J . Wysocki" <rjw@rjwysocki.net>,
 Thierry Reding <thierry.reding@gmail.com>
Subject: [PATCH 1/2] PM / runtime: Allow drivers to override runtime PM
 behaviour on sleep
Date: Thu, 28 Nov 2019 17:03:13 +0100
Message-Id: <20191128160314.2381249-2-thierry.reding@gmail.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191128160314.2381249-1-thierry.reding@gmail.com>
References: <20191128160314.2381249-1-thierry.reding@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=lOL2WwXKMkqlZX6wUQQ6MwqMeR5NI46AhAiQFt0R8fk=;
 b=c+nu4vtO+mJqL0W7fDFWd80nKNeQXZLNC4avT3H6DFtFBCKsCNI+/Xcx5u4Moz0mef
 tJX7I0vKqGfiiOwHmcsLPZiq+Bp+miZivn9I373iV+5nYjNdXGBooV5dAgZA42sDhBwp
 RAa9lySbVenpLPBcb+PDI02gGZ8/5AXVgh4FOusBKTYSCpujI4W41Bvs9lx/xnxui1cL
 p9VF9R1U4n64Q8PpMdtKtB1hlxB7KJ2lO3ognuM2fPLDFePLcSNYbsYl+lvmlh1Mnwak
 Fuj8IkSGxCWqrWo/PSCUqxm49SSEoja5dmdGHp8oWKmzKkDyy4u/5Pfirmocc+uPzN0V
 o9iw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Len Brown <len.brown@intel.com>, linux-pm@vger.kernel.org,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 dri-devel@lists.freedesktop.org, Pavel Machek <pavel@ucw.cz>,
 linux-tegra@vger.kernel.org, Dmitry Osipenko <digetx@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVGhpZXJyeSBSZWRpbmcgPHRyZWRpbmdAbnZpZGlhLmNvbT4KCkN1cnJlbnRseSB0aGUg
ZHJpdmVyIFBNIGNvcmUgd2lsbCBhdXRvbWF0aWNhbGx5IGFjcXVpcmUgYSBydW50aW1lIFBNCnJl
ZmVyZW5jZSBmb3IgZGV2aWNlcyBiZWZvcmUgc3lzdGVtIHNsZWVwIGlzIGVudGVyZWQuIFRoaXMg
aXMgbmVlZGVkCnRvIGF2b2lkIHBvdGVudGlhbCBpc3N1ZXMgcmVsYXRlZCB0byBkZXZpY2VzJyBw
YXJlbnRzIGdldHRpbmcgcHV0IHRvCnJ1bnRpbWUgc3VzcGVuZCBhdCB0aGUgd3JvbmcgdGltZSBh
bmQgY2F1c2luZyBwcm9ibGVtcyB3aXRoIHRoZWlyCmNoaWxkcmVuLgoKSW4gc29tZSBjYXNlcyBk
cml2ZXJzIGFyZSBjYXJlZnVsbHkgd3JpdHRlbiB0byBhdm9pZCBzdWNoIGlzc3VlcyBhbmQKdGhl
IGRlZmF1bHQgYmVoYXZpb3VyIGNhbiBiZSBjaGFuZ2VkIHRvIGFsbG93IHJ1bnRpbWUgUE0gdG8g
b3BlcmF0ZQpyZWd1bGFybHkgZHVyaW5nIHN5c3RlbSBzbGVlcC4KCkFkZCBoZWxwZXJzIHRvIGZs
YWcgZGV2aWNlcyBhcyBiZWluZyBzYWZlIHRvIGJlIHJ1bnRpbWUgc3VzcGVuZGVkIGF0CnN5c3Rl
bSBzbGVlcCB0aW1lLgoKU2lnbmVkLW9mZi1ieTogVGhpZXJyeSBSZWRpbmcgPHRyZWRpbmdAbnZp
ZGlhLmNvbT4KLS0tCiBkcml2ZXJzL2Jhc2UvcG93ZXIvbWFpbi5jICAgIHwgIDYgKysrKy0tCiBk
cml2ZXJzL2Jhc2UvcG93ZXIvcnVudGltZS5jIHwgMTYgKysrKysrKysrKysrKysrKwogaW5jbHVk
ZS9saW51eC9wbS5oICAgICAgICAgICB8ICAxICsKIGluY2x1ZGUvbGludXgvcG1fcnVudGltZS5o
ICAgfCAgMiArKwogNCBmaWxlcyBjaGFuZ2VkLCAyMyBpbnNlcnRpb25zKCspLCAyIGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvYmFzZS9wb3dlci9tYWluLmMgYi9kcml2ZXJzL2Jh
c2UvcG93ZXIvbWFpbi5jCmluZGV4IDEzNGE4YWY1MTUxMS4uZjhkYmYwMGM3MDNiIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2Jhc2UvcG93ZXIvbWFpbi5jCisrKyBiL2RyaXZlcnMvYmFzZS9wb3dlci9t
YWluLmMKQEAgLTExMTMsNyArMTExMyw4IEBAIHN0YXRpYyB2b2lkIGRldmljZV9jb21wbGV0ZShz
dHJ1Y3QgZGV2aWNlICpkZXYsIHBtX21lc3NhZ2VfdCBzdGF0ZSkKIAogCWRldmljZV91bmxvY2so
ZGV2KTsKIAotCXBtX3J1bnRpbWVfcHV0KGRldik7CisJaWYgKCFkZXYtPnBvd2VyLmFsd2F5c19y
dW50aW1lKQorCQlwbV9ydW50aW1lX3B1dChkZXYpOwogfQogCiAvKioKQEAgLTE4OTYsNyArMTg5
Nyw4IEBAIHN0YXRpYyBpbnQgZGV2aWNlX3ByZXBhcmUoc3RydWN0IGRldmljZSAqZGV2LCBwbV9t
ZXNzYWdlX3Qgc3RhdGUpCiAJICogYmxvY2sgcnVudGltZSBzdXNwZW5kIGhlcmUsIGR1cmluZyB0
aGUgcHJlcGFyZSBwaGFzZSwgYW5kIGFsbG93CiAJICogaXQgYWdhaW4gZHVyaW5nIHRoZSBjb21w
bGV0ZSBwaGFzZS4KIAkgKi8KLQlwbV9ydW50aW1lX2dldF9ub3Jlc3VtZShkZXYpOworCWlmICgh
ZGV2LT5wb3dlci5hbHdheXNfcnVudGltZSkKKwkJcG1fcnVudGltZV9nZXRfbm9yZXN1bWUoZGV2
KTsKIAogCWRldmljZV9sb2NrKGRldik7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvYmFzZS9wb3dl
ci9ydW50aW1lLmMgYi9kcml2ZXJzL2Jhc2UvcG93ZXIvcnVudGltZS5jCmluZGV4IDQ4NjE2ZjM1
ODg1NC4uNjk5ODAzOTg0NDI2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2Jhc2UvcG93ZXIvcnVudGlt
ZS5jCisrKyBiL2RyaXZlcnMvYmFzZS9wb3dlci9ydW50aW1lLmMKQEAgLTE0NDAsNiArMTQ0MCwy
MiBAQCB2b2lkIHBtX3J1bnRpbWVfYWxsb3coc3RydWN0IGRldmljZSAqZGV2KQogfQogRVhQT1JU
X1NZTUJPTF9HUEwocG1fcnVudGltZV9hbGxvdyk7CiAKK3ZvaWQgcG1fcnVudGltZV9hbHdheXNf
YWxsb3coc3RydWN0IGRldmljZSAqZGV2KQoreworCXNwaW5fbG9ja19pcnEoJmRldi0+cG93ZXIu
bG9jayk7CisJZGV2LT5wb3dlci5hbHdheXNfcnVudGltZSA9IDE7CisJc3Bpbl91bmxvY2tfaXJx
KCZkZXYtPnBvd2VyLmxvY2spOworfQorRVhQT1JUX1NZTUJPTF9HUEwocG1fcnVudGltZV9hbHdh
eXNfYWxsb3cpOworCit2b2lkIHBtX3J1bnRpbWVfYWx3YXlzX2ZvcmJpZChzdHJ1Y3QgZGV2aWNl
ICpkZXYpCit7CisJc3Bpbl9sb2NrX2lycSgmZGV2LT5wb3dlci5sb2NrKTsKKwlkZXYtPnBvd2Vy
LmFsd2F5c19ydW50aW1lID0gMDsKKwlzcGluX3VubG9ja19pcnEoJmRldi0+cG93ZXIubG9jayk7
Cit9CitFWFBPUlRfU1lNQk9MX0dQTChwbV9ydW50aW1lX2Fsd2F5c19mb3JiaWQpOworCiAvKioK
ICAqIHBtX3J1bnRpbWVfbm9fY2FsbGJhY2tzIC0gSWdub3JlIHJ1bnRpbWUgUE0gY2FsbGJhY2tz
IGZvciBhIGRldmljZS4KICAqIEBkZXY6IERldmljZSB0byBoYW5kbGUuCmRpZmYgLS1naXQgYS9p
bmNsdWRlL2xpbnV4L3BtLmggYi9pbmNsdWRlL2xpbnV4L3BtLmgKaW5kZXggZTA1N2QxZmEyNDY5
Li42MTMzY2Y0OTY4NzggMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvcG0uaAorKysgYi9pbmNs
dWRlL2xpbnV4L3BtLmgKQEAgLTYxNSw2ICs2MTUsNyBAQCBzdHJ1Y3QgZGV2X3BtX2luZm8gewog
CXVuc2lnbmVkIGludAkJdXNlX2F1dG9zdXNwZW5kOjE7CiAJdW5zaWduZWQgaW50CQl0aW1lcl9h
dXRvc3VzcGVuZHM6MTsKIAl1bnNpZ25lZCBpbnQJCW1lbWFsbG9jX25vaW86MTsKKwl1bnNpZ25l
ZCBpbnQJCWFsd2F5c19ydW50aW1lOjE7CiAJdW5zaWduZWQgaW50CQlsaW5rc19jb3VudDsKIAll
bnVtIHJwbV9yZXF1ZXN0CXJlcXVlc3Q7CiAJZW51bSBycG1fc3RhdHVzCQlydW50aW1lX3N0YXR1
czsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvcG1fcnVudGltZS5oIGIvaW5jbHVkZS9saW51
eC9wbV9ydW50aW1lLmgKaW5kZXggMjJhZjY5ZDIzN2E2Li4yODIwNGJhZjAxY2IgMTAwNjQ0Ci0t
LSBhL2luY2x1ZGUvbGludXgvcG1fcnVudGltZS5oCisrKyBiL2luY2x1ZGUvbGludXgvcG1fcnVu
dGltZS5oCkBAIC00Niw2ICs0Niw4IEBAIGV4dGVybiB2b2lkIHBtX3J1bnRpbWVfZW5hYmxlKHN0
cnVjdCBkZXZpY2UgKmRldik7CiBleHRlcm4gdm9pZCBfX3BtX3J1bnRpbWVfZGlzYWJsZShzdHJ1
Y3QgZGV2aWNlICpkZXYsIGJvb2wgY2hlY2tfcmVzdW1lKTsKIGV4dGVybiB2b2lkIHBtX3J1bnRp
bWVfYWxsb3coc3RydWN0IGRldmljZSAqZGV2KTsKIGV4dGVybiB2b2lkIHBtX3J1bnRpbWVfZm9y
YmlkKHN0cnVjdCBkZXZpY2UgKmRldik7CitleHRlcm4gdm9pZCBwbV9ydW50aW1lX2Fsd2F5c19h
bGxvdyhzdHJ1Y3QgZGV2aWNlICpkZXYpOworZXh0ZXJuIHZvaWQgcG1fcnVudGltZV9hbHdheXNf
Zm9yYmlkKHN0cnVjdCBkZXZpY2UgKmRldik7CiBleHRlcm4gdm9pZCBwbV9ydW50aW1lX25vX2Nh
bGxiYWNrcyhzdHJ1Y3QgZGV2aWNlICpkZXYpOwogZXh0ZXJuIHZvaWQgcG1fcnVudGltZV9pcnFf
c2FmZShzdHJ1Y3QgZGV2aWNlICpkZXYpOwogZXh0ZXJuIHZvaWQgX19wbV9ydW50aW1lX3VzZV9h
dXRvc3VzcGVuZChzdHJ1Y3QgZGV2aWNlICpkZXYsIGJvb2wgdXNlKTsKLS0gCjIuMjMuMAoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1h
aWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
