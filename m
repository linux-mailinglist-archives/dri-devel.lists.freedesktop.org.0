Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8863FFB581
	for <lists+dri-devel@lfdr.de>; Wed, 13 Nov 2019 17:45:21 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id ABEC16EDA2;
	Wed, 13 Nov 2019 16:45:12 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from us-smtp-1.mimecast.com (us-smtp-delivery-1.mimecast.com
 [207.211.31.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B4DAA6EDA8
 for <dri-devel@lists.freedesktop.org>; Wed, 13 Nov 2019 16:45:04 +0000 (UTC)
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-383-qrG2mlEgN9628AM_7P0Ubw-1; Wed, 13 Nov 2019 11:45:00 -0500
Received: from smtp.corp.redhat.com (int-mx07.intmail.prod.int.phx2.redhat.com
 [10.5.11.22])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 6E72215A075;
 Wed, 13 Nov 2019 16:44:58 +0000 (UTC)
Received: from shalem.localdomain.com (ovpn-116-143.ams2.redhat.com
 [10.36.116.143])
 by smtp.corp.redhat.com (Postfix) with ESMTP id CC4EF10E1B43;
 Wed, 13 Nov 2019 16:44:56 +0000 (UTC)
From: Hans de Goede <hdegoede@redhat.com>
To: Maxime Ripard <mripard@kernel.org>, Sean Paul <seanpaul@chromium.org>,
 Daniel Vetter <daniel.vetter@intel.com>, David Airlie <airlied@linux.ie>
Subject: [PATCH v2 12/13] drm/connector: Split out orientation quirk detection
 (v2)
Date: Wed, 13 Nov 2019 17:44:33 +0100
Message-Id: <20191113164434.254159-12-hdegoede@redhat.com>
In-Reply-To: <20191113164434.254159-1-hdegoede@redhat.com>
References: <20191113164434.254159-1-hdegoede@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.22
X-MC-Unique: qrG2mlEgN9628AM_7P0Ubw-1
X-Mimecast-Spam-Score: 0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=redhat.com; 
 s=mimecast20190719; t=1573663503;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=isu3JRV9tDwzb3bfh4BKCCPJFxm/kZRklk1TpT0+i9k=;
 b=WKtcuQf6C+IVL85Sjy9eAhcdRfmsrf1cRAF7j3M5bLWyBV5tnVz1y1RDVwnJWrBT7/5EfY
 JqUjw/gzl0hbNhxkuUD5OKw9gc4Utjy33542lrgxhH/XgvEeIeaTQYjPoOCqZ03i/5T4sR
 iJt2BSdPa5QfNNGXP8k4mwUHoxk/oRk=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hans de Goede <hdegoede@redhat.com>,
 Derek Basehore <dbasehore@chromium.org>,
 =?UTF-8?q?Mathieu=20Alexandre-T=C3=A9treault?= <alexandretm@amotus.ca>,
 dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogRGVyZWsgQmFzZWhvcmUgPGRiYXNlaG9yZUBjaHJvbWl1bS5vcmc+CgpOb3QgZXZlcnkg
cGxhdGZvcm0gbmVlZHMgcXVpcmsgZGV0ZWN0aW9uIGZvciBwYW5lbCBvcmllbnRhdGlvbiwgc28K
c3BsaXQgdGhlIGRybV9jb25uZWN0b3JfaW5pdF9wYW5lbF9vcmllbnRhdGlvbl9wcm9wZXJ0eSBp
bnRvIHR3bwpmdW5jdGlvbnMuIE9uZSBmb3IgcGxhdGZvcm1zIHdpdGhvdXQgdGhlIG5lZWQgZm9y
IHF1aXJrcywgYW5kIHRoZQpvdGhlciBmb3IgcGxhdGZvcm1zIHRoYXQgbmVlZCBxdWlya3MuCgpI
YW5zIGRlIEdvZWRlIChjaGFuZ2VzIGluIHYyKToKClJlbmFtZSB0aGUgZnVuY3Rpb24gZnJvbSBk
cm1fY29ubmVjdG9yX2luaXRfcGFuZWxfb3JpZW50YXRpb25fcHJvcGVydHkKdG8gZHJtX2Nvbm5l
Y3Rvcl9zZXRfcGFuZWxfb3JpZW50YXRpb25bX3dpdGhfcXVpcmtdIGFuZCBwYXNzIGluIHRoZQpw
YW5lbC1vcmllbnRhdGlvbiB0byBzZXQuCgpCZXNpZGUgdGhlIHJlbmFtZSwgYWxzbyBtYWtlIHRo
ZSBmdW5jdGlvbiBzZXQgdGhlIHBhc3NlZCBpbiB2YWx1ZQpvbmx5IG9uY2UsIGlmIHRoZSB2YWx1
ZSB3YXMgc2V0IGJlZm9yZSAodG8gYSB2YWx1ZSBvdGhlciB0aGVuCkRSTV9NT0RFX1BBTkVMX09S
SUVOVEFUSU9OX1VOS05PV04pIG1ha2UgYW55IGZ1cnRoZXIgc2V0IGNhbGxzIGEgbm8tb3AuCgpU
aGlzIGNoYW5nZSBpcyBwcmVwYXJhdGlvbiBmb3IgYWxsb3dpbmcgdGhlIHVzZXIgdG8gb3ZlcnJp
ZGUgdGhlCnBhbmVsLW9yaWVudGF0aW9uIGZvciBhbnkgY29ubmVjdG9yIGZyb20gdGhlIGtlcm5l
bCBjb21tYW5kbGluZS4KV2hlbiB0aGUgcGFuZWwtb3JpZW50YXRpb24gaXMgb3ZlcnJpZGRlbiB0
aGlzIHdheSwgdGhlbiB3ZSBtdXN0IGlnbm9yZQp0aGUgcGFuZWwtb3JpZW50YXRpb24gZGV0ZWN0
aW9uIGRvbmUgYnkgdGhlIGRyaXZlci4KClNpZ25lZC1vZmYtYnk6IERlcmVrIEJhc2Vob3JlIDxk
YmFzZWhvcmVAY2hyb21pdW0ub3JnPgpTaWduZWQtb2ZmLWJ5OiBIYW5zIGRlIEdvZWRlIDxoZGVn
b2VkZUByZWRoYXQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fY29ubmVjdG9yLmMgICAg
ICAgICB8IDc0ICsrKysrKysrKysrKysrKysrKy0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaWNsX2RzaS5jICB8ICA1ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2RwLmMgfCAgOSArKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvdmx2X2Rz
aS5jICB8ICA1ICstCiBpbmNsdWRlL2RybS9kcm1fY29ubmVjdG9yLmggICAgICAgICAgICAgfCAg
OSArKy0KIDUgZmlsZXMgY2hhbmdlZCwgNzEgaW5zZXJ0aW9ucygrKSwgMzEgZGVsZXRpb25zKC0p
CgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYyBiL2RyaXZlcnMv
Z3B1L2RybS9kcm1fY29ubmVjdG9yLmMKaW5kZXggNGM3NjY2MjRiMjBkLi40MGE5ODVjNDExYTYg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fY29ubmVjdG9yLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYwpAQCAtMTExNCw3ICsxMTE0LDggQEAgc3RhdGljIGNv
bnN0IHN0cnVjdCBkcm1fcHJvcF9lbnVtX2xpc3QgaGRtaV9jb2xvcnNwYWNlc1tdID0gewogICoJ
Y29vcmRpbmF0ZXMsIHNvIGlmIHVzZXJzcGFjZSByb3RhdGVzIHRoZSBwaWN0dXJlIHRvIGFkanVz
dCBmb3IKICAqCXRoZSBvcmllbnRhdGlvbiBpdCBtdXN0IGFsc28gYXBwbHkgdGhlIHNhbWUgdHJh
bnNmb3JtYXRpb24gdG8gdGhlCiAgKgl0b3VjaHNjcmVlbiBpbnB1dCBjb29yZGluYXRlcy4gVGhp
cyBwcm9wZXJ0eSBpcyBpbml0aWFsaXplZCBieSBjYWxsaW5nCi0gKglkcm1fY29ubmVjdG9yX2lu
aXRfcGFuZWxfb3JpZW50YXRpb25fcHJvcGVydHkoKS4KKyAqCWRybV9jb25uZWN0b3Jfc2V0X3Bh
bmVsX29yaWVudGF0aW9uKCkgb3IKKyAqCWRybV9jb25uZWN0b3Jfc2V0X3BhbmVsX29yaWVudGF0
aW9uX3dpdGhfcXVpcmsoKQogICoKICAqIHNjYWxpbmcgbW9kZToKICAqCVRoaXMgcHJvcGVydHkg
ZGVmaW5lcyBob3cgYSBub24tbmF0aXZlIG1vZGUgaXMgdXBzY2FsZWQgdG8gdGhlIG5hdGl2ZQpA
QCAtMTk4NiwzOCArMTk4Nyw0MSBAQCB2b2lkIGRybV9jb25uZWN0b3Jfc2V0X3Zycl9jYXBhYmxl
X3Byb3BlcnR5KAogRVhQT1JUX1NZTUJPTChkcm1fY29ubmVjdG9yX3NldF92cnJfY2FwYWJsZV9w
cm9wZXJ0eSk7CiAKIC8qKgotICogZHJtX2Nvbm5lY3Rvcl9pbml0X3BhbmVsX29yaWVudGF0aW9u
X3Byb3BlcnR5IC0KLSAqCWluaXRpYWxpemUgdGhlIGNvbm5lY3RlcnMgcGFuZWxfb3JpZW50YXRp
b24gcHJvcGVydHkKLSAqIEBjb25uZWN0b3I6IGNvbm5lY3RvciBmb3Igd2hpY2ggdG8gaW5pdCB0
aGUgcGFuZWwtb3JpZW50YXRpb24gcHJvcGVydHkuCi0gKiBAd2lkdGg6IHdpZHRoIGluIHBpeGVs
cyBvZiB0aGUgcGFuZWwsIHVzZWQgZm9yIHBhbmVsIHF1aXJrIGRldGVjdGlvbgotICogQGhlaWdo
dDogaGVpZ2h0IGluIHBpeGVscyBvZiB0aGUgcGFuZWwsIHVzZWQgZm9yIHBhbmVsIHF1aXJrIGRl
dGVjdGlvbgorICogZHJtX2Nvbm5lY3Rvcl9zZXRfcGFuZWxfb3JpZW50YXRpb24gLSBzZXRzIHRo
ZSBjb25uZWN0ZXIncyBwYW5lbF9vcmllbnRhdGlvbgorICogQGNvbm5lY3RvcjogY29ubmVjdG9y
IGZvciB3aGljaCB0byBzZXQgdGhlIHBhbmVsLW9yaWVudGF0aW9uIHByb3BlcnR5LgorICogQHBh
bmVsX29yaWVudGF0aW9uOiBkcm1fcGFuZWxfb3JpZW50YXRpb24gdmFsdWUgdG8gc2V0CisgKgor
ICogVGhpcyBmdW5jdGlvbiBzZXRzIHRoZSBjb25uZWN0b3IncyBwYW5lbF9vcmllbnRhdGlvbiBh
bmQgYXR0YWNoZXMKKyAqIGEgInBhbmVsIG9yaWVudGF0aW9uIiBwcm9wZXJ0eSB0byB0aGUgY29u
bmVjdG9yLgogICoKLSAqIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZvciBi
dWlsdC1pbiBwYW5lbHMsIGFmdGVyIHNldHRpbmcKLSAqIGNvbm5lY3Rvci0+ZGlzcGxheV9pbmZv
LnBhbmVsX29yaWVudGF0aW9uIGZpcnN0IChpZiBrbm93bikuCisgKiBDYWxsaW5nIHRoaXMgZnVu
Y3Rpb24gb24gYSBjb25uZWN0b3Igd2hlcmUgdGhlIHBhbmVsX29yaWVudGF0aW9uIGhhcworICog
YWxyZWFkeSBiZWVuIHNldCBpcyBhIG5vLW9wIChlLmcuIHRoZSBvcmllbnRhdGlvbiBoYXMgYmVl
biBvdmVycmlkZGVuIHdpdGgKKyAqIGEga2VybmVsIGNvbW1hbmRsaW5lIG9wdGlvbikuCiAgKgot
ICogVGhpcyBmdW5jdGlvbiB3aWxsIGNoZWNrIGZvciBwbGF0Zm9ybSBzcGVjaWZpYyAoZS5nLiBE
TUkgYmFzZWQpIHF1aXJrcwotICogb3ZlcnJpZGluZyBkaXNwbGF5X2luZm8ucGFuZWxfb3JpZW50
YXRpb24gZmlyc3QsIHRoZW4gaWYgcGFuZWxfb3JpZW50YXRpb24KLSAqIGlzIG5vdCBEUk1fTU9E
RV9QQU5FTF9PUklFTlRBVElPTl9VTktOT1dOIGl0IHdpbGwgYXR0YWNoIHRoZQotICogInBhbmVs
IG9yaWVudGF0aW9uIiBwcm9wZXJ0eSB0byB0aGUgY29ubmVjdG9yLgorICogSXQgaXMgYWxsb3dl
ZCB0byBjYWxsIHRoaXMgZnVuY3Rpb24gd2l0aCBhIHBhbmVsX29yaWVudGF0aW9uIG9mCisgKiBE
Uk1fTU9ERV9QQU5FTF9PUklFTlRBVElPTl9VTktOT1dOLCBpbiB3aGljaCBjYXNlIGl0IGlzIGEg
bm8tb3AuCiAgKgogICogUmV0dXJuczoKICAqIFplcm8gb24gc3VjY2VzcywgbmVnYXRpdmUgZXJy
bm8gb24gZmFpbHVyZS4KICAqLwotaW50IGRybV9jb25uZWN0b3JfaW5pdF9wYW5lbF9vcmllbnRh
dGlvbl9wcm9wZXJ0eSgKLQlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLCBpbnQgd2lk
dGgsIGludCBoZWlnaHQpCitpbnQgZHJtX2Nvbm5lY3Rvcl9zZXRfcGFuZWxfb3JpZW50YXRpb24o
CisJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKKwllbnVtIGRybV9wYW5lbF9vcmll
bnRhdGlvbiBwYW5lbF9vcmllbnRhdGlvbikKIHsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0g
Y29ubmVjdG9yLT5kZXY7CiAJc3RydWN0IGRybV9kaXNwbGF5X2luZm8gKmluZm8gPSAmY29ubmVj
dG9yLT5kaXNwbGF5X2luZm87CiAJc3RydWN0IGRybV9wcm9wZXJ0eSAqcHJvcDsKLQlpbnQgb3Jp
ZW50YXRpb25fcXVpcms7CiAKLQlvcmllbnRhdGlvbl9xdWlyayA9IGRybV9nZXRfcGFuZWxfb3Jp
ZW50YXRpb25fcXVpcmsod2lkdGgsIGhlaWdodCk7Ci0JaWYgKG9yaWVudGF0aW9uX3F1aXJrICE9
IERSTV9NT0RFX1BBTkVMX09SSUVOVEFUSU9OX1VOS05PV04pCi0JCWluZm8tPnBhbmVsX29yaWVu
dGF0aW9uID0gb3JpZW50YXRpb25fcXVpcms7CisJLyogQWxyZWFkeSBzZXQ/ICovCisJaWYgKGlu
Zm8tPnBhbmVsX29yaWVudGF0aW9uICE9IERSTV9NT0RFX1BBTkVMX09SSUVOVEFUSU9OX1VOS05P
V04pCisJCXJldHVybiAwOwogCi0JaWYgKGluZm8tPnBhbmVsX29yaWVudGF0aW9uID09IERSTV9N
T0RFX1BBTkVMX09SSUVOVEFUSU9OX1VOS05PV04pCisJLyogRG9uJ3QgYXR0YWNoIHRoZSBwcm9w
ZXJ0eSBpZiB0aGUgb3JpZW50YXRpb24gaXMgdW5rbm93biAqLworCWlmIChwYW5lbF9vcmllbnRh
dGlvbiA9PSBEUk1fTU9ERV9QQU5FTF9PUklFTlRBVElPTl9VTktOT1dOKQogCQlyZXR1cm4gMDsK
IAorCWluZm8tPnBhbmVsX29yaWVudGF0aW9uID0gcGFuZWxfb3JpZW50YXRpb247CisKIAlwcm9w
ID0gZGV2LT5tb2RlX2NvbmZpZy5wYW5lbF9vcmllbnRhdGlvbl9wcm9wZXJ0eTsKIAlpZiAoIXBy
b3ApIHsKIAkJcHJvcCA9IGRybV9wcm9wZXJ0eV9jcmVhdGVfZW51bShkZXYsIERSTV9NT0RFX1BS
T1BfSU1NVVRBQkxFLApAQCAtMjAzNCw3ICsyMDM4LDM3IEBAIGludCBkcm1fY29ubmVjdG9yX2lu
aXRfcGFuZWxfb3JpZW50YXRpb25fcHJvcGVydHkoCiAJCQkJICAgaW5mby0+cGFuZWxfb3JpZW50
YXRpb24pOwogCXJldHVybiAwOwogfQotRVhQT1JUX1NZTUJPTChkcm1fY29ubmVjdG9yX2luaXRf
cGFuZWxfb3JpZW50YXRpb25fcHJvcGVydHkpOworRVhQT1JUX1NZTUJPTChkcm1fY29ubmVjdG9y
X3NldF9wYW5lbF9vcmllbnRhdGlvbik7CisKKy8qKgorICogZHJtX2Nvbm5lY3Rvcl9zZXRfcGFu
ZWxfb3JpZW50YXRpb25fd2l0aF9xdWlyayAtCisgKglzZXQgdGhlIGNvbm5lY3RlcidzIHBhbmVs
X29yaWVudGF0aW9uIGFmdGVyIGNoZWNraW5nIGZvciBxdWlya3MKKyAqIEBjb25uZWN0b3I6IGNv
bm5lY3RvciBmb3Igd2hpY2ggdG8gaW5pdCB0aGUgcGFuZWwtb3JpZW50YXRpb24gcHJvcGVydHku
CisgKiBAcGFuZWxfb3JpZW50YXRpb246IGRybV9wYW5lbF9vcmllbnRhdGlvbiB2YWx1ZSB0byBz
ZXQKKyAqIEB3aWR0aDogd2lkdGggaW4gcGl4ZWxzIG9mIHRoZSBwYW5lbCwgdXNlZCBmb3IgcGFu
ZWwgcXVpcmsgZGV0ZWN0aW9uCisgKiBAaGVpZ2h0OiBoZWlnaHQgaW4gcGl4ZWxzIG9mIHRoZSBw
YW5lbCwgdXNlZCBmb3IgcGFuZWwgcXVpcmsgZGV0ZWN0aW9uCisgKgorICogTGlrZSBkcm1fY29u
bmVjdG9yX3NldF9wYW5lbF9vcmllbnRhdGlvbigpLCBidXQgd2l0aCBhIGNoZWNrIGZvciBwbGF0
Zm9ybQorICogc3BlY2lmaWMgKGUuZy4gRE1JIGJhc2VkKSBxdWlya3Mgb3ZlcnJpZGluZyB0aGUg
cGFzc2VkIGluIHBhbmVsX29yaWVudGF0aW9uLgorICoKKyAqIFJldHVybnM6CisgKiBaZXJvIG9u
IHN1Y2Nlc3MsIG5lZ2F0aXZlIGVycm5vIG9uIGZhaWx1cmUuCisgKi8KK2ludCBkcm1fY29ubmVj
dG9yX3NldF9wYW5lbF9vcmllbnRhdGlvbl93aXRoX3F1aXJrKAorCXN0cnVjdCBkcm1fY29ubmVj
dG9yICpjb25uZWN0b3IsCisJZW51bSBkcm1fcGFuZWxfb3JpZW50YXRpb24gcGFuZWxfb3JpZW50
YXRpb24sCisJaW50IHdpZHRoLCBpbnQgaGVpZ2h0KQoreworCWludCBvcmllbnRhdGlvbl9xdWly
azsKKworCW9yaWVudGF0aW9uX3F1aXJrID0gZHJtX2dldF9wYW5lbF9vcmllbnRhdGlvbl9xdWly
ayh3aWR0aCwgaGVpZ2h0KTsKKwlpZiAob3JpZW50YXRpb25fcXVpcmsgIT0gRFJNX01PREVfUEFO
RUxfT1JJRU5UQVRJT05fVU5LTk9XTikKKwkJcGFuZWxfb3JpZW50YXRpb24gPSBvcmllbnRhdGlv
bl9xdWlyazsKKworCXJldHVybiBkcm1fY29ubmVjdG9yX3NldF9wYW5lbF9vcmllbnRhdGlvbihj
b25uZWN0b3IsCisJCQkJCQkgICBwYW5lbF9vcmllbnRhdGlvbik7Cit9CitFWFBPUlRfU1lNQk9M
KGRybV9jb25uZWN0b3Jfc2V0X3BhbmVsX29yaWVudGF0aW9uX3dpdGhfcXVpcmspOwogCiBpbnQg
ZHJtX2Nvbm5lY3Rvcl9zZXRfb2JqX3Byb3Aoc3RydWN0IGRybV9tb2RlX29iamVjdCAqb2JqLAog
CQkJCSAgICBzdHJ1Y3QgZHJtX3Byb3BlcnR5ICpwcm9wZXJ0eSwKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pY2xfZHNpLmMKaW5kZXggNmUzOThjMzNhNTI0Li44Y2Q1MWNmNjdkMDIgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaWNsX2RzaS5jCkBAIC0xNTM2LDkgKzE1MzYsOCBAQCBz
dGF0aWMgdm9pZCBpY2xfZHNpX2FkZF9wcm9wZXJ0aWVzKHN0cnVjdCBpbnRlbF9jb25uZWN0b3Ig
KmNvbm5lY3RvcikKIAogCWNvbm5lY3Rvci0+YmFzZS5zdGF0ZS0+c2NhbGluZ19tb2RlID0gRFJN
X01PREVfU0NBTEVfQVNQRUNUOwogCi0JY29ubmVjdG9yLT5iYXNlLmRpc3BsYXlfaW5mby5wYW5l
bF9vcmllbnRhdGlvbiA9Ci0JCQlpbnRlbF9kc2lfZ2V0X3BhbmVsX29yaWVudGF0aW9uKGNvbm5l
Y3Rvcik7Ci0JZHJtX2Nvbm5lY3Rvcl9pbml0X3BhbmVsX29yaWVudGF0aW9uX3Byb3BlcnR5KCZj
b25uZWN0b3ItPmJhc2UsCisJZHJtX2Nvbm5lY3Rvcl9zZXRfcGFuZWxfb3JpZW50YXRpb25fd2l0
aF9xdWlyaygmY29ubmVjdG9yLT5iYXNlLAorCQkJCWludGVsX2RzaV9nZXRfcGFuZWxfb3JpZW50
YXRpb24oY29ubmVjdG9yKSwKIAkJCQljb25uZWN0b3ItPnBhbmVsLmZpeGVkX21vZGUtPmhkaXNw
bGF5LAogCQkJCWNvbm5lY3Rvci0+cGFuZWwuZml4ZWRfbW9kZS0+dmRpc3BsYXkpOwogfQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCmluZGV4IDliMTVhYzRmMmZiNi4uN2Jl
N2E1NWY4NzcyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2RwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCkBAIC03
MDkxLDkgKzcwOTEsMTIgQEAgc3RhdGljIGJvb2wgaW50ZWxfZWRwX2luaXRfY29ubmVjdG9yKHN0
cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsCiAJaW50ZWxfY29ubmVjdG9yLT5wYW5lbC5iYWNrbGln
aHQucG93ZXIgPSBpbnRlbF9lZHBfYmFja2xpZ2h0X3Bvd2VyOwogCWludGVsX3BhbmVsX3NldHVw
X2JhY2tsaWdodChjb25uZWN0b3IsIHBpcGUpOwogCi0JaWYgKGZpeGVkX21vZGUpCi0JCWRybV9j
b25uZWN0b3JfaW5pdF9wYW5lbF9vcmllbnRhdGlvbl9wcm9wZXJ0eSgKLQkJCWNvbm5lY3Rvciwg
Zml4ZWRfbW9kZS0+aGRpc3BsYXksIGZpeGVkX21vZGUtPnZkaXNwbGF5KTsKKwlpZiAoZml4ZWRf
bW9kZSkgeworCQkvKiBXZSBkbyBub3Qga25vdyB0aGUgb3JpZW50YXRpb24sIGJ1dCB0aGVpciBt
aWdodCBiZSBhIHF1aXJrICovCisJCWRybV9jb25uZWN0b3Jfc2V0X3BhbmVsX29yaWVudGF0aW9u
X3dpdGhfcXVpcmsoY29ubmVjdG9yLAorCQkJCURSTV9NT0RFX1BBTkVMX09SSUVOVEFUSU9OX1VO
S05PV04sCisJCQkJZml4ZWRfbW9kZS0+aGRpc3BsYXksIGZpeGVkX21vZGUtPnZkaXNwbGF5KTsK
Kwl9CiAKIAlyZXR1cm4gdHJ1ZTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS92bHZfZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L3Zsdl9kc2ku
YwppbmRleCBhNzFiMjJiZGQ5NWIuLmZiYjliOTQyZWQ5MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS92bHZfZHNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS92bHZfZHNpLmMKQEAgLTE2MzIsMTAgKzE2MzIsOSBAQCBzdGF0aWMgdm9pZCB2bHZf
ZHNpX2FkZF9wcm9wZXJ0aWVzKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAog
CQljb25uZWN0b3ItPmJhc2Uuc3RhdGUtPnNjYWxpbmdfbW9kZSA9IERSTV9NT0RFX1NDQUxFX0FT
UEVDVDsKIAotCQljb25uZWN0b3ItPmJhc2UuZGlzcGxheV9pbmZvLnBhbmVsX29yaWVudGF0aW9u
ID0KLQkJCXZsdl9kc2lfZ2V0X3BhbmVsX29yaWVudGF0aW9uKGNvbm5lY3Rvcik7Ci0JCWRybV9j
b25uZWN0b3JfaW5pdF9wYW5lbF9vcmllbnRhdGlvbl9wcm9wZXJ0eSgKKwkJZHJtX2Nvbm5lY3Rv
cl9zZXRfcGFuZWxfb3JpZW50YXRpb25fd2l0aF9xdWlyaygKIAkJCQkmY29ubmVjdG9yLT5iYXNl
LAorCQkJCXZsdl9kc2lfZ2V0X3BhbmVsX29yaWVudGF0aW9uKGNvbm5lY3RvciksCiAJCQkJY29u
bmVjdG9yLT5wYW5lbC5maXhlZF9tb2RlLT5oZGlzcGxheSwKIAkJCQljb25uZWN0b3ItPnBhbmVs
LmZpeGVkX21vZGUtPnZkaXNwbGF5KTsKIAl9CmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1f
Y29ubmVjdG9yLmggYi9pbmNsdWRlL2RybS9kcm1fY29ubmVjdG9yLmgKaW5kZXggM2ZiY2Y3ZDNm
Y2FmLi5mN2YwMmY1OGY1YTcgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL2RybV9jb25uZWN0b3Iu
aAorKysgYi9pbmNsdWRlL2RybS9kcm1fY29ubmVjdG9yLmgKQEAgLTE1NDcsOCArMTU0NywxMyBA
QCB2b2lkIGRybV9jb25uZWN0b3Jfc2V0X2xpbmtfc3RhdHVzX3Byb3BlcnR5KHN0cnVjdCBkcm1f
Y29ubmVjdG9yICpjb25uZWN0b3IsCiAJCQkJCSAgICB1aW50NjRfdCBsaW5rX3N0YXR1cyk7CiB2
b2lkIGRybV9jb25uZWN0b3Jfc2V0X3Zycl9jYXBhYmxlX3Byb3BlcnR5KAogCQlzdHJ1Y3QgZHJt
X2Nvbm5lY3RvciAqY29ubmVjdG9yLCBib29sIGNhcGFibGUpOwotaW50IGRybV9jb25uZWN0b3Jf
aW5pdF9wYW5lbF9vcmllbnRhdGlvbl9wcm9wZXJ0eSgKLQlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAq
Y29ubmVjdG9yLCBpbnQgd2lkdGgsIGludCBoZWlnaHQpOworaW50IGRybV9jb25uZWN0b3Jfc2V0
X3BhbmVsX29yaWVudGF0aW9uKAorCXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCisJ
ZW51bSBkcm1fcGFuZWxfb3JpZW50YXRpb24gcGFuZWxfb3JpZW50YXRpb24pOworaW50IGRybV9j
b25uZWN0b3Jfc2V0X3BhbmVsX29yaWVudGF0aW9uX3dpdGhfcXVpcmsoCisJc3RydWN0IGRybV9j
b25uZWN0b3IgKmNvbm5lY3RvciwKKwllbnVtIGRybV9wYW5lbF9vcmllbnRhdGlvbiBwYW5lbF9v
cmllbnRhdGlvbiwKKwlpbnQgd2lkdGgsIGludCBoZWlnaHQpOwogaW50IGRybV9jb25uZWN0b3Jf
YXR0YWNoX21heF9icGNfcHJvcGVydHkoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwK
IAkJCQkJICBpbnQgbWluLCBpbnQgbWF4KTsKIAotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRy
aS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
