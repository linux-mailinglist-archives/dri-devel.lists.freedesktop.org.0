Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BCC9061EFB
	for <lists+dri-devel@lfdr.de>; Mon,  8 Jul 2019 14:54:29 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D59C788AA0;
	Mon,  8 Jul 2019 12:54:26 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EDD0788AA0;
 Mon,  8 Jul 2019 12:54:24 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 08 Jul 2019 05:54:24 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,466,1557212400"; d="scan'208";a="248807730"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga001.jf.intel.com with SMTP; 08 Jul 2019 05:54:21 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Mon, 08 Jul 2019 15:54:20 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Subject: [PATCH 18/19] drm/i915: Add support for half float framebuffers for
 ivb+ sprites
Date: Mon,  8 Jul 2019 15:53:24 +0300
Message-Id: <20190708125325.16576-19-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190708125325.16576-1-ville.syrjala@linux.intel.com>
References: <20190708125325.16576-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCml2
Yisgc3VwcG9ydHMgZnAxNiBwaXhlbCBmb3JtYXRzIG9uIHRoZSBzcHJpdGUgcGxhbmVzIHBsYW5l
cy4gRXhwb3NlCnRoYXQgY2FwYWJpbGl0eS4KCk9uIGl2Yi9oc3cgZnAxNiBzY2Fub3V0IGlzIHNs
aWdodGx5IGJ1c3RlZC4gVGhlIG91dHB1dCBmcm9tIHRoZSBwbGFuZQp3aWxsIGhhdmUgMS80IHRo
ZSBleHBlY3RlZCB2YWx1ZS4gRm9yIHRoZSBzcHJpdGUgcGxhbmUgd2UgY2FuIGZpeCB0aGF0CnVw
IHdpdGggdGhlIHBsYW5lIGdhbW1hIHVuaXQuIFRoaXMgd2FzIGZpeGVkIG9uIGJkdy4KCnYyOiBS
ZWJhc2Ugb24gdG9wIG9mIGljbCBmcDE2CiAgICBTcGxpdCB0aGUgaXZiKyBzcHJpdGUgYmlycyBp
bnRvIGEgc2VwYXJhdGUgcGF0Y2gKdjM6IE1vdmUgaXZiX25lZWRfc3ByaXRlX2dhbW1hKCkgY2hl
Y2sgb25lIGxldmVsIHVwIHNvIHRoYXQKICAgIHdlIGRvbid0IHdhc3RlIHRpbWUgcHJvZ3JhbW1p
bmcgZ2FyYmFnZSBpbnRvIGhlIGdhbW1hIHJlZ2lzdGVycwoKUmV2aWV3ZWQtYnk6IE1hYXJ0ZW4g
TGFua2hvcnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51eC5pbnRlbC5jb20+ClNpZ25lZC1vZmYt
Ynk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+Ci0tLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYyB8IDQ4ICsrKysrKysr
KysrKysrKysrKy0tLQogMSBmaWxlIGNoYW5nZWQsIDQyIGluc2VydGlvbnMoKyksIDYgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9z
cHJpdGUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMKaW5k
ZXggNmUzNzFlNjhjMDE4Li5iZDhjY2MyZGUxZGEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3ByaXRlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9zcHJpdGUuYwpAQCAtMTI4NSw2ICsxMjg1LDE2IEBAIHN0YXRpYyB1MzIg
aXZiX3Nwcml0ZV9jdGxfY3J0Yyhjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19z
dGF0ZSkKIAlyZXR1cm4gc3ByY3RsOwogfQogCitzdGF0aWMgYm9vbCBpdmJfbmVlZF9zcHJpdGVf
Z2FtbWEoY29uc3Qgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSkKK3sKKwlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPQorCQl0b19pOTE1KHBsYW5lX3N0YXRl
LT5iYXNlLnBsYW5lLT5kZXYpOworCWNvbnN0IHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0g
cGxhbmVfc3RhdGUtPmJhc2UuZmI7CisKKwlyZXR1cm4gZmItPmZvcm1hdC0+Y3BwWzBdID09IDgg
JiYKKwkJKElTX0lWWUJSSURHRShkZXZfcHJpdikgfHwgSVNfSEFTV0VMTChkZXZfcHJpdikpOwor
fQorCiBzdGF0aWMgdTMyIGl2Yl9zcHJpdGVfY3RsKGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0
YXRlICpjcnRjX3N0YXRlLAogCQkJICBjb25zdCBzdHJ1Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnBs
YW5lX3N0YXRlKQogewpAQCAtMTMwNyw2ICsxMzE3LDEyIEBAIHN0YXRpYyB1MzIgaXZiX3Nwcml0
ZV9jdGwoY29uc3Qgc3RydWN0IGludGVsX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCiAJY2FzZSBE
Uk1fRk9STUFUX1hSR0I4ODg4OgogCQlzcHJjdGwgfD0gU1BSSVRFX0ZPUk1BVF9SR0JYODg4Owog
CQlicmVhazsKKwljYXNlIERSTV9GT1JNQVRfWEJHUjE2MTYxNjE2RjoKKwkJc3ByY3RsIHw9IFNQ
UklURV9GT1JNQVRfUkdCWDE2MTYxNiB8IFNQUklURV9SR0JfT1JERVJfUkdCWDsKKwkJYnJlYWs7
CisJY2FzZSBEUk1fRk9STUFUX1hSR0IxNjE2MTYxNkY6CisJCXNwcmN0bCB8PSBTUFJJVEVfRk9S
TUFUX1JHQlgxNjE2MTY7CisJCWJyZWFrOwogCWNhc2UgRFJNX0ZPUk1BVF9ZVVlWOgogCQlzcHJj
dGwgfD0gU1BSSVRFX0ZPUk1BVF9ZVVY0MjIgfCBTUFJJVEVfWVVWX09SREVSX1lVWVY7CiAJCWJy
ZWFrOwpAQCAtMTMyNCw3ICsxMzQwLDggQEAgc3RhdGljIHUzMiBpdmJfc3ByaXRlX2N0bChjb25z
dCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAkJcmV0dXJuIDA7CiAJfQog
Ci0Jc3ByY3RsIHw9IFNQUklURV9JTlRfR0FNTUFfRElTQUJMRTsKKwlpZiAoIWl2Yl9uZWVkX3Nw
cml0ZV9nYW1tYShwbGFuZV9zdGF0ZSkpCisJCXNwcmN0bCB8PSBTUFJJVEVfSU5UX0dBTU1BX0RJ
U0FCTEU7CiAKIAlpZiAocGxhbmVfc3RhdGUtPmJhc2UuY29sb3JfZW5jb2RpbmcgPT0gRFJNX0NP
TE9SX1lDQkNSX0JUNzA5KQogCQlzcHJjdGwgfD0gU1BSSVRFX1lVVl9UT19SR0JfQ1NDX0ZPUk1B
VF9CVDcwOTsKQEAgLTEzNDYsMTIgKzEzNjMsMjYgQEAgc3RhdGljIHUzMiBpdmJfc3ByaXRlX2N0
bChjb25zdCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKIAlyZXR1cm4gc3By
Y3RsOwogfQogCi1zdGF0aWMgdm9pZCBpdmJfc3ByaXRlX2xpbmVhcl9nYW1tYSh1MTYgZ2FtbWFb
MThdKQorc3RhdGljIHZvaWQgaXZiX3Nwcml0ZV9saW5lYXJfZ2FtbWEoY29uc3Qgc3RydWN0IGlu
dGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSwKKwkJCQkgICAgdTE2IGdhbW1hWzE4XSkKIHsK
LQlpbnQgaTsKKwlpbnQgc2NhbGUsIGk7CiAKLQlmb3IgKGkgPSAwOyBpIDwgMTc7IGkrKykKLQkJ
Z2FtbWFbaV0gPSAoaSA8PCAxMCkgLyAxNjsKKwkvKgorCSAqIFdhRlAxNkdhbW1hRW5hYmxpbmc6
aXZiLGhzdworCSAqICJXb3JrYXJvdW5kIDogV2hlbiB1c2luZyB0aGUgNjQtYml0IGZvcm1hdCwg
dGhlIHNwcml0ZSBvdXRwdXQKKwkgKiAgb24gZWFjaCBjb2xvciBjaGFubmVsIGhhcyBvbmUgcXVh
cnRlciBhbXBsaXR1ZGUuIEl0IGNhbiBiZQorCSAqICBicm91Z2h0IHVwIHRvIGZ1bGwgYW1wbGl0
dWRlIGJ5IHVzaW5nIHNwcml0ZSBpbnRlcm5hbCBnYW1tYQorCSAqICBjb3JyZWN0aW9uLCBwaXBl
IGdhbW1hIGNvcnJlY3Rpb24sIG9yIHBpcGUgY29sb3Igc3BhY2UKKwkgKiAgY29udmVyc2lvbiB0
byBtdWx0aXBseSB0aGUgc3ByaXRlIG91dHB1dCBieSBmb3VyLiIKKwkgKi8KKwlzY2FsZSA9IDQ7
CisKKwlmb3IgKGkgPSAwOyBpIDwgMTY7IGkrKykKKwkJZ2FtbWFbaV0gPSBtaW4oKHNjYWxlICog
aSA8PCAxMCkgLyAxNiwgKDEgPDwgMTApIC0gMSk7CisKKwlnYW1tYVtpXSA9IG1pbigoc2NhbGUg
KiBpIDw8IDEwKSAvIDE2LCAxIDw8IDEwKTsKKwlpKys7CiAKIAlnYW1tYVtpXSA9IDMgPDwgMTA7
CiAJaSsrOwpAQCAtMTM2NSw3ICsxMzk2LDEwIEBAIHN0YXRpYyB2b2lkIGl2Yl91cGRhdGVfZ2Ft
bWEoY29uc3Qgc3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSkKIAl1MTYgZ2Ft
bWFbMThdOwogCWludCBpOwogCi0JaXZiX3Nwcml0ZV9saW5lYXJfZ2FtbWEoZ2FtbWEpOworCWlm
ICghaXZiX25lZWRfc3ByaXRlX2dhbW1hKHBsYW5lX3N0YXRlKSkKKwkJcmV0dXJuOworCisJaXZi
X3Nwcml0ZV9saW5lYXJfZ2FtbWEocGxhbmVfc3RhdGUsIGdhbW1hKTsKIAogCS8qIEZJWE1FIHRo
ZXNlIHJlZ2lzdGVyIGFyZSBzaW5nbGUgYnVmZmVyZWQgOiggKi8KIAlmb3IgKGkgPSAwOyBpIDwg
MTY7IGkrKykKQEAgLTI1MDcsNiArMjU0MSw4IEBAIHN0YXRpYyBib29sIHNuYl9zcHJpdGVfZm9y
bWF0X21vZF9zdXBwb3J0ZWQoc3RydWN0IGRybV9wbGFuZSAqX3BsYW5lLAogCXN3aXRjaCAoZm9y
bWF0KSB7CiAJY2FzZSBEUk1fRk9STUFUX1hSR0I4ODg4OgogCWNhc2UgRFJNX0ZPUk1BVF9YQkdS
ODg4ODoKKwljYXNlIERSTV9GT1JNQVRfWFJHQjE2MTYxNjE2RjoKKwljYXNlIERSTV9GT1JNQVRf
WEJHUjE2MTYxNjE2RjoKIAljYXNlIERSTV9GT1JNQVRfWVVZVjoKIAljYXNlIERSTV9GT1JNQVRf
WVZZVToKIAljYXNlIERSTV9GT1JNQVRfVVlWWToKLS0gCjIuMjEuMAoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApk
cmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
