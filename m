Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 313DEEDB60
	for <lists+dri-devel@lfdr.de>; Mon,  4 Nov 2019 10:15:45 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 726446E1BD;
	Mon,  4 Nov 2019 09:15:42 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x343.google.com (mail-wm1-x343.google.com
 [IPv6:2a00:1450:4864:20::343])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 18DD16E1BD
 for <dri-devel@lists.freedesktop.org>; Mon,  4 Nov 2019 09:15:40 +0000 (UTC)
Received: by mail-wm1-x343.google.com with SMTP id q70so15726630wme.1
 for <dri-devel@lists.freedesktop.org>; Mon, 04 Nov 2019 01:15:40 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:openpgp:autocrypt
 :organization:message-id:date:user-agent:mime-version:in-reply-to
 :content-language:content-transfer-encoding;
 bh=E3RTg5bX2gLenTkU1cFjA7TwsV30C/ryxW+akIyzGuU=;
 b=pdyEsV8TlmAU7o+fa4c/387BBCjd8vTqSMh6/xC9TBPJG3RMeAbxiv8l0txA/0+GMV
 1nALgzQsPQFYTmVartfPXbXNgik9BCsHU2Ozm0C/UC+3pDadNCDAoufDFuIBo2kov9rC
 fumerFJBKrCDM7GhZmex3YcKVxhF+cYDHdAYjiK8sqkR/IR10HnIDbOefrBuEuq8WUHX
 Wql2fkUUuzAzRwRugCkwxdfphMDhB8wlPpYphSfxWpowWGvei71mVDAtS6YSbrl1uJzS
 lIyOJ1/9BZomyZ4xRpP49KWdbO/W9H3k5CKQ//CZDX3fUhN4VPmRqjg8IR1HS+UEEL8V
 6wBA==
X-Gm-Message-State: APjAAAXo0ADPtIprQ9uzYf2LSCvsDnUN4dzmjrm+h6/C1InNxKcw7w93
 S4CjBo33Mo6RzzHEGmdonAJglQ==
X-Google-Smtp-Source: APXvYqxbvHK67yFAUZFPLi9G36Vf6+XasY6X5KmFWujjQtXLxFPIOFS38/jxsr4iqA+mp7+L71WudA==
X-Received: by 2002:a7b:c055:: with SMTP id u21mr1761879wmc.55.1572858937997; 
 Mon, 04 Nov 2019 01:15:37 -0800 (PST)
Received: from [10.1.2.12] (laubervilliers-658-1-213-31.w90-63.abo.wanadoo.fr.
 [90.63.244.31])
 by smtp.gmail.com with ESMTPSA id n22sm13778740wmk.19.2019.11.04.01.15.37
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Mon, 04 Nov 2019 01:15:37 -0800 (PST)
Subject: Re: [PATCH 1/4] drm: bridge: dw_mipi_dsi: access registers via a
 regmap
To: Adrian Ratiu <adrian.ratiu@collabora.com>,
 linux-arm-kernel@lists.infradead.org,
 linux-stm32@st-md-mailman.stormreply.com, linux-rockchip@lists.infradead.org
References: <20191031142633.12460-1-adrian.ratiu@collabora.com>
 <20191031142633.12460-2-adrian.ratiu@collabora.com>
From: Neil Armstrong <narmstrong@baylibre.com>
Openpgp: preference=signencrypt
Autocrypt: addr=narmstrong@baylibre.com; prefer-encrypt=mutual; keydata=
 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
 ZaTUOEkgIor5losDrePdPgE=
Organization: Baylibre
Message-ID: <974be8e9-fcb4-4457-8831-40b2fa834ae2@baylibre.com>
Date: Mon, 4 Nov 2019 10:15:36 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20191031142633.12460-2-adrian.ratiu@collabora.com>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=baylibre-com.20150623.gappssmtp.com; s=20150623;
 h=subject:to:cc:references:from:openpgp:autocrypt:organization
 :message-id:date:user-agent:mime-version:in-reply-to
 :content-language:content-transfer-encoding;
 bh=E3RTg5bX2gLenTkU1cFjA7TwsV30C/ryxW+akIyzGuU=;
 b=T6yYYe72GTxJxQKEb4IPAVA20ZL4cXNShaKkIXiIBOHGU6J9j2iGe2km3TVvfRAiLG
 cHcSuEOS1SbN3H4N7m7NWSZPdzxF0EAnsmavjsi4DV7r7hCqWTxNfelXjxPRFDUfBst3
 0TII0NdTsGYwzEFyQ8LdkClD2n9C0AjBT1CII6IwhjujelkJiD0wuXtaLrm+wVI/m/KR
 8F7Am8s1NoaZ+uJmjLZZ6IUl+4hErnRaix6FqjAIQwQuZlU2DrzhdgDNv0S5SFCXDb00
 pjhUvG2yMqNhzq+fJueClQ9Ww5mlk7reROkBdZLYJOk6YVain8sE9Q70acnpnq2f0m4+
 NdyA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: kernel@collabora.com, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org,
 Boris Brezillon <boris.brezillon@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gMzEvMTAvMjAxOSAxNToyNiwgQWRyaWFuIFJhdGl1IHdyb3RlOgo+IENvbnZlcnQgdGhlIGNv
bW1vbiBicmlkZ2UgY29kZSBhbmQgdGhlIHR3byByb2NrY2hpcCAmIHN0bSBkcml2ZXJzCj4gd2hp
Y2ggY3VycmVudGx5IHVzZSBpdCB0byB0aGUgcmVnbWFwIEFQSSBpbiBhbnRpY2lwYXRpb24gZm9y
IGZ1cnRoZXIKPiBjaGFuZ2VzIHRvIG1ha2UgaXQgbW9yZSBnZW5lcmljIGFuZCBhZGQgb2xkZXIg
RFNJIGhvc3QgY29udHJvbGxlcgo+IHN1cHBvcnQgYXMgZm91bmQgb24gaS5teDYgYmFzZWQgZGV2
aWNlcy4KPiAKPiBObyBmdW5jdGlvbmFsIGNoYW5nZXMgb3RoZXIgdGhhbiByZXF1aXJpbmcgdGhl
IHBsYXRmb3JtIGRyaXZlcnMgdG8KPiBwcm92aWRlIGEgcmVnbWFwIHZpYSB0aGVpciBwbGF0X2Rh
dGEuIEdvaW5nIGZ1cnRoZXIgZWFjaCBwbGF0Zm9ybQo+IGRyaXZlciBjYW4gYWxzbyBhZGQgaXRz
IG93biByZWdtYXAgY29uZmlndXJhdGlvbiBsaWtlIGZvciBtYXhpbXVtCj4gd3JpdGUgb2Zmc2V0
cywgci93IGNhbGxiYWNrcyBvciBkaWZmZXJlbnQgcmVnaXN0ZXIgbGF5b3V0cy4KPiAKPiBTdWdn
ZXN0ZWQtYnk6IEJvcmlzIEJyZXppbGxvbiA8Ym9yaXMuYnJlemlsbG9uQGNvbGxhYm9yYS5jb20+
Cj4gU2lnbmVkLW9mZi1ieTogQWRyaWFuIFJhdGl1IDxhZHJpYW4ucmF0aXVAY29sbGFib3JhLmNv
bT4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1taXBpLWRzaS5j
IHwgMTg5ICsrKysrKysrKy0tLS0tLS0tLQo+ICAuLi4vZ3B1L2RybS9yb2NrY2hpcC9kdy1taXBp
LWRzaS1yb2NrY2hpcC5jICAgfCAgMzYgKysrLQo+ICBkcml2ZXJzL2dwdS9kcm0vc3RtL2R3X21p
cGlfZHNpLXN0bS5jICAgICAgICAgfCAgNDQgKystLQo+ICBpbmNsdWRlL2RybS9icmlkZ2UvZHdf
bWlwaV9kc2kuaCAgICAgICAgICAgICAgfCAgIDIgKy0KPiAgNCBmaWxlcyBjaGFuZ2VkLCAxNTUg
aW5zZXJ0aW9ucygrKSwgMTE2IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LW1pcGktZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0v
YnJpZGdlL3N5bm9wc3lzL2R3LW1pcGktZHNpLmMKPiBpbmRleCBiNmU3OTNiYjY1M2MuLjRlZjNl
OTAzOGNjMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3
LW1pcGktZHNpLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LW1p
cGktZHNpLmMKPiBAQCAtMTUsNiArMTUsNyBAQAo+ICAjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+
Cj4gICNpbmNsdWRlIDxsaW51eC9vZl9kZXZpY2UuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L3BtX3J1
bnRpbWUuaD4KPiArI2luY2x1ZGUgPGxpbnV4L3JlZ21hcC5oPgo+ICAjaW5jbHVkZSA8bGludXgv
cmVzZXQuaD4KPiAgCj4gICNpbmNsdWRlIDx2aWRlby9taXBpX2Rpc3BsYXkuaD4KPiBAQCAtMjI2
LDcgKzIyNyw3IEBAIHN0cnVjdCBkd19taXBpX2RzaSB7Cj4gIAlzdHJ1Y3QgbWlwaV9kc2lfaG9z
dCBkc2lfaG9zdDsKPiAgCXN0cnVjdCBkcm1fYnJpZGdlICpwYW5lbF9icmlkZ2U7Cj4gIAlzdHJ1
Y3QgZGV2aWNlICpkZXY7Cj4gLQl2b2lkIF9faW9tZW0gKmJhc2U7Cj4gKwlzdHJ1Y3QgcmVnbWFw
ICpyZWdzOwo+ICAKPiAgCXN0cnVjdCBjbGsgKnBjbGs7Cj4gIAo+IEBAIC0yODAsMTYgKzI4MSw2
IEBAIHN0YXRpYyBpbmxpbmUgc3RydWN0IGR3X21pcGlfZHNpICpicmlkZ2VfdG9fZHNpKHN0cnVj
dCBkcm1fYnJpZGdlICpicmlkZ2UpCj4gIAlyZXR1cm4gY29udGFpbmVyX29mKGJyaWRnZSwgc3Ry
dWN0IGR3X21pcGlfZHNpLCBicmlkZ2UpOwo+ICB9Cj4gIAo+IC1zdGF0aWMgaW5saW5lIHZvaWQg
ZHNpX3dyaXRlKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpLCB1MzIgcmVnLCB1MzIgdmFsKQo+IC17
Cj4gLQl3cml0ZWwodmFsLCBkc2ktPmJhc2UgKyByZWcpOwo+IC19Cj4gLQo+IC1zdGF0aWMgaW5s
aW5lIHUzMiBkc2lfcmVhZChzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwgdTMyIHJlZykKPiAtewo+
IC0JcmV0dXJuIHJlYWRsKGRzaS0+YmFzZSArIHJlZyk7Cj4gLX0KPiAtCj4gIHN0YXRpYyBpbnQg
ZHdfbWlwaV9kc2lfaG9zdF9hdHRhY2goc3RydWN0IG1pcGlfZHNpX2hvc3QgKmhvc3QsCj4gIAkJ
CQkgICBzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkZXZpY2UpCj4gIHsKPiBAQCAtMzY2LDI5ICsz
NTcsMjkgQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9tZXNzYWdlX2NvbmZpZyhzdHJ1Y3QgZHdfbWlw
aV9kc2kgKmRzaSwKPiAgCWlmIChscG0pCj4gIAkJdmFsIHw9IENNRF9NT0RFX0FMTF9MUDsKPiAg
Cj4gLQlkc2lfd3JpdGUoZHNpLCBEU0lfTFBDTEtfQ1RSTCwgbHBtID8gMCA6IFBIWV9UWFJFUVVF
U1RDTEtIUyk7Cj4gLQlkc2lfd3JpdGUoZHNpLCBEU0lfQ01EX01PREVfQ0ZHLCB2YWwpOwo+ICsJ
cmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX0xQQ0xLX0NUUkwsIGxwbSA/IDAgOiBQSFlfVFhS
RVFVRVNUQ0xLSFMpOwo+ICsJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX0NNRF9NT0RFX0NG
RywgdmFsKTsKPiAgfQo+ICAKPiAgc3RhdGljIGludCBkd19taXBpX2RzaV9nZW5fcGt0X2hkcl93
cml0ZShzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwgdTMyIGhkcl92YWwpCj4gIHsKPiAgCWludCBy
ZXQ7Cj4gLQl1MzIgdmFsLCBtYXNrOwo+ICsJdTMyIHZhbCA9IDAsIG1hc2s7Cj4gIAo+IC0JcmV0
ID0gcmVhZGxfcG9sbF90aW1lb3V0KGRzaS0+YmFzZSArIERTSV9DTURfUEtUX1NUQVRVUywKPiAt
CQkJCSB2YWwsICEodmFsICYgR0VOX0NNRF9GVUxMKSwgMTAwMCwKPiAtCQkJCSBDTURfUEtUX1NU
QVRVU19USU1FT1VUX1VTKTsKPiArCXJldCA9IHJlZ21hcF9yZWFkX3BvbGxfdGltZW91dChkc2kt
PnJlZ3MsIERTSV9DTURfUEtUX1NUQVRVUywKPiArCQkJCSAgICAgICB2YWwsICEodmFsICYgR0VO
X0NNRF9GVUxMKSwgMTAwMCwKPiArCQkJCSAgICAgICBDTURfUEtUX1NUQVRVU19USU1FT1VUX1VT
KTsKPiAgCWlmIChyZXQpIHsKPiAgCQlkZXZfZXJyKGRzaS0+ZGV2LCAiZmFpbGVkIHRvIGdldCBh
dmFpbGFibGUgY29tbWFuZCBGSUZPXG4iKTsKPiAgCQlyZXR1cm4gcmV0Owo+ICAJfQo+ICAKPiAt
CWRzaV93cml0ZShkc2ksIERTSV9HRU5fSERSLCBoZHJfdmFsKTsKPiArCXJlZ21hcF93cml0ZShk
c2ktPnJlZ3MsIERTSV9HRU5fSERSLCBoZHJfdmFsKTsKPiAgCj4gIAltYXNrID0gR0VOX0NNRF9F
TVBUWSB8IEdFTl9QTERfV19FTVBUWTsKPiAtCXJldCA9IHJlYWRsX3BvbGxfdGltZW91dChkc2kt
PmJhc2UgKyBEU0lfQ01EX1BLVF9TVEFUVVMsCj4gLQkJCQkgdmFsLCAodmFsICYgbWFzaykgPT0g
bWFzaywKPiAtCQkJCSAxMDAwLCBDTURfUEtUX1NUQVRVU19USU1FT1VUX1VTKTsKPiArCXJldCA9
IHJlZ21hcF9yZWFkX3BvbGxfdGltZW91dChkc2ktPnJlZ3MsIERTSV9DTURfUEtUX1NUQVRVUywK
PiArCQkJCSAgICAgICB2YWwsICh2YWwgJiBtYXNrKSA9PSBtYXNrLAo+ICsJCQkJICAgICAgIDEw
MDAsIENNRF9QS1RfU1RBVFVTX1RJTUVPVVRfVVMpOwo+ICAJaWYgKHJldCkgewo+ICAJCWRldl9l
cnIoZHNpLT5kZXYsICJmYWlsZWQgdG8gd3JpdGUgY29tbWFuZCBGSUZPXG4iKTsKPiAgCQlyZXR1
cm4gcmV0Owo+IEBAIC00MDMsMjQgKzM5NCwyNiBAQCBzdGF0aWMgaW50IGR3X21pcGlfZHNpX3dy
aXRlKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpLAo+ICAJY29uc3QgdTggKnR4X2J1ZiA9IHBhY2tl
dC0+cGF5bG9hZDsKPiAgCWludCBsZW4gPSBwYWNrZXQtPnBheWxvYWRfbGVuZ3RoLCBwbGRfZGF0
YV9ieXRlcyA9IHNpemVvZih1MzIpLCByZXQ7Cj4gIAlfX2xlMzIgd29yZDsKPiAtCXUzMiB2YWw7
Cj4gKwl1MzIgdmFsID0gMDsKPiAgCj4gIAl3aGlsZSAobGVuKSB7Cj4gIAkJaWYgKGxlbiA8IHBs
ZF9kYXRhX2J5dGVzKSB7Cj4gIAkJCXdvcmQgPSAwOwo+ICAJCQltZW1jcHkoJndvcmQsIHR4X2J1
ZiwgbGVuKTsKPiAtCQkJZHNpX3dyaXRlKGRzaSwgRFNJX0dFTl9QTERfREFUQSwgbGUzMl90b19j
cHUod29yZCkpOwo+ICsJCQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfR0VOX1BMRF9EQVRB
LAo+ICsJCQkJICAgICBsZTMyX3RvX2NwdSh3b3JkKSk7Cj4gIAkJCWxlbiA9IDA7Cj4gIAkJfSBl
bHNlIHsKPiAgCQkJbWVtY3B5KCZ3b3JkLCB0eF9idWYsIHBsZF9kYXRhX2J5dGVzKTsKPiAtCQkJ
ZHNpX3dyaXRlKGRzaSwgRFNJX0dFTl9QTERfREFUQSwgbGUzMl90b19jcHUod29yZCkpOwo+ICsJ
CQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfR0VOX1BMRF9EQVRBLAo+ICsJCQkJICAgICBs
ZTMyX3RvX2NwdSh3b3JkKSk7Cj4gIAkJCXR4X2J1ZiArPSBwbGRfZGF0YV9ieXRlczsKPiAgCQkJ
bGVuIC09IHBsZF9kYXRhX2J5dGVzOwo+ICAJCX0KPiAgCj4gLQkJcmV0ID0gcmVhZGxfcG9sbF90
aW1lb3V0KGRzaS0+YmFzZSArIERTSV9DTURfUEtUX1NUQVRVUywKPiAtCQkJCQkgdmFsLCAhKHZh
bCAmIEdFTl9QTERfV19GVUxMKSwgMTAwMCwKPiAtCQkJCQkgQ01EX1BLVF9TVEFUVVNfVElNRU9V
VF9VUyk7Cj4gKwkJcmV0ID0gcmVnbWFwX3JlYWRfcG9sbF90aW1lb3V0KGRzaS0+cmVncywgRFNJ
X0NNRF9QS1RfU1RBVFVTLAo+ICsJCQkJCSAgICAgICB2YWwsICEodmFsICYgR0VOX1BMRF9XX0ZV
TEwpLAo+ICsJCQkJCSAgICAgICAxMDAwLCBDTURfUEtUX1NUQVRVU19USU1FT1VUX1VTKTsKPiAg
CQlpZiAocmV0KSB7Cj4gIAkJCWRldl9lcnIoZHNpLT5kZXYsCj4gIAkJCQkiZmFpbGVkIHRvIGdl
dCBhdmFpbGFibGUgd3JpdGUgcGF5bG9hZCBGSUZPXG4iKTsKPiBAQCAtNDM4LDEyICs0MzEsMTIg
QEAgc3RhdGljIGludCBkd19taXBpX2RzaV9yZWFkKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpLAo+
ICB7Cj4gIAlpbnQgaSwgaiwgcmV0LCBsZW4gPSBtc2ctPnJ4X2xlbjsKPiAgCXU4ICpidWYgPSBt
c2ctPnJ4X2J1ZjsKPiAtCXUzMiB2YWw7Cj4gKwl1MzIgdmFsID0gMDsKPiAgCj4gIAkvKiBXYWl0
IGVuZCBvZiB0aGUgcmVhZCBvcGVyYXRpb24gKi8KPiAtCXJldCA9IHJlYWRsX3BvbGxfdGltZW91
dChkc2ktPmJhc2UgKyBEU0lfQ01EX1BLVF9TVEFUVVMsCj4gLQkJCQkgdmFsLCAhKHZhbCAmIEdF
Tl9SRF9DTURfQlVTWSksCj4gLQkJCQkgMTAwMCwgQ01EX1BLVF9TVEFUVVNfVElNRU9VVF9VUyk7
Cj4gKwlyZXQgPSByZWdtYXBfcmVhZF9wb2xsX3RpbWVvdXQoZHNpLT5yZWdzLCBEU0lfQ01EX1BL
VF9TVEFUVVMsCj4gKwkJCQkgICAgICAgdmFsLCAhKHZhbCAmIEdFTl9SRF9DTURfQlVTWSksCj4g
KwkJCQkgICAgICAgMTAwMCwgQ01EX1BLVF9TVEFUVVNfVElNRU9VVF9VUyk7Cj4gIAlpZiAocmV0
KSB7Cj4gIAkJZGV2X2Vycihkc2ktPmRldiwgIlRpbWVvdXQgZHVyaW5nIHJlYWQgb3BlcmF0aW9u
XG4iKTsKPiAgCQlyZXR1cm4gcmV0Owo+IEBAIC00NTEsMTUgKzQ0NCwxNSBAQCBzdGF0aWMgaW50
IGR3X21pcGlfZHNpX3JlYWQoc3RydWN0IGR3X21pcGlfZHNpICpkc2ksCj4gIAo+ICAJZm9yIChp
ID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7Cj4gIAkJLyogUmVhZCBmaWZvIG11c3Qgbm90IGJlIGVt
cHR5IGJlZm9yZSBhbGwgYnl0ZXMgYXJlIHJlYWQgKi8KPiAtCQlyZXQgPSByZWFkbF9wb2xsX3Rp
bWVvdXQoZHNpLT5iYXNlICsgRFNJX0NNRF9QS1RfU1RBVFVTLAo+IC0JCQkJCSB2YWwsICEodmFs
ICYgR0VOX1BMRF9SX0VNUFRZKSwKPiAtCQkJCQkgMTAwMCwgQ01EX1BLVF9TVEFUVVNfVElNRU9V
VF9VUyk7Cj4gKwkJcmV0ID0gcmVnbWFwX3JlYWRfcG9sbF90aW1lb3V0KGRzaS0+cmVncywgRFNJ
X0NNRF9QS1RfU1RBVFVTLAo+ICsJCQkJCSAgICAgICB2YWwsICEodmFsICYgR0VOX1BMRF9SX0VN
UFRZKSwKPiArCQkJCQkgICAgICAgMTAwMCwgQ01EX1BLVF9TVEFUVVNfVElNRU9VVF9VUyk7Cj4g
IAkJaWYgKHJldCkgewo+ICAJCQlkZXZfZXJyKGRzaS0+ZGV2LCAiUmVhZCBwYXlsb2FkIEZJRk8g
aXMgZW1wdHlcbiIpOwo+ICAJCQlyZXR1cm4gcmV0Owo+ICAJCX0KPiAgCj4gLQkJdmFsID0gZHNp
X3JlYWQoZHNpLCBEU0lfR0VOX1BMRF9EQVRBKTsKPiArCQlyZWdtYXBfcmVhZChkc2ktPnJlZ3Ms
IERTSV9HRU5fUExEX0RBVEEsICZ2YWwpOwo+ICAJCWZvciAoaiA9IDA7IGogPCA0ICYmIGogKyBp
IDwgbGVuOyBqKyspCj4gIAkJCWJ1ZltpICsgal0gPSB2YWwgPj4gKDggKiBqKTsKPiAgCX0KPiBA
QCAtNTM2LDI5ICs1MjksMjkgQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfdmlkZW9fbW9kZV9j
b25maWcoc3RydWN0IGR3X21pcGlfZHNpICpkc2kpCj4gIAl9Cj4gICNlbmRpZiAvKiBDT05GSUdf
REVCVUdfRlMgKi8KPiAgCj4gLQlkc2lfd3JpdGUoZHNpLCBEU0lfVklEX01PREVfQ0ZHLCB2YWwp
Owo+ICsJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1ZJRF9NT0RFX0NGRywgdmFsKTsKPiAg
fQo+ICAKPiAgc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfc2V0X21vZGUoc3RydWN0IGR3X21pcGlf
ZHNpICpkc2ksCj4gIAkJCQkgdW5zaWduZWQgbG9uZyBtb2RlX2ZsYWdzKQo+ICB7Cj4gLQlkc2lf
d3JpdGUoZHNpLCBEU0lfUFdSX1VQLCBSRVNFVCk7Cj4gKwlyZWdtYXBfd3JpdGUoZHNpLT5yZWdz
LCBEU0lfUFdSX1VQLCBSRVNFVCk7Cj4gIAo+ICAJaWYgKG1vZGVfZmxhZ3MgJiBNSVBJX0RTSV9N
T0RFX1ZJREVPKSB7Cj4gLQkJZHNpX3dyaXRlKGRzaSwgRFNJX01PREVfQ0ZHLCBFTkFCTEVfVklE
RU9fTU9ERSk7Cj4gKwkJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX01PREVfQ0ZHLCBFTkFC
TEVfVklERU9fTU9ERSk7Cj4gIAkJZHdfbWlwaV9kc2lfdmlkZW9fbW9kZV9jb25maWcoZHNpKTsK
PiAtCQlkc2lfd3JpdGUoZHNpLCBEU0lfTFBDTEtfQ1RSTCwgUEhZX1RYUkVRVUVTVENMS0hTKTsK
PiArCQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfTFBDTEtfQ1RSTCwgUEhZX1RYUkVRVUVT
VENMS0hTKTsKPiAgCX0gZWxzZSB7Cj4gLQkJZHNpX3dyaXRlKGRzaSwgRFNJX01PREVfQ0ZHLCBF
TkFCTEVfQ01EX01PREUpOwo+ICsJCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9NT0RFX0NG
RywgRU5BQkxFX0NNRF9NT0RFKTsKPiAgCX0KPiAgCj4gLQlkc2lfd3JpdGUoZHNpLCBEU0lfUFdS
X1VQLCBQT1dFUlVQKTsKPiArCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9QV1JfVVAsIFBP
V0VSVVApOwo+ICB9Cj4gIAo+ICBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9kaXNhYmxlKHN0cnVj
dCBkd19taXBpX2RzaSAqZHNpKQo+ICB7Cj4gLQlkc2lfd3JpdGUoZHNpLCBEU0lfUFdSX1VQLCBS
RVNFVCk7Cj4gLQlkc2lfd3JpdGUoZHNpLCBEU0lfUEhZX1JTVFosIFBIWV9SU1RaKTsKPiArCXJl
Z21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9QV1JfVVAsIFJFU0VUKTsKPiArCXJlZ21hcF93cml0
ZShkc2ktPnJlZ3MsIERTSV9QSFlfUlNUWiwgUEhZX1JTVFopOwo+ICB9Cj4gIAo+ICBzdGF0aWMg
dm9pZCBkd19taXBpX2RzaV9pbml0KHN0cnVjdCBkd19taXBpX2RzaSAqZHNpKQo+IEBAIC01NzMs
MTQgKzU2NiwxNCBAQCBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9pbml0KHN0cnVjdCBkd19taXBp
X2RzaSAqZHNpKQo+ICAJICovCj4gIAl1MzIgZXNjX2Nsa19kaXZpc2lvbiA9IChkc2ktPmxhbmVf
bWJwcyA+PiAzKSAvIDIwICsgMTsKPiAgCj4gLQlkc2lfd3JpdGUoZHNpLCBEU0lfUFdSX1VQLCBS
RVNFVCk7Cj4gKwlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfUFdSX1VQLCBSRVNFVCk7Cj4g
IAo+ICAJLyoKPiAgCSAqIFRPRE8gZHcgZHJ2IGltcHJvdmVtZW50cwo+ICAJICogdGltZW91dCBj
bG9jayBkaXZpc2lvbiBzaG91bGQgYmUgY29tcHV0ZWQgd2l0aCB0aGUKPiAgCSAqIGhpZ2ggc3Bl
ZWQgdHJhbnNtaXNzaW9uIGNvdW50ZXIgdGltZW91dCBhbmQgYnl0ZSBsYW5lLi4uCj4gIAkgKi8K
PiAtCWRzaV93cml0ZShkc2ksIERTSV9DTEtNR1JfQ0ZHLCBUT19DTEtfRElWSVNJT04oMTApIHwK
PiArCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9DTEtNR1JfQ0ZHLCBUT19DTEtfRElWSVNJ
T04oMTApIHwKPiAgCQkgIFRYX0VTQ19DTEtfRElWSVNJT04oZXNjX2Nsa19kaXZpc2lvbikpOwo+
ICB9Cj4gIAo+IEBAIC02MDksMjIgKzYwMiwyMiBAQCBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9k
cGlfY29uZmlnKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpLAo+ICAJaWYgKG1vZGUtPmZsYWdzICYg
RFJNX01PREVfRkxBR19OSFNZTkMpCj4gIAkJdmFsIHw9IEhTWU5DX0FDVElWRV9MT1c7Cj4gIAo+
IC0JZHNpX3dyaXRlKGRzaSwgRFNJX0RQSV9WQ0lELCBEUElfVkNJRChkc2ktPmNoYW5uZWwpKTsK
PiAtCWRzaV93cml0ZShkc2ksIERTSV9EUElfQ09MT1JfQ09ESU5HLCBjb2xvcik7Cj4gLQlkc2lf
d3JpdGUoZHNpLCBEU0lfRFBJX0NGR19QT0wsIHZhbCk7Cj4gKwlyZWdtYXBfd3JpdGUoZHNpLT5y
ZWdzLCBEU0lfRFBJX1ZDSUQsIERQSV9WQ0lEKGRzaS0+Y2hhbm5lbCkpOwo+ICsJcmVnbWFwX3dy
aXRlKGRzaS0+cmVncywgRFNJX0RQSV9DT0xPUl9DT0RJTkcsIGNvbG9yKTsKPiArCXJlZ21hcF93
cml0ZShkc2ktPnJlZ3MsIERTSV9EUElfQ0ZHX1BPTCwgdmFsKTsKPiAgCS8qCj4gIAkgKiBUT0RP
IGR3IGRydiBpbXByb3ZlbWVudHMKPiAgCSAqIGxhcmdlc3QgcGFja2V0IHNpemVzIGR1cmluZyBo
ZnAgb3IgZHVyaW5nIHZzYS92cGIvdmZwCj4gIAkgKiBzaG91bGQgYmUgY29tcHV0ZWQgYWNjb3Jk
aW5nIHRvIGJ5dGUgbGFuZSwgbGFuZSBudW1iZXIgYW5kIG9ubHkKPiAgCSAqIGlmIHNlbmRpbmcg
bHAgY21kcyBpbiBoaWdoIHNwZWVkIGlzIGVuYWJsZSAoUEhZX1RYUkVRVUVTVENMS0hTKQo+ICAJ
ICovCj4gLQlkc2lfd3JpdGUoZHNpLCBEU0lfRFBJX0xQX0NNRF9USU0sIE9VVFZBQ1RfTFBDTURf
VElNRSg0KQo+ICsJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX0RQSV9MUF9DTURfVElNLCBP
VVRWQUNUX0xQQ01EX1RJTUUoNCkKPiAgCQkgIHwgSU5WQUNUX0xQQ01EX1RJTUUoNCkpOwo+ICB9
Cj4gIAo+ICBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9wYWNrZXRfaGFuZGxlcl9jb25maWcoc3Ry
dWN0IGR3X21pcGlfZHNpICpkc2kpCj4gIHsKPiAtCWRzaV93cml0ZShkc2ksIERTSV9QQ0tIRExf
Q0ZHLCBDUkNfUlhfRU4gfCBFQ0NfUlhfRU4gfCBCVEFfRU4pOwo+ICsJcmVnbWFwX3dyaXRlKGRz
aS0+cmVncywgRFNJX1BDS0hETF9DRkcsIENSQ19SWF9FTiB8IEVDQ19SWF9FTiB8IEJUQV9FTik7
Cj4gIH0KPiAgCj4gIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX3ZpZGVvX3BhY2tldF9jb25maWco
c3RydWN0IGR3X21pcGlfZHNpICpkc2ksCj4gQEAgLTYzOCw3ICs2MzEsNyBAQCBzdGF0aWMgdm9p
ZCBkd19taXBpX2RzaV92aWRlb19wYWNrZXRfY29uZmlnKHN0cnVjdCBkd19taXBpX2RzaSAqZHNp
LAo+ICAJICogbm9uLWJ1cnN0IHZpZGVvIG1vZGVzLCBzZWUgZHdfbWlwaV9kc2lfdmlkZW9fbW9k
ZV9jb25maWcoKS4uLgo+ICAJICovCj4gIAo+IC0JZHNpX3dyaXRlKGRzaSwgRFNJX1ZJRF9QS1Rf
U0laRSwKPiArCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9WSURfUEtUX1NJWkUsCj4gIAkJ
ICAgICAgIGR3X21pcGlfaXNfZHVhbF9tb2RlKGRzaSkgPwo+ICAJCQkJVklEX1BLVF9TSVpFKG1v
ZGUtPmhkaXNwbGF5IC8gMikgOgo+ICAJCQkJVklEX1BLVF9TSVpFKG1vZGUtPmhkaXNwbGF5KSk7
Cj4gQEAgLTY1MSwxNCArNjQ0LDE1IEBAIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2NvbW1hbmRf
bW9kZV9jb25maWcoc3RydWN0IGR3X21pcGlfZHNpICpkc2kpCj4gIAkgKiBjb21wdXRlIGhpZ2gg
c3BlZWQgdHJhbnNtaXNzaW9uIGNvdW50ZXIgdGltZW91dCBhY2NvcmRpbmcKPiAgCSAqIHRvIHRo
ZSB0aW1lb3V0IGNsb2NrIGRpdmlzaW9uIChUT19DTEtfRElWSVNJT04pIGFuZCBieXRlIGxhbmUu
Li4KPiAgCSAqLwo+IC0JZHNpX3dyaXRlKGRzaSwgRFNJX1RPX0NOVF9DRkcsIEhTVFhfVE9fQ05U
KDEwMDApIHwgTFBSWF9UT19DTlQoMTAwMCkpOwo+ICsJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywg
RFNJX1RPX0NOVF9DRkcsCj4gKwkJICAgICBIU1RYX1RPX0NOVCgxMDAwKSB8IExQUlhfVE9fQ05U
KDEwMDApKTsKPiAgCS8qCj4gIAkgKiBUT0RPIGR3IGRydiBpbXByb3ZlbWVudHMKPiAgCSAqIHRo
ZSBCdXMtVHVybi1Bcm91bmQgVGltZW91dCBDb3VudGVyIHNob3VsZCBiZSBjb21wdXRlZAo+ICAJ
ICogYWNjb3JkaW5nIHRvIGJ5dGUgbGFuZS4uLgo+ICAJICovCj4gLQlkc2lfd3JpdGUoZHNpLCBE
U0lfQlRBX1RPX0NOVCwgMHhkMDApOwo+IC0JZHNpX3dyaXRlKGRzaSwgRFNJX01PREVfQ0ZHLCBF
TkFCTEVfQ01EX01PREUpOwo+ICsJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX0JUQV9UT19D
TlQsIDB4ZDAwKTsKPiArCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9NT0RFX0NGRywgRU5B
QkxFX0NNRF9NT0RFKTsKPiAgfQo+ICAKPiAgLyogR2V0IGxhbmUgYnl0ZSBjbG9jayBjeWNsZXMu
ICovCj4gQEAgLTY5MiwxMyArNjg2LDEzIEBAIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2xpbmVf
dGltZXJfY29uZmlnKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpLAo+ICAJICogY29tcHV0YXRpb25z
IGJlbG93IG1heSBiZSBpbXByb3ZlZC4uLgo+ICAJICovCj4gIAlsYmNjID0gZHdfbWlwaV9kc2lf
Z2V0X2hjb21wb25lbnRfbGJjYyhkc2ksIG1vZGUsIGh0b3RhbCk7Cj4gLQlkc2lfd3JpdGUoZHNp
LCBEU0lfVklEX0hMSU5FX1RJTUUsIGxiY2MpOwo+ICsJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywg
RFNJX1ZJRF9ITElORV9USU1FLCBsYmNjKTsKPiAgCj4gIAlsYmNjID0gZHdfbWlwaV9kc2lfZ2V0
X2hjb21wb25lbnRfbGJjYyhkc2ksIG1vZGUsIGhzYSk7Cj4gLQlkc2lfd3JpdGUoZHNpLCBEU0lf
VklEX0hTQV9USU1FLCBsYmNjKTsKPiArCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9WSURf
SFNBX1RJTUUsIGxiY2MpOwo+ICAKPiAgCWxiY2MgPSBkd19taXBpX2RzaV9nZXRfaGNvbXBvbmVu
dF9sYmNjKGRzaSwgbW9kZSwgaGJwKTsKPiAtCWRzaV93cml0ZShkc2ksIERTSV9WSURfSEJQX1RJ
TUUsIGxiY2MpOwo+ICsJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1ZJRF9IQlBfVElNRSwg
bGJjYyk7Cj4gIH0KPiAgCj4gIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX3ZlcnRpY2FsX3RpbWlu
Z19jb25maWcoc3RydWN0IGR3X21pcGlfZHNpICpkc2ksCj4gQEAgLTcxMSwxMCArNzA1LDEwIEBA
IHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX3ZlcnRpY2FsX3RpbWluZ19jb25maWcoc3RydWN0IGR3
X21pcGlfZHNpICpkc2ksCj4gIAl2ZnAgPSBtb2RlLT52c3luY19zdGFydCAtIG1vZGUtPnZkaXNw
bGF5Owo+ICAJdmJwID0gbW9kZS0+dnRvdGFsIC0gbW9kZS0+dnN5bmNfZW5kOwo+ICAKPiAtCWRz
aV93cml0ZShkc2ksIERTSV9WSURfVkFDVElWRV9MSU5FUywgdmFjdGl2ZSk7Cj4gLQlkc2lfd3Jp
dGUoZHNpLCBEU0lfVklEX1ZTQV9MSU5FUywgdnNhKTsKPiAtCWRzaV93cml0ZShkc2ksIERTSV9W
SURfVkZQX0xJTkVTLCB2ZnApOwo+IC0JZHNpX3dyaXRlKGRzaSwgRFNJX1ZJRF9WQlBfTElORVMs
IHZicCk7Cj4gKwlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfVklEX1ZBQ1RJVkVfTElORVMs
IHZhY3RpdmUpOwo+ICsJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1ZJRF9WU0FfTElORVMs
IHZzYSk7Cj4gKwlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfVklEX1ZGUF9MSU5FUywgdmZw
KTsKPiArCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9WSURfVkJQX0xJTkVTLCB2YnApOwo+
ICB9Cj4gIAo+ICBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9kcGh5X3RpbWluZ19jb25maWcoc3Ry
dWN0IGR3X21pcGlfZHNpICpkc2kpCj4gQEAgLTcyOSwxOSArNzIzLDI0IEBAIHN0YXRpYyB2b2lk
IGR3X21pcGlfZHNpX2RwaHlfdGltaW5nX2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkK
PiAgCSAqIERTSV9DTURfTU9ERV9DRkcuTUFYX1JEX1BLVF9TSVpFX0xQIChzZWUgQ01EX01PREVf
QUxMX0xQKQo+ICAJICovCj4gIAo+IC0JaHdfdmVyc2lvbiA9IGRzaV9yZWFkKGRzaSwgRFNJX1ZF
UlNJT04pICYgVkVSU0lPTjsKPiArCXJlZ21hcF9yZWFkKGRzaS0+cmVncywgRFNJX1ZFUlNJT04s
ICZod192ZXJzaW9uKTsKPiArCWh3X3ZlcnNpb24gJj0gVkVSU0lPTjsKPiAgCj4gIAlpZiAoaHdf
dmVyc2lvbiA+PSBIV1ZFUl8xMzEpIHsKPiAtCQlkc2lfd3JpdGUoZHNpLCBEU0lfUEhZX1RNUl9D
RkcsIFBIWV9IUzJMUF9USU1FX1YxMzEoMHg0MCkgfAo+IC0JCQkgIFBIWV9MUDJIU19USU1FX1Yx
MzEoMHg0MCkpOwo+IC0JCWRzaV93cml0ZShkc2ksIERTSV9QSFlfVE1SX1JEX0NGRywgTUFYX1JE
X1RJTUVfVjEzMSgxMDAwMCkpOwo+ICsJCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9QSFlf
VE1SX0NGRywKPiArCQkJICAgICBQSFlfSFMyTFBfVElNRV9WMTMxKDB4NDApIHwKPiArCQkJICAg
ICBQSFlfTFAySFNfVElNRV9WMTMxKDB4NDApKTsKPiArCQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdz
LCBEU0lfUEhZX1RNUl9SRF9DRkcsCj4gKwkJCSAgICAgTUFYX1JEX1RJTUVfVjEzMSgxMDAwMCkp
Owo+ICAJfSBlbHNlIHsKPiAtCQlkc2lfd3JpdGUoZHNpLCBEU0lfUEhZX1RNUl9DRkcsIFBIWV9I
UzJMUF9USU1FKDB4NDApIHwKPiAtCQkJICBQSFlfTFAySFNfVElNRSgweDQwKSB8IE1BWF9SRF9U
SU1FKDEwMDAwKSk7Cj4gKwkJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1BIWV9UTVJfQ0ZH
LAo+ICsJCQkgICAgIFBIWV9IUzJMUF9USU1FKDB4NDApIHwKPiArCQkJICAgICBQSFlfTFAySFNf
VElNRSgweDQwKSB8Cj4gKwkJCSAgICAgTUFYX1JEX1RJTUUoMTAwMDApKTsKPiAgCX0KPiAgCj4g
LQlkc2lfd3JpdGUoZHNpLCBEU0lfUEhZX1RNUl9MUENMS19DRkcsIFBIWV9DTEtIUzJMUF9USU1F
KDB4NDApCj4gLQkJICB8IFBIWV9DTEtMUDJIU19USU1FKDB4NDApKTsKPiArCXJlZ21hcF93cml0
ZShkc2ktPnJlZ3MsIERTSV9QSFlfVE1SX0xQQ0xLX0NGRywKPiArCQkgICAgIFBIWV9DTEtIUzJM
UF9USU1FKDB4NDApIHwgUEhZX0NMS0xQMkhTX1RJTUUoMHg0MCkpOwo+ICB9Cj4gIAo+ICBzdGF0
aWMgdm9pZCBkd19taXBpX2RzaV9kcGh5X2ludGVyZmFjZV9jb25maWcoc3RydWN0IGR3X21pcGlf
ZHNpICpkc2kpCj4gQEAgLTc1MSw0NiArNzUwLDQ5IEBAIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNp
X2RwaHlfaW50ZXJmYWNlX2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKPiAgCSAqIHN0
b3Agd2FpdCB0aW1lIHNob3VsZCBiZSB0aGUgbWF4aW11bSBiZXR3ZWVuIGhvc3QgZHNpCj4gIAkg
KiBhbmQgcGFuZWwgc3RvcCB3YWl0IHRpbWVzCj4gIAkgKi8KPiAtCWRzaV93cml0ZShkc2ksIERT
SV9QSFlfSUZfQ0ZHLCBQSFlfU1RPUF9XQUlUX1RJTUUoMHgyMCkgfAo+IC0JCSAgTl9MQU5FUyhk
c2ktPmxhbmVzKSk7Cj4gKwlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfUEhZX0lGX0NGRywK
PiArCQkgICAgIFBIWV9TVE9QX1dBSVRfVElNRSgweDIwKSB8IE5fTEFORVMoZHNpLT5sYW5lcykp
Owo+ICB9Cj4gIAo+ICBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9kcGh5X2luaXQoc3RydWN0IGR3
X21pcGlfZHNpICpkc2kpCj4gIHsKPiAgCS8qIENsZWFyIFBIWSBzdGF0ZSAqLwo+IC0JZHNpX3dy
aXRlKGRzaSwgRFNJX1BIWV9SU1RaLCBQSFlfRElTRk9SQ0VQTEwgfCBQSFlfRElTQUJMRUNMSwo+
IC0JCSAgfCBQSFlfUlNUWiB8IFBIWV9TSFVURE9XTlopOwo+IC0JZHNpX3dyaXRlKGRzaSwgRFNJ
X1BIWV9UU1RfQ1RSTDAsIFBIWV9VTlRFU1RDTFIpOwo+IC0JZHNpX3dyaXRlKGRzaSwgRFNJX1BI
WV9UU1RfQ1RSTDAsIFBIWV9URVNUQ0xSKTsKPiAtCWRzaV93cml0ZShkc2ksIERTSV9QSFlfVFNU
X0NUUkwwLCBQSFlfVU5URVNUQ0xSKTsKPiArCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9Q
SFlfUlNUWiwgUEhZX0RJU0ZPUkNFUExMIHwgUEhZX0RJU0FCTEVDTEsKPiArCQkgICAgIHwgUEhZ
X1JTVFogfCBQSFlfU0hVVERPV05aKTsKPiArCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9Q
SFlfVFNUX0NUUkwwLCBQSFlfVU5URVNUQ0xSKTsKPiArCXJlZ21hcF93cml0ZShkc2ktPnJlZ3Ms
IERTSV9QSFlfVFNUX0NUUkwwLCBQSFlfVEVTVENMUik7Cj4gKwlyZWdtYXBfd3JpdGUoZHNpLT5y
ZWdzLCBEU0lfUEhZX1RTVF9DVFJMMCwgUEhZX1VOVEVTVENMUik7Cj4gIH0KPiAgCj4gIHN0YXRp
YyB2b2lkIGR3X21pcGlfZHNpX2RwaHlfZW5hYmxlKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpKQo+
ICB7Cj4gLQl1MzIgdmFsOwo+ICsJdTMyIHZhbCA9IDA7Cj4gIAlpbnQgcmV0Owo+ICAKPiAtCWRz
aV93cml0ZShkc2ksIERTSV9QSFlfUlNUWiwgUEhZX0VORk9SQ0VQTEwgfCBQSFlfRU5BQkxFQ0xL
IHwKPiAtCQkgIFBIWV9VTlJTVFogfCBQSFlfVU5TSFVURE9XTlopOwo+ICsJcmVnbWFwX3dyaXRl
KGRzaS0+cmVncywgRFNJX1BIWV9SU1RaLCBQSFlfRU5GT1JDRVBMTCB8IFBIWV9FTkFCTEVDTEsg
fAo+ICsJCSAgICAgUEhZX1VOUlNUWiB8IFBIWV9VTlNIVVRET1dOWik7Cj4gIAo+IC0JcmV0ID0g
cmVhZGxfcG9sbF90aW1lb3V0KGRzaS0+YmFzZSArIERTSV9QSFlfU1RBVFVTLCB2YWwsCj4gLQkJ
CQkgdmFsICYgUEhZX0xPQ0ssIDEwMDAsIFBIWV9TVEFUVVNfVElNRU9VVF9VUyk7Cj4gKwlyZXQg
PSByZWdtYXBfcmVhZF9wb2xsX3RpbWVvdXQoZHNpLT5yZWdzLCBEU0lfUEhZX1NUQVRVUywKPiAr
CQkJCSAgICAgICB2YWwsIHZhbCAmIFBIWV9MT0NLLAo+ICsJCQkJICAgICAgIDEwMDAsIFBIWV9T
VEFUVVNfVElNRU9VVF9VUyk7Cj4gIAlpZiAocmV0KQo+ICAJCURSTV9ERUJVR19EUklWRVIoImZh
aWxlZCB0byB3YWl0IHBoeSBsb2NrIHN0YXRlXG4iKTsKPiAgCj4gLQlyZXQgPSByZWFkbF9wb2xs
X3RpbWVvdXQoZHNpLT5iYXNlICsgRFNJX1BIWV9TVEFUVVMsCj4gLQkJCQkgdmFsLCB2YWwgJiBQ
SFlfU1RPUF9TVEFURV9DTEtfTEFORSwgMTAwMCwKPiAtCQkJCSBQSFlfU1RBVFVTX1RJTUVPVVRf
VVMpOwo+ICsJcmV0ID0gcmVnbWFwX3JlYWRfcG9sbF90aW1lb3V0KGRzaS0+cmVncywgRFNJX1BI
WV9TVEFUVVMsCj4gKwkJCQkgICAgICAgdmFsLCB2YWwgJiBQSFlfU1RPUF9TVEFURV9DTEtfTEFO
RSwgMTAwMCwKPiArCQkJCSAgICAgICBQSFlfU1RBVFVTX1RJTUVPVVRfVVMpOwo+ICAJaWYgKHJl
dCkKPiAgCQlEUk1fREVCVUdfRFJJVkVSKCJmYWlsZWQgdG8gd2FpdCBwaHkgY2xrIGxhbmUgc3Rv
cCBzdGF0ZVxuIik7Cj4gIH0KPiAgCj4gIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2NsZWFyX2Vy
cihzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKPiAgewo+IC0JZHNpX3JlYWQoZHNpLCBEU0lfSU5U
X1NUMCk7Cj4gLQlkc2lfcmVhZChkc2ksIERTSV9JTlRfU1QxKTsKPiAtCWRzaV93cml0ZShkc2ks
IERTSV9JTlRfTVNLMCwgMCk7Cj4gLQlkc2lfd3JpdGUoZHNpLCBEU0lfSU5UX01TSzEsIDApOwo+
ICsJdTMyIHZhbDsKPiArCj4gKwlyZWdtYXBfcmVhZChkc2ktPnJlZ3MsIERTSV9JTlRfU1QwLCAm
dmFsKTsKPiArCXJlZ21hcF9yZWFkKGRzaS0+cmVncywgRFNJX0lOVF9TVDEsICZ2YWwpOwo+ICsJ
cmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX0lOVF9NU0swLCAwKTsKPiArCXJlZ21hcF93cml0
ZShkc2ktPnJlZ3MsIERTSV9JTlRfTVNLMSwgMCk7Cj4gIH0KPiAgCj4gIHN0YXRpYyB2b2lkIGR3
X21pcGlfZHNpX2JyaWRnZV9wb3N0X2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkK
PiBAQCAtOTk2LDEzICs5OTgsMTAgQEAgX19kd19taXBpX2RzaV9wcm9iZShzdHJ1Y3QgcGxhdGZv
cm1fZGV2aWNlICpwZGV2LAo+ICAJCXJldHVybiBFUlJfUFRSKC1FTk9ERVYpOwo+ICAJfQo+ICAK
PiAtCWlmICghcGxhdF9kYXRhLT5iYXNlKSB7Cj4gLQkJZHNpLT5iYXNlID0gZGV2bV9wbGF0Zm9y
bV9pb3JlbWFwX3Jlc291cmNlKHBkZXYsIDApOwo+IC0JCWlmIChJU19FUlIoZHNpLT5iYXNlKSkK
PiAtCQkJcmV0dXJuIEVSUl9QVFIoLUVOT0RFVik7Cj4gLQo+IC0JfSBlbHNlIHsKPiAtCQlkc2kt
PmJhc2UgPSBwbGF0X2RhdGEtPmJhc2U7Cj4gKwlkc2ktPnJlZ3MgPSBwbGF0X2RhdGEtPnJlZ3M7
Cj4gKwlpZiAoIWRzaS0+cmVncykgewo+ICsJCURSTV9FUlJPUigiRFNJIHJlZ21hcCBub3Qgc3Vw
cGxpZWQgYnkgcGxhdGZvcm0gZHJpdmVyXG4iKTsKPiArCQlyZXR1cm4gRVJSX1BUUigtRU5PREVW
KTsKPiAgCX0KPiAgCj4gIAlkc2ktPnBjbGsgPSBkZXZtX2Nsa19nZXQoZGV2LCAicGNsayIpOwo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvZHctbWlwaS1kc2ktcm9ja2No
aXAuYyBiL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9kdy1taXBpLWRzaS1yb2NrY2hpcC5jCj4g
aW5kZXggYmMwNzNlYzVjMTgzLi4zYzMzZWQxZmE4MDUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3JvY2tjaGlwL2R3LW1pcGktZHNpLXJvY2tjaGlwLmMKPiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vcm9ja2NoaXAvZHctbWlwaS1kc2ktcm9ja2NoaXAuYwo+IEBAIC0yNCw2ICsyNCw4IEBA
Cj4gICNpbmNsdWRlICJyb2NrY2hpcF9kcm1fZHJ2LmgiCj4gICNpbmNsdWRlICJyb2NrY2hpcF9k
cm1fdm9wLmgiCj4gIAo+ICsjZGVmaW5lIERSSVZFUl9OQU1FICJkdy1taXBpLWRzaS1yb2NrY2hp
cCIKPiArCj4gICNkZWZpbmUgRFNJX1BIWV9SU1RaCQkJMHhhMAo+ICAjZGVmaW5lIFBIWV9ESVNG
T1JDRVBMTAkJCTAKPiAgI2RlZmluZSBQSFlfRU5GT1JDRVBMTAkJCUJJVCgzKQo+IEBAIC0yMTIs
NyArMjE0LDcgQEAgc3RydWN0IHJvY2tjaGlwX2R3X2RzaV9jaGlwX2RhdGEgewo+ICBzdHJ1Y3Qg
ZHdfbWlwaV9kc2lfcm9ja2NoaXAgewo+ICAJc3RydWN0IGRldmljZSAqZGV2Owo+ICAJc3RydWN0
IGRybV9lbmNvZGVyIGVuY29kZXI7Cj4gLQl2b2lkIF9faW9tZW0gKmJhc2U7Cj4gKwlzdHJ1Y3Qg
cmVnbWFwICpyZWdzOwo+ICAKPiAgCXN0cnVjdCByZWdtYXAgKmdyZl9yZWdtYXA7Cj4gIAlzdHJ1
Y3QgY2xrICpwbGxyZWZfY2xrOwo+IEBAIC0yOTcsMTIgKzI5OSwxNSBAQCBzdGF0aWMgaW50IG1h
eF9tYnBzX3RvX3BhcmFtZXRlcih1bnNpZ25lZCBpbnQgbWF4X21icHMpCj4gIAo+ICBzdGF0aWMg
aW5saW5lIHZvaWQgZHNpX3dyaXRlKHN0cnVjdCBkd19taXBpX2RzaV9yb2NrY2hpcCAqZHNpLCB1
MzIgcmVnLCB1MzIgdmFsKQo+ICB7Cj4gLQl3cml0ZWwodmFsLCBkc2ktPmJhc2UgKyByZWcpOwo+
ICsJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgcmVnLCB2YWwpOwo+ICB9Cj4gIAo+ICBzdGF0aWMg
aW5saW5lIHUzMiBkc2lfcmVhZChzdHJ1Y3QgZHdfbWlwaV9kc2lfcm9ja2NoaXAgKmRzaSwgdTMy
IHJlZykKPiAgewo+IC0JcmV0dXJuIHJlYWRsKGRzaS0+YmFzZSArIHJlZyk7Cj4gKwl1MzIgdmFs
Owo+ICsKPiArCXJlZ21hcF9yZWFkKGRzaS0+cmVncywgcmVnLCAmdmFsKTsKPiArCXJldHVybiB2
YWw7Cj4gIH0KPiAgCj4gIHN0YXRpYyBpbmxpbmUgdm9pZCBkc2lfc2V0KHN0cnVjdCBkd19taXBp
X2RzaV9yb2NrY2hpcCAqZHNpLCB1MzIgcmVnLCB1MzIgbWFzaykKPiBAQCAtODg0LDYgKzg4OSwx
MyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGR3X21pcGlfZHNpX2hvc3Rfb3BzIGR3X21pcGlfZHNp
X3JvY2tjaGlwX2hvc3Rfb3BzID0gewo+ICAJLmRldGFjaCA9IGR3X21pcGlfZHNpX3JvY2tjaGlw
X2hvc3RfZGV0YWNoLAo+ICB9Owo+ICAKPiArc3RhdGljIGNvbnN0IHN0cnVjdCByZWdtYXBfY29u
ZmlnIHJvY2tjaGlwX2RzaV9yZWdtYXBfY29uZmlnID0gewo+ICsJLnJlZ19iaXRzID0gMzIsCj4g
KwkudmFsX2JpdHMgPSAzMiwKPiArCS5yZWdfc3RyaWRlID0gNCwKPiArCS5uYW1lID0gRFJJVkVS
X05BTUUsCj4gK307Cj4gKwo+ICBzdGF0aWMgaW50IGR3X21pcGlfZHNpX3JvY2tjaGlwX3Byb2Jl
KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gIHsKPiAgCXN0cnVjdCBkZXZpY2UgKmRl
diA9ICZwZGV2LT5kZXY7Cj4gQEAgLTg5Miw2ICs5MDQsNyBAQCBzdGF0aWMgaW50IGR3X21pcGlf
ZHNpX3JvY2tjaGlwX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gIAlzdHJ1
Y3QgcmVzb3VyY2UgKnJlczsKPiAgCWNvbnN0IHN0cnVjdCByb2NrY2hpcF9kd19kc2lfY2hpcF9k
YXRhICpjZGF0YSA9Cj4gIAkJCQlvZl9kZXZpY2VfZ2V0X21hdGNoX2RhdGEoZGV2KTsKPiArCXZv
aWQgX19pb21lbSAqcmVnczsKPiAgCWludCByZXQsIGk7Cj4gIAo+ICAJZHNpID0gZGV2bV9remFs
bG9jKGRldiwgc2l6ZW9mKCpkc2kpLCBHRlBfS0VSTkVMKTsKPiBAQCAtODk5LDEwICs5MTIsMTcg
QEAgc3RhdGljIGludCBkd19taXBpX2RzaV9yb2NrY2hpcF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1f
ZGV2aWNlICpwZGV2KQo+ICAJCXJldHVybiAtRU5PTUVNOwo+ICAKPiAgCXJlcyA9IHBsYXRmb3Jt
X2dldF9yZXNvdXJjZShwZGV2LCBJT1JFU09VUkNFX01FTSwgMCk7Cj4gLQlkc2ktPmJhc2UgPSBk
ZXZtX2lvcmVtYXBfcmVzb3VyY2UoZGV2LCByZXMpOwo+IC0JaWYgKElTX0VSUihkc2ktPmJhc2Up
KSB7Cj4gKwlyZWdzID0gZGV2bV9pb3JlbWFwX3Jlc291cmNlKGRldiwgcmVzKTsKPiArCWlmIChJ
U19FUlIocmVncykpIHsKPiAgCQlEUk1fREVWX0VSUk9SKGRldiwgIlVuYWJsZSB0byBnZXQgZHNp
IHJlZ2lzdGVyc1xuIik7Cj4gLQkJcmV0dXJuIFBUUl9FUlIoZHNpLT5iYXNlKTsKPiArCQlyZXR1
cm4gUFRSX0VSUihyZWdzKTsKPiArCX0KPiArCj4gKwlkc2ktPnJlZ3MgPSBkZXZtX3JlZ21hcF9p
bml0X21taW8oZGV2LCByZWdzLAo+ICsJCQkJCSAgJnJvY2tjaGlwX2RzaV9yZWdtYXBfY29uZmln
KTsKPiArCWlmIChJU19FUlIoZHNpLT5yZWdzKSkgewo+ICsJCURSTV9ERVZfRVJST1IoZGV2LCAi
VW5hYmxlIHRvIGNyZWF0ZSBEU0kgcmVnbWFwXG4iKTsKPiArCQlyZXR1cm4gUFRSX0VSUihkc2kt
PnJlZ3MpOwo+ICAJfQo+ICAKPiAgCWkgPSAwOwo+IEBAIC05NTQsNyArOTc0LDcgQEAgc3RhdGlj
IGludCBkd19taXBpX2RzaV9yb2NrY2hpcF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpw
ZGV2KQo+ICAJfQo+ICAKPiAgCWRzaS0+ZGV2ID0gZGV2Owo+IC0JZHNpLT5wZGF0YS5iYXNlID0g
ZHNpLT5iYXNlOwo+ICsJZHNpLT5wZGF0YS5yZWdzID0gZHNpLT5yZWdzOwo+ICAJZHNpLT5wZGF0
YS5tYXhfZGF0YV9sYW5lcyA9IGRzaS0+Y2RhdGEtPm1heF9kYXRhX2xhbmVzOwo+ICAJZHNpLT5w
ZGF0YS5waHlfb3BzID0gJmR3X21pcGlfZHNpX3JvY2tjaGlwX3BoeV9vcHM7Cj4gIAlkc2ktPnBk
YXRhLmhvc3Rfb3BzID0gJmR3X21pcGlfZHNpX3JvY2tjaGlwX2hvc3Rfb3BzOwo+IEBAIC0xMDcy
LDYgKzEwOTIsNiBAQCBzdHJ1Y3QgcGxhdGZvcm1fZHJpdmVyIGR3X21pcGlfZHNpX3JvY2tjaGlw
X2RyaXZlciA9IHsKPiAgCS5yZW1vdmUJCT0gZHdfbWlwaV9kc2lfcm9ja2NoaXBfcmVtb3ZlLAo+
ICAJLmRyaXZlcgkJPSB7Cj4gIAkJLm9mX21hdGNoX3RhYmxlID0gZHdfbWlwaV9kc2lfcm9ja2No
aXBfZHRfaWRzLAo+IC0JCS5uYW1lCT0gImR3LW1pcGktZHNpLXJvY2tjaGlwIiwKPiArCQkubmFt
ZQk9IERSSVZFUl9OQU1FLAo+ICAJfSwKPiAgfTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3N0bS9kd19taXBpX2RzaS1zdG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9zdG0vZHdfbWlwaV9k
c2ktc3RtLmMKPiBpbmRleCA1MTRlZmVmYjAwMTYuLmNjMjMzMjcxMzQ3YiAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vc3RtL2R3X21pcGlfZHNpLXN0bS5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL3N0bS9kd19taXBpX2RzaS1zdG0uYwo+IEBAIC0xMiw2ICsxMiw3IEBACj4gICNpbmNs
dWRlIDxsaW51eC9tb2R1bGUuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5o
Pgo+ICAjaW5jbHVkZSA8bGludXgvcmVndWxhdG9yL2NvbnN1bWVyLmg+Cj4gKyNpbmNsdWRlIDxs
aW51eC9yZWdtYXAuaD4KPiAgCj4gICNpbmNsdWRlIDx2aWRlby9taXBpX2Rpc3BsYXkuaD4KPiAg
Cj4gQEAgLTE5LDYgKzIwLDggQEAKPiAgI2luY2x1ZGUgPGRybS9kcm1fbWlwaV9kc2kuaD4KPiAg
I2luY2x1ZGUgPGRybS9kcm1fcHJpbnQuaD4KPiAgCj4gKyNkZWZpbmUgRFJJVkVSX05BTUUgInN0
bTMyLWRpc3BsYXktZHNpIgo+ICsKPiAgI2RlZmluZSBIV1ZFUl8xMzAJCQkweDMxMzMzMDAwCS8q
IElQIHZlcnNpb24gMS4zMCAqLwo+ICAjZGVmaW5lIEhXVkVSXzEzMQkJCTB4MzEzMzMxMDAJLyog
SVAgdmVyc2lvbiAxLjMxICovCj4gIAo+IEBAIC03NSw3ICs3OCw3IEBAIGVudW0gZHNpX2NvbG9y
IHsKPiAgI2RlZmluZSBUSU1FT1VUX1VTCTIwMDAwMAo+ICAKPiAgc3RydWN0IGR3X21pcGlfZHNp
X3N0bSB7Cj4gLQl2b2lkIF9faW9tZW0gKmJhc2U7Cj4gKwlzdHJ1Y3QgcmVnbWFwICpyZWdzOwo+
ICAJc3RydWN0IGNsayAqcGxscmVmX2NsazsKPiAgCXN0cnVjdCBkd19taXBpX2RzaSAqZHNpOwo+
ICAJdTMyIGh3X3ZlcnNpb247Cj4gQEAgLTg2LDEyICs4OSwxNSBAQCBzdHJ1Y3QgZHdfbWlwaV9k
c2lfc3RtIHsKPiAgCj4gIHN0YXRpYyBpbmxpbmUgdm9pZCBkc2lfd3JpdGUoc3RydWN0IGR3X21p
cGlfZHNpX3N0bSAqZHNpLCB1MzIgcmVnLCB1MzIgdmFsKQo+ICB7Cj4gLQl3cml0ZWwodmFsLCBk
c2ktPmJhc2UgKyByZWcpOwo+ICsJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgcmVnLCB2YWwpOwo+
ICB9Cj4gIAo+ICBzdGF0aWMgaW5saW5lIHUzMiBkc2lfcmVhZChzdHJ1Y3QgZHdfbWlwaV9kc2lf
c3RtICpkc2ksIHUzMiByZWcpCj4gIHsKPiAtCXJldHVybiByZWFkbChkc2ktPmJhc2UgKyByZWcp
Owo+ICsJdTMyIHZhbDsKPiArCj4gKwlyZWdtYXBfcmVhZChkc2ktPnJlZ3MsIHJlZywgJnZhbCk7
Cj4gKwlyZXR1cm4gdmFsOwo+ICB9Cj4gIAo+ICBzdGF0aWMgaW5saW5lIHZvaWQgZHNpX3NldChz
dHJ1Y3QgZHdfbWlwaV9kc2lfc3RtICpkc2ksIHUzMiByZWcsIHUzMiBtYXNrKQo+IEBAIC0yMDIs
MTUgKzIwOCwxNSBAQCBzdGF0aWMgaW50IGR3X21pcGlfZHNpX3BoeV9pbml0KHZvaWQgKnByaXZf
ZGF0YSkKPiAgCj4gIAkvKiBFbmFibGUgdGhlIHJlZ3VsYXRvciAqLwo+ICAJZHNpX3NldChkc2ks
IERTSV9XUlBDUiwgV1JQQ1JfUkVHRU4gfCBXUlBDUl9CR1JFTik7Cj4gLQlyZXQgPSByZWFkbF9w
b2xsX3RpbWVvdXQoZHNpLT5iYXNlICsgRFNJX1dJU1IsIHZhbCwgdmFsICYgV0lTUl9SUlMsCj4g
LQkJCQkgU0xFRVBfVVMsIFRJTUVPVVRfVVMpOwo+ICsJcmV0ID0gcmVnbWFwX3JlYWRfcG9sbF90
aW1lb3V0KGRzaS0+cmVncywgRFNJX1dJU1IsIHZhbCwgdmFsICYgV0lTUl9SUlMsCj4gKwkJCQkg
ICAgICAgU0xFRVBfVVMsIFRJTUVPVVRfVVMpOwo+ICAJaWYgKHJldCkKPiAgCQlEUk1fREVCVUdf
RFJJVkVSKCIhVElNRU9VVCEgd2FpdGluZyBSRUdVLCBsZXQncyBjb250aW51ZVxuIik7Cj4gIAo+
ICAJLyogRW5hYmxlIHRoZSBEU0kgUExMICYgd2FpdCBmb3IgaXRzIGxvY2sgKi8KPiAgCWRzaV9z
ZXQoZHNpLCBEU0lfV1JQQ1IsIFdSUENSX1BMTEVOKTsKPiAtCXJldCA9IHJlYWRsX3BvbGxfdGlt
ZW91dChkc2ktPmJhc2UgKyBEU0lfV0lTUiwgdmFsLCB2YWwgJiBXSVNSX1BMTExTLAo+IC0JCQkJ
IFNMRUVQX1VTLCBUSU1FT1VUX1VTKTsKPiArCXJldCA9IHJlZ21hcF9yZWFkX3BvbGxfdGltZW91
dChkc2ktPnJlZ3MsIERTSV9XSVNSLCB2YWwsCj4gKwkJCQkgICAgICAgdmFsICYgV0lTUl9QTExM
UywgU0xFRVBfVVMsIFRJTUVPVVRfVVMpOwo+ICAJaWYgKHJldCkKPiAgCQlEUk1fREVCVUdfRFJJ
VkVSKCIhVElNRU9VVCEgd2FpdGluZyBQTEwsIGxldCdzIGNvbnRpbnVlXG4iKTsKPiAgCj4gQEAg
LTMyNywxMiArMzMzLDIwIEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIGR3X21p
cGlfZHNpX3N0bV9kdF9pZHNbXSA9IHsKPiAgfTsKPiAgTU9EVUxFX0RFVklDRV9UQUJMRShvZiwg
ZHdfbWlwaV9kc2lfc3RtX2R0X2lkcyk7Cj4gIAo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IHJlZ21h
cF9jb25maWcgc3RtX2RzaV9yZWdtYXBfY29uZmlnID0gewo+ICsJLnJlZ19iaXRzID0gMzIsCj4g
KwkudmFsX2JpdHMgPSAzMiwKPiArCS5yZWdfc3RyaWRlID0gNCwKPiArCS5uYW1lID0gRFJJVkVS
X05BTUUsCj4gK307Cj4gKwo+ICBzdGF0aWMgaW50IGR3X21pcGlfZHNpX3N0bV9wcm9iZShzdHJ1
Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQo+ICB7Cj4gIAlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAm
cGRldi0+ZGV2Owo+ICAJc3RydWN0IGR3X21pcGlfZHNpX3N0bSAqZHNpOwo+ICAJc3RydWN0IGNs
ayAqcGNsazsKPiAgCXN0cnVjdCByZXNvdXJjZSAqcmVzOwo+ICsJdm9pZCBfX2lvbWVtICpyZWdz
Owo+ICAJaW50IHJldDsKPiAgCj4gIAlkc2kgPSBkZXZtX2t6YWxsb2MoZGV2LCBzaXplb2YoKmRz
aSksIEdGUF9LRVJORUwpOwo+IEBAIC0zNDAsMTMgKzM1NCwxOSBAQCBzdGF0aWMgaW50IGR3X21p
cGlfZHNpX3N0bV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQo+ICAJCXJldHVy
biAtRU5PTUVNOwo+ICAKPiAgCXJlcyA9IHBsYXRmb3JtX2dldF9yZXNvdXJjZShwZGV2LCBJT1JF
U09VUkNFX01FTSwgMCk7Cj4gLQlkc2ktPmJhc2UgPSBkZXZtX2lvcmVtYXBfcmVzb3VyY2UoZGV2
LCByZXMpOwo+IC0JaWYgKElTX0VSUihkc2ktPmJhc2UpKSB7Cj4gLQkJcmV0ID0gUFRSX0VSUihk
c2ktPmJhc2UpOwo+ICsJcmVncyA9IGRldm1faW9yZW1hcF9yZXNvdXJjZShkZXYsIHJlcyk7Cj4g
KwlpZiAoSVNfRVJSKHJlZ3MpKSB7Cj4gKwkJcmV0ID0gUFRSX0VSUihyZWdzKTsKPiAgCQlEUk1f
RVJST1IoIlVuYWJsZSB0byBnZXQgZHNpIHJlZ2lzdGVycyAlZFxuIiwgcmV0KTsKPiAgCQlyZXR1
cm4gcmV0Owo+ICAJfQo+ICAKPiArCWRzaS0+cmVncyA9IGRldm1fcmVnbWFwX2luaXRfbW1pbyhk
ZXYsIHJlZ3MsICZzdG1fZHNpX3JlZ21hcF9jb25maWcpOwo+ICsJaWYgKElTX0VSUihkc2ktPnJl
Z3MpKSB7Cj4gKwkJRFJNX0RFVl9FUlJPUihkZXYsICJVbmFibGUgdG8gY3JlYXRlIERTSSByZWdt
YXBcbiIpOwo+ICsJCXJldHVybiBQVFJfRVJSKGRzaS0+cmVncyk7Cj4gKwl9Cj4gKwo+ICAJZHNp
LT52ZGRfc3VwcGx5ID0gZGV2bV9yZWd1bGF0b3JfZ2V0KGRldiwgInBoeS1kc2kiKTsKPiAgCWlm
IChJU19FUlIoZHNpLT52ZGRfc3VwcGx5KSkgewo+ICAJCXJldCA9IFBUUl9FUlIoZHNpLT52ZGRf
c3VwcGx5KTsKPiBAQCAtMzk2LDcgKzQxNiw3IEBAIHN0YXRpYyBpbnQgZHdfbWlwaV9kc2lfc3Rt
X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gIAkJZ290byBlcnJfZHNpX3By
b2JlOwo+ICAJfQo+ICAKPiAtCWR3X21pcGlfZHNpX3N0bV9wbGF0X2RhdGEuYmFzZSA9IGRzaS0+
YmFzZTsKPiArCWR3X21pcGlfZHNpX3N0bV9wbGF0X2RhdGEucmVncyA9IGRzaS0+cmVnczsKPiAg
CWR3X21pcGlfZHNpX3N0bV9wbGF0X2RhdGEucHJpdl9kYXRhID0gZHNpOwo+ICAKPiAgCXBsYXRm
b3JtX3NldF9kcnZkYXRhKHBkZXYsIGRzaSk7Cj4gQEAgLTQ3NCw3ICs0OTQsNyBAQCBzdGF0aWMg
c3RydWN0IHBsYXRmb3JtX2RyaXZlciBkd19taXBpX2RzaV9zdG1fZHJpdmVyID0gewo+ICAJLnJl
bW92ZQkJPSBkd19taXBpX2RzaV9zdG1fcmVtb3ZlLAo+ICAJLmRyaXZlcgkJPSB7Cj4gIAkJLm9m
X21hdGNoX3RhYmxlID0gZHdfbWlwaV9kc2lfc3RtX2R0X2lkcywKPiAtCQkubmFtZQk9ICJzdG0z
Mi1kaXNwbGF5LWRzaSIsCj4gKwkJLm5hbWUJPSBEUklWRVJfTkFNRSwKPiAgCQkucG0gPSAmZHdf
bWlwaV9kc2lfc3RtX3BtX29wcywKPiAgCX0sCj4gIH07Cj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUv
ZHJtL2JyaWRnZS9kd19taXBpX2RzaS5oIGIvaW5jbHVkZS9kcm0vYnJpZGdlL2R3X21pcGlfZHNp
LmgKPiBpbmRleCA5NGNjNjRhMzQyZTEuLmVjYzE4OTdlZmE2MiAxMDA2NDQKPiAtLS0gYS9pbmNs
dWRlL2RybS9icmlkZ2UvZHdfbWlwaV9kc2kuaAo+ICsrKyBiL2luY2x1ZGUvZHJtL2JyaWRnZS9k
d19taXBpX2RzaS5oCj4gQEAgLTM3LDcgKzM3LDcgQEAgc3RydWN0IGR3X21pcGlfZHNpX2hvc3Rf
b3BzIHsKPiAgfTsKPiAgCj4gIHN0cnVjdCBkd19taXBpX2RzaV9wbGF0X2RhdGEgewo+IC0Jdm9p
ZCBfX2lvbWVtICpiYXNlOwo+ICsJc3RydWN0IHJlZ21hcCAqcmVnczsKPiAgCXVuc2lnbmVkIGlu
dCBtYXhfZGF0YV9sYW5lczsKPiAgCj4gIAllbnVtIGRybV9tb2RlX3N0YXR1cyAoKm1vZGVfdmFs
aWQpKHZvaWQgKnByaXZfZGF0YSwKPiAKCk9LIGZvciB0aGUgZHctbWlwaS1kc2kgY2hhbmdlcywg
YnV0IHdoeSBzaG91bGQgdGhlIGR3X21pcGlfZHNpLXN0bSBiZSBjaGFuZ2VkIGFzd2VsbCA/CgpB
RkFJSyB0aGVzZSBhcmUgaW5kZXBlbmRlbnQuCgpOZWlsCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
