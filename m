Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EF2891A960F
	for <lists+dri-devel@lfdr.de>; Wed, 15 Apr 2020 10:17:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 630DE6E90E;
	Wed, 15 Apr 2020 08:17:56 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-oi1-x242.google.com (mail-oi1-x242.google.com
 [IPv6:2607:f8b0:4864:20::242])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 70D346E908
 for <dri-devel@lists.freedesktop.org>; Wed, 15 Apr 2020 08:17:54 +0000 (UTC)
Received: by mail-oi1-x242.google.com with SMTP id o25so12770336oic.11
 for <dri-devel@lists.freedesktop.org>; Wed, 15 Apr 2020 01:17:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=+JmTOeIwr7i+ixdxdNVBM+tjIczQkeGYYiYkQWIGWlo=;
 b=geYxb6C1Db6+CcOjVa7gnrIF63SCrKgn2aVse3j/t9tH44b80OY41Rqom3q6QLKOyJ
 iGWPrke8Phm6AsUFvWlCt8rfujL7ylmf8403A2SaeKDcG6hjlHpHoncGjG1xamtaKShm
 iTs9MPySr0uj/vLVv2IYsUTsCq1tgNWqPFdv4=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=+JmTOeIwr7i+ixdxdNVBM+tjIczQkeGYYiYkQWIGWlo=;
 b=bNhmqHwumBpwB+Nwdx3Z6CRR79E/xuaZjlygiNEn9CQQu0AJ1dyzMqJmIyiTD3Cr6Q
 nRnOJm0u1bSvcPretMRIy/n6sFmY7Mf4nhSiu1t8urUTCMmOwvOsgE5pYpIhMHTISnN1
 S6F7x0lQGX2OMTopfZRFKJPIxhVG33dmL/bRLlosvU963jlFafm/ism2e/Mt+eSGYhAn
 G+nlJeZZfDI2O2K4iEDGLnFw1Rzi8V8qhktah/hsY20qIQKSliVVUld16bzOYLGV8tdF
 VNVRuTs+8xyelHPiEDaDbjfO3YWclIFgGEJAkJZuR21u6WJ3M2WPXT41Rx1FGwFwvJse
 ssLQ==
X-Gm-Message-State: AGi0PuZYIQ6YI6erPWOHl3aK6RT5HKj8rc2QsDZepOP3axsg4ayI2gFV
 OfYesFsrnnH7HeAqK+QKfn6h2gyAxuKtZAlV3QD2+Q==
X-Google-Smtp-Source: APiQypKi/bMGLQXqFc05UGZtx+YyhjASJyJPlMmuSuNNYfubsvRFrwaP1cisbGEfK4pDPXC8ASWk/bF5NoJFYfJKQmI=
X-Received: by 2002:aca:4408:: with SMTP id r8mr16237631oia.14.1586938673780; 
 Wed, 15 Apr 2020 01:17:53 -0700 (PDT)
MIME-Version: 1.0
References: <20200415074034.175360-1-daniel.vetter@ffwll.ch>
 <20200415074034.175360-58-daniel.vetter@ffwll.ch>
 <d33d1565-1c1a-a926-01a1-cf01691ec84d@suse.de>
 <CAKMK7uHxN62MUJrFtWJ7oKjYPnrrMHPLZgSNVZX21BAsM=8P2w@mail.gmail.com>
In-Reply-To: <CAKMK7uHxN62MUJrFtWJ7oKjYPnrrMHPLZgSNVZX21BAsM=8P2w@mail.gmail.com>
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Wed, 15 Apr 2020 10:17:42 +0200
Message-ID: <CAKMK7uEiA0SxSWBWkyfTJpo0BBr9aekzc6fa3P-HQqEjmuB8TQ@mail.gmail.com>
Subject: Re: [PATCH 57/59] drm/ast: Use managed pci functions
To: Thomas Zimmermann <tzimmermann@suse.de>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 Gerd Hoffmann <kraxel@redhat.com>, Dave Airlie <airlied@redhat.com>,
 Daniel Vetter <daniel.vetter@intel.com>, Sam Ravnborg <sam@ravnborg.org>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>,
 Emil Velikov <emil.velikov@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBBcHIgMTUsIDIwMjAgYXQgMTA6MDkgQU0gRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZl
dHRlckBmZndsbC5jaD4gd3JvdGU6Cj4KPiBPbiBXZWQsIEFwciAxNSwgMjAyMCBhdCA5OjUyIEFN
IFRob21hcyBaaW1tZXJtYW5uIDx0emltbWVybWFubkBzdXNlLmRlPiB3cm90ZToKPiA+Cj4gPiBI
aSBEYW5pZWwKPiA+Cj4gPiBBbSAxNS4wNC4yMCB1bSAwOTo0MCBzY2hyaWViIERhbmllbCBWZXR0
ZXI6Cj4gPiA+IEFsbG93cyB1cyB0byByZW1vdmUgYSBiaXQgb2YgY2xlYW51cCBjb2RlLgo+ID4g
Pgo+ID4gPiBTaWduZWQtb2ZmLWJ5OiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGludGVs
LmNvbT4KPiA+ID4gQ2M6IERhdmUgQWlybGllIDxhaXJsaWVkQHJlZGhhdC5jb20+Cj4gPiA+IENj
OiBUaG9tYXMgWmltbWVybWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4KPiA+ID4gQ2M6IEdlcmQg
SG9mZm1hbm4gPGtyYXhlbEByZWRoYXQuY29tPgo+ID4gPiBDYzogRGFuaWVsIFZldHRlciA8ZGFu
aWVsLnZldHRlckBmZndsbC5jaD4KPiA+ID4gQ2M6IEVtaWwgVmVsaWtvdiA8ZW1pbC52ZWxpa292
QGNvbGxhYm9yYS5jb20+Cj4gPiA+IENjOiAiTm9yYWxmIFRyw7hubmVzIiA8bm9yYWxmQHRyb25u
ZXMub3JnPgo+ID4gPiBDYzogU2FtIFJhdm5ib3JnIDxzYW1AcmF2bmJvcmcub3JnPgo+ID4gPiBD
YzogIkNocmlzdGlhbiBLw7ZuaWciIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Cj4gPiA+IENj
OiAiWS5DLiBDaGVuIiA8eWNfY2hlbkBhc3BlZWR0ZWNoLmNvbT4KPiA+ID4gLS0tCj4gPiA+ICBk
cml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9kcnYuYyAgfCAxMCArKystLS0tLS0tCj4gPiA+ICBkcml2
ZXJzL2dwdS9kcm0vYXN0L2FzdF9tYWluLmMgfCAgMyAtLS0KPiA+ID4gIDIgZmlsZXMgY2hhbmdl
ZCwgMyBpbnNlcnRpb25zKCspLCAxMCBkZWxldGlvbnMoLSkKPiA+ID4KPiA+ID4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2FzdC9h
c3RfZHJ2LmMKPiA+ID4gaW5kZXggYjdiYTIyZGRkY2FkLi40OGE5Y2M0ZTA4MGEgMTAwNjQ0Cj4g
PiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X2Rydi5jCj4gPiA+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hc3QvYXN0X2Rydi5jCj4gPiA+IEBAIC05MSwxNSArOTEsMTMgQEAgc3RhdGlj
IGludCBhc3RfcGNpX3Byb2JlKHN0cnVjdCBwY2lfZGV2ICpwZGV2LCBjb25zdCBzdHJ1Y3QgcGNp
X2RldmljZV9pZCAqZW50KQo+ID4gPgo+ID4gPiAgICAgICBhc3Rfa2lja19vdXRfZmlybXdhcmVf
ZmIocGRldik7Cj4gPiA+Cj4gPiA+IC0gICAgIHJldCA9IHBjaV9lbmFibGVfZGV2aWNlKHBkZXYp
Owo+ID4gPiArICAgICByZXQgPSBwY2ltX2VuYWJsZV9kZXZpY2UocGRldik7Cj4gPiA+ICAgICAg
IGlmIChyZXQpCj4gPiA+ICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+ID4KPiA+ID4gICAg
ICAgZGV2ID0gZHJtX2Rldl9hbGxvYygmZHJpdmVyLCAmcGRldi0+ZGV2KTsKPiA+ID4gLSAgICAg
aWYgKElTX0VSUihkZXYpKSB7Cj4gPiA+IC0gICAgICAgICAgICAgcmV0ID0gUFRSX0VSUihkZXYp
Owo+ID4gPiAtICAgICAgICAgICAgIGdvdG8gZXJyX3BjaV9kaXNhYmxlX2RldmljZTsKPiA+ID4g
LSAgICAgfQo+ID4gPiArICAgICBpZiAoSVNfRVJSKGRldikpCj4gPiA+ICsgICAgICAgICAgICAg
cmV0dXJuICBQVFJfRVJSKGRldik7Cj4gPiA+Cj4gPiA+ICAgICAgIGRldi0+cGRldiA9IHBkZXY7
Cj4gPiA+ICAgICAgIHBjaV9zZXRfZHJ2ZGF0YShwZGV2LCBkZXYpOwo+ID4gPiBAQCAtMTIwLDgg
KzExOCw2IEBAIHN0YXRpYyBpbnQgYXN0X3BjaV9wcm9iZShzdHJ1Y3QgcGNpX2RldiAqcGRldiwg
Y29uc3Qgc3RydWN0IHBjaV9kZXZpY2VfaWQgKmVudCkKPiA+ID4gICAgICAgYXN0X2RyaXZlcl91
bmxvYWQoZGV2KTsKPiA+ID4gIGVycl9kcm1fZGV2X3B1dDoKPiA+ID4gICAgICAgZHJtX2Rldl9w
dXQoZGV2KTsKPiA+ID4gLWVycl9wY2lfZGlzYWJsZV9kZXZpY2U6Cj4gPiA+IC0gICAgIHBjaV9k
aXNhYmxlX2RldmljZShwZGV2KTsKPiA+ID4gICAgICAgcmV0dXJuIHJldDsKPiA+ID4KPiA+ID4g
IH0KPiA+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X21haW4uYyBiL2Ry
aXZlcnMvZ3B1L2RybS9hc3QvYXN0X21haW4uYwo+ID4gPiBpbmRleCBlNTM5OGUzZGFiZTcuLjFi
MzU3MjhhZDg3MSAxMDA2NDQKPiA+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbWFp
bi5jCj4gPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X21haW4uYwo+ID4gPiBAQCAt
NTMxLDggKzUzMSw1IEBAIHZvaWQgYXN0X2RyaXZlcl91bmxvYWQoc3RydWN0IGRybV9kZXZpY2Ug
KmRldikKPiA+ID4gICAgICAgZHJtX21vZGVfY29uZmlnX2NsZWFudXAoZGV2KTsKPiA+ID4KPiA+
ID4gICAgICAgYXN0X21tX2ZpbmkoYXN0KTsKPiA+ID4gLSAgICAgaWYgKGFzdC0+aW9yZWdzICE9
IGFzdC0+cmVncyArIEFTVF9JT19NTV9PRkZTRVQpCj4gPiA+IC0gICAgICAgICAgICAgcGNpX2lv
dW5tYXAoZGV2LT5wZGV2LCBhc3QtPmlvcmVncyk7Cj4gPiA+IC0gICAgIHBjaV9pb3VubWFwKGRl
di0+cGRldiwgYXN0LT5yZWdzKTsKPiA+Cj4gPiBUaGlzIGdldHMgdW5tYXBwZWQgYXMgcGFydCBv
ZiB0aGUgYXV0b21hdGljIHBjaV9kaXNhYmxlX2RldmljZSgpLCBJIGd1ZXNzPwo+Cj4gWXVwLCBv
bmNlIHlvdSBnbyB3aXRoIHBjaW1fZW5hYmxlX2RldmljZSBhbGwgcGNpXyBmdW5jdGlvbnMgb24g
dGhhdAo+IGRldmljZSBiZWNvbWUgbWFuZ2VkIGFuZCBhdXRvLWNsZWFudXAuCj4KPiA+IERvIHdl
IG5lZWQgZHJtX2Rldl9lbnRlcigpL19leGl0KCkgdG8gbWFrZSBJL08gd29yayByZWxpYWJseT8K
Pgo+IFRoYXQgZG9lcyBub3RoaW5nIHdpdGhvdXQgZHJtX2Rldl91bnBsdWcoKSwgd2hpY2ggaGFz
IHRoZSBhbm5veWluZwo+IHNpZGUgZWZmZWN0IHRoYXQgaXQgYWxzbyBzaHV0cyB1cCBzdHVmZiBs
aWtlCj4gZHJtX2F0b21pY19oZWxwZXJfc2h1dGRvd24gZm9yIG1vZHVsZSB1bmxvYWQuIEFuZCBk
ZXZlbG9wZXJzIHJlYWxseQo+IHdhbnQgdGhlaXIgZGV2aWNlcyB0byBiZSBzaHV0IG9mZiBvbiBk
cml2ZXIgdW5sb2FkLiBTbyB5ZWFoCj4gdW5mb3J0dW5hdGVseSB3ZSBjdXJyZW50bHkgY2FuIGRl
Y2lkZSBiZXR3ZWVuICJjb3JyZWN0IGZvciBob3R1bnBsdWciCj4gYW5kICJjb252ZW5pZW50IGZv
ciBkcml2ZXIgdW5sb2FkIGZvciBkcml2ZXIgYXV0aG9ycyIuIEknbSBub3Qgc3VyZQo+IHdoYXQg
dG8gYmVzdCBkbyBoZXJlLCBzaW5jZSBhbGwgb3B0aW9ucyBhcmUga2luZGEgbm90IGdyZWF0IGZv
ciBvbmUKPiB1c2UtY2FzZSBvciB0aGUgb3RoZXIuCgpTbyBpZiB3ZSdkIHNwbGl0IHVwIGRybV9k
ZXZfdW5wbHVnIGludG8gZHJtX2Rldl91bnJlZ2lzdGVyICsKZHJtX2Rldl9tYXJrX3VucGx1Z2dl
ZCBvciB3aGF0ZXZlciB0aGUgb3B0aW9ucyB3b3VsZCBiZToKCmRybV9hdG9taWNfaGVscGVyX3No
dXRkb3duKCk7IC8qIGFuZCBvdGhlciBodyBzaHV0IGRvd24gKi8KZHJtX2Rldl91bnJlZ2lzdGVy
KCk7CmRybV9kZXZfbWFya191bnBsdWdnZWQoKTsKCktpbmRhIGFubm95aW5nIHNpbmNlIHVzZXJz
cGFjZSBtaWdodCByYWNlIHdpdGggdXMsIHNvIHdlIG1pZ2h0IHN0aWxsCmhhdmUgYW4gYWN0aXZl
IGZiIChpbiBzdyB0cmFja2luZyBhdCBsZWFzdCkgdGhhdCB3ZSBuZWVkIHRvIGNsZWFuIHVwCmFn
YWluIGxhdGVyIG9uLiBQbHVzIHNodXR0aW5nIGRvd24gaHcgYmVmb3JlIHdlIHVucmVnaXN0ZXIg
aXMgZ29pbmcgdG8KbWFrZSB0aGUgaG90dW5wbHVnIGNvbmZ1c2lvbiBmb3IgdXNlcnNwYWNlIGV2
ZW4gbW9yZSBhIG1lc3MuCgpOZXh0IG9wdGlvbjoKZHJtX2Rldl91bnJlZ3N0ZXIoKTsKLyogc2h1
dCBkb3duIGh3ICovCmRybV9kZXZfbWFya191bnBsdWdnZWQoKTsKClRoaXMganVzdCB3YXN0ZXMg
dGltZSBzaW5jZSBpZiB3ZSdyZSByZWFsbHkgdW5wbHVnZ2VkIHdlJ2xsIGRvIGxvdHMgb2YKaW8g
YXR0ZW1wdHMgdGhhdCBnbyBub3doZXJlIGJlY2F1c2UgdGhlIGRldmljZSBpcyBnb25lIGFscmVh
ZHkuClRoZXknbGwgYWxsIHRpbWUgb3V0IChpZiB0aGUgYnVzIHN1YnN5c3RlbS9odyBmb3Igb3Vy
IGRyaXZlciB3b3Jrcwpjb3JyZWN0bHkgYXQgbGVhc3QpLiBQbHVzIHVzZXJzcGFjZSBjYW4gc3Rp
bGwgc25lYWsgaW4gYW5kIGRvIHN0dXBpZApzdHVmZiBJIHRoaW5rIHdoaWxlIHdlJ3JlIG5vdCBs
b29raW5nLgoKTmV4dCB1cDoKZHJtX2Rldl91bnJlZ2lzdGVyKCk7CmRybV9kZXZfbWFya191bnBs
dWdnZWQoKTsKZHJtX2F0b21pY19oZWxwZXJfc2h1dGRvd24oKTsKClRoaXMgaXMgYSBiaXQgc2ls
bHkgc2luY2UgYWxsIHRoZSBzaHV0ZG93biBjb2RlIG5vdyBkb2VzIGlzIHNodXQgZG93bgpzdyBz
dGF0ZSwgYW5kIG5ldmVyIHRvdWNoZXMgaHcgKGlmIHRoZSBkcml2ZXIgaXMgZnVsbHkgYW5ub3Rh
dGVkIHdpdGgKZHJtX2Rldl9lbnRlci9leGl0KS4KCk9uZSBvcHRpb24gbWlnaHQgYmUgdGhhdCB3
ZSBzbGFwIGEgbG90IG1vcmUgZHJtX2Rldl9lbnRlci9leGl0IGFyb3VuZAp0aGUgdG9wLWxldmVs
IGlvY3RscyAodG8gYXQgbGVhc3Qgc3RvcCB0aGUgdXNlcnNwYWNlIHJhY2VzIHdpdGggZHJpdmVy
CnVubG9hZCksIGFuZCBhbGxvdyBkcml2ZXJzIHRvIHN0aWxsIHNodXQgZG93biBzdHVmZiBpbnRl
cm5hbGx5LgoKdGxkcjsgaXQncyBhbGwgc3RpbGwgYSBiaXQgYSBtZXNzLgotRGFuaWVsCgo+IC1E
YW5pZWwKPgo+ID4gQmVzdCByZWdhcmRzCj4gPiBUaG9tYXMKPiA+Cj4gPiA+ICAgICAgIGtmcmVl
KGFzdCk7Cj4gPiA+ICB9Cj4gPiA+Cj4gPgo+ID4gLS0KPiA+IFRob21hcyBaaW1tZXJtYW5uCj4g
PiBHcmFwaGljcyBEcml2ZXIgRGV2ZWxvcGVyCj4gPiBTVVNFIFNvZnR3YXJlIFNvbHV0aW9ucyBH
ZXJtYW55IEdtYkgKPiA+IE1heGZlbGRzdHIuIDUsIDkwNDA5IE7DvHJuYmVyZywgR2VybWFueQo+
ID4gKEhSQiAzNjgwOSwgQUcgTsO8cm5iZXJnKQo+ID4gR2VzY2jDpGZ0c2bDvGhyZXI6IEZlbGl4
IEltZW5kw7ZyZmZlcgo+ID4KPgo+Cj4gLS0KPiBEYW5pZWwgVmV0dGVyCj4gU29mdHdhcmUgRW5n
aW5lZXIsIEludGVsIENvcnBvcmF0aW9uCj4gKzQxICgwKSA3OSAzNjUgNTcgNDggLSBodHRwOi8v
YmxvZy5mZndsbC5jaAoKCgotLSAKRGFuaWVsIFZldHRlcgpTb2Z0d2FyZSBFbmdpbmVlciwgSW50
ZWwgQ29ycG9yYXRpb24KKzQxICgwKSA3OSAzNjUgNTcgNDggLSBodHRwOi8vYmxvZy5mZndsbC5j
aApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2
ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
