Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 814D89F589
	for <lists+dri-devel@lfdr.de>; Tue, 27 Aug 2019 23:50:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0F1B689AB6;
	Tue, 27 Aug 2019 21:50:29 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x544.google.com (mail-pg1-x544.google.com
 [IPv6:2607:f8b0:4864:20::544])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D235C89AB6;
 Tue, 27 Aug 2019 21:50:27 +0000 (UTC)
Received: by mail-pg1-x544.google.com with SMTP id u17so197803pgi.6;
 Tue, 27 Aug 2019 14:50:27 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=67dthvLQIGmCSZUHq7Jei20QPubBtL7HhTfOXNW4WF4=;
 b=bUaeFlpq3pTUW1To15BbvWv9FriXEdmFqU/nakvkOXNUciwi5ZUtEox8ciVzCKMpfe
 U6EdPNzob0byUWfFEnCmmuglC9AGf3/BsCTT8bKMqP6cEIAk1+cBagtb8q++q9RXo+dC
 k03CDqdpt2fOt/LZWtd0zG8tCfaZi/fPNnFSgEmztj8fv/Q1SLhs1XRe5t0VXGBDBRsD
 Mx3k8clAQY0l5TReUpgvqmrYamySFReAV68JwpH6br979ukYmQH1QrvdBWmWmTo1oGzl
 W2fKwKEkiw2kOOWgAjj3RHMIOP29UpyRkshUeepEL6iHkkDNg8rUNLsj8CO3BTjE+Pe+
 ordw==
X-Gm-Message-State: APjAAAWVBP9czEcxJsFop4aw/qsZIkmfRjsgH6GxKHfCjpO1Qh9DBOwD
 oeVSaPq0+XQCryugXv2q5kiOo3v1UaQ=
X-Google-Smtp-Source: APXvYqxHkejbaXK7Kp2PvkkIJ/I+Q6bqEUSOz7KEjQh1OwY9GdmCOPhSqgdGPccdIfOwie1SRCLHUw==
X-Received: by 2002:a63:2157:: with SMTP id s23mr538841pgm.167.1566942627035; 
 Tue, 27 Aug 2019 14:50:27 -0700 (PDT)
Received: from localhost ([100.118.89.196])
 by smtp.gmail.com with ESMTPSA id d128sm291440pfa.42.2019.08.27.14.50.25
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 27 Aug 2019 14:50:26 -0700 (PDT)
From: Rob Clark <robdclark@gmail.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 6/9] drm/msm: add kms->flush_commit()
Date: Tue, 27 Aug 2019 14:33:36 -0700
Message-Id: <20190827213421.21917-7-robdclark@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190827213421.21917-1-robdclark@gmail.com>
References: <20190827213421.21917-1-robdclark@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=67dthvLQIGmCSZUHq7Jei20QPubBtL7HhTfOXNW4WF4=;
 b=PdWCJos9nCgYf48y4+FDxUsXgCJs0SoJCyz6LfvQHnW66BUzHK61PZHaDY3bppd2GJ
 dr0aA8y7gTEW3F+MKEuan0WF1/i+YQK6i+P4pZywA8ei5vk9yYmlSFLoBdQRnZoKi3O3
 CrQcbPdIUch4IJZIVmY3NKe8hVIsZ5jKxSHJUiESSJtg0bG4809kr6IFdrBOzClLa1BG
 xr2Ook6DljUEh74639WORy0FbK98x6otbneGK8WzOYTiGU/DBYZ2yZIKR6qbGGGFAnhi
 cvGEgi9+s59z1bVLXyOuNai/Da7lMiol1jcKrT5Dw3tTaboq2tOGSQVwIQTOmPhAF/g5
 2S2w==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rob Clark <robdclark@chromium.org>,
 "open list:DRM DRIVER FOR MSM ADRENO GPU"
 <freedreno@lists.freedesktop.org>, open list <linux-kernel@vger.kernel.org>,
 Jonathan Marek <jonathan@marek.ca>, Boris Brezillon <bbrezillon@kernel.org>,
 David Airlie <airlied@linux.ie>, Enrico Weigelt <info@metux.net>,
 "open list:DRM DRIVER FOR MSM ADRENO GPU" <linux-arm-msm@vger.kernel.org>,
 Abhinav Kumar <abhinavk@codeaurora.org>,
 Georgi Djakov <georgi.djakov@linaro.org>, Bruce Wang <bzwang@chromium.org>,
 Alexios Zavras <alexios.zavras@intel.com>,
 Mamta Shukla <mamtashukla555@gmail.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>, Sean Paul <sean@poorly.run>,
 Thomas Gleixner <tglx@linutronix.de>,
 Sravanthi Kollukuduru <skolluku@codeaurora.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9iIENsYXJrIDxyb2JkY2xhcmtAY2hyb21pdW0ub3JnPgoKQWRkIC0+Zmx1c2hfY29t
bWl0KGNydGNfbWFzaykuICBDdXJyZW50bHkgYSBuby1vcCwgYnV0IGttcyBiYWNrZW5kcwpzaG91
bGQgbWlncmF0ZSB3cml0aW5nIGZsdXNoIHJlZ2lzdGVycyB0byB0aGlzIGhvb2ssIHNvIHdlIGNh
biBkZWNvdXBsZQpwdXNoaW5nIHVwZGF0ZXMgdG8gaGFyZHdhcmUsIGFuZCBmbHVzaGluZyB0aGUg
dXBkYXRlcy4KCk9uY2Ugd2UgYWRkIGFzeW5jIGNvbW1pdCBzdXBwb3J0LCB0aGUgaHcgdXBkYXRl
cyB3aWxsIGJlIHB1c2hlZCBkb3duIHRvCnRoZSBodyBzeW5jaHJvbm91c2x5LCBidXQgZmx1c2hp
bmcgdGhlIHVwZGF0ZXMgd2lsbCBiZSBkZWZlcnJlZCB1bnRpbCBhcwpjbG9zZSB0byB2Ymxhbmsg
YXMgcG9zc2libGUsIHNvIHRoYXQgbXVsdGlwbGUgdXBkYXRlcyBjYW4gYmUgY29tYmluZWQgaW4K
YSBzaW5nbGUgZnJhbWUuCgpTaWduZWQtb2ZmLWJ5OiBSb2IgQ2xhcmsgPHJvYmRjbGFya0BjaHJv
bWl1bS5vcmc+Ci0tLQogZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2ttcy5jICB8
ICA2ICsrKysKIGRyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9tZHA0L21kcDRfa21zLmMgfCAgNiAr
KysrCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvbWRwNS9tZHA1X2ttcy5jIHwgIDYgKysrKwog
ZHJpdmVycy9ncHUvZHJtL21zbS9tc21fYXRvbWljLmMgICAgICAgICB8ICA5ICsrKystLQogZHJp
dmVycy9ncHUvZHJtL21zbS9tc21fa21zLmggICAgICAgICAgICB8IDQwICsrKysrKysrKysrKysr
KysrKysrKystLQogNSBmaWxlcyBjaGFuZ2VkLCA2MyBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuYwppbmRleCA2MDY4MTVl
NTA2MjUuLmVmYmY4ZmQzNDNkZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNw
L2RwdTEvZHB1X2ttcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9r
bXMuYwpAQCAtMjc4LDYgKzI3OCwxMSBAQCBzdGF0aWMgdm9pZCBkcHVfa21zX3ByZXBhcmVfY29t
bWl0KHN0cnVjdCBtc21fa21zICprbXMsCiAJfQogfQogCitzdGF0aWMgdm9pZCBkcHVfa21zX2Zs
dXNoX2NvbW1pdChzdHJ1Y3QgbXNtX2ttcyAqa21zLCB1bnNpZ25lZCBjcnRjX21hc2spCit7CisJ
LyogVE9ETyAqLworfQorCiAvKgogICogT3ZlcnJpZGUgdGhlIGVuY29kZXIgZW5hYmxlIHNpbmNl
IHdlIG5lZWQgdG8gc2V0dXAgdGhlIGlubGluZSByb3RhdG9yIGFuZCBkbwogICogc29tZSBjcnRj
IG1hZ2ljIGJlZm9yZSBlbmFibGluZyBhbnkgYnJpZGdlIHRoYXQgbWlnaHQgYmUgcHJlc2VudC4K
QEAgLTY3OCw2ICs2ODMsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IG1zbV9rbXNfZnVuY3Mga21z
X2Z1bmNzID0gewogCS5pcnFfdW5pbnN0YWxsICAgPSBkcHVfaXJxX3VuaW5zdGFsbCwKIAkuaXJx
ICAgICAgICAgICAgID0gZHB1X2lycSwKIAkucHJlcGFyZV9jb21taXQgID0gZHB1X2ttc19wcmVw
YXJlX2NvbW1pdCwKKwkuZmx1c2hfY29tbWl0ICAgID0gZHB1X2ttc19mbHVzaF9jb21taXQsCiAJ
LmNvbW1pdCAgICAgICAgICA9IGRwdV9rbXNfY29tbWl0LAogCS53YWl0X2ZsdXNoICAgICAgPSBk
cHVfa21zX3dhaXRfZmx1c2gsCiAJLmNvbXBsZXRlX2NvbW1pdCA9IGRwdV9rbXNfY29tcGxldGVf
Y29tbWl0LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL21kcDQvbWRwNF9r
bXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9tZHA0L21kcDRfa21zLmMKaW5kZXggYTZh
MDU2ZGY1ODc4Li43OGNlMmM4YTlhMzggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20v
ZGlzcC9tZHA0L21kcDRfa21zLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL21kcDQv
bWRwNF9rbXMuYwpAQCAtMTA3LDYgKzEwNywxMSBAQCBzdGF0aWMgdm9pZCBtZHA0X3ByZXBhcmVf
Y29tbWl0KHN0cnVjdCBtc21fa21zICprbXMsIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdAog
CQlkcm1fY3J0Y192YmxhbmtfZ2V0KGNydGMpOwogfQogCitzdGF0aWMgdm9pZCBtZHA0X2ZsdXNo
X2NvbW1pdChzdHJ1Y3QgbXNtX2ttcyAqa21zLCB1bnNpZ25lZCBjcnRjX21hc2spCit7CisJLyog
VE9ETyAqLworfQorCiBzdGF0aWMgdm9pZCBtZHA0X3dhaXRfZmx1c2goc3RydWN0IG1zbV9rbXMg
KmttcywgdW5zaWduZWQgY3J0Y19tYXNrKQogewogCXN0cnVjdCBtZHA0X2ttcyAqbWRwNF9rbXMg
PSB0b19tZHA0X2ttcyh0b19tZHBfa21zKGttcykpOwpAQCAtMTc4LDYgKzE4Myw3IEBAIHN0YXRp
YyBjb25zdCBzdHJ1Y3QgbWRwX2ttc19mdW5jcyBrbXNfZnVuY3MgPSB7CiAJCS5lbmFibGVfdmJs
YW5rICAgPSBtZHA0X2VuYWJsZV92YmxhbmssCiAJCS5kaXNhYmxlX3ZibGFuayAgPSBtZHA0X2Rp
c2FibGVfdmJsYW5rLAogCQkucHJlcGFyZV9jb21taXQgID0gbWRwNF9wcmVwYXJlX2NvbW1pdCwK
KwkJLmZsdXNoX2NvbW1pdCAgICA9IG1kcDRfZmx1c2hfY29tbWl0LAogCQkud2FpdF9mbHVzaCAg
ICAgID0gbWRwNF93YWl0X2ZsdXNoLAogCQkuY29tcGxldGVfY29tbWl0ID0gbWRwNF9jb21wbGV0
ZV9jb21taXQsCiAJCS5nZXRfZm9ybWF0ICAgICAgPSBtZHBfZ2V0X2Zvcm1hdCwKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9tZHA1L21kcDVfa21zLmMgYi9kcml2ZXJzL2dw
dS9kcm0vbXNtL2Rpc3AvbWRwNS9tZHA1X2ttcy5jCmluZGV4IDdhMTk1MjZlZWY1MC4uZWZmMWIw
MDAyNThlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvbWRwNS9tZHA1X2tt
cy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9tZHA1L21kcDVfa21zLmMKQEAgLTE1
NCw2ICsxNTQsMTEgQEAgc3RhdGljIHZvaWQgbWRwNV9wcmVwYXJlX2NvbW1pdChzdHJ1Y3QgbXNt
X2ttcyAqa21zLCBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3QKIAkJbWRwNV9zbXBfcHJlcGFy
ZV9jb21taXQobWRwNV9rbXMtPnNtcCwgJmdsb2JhbF9zdGF0ZS0+c21wKTsKIH0KIAorc3RhdGlj
IHZvaWQgbWRwNV9mbHVzaF9jb21taXQoc3RydWN0IG1zbV9rbXMgKmttcywgdW5zaWduZWQgY3J0
Y19tYXNrKQoreworCS8qIFRPRE8gKi8KK30KKwogc3RhdGljIHZvaWQgbWRwNV93YWl0X2ZsdXNo
KHN0cnVjdCBtc21fa21zICprbXMsIHVuc2lnbmVkIGNydGNfbWFzaykKIHsKIAlzdHJ1Y3QgbWRw
NV9rbXMgKm1kcDVfa21zID0gdG9fbWRwNV9rbXModG9fbWRwX2ttcyhrbXMpKTsKQEAgLTI3Miw2
ICsyNzcsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IG1kcF9rbXNfZnVuY3Mga21zX2Z1bmNzID0g
ewogCQkuaXJxICAgICAgICAgICAgID0gbWRwNV9pcnEsCiAJCS5lbmFibGVfdmJsYW5rICAgPSBt
ZHA1X2VuYWJsZV92YmxhbmssCiAJCS5kaXNhYmxlX3ZibGFuayAgPSBtZHA1X2Rpc2FibGVfdmJs
YW5rLAorCQkuZmx1c2hfY29tbWl0ICAgID0gbWRwNV9mbHVzaF9jb21taXQsCiAJCS5wcmVwYXJl
X2NvbW1pdCAgPSBtZHA1X3ByZXBhcmVfY29tbWl0LAogCQkud2FpdF9mbHVzaCAgICAgID0gbWRw
NV93YWl0X2ZsdXNoLAogCQkuY29tcGxldGVfY29tbWl0ID0gbWRwNV9jb21wbGV0ZV9jb21taXQs
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9hdG9taWMuYyBiL2RyaXZlcnMv
Z3B1L2RybS9tc20vbXNtX2F0b21pYy5jCmluZGV4IGJjYjZkNjE0NGQ0ZC4uMjczNjliMDIwYmVl
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9hdG9taWMuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vbXNtL21zbV9hdG9taWMuYwpAQCAtNTQsMTYgKzU0LDIxIEBAIHZvaWQgbXNt
X2F0b21pY19jb21taXRfdGFpbChzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCiAKIAlr
bXMtPmZ1bmNzLT5wcmVwYXJlX2NvbW1pdChrbXMsIHN0YXRlKTsKIAorCS8qCisJICogUHVzaCBh
dG9taWMgdXBkYXRlcyBkb3duIHRvIGhhcmR3YXJlOgorCSAqLwogCWRybV9hdG9taWNfaGVscGVy
X2NvbW1pdF9tb2Rlc2V0X2Rpc2FibGVzKGRldiwgc3RhdGUpOwotCiAJZHJtX2F0b21pY19oZWxw
ZXJfY29tbWl0X3BsYW5lcyhkZXYsIHN0YXRlLCAwKTsKLQogCWRybV9hdG9taWNfaGVscGVyX2Nv
bW1pdF9tb2Rlc2V0X2VuYWJsZXMoZGV2LCBzdGF0ZSk7CiAKKwkvKgorCSAqIEZsdXNoIGhhcmR3
YXJlIHVwZGF0ZXM6CisJICovCiAJaWYgKGttcy0+ZnVuY3MtPmNvbW1pdCkgewogCQlEUk1fREVC
VUdfQVRPTUlDKCJ0cmlnZ2VyaW5nIGNvbW1pdFxuIik7CiAJCWttcy0+ZnVuY3MtPmNvbW1pdChr
bXMsIHN0YXRlKTsKIAl9CisJa21zLT5mdW5jcy0+Zmx1c2hfY29tbWl0KGttcywgY3J0Y19tYXNr
KTsKIAogCWttcy0+ZnVuY3MtPndhaXRfZmx1c2goa21zLCBjcnRjX21hc2spOwogCWttcy0+ZnVu
Y3MtPmNvbXBsZXRlX2NvbW1pdChrbXMsIGNydGNfbWFzayk7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vbXNtL21zbV9rbXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2ttcy5oCmlu
ZGV4IGM1NmM1NGI2OThlYy4uNTUyMzRmNjYxMzgyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vbXNtL21zbV9rbXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9rbXMuaApAQCAt
MzAsMTIgKzMwLDQ3IEBAIHN0cnVjdCBtc21fa21zX2Z1bmNzIHsKIAlpcnFyZXR1cm5fdCAoKmly
cSkoc3RydWN0IG1zbV9rbXMgKmttcyk7CiAJaW50ICgqZW5hYmxlX3ZibGFuaykoc3RydWN0IG1z
bV9rbXMgKmttcywgc3RydWN0IGRybV9jcnRjICpjcnRjKTsKIAl2b2lkICgqZGlzYWJsZV92Ymxh
bmspKHN0cnVjdCBtc21fa21zICprbXMsIHN0cnVjdCBkcm1fY3J0YyAqY3J0Yyk7Ci0JLyogbW9k
ZXNldCwgYnJhY2tldGluZyBhdG9taWNfY29tbWl0KCk6ICovCisKKwkvKgorCSAqIEF0b21pYyBj
b21taXQgaGFuZGxpbmc6CisJICovCisKKwkvKioKKwkgKiBQcmVwYXJlIGZvciBhdG9taWMgY29t
bWl0LiAgVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgYW55IHByZXZpb3VzCisJICogKGFzeW5jIG9yIG90
aGVyd2lzZSkgY29tbWl0IGhhcyBjb21wbGV0ZWQuCisJICovCiAJdm9pZCAoKnByZXBhcmVfY29t
bWl0KShzdHJ1Y3QgbXNtX2ttcyAqa21zLCBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUp
OworCisJLyoqCisJICogRmx1c2ggYW4gYXRvbWljIGNvbW1pdC4gIFRoaXMgaXMgY2FsbGVkIGFm
dGVyIHRoZSBoYXJkd2FyZQorCSAqIHVwZGF0ZXMgaGF2ZSBhbHJlYWR5IGJlZW4gcHVzaGVkIGRv
d24gdG8gZWZmZWN0ZWQgcGxhbmVzLworCSAqIGNydGNzL2VuY29kZXJzL2Nvbm5lY3RvcnMuCisJ
ICovCisJdm9pZCAoKmZsdXNoX2NvbW1pdCkoc3RydWN0IG1zbV9rbXMgKmttcywgdW5zaWduZWQg
Y3J0Y19tYXNrKTsKKworCS8qIFRPRE8gcmVtb3ZlIC0+Y29tbWl0KCksIHVzZSAtPmZsdXNoX2Nv
bW1pdCgpIGluc3RlYWQ6ICovCiAJdm9pZCAoKmNvbW1pdCkoc3RydWN0IG1zbV9rbXMgKmttcywg
c3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKTsKLQl2b2lkICgqY29tcGxldGVfY29tbWl0
KShzdHJ1Y3QgbXNtX2ttcyAqa21zLCB1bnNpZ25lZCBjcnRjX21hc2spOworCisJLyoqCisJICog
V2FpdCBmb3IgYW55IGluLXByb2dyZXNzIGZsdXNoIHRvIGNvbXBsZXRlIG9uIHRoZSBzcGVjaWZp
ZWQKKwkgKiBjcnRjcy4gIFRoaXMgc2hvdWxkIG5vdCBibG9jayBpZiB0aGVyZSBpcyBubyBpbi1w
cm9ncmVzcworCSAqIGNvbW1pdCAoaWUuIGRvbid0IGp1c3Qgd2FpdCBmb3IgYSB2YmxhbmspLCBh
cyBpdCB3aWxsIGFsc28KKwkgKiBiZSBjYWxsZWQgYmVmb3JlIC0+cHJlcGFyZV9jb21taXQoKSB0
byBlbnN1cmUgYW55IHBvdGVudGlhbAorCSAqICJhc3luYyIgY29tbWl0IGhhcyBjb21wbGV0ZWQu
CisJICovCiAJdm9pZCAoKndhaXRfZmx1c2gpKHN0cnVjdCBtc21fa21zICprbXMsIHVuc2lnbmVk
IGNydGNfbWFzayk7CiAKKwkvKioKKwkgKiBDbGVhbiB1cCBhcmUgY29tbWl0IGlzIGNvbXBsZXRl
ZC4gIFRoaXMgaXMgY2FsbGVkIGFmdGVyCisJICogLT53YWl0X2ZsdXNoKCksIHRvIGdpdmUgdGhl
IGJhY2tlbmQgYSBjaGFuY2UgdG8gZG8gYW55CisJICogcG9zdC1jb21taXQgY2xlYW51cC4KKwkg
Ki8KKwl2b2lkICgqY29tcGxldGVfY29tbWl0KShzdHJ1Y3QgbXNtX2ttcyAqa21zLCB1bnNpZ25l
ZCBjcnRjX21hc2spOworCisJLyoKKwkgKiBGb3JtYXQgaGFuZGxpbmc6CisJICovCisKIAkvKiBn
ZXQgbXNtX2Zvcm1hdCB3LyBvcHRpb25hbCBmb3JtYXQgbW9kaWZpZXJzIGZyb20gZHJtX21vZGVf
ZmJfY21kMiAqLwogCWNvbnN0IHN0cnVjdCBtc21fZm9ybWF0ICooKmdldF9mb3JtYXQpKHN0cnVj
dCBtc21fa21zICprbXMsCiAJCQkJCWNvbnN0IHVpbnQzMl90IGZvcm1hdCwKQEAgLTQ1LDYgKzgw
LDcgQEAgc3RydWN0IG1zbV9rbXNfZnVuY3MgewogCQkJY29uc3Qgc3RydWN0IG1zbV9mb3JtYXQg
Km1zbV9mbXQsCiAJCQljb25zdCBzdHJ1Y3QgZHJtX21vZGVfZmJfY21kMiAqY21kLAogCQkJc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICoqYm9zKTsKKwogCS8qIG1pc2M6ICovCiAJbG9uZyAoKnJvdW5k
X3BpeGNsaykoc3RydWN0IG1zbV9rbXMgKmttcywgdW5zaWduZWQgbG9uZyByYXRlLAogCQkJc3Ry
dWN0IGRybV9lbmNvZGVyICplbmNvZGVyKTsKLS0gCjIuMjEuMAoKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmkt
ZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
