Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 70A1BCF6BB
	for <lists+dri-devel@lfdr.de>; Tue,  8 Oct 2019 12:03:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AA65D6E78F;
	Tue,  8 Oct 2019 10:03:34 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x543.google.com (mail-ed1-x543.google.com
 [IPv6:2a00:1450:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 09B316E78E
 for <dri-devel@lists.freedesktop.org>; Tue,  8 Oct 2019 10:03:33 +0000 (UTC)
Received: by mail-ed1-x543.google.com with SMTP id v38so15074747edm.7
 for <dri-devel@lists.freedesktop.org>; Tue, 08 Oct 2019 03:03:32 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:date:from:to:cc:subject:message-id
 :mail-followup-to:references:mime-version:content-disposition
 :in-reply-to:user-agent;
 bh=RlG/5odbO7dEeYylnLu3Bscopilv5Nw8LLLCrzvePqg=;
 b=ZFVNKJFM0IBDx9gn9IAAGCypo6HwLL5eVkegwDijHel7yhrDepa/t++Fnsn474gbhA
 eaMhr2ih7TvVrJRFJ+KO0y1Dak4T1uB1fqt1Dr00TLs8i0tzyiTOqHAmeQTlZO32SUUi
 g48D04r2Dh67ZMWfUyUrhoM5/x1yidLtsoTQRnv/GzaEy0ijpk2opnNkFSlPwMUfY/bq
 lSy+lCrcR2b1CUmfIuq8U7dARyio0A8Z31uE/XypCAwd3IKewncJRtdT+ccENs6D1vRF
 dIc9hL+dakHW6yCRM4LVDZaqT4DaaR54nFAH9k53+KC/f3F212B4oBg9RCFk9K1qlLXJ
 0W1A==
X-Gm-Message-State: APjAAAX5bEUMM9PLmsNLNzr4jzT97I9rGSoSn+R+CO3w1mo5LpeO1v4x
 xW6gCKQhmTSRA+9h4ufPUY5ubg==
X-Google-Smtp-Source: APXvYqxOBQpLaaiBLZ2i9F4Mnc4HvKczMM1hhYCGoVPjybUZkxJ8GfjdO51eBCDJn8VgvY+62Odm6g==
X-Received: by 2002:a17:906:2542:: with SMTP id
 j2mr27791221ejb.278.1570529011438; 
 Tue, 08 Oct 2019 03:03:31 -0700 (PDT)
Received: from phenom.ffwll.local (212-51-149-96.fiber7.init7.net.
 [212.51.149.96])
 by smtp.gmail.com with ESMTPSA id g17sm2211122ejf.46.2019.10.08.03.03.29
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 08 Oct 2019 03:03:30 -0700 (PDT)
Date: Tue, 8 Oct 2019 12:03:28 +0200
From: Daniel Vetter <daniel@ffwll.ch>
To: Tomasz Figa <tfiga@chromium.org>
Subject: Re: [RFC PATCH] drm/virtio: Export resource handles via DMA-buf API
Message-ID: <20191008100328.GN16989@phenom.ffwll.local>
Mail-Followup-To: Tomasz Figa <tfiga@chromium.org>,
 Gerd Hoffmann <kraxel@redhat.com>, David Airlie <airlied@linux.ie>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 virtualization@lists.linux-foundation.org,
 Linux Kernel Mailing List <linux-kernel@vger.kernel.org>,
 stevensd@chromium.org,
 =?iso-8859-1?Q?St=E9phane?= Marchesin <marcheu@chromium.org>,
 Zach Reizner <zachr@chromium.org>,
 Keiichi Watanabe <keiichiw@chromium.org>,
 Pawel Osciak <posciak@chromium.org>
References: <20190912094121.228435-1-tfiga@chromium.org>
 <20190917132305.GV3958@phenom.ffwll.local>
 <CAAFQd5ADmObo1yVnFGaWDU=DHF+tex3tWJxTZLkxv=EdGNNM7A@mail.gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <CAAFQd5ADmObo1yVnFGaWDU=DHF+tex3tWJxTZLkxv=EdGNNM7A@mail.gmail.com>
X-Operating-System: Linux phenom 5.2.0-2-amd64 
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=sender:date:from:to:cc:subject:message-id:mail-followup-to
 :references:mime-version:content-disposition:in-reply-to:user-agent;
 bh=RlG/5odbO7dEeYylnLu3Bscopilv5Nw8LLLCrzvePqg=;
 b=T6jXk6T/1lFodErHnd4Di48iTl+b72auqF612yLD2MgkCCZdNdSzrTMJh9ntRcxrid
 mkJLujaZaQ5gX14r5F5MN/lDIXXqvN0pp1EKCps4vv5H/EthFNQVc364MmqVTUv0028S
 OnJTPlOL4HFaYzrvO95v3R5m7L7Jq5ybSXR1Y=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Zach Reizner <zachr@chromium.org>, David Airlie <airlied@linux.ie>,
 Linux Kernel Mailing List <linux-kernel@vger.kernel.org>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 virtualization@lists.linux-foundation.org,
 Keiichi Watanabe <keiichiw@chromium.org>, Gerd Hoffmann <kraxel@redhat.com>,
 =?iso-8859-1?Q?St=E9phane?= Marchesin <marcheu@chromium.org>,
 Pawel Osciak <posciak@chromium.org>, stevensd@chromium.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gU2F0LCBPY3QgMDUsIDIwMTkgYXQgMDI6NDE6NTRQTSArMDkwMCwgVG9tYXN6IEZpZ2Egd3Jv
dGU6Cj4gSGkgRGFuaWVsLCBHZXJkLAo+IAo+IE9uIFR1ZSwgU2VwIDE3LCAyMDE5IGF0IDEwOjIz
IFBNIERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZndsbC5jaD4gd3JvdGU6Cj4gPgo+ID4gT24gVGh1
LCBTZXAgMTIsIDIwMTkgYXQgMDY6NDE6MjFQTSArMDkwMCwgVG9tYXN6IEZpZ2Egd3JvdGU6Cj4g
PiA+IFRoaXMgcGF0Y2ggaXMgYW4gZWFybHkgUkZDIHRvIGp1ZGdlIHRoZSBkaXJlY3Rpb24gd2Ug
YXJlIGZvbGxvd2luZyBpbgo+ID4gPiBvdXIgdmlydHVhbGl6YXRpb24gZWZmb3J0cyBpbiBDaHJv
bWUgT1MuIFRoZSBwdXJwb3NlIGlzIHRvIHN0YXJ0IGEKPiA+ID4gZGlzY3Vzc2lvbiBvbiBob3cg
dG8gaGFuZGxlIGJ1ZmZlciBzaGFyaW5nIGJldHdlZW4gbXVsdGlwbGUgdmlydGlvCj4gPiA+IGRl
dmljZXMuCj4gPiA+Cj4gPiA+IE9uIGEgc2lkZSBub3RlLCB3ZSBhcmUgYWxzbyB3b3JraW5nIG9u
IGEgdmlydGlvIHZpZGVvIGRlY29kZXIgaW50ZXJmYWNlCj4gPiA+IGFuZCBpbXBsZW1lbnRhdGlv
biwgd2l0aCBhIFY0TDIgZHJpdmVyIGZvciBMaW51eC4gVGhvc2Ugd2lsbCBiZSBwb3N0ZWQKPiA+
ID4gZm9yIHJldmlldyBpbiB0aGUgbmVhciBmdXR1cmUgYXMgd2VsbC4KPiA+ID4KPiA+ID4gQW55
IGZlZWRiYWNrIHdpbGwgYmUgYXBwcmVjaWF0ZWQhIFRoYW5rcyBpbiBhZHZhbmNlLgo+ID4gPgo+
ID4gPiA9PT0KPiA+ID4KPiA+ID4gV2l0aCB0aGUgcmFuZ2Ugb2YgdXNlIGNhc2VzIGZvciB2aXJ0
dWFsaXphdGlvbiBleHBhbmRpbmcsIHRoZXJlIGlzIGdvaW5nCj4gPiA+IHRvIGJlIG1vcmUgdmly
dGlvIGRldmljZXMgYWRkZWQgdG8gdGhlIGVjb3N5c3RlbS4gRGV2aWNlcyBzdWNoIGFzIHZpZGVv
Cj4gPiA+IGRlY29kZXJzLCBlbmNvZGVycywgY2FtZXJhcywgZXRjLiB0eXBpY2FsbHkgd29yayB0
b2dldGhlciB3aXRoIHRoZQo+ID4gPiBkaXNwbGF5IGFuZCBHUFUgaW4gYSBwaXBlbGluZSBtYW5u
ZXIsIHdoaWNoIGNhbiBvbmx5IGJlIGltcGxlbWVudGVkCj4gPiA+IGVmZmljaWVudGx5IGJ5IHNo
YXJpbmcgdGhlIGJ1ZmZlcnMgYmV0d2VlbiBwcm9kdWNlcnMgYW5kIGNvbnN1bWVycy4KPiA+ID4K
PiA+ID4gRXhpc3RpbmcgYnVmZmVyIG1hbmFnZW1lbnQgZnJhbWV3b3JrIGluIExpbnV4LCBzdWNo
IGFzIHRoZSB2aWRlb2J1ZjIKPiA+ID4gZnJhbWV3b3JrIGluIFY0TDIsIGltcGxlbWVudHMgYWxs
IHRoZSBETUEtYnVmIGhhbmRsaW5nIGluc2lkZSBnZW5lcmljCj4gPiA+IGNvZGUgYW5kIGRvIG5v
dCBleHBvc2UgYW55IGxvdyBsZXZlbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYnVmZmVycyB0bwo+
ID4gPiB0aGUgZHJpdmVycy4KPiA+ID4KPiA+ID4gVG8gc2VhbWxlc3NseSBlbmFibGUgYnVmZmVy
IHNoYXJpbmcgd2l0aCBkcml2ZXJzIHVzaW5nIHN1Y2ggZnJhbWV3b3JrcywKPiA+ID4gbWFrZSB0
aGUgdmlydGlvLWdwdSBkcml2ZXIgZXhwb3NlIHRoZSByZXNvdXJjZSBoYW5kbGUgYXMgdGhlIERN
QSBhZGRyZXNzCj4gPiA+IG9mIHRoZSBidWZmZXIgcmV0dXJuZWQgZnJvbSB0aGUgRE1BLWJ1ZiBt
YXBwaW5nIG9wZXJhdGlvbi4gQXJndWFibHksIHRoZQo+ID4gPiByZXNvdXJjZSBoYW5kbGUgaXMg
YSBraW5kIG9mIERNQSBhZGRyZXNzIGFscmVhZHksIGFzIGl0IGlzIHRoZSBidWZmZXIKPiA+ID4g
aWRlbnRpZmllciB0aGF0IHRoZSBkZXZpY2UgbmVlZHMgdG8gYWNjZXNzIHRoZSBiYWNraW5nIG1l
bW9yeSwgd2hpY2ggaXMKPiA+ID4gZXhhY3RseSB0aGUgc2FtZSByb2xlIGEgRE1BIGFkZHJlc3Mg
cHJvdmlkZXMgZm9yIG5hdGl2ZSBkZXZpY2VzLgo+ID4gPgo+ID4gPiBBIHZpcnRpbyBkcml2ZXIg
dGhhdCBkb2VzIG1lbW9yeSBtYW5hZ2VtZW50IGZ1bGx5IG9uIGl0cyBvd24gd291bGQgaGF2ZQo+
ID4gPiBjb2RlIHNpbWlsYXIgdG8gZm9sbG93aW5nLiBUaGUgY29kZSBpcyBpZGVudGljYWwgdG8g
d2hhdCBhIHJlZ3VsYXIKPiA+ID4gZHJpdmVyIGZvciByZWFsIGhhcmR3YXJlIHdvdWxkIGRvIHRv
IGltcG9ydCBhIERNQS1idWYuCj4gPiA+Cj4gPiA+IHN0YXRpYyBpbnQgdmlydGlvX2Zvb19nZXRf
cmVzb3VyY2VfaGFuZGxlKHN0cnVjdCB2aXJ0aW9fZm9vICpmb28sCj4gPiA+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1ZiwgdTMy
ICppZCkKPiA+ID4gewo+ID4gPiAgICAgICBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRh
Y2g7Cj4gPiA+ICAgICAgIHN0cnVjdCBzZ190YWJsZSAqc2d0Owo+ID4gPiAgICAgICBpbnQgcmV0
ID0gMDsKPiA+ID4KPiA+ID4gICAgICAgYXR0YWNoID0gZG1hX2J1Zl9hdHRhY2goZG1hX2J1Ziwg
Zm9vLT5kZXYpOwo+ID4gPiAgICAgICBpZiAoSVNfRVJSKGF0dGFjaCkpCj4gPiA+ICAgICAgICAg
ICAgICAgcmV0dXJuIFBUUl9FUlIoYXR0YWNoKTsKPiA+ID4KPiA+ID4gICAgICAgc2d0ID0gZG1h
X2J1Zl9tYXBfYXR0YWNobWVudChhdHRhY2gsIERNQV9CSURJUkVDVElPTkFMKTsKPiA+ID4gICAg
ICAgaWYgKElTX0VSUihzZ3QpKSB7Cj4gPiA+ICAgICAgICAgICAgICAgcmV0ID0gUFRSX0VSUihz
Z3QpOwo+ID4gPiAgICAgICAgICAgICAgIGdvdG8gZXJyX2RldGFjaDsKPiA+ID4gICAgICAgfQo+
ID4gPgo+ID4gPiAgICAgICBpZiAoc2d0LT5uZW50cyAhPSAxKSB7Cj4gPiA+ICAgICAgICAgICAg
ICAgcmV0ID0gLUVJTlZBTDsKPiA+ID4gICAgICAgICAgICAgICBnb3RvIGVycl91bm1hcDsKPiA+
ID4gICAgICAgfQo+ID4gPgo+ID4gPiAgICAgICAqaWQgPSBzZ19kbWFfYWRkcmVzcyhzZ3QtPnNn
bCk7Cj4gPgo+ID4gSSBhZ3JlZSB3aXRoIEdlcmQsIHRoaXMgbG9va3MgcHJldHR5IGhvcnJpYmxl
IHRvIG1lLgo+ID4KPiA+IFRoZSB1c3VhbCB3YXkgd2UndmUgZG9uZSB0aGVzZSBraW5kIG9mIHNw
ZWNpYWwgZG1hLWJ1ZnMgaXM6Cj4gPgo+ID4gLSBUaGV5IGFsbCBnZXQgYWxsb2NhdGVkIGF0IHRo
ZSBzYW1lIHBsYWNlLCB0aHJvdWdoIHNvbWUgbGlicmFyeSBvcgo+ID4gICB3aGF0ZXZlci4KPiA+
Cj4gPiAtIFlvdSBhZGQgYSBkbWFfYnVmX2lzX3ZpcnRpbyhkbWFfYnVmKSBmdW5jdGlvbiwgb3Ig
bWF5YmUgc29tZXRoaW5nIHRoYXQKPiA+ICAgYWxzbyB1cGNhc3RzIG9yIHJldHVybnMgTlVMTCwg
d2hpY2ggY2hlY2tzIGZvciBkbWFfYnVmLT5vcHMuCj4gPgo+IAo+IFRoYW5rcyBmb3IgYSBsb3Qg
b2YgdmFsdWFibGUgZmVlZGJhY2sgYW5kIHNvcnJ5IGZvciB0aGUgbGF0ZSByZXBseS4KPiAKPiBX
aGlsZSBJIGFncmVlIHRoYXQgc3R1ZmZpbmcgdGhlIHJlc291cmNlIElEIGluIHNnX2RtYV9hZGRy
ZXNzKCkgaXMKPiBxdWl0ZSB1Z2x5IChmb3IgZXhhbXBsZSwgdGhlIHJlZ3VsYXIgYWRkcmVzcyBh
cml0aG1ldGljIGRvZXNuJ3Qgd29yayksCj4gSSBzdGlsbCBiZWxpZXZlIHdlIG5lZWQgdG8gY29u
dmV5IGluZm9ybWF0aW9uIGFib3V0IHRoZXNlIGJ1ZmZlcnMKPiB1c2luZyByZWd1bGFyIGtlcm5l
bCBpbnRlcmZhY2VzLgo+IAo+IERyaXZlcnMgaW4gc29tZSBzdWJzeXN0ZW1zIGxpa2UgRFJNIHRl
bmQgdG8gb3BlbiBjb2RlIGFueSBidWZmZXIKPiBtYW5hZ2VtZW50IGFuZCB0aGVuIGl0IHdvdWxk
bid0IGJlIGFueSBwcm9ibGVtIHRvIGRvIHdoYXQgeW91Cj4gc3VnZ2VzdGVkLiBIb3dldmVyLCBv
dGhlciBzdWJzeXN0ZW1zIGhhdmUgZ2VuZXJpYyBmcmFtZXdvcmtzIGZvcgo+IGJ1ZmZlciBtYW5h
Z2VtZW50LCBsaWtlIHZpZGVvYnVmMiBmb3IgVjRMMi4gVGhvc2UgYXNzdW1lIHJlZ3VsYXIKPiBE
TUEtYnVmcyB0aGF0IGNhbiBiZSBoYW5kbGVkIHdpdGggcmVndWxhciBkbWFfYnVmXygpIEFQSSBh
bmQgZGVzY3JpYmVkCj4gdXNpbmcgc2d0YWJsZXMgYW5kL29yIHBmbiB2ZWN0b3JzIGFuZC9vciBE
TUEgYWRkcmVzc2VzLgoKIm90aGVyIHN1YnN5c3RlbSBzdWNrcyIgZG9lc24ndCBzb3VuZCBsaWtl
IGEgZ29vZCBkZXNpZ24gcGFyYWRpZ20gdG8gbWUuCkZvcmNlZCBtaWRsYXllcnMgYXJlIGEgYmFk
IGRlc2lnbiBkZWNpc2lvbiBpc24ndCByZWFsbHkgbmV3IGF0IGFsbCAuLi4KCj4gPiAtIE9uY2Ug
eW91J3ZlIHVwY2FzdGVkIGF0IHJ1bnRpbWUgYnkgY2hlY2tpbmcgZm9yIC0+b3BzLCB5b3UgY2Fu
IGFkZAo+ID4gICB3aGF0ZXZlciBmYW5jeSBpbnRlcmZhY2VzIHlvdSB3YW50LiBJbmNsdWRpbmcg
YSByZWFsJnByb3BlciBpbnRlcmZhY2UgdG8KPiA+ICAgZ2V0IGF0IHdoYXRldmVyIHVuZGVybHlp
bmcgaWQgeW91IG5lZWQgdG8gZm9yIHJlYWwgYnVmZmVyIHNoYXJpbmcKPiA+ICAgYmV0d2VlbiB2
aXJ0aW8gZGV2aWNlcy4KPiA+Cj4gPiBJbiBhIHdheSB2aXJ0aW8gYnVmZmVyL21lbW9yeSBpZHMg
YXJlIGEga2luZCBvZiBwcml2YXRlIGJ1cywgZW50aXJlbHkKPiA+IGRpc3RpbmN0IGZyb20gdGhl
IGRtYV9hZGRyX3QgYnVzLiBTbyBjYW4ndCByZWFsbHkgc3R1ZmYgdGhlbSB1bmRlciB0aGlzCj4g
PiBzYW1lIHRoaW5nIGxpa2Ugd2UgZS5nLiBkbyB3aXRoIHBjaSBwZWVyMnBlZXIuCj4gCj4gQXMg
SSBtZW50aW9uZWQgZWFybGllciwgdGhlcmUgaXMgbm8gc2luZ2xlICJkbWFfYWRkcl90IGJ1cyIu
IEVhY2gKPiBkZXZpY2UgKGFzIGluIHN0cnVjdCBkZXZpY2UpIGNhbiBiZSBvbiBpdHMgb3duIGRp
ZmZlcmVudCBETUEgYnVzLCB3aXRoCj4gYSBkaWZmZXJlbnQgRE1BIGFkZHJlc3Mgc3BhY2UuIFRo
ZXJlIGlzIG5vdCBldmVuIGEgZ3VhcmFudGVlIHRoYXQgYQo+IERNQSBhZGRyZXNzIG9idGFpbmVk
IGZvciBvbmUgUENJIGRldmljZSB3aWxsIGJlIHZhbGlkIGZvciBhbm90aGVyIGlmCj4gdGhleSBh
cmUgb24gZGlmZmVyZW50IGJ1c2VzLCB3aGljaCBjb3VsZCBoYXZlIGRpZmZlcmVudCBhZGRyZXNz
Cj4gbWFwcGluZ3MuCj4gCj4gUHV0dGluZyB0aGF0IGFzaWRlLCB3ZSdyZSB0aGlua2luZyBhYm91
dCBhIGRpZmZlcmVudCBhcHByb2FjaCwgYXMgR2VyZAo+IHN1Z2dlc3RlZCBpbiBhbm90aGVyIHRo
cmVhZCwgdGhlIG9uZSBhYm91dCB0aGUgVmlydGlvIFZpZGVvIERlY29kZXIKPiBwcm90b2NvbC4g
SSdtIGdvaW5nIHRvIHJlcGx5IHRoZXJlLCBtYWtpbmcgc3VyZSB0byBDQyBldmVyeW9uZQo+IGlu
dm9sdmVkIGhlcmUuCgpvay4KLURhbmllbAoKPiAKPiBCZXN0IHJlZ2FyZHMsCj4gVG9tYXN6Cj4g
Cj4gPiAtRGFuaWVsCj4gPgo+ID4gPgo+ID4gPiBlcnJfdW5tYXA6Cj4gPiA+ICAgICAgIGRtYV9i
dWZfdW5tYXBfYXR0YWNobWVudChhdHRhY2gsIHNndCwgRE1BX0JJRElSRUNUSU9OQUwpOwo+ID4g
PiBlcnJfZGV0YWNoOgo+ID4gPiAgICAgICBkbWFfYnVmX2RldGFjaChkbWFfYnVmLCBhdHRhY2gp
Owo+ID4gPgo+ID4gPiAgICAgICByZXR1cm4gcmV0Owo+ID4gPiB9Cj4gPiA+Cj4gPiA+IE9uIHRo
ZSBvdGhlciBoYW5kLCBhIHZpcnRpbyBkcml2ZXIgdGhhdCB1c2VzIGFuIGV4aXN0aW5nIGtlcm5l
bAo+ID4gPiBmcmFtZXdvcmsgdG8gbWFuYWdlIGJ1ZmZlcnMgd291bGQgbm90IG5lZWQgdG8gZXhw
bGljaXRseSBoYW5kbGUgYW55dGhpbmcKPiA+ID4gYXQgYWxsLCBhcyB0aGUgZnJhbWV3b3JrIHBh
cnQgcmVzcG9uc2libGUgZm9yIGltcG9ydGluZyBETUEtYnVmcyB3b3VsZAo+ID4gPiBhbHJlYWR5
IGRvIHRoZSB3b3JrLiBGb3IgZXhhbXBsZSwgYSBWNEwyIGRyaXZlciB1c2luZyB0aGUgdmlkZW9i
dWYyCj4gPiA+IGZyYW1ld29yayB3b3VsZCBqdXN0IGNhbGwgdGhlZSB2YjJfZG1hX2NvbnRpZ19w
bGFuZV9kbWFfYWRkcigpIGZ1bmN0aW9uCj4gPiA+IHRvIGdldCB3aGF0IHRoZSBhYm92ZSBvcGVu
LWNvZGVkIGZ1bmN0aW9uIHdvdWxkIHJldHVybi4KPiA+ID4KPiA+ID4gU2lnbmVkLW9mZi1ieTog
VG9tYXN6IEZpZ2EgPHRmaWdhQGNocm9taXVtLm9yZz4KPiA+ID4gLS0tCj4gPiA+ICBkcml2ZXJz
L2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZHJ2LmMgICB8ICAyICsKPiA+ID4gIGRyaXZlcnMvZ3B1
L2RybS92aXJ0aW8vdmlydGdwdV9kcnYuaCAgIHwgIDQgKysKPiA+ID4gIGRyaXZlcnMvZ3B1L2Ry
bS92aXJ0aW8vdmlydGdwdV9wcmltZS5jIHwgODEgKysrKysrKysrKysrKysrKysrKysrKysrKysK
PiA+ID4gIDMgZmlsZXMgY2hhbmdlZCwgODcgaW5zZXJ0aW9ucygrKQo+ID4gPgo+ID4gPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5jIGIvZHJpdmVycy9n
cHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5jCj4gPiA+IGluZGV4IDBmYzMyZmEwYjNjMC4uYWMw
OTVmODEzMTM0IDEwMDY0NAo+ID4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRn
cHVfZHJ2LmMKPiA+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5j
Cj4gPiA+IEBAIC0yMTAsNiArMjEwLDggQEAgc3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIGRyaXZl
ciA9IHsKPiA+ID4gICNlbmRpZgo+ID4gPiAgICAgICAucHJpbWVfaGFuZGxlX3RvX2ZkID0gZHJt
X2dlbV9wcmltZV9oYW5kbGVfdG9fZmQsCj4gPiA+ICAgICAgIC5wcmltZV9mZF90b19oYW5kbGUg
PSBkcm1fZ2VtX3ByaW1lX2ZkX3RvX2hhbmRsZSwKPiA+ID4gKyAgICAgLmdlbV9wcmltZV9leHBv
cnQgPSB2aXJ0Z3B1X2dlbV9wcmltZV9leHBvcnQsCj4gPiA+ICsgICAgIC5nZW1fcHJpbWVfaW1w
b3J0ID0gdmlydGdwdV9nZW1fcHJpbWVfaW1wb3J0LAo+ID4gPiAgICAgICAuZ2VtX3ByaW1lX2dl
dF9zZ190YWJsZSA9IHZpcnRncHVfZ2VtX3ByaW1lX2dldF9zZ190YWJsZSwKPiA+ID4gICAgICAg
LmdlbV9wcmltZV9pbXBvcnRfc2dfdGFibGUgPSB2aXJ0Z3B1X2dlbV9wcmltZV9pbXBvcnRfc2df
dGFibGUsCj4gPiA+ICAgICAgIC5nZW1fcHJpbWVfdm1hcCA9IHZpcnRncHVfZ2VtX3ByaW1lX3Zt
YXAsCj4gPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZHJ2
LmggYi9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZHJ2LmgKPiA+ID4gaW5kZXggZTI4
ODI5NjYxNzI0Li42ODdjZmNlOTE4ODUgMTAwNjQ0Cj4gPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS92aXJ0aW8vdmlydGdwdV9kcnYuaAo+ID4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdmlydGlv
L3ZpcnRncHVfZHJ2LmgKPiA+ID4gQEAgLTM2Nyw2ICszNjcsMTAgQEAgdm9pZCB2aXJ0aW9fZ3B1
X29iamVjdF9mcmVlX3NnX3RhYmxlKHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdCAqYm8pOwo+ID4g
PiAgaW50IHZpcnRpb19ncHVfb2JqZWN0X3dhaXQoc3RydWN0IHZpcnRpb19ncHVfb2JqZWN0ICpi
bywgYm9vbCBub193YWl0KTsKPiA+ID4KPiA+ID4gIC8qIHZpcnRncHVfcHJpbWUuYyAqLwo+ID4g
PiArc3RydWN0IGRtYV9idWYgKnZpcnRncHVfZ2VtX3ByaW1lX2V4cG9ydChzdHJ1Y3QgZHJtX2dl
bV9vYmplY3QgKm9iaiwKPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgaW50IGZsYWdzKTsKPiA+ID4gK3N0cnVjdCBkcm1fZ2VtX29iamVjdCAqdmlydGdwdV9nZW1f
cHJpbWVfaW1wb3J0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gPiA+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZG1hX2J1ZiAqYnVmKTsKPiA+
ID4gIHN0cnVjdCBzZ190YWJsZSAqdmlydGdwdV9nZW1fcHJpbWVfZ2V0X3NnX3RhYmxlKHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqb2JqKTsKPiA+ID4gIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqdmly
dGdwdV9nZW1fcHJpbWVfaW1wb3J0X3NnX3RhYmxlKAo+ID4gPiAgICAgICBzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2LCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gsCj4gPiA+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfcHJpbWUuYyBiL2RyaXZlcnMv
Z3B1L2RybS92aXJ0aW8vdmlydGdwdV9wcmltZS5jCj4gPiA+IGluZGV4IGRjNjQyYTg4NGI4OC4u
NTYyZWIxYTJlZDViIDEwMDY0NAo+ID4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3Zp
cnRncHVfcHJpbWUuYwo+ID4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVf
cHJpbWUuYwo+ID4gPiBAQCAtMjIsNiArMjIsOSBAQAo+ID4gPiAgICogQXV0aG9yczogQW5kcmVh
cyBQb2tvcm55Cj4gPiA+ICAgKi8KPiA+ID4KPiA+ID4gKyNpbmNsdWRlIDxsaW51eC9kbWEtYnVm
Lmg+Cj4gPiA+ICsjaW5jbHVkZSA8bGludXgvZG1hLWRpcmVjdGlvbi5oPgo+ID4gPiArCj4gPiA+
ICAjaW5jbHVkZSA8ZHJtL2RybV9wcmltZS5oPgo+ID4gPgo+ID4gPiAgI2luY2x1ZGUgInZpcnRn
cHVfZHJ2LmgiCj4gPiA+IEBAIC0zMCw2ICszMyw4NCBAQAo+ID4gPiAgICogZGV2aWNlIHRoYXQg
bWlnaHQgc2hhcmUgYnVmZmVycyB3aXRoIHZpcnRncHUKPiA+ID4gICAqLwo+ID4gPgo+ID4gPiAr
c3RhdGljIHN0cnVjdCBzZ190YWJsZSAqCj4gPiA+ICt2aXJ0Z3B1X2dlbV9tYXBfZG1hX2J1Zihz
dHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gsCj4gPiA+ICsgICAgICAgICAgICAgICAg
ICAgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXIpCj4gPiA+ICt7Cj4gPiA+ICsgICAgIHN0
cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqID0gYXR0YWNoLT5kbWFidWYtPnByaXY7Cj4gPiA+ICsg
ICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdCAqYm8gPSBnZW1fdG9fdmlydGlvX2dwdV9vYmoo
b2JqKTsKPiA+ID4gKyAgICAgc3RydWN0IHNnX3RhYmxlICpzZ3Q7Cj4gPiA+ICsgICAgIGludCBy
ZXQ7Cj4gPiA+ICsKPiA+ID4gKyAgICAgc2d0ID0ga3phbGxvYyhzaXplb2YoKnNndCksIEdGUF9L
RVJORUwpOwo+ID4gPiArICAgICBpZiAoIXNndCkKPiA+ID4gKyAgICAgICAgICAgICByZXR1cm4g
RVJSX1BUUigtRU5PTUVNKTsKPiA+ID4gKwo+ID4gPiArICAgICByZXQgPSBzZ19hbGxvY190YWJs
ZShzZ3QsIDEsIEdGUF9LRVJORUwpOwo+ID4gPiArICAgICBpZiAocmV0KSB7Cj4gPiA+ICsgICAg
ICAgICAgICAga2ZyZWUoc2d0KTsKPiA+ID4gKyAgICAgICAgICAgICByZXR1cm4gRVJSX1BUUigt
RU5PTUVNKTsKPiA+ID4gKyAgICAgfQo+ID4gPiArCj4gPiA+ICsgICAgIHNnX2RtYV9hZGRyZXNz
KHNndC0+c2dsKSA9IGJvLT5od19yZXNfaGFuZGxlOwo+ID4gPiArICAgICBzZ19kbWFfbGVuKHNn
dC0+c2dsKSA9IG9iai0+c2l6ZTsKPiA+ID4gKyAgICAgc2d0LT5uZW50cyA9IDE7Cj4gPiA+ICsK
PiA+ID4gKyAgICAgcmV0dXJuIHNndDsKPiA+ID4gK30KPiA+ID4gKwo+ID4gPiArc3RhdGljIHZv
aWQgdmlydGdwdV9nZW1fdW5tYXBfZG1hX2J1ZihzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICph
dHRhY2gsCj4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBz
Z190YWJsZSAqc2d0LAo+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBl
bnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXIpCj4gPiA+ICt7Cj4gPiA+ICsgICAgIHNnX2ZyZWVf
dGFibGUoc2d0KTsKPiA+ID4gKyAgICAga2ZyZWUoc2d0KTsKPiA+ID4gK30KPiA+ID4gKwo+ID4g
PiArc3RhdGljIGNvbnN0IHN0cnVjdCBkbWFfYnVmX29wcyB2aXJ0Z3B1X2RtYWJ1Zl9vcHMgPSAg
ewo+ID4gPiArICAgICAuY2FjaGVfc2d0X21hcHBpbmcgPSB0cnVlLAo+ID4gPiArICAgICAuYXR0
YWNoID0gZHJtX2dlbV9tYXBfYXR0YWNoLAo+ID4gPiArICAgICAuZGV0YWNoID0gZHJtX2dlbV9t
YXBfZGV0YWNoLAo+ID4gPiArICAgICAubWFwX2RtYV9idWYgPSB2aXJ0Z3B1X2dlbV9tYXBfZG1h
X2J1ZiwKPiA+ID4gKyAgICAgLnVubWFwX2RtYV9idWYgPSB2aXJ0Z3B1X2dlbV91bm1hcF9kbWFf
YnVmLAo+ID4gPiArICAgICAucmVsZWFzZSA9IGRybV9nZW1fZG1hYnVmX3JlbGVhc2UsCj4gPiA+
ICsgICAgIC5tbWFwID0gZHJtX2dlbV9kbWFidWZfbW1hcCwKPiA+ID4gKyAgICAgLnZtYXAgPSBk
cm1fZ2VtX2RtYWJ1Zl92bWFwLAo+ID4gPiArICAgICAudnVubWFwID0gZHJtX2dlbV9kbWFidWZf
dnVubWFwLAo+ID4gPiArfTsKPiA+ID4gKwo+ID4gPiArc3RydWN0IGRtYV9idWYgKnZpcnRncHVf
Z2VtX3ByaW1lX2V4cG9ydChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwKPiA+ID4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGZsYWdzKQo+ID4gPiArewo+ID4g
PiArICAgICBzdHJ1Y3QgZG1hX2J1ZiAqYnVmOwo+ID4gPiArCj4gPiA+ICsgICAgIGJ1ZiA9IGRy
bV9nZW1fcHJpbWVfZXhwb3J0KG9iaiwgZmxhZ3MpOwo+ID4gPiArICAgICBpZiAoIUlTX0VSUihi
dWYpKQo+ID4gPiArICAgICAgICAgICAgIGJ1Zi0+b3BzID0gJnZpcnRncHVfZG1hYnVmX29wczsK
PiA+ID4gKwo+ID4gPiArICAgICByZXR1cm4gYnVmOwo+ID4gPiArfQo+ID4gPiArCj4gPiA+ICtz
dHJ1Y3QgZHJtX2dlbV9vYmplY3QgKnZpcnRncHVfZ2VtX3ByaW1lX2ltcG9ydChzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LAo+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc3RydWN0IGRtYV9idWYgKmJ1ZikKPiA+ID4gK3sKPiA+ID4gKyAgICAgc3RydWN0
IGRybV9nZW1fb2JqZWN0ICpvYmo7Cj4gPiA+ICsKPiA+ID4gKyAgICAgaWYgKGJ1Zi0+b3BzID09
ICZ2aXJ0Z3B1X2RtYWJ1Zl9vcHMpIHsKPiA+ID4gKyAgICAgICAgICAgICBvYmogPSBidWYtPnBy
aXY7Cj4gPiA+ICsgICAgICAgICAgICAgaWYgKG9iai0+ZGV2ID09IGRldikgewo+ID4gPiArICAg
ICAgICAgICAgICAgICAgICAgLyoKPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAqIEltcG9y
dGluZyBkbWFidWYgZXhwb3J0ZWQgZnJvbSBvdXIgb3duIGdlbSBpbmNyZWFzZXMKPiA+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAqIHJlZmNvdW50IG9uIGdlbSBpdHNlbGYgaW5zdGVhZCBvZiBm
X2NvdW50IG9mIGRtYWJ1Zi4KPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAqLwo+ID4gPiAr
ICAgICAgICAgICAgICAgICAgICAgZHJtX2dlbV9vYmplY3RfZ2V0KG9iaik7Cj4gPiA+ICsgICAg
ICAgICAgICAgICAgICAgICByZXR1cm4gb2JqOwo+ID4gPiArICAgICAgICAgICAgIH0KPiA+ID4g
KyAgICAgfQo+ID4gPiArCj4gPiA+ICsgICAgIHJldHVybiBkcm1fZ2VtX3ByaW1lX2ltcG9ydChk
ZXYsIGJ1Zik7Cj4gPiA+ICt9Cj4gPiA+ICsKPiA+ID4gIHN0cnVjdCBzZ190YWJsZSAqdmlydGdw
dV9nZW1fcHJpbWVfZ2V0X3NnX3RhYmxlKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKQo+ID4g
PiAgewo+ID4gPiAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3QgKmJvID0gZ2VtX3RvX3Zp
cnRpb19ncHVfb2JqKG9iaik7Cj4gPiA+IC0tCj4gPiA+IDIuMjMuMC4yMzcuZ2M2YTRjZTUwYTAt
Z29vZwo+ID4gPgo+ID4KPiA+IC0tCj4gPiBEYW5pZWwgVmV0dGVyCj4gPiBTb2Z0d2FyZSBFbmdp
bmVlciwgSW50ZWwgQ29ycG9yYXRpb24KPiA+IGh0dHA6Ly9ibG9nLmZmd2xsLmNoCgotLSAKRGFu
aWVsIFZldHRlcgpTb2Z0d2FyZSBFbmdpbmVlciwgSW50ZWwgQ29ycG9yYXRpb24KaHR0cDovL2Js
b2cuZmZ3bGwuY2gKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
