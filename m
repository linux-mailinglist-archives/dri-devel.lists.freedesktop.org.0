Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0F41956439
	for <lists+dri-devel@lfdr.de>; Wed, 26 Jun 2019 10:13:49 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1D1CD6E30F;
	Wed, 26 Jun 2019 08:13:09 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from lb2-smtp-cloud9.xs4all.net (lb2-smtp-cloud9.xs4all.net
 [194.109.24.26])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 154FC6E133
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 14:45:17 +0000 (UTC)
Received: from cobaltpc1.rd.cisco.com
 ([IPv6:2001:420:44c1:2579:b032:593c:25fc:ff9b])
 by smtp-cloud9.xs4all.net with ESMTPA
 id fmh4hQwJSSfvXfmhBhHp0r; Tue, 25 Jun 2019 16:45:17 +0200
From: Hans Verkuil <hverkuil-cisco@xs4all.nl>
To: linux-media@vger.kernel.org
Subject: [PATCHv9 12/13] tda998x: use cec_notifier_conn_(un)register
Date: Tue, 25 Jun 2019 16:45:09 +0200
Message-Id: <20190625144510.122214-13-hverkuil-cisco@xs4all.nl>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190625144510.122214-1-hverkuil-cisco@xs4all.nl>
References: <20190625144510.122214-1-hverkuil-cisco@xs4all.nl>
MIME-Version: 1.0
X-CMAE-Envelope: MS4wfIo22fLBIrqLMrXisr54Oz7ccU5U7XrkX5DqS6e4gjZCJDJZRwR7HVkEE6n7qWgdpxc4gdVprEUsxmIO7u7A4kSJm1ZMYKCM9GPw4XNwYWyQ+Yy206sO
 8UOAgAhk2FID2WCfrssWt2OuksRbq/48El4w9eIkWbzZOD5di6vBRkkL0fJAaPA6KJGO0jDFY6McPqSDGQ1vgv3TBj1bvljUvLVCq3SBaXB4pIfT7mBmBEFn
 EJsZDAkB/wkU88ekHbdFfvLcrLiVt/xlTF/6Svej/c7UAtEOmfOW9g91mLRz6JgxP90TrHaHLf/mh3cXLf/04ILJvo/77mQOiwliRa/+EKmLkuo258l2WAuP
 cQRujG7QhQEvHiym9xGYBJXIZfyp27/4N/GZpDbUdehbVYPqSmOkJB8xCaw8oEBetoqYoi0p
X-Mailman-Approved-At: Wed, 26 Jun 2019 08:12:13 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hans Verkuil <hverkuil-cisco@xs4all.nl>,
 Dariusz Marcinkiewicz <darekm@google.com>, dri-devel@lists.freedesktop.org,
 Cheng-yi Chiang <cychiang@chromium.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogRGFyaXVzeiBNYXJjaW5raWV3aWN6IDxkYXJla21AZ29vZ2xlLmNvbT4KClVzZSB0aGUg
bmV3IGNlY19ub3RpZmllcl9jb25uXyh1bilyZWdpc3RlcigpIGZ1bmN0aW9ucyB0bwoodW4pcmVn
aXN0ZXIgdGhlIG5vdGlmaWVyIGZvciB0aGUgSERNSSBjb25uZWN0b3IsIGFuZCBmaWxsIGluCnRo
ZSBjZWNfY29ubmVjdG9yX2luZm8uCgpTaWduZWQtb2ZmLWJ5OiBEYXJpdXN6IE1hcmNpbmtpZXdp
Y3ogPGRhcmVrbUBnb29nbGUuY29tPgpTaWduZWQtb2ZmLWJ5OiBIYW5zIFZlcmt1aWwgPGh2ZXJr
dWlsLWNpc2NvQHhzNGFsbC5ubD4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTJjL3RkYTk5OHhfZHJ2
LmMgfCA1NiArKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwg
MjggaW5zZXJ0aW9ucygrKSwgMjggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2kyYy90ZGE5OTh4X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2kyYy90ZGE5OTh4X2Ry
di5jCmluZGV4IDdmMzQ2MDFiYjUxNS4uMDE5ZTFmMmYwMDhjIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTJjL3RkYTk5OHhfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2kyYy90ZGE5
OTh4X2Rydi5jCkBAIC0xMjUzLDYgKzEyNTMsOCBAQCBzdGF0aWMgaW50IHRkYTk5OHhfY29ubmVj
dG9yX2luaXQoc3RydWN0IHRkYTk5OHhfcHJpdiAqcHJpdiwKIAkJCQkgIHN0cnVjdCBkcm1fZGV2
aWNlICpkcm0pCiB7CiAJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciA9ICZwcml2LT5j
b25uZWN0b3I7CisJc3RydWN0IGNlY19jb25uZWN0b3JfaW5mbyBjb25uX2luZm87CisJc3RydWN0
IGkyY19ib2FyZF9pbmZvIGNlY19pbmZvOwogCWludCByZXQ7CiAKIAljb25uZWN0b3ItPmludGVy
bGFjZV9hbGxvd2VkID0gMTsKQEAgLTEyNjksNiArMTI3MSwzMSBAQCBzdGF0aWMgaW50IHRkYTk5
OHhfY29ubmVjdG9yX2luaXQoc3RydWN0IHRkYTk5OHhfcHJpdiAqcHJpdiwKIAlpZiAocmV0KQog
CQlyZXR1cm4gcmV0OwogCisJLyoKKwkgKiBTb21lIFREQTk5OHggYXJlIGFjdHVhbGx5IHR3byBJ
MkMgZGV2aWNlcyBtZXJnZWQgb250byBvbmUgcGllY2UKKwkgKiBvZiBzaWxpY29uOiBUREE5OTg5
IGFuZCBUREExOTk4OSBjb21iaW5lIHRoZSBIRE1JIHRyYW5zbWl0dGVyCisJICogd2l0aCBhIHNs
aWdodGx5IG1vZGlmaWVkIFREQTk5NTAgQ0VDIGRldmljZS4gIFRoZSBDRUMgZGV2aWNlCisJICog
aXMgYXQgdGhlIFREQTk5NTAgYWRkcmVzcywgd2l0aCB0aGUgYWRkcmVzcyBwaW5zIHN0cmFwcGVk
IGFjcm9zcworCSAqIHRvIHRoZSBUREE5OTh4IGFkZHJlc3MgcGlucy4gIEhlbmNlLCBpdCBhbHdh
eXMgaGFzIHRoZSBzYW1lCisJICogb2Zmc2V0LgorCSAqLworCW1lbXNldCgmY2VjX2luZm8sIDAs
IHNpemVvZihjZWNfaW5mbykpOworCXN0cmxjcHkoY2VjX2luZm8udHlwZSwgInRkYTk5NTAiLCBz
aXplb2YoY2VjX2luZm8udHlwZSkpOworCWNlY19pbmZvLmFkZHIgPSBwcml2LT5jZWNfYWRkcjsK
KwljZWNfaW5mby5wbGF0Zm9ybV9kYXRhID0gJnByaXYtPmNlY19nbHVlOworCWNlY19pbmZvLmly
cSA9IHByaXYtPmhkbWktPmlycTsKKworCXByaXYtPmNlYyA9IGkyY19uZXdfZGV2aWNlKHByaXYt
PmhkbWktPmFkYXB0ZXIsICZjZWNfaW5mbyk7CisJaWYgKCFwcml2LT5jZWMpCisJCXJldHVybiAt
RU5PREVWOworCisJY2VjX2ZpbGxfY29ubl9pbmZvX2Zyb21fZHJtKCZjb25uX2luZm8sIGNvbm5l
Y3Rvcik7CisKKwlwcml2LT5jZWNfbm90aWZ5ID0gY2VjX25vdGlmaWVyX2Nvbm5fcmVnaXN0ZXIo
cHJpdi0+Y2VjX2dsdWUucGFyZW50LAorCQkJCQkJICAgICAgTlVMTCwgJmNvbm5faW5mbyk7CisJ
aWYgKCFwcml2LT5jZWNfbm90aWZ5KQorCQlyZXR1cm4gLUVOT01FTTsKKwogCWRybV9jb25uZWN0
b3JfYXR0YWNoX2VuY29kZXIoJnByaXYtPmNvbm5lY3RvciwKIAkJCQkgICAgIHByaXYtPmJyaWRn
ZS5lbmNvZGVyKTsKIApAQCAtMTY1MSwxNCArMTY3OCwxMyBAQCBzdGF0aWMgdm9pZCB0ZGE5OTh4
X2Rlc3Ryb3koc3RydWN0IGRldmljZSAqZGV2KQogCWkyY191bnJlZ2lzdGVyX2RldmljZShwcml2
LT5jZWMpOwogCiAJaWYgKHByaXYtPmNlY19ub3RpZnkpCi0JCWNlY19ub3RpZmllcl9wdXQocHJp
di0+Y2VjX25vdGlmeSk7CisJCWNlY19ub3RpZmllcl9jb25uX3VucmVnaXN0ZXIocHJpdi0+Y2Vj
X25vdGlmeSk7CiB9CiAKIHN0YXRpYyBpbnQgdGRhOTk4eF9jcmVhdGUoc3RydWN0IGRldmljZSAq
ZGV2KQogewogCXN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQgPSB0b19pMmNfY2xpZW50KGRldik7
CiAJc3RydWN0IGRldmljZV9ub2RlICpucCA9IGNsaWVudC0+ZGV2Lm9mX25vZGU7Ci0Jc3RydWN0
IGkyY19ib2FyZF9pbmZvIGNlY19pbmZvOwogCXN0cnVjdCB0ZGE5OTh4X3ByaXYgKnByaXY7CiAJ
dTMyIHZpZGVvOwogCWludCByZXZfbG8sIHJldl9oaSwgcmV0OwpAQCAtMTc3NiwxMiArMTgwMiw2
IEBAIHN0YXRpYyBpbnQgdGRhOTk4eF9jcmVhdGUoc3RydWN0IGRldmljZSAqZGV2KQogCQljZWNf
d3JpdGUocHJpdiwgUkVHX0NFQ19SWFNIUERJTlRFTkEsIENFQ19SWFNIUERMRVZfSFBEKTsKIAl9
CiAKLQlwcml2LT5jZWNfbm90aWZ5ID0gY2VjX25vdGlmaWVyX2dldChkZXYpOwotCWlmICghcHJp
di0+Y2VjX25vdGlmeSkgewotCQlyZXQgPSAtRU5PTUVNOwotCQlnb3RvIGZhaWw7Ci0JfQotCiAJ
cHJpdi0+Y2VjX2dsdWUucGFyZW50ID0gZGV2OwogCXByaXYtPmNlY19nbHVlLmRhdGEgPSBwcml2
OwogCXByaXYtPmNlY19nbHVlLmluaXQgPSB0ZGE5OTh4X2NlY19ob29rX2luaXQ7CkBAIC0xNzg5
LDI2ICsxODA5LDYgQEAgc3RhdGljIGludCB0ZGE5OTh4X2NyZWF0ZShzdHJ1Y3QgZGV2aWNlICpk
ZXYpCiAJcHJpdi0+Y2VjX2dsdWUub3BlbiA9IHRkYTk5OHhfY2VjX2hvb2tfb3BlbjsKIAlwcml2
LT5jZWNfZ2x1ZS5yZWxlYXNlID0gdGRhOTk4eF9jZWNfaG9va19yZWxlYXNlOwogCi0JLyoKLQkg
KiBTb21lIFREQTk5OHggYXJlIGFjdHVhbGx5IHR3byBJMkMgZGV2aWNlcyBtZXJnZWQgb250byBv
bmUgcGllY2UKLQkgKiBvZiBzaWxpY29uOiBUREE5OTg5IGFuZCBUREExOTk4OSBjb21iaW5lIHRo
ZSBIRE1JIHRyYW5zbWl0dGVyCi0JICogd2l0aCBhIHNsaWdodGx5IG1vZGlmaWVkIFREQTk5NTAg
Q0VDIGRldmljZS4gIFRoZSBDRUMgZGV2aWNlCi0JICogaXMgYXQgdGhlIFREQTk5NTAgYWRkcmVz
cywgd2l0aCB0aGUgYWRkcmVzcyBwaW5zIHN0cmFwcGVkIGFjcm9zcwotCSAqIHRvIHRoZSBUREE5
OTh4IGFkZHJlc3MgcGlucy4gIEhlbmNlLCBpdCBhbHdheXMgaGFzIHRoZSBzYW1lCi0JICogb2Zm
c2V0LgotCSAqLwotCW1lbXNldCgmY2VjX2luZm8sIDAsIHNpemVvZihjZWNfaW5mbykpOwotCXN0
cmxjcHkoY2VjX2luZm8udHlwZSwgInRkYTk5NTAiLCBzaXplb2YoY2VjX2luZm8udHlwZSkpOwot
CWNlY19pbmZvLmFkZHIgPSBwcml2LT5jZWNfYWRkcjsKLQljZWNfaW5mby5wbGF0Zm9ybV9kYXRh
ID0gJnByaXYtPmNlY19nbHVlOwotCWNlY19pbmZvLmlycSA9IGNsaWVudC0+aXJxOwotCi0JcHJp
di0+Y2VjID0gaTJjX25ld19kZXZpY2UoY2xpZW50LT5hZGFwdGVyLCAmY2VjX2luZm8pOwotCWlm
ICghcHJpdi0+Y2VjKSB7Ci0JCXJldCA9IC1FTk9ERVY7Ci0JCWdvdG8gZmFpbDsKLQl9Ci0KIAkv
KiBlbmFibGUgRURJRCByZWFkIGlycTogKi8KIAlyZWdfc2V0KHByaXYsIFJFR19JTlRfRkxBR1Nf
MiwgSU5UX0ZMQUdTXzJfRURJRF9CTEtfUkQpOwogCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QK
ZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
