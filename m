Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 858C6AB2DF
	for <lists+dri-devel@lfdr.de>; Fri,  6 Sep 2019 09:01:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 054B56E17F;
	Fri,  6 Sep 2019 07:01:06 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x543.google.com (mail-pg1-x543.google.com
 [IPv6:2607:f8b0:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EDB926E071
 for <dri-devel@lists.freedesktop.org>; Thu,  5 Sep 2019 16:18:02 +0000 (UTC)
Received: by mail-pg1-x543.google.com with SMTP id 4so1661965pgm.12
 for <dri-devel@lists.freedesktop.org>; Thu, 05 Sep 2019 09:18:02 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=LOcyk2Tlmy2C4zqKtlXcXvj1dEhOW89Bxfs+xhia+Lc=;
 b=lfSUQo4nnvfVKSu5tnixxqSk3IEhBBZxCaSa/JI6L2zMdm5FScrfLh8lZ90ijXfvtD
 z+oWbcZuVUQ9z3p3z5/Zhm9MQF/rkjBGShOgZl0sL5TqIcrN3FOehxsLhmM9EUbvnpbF
 YQe8TwngoHApt3hYCRLroywugIM7gJ9UEA4+F3RWt5dR2+f5IOA7eURGZ4lauwo4m2Q7
 poFv/oDeXpgJ6v6PjHU9/S9NKl+P2H/EoXyYmQ33ShuMhv3LClm/kC0m8sBLikpvgdRq
 RQYztelgceVzawQurZ+gyqqWrwddWxEIfLzcqocDxDPZOIgdhjK7GlmIZeLy7EiMpU+p
 iLag==
X-Gm-Message-State: APjAAAXhJUQqZX2QdUNr6uI0W8QXGI3avGRJvPE0UM3nRT/WhXhUwp5n
 N3nV/eXmcSmSFEQmxADGTIQgnQ==
X-Google-Smtp-Source: APXvYqyMgjxfkjP3YNECcB58WCY+NHLygBK/D+S4VWMd6L7YO3gjUZq9S9Du5KS72s1N8hLa4mIKqA==
X-Received: by 2002:a63:db45:: with SMTP id x5mr3885637pgi.293.1567700282371; 
 Thu, 05 Sep 2019 09:18:02 -0700 (PDT)
Received: from xps15.cg.shawcable.net (S0106002369de4dac.cg.shawcable.net.
 [68.147.8.254])
 by smtp.gmail.com with ESMTPSA id m129sm6324005pga.39.2019.09.05.09.18.01
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 05 Sep 2019 09:18:01 -0700 (PDT)
From: Mathieu Poirier <mathieu.poirier@linaro.org>
To: stable@vger.kernel.org
Subject: [BACKPORT 4.14.y 01/18] PCI: designware-ep: Fix find_first_zero_bit()
 usage
Date: Thu,  5 Sep 2019 10:17:42 -0600
Message-Id: <20190905161759.28036-2-mathieu.poirier@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190905161759.28036-1-mathieu.poirier@linaro.org>
References: <20190905161759.28036-1-mathieu.poirier@linaro.org>
X-Mailman-Approved-At: Fri, 06 Sep 2019 07:01:00 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=LOcyk2Tlmy2C4zqKtlXcXvj1dEhOW89Bxfs+xhia+Lc=;
 b=RAocJqNuFAo+8EWLGQowOck0TpzPvE7OJtl5QzpsxoyoNf9Ngy0QrVRD8QbNLan0SK
 3atzqgCHL9vl7ujJipFG5mstF8vo8Cqw+J5f1YEz6GGZT2/PAdLdz7nI6i6jXlOhirHF
 s+zLL4x57Pv/j2bnLfroXzBT8ECnmG7bWvVFun5AEwZ8nHcWWz6+lasnvBgrzIAVU7RZ
 vO5xw8QOCOUZrUAHJcYqap8Q1iL7RIYViGVCWgaLpc0EWEHznv31BLWRVEeSeirK+C72
 4z451i7BQb96tTMghJ2Erm9bY0f74GAzJxLfVWq4p3mQV8fTbc8fi617kBInlSo8dIoz
 vCvg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-pm@vger.kernel.org, linux-pci@vger.kernel.org,
 linux-usb@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, linux-mtd@lists.infradead.org,
 linux-i2c@vger.kernel.org, linux-omap@vger.kernel.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogTmlrbGFzIENhc3NlbCA8bmlrbGFzLmNhc3NlbEBheGlzLmNvbT4KCmNvbW1pdCBhZDRh
NWJlY2M2ODljM2YzMmJiYmMyYjM3ZWZmODllZmUxOWRjMmY5IHVwc3RyZWFtCgpmaW5kX2ZpcnN0
X3plcm9fYml0KCkncyBwYXJhbWV0ZXIgJ3NpemUnIGlzIGRlZmluZWQgaW4gYml0cywKbm90IGlu
IGJ5dGVzLgoKZmluZF9maXJzdF96ZXJvX2JpdCgpIGlzIGNhbGxlZCB3aXRoIHNpemUgaW4gYnl0
ZXMgcmF0aGVyIHRoYW4gYml0cywKd2hpY2ggdGh1cyBkZWZpbmVzIGEgdG9vIGxvdyB1cHBlciBs
aW1pdCwgY2F1c2luZwpkd19wY2llX2VwX2luYm91bmRfYXR1KCkgdG8gYXNzaWduIGlhdHUgaW5k
ZXggIzQgdG8gYm90aCBiYXIgNAphbmQgYmFyIDUsIHdoaWNoIG1ha2VzIGJhciA1IG92ZXJ3cml0
ZSB0aGUgc2V0dGluZ3Mgc2V0IGJ5IGJhciA0LgoKU2luY2UgdGhlIHNpemVzIG9mIHRoZSBiaXRt
YXBzIGFyZSBrbm93biwgZHluYW1pY2FsbHkgYWxsb2NhdGUgdGhlCmJpdG1hcHMsIGFuZCB1c2Ug
dGhlIGNvcnJlY3Qgc2l6ZSB3aGVuIGNhbGxpbmcgZmluZF9maXJzdF96ZXJvX2JpdCgpLgoKQWRk
aXRpb25hbGx5LCBtYWtlIHN1cmUgdGhhdCBlcC0+bnVtX29iX3dpbmRvd3MgYW5kIGVwLT5udW1f
aWJfd2luZG93cywKd2hpY2ggYXJlIG9idGFpbmVkIGZyb20gZGV2aWNlIHRyZWUsIGFyZSBzbWFs
bGVyIHRoYW4gdGhlIG1heGltdW0gbnVtYmVyCm9mIGlBVFVzIChNQVhfSUFUVV9JTi9NQVhfSUFU
VV9PVVQpLgoKRml4ZXM6IGY4YWVkNmVjNjI0ZiAoIlBDSTogZHdjOiBkZXNpZ253YXJlOiBBZGQg
RVAgbW9kZSBzdXBwb3J0IikKU2lnbmVkLW9mZi1ieTogTmlrbGFzIENhc3NlbCA8bmlrbGFzLmNh
c3NlbEBheGlzLmNvbT4KU2lnbmVkLW9mZi1ieTogTG9yZW56byBQaWVyYWxpc2kgPGxvcmVuem8u
cGllcmFsaXNpQGFybS5jb20+CkFja2VkLWJ5OiBLaXNob24gVmlqYXkgQWJyYWhhbSBJIDxraXNo
b25AdGkuY29tPgpTaWduZWQtb2ZmLWJ5OiBNYXRoaWV1IFBvaXJpZXIgPG1hdGhpZXUucG9pcmll
ckBsaW5hcm8ub3JnPgotLS0KIGRyaXZlcnMvcGNpL2R3Yy9wY2llLWRlc2lnbndhcmUtZXAuYyB8
IDM0ICsrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0KIGRyaXZlcnMvcGNpL2R3Yy9wY2llLWRl
c2lnbndhcmUuaCAgICB8ICA4ICsrKysrLS0KIDIgZmlsZXMgY2hhbmdlZCwgMzIgaW5zZXJ0aW9u
cygrKSwgMTAgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9wY2kvZHdjL3BjaWUt
ZGVzaWdud2FyZS1lcC5jIGIvZHJpdmVycy9wY2kvZHdjL3BjaWUtZGVzaWdud2FyZS1lcC5jCmlu
ZGV4IGFiY2JmMDc3MDM1OC4uNzE3OTVkYjQxMjYxIDEwMDY0NAotLS0gYS9kcml2ZXJzL3BjaS9k
d2MvcGNpZS1kZXNpZ253YXJlLWVwLmMKKysrIGIvZHJpdmVycy9wY2kvZHdjL3BjaWUtZGVzaWdu
d2FyZS1lcC5jCkBAIC03NCw4ICs3NCw3IEBAIHN0YXRpYyBpbnQgZHdfcGNpZV9lcF9pbmJvdW5k
X2F0dShzdHJ1Y3QgZHdfcGNpZV9lcCAqZXAsIGVudW0gcGNpX2Jhcm5vIGJhciwKIAl1MzIgZnJl
ZV93aW47CiAJc3RydWN0IGR3X3BjaWUgKnBjaSA9IHRvX2R3X3BjaWVfZnJvbV9lcChlcCk7CiAK
LQlmcmVlX3dpbiA9IGZpbmRfZmlyc3RfemVyb19iaXQoJmVwLT5pYl93aW5kb3dfbWFwLAotCQkJ
CSAgICAgICBzaXplb2YoZXAtPmliX3dpbmRvd19tYXApKTsKKwlmcmVlX3dpbiA9IGZpbmRfZmly
c3RfemVyb19iaXQoZXAtPmliX3dpbmRvd19tYXAsIGVwLT5udW1faWJfd2luZG93cyk7CiAJaWYg
KGZyZWVfd2luID49IGVwLT5udW1faWJfd2luZG93cykgewogCQlkZXZfZXJyKHBjaS0+ZGV2LCAi
bm8gZnJlZSBpbmJvdW5kIHdpbmRvd1xuIik7CiAJCXJldHVybiAtRUlOVkFMOwpAQCAtODksNyAr
ODgsNyBAQCBzdGF0aWMgaW50IGR3X3BjaWVfZXBfaW5ib3VuZF9hdHUoc3RydWN0IGR3X3BjaWVf
ZXAgKmVwLCBlbnVtIHBjaV9iYXJubyBiYXIsCiAJfQogCiAJZXAtPmJhcl90b19hdHVbYmFyXSA9
IGZyZWVfd2luOwotCXNldF9iaXQoZnJlZV93aW4sICZlcC0+aWJfd2luZG93X21hcCk7CisJc2V0
X2JpdChmcmVlX3dpbiwgZXAtPmliX3dpbmRvd19tYXApOwogCiAJcmV0dXJuIDA7CiB9CkBAIC0x
MDAsOCArOTksNyBAQCBzdGF0aWMgaW50IGR3X3BjaWVfZXBfb3V0Ym91bmRfYXR1KHN0cnVjdCBk
d19wY2llX2VwICplcCwgcGh5c19hZGRyX3QgcGh5c19hZGRyLAogCXUzMiBmcmVlX3dpbjsKIAlz
dHJ1Y3QgZHdfcGNpZSAqcGNpID0gdG9fZHdfcGNpZV9mcm9tX2VwKGVwKTsKIAotCWZyZWVfd2lu
ID0gZmluZF9maXJzdF96ZXJvX2JpdCgmZXAtPm9iX3dpbmRvd19tYXAsCi0JCQkJICAgICAgIHNp
emVvZihlcC0+b2Jfd2luZG93X21hcCkpOworCWZyZWVfd2luID0gZmluZF9maXJzdF96ZXJvX2Jp
dChlcC0+b2Jfd2luZG93X21hcCwgZXAtPm51bV9vYl93aW5kb3dzKTsKIAlpZiAoZnJlZV93aW4g
Pj0gZXAtPm51bV9vYl93aW5kb3dzKSB7CiAJCWRldl9lcnIocGNpLT5kZXYsICJubyBmcmVlIG91
dGJvdW5kIHdpbmRvd1xuIik7CiAJCXJldHVybiAtRUlOVkFMOwpAQCAtMTEwLDcgKzEwOCw3IEBA
IHN0YXRpYyBpbnQgZHdfcGNpZV9lcF9vdXRib3VuZF9hdHUoc3RydWN0IGR3X3BjaWVfZXAgKmVw
LCBwaHlzX2FkZHJfdCBwaHlzX2FkZHIsCiAJZHdfcGNpZV9wcm9nX291dGJvdW5kX2F0dShwY2ks
IGZyZWVfd2luLCBQQ0lFX0FUVV9UWVBFX01FTSwKIAkJCQkgIHBoeXNfYWRkciwgcGNpX2FkZHIs
IHNpemUpOwogCi0Jc2V0X2JpdChmcmVlX3dpbiwgJmVwLT5vYl93aW5kb3dfbWFwKTsKKwlzZXRf
Yml0KGZyZWVfd2luLCBlcC0+b2Jfd2luZG93X21hcCk7CiAJZXAtPm91dGJvdW5kX2FkZHJbZnJl
ZV93aW5dID0gcGh5c19hZGRyOwogCiAJcmV0dXJuIDA7CkBAIC0xMjUsNyArMTIzLDcgQEAgc3Rh
dGljIHZvaWQgZHdfcGNpZV9lcF9jbGVhcl9iYXIoc3RydWN0IHBjaV9lcGMgKmVwYywgZW51bSBw
Y2lfYmFybm8gYmFyKQogCWR3X3BjaWVfZXBfcmVzZXRfYmFyKHBjaSwgYmFyKTsKIAogCWR3X3Bj
aWVfZGlzYWJsZV9hdHUocGNpLCBhdHVfaW5kZXgsIERXX1BDSUVfUkVHSU9OX0lOQk9VTkQpOwot
CWNsZWFyX2JpdChhdHVfaW5kZXgsICZlcC0+aWJfd2luZG93X21hcCk7CisJY2xlYXJfYml0KGF0
dV9pbmRleCwgZXAtPmliX3dpbmRvd19tYXApOwogfQogCiBzdGF0aWMgaW50IGR3X3BjaWVfZXBf
c2V0X2JhcihzdHJ1Y3QgcGNpX2VwYyAqZXBjLCBlbnVtIHBjaV9iYXJubyBiYXIsCkBAIC0xODEs
NyArMTc5LDcgQEAgc3RhdGljIHZvaWQgZHdfcGNpZV9lcF91bm1hcF9hZGRyKHN0cnVjdCBwY2lf
ZXBjICplcGMsIHBoeXNfYWRkcl90IGFkZHIpCiAJCXJldHVybjsKIAogCWR3X3BjaWVfZGlzYWJs
ZV9hdHUocGNpLCBhdHVfaW5kZXgsIERXX1BDSUVfUkVHSU9OX09VVEJPVU5EKTsKLQljbGVhcl9i
aXQoYXR1X2luZGV4LCAmZXAtPm9iX3dpbmRvd19tYXApOworCWNsZWFyX2JpdChhdHVfaW5kZXgs
IGVwLT5vYl93aW5kb3dfbWFwKTsKIH0KIAogc3RhdGljIGludCBkd19wY2llX2VwX21hcF9hZGRy
KHN0cnVjdCBwY2lfZXBjICplcGMsIHBoeXNfYWRkcl90IGFkZHIsCkBAIC0zMDIsMTIgKzMwMCwz
MiBAQCBpbnQgZHdfcGNpZV9lcF9pbml0KHN0cnVjdCBkd19wY2llX2VwICplcCkKIAkJZGV2X2Vy
cihkZXYsICJ1bmFibGUgdG8gcmVhZCAqbnVtLWliLXdpbmRvd3MqIHByb3BlcnR5XG4iKTsKIAkJ
cmV0dXJuIHJldDsKIAl9CisJaWYgKGVwLT5udW1faWJfd2luZG93cyA+IE1BWF9JQVRVX0lOKSB7
CisJCWRldl9lcnIoZGV2LCAiaW52YWxpZCAqbnVtLWliLXdpbmRvd3MqXG4iKTsKKwkJcmV0dXJu
IC1FSU5WQUw7CisJfQogCiAJcmV0ID0gb2ZfcHJvcGVydHlfcmVhZF91MzIobnAsICJudW0tb2It
d2luZG93cyIsICZlcC0+bnVtX29iX3dpbmRvd3MpOwogCWlmIChyZXQgPCAwKSB7CiAJCWRldl9l
cnIoZGV2LCAidW5hYmxlIHRvIHJlYWQgKm51bS1vYi13aW5kb3dzKiBwcm9wZXJ0eVxuIik7CiAJ
CXJldHVybiByZXQ7CiAJfQorCWlmIChlcC0+bnVtX29iX3dpbmRvd3MgPiBNQVhfSUFUVV9PVVQp
IHsKKwkJZGV2X2VycihkZXYsICJpbnZhbGlkICpudW0tb2Itd2luZG93cypcbiIpOworCQlyZXR1
cm4gLUVJTlZBTDsKKwl9CisKKwllcC0+aWJfd2luZG93X21hcCA9IGRldm1fa3phbGxvYyhkZXYs
IHNpemVvZihsb25nKSAqCisJCQkJCSBCSVRTX1RPX0xPTkdTKGVwLT5udW1faWJfd2luZG93cyks
CisJCQkJCSBHRlBfS0VSTkVMKTsKKwlpZiAoIWVwLT5pYl93aW5kb3dfbWFwKQorCQlyZXR1cm4g
LUVOT01FTTsKKworCWVwLT5vYl93aW5kb3dfbWFwID0gZGV2bV9remFsbG9jKGRldiwgc2l6ZW9m
KGxvbmcpICoKKwkJCQkJIEJJVFNfVE9fTE9OR1MoZXAtPm51bV9vYl93aW5kb3dzKSwKKwkJCQkJ
IEdGUF9LRVJORUwpOworCWlmICghZXAtPm9iX3dpbmRvd19tYXApCisJCXJldHVybiAtRU5PTUVN
OwogCiAJYWRkciA9IGRldm1fa3phbGxvYyhkZXYsIHNpemVvZihwaHlzX2FkZHJfdCkgKiBlcC0+
bnVtX29iX3dpbmRvd3MsCiAJCQkgICAgR0ZQX0tFUk5FTCk7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L3BjaS9kd2MvcGNpZS1kZXNpZ253YXJlLmggYi9kcml2ZXJzL3BjaS9kd2MvcGNpZS1kZXNpZ253
YXJlLmgKaW5kZXggNWFmMjlkMTI1YzdlLi5iYTlkZWRjMzFiZmEgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvcGNpL2R3Yy9wY2llLWRlc2lnbndhcmUuaAorKysgYi9kcml2ZXJzL3BjaS9kd2MvcGNpZS1k
ZXNpZ253YXJlLmgKQEAgLTExNCw2ICsxMTQsMTAgQEAKICNkZWZpbmUgTUFYX01TSV9JUlFTCQkJ
MzIKICNkZWZpbmUgTUFYX01TSV9DVFJMUwkJCShNQVhfTVNJX0lSUVMgLyAzMikKIAorLyogTWF4
aW11bSBudW1iZXIgb2YgaW5ib3VuZC9vdXRib3VuZCBpQVRVcyAqLworI2RlZmluZSBNQVhfSUFU
VV9JTgkJCTI1NgorI2RlZmluZSBNQVhfSUFUVV9PVVQJCQkyNTYKKwogc3RydWN0IHBjaWVfcG9y
dDsKIHN0cnVjdCBkd19wY2llOwogc3RydWN0IGR3X3BjaWVfZXA7CkBAIC0xOTMsOCArMTk3LDgg
QEAgc3RydWN0IGR3X3BjaWVfZXAgewogCXNpemVfdAkJCXBhZ2Vfc2l6ZTsKIAl1OAkJCWJhcl90
b19hdHVbNl07CiAJcGh5c19hZGRyX3QJCSpvdXRib3VuZF9hZGRyOwotCXVuc2lnbmVkIGxvbmcJ
CWliX3dpbmRvd19tYXA7Ci0JdW5zaWduZWQgbG9uZwkJb2Jfd2luZG93X21hcDsKKwl1bnNpZ25l
ZCBsb25nCQkqaWJfd2luZG93X21hcDsKKwl1bnNpZ25lZCBsb25nCQkqb2Jfd2luZG93X21hcDsK
IAl1MzIJCQludW1faWJfd2luZG93czsKIAl1MzIJCQludW1fb2Jfd2luZG93czsKIH07Ci0tIAoy
LjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRy
aS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
