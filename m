Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7444D8C1DC
	for <lists+dri-devel@lfdr.de>; Tue, 13 Aug 2019 22:11:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 548786E10E;
	Tue, 13 Aug 2019 20:11:17 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DE9D96E100
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 20:11:14 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 2250AE0D;
 Tue, 13 Aug 2019 22:11:11 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v4 5/9] drm/panel: Add driver for the NEC NL8048HL11 panel
Date: Tue, 13 Aug 2019 23:10:57 +0300
Message-Id: <20190813201101.30980-6-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190813201101.30980-1-laurent.pinchart@ideasonboard.com>
References: <20190813201101.30980-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1565727071;
 bh=QSu4ppw4bcrdpBvZQgoLt1XVOf+b8jUE9JkM/JhZZeU=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=uJcew2LDyRxYqIv1TEa9voCDgqTLYfP51q6dZR7f9d8AxCP3N3YL+HuWKuTvGJivt
 InprQDxZxb59XO9UNr6Vi0r4OebTraUjOVdNXcQqt6XAQmv3iBJGYa3NmUDszZS2Vd
 L0KU92njoeqAR4lJCiZ4uOkvIdTBqKGeIGObQJbI=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYW5lbCBpcyB1c2VkIG9uIHRoZSBab29tMi8zLzM2MzAgU0RQIGJvYXJkcy4KClRoZSBj
b2RlIGlzIGJhc2VkIG9uIHRoZSBvbWFwZHJtLXNwZWNpZmljIHBhbmVsLW5lYy1ubDgwNDhobDEx
IGRyaXZlcgoKU2lnbmVkLW9mZi1ieTogTGF1cmVudCBQaW5jaGFydCA8bGF1cmVudC5waW5jaGFy
dEBpZGVhc29uYm9hcmQuY29tPgpSZXZpZXdlZC1ieTogU2FtIFJhdm5ib3JnIDxzYW1AcmF2bmJv
cmcub3JnPgotLS0KQ2hhbmdlcyBzaW5jZSB2MjoKCi0gQ2FsbCBkcm1fcGFuZWxfdW5wcmVwYXJl
KCkgaW4gLnJlbW92ZSgpIGhhbmRsZXIKCkNoYW5nZXMgc2luY2UgdjE6CgotIE1lbnRpb24gYm9h
cmRzIHVzaW5nIHRoZSBwYW5lbCBpbiBLY29uZmlnCi0gUmVuYW1lZCBubDgwNDhfZGV2aWNlIHRv
IG5sODA0OF9wYW5lbAotIENvbW1lbnRzIHVwZGF0ZXMKLSBTdG9yZSB3aWR0aF9tbSBhbmQgaGVp
Z2h0X21tIGluIGRybV9kaXNwbGF5X21vZGUKLSBVc2UgZHJtX3BhbmVsX2Rpc2FibGUoKSBpbiAu
cmVtb3ZlKCkgaGFuZGxlcgotLS0KIGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnICAgICAg
ICAgICAgICAgIHwgICA4ICsKIGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZSAgICAgICAg
ICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1uZWMtbmw4MDQ4aGwx
MS5jIHwgMjQ4ICsrKysrKysrKysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdlZCwgMjU3IGluc2Vy
dGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwt
bmVjLW5sODA0OGhsMTEuYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29u
ZmlnIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcKaW5kZXggODdjZGMzMzA2NzJiLi5k
MjgxMzNjNmFhMGEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnCkBAIC0xMTksNiArMTE5LDE0IEBAIGNv
bmZpZyBEUk1fUEFORUxfTEdfTEc0NTczCiAJICBTYXkgWSBoZXJlIGlmIHlvdSB3YW50IHRvIGVu
YWJsZSBzdXBwb3J0IGZvciBMRzQ1NzMgUkdCIHBhbmVsLgogCSAgVG8gY29tcGlsZSB0aGlzIGRy
aXZlciBhcyBhIG1vZHVsZSwgY2hvb3NlIE0gaGVyZS4KIAorY29uZmlnIERSTV9QQU5FTF9ORUNf
Tkw4MDQ4SEwxMQorCXRyaXN0YXRlICJORUMgTkw4MDQ4SEwxMSBSR0IgcGFuZWwiCisJZGVwZW5k
cyBvbiBHUElPTElCICYmIE9GICYmIFNQSQorCWhlbHAKKwkgIFNheSBZIGhlcmUgaWYgeW91IHdh
bnQgdG8gZW5hYmxlIHN1cHBvcnQgZm9yIHRoZSBORUMgTkw4MDQ4SEwxMSBSR0IKKwkgIHBhbmVs
IChmb3VuZCBvbiB0aGUgWm9vbTIvMy8zNjMwIFNEUCBib2FyZHMpLiBUbyBjb21waWxlIHRoaXMg
ZHJpdmVyCisJICBhcyBhIG1vZHVsZSwgY2hvb3NlIE0gaGVyZS4KKwogY29uZmlnIERSTV9QQU5F
TF9OT1ZBVEVLX05UMzkwMTYKIAl0cmlzdGF0ZSAiTm92YXRlayBOVDM5MDE2IFJHQi9TUEkgcGFu
ZWwiCiAJZGVwZW5kcyBvbiBPRiAmJiBTUEkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9w
YW5lbC9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQppbmRleCA5YmM2
ZjNjNWJmOTYuLjgwNTJmOWE3YWQ2MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmVs
L01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQpAQCAtMTAsNiAr
MTAsNyBAQCBvYmotJChDT05GSUdfRFJNX1BBTkVMX0pESV9MVDA3ME1FMDUwMDApICs9IHBhbmVs
LWpkaS1sdDA3MG1lMDUwMDAubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9LSU5HRElTUExBWV9L
RDA5N0QwNCkgKz0gcGFuZWwta2luZ2Rpc3BsYXkta2QwOTdkMDQubwogb2JqLSQoQ09ORklHX0RS
TV9QQU5FTF9MR19MQjAzNVEwMikgKz0gcGFuZWwtbGctbGIwMzVxMDIubwogb2JqLSQoQ09ORklH
X0RSTV9QQU5FTF9MR19MRzQ1NzMpICs9IHBhbmVsLWxnLWxnNDU3My5vCitvYmotJChDT05GSUdf
RFJNX1BBTkVMX05FQ19OTDgwNDhITDExKSArPSBwYW5lbC1uZWMtbmw4MDQ4aGwxMS5vCiBvYmot
JChDT05GSUdfRFJNX1BBTkVMX05PVkFURUtfTlQzOTAxNikgKz0gcGFuZWwtbm92YXRlay1udDM5
MDE2Lm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfT0xJTUVYX0xDRF9PTElOVVhJTk8pICs9IHBh
bmVsLW9saW1leC1sY2Qtb2xpbnV4aW5vLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfT1JJU0VU
RUNIX09UTTgwMDlBKSArPSBwYW5lbC1vcmlzZXRlY2gtb3RtODAwOWEubwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLW5lYy1ubDgwNDhobDExLmMgYi9kcml2ZXJzL2dw
dS9kcm0vcGFuZWwvcGFuZWwtbmVjLW5sODA0OGhsMTEuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwMDAwMDAuLjIxYmFlMmQwYTIzYQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1uZWMtbmw4MDQ4aGwxMS5jCkBAIC0wLDAgKzEsMjQ4IEBA
CisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCsKKy8qCisgKiBORUMgTkw4MDQ4
SEwxMSBQYW5lbCBEcml2ZXIKKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMTkgVGV4YXMgSW5zdHJ1
bWVudHMgSW5jb3Jwb3JhdGVkCisgKgorICogQmFzZWQgb24gdGhlIG9tYXBkcm0tc3BlY2lmaWMg
cGFuZWwtbmVjLW5sODA0OGhsMTEgZHJpdmVyCisgKgorICogQ29weXJpZ2h0IChDKSAyMDEwIFRl
eGFzIEluc3RydW1lbnRzIEluY29ycG9yYXRlZAorICogQXV0aG9yOiBFcmlrIEdpbGxpbmcgPGtv
bmtlcnNAYW5kcm9pZC5jb20+CisgKi8KKworI2luY2x1ZGUgPGxpbnV4L2RlbGF5Lmg+CisjaW5j
bHVkZSA8bGludXgvZ3Bpby9jb25zdW1lci5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgor
I2luY2x1ZGUgPGxpbnV4L3BtLmg+CisjaW5jbHVkZSA8bGludXgvc3BpL3NwaS5oPgorCisjaW5j
bHVkZSA8ZHJtL2RybV9jb25uZWN0b3IuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX21vZGVzLmg+Cisj
aW5jbHVkZSA8ZHJtL2RybV9wYW5lbC5oPgorCitzdHJ1Y3Qgbmw4MDQ4X3BhbmVsIHsKKwlzdHJ1
Y3QgZHJtX3BhbmVsIHBhbmVsOworCisJc3RydWN0IHNwaV9kZXZpY2UgKnNwaTsKKwlzdHJ1Y3Qg
Z3Bpb19kZXNjICpyZXNldF9ncGlvOworfTsKKworI2RlZmluZSB0b19ubDgwNDhfZGV2aWNlKHAp
IGNvbnRhaW5lcl9vZihwLCBzdHJ1Y3Qgbmw4MDQ4X3BhbmVsLCBwYW5lbCkKKworc3RhdGljIGlu
dCBubDgwNDhfd3JpdGUoc3RydWN0IG5sODA0OF9wYW5lbCAqbGNkLCB1bnNpZ25lZCBjaGFyIGFk
ZHIsCisJCQl1bnNpZ25lZCBjaGFyIHZhbHVlKQoreworCXU4IGRhdGFbNF0gPSB7IHZhbHVlLCAw
eDAxLCBhZGRyLCAweDAwIH07CisJaW50IHJldDsKKworCXJldCA9IHNwaV93cml0ZShsY2QtPnNw
aSwgZGF0YSwgc2l6ZW9mKGRhdGEpKTsKKwlpZiAocmV0KQorCQlkZXZfZXJyKCZsY2QtPnNwaS0+
ZGV2LCAiU1BJIHdyaXRlIHRvICV1IGZhaWxlZDogJWRcbiIsCisJCQlhZGRyLCByZXQpOworCisJ
cmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCBubDgwNDhfaW5pdChzdHJ1Y3Qgbmw4MDQ4X3Bh
bmVsICpsY2QpCit7CisJc3RhdGljIGNvbnN0IHN0cnVjdCB7CisJCXVuc2lnbmVkIGNoYXIgYWRk
cjsKKwkJdW5zaWduZWQgY2hhciBkYXRhOworCX0gbmw4MDQ4X2luaXRfc2VxW10gPSB7CisJCXsg
ICAzLCAweDAxIH0sIHsgICAwLCAweDAwIH0sIHsgICAxLCAweDAxIH0sIHsgICA0LCAweDAwIH0s
CisJCXsgICA1LCAweDE0IH0sIHsgICA2LCAweDI0IH0sIHsgIDE2LCAweGQ3IH0sIHsgIDE3LCAw
eDAwIH0sCisJCXsgIDE4LCAweDAwIH0sIHsgIDE5LCAweDU1IH0sIHsgIDIwLCAweDAxIH0sIHsg
IDIxLCAweDcwIH0sCisJCXsgIDIyLCAweDFlIH0sIHsgIDIzLCAweDI1IH0sIHsgIDI0LCAweDI1
IH0sIHsgIDI1LCAweDAyIH0sCisJCXsgIDI2LCAweDAyIH0sIHsgIDI3LCAweGEwIH0sIHsgIDMy
LCAweDJmIH0sIHsgIDMzLCAweDBmIH0sCisJCXsgIDM0LCAweDBmIH0sIHsgIDM1LCAweDBmIH0s
IHsgIDM2LCAweDBmIH0sIHsgIDM3LCAweDBmIH0sCisJCXsgIDM4LCAweDBmIH0sIHsgIDM5LCAw
eDAwIH0sIHsgIDQwLCAweDAyIH0sIHsgIDQxLCAweDAyIH0sCisJCXsgIDQyLCAweDAyIH0sIHsg
IDQzLCAweDBmIH0sIHsgIDQ0LCAweDBmIH0sIHsgIDQ1LCAweDBmIH0sCisJCXsgIDQ2LCAweDBm
IH0sIHsgIDQ3LCAweDBmIH0sIHsgIDQ4LCAweDBmIH0sIHsgIDQ5LCAweDBmIH0sCisJCXsgIDUw
LCAweDAwIH0sIHsgIDUxLCAweDAyIH0sIHsgIDUyLCAweDAyIH0sIHsgIDUzLCAweDAyIH0sCisJ
CXsgIDgwLCAweDBjIH0sIHsgIDgzLCAweDQyIH0sIHsgIDg0LCAweDQyIH0sIHsgIDg1LCAweDQx
IH0sCisJCXsgIDg2LCAweDE0IH0sIHsgIDg5LCAweDg4IH0sIHsgIDkwLCAweDAxIH0sIHsgIDkx
LCAweDAwIH0sCisJCXsgIDkyLCAweDAyIH0sIHsgIDkzLCAweDBjIH0sIHsgIDk0LCAweDFjIH0s
IHsgIDk1LCAweDI3IH0sCisJCXsgIDk4LCAweDQ5IH0sIHsgIDk5LCAweDI3IH0sIHsgMTAyLCAw
eDc2IH0sIHsgMTAzLCAweDI3IH0sCisJCXsgMTEyLCAweDAxIH0sIHsgMTEzLCAweDBlIH0sIHsg
MTE0LCAweDAyIH0sIHsgMTE1LCAweDBjIH0sCisJCXsgMTE4LCAweDBjIH0sIHsgMTIxLCAweDMw
IH0sIHsgMTMwLCAweDAwIH0sIHsgMTMxLCAweDAwIH0sCisJCXsgMTMyLCAweGZjIH0sIHsgMTM0
LCAweDAwIH0sIHsgMTM2LCAweDAwIH0sIHsgMTM4LCAweDAwIH0sCisJCXsgMTM5LCAweDAwIH0s
IHsgMTQwLCAweDAwIH0sIHsgMTQxLCAweGZjIH0sIHsgMTQzLCAweDAwIH0sCisJCXsgMTQ1LCAw
eDAwIH0sIHsgMTQ3LCAweDAwIH0sIHsgMTQ4LCAweDAwIH0sIHsgMTQ5LCAweDAwIH0sCisJCXsg
MTUwLCAweGZjIH0sIHsgMTUyLCAweDAwIH0sIHsgMTU0LCAweDAwIH0sIHsgMTU2LCAweDAwIH0s
CisJCXsgMTU3LCAweDAwIH0sCisJfTsKKworCXVuc2lnbmVkIGludCBpOworCWludCByZXQ7CisK
Kwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShubDgwNDhfaW5pdF9zZXEpOyArK2kpIHsKKwkJ
cmV0ID0gbmw4MDQ4X3dyaXRlKGxjZCwgbmw4MDQ4X2luaXRfc2VxW2ldLmFkZHIsCisJCQkJICAg
bmw4MDQ4X2luaXRfc2VxW2ldLmRhdGEpOworCQlpZiAocmV0IDwgMCkKKwkJCXJldHVybiByZXQ7
CisJfQorCisJdWRlbGF5KDIwKTsKKworCXJldHVybiBubDgwNDhfd3JpdGUobGNkLCAyLCAweDAw
KTsKK30KKworc3RhdGljIGludCBubDgwNDhfZGlzYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5l
bCkKK3sKKwlzdHJ1Y3Qgbmw4MDQ4X3BhbmVsICpsY2QgPSB0b19ubDgwNDhfZGV2aWNlKHBhbmVs
KTsKKworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChsY2QtPnJlc2V0X2dwaW8sIDApOworCisJ
cmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbmw4MDQ4X2VuYWJsZShzdHJ1Y3QgZHJtX3BhbmVs
ICpwYW5lbCkKK3sKKwlzdHJ1Y3Qgbmw4MDQ4X3BhbmVsICpsY2QgPSB0b19ubDgwNDhfZGV2aWNl
KHBhbmVsKTsKKworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChsY2QtPnJlc2V0X2dwaW8sIDEp
OworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZSBubDgwNDhfbW9kZSA9IHsKKwkvKiAgTkVDIFBJWCBDbG9jayBSYXRpbmdzIE1JTjoyMS44TUh6
IFRZUDoyMy44TUh6IE1BWDoyNS43TUh6ICovCisJLmNsb2NrCT0gMjM4MDAsCisJLmhkaXNwbGF5
ID0gODAwLAorCS5oc3luY19zdGFydCA9IDgwMCArIDYsCisJLmhzeW5jX2VuZCA9IDgwMCArIDYg
KyAxLAorCS5odG90YWwgPSA4MDAgKyA2ICsgMSArIDQsCisJLnZkaXNwbGF5ID0gNDgwLAorCS52
c3luY19zdGFydCA9IDQ4MCArIDMsCisJLnZzeW5jX2VuZCA9IDQ4MCArIDMgKyAxLAorCS52dG90
YWwgPSA0ODAgKyAzICsgMSArIDQsCisJLnZyZWZyZXNoID0gNjAsCisJLnR5cGUgPSBEUk1fTU9E
RV9UWVBFX0RSSVZFUiB8IERSTV9NT0RFX1RZUEVfUFJFRkVSUkVELAorCS5mbGFncyA9IERSTV9N
T0RFX0ZMQUdfTkhTWU5DIHwgRFJNX01PREVfRkxBR19OVlNZTkMsCisJLndpZHRoX21tID0gODks
CisJLmhlaWdodF9tbSA9IDUzLAorfTsKKworc3RhdGljIGludCBubDgwNDhfZ2V0X21vZGVzKHN0
cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0
b3IgPSBwYW5lbC0+Y29ubmVjdG9yOworCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlOwor
CisJbW9kZSA9IGRybV9tb2RlX2R1cGxpY2F0ZShwYW5lbC0+ZHJtLCAmbmw4MDQ4X21vZGUpOwor
CWlmICghbW9kZSkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlkcm1fbW9kZV9zZXRfbmFtZShtb2Rl
KTsKKwlkcm1fbW9kZV9wcm9iZWRfYWRkKGNvbm5lY3RvciwgbW9kZSk7CisKKwljb25uZWN0b3It
PmRpc3BsYXlfaW5mby53aWR0aF9tbSA9IG5sODA0OF9tb2RlLndpZHRoX21tOworCWNvbm5lY3Rv
ci0+ZGlzcGxheV9pbmZvLmhlaWdodF9tbSA9IG5sODA0OF9tb2RlLmhlaWdodF9tbTsKKwljb25u
ZWN0b3ItPmRpc3BsYXlfaW5mby5idXNfZmxhZ3MgPSBEUk1fQlVTX0ZMQUdfREVfSElHSAorCQkJ
CQkgIHwgRFJNX0JVU19GTEFHX1NZTkNfU0FNUExFX05FR0VER0UKKwkJCQkJICB8IERSTV9CVVNf
RkxBR19QSVhEQVRBX1NBTVBMRV9ORUdFREdFOworCisJcmV0dXJuIDE7Cit9CisKK3N0YXRpYyBj
b25zdCBzdHJ1Y3QgZHJtX3BhbmVsX2Z1bmNzIG5sODA0OF9mdW5jcyA9IHsKKwkuZGlzYWJsZSA9
IG5sODA0OF9kaXNhYmxlLAorCS5lbmFibGUgPSBubDgwNDhfZW5hYmxlLAorCS5nZXRfbW9kZXMg
PSBubDgwNDhfZ2V0X21vZGVzLAorfTsKKworc3RhdGljIGludCBfX21heWJlX3VudXNlZCBubDgw
NDhfc3VzcGVuZChzdHJ1Y3QgZGV2aWNlICpkZXYpCit7CisJc3RydWN0IG5sODA0OF9wYW5lbCAq
bGNkID0gZGV2X2dldF9kcnZkYXRhKGRldik7CisKKwlubDgwNDhfd3JpdGUobGNkLCAyLCAweDAx
KTsKKwltc2xlZXAoNDApOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgX19tYXliZV91
bnVzZWQgbmw4MDQ4X3Jlc3VtZShzdHJ1Y3QgZGV2aWNlICpkZXYpCit7CisJc3RydWN0IG5sODA0
OF9wYW5lbCAqbGNkID0gZGV2X2dldF9kcnZkYXRhKGRldik7CisKKwkvKiBSZWluaXRpYWxpemUg
dGhlIHBhbmVsLiAqLworCXNwaV9zZXR1cChsY2QtPnNwaSk7CisJbmw4MDQ4X3dyaXRlKGxjZCwg
MiwgMHgwMCk7CisJbmw4MDQ4X2luaXQobGNkKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMg
U0lNUExFX0RFVl9QTV9PUFMobmw4MDQ4X3BtX29wcywgbmw4MDQ4X3N1c3BlbmQsIG5sODA0OF9y
ZXN1bWUpOworCitzdGF0aWMgaW50IG5sODA0OF9wcm9iZShzdHJ1Y3Qgc3BpX2RldmljZSAqc3Bp
KQoreworCXN0cnVjdCBubDgwNDhfcGFuZWwgKmxjZDsKKwlpbnQgcmV0OworCisJbGNkID0gZGV2
bV9remFsbG9jKCZzcGktPmRldiwgc2l6ZW9mKCpsY2QpLCBHRlBfS0VSTkVMKTsKKwlpZiAobGNk
ID09IE5VTEwpCisJCXJldHVybiAtRU5PTUVNOworCisJc3BpX3NldF9kcnZkYXRhKHNwaSwgbGNk
KTsKKwlsY2QtPnNwaSA9IHNwaTsKKworCWxjZC0+cmVzZXRfZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0
KCZzcGktPmRldiwgInJlc2V0IiwgR1BJT0RfT1VUX0xPVyk7CisJaWYgKElTX0VSUihsY2QtPnJl
c2V0X2dwaW8pKSB7CisJCWRldl9lcnIoJnNwaS0+ZGV2LCAiZmFpbGVkIHRvIHBhcnNlIHJlc2V0
IGdwaW9cbiIpOworCQlyZXR1cm4gUFRSX0VSUihsY2QtPnJlc2V0X2dwaW8pOworCX0KKworCXNw
aS0+bW9kZSA9IFNQSV9NT0RFXzA7CisJc3BpLT5iaXRzX3Blcl93b3JkID0gMzI7CisKKwlyZXQg
PSBzcGlfc2V0dXAoc3BpKTsKKwlpZiAocmV0IDwgMCkgeworCQlkZXZfZXJyKCZzcGktPmRldiwg
ImZhaWxlZCB0byBzZXR1cCBTUEk6ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwor
CXJldCA9IG5sODA0OF9pbml0KGxjZCk7CisJaWYgKHJldCA8IDApCisJCXJldHVybiByZXQ7CisK
Kwlkcm1fcGFuZWxfaW5pdCgmbGNkLT5wYW5lbCk7CisJbGNkLT5wYW5lbC5kZXYgPSAmbGNkLT5z
cGktPmRldjsKKwlsY2QtPnBhbmVsLmZ1bmNzID0gJm5sODA0OF9mdW5jczsKKworCXJldHVybiBk
cm1fcGFuZWxfYWRkKCZsY2QtPnBhbmVsKTsKK30KKworc3RhdGljIGludCBubDgwNDhfcmVtb3Zl
KHN0cnVjdCBzcGlfZGV2aWNlICpzcGkpCit7CisJc3RydWN0IG5sODA0OF9wYW5lbCAqbGNkID0g
c3BpX2dldF9kcnZkYXRhKHNwaSk7CisKKwlkcm1fcGFuZWxfcmVtb3ZlKCZsY2QtPnBhbmVsKTsK
Kwlkcm1fcGFuZWxfZGlzYWJsZSgmbGNkLT5wYW5lbCk7CisJZHJtX3BhbmVsX3VucHJlcGFyZSgm
bGNkLT5wYW5lbCk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9k
ZXZpY2VfaWQgbmw4MDQ4X29mX21hdGNoW10gPSB7CisJeyAuY29tcGF0aWJsZSA9ICJuZWMsbmw4
MDQ4aGwxMSIsIH0sCisJeyAvKiBzZW50aW5lbCAqLyB9LAorfTsKKworTU9EVUxFX0RFVklDRV9U
QUJMRShvZiwgbmw4MDQ4X29mX21hdGNoKTsKKworc3RhdGljIHN0cnVjdCBzcGlfZHJpdmVyIG5s
ODA0OF9kcml2ZXIgPSB7CisJLnByb2JlCQk9IG5sODA0OF9wcm9iZSwKKwkucmVtb3ZlCQk9IG5s
ODA0OF9yZW1vdmUsCisJLmRyaXZlcgkJPSB7CisJCS5uYW1lCT0gInBhbmVsLW5lYy1ubDgwNDho
bDExIiwKKwkJLnBtCT0gJm5sODA0OF9wbV9vcHMsCisJCS5vZl9tYXRjaF90YWJsZSA9IG5sODA0
OF9vZl9tYXRjaCwKKwl9LAorfTsKKworbW9kdWxlX3NwaV9kcml2ZXIobmw4MDQ4X2RyaXZlcik7
CisKK01PRFVMRV9BTElBUygic3BpOm5lYyxubDgwNDhobDExIik7CitNT0RVTEVfQVVUSE9SKCJF
cmlrIEdpbGxpbmcgPGtvbmtlcnNAYW5kcm9pZC5jb20+Iik7CitNT0RVTEVfREVTQ1JJUFRJT04o
Ik5FQy1OTDgwNDhITDExIERyaXZlciIpOworTU9EVUxFX0xJQ0VOU0UoIkdQTCIpOwotLSAKUmVn
YXJkcywKCkxhdXJlbnQgUGluY2hhcnQKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2RyaS1kZXZlbA==
