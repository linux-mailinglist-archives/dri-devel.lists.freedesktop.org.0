Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9B64F2D19F7
	for <lists+dri-devel@lfdr.de>; Mon,  7 Dec 2020 20:47:35 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7200E6E8A9;
	Mon,  7 Dec 2020 19:47:32 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from NAM11-BN8-obe.outbound.protection.outlook.com
 (mail-bn8nam11on2086.outbound.protection.outlook.com [40.107.236.86])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5379B6E8A9;
 Mon,  7 Dec 2020 19:47:31 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=n0/qr+UisPJUJJLq2aoMcnbV3kszVvZQdUapx9uX4kt7KeCzGXeAEyD0pHhtxFBqw+VhrT276hhL9d4ApsuwQRpXI/yR+fSU4BdGy3TVr42LudsDdwIpqHeeekrMDxVPbF5JAGnytzKhOZXWNTWiRRSJyXA0uFGIea8Swpb4N8CRTqH3tx4YyJOt38GSpbPtM0L/UMOlmnWy9gEE7H3obp/ADUqRw55Ckg7aA46h4tybH8u5f7vCGBtSaloeeqW+WTcw5f9Lv0wO4/QZrNDRhLTOh5qxnFrH5pNyalbT+9YIdoAOLaVeFfSN6aROHMdt2wShd/Mg8LtA5emL2tmP6w==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=M1Ide9eDlolwfzcpxaBjrHB6D7tOERdCLuDHVm2EXUo=;
 b=KH9wHRW5pI/YiX4YP4iwZJMHfs/Ituz67Zk5T2UpbGSQUMTExbWX2fBjGbgdeDLS2H2clHrb0lGEkzH4IOJ816oFGAXaPISt4mtzZ9leBgPnqsFZ8LKNbVFQbJbfbyB5NYt1IGT3DvT5133bWT0VIIEXv9PvGGQJ/TXU+cDKtW4XSkMl9dYkPYoB90yp2qG2zTU8/1FRBqCeMd51KsWYcyW3ehWMYjjUZ0zIMuiPhgpU9qd9+pEGEH7oc5togFvEH6H1OE+fvetbzr0kD1QUeAyJgugI0/CXQiV0Jmti06Oe1rqWAUTi0ep1AMWjR8IRpyo/gkGvlFNNNsxjD3xL0w==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=M1Ide9eDlolwfzcpxaBjrHB6D7tOERdCLuDHVm2EXUo=;
 b=HJMrS40HWyEnl1Gs0rrAAZM1aJQmaYNCCG2YaF+ULU2yN3XAbEYb5tSMM/nYqdvRtRHpUWq7J8rJw4fPiRKKXw9ilSvl1AJK3MdI47+zeiQlqjy1Awm45/HdHkRIrM9XygbKca3L7qaalW5gZSHbBRZkfwSDpXufcF6NIwYlv5Q=
Authentication-Results: anholt.net; dkim=none (message not signed)
 header.d=none;anholt.net; dmarc=none action=none header.from=amd.com;
Received: from DM6PR12MB3962.namprd12.prod.outlook.com (2603:10b6:5:1ce::21)
 by DM5PR1201MB2504.namprd12.prod.outlook.com (2603:10b6:3:e3::22) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.3632.22; Mon, 7 Dec
 2020 19:47:29 +0000
Received: from DM6PR12MB3962.namprd12.prod.outlook.com
 ([fe80::d055:19dc:5b0f:ed56]) by DM6PR12MB3962.namprd12.prod.outlook.com
 ([fe80::d055:19dc:5b0f:ed56%6]) with mapi id 15.20.3632.021; Mon, 7 Dec 2020
 19:47:29 +0000
Subject: Re: [PATCH 5/5] drm/sched: Make use of a "done" list (v2)
To: =?UTF-8?Q?Christian_K=c3=b6nig?= <christian.koenig@amd.com>,
 amd-gfx@lists.freedesktop.org, dri-devel@lists.freedesktop.org
References: <20201204031722.24040-1-luben.tuikov@amd.com>
 <20201204031722.24040-6-luben.tuikov@amd.com>
 <65fd6863-4a45-d34b-4b58-ec402940c0d0@amd.com>
From: Luben Tuikov <luben.tuikov@amd.com>
Message-ID: <63f63536-7fd6-bd98-4805-7c843dcd93e2@amd.com>
Date: Mon, 7 Dec 2020 14:47:27 -0500
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.5.1
In-Reply-To: <65fd6863-4a45-d34b-4b58-ec402940c0d0@amd.com>
Content-Language: en-GB
X-Originating-IP: [165.204.55.250]
X-ClientProxiedBy: CH0PR03CA0030.namprd03.prod.outlook.com
 (2603:10b6:610:b0::35) To DM6PR12MB3962.namprd12.prod.outlook.com
 (2603:10b6:5:1ce::21)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from localhost.localdomain (165.204.55.250) by
 CH0PR03CA0030.namprd03.prod.outlook.com (2603:10b6:610:b0::35) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.3632.17 via Frontend Transport; Mon, 7 Dec 2020 19:47:28 +0000
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: a7bdf642-d922-42ff-71a3-08d89ae8ee25
X-MS-TrafficTypeDiagnostic: DM5PR1201MB2504:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <DM5PR1201MB2504FD88938891AB481F26C699CE0@DM5PR1201MB2504.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:1122;
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: d1jsrGWmPbclfrTo9sdvJyZvBpAzX6EptSnVz9Oyn34NQG5YdFVlSnkWzE3GsB772AA0fw9t1RJf30GnvmVjZ2r7jqrJW0NX6hLM87JWVZcuCMXc0iETTO2WxVT79K85YXqQd6n5U8lLuqhRKNQBW/GyGwNX7JTRbGx3i7Su6wEUXfu47Cc8gzZZMdjiXxheLYy4MLGk+8iW4k1o4CrFuHb7QhDBzvBhoZajpbpspsaI8xhI20Ba+EgFlCA1eywRixt3YMAhLlRe025s3MgsYl/KQWPjApfWOwfs57Pc8lc8jR/B3AF/ME2bWg5dR+Na7OiSqrUQM+iutcpov0b//u9oYlaUZXvIWr1wYY5RvteE6yMU5GkGHWHQN02245VhQG5uVl1gndtAOyAHUp4GkHP+r6Cdg7H2aiCpnLUQKms=
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:DM6PR12MB3962.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(39860400002)(396003)(376002)(346002)(366004)(136003)(86362001)(26005)(66574015)(53546011)(54906003)(66946007)(31696002)(31686004)(66556008)(316002)(186003)(2906002)(66476007)(6486002)(6506007)(16526019)(36756003)(4326008)(2616005)(478600001)(956004)(6512007)(5660300002)(8936002)(52116002)(8676002)(7416002)(30864003)(83380400001)(44832011)(43740500002)(45980500001);
 DIR:OUT; SFP:1101; 
X-MS-Exchange-AntiSpam-MessageData: =?utf-8?B?SHJWSjVBbkFaOTZHUEZoVmZBSElDN2wwSmpId1o2R004S2hPdndCQko3THZ5?=
 =?utf-8?B?OVAvVEJZWlZmeVVMQnI2c3NZdmI4MGZCSlNEaGVGWHBGaytsM1E4a3BWU3l3?=
 =?utf-8?B?M1I0bDF0UDdXdjcxTGgxdkg1RHBjSmNXUkQ0TnVYamZPZzZjbHF3RjVYdENX?=
 =?utf-8?B?cmlQS09DNUVBMmhIZVlsQWJaRGMzUnZ4VkNScTdweFVqSUxIMmdwdFA0SXVu?=
 =?utf-8?B?TThRUmJFRlZpNnMvWXMrb0xqYUhFSkVLRTcwdm5naEcvYkhUd2I4WHAzYmpJ?=
 =?utf-8?B?Y2tMcS9yTnJhTHpHQno0M3RxRjhDNXpad0tENGFabUtEVEdmcE81U3VVUTN3?=
 =?utf-8?B?b2xLcHJtNFl4N0JrajU2N2VYVldTMzY4L0xENFJ2YUZnRFFMMG1za1NCZGhs?=
 =?utf-8?B?ZUMvZTlYaXhTWUxQbm5ZWUl2OVlEU2JyYVY5RFB4bGFGMm1RZDlZanNEeHhx?=
 =?utf-8?B?RVVJeEhwZVlOMGxoOHlRZlVSYzVxTUNzU2dVMTc3UWNiOTYyY2JCclRHYUVl?=
 =?utf-8?B?OEhna2krWUV2OEUya1R2ekJVNDcyZXBZdWtyQkdHYUUzVGJWaTEwc0F6YnEy?=
 =?utf-8?B?MEJTeFh3eTJkUUhGRXZrU1U1WXkxZDBqRW9NM0ZsTTEvd2hNQ3Uxa2FpbjRM?=
 =?utf-8?B?YjhxeDEzTk5DaGFyaVJaLzZDTVpQSnlSNE5ndnVpR1ladVp4cDNCNjA3a0F0?=
 =?utf-8?B?OElUTGZnU3hDcHFMVk0yWVRWaVlhSnV6cHdiYWl3R3U3Z0pyNm9QQVJoRDlP?=
 =?utf-8?B?aDh2cXl6YnR2M3NxZklZN0hvaDBZc3NaNDIyVnFidjVqVU9pMG1LZkFRenRR?=
 =?utf-8?B?UGxUeHJRa0E3OHZpc1B1amFGa3RXek9ocmM5TlREalNEazlhd2dUK3NtT2pi?=
 =?utf-8?B?ODdudk9YRFphcDdjOCtYWDlDazVKL3RndHA5YjNJazkyNDU5TFcrSXQwL3Rq?=
 =?utf-8?B?QlNrVEkxZ3diY1BDcFpsaEJJRWV5YWdSQ0ZFNlFQU2ROOHVReDd3WC9yOFFr?=
 =?utf-8?B?M2VJamFBNzdJRGF3di9CR2pIREQ2OE9sSnoxc1JLTlhnL0ZZcTcrWlhBdTlk?=
 =?utf-8?B?a0ZpanZhcWltQlRrMHJ4elJBUlIvSWd1ZW9HM1pWa0VNc0l0SkR4NjVqbVVC?=
 =?utf-8?B?UWpKeGtIVVpFdnpQYUxxbXhMMlBCNHBwR1poY0RCWFlrMXppdUwrV2x1WXFF?=
 =?utf-8?B?Nk9jNUJKZDRWZVM2dmEwK0VVNE9XV3pTaFBjZmlEZHdxSXNMa3Y2d3BDZjBm?=
 =?utf-8?B?QWZ1SDJKRVVqT1l3NUM4SitYTUM0M2VndkdxRGJKeEFSVGEyRUJuaEk1ZmRa?=
 =?utf-8?Q?a4qmj/PJZzsRnktLfOrpcTXCMfr4VXNS+2?=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-AuthSource: DM6PR12MB3962.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 07 Dec 2020 19:47:28.9917 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-Network-Message-Id: a7bdf642-d922-42ff-71a3-08d89ae8ee25
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: PMpt5ChNe8uXzVLmXBVjZ/raliubz/hejivfvNlKV1M3Uipom++gnzoqzxqbLSNQ
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM5PR1201MB2504
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Tomeu Vizoso <tomeu.vizoso@collabora.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>,
 Steven Price <steven.price@arm.com>, Qiang Yu <yuq825@gmail.com>,
 Russell King <linux+etnaviv@armlinux.org.uk>,
 Alexander Deucher <Alexander.Deucher@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gMjAyMC0xMi0wNCAzOjE2IGEubS4sIENocmlzdGlhbiBLw7ZuaWcgd3JvdGU6Cj4gQW0gMDQu
MTIuMjAgdW0gMDQ6MTcgc2NocmllYiBMdWJlbiBUdWlrb3Y6Cj4+IFRoZSBkcm1fc2NoZWRfam9i
X2RvbmUoKSBjYWxsYmFjayBub3cgbW92ZXMgZG9uZQo+PiBqb2JzIGZyb20gdGhlIHBlbmRpbmcg
bGlzdCB0byBhICJkb25lIiBsaXN0Lgo+Pgo+PiBJbiBkcm1fc2NoZWRfam9iX3RpbWVvdXQsIG1h
a2UgdXNlIG9mIHRoZSBzdGF0dXMKPj4gcmV0dXJuZWQgYnkgYSBHUFUgZHJpdmVyIGpvYiB0aW1l
b3V0IGhhbmRsZXIgdG8KPj4gZGVjaWRlIHdoZXRoZXIgdG8gbGVhdmUgdGhlIG9sZGVzdCBqb2Ig
aW4gdGhlCj4+IHBlbmRpbmcgbGlzdCwgb3IgdG8gc2VuZCBpdCBvZmYgdG8gdGhlIGRvbmUgbGlz
dC4KPj4gSWYgYSBkcml2ZXIncyBqb2IgdGltZW91dCBjYWxsYmFjayByZXR1cm5zIGEKPj4gc3Rh
dHVzIHRoYXQgdGhhdCBqb2IgaXMgZG9uZSwgaXQgaXMgYWRkZWQgdG8gdGhlCj4+IGRvbmUgbGlz
dCBhbmQgdGhlIGRvbmUgdGhyZWFkIHdva2VuIHVwLiBJZiB0aGF0Cj4+IGpvYiBuZWVkcyBtb3Jl
IHRpbWUsIGl0IGlzIGxlZnQgb24gdGhlIHBlbmRpbmcKPj4gbGlzdCBhbmQgdGhlIHRpbWVvdXQg
dGltZXIgcmVzdGFydGVkLgo+Pgo+PiBUaGUgaWRlYSBpcyB0aGF0IGEgR1BVIGRyaXZlciBjYW4g
Y2hlY2sgdGhlIElQIHRvCj4+IHdoaWNoIHRoZSBwYXNzZWQtaW4gam9iIGJlbG9uZ3MgdG8gYW5k
IGRldGVybWluZQo+PiB3aGV0aGVyIHRoZSBJUCBpcyBhbGl2ZSBhbmQgd2VsbCwgb3IgaWYgaXQg
bmVlZHMKPj4gbW9yZSB0aW1lIHRvIGNvbXBsZXRlIHRoaXMgam9iIGFuZCBwZXJoYXBzIG90aGVy
cwo+PiBhbHNvIGV4ZWN1dGluZyBvbiBpdC4KPj4KPj4gSW4gZHJtX3NjaGVkX2pvYl90aW1lb3V0
KCksIHRoZSBtYWluIHNjaGVkdWxlcgo+PiB0aHJlYWQgaXMgbm93IHBhcmtlZCwgYmVmb3JlIGNh
bGxpbmcgYSBkcml2ZXIncwo+PiB0aW1lb3V0X2pvYiBjYWxsYmFjaywgc28gYXMgdG8gbm90IGNv
bXBldGUgcHVzaGluZwo+PiBqb2JzIGRvd24gdG8gdGhlIEdQVSB3aGlsZSB0aGUgcmVjb3Zlcnkg
bWV0aG9kIGlzCj4+IHRha2luZyBwbGFjZS4KPj4KPj4gRWxpbWluYXRlIHRoZSBwb2xsaW5nIG1l
Y2hhbmlzbSBvZiBwaWNraW5nIG91dCBkb25lCj4+IGpvYnMgZnJvbSB0aGUgcGVuZGluZyBsaXN0
LCBpLmUuIGVsaW1pbmF0ZQo+PiBkcm1fc2NoZWRfZ2V0X2NsZWFudXBfam9iKCkuCj4+Cj4+IFRo
aXMgYWxzbyBlbGltaW5hdGVzIHRoZSBlbGRlc3Qgam9iIGRpc2FwcGVhcmluZwo+PiBmcm9tIHRo
ZSBwZW5kaW5nIGxpc3QsIHdoaWxlIHRoZSBkcml2ZXIgdGltZW91dAo+PiBoYW5kbGVyIGlzIGNh
bGxlZC4KPj4KPj4gVmFyaW91cyBvdGhlciBvcHRpbWl6YXRpb25zIHRvIHRoZSBHUFUgc2NoZWR1
bGVyCj4+IGFuZCBqb2IgcmVjb3ZlcnkgYXJlIHBvc3NpYmxlIHdpdGggdGhpcyBmb3JtYXQuCj4+
Cj4+IFNpZ25lZC1vZmYtYnk6IEx1YmVuIFR1aWtvdiA8bHViZW4udHVpa292QGFtZC5jb20+Cj4+
Cj4+IENjOiBBbGV4YW5kZXIgRGV1Y2hlciA8QWxleGFuZGVyLkRldWNoZXJAYW1kLmNvbT4KPj4g
Q2M6IEFuZHJleSBHcm9kem92c2t5IDxBbmRyZXkuR3JvZHpvdnNreUBhbWQuY29tPgo+PiBDYzog
Q2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPgo+PiBDYzogRGFuaWVs
IFZldHRlciA8ZGFuaWVsLnZldHRlckBmZndsbC5jaD4KPj4gQ2M6IEx1Y2FzIFN0YWNoIDxsLnN0
YWNoQHBlbmd1dHJvbml4LmRlPgo+PiBDYzogUnVzc2VsbCBLaW5nIDxsaW51eCtldG5hdml2QGFy
bWxpbnV4Lm9yZy51az4KPj4gQ2M6IENocmlzdGlhbiBHbWVpbmVyIDxjaHJpc3RpYW4uZ21laW5l
ckBnbWFpbC5jb20+Cj4+IENjOiBRaWFuZyBZdSA8eXVxODI1QGdtYWlsLmNvbT4KPj4gQ2M6IFJv
YiBIZXJyaW5nIDxyb2JoQGtlcm5lbC5vcmc+Cj4+IENjOiBUb21ldSBWaXpvc28gPHRvbWV1LnZp
em9zb0Bjb2xsYWJvcmEuY29tPgo+PiBDYzogU3RldmVuIFByaWNlIDxzdGV2ZW4ucHJpY2VAYXJt
LmNvbT4KPj4gQ2M6IEFseXNzYSBSb3Nlbnp3ZWlnIDxhbHlzc2Eucm9zZW56d2VpZ0Bjb2xsYWJv
cmEuY29tPgo+PiBDYzogRXJpYyBBbmhvbHQgPGVyaWNAYW5ob2x0Lm5ldD4KPj4KPj4gdjI6IERp
c3BlbGwgdXNpbmcgYSBkb25lIHRocmVhZCwgc28gYXMgdG8ga2VlcAo+PiAgICAgIHRoZSBjYWNo
ZSBob3Qgb24gdGhlIHNhbWUgcHJvY2Vzc29yLgo+PiAtLS0KPj4gICBkcml2ZXJzL2dwdS9kcm0v
c2NoZWR1bGVyL3NjaGVkX21haW4uYyB8IDI0NyArKysrKysrKysrKysrLS0tLS0tLS0tLS0tCj4+
ICAgaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oICAgICAgICAgICAgfCAgIDQgKwo+PiAgIDIg
ZmlsZXMgY2hhbmdlZCwgMTM0IGluc2VydGlvbnMoKyksIDExNyBkZWxldGlvbnMoLSkKPj4KPj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2NoZWRfbWFpbi5jIGIvZHJp
dmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9tYWluLmMKPj4gaW5kZXggYjk4NzZjYWQ5NGYy
Li5kNzcxODBiNDQ5OTggMTAwNjQ0Cj4+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIv
c2NoZWRfbWFpbi5jCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2NoZWRfbWFp
bi5jCj4+IEBAIC0xNjQsNyArMTY0LDkgQEAgZHJtX3NjaGVkX3JxX3NlbGVjdF9lbnRpdHkoc3Ry
dWN0IGRybV9zY2hlZF9ycSAqcnEpCj4+ICAgICogZHJtX3NjaGVkX2pvYl9kb25lIC0gY29tcGxl
dGUgYSBqb2IKPj4gICAgKiBAc19qb2I6IHBvaW50ZXIgdG8gdGhlIGpvYiB3aGljaCBpcyBkb25l
Cj4+ICAgICoKPj4gLSAqIEZpbmlzaCB0aGUgam9iJ3MgZmVuY2UgYW5kIHdha2UgdXAgdGhlIHdv
cmtlciB0aHJlYWQuCj4+ICsgKiBNb3ZlIHRoZSBjb21wbGV0ZWQgdGFzayB0byB0aGUgZG9uZSBs
aXN0LAo+PiArICogc2lnbmFsIHRoZSBpdHMgZmVuY2UgdG8gbWFyayBpdCBmaW5pc2hlZCwKPj4g
KyAqIGFuZCB3YWtlIHVwIHRoZSB3b3JrZXIgdGhyZWFkLgo+PiAgICAqLwo+PiAgIHN0YXRpYyB2
b2lkIGRybV9zY2hlZF9qb2JfZG9uZShzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAqc19qb2IpCj4+ICAg
ewo+PiBAQCAtMTc2LDkgKzE3OCwxNCBAQCBzdGF0aWMgdm9pZCBkcm1fc2NoZWRfam9iX2RvbmUo
c3RydWN0IGRybV9zY2hlZF9qb2IgKnNfam9iKQo+PiAgIAo+PiAgIAl0cmFjZV9kcm1fc2NoZWRf
cHJvY2Vzc19qb2Ioc19mZW5jZSk7Cj4+ICAgCj4+ICsJc3Bpbl9sb2NrKCZzY2hlZC0+am9iX2xp
c3RfbG9jayk7Cj4+ICsJbGlzdF9tb3ZlKCZzX2pvYi0+bGlzdCwgJnNjaGVkLT5kb25lX2xpc3Qp
Owo+PiArCXNwaW5fdW5sb2NrKCZzY2hlZC0+am9iX2xpc3RfbG9jayk7Cj4+ICsKPiAKPiBUaGF0
IGlzIHJhY3ksIGFzIHNvb24gYXMgdGhlIHNwaW5sb2NrIGlzIGRyb3BwZWQgdGhlIGpvYiBhbmQg
d2l0aCBpdCB0aGUgCj4gc19mZW5jZSBtaWdodCBoYXZlbiBiZWVuIGRlc3Ryb3llZC4KClllYWgs
IEkgaGFkIGl0IHRoZSBvdGhlciB3YXkgYXJvdW5kLCAodGhlIGNvcnJlY3Qgd2F5KSwKYW5kIGNo
YW5nZWQgaXQtLW5vdCBzdXJlIHdoeS4gSSByZXZlcnQgaXQgYmFjay4gVGhhbmtzCmZvciBjYXRj
aGluZyB0aGlzLgoKUmVnYXJkcywKTHViZW4KCj4gCj4+ICAgCWRtYV9mZW5jZV9nZXQoJnNfZmVu
Y2UtPmZpbmlzaGVkKTsKPj4gICAJZHJtX3NjaGVkX2ZlbmNlX2ZpbmlzaGVkKHNfZmVuY2UpOwo+
PiAgIAlkbWFfZmVuY2VfcHV0KCZzX2ZlbmNlLT5maW5pc2hlZCk7Cj4gCj4gSW4gb3RoZXIgd29y
ZHMgdGhpcyBoZXJlIG5lZWRzIHRvIGNvbWUgZmlyc3QuCj4gCj4gUmVnYXJkcywKPiBDaHJpc3Rp
YW4uCj4gCj4+ICsKPj4gICAJd2FrZV91cF9pbnRlcnJ1cHRpYmxlKCZzY2hlZC0+d2FrZV91cF93
b3JrZXIpOwo+PiAgIH0KPj4gICAKPj4gQEAgLTMwOSw2ICszMTYsMzcgQEAgc3RhdGljIHZvaWQg
ZHJtX3NjaGVkX2pvYl9iZWdpbihzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAqc19qb2IpCj4+ICAgCXNw
aW5fdW5sb2NrKCZzY2hlZC0+am9iX2xpc3RfbG9jayk7Cj4+ICAgfQo+PiAgIAo+PiArLyoqIGRy
bV9zY2hlZF9qb2JfdGltZW91dCAtLSBhIHRpbWVyIHRpbWVvdXQgb2NjdXJyZWQKPj4gKyAqIEB3
b3JrOiBwb2ludGVyIHRvIHdvcmtfc3RydWN0Cj4+ICsgKgo+PiArICogRmlyc3QsIHBhcmsgdGhl
IHNjaGVkdWxlciB0aHJlYWQgd2hvc2UgSVAgdGltZWQgb3V0LAo+PiArICogc28gdGhhdCB3ZSBk
b24ndCByYWNlIHdpdGggdGhlIHNjaGVkdWxlciB0aHJlYWQgcHVzaGluZwo+PiArICogam9icyBk
b3duIHRoZSBJUCBhcyB3ZSB0cnkgdG8gaW52ZXN0aWdhdGUgd2hhdAo+PiArICogaGFwcGVuZWQg
YW5kIGdpdmUgZHJpdmVycyBhIGNoYW5jZSB0byByZWNvdmVyLgo+PiArICoKPj4gKyAqIFNlY29u
ZCwgdGFrZSB0aGUgZmlzdCBqb2IgaW4gdGhlIHBlbmRpbmcgbGlzdAo+PiArICogKG9sZGVzdCks
IGxlYXZlIGl0IGluIHRoZSBwZW5kaW5nIGxpc3QgYW5kIGNhbGwgdGhlCj4+ICsgKiBkcml2ZXIn
cyB0aW1lciB0aW1lb3V0IGNhbGxiYWNrIHRvIGZpbmQgb3V0IHdoYXQKPj4gKyAqIGhhcHBlbmVk
LCBwYXNzaW5nIHRoaXMgam9iIGFzIHRoZSBzdXNwZWN0IG9uZS4KPj4gKyAqCj4+ICsgKiBUaGUg
ZHJpdmVyIG1heSByZXR1cm4gRFJNX1RBU0tfU1RBVFVTIENPTVBMRVRFLAo+PiArICogd2hpY2gg
bWVhbnMgdGhlIHRhc2sgaXMgbm90IGluIHRoZSBJUCgqKSBhbmQgd2UgbW92ZQo+PiArICogaXQg
dG8gdGhlIGRvbmUgbGlzdCB0byBmcmVlIGl0Lgo+PiArICoKPj4gKyAqICgqKSBBIHJlYXNvbiBm
b3IgdGhpcyB3b3VsZCBiZSwgc2F5LCB0aGF0IHRoZSBqb2IKPj4gKyAqIGNvbXBsZXRlZCBpbiBk
dWUgdGltZSwgb3IgdGhlIGRyaXZlciBoYXMgYWJvcnRlZAo+PiArICogdGhpcyBqb2IgdXNpbmcg
ZHJpdmVyIHNwZWNpZmljIG1ldGhvZHMgaW4gdGhlCj4+ICsgKiB0aW1lZG91dF9qb2IgY2FsbGJh
Y2sgYW5kIGhhcyBub3cgcmVtb3ZlZCBpdCBmcm9tCj4+ICsgKiB0aGUgaGFyZHdhcmUuCj4+ICsg
Kgo+PiArICogT3IsIHRoZSBkcml2ZXIgbWF5IHJldHVybiBEUk1fVEFTS19TVEFUVVNfQUxJVkUs
IHRvCj4+ICsgKiBpbmRpY2F0ZSB0aGF0IGl0IGhhZCBpbnF1aXJlZCBhYm91dCB0aGlzIGpvYiwg
YW5kIGl0Cj4+ICsgKiBoYXMgdmVyaWZpZWQgdGhhdCB0aGlzIGpvYiBpcyBhbGl2ZSBhbmQgd2Vs
bCwgYW5kCj4+ICsgKiB0aGF0IHRoZSBEUk0gbGF5ZXIgc2hvdWxkIGdpdmUgdGhpcyB0YXNrIG1v
cmUgdGltZQo+PiArICogdG8gY29tcGxldGUuIEluIHRoaXMgY2FzZSwgd2UgcmVzdGFydCB0aGUg
dGltZW91dCB0aW1lci4KPj4gKyAqCj4+ICsgKiBMYXN0bHksIHdlIHVucGFyayB0aGUgc2NoZWR1
bGVyIHRocmVhZC4KPj4gKyAqLwo+PiAgIHN0YXRpYyB2b2lkIGRybV9zY2hlZF9qb2JfdGltZWRv
dXQoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQo+PiAgIHsKPj4gICAJc3RydWN0IGRybV9ncHVf
c2NoZWR1bGVyICpzY2hlZDsKPj4gQEAgLTMxNiwzNyArMzU0LDMyIEBAIHN0YXRpYyB2b2lkIGRy
bV9zY2hlZF9qb2JfdGltZWRvdXQoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQo+PiAgIAo+PiAg
IAlzY2hlZCA9IGNvbnRhaW5lcl9vZih3b3JrLCBzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIsIHdv
cmtfdGRyLndvcmspOwo+PiAgIAo+PiAtCS8qIFByb3RlY3RzIGFnYWluc3QgY29uY3VycmVudCBk
ZWxldGlvbiBpbiBkcm1fc2NoZWRfZ2V0X2NsZWFudXBfam9iICovCj4+ICsJa3RocmVhZF9wYXJr
KHNjaGVkLT50aHJlYWQpOwo+PiArCj4+ICAgCXNwaW5fbG9jaygmc2NoZWQtPmpvYl9saXN0X2xv
Y2spOwo+PiAgIAlqb2IgPSBsaXN0X2ZpcnN0X2VudHJ5X29yX251bGwoJnNjaGVkLT5wZW5kaW5n
X2xpc3QsCj4+ICAgCQkJCSAgICAgICBzdHJ1Y3QgZHJtX3NjaGVkX2pvYiwgbGlzdCk7Cj4+ICsJ
c3Bpbl91bmxvY2soJnNjaGVkLT5qb2JfbGlzdF9sb2NrKTsKPj4gICAKPj4gICAJaWYgKGpvYikg
ewo+PiAtCQkvKgo+PiAtCQkgKiBSZW1vdmUgdGhlIGJhZCBqb2Igc28gaXQgY2Fubm90IGJlIGZy
ZWVkIGJ5IGNvbmN1cnJlbnQKPj4gLQkJICogZHJtX3NjaGVkX2NsZWFudXBfam9icy4gSXQgd2ls
bCBiZSByZWluc2VydGVkIGJhY2sgYWZ0ZXIgc2NoZWQtPnRocmVhZAo+PiAtCQkgKiBpcyBwYXJr
ZWQgYXQgd2hpY2ggcG9pbnQgaXQncyBzYWZlLgo+PiAtCQkgKi8KPj4gLQkJbGlzdF9kZWxfaW5p
dCgmam9iLT5saXN0KTsKPj4gLQkJc3Bpbl91bmxvY2soJnNjaGVkLT5qb2JfbGlzdF9sb2NrKTsK
Pj4gLQo+PiAtCQlqb2ItPnNjaGVkLT5vcHMtPnRpbWVkb3V0X2pvYihqb2IpOwo+PiArCQlpbnQg
cmVzOwo+PiAgIAo+PiAtCQkvKgo+PiAtCQkgKiBHdWlsdHkgam9iIGRpZCBjb21wbGV0ZSBhbmQg
aGVuY2UgbmVlZHMgdG8gYmUgbWFudWFsbHkgcmVtb3ZlZAo+PiAtCQkgKiBTZWUgZHJtX3NjaGVk
X3N0b3AgZG9jLgo+PiAtCQkgKi8KPj4gLQkJaWYgKHNjaGVkLT5mcmVlX2d1aWx0eSkgewo+PiAt
CQkJam9iLT5zY2hlZC0+b3BzLT5mcmVlX2pvYihqb2IpOwo+PiAtCQkJc2NoZWQtPmZyZWVfZ3Vp
bHR5ID0gZmFsc2U7Cj4+ICsJCXJlcyA9IGpvYi0+c2NoZWQtPm9wcy0+dGltZWRvdXRfam9iKGpv
Yik7Cj4+ICsJCWlmIChyZXMgPT0gRFJNX1RBU0tfU1RBVFVTX0NPTVBMRVRFKSB7Cj4+ICsJCQkv
KiBUaGUgam9iIGlzIG91dCBvZiB0aGUgZGV2aWNlLgo+PiArCQkJICovCj4+ICsJCQlzcGluX2xv
Y2soJnNjaGVkLT5qb2JfbGlzdF9sb2NrKTsKPj4gKwkJCWxpc3RfbW92ZSgmam9iLT5saXN0LCAm
c2NoZWQtPmRvbmVfbGlzdCk7Cj4+ICsJCQlzcGluX3VubG9jaygmc2NoZWQtPmpvYl9saXN0X2xv
Y2spOwo+PiArCQkJd2FrZV91cF9pbnRlcnJ1cHRpYmxlKCZzY2hlZC0+d2FrZV91cF93b3JrZXIp
Owo+PiArCQl9IGVsc2Ugewo+PiArCQkJLyogVGhlIGpvYiBuZWVkcyBtb3JlIHRpbWUuCj4+ICsJ
CQkgKi8KPj4gKwkJCWRybV9zY2hlZF9zdGFydF90aW1lb3V0KHNjaGVkKTsKPj4gICAJCX0KPj4g
LQl9IGVsc2Ugewo+PiAtCQlzcGluX3VubG9jaygmc2NoZWQtPmpvYl9saXN0X2xvY2spOwo+PiAg
IAl9Cj4+ICAgCj4+IC0Jc3Bpbl9sb2NrKCZzY2hlZC0+am9iX2xpc3RfbG9jayk7Cj4+IC0JZHJt
X3NjaGVkX3N0YXJ0X3RpbWVvdXQoc2NoZWQpOwo+PiAtCXNwaW5fdW5sb2NrKCZzY2hlZC0+am9i
X2xpc3RfbG9jayk7Cj4+ICsJa3RocmVhZF91bnBhcmsoc2NoZWQtPnRocmVhZCk7Cj4+ICAgfQo+
PiAgIAo+PiAgICAvKioKPj4gQEAgLTQxMywyNCArNDQ2LDEzIEBAIHZvaWQgZHJtX3NjaGVkX3N0
b3Aoc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCwgc3RydWN0IGRybV9zY2hlZF9qb2Ig
KmJhZCkKPj4gICAJa3RocmVhZF9wYXJrKHNjaGVkLT50aHJlYWQpOwo+PiAgIAo+PiAgIAkvKgo+
PiAtCSAqIFJlaW5zZXJ0IGJhY2sgdGhlIGJhZCBqb2IgaGVyZSAtIG5vdyBpdCdzIHNhZmUgYXMK
Pj4gLQkgKiBkcm1fc2NoZWRfZ2V0X2NsZWFudXBfam9iIGNhbm5vdCByYWNlIGFnYWluc3QgdXMg
YW5kIHJlbGVhc2UgdGhlCj4+IC0JICogYmFkIGpvYiBhdCB0aGlzIHBvaW50IC0gd2UgcGFya2Vk
ICh3YWl0ZWQgZm9yKSBhbnkgaW4gcHJvZ3Jlc3MKPj4gLQkgKiAoZWFybGllcikgY2xlYW51cHMg
YW5kIGRybV9zY2hlZF9nZXRfY2xlYW51cF9qb2Igd2lsbCBub3QgYmUgY2FsbGVkCj4+IC0JICog
bm93IHVudGlsIHRoZSBzY2hlZHVsZXIgdGhyZWFkIGlzIHVucGFya2VkLgo+PiAtCSAqLwo+PiAt
CWlmIChiYWQgJiYgYmFkLT5zY2hlZCA9PSBzY2hlZCkKPj4gLQkJLyoKPj4gLQkJICogQWRkIGF0
IHRoZSBoZWFkIG9mIHRoZSBxdWV1ZSB0byByZWZsZWN0IGl0IHdhcyB0aGUgZWFybGllc3QKPj4g
LQkJICogam9iIGV4dHJhY3RlZC4KPj4gLQkJICovCj4+IC0JCWxpc3RfYWRkKCZiYWQtPmxpc3Qs
ICZzY2hlZC0+cGVuZGluZ19saXN0KTsKPj4gLQo+PiAtCS8qCj4+IC0JICogSXRlcmF0ZSB0aGUg
am9iIGxpc3QgZnJvbSBsYXRlciB0byAgZWFybGllciBvbmUgYW5kIGVpdGhlciBkZWFjdGl2ZQo+
PiAtCSAqIHRoZWlyIEhXIGNhbGxiYWNrcyBvciByZW1vdmUgdGhlbSBmcm9tIHBlbmRpbmcgbGlz
dCBpZiB0aGV5IGFscmVhZHkKPj4gLQkgKiBzaWduYWxlZC4KPj4gLQkgKiBUaGlzIGl0ZXJhdGlv
biBpcyB0aHJlYWQgc2FmZSBhcyBzY2hlZCB0aHJlYWQgaXMgc3RvcHBlZC4KPj4gKwkgKiBJdGVy
YXRlIHRoZSBwZW5kaW5nIGxpc3QgaW4gcmV2ZXJzZSBvcmRlciwKPj4gKwkgKiBmcm9tIG1vc3Qg
cmVjZW50bHkgc3VibWl0dGVkIHRvIG9sZGVzdAo+PiArCSAqIHRhc2tzLiBUYXNrcyB3aGljaCBo
YXZlbid0IGNvbXBsZXRlZCwgbGVhdmUKPj4gKwkgKiB0aGVtIGluIHRoZSBwZW5kaW5nIGxpc3Qs
IGJ1dCBkZWNyZW1lbnQKPj4gKwkgKiB0aGVpciBoYXJkd2FyZSBydW4gcXVldWUgY291bnQuCj4+
ICsJICogRWxzZSwgdGhlIGZlbmNlIG11c3QndmUgc2lnbmFsbGVkLCBhbmQgdGhlIGpvYgo+PiAr
CSAqIGlzIGluIHRoZSBkb25lIGxpc3QuCj4+ICAgCSAqLwo+PiAgIAlsaXN0X2Zvcl9lYWNoX2Vu
dHJ5X3NhZmVfcmV2ZXJzZShzX2pvYiwgdG1wLCAmc2NoZWQtPnBlbmRpbmdfbGlzdCwKPj4gICAJ
CQkJCSBsaXN0KSB7Cj4+IEBAIC00MzksMzYgKzQ2MSw1MiBAQCB2b2lkIGRybV9zY2hlZF9zdG9w
KHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQsIHN0cnVjdCBkcm1fc2NoZWRfam9iICpi
YWQpCj4+ICAgCQkJCQkgICAgICAmc19qb2ItPmNiKSkgewo+PiAgIAkJCWF0b21pY19kZWMoJnNj
aGVkLT5od19ycV9jb3VudCk7Cj4+ICAgCQl9IGVsc2Ugewo+PiAtCQkJLyoKPj4gLQkJCSAqIHJl
bW92ZSBqb2IgZnJvbSBwZW5kaW5nX2xpc3QuCj4+IC0JCQkgKiBMb2NraW5nIGhlcmUgaXMgZm9y
IGNvbmN1cnJlbnQgcmVzdW1lIHRpbWVvdXQKPj4gLQkJCSAqLwo+PiAtCQkJc3Bpbl9sb2NrKCZz
Y2hlZC0+am9iX2xpc3RfbG9jayk7Cj4+IC0JCQlsaXN0X2RlbF9pbml0KCZzX2pvYi0+bGlzdCk7
Cj4+IC0JCQlzcGluX3VubG9jaygmc2NoZWQtPmpvYl9saXN0X2xvY2spOwo+PiAtCj4+IC0JCQkv
Kgo+PiAtCQkJICogV2FpdCBmb3Igam9iJ3MgSFcgZmVuY2UgY2FsbGJhY2sgdG8gZmluaXNoIHVz
aW5nIHNfam9iCj4+IC0JCQkgKiBiZWZvcmUgcmVsZWFzaW5nIGl0Lgo+PiAtCQkJICoKPj4gLQkJ
CSAqIEpvYiBpcyBzdGlsbCBhbGl2ZSBzbyBmZW5jZSByZWZjb3VudCBhdCBsZWFzdCAxCj4+IC0J
CQkgKi8KPj4gLQkJCWRtYV9mZW5jZV93YWl0KCZzX2pvYi0+c19mZW5jZS0+ZmluaXNoZWQsIGZh
bHNlKTsKPj4gLQo+PiAtCQkJLyoKPj4gLQkJCSAqIFdlIG11c3Qga2VlcCBiYWQgam9iIGFsaXZl
IGZvciBsYXRlciB1c2UgZHVyaW5nCj4+IC0JCQkgKiByZWNvdmVyeSBieSBzb21lIG9mIHRoZSBk
cml2ZXJzIGJ1dCBsZWF2ZSBhIGhpbnQKPj4gLQkJCSAqIHRoYXQgdGhlIGd1aWx0eSBqb2IgbXVz
dCBiZSByZWxlYXNlZC4KPj4gLQkJCSAqLwo+PiAtCQkJaWYgKGJhZCAhPSBzX2pvYikKPj4gLQkJ
CQlzY2hlZC0+b3BzLT5mcmVlX2pvYihzX2pvYik7Cj4+IC0JCQllbHNlCj4+IC0JCQkJc2NoZWQt
PmZyZWVfZ3VpbHR5ID0gdHJ1ZTsKPj4gKwkJCWlmIChiYWQgPT0gc19qb2IpIHsKPj4gKwkJCQkv
KiBUaGlzIGlzIHRoZSBvbGRlc3Qgam9iIG9uIHRoZSBwZW5kaW5nIGxpc3QKPj4gKwkJCQkgKiB3
aG9zZSBJUCB0aW1lZCBvdXQuIFRoZQo+PiArCQkJCSAqIGRybV9zY2hlZF9qb2JfdGltZW91dCgp
IGZ1bmN0aW9uIGNhbGxzIHRoZQo+PiArCQkJCSAqIGRyaXZlcidzIHRpbWVkb3V0X2pvYiBjYWxs
YmFjayBwYXNzaW5nIEBiYWQsCj4+ICsJCQkJICogd2hvIHRoZW4gY2FsbHMgdGhpcyBmdW5jdGlv
biBoZXJlLS1hcyBzdWNoCj4+ICsJCQkJICogd2Ugc2hvdWxkbid0IG1vdmUgQGJhZCBvciBmcmVl
IGl0LiBUaGlzIHdpbGwKPj4gKwkJCQkgKiBiZSBkZWNpZGVkIGJ5IGRybV9zY2hlZF9qb2JfdGlt
ZW91dCgpIHdoZW4KPj4gKwkJCQkgKiB0aGlzIGZ1bmN0aW9uIGhlcmUgcmV0dXJucyBiYWNrIHRv
IHRoZSBjYWxsZXIKPj4gKwkJCQkgKiAodGhlIGRyaXZlcikgYW5kIHRoZSBkcml2ZXIncyB0aW1l
ZG91dF9qb2IKPj4gKwkJCQkgKiBjYWxsYmFjayByZXR1cm5zIGEgcmVzdWx0IHRvCj4+ICsJCQkJ
ICogZHJtX3NjaGVkX2pvYl90aW1lb3V0KCkuCj4+ICsJCQkJICovCj4+ICsJCQkJOwo+PiArCQkJ
fSBlbHNlIHsKPj4gKwkJCQlpbnQgcmVzOwo+PiArCj4+ICsJCQkJLyogVGhpcyBqb2IgaXMgbm90
IHRoZSBAYmFkIGpvYiBwYXNzZWQgYWJvdmUuCj4+ICsJCQkJICogTm90ZSB0aGF0IHBlcmhhcHMg
aXQgd2FzICp0aGlzKiBqb2Igd2hpY2gKPj4gKwkJCQkgKiB0aW1lZCBvdXQuIFRoZSB3YWl0IGJl
bG93IGlzIHN1c3BlY3QuIFNpbmNlLAo+PiArCQkJCSAqIGl0IHdhaXRzIHdpdGggbWF4aW11bSB0
aW1lb3V0IGFuZCAiaW50ciIgc2V0Cj4+ICsJCQkJICogdG8gZmFsc2UsIGl0IHdpbGwgZWl0aGVy
IHJldHVybiAwIGluZGljYXRpbmcKPj4gKwkJCQkgKiB0aGF0IHRoZSBmZW5jZSBoYXMgc2lnbmFs
bGVkLCBvciBuZWdhdGl2ZSBvbgo+PiArCQkJCSAqIGVycm9yLiBXaGF0IGlmLCB0aGUgd2hvbGUg
SVAgaXMgc3R1Y2sgYW5kCj4+ICsJCQkJICogdGhpcyBlbmRzIHVwIHdhaXRpbmcgZm9yZXZlcj8K
Pj4gKwkJCQkgKgo+PiArCQkJCSAqIFdhaXQgZm9yIGpvYidzIEhXIGZlbmNlIGNhbGxiYWNrIHRv
IGZpbmlzaAo+PiArCQkJCSAqIHVzaW5nIHNfam9iIGJlZm9yZSByZWxlYXNpbmcgaXQuCj4+ICsJ
CQkJICoKPj4gKwkJCQkgKiBKb2IgaXMgc3RpbGwgYWxpdmUgc28gZmVuY2UKPj4gKwkJCQkgKiBy
ZWZjb3VudCBhdCBsZWFzdCAxCj4+ICsJCQkJICovCj4+ICsJCQkJcmVzID0gZG1hX2ZlbmNlX3dh
aXQoJnNfam9iLT5zX2ZlbmNlLT5maW5pc2hlZCwKPj4gKwkJCQkJCSAgICAgZmFsc2UpOwo+PiAr
Cj4+ICsJCQkJaWYgKHJlcyA9PSAwKQo+PiArCQkJCQlzY2hlZC0+b3BzLT5mcmVlX2pvYihzX2pv
Yik7Cj4+ICsJCQkJZWxzZQo+PiArCQkJCQlwcl9lcnJfb25jZSgiJXM6IGRtYV9mZW5jZV93YWl0
OiAlZFxuIiwKPj4gKwkJCQkJCSAgICBzY2hlZC0+bmFtZSwgcmVzKTsKPj4gKwkJCX0KPj4gICAJ
CX0KPj4gICAJfQo+PiAgIAo+PiAgIAkvKgo+PiAtCSAqIFN0b3AgcGVuZGluZyB0aW1lciBpbiBm
bGlnaHQgYXMgd2UgcmVhcm0gaXQgaW4gIGRybV9zY2hlZF9zdGFydC4gVGhpcwo+PiArCSAqIFN0
b3AgcGVuZGluZyB0aW1lciBpbiBmbGlnaHQgYXMgd2UgcmVhcm0gaXQgaW4gZHJtX3NjaGVkX3N0
YXJ0LiBUaGlzCj4+ICAgCSAqIGF2b2lkcyB0aGUgcGVuZGluZyB0aW1lb3V0IHdvcmsgaW4gcHJv
Z3Jlc3MgdG8gZmlyZSByaWdodCBhd2F5IGFmdGVyCj4+ICAgCSAqIHRoaXMgVERSIGZpbmlzaGVk
IGFuZCBiZWZvcmUgdGhlIG5ld2x5IHJlc3RhcnRlZCBqb2JzIGhhZCBhCj4+ICAgCSAqIGNoYW5j
ZSB0byBjb21wbGV0ZS4KPj4gQEAgLTUxMSw4ICs1NDksOSBAQCB2b2lkIGRybV9zY2hlZF9zdGFy
dChzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKnNjaGVkLCBib29sIGZ1bGxfcmVjb3ZlcnkpCj4+
ICAgCQkJZWxzZSBpZiAocikKPj4gICAJCQkJRFJNX0VSUk9SKCJmZW5jZSBhZGQgY2FsbGJhY2sg
ZmFpbGVkICglZClcbiIsCj4+ICAgCQkJCQkgIHIpOwo+PiAtCQl9IGVsc2UKPj4gKwkJfSBlbHNl
IHsKPj4gICAJCQlkcm1fc2NoZWRfam9iX2RvbmUoc19qb2IpOwo+PiArCQl9Cj4+ICAgCX0KPj4g
ICAKPj4gICAJaWYgKGZ1bGxfcmVjb3ZlcnkpIHsKPj4gQEAgLTY2NSw0NyArNzA0LDYgQEAgZHJt
X3NjaGVkX3NlbGVjdF9lbnRpdHkoc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCkKPj4g
ICAJcmV0dXJuIGVudGl0eTsKPj4gICB9Cj4+ICAgCj4+IC0vKioKPj4gLSAqIGRybV9zY2hlZF9n
ZXRfY2xlYW51cF9qb2IgLSBmZXRjaCB0aGUgbmV4dCBmaW5pc2hlZCBqb2IgdG8gYmUgZGVzdHJv
eWVkCj4+IC0gKgo+PiAtICogQHNjaGVkOiBzY2hlZHVsZXIgaW5zdGFuY2UKPj4gLSAqCj4+IC0g
KiBSZXR1cm5zIHRoZSBuZXh0IGZpbmlzaGVkIGpvYiBmcm9tIHRoZSBwZW5kaW5nIGxpc3QgKGlm
IHRoZXJlIGlzIG9uZSkKPj4gLSAqIHJlYWR5IGZvciBpdCB0byBiZSBkZXN0cm95ZWQuCj4+IC0g
Ki8KPj4gLXN0YXRpYyBzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAqCj4+IC1kcm1fc2NoZWRfZ2V0X2Ns
ZWFudXBfam9iKHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQpCj4+IC17Cj4+IC0Jc3Ry
dWN0IGRybV9zY2hlZF9qb2IgKmpvYjsKPj4gLQo+PiAtCS8qCj4+IC0JICogRG9uJ3QgZGVzdHJv
eSBqb2JzIHdoaWxlIHRoZSB0aW1lb3V0IHdvcmtlciBpcyBydW5uaW5nICBPUiB0aHJlYWQKPj4g
LQkgKiBpcyBiZWluZyBwYXJrZWQgYW5kIGhlbmNlIGFzc3VtZWQgdG8gbm90IHRvdWNoIHBlbmRp
bmdfbGlzdAo+PiAtCSAqLwo+PiAtCWlmICgoc2NoZWQtPnRpbWVvdXQgIT0gTUFYX1NDSEVEVUxF
X1RJTUVPVVQgJiYKPj4gLQkgICAgIWNhbmNlbF9kZWxheWVkX3dvcmsoJnNjaGVkLT53b3JrX3Rk
cikpIHx8Cj4+IC0JICAgIGt0aHJlYWRfc2hvdWxkX3BhcmsoKSkKPj4gLQkJcmV0dXJuIE5VTEw7
Cj4+IC0KPj4gLQlzcGluX2xvY2soJnNjaGVkLT5qb2JfbGlzdF9sb2NrKTsKPj4gLQo+PiAtCWpv
YiA9IGxpc3RfZmlyc3RfZW50cnlfb3JfbnVsbCgmc2NoZWQtPnBlbmRpbmdfbGlzdCwKPj4gLQkJ
CQkgICAgICAgc3RydWN0IGRybV9zY2hlZF9qb2IsIGxpc3QpOwo+PiAtCj4+IC0JaWYgKGpvYiAm
JiBkbWFfZmVuY2VfaXNfc2lnbmFsZWQoJmpvYi0+c19mZW5jZS0+ZmluaXNoZWQpKSB7Cj4+IC0J
CS8qIHJlbW92ZSBqb2IgZnJvbSBwZW5kaW5nX2xpc3QgKi8KPj4gLQkJbGlzdF9kZWxfaW5pdCgm
am9iLT5saXN0KTsKPj4gLQl9IGVsc2Ugewo+PiAtCQlqb2IgPSBOVUxMOwo+PiAtCQkvKiBxdWV1
ZSB0aW1lb3V0IGZvciBuZXh0IGpvYiAqLwo+PiAtCQlkcm1fc2NoZWRfc3RhcnRfdGltZW91dChz
Y2hlZCk7Cj4+IC0JfQo+PiAtCj4+IC0Jc3Bpbl91bmxvY2soJnNjaGVkLT5qb2JfbGlzdF9sb2Nr
KTsKPj4gLQo+PiAtCXJldHVybiBqb2I7Cj4+IC19Cj4+IC0KPj4gICAvKioKPj4gICAgKiBkcm1f
c2NoZWRfcGlja19iZXN0IC0gR2V0IGEgZHJtIHNjaGVkIGZyb20gYSBzY2hlZF9saXN0IHdpdGgg
dGhlIGxlYXN0IGxvYWQKPj4gICAgKiBAc2NoZWRfbGlzdDogbGlzdCBvZiBkcm1fZ3B1X3NjaGVk
dWxlcnMKPj4gQEAgLTc1OSw2ICs3NTcsMjUgQEAgc3RhdGljIGJvb2wgZHJtX3NjaGVkX2Jsb2Nr
ZWQoc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCkKPj4gICAJcmV0dXJuIGZhbHNlOwo+
PiAgIH0KPj4gICAKPj4gK3N0YXRpYyB2b2lkIGRybV9zY2hlZF9mcmVlX2RvbmUoc3RydWN0IGRy
bV9ncHVfc2NoZWR1bGVyICpzY2hlZCkKPj4gK3sKPj4gKwlMSVNUX0hFQUQoZG9uZV9xKTsKPj4g
Kwo+PiArCXNwaW5fbG9jaygmc2NoZWQtPmpvYl9saXN0X2xvY2spOwo+PiArCWxpc3Rfc3BsaWNl
X2luaXQoJnNjaGVkLT5kb25lX2xpc3QsICZkb25lX3EpOwo+PiArCXNwaW5fdW5sb2NrKCZzY2hl
ZC0+am9iX2xpc3RfbG9jayk7Cj4+ICsKPj4gKwl3aGlsZSAoIWxpc3RfZW1wdHkoJmRvbmVfcSkp
IHsKPj4gKwkJc3RydWN0IGRybV9zY2hlZF9qb2IgKmpvYjsKPj4gKwo+PiArCQlqb2IgPSBsaXN0
X2ZpcnN0X2VudHJ5KCZkb25lX3EsCj4+ICsJCQkJICAgICAgIHN0cnVjdCBkcm1fc2NoZWRfam9i
LAo+PiArCQkJCSAgICAgICBsaXN0KTsKPj4gKwkJbGlzdF9kZWxfaW5pdCgmam9iLT5saXN0KTsK
Pj4gKwkJc2NoZWQtPm9wcy0+ZnJlZV9qb2Ioam9iKTsKPj4gKwl9Cj4+ICt9Cj4+ICsKPj4gICAv
KioKPj4gICAgKiBkcm1fc2NoZWRfbWFpbiAtIG1haW4gc2NoZWR1bGVyIHRocmVhZAo+PiAgICAq
Cj4+IEBAIC03NjgsNyArNzg1LDcgQEAgc3RhdGljIGJvb2wgZHJtX3NjaGVkX2Jsb2NrZWQoc3Ry
dWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCkKPj4gICAgKi8KPj4gICBzdGF0aWMgaW50IGRy
bV9zY2hlZF9tYWluKHZvaWQgKnBhcmFtKQo+PiAgIHsKPj4gLQlzdHJ1Y3QgZHJtX2dwdV9zY2hl
ZHVsZXIgKnNjaGVkID0gKHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqKXBhcmFtOwo+PiArCXN0
cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQgPSBwYXJhbTsKPj4gICAJaW50IHI7Cj4+ICAg
Cj4+ICAgCXNjaGVkX3NldF9maWZvX2xvdyhjdXJyZW50KTsKPj4gQEAgLTc3OCwxOSArNzk1LDE0
IEBAIHN0YXRpYyBpbnQgZHJtX3NjaGVkX21haW4odm9pZCAqcGFyYW0pCj4+ICAgCQlzdHJ1Y3Qg
ZHJtX3NjaGVkX2ZlbmNlICpzX2ZlbmNlOwo+PiAgIAkJc3RydWN0IGRybV9zY2hlZF9qb2IgKnNj
aGVkX2pvYjsKPj4gICAJCXN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlOwo+PiAtCQlzdHJ1Y3QgZHJt
X3NjaGVkX2pvYiAqY2xlYW51cF9qb2IgPSBOVUxMOwo+PiAgIAo+PiAgIAkJd2FpdF9ldmVudF9p
bnRlcnJ1cHRpYmxlKHNjaGVkLT53YWtlX3VwX3dvcmtlciwKPj4gLQkJCQkJIChjbGVhbnVwX2pv
YiA9IGRybV9zY2hlZF9nZXRfY2xlYW51cF9qb2Ioc2NoZWQpKSB8fAo+PiArCQkJCQkgKCFsaXN0
X2VtcHR5KCZzY2hlZC0+ZG9uZV9saXN0KSkgfHwKPj4gICAJCQkJCSAoIWRybV9zY2hlZF9ibG9j
a2VkKHNjaGVkKSAmJgo+PiAgIAkJCQkJICAoZW50aXR5ID0gZHJtX3NjaGVkX3NlbGVjdF9lbnRp
dHkoc2NoZWQpKSkgfHwKPj4gICAJCQkJCSBrdGhyZWFkX3Nob3VsZF9zdG9wKCkpOwo+PiAgIAo+
PiAtCQlpZiAoY2xlYW51cF9qb2IpIHsKPj4gLQkJCXNjaGVkLT5vcHMtPmZyZWVfam9iKGNsZWFu
dXBfam9iKTsKPj4gLQkJCS8qIHF1ZXVlIHRpbWVvdXQgZm9yIG5leHQgam9iICovCj4+IC0JCQlk
cm1fc2NoZWRfc3RhcnRfdGltZW91dChzY2hlZCk7Cj4+IC0JCX0KPj4gKwkJZHJtX3NjaGVkX2Zy
ZWVfZG9uZShzY2hlZCk7Cj4+ICAgCj4+ICAgCQlpZiAoIWVudGl0eSkKPj4gICAJCQljb250aW51
ZTsKPj4gQEAgLTg2NCw2ICs4NzYsNyBAQCBpbnQgZHJtX3NjaGVkX2luaXQoc3RydWN0IGRybV9n
cHVfc2NoZWR1bGVyICpzY2hlZCwKPj4gICAJaW5pdF93YWl0cXVldWVfaGVhZCgmc2NoZWQtPndh
a2VfdXBfd29ya2VyKTsKPj4gICAJaW5pdF93YWl0cXVldWVfaGVhZCgmc2NoZWQtPmpvYl9zY2hl
ZHVsZWQpOwo+PiAgIAlJTklUX0xJU1RfSEVBRCgmc2NoZWQtPnBlbmRpbmdfbGlzdCk7Cj4+ICsJ
SU5JVF9MSVNUX0hFQUQoJnNjaGVkLT5kb25lX2xpc3QpOwo+PiAgIAlzcGluX2xvY2tfaW5pdCgm
c2NoZWQtPmpvYl9saXN0X2xvY2spOwo+PiAgIAlhdG9taWNfc2V0KCZzY2hlZC0+aHdfcnFfY291
bnQsIDApOwo+PiAgIAlJTklUX0RFTEFZRURfV09SSygmc2NoZWQtPndvcmtfdGRyLCBkcm1fc2No
ZWRfam9iX3RpbWVkb3V0KTsKPj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2dwdV9zY2hlZHVs
ZXIuaCBiL2luY2x1ZGUvZHJtL2dwdV9zY2hlZHVsZXIuaAo+PiBpbmRleCBjZWRmYzUzOTRlNTIu
LjExMjc4Njk1ZmVkMCAxMDA2NDQKPj4gLS0tIGEvaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5o
Cj4+ICsrKyBiL2luY2x1ZGUvZHJtL2dwdV9zY2hlZHVsZXIuaAo+PiBAQCAtMjg5LDYgKzI4OSw3
IEBAIHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciB7Cj4+ICAgCXVpbnQzMl90CQkJaHdfc3VibWlz
c2lvbl9saW1pdDsKPj4gICAJbG9uZwkJCQl0aW1lb3V0Owo+PiAgIAljb25zdCBjaGFyCQkJKm5h
bWU7Cj4+ICsKPj4gICAJc3RydWN0IGRybV9zY2hlZF9ycQkJc2NoZWRfcnFbRFJNX1NDSEVEX1BS
SU9SSVRZX0NPVU5UXTsKPj4gICAJd2FpdF9xdWV1ZV9oZWFkX3QJCXdha2VfdXBfd29ya2VyOwo+
PiAgIAl3YWl0X3F1ZXVlX2hlYWRfdAkJam9iX3NjaGVkdWxlZDsKPj4gQEAgLTI5Niw4ICsyOTcs
MTEgQEAgc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyIHsKPj4gICAJYXRvbWljNjRfdAkJCWpvYl9p
ZF9jb3VudDsKPj4gICAJc3RydWN0IGRlbGF5ZWRfd29yawkJd29ya190ZHI7Cj4+ICAgCXN0cnVj
dCB0YXNrX3N0cnVjdAkJKnRocmVhZDsKPj4gKwo+PiAgIAlzdHJ1Y3QgbGlzdF9oZWFkCQlwZW5k
aW5nX2xpc3Q7Cj4+ICsJc3RydWN0IGxpc3RfaGVhZCAgICAgICAgICAgICAgICBkb25lX2xpc3Q7
Cj4+ICAgCXNwaW5sb2NrX3QJCQlqb2JfbGlzdF9sb2NrOwo+PiArCj4+ICAgCWludAkJCQloYW5n
X2xpbWl0Owo+PiAgIAlhdG9taWNfdCAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlOwo+PiAg
IAlib29sCQkJCXJlYWR5Owo+IAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
ZHJpLWRldmVsCg==
