Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6F75EA9B5A
	for <lists+dri-devel@lfdr.de>; Thu,  5 Sep 2019 09:13:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2C42B89DD3;
	Thu,  5 Sep 2019 07:13:24 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C588F8915A;
 Wed,  4 Sep 2019 09:12:41 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 4C8ACB698;
 Wed,  4 Sep 2019 09:12:40 +0000 (UTC)
Date: Wed, 4 Sep 2019 11:12:48 +0200
From: Jean Delvare <jdelvare@suse.de>
To: amd-gfx@lists.freedesktop.org, dri-devel@lists.freedesktop.org
Subject: [PATCH v2 1/3] drm/amd: be quiet when no SAD block is found
Message-ID: <20190904111248.61dfdd68@endymion>
In-Reply-To: <20190904111152.266d5176@endymion>
References: <20190904111152.266d5176@endymion>
Organization: SUSE Linux
X-Mailer: Claws Mail 3.17.3 (GTK+ 2.24.32; x86_64-suse-linux-gnu)
MIME-Version: 1.0
X-Mailman-Approved-At: Thu, 05 Sep 2019 07:13:21 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>,
	David Airlie <airlied@linux.ie>, David@freedesktop.org,
	Zhou@freedesktop.org (ChunMing),
	"  <David1.Zhou@amd.com>, Harry Wentland <harry.wentland@amd.com>, Leo  Li  <sunpeng.li@amd.com>, Maarten Lankhorst   <maarten.lankhorst@linux.intel.com>, Maxime Ripard   <maxime.ripard@bootlin.com>, Sean Paul <sean@poorly.run>, Ville  =?UTF-8?B?U3lyasOkbMOk?= <ville.syrjala@linux.intel.com>,  Christian =?UTF-8?B?S8O2?= =?UTF-8?B?bmln?= <christian.koenig@amd.com>"@freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SXQgaXMgZmluZSBmb3IgZGlzcGxheXMgd2l0aG91dCBhdWRpbyBmdW5jdGlvbmFsaXR5IHRvIG5v
dCBwcm92aWRlCmFueSBTQUQgYmxvY2sgaW4gdGhlaXIgRURJRC4gRG8gbm90IGxvZyBhbiBlcnJv
ciBpbiB0aGF0IGNhc2UsCmp1c3QgcmV0dXJuIHF1aWV0bHkuCgpUaGlzIGZpeGVzIGhhbGYgb2Yg
YnVnIGZkbyMxMDc4MjU6Cmh0dHBzOi8vYnVncy5mcmVlZGVza3RvcC5vcmcvc2hvd19idWcuY2dp
P2lkPTEwNzgyNQoKU2lnbmVkLW9mZi1ieTogSmVhbiBEZWx2YXJlIDxqZGVsdmFyZUBzdXNlLmRl
PgpDYzogQWxleCBEZXVjaGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgpDYzogIkNocmlz
dGlhbiBLw7ZuaWciIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+CkNjOiAiRGF2aWQgKENodW5N
aW5nKSBaaG91IiA8RGF2aWQxLlpob3VAYW1kLmNvbT4KQ2M6IERhdmlkIEFpcmxpZSA8YWlybGll
ZEBsaW51eC5pZT4KQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZndsbC5jaD4KQ2M6IEhhcnJ5
IFdlbnRsYW5kIDxoYXJyeS53ZW50bGFuZEBhbWQuY29tPgpDYzogTGVvIExpIDxzdW5wZW5nLmxp
QGFtZC5jb20+Ci0tLQpObyBjaGFuZ2Ugc2luY2UgdjEuCgogZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvZGNlX3YxMF8wLmMgICAgICAgICAgICAgICAgICAgIHwgICAgNCArKy0tCiBkcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9kY2VfdjExXzAuYyAgICAgICAgICAgICAgICAgICAgfCAgICA0
ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RjZV92Nl8wLmMgICAgICAgICAgICAg
ICAgICAgICB8ICAgIDQgKystLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3Y4XzAu
YyAgICAgICAgICAgICAgICAgICAgIHwgICAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2Rp
c3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbV9oZWxwZXJzLmMgfCAgICA3ICsrKy0tLS0KIDUgZmls
ZXMgY2hhbmdlZCwgMTEgaW5zZXJ0aW9ucygrKSwgMTIgZGVsZXRpb25zKC0pCgotLS0gbGludXgt
NS4yLm9yaWcvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3YxMF8wLmMJMjAxOS0wNy0w
OCAwMDo0MTo1Ni4wMDAwMDAwMDAgKzAyMDAKKysrIGxpbnV4LTUuMi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9kY2VfdjEwXzAuYwkyMDE5LTA4LTMwIDE0OjI4OjQ2LjA4MTY4MjIyMyArMDIw
MApAQCAtMTM0NSwxMCArMTM0NSwxMCBAQCBzdGF0aWMgdm9pZCBkY2VfdjEwXzBfYXVkaW9fd3Jp
dGVfc2FkX3JlCiAJfQogCiAJc2FkX2NvdW50ID0gZHJtX2VkaWRfdG9fc2FkKGFtZGdwdV9jb25u
ZWN0b3JfZWRpZChjb25uZWN0b3IpLCAmc2Fkcyk7Ci0JaWYgKHNhZF9jb3VudCA8PSAwKSB7CisJ
aWYgKHNhZF9jb3VudCA8IDApCiAJCURSTV9FUlJPUigiQ291bGRuJ3QgcmVhZCBTQURzOiAlZFxu
Iiwgc2FkX2NvdW50KTsKKwlpZiAoc2FkX2NvdW50IDw9IDApCiAJCXJldHVybjsKLQl9CiAJQlVH
X09OKCFzYWRzKTsKIAogCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGVsZF9yZWdfdG9fdHlw
ZSk7IGkrKykgewotLS0gbGludXgtNS4yLm9yaWcvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
ZGNlX3YxMV8wLmMJMjAxOS0wNy0wOCAwMDo0MTo1Ni4wMDAwMDAwMDAgKzAyMDAKKysrIGxpbnV4
LTUuMi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kY2VfdjExXzAuYwkyMDE5LTA4LTMwIDE0
OjI5OjI3LjI3NjIwNTMxMCArMDIwMApAQCAtMTM3MSwxMCArMTM3MSwxMCBAQCBzdGF0aWMgdm9p
ZCBkY2VfdjExXzBfYXVkaW9fd3JpdGVfc2FkX3JlCiAJfQogCiAJc2FkX2NvdW50ID0gZHJtX2Vk
aWRfdG9fc2FkKGFtZGdwdV9jb25uZWN0b3JfZWRpZChjb25uZWN0b3IpLCAmc2Fkcyk7Ci0JaWYg
KHNhZF9jb3VudCA8PSAwKSB7CisJaWYgKHNhZF9jb3VudCA8IDApCiAJCURSTV9FUlJPUigiQ291
bGRuJ3QgcmVhZCBTQURzOiAlZFxuIiwgc2FkX2NvdW50KTsKKwlpZiAoc2FkX2NvdW50IDw9IDAp
CiAJCXJldHVybjsKLQl9CiAJQlVHX09OKCFzYWRzKTsKIAogCWZvciAoaSA9IDA7IGkgPCBBUlJB
WV9TSVpFKGVsZF9yZWdfdG9fdHlwZSk7IGkrKykgewotLS0gbGludXgtNS4yLm9yaWcvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3Y2XzAuYwkyMDE5LTA3LTA4IDAwOjQxOjU2LjAwMDAw
MDAwMCArMDIwMAorKysgbGludXgtNS4yL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RjZV92
Nl8wLmMJMjAxOS0wOC0zMCAxNzo1ODo1My42MTM5NTM0NTggKzAyMDAKQEAgLTEyNDgsMTAgKzEy
NDgsMTAgQEAgc3RhdGljIHZvaWQgZGNlX3Y2XzBfYXVkaW9fd3JpdGVfc2FkX3JlZwogCX0KIAog
CXNhZF9jb3VudCA9IGRybV9lZGlkX3RvX3NhZChhbWRncHVfY29ubmVjdG9yX2VkaWQoY29ubmVj
dG9yKSwgJnNhZHMpOwotCWlmIChzYWRfY291bnQgPD0gMCkgeworCWlmIChzYWRfY291bnQgPCAw
KQogCQlEUk1fRVJST1IoIkNvdWxkbid0IHJlYWQgU0FEczogJWRcbiIsIHNhZF9jb3VudCk7CisJ
aWYgKHNhZF9jb3VudCA8PSAwKQogCQlyZXR1cm47Ci0JfQogCiAJZm9yIChpID0gMDsgaSA8IEFS
UkFZX1NJWkUoZWxkX3JlZ190b190eXBlKTsgaSsrKSB7CiAJCXUzMiB0bXAgPSAwOwotLS0gbGlu
dXgtNS4yLm9yaWcvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3Y4XzAuYwkyMDE5LTA3
LTA4IDAwOjQxOjU2LjAwMDAwMDAwMCArMDIwMAorKysgbGludXgtNS4yL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2RjZV92OF8wLmMJMjAxOS0wOC0zMCAxNDoyOTowMS45NDg4ODM3MDggKzAy
MDAKQEAgLTEyOTgsMTAgKzEyOTgsMTAgQEAgc3RhdGljIHZvaWQgZGNlX3Y4XzBfYXVkaW9fd3Jp
dGVfc2FkX3JlZwogCX0KIAogCXNhZF9jb3VudCA9IGRybV9lZGlkX3RvX3NhZChhbWRncHVfY29u
bmVjdG9yX2VkaWQoY29ubmVjdG9yKSwgJnNhZHMpOwotCWlmIChzYWRfY291bnQgPD0gMCkgewor
CWlmIChzYWRfY291bnQgPCAwKQogCQlEUk1fRVJST1IoIkNvdWxkbid0IHJlYWQgU0FEczogJWRc
biIsIHNhZF9jb3VudCk7CisJaWYgKHNhZF9jb3VudCA8PSAwKQogCQlyZXR1cm47Ci0JfQogCUJV
R19PTighc2Fkcyk7CiAKIAlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShlbGRfcmVnX3RvX3R5
cGUpOyBpKyspIHsKLS0tIGxpbnV4LTUuMi5vcmlnL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxh
eS9hbWRncHVfZG0vYW1kZ3B1X2RtX2hlbHBlcnMuYwkyMDE5LTA3LTA4IDAwOjQxOjU2LjAwMDAw
MDAwMCArMDIwMAorKysgbGludXgtNS4yL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRn
cHVfZG0vYW1kZ3B1X2RtX2hlbHBlcnMuYwkyMDE5LTA4LTMwIDE0OjMxOjAzLjA4NjQyMTkxMCAr
MDIwMApAQCAtOTgsMTEgKzk4LDEwIEBAIGVudW0gZGNfZWRpZF9zdGF0dXMgZG1faGVscGVyc19w
YXJzZV9lZGkKIAkJCShzdHJ1Y3QgZWRpZCAqKSBlZGlkLT5yYXdfZWRpZCk7CiAKIAlzYWRfY291
bnQgPSBkcm1fZWRpZF90b19zYWQoKHN0cnVjdCBlZGlkICopIGVkaWQtPnJhd19lZGlkLCAmc2Fk
cyk7Ci0JaWYgKHNhZF9jb3VudCA8PSAwKSB7Ci0JCURSTV9JTkZPKCJTQURzIGNvdW50IGlzOiAl
ZCwgZG9uJ3QgbmVlZCB0byByZWFkIGl0XG4iLAotCQkJCXNhZF9jb3VudCk7CisJaWYgKHNhZF9j
b3VudCA8IDApCisJCURSTV9FUlJPUigiQ291bGRuJ3QgcmVhZCBTQURzOiAlZFxuIiwgc2FkX2Nv
dW50KTsKKwlpZiAoc2FkX2NvdW50IDw9IDApCiAJCXJldHVybiByZXN1bHQ7Ci0JfQogCiAJZWRp
ZF9jYXBzLT5hdWRpb19tb2RlX2NvdW50ID0gc2FkX2NvdW50IDwgRENfTUFYX0FVRElPX0RFU0Nf
Q09VTlQgPyBzYWRfY291bnQgOiBEQ19NQVhfQVVESU9fREVTQ19DT1VOVDsKIAlmb3IgKGkgPSAw
OyBpIDwgZWRpZF9jYXBzLT5hdWRpb19tb2RlX2NvdW50OyArK2kpIHsKCi0tIApKZWFuIERlbHZh
cmUKU1VTRSBMMyBTdXBwb3J0Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2Ry
aS1kZXZlbA==
