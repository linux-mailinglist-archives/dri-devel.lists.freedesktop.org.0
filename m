Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 60D0A6BC01
	for <lists+dri-devel@lfdr.de>; Wed, 17 Jul 2019 13:58:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1BA066E13C;
	Wed, 17 Jul 2019 11:58:33 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.domeneshop.no (smtp.domeneshop.no
 [IPv6:2a01:5b40:0:3005::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 26C5D6E122
 for <dri-devel@lists.freedesktop.org>; Wed, 17 Jul 2019 11:58:32 +0000 (UTC)
Received: from 211.81-166-168.customer.lyse.net ([81.166.168.211]:54758
 helo=localhost.localdomain)
 by smtp.domeneshop.no with esmtpsa (TLS1.2:ECDHE_RSA_AES_128_CBC_SHA1:128)
 (Exim 4.84_2) (envelope-from <noralf@tronnes.org>)
 id 1hniZq-0007Eh-8D; Wed, 17 Jul 2019 13:58:30 +0200
From: =?UTF-8?q?Noralf=20Tr=C3=B8nnes?= <noralf@tronnes.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 04/10] drm/tinydrm: Remove tinydrm_spi_max_transfer_size()
Date: Wed, 17 Jul 2019 13:58:11 +0200
Message-Id: <20190717115817.30110-5-noralf@tronnes.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190717115817.30110-1-noralf@tronnes.org>
References: <20190717115817.30110-1-noralf@tronnes.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; d=tronnes.org; s=ds201810; 
 h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From;
 bh=tZNA509fZ5sgx0p5oZi7L7CD2nAKbBJobYHrtj54HWI=; 
 b=VnfC/xrFqu6F1SbDU7VvkmilALBP+4dVIYbBW45YVgOkBrNFB3m9W1+NW3DDvEJYZ8cOz+eCYmxZMvUpPtca8rFKN5Acqr4S5Rw5BOWmE8ogixhAtkvI6HjlyLbktUYiFWexH1E0vKbvvlQugdokeuG7U1n1p/bxCAcsfidFlE4VOoixisjbkOipcfH72gihmuc0N3TZ7RUMGHDnjCRor29yQlRULbtOduS2z1Wz+yYFAKIjG+TJBuudfGCayjvVjCiy0TjsINo8BcjR1kVN9ZkdjGEHHt6XaBch+MnWZZRgdV1DrMaOByJGn7N0tMUTVPAQUSvNP5MRXw9Qd36hpQ==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: david@lechnology.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

c3BpLWJjbTI4MzUgY2FuIGhhbmRsZSA+NjRrQiBidWZmZXJzIG5vdyBzbyB0aGVyZSBpcyBubyBu
ZWVkIHRvIGNoZWNrCi0+bWF4X2RtYV9sZW4uIFRoZSB0aW55ZHJtX3NwaV9tYXhfdHJhbnNmZXJf
c2l6ZSgpIG1heF9sZW4gYXJndW1lbnQgaXMKbm90IHVzZWQgYnkgYW55IGNhbGxlcnMsIHNvIG5v
dCBuZWVkZWQuCgpUaGVuIHdlIGhhdmUgdGhlIHNwaV9tYXggbW9kdWxlIHBhcmFtZXRlci4gSXQg
d2FzIGFkZGVkIGJlY2F1c2UKc3RhZ2luZy9mYnRmdCBoYXMgc3VwcG9ydCBmb3IgaXQgYW5kIHRo
ZXJlIHdhcyBhIHJlcG9ydCB0aGF0IHNvbWVvbmUgdXNlZAppdCB0byBzZXQgYSBzbWFsbCBidWZm
ZXIgc2l6ZSB0byBhdm9pZCBwb3BwaW5nIG9uIGEgVVNCIHNvdW5kY2FyZCBvbiBhClJhc3BiZXJy
eSBQaS4gSW4gaGluZHNpZ2h0IGl0IHNob3VsZG4ndCBoYXZlIGJlZW4gYWRkZWQsIEkgc2hvdWxk
IGhhdmUKd2FpdGVkIGZvciBpdCB0byBiZWNvbWUgYSBwcm9ibGVtIGZpcnN0LiBJIGRvbid0IGtu
b3cgaXQgYW55b25lIGlzCmFjdHVhbGx5IHVzaW5nIGl0LCBidXQgc2luY2UgdGlueWRybV9zcGlf
dHJhbnNmZXIoKSBpcyBiZWluZyBtb3ZlZCB0bwptaXBpLWRiaSwgSSdtIHRha2luZyB0aGUgb3Bw
b3J0dW5pdHkgdG8gcmVtb3ZlIGl0LiBJJ2xsIGFkZCBpdCBiYWNrIHRvCm1pcGktZGJpIGlmIHNv
bWVvbmUgY29tcGxhaW5zLgoKV2l0aCB0aGF0IG91dCBvZiB0aGUgd2F5LCBzcGlfbWF4X3RyYW5z
ZmVyX3NpemUoKSBjYW4gYmUgdXNlZCBpbnN0ZWFkLgoKVGhlIGNob3NlbiAxNmtCIGJ1ZmZlciBz
aXplIGZvciBUeXBlIEMgT3B0aW9uIDEgKDktYml0KSBpbnRlcmZhY2UgaXMKc29tZXdoYXQgYXJi
aXRyYXJ5LCBidXQgYSBiaWdnZXIgYnVmZmVyIHdpbGwgaGF2ZSBhIG1pbmlzY3VsZSBpbXBhY3Qg
b24KdHJhbnNmZXIgc3BlZWQsIHNvIGl0J3MgcHJvYmFibHkgZmluZS4KClNpZ25lZC1vZmYtYnk6
IE5vcmFsZiBUcsO4bm5lcyA8bm9yYWxmQHRyb25uZXMub3JnPgotLS0KIC4uLi9ncHUvZHJtL3Rp
bnlkcm0vY29yZS90aW55ZHJtLWhlbHBlcnMuYyAgICB8IDM3ICstLS0tLS0tLS0tLS0tLS0tLS0K
IGRyaXZlcnMvZ3B1L2RybS90aW55ZHJtL21pcGktZGJpLmMgICAgICAgICAgICB8IDEwICstLS0t
CiBpbmNsdWRlL2RybS90aW55ZHJtL3Rpbnlkcm0taGVscGVycy5oICAgICAgICAgfCAgMSAtCiAz
IGZpbGVzIGNoYW5nZWQsIDMgaW5zZXJ0aW9ucygrKSwgNDUgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0vY29yZS90aW55ZHJtLWhlbHBlcnMuYyBiL2Ry
aXZlcnMvZ3B1L2RybS90aW55ZHJtL2NvcmUvdGlueWRybS1oZWxwZXJzLmMKaW5kZXggMjcyNjE2
YTI0NmNkLi5hZjViZWM4ODYxZGUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJt
L2NvcmUvdGlueWRybS1oZWxwZXJzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0vY29y
ZS90aW55ZHJtLWhlbHBlcnMuYwpAQCAtMTgsNDEgKzE4LDggQEAKICNpbmNsdWRlIDxkcm0vZHJt
X3JlY3QuaD4KICNpbmNsdWRlIDxkcm0vdGlueWRybS90aW55ZHJtLWhlbHBlcnMuaD4KIAotc3Rh
dGljIHVuc2lnbmVkIGludCBzcGlfbWF4OwotbW9kdWxlX3BhcmFtKHNwaV9tYXgsIHVpbnQsIDA0
MDApOwotTU9EVUxFX1BBUk1fREVTQyhzcGlfbWF4LCAiU2V0IGEgbG93ZXIgU1BJIG1heCB0cmFu
c2ZlciBzaXplIik7Ci0KICNpZiBJU19FTkFCTEVEKENPTkZJR19TUEkpCiAKLS8qKgotICogdGlu
eWRybV9zcGlfbWF4X3RyYW5zZmVyX3NpemUgLSBEZXRlcm1pbmUgbWF4IFNQSSB0cmFuc2ZlciBz
aXplCi0gKiBAc3BpOiBTUEkgZGV2aWNlCi0gKiBAbWF4X2xlbjogTWF4aW11bSBidWZmZXIgc2l6
ZSBuZWVkZWQgKG9wdGlvbmFsKQotICoKLSAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgbWF4
aW11bSBzaXplIHRvIHVzZSBmb3IgU1BJIHRyYW5zZmVycy4gSXQgY2hlY2tzCi0gKiB0aGUgU1BJ
IG1hc3RlciwgdGhlIG9wdGlvbmFsIEBtYXhfbGVuIGFuZCB0aGUgbW9kdWxlIHBhcmFtZXRlciBz
cGlfbWF4IGFuZAotICogcmV0dXJucyB0aGUgc21hbGxlc3QuCi0gKgotICogUmV0dXJuczoKLSAq
IE1heGltdW0gc2l6ZSBmb3IgU1BJIHRyYW5zZmVycwotICovCi1zaXplX3QgdGlueWRybV9zcGlf
bWF4X3RyYW5zZmVyX3NpemUoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSwgc2l6ZV90IG1heF9sZW4p
Ci17Ci0Jc2l6ZV90IHJldDsKLQotCXJldCA9IG1pbihzcGlfbWF4X3RyYW5zZmVyX3NpemUoc3Bp
KSwgc3BpLT5tYXN0ZXItPm1heF9kbWFfbGVuKTsKLQlpZiAobWF4X2xlbikKLQkJcmV0ID0gbWlu
KHJldCwgbWF4X2xlbik7Ci0JaWYgKHNwaV9tYXgpCi0JCXJldCA9IG1pbl90KHNpemVfdCwgcmV0
LCBzcGlfbWF4KTsKLQlyZXQgJj0gfjB4MzsKLQlpZiAocmV0IDwgNCkKLQkJcmV0ID0gNDsKLQot
CXJldHVybiByZXQ7Ci19Ci1FWFBPUlRfU1lNQk9MKHRpbnlkcm1fc3BpX21heF90cmFuc2Zlcl9z
aXplKTsKLQogLyoqCiAgKiB0aW55ZHJtX3NwaV90cmFuc2ZlciAtIFNQSSB0cmFuc2ZlciBoZWxw
ZXIKICAqIEBzcGk6IFNQSSBkZXZpY2UKQEAgLTc1LDIxICs0MiwxOSBAQCBpbnQgdGlueWRybV9z
cGlfdHJhbnNmZXIoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSwgdTMyIHNwZWVkX2h6LAogCQkJIHN0
cnVjdCBzcGlfdHJhbnNmZXIgKmhlYWRlciwgdTggYnB3LCBjb25zdCB2b2lkICpidWYsCiAJCQkg
c2l6ZV90IGxlbikKIHsKKwlzaXplX3QgbWF4X2NodW5rID0gc3BpX21heF90cmFuc2Zlcl9zaXpl
KHNwaSk7CiAJc3RydWN0IHNwaV90cmFuc2ZlciB0ciA9IHsKIAkJLmJpdHNfcGVyX3dvcmQgPSBi
cHcsCiAJCS5zcGVlZF9oeiA9IHNwZWVkX2h6LAogCX07CiAJc3RydWN0IHNwaV9tZXNzYWdlIG07
CiAJdTE2ICpzd2FwX2J1ZiA9IE5VTEw7Ci0Jc2l6ZV90IG1heF9jaHVuazsKIAlzaXplX3QgY2h1
bms7CiAJaW50IHJldCA9IDA7CiAKIAlpZiAoV0FSTl9PTl9PTkNFKGJwdyAhPSA4ICYmIGJwdyAh
PSAxNikpCiAJCXJldHVybiAtRUlOVkFMOwogCi0JbWF4X2NodW5rID0gdGlueWRybV9zcGlfbWF4
X3RyYW5zZmVyX3NpemUoc3BpLCAwKTsKLQogCWlmIChicHcgPT0gMTYgJiYgIXNwaV9pc19icHdf
c3VwcG9ydGVkKHNwaSwgMTYpKSB7CiAJCXRyLmJpdHNfcGVyX3dvcmQgPSA4OwogCQlpZiAodGlu
eWRybV9tYWNoaW5lX2xpdHRsZV9lbmRpYW4oKSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3Rpbnlkcm0vbWlwaS1kYmkuYyBiL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL21pcGktZGJp
LmMKaW5kZXggOTk1MDlkMTZiMDM3Li5hZTMxYTVjOWFhMWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS90aW55ZHJtL21pcGktZGJpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0v
bWlwaS1kYmkuYwpAQCAtOTY0LDE1ICs5NjQsOSBAQCBzdGF0aWMgaW50IG1pcGlfZGJpX3R5cGVj
M19jb21tYW5kKHN0cnVjdCBtaXBpX2RiaSAqbWlwaSwgdTggKmNtZCwKIGludCBtaXBpX2RiaV9z
cGlfaW5pdChzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpLCBzdHJ1Y3QgbWlwaV9kYmkgKm1pcGksCiAJ
CSAgICAgIHN0cnVjdCBncGlvX2Rlc2MgKmRjKQogewotCXNpemVfdCB0eF9zaXplID0gdGlueWRy
bV9zcGlfbWF4X3RyYW5zZmVyX3NpemUoc3BpLCAwKTsKIAlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAm
c3BpLT5kZXY7CiAJaW50IHJldDsKIAotCWlmICh0eF9zaXplIDwgMTYpIHsKLQkJRFJNX0VSUk9S
KCJTUEkgdHJhbnNtaXQgYnVmZmVyIHRvbyBzbWFsbDogJXp1XG4iLCB0eF9zaXplKTsKLQkJcmV0
dXJuIC1FSU5WQUw7Ci0JfQotCiAJLyoKIAkgKiBFdmVuIHRob3VnaCBpdCdzIG5vdCB0aGUgU1BJ
IGRldmljZSB0aGF0IGRvZXMgRE1BICh0aGUgbWFzdGVyIGRvZXMpLAogCSAqIHRoZSBkbWEgbWFz
ayBpcyBuZWNlc3NhcnkgZm9yIHRoZSBkbWFfYWxsb2Nfd2MoKSBpbgpAQCAtMTAwMSw4ICs5OTUs
OCBAQCBpbnQgbWlwaV9kYmlfc3BpX2luaXQoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSwgc3RydWN0
IG1pcGlfZGJpICptaXBpLAogCQkJbWlwaS0+c3dhcF9ieXRlcyA9IHRydWU7CiAJfSBlbHNlIHsK
IAkJbWlwaS0+Y29tbWFuZCA9IG1pcGlfZGJpX3R5cGVjMV9jb21tYW5kOwotCQltaXBpLT50eF9i
dWY5X2xlbiA9IHR4X3NpemU7Ci0JCW1pcGktPnR4X2J1ZjkgPSBkZXZtX2ttYWxsb2MoZGV2LCB0
eF9zaXplLCBHRlBfS0VSTkVMKTsKKwkJbWlwaS0+dHhfYnVmOV9sZW4gPSBTWl8xNks7CisJCW1p
cGktPnR4X2J1ZjkgPSBkZXZtX2ttYWxsb2MoZGV2LCBtaXBpLT50eF9idWY5X2xlbiwgR0ZQX0tF
Uk5FTCk7CiAJCWlmICghbWlwaS0+dHhfYnVmOSkKIAkJCXJldHVybiAtRU5PTUVNOwogCX0KZGlm
ZiAtLWdpdCBhL2luY2x1ZGUvZHJtL3Rpbnlkcm0vdGlueWRybS1oZWxwZXJzLmggYi9pbmNsdWRl
L2RybS90aW55ZHJtL3Rpbnlkcm0taGVscGVycy5oCmluZGV4IGRjYTc1ZGUzYTM1OS4uMTBiMzUz
NzVhMDA5IDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS90aW55ZHJtL3Rpbnlkcm0taGVscGVycy5o
CisrKyBiL2luY2x1ZGUvZHJtL3Rpbnlkcm0vdGlueWRybS1oZWxwZXJzLmgKQEAgLTQxLDcgKzQx
LDYgQEAgaW50IHRpbnlkcm1fZGlzcGxheV9waXBlX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRy
bSwKIAkJCSAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAogCQkJICAg
ICAgdW5zaWduZWQgaW50IHJvdGF0aW9uKTsKIAotc2l6ZV90IHRpbnlkcm1fc3BpX21heF90cmFu
c2Zlcl9zaXplKHN0cnVjdCBzcGlfZGV2aWNlICpzcGksIHNpemVfdCBtYXhfbGVuKTsKIGludCB0
aW55ZHJtX3NwaV90cmFuc2ZlcihzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpLCB1MzIgc3BlZWRfaHos
CiAJCQkgc3RydWN0IHNwaV90cmFuc2ZlciAqaGVhZGVyLCB1OCBicHcsIGNvbnN0IHZvaWQgKmJ1
ZiwKIAkJCSBzaXplX3QgbGVuKTsKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vZHJpLWRldmVs
