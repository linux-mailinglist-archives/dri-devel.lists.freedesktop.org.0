Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 22DD5E1FD9
	for <lists+dri-devel@lfdr.de>; Wed, 23 Oct 2019 17:46:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E428B6EB2C;
	Wed, 23 Oct 2019 15:46:04 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B20296EB1B
 for <dri-devel@lists.freedesktop.org>; Wed, 23 Oct 2019 15:45:22 +0000 (UTC)
Received: from localhost.localdomain (unknown
 [IPv6:2a01:e0a:2c:6930:5cf4:84a1:2763:fe0d])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: bbrezillon)
 by bhuna.collabora.co.uk (Postfix) with ESMTPSA id B794D28F90F;
 Wed, 23 Oct 2019 16:45:19 +0100 (BST)
From: Boris Brezillon <boris.brezillon@collabora.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v3 04/21] drm/bridge: Rename bridge helpers targeting a bridge
 chain
Date: Wed, 23 Oct 2019 17:44:55 +0200
Message-Id: <20191023154512.9762-5-boris.brezillon@collabora.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191023154512.9762-1-boris.brezillon@collabora.com>
References: <20191023154512.9762-1-boris.brezillon@collabora.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Mark Rutland <mark.rutland@arm.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 Thierry Reding <thierry.reding@gmail.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>, kernel@collabora.com,
 Sam Ravnborg <sam@ravnborg.org>,
 Nikita Yushchenko <nikita.yoush@cogentembedded.com>,
 Andrey Smirnov <andrew.smirnov@gmail.com>,
 Kyungmin Park <kyungmin.park@samsung.com>, Chris Healy <cphealy@gmail.com>,
 devicetree@vger.kernel.org, Jonas Karlman <jonas@kwiboo.se>,
 Rob Herring <robh+dt@kernel.org>, Jernej Skrabec <jernej.skrabec@siol.net>,
 Seung-Woo Kim <sw0312.kim@samsung.com>,
 Boris Brezillon <boris.brezillon@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q2hhbmdlIHRoZSBwcmVmaXggb2YgYnJpZGdlIGhlbHBlcnMgdGFyZ2V0aW5nIGEgYnJpZGdlIGNo
YWluIGZyb20KZHJtX2JyaWRnZV8gdG8gZHJtX2JyaWRnZV9jaGFpbl8gdG8gYmV0dGVyIHJlZmxl
Y3QgdGhlIGZhY3QgdGhhdAp0aGUgb3BlcmF0aW9uIHdpbGwgaGFwcGVuIG9uIGFsbCBlbGVtZW50
cyBvZiBjaGFpbiwgc3RhcnRpbmcgYXQgdGhlCmJyaWRnZSBwYXNzZWQgaW4gYXJndW1lbnQuCgpT
aWduZWQtb2ZmLWJ5OiBCb3JpcyBCcmV6aWxsb24gPGJvcmlzLmJyZXppbGxvbkBjb2xsYWJvcmEu
Y29tPgotLS0KQ2hhbmdlcyBpbiB2MzoKKiBOb25lCgpDaGFuZ2VzIGluIHYyOgoqIFBhc3MgdGUg
YnJpZGdlLCBub3QgdGhlIGVuY29kZXIsIHNvIHdlIGNhbiBsYXRlciBhY3Qgb24gYSBzdWItY2hh
aW4KICBpbnN0ZWFkIG9mIHRoZSB3aG9sZSBjaGFpbgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1f
YXRvbWljX2hlbHBlci5jIHwgIDE5ICsrKy0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2JyaWRnZS5j
ICAgICAgICB8IDEyNSArKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9k
cm0vZHJtX3Byb2JlX2hlbHBlci5jICB8ICAgMiArLQogZHJpdmVycy9ncHUvZHJtL21lZGlhdGVr
L210a19oZG1pLmMgfCAgIDQgKy0KIGluY2x1ZGUvZHJtL2RybV9icmlkZ2UuaCAgICAgICAgICAg
IHwgIDY0ICsrKysrKystLS0tLS0tCiA1IGZpbGVzIGNoYW5nZWQsIDExMiBpbnNlcnRpb25zKCsp
LCAxMDIgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9hdG9t
aWNfaGVscGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19oZWxwZXIuYwppbmRleCA1
ODcwNTI3NTFiNDguLmNmNjc4YmU1OGZhNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ry
bV9hdG9taWNfaGVscGVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfaGVscGVy
LmMKQEAgLTQzNSw4ICs0MzUsOSBAQCBtb2RlX2ZpeHVwKHN0cnVjdCBkcm1fYXRvbWljX3N0YXRl
ICpzdGF0ZSkKIAkJZW5jb2RlciA9IG5ld19jb25uX3N0YXRlLT5iZXN0X2VuY29kZXI7CiAJCWZ1
bmNzID0gZW5jb2Rlci0+aGVscGVyX3ByaXZhdGU7CiAKLQkJcmV0ID0gZHJtX2JyaWRnZV9tb2Rl
X2ZpeHVwKGVuY29kZXItPmJyaWRnZSwgJm5ld19jcnRjX3N0YXRlLT5tb2RlLAotCQkJCSZuZXdf
Y3J0Y19zdGF0ZS0+YWRqdXN0ZWRfbW9kZSk7CisJCXJldCA9IGRybV9icmlkZ2VfY2hhaW5fbW9k
ZV9maXh1cChlbmNvZGVyLT5icmlkZ2UsCisJCQkJCSZuZXdfY3J0Y19zdGF0ZS0+bW9kZSwKKwkJ
CQkJJm5ld19jcnRjX3N0YXRlLT5hZGp1c3RlZF9tb2RlKTsKIAkJaWYgKCFyZXQpIHsKIAkJCURS
TV9ERUJVR19BVE9NSUMoIkJyaWRnZSBmaXh1cCBmYWlsZWRcbiIpOwogCQkJcmV0dXJuIC1FSU5W
QUw7CkBAIC01MDEsNyArNTAyLDcgQEAgc3RhdGljIGVudW0gZHJtX21vZGVfc3RhdHVzIG1vZGVf
dmFsaWRfcGF0aChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQlyZXR1cm4gcmV0
OwogCX0KIAotCXJldCA9IGRybV9icmlkZ2VfbW9kZV92YWxpZChlbmNvZGVyLT5icmlkZ2UsIG1v
ZGUpOworCXJldCA9IGRybV9icmlkZ2VfY2hhaW5fbW9kZV92YWxpZChlbmNvZGVyLT5icmlkZ2Us
IG1vZGUpOwogCWlmIChyZXQgIT0gTU9ERV9PSykgewogCQlEUk1fREVCVUdfQVRPTUlDKCJbQlJJ
REdFXSBtb2RlX3ZhbGlkKCkgZmFpbGVkXG4iKTsKIAkJcmV0dXJuIHJldDsKQEAgLTEwMjAsNyAr
MTAyMSw3IEBAIGRpc2FibGVfb3V0cHV0cyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3Qg
ZHJtX2F0b21pY19zdGF0ZSAqb2xkX3N0YXRlKQogCQkgKiBFYWNoIGVuY29kZXIgaGFzIGF0IG1v
c3Qgb25lIGNvbm5lY3RvciAoc2luY2Ugd2UgYWx3YXlzIHN0ZWFsCiAJCSAqIGl0IGF3YXkpLCBz
byB3ZSB3b24ndCBjYWxsIGRpc2FibGUgaG9va3MgdHdpY2UuCiAJCSAqLwotCQlkcm1fYXRvbWlj
X2JyaWRnZV9kaXNhYmxlKGVuY29kZXItPmJyaWRnZSwgb2xkX3N0YXRlKTsKKwkJZHJtX2F0b21p
Y19icmlkZ2VfY2hhaW5fZGlzYWJsZShlbmNvZGVyLT5icmlkZ2UsIG9sZF9zdGF0ZSk7CiAKIAkJ
LyogUmlnaHQgZnVuY3Rpb24gZGVwZW5kcyB1cG9uIHRhcmdldCBzdGF0ZS4gKi8KIAkJaWYgKGZ1
bmNzKSB7CkBAIC0xMDM0LDcgKzEwMzUsOCBAQCBkaXNhYmxlX291dHB1dHMoc3RydWN0IGRybV9k
ZXZpY2UgKmRldiwgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKm9sZF9zdGF0ZSkKIAkJCQlmdW5j
cy0+ZHBtcyhlbmNvZGVyLCBEUk1fTU9ERV9EUE1TX09GRik7CiAJCX0KIAotCQlkcm1fYXRvbWlj
X2JyaWRnZV9wb3N0X2Rpc2FibGUoZW5jb2Rlci0+YnJpZGdlLCBvbGRfc3RhdGUpOworCQlkcm1f
YXRvbWljX2JyaWRnZV9jaGFpbl9wb3N0X2Rpc2FibGUoZW5jb2Rlci0+YnJpZGdlLAorCQkJCQkJ
ICAgICBvbGRfc3RhdGUpOwogCX0KIAogCWZvcl9lYWNoX29sZG5ld19jcnRjX2luX3N0YXRlKG9s
ZF9zdGF0ZSwgY3J0Yywgb2xkX2NydGNfc3RhdGUsIG5ld19jcnRjX3N0YXRlLCBpKSB7CkBAIC0x
MjE1LDcgKzEyMTcsOCBAQCBjcnRjX3NldF9tb2RlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0
cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpCiAJCQlmdW5jcy0+bW9kZV9zZXQoZW5j
b2RlciwgbW9kZSwgYWRqdXN0ZWRfbW9kZSk7CiAJCX0KIAotCQlkcm1fYnJpZGdlX21vZGVfc2V0
KGVuY29kZXItPmJyaWRnZSwgbW9kZSwgYWRqdXN0ZWRfbW9kZSk7CisJCWRybV9icmlkZ2VfY2hh
aW5fbW9kZV9zZXQoZW5jb2Rlci0+YnJpZGdlLCBtb2RlLAorCQkJCQkgIGFkanVzdGVkX21vZGUp
OwogCX0KIH0KIApAQCAtMTMzMiw3ICsxMzM1LDcgQEAgdm9pZCBkcm1fYXRvbWljX2hlbHBlcl9j
b21taXRfbW9kZXNldF9lbmFibGVzKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJCSAqIEVhY2gg
ZW5jb2RlciBoYXMgYXQgbW9zdCBvbmUgY29ubmVjdG9yIChzaW5jZSB3ZSBhbHdheXMgc3RlYWwK
IAkJICogaXQgYXdheSksIHNvIHdlIHdvbid0IGNhbGwgZW5hYmxlIGhvb2tzIHR3aWNlLgogCQkg
Ki8KLQkJZHJtX2F0b21pY19icmlkZ2VfcHJlX2VuYWJsZShlbmNvZGVyLT5icmlkZ2UsIG9sZF9z
dGF0ZSk7CisJCWRybV9hdG9taWNfYnJpZGdlX2NoYWluX3ByZV9lbmFibGUoZW5jb2Rlci0+YnJp
ZGdlLCBvbGRfc3RhdGUpOwogCiAJCWlmIChmdW5jcykgewogCQkJaWYgKGZ1bmNzLT5hdG9taWNf
ZW5hYmxlKQpAQCAtMTM0Myw3ICsxMzQ2LDcgQEAgdm9pZCBkcm1fYXRvbWljX2hlbHBlcl9jb21t
aXRfbW9kZXNldF9lbmFibGVzKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJCQkJZnVuY3MtPmNv
bW1pdChlbmNvZGVyKTsKIAkJfQogCi0JCWRybV9hdG9taWNfYnJpZGdlX2VuYWJsZShlbmNvZGVy
LT5icmlkZ2UsIG9sZF9zdGF0ZSk7CisJCWRybV9hdG9taWNfYnJpZGdlX2NoYWluX2VuYWJsZShl
bmNvZGVyLT5icmlkZ2UsIG9sZF9zdGF0ZSk7CiAJfQogCiAJZHJtX2F0b21pY19oZWxwZXJfY29t
bWl0X3dyaXRlYmFja3MoZGV2LCBvbGRfc3RhdGUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2RybV9icmlkZ2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYnJpZGdlLmMKaW5kZXggY2Jh
NTM3Yzk5ZTQzLi41NGM4NzQ0OTNjNTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1f
YnJpZGdlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9icmlkZ2UuYwpAQCAtMTcyLDggKzE3
Miw4IEBAIHZvaWQgZHJtX2JyaWRnZV9kZXRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkK
ICAqLwogCiAvKioKLSAqIGRybV9icmlkZ2VfbW9kZV9maXh1cCAtIGZpeHVwIHByb3Bvc2VkIG1v
ZGUgZm9yIGFsbCBicmlkZ2VzIGluIHRoZQotICoJCQkgICBlbmNvZGVyIGNoYWluCisgKiBkcm1f
YnJpZGdlX2NoYWluX21vZGVfZml4dXAgLSBmaXh1cCBwcm9wb3NlZCBtb2RlIGZvciBhbGwgYnJp
ZGdlcyBpbiB0aGUKKyAqCQkJCSBlbmNvZGVyIGNoYWluCiAgKiBAYnJpZGdlOiBicmlkZ2UgY29u
dHJvbCBzdHJ1Y3R1cmUKICAqIEBtb2RlOiBkZXNpcmVkIG1vZGUgdG8gYmUgc2V0IGZvciB0aGUg
YnJpZGdlCiAgKiBAYWRqdXN0ZWRfbW9kZTogdXBkYXRlZCBtb2RlIHRoYXQgd29ya3MgZm9yIHRo
aXMgYnJpZGdlCkBAIC0xODYsOSArMTg2LDkgQEAgdm9pZCBkcm1fYnJpZGdlX2RldGFjaChzdHJ1
Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogICogUkVUVVJOUzoKICAqIHRydWUgb24gc3VjY2Vzcywg
ZmFsc2Ugb24gZmFpbHVyZQogICovCi1ib29sIGRybV9icmlkZ2VfbW9kZV9maXh1cChzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1v
ZGUsCi0JCQlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSkKK2Jvb2wgZHJt
X2JyaWRnZV9jaGFpbl9tb2RlX2ZpeHVwKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJ
IGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAorCQkJCSBzdHJ1Y3QgZHJtX2Rp
c3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSkKIHsKIAlib29sIHJldCA9IHRydWU7CiAKQEAgLTE5
OCwxNSArMTk4LDE2IEBAIGJvb2wgZHJtX2JyaWRnZV9tb2RlX2ZpeHVwKHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UsCiAJaWYgKGJyaWRnZS0+ZnVuY3MtPm1vZGVfZml4dXApCiAJCXJldCA9IGJy
aWRnZS0+ZnVuY3MtPm1vZGVfZml4dXAoYnJpZGdlLCBtb2RlLCBhZGp1c3RlZF9tb2RlKTsKIAot
CXJldCA9IHJldCAmJiBkcm1fYnJpZGdlX21vZGVfZml4dXAoYnJpZGdlLT5uZXh0LCBtb2RlLCBh
ZGp1c3RlZF9tb2RlKTsKKwlyZXQgPSByZXQgJiYgZHJtX2JyaWRnZV9jaGFpbl9tb2RlX2ZpeHVw
KGJyaWRnZS0+bmV4dCwgbW9kZSwKKwkJCQkJCSBhZGp1c3RlZF9tb2RlKTsKIAogCXJldHVybiBy
ZXQ7CiB9Ci1FWFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfbW9kZV9maXh1cCk7CitFWFBPUlRfU1lN
Qk9MKGRybV9icmlkZ2VfY2hhaW5fbW9kZV9maXh1cCk7CiAKIC8qKgotICogZHJtX2JyaWRnZV9t
b2RlX3ZhbGlkIC0gdmFsaWRhdGUgdGhlIG1vZGUgYWdhaW5zdCBhbGwgYnJpZGdlcyBpbiB0aGUK
LSAqIAkJCSAgIGVuY29kZXIgY2hhaW4uCisgKiBkcm1fYnJpZGdlX2NoYWluX21vZGVfdmFsaWQg
LSB2YWxpZGF0ZSB0aGUgbW9kZSBhZ2FpbnN0IGFsbCBicmlkZ2VzIGluIHRoZQorICoJCQkJIGVu
Y29kZXIgY2hhaW4uCiAgKiBAYnJpZGdlOiBicmlkZ2UgY29udHJvbCBzdHJ1Y3R1cmUKICAqIEBt
b2RlOiBkZXNpcmVkIG1vZGUgdG8gYmUgdmFsaWRhdGVkCiAgKgpAQCAtMjE5LDggKzIyMCw5IEBA
IEVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9tb2RlX2ZpeHVwKTsKICAqIFJFVFVSTlM6CiAgKiBN
T0RFX09LIG9uIHN1Y2Nlc3MsIGRybV9tb2RlX3N0YXR1cyBFbnVtIGVycm9yIGNvZGUgb24gZmFp
bHVyZQogICovCi1lbnVtIGRybV9tb2RlX3N0YXR1cyBkcm1fYnJpZGdlX21vZGVfdmFsaWQoc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJCQkJICAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKm1vZGUpCitlbnVtIGRybV9tb2RlX3N0YXR1cworZHJtX2JyaWRnZV9jaGFpbl9tb2Rl
X3ZhbGlkKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkgICAgY29uc3Qgc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKm1vZGUpCiB7CiAJZW51bSBkcm1fbW9kZV9zdGF0dXMgcmV0ID0gTU9E
RV9PSzsKIApAQCAtMjMzLDEyICsyMzUsMTIgQEAgZW51bSBkcm1fbW9kZV9zdGF0dXMgZHJtX2Jy
aWRnZV9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJaWYgKHJldCAhPSBN
T0RFX09LKQogCQlyZXR1cm4gcmV0OwogCi0JcmV0dXJuIGRybV9icmlkZ2VfbW9kZV92YWxpZChi
cmlkZ2UtPm5leHQsIG1vZGUpOworCXJldHVybiBkcm1fYnJpZGdlX2NoYWluX21vZGVfdmFsaWQo
YnJpZGdlLT5uZXh0LCBtb2RlKTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9tb2RlX3Zh
bGlkKTsKK0VYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3ZhbGlkKTsKIAogLyoq
Ci0gKiBkcm1fYnJpZGdlX2Rpc2FibGUgLSBkaXNhYmxlcyBhbGwgYnJpZGdlcyBpbiB0aGUgZW5j
b2RlciBjaGFpbgorICogZHJtX2JyaWRnZV9jaGFpbl9kaXNhYmxlIC0gZGlzYWJsZXMgYWxsIGJy
aWRnZXMgaW4gdGhlIGVuY29kZXIgY2hhaW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0
cnVjdHVyZQogICoKICAqIENhbGxzICZkcm1fYnJpZGdlX2Z1bmNzLmRpc2FibGUgb3AgZm9yIGFs
bCB0aGUgYnJpZGdlcyBpbiB0aGUgZW5jb2RlcgpAQCAtMjQ3LDIwICsyNDksMjEgQEAgRVhQT1JU
X1NZTUJPTChkcm1fYnJpZGdlX21vZGVfdmFsaWQpOwogICoKICAqIE5vdGU6IHRoZSBicmlkZ2Ug
cGFzc2VkIHNob3VsZCBiZSB0aGUgb25lIGNsb3Nlc3QgdG8gdGhlIGVuY29kZXIKICAqLwotdm9p
ZCBkcm1fYnJpZGdlX2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3ZvaWQgZHJt
X2JyaWRnZV9jaGFpbl9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCiB7CiAJaWYg
KCFicmlkZ2UpCiAJCXJldHVybjsKIAotCWRybV9icmlkZ2VfZGlzYWJsZShicmlkZ2UtPm5leHQp
OworCWRybV9icmlkZ2VfY2hhaW5fZGlzYWJsZShicmlkZ2UtPm5leHQpOwogCiAJaWYgKGJyaWRn
ZS0+ZnVuY3MtPmRpc2FibGUpCiAJCWJyaWRnZS0+ZnVuY3MtPmRpc2FibGUoYnJpZGdlKTsKIH0K
LUVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9kaXNhYmxlKTsKK0VYUE9SVF9TWU1CT0woZHJtX2Jy
aWRnZV9jaGFpbl9kaXNhYmxlKTsKIAogLyoqCi0gKiBkcm1fYnJpZGdlX3Bvc3RfZGlzYWJsZSAt
IGNsZWFucyB1cCBhZnRlciBkaXNhYmxpbmcgYWxsIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIgY2hh
aW4KKyAqIGRybV9icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlIC0gY2xlYW5zIHVwIGFmdGVyIGRp
c2FibGluZyBhbGwgYnJpZGdlcyBpbiB0aGUKKyAqCQkJCSAgIGVuY29kZXIgY2hhaW4KICAqIEBi
cmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVyZQogICoKICAqIENhbGxzICZkcm1fYnJpZGdl
X2Z1bmNzLnBvc3RfZGlzYWJsZSBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGluIHRoZQpAQCAtMjY5
LDcgKzI3Miw3IEBAIEVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9kaXNhYmxlKTsKICAqCiAgKiBO
b3RlOiB0aGUgYnJpZGdlIHBhc3NlZCBzaG91bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBl
bmNvZGVyCiAgKi8KLXZvaWQgZHJtX2JyaWRnZV9wb3N0X2Rpc2FibGUoc3RydWN0IGRybV9icmlk
Z2UgKmJyaWRnZSkKK3ZvaWQgZHJtX2JyaWRnZV9jaGFpbl9wb3N0X2Rpc2FibGUoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSkKIHsKIAlpZiAoIWJyaWRnZSkKIAkJcmV0dXJuOwpAQCAtMjc3LDI1
ICsyODAsMjUgQEAgdm9pZCBkcm1fYnJpZGdlX3Bvc3RfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRn
ZSAqYnJpZGdlKQogCWlmIChicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rpc2FibGUpCiAJCWJyaWRnZS0+
ZnVuY3MtPnBvc3RfZGlzYWJsZShicmlkZ2UpOwogCi0JZHJtX2JyaWRnZV9wb3N0X2Rpc2FibGUo
YnJpZGdlLT5uZXh0KTsKKwlkcm1fYnJpZGdlX2NoYWluX3Bvc3RfZGlzYWJsZShicmlkZ2UtPm5l
eHQpOwogfQotRVhQT1JUX1NZTUJPTChkcm1fYnJpZGdlX3Bvc3RfZGlzYWJsZSk7CitFWFBPUlRf
U1lNQk9MKGRybV9icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlKTsKIAogLyoqCi0gKiBkcm1fYnJp
ZGdlX21vZGVfc2V0IC0gc2V0IHByb3Bvc2VkIG1vZGUgZm9yIGFsbCBicmlkZ2VzIGluIHRoZQot
ICoJCQkgZW5jb2RlciBjaGFpbgorICogZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3NldCAtIHNldCBw
cm9wb3NlZCBtb2RlIGZvciBhbGwgYnJpZGdlcyBpbiB0aGUKKyAqCQkJICAgICAgIGVuY29kZXIg
Y2hhaW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVyZQotICogQG1vZGU6IGRl
c2lyZWQgbW9kZSB0byBiZSBzZXQgZm9yIHRoZSBicmlkZ2UKLSAqIEBhZGp1c3RlZF9tb2RlOiB1
cGRhdGVkIG1vZGUgdGhhdCB3b3JrcyBmb3IgdGhpcyBicmlkZ2UKKyAqIEBtb2RlOiBkZXNpcmVk
IG1vZGUgdG8gYmUgc2V0IGZvciB0aGUgZW5jb2RlciBjaGFpbgorICogQGFkanVzdGVkX21vZGU6
IHVwZGF0ZWQgbW9kZSB0aGF0IHdvcmtzIGZvciB0aGlzIGVuY29kZXIgY2hhaW4KICAqCiAgKiBD
YWxscyAmZHJtX2JyaWRnZV9mdW5jcy5tb2RlX3NldCBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGlu
IHRoZQogICogZW5jb2RlciBjaGFpbiwgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3QgYnJpZGdlIHRv
IHRoZSBsYXN0LgogICoKICAqIE5vdGU6IHRoZSBicmlkZ2UgcGFzc2VkIHNob3VsZCBiZSB0aGUg
b25lIGNsb3Nlc3QgdG8gdGhlIGVuY29kZXIKICAqLwotdm9pZCBkcm1fYnJpZGdlX21vZGVfc2V0
KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCi0JCQkgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKm1vZGUsCi0JCQkgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVk
X21vZGUpCit2b2lkIGRybV9icmlkZ2VfY2hhaW5fbW9kZV9zZXQoc3RydWN0IGRybV9icmlkZ2Ug
KmJyaWRnZSwKKwkJCSAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwK
KwkJCSAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSkK
IHsKIAlpZiAoIWJyaWRnZSkKIAkJcmV0dXJuOwpAQCAtMzAzLDEzICszMDYsMTMgQEAgdm9pZCBk
cm1fYnJpZGdlX21vZGVfc2V0KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJaWYgKGJyaWRn
ZS0+ZnVuY3MtPm1vZGVfc2V0KQogCQlicmlkZ2UtPmZ1bmNzLT5tb2RlX3NldChicmlkZ2UsIG1v
ZGUsIGFkanVzdGVkX21vZGUpOwogCi0JZHJtX2JyaWRnZV9tb2RlX3NldChicmlkZ2UtPm5leHQs
IG1vZGUsIGFkanVzdGVkX21vZGUpOworCWRybV9icmlkZ2VfY2hhaW5fbW9kZV9zZXQoYnJpZGdl
LT5uZXh0LCBtb2RlLCBhZGp1c3RlZF9tb2RlKTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2JyaWRn
ZV9tb2RlX3NldCk7CitFWFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfY2hhaW5fbW9kZV9zZXQpOwog
CiAvKioKLSAqIGRybV9icmlkZ2VfcHJlX2VuYWJsZSAtIHByZXBhcmVzIGZvciBlbmFibGluZyBh
bGwKLSAqCQkJICAgYnJpZGdlcyBpbiB0aGUgZW5jb2RlciBjaGFpbgorICogZHJtX2JyaWRnZV9j
aGFpbl9wcmVfZW5hYmxlIC0gcHJlcGFyZXMgZm9yIGVuYWJsaW5nIGFsbCBicmlkZ2VzIGluIHRo
ZQorICoJCQkJIGVuY29kZXIgY2hhaW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVj
dHVyZQogICoKICAqIENhbGxzICZkcm1fYnJpZGdlX2Z1bmNzLnByZV9lbmFibGUgb3AgZm9yIGFs
bCB0aGUgYnJpZGdlcyBpbiB0aGUgZW5jb2RlcgpAQCAtMzE4LDIwICszMjEsMjAgQEAgRVhQT1JU
X1NZTUJPTChkcm1fYnJpZGdlX21vZGVfc2V0KTsKICAqCiAgKiBOb3RlOiB0aGUgYnJpZGdlIHBh
c3NlZCBzaG91bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBlbmNvZGVyCiAgKi8KLXZvaWQg
ZHJtX2JyaWRnZV9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCit2b2lkIGRy
bV9icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogewog
CWlmICghYnJpZGdlKQogCQlyZXR1cm47CiAKLQlkcm1fYnJpZGdlX3ByZV9lbmFibGUoYnJpZGdl
LT5uZXh0KTsKKwlkcm1fYnJpZGdlX2NoYWluX3ByZV9lbmFibGUoYnJpZGdlLT5uZXh0KTsKIAog
CWlmIChicmlkZ2UtPmZ1bmNzLT5wcmVfZW5hYmxlKQogCQlicmlkZ2UtPmZ1bmNzLT5wcmVfZW5h
YmxlKGJyaWRnZSk7CiB9Ci1FWFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfcHJlX2VuYWJsZSk7CitF
WFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZSk7CiAKIC8qKgotICogZHJt
X2JyaWRnZV9lbmFibGUgLSBlbmFibGVzIGFsbCBicmlkZ2VzIGluIHRoZSBlbmNvZGVyIGNoYWlu
CisgKiBkcm1fYnJpZGdlX2NoYWluX2VuYWJsZSAtIGVuYWJsZXMgYWxsIGJyaWRnZXMgaW4gdGhl
IGVuY29kZXIgY2hhaW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVyZQogICoK
ICAqIENhbGxzICZkcm1fYnJpZGdlX2Z1bmNzLmVuYWJsZSBvcCBmb3IgYWxsIHRoZSBicmlkZ2Vz
IGluIHRoZSBlbmNvZGVyCkBAIC0zNDAsNyArMzQzLDcgQEAgRVhQT1JUX1NZTUJPTChkcm1fYnJp
ZGdlX3ByZV9lbmFibGUpOwogICoKICAqIE5vdGUgdGhhdCB0aGUgYnJpZGdlIHBhc3NlZCBzaG91
bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBlbmNvZGVyCiAgKi8KLXZvaWQgZHJtX2JyaWRn
ZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3ZvaWQgZHJtX2JyaWRnZV9jaGFp
bl9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIHsKIAlpZiAoIWJyaWRnZSkKIAkJ
cmV0dXJuOwpAQCAtMzQ4LDEyICszNTEsMTIgQEAgdm9pZCBkcm1fYnJpZGdlX2VuYWJsZShzdHJ1
Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogCWlmIChicmlkZ2UtPmZ1bmNzLT5lbmFibGUpCiAJCWJy
aWRnZS0+ZnVuY3MtPmVuYWJsZShicmlkZ2UpOwogCi0JZHJtX2JyaWRnZV9lbmFibGUoYnJpZGdl
LT5uZXh0KTsKKwlkcm1fYnJpZGdlX2NoYWluX2VuYWJsZShicmlkZ2UtPm5leHQpOwogfQotRVhQ
T1JUX1NZTUJPTChkcm1fYnJpZGdlX2VuYWJsZSk7CitFWFBPUlRfU1lNQk9MKGRybV9icmlkZ2Vf
Y2hhaW5fZW5hYmxlKTsKIAogLyoqCi0gKiBkcm1fYXRvbWljX2JyaWRnZV9kaXNhYmxlIC0gZGlz
YWJsZXMgYWxsIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIgY2hhaW4KKyAqIGRybV9hdG9taWNfYnJp
ZGdlX2NoYWluX2Rpc2FibGUgLSBkaXNhYmxlcyBhbGwgYnJpZGdlcyBpbiB0aGUgZW5jb2RlciBj
aGFpbgogICogQGJyaWRnZTogYnJpZGdlIGNvbnRyb2wgc3RydWN0dXJlCiAgKiBAc3RhdGU6IGF0
b21pYyBzdGF0ZSBiZWluZyBjb21taXR0ZWQKICAqCkBAIC0zNjQsMjQgKzM2NywyNCBAQCBFWFBP
UlRfU1lNQk9MKGRybV9icmlkZ2VfZW5hYmxlKTsKICAqCiAgKiBOb3RlOiB0aGUgYnJpZGdlIHBh
c3NlZCBzaG91bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBlbmNvZGVyCiAgKi8KLXZvaWQg
ZHJtX2F0b21pY19icmlkZ2VfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJ
ICAgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSkKK3ZvaWQgZHJtX2F0b21pY19i
cmlkZ2VfY2hhaW5fZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCSAgICAg
c3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQogewogCWlmICghYnJpZGdlKQogCQlyZXR1
cm47CiAKLQlkcm1fYXRvbWljX2JyaWRnZV9kaXNhYmxlKGJyaWRnZS0+bmV4dCwgc3RhdGUpOwor
CWRybV9hdG9taWNfYnJpZGdlX2NoYWluX2Rpc2FibGUoYnJpZGdlLT5uZXh0LCBzdGF0ZSk7CiAK
IAlpZiAoYnJpZGdlLT5mdW5jcy0+YXRvbWljX2Rpc2FibGUpCiAJCWJyaWRnZS0+ZnVuY3MtPmF0
b21pY19kaXNhYmxlKGJyaWRnZSwgc3RhdGUpOwogCWVsc2UgaWYgKGJyaWRnZS0+ZnVuY3MtPmRp
c2FibGUpCiAJCWJyaWRnZS0+ZnVuY3MtPmRpc2FibGUoYnJpZGdlKTsKIH0KLUVYUE9SVF9TWU1C
T0woZHJtX2F0b21pY19icmlkZ2VfZGlzYWJsZSk7CitFWFBPUlRfU1lNQk9MKGRybV9hdG9taWNf
YnJpZGdlX2NoYWluX2Rpc2FibGUpOwogCiAvKioKLSAqIGRybV9hdG9taWNfYnJpZGdlX3Bvc3Rf
ZGlzYWJsZSAtIGNsZWFucyB1cCBhZnRlciBkaXNhYmxpbmcgYWxsIGJyaWRnZXMgaW4gdGhlCi0g
KgkJCQkgICAgZW5jb2RlciBjaGFpbgorICogZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fcG9zdF9k
aXNhYmxlIC0gY2xlYW5zIHVwIGFmdGVyIGRpc2FibGluZyBhbGwgYnJpZGdlcworICoJCQkJCSAg
aW4gdGhlIGVuY29kZXIgY2hhaW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVy
ZQogICogQHN0YXRlOiBhdG9taWMgc3RhdGUgYmVpbmcgY29tbWl0dGVkCiAgKgpAQCAtMzkyLDgg
KzM5NSw4IEBAIEVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfZGlzYWJsZSk7CiAgKgog
ICogTm90ZTogdGhlIGJyaWRnZSBwYXNzZWQgc2hvdWxkIGJlIHRoZSBvbmUgY2xvc2VzdCB0byB0
aGUgZW5jb2RlcgogICovCi12b2lkIGRybV9hdG9taWNfYnJpZGdlX3Bvc3RfZGlzYWJsZShzdHJ1
Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJCSAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAq
c3RhdGUpCit2b2lkIGRybV9hdG9taWNfYnJpZGdlX2NoYWluX3Bvc3RfZGlzYWJsZShzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCQkgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0
ZSkKIHsKIAlpZiAoIWJyaWRnZSkKIAkJcmV0dXJuOwpAQCAtNDAzLDEzICs0MDYsMTMgQEAgdm9p
ZCBkcm1fYXRvbWljX2JyaWRnZV9wb3N0X2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSwKIAllbHNlIGlmIChicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rpc2FibGUpCiAJCWJyaWRnZS0+ZnVu
Y3MtPnBvc3RfZGlzYWJsZShicmlkZ2UpOwogCi0JZHJtX2F0b21pY19icmlkZ2VfcG9zdF9kaXNh
YmxlKGJyaWRnZS0+bmV4dCwgc3RhdGUpOworCWRybV9hdG9taWNfYnJpZGdlX2NoYWluX3Bvc3Rf
ZGlzYWJsZShicmlkZ2UtPm5leHQsIHN0YXRlKTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2F0b21p
Y19icmlkZ2VfcG9zdF9kaXNhYmxlKTsKK0VYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2Vf
Y2hhaW5fcG9zdF9kaXNhYmxlKTsKIAogLyoqCi0gKiBkcm1fYXRvbWljX2JyaWRnZV9wcmVfZW5h
YmxlIC0gcHJlcGFyZXMgZm9yIGVuYWJsaW5nIGFsbCBicmlkZ2VzIGluIHRoZQotICoJCQkJICBl
bmNvZGVyIGNoYWluCisgKiBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9wcmVfZW5hYmxlIC0gcHJl
cGFyZXMgZm9yIGVuYWJsaW5nIGFsbCBicmlkZ2VzIGluCisgKgkJCQkJdGhlIGVuY29kZXIgY2hh
aW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVyZQogICogQHN0YXRlOiBhdG9t
aWMgc3RhdGUgYmVpbmcgY29tbWl0dGVkCiAgKgpAQCAtNDIwLDIzICs0MjMsMjMgQEAgRVhQT1JU
X1NZTUJPTChkcm1fYXRvbWljX2JyaWRnZV9wb3N0X2Rpc2FibGUpOwogICoKICAqIE5vdGU6IHRo
ZSBicmlkZ2UgcGFzc2VkIHNob3VsZCBiZSB0aGUgb25lIGNsb3Nlc3QgdG8gdGhlIGVuY29kZXIK
ICAqLwotdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdl
ICpicmlkZ2UsCi0JCQkJICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCit2b2lkIGRy
bV9hdG9taWNfYnJpZGdlX2NoYWluX3ByZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSwKKwkJCQkJc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQogewogCWlmICghYnJpZGdl
KQogCQlyZXR1cm47CiAKLQlkcm1fYXRvbWljX2JyaWRnZV9wcmVfZW5hYmxlKGJyaWRnZS0+bmV4
dCwgc3RhdGUpOworCWRybV9hdG9taWNfYnJpZGdlX2NoYWluX3ByZV9lbmFibGUoYnJpZGdlLT5u
ZXh0LCBzdGF0ZSk7CiAKIAlpZiAoYnJpZGdlLT5mdW5jcy0+YXRvbWljX3ByZV9lbmFibGUpCiAJ
CWJyaWRnZS0+ZnVuY3MtPmF0b21pY19wcmVfZW5hYmxlKGJyaWRnZSwgc3RhdGUpOwogCWVsc2Ug
aWYgKGJyaWRnZS0+ZnVuY3MtPnByZV9lbmFibGUpCiAJCWJyaWRnZS0+ZnVuY3MtPnByZV9lbmFi
bGUoYnJpZGdlKTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfcHJlX2VuYWJs
ZSk7CitFWFBPUlRfU1lNQk9MKGRybV9hdG9taWNfYnJpZGdlX2NoYWluX3ByZV9lbmFibGUpOwog
CiAvKioKLSAqIGRybV9hdG9taWNfYnJpZGdlX2VuYWJsZSAtIGVuYWJsZXMgYWxsIGJyaWRnZXMg
aW4gdGhlIGVuY29kZXIgY2hhaW4KKyAqIGRybV9hdG9taWNfYnJpZGdlX2NoYWluX2VuYWJsZSAt
IGVuYWJsZXMgYWxsIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIgY2hhaW4KICAqIEBicmlkZ2U6IGJy
aWRnZSBjb250cm9sIHN0cnVjdHVyZQogICogQHN0YXRlOiBhdG9taWMgc3RhdGUgYmVpbmcgY29t
bWl0dGVkCiAgKgpAQCAtNDQ3LDggKzQ1MCw4IEBAIEVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19i
cmlkZ2VfcHJlX2VuYWJsZSk7CiAgKgogICogTm90ZTogdGhlIGJyaWRnZSBwYXNzZWQgc2hvdWxk
IGJlIHRoZSBvbmUgY2xvc2VzdCB0byB0aGUgZW5jb2RlcgogICovCi12b2lkIGRybV9hdG9taWNf
YnJpZGdlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJICAgICAgc3RydWN0
IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQordm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9l
bmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgICAgc3RydWN0IGRybV9hdG9t
aWNfc3RhdGUgKnN0YXRlKQogewogCWlmICghYnJpZGdlKQogCQlyZXR1cm47CkBAIC00NTgsOSAr
NDYxLDkgQEAgdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2Ug
KmJyaWRnZSwKIAllbHNlIGlmIChicmlkZ2UtPmZ1bmNzLT5lbmFibGUpCiAJCWJyaWRnZS0+ZnVu
Y3MtPmVuYWJsZShicmlkZ2UpOwogCi0JZHJtX2F0b21pY19icmlkZ2VfZW5hYmxlKGJyaWRnZS0+
bmV4dCwgc3RhdGUpOworCWRybV9hdG9taWNfYnJpZGdlX2NoYWluX2VuYWJsZShicmlkZ2UtPm5l
eHQsIHN0YXRlKTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfZW5hYmxlKTsK
K0VYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fZW5hYmxlKTsKIAogI2lmZGVm
IENPTkZJR19PRgogLyoqCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX3Byb2JlX2hl
bHBlci5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9wcm9iZV9oZWxwZXIuYwppbmRleCBhN2M4N2Fi
ZTg4ZDAuLmMzZWE3MjIwNjVjNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9wcm9i
ZV9oZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3Byb2JlX2hlbHBlci5jCkBAIC0x
MTIsNyArMTEyLDcgQEAgZHJtX21vZGVfdmFsaWRhdGVfcGlwZWxpbmUoc3RydWN0IGRybV9kaXNw
bGF5X21vZGUgKm1vZGUsCiAJCQljb250aW51ZTsKIAkJfQogCi0JCXJldCA9IGRybV9icmlkZ2Vf
bW9kZV92YWxpZChlbmNvZGVyLT5icmlkZ2UsIG1vZGUpOworCQlyZXQgPSBkcm1fYnJpZGdlX2No
YWluX21vZGVfdmFsaWQoZW5jb2Rlci0+YnJpZGdlLCBtb2RlKTsKIAkJaWYgKHJldCAhPSBNT0RF
X09LKSB7CiAJCQkvKiBUaGVyZSBpcyBhbHNvIG5vIHBvaW50IGluIGNvbnRpbnVpbmcgZm9yIGNy
dGMgY2hlY2sKIAkJCSAqIGhlcmUuICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWVk
aWF0ZWsvbXRrX2hkbWkuYyBiL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfaGRtaS5jCmlu
ZGV4IGM3OWIxZjg1NWQ4OS4uZWE2OGI1YWRjY2JlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vbWVkaWF0ZWsvbXRrX2hkbWkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRr
X2hkbWkuYwpAQCAtMTI0Nyw4ICsxMjQ3LDggQEAgc3RhdGljIGludCBtdGtfaGRtaV9jb25uX21v
ZGVfdmFsaWQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm4sCiAJCXN0cnVjdCBkcm1fZGlzcGxh
eV9tb2RlIGFkanVzdGVkX21vZGU7CiAKIAkJZHJtX21vZGVfY29weSgmYWRqdXN0ZWRfbW9kZSwg
bW9kZSk7Ci0JCWlmICghZHJtX2JyaWRnZV9tb2RlX2ZpeHVwKGhkbWktPmJyaWRnZS5uZXh0LCBt
b2RlLAotCQkJCQkgICAmYWRqdXN0ZWRfbW9kZSkpCisJCWlmICghZHJtX2JyaWRnZV9jaGFpbl9t
b2RlX2ZpeHVwKGhkbWktPmJyaWRnZS5uZXh0LCBtb2RlLAorCQkJCQkJICZhZGp1c3RlZF9tb2Rl
KSkKIAkJCXJldHVybiBNT0RFX0JBRDsKIAl9CiAKZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2Ry
bV9icmlkZ2UuaCBiL2luY2x1ZGUvZHJtL2RybV9icmlkZ2UuaAppbmRleCBjMGEyMjg2YTgxZTku
LjcyNjQzNWJhZjRhZCAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2JyaWRnZS5oCisrKyBi
L2luY2x1ZGUvZHJtL2RybV9icmlkZ2UuaApAQCAtMjU0LDkgKzI1NCwxMCBAQCBzdHJ1Y3QgZHJt
X2JyaWRnZV9mdW5jcyB7CiAJICogdGhlcmUgaXMgb25lKSB3aGVuIHRoaXMgY2FsbGJhY2sgaXMg
Y2FsbGVkLgogCSAqCiAJICogTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gd2lsbCBvbmx5IGJlIGlu
dm9rZWQgaW4gdGhlIGNvbnRleHQgb2YgYW4KLQkgKiBhdG9taWMgY29tbWl0LiBJdCB3aWxsIG5v
dCBiZSBpbnZva2VkIGZyb20gJmRybV9icmlkZ2VfcHJlX2VuYWJsZS4gSXQKLQkgKiB3b3VsZCBi
ZSBwcnVkZW50IHRvIGFsc28gcHJvdmlkZSBhbiBpbXBsZW1lbnRhdGlvbiBvZiBAcHJlX2VuYWJs
ZSBpZgotCSAqIHlvdSBhcmUgZXhwZWN0aW5nIGRyaXZlciBjYWxscyBpbnRvICZkcm1fYnJpZGdl
X3ByZV9lbmFibGUuCisJICogYXRvbWljIGNvbW1pdC4gSXQgd2lsbCBub3QgYmUgaW52b2tlZCBm
cm9tCisJICogJmRybV9icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZS4gSXQgd291bGQgYmUgcHJ1ZGVu
dCB0byBhbHNvIHByb3ZpZGUgYW4KKwkgKiBpbXBsZW1lbnRhdGlvbiBvZiBAcHJlX2VuYWJsZSBp
ZiB5b3UgYXJlIGV4cGVjdGluZyBkcml2ZXIgY2FsbHMgaW50bworCSAqICZkcm1fYnJpZGdlX2No
YWluX3ByZV9lbmFibGUuCiAJICoKIAkgKiBUaGUgQGF0b21pY19wcmVfZW5hYmxlIGNhbGxiYWNr
IGlzIG9wdGlvbmFsLgogCSAqLwpAQCAtMjc5LDkgKzI4MCw5IEBAIHN0cnVjdCBkcm1fYnJpZGdl
X2Z1bmNzIHsKIAkgKiBjaGFpbiBpZiB0aGVyZSBpcyBvbmUuCiAJICoKIAkgKiBOb3RlIHRoYXQg
dGhpcyBmdW5jdGlvbiB3aWxsIG9ubHkgYmUgaW52b2tlZCBpbiB0aGUgY29udGV4dCBvZiBhbgot
CSAqIGF0b21pYyBjb21taXQuIEl0IHdpbGwgbm90IGJlIGludm9rZWQgZnJvbSAmZHJtX2JyaWRn
ZV9lbmFibGUuIEl0Ci0JICogd291bGQgYmUgcHJ1ZGVudCB0byBhbHNvIHByb3ZpZGUgYW4gaW1w
bGVtZW50YXRpb24gb2YgQGVuYWJsZSBpZgotCSAqIHlvdSBhcmUgZXhwZWN0aW5nIGRyaXZlciBj
YWxscyBpbnRvICZkcm1fYnJpZGdlX2VuYWJsZS4KKwkgKiBhdG9taWMgY29tbWl0LiBJdCB3aWxs
IG5vdCBiZSBpbnZva2VkIGZyb20gJmRybV9icmlkZ2VfY2hhaW5fZW5hYmxlLgorCSAqIEl0IHdv
dWxkIGJlIHBydWRlbnQgdG8gYWxzbyBwcm92aWRlIGFuIGltcGxlbWVudGF0aW9uIG9mIEBlbmFi
bGUgaWYKKwkgKiB5b3UgYXJlIGV4cGVjdGluZyBkcml2ZXIgY2FsbHMgaW50byAmZHJtX2JyaWRn
ZV9jaGFpbl9lbmFibGUuCiAJICoKIAkgKiBUaGUgQGF0b21pY19lbmFibGUgY2FsbGJhY2sgaXMg
b3B0aW9uYWwuCiAJICovCkBAIC0zMDEsOSArMzAyLDEwIEBAIHN0cnVjdCBkcm1fYnJpZGdlX2Z1
bmNzIHsKIAkgKiBzaWduYWxzKSBmZWVkaW5nIGl0IGlzIHN0aWxsIHJ1bm5pbmcgd2hlbiB0aGlz
IGNhbGxiYWNrIGlzIGNhbGxlZC4KIAkgKgogCSAqIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIHdp
bGwgb25seSBiZSBpbnZva2VkIGluIHRoZSBjb250ZXh0IG9mIGFuCi0JICogYXRvbWljIGNvbW1p
dC4gSXQgd2lsbCBub3QgYmUgaW52b2tlZCBmcm9tICZkcm1fYnJpZGdlX2Rpc2FibGUuIEl0Ci0J
ICogd291bGQgYmUgcHJ1ZGVudCB0byBhbHNvIHByb3ZpZGUgYW4gaW1wbGVtZW50YXRpb24gb2Yg
QGRpc2FibGUgaWYKLQkgKiB5b3UgYXJlIGV4cGVjdGluZyBkcml2ZXIgY2FsbHMgaW50byAmZHJt
X2JyaWRnZV9kaXNhYmxlLgorCSAqIGF0b21pYyBjb21taXQuIEl0IHdpbGwgbm90IGJlIGludm9r
ZWQgZnJvbQorCSAqICZkcm1fYnJpZGdlX2NoYWluX2Rpc2FibGUuIEl0IHdvdWxkIGJlIHBydWRl
bnQgdG8gYWxzbyBwcm92aWRlIGFuCisJICogaW1wbGVtZW50YXRpb24gb2YgQGRpc2FibGUgaWYg
eW91IGFyZSBleHBlY3RpbmcgZHJpdmVyIGNhbGxzIGludG8KKwkgKiAmZHJtX2JyaWRnZV9jaGFp
bl9kaXNhYmxlLgogCSAqCiAJICogVGhlIEBhdG9taWNfZGlzYWJsZSBjYWxsYmFjayBpcyBvcHRp
b25hbC4KIAkgKi8KQEAgLTMyNSwxMCArMzI3LDExIEBAIHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNz
IHsKIAkgKiBjYWxsZWQuCiAJICoKIAkgKiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiB3aWxsIG9u
bHkgYmUgaW52b2tlZCBpbiB0aGUgY29udGV4dCBvZiBhbgotCSAqIGF0b21pYyBjb21taXQuIEl0
IHdpbGwgbm90IGJlIGludm9rZWQgZnJvbSAmZHJtX2JyaWRnZV9wb3N0X2Rpc2FibGUuCisJICog
YXRvbWljIGNvbW1pdC4gSXQgd2lsbCBub3QgYmUgaW52b2tlZCBmcm9tCisJICogJmRybV9icmlk
Z2VfY2hhaW5fcG9zdF9kaXNhYmxlLgogCSAqIEl0IHdvdWxkIGJlIHBydWRlbnQgdG8gYWxzbyBw
cm92aWRlIGFuIGltcGxlbWVudGF0aW9uIG9mCiAJICogQHBvc3RfZGlzYWJsZSBpZiB5b3UgYXJl
IGV4cGVjdGluZyBkcml2ZXIgY2FsbHMgaW50bwotCSAqICZkcm1fYnJpZGdlX3Bvc3RfZGlzYWJs
ZS4KKwkgKiAmZHJtX2JyaWRnZV9jaGFpbl9wb3N0X2Rpc2FibGUuCiAJICoKIAkgKiBUaGUgQGF0
b21pY19wb3N0X2Rpc2FibGUgY2FsbGJhY2sgaXMgb3B0aW9uYWwuCiAJICovCkBAIC00MDYsMjcg
KzQwOSwyOCBAQCBzdHJ1Y3QgZHJtX2JyaWRnZSAqb2ZfZHJtX2ZpbmRfYnJpZGdlKHN0cnVjdCBk
ZXZpY2Vfbm9kZSAqbnApOwogaW50IGRybV9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fZW5jb2Rl
ciAqZW5jb2Rlciwgc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKIAkJICAgICAgc3RydWN0IGRy
bV9icmlkZ2UgKnByZXZpb3VzKTsKIAotYm9vbCBkcm1fYnJpZGdlX21vZGVfZml4dXAoc3RydWN0
IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJCSAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2Rl
ICptb2RlLAotCQkJICAgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpOwot
ZW51bSBkcm1fbW9kZV9zdGF0dXMgZHJtX2JyaWRnZV9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UsCi0JCQkJCSAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2Rl
KTsKLXZvaWQgZHJtX2JyaWRnZV9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpOwot
dm9pZCBkcm1fYnJpZGdlX3Bvc3RfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKTsK
LXZvaWQgZHJtX2JyaWRnZV9tb2RlX3NldChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJ
IGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAotCQkJIGNvbnN0IHN0cnVjdCBk
cm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlKTsKLXZvaWQgZHJtX2JyaWRnZV9wcmVfZW5h
YmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpOwotdm9pZCBkcm1fYnJpZGdlX2VuYWJsZShz
dHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKTsKK2Jvb2wgZHJtX2JyaWRnZV9jaGFpbl9tb2RlX2Zp
eHVwKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJIGNvbnN0IHN0cnVjdCBkcm1fZGlz
cGxheV9tb2RlICptb2RlLAorCQkJCSBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRf
bW9kZSk7CitlbnVtIGRybV9tb2RlX3N0YXR1cworZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3ZhbGlk
KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkgICAgY29uc3Qgc3RydWN0IGRybV9kaXNw
bGF5X21vZGUgKm1vZGUpOwordm9pZCBkcm1fYnJpZGdlX2NoYWluX2Rpc2FibGUoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSk7Cit2b2lkIGRybV9icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlKHN0
cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpOwordm9pZCBkcm1fYnJpZGdlX2NoYWluX21vZGVfc2V0
KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkgICAgICAgY29uc3Qgc3RydWN0IGRybV9k
aXNwbGF5X21vZGUgKm1vZGUsCisJCQkgICAgICAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21v
ZGUgKmFkanVzdGVkX21vZGUpOwordm9pZCBkcm1fYnJpZGdlX2NoYWluX3ByZV9lbmFibGUoc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZSk7Cit2b2lkIGRybV9icmlkZ2VfY2hhaW5fZW5hYmxlKHN0
cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpOwogCi12b2lkIGRybV9hdG9taWNfYnJpZGdlX2Rpc2Fi
bGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJCSAgICAgICBzdHJ1Y3QgZHJtX2F0b21p
Y19zdGF0ZSAqc3RhdGUpOwotdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9wb3N0X2Rpc2FibGUoc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKK3ZvaWQgZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fZGlz
YWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCSAgICAgc3RydWN0IGRybV9hdG9t
aWNfc3RhdGUgKnN0YXRlKTsKK3ZvaWQgZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fcG9zdF9kaXNh
YmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJCSAgc3RydWN0IGRybV9hdG9taWNf
c3RhdGUgKnN0YXRlKTsKK3ZvaWQgZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZShz
dHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAq
c3RhdGUpOwordm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9lbmFibGUoc3RydWN0IGRybV9i
cmlkZ2UgKmJyaWRnZSwKIAkJCQkgICAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKTsK
LXZvaWQgZHJtX2F0b21pY19icmlkZ2VfcHJlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJp
ZGdlLAotCQkJCSAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKTsKLXZvaWQgZHJtX2F0
b21pY19icmlkZ2VfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCi0JCQkgICAgICBz
dHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpOwogCiAjaWZkZWYgQ09ORklHX0RSTV9QQU5F
TF9CUklER0UKIHN0cnVjdCBkcm1fYnJpZGdlICpkcm1fcGFuZWxfYnJpZGdlX2FkZChzdHJ1Y3Qg
ZHJtX3BhbmVsICpwYW5lbCk7Ci0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2RyaS1kZXZlbA==
