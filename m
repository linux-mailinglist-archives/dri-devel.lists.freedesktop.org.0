Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A489ED7D9D
	for <lists+dri-devel@lfdr.de>; Tue, 15 Oct 2019 19:25:34 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B1D808987A;
	Tue, 15 Oct 2019 17:25:31 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 75EEA89862
 for <dri-devel@lists.freedesktop.org>; Tue, 15 Oct 2019 17:25:29 +0000 (UTC)
Received: from pendragon.ideasonboard.com (81-175-216-236.bb.dnainternet.fi
 [81.175.216.236])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 14D20324;
 Tue, 15 Oct 2019 19:25:27 +0200 (CEST)
Date: Tue, 15 Oct 2019 20:25:24 +0300
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Jacopo Mondi <jacopo+renesas@jmondi.org>
Subject: Re: [PATCH v5 3/8] drm: rcar-du: Add support for CMM
Message-ID: <20191015172524.GM4875@pendragon.ideasonboard.com>
References: <20191015104621.62514-1-jacopo+renesas@jmondi.org>
 <20191015104621.62514-4-jacopo+renesas@jmondi.org>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191015104621.62514-4-jacopo+renesas@jmondi.org>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1571160327;
 bh=BI8OaXXBknVbUuVSFQ+3+rQhs0xihyr00Mcv1/eLEFo=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=k/h4bIm4YKHnXi2rWm65TEAhHnVipNyFnTfqhoPtFXuJavMZPZn1q6Duan8Hrfyih
 I/hoehoPbjSb2buKtIi8EI9P9JWz+FaaDK4EJitYOuEluD6Cs0mxGasmnZqh4mLrRR
 IzninsOII5qMrvPTS+wokvGcL0bGL5djT7HMcoIs=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: muroya@ksk.co.jp, horms@verge.net.au, VenkataRajesh.Kalakodima@in.bosch.com,
 airlied@linux.ie, koji.matsuoka.xm@renesas.com,
 dri-devel@lists.freedesktop.org, linux-kernel@vger.kernel.org,
 linux-renesas-soc@vger.kernel.org, kieran.bingham+renesas@ideasonboard.com,
 geert@linux-m68k.org, seanpaul@chromium.org,
 Harsha.ManjulaMallikarjun@in.bosch.com, uli+renesas@fpond.eu,
 ezequiel@collabora.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgSmFjb3BvLAoKVGhhbmsgeW91IGZvciB0aGUgcGF0Y2guCgpPbiBUdWUsIE9jdCAxNSwgMjAx
OSBhdCAxMjo0NjoxNlBNICswMjAwLCBKYWNvcG8gTW9uZGkgd3JvdGU6Cj4gQWRkIGEgZHJpdmVy
IGZvciB0aGUgUi1DYXIgRGlzcGxheSBVbml0IENvbG9yIENvcnJlY3Rpb24gTW9kdWxlLgo+IAo+
IEluIG1vc3Qgb2YgR2VuMyBTb0NzLCBlYWNoIERVIG91dHB1dCBjaGFubmVsIGlzIHByb3ZpZGVk
IHdpdGggYSBDTU0gdW5pdAo+IHRvIHBlcmZvcm0gaW1hZ2UgZW5oYW5jZW1lbnQgYW5kIGNvbG9y
IGNvcnJlY3Rpb24uCj4gCj4gQWRkIHN1cHBvcnQgZm9yIENNTSB0aHJvdWdoIGEgZHJpdmVyIHRo
YXQgc3VwcG9ydHMgY29uZmlndXJhdGlvbiBvZgo+IHRoZSAxLWRpbWVuc2lvbmFsIExVVCB0YWJs
ZS4gTW9yZSBhZHZhbmNlZCBDTU0gZmVhdHVyZXMgd2lsbCBiZQo+IGltcGxlbWVudGVkIG9uIHRv
cCBvZiB0aGlzIGluaXRpYWwgb25lLgo+IAo+IFNpZ25lZC1vZmYtYnk6IEphY29wbyBNb25kaSA8
amFjb3BvK3JlbmVzYXNAam1vbmRpLm9yZz4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL3JjYXIt
ZHUvS2NvbmZpZyAgICB8ICAgNyArCj4gIGRyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L01ha2VmaWxl
ICAgfCAgIDEgKwo+ICBkcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2NtbS5jIHwgMTk4ICsr
KysrKysrKysrKysrKysrKysrKysrKysrKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3Jj
YXJfY21tLmggfCAgNjAgKysrKysrKysrCj4gIDQgZmlsZXMgY2hhbmdlZCwgMjY2IGluc2VydGlv
bnMoKykKPiAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJf
Y21tLmMKPiAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJf
Y21tLmgKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvS2NvbmZpZyBi
L2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L0tjb25maWcKPiBpbmRleCAxNTI5ODQ5ZTIxN2UuLjUz
OWQyMzI3OTBkMSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9LY29uZmln
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvS2NvbmZpZwo+IEBAIC0xMyw2ICsxMywx
MyBAQCBjb25maWcgRFJNX1JDQVJfRFUKPiAgCSAgQ2hvb3NlIHRoaXMgb3B0aW9uIGlmIHlvdSBo
YXZlIGFuIFItQ2FyIGNoaXBzZXQuCj4gIAkgIElmIE0gaXMgc2VsZWN0ZWQgdGhlIG1vZHVsZSB3
aWxsIGJlIGNhbGxlZCByY2FyLWR1LWRybS4KPiAgCj4gK2NvbmZpZyBEUk1fUkNBUl9DTU0KPiAr
CWJvb2wgIlItQ2FyIERVIENvbG9yIE1hbmFnZW1lbnQgTW9kdWxlIChDTU0pIFN1cHBvcnQiCj4g
KwlkZXBlbmRzIG9uIERSTSAmJiBPRgo+ICsJZGVwZW5kcyBvbiBEUk1fUkNBUl9EVQo+ICsJaGVs
cAo+ICsJICBFbmFibGUgc3VwcG9ydCBmb3IgUi1DYXIgQ29sb3IgTWFuYWdlbWVudCBNb2R1bGUg
KENNTSkuCj4gKwo+ICBjb25maWcgRFJNX1JDQVJfRFdfSERNSQo+ICAJdHJpc3RhdGUgIlItQ2Fy
IERVIEdlbjMgSERNSSBFbmNvZGVyIFN1cHBvcnQiCj4gIAlkZXBlbmRzIG9uIERSTSAmJiBPRgo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9NYWtlZmlsZSBiL2RyaXZlcnMv
Z3B1L2RybS9yY2FyLWR1L01ha2VmaWxlCj4gaW5kZXggNmMyZWQ5YzQ2NDY3Li40ZDExODdjY2Mz
ZTUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvTWFrZWZpbGUKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9NYWtlZmlsZQo+IEBAIC0xNSw2ICsxNSw3IEBAIHJj
YXItZHUtZHJtLSQoQ09ORklHX0RSTV9SQ0FSX0xWRFMpCSs9IHJjYXJfZHVfb2YubyBcCj4gIHJj
YXItZHUtZHJtLSQoQ09ORklHX0RSTV9SQ0FSX1ZTUCkJKz0gcmNhcl9kdV92c3Aubwo+ICByY2Fy
LWR1LWRybS0kKENPTkZJR19EUk1fUkNBUl9XUklURUJBQ0spICs9IHJjYXJfZHVfd3JpdGViYWNr
Lm8KPiAgCj4gK29iai0kKENPTkZJR19EUk1fUkNBUl9DTU0pCQkrPSByY2FyX2NtbS5vCj4gIG9i
ai0kKENPTkZJR19EUk1fUkNBUl9EVSkJCSs9IHJjYXItZHUtZHJtLm8KPiAgb2JqLSQoQ09ORklH
X0RSTV9SQ0FSX0RXX0hETUkpCQkrPSByY2FyX2R3X2hkbWkubwo+ICBvYmotJChDT05GSUdfRFJN
X1JDQVJfTFZEUykJCSs9IHJjYXJfbHZkcy5vCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9yY2FyLWR1L3JjYXJfY21tLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2NtbS5j
Cj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAuLjk2NzVhODU4N2Rl
ZQo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2Nt
bS5jCj4gQEAgLTAsMCArMSwxOTggQEAKPiArLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQ
TC0yLjArCj4gKy8qCj4gKyAqIHJjYXJfY21tLmMgLS0gUi1DYXIgRGlzcGxheSBVbml0IENvbG9y
IE1hbmFnZW1lbnQgTW9kdWxlCj4gKyAqCj4gKyAqIENvcHlyaWdodCAoQykgMjAxOSBKYWNvcG8g
TW9uZGkgPGphY29wbytyZW5lc2FzQGptb25kaS5vcmc+Cj4gKyAqLwo+ICsKPiArI2luY2x1ZGUg
PGxpbnV4L2lvLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KPiArI2luY2x1ZGUgPGxp
bnV4L29mLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kZXZpY2UuaD4KPiArI2luY2x1
ZGUgPGxpbnV4L3BtX3J1bnRpbWUuaD4KPiArCj4gKyNpbmNsdWRlIDxkcm0vZHJtX2NvbG9yX21n
bXQuaD4KPiArCj4gKyNpbmNsdWRlICJyY2FyX2NtbS5oIgo+ICsKPiArI2RlZmluZSBDTTJfTFVU
X0NUUkwJCTB4MDAwMAo+ICsjZGVmaW5lIENNMl9MVVRfQ1RSTF9MVVRfRU4JQklUKDApCj4gKyNk
ZWZpbmUgQ00yX0xVVF9UQkxfQkFTRQkweDA2MDAKPiArI2RlZmluZSBDTTJfTFVUX1RCTChfX2kp
CShDTTJfTFVUX1RCTF9CQVNFICsgKF9faSkgKiA0KQo+ICsKPiArc3RydWN0IHJjYXJfY21tIHsK
PiArCXZvaWQgX19pb21lbSAqYmFzZTsKPiArCj4gKwkvKgo+ICsJICogQGx1dDoJCTFELUxVVCBz
dGF0dXMKCnMvc3RhdHVzL3N0YXRlLyA/Cgo+ICsJICogQGx1dC5lbmFibGVkOgkxRC1MVVQgZW5h
YmxlZCBmbGFnCj4gKwkgKi8KPiArCXN0cnVjdCB7Cj4gKwkJYm9vbCBlbmFibGVkOwo+ICsJfSBs
dXQ7Cj4gK307Cj4gKwo+ICtzdGF0aWMgaW5saW5lIGludCByY2FyX2NtbV9yZWFkKHN0cnVjdCBy
Y2FyX2NtbSAqcmNtbSwgdTMyIHJlZykKPiArewo+ICsJcmV0dXJuIGlvcmVhZDMyKHJjbW0tPmJh
c2UgKyByZWcpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW5saW5lIHZvaWQgcmNhcl9jbW1fd3JpdGUo
c3RydWN0IHJjYXJfY21tICpyY21tLCB1MzIgcmVnLCB1MzIgZGF0YSkKPiArewo+ICsJaW93cml0
ZTMyKGRhdGEsIHJjbW0tPmJhc2UgKyByZWcpOwo+ICt9Cj4gKwo+ICsvKgo+ICsgKiByY2FyX2Nt
bV9sdXRfd3JpdGUoKSAtIFNjYWxlIHRoZSBEUk0gTFVUIHRhYmxlIGVudHJpZXMgdG8gaGFyZHdh
cmUgcHJlY2lzaW9uCj4gKyAqCQkJICBhbmQgd3JpdGUgdG8gdGhlIENNTSByZWdpc3RlcnMuCgpT
b21lIG9mIHlvdSBicmllZiBkZXNjcmlwdGlvbnMgZW5kIHdpdGggYSBwZXJpb2QsIHNvbWUgZG9u
J3QuIEkgZG9uJ3QKaGF2ZSBhIHByZWZlcmVuY2UsIGJ1dCBjb3VsZCB5b3UgcGxlYXNlIHBpY2sg
b25lIG9wdGlvbiBhbmQgdXNlIGl0CmNvbnNpc3RlbnRseSA/Cgo+ICsgKiBAcmNtbTogUG9pbnRl
ciB0byB0aGUgQ01NIGRldmljZQo+ICsgKiBAZHJtX2x1dDogUG9pbnRlciB0byB0aGUgRFJNIExV
VCB0YWJsZQo+ICsgKi8KPiArc3RhdGljIHZvaWQgcmNhcl9jbW1fbHV0X3dyaXRlKHN0cnVjdCBy
Y2FyX2NtbSAqcmNtbSwKPiArCQkJICAgICAgIGNvbnN0IHN0cnVjdCBkcm1fY29sb3JfbHV0ICpk
cm1fbHV0KQo+ICt7Cj4gKwl1bnNpZ25lZCBpbnQgaTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwg
Q00yX0xVVF9TSVpFOyArK2kpIHsKPiArCQl1MzIgZW50cnkgPSAgZHJtX2NvbG9yX2x1dF9leHRy
YWN0KGRybV9sdXRbaV0ucmVkLCA4KSA8PCAxNgoKQXMgcmVwb3J0ZWQgYnkgS2llcmFuLCBzLz0g
IC89IC8KCj4gKwkJCSAgfCBkcm1fY29sb3JfbHV0X2V4dHJhY3QoZHJtX2x1dFtpXS5ncmVlbiwg
OCkgPDwgOAo+ICsJCQkgIHwgZHJtX2NvbG9yX2x1dF9leHRyYWN0KGRybV9sdXRbaV0uYmx1ZSwg
OCk7Cj4gKwo+ICsJCXJjYXJfY21tX3dyaXRlKHJjbW0sIENNMl9MVVRfVEJMKGkpLCBlbnRyeSk7
Cj4gKwl9Cj4gK30KPiArCj4gKy8qCj4gKyAqIHJjYXJfY21tX3NldHVwKCkgLSBDb25maWd1cmUg
dGhlIENNTSB1bml0Lgo+ICsgKiBAcGRldjogVGhlIHBsYXRmb3JtIGRldmljZSBhc3NvY2lhdGVk
IHdpdGggdGhlIENNTSBpbnN0YW5jZQo+ICsgKiBAY29uZmlnOiBUaGUgQ01NIHVuaXQgY29uZmln
dXJhdGlvbgo+ICsgKgo+ICsgKiBDb25maWd1cmUgdGhlIENNTSB1bml0IHdpdGggdGhlIGdpdmVu
IGNvbmZpZ3VyYXRpb24uIEN1cnJlbnRseSBlbmFibGluZywKPiArICogZGlzYWJsaW5nIGFuZCBw
cm9ncmFtbWluZyBvZiB0aGUgMS1EIExVVCB1bml0IGlzIHN1cHBvcnRlZC4KPiArICovCj4gK2lu
dCByY2FyX2NtbV9zZXR1cChzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2LAo+ICsJCSAgIGNv
bnN0IHN0cnVjdCByY2FyX2NtbV9jb25maWcgKmNvbmZpZykKPiArewo+ICsJc3RydWN0IHJjYXJf
Y21tICpyY21tID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7Cj4gKwo+ICsJLyogRGlzYWJs
ZSBMVVQgaWYgcmVxdWVzdGVkLiAqLwo+ICsJaWYgKCFjb25maWctPmx1dC5lbmFibGUpIHsKPiAr
CQlpZiAocmNtbS0+bHV0LmVuYWJsZWQpIHsKPiArCQkJcmNhcl9jbW1fd3JpdGUocmNtbSwgQ00y
X0xVVF9DVFJMLCAwKTsKPiArCQkJcmNtbS0+bHV0LmVuYWJsZWQgPSBmYWxzZTsKPiArCQl9Cj4g
Kwo+ICsJCXJldHVybiAwOwo+ICsJfQo+ICsKPiArCS8qIEVuYWJsZSBMVVQgYW5kIHByb2dyYW0g
dGhlIG5ldyBnYW1tYSB0YWJsZSB2YWx1ZXMuICovCj4gKwlpZiAoIXJjbW0tPmx1dC5lbmFibGVk
KSB7Cj4gKwkJcmNhcl9jbW1fd3JpdGUocmNtbSwgQ00yX0xVVF9DVFJMLCBDTTJfTFVUX0NUUkxf
TFVUX0VOKTsKPiArCQlyY21tLT5sdXQuZW5hYmxlZCA9IHRydWU7Cj4gKwl9Cj4gKwo+ICsJcmNh
cl9jbW1fbHV0X3dyaXRlKHJjbW0sIGNvbmZpZy0+bHV0LnRhYmxlKTsKPiArCj4gKwlyZXR1cm4g
MDsKPiArfQo+ICtFWFBPUlRfU1lNQk9MX0dQTChyY2FyX2NtbV9zZXR1cCk7Cj4gKwo+ICsvKgo+
ICsgKiByY2FyX2NtbV9lbmFibGUoKSAtIEVuYWJsZSB0aGUgQ01NIHVuaXQuCj4gKyAqIEBwZGV2
OiBUaGUgcGxhdGZvcm0gZGV2aWNlIGFzc29jaWF0ZWQgd2l0aCB0aGUgQ01NIGluc3RhbmNlCj4g
KyAqCj4gKyAqIEVuYWJsZSB0aGUgQ01NIHVuaXQgYnkgZW5hYmxpbmcgdGhlIHBhcmVudCBjbG9j
ay4KCkl0IHdvdWxkIGJlIGJldHRlciB0byBleHBsYWluIGhvdyB0aGUgZnVuY3Rpb24gc2hvdWxk
IGJlIHVzZWQgcmF0aGVyCnRoYW4gd2hhdCBpdCBkb2VzIGludGVybmFsbHkuCgogKiBFbmFibGUg
dGhlIENNTSB1bml0LiBXaGVuIHRoZSBvdXRwdXQgb2YgdGhlIGNvcnJlc3BvbmRpbmcgRFUgY2hh
bm5lbCBpcwogKiByb3V0ZWQgdG8gdGhlIENNTSB1bml0LCB0aGUgdW5pdCBzaGFsbCBiZSBlbmFi
bGVkIGJlZm9yZSB0aGUgRFUgY2hhbm5lbCBpcwogKiBzdGFydGVkLCBhbmQgcmVtYWluIGVuYWJs
ZWQgdW50aWwgdGhlIGNoYW5uZWwgaXMgc3RvcHBlZC4gVGhlIENNTSB1bml0IHNoYWxsCiAqIHRo
ZSBiZSBkaXNhYmxlZCB3aXRoIHJjYXJfY21tX2Rpc2FibGUoKS4KICoKICogQ2FsbHMgdG8gcmNh
cl9jbW1fZW5hYmxlKCkgYW5kIHJjYXJfY21tX2Rpc2FibGUoKSBhcmUgbm90IHJlZmVyZW5jZS1j
b3VudGVkLgogKiBJdCBpcyBhbiBlcnJvciB0byBhdHRlbXB0IHRvIGVuYWJsZSBhbiBhbHJlYWR5
IGVuYWJsZWQgQ01NIHVuaXQsIG9yIHRvCiAqIGF0dGVtcHQgdG8gZGlzYWJsZSBhIGRpc2FibGVk
IHVuaXQuCgpUaGUgcmVsYXRpb25zaGlwIHdpdGggcmNhcl9jbW1fc2V0dXAoKSBzaG91bGQgYWxz
byBiZSBkb2N1bWVudGVkLgpMb29raW5nIGF0IHRoZSBjb2RlLCBJIGJlbGlldmUgcmNhcl9jbW1f
ZW5hYmxlKCkgaGFzIHRvIGJlIGNhbGxlZCBmaXJzdCwKb3RoZXJ3aXNlIHRoZSBDTU0gTVNUUCB3
aWxsIGJlIGRpc2FibGVkLCBhbmQgcmVnaXN0ZXJzIGNhbid0IGJlCmFjY2Vzc2VkLiBJIHdvdWxk
IGRvY3VtZW50IHRoaXMgYXMgcGFydCBvZiB0aGUgcmNhcl9jbW1fc2V0dXAoKQpmdW5jdGlvbi4K
Cj4gKyAqLwo+ICtpbnQgcmNhcl9jbW1fZW5hYmxlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBk
ZXYpCj4gK3sKPiArCWludCByZXQ7Cj4gKwo+ICsJcmV0ID0gcG1fcnVudGltZV9nZXRfc3luYygm
cGRldi0+ZGV2KTsKPiArCWlmIChyZXQgPCAwKQo+ICsJCXJldHVybiByZXQ7Cj4gKwo+ICsJcmV0
dXJuIDA7Cj4gK30KPiArRVhQT1JUX1NZTUJPTF9HUEwocmNhcl9jbW1fZW5hYmxlKTsKPiArCj4g
Ky8qCj4gKyAqIHJjYXJfY21tX2Rpc2FibGUoKSAtIERpc2FibGUgdGhlIENNTSB1bml0Lgo+ICsg
KiBAcGRldjogVGhlIHBsYXRmb3JtIGRldmljZSBhc3NvY2lhdGVkIHdpdGggdGhlIENNTSBpbnN0
YW5jZQo+ICsgKgo+ICsgKiBEaXNhYmxlIHRoZSBDTU0gdW5pdCBieSBzdG9wcGluZyB0aGUgcGFy
ZW50IGNsb2NrLgoKU2FtZSBoZXJlLCBidXQgeW91IGNhbiBzaW1wbHkgcmVmZXJlbmNlIHJjYXJf
Y21tX2VuYWJsZSgpLgoKICogRGlzYWJsZSB0aGUgQ01NIHVuaXQuIFNlZSByY2FyX2NtbV9lbmFi
bGUoKSBmb3IgdXNhZ2UgaW5mb3JtYXRpb24uCiAqCiAqIERpc2FibGluZyB0aGUgQ01NIHVuaXQg
ZGlzYWJsZSBhbGwgdGhlIGludGVybmFsIHByb2Nlc3NpbmcgYmxvY2tzLiBUaGUgQ01NCiAqIHN0
YXRlIHNoYWxsIHRodXMgYmUgcmVzdG9yZWQgd2l0aCByY2FyX2NtbV9zZXR1cCgpIHdoZW4gcmUt
ZW5hYmxpbmcgdGhlIENNTQogKiB1bml0IGFmdGVyIHRoZSBuZXh0IHJjYXJfY21tX2VuYWJsZSgp
IGNhbGwuCgo+ICsgKi8KPiArdm9pZCByY2FyX2NtbV9kaXNhYmxlKHN0cnVjdCBwbGF0Zm9ybV9k
ZXZpY2UgKnBkZXYpCj4gK3sKPiArCXN0cnVjdCByY2FyX2NtbSAqcmNtbSA9IHBsYXRmb3JtX2dl
dF9kcnZkYXRhKHBkZXYpOwo+ICsKPiArCXJjYXJfY21tX3dyaXRlKHJjbW0sIENNMl9MVVRfQ1RS
TCwgMCk7Cj4gKwlyY21tLT5sdXQuZW5hYmxlZCA9IGZhbHNlOwo+ICsKPiArCXBtX3J1bnRpbWVf
cHV0KCZwZGV2LT5kZXYpOwo+ICt9Cj4gK0VYUE9SVF9TWU1CT0xfR1BMKHJjYXJfY21tX2Rpc2Fi
bGUpOwo+ICsKPiArLyoKPiArICogcmNhcl9jbW1faW5pdCgpIC0gSW5pdGlhbGl6ZSB0aGUgQ01N
Cj4gKyAqIEBwZGV2OiBUaGUgcGxhdGZvcm0gZGV2aWNlIGFzc29jaWF0ZWQgd2l0aCB0aGUgQ01N
IGluc3RhbmNlCj4gKyAqCj4gKyAqIFJldHVybjogMCBvbiBzdWNjZXNzLCAtRVBST0JFX0RFRkVS
IGlmIHRoZSBDTU0gaXMgbm90IGF2YWlsYWJsZSB5ZXQsCj4gKyAqICAgICAgICAgLUVOT0RFViBp
ZiB0aGUgRFJNX1JDQVJfQ01NIGNvbmZpZyBvcHRpb24gaXMgZGlzYWJsZWQKPiArICovCj4gK2lu
dCByY2FyX2NtbV9pbml0KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gK3sKPiArCXN0
cnVjdCByY2FyX2NtbSAqcmNtbSA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwo+ICsKPiAr
CWlmICghcmNtbSkKPiArCQlyZXR1cm4gLUVQUk9CRV9ERUZFUjsKPiArCj4gKwlyZXR1cm4gMDsK
PiArfQo+ICtFWFBPUlRfU1lNQk9MX0dQTChyY2FyX2NtbV9pbml0KTsKPiArCj4gK3N0YXRpYyBp
bnQgcmNhcl9jbW1fcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKPiArewo+ICsJ
c3RydWN0IHJjYXJfY21tICpyY21tOwo+ICsKPiArCXJjbW0gPSBkZXZtX2t6YWxsb2MoJnBkZXYt
PmRldiwgc2l6ZW9mKCpyY21tKSwgR0ZQX0tFUk5FTCk7Cj4gKwlpZiAoIXJjbW0pCj4gKwkJcmV0
dXJuIC1FTk9NRU07Cj4gKwlwbGF0Zm9ybV9zZXRfZHJ2ZGF0YShwZGV2LCByY21tKTsKPiArCj4g
KwlyY21tLT5iYXNlID0gZGV2bV9wbGF0Zm9ybV9pb3JlbWFwX3Jlc291cmNlKHBkZXYsIDApOwo+
ICsJaWYgKElTX0VSUihyY21tLT5iYXNlKSkKPiArCQlyZXR1cm4gUFRSX0VSUihyY21tLT5iYXNl
KTsKPiArCj4gKwlwbV9ydW50aW1lX2VuYWJsZSgmcGRldi0+ZGV2KTsKPiArCj4gKwlyZXR1cm4g
MDsKPiArfQo+ICsKPiArc3RhdGljIGludCByY2FyX2NtbV9yZW1vdmUoc3RydWN0IHBsYXRmb3Jt
X2RldmljZSAqcGRldikKPiArewo+ICsJcG1fcnVudGltZV9kaXNhYmxlKCZwZGV2LT5kZXYpOwo+
ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2Rldmlj
ZV9pZCByY2FyX2NtbV9vZl90YWJsZVtdID0gewo+ICsJeyAuY29tcGF0aWJsZSA9ICJyZW5lc2Fz
LHJjYXItZ2VuMy1jbW0iLCB9LAo+ICsJeyAuY29tcGF0aWJsZSA9ICJyZW5lc2FzLHJjYXItZ2Vu
Mi1jbW0iLCB9LAo+ICsJeyB9LAo+ICt9Owo+ICtNT0RVTEVfREVWSUNFX1RBQkxFKG9mLCByY2Fy
X2NtbV9vZl90YWJsZSk7Cj4gKwo+ICtzdGF0aWMgc3RydWN0IHBsYXRmb3JtX2RyaXZlciByY2Fy
X2NtbV9wbGF0Zm9ybV9kcml2ZXIgPSB7Cj4gKwkucHJvYmUJCT0gcmNhcl9jbW1fcHJvYmUsCj4g
KwkucmVtb3ZlCQk9IHJjYXJfY21tX3JlbW92ZSwKPiArCS5kcml2ZXIJCT0gewo+ICsJCS5uYW1l
CT0gInJjYXItY21tIiwKPiArCQkub2ZfbWF0Y2hfdGFibGUgPSByY2FyX2NtbV9vZl90YWJsZSwK
PiArCX0sCj4gK307Cj4gKwo+ICttb2R1bGVfcGxhdGZvcm1fZHJpdmVyKHJjYXJfY21tX3BsYXRm
b3JtX2RyaXZlcik7Cj4gKwo+ICtNT0RVTEVfQVVUSE9SKCJKYWNvcG8gTW9uZGkgPGphY29wbyty
ZW5lc2FzQGptb25kaS5vcmc+Iik7Cj4gK01PRFVMRV9ERVNDUklQVElPTigiUmVuZXNhcyBSLUNh
ciBDTU0gRHJpdmVyIik7Cj4gK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsKPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9jbW0uaCBiL2RyaXZlcnMvZ3B1L2RybS9y
Y2FyLWR1L3JjYXJfY21tLmgKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAwMDAwMDAw
MDAwMC4uMzU4ZWMwM2NmNDhhCj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9yY2FyLWR1L3JjYXJfY21tLmgKPiBAQCAtMCwwICsxLDYwIEBACj4gKy8qIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBHUEwtMi4wKyAqLwo+ICsvKgo+ICsgKiByY2FyX2NtbS5oIC0tIFItQ2Fy
IERpc3BsYXkgVW5pdCBDb2xvciBNYW5hZ2VtZW50IE1vZHVsZQo+ICsgKgo+ICsgKiBDb3B5cmln
aHQgKEMpIDIwMTkgSmFjb3BvIE1vbmRpIDxqYWNvcG8rcmVuZXNhc0BqbW9uZGkub3JnPgo+ICsg
Ki8KPiArCj4gKyNpZm5kZWYgX19SQ0FSX0NNTV9IX18KPiArI2RlZmluZSBfX1JDQVJfQ01NX0hf
Xwo+ICsKPiArI2RlZmluZSBDTTJfTFVUX1NJWkUJCTI1Ngo+ICsKPiArc3RydWN0IGRybV9jb2xv
cl9sdXQ7Cj4gK3N0cnVjdCBwbGF0Zm9ybV9kZXZpY2U7Cj4gKwo+ICsvKioKPiArICogc3RydWN0
IHJjYXJfY21tX2NvbmZpZyAtIENNTSBjb25maWd1cmF0aW9uCj4gKyAqCj4gKyAqIEBsdXQ6CTFE
LUxVVCBjb25maWd1cmF0aW9uCj4gKyAqIEBsdXQuZW5hYmxlOgkxRC1MVVQgZW5hYmxlIGZsYWcK
PiArICogQGx1dC50YWJsZToJMUQtTFVUIHRhYmxlIGVudHJpZXMKPiArICovCj4gK3N0cnVjdCBy
Y2FyX2NtbV9jb25maWcgewo+ICsJc3RydWN0IHsKPiArCQlib29sIGVuYWJsZTsKPiArCQlzdHJ1
Y3QgZHJtX2NvbG9yX2x1dCAqdGFibGU7CgpBcyBlbmFibGUgPT0gdHJ1ZSBpbXBsaWVzIHRhYmxl
ICE9IE5VTEwsIGFuZCBlbmFibGUgPT0gZmFsc2UgaW1wbGllcwp0YWJsZSA9PSBOVUxMLCBjb3Vs
ZCB3ZSBkcm9wIHRoZSBlbmFibGUgZmllbGQgPwoKV2l0aCB0aG9zZSBzbWFsbCBpc3N1ZXMgYWRk
cmVzc2VkLAoKUmV2aWV3ZWQtYnk6IExhdXJlbnQgUGluY2hhcnQgPGxhdXJlbnQucGluY2hhcnRA
aWRlYXNvbmJvYXJkLmNvbT4KCj4gKwl9IGx1dDsKPiArfTsKPiArCj4gKyNpZiBJU19FTkFCTEVE
KENPTkZJR19EUk1fUkNBUl9DTU0pCj4gK2ludCByY2FyX2NtbV9pbml0KHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYpOwo+ICsKPiAraW50IHJjYXJfY21tX2VuYWJsZShzdHJ1Y3QgcGxhdGZv
cm1fZGV2aWNlICpwZGV2KTsKPiArdm9pZCByY2FyX2NtbV9kaXNhYmxlKHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYpOwo+ICsKPiAraW50IHJjYXJfY21tX3NldHVwKHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYsCj4gKwkJICAgY29uc3Qgc3RydWN0IHJjYXJfY21tX2NvbmZpZyAqY29u
ZmlnKTsKPiArI2Vsc2UKPiArc3RhdGljIGlubGluZSBpbnQgcmNhcl9jbW1faW5pdChzdHJ1Y3Qg
cGxhdGZvcm1fZGV2aWNlICpwZGV2KQo+ICt7Cj4gKwlyZXR1cm4gLUVOT0RFVjsKPiArfQo+ICsK
PiArc3RhdGljIGlubGluZSBpbnQgcmNhcl9jbW1fZW5hYmxlKHN0cnVjdCBwbGF0Zm9ybV9kZXZp
Y2UgKnBkZXYpCj4gK3sKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW5saW5lIHZv
aWQgcmNhcl9jbW1fZGlzYWJsZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQo+ICt7Cj4g
K30KPiArCj4gK3N0YXRpYyBpbmxpbmUgaW50IHJjYXJfY21tX3NldHVwKHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYsCj4gKwkJCQkgY29uc3Qgc3RydWN0IHJjYXJfY21tX2NvbmZpZyAqY29u
ZmlnKQo+ICt7Cj4gKwlyZXR1cm4gMDsKPiArfQo+ICsjZW5kaWYgLyogSVNfRU5BQkxFRChDT05G
SUdfRFJNX1JDQVJfQ01NKSAqLwo+ICsKPiArI2VuZGlmIC8qIF9fUkNBUl9DTU1fSF9fICovCgot
LSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hhcnQKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vZHJpLWRldmVs
