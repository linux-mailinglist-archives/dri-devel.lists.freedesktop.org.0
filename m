Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 483A01103A5
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 18:37:31 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 315826EA3A;
	Tue,  3 Dec 2019 17:37:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yb1-xb41.google.com (mail-yb1-xb41.google.com
 [IPv6:2607:f8b0:4864:20::b41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 35C366EA47
 for <dri-devel@lists.freedesktop.org>; Tue,  3 Dec 2019 17:37:25 +0000 (UTC)
Received: by mail-yb1-xb41.google.com with SMTP id g38so1837147ybe.11
 for <dri-devel@lists.freedesktop.org>; Tue, 03 Dec 2019 09:37:25 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=sF65Xbx4lIUFf1KfjPlqrzhPYP6KtmBXkWJnLLZAKc0=;
 b=XiUCyUDjg2FbyoKJmXva7RaduZvAn5rxc5mHRPzzT+ZjWt0ZFsD9l1u07PsY2fY/5a
 jot9/sOr/1KZiomX5nsm0Z84FaVq4hX6GGYeQd2ByNp5ZB/vbGTzyiWJjB4OcBRsEDXc
 nLl8woNQInd62K+T5thgoCuQ9zBJrtq76pos5v/Uwueg2PGgBNsFn0KAFLN2l7ozz59e
 tTgeaAHMQrNecOlEI5ZcWeQ5r+FFaXKNN4iPlggI0nGuhl24qvjFU32p6p342L7ZmzLJ
 XuMisTuv2IA7DqBHud8J+Cdxxy1bwSGI17NVjsxC0b9VSGZsrQxaWl/uEpqFtfEuodn4
 u6Ag==
X-Gm-Message-State: APjAAAU2iAKioTlHBvcRW8tRKJlvFL/PJ+ELxXTd1YHjG+zsTBleJ8su
 lCeu2drfXVCoyMR4+BQCWhbvACmaMih1iw==
X-Google-Smtp-Source: APXvYqyBynH6e1PuP8PuZfyAAY04IGTC0v8W0iV4y9eUxGMCxGQByzK1hpLvFFQ9Xa92ENx+TVxbiw==
X-Received: by 2002:a25:ca17:: with SMTP id a23mr5415858ybg.385.1575394644026; 
 Tue, 03 Dec 2019 09:37:24 -0800 (PST)
Received: from rosewood.cam.corp.google.com
 ([2620:0:1013:11:89c6:2139:5435:371d])
 by smtp.gmail.com with ESMTPSA id g190sm1729426ywf.41.2019.12.03.09.37.23
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 03 Dec 2019 09:37:23 -0800 (PST)
From: Sean Paul <sean@poorly.run>
To: dri-devel@lists.freedesktop.org, intel-gfx@lists.freedesktop.org,
 ramalingm.c@intel.com
Subject: [PATCH 06/11] drm/i915: Factor out hdcp->value assignments
Date: Tue,  3 Dec 2019 12:36:29 -0500
Message-Id: <20191203173638.94919-7-sean@poorly.run>
X-Mailer: git-send-email 2.24.0.393.g34dc348eaf-goog
In-Reply-To: <20191203173638.94919-1-sean@poorly.run>
References: <20191203173638.94919-1-sean@poorly.run>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=poorly.run; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=sF65Xbx4lIUFf1KfjPlqrzhPYP6KtmBXkWJnLLZAKc0=;
 b=LctP0hgmFBVY1cZxXLh38Y9PyFp1OGmHbFwdwwbqoEwb5qvYqkzNJe+G6fzSKX6rOR
 TTvWDRbwiavkGsZzeKC9Jrenmb9BaddIGE5bBIc6G5OhPWeZINU2DV5zt/a2x+9pBPjY
 pcrGWVnMz+Ya/In/4RtVhYmVDa7QMmP9g10blZwjBoR0q4DWBHYD/FW5NxJut4pDkj/J
 yO2eAtZypRUXwnLWDWfT8tN08fKU9eut/G5G58s0IGDyPNPFzAzKVg6iSPe26pfBm0Vh
 QVYczZfj5T/wp7qFE+HXFqPv7nRhCw+SvVJqYRfZUhz3yVkI/gZGDyyQ4rl6VJ21KWCJ
 y3ig==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, Sean Paul <seanpaul@chromium.org>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogU2VhbiBQYXVsIDxzZWFucGF1bEBjaHJvbWl1bS5vcmc+CgpUaGlzIGlzIGEgYml0IG9m
IGhvdXNlY2xlYW5pbmcgZm9yIGEgZnV0dXJlIHBhdGNoLiBJbnN0ZWFkIG9mIHNwcmlua2xpbmcK
aGRjcC0+dmFsdWUgYXNzaWdubWVudHMgYW5kIHByb3Bfd29yayBzY2hlZHVsaW5nIGV2ZXJ5d2hl
cmUsIGludHJvZHVjZSBhCmZ1bmN0aW9uIHRvIGRvIGl0IGZvciB1cy4KClNpZ25lZC1vZmYtYnk6
IFNlYW4gUGF1bCA8c2VhbnBhdWxAY2hyb21pdW0ub3JnPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jIHwgNjcgKysrKysrKysrKysrKysrKy0tLS0tLS0KIDEg
ZmlsZSBjaGFuZ2VkLCA0NiBpbnNlcnRpb25zKCspLCAyMSBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkY3AuYyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jCmluZGV4IDA5NjZhOGVjNDdkMi4uZjM0
NzYzZmE1YjQyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2hkY3AuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkY3AuYwpA
QCAtODQ2LDYgKzg0NiwyMSBAQCBzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICppbnRlbF9oZGNwX3Rv
X2Nvbm5lY3RvcihzdHJ1Y3QgaW50ZWxfaGRjcCAqaGRjcCkKIAlyZXR1cm4gY29udGFpbmVyX29m
KGhkY3AsIHN0cnVjdCBpbnRlbF9jb25uZWN0b3IsIGhkY3ApOwogfQogCitzdGF0aWMgdm9pZCBp
bnRlbF9oZGNwX3VwZGF0ZV92YWx1ZShzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3Is
CisJCQkJICAgIHU2NCB2YWx1ZSwgYm9vbCB1cGRhdGVfcHJvcGVydHkpCit7CisJc3RydWN0IGlu
dGVsX2hkY3AgKmhkY3AgPSAmY29ubmVjdG9yLT5oZGNwOworCisJV0FSTl9PTighbXV0ZXhfaXNf
bG9ja2VkKCZoZGNwLT5tdXRleCkpOworCisJaWYgKGhkY3AtPnZhbHVlID09IHZhbHVlKQorCQly
ZXR1cm47CisKKwloZGNwLT52YWx1ZSA9IHZhbHVlOworCWlmICh1cGRhdGVfcHJvcGVydHkpCisJ
CXNjaGVkdWxlX3dvcmsoJmhkY3AtPnByb3Bfd29yayk7Cit9CisKIC8qIEltcGxlbWVudHMgUGFy
dCAzIG9mIHRoZSBIRENQIGF1dGhvcml6YXRpb24gcHJvY2VkdXJlICovCiBzdGF0aWMgaW50IGlu
dGVsX2hkY3BfY2hlY2tfbGluayhzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IpCiB7
CkBAIC04NzIsMTUgKzg4NywxNiBAQCBzdGF0aWMgaW50IGludGVsX2hkY3BfY2hlY2tfbGluayhz
dHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IpCiAJCQkgIEk5MTVfUkVBRChIRENQX1NU
QVRVUyhkZXZfcHJpdiwgY3B1X3RyYW5zY29kZXIsCiAJCQkJCQlwb3J0KSkpOwogCQlyZXQgPSAt
RU5YSU87Ci0JCWhkY3AtPnZhbHVlID0gRFJNX01PREVfQ09OVEVOVF9QUk9URUNUSU9OX0RFU0lS
RUQ7Ci0JCXNjaGVkdWxlX3dvcmsoJmhkY3AtPnByb3Bfd29yayk7CisJCWludGVsX2hkY3BfdXBk
YXRlX3ZhbHVlKGNvbm5lY3RvciwKKwkJCQkJRFJNX01PREVfQ09OVEVOVF9QUk9URUNUSU9OX0RF
U0lSRUQsCisJCQkJCXRydWUpOwogCQlnb3RvIG91dDsKIAl9CiAKIAlpZiAoaGRjcC0+c2hpbS0+
Y2hlY2tfbGluayhpbnRlbF9kaWdfcG9ydCkpIHsKIAkJaWYgKGhkY3AtPnZhbHVlICE9IERSTV9N
T0RFX0NPTlRFTlRfUFJPVEVDVElPTl9VTkRFU0lSRUQpIHsKLQkJCWhkY3AtPnZhbHVlID0gRFJN
X01PREVfQ09OVEVOVF9QUk9URUNUSU9OX0VOQUJMRUQ7Ci0JCQlzY2hlZHVsZV93b3JrKCZoZGNw
LT5wcm9wX3dvcmspOworCQkJaW50ZWxfaGRjcF91cGRhdGVfdmFsdWUoY29ubmVjdG9yLAorCQkJ
CURSTV9NT0RFX0NPTlRFTlRfUFJPVEVDVElPTl9FTkFCTEVELCB0cnVlKTsKIAkJfQogCQlnb3Rv
IG91dDsKIAl9CkBAIC04OTEsMTYgKzkwNywxOCBAQCBzdGF0aWMgaW50IGludGVsX2hkY3BfY2hl
Y2tfbGluayhzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IpCiAJcmV0ID0gX2ludGVs
X2hkY3BfZGlzYWJsZShjb25uZWN0b3IpOwogCWlmIChyZXQpIHsKIAkJRFJNX0VSUk9SKCJGYWls
ZWQgdG8gZGlzYWJsZSBoZGNwICglZClcbiIsIHJldCk7Ci0JCWhkY3AtPnZhbHVlID0gRFJNX01P
REVfQ09OVEVOVF9QUk9URUNUSU9OX0RFU0lSRUQ7Ci0JCXNjaGVkdWxlX3dvcmsoJmhkY3AtPnBy
b3Bfd29yayk7CisJCWludGVsX2hkY3BfdXBkYXRlX3ZhbHVlKGNvbm5lY3RvciwKKwkJCQkJRFJN
X01PREVfQ09OVEVOVF9QUk9URUNUSU9OX0RFU0lSRUQsCisJCQkJCXRydWUpOwogCQlnb3RvIG91
dDsKIAl9CiAKIAlyZXQgPSBfaW50ZWxfaGRjcF9lbmFibGUoY29ubmVjdG9yKTsKIAlpZiAocmV0
KSB7CiAJCURSTV9FUlJPUigiRmFpbGVkIHRvIGVuYWJsZSBoZGNwICglZClcbiIsIHJldCk7Ci0J
CWhkY3AtPnZhbHVlID0gRFJNX01PREVfQ09OVEVOVF9QUk9URUNUSU9OX0RFU0lSRUQ7Ci0JCXNj
aGVkdWxlX3dvcmsoJmhkY3AtPnByb3Bfd29yayk7CisJCWludGVsX2hkY3BfdXBkYXRlX3ZhbHVl
KGNvbm5lY3RvciwKKwkJCQkJRFJNX01PREVfQ09OVEVOVF9QUk9URUNUSU9OX0RFU0lSRUQsCisJ
CQkJCXRydWUpOwogCQlnb3RvIG91dDsKIAl9CiAKQEAgLTE3MDYsMTYgKzE3MjQsMTggQEAgc3Rh
dGljIGludCBpbnRlbF9oZGNwMl9jaGVja19saW5rKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNv
bm5lY3RvcikKIAkJCSAgSTkxNV9SRUFEKEhEQ1AyX1NUQVRVUyhkZXZfcHJpdiwgY3B1X3RyYW5z
Y29kZXIsCiAJCQkJCQkgcG9ydCkpKTsKIAkJcmV0ID0gLUVOWElPOwotCQloZGNwLT52YWx1ZSA9
IERSTV9NT0RFX0NPTlRFTlRfUFJPVEVDVElPTl9ERVNJUkVEOwotCQlzY2hlZHVsZV93b3JrKCZo
ZGNwLT5wcm9wX3dvcmspOworCQlpbnRlbF9oZGNwX3VwZGF0ZV92YWx1ZShjb25uZWN0b3IsCisJ
CQkJCURSTV9NT0RFX0NPTlRFTlRfUFJPVEVDVElPTl9ERVNJUkVELAorCQkJCQl0cnVlKTsKIAkJ
Z290byBvdXQ7CiAJfQogCiAJcmV0ID0gaGRjcC0+c2hpbS0+Y2hlY2tfMl8yX2xpbmsoaW50ZWxf
ZGlnX3BvcnQpOwogCWlmIChyZXQgPT0gSERDUF9MSU5LX1BST1RFQ1RFRCkgewogCQlpZiAoaGRj
cC0+dmFsdWUgIT0gRFJNX01PREVfQ09OVEVOVF9QUk9URUNUSU9OX1VOREVTSVJFRCkgewotCQkJ
aGRjcC0+dmFsdWUgPSBEUk1fTU9ERV9DT05URU5UX1BST1RFQ1RJT05fRU5BQkxFRDsKLQkJCXNj
aGVkdWxlX3dvcmsoJmhkY3AtPnByb3Bfd29yayk7CisJCQlpbnRlbF9oZGNwX3VwZGF0ZV92YWx1
ZShjb25uZWN0b3IsCisJCQkJCURSTV9NT0RFX0NPTlRFTlRfUFJPVEVDVElPTl9FTkFCTEVELAor
CQkJCQl0cnVlKTsKIAkJfQogCQlnb3RvIG91dDsKIAl9CkBAIC0xNzI3LDggKzE3NDcsOSBAQCBz
dGF0aWMgaW50IGludGVsX2hkY3AyX2NoZWNrX2xpbmsoc3RydWN0IGludGVsX2Nvbm5lY3RvciAq
Y29ubmVjdG9yKQogCQlEUk1fREVCVUdfS01TKCJIRENQMi4yIERvd25zdHJlYW0gdG9wb2xvZ3kg
Y2hhbmdlXG4iKTsKIAkJcmV0ID0gaGRjcDJfYXV0aGVudGljYXRlX3JlcGVhdGVyX3RvcG9sb2d5
KGNvbm5lY3Rvcik7CiAJCWlmICghcmV0KSB7Ci0JCQloZGNwLT52YWx1ZSA9IERSTV9NT0RFX0NP
TlRFTlRfUFJPVEVDVElPTl9FTkFCTEVEOwotCQkJc2NoZWR1bGVfd29yaygmaGRjcC0+cHJvcF93
b3JrKTsKKwkJCWludGVsX2hkY3BfdXBkYXRlX3ZhbHVlKGNvbm5lY3RvciwKKwkJCQkJRFJNX01P
REVfQ09OVEVOVF9QUk9URUNUSU9OX0VOQUJMRUQsCisJCQkJCXRydWUpOwogCQkJZ290byBvdXQ7
CiAJCX0KIAkJRFJNX0RFQlVHX0tNUygiWyVzOiVkXSBSZXBlYXRlciB0b3BvbG9neSBhdXRoIGZh
aWxlZC4oJWQpXG4iLApAQCAtMTc0Myw4ICsxNzY0LDggQEAgc3RhdGljIGludCBpbnRlbF9oZGNw
Ml9jaGVja19saW5rKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAlpZiAocmV0
KSB7CiAJCURSTV9FUlJPUigiWyVzOiVkXSBGYWlsZWQgdG8gZGlzYWJsZSBoZGNwMi4yICglZClc
biIsCiAJCQkgIGNvbm5lY3Rvci0+YmFzZS5uYW1lLCBjb25uZWN0b3ItPmJhc2UuYmFzZS5pZCwg
cmV0KTsKLQkJaGRjcC0+dmFsdWUgPSBEUk1fTU9ERV9DT05URU5UX1BST1RFQ1RJT05fREVTSVJF
RDsKLQkJc2NoZWR1bGVfd29yaygmaGRjcC0+cHJvcF93b3JrKTsKKwkJaW50ZWxfaGRjcF91cGRh
dGVfdmFsdWUoY29ubmVjdG9yLAorCQkJCURSTV9NT0RFX0NPTlRFTlRfUFJPVEVDVElPTl9ERVNJ
UkVELCB0cnVlKTsKIAkJZ290byBvdXQ7CiAJfQogCkBAIC0xNzUzLDggKzE3NzQsOSBAQCBzdGF0
aWMgaW50IGludGVsX2hkY3AyX2NoZWNrX2xpbmsoc3RydWN0IGludGVsX2Nvbm5lY3RvciAqY29u
bmVjdG9yKQogCQlEUk1fREVCVUdfS01TKCJbJXM6JWRdIEZhaWxlZCB0byBlbmFibGUgaGRjcDIu
MiAoJWQpXG4iLAogCQkJICAgICAgY29ubmVjdG9yLT5iYXNlLm5hbWUsIGNvbm5lY3Rvci0+YmFz
ZS5iYXNlLmlkLAogCQkJICAgICAgcmV0KTsKLQkJaGRjcC0+dmFsdWUgPSBEUk1fTU9ERV9DT05U
RU5UX1BST1RFQ1RJT05fREVTSVJFRDsKLQkJc2NoZWR1bGVfd29yaygmaGRjcC0+cHJvcF93b3Jr
KTsKKwkJaW50ZWxfaGRjcF91cGRhdGVfdmFsdWUoY29ubmVjdG9yLAorCQkJCQlEUk1fTU9ERV9D
T05URU5UX1BST1RFQ1RJT05fREVTSVJFRCwKKwkJCQkJdHJ1ZSk7CiAJCWdvdG8gb3V0OwogCX0K
IApAQCAtMjAwNCw4ICsyMDI2LDkgQEAgaW50IGludGVsX2hkY3BfZW5hYmxlKHN0cnVjdCBpbnRl
bF9jb25uZWN0b3IgKmNvbm5lY3RvciwgdTggY29udGVudF90eXBlKQogCiAJaWYgKCFyZXQpIHsK
IAkJc2NoZWR1bGVfZGVsYXllZF93b3JrKCZoZGNwLT5jaGVja193b3JrLCBjaGVja19saW5rX2lu
dGVydmFsKTsKLQkJaGRjcC0+dmFsdWUgPSBEUk1fTU9ERV9DT05URU5UX1BST1RFQ1RJT05fRU5B
QkxFRDsKLQkJc2NoZWR1bGVfd29yaygmaGRjcC0+cHJvcF93b3JrKTsKKwkJaW50ZWxfaGRjcF91
cGRhdGVfdmFsdWUoY29ubmVjdG9yLAorCQkJCQlEUk1fTU9ERV9DT05URU5UX1BST1RFQ1RJT05f
RU5BQkxFRCwKKwkJCQkJdHJ1ZSk7CiAJfQogCiAJbXV0ZXhfdW5sb2NrKCZoZGNwLT5tdXRleCk7
CkBAIC0yMDIzLDcgKzIwNDYsOSBAQCBpbnQgaW50ZWxfaGRjcF9kaXNhYmxlKHN0cnVjdCBpbnRl
bF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAltdXRleF9sb2NrKCZoZGNwLT5tdXRleCk7CiAKIAlp
ZiAoaGRjcC0+dmFsdWUgIT0gRFJNX01PREVfQ09OVEVOVF9QUk9URUNUSU9OX1VOREVTSVJFRCkg
ewotCQloZGNwLT52YWx1ZSA9IERSTV9NT0RFX0NPTlRFTlRfUFJPVEVDVElPTl9VTkRFU0lSRUQ7
CisJCWludGVsX2hkY3BfdXBkYXRlX3ZhbHVlKGNvbm5lY3RvciwKKwkJCQkJRFJNX01PREVfQ09O
VEVOVF9QUk9URUNUSU9OX1VOREVTSVJFRCwKKwkJCQkJZmFsc2UpOwogCQlpZiAoaGRjcC0+aGRj
cDJfZW5jcnlwdGVkKQogCQkJcmV0ID0gX2ludGVsX2hkY3AyX2Rpc2FibGUoY29ubmVjdG9yKTsK
IAkJZWxzZSBpZiAoaGRjcC0+aGRjcF9lbmNyeXB0ZWQpCi0tIApTZWFuIFBhdWwsIFNvZnR3YXJl
IEVuZ2luZWVyLCBHb29nbGUgLyBDaHJvbWl1bSBPUwoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vZHJpLWRldmVs
