Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DA026FF91C
	for <lists+dri-devel@lfdr.de>; Sun, 17 Nov 2019 12:46:08 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A4A7F6E321;
	Sun, 17 Nov 2019 11:44:55 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 30F796E16B
 for <dri-devel@lists.freedesktop.org>; Sun, 17 Nov 2019 02:41:44 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1]) (Authenticated sender: sre)
 with ESMTPSA id E76DA28F73E
Received: by earth.universe (Postfix, from userid 1000)
 id 9B01F3C0C7C; Sun, 17 Nov 2019 03:41:39 +0100 (CET)
From: Sebastian Reichel <sebastian.reichel@collabora.com>
To: Sebastian Reichel <sre@kernel.org>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>
Subject: [RFCv1 04/42] drm/omap: dsi: add generic transfer function
Date: Sun, 17 Nov 2019 03:39:50 +0100
Message-Id: <20191117024028.2233-5-sebastian.reichel@collabora.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191117024028.2233-1-sebastian.reichel@collabora.com>
References: <20191117024028.2233-1-sebastian.reichel@collabora.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Sun, 17 Nov 2019 11:44:18 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: kernel@collabora.com, Tony Lindgren <tony@atomide.com>,
 "H. Nikolaus Schaller" <hns@goldelico.com>, Merlijn Wajer <merlijn@wizzup.org>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 dri-devel@lists.freedesktop.org, linux-omap@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwcmVwYXJlcyB0aGUgZHJpdmVyIGZvciBiZWNvbWluZyBhIG1pcGlfZHNpX2hvc3QgaW1w
bGVtZW50YXRpb24sCndoaWNoIHByb3ZpZGVzIGEgZ2VuZXJpYyB0cmFuc2ZlciBmdW5jdGlvbiBp
bnN0ZWFkIG9mIGFsbCBraW5kIG9mCmRpZmZlcmVudCByZWFkL3dyaXRlIGZ1bmN0aW9ucy4gVGhl
IGltcGxlbWVudGF0aW9uIHdpbGwgYmVjb21lIG1vcmUKZWxlZ2FudCBhZnRlciB1bmV4cG9ydGlu
ZyB0aGUgc3BlY2lmaWMgZnVuY3Rpb25zIGluIHRoZSBmb2xsb3dpbmcKcGF0Y2hlcy4KClNpZ25l
ZC1vZmYtYnk6IFNlYmFzdGlhbiBSZWljaGVsIDxzZWJhc3RpYW4ucmVpY2hlbEBjb2xsYWJvcmEu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9kc2kuYyAgICAgfCA1MiArKysr
KysrKysrKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFw
ZHNzLmggfCAgMyArKwogMiBmaWxlcyBjaGFuZ2VkLCA1NSBpbnNlcnRpb25zKCspCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2RzaS5jIGIvZHJpdmVycy9ncHUvZHJt
L29tYXBkcm0vZHNzL2RzaS5jCmluZGV4IGJmNjEzMWU1ZmExNC4uNzU2MDQxMWY4ZWQ2IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvZHNpLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL29tYXBkcm0vZHNzL2RzaS5jCkBAIC00ODM2LDYgKzQ4MzYsNTYgQEAgc3RhdGljIHZv
aWQgZHNpX3JlbGVhc2VfdmMoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hh
bm5lbCkKIAl9CiB9CiAKK3N0YXRpYyBzc2l6ZV90IG9tYXBfZHNpX3RyYW5zZmVyKHN0cnVjdCBv
bWFwX2Rzc19kZXZpY2UgKmRzc2RldiwKKwkJCQkgY29uc3Qgc3RydWN0IG1pcGlfZHNpX21zZyAq
bXNnKQoreworCS8qCisJICogbm9fc3luYyBjYW4gYmUgdXNlZCB0byBvcHRpbWl6ZSBwZXJmb3Jt
YW5jZSBieSBzZW5kaW5nCisJICogZS5nLiBjb2x1bW4gYW5kIHBhZ2UgaW5mb3JtYXRpb24gd2l0
aG91dCBzeW5jaW5nIGluCisJICogYmV0d2Vlbi4gSXQncyBub3QgYWJzb2x1dGxleSByZXF1aXJl
ZCwgc28gcG9zdHBvbmUgdGhpcworCSAqIGZlYXR1cmUgZm9yIG5vdy4KKwkgKi8KKwlib29sIG5v
X3N5bmMgPSBmYWxzZTsKKwl1MTYgdmFsOworCisJc3dpdGNoIChtc2ctPnR5cGUpIHsKKwljYXNl
IE1JUElfRFNJX0dFTkVSSUNfU0hPUlRfV1JJVEVfMF9QQVJBTToKKwljYXNlIE1JUElfRFNJX0dF
TkVSSUNfU0hPUlRfV1JJVEVfMV9QQVJBTToKKwljYXNlIE1JUElfRFNJX0dFTkVSSUNfU0hPUlRf
V1JJVEVfMl9QQVJBTToKKwljYXNlIE1JUElfRFNJX0dFTkVSSUNfTE9OR19XUklURToKKwkJaWYg
KG5vX3N5bmMpCisJCQlyZXR1cm4gZHNpX3ZjX2dlbmVyaWNfd3JpdGVfbm9zeW5jKGRzc2Rldiwg
bXNnLT5jaGFubmVsLAorCQkJCSAgICAgICAgICAgICAgICAgICAgICBtc2ctPnR4X2J1ZiwgbXNn
LT50eF9sZW4pOworCQllbHNlCisJCQlyZXR1cm4gZHNpX3ZjX2dlbmVyaWNfd3JpdGUoZHNzZGV2
LCBtc2ctPmNoYW5uZWwsCisJCQkJCQkgICAgbXNnLT50eF9idWYsIG1zZy0+dHhfbGVuKTsKKwlj
YXNlIE1JUElfRFNJX0RDU19TSE9SVF9XUklURToKKwljYXNlIE1JUElfRFNJX0RDU19TSE9SVF9X
UklURV9QQVJBTToKKwljYXNlIE1JUElfRFNJX0RDU19MT05HX1dSSVRFOgorCQlpZiAobm9fc3lu
YykKKwkJCXJldHVybiBkc2lfdmNfZGNzX3dyaXRlX25vc3luYyhkc3NkZXYsIG1zZy0+Y2hhbm5l
bCwKKwkJCQkJCSAgICAgIG1zZy0+dHhfYnVmLCBtc2ctPnR4X2xlbik7CisJCWVsc2UKKwkJCXJl
dHVybiBkc2lfdmNfZGNzX3dyaXRlKGRzc2RldiwgbXNnLT5jaGFubmVsLAorCQkJCQkJbXNnLT50
eF9idWYsIG1zZy0+dHhfbGVuKTsKKwljYXNlIE1JUElfRFNJX0dFTkVSSUNfUkVBRF9SRVFVRVNU
XzBfUEFSQU06CisJY2FzZSBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8xX1BBUkFNOgor
CWNhc2UgTUlQSV9EU0lfR0VORVJJQ19SRUFEX1JFUVVFU1RfMl9QQVJBTToKKwkJcmV0dXJuIGRz
aV92Y19nZW5lcmljX3JlYWQoZHNzZGV2LCBtc2ctPmNoYW5uZWwsIG1zZy0+dHhfYnVmLAorCQkJ
CW1zZy0+dHhfbGVuLCBtc2ctPnJ4X2J1ZiwgbXNnLT5yeF9sZW4pOworCWNhc2UgTUlQSV9EU0lf
RENTX1JFQUQ6CisJCXJldHVybiBkc2lfdmNfZGNzX3JlYWQoZHNzZGV2LCBtc2ctPmNoYW5uZWws
CisJCQkJKCh1OCopIG1zZy0+dHhfYnVmKVswXSwKKwkJCQltc2ctPnJ4X2J1ZiwgbXNnLT5yeF9s
ZW4pOworCWNhc2UgTUlQSV9EU0lfU0VUX01BWElNVU1fUkVUVVJOX1BBQ0tFVF9TSVpFOgorCQl2
YWwgPSBsZTE2X3RvX2NwdSgqKChfX2xlMTYqKSBtc2ctPnR4X2J1ZikpOworCQlyZXR1cm4gZHNp
X3ZjX3NldF9tYXhfcnhfcGFja2V0X3NpemUoZHNzZGV2LCBtc2ctPmNoYW5uZWwsIHZhbCk7CisJ
Y2FzZSBNSVBJX0RTSV9OVUxMX1BBQ0tFVDoKKwkJcmV0dXJuIGRzaV92Y19zZW5kX251bGwodG9f
ZHNpX2RhdGEoZHNzZGV2KSwgbXNnLT5jaGFubmVsKTsKKwl9CisKKwlyZXR1cm4gLUVJTlZBTDsK
K30KIAogc3RhdGljIGludCBkc2lfZ2V0X2Nsb2NrcyhzdHJ1Y3QgZHNpX2RhdGEgKmRzaSkKIHsK
QEAgLTQ4OTAsNiArNDk0MCw4IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNl
X29wcyBkc2lfb3BzID0gewogCQkuc2V0X3ZjX2lkID0gZHNpX3NldF92Y19pZCwKIAkJLnJlbGVh
c2VfdmMgPSBkc2lfcmVsZWFzZV92YywKIAorCQkudHJhbnNmZXIgPSBvbWFwX2RzaV90cmFuc2Zl
ciwKKwogCQkuZGNzX3dyaXRlID0gZHNpX3ZjX2Rjc193cml0ZSwKIAkJLmRjc193cml0ZV9ub3N5
bmMgPSBkc2lfdmNfZGNzX3dyaXRlX25vc3luYywKIAkJLmRjc19yZWFkID0gZHNpX3ZjX2Rjc19y
ZWFkLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL29tYXBkc3MuaCBi
L2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLmgKaW5kZXggYWUxYTQ2MDBkYWIy
Li4wNDk1MmMyOTE1MzcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9v
bWFwZHNzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL29tYXBkc3MuaApAQCAt
MzE0LDYgKzMxNCw5IEBAIHN0cnVjdCBvbWFwZHNzX2RzaV9vcHMgewogCXZvaWQgKCpyZWxlYXNl
X3ZjKShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsIGludCBjaGFubmVsKTsKIAogCS8q
IGRhdGEgdHJhbnNmZXIgKi8KKwlzc2l6ZV90ICgqdHJhbnNmZXIpKHN0cnVjdCBvbWFwX2Rzc19k
ZXZpY2UgKmRzc2RldiwKKwkJCWNvbnN0IHN0cnVjdCBtaXBpX2RzaV9tc2cgKm1zZyk7CisKIAlp
bnQgKCpkY3Nfd3JpdGUpKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwgaW50IGNoYW5u
ZWwsCiAJCQljb25zdCB1OCAqZGF0YSwgaW50IGxlbik7CiAJaW50ICgqZGNzX3dyaXRlX25vc3lu
Yykoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCwKLS0gCjIuMjQu
MAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRl
dmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
