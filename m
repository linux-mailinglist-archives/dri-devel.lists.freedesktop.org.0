Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 130B89FD00
	for <lists+dri-devel@lfdr.de>; Wed, 28 Aug 2019 10:29:02 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0367B89CD4;
	Wed, 28 Aug 2019 08:28:58 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd42.google.com (mail-io1-xd42.google.com
 [IPv6:2607:f8b0:4864:20::d42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9C0F289B7B
 for <dri-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 22:55:20 +0000 (UTC)
Received: by mail-io1-xd42.google.com with SMTP id o9so1984299iom.3
 for <dri-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 15:55:20 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=7er0eTutj4rVOW2MiIe7In9I+Fg9Qr6GN7mTUcB8UZ4=;
 b=XmcHH6oVkkRyMIm7Do3Uwng+i+kiFXEnNIJlcCs9AAkFp/IjEYkT9otDvkzDv072V3
 IHTlw/ZlaEtXyUeBwZgR5knaGE/LdBIDfynBDJex7irrM8Um9jprnW8RFL2JjCA27s81
 l1Mg4PV95NTgZ+hX+UhdlcmwmuXvkVruzjgiJutlEMYEI7GEWT2oh6398Shs+E39RHVR
 y+UAVd7mUyg4pVYSuS/90uv/lCsvSwfKxFTbDMCZsvCCJiFJ5U+2mJeKHJfv4N/1nZQt
 EykCC/iBPkK+IOcYxyQYieYNzKsdAIAkYpYqGCPoBoXVVvkUdXnyWAX4sGBY//obOfXs
 IGlA==
X-Gm-Message-State: APjAAAXQkZGZBsuolxxa7NN/3ThmikDdo90etMcqBRUnbJoPynKAE+lc
 RDOWQBCql6JHLcbgMYDTxKQbTzTpj5bScTfrnO4=
X-Google-Smtp-Source: APXvYqz813aGsuf6MJ1Fn/T8lWAwpE3LOsyH8n3oSFEcI+5HgVmO1lKZxlv5KVOKkS6Cupg9Ue4NFOtRvLemmF2hIhM=
X-Received: by 2002:a6b:7009:: with SMTP id l9mr826013ioc.160.1566946519929;
 Tue, 27 Aug 2019 15:55:19 -0700 (PDT)
MIME-Version: 1.0
References: <20190826182524.5064-1-andrew.smirnov@gmail.com>
 <3cc666bd-36f7-c1ca-e369-ee88cd06332c@ti.com>
In-Reply-To: <3cc666bd-36f7-c1ca-e369-ee88cd06332c@ti.com>
From: Andrey Smirnov <andrew.smirnov@gmail.com>
Date: Tue, 27 Aug 2019 15:55:08 -0700
Message-ID: <CAHQ1cqF0fPyLpMxSoobD_E4L5bVauE+3TJp6s6F5R2tBKL0X8w@mail.gmail.com>
Subject: Re: [PATCH] drm/bridge: tc358767: Expose test mode functionality via
 debugfs
To: Tomi Valkeinen <tomi.valkeinen@ti.com>
X-Mailman-Approved-At: Wed, 28 Aug 2019 08:28:09 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=7er0eTutj4rVOW2MiIe7In9I+Fg9Qr6GN7mTUcB8UZ4=;
 b=Qsd9QrGEXIzPW45oXQJkGdcRv23NkknWsoTbnDe2JiRucIJ/JKPeqNYR7f7Loy6WFr
 I+cmC+qWREU075nKLDMoo+A8rcBO8yNFCNsxg6XRj3rI0zTp1uDDMZ5HhNG4ADAMwYsN
 ENU422aKiOPnQJxAuvQzchufElGEBzdMydBQ2HYzUJLNeyoDqNLWPTN839heBrvtd58z
 MI/G+M4hshgjNIN1rrUFu7Wr/UH/PUzSCcaaM8WiwdG3huVy21rbybWeceGgV2c+/2A6
 B3QgivZmxuWAiryDBxBY/h+eU5RqFf7NXu55ejW8HPNW4IUflb0oP1OwtBB6rkECfdZS
 mCtA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Cory Tusar <cory.tusar@zii.aero>,
 linux-kernel <linux-kernel@vger.kernel.org>, dri-devel@lists.freedesktop.org,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Chris Healy <cphealy@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gTW9uLCBBdWcgMjYsIDIwMTkgYXQgMTA6NDYgUE0gVG9taSBWYWxrZWluZW4gPHRvbWkudmFs
a2VpbmVuQHRpLmNvbT4gd3JvdGU6Cj4KPiBIaSwKPgo+IE9uIDI2LzA4LzIwMTkgMjE6MjUsIEFu
ZHJleSBTbWlybm92IHdyb3RlOgo+ID4gUHJlc2VudGx5LCB0aGUgZHJpdmVyIGNvZGUgYXJ0aWZp
Y2lhbGx5IGxpbWl0cyB0ZXN0IHBhdHRlcm4gbW9kZSB0byBhCj4gPiBzaW5nbGUgcGF0dGVybiB3
aXRoIGZpeGVkIGNvbG9yIHNlbGVjdGlvbi4gSXQgYmVpbmcgYSBrZXJuZWwgbW9kdWxlCj4gPiBw
YXJhbWV0ZXIgbWFrZXMgc3dpdGNoaW5nICJ0ZXN0IHBhdHRlciIgPC0+ICJwcm9wZXIgb3V0cHV0
IiBtb2Rlcwo+ID4gb24tdGhlLWZseSBjbHVua3kgYW5kIG91dHJpZ2h0IGltcG9zc2libGUgaWYg
dGhlIGRyaXZlciBpcyBidWlsdCBpbnRvCj4gPiB0aGUga2VybmVsLgo+ID4KPiA+IFRvIGltcHJv
dmUgdGhlIHNpdHVhdGlvbiBhIGJpdCwgY29udmVydCBjdXJyZW50IHRlc3QgcGF0dGVybiBjb2Rl
IHRvCj4gPiB1c2UgZGVidWdmcyBpbnN0ZWFkIGJ5IGV4cG9zaW5nICJUZXN0Q3RsIiByZWdpc3Rl
ci4gVGhpcyB3YXkgb2xkCj4gPiAidGNfdGVzdF9wYXR0ZXJuPTEiIGZ1bmN0aW9uYWxpdHkgY2Fu
IGJlIGVtdWxhdGVkIHZpYToKPiA+Cj4gPiAgICAgIGVjaG8gLW4gMHg3ODE0NjMxMiA+IHRzdGN0
bAo+ID4KPiA+IGFuZCBzd2l0Y2ggYmFjayB0byByZWd1bGFyIG1vZGUgY2FuIGJlIGRvbmUgd2l0
aDoKPiA+Cj4gPiAgICAgIGVjaG8gLW4gMHg3ODE0NjMxMCA+IHRzdGN0bAo+Cj4gSXQgbWlnaHQg
YmUgd29ydGggZXhwbGFpbmluZyB0aGUgZm9ybWF0IGluIHRoZSBjb21taXQgbXNnIG9yIGluIGEK
PiBjb21tZW50IGluIHRoZSBkcml2ZXIuCj4KCkdvb2QgcG9pbnQuIFdpbGwgZG8gaWYgdGhpcyBp
cyB0aGUgZm9ybWF0IGdvaW5nIGZvcndhcmQuCgo+ID4gTm90ZSB0aGF0IHN3aXRjaGluZyB0byBh
bnkgb2YgdGhlIHRlc3QgcGF0dGVybnMsIHdpbGwgTk9UIHRyaWdnZXIgbGluawo+ID4gcmUtZXN0
YWJsaXNobWVudCB3aGVyZWFzIHN3aXRjaGluZyB0byBub3JtYWwgb3BlcmF0aW9uIFdJTEwuIFRo
aXMgaXMKPiA+IGRvbmUgc286Cj4gPgo+ID4gYSkgd2UgY2FuIGlzb2xhdGUgYW5kIHZlcmlmeSAo
ZSlEUCBsaW5rIGZ1bmN0aW9uYWxpdHkgYnkgc3dpdGNoaW5nIHRvCj4gPiAgICAgb25lIG9mIHRo
ZSB0ZXN0IHBhdHRlcnMKPiA+Cj4gPiBiKSB0cmlnZ2VyIGEgbGluayByZS1lc3RhYmxpc2htZW50
IGJ5IHN3aXRjaGluZyBiYWNrIHRvIG5vcm1hbCBtb2RlCj4gPgo+ID4gU2lnbmVkLW9mZi1ieTog
QW5kcmV5IFNtaXJub3YgPGFuZHJldy5zbWlybm92QGdtYWlsLmNvbT4KPiA+IENjOiBBbmRyemVq
IEhhamRhIDxhLmhhamRhQHNhbXN1bmcuY29tPgo+ID4gQ2M6IExhdXJlbnQgUGluY2hhcnQgPExh
dXJlbnQucGluY2hhcnRAaWRlYXNvbmJvYXJkLmNvbT4KPiA+IENjOiBUb21pIFZhbGtlaW5lbiA8
dG9taS52YWxrZWluZW5AdGkuY29tPgo+ID4gQ2M6IENvcnkgVHVzYXIgPGNvcnkudHVzYXJAemlp
LmFlcm8+Cj4gPiBDYzogQ2hyaXMgSGVhbHkgPGNwaGVhbHlAZ21haWwuY29tPgo+ID4gQ2M6IEx1
Y2FzIFN0YWNoIDxsLnN0YWNoQHBlbmd1dHJvbml4LmRlPgo+ID4gQ2M6IGRyaS1kZXZlbEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKPiA+IENjOiBsaW51eC1rZXJuZWxAdmdlci5rZXJuZWwub3JnCj4g
PiAtLS0KPiA+ICAgZHJpdmVycy9ncHUvZHJtL2JyaWRnZS90YzM1ODc2Ny5jIHwgMTM3ICsrKysr
KysrKysrKysrKysrKysrKystLS0tLS0tLQo+ID4gICAxIGZpbGUgY2hhbmdlZCwgMTAxIGluc2Vy
dGlvbnMoKyksIDM2IGRlbGV0aW9ucygtKQo+ID4KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYnJpZGdlL3RjMzU4NzY3LmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY3
LmMKPiA+IGluZGV4IDYzMDhkOTNhZDkxZC4uN2E3OTViNjEzZWQwIDEwMDY0NAo+ID4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS90YzM1ODc2Ny5jCj4gPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vYnJpZGdlL3RjMzU4NzY3LmMKPiA+IEBAIC0xNyw2ICsxNyw3IEBACj4gPgo+ID4gICAjaW5j
bHVkZSA8bGludXgvYml0ZmllbGQuaD4KPiA+ICAgI2luY2x1ZGUgPGxpbnV4L2Nsay5oPgo+ID4g
KyNpbmNsdWRlIDxsaW51eC9kZWJ1Z2ZzLmg+Cj4gPiAgICNpbmNsdWRlIDxsaW51eC9kZXZpY2Uu
aD4KPiA+ICAgI2luY2x1ZGUgPGxpbnV4L2dwaW8vY29uc3VtZXIuaD4KPiA+ICAgI2luY2x1ZGUg
PGxpbnV4L2kyYy5oPgo+ID4gQEAgLTIyMiwxMSArMjIzLDEwIEBACj4gPiAgICNkZWZpbmUgQ09M
T1JfQiAgICAgICAgICAgICAgICAgICAgIEdFTk1BU0soMTUsIDgpCj4gPiAgICNkZWZpbmUgRU5J
MkNGSUxURVIgICAgICAgICBCSVQoNCkKPiA+ICAgI2RlZmluZSBDT0xPUl9CQVJfTU9ERSAgICAg
ICAgICAgICAgR0VOTUFTSygxLCAwKQo+ID4gKyNkZWZpbmUgQ09MT1JfQkFSX01PREVfTk9STUFM
ICAgICAgICAwCj4gPiAgICNkZWZpbmUgQ09MT1JfQkFSX01PREVfQkFSUyAyCj4gPiAtI2RlZmlu
ZSBQTExfREJHICAgICAgICAgICAgICAgICAgICAgIDB4MGEwNAo+ID4KPiA+IC1zdGF0aWMgYm9v
bCB0Y190ZXN0X3BhdHRlcm47Cj4gPiAtbW9kdWxlX3BhcmFtX25hbWVkKHRlc3QsIHRjX3Rlc3Rf
cGF0dGVybiwgYm9vbCwgMDY0NCk7Cj4gPiArI2RlZmluZSBQTExfREJHICAgICAgICAgICAgICAg
ICAgICAgIDB4MGEwNAo+ID4KPiA+ICAgc3RydWN0IHRjX2VkcF9saW5rIHsKPiA+ICAgICAgIHN0
cnVjdCBkcm1fZHBfbGluayAgICAgIGJhc2U7Cj4gPiBAQCAtNzg5LDE2ICs3ODksNiBAQCBzdGF0
aWMgaW50IHRjX3NldF92aWRlb19tb2RlKHN0cnVjdCB0Y19kYXRhICp0YywKPiA+ICAgICAgIGlm
IChyZXQpCj4gPiAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gPgo+ID4gLSAgICAgLyogVGVz
dCBwYXR0ZXJuIHNldHRpbmdzICovCj4gPiAtICAgICByZXQgPSByZWdtYXBfd3JpdGUodGMtPnJl
Z21hcCwgVFNUQ1RMLAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgIEZJRUxEX1BSRVAoQ09M
T1JfUiwgMTIwKSB8Cj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgRklFTERfUFJFUChDT0xP
Ul9HLCAyMCkgfAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgIEZJRUxEX1BSRVAoQ09MT1Jf
QiwgOTkpIHwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICBFTkkyQ0ZJTFRFUiB8Cj4gPiAt
ICAgICAgICAgICAgICAgICAgICAgICAgRklFTERfUFJFUChDT0xPUl9CQVJfTU9ERSwgQ09MT1Jf
QkFSX01PREVfQkFSUykpOwo+ID4gLSAgICAgaWYgKHJldCkKPiA+IC0gICAgICAgICAgICAgcmV0
dXJuIHJldDsKPiA+IC0KPiA+ICAgICAgIC8qIERQIE1haW4gU3RyZWFtIEF0dHJpYnV0ZXMgKi8K
PiA+ICAgICAgIHZpZF9zeW5jX2RseSA9IGhzeW5jX2xlbiArIGxlZnRfbWFyZ2luICsgbW9kZS0+
aGRpc3BsYXk7Cj4gPiAgICAgICByZXQgPSByZWdtYXBfd3JpdGUodGMtPnJlZ21hcCwgRFAwX1ZJ
RFNZTkNERUxBWSwKPiA+IEBAIC0xMTUwLDE0ICsxMTQwLDYgQEAgc3RhdGljIGludCB0Y19zdHJl
YW1fZW5hYmxlKHN0cnVjdCB0Y19kYXRhICp0YykKPiA+Cj4gPiAgICAgICBkZXZfZGJnKHRjLT5k
ZXYsICJlbmFibGUgdmlkZW8gc3RyZWFtXG4iKTsKPiA+Cj4gPiAtICAgICAvKiBQWEwgUExMIHNl
dHVwICovCj4gPiAtICAgICBpZiAodGNfdGVzdF9wYXR0ZXJuKSB7Cj4gPiAtICAgICAgICAgICAg
IHJldCA9IHRjX3B4bF9wbGxfZW4odGMsIGNsa19nZXRfcmF0ZSh0Yy0+cmVmY2xrKSwKPiA+IC0g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDAwICogdGMtPm1vZGUuY2xvY2spOwo+
ID4gLSAgICAgICAgICAgICBpZiAocmV0KQo+ID4gLSAgICAgICAgICAgICAgICAgICAgIHJldHVy
biByZXQ7Cj4gPiAtICAgICB9Cj4gPiAtCj4gPiAgICAgICByZXQgPSB0Y19zZXRfdmlkZW9fbW9k
ZSh0YywgJnRjLT5tb2RlKTsKPiA+ICAgICAgIGlmIChyZXQpCj4gPiAgICAgICAgICAgICAgIHJl
dHVybiByZXQ7Cj4gPiBAQCAtMTE4NiwxMiArMTE2OCw4IEBAIHN0YXRpYyBpbnQgdGNfc3RyZWFt
X2VuYWJsZShzdHJ1Y3QgdGNfZGF0YSAqdGMpCj4gPiAgICAgICBpZiAocmV0KQo+ID4gICAgICAg
ICAgICAgICByZXR1cm4gcmV0Owo+ID4gICAgICAgLyogU2V0IGlucHV0IGludGVyZmFjZSAqLwo+
ID4gLSAgICAgdmFsdWUgPSBEUDBfQVVEU1JDX05PX0lOUFVUOwo+ID4gLSAgICAgaWYgKHRjX3Rl
c3RfcGF0dGVybikKPiA+IC0gICAgICAgICAgICAgdmFsdWUgfD0gRFAwX1ZJRFNSQ19DT0xPUl9C
QVI7Cj4gPiAtICAgICBlbHNlCj4gPiAtICAgICAgICAgICAgIHZhbHVlIHw9IERQMF9WSURTUkNf
RFBJX1JYOwo+ID4gLSAgICAgcmV0ID0gcmVnbWFwX3dyaXRlKHRjLT5yZWdtYXAsIFNZU0NUUkws
IHZhbHVlKTsKPiA+ICsgICAgIHJldCA9IHJlZ21hcF93cml0ZSh0Yy0+cmVnbWFwLCBTWVNDVFJM
LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgIERQMF9BVURTUkNfTk9fSU5QVVQgfCBEUDBf
VklEU1JDX0RQSV9SWCk7Cj4gPiAgICAgICBpZiAocmV0KQo+ID4gICAgICAgICAgICAgICByZXR1
cm4gcmV0Owo+ID4KPiA+IEBAIC0xMjIwLDM5ICsxMTk4LDQ0IEBAIHN0YXRpYyB2b2lkIHRjX2Jy
aWRnZV9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCj4gPiAgICAgICBkcm1f
cGFuZWxfcHJlcGFyZSh0Yy0+cGFuZWwpOwo+ID4gICB9Cj4gPgo+ID4gLXN0YXRpYyB2b2lkIHRj
X2JyaWRnZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKPiA+ICtzdGF0aWMgaW50
IF9fdGNfYnJpZGdlX2VuYWJsZShzdHJ1Y3QgdGNfZGF0YSAqdGMpCj4gPiAgIHsKPiA+IC0gICAg
IHN0cnVjdCB0Y19kYXRhICp0YyA9IGJyaWRnZV90b190YyhicmlkZ2UpOwo+ID4gICAgICAgaW50
IHJldDsKPiA+Cj4gPiAgICAgICByZXQgPSB0Y19nZXRfZGlzcGxheV9wcm9wcyh0Yyk7Cj4gPiAg
ICAgICBpZiAocmV0IDwgMCkgewo+ID4gICAgICAgICAgICAgICBkZXZfZXJyKHRjLT5kZXYsICJm
YWlsZWQgdG8gcmVhZCBkaXNwbGF5IHByb3BzOiAlZFxuIiwgcmV0KTsKPiA+IC0gICAgICAgICAg
ICAgcmV0dXJuOwo+ID4gKyAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4gICAgICAgfQo+ID4K
PiA+ICAgICAgIHJldCA9IHRjX21haW5fbGlua19lbmFibGUodGMpOwo+ID4gICAgICAgaWYgKHJl
dCA8IDApIHsKPiA+ICAgICAgICAgICAgICAgZGV2X2Vycih0Yy0+ZGV2LCAibWFpbiBsaW5rIGVu
YWJsZSBlcnJvcjogJWRcbiIsIHJldCk7Cj4gPiAtICAgICAgICAgICAgIHJldHVybjsKPiA+ICsg
ICAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+ICAgICAgIH0KPiA+Cj4gPiAgICAgICByZXQgPSB0
Y19zdHJlYW1fZW5hYmxlKHRjKTsKPiA+ICAgICAgIGlmIChyZXQgPCAwKSB7Cj4gPiAgICAgICAg
ICAgICAgIGRldl9lcnIodGMtPmRldiwgIm1haW4gbGluayBzdHJlYW0gc3RhcnQgZXJyb3I6ICVk
XG4iLCByZXQpOwo+ID4gICAgICAgICAgICAgICB0Y19tYWluX2xpbmtfZGlzYWJsZSh0Yyk7Cj4g
PiAtICAgICAgICAgICAgIHJldHVybjsKPiA+ICAgICAgIH0KPiA+Cj4gPiAtICAgICBkcm1fcGFu
ZWxfZW5hYmxlKHRjLT5wYW5lbCk7Cj4gPiArICAgICByZXR1cm4gcmV0Owo+ID4gICB9Cj4KPiBN
YXliZSBpdCdzIGp1c3QgbWUsIGJ1dCBJIHJhdGhlciBoYXZlIHRoZSBsYXN0IGlmKCkgYmxvY2sg
ZG8gYSAicmV0dXJuCj4gcmV0IjsgYW5kIGhhdmUgInJldHVybiAwOyIgYXQgdGhlIGVuZCBvZiB0
aGUgZnVuY3Rpb24gdG8ga2VlcCBhbGwgdGhlIGlmCj4gYmxvY2tzIGNvbnNpc3RlbnQuCgpPSywg
d2lsbCBmaXggaW4gdjIuCgo+Cj4gPgo+ID4gLXN0YXRpYyB2b2lkIHRjX2JyaWRnZV9kaXNhYmxl
KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCj4gPiArc3RhdGljIHZvaWQgdGNfYnJpZGdlX2Vu
YWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQo+ID4gICB7Cj4gPiAgICAgICBzdHJ1Y3Qg
dGNfZGF0YSAqdGMgPSBicmlkZ2VfdG9fdGMoYnJpZGdlKTsKPiA+IC0gICAgIGludCByZXQ7Cj4g
Pgo+ID4gLSAgICAgZHJtX3BhbmVsX2Rpc2FibGUodGMtPnBhbmVsKTsKPiA+ICsgICAgIGlmIChf
X3RjX2JyaWRnZV9lbmFibGUodGMpIDwgMCkKPiA+ICsgICAgICAgICAgICAgcmV0dXJuOwo+ID4g
Kwo+ID4gKyAgICAgZHJtX3BhbmVsX2VuYWJsZSh0Yy0+cGFuZWwpOwo+ID4gK30KPiA+ICsKPiA+
ICtzdGF0aWMgaW50IF9fdGNfYnJpZGdlX2Rpc2FibGUoc3RydWN0IHRjX2RhdGEgKnRjKQo+ID4g
K3sKPiA+ICsgICAgIGludCByZXQ7Cj4gPgo+ID4gICAgICAgcmV0ID0gdGNfc3RyZWFtX2Rpc2Fi
bGUodGMpOwo+ID4gICAgICAgaWYgKHJldCA8IDApCj4gPiBAQCAtMTI2MSw2ICsxMjQ0LDE2IEBA
IHN0YXRpYyB2b2lkIHRjX2JyaWRnZV9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2Up
Cj4gPiAgICAgICByZXQgPSB0Y19tYWluX2xpbmtfZGlzYWJsZSh0Yyk7Cj4gPiAgICAgICBpZiAo
cmV0IDwgMCkKPiA+ICAgICAgICAgICAgICAgZGV2X2Vycih0Yy0+ZGV2LCAibWFpbiBsaW5rIGRp
c2FibGUgZXJyb3I6ICVkXG4iLCByZXQpOwo+ID4gKwo+ID4gKyAgICAgcmV0dXJuIHJldDsKPiA+
ICt9Cj4gPiArCj4gPiArc3RhdGljIHZvaWQgdGNfYnJpZGdlX2Rpc2FibGUoc3RydWN0IGRybV9i
cmlkZ2UgKmJyaWRnZSkKPiA+ICt7Cj4gPiArICAgICBzdHJ1Y3QgdGNfZGF0YSAqdGMgPSBicmlk
Z2VfdG9fdGMoYnJpZGdlKTsKPiA+ICsKPiA+ICsgICAgIGRybV9wYW5lbF9kaXNhYmxlKHRjLT5w
YW5lbCk7Cj4gPiArICAgICBfX3RjX2JyaWRnZV9kaXNhYmxlKHRjKTsKPiA+ICAgfQo+Cj4gTWF5
YmUgaGF2ZSB0aGlzIGVuYWJsZS9kaXNhYmxlIGNoYW5nZSBhcyBhIHNlcGFyYXRlIHBhdGNoPwo+
CgpTdXJlLCBJIGNhbiBkbyB0aGF0IGluIHYyLgoKPiA+Cj4gPiAgIHN0YXRpYyB2b2lkIHRjX2Jy
aWRnZV9wb3N0X2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKPiA+IEBAIC0xMzcy
LDYgKzEzNjUsNzcgQEAgc3RhdGljIGVudW0gZHJtX2Nvbm5lY3Rvcl9zdGF0dXMgdGNfY29ubmVj
dG9yX2RldGVjdChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmUKPiA+ICAgICAgICAgICAgICAg
cmV0dXJuIGNvbm5lY3Rvcl9zdGF0dXNfZGlzY29ubmVjdGVkOwo+ID4gICB9Cj4gPgo+ID4gK3N0
YXRpYyBpbnQgdGNfdHN0Y3RsX3NldCh2b2lkICpkYXRhLCB1NjQgdmFsKQo+ID4gK3sKPiA+ICsg
ICAgIHN0cnVjdCB0Y19kYXRhICp0YyA9IGRhdGE7Cj4gPiArICAgICBpbnQgcmV0Owo+ID4gKwo+
ID4gKyAgICAgaWYgKEZJRUxEX0dFVChDT0xPUl9CQVJfTU9ERSwgdmFsKSA9PSBDT0xPUl9CQVJf
TU9ERV9OT1JNQUwpIHsKPiA+ICsgICAgICAgICAgICAgcmV0ID0gcmVnbWFwX3dyaXRlKHRjLT5y
ZWdtYXAsIFNZU0NUUkwsIERQMF9WSURTUkNfRFBJX1JYKTsKPiA+ICsgICAgICAgICAgICAgaWYg
KHJldCkgewo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGRldl9lcnIodGMtPmRldiwKPiA+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICJmYWlsZWQgdG8gc2VsZWN0IGRwaSB2aWRlbyBz
dHJlYW1cbiIpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gPiArICAg
ICAgICAgICAgIH0KPiA+ICsKPiA+ICsgICAgICAgICAgICAgcmV0ID0gcmVnbWFwX3dyaXRlKHRj
LT5yZWdtYXAsIFRTVENUTCwgdmFsIHwgRU5JMkNGSUxURVIpOwo+ID4gKyAgICAgICAgICAgICBp
ZiAocmV0KSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgZGV2X2Vycih0Yy0+ZGV2LCAiZmFp
bGVkIHRvIHNldCBUU1RDVExcbiIpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBy
ZXQ7Cj4gPiArICAgICAgICAgICAgIH0KPiA+ICsKPiA+ICsgICAgICAgICAgICAgcmV0ID0gdGNf
cHhsX3BsbF9kaXModGMpOwo+ID4gKyAgICAgICAgICAgICBpZiAocmV0KSB7Cj4gPiArICAgICAg
ICAgICAgICAgICAgICAgZGV2X2Vycih0Yy0+ZGV2LCAiZmFpbGVkIHRvIGRpc2FibGUgUExMXG4i
KTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4gKyAgICAgICAgICAg
ICB9Cj4gPiArCj4gPiArICAgICAgICAgICAgIC8qCj4gPiArICAgICAgICAgICAgICAqIFJlLWVz
dGFibGlzaCBEUCBsaW5rCj4gPiArICAgICAgICAgICAgICAqLwo+ID4gKyAgICAgICAgICAgICBy
ZXQgPSBfX3RjX2JyaWRnZV9kaXNhYmxlKHRjKTsKPiA+ICsgICAgICAgICAgICAgaWYgKHJldCkK
PiA+ICsgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4gKwo+ID4gKyAgICAgICAg
ICAgICByZXQgPSBfX3RjX2JyaWRnZV9lbmFibGUodGMpOwo+ID4gKyAgICAgICAgICAgICBpZiAo
cmV0KQo+ID4gKyAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gPiArICAgICB9IGVs
c2Ugewo+ID4gKyAgICAgICAgICAgICByZXQgPSB0Y19weGxfcGxsX2VuKHRjLCBjbGtfZ2V0X3Jh
dGUodGMtPnJlZmNsayksCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAw
MCAqIHRjLT5tb2RlLmNsb2NrKTsKPiA+ICsgICAgICAgICAgICAgaWYgKHJldCkgewo+ID4gKyAg
ICAgICAgICAgICAgICAgICAgIGRldl9lcnIodGMtPmRldiwgImZhaWxlZCB0byBlbmFibGUgUExM
XG4iKTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4gKyAgICAgICAg
ICAgICB9Cj4gPiArCj4gPiArICAgICAgICAgICAgIHJldCA9IHJlZ21hcF93cml0ZSh0Yy0+cmVn
bWFwLCBUU1RDVEwsIHZhbCB8IEVOSTJDRklMVEVSKTsKPiA+ICsgICAgICAgICAgICAgaWYgKHJl
dCkgewo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGRldl9lcnIodGMtPmRldiwgImZhaWxlZCB0
byBzZXQgVFNUQ1RMXG4iKTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+
ID4gKyAgICAgICAgICAgICB9Cj4gPiArCj4gPiArICAgICAgICAgICAgIHJldCA9IHJlZ21hcF93
cml0ZSh0Yy0+cmVnbWFwLCBTWVNDVFJMLCBEUDBfVklEU1JDX0NPTE9SX0JBUik7Cj4gPiArICAg
ICAgICAgICAgIGlmIChyZXQpIHsKPiA+ICsgICAgICAgICAgICAgICAgICAgICBkZXZfZXJyKHRj
LT5kZXYsICJmYWlsZWQgdG8gY29sb3IgYmFyIHZpZGVvIHN0cmVhbVxuIik7Cj4gPiArICAgICAg
ICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+ICsgICAgICAgICAgICAgfQo+ID4gKyAgICAg
fQo+ID4gKwo+ID4gKyAgICAgcmV0dXJuIDA7Cj4gPiArfQo+ID4gKwo+ID4gK0RFRklORV9TSU1Q
TEVfQVRUUklCVVRFKHRjX3RzdGN0bF9mb3BzLCBOVUxMLCB0Y190c3RjdGxfc2V0LCAiJWxsdVxu
Iik7Cj4gPiArCj4gPiArc3RhdGljIGludCB0Y19sYXRlX3JlZ2lzdGVyKHN0cnVjdCBkcm1fY29u
bmVjdG9yICpjb25uZWN0b3IpCj4gPiArewo+ID4gKyAgICAgaWYgKGNvbm5lY3Rvci0+ZGVidWdm
c19lbnRyeSkKPiA+ICsgICAgICAgICAgICAgZGVidWdmc19jcmVhdGVfZmlsZV91bnNhZmUoInRz
dGN0bCIsIDA2NDQsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNvbm5lY3Rvci0+ZGVidWdmc19lbnRyeSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgY29ubmVjdG9yX3RvX3RjKGNvbm5lY3RvciksCj4gPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZ0Y190c3RjdGxfZm9wcyk7Cj4gPiArICAg
ICByZXR1cm4gMDsKPiA+ICt9Cj4KPiBJIHZlcnkgcmVjZW50bHkgd2FudGVkIHRvIGFkZCBxdWlj
ayBkZWJ1Z2ZzIGZ1bmN0aW9uYWxpdHkgdG8gYSBicmlkZ2UKPiB0b28sIGJ1dCBhcyB0aGVyZSBk
aWRuJ3Qgc2VlbSBhbiBlYXN5IHdheSB0byBkbyBpdCwgSSBqdXN0IGxhemlseSBhZGRlZAo+IHRo
ZSBkZWJ1Z2ZzIGZpbGVzIHRvIHRoZSBkZWJ1Z2ZzIHJvb3QuLi4KPgo+IEknbSBub3Qgc3VyZSBp
ZiBhZGRpbmcgYnJpZGdlJ3MgZGVidWdmcyBmaWxlcyB0byBjb25uZWN0b3IncyBkaXJlY3RvcnkK
PiBpcyBhIGdvb2QgaWRlYS4gV2hhdCBpZiB3ZSBoYXZlIHR3byBicmlkZ2VzLCBib3RoIGhhdmUg
dGhlIHNhbWUgZGVidWdmcwo+IGZpbGU/IE9yIGV2ZW4gaWYgdGhlcmUncyBubyBjb25mbGljdCwg
dGhlcmUncyBhbHNvIG5vIHdheSB0byBrbm93IHdoaWNoCj4gYnJpZGdlIGEgcGFydGljdWxhciBk
ZWJ1Z2ZzIGZpbGUgYmVsb25ncyB0by4KPgo+IE1heWJlIHdlIG5lZWQgc29tZSBEUk0gaW5mcmFz
dHJ1Y3R1cmUgZm9yIGJyaWRnZSBkZWJ1Z2ZzPwo+CgpJJ2xsIG1vdmUgdG8gdXNpbmcgYSBkZWRp
Y2F0ZWQgZW50cnkgaW4gZGVidWdmcywgd2hpY2ggc2hvdWxkIGFkZHJlc3MKYWxsIG9mIHRob3Nl
IGNvbmNlcm5zLgoKVGhhbmtzLApBbmRyZXkgU21pcm5vdgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZl
bEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
