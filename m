Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D40C69A8CC
	for <lists+dri-devel@lfdr.de>; Fri, 23 Aug 2019 09:31:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C79B26EBC6;
	Fri, 23 Aug 2019 07:31:02 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from onstation.org (onstation.org [52.200.56.107])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1110D6EB74;
 Thu, 22 Aug 2019 14:37:32 +0000 (UTC)
Received: from ins7386.localdomain (unknown [207.110.43.92])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: masneyb)
 by onstation.org (Postfix) with ESMTPSA id 4F8C54BB61;
 Thu, 22 Aug 2019 14:37:30 +0000 (UTC)
From: Brian Masney <masneyb@onstation.org>
To: agross@kernel.org, robdclark@gmail.com, sean@poorly.run,
 robh+dt@kernel.org, bjorn.andersson@linaro.org
Subject: [PATCH v6 4/7] firmware: qcom: scm: add support to restore secure
 config to qcm_scm-32
Date: Thu, 22 Aug 2019 07:37:00 -0700
Message-Id: <20190822143703.13030-5-masneyb@onstation.org>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190822143703.13030-1-masneyb@onstation.org>
References: <20190822143703.13030-1-masneyb@onstation.org>
MIME-Version: 1.0
X-Mailman-Approved-At: Fri, 23 Aug 2019 07:30:43 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=onstation.org; s=default; t=1566484651;
 bh=QMjAhbyfqWd+rg08uGwOezBjOIzkXyobeOzk16UJN+E=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=DrBA4Nz3C96f9QJMzzC8rgtzGoYuOeGaCXMllgf2gKeMb8sxErK0MTZpzDKzrkRzu
 AcsUU8pn7IIPcUFW70nFLPUh9HD9aAfSmDsxJIJ6rgmGCUGUdRxrPqlNDigHzVTjZp
 ba6wNjUyJ6/ecokU/gLn4H1rFdDi6teAk19zXhuc=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org, jonathan@marek.ca,
 airlied@linux.ie, linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, freedreno@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9iIENsYXJrIDxyb2JkY2xhcmtAZ21haWwuY29tPgoKQWRkIHN1cHBvcnQgdG8gcmVz
dG9yZSB0aGUgc2VjdXJlIGNvbmZpZ3VyYXRpb24gZm9yIHFjbV9zY20tMzIuYy4gVGhpcwppcyBu
ZWVkZWQgYnkgdGhlIE9uIENoaXAgTUVNb3J5IChPQ01FTSkgdGhhdCBpcyBwcmVzZW50IG9uIHNv
bWUKU25hcGRyYWdvbiBkZXZpY2VzLgoKU2lnbmVkLW9mZi1ieTogUm9iIENsYXJrIDxyb2JkY2xh
cmtAZ21haWwuY29tPgpbbWFzbmV5YkBvbnN0YXRpb24ub3JnOiBwb3J0ZWQgdG8gbGF0ZXN0IGtl
cm5lbDsgc2V0IGN0eF9iYW5rX251bSB0bwogc3BhcmUgcGFyYW1ldGVyLl0KU2lnbmVkLW9mZi1i
eTogQnJpYW4gTWFzbmV5IDxtYXNuZXliQG9uc3RhdGlvbi5vcmc+Ci0tLQpDaGFuZ2VzIHNpbmNl
IHY1OgotIE5vbmUKCkNoYW5nZXMgc2luY2UgdjQ6Ci0gTm9uZQoKQ2hhbmdlcyBzaW5jZSB2MzoK
LSBOb25lCgpDaGFuZ2VzIHNpbmNlIHYyOgotIE5vbmUKCkNoYW5nZXMgc2luY2UgdjE6Ci0gVXNl
IGV4aXN0aW5nIF9fcWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnKCkgZnVuY3Rpb24gc3R1YiBpbgog
IHFjb21fc2NtLTMyLmMgdGhhdCB3YXMgdW5pbXBsZW1lbnRlZAotIFNldCB0aGUgY2ZnLmN0eF9i
YW5rX251bSB0byB0aGUgc3BhcmUgZnVuY3Rpb24gcGFyYW1ldGVyLiBJdCB3YXMKICBwcmV2aW91
c2x5IHNldCB0byB0aGUgZGV2aWNlX2lkLgoKIGRyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20tMzIu
YyB8IDE3ICsrKysrKysrKysrKysrKystCiBkcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMgICAg
fCAxMyArKysrKysrKysrKysrCiBpbmNsdWRlL2xpbnV4L3Fjb21fc2NtLmggICAgICAgfCAxMSAr
KysrKysrKysrKwogMyBmaWxlcyBjaGFuZ2VkLCA0MCBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9u
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS0zMi5jIGIvZHJpdmVy
cy9maXJtd2FyZS9xY29tX3NjbS0zMi5jCmluZGV4IDRjMjUxNGU1ZTI0OS4uNWQ5MGI3ZjVhYjVh
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLTMyLmMKKysrIGIvZHJpdmVy
cy9maXJtd2FyZS9xY29tX3NjbS0zMi5jCkBAIC02MTcsNyArNjE3LDIyIEBAIGludCBfX3Fjb21f
c2NtX2Fzc2lnbl9tZW0oc3RydWN0IGRldmljZSAqZGV2LCBwaHlzX2FkZHJfdCBtZW1fcmVnaW9u
LAogaW50IF9fcWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnKHN0cnVjdCBkZXZpY2UgKmRldiwgdTMy
IGRldmljZV9pZCwKIAkJCSAgICAgICB1MzIgc3BhcmUpCiB7Ci0JcmV0dXJuIC1FTk9ERVY7CisJ
c3RydWN0IG1zbV9zY21fc2VjX2NmZyB7CisJCV9fbGUzMiBpZDsKKwkJX19sZTMyIGN0eF9iYW5r
X251bTsKKwl9IGNmZzsKKwlpbnQgcmV0LCBzY21fcmV0ID0gMDsKKworCWNmZy5pZCA9IGNwdV90
b19sZTMyKGRldmljZV9pZCk7CisJY2ZnLmN0eF9iYW5rX251bSA9IGNwdV90b19sZTMyKHNwYXJl
KTsKKworCXJldCA9IHFjb21fc2NtX2NhbGwoZGV2LCBRQ09NX1NDTV9TVkNfTVAsIFFDT01fU0NN
X1JFU1RPUkVfU0VDX0NGRywKKwkJCSAgICAmY2ZnLCBzaXplb2YoY2ZnKSwgJnNjbV9yZXQsIHNp
emVvZihzY21fcmV0KSk7CisKKwlpZiAocmV0IHx8IHNjbV9yZXQpCisJCXJldHVybiByZXQgPyBy
ZXQgOiAtRUlOVkFMOworCisJcmV0dXJuIDA7CiB9CiAKIGludCBfX3Fjb21fc2NtX2lvbW11X3Nl
Y3VyZV9wdGJsX3NpemUoc3RydWN0IGRldmljZSAqZGV2LCB1MzIgc3BhcmUsCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMgYi9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2Nt
LmMKaW5kZXggN2UyODVmZjM5NjFkLi4yN2MxZDk4YTM0ZTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
ZmlybXdhcmUvcWNvbV9zY20uYworKysgYi9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMKQEAg
LTM2Nyw2ICszNjcsMTkgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCByZXNldF9jb250cm9sX29wcyBx
Y29tX3NjbV9wYXNfcmVzZXRfb3BzID0gewogCS5kZWFzc2VydCA9IHFjb21fc2NtX3Bhc19yZXNl
dF9kZWFzc2VydCwKIH07CiAKKy8qKgorICogcWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnX2F2YWls
YWJsZSgpIC0gQ2hlY2sgaWYgc2VjdXJlIGVudmlyb25tZW50CisgKiBzdXBwb3J0cyByZXN0b3Jl
IHNlY3VyaXR5IGNvbmZpZyBpbnRlcmZhY2UuCisgKgorICogUmV0dXJuIHRydWUgaWYgcmVzdG9y
ZS1jZmcgaW50ZXJmYWNlIGlzIHN1cHBvcnRlZCwgZmFsc2UgaWYgbm90LgorICovCitib29sIHFj
b21fc2NtX3Jlc3RvcmVfc2VjX2NmZ19hdmFpbGFibGUodm9pZCkKK3sKKwlyZXR1cm4gX19xY29t
X3NjbV9pc19jYWxsX2F2YWlsYWJsZShfX3NjbS0+ZGV2LCBRQ09NX1NDTV9TVkNfTVAsCisJCQkJ
CSAgICBRQ09NX1NDTV9SRVNUT1JFX1NFQ19DRkcpOworfQorRVhQT1JUX1NZTUJPTChxY29tX3Nj
bV9yZXN0b3JlX3NlY19jZmdfYXZhaWxhYmxlKTsKKwogaW50IHFjb21fc2NtX3Jlc3RvcmVfc2Vj
X2NmZyh1MzIgZGV2aWNlX2lkLCB1MzIgc3BhcmUpCiB7CiAJcmV0dXJuIF9fcWNvbV9zY21fcmVz
dG9yZV9zZWNfY2ZnKF9fc2NtLT5kZXYsIGRldmljZV9pZCwgc3BhcmUpOwpkaWZmIC0tZ2l0IGEv
aW5jbHVkZS9saW51eC9xY29tX3NjbS5oIGIvaW5jbHVkZS9saW51eC9xY29tX3NjbS5oCmluZGV4
IGI0OWI3MzRkNjYyYy4uMDQzODJlMTc5OGU0IDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4L3Fj
b21fc2NtLmgKKysrIGIvaW5jbHVkZS9saW51eC9xY29tX3NjbS5oCkBAIC0zNCw2ICszNCwxNiBA
QCBlbnVtIHFjb21fc2NtX29jbWVtX2NsaWVudCB7CiAJUUNPTV9TQ01fT0NNRU1fREVCVUdfSUQs
CiB9OwogCitlbnVtIHFjb21fc2NtX3NlY19kZXZfaWQgeworCVFDT01fU0NNX01EU1NfREVWX0lE
ICAgID0gMSwKKwlRQ09NX1NDTV9PQ01FTV9ERVZfSUQgICA9IDUsCisJUUNPTV9TQ01fUENJRTBf
REVWX0lEICAgPSAxMSwKKwlRQ09NX1NDTV9QQ0lFMV9ERVZfSUQgICA9IDEyLAorCVFDT01fU0NN
X0dGWF9ERVZfSUQgICAgID0gMTgsCisJUUNPTV9TQ01fVUZTX0RFVl9JRCAgICAgPSAxOSwKKwlR
Q09NX1NDTV9JQ0VfREVWX0lEICAgICA9IDIwLAorfTsKKwogI2RlZmluZSBRQ09NX1NDTV9WTUlE
X0hMT1MgICAgICAgMHgzCiAjZGVmaW5lIFFDT01fU0NNX1ZNSURfTVNTX01TQSAgICAweEYKICNk
ZWZpbmUgUUNPTV9TQ01fVk1JRF9XTEFOICAgICAgIDB4MTgKQEAgLTcwLDYgKzgwLDcgQEAgZXh0
ZXJuIGludCBxY29tX3NjbV9hc3NpZ25fbWVtKHBoeXNfYWRkcl90IG1lbV9hZGRyLCBzaXplX3Qg
bWVtX3N6LAogZXh0ZXJuIHZvaWQgcWNvbV9zY21fY3B1X3Bvd2VyX2Rvd24odTMyIGZsYWdzKTsK
IGV4dGVybiB1MzIgcWNvbV9zY21fZ2V0X3ZlcnNpb24odm9pZCk7CiBleHRlcm4gaW50IHFjb21f
c2NtX3NldF9yZW1vdGVfc3RhdGUodTMyIHN0YXRlLCB1MzIgaWQpOworZXh0ZXJuIGJvb2wgcWNv
bV9zY21fcmVzdG9yZV9zZWNfY2ZnX2F2YWlsYWJsZSh2b2lkKTsKIGV4dGVybiBpbnQgcWNvbV9z
Y21fcmVzdG9yZV9zZWNfY2ZnKHUzMiBkZXZpY2VfaWQsIHUzMiBzcGFyZSk7CiBleHRlcm4gaW50
IHFjb21fc2NtX2lvbW11X3NlY3VyZV9wdGJsX3NpemUodTMyIHNwYXJlLCBzaXplX3QgKnNpemUp
OwogZXh0ZXJuIGludCBxY29tX3NjbV9pb21tdV9zZWN1cmVfcHRibF9pbml0KHU2NCBhZGRyLCB1
MzIgc2l6ZSwgdTMyIHNwYXJlKTsKLS0gCjIuMjEuMAoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vZHJpLWRldmVs
