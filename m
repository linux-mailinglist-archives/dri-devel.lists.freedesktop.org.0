Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1C90110FE0A
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 13:49:02 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1C6BD6E505;
	Tue,  3 Dec 2019 12:48:39 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx0a-0014ca01.pphosted.com (mx0a-0014ca01.pphosted.com
 [208.84.65.235])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 735E06E03E
 for <dri-devel@lists.freedesktop.org>; Tue,  3 Dec 2019 10:36:41 +0000 (UTC)
Received: from pps.filterd (m0042385.ppops.net [127.0.0.1])
 by mx0a-0014ca01.pphosted.com (8.16.0.42/8.16.0.42) with SMTP id
 xB3ACE73020552; Tue, 3 Dec 2019 02:14:21 -0800
Received: from nam02-sn1-obe.outbound.protection.outlook.com
 (mail-sn1nam02lp2055.outbound.protection.outlook.com [104.47.36.55])
 by mx0a-0014ca01.pphosted.com with ESMTP id 2wknv0uk8k-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 03 Dec 2019 02:14:21 -0800
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=YGk+Dx66cy0XkEs7KvxQoPHcvZnubmtoaM6T4RR64UNToVqBTFbkoCKu6reJEzOl96+MiMoWGHxdz3tk4VBqSdYuKIFPgZBdBiG+xQbHCiuu+FzRoVDu51L0wQ4BQgEuWINv5XpgTB1b1NHu36J4bQQF+T+XTM3yLPfswjmP1IWvrKpqbRbPaFNE7QnFrWyk+FZd5hqxA/fhNKxL4TDbyxccvG470Qx6s4zjzu6vn94uLjB8cmVHHScKzoy89Fpqm9MG7iPLnlFHy3lNjP6i5gTGV1TLj3m73yduPiMzsEQj0F3gMnWi0D0VHBDz80lY1dfA8FbkRbyB2Mk2L2qqDA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=cN0vULxSipmEzZd60jDacbkYUxrLO2+15/quWLxFwvQ=;
 b=Ss95nGZmYLg8eTOv7ZkkogOvRrn/WzwyIb95eRpoYNWsT+KUCb1FlMHOWoT2a+fBwZxCNSlSQI2Mjs+LbqXHrS/dxHX9GFRK/HwSa+hPfiDJWmrVUPi5Sit5dVk3m/8GbyZKAyxxlOJiodgkT3+eU0u1bu1+ChRHGAKslEb+CLnV5PyQSQKKbB52tOGXuIj7d+3E+NVbB9fSYfQKwTqdNgzIJrMA0r2y+AQXzjNRglMoX24Fa+V4omNLYQ+00my6D9ubWemTQBnT3xE406pxhdYNZECx0O2Gh7ylsRbUoCdLrLgubRvcIvb2bycc5C3bDqXIg0YLMR3N+3tansJ2Ww==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=softfail (sender ip
 is 158.140.1.28) smtp.rcpttodomain=ti.com smtp.mailfrom=cadence.com;
 dmarc=fail (p=none sp=none pct=100) action=none header.from=cadence.com;
 dkim=none (message not signed); arc=none
Received: from CH2PR07CA0008.namprd07.prod.outlook.com (2603:10b6:610:20::21)
 by DM6PR07MB7082.namprd07.prod.outlook.com (2603:10b6:5:1f2::16) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2495.18; Tue, 3 Dec
 2019 10:14:17 +0000
Received: from DM6NAM12FT042.eop-nam12.prod.protection.outlook.com
 (2a01:111:f400:fe59::200) by CH2PR07CA0008.outlook.office365.com
 (2603:10b6:610:20::21) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2516.12 via Frontend
 Transport; Tue, 3 Dec 2019 10:14:17 +0000
Received-SPF: SoftFail (protection.outlook.com: domain of transitioning
 cadence.com discourages use of 158.140.1.28 as permitted sender)
Received: from sjmaillnx2.cadence.com (158.140.1.28) by
 DM6NAM12FT042.mail.protection.outlook.com (10.13.178.129) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2495.18 via Frontend Transport; Tue, 3 Dec 2019 10:14:17 +0000
Received: from maileu3.global.cadence.com (maileu3.cadence.com [10.160.88.99])
 by sjmaillnx2.cadence.com (8.14.4/8.14.4) with ESMTP id
 xB3AE7t0027708
 (version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=OK);
 Tue, 3 Dec 2019 02:14:15 -0800
X-CrossPremisesHeadersFilteredBySendConnector: maileu3.global.cadence.com
Received: from maileu3.global.cadence.com (10.160.88.99) by
 maileu3.global.cadence.com (10.160.88.99) with Microsoft SMTP Server (TLS) id
 15.0.1367.3; Tue, 3 Dec 2019 11:14:09 +0100
Received: from vleu-orange.cadence.com (10.160.88.83) by
 maileu3.global.cadence.com (10.160.88.99) with Microsoft SMTP Server (TLS) id
 15.0.1367.3 via Frontend Transport; Tue, 3 Dec 2019 11:14:09 +0100
Received: from vleu-orange.cadence.com (localhost.localdomain [127.0.0.1])
 by vleu-orange.cadence.com (8.14.4/8.14.4) with ESMTP id xB3AE9c9030969;
 Tue, 3 Dec 2019 11:14:09 +0100
Received: (from yamonkar@localhost)
 by vleu-orange.cadence.com (8.14.4/8.14.4/Submit) id xB3AE9O0030960;
 Tue, 3 Dec 2019 11:14:09 +0100
From: Yuti Amonkar <yamonkar@cadence.com>
To: <dri-devel@lists.freedesktop.org>
Subject: [PATCH v1 11/15] phy: cadence-torrent: Implement PHY configure APIs
Date: Tue, 3 Dec 2019 11:13:21 +0100
Message-ID: <1575368005-29797-12-git-send-email-yamonkar@cadence.com>
X-Mailer: git-send-email 2.4.5
In-Reply-To: <1575368005-29797-1-git-send-email-yamonkar@cadence.com>
References: <1575368005-29797-1-git-send-email-yamonkar@cadence.com>
MIME-Version: 1.0
X-OrganizationHeadersPreserved: maileu3.global.cadence.com
X-EOPAttributedMessage: 0
X-Forefront-Antispam-Report: CIP:158.140.1.28; IPV:CAL; SCL:-1; CTRY:US;
 EFV:NLI; SFV:NSPM;
 SFS:(10009020)(4636009)(346002)(396003)(39860400002)(376002)(136003)(36092001)(199004)(189003)(48376002)(50466002)(6666004)(186003)(2351001)(26005)(305945005)(356004)(11346002)(87636003)(2616005)(426003)(478600001)(4326008)(86362001)(316002)(50226002)(446003)(54906003)(14444005)(7636002)(76176011)(51416003)(42186006)(336012)(8676002)(16586007)(30864003)(2906002)(246002)(6916009)(8936002)(70586007)(26826003)(36756003)(5660300002)(76130400001)(107886003)(70206006);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DM6PR07MB7082; H:sjmaillnx2.cadence.com; FPR:;
 SPF:SoftFail; LANG:en; PTR:corp.cadence.com; A:1; MX:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: ffe32775-134d-422f-af0a-08d777d98e1e
X-MS-TrafficTypeDiagnostic: DM6PR07MB7082:
X-Microsoft-Antispam-PRVS: <DM6PR07MB7082B2E732EFF760651E9A33D2420@DM6PR07MB7082.namprd07.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:7691;
X-Forefront-PRVS: 02408926C4
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: Plv/HWV4DCvXRL542J3eQbCGi0Zxx7bTLabSjam/o04mICCHB8qcSKenPmSVyBpZFABMNKoAkISap2+oUPReoLWwW1nsLV5DKDMwO2pZAEVr23ZT7N+6DODEJ64JAxgYpWWQ3mWxOeWW/xRC6E4T1Bu8I++CoOmKAgRY0eCYcQarKttKrJuoS1JZogUdCzGATP/bYrjRggFW/hX1wVX+zmTdmH8vyTbcUCXCRw3yAJFclPqI4zrOm7NU+1AUEReektClaLFxJTLNblh35HQ0wuzhTkscbYovpD2FFweCSkjOeOwBt5nx3rOlFLfir/3xnsLXBKKIezSg4EgBjr0EmFhWE3q0nJiqIBBXIu2gjOMvsFeEci9hl3dxMxfzdZa16oTSRPXvZmNSFt7ZMObbTGQ8Cb1Yl/1AhbOp55vQzt+4HYnkBYIgr043OWNkmryx
X-OriginatorOrg: cadence.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 03 Dec 2019 10:14:17.0639 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: ffe32775-134d-422f-af0a-08d777d98e1e
X-MS-Exchange-CrossTenant-Id: d36035c5-6ce6-4662-a3dc-e762e61ae4c9
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=d36035c5-6ce6-4662-a3dc-e762e61ae4c9; Ip=[158.140.1.28];
 Helo=[sjmaillnx2.cadence.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR07MB7082
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10434:6.0.95,18.0.572
 definitions=2019-12-03_02:2019-11-29,2019-12-03 signatures=0
X-Proofpoint-Spam-Details: rule=outbound_check_notspam policy=outbound_check
 score=0 adultscore=0
 spamscore=0 suspectscore=1 clxscore=1015 mlxlogscore=995 phishscore=0
 impostorscore=0 malwarescore=0 bulkscore=0 lowpriorityscore=0
 priorityscore=1501 mlxscore=0 classifier=spam adjust=0 reason=mlx
 scancount=1 engine=8.12.0-1910280000 definitions=main-1912030082
X-Mailman-Approved-At: Tue, 03 Dec 2019 12:48:27 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=cadence.com; h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type; s=proofpoint;
 bh=cN0vULxSipmEzZd60jDacbkYUxrLO2+15/quWLxFwvQ=;
 b=ixnJBa9+i9v5mPUQGM5HarJCWkcizqi4rqpCK1V693m2K4nyrvm7KtzOXxWngMwdihuR
 hNTuZvmyhhJsI0Z7iWQWwgo3ldrSJIMQ8ZEkGchkYJE1TkCpnSmDhCfDwko9Ap40IlmM
 m47G+q3s3DRXcmw6qwQc4t6DGMwg53IvEZyImUvXZzWll3je+3Wv8XKvttS26HRfy5xN
 V7QQo0ntTfpR+Fbzd6RGGUKtTV2WIWkGDeLtdrxQK7CZZDzn2REl/fY5PsWe/WdFwuk0
 50pjYv9QgshBF8UJt7Uwd4tkWKpL2DH3KUUFFFfm7uSwQG1sFlWQQy5b51I1BOhw/ojW 6A== 
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=cadence.com; s=selector2;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=cN0vULxSipmEzZd60jDacbkYUxrLO2+15/quWLxFwvQ=;
 b=kCzkt/BZJhPbQplN11E33fOTO4WrzaVMrcH+ctbSHyknEDfA6Em1Hvgxp3vIL7LkDNaZEE7sgwJTCoOi0SI2p5JbTN4GVKk7lL2OFOjoX4s+PmvIcX42x97hm0T4zyybv2peSW/jy18ayigGXEc24nmU7cylbIwmMclXiqDe0uk=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mparab@cadence.com, yamonkar@cadence.com, praneeth@ti.com,
 dkangude@cadence.com, jsarha@ti.com, kishon@ti.com, tomi.valkeinen@ti.com,
 sjakhade@cadence.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogU3dhcG5pbCBKYWtoYWRlIDxzamFraGFkZUBjYWRlbmNlLmNvbT4KCkFkZCBzdXBwb3J0
IGZvciBQSFkgY29uZmlndXJhdGlvbiBBUElzLiBUaGVzZSB3aWxsIG1haW5seSByZWNvbmZpZ3Vy
ZQpsaW5rIHJhdGUsIG51bWJlciBvZiBsYW5lcywgdm9sdGFnZSBzd2luZyBhbmQgcHJlLWVtcGhh
c2lzIHZhbHVlcy4KClNpZ25lZC1vZmYtYnk6IFN3YXBuaWwgSmFraGFkZSA8c2pha2hhZGVAY2Fk
ZW5jZS5jb20+Ci0tLQogZHJpdmVycy9waHkvY2FkZW5jZS9waHktY2FkZW5jZS10b3JyZW50LmMg
fCA0MjQgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAxIGZpbGUgY2hhbmdlZCwgNDI0
IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3BoeS9jYWRlbmNlL3BoeS1jYWRl
bmNlLXRvcnJlbnQuYyBiL2RyaXZlcnMvcGh5L2NhZGVuY2UvcGh5LWNhZGVuY2UtdG9ycmVudC5j
CmluZGV4IGViYzNiNjguLjAwNmU3ODYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvcGh5L2NhZGVuY2Uv
cGh5LWNhZGVuY2UtdG9ycmVudC5jCisrKyBiL2RyaXZlcnMvcGh5L2NhZGVuY2UvcGh5LWNhZGVu
Y2UtdG9ycmVudC5jCkBAIC0zNyw2ICszNyw5IEBACiAjZGVmaW5lIFBIWV9BVVhfQ09ORklHCQkJ
MHgwMAogI2RlZmluZSBQSFlfQVVYX0NUUkwJCQkweDA0CiAjZGVmaW5lIFBIWV9SRVNFVAkJCTB4
MjAKKyNkZWZpbmUgUE1BX1RYX0VMRUNfSURMRV9NQVNLCQkweEYwVQorI2RlZmluZSBQTUFfVFhf
RUxFQ19JRExFX1NISUZUCQk0CisjZGVmaW5lIFBIWV9MMDBfUkVTRVRfTl9NQVNLCQkweDAxVQog
I2RlZmluZSBQSFlfUE1BX1hDVlJfUExMQ0xLX0VOCQkweDI0CiAjZGVmaW5lIFBIWV9QTUFfWENW
Ul9QTExDTEtfRU5fQUNLCTB4MjgKICNkZWZpbmUgUEhZX1BNQV9YQ1ZSX1BPV0VSX1NUQVRFX1JF
UQkweDJjCkBAIC0xMjAsNiArMTIzLDEwIEBACiAjZGVmaW5lIENNTl9QRElBR19QTEwxX0NQX0lB
REpfTTAJMHgwMDcxNAogI2RlZmluZSBDTU5fUERJQUdfUExMMV9GSUxUX1BBREpfTTAJMHgwMDcx
OAogCisjZGVmaW5lIFRYX1RYQ0NfQ1RSTAkJCTB4MTAxMDAKKyNkZWZpbmUgVFhfVFhDQ19DUE9T
VF9NVUxUXzAwCQkweDEwMTMwCisjZGVmaW5lIFRYX1RYQ0NfTUdORlNfTVVMVF8wMDAJCTB4MTAx
NDAKKyNkZWZpbmUgRFJWX0RJQUdfVFhfRFJWCQkJMHgxMDMxOAogI2RlZmluZSBYQ1ZSX0RJQUdf
UExMRFJDX0NUUkwJCTB4MTAzOTQKICNkZWZpbmUgWENWUl9ESUFHX0hTQ0xLX1NFTAkJMHgxMDM5
OAogI2RlZmluZSBYQ1ZSX0RJQUdfSFNDTEtfRElWCQkweDEwMzljCkBAIC0xMjksNiArMTM2LDgg
QEAKICNkZWZpbmUgVFhfUFNDX0EyCQkJMHgxMDQwOAogI2RlZmluZSBUWF9QU0NfQTMJCQkweDEw
NDBjCiAjZGVmaW5lIFRYX1JDVkRFVF9TVF9UTVIJCTB4MTA0OGMKKyNkZWZpbmUgVFhfRElBR19B
Q1lBCQkJMHgxMDc5YworI2RlZmluZSBUWF9ESUFHX0FDWUFfSEJEQ19NQVNLCQkweDAwMDFVCiAj
ZGVmaW5lIFJYX1BTQ19BMAkJCTB4MjAwMDAKICNkZWZpbmUgUlhfUFNDX0ExCQkJMHgyMDAwNAog
I2RlZmluZSBSWF9QU0NfQTIJCQkweDIwMDA4CkBAIC0xNDAsNiArMTQ5LDkgQEAKIAogI2RlZmlu
ZSBQSFlfUExMX0NGRwkJCTB4MzAwMzgKIAorI2RlZmluZSBQSFlfUE1BX0NNTl9DVFJMMgkJMHgz
ODAwNAorI2RlZmluZSBQSFlfUE1BX1BMTF9SQVdfQ1RSTAkJMHgzODAwYworCiBzdHJ1Y3QgY2Ru
c190b3JyZW50X3BoeSB7CiAJdm9pZCBfX2lvbWVtICpiYXNlOwkvKiBEUFRYIHJlZ2lzdGVycyBi
YXNlICovCiAJdm9pZCBfX2lvbWVtICpzZF9iYXNlOyAvKiBTRDA4MDEgcmVnaXN0ZXJzIGJhc2Ug
Ki8KQEAgLTE4NCwxMiArMTk2LDE4IEBAIHN0YXRpYyB2b2lkIGNkbnNfZHBfcGh5X3dyaXRlX2Zp
ZWxkKHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5ICpjZG5zX3BoeSwKIAkJCQkgICAgdW5zaWduZWQg
Y2hhciBudW1fYml0cywKIAkJCQkgICAgdW5zaWduZWQgaW50IHZhbCk7CiAKK3N0YXRpYyBpbnQg
Y2Ruc190b3JyZW50X2RwX2NvbmZpZ3VyZShzdHJ1Y3QgcGh5ICpwaHksCisJCQkJICAgICB1bmlv
biBwaHlfY29uZmlndXJlX29wdHMgKm9wdHMpOworc3RhdGljIGludCBjZG5zX3RvcnJlbnRfZHBf
c2V0X3Bvd2VyX3N0YXRlKHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5ICpjZG5zX3BoeSwKKwkJCQkJ
ICAgdTMyIG51bV9sYW5lcywKKwkJCQkJICAgZW51bSBwaHlfcG93ZXJzdGF0ZSBwb3dlcnN0YXRl
KTsKIHN0YXRpYyBpbnQgY2Ruc190b3JyZW50X3BoeV9vbihzdHJ1Y3QgcGh5ICpwaHkpOwogc3Rh
dGljIGludCBjZG5zX3RvcnJlbnRfcGh5X29mZihzdHJ1Y3QgcGh5ICpwaHkpOwogCiBzdGF0aWMg
Y29uc3Qgc3RydWN0IHBoeV9vcHMgY2Ruc190b3JyZW50X3BoeV9vcHMgPSB7CiAJLmluaXQJCT0g
Y2Ruc190b3JyZW50X2RwX2luaXQsCiAJLmV4aXQJCT0gY2Ruc190b3JyZW50X2RwX2V4aXQsCisJ
LmNvbmZpZ3VyZQk9IGNkbnNfdG9ycmVudF9kcF9jb25maWd1cmUsCiAJLnBvd2VyX29uCT0gY2Ru
c190b3JyZW50X3BoeV9vbiwKIAkucG93ZXJfb2ZmCT0gY2Ruc190b3JyZW50X3BoeV9vZmYsCiAJ
Lm93bmVyCQk9IFRISVNfTU9EVUxFLApAQCAtMjAzLDYgKzIyMSwxNiBAQCBzdGF0aWMgdm9pZCBj
ZG5zX3RvcnJlbnRfcGh5X3dyaXRlKHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5ICpjZG5zX3BoeSwK
IAl3cml0ZWwodmFsLCBjZG5zX3BoeS0+c2RfYmFzZSArIG9mZnNldCk7CiB9CiAKK3N0YXRpYyB1
MzIgY2Ruc190b3JyZW50X3BoeV9yZWFkKHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5ICpjZG5zX3Bo
eSwgdTMyIG9mZnNldCkKK3sKKwlyZXR1cm4gcmVhZGwoY2Ruc19waHktPnNkX2Jhc2UgKyBvZmZz
ZXQpOworfQorCisjZGVmaW5lIGNkbnNfdG9ycmVudF9waHlfcmVhZF9wb2xsX3RpbWVvdXQoY2Ru
c19waHksIG9mZnNldCwgdmFsLCBjb25kLCBcCisJCQkJCSAgIGRlbGF5X3VzLCB0aW1lb3V0X3Vz
KSBcCisJcmVhZGxfcG9sbF90aW1lb3V0KChjZG5zX3BoeSktPnNkX2Jhc2UgKyAob2Zmc2V0KSwg
XAorCQkJICAgdmFsLCBjb25kLCBkZWxheV91cywgdGltZW91dF91cykKKwogLyogRFBUWCBtbXIg
YWNjZXNzIGZ1bmN0aW9ucyAqLwogCiBzdGF0aWMgdm9pZCBjZG5zX3RvcnJlbnRfZHBfd3JpdGUo
c3RydWN0IGNkbnNfdG9ycmVudF9waHkgKmNkbnNfcGh5LApAQCAtMjIxLDYgKzI0OSwyMzcgQEAg
c3RhdGljIHUzMiBjZG5zX3RvcnJlbnRfZHBfcmVhZChzdHJ1Y3QgY2Ruc190b3JyZW50X3BoeSAq
Y2Ruc19waHksIHUzMiBvZmZzZXQpCiAJcmVhZGxfcG9sbF90aW1lb3V0KChjZG5zX3BoeSktPmJh
c2UgKyAob2Zmc2V0KSwgXAogCQkJICAgdmFsLCBjb25kLCBkZWxheV91cywgdGltZW91dF91cykK
IAorLyoKKyAqIFN0cnVjdHVyZSB1c2VkIHRvIHN0b3JlIHZhbHVlcyBvZiBQSFkgcmVnaXN0ZXJz
IGZvciB2b2x0YWdlLXJlbGF0ZWQKKyAqIGNvZWZmaWNpZW50cywgZm9yIHBhcnRpY3VsYXIgdm9s
dGFnZSBzd2luZyBhbmQgcHJlLWVtcGhhc2lzIGxldmVsLiBWYWx1ZXMKKyAqIGFyZSBzaGFyZWQg
YWNyb3NzIGFsbCBwaHlzaWNhbCBsYW5lcy4KKyAqLworc3RydWN0IGNvZWZmaWNpZW50cyB7CisJ
LyogVmFsdWUgb2YgRFJWX0RJQUdfVFhfRFJWIHJlZ2lzdGVyIHRvIHVzZSAqLworCXUxNiBkaWFn
X3R4X2RydjsKKwkvKiBWYWx1ZSBvZiBUWF9UWENDX01HTkZTX01VTFRfMDAwIHJlZ2lzdGVyIHRv
IHVzZSAqLworCXUxNiBtZ25mc19tdWx0OworCS8qIFZhbHVlIG9mIFRYX1RYQ0NfQ1BPU1RfTVVM
VF8wMCByZWdpc3RlciB0byB1c2UgKi8KKwl1MTYgY3Bvc3RfbXVsdDsKK307CisKKy8qCisgKiBB
cnJheSBjb25zaXN0cyBvZiB2YWx1ZXMgb2Ygdm9sdGFnZS1yZWxhdGVkIHJlZ2lzdGVycyBmb3Ig
c2QwODAxIFBIWS4gQSB2YWx1ZQorICogb2YgMHhGRkZGIGlzIGEgcGxhY2Vob2xkZXIgZm9yIGlu
dmFsaWQgY29tYmluYXRpb24sIGFuZCB3aWxsIG5ldmVyIGJlIHVzZWQuCisgKi8KK3N0YXRpYyBj
b25zdCBzdHJ1Y3QgY29lZmZpY2llbnRzIHZsdGdfY29lZmZbNF1bNF0gPSB7CisJLyogdm9sdGFn
ZSBzd2luZyAwLCBwcmUtZW1waGFzaXMgMC0+MyAqLworCXsJey5kaWFnX3R4X2RydiA9IDB4MDAw
MywgLm1nbmZzX211bHQgPSAweDAwMkEsCisJCSAuY3Bvc3RfbXVsdCA9IDB4MDAwMH0sCisJCXsu
ZGlhZ190eF9kcnYgPSAweDAwMDMsIC5tZ25mc19tdWx0ID0gMHgwMDFGLAorCQkgLmNwb3N0X211
bHQgPSAweDAwMTR9LAorCQl7LmRpYWdfdHhfZHJ2ID0gMHgwMDAzLCAubWduZnNfbXVsdCA9IDB4
MDAxMiwKKwkJIC5jcG9zdF9tdWx0ID0gMHgwMDIwfSwKKwkJey5kaWFnX3R4X2RydiA9IDB4MDAw
MywgLm1nbmZzX211bHQgPSAweDAwMDAsCisJCSAuY3Bvc3RfbXVsdCA9IDB4MDAyQX0KKwl9LAor
CisJLyogdm9sdGFnZSBzd2luZyAxLCBwcmUtZW1waGFzaXMgMC0+MyAqLworCXsJey5kaWFnX3R4
X2RydiA9IDB4MDAwMywgLm1nbmZzX211bHQgPSAweDAwMUYsCisJCSAuY3Bvc3RfbXVsdCA9IDB4
MDAwMH0sCisJCXsuZGlhZ190eF9kcnYgPSAweDAwMDMsIC5tZ25mc19tdWx0ID0gMHgwMDEzLAor
CQkgLmNwb3N0X211bHQgPSAweDAwMTJ9LAorCQl7LmRpYWdfdHhfZHJ2ID0gMHgwMDAzLCAubWdu
ZnNfbXVsdCA9IDB4MDAwMCwKKwkJIC5jcG9zdF9tdWx0ID0gMHgwMDFGfSwKKwkJey5kaWFnX3R4
X2RydiA9IDB4RkZGRiwgLm1nbmZzX211bHQgPSAweEZGRkYsCisJCSAuY3Bvc3RfbXVsdCA9IDB4
RkZGRn0KKwl9LAorCisJLyogdm9sdGFnZSBzd2luZyAyLCBwcmUtZW1waGFzaXMgMC0+MyAqLwor
CXsJey5kaWFnX3R4X2RydiA9IDB4MDAwMywgLm1nbmZzX211bHQgPSAweDAwMTMsCisJCSAuY3Bv
c3RfbXVsdCA9IDB4MDAwMH0sCisJCXsuZGlhZ190eF9kcnYgPSAweDAwMDMsIC5tZ25mc19tdWx0
ID0gMHgwMDAwLAorCQkgLmNwb3N0X211bHQgPSAweDAwMTN9LAorCQl7LmRpYWdfdHhfZHJ2ID0g
MHhGRkZGLCAubWduZnNfbXVsdCA9IDB4RkZGRiwKKwkJIC5jcG9zdF9tdWx0ID0gMHhGRkZGfSwK
KwkJey5kaWFnX3R4X2RydiA9IDB4RkZGRiwgLm1nbmZzX211bHQgPSAweEZGRkYsCisJCSAuY3Bv
c3RfbXVsdCA9IDB4RkZGRn0KKwl9LAorCisJLyogdm9sdGFnZSBzd2luZyAzLCBwcmUtZW1waGFz
aXMgMC0+MyAqLworCXsJey5kaWFnX3R4X2RydiA9IDB4MDAwMywgLm1nbmZzX211bHQgPSAweDAw
MDAsCisJCSAuY3Bvc3RfbXVsdCA9IDB4MDAwMH0sCisJCXsuZGlhZ190eF9kcnYgPSAweEZGRkYs
IC5tZ25mc19tdWx0ID0gMHhGRkZGLAorCQkgLmNwb3N0X211bHQgPSAweEZGRkZ9LAorCQl7LmRp
YWdfdHhfZHJ2ID0gMHhGRkZGLCAubWduZnNfbXVsdCA9IDB4RkZGRiwKKwkJIC5jcG9zdF9tdWx0
ID0gMHhGRkZGfSwKKwkJey5kaWFnX3R4X2RydiA9IDB4RkZGRiwgLm1nbmZzX211bHQgPSAweEZG
RkYsCisJCSAuY3Bvc3RfbXVsdCA9IDB4RkZGRn0KKwl9Cit9OworCisvKgorICogRW5hYmxlIG9y
IGRpc2FibGUgUExMIGZvciBzZWxlY3RlZCBsYW5lcy4KKyAqLworc3RhdGljIGludCBjZG5zX3Rv
cnJlbnRfZHBfc2V0X3BsbF9lbihzdHJ1Y3QgY2Ruc190b3JyZW50X3BoeSAqY2Ruc19waHksCisJ
CQkJICAgICAgc3RydWN0IHBoeV9jb25maWd1cmVfb3B0c19kcCAqZHAsCisJCQkJICAgICAgYm9v
bCBlbmFibGUpCit7CisJdTMyIHJkX3ZhbDsKKwl1MzIgcmV0OworCS8qCisJICogVXNlZCB0byBk
ZXRlcm1pbmUsIHdoaWNoIGJpdHMgdG8gY2hlY2sgZm9yIG9yIGVuYWJsZSBpbgorCSAqIFBIWV9Q
TUFfWENWUl9QTExDTEtfRU4gcmVnaXN0ZXIuCisJICovCisJdTMyIHBsbF9iaXRzOworCS8qIFVz
ZWQgdG8gZW5hYmxlIG9yIGRpc2FibGUgbGFuZXMuICovCisJdTMyIHBsbF92YWw7CisKKwkvKiBT
ZWxlY3QgdmFsdWVzIG9mIHJlZ2lzdGVycyBhbmQgbWFzaywgZGVwZW5kaW5nIG9uIGVuYWJsZWQg
bGFuZQorCSAqIGNvdW50LgorCSAqLworCXN3aXRjaCAoZHAtPmxhbmVzKSB7CisJLyogbGFuZSAw
ICovCisJY2FzZSAoMSk6CisJCXBsbF9iaXRzID0gMHgwMDAwMDAwMTsKKwkJYnJlYWs7CisJLyog
bGFuZXMgMC0xICovCisJY2FzZSAoMik6CisJCXBsbF9iaXRzID0gMHgwMDAwMDAwMzsKKwkJYnJl
YWs7CisJLyogbGFuZXMgMC0zLCBhbGwgKi8KKwlkZWZhdWx0OgorCQlwbGxfYml0cyA9IDB4MDAw
MDAwMEY7CisJCWJyZWFrOworCX0KKworCWlmIChlbmFibGUpCisJCXBsbF92YWwgPSBwbGxfYml0
czsKKwllbHNlCisJCXBsbF92YWwgPSAweDAwMDAwMDAwOworCisJY2Ruc190b3JyZW50X2RwX3dy
aXRlKGNkbnNfcGh5LCBQSFlfUE1BX1hDVlJfUExMQ0xLX0VOLCBwbGxfdmFsKTsKKworCS8qIFdh
aXQgZm9yIGFja25vd2xlZGdtZW50IGZyb20gUEhZLiAqLworCXJldCA9IGNkbnNfdG9ycmVudF9k
cF9yZWFkX3BvbGxfdGltZW91dChjZG5zX3BoeSwKKwkJCQkJCVBIWV9QTUFfWENWUl9QTExDTEtf
RU5fQUNLLAorCQkJCQkJcmRfdmFsLAorCQkJCQkJKHJkX3ZhbCAmIHBsbF9iaXRzKSA9PSBwbGxf
dmFsLAorCQkJCQkJMCwgUE9MTF9USU1FT1VUX1VTKTsKKwluZGVsYXkoMTAwKTsKKwlyZXR1cm4g
cmV0OworfQorCisvKgorICogUGVyZm9ybSByZWdpc3RlciBvcGVyYXRpb25zIHJlbGF0ZWQgdG8g
c2V0dGluZyBsaW5rIHJhdGUsIG9uY2UgcG93ZXJzdGF0ZSBpcworICogc2V0IGFuZCBQTEwgZGlz
YWJsZSByZXF1ZXN0IHdhcyBwcm9jZXNzZWQuCisgKi8KK3N0YXRpYyBpbnQgY2Ruc190b3JyZW50
X2RwX2NvbmZpZ3VyZV9yYXRlKHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5ICpjZG5zX3BoeSwKKwkJ
CQkJICBzdHJ1Y3QgcGh5X2NvbmZpZ3VyZV9vcHRzX2RwICpkcCkKK3sKKwl1MzIgcmV0OworCXUz
MiByZWFkX3ZhbDsKKworCS8qIERpc2FibGUgdGhlIGNtbl9wbGwwX2VuIGJlZm9yZSByZS1wcm9n
cmFtbWluZyB0aGUgbmV3IGRhdGEgcmF0ZS4gKi8KKwljZG5zX3RvcnJlbnRfcGh5X3dyaXRlKGNk
bnNfcGh5LCBQSFlfUE1BX1BMTF9SQVdfQ1RSTCwgMCk7CisKKwkvKgorCSAqIFdhaXQgZm9yIFBM
TCByZWFkeSBkZS1hc3NlcnRpb24uCisJICogRm9yIFBMTDAgLSBQSFlfUE1BX0NNTl9DVFJMMlsy
XSA9PSAxCisJICovCisJcmV0ID0gY2Ruc190b3JyZW50X3BoeV9yZWFkX3BvbGxfdGltZW91dChj
ZG5zX3BoeSwgUEhZX1BNQV9DTU5fQ1RSTDIsCisJCQkJCQkgcmVhZF92YWwsCisJCQkJCQkgKChy
ZWFkX3ZhbCA+PiAyKSAmIDB4MDEpICE9IDAsCisJCQkJCQkgMCwgUE9MTF9USU1FT1VUX1VTKTsK
KwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCW5kZWxheSgyMDApOworCisJLyogRFAgUmF0ZSBD
aGFuZ2UgLSBWQ08gT3V0cHV0IHNldHRpbmdzLiAqLworCWlmIChjZG5zX3BoeS0+cmVmX2Nsa19y
YXRlID09IFJFRl9DTEtfMTlfMk1IeikgeworCQkvKiBQTUEgY29tbW9uIGNvbmZpZ3VyYXRpb24g
MTkuMk1IeiAqLworCQljZG5zX3RvcnJlbnRfZHBfcG1hX2Ntbl92Y29fY2ZnXzE5XzJtaHooY2Ru
c19waHksIGRwLT5saW5rX3JhdGUsCisJCQkJCQkJZHAtPnNzYyk7CisJCWNkbnNfdG9ycmVudF9k
cF9wbWFfY21uX2NmZ18xOV8ybWh6KGNkbnNfcGh5KTsKKwl9IGVsc2UgaWYgKGNkbnNfcGh5LT5y
ZWZfY2xrX3JhdGUgPT0gUkVGX0NMS18yNU1IeikgeworCQkvKiBQTUEgY29tbW9uIGNvbmZpZ3Vy
YXRpb24gMjVNSHogKi8KKwkJY2Ruc190b3JyZW50X2RwX3BtYV9jbW5fdmNvX2NmZ18yNW1oeihj
ZG5zX3BoeSwgZHAtPmxpbmtfcmF0ZSwKKwkJCQkJCSAgICAgIGRwLT5zc2MpOworCQljZG5zX3Rv
cnJlbnRfZHBfcG1hX2Ntbl9jZmdfMjVtaHooY2Ruc19waHkpOworCX0KKwljZG5zX3RvcnJlbnRf
ZHBfcG1hX2Ntbl9yYXRlKGNkbnNfcGh5LCBkcC0+bGlua19yYXRlLCBkcC0+bGFuZXMpOworCisJ
LyogRW5hYmxlIHRoZSBjbW5fcGxsMF9lbi4gKi8KKwljZG5zX3RvcnJlbnRfcGh5X3dyaXRlKGNk
bnNfcGh5LCBQSFlfUE1BX1BMTF9SQVdfQ1RSTCwgMHgzKTsKKworCS8qCisJICogV2FpdCBmb3Ig
UExMIHJlYWR5IGFzc2VydGlvbi4KKwkgKiBGb3IgUExMMCAtIFBIWV9QTUFfQ01OX0NUUkwyWzBd
ID09IDEKKwkgKi8KKwlyZXQgPSBjZG5zX3RvcnJlbnRfcGh5X3JlYWRfcG9sbF90aW1lb3V0KGNk
bnNfcGh5LCBQSFlfUE1BX0NNTl9DVFJMMiwKKwkJCQkJCSByZWFkX3ZhbCwKKwkJCQkJCSAocmVh
ZF92YWwgJiAweDAxKSAhPSAwLAorCQkJCQkJIDAsIFBPTExfVElNRU9VVF9VUyk7CisJcmV0dXJu
IHJldDsKK30KKworLyoKKyAqIFZlcmlmeSwgdGhhdCBwYXJhbWV0ZXJzIHRvIGNvbmZpZ3VyZSBQ
SFkgd2l0aCBhcmUgY29ycmVjdC4KKyAqLworc3RhdGljIGludCBjZG5zX3RvcnJlbnRfZHBfdmVy
aWZ5X2NvbmZpZyhzdHJ1Y3QgY2Ruc190b3JyZW50X3BoeSAqY2Ruc19waHksCisJCQkJCSBzdHJ1
Y3QgcGh5X2NvbmZpZ3VyZV9vcHRzX2RwICpkcCkKK3sKKwl1OCBpOworCisJLyogSWYgY2hhbmdp
bmcgbGluayByYXRlIHdhcyByZXF1aXJlZCwgdmVyaWZ5IGl0J3Mgc3VwcG9ydGVkLiAqLworCWlm
IChkcC0+c2V0X3JhdGUpIHsKKwkJc3dpdGNoIChkcC0+bGlua19yYXRlKSB7CisJCWNhc2UgMTYy
MDoKKwkJY2FzZSAyMTYwOgorCQljYXNlIDI0MzA6CisJCWNhc2UgMjcwMDoKKwkJY2FzZSAzMjQw
OgorCQljYXNlIDQzMjA6CisJCWNhc2UgNTQwMDoKKwkJY2FzZSA4MTAwOgorCQkJLyogdmFsaWQg
Yml0IHJhdGUgKi8KKwkJCWJyZWFrOworCQlkZWZhdWx0OgorCQkJcmV0dXJuIC1FSU5WQUw7CisJ
CX0KKwl9CisKKwkvKiBWZXJpZnkgbGFuZSBjb3VudC4gKi8KKwlzd2l0Y2ggKGRwLT5sYW5lcykg
eworCWNhc2UgMToKKwljYXNlIDI6CisJY2FzZSA0OgorCQkvKiB2YWxpZCBsYW5lIGNvdW50LiAq
LworCQlicmVhazsKKwlkZWZhdWx0OgorCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwkvKiBDaGVj
ayBhZ2FpbnN0IGFjdHVhbCBudW1iZXIgb2YgUEhZJ3MgbGFuZXMuICovCisJaWYgKGRwLT5sYW5l
cyA+IGNkbnNfcGh5LT5udW1fbGFuZXMpCisJCXJldHVybiAtRUlOVkFMOworCisJLyoKKwkgKiBJ
ZiBjaGFuZ2luZyB2b2x0YWdlcyBpcyByZXF1aXJlZCwgY2hlY2sgc3dpbmcgYW5kIHByZS1lbXBo
YXNpcworCSAqIGxldmVscywgcGVyLWxhbmUuCisJICovCisJaWYgKGRwLT5zZXRfdm9sdGFnZXMp
IHsKKwkJLyogTGFuZSBjb3VudCB2ZXJpZmllZCBwcmV2aW91c2x5LiAqLworCQlmb3IgKGkgPSAw
OyBpIDwgZHAtPmxhbmVzOyBpKyspIHsKKwkJCWlmIChkcC0+dm9sdGFnZVtpXSA+IDMgfHwgZHAt
PnByZVtpXSA+IDMpCisJCQkJcmV0dXJuIC1FSU5WQUw7CisKKwkJCS8qIFN1bSBvZiB2b2x0YWdl
IHN3aW5nIGFuZCBwcmUtZW1waGFzaXMgbGV2ZWxzIGNhbm5vdAorCQkJICogZXhjZWVkIDMuCisJ
CQkgKi8KKwkJCWlmIChkcC0+dm9sdGFnZVtpXSArIGRwLT5wcmVbaV0gPiAzKQorCQkJCXJldHVy
biAtRUlOVkFMOworCQl9CisJfQorCisJcmV0dXJuIDA7Cit9CisKIC8qIFNldCBwb3dlciBzdGF0
ZSBBMCBhbmQgUExMIGNsb2NrIGVuYWJsZSB0byAwIG9uIGVuYWJsZWQgbGFuZXMuICovCiBzdGF0
aWMgdm9pZCBjZG5zX3RvcnJlbnRfZHBfc2V0X2EwX3BsbChzdHJ1Y3QgY2Ruc190b3JyZW50X3Bo
eSAqY2Ruc19waHksCiAJCQkJICAgICAgIHUzMiBudW1fbGFuZXMpCkBAIC0yNTcsNiArNTE2LDE3
MSBAQCBzdGF0aWMgdm9pZCBjZG5zX3RvcnJlbnRfZHBfc2V0X2EwX3BsbChzdHJ1Y3QgY2Ruc190
b3JyZW50X3BoeSAqY2Ruc19waHksCiAJY2Ruc190b3JyZW50X2RwX3dyaXRlKGNkbnNfcGh5LCBQ
SFlfUE1BX1hDVlJfUExMQ0xLX0VOLCBwbGxfY2xrX2VuKTsKIH0KIAorLyogQ29uZmlndXJlIGxh
bmUgY291bnQgYXMgcmVxdWlyZWQuICovCitzdGF0aWMgaW50IGNkbnNfdG9ycmVudF9kcF9zZXRf
bGFuZXMoc3RydWN0IGNkbnNfdG9ycmVudF9waHkgKmNkbnNfcGh5LAorCQkJCSAgICAgc3RydWN0
IHBoeV9jb25maWd1cmVfb3B0c19kcCAqZHApCit7CisJdTMyIHZhbHVlOworCXUzMiByZXQ7CisJ
dTggbGFuZV9tYXNrID0gKDEgPDwgZHAtPmxhbmVzKSAtIDE7CisKKwl2YWx1ZSA9IGNkbnNfdG9y
cmVudF9kcF9yZWFkKGNkbnNfcGh5LCBQSFlfUkVTRVQpOworCS8qIGNsZWFyIHBtYV90eF9lbGVj
X2lkbGVfbG5fKiBiaXRzLiAqLworCXZhbHVlICY9IH5QTUFfVFhfRUxFQ19JRExFX01BU0s7CisJ
LyogQXNzZXJ0IHBtYV90eF9lbGVjX2lkbGVfbG5fKiBmb3IgZGlzYWJsZWQgbGFuZXMuICovCisJ
dmFsdWUgfD0gKCh+bGFuZV9tYXNrKSA8PCBQTUFfVFhfRUxFQ19JRExFX1NISUZUKSAmCisJCSBQ
TUFfVFhfRUxFQ19JRExFX01BU0s7CisJY2Ruc190b3JyZW50X2RwX3dyaXRlKGNkbnNfcGh5LCBQ
SFlfUkVTRVQsIHZhbHVlKTsKKworCS8qIHJlc2V0IHRoZSBsaW5rIGJ5IGFzc2VydGluZyBwaHlf
bDAwX3Jlc2V0X24gbG93ICovCisJY2Ruc190b3JyZW50X2RwX3dyaXRlKGNkbnNfcGh5LCBQSFlf
UkVTRVQsCisJCQkgICAgICB2YWx1ZSAmICh+UEhZX0wwMF9SRVNFVF9OX01BU0spKTsKKworCS8q
CisJICogQXNzZXJ0IGxhbmUgcmVzZXQgb24gdW51c2VkIGxhbmVzIGFuZCBsYW5lIDAgc28gdGhl
eSByZW1haW4gaW4gcmVzZXQKKwkgKiBhbmQgcG93ZXJlZCBkb3duIHdoZW4gcmUtZW5hYmxpbmcg
dGhlIGxpbmsKKwkgKi8KKwl2YWx1ZSA9ICh2YWx1ZSAmIDB4MDAwMEZGRjApIHwgKDB4MDAwMDAw
MEUgJiBsYW5lX21hc2spOworCWNkbnNfdG9ycmVudF9kcF93cml0ZShjZG5zX3BoeSwgUEhZX1JF
U0VULCB2YWx1ZSk7CisKKwljZG5zX3RvcnJlbnRfZHBfc2V0X2EwX3BsbChjZG5zX3BoeSwgZHAt
PmxhbmVzKTsKKworCS8qIHJlbGVhc2UgcGh5X2wwKl9yZXNldF9uIGJhc2VkIG9uIHVzZWQgbGFu
ZUNvdW50ICovCisJdmFsdWUgPSAodmFsdWUgJiAweDAwMDBGRkYwKSB8ICgweDAwMDAwMDBGICYg
bGFuZV9tYXNrKTsKKwljZG5zX3RvcnJlbnRfZHBfd3JpdGUoY2Ruc19waHksIFBIWV9SRVNFVCwg
dmFsdWUpOworCisJLyogV2FpdCwgdW50aWwgUEhZIGdldHMgcmVhZHkgYWZ0ZXIgcmVsZWFzaW5n
IFBIWSByZXNldCBzaWduYWwuICovCisJcmV0ID0gY2Ruc190b3JyZW50X2RwX3dhaXRfcG1hX2Nt
bl9yZWFkeShjZG5zX3BoeSk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCW5kZWxheSgx
MDApOworCisJLyogcmVsZWFzZSBwbWFfeGN2cl9wbGxjbGtfZW5fbG5fKiwgb25seSBmb3IgdGhl
IG1hc3RlciBsYW5lICovCisJY2Ruc190b3JyZW50X2RwX3dyaXRlKGNkbnNfcGh5LCBQSFlfUE1B
X1hDVlJfUExMQ0xLX0VOLCAweDAwMDEpOworCisJcmV0ID0gY2Ruc190b3JyZW50X2RwX3J1bihj
ZG5zX3BoeSk7CisKKwlyZXR1cm4gcmV0OworfQorCisvKiBDb25maWd1cmUgbGluayByYXRlIGFz
IHJlcXVpcmVkLiAqLworc3RhdGljIGludCBjZG5zX3RvcnJlbnRfZHBfc2V0X3JhdGUoc3RydWN0
IGNkbnNfdG9ycmVudF9waHkgKmNkbnNfcGh5LAorCQkJCSAgICBzdHJ1Y3QgcGh5X2NvbmZpZ3Vy
ZV9vcHRzX2RwICpkcCkKK3sKKwl1MzIgcmV0OworCisJcmV0ID0gY2Ruc190b3JyZW50X2RwX3Nl
dF9wb3dlcl9zdGF0ZShjZG5zX3BoeSwgZHAtPmxhbmVzLAorCQkJCQkgICAgICBQT1dFUlNUQVRF
X0EzKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCXJldCA9IGNkbnNfdG9ycmVudF9kcF9z
ZXRfcGxsX2VuKGNkbnNfcGh5LCBkcCwgZmFsc2UpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7
CisJbmRlbGF5KDIwMCk7CisKKwlyZXQgPSBjZG5zX3RvcnJlbnRfZHBfY29uZmlndXJlX3JhdGUo
Y2Ruc19waHksIGRwKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCW5kZWxheSgyMDApOwor
CisJcmV0ID0gY2Ruc190b3JyZW50X2RwX3NldF9wbGxfZW4oY2Ruc19waHksIGRwLCB0cnVlKTsK
KwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCXJldCA9IGNkbnNfdG9ycmVudF9kcF9zZXRfcG93
ZXJfc3RhdGUoY2Ruc19waHksIGRwLT5sYW5lcywKKwkJCQkJICAgICAgUE9XRVJTVEFURV9BMik7
CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKwlyZXQgPSBjZG5zX3RvcnJlbnRfZHBfc2V0X3Bv
d2VyX3N0YXRlKGNkbnNfcGh5LCBkcC0+bGFuZXMsCisJCQkJCSAgICAgIFBPV0VSU1RBVEVfQTAp
OworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisJbmRlbGF5KDkwMCk7CisKKwlyZXR1cm4gcmV0
OworfQorCisvKiBDb25maWd1cmUgdm9sdGFnZSBzd2luZyBhbmQgcHJlLWVtcGhhc2lzIGZvciBh
bGwgZW5hYmxlZCBsYW5lcy4gKi8KK3N0YXRpYyB2b2lkIGNkbnNfdG9ycmVudF9kcF9zZXRfdm9s
dGFnZXMoc3RydWN0IGNkbnNfdG9ycmVudF9waHkgKmNkbnNfcGh5LAorCQkJCQkgc3RydWN0IHBo
eV9jb25maWd1cmVfb3B0c19kcCAqZHApCit7CisJdTggbGFuZTsKKwl1MTYgdmFsOworCXVuc2ln
bmVkIGludCBsYW5lX2JpdHM7CisKKwlmb3IgKGxhbmUgPSAwOyBsYW5lIDwgZHAtPmxhbmVzOyBs
YW5lKyspIHsKKwkJbGFuZV9iaXRzID0gKGxhbmUgJiBMQU5FX01BU0spIDw8IDExOworCisJCXZh
bCA9IGNkbnNfdG9ycmVudF9waHlfcmVhZChjZG5zX3BoeSwKKwkJCQkJICAgIChUWF9ESUFHX0FD
WUEgfCBsYW5lX2JpdHMpKTsKKwkJLyoKKwkJICogV3JpdGUgMSB0byByZWdpc3RlciBiaXQgVFhf
RElBR19BQ1lBWzBdIHRvIGZyZWV6ZSB0aGUKKwkJICogY3VycmVudCBzdGF0ZSBvZiB0aGUgYW5h
bG9nIFRYIGRyaXZlci4KKwkJICovCisJCXZhbCB8PSBUWF9ESUFHX0FDWUFfSEJEQ19NQVNLOwor
CQljZG5zX3RvcnJlbnRfcGh5X3dyaXRlKGNkbnNfcGh5LAorCQkJCSAgICAgICAoVFhfRElBR19B
Q1lBIHwgbGFuZV9iaXRzKSwgdmFsKTsKKworCQljZG5zX3RvcnJlbnRfcGh5X3dyaXRlKGNkbnNf
cGh5LAorCQkJCSAgICAgICAoVFhfVFhDQ19DVFJMIHwgbGFuZV9iaXRzKSwgMHgwOEE0KTsKKwkJ
dmFsID0gdmx0Z19jb2VmZltkcC0+dm9sdGFnZVtsYW5lXV1bZHAtPnByZVtsYW5lXV0uZGlhZ190
eF9kcnY7CisJCWNkbnNfdG9ycmVudF9waHlfd3JpdGUoY2Ruc19waHksCisJCQkJICAgICAgIChE
UlZfRElBR19UWF9EUlYgfCBsYW5lX2JpdHMpLCB2YWwpOworCQl2YWwgPSB2bHRnX2NvZWZmW2Rw
LT52b2x0YWdlW2xhbmVdXVtkcC0+cHJlW2xhbmVdXS5tZ25mc19tdWx0OworCQljZG5zX3RvcnJl
bnRfcGh5X3dyaXRlKGNkbnNfcGh5LAorCQkJCSAgICAgICAoVFhfVFhDQ19NR05GU19NVUxUXzAw
MCB8IGxhbmVfYml0cyksCisJCQkJICAgICAgIHZhbCk7CisJCXZhbCA9IHZsdGdfY29lZmZbZHAt
PnZvbHRhZ2VbbGFuZV1dW2RwLT5wcmVbbGFuZV1dLmNwb3N0X211bHQ7CisJCWNkbnNfdG9ycmVu
dF9waHlfd3JpdGUoY2Ruc19waHksCisJCQkJICAgICAgIChUWF9UWENDX0NQT1NUX01VTFRfMDAg
fCBsYW5lX2JpdHMpLAorCQkJCSAgICAgICB2YWwpOworCisJCXZhbCA9IGNkbnNfdG9ycmVudF9w
aHlfcmVhZChjZG5zX3BoeSwKKwkJCQkJICAgIChUWF9ESUFHX0FDWUEgfCBsYW5lX2JpdHMpKTsK
KwkJLyoKKwkJICogV3JpdGUgMCB0byByZWdpc3RlciBiaXQgVFhfRElBR19BQ1lBWzBdIHRvIGFs
bG93IHRoZSBzdGF0ZSBvZgorCQkgKiBhbmFsb2cgVFggZHJpdmVyIHRvIHJlZmxlY3QgdGhlIG5l
dyBwcm9ncmFtbWVkIG9uZS4KKwkJICovCisJCXZhbCAmPSB+VFhfRElBR19BQ1lBX0hCRENfTUFT
SzsKKwkJY2Ruc190b3JyZW50X3BoeV93cml0ZShjZG5zX3BoeSwKKwkJCQkgICAgICAgKFRYX0RJ
QUdfQUNZQSB8IGxhbmVfYml0cyksIHZhbCk7CisJfQorfTsKKworc3RhdGljIGludCBjZG5zX3Rv
cnJlbnRfZHBfY29uZmlndXJlKHN0cnVjdCBwaHkgKnBoeSwKKwkJCQkgICAgIHVuaW9uIHBoeV9j
b25maWd1cmVfb3B0cyAqb3B0cykKK3sKKwlzdHJ1Y3QgY2Ruc190b3JyZW50X3BoeSAqY2Ruc19w
aHkgPSBwaHlfZ2V0X2RydmRhdGEocGh5KTsKKwlpbnQgcmV0OworCisJcmV0ID0gY2Ruc190b3Jy
ZW50X2RwX3ZlcmlmeV9jb25maWcoY2Ruc19waHksICZvcHRzLT5kcCk7CisJaWYgKHJldCkgewor
CQlkZXZfZXJyKCZwaHktPmRldiwgImludmFsaWQgcGFyYW1zIGZvciBwaHkgY29uZmlndXJlXG4i
KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlpZiAob3B0cy0+ZHAuc2V0X2xhbmVzKSB7CisJCXJl
dCA9IGNkbnNfdG9ycmVudF9kcF9zZXRfbGFuZXMoY2Ruc19waHksICZvcHRzLT5kcCk7CisJCWlm
IChyZXQpIHsKKwkJCWRldl9lcnIoJnBoeS0+ZGV2LCAiY2Ruc190b3JyZW50X2RwX3NldF9sYW5l
cyBmYWlsZWRcbiIpOworCQkJcmV0dXJuIHJldDsKKwkJfQorCX0KKworCWlmIChvcHRzLT5kcC5z
ZXRfcmF0ZSkgeworCQlyZXQgPSBjZG5zX3RvcnJlbnRfZHBfc2V0X3JhdGUoY2Ruc19waHksICZv
cHRzLT5kcCk7CisJCWlmIChyZXQpIHsKKwkJCWRldl9lcnIoJnBoeS0+ZGV2LCAiY2Ruc190b3Jy
ZW50X2RwX3NldF9yYXRlIGZhaWxlZFxuIik7CisJCQlyZXR1cm4gcmV0OworCQl9CisJfQorCisJ
aWYgKG9wdHMtPmRwLnNldF92b2x0YWdlcykKKwkJY2Ruc190b3JyZW50X2RwX3NldF92b2x0YWdl
cyhjZG5zX3BoeSwgJm9wdHMtPmRwKTsKKworCXJldHVybiByZXQ7Cit9CisKIHN0YXRpYyBpbnQg
Y2Ruc190b3JyZW50X2RwX2luaXQoc3RydWN0IHBoeSAqcGh5KQogewogCXVuc2lnbmVkIGNoYXIg
bGFuZV9iaXRzOwotLSAKMi43LjQKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2RyaS1kZXZlbA==
