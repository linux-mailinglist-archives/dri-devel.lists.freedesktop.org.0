Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EEE603532A5
	for <lists+dri-devel@lfdr.de>; Sat,  3 Apr 2021 07:09:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7EF006E17D;
	Sat,  3 Apr 2021 05:09:10 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from m15111.mail.126.com (m15111.mail.126.com [220.181.15.111])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CF7C36E17D;
 Sat,  3 Apr 2021 05:09:06 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=126.com;
 s=s110527; h=Subject:From:Message-ID:Date:MIME-Version; bh=rQkev
 JDewABD48/sFYiTAicdrL+ePg85zgsqOxS9BAI=; b=AbOfS0/jKRCR9OTJWCgcA
 y2er+8foc2KFLaGPHg0dTEYKKxiHbh6zgIJ83fvYYDRwUyaK0TkWrlO5H9vi7jhW
 +Sazj54SM8HoFSB5vzbLRy4dVY0axit9hDzoUaSBzbW6/DBFqeB06Ao6cpZ9Yo7k
 fsO7j1P9Ff0/H/8OgT6OeU=
Received: from [172.20.20.87] (unknown [182.150.46.145])
 by smtp1 (Coremail) with SMTP id C8mowAB3flJc+GdgHYX7Pw--.58783S2;
 Sat, 03 Apr 2021 13:08:46 +0800 (CST)
Subject: Re: [PATCH] drm/amdgpu: Fix a potential sdma invalid access
To: =?UTF-8?Q?Christian_K=c3=b6nig?= <christian.koenig@amd.com>,
 alexander.deucher@amd.com, airlied@linux.ie, daniel@ffwll.ch,
 sumit.semwal@linaro.org, airlied@redhat.com, ray.huang@amd.com,
 Mihir.Patel@amd.com, nirmoy.aiemd@gmail.com
References: <1617333527-89782-1-git-send-email-jinsdb@126.com>
 <9b876791-7fa4-46da-7aec-1d1bfde83f4e@amd.com>
From: Qu Huang <jinsdb@126.com>
Message-ID: <84619284-d401-f018-d627-8e5dfef1ff1f@126.com>
Date: Sat, 3 Apr 2021 13:08:44 +0800
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:78.0) Gecko/20100101
 Thunderbird/78.7.1
MIME-Version: 1.0
In-Reply-To: <9b876791-7fa4-46da-7aec-1d1bfde83f4e@amd.com>
X-CM-TRANSID: C8mowAB3flJc+GdgHYX7Pw--.58783S2
X-Coremail-Antispam: 1Uf129KBjvJXoWxWFW5CrWkXw43ZF17Cr4DArb_yoWruF4fpF
 yrJay7uF4Fvr1UJrZrZFs8X34ktr93A3WUKr45tr13X3W3Grn8XF18JrWj9FnrZr40qa17
 tr4kK3ySqr1jgaDanT9S1TB71UUUUUUqnTZGkaVYY2UrUUUUjbIjqfuFe4nvWSU5nxnvy2
 9KBjDUYxBIdaVFxhVjvjDU0xZFpf9x07b138nUUUUU=
X-Originating-IP: [182.150.46.145]
X-CM-SenderInfo: pmlq2vbe6rjloofrz/1tbimR5pDl9E2fqeUQAAsX
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-media@vger.kernel.org, dri-devel@lists.freedesktop.org,
 amd-gfx@lists.freedesktop.org, linux-kernel@vger.kernel.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgQ2hyaXN0aWFuLAoKT24gMjAyMS80LzMgMDoyNSwgQ2hyaXN0aWFuIEvDtm5pZyB3cm90ZToK
PiBIaSBRdSwKPgo+IEFtIDAyLjA0LjIxIHVtIDA1OjE4IHNjaHJpZWIgUXUgSHVhbmc6Cj4+IEJl
Zm9yZSBkbWFfcmVzdl9sb2NrKGJvLT5iYXNlLnJlc3YsIE5VTEwpIGluIGFtZGdwdV9ib19yZWxl
YXNlX25vdGlmeSgpLAo+PiB0aGUgYm8tPmJhc2UucmVzdiBsb2NrIG1heSBiZSBoZWxkIGJ5IHR0
bV9tZW1fZXZpY3RfZmlyc3QoKSwKPgo+IFRoYXQgY2FuJ3QgaGFwcGVuIHNpbmNlIHdoZW4gYm9f
cmVsZWFzZV9ub3RpZnkgaXMgY2FsbGVkIHRoZSBCTyBoYXMgbm90Cj4gbW9yZSByZWZlcmVuY2Vz
IGFuZCBpcyB0aGVyZWZvcmUgZGVsZXRlZC4KPgo+IEFuZCB3ZSBuZXZlciBldmljdCBhIGRlbGV0
ZWQgQk8sIHdlIGp1c3Qgd2FpdCBmb3IgaXQgdG8gYmVjb21lIGlkbGUuCj4KWWVzLCB0aGUgYm8g
cmVmZXJlbmNlIGNvdW50ZXIgcmV0dXJuIHRvIHplcm8gd2lsbCBlbnRlcgp0dG1fYm9fcmVsZWFz
ZSgpLGJ1dCBub3RpZnkgYm8gcmVsZWFzZSAoY2FsbCBhbWRncHVfYm9fcmVsZWFzZV9ub3RpZnko
KSkKZmlyc3QgaGFwcGVuLCBhbmQgdGhlbiB0ZXN0IGlmIGEgcmVzZXJ2YXRpb24gb2JqZWN0J3Mg
ZmVuY2VzIGhhdmUgYmVlbgpzaWduYWxlZCwgYW5kIHRoZW4gbWFyayBibyBhcyBkZWxldGVkIGFu
ZCByZW1vdmUgYm8gZnJvbSB0aGUgTFJVIGxpc3QuCgpXaGVuIHR0bV9ib19yZWxlYXNlKCkgYW5k
IHR0bV9tZW1fZXZpY3RfZmlyc3QoKSBpcyBjb25jdXJyZW50LAp0aGUgQm8gaGFzIG5vdCBiZWVu
IHJlbW92ZWQgZnJvbSB0aGUgTFJVIGxpc3QgYW5kIGlzIG5vdCBtYXJrZWQgYXMKZGVsZXRlZCwg
dGhpcyB3aWxsIGhhcHBlbi4KCkFzIGEgdGVzdCwgd2hlbiB3ZSB1c2UgQ1BVIG1lbXNldCBpbnN0
ZWFkIG9mIFNETUEgZmlsbCBpbgphbWRncHVfYm9fcmVsZWFzZV9ub3RpZnkoKSwgdGhlIHJlc3Vs
dCBpcyBwYWdlIGZhdWx0OgoKUElEOiA1NDkwICAgVEFTSzogZmZmZjhlODEzNmUwNDEwMCAgQ1BV
OiA0ICAgQ09NTUFORDogImdlbW1QZXJmIgogICAjMCBbZmZmZjhlNzllYWExNzk3MF0gbWFjaGlu
ZV9rZXhlYyBhdCBmZmZmZmZmZmIyODYzNzg0CiAgICMxIFtmZmZmOGU3OWVhYTE3OWQwXSBfX2Ny
YXNoX2tleGVjIGF0IGZmZmZmZmZmYjI5MWNlOTIKICAgIzIgW2ZmZmY4ZTc5ZWFhMTdhYTBdIGNy
YXNoX2tleGVjIGF0IGZmZmZmZmZmYjI5MWNmODAKICAgIzMgW2ZmZmY4ZTc5ZWFhMTdhYjhdIG9v
cHNfZW5kIGF0IGZmZmZmZmZmYjJmNmM3NjgKICAgIzQgW2ZmZmY4ZTc5ZWFhMTdhZTBdIG5vX2Nv
bnRleHQgYXQgZmZmZmZmZmZiMmY1YWFhNgogICAjNSBbZmZmZjhlNzllYWExN2IzMF0gX19iYWRf
YXJlYV9ub3NlbWFwaG9yZSBhdCBmZmZmZmZmZmIyZjVhYjNkCiAgICM2IFtmZmZmOGU3OWVhYTE3
YjgwXSBiYWRfYXJlYV9ub3NlbWFwaG9yZSBhdCBmZmZmZmZmZmIyZjVhY2FlCiAgICM3IFtmZmZm
OGU3OWVhYTE3YjkwXSBfX2RvX3BhZ2VfZmF1bHQgYXQgZmZmZmZmZmZiMmY2ZjZjMAogICAjOCBb
ZmZmZjhlNzllYWExN2MwMF0gZG9fcGFnZV9mYXVsdCBhdCBmZmZmZmZmZmIyZjZmOTI1CiAgICM5
IFtmZmZmOGU3OWVhYTE3YzMwXSBwYWdlX2ZhdWx0IGF0IGZmZmZmZmZmYjJmNmI3NTgKICAgICAg
W2V4Y2VwdGlvbiBSSVA6IG1lbXNldCszMV0KICAgICAgUklQOiBmZmZmZmZmZmIyYjg2NjhmICBS
U1A6IGZmZmY4ZTc5ZWFhMTdjZTggIFJGTEFHUzogMDAwMTBhMTcKICAgICAgUkFYOiBiZWJlYmVi
ZWJlYmViZWJlICBSQlg6IGZmZmY4ZTc0N2JmZjEwYzAgIFJDWDogMDAwMDA2MGIwMDIwMDAwMAog
ICAgICBSRFg6IDAwMDAwMDAwMDAwMDAwMDAgIFJTSTogMDAwMDAwMDAwMDAwMDBiZSAgUkRJOiBm
ZmZmYWI4MDdmMDAwMDAwCiAgICAgIFJCUDogZmZmZjhlNzllYWExN2QxMCAgIFI4OiBmZmZmOGU3
OWVhYTE0MDAwICAgUjk6IGZmZmZhYjdjODAwMDAwMDAKICAgICAgUjEwOiAwMDAwMDAwMDAwMDBi
Y2JhICBSMTE6IDAwMDAwMDAwMDAwMDAxYmEgIFIxMjogZmZmZjhlNzllYmFhNDA1MAogICAgICBS
MTM6IGZmZmZhYjdjODAwMDAwMDAgIFIxNDogMDAwMDAwMDAwMDAyMjYwMCAgUjE1OiBmZmZmOGU4
MTM2ZTA0MTAwCiAgICAgIE9SSUdfUkFYOiBmZmZmZmZmZmZmZmZmZmZmICBDUzogMDAxMCAgU1M6
IDAwMTgKIzEwIFtmZmZmOGU3OWVhYTE3Y2U4XSBhbWRncHVfYm9fcmVsZWFzZV9ub3RpZnkgYXQg
ZmZmZmZmZmZjMDkyZjJkMSBbYW1kZ3B1XQojMTEgW2ZmZmY4ZTc5ZWFhMTdkMThdIHR0bV9ib19y
ZWxlYXNlIGF0IGZmZmZmZmZmYzA4ZjM5ZGQgW2FtZHR0bV0KIzEyIFtmZmZmOGU3OWVhYTE3ZDU4
XSBhbWR0dG1fYm9fcHV0IGF0IGZmZmZmZmZmYzA4ZjNjOGMgW2FtZHR0bV0KIzEzIFtmZmZmOGU3
OWVhYTE3ZDY4XSBhbWR0dG1fYm9fdm1fY2xvc2UgYXQgZmZmZmZmZmZjMDhmN2FjOSBbYW1kdHRt
XQojMTQgW2ZmZmY4ZTc5ZWFhMTdkODBdIHJlbW92ZV92bWEgYXQgZmZmZmZmZmZiMjllZjExNQoj
MTUgW2ZmZmY4ZTc5ZWFhMTdkYTBdIGV4aXRfbW1hcCBhdCBmZmZmZmZmZmIyOWYyYzY0CiMxNiBb
ZmZmZjhlNzllYWExN2U1OF0gbW1wdXQgYXQgZmZmZmZmZmZiMjg5NDBjNwojMTcgW2ZmZmY4ZTc5
ZWFhMTdlNzhdIGRvX2V4aXQgYXQgZmZmZmZmZmZiMjg5ZGM5NQojMTggW2ZmZmY4ZTc5ZWFhMTdm
MTBdIGRvX2dyb3VwX2V4aXQgYXQgZmZmZmZmZmZiMjg5ZTRjZgojMTkgW2ZmZmY4ZTc5ZWFhMTdm
NDBdIHN5c19leGl0X2dyb3VwIGF0IGZmZmZmZmZmYjI4OWU1NDQKIzIwIFtmZmZmOGU3OWVhYTE3
ZjUwXSBzeXN0ZW1fY2FsbF9mYXN0cGF0aCBhdCBmZmZmZmZmZmIyZjc0ZGRiCgpSZWdhcmRzLApR
dS4KCgo+IFJlZ2FyZHMsCj4gQ2hyaXN0aWFuLgo+Cj4+IGFuZCB0aGUgVlJBTSBtZW0gd2lsbCBi
ZSBldmljdGVkLCBtZW0gcmVnaW9uIHdhcyByZXBsYWNlZAo+PiBieSBHdHQgbWVtIHJlZ2lvbi4g
YW1kZ3B1X2JvX3JlbGVhc2Vfbm90aWZ5KCkgd2lsbCB0aGVuCj4+IGhvbGQgdGhlIGJvLT5iYXNl
LnJlc3YgbG9jaywgYW5kIFNETUEgd2lsbCBnZXQgYW4gaW52YWxpZAo+PiBhZGRyZXNzIGluIGFt
ZGdwdV9maWxsX2J1ZmZlcigpLCByZXN1bHRpbmcgaW4gYSBWTUZBVUxUCj4+IG9yIG1lbW9yeSBj
b3JydXB0aW9uLgo+Pgo+PiBUbyBhdm9pZCBpdCwgd2UgaGF2ZSB0byBob2xkIGJvLT5iYXNlLnJl
c3YgbG9jayBmaXJzdCwgYW5kCj4+IGNoZWNrIHdoZXRoZXIgdGhlIG1lbS5tZW1fdHlwZSBpcyBU
VE1fUExfVlJBTS4KPj4KPj4gU2lnbmVkLW9mZi1ieTogUXUgSHVhbmcgPGppbnNkYkAxMjYuY29t
Pgo+PiAtLS0KPj4gwqAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5j
IHwgOCArKysrKystLQo+PiDCoCAxIGZpbGUgY2hhbmdlZCwgNiBpbnNlcnRpb25zKCspLCAyIGRl
bGV0aW9ucygtKQo+Pgo+PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X29iamVjdC5jCj4+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29i
amVjdC5jCj4+IGluZGV4IDRiMjliODIuLjgwMTg1NzQgMTAwNjQ0Cj4+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYwo+PiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMKPj4gQEAgLTEzMDAsMTIgKzEzMDAsMTYgQEAg
dm9pZCBhbWRncHVfYm9fcmVsZWFzZV9ub3RpZnkoc3RydWN0Cj4+IHR0bV9idWZmZXJfb2JqZWN0
ICpibykKPj4gwqDCoMKgwqDCoCBpZiAoYm8tPmJhc2UucmVzdiA9PSAmYm8tPmJhc2UuX3Jlc3Yp
Cj4+IMKgwqDCoMKgwqDCoMKgwqDCoCBhbWRncHVfYW1ka2ZkX3JlbW92ZV9mZW5jZV9vbl9wdF9w
ZF9ib3MoYWJvKTsKPj4KPj4gLcKgwqDCoCBpZiAoYm8tPm1lbS5tZW1fdHlwZSAhPSBUVE1fUExf
VlJBTSB8fCAhYm8tPm1lbS5tbV9ub2RlIHx8Cj4+IC3CoMKgwqDCoMKgwqDCoCAhKGFiby0+Zmxh
Z3MgJiBBTURHUFVfR0VNX0NSRUFURV9WUkFNX1dJUEVfT05fUkVMRUFTRSkpCj4+ICvCoMKgwqAg
aWYgKCEoYWJvLT5mbGFncyAmIEFNREdQVV9HRU1fQ1JFQVRFX1ZSQU1fV0lQRV9PTl9SRUxFQVNF
KSkKPj4gwqDCoMKgwqDCoMKgwqDCoMKgIHJldHVybjsKPj4KPj4gwqDCoMKgwqDCoCBkbWFfcmVz
dl9sb2NrKGJvLT5iYXNlLnJlc3YsIE5VTEwpOwo+Pgo+PiArwqDCoMKgIGlmIChiby0+bWVtLm1l
bV90eXBlICE9IFRUTV9QTF9WUkFNIHx8ICFiby0+bWVtLm1tX25vZGUpIHsKPj4gK8KgwqDCoMKg
wqDCoMKgIGRtYV9yZXN2X3VubG9jayhiby0+YmFzZS5yZXN2KTsKPj4gK8KgwqDCoMKgwqDCoMKg
IHJldHVybjsKPj4gK8KgwqDCoCB9Cj4+ICsKPj4gwqDCoMKgwqDCoCByID0gYW1kZ3B1X2ZpbGxf
YnVmZmVyKGFibywgQU1ER1BVX1BPSVNPTiwgYm8tPmJhc2UucmVzdiwgJmZlbmNlKTsKPj4gwqDC
oMKgwqDCoCBpZiAoIVdBUk5fT04ocikpIHsKPj4gwqDCoMKgwqDCoMKgwqDCoMKgIGFtZGdwdV9i
b19mZW5jZShhYm8sIGZlbmNlLCBmYWxzZSk7Cj4+IC0tCj4+IDEuOC4zLjEKPj4KCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
