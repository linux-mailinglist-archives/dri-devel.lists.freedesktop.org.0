Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 033D5CEE4C
	for <lists+dri-devel@lfdr.de>; Mon,  7 Oct 2019 23:18:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5F79F6E193;
	Mon,  7 Oct 2019 21:18:45 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x441.google.com (mail-pf1-x441.google.com
 [IPv6:2607:f8b0:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 42C176E187
 for <dri-devel@lists.freedesktop.org>; Mon,  7 Oct 2019 21:18:44 +0000 (UTC)
Received: by mail-pf1-x441.google.com with SMTP id b128so9481493pfa.1
 for <dri-devel@lists.freedesktop.org>; Mon, 07 Oct 2019 14:18:44 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=p2Be0C4qL+ABPGADFRkpPnXO4Go7F19pYM8Im08Sq8E=;
 b=lg9wXWe9z807al8b8qMXQp1SiD+5zYy2r9Q9y/+jwRVrnMrRrNhj3agm8YsWrHGtD2
 UOGvsGYbmIJ85pcKdDbumC1Dr1/qsMdlQ3G3m8CCnL4RoWA9GwJ4Ifq70UkR+CpB2D29
 AQYAR6nudeqaobHbmUY4S0uMAFOqB9wqC+91/9z/PQqiTNFcI5Fah4rjldRRqZmi1K0e
 JopgES6+lTRZ6unuIUfQ7j4t+JqgEWwBOIejKpdivfmdLcx5JYHfrezlvRQtqHecMwSD
 /CwzM6Og/XO6yhcBPvjSDMoeUsI/UBOATVZXDR1YLAdAYUAkx6fJhZvtjs74v0s5WZ+5
 AwQg==
X-Gm-Message-State: APjAAAWPgYWmhH13hhaWz8X6ILfCFKvtBa7gi+x5DLo0EkkWdAJrAjDS
 Ws9Bc2Ud5NW+dvFZO4j7kiwywg==
X-Google-Smtp-Source: APXvYqzr9Z6DmGYwofBYoddE4sFtyfcrP8gdmukyx9wNVdl1klun6bUKgj9m1OdRX8sFBSzubShoXw==
X-Received: by 2002:a17:90a:7f81:: with SMTP id
 m1mr1455563pjl.92.1570483123570; 
 Mon, 07 Oct 2019 14:18:43 -0700 (PDT)
Received: from localhost.localdomain ([2601:1c2:680:1319:692:26ff:feda:3a81])
 by smtp.gmail.com with ESMTPSA id t3sm353100pje.7.2019.10.07.14.18.41
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 07 Oct 2019 14:18:42 -0700 (PDT)
From: John Stultz <john.stultz@linaro.org>
To: lkml <linux-kernel@vger.kernel.org>
Subject: [PATCH v10 5/5] kselftests: Add dma-heap test
Date: Mon,  7 Oct 2019 21:18:30 +0000
Message-Id: <20191007211830.42838-6-john.stultz@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20191007211830.42838-1-john.stultz@linaro.org>
References: <20191007211830.42838-1-john.stultz@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=p2Be0C4qL+ABPGADFRkpPnXO4Go7F19pYM8Im08Sq8E=;
 b=jU1/m4OTVjGIAi8TxIT32hJmcD4HW/GXS2cGCtcJJvTiIaNz89q++Z/CSKx2FplXlz
 VQryZWq9nhQc66/HGVFPsBFfl7WlfFvy3yZcEKxm/GS+vMC6xyrkARnLG7xSRAwcjrT+
 p2AvKdfxghhc1NgpaeiABn+K7xCNCIUOe26tzYSasJc//VVOaZFJTnuYsHkKeEFPyFNo
 ZVoHR0n7o+6p5b9+dhuJ+zk+GUupAO//OHI45zv6zEQhWVV+pN0Lx/kXTbd85bhsYjTq
 2FUeSB8iwqib4tmlAp6GXWBQqv+G1tREJt9q/bPlAYMP7rNogKx/SvYoTaSh2YbnVDyV
 AGnQ==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hillf Danton <hdanton@sina.com>,
 Vincent Donnefort <Vincent.Donnefort@arm.com>, Chenbo Feng <fengc@google.com>,
 Alistair Strachan <astrachan@google.com>, Liam Mark <lmark@codeaurora.org>,
 Christoph Hellwig <hch@infradead.org>, dri-devel@lists.freedesktop.org,
 "Andrew F . Davis" <afd@ti.com>, Hridya Valsaraju <hridya@google.com>,
 Sudipto Paul <Sudipto.Paul@arm.com>, Pratik Patel <pratikp@codeaurora.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIHZlcnkgdHJpdmlhbCBhbGxvY2F0aW9uIGFuZCBpbXBvcnQgdGVzdCBmb3IgZG1hLWhlYXBz
LAp1dGlsaXppbmcgdGhlIHZnZW0gZHJpdmVyIGFzIGEgdGVzdCBpbXBvcnRlci4KCkEgZ29vZCBj
aHVuayBvZiB0aGlzIGNvZGUgdGFrZW4gZnJvbToKICB0b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9h
bmRyb2lkL2lvbi9pb25tYXBfdGVzdC5jCiAgT3JpZ2luYWxseSBieSBMYXVyYSBBYmJvdHQgPGxh
YmJvdHRAcmVkaGF0LmNvbT4KCkNjOiBCZW5qYW1pbiBHYWlnbmFyZCA8YmVuamFtaW4uZ2FpZ25h
cmRAbGluYXJvLm9yZz4KQ2M6IFN1bWl0IFNlbXdhbCA8c3VtaXQuc2Vtd2FsQGxpbmFyby5vcmc+
CkNjOiBMaWFtIE1hcmsgPGxtYXJrQGNvZGVhdXJvcmEub3JnPgpDYzogUHJhdGlrIFBhdGVsIDxw
cmF0aWtwQGNvZGVhdXJvcmEub3JnPgpDYzogQnJpYW4gU3RhcmtleSA8QnJpYW4uU3RhcmtleUBh
cm0uY29tPgpDYzogVmluY2VudCBEb25uZWZvcnQgPFZpbmNlbnQuRG9ubmVmb3J0QGFybS5jb20+
CkNjOiBTdWRpcHRvIFBhdWwgPFN1ZGlwdG8uUGF1bEBhcm0uY29tPgpDYzogQW5kcmV3IEYuIERh
dmlzIDxhZmRAdGkuY29tPgpDYzogQ2hyaXN0b3BoIEhlbGx3aWcgPGhjaEBpbmZyYWRlYWQub3Jn
PgpDYzogQ2hlbmJvIEZlbmcgPGZlbmdjQGdvb2dsZS5jb20+CkNjOiBBbGlzdGFpciBTdHJhY2hh
biA8YXN0cmFjaGFuQGdvb2dsZS5jb20+CkNjOiBIcmlkeWEgVmFsc2FyYWp1IDxocmlkeWFAZ29v
Z2xlLmNvbT4KQ2M6IEhpbGxmIERhbnRvbiA8aGRhbnRvbkBzaW5hLmNvbT4KQ2M6IGRyaS1kZXZl
bEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKUmV2aWV3ZWQtYnk6IEJlbmphbWluIEdhaWduYXJkIDxi
ZW5qYW1pbi5nYWlnbmFyZEBsaW5hcm8ub3JnPgpSZXZpZXdlZC1ieTogQnJpYW4gU3RhcmtleSA8
YnJpYW4uc3RhcmtleUBhcm0uY29tPgpBY2tlZC1ieTogTGF1cmEgQWJib3R0IDxsYWJib3R0QHJl
ZGhhdC5jb20+ClRlc3RlZC1ieTogQXlhbiBLdW1hciBIYWxkZXIgPGF5YW4uaGFsZGVyQGFybS5j
b20+ClNpZ25lZC1vZmYtYnk6IEpvaG4gU3R1bHR6IDxqb2huLnN0dWx0ekBsaW5hcm8ub3JnPgot
LS0KdjI6CiogU3dpdGNoZWQgdG8gdXNlIHJld29ya2VkIGRtYS1oZWFwIGFwaXMKdjM6CiogQWRk
IHNpbXBsZSBtbWFwCiogVXRpbGl6ZSBkbWEtYnVmIHRlc3RkZXYgdG8gdGVzdCBpbXBvcnRpbmcK
djQ6CiogUmV3b3JrIHRvIHVzZSB2Z2VtCiogUGFzcyBpbiBmZF9mbGFncyB0byBtYXRjaCBpbnRl
cmZhY2UgY2hhbmdlcwoqIFNraXAgLiBhbmQgLi4gZGlycwp2NjoKKiBOdW1iZXIgb2Ygc3R5bGUv
Y2xlYW51cHMgc3VnZ2VzdGVkIGJ5IEJyaWFuCnY3OgoqIFdoaXRlc3BhY2UgZml4dXAgZm9yIGNo
ZWNrcGF0Y2gKdjg6CiogTW9yZSBjaGVja3BhdGNoIHdoaXRlc3BhY2UgZml4dXBzCnY5OgoqIEJl
dHRlciBoYW5kbGluZyBlcnJvciByZXR1cm5zIG91dCB0byBtYWluLCBzdWdnZXN0ZWQKICBieSBC
cmlhbiBTdGFya2V5CiogU3dpdGNoIHRvIHVzaW5nIHNucHJpbnRmLCBzdWdnZXN0ZWQgYnkgQnJp
YW4KLS0tCiB0b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9kbWFidWYtaGVhcHMvTWFrZWZpbGUgfCAg
IDkgKwogLi4uL3NlbGZ0ZXN0cy9kbWFidWYtaGVhcHMvZG1hYnVmLWhlYXAuYyAgICAgIHwgMjM4
ICsrKysrKysrKysrKysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCAyNDcgaW5zZXJ0aW9ucygrKQog
Y3JlYXRlIG1vZGUgMTAwNjQ0IHRvb2xzL3Rlc3Rpbmcvc2VsZnRlc3RzL2RtYWJ1Zi1oZWFwcy9N
YWtlZmlsZQogY3JlYXRlIG1vZGUgMTAwNjQ0IHRvb2xzL3Rlc3Rpbmcvc2VsZnRlc3RzL2RtYWJ1
Zi1oZWFwcy9kbWFidWYtaGVhcC5jCgpkaWZmIC0tZ2l0IGEvdG9vbHMvdGVzdGluZy9zZWxmdGVz
dHMvZG1hYnVmLWhlYXBzL01ha2VmaWxlIGIvdG9vbHMvdGVzdGluZy9zZWxmdGVzdHMvZG1hYnVm
LWhlYXBzL01ha2VmaWxlCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4u
OGM0YzM2ZTI5NzJkCi0tLSAvZGV2L251bGwKKysrIGIvdG9vbHMvdGVzdGluZy9zZWxmdGVzdHMv
ZG1hYnVmLWhlYXBzL01ha2VmaWxlCkBAIC0wLDAgKzEsOSBAQAorIyBTUERYLUxpY2Vuc2UtSWRl
bnRpZmllcjogR1BMLTIuMAorQ0ZMQUdTICs9IC1zdGF0aWMgLU8zIC1XbCwtbm8tYXMtbmVlZGVk
IC1XYWxsCisjTERMSUJTICs9IC1scnQgLWxwdGhyZWFkIC1sbQorCisjIHRoZXNlIGFyZSBhbGwg
InNhZmUiIHRlc3RzIHRoYXQgZG9uJ3QgbW9kaWZ5CisjIHN5c3RlbSB0aW1lIG9yIHJlcXVpcmUg
ZXNjYWxhdGVkIHByaXZpbGVnZXMKK1RFU1RfR0VOX1BST0dTID0gZG1hYnVmLWhlYXAKKworaW5j
bHVkZSAuLi9saWIubWsKZGlmZiAtLWdpdCBhL3Rvb2xzL3Rlc3Rpbmcvc2VsZnRlc3RzL2RtYWJ1
Zi1oZWFwcy9kbWFidWYtaGVhcC5jIGIvdG9vbHMvdGVzdGluZy9zZWxmdGVzdHMvZG1hYnVmLWhl
YXBzL2RtYWJ1Zi1oZWFwLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAw
Li5iMzZkZDlmMzVjMTkKLS0tIC9kZXYvbnVsbAorKysgYi90b29scy90ZXN0aW5nL3NlbGZ0ZXN0
cy9kbWFidWYtaGVhcHMvZG1hYnVmLWhlYXAuYwpAQCAtMCwwICsxLDIzOCBAQAorLy8gU1BEWC1M
aWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKKworI2luY2x1ZGUgPGRpcmVudC5oPgorI2luY2x1
ZGUgPGVycm5vLmg+CisjaW5jbHVkZSA8ZmNudGwuaD4KKyNpbmNsdWRlIDxzdGRpby5oPgorI2lu
Y2x1ZGUgPHN0ZGxpYi5oPgorI2luY2x1ZGUgPHN0ZGludC5oPgorI2luY2x1ZGUgPHN0cmluZy5o
PgorI2luY2x1ZGUgPHVuaXN0ZC5oPgorI2luY2x1ZGUgPHN5cy9pb2N0bC5oPgorI2luY2x1ZGUg
PHN5cy9tbWFuLmg+CisjaW5jbHVkZSA8c3lzL3R5cGVzLmg+CisKKyNpbmNsdWRlIDxsaW51eC9k
bWEtYnVmLmg+CisjaW5jbHVkZSA8ZHJtL2RybS5oPgorCisjaW5jbHVkZSAiLi4vLi4vLi4vLi4v
aW5jbHVkZS91YXBpL2xpbnV4L2RtYS1oZWFwLmgiCisKKyNkZWZpbmUgREVWUEFUSCAiL2Rldi9k
bWFfaGVhcCIKKworc3RhdGljIGludCBjaGVja192Z2VtKGludCBmZCkKK3sKKwlkcm1fdmVyc2lv
bl90IHZlcnNpb24gPSB7IDAgfTsKKwljaGFyIG5hbWVbNV07CisJaW50IHJldDsKKworCXZlcnNp
b24ubmFtZV9sZW4gPSA0OworCXZlcnNpb24ubmFtZSA9IG5hbWU7CisKKwlyZXQgPSBpb2N0bChm
ZCwgRFJNX0lPQ1RMX1ZFUlNJT04sICZ2ZXJzaW9uKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gMDsK
KworCXJldHVybiAhc3RyY21wKG5hbWUsICJ2Z2VtIik7Cit9CisKK3N0YXRpYyBpbnQgb3Blbl92
Z2VtKHZvaWQpCit7CisJaW50IGksIGZkOworCWNvbnN0IGNoYXIgKmRybXN0ciA9ICIvZGV2L2Ry
aS9jYXJkIjsKKworCWZkID0gLTE7CisJZm9yIChpID0gMDsgaSA8IDE2OyBpKyspIHsKKwkJY2hh
ciBuYW1lWzgwXTsKKworCQlzbnByaW50ZihuYW1lLCA4MCwgIiVzJXUiLCBkcm1zdHIsIGkpOwor
CisJCWZkID0gb3BlbihuYW1lLCBPX1JEV1IpOworCQlpZiAoZmQgPCAwKQorCQkJY29udGludWU7
CisKKwkJaWYgKCFjaGVja192Z2VtKGZkKSkgeworCQkJY2xvc2UoZmQpOworCQkJZmQgPSAtMTsK
KwkJCWNvbnRpbnVlOworCQl9IGVsc2UgeworCQkJYnJlYWs7CisJCX0KKwl9CisJcmV0dXJuIGZk
OworfQorCitzdGF0aWMgaW50IGltcG9ydF92Z2VtX2ZkKGludCB2Z2VtX2ZkLCBpbnQgZG1hX2J1
Zl9mZCwgdWludDMyX3QgKmhhbmRsZSkKK3sKKwlzdHJ1Y3QgZHJtX3ByaW1lX2hhbmRsZSBpbXBv
cnRfaGFuZGxlID0geworCQkuZmQgPSBkbWFfYnVmX2ZkLAorCQkuZmxhZ3MgPSAwLAorCQkuaGFu
ZGxlID0gMCwKKwkgfTsKKwlpbnQgcmV0OworCisJcmV0ID0gaW9jdGwodmdlbV9mZCwgRFJNX0lP
Q1RMX1BSSU1FX0ZEX1RPX0hBTkRMRSwgJmltcG9ydF9oYW5kbGUpOworCWlmIChyZXQgPT0gMCkK
KwkJKmhhbmRsZSA9IGltcG9ydF9oYW5kbGUuaGFuZGxlOworCXJldHVybiByZXQ7Cit9CisKK3N0
YXRpYyB2b2lkIGNsb3NlX2hhbmRsZShpbnQgdmdlbV9mZCwgdWludDMyX3QgaGFuZGxlKQorewor
CXN0cnVjdCBkcm1fZ2VtX2Nsb3NlIGNsb3NlID0geworCQkuaGFuZGxlID0gaGFuZGxlLAorCX07
CisKKwlpb2N0bCh2Z2VtX2ZkLCBEUk1fSU9DVExfR0VNX0NMT1NFLCAmY2xvc2UpOworfQorCitz
dGF0aWMgaW50IGRtYWJ1Zl9oZWFwX29wZW4oY2hhciAqbmFtZSkKK3sKKwlpbnQgcmV0LCBmZDsK
KwljaGFyIGJ1ZlsyNTZdOworCisJcmV0ID0gc25wcmludGYoYnVmLCAyNTYsICIlcy8lcyIsIERF
VlBBVEgsIG5hbWUpOworCWlmIChyZXQgPCAwKSB7CisJCXByaW50Zigic25wcmludGYgZmFpbGVk
IVxuIik7CisJCXJldHVybiByZXQ7CisJfQorCisJZmQgPSBvcGVuKGJ1ZiwgT19SRFdSKTsKKwlp
ZiAoZmQgPCAwKQorCQlwcmludGYoIm9wZW4gJXMgZmFpbGVkIVxuIiwgYnVmKTsKKwlyZXR1cm4g
ZmQ7Cit9CisKK3N0YXRpYyBpbnQgZG1hYnVmX2hlYXBfYWxsb2MoaW50IGZkLCBzaXplX3QgbGVu
LCB1bnNpZ25lZCBpbnQgZmxhZ3MsCisJCQkgICAgIGludCAqZG1hYnVmX2ZkKQoreworCXN0cnVj
dCBkbWFfaGVhcF9hbGxvY2F0aW9uX2RhdGEgZGF0YSA9IHsKKwkJLmxlbiA9IGxlbiwKKwkJLmZk
X2ZsYWdzID0gT19SRFdSIHwgT19DTE9FWEVDLAorCQkuaGVhcF9mbGFncyA9IGZsYWdzLAorCX07
CisJaW50IHJldDsKKworCWlmICghZG1hYnVmX2ZkKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCXJl
dCA9IGlvY3RsKGZkLCBETUFfSEVBUF9JT0NfQUxMT0MsICZkYXRhKTsKKwlpZiAocmV0IDwgMCkK
KwkJcmV0dXJuIHJldDsKKwkqZG1hYnVmX2ZkID0gKGludClkYXRhLmZkOworCXJldHVybiByZXQ7
Cit9CisKK3N0YXRpYyB2b2lkIGRtYWJ1Zl9zeW5jKGludCBmZCwgaW50IHN0YXJ0X3N0b3ApCit7
CisJc3RydWN0IGRtYV9idWZfc3luYyBzeW5jID0geworCQkuZmxhZ3MgPSBzdGFydF9zdG9wIHwg
RE1BX0JVRl9TWU5DX1JXLAorCX07CisJaW50IHJldDsKKworCXJldCA9IGlvY3RsKGZkLCBETUFf
QlVGX0lPQ1RMX1NZTkMsICZzeW5jKTsKKwlpZiAocmV0KQorCQlwcmludGYoInN5bmMgZmFpbGVk
ICVkXG4iLCBlcnJubyk7Cit9CisKKyNkZWZpbmUgT05FX01FRyAoMTAyNCAqIDEwMjQpCisKK3N0
YXRpYyBpbnQgZG9fdGVzdChjaGFyICpoZWFwX25hbWUpCit7CisJaW50IGhlYXBfZmQgPSAtMSwg
ZG1hYnVmX2ZkID0gLTEsIGltcG9ydGVyX2ZkID0gLTE7CisJdWludDMyX3QgaGFuZGxlID0gMDsK
Kwl2b2lkICpwID0gTlVMTDsKKwlpbnQgcmV0OworCisJcHJpbnRmKCJUZXN0aW5nIGhlYXA6ICVz
XG4iLCBoZWFwX25hbWUpOworCisJaGVhcF9mZCA9IGRtYWJ1Zl9oZWFwX29wZW4oaGVhcF9uYW1l
KTsKKwlpZiAoaGVhcF9mZCA8IDApCisJCXJldHVybjsKKworCXByaW50ZigiQWxsb2NhdGluZyAx
IE1FR1xuIik7CisJcmV0ID0gZG1hYnVmX2hlYXBfYWxsb2MoaGVhcF9mZCwgT05FX01FRywgMCwg
JmRtYWJ1Zl9mZCk7CisJaWYgKHJldCkgeworCQlwcmludGYoIkFsbG9jYXRpb24gRmFpbGVkIVxu
Iik7CisJCXJldCA9IC0xOworCQlnb3RvIG91dDsKKwl9CisJLyogbW1hcCBhbmQgd3JpdGUgYSBz
aW1wbGUgcGF0dGVybiAqLworCXAgPSBtbWFwKE5VTEwsCisJCSBPTkVfTUVHLAorCQkgUFJPVF9S
RUFEIHwgUFJPVF9XUklURSwKKwkJIE1BUF9TSEFSRUQsCisJCSBkbWFidWZfZmQsCisJCSAwKTsK
KwlpZiAocCA9PSBNQVBfRkFJTEVEKSB7CisJCXByaW50ZigibW1hcCgpIGZhaWxlZDogJW1cbiIp
OworCQlyZXQgPSAtMTsKKwkJZ290byBvdXQ7CisJfQorCXByaW50ZigibW1hcCBwYXNzZWRcbiIp
OworCisJZG1hYnVmX3N5bmMoZG1hYnVmX2ZkLCBETUFfQlVGX1NZTkNfU1RBUlQpOworCW1lbXNl
dChwLCAxLCBPTkVfTUVHIC8gMik7CisJbWVtc2V0KChjaGFyICopcCArIE9ORV9NRUcgLyAyLCAw
LCBPTkVfTUVHIC8gMik7CisJZG1hYnVmX3N5bmMoZG1hYnVmX2ZkLCBETUFfQlVGX1NZTkNfRU5E
KTsKKworCWltcG9ydGVyX2ZkID0gb3Blbl92Z2VtKCk7CisJaWYgKGltcG9ydGVyX2ZkIDwgMCkg
eworCQlyZXQgPSBpbXBvcnRlcl9mZDsKKwkJcHJpbnRmKCJGYWlsZWQgdG8gb3BlbiB2Z2VtXG4i
KTsKKwkJZ290byBvdXQ7CisJfQorCisJcmV0ID0gaW1wb3J0X3ZnZW1fZmQoaW1wb3J0ZXJfZmQs
IGRtYWJ1Zl9mZCwgJmhhbmRsZSk7CisJaWYgKHJldCA8IDApIHsKKwkJcHJpbnRmKCJGYWlsZWQg
dG8gaW1wb3J0IGJ1ZmZlclxuIik7CisJCWdvdG8gb3V0OworCX0KKwlwcmludGYoImltcG9ydCBw
YXNzZWRcbiIpOworCisJZG1hYnVmX3N5bmMoZG1hYnVmX2ZkLCBETUFfQlVGX1NZTkNfU1RBUlQp
OworCW1lbXNldChwLCAweGZmLCBPTkVfTUVHKTsKKwlkbWFidWZfc3luYyhkbWFidWZfZmQsIERN
QV9CVUZfU1lOQ19FTkQpOworCXByaW50Zigic3luY3MgcGFzc2VkXG4iKTsKKworCWNsb3NlX2hh
bmRsZShpbXBvcnRlcl9mZCwgaGFuZGxlKTsKKwlyZXQgPSAwOworCitvdXQ6CisJaWYgKHApCisJ
CW11bm1hcChwLCBPTkVfTUVHKTsKKwlpZiAoaW1wb3J0ZXJfZmQgPj0gMCkKKwkJY2xvc2UoaW1w
b3J0ZXJfZmQpOworCWlmIChkbWFidWZfZmQgPj0gMCkKKwkJY2xvc2UoZG1hYnVmX2ZkKTsKKwlp
ZiAoaGVhcF9mZCA+PSAwKQorCQljbG9zZShoZWFwX2ZkKTsKKworCXJldHVybiByZXQ7Cit9CisK
K2ludCBtYWluKHZvaWQpCit7CisJRElSICpkOworCXN0cnVjdCBkaXJlbnQgKmRpcjsKKwlpbnQg
cmV0ID0gLTE7CisKKwlkID0gb3BlbmRpcihERVZQQVRIKTsKKwlpZiAoIWQpIHsKKwkJcHJpbnRm
KCJObyAlcyBkaXJlY3Rvcnk/XG4iLCBERVZQQVRIKTsKKwkJcmV0dXJuIC0xOworCX0KKworCXdo
aWxlICgoZGlyID0gcmVhZGRpcihkKSkgIT0gTlVMTCkgeworCQlpZiAoIXN0cm5jbXAoZGlyLT5k
X25hbWUsICIuIiwgMikpCisJCQljb250aW51ZTsKKwkJaWYgKCFzdHJuY21wKGRpci0+ZF9uYW1l
LCAiLi4iLCAzKSkKKwkJCWNvbnRpbnVlOworCisJCXJldCA9IGRvX3Rlc3QoZGlyLT5kX25hbWUp
OworCQlpZiAocmV0KQorCQkJYnJlYWs7CisJfQorCWNsb3NlZGlyKGQpOworCisJcmV0dXJuIHJl
dDsKK30KLS0gCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0
b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJp
LWRldmVs
