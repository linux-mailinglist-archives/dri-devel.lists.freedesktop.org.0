Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 911DA9E3F2
	for <lists+dri-devel@lfdr.de>; Tue, 27 Aug 2019 11:23:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EDB9389864;
	Tue, 27 Aug 2019 09:23:07 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from metis.ext.pengutronix.de (metis.ext.pengutronix.de
 [IPv6:2001:67c:670:201:290:27ff:fe1d:cc33])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7B53C8985A
 for <dri-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 09:23:06 +0000 (UTC)
Received: from lupine.hi.pengutronix.de
 ([2001:67c:670:100:3ad5:47ff:feaf:1a17] helo=lupine)
 by metis.ext.pengutronix.de with esmtp (Exim 4.92)
 (envelope-from <p.zabel@pengutronix.de>)
 id 1i2Xgv-0001sM-1U; Tue, 27 Aug 2019 11:23:05 +0200
Message-ID: <1566897782.4102.6.camel@pengutronix.de>
Subject: Re: [PATCH v2 17/21] drm/imx: pd: Use bus format/flags provided by
 the bridge when available
From: Philipp Zabel <p.zabel@pengutronix.de>
To: Boris Brezillon <boris.brezillon@collabora.com>
Date: Tue, 27 Aug 2019 11:23:02 +0200
In-Reply-To: <20190827104353.1447e5ba@collabora.com>
References: <20190826152649.13820-1-boris.brezillon@collabora.com>
 <20190826152649.13820-18-boris.brezillon@collabora.com>
 <1566893719.4102.1.camel@pengutronix.de>
 <20190827104353.1447e5ba@collabora.com>
X-Mailer: Evolution 3.22.6-1+deb9u2 
Mime-Version: 1.0
X-SA-Exim-Connect-IP: 2001:67c:670:100:3ad5:47ff:feaf:1a17
X-SA-Exim-Mail-From: p.zabel@pengutronix.de
X-SA-Exim-Scanned: No (on metis.ext.pengutronix.de);
 SAEximRunCond expanded to false
X-PTX-Original-Recipient: dri-devel@lists.freedesktop.org
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Nikita Yushchenko <nikita.yoush@cogentembedded.com>,
 Jernej Skrabec <jernej.skrabec@siol.net>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 Andrey Smirnov <andrew.smirnov@gmail.com>, Jonas Karlman <jonas@kwiboo.se>,
 Seung-Woo Kim <sw0312.kim@samsung.com>, dri-devel@lists.freedesktop.org,
 Kyungmin Park <kyungmin.park@samsung.com>,
 Thierry Reding <thierry.reding@gmail.com>, Chris Healy <Chris.Healy@zii.aero>,
 kernel@collabora.com, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCAyMDE5LTA4LTI3IGF0IDEwOjQzICswMjAwLCBCb3JpcyBCcmV6aWxsb24gd3JvdGU6
ClsuLi5dCj4gPiA+ICtzdGF0aWMgdm9pZAo+ID4gPiAraW14X3BkX2JyaWRnZV9hdG9taWNfZ2V0
X291dHB1dF9idXNfZm10cyhzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAo+ID4gPiArCQkJCQkg
c3RydWN0IGRybV9icmlkZ2Vfc3RhdGUgKmJyaWRnZV9zdGF0ZSwKPiA+ID4gKwkJCQkJIHN0cnVj
dCBkcm1fY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKPiA+ID4gKwkJCQkJIHN0cnVjdCBkcm1fY29u
bmVjdG9yX3N0YXRlICpjb25uX3N0YXRlLAo+ID4gPiArCQkJCQkgdW5zaWduZWQgaW50ICpudW1f
b3V0cHV0X2ZtdHMsCj4gPiA+ICsJCQkJCSB1MzIgKm91dHB1dF9mbXRzKQo+ID4gPiAgewo+ID4g
PiArCXN0cnVjdCBkcm1fZGlzcGxheV9pbmZvICpkaSA9ICZjb25uX3N0YXRlLT5jb25uZWN0b3It
PmRpc3BsYXlfaW5mbzsKPiA+ID4gKwlzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIgPSBicmlk
Z2VfdG9fZW5jb2RlcihicmlkZ2UpOwo+ID4gPiArCXN0cnVjdCBpbXhfcGFyYWxsZWxfZGlzcGxh
eSAqaW14cGQgPSBlbmNfdG9faW14cGQoZW5jb2Rlcik7Cj4gPiA+ICsKPiA+ID4gKwkqbnVtX291
dHB1dF9mbXRzID0gMTsKPiA+ID4gKwlpZiAoaW14cGQtPmJ1c19mb3JtYXQpIHsKPiA+ID4gKwkJ
aWYgKG91dHB1dF9mbXRzKQo+ID4gPiArCQkJb3V0cHV0X2ZtdHNbMF0gPSBpbXhwZC0+YnVzX2Zv
cm1hdDsgIAo+ID4gCj4gPiBUaGlzIGlzIHRoZSBsZWdhY3kgRFQgY29uZmlndXJlZCBpbnRlcmZh
Y2UtcGl4LWZtdC4gTWF5YmUgdGhpcyBzaG91bGQgYmUKPiA+IG1vdmVkIHRvIHRoZSBsYXN0IHBs
YWNlLgo+IAo+IEhtLCBzaG91bGRuJ3Qgd2UgcmVzdHJpY3QgdGhpbmdzIHRvIGEgc2luZ2xlIGZv
cm1hdCB3aGVuIHdlIGhhdmUgdGhlCj4gRFQgcHJvcCBkZWZpbmVkPwoKQWJzb2x1dGVseS4gVGhp
cyB3YXMganVzdCBhIGNvc21ldGljIHJlbWFyay4gSSdtIHN1Z2dlc3RpbmcgdG8gcHV0IHRoaXMK
YnJhbmNoIGJlbG93IHRoZSBvdGhlciB0d28sIHRvIGluZGljYXRlIGl0cyByZWxhdGl2ZSBpbXBv
cnRhbmNlLgoKWy4uLl0KPiA+ID4gK3N0YXRpYyB2b2lkCj4gPiA+ICtpbXhfcGRfYnJpZGdlX2F0
b21pY19nZXRfaW5wdXRfYnVzX2ZtdHMoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKPiA+ID4g
KwkJCQkJc3RydWN0IGRybV9icmlkZ2Vfc3RhdGUgKmJyaWRnZV9zdGF0ZSwKPiA+ID4gKwkJCQkJ
c3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+ID4gPiArCQkJCQlzdHJ1Y3QgZHJt
X2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZSwKPiA+ID4gKwkJCQkJdTMyIG91dHB1dF9mbXQs
Cj4gPiA+ICsJCQkJCXVuc2lnbmVkIGludCAqbnVtX2lucHV0X2ZtdHMsCj4gPiA+ICsJCQkJCXUz
MiAqaW5wdXRfZm10cykKPiA+ID4gK3sKPiA+ID4gKwlzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29k
ZXIgPSBicmlkZ2VfdG9fZW5jb2RlcihicmlkZ2UpOwo+ID4gPiArCXN0cnVjdCBpbXhfcGFyYWxs
ZWxfZGlzcGxheSAqaW14cGQgPSBlbmNfdG9faW14cGQoZW5jb2Rlcik7Cj4gPiA+ICsKPiA+ID4g
KwkqbnVtX2lucHV0X2ZtdHMgPSAwOwo+ID4gPiArCWlmIChvdXRwdXRfZm10ID09IE1FRElBX0JV
U19GTVRfRklYRUQpIHsKPiA+ID4gKwkJKm51bV9pbnB1dF9mbXRzID0gMTsgIAo+ID4gCj4gPiBJ
IGRvbid0IHVuZGVyc3RhbmQgdGhpcy4gVGhlIGJ1cyBmb3JtYXQgc3RvcmVkIGluIGlteF9jcnRj
X3N0YXRlIGJ5Cj4gPiBhdG9taWNfY2hlY2sgaXMgdXNlZCB0byBjb25maWd1cmUgdGhlIERDIGxh
dGVyLiBUaGlzIHNob3VsZCBuZXZlciBiZQo+ID4gTUVESUFfQlVTX0ZNVF9GSVhFRCwgdGhhdCB3
b3VsZCB0cmlnZ2VyIGEgV0FSTl9PTiBpbgo+ID4gaXB1X2J1c19mb3JtYXRfdG9fbWFwKCkuCj4g
Cj4gTUVESUFfQlVTX0ZNVF9GSVhFRCBpcyB0aGUgZGVmYXVsdCB2YWx1ZSB1c2VkIHdoZW4gdGhl
IG5leHQgYnJpZGdlIGluCj4gdGhlIGNoYWluIGRvZXMgbm90IHN1cHBvcnQgYnVzIGZvcm1hdCBu
ZWdvdGlhdGlvbi4gV2hlbiB0aGUgZHJpdmVyCj4gcmVjZWl2ZXMgdGhpcyB2YWx1ZSwgaXQgc2hv
dWxkIHBpY2sgYSBkZWZhdWx0IHZhbHVlICh3aGljaCBJIG1pZ2h0IGhhdmUKPiBnb3R0ZW4gd3Jv
bmcgaGVyZSkgc28gdGhhdCBpdCBrZWVwcyB3b3JraW5nIGV2ZW4gaWYgc29tZSBlbGVtZW50cyBv
Zgo+IHRoZSBicmlkZ2UgY2hhaW4gZG9uJ3Qgc3VwcG9ydCBuZWdvdGlhdGluZyB0aGUgYnVzIGZv
cm1hdCB5ZXQuCgpUaGF0IHdhcyB1bmV4cGVjdGVkLCBhcyBNRURJQV9CVVNfRk1UX0ZJWEVEIGlz
IGRvY3VtZW50ZWQgYXM6CgogICJNRURJQV9CVVNfRk1UX0ZJWEVEIHNoYWxsIGJlIHVzZWQgYnkg
aG9zdC1jbGllbnQgcGFpcnMsCiAgIHdoZXJlIHRoZSBkYXRhIGZvcm1hdCBpcyBmaXhlZC4iCgpp
biBpbmNsdWRlL3VhcGkvbGludXgvbWVkaWEtYnVzLWZvcm1hdC5oLiBJIHJlYWQgdGhpcyBhcyBz
b21ldGhpbmcgZm9yIGEKZml4ZWQgbGluayBiZXR3ZWVuIHR3byBrbm93biBkZXZpY2VzIHdoZXJl
IHRoZXJlIGlzIG9ubHkgb25lIHBvc3NpYmxlCmZvcm1hdC4gSGVyZSB3ZSBjYW4ndCBwb3NzaWJs
eSBrbm93IHdoYXQgdGhlIG90aGVyIHNpZGUgZXhwZWN0cy4KCklzIHRoaXMgc29tZXRoaW5nIHRo
YXQgaXMgcGxhbm5lZCB0byBiZSByZW1vdmVkIGluIHRoZSBmdXR1cmUsIG9uY2UKbmVnb3RpYXRp
b24gc3VwcG9ydCBpcyBjb21tb25wbGFjZT8KCj4gPiAKPiA+ID4gKwl9IGVsc2UgaWYgKCFpbXhw
ZC0+YnVzX2Zvcm1hdCkgewo+ID4gPiArCQl1bnNpZ25lZCBpbnQgaTsKPiA+ID4gKwo+ID4gPiAr
CQlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShpbXhfcGRfYnVzX2ZtdHMpOyBpKyspIHsKPiA+
ID4gKwkJCWlmIChpbXhfcGRfYnVzX2ZtdHNbaV0gPT0gb3V0cHV0X2ZtdCkgewo+ID4gPiArCQkJ
CSpudW1faW5wdXRfZm10cyA9IDE7Cj4gPiA+ICsJCQkJYnJlYWs7Cj4gPiA+ICsJCQl9Cj4gPiA+
ICsJCX0KPiA+ID4gKwl9IGVsc2UgaWYgKGlteHBkLT5idXNfZm9ybWF0ID09IG91dHB1dF9mbXQp
IHsKPiA+ID4gKwkJKm51bV9pbnB1dF9mbXRzID0gMTsKPiA+ID4gKwl9Cj4gPiA+ICsKPiA+ID4g
KwlpZiAoKm51bV9pbnB1dF9mbXRzICYmIGlucHV0X2ZtdHMpCj4gPiA+ICsJCWlucHV0X2ZtdHNb
MF0gPSBNRURJQV9CVVNfRk1UX0ZJWEVEOyAgCj4gPiAKPiA+IFRoZSBwYXJhbGxlbC1kaXNwbGF5
IGRyaXZlciBiYXNpY2FsbHkgcmVwcmVzZW50cyB0aGUgd2lyaW5nLCBwaW5tdXgsIGFuZAo+ID4g
ZHJpdmVycyBiZXR3ZWVuIHRoZSBJUFUgREkgYW5kIHRoZSBESVNQIHBhZHMuIFRoZSBpbnB1dCBm
b3JtYXQgc2hvdWxkCj4gPiBhbHdheXMgYmUgaWRlbnRpY2FsIHRvIHRoZSBvdXRwdXQgZm9ybWF0
Lgo+IAo+IEkgY2FuIGRvIHRoYXQgaWYgeW91IGxpa2UuIE5vdGUgdGhhdCB3ZSBhcmUgZm9yd2Fy
ZGluZwo+IHRoZSAtPm91dHB1dF9idXNfY2ZnLmZtdCB2YWx1ZSB0byB0aGUgSVBVIERJLCBub3Qg
LT5pbnB1dF9idXNfY2ZnLmZtdC4KPiBJIGp1c3QgYXNzdW1lZCB0aGF0IGlucHV0IGZvcm1hdCB3
b3VsZG4ndCBiZSB1c2VkIGluIHRoZSBkdW1teSBicmlkZ2UKPiBlbGVtZW50ICh0aGUgb25lIGVt
YmVkZGVkIGluIHRoZSBlbmNvZGVyKSBzaW5jZSBlbmNvZGVycyBvbmx5IGhhdmUgYW4KPiBvdXRw
dXQgZW5kIChpbnB1dCBwb3J0IGlzIGxpa2VseSB0byBiZSBhIFNvQyBzcGVjaWZpYyBsaW5rIGJl
dHdlZW4gdGhlCj4gQ1JUQyBhbmQgdGhlIGVuY29kZXIgd2hpY2ggd2UgcHJvYmFibHkgZG9uJ3Qg
bmVlZC93YW50IHRvIGV4cG9zZSkuCgpUaGVuIHdoeSAod291bGQgdGhpcyBkcml2ZXIgaGF2ZSB0
bykgaW1wbGVtZW50IGdldF9pbnB1dF9mbXRzIGF0IGFsbD8KCkknZCBsaWtlIHRoaXMgdG8gYmUg
Y29uc2lzdGVudC4gSWYgZW5jb2Rlci1icmlkZ2VzIGRvbid0IHVzZSB0aGUgaW5wdXQKYnVzIGZv
cm1hdCBpbiBnZW5lcmFsLCBJJ20gZmluZSB3aXRoIHRoaXMuCgpJIHdhcyBqdXN0IGNvbmZ1c2Vk
IHRoYXQgdGhlIGJyaWRnZSB0YWtlcyBwYXJ0IGluIGlucHV0IGZvcm1hdApuZWdvdGlhdGlvbiBh
bmQgdGhlbiBjYXJyaWVzIG9uIHVzaW5nIHRoZSBvdXRwdXQgZm9ybWF0IHRvIGNvbmZpZ3VyZSBp
dHMKaW5wdXQuCgo+ID4gPiArc3RhdGljIGludCBpbXhfcGRfYnJpZGdlX2F0b21pY19jaGVjayhz
dHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAo+ID4gPiArCQkJCSAgICAgIHN0cnVjdCBkcm1fYnJp
ZGdlX3N0YXRlICpicmlkZ2Vfc3RhdGUsCj4gPiA+ICsJCQkJICAgICAgc3RydWN0IGRybV9jcnRj
X3N0YXRlICpjcnRjX3N0YXRlLAo+ID4gPiArCQkJCSAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9y
X3N0YXRlICpjb25uX3N0YXRlKQo+ID4gPiArewo+ID4gPiArCXN0cnVjdCBkcm1fZW5jb2RlciAq
ZW5jb2RlciA9IGJyaWRnZV90b19lbmNvZGVyKGJyaWRnZSk7Cj4gPiA+ICAJc3RydWN0IGlteF9j
cnRjX3N0YXRlICppbXhfY3J0Y19zdGF0ZSA9IHRvX2lteF9jcnRjX3N0YXRlKGNydGNfc3RhdGUp
Owo+ID4gPiAgCXN0cnVjdCBkcm1fZGlzcGxheV9pbmZvICpkaSA9ICZjb25uX3N0YXRlLT5jb25u
ZWN0b3ItPmRpc3BsYXlfaW5mbzsKPiA+ID4gIAlzdHJ1Y3QgaW14X3BhcmFsbGVsX2Rpc3BsYXkg
KmlteHBkID0gZW5jX3RvX2lteHBkKGVuY29kZXIpOwo+ID4gPiArCXN0cnVjdCBkcm1fYnJpZGdl
X3N0YXRlICpuZXh0X2JyaWRnZV9zdGF0ZSA9IE5VTEw7Cj4gPiA+ICsJc3RydWN0IGRybV9icmlk
Z2UgKm5leHRfYnJpZGdlOwo+ID4gPiArCXUzMiBidXNfZmxhZ3MsIGJ1c19mbXQ7Cj4gPiA+ICsJ
dW5zaWduZWQgaW50IGk7Cj4gPiA+ICAKPiA+ID4gLQlpZiAoIWlteHBkLT5idXNfZm9ybWF0ICYm
IGRpLT5udW1fYnVzX2Zvcm1hdHMpIHsKPiA+ID4gLQkJaW14X2NydGNfc3RhdGUtPmJ1c19mbGFn
cyA9IGRpLT5idXNfZmxhZ3M7Cj4gPiA+IC0JCWlteF9jcnRjX3N0YXRlLT5idXNfZm9ybWF0ID0g
ZGktPmJ1c19mb3JtYXRzWzBdOwo+ID4gPiAtCX0gZWxzZSB7Cj4gPiA+IC0JCWlteF9jcnRjX3N0
YXRlLT5idXNfZmxhZ3MgPSBpbXhwZC0+YnVzX2ZsYWdzOwo+ID4gPiAtCQlpbXhfY3J0Y19zdGF0
ZS0+YnVzX2Zvcm1hdCA9IGlteHBkLT5idXNfZm9ybWF0Owo+ID4gPiArCW5leHRfYnJpZGdlID0g
ZHJtX2JyaWRnZV9jaGFpbl9nZXRfbmV4dF9icmlkZ2UoYnJpZGdlKTsKPiA+ID4gKwlpZiAobmV4
dF9icmlkZ2UpCj4gPiA+ICsJCW5leHRfYnJpZGdlX3N0YXRlID0gZHJtX2F0b21pY19nZXRfbmV3
X2JyaWRnZV9zdGF0ZShjcnRjX3N0YXRlLT5zdGF0ZSwKPiA+ID4gKwkJCQkJCQkJICAgIG5leHRf
YnJpZGdlKTsKPiA+ID4gKwo+ID4gPiArCWJ1c19mbXQgPSBicmlkZ2Vfc3RhdGUtPm91dHB1dF9i
dXNfY2ZnLmZtdDsKPiA+ID4gKwlpZiAoYnVzX2ZtdCA9PSBNRURJQV9CVVNfRk1UX0ZJWEVEKQo+
ID4gPiArCQlidXNfZm10ID0gMDsgIAo+ID4gCj4gPiBJIHdvdWxkIGV4cGVjdCB0aGlzIHRvIHJl
dHVybiB3aXRoIC1FSU5WQUwgaWYgYnJpZGdlX3N0YXRlLQo+ID4gPiBvdXRwdXRfYnVzX2NmZy5m
bXQgaXMgbm90IGluIHRoZSBsaXN0IG9mIHN1cHBvcnRlZCBmb3JtYXRzLgo+IAo+IEFzIHNhaWQg
YWJvdmUsIHdlIG5lZWQgYSB3YXkgdG8gc3VwcG9ydCBicmlkZ2UgY2hhaW5zIHdoZXJlIG5vdCBh
bGwKPiBlbGVtZW50cyBzdXBwb3J0IG5lZ290aWF0aW5nIHRoZSBidXMgZm9ybWF0LCB0aGF0J3Mg
d2hhdCB0aGlzIGZhbGxiYWNrCj4gaXMgZm9yLCBidXQgbWF5YmUgMCBpcyBub3QgYW4gYXBwcm9w
cmlhdGUgdmFsdWUgdG8gbWVhbiAncGljayB0aGUKPiBkZWZhdWx0IGZvcm1hdCcuCgpXZSdkIGFj
dHVhbGx5IGhhdmUgdG8gcGljayBvbmUgaGVyZS4gSWYgc2V0LCB0aGF0IHNob3VsZCBiZQppbXhw
ZC0+YnVzX2Zvcm1hdC4KCnJlZ2FyZHMKUGhpbGlwcApfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9kcmktZGV2ZWw=
