Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B730427FE5C
	for <lists+dri-devel@lfdr.de>; Thu,  1 Oct 2020 13:28:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4602D6E89B;
	Thu,  1 Oct 2020 11:28:30 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x543.google.com (mail-ed1-x543.google.com
 [IPv6:2a00:1450:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8664F6E89A
 for <dri-devel@lists.freedesktop.org>; Thu,  1 Oct 2020 11:28:27 +0000 (UTC)
Received: by mail-ed1-x543.google.com with SMTP id k14so5247822edo.1
 for <dri-devel@lists.freedesktop.org>; Thu, 01 Oct 2020 04:28:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=EDdbyu/rfHEZIzClahauxhZ9gl9TNbrBcOYnqw+V1X4=;
 b=gL6I2szdzSTFZJ3XsiBhd4jSm2n/vvUCVZ7dd1ao6nm3UWLoCYklz8s5llgKpsxfn6
 hvu1HMo7oBIXQ4wY9/83Z0xTUd08tg+iR2fxKvBYMUfx6JNACYBpeY9r5cRYQOwuKlPy
 GMkYXuWzls3iPZlcBmpU/kaXy86F/Fe+qpTOlqMvMiOyY+sk9Z7s4IscEE91s7NyLZLU
 sHRnkdPmr/7wOzH+0fb5K17WgI5OpCFaUXdiqCBz0SCl3Me7nBdB4SLOsV4fXJK4uDmg
 LeCFxzVrGHI7bT/0Fadb3QFpIAmy0r3YD5x0SjNIi765xwFtzTb9ioGhN3Of6+2vWyEV
 2KxA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=EDdbyu/rfHEZIzClahauxhZ9gl9TNbrBcOYnqw+V1X4=;
 b=KzKaKHuKjrp1FT5ICrF3DaRLMUqWDKmJVkTin9MCHBA/oQDBL3tttH/NMDWYXYnk2g
 l5WTW6ohhzaSeEbi1zmz0fubshVaG9Aq/z1axSnq48ABuY3i+F0F6AYlqUVkGxTtGxgF
 JanFVq3LuaZa52I62fZnWt4pJ+qrmMhqiFq3LJGr8Wtb43g+3tAoa8QDvLY8mXfsytxB
 g8r7bLtpD9Cr4yNND0811gKQmnqe3SZ5SEHJIeB+1MBM4MrP6jtwQhU9R8NRGWE4P38G
 dgSvTJ6+JciuXZsnlxMyw2oA+vhRgMl53OkSZkaNDMOND7hZc4zuiDwpMHLnXZY4zEuO
 bOZg==
X-Gm-Message-State: AOAM530A6N1MvB+S0cycKXjElscsr4Z+pPr+CTeIbd28+3yLmPsUhsT6
 0xyK8ghjjCxKkLvmrHwRHFH/T5amkfk=
X-Google-Smtp-Source: ABdhPJwaF7psvFGJNwuMRTOLgdytVNlssBO6hDUQeGj7tZ5RiqN0ZBXdADMSZ9jbf2TzEypDllJRTA==
X-Received: by 2002:a50:bb0d:: with SMTP id y13mr7893343ede.317.1601551705480; 
 Thu, 01 Oct 2020 04:28:25 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:36be:5a08:8c1d:6b2b])
 by smtp.gmail.com with ESMTPSA id p3sm3834892edp.28.2020.10.01.04.28.24
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 01 Oct 2020 04:28:24 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org, ray.huang@amd.com, airlied@gmail.com,
 daniel@ffwll.ch
Subject: [PATCH 8/8] drm/ttm: nuke caching placement flags
Date: Thu,  1 Oct 2020 13:28:17 +0200
Message-Id: <20201001112817.20967-8-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20201001112817.20967-1-christian.koenig@amd.com>
References: <20201001112817.20967-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q2hhbmdpbmcgdGhlIGNhY2hpbmcgb24gdGhlIGZseSBuZXZlciByZWFsbHkgd29ya2VkCmZsYXds
ZXNzbHkuCgpTbyBzdG9wIHRoaXMgY29tcGxldGVseSBhbmQganVzdCBsZXQgZHJpdmVycyBzcGVj
aWZpYyB0aGUKZGVzaXJlZCBjYWNoaW5nIGluIHRoZSB0dCBvciBidXMgb2JqZWN0LgoKU2lnbmVk
LW9mZi1ieTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPgotLS0K
IGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYyB8IDIwICsrKy0tLS0t
LS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYyAgICB8IDEyICsrLS0t
LQogZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYyAgICAgIHwgIDcgKy0tLQog
ZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jICAgICAgIHwgMzYgKysrKystLS0t
LS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX29iamVjdC5jICAgICAgICAgICB8IDEw
ICsrLS0tCiBkcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF90dG0uYyAgICAgICAgICAgICAgfCAgMiAr
LQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmMgICAgIHwgNDYgKysrKyst
LS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMgICAg
ICAgIHwgMTggKystLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9hZ3BfYmFja2VuZC5j
ICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYyAgICAgICAgICAgICAg
IHwgNDQgKystLS0tLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191
dGlsLmMgICAgICAgICAgfCAxMCArKy0tLQogZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fdHQuYyAg
ICAgICAgICAgICAgIHwgMjkgLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS92bXdnZngv
dm13Z2Z4X3R0bV9idWZmZXIuYyB8IDMwICsrKysrKystLS0tLS0tCiBpbmNsdWRlL2RybS90dG0v
dHRtX3BsYWNlbWVudC5oICAgICAgICAgICAgfCAxNCAtLS0tLS0tCiBpbmNsdWRlL2RybS90dG0v
dHRtX3R0LmggICAgICAgICAgICAgICAgICAgfCAxNSAtLS0tLS0tCiAxNSBmaWxlcyBjaGFuZ2Vk
LCA2MSBpbnNlcnRpb25zKCspLCAyMzQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5jIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X29iamVjdC5jCmluZGV4IDgwYmM3MTc3Y2Q0NS4uOTY0Zjk1MTJkZDZl
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5jCkBAIC0xMzcs
NyArMTM3LDcgQEAgdm9pZCBhbWRncHVfYm9fcGxhY2VtZW50X2Zyb21fZG9tYWluKHN0cnVjdCBh
bWRncHVfYm8gKmFibywgdTMyIGRvbWFpbikKIAkJcGxhY2VzW2NdLmZwZm4gPSAwOwogCQlwbGFj
ZXNbY10ubHBmbiA9IDA7CiAJCXBsYWNlc1tjXS5tZW1fdHlwZSA9IFRUTV9QTF9WUkFNOwotCQlw
bGFjZXNbY10uZmxhZ3MgPSBUVE1fUExfRkxBR19XQyB8IFRUTV9QTF9GTEFHX1VOQ0FDSEVEOwor
CQlwbGFjZXNbY10uZmxhZ3MgPSAwOwogCiAJCWlmIChmbGFncyAmIEFNREdQVV9HRU1fQ1JFQVRF
X0NQVV9BQ0NFU1NfUkVRVUlSRUQpCiAJCQlwbGFjZXNbY10ubHBmbiA9IHZpc2libGVfcGZuOwpA
QCAtMTU0LDExICsxNTQsNiBAQCB2b2lkIGFtZGdwdV9ib19wbGFjZW1lbnRfZnJvbV9kb21haW4o
c3RydWN0IGFtZGdwdV9ibyAqYWJvLCB1MzIgZG9tYWluKQogCQlwbGFjZXNbY10ubHBmbiA9IDA7
CiAJCXBsYWNlc1tjXS5tZW1fdHlwZSA9IFRUTV9QTF9UVDsKIAkJcGxhY2VzW2NdLmZsYWdzID0g
MDsKLQkJaWYgKGZsYWdzICYgQU1ER1BVX0dFTV9DUkVBVEVfQ1BVX0dUVF9VU1dDKQotCQkJcGxh
Y2VzW2NdLmZsYWdzIHw9IFRUTV9QTF9GTEFHX1dDIHwKLQkJCQlUVE1fUExfRkxBR19VTkNBQ0hF
RDsKLQkJZWxzZQotCQkJcGxhY2VzW2NdLmZsYWdzIHw9IFRUTV9QTF9GTEFHX0NBQ0hFRDsKIAkJ
YysrOwogCX0KIApAQCAtMTY3LDExICsxNjIsNiBAQCB2b2lkIGFtZGdwdV9ib19wbGFjZW1lbnRf
ZnJvbV9kb21haW4oc3RydWN0IGFtZGdwdV9ibyAqYWJvLCB1MzIgZG9tYWluKQogCQlwbGFjZXNb
Y10ubHBmbiA9IDA7CiAJCXBsYWNlc1tjXS5tZW1fdHlwZSA9IFRUTV9QTF9TWVNURU07CiAJCXBs
YWNlc1tjXS5mbGFncyA9IDA7Ci0JCWlmIChmbGFncyAmIEFNREdQVV9HRU1fQ1JFQVRFX0NQVV9H
VFRfVVNXQykKLQkJCXBsYWNlc1tjXS5mbGFncyB8PSBUVE1fUExfRkxBR19XQyB8Ci0JCQkJVFRN
X1BMX0ZMQUdfVU5DQUNIRUQ7Ci0JCWVsc2UKLQkJCXBsYWNlc1tjXS5mbGFncyB8PSBUVE1fUExf
RkxBR19DQUNIRUQ7CiAJCWMrKzsKIAl9CiAKQEAgLTE3OSw3ICsxNjksNyBAQCB2b2lkIGFtZGdw
dV9ib19wbGFjZW1lbnRfZnJvbV9kb21haW4oc3RydWN0IGFtZGdwdV9ibyAqYWJvLCB1MzIgZG9t
YWluKQogCQlwbGFjZXNbY10uZnBmbiA9IDA7CiAJCXBsYWNlc1tjXS5scGZuID0gMDsKIAkJcGxh
Y2VzW2NdLm1lbV90eXBlID0gQU1ER1BVX1BMX0dEUzsKLQkJcGxhY2VzW2NdLmZsYWdzID0gVFRN
X1BMX0ZMQUdfVU5DQUNIRUQ7CisJCXBsYWNlc1tjXS5mbGFncyA9IDA7CiAJCWMrKzsKIAl9CiAK
QEAgLTE4Nyw3ICsxNzcsNyBAQCB2b2lkIGFtZGdwdV9ib19wbGFjZW1lbnRfZnJvbV9kb21haW4o
c3RydWN0IGFtZGdwdV9ibyAqYWJvLCB1MzIgZG9tYWluKQogCQlwbGFjZXNbY10uZnBmbiA9IDA7
CiAJCXBsYWNlc1tjXS5scGZuID0gMDsKIAkJcGxhY2VzW2NdLm1lbV90eXBlID0gQU1ER1BVX1BM
X0dXUzsKLQkJcGxhY2VzW2NdLmZsYWdzID0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQ7CisJCXBsYWNl
c1tjXS5mbGFncyA9IDA7CiAJCWMrKzsKIAl9CiAKQEAgLTE5NSw3ICsxODUsNyBAQCB2b2lkIGFt
ZGdwdV9ib19wbGFjZW1lbnRfZnJvbV9kb21haW4oc3RydWN0IGFtZGdwdV9ibyAqYWJvLCB1MzIg
ZG9tYWluKQogCQlwbGFjZXNbY10uZnBmbiA9IDA7CiAJCXBsYWNlc1tjXS5scGZuID0gMDsKIAkJ
cGxhY2VzW2NdLm1lbV90eXBlID0gQU1ER1BVX1BMX09BOwotCQlwbGFjZXNbY10uZmxhZ3MgPSBU
VE1fUExfRkxBR19VTkNBQ0hFRDsKKwkJcGxhY2VzW2NdLmZsYWdzID0gMDsKIAkJYysrOwogCX0K
IApAQCAtMjAzLDcgKzE5Myw3IEBAIHZvaWQgYW1kZ3B1X2JvX3BsYWNlbWVudF9mcm9tX2RvbWFp
bihzdHJ1Y3QgYW1kZ3B1X2JvICphYm8sIHUzMiBkb21haW4pCiAJCXBsYWNlc1tjXS5mcGZuID0g
MDsKIAkJcGxhY2VzW2NdLmxwZm4gPSAwOwogCQlwbGFjZXNbY10ubWVtX3R5cGUgPSBUVE1fUExf
U1lTVEVNOwotCQlwbGFjZXNbY10uZmxhZ3MgPSBUVE1fUExfTUFTS19DQUNISU5HOworCQlwbGFj
ZXNbY10uZmxhZ3MgPSAwOwogCQljKys7CiAJfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfdHRtLmMKaW5kZXggNWI1NmE2NjA2M2ZkLi44Y2RlYzU4YjkxMDYgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKQEAgLTkyLDcgKzkyLDcgQEAgc3RhdGljIHZv
aWQgYW1kZ3B1X2V2aWN0X2ZsYWdzKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJCS5m
cGZuID0gMCwKIAkJLmxwZm4gPSAwLAogCQkubWVtX3R5cGUgPSBUVE1fUExfU1lTVEVNLAotCQku
ZmxhZ3MgPSBUVE1fUExfTUFTS19DQUNISU5HCisJCS5mbGFncyA9IDAKIAl9OwogCiAJLyogRG9u
J3QgaGFuZGxlIHNjYXR0ZXIgZ2F0aGVyIEJPcyAqLwpAQCAtNTM4LDE5ICs1MzgsMTMgQEAgc3Rh
dGljIGludCBhbWRncHVfbW92ZV92cmFtX3JhbShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJv
LCBib29sIGV2aWN0LAogCXBsYWNlbWVudHMuZnBmbiA9IDA7CiAJcGxhY2VtZW50cy5scGZuID0g
MDsKIAlwbGFjZW1lbnRzLm1lbV90eXBlID0gVFRNX1BMX1RUOwotCXBsYWNlbWVudHMuZmxhZ3Mg
PSBUVE1fUExfTUFTS19DQUNISU5HOworCXBsYWNlbWVudHMuZmxhZ3MgPSAwOwogCXIgPSB0dG1f
Ym9fbWVtX3NwYWNlKGJvLCAmcGxhY2VtZW50LCAmdG1wX21lbSwgY3R4KTsKIAlpZiAodW5saWtl
bHkocikpIHsKIAkJcHJfZXJyKCJGYWlsZWQgdG8gZmluZCBHVFQgc3BhY2UgZm9yIGJsaXQgZnJv
bSBWUkFNXG4iKTsKIAkJcmV0dXJuIHI7CiAJfQogCi0JLyogc2V0IGNhY2hpbmcgZmxhZ3MgKi8K
LQlyID0gdHRtX3R0X3NldF9wbGFjZW1lbnRfY2FjaGluZyhiby0+dHRtLCB0bXBfbWVtLnBsYWNl
bWVudCk7Ci0JaWYgKHVubGlrZWx5KHIpKSB7Ci0JCWdvdG8gb3V0X2NsZWFudXA7Ci0JfQotCiAJ
ciA9IHR0bV90dF9wb3B1bGF0ZShiby0+YmRldiwgYm8tPnR0bSwgY3R4KTsKIAlpZiAodW5saWtl
bHkocikpCiAJCWdvdG8gb3V0X2NsZWFudXA7CkBAIC01OTksNyArNTkzLDcgQEAgc3RhdGljIGlu
dCBhbWRncHVfbW92ZV9yYW1fdnJhbShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBib29s
IGV2aWN0LAogCXBsYWNlbWVudHMuZnBmbiA9IDA7CiAJcGxhY2VtZW50cy5scGZuID0gMDsKIAlw
bGFjZW1lbnRzLm1lbV90eXBlID0gVFRNX1BMX1RUOwotCXBsYWNlbWVudHMuZmxhZ3MgPSBUVE1f
UExfTUFTS19DQUNISU5HOworCXBsYWNlbWVudHMuZmxhZ3MgPSAwOwogCXIgPSB0dG1fYm9fbWVt
X3NwYWNlKGJvLCAmcGxhY2VtZW50LCAmdG1wX21lbSwgY3R4KTsKIAlpZiAodW5saWtlbHkocikp
IHsKIAkJcHJfZXJyKCJGYWlsZWQgdG8gZmluZCBHVFQgc3BhY2UgZm9yIGJsaXQgdG8gVlJBTVxu
Iik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5jIGIv
ZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYwppbmRleCA3OTE1MWIxYzE1N2Mu
LmI5YzBlYTcyMGVmZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9o
ZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5jCkBAIC0x
NDcsMTUgKzE0NywxMiBAQCBzdGF0aWMgdm9pZCBkcm1fZ2VtX3ZyYW1fcGxhY2VtZW50KHN0cnVj
dCBkcm1fZ2VtX3ZyYW1fb2JqZWN0ICpnYm8sCiAKIAlpZiAocGxfZmxhZyAmIERSTV9HRU1fVlJB
TV9QTF9GTEFHX1ZSQU0pIHsKIAkJZ2JvLT5wbGFjZW1lbnRzW2NdLm1lbV90eXBlID0gVFRNX1BM
X1ZSQU07Ci0JCWdiby0+cGxhY2VtZW50c1tjKytdLmZsYWdzID0gVFRNX1BMX0ZMQUdfV0MgfAot
CQkJCQkgICAgIFRUTV9QTF9GTEFHX1VOQ0FDSEVEIHwKLQkJCQkJICAgICBpbnZhcmlhbnRfZmxh
Z3M7CisJCWdiby0+cGxhY2VtZW50c1tjKytdLmZsYWdzID0gaW52YXJpYW50X2ZsYWdzOwogCX0K
IAogCWlmIChwbF9mbGFnICYgRFJNX0dFTV9WUkFNX1BMX0ZMQUdfU1lTVEVNIHx8ICFjKSB7CiAJ
CWdiby0+cGxhY2VtZW50c1tjXS5tZW1fdHlwZSA9IFRUTV9QTF9TWVNURU07Ci0JCWdiby0+cGxh
Y2VtZW50c1tjKytdLmZsYWdzID0gVFRNX1BMX01BU0tfQ0FDSElORyB8Ci0JCQkJCSAgICAgaW52
YXJpYW50X2ZsYWdzOworCQlnYm8tPnBsYWNlbWVudHNbYysrXS5mbGFncyA9IGludmFyaWFudF9m
bGFnczsKIAl9CiAKIAlnYm8tPnBsYWNlbWVudC5udW1fcGxhY2VtZW50ID0gYzsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9ub3V2ZWF1L25vdXZlYXVfYm8uYwppbmRleCA4ZWQzMGY0NzFlYzcuLmIzN2RmZDEyYzdiOSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYwpAQCAtMzQzLDM3ICszNDMsMjMgQEAg
bm91dmVhdV9ib19uZXcoc3RydWN0IG5vdXZlYXVfY2xpICpjbGksIHU2NCBzaXplLCBpbnQgYWxp
Z24sCiB9CiAKIHN0YXRpYyB2b2lkCi1zZXRfcGxhY2VtZW50X2xpc3Qoc3RydWN0IG5vdXZlYXVf
ZHJtICpkcm0sIHN0cnVjdCB0dG1fcGxhY2UgKnBsLCB1bnNpZ25lZCAqbiwKLQkJICAgdWludDMy
X3QgZG9tYWluLCB1aW50MzJfdCBmbGFncykKK3NldF9wbGFjZW1lbnRfbGlzdChzdHJ1Y3QgdHRt
X3BsYWNlICpwbCwgdW5zaWduZWQgKm4sIHVpbnQzMl90IGRvbWFpbikKIHsKIAkqbiA9IDA7CiAK
IAlpZiAoZG9tYWluICYgTk9VVkVBVV9HRU1fRE9NQUlOX1ZSQU0pIHsKLQkJc3RydWN0IG52aWZf
bW11ICptbXUgPSAmZHJtLT5jbGllbnQubW11OwotCQljb25zdCB1OCB0eXBlID0gbW11LT50eXBl
W2RybS0+dHRtLnR5cGVfdnJhbV0udHlwZTsKLQogCQlwbFsqbl0ubWVtX3R5cGUgPSBUVE1fUExf
VlJBTTsKLQkJcGxbKm5dLmZsYWdzID0gZmxhZ3MgJiB+VFRNX1BMX0ZMQUdfQ0FDSEVEOwotCi0J
CS8qIFNvbWUgQkFScyBkbyBub3Qgc3VwcG9ydCBiZWluZyBpb3JlbWFwcGVkIFdDICovCi0JCWlm
IChkcm0tPmNsaWVudC5kZXZpY2UuaW5mby5mYW1pbHkgPj0gTlZfREVWSUNFX0lORk9fVjBfVEVT
TEEgJiYKLQkJICAgIHR5cGUgJiBOVklGX01FTV9VTkNBQ0hFRCkKLQkJCXBsWypuXS5mbGFncyAm
PSB+VFRNX1BMX0ZMQUdfV0M7Ci0KKwkJcGxbKm5dLmZsYWdzID0gMDsKIAkJKCpuKSsrOwogCX0K
IAlpZiAoZG9tYWluICYgTk9VVkVBVV9HRU1fRE9NQUlOX0dBUlQpIHsKIAkJcGxbKm5dLm1lbV90
eXBlID0gVFRNX1BMX1RUOwotCQlwbFsqbl0uZmxhZ3MgPSBmbGFnczsKLQotCQlpZiAoZHJtLT5h
Z3AuYnJpZGdlKQotCQkJcGxbKm5dLmZsYWdzICY9IH5UVE1fUExfRkxBR19DQUNIRUQ7Ci0KKwkJ
cGxbKm5dLmZsYWdzID0gMDsKIAkJKCpuKSsrOwogCX0KIAlpZiAoZG9tYWluICYgTk9VVkVBVV9H
RU1fRE9NQUlOX0NQVSkgewogCQlwbFsqbl0ubWVtX3R5cGUgPSBUVE1fUExfU1lTVEVNOwotCQlw
bFsoKm4pKytdLmZsYWdzID0gZmxhZ3M7CisJCXBsWygqbikrK10uZmxhZ3MgPSAwOwogCX0KIH0K
IApAQCAtNDE1LDE4ICs0MDEsMTQgQEAgdm9pZAogbm91dmVhdV9ib19wbGFjZW1lbnRfc2V0KHN0
cnVjdCBub3V2ZWF1X2JvICpudmJvLCB1aW50MzJfdCBkb21haW4sCiAJCQkgdWludDMyX3QgYnVz
eSkKIHsKLQlzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRybSA9IG5vdXZlYXVfYmRldihudmJvLT5iby5i
ZGV2KTsKIAlzdHJ1Y3QgdHRtX3BsYWNlbWVudCAqcGwgPSAmbnZiby0+cGxhY2VtZW50OwotCXVp
bnQzMl90IGZsYWdzID0gbnZiby0+Zm9yY2VfY29oZXJlbnQgPyBUVE1fUExfRkxBR19VTkNBQ0hF
RCA6Ci0JCQkJCQlUVE1fUExfTUFTS19DQUNISU5HOwogCiAJcGwtPnBsYWNlbWVudCA9IG52Ym8t
PnBsYWNlbWVudHM7Ci0Jc2V0X3BsYWNlbWVudF9saXN0KGRybSwgbnZiby0+cGxhY2VtZW50cywg
JnBsLT5udW1fcGxhY2VtZW50LAotCQkJICAgZG9tYWluLCBmbGFncyk7CisJc2V0X3BsYWNlbWVu
dF9saXN0KG52Ym8tPnBsYWNlbWVudHMsICZwbC0+bnVtX3BsYWNlbWVudCwgZG9tYWluKTsKIAog
CXBsLT5idXN5X3BsYWNlbWVudCA9IG52Ym8tPmJ1c3lfcGxhY2VtZW50czsKLQlzZXRfcGxhY2Vt
ZW50X2xpc3QoZHJtLCBudmJvLT5idXN5X3BsYWNlbWVudHMsICZwbC0+bnVtX2J1c3lfcGxhY2Vt
ZW50LAotCQkJICAgZG9tYWluIHwgYnVzeSwgZmxhZ3MpOworCXNldF9wbGFjZW1lbnRfbGlzdChu
dmJvLT5idXN5X3BsYWNlbWVudHMsICZwbC0+bnVtX2J1c3lfcGxhY2VtZW50LAorCQkJICAgZG9t
YWluIHwgYnVzeSk7CiAKIAlzZXRfcGxhY2VtZW50X3JhbmdlKG52Ym8sIGRvbWFpbik7CiB9CkBA
IC04ODgsNyArODcwLDcgQEAgbm91dmVhdV9ib19tb3ZlX2ZsaXBkKHN0cnVjdCB0dG1fYnVmZmVy
X29iamVjdCAqYm8sIGJvb2wgZXZpY3QsCiAJCS5mcGZuID0gMCwKIAkJLmxwZm4gPSAwLAogCQku
bWVtX3R5cGUgPSBUVE1fUExfVFQsCi0JCS5mbGFncyA9IFRUTV9QTF9NQVNLX0NBQ0hJTkcKKwkJ
LmZsYWdzID0gMAogCX07CiAJc3RydWN0IHR0bV9wbGFjZW1lbnQgcGxhY2VtZW50OwogCXN0cnVj
dCB0dG1fcmVzb3VyY2UgdG1wX3JlZzsKQEAgLTkzMCw3ICs5MTIsNyBAQCBub3V2ZWF1X2JvX21v
dmVfZmxpcHMoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywgYm9vbCBldmljdCwKIAkJLmZw
Zm4gPSAwLAogCQkubHBmbiA9IDAsCiAJCS5tZW1fdHlwZSA9IFRUTV9QTF9UVCwKLQkJLmZsYWdz
ID0gVFRNX1BMX01BU0tfQ0FDSElORworCQkuZmxhZ3MgPSAwCiAJfTsKIAlzdHJ1Y3QgdHRtX3Bs
YWNlbWVudCBwbGFjZW1lbnQ7CiAJc3RydWN0IHR0bV9yZXNvdXJjZSB0bXBfcmVnOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfb2JqZWN0LmMgYi9kcml2ZXJzL2dwdS9kcm0v
cXhsL3F4bF9vYmplY3QuYwppbmRleCBjOGI2N2U3YTNmMDIuLjViYThhYWMwMGY1YyAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfb2JqZWN0LmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3F4bC9xeGxfb2JqZWN0LmMKQEAgLTY0LDIxICs2NCwyMSBAQCB2b2lkIHF4bF90dG1fcGxh
Y2VtZW50X2Zyb21fZG9tYWluKHN0cnVjdCBxeGxfYm8gKnFibywgdTMyIGRvbWFpbikKIAlxYm8t
PnBsYWNlbWVudC5idXN5X3BsYWNlbWVudCA9IHFiby0+cGxhY2VtZW50czsKIAlpZiAoZG9tYWlu
ID09IFFYTF9HRU1fRE9NQUlOX1ZSQU0pIHsKIAkJcWJvLT5wbGFjZW1lbnRzW2NdLm1lbV90eXBl
ID0gVFRNX1BMX1ZSQU07Ci0JCXFiby0+cGxhY2VtZW50c1tjKytdLmZsYWdzID0gVFRNX1BMX0ZM
QUdfQ0FDSEVEIHwgcGZsYWc7CisJCXFiby0+cGxhY2VtZW50c1tjKytdLmZsYWdzID0gcGZsYWc7
CiAJfQogCWlmIChkb21haW4gPT0gUVhMX0dFTV9ET01BSU5fU1VSRkFDRSkgewogCQlxYm8tPnBs
YWNlbWVudHNbY10ubWVtX3R5cGUgPSBUVE1fUExfUFJJVjsKLQkJcWJvLT5wbGFjZW1lbnRzW2Mr
K10uZmxhZ3MgPSBUVE1fUExfRkxBR19DQUNIRUQgfCBwZmxhZzsKKwkJcWJvLT5wbGFjZW1lbnRz
W2MrK10uZmxhZ3MgPSBwZmxhZzsKIAkJcWJvLT5wbGFjZW1lbnRzW2NdLm1lbV90eXBlID0gVFRN
X1BMX1ZSQU07Ci0JCXFiby0+cGxhY2VtZW50c1tjKytdLmZsYWdzID0gVFRNX1BMX0ZMQUdfQ0FD
SEVEIHwgcGZsYWc7CisJCXFiby0+cGxhY2VtZW50c1tjKytdLmZsYWdzID0gcGZsYWc7CiAJfQog
CWlmIChkb21haW4gPT0gUVhMX0dFTV9ET01BSU5fQ1BVKSB7CiAJCXFiby0+cGxhY2VtZW50c1tj
XS5tZW1fdHlwZSA9IFRUTV9QTF9TWVNURU07Ci0JCXFiby0+cGxhY2VtZW50c1tjKytdLmZsYWdz
ID0gVFRNX1BMX01BU0tfQ0FDSElORyB8IHBmbGFnOworCQlxYm8tPnBsYWNlbWVudHNbYysrXS5m
bGFncyA9IHBmbGFnOwogCX0KIAlpZiAoIWMpIHsKIAkJcWJvLT5wbGFjZW1lbnRzW2NdLm1lbV90
eXBlID0gVFRNX1BMX1NZU1RFTTsKLQkJcWJvLT5wbGFjZW1lbnRzW2MrK10uZmxhZ3MgPSBUVE1f
UExfTUFTS19DQUNISU5HOworCQlxYm8tPnBsYWNlbWVudHNbYysrXS5mbGFncyA9IDA7CiAJfQog
CXFiby0+cGxhY2VtZW50Lm51bV9wbGFjZW1lbnQgPSBjOwogCXFiby0+cGxhY2VtZW50Lm51bV9i
dXN5X3BsYWNlbWVudCA9IGM7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF90
dG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3R0bS5jCmluZGV4IGU3OWQ0ZGY5OTc5MC4u
ZDUzNWU4MzZiZTcyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF90dG0uYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF90dG0uYwpAQCAtNTYsNyArNTYsNyBAQCBzdGF0
aWMgdm9pZCBxeGxfZXZpY3RfZmxhZ3Moc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKIAkJ
LmZwZm4gPSAwLAogCQkubHBmbiA9IDAsCiAJCS5tZW1fdHlwZSA9IFRUTV9QTF9TWVNURU0sCi0J
CS5mbGFncyA9IFRUTV9QTF9NQVNLX0NBQ0hJTkcKKwkJLmZsYWdzID0gMAogCX07CiAKIAlpZiAo
IXF4bF90dG1fYm9faXNfcXhsX2JvKGJvKSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3JhZGVvbi9yYWRlb25fb2JqZWN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9v
YmplY3QuYwppbmRleCA4YzI4NWViMTE4ZjkuLmEwYjJjNDU0MWEyYSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L3JhZGVvbi9yYWRlb25fb2JqZWN0LmMKQEAgLTExMyw1NyArMTEzLDI5IEBAIHZvaWQgcmFkZW9u
X3R0bV9wbGFjZW1lbnRfZnJvbV9kb21haW4oc3RydWN0IHJhZGVvbl9ibyAqcmJvLCB1MzIgZG9t
YWluKQogCQkJcmJvLT5wbGFjZW1lbnRzW2NdLmZwZm4gPQogCQkJCXJiby0+cmRldi0+bWMudmlz
aWJsZV92cmFtX3NpemUgPj4gUEFHRV9TSElGVDsKIAkJCXJiby0+cGxhY2VtZW50c1tjXS5tZW1f
dHlwZSA9IFRUTV9QTF9WUkFNOwotCQkJcmJvLT5wbGFjZW1lbnRzW2MrK10uZmxhZ3MgPSBUVE1f
UExfRkxBR19XQyB8Ci0JCQkJCQkgICAgIFRUTV9QTF9GTEFHX1VOQ0FDSEVEOworCQkJcmJvLT5w
bGFjZW1lbnRzW2MrK10uZmxhZ3MgPSAwOwogCQl9CiAKIAkJcmJvLT5wbGFjZW1lbnRzW2NdLmZw
Zm4gPSAwOwogCQlyYm8tPnBsYWNlbWVudHNbY10ubWVtX3R5cGUgPSBUVE1fUExfVlJBTTsKLQkJ
cmJvLT5wbGFjZW1lbnRzW2MrK10uZmxhZ3MgPSBUVE1fUExfRkxBR19XQyB8Ci0JCQkJCSAgICAg
VFRNX1BMX0ZMQUdfVU5DQUNIRUQ7CisJCXJiby0+cGxhY2VtZW50c1tjKytdLmZsYWdzID0gMDsK
IAl9CiAKIAlpZiAoZG9tYWluICYgUkFERU9OX0dFTV9ET01BSU5fR1RUKSB7Ci0JCWlmIChyYm8t
PmZsYWdzICYgUkFERU9OX0dFTV9HVFRfVUMpIHsKLQkJCXJiby0+cGxhY2VtZW50c1tjXS5mcGZu
ID0gMDsKLQkJCXJiby0+cGxhY2VtZW50c1tjXS5tZW1fdHlwZSA9IFRUTV9QTF9UVDsKLQkJCXJi
by0+cGxhY2VtZW50c1tjKytdLmZsYWdzID0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQ7Ci0KLQkJfSBl
bHNlIGlmICgocmJvLT5mbGFncyAmIFJBREVPTl9HRU1fR1RUX1dDKSB8fAotCQkJICAgKHJiby0+
cmRldi0+ZmxhZ3MgJiBSQURFT05fSVNfQUdQKSkgewotCQkJcmJvLT5wbGFjZW1lbnRzW2NdLmZw
Zm4gPSAwOwotCQkJcmJvLT5wbGFjZW1lbnRzW2NdLm1lbV90eXBlID0gVFRNX1BMX1RUOwotCQkJ
cmJvLT5wbGFjZW1lbnRzW2MrK10uZmxhZ3MgPSBUVE1fUExfRkxBR19XQyB8Ci0JCQkJVFRNX1BM
X0ZMQUdfVU5DQUNIRUQ7Ci0JCX0gZWxzZSB7Ci0JCQlyYm8tPnBsYWNlbWVudHNbY10uZnBmbiA9
IDA7Ci0JCQlyYm8tPnBsYWNlbWVudHNbY10ubWVtX3R5cGUgPSBUVE1fUExfVFQ7Ci0JCQlyYm8t
PnBsYWNlbWVudHNbYysrXS5mbGFncyA9IFRUTV9QTF9GTEFHX0NBQ0hFRDsKLQkJfQorCQlyYm8t
PnBsYWNlbWVudHNbY10uZnBmbiA9IDA7CisJCXJiby0+cGxhY2VtZW50c1tjXS5tZW1fdHlwZSA9
IFRUTV9QTF9UVDsKKwkJcmJvLT5wbGFjZW1lbnRzW2MrK10uZmxhZ3MgPSAwOwogCX0KIAogCWlm
IChkb21haW4gJiBSQURFT05fR0VNX0RPTUFJTl9DUFUpIHsKLQkJaWYgKHJiby0+ZmxhZ3MgJiBS
QURFT05fR0VNX0dUVF9VQykgewotCQkJcmJvLT5wbGFjZW1lbnRzW2NdLmZwZm4gPSAwOwotCQkJ
cmJvLT5wbGFjZW1lbnRzW2NdLm1lbV90eXBlID0gVFRNX1BMX1NZU1RFTTsKLQkJCXJiby0+cGxh
Y2VtZW50c1tjKytdLmZsYWdzID0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQ7Ci0KLQkJfSBlbHNlIGlm
ICgocmJvLT5mbGFncyAmIFJBREVPTl9HRU1fR1RUX1dDKSB8fAotCQkgICAgcmJvLT5yZGV2LT5m
bGFncyAmIFJBREVPTl9JU19BR1ApIHsKLQkJCXJiby0+cGxhY2VtZW50c1tjXS5mcGZuID0gMDsK
LQkJCXJiby0+cGxhY2VtZW50c1tjXS5tZW1fdHlwZSA9IFRUTV9QTF9TWVNURU07Ci0JCQlyYm8t
PnBsYWNlbWVudHNbYysrXS5mbGFncyA9IFRUTV9QTF9GTEFHX1dDIHwKLQkJCQlUVE1fUExfRkxB
R19VTkNBQ0hFRDsKLQkJfSBlbHNlIHsKLQkJCXJiby0+cGxhY2VtZW50c1tjXS5mcGZuID0gMDsK
LQkJCXJiby0+cGxhY2VtZW50c1tjXS5tZW1fdHlwZSA9IFRUTV9QTF9TWVNURU07Ci0JCQlyYm8t
PnBsYWNlbWVudHNbYysrXS5mbGFncyA9IFRUTV9QTF9GTEFHX0NBQ0hFRDsKLQkJfQorCQlyYm8t
PnBsYWNlbWVudHNbY10uZnBmbiA9IDA7CisJCXJiby0+cGxhY2VtZW50c1tjXS5tZW1fdHlwZSA9
IFRUTV9QTF9TWVNURU07CisJCXJiby0+cGxhY2VtZW50c1tjKytdLmZsYWdzID0gMDsKIAl9CiAJ
aWYgKCFjKSB7CiAJCXJiby0+cGxhY2VtZW50c1tjXS5mcGZuID0gMDsKIAkJcmJvLT5wbGFjZW1l
bnRzW2NdLm1lbV90eXBlID0gVFRNX1BMX1NZU1RFTTsKLQkJcmJvLT5wbGFjZW1lbnRzW2MrK10u
ZmxhZ3MgPSBUVE1fUExfTUFTS19DQUNISU5HOworCQlyYm8tPnBsYWNlbWVudHNbYysrXS5mbGFn
cyA9IDA7CiAJfQogCiAJcmJvLT5wbGFjZW1lbnQubnVtX3BsYWNlbWVudCA9IGM7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90dG0uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9yYWRlb24vcmFkZW9uX3R0bS5jCmluZGV4IDliNTNhMWQ4MDYzMi4uZDZmNDJmYmM4MWY0IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90dG0uYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90dG0uYwpAQCAtODksNyArODksNyBAQCBzdGF0aWMg
dm9pZCByYWRlb25fZXZpY3RfZmxhZ3Moc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKIAkJ
LmZwZm4gPSAwLAogCQkubHBmbiA9IDAsCiAJCS5tZW1fdHlwZSA9IFRUTV9QTF9TWVNURU0sCi0J
CS5mbGFncyA9IFRUTV9QTF9NQVNLX0NBQ0hJTkcKKwkJLmZsYWdzID0gMAogCX07CiAKIAlzdHJ1
Y3QgcmFkZW9uX2JvICpyYm87CkBAIC0yMjUsMTcgKzIyNSwxMiBAQCBzdGF0aWMgaW50IHJhZGVv
bl9tb3ZlX3ZyYW1fcmFtKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJcGxhY2VtZW50
cy5mcGZuID0gMDsKIAlwbGFjZW1lbnRzLmxwZm4gPSAwOwogCXBsYWNlbWVudHMubWVtX3R5cGUg
PSBUVE1fUExfVFQ7Ci0JcGxhY2VtZW50cy5mbGFncyA9IFRUTV9QTF9NQVNLX0NBQ0hJTkc7CisJ
cGxhY2VtZW50cy5mbGFncyA9IDA7CiAJciA9IHR0bV9ib19tZW1fc3BhY2UoYm8sICZwbGFjZW1l
bnQsICZ0bXBfbWVtLCBjdHgpOwogCWlmICh1bmxpa2VseShyKSkgewogCQlyZXR1cm4gcjsKIAl9
CiAKLQlyID0gdHRtX3R0X3NldF9wbGFjZW1lbnRfY2FjaGluZyhiby0+dHRtLCB0bXBfbWVtLnBs
YWNlbWVudCk7Ci0JaWYgKHVubGlrZWx5KHIpKSB7Ci0JCWdvdG8gb3V0X2NsZWFudXA7Ci0JfQot
CiAJciA9IHR0bV90dF9wb3B1bGF0ZShiby0+YmRldiwgYm8tPnR0bSwgY3R4KTsKIAlpZiAodW5s
aWtlbHkocikpIHsKIAkJZ290byBvdXRfY2xlYW51cDsKQEAgLTI3NSw3ICsyNzAsNyBAQCBzdGF0
aWMgaW50IHJhZGVvbl9tb3ZlX3JhbV92cmFtKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8s
CiAJcGxhY2VtZW50cy5mcGZuID0gMDsKIAlwbGFjZW1lbnRzLmxwZm4gPSAwOwogCXBsYWNlbWVu
dHMubWVtX3R5cGUgPSBUVE1fUExfVFQ7Ci0JcGxhY2VtZW50cy5mbGFncyA9IFRUTV9QTF9NQVNL
X0NBQ0hJTkc7CisJcGxhY2VtZW50cy5mbGFncyA9IDA7CiAJciA9IHR0bV9ib19tZW1fc3BhY2Uo
Ym8sICZwbGFjZW1lbnQsICZ0bXBfbWVtLCBjdHgpOwogCWlmICh1bmxpa2VseShyKSkgewogCQly
ZXR1cm4gcjsKQEAgLTM4OSwxMiArMzg0LDcgQEAgc3RhdGljIGludCByYWRlb25fdHRtX2lvX21l
bV9yZXNlcnZlKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LCBzdHJ1Y3QgdHRtX3Jlc28KIAkJ
ICogQWxwaGE6IHVzZSBidXMuYWRkciB0byBob2xkIHRoZSBpb3JlbWFwKCkgcmV0dXJuLAogCQkg
KiBzbyB3ZSBjYW4gbW9kaWZ5IGJ1cy5iYXNlIGJlbG93LgogCQkgKi8KLQkJaWYgKG1lbS0+cGxh
Y2VtZW50ICYgVFRNX1BMX0ZMQUdfV0MpCi0JCQltZW0tPmJ1cy5hZGRyID0KLQkJCQlpb3JlbWFw
X3djKG1lbS0+YnVzLm9mZnNldCwgYnVzX3NpemUpOwotCQllbHNlCi0JCQltZW0tPmJ1cy5hZGRy
ID0KLQkJCQlpb3JlbWFwKG1lbS0+YnVzLm9mZnNldCwgYnVzX3NpemUpOworCQltZW0tPmJ1cy5h
ZGRyID0gaW9yZW1hcF93YyhtZW0tPmJ1cy5vZmZzZXQsIGJ1c19zaXplKTsKIAkJaWYgKCFtZW0t
PmJ1cy5hZGRyKQogCQkJcmV0dXJuIC1FTk9NRU07CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS90dG0vdHRtX2FncF9iYWNrZW5kLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9hZ3Bf
YmFja2VuZC5jCmluZGV4IGE3MjMwNjJkMzdlNy4uNGY3NmM5Mjg3MTU5IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9hZ3BfYmFja2VuZC5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2FncF9iYWNrZW5kLmMKQEAgLTU0LDcgKzU0LDcgQEAgaW50IHR0bV9hZ3BfYmlu
ZChzdHJ1Y3QgdHRtX3R0ICp0dG0sIHN0cnVjdCB0dG1fcmVzb3VyY2UgKmJvX21lbSkKIAlzdHJ1
Y3QgcGFnZSAqZHVtbXlfcmVhZF9wYWdlID0gdHRtX2JvX2dsb2IuZHVtbXlfcmVhZF9wYWdlOwog
CXN0cnVjdCBkcm1fbW1fbm9kZSAqbm9kZSA9IGJvX21lbS0+bW1fbm9kZTsKIAlzdHJ1Y3QgYWdw
X21lbW9yeSAqbWVtOwotCWludCByZXQsIGNhY2hlZCA9IChib19tZW0tPnBsYWNlbWVudCAmIFRU
TV9QTF9GTEFHX0NBQ0hFRCk7CisJaW50IHJldCwgY2FjaGVkID0gdHRtLT5jYWNoaW5nID09IHR0
bV9jYWNoZWQ7CiAJdW5zaWduZWQgaTsKIAogCWlmIChhZ3BfYmUtPm1lbSkKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9i
by5jCmluZGV4IGUxMWU4ZWFhNjYwMi4uMmZlNGNiZWZkZTI4IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vdHRtL3R0bV9iby5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMK
QEAgLTI1MiwxMCArMjUyLDYgQEAgc3RhdGljIGludCB0dG1fYm9faGFuZGxlX21vdmVfbWVtKHN0
cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJCWlmIChyZXQpCiAJCQlnb3RvIG91dF9lcnI7
CiAKLQkJcmV0ID0gdHRtX3R0X3NldF9wbGFjZW1lbnRfY2FjaGluZyhiby0+dHRtLCBtZW0tPnBs
YWNlbWVudCk7Ci0JCWlmIChyZXQpCi0JCQlnb3RvIG91dF9lcnI7Ci0KIAkJaWYgKG1lbS0+bWVt
X3R5cGUgIT0gVFRNX1BMX1NZU1RFTSkgewogCQkJcmV0ID0gdHRtX3R0X3BvcHVsYXRlKGJkZXYs
IGJvLT50dG0sIGN0eCk7CiAJCQlpZiAocmV0KQpAQCAtODU0LDI5ICs4NTAsNiBAQCBzdGF0aWMg
aW50IHR0bV9ib19tZW1fZm9yY2Vfc3BhY2Uoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywK
IAlyZXR1cm4gdHRtX2JvX2FkZF9tb3ZlX2ZlbmNlKGJvLCBtYW4sIG1lbSwgY3R4LT5ub193YWl0
X2dwdSk7CiB9CiAKLXN0YXRpYyB1aW50MzJfdCB0dG1fYm9fc2VsZWN0X2NhY2hpbmcoc3RydWN0
IHR0bV9yZXNvdXJjZV9tYW5hZ2VyICptYW4sCi0JCQkJICAgICAgdWludDMyX3QgY3VyX3BsYWNl
bWVudCwKLQkJCQkgICAgICB1aW50MzJfdCBwcm9wb3NlZF9wbGFjZW1lbnQpCi17Ci0JdWludDMy
X3QgY2FjaGluZyA9IHByb3Bvc2VkX3BsYWNlbWVudCAmIFRUTV9QTF9NQVNLX0NBQ0hJTkc7Ci0J
dWludDMyX3QgcmVzdWx0ID0gcHJvcG9zZWRfcGxhY2VtZW50ICYgflRUTV9QTF9NQVNLX0NBQ0hJ
Tkc7Ci0KLQkvKioKLQkgKiBLZWVwIGN1cnJlbnQgY2FjaGluZyBpZiBwb3NzaWJsZS4KLQkgKi8K
LQotCWlmICgoY3VyX3BsYWNlbWVudCAmIGNhY2hpbmcpICE9IDApCi0JCXJlc3VsdCB8PSAoY3Vy
X3BsYWNlbWVudCAmIGNhY2hpbmcpOwotCWVsc2UgaWYgKChUVE1fUExfRkxBR19DQUNIRUQgJiBj
YWNoaW5nKSAhPSAwKQotCQlyZXN1bHQgfD0gVFRNX1BMX0ZMQUdfQ0FDSEVEOwotCWVsc2UgaWYg
KChUVE1fUExfRkxBR19XQyAmIGNhY2hpbmcpICE9IDApCi0JCXJlc3VsdCB8PSBUVE1fUExfRkxB
R19XQzsKLQllbHNlIGlmICgoVFRNX1BMX0ZMQUdfVU5DQUNIRUQgJiBjYWNoaW5nKSAhPSAwKQot
CQlyZXN1bHQgfD0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQ7Ci0KLQlyZXR1cm4gcmVzdWx0OwotfQot
CiAvKioKICAqIHR0bV9ib19tZW1fcGxhY2VtZW50IC0gY2hlY2sgaWYgcGxhY2VtZW50IGlzIGNv
bXBhdGlibGUKICAqIEBibzogQk8gdG8gZmluZCBtZW1vcnkgZm9yCkBAIC04OTUsMTggKzg2OCwx
MyBAQCBzdGF0aWMgaW50IHR0bV9ib19tZW1fcGxhY2VtZW50KHN0cnVjdCB0dG1fYnVmZmVyX29i
amVjdCAqYm8sCiB7CiAJc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYgPSBiby0+YmRldjsKIAlz
dHJ1Y3QgdHRtX3Jlc291cmNlX21hbmFnZXIgKm1hbjsKLQl1aW50MzJfdCBjdXJfZmxhZ3MgPSAw
OwogCiAJbWFuID0gdHRtX21hbmFnZXJfdHlwZShiZGV2LCBwbGFjZS0+bWVtX3R5cGUpOwogCWlm
ICghbWFuIHx8ICF0dG1fcmVzb3VyY2VfbWFuYWdlcl91c2VkKG1hbikpCiAJCXJldHVybiAtRUJV
U1k7CiAKLQljdXJfZmxhZ3MgPSB0dG1fYm9fc2VsZWN0X2NhY2hpbmcobWFuLCBiby0+bWVtLnBs
YWNlbWVudCwKLQkJCQkJICBwbGFjZS0+ZmxhZ3MpOwotCWN1cl9mbGFncyB8PSBwbGFjZS0+Zmxh
Z3MgJiB+VFRNX1BMX01BU0tfQ0FDSElORzsKLQogCW1lbS0+bWVtX3R5cGUgPSBwbGFjZS0+bWVt
X3R5cGU7Ci0JbWVtLT5wbGFjZW1lbnQgPSBjdXJfZmxhZ3M7CisJbWVtLT5wbGFjZW1lbnQgPSBw
bGFjZS0+ZmxhZ3M7CiAKIAlzcGluX2xvY2soJnR0bV9ib19nbG9iLmxydV9sb2NrKTsKIAl0dG1f
Ym9fZGVsX2Zyb21fbHJ1KGJvKTsKQEAgLTEwMzksOCArMTAwNyw3IEBAIHN0YXRpYyBib29sIHR0
bV9ib19wbGFjZXNfY29tcGF0KGNvbnN0IHN0cnVjdCB0dG1fcGxhY2UgKnBsYWNlcywKIAkJCWNv
bnRpbnVlOwogCiAJCSpuZXdfZmxhZ3MgPSBoZWFwLT5mbGFnczsKLQkJaWYgKCgqbmV3X2ZsYWdz
ICYgbWVtLT5wbGFjZW1lbnQgJiBUVE1fUExfTUFTS19DQUNISU5HKSAmJgotCQkgICAgKG1lbS0+
bWVtX3R5cGUgPT0gaGVhcC0+bWVtX3R5cGUpICYmCisJCWlmICgobWVtLT5tZW1fdHlwZSA9PSBo
ZWFwLT5tZW1fdHlwZSkgJiYKIAkJICAgICghKCpuZXdfZmxhZ3MgJiBUVE1fUExfRkxBR19DT05U
SUdVT1VTKSB8fAogCQkgICAgIChtZW0tPnBsYWNlbWVudCAmIFRUTV9QTF9GTEFHX0NPTlRJR1VP
VVMpKSkKIAkJCXJldHVybiB0cnVlOwpAQCAtMTA5NCw5ICsxMDYxLDYgQEAgaW50IHR0bV9ib192
YWxpZGF0ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAogCQlyZXQgPSB0dG1fYm9fbW92
ZV9idWZmZXIoYm8sIHBsYWNlbWVudCwgY3R4KTsKIAkJaWYgKHJldCkKIAkJCXJldHVybiByZXQ7
Ci0JfSBlbHNlIHsKLQkJYm8tPm1lbS5wbGFjZW1lbnQgJj0gVFRNX1BMX01BU0tfQ0FDSElORzsK
LQkJYm8tPm1lbS5wbGFjZW1lbnQgfD0gbmV3X2ZsYWdzICYgflRUTV9QTF9NQVNLX0NBQ0hJTkc7
CiAJfQogCS8qCiAJICogV2UgbWlnaHQgbmVlZCB0byBhZGQgYSBUVE0uCkBAIC0xMTY0LDcgKzEx
MjgsNyBAQCBpbnQgdHRtX2JvX2luaXRfcmVzZXJ2ZWQoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJk
ZXYsCiAJYm8tPm1lbS5idXMub2Zmc2V0ID0gMDsKIAliby0+bWVtLmJ1cy5hZGRyID0gTlVMTDsK
IAliby0+bW92aW5nID0gTlVMTDsKLQliby0+bWVtLnBsYWNlbWVudCA9IFRUTV9QTF9GTEFHX0NB
Q0hFRDsKKwliby0+bWVtLnBsYWNlbWVudCA9IDA7CiAJYm8tPmFjY19zaXplID0gYWNjX3NpemU7
CiAJYm8tPnBpbl9jb3VudCA9IDA7CiAJYm8tPnNnID0gc2c7CkBAIC0xNTEyLDcgKzE0NzYsNyBA
QCBpbnQgdHRtX2JvX3N3YXBvdXQoc3RydWN0IHR0bV9ib19nbG9iYWwgKmdsb2IsIHN0cnVjdCB0
dG1fb3BlcmF0aW9uX2N0eCAqY3R4KQogCiAJCWV2aWN0X21lbSA9IGJvLT5tZW07CiAJCWV2aWN0
X21lbS5tbV9ub2RlID0gTlVMTDsKLQkJZXZpY3RfbWVtLnBsYWNlbWVudCA9IFRUTV9QTF9NQVNL
X0NBQ0hJTkc7CisJCWV2aWN0X21lbS5wbGFjZW1lbnQgPSAwOwogCQlldmljdF9tZW0ubWVtX3R5
cGUgPSBUVE1fUExfU1lTVEVNOwogCiAJCXJldCA9IHR0bV9ib19oYW5kbGVfbW92ZV9tZW0oYm8s
ICZldmljdF9tZW0sIHRydWUsICZjdHgpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fYm9fdXRpbC5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdXRpbC5jCmluZGV4
IDA1NDIwOTdkYzQxOS4uYmE3YWI1ZWQ4NWQwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV9ib191dGlsLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdXRpbC5j
CkBAIC03MiwxMCArNzIsNiBAQCBpbnQgdHRtX2JvX21vdmVfdHRtKHN0cnVjdCB0dG1fYnVmZmVy
X29iamVjdCAqYm8sCiAJCW9sZF9tZW0tPm1lbV90eXBlID0gVFRNX1BMX1NZU1RFTTsKIAl9CiAK
LQlyZXQgPSB0dG1fdHRfc2V0X3BsYWNlbWVudF9jYWNoaW5nKHR0bSwgbmV3X21lbS0+cGxhY2Vt
ZW50KTsKLQlpZiAodW5saWtlbHkocmV0ICE9IDApKQotCQlyZXR1cm4gcmV0OwotCiAJaWYgKG5l
d19tZW0tPm1lbV90eXBlICE9IFRUTV9QTF9TWVNURU0pIHsKIAogCQlyZXQgPSB0dG1fdHRfcG9w
dWxhdGUoYm8tPmJkZXYsIHR0bSwgY3R4KTsKQEAgLTEzNSw3ICsxMzEsNyBAQCBzdGF0aWMgaW50
IHR0bV9yZXNvdXJjZV9pb3JlbWFwKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LAogCX0gZWxz
ZSB7CiAJCXNpemVfdCBidXNfc2l6ZSA9IChzaXplX3QpbWVtLT5udW1fcGFnZXMgPDwgUEFHRV9T
SElGVDsKIAotCQlpZiAobWVtLT5wbGFjZW1lbnQgJiBUVE1fUExfRkxBR19XQykKKwkJaWYgKG1l
bS0+YnVzLmNhY2hpbmcgPT0gdHRtX3dyaXRlX2NvbWJpbmVkKQogCQkJYWRkciA9IGlvcmVtYXBf
d2MobWVtLT5idXMub2Zmc2V0LCBidXNfc2l6ZSk7CiAJCWVsc2UKIAkJCWFkZHIgPSBpb3JlbWFw
KG1lbS0+YnVzLm9mZnNldCwgYnVzX3NpemUpOwpAQCAtNDI3LDcgKzQyMyw3IEBAIHN0YXRpYyBp
bnQgdHRtX2JvX2lvcmVtYXAoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKIAkJbWFwLT52
aXJ0dWFsID0gKHZvaWQgKikoKCh1OCAqKWJvLT5tZW0uYnVzLmFkZHIpICsgb2Zmc2V0KTsKIAl9
IGVsc2UgewogCQltYXAtPmJvX2ttYXBfdHlwZSA9IHR0bV9ib19tYXBfaW9tYXA7Ci0JCWlmICht
ZW0tPnBsYWNlbWVudCAmIFRUTV9QTF9GTEFHX1dDKQorCQlpZiAobWVtLT5idXMuY2FjaGluZyA9
PSB0dG1fd3JpdGVfY29tYmluZWQpCiAJCQltYXAtPnZpcnR1YWwgPSBpb3JlbWFwX3djKGJvLT5t
ZW0uYnVzLm9mZnNldCArIG9mZnNldCwKIAkJCQkJCSAgc2l6ZSk7CiAJCWVsc2UKQEAgLTQ1Nyw3
ICs0NTMsNyBAQCBzdGF0aWMgaW50IHR0bV9ib19rbWFwX3R0bShzdHJ1Y3QgdHRtX2J1ZmZlcl9v
YmplY3QgKmJvLAogCWlmIChyZXQpCiAJCXJldHVybiByZXQ7CiAKLQlpZiAobnVtX3BhZ2VzID09
IDEgJiYgKG1lbS0+cGxhY2VtZW50ICYgVFRNX1BMX0ZMQUdfQ0FDSEVEKSkgeworCWlmIChudW1f
cGFnZXMgPT0gMSAmJiB0dG0tPmNhY2hpbmcgPT0gdHRtX2NhY2hlZCkgewogCQkvKgogCQkgKiBX
ZSdyZSBtYXBwaW5nIGEgc2luZ2xlIHBhZ2UsIGFuZCB0aGUgZGVzaXJlZAogCQkgKiBwYWdlIHBy
b3RlY3Rpb24gaXMgY29uc2lzdGVudCB3aXRoIHRoZSBiby4KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS90dG0vdHRtX3R0LmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90dC5jCmluZGV4
IGE0NjVmNTFkZjAyNy4uM2U1ZGQ2MjcxZDRjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV90dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX3R0LmMKQEAgLTExNCwz
NSArMTE0LDYgQEAgc3RhdGljIGludCB0dG1fc2dfdHRfYWxsb2NfcGFnZV9kaXJlY3Rvcnkoc3Ry
dWN0IHR0bV9kbWFfdHQgKnR0bSkKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIGludCB0dG1fdHRf
c2V0X2NhY2hpbmcoc3RydWN0IHR0bV90dCAqdHRtLCBlbnVtIHR0bV9jYWNoaW5nIGNhY2hpbmcp
Ci17Ci0JaWYgKHR0bS0+Y2FjaGluZyA9PSBjYWNoaW5nKQotCQlyZXR1cm4gMDsKLQotCS8qIENh
bid0IGNoYW5nZSB0aGUgY2FjaGluZyBzdGF0ZSBhZnRlciBUVCBpcyBwb3B1bGF0ZWQgKi8KLQlp
ZiAoV0FSTl9PTl9PTkNFKHR0bV90dF9pc19wb3B1bGF0ZWQodHRtKSkpCi0JCXJldHVybiAtRUlO
VkFMOwotCi0JdHRtLT5jYWNoaW5nID0gY2FjaGluZzsKLQotCXJldHVybiAwOwotfQotCi1pbnQg
dHRtX3R0X3NldF9wbGFjZW1lbnRfY2FjaGluZyhzdHJ1Y3QgdHRtX3R0ICp0dG0sIHVpbnQzMl90
IHBsYWNlbWVudCkKLXsKLQllbnVtIHR0bV9jYWNoaW5nIHN0YXRlOwotCi0JaWYgKHBsYWNlbWVu
dCAmIFRUTV9QTF9GTEFHX1dDKQotCQlzdGF0ZSA9IHR0bV93cml0ZV9jb21iaW5lZDsKLQllbHNl
IGlmIChwbGFjZW1lbnQgJiBUVE1fUExfRkxBR19VTkNBQ0hFRCkKLQkJc3RhdGUgPSB0dG1fdW5j
YWNoZWQ7Ci0JZWxzZQotCQlzdGF0ZSA9IHR0bV9jYWNoZWQ7Ci0KLQlyZXR1cm4gdHRtX3R0X3Nl
dF9jYWNoaW5nKHR0bSwgc3RhdGUpOwotfQotRVhQT1JUX1NZTUJPTCh0dG1fdHRfc2V0X3BsYWNl
bWVudF9jYWNoaW5nKTsKLQogdm9pZCB0dG1fdHRfZGVzdHJveV9jb21tb24oc3RydWN0IHR0bV9i
b19kZXZpY2UgKmJkZXYsIHN0cnVjdCB0dG1fdHQgKnR0bSkKIHsKIAl0dG1fdHRfdW5wb3B1bGF0
ZShiZGV2LCB0dG0pOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhf
dHRtX2J1ZmZlci5jIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfdHRtX2J1ZmZlci5j
CmluZGV4IDJhN2I1Zjk2NDc3Ni4uOTc1ZDA2YzJlMzVlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vdm13Z2Z4L3Ztd2dmeF90dG1fYnVmZmVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3Zt
d2dmeC92bXdnZnhfdHRtX2J1ZmZlci5jCkBAIC0zNCwyOCArMzQsMjggQEAgc3RhdGljIGNvbnN0
IHN0cnVjdCB0dG1fcGxhY2UgdnJhbV9wbGFjZW1lbnRfZmxhZ3MgPSB7CiAJLmZwZm4gPSAwLAog
CS5scGZuID0gMCwKIAkubWVtX3R5cGUgPSBUVE1fUExfVlJBTSwKLQkuZmxhZ3MgPSBUVE1fUExf
RkxBR19DQUNIRUQKKwkuZmxhZ3MgPSAwCiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IHR0bV9w
bGFjZSBzeXNfcGxhY2VtZW50X2ZsYWdzID0gewogCS5mcGZuID0gMCwKIAkubHBmbiA9IDAsCiAJ
Lm1lbV90eXBlID0gVFRNX1BMX1NZU1RFTSwKLQkuZmxhZ3MgPSBUVE1fUExfRkxBR19DQUNIRUQK
KwkuZmxhZ3MgPSAwCiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IHR0bV9wbGFjZSBnbXJfcGxh
Y2VtZW50X2ZsYWdzID0gewogCS5mcGZuID0gMCwKIAkubHBmbiA9IDAsCiAJLm1lbV90eXBlID0g
Vk1XX1BMX0dNUiwKLQkuZmxhZ3MgPSBUVE1fUExfRkxBR19DQUNIRUQKKwkuZmxhZ3MgPSAwCiB9
OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IHR0bV9wbGFjZSBtb2JfcGxhY2VtZW50X2ZsYWdzID0g
ewogCS5mcGZuID0gMCwKIAkubHBmbiA9IDAsCiAJLm1lbV90eXBlID0gVk1XX1BMX01PQiwKLQku
ZmxhZ3MgPSBUVE1fUExfRkxBR19DQUNIRUQKKwkuZmxhZ3MgPSAwCiB9OwogCiBzdHJ1Y3QgdHRt
X3BsYWNlbWVudCB2bXdfdnJhbV9wbGFjZW1lbnQgPSB7CkBAIC03MCwxMiArNzAsMTIgQEAgc3Rh
dGljIGNvbnN0IHN0cnVjdCB0dG1fcGxhY2UgdnJhbV9nbXJfcGxhY2VtZW50X2ZsYWdzW10gPSB7
CiAJCS5mcGZuID0gMCwKIAkJLmxwZm4gPSAwLAogCQkubWVtX3R5cGUgPSBUVE1fUExfVlJBTSwK
LQkJLmZsYWdzID0gVFRNX1BMX0ZMQUdfQ0FDSEVECisJCS5mbGFncyA9IDAKIAl9LCB7CiAJCS5m
cGZuID0gMCwKIAkJLmxwZm4gPSAwLAogCQkubWVtX3R5cGUgPSBWTVdfUExfR01SLAotCQkuZmxh
Z3MgPSBUVE1fUExfRkxBR19DQUNIRUQKKwkJLmZsYWdzID0gMAogCX0KIH07CiAKQEAgLTg0LDEy
ICs4NCwxMiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHR0bV9wbGFjZSBnbXJfdnJhbV9wbGFjZW1l
bnRfZmxhZ3NbXSA9IHsKIAkJLmZwZm4gPSAwLAogCQkubHBmbiA9IDAsCiAJCS5tZW1fdHlwZSA9
IFZNV19QTF9HTVIsCi0JCS5mbGFncyA9IFRUTV9QTF9GTEFHX0NBQ0hFRAorCQkuZmxhZ3MgPSAw
CiAJfSwgewogCQkuZnBmbiA9IDAsCiAJCS5scGZuID0gMCwKIAkJLm1lbV90eXBlID0gVFRNX1BM
X1ZSQU0sCi0JCS5mbGFncyA9IFRUTV9QTF9GTEFHX0NBQ0hFRAorCQkuZmxhZ3MgPSAwCiAJfQog
fTsKIApAQCAtMTE5LDIyICsxMTksMjIgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCB0dG1fcGxhY2Ug
ZXZpY3RhYmxlX3BsYWNlbWVudF9mbGFnc1tdID0gewogCQkuZnBmbiA9IDAsCiAJCS5scGZuID0g
MCwKIAkJLm1lbV90eXBlID0gVFRNX1BMX1NZU1RFTSwKLQkJLmZsYWdzID0gVFRNX1BMX0ZMQUdf
Q0FDSEVECisJCS5mbGFncyA9IDAKIAl9LCB7CiAJCS5mcGZuID0gMCwKIAkJLmxwZm4gPSAwLAog
CQkubWVtX3R5cGUgPSBUVE1fUExfVlJBTSwKLQkJLmZsYWdzID0gVFRNX1BMX0ZMQUdfQ0FDSEVE
CisJCS5mbGFncyA9IDAKIAl9LCB7CiAJCS5mcGZuID0gMCwKIAkJLmxwZm4gPSAwLAogCQkubWVt
X3R5cGUgPSBWTVdfUExfR01SLAotCQkuZmxhZ3MgPSBUVE1fUExfRkxBR19DQUNIRUQKKwkJLmZs
YWdzID0gMAogCX0sIHsKIAkJLmZwZm4gPSAwLAogCQkubHBmbiA9IDAsCiAJCS5tZW1fdHlwZSA9
IFZNV19QTF9NT0IsCi0JCS5mbGFncyA9IFRUTV9QTF9GTEFHX0NBQ0hFRAorCQkuZmxhZ3MgPSAw
CiAJfQogfTsKIApAQCAtMTQzLDE3ICsxNDMsMTcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCB0dG1f
cGxhY2Ugbm9uZml4ZWRfcGxhY2VtZW50X2ZsYWdzW10gPSB7CiAJCS5mcGZuID0gMCwKIAkJLmxw
Zm4gPSAwLAogCQkubWVtX3R5cGUgPSBUVE1fUExfU1lTVEVNLAotCQkuZmxhZ3MgPSBUVE1fUExf
RkxBR19DQUNIRUQKKwkJLmZsYWdzID0gMAogCX0sIHsKIAkJLmZwZm4gPSAwLAogCQkubHBmbiA9
IDAsCiAJCS5tZW1fdHlwZSA9IFZNV19QTF9HTVIsCi0JCS5mbGFncyA9IFRUTV9QTF9GTEFHX0NB
Q0hFRAorCQkuZmxhZ3MgPSAwCiAJfSwgewogCQkuZnBmbiA9IDAsCiAJCS5scGZuID0gMCwKIAkJ
Lm1lbV90eXBlID0gVk1XX1BMX01PQiwKLQkJLmZsYWdzID0gVFRNX1BMX0ZMQUdfQ0FDSEVECisJ
CS5mbGFncyA9IDAKIAl9CiB9OwogCmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS90dG0vdHRtX3Bs
YWNlbWVudC5oIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV9wbGFjZW1lbnQuaAppbmRleCA1MGU3MmRm
NDhiOGQuLmFhNmJhNGQwY2Y3OCAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vdHRtL3R0bV9wbGFj
ZW1lbnQuaAorKysgYi9pbmNsdWRlL2RybS90dG0vdHRtX3BsYWNlbWVudC5oCkBAIC00MywyNyAr
NDMsMTMgQEAKICNkZWZpbmUgVFRNX1BMX1BSSVYgICAgICAgICAgICAgMwogCiAvKgotICogT3Ro
ZXIgZmxhZ3MgdGhhdCBhZmZlY3RzIGRhdGEgcGxhY2VtZW50LgotICogVFRNX1BMX0ZMQUdfQ0FD
SEVEIGluZGljYXRlcyBjYWNoZS1jb2hlcmVudCBtYXBwaW5ncwotICogaWYgYXZhaWxhYmxlLgot
ICogVFRNX1BMX0ZMQUdfU0hBUkVEIG1lYW5zIHRoYXQgYW5vdGhlciBhcHBsaWNhdGlvbiBtYXkK
LSAqIHJlZmVyZW5jZSB0aGUgYnVmZmVyLgotICogVFRNX1BMX0ZMQUdfTk9fRVZJQ1QgbWVhbnMg
dGhhdCB0aGUgYnVmZmVyIG1heSBuZXZlcgotICogYmUgZXZpY3RlZCB0byBtYWtlIHJvb20gZm9y
IG90aGVyIGJ1ZmZlcnMuCiAgKiBUVE1fUExfRkxBR19UT1BET1dOIHJlcXVlc3RzIHRvIGJlIHBs
YWNlZCBmcm9tIHRoZQogICogdG9wIG9mIHRoZSBtZW1vcnkgYXJlYSwgaW5zdGVhZCBvZiB0aGUg
Ym90dG9tLgogICovCiAKLSNkZWZpbmUgVFRNX1BMX0ZMQUdfQ0FDSEVEICAgICAgKDEgPDwgMTYp
Ci0jZGVmaW5lIFRUTV9QTF9GTEFHX1VOQ0FDSEVEICAgICgxIDw8IDE3KQotI2RlZmluZSBUVE1f
UExfRkxBR19XQyAgICAgICAgICAoMSA8PCAxOCkKICNkZWZpbmUgVFRNX1BMX0ZMQUdfQ09OVElH
VU9VUyAgKDEgPDwgMTkpCiAjZGVmaW5lIFRUTV9QTF9GTEFHX1RPUERPV04gICAgICgxIDw8IDIy
KQogCi0jZGVmaW5lIFRUTV9QTF9NQVNLX0NBQ0hJTkcgICAgIChUVE1fUExfRkxBR19DQUNIRUQg
fCBcCi0JCQkJIFRUTV9QTF9GTEFHX1VOQ0FDSEVEIHwgXAotCQkJCSBUVE1fUExfRkxBR19XQykK
LQogLyoqCiAgKiBzdHJ1Y3QgdHRtX3BsYWNlCiAgKgpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0v
dHRtL3R0bV90dC5oIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV90dC5oCmluZGV4IGMzOWM3MjJkNTE4
NC4uZTA0MmRlYzVlNmMxIDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS90dG0vdHRtX3R0LmgKKysr
IGIvaW5jbHVkZS9kcm0vdHRtL3R0bV90dC5oCkBAIC0xNjQsMjEgKzE2NCw2IEBAIHZvaWQgdHRt
X3R0X2Rlc3Ryb3lfY29tbW9uKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LCBzdHJ1Y3QgdHRt
X3R0ICp0dG0pOwogICogU3dhcCBpbiBhIHByZXZpb3VzbHkgc3dhcCBvdXQgdHRtX3R0LgogICov
CiBpbnQgdHRtX3R0X3N3YXBpbihzdHJ1Y3QgdHRtX3R0ICp0dG0pOwotCi0vKioKLSAqIHR0bV90
dF9zZXRfcGxhY2VtZW50X2NhY2hpbmc6Ci0gKgotICogQHR0bSBBIHN0cnVjdCB0dG1fdHQgdGhl
IGJhY2tpbmcgcGFnZXMgb2Ygd2hpY2ggd2lsbCBjaGFuZ2UgY2FjaGluZyBwb2xpY3kuCi0gKiBA
cGxhY2VtZW50OiBGbGFnIGluZGljYXRpbmcgdGhlIGRlc2lyZWQgY2FjaGluZyBwb2xpY3kuCi0g
KgotICogVGhpcyBmdW5jdGlvbiB3aWxsIGNoYW5nZSBjYWNoaW5nIHBvbGljeSBvZiBhbnkgZGVm
YXVsdCBrZXJuZWwgbWFwcGluZ3Mgb2YKLSAqIHRoZSBwYWdlcyBiYWNraW5nIEB0dG0uIElmIGNo
YW5naW5nIGZyb20gY2FjaGVkIHRvIHVuY2FjaGVkIG9yCi0gKiB3cml0ZS1jb21iaW5lZCwKLSAq
IGFsbCBDUFUgY2FjaGVzIHdpbGwgZmlyc3QgYmUgZmx1c2hlZCB0byBtYWtlIHN1cmUgdGhlIGRh
dGEgb2YgdGhlIHBhZ2VzCi0gKiBoaXQgUkFNLiBUaGlzIGZ1bmN0aW9uIG1heSBiZSB2ZXJ5IGNv
c3RseSBhcyBpdCBpbnZvbHZlcyBnbG9iYWwgVExCCi0gKiBhbmQgY2FjaGUgZmx1c2hlcyBhbmQg
cG90ZW50aWFsIHBhZ2Ugc3BsaXR0aW5nIC8gY29tYmluaW5nLgotICovCi1pbnQgdHRtX3R0X3Nl
dF9wbGFjZW1lbnRfY2FjaGluZyhzdHJ1Y3QgdHRtX3R0ICp0dG0sIHVpbnQzMl90IHBsYWNlbWVu
dCk7CiBpbnQgdHRtX3R0X3N3YXBvdXQoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsIHN0cnVj
dCB0dG1fdHQgKnR0bSk7CiAKIC8qKgotLSAKMi4xNy4xCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZl
bEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
