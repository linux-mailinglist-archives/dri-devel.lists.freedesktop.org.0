Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EF0148E6CB
	for <lists+dri-devel@lfdr.de>; Thu, 15 Aug 2019 10:37:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A746D6E912;
	Thu, 15 Aug 2019 08:35:05 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from foss.arm.com (foss.arm.com [217.140.110.172])
 by gabe.freedesktop.org (Postfix) with ESMTP id 9C6356E48E
 for <dri-devel@lists.freedesktop.org>; Wed, 14 Aug 2019 09:38:57 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 310E3344;
 Wed, 14 Aug 2019 02:38:57 -0700 (PDT)
Received: from [10.1.196.133] (e112269-lin.cambridge.arm.com [10.1.196.133])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 2CB5F3F694;
 Wed, 14 Aug 2019 02:38:56 -0700 (PDT)
Subject: Re: [PATCH v2] drm/panfrost: Implement per FD address spaces
To: Rob Herring <robh@kernel.org>, dri-devel@lists.freedesktop.org
References: <20190813150115.30338-1-robh@kernel.org>
From: Steven Price <steven.price@arm.com>
Message-ID: <5fd66cb8-77ce-5603-7367-c4d5c3e66804@arm.com>
Date: Wed, 14 Aug 2019 10:38:54 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190813150115.30338-1-robh@kernel.org>
Content-Language: en-GB
X-Mailman-Approved-At: Thu, 15 Aug 2019 08:34:55 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, Robin Murphy <robin.murphy@arm.com>,
 Matthew Auld <matthew.william.auld@gmail.com>,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>,
 Tomeu Vizoso <tomeu.vizoso@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gMTMvMDgvMjAxOSAxNjowMSwgUm9iIEhlcnJpbmcgd3JvdGU6Cj4gVXAgdW50aWwgbm93LCBh
IHNpbmdsZSBzaGFyZWQgR1BVIGFkZHJlc3Mgc3BhY2Ugd2FzIHVzZWQuIFRoaXMgaXMgbm90Cj4g
aWRlYWwgYXMgdGhlcmUncyBubyBwcm90ZWN0aW9uIGJldHdlZW4gcHJvY2Vzc2VzIGFuZCBkb2Vz
bid0IHdvcmsgZm9yCj4gc3VwcG9ydGluZyB0aGUgc2FtZSBHUFUvQ1BVIFZBIGZlYXR1cmUuIE1v
c3QgaW1wb3J0YW50bHksIHRoaXMgd2lsbAo+IGhvcGVmdWxseSBtaXRpZ2F0ZSBBbHlzc2EncyBm
ZWFyIG9mIFdlYkdMLCB3aGF0ZXZlciB0aGF0IGlzLgo+IAo+IE1vc3Qgb2YgdGhlIGNoYW5nZXMg
aGVyZSBhcmUgbW92aW5nIHN0cnVjdCBkcm1fbW0gYW5kIHN0cnVjdAo+IHBhbmZyb3N0X21tdSBv
YmplY3RzIGZyb20gdGhlIHBlciBkZXZpY2Ugc3RydWN0IHRvIHRoZSBwZXIgRkQgc3RydWN0Lgo+
IFRoZSBjcml0aWNhbCBmdW5jdGlvbiBpcyBwYW5mcm9zdF9tbXVfYXNfZ2V0KCkgd2hpY2ggaGFu
ZGxlcyBhbGxvY2F0aW5nCj4gYW5kIHN3aXRjaGluZyB0aGUgaC93IGFkZHJlc3Mgc3BhY2VzLgo+
IAo+IFRoZXJlJ3MgMyBzdGF0ZXMgYW4gQVMgY2FuIGJlIGluOiBmcmVlLCBhbGxvY2F0ZWQsIGFu
ZCBpbiB1c2UuIFdoZW4gYQo+IGpvYiBydW5zLCBpdCByZXF1ZXN0cyBhbiBhZGRyZXNzIHNwYWNl
IGFuZCB0aGVuIG1hcmtzIGl0IG5vdCBpbiB1c2Ugd2hlbgo+IGpvYiBpcyBjb21wbGV0ZShidXQg
c3RheXMgYXNzaWduZWQpLiBUaGUgZmlyc3QgdGltZSB0aHJ1LCB3ZSBmaW5kIGEgZnJlZQo+IEFT
IGluIHRoZSBhbGxvY19tYXNrIGFuZCBhc3NpZ24gdGhlIEFTIHRvIHRoZSBGRC4gVGhlbiB0aGUg
bmV4dCB0aW1lCj4gdGhydSwgd2UgbW9zdCBsaWtlbHkgYWxyZWFkeSBoYXZlIG91ciBBUyBhbmQg
d2UganVzdCBtYXJrIGl0IGluIHVzZSB3aXRoCj4gYSByZWYgY291bnQuIFdlIG5lZWQgYSByZWYg
Y291bnQgYmVjYXVzZSB3ZSBoYXZlIG11bHRpcGxlIGpvYiBzbG90cy4gSWYKPiB0aGUgam9iL0ZE
IGRvZXNuJ3QgaGF2ZSBhbiBBUyBhc3NpZ25lZCBhbmQgdGhlcmUgYXJlIG5vIGZyZWUgb25lcywg
dGhlbgo+IHdlIHBpY2sgYW4gYWxsb2NhdGVkIG9uZSBub3QgaW4gdXNlIGZyb20gb3VyIExSVSBs
aXN0IGFuZCBzd2l0Y2ggdGhlIEFTCj4gZnJvbSB0aGUgb2xkIEZEIHRvIHRoZSBuZXcgb25lLgo+
IAo+IENjOiBUb21ldSBWaXpvc28gPHRvbWV1LnZpem9zb0Bjb2xsYWJvcmEuY29tPgo+IENjOiBE
YXZpZCBBaXJsaWUgPGFpcmxpZWRAbGludXguaWU+Cj4gQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmll
bEBmZndsbC5jaD4KPiBDYzogUm9iaW4gTXVycGh5IDxyb2Jpbi5tdXJwaHlAYXJtLmNvbT4KPiBD
YzogU3RldmVuIFByaWNlIDxzdGV2ZW4ucHJpY2VAYXJtLmNvbT4KPiBDYzogQWx5c3NhIFJvc2Vu
endlaWcgPGFseXNzYS5yb3Nlbnp3ZWlnQGNvbGxhYm9yYS5jb20+Cj4gU2lnbmVkLW9mZi1ieTog
Um9iIEhlcnJpbmcgPHJvYmhAa2VybmVsLm9yZz4KClJldmlld2VkLWJ5OiBTdGV2ZW4gUHJpY2Ug
PHN0ZXZlbi5wcmljZUBhcm0uY29tPgoKU3RldmUKCj4gLS0tCj4gdjI6Cj4gLSBGaXggYXNzaWdu
bWVudCBvZiBjb2xvcl9hZGp1c3QgcHRyCj4gLSBNb3ZlIGNsZWFyaW5nIG9mIGpvYiBhcnJheSBw
dHJzIHRvIElTUgo+IC0gQWRkIGxvY2tpbmcgYmV0d2VlbiBtbXVfaHdfZG9fb3BlcmF0aW9uKCkg
YW5kIHBhbmZyb3N0X21tdV9hc19nZXQoKQo+IC0gRHJvcCB1bm5lY2Vzc2FyeSBwYW5mcm9zdF9t
bXVfZW5hYmxlKCkgd2hlbiB3ZSBhbHJlYWR5IGFzc2lnbmVkIGFuIEFTCj4gLSBVc2UgYXNfbHJ1
X2xpc3QgaW5zdGVhZCBvZiBmaWxlIGxpc3QgdG8gaXRlcmF0ZSB0aHJ1IGFsbCBhY3RpdmUgQVNz
Cj4gLSBSZXdvcmsgdGhlIEFTIHJlc2V0IGhhbmRsaW5nCj4gCj4gIGRyaXZlcnMvZ3B1L2RybS9w
YW5mcm9zdC9UT0RPICAgICAgICAgICAgICB8ICAgNCAtCj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5m
cm9zdC9wYW5mcm9zdF9kZXZpY2UuYyB8ICAgMiArCj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9z
dC9wYW5mcm9zdF9kZXZpY2UuaCB8ICAyNCArKy0KPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0
L3BhbmZyb3N0X2Rydi5jICAgIHwgIDMxICsrLQo+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3Qv
cGFuZnJvc3RfZ2VtLmMgICAgfCAgMTUgKy0KPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3Bh
bmZyb3N0X2dlbS5oICAgIHwgICAzICsKPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZy
b3N0X2pvYi5jICAgIHwgIDE0ICstCj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9z
dF9tbXUuYyAgICB8IDIyMiArKysrKysrKysrKysrKystLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJt
L3BhbmZyb3N0L3BhbmZyb3N0X21tdS5oICAgIHwgICA4ICsKPiAgOSBmaWxlcyBjaGFuZ2VkLCAy
MzYgaW5zZXJ0aW9ucygrKSwgODcgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9wYW5mcm9zdC9UT0RPIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L1RPRE8K
PiBpbmRleCBlNzcyN2IyOTIzNTUuLjUzNmEwZDRmOGQyOSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vcGFuZnJvc3QvVE9ETwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9U
T0RPCj4gQEAgLTYsMTAgKzYsNiBAQAo+ICAgIC0gQmlmcm9zdCBzcGVjaWZpYyBmZWF0dXJlIGFu
ZCBpc3N1ZSBoYW5kbGluZwo+ICAgIC0gQ29oZXJlbnQgRE1BIHN1cHBvcnQKPiAgCj4gLS0gUGVy
IEZEIGFkZHJlc3Mgc3BhY2Ugc3VwcG9ydC4gVGhlIGgvdyBzdXBwb3J0cyBtdWx0aXBsZSBhZGRy
ZXNzZXMgc3BhY2VzLgo+IC0gIFRoZSBoYXJkIHBhcnQgaXMgaGFuZGxpbmcgd2hlbiBtb3JlIGFk
ZHJlc3Mgc3BhY2VzIGFyZSBuZWVkZWQgdGhhbiB3aGF0Cj4gLSAgdGhlIGgvdyBwcm92aWRlcy4K
PiAtCj4gIC0gU3VwcG9ydCB1c2Vyc3BhY2UgY29udHJvbGxlZCBHUFUgdmlydHVhbCBhZGRyZXNz
ZXMuIE5lZWRlZCBmb3IgVnVsa2FuLiAoVG9tZXUpCj4gIAo+ICAtIENvbXB1dGUgam9iIHN1cHBv
cnQuIFNvIGNhbGxlZCAnY29tcHV0ZSBvbmx5JyBqb2JzIG5lZWQgdG8gYmUgcGx1bWJlZCB1cCB0
bwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNl
LmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmMKPiBpbmRleCA5
ODE0ZjRjY2JkMjYuLjRkYTcxYmI1NmMyMCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
cGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJv
c3QvcGFuZnJvc3RfZGV2aWNlLmMKPiBAQCAtMTIzLDggKzEyMywxMCBAQCBpbnQgcGFuZnJvc3Rf
ZGV2aWNlX2luaXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCj4gIAltdXRleF9pbml0
KCZwZmRldi0+c2NoZWRfbG9jayk7Cj4gIAltdXRleF9pbml0KCZwZmRldi0+cmVzZXRfbG9jayk7
Cj4gIAlJTklUX0xJU1RfSEVBRCgmcGZkZXYtPnNjaGVkdWxlZF9qb2JzKTsKPiArCUlOSVRfTElT
VF9IRUFEKCZwZmRldi0+YXNfbHJ1X2xpc3QpOwo+ICAKPiAgCXNwaW5fbG9ja19pbml0KCZwZmRl
di0+aHdhY2Nlc3NfbG9jayk7Cj4gKwlzcGluX2xvY2tfaW5pdCgmcGZkZXYtPmFzX2xvY2spOwo+
ICAKPiAgCWVyciA9IHBhbmZyb3N0X2Nsa19pbml0KHBmZGV2KTsKPiAgCWlmIChlcnIpIHsKPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5oIGIv
ZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5oCj4gaW5kZXggNGU1NjQx
ZGI5YzdlLi5mNTAzYzU2NmU5OWYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZy
b3N0L3BhbmZyb3N0X2RldmljZS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3Bh
bmZyb3N0X2RldmljZS5oCj4gQEAgLTUsNiArNSw4IEBACj4gICNpZm5kZWYgX19QQU5GUk9TVF9E
RVZJQ0VfSF9fCj4gICNkZWZpbmUgX19QQU5GUk9TVF9ERVZJQ0VfSF9fCj4gIAo+ICsjaW5jbHVk
ZSA8bGludXgvYXRvbWljLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9pby1wZ3RhYmxlLmg+Cj4gICNp
bmNsdWRlIDxsaW51eC9zcGlubG9jay5oPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9kZXZpY2UuaD4K
PiAgI2luY2x1ZGUgPGRybS9kcm1fbW0uaD4KPiBAQCAtNjMsOSArNjUsNiBAQCBzdHJ1Y3QgcGFu
ZnJvc3RfZGV2aWNlIHsKPiAgCj4gIAlzcGlubG9ja190IGh3YWNjZXNzX2xvY2s7Cj4gIAo+IC0J
c3RydWN0IGRybV9tbSBtbTsKPiAtCXNwaW5sb2NrX3QgbW1fbG9jazsKPiAtCj4gIAl2b2lkIF9f
aW9tZW0gKmlvbWVtOwo+ICAJc3RydWN0IGNsayAqY2xvY2s7Cj4gIAlzdHJ1Y3QgY2xrICpidXNf
Y2xvY2s7Cj4gQEAgLTc0LDcgKzczLDExIEBAIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2Ugewo+ICAK
PiAgCXN0cnVjdCBwYW5mcm9zdF9mZWF0dXJlcyBmZWF0dXJlczsKPiAgCj4gLQlzdHJ1Y3QgcGFu
ZnJvc3RfbW11ICptbXU7Cj4gKwlzcGlubG9ja190IGFzX2xvY2s7Cj4gKwl1bnNpZ25lZCBsb25n
IGFzX2luX3VzZV9tYXNrOwo+ICsJdW5zaWduZWQgbG9uZyBhc19hbGxvY19tYXNrOwo+ICsJc3Ry
dWN0IGxpc3RfaGVhZCBhc19scnVfbGlzdDsKPiArCj4gIAlzdHJ1Y3QgcGFuZnJvc3Rfam9iX3Ns
b3QgKmpzOwo+ICAKPiAgCXN0cnVjdCBwYW5mcm9zdF9qb2IgKmpvYnNbTlVNX0pPQl9TTE9UU107
Cj4gQEAgLTk4LDEwICsxMDEsMjMgQEAgc3RydWN0IHBhbmZyb3N0X2RldmljZSB7Cj4gIAl9IGRl
dmZyZXE7Cj4gIH07Cj4gIAo+ICtzdHJ1Y3QgcGFuZnJvc3RfbW11IHsKPiArCXN0cnVjdCBpb19w
Z3RhYmxlX2NmZyBwZ3RibF9jZmc7Cj4gKwlzdHJ1Y3QgaW9fcGd0YWJsZV9vcHMgKnBndGJsX29w
czsKPiArCXN0cnVjdCBtdXRleCBsb2NrOwo+ICsJaW50IGFzOwo+ICsJYXRvbWljX3QgYXNfY291
bnQ7Cj4gKwlzdHJ1Y3QgbGlzdF9oZWFkIGxpc3Q7Cj4gK307Cj4gKwo+ICBzdHJ1Y3QgcGFuZnJv
c3RfZmlsZV9wcml2IHsKPiAgCXN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2Owo+ICAKPiAg
CXN0cnVjdCBkcm1fc2NoZWRfZW50aXR5IHNjaGVkX2VudGl0eVtOVU1fSk9CX1NMT1RTXTsKPiAr
Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfbW11IG1tdTsKPiArCXN0cnVjdCBkcm1fbW0gbW07Cj4gKwlz
cGlubG9ja190IG1tX2xvY2s7Cj4gIH07Cj4gIAo+ICBzdGF0aWMgaW5saW5lIHN0cnVjdCBwYW5m
cm9zdF9kZXZpY2UgKnRvX3BhbmZyb3N0X2RldmljZShzdHJ1Y3QgZHJtX2RldmljZSAqZGRldikK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jIGIv
ZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jCj4gaW5kZXggYTEzNTI3NTA5
ODRjLi5mYzIyZjdjYTExMDcgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0
L3BhbmZyb3N0X2Rydi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0
X2Rydi5jCj4gQEAgLTQwMyw2ICs0MDMsNyBAQCBzdGF0aWMgdm9pZCBwYW5mcm9zdF9kcm1fbW1f
Y29sb3JfYWRqdXN0KGNvbnN0IHN0cnVjdCBkcm1fbW1fbm9kZSAqbm9kZSwKPiAgc3RhdGljIGlu
dAo+ICBwYW5mcm9zdF9vcGVuKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fZmls
ZSAqZmlsZSkKPiAgewo+ICsJaW50IHJldDsKPiAgCXN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBm
ZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKPiAgCXN0cnVjdCBwYW5mcm9zdF9maWxlX3ByaXYgKnBh
bmZyb3N0X3ByaXY7Cj4gIAo+IEBAIC00MTMsNyArNDE0LDI4IEBAIHBhbmZyb3N0X29wZW4oc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRybV9maWxlICpmaWxlKQo+ICAJcGFuZnJvc3Rf
cHJpdi0+cGZkZXYgPSBwZmRldjsKPiAgCWZpbGUtPmRyaXZlcl9wcml2ID0gcGFuZnJvc3RfcHJp
djsKPiAgCj4gLQlyZXR1cm4gcGFuZnJvc3Rfam9iX29wZW4ocGFuZnJvc3RfcHJpdik7Cj4gKwlz
cGluX2xvY2tfaW5pdCgmcGFuZnJvc3RfcHJpdi0+bW1fbG9jayk7Cj4gKwo+ICsJLyogNEcgZW5v
dWdoIGZvciBub3cuIGNhbiBiZSA0OC1iaXQgKi8KPiArCWRybV9tbV9pbml0KCZwYW5mcm9zdF9w
cml2LT5tbSwgU1pfMzJNID4+IFBBR0VfU0hJRlQsIChTWl80RyAtIFNaXzMyTSkgPj4gUEFHRV9T
SElGVCk7Cj4gKwlwYW5mcm9zdF9wcml2LT5tbS5jb2xvcl9hZGp1c3QgPSBwYW5mcm9zdF9kcm1f
bW1fY29sb3JfYWRqdXN0Owo+ICsKPiArCXJldCA9IHBhbmZyb3N0X21tdV9wZ3RhYmxlX2FsbG9j
KHBhbmZyb3N0X3ByaXYpOwo+ICsJaWYgKHJldCkKPiArCQlnb3RvIGVycl9wZ3RhYmxlOwo+ICsK
PiArCXJldCA9IHBhbmZyb3N0X2pvYl9vcGVuKHBhbmZyb3N0X3ByaXYpOwo+ICsJaWYgKHJldCkK
PiArCQlnb3RvIGVycl9qb2I7Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gKwo+ICtlcnJfam9iOgo+ICsJ
cGFuZnJvc3RfbW11X3BndGFibGVfZnJlZShwYW5mcm9zdF9wcml2KTsKPiArZXJyX3BndGFibGU6
Cj4gKwlkcm1fbW1fdGFrZWRvd24oJnBhbmZyb3N0X3ByaXYtPm1tKTsKPiArCWtmcmVlKHBhbmZy
b3N0X3ByaXYpOwo+ICsJcmV0dXJuIHJldDsKPiAgfQo+ICAKPiAgc3RhdGljIHZvaWQKPiBAQCAt
NDI0LDYgKzQ0Niw4IEBAIHBhbmZyb3N0X3Bvc3RjbG9zZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCj4gIAlwYW5mcm9zdF9wZXJmY250X2Nsb3NlKHBhbmZy
b3N0X3ByaXYpOwo+ICAJcGFuZnJvc3Rfam9iX2Nsb3NlKHBhbmZyb3N0X3ByaXYpOwo+ICAKPiAr
CXBhbmZyb3N0X21tdV9wZ3RhYmxlX2ZyZWUocGFuZnJvc3RfcHJpdik7Cj4gKwlkcm1fbW1fdGFr
ZWRvd24oJnBhbmZyb3N0X3ByaXYtPm1tKTsKPiAgCWtmcmVlKHBhbmZyb3N0X3ByaXYpOwo+ICB9
Cj4gIAo+IEBAIC00OTYsMTQgKzUyMCw5IEBAIHN0YXRpYyBpbnQgcGFuZnJvc3RfcHJvYmUoc3Ry
dWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKPiAgCWRkZXYtPmRldl9wcml2YXRlID0gcGZkZXY7
Cj4gIAlwZmRldi0+ZGRldiA9IGRkZXY7Cj4gIAo+IC0Jc3Bpbl9sb2NrX2luaXQoJnBmZGV2LT5t
bV9sb2NrKTsKPiAgCW11dGV4X2luaXQoJnBmZGV2LT5zaHJpbmtlcl9sb2NrKTsKPiAgCUlOSVRf
TElTVF9IRUFEKCZwZmRldi0+c2hyaW5rZXJfbGlzdCk7Cj4gIAo+IC0JLyogNEcgZW5vdWdoIGZv
ciBub3cuIGNhbiBiZSA0OC1iaXQgKi8KPiAtCWRybV9tbV9pbml0KCZwZmRldi0+bW0sIFNaXzMy
TSA+PiBQQUdFX1NISUZULCAoU1pfNEcgLSBTWl8zMk0pID4+IFBBR0VfU0hJRlQpOwo+IC0JcGZk
ZXYtPm1tLmNvbG9yX2FkanVzdCA9IHBhbmZyb3N0X2RybV9tbV9jb2xvcl9hZGp1c3Q7Cj4gLQo+
ICAJcG1fcnVudGltZV91c2VfYXV0b3N1c3BlbmQocGZkZXYtPmRldik7Cj4gIAlwbV9ydW50aW1l
X3NldF9hdXRvc3VzcGVuZF9kZWxheShwZmRldi0+ZGV2LCA1MCk7IC8qIH4zIGZyYW1lcyAqLwo+
ICAJcG1fcnVudGltZV9lbmFibGUocGZkZXYtPmRldik7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9z
dC9wYW5mcm9zdF9nZW0uYwo+IGluZGV4IGU3MWYyN2M0MDQxZS4uZTA4NGJjNGU5MDgzIDEwMDY0
NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uYwo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uYwo+IEBAIC00Nyw4ICs0Nyw4
IEBAIHN0YXRpYyBpbnQgcGFuZnJvc3RfZ2VtX29wZW4oc3RydWN0IGRybV9nZW1fb2JqZWN0ICpv
YmosIHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wCj4gIAlzaXplX3Qgc2l6ZSA9IG9iai0+c2l6ZTsK
PiAgCXU2NCBhbGlnbjsKPiAgCXN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0ICpibyA9IHRvX3Bh
bmZyb3N0X2JvKG9iaik7Cj4gLQlzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiA9IG9iai0+
ZGV2LT5kZXZfcHJpdmF0ZTsKPiAgCXVuc2lnbmVkIGxvbmcgY29sb3IgPSBiby0+bm9leGVjID8g
UEFORlJPU1RfQk9fTk9FWEVDIDogMDsKPiArCXN0cnVjdCBwYW5mcm9zdF9maWxlX3ByaXYgKnBy
aXYgPSBmaWxlX3ByaXYtPmRyaXZlcl9wcml2Owo+ICAKPiAgCS8qCj4gIAkgKiBFeGVjdXRhYmxl
IGJ1ZmZlcnMgY2Fubm90IGNyb3NzIGEgMTZNQiBib3VuZGFyeSBhcyB0aGUgcHJvZ3JhbQo+IEBA
IC02MSw4ICs2MSw5IEBAIHN0YXRpYyBpbnQgcGFuZnJvc3RfZ2VtX29wZW4oc3RydWN0IGRybV9n
ZW1fb2JqZWN0ICpvYmosIHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wCj4gIAllbHNlCj4gIAkJYWxp
Z24gPSBzaXplID49IFNaXzJNID8gU1pfMk0gPj4gUEFHRV9TSElGVCA6IDA7Cj4gIAo+IC0Jc3Bp
bl9sb2NrKCZwZmRldi0+bW1fbG9jayk7Cj4gLQlyZXQgPSBkcm1fbW1faW5zZXJ0X25vZGVfZ2Vu
ZXJpYygmcGZkZXYtPm1tLCAmYm8tPm5vZGUsCj4gKwliby0+bW11ID0gJnByaXYtPm1tdTsKPiAr
CXNwaW5fbG9jaygmcHJpdi0+bW1fbG9jayk7Cj4gKwlyZXQgPSBkcm1fbW1faW5zZXJ0X25vZGVf
Z2VuZXJpYygmcHJpdi0+bW0sICZiby0+bm9kZSwKPiAgCQkJCQkgc2l6ZSA+PiBQQUdFX1NISUZU
LCBhbGlnbiwgY29sb3IsIDApOwo+ICAJaWYgKHJldCkKPiAgCQlnb3RvIG91dDsKPiBAQCAtNzMs
MjIgKzc0LDIyIEBAIHN0YXRpYyBpbnQgcGFuZnJvc3RfZ2VtX29wZW4oc3RydWN0IGRybV9nZW1f
b2JqZWN0ICpvYmosIHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wCj4gIAkJCWRybV9tbV9yZW1vdmVf
bm9kZSgmYm8tPm5vZGUpOwo+ICAJfQo+ICBvdXQ6Cj4gLQlzcGluX3VubG9jaygmcGZkZXYtPm1t
X2xvY2spOwo+ICsJc3Bpbl91bmxvY2soJnByaXYtPm1tX2xvY2spOwo+ICAJcmV0dXJuIHJldDsK
PiAgfQo+ICAKPiAgc3RhdGljIHZvaWQgcGFuZnJvc3RfZ2VtX2Nsb3NlKHN0cnVjdCBkcm1fZ2Vt
X29iamVjdCAqb2JqLCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdikKPiAgewo+ICAJc3RydWN0
IHBhbmZyb3N0X2dlbV9vYmplY3QgKmJvID0gdG9fcGFuZnJvc3RfYm8ob2JqKTsKPiAtCXN0cnVj
dCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gb2JqLT5kZXYtPmRldl9wcml2YXRlOwo+ICsJc3Ry
dWN0IHBhbmZyb3N0X2ZpbGVfcHJpdiAqcHJpdiA9IGZpbGVfcHJpdi0+ZHJpdmVyX3ByaXY7Cj4g
IAo+ICAJaWYgKGJvLT5pc19tYXBwZWQpCj4gIAkJcGFuZnJvc3RfbW11X3VubWFwKGJvKTsKPiAg
Cj4gLQlzcGluX2xvY2soJnBmZGV2LT5tbV9sb2NrKTsKPiArCXNwaW5fbG9jaygmcHJpdi0+bW1f
bG9jayk7Cj4gIAlpZiAoZHJtX21tX25vZGVfYWxsb2NhdGVkKCZiby0+bm9kZSkpCj4gIAkJZHJt
X21tX3JlbW92ZV9ub2RlKCZiby0+bm9kZSk7Cj4gLQlzcGluX3VubG9jaygmcGZkZXYtPm1tX2xv
Y2spOwo+ICsJc3Bpbl91bmxvY2soJnByaXYtPm1tX2xvY2spOwo+ICB9Cj4gIAo+ICBzdGF0aWMg
aW50IHBhbmZyb3N0X2dlbV9waW4oc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaCBiL2RyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaAo+IGluZGV4IGUxMGY1ODMxNjkxNS4uNTA5
MjA4MTljYzE2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9z
dF9nZW0uaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaAo+
IEBAIC03LDEwICs3LDEzIEBACj4gICNpbmNsdWRlIDxkcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIu
aD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fbW0uaD4KPiAgCj4gK3N0cnVjdCBwYW5mcm9zdF9tbXU7
Cj4gKwo+ICBzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCB7Cj4gIAlzdHJ1Y3QgZHJtX2dlbV9z
aG1lbV9vYmplY3QgYmFzZTsKPiAgCXN0cnVjdCBzZ190YWJsZSAqc2d0czsKPiAgCj4gKwlzdHJ1
Y3QgcGFuZnJvc3RfbW11ICptbXU7Cj4gIAlzdHJ1Y3QgZHJtX21tX25vZGUgbm9kZTsKPiAgCWJv
b2wgaXNfbWFwcGVkCQk6MTsKPiAgCWJvb2wgbm9leGVjCQk6MTsKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4gaW5kZXggZDU2N2NlOTg0OTRjLi5jY2ZhYzBlNWJkZDAg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4gQEAgLTE1Myw2
ICsxNTMsOCBAQCBzdGF0aWMgdm9pZCBwYW5mcm9zdF9qb2JfaHdfc3VibWl0KHN0cnVjdCBwYW5m
cm9zdF9qb2IgKmpvYiwgaW50IGpzKQo+ICAJaWYgKFdBUk5fT04oam9iX3JlYWQocGZkZXYsIEpT
X0NPTU1BTkRfTkVYVChqcykpKSkKPiAgCQlnb3RvIGVuZDsKPiAgCj4gKwljZmcgPSBwYW5mcm9z
dF9tbXVfYXNfZ2V0KHBmZGV2LCAmam9iLT5maWxlX3ByaXYtPm1tdSk7Cj4gKwo+ICAJcGFuZnJv
c3RfZGV2ZnJlcV9yZWNvcmRfdHJhbnNpdGlvbihwZmRldiwganMpOwo+ICAJc3Bpbl9sb2NrX2ly
cXNhdmUoJnBmZGV2LT5od2FjY2Vzc19sb2NrLCBmbGFncyk7Cj4gIAo+IEBAIC0xNjMsOCArMTY1
LDcgQEAgc3RhdGljIHZvaWQgcGFuZnJvc3Rfam9iX2h3X3N1Ym1pdChzdHJ1Y3QgcGFuZnJvc3Rf
am9iICpqb2IsIGludCBqcykKPiAgCj4gIAkvKiBzdGFydCBNTVUsIG1lZGl1bSBwcmlvcml0eSwg
Y2FjaGUgY2xlYW4vZmx1c2ggb24gZW5kLCBjbGVhbi9mbHVzaCBvbgo+ICAJICogc3RhcnQgKi8K
PiAtCS8qIFRPRE86IGRpZmZlcmVudCBhZGRyZXNzIHNwYWNlcyAqLwo+IC0JY2ZnID0gSlNfQ09O
RklHX1RIUkVBRF9QUkkoOCkgfAo+ICsJY2ZnIHw9IEpTX0NPTkZJR19USFJFQURfUFJJKDgpIHwK
PiAgCQlKU19DT05GSUdfU1RBUlRfRkxVU0hfQ0xFQU5fSU5WQUxJREFURSB8Cj4gIAkJSlNfQ09O
RklHX0VORF9GTFVTSF9DTEVBTl9JTlZBTElEQVRFOwo+ICAKPiBAQCAtMzc3LDggKzM3OCw5IEBA
IHN0YXRpYyB2b2lkIHBhbmZyb3N0X2pvYl90aW1lZG91dChzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAq
c2NoZWRfam9iKQo+ICAJaWYgKGRtYV9mZW5jZV9pc19zaWduYWxlZChqb2ItPmRvbmVfZmVuY2Up
KQo+ICAJCXJldHVybjsKPiAgCj4gLQlkZXZfZXJyKHBmZGV2LT5kZXYsICJncHUgc2NoZWQgdGlt
ZW91dCwganM9JWQsIHN0YXR1cz0weCV4LCBoZWFkPTB4JXgsIHRhaWw9MHgleCwgc2NoZWRfam9i
PSVwIiwKPiArCWRldl9lcnIocGZkZXYtPmRldiwgImdwdSBzY2hlZCB0aW1lb3V0LCBqcz0lZCwg
Y29uZmlnPTB4JXgsIHN0YXR1cz0weCV4LCBoZWFkPTB4JXgsIHRhaWw9MHgleCwgc2NoZWRfam9i
PSVwIiwKPiAgCQlqcywKPiArCQlqb2JfcmVhZChwZmRldiwgSlNfQ09ORklHKGpzKSksCj4gIAkJ
am9iX3JlYWQocGZkZXYsIEpTX1NUQVRVUyhqcykpLAo+ICAJCWpvYl9yZWFkKHBmZGV2LCBKU19I
RUFEX0xPKGpzKSksCj4gIAkJam9iX3JlYWQocGZkZXYsIEpTX1RBSUxfTE8oanMpKSwKPiBAQCAt
NDQ4LDggKzQ1MCwxMiBAQCBzdGF0aWMgaXJxcmV0dXJuX3QgcGFuZnJvc3Rfam9iX2lycV9oYW5k
bGVyKGludCBpcnEsIHZvaWQgKmRhdGEpCj4gIAkJfQo+ICAKPiAgCQlpZiAoc3RhdHVzICYgSk9C
X0lOVF9NQVNLX0RPTkUoaikpIHsKPiArCQkJc3RydWN0IHBhbmZyb3N0X2pvYiAqam9iID0gcGZk
ZXYtPmpvYnNbal07Cj4gKwo+ICsJCQlwZmRldi0+am9ic1tqXSA9IE5VTEw7Cj4gKwkJCXBhbmZy
b3N0X21tdV9hc19wdXQocGZkZXYsICZqb2ItPmZpbGVfcHJpdi0+bW11KTsKPiAgCQkJcGFuZnJv
c3RfZGV2ZnJlcV9yZWNvcmRfdHJhbnNpdGlvbihwZmRldiwgaik7Cj4gLQkJCWRtYV9mZW5jZV9z
aWduYWwocGZkZXYtPmpvYnNbal0tPmRvbmVfZmVuY2UpOwo+ICsJCQlkbWFfZmVuY2Vfc2lnbmFs
KGpvYi0+ZG9uZV9mZW5jZSk7Cj4gIAkJfQo+ICAKPiAgCQlzdGF0dXMgJj0gfm1hc2s7Cj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9tbXUuYyBiL2RyaXZl
cnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9tbXUuYwo+IGluZGV4IDJlZDQxMWYwOWQ4MC4u
ZjIyZDhmMDI1NjhkIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5m
cm9zdF9tbXUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9tbXUu
Ywo+IEBAIC0xLDUgKzEsNiBAQAo+ICAvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjoJR1BMLTIu
MAo+ICAvKiBDb3B5cmlnaHQgMjAxOSBMaW5hcm8sIEx0ZCwgUm9iIEhlcnJpbmcgPHJvYmhAa2Vy
bmVsLm9yZz4gKi8KPiArI2luY2x1ZGUgPGxpbnV4L2F0b21pYy5oPgo+ICAjaW5jbHVkZSA8bGlu
dXgvYml0ZmllbGQuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L2RlbGF5Lmg+Cj4gICNpbmNsdWRlIDxs
aW51eC9kbWEtbWFwcGluZy5oPgo+IEBAIC0yMiwxMiArMjMsNiBAQAo+ICAjZGVmaW5lIG1tdV93
cml0ZShkZXYsIHJlZywgZGF0YSkgd3JpdGVsKGRhdGEsIGRldi0+aW9tZW0gKyByZWcpCj4gICNk
ZWZpbmUgbW11X3JlYWQoZGV2LCByZWcpIHJlYWRsKGRldi0+aW9tZW0gKyByZWcpCj4gIAo+IC1z
dHJ1Y3QgcGFuZnJvc3RfbW11IHsKPiAtCXN0cnVjdCBpb19wZ3RhYmxlX2NmZyBwZ3RibF9jZmc7
Cj4gLQlzdHJ1Y3QgaW9fcGd0YWJsZV9vcHMgKnBndGJsX29wczsKPiAtCXN0cnVjdCBtdXRleCBs
b2NrOwo+IC19Owo+IC0KPiAgc3RhdGljIGludCB3YWl0X3JlYWR5KHN0cnVjdCBwYW5mcm9zdF9k
ZXZpY2UgKnBmZGV2LCB1MzIgYXNfbnIpCj4gIHsKPiAgCWludCByZXQ7Cj4gQEAgLTg1LDEzICs4
MCwxOSBAQCBzdGF0aWMgdm9pZCBsb2NrX3JlZ2lvbihzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpw
ZmRldiwgdTMyIGFzX25yLAo+ICB9Cj4gIAo+ICAKPiAtc3RhdGljIGludCBtbXVfaHdfZG9fb3Bl
cmF0aW9uKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LCB1MzIgYXNfbnIsCj4gLQkJdTY0
IGlvdmEsIHNpemVfdCBzaXplLCB1MzIgb3ApCj4gK3N0YXRpYyBpbnQgbW11X2h3X2RvX29wZXJh
dGlvbihzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwKPiArCQkJICAgICAgIHN0cnVjdCBw
YW5mcm9zdF9tbXUgKm1tdSwKPiArCQkJICAgICAgIHU2NCBpb3ZhLCBzaXplX3Qgc2l6ZSwgdTMy
IG9wKQo+ICB7Cj4gLQl1bnNpZ25lZCBsb25nIGZsYWdzOwo+IC0JaW50IHJldDsKPiArCWludCBy
ZXQsIGFzX25yOwo+ICAKPiAtCXNwaW5fbG9ja19pcnFzYXZlKCZwZmRldi0+aHdhY2Nlc3NfbG9j
aywgZmxhZ3MpOwo+ICsJc3Bpbl9sb2NrKCZwZmRldi0+YXNfbG9jayk7Cj4gKwlhc19uciA9IG1t
dS0+YXM7Cj4gKwo+ICsJaWYgKGFzX25yIDwgMCkgewo+ICsJCXNwaW5fdW5sb2NrKCZwZmRldi0+
YXNfbG9jayk7Cj4gKwkJcmV0dXJuIDA7Cj4gKwl9Cj4gIAo+ICAJaWYgKG9wICE9IEFTX0NPTU1B
TkRfVU5MT0NLKQo+ICAJCWxvY2tfcmVnaW9uKHBmZGV2LCBhc19uciwgaW92YSwgc2l6ZSk7Cj4g
QEAgLTEwMiwxNCArMTAzLDE1IEBAIHN0YXRpYyBpbnQgbW11X2h3X2RvX29wZXJhdGlvbihzdHJ1
Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwgdTMyIGFzX25yLAo+ICAJLyogV2FpdCBmb3IgdGhl
IGZsdXNoIHRvIGNvbXBsZXRlICovCj4gIAlyZXQgPSB3YWl0X3JlYWR5KHBmZGV2LCBhc19ucik7
Cj4gIAo+IC0Jc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmcGZkZXYtPmh3YWNjZXNzX2xvY2ssIGZs
YWdzKTsKPiArCXNwaW5fdW5sb2NrKCZwZmRldi0+YXNfbG9jayk7Cj4gIAo+ICAJcmV0dXJuIHJl
dDsKPiAgfQo+ICAKPiAtc3RhdGljIHZvaWQgcGFuZnJvc3RfbW11X2VuYWJsZShzdHJ1Y3QgcGFu
ZnJvc3RfZGV2aWNlICpwZmRldiwgdTMyIGFzX25yKQo+ICtzdGF0aWMgdm9pZCBwYW5mcm9zdF9t
bXVfZW5hYmxlKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LCBzdHJ1Y3QgcGFuZnJvc3Rf
bW11ICptbXUpCj4gIHsKPiAtCXN0cnVjdCBpb19wZ3RhYmxlX2NmZyAqY2ZnID0gJnBmZGV2LT5t
bXUtPnBndGJsX2NmZzsKPiArCWludCBhc19uciA9IG1tdS0+YXM7Cj4gKwlzdHJ1Y3QgaW9fcGd0
YWJsZV9jZmcgKmNmZyA9ICZtbXUtPnBndGJsX2NmZzsKPiAgCXU2NCB0cmFuc3RhYiA9IGNmZy0+
YXJtX21hbGlfbHBhZV9jZmcudHJhbnN0YWI7Cj4gIAl1NjQgbWVtYXR0ciA9IGNmZy0+YXJtX21h
bGlfbHBhZV9jZmcubWVtYXR0cjsKPiAgCj4gQEAgLTEzNiw5ICsxMzgsNzUgQEAgc3RhdGljIHZv
aWQgbW11X2Rpc2FibGUoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIHUzMiBhc19ucikK
PiAgCXdyaXRlX2NtZChwZmRldiwgYXNfbnIsIEFTX0NPTU1BTkRfVVBEQVRFKTsKPiAgfQo+ICAK
PiArdTMyIHBhbmZyb3N0X21tdV9hc19nZXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYs
IHN0cnVjdCBwYW5mcm9zdF9tbXUgKm1tdSkKPiArewo+ICsJaW50IGFzOwo+ICsKPiArCXNwaW5f
bG9jaygmcGZkZXYtPmFzX2xvY2spOwo+ICsKPiArCWFzID0gbW11LT5hczsKPiArCWlmIChhcyA+
PSAwKSB7Cj4gKwkJaW50IGVuID0gYXRvbWljX2luY19yZXR1cm4oJm1tdS0+YXNfY291bnQpOwo+
ICsJCVdBUk5fT04oZW4gPj0gTlVNX0pPQl9TTE9UUyk7Cj4gKwo+ICsJCWxpc3RfbW92ZSgmbW11
LT5saXN0LCAmcGZkZXYtPmFzX2xydV9saXN0KTsKPiArCQlnb3RvIG91dDsKPiArCX0KPiArCj4g
KwkvKiBDaGVjayBmb3IgYSBmcmVlIEFTICovCj4gKwlhcyA9IGZmeihwZmRldi0+YXNfYWxsb2Nf
bWFzayk7Cj4gKwlpZiAoIShCSVQoYXMpICYgcGZkZXYtPmZlYXR1cmVzLmFzX3ByZXNlbnQpKSB7
Cj4gKwkJc3RydWN0IHBhbmZyb3N0X21tdSAqbHJ1X21tdTsKPiArCj4gKwkJbGlzdF9mb3JfZWFj
aF9lbnRyeV9yZXZlcnNlKGxydV9tbXUsICZwZmRldi0+YXNfbHJ1X2xpc3QsIGxpc3QpIHsKPiAr
CQkJaWYgKCFhdG9taWNfcmVhZCgmbHJ1X21tdS0+YXNfY291bnQpKQo+ICsJCQkJYnJlYWs7Cj4g
KwkJfQo+ICsJCVdBUk5fT04oJmxydV9tbXUtPmxpc3QgPT0gJnBmZGV2LT5hc19scnVfbGlzdCk7
Cj4gKwo+ICsJCWxpc3RfZGVsX2luaXQoJmxydV9tbXUtPmxpc3QpOwo+ICsJCWFzID0gbHJ1X21t
dS0+YXM7Cj4gKwo+ICsJCVdBUk5fT04oYXMgPCAwKTsKPiArCQlscnVfbW11LT5hcyA9IC0xOwo+
ICsJfQo+ICsKPiArCS8qIEFzc2lnbiB0aGUgZnJlZSBvciByZWNsYWltZWQgQVMgdG8gdGhlIEZE
ICovCj4gKwltbXUtPmFzID0gYXM7Cj4gKwlzZXRfYml0KGFzLCAmcGZkZXYtPmFzX2FsbG9jX21h
c2spOwo+ICsJYXRvbWljX3NldCgmbW11LT5hc19jb3VudCwgMSk7Cj4gKwlsaXN0X2FkZCgmbW11
LT5saXN0LCAmcGZkZXYtPmFzX2xydV9saXN0KTsKPiArCj4gKwlkZXZfZGJnKHBmZGV2LT5kZXYs
ICJBc3NpZ25lZCBBUyVkIHRvIG1tdSAlcCwgYWxsb2NfbWFzaz0lbHgiLCBhcywgbW11LCBwZmRl
di0+YXNfYWxsb2NfbWFzayk7Cj4gKwo+ICsJcGFuZnJvc3RfbW11X2VuYWJsZShwZmRldiwgbW11
KTsKPiArCj4gK291dDoKPiArCXNwaW5fdW5sb2NrKCZwZmRldi0+YXNfbG9jayk7Cj4gKwlyZXR1
cm4gYXM7Cj4gK30KPiArCj4gK3ZvaWQgcGFuZnJvc3RfbW11X2FzX3B1dChzdHJ1Y3QgcGFuZnJv
c3RfZGV2aWNlICpwZmRldiwgc3RydWN0IHBhbmZyb3N0X21tdSAqbW11KQo+ICt7Cj4gKwlhdG9t
aWNfZGVjKCZtbXUtPmFzX2NvdW50KTsKPiArCVdBUk5fT04oYXRvbWljX3JlYWQoJm1tdS0+YXNf
Y291bnQpIDwgMCk7Cj4gK30KPiArCj4gIHZvaWQgcGFuZnJvc3RfbW11X3Jlc2V0KHN0cnVjdCBw
YW5mcm9zdF9kZXZpY2UgKnBmZGV2KQo+ICB7Cj4gLQlwYW5mcm9zdF9tbXVfZW5hYmxlKHBmZGV2
LCAwKTsKPiArCXN0cnVjdCBwYW5mcm9zdF9tbXUgKm1tdSwgKm1tdV90bXA7Cj4gKwo+ICsJc3Bp
bl9sb2NrKCZwZmRldi0+YXNfbG9jayk7Cj4gKwo+ICsJcGZkZXYtPmFzX2FsbG9jX21hc2sgPSAw
Owo+ICsKPiArCWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShtbXUsIG1tdV90bXAsICZwZmRldi0+
YXNfbHJ1X2xpc3QsIGxpc3QpIHsKPiArCQltbXUtPmFzID0gLTE7Cj4gKwkJYXRvbWljX3NldCgm
bW11LT5hc19jb3VudCwgMCk7Cj4gKwkJbGlzdF9kZWxfaW5pdCgmbW11LT5saXN0KTsKPiArCX0K
PiArCj4gKwlzcGluX3VubG9jaygmcGZkZXYtPmFzX2xvY2spOwo+ICAKPiAgCW1tdV93cml0ZShw
ZmRldiwgTU1VX0lOVF9DTEVBUiwgfjApOwo+ICAJbW11X3dyaXRlKHBmZGV2LCBNTVVfSU5UX01B
U0ssIH4wKTsKPiBAQCAtMTUyLDIxICsyMjAsMjEgQEAgc3RhdGljIHNpemVfdCBnZXRfcGdzaXpl
KHU2NCBhZGRyLCBzaXplX3Qgc2l6ZSkKPiAgCXJldHVybiBTWl8yTTsKPiAgfQo+ICAKPiAtc3Rh
dGljIGludCBtbXVfbWFwX3NnKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LCB1NjQgaW92
YSwKPiAtCQkgICAgICBpbnQgcHJvdCwgc3RydWN0IHNnX3RhYmxlICpzZ3QpCj4gK3N0YXRpYyBp
bnQgbW11X21hcF9zZyhzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwgc3RydWN0IHBhbmZy
b3N0X21tdSAqbW11LAo+ICsJCSAgICAgIHU2NCBpb3ZhLCBpbnQgcHJvdCwgc3RydWN0IHNnX3Rh
YmxlICpzZ3QpCj4gIHsKPiAgCXVuc2lnbmVkIGludCBjb3VudDsKPiAgCXN0cnVjdCBzY2F0dGVy
bGlzdCAqc2dsOwo+IC0Jc3RydWN0IGlvX3BndGFibGVfb3BzICpvcHMgPSBwZmRldi0+bW11LT5w
Z3RibF9vcHM7Cj4gKwlzdHJ1Y3QgaW9fcGd0YWJsZV9vcHMgKm9wcyA9IG1tdS0+cGd0Ymxfb3Bz
Owo+ICAJdTY0IHN0YXJ0X2lvdmEgPSBpb3ZhOwo+ICAKPiAtCW11dGV4X2xvY2soJnBmZGV2LT5t
bXUtPmxvY2spOwo+ICsJbXV0ZXhfbG9jaygmbW11LT5sb2NrKTsKPiAgCj4gIAlmb3JfZWFjaF9z
ZyhzZ3QtPnNnbCwgc2dsLCBzZ3QtPm5lbnRzLCBjb3VudCkgewo+ICAJCXVuc2lnbmVkIGxvbmcg
cGFkZHIgPSBzZ19kbWFfYWRkcmVzcyhzZ2wpOwo+ICAJCXNpemVfdCBsZW4gPSBzZ19kbWFfbGVu
KHNnbCk7Cj4gIAo+IC0JCWRldl9kYmcocGZkZXYtPmRldiwgIm1hcDogaW92YT0lbGx4LCBwYWRk
cj0lbHgsIGxlbj0lengiLCBpb3ZhLCBwYWRkciwgbGVuKTsKPiArCQlkZXZfZGJnKHBmZGV2LT5k
ZXYsICJtYXA6IGFzPSVkLCBpb3ZhPSVsbHgsIHBhZGRyPSVseCwgbGVuPSV6eCIsIG1tdS0+YXMs
IGlvdmEsIHBhZGRyLCBsZW4pOwo+ICAKPiAgCQl3aGlsZSAobGVuKSB7Cj4gIAkJCXNpemVfdCBw
Z3NpemUgPSBnZXRfcGdzaXplKGlvdmEgfCBwYWRkciwgbGVuKTsKPiBAQCAtMTc4LDEwICsyNDYs
MTAgQEAgc3RhdGljIGludCBtbXVfbWFwX3NnKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2
LCB1NjQgaW92YSwKPiAgCQl9Cj4gIAl9Cj4gIAo+IC0JbW11X2h3X2RvX29wZXJhdGlvbihwZmRl
diwgMCwgc3RhcnRfaW92YSwgaW92YSAtIHN0YXJ0X2lvdmEsCj4gKwltbXVfaHdfZG9fb3BlcmF0
aW9uKHBmZGV2LCBtbXUsIHN0YXJ0X2lvdmEsIGlvdmEgLSBzdGFydF9pb3ZhLAo+ICAJCQkgICAg
QVNfQ09NTUFORF9GTFVTSF9QVCk7Cj4gIAo+IC0JbXV0ZXhfdW5sb2NrKCZwZmRldi0+bW11LT5s
b2NrKTsKPiArCW11dGV4X3VubG9jaygmbW11LT5sb2NrKTsKPiAgCj4gIAlyZXR1cm4gMDsKPiAg
fQo+IEBAIC0yMDgsNyArMjc2LDcgQEAgaW50IHBhbmZyb3N0X21tdV9tYXAoc3RydWN0IHBhbmZy
b3N0X2dlbV9vYmplY3QgKmJvKQo+ICAJaWYgKHJldCA8IDApCj4gIAkJcmV0dXJuIHJldDsKPiAg
Cj4gLQltbXVfbWFwX3NnKHBmZGV2LCBiby0+bm9kZS5zdGFydCA8PCBQQUdFX1NISUZULCBwcm90
LCBzZ3QpOwo+ICsJbW11X21hcF9zZyhwZmRldiwgYm8tPm1tdSwgYm8tPm5vZGUuc3RhcnQgPDwg
UEFHRV9TSElGVCwgcHJvdCwgc2d0KTsKPiAgCj4gIAlwbV9ydW50aW1lX21hcmtfbGFzdF9idXN5
KHBmZGV2LT5kZXYpOwo+ICAJcG1fcnVudGltZV9wdXRfYXV0b3N1c3BlbmQocGZkZXYtPmRldik7
Cj4gQEAgLTIyMSw3ICsyODksNyBAQCB2b2lkIHBhbmZyb3N0X21tdV91bm1hcChzdHJ1Y3QgcGFu
ZnJvc3RfZ2VtX29iamVjdCAqYm8pCj4gIHsKPiAgCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2Jq
ID0gJmJvLT5iYXNlLmJhc2U7Cj4gIAlzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiA9IHRv
X3BhbmZyb3N0X2RldmljZShvYmotPmRldik7Cj4gLQlzdHJ1Y3QgaW9fcGd0YWJsZV9vcHMgKm9w
cyA9IHBmZGV2LT5tbXUtPnBndGJsX29wczsKPiArCXN0cnVjdCBpb19wZ3RhYmxlX29wcyAqb3Bz
ID0gYm8tPm1tdS0+cGd0Ymxfb3BzOwo+ICAJdTY0IGlvdmEgPSBiby0+bm9kZS5zdGFydCA8PCBQ
QUdFX1NISUZUOwo+ICAJc2l6ZV90IGxlbiA9IGJvLT5ub2RlLnNpemUgPDwgUEFHRV9TSElGVDsK
PiAgCXNpemVfdCB1bm1hcHBlZF9sZW4gPSAwOwo+IEBAIC0yMzAsMTMgKzI5OCwxMyBAQCB2b2lk
IHBhbmZyb3N0X21tdV91bm1hcChzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm8pCj4gIAlp
ZiAoV0FSTl9PTighYm8tPmlzX21hcHBlZCkpCj4gIAkJcmV0dXJuOwo+ICAKPiAtCWRldl9kYmco
cGZkZXYtPmRldiwgInVubWFwOiBpb3ZhPSVsbHgsIGxlbj0lengiLCBpb3ZhLCBsZW4pOwo+ICsJ
ZGV2X2RiZyhwZmRldi0+ZGV2LCAidW5tYXA6IGFzPSVkLCBpb3ZhPSVsbHgsIGxlbj0lengiLCBi
by0+bW11LT5hcywgaW92YSwgbGVuKTsKPiAgCj4gIAlyZXQgPSBwbV9ydW50aW1lX2dldF9zeW5j
KHBmZGV2LT5kZXYpOwo+ICAJaWYgKHJldCA8IDApCj4gIAkJcmV0dXJuOwo+ICAKPiAtCW11dGV4
X2xvY2soJnBmZGV2LT5tbXUtPmxvY2spOwo+ICsJbXV0ZXhfbG9jaygmYm8tPm1tdS0+bG9jayk7
Cj4gIAo+ICAJd2hpbGUgKHVubWFwcGVkX2xlbiA8IGxlbikgewo+ICAJCXNpemVfdCB1bm1hcHBl
ZF9wYWdlOwo+IEBAIC0yNTAsMTAgKzMxOCwxMCBAQCB2b2lkIHBhbmZyb3N0X21tdV91bm1hcChz
dHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm8pCj4gIAkJdW5tYXBwZWRfbGVuICs9IHBnc2l6
ZTsKPiAgCX0KPiAgCj4gLQltbXVfaHdfZG9fb3BlcmF0aW9uKHBmZGV2LCAwLCBiby0+bm9kZS5z
dGFydCA8PCBQQUdFX1NISUZULAo+ICsJbW11X2h3X2RvX29wZXJhdGlvbihwZmRldiwgYm8tPm1t
dSwgYm8tPm5vZGUuc3RhcnQgPDwgUEFHRV9TSElGVCwKPiAgCQkJICAgIGJvLT5ub2RlLnNpemUg
PDwgUEFHRV9TSElGVCwgQVNfQ09NTUFORF9GTFVTSF9QVCk7Cj4gIAo+IC0JbXV0ZXhfdW5sb2Nr
KCZwZmRldi0+bW11LT5sb2NrKTsKPiArCW11dGV4X3VubG9jaygmYm8tPm1tdS0+bG9jayk7Cj4g
IAo+ICAJcG1fcnVudGltZV9tYXJrX2xhc3RfYnVzeShwZmRldi0+ZGV2KTsKPiAgCXBtX3J1bnRp
bWVfcHV0X2F1dG9zdXNwZW5kKHBmZGV2LT5kZXYpOwo+IEBAIC0yNjIsOSArMzMwLDkgQEAgdm9p
ZCBwYW5mcm9zdF9tbXVfdW5tYXAoc3RydWN0IHBhbmZyb3N0X2dlbV9vYmplY3QgKmJvKQo+ICAK
PiAgc3RhdGljIHZvaWQgbW11X3RsYl9pbnZfY29udGV4dF9zMSh2b2lkICpjb29raWUpCj4gIHsK
PiAtCXN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gY29va2llOwo+ICsJc3RydWN0IHBh
bmZyb3N0X2ZpbGVfcHJpdiAqcHJpdiA9IGNvb2tpZTsKPiAgCj4gLQltbXVfaHdfZG9fb3BlcmF0
aW9uKHBmZGV2LCAwLCAwLCB+MFVMLCBBU19DT01NQU5EX0ZMVVNIX01FTSk7Cj4gKwltbXVfaHdf
ZG9fb3BlcmF0aW9uKHByaXYtPnBmZGV2LCAmcHJpdi0+bW11LCAwLCB+MFVMLCBBU19DT01NQU5E
X0ZMVVNIX01FTSk7Cj4gIH0KPiAgCj4gIHN0YXRpYyB2b2lkIG1tdV90bGJfaW52X3JhbmdlX25v
c3luYyh1bnNpZ25lZCBsb25nIGlvdmEsIHNpemVfdCBzaXplLAo+IEBAIC0yODMsMTYgKzM1MSw2
OSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGlvbW11X2dhdGhlcl9vcHMgbW11X3RsYl9vcHMgPSB7
Cj4gIAkudGxiX3N5bmMJPSBtbXVfdGxiX3N5bmNfY29udGV4dCwKPiAgfTsKPiAgCj4gK2ludCBw
YW5mcm9zdF9tbXVfcGd0YWJsZV9hbGxvYyhzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICpwcml2
KQo+ICt7Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfbW11ICptbXUgPSAmcHJpdi0+bW11Owo+ICsJc3Ry
dWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYgPSBwcml2LT5wZmRldjsKPiArCj4gKwltdXRleF9p
bml0KCZtbXUtPmxvY2spOwo+ICsJSU5JVF9MSVNUX0hFQUQoJm1tdS0+bGlzdCk7Cj4gKwltbXUt
PmFzID0gLTE7Cj4gKwo+ICsJbW11LT5wZ3RibF9jZmcgPSAoc3RydWN0IGlvX3BndGFibGVfY2Zn
KSB7Cj4gKwkJLnBnc2l6ZV9iaXRtYXAJPSBTWl80SyB8IFNaXzJNLAo+ICsJCS5pYXMJCT0gRklF
TERfR0VUKDB4ZmYsIHBmZGV2LT5mZWF0dXJlcy5tbXVfZmVhdHVyZXMpLAo+ICsJCS5vYXMJCT0g
RklFTERfR0VUKDB4ZmYwMCwgcGZkZXYtPmZlYXR1cmVzLm1tdV9mZWF0dXJlcyksCj4gKwkJLnRs
YgkJPSAmbW11X3RsYl9vcHMsCj4gKwkJLmlvbW11X2Rldgk9IHBmZGV2LT5kZXYsCj4gKwl9Owo+
ICsKPiArCW1tdS0+cGd0Ymxfb3BzID0gYWxsb2NfaW9fcGd0YWJsZV9vcHMoQVJNX01BTElfTFBB
RSwgJm1tdS0+cGd0YmxfY2ZnLAo+ICsJCQkJCSAgICAgIHByaXYpOwo+ICsJaWYgKCFtbXUtPnBn
dGJsX29wcykKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsK
PiArdm9pZCBwYW5mcm9zdF9tbXVfcGd0YWJsZV9mcmVlKHN0cnVjdCBwYW5mcm9zdF9maWxlX3By
aXYgKnByaXYpCj4gK3sKPiArCXN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gcHJpdi0+
cGZkZXY7Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfbW11ICptbXUgPSAmcHJpdi0+bW11Owo+ICsKPiAr
CXNwaW5fbG9jaygmcGZkZXYtPmFzX2xvY2spOwo+ICsJaWYgKG1tdS0+YXMgPj0gMCkgewo+ICsJ
CWNsZWFyX2JpdChtbXUtPmFzLCAmcGZkZXYtPmFzX2FsbG9jX21hc2spOwo+ICsJCWNsZWFyX2Jp
dChtbXUtPmFzLCAmcGZkZXYtPmFzX2luX3VzZV9tYXNrKTsKPiArCQlsaXN0X2RlbCgmbW11LT5s
aXN0KTsKPiArCX0KPiArCXNwaW5fdW5sb2NrKCZwZmRldi0+YXNfbG9jayk7Cj4gKwo+ICsJZnJl
ZV9pb19wZ3RhYmxlX29wcyhtbXUtPnBndGJsX29wcyk7Cj4gK30KPiArCj4gIHN0YXRpYyBzdHJ1
Y3QgZHJtX21tX25vZGUgKmFkZHJfdG9fZHJtX21tX25vZGUoc3RydWN0IHBhbmZyb3N0X2Rldmlj
ZSAqcGZkZXYsIGludCBhcywgdTY0IGFkZHIpCj4gIHsKPiAtCXN0cnVjdCBkcm1fbW1fbm9kZSAq
bm9kZTsKPiArCXN0cnVjdCBkcm1fbW1fbm9kZSAqbm9kZSA9IE5VTEw7Cj4gIAl1NjQgb2Zmc2V0
ID0gYWRkciA+PiBQQUdFX1NISUZUOwo+ICsJc3RydWN0IHBhbmZyb3N0X21tdSAqbW11Owo+ICAK
PiAtCWRybV9tbV9mb3JfZWFjaF9ub2RlKG5vZGUsICZwZmRldi0+bW0pIHsKPiAtCQlpZiAob2Zm
c2V0ID49IG5vZGUtPnN0YXJ0ICYmIG9mZnNldCA8IChub2RlLT5zdGFydCArIG5vZGUtPnNpemUp
KQo+IC0JCQlyZXR1cm4gbm9kZTsKPiArCXNwaW5fbG9jaygmcGZkZXYtPmFzX2xvY2spOwo+ICsJ
bGlzdF9mb3JfZWFjaF9lbnRyeShtbXUsICZwZmRldi0+YXNfbHJ1X2xpc3QsIGxpc3QpIHsKPiAr
CQlzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICpwcml2Owo+ICsJCWlmIChhcyAhPSBtbXUtPmFz
KQo+ICsJCQljb250aW51ZTsKPiArCj4gKwkJcHJpdiA9IGNvbnRhaW5lcl9vZihtbXUsIHN0cnVj
dCBwYW5mcm9zdF9maWxlX3ByaXYsIG1tdSk7Cj4gKwkJZHJtX21tX2Zvcl9lYWNoX25vZGUobm9k
ZSwgJnByaXYtPm1tKSB7Cj4gKwkJCWlmIChvZmZzZXQgPj0gbm9kZS0+c3RhcnQgJiYgb2Zmc2V0
IDwgKG5vZGUtPnN0YXJ0ICsgbm9kZS0+c2l6ZSkpCj4gKwkJCQlnb3RvIG91dDsKPiArCQl9Cj4g
IAl9Cj4gLQlyZXR1cm4gTlVMTDsKPiArCj4gK291dDoKPiArCXNwaW5fdW5sb2NrKCZwZmRldi0+
YXNfbG9jayk7Cj4gKwlyZXR1cm4gbm9kZTsKPiAgfQo+ICAKPiAgI2RlZmluZSBOVU1fRkFVTFRf
UEFHRVMgKFNaXzJNIC8gUEFHRV9TSVpFKQo+IEBAIC0zMTcsNiArNDM4LDggQEAgaW50IHBhbmZy
b3N0X21tdV9tYXBfZmF1bHRfYWRkcihzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwgaW50
IGFzLCB1NjQgYWRkcikKPiAgCQkJIG5vZGUtPnN0YXJ0IDw8IFBBR0VfU0hJRlQpOwo+ICAJCXJl
dHVybiAtRUlOVkFMOwo+ICAJfQo+ICsJV0FSTl9PTihiby0+bW11LT5hcyAhPSBhcyk7Cj4gKwo+
ICAJLyogQXNzdW1lIDJNQiBhbGlnbm1lbnQgYW5kIHNpemUgbXVsdGlwbGUgKi8KPiAgCWFkZHIg
Jj0gfigodTY0KVNaXzJNIC0gMSk7Cj4gIAlwYWdlX29mZnNldCA9IGFkZHIgPj4gUEFHRV9TSElG
VDsKPiBAQCAtMzY3LDExICs0OTAsMTEgQEAgaW50IHBhbmZyb3N0X21tdV9tYXBfZmF1bHRfYWRk
cihzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwgaW50IGFzLCB1NjQgYWRkcikKPiAgCQln
b3RvIGVycl9tYXA7Cj4gIAl9Cj4gIAo+IC0JbW11X21hcF9zZyhwZmRldiwgYWRkciwgSU9NTVVf
V1JJVEUgfCBJT01NVV9SRUFEIHwgSU9NTVVfTk9FWEVDLCBzZ3QpOwo+ICsJbW11X21hcF9zZyhw
ZmRldiwgYm8tPm1tdSwgYWRkciwgSU9NTVVfV1JJVEUgfCBJT01NVV9SRUFEIHwgSU9NTVVfTk9F
WEVDLCBzZ3QpOwo+ICAKPiAgCWJvLT5pc19tYXBwZWQgPSB0cnVlOwo+ICAKPiAtCWRldl9kYmco
cGZkZXYtPmRldiwgIm1hcHBlZCBwYWdlIGZhdWx0IEAgJWxseCIsIGFkZHIpOwo+ICsJZGV2X2Ri
ZyhwZmRldi0+ZGV2LCAibWFwcGVkIHBhZ2UgZmF1bHQgQCBBUyVkICVsbHgiLCBhcywgYWRkcik7
Cj4gIAo+ICAJcmV0dXJuIDA7Cj4gIAo+IEBAIC00ODAsMTUgKzYwMyw4IEBAIHN0YXRpYyBpcnFy
ZXR1cm5fdCBwYW5mcm9zdF9tbXVfaXJxX2hhbmRsZXJfdGhyZWFkKGludCBpcnEsIHZvaWQgKmRh
dGEpCj4gIAo+ICBpbnQgcGFuZnJvc3RfbW11X2luaXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAq
cGZkZXYpCj4gIHsKPiAtCXN0cnVjdCBpb19wZ3RhYmxlX29wcyAqcGd0Ymxfb3BzOwo+ICAJaW50
IGVyciwgaXJxOwo+ICAKPiAtCXBmZGV2LT5tbXUgPSBkZXZtX2t6YWxsb2MocGZkZXYtPmRldiwg
c2l6ZW9mKCpwZmRldi0+bW11KSwgR0ZQX0tFUk5FTCk7Cj4gLQlpZiAoIXBmZGV2LT5tbXUpCj4g
LQkJcmV0dXJuIC1FTk9NRU07Cj4gLQo+IC0JbXV0ZXhfaW5pdCgmcGZkZXYtPm1tdS0+bG9jayk7
Cj4gLQo+ICAJaXJxID0gcGxhdGZvcm1fZ2V0X2lycV9ieW5hbWUodG9fcGxhdGZvcm1fZGV2aWNl
KHBmZGV2LT5kZXYpLCAibW11Iik7Cj4gIAlpZiAoaXJxIDw9IDApCj4gIAkJcmV0dXJuIC1FTk9E
RVY7Cj4gQEAgLTUwMSwyMiArNjE3LDYgQEAgaW50IHBhbmZyb3N0X21tdV9pbml0KHN0cnVjdCBw
YW5mcm9zdF9kZXZpY2UgKnBmZGV2KQo+ICAJCWRldl9lcnIocGZkZXYtPmRldiwgImZhaWxlZCB0
byByZXF1ZXN0IG1tdSBpcnEiKTsKPiAgCQlyZXR1cm4gZXJyOwo+ICAJfQo+IC0JcGZkZXYtPm1t
dS0+cGd0YmxfY2ZnID0gKHN0cnVjdCBpb19wZ3RhYmxlX2NmZykgewo+IC0JCS5wZ3NpemVfYml0
bWFwCT0gU1pfNEsgfCBTWl8yTSwKPiAtCQkuaWFzCQk9IEZJRUxEX0dFVCgweGZmLCBwZmRldi0+
ZmVhdHVyZXMubW11X2ZlYXR1cmVzKSwKPiAtCQkub2FzCQk9IEZJRUxEX0dFVCgweGZmMDAsIHBm
ZGV2LT5mZWF0dXJlcy5tbXVfZmVhdHVyZXMpLAo+IC0JCS50bGIJCT0gJm1tdV90bGJfb3BzLAo+
IC0JCS5pb21tdV9kZXYJPSBwZmRldi0+ZGV2LAo+IC0JfTsKPiAtCj4gLQlwZ3RibF9vcHMgPSBh
bGxvY19pb19wZ3RhYmxlX29wcyhBUk1fTUFMSV9MUEFFLCAmcGZkZXYtPm1tdS0+cGd0YmxfY2Zn
LAo+IC0JCQkJCSBwZmRldik7Cj4gLQlpZiAoIXBndGJsX29wcykKPiAtCQlyZXR1cm4gLUVOT01F
TTsKPiAtCj4gLQlwZmRldi0+bW11LT5wZ3RibF9vcHMgPSBwZ3RibF9vcHM7Cj4gLQo+IC0JcGFu
ZnJvc3RfbW11X2VuYWJsZShwZmRldiwgMCk7Cj4gIAo+ICAJcmV0dXJuIDA7Cj4gIH0KPiBAQCAt
NTI1LDYgKzYyNSw0IEBAIHZvaWQgcGFuZnJvc3RfbW11X2Zpbmkoc3RydWN0IHBhbmZyb3N0X2Rl
dmljZSAqcGZkZXYpCj4gIHsKPiAgCW1tdV93cml0ZShwZmRldiwgTU1VX0lOVF9NQVNLLCAwKTsK
PiAgCW1tdV9kaXNhYmxlKHBmZGV2LCAwKTsKPiAtCj4gLQlmcmVlX2lvX3BndGFibGVfb3BzKHBm
ZGV2LT5tbXUtPnBndGJsX29wcyk7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3BhbmZyb3N0L3BhbmZyb3N0X21tdS5oIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZy
b3N0X21tdS5oCj4gaW5kZXggZDVmOWIyNDUzN2RiLi43YzViNjc3NWFlMjMgMTAwNjQ0Cj4gLS0t
IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5oCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5oCj4gQEAgLTUsNiArNSw4IEBACj4gICNk
ZWZpbmUgX19QQU5GUk9TVF9NTVVfSF9fCj4gIAo+ICBzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVj
dDsKPiArc3RydWN0IHBhbmZyb3N0X2ZpbGVfcHJpdjsKPiArc3RydWN0IHBhbmZyb3N0X21tdTsK
PiAgCj4gIGludCBwYW5mcm9zdF9tbXVfbWFwKHN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0ICpi
byk7Cj4gIHZvaWQgcGFuZnJvc3RfbW11X3VubWFwKHN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0
ICpibyk7Cj4gQEAgLTEzLDQgKzE1LDEwIEBAIGludCBwYW5mcm9zdF9tbXVfaW5pdChzdHJ1Y3Qg
cGFuZnJvc3RfZGV2aWNlICpwZmRldik7Cj4gIHZvaWQgcGFuZnJvc3RfbW11X2Zpbmkoc3RydWN0
IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpOwo+ICB2b2lkIHBhbmZyb3N0X21tdV9yZXNldChzdHJ1
Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldik7Cj4gIAo+ICt1MzIgcGFuZnJvc3RfbW11X2FzX2dl
dChzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwgc3RydWN0IHBhbmZyb3N0X21tdSAqbW11
KTsKPiArdm9pZCBwYW5mcm9zdF9tbXVfYXNfcHV0KHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBm
ZGV2LCBzdHJ1Y3QgcGFuZnJvc3RfbW11ICptbXUpOwo+ICsKPiAraW50IHBhbmZyb3N0X21tdV9w
Z3RhYmxlX2FsbG9jKHN0cnVjdCBwYW5mcm9zdF9maWxlX3ByaXYgKnByaXYpOwo+ICt2b2lkIHBh
bmZyb3N0X21tdV9wZ3RhYmxlX2ZyZWUoc3RydWN0IHBhbmZyb3N0X2ZpbGVfcHJpdiAqcHJpdik7
Cj4gKwo+ICAjZW5kaWYKPiAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2Ry
aS1kZXZlbA==
