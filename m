Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5BAB734C74
	for <lists+dri-devel@lfdr.de>; Tue,  4 Jun 2019 17:42:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5E3A389872;
	Tue,  4 Jun 2019 15:42:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8B04B89872
 for <dri-devel@lists.freedesktop.org>; Tue,  4 Jun 2019 15:42:07 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id E568CACF5;
 Tue,  4 Jun 2019 15:42:05 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: kraxel@redhat.com, airlied@redhat.com, daniel@ffwll.ch,
 maarten.lankhorst@linux.intel.com, maxime.ripard@bootlin.com,
 sean@poorly.run, sam@ravnborg.org, christian.koenig@amd.com
Subject: [PATCH 2/8] drm/ast: Remove obsolete or unused cursor state
Date: Tue,  4 Jun 2019 17:41:55 +0200
Message-Id: <20190604154201.14460-3-tzimmermann@suse.de>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190604154201.14460-1-tzimmermann@suse.de>
References: <20190604154201.14460-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGFzdCBkcml2ZXIncyBkYXRhIHN0cnVjdHVyZXMgc3RvcmUgdW51c2VkIG9yIHVuY2VjZXNz
YXJ5IGN1cnNvcgpzdGF0ZS4gTW9zdCBvZiB0aGUgY3Vyc29yIHN0YXRlIGlzIGFscmVhZHkgc3Rv
cmVkIGVsc2V3aGVyZSBhbmQgY2FuCmJlIHJldHJpZXZlZCB3aGVuIG5lY2Vzc2FyeS4gUmVtb3Zl
IHRoZSBvYnNvbGV0ZSBmaWVsZHMgYW5kIGFkYXB0CnVzZXJzIGFjY29yZGluZ2x5LgoKU2lnbmVk
LW9mZi1ieTogVGhvbWFzIFppbW1lcm1hbm4gPHR6aW1tZXJtYW5uQHN1c2UuZGU+Ci0tLQogZHJp
dmVycy9ncHUvZHJtL2FzdC9hc3RfZHJ2LmggIHwgIDcgLS0tLS0tLQogZHJpdmVycy9ncHUvZHJt
L2FzdC9hc3RfbW9kZS5jIHwgMzEgKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLQogMiBm
aWxlcyBjaGFuZ2VkLCAxNyBpbnNlcnRpb25zKCspLCAyMSBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9hc3Qv
YXN0X2Rydi5oCmluZGV4IGI2Y2FjOTUxMTc5Ni4uNjg0ZTE1ZTY0YTYyIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYXN0L2Fz
dF9kcnYuaApAQCAtMTAxLDEwICsxMDEsNiBAQCBzdHJ1Y3QgYXN0X3ByaXZhdGUgewogCWludCBm
Yl9tdHJyOwogCiAJc3RydWN0IGRybV9nZW1fb2JqZWN0ICpjdXJzb3JfY2FjaGU7Ci0JdWludDY0
X3QgY3Vyc29yX2NhY2hlX2dwdV9hZGRyOwotCS8qIEFjY2VzIHRvIHRoaXMgY2FjaGUgaXMgcHJv
dGVjdGVkIGJ5IHRoZSBjcnRjLT5tdXRleCBvZiB0aGUgb25seSBjcnRjCi0JICogd2UgaGF2ZS4g
Ki8KLQlzdHJ1Y3QgdHRtX2JvX2ttYXBfb2JqIGNhY2hlX2ttYXA7CiAJaW50IG5leHRfY3Vyc29y
OwogCWJvb2wgc3VwcG9ydF93aWRlX3NjcmVlbjsKIAllbnVtIHsKQEAgLTIzNiw5ICsyMzIsNiBA
QCBzdHJ1Y3QgYXN0X2Nvbm5lY3RvciB7CiAKIHN0cnVjdCBhc3RfY3J0YyB7CiAJc3RydWN0IGRy
bV9jcnRjIGJhc2U7Ci0Jc3RydWN0IGRybV9nZW1fb2JqZWN0ICpjdXJzb3JfYm87Ci0JdWludDY0
X3QgY3Vyc29yX2FkZHI7Ci0JaW50IGN1cnNvcl93aWR0aCwgY3Vyc29yX2hlaWdodDsKIAl1OCBv
ZmZzZXRfeCwgb2Zmc2V0X3k7CiB9OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYXN0
L2FzdF9tb2RlLmMgYi9kcml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9tb2RlLmMKaW5kZXggNDE3NDFj
ZDZjZDE1Li5jYjZlODI0OWE3ZGIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0
X21vZGUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9tb2RlLmMKQEAgLTkzOSwxNSAr
OTM5LDEzIEBAIHN0YXRpYyBpbnQgYXN0X2N1cnNvcl9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYpCiAJfQogCiAJLyoga21hcCB0aGUgb2JqZWN0ICovCi0JYmFzZSA9IGRybV9nZW1fdnJhbV9r
bWFwX2F0KGdibywgdHJ1ZSwgTlVMTCwgJmFzdC0+Y2FjaGVfa21hcCk7CisJYmFzZSA9IGRybV9n
ZW1fdnJhbV9rbWFwKGdibywgdHJ1ZSwgTlVMTCk7CiAJaWYgKElTX0VSUihiYXNlKSkgewogCQly
ZXQgPSBQVFJfRVJSKGJhc2UpOwogCQlnb3RvIGZhaWw7CiAJfQogCiAJYXN0LT5jdXJzb3JfY2Fj
aGUgPSBvYmo7Ci0JYXN0LT5jdXJzb3JfY2FjaGVfZ3B1X2FkZHIgPSBncHVfYWRkcjsKLQlEUk1f
REVCVUdfS01TKCJwaW5uZWQgY3Vyc29yIGNhY2hlIGF0ICVsbHhcbiIsIGFzdC0+Y3Vyc29yX2Nh
Y2hlX2dwdV9hZGRyKTsKIAlyZXR1cm4gMDsKIGZhaWw6CiAJcmV0dXJuIHJldDsKQEAgLTk1OCw3
ICs5NTYsNyBAQCBzdGF0aWMgdm9pZCBhc3RfY3Vyc29yX2Zpbmkoc3RydWN0IGRybV9kZXZpY2Ug
KmRldikKIAlzdHJ1Y3QgYXN0X3ByaXZhdGUgKmFzdCA9IGRldi0+ZGV2X3ByaXZhdGU7CiAJc3Ry
dWN0IGRybV9nZW1fdnJhbV9vYmplY3QgKmdibyA9CiAJCWRybV9nZW1fdnJhbV9vZl9nZW0oYXN0
LT5jdXJzb3JfY2FjaGUpOwotCWRybV9nZW1fdnJhbV9rdW5tYXBfYXQoZ2JvLCAmYXN0LT5jYWNo
ZV9rbWFwKTsKKwlkcm1fZ2VtX3ZyYW1fa3VubWFwKGdibyk7CiAJZHJtX2dlbV92cmFtX3VucGlu
KGdibyk7CiAJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKGFzdC0+Y3Vyc29yX2NhY2hlKTsK
IH0KQEAgLTExODEsNyArMTE3OSw4IEBAIHN0YXRpYyBpbnQgYXN0X2N1cnNvcl9zZXQoc3RydWN0
IGRybV9jcnRjICpjcnRjLAogCXN0cnVjdCBhc3RfY3J0YyAqYXN0X2NydGMgPSB0b19hc3RfY3J0
YyhjcnRjKTsKIAlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iajsKIAlzdHJ1Y3QgZHJtX2dlbV92
cmFtX29iamVjdCAqZ2JvOwotCXM2NCBncHVfYWRkcjsKKwlzNjQgZHN0X2dwdTsKKwl1NjQgZ3B1
X2FkZHI7CiAJdTMyIGNzdW07CiAJaW50IHJldDsKIAlzdHJ1Y3QgdHRtX2JvX2ttYXBfb2JqIHVv
YmpfbWFwOwpAQCAtMTIxNSwxNCArMTIxNCwxOSBAQCBzdGF0aWMgaW50IGFzdF9jdXJzb3Jfc2V0
KHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAlpZiAoc3JjX2lzaW9tZW0gPT0gdHJ1ZSkKIAkJRFJN
X0VSUk9SKCJzcmMgY3Vyc29yIGJvIHNob3VsZCBiZSBpbiBtYWluIG1lbW9yeVxuIik7CiAKLQlk
c3QgPSBkcm1fZ2VtX3ZyYW1fa21hcF9hdChkcm1fZ2VtX3ZyYW1fb2ZfZ2VtKGFzdC0+Y3Vyc29y
X2NhY2hlKSwKLQkJCQkgICBmYWxzZSwgJmRzdF9pc2lvbWVtLCAmYXN0LT5jYWNoZV9rbWFwKTsK
Kwlkc3QgPSBkcm1fZ2VtX3ZyYW1fa21hcChkcm1fZ2VtX3ZyYW1fb2ZfZ2VtKGFzdC0+Y3Vyc29y
X2NhY2hlKSwKKwkJCQlmYWxzZSwgJmRzdF9pc2lvbWVtKTsKIAlpZiAoSVNfRVJSKGRzdCkpIHsK
IAkJcmV0ID0gUFRSX0VSUihkc3QpOwogCQlnb3RvIGZhaWxfdW5sb2NrOwogCX0KIAlpZiAoZHN0
X2lzaW9tZW0gPT0gZmFsc2UpCiAJCURSTV9FUlJPUigiZHN0IGJvIHNob3VsZCBiZSBpbiBWUkFN
XG4iKTsKKwlkc3RfZ3B1ID0gZHJtX2dlbV92cmFtX29mZnNldChkcm1fZ2VtX3ZyYW1fb2ZfZ2Vt
KGFzdC0+Y3Vyc29yX2NhY2hlKSk7CisJaWYgKGRzdF9ncHUgPCAwKSB7CisJCXJldCA9IChpbnQp
ZHN0X2dwdTsKKwkJZ290byBmYWlsX3VubG9jazsKKwl9CiAKIAlkc3QgKz0gKEFTVF9IV0NfU0la
RSArIEFTVF9IV0NfU0lHTkFUVVJFX1NJWkUpKmFzdC0+bmV4dF9jdXJzb3I7CiAKQEAgLTEyMzQs
OCArMTIzOCw5IEBAIHN0YXRpYyBpbnQgYXN0X2N1cnNvcl9zZXQoc3RydWN0IGRybV9jcnRjICpj
cnRjLAogCiAJLyogd3JpdGUgY2hlY2tzdW0gKyBzaWduYXR1cmUgKi8KIAl7Ci0JCXU4ICpkc3Qg
PSBkcm1fZ2VtX3ZyYW1fa21hcF9hdChkcm1fZ2VtX3ZyYW1fb2ZfZ2VtKGFzdC0+Y3Vyc29yX2Nh
Y2hlKSwKLQkJCQkJICAgICAgIGZhbHNlLCBOVUxMLCAmYXN0LT5jYWNoZV9rbWFwKTsKKwkJc3Ry
dWN0IGRybV9nZW1fdnJhbV9vYmplY3QgKmRzdF9nYm8gPQorCQkJZHJtX2dlbV92cmFtX29mX2dl
bShhc3QtPmN1cnNvcl9jYWNoZSk7CisJCXU4ICpkc3QgPSBkcm1fZ2VtX3ZyYW1fa21hcChkc3Rf
Z2JvLCBmYWxzZSwgTlVMTCk7CiAJCWRzdCArPSAoQVNUX0hXQ19TSVpFICsgQVNUX0hXQ19TSUdO
QVRVUkVfU0laRSkqYXN0LT5uZXh0X2N1cnNvciArIEFTVF9IV0NfU0laRTsKIAkJd3JpdGVsKGNz
dW0sIGRzdCk7CiAJCXdyaXRlbCh3aWR0aCwgZHN0ICsgQVNUX0hXQ19TSUdOQVRVUkVfU2l6ZVgp
OwpAQCAtMTI0NCwxNSArMTI0OSwxMyBAQCBzdGF0aWMgaW50IGFzdF9jdXJzb3Jfc2V0KHN0cnVj
dCBkcm1fY3J0YyAqY3J0YywKIAkJd3JpdGVsKDAsIGRzdCArIEFTVF9IV0NfU0lHTkFUVVJFX0hP
VFNQT1RZKTsKIAogCQkvKiBzZXQgcGF0dGVybiBvZmZzZXQgKi8KLQkJZ3B1X2FkZHIgPSBhc3Qt
PmN1cnNvcl9jYWNoZV9ncHVfYWRkcjsKKwkJZ3B1X2FkZHIgPSAodTY0KWRzdF9ncHU7CiAJCWdw
dV9hZGRyICs9IChBU1RfSFdDX1NJWkUgKyBBU1RfSFdDX1NJR05BVFVSRV9TSVpFKSphc3QtPm5l
eHRfY3Vyc29yOwogCQlncHVfYWRkciA+Pj0gMzsKIAkJYXN0X3NldF9pbmRleF9yZWcoYXN0LCBB
U1RfSU9fQ1JUQ19QT1JULCAweGM4LCBncHVfYWRkciAmIDB4ZmYpOwogCQlhc3Rfc2V0X2luZGV4
X3JlZyhhc3QsIEFTVF9JT19DUlRDX1BPUlQsIDB4YzksIChncHVfYWRkciA+PiA4KSAmIDB4ZmYp
OwogCQlhc3Rfc2V0X2luZGV4X3JlZyhhc3QsIEFTVF9JT19DUlRDX1BPUlQsIDB4Y2EsIChncHVf
YWRkciA+PiAxNikgJiAweGZmKTsKIAl9Ci0JYXN0X2NydGMtPmN1cnNvcl93aWR0aCA9IHdpZHRo
OwotCWFzdF9jcnRjLT5jdXJzb3JfaGVpZ2h0ID0gaGVpZ2h0OwogCWFzdF9jcnRjLT5vZmZzZXRf
eCA9IEFTVF9NQVhfSFdDX1dJRFRIIC0gd2lkdGg7CiAJYXN0X2NydGMtPm9mZnNldF95ID0gQVNU
X01BWF9IV0NfV0lEVEggLSBoZWlnaHQ7CiAKQEAgLTEyNzgsOCArMTI4MSw4IEBAIHN0YXRpYyBp
bnQgYXN0X2N1cnNvcl9tb3ZlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAlpbnQgeF9vZmZzZXQs
IHlfb2Zmc2V0OwogCXU4ICpzaWc7CiAKLQlzaWcgPSBkcm1fZ2VtX3ZyYW1fa21hcF9hdChkcm1f
Z2VtX3ZyYW1fb2ZfZ2VtKGFzdC0+Y3Vyc29yX2NhY2hlKSwKLQkJCQkgICBmYWxzZSwgTlVMTCwg
JmFzdC0+Y2FjaGVfa21hcCk7CisJc2lnID0gZHJtX2dlbV92cmFtX2ttYXAoZHJtX2dlbV92cmFt
X29mX2dlbShhc3QtPmN1cnNvcl9jYWNoZSksCisJCQkJICAgZmFsc2UsIE5VTEwpOwogCXNpZyAr
PSAoQVNUX0hXQ19TSVpFICsgQVNUX0hXQ19TSUdOQVRVUkVfU0laRSkqYXN0LT5uZXh0X2N1cnNv
ciArIEFTVF9IV0NfU0laRTsKIAl3cml0ZWwoeCwgc2lnICsgQVNUX0hXQ19TSUdOQVRVUkVfWCk7
CiAJd3JpdGVsKHksIHNpZyArIEFTVF9IV0NfU0lHTkFUVVJFX1kpOwotLSAKMi4yMS4wCgpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFp
bGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
