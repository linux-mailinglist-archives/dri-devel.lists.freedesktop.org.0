Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id ED1B9398C5
	for <lists+dri-devel@lfdr.de>; Sat,  8 Jun 2019 00:32:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9BAC68914E;
	Fri,  7 Jun 2019 22:32:13 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 536708914E;
 Fri,  7 Jun 2019 22:32:12 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 07 Jun 2019 15:32:11 -0700
X-ExtLoop1: 1
Received: from iweiny-desk2.sc.intel.com ([10.3.52.157])
 by orsmga008.jf.intel.com with ESMTP; 07 Jun 2019 15:32:10 -0700
Date: Fri, 7 Jun 2019 15:33:24 -0700
From: Ira Weiny <ira.weiny@intel.com>
To: Jason Gunthorpe <jgg@ziepe.ca>
Subject: Re: [PATCH v2 hmm 02/11] mm/hmm: Use hmm_mirror not mm as an
 argument for hmm_range_register
Message-ID: <20190607223324.GD14559@iweiny-DESK2.sc.intel.com>
References: <20190606184438.31646-1-jgg@ziepe.ca>
 <20190606184438.31646-3-jgg@ziepe.ca>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190606184438.31646-3-jgg@ziepe.ca>
User-Agent: Mutt/1.11.1 (2018-12-01)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Andrea Arcangeli <aarcange@redhat.com>,
 Ralph Campbell <rcampbell@nvidia.com>, linux-rdma@vger.kernel.org,
 John Hubbard <jhubbard@nvidia.com>, Felix.Kuehling@amd.com,
 dri-devel@lists.freedesktop.org, linux-mm@kvack.org,
 Jerome Glisse <jglisse@redhat.com>, Jason Gunthorpe <jgg@mellanox.com>,
 amd-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBKdW4gMDYsIDIwMTkgYXQgMDM6NDQ6MjlQTSAtMDMwMCwgSmFzb24gR3VudGhvcnBl
IHdyb3RlOgo+IEZyb206IEphc29uIEd1bnRob3JwZSA8amdnQG1lbGxhbm94LmNvbT4KPiAKPiBS
YWxwaCBvYnNlcnZlcyB0aGF0IGhtbV9yYW5nZV9yZWdpc3RlcigpIGNhbiBvbmx5IGJlIGNhbGxl
ZCBieSBhIGRyaXZlcgo+IHdoaWxlIGEgbWlycm9yIGlzIHJlZ2lzdGVyZWQuIE1ha2UgdGhpcyBj
bGVhciBpbiB0aGUgQVBJIGJ5IHBhc3NpbmcgaW4gdGhlCj4gbWlycm9yIHN0cnVjdHVyZSBhcyBh
IHBhcmFtZXRlci4KPiAKPiBUaGlzIGFsc28gc2ltcGxpZmllcyB1bmRlcnN0YW5kaW5nIHRoZSBs
aWZldGltZSBtb2RlbCBmb3Igc3RydWN0IGhtbSwgYXMKPiB0aGUgaG1tIHBvaW50ZXIgbXVzdCBi
ZSB2YWxpZCBhcyBwYXJ0IG9mIGEgcmVnaXN0ZXJlZCBtaXJyb3Igc28gYWxsIHdlCj4gbmVlZCBp
biBobW1fcmVnaXN0ZXJfcmFuZ2UoKSBpcyBhIHNpbXBsZSBrcmVmX2dldC4KPiAKPiBTdWdnZXN0
ZWQtYnk6IFJhbHBoIENhbXBiZWxsIDxyY2FtcGJlbGxAbnZpZGlhLmNvbT4KPiBTaWduZWQtb2Zm
LWJ5OiBKYXNvbiBHdW50aG9ycGUgPGpnZ0BtZWxsYW5veC5jb20+Cj4gLS0tCj4gdjIKPiAtIElu
Y2x1ZGUgdGhlIG9uZWxpbmUgcGF0Y2ggdG8gbm91dmVhdV9zdm0uYwo+IC0tLQo+ICBkcml2ZXJz
L2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3N2bS5jIHwgIDIgKy0KPiAgaW5jbHVkZS9saW51eC9o
bW0uaCAgICAgICAgICAgICAgICAgICB8ICA3ICsrKystLS0KPiAgbW0vaG1tLmMgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB8IDE1ICsrKysrKy0tLS0tLS0tLQo+ICAzIGZpbGVzIGNoYW5n
ZWQsIDExIGluc2VydGlvbnMoKyksIDEzIGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3N2bS5jIGIvZHJpdmVycy9ncHUvZHJtL25v
dXZlYXUvbm91dmVhdV9zdm0uYwo+IGluZGV4IDkzZWQ0M2M0MTNmMGJiLi44YzkyMzc0YWZjZjIy
NyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3N2bS5jCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9zdm0uYwo+IEBAIC02NDksNyAr
NjQ5LDcgQEAgbm91dmVhdV9zdm1fZmF1bHQoc3RydWN0IG52aWZfbm90aWZ5ICpub3RpZnkpCj4g
IAkJcmFuZ2UudmFsdWVzID0gbm91dmVhdV9zdm1fcGZuX3ZhbHVlczsKPiAgCQlyYW5nZS5wZm5f
c2hpZnQgPSBOVklGX1ZNTV9QRk5NQVBfVjBfQUREUl9TSElGVDsKPiAgYWdhaW46Cj4gLQkJcmV0
ID0gaG1tX3ZtYV9mYXVsdCgmcmFuZ2UsIHRydWUpOwo+ICsJCXJldCA9IGhtbV92bWFfZmF1bHQo
JnN2bW0tPm1pcnJvciwgJnJhbmdlLCB0cnVlKTsKPiAgCQlpZiAocmV0ID09IDApIHsKPiAgCQkJ
bXV0ZXhfbG9jaygmc3ZtbS0+bXV0ZXgpOwo+ICAJCQlpZiAoIWhtbV92bWFfcmFuZ2VfZG9uZSgm
cmFuZ2UpKSB7Cj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvaG1tLmggYi9pbmNsdWRlL2xp
bnV4L2htbS5oCj4gaW5kZXggNjg4YzVjYTcwNjg3OTUuLjJkNTE5Nzk3Y2IxMzRhIDEwMDY0NAo+
IC0tLSBhL2luY2x1ZGUvbGludXgvaG1tLmgKPiArKysgYi9pbmNsdWRlL2xpbnV4L2htbS5oCj4g
QEAgLTUwNSw3ICs1MDUsNyBAQCBzdGF0aWMgaW5saW5lIGJvb2wgaG1tX21pcnJvcl9tbV9pc19h
bGl2ZShzdHJ1Y3QgaG1tX21pcnJvciAqbWlycm9yKQo+ICAgKiBQbGVhc2Ugc2VlIERvY3VtZW50
YXRpb24vdm0vaG1tLnJzdCBmb3IgaG93IHRvIHVzZSB0aGUgcmFuZ2UgQVBJLgo+ICAgKi8KPiAg
aW50IGhtbV9yYW5nZV9yZWdpc3RlcihzdHJ1Y3QgaG1tX3JhbmdlICpyYW5nZSwKPiAtCQkgICAg
ICAgc3RydWN0IG1tX3N0cnVjdCAqbW0sCj4gKwkJICAgICAgIHN0cnVjdCBobW1fbWlycm9yICpt
aXJyb3IsCj4gIAkJICAgICAgIHVuc2lnbmVkIGxvbmcgc3RhcnQsCj4gIAkJICAgICAgIHVuc2ln
bmVkIGxvbmcgZW5kLAo+ICAJCSAgICAgICB1bnNpZ25lZCBwYWdlX3NoaWZ0KTsKPiBAQCAtNTQx
LDcgKzU0MSw4IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBobW1fdm1hX3JhbmdlX2RvbmUoc3RydWN0
IGhtbV9yYW5nZSAqcmFuZ2UpCj4gIH0KPiAgCj4gIC8qIFRoaXMgaXMgYSB0ZW1wb3JhcnkgaGVs
cGVyIHRvIGF2b2lkIG1lcmdlIGNvbmZsaWN0IGJldHdlZW4gdHJlZXMuICovCj4gLXN0YXRpYyBp
bmxpbmUgaW50IGhtbV92bWFfZmF1bHQoc3RydWN0IGhtbV9yYW5nZSAqcmFuZ2UsIGJvb2wgYmxv
Y2spCj4gK3N0YXRpYyBpbmxpbmUgaW50IGhtbV92bWFfZmF1bHQoc3RydWN0IGhtbV9taXJyb3Ig
Km1pcnJvciwKPiArCQkJCXN0cnVjdCBobW1fcmFuZ2UgKnJhbmdlLCBib29sIGJsb2NrKQo+ICB7
Cj4gIAlsb25nIHJldDsKPiAgCj4gQEAgLTU1NCw3ICs1NTUsNyBAQCBzdGF0aWMgaW5saW5lIGlu
dCBobW1fdm1hX2ZhdWx0KHN0cnVjdCBobW1fcmFuZ2UgKnJhbmdlLCBib29sIGJsb2NrKQo+ICAJ
cmFuZ2UtPmRlZmF1bHRfZmxhZ3MgPSAwOwo+ICAJcmFuZ2UtPnBmbl9mbGFnc19tYXNrID0gLTFV
TDsKPiAgCj4gLQlyZXQgPSBobW1fcmFuZ2VfcmVnaXN0ZXIocmFuZ2UsIHJhbmdlLT52bWEtPnZt
X21tLAo+ICsJcmV0ID0gaG1tX3JhbmdlX3JlZ2lzdGVyKHJhbmdlLCBtaXJyb3IsCj4gIAkJCQkg
cmFuZ2UtPnN0YXJ0LCByYW5nZS0+ZW5kLAo+ICAJCQkJIFBBR0VfU0hJRlQpOwo+ICAJaWYgKHJl
dCkKPiBkaWZmIC0tZ2l0IGEvbW0vaG1tLmMgYi9tbS9obW0uYwo+IGluZGV4IDU0NzAwMmY1NmEx
NjNkLi44Nzk2NDQ3Mjk5MDIzYyAxMDA2NDQKPiAtLS0gYS9tbS9obW0uYwo+ICsrKyBiL21tL2ht
bS5jCj4gQEAgLTkyNSwxMyArOTI1LDEzIEBAIHN0YXRpYyB2b2lkIGhtbV9wZm5zX2NsZWFyKHN0
cnVjdCBobW1fcmFuZ2UgKnJhbmdlLAo+ICAgKiBUcmFjayB1cGRhdGVzIHRvIHRoZSBDUFUgcGFn
ZSB0YWJsZSBzZWUgaW5jbHVkZS9saW51eC9obW0uaAo+ICAgKi8KPiAgaW50IGhtbV9yYW5nZV9y
ZWdpc3RlcihzdHJ1Y3QgaG1tX3JhbmdlICpyYW5nZSwKPiAtCQkgICAgICAgc3RydWN0IG1tX3N0
cnVjdCAqbW0sCj4gKwkJICAgICAgIHN0cnVjdCBobW1fbWlycm9yICptaXJyb3IsCj4gIAkJICAg
ICAgIHVuc2lnbmVkIGxvbmcgc3RhcnQsCj4gIAkJICAgICAgIHVuc2lnbmVkIGxvbmcgZW5kLAo+
ICAJCSAgICAgICB1bnNpZ25lZCBwYWdlX3NoaWZ0KQo+ICB7Cj4gIAl1bnNpZ25lZCBsb25nIG1h
c2sgPSAoKDFVTCA8PCBwYWdlX3NoaWZ0KSAtIDFVTCk7Cj4gLQlzdHJ1Y3QgaG1tICpobW07Cj4g
KwlzdHJ1Y3QgaG1tICpobW0gPSBtaXJyb3ItPmhtbTsKPiAgCj4gIAlyYW5nZS0+dmFsaWQgPSBm
YWxzZTsKPiAgCXJhbmdlLT5obW0gPSBOVUxMOwo+IEBAIC05NDUsMTUgKzk0NSwxMiBAQCBpbnQg
aG1tX3JhbmdlX3JlZ2lzdGVyKHN0cnVjdCBobW1fcmFuZ2UgKnJhbmdlLAo+ICAJcmFuZ2UtPnN0
YXJ0ID0gc3RhcnQ7Cj4gIAlyYW5nZS0+ZW5kID0gZW5kOwo+ICAKPiAtCWhtbSA9IGhtbV9nZXRf
b3JfY3JlYXRlKG1tKTsKPiAtCWlmICghaG1tKQo+IC0JCXJldHVybiAtRUZBVUxUOwo+IC0KPiAg
CS8qIENoZWNrIGlmIGhtbV9tbV9kZXN0cm95KCkgd2FzIGNhbGwuICovCj4gLQlpZiAoaG1tLT5t
bSA9PSBOVUxMIHx8IGhtbS0+ZGVhZCkgewo+IC0JCWhtbV9wdXQoaG1tKTsKPiArCWlmIChobW0t
Pm1tID09IE5VTEwgfHwgaG1tLT5kZWFkKQo+ICAJCXJldHVybiAtRUZBVUxUOwo+IC0JfQo+ICsK
PiArCXJhbmdlLT5obW0gPSBobW07CgpJIGRvbid0IHRoaW5rIHlvdSBuZWVkIHRoaXMgYXNzaWdu
bWVudCBoZXJlLiAgSW4gdGhlIGNvZGUgYmVsb3cgKHJpZ2h0IGFmdGVyCnRoZSBtdXRleHRfbG9j
aygpKSBpdCBpcyBzZXQgYWxyZWFkeS4gIEFuZCBsb29rcyBsaWtlIGl0IHJlbWFpbnMgdGhhdCB3
YXkgYWZ0ZXIKdGhlIGVuZCBvZiB0aGUgc2VyaWVzLgoKUmV2aWV3ZWQtYnk6IElyYSBXZWlueSA8
aXJhLndlaW55QGludGVsLmNvbT4KCj4gKwlrcmVmX2dldCgmaG1tLT5rcmVmKTsKPiAgCj4gIAkv
KiBJbml0aWFsaXplIHJhbmdlIHRvIHRyYWNrIENQVSBwYWdlIHRhYmxlIHVwZGF0ZXMuICovCj4g
IAltdXRleF9sb2NrKCZobW0tPmxvY2spOwo+IC0tIAo+IDIuMjEuMAo+IApfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0
CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
