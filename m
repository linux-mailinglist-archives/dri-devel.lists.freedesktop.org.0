Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 231D0F19F4
	for <lists+dri-devel@lfdr.de>; Wed,  6 Nov 2019 16:25:16 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 526326EDA6;
	Wed,  6 Nov 2019 15:25:13 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lf1-x142.google.com (mail-lf1-x142.google.com
 [IPv6:2a00:1450:4864:20::142])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B11636EDA6
 for <dri-devel@lists.freedesktop.org>; Wed,  6 Nov 2019 15:25:11 +0000 (UTC)
Received: by mail-lf1-x142.google.com with SMTP id j14so18340394lfb.8
 for <dri-devel@lists.freedesktop.org>; Wed, 06 Nov 2019 07:25:11 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=Kpt1tMqBU2FG8Pm1FbFS5640gv2u5fVbhPUnnmuHCDk=;
 b=IFd8kvCwL/UWSXxURR8d6H624wbV5V/fE/C669RcXffrEGR/WcHUujnuO0KmjYydFQ
 tKdPHMgy97OuIjLqaYQSO2zBOfj4j4u0g6iupDOWPPBzyCTCuvWmjlixEosAASF6ektr
 QW7iVO4nfvkCoJnbaY+gaa1o8zmUnA1+7KnFHpp5E+rusgKszztmcpnrMUmvDnF028UZ
 jif5NMF1bA1FbMun5OaC3zDHqLSo3if8ne81C9tOXnQHUZs1KYJ7den2e19JU5w31Ngv
 8EskvG0VoDDusadmz8k4CO85RJMRDwYAZWo6zqwvTiE8oKmXZa3af+ca8G9TITEkEkHQ
 Ji3g==
X-Gm-Message-State: APjAAAXuShChGOGz+rc2zmSsd7xSOceJEbW1rTv2RMgqb87Uz3DUci5V
 k8t47w65ZkA+ZjehY5/dczSmYxpBzL1lBISRmao=
X-Google-Smtp-Source: APXvYqx79330Uffd1npteE8w8+65z1biNi0WznSNuwOnl89J7bl0hH3ubXKiE4WDDde6AYS0XW7p5Esokzw77/vnrMk=
X-Received: by 2002:a19:4909:: with SMTP id w9mr1969323lfa.174.1573053909911; 
 Wed, 06 Nov 2019 07:25:09 -0800 (PST)
MIME-Version: 1.0
References: <20191106094400.445834-1-paul.kocialkowski@bootlin.com>
 <20191106094400.445834-3-paul.kocialkowski@bootlin.com>
In-Reply-To: <20191106094400.445834-3-paul.kocialkowski@bootlin.com>
From: Patrik Jakobsson <patrik.r.jakobsson@gmail.com>
Date: Wed, 6 Nov 2019 16:24:59 +0100
Message-ID: <CAMeQTsa=SWXHt8ZvToa9x5qc6W29B6B4Ssvixs3nd-w=+dYGzA@mail.gmail.com>
Subject: Re: [PATCH 2/2] drm/gma500: Add page flip support on psb/cdv
To: Paul Kocialkowski <paul.kocialkowski@bootlin.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=Kpt1tMqBU2FG8Pm1FbFS5640gv2u5fVbhPUnnmuHCDk=;
 b=K2oP6Nva56UfcPhWfgStsFBYCAsokhE7pf+F3uK3ErR+EInHLPlS9LeCwD00P94dAf
 klz0rDvjuMkE9pNQ49l0FNWsMMLYf6jIWfidO9867TkMHb9053P599iy4mCJVVp/ocB8
 OJEo62ZaVSwPgxnaikGCujPfs/GrRSHZ03c+mYmCTIcsGj/yRweLehJ6HdtUCFypNL1x
 BH8RO0LpxYfmAKu/iLBeIQDz4kv5qBd8E7BuDuWoo8w40O35TG+cW/gtQj0AUyQV2AIA
 R1BegY2dsdYm1QQ7qPqgUxnkpcTIO0SpQhUa6rH3dwZ2uEdsBdtKov87rFgKfDx8GaRl
 mwAg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Petazzoni <thomas.petazzoni@bootlin.com>,
 David Airlie <airlied@linux.ie>, linux-kernel <linux-kernel@vger.kernel.org>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 James Hilliard <james.hilliard1@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBOb3YgNiwgMjAxOSBhdCAxMDo0NCBBTSBQYXVsIEtvY2lhbGtvd3NraQo8cGF1bC5r
b2NpYWxrb3dza2lAYm9vdGxpbi5jb20+IHdyb3RlOgo+Cj4gTGVnYWN5IChub24tYXRvbWljKSBw
YWdlIGZsaXAgc3VwcG9ydCBpcyBhZGRlZCB0byB0aGUgZHJpdmVyIGJ5IHVzaW5nIHRoZQo+IG1v
ZGVfc2V0X2Jhc2UgQ1JUQyBmdW5jdGlvbiwgdGhhdCBhbGxvd3MgY29uZmlndXJpbmcgYSBuZXcg
ZnJhbWVidWZmZXIgZm9yCj4gZGlzcGxheS4gU2luY2UgdGhlIGZ1bmN0aW9uIHJlcXVpcmVzIHRo
ZSBwcmltYXJ5IHBsYW5lJ3MgZmIgdG8gYmUgc2V0Cj4gYWxyZWFkeSwgdGhpcyBpcyBkb25lIHBy
aW9yIHRvIGNhbGxpbmcgdGhlIGZ1bmN0aW9uIGluIHRoZSBwYWdlIGZsaXAgaGVscGVyCj4gYW5k
IHJldmVydGVkIGlmIHRoZSBmbGlwIGZhaWxzLgo+Cj4gVGhlIHZibGFuayBpbnRlcnJ1cHQgaGFu
ZGxlciBpcyBhbHNvIHJlZmFjdG9yZWQgdG8gc3VwcG9ydCBwYXNzaW5nIGFuIGV2ZW50Lgo+IFRo
ZSBQSVBFX1RFX1NUQVRVUyBiaXQgaXMgYWxzbyBjb25zaWRlcmVkIHRvIGluZGljYXRlIHZibGFu
ayBvbiBtZWRmaWVsZAo+IG9ubHksIGFzIGV4cGxhaW5lZCBpbiBwc2JfZW5hYmxlX3ZibGFuay4K
Pgo+IEl0IHdhcyB0ZXN0ZWQgYnkgcnVubmluZyB3ZXN0b24gb24gYm90aCBwb3Vsc2JvIGFuZCBj
ZWRhcnRyYWlsLgo+Cj4gU2lnbmVkLW9mZi1ieTogUGF1bCBLb2NpYWxrb3dza2kgPHBhdWwua29j
aWFsa293c2tpQGJvb3RsaW4uY29tPgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2Nk
dl9pbnRlbF9kaXNwbGF5LmMgfCAgMSArCj4gIGRyaXZlcnMvZ3B1L2RybS9nbWE1MDAvZ21hX2Rp
c3BsYXkuYyAgICAgICB8IDQ2ICsrKysrKysrKysrKysrKysrKysrKysKPiAgZHJpdmVycy9ncHUv
ZHJtL2dtYTUwMC9nbWFfZGlzcGxheS5oICAgICAgIHwgIDYgKysrCj4gIGRyaXZlcnMvZ3B1L2Ry
bS9nbWE1MDAvcHNiX2ludGVsX2Rpc3BsYXkuYyB8ICAxICsKPiAgZHJpdmVycy9ncHUvZHJtL2dt
YTUwMC9wc2JfaW50ZWxfZHJ2LmggICAgIHwgIDMgKysKPiAgZHJpdmVycy9ncHUvZHJtL2dtYTUw
MC9wc2JfaXJxLmMgICAgICAgICAgIHwgMTggKysrKysrKy0tCj4gIDYgZmlsZXMgY2hhbmdlZCwg
NzIgaW5zZXJ0aW9ucygrKSwgMyBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vZ21hNTAwL2Nkdl9pbnRlbF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vZ21h
NTAwL2Nkdl9pbnRlbF9kaXNwbGF5LmMKPiBpbmRleCA4Yjc4NDk0N2VkM2IuLjcxMDlkM2QxOWJl
MCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2Nkdl9pbnRlbF9kaXNwbGF5
LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2Nkdl9pbnRlbF9kaXNwbGF5LmMKPiBA
QCAtOTc5LDYgKzk3OSw3IEBAIGNvbnN0IHN0cnVjdCBkcm1fY3J0Y19mdW5jcyBjZHZfaW50ZWxf
Y3J0Y19mdW5jcyA9IHsKPiAgICAgICAgIC5nYW1tYV9zZXQgPSBnbWFfY3J0Y19nYW1tYV9zZXQs
Cj4gICAgICAgICAuc2V0X2NvbmZpZyA9IGdtYV9jcnRjX3NldF9jb25maWcsCj4gICAgICAgICAu
ZGVzdHJveSA9IGdtYV9jcnRjX2Rlc3Ryb3ksCj4gKyAgICAgICAucGFnZV9mbGlwID0gZ21hX2Ny
dGNfcGFnZV9mbGlwLAo+ICB9Owo+Cj4gIGNvbnN0IHN0cnVjdCBnbWFfY2xvY2tfZnVuY3MgY2R2
X2Nsb2NrX2Z1bmNzID0gewo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2dt
YV9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2dtYV9kaXNwbGF5LmMKPiBpbmRl
eCBiYzA3YWUyYTlhMWQuLjE3ZjEzNjk4NWQyMSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vZ21hNTAwL2dtYV9kaXNwbGF5LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2dt
YV9kaXNwbGF5LmMKPiBAQCAtNTAzLDYgKzUwMyw1MiBAQCB2b2lkIGdtYV9jcnRjX2Rlc3Ryb3ko
c3RydWN0IGRybV9jcnRjICpjcnRjKQo+ICAgICAgICAga2ZyZWUoZ21hX2NydGMpOwo+ICB9Cj4K
PiAraW50IGdtYV9jcnRjX3BhZ2VfZmxpcChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4gKyAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiwKPiArICAgICAgICAg
ICAgICAgICAgICAgIHN0cnVjdCBkcm1fcGVuZGluZ192YmxhbmtfZXZlbnQgKmV2ZW50LAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgcGFnZV9mbGlwX2ZsYWdzLAo+ICsgICAgICAg
ICAgICAgICAgICAgICAgc3RydWN0IGRybV9tb2Rlc2V0X2FjcXVpcmVfY3R4ICpjdHgpCj4gK3sK
PiArICAgICAgIHN0cnVjdCBnbWFfY3J0YyAqZ21hX2NydGMgPSB0b19nbWFfY3J0YyhjcnRjKTsK
PiArICAgICAgIHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmN1cnJlbnRfZmIgPSBjcnRjLT5wcmlt
YXJ5LT5mYjsKPiArICAgICAgIHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKm9sZF9mYiA9IGNydGMt
PnByaW1hcnktPm9sZF9mYjsKPiArICAgICAgIGNvbnN0IHN0cnVjdCBkcm1fY3J0Y19oZWxwZXJf
ZnVuY3MgKmNydGNfZnVuY3MgPSBjcnRjLT5oZWxwZXJfcHJpdmF0ZTsKPiArICAgICAgIHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYgPSBjcnRjLT5kZXY7Cj4gKyAgICAgICB1bnNpZ25lZCBsb25nIGZs
YWdzOwo+ICsgICAgICAgaW50IHJldDsKPiArCj4gKyAgICAgICBpZiAoIWNydGNfZnVuY3MtPm1v
ZGVfc2V0X2Jhc2UpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ICsKPiArICAg
ICAgIC8qIFVzaW5nIG1vZGVfc2V0X2Jhc2UgcmVxdWlyZXMgdGhlIG5ldyBmYiB0byBiZSBzZXQg
YWxyZWFkeS4gKi8KPiArICAgICAgIGNydGMtPnByaW1hcnktPmZiID0gZmI7Cj4gKwo+ICsgICAg
ICAgaWYgKGV2ZW50KSB7Cj4gKyAgICAgICAgICAgICAgIHNwaW5fbG9ja19pcnFzYXZlKCZkZXYt
PmV2ZW50X2xvY2ssIGZsYWdzKTsKPiArCj4gKyAgICAgICAgICAgICAgIFdBUk5fT04oZHJtX2Ny
dGNfdmJsYW5rX2dldChjcnRjKSAhPSAwKTsKPiArCj4gKyAgICAgICAgICAgICAgIGdtYV9jcnRj
LT5wYWdlX2ZsaXBfZXZlbnQgPSBldmVudDsKPiArCj4gKyAgICAgICAgICAgICAgIC8qIENhbGwg
dGhpcyBsb2NrZWQgaWYgd2Ugd2FudCBhbiBldmVudCBhdCB2YmxhbmsgaW50ZXJydXB0LiAqLwo+
ICsgICAgICAgICAgICAgICByZXQgPSBjcnRjX2Z1bmNzLT5tb2RlX3NldF9iYXNlKGNydGMsIGNy
dGMtPngsIGNydGMtPnksIG9sZF9mYik7Cj4gKyAgICAgICAgICAgICAgIGlmIChyZXQpIHsKPiAr
ICAgICAgICAgICAgICAgICAgICAgICBnbWFfY3J0Yy0+cGFnZV9mbGlwX2V2ZW50ID0gTlVMTDsK
PiArICAgICAgICAgICAgICAgICAgICAgICBkcm1fY3J0Y192YmxhbmtfcHV0KGNydGMpOwo+ICsg
ICAgICAgICAgICAgICB9Cj4gKwo+ICsgICAgICAgICAgICAgICBzcGluX3VubG9ja19pcnFyZXN0
b3JlKCZkZXYtPmV2ZW50X2xvY2ssIGZsYWdzKTsKPiArICAgICAgIH0gZWxzZSB7Cj4gKyAgICAg
ICAgICAgICAgIHJldCA9IGNydGNfZnVuY3MtPm1vZGVfc2V0X2Jhc2UoY3J0YywgY3J0Yy0+eCwg
Y3J0Yy0+eSwgb2xkX2ZiKTsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICAvKiBSZXN0b3JlIHBy
ZXZpb3VzIGZiIGluIGNhc2Ugb2YgZmFpbHVyZS4gKi8KPiArICAgICAgIGlmIChyZXQpCj4gKyAg
ICAgICAgICAgICAgIGNydGMtPnByaW1hcnktPmZiID0gY3VycmVudF9mYjsKPiArCj4gKyAgICAg
ICByZXR1cm4gcmV0Owo+ICt9Cj4gKwo+ICBpbnQgZ21hX2NydGNfc2V0X2NvbmZpZyhzdHJ1Y3Qg
ZHJtX21vZGVfc2V0ICpzZXQsCj4gICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRybV9t
b2Rlc2V0X2FjcXVpcmVfY3R4ICpjdHgpCj4gIHsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2dtYTUwMC9nbWFfZGlzcGxheS5oIGIvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9nbWFfZGlz
cGxheS5oCj4gaW5kZXggZmRiZDdlY2FhNTljLi43YmQ2YzFlZThiMjEgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9nbWFfZGlzcGxheS5oCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2dtYTUwMC9nbWFfZGlzcGxheS5oCj4gQEAgLTExLDYgKzExLDcgQEAKPiAgI2RlZmluZSBf
R01BX0RJU1BMQVlfSF8KPgo+ICAjaW5jbHVkZSA8bGludXgvcG1fcnVudGltZS5oPgo+ICsjaW5j
bHVkZSA8ZHJtL2RybV92YmxhbmsuaD4KPgo+ICBzdHJ1Y3QgZHJtX2VuY29kZXI7Cj4gIHN0cnVj
dCBkcm1fbW9kZV9zZXQ7Cj4gQEAgLTcxLDYgKzcyLDExIEBAIGV4dGVybiB2b2lkIGdtYV9jcnRj
X3ByZXBhcmUoc3RydWN0IGRybV9jcnRjICpjcnRjKTsKPiAgZXh0ZXJuIHZvaWQgZ21hX2NydGNf
Y29tbWl0KHN0cnVjdCBkcm1fY3J0YyAqY3J0Yyk7Cj4gIGV4dGVybiB2b2lkIGdtYV9jcnRjX2Rp
c2FibGUoc3RydWN0IGRybV9jcnRjICpjcnRjKTsKPiAgZXh0ZXJuIHZvaWQgZ21hX2NydGNfZGVz
dHJveShzdHJ1Y3QgZHJtX2NydGMgKmNydGMpOwo+ICtleHRlcm4gaW50IGdtYV9jcnRjX3BhZ2Vf
ZmxpcChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc3RydWN0IGRybV9wZW5kaW5nX3ZibGFua19ldmVudCAqZXZlbnQsCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgcGFnZV9mbGlwX2ZsYWdzLAo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkcm1fbW9kZXNldF9hY3F1aXJlX2N0eCAqY3R4
KTsKPiAgZXh0ZXJuIGludCBnbWFfY3J0Y19zZXRfY29uZmlnKHN0cnVjdCBkcm1fbW9kZV9zZXQg
KnNldCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRybV9tb2Rlc2V0
X2FjcXVpcmVfY3R4ICpjdHgpOwo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9nbWE1
MDAvcHNiX2ludGVsX2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvcHNiX2ludGVs
X2Rpc3BsYXkuYwo+IGluZGV4IDQyNTY0MTA1MzVmMC4uZmVkM2I1NjNlNjJlIDEwMDY0NAo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvcHNiX2ludGVsX2Rpc3BsYXkuYwo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9nbWE1MDAvcHNiX2ludGVsX2Rpc3BsYXkuYwo+IEBAIC00MzIsNiArNDMy
LDcgQEAgY29uc3Qgc3RydWN0IGRybV9jcnRjX2Z1bmNzIHBzYl9pbnRlbF9jcnRjX2Z1bmNzID0g
ewo+ICAgICAgICAgLmdhbW1hX3NldCA9IGdtYV9jcnRjX2dhbW1hX3NldCwKPiAgICAgICAgIC5z
ZXRfY29uZmlnID0gZ21hX2NydGNfc2V0X2NvbmZpZywKPiAgICAgICAgIC5kZXN0cm95ID0gZ21h
X2NydGNfZGVzdHJveSwKPiArICAgICAgIC5wYWdlX2ZsaXAgPSBnbWFfY3J0Y19wYWdlX2ZsaXAs
Cj4gIH07Cj4KPiAgY29uc3Qgc3RydWN0IGdtYV9jbG9ja19mdW5jcyBwc2JfY2xvY2tfZnVuY3Mg
PSB7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvcHNiX2ludGVsX2Rydi5o
IGIvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9wc2JfaW50ZWxfZHJ2LmgKPiBpbmRleCBjZGYxMDMz
M2QxYzIuLjE2YzYxMzZmNzc4YiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZ21hNTAw
L3BzYl9pbnRlbF9kcnYuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvcHNiX2ludGVs
X2Rydi5oCj4gQEAgLTEyLDYgKzEyLDcgQEAKPiAgI2luY2x1ZGUgPGRybS9kcm1fY3J0Y19oZWxw
ZXIuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fZW5jb2Rlci5oPgo+ICAjaW5jbHVkZSA8ZHJtL2Ry
bV9wcm9iZV9oZWxwZXIuaD4KPiArI2luY2x1ZGUgPGRybS9kcm1fdmJsYW5rLmg+Cj4gICNpbmNs
dWRlIDxsaW51eC9ncGlvLmg+Cj4gICNpbmNsdWRlICJnbWFfZGlzcGxheS5oIgo+Cj4gQEAgLTE4
Miw2ICsxODMsOCBAQCBzdHJ1Y3QgZ21hX2NydGMgewo+ICAgICAgICAgc3RydWN0IHBzYl9pbnRl
bF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlOwo+Cj4gICAgICAgICBjb25zdCBzdHJ1Y3QgZ21hX2Ns
b2NrX2Z1bmNzICpjbG9ja19mdW5jczsKPiArCj4gKyAgICAgICBzdHJ1Y3QgZHJtX3BlbmRpbmdf
dmJsYW5rX2V2ZW50ICpwYWdlX2ZsaXBfZXZlbnQ7Cj4gIH07Cj4KPiAgI2RlZmluZSB0b19nbWFf
Y3J0Yyh4KSBcCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvcHNiX2lycS5j
IGIvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9wc2JfaXJxLmMKPiBpbmRleCBlNjI2NWZiODU2MjYu
LmY3ODdhNTFmNjMzNSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL3BzYl9p
cnEuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvcHNiX2lycS5jCj4gQEAgLTE2NSwx
MSArMTY1LDIzIEBAIHN0YXRpYyB2b2lkIG1pZF9waXBlX2V2ZW50X2hhbmRsZXIoc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwgaW50IHBpcGUpCj4gICAgICAgICAgICAgICAgICIlcywgY2FuJ3QgY2xl
YXIgc3RhdHVzIGJpdHMgZm9yIHBpcGUgJWQsIGl0cyB2YWx1ZSA9IDB4JXguXG4iLAo+ICAgICAg
ICAgICAgICAgICBfX2Z1bmNfXywgcGlwZSwgUFNCX1JWREMzMihwaXBlX3N0YXRfcmVnKSk7Cj4K
PiAtICAgICAgIGlmIChwaXBlX3N0YXRfdmFsICYgUElQRV9WQkxBTktfU1RBVFVTKQo+IC0gICAg
ICAgICAgICAgICBkcm1faGFuZGxlX3ZibGFuayhkZXYsIHBpcGUpOwo+ICsgICAgICAgaWYgKHBp
cGVfc3RhdF92YWwgJiBQSVBFX1ZCTEFOS19TVEFUVVMgfHwKPiArICAgICAgICAgICAoSVNfTUZM
RChkZXYpICYmIHBpcGVfc3RhdF92YWwgJiBQSVBFX1RFX1NUQVRVUykpIHsKPiArICAgICAgICAg
ICAgICAgc3RydWN0IGRybV9jcnRjICpjcnRjID0gZHJtX2NydGNfZnJvbV9pbmRleChkZXYsIHBp
cGUpOwo+ICsgICAgICAgICAgICAgICBzdHJ1Y3QgZ21hX2NydGMgKmdtYV9jcnRjID0gdG9fZ21h
X2NydGMoY3J0Yyk7Cj4gKyAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgZmxhZ3M7Cj4KPiAt
ICAgICAgIGlmIChwaXBlX3N0YXRfdmFsICYgUElQRV9URV9TVEFUVVMpCj4gICAgICAgICAgICAg
ICAgIGRybV9oYW5kbGVfdmJsYW5rKGRldiwgcGlwZSk7Cj4gKwo+ICsgICAgICAgICAgICAgICBz
cGluX2xvY2tfaXJxc2F2ZSgmZGV2LT5ldmVudF9sb2NrLCBmbGFncyk7Cj4gKyAgICAgICAgICAg
ICAgIGlmIChnbWFfY3J0Yy0+cGFnZV9mbGlwX2V2ZW50KSB7Cj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgZHJtX2NydGNfc2VuZF92YmxhbmtfZXZlbnQoY3J0YywKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbWFfY3J0Yy0+cGFnZV9mbGlwX2V2
ZW50KTsKPiArICAgICAgICAgICAgICAgICAgICAgICBnbWFfY3J0Yy0+cGFnZV9mbGlwX2V2ZW50
ID0gTlVMTDsKPiArICAgICAgICAgICAgICAgICAgICAgICBkcm1fY3J0Y192YmxhbmtfcHV0KGNy
dGMpOwo+ICsgICAgICAgICAgICAgICB9Cj4gKyAgICAgICAgICAgICAgIHNwaW5fdW5sb2NrX2ly
cXJlc3RvcmUoJmRldi0+ZXZlbnRfbG9jaywgZmxhZ3MpOwo+ICsgICAgICAgfQo+ICB9Cj4KPiAg
LyoKPiAtLQo+IDIuMjMuMAo+CgpMb29rcyBnb29kIQoKUmV2aWV3ZWQtYnk6IFBhdHJpayBKYWtv
YnNzb24gPHBhdHJpay5yLmpha29ic3NvbkBnbWFpbC5jb20+Cl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
