Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E1D7C10998E
	for <lists+dri-devel@lfdr.de>; Tue, 26 Nov 2019 08:26:02 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 475CE6E216;
	Tue, 26 Nov 2019 07:25:54 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C64236E21B
 for <dri-devel@lists.freedesktop.org>; Tue, 26 Nov 2019 07:25:50 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 46B6CB281;
 Tue, 26 Nov 2019 07:25:49 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: airlied@redhat.com, daniel@ffwll.ch, john.p.donnelly@oracle.com,
 kraxel@redhat.com, sam@ravnborg.org
Subject: [PATCH 3/4] drm/mgag200: Add workaround for HW that does not support
 'startadd'
Date: Tue, 26 Nov 2019 08:25:44 +0100
Message-Id: <20191126072545.22663-4-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191126072545.22663-1-tzimmermann@suse.de>
References: <20191126072545.22663-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlcmUncyBhdCBsZWFzdCBvbmUgc3lzdGVtIHRoYXQgZG9lcyBub3QgaW50ZXJwcmV0IHRoZSB2
YWx1ZSBvZgp0aGUgZGV2aWNlJ3MgJ3N0YXJ0YWRkJyBmaWVsZCBjb3JyZWN0bHksIHdoaWNoIGxl
YWRzIHRvIGluY29ycmVjdGx5CmRpc3BsYXllZCBzY2Fub3V0IGJ1ZmZlcnMuIEFsd2F5cyBwbGFj
aW5nIHRoZSBhY3RpdmUgc2Nhbm91dCBidWZmZXIKYXQgb2Zmc2V0IDAgd29ya3MgYXJvdW5kIHRo
ZSBwcm9ibGVtLgoKU2lnbmVkLW9mZi1ieTogVGhvbWFzIFppbW1lcm1hbm4gPHR6aW1tZXJtYW5u
QHN1c2UuZGU+ClJlcG9ydGVkLWJ5OiBKb2huIERvbm5lbGx5IDxqb2huLnAuZG9ubmVsbHlAb3Jh
Y2xlLmNvbT4KTGluazogaHR0cHM6Ly9naXRsYWIuZnJlZWRlc2t0b3Aub3JnL2RybS9taXNjL2lz
c3Vlcy83Ci0tLQogZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9kcnYuYyB8IDM2ICsr
KysrKysrKysrKysrKysrKysrKysrKysrLQogZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIw
MF9kcnYuaCB8ICAzICsrKwogMiBmaWxlcyBjaGFuZ2VkLCAzOCBpbnNlcnRpb25zKCspLCAxIGRl
bGV0aW9uKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9k
cnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL21nYWcyMDBfZHJ2LmMKaW5kZXggMzk3Zjhi
MGE5YWY4Li5kNDM5NTFjYWVlYTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAw
L21nYWcyMDBfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9kcnYu
YwpAQCAtMzAsNiArMzAsOCBAQCBtb2R1bGVfcGFyYW1fbmFtZWQobW9kZXNldCwgbWdhZzIwMF9t
b2Rlc2V0LCBpbnQsIDA0MDApOwogc3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIGRyaXZlcjsKIAog
c3RhdGljIGNvbnN0IHN0cnVjdCBwY2lfZGV2aWNlX2lkIHBjaWlkbGlzdFtdID0geworCXsgUENJ
X1ZFTkRPUl9JRF9NQVRST1gsIDB4NTIyLCBQQ0lfVkVORE9SX0lEX1NVTiwgMHg0ODUyLCAwLCAw
LAorCQlHMjAwX1NFX0EgfCBNR0FHMjAwX0ZMQUdfSFdfQlVHX05PX1NUQVJUQUREfSwKIAl7IFBD
SV9WRU5ET1JfSURfTUFUUk9YLCAweDUyMiwgUENJX0FOWV9JRCwgUENJX0FOWV9JRCwgMCwgMCwg
RzIwMF9TRV9BIH0sCiAJeyBQQ0lfVkVORE9SX0lEX01BVFJPWCwgMHg1MjQsIFBDSV9BTllfSUQs
IFBDSV9BTllfSUQsIDAsIDAsIEcyMDBfU0VfQiB9LAogCXsgUENJX1ZFTkRPUl9JRF9NQVRST1gs
IDB4NTMwLCBQQ0lfQU5ZX0lELCBQQ0lfQU5ZX0lELCAwLCAwLCBHMjAwX0VWIH0sCkBAIC02MCw2
ICs2MiwzNSBAQCBzdGF0aWMgdm9pZCBtZ2FfcGNpX3JlbW92ZShzdHJ1Y3QgcGNpX2RldiAqcGRl
dikKIAogREVGSU5FX0RSTV9HRU1fRk9QUyhtZ2FnMjAwX2RyaXZlcl9mb3BzKTsKIAorc3RhdGlj
IGJvb2wgbWdhZzIwMF9waW5fYm9fYXRfMChjb25zdCBzdHJ1Y3QgbWdhX2RldmljZSAqbWRldikK
K3sKKwlyZXR1cm4gbWRldi0+ZmxhZ3MgJiBNR0FHMjAwX0ZMQUdfSFdfQlVHX05PX1NUQVJUQURE
OworfQorCitpbnQgbWdhZzIwMF9kcml2ZXJfZHVtYl9jcmVhdGUoc3RydWN0IGRybV9maWxlICpm
aWxlLAorCQkJICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCisJCQkgICAgICAgc3RydWN0
IGRybV9tb2RlX2NyZWF0ZV9kdW1iICphcmdzKQoreworCXN0cnVjdCBtZ2FfZGV2aWNlICptZGV2
ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwl1bnNpZ25lZCBsb25nIHBnX2FsaWduOworCisJaWYgKFdB
Uk5fT05DRSghZGV2LT52cmFtX21tLCAiVlJBTSBNTSBub3QgaW5pdGlhbGl6ZWQiKSkKKwkJcmV0
dXJuIC1FSU5WQUw7CisKKwlwZ19hbGlnbiA9IDB1bDsKKworCS8qCisJICogQWxpZ25pbmcgc2Nh
bm91dCBidWZmZXJzIHRvIHRoZSBzaXplIG9mIHRoZSB2aWRlbyByYW0gZm9yY2VzCisJICogcGxh
Y2VtZW50IGF0IG9mZnNldCAwLiBXb3JrcyBhcm91bmQgYSBidWcgd2hlcmUgSFcgZG9lcyBub3QK
KwkgKiByZXNwZWN0ICdzdGFydGFkZCcgZmllbGQuCisJICovCisJaWYgKG1nYWcyMDBfcGluX2Jv
X2F0XzAobWRldikpCisJCXBnX2FsaWduID0gUEZOX1VQKG1kZXYtPm1jLnZyYW1fc2l6ZSk7CisK
KwlyZXR1cm4gZHJtX2dlbV92cmFtX2ZpbGxfY3JlYXRlX2R1bWIoZmlsZSwgZGV2LCAmZGV2LT52
cmFtX21tLT5iZGV2LAorCQkJCQkgICAgIHBnX2FsaWduLCBmYWxzZSwgYXJncyk7Cit9CisKIHN0
YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBkcml2ZXIgPSB7CiAJLmRyaXZlcl9mZWF0dXJlcyA9IERS
SVZFUl9HRU0gfCBEUklWRVJfTU9ERVNFVCwKIAkubG9hZCA9IG1nYWcyMDBfZHJpdmVyX2xvYWQs
CkBAIC03MSw3ICsxMDIsMTAgQEAgc3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIGRyaXZlciA9IHsK
IAkubWFqb3IgPSBEUklWRVJfTUFKT1IsCiAJLm1pbm9yID0gRFJJVkVSX01JTk9SLAogCS5wYXRj
aGxldmVsID0gRFJJVkVSX1BBVENITEVWRUwsCi0JRFJNX0dFTV9WUkFNX0RSSVZFUgorCS5kZWJ1
Z2ZzX2luaXQgPSBkcm1fdnJhbV9tbV9kZWJ1Z2ZzX2luaXQsCisJLmR1bWJfY3JlYXRlID0gbWdh
ZzIwMF9kcml2ZXJfZHVtYl9jcmVhdGUsCisJLmR1bWJfbWFwX29mZnNldCA9IGRybV9nZW1fdnJh
bV9kcml2ZXJfZHVtYl9tbWFwX29mZnNldCwKKwkuZ2VtX3ByaW1lX21tYXAgPSBkcm1fZ2VtX3By
aW1lX21tYXAsCiB9OwogCiBzdGF0aWMgc3RydWN0IHBjaV9kcml2ZXIgbWdhZzIwMF9wY2lfZHJp
dmVyID0gewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9kcnYu
aCBiL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL21nYWcyMDBfZHJ2LmgKaW5kZXggNGI0ZjljZTc0
YTg0Li5hYTMyYWFkMjIyYzIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL21n
YWcyMDBfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9kcnYuaApA
QCAtMTUwLDYgKzE1MCw5IEBAIGVudW0gbWdhX3R5cGUgewogCUcyMDBfRVczLAogfTsKIAorLyog
SFcgZG9lcyBub3QgaGFuZGxlICdzdGFydGFkZCcgZmllbGQgY29ycmVjdC4gKi8KKyNkZWZpbmUg
TUdBRzIwMF9GTEFHX0hXX0JVR19OT19TVEFSVEFERAkoMXVsIDw8IDgpCisKICNkZWZpbmUgTUdB
RzIwMF9UWVBFX01BU0sJKDB4MDAwMDAwZmYpCiAjZGVmaW5lIE1HQUcyMDBfRkxBR19NQVNLCSgw
eDAwZmZmZjAwKQogCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2RyaS1kZXZlbA==
