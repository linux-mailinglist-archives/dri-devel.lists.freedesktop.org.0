Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9EBB010F065
	for <lists+dri-devel@lfdr.de>; Mon,  2 Dec 2019 20:33:56 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id ABAA96E2F3;
	Mon,  2 Dec 2019 19:33:46 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9DA5E6E2EF
 for <dri-devel@lists.freedesktop.org>; Mon,  2 Dec 2019 19:33:44 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: aratiu) with ESMTPSA id 15D9028FB3D
From: Adrian Ratiu <adrian.ratiu@collabora.com>
To: devicetree@vger.kernel.org, linux-arm-kernel@lists.infradead.org,
 linux-stm32@st-md-mailman.stormreply.com,
 linux-rockchip@lists.infradead.org
Subject: [PATCH v4 2/4] drm: bridge: dw_mipi_dsi: abstract register access
 using reg_fields
Date: Mon,  2 Dec 2019 21:33:57 +0200
Message-Id: <20191202193359.703709-3-adrian.ratiu@collabora.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191202193359.703709-1-adrian.ratiu@collabora.com>
References: <20191202193359.703709-1-adrian.ratiu@collabora.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 Boris Brezillon <boris.brezillon@collabora.com>, linux-imx@nxp.com,
 kernel@collabora.com, Emil Velikov <emil.velikov@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UmVnaXN0ZXIgZXhpc3RlbmNlLCBhZGRyZXNzL29mZnNldHMsIGZpZWxkIGxheW91dHMsIHJlc2Vy
dmVkIGJpdHMgYW5kCnNvIG9uIGRpZmZlciBiZXR3ZWVuIE1JUEktRFNJIHZlcnNpb25zIGFuZCBi
ZXR3ZWVuIFNvQyB2ZW5kb3IgYm9hcmRzLgpEZXNwaXRlIHRoZXNlIGRpZmZlcmVuY2VzIHRoZSBo
dyBJUCBhbmQgcHJvdG9jb2xzIGFyZSBtb3N0bHkgdGhlIHNhbWUKc28gdGhlIGdlbmVyaWMgZHJp
dmVyIGNhbiBiZSBtYWRlIHRvIGNvbXBlbnNhdGUgdGhlc2UgZGlmZmVyZW5jZXMuCgpUaGUgY3Vy
cmVudCBSb2NrY2hpcCBhbmQgU1RNIGRyaXZlcnMgaGFyZGNvZGVkIGEgbG90IG9mIHRoZWlyIGNv
bW1vbgpkZWZpbml0aW9ucyBpbiB0aGUgYnJpZGdlIGNvZGUgYmVjYXVzZSB0aGV5J3JlIGJhc2Vk
IG9uIERTSSB2MS4zMCBhbmQKMS4zMSB3aGljaCBhcmUgcmVsYXRpdmVseSBjbG9zZSwgYnV0IGlu
IG9yZGVyIHRvIHN1cHBvcnQgb2xkZXIvZnV0dXJlCnZlcnNpb25zIHdpdGggbW9yZSBkaXZlcmdp
bmcgbGF5b3V0cyBsaWtlIHRoZSB2MS4wMSBwcmVzZW50IG9uIGlteDYsCndlIGFic3RyYWN0IHNv
bWUgb2YgdGhlIHJlZ2lzdGVyIGFjY2Vzc2VzIHZpYSB0aGUgcmVnbWFwIGZpZWxkIEFQSXMuCgpU
aGUgYnJpZGdlIGRldGVjdHMgdGhlIERTSSBjb3JlIHZlcnNpb24gYW5kIGluaXRpYWxpemVzIHRo
ZSByZXF1aXJlZApyZWdtYXAgcmVnaXN0ZXIgbGF5b3V0LCBzbyBwbGF0Zm9ybSBkcml2ZXJzIHdp
bGwgY29udGludWUgdG8gdXNlIHRoZQpyZWdtYXAgYXMgYmVmb3JlLiBPdGhlciBEU0kgdmVyc2lv
bnMgLyByZWdpc3RlciBsYXlvdXRzIGNhbiBlYXNpbHkgYmUKYWRkZWQgaW4gdGhlIGZ1dHVyZSBi
eSBvbmx5IGNoYW5naW5nIHRoZSBicmlkZ2UgY29kZS4KCkFuIGFkZGl0aW9uYWwgYmVuZWZpdCBv
ZiB1c2luZyB0aGUgcmVnX2ZpZWxkIEFQSSBpcyB0aGF0IG11Y2ggb2YgdGhlCmJpdC1zaGlmdGlu
ZyBhbmQgbWFza2luZyBib2lsZXJwbGF0ZSBpcyByZW1vdmVkIGJlY2F1c2UgaXQncyBub3cKaGFu
ZGxlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZSByZWdtYXAgc3Vic3lzdGVtLgoKTm90IGFsbCByZWdp
c3RlciBhY2Nlc3NlcyBoYXZlIGJlZW4gY29udmVydGVkOiBvbmx5IHRoZSBtaW5pbXVtIGRpZmYK
YmV0d2VlbiB0aGUgdGhyZWUgaG9zdCBjb250cm9sbGVyIHZlcnNpb25zIHN1cHBvcnRlZCBieSB0
aGUgY3VycmVudAp2ZW5kb3IgcGxhdGZvcm0gZHJpdmVycyAocm9ja2NoaXAsIHN0bSBhbmQgbm93
IGlteCksIG1vcmUgY2FuIGJlIGFkZGVkCmluIHRoZSBmdXR1cmUgYXMgbmVlZGVkLgoKU3VnZ2Vz
dGVkLWJ5OiBCb3JpcyBCcmV6aWxsb24gPGJvcmlzLmJyZXppbGxvbkBjb2xsYWJvcmEuY29tPgpS
ZXZpZXdlZC1ieTogRW1pbCBWZWxpa292IDxlbWlsLnZlbGlrb3ZAY29sbGFib3JhLmNvbT4KU2ln
bmVkLW9mZi1ieTogQWRyaWFuIFJhdGl1IDxhZHJpYW4ucmF0aXVAY29sbGFib3JhLmNvbT4KLS0t
CiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LW1pcGktZHNpLmMgfCA1MDQgKysr
KysrKysrKysrLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgMzQ2IGluc2VydGlvbnMoKyksIDE1OCBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lz
L2R3LW1pcGktZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LW1pcGkt
ZHNpLmMKaW5kZXggNmNiNTc4MDdmM2Y5Li5hNDFhNjMwMzAyYjYgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctbWlwaS1kc2kuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LW1pcGktZHNpLmMKQEAgLTQ3LDcgKzQ3LDYgQEAKICNk
ZWZpbmUgRFBJX1ZDSUQodmNpZCkJCQkoKHZjaWQpICYgMHgzKQogCiAjZGVmaW5lIERTSV9EUElf
Q09MT1JfQ09ESU5HCQkweDEwCi0jZGVmaW5lIExPT1NFTFkxOF9FTgkJCUJJVCg4KQogI2RlZmlu
ZSBEUElfQ09MT1JfQ09ESU5HXzE2QklUXzEJMHgwCiAjZGVmaW5lIERQSV9DT0xPUl9DT0RJTkdf
MTZCSVRfMgkweDEKICNkZWZpbmUgRFBJX0NPTE9SX0NPRElOR18xNkJJVF8zCTB4MgpAQCAtNTYs
MTEgKzU1LDYgQEAKICNkZWZpbmUgRFBJX0NPTE9SX0NPRElOR18yNEJJVAkJMHg1CiAKICNkZWZp
bmUgRFNJX0RQSV9DRkdfUE9MCQkJMHgxNAotI2RlZmluZSBDT0xPUk1fQUNUSVZFX0xPVwkJQklU
KDQpCi0jZGVmaW5lIFNIVVREX0FDVElWRV9MT1cJCUJJVCgzKQotI2RlZmluZSBIU1lOQ19BQ1RJ
VkVfTE9XCQlCSVQoMikKLSNkZWZpbmUgVlNZTkNfQUNUSVZFX0xPVwkJQklUKDEpCi0jZGVmaW5l
IERBVEFFTl9BQ1RJVkVfTE9XCQlCSVQoMCkKIAogI2RlZmluZSBEU0lfRFBJX0xQX0NNRF9USU0J
CTB4MTgKICNkZWZpbmUgT1VUVkFDVF9MUENNRF9USU1FKHApCQkoKChwKSAmIDB4ZmYpIDw8IDE2
KQpAQCAtODEsMjcgKzc1LDE5IEBACiAjZGVmaW5lIERTSV9HRU5fVkNJRAkJCTB4MzAKIAogI2Rl
ZmluZSBEU0lfTU9ERV9DRkcJCQkweDM0Ci0jZGVmaW5lIEVOQUJMRV9WSURFT19NT0RFCQkwCi0j
ZGVmaW5lIEVOQUJMRV9DTURfTU9ERQkJCUJJVCgwKQogCiAjZGVmaW5lIERTSV9WSURfTU9ERV9D
RkcJCTB4MzgKLSNkZWZpbmUgRU5BQkxFX0xPV19QT1dFUgkJKDB4M2YgPDwgOCkKLSNkZWZpbmUg
RU5BQkxFX0xPV19QT1dFUl9NQVNLCQkoMHgzZiA8PCA4KQorI2RlZmluZSBFTkFCTEVfTE9XX1BP
V0VSCQkweDNmCisKICNkZWZpbmUgVklEX01PREVfVFlQRV9OT05fQlVSU1RfU1lOQ19QVUxTRVMJ
MHgwCiAjZGVmaW5lIFZJRF9NT0RFX1RZUEVfTk9OX0JVUlNUX1NZTkNfRVZFTlRTCTB4MQogI2Rl
ZmluZSBWSURfTU9ERV9UWVBFX0JVUlNUCQkJMHgyCi0jZGVmaW5lIFZJRF9NT0RFX1RZUEVfTUFT
SwkJCTB4MwotI2RlZmluZSBWSURfTU9ERV9WUEdfRU5BQkxFCQlCSVQoMTYpCi0jZGVmaW5lIFZJ
RF9NT0RFX1ZQR19IT1JJWk9OVEFMCQlCSVQoMjQpCiAKICNkZWZpbmUgRFNJX1ZJRF9QS1RfU0la
RQkJMHgzYwotI2RlZmluZSBWSURfUEtUX1NJWkUocCkJCQkoKHApICYgMHgzZmZmKQogCiAjZGVm
aW5lIERTSV9WSURfTlVNX0NIVU5LUwkJMHg0MAotI2RlZmluZSBWSURfTlVNX0NIVU5LUyhjKQkJ
KChjKSAmIDB4MWZmZikKIAogI2RlZmluZSBEU0lfVklEX05VTExfU0laRQkJMHg0NAotI2RlZmlu
ZSBWSURfTlVMTF9TSVpFKGIpCQkoKGIpICYgMHgxZmZmKQogCiAjZGVmaW5lIERTSV9WSURfSFNB
X1RJTUUJCTB4NDgKICNkZWZpbmUgRFNJX1ZJRF9IQlBfVElNRQkJMHg0YwpAQCAtMTI1LDcgKzEx
MSw2IEBACiAjZGVmaW5lIEdFTl9TV18yUF9UWF9MUAkJCUJJVCgxMCkKICNkZWZpbmUgR0VOX1NX
XzFQX1RYX0xQCQkJQklUKDkpCiAjZGVmaW5lIEdFTl9TV18wUF9UWF9MUAkJCUJJVCg4KQotI2Rl
ZmluZSBBQ0tfUlFTVF9FTgkJCUJJVCgxKQogI2RlZmluZSBURUFSX0ZYX0VOCQkJQklUKDApCiAK
ICNkZWZpbmUgQ01EX01PREVfQUxMX0xQCQkJKE1BWF9SRF9QS1RfU0laRV9MUCB8IFwKQEAgLTE1
NCw4ICsxMzksNiBAQAogI2RlZmluZSBHRU5fQ01EX0VNUFRZCQkJQklUKDApCiAKICNkZWZpbmUg
RFNJX1RPX0NOVF9DRkcJCQkweDc4Ci0jZGVmaW5lIEhTVFhfVE9fQ05UKHApCQkJKCgocCkgJiAw
eGZmZmYpIDw8IDE2KQotI2RlZmluZSBMUFJYX1RPX0NOVChwKQkJCSgocCkgJiAweGZmZmYpCiAK
ICNkZWZpbmUgRFNJX0hTX1JEX1RPX0NOVAkJMHg3YwogI2RlZmluZSBEU0lfTFBfUkRfVE9fQ05U
CQkweDgwCkBAIC0xNjQsNTIgKzE0NywxNyBAQAogI2RlZmluZSBEU0lfQlRBX1RPX0NOVAkJCTB4
OGMKIAogI2RlZmluZSBEU0lfTFBDTEtfQ1RSTAkJCTB4OTQKLSNkZWZpbmUgQVVUT19DTEtMQU5F
X0NUUkwJCUJJVCgxKQotI2RlZmluZSBQSFlfVFhSRVFVRVNUQ0xLSFMJCUJJVCgwKQotCiAjZGVm
aW5lIERTSV9QSFlfVE1SX0xQQ0xLX0NGRwkJMHg5OAotI2RlZmluZSBQSFlfQ0xLSFMyTFBfVElN
RShsYmNjKQkJKCgobGJjYykgJiAweDNmZikgPDwgMTYpCi0jZGVmaW5lIFBIWV9DTEtMUDJIU19U
SU1FKGxiY2MpCQkoKGxiY2MpICYgMHgzZmYpCi0KICNkZWZpbmUgRFNJX1BIWV9UTVJfQ0ZHCQkJ
MHg5YwotI2RlZmluZSBQSFlfSFMyTFBfVElNRShsYmNjKQkJKCgobGJjYykgJiAweGZmKSA8PCAy
NCkKLSNkZWZpbmUgUEhZX0xQMkhTX1RJTUUobGJjYykJCSgoKGxiY2MpICYgMHhmZikgPDwgMTYp
Ci0jZGVmaW5lIE1BWF9SRF9USU1FKGxiY2MpCQkoKGxiY2MpICYgMHg3ZmZmKQotI2RlZmluZSBQ
SFlfSFMyTFBfVElNRV9WMTMxKGxiY2MpCSgoKGxiY2MpICYgMHgzZmYpIDw8IDE2KQotI2RlZmlu
ZSBQSFlfTFAySFNfVElNRV9WMTMxKGxiY2MpCSgobGJjYykgJiAweDNmZikKLQogI2RlZmluZSBE
U0lfUEhZX1JTVFoJCQkweGEwCi0jZGVmaW5lIFBIWV9ESVNGT1JDRVBMTAkJCTAKLSNkZWZpbmUg
UEhZX0VORk9SQ0VQTEwJCQlCSVQoMykKLSNkZWZpbmUgUEhZX0RJU0FCTEVDTEsJCQkwCi0jZGVm
aW5lIFBIWV9FTkFCTEVDTEsJCQlCSVQoMikKLSNkZWZpbmUgUEhZX1JTVFoJCQkwCi0jZGVmaW5l
IFBIWV9VTlJTVFoJCQlCSVQoMSkKLSNkZWZpbmUgUEhZX1NIVVRET1dOWgkJCTAKLSNkZWZpbmUg
UEhZX1VOU0hVVERPV05aCQkJQklUKDApCi0KICNkZWZpbmUgRFNJX1BIWV9JRl9DRkcJCQkweGE0
Ci0jZGVmaW5lIFBIWV9TVE9QX1dBSVRfVElNRShjeWNsZSkJKCgoY3ljbGUpICYgMHhmZikgPDwg
OCkKLSNkZWZpbmUgTl9MQU5FUyhuKQkJCSgoKG4pIC0gMSkgJiAweDMpCi0KLSNkZWZpbmUgRFNJ
X1BIWV9VTFBTX0NUUkwJCTB4YTgKLSNkZWZpbmUgRFNJX1BIWV9UWF9UUklHR0VSUwkJMHhhYwog
CiAjZGVmaW5lIERTSV9QSFlfU1RBVFVTCQkJMHhiMAogI2RlZmluZSBQSFlfU1RPUF9TVEFURV9D
TEtfTEFORQkJQklUKDIpCiAjZGVmaW5lIFBIWV9MT0NLCQkJQklUKDApCiAKICNkZWZpbmUgRFNJ
X1BIWV9UU1RfQ1RSTDAJCTB4YjQKLSNkZWZpbmUgUEhZX1RFU1RDTEsJCQlCSVQoMSkKLSNkZWZp
bmUgUEhZX1VOVEVTVENMSwkJCTAKLSNkZWZpbmUgUEhZX1RFU1RDTFIJCQlCSVQoMCkKLSNkZWZp
bmUgUEhZX1VOVEVTVENMUgkJCTAKLQogI2RlZmluZSBEU0lfUEhZX1RTVF9DVFJMMQkJMHhiOAot
I2RlZmluZSBQSFlfVEVTVEVOCQkJQklUKDE2KQotI2RlZmluZSBQSFlfVU5URVNURU4JCQkwCi0j
ZGVmaW5lIFBIWV9URVNURE9VVChuKQkJCSgoKG4pICYgMHhmZikgPDwgOCkKLSNkZWZpbmUgUEhZ
X1RFU1RESU4obikJCQkoKG4pICYgMHhmZikKIAogI2RlZmluZSBEU0lfSU5UX1NUMAkJCTB4YmMK
ICNkZWZpbmUgRFNJX0lOVF9TVDEJCQkweGMwCkBAIC0yMTcsNyArMTY1LDYgQEAKICNkZWZpbmUg
RFNJX0lOVF9NU0sxCQkJMHhjOAogCiAjZGVmaW5lIERTSV9QSFlfVE1SX1JEX0NGRwkJMHhmNAot
I2RlZmluZSBNQVhfUkRfVElNRV9WMTMxKGxiY2MpCQkoKGxiY2MpICYgMHg3ZmZmKQogCiAjZGVm
aW5lIFBIWV9TVEFUVVNfVElNRU9VVF9VUwkJMTAwMDAKICNkZWZpbmUgQ01EX1BLVF9TVEFUVVNf
VElNRU9VVF9VUwkyMDAwMApAQCAtMjM2LDYgKzE4Myw3IEBAIHN0cnVjdCBkd19taXBpX2RzaSB7
CiAJdTMyIGxhbmVzOwogCXUzMiBmb3JtYXQ7CiAJdW5zaWduZWQgbG9uZyBtb2RlX2ZsYWdzOwor
CXUzMiBod192ZXJzaW9uOwogCiAjaWZkZWYgQ09ORklHX0RFQlVHX0ZTCiAJc3RydWN0IGRlbnRy
eSAqZGVidWdmczsKQEAgLTI0OCw2ICsxOTYsNTMgQEAgc3RydWN0IGR3X21pcGlfZHNpIHsKIAlz
dHJ1Y3QgZHdfbWlwaV9kc2kgKnNsYXZlOyAvKiBkdWFsLWRzaSBzbGF2ZSBwdHIgKi8KIAogCWNv
bnN0IHN0cnVjdCBkd19taXBpX2RzaV9wbGF0X2RhdGEgKnBsYXRfZGF0YTsKKworCXN0cnVjdCBy
ZWdtYXBfZmllbGQJKmZpZWxkX2RwaV8xOGxvb3NlbHlfZW47CisJc3RydWN0IHJlZ21hcF9maWVs
ZAkqZmllbGRfZHBpX2NvbG9yX2NvZGluZzsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF9k
cGlfdmlkOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX2RwaV92c3luY19hY3RpdmVfbG93
OworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX2RwaV9oc3luY19hY3RpdmVfbG93OworCXN0
cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX2NtZF9tb2RlX2Fja19ycXN0X2VuOworCXN0cnVjdCBy
ZWdtYXBfZmllbGQJKmZpZWxkX2NtZF9tb2RlX2FsbF9scF9lbjsKKwlzdHJ1Y3QgcmVnbWFwX2Zp
ZWxkCSpmaWVsZF9jbWRfbW9kZV9lbjsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF9jbWRf
cGt0X3N0YXR1czsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF92aWRfbW9kZV9lbjsKKwlz
dHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF92aWRfbW9kZV90eXBlOworCXN0cnVjdCByZWdtYXBf
ZmllbGQJKmZpZWxkX3ZpZF9tb2RlX2xvd19wb3dlcjsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpm
aWVsZF92aWRfbW9kZV92cGdfZW47CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfdmlkX21v
ZGVfdnBnX2hvcml6OworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX3ZpZF9wa3Rfc2l6ZTsK
KwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF92aWRfaHNhX3RpbWU7CisJc3RydWN0IHJlZ21h
cF9maWVsZAkqZmllbGRfdmlkX2hicF90aW1lOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxk
X3ZpZF9obGluZV90aW1lOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX3ZpZF92c2FfdGlt
ZTsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF92aWRfdmJwX3RpbWU7CisJc3RydWN0IHJl
Z21hcF9maWVsZAkqZmllbGRfdmlkX3ZmcF90aW1lOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZp
ZWxkX3ZpZF92YWN0aXZlX3RpbWU7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfcGh5X3R4
cmVxdWVzdGNsa2hzOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX3BoeV9idGFfdGltZTsK
KwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF9waHlfbWF4X3JkX3RpbWU7CisJc3RydWN0IHJl
Z21hcF9maWVsZAkqZmllbGRfcGh5X2xwMmhzX3RpbWU7CisJc3RydWN0IHJlZ21hcF9maWVsZAkq
ZmllbGRfcGh5X2hzMmxwX3RpbWU7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfcGh5X2Ns
a2xwMmhzX3RpbWU7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfcGh5X2Nsa2hzMmxwX3Rp
bWU7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfcGh5X3Rlc3RjbHI7CisJc3RydWN0IHJl
Z21hcF9maWVsZAkqZmllbGRfcGh5X3Vuc2h1dGRvd256OworCXN0cnVjdCByZWdtYXBfZmllbGQJ
KmZpZWxkX3BoeV91bnJzdHo7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfcGh5X2VuYWJs
ZWNsazsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF9waHlfZm9yY2VwbGw7CisJc3RydWN0
IHJlZ21hcF9maWVsZAkqZmllbGRfcGh5X25sYW5lczsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpm
aWVsZF9waHlfc3RvcF93YWl0X3RpbWU7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfcGh5
X3N0YXR1czsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF9wY2toZGxfY2ZnOworCXN0cnVj
dCByZWdtYXBfZmllbGQJKmZpZWxkX2hzdHhfdGltZW91dF9jb3VudGVyOworCXN0cnVjdCByZWdt
YXBfZmllbGQJKmZpZWxkX2xwcnhfdGltZW91dF9jb3VudGVyOworCXN0cnVjdCByZWdtYXBfZmll
bGQJKmZpZWxkX2ludF9zdGF0MDsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF9pbnRfc3Rh
dDE7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfaW50X21hc2swOworCXN0cnVjdCByZWdt
YXBfZmllbGQJKmZpZWxkX2ludF9tYXNrMTsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF9n
ZW5faGRyOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX2dlbl9wYXlsb2FkOwogfTsKIAog
c3RhdGljIGNvbnN0IHN0cnVjdCByZWdtYXBfY29uZmlnIGR3X21pcGlfZHNpX3JlZ21hcF9jZmcg
PSB7CkBAIC0yNTcsNiArMjUyLDExMSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHJlZ21hcF9jb25m
aWcgZHdfbWlwaV9kc2lfcmVnbWFwX2NmZyA9IHsKIAkubmFtZSA9ICJkdy1taXBpLWRzaSIsCiB9
OwogCitzdHJ1Y3QgZHdfbWlwaV9kc2lfdmFyaWFudCB7CisJLyogUmVnbWFwIGZpZWxkIGNvbmZp
Z3MgZm9yIERTSSBhZGFwdGVyICovCisJc3RydWN0IHJlZ19maWVsZAljZmdfZHBpXzE4bG9vc2Vs
eV9lbjsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19kcGlfY29sb3JfY29kaW5nOworCXN0cnVjdCBy
ZWdfZmllbGQJY2ZnX2RwaV92aWQ7CisJc3RydWN0IHJlZ19maWVsZAljZmdfZHBpX3ZzeW5jX2Fj
dGl2ZV9sb3c7CisJc3RydWN0IHJlZ19maWVsZAljZmdfZHBpX2hzeW5jX2FjdGl2ZV9sb3c7CisJ
c3RydWN0IHJlZ19maWVsZAljZmdfY21kX21vZGVfZW47CisJc3RydWN0IHJlZ19maWVsZAljZmdf
Y21kX21vZGVfYWNrX3Jxc3RfZW47CisJc3RydWN0IHJlZ19maWVsZAljZmdfY21kX21vZGVfYWxs
X2xwX2VuOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX2NtZF9wa3Rfc3RhdHVzOworCXN0cnVjdCBy
ZWdfZmllbGQJY2ZnX3ZpZF9tb2RlX2VuOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3ZpZF9tb2Rl
X3R5cGU7CisJc3RydWN0IHJlZ19maWVsZAljZmdfdmlkX21vZGVfbG93X3Bvd2VyOworCXN0cnVj
dCByZWdfZmllbGQJY2ZnX3ZpZF9tb2RlX3ZwZ19lbjsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ192
aWRfbW9kZV92cGdfaG9yaXo7CisJc3RydWN0IHJlZ19maWVsZAljZmdfdmlkX3BrdF9zaXplOwor
CXN0cnVjdCByZWdfZmllbGQJY2ZnX3ZpZF9oc2FfdGltZTsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNm
Z192aWRfaGJwX3RpbWU7CisJc3RydWN0IHJlZ19maWVsZAljZmdfdmlkX2hsaW5lX3RpbWU7CisJ
c3RydWN0IHJlZ19maWVsZAljZmdfdmlkX3ZzYV90aW1lOworCXN0cnVjdCByZWdfZmllbGQJY2Zn
X3ZpZF92YnBfdGltZTsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ192aWRfdmZwX3RpbWU7CisJc3Ry
dWN0IHJlZ19maWVsZAljZmdfdmlkX3ZhY3RpdmVfdGltZTsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNm
Z19waHlfdHhyZXF1ZXN0Y2xraHM7CisJc3RydWN0IHJlZ19maWVsZAljZmdfcGh5X2J0YV90aW1l
OworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3BoeV9tYXhfcmRfdGltZTsKKwlzdHJ1Y3QgcmVnX2Zp
ZWxkCWNmZ19waHlfbHAyaHNfdGltZTsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19waHlfaHMybHBf
dGltZTsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19waHlfbWF4X3JkX3RpbWVfdjEzMTsKKwlzdHJ1
Y3QgcmVnX2ZpZWxkCWNmZ19waHlfbHAyaHNfdGltZV92MTMxOworCXN0cnVjdCByZWdfZmllbGQJ
Y2ZnX3BoeV9oczJscF90aW1lX3YxMzE7CisJc3RydWN0IHJlZ19maWVsZAljZmdfcGh5X2Nsa2xw
MmhzX3RpbWU7CisJc3RydWN0IHJlZ19maWVsZAljZmdfcGh5X2Nsa2hzMmxwX3RpbWU7CisJc3Ry
dWN0IHJlZ19maWVsZAljZmdfcGh5X3Rlc3RjbHI7CisJc3RydWN0IHJlZ19maWVsZAljZmdfcGh5
X3Vuc2h1dGRvd256OworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3BoeV91bnJzdHo7CisJc3RydWN0
IHJlZ19maWVsZAljZmdfcGh5X2VuYWJsZWNsazsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19waHlf
Zm9yY2VwbGw7CisJc3RydWN0IHJlZ19maWVsZAljZmdfcGh5X25sYW5lczsKKwlzdHJ1Y3QgcmVn
X2ZpZWxkCWNmZ19waHlfc3RvcF93YWl0X3RpbWU7CisJc3RydWN0IHJlZ19maWVsZAljZmdfcGh5
X3N0YXR1czsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19wY2toZGxfY2ZnOworCXN0cnVjdCByZWdf
ZmllbGQJY2ZnX2hzdHhfdGltZW91dF9jb3VudGVyOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX2xw
cnhfdGltZW91dF9jb3VudGVyOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX2ludF9zdGF0MDsKKwlz
dHJ1Y3QgcmVnX2ZpZWxkCWNmZ19pbnRfc3RhdDE7CisJc3RydWN0IHJlZ19maWVsZAljZmdfaW50
X21hc2swOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX2ludF9tYXNrMTsKKwlzdHJ1Y3QgcmVnX2Zp
ZWxkCWNmZ19nZW5faGRyOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX2dlbl9wYXlsb2FkOworfTsK
Kworc3RhdGljIGNvbnN0IHN0cnVjdCBkd19taXBpX2RzaV92YXJpYW50IGR3X21pcGlfZHNpX3Yx
MzBfdjEzMV9sYXlvdXQgPSB7CisJLmNmZ19kcGlfY29sb3JfY29kaW5nID0JCVJFR19GSUVMRChE
U0lfRFBJX0NPTE9SX0NPRElORywgMCwgMyksCisJLmNmZ19kcGlfMThsb29zZWx5X2VuID0JCVJF
R19GSUVMRChEU0lfRFBJX0NPTE9SX0NPRElORywgOCwgOCksCisJLmNmZ19kcGlfdmlkID0JCQlS
RUdfRklFTEQoRFNJX0RQSV9WQ0lELCAwLCAyKSwKKwkuY2ZnX2RwaV92c3luY19hY3RpdmVfbG93
ID0JUkVHX0ZJRUxEKERTSV9EUElfQ0ZHX1BPTCwgMSwgMSksCisJLmNmZ19kcGlfaHN5bmNfYWN0
aXZlX2xvdyA9CVJFR19GSUVMRChEU0lfRFBJX0NGR19QT0wsIDIsIDIpLAorCS5jZmdfY21kX21v
ZGVfYWNrX3Jxc3RfZW4gPQlSRUdfRklFTEQoRFNJX0NNRF9NT0RFX0NGRywgMSwgMSksCisJLmNm
Z19jbWRfbW9kZV9hbGxfbHBfZW4gPQlSRUdfRklFTEQoRFNJX0NNRF9NT0RFX0NGRywgOCwgMjQp
LAorCS5jZmdfY21kX21vZGVfZW4gPQkJUkVHX0ZJRUxEKERTSV9NT0RFX0NGRywgMCwgMzEpLAor
CS5jZmdfY21kX3BrdF9zdGF0dXMgPQkJUkVHX0ZJRUxEKERTSV9DTURfUEtUX1NUQVRVUywgMCwg
MzEpLAorCS5jZmdfdmlkX21vZGVfZW4gPQkJUkVHX0ZJRUxEKERTSV9NT0RFX0NGRywgMCwgMzEp
LAorCS5jZmdfdmlkX21vZGVfdHlwZSA9CQlSRUdfRklFTEQoRFNJX1ZJRF9NT0RFX0NGRywgMCwg
MSksCisJLmNmZ192aWRfbW9kZV9sb3dfcG93ZXIgPQlSRUdfRklFTEQoRFNJX1ZJRF9NT0RFX0NG
RywgOCwgMTMpLAorCS5jZmdfdmlkX21vZGVfdnBnX2VuID0JCVJFR19GSUVMRChEU0lfVklEX01P
REVfQ0ZHLCAxNiwgMTYpLAorCS5jZmdfdmlkX21vZGVfdnBnX2hvcml6ID0JUkVHX0ZJRUxEKERT
SV9WSURfTU9ERV9DRkcsIDI0LCAyNCksCisJLmNmZ192aWRfcGt0X3NpemUgPQkJUkVHX0ZJRUxE
KERTSV9WSURfUEtUX1NJWkUsIDAsIDEwKSwKKwkuY2ZnX3ZpZF9oc2FfdGltZSA9CQlSRUdfRklF
TEQoRFNJX1ZJRF9IU0FfVElNRSwgMCwgMzEpLAorCS5jZmdfdmlkX2hicF90aW1lID0JCVJFR19G
SUVMRChEU0lfVklEX0hCUF9USU1FLCAwLCAzMSksCisJLmNmZ192aWRfaGxpbmVfdGltZSA9CQlS
RUdfRklFTEQoRFNJX1ZJRF9ITElORV9USU1FLCAwLCAzMSksCisJLmNmZ192aWRfdnNhX3RpbWUg
PQkJUkVHX0ZJRUxEKERTSV9WSURfVlNBX0xJTkVTLCAwLCAzMSksCisJLmNmZ192aWRfdmJwX3Rp
bWUgPQkJUkVHX0ZJRUxEKERTSV9WSURfVkJQX0xJTkVTLCAwLCAzMSksCisJLmNmZ192aWRfdmZw
X3RpbWUgPQkJUkVHX0ZJRUxEKERTSV9WSURfVkZQX0xJTkVTLCAwLCAzMSksCisJLmNmZ192aWRf
dmFjdGl2ZV90aW1lID0JCVJFR19GSUVMRChEU0lfVklEX1ZBQ1RJVkVfTElORVMsIDAsIDMxKSwK
KwkuY2ZnX3BoeV90eHJlcXVlc3RjbGtocyA9CVJFR19GSUVMRChEU0lfTFBDTEtfQ1RSTCwgMCwg
MCksCisJLmNmZ19waHlfYnRhX3RpbWUgPQkJUkVHX0ZJRUxEKERTSV9CVEFfVE9fQ05ULCAwLCAz
MSksCisJLmNmZ19waHlfbWF4X3JkX3RpbWUgPQkJUkVHX0ZJRUxEKERTSV9QSFlfVE1SX0NGRywg
MCwgMTUpLAorCS5jZmdfcGh5X2xwMmhzX3RpbWUgPQkJUkVHX0ZJRUxEKERTSV9QSFlfVE1SX0NG
RywgMTYsIDIzKSwKKwkuY2ZnX3BoeV9oczJscF90aW1lID0JCVJFR19GSUVMRChEU0lfUEhZX1RN
Ul9DRkcsIDI0LCAzMSksCisJLmNmZ19waHlfbWF4X3JkX3RpbWVfdjEzMSA9CVJFR19GSUVMRChE
U0lfUEhZX1RNUl9SRF9DRkcsIDAsIDE1KSwKKwkuY2ZnX3BoeV9scDJoc190aW1lX3YxMzEgPQlS
RUdfRklFTEQoRFNJX1BIWV9UTVJfQ0ZHLCAwLCAxNSksCisJLmNmZ19waHlfaHMybHBfdGltZV92
MTMxID0JUkVHX0ZJRUxEKERTSV9QSFlfVE1SX0NGRywgMTYsIDMxKSwKKwkuY2ZnX3BoeV9jbGts
cDJoc190aW1lID0JUkVHX0ZJRUxEKERTSV9QSFlfVE1SX0xQQ0xLX0NGRywgMCwgMTUpLAorCS5j
ZmdfcGh5X2Nsa2hzMmxwX3RpbWUgPQlSRUdfRklFTEQoRFNJX1BIWV9UTVJfTFBDTEtfQ0ZHLCAx
NiwgMzEpLAorCS5jZmdfcGh5X3Rlc3RjbHIgPQkJUkVHX0ZJRUxEKERTSV9QSFlfVFNUX0NUUkww
LCAwLCAwKSwKKwkuY2ZnX3BoeV91bnNodXRkb3dueiA9CQlSRUdfRklFTEQoRFNJX1BIWV9SU1Ra
LCAwLCAwKSwKKwkuY2ZnX3BoeV91bnJzdHogPQkJUkVHX0ZJRUxEKERTSV9QSFlfUlNUWiwgMSwg
MSksCisJLmNmZ19waHlfZW5hYmxlY2xrID0JCVJFR19GSUVMRChEU0lfUEhZX1JTVFosIDIsIDIp
LAorCS5jZmdfcGh5X2ZvcmNlcGxsID0JCVJFR19GSUVMRChEU0lfUEhZX1JTVFosIDMsIDMpLAor
CS5jZmdfcGh5X25sYW5lcyA9CQlSRUdfRklFTEQoRFNJX1BIWV9JRl9DRkcsIDAsIDEpLAorCS5j
ZmdfcGh5X3N0b3Bfd2FpdF90aW1lID0JUkVHX0ZJRUxEKERTSV9QSFlfSUZfQ0ZHLCA4LCAxNSks
CisJLmNmZ19waHlfc3RhdHVzID0JCVJFR19GSUVMRChEU0lfUEhZX1NUQVRVUywgMCwgMCksCisJ
LmNmZ19wY2toZGxfY2ZnID0JCVJFR19GSUVMRChEU0lfUENLSERMX0NGRywgMCwgNCksCisJLmNm
Z19oc3R4X3RpbWVvdXRfY291bnRlciA9CVJFR19GSUVMRChEU0lfVE9fQ05UX0NGRywgMTYsIDMx
KSwKKwkuY2ZnX2xwcnhfdGltZW91dF9jb3VudGVyID0JUkVHX0ZJRUxEKERTSV9UT19DTlRfQ0ZH
LCAwLCAxNSksCisJLmNmZ19pbnRfc3RhdDAgPQkJUkVHX0ZJRUxEKERTSV9JTlRfU1QwLCAwLCAz
MSksCisJLmNmZ19pbnRfc3RhdDEgPQkJUkVHX0ZJRUxEKERTSV9JTlRfU1QxLCAwLCAzMSksCisJ
LmNmZ19pbnRfbWFzazAgPQkJUkVHX0ZJRUxEKERTSV9JTlRfTVNLMCwgMCwgMzEpLAorCS5jZmdf
aW50X21hc2sxID0JCVJFR19GSUVMRChEU0lfSU5UX01TSzEsIDAsIDMxKSwKKwkuY2ZnX2dlbl9o
ZHIgPQkJCVJFR19GSUVMRChEU0lfR0VOX0hEUiwgMCwgMzEpLAorCS5jZmdfZ2VuX3BheWxvYWQg
PQkJUkVHX0ZJRUxEKERTSV9HRU5fUExEX0RBVEEsIDAsIDMxKSwKK307CisKIC8qCiAgKiBDaGVj
ayBpZiBlaXRoZXIgYSBsaW5rIHRvIGEgbWFzdGVyIG9yIHNsYXZlIGlzIHByZXNlbnQKICAqLwpA
QCAtMzU3LDE1ICs0NTcsMTYgQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9tZXNzYWdlX2NvbmZpZyhz
dHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwKIAkJCQkgICBjb25zdCBzdHJ1Y3QgbWlwaV9kc2lfbXNn
ICptc2cpCiB7CiAJYm9vbCBscG0gPSBtc2ctPmZsYWdzICYgTUlQSV9EU0lfTVNHX1VTRV9MUE07
Ci0JdTMyIHZhbCA9IDA7CisJdTMyIGNtZF9tb2RlX2xwID0gMDsKIAogCWlmIChtc2ctPmZsYWdz
ICYgTUlQSV9EU0lfTVNHX1JFUV9BQ0spCi0JCXZhbCB8PSBBQ0tfUlFTVF9FTjsKKwkJcmVnbWFw
X2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfY21kX21vZGVfYWNrX3Jxc3RfZW4sIDEpOworCiAJaWYg
KGxwbSkKLQkJdmFsIHw9IENNRF9NT0RFX0FMTF9MUDsKKwkJcmVnbWFwX2ZpZWxkX3dyaXRlKGRz
aS0+ZmllbGRfY21kX21vZGVfYWxsX2xwX2VuLAorCQkJCSAgIENNRF9NT0RFX0FMTF9MUCk7CiAK
LQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfTFBDTEtfQ1RSTCwgbHBtID8gMCA6IFBIWV9U
WFJFUVVFU1RDTEtIUyk7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX0NNRF9NT0RFX0NG
RywgdmFsKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9waHlfdHhyZXF1ZXN0Y2xr
aHMsIGxwbSA/IDAgOiAxKTsKIH0KIAogc3RhdGljIGludCBkd19taXBpX2RzaV9nZW5fcGt0X2hk
cl93cml0ZShzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwgdTMyIGhkcl92YWwpCkBAIC0zNzMsMTgg
KzQ3NCwxOCBAQCBzdGF0aWMgaW50IGR3X21pcGlfZHNpX2dlbl9wa3RfaGRyX3dyaXRlKHN0cnVj
dCBkd19taXBpX2RzaSAqZHNpLCB1MzIgaGRyX3ZhbCkKIAlpbnQgcmV0OwogCXUzMiB2YWwgPSAw
LCBtYXNrOwogCi0JcmV0ID0gcmVnbWFwX3JlYWRfcG9sbF90aW1lb3V0KGRzaS0+cmVncywgRFNJ
X0NNRF9QS1RfU1RBVFVTLAotCQkJCSAgICAgICB2YWwsICEodmFsICYgR0VOX0NNRF9GVUxMKSwg
MTAwMCwKLQkJCQkgICAgICAgQ01EX1BLVF9TVEFUVVNfVElNRU9VVF9VUyk7CisJcmV0ID0gcmVn
bWFwX2ZpZWxkX3JlYWRfcG9sbF90aW1lb3V0KGRzaS0+ZmllbGRfY21kX3BrdF9zdGF0dXMsCisJ
CQkJCSAgICAgdmFsLCAhKHZhbCAmIEdFTl9DTURfRlVMTCksCisJCQkJCSAgICAgMTAwMCwgQ01E
X1BLVF9TVEFUVVNfVElNRU9VVF9VUyk7CiAJaWYgKHJldCkgewogCQlkZXZfZXJyKGRzaS0+ZGV2
LCAiZmFpbGVkIHRvIGdldCBhdmFpbGFibGUgY29tbWFuZCBGSUZPXG4iKTsKIAkJcmV0dXJuIHJl
dDsKIAl9CiAKLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfR0VOX0hEUiwgaGRyX3ZhbCk7
CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfZ2VuX2hkciwgaGRyX3ZhbCk7CiAKIAlt
YXNrID0gR0VOX0NNRF9FTVBUWSB8IEdFTl9QTERfV19FTVBUWTsKLQlyZXQgPSByZWdtYXBfcmVh
ZF9wb2xsX3RpbWVvdXQoZHNpLT5yZWdzLCBEU0lfQ01EX1BLVF9TVEFUVVMsCisJcmV0ID0gcmVn
bWFwX2ZpZWxkX3JlYWRfcG9sbF90aW1lb3V0KGRzaS0+ZmllbGRfY21kX3BrdF9zdGF0dXMsCiAJ
CQkJICAgICAgIHZhbCwgKHZhbCAmIG1hc2spID09IG1hc2ssCiAJCQkJICAgICAgIDEwMDAsIENN
RF9QS1RfU1RBVFVTX1RJTUVPVVRfVVMpOwogCWlmIChyZXQpIHsKQEAgLTQwNywyMCArNTA4LDIy
IEBAIHN0YXRpYyBpbnQgZHdfbWlwaV9kc2lfd3JpdGUoc3RydWN0IGR3X21pcGlfZHNpICpkc2ks
CiAJCWlmIChsZW4gPCBwbGRfZGF0YV9ieXRlcykgewogCQkJd29yZCA9IDA7CiAJCQltZW1jcHko
JndvcmQsIHR4X2J1ZiwgbGVuKTsKLQkJCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9HRU5f
UExEX0RBVEEsCi0JCQkJICAgICBsZTMyX3RvX2NwdSh3b3JkKSk7CisJCQlyZWdtYXBfZmllbGRf
d3JpdGUoZHNpLT5maWVsZF9nZW5fcGF5bG9hZCwKKwkJCQkJICAgbGUzMl90b19jcHUod29yZCkp
OwogCQkJbGVuID0gMDsKIAkJfSBlbHNlIHsKIAkJCW1lbWNweSgmd29yZCwgdHhfYnVmLCBwbGRf
ZGF0YV9ieXRlcyk7Ci0JCQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfR0VOX1BMRF9EQVRB
LAotCQkJCSAgICAgbGUzMl90b19jcHUod29yZCkpOworCQkJcmVnbWFwX2ZpZWxkX3dyaXRlKGRz
aS0+ZmllbGRfZ2VuX3BheWxvYWQsCisJCQkJCSAgIGxlMzJfdG9fY3B1KHdvcmQpKTsKIAkJCXR4
X2J1ZiArPSBwbGRfZGF0YV9ieXRlczsKIAkJCWxlbiAtPSBwbGRfZGF0YV9ieXRlczsKIAkJfQog
Ci0JCXJldCA9IHJlZ21hcF9yZWFkX3BvbGxfdGltZW91dChkc2ktPnJlZ3MsIERTSV9DTURfUEtU
X1NUQVRVUywKLQkJCQkJICAgICAgIHZhbCwgISh2YWwgJiBHRU5fUExEX1dfRlVMTCksCi0JCQkJ
CSAgICAgICAxMDAwLCBDTURfUEtUX1NUQVRVU19USU1FT1VUX1VTKTsKKwkJcmV0ID0gcmVnbWFw
X2ZpZWxkX3JlYWRfcG9sbF90aW1lb3V0KGRzaS0+ZmllbGRfY21kX3BrdF9zdGF0dXMsCisJCQkJ
CQkgICAgIHZhbCwKKwkJCQkJCSAgICAgISh2YWwgJiBHRU5fUExEX1dfRlVMTCksCisJCQkJCQkg
ICAgIDEwMDAsCisJCQkJCQkgICAgIENNRF9QS1RfU1RBVFVTX1RJTUVPVVRfVVMpOwogCQlpZiAo
cmV0KSB7CiAJCQlkZXZfZXJyKGRzaS0+ZGV2LAogCQkJCSJmYWlsZWQgdG8gZ2V0IGF2YWlsYWJs
ZSB3cml0ZSBwYXlsb2FkIEZJRk9cbiIpOwpAQCAtNDQxLDkgKzU0NCw5IEBAIHN0YXRpYyBpbnQg
ZHdfbWlwaV9kc2lfcmVhZChzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwKIAl1MzIgdmFsID0gMDsK
IAogCS8qIFdhaXQgZW5kIG9mIHRoZSByZWFkIG9wZXJhdGlvbiAqLwotCXJldCA9IHJlZ21hcF9y
ZWFkX3BvbGxfdGltZW91dChkc2ktPnJlZ3MsIERTSV9DTURfUEtUX1NUQVRVUywKLQkJCQkgICAg
ICAgdmFsLCAhKHZhbCAmIEdFTl9SRF9DTURfQlVTWSksCi0JCQkJICAgICAgIDEwMDAsIENNRF9Q
S1RfU1RBVFVTX1RJTUVPVVRfVVMpOworCXJldCA9IHJlZ21hcF9maWVsZF9yZWFkX3BvbGxfdGlt
ZW91dChkc2ktPmZpZWxkX2NtZF9wa3Rfc3RhdHVzLAorCQkJCQkgICAgIHZhbCwgISh2YWwgJiBH
RU5fUkRfQ01EX0JVU1kpLAorCQkJCQkgICAgIDEwMDAsIENNRF9QS1RfU1RBVFVTX1RJTUVPVVRf
VVMpOwogCWlmIChyZXQpIHsKIAkJZGV2X2Vycihkc2ktPmRldiwgIlRpbWVvdXQgZHVyaW5nIHJl
YWQgb3BlcmF0aW9uXG4iKTsKIAkJcmV0dXJuIHJldDsKQEAgLTQ1MSwxNSArNTU0LDE3IEBAIHN0
YXRpYyBpbnQgZHdfbWlwaV9kc2lfcmVhZChzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwKIAogCWZv
ciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkgewogCQkvKiBSZWFkIGZpZm8gbXVzdCBub3QgYmUg
ZW1wdHkgYmVmb3JlIGFsbCBieXRlcyBhcmUgcmVhZCAqLwotCQlyZXQgPSByZWdtYXBfcmVhZF9w
b2xsX3RpbWVvdXQoZHNpLT5yZWdzLCBEU0lfQ01EX1BLVF9TVEFUVVMsCi0JCQkJCSAgICAgICB2
YWwsICEodmFsICYgR0VOX1BMRF9SX0VNUFRZKSwKLQkJCQkJICAgICAgIDEwMDAsIENNRF9QS1Rf
U1RBVFVTX1RJTUVPVVRfVVMpOworCQlyZXQgPSByZWdtYXBfZmllbGRfcmVhZF9wb2xsX3RpbWVv
dXQoZHNpLT5maWVsZF9jbWRfcGt0X3N0YXR1cywKKwkJCQkJCSAgICAgdmFsLAorCQkJCQkJICAg
ICAhKHZhbCAmIEdFTl9QTERfUl9FTVBUWSksCisJCQkJCQkgICAgIDEwMDAsCisJCQkJCQkgICAg
IENNRF9QS1RfU1RBVFVTX1RJTUVPVVRfVVMpOwogCQlpZiAocmV0KSB7CiAJCQlkZXZfZXJyKGRz
aS0+ZGV2LCAiUmVhZCBwYXlsb2FkIEZJRk8gaXMgZW1wdHlcbiIpOwogCQkJcmV0dXJuIHJldDsK
IAkJfQogCi0JCXJlZ21hcF9yZWFkKGRzaS0+cmVncywgRFNJX0dFTl9QTERfREFUQSwgJnZhbCk7
CisJCXJlZ21hcF9maWVsZF9yZWFkKGRzaS0+ZmllbGRfZ2VuX3BheWxvYWQsICZ2YWwpOwogCQlm
b3IgKGogPSAwOyBqIDwgNCAmJiBqICsgaSA8IGxlbjsgaisrKQogCQkJYnVmW2kgKyBqXSA9IHZh
bCA+PiAoOCAqIGopOwogCX0KQEAgLTUxMywzMCArNjE4LDMwIEBAIHN0YXRpYyBjb25zdCBzdHJ1
Y3QgbWlwaV9kc2lfaG9zdF9vcHMgZHdfbWlwaV9kc2lfaG9zdF9vcHMgPSB7CiAKIHN0YXRpYyB2
b2lkIGR3X21pcGlfZHNpX3ZpZGVvX21vZGVfY29uZmlnKHN0cnVjdCBkd19taXBpX2RzaSAqZHNp
KQogewotCXUzMiB2YWw7Ci0KIAkvKgogCSAqIFRPRE8gZHcgZHJ2IGltcHJvdmVtZW50cwogCSAq
IGVuYWJsaW5nIGxvdyBwb3dlciBpcyBwYW5lbC1kZXBlbmRlbnQsIHdlIHNob3VsZCB1c2UgdGhl
CiAJICogcGFuZWwgY29uZmlndXJhdGlvbiBoZXJlLi4uCiAJICovCi0JdmFsID0gRU5BQkxFX0xP
V19QT1dFUjsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF92aWRfbW9kZV9sb3dfcG93
ZXIsIEVOQUJMRV9MT1dfUE9XRVIpOwogCiAJaWYgKGRzaS0+bW9kZV9mbGFncyAmIE1JUElfRFNJ
X01PREVfVklERU9fQlVSU1QpCi0JCXZhbCB8PSBWSURfTU9ERV9UWVBFX0JVUlNUOworCQlyZWdt
YXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF92aWRfbW9kZV90eXBlLAorCQkJCSAgIFZJRF9NT0RF
X1RZUEVfQlVSU1QpOwogCWVsc2UgaWYgKGRzaS0+bW9kZV9mbGFncyAmIE1JUElfRFNJX01PREVf
VklERU9fU1lOQ19QVUxTRSkKLQkJdmFsIHw9IFZJRF9NT0RFX1RZUEVfTk9OX0JVUlNUX1NZTkNf
UFVMU0VTOworCQlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF92aWRfbW9kZV90eXBlLAor
CQkJCSAgIFZJRF9NT0RFX1RZUEVfTk9OX0JVUlNUX1NZTkNfUFVMU0VTKTsKIAllbHNlCi0JCXZh
bCB8PSBWSURfTU9ERV9UWVBFX05PTl9CVVJTVF9TWU5DX0VWRU5UUzsKKwkJcmVnbWFwX2ZpZWxk
X3dyaXRlKGRzaS0+ZmllbGRfdmlkX21vZGVfdHlwZSwKKwkJCQkgICBWSURfTU9ERV9UWVBFX05P
Tl9CVVJTVF9TWU5DX0VWRU5UUyk7CiAKICNpZmRlZiBDT05GSUdfREVCVUdfRlMKIAlpZiAoZHNp
LT52cGcpIHsKLQkJdmFsIHw9IFZJRF9NT0RFX1ZQR19FTkFCTEU7Ci0JCXZhbCB8PSBkc2ktPnZw
Z19ob3Jpem9udGFsID8gVklEX01PREVfVlBHX0hPUklaT05UQUwgOiAwOworCQlyZWdtYXBfZmll
bGRfd3JpdGUoZHNpLT5yZWdzLCBkc2ktPmZpZWxkX3ZpZF9tb2RlX3ZwZ19lbiwgMSk7CisJCXJl
Z21hcF9maWVsZF93cml0ZShkc2ktPnJlZ3MsIGRzaS0+ZmllbGRfdmlkX21vZGVfdnBnX2hvcml6
LAorCQkJCSAgIGRzaS0+dnBnX2hvcml6b250YWwgPyAxIDogMCk7CiAJfQogI2VuZGlmIC8qIENP
TkZJR19ERUJVR19GUyAqLwotCi0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1ZJRF9NT0RF
X0NGRywgdmFsKTsKIH0KIAogc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfc2V0X21vZGUoc3RydWN0
IGR3X21pcGlfZHNpICpkc2ksCkBAIC01NDUsMTEgKzY1MCwxMyBAQCBzdGF0aWMgdm9pZCBkd19t
aXBpX2RzaV9zZXRfbW9kZShzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwKIAlyZWdtYXBfd3JpdGUo
ZHNpLT5yZWdzLCBEU0lfUFdSX1VQLCBSRVNFVCk7CiAKIAlpZiAobW9kZV9mbGFncyAmIE1JUElf
RFNJX01PREVfVklERU8pIHsKLQkJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX01PREVfQ0ZH
LCBFTkFCTEVfVklERU9fTU9ERSk7CisJCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX2Nt
ZF9tb2RlX2VuLCAwKTsKKwogCQlkd19taXBpX2RzaV92aWRlb19tb2RlX2NvbmZpZyhkc2kpOwot
CQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfTFBDTEtfQ1RSTCwgUEhZX1RYUkVRVUVTVENM
S0hTKTsKKworCQlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9waHlfdHhyZXF1ZXN0Y2xr
aHMsIDEpOwogCX0gZWxzZSB7Ci0JCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9NT0RFX0NG
RywgRU5BQkxFX0NNRF9NT0RFKTsKKwkJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfY21k
X21vZGVfZW4sIDEpOwogCX0KIAogCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9QV1JfVVAs
IFBPV0VSVVApOwpAQCAtNTU4LDcgKzY2NSw3IEBAIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX3Nl
dF9tb2RlKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpLAogc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lf
ZGlzYWJsZShzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKIHsKIAlyZWdtYXBfd3JpdGUoZHNpLT5y
ZWdzLCBEU0lfUFdSX1VQLCBSRVNFVCk7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1BI
WV9SU1RaLCBQSFlfUlNUWik7CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfcGh5X3Vu
cnN0eiwgMCk7CiB9CiAKIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2luaXQoc3RydWN0IGR3X21p
cGlfZHNpICpkc2kpCkBAIC01ODcsMTQgKzY5NCwxNSBAQCBzdGF0aWMgdm9pZCBkd19taXBpX2Rz
aV9pbml0KHN0cnVjdCBkd19taXBpX2RzaSAqZHNpKQogc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lf
ZHBpX2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwKIAkJCQkgICBjb25zdCBzdHJ1Y3Qg
ZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKIHsKLQl1MzIgdmFsID0gMCwgY29sb3IgPSAwOworCXUz
MiBjb2xvciA9IDA7CiAKIAlzd2l0Y2ggKGRzaS0+Zm9ybWF0KSB7CiAJY2FzZSBNSVBJX0RTSV9G
TVRfUkdCODg4OgogCQljb2xvciA9IERQSV9DT0xPUl9DT0RJTkdfMjRCSVQ7CiAJCWJyZWFrOwog
CWNhc2UgTUlQSV9EU0lfRk1UX1JHQjY2NjoKLQkJY29sb3IgPSBEUElfQ09MT1JfQ09ESU5HXzE4
QklUXzIgfCBMT09TRUxZMThfRU47CisJCWNvbG9yID0gRFBJX0NPTE9SX0NPRElOR18xOEJJVF8y
OworCQlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9kcGlfMThsb29zZWx5X2VuLCAxKTsK
IAkJYnJlYWs7CiAJY2FzZSBNSVBJX0RTSV9GTVRfUkdCNjY2X1BBQ0tFRDoKIAkJY29sb3IgPSBE
UElfQ09MT1JfQ09ESU5HXzE4QklUXzE7CkBAIC02MDQsMTQgKzcxMiwxNSBAQCBzdGF0aWMgdm9p
ZCBkd19taXBpX2RzaV9kcGlfY29uZmlnKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpLAogCQlicmVh
azsKIAl9CiAKLQlpZiAobW9kZS0+ZmxhZ3MgJiBEUk1fTU9ERV9GTEFHX05WU1lOQykKLQkJdmFs
IHw9IFZTWU5DX0FDVElWRV9MT1c7Ci0JaWYgKG1vZGUtPmZsYWdzICYgRFJNX01PREVfRkxBR19O
SFNZTkMpCi0JCXZhbCB8PSBIU1lOQ19BQ1RJVkVfTE9XOworCXJlZ21hcF9maWVsZF93cml0ZShk
c2ktPmZpZWxkX2RwaV9jb2xvcl9jb2RpbmcsIGNvbG9yKTsKKworCWlmICghKG1vZGUtPmZsYWdz
ICYgRFJNX01PREVfRkxBR19OVlNZTkMpKQorCQlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVs
ZF9kcGlfdnN5bmNfYWN0aXZlX2xvdywgMSk7CisJaWYgKCEobW9kZS0+ZmxhZ3MgJiBEUk1fTU9E
RV9GTEFHX05IU1lOQykpCisJCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX2RwaV9oc3lu
Y19hY3RpdmVfbG93LCAxKTsKKworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX2RwaV92
aWQsIERQSV9WQ0lEKGRzaS0+Y2hhbm5lbCkpOwogCi0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywg
RFNJX0RQSV9WQ0lELCBEUElfVkNJRChkc2ktPmNoYW5uZWwpKTsKLQlyZWdtYXBfd3JpdGUoZHNp
LT5yZWdzLCBEU0lfRFBJX0NPTE9SX0NPRElORywgY29sb3IpOwotCXJlZ21hcF93cml0ZShkc2kt
PnJlZ3MsIERTSV9EUElfQ0ZHX1BPTCwgdmFsKTsKIAkvKgogCSAqIFRPRE8gZHcgZHJ2IGltcHJv
dmVtZW50cwogCSAqIGxhcmdlc3QgcGFja2V0IHNpemVzIGR1cmluZyBoZnAgb3IgZHVyaW5nIHZz
YS92cGIvdmZwCkBAIC02MjQsNyArNzMzLDggQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfZHBp
X2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwKIAogc3RhdGljIHZvaWQgZHdfbWlwaV9k
c2lfcGFja2V0X2hhbmRsZXJfY29uZmlnKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpKQogewotCXJl
Z21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9QQ0tIRExfQ0ZHLCBDUkNfUlhfRU4gfCBFQ0NfUlhf
RU4gfCBCVEFfRU4pOworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3Bja2hkbF9jZmcs
CisJCQkgICBDUkNfUlhfRU4gfCBFQ0NfUlhfRU4gfCBCVEFfRU4pOwogfQogCiBzdGF0aWMgdm9p
ZCBkd19taXBpX2RzaV92aWRlb19wYWNrZXRfY29uZmlnKHN0cnVjdCBkd19taXBpX2RzaSAqZHNp
LApAQCAtNjM3LDExICs3NDcsOSBAQCBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV92aWRlb19wYWNr
ZXRfY29uZmlnKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpLAogCSAqIERTSV9WTlBDUi5OUFNJWkUu
Li4gZXNwZWNpYWxseSBiZWNhdXNlIHRoaXMgZHJpdmVyIHN1cHBvcnRzCiAJICogbm9uLWJ1cnN0
IHZpZGVvIG1vZGVzLCBzZWUgZHdfbWlwaV9kc2lfdmlkZW9fbW9kZV9jb25maWcoKS4uLgogCSAq
LwotCi0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1ZJRF9QS1RfU0laRSwKLQkJICAgICAg
IGR3X21pcGlfaXNfZHVhbF9tb2RlKGRzaSkgPwotCQkJCVZJRF9QS1RfU0laRShtb2RlLT5oZGlz
cGxheSAvIDIpIDoKLQkJCQlWSURfUEtUX1NJWkUobW9kZS0+aGRpc3BsYXkpKTsKKwlyZWdtYXBf
ZmllbGRfd3JpdGUoZHNpLT5maWVsZF92aWRfcGt0X3NpemUsCisJCQkgICBkd19taXBpX2lzX2R1
YWxfbW9kZShkc2kpID8KKwkJCQltb2RlLT5oZGlzcGxheSAvIDIgOiBtb2RlLT5oZGlzcGxheSk7
CiB9CiAKIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2NvbW1hbmRfbW9kZV9jb25maWcoc3RydWN0
IGR3X21pcGlfZHNpICpkc2kpCkBAIC02NTEsMTUgKzc1OSwxNyBAQCBzdGF0aWMgdm9pZCBkd19t
aXBpX2RzaV9jb21tYW5kX21vZGVfY29uZmlnKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpKQogCSAq
IGNvbXB1dGUgaGlnaCBzcGVlZCB0cmFuc21pc3Npb24gY291bnRlciB0aW1lb3V0IGFjY29yZGlu
ZwogCSAqIHRvIHRoZSB0aW1lb3V0IGNsb2NrIGRpdmlzaW9uIChUT19DTEtfRElWSVNJT04pIGFu
ZCBieXRlIGxhbmUuLi4KIAkgKi8KLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfVE9fQ05U
X0NGRywKLQkJICAgICBIU1RYX1RPX0NOVCgxMDAwKSB8IExQUlhfVE9fQ05UKDEwMDApKTsKKwly
ZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9oc3R4X3RpbWVvdXRfY291bnRlciwgMTAwMCk7
CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfbHByeF90aW1lb3V0X2NvdW50ZXIsIDEw
MDApOworCiAJLyoKIAkgKiBUT0RPIGR3IGRydiBpbXByb3ZlbWVudHMKIAkgKiB0aGUgQnVzLVR1
cm4tQXJvdW5kIFRpbWVvdXQgQ291bnRlciBzaG91bGQgYmUgY29tcHV0ZWQKIAkgKiBhY2NvcmRp
bmcgdG8gYnl0ZSBsYW5lLi4uCiAJICovCi0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX0JU
QV9UT19DTlQsIDB4ZDAwKTsKLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfTU9ERV9DRkcs
IEVOQUJMRV9DTURfTU9ERSk7CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfcGh5X2J0
YV90aW1lLCAweGQwMCk7CisKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9jbWRfbW9k
ZV9lbiwgMSk7CiB9CiAKIC8qIEdldCBsYW5lIGJ5dGUgY2xvY2sgY3ljbGVzLiAqLwpAQCAtNjkz
LDEzICs4MDMsMTMgQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfbGluZV90aW1lcl9jb25maWco
c3RydWN0IGR3X21pcGlfZHNpICpkc2ksCiAJICogY29tcHV0YXRpb25zIGJlbG93IG1heSBiZSBp
bXByb3ZlZC4uLgogCSAqLwogCWxiY2MgPSBkd19taXBpX2RzaV9nZXRfaGNvbXBvbmVudF9sYmNj
KGRzaSwgbW9kZSwgaHRvdGFsKTsKLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfVklEX0hM
SU5FX1RJTUUsIGxiY2MpOworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3ZpZF9obGlu
ZV90aW1lLCBsYmNjKTsKIAogCWxiY2MgPSBkd19taXBpX2RzaV9nZXRfaGNvbXBvbmVudF9sYmNj
KGRzaSwgbW9kZSwgaHNhKTsKLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfVklEX0hTQV9U
SU1FLCBsYmNjKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF92aWRfaHNhX3RpbWUs
IGxiY2MpOwogCiAJbGJjYyA9IGR3X21pcGlfZHNpX2dldF9oY29tcG9uZW50X2xiY2MoZHNpLCBt
b2RlLCBoYnApOwotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9WSURfSEJQX1RJTUUsIGxi
Y2MpOworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3ZpZF9oYnBfdGltZSwgbGJjYyk7
CiB9CiAKIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX3ZlcnRpY2FsX3RpbWluZ19jb25maWcoc3Ry
dWN0IGR3X21pcGlfZHNpICpkc2ksCkBAIC03MTIsMTYgKzgyMiwxNCBAQCBzdGF0aWMgdm9pZCBk
d19taXBpX2RzaV92ZXJ0aWNhbF90aW1pbmdfY29uZmlnKHN0cnVjdCBkd19taXBpX2RzaSAqZHNp
LAogCXZmcCA9IG1vZGUtPnZzeW5jX3N0YXJ0IC0gbW9kZS0+dmRpc3BsYXk7CiAJdmJwID0gbW9k
ZS0+dnRvdGFsIC0gbW9kZS0+dnN5bmNfZW5kOwogCi0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywg
RFNJX1ZJRF9WQUNUSVZFX0xJTkVTLCB2YWN0aXZlKTsKLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdz
LCBEU0lfVklEX1ZTQV9MSU5FUywgdnNhKTsKLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lf
VklEX1ZGUF9MSU5FUywgdmZwKTsKLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfVklEX1ZC
UF9MSU5FUywgdmJwKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF92aWRfdmFjdGl2
ZV90aW1lLCB2YWN0aXZlKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF92aWRfdnNh
X3RpbWUsIHZzYSk7CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfdmlkX3ZmcF90aW1l
LCB2ZnApOworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3ZpZF92YnBfdGltZSwgdmJw
KTsKIH0KIAogc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfZHBoeV90aW1pbmdfY29uZmlnKHN0cnVj
dCBkd19taXBpX2RzaSAqZHNpKQogewotCXUzMiBod192ZXJzaW9uOwotCiAJLyoKIAkgKiBUT0RP
IGR3IGRydiBpbXByb3ZlbWVudHMKIAkgKiBkYXRhICYgY2xvY2sgbGFuZSB0aW1lcnMgc2hvdWxk
IGJlIGNvbXB1dGVkIGFjY29yZGluZyB0byBwYW5lbApAQCAtNzI5LDI1ICs4MzcsMTIgQEAgc3Rh
dGljIHZvaWQgZHdfbWlwaV9kc2lfZHBoeV90aW1pbmdfY29uZmlnKHN0cnVjdCBkd19taXBpX2Rz
aSAqZHNpKQogCSAqIG5vdGU6IERTSV9QSFlfVE1SX0NGRy5NQVhfUkRfVElNRSBzaG91bGQgYmUg
aW4gbGluZSB3aXRoCiAJICogRFNJX0NNRF9NT0RFX0NGRy5NQVhfUkRfUEtUX1NJWkVfTFAgKHNl
ZSBDTURfTU9ERV9BTExfTFApCiAJICovCisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRf
cGh5X2xwMmhzX3RpbWUsIDB4NDApOworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3Bo
eV9oczJscF90aW1lLCAweDQwKTsKIAotCXJlZ21hcF9yZWFkKGRzaS0+cmVncywgRFNJX1ZFUlNJ
T04sICZod192ZXJzaW9uKTsKLQlod192ZXJzaW9uICY9IFZFUlNJT047Ci0KLQlpZiAoaHdfdmVy
c2lvbiA+PSBIV1ZFUl8xMzEpIHsKLQkJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1BIWV9U
TVJfQ0ZHLAotCQkJICAgICBQSFlfSFMyTFBfVElNRV9WMTMxKDB4NDApIHwKLQkJCSAgICAgUEhZ
X0xQMkhTX1RJTUVfVjEzMSgweDQwKSk7Ci0JCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9Q
SFlfVE1SX1JEX0NGRywKLQkJCSAgICAgTUFYX1JEX1RJTUVfVjEzMSgxMDAwMCkpOwotCX0gZWxz
ZSB7Ci0JCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9QSFlfVE1SX0NGRywKLQkJCSAgICAg
UEhZX0hTMkxQX1RJTUUoMHg0MCkgfAotCQkJICAgICBQSFlfTFAySFNfVElNRSgweDQwKSB8Ci0J
CQkgICAgIE1BWF9SRF9USU1FKDEwMDAwKSk7Ci0JfQotCi0JcmVnbWFwX3dyaXRlKGRzaS0+cmVn
cywgRFNJX1BIWV9UTVJfTFBDTEtfQ0ZHLAotCQkgICAgIFBIWV9DTEtIUzJMUF9USU1FKDB4NDAp
IHwgUEhZX0NMS0xQMkhTX1RJTUUoMHg0MCkpOworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZp
ZWxkX3BoeV9tYXhfcmRfdGltZSwgMTAwMDApOworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZp
ZWxkX3BoeV9jbGtscDJoc190aW1lLCAweDQwKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5m
aWVsZF9waHlfY2xraHMybHBfdGltZSwgMHg0MCk7CiB9CiAKIHN0YXRpYyB2b2lkIGR3X21pcGlf
ZHNpX2RwaHlfaW50ZXJmYWNlX2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKQEAgLTc1
NywxOCArODUyLDIyIEBAIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2RwaHlfaW50ZXJmYWNlX2Nv
bmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKIAkgKiBzdG9wIHdhaXQgdGltZSBzaG91bGQg
YmUgdGhlIG1heGltdW0gYmV0d2VlbiBob3N0IGRzaQogCSAqIGFuZCBwYW5lbCBzdG9wIHdhaXQg
dGltZXMKIAkgKi8KLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfUEhZX0lGX0NGRywKLQkJ
ICAgICBQSFlfU1RPUF9XQUlUX1RJTUUoMHgyMCkgfCBOX0xBTkVTKGRzaS0+bGFuZXMpKTsKKwly
ZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9waHlfc3RvcF93YWl0X3RpbWUsIDB4MjApOwor
CXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3BoeV9ubGFuZXMsIGRzaS0+bGFuZXMgLSAx
KTsKIH0KIAogc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfZHBoeV9pbml0KHN0cnVjdCBkd19taXBp
X2RzaSAqZHNpKQogewogCS8qIENsZWFyIFBIWSBzdGF0ZSAqLwotCXJlZ21hcF93cml0ZShkc2kt
PnJlZ3MsIERTSV9QSFlfUlNUWiwgUEhZX0RJU0ZPUkNFUExMIHwgUEhZX0RJU0FCTEVDTEsKLQkJ
ICAgICB8IFBIWV9SU1RaIHwgUEhZX1NIVVRET1dOWik7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVn
cywgRFNJX1BIWV9UU1RfQ1RSTDAsIFBIWV9VTlRFU1RDTFIpOwotCXJlZ21hcF93cml0ZShkc2kt
PnJlZ3MsIERTSV9QSFlfVFNUX0NUUkwwLCBQSFlfVEVTVENMUik7Ci0JcmVnbWFwX3dyaXRlKGRz
aS0+cmVncywgRFNJX1BIWV9UU1RfQ1RSTDAsIFBIWV9VTlRFU1RDTFIpOworCXJlZ21hcF9maWVs
ZF93cml0ZShkc2ktPmZpZWxkX3BoeV9lbmFibGVjbGssIDApOworCXJlZ21hcF9maWVsZF93cml0
ZShkc2ktPmZpZWxkX3BoeV91bnJzdHosIDApOworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZp
ZWxkX3BoeV91bnNodXRkb3dueiwgMCk7CisKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVs
ZF9waHlfZm9yY2VwbGwsIDApOworCisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfcGh5
X3Rlc3RjbHIsIDApOworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3BoeV90ZXN0Y2xy
LCAxKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9waHlfdGVzdGNsciwgMCk7CiB9
CiAKIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2RwaHlfZW5hYmxlKHN0cnVjdCBkd19taXBpX2Rz
aSAqZHNpKQpAQCAtNzc2LDE4ICs4NzUsMjEgQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfZHBo
eV9lbmFibGUoc3RydWN0IGR3X21pcGlfZHNpICpkc2kpCiAJdTMyIHZhbCA9IDA7CiAJaW50IHJl
dDsKIAotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9QSFlfUlNUWiwgUEhZX0VORk9SQ0VQ
TEwgfCBQSFlfRU5BQkxFQ0xLIHwKLQkJICAgICBQSFlfVU5SU1RaIHwgUEhZX1VOU0hVVERPV05a
KTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9waHlfZW5hYmxlY2xrLCAxKTsKKwly
ZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9waHlfdW5yc3R6LCAxKTsKKwlyZWdtYXBfZmll
bGRfd3JpdGUoZHNpLT5maWVsZF9waHlfdW5zaHV0ZG93bnosIDEpOworCisJcmVnbWFwX2ZpZWxk
X3dyaXRlKGRzaS0+ZmllbGRfcGh5X2ZvcmNlcGxsLCAxKTsKIAotCXJldCA9IHJlZ21hcF9yZWFk
X3BvbGxfdGltZW91dChkc2ktPnJlZ3MsIERTSV9QSFlfU1RBVFVTLAotCQkJCSAgICAgICB2YWws
IHZhbCAmIFBIWV9MT0NLLAotCQkJCSAgICAgICAxMDAwLCBQSFlfU1RBVFVTX1RJTUVPVVRfVVMp
OworCXJldCA9IHJlZ21hcF9maWVsZF9yZWFkX3BvbGxfdGltZW91dChkc2ktPmZpZWxkX3BoeV9z
dGF0dXMsCisJCQkJCSAgICAgdmFsLCB2YWwgJiBQSFlfTE9DSywKKwkJCQkJICAgICAxMDAwLCBQ
SFlfU1RBVFVTX1RJTUVPVVRfVVMpOwogCWlmIChyZXQpCiAJCURSTV9ERUJVR19EUklWRVIoImZh
aWxlZCB0byB3YWl0IHBoeSBsb2NrIHN0YXRlXG4iKTsKIAotCXJldCA9IHJlZ21hcF9yZWFkX3Bv
bGxfdGltZW91dChkc2ktPnJlZ3MsIERTSV9QSFlfU1RBVFVTLAotCQkJCSAgICAgICB2YWwsIHZh
bCAmIFBIWV9TVE9QX1NUQVRFX0NMS19MQU5FLCAxMDAwLAotCQkJCSAgICAgICBQSFlfU1RBVFVT
X1RJTUVPVVRfVVMpOworCXJldCA9IHJlZ21hcF9maWVsZF9yZWFkX3BvbGxfdGltZW91dChkc2kt
PmZpZWxkX3BoeV9zdGF0dXMsCisJCQkJCSAgICAgdmFsLCB2YWwgJiBQSFlfU1RPUF9TVEFURV9D
TEtfTEFORSwKKwkJCQkJICAgICAxMDAwLCBQSFlfU1RBVFVTX1RJTUVPVVRfVVMpOwogCWlmIChy
ZXQpCiAJCURSTV9ERUJVR19EUklWRVIoImZhaWxlZCB0byB3YWl0IHBoeSBjbGsgbGFuZSBzdG9w
IHN0YXRlXG4iKTsKIH0KQEAgLTc5NiwxMCArODk4LDEwIEBAIHN0YXRpYyB2b2lkIGR3X21pcGlf
ZHNpX2NsZWFyX2VycihzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKIHsKIAl1MzIgdmFsOwogCi0J
cmVnbWFwX3JlYWQoZHNpLT5yZWdzLCBEU0lfSU5UX1NUMCwgJnZhbCk7Ci0JcmVnbWFwX3JlYWQo
ZHNpLT5yZWdzLCBEU0lfSU5UX1NUMSwgJnZhbCk7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywg
RFNJX0lOVF9NU0swLCAwKTsKLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfSU5UX01TSzEs
IDApOworCXJlZ21hcF9maWVsZF9yZWFkKGRzaS0+ZmllbGRfaW50X3N0YXQwLCAmdmFsKTsKKwly
ZWdtYXBfZmllbGRfcmVhZChkc2ktPmZpZWxkX2ludF9zdGF0MSwgJnZhbCk7CisJcmVnbWFwX2Zp
ZWxkX3dyaXRlKGRzaS0+ZmllbGRfaW50X21hc2swLCAwKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUo
ZHNpLT5maWVsZF9pbnRfbWFzazEsIDApOwogfQogCiBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9i
cmlkZ2VfcG9zdF9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCkBAIC05ODQsNiAr
MTA4Niw4NCBAQCBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9kZWJ1Z2ZzX3JlbW92ZShzdHJ1Y3Qg
ZHdfbWlwaV9kc2kgKmRzaSkgeyB9CiAKICNlbmRpZiAvKiBDT05GSUdfREVCVUdfRlMgKi8KIAor
c3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfZ2V0X2h3X3ZlcnNpb24oc3RydWN0IGR3X21pcGlfZHNp
ICpkc2kpCit7CisJcmVnbWFwX3JlYWQoZHNpLT5yZWdzLCBEU0lfVkVSU0lPTiwgJmRzaS0+aHdf
dmVyc2lvbik7CisJZHNpLT5od192ZXJzaW9uICY9IFZFUlNJT047CisJaWYgKCFkc2ktPmh3X3Zl
cnNpb24pCisJCWRldl9lcnIoZHNpLT5kZXYsICJGYWlsZWQgdG8gcmVhZCBEU0kgaHcgdmVyc2lv
biByZWdpc3RlclxuIik7Cit9CisKKyNkZWZpbmUgSU5JVF9GSUVMRChmKSBJTklUX0ZJRUxEX0NG
RyhmaWVsZF8jI2YsIGNmZ18jI2YpCisjZGVmaW5lIElOSVRfRklFTERfQ0ZHKGYsIGNvbmYpCQkJ
CQkJXAorCWRvIHsJCQkJCQkJCVwKKwkJZHNpLT5mID0gZGV2bV9yZWdtYXBfZmllbGRfYWxsb2Mo
ZHNpLT5kZXYsIGRzaS0+cmVncywJXAorCQkJCQkJIHZhcmlhbnQtPmNvbmYpOwlcCisJCWlmIChJ
U19FUlIoZHNpLT5mKSkJCQkJCVwKKwkJCWRldl93YXJuKGRzaS0+ZGV2LCAiSWdub3JpbmcgcmVn
bWFwIGZpZWxkICIgI2YgIlxuIik7IFwKKwl9IHdoaWxlICgwKQorCitzdGF0aWMgaW50IGR3X21p
cGlfZHNpX3JlZ21hcF9maWVsZHNfaW5pdChzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKK3sKKwlj
b25zdCBzdHJ1Y3QgZHdfbWlwaV9kc2lfdmFyaWFudCAqdmFyaWFudCA9ICZkd19taXBpX2RzaV92
MTMwX3YxMzFfbGF5b3V0OworCisJSU5JVF9GSUVMRChkcGlfMThsb29zZWx5X2VuKTsKKwlJTklU
X0ZJRUxEKGRwaV92aWQpOworCUlOSVRfRklFTEQoZHBpX2NvbG9yX2NvZGluZyk7CisJSU5JVF9G
SUVMRChkcGlfdnN5bmNfYWN0aXZlX2xvdyk7CisJSU5JVF9GSUVMRChkcGlfaHN5bmNfYWN0aXZl
X2xvdyk7CisJSU5JVF9GSUVMRChjbWRfbW9kZV9hY2tfcnFzdF9lbik7CisJSU5JVF9GSUVMRChj
bWRfbW9kZV9hbGxfbHBfZW4pOworCUlOSVRfRklFTEQoY21kX21vZGVfZW4pOworCUlOSVRfRklF
TEQoY21kX3BrdF9zdGF0dXMpOworCUlOSVRfRklFTEQodmlkX21vZGVfZW4pOworCUlOSVRfRklF
TEQodmlkX21vZGVfdHlwZSk7CisJSU5JVF9GSUVMRCh2aWRfbW9kZV9sb3dfcG93ZXIpOworCUlO
SVRfRklFTEQodmlkX3BrdF9zaXplKTsKKwlJTklUX0ZJRUxEKHZpZF9oc2FfdGltZSk7CisJSU5J
VF9GSUVMRCh2aWRfaGJwX3RpbWUpOworCUlOSVRfRklFTEQodmlkX2hsaW5lX3RpbWUpOworCUlO
SVRfRklFTEQodmlkX3ZzYV90aW1lKTsKKwlJTklUX0ZJRUxEKHZpZF92YnBfdGltZSk7CisJSU5J
VF9GSUVMRCh2aWRfdmZwX3RpbWUpOworCUlOSVRfRklFTEQodmlkX3ZhY3RpdmVfdGltZSk7CisJ
SU5JVF9GSUVMRChwaHlfdHhyZXF1ZXN0Y2xraHMpOworCUlOSVRfRklFTEQocGh5X3Rlc3RjbHIp
OworCUlOSVRfRklFTEQocGh5X3Vuc2h1dGRvd256KTsKKwlJTklUX0ZJRUxEKHBoeV91bnJzdHop
OworCUlOSVRfRklFTEQocGh5X2VuYWJsZWNsayk7CisJSU5JVF9GSUVMRChwaHlfbmxhbmVzKTsK
KwlJTklUX0ZJRUxEKHBoeV9zdG9wX3dhaXRfdGltZSk7CisJSU5JVF9GSUVMRChwaHlfc3RhdHVz
KTsKKwlJTklUX0ZJRUxEKHBja2hkbF9jZmcpOworCUlOSVRfRklFTEQoaHN0eF90aW1lb3V0X2Nv
dW50ZXIpOworCUlOSVRfRklFTEQobHByeF90aW1lb3V0X2NvdW50ZXIpOworCUlOSVRfRklFTEQo
aW50X3N0YXQwKTsKKwlJTklUX0ZJRUxEKGludF9zdGF0MSk7CisJSU5JVF9GSUVMRChpbnRfbWFz
azApOworCUlOSVRfRklFTEQoaW50X21hc2sxKTsKKwlJTklUX0ZJRUxEKGdlbl9oZHIpOworCUlO
SVRfRklFTEQoZ2VuX3BheWxvYWQpOworCUlOSVRfRklFTEQocGh5X2J0YV90aW1lKTsKKwlJTklU
X0ZJRUxEKHZpZF9tb2RlX3ZwZ19lbik7CisJSU5JVF9GSUVMRCh2aWRfbW9kZV92cGdfaG9yaXop
OworCUlOSVRfRklFTEQocGh5X2Nsa2xwMmhzX3RpbWUpOworCUlOSVRfRklFTEQocGh5X2Nsa2hz
MmxwX3RpbWUpOworCUlOSVRfRklFTEQocGh5X2ZvcmNlcGxsKTsKKworCWlmIChkc2ktPmh3X3Zl
cnNpb24gPT0gSFdWRVJfMTMxKSB7CisJCUlOSVRfRklFTERfQ0ZHKGZpZWxkX3BoeV9tYXhfcmRf
dGltZSwgY2ZnX3BoeV9tYXhfcmRfdGltZV92MTMxKTsKKwkJSU5JVF9GSUVMRF9DRkcoZmllbGRf
cGh5X2xwMmhzX3RpbWUsIGNmZ19waHlfbHAyaHNfdGltZV92MTMxKTsKKwkJSU5JVF9GSUVMRF9D
RkcoZmllbGRfcGh5X2hzMmxwX3RpbWUsIGNmZ19waHlfaHMybHBfdGltZV92MTMxKTsKKwl9IGVs
c2UgeworCQlJTklUX0ZJRUxEKHBoeV9tYXhfcmRfdGltZSk7CisJCUlOSVRfRklFTEQocGh5X2xw
MmhzX3RpbWUpOworCQlJTklUX0ZJRUxEKHBoeV9oczJscF90aW1lKTsKKwl9CisKKwlyZXR1cm4g
MDsKK30KKwogc3RhdGljIHN0cnVjdCBkd19taXBpX2RzaSAqCiBfX2R3X21pcGlfZHNpX3Byb2Jl
KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYsCiAJCSAgICBzdHJ1Y3QgZHdfbWlwaV9kc2lf
cGxhdF9kYXRhICpwbGF0X2RhdGEpCkBAIC0xMDY1LDYgKzEyNDUsMTQgQEAgX19kd19taXBpX2Rz
aV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2LAogCQljbGtfZGlzYWJsZV91bnBy
ZXBhcmUoZHNpLT5wY2xrKTsKIAl9CiAKKwlkd19taXBpX2RzaV9nZXRfaHdfdmVyc2lvbihkc2kp
OworCisJcmV0ID0gZHdfbWlwaV9kc2lfcmVnbWFwX2ZpZWxkc19pbml0KGRzaSk7CisJaWYgKHJl
dCkgeworCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0byBpbml0IHJlZ2lzdGVyIGxheW91dCBtYXA6
ICVkXG4iLCByZXQpOworCQlyZXR1cm4gRVJSX1BUUihyZXQpOworCX0KKwogCWR3X21pcGlfZHNp
X2RlYnVnZnNfaW5pdChkc2kpOwogCXBtX3J1bnRpbWVfZW5hYmxlKGRldik7CiAKLS0gCjIuMjQu
MAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRl
dmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
