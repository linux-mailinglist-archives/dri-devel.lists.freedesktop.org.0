Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 18B86EF6A5
	for <lists+dri-devel@lfdr.de>; Tue,  5 Nov 2019 08:55:29 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E75A96E90A;
	Tue,  5 Nov 2019 07:55:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3567B6E90A
 for <dri-devel@lists.freedesktop.org>; Tue,  5 Nov 2019 07:55:24 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 7555AABBD;
 Tue,  5 Nov 2019 07:55:22 +0000 (UTC)
Date: Tue, 05 Nov 2019 08:55:21 +0100
Message-ID: <s5heeymbvva.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Andrzej Hajda <a.hajda@samsung.com>,
 Neil Armstrong <narmstrong@baylibre.com>
Subject: Incorrect buffer handling in dw-hdmi bridge audio
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jernej Skrabec <jernej.skrabec@siol.net>, alsa-devel@alsa-project.org,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 dri-devel@lists.freedesktop.org, Jonas Karlman <jonas@kwiboo.se>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGksCgp3aGlsZSByZWNlbnRseSB3b3JraW5nIG9uIHRoZSBBTFNBIG1lbW9yeSBhbGxvY2F0b3Ig
QVBJIGNsZWFudXAsIEkKbm90aWNlZCB0aGF0IGR3LWhkbWkgYnJpZGdlIGRyaXZlciBzZWVtcyBk
b2luZyB3ZWlyZCBhYm91dCB0aGUgYnVmZmVyCm1hbmFnZW1lbnQuICBJdCBwcmUtYWxsb2NhdGVz
IHRoZSB1c3VhbCBkZXZpY2UgYnVmZmVycyBmdWxseSBhdCB0aGUKcHJvYmUgdGltZSwgd2hpbGUg
ZWFjaCBzdHJlYW0gYWxsb2NhdGVzIHRoZSBidWZmZXIgdmlhIHRoZSB2bWFsbG9jCmhlbHBlcnMg
YW5kIHJlcGxhY2VzIHdpdGggaXQgYXQgZWFjaCBvcGVuLgoKSSBndWVzcyBpdCdzIG5vIGV4cGVj
dGVkIGJlaGF2aW9yPyAgSXQncyBiYXNpY2FsbHkgYSBmdWxsIHdhc3RlIG9mCnJlc291cmNlcywg
YW5kIHRoZSB2bWFsbG9jIGJ1ZmZlciBpc24ndCBndWFyYW50ZWVkIHRvIHdvcmsgd2VsbCBmb3IK
bW1hcCBvbiBldmVyeSBhcmNoaXRlY3R1cmUuCgpCZWxvdyBpcyB0aGUgcGF0Y2ggdG8gYWRkcmVz
cyBpdC4gIENhbiBhbnlvbmUgY2hlY2sgd2hldGhlciB0aGlzIHN0aWxsCndvcmtzPwoKU2luY2Ug
SSBoYXZlIGEgY2xlYW51cCBzZXJpZXMgYW5kIHRoaXMgaXMgaW52b2x2ZWQsIEknZCBsaWtlIHRv
IHRha2UKdGhlIGZpeCB0aHJvdWdoIG15IHRyZWUgb25jZSBhZnRlciBpdCdzIGNvbmZpcm1lZCAo
YW5kIGdldCBBQ0sgaWYKcG9zc2libGUpLgoKClRoYW5rcyEKClRha2FzaGkKCi0tIDg8IC0tCkZy
b206IFRha2FzaGkgSXdhaSA8dGl3YWlAc3VzZS5kZT4KU3ViamVjdDogW1BBVENIXSBkcm0vYnJp
ZGdlOiBkdy1oZG1pOiBGaXggdGhlIGluY29ycmVjdCBidWZmZXIgYWxsb2NhdGlvbnMKClRoZSBk
cml2ZXIgc2V0cyB1cCB0aGUgYnVmZmVyIHByZWFsbG9jYXRpb24gd2l0aCBTTkRSVl9ETUFfVFlQ
RV9ERVYsCndoaWxlIGl0IHJlLWFsbG9jYXRlcyBhbmQgcmVsZWFzZXMgdm1hbGxvYyBwYWdlcy4g
IFRoaXMgaXMgbm90IG9ubHkgYQpsb3Qgb2Ygd2FzdGUgcmVzb3VyY2VzIGJ1dCBhbHNvIGNhdXNl
cyB0aGUgbW1hcCBtYWxmdW5jdGlvbi4KCkNoYW5nZSAvIGRyb3AgdGhlIHZtYWxsb2MtcmVsYXRl
ZCBjb2RlIGFuZCB1c2UgdGhlIHN0YW5kYXJkIGJ1ZmZlcgphbGxvY2F0aW9uIC8gcmVsZWFzZSBj
b2RlIGluc3RlYWQuCgpTaWduZWQtb2ZmLWJ5OiBUYWthc2hpIEl3YWkgPHRpd2FpQHN1c2UuZGU+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLWFoYi1hdWRpby5j
IHwgNiArKy0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAyIGluc2VydGlvbnMoKyksIDQgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1p
LWFoYi1hdWRpby5jIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLWFo
Yi1hdWRpby5jCmluZGV4IDJiNzUzOTcwMWI0Mi4uOGZlN2E2ZThmZjk0IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LWhkbWktYWhiLWF1ZGlvLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLWFoYi1hdWRpby5jCkBAIC0z
ODQsMTUgKzM4NCwxNCBAQCBzdGF0aWMgaW50IGR3X2hkbWlfY2xvc2Uoc3RydWN0IHNuZF9wY21f
c3Vic3RyZWFtICpzdWJzdHJlYW0pCiAKIHN0YXRpYyBpbnQgZHdfaGRtaV9od19mcmVlKHN0cnVj
dCBzbmRfcGNtX3N1YnN0cmVhbSAqc3Vic3RyZWFtKQogewotCXJldHVybiBzbmRfcGNtX2xpYl9m
cmVlX3ZtYWxsb2NfYnVmZmVyKHN1YnN0cmVhbSk7CisJcmV0dXJuIHNuZF9wY21fbGliX2ZyZWVf
cGFnZXMoc3Vic3RyZWFtKTsKIH0KIAogc3RhdGljIGludCBkd19oZG1pX2h3X3BhcmFtcyhzdHJ1
Y3Qgc25kX3BjbV9zdWJzdHJlYW0gKnN1YnN0cmVhbSwKIAlzdHJ1Y3Qgc25kX3BjbV9od19wYXJh
bXMgKnBhcmFtcykKIHsKIAkvKiBBbGxvY2F0ZSB0aGUgUENNIHJ1bnRpbWUgYnVmZmVyLCB3aGlj
aCBpcyBleHBvc2VkIHRvIHVzZXJzcGFjZS4gKi8KLQlyZXR1cm4gc25kX3BjbV9saWJfYWxsb2Nf
dm1hbGxvY19idWZmZXIoc3Vic3RyZWFtLAotCQkJCQkJcGFyYW1zX2J1ZmZlcl9ieXRlcyhwYXJh
bXMpKTsKKwlyZXR1cm4gc25kX3BjbV9saWJfbWFsbG9jX3BhZ2VzKHN1YnN0cmVhbSwgcGFyYW1z
X2J1ZmZlcl9ieXRlcyhwYXJhbXMpKTsKIH0KIAogc3RhdGljIGludCBkd19oZG1pX3ByZXBhcmUo
c3RydWN0IHNuZF9wY21fc3Vic3RyZWFtICpzdWJzdHJlYW0pCkBAIC01MTEsNyArNTEwLDYgQEAg
c3RhdGljIGNvbnN0IHN0cnVjdCBzbmRfcGNtX29wcyBzbmRfZHdfaGRtaV9vcHMgPSB7CiAJLnBy
ZXBhcmUgPSBkd19oZG1pX3ByZXBhcmUsCiAJLnRyaWdnZXIgPSBkd19oZG1pX3RyaWdnZXIsCiAJ
LnBvaW50ZXIgPSBkd19oZG1pX3BvaW50ZXIsCi0JLnBhZ2UgPSBzbmRfcGNtX2xpYl9nZXRfdm1h
bGxvY19wYWdlLAogfTsKIAogc3RhdGljIGludCBzbmRfZHdfaGRtaV9wcm9iZShzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlICpwZGV2KQotLSAKMi4xNi40CgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9kcmktZGV2ZWw=
