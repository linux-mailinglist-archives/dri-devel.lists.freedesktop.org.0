Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C4DDF8DD63
	for <lists+dri-devel@lfdr.de>; Wed, 14 Aug 2019 20:48:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 60B1F6E80A;
	Wed, 14 Aug 2019 18:47:55 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x444.google.com (mail-pf1-x444.google.com
 [IPv6:2607:f8b0:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2D5936E804
 for <dri-devel@lists.freedesktop.org>; Wed, 14 Aug 2019 18:47:46 +0000 (UTC)
Received: by mail-pf1-x444.google.com with SMTP id w16so1590144pfn.7
 for <dri-devel@lists.freedesktop.org>; Wed, 14 Aug 2019 11:47:46 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=g6uAv27tRz5L9wSjxLNVl9yJGuoTJBSlGcSrGIG0dc8=;
 b=qRs01s1Jzy0k1ctqgAi9uffC2mGi0jz93awWcnJ2gMIo19TuSMGJexMqdLG81n7CIh
 BJXHZH6v9GP/WmsHDgs8JIwPMwLp5P3avL569NNESYcawJefA/MbyzMRqWTDQ8j0kvcs
 e2pBlotV7aBCgO5C3uIsOqfACh7KyBX/mFH8+jRrF/IX1z/yckzZ6eIac00yrk6G4zvJ
 TLTHXsho3vtI0o4zvbrgvX1Pm7/9XPv/+K6STtrWN8dUPS41mwlZkFbw7Zq7TkIuVXSE
 EI+jsOd2FnNhkzeBSUphhOG1zvLegNq7WsofWwiKcvZAT/DwCB4xO/d6UlGiZxz7y4ak
 /Vpg==
X-Gm-Message-State: APjAAAWXOb1/a08/WFwA3F1jAc2neeeivNqRweKycZ0P4Q/UZw8nCL7I
 XDfflReAUU/G+4eu2M3hUwNRDw==
X-Google-Smtp-Source: APXvYqww/O9lEEjFWec4hq2+MxoQOn1KDh79uOYPC/WRYrDlO23Pgp6bxoz/dkBfwH1RluR4paFsEg==
X-Received: by 2002:a17:90a:9f4b:: with SMTP id
 q11mr1030317pjv.105.1565808465169; 
 Wed, 14 Aug 2019 11:47:45 -0700 (PDT)
Received: from localhost.localdomain ([2601:1c2:680:1319:692:26ff:feda:3a81])
 by smtp.gmail.com with ESMTPSA id
 y16sm610855pfc.36.2019.08.14.11.47.43
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 14 Aug 2019 11:47:44 -0700 (PDT)
From: John Stultz <john.stultz@linaro.org>
To: lkml <linux-kernel@vger.kernel.org>
Subject: [RESEND][PATCH v3 25/26] drm: kirin: Pass driver data to crtc init
 and plane init
Date: Wed, 14 Aug 2019 18:47:01 +0000
Message-Id: <20190814184702.54275-26-john.stultz@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190814184702.54275-1-john.stultz@linaro.org>
References: <20190814184702.54275-1-john.stultz@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=g6uAv27tRz5L9wSjxLNVl9yJGuoTJBSlGcSrGIG0dc8=;
 b=Q/K3nksXnTewrgH66PEsGInqHk3G5CSsI2MmO0bGyulaasGK4GnUHI4STA2aXzrRz4
 D0B7N1vpWKlYXzTEzek6IXpuHE4Ye51+L0AWYXGcXZLqitG/qBEgEUu/AZmCNwPFaKHU
 taiQH2TBjCAka8jXpuyNUDKgJEJds4vdeIIjZPNFxDROhXDFhUkpW66TJ/87mhbw5D/b
 kBY/0l4Yq0C9A6Dq9qmXYcI1gbtFB1VTjUJVOypUM0UeMW8Sr79f3I5D7nG7VSp9iZVW
 /rUuvIxHQCdB2EYgVcWynoQwr8d36hSXtEAgjF5iV2u0nnJrQXwLU3+4/T7Nn3qGoqT5
 wz6A==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Xu YiPing <xuyiping@hisilicon.com>, David Airlie <airlied@linux.ie>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Xinliang Liu <z.liuxinliang@hisilicon.com>,
 Rongrong Zou <zourongrong@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogWHUgWWlQaW5nIDx4dXlpcGluZ0BoaXNpbGljb24uY29tPgoKQXMgcGFydCBvZiByZWZh
Y3RvcmluZyB0aGUga2lyaW4gZHJpdmVyIHRvIGJldHRlciBzdXBwb3J0CmRpZmZlcmVudCBoYXJk
d2FyZSByZXZpc2lvbnMsIHRoaXMgcGF0Y2ggY2hhbmdlcyB0aGUgY29kZQp2aWEgYSBwYXNzZWQg
aW4gZHJpdmVyX2RhdGEgcG9pbnRlciwgcmF0aGVyIHRoYW4gaGFyZGNvZGluZwp0aGVtIHZpYSBh
ZGVfZHJpdmVyX2RhdGEgdmFyaWFibGUuCgpUaGlzIHdpbGwgYWxsb3cgdGhvc2UgZnVuY2l0b25z
IHRvIGJlIGxhdGVyIG1vdmVkIHRvIHRoZQpnZW5lcmljIGtpcmluX2RybV9kcnYuYyB1c2luZyBh
bHRlcm5hdGl2ZSBkcml2ZXJfZGF0YSBzdHJ1Y3R1cmVzCnRoYXQgc3VwcG9ydCBvdGhlciBoYXJk
d2FyZS4KCkNjOiBSb25ncm9uZyBab3UgPHpvdXJvbmdyb25nQGdtYWlsLmNvbT4KQ2M6IFhpbmxp
YW5nIExpdSA8ei5saXV4aW5saWFuZ0BoaXNpbGljb24uY29tPgpDYzogRGF2aWQgQWlybGllIDxh
aXJsaWVkQGxpbnV4LmllPgpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xsLmNoPgpDYzog
ZHJpLWRldmVsIDxkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnPgpDYzogU2FtIFJhdm5i
b3JnIDxzYW1AcmF2bmJvcmcub3JnPgpSZXZpZXdlZC1ieTogU2FtIFJhdm5ib3JnIDxzYW1AcmF2
bmJvcmcub3JnPgpTaWduZWQtb2ZmLWJ5OiBYdSBZaVBpbmcgPHh1eWlwaW5nQGhpc2lsaWNvbi5j
b20+Cltqc3R1bHR6OiBSZXdvcmRlZCBjb21taXQgbWVzc2FnZV0KU2lnbmVkLW9mZi1ieTogSm9o
biBTdHVsdHogPGpvaG4uc3R1bHR6QGxpbmFyby5vcmc+Ci0tLQp2MjogV2hpdGVzcGFjZSBmaXh1
cHMsIGNvbW1pdCBtZXNzYWdlIHR3ZWFrcyBzdWdnZXN0ZWQgYnkgU2FtLgotLS0KIC4uLi9ncHUv
ZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fYWRlLmMgICB8IDI1ICsrKysrKysrKysrLS0t
LS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAxNCBpbnNlcnRpb25zKCspLCAxMSBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaGlzaWxpY29uL2tpcmluL2tpcmluX2RybV9h
ZGUuYyBiL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2FkZS5jCmlu
ZGV4IGY3MjlhMWRlNmUxNC4uYWIwYzVkMDM5MDNkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaGlzaWxpY29uL2tpcmluL2tpcmluX2RybV9hZGUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aGlzaWxpY29uL2tpcmluL2tpcmluX2RybV9hZGUuYwpAQCAtNTcyLDcgKzU3Miw4IEBAIHN0YXRp
YyBjb25zdCBzdHJ1Y3QgZHJtX2NydGNfZnVuY3MgYWRlX2NydGNfZnVuY3MgPSB7CiB9OwogCiBz
dGF0aWMgaW50IGtpcmluX2RybV9jcnRjX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgc3Ry
dWN0IGRybV9jcnRjICpjcnRjLAotCQkJIHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lKQorCQkJICAg
ICAgIHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAorCQkJICAgICAgIGNvbnN0IHN0cnVjdCBraXJp
bl9kcm1fZGF0YSAqZHJpdmVyX2RhdGEpCiB7CiAJc3RydWN0IGRldmljZV9ub2RlICpwb3J0Owog
CWludCByZXQ7CkBAIC01ODksMTMgKzU5MCwxMyBAQCBzdGF0aWMgaW50IGtpcmluX2RybV9jcnRj
X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRybV9jcnRjICpjcnRjLAogCWNy
dGMtPnBvcnQgPSBwb3J0OwogCiAJcmV0ID0gZHJtX2NydGNfaW5pdF93aXRoX3BsYW5lcyhkZXYs
IGNydGMsIHBsYW5lLCBOVUxMLAotCQkJCQlhZGVfZHJpdmVyX2RhdGEuY3J0Y19mdW5jcywgTlVM
TCk7CisJCQkJCWRyaXZlcl9kYXRhLT5jcnRjX2Z1bmNzLCBOVUxMKTsKIAlpZiAocmV0KSB7CiAJ
CURSTV9FUlJPUigiZmFpbGVkIHRvIGluaXQgY3J0Yy5cbiIpOwogCQlyZXR1cm4gcmV0OwogCX0K
IAotCWRybV9jcnRjX2hlbHBlcl9hZGQoY3J0YywgYWRlX2RyaXZlcl9kYXRhLmNydGNfaGVscGVy
X2Z1bmNzKTsKKwlkcm1fY3J0Y19oZWxwZXJfYWRkKGNydGMsIGRyaXZlcl9kYXRhLT5jcnRjX2hl
bHBlcl9mdW5jcyk7CiAKIAlyZXR1cm4gMDsKIH0KQEAgLTg5NCwyMSArODk1LDIyIEBAIHN0YXRp
YyBzdHJ1Y3QgZHJtX3BsYW5lX2Z1bmNzIGFkZV9wbGFuZV9mdW5jcyA9IHsKIAogc3RhdGljIGlu
dCBraXJpbl9kcm1fcGxhbmVfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCXN0cnVj
dCBraXJpbl9wbGFuZSAqa3BsYW5lLAotCQkJCWVudW0gZHJtX3BsYW5lX3R5cGUgdHlwZSkKKwkJ
CQllbnVtIGRybV9wbGFuZV90eXBlIHR5cGUsCisJCQkJY29uc3Qgc3RydWN0IGtpcmluX2RybV9k
YXRhICpkcml2ZXJfZGF0YSkKIHsKIAlpbnQgcmV0ID0gMDsKIAogCXJldCA9IGRybV91bml2ZXJz
YWxfcGxhbmVfaW5pdChkZXYsICZrcGxhbmUtPmJhc2UsIDEsCi0JCQkJCWFkZV9kcml2ZXJfZGF0
YS5wbGFuZV9mdW5jcywKLQkJCQkJYWRlX2RyaXZlcl9kYXRhLmNoYW5uZWxfZm9ybWF0cywKLQkJ
CQkJYWRlX2RyaXZlcl9kYXRhLmNoYW5uZWxfZm9ybWF0c19jbnQsCi0JCQkJCU5VTEwsIHR5cGUs
IE5VTEwpOworCQkJCSAgICAgICBkcml2ZXJfZGF0YS0+cGxhbmVfZnVuY3MsCisJCQkJICAgICAg
IGRyaXZlcl9kYXRhLT5jaGFubmVsX2Zvcm1hdHMsCisJCQkJICAgICAgIGRyaXZlcl9kYXRhLT5j
aGFubmVsX2Zvcm1hdHNfY250LAorCQkJCSAgICAgICBOVUxMLCB0eXBlLCBOVUxMKTsKIAlpZiAo
cmV0KSB7CiAJCURSTV9FUlJPUigiZmFpbCB0byBpbml0IHBsYW5lLCBjaD0lZFxuIiwga3BsYW5l
LT5jaCk7CiAJCXJldHVybiByZXQ7CiAJfQogCi0JZHJtX3BsYW5lX2hlbHBlcl9hZGQoJmtwbGFu
ZS0+YmFzZSwgYWRlX2RyaXZlcl9kYXRhLnBsYW5lX2hlbHBlcl9mdW5jcyk7CisJZHJtX3BsYW5l
X2hlbHBlcl9hZGQoJmtwbGFuZS0+YmFzZSwgZHJpdmVyX2RhdGEtPnBsYW5lX2hlbHBlcl9mdW5j
cyk7CiAKIAlyZXR1cm4gMDsKIH0KQEAgLTEwMjQsMTQgKzEwMjYsMTUgQEAgc3RhdGljIGludCBh
ZGVfZHJtX2luaXQoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAkJZWxzZQogCQkJdHlw
ZSA9IERSTV9QTEFORV9UWVBFX09WRVJMQVk7CiAKLQkJcmV0ID0ga2lyaW5fZHJtX3BsYW5lX2lu
aXQoZGV2LCBrcGxhbmUsIHR5cGUpOworCQlyZXQgPSBraXJpbl9kcm1fcGxhbmVfaW5pdChkZXYs
IGtwbGFuZSwgdHlwZSwgJmFkZV9kcml2ZXJfZGF0YSk7CiAJCWlmIChyZXQpCiAJCQlyZXR1cm4g
cmV0OwogCX0KIAogCS8qIGNydGMgaW5pdCAqLwogCXJldCA9IGtpcmluX2RybV9jcnRjX2luaXQo
ZGV2LCAma2NydGMtPmJhc2UsCi0JCQkJJmFkZS0+cGxhbmVzW2FkZV9kcml2ZXJfZGF0YS5wcmlt
X3BsYW5lXS5iYXNlKTsKKwkJCQkmYWRlLT5wbGFuZXNbYWRlX2RyaXZlcl9kYXRhLnByaW1fcGxh
bmVdLmJhc2UsCisJCQkJJmFkZV9kcml2ZXJfZGF0YSk7CiAJaWYgKHJldCkKIAkJcmV0dXJuIHJl
dDsKIAotLSAKMi4xNy4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmkt
ZGV2ZWw=
