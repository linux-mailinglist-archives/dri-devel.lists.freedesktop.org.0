Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3E4C3B99D1
	for <lists+dri-devel@lfdr.de>; Sat, 21 Sep 2019 00:49:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EF65989BD2;
	Fri, 20 Sep 2019 22:49:41 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 190236FE12
 for <dri-devel@lists.freedesktop.org>; Fri, 20 Sep 2019 22:49:40 +0000 (UTC)
Received: from pendragon.ideasonboard.com (81-175-216-236.bb.dnainternet.fi
 [81.175.216.236])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 2CE252F9;
 Sat, 21 Sep 2019 00:49:38 +0200 (CEST)
Date: Sat, 21 Sep 2019 01:49:29 +0300
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: daniel@ffwll.ch
Subject: Re: [PATCH v4 8/9] drm: rcar-du: kms: Update CMM in atomic commit tail
Message-ID: <20190920224929.GE12672@pendragon.ideasonboard.com>
References: <20190906135436.10622-1-jacopo+renesas@jmondi.org>
 <20190906135436.10622-9-jacopo+renesas@jmondi.org>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190906135436.10622-9-jacopo+renesas@jmondi.org>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1569019778;
 bh=MXdyC92nZxPWNwpEC220/y38MMTZ88P8BeKNptk7oi4=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=nGDtt8XvhbiVcDVzUPuwbMH2FhknLah2kmir5+F17VCWD9D0jtItgogS4JbFAttEq
 pHbUpRRxtaWpYhTK1GK1+5zoZEGXSDwxjfp6tIOB38Y3D54XxUcTt4cJbxYqiMT9kf
 DnNIF+ZFGA6wTDcD42WG599MqqeLIBYbk/k6YBDs=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: muroya@ksk.co.jp, horms@verge.net.au, VenkataRajesh.Kalakodima@in.bosch.com,
 airlied@linux.ie, koji.matsuoka.xm@renesas.com,
 dri-devel@lists.freedesktop.org, linux-kernel@vger.kernel.org,
 linux-renesas-soc@vger.kernel.org, kieran.bingham+renesas@ideasonboard.com,
 geert@linux-m68k.org, Jacopo Mondi <jacopo+renesas@jmondi.org>,
 Harsha.ManjulaMallikarjun@in.bosch.com, uli+renesas@fpond.eu
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgRGFuaWVsLAoKT24gRnJpLCBTZXAgMDYsIDIwMTkgYXQgMDM6NTQ6MzVQTSArMDIwMCwgSmFj
b3BvIE1vbmRpIHdyb3RlOgo+IFVwZGF0ZSBDTU0gc2V0dGluZ3MgYXQgaW4gdGhlIGF0b21pYyBj
b21taXQgdGFpbCBoZWxwZXIgbWV0aG9kLgo+IFRoZSBDTU0gaXMgdXBkYXRlZCB3aXRoIG5ldyBn
YW1tYSB2YWx1ZXMgcHJvdmlkZWQgdG8gdGhlIGRyaXZlcgo+IGluIHRoZSBHQU1NQV9MVVQgYmxv
YiBwcm9wZXJ0eS4KPiAKPiBXaGVuIHJlc3VtaW5nIGZyb20gc3lzdGVtIHN1c3BlbmQsIHRoZSBE
VSBkcml2ZXIgaXMgcmVzcG9uc2libGUgZm9yCj4gcmVwcm9ncmFtbWluZyBhbmQgZW5hYmxpbmcg
dGhlIENNTSB1bml0IGlmIGl0IHdhcyBpbiB1c2UgYXQgdGhlIHRpbWUgdGhlCj4gc3lzdGVtIGVu
dGVyZWQgdGhlIHN1c3BlbmQgc3RhdGUuICBGb3JjZSB0aGUgY29sb3JfbWdtdF9jaGFuZ2VkIGZs
YWcgdG8KPiB0cnVlIGlmIHRoZSBEUk0gZ2FtbWEgbHV0IGNvbG9yIHRyYW5zZm9ybWF0aW9uIHBy
b3BlcnR5IHdhcyBzZXQgaW4gdGhlCj4gQ1JUQyBzdGF0ZSBkdXBsaWNhdGVkIGF0IHN1c3BlbmQg
dGltZSwgYXMgdGhlIENNTSBnZXRzIHJlcHJvZ3JhbW1lZCBvbmx5Cj4gaWYgc2FpZCBmbGFnIGlz
IGFjdGl2ZSBpbiB0aGUgcmNhcl9kdV9hdG9taWNfY29tbWl0X3VwZGF0ZV9jbW0oKSBtZXRob2Qu
Cj4gCj4gUmV2aWV3ZWQtYnk6IFVscmljaCBIZWNodCA8dWxpK3JlbmVzYXNAZnBvbmQuZXU+Cj4g
UmV2aWV3ZWQtYnk6IExhdXJlbnQgUGluY2hhcnQgPGxhdXJlbnQucGluY2hhcnRAaWRlYXNvbmJv
YXJkLmNvbT4KPiBTaWduZWQtb2ZmLWJ5OiBKYWNvcG8gTW9uZGkgPGphY29wbytyZW5lc2FzQGpt
b25kaS5vcmc+Cj4gLS0tCj4gCj4gRGFuaWVsIGNvdWxkIHlvdSBoYXZlIGEgbG9vayBpZiByZXN1
bWUgYml0cyBhcmUgd29ydGggYmVpbmcgbW92ZWQgdG8gdGhlCj4gRFJNIGNvcmU/IFRoZSBjb2xv
cl9tZ210X2NoYW5nZWQgZmxhZyBpcyBzZXQgdG8gZmFsc2Ugd2hlbiB0aGUgc3RhdGUgaXMKPiBk
dXBsaWNhdGVkIGlmIEkgcmVhZCB0aGUgY29kZSBjb3JyZWN0bHksIGJ1dCB3aGVuIHRoaXMgaGFw
cGVucyBpbiBhCj4gc3VzcGVuZC9yZXN1bWUgc2VxdWVuY2UgaXRzIHZhbHVlIHNob3VsZCBwcm9i
YWJseSBiZSByZXN0b3JlZCB0byB0cnVlIGlmCj4gYW55IGNvbG9yIG1hbmFnZW1lbnQgcHJvcGVy
dHkgd2FzIHNldCBpbiB0aGUgY3J0YyBzdGF0ZSB3aGVuIHN5c3RlbSBlbnRlcmVkCj4gc3VzcGVu
ZC4KCkdlbnRsZSBwaW5nIG9uIHRoaXMuCgo+IC0tLQo+IAo+ICBkcml2ZXJzL2dwdS9kcm0vcmNh
ci1kdS9yY2FyX2R1X2Rydi5jIHwgMjAgKysrKysrKysrKysrKysKPiAgZHJpdmVycy9ncHUvZHJt
L3JjYXItZHUvcmNhcl9kdV9rbXMuYyB8IDM4ICsrKysrKysrKysrKysrKysrKysrKysrKysrKwo+
ICAyIGZpbGVzIGNoYW5nZWQsIDU4IGluc2VydGlvbnMoKykKPiAKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9yY2Fy
LWR1L3JjYXJfZHVfZHJ2LmMKPiBpbmRleCAwMTg0ODBhOGYzNWMuLmQxMDAzZDMxY2ZhZiAxMDA2
NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2Rydi5jCj4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9kcnYuYwo+IEBAIC0xNyw2ICsxNyw3IEBA
Cj4gICNpbmNsdWRlIDxsaW51eC9zbGFiLmg+Cj4gICNpbmNsdWRlIDxsaW51eC93YWl0Lmg+Cj4g
Cj4gKyNpbmNsdWRlIDxkcm0vZHJtX2F0b21pYy5oPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9hdG9t
aWNfaGVscGVyLmg+Cj4gICNpbmNsdWRlIDxkcm0vZHJtX2ZiX2NtYV9oZWxwZXIuaD4KPiAgI2lu
Y2x1ZGUgPGRybS9kcm1fZmJfaGVscGVyLmg+Cj4gQEAgLTQ4Miw2ICs0ODMsMjUgQEAgc3RhdGlj
IGludCByY2FyX2R1X3BtX3N1c3BlbmQoc3RydWN0IGRldmljZSAqZGV2KQo+ICBzdGF0aWMgaW50
IHJjYXJfZHVfcG1fcmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikKPiAgewo+ICAJc3RydWN0IHJj
YXJfZHVfZGV2aWNlICpyY2R1ID0gZGV2X2dldF9kcnZkYXRhKGRldik7Cj4gKwlzdHJ1Y3QgZHJt
X2F0b21pY19zdGF0ZSAqc3RhdGUgPSByY2R1LT5kZGV2LT5tb2RlX2NvbmZpZy5zdXNwZW5kX3N0
YXRlOwo+ICsJdW5zaWduZWQgaW50IGk7Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IHJjZHUtPm51
bV9jcnRjczsgKytpKSB7Cj4gKwkJc3RydWN0IGRybV9jcnRjICpjcnRjID0gJnJjZHUtPmNydGNz
W2ldLmNydGM7Cj4gKwkJc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRjX3N0YXRlOwo+ICsKPiAr
CQljcnRjX3N0YXRlID0gZHJtX2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUoc3RhdGUsIGNydGMp
Owo+ICsJCWlmICghY3J0Y19zdGF0ZSkKPiArCQkJY29udGludWU7Cj4gKwo+ICsJCS8qCj4gKwkJ
ICogRm9yY2UgcmUtZW5hYmxlbWVudCBvZiBDTU0gYWZ0ZXIgc3lzdGVtIHJlc3VtZSBpZiBhbnkK
PiArCQkgKiBvZiB0aGUgRFJNIGNvbG9yIHRyYW5zZm9ybWF0aW9uIHByb3BlcnRpZXMgd2FzIHNl
dCBpbgo+ICsJCSAqIHRoZSBzdGF0ZSBzYXZlZCBhdCBzeXN0ZW0gc3VzcGVuZCB0aW1lLgo+ICsJ
CSAqLwo+ICsJCWlmIChjcnRjX3N0YXRlLT5nYW1tYV9sdXQpCj4gKwkJCWNydGNfc3RhdGUtPmNv
bG9yX21nbXRfY2hhbmdlZCA9IHRydWU7Cj4gKwl9Cj4gCj4gIAlyZXR1cm4gZHJtX21vZGVfY29u
ZmlnX2hlbHBlcl9yZXN1bWUocmNkdS0+ZGRldik7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9rbXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1
L3JjYXJfZHVfa21zLmMKPiBpbmRleCAyOTQ2MzBlNTY5OTIuLmZjMzBmZmYwZWI4ZCAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2ttcy5jCj4gKysrIGIvZHJp
dmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9rbXMuYwo+IEBAIC0yMiw2ICsyMiw3IEBACj4g
ICNpbmNsdWRlIDxsaW51eC9vZl9wbGF0Zm9ybS5oPgo+ICAjaW5jbHVkZSA8bGludXgvd2FpdC5o
Pgo+IAo+ICsjaW5jbHVkZSAicmNhcl9jbW0uaCIKPiAgI2luY2x1ZGUgInJjYXJfZHVfY3J0Yy5o
Igo+ICAjaW5jbHVkZSAicmNhcl9kdV9kcnYuaCIKPiAgI2luY2x1ZGUgInJjYXJfZHVfZW5jb2Rl
ci5oIgo+IEBAIC0zNjgsNiArMzY5LDQwIEBAIHJjYXJfZHVfZmJfY3JlYXRlKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2LAo+ICAgKiBBdG9taWMgQ2hl
Y2sgYW5kIFVwZGF0ZQo+ICAgKi8KPiAKPiArc3RhdGljIHZvaWQgcmNhcl9kdV9hdG9taWNfY29t
bWl0X3VwZGF0ZV9jbW0oc3RydWN0IGRybV9jcnRjICpjcnRjLAo+ICsJCQkJCSAgICAgc3RydWN0
IGRybV9jcnRjX3N0YXRlICpvbGRfc3RhdGUpCj4gK3sKPiArCXN0cnVjdCByY2FyX2R1X2NydGMg
KnJjcnRjID0gdG9fcmNhcl9jcnRjKGNydGMpOwo+ICsJc3RydWN0IHJjYXJfY21tX2NvbmZpZyBj
bW1fY29uZmlnID0ge307Cj4gKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSByY3J0Yy0+ZGV2LT5kZXY7
Cj4gKwlzdHJ1Y3QgZHJtX3Byb3BlcnR5X2Jsb2IgKmx1dF9ibG9iOwo+ICsKPiArCWlmICghcmNy
dGMtPmNtbSB8fCAhY3J0Yy0+c3RhdGUtPmNvbG9yX21nbXRfY2hhbmdlZCkKPiArCQlyZXR1cm47
Cj4gKwo+ICsJaWYgKCFjcnRjLT5zdGF0ZS0+Z2FtbWFfbHV0KSB7Cj4gKwkJY21tX2NvbmZpZy5s
dXQuZW5hYmxlID0gZmFsc2U7Cj4gKwkJcmNhcl9jbW1fc2V0dXAocmNydGMtPmNtbSwgJmNtbV9j
b25maWcpOwo+ICsJCXJldHVybjsKPiArCX0KPiArCj4gKwlsdXRfYmxvYiA9IGNydGMtPnN0YXRl
LT5nYW1tYV9sdXQ7Cj4gKwlpZiAobHV0X2Jsb2ItPmxlbmd0aCAhPSAoQ00yX0xVVF9TSVpFICog
c2l6ZW9mKHN0cnVjdCBkcm1fY29sb3JfbHV0KSkpIHsKPiArCQkvKgo+ICsJCSAqIFdlIG9ubHkg
YWNjZXB0IGZ1bGx5IHBvcHVsYXRlZCBMVVQgdGFibGVzOwo+ICsJCSAqIGJlIGxvdWQgaGVyZSwg
b3RoZXJ3aXNlIHRoZSBDTU0gZ2V0cyBzaWxlbnRseSBpZ25vcmVkLgo+ICsJCSAqLwo+ICsJCWRl
dl9lcnIoZGV2LCAiaW52YWxpZCBnYW1tYSBsdXQgc2l6ZSBvZiAlbHUgYnl0ZXNcbiIsCj4gKwkJ
CWx1dF9ibG9iLT5sZW5ndGgpOwo+ICsJCXJldHVybjsKPiArCX0KPiArCj4gKwljbW1fY29uZmln
Lmx1dC5lbmFibGUgPSB0cnVlOwo+ICsJY21tX2NvbmZpZy5sdXQudGFibGUgPSAoc3RydWN0IGRy
bV9jb2xvcl9sdXQgKilsdXRfYmxvYi0+ZGF0YTsKPiArCj4gKwlyY2FyX2NtbV9zZXR1cChyY3J0
Yy0+Y21tLCAmY21tX2NvbmZpZyk7Cj4gK30KPiArCj4gIHN0YXRpYyBpbnQgcmNhcl9kdV9hdG9t
aWNfY2hlY2soc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiAgCQkJCXN0cnVjdCBkcm1fYXRvbWlj
X3N0YXRlICpzdGF0ZSkKPiAgewo+IEBAIC00MTAsNiArNDQ1LDkgQEAgc3RhdGljIHZvaWQgcmNh
cl9kdV9hdG9taWNfY29tbWl0X3RhaWwoc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKm9sZF9zdGF0
ZSkKPiAgCQkJcmNkdS0+ZHBhZDFfc291cmNlID0gcmNydGMtPmluZGV4Owo+ICAJfQo+IAo+ICsJ
Zm9yX2VhY2hfb2xkX2NydGNfaW5fc3RhdGUob2xkX3N0YXRlLCBjcnRjLCBjcnRjX3N0YXRlLCBp
KQo+ICsJCXJjYXJfZHVfYXRvbWljX2NvbW1pdF91cGRhdGVfY21tKGNydGMsIGNydGNfc3RhdGUp
Owo+ICsKPiAgCS8qIEFwcGx5IHRoZSBhdG9taWMgdXBkYXRlLiAqLwo+ICAJZHJtX2F0b21pY19o
ZWxwZXJfY29tbWl0X21vZGVzZXRfZGlzYWJsZXMoZGV2LCBvbGRfc3RhdGUpOwo+ICAJZHJtX2F0
b21pY19oZWxwZXJfY29tbWl0X3BsYW5lcyhkZXYsIG9sZF9zdGF0ZSwKCi0tIApSZWdhcmRzLAoK
TGF1cmVudCBQaW5jaGFydApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmkt
ZGV2ZWw=
