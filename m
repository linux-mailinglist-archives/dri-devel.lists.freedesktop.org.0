Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DDEB121B0A1
	for <lists+dri-devel@lfdr.de>; Fri, 10 Jul 2020 09:53:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1023C6EB8A;
	Fri, 10 Jul 2020 07:53:00 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x443.google.com (mail-wr1-x443.google.com
 [IPv6:2a00:1450:4864:20::443])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 78EDC6EA75
 for <dri-devel@lists.freedesktop.org>; Thu,  9 Jul 2020 14:03:32 +0000 (UTC)
Received: by mail-wr1-x443.google.com with SMTP id k6so2520173wrn.3
 for <dri-devel@lists.freedesktop.org>; Thu, 09 Jul 2020 07:03:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=VRoC5bGLlEhSD60pEeaPChiHjDUdFGDEmZk20OrMuc8=;
 b=VRzIX4UkDZrcfBCSmFx2qL3bw3uwmBfQkN30yMkwsg8YIFFtfqQr8L7lM0glu9Gptp
 NNww1+6BwGEVUlKkKQM5I1UZOx1wi+HU1XsLYM4qp4VEvTTH3l29SyFJ7fRjmxNGtCt5
 NANjekv6+7q47QIKzfQjjE53YHyTx9wCWbAWhHMJ+VvAS0qIjkqLFYMtyENmaI33kDPT
 E+kRWgaK1xUcVrgm/ZG6RwKMmiHVmEQsx8XkazsavTKB65+IQBcGbMglmcSd23hfdQsz
 Pyb1tTDRWhl6IrWwqAmiF7VdkffTeKMwhg6ba3WBMevikYTDDvL9UkwlcAQp1Fv23cbY
 dHNQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=VRoC5bGLlEhSD60pEeaPChiHjDUdFGDEmZk20OrMuc8=;
 b=CGxvCqbSWYausxMhyD8+orBsFDnGaVVMrExw/QM0VhoWxfGfmrvp0q8aZuRTEmOkri
 HVwd2xQkvXjOmXk8pXZWkxewb+DxKgIHTxRkShlfrUl9yiEwy2fcusNNue40yoRKLmSC
 s3sLGB3Z5bZtMYbDZyPreRIYYfA7BbA0R/7cLVdVP7OW5ZP6fSS/xLyrW7k/8WNCnmgW
 smws79jVhzGPUwmx3m9syCV3I/2fzfcwP58N2++wHK3QyVk9r88tVeQS2u4s+pkH33cm
 mM3gwzPMCzMiqYDbDddqeQbIaKQ6tHSOeixDW/4h9G6A1IocXHTKLR0ehKq2tGFoAkUN
 bvlg==
X-Gm-Message-State: AOAM532BkCaPKk/jc+b76mNedWywEXDMIqMs1fGAREpmHrV7M5oZ766g
 q+2Mty74PtzxOj7Dx8iWT8wQdN4MEwU=
X-Google-Smtp-Source: ABdhPJzXtEuBoawLX4d1SvLyRTEANvQMgFlipC/UWsLRMfhoJFgeyV8hdw1DOV8Qxc5Mgw3tD8GX4g==
X-Received: by 2002:a5d:4dc2:: with SMTP id f2mr64829525wru.399.1594303411006; 
 Thu, 09 Jul 2020 07:03:31 -0700 (PDT)
Received: from clement-Latitude-7490.numericable.fr
 (213-245-241-245.rev.numericable.fr. [213.245.241.245])
 by smtp.gmail.com with ESMTPSA id s8sm5545256wru.38.2020.07.09.07.03.29
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 09 Jul 2020 07:03:30 -0700 (PDT)
From: =?UTF-8?q?Cl=C3=A9ment=20P=C3=A9ron?= <peron.clem@gmail.com>
To: Rob Herring <robh@kernel.org>, Tomeu Vizoso <tomeu.vizoso@collabora.com>,
 Steven Price <steven.price@arm.com>,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>,
 Viresh Kumar <vireshk@kernel.org>, Nishanth Menon <nm@ti.com>,
 Stephen Boyd <sboyd@kernel.org>, Maxime Ripard <mripard@kernel.org>,
 Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v3 04/14] drm/panfrost: introduce panfrost_devfreq struct
Date: Thu,  9 Jul 2020 16:03:12 +0200
Message-Id: <20200709140322.131320-5-peron.clem@gmail.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20200709140322.131320-1-peron.clem@gmail.com>
References: <20200709140322.131320-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Fri, 10 Jul 2020 07:52:58 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Cl=C3=A9ment=20P=C3=A9ron?= <peron.clem@gmail.com>,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW50cm9kdWNlIGEgcHJvcGVyIHBhbmZyb3N0X2RldmZyZXEgdG8gZGVhbCB3aXRoIGRldmZyZXEg
dmFyaWFibGVzLgoKUmV2aWV3ZWQtYnk6IFN0ZXZlbiBQcmljZSA8c3RldmVuLnByaWNlQGFybS5j
b20+ClJldmlld2VkLWJ5OiBBbHlzc2EgUm9zZW56d2VpZyA8YWx5c3NhLnJvc2VuendlaWdAY29s
bGFib3JhLmNvbT4KU2lnbmVkLW9mZi1ieTogQ2zDqW1lbnQgUMOpcm9uIDxwZXJvbi5jbGVtQGdt
YWlsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2ZnJlcS5j
IHwgNzYgKysrKysrKysrKysrLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFu
ZnJvc3RfZGV2ZnJlcS5oIHwgMjAgKysrKystCiBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFu
ZnJvc3RfZGV2aWNlLmggIHwgMTEgKy0tCiBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJv
c3Rfam9iLmMgICAgIHwgIDYgKy0KIDQgZmlsZXMgY2hhbmdlZCwgNjYgaW5zZXJ0aW9ucygrKSwg
NDcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3Bh
bmZyb3N0X2RldmZyZXEuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZm
cmVxLmMKaW5kZXggZGY3YjcxZGE5YTg0Li45NjI1NTAzNjMzOTEgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZmcmVxLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmZyZXEuYwpAQCAtMTAsMjMgKzEwLDIzIEBACiAjaW5j
bHVkZSAicGFuZnJvc3RfZGV2aWNlLmgiCiAjaW5jbHVkZSAicGFuZnJvc3RfZGV2ZnJlcS5oIgog
Ci1zdGF0aWMgdm9pZCBwYW5mcm9zdF9kZXZmcmVxX3VwZGF0ZV91dGlsaXphdGlvbihzdHJ1Y3Qg
cGFuZnJvc3RfZGV2aWNlICpwZmRldikKK3N0YXRpYyB2b2lkIHBhbmZyb3N0X2RldmZyZXFfdXBk
YXRlX3V0aWxpemF0aW9uKHN0cnVjdCBwYW5mcm9zdF9kZXZmcmVxICpwZmRldmZyZXEpCiB7CiAJ
a3RpbWVfdCBub3c7CiAJa3RpbWVfdCBsYXN0OwogCi0JaWYgKCFwZmRldi0+ZGV2ZnJlcS5kZXZm
cmVxKQorCWlmICghcGZkZXZmcmVxLT5kZXZmcmVxKQogCQlyZXR1cm47CiAKIAlub3cgPSBrdGlt
ZV9nZXQoKTsKLQlsYXN0ID0gcGZkZXYtPmRldmZyZXEudGltZV9sYXN0X3VwZGF0ZTsKKwlsYXN0
ID0gcGZkZXZmcmVxLT50aW1lX2xhc3RfdXBkYXRlOwogCi0JaWYgKGF0b21pY19yZWFkKCZwZmRl
di0+ZGV2ZnJlcS5idXN5X2NvdW50KSA+IDApCi0JCXBmZGV2LT5kZXZmcmVxLmJ1c3lfdGltZSAr
PSBrdGltZV9zdWIobm93LCBsYXN0KTsKKwlpZiAoYXRvbWljX3JlYWQoJnBmZGV2ZnJlcS0+YnVz
eV9jb3VudCkgPiAwKQorCQlwZmRldmZyZXEtPmJ1c3lfdGltZSArPSBrdGltZV9zdWIobm93LCBs
YXN0KTsKIAllbHNlCi0JCXBmZGV2LT5kZXZmcmVxLmlkbGVfdGltZSArPSBrdGltZV9zdWIobm93
LCBsYXN0KTsKKwkJcGZkZXZmcmVxLT5pZGxlX3RpbWUgKz0ga3RpbWVfc3ViKG5vdywgbGFzdCk7
CiAKLQlwZmRldi0+ZGV2ZnJlcS50aW1lX2xhc3RfdXBkYXRlID0gbm93OworCXBmZGV2ZnJlcS0+
dGltZV9sYXN0X3VwZGF0ZSA9IG5vdzsKIH0KIAogc3RhdGljIGludCBwYW5mcm9zdF9kZXZmcmVx
X3RhcmdldChzdHJ1Y3QgZGV2aWNlICpkZXYsIHVuc2lnbmVkIGxvbmcgKmZyZXEsCkBAIC00Nywz
MCArNDcsMzEgQEAgc3RhdGljIGludCBwYW5mcm9zdF9kZXZmcmVxX3RhcmdldChzdHJ1Y3QgZGV2
aWNlICpkZXYsIHVuc2lnbmVkIGxvbmcgKmZyZXEsCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyB2
b2lkIHBhbmZyb3N0X2RldmZyZXFfcmVzZXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYp
CitzdGF0aWMgdm9pZCBwYW5mcm9zdF9kZXZmcmVxX3Jlc2V0KHN0cnVjdCBwYW5mcm9zdF9kZXZm
cmVxICpwZmRldmZyZXEpCiB7Ci0JcGZkZXYtPmRldmZyZXEuYnVzeV90aW1lID0gMDsKLQlwZmRl
di0+ZGV2ZnJlcS5pZGxlX3RpbWUgPSAwOwotCXBmZGV2LT5kZXZmcmVxLnRpbWVfbGFzdF91cGRh
dGUgPSBrdGltZV9nZXQoKTsKKwlwZmRldmZyZXEtPmJ1c3lfdGltZSA9IDA7CisJcGZkZXZmcmVx
LT5pZGxlX3RpbWUgPSAwOworCXBmZGV2ZnJlcS0+dGltZV9sYXN0X3VwZGF0ZSA9IGt0aW1lX2dl
dCgpOwogfQogCiBzdGF0aWMgaW50IHBhbmZyb3N0X2RldmZyZXFfZ2V0X2Rldl9zdGF0dXMoc3Ry
dWN0IGRldmljZSAqZGV2LAogCQkJCQkgICBzdHJ1Y3QgZGV2ZnJlcV9kZXZfc3RhdHVzICpzdGF0
dXMpCiB7CiAJc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYgPSBkZXZfZ2V0X2RydmRhdGEo
ZGV2KTsKKwlzdHJ1Y3QgcGFuZnJvc3RfZGV2ZnJlcSAqcGZkZXZmcmVxID0gJnBmZGV2LT5wZmRl
dmZyZXE7CiAKLQlwYW5mcm9zdF9kZXZmcmVxX3VwZGF0ZV91dGlsaXphdGlvbihwZmRldik7CisJ
cGFuZnJvc3RfZGV2ZnJlcV91cGRhdGVfdXRpbGl6YXRpb24ocGZkZXZmcmVxKTsKIAogCXN0YXR1
cy0+Y3VycmVudF9mcmVxdWVuY3kgPSBjbGtfZ2V0X3JhdGUocGZkZXYtPmNsb2NrKTsKLQlzdGF0
dXMtPnRvdGFsX3RpbWUgPSBrdGltZV90b19ucyhrdGltZV9hZGQocGZkZXYtPmRldmZyZXEuYnVz
eV90aW1lLAotCQkJCQkJICAgcGZkZXYtPmRldmZyZXEuaWRsZV90aW1lKSk7CisJc3RhdHVzLT50
b3RhbF90aW1lID0ga3RpbWVfdG9fbnMoa3RpbWVfYWRkKHBmZGV2ZnJlcS0+YnVzeV90aW1lLAor
CQkJCQkJICAgcGZkZXZmcmVxLT5pZGxlX3RpbWUpKTsKIAotCXN0YXR1cy0+YnVzeV90aW1lID0g
a3RpbWVfdG9fbnMocGZkZXYtPmRldmZyZXEuYnVzeV90aW1lKTsKKwlzdGF0dXMtPmJ1c3lfdGlt
ZSA9IGt0aW1lX3RvX25zKHBmZGV2ZnJlcS0+YnVzeV90aW1lKTsKIAotCXBhbmZyb3N0X2RldmZy
ZXFfcmVzZXQocGZkZXYpOworCXBhbmZyb3N0X2RldmZyZXFfcmVzZXQocGZkZXZmcmVxKTsKIAot
CWRldl9kYmcocGZkZXYtPmRldiwgImJ1c3kgJWx1IHRvdGFsICVsdSAlbHUgJSUgZnJlcSAlbHUg
TUh6XG4iLCBzdGF0dXMtPmJ1c3lfdGltZSwKLQkJc3RhdHVzLT50b3RhbF90aW1lLAorCWRldl9k
YmcocGZkZXYtPmRldiwgImJ1c3kgJWx1IHRvdGFsICVsdSAlbHUgJSUgZnJlcSAlbHUgTUh6XG4i
LAorCQlzdGF0dXMtPmJ1c3lfdGltZSwgc3RhdHVzLT50b3RhbF90aW1lLAogCQlzdGF0dXMtPmJ1
c3lfdGltZSAvIChzdGF0dXMtPnRvdGFsX3RpbWUgLyAxMDApLAogCQlzdGF0dXMtPmN1cnJlbnRf
ZnJlcXVlbmN5IC8gMTAwMCAvIDEwMDApOwogCkBAIC05MSw2ICs5Miw3IEBAIGludCBwYW5mcm9z
dF9kZXZmcmVxX2luaXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCiAJc3RydWN0IGRl
dmljZSAqZGV2ID0gJnBmZGV2LT5wZGV2LT5kZXY7CiAJc3RydWN0IGRldmZyZXEgKmRldmZyZXE7
CiAJc3RydWN0IHRoZXJtYWxfY29vbGluZ19kZXZpY2UgKmNvb2xpbmc7CisJc3RydWN0IHBhbmZy
b3N0X2RldmZyZXEgKnBmZGV2ZnJlcSA9ICZwZmRldi0+cGZkZXZmcmVxOwogCiAJcmV0ID0gZGV2
X3BtX29wcF9vZl9hZGRfdGFibGUoZGV2KTsKIAlpZiAocmV0ID09IC1FTk9ERVYpIC8qIE9wdGlv
bmFsLCBjb250aW51ZSB3aXRob3V0IGRldmZyZXEgKi8KQEAgLTk4LDcgKzEwMCw3IEBAIGludCBw
YW5mcm9zdF9kZXZmcmVxX2luaXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCiAJZWxz
ZSBpZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCi0JcGFuZnJvc3RfZGV2ZnJlcV9yZXNldChwZmRl
dik7CisJcGFuZnJvc3RfZGV2ZnJlcV9yZXNldChwZmRldmZyZXEpOwogCiAJY3VyX2ZyZXEgPSBj
bGtfZ2V0X3JhdGUocGZkZXYtPmNsb2NrKTsKIApAQCAtMTE2LDUzICsxMTgsNTkgQEAgaW50IHBh
bmZyb3N0X2RldmZyZXFfaW5pdChzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldikKIAkJZGV2
X3BtX29wcF9vZl9yZW1vdmVfdGFibGUoZGV2KTsKIAkJcmV0dXJuIFBUUl9FUlIoZGV2ZnJlcSk7
CiAJfQotCXBmZGV2LT5kZXZmcmVxLmRldmZyZXEgPSBkZXZmcmVxOworCXBmZGV2ZnJlcS0+ZGV2
ZnJlcSA9IGRldmZyZXE7CiAKIAljb29saW5nID0gb2ZfZGV2ZnJlcV9jb29saW5nX3JlZ2lzdGVy
KGRldi0+b2Zfbm9kZSwgZGV2ZnJlcSk7CiAJaWYgKElTX0VSUihjb29saW5nKSkKIAkJRFJNX0RF
Vl9JTkZPKGRldiwgIkZhaWxlZCB0byByZWdpc3RlciBjb29saW5nIGRldmljZVxuIik7CiAJZWxz
ZQotCQlwZmRldi0+ZGV2ZnJlcS5jb29saW5nID0gY29vbGluZzsKKwkJcGZkZXZmcmVxLT5jb29s
aW5nID0gY29vbGluZzsKIAogCXJldHVybiAwOwogfQogCiB2b2lkIHBhbmZyb3N0X2RldmZyZXFf
ZmluaShzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldikKIHsKLQlpZiAocGZkZXYtPmRldmZy
ZXEuY29vbGluZykKLQkJZGV2ZnJlcV9jb29saW5nX3VucmVnaXN0ZXIocGZkZXYtPmRldmZyZXEu
Y29vbGluZyk7CisJc3RydWN0IHBhbmZyb3N0X2RldmZyZXEgKnBmZGV2ZnJlcSA9ICZwZmRldi0+
cGZkZXZmcmVxOworCisJaWYgKHBmZGV2ZnJlcS0+Y29vbGluZykKKwkJZGV2ZnJlcV9jb29saW5n
X3VucmVnaXN0ZXIocGZkZXZmcmVxLT5jb29saW5nKTsKIAlkZXZfcG1fb3BwX29mX3JlbW92ZV90
YWJsZSgmcGZkZXYtPnBkZXYtPmRldik7CiB9CiAKIHZvaWQgcGFuZnJvc3RfZGV2ZnJlcV9yZXN1
bWUoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCiB7Ci0JaWYgKCFwZmRldi0+ZGV2ZnJl
cS5kZXZmcmVxKQorCXN0cnVjdCBwYW5mcm9zdF9kZXZmcmVxICpwZmRldmZyZXEgPSAmcGZkZXYt
PnBmZGV2ZnJlcTsKKworCWlmICghcGZkZXZmcmVxLT5kZXZmcmVxKQogCQlyZXR1cm47CiAKLQlw
YW5mcm9zdF9kZXZmcmVxX3Jlc2V0KHBmZGV2KTsKKwlwYW5mcm9zdF9kZXZmcmVxX3Jlc2V0KHBm
ZGV2ZnJlcSk7CiAKLQlkZXZmcmVxX3Jlc3VtZV9kZXZpY2UocGZkZXYtPmRldmZyZXEuZGV2ZnJl
cSk7CisJZGV2ZnJlcV9yZXN1bWVfZGV2aWNlKHBmZGV2ZnJlcS0+ZGV2ZnJlcSk7CiB9CiAKIHZv
aWQgcGFuZnJvc3RfZGV2ZnJlcV9zdXNwZW5kKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2
KQogewotCWlmICghcGZkZXYtPmRldmZyZXEuZGV2ZnJlcSkKKwlzdHJ1Y3QgcGFuZnJvc3RfZGV2
ZnJlcSAqcGZkZXZmcmVxID0gJnBmZGV2LT5wZmRldmZyZXE7CisKKwlpZiAoIXBmZGV2ZnJlcS0+
ZGV2ZnJlcSkKIAkJcmV0dXJuOwogCi0JZGV2ZnJlcV9zdXNwZW5kX2RldmljZShwZmRldi0+ZGV2
ZnJlcS5kZXZmcmVxKTsKKwlkZXZmcmVxX3N1c3BlbmRfZGV2aWNlKHBmZGV2ZnJlcS0+ZGV2ZnJl
cSk7CiB9CiAKLXZvaWQgcGFuZnJvc3RfZGV2ZnJlcV9yZWNvcmRfYnVzeShzdHJ1Y3QgcGFuZnJv
c3RfZGV2aWNlICpwZmRldikKK3ZvaWQgcGFuZnJvc3RfZGV2ZnJlcV9yZWNvcmRfYnVzeShzdHJ1
Y3QgcGFuZnJvc3RfZGV2ZnJlcSAqcGZkZXZmcmVxKQogewotCXBhbmZyb3N0X2RldmZyZXFfdXBk
YXRlX3V0aWxpemF0aW9uKHBmZGV2KTsKLQlhdG9taWNfaW5jKCZwZmRldi0+ZGV2ZnJlcS5idXN5
X2NvdW50KTsKKwlwYW5mcm9zdF9kZXZmcmVxX3VwZGF0ZV91dGlsaXphdGlvbihwZmRldmZyZXEp
OworCWF0b21pY19pbmMoJnBmZGV2ZnJlcS0+YnVzeV9jb3VudCk7CiB9CiAKLXZvaWQgcGFuZnJv
c3RfZGV2ZnJlcV9yZWNvcmRfaWRsZShzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldikKK3Zv
aWQgcGFuZnJvc3RfZGV2ZnJlcV9yZWNvcmRfaWRsZShzdHJ1Y3QgcGFuZnJvc3RfZGV2ZnJlcSAq
cGZkZXZmcmVxKQogewogCWludCBjb3VudDsKIAotCXBhbmZyb3N0X2RldmZyZXFfdXBkYXRlX3V0
aWxpemF0aW9uKHBmZGV2KTsKLQljb3VudCA9IGF0b21pY19kZWNfaWZfcG9zaXRpdmUoJnBmZGV2
LT5kZXZmcmVxLmJ1c3lfY291bnQpOworCXBhbmZyb3N0X2RldmZyZXFfdXBkYXRlX3V0aWxpemF0
aW9uKHBmZGV2ZnJlcSk7CisJY291bnQgPSBhdG9taWNfZGVjX2lmX3Bvc2l0aXZlKCZwZmRldmZy
ZXEtPmJ1c3lfY291bnQpOwogCVdBUk5fT04oY291bnQgPCAwKTsKIH0KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZmcmVxLmggYi9kcml2ZXJzL2dwdS9k
cm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2ZnJlcS5oCmluZGV4IDA2MTFiZWZmYzhkMC4uMDY5N2Y4
ZDVhYTM0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2
ZnJlcS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZmcmVxLmgK
QEAgLTQsMTMgKzQsMjkgQEAKICNpZm5kZWYgX19QQU5GUk9TVF9ERVZGUkVRX0hfXwogI2RlZmlu
ZSBfX1BBTkZST1NUX0RFVkZSRVFfSF9fCiAKKyNpbmNsdWRlIDxsaW51eC9rdGltZS5oPgorCitz
dHJ1Y3QgZGV2ZnJlcTsKK3N0cnVjdCB0aGVybWFsX2Nvb2xpbmdfZGV2aWNlOworCitzdHJ1Y3Qg
cGFuZnJvc3RfZGV2aWNlOworCitzdHJ1Y3QgcGFuZnJvc3RfZGV2ZnJlcSB7CisJc3RydWN0IGRl
dmZyZXEgKmRldmZyZXE7CisJc3RydWN0IHRoZXJtYWxfY29vbGluZ19kZXZpY2UgKmNvb2xpbmc7
CisJa3RpbWVfdCBidXN5X3RpbWU7CisJa3RpbWVfdCBpZGxlX3RpbWU7CisJa3RpbWVfdCB0aW1l
X2xhc3RfdXBkYXRlOworCWF0b21pY190IGJ1c3lfY291bnQ7Cit9OworCiBpbnQgcGFuZnJvc3Rf
ZGV2ZnJlcV9pbml0KHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KTsKIHZvaWQgcGFuZnJv
c3RfZGV2ZnJlcV9maW5pKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KTsKIAogdm9pZCBw
YW5mcm9zdF9kZXZmcmVxX3Jlc3VtZShzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldik7CiB2
b2lkIHBhbmZyb3N0X2RldmZyZXFfc3VzcGVuZChzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRl
dik7CiAKLXZvaWQgcGFuZnJvc3RfZGV2ZnJlcV9yZWNvcmRfYnVzeShzdHJ1Y3QgcGFuZnJvc3Rf
ZGV2aWNlICpwZmRldik7Ci12b2lkIHBhbmZyb3N0X2RldmZyZXFfcmVjb3JkX2lkbGUoc3RydWN0
IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpOwordm9pZCBwYW5mcm9zdF9kZXZmcmVxX3JlY29yZF9i
dXN5KHN0cnVjdCBwYW5mcm9zdF9kZXZmcmVxICpkZXZmcmVxKTsKK3ZvaWQgcGFuZnJvc3RfZGV2
ZnJlcV9yZWNvcmRfaWRsZShzdHJ1Y3QgcGFuZnJvc3RfZGV2ZnJlcSAqZGV2ZnJlcSk7CiAKICNl
bmRpZiAvKiBfX1BBTkZST1NUX0RFVkZSRVFfSF9fICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmggYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJv
c3QvcGFuZnJvc3RfZGV2aWNlLmgKaW5kZXggYzMwYzcxOWE4MDU5Li4yZWZhNTljOWQxYzUgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2UuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmgKQEAgLTEzLDYgKzEz
LDggQEAKICNpbmNsdWRlIDxkcm0vZHJtX21tLmg+CiAjaW5jbHVkZSA8ZHJtL2dwdV9zY2hlZHVs
ZXIuaD4KIAorI2luY2x1ZGUgInBhbmZyb3N0X2RldmZyZXEuaCIKKwogc3RydWN0IHBhbmZyb3N0
X2RldmljZTsKIHN0cnVjdCBwYW5mcm9zdF9tbXU7CiBzdHJ1Y3QgcGFuZnJvc3Rfam9iX3Nsb3Q7
CkBAIC0xMDcsMTQgKzEwOSw3IEBAIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgewogCXN0cnVjdCBs
aXN0X2hlYWQgc2hyaW5rZXJfbGlzdDsKIAlzdHJ1Y3Qgc2hyaW5rZXIgc2hyaW5rZXI7CiAKLQlz
dHJ1Y3QgewotCQlzdHJ1Y3QgZGV2ZnJlcSAqZGV2ZnJlcTsKLQkJc3RydWN0IHRoZXJtYWxfY29v
bGluZ19kZXZpY2UgKmNvb2xpbmc7Ci0JCWt0aW1lX3QgYnVzeV90aW1lOwotCQlrdGltZV90IGlk
bGVfdGltZTsKLQkJa3RpbWVfdCB0aW1lX2xhc3RfdXBkYXRlOwotCQlhdG9taWNfdCBidXN5X2Nv
dW50OwotCX0gZGV2ZnJlcTsKKwlzdHJ1Y3QgcGFuZnJvc3RfZGV2ZnJlcSBwZmRldmZyZXE7CiB9
OwogCiBzdHJ1Y3QgcGFuZnJvc3RfbW11IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9w
YW5mcm9zdC9wYW5mcm9zdF9qb2IuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9z
dF9qb2IuYwppbmRleCA2M2UzMmE5ZjI3NDkuLmE2N2YzZWFjNmE1OCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9wYW5mcm9zdC9wYW5mcm9zdF9qb2IuYwpAQCAtMTU1LDcgKzE1NSw3IEBAIHN0YXRpYyB2b2lk
IHBhbmZyb3N0X2pvYl9od19zdWJtaXQoc3RydWN0IHBhbmZyb3N0X2pvYiAqam9iLCBpbnQganMp
CiAJfQogCiAJY2ZnID0gcGFuZnJvc3RfbW11X2FzX2dldChwZmRldiwgJmpvYi0+ZmlsZV9wcml2
LT5tbXUpOwotCXBhbmZyb3N0X2RldmZyZXFfcmVjb3JkX2J1c3kocGZkZXYpOworCXBhbmZyb3N0
X2RldmZyZXFfcmVjb3JkX2J1c3koJnBmZGV2LT5wZmRldmZyZXEpOwogCiAJam9iX3dyaXRlKHBm
ZGV2LCBKU19IRUFEX05FWFRfTE8oanMpLCBqY19oZWFkICYgMHhGRkZGRkZGRik7CiAJam9iX3dy
aXRlKHBmZGV2LCBKU19IRUFEX05FWFRfSEkoanMpLCBqY19oZWFkID4+IDMyKTsKQEAgLTQxNSw3
ICs0MTUsNyBAQCBzdGF0aWMgdm9pZCBwYW5mcm9zdF9qb2JfdGltZWRvdXQoc3RydWN0IGRybV9z
Y2hlZF9qb2IgKnNjaGVkX2pvYikKIAl9CiAJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmcGZkZXYt
PmpzLT5qb2JfbG9jaywgZmxhZ3MpOwogCi0JcGFuZnJvc3RfZGV2ZnJlcV9yZWNvcmRfaWRsZShw
ZmRldik7CisJcGFuZnJvc3RfZGV2ZnJlcV9yZWNvcmRfaWRsZSgmcGZkZXYtPnBmZGV2ZnJlcSk7
CiAJcGFuZnJvc3RfZGV2aWNlX3Jlc2V0KHBmZGV2KTsKIAogCWZvciAoaSA9IDA7IGkgPCBOVU1f
Sk9CX1NMT1RTOyBpKyspCkBAIC00NzgsNyArNDc4LDcgQEAgc3RhdGljIGlycXJldHVybl90IHBh
bmZyb3N0X2pvYl9pcnFfaGFuZGxlcihpbnQgaXJxLCB2b2lkICpkYXRhKQogCQkJCXBmZGV2LT5q
b2JzW2pdID0gTlVMTDsKIAogCQkJCXBhbmZyb3N0X21tdV9hc19wdXQocGZkZXYsICZqb2ItPmZp
bGVfcHJpdi0+bW11KTsKLQkJCQlwYW5mcm9zdF9kZXZmcmVxX3JlY29yZF9pZGxlKHBmZGV2KTsK
KwkJCQlwYW5mcm9zdF9kZXZmcmVxX3JlY29yZF9pZGxlKCZwZmRldi0+cGZkZXZmcmVxKTsKIAog
CQkJCWRtYV9mZW5jZV9zaWduYWxfbG9ja2VkKGpvYi0+ZG9uZV9mZW5jZSk7CiAJCQkJcG1fcnVu
dGltZV9wdXRfYXV0b3N1c3BlbmQocGZkZXYtPmRldik7Ci0tIAoyLjI1LjEKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
