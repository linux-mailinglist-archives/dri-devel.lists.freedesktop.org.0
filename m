Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 83075E1BF9
	for <lists+dri-devel@lfdr.de>; Wed, 23 Oct 2019 15:14:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AA35F6EA99;
	Wed, 23 Oct 2019 13:14:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from us-smtp-delivery-1.mimecast.com (us-smtp-1.mimecast.com
 [207.211.31.81])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 38AD16EA99
 for <dri-devel@lists.freedesktop.org>; Wed, 23 Oct 2019 13:14:28 +0000 (UTC)
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-295-p1Bzi35XNCiDsbI1W_34VA-1; Wed, 23 Oct 2019 09:14:23 -0400
Received: from smtp.corp.redhat.com (int-mx01.intmail.prod.int.phx2.redhat.com
 [10.5.11.11])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 5AA7B800D58;
 Wed, 23 Oct 2019 13:14:17 +0000 (UTC)
Received: from jason-ThinkPad-X1-Carbon-6th.redhat.com
 (ovpn-12-126.pek2.redhat.com [10.72.12.126])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 90B7460161;
 Wed, 23 Oct 2019 13:11:00 +0000 (UTC)
From: Jason Wang <jasowang@redhat.com>
To: kvm@vger.kernel.org, linux-s390@vger.kernel.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 intel-gfx@lists.freedesktop.org, intel-gvt-dev@lists.freedesktop.org,
 kwankhede@nvidia.com, alex.williamson@redhat.com, mst@redhat.com,
 tiwei.bie@intel.com
Subject: [PATCH V5 1/6] mdev: class id support
Date: Wed, 23 Oct 2019 21:07:47 +0800
Message-Id: <20191023130752.18980-2-jasowang@redhat.com>
In-Reply-To: <20191023130752.18980-1-jasowang@redhat.com>
References: <20191023130752.18980-1-jasowang@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.11
X-MC-Unique: p1Bzi35XNCiDsbI1W_34VA-1
X-Mimecast-Spam-Score: 0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=redhat.com; 
 s=mimecast20190719; t=1571836467;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=TjCPajc4CEGR5rS6ag/k9ArXmJclaoe4P99dbfRjJ0k=;
 b=FFzYOHOp5bgyHv0UgvTqBFGERcfrWY5YIROkg1QANj2GybafZtrmKe1680U4G+H24Ghz6Y
 mO2Yz0wBjfsBX6lcXr5FZpdSPO0qofxjmsll8qcN50SXCv0LVx4Ss5CWnW8OlnGu3GbDLZ
 nVESK3Mlw3hvDFsd3USaekz2a6OnFTo=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: christophe.de.dinechin@gmail.com, sebott@linux.ibm.com, airlied@linux.ie,
 Jason Wang <jasowang@redhat.com>, heiko.carstens@de.ibm.com,
 kevin.tian@intel.com, virtualization@lists.linux-foundation.org,
 rob.miller@broadcom.com, lulu@redhat.com, eperezma@redhat.com,
 pasic@linux.ibm.com, borntraeger@de.ibm.com, haotian.wang@sifive.com,
 zhi.a.wang@intel.com, farman@linux.ibm.com, idos@mellanox.com,
 gor@linux.ibm.com, cunming.liang@intel.com, rodrigo.vivi@intel.com,
 xiao.w.wang@intel.com, freude@linux.ibm.com, parav@mellanox.com,
 zhihong.wang@intel.com, stefanha@redhat.com, akrowiak@linux.ibm.com,
 netdev@vger.kernel.org, cohuck@redhat.com, oberpar@linux.ibm.com,
 maxime.coquelin@redhat.com, lingshan.zhu@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TWRldiBidXMgb25seSBzdXBwb3J0cyB2ZmlvIGRyaXZlciByaWdodCBub3csIHNvIGl0IGRvZXNu
J3QgaW1wbGVtZW50Cm1hdGNoIG1ldGhvZC4gQnV0IGluIHRoZSBmdXR1cmUsIHdlIG1heSBhZGQg
ZHJpdmVycyBvdGhlciB0aGFuIHZmaW8sCnRoZSBmaXJzdCBkcml2ZXIgY291bGQgYmUgdmlydGlv
LW1kZXYuIFRoaXMgbWVhbnMgd2UgbmVlZCB0byBhZGQKZGV2aWNlIGNsYXNzIGlkIHN1cHBvcnQg
aW4gYnVzIG1hdGNoIG1ldGhvZCB0byBwYWlyIHRoZSBtZGV2IGRldmljZQphbmQgbWRldiBkcml2
ZXIgY29ycmVjdGx5LgoKU28gdGhpcyBwYXRjaCBhZGRzIGlkX3RhYmxlIHRvIG1kZXZfZHJpdmVy
IGFuZCBjbGFzc19pZCBmb3IgbWRldgpkZXZpY2Ugd2l0aCB0aGUgbWF0Y2ggbWV0aG9kIGZvciBt
ZGV2IGJ1cy4KClNpZ25lZC1vZmYtYnk6IEphc29uIFdhbmcgPGphc293YW5nQHJlZGhhdC5jb20+
Ci0tLQogLi4uL2RyaXZlci1hcGkvdmZpby1tZWRpYXRlZC1kZXZpY2UucnN0ICAgICAgIHwgIDUg
KysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9rdm1ndC5jICAgICAgICAgICAgICB8ICAx
ICsKIGRyaXZlcnMvczM5MC9jaW8vdmZpb19jY3dfb3BzLmMgICAgICAgICAgICAgICB8ICAxICsK
IGRyaXZlcnMvczM5MC9jcnlwdG8vdmZpb19hcF9vcHMuYyAgICAgICAgICAgICB8ICAxICsKIGRy
aXZlcnMvdmZpby9tZGV2L21kZXZfY29yZS5jICAgICAgICAgICAgICAgICB8IDE4ICsrKysrKysr
KysrKysrKwogZHJpdmVycy92ZmlvL21kZXYvbWRldl9kcml2ZXIuYyAgICAgICAgICAgICAgIHwg
MjIgKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy92ZmlvL21kZXYvbWRldl9wcml2YXRlLmgg
ICAgICAgICAgICAgIHwgIDEgKwogZHJpdmVycy92ZmlvL21kZXYvdmZpb19tZGV2LmMgICAgICAg
ICAgICAgICAgIHwgIDYgKysrKysKIGluY2x1ZGUvbGludXgvbWRldi5oICAgICAgICAgICAgICAg
ICAgICAgICAgICB8ICA4ICsrKysrKysKIGluY2x1ZGUvbGludXgvbW9kX2RldmljZXRhYmxlLmgg
ICAgICAgICAgICAgICB8ICA4ICsrKysrKysKIHNhbXBsZXMvdmZpby1tZGV2L21ib2Nocy5jICAg
ICAgICAgICAgICAgICAgICB8ICAxICsKIHNhbXBsZXMvdmZpby1tZGV2L21kcHkuYyAgICAgICAg
ICAgICAgICAgICAgICB8ICAxICsKIHNhbXBsZXMvdmZpby1tZGV2L210dHkuYyAgICAgICAgICAg
ICAgICAgICAgICB8ICAxICsKIDEzIGZpbGVzIGNoYW5nZWQsIDc0IGluc2VydGlvbnMoKykKCmRp
ZmYgLS1naXQgYS9Eb2N1bWVudGF0aW9uL2RyaXZlci1hcGkvdmZpby1tZWRpYXRlZC1kZXZpY2Uu
cnN0IGIvRG9jdW1lbnRhdGlvbi9kcml2ZXItYXBpL3ZmaW8tbWVkaWF0ZWQtZGV2aWNlLnJzdApp
bmRleCAyNWViN2Q1YjgzNGIuLjY3MDk0MTNiZWUyOSAxMDA2NDQKLS0tIGEvRG9jdW1lbnRhdGlv
bi9kcml2ZXItYXBpL3ZmaW8tbWVkaWF0ZWQtZGV2aWNlLnJzdAorKysgYi9Eb2N1bWVudGF0aW9u
L2RyaXZlci1hcGkvdmZpby1tZWRpYXRlZC1kZXZpY2UucnN0CkBAIC0xMDIsMTIgKzEwMiwxNCBA
QCBzdHJ1Y3R1cmUgdG8gcmVwcmVzZW50IGEgbWVkaWF0ZWQgZGV2aWNlJ3MgZHJpdmVyOjoKICAg
ICAgICogQHByb2JlOiBjYWxsZWQgd2hlbiBuZXcgZGV2aWNlIGNyZWF0ZWQKICAgICAgICogQHJl
bW92ZTogY2FsbGVkIHdoZW4gZGV2aWNlIHJlbW92ZWQKICAgICAgICogQGRyaXZlcjogZGV2aWNl
IGRyaXZlciBzdHJ1Y3R1cmUKKyAgICAgICogQGlkX3RhYmxlOiB0aGUgaWRzIHNlcnZpY2VkIGJ5
IHRoaXMgZHJpdmVyCiAgICAgICAqLwogICAgICBzdHJ1Y3QgbWRldl9kcml2ZXIgewogCSAgICAg
Y29uc3QgY2hhciAqbmFtZTsKIAkgICAgIGludCAgKCpwcm9iZSkgIChzdHJ1Y3QgZGV2aWNlICpk
ZXYpOwogCSAgICAgdm9pZCAoKnJlbW92ZSkgKHN0cnVjdCBkZXZpY2UgKmRldik7CiAJICAgICBz
dHJ1Y3QgZGV2aWNlX2RyaXZlciAgICBkcml2ZXI7CisJICAgICBjb25zdCBzdHJ1Y3QgbWRldl9j
bGFzc19pZCAqaWRfdGFibGU7CiAgICAgIH07CiAKIEEgbWVkaWF0ZWQgYnVzIGRyaXZlciBmb3Ig
bWRldiBzaG91bGQgdXNlIHRoaXMgc3RydWN0dXJlIGluIHRoZSBmdW5jdGlvbiBjYWxscwpAQCAt
MTcwLDYgKzE3Miw5IEBAIHRoYXQgYSBkcml2ZXIgc2hvdWxkIHVzZSB0byB1bnJlZ2lzdGVyIGl0
c2VsZiB3aXRoIHRoZSBtZGV2IGNvcmUgZHJpdmVyOjoKIAogCWV4dGVybiB2b2lkIG1kZXZfdW5y
ZWdpc3Rlcl9kZXZpY2Uoc3RydWN0IGRldmljZSAqZGV2KTsKIAorSXQgaXMgYWxzbyByZXF1aXJl
ZCB0byBzcGVjaWZ5IHRoZSBjbGFzc19pZCBpbiBjcmVhdGUoKSBjYWxsYmFjayB0aHJvdWdoOjoK
KworCWludCBtZGV2X3NldF9jbGFzcyhzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUxNiBpZCk7
CiAKIE1lZGlhdGVkIERldmljZSBNYW5hZ2VtZW50IEludGVyZmFjZSBUaHJvdWdoIHN5c2ZzCiA9
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2t2bWd0LmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9ndnQva3ZtZ3QuYwppbmRleCAzNDNkNzljMWNiN2UuLjY0MjBmMGRiZDMxYiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2t2bWd0LmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ3Z0L2t2bWd0LmMKQEAgLTY3OCw2ICs2NzgsNyBAQCBzdGF0aWMgaW50IGludGVs
X3ZncHVfY3JlYXRlKHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3QgbWRldl9kZXZpY2UgKm1k
ZXYpCiAJCSAgICAgZGV2X25hbWUobWRldl9kZXYobWRldikpKTsKIAlyZXQgPSAwOwogCisJbWRl
dl9zZXRfY2xhc3MobWRldiwgTURFVl9DTEFTU19JRF9WRklPKTsKIG91dDoKIAlyZXR1cm4gcmV0
OwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9zMzkwL2Npby92ZmlvX2Njd19vcHMuYyBiL2RyaXZl
cnMvczM5MC9jaW8vdmZpb19jY3dfb3BzLmMKaW5kZXggZjBkNzFhYjc3YzUwLi5jZjJjMDEzYWUz
MmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvczM5MC9jaW8vdmZpb19jY3dfb3BzLmMKKysrIGIvZHJp
dmVycy9zMzkwL2Npby92ZmlvX2Njd19vcHMuYwpAQCAtMTI5LDYgKzEyOSw3IEBAIHN0YXRpYyBp
bnQgdmZpb19jY3dfbWRldl9jcmVhdGUoc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBtZGV2
X2RldmljZSAqbWRldikKIAkJCSAgIHByaXZhdGUtPnNjaC0+c2NoaWQuc3NpZCwKIAkJCSAgIHBy
aXZhdGUtPnNjaC0+c2NoaWQuc2NoX25vKTsKIAorCW1kZXZfc2V0X2NsYXNzKG1kZXYsIE1ERVZf
Q0xBU1NfSURfVkZJTyk7CiAJcmV0dXJuIDA7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvczM5
MC9jcnlwdG8vdmZpb19hcF9vcHMuYyBiL2RyaXZlcnMvczM5MC9jcnlwdG8vdmZpb19hcF9vcHMu
YwppbmRleCA1YzBmNTNjNmRkZTcuLjA3YzMxMDcwYWZlYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9z
MzkwL2NyeXB0by92ZmlvX2FwX29wcy5jCisrKyBiL2RyaXZlcnMvczM5MC9jcnlwdG8vdmZpb19h
cF9vcHMuYwpAQCAtMzQzLDYgKzM0Myw3IEBAIHN0YXRpYyBpbnQgdmZpb19hcF9tZGV2X2NyZWF0
ZShzdHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IG1kZXZfZGV2aWNlICptZGV2KQogCWxpc3Rf
YWRkKCZtYXRyaXhfbWRldi0+bm9kZSwgJm1hdHJpeF9kZXYtPm1kZXZfbGlzdCk7CiAJbXV0ZXhf
dW5sb2NrKCZtYXRyaXhfZGV2LT5sb2NrKTsKIAorCW1kZXZfc2V0X2NsYXNzKG1kZXYsIE1ERVZf
Q0xBU1NfSURfVkZJTyk7CiAJcmV0dXJuIDA7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmZp
by9tZGV2L21kZXZfY29yZS5jIGIvZHJpdmVycy92ZmlvL21kZXYvbWRldl9jb3JlLmMKaW5kZXgg
YjU1OGQ0Y2ZkMDgyLi4zYTljNTJkNzFiNGUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmZpby9tZGV2
L21kZXZfY29yZS5jCisrKyBiL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfY29yZS5jCkBAIC00NSw2
ICs0NSwxNiBAQCB2b2lkIG1kZXZfc2V0X2RydmRhdGEoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2
LCB2b2lkICpkYXRhKQogfQogRVhQT1JUX1NZTUJPTChtZGV2X3NldF9kcnZkYXRhKTsKIAorLyog
U3BlY2lmeSB0aGUgY2xhc3MgZm9yIHRoZSBtZGV2IGRldmljZSwgdGhpcyBtdXN0IGJlIGNhbGxl
ZCBkdXJpbmcKKyAqIGNyZWF0ZSgpIGNhbGxiYWNrLgorICovCit2b2lkIG1kZXZfc2V0X2NsYXNz
KHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdTE2IGlkKQoreworCVdBUk5fT04obWRldi0+Y2xh
c3NfaWQpOworCW1kZXYtPmNsYXNzX2lkID0gaWQ7Cit9CitFWFBPUlRfU1lNQk9MKG1kZXZfc2V0
X2NsYXNzKTsKKwogc3RydWN0IGRldmljZSAqbWRldl9kZXYoc3RydWN0IG1kZXZfZGV2aWNlICpt
ZGV2KQogewogCXJldHVybiAmbWRldi0+ZGV2OwpAQCAtMTM1LDYgKzE0NSw3IEBAIHN0YXRpYyBp
bnQgbWRldl9kZXZpY2VfcmVtb3ZlX2NiKHN0cnVjdCBkZXZpY2UgKmRldiwgdm9pZCAqZGF0YSkK
ICAqIG1kZXZfcmVnaXN0ZXJfZGV2aWNlIDogUmVnaXN0ZXIgYSBkZXZpY2UKICAqIEBkZXY6IGRl
dmljZSBzdHJ1Y3R1cmUgcmVwcmVzZW50aW5nIHBhcmVudCBkZXZpY2UuCiAgKiBAb3BzOiBQYXJl
bnQgZGV2aWNlIG9wZXJhdGlvbiBzdHJ1Y3R1cmUgdG8gYmUgcmVnaXN0ZXJlZC4KKyAqIEBpZDog
Y2xhc3MgaWQuCiAgKgogICogQWRkIGRldmljZSB0byBsaXN0IG9mIHJlZ2lzdGVyZWQgcGFyZW50
IGRldmljZXMuCiAgKiBSZXR1cm5zIGEgbmVnYXRpdmUgdmFsdWUgb24gZXJyb3IsIG90aGVyd2lz
ZSAwLgpAQCAtMzI0LDYgKzMzNSwxMyBAQCBpbnQgbWRldl9kZXZpY2VfY3JlYXRlKHN0cnVjdCBr
b2JqZWN0ICprb2JqLAogCWlmIChyZXQpCiAJCWdvdG8gb3BzX2NyZWF0ZV9mYWlsOwogCisJaWYg
KCFtZGV2LT5jbGFzc19pZCkgeworCQlyZXQgPSAtRUlOVkFMOworCQlXQVJOKDEsICJjbGFzcyBp
ZCBtdXN0IGJlIHNwZWNpZmllZCBmb3IgZGV2aWNlICVzXG4iLAorCQkgICAgIGRldl9uYW1lKGRl
dikpOworCQlnb3RvIGFkZF9mYWlsOworCX0KKwogCXJldCA9IGRldmljZV9hZGQoJm1kZXYtPmRl
dik7CiAJaWYgKHJldCkKIAkJZ290byBhZGRfZmFpbDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmZp
by9tZGV2L21kZXZfZHJpdmVyLmMgYi9kcml2ZXJzL3ZmaW8vbWRldi9tZGV2X2RyaXZlci5jCmlu
ZGV4IDBkMzIyM2FlZTIwYi4uMzE5ZDg4NmZmYWY3IDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZmaW8v
bWRldi9tZGV2X2RyaXZlci5jCisrKyBiL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfZHJpdmVyLmMK
QEAgLTY5LDggKzY5LDMwIEBAIHN0YXRpYyBpbnQgbWRldl9yZW1vdmUoc3RydWN0IGRldmljZSAq
ZGV2KQogCXJldHVybiAwOwogfQogCitzdGF0aWMgaW50IG1kZXZfbWF0Y2goc3RydWN0IGRldmlj
ZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlX2RyaXZlciAqZHJ2KQoreworCXVuc2lnbmVkIGludCBpOwor
CXN0cnVjdCBtZGV2X2RldmljZSAqbWRldiA9IHRvX21kZXZfZGV2aWNlKGRldik7CisJc3RydWN0
IG1kZXZfZHJpdmVyICptZHJ2ID0gdG9fbWRldl9kcml2ZXIoZHJ2KTsKKwljb25zdCBzdHJ1Y3Qg
bWRldl9jbGFzc19pZCAqaWRzID0gbWRydi0+aWRfdGFibGU7CisKKwlmb3IgKGkgPSAwOyBpZHNb
aV0uaWQ7IGkrKykKKwkJaWYgKGlkc1tpXS5pZCA9PSBtZGV2LT5jbGFzc19pZCkKKwkJCXJldHVy
biAxOworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IG1kZXZfdWV2ZW50KHN0cnVjdCBkZXZp
Y2UgKmRldiwgc3RydWN0IGtvYmpfdWV2ZW50X2VudiAqZW52KQoreworCXN0cnVjdCBtZGV2X2Rl
dmljZSAqbWRldiA9IHRvX21kZXZfZGV2aWNlKGRldik7CisKKwlyZXR1cm4gYWRkX3VldmVudF92
YXIoZW52LCAiTU9EQUxJQVM9bWRldjpjJTAyWCIsIG1kZXYtPmNsYXNzX2lkKTsKK30KKwogc3Ry
dWN0IGJ1c190eXBlIG1kZXZfYnVzX3R5cGUgPSB7CiAJLm5hbWUJCT0gIm1kZXYiLAorCS5tYXRj
aAkJPSBtZGV2X21hdGNoLAorCS51ZXZlbnQJCT0gbWRldl91ZXZlbnQsCiAJLnByb2JlCQk9IG1k
ZXZfcHJvYmUsCiAJLnJlbW92ZQkJPSBtZGV2X3JlbW92ZSwKIH07CmRpZmYgLS1naXQgYS9kcml2
ZXJzL3ZmaW8vbWRldi9tZGV2X3ByaXZhdGUuaCBiL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfcHJp
dmF0ZS5oCmluZGV4IDdkOTIyOTUwY2FhZi4uYzY1ZjQzNmMxODY5IDEwMDY0NAotLS0gYS9kcml2
ZXJzL3ZmaW8vbWRldi9tZGV2X3ByaXZhdGUuaAorKysgYi9kcml2ZXJzL3ZmaW8vbWRldi9tZGV2
X3ByaXZhdGUuaApAQCAtMzMsNiArMzMsNyBAQCBzdHJ1Y3QgbWRldl9kZXZpY2UgewogCXN0cnVj
dCBrb2JqZWN0ICp0eXBlX2tvYmo7CiAJc3RydWN0IGRldmljZSAqaW9tbXVfZGV2aWNlOwogCWJv
b2wgYWN0aXZlOworCXUxNiBjbGFzc19pZDsKIH07CiAKICNkZWZpbmUgdG9fbWRldl9kZXZpY2Uo
ZGV2KQljb250YWluZXJfb2YoZGV2LCBzdHJ1Y3QgbWRldl9kZXZpY2UsIGRldikKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvdmZpby9tZGV2L3ZmaW9fbWRldi5jIGIvZHJpdmVycy92ZmlvL21kZXYvdmZp
b19tZGV2LmMKaW5kZXggMzA5NjRhNGUwYTI4Li43YjI0ZWU5Y2I4ZGQgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvdmZpby9tZGV2L3ZmaW9fbWRldi5jCisrKyBiL2RyaXZlcnMvdmZpby9tZGV2L3ZmaW9f
bWRldi5jCkBAIC0xMjAsMTAgKzEyMCwxNiBAQCBzdGF0aWMgdm9pZCB2ZmlvX21kZXZfcmVtb3Zl
KHN0cnVjdCBkZXZpY2UgKmRldikKIAl2ZmlvX2RlbF9ncm91cF9kZXYoZGV2KTsKIH0KIAorc3Rh
dGljIGNvbnN0IHN0cnVjdCBtZGV2X2NsYXNzX2lkIGlkX3RhYmxlW10gPSB7CisJeyBNREVWX0NM
QVNTX0lEX1ZGSU8gfSwKKwl7IDAgfSwKK307CisKIHN0YXRpYyBzdHJ1Y3QgbWRldl9kcml2ZXIg
dmZpb19tZGV2X2RyaXZlciA9IHsKIAkubmFtZQk9ICJ2ZmlvX21kZXYiLAogCS5wcm9iZQk9IHZm
aW9fbWRldl9wcm9iZSwKIAkucmVtb3ZlCT0gdmZpb19tZGV2X3JlbW92ZSwKKwkuaWRfdGFibGUg
PSBpZF90YWJsZSwKIH07CiAKIHN0YXRpYyBpbnQgX19pbml0IHZmaW9fbWRldl9pbml0KHZvaWQp
CmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L21kZXYuaCBiL2luY2x1ZGUvbGludXgvbWRldi5o
CmluZGV4IDBjZTMwY2E3OGRiMC4uNzhiNjlkMDllYjU0IDEwMDY0NAotLS0gYS9pbmNsdWRlL2xp
bnV4L21kZXYuaAorKysgYi9pbmNsdWRlL2xpbnV4L21kZXYuaApAQCAtMTE4LDYgKzExOCw3IEBA
IHN0cnVjdCBtZGV2X3R5cGVfYXR0cmlidXRlIG1kZXZfdHlwZV9hdHRyXyMjX25hbWUgPQkJXAog
ICogQHByb2JlOiBjYWxsZWQgd2hlbiBuZXcgZGV2aWNlIGNyZWF0ZWQKICAqIEByZW1vdmU6IGNh
bGxlZCB3aGVuIGRldmljZSByZW1vdmVkCiAgKiBAZHJpdmVyOiBkZXZpY2UgZHJpdmVyIHN0cnVj
dHVyZQorICogQGlkX3RhYmxlOiB0aGUgaWRzIHNlcnZpY2VkIGJ5IHRoaXMgZHJpdmVyCiAgKgog
ICoqLwogc3RydWN0IG1kZXZfZHJpdmVyIHsKQEAgLTEyNSw2ICsxMjYsNyBAQCBzdHJ1Y3QgbWRl
dl9kcml2ZXIgewogCWludCAgKCpwcm9iZSkoc3RydWN0IGRldmljZSAqZGV2KTsKIAl2b2lkICgq
cmVtb3ZlKShzdHJ1Y3QgZGV2aWNlICpkZXYpOwogCXN0cnVjdCBkZXZpY2VfZHJpdmVyIGRyaXZl
cjsKKwljb25zdCBzdHJ1Y3QgbWRldl9jbGFzc19pZCAqaWRfdGFibGU7CiB9OwogCiAjZGVmaW5l
IHRvX21kZXZfZHJpdmVyKGRydikJY29udGFpbmVyX29mKGRydiwgc3RydWN0IG1kZXZfZHJpdmVy
LCBkcml2ZXIpCkBAIC0xMzIsNiArMTM0LDcgQEAgc3RydWN0IG1kZXZfZHJpdmVyIHsKIHZvaWQg
Km1kZXZfZ2V0X2RydmRhdGEoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2KTsKIHZvaWQgbWRldl9z
ZXRfZHJ2ZGF0YShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHZvaWQgKmRhdGEpOwogY29uc3Qg
Z3VpZF90ICptZGV2X3V1aWQoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2KTsKK3ZvaWQgbWRldl9z
ZXRfY2xhc3Moc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LCB1MTYgaWQpOwogCiBleHRlcm4gc3Ry
dWN0IGJ1c190eXBlIG1kZXZfYnVzX3R5cGU7CiAKQEAgLTE0NSw0ICsxNDgsOSBAQCBzdHJ1Y3Qg
ZGV2aWNlICptZGV2X3BhcmVudF9kZXYoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2KTsKIHN0cnVj
dCBkZXZpY2UgKm1kZXZfZGV2KHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7CiBzdHJ1Y3QgbWRl
dl9kZXZpY2UgKm1kZXZfZnJvbV9kZXYoc3RydWN0IGRldmljZSAqZGV2KTsKIAorZW51bSB7CisJ
TURFVl9DTEFTU19JRF9WRklPID0gMSwKKwkvKiBOZXcgZW50cmllcyBtdXN0IGJlIGFkZGVkIGhl
cmUgKi8KK307CisKICNlbmRpZiAvKiBNREVWX0ggKi8KZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGlu
dXgvbW9kX2RldmljZXRhYmxlLmggYi9pbmNsdWRlL2xpbnV4L21vZF9kZXZpY2V0YWJsZS5oCmlu
ZGV4IDU3MTRmZDM1YTgzYy4uZjMyYzZlNDRmYjFhIDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4
L21vZF9kZXZpY2V0YWJsZS5oCisrKyBiL2luY2x1ZGUvbGludXgvbW9kX2RldmljZXRhYmxlLmgK
QEAgLTgyMSw0ICs4MjEsMTIgQEAgc3RydWN0IHdtaV9kZXZpY2VfaWQgewogCWNvbnN0IHZvaWQg
KmNvbnRleHQ7CiB9OwogCisvKioKKyAqIHN0cnVjdCBtZGV2X2NsYXNzX2lkIC0gTURFViBkZXZp
Y2UgY2xhc3MgaWRlbnRpZmllcgorICogQGlkOiBVc2VkIHRvIGlkZW50aWZ5IGEgc3BlY2lmaWMg
Y2xhc3Mgb2YgZGV2aWNlLCBlLmcgdmZpby1tZGV2IGRldmljZS4KKyAqLworc3RydWN0IG1kZXZf
Y2xhc3NfaWQgeworCV9fdTE2IGlkOworfTsKKwogI2VuZGlmIC8qIExJTlVYX01PRF9ERVZJQ0VU
QUJMRV9IICovCmRpZmYgLS1naXQgYS9zYW1wbGVzL3ZmaW8tbWRldi9tYm9jaHMuYyBiL3NhbXBs
ZXMvdmZpby1tZGV2L21ib2Nocy5jCmluZGV4IGFjNWM4YzE3YjFmZi4uMTE1YmM1MDc0NjU2IDEw
MDY0NAotLS0gYS9zYW1wbGVzL3ZmaW8tbWRldi9tYm9jaHMuYworKysgYi9zYW1wbGVzL3ZmaW8t
bWRldi9tYm9jaHMuYwpAQCAtNTYxLDYgKzU2MSw3IEBAIHN0YXRpYyBpbnQgbWJvY2hzX2NyZWF0
ZShzdHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IG1kZXZfZGV2aWNlICptZGV2KQogCW1ib2No
c19yZXNldChtZGV2KTsKIAogCW1ib2Noc191c2VkX21ieXRlcyArPSB0eXBlLT5tYnl0ZXM7CisJ
bWRldl9zZXRfY2xhc3MobWRldiwgTURFVl9DTEFTU19JRF9WRklPKTsKIAlyZXR1cm4gMDsKIAog
ZXJyX21lbToKZGlmZiAtLWdpdCBhL3NhbXBsZXMvdmZpby1tZGV2L21kcHkuYyBiL3NhbXBsZXMv
dmZpby1tZGV2L21kcHkuYwppbmRleCBjYzg2YmY2NTY2ZTQuLjY2NTYxNDU3NGQ1MCAxMDA2NDQK
LS0tIGEvc2FtcGxlcy92ZmlvLW1kZXYvbWRweS5jCisrKyBiL3NhbXBsZXMvdmZpby1tZGV2L21k
cHkuYwpAQCAtMjY5LDYgKzI2OSw3IEBAIHN0YXRpYyBpbnQgbWRweV9jcmVhdGUoc3RydWN0IGtv
YmplY3QgKmtvYmosIHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKIAltZHB5X3Jlc2V0KG1kZXYp
OwogCiAJbWRweV9jb3VudCsrOworCW1kZXZfc2V0X2NsYXNzKG1kZXYsIE1ERVZfQ0xBU1NfSURf
VkZJTyk7CiAJcmV0dXJuIDA7CiB9CiAKZGlmZiAtLWdpdCBhL3NhbXBsZXMvdmZpby1tZGV2L210
dHkuYyBiL3NhbXBsZXMvdmZpby1tZGV2L210dHkuYwppbmRleCBjZTg0YTMwMGE0ZGEuLjkwZGEx
MmZmN2ZkOSAxMDA2NDQKLS0tIGEvc2FtcGxlcy92ZmlvLW1kZXYvbXR0eS5jCisrKyBiL3NhbXBs
ZXMvdmZpby1tZGV2L210dHkuYwpAQCAtNzU1LDYgKzc1NSw3IEBAIHN0YXRpYyBpbnQgbXR0eV9j
cmVhdGUoc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKIAls
aXN0X2FkZCgmbWRldl9zdGF0ZS0+bmV4dCwgJm1kZXZfZGV2aWNlc19saXN0KTsKIAltdXRleF91
bmxvY2soJm1kZXZfbGlzdF9sb2NrKTsKIAorCW1kZXZfc2V0X2NsYXNzKG1kZXYsIE1ERVZfQ0xB
U1NfSURfVkZJTyk7CiAJcmV0dXJuIDA7CiB9CiAKLS0gCjIuMTkuMQoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApk
cmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
