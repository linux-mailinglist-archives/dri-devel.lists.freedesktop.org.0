Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7F5C846AE3
	for <lists+dri-devel@lfdr.de>; Fri, 14 Jun 2019 22:39:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7544489861;
	Fri, 14 Jun 2019 20:37:33 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x542.google.com (mail-ed1-x542.google.com
 [IPv6:2a00:1450:4864:20::542])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 667BE8961E
 for <dri-devel@lists.freedesktop.org>; Fri, 14 Jun 2019 20:37:24 +0000 (UTC)
Received: by mail-ed1-x542.google.com with SMTP id m10so5243885edv.6
 for <dri-devel@lists.freedesktop.org>; Fri, 14 Jun 2019 13:37:24 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=xr+JgIjbVPIlstw3gWbkANgpFjQbyrvikA6dCDjoRiE=;
 b=nv1p3S0xripnaAz/HRQHPniQzaCMgdvdgpYlfgLd1U8tGmxfgkzVPGhRL1Pml/nNEh
 HSluQ/y0/4SudI8TxD5Mo0LNWVQRQUF+OZQCITfgJYcBG8IraDspkivog5nYAG+AESvO
 0mCLKAnELqiQWwCD0nnphCKa5OacnRBCz4uv+FWzJYoU3PHUF/GyItZKUaTrfIC35wyP
 yAkTeBNptLrnLJKCZ9GSbAjEqAI0CviDnom9MYPW5WnbhBD9nTuoQVlShRQypD7CWuho
 DVBHGTG+5/tY1efHKY9R+ro/CZImpjM2ahWNQFzuYJqyM2XC08fTCBeA80AExdYKBLxI
 3L3A==
X-Gm-Message-State: APjAAAWR4sR9gsx2kpdhtptRWFxDXmAoyhhxWYJfdeTuJUGCNkPl1zzy
 0Lh3BaYih+RUCDao/kiZTPQGDIvDJkA=
X-Google-Smtp-Source: APXvYqxeDTIOmg5BGZY8zXseg8gjdrFkiUD9RI/YfI7/MKgdo/KF0jeeou49eWU2s/aHM4kb+LeXSw==
X-Received: by 2002:a50:92c4:: with SMTP id l4mr137235eda.34.1560544642740;
 Fri, 14 Jun 2019 13:37:22 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id n15sm1166672edd.49.2019.06.14.13.37.21
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 14 Jun 2019 13:37:22 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: DRI Development <dri-devel@lists.freedesktop.org>
Subject: [PATCH 53/59] drm/amdgpu: Fill out gem_object->resv
Date: Fri, 14 Jun 2019 22:36:09 +0200
Message-Id: <20190614203615.12639-54-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190614203615.12639-1-daniel.vetter@ffwll.ch>
References: <20190614203615.12639-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=xr+JgIjbVPIlstw3gWbkANgpFjQbyrvikA6dCDjoRiE=;
 b=Pf8C9lsichMK7ccQEEh89YUuXez8c9YpXGZSduC2GIZSm66nIlbLF+WWbCwd7AajWA
 8sADiRbysOKOFPu4rM1FR+agGjb4e77fjEhTOMm1gsG8+MnzbSWHOVByYUah6iziA8Mt
 Lhz5uDE+5trkZAM5dJKuH8z+UAu97WRqTz/3U=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <contact@tzimmermann.org>, Amber Lin <Amber.Lin@amd.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 =?UTF-8?q?Michel=20D=C3=A4nzer?= <michel.daenzer@amd.com>,
 Samuel Li <Samuel.Li@amd.com>, Sonny Jiang <sonny.jiang@amd.com>,
 Junwei Zhang <Jerry.Zhang@amd.com>, Huang Rui <ray.huang@amd.com>,
 =?UTF-8?q?Micha=C5=82=20Miros=C5=82aw?= <mirq-linux@rere.qmqm.pl>,
 Felix Kuehling <Felix.Kuehling@amd.com>,
 Alex Deucher <alexander.deucher@amd.com>,
 Daniel Vetter <daniel.vetter@intel.com>, Evan Quan <evan.quan@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhhdCB3YXkgd2UgY2FuIGRpdGNoIG91ciBnZW1fcHJpbWVfcmVzX29iaiBpbXBsZW1lbnRhdGlv
bi4gU2luY2UgdHRtCmFic29sdXRlbHkgbmVlZHMgdGhlIHJpZ2h0IHJlc2VydmF0aW9uIG9iamVj
dCBhbGwgdGhlIGJvaWxlcnBsYXRlIGlzCmFscmVhZHkgdGhlcmUgYW5kIHdlIGp1c3QgaGF2ZSB0
byB3aXJlIGl0IHVwIGNvcnJlY3RseS4KCk5vdGUgdGhhdCBnZW0vcHJpbWUgZG9lc24ndCBjYXJl
IHdoZW4gd2UgZG8gdGhpcywgYXMgbG9uZyBhcyB3ZSBkbyBpdApiZWZvcmUgdGhlIGJvIGlzIHJl
Z2lzdGVyZWQgYW5kIHNvbWVvbmUgY2FuIGNhbGwgdGhlIGhhbmRsZTJmZCBpb2N0bApvbiBpdC4K
CkFzaWRlOiB0dG1fYnVmZmVyX29iamVjdC50dG1fcmVzdiBjb3VsZCBwcm9iYWJseSBiZSBkaXRj
aGVkIGluIGZhdm91cgpvZiBhbHdheXMgcGFzc2luZyBhIG5vbi1OVUxMIHJlc3YgdG8gdHRtX2Jv
X2luaXQoKS4gQXQgbGVhc3QgZm9yIGdlbQpkcml2ZXJzIHRoYXQgd291bGQgYXZvaWQgaGF2aW5n
IHR3byBvZiB0aGVzZSwgb24gaW4gdHRtX2J1ZmZlcl9vYmplY3QKYW5kIHRoZSBvdGhlciBpbiBk
cm1fZ2VtX29iamVjdCwgb25lIGp1c3QgdGhlcmUgZm9yIGNvbmZ1c2lvbi4KClNpZ25lZC1vZmYt
Ynk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAaW50ZWwuY29tPgpDYzogQWxleCBEZXVj
aGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgpDYzogIkNocmlzdGlhbiBLw7ZuaWciIDxj
aHJpc3RpYW4ua29lbmlnQGFtZC5jb20+CkNjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVy
QGZmd2xsLmNoPgpDYzogIk1pY2hlbCBEw6RuemVyIiA8bWljaGVsLmRhZW56ZXJAYW1kLmNvbT4K
Q2M6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogSHVhbmcgUnVp
IDxyYXkuaHVhbmdAYW1kLmNvbT4KQ2M6IEZlbGl4IEt1ZWhsaW5nIDxGZWxpeC5LdWVobGluZ0Bh
bWQuY29tPgpDYzogQW5kcmV5IEdyb2R6b3Zza3kgPGFuZHJleS5ncm9kem92c2t5QGFtZC5jb20+
CkNjOiBFdmFuIFF1YW4gPGV2YW4ucXVhbkBhbWQuY29tPgpDYzogU29ubnkgSmlhbmcgPHNvbm55
LmppYW5nQGFtZC5jb20+CkNjOiBBbWJlciBMaW4gPEFtYmVyLkxpbkBhbWQuY29tPgpDYzogIk1p
Y2hhxYIgTWlyb3PFgmF3IiA8bWlycS1saW51eEByZXJlLnFtcW0ucGw+CkNjOiBKdW53ZWkgWmhh
bmcgPEplcnJ5LlpoYW5nQGFtZC5jb20+CkNjOiBUaG9tYXMgWmltbWVybWFubiA8Y29udGFjdEB0
emltbWVybWFubi5vcmc+CkNjOiBTYW11ZWwgTGkgPFNhbXVlbC5MaUBhbWQuY29tPgotLS0KIGRy
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmMgfCAxNyArLS0tLS0tLS0t
LS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYuaCB8ICAx
IC0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYyAgICAgfCAgMSAtCiBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMgIHwgIDIgKysKIDQgZmls
ZXMgY2hhbmdlZCwgMyBpbnNlcnRpb25zKCspLCAxOCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5jIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYuYwppbmRleCA0ODA5ZDRhNWQ3MmEuLjAy
Y2Q4NDVlNzdiMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2RtYV9idWYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1
Zi5jCkBAIC0yNjcsMjAgKzI2Nyw2IEBAIHN0YXRpYyB2b2lkIGFtZGdwdV9kbWFfYnVmX21hcF9k
ZXRhY2goc3RydWN0IGRtYV9idWYgKmRtYV9idWYsCiAJZHJtX2dlbV9tYXBfZGV0YWNoKGRtYV9i
dWYsIGF0dGFjaCk7CiB9CiAKLS8qKgotICogYW1kZ3B1X2dlbV9wcmltZV9yZXNfb2JqIC0gJmRy
bV9kcml2ZXIuZ2VtX3ByaW1lX3Jlc19vYmogaW1wbGVtZW50YXRpb24KLSAqIEBvYmo6IEdFTSBC
TwotICoKLSAqIFJldHVybnM6Ci0gKiBUaGUgQk8ncyByZXNlcnZhdGlvbiBvYmplY3QuCi0gKi8K
LXN0cnVjdCByZXNlcnZhdGlvbl9vYmplY3QgKmFtZGdwdV9nZW1fcHJpbWVfcmVzX29iaihzdHJ1
Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKLXsKLQlzdHJ1Y3QgYW1kZ3B1X2JvICpibyA9IGdlbV90
b19hbWRncHVfYm8ob2JqKTsKLQotCXJldHVybiBiby0+dGJvLnJlc3Y7Ci19Ci0KIC8qKgogICog
YW1kZ3B1X2RtYV9idWZfYmVnaW5fY3B1X2FjY2VzcyAtICZkbWFfYnVmX29wcy5iZWdpbl9jcHVf
YWNjZXNzIGltcGxlbWVudGF0aW9uCiAgKiBAZG1hX2J1ZjogU2hhcmVkIERNQSBidWZmZXIKQEAg
LTMzOSw4ICszMjUsNyBAQCBjb25zdCBzdHJ1Y3QgZG1hX2J1Zl9vcHMgYW1kZ3B1X2RtYWJ1Zl9v
cHMgPSB7CiAgKiBAZ29iajogR0VNIEJPCiAgKiBAZmxhZ3M6IEZsYWdzIHN1Y2ggYXMgRFJNX0NM
T0VYRUMgYW5kIERSTV9SRFdSLgogICoKLSAqIFRoZSBtYWluIHdvcmsgaXMgZG9uZSBieSB0aGUg
JmRybV9nZW1fcHJpbWVfZXhwb3J0IGhlbHBlciwgd2hpY2ggaW4gdHVybgotICogdXNlcyAmYW1k
Z3B1X2dlbV9wcmltZV9yZXNfb2JqLgorICogVGhlIG1haW4gd29yayBpcyBkb25lIGJ5IHRoZSAm
ZHJtX2dlbV9wcmltZV9leHBvcnQgaGVscGVyLgogICoKICAqIFJldHVybnM6CiAgKiBTaGFyZWQg
RE1BIGJ1ZmZlciByZXByZXNlbnRpbmcgdGhlIEdFTSBCTyBmcm9tIHRoZSBnaXZlbiBkZXZpY2Uu
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5o
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYuaAppbmRleCA3Zjcz
YTRmOTQyMDQuLjUwMTJlNmFiNThmMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2RtYV9idWYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfZG1hX2J1Zi5oCkBAIC0zNCw3ICszNCw2IEBAIHN0cnVjdCBkbWFfYnVmICphbWRncHVf
Z2VtX3ByaW1lX2V4cG9ydChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdvYmosCiAJCQkJCWludCBm
bGFncyk7CiBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmFtZGdwdV9nZW1fcHJpbWVfaW1wb3J0KHN0
cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJCQkJCSAgICBzdHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1Zik7
Ci1zdHJ1Y3QgcmVzZXJ2YXRpb25fb2JqZWN0ICphbWRncHVfZ2VtX3ByaW1lX3Jlc19vYmooc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICopOwogdm9pZCAqYW1kZ3B1X2dlbV9wcmltZV92bWFwKHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqb2JqKTsKIHZvaWQgYW1kZ3B1X2dlbV9wcmltZV92dW5tYXAoc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIHZvaWQgKnZhZGRyKTsKIGludCBhbWRncHVfZ2VtX3By
aW1lX21tYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfZHJ2LmMKaW5kZXggOGUxYjI2OTM1MWU4Li4zMjMzYzVhYmY1YjYgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMKQEAgLTEzMzMsNyArMTMzMyw2IEBA
IHN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBrbXNfZHJpdmVyID0gewogCS5wcmltZV9mZF90b19o
YW5kbGUgPSBkcm1fZ2VtX3ByaW1lX2ZkX3RvX2hhbmRsZSwKIAkuZ2VtX3ByaW1lX2V4cG9ydCA9
IGFtZGdwdV9nZW1fcHJpbWVfZXhwb3J0LAogCS5nZW1fcHJpbWVfaW1wb3J0ID0gYW1kZ3B1X2dl
bV9wcmltZV9pbXBvcnQsCi0JLmdlbV9wcmltZV9yZXNfb2JqID0gYW1kZ3B1X2dlbV9wcmltZV9y
ZXNfb2JqLAogCS5nZW1fcHJpbWVfZ2V0X3NnX3RhYmxlID0gYW1kZ3B1X2dlbV9wcmltZV9nZXRf
c2dfdGFibGUsCiAJLmdlbV9wcmltZV9pbXBvcnRfc2dfdGFibGUgPSBhbWRncHVfZ2VtX3ByaW1l
X2ltcG9ydF9zZ190YWJsZSwKIAkuZ2VtX3ByaW1lX3ZtYXAgPSBhbWRncHVfZ2VtX3ByaW1lX3Zt
YXAsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMKaW5kZXggMTZm
OTZmMmUzNjcxLi43YjI1MWZkMjZiZDUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9vYmplY3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfb2JqZWN0LmMKQEAgLTUwNSw2ICs1MDUsOCBAQCBzdGF0aWMgaW50IGFtZGdwdV9ib19k
b19jcmVhdGUoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAJaWYgKHVubGlrZWx5KHIgIT0g
MCkpCiAJCXJldHVybiByOwogCisJYm8tPmdlbV9iYXNlLnJlc3YgPSBiby0+dGJvLnJlc3Y7CisK
IAlpZiAoIWFtZGdwdV9nbWNfdnJhbV9mdWxsX3Zpc2libGUoJmFkZXYtPmdtYykgJiYKIAkgICAg
Ym8tPnRiby5tZW0ubWVtX3R5cGUgPT0gVFRNX1BMX1ZSQU0gJiYKIAkgICAgYm8tPnRiby5tZW0u
c3RhcnQgPCBhZGV2LT5nbWMudmlzaWJsZV92cmFtX3NpemUgPj4gUEFHRV9TSElGVCkKLS0gCjIu
MjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJp
LWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
