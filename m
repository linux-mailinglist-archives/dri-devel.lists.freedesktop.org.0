Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 85A7461602
	for <lists+dri-devel@lfdr.de>; Sun,  7 Jul 2019 20:36:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6C6E989BCD;
	Sun,  7 Jul 2019 18:36:13 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 84BAE89BCD
 for <dri-devel@lists.freedesktop.org>; Sun,  7 Jul 2019 18:36:11 +0000 (UTC)
Received: from pendragon.nordic-sky.finnair.com (unknown [38.98.37.142])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 8E511B93;
 Sun,  7 Jul 2019 20:35:48 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 44/60] drm/omap: Switch the HDMI and VENC outputs to drm_bridge
Date: Sun,  7 Jul 2019 21:19:21 +0300
Message-Id: <20190707181937.6250-41-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190707181937.6250-1-laurent.pinchart@ideasonboard.com>
References: <20190707180852.5512-1-laurent.pinchart@ideasonboard.com>
 <20190707181937.6250-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1562524570;
 bh=e0xPJdNpAE+VVb+wDNL38X4ILHMoeb3Po/g6yHOR8g8=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=H0Kr52PIJqWnSRbCfReDz3UoGYff/DFSTPWXr8E5OCP8GdEwK4QhA2/kE7O7WwOaa
 GWgfipXJQSVS4jEQsJqZNGdnfsavzuDdyR3IgHncPYoXsqQCYE5+b+LQWYRSnUfsdo
 xkKbC4fMernG4gh7+gxK8417itYI41J8Oo1dOWQA=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sean Paul <sean@poorly.run>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIFRQRDEyUzAxNSwgT1BBMzYyIGFuZCBhbmFsb2cgYW5kIEhETUkgY29ubmVjdG9ycyBhcmUg
bm93IHN1cHBvcnRlZApieSBEUk0gYnJpZGdlIGRyaXZlcnMsIGFuZCB0aGUgb21hcGRybSBIRE1J
IGFuZCBWRU5DIG91dHB1dHMgY2FuIGJlCmhhbmRsZWQgdGhyb3VnaCB0aGUgZHJtX2JyaWRnZSBB
UEkuIFN3aXRjaCB0aGUgb3V0cHV0cyB0byBkcm1fYnJkaWdlIGJ5Cm1ha2luZyB0aGUgbmV4dCBi
cmlkZ2UgbWFuZGF0b3J5IGFuZCByZW1vdmluZyB0aGUgcmVsYXRlZApvbWFwZHJtLXNwZWNpZmlj
IGRpc3BsYXkgZHJpdmVycy4KClNpZ25lZC1vZmYtYnk6IExhdXJlbnQgUGluY2hhcnQgPGxhdXJl
bnQucGluY2hhcnRAaWRlYXNvbmJvYXJkLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRy
bS9kaXNwbGF5cy9LY29uZmlnICAgICAgfCAgMjIgLS0KIGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJt
L2Rpc3BsYXlzL01ha2VmaWxlICAgICB8ICAgNCAtCiAuLi4vb21hcGRybS9kaXNwbGF5cy9jb25u
ZWN0b3ItYW5hbG9nLXR2LmMgICAgfCAxMDAgLS0tLS0tLS0KIC4uLi9ncHUvZHJtL29tYXBkcm0v
ZGlzcGxheXMvY29ubmVjdG9yLWhkbWkuYyB8IDE4NiAtLS0tLS0tLS0tLS0tLS0KIC4uLi9ncHUv
ZHJtL29tYXBkcm0vZGlzcGxheXMvZW5jb2Rlci1vcGEzNjIuYyB8IDE0MCAtLS0tLS0tLS0tLQog
Li4uL2RybS9vbWFwZHJtL2Rpc3BsYXlzL2VuY29kZXItdHBkMTJzMDE1LmMgIHwgMjIwIC0tLS0t
LS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2hkbWk0LmMgICAgICAg
ICAgIHwgICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvaGRtaTUuYyAgICAgICAg
ICAgfCAgIDQgKy0KIC4uLi9ncHUvZHJtL29tYXBkcm0vZHNzL29tYXBkc3MtYm9vdC1pbml0LmMg
ICB8ICAgNSAtCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb3V0cHV0LmMgICAgICAgICAg
fCAgIDUgKwogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL3ZlbmMuYyAgICAgICAgICAgIHwg
ICA0ICstCiAxMSBmaWxlcyBjaGFuZ2VkLCAxMSBpbnNlcnRpb25zKCspLCA2ODMgZGVsZXRpb25z
KC0pCiBkZWxldGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMv
Y29ubmVjdG9yLWFuYWxvZy10di5jCiBkZWxldGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJt
L29tYXBkcm0vZGlzcGxheXMvY29ubmVjdG9yLWhkbWkuYwogZGVsZXRlIG1vZGUgMTAwNjQ0IGRy
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL2VuY29kZXItb3BhMzYyLmMKIGRlbGV0ZSBt
b2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kaXNwbGF5cy9lbmNvZGVyLXRwZDEy
czAxNS5jCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvS2Nv
bmZpZyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL0tjb25maWcKaW5kZXggYzI1
NjZkYTMyYWM0Li5iYjczZDQ5ZmMzZTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFw
ZHJtL2Rpc3BsYXlzL0tjb25maWcKKysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxh
eXMvS2NvbmZpZwpAQCAtMSwyOCArMSw2IEBACiAjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBH
UEwtMi4wLW9ubHkKIG1lbnUgIk9NQVBEUk0gRXh0ZXJuYWwgRGlzcGxheSBEZXZpY2UgRHJpdmVy
cyIKIAotY29uZmlnIERSTV9PTUFQX0VOQ09ERVJfT1BBMzYyCi0JdHJpc3RhdGUgIk9QQTM2MiBl
eHRlcm5hbCBhbmFsb2cgYW1wbGlmaWVyIgotCWhlbHAKLQkgIERyaXZlciBmb3IgT1BBMzYyIGV4
dGVybmFsIGFuYWxvZyBUViBhbXBsaWZpZXIgY29udHJvbGxlZAotCSAgdGhyb3VnaCBhIEdQSU8u
Ci0KLWNvbmZpZyBEUk1fT01BUF9FTkNPREVSX1RQRDEyUzAxNQotICAgICAgICB0cmlzdGF0ZSAi
VFBEMTJTMDE1IEhETUkgRVNEIHByb3RlY3Rpb24gYW5kIGxldmVsIHNoaWZ0ZXIiCi0JaGVscAot
CSAgRHJpdmVyIGZvciBUUEQxMlMwMTUsIHdoaWNoIG9mZmVycyBIRE1JIEVTRCBwcm90ZWN0aW9u
IGFuZCBsZXZlbAotCSAgc2hpZnRpbmcuCi0KLWNvbmZpZyBEUk1fT01BUF9DT05ORUNUT1JfSERN
SQotICAgICAgICB0cmlzdGF0ZSAiSERNSSBDb25uZWN0b3IiCi0JaGVscAotCSAgRHJpdmVyIGZv
ciBhIGdlbmVyaWMgSERNSSBjb25uZWN0b3IuCi0KLWNvbmZpZyBEUk1fT01BUF9DT05ORUNUT1Jf
QU5BTE9HX1RWCi0gICAgICAgIHRyaXN0YXRlICJBbmFsb2cgVFYgQ29ubmVjdG9yIgotCWhlbHAK
LQkgIERyaXZlciBmb3IgYSBnZW5lcmljIGFuYWxvZyBUViBjb25uZWN0b3IuCi0KIGNvbmZpZyBE
Uk1fT01BUF9QQU5FTF9EU0lfQ00KIAl0cmlzdGF0ZSAiR2VuZXJpYyBEU0kgQ29tbWFuZCBNb2Rl
IFBhbmVsIgogCWRlcGVuZHMgb24gQkFDS0xJR0hUX0NMQVNTX0RFVklDRQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9k
cm0vb21hcGRybS9kaXNwbGF5cy9NYWtlZmlsZQppbmRleCAxZGIzNGQ0ZmVkNjQuLjU4ZGRmYTk5
MTdmOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvTWFrZWZp
bGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvTWFrZWZpbGUKQEAgLTEs
OCArMSw0IEBACiAjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCi1vYmotJChDT05G
SUdfRFJNX09NQVBfRU5DT0RFUl9PUEEzNjIpICs9IGVuY29kZXItb3BhMzYyLm8KLW9iai0kKENP
TkZJR19EUk1fT01BUF9FTkNPREVSX1RQRDEyUzAxNSkgKz0gZW5jb2Rlci10cGQxMnMwMTUubwot
b2JqLSQoQ09ORklHX0RSTV9PTUFQX0NPTk5FQ1RPUl9IRE1JKSArPSBjb25uZWN0b3ItaGRtaS5v
Ci1vYmotJChDT05GSUdfRFJNX09NQVBfQ09OTkVDVE9SX0FOQUxPR19UVikgKz0gY29ubmVjdG9y
LWFuYWxvZy10di5vCiBvYmotJChDT05GSUdfRFJNX09NQVBfUEFORUxfRFNJX0NNKSArPSBwYW5l
bC1kc2ktY20ubwogb2JqLSQoQ09ORklHX0RSTV9PTUFQX1BBTkVMX1NPTllfQUNYNTY1QUtNKSAr
PSBwYW5lbC1zb255LWFjeDU2NWFrbS5vCiBvYmotJChDT05GSUdfRFJNX09NQVBfUEFORUxfTEdQ
SElMSVBTX0xCMDM1UTAyKSArPSBwYW5lbC1sZ3BoaWxpcHMtbGIwMzVxMDIubwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvY29ubmVjdG9yLWFuYWxvZy10di5j
IGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvY29ubmVjdG9yLWFuYWxvZy10di5j
CmRlbGV0ZWQgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAyYWIxODc0NGE1ZDcuLjAwMDAwMDAwMDAw
MAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kaXNwbGF5cy9jb25uZWN0b3ItYW5hbG9n
LXR2LmMKKysrIC9kZXYvbnVsbApAQCAtMSwxMDAgKzAsMCBAQAotLyoKLSAqIEFuYWxvZyBUViBD
b25uZWN0b3IgZHJpdmVyCi0gKgotICogQ29weXJpZ2h0IChDKSAyMDEzIFRleGFzIEluc3RydW1l
bnRzIEluY29ycG9yYXRlZCAtIGh0dHA6Ly93d3cudGkuY29tLwotICogQXV0aG9yOiBUb21pIFZh
bGtlaW5lbiA8dG9taS52YWxrZWluZW5AdGkuY29tPgotICoKLSAqIFRoaXMgcHJvZ3JhbSBpcyBm
cmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0Ci0g
KiB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNp
b24gMiBhcyBwdWJsaXNoZWQgYnkKLSAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uCi0g
Ki8KLQotI2luY2x1ZGUgPGxpbnV4L3NsYWIuaD4KLSNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4K
LSNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kZXZpY2UuaD4KLSNpbmNsdWRlIDxsaW51eC9vZi5o
PgotCi0jaW5jbHVkZSAiLi4vZHNzL29tYXBkc3MuaCIKLQotc3RydWN0IHBhbmVsX2Rydl9kYXRh
IHsKLQlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlIGRzc2RldjsKLQotCXN0cnVjdCBkZXZpY2UgKmRl
djsKLX07Ci0KLSNkZWZpbmUgdG9fcGFuZWxfZGF0YSh4KSBjb250YWluZXJfb2YoeCwgc3RydWN0
IHBhbmVsX2Rydl9kYXRhLCBkc3NkZXYpCi0KLXN0YXRpYyBpbnQgdHZjX2Nvbm5lY3Qoc3RydWN0
IG9tYXBfZHNzX2RldmljZSAqc3JjLAotCQkgICAgICAgc3RydWN0IG9tYXBfZHNzX2RldmljZSAq
ZHN0KQotewotCXJldHVybiAwOwotfQotCi1zdGF0aWMgdm9pZCB0dmNfZGlzY29ubmVjdChzdHJ1
Y3Qgb21hcF9kc3NfZGV2aWNlICpzcmMsCi0JCQkgICBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpk
c3QpCi17Ci19Ci0KLXN0YXRpYyBjb25zdCBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlX29wcyB0dmNf
b3BzID0gewotCS5jb25uZWN0CQk9IHR2Y19jb25uZWN0LAotCS5kaXNjb25uZWN0CQk9IHR2Y19k
aXNjb25uZWN0LAotfTsKLQotc3RhdGljIGludCB0dmNfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rl
dmljZSAqcGRldikKLXsKLQlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRhOwotCXN0cnVjdCBv
bWFwX2Rzc19kZXZpY2UgKmRzc2RldjsKLQotCWRkYXRhID0gZGV2bV9remFsbG9jKCZwZGV2LT5k
ZXYsIHNpemVvZigqZGRhdGEpLCBHRlBfS0VSTkVMKTsKLQlpZiAoIWRkYXRhKQotCQlyZXR1cm4g
LUVOT01FTTsKLQotCXBsYXRmb3JtX3NldF9kcnZkYXRhKHBkZXYsIGRkYXRhKTsKLQlkZGF0YS0+
ZGV2ID0gJnBkZXYtPmRldjsKLQotCWRzc2RldiA9ICZkZGF0YS0+ZHNzZGV2OwotCWRzc2Rldi0+
b3BzID0gJnR2Y19vcHM7Ci0JZHNzZGV2LT5kZXYgPSAmcGRldi0+ZGV2OwotCWRzc2Rldi0+dHlw
ZSA9IE9NQVBfRElTUExBWV9UWVBFX1ZFTkM7Ci0JZHNzZGV2LT5kaXNwbGF5ID0gdHJ1ZTsKLQlk
c3NkZXYtPm93bmVyID0gVEhJU19NT0RVTEU7Ci0JZHNzZGV2LT5vZl9wb3J0ID0gMDsKLQotCW9t
YXBkc3NfZGlzcGxheV9pbml0KGRzc2Rldik7Ci0Jb21hcGRzc19kZXZpY2VfcmVnaXN0ZXIoZHNz
ZGV2KTsKLQotCXJldHVybiAwOwotfQotCi1zdGF0aWMgaW50IF9fZXhpdCB0dmNfcmVtb3ZlKHN0
cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpk
ZGF0YSA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwotCi0Jb21hcGRzc19kZXZpY2VfdW5y
ZWdpc3RlcigmZGRhdGEtPmRzc2Rldik7Ci0KLQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIGNvbnN0
IHN0cnVjdCBvZl9kZXZpY2VfaWQgdHZjX29mX21hdGNoW10gPSB7Ci0JeyAuY29tcGF0aWJsZSA9
ICJvbWFwZHNzLHN2aWRlby1jb25uZWN0b3IiLCB9LAotCXsgLmNvbXBhdGlibGUgPSAib21hcGRz
cyxjb21wb3NpdGUtdmlkZW8tY29ubmVjdG9yIiwgfSwKLQl7fSwKLX07Ci0KLU1PRFVMRV9ERVZJ
Q0VfVEFCTEUob2YsIHR2Y19vZl9tYXRjaCk7Ci0KLXN0YXRpYyBzdHJ1Y3QgcGxhdGZvcm1fZHJp
dmVyIHR2Y19jb25uZWN0b3JfZHJpdmVyID0gewotCS5wcm9iZQk9IHR2Y19wcm9iZSwKLQkucmVt
b3ZlCT0gX19leGl0X3AodHZjX3JlbW92ZSksCi0JLmRyaXZlcgk9IHsKLQkJLm5hbWUJPSAiY29u
bmVjdG9yLWFuYWxvZy10diIsCi0JCS5vZl9tYXRjaF90YWJsZSA9IHR2Y19vZl9tYXRjaCwKLQkJ
LnN1cHByZXNzX2JpbmRfYXR0cnMgPSB0cnVlLAotCX0sCi19OwotCi1tb2R1bGVfcGxhdGZvcm1f
ZHJpdmVyKHR2Y19jb25uZWN0b3JfZHJpdmVyKTsKLQotTU9EVUxFX0FVVEhPUigiVG9taSBWYWxr
ZWluZW4gPHRvbWkudmFsa2VpbmVuQHRpLmNvbT4iKTsKLU1PRFVMRV9ERVNDUklQVElPTigiQW5h
bG9nIFRWIENvbm5lY3RvciBkcml2ZXIiKTsKLU1PRFVMRV9MSUNFTlNFKCJHUEwiKTsKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL2Nvbm5lY3Rvci1oZG1pLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kaXNwbGF5cy9jb25uZWN0b3ItaGRtaS5jCmRlbGV0
ZWQgZmlsZSBtb2RlIDEwMDY0NAppbmRleCA1ZDJkYzEwM2M2YjEuLjAwMDAwMDAwMDAwMAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kaXNwbGF5cy9jb25uZWN0b3ItaGRtaS5jCisrKyAv
ZGV2L251bGwKQEAgLTEsMTg2ICswLDAgQEAKLS8qCi0gKiBIRE1JIENvbm5lY3RvciBkcml2ZXIK
LSAqCi0gKiBDb3B5cmlnaHQgKEMpIDIwMTMgVGV4YXMgSW5zdHJ1bWVudHMgSW5jb3Jwb3JhdGVk
IC0gaHR0cDovL3d3dy50aS5jb20vCi0gKiBBdXRob3I6IFRvbWkgVmFsa2VpbmVuIDx0b21pLnZh
bGtlaW5lbkB0aS5jb20+Ci0gKgotICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlv
dSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXQKLSAqIHVuZGVyIHRoZSB0ZXJt
cyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAyIGFzIHB1Ymxpc2hl
ZCBieQotICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi4KLSAqLwotCi0jaW5jbHVkZSA8
bGludXgvZ3Bpby9jb25zdW1lci5oPgotI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgotI2luY2x1
ZGUgPGxpbnV4L211dGV4Lmg+Ci0jaW5jbHVkZSA8bGludXgvcGxhdGZvcm1fZGV2aWNlLmg+Ci0j
aW5jbHVkZSA8bGludXgvc2xhYi5oPgotCi0jaW5jbHVkZSAiLi4vZHNzL29tYXBkc3MuaCIKLQot
c3RydWN0IHBhbmVsX2Rydl9kYXRhIHsKLQlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlIGRzc2RldjsK
LQl2b2lkICgqaHBkX2NiKSh2b2lkICpjYl9kYXRhLCBlbnVtIGRybV9jb25uZWN0b3Jfc3RhdHVz
IHN0YXR1cyk7Ci0Jdm9pZCAqaHBkX2NiX2RhdGE7Ci0Jc3RydWN0IG11dGV4IGhwZF9sb2NrOwot
Ci0Jc3RydWN0IGRldmljZSAqZGV2OwotCi0Jc3RydWN0IGdwaW9fZGVzYyAqaHBkX2dwaW87Ci19
OwotCi0jZGVmaW5lIHRvX3BhbmVsX2RhdGEoeCkgY29udGFpbmVyX29mKHgsIHN0cnVjdCBwYW5l
bF9kcnZfZGF0YSwgZHNzZGV2KQotCi1zdGF0aWMgaW50IGhkbWljX2Nvbm5lY3Qoc3RydWN0IG9t
YXBfZHNzX2RldmljZSAqc3JjLAotCQkJIHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzdCkKLXsK
LQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIHZvaWQgaGRtaWNfZGlzY29ubmVjdChzdHJ1Y3Qgb21h
cF9kc3NfZGV2aWNlICpzcmMsCi0JCQkgICAgIHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzdCkK
LXsKLX0KLQotc3RhdGljIGJvb2wgaGRtaWNfZGV0ZWN0KHN0cnVjdCBvbWFwX2Rzc19kZXZpY2Ug
KmRzc2RldikKLXsKLQlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRhID0gdG9fcGFuZWxfZGF0
YShkc3NkZXYpOwotCi0JcmV0dXJuIGdwaW9kX2dldF92YWx1ZV9jYW5zbGVlcChkZGF0YS0+aHBk
X2dwaW8pOwotfQotCi1zdGF0aWMgdm9pZCBoZG1pY19yZWdpc3Rlcl9ocGRfY2Ioc3RydWN0IG9t
YXBfZHNzX2RldmljZSAqZHNzZGV2LAotCQkJCSAgdm9pZCAoKmNiKSh2b2lkICpjYl9kYXRhLAot
CQkJCQkgICAgZW51bSBkcm1fY29ubmVjdG9yX3N0YXR1cyBzdGF0dXMpLAotCQkJCSAgdm9pZCAq
Y2JfZGF0YSkKLXsKLQlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRhID0gdG9fcGFuZWxfZGF0
YShkc3NkZXYpOwotCi0JbXV0ZXhfbG9jaygmZGRhdGEtPmhwZF9sb2NrKTsKLQlkZGF0YS0+aHBk
X2NiID0gY2I7Ci0JZGRhdGEtPmhwZF9jYl9kYXRhID0gY2JfZGF0YTsKLQltdXRleF91bmxvY2so
JmRkYXRhLT5ocGRfbG9jayk7Ci19Ci0KLXN0YXRpYyB2b2lkIGhkbWljX3VucmVnaXN0ZXJfaHBk
X2NiKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldikKLXsKLQlzdHJ1Y3QgcGFuZWxfZHJ2
X2RhdGEgKmRkYXRhID0gdG9fcGFuZWxfZGF0YShkc3NkZXYpOwotCi0JbXV0ZXhfbG9jaygmZGRh
dGEtPmhwZF9sb2NrKTsKLQlkZGF0YS0+aHBkX2NiID0gTlVMTDsKLQlkZGF0YS0+aHBkX2NiX2Rh
dGEgPSBOVUxMOwotCW11dGV4X3VubG9jaygmZGRhdGEtPmhwZF9sb2NrKTsKLX0KLQotc3RhdGlj
IGNvbnN0IHN0cnVjdCBvbWFwX2Rzc19kZXZpY2Vfb3BzIGhkbWljX29wcyA9IHsKLQkuY29ubmVj
dAkJPSBoZG1pY19jb25uZWN0LAotCS5kaXNjb25uZWN0CQk9IGhkbWljX2Rpc2Nvbm5lY3QsCi0K
LQkuZGV0ZWN0CQkJPSBoZG1pY19kZXRlY3QsCi0JLnJlZ2lzdGVyX2hwZF9jYgk9IGhkbWljX3Jl
Z2lzdGVyX2hwZF9jYiwKLQkudW5yZWdpc3Rlcl9ocGRfY2IJPSBoZG1pY191bnJlZ2lzdGVyX2hw
ZF9jYiwKLX07Ci0KLXN0YXRpYyBpcnFyZXR1cm5fdCBoZG1pY19ocGRfaXNyKGludCBpcnEsIHZv
aWQgKmRhdGEpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IGRhdGE7Ci0KLQlt
dXRleF9sb2NrKCZkZGF0YS0+aHBkX2xvY2spOwotCWlmIChkZGF0YS0+aHBkX2NiKSB7Ci0JCWVu
dW0gZHJtX2Nvbm5lY3Rvcl9zdGF0dXMgc3RhdHVzOwotCi0JCWlmIChoZG1pY19kZXRlY3QoJmRk
YXRhLT5kc3NkZXYpKQotCQkJc3RhdHVzID0gY29ubmVjdG9yX3N0YXR1c19jb25uZWN0ZWQ7Ci0J
CWVsc2UKLQkJCXN0YXR1cyA9IGNvbm5lY3Rvcl9zdGF0dXNfZGlzY29ubmVjdGVkOwotCi0JCWRk
YXRhLT5ocGRfY2IoZGRhdGEtPmhwZF9jYl9kYXRhLCBzdGF0dXMpOwotCX0KLQltdXRleF91bmxv
Y2soJmRkYXRhLT5ocGRfbG9jayk7Ci0KLQlyZXR1cm4gSVJRX0hBTkRMRUQ7Ci19Ci0KLXN0YXRp
YyBpbnQgaGRtaWNfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKLXsKLQlzdHJ1
Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRhOwotCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2Rl
djsKLQlzdHJ1Y3QgZ3Bpb19kZXNjICpncGlvOwotCWludCByOwotCi0JZGRhdGEgPSBkZXZtX2t6
YWxsb2MoJnBkZXYtPmRldiwgc2l6ZW9mKCpkZGF0YSksIEdGUF9LRVJORUwpOwotCWlmICghZGRh
dGEpCi0JCXJldHVybiAtRU5PTUVNOwotCi0JcGxhdGZvcm1fc2V0X2RydmRhdGEocGRldiwgZGRh
dGEpOwotCWRkYXRhLT5kZXYgPSAmcGRldi0+ZGV2OwotCi0JbXV0ZXhfaW5pdCgmZGRhdGEtPmhw
ZF9sb2NrKTsKLQotCS8qIEhQRCBHUElPICovCi0JZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlv
bmFsKCZwZGV2LT5kZXYsICJocGQiLCBHUElPRF9JTik7Ci0JaWYgKElTX0VSUihncGlvKSkgewot
CQlkZXZfZXJyKCZwZGV2LT5kZXYsICJmYWlsZWQgdG8gcGFyc2UgSFBEIGdwaW9cbiIpOwotCQly
ZXR1cm4gUFRSX0VSUihncGlvKTsKLQl9Ci0KLQlkZGF0YS0+aHBkX2dwaW8gPSBncGlvOwotCi0J
aWYgKGRkYXRhLT5ocGRfZ3BpbykgewotCQlyID0gZGV2bV9yZXF1ZXN0X3RocmVhZGVkX2lycSgm
cGRldi0+ZGV2LAotCQkJCWdwaW9kX3RvX2lycShkZGF0YS0+aHBkX2dwaW8pLAotCQkJCU5VTEws
IGhkbWljX2hwZF9pc3IsCi0JCQkJSVJRRl9UUklHR0VSX1JJU0lORyB8IElSUUZfVFJJR0dFUl9G
QUxMSU5HIHwKLQkJCQlJUlFGX09ORVNIT1QsCi0JCQkJImhkbWljIGhwZCIsIGRkYXRhKTsKLQkJ
aWYgKHIpCi0JCQlyZXR1cm4gcjsKLQl9Ci0KLQlkc3NkZXYgPSAmZGRhdGEtPmRzc2RldjsKLQlk
c3NkZXYtPm9wcyA9ICZoZG1pY19vcHM7Ci0JZHNzZGV2LT5kZXYgPSAmcGRldi0+ZGV2OwotCWRz
c2Rldi0+dHlwZSA9IE9NQVBfRElTUExBWV9UWVBFX0hETUk7Ci0JZHNzZGV2LT5kaXNwbGF5ID0g
dHJ1ZTsKLQlkc3NkZXYtPm93bmVyID0gVEhJU19NT0RVTEU7Ci0JZHNzZGV2LT5vZl9wb3J0ID0g
MDsKLQlkc3NkZXYtPm9wc19mbGFncyA9IGRkYXRhLT5ocGRfZ3BpbwotCQkJICA/IE9NQVBfRFNT
X0RFVklDRV9PUF9ERVRFQ1QgfCBPTUFQX0RTU19ERVZJQ0VfT1BfSFBECi0JCQkgIDogMDsKLQot
CW9tYXBkc3NfZGlzcGxheV9pbml0KGRzc2Rldik7Ci0Jb21hcGRzc19kZXZpY2VfcmVnaXN0ZXIo
ZHNzZGV2KTsKLQotCXJldHVybiAwOwotfQotCi1zdGF0aWMgaW50IF9fZXhpdCBoZG1pY19yZW1v
dmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKLXsKLQlzdHJ1Y3QgcGFuZWxfZHJ2X2Rh
dGEgKmRkYXRhID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7Ci0KLQlvbWFwZHNzX2Rldmlj
ZV91bnJlZ2lzdGVyKCZkZGF0YS0+ZHNzZGV2KTsKLQotCXJldHVybiAwOwotfQotCi1zdGF0aWMg
Y29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBoZG1pY19vZl9tYXRjaFtdID0gewotCXsgLmNvbXBh
dGlibGUgPSAib21hcGRzcyxoZG1pLWNvbm5lY3RvciIsIH0sCi0Je30sCi19OwotCi1NT0RVTEVf
REVWSUNFX1RBQkxFKG9mLCBoZG1pY19vZl9tYXRjaCk7Ci0KLXN0YXRpYyBzdHJ1Y3QgcGxhdGZv
cm1fZHJpdmVyIGhkbWlfY29ubmVjdG9yX2RyaXZlciA9IHsKLQkucHJvYmUJPSBoZG1pY19wcm9i
ZSwKLQkucmVtb3ZlCT0gX19leGl0X3AoaGRtaWNfcmVtb3ZlKSwKLQkuZHJpdmVyCT0gewotCQku
bmFtZQk9ICJjb25uZWN0b3ItaGRtaSIsCi0JCS5vZl9tYXRjaF90YWJsZSA9IGhkbWljX29mX21h
dGNoLAotCQkuc3VwcHJlc3NfYmluZF9hdHRycyA9IHRydWUsCi0JfSwKLX07Ci0KLW1vZHVsZV9w
bGF0Zm9ybV9kcml2ZXIoaGRtaV9jb25uZWN0b3JfZHJpdmVyKTsKLQotTU9EVUxFX0FVVEhPUigi
VG9taSBWYWxrZWluZW4gPHRvbWkudmFsa2VpbmVuQHRpLmNvbT4iKTsKLU1PRFVMRV9ERVNDUklQ
VElPTigiSERNSSBDb25uZWN0b3IgZHJpdmVyIik7Ci1NT0RVTEVfTElDRU5TRSgiR1BMIik7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kaXNwbGF5cy9lbmNvZGVyLW9wYTM2
Mi5jIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvZW5jb2Rlci1vcGEzNjIuYwpk
ZWxldGVkIGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggZmEyZmY3MTc0MjU5Li4wMDAwMDAwMDAwMDAK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvZW5jb2Rlci1vcGEzNjIuYwor
KysgL2Rldi9udWxsCkBAIC0xLDE0MCArMCwwIEBACi0vKgotICogT1BBMzYyIGFuYWxvZyB2aWRl
byBhbXBsaWZpZXIgd2l0aCBvdXRwdXQvcG93ZXIgY29udHJvbAotICoKLSAqIENvcHlyaWdodCAo
QykgMjAxNCBHb2xkZW4gRGVsaWNpb3VzIENvbXB1dGVycwotICogQXV0aG9yOiBILiBOaWtvbGF1
cyBTY2hhbGxlciA8aG5zQGdvbGRlbGljby5jb20+Ci0gKgotICogYmFzZWQgb24gZW5jb2Rlci10
ZnA0MTAKLSAqCi0gKiBDb3B5cmlnaHQgKEMpIDIwMTMgVGV4YXMgSW5zdHJ1bWVudHMgSW5jb3Jw
b3JhdGVkIC0gaHR0cDovL3d3dy50aS5jb20vCi0gKiBBdXRob3I6IFRvbWkgVmFsa2VpbmVuIDx0
b21pLnZhbGtlaW5lbkB0aS5jb20+Ci0gKgotICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdh
cmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXQKLSAqIHVuZGVyIHRo
ZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAyIGFzIHB1
Ymxpc2hlZCBieQotICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi4KLSAqLwotCi0jaW5j
bHVkZSA8bGludXgvZ3Bpby9jb25zdW1lci5oPgotI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgot
I2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgotI2luY2x1ZGUgPGxpbnV4L3NsYWIu
aD4KLQotI2luY2x1ZGUgIi4uL2Rzcy9vbWFwZHNzLmgiCi0KLXN0cnVjdCBwYW5lbF9kcnZfZGF0
YSB7Ci0Jc3RydWN0IG9tYXBfZHNzX2RldmljZSBkc3NkZXY7Ci0KLQlzdHJ1Y3QgZ3Bpb19kZXNj
ICplbmFibGVfZ3BpbzsKLX07Ci0KLSNkZWZpbmUgdG9fcGFuZWxfZGF0YSh4KSBjb250YWluZXJf
b2YoeCwgc3RydWN0IHBhbmVsX2Rydl9kYXRhLCBkc3NkZXYpCi0KLXN0YXRpYyBpbnQgb3BhMzYy
X2Nvbm5lY3Qoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqc3JjLAotCQkJICBzdHJ1Y3Qgb21hcF9k
c3NfZGV2aWNlICpkc3QpCi17Ci0JcmV0dXJuIG9tYXBkc3NfZGV2aWNlX2Nvbm5lY3QoZHN0LT5k
c3MsIGRzdCwgZHN0LT5uZXh0KTsKLX0KLQotc3RhdGljIHZvaWQgb3BhMzYyX2Rpc2Nvbm5lY3Qo
c3RydWN0IG9tYXBfZHNzX2RldmljZSAqc3JjLAotCQkJICAgICAgc3RydWN0IG9tYXBfZHNzX2Rl
dmljZSAqZHN0KQotewotCW9tYXBkc3NfZGV2aWNlX2Rpc2Nvbm5lY3QoZHN0LCBkc3QtPm5leHQp
OwotfQotCi1zdGF0aWMgdm9pZCBvcGEzNjJfZW5hYmxlKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2Ug
KmRzc2RldikKLXsKLQlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRhID0gdG9fcGFuZWxfZGF0
YShkc3NkZXYpOwotCi0JaWYgKGRkYXRhLT5lbmFibGVfZ3BpbykKLQkJZ3Bpb2Rfc2V0X3ZhbHVl
X2NhbnNsZWVwKGRkYXRhLT5lbmFibGVfZ3BpbywgMSk7Ci19Ci0KLXN0YXRpYyB2b2lkIG9wYTM2
Ml9kaXNhYmxlKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldikKLXsKLQlzdHJ1Y3QgcGFu
ZWxfZHJ2X2RhdGEgKmRkYXRhID0gdG9fcGFuZWxfZGF0YShkc3NkZXYpOwotCi0JaWYgKGRkYXRh
LT5lbmFibGVfZ3BpbykKLQkJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGRkYXRhLT5lbmFibGVf
Z3BpbywgMCk7Ci19Ci0KLXN0YXRpYyBjb25zdCBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlX29wcyBv
cGEzNjJfb3BzID0gewotCS5jb25uZWN0CT0gb3BhMzYyX2Nvbm5lY3QsCi0JLmRpc2Nvbm5lY3QJ
PSBvcGEzNjJfZGlzY29ubmVjdCwKLQkuZW5hYmxlCQk9IG9wYTM2Ml9lbmFibGUsCi0JLmRpc2Fi
bGUJPSBvcGEzNjJfZGlzYWJsZSwKLX07Ci0KLXN0YXRpYyBpbnQgb3BhMzYyX3Byb2JlKHN0cnVj
dCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0
YTsKLQlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXY7Ci0Jc3RydWN0IGdwaW9fZGVzYyAq
Z3BpbzsKLQotCWRldl9kYmcoJnBkZXYtPmRldiwgInByb2JlXG4iKTsKLQotCWRkYXRhID0gZGV2
bV9remFsbG9jKCZwZGV2LT5kZXYsIHNpemVvZigqZGRhdGEpLCBHRlBfS0VSTkVMKTsKLQlpZiAo
IWRkYXRhKQotCQlyZXR1cm4gLUVOT01FTTsKLQotCXBsYXRmb3JtX3NldF9kcnZkYXRhKHBkZXYs
IGRkYXRhKTsKLQotCWdwaW8gPSBkZXZtX2dwaW9kX2dldF9vcHRpb25hbCgmcGRldi0+ZGV2LCAi
ZW5hYmxlIiwgR1BJT0RfT1VUX0xPVyk7Ci0JaWYgKElTX0VSUihncGlvKSkKLQkJcmV0dXJuIFBU
Ul9FUlIoZ3Bpbyk7Ci0KLQlkZGF0YS0+ZW5hYmxlX2dwaW8gPSBncGlvOwotCi0JZHNzZGV2ID0g
JmRkYXRhLT5kc3NkZXY7Ci0JZHNzZGV2LT5vcHMgPSAmb3BhMzYyX29wczsKLQlkc3NkZXYtPmRl
diA9ICZwZGV2LT5kZXY7Ci0JZHNzZGV2LT50eXBlID0gT01BUF9ESVNQTEFZX1RZUEVfVkVOQzsK
LQlkc3NkZXYtPm93bmVyID0gVEhJU19NT0RVTEU7Ci0JZHNzZGV2LT5vZl9wb3J0ID0gMTsKLQot
CWRzc2Rldi0+bmV4dCA9IG9tYXBkc3Nfb2ZfZmluZF9jb25uZWN0ZWRfZGV2aWNlKHBkZXYtPmRl
di5vZl9ub2RlLCAxKTsKLQlpZiAoSVNfRVJSKGRzc2Rldi0+bmV4dCkpIHsKLQkJaWYgKFBUUl9F
UlIoZHNzZGV2LT5uZXh0KSAhPSAtRVBST0JFX0RFRkVSKQotCQkJZGV2X2VycigmcGRldi0+ZGV2
LCAiZmFpbGVkIHRvIGZpbmQgdmlkZW8gc2lua1xuIik7Ci0JCXJldHVybiBQVFJfRVJSKGRzc2Rl
di0+bmV4dCk7Ci0JfQotCi0Jb21hcGRzc19kZXZpY2VfcmVnaXN0ZXIoZHNzZGV2KTsKLQotCXJl
dHVybiAwOwotfQotCi1zdGF0aWMgaW50IF9fZXhpdCBvcGEzNjJfcmVtb3ZlKHN0cnVjdCBwbGF0
Zm9ybV9kZXZpY2UgKnBkZXYpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHBs
YXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwotCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2Rl
diA9ICZkZGF0YS0+ZHNzZGV2OwotCi0JaWYgKGRzc2Rldi0+bmV4dCkKLQkJb21hcGRzc19kZXZp
Y2VfcHV0KGRzc2Rldi0+bmV4dCk7Ci0Jb21hcGRzc19kZXZpY2VfdW5yZWdpc3RlcigmZGRhdGEt
PmRzc2Rldik7Ci0KLQlvcGEzNjJfZGlzYWJsZShkc3NkZXYpOwotCi0JcmV0dXJuIDA7Ci19Ci0K
LXN0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIG9wYTM2Ml9vZl9tYXRjaFtdID0gewot
CXsgLmNvbXBhdGlibGUgPSAib21hcGRzcyx0aSxvcGEzNjIiLCB9LAotCXt9LAotfTsKLU1PRFVM
RV9ERVZJQ0VfVEFCTEUob2YsIG9wYTM2Ml9vZl9tYXRjaCk7Ci0KLXN0YXRpYyBzdHJ1Y3QgcGxh
dGZvcm1fZHJpdmVyIG9wYTM2Ml9kcml2ZXIgPSB7Ci0JLnByb2JlCT0gb3BhMzYyX3Byb2JlLAot
CS5yZW1vdmUJPSBfX2V4aXRfcChvcGEzNjJfcmVtb3ZlKSwKLQkuZHJpdmVyCT0gewotCQkubmFt
ZQk9ICJhbXBsaWZpZXItb3BhMzYyIiwKLQkJLm9mX21hdGNoX3RhYmxlID0gb3BhMzYyX29mX21h
dGNoLAotCQkuc3VwcHJlc3NfYmluZF9hdHRycyA9IHRydWUsCi0JfSwKLX07Ci0KLW1vZHVsZV9w
bGF0Zm9ybV9kcml2ZXIob3BhMzYyX2RyaXZlcik7Ci0KLU1PRFVMRV9BVVRIT1IoIkguIE5pa29s
YXVzIFNjaGFsbGVyIDxobnNAZ29sZGVsaWNvLmNvbT4iKTsKLU1PRFVMRV9ERVNDUklQVElPTigi
T1BBMzYyIGFuYWxvZyB2aWRlbyBhbXBsaWZpZXIgd2l0aCBvdXRwdXQvcG93ZXIgY29udHJvbCIp
OwotTU9EVUxFX0xJQ0VOU0UoIkdQTCB2MiIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L29tYXBkcm0vZGlzcGxheXMvZW5jb2Rlci10cGQxMnMwMTUuYyBiL2RyaXZlcnMvZ3B1L2RybS9v
bWFwZHJtL2Rpc3BsYXlzL2VuY29kZXItdHBkMTJzMDE1LmMKZGVsZXRlZCBmaWxlIG1vZGUgMTAw
NjQ0CmluZGV4IGIwZTYyZWQzZmNlNC4uMDAwMDAwMDAwMDAwCi0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9vbWFwZHJtL2Rpc3BsYXlzL2VuY29kZXItdHBkMTJzMDE1LmMKKysrIC9kZXYvbnVsbApAQCAt
MSwyMjAgKzAsMCBAQAotLyoKLSAqIFRQRDEyUzAxNSBIRE1JIEVTRCBwcm90ZWN0aW9uICYgbGV2
ZWwgc2hpZnRlciBjaGlwIGRyaXZlcgotICoKLSAqIENvcHlyaWdodCAoQykgMjAxMyBUZXhhcyBJ
bnN0cnVtZW50cyBJbmNvcnBvcmF0ZWQgLSBodHRwOi8vd3d3LnRpLmNvbS8KLSAqIEF1dGhvcjog
VG9taSBWYWxrZWluZW4gPHRvbWkudmFsa2VpbmVuQHRpLmNvbT4KLSAqCi0gKiBUaGlzIHByb2dy
YW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlm
eSBpdAotICogdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5z
ZSB2ZXJzaW9uIDIgYXMgcHVibGlzaGVkIGJ5Ci0gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0
aW9uLgotICovCi0KLSNpbmNsdWRlIDxsaW51eC9jb21wbGV0aW9uLmg+Ci0jaW5jbHVkZSA8bGlu
dXgvZGVsYXkuaD4KLSNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KLSNpbmNsdWRlIDxsaW51eC9z
bGFiLmg+Ci0jaW5jbHVkZSA8bGludXgvcGxhdGZvcm1fZGV2aWNlLmg+Ci0jaW5jbHVkZSA8bGlu
dXgvZ3Bpby9jb25zdW1lci5oPgotI2luY2x1ZGUgPGxpbnV4L211dGV4Lmg+Ci0KLSNpbmNsdWRl
ICIuLi9kc3Mvb21hcGRzcy5oIgotCi1zdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgewotCXN0cnVjdCBv
bWFwX2Rzc19kZXZpY2UgZHNzZGV2OwotCXZvaWQgKCpocGRfY2IpKHZvaWQgKmNiX2RhdGEsIGVu
dW0gZHJtX2Nvbm5lY3Rvcl9zdGF0dXMgc3RhdHVzKTsKLQl2b2lkICpocGRfY2JfZGF0YTsKLQlz
dHJ1Y3QgbXV0ZXggaHBkX2xvY2s7Ci0KLQlzdHJ1Y3QgZ3Bpb19kZXNjICpjdF9jcF9ocGRfZ3Bp
bzsKLQlzdHJ1Y3QgZ3Bpb19kZXNjICpsc19vZV9ncGlvOwotCXN0cnVjdCBncGlvX2Rlc2MgKmhw
ZF9ncGlvOwotfTsKLQotI2RlZmluZSB0b19wYW5lbF9kYXRhKHgpIGNvbnRhaW5lcl9vZih4LCBz
dHJ1Y3QgcGFuZWxfZHJ2X2RhdGEsIGRzc2RldikKLQotc3RhdGljIGludCB0cGRfY29ubmVjdChz
dHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpzcmMsCi0JCSAgICAgICBzdHJ1Y3Qgb21hcF9kc3NfZGV2
aWNlICpkc3QpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHRvX3BhbmVsX2Rh
dGEoZHN0KTsKLQlpbnQgcjsKLQotCXIgPSBvbWFwZHNzX2RldmljZV9jb25uZWN0KGRzdC0+ZHNz
LCBkc3QsIGRzdC0+bmV4dCk7Ci0JaWYgKHIpCi0JCXJldHVybiByOwotCi0JZ3Bpb2Rfc2V0X3Zh
bHVlX2NhbnNsZWVwKGRkYXRhLT5jdF9jcF9ocGRfZ3BpbywgMSk7Ci0JZ3Bpb2Rfc2V0X3ZhbHVl
X2NhbnNsZWVwKGRkYXRhLT5sc19vZV9ncGlvLCAxKTsKLQotCS8qIERDLURDIGNvbnZlcnRlciBu
ZWVkcyBhdCBtYXggMzAwdXMgdG8gZ2V0IHRvIDkwJSBvZiA1ViAqLwotCXVkZWxheSgzMDApOwot
Ci0JcmV0dXJuIDA7Ci19Ci0KLXN0YXRpYyB2b2lkIHRwZF9kaXNjb25uZWN0KHN0cnVjdCBvbWFw
X2Rzc19kZXZpY2UgKnNyYywKLQkJCSAgIHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzdCkKLXsK
LQlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRhID0gdG9fcGFuZWxfZGF0YShkc3QpOwotCi0J
Z3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGRkYXRhLT5jdF9jcF9ocGRfZ3BpbywgMCk7Ci0JZ3Bp
b2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGRkYXRhLT5sc19vZV9ncGlvLCAwKTsKLQotCW9tYXBkc3Nf
ZGV2aWNlX2Rpc2Nvbm5lY3QoZHN0LCBkc3QtPm5leHQpOwotfQotCi1zdGF0aWMgYm9vbCB0cGRf
ZGV0ZWN0KHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldikKLXsKLQlzdHJ1Y3QgcGFuZWxf
ZHJ2X2RhdGEgKmRkYXRhID0gdG9fcGFuZWxfZGF0YShkc3NkZXYpOwotCi0JcmV0dXJuIGdwaW9k
X2dldF92YWx1ZV9jYW5zbGVlcChkZGF0YS0+aHBkX2dwaW8pOwotfQotCi1zdGF0aWMgdm9pZCB0
cGRfcmVnaXN0ZXJfaHBkX2NiKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwKLQkJCQl2
b2lkICgqY2IpKHZvaWQgKmNiX2RhdGEsCi0JCQkJCSAgZW51bSBkcm1fY29ubmVjdG9yX3N0YXR1
cyBzdGF0dXMpLAotCQkJCXZvaWQgKmNiX2RhdGEpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRh
ICpkZGF0YSA9IHRvX3BhbmVsX2RhdGEoZHNzZGV2KTsKLQotCW11dGV4X2xvY2soJmRkYXRhLT5o
cGRfbG9jayk7Ci0JZGRhdGEtPmhwZF9jYiA9IGNiOwotCWRkYXRhLT5ocGRfY2JfZGF0YSA9IGNi
X2RhdGE7Ci0JbXV0ZXhfdW5sb2NrKCZkZGF0YS0+aHBkX2xvY2spOwotfQotCi1zdGF0aWMgdm9p
ZCB0cGRfdW5yZWdpc3Rlcl9ocGRfY2Ioc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2KQot
ewotCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSB0b19wYW5lbF9kYXRhKGRzc2Rldik7
Ci0KLQltdXRleF9sb2NrKCZkZGF0YS0+aHBkX2xvY2spOwotCWRkYXRhLT5ocGRfY2IgPSBOVUxM
OwotCWRkYXRhLT5ocGRfY2JfZGF0YSA9IE5VTEw7Ci0JbXV0ZXhfdW5sb2NrKCZkZGF0YS0+aHBk
X2xvY2spOwotfQotCi1zdGF0aWMgY29uc3Qgc3RydWN0IG9tYXBfZHNzX2RldmljZV9vcHMgdHBk
X29wcyA9IHsKLQkuY29ubmVjdAkJPSB0cGRfY29ubmVjdCwKLQkuZGlzY29ubmVjdAkJPSB0cGRf
ZGlzY29ubmVjdCwKLQkuZGV0ZWN0CQkJPSB0cGRfZGV0ZWN0LAotCS5yZWdpc3Rlcl9ocGRfY2IJ
PSB0cGRfcmVnaXN0ZXJfaHBkX2NiLAotCS51bnJlZ2lzdGVyX2hwZF9jYgk9IHRwZF91bnJlZ2lz
dGVyX2hwZF9jYiwKLX07Ci0KLXN0YXRpYyBpcnFyZXR1cm5fdCB0cGRfaHBkX2lzcihpbnQgaXJx
LCB2b2lkICpkYXRhKQotewotCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBkYXRhOwot
Ci0JbXV0ZXhfbG9jaygmZGRhdGEtPmhwZF9sb2NrKTsKLQlpZiAoZGRhdGEtPmhwZF9jYikgewot
CQllbnVtIGRybV9jb25uZWN0b3Jfc3RhdHVzIHN0YXR1czsKLQotCQlpZiAodHBkX2RldGVjdCgm
ZGRhdGEtPmRzc2RldikpCi0JCQlzdGF0dXMgPSBjb25uZWN0b3Jfc3RhdHVzX2Nvbm5lY3RlZDsK
LQkJZWxzZQotCQkJc3RhdHVzID0gY29ubmVjdG9yX3N0YXR1c19kaXNjb25uZWN0ZWQ7Ci0KLQkJ
ZGRhdGEtPmhwZF9jYihkZGF0YS0+aHBkX2NiX2RhdGEsIHN0YXR1cyk7Ci0JfQotCW11dGV4X3Vu
bG9jaygmZGRhdGEtPmhwZF9sb2NrKTsKLQotCXJldHVybiBJUlFfSEFORExFRDsKLX0KLQotc3Rh
dGljIGludCB0cGRfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKLXsKLQlzdHJ1
Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXY7Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0
YTsKLQlpbnQgcjsKLQlzdHJ1Y3QgZ3Bpb19kZXNjICpncGlvOwotCi0JZGRhdGEgPSBkZXZtX2t6
YWxsb2MoJnBkZXYtPmRldiwgc2l6ZW9mKCpkZGF0YSksIEdGUF9LRVJORUwpOwotCWlmICghZGRh
dGEpCi0JCXJldHVybiAtRU5PTUVNOwotCi0JcGxhdGZvcm1fc2V0X2RydmRhdGEocGRldiwgZGRh
dGEpOwotCi0JZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0X2luZGV4X29wdGlvbmFsKCZwZGV2LT5kZXYs
IE5VTEwsIDAsCi0JCSBHUElPRF9PVVRfTE9XKTsKLQlpZiAoSVNfRVJSKGdwaW8pKQotCQlyZXR1
cm4gUFRSX0VSUihncGlvKTsKLQotCWRkYXRhLT5jdF9jcF9ocGRfZ3BpbyA9IGdwaW87Ci0KLQln
cGlvID0gZGV2bV9ncGlvZF9nZXRfaW5kZXhfb3B0aW9uYWwoJnBkZXYtPmRldiwgTlVMTCwgMSwK
LQkJIEdQSU9EX09VVF9MT1cpOwotCWlmIChJU19FUlIoZ3BpbykpCi0JCXJldHVybiBQVFJfRVJS
KGdwaW8pOwotCi0JZGRhdGEtPmxzX29lX2dwaW8gPSBncGlvOwotCi0JZ3BpbyA9IGRldm1fZ3Bp
b2RfZ2V0X2luZGV4KCZwZGV2LT5kZXYsIE5VTEwsIDIsCi0JCUdQSU9EX0lOKTsKLQlpZiAoSVNf
RVJSKGdwaW8pKQotCQlyZXR1cm4gUFRSX0VSUihncGlvKTsKLQotCWRkYXRhLT5ocGRfZ3BpbyA9
IGdwaW87Ci0KLQltdXRleF9pbml0KCZkZGF0YS0+aHBkX2xvY2spOwotCi0JciA9IGRldm1fcmVx
dWVzdF90aHJlYWRlZF9pcnEoJnBkZXYtPmRldiwgZ3Bpb2RfdG9faXJxKGRkYXRhLT5ocGRfZ3Bp
byksCi0JCU5VTEwsIHRwZF9ocGRfaXNyLAotCQlJUlFGX1RSSUdHRVJfUklTSU5HIHwgSVJRRl9U
UklHR0VSX0ZBTExJTkcgfCBJUlFGX09ORVNIT1QsCi0JCSJ0cGQxMnMwMTUgaHBkIiwgZGRhdGEp
OwotCWlmIChyKQotCQlyZXR1cm4gcjsKLQotCWRzc2RldiA9ICZkZGF0YS0+ZHNzZGV2OwotCWRz
c2Rldi0+b3BzID0gJnRwZF9vcHM7Ci0JZHNzZGV2LT5kZXYgPSAmcGRldi0+ZGV2OwotCWRzc2Rl
di0+dHlwZSA9IE9NQVBfRElTUExBWV9UWVBFX0hETUk7Ci0JZHNzZGV2LT5vd25lciA9IFRISVNf
TU9EVUxFOwotCWRzc2Rldi0+b2ZfcG9ydCA9IDE7Ci0JZHNzZGV2LT5vcHNfZmxhZ3MgPSBPTUFQ
X0RTU19ERVZJQ0VfT1BfREVURUNUCi0JCQkgIHwgT01BUF9EU1NfREVWSUNFX09QX0hQRDsKLQot
CWRzc2Rldi0+bmV4dCA9IG9tYXBkc3Nfb2ZfZmluZF9jb25uZWN0ZWRfZGV2aWNlKHBkZXYtPmRl
di5vZl9ub2RlLCAxKTsKLQlpZiAoSVNfRVJSKGRzc2Rldi0+bmV4dCkpIHsKLQkJaWYgKFBUUl9F
UlIoZHNzZGV2LT5uZXh0KSAhPSAtRVBST0JFX0RFRkVSKQotCQkJZGV2X2VycigmcGRldi0+ZGV2
LCAiZmFpbGVkIHRvIGZpbmQgdmlkZW8gc2lua1xuIik7Ci0JCXJldHVybiBQVFJfRVJSKGRzc2Rl
di0+bmV4dCk7Ci0JfQotCi0Jb21hcGRzc19kZXZpY2VfcmVnaXN0ZXIoZHNzZGV2KTsKLQotCXJl
dHVybiAwOwotfQotCi1zdGF0aWMgaW50IF9fZXhpdCB0cGRfcmVtb3ZlKHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYpCi17Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHBsYXRm
b3JtX2dldF9kcnZkYXRhKHBkZXYpOwotCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiA9
ICZkZGF0YS0+ZHNzZGV2OwotCi0JaWYgKGRzc2Rldi0+bmV4dCkKLQkJb21hcGRzc19kZXZpY2Vf
cHV0KGRzc2Rldi0+bmV4dCk7Ci0Jb21hcGRzc19kZXZpY2VfdW5yZWdpc3RlcigmZGRhdGEtPmRz
c2Rldik7Ci0KLQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2Vf
aWQgdHBkX29mX21hdGNoW10gPSB7Ci0JeyAuY29tcGF0aWJsZSA9ICJvbWFwZHNzLHRpLHRwZDEy
czAxNSIsIH0sCi0Je30sCi19OwotCi1NT0RVTEVfREVWSUNFX1RBQkxFKG9mLCB0cGRfb2ZfbWF0
Y2gpOwotCi1zdGF0aWMgc3RydWN0IHBsYXRmb3JtX2RyaXZlciB0cGRfZHJpdmVyID0gewotCS5w
cm9iZQk9IHRwZF9wcm9iZSwKLQkucmVtb3ZlCT0gX19leGl0X3AodHBkX3JlbW92ZSksCi0JLmRy
aXZlcgk9IHsKLQkJLm5hbWUJPSAidHBkMTJzMDE1IiwKLQkJLm9mX21hdGNoX3RhYmxlID0gdHBk
X29mX21hdGNoLAotCQkuc3VwcHJlc3NfYmluZF9hdHRycyA9IHRydWUsCi0JfSwKLX07Ci0KLW1v
ZHVsZV9wbGF0Zm9ybV9kcml2ZXIodHBkX2RyaXZlcik7Ci0KLU1PRFVMRV9BVVRIT1IoIlRvbWkg
VmFsa2VpbmVuIDx0b21pLnZhbGtlaW5lbkB0aS5jb20+Iik7Ci1NT0RVTEVfREVTQ1JJUFRJT04o
IlRQRDEyUzAxNSBkcml2ZXIiKTsKLU1PRFVMRV9MSUNFTlNFKCJHUEwiKTsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNC5jIGIvZHJpdmVycy9ncHUvZHJtL29t
YXBkcm0vZHNzL2hkbWk0LmMKaW5kZXggZGY1NmFjYjVjYjI3Li5iNjVhZmE4YjkzYzYgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNC5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNC5jCkBAIC00NTEsOCArNDUxLDggQEAgc3RhdGljIGlu
dCBoZG1pNF9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsIGJvb2wgY3Jl
YXRlX2Nvbm5lY3RvcikKIHsKIAlzdHJ1Y3Qgb21hcF9oZG1pICpoZG1pID0gZHJtX2JyaWRnZV90
b19oZG1pKGJyaWRnZSk7CiAKLQlpZiAoIWhkbWktPm91dHB1dC5uZXh0X2JyaWRnZSkKLQkJcmV0
dXJuIDA7CisJaWYgKGNyZWF0ZV9jb25uZWN0b3IpCisJCXJldHVybiAtRUlOVkFMOwogCiAJcmV0
dXJuIGRybV9icmlkZ2VfYXR0YWNoKGJyaWRnZS0+ZW5jb2RlciwgaGRtaS0+b3V0cHV0Lm5leHRf
YnJpZGdlLAogCQkJCSBicmlkZ2UsIGZhbHNlKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9vbWFwZHJtL2Rzcy9oZG1pNS5jIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2hkbWk1
LmMKaW5kZXggZDAzZjJhNDE1ZmQ0Li5mZDM4NmUxODlhYjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJt
L2Rzcy9oZG1pNS5jCkBAIC00MjksOCArNDI5LDggQEAgc3RhdGljIGludCBoZG1pNV9icmlkZ2Vf
YXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsIGJvb2wgY3JlYXRlX2Nvbm5lY3RvcikK
IHsKIAlzdHJ1Y3Qgb21hcF9oZG1pICpoZG1pID0gZHJtX2JyaWRnZV90b19oZG1pKGJyaWRnZSk7
CiAKLQlpZiAoIWhkbWktPm91dHB1dC5uZXh0X2JyaWRnZSkKLQkJcmV0dXJuIDA7CisJaWYgKGNy
ZWF0ZV9jb25uZWN0b3IpCisJCXJldHVybiAtRUlOVkFMOwogCiAJcmV0dXJuIGRybV9icmlkZ2Vf
YXR0YWNoKGJyaWRnZS0+ZW5jb2RlciwgaGRtaS0+b3V0cHV0Lm5leHRfYnJpZGdlLAogCQkJCSBi
cmlkZ2UsIGZhbHNlKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9v
bWFwZHNzLWJvb3QtaW5pdC5jIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL29tYXBkc3Mt
Ym9vdC1pbml0LmMKaW5kZXggZTAyYWE4ZTcwOTY4Li4yNGUzNmQ2OGYzYzQgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLWJvb3QtaW5pdC5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLWJvb3QtaW5pdC5jCkBAIC0xODUsMTYg
KzE4NSwxMSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBvbWFwZHNzX29mX21h
dGNoW10gX19pbml0Y29uc3QgPSB7CiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2Rldmlj
ZV9pZCBvbWFwZHNzX29mX2ZpeHVwc193aGl0ZWxpc3RbXSBfX2luaXRjb25zdCA9IHsKLQl7IC5j
b21wYXRpYmxlID0gImNvbXBvc2l0ZS12aWRlby1jb25uZWN0b3IiIH0sCi0JeyAuY29tcGF0aWJs
ZSA9ICJoZG1pLWNvbm5lY3RvciIgfSwKIAl7IC5jb21wYXRpYmxlID0gImxncGhpbGlwcyxsYjAz
NXEwMiIgfSwKIAl7IC5jb21wYXRpYmxlID0gIm5lYyxubDgwNDhobDExIiB9LAogCXsgLmNvbXBh
dGlibGUgPSAicGFuZWwtZHNpLWNtIiB9LAogCXsgLmNvbXBhdGlibGUgPSAic2hhcnAsbHMwMzd2
N2R3MDEiIH0sCiAJeyAuY29tcGF0aWJsZSA9ICJzb255LGFjeDU2NWFrbSIgfSwKLQl7IC5jb21w
YXRpYmxlID0gInN2aWRlby1jb25uZWN0b3IiIH0sCi0JeyAuY29tcGF0aWJsZSA9ICJ0aSxvcGEz
NjIiIH0sCi0JeyAuY29tcGF0aWJsZSA9ICJ0aSx0cGQxMnMwMTUiIH0sCiAJeyAuY29tcGF0aWJs
ZSA9ICJ0b3Bwb2x5LHRkMDI4dHRlYzEiIH0sCiAJeyAuY29tcGF0aWJsZSA9ICJ0cG8sdGQwMjh0
dGVjMSIgfSwKIAl7IC5jb21wYXRpYmxlID0gInRwbyx0ZDA0M210ZWExIiB9LApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL291dHB1dC5jIGIvZHJpdmVycy9ncHUvZHJt
L29tYXBkcm0vZHNzL291dHB1dC5jCmluZGV4IDcxNjkzZDFhYmVhOC4uMjU4YzMyNmE1MDk4IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb3V0cHV0LmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL291dHB1dC5jCkBAIC03Miw2ICs3MiwxMSBAQCBpbnQg
b21hcGRzc19kZXZpY2VfaW5pdF9vdXRwdXQoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqb3V0LAog
CX0KIAogCWlmIChsb2NhbF9icmlkZ2UpIHsKKwkJaWYgKCFvdXQtPmJyaWRnZSkgeworCQkJcmV0
ID0gLUVQUk9CRV9ERUZFUjsKKwkJCWdvdG8gZXJyb3I7CisJCX0KKwogCQlvdXQtPm5leHRfYnJp
ZGdlID0gb3V0LT5icmlkZ2U7CiAJCW91dC0+YnJpZGdlID0gbG9jYWxfYnJpZGdlOwogCX0KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy92ZW5jLmMgYi9kcml2ZXJzL2dw
dS9kcm0vb21hcGRybS9kc3MvdmVuYy5jCmluZGV4IGQ5ZjgyMDhlMGVlOS4uNjZjZDc1ZTcxOTM5
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvdmVuYy5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy92ZW5jLmMKQEAgLTYzOCw4ICs2MzgsOCBAQCBzdGF0
aWMgaW50IHZlbmNfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLCBib29s
IGNyZWF0ZV9jb25uZWN0b3IpCiB7CiAJc3RydWN0IHZlbmNfZGV2aWNlICp2ZW5jID0gZHJtX2Jy
aWRnZV90b192ZW5jKGJyaWRnZSk7CiAKLQlpZiAodmVuYy0+b3V0cHV0Lm5leHRfYnJpZGdlKQot
CQlyZXR1cm4gMDsKKwlpZiAoY3JlYXRlX2Nvbm5lY3RvcikKKwkJcmV0dXJuIC1FSU5WQUw7CiAK
IAlyZXR1cm4gZHJtX2JyaWRnZV9hdHRhY2goYnJpZGdlLT5lbmNvZGVyLCB2ZW5jLT5vdXRwdXQu
bmV4dF9icmlkZ2UsCiAJCQkJIGJyaWRnZSwgZmFsc2UpOwotLSAKUmVnYXJkcywKCkxhdXJlbnQg
UGluY2hhcnQKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
