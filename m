Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EC13170B93
	for <lists+dri-devel@lfdr.de>; Mon, 22 Jul 2019 23:38:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BC7C689E50;
	Mon, 22 Jul 2019 21:38:11 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x544.google.com (mail-ed1-x544.google.com
 [IPv6:2a00:1450:4864:20::544])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 635FE89E50
 for <dri-devel@lists.freedesktop.org>; Mon, 22 Jul 2019 21:38:10 +0000 (UTC)
Received: by mail-ed1-x544.google.com with SMTP id v15so41929869eds.9
 for <dri-devel@lists.freedesktop.org>; Mon, 22 Jul 2019 14:38:10 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=LfEuTdoY/d8xjWh06+JhV54aMeBJjUIxGHWbjCtu1qk=;
 b=Ba6B17+FtGuKWiw+7kOovqbnIO5os6hHBASUjYQjBrXSA9a3wrJogQokKKBOePXgE4
 AGP9SDdyy4rdQaznejVpPDDzZIOLv0l4g3Vo9WtG9L0xZACUyvCsdEvnIlxuYI1HoB5x
 bpIyeQeG7Sx0e2HXdYyH3hjTU+oQWEt/1LI95OLSzYAij2DwbhyLxxUyxRPrjSBUZiGc
 aHuKOcHROI/zXCi2qR94LgYC8swzniLEiYd8F940o3fpcVAT97UkkbvAd4BO9NVU9zQC
 oPq9ruAfAJs8B0Lhj58TA8EuH2IgLwWWju0gw0pjQulYULIZdBGtim2EZw5NfCWtNOhp
 YUSg==
X-Gm-Message-State: APjAAAUIFGr3JzxrIcbWkLz9D8Z0R1t3MpRYBb56z9r6QJ3CY22XfUaV
 u9GLT6PiTwae558QiHkKjC8XDyabG+c=
X-Google-Smtp-Source: APXvYqzY2doyHHGtX+XMlLhVxRDCKq2kGvVpKrpeqWqj2vsVwZ+qJQGXfozqf47MdBTkoHCcCq/5pQ==
X-Received: by 2002:a17:906:d8ab:: with SMTP id
 qc11mr55618425ejb.219.1563831488367; 
 Mon, 22 Jul 2019 14:38:08 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id jr20sm8189186ejb.88.2019.07.22.14.38.07
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 22 Jul 2019 14:38:07 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: DRI Development <dri-devel@lists.freedesktop.org>
Subject: [PATCH] drm/i915: Fix up broken merge
Date: Mon, 22 Jul 2019 23:37:59 +0200
Message-Id: <20190722213759.26612-1-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190722212101.26030-1-daniel.vetter@ffwll.ch>
References: <20190722212101.26030-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=LfEuTdoY/d8xjWh06+JhV54aMeBJjUIxGHWbjCtu1qk=;
 b=b0tYdfOTTC1XUj53qxgFUYlwD2BgP+hPxI/IHoSJXmdohvzzxU5zoUD1+OaXZqD2u5
 9UhroUbT55z+STrSu144cE757yD+gRi9eBW1D1tY/wVakN+IMUWovwSI0AVsM61eqI9H
 n1X2K1W0WhbtCGJ0m2HnbIjLuP35w5p0xo7C4=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Daniel Vetter <daniel.vetter@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TWF4aW1lIGRpZG4ndCByZWFsbHkgY29tcGlsZS10ZXN0IHRoaXMgOi0vCgpXZSBuZWVkIHRvIHJl
LWFwcGx5Cgpjb21taXQgZTRmYTg0NTdiMjE5NzExODUzOGExNDAwYjc1Yzg5OGY5ZmFhZjE2NApB
dXRob3I6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+CkRhdGU6ICAgRnJp
IEp1biAxNCAyMjozNToyNSAyMDE5ICswMjAwCgogICAgZHJtL3ByaW1lOiBBbGlnbiBnZW1fcHJp
bWVfZXhwb3J0IHdpdGggb2JqX2Z1bmNzLmV4cG9ydAoKcGx1cyBtYWtlIHN1cmUgaTkxNV9nZW1f
ZG1hX2J1Zi5jIGRvZXNuJ3QgZ2V0IHpvbWJpZS1yZXN1cnJlY3QuIEl0Cm1vdmVkIGluCgpjb21t
aXQgMTBiZTk4YTc3YzU1OGY4Y2ZiODIzY2QyNzc3MTcxZmJiMzUwNDBmNgpBdXRob3I6IENocmlz
IFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpEYXRlOiAgIFR1ZSBNYXkgMjggMTA6
Mjk6NDkgMjAxOSArMDEwMAoKICAgIGRybS9pOTE1OiBNb3ZlIG1vcmUgR0VNIG9iamVjdHMgdW5k
ZXIgZ2VtLwoKdjI6IFJlbWVtYmVyIHRoZSBzZWxmdGVzdHMgKENocmlzKS4KCkZpeGVzOiAwM2Iw
ZjJjZTczNWUgKCJNZXJnZSB2NS4zLXJjMSBpbnRvIGRybS1taXNjLW5leHQiKQpDYzogTWF4aW1l
IFJpcGFyZCA8bWF4aW1lLnJpcGFyZEBib290bGluLmNvbT4KQ2M6IENocmlzIFdpbHNvbiA8Y2hy
aXNAY2hyaXMtd2lsc29uLmNvLnVrPgpTaWduZWQtb2ZmLWJ5OiBEYW5pZWwgVmV0dGVyIDxkYW5p
ZWwudmV0dGVyQGludGVsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fZG1hYnVmLmMgICAgfCAgIDUgKy0KIC4uLi9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVf
Z2VtX2RtYWJ1Zi5jICB8ICAgOCArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZG1h
YnVmLmMgICAgICAgIHwgMzM2IC0tLS0tLS0tLS0tLS0tLQogLi4uL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMgIHwgNDA0IC0tLS0tLS0tLS0tLS0tLS0tLQogNCBmaWxl
cyBjaGFuZ2VkLCA2IGluc2VydGlvbnMoKyksIDc0NyBkZWxldGlvbnMoLSkKIGRlbGV0ZSBtb2Rl
IDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9kbWFidWYuYwogZGVsZXRlIG1v
ZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9kbWFidWYu
YwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYwppbmRleCBjYmYx
NzAxZDNhY2MuLjU3MGIyMGFkOWU1OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1
X2dlbV9kbWFidWYuYwpAQCAtMjA0LDggKzIwNCw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZG1h
X2J1Zl9vcHMgaTkxNV9kbWFidWZfb3BzID0gIHsKIAkuZW5kX2NwdV9hY2Nlc3MgPSBpOTE1X2dl
bV9lbmRfY3B1X2FjY2VzcywKIH07CiAKLXN0cnVjdCBkbWFfYnVmICppOTE1X2dlbV9wcmltZV9l
eHBvcnQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKLQkJCQkgICAgICBzdHJ1Y3QgZHJtX2dlbV9v
YmplY3QgKmdlbV9vYmosIGludCBmbGFncykKK3N0cnVjdCBkbWFfYnVmICppOTE1X2dlbV9wcmlt
ZV9leHBvcnQoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpnZW1fb2JqLCBpbnQgZmxhZ3MpCiB7CiAJ
c3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiA9IHRvX2ludGVsX2JvKGdlbV9vYmopOwog
CURFRklORV9ETUFfQlVGX0VYUE9SVF9JTkZPKGV4cF9pbmZvKTsKQEAgLTIyMiw3ICsyMjEsNyBA
QCBzdHJ1Y3QgZG1hX2J1ZiAqaTkxNV9nZW1fcHJpbWVfZXhwb3J0KHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYsCiAJCQlyZXR1cm4gRVJSX1BUUihyZXQpOwogCX0KIAotCXJldHVybiBkcm1fZ2VtX2Rt
YWJ1Zl9leHBvcnQoZGV2LCAmZXhwX2luZm8pOworCXJldHVybiBkcm1fZ2VtX2RtYWJ1Zl9leHBv
cnQoZ2VtX29iai0+ZGV2LCAmZXhwX2luZm8pOwogfQogCiBzdGF0aWMgaW50IGk5MTVfZ2VtX29i
amVjdF9nZXRfcGFnZXNfZG1hYnVmKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2Rt
YWJ1Zi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9kbWFi
dWYuYwppbmRleCBlM2E2NGVkZWY5MTguLmQ4NWQxY2UyNzNjYSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9kbWFidWYuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2RtYWJ1Zi5jCkBAIC0yMCw3
ICsyMCw3IEBAIHN0YXRpYyBpbnQgaWd0X2RtYWJ1Zl9leHBvcnQodm9pZCAqYXJnKQogCWlmIChJ
U19FUlIob2JqKSkKIAkJcmV0dXJuIFBUUl9FUlIob2JqKTsKIAotCWRtYWJ1ZiA9IGk5MTVfZ2Vt
X3ByaW1lX2V4cG9ydCgmaTkxNS0+ZHJtLCAmb2JqLT5iYXNlLCAwKTsKKwlkbWFidWYgPSBpOTE1
X2dlbV9wcmltZV9leHBvcnQoJm9iai0+YmFzZSwgMCk7CiAJaTkxNV9nZW1fb2JqZWN0X3B1dChv
YmopOwogCWlmIChJU19FUlIoZG1hYnVmKSkgewogCQlwcl9lcnIoImk5MTVfZ2VtX3ByaW1lX2V4
cG9ydCBmYWlsZWQgd2l0aCBlcnI9JWRcbiIsCkBAIC00NCw3ICs0NCw3IEBAIHN0YXRpYyBpbnQg
aWd0X2RtYWJ1Zl9pbXBvcnRfc2VsZih2b2lkICphcmcpCiAJaWYgKElTX0VSUihvYmopKQogCQly
ZXR1cm4gUFRSX0VSUihvYmopOwogCi0JZG1hYnVmID0gaTkxNV9nZW1fcHJpbWVfZXhwb3J0KCZp
OTE1LT5kcm0sICZvYmotPmJhc2UsIDApOworCWRtYWJ1ZiA9IGk5MTVfZ2VtX3ByaW1lX2V4cG9y
dCgmb2JqLT5iYXNlLCAwKTsKIAlpZiAoSVNfRVJSKGRtYWJ1ZikpIHsKIAkJcHJfZXJyKCJpOTE1
X2dlbV9wcmltZV9leHBvcnQgZmFpbGVkIHdpdGggZXJyPSVkXG4iLAogCQkgICAgICAgKGludClQ
VFJfRVJSKGRtYWJ1ZikpOwpAQCAtMjE5LDcgKzIxOSw3IEBAIHN0YXRpYyBpbnQgaWd0X2RtYWJ1
Zl9leHBvcnRfdm1hcCh2b2lkICphcmcpCiAJaWYgKElTX0VSUihvYmopKQogCQlyZXR1cm4gUFRS
X0VSUihvYmopOwogCi0JZG1hYnVmID0gaTkxNV9nZW1fcHJpbWVfZXhwb3J0KCZpOTE1LT5kcm0s
ICZvYmotPmJhc2UsIDApOworCWRtYWJ1ZiA9IGk5MTVfZ2VtX3ByaW1lX2V4cG9ydCgmb2JqLT5i
YXNlLCAwKTsKIAlpZiAoSVNfRVJSKGRtYWJ1ZikpIHsKIAkJcHJfZXJyKCJpOTE1X2dlbV9wcmlt
ZV9leHBvcnQgZmFpbGVkIHdpdGggZXJyPSVkXG4iLAogCQkgICAgICAgKGludClQVFJfRVJSKGRt
YWJ1ZikpOwpAQCAtMjY2LDcgKzI2Niw3IEBAIHN0YXRpYyBpbnQgaWd0X2RtYWJ1Zl9leHBvcnRf
a21hcCh2b2lkICphcmcpCiAJaWYgKElTX0VSUihvYmopKQogCQlyZXR1cm4gUFRSX0VSUihvYmop
OwogCi0JZG1hYnVmID0gaTkxNV9nZW1fcHJpbWVfZXhwb3J0KCZpOTE1LT5kcm0sICZvYmotPmJh
c2UsIDApOworCWRtYWJ1ZiA9IGk5MTVfZ2VtX3ByaW1lX2V4cG9ydCgmb2JqLT5iYXNlLCAwKTsK
IAlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7CiAJaWYgKElTX0VSUihkbWFidWYpKSB7CiAJCWVy
ciA9IFBUUl9FUlIoZG1hYnVmKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2VtX2RtYWJ1Zi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZG1hYnVmLmMK
ZGVsZXRlZCBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDU0ZWNhYjkxYjNhOS4uMDAwMDAwMDAwMDAw
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2RtYWJ1Zi5jCisrKyAvZGV2L251
bGwKQEAgLTEsMzM2ICswLDAgQEAKLS8qCi0gKiBDb3B5cmlnaHQgMjAxMiBSZWQgSGF0IEluYwot
ICoKLSAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBh
bnkgcGVyc29uIG9idGFpbmluZyBhCi0gKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29j
aWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAotICogdG8gZGVhbCBp
biB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGlt
aXRhdGlvbgotICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxp
c2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsCi0gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhl
IFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKLSAqIFNvZnR3YXJl
IGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlv
bnM6Ci0gKgotICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lv
biBub3RpY2UgKGluY2x1ZGluZyB0aGUgbmV4dAotICogcGFyYWdyYXBoKSBzaGFsbCBiZSBpbmNs
dWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZQotICogU29m
dHdhcmUuCi0gKgotICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQg
V0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKLSAqIElNUExJRUQsIElOQ0xVRElORyBC
VVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAotICog
RklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElO
IE5PIEVWRU5UIFNIQUxMCi0gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBM
SUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgotICogTElBQklMSVRZLCBXSEVU
SEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcK
LSAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRI
RSBVU0UgT1IgT1RIRVIKLSAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KLSAqCi0gKiBBdXRo
b3JzOgotICoJRGF2ZSBBaXJsaWUgPGFpcmxpZWRAcmVkaGF0LmNvbT4KLSAqLwotCi0jaW5jbHVk
ZSA8bGludXgvZG1hLWJ1Zi5oPgotI2luY2x1ZGUgPGxpbnV4L3Jlc2VydmF0aW9uLmg+Ci0KLQot
I2luY2x1ZGUgImk5MTVfZHJ2LmgiCi0KLXN0YXRpYyBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqZG1hX2J1Zl90b19vYmooc3RydWN0IGRtYV9idWYgKmJ1ZikKLXsKLQlyZXR1cm4gdG9faW50
ZWxfYm8oYnVmLT5wcml2KTsKLX0KLQotc3RhdGljIHN0cnVjdCBzZ190YWJsZSAqaTkxNV9nZW1f
bWFwX2RtYV9idWYoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNobWVudCwKLQkJCQkJ
ICAgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXIpCi17Ci0Jc3RydWN0IGRybV9pOTE1X2dl
bV9vYmplY3QgKm9iaiA9IGRtYV9idWZfdG9fb2JqKGF0dGFjaG1lbnQtPmRtYWJ1Zik7Ci0Jc3Ry
dWN0IHNnX3RhYmxlICpzdDsKLQlzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNyYywgKmRzdDsKLQlpbnQg
cmV0LCBpOwotCi0JcmV0ID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9wYWdlcyhvYmopOwotCWlmIChy
ZXQpCi0JCWdvdG8gZXJyOwotCi0JLyogQ29weSBzZyBzbyB0aGF0IHdlIG1ha2UgYW4gaW5kZXBl
bmRlbnQgbWFwcGluZyAqLwotCXN0ID0ga21hbGxvYyhzaXplb2Yoc3RydWN0IHNnX3RhYmxlKSwg
R0ZQX0tFUk5FTCk7Ci0JaWYgKHN0ID09IE5VTEwpIHsKLQkJcmV0ID0gLUVOT01FTTsKLQkJZ290
byBlcnJfdW5waW5fcGFnZXM7Ci0JfQotCi0JcmV0ID0gc2dfYWxsb2NfdGFibGUoc3QsIG9iai0+
bW0ucGFnZXMtPm5lbnRzLCBHRlBfS0VSTkVMKTsKLQlpZiAocmV0KQotCQlnb3RvIGVycl9mcmVl
OwotCi0Jc3JjID0gb2JqLT5tbS5wYWdlcy0+c2dsOwotCWRzdCA9IHN0LT5zZ2w7Ci0JZm9yIChp
ID0gMDsgaSA8IG9iai0+bW0ucGFnZXMtPm5lbnRzOyBpKyspIHsKLQkJc2dfc2V0X3BhZ2UoZHN0
LCBzZ19wYWdlKHNyYyksIHNyYy0+bGVuZ3RoLCAwKTsKLQkJZHN0ID0gc2dfbmV4dChkc3QpOwot
CQlzcmMgPSBzZ19uZXh0KHNyYyk7Ci0JfQotCi0JaWYgKCFkbWFfbWFwX3NnKGF0dGFjaG1lbnQt
PmRldiwgc3QtPnNnbCwgc3QtPm5lbnRzLCBkaXIpKSB7Ci0JCXJldCA9IC1FTk9NRU07Ci0JCWdv
dG8gZXJyX2ZyZWVfc2c7Ci0JfQotCi0JcmV0dXJuIHN0OwotCi1lcnJfZnJlZV9zZzoKLQlzZ19m
cmVlX3RhYmxlKHN0KTsKLWVycl9mcmVlOgotCWtmcmVlKHN0KTsKLWVycl91bnBpbl9wYWdlczoK
LQlpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMob2JqKTsKLWVycjoKLQlyZXR1cm4gRVJSX1BU
UihyZXQpOwotfQotCi1zdGF0aWMgdm9pZCBpOTE1X2dlbV91bm1hcF9kbWFfYnVmKHN0cnVjdCBk
bWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaG1lbnQsCi0JCQkJICAgc3RydWN0IHNnX3RhYmxlICpz
ZywKLQkJCQkgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXIpCi17Ci0Jc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKm9iaiA9IGRtYV9idWZfdG9fb2JqKGF0dGFjaG1lbnQtPmRtYWJ1Zik7
Ci0KLQlkbWFfdW5tYXBfc2coYXR0YWNobWVudC0+ZGV2LCBzZy0+c2dsLCBzZy0+bmVudHMsIGRp
cik7Ci0Jc2dfZnJlZV90YWJsZShzZyk7Ci0Ja2ZyZWUoc2cpOwotCi0JaTkxNV9nZW1fb2JqZWN0
X3VucGluX3BhZ2VzKG9iaik7Ci19Ci0KLXN0YXRpYyB2b2lkICppOTE1X2dlbV9kbWFidWZfdm1h
cChzdHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1ZikKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqID0gZG1hX2J1Zl90b19vYmooZG1hX2J1Zik7Ci0KLQlyZXR1cm4gaTkxNV9nZW1fb2Jq
ZWN0X3Bpbl9tYXAob2JqLCBJOTE1X01BUF9XQik7Ci19Ci0KLXN0YXRpYyB2b2lkIGk5MTVfZ2Vt
X2RtYWJ1Zl92dW5tYXAoc3RydWN0IGRtYV9idWYgKmRtYV9idWYsIHZvaWQgKnZhZGRyKQotewot
CXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmogPSBkbWFfYnVmX3RvX29iaihkbWFfYnVm
KTsKLQotCWk5MTVfZ2VtX29iamVjdF9mbHVzaF9tYXAob2JqKTsKLQlpOTE1X2dlbV9vYmplY3Rf
dW5waW5fbWFwKG9iaik7Ci19Ci0KLXN0YXRpYyB2b2lkICppOTE1X2dlbV9kbWFidWZfa21hcChz
dHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1ZiwgdW5zaWduZWQgbG9uZyBwYWdlX251bSkKLXsKLQlzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0gZG1hX2J1Zl90b19vYmooZG1hX2J1Zik7Ci0J
c3RydWN0IHBhZ2UgKnBhZ2U7Ci0KLQlpZiAocGFnZV9udW0gPj0gb2JqLT5iYXNlLnNpemUgPj4g
UEFHRV9TSElGVCkKLQkJcmV0dXJuIE5VTEw7Ci0KLQlpZiAoIWk5MTVfZ2VtX29iamVjdF9oYXNf
c3RydWN0X3BhZ2Uob2JqKSkKLQkJcmV0dXJuIE5VTEw7Ci0KLQlpZiAoaTkxNV9nZW1fb2JqZWN0
X3Bpbl9wYWdlcyhvYmopKQotCQlyZXR1cm4gTlVMTDsKLQotCS8qIFN5bmNocm9uaXNhdGlvbiBp
cyBsZWZ0IHRvIHRoZSBjYWxsZXIgKHZpYSAuYmVnaW5fY3B1X2FjY2VzcygpKSAqLwotCXBhZ2Ug
PSBpOTE1X2dlbV9vYmplY3RfZ2V0X3BhZ2Uob2JqLCBwYWdlX251bSk7Ci0JaWYgKElTX0VSUihw
YWdlKSkKLQkJZ290byBlcnJfdW5waW47Ci0KLQlyZXR1cm4ga21hcChwYWdlKTsKLQotZXJyX3Vu
cGluOgotCWk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdlcyhvYmopOwotCXJldHVybiBOVUxMOwot
fQotCi1zdGF0aWMgdm9pZCBpOTE1X2dlbV9kbWFidWZfa3VubWFwKHN0cnVjdCBkbWFfYnVmICpk
bWFfYnVmLCB1bnNpZ25lZCBsb25nIHBhZ2VfbnVtLCB2b2lkICphZGRyKQotewotCXN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmogPSBkbWFfYnVmX3RvX29iaihkbWFfYnVmKTsKLQotCWt1
bm1hcCh2aXJ0X3RvX3BhZ2UoYWRkcikpOwotCWk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdlcyhv
YmopOwotfQotCi1zdGF0aWMgaW50IGk5MTVfZ2VtX2RtYWJ1Zl9tbWFwKHN0cnVjdCBkbWFfYnVm
ICpkbWFfYnVmLCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSkKLXsKLQlzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqID0gZG1hX2J1Zl90b19vYmooZG1hX2J1Zik7Ci0JaW50IHJldDsK
LQotCWlmIChvYmotPmJhc2Uuc2l6ZSA8IHZtYS0+dm1fZW5kIC0gdm1hLT52bV9zdGFydCkKLQkJ
cmV0dXJuIC1FSU5WQUw7Ci0KLQlpZiAoIW9iai0+YmFzZS5maWxwKQotCQlyZXR1cm4gLUVOT0RF
VjsKLQotCXJldCA9IGNhbGxfbW1hcChvYmotPmJhc2UuZmlscCwgdm1hKTsKLQlpZiAocmV0KQot
CQlyZXR1cm4gcmV0OwotCi0JZnB1dCh2bWEtPnZtX2ZpbGUpOwotCXZtYS0+dm1fZmlsZSA9IGdl
dF9maWxlKG9iai0+YmFzZS5maWxwKTsKLQotCXJldHVybiAwOwotfQotCi1zdGF0aWMgaW50IGk5
MTVfZ2VtX2JlZ2luX2NwdV9hY2Nlc3Moc3RydWN0IGRtYV9idWYgKmRtYV9idWYsIGVudW0gZG1h
X2RhdGFfZGlyZWN0aW9uIGRpcmVjdGlvbikKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqID0gZG1hX2J1Zl90b19vYmooZG1hX2J1Zik7Ci0Jc3RydWN0IGRybV9kZXZpY2UgKmRl
diA9IG9iai0+YmFzZS5kZXY7Ci0JYm9vbCB3cml0ZSA9IChkaXJlY3Rpb24gPT0gRE1BX0JJRElS
RUNUSU9OQUwgfHwgZGlyZWN0aW9uID09IERNQV9UT19ERVZJQ0UpOwotCWludCBlcnI7Ci0KLQll
cnIgPSBpOTE1X2dlbV9vYmplY3RfcGluX3BhZ2VzKG9iaik7Ci0JaWYgKGVycikKLQkJcmV0dXJu
IGVycjsKLQotCWVyciA9IGk5MTVfbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKGRldik7Ci0JaWYg
KGVycikKLQkJZ290byBvdXQ7Ci0KLQllcnIgPSBpOTE1X2dlbV9vYmplY3Rfc2V0X3RvX2NwdV9k
b21haW4ob2JqLCB3cml0ZSk7Ci0JbXV0ZXhfdW5sb2NrKCZkZXYtPnN0cnVjdF9tdXRleCk7Ci0K
LW91dDoKLQlpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMob2JqKTsKLQlyZXR1cm4gZXJyOwot
fQotCi1zdGF0aWMgaW50IGk5MTVfZ2VtX2VuZF9jcHVfYWNjZXNzKHN0cnVjdCBkbWFfYnVmICpk
bWFfYnVmLCBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXJlY3Rpb24pCi17Ci0Jc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iaiA9IGRtYV9idWZfdG9fb2JqKGRtYV9idWYpOwotCXN0cnVj
dCBkcm1fZGV2aWNlICpkZXYgPSBvYmotPmJhc2UuZGV2OwotCWludCBlcnI7Ci0KLQllcnIgPSBp
OTE1X2dlbV9vYmplY3RfcGluX3BhZ2VzKG9iaik7Ci0JaWYgKGVycikKLQkJcmV0dXJuIGVycjsK
LQotCWVyciA9IGk5MTVfbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKGRldik7Ci0JaWYgKGVycikK
LQkJZ290byBvdXQ7Ci0KLQllcnIgPSBpOTE1X2dlbV9vYmplY3Rfc2V0X3RvX2d0dF9kb21haW4o
b2JqLCBmYWxzZSk7Ci0JbXV0ZXhfdW5sb2NrKCZkZXYtPnN0cnVjdF9tdXRleCk7Ci0KLW91dDoK
LQlpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMob2JqKTsKLQlyZXR1cm4gZXJyOwotfQotCi1z
dGF0aWMgY29uc3Qgc3RydWN0IGRtYV9idWZfb3BzIGk5MTVfZG1hYnVmX29wcyA9ICB7Ci0JLm1h
cF9kbWFfYnVmID0gaTkxNV9nZW1fbWFwX2RtYV9idWYsCi0JLnVubWFwX2RtYV9idWYgPSBpOTE1
X2dlbV91bm1hcF9kbWFfYnVmLAotCS5yZWxlYXNlID0gZHJtX2dlbV9kbWFidWZfcmVsZWFzZSwK
LQkubWFwID0gaTkxNV9nZW1fZG1hYnVmX2ttYXAsCi0JLnVubWFwID0gaTkxNV9nZW1fZG1hYnVm
X2t1bm1hcCwKLQkubW1hcCA9IGk5MTVfZ2VtX2RtYWJ1Zl9tbWFwLAotCS52bWFwID0gaTkxNV9n
ZW1fZG1hYnVmX3ZtYXAsCi0JLnZ1bm1hcCA9IGk5MTVfZ2VtX2RtYWJ1Zl92dW5tYXAsCi0JLmJl
Z2luX2NwdV9hY2Nlc3MgPSBpOTE1X2dlbV9iZWdpbl9jcHVfYWNjZXNzLAotCS5lbmRfY3B1X2Fj
Y2VzcyA9IGk5MTVfZ2VtX2VuZF9jcHVfYWNjZXNzLAotfTsKLQotc3RydWN0IGRtYV9idWYgKmk5
MTVfZ2VtX3ByaW1lX2V4cG9ydChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdlbV9vYmosIGludCBm
bGFncykKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0gdG9faW50ZWxfYm8o
Z2VtX29iaik7Ci0JREVGSU5FX0RNQV9CVUZfRVhQT1JUX0lORk8oZXhwX2luZm8pOwotCi0JZXhw
X2luZm8ub3BzID0gJmk5MTVfZG1hYnVmX29wczsKLQlleHBfaW5mby5zaXplID0gZ2VtX29iai0+
c2l6ZTsKLQlleHBfaW5mby5mbGFncyA9IGZsYWdzOwotCWV4cF9pbmZvLnByaXYgPSBnZW1fb2Jq
OwotCWV4cF9pbmZvLnJlc3YgPSBvYmotPnJlc3Y7Ci0KLQlpZiAob2JqLT5vcHMtPmRtYWJ1Zl9l
eHBvcnQpIHsKLQkJaW50IHJldCA9IG9iai0+b3BzLT5kbWFidWZfZXhwb3J0KG9iaik7Ci0JCWlm
IChyZXQpCi0JCQlyZXR1cm4gRVJSX1BUUihyZXQpOwotCX0KLQotCXJldHVybiBkcm1fZ2VtX2Rt
YWJ1Zl9leHBvcnQoZ2VtX29iai0+ZGV2LCAmZXhwX2luZm8pOwotfQotCi1zdGF0aWMgaW50IGk5
MTVfZ2VtX29iamVjdF9nZXRfcGFnZXNfZG1hYnVmKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmopCi17Ci0Jc3RydWN0IHNnX3RhYmxlICpwYWdlczsKLQl1bnNpZ25lZCBpbnQgc2dfcGFn
ZV9zaXplczsKLQotCXBhZ2VzID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudChvYmotPmJhc2UuaW1w
b3J0X2F0dGFjaCwKLQkJCQkgICAgICAgRE1BX0JJRElSRUNUSU9OQUwpOwotCWlmIChJU19FUlIo
cGFnZXMpKQotCQlyZXR1cm4gUFRSX0VSUihwYWdlcyk7Ci0KLQlzZ19wYWdlX3NpemVzID0gaTkx
NV9zZ19wYWdlX3NpemVzKHBhZ2VzLT5zZ2wpOwotCi0JX19pOTE1X2dlbV9vYmplY3Rfc2V0X3Bh
Z2VzKG9iaiwgcGFnZXMsIHNnX3BhZ2Vfc2l6ZXMpOwotCi0JcmV0dXJuIDA7Ci19Ci0KLXN0YXRp
YyB2b2lkIGk5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXNfZG1hYnVmKHN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmosCi0JCQkJCSAgICAgc3RydWN0IHNnX3RhYmxlICpwYWdlcykKLXsKLQlk
bWFfYnVmX3VubWFwX2F0dGFjaG1lbnQob2JqLT5iYXNlLmltcG9ydF9hdHRhY2gsIHBhZ2VzLAot
CQkJCSBETUFfQklESVJFQ1RJT05BTCk7Ci19Ci0KLXN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdF9vcHMgaTkxNV9nZW1fb2JqZWN0X2RtYWJ1Zl9vcHMgPSB7Ci0JLmdldF9w
YWdlcyA9IGk5MTVfZ2VtX29iamVjdF9nZXRfcGFnZXNfZG1hYnVmLAotCS5wdXRfcGFnZXMgPSBp
OTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzX2RtYWJ1ZiwKLX07Ci0KLXN0cnVjdCBkcm1fZ2VtX29i
amVjdCAqaTkxNV9nZW1fcHJpbWVfaW1wb3J0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCi0JCQkJ
CSAgICAgc3RydWN0IGRtYV9idWYgKmRtYV9idWYpCi17Ci0Jc3RydWN0IGRtYV9idWZfYXR0YWNo
bWVudCAqYXR0YWNoOwotCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmo7Ci0JaW50IHJl
dDsKLQotCS8qIGlzIHRoaXMgb25lIG9mIG93biBvYmplY3RzPyAqLwotCWlmIChkbWFfYnVmLT5v
cHMgPT0gJmk5MTVfZG1hYnVmX29wcykgewotCQlvYmogPSBkbWFfYnVmX3RvX29iaihkbWFfYnVm
KTsKLQkJLyogaXMgaXQgZnJvbSBvdXIgZGV2aWNlPyAqLwotCQlpZiAob2JqLT5iYXNlLmRldiA9
PSBkZXYpIHsKLQkJCS8qCi0JCQkgKiBJbXBvcnRpbmcgZG1hYnVmIGV4cG9ydGVkIGZyb20gb3V0
IG93biBnZW0gaW5jcmVhc2VzCi0JCQkgKiByZWZjb3VudCBvbiBnZW0gaXRzZWxmIGluc3RlYWQg
b2YgZl9jb3VudCBvZiBkbWFidWYuCi0JCQkgKi8KLQkJCXJldHVybiAmaTkxNV9nZW1fb2JqZWN0
X2dldChvYmopLT5iYXNlOwotCQl9Ci0JfQotCi0JLyogbmVlZCB0byBhdHRhY2ggKi8KLQlhdHRh
Y2ggPSBkbWFfYnVmX2F0dGFjaChkbWFfYnVmLCBkZXYtPmRldik7Ci0JaWYgKElTX0VSUihhdHRh
Y2gpKQotCQlyZXR1cm4gRVJSX0NBU1QoYXR0YWNoKTsKLQotCWdldF9kbWFfYnVmKGRtYV9idWYp
OwotCi0Jb2JqID0gaTkxNV9nZW1fb2JqZWN0X2FsbG9jKCk7Ci0JaWYgKG9iaiA9PSBOVUxMKSB7
Ci0JCXJldCA9IC1FTk9NRU07Ci0JCWdvdG8gZmFpbF9kZXRhY2g7Ci0JfQotCi0JZHJtX2dlbV9w
cml2YXRlX29iamVjdF9pbml0KGRldiwgJm9iai0+YmFzZSwgZG1hX2J1Zi0+c2l6ZSk7Ci0JaTkx
NV9nZW1fb2JqZWN0X2luaXQob2JqLCAmaTkxNV9nZW1fb2JqZWN0X2RtYWJ1Zl9vcHMpOwotCW9i
ai0+YmFzZS5pbXBvcnRfYXR0YWNoID0gYXR0YWNoOwotCW9iai0+cmVzdiA9IGRtYV9idWYtPnJl
c3Y7Ci0KLQkvKiBXZSB1c2UgR1RUIGFzIHNob3J0aGFuZCBmb3IgYSBjb2hlcmVudCBkb21haW4s
IG9uZSB0aGF0IGlzCi0JICogbmVpdGhlciBpbiB0aGUgR1BVIGNhY2hlIG5vciBpbiB0aGUgQ1BV
IGNhY2hlLCB3aGVyZSBhbGwKLQkgKiB3cml0ZXMgYXJlIGltbWVkaWF0ZWx5IHZpc2libGUgaW4g
bWVtb3J5LiAoVGhhdCdzIG5vdCBzdHJpY3RseQotCSAqIHRydWUsIGJ1dCBpdCdzIGNsb3NlISBU
aGVyZSBhcmUgaW50ZXJuYWwgYnVmZmVycyBzdWNoIGFzIHRoZQotCSAqIHdyaXRlLWNvbWJpbmVk
IGJ1ZmZlciBvciBhIGRlbGF5IHRocm91Z2ggdGhlIGNoaXBzZXQgZm9yIEdUVAotCSAqIHdyaXRl
cyB0aGF0IGRvIHJlcXVpcmUgdXMgdG8gdHJlYXQgR1RUIGFzIGEgc2VwYXJhdGUgY2FjaGUgZG9t
YWluLikKLQkgKi8KLQlvYmotPnJlYWRfZG9tYWlucyA9IEk5MTVfR0VNX0RPTUFJTl9HVFQ7Ci0J
b2JqLT53cml0ZV9kb21haW4gPSAwOwotCi0JcmV0dXJuICZvYmotPmJhc2U7Ci0KLWZhaWxfZGV0
YWNoOgotCWRtYV9idWZfZGV0YWNoKGRtYV9idWYsIGF0dGFjaCk7Ci0JZG1hX2J1Zl9wdXQoZG1h
X2J1Zik7Ci0KLQlyZXR1cm4gRVJSX1BUUihyZXQpOwotfQotCi0jaWYgSVNfRU5BQkxFRChDT05G
SUdfRFJNX0k5MTVfU0VMRlRFU1QpCi0jaW5jbHVkZSAic2VsZnRlc3RzL21vY2tfZG1hYnVmLmMi
Ci0jaW5jbHVkZSAic2VsZnRlc3RzL2k5MTVfZ2VtX2RtYWJ1Zi5jIgotI2VuZGlmCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMKZGVsZXRlZCBm
aWxlIG1vZGUgMTAwNjQ0CmluZGV4IDg0ZWI5NzhmZTM5Zi4uMDAwMDAwMDAwMDAwCi0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9pOTE1X2dlbV9kbWFidWYuYworKysgL2Rldi9u
dWxsCkBAIC0xLDQwNCArMCwwIEBACi0vKgotICogQ29weXJpZ2h0IMKpIDIwMTYgSW50ZWwgQ29y
cG9yYXRpb24KLSAqCi0gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNo
YXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQotICogY29weSBvZiB0aGlzIHNvZnR3YXJl
IGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwKLSAq
IHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3
aXRob3V0IGxpbWl0YXRpb24KLSAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1l
cmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAotICogYW5kL29yIHNlbGwgY29w
aWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlCi0g
KiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2lu
ZyBjb25kaXRpb25zOgotICoKLSAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlz
IHBlcm1pc3Npb24gbm90aWNlIChpbmNsdWRpbmcgdGhlIG5leHQKLSAqIHBhcmFncmFwaCkgc2hh
bGwgYmUgaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0
aGUKLSAqIFNvZnR3YXJlLgotICoKLSAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMi
LCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCi0gKiBJTVBMSUVELCBJ
TkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJ
TElUWSwKLSAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5H
RU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTAotICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhP
TERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKLSAqIExJQUJJ
TElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNF
LCBBUklTSU5HCi0gKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZU
V0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTCi0gKiBJTiBUSEUgU09GVFdBUkUuCi0g
KgotICovCi0KLSNpbmNsdWRlICIuLi9pOTE1X3NlbGZ0ZXN0LmgiCi0KLSNpbmNsdWRlICJtb2Nr
X2dlbV9kZXZpY2UuaCIKLSNpbmNsdWRlICJtb2NrX2RtYWJ1Zi5oIgotCi1zdGF0aWMgaW50IGln
dF9kbWFidWZfZXhwb3J0KHZvaWQgKmFyZykKLXsKLQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
aTkxNSA9IGFyZzsKLQlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwotCXN0cnVjdCBk
bWFfYnVmICpkbWFidWY7Ci0KLQlvYmogPSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlKGk5MTUsIFBB
R0VfU0laRSk7Ci0JaWYgKElTX0VSUihvYmopKQotCQlyZXR1cm4gUFRSX0VSUihvYmopOwotCi0J
ZG1hYnVmID0gaTkxNV9nZW1fcHJpbWVfZXhwb3J0KCZvYmotPmJhc2UsIDApOwotCWk5MTVfZ2Vt
X29iamVjdF9wdXQob2JqKTsKLQlpZiAoSVNfRVJSKGRtYWJ1ZikpIHsKLQkJcHJfZXJyKCJpOTE1
X2dlbV9wcmltZV9leHBvcnQgZmFpbGVkIHdpdGggZXJyPSVkXG4iLAotCQkgICAgICAgKGludClQ
VFJfRVJSKGRtYWJ1ZikpOwotCQlyZXR1cm4gUFRSX0VSUihkbWFidWYpOwotCX0KLQotCWRtYV9i
dWZfcHV0KGRtYWJ1Zik7Ci0JcmV0dXJuIDA7Ci19Ci0KLXN0YXRpYyBpbnQgaWd0X2RtYWJ1Zl9p
bXBvcnRfc2VsZih2b2lkICphcmcpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUg
PSBhcmc7Ci0Jc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iajsKLQlzdHJ1Y3QgZHJtX2dl
bV9vYmplY3QgKmltcG9ydDsKLQlzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmOwotCWludCBlcnI7Ci0K
LQlvYmogPSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlKGk5MTUsIFBBR0VfU0laRSk7Ci0JaWYgKElT
X0VSUihvYmopKQotCQlyZXR1cm4gUFRSX0VSUihvYmopOwotCi0JZG1hYnVmID0gaTkxNV9nZW1f
cHJpbWVfZXhwb3J0KCZvYmotPmJhc2UsIDApOwotCWlmIChJU19FUlIoZG1hYnVmKSkgewotCQlw
cl9lcnIoImk5MTVfZ2VtX3ByaW1lX2V4cG9ydCBmYWlsZWQgd2l0aCBlcnI9JWRcbiIsCi0JCSAg
ICAgICAoaW50KVBUUl9FUlIoZG1hYnVmKSk7Ci0JCWVyciA9IFBUUl9FUlIoZG1hYnVmKTsKLQkJ
Z290byBvdXQ7Ci0JfQotCi0JaW1wb3J0ID0gaTkxNV9nZW1fcHJpbWVfaW1wb3J0KCZpOTE1LT5k
cm0sIGRtYWJ1Zik7Ci0JaWYgKElTX0VSUihpbXBvcnQpKSB7Ci0JCXByX2VycigiaTkxNV9nZW1f
cHJpbWVfaW1wb3J0IGZhaWxlZCB3aXRoIGVycj0lZFxuIiwKLQkJICAgICAgIChpbnQpUFRSX0VS
UihpbXBvcnQpKTsKLQkJZXJyID0gUFRSX0VSUihpbXBvcnQpOwotCQlnb3RvIG91dF9kbWFidWY7
Ci0JfQotCi0JaWYgKGltcG9ydCAhPSAmb2JqLT5iYXNlKSB7Ci0JCXByX2VycigiaTkxNV9nZW1f
cHJpbWVfaW1wb3J0IGNyZWF0ZWQgYSBuZXcgb2JqZWN0IVxuIik7Ci0JCWVyciA9IC1FSU5WQUw7
Ci0JCWdvdG8gb3V0X2ltcG9ydDsKLQl9Ci0KLQllcnIgPSAwOwotb3V0X2ltcG9ydDoKLQlpOTE1
X2dlbV9vYmplY3RfcHV0KHRvX2ludGVsX2JvKGltcG9ydCkpOwotb3V0X2RtYWJ1ZjoKLQlkbWFf
YnVmX3B1dChkbWFidWYpOwotb3V0OgotCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKLQlyZXR1
cm4gZXJyOwotfQotCi1zdGF0aWMgaW50IGlndF9kbWFidWZfaW1wb3J0KHZvaWQgKmFyZykKLXsK
LQlzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGFyZzsKLQlzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX29iamVjdCAqb2JqOwotCXN0cnVjdCBkbWFfYnVmICpkbWFidWY7Ci0Jdm9pZCAqb2JqX21h
cCwgKmRtYV9tYXA7Ci0JdTMyIHBhdHRlcm5bXSA9IHsgMCwgMHhhYSwgMHhjYywgMHg1NSwgMHhm
ZiB9OwotCWludCBlcnIsIGk7Ci0KLQlkbWFidWYgPSBtb2NrX2RtYWJ1ZigxKTsKLQlpZiAoSVNf
RVJSKGRtYWJ1ZikpCi0JCXJldHVybiBQVFJfRVJSKGRtYWJ1Zik7Ci0KLQlvYmogPSB0b19pbnRl
bF9ibyhpOTE1X2dlbV9wcmltZV9pbXBvcnQoJmk5MTUtPmRybSwgZG1hYnVmKSk7Ci0JaWYgKElT
X0VSUihvYmopKSB7Ci0JCXByX2VycigiaTkxNV9nZW1fcHJpbWVfaW1wb3J0IGZhaWxlZCB3aXRo
IGVycj0lZFxuIiwKLQkJICAgICAgIChpbnQpUFRSX0VSUihvYmopKTsKLQkJZXJyID0gUFRSX0VS
UihvYmopOwotCQlnb3RvIG91dF9kbWFidWY7Ci0JfQotCi0JaWYgKG9iai0+YmFzZS5kZXYgIT0g
Jmk5MTUtPmRybSkgewotCQlwcl9lcnIoImk5MTVfZ2VtX3ByaW1lX2ltcG9ydCBjcmVhdGVkIGEg
bm9uLWk5MTUgb2JqZWN0IVxuIik7Ci0JCWVyciA9IC1FSU5WQUw7Ci0JCWdvdG8gb3V0X29iajsK
LQl9Ci0KLQlpZiAob2JqLT5iYXNlLnNpemUgIT0gUEFHRV9TSVpFKSB7Ci0JCXByX2VycigiaTkx
NV9nZW1fcHJpbWVfaW1wb3J0IGlzIHdyb25nIHNpemUgZm91bmQgJWxsZCwgZXhwZWN0ZWQgJWxk
XG4iLAotCQkgICAgICAgKGxvbmcgbG9uZylvYmotPmJhc2Uuc2l6ZSwgUEFHRV9TSVpFKTsKLQkJ
ZXJyID0gLUVJTlZBTDsKLQkJZ290byBvdXRfb2JqOwotCX0KLQotCWRtYV9tYXAgPSBkbWFfYnVm
X3ZtYXAoZG1hYnVmKTsKLQlpZiAoIWRtYV9tYXApIHsKLQkJcHJfZXJyKCJkbWFfYnVmX3ZtYXAg
ZmFpbGVkXG4iKTsKLQkJZXJyID0gLUVOT01FTTsKLQkJZ290byBvdXRfb2JqOwotCX0KLQotCWlm
ICgwKSB7IC8qIENhbiBub3QgeWV0IG1hcCBkbWFidWYgKi8KLQkJb2JqX21hcCA9IGk5MTVfZ2Vt
X29iamVjdF9waW5fbWFwKG9iaiwgSTkxNV9NQVBfV0IpOwotCQlpZiAoSVNfRVJSKG9ial9tYXAp
KSB7Ci0JCQllcnIgPSBQVFJfRVJSKG9ial9tYXApOwotCQkJcHJfZXJyKCJpOTE1X2dlbV9vYmpl
Y3RfcGluX21hcCBmYWlsZWQgd2l0aCBlcnI9JWRcbiIsIGVycik7Ci0JCQlnb3RvIG91dF9kbWFf
bWFwOwotCQl9Ci0KLQkJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUocGF0dGVybik7IGkrKykg
ewotCQkJbWVtc2V0KGRtYV9tYXAsIHBhdHRlcm5baV0sIFBBR0VfU0laRSk7Ci0JCQlpZiAobWVt
Y2hyX2ludihvYmpfbWFwLCBwYXR0ZXJuW2ldLCBQQUdFX1NJWkUpKSB7Ci0JCQkJZXJyID0gLUVJ
TlZBTDsKLQkJCQlwcl9lcnIoImltcG9ydGVkIHZtYXAgbm90IGFsbCBzZXQgdG8gJXghXG4iLCBw
YXR0ZXJuW2ldKTsKLQkJCQlpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKG9iaik7Ci0JCQkJZ290
byBvdXRfZG1hX21hcDsKLQkJCX0KLQkJfQotCi0JCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpF
KHBhdHRlcm4pOyBpKyspIHsKLQkJCW1lbXNldChvYmpfbWFwLCBwYXR0ZXJuW2ldLCBQQUdFX1NJ
WkUpOwotCQkJaWYgKG1lbWNocl9pbnYoZG1hX21hcCwgcGF0dGVybltpXSwgUEFHRV9TSVpFKSkg
ewotCQkJCWVyciA9IC1FSU5WQUw7Ci0JCQkJcHJfZXJyKCJleHBvcnRlZCB2bWFwIG5vdCBhbGwg
c2V0IHRvICV4IVxuIiwgcGF0dGVybltpXSk7Ci0JCQkJaTkxNV9nZW1fb2JqZWN0X3VucGluX21h
cChvYmopOwotCQkJCWdvdG8gb3V0X2RtYV9tYXA7Ci0JCQl9Ci0JCX0KLQotCQlpOTE1X2dlbV9v
YmplY3RfdW5waW5fbWFwKG9iaik7Ci0JfQotCi0JZXJyID0gMDsKLW91dF9kbWFfbWFwOgotCWRt
YV9idWZfdnVubWFwKGRtYWJ1ZiwgZG1hX21hcCk7Ci1vdXRfb2JqOgotCWk5MTVfZ2VtX29iamVj
dF9wdXQob2JqKTsKLW91dF9kbWFidWY6Ci0JZG1hX2J1Zl9wdXQoZG1hYnVmKTsKLQlyZXR1cm4g
ZXJyOwotfQotCi1zdGF0aWMgaW50IGlndF9kbWFidWZfaW1wb3J0X293bmVyc2hpcCh2b2lkICph
cmcpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBhcmc7Ci0Jc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iajsKLQlzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmOwotCXZvaWQg
KnB0cjsKLQlpbnQgZXJyOwotCi0JZG1hYnVmID0gbW9ja19kbWFidWYoMSk7Ci0JaWYgKElTX0VS
UihkbWFidWYpKQotCQlyZXR1cm4gUFRSX0VSUihkbWFidWYpOwotCi0JcHRyID0gZG1hX2J1Zl92
bWFwKGRtYWJ1Zik7Ci0JaWYgKCFwdHIpIHsKLQkJcHJfZXJyKCJkbWFfYnVmX3ZtYXAgZmFpbGVk
XG4iKTsKLQkJZXJyID0gLUVOT01FTTsKLQkJZ290byBlcnJfZG1hYnVmOwotCX0KLQotCW1lbXNl
dChwdHIsIDB4YzUsIFBBR0VfU0laRSk7Ci0JZG1hX2J1Zl92dW5tYXAoZG1hYnVmLCBwdHIpOwot
Ci0Jb2JqID0gdG9faW50ZWxfYm8oaTkxNV9nZW1fcHJpbWVfaW1wb3J0KCZpOTE1LT5kcm0sIGRt
YWJ1ZikpOwotCWlmIChJU19FUlIob2JqKSkgewotCQlwcl9lcnIoImk5MTVfZ2VtX3ByaW1lX2lt
cG9ydCBmYWlsZWQgd2l0aCBlcnI9JWRcbiIsCi0JCSAgICAgICAoaW50KVBUUl9FUlIob2JqKSk7
Ci0JCWVyciA9IFBUUl9FUlIob2JqKTsKLQkJZ290byBlcnJfZG1hYnVmOwotCX0KLQotCWRtYV9i
dWZfcHV0KGRtYWJ1Zik7Ci0KLQllcnIgPSBpOTE1X2dlbV9vYmplY3RfcGluX3BhZ2VzKG9iaik7
Ci0JaWYgKGVycikgewotCQlwcl9lcnIoImk5MTVfZ2VtX29iamVjdF9waW5fcGFnZXMgZmFpbGVk
IHdpdGggZXJyPSVkXG4iLCBlcnIpOwotCQlnb3RvIG91dF9vYmo7Ci0JfQotCi0JZXJyID0gMDsK
LQlpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMob2JqKTsKLW91dF9vYmo6Ci0JaTkxNV9nZW1f
b2JqZWN0X3B1dChvYmopOwotCXJldHVybiBlcnI7Ci0KLWVycl9kbWFidWY6Ci0JZG1hX2J1Zl9w
dXQoZG1hYnVmKTsKLQlyZXR1cm4gZXJyOwotfQotCi1zdGF0aWMgaW50IGlndF9kbWFidWZfZXhw
b3J0X3ZtYXAodm9pZCAqYXJnKQotewotCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0g
YXJnOwotCXN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmo7Ci0Jc3RydWN0IGRtYV9idWYg
KmRtYWJ1ZjsKLQl2b2lkICpwdHI7Ci0JaW50IGVycjsKLQotCW9iaiA9IGk5MTVfZ2VtX29iamVj
dF9jcmVhdGUoaTkxNSwgUEFHRV9TSVpFKTsKLQlpZiAoSVNfRVJSKG9iaikpCi0JCXJldHVybiBQ
VFJfRVJSKG9iaik7Ci0KLQlkbWFidWYgPSBpOTE1X2dlbV9wcmltZV9leHBvcnQoJm9iai0+YmFz
ZSwgMCk7Ci0JaWYgKElTX0VSUihkbWFidWYpKSB7Ci0JCXByX2VycigiaTkxNV9nZW1fcHJpbWVf
ZXhwb3J0IGZhaWxlZCB3aXRoIGVycj0lZFxuIiwKLQkJICAgICAgIChpbnQpUFRSX0VSUihkbWFi
dWYpKTsKLQkJZXJyID0gUFRSX0VSUihkbWFidWYpOwotCQlnb3RvIGVycl9vYmo7Ci0JfQotCWk5
MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKLQotCXB0ciA9IGRtYV9idWZfdm1hcChkbWFidWYpOwot
CWlmICghcHRyKSB7Ci0JCXByX2VycigiZG1hX2J1Zl92bWFwIGZhaWxlZFxuIik7Ci0JCWVyciA9
IC1FTk9NRU07Ci0JCWdvdG8gb3V0OwotCX0KLQotCWlmIChtZW1jaHJfaW52KHB0ciwgMCwgZG1h
YnVmLT5zaXplKSkgewotCQlwcl9lcnIoIkV4cG9ydGVkIG9iamVjdCBub3QgaW5pdGlhbGlhc2Vk
IHRvIHplcm8hXG4iKTsKLQkJZXJyID0gLUVJTlZBTDsKLQkJZ290byBvdXQ7Ci0JfQotCi0JbWVt
c2V0KHB0ciwgMHhjNSwgZG1hYnVmLT5zaXplKTsKLQotCWVyciA9IDA7Ci0JZG1hX2J1Zl92dW5t
YXAoZG1hYnVmLCBwdHIpOwotb3V0OgotCWRtYV9idWZfcHV0KGRtYWJ1Zik7Ci0JcmV0dXJuIGVy
cjsKLQotZXJyX29iajoKLQlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7Ci0JcmV0dXJuIGVycjsK
LX0KLQotc3RhdGljIGludCBpZ3RfZG1hYnVmX2V4cG9ydF9rbWFwKHZvaWQgKmFyZykKLXsKLQlz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSA9IGFyZzsKLQlzdHJ1Y3QgZHJtX2k5MTVfZ2Vt
X29iamVjdCAqb2JqOwotCXN0cnVjdCBkbWFfYnVmICpkbWFidWY7Ci0Jdm9pZCAqcHRyOwotCWlu
dCBlcnI7Ci0KLQlvYmogPSBpOTE1X2dlbV9vYmplY3RfY3JlYXRlKGk5MTUsIDIqUEFHRV9TSVpF
KTsKLQlpZiAoSVNfRVJSKG9iaikpCi0JCXJldHVybiBQVFJfRVJSKG9iaik7Ci0KLQlkbWFidWYg
PSBpOTE1X2dlbV9wcmltZV9leHBvcnQoJm9iai0+YmFzZSwgMCk7Ci0JaTkxNV9nZW1fb2JqZWN0
X3B1dChvYmopOwotCWlmIChJU19FUlIoZG1hYnVmKSkgewotCQllcnIgPSBQVFJfRVJSKGRtYWJ1
Zik7Ci0JCXByX2VycigiaTkxNV9nZW1fcHJpbWVfZXhwb3J0IGZhaWxlZCB3aXRoIGVycj0lZFxu
IiwgZXJyKTsKLQkJcmV0dXJuIGVycjsKLQl9Ci0KLQlwdHIgPSBkbWFfYnVmX2ttYXAoZG1hYnVm
LCAwKTsKLQlpZiAoIXB0cikgewotCQlwcl9lcnIoImRtYV9idWZfa21hcCBmYWlsZWRcbiIpOwot
CQllcnIgPSAtRU5PTUVNOwotCQlnb3RvIGVycjsKLQl9Ci0KLQlpZiAobWVtY2hyX2ludihwdHIs
IDAsIFBBR0VfU0laRSkpIHsKLQkJZG1hX2J1Zl9rdW5tYXAoZG1hYnVmLCAwLCBwdHIpOwotCQlw
cl9lcnIoIkV4cG9ydGVkIHBhZ2VbMF0gbm90IGluaXRpYWxpYXNlZCB0byB6ZXJvIVxuIik7Ci0J
CWVyciA9IC1FSU5WQUw7Ci0JCWdvdG8gZXJyOwotCX0KLQotCW1lbXNldChwdHIsIDB4YzUsIFBB
R0VfU0laRSk7Ci0JZG1hX2J1Zl9rdW5tYXAoZG1hYnVmLCAwLCBwdHIpOwotCi0JcHRyID0gaTkx
NV9nZW1fb2JqZWN0X3Bpbl9tYXAob2JqLCBJOTE1X01BUF9XQik7Ci0JaWYgKElTX0VSUihwdHIp
KSB7Ci0JCWVyciA9IFBUUl9FUlIocHRyKTsKLQkJcHJfZXJyKCJpOTE1X2dlbV9vYmplY3RfcGlu
X21hcCBmYWlsZWQgd2l0aCBlcnI9JWRcbiIsIGVycik7Ci0JCWdvdG8gZXJyOwotCX0KLQltZW1z
ZXQocHRyICsgUEFHRV9TSVpFLCAweGFhLCBQQUdFX1NJWkUpOwotCWk5MTVfZ2VtX29iamVjdF9m
bHVzaF9tYXAob2JqKTsKLQlpOTE1X2dlbV9vYmplY3RfdW5waW5fbWFwKG9iaik7Ci0KLQlwdHIg
PSBkbWFfYnVmX2ttYXAoZG1hYnVmLCAxKTsKLQlpZiAoIXB0cikgewotCQlwcl9lcnIoImRtYV9i
dWZfa21hcCBmYWlsZWRcbiIpOwotCQllcnIgPSAtRU5PTUVNOwotCQlnb3RvIGVycjsKLQl9Ci0K
LQlpZiAobWVtY2hyX2ludihwdHIsIDB4YWEsIFBBR0VfU0laRSkpIHsKLQkJZG1hX2J1Zl9rdW5t
YXAoZG1hYnVmLCAxLCBwdHIpOwotCQlwcl9lcnIoIkV4cG9ydGVkIHBhZ2VbMV0gbm90IHNldCB0
byAweGFhIVxuIik7Ci0JCWVyciA9IC1FSU5WQUw7Ci0JCWdvdG8gZXJyOwotCX0KLQotCW1lbXNl
dChwdHIsIDB4YzUsIFBBR0VfU0laRSk7Ci0JZG1hX2J1Zl9rdW5tYXAoZG1hYnVmLCAxLCBwdHIp
OwotCi0JcHRyID0gZG1hX2J1Zl9rbWFwKGRtYWJ1ZiwgMCk7Ci0JaWYgKCFwdHIpIHsKLQkJcHJf
ZXJyKCJkbWFfYnVmX2ttYXAgZmFpbGVkXG4iKTsKLQkJZXJyID0gLUVOT01FTTsKLQkJZ290byBl
cnI7Ci0JfQotCWlmIChtZW1jaHJfaW52KHB0ciwgMHhjNSwgUEFHRV9TSVpFKSkgewotCQlkbWFf
YnVmX2t1bm1hcChkbWFidWYsIDAsIHB0cik7Ci0JCXByX2VycigiRXhwb3J0ZWQgcGFnZVswXSBk
aWQgbm90IHJldGFpbiAweGM1IVxuIik7Ci0JCWVyciA9IC1FSU5WQUw7Ci0JCWdvdG8gZXJyOwot
CX0KLQlkbWFfYnVmX2t1bm1hcChkbWFidWYsIDAsIHB0cik7Ci0KLQlwdHIgPSBkbWFfYnVmX2tt
YXAoZG1hYnVmLCAyKTsKLQlpZiAocHRyKSB7Ci0JCXByX2VycigiRXJyb25lb3VzbHkga21hcHBl
ZCBiZXlvbmQgdGhlIGVuZCBvZiB0aGUgb2JqZWN0IVxuIik7Ci0JCWRtYV9idWZfa3VubWFwKGRt
YWJ1ZiwgMiwgcHRyKTsKLQkJZXJyID0gLUVJTlZBTDsKLQkJZ290byBlcnI7Ci0JfQotCi0JcHRy
ID0gZG1hX2J1Zl9rbWFwKGRtYWJ1ZiwgLTEpOwotCWlmIChwdHIpIHsKLQkJcHJfZXJyKCJFcnJv
bmVvdXNseSBrbWFwcGVkIGJlZm9yZSB0aGUgc3RhcnQgb2YgdGhlIG9iamVjdCFcbiIpOwotCQlk
bWFfYnVmX2t1bm1hcChkbWFidWYsIC0xLCBwdHIpOwotCQllcnIgPSAtRUlOVkFMOwotCQlnb3Rv
IGVycjsKLQl9Ci0KLQllcnIgPSAwOwotZXJyOgotCWRtYV9idWZfcHV0KGRtYWJ1Zik7Ci0JcmV0
dXJuIGVycjsKLX0KLQotaW50IGk5MTVfZ2VtX2RtYWJ1Zl9tb2NrX3NlbGZ0ZXN0cyh2b2lkKQot
ewotCXN0YXRpYyBjb25zdCBzdHJ1Y3QgaTkxNV9zdWJ0ZXN0IHRlc3RzW10gPSB7Ci0JCVNVQlRF
U1QoaWd0X2RtYWJ1Zl9leHBvcnQpLAotCQlTVUJURVNUKGlndF9kbWFidWZfaW1wb3J0X3NlbGYp
LAotCQlTVUJURVNUKGlndF9kbWFidWZfaW1wb3J0KSwKLQkJU1VCVEVTVChpZ3RfZG1hYnVmX2lt
cG9ydF9vd25lcnNoaXApLAotCQlTVUJURVNUKGlndF9kbWFidWZfZXhwb3J0X3ZtYXApLAotCQlT
VUJURVNUKGlndF9kbWFidWZfZXhwb3J0X2ttYXApLAotCX07Ci0Jc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmk5MTU7Ci0JaW50IGVycjsKLQotCWk5MTUgPSBtb2NrX2dlbV9kZXZpY2UoKTsKLQlp
ZiAoIWk5MTUpCi0JCXJldHVybiAtRU5PTUVNOwotCi0JZXJyID0gaTkxNV9zdWJ0ZXN0cyh0ZXN0
cywgaTkxNSk7Ci0KLQlkcm1fZGV2X3B1dCgmaTkxNS0+ZHJtKTsKLQlyZXR1cm4gZXJyOwotfQot
Ci1pbnQgaTkxNV9nZW1fZG1hYnVmX2xpdmVfc2VsZnRlc3RzKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICppOTE1KQotewotCXN0YXRpYyBjb25zdCBzdHJ1Y3QgaTkxNV9zdWJ0ZXN0IHRlc3RzW10g
PSB7Ci0JCVNVQlRFU1QoaWd0X2RtYWJ1Zl9leHBvcnQpLAotCX07Ci0KLQlyZXR1cm4gaTkxNV9z
dWJ0ZXN0cyh0ZXN0cywgaTkxNSk7Ci19Ci0tIAoyLjIyLjAKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
