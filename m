Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1CCE543355
	for <lists+dri-devel@lfdr.de>; Thu, 13 Jun 2019 09:27:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 78E2C892B8;
	Thu, 13 Jun 2019 07:27:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x541.google.com (mail-pg1-x541.google.com
 [IPv6:2607:f8b0:4864:20::541])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B4B33892D8
 for <dri-devel@lists.freedesktop.org>; Wed, 12 Jun 2019 08:33:16 +0000 (UTC)
Received: by mail-pg1-x541.google.com with SMTP id 83so8524528pgg.8
 for <dri-devel@lists.freedesktop.org>; Wed, 12 Jun 2019 01:33:16 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=Ys5ot99QQmo5wes1He3CHIb6XYcn5zHRbOZecMkTIfw=;
 b=a8VIknX/v8JnB6jSC4D8HG7yrKnG0sI0u4OiakRSZy4ybArT3SXLfXBA2kC89q5lqL
 vzJNjos4p0mQo9zDUtkA916DRzuGyVKVLWMWM3145xFelARrakCddydhl/v361aHHVSk
 GEYVDQiXu4aiOhBx33h8DLQGnszjfZKDk6eoayrvHLC3tR+1h8jmgAO9FrfLcFwU1p6Z
 zySkjRiIGY1A8NT5bemue4vYIbS902XA89x7i758yR2sAfpCaEBB5mlUUcxwkM23W1QR
 +5J9b3PxVAO3/hIhanZQ3ut2zR9QqhbzQqiaggipaverY8OlnlFyor8ya971NRL3GENe
 0RXQ==
X-Gm-Message-State: APjAAAXW0DA5jX4y4WFC3Rf/xUrEYZimAgUThnycTB1FPGKD4DFGb56c
 weuW6VzffSBlTdPb9oWDj8alh64rP24=
X-Google-Smtp-Source: APXvYqyO+VvAumRpJK7LxG/uIT/wghlJGiBJ1ODRfwDdmeYbKxoym+jXHryyyn8pKhZVCn3XMQ8Frg==
X-Received: by 2002:a63:1a5e:: with SMTP id a30mr23541763pgm.433.1560328395862; 
 Wed, 12 Jun 2019 01:33:15 -0700 (PDT)
Received: from localhost.lan (c-24-22-235-96.hsd1.wa.comcast.net.
 [24.22.235.96])
 by smtp.gmail.com with ESMTPSA id d21sm18845991pfr.162.2019.06.12.01.33.14
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 12 Jun 2019 01:33:15 -0700 (PDT)
From: Andrey Smirnov <andrew.smirnov@gmail.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v5 07/15] drm/bridge: tc358767: Simplify AUX data write
Date: Wed, 12 Jun 2019 01:32:44 -0700
Message-Id: <20190612083252.15321-8-andrew.smirnov@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190612083252.15321-1-andrew.smirnov@gmail.com>
References: <20190612083252.15321-1-andrew.smirnov@gmail.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Thu, 13 Jun 2019 07:27:23 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=Ys5ot99QQmo5wes1He3CHIb6XYcn5zHRbOZecMkTIfw=;
 b=OhMh7/ZFCz6ieIk3FzR15PjAHfvEDfddbqX+tiJrBrUiJupwU/CbnA80l9TqMXR9EB
 +fLKBKDT4oGTvu6lzl5h8McRHxY964mrksc+B/VfVNWtJTBhOmT9Cl1YIRBJz/lVss6v
 dpPHDBPqbWaK/jHZczCDqV2TmV77Xkt1e3s7QtZDnc79LE0Z00ysMXtEzv+S8QFgEmeD
 oposAjbVCo9CZ8yBbxUboFeU0VMwNZk61R+bzVAAqm3riKtvGcLDCE85W8+QJPcYLtEj
 x90XblVA7IKIGt98HOwIJXUEPDvba7DS02FujTj1CQMSr0wTfRhJIWC6amXPExYJyulK
 OTYw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Cory Tusar <cory.tusar@zii.aero>, Andrey Smirnov <andrew.smirnov@gmail.com>,
 Andrey Gusakov <andrey.gusakov@cogentembedded.com>,
 linux-kernel@vger.kernel.org, Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Chris Healy <cphealy@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U2ltcGxpZnkgQVVYIGRhdGEgd3JpdGUgYnkgZHJvcHBpbmcgaW5kZXggYXJpdGhtZXRpYyBhbmQg
c2hpZnRpbmcgYW5kCnJlcGxhY2luZyBpdCB3aXRoIGEgY2FsbCB0byBhIGhlbHBlciBmdW5jdGlv
biB0aGF0IGRvZXMgdHdvIHRoaW5nczoKCiAgICAxLiBDb3BpZXMgdXNlci1wcm92aWRlZCBkYXRh
IGludG8gYSB3cml0ZSBidWZmZXIKICAgIDIuIFRyYW5zZmVycyBjb250ZW50cyBvZiB0aGUgd3Jp
dGUgYnVmZmVyIHRvIHVwIHRvIDQgMzItYml0CiAgICAgICByZWdpc3RlcnMgb24gdGhlIGNoaXAK
Ck5vdGUgdGhhdCBzZXBhcmF0ZSBkYXRhIGVuZGlhbm5lc3MgZml4OgoKICAgIHRtcCA9ICh0bXAg
PDwgOCkgfCBidWZbaV07Cgp0aGF0IHdhcyByZXNlcnZlZCBmb3IgRFBfQVVYX0kyQ19XUklURSBs
b29rcyByZWFsbHkgc3RyYW5nZSwgc2luY2UgaXQKd2lsbCBwbGFjZSBkYXRhIGRpZmZlcmVudGx5
IGRlcGVuZGluZyBvbiB0aGUgcGFzc2VkIHVzZXItZGF0YQpzaXplLiBFLmcuIGZvciBhIHdyaXRl
IG9mIDEgYnl0ZSwgZGF0YSB0cmFuc2ZlcnJlZCB0byB0aGUgY2hpcCB3b3VsZApsb29rIGxpa2U6
CgpbYnl0ZTBdIFtkdW1teTFdIFtkdW1teTJdIFtkdW1teTNdCgp3aGVyZWFzIGZvciBhIHdyaXRl
IG9mIDQgYnl0ZXMgd2UnZCBnZXQ6CgpbYnl0ZTNdIFtieXRlMl0gW2J5dGUxXSBbYnl0ZTBdCgpT
aW5jZSB0aGVyZSdzIG5vIGluZGljYXRpb24gaW4gdGhlIGRhdGFzaGVldCB0aGF0IEkyQyB3cml0
ZSBidWZmZXIKc2hvdWxkIGJlIHRyZWF0ZWQgZGlmZmVyZW50bHkgdGhhbiBBVVggd3JpdGUgYnVm
ZmVyIGFuZCBubyBjb21tZW50IGluCnRoZSBvcmlnaW5hbCBjb2RlIGV4cGxhaW5pbmcgd2h5IGl0
IHdhcyBkb25lIHRoaXMgd2F5LCB0aGF0IHNwZWNpYWwKSTJDIHdyaXRlIGJ1ZmZlciB0cmFuc2Zv
cm1hdGlvbiB3YXMgZHJvcHBlZCBpbiB0aGlzIHBhdGNoLgoKU2lnbmVkLW9mZi1ieTogQW5kcmV5
IFNtaXJub3YgPGFuZHJldy5zbWlybm92QGdtYWlsLmNvbT4KUmV2aWV3ZWQtYnk6IEFuZHJ6ZWog
SGFqZGEgPGEuaGFqZGFAc2Ftc3VuZy5jb20+CkNjOiBBbmRyemVqIEhhamRhIDxhLmhhamRhQHNh
bXN1bmcuY29tPgpDYzogTGF1cmVudCBQaW5jaGFydCA8TGF1cmVudC5waW5jaGFydEBpZGVhc29u
Ym9hcmQuY29tPgpDYzogVG9taSBWYWxrZWluZW4gPHRvbWkudmFsa2VpbmVuQHRpLmNvbT4KQ2M6
IEFuZHJleSBHdXNha292IDxhbmRyZXkuZ3VzYWtvdkBjb2dlbnRlbWJlZGRlZC5jb20+CkNjOiBQ
aGlsaXBwIFphYmVsIDxwLnphYmVsQHBlbmd1dHJvbml4LmRlPgpDYzogQ29yeSBUdXNhciA8Y29y
eS50dXNhckB6aWkuYWVybz4KQ2M6IENocmlzIEhlYWx5IDxjcGhlYWx5QGdtYWlsLmNvbT4KQ2M6
IEx1Y2FzIFN0YWNoIDxsLnN0YWNoQHBlbmd1dHJvbml4LmRlPgpDYzogZHJpLWRldmVsQGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpDYzogbGludXgta2VybmVsQHZnZXIua2VybmVsLm9yZwotLS0KIGRy
aXZlcnMvZ3B1L2RybS9icmlkZ2UvdGMzNTg3NjcuYyB8IDQ4ICsrKysrKysrKysrKysrKysrLS0t
LS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAyNiBpbnNlcnRpb25zKCspLCAyMiBkZWxldGlv
bnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY3LmMgYi9k
cml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY3LmMKaW5kZXggNzE1MmI0NGRiOGEzLi5lNjA2
OTJiOGNkNjkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGMzNTg3NjcuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY3LmMKQEAgLTMyMSw2ICszMjEsMjEg
QEAgc3RhdGljIGludCB0Y19hdXhfZ2V0X3N0YXR1cyhzdHJ1Y3QgdGNfZGF0YSAqdGMsIHU4ICpy
ZXBseSkKIAlyZXR1cm4gMDsKIH0KIAorc3RhdGljIGludCB0Y19hdXhfd3JpdGVfZGF0YShzdHJ1
Y3QgdGNfZGF0YSAqdGMsIGNvbnN0IHZvaWQgKmRhdGEsCisJCQkgICAgIHNpemVfdCBzaXplKQor
eworCXUzMiBhdXh3ZGF0YVtEUF9BVVhfTUFYX1BBWUxPQURfQllURVMgLyBzaXplb2YodTMyKV0g
PSB7IDAgfTsKKwlpbnQgcmV0LCBjb3VudCA9IEFMSUdOKHNpemUsIHNpemVvZih1MzIpKTsKKwor
CW1lbWNweShhdXh3ZGF0YSwgZGF0YSwgc2l6ZSk7CisKKwlyZXQgPSByZWdtYXBfcmF3X3dyaXRl
KHRjLT5yZWdtYXAsIERQMF9BVVhXREFUQSgwKSwgYXV4d2RhdGEsIGNvdW50KTsKKwlpZiAocmV0
KQorCQlyZXR1cm4gcmV0OworCisJcmV0dXJuIHNpemU7Cit9CisKIHN0YXRpYyBpbnQgdGNfYXV4
X3JlYWRfZGF0YShzdHJ1Y3QgdGNfZGF0YSAqdGMsIHZvaWQgKmRhdGEsIHNpemVfdCBzaXplKQog
ewogCXUzMiBhdXhyZGF0YVtEUF9BVVhfTUFYX1BBWUxPQURfQllURVMgLyBzaXplb2YodTMyKV07
CkBAIC0zNDEsOSArMzU2LDYgQEAgc3RhdGljIHNzaXplX3QgdGNfYXV4X3RyYW5zZmVyKHN0cnVj
dCBkcm1fZHBfYXV4ICphdXgsCiAJc3RydWN0IHRjX2RhdGEgKnRjID0gYXV4X3RvX3RjKGF1eCk7
CiAJc2l6ZV90IHNpemUgPSBtaW5fdChzaXplX3QsIDgsIG1zZy0+c2l6ZSk7CiAJdTggcmVxdWVz
dCA9IG1zZy0+cmVxdWVzdCAmIH5EUF9BVVhfSTJDX01PVDsKLQl1OCAqYnVmID0gbXNnLT5idWZm
ZXI7Ci0JdTMyIHRtcCA9IDA7Ci0JaW50IGkgPSAwOwogCWludCByZXQ7CiAKIAlpZiAoc2l6ZSA9
PSAwKQpAQCAtMzUzLDI1ICszNjUsMTcgQEAgc3RhdGljIHNzaXplX3QgdGNfYXV4X3RyYW5zZmVy
KHN0cnVjdCBkcm1fZHBfYXV4ICphdXgsCiAJaWYgKHJldCkKIAkJcmV0dXJuIHJldDsKIAotCWlm
IChyZXF1ZXN0ID09IERQX0FVWF9JMkNfV1JJVEUgfHwgcmVxdWVzdCA9PSBEUF9BVVhfTkFUSVZF
X1dSSVRFKSB7Ci0JCS8qIFN0b3JlIGRhdGEgKi8KLQkJd2hpbGUgKGkgPCBzaXplKSB7Ci0JCQlp
ZiAocmVxdWVzdCA9PSBEUF9BVVhfTkFUSVZFX1dSSVRFKQotCQkJCXRtcCA9IHRtcCB8IChidWZb
aV0gPDwgKDggKiAoaSAmIDB4MykpKTsKLQkJCWVsc2UKLQkJCQl0bXAgPSAodG1wIDw8IDgpIHwg
YnVmW2ldOwotCQkJaSsrOwotCQkJaWYgKCgoaSAlIDQpID09IDApIHx8IChpID09IHNpemUpKSB7
Ci0JCQkJcmV0ID0gcmVnbWFwX3dyaXRlKHRjLT5yZWdtYXAsCi0JCQkJCQkgICBEUDBfQVVYV0RB
VEEoKGkgLSAxKSA+PiAyKSwKLQkJCQkJCSAgIHRtcCk7Ci0JCQkJaWYgKHJldCkKLQkJCQkJcmV0
dXJuIHJldDsKLQkJCQl0bXAgPSAwOwotCQkJfQotCQl9Ci0JfSBlbHNlIGlmIChyZXF1ZXN0ICE9
IERQX0FVWF9JMkNfUkVBRCAmJgotCQkgICByZXF1ZXN0ICE9IERQX0FVWF9OQVRJVkVfUkVBRCkg
eworCXN3aXRjaCAocmVxdWVzdCkgeworCWNhc2UgRFBfQVVYX05BVElWRV9SRUFEOgorCWNhc2Ug
RFBfQVVYX0kyQ19SRUFEOgorCQlicmVhazsKKwljYXNlIERQX0FVWF9OQVRJVkVfV1JJVEU6CisJ
Y2FzZSBEUF9BVVhfSTJDX1dSSVRFOgorCQlyZXQgPSB0Y19hdXhfd3JpdGVfZGF0YSh0YywgbXNn
LT5idWZmZXIsIHNpemUpOworCQlpZiAocmV0IDwgMCkKKwkJCXJldHVybiByZXQ7CisJCWJyZWFr
OworCWRlZmF1bHQ6CiAJCXJldHVybiAtRUlOVkFMOwogCX0KIAotLSAKMi4yMS4wCgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGlu
ZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
