Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8A1754979A
	for <lists+dri-devel@lfdr.de>; Tue, 18 Jun 2019 04:45:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1E9DD89C89;
	Tue, 18 Jun 2019 02:45:36 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qt1-x842.google.com (mail-qt1-x842.google.com
 [IPv6:2607:f8b0:4864:20::842])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BA55889C89
 for <dri-devel@lists.freedesktop.org>; Tue, 18 Jun 2019 02:45:34 +0000 (UTC)
Received: by mail-qt1-x842.google.com with SMTP id i34so8188885qta.6
 for <dri-devel@lists.freedesktop.org>; Mon, 17 Jun 2019 19:45:34 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=8KPbeBe1Izb/oXnubNpoebguldEg1IGhY2Zsm9jUIkc=;
 b=C9Y/13HGULrLhENcIUkgMZjKi+6BIEdcXDLhLDJwlmgXWVDjBQyHaImMnxhu3xJIAw
 EGhhy1ZHOIzesWKXrY1A+jghtfHgkABHDHaE/hkIhB5VbA+Mfdzk1Ovo6McMLGq5PGh/
 9CfSMR9CrkJ2GK3ko2b+Y18oEBsxExzlafUp/FqkJjE31Y+KVwvZxrMdqCDxyt8HZa+r
 TIJnbiWRjx7De5YgelrL8nZ4xXeukYvYnwaCxovMcOZQ00z6pFrYE+5lKYxBz6mMHnH7
 ndSy11p4CME3t6qIuTlJE+miwWyeXPJHHK5ORDV5Esx3mTspJTzwBqtwy4vbE41tJf8N
 hDRw==
X-Gm-Message-State: APjAAAUG5vvcvFlVjx9iLSs1kLG9Ei3PZxPnu/2/c8JVevQNYn9Il17b
 xgG7dnuqmHqCurw+0zoLz3U=
X-Google-Smtp-Source: APXvYqyjb9meqRuihmeZFMzBK6sW+mj5SPJgPZKeAR4jCHZ6vjWkicT6mbIE3vqb/ZHfyqiL5cb5Yw==
X-Received: by 2002:ac8:4442:: with SMTP id m2mr17809198qtn.107.1560825933887; 
 Mon, 17 Jun 2019 19:45:33 -0700 (PDT)
Received: from smtp.gmail.com ([187.121.151.146])
 by smtp.gmail.com with ESMTPSA id s64sm7140356qkb.56.2019.06.17.19.45.31
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 17 Jun 2019 19:45:33 -0700 (PDT)
Date: Mon, 17 Jun 2019 23:45:29 -0300
From: Rodrigo Siqueira <rodrigosiqueiramelo@gmail.com>
To: Brian Starkey <brian.starkey@arm.com>,
 Liviu Dudau <liviu.dudau@arm.com>, Daniel Vetter <daniel@ffwll.ch>,
 Haneen Mohammed <hamohammed.sa@gmail.com>, Simon Ser <contact@emersion.fr>
Subject: [PATCH V2 4/5] drm/vkms: Use index instead of 0 in possible crtc
Message-ID: <971da2ede86d11357e6822409bef23cb03869f83.1560820888.git.rodrigosiqueiramelo@gmail.com>
References: <cover.1560820888.git.rodrigosiqueiramelo@gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <cover.1560820888.git.rodrigosiqueiramelo@gmail.com>
User-Agent: NeoMutt/20180716
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=8KPbeBe1Izb/oXnubNpoebguldEg1IGhY2Zsm9jUIkc=;
 b=jIFUNwNOQDgYQ+LupPGr48TtotyUTjpb9+gsc7h4cEidc+lFsVhBVavMi2fttyL6WP
 DhlEaZjRsstTTIy5yBGjHeOCYwTJ00hChejyepsRC62T+97ppWDMd82ovALdPSWhspQZ
 dN5zOURRRWDX/bR2dJgk9XcQk/lmme5KMkfF+M6mNIqTcT2QGxOZWCNKyOVhl5vkjBk/
 VEtFeuF7NabIwp29c+dvSP+T3tCc8S3tt8l4WH8mOS7hkv5ccyXXTbT/5FD7H1NWSFS3
 19XD6SZyefb/WdclBRaO8rHi/pTalTXZBMJpqaieCp8iFjmTrn0oY/43ufre+HGdId0C
 XEWA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V2hlbiB2a21zIGNhbGxzIGRybV91bml2ZXJzYWxfcGxhbmVfaW5pdCgpLCBpdCBzZXRzIDAgZm9y
IHRoZQpwb3NzaWJsZV9jcnRjcyBwYXJhbWV0ZXIgd2hpY2ggd29ya3Mgd2VsbCBmb3IgYSBzaW5n
bGUgZW5jb2RlciBhbmQKY29ubmVjdG9yOyBob3dldmVyLCB0aGlzIGFwcHJvYWNoIGlzIG5vdCBm
bGV4aWJsZSBhbmQgZG9lcyBub3QgZml0IHdlbGwKZm9yIHZrbXMuIFRoaXMgY29tbWl0IGFkZHMg
YW4gaW5kZXggcGFyYW1ldGVyIGZvciB2a21zX3BsYW5lX2luaXQoKQp3aGljaCBtYWtlcyBjb2Rl
IGZsZXhpYmxlIGFuZCBlbmFibGVzIHZrbXMgdG8gc3VwcG9ydCBvdGhlciBEUk0gZmVhdHVyZXMu
CgpTaWduZWQtb2ZmLWJ5OiBSb2RyaWdvIFNpcXVlaXJhIDxyb2RyaWdvc2lxdWVpcmFtZWxvQGdt
YWlsLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2Rydi5jICAgIHwgMiArLQog
ZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuaCAgICB8IDQgKystLQogZHJpdmVycy9ncHUv
ZHJtL3ZrbXMvdmttc19vdXRwdXQuYyB8IDYgKysrLS0tCiBkcml2ZXJzL2dwdS9kcm0vdmttcy92
a21zX3BsYW5lLmMgIHwgNCArKy0tCiA0IGZpbGVzIGNoYW5nZWQsIDggaW5zZXJ0aW9ucygrKSwg
OCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2Ry
di5jIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuYwppbmRleCBjYzUzZWY4OGEzMzEu
Ljk2NmIzZDY1MzE4OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2Rydi5jCkBAIC0xMjcsNyArMTI3LDcg
QEAgc3RhdGljIGludCB2a21zX21vZGVzZXRfaW5pdChzdHJ1Y3Qgdmttc19kZXZpY2UgKnZrbXNk
ZXYpCiAJZGV2LT5tb2RlX2NvbmZpZy5wcmVmZXJyZWRfZGVwdGggPSAyNDsKIAlkZXYtPm1vZGVf
Y29uZmlnLmhlbHBlcl9wcml2YXRlID0gJnZrbXNfbW9kZV9jb25maWdfaGVscGVyczsKIAotCXJl
dHVybiB2a21zX291dHB1dF9pbml0KHZrbXNkZXYpOworCXJldHVybiB2a21zX291dHB1dF9pbml0
KHZrbXNkZXYsIDApOwogfQogCiBzdGF0aWMgaW50IF9faW5pdCB2a21zX2luaXQodm9pZCkKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92a21zL3ZrbXNfZHJ2LmggYi9kcml2ZXJzL2dwdS9k
cm0vdmttcy92a21zX2Rydi5oCmluZGV4IDhkNjI4ZDE4MTA1ZS4uYWQ2M2RiZTVlOTk0IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS92a21zL3ZrbXNfZHJ2LmgKQEAgLTExNSwxMCArMTE1LDEwIEBAIGJvb2wgdmttc19nZXRf
dmJsYW5rX3RpbWVzdGFtcChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1bnNpZ25lZCBpbnQgcGlw
ZSwKIAkJCSAgICAgICBpbnQgKm1heF9lcnJvciwga3RpbWVfdCAqdmJsYW5rX3RpbWUsCiAJCQkg
ICAgICAgYm9vbCBpbl92YmxhbmtfaXJxKTsKIAotaW50IHZrbXNfb3V0cHV0X2luaXQoc3RydWN0
IHZrbXNfZGV2aWNlICp2a21zZGV2KTsKK2ludCB2a21zX291dHB1dF9pbml0KHN0cnVjdCB2a21z
X2RldmljZSAqdmttc2RldiwgaW50IGluZGV4KTsKIAogc3RydWN0IGRybV9wbGFuZSAqdmttc19w
bGFuZV9pbml0KHN0cnVjdCB2a21zX2RldmljZSAqdmttc2RldiwKLQkJCQkgIGVudW0gZHJtX3Bs
YW5lX3R5cGUgdHlwZSk7CisJCQkJICBlbnVtIGRybV9wbGFuZV90eXBlIHR5cGUsIGludCBpbmRl
eCk7CiAKIC8qIEdlbSBzdHVmZiAqLwogc3RydWN0IGRybV9nZW1fb2JqZWN0ICp2a21zX2dlbV9j
cmVhdGUoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS92a21zL3ZrbXNfb3V0cHV0LmMgYi9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX291dHB1dC5j
CmluZGV4IDU2ZmI1YzJhMjMxNS4uZmIxOTQxYTY1MjJjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vdmttcy92a21zX291dHB1dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92a21zL3ZrbXNf
b3V0cHV0LmMKQEAgLTM1LDcgKzM1LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVj
dG9yX2hlbHBlcl9mdW5jcyB2a21zX2Nvbm5faGVscGVyX2Z1bmNzID0gewogCS5nZXRfbW9kZXMg
ICAgPSB2a21zX2Nvbm5fZ2V0X21vZGVzLAogfTsKIAotaW50IHZrbXNfb3V0cHV0X2luaXQoc3Ry
dWN0IHZrbXNfZGV2aWNlICp2a21zZGV2KQoraW50IHZrbXNfb3V0cHV0X2luaXQoc3RydWN0IHZr
bXNfZGV2aWNlICp2a21zZGV2LCBpbnQgaW5kZXgpCiB7CiAJc3RydWN0IHZrbXNfb3V0cHV0ICpv
dXRwdXQgPSAmdmttc2Rldi0+b3V0cHV0OwogCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSAmdmtt
c2Rldi0+ZHJtOwpAQCAtNDUsMTIgKzQ1LDEyIEBAIGludCB2a21zX291dHB1dF9pbml0KHN0cnVj
dCB2a21zX2RldmljZSAqdmttc2RldikKIAlzdHJ1Y3QgZHJtX3BsYW5lICpwcmltYXJ5LCAqY3Vy
c29yID0gTlVMTDsKIAlpbnQgcmV0OwogCi0JcHJpbWFyeSA9IHZrbXNfcGxhbmVfaW5pdCh2a21z
ZGV2LCBEUk1fUExBTkVfVFlQRV9QUklNQVJZKTsKKwlwcmltYXJ5ID0gdmttc19wbGFuZV9pbml0
KHZrbXNkZXYsIERSTV9QTEFORV9UWVBFX1BSSU1BUlksIGluZGV4KTsKIAlpZiAoSVNfRVJSKHBy
aW1hcnkpKQogCQlyZXR1cm4gUFRSX0VSUihwcmltYXJ5KTsKIAogCWlmIChlbmFibGVfY3Vyc29y
KSB7Ci0JCWN1cnNvciA9IHZrbXNfcGxhbmVfaW5pdCh2a21zZGV2LCBEUk1fUExBTkVfVFlQRV9D
VVJTT1IpOworCQljdXJzb3IgPSB2a21zX3BsYW5lX2luaXQodmttc2RldiwgRFJNX1BMQU5FX1RZ
UEVfQ1VSU09SLCBpbmRleCk7CiAJCWlmIChJU19FUlIoY3Vyc29yKSkgewogCQkJcmV0ID0gUFRS
X0VSUihjdXJzb3IpOwogCQkJZ290byBlcnJfY3Vyc29yOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3ZrbXMvdmttc19wbGFuZS5jIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19wbGFu
ZS5jCmluZGV4IDhjZjQwMjk3Y2Y1Ni4uM2Y4ZThiNTNmM2JiIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vdmttcy92a21zX3BsYW5lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmtt
c19wbGFuZS5jCkBAIC0xNzYsNyArMTc2LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcGxh
bmVfaGVscGVyX2Z1bmNzIHZrbXNfcHJpbWFyeV9oZWxwZXJfZnVuY3MgPSB7CiB9OwogCiBzdHJ1
Y3QgZHJtX3BsYW5lICp2a21zX3BsYW5lX2luaXQoc3RydWN0IHZrbXNfZGV2aWNlICp2a21zZGV2
LAotCQkJCSAgZW51bSBkcm1fcGxhbmVfdHlwZSB0eXBlKQorCQkJCSAgZW51bSBkcm1fcGxhbmVf
dHlwZSB0eXBlLCBpbnQgaW5kZXgpCiB7CiAJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9ICZ2a21z
ZGV2LT5kcm07CiAJY29uc3Qgc3RydWN0IGRybV9wbGFuZV9oZWxwZXJfZnVuY3MgKmZ1bmNzOwpA
QCAtMTk4LDcgKzE5OCw3IEBAIHN0cnVjdCBkcm1fcGxhbmUgKnZrbXNfcGxhbmVfaW5pdChzdHJ1
Y3Qgdmttc19kZXZpY2UgKnZrbXNkZXYsCiAJCWZ1bmNzID0gJnZrbXNfcHJpbWFyeV9oZWxwZXJf
ZnVuY3M7CiAJfQogCi0JcmV0ID0gZHJtX3VuaXZlcnNhbF9wbGFuZV9pbml0KGRldiwgcGxhbmUs
IDAsCisJcmV0ID0gZHJtX3VuaXZlcnNhbF9wbGFuZV9pbml0KGRldiwgcGxhbmUsIDEgPDwgaW5k
ZXgsCiAJCQkJICAgICAgICZ2a21zX3BsYW5lX2Z1bmNzLAogCQkJCSAgICAgICBmb3JtYXRzLCBu
Zm9ybWF0cywKIAkJCQkgICAgICAgTlVMTCwgdHlwZSwgTlVMTCk7Ci0tIAoyLjIxLjAKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxp
bmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
