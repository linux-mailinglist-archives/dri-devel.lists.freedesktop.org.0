Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CF22841CDD
	for <lists+dri-devel@lfdr.de>; Wed, 12 Jun 2019 08:55:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DD1ED892DC;
	Wed, 12 Jun 2019 06:54:27 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from imap1.codethink.co.uk (imap1.codethink.co.uk [176.9.8.82])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7F47E89160
 for <dri-devel@lists.freedesktop.org>; Tue, 11 Jun 2019 14:24:26 +0000 (UTC)
Received: from [167.98.27.226] (helo=happy.office.codethink.co.uk)
 by imap1.codethink.co.uk with esmtpsa (Exim 4.84_2 #1 (Debian))
 id 1hahOV-0003vU-65; Tue, 11 Jun 2019 15:04:59 +0100
From: Michael Drake <michael.drake@codethink.co.uk>
To: Andrzej Hajda <a.hajda@samsung.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 dri-devel@lists.freedesktop.org, devicetree@vger.kernel.org,
 linux-kernel@vger.kernel.org, Michael Drake <michael.drake@codethink.co.uk>
Subject: [PATCH v1 09/11] ti949: i2c device driver for TI DS90UB949-Q1
Date: Tue, 11 Jun 2019 15:04:10 +0100
Message-Id: <20190611140412.32151-10-michael.drake@codethink.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190611140412.32151-1-michael.drake@codethink.co.uk>
References: <20190611140412.32151-1-michael.drake@codethink.co.uk>
MIME-Version: 1.0
X-Mailman-Approved-At: Wed, 12 Jun 2019 06:53:41 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Mark Rutland <mark.rutland@arm.com>, linux-kernel@lists.codethink.co.uk,
 David Airlie <airlied@linux.ie>, Nate Case <ncase@tesla.com>,
 Rob Herring <robh+dt@kernel.org>, Patrick Glaser <pglaser@tesla.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBpcyBhIHJlZ21hcCBpMmMgZGV2aWNlIGRyaXZlciBmb3I6CgogIFRJIERTOTBVQjk0OS1R
MSAxMDgwcCBIRE1JIHRvIEZQRC1MaW5rIElJSSBicmlkZ2Ugc2VyaWFsaXplcgoKSXQgc3VwcG9y
dHMgaW5zdGFudGlhdGlvbiB2aWEgZGV2aWNlIHRyZWUgLyBBQ1BJIHRhYmxlLgoKQSBsaXN0IG9m
IHJlZ3VsYXRvcnMgdG8gZW5hYmxlIGZvciB1c2Ugb2YgdGhlIGRldmljZSAoZS5nLgpHUElPcyBm
b3IgdHVybmluZyBvbiBwb3dlcikgbWF5IGJlIHByb3ZpZGVkIGFzIGRldmljZSB0cmVlCnByb3Bl
cnRpZXMuICBUaGVzZSBhcmUgZW5hYmxlZCBvbiBwcm9iZSBhbmQgUE0gcmVzdW1lLgpUaGV5IGFy
ZSBkaXNhYmxlZCBvbiByZW1vdmUgYW5kIFBNIHN1c3BlbmQuCgpEYXRhc2hlZXQ6IGh0dHA6Ly93
d3cudGkuY29tL2xpdC9kcy9zeW1saW5rL2RzOTB1Yjk0OS1xMS5wZGYKClNpZ25lZC1vZmYtYnk6
IE1pY2hhZWwgRHJha2UgPG1pY2hhZWwuZHJha2VAY29kZXRoaW5rLmNvLnVrPgpDYzogUGF0cmlj
ayBHbGFzZXIgPHBnbGFzZXJAdGVzbGEuY29tPgpDYzogTmF0ZSBDYXNlIDxuY2FzZUB0ZXNsYS5j
b20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9LY29uZmlnICB8ICAgOCArCiBkcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL01ha2VmaWxlIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2Uv
dGk5NDkuYyAgfCA1MTEgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIDMgZmlsZXMg
Y2hhbmdlZCwgNTIwIGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dw
dS9kcm0vYnJpZGdlL3RpOTQ5LmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdl
L0tjb25maWcgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL0tjb25maWcKaW5kZXggMTQ5NjkyZGM4
ZDQ4Li5mYmMwZWRkZGE4ZjAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvS2Nv
bmZpZworKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL0tjb25maWcKQEAgLTg5LDYgKzg5LDE0
IEBAIGNvbmZpZyBEUk1fVEk5NDgKIAkgIFRoaXMgaXMgYSBkcml2ZXIgZm9yIHRoZSBUSSBEUzkw
VUI5NDgtUTEgZGV2aWNlLgogCSAgSXQgY29udmVydHMgdmlkZW8gc2lnbmFscyBmcm9tIEZQRC1M
aW5rIElJSSB0byBPcGVuTERJLgogCitjb25maWcgRFJNX1RJOTQ5CisJdHJpc3RhdGUgIlRJIERT
OTBVQjk0OS1RMSAxMDgwcCBIRE1JIHRvIEZQRC1MaW5rIElJSSBicmlkZ2Ugc2VyaWFsaXplciIK
KwlzZWxlY3QgRFJNX0tNU19IRUxQRVIKKwlzZWxlY3QgUkVHTUFQX0kyQworCWhlbHAKKwkgIFRo
aXMgaXMgYSBkcml2ZXIgZm9yIHRoZSBUSSBEUzkwVUI5NDktUTEgZGV2aWNlLgorCSAgSXQgY29u
dmVydHMgdmlkZW8gc2lnbmFscyBmcm9tIEhETUkgdG8gRlBELUxpbmsgSUlJLgorCiBjb25maWcg
RFJNX1NJTF9TSUk4NjIwCiAJdHJpc3RhdGUgIlNpbGljb24gSW1hZ2UgU0lJODYyMCBIRE1JL01I
TCBicmlkZ2UiCiAJZGVwZW5kcyBvbiBPRgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Jy
aWRnZS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvTWFrZWZpbGUKaW5kZXggM2Zi
MzdiYmUxMGUxLi4xNzg4YjVlZmUyMzQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlk
Z2UvTWFrZWZpbGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9NYWtlZmlsZQpAQCAtNyw2
ICs3LDcgQEAgb2JqLSQoQ09ORklHX0RSTV9NRUdBQ0hJUFNfU1REUFhYWFhfR0VfQjg1MFYzX0ZX
KSArPSBtZWdhY2hpcHMtc3RkcHh4eHgtZ2UtYjg1MHYKIG9iai0kKENPTkZJR19EUk1fTlhQX1BU
TjM0NjApICs9IG54cC1wdG4zNDYwLm8KIG9iai0kKENPTkZJR19EUk1fUEFSQURFX1BTODYyMikg
Kz0gcGFyYWRlLXBzODYyMi5vCiBvYmotJChDT05GSUdfRFJNX1RJOTQ4KSArPSB0aTk0OC5vCitv
YmotJChDT05GSUdfRFJNX1RJOTQ5KSArPSB0aTk0OS5vCiBvYmotJChDT05GSUdfRFJNX1NJTF9T
SUk4NjIwKSArPSBzaWwtc2lpODYyMC5vCiBvYmotJChDT05GSUdfRFJNX1NJSTkwMlgpICs9IHNp
aTkwMngubwogb2JqLSQoQ09ORklHX0RSTV9TSUk5MjM0KSArPSBzaWk5MjM0Lm8KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGk5NDkuYyBiL2RyaXZlcnMvZ3B1L2RybS9icmlk
Z2UvdGk5NDkuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjA0NjE4
Y2E1ZjI1ZQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGk5NDku
YwpAQCAtMCwwICsxLDUxMSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAK
Ky8qCisgKiBUSSBEUzkwVUI5NDktUTEgMTA4MHAgSERNSSB0byBGUEQtTGluayBJSUkgYnJpZGdl
IHNlcmlhbGl6ZXIgZHJpdmVyCisgKgorICogQ29weXJpZ2h0IChDKSAyMDE5IFRlc2xhIE1vdG9y
cywgSW5jLgorICoKKyAqIFRoaXMgc29mdHdhcmUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1z
IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMKKyAqIExpY2Vuc2UgdmVyc2lvbiAyLCBhcyBwdWJs
aXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgYW5kCisgKiBtYXkgYmUgY29w
aWVkLCBkaXN0cmlidXRlZCwgYW5kIG1vZGlmaWVkIHVuZGVyIHRob3NlIHRlcm1zLgorICoKKyAq
IFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUg
dXNlZnVsLAorICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGlt
cGxpZWQgd2FycmFudHkgb2YKKyAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBB
UlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKKyAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNl
IGZvciBtb3JlIGRldGFpbHMuCisgKi8KKworI2luY2x1ZGUgPGxpbnV4L3JlZ3VsYXRvci9jb25z
dW1lci5oPgorI2luY2x1ZGUgPGxpbnV4L29mX2RldmljZS5oPgorI2luY2x1ZGUgPGxpbnV4L21v
ZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L3JlZ21hcC5oPgorI2luY2x1ZGUgPGxpbnV4L2RlbGF5
Lmg+CisjaW5jbHVkZSA8bGludXgvaTJjLmg+CisKKy8qIE51bWJlciBvZiB0aW1lcyB0byB0cnkg
Y2hlY2tpbmcgZm9yIGRldmljZSBvbiBicmluZ3VwLiAqLworI2RlZmluZSBUSTk0OV9ERVZJQ0Vf
SURfVFJJRVMgMTAKKworLyoqCisgKiBlbnVtIHRpOTQ5X3JlZyAtIFRJOTQ5IHJlZ2lzdGVycy4K
KyAqCisgKiBEUzkwVUI5NDktUTE6IDguNiBSZWdpc3RlciBNYXBzOiBUYWJsZSAxMC4gU2VyaWFs
IENvbnRyb2wgQnVzIFJlZ2lzdGVycworICoKKyAqIGh0dHA6Ly93d3cudGkuY29tL2xpdC9kcy9z
bmxzNDUyL3NubHM0NTIucGRmCisgKi8KK2VudW0gdGk5NDlfcmVnIHsKKwlUSTk0OV9SRUdfSTJD
X0RFVklDRV9JRCAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MDAsCisJVEk5NDlfUkVHX1JF
U0VUICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDAxLAorCVRJOTQ5X1JFR19H
RU5FUkFMX0NPTkZJR1VSQVRJT04gICAgICAgICAgICAgICAgID0gMHgwMywKKwlUSTk0OV9SRUdf
TU9ERV9TRUxFQ1QgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MDQsCisJVEk5NDlfUkVH
X0kyQ19DT05UUk9MICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDA1LAorCVRJOTQ5X1JF
R19ERVNfSUQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgwNiwKKwlUSTk0OV9S
RUdfU0xBVkVfSUQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MDcsCisJVEk5NDlf
UkVHX1NMQVZFX0FMSUFTICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDA4LAorCVRJOTQ5
X1JFR19DUkNfRVJST1JTX0EgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgwQSwKKwlUSTk0
OV9SRUdfQ1JDX0VSUk9SU19CICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MEIsCisJVEk5
NDlfUkVHX0dFTkVSQUxfU1RBVFVTICAgICAgICAgICAgICAgICAgICAgICAgPSAweDBDLAorCVRJ
OTQ5X1JFR19HUElPMF9DT05GSUdVUkFUSU9OICAgICAgICAgICAgICAgICAgID0gMHgwRCwKKwlU
STk0OV9SRUdfR1BJTzFfQU5EXzJfQ09ORklHVVJBVElPTiAgICAgICAgICAgICA9IDB4MEUsCisJ
VEk5NDlfUkVHX0dQSU8zX0NPTkZJR1VSQVRJT04gICAgICAgICAgICAgICAgICAgPSAweDBGLAor
CVRJOTQ5X1JFR19HUElPNV9SRUdfQU5EX0dQSU82X1JFR19DT05GSUdVUkFUSU9OID0gMHgxMCwK
KwlUSTk0OV9SRUdfR1BJTzdfUkVHX0FORF9HUElPOF9SRUdfQ09ORklHVVJBVElPTiA9IDB4MTEs
CisJVEk5NDlfUkVHX0RBVEFfUEFUSF9DT05UUk9MICAgICAgICAgICAgICAgICAgICAgPSAweDEy
LAorCVRJOTQ5X1JFR19HRU5FUkFMX1BVUlBPU0VfQ09OVFJPTCAgICAgICAgICAgICAgID0gMHgx
MywKKwlUSTk0OV9SRUdfQklTVF9DT05UUk9MICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4
MTQsCisJVEk5NDlfUkVHX0kyQ19WT0xUQUdFX1NFTEVDVCAgICAgICAgICAgICAgICAgICAgPSAw
eDE1LAorCVRJOTQ5X1JFR19CQ0NfV0FUQ0hET0dfQ09OVFJPTCAgICAgICAgICAgICAgICAgID0g
MHgxNiwKKwlUSTk0OV9SRUdfSTJDX0NPTlRST0wyICAgICAgICAgICAgICAgICAgICAgICAgICA9
IDB4MTcsCisJVEk5NDlfUkVHX1NDTF9ISUdIX1RJTUUgICAgICAgICAgICAgICAgICAgICAgICAg
PSAweDE4LAorCVRJOTQ5X1JFR19TQ0xfTE9XX1RJTUUgICAgICAgICAgICAgICAgICAgICAgICAg
ID0gMHgxOSwKKwlUSTk0OV9SRUdfREFUQV9QQVRIX0NPTlRST0xfMiAgICAgICAgICAgICAgICAg
ICA9IDB4MUEsCisJVEk5NDlfUkVHX0JJU1RfQkNfRVJST1JfQ09VTlQgICAgICAgICAgICAgICAg
ICAgPSAweDFCLAorCVRJOTQ5X1JFR19HUElPX1BJTl9TVEFUVVNfMSAgICAgICAgICAgICAgICAg
ICAgID0gMHgxQywKKwlUSTk0OV9SRUdfR1BJT19QSU5fU1RBVFVTXzIgICAgICAgICAgICAgICAg
ICAgICA9IDB4MUQsCisJVEk5NDlfUkVHX1RSQU5TTUlUVEVSX1BPUlRfU0VMRUNUICAgICAgICAg
ICAgICAgPSAweDFFLAorCVRJOTQ5X1JFR19GUkVRVUVOQ1lfQ09VTlRFUiAgICAgICAgICAgICAg
ICAgICAgID0gMHgxRiwKKwlUSTk0OV9SRUdfREVTRVJJQUxJWkVSX0NBUEFCSUxJVElFU18xICAg
ICAgICAgICA9IDB4MjAsCisJVEk5NDlfUkVHX0RFU0VSSUFMSVpFUl9DQVBBQklMSVRJRVNfMiAg
ICAgICAgICAgPSAweDIxLAorCVRJOTQ5X1JFR19MSU5LX0RFVEVDVF9DT05UUk9MICAgICAgICAg
ICAgICAgICAgID0gMHgyNiwKKwlUSTk0OV9SRUdfU0NMS19DVFJMICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICA9IDB4MzAsCisJVEk5NDlfUkVHX0FVRElPX0NUUzAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgPSAweDMxLAorCVRJOTQ5X1JFR19BVURJT19DVFMxICAgICAgICAgICAgICAg
ICAgICAgICAgICAgID0gMHgzMiwKKwlUSTk0OV9SRUdfQVVESU9fQ1RTMiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICA9IDB4MzMsCisJVEk5NDlfUkVHX0FVRElPX04wICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgPSAweDM0LAorCVRJOTQ5X1JFR19BVURJT19OMSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgID0gMHgzNSwKKwlUSTk0OV9SRUdfQVVESU9fTjJfQ09FRkYgICAgICAg
ICAgICAgICAgICAgICAgICA9IDB4MzYsCisJVEk5NDlfUkVHX0NMS19DTEVBTl9TVFMgICAgICAg
ICAgICAgICAgICAgICAgICAgPSAweDM3LAorCVRJOTQ5X1JFR19BTkFfSUFfQ05UTCAgICAgICAg
ICAgICAgICAgICAgICAgICAgID0gMHg0MCwKKwlUSTk0OV9SRUdfQU5BX0lBX0FERFIgICAgICAg
ICAgICAgICAgICAgICAgICAgICA9IDB4NDEsCisJVEk5NDlfUkVHX0FOQV9JQV9DVEwgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgPSAweDQyLAorCVRJOTQ5X1JFR19BUEJfQ1RMICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgID0gMHg0OCwKKwlUSTk0OV9SRUdfQVBCX0FEUjAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICA9IDB4NDksCisJVEk5NDlfUkVHX0FQQl9BRFIxICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgPSAweDRBLAorCVRJOTQ5X1JFR19BUEJfREFUQTAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg0QiwKKwlUSTk0OV9SRUdfQVBCX0RBVEExICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4NEMsCisJVEk5NDlfUkVHX0FQQl9EQVRBMiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDRELAorCVRJOTQ5X1JFR19BUEJfREFUQTMg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg0RSwKKwlUSTk0OV9SRUdfQlJJREdFX0NU
TCAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4NEYsCisJVEk5NDlfUkVHX0JSSURHRV9T
VFMgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDUwLAorCVRJOTQ5X1JFR19FRElEX0lE
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg1MSwKKwlUSTk0OV9SRUdfRURJRF9D
RkcwICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4NTIsCisJVEk5NDlfUkVHX0VESURf
Q0ZHMSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDUzLAorCVRJOTQ5X1JFR19CUklE
R0VfQ0ZHICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg1NCwKKwlUSTk0OV9SRUdfQVVE
SU9fQ0ZHICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4NTUsCisJVEk5NDlfUkVHX0RV
QUxfU1RTICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDVBLAorCVRJOTQ5X1JFR19E
VUFMX0NUTDEgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg1QiwKKwlUSTk0OV9SRUdf
RFVBTF9DVEwyICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4NUMsCisJVEk5NDlfUkVH
X0ZSRVFfTE9XICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDVELAorCVRJOTQ5X1JF
R19GUkVRX0hJR0ggICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg1RSwKKwlUSTk0OV9S
RUdfSERNSV9GUkVRVUVOQ1kgICAgICAgICAgICAgICAgICAgICAgICA9IDB4NUYsCisJVEk5NDlf
UkVHX1NQSV9USU1JTkcxICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDYwLAorCVRJOTQ5
X1JFR19TUElfVElNSU5HMiAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg2MSwKKwlUSTk0
OV9SRUdfU1BJX0NPTkZJRyAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4NjIsCisJVEk5
NDlfUkVHX1BBVFRFUk5fR0VORVJBVE9SX0NPTlRST0wgICAgICAgICAgICAgPSAweDY0LAorCVRJ
OTQ5X1JFR19QQVRURVJOX0dFTkVSQVRPUl9DT05GSUdVUkFUSU9OICAgICAgID0gMHg2NSwKKwlU
STk0OV9SRUdfUEdJQSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4NjYsCisJ
VEk5NDlfUkVHX1BHSUQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDY3LAor
CVRJOTQ5X1JFR19TTEFWRV9JRDEgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg3MCwK
KwlUSTk0OV9SRUdfU0xBVkVfSUQyICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4NzEs
CisJVEk5NDlfUkVHX1NMQVZFX0lEMyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDcy
LAorCVRJOTQ5X1JFR19TTEFWRV9JRDQgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg3
MywKKwlUSTk0OV9SRUdfU0xBVkVfSUQ1ICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4
NzQsCisJVEk5NDlfUkVHX1NMQVZFX0lENiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAw
eDc1LAorCVRJOTQ5X1JFR19TTEFWRV9JRDcgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0g
MHg3NiwKKwlUSTk0OV9SRUdfU0xBVkVfQUxJQVMxICAgICAgICAgICAgICAgICAgICAgICAgICA9
IDB4NzcsCisJVEk5NDlfUkVHX1NMQVZFX0FMSUFTMiAgICAgICAgICAgICAgICAgICAgICAgICAg
PSAweDc4LAorCVRJOTQ5X1JFR19TTEFWRV9BTElBUzMgICAgICAgICAgICAgICAgICAgICAgICAg
ID0gMHg3OSwKKwlUSTk0OV9SRUdfU0xBVkVfQUxJQVM0ICAgICAgICAgICAgICAgICAgICAgICAg
ICA9IDB4N0EsCisJVEk5NDlfUkVHX1NMQVZFX0FMSUFTNSAgICAgICAgICAgICAgICAgICAgICAg
ICAgPSAweDdCLAorCVRJOTQ5X1JFR19TTEFWRV9BTElBUzYgICAgICAgICAgICAgICAgICAgICAg
ICAgID0gMHg3QywKKwlUSTk0OV9SRUdfU0xBVkVfQUxJQVM3ICAgICAgICAgICAgICAgICAgICAg
ICAgICA9IDB4N0QsCisJVEk5NDlfUkVHX0lDUiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgPSAweEM2LAorCVRJOTQ5X1JFR19JU1IgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgID0gMHhDNywKKwlUSTk0OV9SRUdfVFhfSURfMCAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICA9IDB4RjAsCisJVEk5NDlfUkVHX1RYX0lEXzEgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgPSAweEYxLAorCVRJOTQ5X1JFR19UWF9JRF8yICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgID0gMHhGMiwKKwlUSTk0OV9SRUdfVFhfSURfMyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICA9IDB4RjMsCisJVEk5NDlfUkVHX1RYX0lEXzQgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgPSAweEY0LAorCVRJOTQ5X1JFR19UWF9JRF81ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgID0gMHhGNSwKK307CisKKy8qKgorICogc3RydWN0IHRpOTQ5X2N0eCAtIHRp
OTQ5IGRyaXZlciBjb250ZXh0CisgKiBAaTJjOiAgICAgICAgIEhhbmRsZSBmb3IgdGhlIGRldmlj
ZSdzIGkyYyBjbGllbnQuCisgKiBAcmVnbWFwOiAgICAgIEhhbmRsZSBmb3IgdGhlIGRldmljZSdz
IHJlZ21hcC4KKyAqIEByZWdfbmFtZXM6ICAgQXJyYXkgb2YgcmVndWxhdG9yIG5hbWVzLCBvciBO
VUxMLgorICogQHJlZ3M6ICAgICAgICBBcnJheSBvZiByZWd1bGF0b3JzLCBvciBOVUxMLgorICog
QHJlZ19jb3VudDogICBOdW1iZXIgb2YgZW50cmllcyBpbiByZWdfbmFtZXMgYW5kIHJlZ3MgYXJy
YXlzLgorICovCitzdHJ1Y3QgdGk5NDlfY3R4IHsKKwlzdHJ1Y3QgaTJjX2NsaWVudCAqaTJjOwor
CXN0cnVjdCByZWdtYXAgKnJlZ21hcDsKKwljb25zdCBjaGFyICoqcmVnX25hbWVzOworCXN0cnVj
dCByZWd1bGF0b3IgKipyZWdzOworCXNpemVfdCByZWdfY291bnQ7Cit9OworCitzdGF0aWMgYm9v
bCB0aTk0OV9yZWFkYWJsZV9yZWcoc3RydWN0IGRldmljZSAqZGV2LCB1bnNpZ25lZCBpbnQgcmVn
KQoreworCXN3aXRjaCAocmVnKSB7CisJY2FzZSBUSTk0OV9SRUdfSTJDX0RFVklDRV9JRCAuLi4g
VEk5NDlfUkVHX0RFU0VSSUFMSVpFUl9DQVBBQklMSVRJRVNfMjoKKwkJLypmYWxsIHRocm91Z2gq
LworCWNhc2UgVEk5NDlfUkVHX0xJTktfREVURUNUX0NPTlRST0w6CisJCS8qZmFsbCB0aHJvdWdo
Ki8KKwljYXNlIFRJOTQ5X1JFR19TQ0xLX0NUUkwgICAgIC4uLiBUSTk0OV9SRUdfQ0xLX0NMRUFO
X1NUUzoKKwkJLypmYWxsIHRocm91Z2gqLworCWNhc2UgVEk5NDlfUkVHX0FOQV9JQV9DTlRMICAg
Li4uIFRJOTQ5X1JFR19BTkFfSUFfQ1RMOgorCQkvKmZhbGwgdGhyb3VnaCovCisJY2FzZSBUSTk0
OV9SRUdfQVBCX0NUTCAgICAgICAuLi4gVEk5NDlfUkVHX0FVRElPX0NGRzoKKwkJLypmYWxsIHRo
cm91Z2gqLworCWNhc2UgVEk5NDlfUkVHX0RVQUxfU1RTICAgICAgLi4uIFRJOTQ5X1JFR19TUElf
Q09ORklHOgorCQkvKmZhbGwgdGhyb3VnaCovCisJY2FzZSBUSTk0OV9SRUdfUEFUVEVSTl9HRU5F
UkFUT1JfQ09OVFJPTCAuLi4gVEk5NDlfUkVHX1BHSUQ6CisJCS8qZmFsbCB0aHJvdWdoKi8KKwlj
YXNlIFRJOTQ5X1JFR19TTEFWRV9JRDEgICAgIC4uLiBUSTk0OV9SRUdfU0xBVkVfQUxJQVM3Ogor
CQkvKmZhbGwgdGhyb3VnaCovCisJY2FzZSBUSTk0OV9SRUdfSUNSICAgICAgICAgICAuLi4gVEk5
NDlfUkVHX0lTUjoKKwkJLypmYWxsIHRocm91Z2gqLworCWNhc2UgVEk5NDlfUkVHX1RYX0lEXzAg
ICAgICAgLi4uIFRJOTQ5X1JFR19UWF9JRF81OgorCQlyZXR1cm4gdHJ1ZTsKKwlkZWZhdWx0Ogor
CQlyZXR1cm4gZmFsc2U7CisJfQorfQorCitzdGF0aWMgYm9vbCB0aTk0OV93cml0ZWFibGVfcmVn
KHN0cnVjdCBkZXZpY2UgKmRldiwgdW5zaWduZWQgaW50IHJlZykKK3sKKwlzd2l0Y2ggKHJlZykg
eworCWNhc2UgVEk5NDlfUkVHX0kyQ19ERVZJQ0VfSUQgICAgICAgLi4uIFRJOTQ5X1JFR19TTEFW
RV9BTElBUzoKKwkJLypmYWxsIHRocm91Z2gqLworCWNhc2UgVEk5NDlfUkVHX0dQSU8wX0NPTkZJ
R1VSQVRJT04gLi4uIFRJOTQ5X1JFR19EQVRBX1BBVEhfQ09OVFJPTDoKKwkJLypmYWxsIHRocm91
Z2gqLworCWNhc2UgVEk5NDlfUkVHX0JJU1RfQ09OVFJPTCAgICAgICAgLi4uIFRJOTQ5X1JFR19E
QVRBX1BBVEhfQ09OVFJPTF8yOgorCQkvKmZhbGwgdGhyb3VnaCovCisJY2FzZSBUSTk0OV9SRUdf
VFJBTlNNSVRURVJfUE9SVF9TRUxFQ1QgLi4uCisJCQlUSTk0OV9SRUdfREVTRVJJQUxJWkVSX0NB
UEFCSUxJVElFU18yOgorCQkvKmZhbGwgdGhyb3VnaCovCisJY2FzZSBUSTk0OV9SRUdfTElOS19E
RVRFQ1RfQ09OVFJPTDoKKwkJLypmYWxsIHRocm91Z2gqLworCWNhc2UgVEk5NDlfUkVHX1NDTEtf
Q1RSTCAgICAgICAgICAgLi4uIFRJOTQ5X1JFR19BVURJT19OMl9DT0VGRjoKKwkJLypmYWxsIHRo
cm91Z2gqLworCWNhc2UgVEk5NDlfUkVHX0FOQV9JQV9DTlRMICAgICAgICAgLi4uIFRJOTQ5X1JF
R19BTkFfSUFfQ1RMOgorCQkvKmZhbGwgdGhyb3VnaCovCisJY2FzZSBUSTk0OV9SRUdfQVBCX0NU
TCAgICAgICAgICAgICAuLi4gVEk5NDlfUkVHX0JSSURHRV9DVEw6CisJCS8qZmFsbCB0aHJvdWdo
Ki8KKwljYXNlIFRJOTQ5X1JFR19FRElEX0lEICAgICAgICAgICAgIC4uLiBUSTk0OV9SRUdfQVVE
SU9fQ0ZHOgorCQkvKmZhbGwgdGhyb3VnaCovCisJY2FzZSBUSTk0OV9SRUdfRFVBTF9DVEwxICAg
ICAgICAgICAuLi4gVEk5NDlfUkVHX1NQSV9DT05GSUc6CisJCS8qZmFsbCB0aHJvdWdoKi8KKwlj
YXNlIFRJOTQ5X1JFR19QQVRURVJOX0dFTkVSQVRPUl9DT05UUk9MIC4uLiBUSTk0OV9SRUdfUEdJ
RDoKKwkJLypmYWxsIHRocm91Z2gqLworCWNhc2UgVEk5NDlfUkVHX1NMQVZFX0lEMSAgICAgICAg
ICAgLi4uIFRJOTQ5X1JFR19TTEFWRV9BTElBUzc6CisJCS8qZmFsbCB0aHJvdWdoKi8KKwljYXNl
IFRJOTQ5X1JFR19JQ1I6CisJCXJldHVybiB0cnVlOworCWRlZmF1bHQ6CisJCXJldHVybiBmYWxz
ZTsKKwl9Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgcmVnbWFwX2NvbmZpZyB0aTk0OV9yZWdt
YXBfY29uZmlnID0geworCS52YWxfYml0cyAgICAgID0gOCwKKwkucmVnX2JpdHMgICAgICA9IDgs
CisJLm1heF9yZWdpc3RlciAgPSBUSTk0OV9SRUdfVFhfSURfNSwKKwkucmVhZGFibGVfcmVnICA9
IHRpOTQ5X3JlYWRhYmxlX3JlZywKKwkud3JpdGVhYmxlX3JlZyA9IHRpOTQ5X3dyaXRlYWJsZV9y
ZWcsCit9OworCitzdGF0aWMgaW5saW5lIHU4IHRpOTQ5X2RldmljZV9hZGRyZXNzKHN0cnVjdCB0
aTk0OV9jdHggKnRpOTQ5KQoreworCXJldHVybiB0aTk0OS0+aTJjLT5hZGRyOworfQorCitzdGF0
aWMgaW5saW5lIHU4IHRpOTQ5X2RldmljZV9leHBlY3RlZF9pZChzdHJ1Y3QgdGk5NDlfY3R4ICp0
aTk0OSkKK3sKKwlyZXR1cm4gdGk5NDlfZGV2aWNlX2FkZHJlc3ModGk5NDkpIDw8IDE7Cit9CisK
K3N0YXRpYyBpbnQgdGk5NDlfZGV2aWNlX2NoZWNrKHN0cnVjdCB0aTk0OV9jdHggKnRpOTQ5KQor
eworCXVuc2lnbmVkIGludCBpMmNfZGV2aWNlX2lkOworCWludCByZXQ7CisKKwlyZXQgPSByZWdt
YXBfcmVhZCh0aTk0OS0+cmVnbWFwLCBUSTk0OV9SRUdfSTJDX0RFVklDRV9JRCwKKwkJCSZpMmNf
ZGV2aWNlX2lkKTsKKwlpZiAocmV0IDwgMCkgeworCQlkZXZfZXJyKCZ0aTk0OS0+aTJjLT5kZXYs
CisJCQkJIkZhaWxlZCB0byByZWFkIGRldmljZSBpZC4gKGVycm9yICVkKVxuIiwgcmV0KTsKKwkJ
cmV0dXJuIC1FTk9ERVY7CisJfQorCisJaWYgKGkyY19kZXZpY2VfaWQgIT0gdGk5NDlfZGV2aWNl
X2V4cGVjdGVkX2lkKHRpOTQ5KSkgeworCQlkZXZfZXJyKCZ0aTk0OS0+aTJjLT5kZXYsCisJCQkJ
IkJhZCBkZXZpY2UgSUQ6IEdvdDogJXgsIEV4cGVjdGVkOiAleFxuIiwKKwkJCQlpMmNfZGV2aWNl
X2lkLCB0aTk0OV9kZXZpY2VfZXhwZWN0ZWRfaWQodGk5NDkpKTsKKwkJcmV0dXJuIC1FTk9ERVY7
CisJfQorCisJcmV0dXJuIDA7Cit9CisKKy8qKgorICogdGk5NDlfZGV2aWNlX2F3YWl0KCkgLSBS
ZXBlYXRlZGx5IGNoZWNrIHRoZSB0aTk0OSdzIGRldmljZSBJRC4KKyAqIEB0aTk0OTogdGk5NDkg
Y29udGV4dCB0byBjaGVjay4KKyAqCisgKiBSZXBlYXRlZGx5IGNoZWNrIHRoZSB0aTk0OSdzIGRl
dmljZSBJRCB0byB2ZXJpZnkgdGhhdCB0aGUgdGk5NDkgY2FuIGJlCisgKiBjb21tdW5pY2F0ZWQg
d2l0aCwgYW5kIHRoYXQgaXQgaXMgdGhlIGNvcnJlY3QgdmVyc2lvbi4KKyAqCisgKiBUaGlzIGZ1
bmN0aW9uIGNhbiBhbHNvIGJlIHVzZWQgdG8gd2FpdCB1bnRpbCB0aGUgdGk5NDkgaXMgcmVhZHks
IGFmdGVyCisgKiByZXNldC4KKyAqCisgKiBSZXR1cm5zOiAwIG9uIHN1Y2Nlc3MsIG5lZ2F0aXZl
IG9uIGZhaWx1cmUuCisgKi8KK3N0YXRpYyBpbnQgdGk5NDlfZGV2aWNlX2F3YWl0KHN0cnVjdCB0
aTk0OV9jdHggKnRpOTQ5KQoreworCWludCB0cmllcyA9IDA7CisJaW50IHJldDsKKworCWRvIHsK
KwkJcmV0ID0gdGk5NDlfZGV2aWNlX2NoZWNrKHRpOTQ5KTsKKwkJaWYgKHJldCA8IDApCisJCQlt
ZGVsYXkoMSk7CisJCWVsc2UKKwkJCWJyZWFrOworCX0gd2hpbGUgKCsrdHJpZXMgPCBUSTk0OV9E
RVZJQ0VfSURfVFJJRVMpOworCisJaWYgKHRyaWVzID49IFRJOTQ5X0RFVklDRV9JRF9UUklFUykK
KwkJZGV2X2VycigmdGk5NDktPmkyYy0+ZGV2LAorCQkJCSJGYWlsZWQgdG8gcmVhZCBpZCBhZnRl
ciAlZCBhdHRlbXB0KHMpXG4iLAorCQkJCXRyaWVzKTsKKworCXJldHVybiByZXQ7Cit9CisKK3N0
YXRpYyBpbnQgdGk5NDlfcG93ZXJfb24oc3RydWN0IHRpOTQ5X2N0eCAqdGk5NDkpCit7CisJaW50
IGk7CisJaW50IHJldDsKKworCWZvciAoaSA9IDA7IGkgPCB0aTk0OS0+cmVnX2NvdW50OyBpKysp
IHsKKwkJZGV2X2luZm8oJnRpOTQ5LT5pMmMtPmRldiwgIkVuYWJsaW5nICVzIHJlZ3VsYXRvclxu
IiwKKwkJCQl0aTk0OS0+cmVnX25hbWVzW2ldKTsKKwkJcmV0ID0gcmVndWxhdG9yX2VuYWJsZSh0
aTk0OS0+cmVnc1tpXSk7CisJCWlmIChyZXQgPCAwKSB7CisJCQlkZXZfZXJyKCZ0aTk0OS0+aTJj
LT5kZXYsCisJCQkJCSJDb3VsZCBub3QgZW5hYmxlIHJlZ3VsYXRvciAlczogJWRcbiIsCisJCQkJ
CXRpOTQ5LT5yZWdfbmFtZXNbaV0sIHJldCk7CisJCQlyZXR1cm4gcmV0OworCQl9CisKKwkJbXNs
ZWVwKDEwMCk7CisJfQorCisJcmV0ID0gdGk5NDlfZGV2aWNlX2F3YWl0KHRpOTQ5KTsKKwlpZiAo
cmV0ICE9IDApCisJCXJldHVybiByZXQ7CisKKwltc2xlZXAoNTAwKTsKKworCXJldHVybiAwOwor
fQorCitzdGF0aWMgaW50IHRpOTQ5X3Bvd2VyX29mZihzdHJ1Y3QgdGk5NDlfY3R4ICp0aTk0OSkK
K3sKKwlpbnQgaTsKKwlpbnQgcmV0OworCisJZm9yIChpID0gdGk5NDktPnJlZ19jb3VudDsgaSA+
IDA7IGktLSkgeworCQlkZXZfaW5mbygmdGk5NDktPmkyYy0+ZGV2LCAiRGlzYWJsaW5nICVzIHJl
Z3VsYXRvclxuIiwKKwkJCQl0aTk0OS0+cmVnX25hbWVzW2kgLSAxXSk7CisJCXJldCA9IHJlZ3Vs
YXRvcl9kaXNhYmxlKHRpOTQ5LT5yZWdzW2kgLSAxXSk7CisJCWlmIChyZXQgPCAwKSB7CisJCQlk
ZXZfZXJyKCZ0aTk0OS0+aTJjLT5kZXYsCisJCQkJCSJDb3VsZCBub3QgZGlzYWJsZSByZWd1bGF0
b3IgJXM6ICVkXG4iLAorCQkJCQl0aTk0OS0+cmVnX25hbWVzW2kgLSAxXSwgcmV0KTsKKwkJCXJl
dHVybiByZXQ7CisJCX0KKwl9CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGlubGluZSBzdHJ1
Y3QgdGk5NDlfY3R4ICp0aTk0OV9jdHhfZnJvbV9kZXYoc3RydWN0IGRldmljZSAqZGV2KQorewor
CXN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQgPSB0b19pMmNfY2xpZW50KGRldik7CisKKwlyZXR1
cm4gaTJjX2dldF9jbGllbnRkYXRhKGNsaWVudCk7Cit9CisKK3N0YXRpYyBpbnQgdGk5NDlfcG1f
cmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikKK3sKKwlzdHJ1Y3QgdGk5NDlfY3R4ICp0aTk0OSA9
IHRpOTQ5X2N0eF9mcm9tX2RldihkZXYpOworCWludCByZXQ7CisKKwlpZiAodGk5NDkgPT0gTlVM
TCkKKwkJcmV0dXJuIDA7CisKKwlyZXQgPSB0aTk0OV9wb3dlcl9vbih0aTk0OSk7CisJaWYgKHJl
dCAhPSAwKQorCQlyZXR1cm4gcmV0OworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgdGk5
NDlfcG1fc3VzcGVuZChzdHJ1Y3QgZGV2aWNlICpkZXYpCit7CisJc3RydWN0IHRpOTQ5X2N0eCAq
dGk5NDkgPSB0aTk0OV9jdHhfZnJvbV9kZXYoZGV2KTsKKworCWlmICh0aTk0OSA9PSBOVUxMKQor
CQlyZXR1cm4gMDsKKworCXJldHVybiB0aTk0OV9wb3dlcl9vZmYodGk5NDkpOworfQorCitzdGF0
aWMgaW50IHRpOTQ5X2dldF9yZWd1bGF0b3Ioc3RydWN0IGRldmljZSAqZGV2LCBjb25zdCBjaGFy
ICppZCwKKwkJc3RydWN0IHJlZ3VsYXRvciAqKnJlZ19vdXQpCit7CisJc3RydWN0IHJlZ3VsYXRv
ciAqcmVnOworCisJcmVnID0gZGV2bV9yZWd1bGF0b3JfZ2V0KGRldiwgaWQpOworCWlmIChJU19F
UlIocmVnKSkgeworCQlpbnQgcmV0ID0gUFRSX0VSUihyZWcpOworCisJCWRldl9lcnIoZGV2LCAi
RXJyb3IgcmVxdWVzdGluZyAlcyByZWd1bGF0b3I6ICVkXG4iLCBpZCwgcmV0KTsKKwkJcmV0dXJu
IHJldDsKKwl9CisKKwlpZiAocmVnID09IE5VTEwpCisJCWRldl93YXJuKGRldiwgIkNvdWxkIG5v
dCBnZXQgJXMgcmVndWxhdG9yXG4iLCBpZCk7CisJZWxzZQorCQlkZXZfaW5mbyhkZXYsICJHb3Qg
cmVndWxhdG9yICVzXG4iLCBpZCk7CisKKwkqcmVnX291dCA9IHJlZzsKKwlyZXR1cm4gMDsKK30K
Kworc3RhdGljIGludCB0aTk0OV9nZXRfcmVndWxhdG9ycyhzdHJ1Y3QgdGk5NDlfY3R4ICp0aTk0
OSkKK3sKKwlpbnQgaTsKKwlpbnQgcmV0OworCXNpemVfdCByZWd1bGF0b3JfY291bnQ7CisKKwly
ZXQgPSBkZXZpY2VfcHJvcGVydHlfcmVhZF9zdHJpbmdfYXJyYXkoJnRpOTQ5LT5pMmMtPmRldiwK
KwkJCSJyZWd1bGF0b3JzIiwgTlVMTCwgMCk7CisJaWYgKHJldCA9PSAtRUlOVkFMIHx8CisJICAg
IHJldCA9PSAtRU5PREFUQSB8fAorCSAgICByZXQgPT0gMCkgeworCQkvKiAicmVndWxhdG9ycyIg
cHJvcGVydHkgd2FzIGVpdGhlcjoKKwkJICogICAtIHVuc2V0CisJCSAqICAgLSB2YWx1ZWxlc3MK
KwkJICogICAtIHNldCB0byBlbXB0eSBsaXN0CisJCSAqIE5vdCBhbiBlcnJvcjsgY29udGludWUg
d2l0aG91dCByZWd1bGF0b3JzLgorCQkgKi8KKwkJZGV2X2luZm8oJnRpOTQ5LT5pMmMtPmRldiwK
KwkJCQkiTm8gcmVndWxhdG9ycyBsaXN0ZWQgZm9yIGRldmljZS5cbiIpOworCQlyZXR1cm4gMDsK
KworCX0gZWxzZSBpZiAocmV0IDwgMCkgeworCQlyZXR1cm4gcmV0OworCX0KKworCXJlZ3VsYXRv
cl9jb3VudCA9IHJldDsKKworCXRpOTQ5LT5yZWdfbmFtZXMgPSBkZXZtX2ttYWxsb2NfYXJyYXko
JnRpOTQ5LT5pMmMtPmRldiwKKwkJCXJlZ3VsYXRvcl9jb3VudCwgc2l6ZW9mKCp0aTk0OS0+cmVn
X25hbWVzKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCF0aTk0OS0+cmVnX25hbWVzKQorCQlyZXR1cm4g
LUVOT01FTTsKKworCXJldCA9IGRldmljZV9wcm9wZXJ0eV9yZWFkX3N0cmluZ19hcnJheSgmdGk5
NDktPmkyYy0+ZGV2LCAicmVndWxhdG9ycyIsCisJCQl0aTk0OS0+cmVnX25hbWVzLCByZWd1bGF0
b3JfY291bnQpOworCWlmIChyZXQgPCAwKQorCQlyZXR1cm4gcmV0OworCisJdGk5NDktPnJlZ3Mg
PSBkZXZtX2ttYWxsb2NfYXJyYXkoJnRpOTQ5LT5pMmMtPmRldiwKKwkJCXJlZ3VsYXRvcl9jb3Vu
dCwgc2l6ZW9mKCp0aTk0OS0+cmVncyksIEdGUF9LRVJORUwpOworCWlmICghdGk5NDktPnJlZ3Mp
CisJCXJldHVybiAtRU5PTUVNOworCisJZm9yIChpID0gMDsgaSA8IHJlZ3VsYXRvcl9jb3VudDsg
aSsrKSB7CisJCXJldCA9IHRpOTQ5X2dldF9yZWd1bGF0b3IoJnRpOTQ5LT5pMmMtPmRldiwKKwkJ
CQl0aTk0OS0+cmVnX25hbWVzW2ldLCAmdGk5NDktPnJlZ3NbaV0pOworCQlpZiAocmV0ICE9IDAp
CisJCQlyZXR1cm4gcmV0OworCX0KKworCXRpOTQ5LT5yZWdfY291bnQgPSByZWd1bGF0b3JfY291
bnQ7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCB0aTk0OV9wcm9iZShzdHJ1Y3QgaTJj
X2NsaWVudCAqY2xpZW50LAorCQljb25zdCBzdHJ1Y3QgaTJjX2RldmljZV9pZCAqaWQpCit7CisJ
c3RydWN0IHRpOTQ5X2N0eCAqdGk5NDk7CisJaW50IHJldDsKKworCWRldl9pbmZvKCZjbGllbnQt
PmRldiwgIkJlZ2luIHByb2JlIChhZGRyOiAleClcbiIsIGNsaWVudC0+YWRkcik7CisKKwl0aTk0
OSA9IGRldm1fa3phbGxvYygmY2xpZW50LT5kZXYsIHNpemVvZigqdGk5NDkpLCBHRlBfS0VSTkVM
KTsKKwlpZiAoIXRpOTQ5KQorCQlyZXR1cm4gLUVOT01FTTsKKworCXRpOTQ5LT5pMmMgPSBjbGll
bnQ7CisKKwl0aTk0OS0+cmVnbWFwID0gZGV2bV9yZWdtYXBfaW5pdF9pMmModGk5NDktPmkyYywg
JnRpOTQ5X3JlZ21hcF9jb25maWcpOworCWlmIChJU19FUlIodGk5NDktPnJlZ21hcCkpCisJCXJl
dHVybiBQVFJfRVJSKHRpOTQ5LT5yZWdtYXApOworCisJcmV0ID0gdGk5NDlfZ2V0X3JlZ3VsYXRv
cnModGk5NDkpOworCWlmIChyZXQgIT0gMCkKKwkJcmV0dXJuIHJldDsKKworCWkyY19zZXRfY2xp
ZW50ZGF0YShjbGllbnQsIHRpOTQ5KTsKKworCXJldCA9IHRpOTQ5X3BtX3Jlc3VtZSgmY2xpZW50
LT5kZXYpOworCWlmIChyZXQgIT0gMCkKKwkJcmV0dXJuIC1FUFJPQkVfREVGRVI7CisKKwlkZXZf
aW5mbygmdGk5NDktPmkyYy0+ZGV2LCAiRW5kIHByb2JlIChhZGRyOiAleClcbiIsIHRpOTQ5LT5p
MmMtPmFkZHIpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgdGk5NDlfcmVtb3ZlKHN0
cnVjdCBpMmNfY2xpZW50ICpjbGllbnQpCit7CisJcmV0dXJuIHRpOTQ5X3BtX3N1c3BlbmQoJmNs
aWVudC0+ZGV2KTsKK30KKworI2lmZGVmIENPTkZJR19PRgorc3RhdGljIGNvbnN0IHN0cnVjdCBv
Zl9kZXZpY2VfaWQgdGk5NDlfb2ZfbWF0Y2hbXSA9IHsKKwl7IC5jb21wYXRpYmxlID0gInRpLGRz
OTB1Yjk0OSIgfSwKKwl7fSwKK307CitNT0RVTEVfREVWSUNFX1RBQkxFKG9mLCB0aTk0OV9vZl9t
YXRjaCk7CisjZW5kaWYKKworc3RhdGljIGNvbnN0IHN0cnVjdCBpMmNfZGV2aWNlX2lkIHRpOTQ5
X2kyY19pZFtdID0geworCXsidGk5NDkiLCAwfSwKKwl7fSwKK307CitNT0RVTEVfREVWSUNFX1RB
QkxFKGkyYywgdGk5NDlfaTJjX2lkKTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBkZXZfcG1fb3Bz
IHRpOTQ5X3BtX29wcyA9IHsKKwkucmVzdW1lICA9IHRpOTQ5X3BtX3Jlc3VtZSwKKwkuc3VzcGVu
ZCA9IHRpOTQ5X3BtX3N1c3BlbmQsCit9OworCitzdGF0aWMgc3RydWN0IGkyY19kcml2ZXIgdGk5
NDlfZHJpdmVyID0geworCS5kcml2ZXIgPSB7CisJCS5uYW1lICA9ICJ0aTk0OSIsCisJCS5vd25l
ciA9IFRISVNfTU9EVUxFLAorCQkucG0gICAgPSAmdGk5NDlfcG1fb3BzLAorCQkub2ZfbWF0Y2hf
dGFibGUgPSBvZl9tYXRjaF9wdHIodGk5NDlfb2ZfbWF0Y2gpLAorCX0sCisJLmlkX3RhYmxlID0g
dGk5NDlfaTJjX2lkLAorCS5wcm9iZSAgICA9IHRpOTQ5X3Byb2JlLAorCS5yZW1vdmUgICA9IHRp
OTQ5X3JlbW92ZSwKK307Cittb2R1bGVfaTJjX2RyaXZlcih0aTk0OV9kcml2ZXIpOworCitNT0RV
TEVfQVVUSE9SKCJNaWNoYWVsIERyYWtlIDxtaWNoYWVsLmRyYWtlQGNvZGV0aGluay5jby51ayIp
OworTU9EVUxFX0RFU0NSSVBUSU9OKCJUSSBEUzkwVUI5NDktUTEgMTA4MHAgSERNSSB0byBGUEQt
TGluayBJSUkgYnJpZGdlIHNlcmlhbGl6ZXIgZHJpdmVyIik7CitNT0RVTEVfTElDRU5TRSgiR1BM
IHYyIik7Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2Ry
aS1kZXZlbA==
