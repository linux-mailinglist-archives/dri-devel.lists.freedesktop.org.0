Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0BE2425224D
	for <lists+dri-devel@lfdr.de>; Tue, 25 Aug 2020 22:59:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D7DFC6E34A;
	Tue, 25 Aug 2020 20:59:43 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qk1-x742.google.com (mail-qk1-x742.google.com
 [IPv6:2607:f8b0:4864:20::742])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D488E6E34A
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Aug 2020 20:59:42 +0000 (UTC)
Received: by mail-qk1-x742.google.com with SMTP id i20so134082qkk.8
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Aug 2020 13:59:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=poorly.run; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=gWpbLjfXIMHdd8fwDU7yf1xKo/sUKE47uaE3VOxbvGE=;
 b=CW6aDvoZHuBK9lKyA6Fu428tA9GnOzT7Ek+ZWmoBXK2SrIxaTo+ebU5uu90Wxu26sB
 nZ62rUgQUYcLBXLTDkn6HbYXKdDH+/lbOaJGfA3YuIHhqRA1mRiC7F8cgG3VorH+18Ya
 zAcUe+MFjg6y9pWOg02wY3elOK0s1UJNWyBWKkBy5USHFZMr5xvCMf0FWSVAsCEWtw4K
 7gxqjkQ/+d1SCc1RvMfbWMXl3drfDN5ZMcuBbrNWgAkBQ0vQAw9mh1oO2lFHcl5hFMFR
 eN79LhmOCflEAFYa/JKajH0UfMe9p3t4RHlhUCCFe5yKYxAN+9GkSVv3CshJxH3fM5lD
 vPUg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=gWpbLjfXIMHdd8fwDU7yf1xKo/sUKE47uaE3VOxbvGE=;
 b=WgXX/gQKWXMYBQGZM1g6Y+TjxiQCAQvfOkPfj5usAvozLqsFoTi7JMVFc0b7yB1MpD
 Q0sJa/EsZOkFaKn9kBkyrnUMuOco13ZPU+phqYNdqSVkCXB8n5aqxDyN6ZQmnLYBJii2
 R/DQI71TevP5AppOp+JFEt2E1tQgc8zmTTkklsF9NzZgWdzd4b+hPvKAoQCes6mCfZni
 mHopHM+yvbyobA2uY2wrS4wYjxl1d8iEgKBEmxmkY1fvWiglhWH1lCfu8lHCm8lXbYW6
 sVyBqkLJ45M5l7R5NrSYLf/hBeOMwHjRBBRpQCwM241Mm0OQW20uXipLAqwqNO+nVwm8
 /o6w==
X-Gm-Message-State: AOAM5308aN4JXhyjWRHFy5cKxe1b4PCvi/xSUe+MvvzXMF6H2HtoB2N8
 34x47+GvYLw6p9xAcWlZRKJ1+E2AlPTBcA==
X-Google-Smtp-Source: ABdhPJzA+YfBYJDEJRBaQdY5oO9L7HwX1fwjfPQ/ndZhGDLoB8F/4R3AvtzcbnW6LlST6LTUjRKBtA==
X-Received: by 2002:a05:620a:2096:: with SMTP id
 e22mr11265989qka.177.1598389181495; 
 Tue, 25 Aug 2020 13:59:41 -0700 (PDT)
Received: from localhost (mobile-166-170-57-177.mycingular.net.
 [166.170.57.177])
 by smtp.gmail.com with ESMTPSA id z10sm233668qtb.17.2020.08.25.13.59.40
 (version=TLS1_2 cipher=ECDHE-ECDSA-CHACHA20-POLY1305 bits=256/256);
 Tue, 25 Aug 2020 13:59:40 -0700 (PDT)
From: Sean Paul <sean@poorly.run>
To: dri-devel@lists.freedesktop.org, ppaalanen@gmail.com,
 maarten.lankhorst@linux.intel.com, mripard@kernel.org, tzimmermann@suse.de,
 seanpaul@chromium.org, airlied@linux.ie
Subject: [PATCH v6.5 14/14] drm/print: Add tracefs support to the drm logging
 helpers
Date: Tue, 25 Aug 2020 16:59:29 -0400
Message-Id: <20200825205936.38823-1-sean@poorly.run>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200818210510.49730-15-sean@poorly.run>
References: <20200818210510.49730-15-sean@poorly.run>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: daniel.vetter@ffwll.ch, rostedt@goodmis.org, chris@chris-wilson.co.uk
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogU2VhbiBQYXVsIDxzZWFucGF1bEBjaHJvbWl1bS5vcmc+CgpUaGlzIHBhdGNoIGFkZHMg
YSBuZXcgbW9kdWxlIHBhcmFtZXRlciBjYWxsZWQgZHJtLnRyYWNlIHdoaWNoIGFjY2VwdHMKdGhl
IHNhbWUgbWFzayBhcyBkcm0uZGVidWcuIFdoZW4gYSBkZWJ1ZyBjYXRlZ29yeSBpcyBlbmFibGVk
LCBsb2cKbWVzc2FnZXMgd2lsbCBiZSBwdXQgaW4gYSBuZXcgdHJhY2VmcyBpbnN0YW5jZSBjYWxs
ZWQgZHJtIGZvcgpjb25zdW1wdGlvbi4KClVzaW5nIHRoZSBuZXcgdHJhY2VmcyBpbnN0YW5jZSB3
aWxsIGFsbG93IGRpc3Ryb3MgdG8gZW5hYmxlIGRybSBsb2dnaW5nCmluIHByb2R1Y3Rpb24gd2l0
aG91dCBpbXBhY3RpbmcgcGVyZm9ybWFuY2Ugb3Igc3BhbW1pbmcgdGhlIHN5c3RlbQpsb2dzLgoK
Q2M6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+CkNjOiBEYXZpZCBBaXJs
aWUgPGFpcmxpZWRAZ21haWwuY29tPgpDYzogSmFuaSBOaWt1bGEgPGphbmkubmlrdWxhQGxpbnV4
LmludGVsLmNvbT4KQ2M6IEpvb25hcyBMYWh0aW5lbiA8am9vbmFzLmxhaHRpbmVuQGxpbnV4Lmlu
dGVsLmNvbT4KQ2M6IFBla2thIFBhYWxhbmVuIDxwcGFhbGFuZW5AZ21haWwuY29tPgpDYzogUm9i
IENsYXJrIDxyb2JkY2xhcmtAZ21haWwuY29tPgpDYzogU3RldmVuIFJvc3RlZHQgPHJvc3RlZHRA
Z29vZG1pcy5vcmc+CkNjOiBUaG9tYXMgWmltbWVybWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4K
Q2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+CkNjOiBD
aHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KQ2M6IFN0ZXZlbiBSb3N0ZWR0
IDxyb3N0ZWR0QGdvb2RtaXMub3JnPgpSZXBvcnRlZC1ieToga2VybmVsIHRlc3Qgcm9ib3QgPGxr
cEBpbnRlbC5jb20+ICMgd2FybmluZyByZXBvcnRlZCBpbiB2NgpBY2tlZC1ieTogUGVra2EgUGFh
bGFuZW4gPHBla2thLnBhYWxhbmVuQGNvbGxhYm9yYS5jb20+ClNpZ25lZC1vZmYtYnk6IFNlYW4g
UGF1bCA8c2VhbnBhdWxAY2hyb21pdW0ub3JnPgpMaW5rOiBodHRwczovL3BhdGNod29yay5mcmVl
ZGVza3RvcC5vcmcvcGF0Y2gvbXNnaWQvMjAxOTEwMTAyMDQ4MjMuMTk1NTQwLTEtc2VhbkBwb29y
bHkucnVuICN2MQpMaW5rOiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9hcmNoaXZlcy9k
cmktZGV2ZWwvMjAxOS1Ob3ZlbWJlci8yNDMyMzAuaHRtbCAjdjIKTGluazogaHR0cHM6Ly9wYXRj
aHdvcmsuZnJlZWRlc2t0b3Aub3JnL3BhdGNoL21zZ2lkLzIwMTkxMjEyMjAzMzAxLjE0MjQzNy0x
LXNlYW5AcG9vcmx5LnJ1biAjdjMKTGluazogaHR0cHM6Ly9wYXRjaHdvcmsuZnJlZWRlc2t0b3Au
b3JnL3BhdGNoL21zZ2lkLzIwMjAwMTE0MTcyMTU1LjIxNTQ2My0xLXNlYW5AcG9vcmx5LnJ1biAj
djQKTGluazogaHR0cHM6Ly9wYXRjaHdvcmsuZnJlZWRlc2t0b3Aub3JnL3BhdGNoL21zZ2lkLzIw
MjAwNjA4MjEwNTA1LjQ4NTE5LTE0LXNlYW5AcG9vcmx5LnJ1biAjdjUKTGluazogaHR0cHM6Ly9w
YXRjaHdvcmsuZnJlZWRlc2t0b3Aub3JnL3BhdGNoL21zZ2lkLzIwMjAwODE4MjEwNTEwLjQ5NzMw
LTE1LXNlYW5AcG9vcmx5LnJ1biAjdjYKCkNoYW5nZXMgaW4gdjU6Ci1SZS13cml0ZSB0byB1c2Ug
dHJhY2VfYXJyYXkgYW5kIHRoZSB0cmFjZWZzIGluc3RhbmNlIHN1cHBvcnQKQ2hhbmdlcyBpbiB2
NjoKLVVzZSB0aGUgbmV3IHRyYWNlX2FycmF5X2luaXRfcHJpbnRrKCkgdG8gaW5pdGlhbGl6ZSBn
bG9iYWwgdHJhY2UKIGJ1ZmZlcnMKQ2hhbmdlcyBpbiB2Ni41OgotRml4IGtlcm5lbCB0ZXN0IHJv
Ym90IHdhcm5pbmcKLUFkZCBhIHRyYWNlIHByaW50ZiBpbiBfX2RybV9lcnIKLS0tCiBEb2N1bWVu
dGF0aW9uL2dwdS9kcm0tdWFwaS5yc3QgfCAgIDYgKwogZHJpdmVycy9ncHUvZHJtL2RybV9kcnYu
YyAgICAgIHwgICAzICsKIGRyaXZlcnMvZ3B1L2RybS9kcm1fcHJpbnQuYyAgICB8IDIyMyArKysr
KysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0KIGluY2x1ZGUvZHJtL2RybV9wcmludC5oICAg
ICAgICB8ICA2MyArKysrKysrKy0tCiA0IGZpbGVzIGNoYW5nZWQsIDI1NSBpbnNlcnRpb25zKCsp
LCA0MCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9Eb2N1bWVudGF0aW9uL2dwdS9kcm0tdWFw
aS5yc3QgYi9Eb2N1bWVudGF0aW9uL2dwdS9kcm0tdWFwaS5yc3QKaW5kZXggN2RjZTE3NWY2ZDc1
Li4wMjk3ZmY3MWY4ZjggMTAwNjQ0Ci0tLSBhL0RvY3VtZW50YXRpb24vZ3B1L2RybS11YXBpLnJz
dAorKysgYi9Eb2N1bWVudGF0aW9uL2dwdS9kcm0tdWFwaS5yc3QKQEAgLTQyNCw2ICs0MjQsMTIg
QEAgRGVidWdmcyBTdXBwb3J0CiAuLiBrZXJuZWwtZG9jOjogZHJpdmVycy9ncHUvZHJtL2RybV9k
ZWJ1Z2ZzLmMKICAgIDpleHBvcnQ6CiAKK0RSTSBUcmFjaW5nCistLS0tLS0tLS0tLS0tLS0KKwor
Li4ga2VybmVsLWRvYzo6IGRyaXZlcnMvZ3B1L2RybS9kcm1fcHJpbnQuYworICAgOmRvYzogRFJN
IFRyYWNpbmcKKwogU3lzZnMgU3VwcG9ydAogPT09PT09PT09PT09PQogCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vZHJtX2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9kcnYuYwppbmRl
eCAxMzA2OGZkZjQzMzEuLjU1NWI0MDU4MDQ5NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2RybV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2Rydi5jCkBAIC0xMTA3LDEyICsx
MTA3LDE1IEBAIHN0YXRpYyB2b2lkIGRybV9jb3JlX2V4aXQodm9pZCkKIAlkcm1fc3lzZnNfZGVz
dHJveSgpOwogCWlkcl9kZXN0cm95KCZkcm1fbWlub3JzX2lkcik7CiAJZHJtX2Nvbm5lY3Rvcl9p
ZGFfZGVzdHJveSgpOworCWRybV90cmFjZV9jbGVhbnVwKCk7CiB9CiAKIHN0YXRpYyBpbnQgX19p
bml0IGRybV9jb3JlX2luaXQodm9pZCkKIHsKIAlpbnQgcmV0OwogCisJZHJtX3RyYWNlX2luaXQo
KTsKKwogCWRybV9jb25uZWN0b3JfaWRhX2luaXQoKTsKIAlpZHJfaW5pdCgmZHJtX21pbm9yc19p
ZHIpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW50LmMgYi9kcml2ZXJz
L2dwdS9kcm0vZHJtX3ByaW50LmMKaW5kZXggNGQ5ODRhMDFiM2EzLi42NGQ5YTcyNGMyZGYgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fcHJpbnQuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vZHJtX3ByaW50LmMKQEAgLTMxLDYgKzMxLDcgQEAKICNpbmNsdWRlIDxsaW51eC9tb2R1bGVw
YXJhbS5oPgogI2luY2x1ZGUgPGxpbnV4L3NlcV9maWxlLmg+CiAjaW5jbHVkZSA8bGludXgvc2xh
Yi5oPgorI2luY2x1ZGUgPGxpbnV4L3RyYWNlLmg+CiAKICNpbmNsdWRlIDxkcm0vZHJtLmg+CiAj
aW5jbHVkZSA8ZHJtL2RybV9kcnYuaD4KQEAgLTQzLDE3ICs0NCwzNCBAQAogdW5zaWduZWQgaW50
IF9fZHJtX2RlYnVnX3N5c2xvZzsKIEVYUE9SVF9TWU1CT0woX19kcm1fZGVidWdfc3lzbG9nKTsK
IAotTU9EVUxFX1BBUk1fREVTQyhkZWJ1ZywgIkVuYWJsZSBkZWJ1ZyBvdXRwdXQsIHdoZXJlIGVh
Y2ggYml0IGVuYWJsZXMgYSBkZWJ1ZyBjYXRlZ29yeS5cbiIKLSJcdFx0Qml0IDAgKDB4MDEpICB3
aWxsIGVuYWJsZSBDT1JFIG1lc3NhZ2VzIChkcm0gY29yZSBjb2RlKVxuIgotIlx0XHRCaXQgMSAo
MHgwMikgIHdpbGwgZW5hYmxlIERSSVZFUiBtZXNzYWdlcyAoZHJtIGNvbnRyb2xsZXIgY29kZSlc
biIKLSJcdFx0Qml0IDIgKDB4MDQpICB3aWxsIGVuYWJsZSBLTVMgbWVzc2FnZXMgKG1vZGVzZXR0
aW5nIGNvZGUpXG4iCi0iXHRcdEJpdCAzICgweDA4KSAgd2lsbCBlbmFibGUgUFJJTUUgbWVzc2Fn
ZXMgKHByaW1lIGNvZGUpXG4iCi0iXHRcdEJpdCA0ICgweDEwKSAgd2lsbCBlbmFibGUgQVRPTUlD
IG1lc3NhZ2VzIChhdG9taWMgY29kZSlcbiIKLSJcdFx0Qml0IDUgKDB4MjApICB3aWxsIGVuYWJs
ZSBWQkwgbWVzc2FnZXMgKHZibGFuayBjb2RlKVxuIgotIlx0XHRCaXQgNyAoMHg4MCkgIHdpbGwg
ZW5hYmxlIExFQVNFIG1lc3NhZ2VzIChsZWFzaW5nIGNvZGUpXG4iCi0iXHRcdEJpdCA4ICgweDEw
MCkgd2lsbCBlbmFibGUgRFAgbWVzc2FnZXMgKGRpc3BsYXlwb3J0IGNvZGUpIik7CisvKgorICog
X19kcm1fZGVidWdfdHJhY2U6IEVuYWJsZSBkZWJ1ZyBvdXRwdXQgaW4gZHJtIHRyYWNpbmcgaW5z
dGFuY2UuCisgKiBCaXRtYXNrIG9mIERSTV9VVF94LiBTZWUgaW5jbHVkZS9kcm0vZHJtX3ByaW50
LmggZm9yIGRldGFpbHMuCisgKi8KK3Vuc2lnbmVkIGludCBfX2RybV9kZWJ1Z190cmFjZTsKK0VY
UE9SVF9TWU1CT0woX19kcm1fZGVidWdfdHJhY2UpOworCisjZGVmaW5lIERFQlVHX1BBUk1fREVT
Qyhkc3QpIFwKKyJFbmFibGUgZGVidWcgb3V0cHV0IHRvICIgZHN0ICIsIHdoZXJlIGVhY2ggYml0
IGVuYWJsZXMgYSBkZWJ1ZyBjYXRlZ29yeS5cbiIgXAorIlx0XHRCaXQgMCAoMHgwMSkgIHdpbGwg
ZW5hYmxlIENPUkUgbWVzc2FnZXMgKGRybSBjb3JlIGNvZGUpXG4iIFwKKyJcdFx0Qml0IDEgKDB4
MDIpICB3aWxsIGVuYWJsZSBEUklWRVIgbWVzc2FnZXMgKGRybSBjb250cm9sbGVyIGNvZGUpXG4i
IFwKKyJcdFx0Qml0IDIgKDB4MDQpICB3aWxsIGVuYWJsZSBLTVMgbWVzc2FnZXMgKG1vZGVzZXR0
aW5nIGNvZGUpXG4iIFwKKyJcdFx0Qml0IDMgKDB4MDgpICB3aWxsIGVuYWJsZSBQUklNRSBtZXNz
YWdlcyAocHJpbWUgY29kZSlcbiIgXAorIlx0XHRCaXQgNCAoMHgxMCkgIHdpbGwgZW5hYmxlIEFU
T01JQyBtZXNzYWdlcyAoYXRvbWljIGNvZGUpXG4iIFwKKyJcdFx0Qml0IDUgKDB4MjApICB3aWxs
IGVuYWJsZSBWQkwgbWVzc2FnZXMgKHZibGFuayBjb2RlKVxuIiBcCisiXHRcdEJpdCA3ICgweDgw
KSAgd2lsbCBlbmFibGUgTEVBU0UgbWVzc2FnZXMgKGxlYXNpbmcgY29kZSlcbiIgXAorIlx0XHRC
aXQgOCAoMHgxMDApIHdpbGwgZW5hYmxlIERQIG1lc3NhZ2VzIChkaXNwbGF5cG9ydCBjb2RlKSIK
KworTU9EVUxFX1BBUk1fREVTQyhkZWJ1ZywgREVCVUdfUEFSTV9ERVNDKCJzeXNsb2ciKSk7CiBt
b2R1bGVfcGFyYW1fbmFtZWQoZGVidWcsIF9fZHJtX2RlYnVnX3N5c2xvZywgaW50LCAwNjAwKTsK
IAorTU9EVUxFX1BBUk1fREVTQyh0cmFjZSwgREVCVUdfUEFSTV9ERVNDKCJ0cmFjZWZzIikpOwor
bW9kdWxlX3BhcmFtX25hbWVkKHRyYWNlLCBfX2RybV9kZWJ1Z190cmFjZSwgaW50LCAwNjAwKTsK
KworI2lmZGVmIENPTkZJR19UUkFDSU5HCitzdHJ1Y3QgdHJhY2VfYXJyYXkgKnRyYWNlX2FycjsK
KyNlbmRpZgorCiB2b2lkIF9fZHJtX3B1dHNfY29yZWR1bXAoc3RydWN0IGRybV9wcmludGVyICpw
LCBjb25zdCBjaGFyICpzdHIpCiB7CiAJc3RydWN0IGRybV9wcmludF9pdGVyYXRvciAqaXRlcmF0
b3IgPSBwLT5hcmc7CkBAIC0xNjYsNiArMTg0LDIwIEBAIHZvaWQgX19kcm1fcHJpbnRmbl9kZWJ1
Z19zeXNsb2coc3RydWN0IGRybV9wcmludGVyICpwLCBzdHJ1Y3QgdmFfZm9ybWF0ICp2YWYpCiB9
CiBFWFBPUlRfU1lNQk9MKF9fZHJtX3ByaW50Zm5fZGVidWdfc3lzbG9nKTsKIAordm9pZCBfX2Ry
bV9wcmludGZuX3RyYWNlKHN0cnVjdCBkcm1fcHJpbnRlciAqcCwgc3RydWN0IHZhX2Zvcm1hdCAq
dmFmKQoreworCWRybV90cmFjZV9wcmludGYoIiVzICVwViIsIHAtPnByZWZpeCwgdmFmKTsKK30K
K0VYUE9SVF9TWU1CT0woX19kcm1fcHJpbnRmbl90cmFjZSk7CisKK3ZvaWQgX19kcm1fcHJpbnRm
bl9kZWJ1Z19zeXNsb2dfYW5kX3RyYWNlKHN0cnVjdCBkcm1fcHJpbnRlciAqcCwKKwkJCQkJICAg
c3RydWN0IHZhX2Zvcm1hdCAqdmFmKQoreworCXByX2RlYnVnKCIlcyAlcFYiLCBwLT5wcmVmaXgs
IHZhZik7CisJZHJtX3RyYWNlX3ByaW50ZigiJXMgJXBWIiwgcC0+cHJlZml4LCB2YWYpOworfQor
RVhQT1JUX1NZTUJPTChfX2RybV9wcmludGZuX2RlYnVnX3N5c2xvZ19hbmRfdHJhY2UpOworCiB2
b2lkIF9fZHJtX3ByaW50Zm5fZXJyKHN0cnVjdCBkcm1fcHJpbnRlciAqcCwgc3RydWN0IHZhX2Zv
cm1hdCAqdmFmKQogewogCXByX2VycigiKkVSUk9SKiAlcyAlcFYiLCBwLT5wcmVmaXgsIHZhZik7
CkBAIC0yNDYsNiArMjc4LDE0IEBAIHZvaWQgZHJtX2Rldl9wcmludGsoY29uc3Qgc3RydWN0IGRl
dmljZSAqZGV2LCBjb25zdCBjaGFyICpsZXZlbCwKIAlzdHJ1Y3QgdmFfZm9ybWF0IHZhZjsKIAl2
YV9saXN0IGFyZ3M7CiAKKwl2YV9zdGFydChhcmdzLCBmb3JtYXQpOworCXZhZi5mbXQgPSBmb3Jt
YXQ7CisJdmFmLnZhID0gJmFyZ3M7CisJZHJtX3RyYWNlX3ByaW50ZigiJXMlc1siIERSTV9OQU1F
ICI6JXBzXSAlcFYiLAorCQkJIGRldiA/IGRldl9uYW1lKGRldikgOiAiIixkZXYgPyAiICIgOiAi
IiwKKwkJCSBfX2J1aWx0aW5fcmV0dXJuX2FkZHJlc3MoMCksICZ2YWYpOworCXZhX2VuZChhcmdz
KTsKKwogCXZhX3N0YXJ0KGFyZ3MsIGZvcm1hdCk7CiAJdmFmLmZtdCA9IGZvcm1hdDsKIAl2YWYu
dmEgPSAmYXJnczsKQEAgLTI2NywyMSArMzA3LDMwIEBAIHZvaWQgZHJtX2Rldl9kYmcoY29uc3Qg
c3RydWN0IGRldmljZSAqZGV2LCBlbnVtIGRybV9kZWJ1Z19jYXRlZ29yeSBjYXRlZ29yeSwKIAlz
dHJ1Y3QgdmFfZm9ybWF0IHZhZjsKIAl2YV9saXN0IGFyZ3M7CiAKLQlpZiAoIWRybV9kZWJ1Z19l
bmFibGVkKGNhdGVnb3J5KSkKLQkJcmV0dXJuOworCWlmIChkcm1fZGVidWdfc3lzbG9nX2VuYWJs
ZWQoY2F0ZWdvcnkpKSB7CisJCXZhX3N0YXJ0KGFyZ3MsIGZvcm1hdCk7CisJCXZhZi5mbXQgPSBm
b3JtYXQ7CisJCXZhZi52YSA9ICZhcmdzOwogCi0JdmFfc3RhcnQoYXJncywgZm9ybWF0KTsKLQl2
YWYuZm10ID0gZm9ybWF0OwotCXZhZi52YSA9ICZhcmdzOworCQlpZiAoZGV2KQorCQkJZGV2X3By
aW50ayhLRVJOX0RFQlVHLCBkZXYsICJbIiBEUk1fTkFNRSAiOiVwc10gJXBWIiwKKwkJCQlfX2J1
aWx0aW5fcmV0dXJuX2FkZHJlc3MoMCksICZ2YWYpOworCQllbHNlCisJCQlwcmludGsoS0VSTl9E
RUJVRyAiWyIgRFJNX05BTUUgIjolcHNdICVwViIsCisJCQlfX2J1aWx0aW5fcmV0dXJuX2FkZHJl
c3MoMCksICZ2YWYpOwogCi0JaWYgKGRldikKLQkJZGV2X3ByaW50ayhLRVJOX0RFQlVHLCBkZXYs
ICJbIiBEUk1fTkFNRSAiOiVwc10gJXBWIiwKLQkJCSAgIF9fYnVpbHRpbl9yZXR1cm5fYWRkcmVz
cygwKSwgJnZhZik7Ci0JZWxzZQotCQlwcmludGsoS0VSTl9ERUJVRyAiWyIgRFJNX05BTUUgIjol
cHNdICVwViIsCi0JCSAgICAgICBfX2J1aWx0aW5fcmV0dXJuX2FkZHJlc3MoMCksICZ2YWYpOwor
CQl2YV9lbmQoYXJncyk7CisJfQogCi0JdmFfZW5kKGFyZ3MpOworCWlmIChkcm1fZGVidWdfdHJh
Y2VfZW5hYmxlZChjYXRlZ29yeSkpIHsKKwkJdmFfc3RhcnQoYXJncywgZm9ybWF0KTsKKwkJdmFm
LmZtdCA9IGZvcm1hdDsKKwkJdmFmLnZhID0gJmFyZ3M7CisJCWRybV90cmFjZV9wcmludGYoIiVz
JXNbIiBEUk1fTkFNRSAiOiVwc10gJXBWIiwKKwkJCQkgZGV2ID8gZGV2X25hbWUoZGV2KSA6ICIi
LCBkZXYgPyAiICIgOiAiIiwKKwkJCQkgX19idWlsdGluX3JldHVybl9hZGRyZXNzKDApLCAmdmFm
KTsKKwkJdmFfZW5kKGFyZ3MpOworCX0KIH0KIEVYUE9SVF9TWU1CT0woZHJtX2Rldl9kYmcpOwog
CkBAIC0yOTAsMTcgKzMzOSwyNSBAQCB2b2lkIF9fZHJtX2RiZyhlbnVtIGRybV9kZWJ1Z19jYXRl
Z29yeSBjYXRlZ29yeSwgY29uc3QgY2hhciAqZm9ybWF0LCAuLi4pCiAJc3RydWN0IHZhX2Zvcm1h
dCB2YWY7CiAJdmFfbGlzdCBhcmdzOwogCi0JaWYgKCFkcm1fZGVidWdfZW5hYmxlZChjYXRlZ29y
eSkpCi0JCXJldHVybjsKKwlpZiAoZHJtX2RlYnVnX3N5c2xvZ19lbmFibGVkKGNhdGVnb3J5KSkg
eworCQl2YV9zdGFydChhcmdzLCBmb3JtYXQpOworCQl2YWYuZm10ID0gZm9ybWF0OworCQl2YWYu
dmEgPSAmYXJnczsKIAotCXZhX3N0YXJ0KGFyZ3MsIGZvcm1hdCk7Ci0JdmFmLmZtdCA9IGZvcm1h
dDsKLQl2YWYudmEgPSAmYXJnczsKKwkJcHJpbnRrKEtFUk5fREVCVUcgIlsiIERSTV9OQU1FICI6
JXBzXSAlcFYiLAorCQlfX2J1aWx0aW5fcmV0dXJuX2FkZHJlc3MoMCksICZ2YWYpOwogCi0JcHJp
bnRrKEtFUk5fREVCVUcgIlsiIERSTV9OQU1FICI6JXBzXSAlcFYiLAotCSAgICAgICBfX2J1aWx0
aW5fcmV0dXJuX2FkZHJlc3MoMCksICZ2YWYpOworCQl2YV9lbmQoYXJncyk7CisJfQogCi0JdmFf
ZW5kKGFyZ3MpOworCWlmIChkcm1fZGVidWdfdHJhY2VfZW5hYmxlZChjYXRlZ29yeSkpIHsKKwkJ
dmFfc3RhcnQoYXJncywgZm9ybWF0KTsKKwkJdmFmLmZtdCA9IGZvcm1hdDsKKwkJdmFmLnZhID0g
JmFyZ3M7CisJCWRybV90cmFjZV9wcmludGYoIlsiIERSTV9OQU1FICI6JXBzXSAlcFYiLAorCQkJ
CSBfX2J1aWx0aW5fcmV0dXJuX2FkZHJlc3MoMCksICZ2YWYpOworCQl2YV9lbmQoYXJncyk7CisJ
fQogfQogRVhQT1JUX1NZTUJPTChfX2RybV9kYmcpOwogCkBAIC0zMTcsNiArMzc0LDEzIEBAIHZv
aWQgX19kcm1fZXJyKGNvbnN0IGNoYXIgKmZvcm1hdCwgLi4uKQogCSAgICAgICBfX2J1aWx0aW5f
cmV0dXJuX2FkZHJlc3MoMCksICZ2YWYpOwogCiAJdmFfZW5kKGFyZ3MpOworCisJdmFfc3RhcnQo
YXJncywgZm9ybWF0KTsKKwl2YWYuZm10ID0gZm9ybWF0OworCXZhZi52YSA9ICZhcmdzOworCWRy
bV90cmFjZV9wcmludGYoIlsiIERSTV9OQU1FICI6JXBzXSAqRVJST1IqICVwViIsCisJCQkJX19i
dWlsdGluX3JldHVybl9hZGRyZXNzKDApLCAmdmFmKTsKKwl2YV9lbmQoYXJncyk7CiB9CiBFWFBP
UlRfU1lNQk9MKF9fZHJtX2Vycik7CiAKQEAgLTM0NywzICs0MTEsMTA0IEBAIHZvaWQgZHJtX3By
aW50X3JlZ3NldDMyKHN0cnVjdCBkcm1fcHJpbnRlciAqcCwgc3RydWN0IGRlYnVnZnNfcmVnc2V0
MzIgKnJlZ3NldCkKIAl9CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9wcmludF9yZWdzZXQzMik7CisK
KworLyoqCisgKiBET0M6IERSTSBUcmFjaW5nCisgKgorICogKnRsO2RyKiBEUk0gdHJhY2luZyBp
cyBhIGxpZ2h0d2VpZ2h0IGFsdGVybmF0aXZlIHRvIHRyYWRpdGlvbmFsIERSTSBkZWJ1ZworICog
bG9nZ2luZy4KKyAqCisgKiBXaGlsZSBEUk0gbG9nZ2luZyBpcyBxdWl0ZSBjb252ZW5pZW50IHdo
ZW4gcmVwcm9kdWNpbmcgYSBzcGVjaWZpYyBpc3N1ZSwgaXQKKyAqIGRvZXNuJ3QgaGVscCB3aGVu
IHNvbWV0aGluZyBnb2VzIHdyb25nIHVuZXhwZWN0ZWRseS4gVGhlcmUgYXJlIGEgY291cGxlCisg
KiByZWFzb25zIHdoeSBvbmUgZG9lcyBub3Qgd2FudCB0byBlbmFibGUgRFJNIGxvZ2dpbmcgYXQg
YWxsIHRpbWVzOgorICoKKyAqIDEuIFdlIGRvbid0IHdhbnQgdG8gb3ZlcndoZWxtIHN5c2xvZyB3
aXRoIGRybSBzcGFtLCBvdGhlcnMgaGF2ZSB0byB1c2UgaXQgdG9vCisgKiAyLiBDb25zb2xlIGxv
Z2dpbmcgaXMgc2xvdworICoKKyAqIERSTSB0cmFjaW5nIGFpbXMgdG8gc29sdmUgYm90aCB0aGVz
ZSBwcm9ibGVtcy4KKyAqCisgKiBUbyB1c2UgRFJNIHRyYWNpbmcsIHNldCB0aGUgZHJtLnRyYWNl
IG1vZHVsZSBwYXJhbWV0ZXIgKHZpYSBjbWRsaW5lIG9yIHN5c2ZzKQorICogdG8gYSBEUk0gZGVi
dWcgY2F0ZWdvcnkgbWFzayAodGhpcyBpcyBhIGJpdG1hc2sgb2YgJmRybV9kZWJ1Z19jYXRlZ29y
eQorICogdmFsdWVzKToKKyAqIDo6CisgKgorICogICAgZWc6IGVjaG8gMHgxMDYgPiAvc3lzL21v
ZHVsZS9kcm0vcGFyYW1ldGVycy90cmFjZQorICoKKyAqIE9uY2UgYWN0aXZlLCBhbGwgbG9nIG1l
c3NhZ2VzIGluIHRoZSBzcGVjaWZpZWQgY2F0ZWdvcmllcyB3aWxsIGJlIHdyaXR0ZW4gdG8KKyAq
IHRoZSBEUk0gdHJhY2UuIE9uY2UgYXQgY2FwYWNpdHksIHRoZSB0cmFjZSB3aWxsIG92ZXJ3cml0
ZSBvbGQgbWVzc2FnZXMgd2l0aAorICogbmV3IG9uZXMuIEF0IGFueSBwb2ludCwgb25lIGNhbiBy
ZWFkIHRoZSB0cmFjZSBmaWxlIHRvIGV4dHJhY3QgdGhlIHByZXZpb3VzIE4KKyAqIERSTSBtZXNz
YWdlczoKKyAqIDo6CisgKgorICogICAgZWc6IGNhdCAvc3lzL2tlcm5lbC90cmFjaW5nL2luc3Rh
bmNlcy9kcm0vdHJhY2UKKyAqCisgKiBDb25zaWRlcmF0aW9ucworICogKioqKioqKioqKioqKioK
KyAqIFRoZSB0cmFjZSBpcyBzdWJzeXN0ZW0gd2lkZSwgc28gaWYgeW91IGhhdmUgbXVsdGlwbGUg
ZGV2aWNlcyBhY3RpdmUsIHRoZXkKKyAqIHdpbGwgYmUgYWRkaW5nIGxvZ3MgdG8gdGhlIHNhbWUg
dHJhY2UuCisgKgorICogVGhlIGNvbnRlbnRzIG9mIHRoZSBEUk0gVHJhY2UgYXJlICoqbm90Kiog
Y29uc2lkZXJlZCBVQUJJLiAqKkRPIE5PVCBkZXBlbmQgb24KKyAqIHRoZSB2YWx1ZXMgb2YgdGhl
c2UgdHJhY2VzIGluIHlvdXIgdXNlcnNwYWNlLioqIFRoZXNlIHRyYWNlcyBhcmUgaW50ZW5kZWQg
Zm9yCisgKiBlbnRlcnRhaW5tZW50IHB1cnBvc2VzIG9ubHkuIFRoZSBjb250ZW50cyBvZiB0aGVz
ZSBsb2dzIGNhcnJ5IG5vIHdhcnJhbnR5LAorICogZXhwcmVzc2VkIG9yIGltcGxpZWQuCisgKi8K
KworCisjaWZkZWYgQ09ORklHX1RSQUNJTkcKKworLyoqCisgKiBkcm1fdHJhY2VfaW5pdCAtIGlu
aXRpYWxpemVzIHRoZSBkcm0gdHJhY2UgYXJyYXkKKyAqCisgKiBUaGlzIGZ1bmN0aW9uIGZldGNo
ZXMgKG9yIGNyZWF0ZXMpIHRoZSBkcm0gdHJhY2UgYXJyYXkuIFRoaXMgc2hvdWxkIGJlIGNhbGxl
ZAorICogb25jZSBvbiBkcm0gc3Vic3lzdGVtIGNyZWF0aW9uIGFuZCBtYXRjaGVkIHdpdGggZHJt
X3RyYWNlX2NsZWFudXAoKS4KKyAqLwordm9pZCBkcm1fdHJhY2VfaW5pdCh2b2lkKQoreworCWlu
dCByZXQ7CisKKwl0cmFjZV9hcnIgPSB0cmFjZV9hcnJheV9nZXRfYnlfbmFtZSgiZHJtIik7CisJ
aWYgKCF0cmFjZV9hcnIpCisJCXJldHVybjsKKworCXJldCA9IHRyYWNlX2FycmF5X2luaXRfcHJp
bnRrKHRyYWNlX2Fycik7CisJaWYgKHJldCkKKwkJZHJtX3RyYWNlX2NsZWFudXAoKTsKK30KK0VY
UE9SVF9TWU1CT0woZHJtX3RyYWNlX2luaXQpOworCisvKioKKyAqIGRybV90cmFjZV9wcmludGYg
LSBhZGRzIGFuIGVudHJ5IHRvIHRoZSBkcm0gdHJhY2VmcyBpbnN0YW5jZQorICogQGZvcm1hdDog
cHJpbnRmIGZvcm1hdCBvZiB0aGUgbWVzc2FnZSB0byBhZGQgdG8gdGhlIHRyYWNlCisgKgorICog
VGhpcyBmdW5jdGlvbiBhZGRzIGEgbmV3IGVudHJ5IGluIHRoZSBkcm0gdHJhY2VmcyBpbnN0YW5j
ZQorICovCit2b2lkIGRybV90cmFjZV9wcmludGYoY29uc3QgY2hhciAqZm9ybWF0LCAuLi4pCit7
CisJc3RydWN0IHZhX2Zvcm1hdCB2YWY7CisJdmFfbGlzdCBhcmdzOworCisJdmFfc3RhcnQoYXJn
cywgZm9ybWF0KTsKKwl2YWYuZm10ID0gZm9ybWF0OworCXZhZi52YSA9ICZhcmdzOworCXRyYWNl
X2FycmF5X3ByaW50ayh0cmFjZV9hcnIsIF9USElTX0lQXywgIiVwViIsICZ2YWYpOworCXZhX2Vu
ZChhcmdzKTsKK30KKworLyoqCisgKiBkcm1fdHJhY2VfY2xlYW51cCAtIGRlc3Ryb3lzIHRoZSBk
cm0gdHJhY2UgYXJyYXkKKyAqCisgKiBUaGlzIGZ1bmN0aW9uIGRlc3Ryb3lzIHRoZSBkcm0gdHJh
Y2UgYXJyYXkgY3JlYXRlZCB3aXRoIGRybV90cmFjZV9pbml0LiBUaGlzCisgKiBzaG91bGQgYmUg
Y2FsbGVkIG9uY2Ugb24gZHJtIHN1YnN5c3RlbSBjbG9zZSBhbmQgbWF0Y2hlZCB3aXRoCisgKiBk
cm1fdHJhY2VfaW5pdCgpLgorICovCit2b2lkIGRybV90cmFjZV9jbGVhbnVwKHZvaWQpCit7CisJ
aWYgKHRyYWNlX2FycikgeworCQl0cmFjZV9hcnJheV9wdXQodHJhY2VfYXJyKTsKKwkJdHJhY2Vf
YXJyYXlfZGVzdHJveSh0cmFjZV9hcnIpOworCQl0cmFjZV9hcnIgPSBOVUxMOworCX0KK30KK0VY
UE9SVF9TWU1CT0woZHJtX3RyYWNlX2NsZWFudXApOworI2VuZGlmClwgTm8gbmV3bGluZSBhdCBl
bmQgb2YgZmlsZQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX3ByaW50LmggYi9pbmNsdWRl
L2RybS9kcm1fcHJpbnQuaAppbmRleCA4OTg3Yjk4YmJmZGEuLjI4NGY3ZDMyNTA1NiAxMDA2NDQK
LS0tIGEvaW5jbHVkZS9kcm0vZHJtX3ByaW50LmgKKysrIGIvaW5jbHVkZS9kcm0vZHJtX3ByaW50
LmgKQEAgLTM2LDEyICszNiwxMyBAQAogCiAvKiBEbyAqbm90KiB1c2Ugb3V0c2lkZSBvZiBkcm1f
cHJpbnQuW2NoXSEgKi8KIGV4dGVybiB1bnNpZ25lZCBpbnQgX19kcm1fZGVidWdfc3lzbG9nOwor
ZXh0ZXJuIHVuc2lnbmVkIGludCBfX2RybV9kZWJ1Z190cmFjZTsKIAogLyoqCiAgKiBET0M6IHBy
aW50CiAgKgogICogQSBzaW1wbGUgd3JhcHBlciBmb3IgZGV2X3ByaW50aygpLCBzZXFfcHJpbnRm
KCksIGV0Yy4gIEFsbG93cyBzYW1lCi0gKiBkZWJ1ZyBjb2RlIHRvIGJlIHVzZWQgZm9yIGJvdGgg
ZGVidWdmcyBhbmQgcHJpbnRrIGxvZ2dpbmcuCisgKiBkZWJ1ZyBjb2RlIHRvIGJlIHVzZWQgZm9y
IGRlYnVnZnMsIHByaW50ayBhbmQgdHJhY2VmcyBsb2dnaW5nLgogICoKICAqIEZvciBleGFtcGxl
OjoKICAqCkBAIC04Niw2ICs4Nyw5IEBAIHZvaWQgX19kcm1fcHJpbnRmbl9zZXFfZmlsZShzdHJ1
Y3QgZHJtX3ByaW50ZXIgKnAsIHN0cnVjdCB2YV9mb3JtYXQgKnZhZik7CiB2b2lkIF9fZHJtX3B1
dHNfc2VxX2ZpbGUoc3RydWN0IGRybV9wcmludGVyICpwLCBjb25zdCBjaGFyICpzdHIpOwogdm9p
ZCBfX2RybV9wcmludGZuX2luZm8oc3RydWN0IGRybV9wcmludGVyICpwLCBzdHJ1Y3QgdmFfZm9y
bWF0ICp2YWYpOwogdm9pZCBfX2RybV9wcmludGZuX2RlYnVnX3N5c2xvZyhzdHJ1Y3QgZHJtX3By
aW50ZXIgKnAsIHN0cnVjdCB2YV9mb3JtYXQgKnZhZik7Cit2b2lkIF9fZHJtX3ByaW50Zm5fdHJh
Y2Uoc3RydWN0IGRybV9wcmludGVyICpwLCBzdHJ1Y3QgdmFfZm9ybWF0ICp2YWYpOwordm9pZCBf
X2RybV9wcmludGZuX2RlYnVnX3N5c2xvZ19hbmRfdHJhY2Uoc3RydWN0IGRybV9wcmludGVyICpw
LAorCQkJCQkgICBzdHJ1Y3QgdmFfZm9ybWF0ICp2YWYpOwogdm9pZCBfX2RybV9wcmludGZuX2Vy
cihzdHJ1Y3QgZHJtX3ByaW50ZXIgKnAsIHN0cnVjdCB2YV9mb3JtYXQgKnZhZik7CiB2b2lkIF9f
ZHJtX3ByaW50Zm5fbm9vcChzdHJ1Y3QgZHJtX3ByaW50ZXIgKnAsIHN0cnVjdCB2YV9mb3JtYXQg
KnZhZik7CiAKQEAgLTIxOSw3ICsyMjMsOCBAQCBzdGF0aWMgaW5saW5lIHN0cnVjdCBkcm1fcHJp
bnRlciBkcm1faW5mb19wcmludGVyKHN0cnVjdCBkZXZpY2UgKmRldikKIH0KIAogLyoqCi0gKiBk
cm1fZGVidWdfcHJpbnRlciAtIGNvbnN0cnVjdCBhICZkcm1fcHJpbnRlciB0aGF0IG91dHB1dHMg
dG8gcHJfZGVidWcoKQorICogZHJtX2RlYnVnX3ByaW50ZXIgLSBjb25zdHJ1Y3QgYSAmZHJtX3By
aW50ZXIgdGhhdCBvdXRwdXRzIHRvIHByX2RlYnVnKCkgYW5kCisgKiBkcm0gdHJhY2VmcwogICog
QHByZWZpeDogZGVidWcgb3V0cHV0IHByZWZpeAogICoKICAqIFJFVFVSTlM6CkBAIC0yMjgsNyAr
MjMzLDcgQEAgc3RhdGljIGlubGluZSBzdHJ1Y3QgZHJtX3ByaW50ZXIgZHJtX2luZm9fcHJpbnRl
cihzdHJ1Y3QgZGV2aWNlICpkZXYpCiBzdGF0aWMgaW5saW5lIHN0cnVjdCBkcm1fcHJpbnRlciBk
cm1fZGVidWdfcHJpbnRlcihjb25zdCBjaGFyICpwcmVmaXgpCiB7CiAJc3RydWN0IGRybV9wcmlu
dGVyIHAgPSB7Ci0JCS5wcmludGZuID0gX19kcm1fcHJpbnRmbl9kZWJ1Z19zeXNsb2csCisJCS5w
cmludGZuID0gX19kcm1fcHJpbnRmbl9kZWJ1Z19zeXNsb2dfYW5kX3RyYWNlLAogCQkucHJlZml4
ID0gcHJlZml4CiAJfTsKIAlyZXR1cm4gcDsKQEAgLTI1NCwxNCArMjU5LDE0IEBAIHN0YXRpYyBp
bmxpbmUgc3RydWN0IGRybV9wcmludGVyIGRybV9lcnJfcHJpbnRlcihjb25zdCBjaGFyICpwcmVm
aXgpCiAgKiBlbnVtIGRybV9kZWJ1Z19jYXRlZ29yeSAtIFRoZSBEUk0gZGVidWcgY2F0ZWdvcmll
cwogICoKICAqIEVhY2ggb2YgdGhlIERSTSBkZWJ1ZyBsb2dnaW5nIG1hY3JvcyB1c2UgYSBzcGVj
aWZpYyBjYXRlZ29yeSwgYW5kIHRoZSBsb2dnaW5nCi0gKiBpcyBmaWx0ZXJlZCBieSB0aGUgZHJt
LmRlYnVnIG1vZHVsZSBwYXJhbWV0ZXIuIFRoaXMgZW51bSBzcGVjaWZpZXMgdGhlIHZhbHVlcwot
ICogZm9yIHRoZSBpbnRlcmZhY2UuCisgKiBpcyBmaWx0ZXJlZCBieSB0aGUgZHJtLmRlYnVnIGFu
ZCBkcm0udHJhY2UgbW9kdWxlIHBhcmFtZXRlcnMuIFRoaXMgZW51bQorICogc3BlY2lmaWVzIHRo
ZSB2YWx1ZXMgZm9yIHRoZSBpbnRlcmZhY2UuCiAgKgogICogRWFjaCBEUk1fREVCVUdfPENBVEVH
T1JZPiBtYWNybyBsb2dzIHRvIERSTV9VVF88Q0FURUdPUlk+IGNhdGVnb3J5LCBleGNlcHQKICAq
IERSTV9ERUJVRygpIGxvZ3MgdG8gRFJNX1VUX0NPUkUuCiAgKgotICogRW5hYmxpbmcgdmVyYm9z
ZSBkZWJ1ZyBtZXNzYWdlcyBpcyBkb25lIHRocm91Z2ggdGhlIGRybS5kZWJ1ZyBwYXJhbWV0ZXIs
IGVhY2gKLSAqIGNhdGVnb3J5IGJlaW5nIGVuYWJsZWQgYnkgYSBiaXQ6CisgKiBFbmFibGluZyB2
ZXJib3NlIGRlYnVnIG1lc3NhZ2VzIGlzIGRvbmUgdGhyb3VnaCB0aGUgZHJtLmRlYnVnIGFuZCBk
cm0udHJhY2UKKyAqIHBhcmFtZXRlcnMsIGVhY2ggY2F0ZWdvcnkgYmVpbmcgZW5hYmxlZCBieSBh
IGJpdDoKICAqCiAgKiAgLSBkcm0uZGVidWc9MHgxIHdpbGwgZW5hYmxlIENPUkUgbWVzc2FnZXMK
ICAqICAtIGRybS5kZWJ1Zz0weDIgd2lsbCBlbmFibGUgRFJJVkVSIG1lc3NhZ2VzCkBAIC0yNzAs
MTAgKzI3NSwxNCBAQCBzdGF0aWMgaW5saW5lIHN0cnVjdCBkcm1fcHJpbnRlciBkcm1fZXJyX3By
aW50ZXIoY29uc3QgY2hhciAqcHJlZml4KQogICogIC0gZHJtLmRlYnVnPTB4MWZmIHdpbGwgZW5h
YmxlIGFsbCBtZXNzYWdlcwogICoKICAqIEFuIGludGVyZXN0aW5nIGZlYXR1cmUgaXMgdGhhdCBp
dCdzIHBvc3NpYmxlIHRvIGVuYWJsZSB2ZXJib3NlIGxvZ2dpbmcgYXQKLSAqIHJ1bi10aW1lIGJ5
IGVjaG9pbmcgdGhlIGRlYnVnIHZhbHVlIGluIGl0cyBzeXNmcyBub2RlOjoKKyAqIHJ1bi10aW1l
IGJ5IGVjaG9pbmcgdGhlIGRlYnVnIGNhdGVnb3J5IHZhbHVlIGluIGl0cyBzeXNmcyBub2RlOjoK
ICAqCisgKiAgICMgRm9yIHN5c2xvZyBsb2dnaW5nOgogICogICAjIGVjaG8gMHhmID4gL3N5cy9t
b2R1bGUvZHJtL3BhcmFtZXRlcnMvZGVidWcKICAqCisgKiAgICMgRm9yIHRyYWNlZnMgbG9nZ2lu
ZzoKKyAqICAgIyBlY2hvIDB4ZiA+IC9zeXMvbW9kdWxlL2RybS9wYXJhbWV0ZXJzL3RyYWNlCisg
KgogICovCiBlbnVtIGRybV9kZWJ1Z19jYXRlZ29yeSB7CiAJLyoqCkBAIC0zMjUsMTQgKzMzNCwy
MCBAQCBzdGF0aWMgaW5saW5lIGJvb2wgZHJtX2RlYnVnX3N5c2xvZ19lbmFibGVkKGVudW0gZHJt
X2RlYnVnX2NhdGVnb3J5IGNhdGVnb3J5KQogCXJldHVybiB1bmxpa2VseShfX2RybV9kZWJ1Z19z
eXNsb2cgJiBjYXRlZ29yeSk7CiB9CiAKK3N0YXRpYyBpbmxpbmUgYm9vbCBkcm1fZGVidWdfdHJh
Y2VfZW5hYmxlZChlbnVtIGRybV9kZWJ1Z19jYXRlZ29yeSBjYXRlZ29yeSkKK3sKKwlyZXR1cm4g
dW5saWtlbHkoX19kcm1fZGVidWdfdHJhY2UgJiBjYXRlZ29yeSk7Cit9CisKIHN0YXRpYyBpbmxp
bmUgYm9vbCBkcm1fZGVidWdfZW5hYmxlZChlbnVtIGRybV9kZWJ1Z19jYXRlZ29yeSBjYXRlZ29y
eSkKIHsKLQlyZXR1cm4gZHJtX2RlYnVnX3N5c2xvZ19lbmFibGVkKGNhdGVnb3J5KTsKKwlyZXR1
cm4gZHJtX2RlYnVnX3N5c2xvZ19lbmFibGVkKGNhdGVnb3J5KSB8fAorCSAgICAgICBkcm1fZGVi
dWdfdHJhY2VfZW5hYmxlZChjYXRlZ29yeSk7CiB9CiAKIC8qKgogICogZHJtX2RlYnVnX2NhdGVn
b3J5X3ByaW50ZXIgLSBjb25zdHJ1Y3QgYSAmZHJtX3ByaW50ZXIgdGhhdCBvdXRwdXRzIHRvCi0g
KiBwcl9kZWJ1ZygpIGlmIGVuYWJsZWQgZm9yIHRoZSBnaXZlbiBjYXRlZ29yeS4KKyAqIHByX2Rl
YnVnKCkgYW5kL29yIHRoZSBkcm0gdHJhY2VmcyBpbnN0YW5jZSBpZiBlbmFibGVkIGZvciB0aGUg
Z2l2ZW4gY2F0ZWdvcnkuCiAgKiBAY2F0ZWdvcnk6IHRoZSBEUk1fVVRfKiBtZXNzYWdlIGNhdGVn
b3J5IHRoaXMgbWVzc2FnZSBiZWxvbmdzIHRvCiAgKiBAcHJlZml4OiB0cmFjZSBvdXRwdXQgcHJl
Zml4CiAgKgpAQCAtMzQ3LDggKzM2MiwxMyBAQCBkcm1fZGVidWdfY2F0ZWdvcnlfcHJpbnRlcihl
bnVtIGRybV9kZWJ1Z19jYXRlZ29yeSBjYXRlZ29yeSwKIAkJLnByZWZpeCA9IHByZWZpeAogCX07
CiAKLQlpZiAoZHJtX2RlYnVnX3N5c2xvZ19lbmFibGVkKGNhdGVnb3J5KSkgeworCWlmIChkcm1f
ZGVidWdfc3lzbG9nX2VuYWJsZWQoY2F0ZWdvcnkpICYmCisJICAgIGRybV9kZWJ1Z190cmFjZV9l
bmFibGVkKGNhdGVnb3J5KSkgeworCQlwLnByaW50Zm4gPSBfX2RybV9wcmludGZuX2RlYnVnX3N5
c2xvZ19hbmRfdHJhY2U7CisJfSBlbHNlIGlmIChkcm1fZGVidWdfc3lzbG9nX2VuYWJsZWQoY2F0
ZWdvcnkpKSB7CiAJCXAucHJpbnRmbiA9IF9fZHJtX3ByaW50Zm5fZGVidWdfc3lzbG9nOworCX0g
ZWxzZSBpZiAoZHJtX2RlYnVnX3RyYWNlX2VuYWJsZWQoY2F0ZWdvcnkpKSB7CisJCXAucHJpbnRm
biA9IF9fZHJtX3ByaW50Zm5fdHJhY2U7CiAJfSBlbHNlIHsKIAkJV0FSTigxLCAiRGVidWcgY2F0
ZWdvcnkgJWQgaXMgaW5hY3RpdmUuIiwgY2F0ZWdvcnkpOwogCQlwLnByaW50Zm4gPSBfX2RybV9w
cmludGZuX25vb3A7CkBAIC0zNTcsNiArMzc3LDI3IEBAIGRybV9kZWJ1Z19jYXRlZ29yeV9wcmlu
dGVyKGVudW0gZHJtX2RlYnVnX2NhdGVnb3J5IGNhdGVnb3J5LAogCXJldHVybiBwOwogfQogCisK
KyNpZmRlZiBDT05GSUdfVFJBQ0lORwordm9pZCBkcm1fdHJhY2VfaW5pdCh2b2lkKTsKK19fcHJp
bnRmKDEsIDIpCit2b2lkIGRybV90cmFjZV9wcmludGYoY29uc3QgY2hhciAqZm9ybWF0LCAuLi4p
Owordm9pZCBkcm1fdHJhY2VfY2xlYW51cCh2b2lkKTsKKyNlbHNlCitzdGF0aWMgaW5saW5lIHZv
aWQgZHJtX3RyYWNlX2luaXQodm9pZCkKK3sKK30KKworX19wcmludGYoMSwgMikKK3N0YXRpYyBp
bmxpbmUgdm9pZCBkcm1fdHJhY2VfcHJpbnRmKGNvbnN0IGNoYXIgKmZvcm1hdCwgLi4uKQorewor
fQorCitzdGF0aWMgaW5saW5lIHZvaWQgZHJtX3RyYWNlX2NsZWFudXAodm9pZCkKK3sKK30KKyNl
bmRpZgorCiAvKgogICogc3RydWN0IGRldmljZSBiYXNlZCBsb2dnaW5nCiAgKgotLSAKU2VhbiBQ
YXVsLCBTb2Z0d2FyZSBFbmdpbmVlciwgR29vZ2xlIC8gQ2hyb21pdW0gT1MKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
