Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4745C1E626B
	for <lists+dri-devel@lfdr.de>; Thu, 28 May 2020 15:38:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1985C89E0C;
	Thu, 28 May 2020 13:38:48 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2C68289E0C;
 Thu, 28 May 2020 13:38:47 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: shadeslayer) with ESMTPSA id 3215A2A3EB9
From: Rohan Garg <rohan.garg@collabora.com>
To: igt-dev@lists.freedesktop.org
Subject: [PATCH i-g-t] panfrost: Test labeling functionality
Date: Thu, 28 May 2020 15:38:35 +0200
Message-Id: <20200528133835.5087-1-rohan.garg@collabora.com>
X-Mailer: git-send-email 2.17.1
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: emil.l.velikov@gmail.com, alyssa.rosenzweig@collabora.com,
 dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW50cm9kdWNlIHRlc3RzIHRvIGNvdmVyIHRoZSBuZXcgZ2VuZXJpYyBsYWJlbGluZyBpb2N0bCdz
CmJlaW5nIHJldmlld2VkIGhlcmUgWzFdLgoKU2lnbmVkLW9mZi1ieTogUm9oYW4gR2FyZyA8cm9o
YW4uZ2FyZ0Bjb2xsYWJvcmEuY29tPgoKWzFdIGh0dHBzOi8vcGF0Y2h3b3JrLmZyZWVkZXNrdG9w
Lm9yZy9zZXJpZXMvNzcyNjcvCgpTaWduZWQtb2ZmLWJ5OiBSb2hhbiBHYXJnIDxyb2hhbi5nYXJn
QGNvbGxhYm9yYS5jb20+Ci0tLQogaW5jbHVkZS9kcm0tdWFwaS9kcm0uaCAgICB8ICAyMyArKysr
KystCiB0ZXN0cy9tZXNvbi5idWlsZCAgICAgICAgIHwgICAxICsKIHRlc3RzL3BhbmZyb3N0X2Jv
X2xhYmVsLmMgfCAxMjkgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIDMg
ZmlsZXMgY2hhbmdlZCwgMTUyIGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKIGNyZWF0ZSBt
b2RlIDEwMDY0NCB0ZXN0cy9wYW5mcm9zdF9ib19sYWJlbC5jCgpkaWZmIC0tZ2l0IGEvaW5jbHVk
ZS9kcm0tdWFwaS9kcm0uaCBiL2luY2x1ZGUvZHJtLXVhcGkvZHJtLmgKaW5kZXggYzdmZDJhMzUu
Ljg3MTI0ODgyIDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS11YXBpL2RybS5oCisrKyBiL2luY2x1
ZGUvZHJtLXVhcGkvZHJtLmgKQEAgLTYyMCw2ICs2MjAsMjUgQEAgc3RydWN0IGRybV9nZW1fb3Bl
biB7CiAJX191NjQgc2l6ZTsKIH07CiAKKy8qKiBzdHJ1Y3QgZHJtX2hhbmRsZV9sYWJlbCAtIGlv
Y3RsIGFyZ3VtZW50IGZvciBsYWJlbGxpbmcgQk9zLgorICoKKyAqIFRoaXMgbGFiZWwncyBhIEJP
IHdpdGggYSB1c2Vyc3BhY2UgbGFiZWwKKyAqCisgKi8KK3N0cnVjdCBkcm1faGFuZGxlX2xhYmVs
IHsKKwkvKiogSGFuZGxlIGZvciB0aGUgb2JqZWN0IGJlaW5nIGxhYmVsbGVkLiAqLworCV9fdTMy
IGhhbmRsZTsKKworCS8qKiBMYWJlbCBhbmQgbGFiZWwgbGVuZ3RoIChsZW4gaW5jbHVkZXMgdGhl
IHRyYWlsaW5nIE5VTEwpLgorCSAqICBMYWJlbCBsZW5naHQgKk1VU1QqIGJlIHNtYWxsZXIgdGhh
biBQQUdFX1NJWkUuCisJICovCisJX191MzIgbGVuOworCV9fdTY0IGxhYmVsOworCisJLyoqIEZs
YWdzIC4uIEN1cnJlbnRseSBubyBmbGFncyBhcmUgZGVmaW5lZCAqLworCV9fdTMyIGZsYWdzOwor
fTsKKwogI2RlZmluZSBEUk1fQ0FQX0RVTUJfQlVGRkVSCQkweDEKICNkZWZpbmUgRFJNX0NBUF9W
QkxBTktfSElHSF9DUlRDCTB4MgogI2RlZmluZSBEUk1fQ0FQX0RVTUJfUFJFRkVSUkVEX0RFUFRI
CTB4MwpAQCAtOTQxLDggKzk2MCwxMCBAQCBleHRlcm4gIkMiIHsKICNkZWZpbmUgRFJNX0lPQ1RM
X1NZTkNPQkpfUVVFUlkJCURSTV9JT1dSKDB4Q0IsIHN0cnVjdCBkcm1fc3luY29ial90aW1lbGlu
ZV9hcnJheSkKICNkZWZpbmUgRFJNX0lPQ1RMX1NZTkNPQkpfVFJBTlNGRVIJRFJNX0lPV1IoMHhD
Qywgc3RydWN0IGRybV9zeW5jb2JqX3RyYW5zZmVyKQogI2RlZmluZSBEUk1fSU9DVExfU1lOQ09C
Sl9USU1FTElORV9TSUdOQUwJRFJNX0lPV1IoMHhDRCwgc3RydWN0IGRybV9zeW5jb2JqX3RpbWVs
aW5lX2FycmF5KQotCiAjZGVmaW5lIERSTV9JT0NUTF9NT0RFX0dFVEZCMgkJRFJNX0lPV1IoMHhD
RSwgc3RydWN0IGRybV9tb2RlX2ZiX2NtZDIpCisjZGVmaW5lIERSTV9JT0NUTF9IQU5ETEVfU0VU
X0xBQkVMICAgICAgRFJNX0lPV1IoMHhDRiwgc3RydWN0IGRybV9oYW5kbGVfbGFiZWwpCisjZGVm
aW5lIERSTV9JT0NUTF9IQU5ETEVfR0VUX0xBQkVMICAgICAgRFJNX0lPV1IoMHhEMCwgc3RydWN0
IGRybV9oYW5kbGVfbGFiZWwpCisKIAogLyoqCiAgKiBEZXZpY2Ugc3BlY2lmaWMgaW9jdGxzIHNo
b3VsZCBvbmx5IGJlIGluIHRoZWlyIHJlc3BlY3RpdmUgaGVhZGVycwpkaWZmIC0tZ2l0IGEvdGVz
dHMvbWVzb24uYnVpbGQgYi90ZXN0cy9tZXNvbi5idWlsZAppbmRleCBlNjliZGI3ZC4uZWU5MWJm
NDggMTAwNjQ0Ci0tLSBhL3Rlc3RzL21lc29uLmJ1aWxkCisrKyBiL3Rlc3RzL21lc29uLmJ1aWxk
CkBAIC03Miw2ICs3Miw3IEBAIHRlc3RfcHJvZ3MgPSBbCiAJJ2ttc192YmxhbmsnLAogCSdrbXNf
dnJyJywKIAknbWV0YV90ZXN0JywKKyAgICAgICAgJ3BhbmZyb3N0X2JvX2xhYmVsJywKIAkncGFu
ZnJvc3RfZ2V0X3BhcmFtJywKIAkncGFuZnJvc3RfZ2VtX25ldycsCiAJJ3BhbmZyb3N0X3ByaW1l
JywKZGlmZiAtLWdpdCBhL3Rlc3RzL3BhbmZyb3N0X2JvX2xhYmVsLmMgYi90ZXN0cy9wYW5mcm9z
dF9ib19sYWJlbC5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwLi5kMzE3OTQ1
OAotLS0gL2Rldi9udWxsCisrKyBiL3Rlc3RzL3BhbmZyb3N0X2JvX2xhYmVsLmMKQEAgLTAsMCAr
MSwxMjkgQEAKKy8qCisgKiBDb3B5cmlnaHQgwqkgMjAyMCBDb2xsYWJvcmEgTHRkLgorICogICAg
IEF1dGhvcjogUm9oYW4gR2FyZyA8cm9oYW4uZ2FyZ0Bjb2xsYWJvcmEuY29tPgorICoKKyAqIFBl
cm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29u
IG9idGFpbmluZyBhCisgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9j
dW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAorICogdG8gZGVhbCBpbiB0aGUgU29m
dHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgor
ICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3Ry
aWJ1dGUsIHN1YmxpY2Vuc2UsCisgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJl
LCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKKyAqIFNvZnR3YXJlIGlzIGZ1cm5p
c2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CisgKgor
ICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ug
KGluY2x1ZGluZyB0aGUgbmV4dAorICogcGFyYWdyYXBoKSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBh
bGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZQorICogU29mdHdhcmUuCisg
KgorICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkg
T0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKKyAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJ
TUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAorICogRklUTkVTUyBG
T1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5U
IFNIQUxMCisgKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9S
IEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgorICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFO
IEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcKKyAqIEZST00s
IE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1Ig
T1RIRVIgREVBTElOR1MKKyAqIElOIFRIRSBTT0ZUV0FSRS4KKyAqLworCisjaW5jbHVkZSAiaWd0
LmgiCisjaW5jbHVkZSAiaWd0X3BhbmZyb3N0LmgiCisjaW5jbHVkZSA8dW5pc3RkLmg+CisjaW5j
bHVkZSA8c3RkbGliLmg+CisjaW5jbHVkZSA8c3RkaW8uaD4KKyNpbmNsdWRlIDxzdHJpbmcuaD4K
KyNpbmNsdWRlIDxmY250bC5oPgorI2luY2x1ZGUgPGludHR5cGVzLmg+CisjaW5jbHVkZSA8ZXJy
bm8uaD4KKyNpbmNsdWRlIDxzeXMvc3RhdC5oPgorI2luY2x1ZGUgPHN5cy9pb2N0bC5oPgorI2lu
Y2x1ZGUgPHBvbGwuaD4KKyNpbmNsdWRlICJ2YzRfZHJtLmgiCisKK3N0YXRpYyBpbnQKK3NldF9s
YWJlbChpbnQgZmQsIGludCBoYW5kbGUsIGNvbnN0IGNoYXIgKmxhYmVsKQoreworCXN0cnVjdCBk
cm1faGFuZGxlX2xhYmVsIGFyZ3MgPSB7IDAgfTsKKwlpZiAobGFiZWwpIHsKKwkJYXJncy5oYW5k
bGUgPSBoYW5kbGU7CisJCWFyZ3MubGVuID0gc3RybGVuKGxhYmVsKSArIDE7CisJCWFyZ3MubGFi
ZWw9ICh1aW50cHRyX3QpbGFiZWw7CisJfQorCisJcmV0dXJuIGRybUlvY3RsKGZkLCBEUk1fSU9D
VExfSEFORExFX1NFVF9MQUJFTCwgJmFyZ3MpOworfQorCitzdGF0aWMgY29uc3QgY2hhcioKK2dl
dF9sYWJlbChpbnQgZmQsIGludCBoYW5kbGUpCit7CisJc3RydWN0IGRybV9oYW5kbGVfbGFiZWwg
YXJncyA9IHsKKyAgICAgICAgICAgICAgICAuaGFuZGxlID0gaGFuZGxlLAorCQkubGVuID0gMTAs
CisJCS5sYWJlbCA9ICh1aW50cHRyX3QpIG1hbGxvYyhzaXplb2YoY2hhciopICogMTApCisgICAg
ICAgIH07CisKKwlkcm1Jb2N0bChmZCwgRFJNX0lPQ1RMX0hBTkRMRV9HRVRfTEFCRUwsICZhcmdz
KTsKKworCWlmICghYXJncy5sYWJlbCkKKwkJcmV0dXJuIE5VTEw7CisKKwlpZ3RfYXNzZXJ0KGFy
Z3MubGFiZWwpOworCisgICAgICAgIGFyZ3MubGFiZWwgPSAodWludHB0cl90KSByZWFsbG9jKGFy
Z3MubGFiZWwsIGFyZ3MubGVuKTsKKworCWRybUlvY3RsKGZkLCBEUk1fSU9DVExfSEFORExFX0dF
VF9MQUJFTCwgJmFyZ3MpOworCisgICAgICAgIHJldHVybiBhcmdzLmxhYmVsOworfQorCisKK2ln
dF9tYWluCit7CisJaW50IGZkOworCisJaWd0X2ZpeHR1cmUKKwkJZmQgPSBkcm1fb3Blbl9kcml2
ZXIoRFJJVkVSX0FOWSk7CisKKwlpZ3Rfc3VidGVzdCgic2V0LWxhYmVsIikgeworCQlzdHJ1Y3Qg
cGFuZnJvc3RfYm8gKmJvID0gaWd0X3BhbmZyb3N0X2dlbV9uZXcoZmQsIDQwOTYpOworCQlpbnQg
cmV0OworCQlyZXQgPSBzZXRfbGFiZWwoZmQsIGJvLT5oYW5kbGUsICJhIHRlc3QgbGFiZWwiKTsK
KwkJaWd0X2Fzc2VydChyZXQgPT0gMCk7CisKKwkJcmV0ID0gc2V0X2xhYmVsKGZkLCBiby0+aGFu
ZGxlLCAiYSBuZXcgdGVzdCBsYWJlbCIpOworCQlpZ3RfYXNzZXJ0KHJldCA9PSAwKTsKKworCQlp
Z3RfcGFuZnJvc3RfZnJlZV9ibyhmZCwgYm8pOworCX0KKworCWlndF9zdWJ0ZXN0KCJnZXQtbGFi
ZWwiKSB7CisJCXN0cnVjdCBwYW5mcm9zdF9ibyAqYm8gPSBpZ3RfcGFuZnJvc3RfZ2VtX25ldyhm
ZCwgNDA5Nik7CisJCXNldF9sYWJlbChmZCwgYm8tPmhhbmRsZSwgImEgdGVzdCBsYWJlbCIpOwor
CQljb25zdCBjaGFyKiBsYWJlbCA9IGdldF9sYWJlbChmZCwgYm8tPmhhbmRsZSk7CisJCWlndF9h
c3NlcnQoc3RyY21wKGxhYmVsLCAiYSB0ZXN0IGxhYmVsIikgPT0gMCk7CisJCWZyZWUobGFiZWwp
OworCQlpZ3RfcGFuZnJvc3RfZnJlZV9ibyhmZCwgYm8pOworCX0KKworCWlndF9zdWJ0ZXN0KCJj
bGVhci1sYWJlbCIpIHsKKwkJc3RydWN0IHBhbmZyb3N0X2JvICpibyA9IGlndF9wYW5mcm9zdF9n
ZW1fbmV3KGZkLCA0MDk2KTsKKwkJc2V0X2xhYmVsKGZkLCBiby0+aGFuZGxlLCBOVUxMKTsKKwkJ
aWd0X2Fzc2VydF9lcShOVUxMLCBnZXRfbGFiZWwoZmQsIGJvLT5oYW5kbGUpKTsKKwkJaWd0X3Bh
bmZyb3N0X2ZyZWVfYm8oZmQsIGJvKTsKKwl9CisKKwlpZ3Rfc3VidGVzdCgibGFiZWwtdG9vLWxv
bmciKSB7CisJCWNoYXIgbGFiZWxbNDA5Nl0gPSB7WzAgLi4uIDQwOTVdID0gJ2EnfTsKKwkJaW50
IHJldDsKKwkJc3RydWN0IHBhbmZyb3N0X2JvICpibyA9IGlndF9wYW5mcm9zdF9nZW1fbmV3KGZk
LCA0MDk2KTsKKwkJcmV0ID0gc2V0X2xhYmVsKGZkLCBiby0+aGFuZGxlLCBsYWJlbCk7CisJCWln
dF9hc3NlcnRfZXEoLTEsIHJldCk7CisJCWlndF9hc3NlcnRfZXEoRUlOVkFMLCBlcnJubyk7CisJ
CWlndF9wYW5mcm9zdF9mcmVlX2JvKGZkLCBibyk7CisJfQorCisJaWd0X3N1YnRlc3QoInNldC1i
YWQtaGFuZGxlIikgeworCQlpbnQgcmV0ID0gc2V0X2xhYmVsKGZkLCAweGQwZDBkMGQwLCAiYmFk
IGhhbmRsZSIpOworCQlpZ3RfYXNzZXJ0X2VxKC0xLCByZXQpOworCQlpZ3RfYXNzZXJ0X2VxKEVO
T0VOVCwgZXJybm8pOworCX0KKworCWlndF9maXh0dXJlCisJCWNsb3NlKGZkKTsKK30KLS0gCjIu
MTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJp
LWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
