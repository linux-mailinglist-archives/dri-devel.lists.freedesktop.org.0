Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 15AAE10AE2E
	for <lists+dri-devel@lfdr.de>; Wed, 27 Nov 2019 11:49:35 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6C3926E508;
	Wed, 27 Nov 2019 10:49:32 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x443.google.com (mail-wr1-x443.google.com
 [IPv6:2a00:1450:4864:20::443])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8C8246E508
 for <dri-devel@lists.freedesktop.org>; Wed, 27 Nov 2019 10:49:31 +0000 (UTC)
Received: by mail-wr1-x443.google.com with SMTP id w9so26151274wrr.0
 for <dri-devel@lists.freedesktop.org>; Wed, 27 Nov 2019 02:49:31 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=OoHsvmBsAwfCInyI4hbTDtlBV44/6bek370cam/4eHE=;
 b=LhLuaHwOoycT0kfCAY/3tX758wZYcbNPLw+YC7FssRA/G1EnR1Wtlf+rVydFx88CBl
 /+lbKH+BCHbNS4Xz/2cZmk8hq7VRagfdQpakYbl0n5j3fsc5+6oep85jIXK1MD4cS88n
 RAtCHPm3VVVV5WNHGjB9GYWBI9PSZBelYBjhYbXwTCGM/i1fptttn5TIcwOqnkKbF4a1
 TK2GNRu7m4yCRNaOyu5o1HXQ/Y84/n/e7plO7yEnEHkvTlF0dcEf6RQACAV4OSAezZFT
 wMQVeZmI1kokqFQO1JFeJ45DRgFpdRBm1+n6eRsrqtYlMwCCOuXuBlo3IsL7f8yPwUG0
 hC3w==
X-Gm-Message-State: APjAAAX1OG/3KCgjK103AWfpk7My6I4nXMzQALCspZieYjezI+51LRhn
 ondeLMO7mxIaM6LWCidJAue3UQ==
X-Google-Smtp-Source: APXvYqwnzKYcFin0pr1X+0JXSvpVwPJJJvJ7y+F6Jx1pXO/G6dB9hjZaNQ0C3YuBOQ25TojqqjkaeQ==
X-Received: by 2002:a05:6000:12:: with SMTP id
 h18mr18460010wrx.87.1574851770031; 
 Wed, 27 Nov 2019 02:49:30 -0800 (PST)
Received: from phenom.ffwll.local (212-51-149-96.fiber7.init7.net.
 [212.51.149.96])
 by smtp.gmail.com with ESMTPSA id s82sm6406437wms.28.2019.11.27.02.49.28
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 27 Nov 2019 02:49:29 -0800 (PST)
Date: Wed, 27 Nov 2019 11:49:27 +0100
From: Daniel Vetter <daniel@ffwll.ch>
To: Thomas Zimmermann <tzimmermann@suse.de>
Subject: Re: [PATCH v2] drm/ast: Fix potential NULL-pointer read during
 atomic mode setting
Message-ID: <20191127104927.GF29965@phenom.ffwll.local>
References: <20191127073109.9807-1-tzimmermann@suse.de>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191127073109.9807-1-tzimmermann@suse.de>
X-Operating-System: Linux phenom 5.3.0-2-amd64 
User-Agent: Mutt/1.12.2 (2019-09-21)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=OoHsvmBsAwfCInyI4hbTDtlBV44/6bek370cam/4eHE=;
 b=e8IGT9Cce0drPKBYEDGipe2TU8D6Og7xdMm2DTlV/8iFpSzxehXQFq5LtsY7fWKtqP
 hyclyMX5FqGo9+XZ1j/Z1ynrZ52AHwSsjvRniuBtYK0p7nAjLI0yxBdd1UcD+VFX9BBv
 tgxDjcoDSxprh+h3Uqs7JDJVTJM/iOruJblLs=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: daniel.vetter@ffwll.ch, dri-devel@lists.freedesktop.org, kraxel@redhat.com,
 airlied@redhat.com, sam@ravnborg.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBOb3YgMjcsIDIwMTkgYXQgMDg6MzE6MDlBTSArMDEwMCwgVGhvbWFzIFppbW1lcm1h
bm4gd3JvdGU6Cj4gV2hlbiBlbmFibGluZyB0aGUgQ1JUQyBhZnRlciB3YWtpbmcgdXAgZnJvbSBh
IHBvd2VyLXNhdmluZyBtb2RlLCB0aGUKPiBwcmltYXJ5IHBsYW5lJ3MgZnJhbWVidWZmZXIgbWln
aHQgYmUgTlVMTCwgd2hpY2ggbGVhZHMgdG8gYSBzdGFjayB0cmFjZQo+IGFzIHNob3duIGJlbG93
Lgo+IAo+ICAgWyAgNjMyLjYyNDYwOF0gQlVHOiBrZXJuZWwgTlVMTCBwb2ludGVyIGRlcmVmZXJl
bmNlLCBhZGRyZXNzOiAwMDAwMDAwMDAwMDAwMDQ4Cj4gICBbICA2MzIuNjI0NjMxXSAjUEY6IHN1
cGVydmlzb3IgcmVhZCBhY2Nlc3MgaW4ga2VybmVsIG1vZGUKPiAgIFsgIDYzMi42MjQ2MzldICNQ
RjogZXJyb3JfY29kZSgweDAwMDApIC0gbm90LXByZXNlbnQgcGFnZQo+ICAgWyAgNjMyLjYyNDY0
N10gUEdEIDAgUDREIDAKPiAgIFsgIDYzMi42MjQ2NTRdIE9vcHM6IDAwMDAgWyMxXSBTTVAgUFRJ
Cj4gICBbICA2MzIuNjI0NjYyXSBDUFU6IDAgUElEOiAyMDgyIENvbW06IGdub21lLXNoZWxsIFRh
aW50ZWQ6IEcgICAgICAgICAgICBFICAgICA1LjQuMC1yYzctMS1kZWZhdWx0KyAjMTE0Cj4gICBb
ICA2MzIuNjI0NjczXSBIYXJkd2FyZSBuYW1lOiBTdW4gTWljcm9zeXN0ZW1zIFNVTiBGSVJFIFgy
MjcwIE0yL1NVTiBGSVJFIFgyMjcwIE0yLCBCSU9TIDIuMDUgICAgMDcvMDEvMjAxMAo+ICAgWyAg
NjMyLjYyNDY4OV0gUklQOiAwMDEwOmFzdF9jcnRjX2hlbHBlcl9hdG9taWNfZW5hYmxlKzB4N2Qv
MHg2ODAgW2FzdF0KPiAgIFsgIDYzMi42MjQ2OThdIENvZGU6IDQ4IDhiIDgwIGUwIDAyIDAwIDAw
IDRjIDhiIDYwIDEwIDMxIGMwIGYzIDQ4IGFiIDQ4IDhiIDgzIDc4IDA0IDAwIDAwIDRjIDg5IGVm
IDQ4IDhkIDcwIDE4IGU4IDlhIGU5IDU1IGNlIDQ4IDhiIDgzIDc4IDA0IDAwIDAwIDw0OT4gOGIg
N2MgMjQgNDggNGMgODkgZWEgNGMgOGQgNDQgMjQgMjggNDggOGQgNGMgMjQgMjAgNDggOGQgNzAg
MTgKPiAgIFsgIDYzMi42MjQ3MThdIFJTUDogMDAxODpmZmZmYmU5ZWMxMjNmYTQwIEVGTEFHUzog
MDAwMTAyNDYKPiAgIFsgIDYzMi42MjQ3MjZdIFJBWDogZmZmZjk1YTEzY2ZkMzQwMCBSQlg6IGZm
ZmY5NWExM2NmMzIwMDAgUkNYOiAwMDAwMDAwMDAwMDAwMDAwCj4gICBbICA2MzIuNjI0NzM1XSBS
RFg6IDAwMDAwMDAwMDAwMDAwMDAgUlNJOiBmZmZmOTVhMTNjZmQzNGU4IFJESTogZmZmZmJlOWVj
MTIzZmI0MAo+ICAgWyAgNjMyLjYyNDc0NF0gUkJQOiBmZmZmYmU5ZWMxMjNmYjgwIFIwODogMDAw
MDAwMDAwMDAwMDAwMCBSMDk6IDAwMDAwMDAwMDAwMDAwMDMKPiAgIFsgIDYzMi42MjQ3NTNdIFIx
MDogMDAwMDAwMDAwMDAwMDAwMCBSMTE6IDAwMDAwMDAwMDAwMDAwMDAgUjEyOiAwMDAwMDAwMDAw
MDAwMDAwCj4gICBbICA2MzIuNjI0NzYyXSBSMTM6IGZmZmZiZTllYzEyM2ZhNzAgUjE0OiBmZmZm
OTVhMTNiZWI3MDAwIFIxNTogZmZmZjk1YTEzY2YzMjgwMAo+ICAgWyAgNjMyLjYyNDc3Ml0gRlM6
ICAwMDAwN2Y2ZDI3NjNlMTQwKDAwMDApIEdTOmZmZmY5NWExMzQwMDAwMDAoMDAwMCkga25sR1M6
MDAwMDAwMDAwMDAwMDAwMAo+ICAgWyAgNjMyLjYyNDc4Ml0gQ1M6ICAwMDEwIERTOiAwMDAwIEVT
OiAwMDAwIENSMDogMDAwMDAwMDA4MDA1MDAzMwo+ICAgWyAgNjMyLjYyNDc5MF0gQ1IyOiAwMDAw
MDAwMDAwMDAwMDQ4IENSMzogMDAwMDAwMDExOTJmODAwNCBDUjQ6IDAwMDAwMDAwMDAwMjA2ZjAK
PiAgIFsgIDYzMi42MjQ4MDBdIENhbGwgVHJhY2U6Cj4gICBbICA2MzIuNjI0ODExXSAgPyBfX2xv
Y2tfYWNxdWlyZSsweDQwOS8weDdjMAo+ICAgWyAgNjMyLjYyNDgzMF0gIGRybV9hdG9taWNfaGVs
cGVyX2NvbW1pdF9tb2Rlc2V0X2VuYWJsZXMrMHgxYWYvMHgyMDAKPiAgIFsgIDYzMi42MjQ4NDBd
ICBkcm1fYXRvbWljX2hlbHBlcl9jb21taXRfdGFpbCsweDMyLzB4NzAKPiAgIFsgIDYzMi42MjQ4
NDldICBjb21taXRfdGFpbCsweGM3LzB4MTEwCj4gICBbICA2MzIuNjI0ODU3XSAgZHJtX2F0b21p
Y19oZWxwZXJfY29tbWl0KzB4MTIxLzB4MTMwCj4gICBbICA2MzIuNjI0ODY3XSAgZHJtX2F0b21p
Y19jb25uZWN0b3JfY29tbWl0X2RwbXMrMHhkNy8weDEwMAo+ICAgWyAgNjMyLjYyNDg3OF0gIHNl
dF9wcm9wZXJ0eV9hdG9taWMrMHhhZi8weDExMAo+ICAgWyAgNjMyLjYyNDg5MF0gIGRybV9tb2Rl
X29ial9zZXRfcHJvcGVydHlfaW9jdGwrMHhiYi8weDE5MAo+ICAgWyAgNjMyLjYyNDg5OV0gID8g
ZHJtX21vZGVfb2JqX2ZpbmRfcHJvcF9pZCsweDQwLzB4NDAKPiAgIFsgIDYzMi42MjQ5MDldICBk
cm1faW9jdGxfa2VybmVsKzB4ODYvMHhkMAo+ICAgWyAgNjMyLjYyNDkxOF0gIGRybV9pb2N0bCsw
eDFlNC8weDM2Ygo+ICAgWyAgNjMyLjYyNDkyNV0gID8gZHJtX21vZGVfb2JqX2ZpbmRfcHJvcF9p
ZCsweDQwLzB4NDAKPiAgIFsgIDYzMi42MjQ5MzldICBkb192ZnNfaW9jdGwrMHg0YmQvMHg2ZTAK
PiAgIFsgIDYzMi42MjQ5NDldICBrc3lzX2lvY3RsKzB4NWUvMHg5MAo+ICAgWyAgNjMyLjYyNDk1
N10gIF9feDY0X3N5c19pb2N0bCsweDE2LzB4MjAKPiAgIFsgIDYzMi42MjQ5NjZdICBkb19zeXNj
YWxsXzY0KzB4NWEvMHgyMjAKPiAgIFsgIDYzMi42MjQ5NzZdICBlbnRyeV9TWVNDQUxMXzY0X2Fm
dGVyX2h3ZnJhbWUrMHg0OS8weGJlCj4gICBbICA2MzIuNjI0OTg0XSBSSVA6IDAwMzM6MHg3ZjZk
MmIwZGUzODcKPiAgIFsgIDYzMi42MjQ5OTFdIENvZGU6IDAwIDAwIDkwIDQ4IDhiIDA1IGY5IDlh
IDBjIDAwIDY0IGM3IDAwIDI2IDAwIDAwIDAwIDQ4IGM3IGMwIGZmIGZmIGZmIGZmIGMzIDY2IDJl
IDBmIDFmIDg0IDAwIDAwIDAwIDAwIDAwIGI4IDEwIDAwIDAwIDAwIDBmIDA1IDw0OD4gM2QgMDEg
ZjAgZmYgZmYgNzMgMDEgYzMgNDggOGIgMGQgYzkgOWEgMGMgMDAgZjcgZDggNjQgODkgMDEgNDgK
PiAgIFsgIDYzMi42MjUwMTFdIFJTUDogMDAyYjowMDAwN2ZmZmI0OWRlZjM4IEVGTEFHUzogMDAw
MDAyNDYgT1JJR19SQVg6IDAwMDAwMDAwMDAwMDAwMTAKPiAgIFsgIDYzMi42MjUwMjFdIFJBWDog
ZmZmZmZmZmZmZmZmZmZkYSBSQlg6IDAwMDA3ZmZmYjQ5ZGVmNzAgUkNYOiAwMDAwN2Y2ZDJiMGRl
Mzg3Cj4gICBbICA2MzIuNjI1MDMwXSBSRFg6IDAwMDA3ZmZmYjQ5ZGVmNzAgUlNJOiAwMDAwMDAw
MGMwMTg2NGJhIFJESTogMDAwMDAwMDAwMDAwMDAwOQo+ICAgWyAgNjMyLjYyNTA0MF0gUkJQOiAw
MDAwMDAwMGMwMTg2NGJhIFIwODogMDAwMDAwMDAwMDAwMDAwMCBSMDk6IDAwMDAwMDAwYzBjMGMw
YzAKPiAgIFsgIDYzMi42MjUwNDldIFIxMDogMDAwMDAwMDAwMDAwMDAzMCBSMTE6IDAwMDAwMDAw
MDAwMDAyNDYgUjEyOiAwMDAwNTViYzM2N2ViOTIwCj4gICBbICA2MzIuNjI1MDU4XSBSMTM6IDAw
MDAwMDAwMDAwMDAwMDkgUjE0OiAwMDAwMDAwMDAwMDAwMDAyIFIxNTogMDAwMDAwMDAwMDAwMDAw
MAo+ICAgWyAgNjMyLjYyNTA3MV0gTW9kdWxlcyBsaW5rZWQgaW46IGVidGFibGVfZmlsdGVyKEUp
IGVidGFibGVzKEUpIGlwNnRhYmxlX2ZpbHRlcihFKSBpcDZfdGFibGVzKEUpIGlwdGFibGVfZmls
dGVyKEUpIGlwX3RhYmxlcyhFKSB4X3RhYmxlcyhFKSBhZl9wYWNrZXQoRSkgc2NzaV90cmFuc3Bv
cnRfaXNjc2koRSkgZG1pX3N5c2ZzKEUpIG1zcihFKSB4ZnMoRSkgaW50ZWxfcG93ZXJjbGFtcChF
KSBjb3JldGVtcChFKSBrKQo+ICAgWyAgNjMyLjYyNTE4NV0gQ1IyOiAwMDAwMDAwMDAwMDAwMDQ4
Cj4gCj4gVGhlIFNUUiBpcwo+IAo+ICAgKiBzdGFydCBnZG0gYW5kIHdhaXQgZm9yIGl0IHRvIHN3
aXRjaCBvZmYgdGhlIGRpc3BsYXkKPiAgICogd2FrZSB1cCB0aGUgZGlzcGxheSBieSBwcmVzc2lu
ZyBhIGtleQo+IAo+IFRoZSBmaXggaW1wbGVtZW50cyBhdG9taWNfY2hlY2sgZm9yIHBsYW5lcyBh
bmQgcmVqZWN0cyBjb25maWd1cmF0aW9ucwo+IHdpdGggYW4gaW52aXNpYmxlIHByaW1hcnkgcGxh
bmUuCj4gCj4gdjI6Cj4gCSogZG8gYW4gYXRvbWljIGNoZWNrIGZvciBwbGFuZQo+IAkqIHJlamVj
dCBpbnZpc2libGUgcHJpbWFyeSBwbGFuZXMKPiAKPiBTaWduZWQtb2ZmLWJ5OiBUaG9tYXMgWmlt
bWVybWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4KPiBTdWdnZXN0ZWQtYnk6IERhbmllbCBWZXR0
ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+Cj4gRml4ZXM6IGI0OGUxYjZmZmQyOCAoImRybS9h
c3Q6IEFkZCBDUlRDIGhlbHBlcnMgZm9yIGF0b21pYyBtb2Rlc2V0dGluZyIpCj4gQ2M6IEdlcmQg
SG9mZm1hbm4gPGtyYXhlbEByZWRoYXQuY29tPgo+IENjOiBEYXZlIEFpcmxpZSA8YWlybGllZEBy
ZWRoYXQuY29tPgo+IENjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgo+
IENjOiAiWS5DLiBDaGVuIiA8eWNfY2hlbkBhc3BlZWR0ZWNoLmNvbT4KPiBDYzogU2FtIFJhdm5i
b3JnIDxzYW1AcmF2bmJvcmcub3JnPgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9t
b2RlLmMgfCA1MCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystCj4gIDEgZmlsZSBj
aGFuZ2VkLCA0OSBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCj4gCj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X21vZGUuYyBiL2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0
X21vZGUuYwo+IGluZGV4IDQ3MjVlYzkxMWE2Ni4uOGU3YmI4Y2U4MTMwIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X21vZGUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
c3QvYXN0X21vZGUuYwo+IEBAIC0zMSw2ICszMSw3IEBACj4gICNpbmNsdWRlIDxsaW51eC9leHBv
cnQuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L3BjaS5oPgo+IAo+ICsjaW5jbHVkZSA8ZHJtL2RybV9h
dG9taWMuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fYXRvbWljX2hlbHBlci5oPgo+ICAjaW5jbHVk
ZSA8ZHJtL2RybV9hdG9taWNfc3RhdGVfaGVscGVyLmg+Cj4gICNpbmNsdWRlIDxkcm0vZHJtX2Ny
dGMuaD4KPiBAQCAtNTU2LDYgKzU1NywzMSBAQCBzdGF0aWMgY29uc3QgdWludDMyX3QgYXN0X3By
aW1hcnlfcGxhbmVfZm9ybWF0c1tdID0gewo+ICBpbnQgYXN0X3ByaW1hcnlfcGxhbmVfaGVscGVy
X2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwKPiAgCQkJCQkgIHN0cnVjdCBk
cm1fcGxhbmVfc3RhdGUgKnN0YXRlKQo+ICB7Cj4gKwlzdHJ1Y3QgZHJtX2NydGMgKmNydGM7Cj4g
KwlzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKmNydGNfc3RhdGU7Cj4gKwlpbnQgcmV0Owo+ICsKPiAr
CWlmIChzdGF0ZS0+Y3J0YykKPiArCQljcnRjID0gc3RhdGUtPmNydGM7Cj4gKwllbHNlIGlmIChw
bGFuZS0+c3RhdGUgJiYgcGxhbmUtPnN0YXRlLT5jcnRjKQo+ICsJCWNydGMgPSBwbGFuZS0+c3Rh
dGUtPmNydGM7Cj4gKwllbHNlCj4gKwkJcmV0dXJuIDA7IC8qIGRpc2FibGluZyBhbiBhbHJlYWR5
IGRpc2FibGVkIHBsYW5lICovCj4gKwo+ICsJY3J0Y19zdGF0ZSA9IGRybV9hdG9taWNfZ2V0X25l
d19jcnRjX3N0YXRlKHN0YXRlLT5zdGF0ZSwgY3J0Yyk7Cj4gKwlpZiAoV0FSTl9PTl9PTkNFKCFj
cnRjX3N0YXRlKSkKPiArCQlyZXR1cm4gLUVJTlZBTDsgLyogQlVHOiBubyBuZXcgQ1JUQyBzdGF0
ZSBhbGxvY2F0ZWQgKi8KClRoZSBhYm92ZSBpcyBhIGxvdCBtb3JlIGNvbXBsaWNhdGVkIHRoYW4g
bmVjZXNzYXJ5LCBzZWUgZS5nLgphdG1lbF9obGNkY19wbGFuZV9hdG9taWNfY2hlY2suIEFuZCBl
dmVuIHRoYXQgaXMgdG9vIGNvbXBsaWNhdGVkLCBzaW5jZQpjcnRjIGlzIHNldCBpZmYgZmIgaXMg
c2V0LCB5b3Ugb25seSBuZWVkIHRvIGNoZWNrIG9uZSBvZiB0aGVtLgoKPiArCj4gKwlyZXQgPSBk
cm1fYXRvbWljX2hlbHBlcl9jaGVja19wbGFuZV9zdGF0ZShzdGF0ZSwgY3J0Y19zdGF0ZSwKPiAr
CQkJCQkJICBEUk1fUExBTkVfSEVMUEVSX05PX1NDQUxJTkcsCj4gKwkJCQkJCSAgRFJNX1BMQU5F
X0hFTFBFUl9OT19TQ0FMSU5HLAo+ICsJCQkJCQkgIGZhbHNlLCB0cnVlKTsKPiArCWlmIChyZXQp
Cj4gKwkJcmV0dXJuIHJldDsKPiArCj4gKwlpZiAoIXN0YXRlLT52aXNpYmxlKQo+ICsJCXJldHVy
biAtRUlOVkFMOyAvKiBwcmltYXJ5IHBsYW5lIG11c3QgYmUgdmlzaWJsZSAqLwo+ICsKPiAgCXJl
dHVybiAwOwo+ICB9Cj4gCj4gQEAgLTU2Nyw3ICs1OTMsNyBAQCB2b2lkIGFzdF9wcmltYXJ5X3Bs
YW5lX2hlbHBlcl9hdG9taWNfdXBkYXRlKHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAo+ICAJc3Ry
dWN0IGRybV9nZW1fdnJhbV9vYmplY3QgKmdibzsKPiAgCXM2NCBncHVfYWRkcjsKPiAKPiAtCWlm
ICghY3J0YyB8fCAhc3RhdGUtPmZiKQo+ICsJaWYgKCFjcnRjIHx8ICFzdGF0ZS0+ZmIgfHwgIXN0
YXRlLT52aXNpYmxlKQo+ICAJCXJldHVybjsKPiAKPiAgCWdibyA9IGRybV9nZW1fdnJhbV9vZl9n
ZW0oc3RhdGUtPmZiLT5vYmpbMF0pOwo+IEBAIC02NjAsNiArNjg2LDI4IEBAIGFzdF9jdXJzb3Jf
cGxhbmVfaGVscGVyX3ByZXBhcmVfZmIoc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCj4gIHN0YXRp
YyBpbnQgYXN0X2N1cnNvcl9wbGFuZV9oZWxwZXJfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fcGxh
bmUgKnBsYW5lLAo+ICAJCQkJCQlzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSkKPiAgewo+
ICsJc3RydWN0IGRybV9jcnRjICpjcnRjOwo+ICsJc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlOwo+ICsJaW50IHJldDsKPiArCj4gKwlpZiAoc3RhdGUtPmNydGMpCj4gKwkJY3J0YyA9
IHN0YXRlLT5jcnRjOwo+ICsJZWxzZSBpZiAocGxhbmUtPnN0YXRlICYmIHBsYW5lLT5zdGF0ZS0+
Y3J0YykKPiArCQljcnRjID0gcGxhbmUtPnN0YXRlLT5jcnRjOwo+ICsJZWxzZQo+ICsJCXJldHVy
biAwOyAvKiBkaXNhYmxpbmcgYW4gYWxyZWFkeSBkaXNhYmxlZCBwbGFuZSAqLwo+ICsKPiArCWNy
dGNfc3RhdGUgPSBkcm1fYXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShzdGF0ZS0+c3RhdGUsIGNy
dGMpOwo+ICsJaWYgKFdBUk5fT05fT05DRSghY3J0Y19zdGF0ZSkpCj4gKwkJcmV0dXJuIC1FSU5W
QUw7IC8qIEJVRzogbm8gbmV3IENSVEMgc3RhdGUgYWxsb2NhdGVkICovCj4gKwo+ICsJcmV0ID0g
ZHJtX2F0b21pY19oZWxwZXJfY2hlY2tfcGxhbmVfc3RhdGUoc3RhdGUsIGNydGNfc3RhdGUsCj4g
KwkJCQkJCSAgRFJNX1BMQU5FX0hFTFBFUl9OT19TQ0FMSU5HLAo+ICsJCQkJCQkgIERSTV9QTEFO
RV9IRUxQRVJfTk9fU0NBTElORywKPiArCQkJCQkJICBmYWxzZSwgdHJ1ZSk7CgpQcmV0dHkgc3Vy
ZSB5b3Ugd2FudCB5b3VyIGN1cnNvciB0byBiZSBwb3NpdGlvbmFibGUgLi4uCi1EYW5pZWwKCj4g
KwlpZiAocmV0KQo+ICsJCXJldHVybiByZXQ7Cj4gKwo+ICAJcmV0dXJuIDA7Cj4gIH0KPiAKPiAt
LQo+IDIuMjMuMAo+IAoKLS0gCkRhbmllbCBWZXR0ZXIKU29mdHdhcmUgRW5naW5lZXIsIEludGVs
IENvcnBvcmF0aW9uCmh0dHA6Ly9ibG9nLmZmd2xsLmNoCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
