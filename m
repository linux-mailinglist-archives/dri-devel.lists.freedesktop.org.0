Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C797822B24E
	for <lists+dri-devel@lfdr.de>; Thu, 23 Jul 2020 17:17:22 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1D3AB6E202;
	Thu, 23 Jul 2020 15:17:19 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ej1-x642.google.com (mail-ej1-x642.google.com
 [IPv6:2a00:1450:4864:20::642])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 33B6C6E1B8
 for <dri-devel@lists.freedesktop.org>; Thu, 23 Jul 2020 15:17:16 +0000 (UTC)
Received: by mail-ej1-x642.google.com with SMTP id y10so6821186eje.1
 for <dri-devel@lists.freedesktop.org>; Thu, 23 Jul 2020 08:17:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=bRcB6qDkid9x/L9m1OrWItz4se9zOJmEQaqV2XLGNjI=;
 b=glgoMWJhnkVdh8idk5+jC9atxuH/6odt0H0nhP+tAN/ipYwn2oNL7emM7ME+KShNdB
 RSEh+bPfHBu1CF4SpoT1oAQ6NRvyz19USgNN/cifDVO8belskgEhqT25+kkTlGt/m/lJ
 9Vf2ugcWxlimjhYbchFdujw7ARLCIR8um4XPse5IuUS29QP5uuu4lct6JqsJDyxvny/1
 43KgxJo7cn0I+AcW/w87lz0Y7Ji9v28cQzttt6B0VJQ55ju7LrboSIZMnZ7AzqEfQWU6
 yszurjDmwWZKjigCw4r74eSGYbyfuhqAGtl08TSdsr/9ggARQjbRAPGDllaQAzKFSXSP
 Y06Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=bRcB6qDkid9x/L9m1OrWItz4se9zOJmEQaqV2XLGNjI=;
 b=YC1KLAqGIRGDBeDRvuFWaxuMZ54oATFEVZQL2p7em3aCg9Lbcvx9uKWlKSkH32vs4k
 r3cWAl2pCBYKeev+t4KELcaMQxjUPELOIpSgkN1ruPN5RdYJcMKOzvO+19h8NQN9FAdf
 LoP42q2sZ5psCPFgF8Vp4WtkecEnjsHK5hqi9hNQbloJECaCKImWjV89VgP+3tO5OTMr
 3C12NBVMBRSxQcK+P03i4gdkTL9DNWv0j2IpLyfn0mJMSTZHHWpvM7xuwKzG/p5ZYXBx
 u98nBjDG30LJtFNivqQgd/n4G+MdFCYxb77yqzJ2AB2RXQ4NstpsxuECjc7QODkMk1gt
 bkrw==
X-Gm-Message-State: AOAM531ZgiJgKJgxXeW0IaYu6BbK//vI1ZlBaXpc1BQfK7IfZrp6c2BH
 Xy6aWr8fy1Pb01u4ceRjF3nGTuYa
X-Google-Smtp-Source: ABdhPJx384EBhfXQtfwsiLJFluxd6qX1PhGFKeFPAVC0Hkfxyky1X6YkclA00QFjJ56twuLTHP5AQw==
X-Received: by 2002:a17:906:dc12:: with SMTP id
 yy18mr4528459ejb.295.1595517434345; 
 Thu, 23 Jul 2020 08:17:14 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:4ca2:7494:c4d6:51a4])
 by smtp.gmail.com with ESMTPSA id q6sm2239197ejn.30.2020.07.23.08.17.13
 for <dri-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 23 Jul 2020 08:17:13 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 2/9] drm/ttm: remove TTM_MEMTYPE_FLAG_FIXED
Date: Thu, 23 Jul 2020 17:17:03 +0200
Message-Id: <20200723151710.3591-3-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200723151710.3591-1-christian.koenig@amd.com>
References: <20200723151710.3591-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW5zdGVhZCB1c2UgYSBib29sZWFuIGZpZWxkIGluIHRoZSBtZW1vcnkgbWFuYWdlciBzdHJ1Y3R1
cmUuCgpBbHNvIGludmVydCB0aGUgbWVhbmluZyBvZiB0aGUgZmllbGQgc2luY2UgdGhlIHVzZSBv
ZiBhIFRUCnN0cnVjdHVyZSBpcyB0aGUgc3BlY2lhbCBjYXNlIGhlcmUuCgpTaWduZWQtb2ZmLWJ5
OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Ci0tLQogZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jICAgIHwgIDQgKy0tLQogZHJpdmVycy9n
cHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYyAgICAgIHwgIDEgLQogZHJpdmVycy9ncHUvZHJt
L25vdXZlYXUvbm91dmVhdV9iby5jICAgICAgIHwgIDQgKy0tLQogZHJpdmVycy9ncHUvZHJtL3F4
bC9xeGxfdHRtLmMgICAgICAgICAgICAgIHwgIDEgLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9y
YWRlb25fdHRtLmMgICAgICAgIHwgIDMgKy0tCiBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5j
ICAgICAgICAgICAgICAgfCAxNCArKysrKysrLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL3R0bS90
dG1fYm9fdXRpbC5jICAgICAgICAgIHwgMTIgKysrKysrLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0v
dm13Z2Z4L3Ztd2dmeF90dG1fYnVmZmVyLmMgfCAgMyArKy0KIGluY2x1ZGUvZHJtL3R0bS90dG1f
Ym9fZHJpdmVyLmggICAgICAgICAgICB8ICA0ICstLS0KIDkgZmlsZXMgY2hhbmdlZCwgMTkgaW5z
ZXJ0aW9ucygrKSwgMjcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3R0bS5jCmluZGV4IGU1N2M0OWE5MWI3My4uNDA2YmNiMDNkZjQ4IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jCkBAIC04NywxNSArODcsMTQgQEAgc3RhdGljIGlu
dCBhbWRncHVfaW5pdF9tZW1fdHlwZShzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldiwgdWludDMy
X3QgdHlwZSwKIAkJYnJlYWs7CiAJY2FzZSBUVE1fUExfVFQ6CiAJCS8qIEdUVCBtZW1vcnkgICov
CisJCW1hbi0+dXNlX3R0ID0gdHJ1ZTsKIAkJbWFuLT5mdW5jID0gJmFtZGdwdV9ndHRfbWdyX2Z1
bmM7CiAJCW1hbi0+YXZhaWxhYmxlX2NhY2hpbmcgPSBUVE1fUExfTUFTS19DQUNISU5HOwogCQlt
YW4tPmRlZmF1bHRfY2FjaGluZyA9IFRUTV9QTF9GTEFHX0NBQ0hFRDsKLQkJbWFuLT5mbGFncyA9
IDA7CiAJCWJyZWFrOwogCWNhc2UgVFRNX1BMX1ZSQU06CiAJCS8qICJPbi1jYXJkIiB2aWRlbyBy
YW0gKi8KIAkJbWFuLT5mdW5jID0gJmFtZGdwdV92cmFtX21ncl9mdW5jOwotCQltYW4tPmZsYWdz
ID0gVFRNX01FTVRZUEVfRkxBR19GSVhFRDsKIAkJbWFuLT5hdmFpbGFibGVfY2FjaGluZyA9IFRU
TV9QTF9GTEFHX1VOQ0FDSEVEIHwgVFRNX1BMX0ZMQUdfV0M7CiAJCW1hbi0+ZGVmYXVsdF9jYWNo
aW5nID0gVFRNX1BMX0ZMQUdfV0M7CiAJCWJyZWFrOwpAQCAtMTA0LDcgKzEwMyw2IEBAIHN0YXRp
YyBpbnQgYW1kZ3B1X2luaXRfbWVtX3R5cGUoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsIHVp
bnQzMl90IHR5cGUsCiAJY2FzZSBBTURHUFVfUExfT0E6CiAJCS8qIE9uLWNoaXAgR0RTIG1lbW9y
eSovCiAJCW1hbi0+ZnVuYyA9ICZ0dG1fYm9fbWFuYWdlcl9mdW5jOwotCQltYW4tPmZsYWdzID0g
VFRNX01FTVRZUEVfRkxBR19GSVhFRDsKIAkJbWFuLT5hdmFpbGFibGVfY2FjaGluZyA9IFRUTV9Q
TF9GTEFHX1VOQ0FDSEVEOwogCQltYW4tPmRlZmF1bHRfY2FjaGluZyA9IFRUTV9QTF9GTEFHX1VO
Q0FDSEVEOwogCQlicmVhazsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3Zy
YW1faGVscGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5jCmluZGV4
IGJlMTc3YWZkZWI5YS4uODAxYTE0YzZlOWUwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
ZHJtX2dlbV92cmFtX2hlbHBlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3ZyYW1f
aGVscGVyLmMKQEAgLTEwMTIsNyArMTAxMiw2IEBAIHN0YXRpYyBpbnQgYm9fZHJpdmVyX2luaXRf
bWVtX3R5cGUoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsIHVpbnQzMl90IHR5cGUsCiAJCWJy
ZWFrOwogCWNhc2UgVFRNX1BMX1ZSQU06CiAJCW1hbi0+ZnVuYyA9ICZ0dG1fYm9fbWFuYWdlcl9m
dW5jOwotCQltYW4tPmZsYWdzID0gVFRNX01FTVRZUEVfRkxBR19GSVhFRDsKIAkJbWFuLT5hdmFp
bGFibGVfY2FjaGluZyA9IFRUTV9QTF9GTEFHX1VOQ0FDSEVEIHwKIAkJCQkJIFRUTV9QTF9GTEFH
X1dDOwogCQltYW4tPmRlZmF1bHRfY2FjaGluZyA9IFRUTV9QTF9GTEFHX1dDOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jIGIvZHJpdmVycy9ncHUvZHJt
L25vdXZlYXUvbm91dmVhdV9iby5jCmluZGV4IDUzYWYyNTAyMGJiMi4uYTNhZDY2YWQzODE3IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jCkBAIC02NTcsNyArNjU3LDYgQEAgbm91
dmVhdV9ib19pbml0X21lbV90eXBlKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LCB1aW50MzJf
dCB0eXBlLAogCWNhc2UgVFRNX1BMX1NZU1RFTToKIAkJYnJlYWs7CiAJY2FzZSBUVE1fUExfVlJB
TToKLQkJbWFuLT5mbGFncyA9IFRUTV9NRU1UWVBFX0ZMQUdfRklYRUQ7CiAJCW1hbi0+YXZhaWxh
YmxlX2NhY2hpbmcgPSBUVE1fUExfRkxBR19VTkNBQ0hFRCB8CiAJCQkJCSBUVE1fUExfRkxBR19X
QzsKIAkJbWFuLT5kZWZhdWx0X2NhY2hpbmcgPSBUVE1fUExfRkxBR19XQzsKQEAgLTY4NSwxMyAr
Njg0LDEyIEBAIG5vdXZlYXVfYm9faW5pdF9tZW1fdHlwZShzdHJ1Y3QgdHRtX2JvX2RldmljZSAq
YmRldiwgdWludDMyX3QgdHlwZSwKIAkJZWxzZQogCQkJbWFuLT5mdW5jID0gJnR0bV9ib19tYW5h
Z2VyX2Z1bmM7CiAKKwkJbWFuLT51c2VfdHQgPSB0cnVlOwogCQlpZiAoZHJtLT5hZ3AuYnJpZGdl
KSB7Ci0JCQltYW4tPmZsYWdzID0gMDsKIAkJCW1hbi0+YXZhaWxhYmxlX2NhY2hpbmcgPSBUVE1f
UExfRkxBR19VTkNBQ0hFRCB8CiAJCQkJVFRNX1BMX0ZMQUdfV0M7CiAJCQltYW4tPmRlZmF1bHRf
Y2FjaGluZyA9IFRUTV9QTF9GTEFHX1dDOwogCQl9IGVsc2UgewotCQkJbWFuLT5mbGFncyA9IDA7
CiAJCQltYW4tPmF2YWlsYWJsZV9jYWNoaW5nID0gVFRNX1BMX01BU0tfQ0FDSElORzsKIAkJCW1h
bi0+ZGVmYXVsdF9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfQ0FDSEVEOwogCQl9CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF90dG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhs
X3R0bS5jCmluZGV4IGU5YjhjOTIxYzFmMC4uYWJiOWZhNGQ4MGNmIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vcXhsL3F4bF90dG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF90
dG0uYwpAQCAtNTksNyArNTksNiBAQCBzdGF0aWMgaW50IHF4bF9pbml0X21lbV90eXBlKHN0cnVj
dCB0dG1fYm9fZGV2aWNlICpiZGV2LCB1aW50MzJfdCB0eXBlLAogCWNhc2UgVFRNX1BMX1BSSVY6
CiAJCS8qICJPbi1jYXJkIiB2aWRlbyByYW0gKi8KIAkJbWFuLT5mdW5jID0gJnR0bV9ib19tYW5h
Z2VyX2Z1bmM7Ci0JCW1hbi0+ZmxhZ3MgPSBUVE1fTUVNVFlQRV9GTEFHX0ZJWEVEOwogCQltYW4t
PmF2YWlsYWJsZV9jYWNoaW5nID0gVFRNX1BMX01BU0tfQ0FDSElORzsKIAkJbWFuLT5kZWZhdWx0
X2NhY2hpbmcgPSBUVE1fUExfRkxBR19DQUNIRUQ7CiAJCWJyZWFrOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9u
L3JhZGVvbl90dG0uYwppbmRleCBiNGNiNzUzNjE1NzcuLjlhYmExOGExNDNlNyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMKQEAgLTgxLDcgKzgxLDcgQEAgc3RhdGljIGludCByYWRl
b25faW5pdF9tZW1fdHlwZShzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldiwgdWludDMyX3QgdHlw
ZSwKIAkJbWFuLT5mdW5jID0gJnR0bV9ib19tYW5hZ2VyX2Z1bmM7CiAJCW1hbi0+YXZhaWxhYmxl
X2NhY2hpbmcgPSBUVE1fUExfTUFTS19DQUNISU5HOwogCQltYW4tPmRlZmF1bHRfY2FjaGluZyA9
IFRUTV9QTF9GTEFHX0NBQ0hFRDsKLQkJbWFuLT5mbGFncyA9IDA7CisJCW1hbi0+dXNlX3R0ID0g
dHJ1ZTsKICNpZiBJU19FTkFCTEVEKENPTkZJR19BR1ApCiAJCWlmIChyZGV2LT5mbGFncyAmIFJB
REVPTl9JU19BR1ApIHsKIAkJCWlmICghcmRldi0+ZGRldi0+YWdwKSB7CkBAIC05OCw3ICs5OCw2
IEBAIHN0YXRpYyBpbnQgcmFkZW9uX2luaXRfbWVtX3R5cGUoc3RydWN0IHR0bV9ib19kZXZpY2Ug
KmJkZXYsIHVpbnQzMl90IHR5cGUsCiAJY2FzZSBUVE1fUExfVlJBTToKIAkJLyogIk9uLWNhcmQi
IHZpZGVvIHJhbSAqLwogCQltYW4tPmZ1bmMgPSAmdHRtX2JvX21hbmFnZXJfZnVuYzsKLQkJbWFu
LT5mbGFncyA9IFRUTV9NRU1UWVBFX0ZMQUdfRklYRUQ7CiAJCW1hbi0+YXZhaWxhYmxlX2NhY2hp
bmcgPSBUVE1fUExfRkxBR19VTkNBQ0hFRCB8IFRUTV9QTF9GTEFHX1dDOwogCQltYW4tPmRlZmF1
bHRfY2FjaGluZyA9IFRUTV9QTF9GTEFHX1dDOwogCQlicmVhazsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS90dG0vdHRtX2JvLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCmlu
ZGV4IDFmMWY5ZTQ2MzI2NS4uNmRlYTU2ZGNlMzUwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vdHRtL3R0bV9iby5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKQEAgLTg0
LDcgKzg0LDcgQEAgc3RhdGljIHZvaWQgdHRtX21lbV90eXBlX2RlYnVnKHN0cnVjdCB0dG1fYm9f
ZGV2aWNlICpiZGV2LCBzdHJ1Y3QgZHJtX3ByaW50ZXIgKnAKIAogCWRybV9wcmludGYocCwgIiAg
ICBoYXNfdHlwZTogJWRcbiIsIG1hbi0+aGFzX3R5cGUpOwogCWRybV9wcmludGYocCwgIiAgICB1
c2VfdHlwZTogJWRcbiIsIG1hbi0+dXNlX3R5cGUpOwotCWRybV9wcmludGYocCwgIiAgICBmbGFn
czogMHglMDhYXG4iLCBtYW4tPmZsYWdzKTsKKwlkcm1fcHJpbnRmKHAsICIgICAgdXNlX3R0OiAl
ZFxuIiwgbWFuLT51c2VfdHQpOwogCWRybV9wcmludGYocCwgIiAgICBzaXplOiAlbGx1XG4iLCBt
YW4tPnNpemUpOwogCWRybV9wcmludGYocCwgIiAgICBhdmFpbGFibGVfY2FjaGluZzogMHglMDhY
XG4iLCBtYW4tPmF2YWlsYWJsZV9jYWNoaW5nKTsKIAlkcm1fcHJpbnRmKHAsICIgICAgZGVmYXVs
dF9jYWNoaW5nOiAweCUwOFhcbiIsIG1hbi0+ZGVmYXVsdF9jYWNoaW5nKTsKQEAgLTE1OSw3ICsx
NTksNyBAQCBzdGF0aWMgdm9pZCB0dG1fYm9fYWRkX21lbV90b19scnUoc3RydWN0IHR0bV9idWZm
ZXJfb2JqZWN0ICpibywKIAltYW4gPSAmYmRldi0+bWFuW21lbS0+bWVtX3R5cGVdOwogCWxpc3Rf
YWRkX3RhaWwoJmJvLT5scnUsICZtYW4tPmxydVtiby0+cHJpb3JpdHldKTsKIAotCWlmICghKG1h
bi0+ZmxhZ3MgJiBUVE1fTUVNVFlQRV9GTEFHX0ZJWEVEKSAmJiBiby0+dHRtICYmCisJaWYgKG1h
bi0+dXNlX3R0ICYmIGJvLT50dG0gJiYKIAkgICAgIShiby0+dHRtLT5wYWdlX2ZsYWdzICYgKFRU
TV9QQUdFX0ZMQUdfU0cgfAogCQkJCSAgICAgVFRNX1BBR0VfRkxBR19TV0FQUEVEKSkpIHsKIAkJ
bGlzdF9hZGRfdGFpbCgmYm8tPnN3YXAsICZ0dG1fYm9fZ2xvYi5zd2FwX2xydVtiby0+cHJpb3Jp
dHldKTsKQEAgLTI4Niw4ICsyODYsOCBAQCBzdGF0aWMgaW50IHR0bV9ib19oYW5kbGVfbW92ZV9t
ZW0oc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKIAkgKiBDcmVhdGUgYW5kIGJpbmQgYSB0
dG0gaWYgcmVxdWlyZWQuCiAJICovCiAKLQlpZiAoIShuZXdfbWFuLT5mbGFncyAmIFRUTV9NRU1U
WVBFX0ZMQUdfRklYRUQpKSB7Ci0JCWJvb2wgemVybyA9ICEob2xkX21hbi0+ZmxhZ3MgJiBUVE1f
TUVNVFlQRV9GTEFHX0ZJWEVEKTsKKwlpZiAobmV3X21hbi0+dXNlX3R0KSB7CisJCWJvb2wgemVy
byA9IG9sZF9tYW4tPnVzZV90dDsKIAogCQlyZXQgPSB0dG1fdHRfY3JlYXRlKGJvLCB6ZXJvKTsK
IAkJaWYgKHJldCkKQEAgLTMxNCw4ICszMTQsNyBAQCBzdGF0aWMgaW50IHR0bV9ib19oYW5kbGVf
bW92ZV9tZW0oc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKIAlpZiAoYmRldi0+ZHJpdmVy
LT5tb3ZlX25vdGlmeSkKIAkJYmRldi0+ZHJpdmVyLT5tb3ZlX25vdGlmeShibywgZXZpY3QsIG1l
bSk7CiAKLQlpZiAoIShvbGRfbWFuLT5mbGFncyAmIFRUTV9NRU1UWVBFX0ZMQUdfRklYRUQpICYm
Ci0JICAgICEobmV3X21hbi0+ZmxhZ3MgJiBUVE1fTUVNVFlQRV9GTEFHX0ZJWEVEKSkKKwlpZiAo
b2xkX21hbi0+dXNlX3R0ICYmIG5ld19tYW4tPnVzZV90dCkKIAkJcmV0ID0gdHRtX2JvX21vdmVf
dHRtKGJvLCBjdHgsIG1lbSk7CiAJZWxzZSBpZiAoYmRldi0+ZHJpdmVyLT5tb3ZlKQogCQlyZXQg
PSBiZGV2LT5kcml2ZXItPm1vdmUoYm8sIGV2aWN0LCBjdHgsIG1lbSk7CkBAIC0zNDAsNyArMzM5
LDcgQEAgc3RhdGljIGludCB0dG1fYm9faGFuZGxlX21vdmVfbWVtKHN0cnVjdCB0dG1fYnVmZmVy
X29iamVjdCAqYm8sCiAKIG91dF9lcnI6CiAJbmV3X21hbiA9ICZiZGV2LT5tYW5bYm8tPm1lbS5t
ZW1fdHlwZV07Ci0JaWYgKG5ld19tYW4tPmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19GSVhFRCkg
eworCWlmICghbmV3X21hbi0+dXNlX3R0KSB7CiAJCXR0bV90dF9kZXN0cm95KGJvLT50dG0pOwog
CQliby0+dHRtID0gTlVMTDsKIAl9CkBAIC0xNjc3LDYgKzE2NzYsNyBAQCBpbnQgdHRtX2JvX2Rl
dmljZV9pbml0KHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LAogCSAqIEluaXRpYWxpemUgdGhl
IHN5c3RlbSBtZW1vcnkgYnVmZmVyIHR5cGUuCiAJICogT3RoZXIgdHlwZXMgbmVlZCB0byBiZSBk
cml2ZXIgLyBJT0NUTCBpbml0aWFsaXplZC4KIAkgKi8KKwliZGV2LT5tYW5bVFRNX1BMX1NZU1RF
TV0udXNlX3R0ID0gdHJ1ZTsKIAliZGV2LT5tYW5bVFRNX1BMX1NZU1RFTV0uYXZhaWxhYmxlX2Nh
Y2hpbmcgPSBUVE1fUExfTUFTS19DQUNISU5HOwogCWJkZXYtPm1hbltUVE1fUExfU1lTVEVNXS5k
ZWZhdWx0X2NhY2hpbmcgPSBUVE1fUExfRkxBR19DQUNIRUQ7CiAJcmV0ID0gdHRtX2JvX2luaXRf
bW0oYmRldiwgVFRNX1BMX1NZU1RFTSwgMCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV9ib191dGlsLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMKaW5k
ZXggN2ZiM2UwYmNiYWI0Li4xZjUwMmJlMGI2NDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2JvX3V0aWwuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGls
LmMKQEAgLTM4NCw3ICszODQsNyBAQCBpbnQgdHRtX2JvX21vdmVfbWVtY3B5KHN0cnVjdCB0dG1f
YnVmZmVyX29iamVjdCAqYm8sCiAJKm9sZF9tZW0gPSAqbmV3X21lbTsKIAluZXdfbWVtLT5tbV9u
b2RlID0gTlVMTDsKIAotCWlmIChtYW4tPmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19GSVhFRCkg
eworCWlmICghbWFuLT51c2VfdHQpIHsKIAkJdHRtX3R0X2Rlc3Ryb3kodHRtKTsKIAkJYm8tPnR0
bSA9IE5VTEw7CiAJfQpAQCAtNjQ1LDcgKzY0NSw3IEBAIGludCB0dG1fYm9fbW92ZV9hY2NlbF9j
bGVhbnVwKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJCWlmIChyZXQpCiAJCQlyZXR1
cm4gcmV0OwogCi0JCWlmIChtYW4tPmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19GSVhFRCkgewor
CQlpZiAoIW1hbi0+dXNlX3R0KSB7CiAJCQl0dG1fdHRfZGVzdHJveShiby0+dHRtKTsKIAkJCWJv
LT50dG0gPSBOVUxMOwogCQl9CkBAIC02NzQsNyArNjc0LDcgQEAgaW50IHR0bV9ib19tb3ZlX2Fj
Y2VsX2NsZWFudXAoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKIAkJICogYm8gdG8gYmUg
dW5ib3VuZCBhbmQgZGVzdHJveWVkLgogCQkgKi8KIAotCQlpZiAoIShtYW4tPmZsYWdzICYgVFRN
X01FTVRZUEVfRkxBR19GSVhFRCkpCisJCWlmIChtYW4tPnVzZV90dCkKIAkJCWdob3N0X29iai0+
dHRtID0gTlVMTDsKIAkJZWxzZQogCQkJYm8tPnR0bSA9IE5VTEw7CkBAIC03MzAsNyArNzMwLDcg
QEAgaW50IHR0bV9ib19waXBlbGluZV9tb3ZlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8s
CiAJCSAqIGJvIHRvIGJlIHVuYm91bmQgYW5kIGRlc3Ryb3llZC4KIAkJICovCiAKLQkJaWYgKCEo
dG8tPmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19GSVhFRCkpCisJCWlmICh0by0+dXNlX3R0KQog
CQkJZ2hvc3Rfb2JqLT50dG0gPSBOVUxMOwogCQllbHNlCiAJCQliby0+dHRtID0gTlVMTDsKQEAg
LTczOCw3ICs3MzgsNyBAQCBpbnQgdHRtX2JvX3BpcGVsaW5lX21vdmUoc3RydWN0IHR0bV9idWZm
ZXJfb2JqZWN0ICpibywKIAkJZG1hX3Jlc3ZfdW5sb2NrKCZnaG9zdF9vYmotPmJhc2UuX3Jlc3Yp
OwogCQl0dG1fYm9fcHV0KGdob3N0X29iaik7CiAKLQl9IGVsc2UgaWYgKGZyb20tPmZsYWdzICYg
VFRNX01FTVRZUEVfRkxBR19GSVhFRCkgeworCX0gZWxzZSBpZiAoIWZyb20tPnVzZV90dCkgewog
CiAJCS8qKgogCQkgKiBCTyBkb2Vzbid0IGhhdmUgYSBUVE0gd2UgbmVlZCB0byBiaW5kL3VuYmlu
ZC4gSnVzdCByZW1lbWJlcgpAQCAtNzY4LDcgKzc2OCw3IEBAIGludCB0dG1fYm9fcGlwZWxpbmVf
bW92ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAogCQlpZiAocmV0KQogCQkJcmV0dXJu
IHJldDsKIAotCQlpZiAodG8tPmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19GSVhFRCkgeworCQlp
ZiAoIXRvLT51c2VfdHQpIHsKIAkJCXR0bV90dF9kZXN0cm95KGJvLT50dG0pOwogCQkJYm8tPnR0
bSA9IE5VTEw7CiAJCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4
X3R0bV9idWZmZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3R0bV9idWZmZXIu
YwppbmRleCAwMGNlZjFhM2ExNzguLjVkODE3OWQ5ZjM5NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3Ztd2dmeC92bXdnZnhfdHRtX2J1ZmZlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92
bXdnZngvdm13Z2Z4X3R0bV9idWZmZXIuYwpAQCAtNzQ2LDcgKzc0Niw2IEBAIHN0YXRpYyBpbnQg
dm13X2luaXRfbWVtX3R5cGUoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsIHVpbnQzMl90IHR5
cGUsCiAJY2FzZSBUVE1fUExfVlJBTToKIAkJLyogIk9uLWNhcmQiIHZpZGVvIHJhbSAqLwogCQlt
YW4tPmZ1bmMgPSAmdm13X3RocF9mdW5jOwotCQltYW4tPmZsYWdzID0gVFRNX01FTVRZUEVfRkxB
R19GSVhFRDsKIAkJbWFuLT5hdmFpbGFibGVfY2FjaGluZyA9IFRUTV9QTF9GTEFHX0NBQ0hFRDsK
IAkJbWFuLT5kZWZhdWx0X2NhY2hpbmcgPSBUVE1fUExfRkxBR19DQUNIRUQ7CiAJCWJyZWFrOwpA
QCAtNzYwLDYgKzc1OSw4IEBAIHN0YXRpYyBpbnQgdm13X2luaXRfbWVtX3R5cGUoc3RydWN0IHR0
bV9ib19kZXZpY2UgKmJkZXYsIHVpbnQzMl90IHR5cGUsCiAJCW1hbi0+ZnVuYyA9ICZ2bXdfZ21y
aWRfbWFuYWdlcl9mdW5jOwogCQltYW4tPmF2YWlsYWJsZV9jYWNoaW5nID0gVFRNX1BMX0ZMQUdf
Q0FDSEVEOwogCQltYW4tPmRlZmF1bHRfY2FjaGluZyA9IFRUTV9QTF9GTEFHX0NBQ0hFRDsKKwkJ
LyogVE9ETzogVGhpcyBpcyBtb3N0IGxpa2VseSBub3QgY29ycmVjdCAqLworCQltYW4tPnVzZV90
dCA9IHRydWU7CiAJCWJyZWFrOwogCWRlZmF1bHQ6CiAJCURSTV9FUlJPUigiVW5zdXBwb3J0ZWQg
bWVtb3J5IHR5cGUgJXVcbiIsICh1bnNpZ25lZCl0eXBlKTsKZGlmZiAtLWdpdCBhL2luY2x1ZGUv
ZHJtL3R0bS90dG1fYm9fZHJpdmVyLmggYi9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2RyaXZlci5o
CmluZGV4IDliMjUxODUzYWZlMi4uYWRhYzRjZDBiYTIzIDEwMDY0NAotLS0gYS9pbmNsdWRlL2Ry
bS90dG0vdHRtX2JvX2RyaXZlci5oCisrKyBiL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJpdmVy
LmgKQEAgLTQ1LDggKzQ1LDYgQEAKIAogI2RlZmluZSBUVE1fTUFYX0JPX1BSSU9SSVRZCTRVCiAK
LSNkZWZpbmUgVFRNX01FTVRZUEVfRkxBR19GSVhFRCAgICAgICAgICgxIDw8IDApCS8qIEZpeGVk
IChvbi1jYXJkKSBQQ0kgbWVtb3J5ICovCi0KIHN0cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdlcjsK
IAogc3RydWN0IHR0bV9tZW1fdHlwZV9tYW5hZ2VyX2Z1bmMgewpAQCAtMTczLDcgKzE3MSw3IEBA
IHN0cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdlciB7CiAKIAlib29sIGhhc190eXBlOwogCWJvb2wg
dXNlX3R5cGU7Ci0JdWludDMyX3QgZmxhZ3M7CisJYm9vbCB1c2VfdHQ7CiAJdWludDY0X3Qgc2l6
ZTsKIAl1aW50MzJfdCBhdmFpbGFibGVfY2FjaGluZzsKIAl1aW50MzJfdCBkZWZhdWx0X2NhY2hp
bmc7Ci0tIAoyLjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1k
ZXZlbAo=
