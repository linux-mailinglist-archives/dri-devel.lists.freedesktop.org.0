Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D071DB9A35
	for <lists+dri-devel@lfdr.de>; Sat, 21 Sep 2019 01:20:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1F9FC6FE27;
	Fri, 20 Sep 2019 23:20:16 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yw1-xc4a.google.com (mail-yw1-xc4a.google.com
 [IPv6:2607:f8b0:4864:20::c4a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BB0296FE27
 for <dri-devel@lists.freedesktop.org>; Fri, 20 Sep 2019 23:20:13 +0000 (UTC)
Received: by mail-yw1-xc4a.google.com with SMTP id k12so6753612ywe.18
 for <dri-devel@lists.freedesktop.org>; Fri, 20 Sep 2019 16:20:13 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=aABf1eQBMP6/WvpZsyoq3EyRjH0cX7yhFaKM6+EkpH4=;
 b=ZVzQwlKbNq24jzTBo/pRiF0wepY85mzFzxetpStFaRw9GZC3uFVB6wjc8tKGirlx7t
 +dOPvZHF689U/DclcQmD0DLVUA1PZ5I62hsDlwBGB3GhHuL+hW98qYbq/tZ0oCKQI20C
 ETLzXIxKa/1eH9QrX7y1YsUOimkcmYNQjqsHCN6V942uL0k1OVNBHJZFFBmb1knOYPx7
 qqcWN26lWfNQNlohWpJffe/usPa0jdb5EWwN1P3AQd41dtPe6MjmakaQBG1eniPj2jwn
 41kx7xwCTpZQ7nAAZbQv2npYrtoczOZ5h9Zm0VgDuJivC/3S+6TTXYBtW63yE0cGXZiH
 q7Dg==
X-Gm-Message-State: APjAAAXGfaKVioCXu8eMfrrz8ngbsovUgqTwdJG0dNg1aZAe05KzLUBe
 l0glZVuBz3TsFwiwIjxklg8QJpPyzExtu09s+2PN1Q==
X-Google-Smtp-Source: APXvYqweqI84X6kIFXp//UjYY7BAsyfmpZhSb5WrEB7msV1QvcEohsykXXMYy3EnpAxoYkj0k9lpHjzJ8iclAUJ1C+DKlg==
X-Received: by 2002:a81:a24f:: with SMTP id z15mr14509682ywg.55.1569021612142; 
 Fri, 20 Sep 2019 16:20:12 -0700 (PDT)
Date: Fri, 20 Sep 2019 16:19:16 -0700
In-Reply-To: <20190920231923.141900-1-brendanhiggins@google.com>
Message-Id: <20190920231923.141900-13-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190920231923.141900-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.23.0.351.gc4317032e6-goog
Subject: [PATCH v16 12/19] kunit: test: add tests for KUnit managed resources
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=aABf1eQBMP6/WvpZsyoq3EyRjH0cX7yhFaKM6+EkpH4=;
 b=C8CTpH7hjt5YzOI8L3ZXZdx+UjDYARIDHHjQ/7OtEDOsGIfUTly+gb2r4DffPT2x7P
 4vRLIiK1XK9TvUnkfkNU1Iv9kUN8urfJiAOsHRGh0rwJ8k9Ny1vyB/ixjD51NAsOwCbO
 FRInTaqsz/Bd8gz2nilcPiISmipuNqdZi9TZdJaanGF6Re0R4bHhbmbZDoOTAg98B5vF
 D2QLWdOrGKPy9B47ek5ANwRKVa8jMt08wD6F/S/feLXmidmt6srqGWOW5ZgWIW0/Rm+Q
 OQaWqX+oD7QR9eH/jyHsv+MYWnflZtQKzkZaXkmsA21SGpVoFzW6o3ApmTnQrTzRApNP
 OQkg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com,
 Avinash Kondareddy <akndr41@gmail.com>, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, torvalds@linux-foundation.org, rdunlap@infradead.org,
 linux-kernel@vger.kernel.org, mpe@ellerman.id.au,
 linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogQXZpbmFzaCBLb25kYXJlZGR5IDxha25kcjQxQGdtYWlsLmNvbT4KCkFkZCB1bml0IHRl
c3RzIGZvciBLVW5pdCBtYW5hZ2VkIHJlc291cmNlcy4gS1VuaXQgbWFuYWdlZCByZXNvdXJjZXMK
KHN0cnVjdCBrdW5pdF9yZXNvdXJjZSkgYXJlIHJlc291cmNlcyB0aGF0IGFyZSBhdXRvbWF0aWNh
bGx5IGNsZWFuZWQgdXAKYXQgdGhlIGVuZCBvZiBhIEtVbml0IHRlc3QsIHNpbWlsYXIgdG8gdGhl
IGNvbmNlcHQgb2YgZGV2bV8qIG1hbmFnZWQKcmVzb3VyY2VzLgoKU2lnbmVkLW9mZi1ieTogQXZp
bmFzaCBLb25kYXJlZGR5IDxha25kcjQxQGdtYWlsLmNvbT4KU2lnbmVkLW9mZi1ieTogQnJlbmRh
biBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29tPgpSZXZpZXdlZC1ieTogR3JlZyBL
cm9haC1IYXJ0bWFuIDxncmVna2hAbGludXhmb3VuZGF0aW9uLm9yZz4KUmV2aWV3ZWQtYnk6IExv
Z2FuIEd1bnRob3JwZSA8bG9nYW5nQGRlbHRhdGVlLmNvbT4KUmV2aWV3ZWQtYnk6IFN0ZXBoZW4g
Qm95ZCA8c2JveWRAa2VybmVsLm9yZz4KLS0tCiBsaWIva3VuaXQvdGVzdC10ZXN0LmMgfCAyMjgg
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAxIGZpbGUgY2hhbmdl
ZCwgMjI4IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9saWIva3VuaXQvdGVzdC10ZXN0LmMg
Yi9saWIva3VuaXQvdGVzdC10ZXN0LmMKaW5kZXggZTBhYjRiZDU0NmVhLi41ZWJlMDU5ZDE2ZTIg
MTAwNjQ0Ci0tLSBhL2xpYi9rdW5pdC90ZXN0LXRlc3QuYworKysgYi9saWIva3VuaXQvdGVzdC10
ZXN0LmMKQEAgLTEwMSwzICsxMDEsMjMxIEBAIHN0YXRpYyBzdHJ1Y3Qga3VuaXRfc3VpdGUga3Vu
aXRfdHJ5X2NhdGNoX3Rlc3Rfc3VpdGUgPSB7CiAJLnRlc3RfY2FzZXMgPSBrdW5pdF90cnlfY2F0
Y2hfdGVzdF9jYXNlcywKIH07CiBrdW5pdF90ZXN0X3N1aXRlKGt1bml0X3RyeV9jYXRjaF90ZXN0
X3N1aXRlKTsKKworLyoKKyAqIENvbnRleHQgZm9yIHRlc3RpbmcgdGVzdCBtYW5hZ2VkIHJlc291
cmNlcworICogaXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQgaXMgdXNlZCB0byB0ZXN0IGFyYml0cmFy
eSByZXNvdXJjZXMKKyAqLworc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCB7CisJ
c3RydWN0IGt1bml0IHRlc3Q7CisJYm9vbCBpc19yZXNvdXJjZV9pbml0aWFsaXplZDsKKwlpbnQg
YWxsb2NhdGVfb3JkZXJbMl07CisJaW50IGZyZWVfb3JkZXJbMl07Cit9OworCitzdGF0aWMgaW50
IGZha2VfcmVzb3VyY2VfaW5pdChzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlcywgdm9pZCAqY29u
dGV4dCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0ICpjdHggPSBjb250
ZXh0OworCisJcmVzLT5hbGxvY2F0aW9uID0gJmN0eC0+aXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQ7
CisJY3R4LT5pc19yZXNvdXJjZV9pbml0aWFsaXplZCA9IHRydWU7CisJcmV0dXJuIDA7Cit9CisK
K3N0YXRpYyB2b2lkIGZha2VfcmVzb3VyY2VfZnJlZShzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJl
cykKK3sKKwlib29sICppc19yZXNvdXJjZV9pbml0aWFsaXplZCA9IHJlcy0+YWxsb2NhdGlvbjsK
KworCSppc19yZXNvdXJjZV9pbml0aWFsaXplZCA9IGZhbHNlOworfQorCitzdGF0aWMgdm9pZCBr
dW5pdF9yZXNvdXJjZV90ZXN0X2luaXRfcmVzb3VyY2VzKHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sK
KwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0ICpjdHggPSB0ZXN0LT5wcml2Owor
CisJa3VuaXRfaW5pdF90ZXN0KCZjdHgtPnRlc3QsICJ0ZXN0aW5nX3Rlc3RfaW5pdF90ZXN0Iik7
CisKKwlLVU5JVF9FWFBFQ1RfVFJVRSh0ZXN0LCBsaXN0X2VtcHR5KCZjdHgtPnRlc3QucmVzb3Vy
Y2VzKSk7Cit9CisKK3N0YXRpYyB2b2lkIGt1bml0X3Jlc291cmNlX3Rlc3RfYWxsb2NfcmVzb3Vy
Y2Uoc3RydWN0IGt1bml0ICp0ZXN0KQoreworCXN0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2Nv
bnRleHQgKmN0eCA9IHRlc3QtPnByaXY7CisJc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXM7CisJ
a3VuaXRfcmVzb3VyY2VfZnJlZV90IGZyZWUgPSBmYWtlX3Jlc291cmNlX2ZyZWU7CisKKwlyZXMg
PSBrdW5pdF9hbGxvY19hbmRfZ2V0X3Jlc291cmNlKCZjdHgtPnRlc3QsCisJCQkJCSAgIGZha2Vf
cmVzb3VyY2VfaW5pdCwKKwkJCQkJICAgZmFrZV9yZXNvdXJjZV9mcmVlLAorCQkJCQkgICBHRlBf
S0VSTkVMLAorCQkJCQkgICBjdHgpOworCisJS1VOSVRfQVNTRVJUX05PVF9FUlJfT1JfTlVMTCh0
ZXN0LCByZXMpOworCUtVTklUX0VYUEVDVF9QVFJfRVEodGVzdCwKKwkJCSAgICAmY3R4LT5pc19y
ZXNvdXJjZV9pbml0aWFsaXplZCwKKwkJCSAgICAoYm9vbCAqKSByZXMtPmFsbG9jYXRpb24pOwor
CUtVTklUX0VYUEVDVF9UUlVFKHRlc3QsIGxpc3RfaXNfbGFzdCgmcmVzLT5ub2RlLCAmY3R4LT50
ZXN0LnJlc291cmNlcykpOworCUtVTklUX0VYUEVDVF9QVFJfRVEodGVzdCwgZnJlZSwgcmVzLT5m
cmVlKTsKK30KKworc3RhdGljIHZvaWQga3VuaXRfcmVzb3VyY2VfdGVzdF9kZXN0cm95X3Jlc291
cmNlKHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9j
b250ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzID0g
a3VuaXRfYWxsb2NfYW5kX2dldF9yZXNvdXJjZSgKKwkJCSZjdHgtPnRlc3QsCisJCQlmYWtlX3Jl
c291cmNlX2luaXQsCisJCQlmYWtlX3Jlc291cmNlX2ZyZWUsCisJCQlHRlBfS0VSTkVMLAorCQkJ
Y3R4KTsKKworCUtVTklUX0FTU0VSVF9GQUxTRSh0ZXN0LAorCQkJICAga3VuaXRfcmVzb3VyY2Vf
ZGVzdHJveSgmY3R4LT50ZXN0LAorCQkJCQkJICBrdW5pdF9yZXNvdXJjZV9pbnN0YW5jZV9tYXRj
aCwKKwkJCQkJCSAgcmVzLT5mcmVlLAorCQkJCQkJICByZXMtPmFsbG9jYXRpb24pKTsKKworCUtV
TklUX0VYUEVDVF9GQUxTRSh0ZXN0LCBjdHgtPmlzX3Jlc291cmNlX2luaXRpYWxpemVkKTsKKwlL
VU5JVF9FWFBFQ1RfVFJVRSh0ZXN0LCBsaXN0X2VtcHR5KCZjdHgtPnRlc3QucmVzb3VyY2VzKSk7
Cit9CisKK3N0YXRpYyB2b2lkIGt1bml0X3Jlc291cmNlX3Rlc3RfY2xlYW51cF9yZXNvdXJjZXMo
c3RydWN0IGt1bml0ICp0ZXN0KQoreworCWludCBpOworCXN0cnVjdCBrdW5pdF90ZXN0X3Jlc291
cmNlX2NvbnRleHQgKmN0eCA9IHRlc3QtPnByaXY7CisJc3RydWN0IGt1bml0X3Jlc291cmNlICpy
ZXNvdXJjZXNbNV07CisKKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShyZXNvdXJjZXMpOyBp
KyspIHsKKwkJcmVzb3VyY2VzW2ldID0ga3VuaXRfYWxsb2NfYW5kX2dldF9yZXNvdXJjZSgmY3R4
LT50ZXN0LAorCQkJCQkJCSAgICBmYWtlX3Jlc291cmNlX2luaXQsCisJCQkJCQkJICAgIGZha2Vf
cmVzb3VyY2VfZnJlZSwKKwkJCQkJCQkgICAgR0ZQX0tFUk5FTCwKKwkJCQkJCQkgICAgY3R4KTsK
Kwl9CisKKwlrdW5pdF9jbGVhbnVwKCZjdHgtPnRlc3QpOworCisJS1VOSVRfRVhQRUNUX1RSVUUo
dGVzdCwgbGlzdF9lbXB0eSgmY3R4LT50ZXN0LnJlc291cmNlcykpOworfQorCitzdGF0aWMgdm9p
ZCBrdW5pdF9yZXNvdXJjZV90ZXN0X21hcmtfb3JkZXIoaW50IG9yZGVyX2FycmF5W10sCisJCQkJ
CSAgIHNpemVfdCBvcmRlcl9zaXplLAorCQkJCQkgICBpbnQga2V5KQoreworCWludCBpOworCisJ
Zm9yIChpID0gMDsgaSA8IG9yZGVyX3NpemUgJiYgb3JkZXJfYXJyYXlbaV07IGkrKykKKwkJOwor
CisJb3JkZXJfYXJyYXlbaV0gPSBrZXk7Cit9CisKKyNkZWZpbmUgS1VOSVRfUkVTT1VSQ0VfVEVT
VF9NQVJLX09SREVSKGN0eCwgb3JkZXJfZmllbGQsIGtleSkJCSAgICAgICBcCisJCWt1bml0X3Jl
c291cmNlX3Rlc3RfbWFya19vcmRlcihjdHgtPm9yZGVyX2ZpZWxkLAkgICAgICAgXAorCQkJCQkg
ICAgICAgQVJSQVlfU0laRShjdHgtPm9yZGVyX2ZpZWxkKSwgICBcCisJCQkJCSAgICAgICBrZXkp
CisKK3N0YXRpYyBpbnQgZmFrZV9yZXNvdXJjZV8yX2luaXQoc3RydWN0IGt1bml0X3Jlc291cmNl
ICpyZXMsIHZvaWQgKmNvbnRleHQpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29u
dGV4dCAqY3R4ID0gY29udGV4dDsKKworCUtVTklUX1JFU09VUkNFX1RFU1RfTUFSS19PUkRFUihj
dHgsIGFsbG9jYXRlX29yZGVyLCAyKTsKKworCXJlcy0+YWxsb2NhdGlvbiA9IGN0eDsKKworCXJl
dHVybiAwOworfQorCitzdGF0aWMgdm9pZCBmYWtlX3Jlc291cmNlXzJfZnJlZShzdHJ1Y3Qga3Vu
aXRfcmVzb3VyY2UgKnJlcykKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0
ICpjdHggPSByZXMtPmFsbG9jYXRpb247CisKKwlLVU5JVF9SRVNPVVJDRV9URVNUX01BUktfT1JE
RVIoY3R4LCBmcmVlX29yZGVyLCAyKTsKK30KKworc3RhdGljIGludCBmYWtlX3Jlc291cmNlXzFf
aW5pdChzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlcywgdm9pZCAqY29udGV4dCkKK3sKKwlzdHJ1
Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0ICpjdHggPSBjb250ZXh0OworCisJa3VuaXRf
YWxsb2NfYW5kX2dldF9yZXNvdXJjZSgmY3R4LT50ZXN0LAorCQkJCSAgICAgZmFrZV9yZXNvdXJj
ZV8yX2luaXQsCisJCQkJICAgICBmYWtlX3Jlc291cmNlXzJfZnJlZSwKKwkJCQkgICAgIEdGUF9L
RVJORUwsCisJCQkJICAgICBjdHgpOworCisJS1VOSVRfUkVTT1VSQ0VfVEVTVF9NQVJLX09SREVS
KGN0eCwgYWxsb2NhdGVfb3JkZXIsIDEpOworCisJcmVzLT5hbGxvY2F0aW9uID0gY3R4OworCisJ
cmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lkIGZha2VfcmVzb3VyY2VfMV9mcmVlKHN0cnVjdCBr
dW5pdF9yZXNvdXJjZSAqcmVzKQoreworCXN0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRl
eHQgKmN0eCA9IHJlcy0+YWxsb2NhdGlvbjsKKworCUtVTklUX1JFU09VUkNFX1RFU1RfTUFSS19P
UkRFUihjdHgsIGZyZWVfb3JkZXIsIDEpOworfQorCisvKgorICogVE9ETyhicmVuZGFuaGlnZ2lu
c0Bnb29nbGUuY29tKTogcmVwbGFjZSB0aGUgYXJyYXlzIHRoYXQga2VlcCB0cmFjayBvZiB0aGUK
KyAqIG9yZGVyIG9mIGFsbG9jYXRpb24gYW5kIGZyZWVpbmcgd2l0aCBzdHJpY3QgbW9ja3MgdXNp
bmcgdGhlIElOX1NFUVVFTkNFIG1hY3JvCisgKiB0byBhc3NlcnQgYWxsb2NhdGlvbiBhbmQgZnJl
ZWluZyBvcmRlciB3aGVuIHRoZSBmZWF0dXJlIGJlY29tZXMgYXZhaWxhYmxlLgorICovCitzdGF0
aWMgdm9pZCBrdW5pdF9yZXNvdXJjZV90ZXN0X3Byb3Blcl9mcmVlX29yZGVyaW5nKHN0cnVjdCBr
dW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0ICpjdHgg
PSB0ZXN0LT5wcml2OworCisJLyogZmFrZV9yZXNvdXJjZV8xIGFsbG9jYXRlcyBhIGZha2VfcmVz
b3VyY2VfMiBpbiBpdHMgaW5pdC4gKi8KKwlrdW5pdF9hbGxvY19hbmRfZ2V0X3Jlc291cmNlKCZj
dHgtPnRlc3QsCisJCQkJICAgICBmYWtlX3Jlc291cmNlXzFfaW5pdCwKKwkJCQkgICAgIGZha2Vf
cmVzb3VyY2VfMV9mcmVlLAorCQkJCSAgICAgR0ZQX0tFUk5FTCwKKwkJCQkgICAgIGN0eCk7CisK
KwkvKgorCSAqIFNpbmNlIGZha2VfcmVzb3VyY2VfMl9pbml0IGNhbGxzIEtVTklUX1JFU09VUkNF
X1RFU1RfTUFSS19PUkRFUgorCSAqIGJlZm9yZSByZXR1cm5pbmcgdG8gZmFrZV9yZXNvdXJjZV8x
X2luaXQsIGl0IHNob3VsZCBiZSB0aGUgZmlyc3QgdG8KKwkgKiBwdXQgaXRzIGtleSBpbiB0aGUg
YWxsb2NhdGVfb3JkZXIgYXJyYXkuCisJICovCisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIGN0eC0+
YWxsb2NhdGVfb3JkZXJbMF0sIDIpOworCUtVTklUX0VYUEVDVF9FUSh0ZXN0LCBjdHgtPmFsbG9j
YXRlX29yZGVyWzFdLCAxKTsKKworCWt1bml0X2NsZWFudXAoJmN0eC0+dGVzdCk7CisKKwkvKgor
CSAqIEJlY2F1c2UgZmFrZV9yZXNvdXJjZV8yIGZpbmlzaGVzIGFsbG9jYXRpb24gYmVmb3JlIGZh
a2VfcmVzb3VyY2VfMSwKKwkgKiBmYWtlX3Jlc291cmNlXzEgc2hvdWxkIGJlIGZyZWVkIGZpcnN0
IHNpbmNlIGl0IGNvdWxkIGRlcGVuZCBvbgorCSAqIGZha2VfcmVzb3VyY2VfMi4KKwkgKi8KKwlL
VU5JVF9FWFBFQ1RfRVEodGVzdCwgY3R4LT5mcmVlX29yZGVyWzBdLCAxKTsKKwlLVU5JVF9FWFBF
Q1RfRVEodGVzdCwgY3R4LT5mcmVlX29yZGVyWzFdLCAyKTsKK30KKworc3RhdGljIGludCBrdW5p
dF9yZXNvdXJjZV90ZXN0X2luaXQoc3RydWN0IGt1bml0ICp0ZXN0KQoreworCXN0cnVjdCBrdW5p
dF90ZXN0X3Jlc291cmNlX2NvbnRleHQgKmN0eCA9CisJCQlremFsbG9jKHNpemVvZigqY3R4KSwg
R0ZQX0tFUk5FTCk7CisKKwlLVU5JVF9BU1NFUlRfTk9UX0VSUl9PUl9OVUxMKHRlc3QsIGN0eCk7
CisKKwl0ZXN0LT5wcml2ID0gY3R4OworCisJa3VuaXRfaW5pdF90ZXN0KCZjdHgtPnRlc3QsICJ0
ZXN0X3Rlc3RfY29udGV4dCIpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lkIGt1bml0
X3Jlc291cmNlX3Rlc3RfZXhpdChzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0IGt1bml0
X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsKKworCWt1bml0X2NsZWFu
dXAoJmN0eC0+dGVzdCk7CisJa2ZyZWUoY3R4KTsKK30KKworc3RhdGljIHN0cnVjdCBrdW5pdF9j
YXNlIGt1bml0X3Jlc291cmNlX3Rlc3RfY2FzZXNbXSA9IHsKKwlLVU5JVF9DQVNFKGt1bml0X3Jl
c291cmNlX3Rlc3RfaW5pdF9yZXNvdXJjZXMpLAorCUtVTklUX0NBU0Uoa3VuaXRfcmVzb3VyY2Vf
dGVzdF9hbGxvY19yZXNvdXJjZSksCisJS1VOSVRfQ0FTRShrdW5pdF9yZXNvdXJjZV90ZXN0X2Rl
c3Ryb3lfcmVzb3VyY2UpLAorCUtVTklUX0NBU0Uoa3VuaXRfcmVzb3VyY2VfdGVzdF9jbGVhbnVw
X3Jlc291cmNlcyksCisJS1VOSVRfQ0FTRShrdW5pdF9yZXNvdXJjZV90ZXN0X3Byb3Blcl9mcmVl
X29yZGVyaW5nKSwKKwl7fQorfTsKKworc3RhdGljIHN0cnVjdCBrdW5pdF9zdWl0ZSBrdW5pdF9y
ZXNvdXJjZV90ZXN0X3N1aXRlID0geworCS5uYW1lID0gImt1bml0LXJlc291cmNlLXRlc3QiLAor
CS5pbml0ID0ga3VuaXRfcmVzb3VyY2VfdGVzdF9pbml0LAorCS5leGl0ID0ga3VuaXRfcmVzb3Vy
Y2VfdGVzdF9leGl0LAorCS50ZXN0X2Nhc2VzID0ga3VuaXRfcmVzb3VyY2VfdGVzdF9jYXNlcywK
K307CitrdW5pdF90ZXN0X3N1aXRlKGt1bml0X3Jlc291cmNlX3Rlc3Rfc3VpdGUpOwotLSAKMi4y
My4wLjM1MS5nYzQzMTcwMzJlNi1nb29nCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
