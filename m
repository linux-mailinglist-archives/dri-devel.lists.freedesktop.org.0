Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4A6AD8E6A9
	for <lists+dri-devel@lfdr.de>; Thu, 15 Aug 2019 10:36:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A45416E8F0;
	Thu, 15 Aug 2019 08:35:00 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qk1-x749.google.com (mail-qk1-x749.google.com
 [IPv6:2607:f8b0:4864:20::749])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 61B426E5D5
 for <dri-devel@lists.freedesktop.org>; Wed, 14 Aug 2019 10:46:18 +0000 (UTC)
Received: by mail-qk1-x749.google.com with SMTP id o4so10286575qkg.11
 for <dri-devel@lists.freedesktop.org>; Wed, 14 Aug 2019 03:46:18 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=Of6ed+SG6IaRF067LO6aebfGQ9pAYa64vgMYvUHNVMc=;
 b=NhgTvb+QG0NA4gMxZ4P8iBKi9gcUMaZq0TgV8neA6vXrdF8cyoV4FcLmFPMvcGjovP
 XOlabuJ0pfpRqX6TzNvtAFxoFb0ps2rtiYlHjzgB3M/hPu0Oz07oVKKUd0GVe8qL3tdF
 +dbNSc4j3NrjqGxImJ4hfs7bgMXopIm6WnsJDMTtDMUtBl+ZyJZ86FoyKaPWi0yC7iJI
 8RjmaNiEmaipawwvQDxO+yAPtrcsKsxDjvqS0vUrXmivM7FKKGr3RPSbWyzxTQJ6hUWc
 yH0Af30WAu9mf75iLrFLtnZ4ZHV69nRb2f8vn0KmQhqGhbfXobvrf59HT4uSUvQJPOK7
 DPCw==
X-Gm-Message-State: APjAAAX5GrOu8tJCgAuF02GZdJjsQU6roNjTzCkS5sss+xurtOtJzEEw
 2a6M0Vgq6+W1kntW5sL63/iGBvXglyFNpVTsavJ+MtHZd/iBIC8LE456NvBW6GBMzIMglVcEnK/
 o3DFCt68lji4RXAptsdUe6mNcHJF42vG5ytyDRcESQs5OwmhsAqAZMYTOwY1QJy57ApD312hNIw
 ==
X-Google-Smtp-Source: APXvYqzRIDRZ2MlmouED+7HElSdB1DiQyMUAc5s2wc3KSNN39lyA3J65UQ3BVwSlBpRozPHTUNpk/Wsi8hk=
X-Received: by 2002:a37:9a0b:: with SMTP id c11mr38400400qke.204.1565779576568; 
 Wed, 14 Aug 2019 03:46:16 -0700 (PDT)
Date: Wed, 14 Aug 2019 12:45:06 +0200
In-Reply-To: <20190814104520.6001-1-darekm@google.com>
Message-Id: <20190814104520.6001-9-darekm@google.com>
Mime-Version: 1.0
References: <20190814104520.6001-1-darekm@google.com>
X-Mailer: git-send-email 2.23.0.rc1.153.gdeed80330f-goog
Subject: [PATCH v7 8/9] drm: dw-hdmi: use cec_notifier_conn_(un)register
From: Dariusz Marcinkiewicz <darekm@google.com>
To: dri-devel@lists.freedesktop.org, linux-media@vger.kernel.org, 
 hverkuil-cisco@xs4all.nl
X-Mailman-Approved-At: Thu, 15 Aug 2019 08:34:55 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=Of6ed+SG6IaRF067LO6aebfGQ9pAYa64vgMYvUHNVMc=;
 b=Q4S02tkSwCa+AAL66y9IabaihDxTpB+CHn7R/Er11fsINdYMVHZwHUiT0c0BP5Fzhe
 cmdCxKM/Nnz/pGTTTOZKHNlTYyoefj0PNbkcziJqnndV6Xm1gEYrDQ4XF5SRuipUmaiY
 3vLR4+hMqyZS1eVZa6Uq0MFKVsT54qUcUYyofaaVwbyGmazjxICiUDxfelIp9z2ufBqL
 0xIbAjF0qwllvf9J7QANMWcv+l570obH0ZcOIETKnXcrjicphS4Fh5irJNnepNhVmXtX
 vBA4gOgRSZkgb0UUhQ7ZoWT1KnXxW1GUxDWFqLkdkoDkJUUpDQZf9GoSCR3ZH4NaS4QL
 Zlcw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jernej Skrabec <jernej.skrabec@siol.net>, Jonas Karlman <jonas@kwiboo.se>,
 David Airlie <airlied@linux.ie>, Neil Armstrong <narmstrong@baylibre.com>,
 Douglas Anderson <dianders@chromium.org>, linux-kernel@vger.kernel.org,
 Sean Paul <seanpaul@chromium.org>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Dariusz Marcinkiewicz <darekm@google.com>, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VXNlIHRoZSBuZXcgY2VjX25vdGlmaWVyX2Nvbm5fKHVuKXJlZ2lzdGVyKCkgZnVuY3Rpb25zIHRv
Cih1bilyZWdpc3RlciB0aGUgbm90aWZpZXIgZm9yIHRoZSBIRE1JIGNvbm5lY3RvciwgYW5kIGZp
bGwgaW4KdGhlIGNlY19jb25uZWN0b3JfaW5mby4KCkNoYW5nZXMgc2luY2UgdjY6CiAgICAgICAg
LSBtb3ZlIGNlY19ub3RpZmllcl9jb25uX3VucmVnaXN0ZXIgdG8gYSBicmlkZ2UgZGV0YWNoCgkg
IGZ1bmN0aW9uLAoJLSBhZGQgYSBtdXRleCBwcm90ZWN0aW5nIGEgQ0VDIG5vdGlmaWVyLgpDaGFu
Z2VzIHNpbmNlIHY0OgoJLSB0eXBvIGZpeApDaGFuZ2VzIHNpbmNlIHYyOgoJLSByZW1vdmVkIHVu
bmVjZXNzYXJ5IE5VTEwgY2hlY2sgYmVmb3JlIGEgY2FsbCB0bwoJY2VjX25vdGlmaWVyX2Nvbm5f
dW5yZWdpc3RlciwKCS0gdXNlIGNlY19ub3RpZmllcl9waHlzX2FkZHJfaW52YWxpZGF0ZSB0byBp
bnZhbGlkYXRlIHBoeXNpY2FsCglhZGRyZXNzLgpDaGFuZ2VzIHNpbmNlIHYxOgoJQWRkIG1lbW9y
eSBiYXJyaWVyIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBub3RpZmllcgoJYmVjb21lcyB2aXNpYmxl
IHRvIHRoZSBpcnEgdGhyZWFkIG9uY2UgaXQgaXMgZnVsbHkKCWNvbnN0cnVjdGVkLgoKU2lnbmVk
LW9mZi1ieTogRGFyaXVzeiBNYXJjaW5raWV3aWN6IDxkYXJla21AZ29vZ2xlLmNvbT4KLS0tCiBk
cml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LWhkbWkuYyB8IDQ1ICsrKysrKysrKysr
KysrKy0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgMzAgaW5zZXJ0aW9ucygrKSwgMTUgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1o
ZG1pLmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LWhkbWkuYwppbmRleCA4
M2I5NGI2NmU0NjRlLi41NTE2MmM5MDkyZjcxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YnJpZGdlL3N5bm9wc3lzL2R3LWhkbWkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5
bm9wc3lzL2R3LWhkbWkuYwpAQCAtMTkwLDYgKzE5MCw3IEBAIHN0cnVjdCBkd19oZG1pIHsKIAl2
b2lkICgqZW5hYmxlX2F1ZGlvKShzdHJ1Y3QgZHdfaGRtaSAqaGRtaSk7CiAJdm9pZCAoKmRpc2Fi
bGVfYXVkaW8pKHN0cnVjdCBkd19oZG1pICpoZG1pKTsKIAorCXN0cnVjdCBtdXRleCBjZWNfbm90
aWZpZXJfbXV0ZXg7CiAJc3RydWN0IGNlY19ub3RpZmllciAqY2VjX25vdGlmaWVyOwogfTsKIApA
QCAtMjE5NCw2ICsyMTk1LDggQEAgc3RhdGljIGludCBkd19oZG1pX2JyaWRnZV9hdHRhY2goc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIAlzdHJ1Y3QgZHdfaGRtaSAqaGRtaSA9IGJyaWRnZS0+
ZHJpdmVyX3ByaXZhdGU7CiAJc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyID0gYnJpZGdlLT5l
bmNvZGVyOwogCXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IgPSAmaGRtaS0+Y29ubmVj
dG9yOworCXN0cnVjdCBjZWNfY29ubmVjdG9yX2luZm8gY29ubl9pbmZvOworCXN0cnVjdCBjZWNf
bm90aWZpZXIgKm5vdGlmaWVyOwogCiAJY29ubmVjdG9yLT5pbnRlcmxhY2VfYWxsb3dlZCA9IDE7
CiAJY29ubmVjdG9yLT5wb2xsZWQgPSBEUk1fQ09OTkVDVE9SX1BPTExfSFBEOwpAQCAtMjIwNyw5
ICsyMjEwLDI5IEBAIHN0YXRpYyBpbnQgZHdfaGRtaV9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1f
YnJpZGdlICpicmlkZ2UpCiAKIAlkcm1fY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVyKGNvbm5lY3Rv
ciwgZW5jb2Rlcik7CiAKKwljZWNfZmlsbF9jb25uX2luZm9fZnJvbV9kcm0oJmNvbm5faW5mbywg
Y29ubmVjdG9yKTsKKworCW5vdGlmaWVyID0gY2VjX25vdGlmaWVyX2Nvbm5fcmVnaXN0ZXIoaGRt
aS0+ZGV2LCBOVUxMLCAmY29ubl9pbmZvKTsKKwlpZiAoIW5vdGlmaWVyKQorCQlyZXR1cm4gLUVO
T01FTTsKKworCW11dGV4X2xvY2soJmhkbWktPmNlY19ub3RpZmllcl9tdXRleCk7CisJaGRtaS0+
Y2VjX25vdGlmaWVyID0gbm90aWZpZXI7CisJbXV0ZXhfdW5sb2NrKCZoZG1pLT5jZWNfbm90aWZp
ZXJfbXV0ZXgpOworCiAJcmV0dXJuIDA7CiB9CiAKK3N0YXRpYyB2b2lkIGR3X2hkbWlfYnJpZGdl
X2RldGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQoreworCXN0cnVjdCBkd19oZG1pICpo
ZG1pID0gYnJpZGdlLT5kcml2ZXJfcHJpdmF0ZTsKKworCW11dGV4X2xvY2soJmhkbWktPmNlY19u
b3RpZmllcl9tdXRleCk7CisJY2VjX25vdGlmaWVyX2Nvbm5fdW5yZWdpc3RlcihoZG1pLT5jZWNf
bm90aWZpZXIpOworCWhkbWktPmNlY19ub3RpZmllciA9IE5VTEw7CisJbXV0ZXhfdW5sb2NrKCZo
ZG1pLT5jZWNfbm90aWZpZXJfbXV0ZXgpOworfQorCiBzdGF0aWMgZW51bSBkcm1fbW9kZV9zdGF0
dXMKIGR3X2hkbWlfYnJpZGdlX21vZGVfdmFsaWQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwK
IAkJCSAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCkBAIC0yMjY2LDYgKzIy
ODksNyBAQCBzdGF0aWMgdm9pZCBkd19oZG1pX2JyaWRnZV9lbmFibGUoc3RydWN0IGRybV9icmlk
Z2UgKmJyaWRnZSkKIAogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIGR3X2hk
bWlfYnJpZGdlX2Z1bmNzID0gewogCS5hdHRhY2ggPSBkd19oZG1pX2JyaWRnZV9hdHRhY2gsCisJ
LmRldGFjaCA9IGR3X2hkbWlfYnJpZGdlX2RldGFjaCwKIAkuZW5hYmxlID0gZHdfaGRtaV9icmlk
Z2VfZW5hYmxlLAogCS5kaXNhYmxlID0gZHdfaGRtaV9icmlkZ2VfZGlzYWJsZSwKIAkubW9kZV9z
ZXQgPSBkd19oZG1pX2JyaWRnZV9tb2RlX3NldCwKQEAgLTIzNzMsOSArMjM5NywxMSBAQCBzdGF0
aWMgaXJxcmV0dXJuX3QgZHdfaGRtaV9pcnEoaW50IGlycSwgdm9pZCAqZGV2X2lkKQogCQkJCSAg
ICAgICBwaHlfc3RhdCAmIEhETUlfUEhZX0hQRCwKIAkJCQkgICAgICAgcGh5X3N0YXQgJiBIRE1J
X1BIWV9SWF9TRU5TRSk7CiAKLQkJaWYgKChwaHlfc3RhdCAmIChIRE1JX1BIWV9SWF9TRU5TRSB8
IEhETUlfUEhZX0hQRCkpID09IDApCi0JCQljZWNfbm90aWZpZXJfc2V0X3BoeXNfYWRkcihoZG1p
LT5jZWNfbm90aWZpZXIsCi0JCQkJCQkgICBDRUNfUEhZU19BRERSX0lOVkFMSUQpOworCQlpZiAo
KHBoeV9zdGF0ICYgKEhETUlfUEhZX1JYX1NFTlNFIHwgSERNSV9QSFlfSFBEKSkgPT0gMCkgewor
CQkJbXV0ZXhfbG9jaygmaGRtaS0+Y2VjX25vdGlmaWVyX211dGV4KTsKKwkJCWNlY19ub3RpZmll
cl9waHlzX2FkZHJfaW52YWxpZGF0ZShoZG1pLT5jZWNfbm90aWZpZXIpOworCQkJbXV0ZXhfdW5s
b2NrKCZoZG1pLT5jZWNfbm90aWZpZXJfbXV0ZXgpOworCQl9CiAJfQogCiAJaWYgKGludHJfc3Rh
dCAmIEhETUlfSUhfUEhZX1NUQVQwX0hQRCkgewpAQCAtMjU2MSw2ICsyNTg3LDcgQEAgX19kd19o
ZG1pX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYsCiAKIAltdXRleF9pbml0KCZo
ZG1pLT5tdXRleCk7CiAJbXV0ZXhfaW5pdCgmaGRtaS0+YXVkaW9fbXV0ZXgpOworCW11dGV4X2lu
aXQoJmhkbWktPmNlY19ub3RpZmllcl9tdXRleCk7CiAJc3Bpbl9sb2NrX2luaXQoJmhkbWktPmF1
ZGlvX2xvY2spOwogCiAJZGRjX25vZGUgPSBvZl9wYXJzZV9waGFuZGxlKG5wLCAiZGRjLWkyYy1i
dXMiLCAwKTsKQEAgLTI2OTMsMTIgKzI3MjAsNiBAQCBfX2R3X2hkbWlfcHJvYmUoc3RydWN0IHBs
YXRmb3JtX2RldmljZSAqcGRldiwKIAlpZiAocmV0KQogCQlnb3RvIGVycl9pYWhiOwogCi0JaGRt
aS0+Y2VjX25vdGlmaWVyID0gY2VjX25vdGlmaWVyX2dldChkZXYpOwotCWlmICghaGRtaS0+Y2Vj
X25vdGlmaWVyKSB7Ci0JCXJldCA9IC1FTk9NRU07Ci0JCWdvdG8gZXJyX2lhaGI7Ci0JfQotCiAJ
LyoKIAkgKiBUbyBwcmV2ZW50IG92ZXJmbG93cyBpbiBIRE1JX0lIX0ZDX1NUQVQyLCBzZXQgdGhl
IGNsayByZWdlbmVyYXRvcgogCSAqIE4gYW5kIGN0cyB2YWx1ZXMgYmVmb3JlIGVuYWJsaW5nIHBo
eQpAQCAtMjc5Niw5ICsyODE3LDYgQEAgX19kd19oZG1pX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9k
ZXZpY2UgKnBkZXYsCiAJCWhkbWktPmRkYyA9IE5VTEw7CiAJfQogCi0JaWYgKGhkbWktPmNlY19u
b3RpZmllcikKLQkJY2VjX25vdGlmaWVyX3B1dChoZG1pLT5jZWNfbm90aWZpZXIpOwotCiAJY2xr
X2Rpc2FibGVfdW5wcmVwYXJlKGhkbWktPmlhaGJfY2xrKTsKIAlpZiAoaGRtaS0+Y2VjX2NsaykK
IAkJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKGhkbWktPmNlY19jbGspOwpAQCAtMjgyMCw5ICsyODM4
LDYgQEAgc3RhdGljIHZvaWQgX19kd19oZG1pX3JlbW92ZShzdHJ1Y3QgZHdfaGRtaSAqaGRtaSkK
IAkvKiBEaXNhYmxlIGFsbCBpbnRlcnJ1cHRzICovCiAJaGRtaV93cml0ZWIoaGRtaSwgfjAsIEhE
TUlfSUhfTVVURV9QSFlfU1RBVDApOwogCi0JaWYgKGhkbWktPmNlY19ub3RpZmllcikKLQkJY2Vj
X25vdGlmaWVyX3B1dChoZG1pLT5jZWNfbm90aWZpZXIpOwotCiAJY2xrX2Rpc2FibGVfdW5wcmVw
YXJlKGhkbWktPmlhaGJfY2xrKTsKIAljbGtfZGlzYWJsZV91bnByZXBhcmUoaGRtaS0+aXNmcl9j
bGspOwogCWlmIChoZG1pLT5jZWNfY2xrKQotLSAKMi4yMy4wLnJjMS4xNTMuZ2RlZWQ4MDMzMGYt
Z29vZwoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJp
LWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
