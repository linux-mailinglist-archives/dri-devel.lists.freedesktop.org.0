Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 84861D903F
	for <lists+dri-devel@lfdr.de>; Wed, 16 Oct 2019 13:59:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B42F16E959;
	Wed, 16 Oct 2019 11:59:37 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x441.google.com (mail-wr1-x441.google.com
 [IPv6:2a00:1450:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8F6286E956
 for <dri-devel@lists.freedesktop.org>; Wed, 16 Oct 2019 11:59:31 +0000 (UTC)
Received: by mail-wr1-x441.google.com with SMTP id b9so27753226wrs.0
 for <dri-devel@lists.freedesktop.org>; Wed, 16 Oct 2019 04:59:31 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=MT0Uue6i2yCOO0/jOCI9ZxD9haP5kL6ODgF+NAu+rj0=;
 b=Lp9GVkH3hkM/Bm7t7dSWGw7O17723nkaSrpAeBl6F4hxuI3AFGa0L7qUmHW61VrBCN
 jvy5oweNrsCJO+pvJEKPWG7hmM9xgs7YoxMQQkt3csoBtb490GrlUwjkGaVCAvb5Hgxi
 M1Xm7j55xrzAAdDEdOJAl8cQe0Fxw6KnV6Vwy77voKpy9NA9qyI0mHKcDOMooXRI7/kU
 /5IMzYtgDD4XMiyYZhhJfbFbau1hh2Q1yH2t9EE6XDXCOUV80LzY0Q3HeVOUaRQkKb+F
 Xh4SsdGQ5LjKvbz+yvy+J1gP9wdyaGmFNu9QXbUpeB1ETMnzWkLRaiOA5jzrHuH0VVGy
 rRZA==
X-Gm-Message-State: APjAAAVBV42yophTgRNmZoe8+UIL1dHMSwiTnAUk5NNr1qmHiiWUKEWr
 T8SLXOl/sRer6A6X7gmUbRw=
X-Google-Smtp-Source: APXvYqzGVwy8vPSlpXdlLHB9kDFG8p+JCtFmhg3GBVEbv00ngApoMVLRvBKINxTNf7R8O3LFf/irgA==
X-Received: by 2002:a5d:624f:: with SMTP id m15mr2204400wrv.59.1571227169680; 
 Wed, 16 Oct 2019 04:59:29 -0700 (PDT)
Received: from localhost (p2E5BE2CE.dip0.t-ipconnect.de. [46.91.226.206])
 by smtp.gmail.com with ESMTPSA id 63sm3928563wrq.90.2019.10.16.04.59.28
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 16 Oct 2019 04:59:28 -0700 (PDT)
From: Thierry Reding <thierry.reding@gmail.com>
To: Thierry Reding <thierry.reding@gmail.com>
Subject: [PATCH 6/8] drm/tegra: falcon: Clarify address usage
Date: Wed, 16 Oct 2019 13:59:14 +0200
Message-Id: <20191016115916.1769133-6-thierry.reding@gmail.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191016115916.1769133-1-thierry.reding@gmail.com>
References: <20191016115916.1769133-1-thierry.reding@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=MT0Uue6i2yCOO0/jOCI9ZxD9haP5kL6ODgF+NAu+rj0=;
 b=O5QWyH1LPV6D4KyIJfAqe7MqO06GsgFckWKFPg6IWbjjdwWIm6zQFftCQ0HBxjopn5
 6JFdLlLWNfNs4q+tEjT60ThYSSJXpIW6ASQfL9BDNbwihFl3yWfxDfzyhBWWIke5yS7j
 EydnalYpvrwUmi61XzPnsQzMdWcq0A5nvrA4GQ5UnemGuH/AztBp+UZKYiOuYWz/xzAI
 Wv9ItxJNI85nsJf+oLc1YnCBWLh26vNPShG4EeihoQgTA0qK+xmafePBHuQnmQvRLLC7
 I7LgMKGLHgJWcSn4Nv93SIi2IEI6BlRKRyyH/awiJ4Pf60+y9wj0cuURTO7iJUhnlmTi
 5TWA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-tegra@vger.kernel.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVGhpZXJyeSBSZWRpbmcgPHRyZWRpbmdAbnZpZGlhLmNvbT4KClJlbmFtZSBwYWRkciAt
PiBpb3ZhIGFuZCB2YWRkciAtPiB2aXJ0IHRvIG1ha2UgaXQgY2xlYXJlciBob3cgdGhlc2UKYWRk
cmVzc2VzIGFyZSB1c2VkLiBUaGlzIGlzIGltcG9ydGFudCBmb3IgYSBzdWJzZXF1ZW50IHBhdGNo
IHRoYXQgbWFrZXMKYSBkaXN0aW5jdGlvbiBiZXR3ZWVuIHRoZSBwaHlzaWNhbCBhZGRyZXNzIChw
aHlzaWNhbCBhZGRyZXNzIG9mIHRoZQpzeXN0ZW0gbWVtb3J5IGZyb20gdGhlIENQVSdzIHBvaW50
IG9mIHZpZXcpIGFuZCB0aGUgSU9WQSAocGh5c2ljYWwKYWRkcmVzcyBvZiB0aGUgc3lzdGVtIG1l
bW9yeSBmcm9tIHRoZSBkZXZpY2UncyBwb2ludCBvZiB2aWV3KS4KClNpZ25lZC1vZmYtYnk6IFRo
aWVycnkgUmVkaW5nIDx0cmVkaW5nQG52aWRpYS5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL3Rl
Z3JhL2ZhbGNvbi5jIHwgMTQgKysrKy0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vdGVncmEvZmFsY29u
LmggfCAgNSArLS0KIGRyaXZlcnMvZ3B1L2RybS90ZWdyYS92aWMuYyAgICB8IDU2ICsrKysrKysr
KysrKysrKy0tLS0tLS0tLS0tLS0tLS0tLS0KIDMgZmlsZXMgY2hhbmdlZCwgMzQgaW5zZXJ0aW9u
cygrKSwgNDEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3RlZ3Jh
L2ZhbGNvbi5jIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2ZhbGNvbi5jCmluZGV4IGE1YjI1ZTRl
Y2JkMi4uNTZlZGVmMDZjNDhlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGVncmEvZmFs
Y29uLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2ZhbGNvbi5jCkBAIC01OCwxNyArNTgs
MTcgQEAgc3RhdGljIGludCBmYWxjb25fY29weV9jaHVuayhzdHJ1Y3QgZmFsY29uICpmYWxjb24s
CiBzdGF0aWMgdm9pZCBmYWxjb25fY29weV9maXJtd2FyZV9pbWFnZShzdHJ1Y3QgZmFsY29uICpm
YWxjb24sCiAJCQkJICAgICAgIGNvbnN0IHN0cnVjdCBmaXJtd2FyZSAqZmlybXdhcmUpCiB7Ci0J
dTMyICpmaXJtd2FyZV92YWRkciA9IGZhbGNvbi0+ZmlybXdhcmUudmFkZHI7CisJdTMyICp2aXJ0
ID0gZmFsY29uLT5maXJtd2FyZS52aXJ0OwogCXNpemVfdCBpOwogCiAJLyogY29weSB0aGUgd2hv
bGUgdGhpbmcgdGFraW5nIGludG8gYWNjb3VudCBlbmRpYW5uZXNzICovCiAJZm9yIChpID0gMDsg
aSA8IGZpcm13YXJlLT5zaXplIC8gc2l6ZW9mKHUzMik7IGkrKykKLQkJZmlybXdhcmVfdmFkZHJb
aV0gPSBsZTMyX3RvX2NwdSgoKHUzMiAqKWZpcm13YXJlLT5kYXRhKVtpXSk7CisJCXZpcnRbaV0g
PSBsZTMyX3RvX2NwdSgoKHUzMiAqKWZpcm13YXJlLT5kYXRhKVtpXSk7CiB9CiAKIHN0YXRpYyBp
bnQgZmFsY29uX3BhcnNlX2Zpcm13YXJlX2ltYWdlKHN0cnVjdCBmYWxjb24gKmZhbGNvbikKIHsK
LQlzdHJ1Y3QgZmFsY29uX2Z3X2Jpbl9oZWFkZXJfdjEgKmJpbiA9ICh2b2lkICopZmFsY29uLT5m
aXJtd2FyZS52YWRkcjsKKwlzdHJ1Y3QgZmFsY29uX2Z3X2Jpbl9oZWFkZXJfdjEgKmJpbiA9ICh2
b2lkICopZmFsY29uLT5maXJtd2FyZS52aXJ0OwogCXN0cnVjdCBmYWxjb25fZndfb3NfaGVhZGVy
X3YxICpvczsKIAogCS8qIGVuZGlhbiBwcm9ibGVtcyB3b3VsZCBzaG93IHVwIHJpZ2h0IGhlcmUg
Ki8KQEAgLTg5LDcgKzg5LDcgQEAgc3RhdGljIGludCBmYWxjb25fcGFyc2VfZmlybXdhcmVfaW1h
Z2Uoc3RydWN0IGZhbGNvbiAqZmFsY29uKQogCQlyZXR1cm4gLUVJTlZBTDsKIAl9CiAKLQlvcyA9
IGZhbGNvbi0+ZmlybXdhcmUudmFkZHIgKyBiaW4tPm9zX2hlYWRlcl9vZmZzZXQ7CisJb3MgPSBm
YWxjb24tPmZpcm13YXJlLnZpcnQgKyBiaW4tPm9zX2hlYWRlcl9vZmZzZXQ7CiAKIAlmYWxjb24t
PmZpcm13YXJlLmJpbl9kYXRhLnNpemUgPSBiaW4tPm9zX3NpemU7CiAJZmFsY29uLT5maXJtd2Fy
ZS5iaW5fZGF0YS5vZmZzZXQgPSBiaW4tPm9zX2RhdGFfb2Zmc2V0OwpAQCAtMTM4LDcgKzEzOCw3
IEBAIGludCBmYWxjb25fbG9hZF9maXJtd2FyZShzdHJ1Y3QgZmFsY29uICpmYWxjb24pCiAKIGlu
dCBmYWxjb25faW5pdChzdHJ1Y3QgZmFsY29uICpmYWxjb24pCiB7Ci0JZmFsY29uLT5maXJtd2Fy
ZS52YWRkciA9IE5VTEw7CisJZmFsY29uLT5maXJtd2FyZS52aXJ0ID0gTlVMTDsKIAogCXJldHVy
biAwOwogfQpAQCAtMTU1LDcgKzE1NSw3IEBAIGludCBmYWxjb25fYm9vdChzdHJ1Y3QgZmFsY29u
ICpmYWxjb24pCiAJdTMyIHZhbHVlOwogCWludCBlcnI7CiAKLQlpZiAoIWZhbGNvbi0+ZmlybXdh
cmUudmFkZHIpCisJaWYgKCFmYWxjb24tPmZpcm13YXJlLnZpcnQpCiAJCXJldHVybiAtRUlOVkFM
OwogCiAJZXJyID0gcmVhZGxfcG9sbF90aW1lb3V0KGZhbGNvbi0+cmVncyArIEZBTENPTl9ETUFD
VEwsIHZhbHVlLApAQCAtMTY4LDcgKzE2OCw3IEBAIGludCBmYWxjb25fYm9vdChzdHJ1Y3QgZmFs
Y29uICpmYWxjb24pCiAJZmFsY29uX3dyaXRlbChmYWxjb24sIDAsIEZBTENPTl9ETUFDVEwpOwog
CiAJLyogc2V0dXAgdGhlIGFkZHJlc3Mgb2YgdGhlIGJpbmFyeSBkYXRhIHNvIEZhbGNvbiBjYW4g
YWNjZXNzIGl0IGxhdGVyICovCi0JZmFsY29uX3dyaXRlbChmYWxjb24sIChmYWxjb24tPmZpcm13
YXJlLnBhZGRyICsKKwlmYWxjb25fd3JpdGVsKGZhbGNvbiwgKGZhbGNvbi0+ZmlybXdhcmUuaW92
YSArCiAJCQkgICAgICAgZmFsY29uLT5maXJtd2FyZS5iaW5fZGF0YS5vZmZzZXQpID4+IDgsCiAJ
CSAgICAgIEZBTENPTl9ETUFUUkZCQVNFKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3RlZ3JhL2ZhbGNvbi5oIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2ZhbGNvbi5oCmluZGV4IDky
NDkxYTFlOTBkZi4uYzU2ZWUzMmQ5MmVlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGVn
cmEvZmFsY29uLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2ZhbGNvbi5oCkBAIC04NCw4
ICs4NCw5IEBAIHN0cnVjdCBmYWxjb25fZmlybXdhcmUgewogCWNvbnN0IHN0cnVjdCBmaXJtd2Fy
ZSAqZmlybXdhcmU7CiAKIAkvKiBSYXcgZmlybXdhcmUgZGF0YSAqLwotCWRtYV9hZGRyX3QgcGFk
ZHI7Ci0Jdm9pZCAqdmFkZHI7CisJZG1hX2FkZHJfdCBpb3ZhOworCWRtYV9hZGRyX3QgcGh5czsK
Kwl2b2lkICp2aXJ0OwogCXNpemVfdCBzaXplOwogCiAJLyogUGFyc2VkIGZpcm13YXJlIGluZm9y
bWF0aW9uICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdGVncmEvdmljLmMgYi9kcml2
ZXJzL2dwdS9kcm0vdGVncmEvdmljLmMKaW5kZXggYzYxZDhmZmNiNGI4Li4zNzE1ODU1MDEwYjMg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS92aWMuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vdGVncmEvdmljLmMKQEAgLTEzMyw5ICsxMzMsOSBAQCBzdGF0aWMgaW50IHZpY19ib290
KHN0cnVjdCB2aWMgKnZpYykKIAlpZiAoZXJyIDwgMCkKIAkJcmV0dXJuIGVycjsKIAotCWhkciA9
IHZpYy0+ZmFsY29uLmZpcm13YXJlLnZhZGRyOworCWhkciA9IHZpYy0+ZmFsY29uLmZpcm13YXJl
LnZpcnQ7CiAJZmNlX2Jpbl9kYXRhX29mZnNldCA9ICoodTMyICopKGhkciArIFZJQ19VQ09ERV9G
Q0VfREFUQV9PRkZTRVQpOwotCWhkciA9IHZpYy0+ZmFsY29uLmZpcm13YXJlLnZhZGRyICsKKwlo
ZHIgPSB2aWMtPmZhbGNvbi5maXJtd2FyZS52aXJ0ICsKIAkJKih1MzIgKikoaGRyICsgVklDX1VD
T0RFX0ZDRV9IRUFERVJfT0ZGU0VUKTsKIAlmY2VfdWNvZGVfc2l6ZSA9ICoodTMyICopKGhkciAr
IEZDRV9VQ09ERV9TSVpFX09GRlNFVCk7CiAKQEAgLTE0Myw3ICsxNDMsNyBAQCBzdGF0aWMgaW50
IHZpY19ib290KHN0cnVjdCB2aWMgKnZpYykKIAlmYWxjb25fZXhlY3V0ZV9tZXRob2QoJnZpYy0+
ZmFsY29uLCBWSUNfU0VUX0ZDRV9VQ09ERV9TSVpFLAogCQkJICAgICAgZmNlX3Vjb2RlX3NpemUp
OwogCWZhbGNvbl9leGVjdXRlX21ldGhvZCgmdmljLT5mYWxjb24sIFZJQ19TRVRfRkNFX1VDT0RF
X09GRlNFVCwKLQkJCSAgICAgICh2aWMtPmZhbGNvbi5maXJtd2FyZS5wYWRkciArIGZjZV9iaW5f
ZGF0YV9vZmZzZXQpCisJCQkgICAgICAodmljLT5mYWxjb24uZmlybXdhcmUuaW92YSArIGZjZV9i
aW5fZGF0YV9vZmZzZXQpCiAJCQkJPj4gOCk7CiAKIAllcnIgPSBmYWxjb25fd2FpdF9pZGxlKCZ2
aWMtPmZhbGNvbik7CkBAIC0yMjUsMTQgKzIyNSwxNyBAQCBzdGF0aWMgaW50IHZpY19leGl0KHN0
cnVjdCBob3N0MXhfY2xpZW50ICpjbGllbnQpCiAJaG9zdDF4X2NoYW5uZWxfcHV0KHZpYy0+Y2hh
bm5lbCk7CiAJaG9zdDF4X2NsaWVudF9pb21tdV9kZXRhY2goY2xpZW50KTsKIAotCWlmIChjbGll
bnQtPmdyb3VwKQorCWlmIChjbGllbnQtPmdyb3VwKSB7CisJCWRtYV91bm1hcF9zaW5nbGUodmlj
LT5kZXYsIHZpYy0+ZmFsY29uLmZpcm13YXJlLnBoeXMsCisJCQkJIHZpYy0+ZmFsY29uLmZpcm13
YXJlLnNpemUsIERNQV9UT19ERVZJQ0UpOwogCQl0ZWdyYV9kcm1fZnJlZSh0ZWdyYSwgdmljLT5m
YWxjb24uZmlybXdhcmUuc2l6ZSwKLQkJCSAgICAgICB2aWMtPmZhbGNvbi5maXJtd2FyZS52YWRk
ciwKLQkJCSAgICAgICB2aWMtPmZhbGNvbi5maXJtd2FyZS5wYWRkcik7Ci0JZWxzZQorCQkJICAg
ICAgIHZpYy0+ZmFsY29uLmZpcm13YXJlLnZpcnQsCisJCQkgICAgICAgdmljLT5mYWxjb24uZmly
bXdhcmUuaW92YSk7CisJfSBlbHNlIHsKIAkJZG1hX2ZyZWVfY29oZXJlbnQodmljLT5kZXYsIHZp
Yy0+ZmFsY29uLmZpcm13YXJlLnNpemUsCi0JCQkJICB2aWMtPmZhbGNvbi5maXJtd2FyZS52YWRk
ciwKLQkJCQkgIHZpYy0+ZmFsY29uLmZpcm13YXJlLnBhZGRyKTsKKwkJCQkgIHZpYy0+ZmFsY29u
LmZpcm13YXJlLnZpcnQsCisJCQkJICB2aWMtPmZhbGNvbi5maXJtd2FyZS5pb3ZhKTsKKwl9CiAK
IAlyZXR1cm4gMDsKIH0KQEAgLTI0NiwxMiArMjQ5LDEyIEBAIHN0YXRpYyBpbnQgdmljX2xvYWRf
ZmlybXdhcmUoc3RydWN0IHZpYyAqdmljKQogewogCXN0cnVjdCBob3N0MXhfY2xpZW50ICpjbGll
bnQgPSAmdmljLT5jbGllbnQuYmFzZTsKIAlzdHJ1Y3QgdGVncmFfZHJtICp0ZWdyYSA9IHZpYy0+
Y2xpZW50LmRybTsKLQlkbWFfYWRkcl90IHBoeXM7CisJZG1hX2FkZHJfdCBpb3ZhOwogCXNpemVf
dCBzaXplOwogCXZvaWQgKnZpcnQ7CiAJaW50IGVycjsKIAotCWlmICh2aWMtPmZhbGNvbi5maXJt
d2FyZS52YWRkcikKKwlpZiAodmljLT5mYWxjb24uZmlybXdhcmUudmlydCkKIAkJcmV0dXJuIDA7
CiAKIAllcnIgPSBmYWxjb25fcmVhZF9maXJtd2FyZSgmdmljLT5mYWxjb24sIHZpYy0+Y29uZmln
LT5maXJtd2FyZSk7CkBAIC0yNjEsMTcgKzI2NCwxNyBAQCBzdGF0aWMgaW50IHZpY19sb2FkX2Zp
cm13YXJlKHN0cnVjdCB2aWMgKnZpYykKIAlzaXplID0gdmljLT5mYWxjb24uZmlybXdhcmUuc2l6
ZTsKIAogCWlmICghY2xpZW50LT5ncm91cCkgewotCQl2aXJ0ID0gZG1hX2FsbG9jX2NvaGVyZW50
KHZpYy0+ZGV2LCBzaXplLCAmcGh5cywgR0ZQX0tFUk5FTCk7CisJCXZpcnQgPSBkbWFfYWxsb2Nf
Y29oZXJlbnQodmljLT5kZXYsIHNpemUsICZpb3ZhLCBHRlBfS0VSTkVMKTsKIAotCQllcnIgPSBk
bWFfbWFwcGluZ19lcnJvcih2aWMtPmRldiwgcGh5cyk7CisJCWVyciA9IGRtYV9tYXBwaW5nX2Vy
cm9yKHZpYy0+ZGV2LCBpb3ZhKTsKIAkJaWYgKGVyciA8IDApCiAJCQlyZXR1cm4gZXJyOwogCX0g
ZWxzZSB7Ci0JCXZpcnQgPSB0ZWdyYV9kcm1fYWxsb2ModGVncmEsIHNpemUsICZwaHlzKTsKKwkJ
dmlydCA9IHRlZ3JhX2RybV9hbGxvYyh0ZWdyYSwgc2l6ZSwgJmlvdmEpOwogCX0KIAotCXZpYy0+
ZmFsY29uLmZpcm13YXJlLnZhZGRyID0gdmlydDsKLQl2aWMtPmZhbGNvbi5maXJtd2FyZS5wYWRk
ciA9IHBoeXM7CisJdmljLT5mYWxjb24uZmlybXdhcmUudmlydCA9IHZpcnQ7CisJdmljLT5mYWxj
b24uZmlybXdhcmUuaW92YSA9IGlvdmE7CiAKIAllcnIgPSBmYWxjb25fbG9hZF9maXJtd2FyZSgm
dmljLT5mYWxjb24pOwogCWlmIChlcnIgPCAwKQpAQCAtMjgzLDM1ICsyODYsMjQgQEAgc3RhdGlj
IGludCB2aWNfbG9hZF9maXJtd2FyZShzdHJ1Y3QgdmljICp2aWMpCiAJICoga25vd3Mgd2hhdCBt
ZW1vcnkgcGFnZXMgdG8gZmx1c2ggdGhlIGNhY2hlIGZvci4KIAkgKi8KIAlpZiAoY2xpZW50LT5n
cm91cCkgeworCQlkbWFfYWRkcl90IHBoeXM7CisKIAkJcGh5cyA9IGRtYV9tYXBfc2luZ2xlKHZp
Yy0+ZGV2LCB2aXJ0LCBzaXplLCBETUFfVE9fREVWSUNFKTsKIAogCQllcnIgPSBkbWFfbWFwcGlu
Z19lcnJvcih2aWMtPmRldiwgcGh5cyk7CiAJCWlmIChlcnIgPCAwKQogCQkJZ290byBjbGVhbnVw
OwogCi0JCS8qCi0JCSAqIElmIHRoZSBETUEgQVBJIG1hcHBlZCB0aGlzIHRocm91Z2ggYSBib3Vu
Y2UgYnVmZmVyLCB0aGUKLQkJICogZG1hX3N5bmNfc2luZ2xlX2Zvcl9kZXZpY2UoKSBjYWxsIGJl
bG93IHdpbGwgbm90IGJlIGFibGUKLQkJICogdG8gZmx1c2ggdGhlIGNhY2hlcyBmb3IgdGhlIHJp
Z2h0IG1lbW9yeSBwYWdlcy4gT3V0cHV0IGEKLQkJICogYmlnIHdhcm5pbmcgaW4gdGhhdCBjYXNl
IHNvIHRoYXQgdGhlIERNQSBtYXNrIGNhbiBiZSBzZXQKLQkJICogcHJvcGVybHkgYW5kIHRoZSBi
b3VuY2UgYnVmZmVyIGF2b2lkZWQuCi0JCSAqLwotCQlXQVJOKHBoeXMgIT0gdmljLT5mYWxjb24u
ZmlybXdhcmUucGFkZHIsCi0JCSAgICAgImNoZWNrIERNQSBtYXNrIHNldHRpbmcgZm9yICVzXG4i
LCBkZXZfbmFtZSh2aWMtPmRldikpOworCQl2aWMtPmZhbGNvbi5maXJtd2FyZS5waHlzID0gcGh5
czsKIAl9CiAKLQlkbWFfc3luY19zaW5nbGVfZm9yX2RldmljZSh2aWMtPmRldiwgcGh5cywgc2l6
ZSwgRE1BX1RPX0RFVklDRSk7Ci0KLQlpZiAoY2xpZW50LT5ncm91cCkKLQkJZG1hX3VubWFwX3Np
bmdsZSh2aWMtPmRldiwgcGh5cywgc2l6ZSwgRE1BX1RPX0RFVklDRSk7Ci0KIAlyZXR1cm4gMDsK
IAogY2xlYW51cDoKIAlpZiAoIWNsaWVudC0+Z3JvdXApCi0JCWRtYV9mcmVlX2NvaGVyZW50KHZp
Yy0+ZGV2LCBzaXplLCB2aXJ0LCBwaHlzKTsKKwkJZG1hX2ZyZWVfY29oZXJlbnQodmljLT5kZXYs
IHNpemUsIHZpcnQsIGlvdmEpOwogCWVsc2UKLQkJdGVncmFfZHJtX2ZyZWUodGVncmEsIHNpemUs
IHZpcnQsIHBoeXMpOworCQl0ZWdyYV9kcm1fZnJlZSh0ZWdyYSwgc2l6ZSwgdmlydCwgaW92YSk7
CiAKIAlyZXR1cm4gZXJyOwogfQotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9kcmktZGV2ZWw=
