Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C9C7C346339
	for <lists+dri-devel@lfdr.de>; Tue, 23 Mar 2021 16:46:13 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0375B6E84F;
	Tue, 23 Mar 2021 15:46:12 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from pio-pvt-msa1.bahnhof.se (pio-pvt-msa1.bahnhof.se [79.136.2.40])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 91BCB6E84F
 for <dri-devel@lists.freedesktop.org>; Tue, 23 Mar 2021 15:46:10 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by pio-pvt-msa1.bahnhof.se (Postfix) with ESMTP id CB47340788;
 Tue, 23 Mar 2021 16:46:08 +0100 (CET)
Authentication-Results: pio-pvt-msa1.bahnhof.se; dkim=pass (1024-bit key;
 unprotected) header.d=shipmail.org header.i=@shipmail.org header.b="rHKVk9Lc";
 dkim-atps=neutral
X-Virus-Scanned: Debian amavisd-new at bahnhof.se
X-Spam-Flag: NO
X-Spam-Score: -2.1
X-Spam-Level: 
X-Spam-Status: No, score=-2.1 tagged_above=-999 required=6.31
 tests=[BAYES_00=-1.9, DKIM_SIGNED=0.1, DKIM_VALID=-0.1,
 DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1, NICE_REPLY_A=-0.001,
 URIBL_BLOCKED=0.001] autolearn=ham autolearn_force=no
Received: from pio-pvt-msa1.bahnhof.se ([127.0.0.1])
 by localhost (pio-pvt-msa1.bahnhof.se [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id tFJo68TOyrQL; Tue, 23 Mar 2021 16:46:07 +0100 (CET)
Received: by pio-pvt-msa1.bahnhof.se (Postfix) with ESMTPA id 5ACE040789;
 Tue, 23 Mar 2021 16:46:05 +0100 (CET)
Received: from [192.168.0.209] (unknown [192.198.151.43])
 by mail1.shipmail.org (Postfix) with ESMTPSA id 282813602AF;
 Tue, 23 Mar 2021 16:46:03 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=shipmail.org; s=mail;
 t=1616514364; bh=/YRbLyyT2+b0x+xy9LzPsteGLOtTqIZRl6La1xXuixw=;
 h=Subject:To:Cc:References:From:Date:In-Reply-To:From;
 b=rHKVk9LcDAJi/SFeskJmGVMZq6XkliOXWcwycvl8g1nRLVTmb4RIpIgFak5JH/47E
 7xkSJb3MvPNZA1viPKpoAz16O2Zy+u/aA7/MJRjbs3g4VyZQ5qPYACWBnuYg0pvNiY
 ecAJqm0cFWJxCsXdn1qoqg2Pq7HyVugR8sFtk6+U=
Subject: Re: [RFC PATCH 2/2] mm,drm/ttm: Use VM_PFNMAP for TTM vmas
To: Jason Gunthorpe <jgg@nvidia.com>
References: <20210321184529.59006-1-thomas_os@shipmail.org>
 <20210321184529.59006-3-thomas_os@shipmail.org>
 <20210323140030.GE2356281@nvidia.com>
From: =?UTF-8?Q?Thomas_Hellstr=c3=b6m_=28Intel=29?= <thomas_os@shipmail.org>
Message-ID: <dff54e6f-91bf-8cb9-4d15-259a45154ceb@shipmail.org>
Date: Tue, 23 Mar 2021 16:46:00 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.8.1
MIME-Version: 1.0
In-Reply-To: <20210323140030.GE2356281@nvidia.com>
Content-Language: en-US
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, linux-mm@kvack.org,
 Andrew Morton <akpm@linux-foundation.org>,
 Christian Koenig <christian.koenig@amd.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Ck9uIDMvMjMvMjEgMzowMCBQTSwgSmFzb24gR3VudGhvcnBlIHdyb3RlOgo+IE9uIFN1biwgTWFy
IDIxLCAyMDIxIGF0IDA3OjQ1OjI5UE0gKzAxMDAsIFRob21hcyBIZWxsc3Ryw7ZtIChJbnRlbCkg
d3JvdGU6Cj4+IFRvIGJsb2NrIGZhc3QgZ3VwIHdlIG5lZWQgdG8gbWFrZSBzdXJlIFRUTSBwdGVz
IGFyZSBhbHdheXMgc3BlY2lhbC4KPj4gV2l0aCBNSVhFRE1BUCB3ZSwgb24gYXJjaGl0ZWN0dXJl
cyB0aGF0IGRvbid0IHN1cHBvcnQgcHRlX3NwZWNpYWwsCj4+IGluc2VydCBub3JtYWwgcHRlcywg
YnV0IE9UT0ggb24gdGhvc2UgYXJjaGl0ZWN0dXJlcywgZmFzdCBpcyBub3QKPj4gc3VwcG9ydGVk
Lgo+PiBBdCB0aGUgc2FtZSB0aW1lLCB0aGUgZnVuY3Rpb24gZG9jdW1lbnRhdGlvbiB0byB2bV9u
b3JtYWxfcGFnZSgpIHN1Z2dlc3RzCj4+IHRoYXQgcHRlcyBwb2ludGluZyB0byBzeXN0ZW0gbWVt
b3J5IHBhZ2VzIG9mIE1JWEVETUFQIHZtYXMgYXJlIGFsd2F5cwo+PiBub3JtYWwsIGJ1dCB0aGF0
IGRvZXNuJ3Qgc2VlbSBjb25zaXN0ZW50IHdpdGggd2hhdCdzIGltcGxlbWVudGVkIGluCj4+IHZt
Zl9pbnNlcnRfbWl4ZWQoKS4gSSdtIHRodXMgbm90IGVudGlyZWx5IHN1cmUgdGhpcyBwYXRjaCBp
cyBhY3R1YWxseQo+PiBuZWVkZWQuCj4+Cj4+IEJ1dCB0byBtYWtlIHN1cmUgYW5kIHRvIGF2b2lk
IGFsc28gbm9ybWFsIChub24tZmFzdCkgZ3VwLCBtYWtlIGFsbAo+PiBUVE0gdm1hcyBQRk5NQVAu
IFdpdGggUEZOTUFQIHdlIGNhbid0IGFsbG93IENPVyBtYXBwaW5ncwo+PiBhbnltb3JlIHNvIG1h
a2UgaXNfY293X21hcHBpbmcoKSBhdmFpbGFibGUgYW5kIHVzZSBpdCB0byByZWplY3QKPj4gQ09X
IG1hcHBpZ3MgYXQgbW1hcCB0aW1lLgo+Pgo+PiBUaGVyZSB3YXMgcHJldmlvdXNseSBhIGNvbW1l
bnQgaW4gdGhlIGNvZGUgdGhhdCBXQyBtYXBwaW5ncyB0b2dldGhlcgo+PiB3aXRoIHg4NiBQQVQg
KyBQRk5NQVAgd2FzIGJhZCBmb3IgcGVyZm9ybWFuY2UuIEhvd2V2ZXIgZnJvbSBsb29raW5nIGF0
Cj4+IHZtZl9pbnNlcnRfbWl4ZWQoKSBpdCBsb29rcyBsaWtlIGluIHRoZSBjdXJyZW50IGNvZGUg
UEZOTUFQIGFuZCBNSVhFRE1BUAo+PiBhcmUgaGFuZGxlZCB0aGUgc2FtZSBmb3IgYXJjaGl0ZWN0
dXJlcyB0aGF0IHN1cHBvcnQgcHRlX3NwZWNpYWwuIFRoaXMKPj4gbWVhbnMgdGhlcmUgc2hvdWxk
IG5vdCBiZSBhIHBlcmZvcm1hbmNlIGRpZmZlcmVuY2UgYW55bW9yZSwgYnV0IHRoaXMKPj4gbmVl
ZHMgdG8gYmUgdmVyaWZpZWQuCj4+Cj4+IENjOiBDaHJpc3RpYW4gS29lbmlnIDxjaHJpc3RpYW4u
a29lbmlnQGFtZC5jb20+Cj4+IENjOiBEYXZpZCBBaXJsaWUgPGFpcmxpZWRAbGludXguaWU+Cj4+
IENjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWxAZmZ3bGwuY2g+Cj4+IENjOiBBbmRyZXcgTW9ydG9u
IDxha3BtQGxpbnV4LWZvdW5kYXRpb24ub3JnPgo+PiBDYzogSmFzb24gR3VudGhvcnBlIDxqZ2dA
bnZpZGlhLmNvbT4KPj4gQ2M6IGxpbnV4LW1tQGt2YWNrLm9yZwo+PiBDYzogZHJpLWRldmVsQGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwo+PiBDYzogbGludXgta2VybmVsQHZnZXIua2VybmVsLm9yZwo+
PiBTaWduZWQtb2ZmLWJ5OiBUaG9tYXMgSGVsbHN0csO2bSAoSW50ZWwpIDx0aG9tYXNfb3NAc2hp
cG1haWwub3JnPgo+PiAgIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX3ZtLmMgfCAyMiArKysr
KysrKy0tLS0tLS0tLS0tLS0tCj4+ICAgaW5jbHVkZS9saW51eC9tbS5oICAgICAgICAgICAgICB8
ICA1ICsrKysrCj4+ICAgbW0vaW50ZXJuYWwuaCAgICAgICAgICAgICAgICAgICB8ICA1IC0tLS0t
Cj4+ICAgMyBmaWxlcyBjaGFuZ2VkLCAxMyBpbnNlcnRpb25zKCspLCAxOSBkZWxldGlvbnMoLSkK
Pj4KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX3ZtLmMgYi9kcml2
ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5jCj4+IGluZGV4IDFjMzQ5ODM0ODBlNS4uNzA4YzZm
YjliZTgxIDEwMDY0NAo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5jCj4+
IEBAIC0zNzIsMTIgKzM3Miw3IEBAIHZtX2ZhdWx0X3QgdHRtX2JvX3ZtX2ZhdWx0X3Jlc2VydmVk
KHN0cnVjdCB2bV9mYXVsdCAqdm1mLAo+PiAgIAkJICogYXQgYXJiaXRyYXJ5IHRpbWVzIHdoaWxl
IHRoZSBkYXRhIGlzIG1tYXAnZWQuCj4+ICAgCQkgKiBTZWUgdm1mX2luc2VydF9taXhlZF9wcm90
KCkgZm9yIGEgZGlzY3Vzc2lvbi4KPj4gICAJCSAqLwo+PiAtCQlpZiAodm1hLT52bV9mbGFncyAm
IFZNX01JWEVETUFQKQo+PiAtCQkJcmV0ID0gdm1mX2luc2VydF9taXhlZF9wcm90KHZtYSwgYWRk
cmVzcywKPj4gLQkJCQkJCSAgICBfX3Bmbl90b19wZm5fdChwZm4sIFBGTl9ERVYpLAo+PiAtCQkJ
CQkJICAgIHByb3QpOwo+PiAtCQllbHNlCj4+IC0JCQlyZXQgPSB2bWZfaW5zZXJ0X3Bmbl9wcm90
KHZtYSwgYWRkcmVzcywgcGZuLCBwcm90KTsKPj4gKwkJcmV0ID0gdm1mX2luc2VydF9wZm5fcHJv
dCh2bWEsIGFkZHJlc3MsIHBmbiwgcHJvdCk7Cj4+ICAgCj4+ICAgCQkvKiBOZXZlciBlcnJvciBv
biBwcmVmYXVsdGVkIFBURXMgKi8KPj4gICAJCWlmICh1bmxpa2VseSgocmV0ICYgVk1fRkFVTFRf
RVJST1IpKSkgewo+PiBAQCAtNTU1LDE4ICs1NTAsMTQgQEAgc3RhdGljIHZvaWQgdHRtX2JvX21t
YXBfdm1hX3NldHVwKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sIHN0cnVjdCB2bV9hcmVh
X3MKPj4gICAJICogTm90ZTogV2UncmUgdHJhbnNmZXJyaW5nIHRoZSBibyByZWZlcmVuY2UgdG8K
Pj4gICAJICogdm1hLT52bV9wcml2YXRlX2RhdGEgaGVyZS4KPj4gICAJICovCj4+IC0KPj4gICAJ
dm1hLT52bV9wcml2YXRlX2RhdGEgPSBibzsKPj4gICAKPj4gICAJLyoKPj4gLQkgKiBXZSdkIGxp
a2UgdG8gdXNlIFZNX1BGTk1BUCBvbiBzaGFyZWQgbWFwcGluZ3MsIHdoZXJlCj4+IC0JICogKHZt
YS0+dm1fZmxhZ3MgJiBWTV9TSEFSRUQpICE9IDAsIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLAo+
PiAtCSAqIGJ1dCBmb3Igc29tZSByZWFzb24gVk1fUEZOTUFQICsgeDg2IFBBVCArIHdyaXRlLWNv
bWJpbmUgaXMgdmVyeQo+PiAtCSAqIGJhZCBmb3IgcGVyZm9ybWFuY2UuIFVudGlsIHRoYXQgaGFz
IGJlZW4gc29ydGVkIG91dCwgdXNlCj4+IC0JICogVk1fTUlYRURNQVAgb24gYWxsIG1hcHBpbmdz
LiBTZWUgZnJlZWRlc2t0b3Aub3JnIGJ1ZyAjNzU3MTkKPj4gKwkgKiBQRk5NQVAgZm9yY2VzIHVz
IHRvIGJsb2NrIENPVyBtYXBwaW5ncyBpbiBtbWFwKCksCj4+ICsJICogYW5kIHdpdGggTUlYRURN
QVAgd2Ugd291bGQgaW5jb3JyZWN0bHkgYWxsb3cgZmFzdCBndXAKPj4gKwkgKiBvbiBUVE0gbWVt
b3J5IG9uIGFyY2hpdGVjdHVyZXMgdGhhdCBkb24ndCBoYXZlIHB0ZV9zcGVjaWFsLgo+PiAgIAkg
Ki8KPj4gLQl2bWEtPnZtX2ZsYWdzIHw9IFZNX01JWEVETUFQOwo+PiAtCXZtYS0+dm1fZmxhZ3Mg
fD0gVk1fSU8gfCBWTV9ET05URVhQQU5EIHwgVk1fRE9OVERVTVA7Cj4+ICsJdm1hLT52bV9mbGFn
cyB8PSBWTV9QRk5NQVAgfCBWTV9JTyB8IFZNX0RPTlRFWFBBTkQgfCBWTV9ET05URFVNUDsKPj4g
ICB9Cj4+ICAgCj4+ICAgaW50IHR0bV9ib19tbWFwKHN0cnVjdCBmaWxlICpmaWxwLCBzdHJ1Y3Qg
dm1fYXJlYV9zdHJ1Y3QgKnZtYSwKPj4gQEAgLTU3OSw2ICs1NzAsOSBAQCBpbnQgdHRtX2JvX21t
YXAoc3RydWN0IGZpbGUgKmZpbHAsIHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hLAo+PiAgIAlp
ZiAodW5saWtlbHkodm1hLT52bV9wZ29mZiA8IERSTV9GSUxFX1BBR0VfT0ZGU0VUX1NUQVJUKSkK
Pj4gICAJCXJldHVybiAtRUlOVkFMOwo+PiAgIAo+PiArCWlmICh1bmxpa2VseShpc19jb3dfbWFw
cGluZyh2bWEtPnZtX2ZsYWdzKSkpCj4+ICsJCXJldHVybiAtRUlOVkFMOwo+PiArCj4+ICAgCWJv
ID0gdHRtX2JvX3ZtX2xvb2t1cChiZGV2LCB2bWEtPnZtX3Bnb2ZmLCB2bWFfcGFnZXModm1hKSk7
Cj4+ICAgCWlmICh1bmxpa2VseSghYm8pKQo+PiAgIAkJcmV0dXJuIC1FSU5WQUw7Cj4+IGRpZmYg
LS1naXQgYS9pbmNsdWRlL2xpbnV4L21tLmggYi9pbmNsdWRlL2xpbnV4L21tLmgKPj4gaW5kZXgg
NzdlNjRlM2VhYzgwLi5jNmViZjdmOWRkYmIgMTAwNjQ0Cj4+ICsrKyBiL2luY2x1ZGUvbGludXgv
bW0uaAo+PiBAQCAtNjg2LDYgKzY4NiwxMSBAQCBzdGF0aWMgaW5saW5lIGJvb2wgdm1hX2lzX2Fj
Y2Vzc2libGUoc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpCj4+ICAgCXJldHVybiB2bWEtPnZt
X2ZsYWdzICYgVk1fQUNDRVNTX0ZMQUdTOwo+PiAgIH0KPj4gICAKPj4gK3N0YXRpYyBpbmxpbmUg
Ym9vbCBpc19jb3dfbWFwcGluZyh2bV9mbGFnc190IGZsYWdzKQo+PiArewo+PiArCXJldHVybiAo
ZmxhZ3MgJiAoVk1fU0hBUkVEIHwgVk1fTUFZV1JJVEUpKSA9PSBWTV9NQVlXUklURTsKPj4gK30K
PiBNb3N0IGRyaXZlciBwbGFjZXMgYXJlIGp1c3QgYmFubmluZyBWTV9TSEFSRUQuCj4KPiBJIHNl
ZSB5b3UgY29waWVkIHRoaXMgZnJvbSByZW1hcF9wZm5fcmFuZ2UoKSwgYnV0IHRoYXQgbG9naWMg
aXMgc28KPiBzcGVjaWFsIEknbSBub3Qgc3VyZS4uCgpJdCdzIGFjdHVhbGx5IHVzZWQgYWxsIG92
ZXIgdGhlIHBsYWNlLiBCb3RoIGluIGRyaXZlcnMgYW5kIGFsc28gCnJlZGVmaW5lZCB3aXRoCkNP
TkZJR19NRU1fU09GVF9ESVJUWSB3aGljaCBtYWtlcyBtZSB0aGluayBEYW5pZWxzIGlkZWEgb2Yg
CnZtYV9pc19jb3dfbWFwcGluZygpIGlzIGJldHRlciBzaW5jZSBpdCB3b24ndCBjbGFzaCBhbmQg
Y2F1c2UgCmNvbXBpbGF0aW9uIGZhaWx1cmVzLi4uCgo+Cj4gQ2FuIHRoZSB1c2VyIG1wcm90ZWN0
IHRoZSB3cml0ZSBiYWNrIG9uIHdpdGggdGhlIGFib3ZlIGxvZ2ljPwpObywgaXQncyBibG9ja2Vk
IGJ5IG1wcm90ZWN0Lgo+IERvIHdlCj4gbmVlZCBWTV9ERU5ZV1JJVEUgdG9vPwoKU2VlbXMgdGll
ZCB0byBNQVBfREVOWVdSSVRFIHdoaWNoIGlzIG5vd2FkYXlzIGlnbm9yZWQgYWNjb3JkaW5nIHRv
IG1hbiAKbW1hcCgpLgoKVGhhbmtzLAoKVGhvbWFzCgo+Cj4gSmFzb24KX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApk
cmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
