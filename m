Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5074D1739E
	for <lists+dri-devel@lfdr.de>; Wed,  8 May 2019 10:26:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 474D48967B;
	Wed,  8 May 2019 08:26:40 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DDA8689402
 for <dri-devel@lists.freedesktop.org>; Wed,  8 May 2019 08:26:38 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 666E5AE9A;
 Wed,  8 May 2019 08:26:37 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: daniel@ffwll.ch, airlied@linux.ie, kraxel@redhat.com,
 christian.koenig@amd.com, ray.huang@amd.com, hdegoede@redhat.com,
 noralf@tronnes.org, sam@ravnborg.org, z.liuxinliang@hisilicon.com,
 zourongrong@gmail.com, kong.kongxinwei@hisilicon.com,
 puck.chen@hisilicon.com
Subject: [PATCH v5 04/20] drm: Add drm_gem_vram_fill_create_dumb() to create
 dumb buffers
Date: Wed,  8 May 2019 10:26:14 +0200
Message-Id: <20190508082630.15116-5-tzimmermann@suse.de>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190508082630.15116-1-tzimmermann@suse.de>
References: <20190508082630.15116-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org,
 virtualization@lists.linux-foundation.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGhlbHBlciBmdW5jdGlvbiBkcm1fZ2VtX3ZyYW1fZmlsbF9jcmVhdGVfZHVtYigpIGltcGxl
bWVudHMgbW9zdCBvZgpzdHJ1Y3QgZHJtX2RyaXZlci5kdW1iX2NyZWF0ZSgpIGZvciBHRU0tVlJB
TSBidWZmZXIgb2JqZWN0cy4gSXQncyBub3QgYQpmdWxsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBj
YWxsYmFjaywgYXMgc2V2ZXJhbCBkcml2ZXItc3BlY2lmaWMgcGFyYW1ldGVycwphcmUgc3RpbGwg
cmVxdWlyZWQuCgp2NDoKCSogY2xlYW51cHMgZnJvbSBjaGVja3BhdGNoLnBsCnYyOgoJKiBkb2N1
bWVudGF0aW9uIGZpeGVzCgpTaWduZWQtb2ZmLWJ5OiBUaG9tYXMgWmltbWVybWFubiA8dHppbW1l
cm1hbm5Ac3VzZS5kZT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5j
IHwgNjIgKysrKysrKysrKysrKysrKysrKysrKysrKysrCiBpbmNsdWRlL2RybS9kcm1fZ2VtX3Zy
YW1faGVscGVyLmggICAgIHwgIDggKysrKwogMiBmaWxlcyBjaGFuZ2VkLCA3MCBpbnNlcnRpb25z
KCspCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYyBi
L2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmMKaW5kZXggMjY0MDI4Mzc0MzM2
Li5hYmEwNzMyNzljYTIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3ZyYW1f
aGVscGVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYwpAQCAt
MSw2ICsxLDcgQEAKIC8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVy
CiAKICNpbmNsdWRlIDxkcm0vZHJtX2dlbV92cmFtX2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9k
cm1fbW9kZS5oPgogI2luY2x1ZGUgPGRybS90dG0vdHRtX3BhZ2VfYWxsb2MuaD4KIAogLyoqCkBA
IC00MTEsNiArNDEyLDY3IEBAIHZvaWQgZHJtX2dlbV92cmFtX2t1bm1hcChzdHJ1Y3QgZHJtX2dl
bV92cmFtX29iamVjdCAqZ2JvKQogfQogRVhQT1JUX1NZTUJPTChkcm1fZ2VtX3ZyYW1fa3VubWFw
KTsKIAorLyoqCisgKiBkcm1fZ2VtX3ZyYW1fZmlsbF9jcmVhdGVfZHVtYigpIC0gXAorCUhlbHBl
ciBmb3IgaW1wbGVtZW50aW5nICZzdHJ1Y3QgZHJtX2RyaXZlci5kdW1iX2NyZWF0ZQorICogQGZp
bGU6CQl0aGUgRFJNIGZpbGUKKyAqIEBkZXY6CQl0aGUgRFJNIGRldmljZQorICogQGJkZXY6CQl0
aGUgVFRNIEJPIGRldmljZSBtYW5hZ2luZyB0aGUgYnVmZmVyIG9iamVjdAorICogQHBnX2FsaWdu
OgkJdGhlIGJ1ZmZlcidzIGFsaWdubWVudCBpbiBtdWx0aXBsZXMgb2YgdGhlIHBhZ2Ugc2l6ZQor
ICogQGludGVycnVwdGlibGU6CXNsZWVwIGludGVycnVwdGlibGUgaWYgd2FpdGluZyBmb3IgbWVt
b3J5CisgKiBAYXJnczoJCXRoZSBhcmd1bWVudHMgYXMgcHJvdmlkZWQgdG8gXAorCQkJCSZzdHJ1
Y3QgZHJtX2RyaXZlci5kdW1iX2NyZWF0ZQorICoKKyAqIFRoaXMgaGVscGVyIGZ1bmN0aW9uIGZp
bGxzICZzdHJ1Y3QgZHJtX21vZGVfY3JlYXRlX2R1bWIsIHdoaWNoIGlzIHVzZWQKKyAqIGJ5ICZz
dHJ1Y3QgZHJtX2RyaXZlci5kdW1iX2NyZWF0ZS4gSW1wbGVtZW50YXRpb25zIG9mIHRoaXMgaW50
ZXJmYWNlCisgKiBzaG91bGQgZm9yd2FyZHMgdGhlaXIgYXJndW1lbnRzIHRvIHRoaXMgaGVscGVy
LCBwbHVzIHRoZSBkcml2ZXItc3BlY2lmaWMKKyAqIHBhcmFtZXRlcnMuCisgKgorICogUmV0dXJu
czoKKyAqIDAgb24gc3VjY2Vzcywgb3IKKyAqIGEgbmVnYXRpdmUgZXJyb3IgY29kZSBvdGhlcndp
c2UuCisgKi8KK2ludCBkcm1fZ2VtX3ZyYW1fZmlsbF9jcmVhdGVfZHVtYihzdHJ1Y3QgZHJtX2Zp
bGUgKmZpbGUsCisJCQkJICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAorCQkJCSAgc3RydWN0IHR0
bV9ib19kZXZpY2UgKmJkZXYsCisJCQkJICB1bnNpZ25lZCBsb25nIHBnX2FsaWduLAorCQkJCSAg
Ym9vbCBpbnRlcnJ1cHRpYmxlLAorCQkJCSAgc3RydWN0IGRybV9tb2RlX2NyZWF0ZV9kdW1iICph
cmdzKQoreworCXNpemVfdCBwaXRjaCwgc2l6ZTsKKwlzdHJ1Y3QgZHJtX2dlbV92cmFtX29iamVj
dCAqZ2JvOworCWludCByZXQ7CisJdTMyIGhhbmRsZTsKKworCXBpdGNoID0gYXJncy0+d2lkdGgg
KiAoKGFyZ3MtPmJwcCArIDcpIC8gOCk7CisJc2l6ZSA9IHBpdGNoICogYXJncy0+aGVpZ2h0Owor
CisJc2l6ZSA9IHJvdW5kdXAoc2l6ZSwgUEFHRV9TSVpFKTsKKwlpZiAoIXNpemUpCisJCXJldHVy
biAtRUlOVkFMOworCisJZ2JvID0gZHJtX2dlbV92cmFtX2NyZWF0ZShkZXYsIGJkZXYsIHNpemUs
IHBnX2FsaWduLCBpbnRlcnJ1cHRpYmxlKTsKKwlpZiAoSVNfRVJSKGdibykpCisJCXJldHVybiBQ
VFJfRVJSKGdibyk7CisKKwlyZXQgPSBkcm1fZ2VtX2hhbmRsZV9jcmVhdGUoZmlsZSwgJmdiby0+
Z2VtLCAmaGFuZGxlKTsKKwlpZiAocmV0KQorCQlnb3RvIGVycl9kcm1fZ2VtX29iamVjdF9wdXRf
dW5sb2NrZWQ7CisKKwlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQoJmdiby0+Z2VtKTsKKwor
CWFyZ3MtPnBpdGNoID0gcGl0Y2g7CisJYXJncy0+c2l6ZSA9IHNpemU7CisJYXJncy0+aGFuZGxl
ID0gaGFuZGxlOworCisJcmV0dXJuIDA7CisKK2Vycl9kcm1fZ2VtX29iamVjdF9wdXRfdW5sb2Nr
ZWQ6CisJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKCZnYm8tPmdlbSk7CisJcmV0dXJuIHJl
dDsKK30KK0VYUE9SVF9TWU1CT0woZHJtX2dlbV92cmFtX2ZpbGxfY3JlYXRlX2R1bWIpOworCiAv
KgogICogSGVscGVycyBmb3Igc3RydWN0IHR0bV9ib19kcml2ZXIKICAqLwpkaWZmIC0tZ2l0IGEv
aW5jbHVkZS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5oIGIvaW5jbHVkZS9kcm0vZHJtX2dlbV92
cmFtX2hlbHBlci5oCmluZGV4IGI4N2NiMmU5ZDlkYS4uOGU1NGY3MjFjOWY4IDEwMDY0NAotLS0g
YS9pbmNsdWRlL2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmgKKysrIGIvaW5jbHVkZS9kcm0vZHJt
X2dlbV92cmFtX2hlbHBlci5oCkBAIC04LDYgKzgsNyBAQAogI2luY2x1ZGUgPGRybS90dG0vdHRt
X3BsYWNlbWVudC5oPgogI2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5oPiAvKiBmb3IgY29udGFpbmVy
X29mKCkgKi8KIAorc3RydWN0IGRybV9tb2RlX2NyZWF0ZV9kdW1iOwogc3RydWN0IGZpbHA7CiAK
ICNkZWZpbmUgRFJNX0dFTV9WUkFNX1BMX0ZMQUdfVlJBTQlUVE1fUExfRkxBR19WUkFNCkBAIC04
OSw2ICs5MCwxMyBAQCB2b2lkIGRybV9nZW1fdnJhbV9rdW5tYXBfYXQoc3RydWN0IGRybV9nZW1f
dnJhbV9vYmplY3QgKmdibywKIAkJCSAgICBzdHJ1Y3QgdHRtX2JvX2ttYXBfb2JqICprbWFwKTsK
IHZvaWQgZHJtX2dlbV92cmFtX2t1bm1hcChzdHJ1Y3QgZHJtX2dlbV92cmFtX29iamVjdCAqZ2Jv
KTsKIAoraW50IGRybV9nZW1fdnJhbV9maWxsX2NyZWF0ZV9kdW1iKHN0cnVjdCBkcm1fZmlsZSAq
ZmlsZSwKKwkJCQkgIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCisJCQkJICBzdHJ1Y3QgdHRtX2Jv
X2RldmljZSAqYmRldiwKKwkJCQkgIHVuc2lnbmVkIGxvbmcgcGdfYWxpZ24sCisJCQkJICBib29s
IGludGVycnVwdGlibGUsCisJCQkJICBzdHJ1Y3QgZHJtX21vZGVfY3JlYXRlX2R1bWIgKmFyZ3Mp
OworCiAvKgogICogSGVscGVycyBmb3Igc3RydWN0IHR0bV9ib19kcml2ZXIKICAqLwotLSAKMi4y
MS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmkt
ZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
