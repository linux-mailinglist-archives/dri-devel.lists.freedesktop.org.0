Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6A0FF109510
	for <lists+dri-devel@lfdr.de>; Mon, 25 Nov 2019 22:20:35 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F06C389E50;
	Mon, 25 Nov 2019 21:20:31 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x341.google.com (mail-wm1-x341.google.com
 [IPv6:2a00:1450:4864:20::341])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 09E3489DB8
 for <dri-devel@lists.freedesktop.org>; Mon, 25 Nov 2019 21:20:29 +0000 (UTC)
Received: by mail-wm1-x341.google.com with SMTP id z19so916617wmk.3
 for <dri-devel@lists.freedesktop.org>; Mon, 25 Nov 2019 13:20:29 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:content-transfer-encoding
 :in-reply-to:user-agent;
 bh=W58dQhtWNGprziRXHB82UiT0KsnndU6ughcCPO0svX0=;
 b=UH46h6nxYba8N/BsXgkp7/VsaN8oC0Lxg3dtlArPnF2xKnIvCpzboZWcWJHMu/61W8
 hhpTMoZOdeUgBYOMT9T1RNv8eYDANfc0cJeRENhOyphUAxPGfXoQ+1IwUNUek7GUJX80
 Rk67Aq3bA7ue1vQKBo2TzHvztt2pDa3ERTjNRj3ggAUbbeSmoksCl9wXmGue4iLoF4Pz
 3DNsv/1NXBgCQVMcOaGXmvqvAiU2yHoE3UrYr5iWHg6yUKk9LIoML2vDcgRK74c/F5Gs
 9kOPoWFoK9iyXpwjr5raWe31mxgplZAR2gSSPjXhqu6YkyWejXtX1jrnCvCQKQwT6moR
 SdnA==
X-Gm-Message-State: APjAAAXk4P/qEpY2quZBDUMfb7QS0KksZt0sL58Jg5TJ2nkEyDP++K0y
 uefni7BabwyHRSynqMWNZk6EPQ==
X-Google-Smtp-Source: APXvYqxS8V02h3l1eZ+f6Wf4xdbvxhkzTrZINt+M8NCaMtwLDFMEZ7K7jGOgU5QJ2ZT9DIncMW8LCA==
X-Received: by 2002:a05:600c:1088:: with SMTP id e8mr791023wmd.7.1574716828468; 
 Mon, 25 Nov 2019 13:20:28 -0800 (PST)
Received: from phenom.ffwll.local (212-51-149-96.fiber7.init7.net.
 [212.51.149.96])
 by smtp.gmail.com with ESMTPSA id z7sm565872wma.46.2019.11.25.13.20.25
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 25 Nov 2019 13:20:27 -0800 (PST)
Date: Mon, 25 Nov 2019 22:20:24 +0100
From: Daniel Vetter <daniel@ffwll.ch>
To: Jani Nikula <jani.nikula@intel.com>
Subject: Re: [PATCH] Revert "drm/fbdev: Fallback to non tiled mode if all
 tiles not present"
Message-ID: <20191125212024.GM29965@phenom.ffwll.local>
References: <20191123091840.32382-1-uma.shankar@intel.com>
 <8736ecouz5.fsf@intel.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <8736ecouz5.fsf@intel.com>
X-Operating-System: Linux phenom 5.3.0-2-amd64 
User-Agent: Mutt/1.12.2 (2019-09-21)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:content-transfer-encoding:in-reply-to
 :user-agent;
 bh=W58dQhtWNGprziRXHB82UiT0KsnndU6ughcCPO0svX0=;
 b=GpVUZcfj5AUWBILBLuj0AejUyvyg/5YcjrAR+UM5D6qrApYeD8WkhV5ndiLCeP509t
 aHkKQr8ezKX2r7CUHdma6mJiyVoeqhJejJElEnFwWJBiYBNqXJHUgcM40rtphPrWNl/j
 PQ7tnEsUyoZ4iTxdkvcO6eLNa5LKGFn7X9Esk=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@ffwll.ch>, intel-gfx@lists.freedesktop.org,
 "Peres, Martin" <martin.peres@intel.com>, dri-devel@lists.freedesktop.org,
 Manasi Navare <manasi.d.navare@intel.com>, Uma Shankar <uma.shankar@intel.com>,
 Dave Airlie <airlied@redhat.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gTW9uLCBOb3YgMjUsIDIwMTkgYXQgMDU6MDc6MjZQTSArMDIwMCwgSmFuaSBOaWt1bGEgd3Jv
dGU6Cj4gT24gU2F0LCAyMyBOb3YgMjAxOSwgVW1hIFNoYW5rYXIgPHVtYS5zaGFua2FyQGludGVs
LmNvbT4gd3JvdGU6Cj4gPiBUaGlzIHJldmVydHMgY29tbWl0IGYyNWM3YTAwNmNkMWMwNzI1NDc4
MGUzNDA2ZTQ1Y2VlNDg0MmI5MzMuCj4gPgo+ID4gMnAyYyBkaXNwbGF5IGNvbmZpZ3VyYXRpb24g
Ymxvd3MgdXAgZG1lc2cgd2hlbiBvbmUgY29ubmVjdG9yIGlzCj4gPiBkaXNjb25uZWN0ZWQsIGNh
dXNpbmcgaXNzdWVzIGluIENJLgo+ID4KPiA+IEJlbG93IGFyZSB0aGUgc2FtcGxlIGVycm9ycyB0
aHJvd24gaW4gbG9nczoKPiA+Cj4gPiBbSUdUXSBjb3JlX2dldHZlcnNpb246IGV4ZWN1dGluZwo+
ID4gW0lHVF0gY29yZV9nZXR2ZXJzaW9uOiBleGl0aW5nLCByZXQ9MAo+ID4gU2V0dGluZyBkYW5n
ZXJvdXMgb3B0aW9uIHJlc2V0IC0gdGFpbnRpbmcga2VybmVsCj4gPiBkcm06ZHJtX2F0b21pY19o
ZWxwZXJfd2FpdF9mb3JfZGVwZW5kZW5jaWVzXSBFUlJPUiBbQ1JUQzoxNTI6cGlwZSBCXSBmbGlw
X2RvbmUgdGltZWQgb3V0Cj4gPiBkcm06ZHJtX2F0b21pY19oZWxwZXJfd2FpdF9mb3JfZGVwZW5k
ZW5jaWVzXSBFUlJPUiBbQ09OTkVDVE9SOjI5OTpEUC0yXSBmbGlwX2RvbmUgdGltZWQgb3V0Cj4g
PiBkcm06ZHJtX2F0b21pY19oZWxwZXJfd2FpdF9mb3JfZGVwZW5kZW5jaWVzXSBFUlJPUiBbUExB
TkU6OTI6cGxhbmUgMUJdIGZsaXBfZG9uZSB0aW1lZCBvdXQKPiA+IFtkcm06ZHJtX2F0b21pY19o
ZWxwZXJfd2FpdF9mb3JfZmxpcF9kb25lXSBFUlJPUiBbQ1JUQzoxNTI6cGlwZSBCXSBmbGlwX2Rv
bmUgdGltZWQgb3V0Cj4gPiBbZHJtOmRybV9hdG9taWNfaGVscGVyX3dhaXRfZm9yX2RlcGVuZGVu
Y2llc10gRVJST1IgW0NSVEM6MTUyOnBpcGUgQl0gZmxpcF9kb25lIHRpbWVkIG91dAo+ID4gW2Ry
bTpkcm1fYXRvbWljX2hlbHBlcl93YWl0X2Zvcl9kZXBlbmRlbmNpZXNdIEVSUk9SIFtDT05ORUNU
T1I6Mjk5OkRQLTJdIGZsaXBfZG9uZSB0aW1lZCBvdXQKPiA+IFtkcm06ZHJtX2F0b21pY19oZWxw
ZXJfd2FpdF9mb3JfZGVwZW5kZW5jaWVzXSBFUlJPUiBbUExBTkU6OTI6cGxhbmUgMUJdIGZsaXBf
ZG9uZSB0aW1lZCBvdXQKPiA+IFtkcm06ZHJtX2F0b21pY19oZWxwZXJfd2FpdF9mb3JfZmxpcF9k
b25lXSBFUlJPUiBbQ1JUQzoxNTI6cGlwZSBCXSBmbGlwX2RvbmUgdGltZWQgb3V0Cj4gPiBDb25z
b2xlOiBzd2l0Y2hpbmcgdG8gY29sb3VyIGZyYW1lIGJ1ZmZlciBkZXZpY2UgNDgweDEzNQo+ID4g
W2RybTpkcm1fYXRvbWljX2hlbHBlcl93YWl0X2Zvcl9kZXBlbmRlbmNpZXNdIEVSUk9SIFtDUlRD
OjE1MjpwaXBlIEJdIGZsaXBfZG9uZSB0aW1lZCBvdXQKPiA+IFtkcm06ZHJtX2F0b21pY19oZWxw
ZXJfd2FpdF9mb3JfZGVwZW5kZW5jaWVzXSBFUlJPUiBbQ09OTkVDVE9SOjI5OTpEUC0yXSBmbGlw
X2RvbmUgdGltZWQgb3V0Cj4gPgo+ID4gUmV2ZXJ0aW5nIHRoZSBjaGFuZ2UgZm9yIG5vdyB0byB1
bmJsb2NrIENJIGV4ZWN1dGlvbi4KPiA+Cj4gPiBDYzogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5z
eXJqYWxhQGxpbnV4LmludGVsLmNvbT4KPiA+IENjOiBEYXZlIEFpcmxpZSA8YWlybGllZEByZWRo
YXQuY29tPgo+ID4gQ2M6IEphbmkgTmlrdWxhIDxqYW5pLm5pa3VsYUBpbnRlbC5jb20+Cj4gPiBD
YzogTWFuYXNpIE5hdmFyZSA8bWFuYXNpLmQubmF2YXJlQGludGVsLmNvbT4KPiA+IFNpZ25lZC1v
ZmYtYnk6IFVtYSBTaGFua2FyIDx1bWEuc2hhbmthckBpbnRlbC5jb20+Cj4gCj4gUHVzaGVkIHRv
IGRybS1taXNjLW5leHQgd2l0aCBEYW5pZWwncyBpcmMgYWNrLiBUaGFua3MgZm9yIHRoZQo+IHJl
dmVydC4gQmFjayB0byB0aGUgZHJhd2luZyBib2FyZC4KPiAKPiBJIHdhcyBhYm91dCB0byBhZGQg
dGhlIEJ1Z3ppbGxhOiByZWZlcmVuY2UsIGJ1dCB0aGlzIGJlaW5nIGEgZ2l0bGFiCj4gaXNzdWUg
aW5zdGVhZCwgSSBvcHRlZCBmb3IgdGhlIGdpdGxhYiBDbG9zZXM6IHRhZzoKPiAKPiAJQ2xvc2Vz
OiBodHRwczovL2dpdGxhYi5mcmVlZGVza3RvcC5vcmcvZHJtL2ludGVsL2lzc3Vlcy82Cj4gCj4g
V2Ugc2hvdWxkIHByb2JhYmx5IGFsaWduIG9uIHdoYXQgd2Ugd2FudCB0byB1c2UgZ29pbmcgZm9y
d2FyZC4gQW5kIGRvIHdlCj4gd2FudCB0byBrZWVwIHVzaW5nIEJ1Z3ppbGxhIGZvciBidWd6aWxs
YSBidWdzPwoKSSBndWVzcyB3ZSBjb3VsZC9zaG91bGQgaGF2ZSB0aGF0IGRpc2N1c3Npb24gb25j
ZSB3ZSBoYXZlIHRoZSBnaXQgcmVwb3Mgb24KZ2l0bGFiIHRvby4gUmlnaHQgbm93IEkgZG9uJ3Qg
dGhpbmsgdGhlIGFib3ZlIGRvZXMgYW55dGhpbmcgLi4uCgpBc2lkZSBmcm9tIHRoYXQgSSB0aGlu
ayB0aGlzIG1ha2VzIHNlbnNlLgotRGFuaWVsCgo+IAo+IEJSLAo+IEphbmkuCj4gCj4gCj4gPiAt
LS0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vZHJtX2NsaWVudF9tb2Rlc2V0LmMgfCA3MCAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiAgMSBmaWxlIGNoYW5nZWQsIDcwIGRlbGV0aW9ucygt
KQo+ID4KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2NsaWVudF9tb2Rlc2V0
LmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2NsaWVudF9tb2Rlc2V0LmMKPiA+IGluZGV4IGYyMTUw
YTBiYWM0Yy4uODk1YjczZjIzMDc5IDEwMDY0NAo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ry
bV9jbGllbnRfbW9kZXNldC5jCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2NsaWVudF9t
b2Rlc2V0LmMKPiA+IEBAIC0xMTQsMzMgKzExNCw2IEBAIGRybV9jbGllbnRfZmluZF9tb2Rlc2V0
KHN0cnVjdCBkcm1fY2xpZW50X2RldiAqY2xpZW50LCBzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCj4g
PiAgCXJldHVybiBOVUxMOwo+ID4gIH0KPiA+ICAKPiA+IC1zdGF0aWMgc3RydWN0IGRybV9kaXNw
bGF5X21vZGUgKgo+ID4gLWRybV9jb25uZWN0b3JfZ2V0X3RpbGVkX21vZGUoc3RydWN0IGRybV9j
b25uZWN0b3IgKmNvbm5lY3RvcikKPiA+IC17Cj4gPiAtCXN0cnVjdCBkcm1fZGlzcGxheV9tb2Rl
ICptb2RlOwo+ID4gLQo+ID4gLQlsaXN0X2Zvcl9lYWNoX2VudHJ5KG1vZGUsICZjb25uZWN0b3It
Pm1vZGVzLCBoZWFkKSB7Cj4gPiAtCQlpZiAobW9kZS0+aGRpc3BsYXkgPT0gY29ubmVjdG9yLT50
aWxlX2hfc2l6ZSAmJgo+ID4gLQkJICAgIG1vZGUtPnZkaXNwbGF5ID09IGNvbm5lY3Rvci0+dGls
ZV92X3NpemUpCj4gPiAtCQkJcmV0dXJuIG1vZGU7Cj4gPiAtCX0KPiA+IC0JcmV0dXJuIE5VTEw7
Cj4gPiAtfQo+ID4gLQo+ID4gLXN0YXRpYyBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqCj4gPiAt
ZHJtX2Nvbm5lY3Rvcl9mYWxsYmFja19ub25fdGlsZWRfbW9kZShzdHJ1Y3QgZHJtX2Nvbm5lY3Rv
ciAqY29ubmVjdG9yKQo+ID4gLXsKPiA+IC0Jc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGU7
Cj4gPiAtCj4gPiAtCWxpc3RfZm9yX2VhY2hfZW50cnkobW9kZSwgJmNvbm5lY3Rvci0+bW9kZXMs
IGhlYWQpIHsKPiA+IC0JCWlmIChtb2RlLT5oZGlzcGxheSA9PSBjb25uZWN0b3ItPnRpbGVfaF9z
aXplICYmCj4gPiAtCQkgICAgbW9kZS0+dmRpc3BsYXkgPT0gY29ubmVjdG9yLT50aWxlX3Zfc2l6
ZSkKPiA+IC0JCQljb250aW51ZTsKPiA+IC0JCXJldHVybiBtb2RlOwo+ID4gLQl9Cj4gPiAtCXJl
dHVybiBOVUxMOwo+ID4gLX0KPiA+IC0KPiA+ICBzdGF0aWMgc3RydWN0IGRybV9kaXNwbGF5X21v
ZGUgKgo+ID4gIGRybV9jb25uZWN0b3JfaGFzX3ByZWZlcnJlZF9tb2RlKHN0cnVjdCBkcm1fY29u
bmVjdG9yICpjb25uZWN0b3IsIGludCB3aWR0aCwgaW50IGhlaWdodCkKPiA+ICB7Cj4gPiBAQCAt
Mzc1LDE0ICszNDgsOCBAQCBzdGF0aWMgYm9vbCBkcm1fY2xpZW50X3RhcmdldF9wcmVmZXJyZWQo
c3RydWN0IGRybV9jb25uZWN0b3IgKipjb25uZWN0b3JzLAo+ID4gIAlzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubmVjdG9yOwo+ID4gIAl1NjQgY29ubl9jb25maWd1cmVkID0gMDsKPiA+ICAJaW50
IHRpbGVfcGFzcyA9IDA7Cj4gPiAtCWludCBudW1fdGlsZWRfY29ubnMgPSAwOwo+ID4gIAlpbnQg
aTsKPiA+ICAKPiA+IC0JZm9yIChpID0gMDsgaSA8IGNvbm5lY3Rvcl9jb3VudDsgaSsrKSB7Cj4g
PiAtCQlpZiAoY29ubmVjdG9yc1tpXS0+aGFzX3RpbGUpCj4gPiAtCQkJbnVtX3RpbGVkX2Nvbm5z
Kys7Cj4gPiAtCX0KPiA+IC0KPiA+ICByZXRyeToKPiA+ICAJZm9yIChpID0gMDsgaSA8IGNvbm5l
Y3Rvcl9jb3VudDsgaSsrKSB7Cj4gPiAgCQljb25uZWN0b3IgPSBjb25uZWN0b3JzW2ldOwo+ID4g
QEAgLTQzMiwyOCArMzk5LDYgQEAgc3RhdGljIGJvb2wgZHJtX2NsaWVudF90YXJnZXRfcHJlZmVy
cmVkKHN0cnVjdCBkcm1fY29ubmVjdG9yICoqY29ubmVjdG9ycywKPiA+ICAJCQlsaXN0X2Zvcl9l
YWNoX2VudHJ5KG1vZGVzW2ldLCAmY29ubmVjdG9yLT5tb2RlcywgaGVhZCkKPiA+ICAJCQkJYnJl
YWs7Cj4gPiAgCQl9Cj4gPiAtCQkvKgo+ID4gLQkJICogSW4gY2FzZSBvZiB0aWxlZCBtb2RlIGlm
IGFsbCB0aWxlcyBub3QgcHJlc2VudCBmYWxsYmFjayB0bwo+ID4gLQkJICogZmlyc3QgYXZhaWxh
YmxlIG5vbiB0aWxlZCBtb2RlLgo+ID4gLQkJICogQWZ0ZXIgYWxsIHRpbGVzIGFyZSBwcmVzZW50
LCB0cnkgdG8gZmluZCB0aGUgdGlsZWQgbW9kZQo+ID4gLQkJICogZm9yIGFsbCBhbmQgaWYgdGls
ZWQgbW9kZSBub3QgcHJlc2VudCBkdWUgdG8gZmJjb24gc2l6ZQo+ID4gLQkJICogbGltaXRhdGlv
bnMsIHVzZSBmaXJzdCBub24gdGlsZWQgbW9kZSBvbmx5IGZvcgo+ID4gLQkJICogdGlsZSAwLDAg
YW5kIHNldCB0byBubyBtb2RlIGZvciBhbGwgb3RoZXIgdGlsZXMuCj4gPiAtCQkgKi8KPiA+IC0J
CWlmIChjb25uZWN0b3ItPmhhc190aWxlKSB7Cj4gPiAtCQkJaWYgKG51bV90aWxlZF9jb25ucyA8
Cj4gPiAtCQkJICAgIGNvbm5lY3Rvci0+bnVtX2hfdGlsZSAqIGNvbm5lY3Rvci0+bnVtX3ZfdGls
ZSB8fAo+ID4gLQkJCSAgICAoY29ubmVjdG9yLT50aWxlX2hfbG9jID09IDAgJiYKPiA+IC0JCQkg
ICAgIGNvbm5lY3Rvci0+dGlsZV92X2xvYyA9PSAwICYmCj4gPiAtCQkJICAgICAhZHJtX2Nvbm5l
Y3Rvcl9nZXRfdGlsZWRfbW9kZShjb25uZWN0b3IpKSkgewo+ID4gLQkJCQlEUk1fREVCVUdfS01T
KCJGYWxsaW5nIGJhY2sgdG8gbm9uIHRpbGVkIG1vZGUgb24gQ29ubmVjdG9yICVkXG4iLAo+ID4g
LQkJCQkJICAgICAgY29ubmVjdG9yLT5iYXNlLmlkKTsKPiA+IC0JCQkJbW9kZXNbaV0gPSBkcm1f
Y29ubmVjdG9yX2ZhbGxiYWNrX25vbl90aWxlZF9tb2RlKGNvbm5lY3Rvcik7Cj4gPiAtCQkJfSBl
bHNlIHsKPiA+IC0JCQkJbW9kZXNbaV0gPSBkcm1fY29ubmVjdG9yX2dldF90aWxlZF9tb2RlKGNv
bm5lY3Rvcik7Cj4gPiAtCQkJfQo+ID4gLQkJfQo+ID4gLQo+ID4gIAkJRFJNX0RFQlVHX0tNUygi
Zm91bmQgbW9kZSAlc1xuIiwgbW9kZXNbaV0gPyBtb2Rlc1tpXS0+bmFtZSA6Cj4gPiAgCQkJICAi
bm9uZSIpOwo+ID4gIAkJY29ubl9jb25maWd1cmVkIHw9IEJJVF9VTEwoaSk7Cj4gPiBAQCAtNTcw
LDcgKzUxNSw2IEBAIHN0YXRpYyBib29sIGRybV9jbGllbnRfZmlybXdhcmVfY29uZmlnKHN0cnVj
dCBkcm1fY2xpZW50X2RldiAqY2xpZW50LAo+ID4gIAlib29sIGZhbGxiYWNrID0gdHJ1ZSwgcmV0
ID0gdHJ1ZTsKPiA+ICAJaW50IG51bV9jb25uZWN0b3JzX2VuYWJsZWQgPSAwOwo+ID4gIAlpbnQg
bnVtX2Nvbm5lY3RvcnNfZGV0ZWN0ZWQgPSAwOwo+ID4gLQlpbnQgbnVtX3RpbGVkX2Nvbm5zID0g
MDsKPiA+ICAJc3RydWN0IGRybV9tb2Rlc2V0X2FjcXVpcmVfY3R4IGN0eDsKPiA+ICAKPiA+ICAJ
aWYgKCFkcm1fZHJ2X3VzZXNfYXRvbWljX21vZGVzZXQoZGV2KSkKPiA+IEBAIC01ODgsMTAgKzUz
Miw2IEBAIHN0YXRpYyBib29sIGRybV9jbGllbnRfZmlybXdhcmVfY29uZmlnKHN0cnVjdCBkcm1f
Y2xpZW50X2RldiAqY2xpZW50LAo+ID4gIAltZW1jcHkoc2F2ZV9lbmFibGVkLCBlbmFibGVkLCBj
b3VudCk7Cj4gPiAgCW1hc2sgPSBHRU5NQVNLKGNvdW50IC0gMSwgMCk7Cj4gPiAgCWNvbm5fY29u
ZmlndXJlZCA9IDA7Cj4gPiAtCWZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7Cj4gPiAtCQlp
ZiAoY29ubmVjdG9yc1tpXS0+aGFzX3RpbGUpCj4gPiAtCQkJbnVtX3RpbGVkX2Nvbm5zKys7Cj4g
PiAtCX0KPiA+ICByZXRyeToKPiA+ICAJY29ubl9zZXEgPSBjb25uX2NvbmZpZ3VyZWQ7Cj4gPiAg
CWZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7Cj4gPiBAQCAtNjkxLDE2ICs2MzEsNiBAQCBz
dGF0aWMgYm9vbCBkcm1fY2xpZW50X2Zpcm13YXJlX2NvbmZpZyhzdHJ1Y3QgZHJtX2NsaWVudF9k
ZXYgKmNsaWVudCwKPiA+ICAJCQkJICAgICAgY29ubmVjdG9yLT5uYW1lKTsKPiA+ICAJCQltb2Rl
c1tpXSA9ICZjb25uZWN0b3ItPnN0YXRlLT5jcnRjLT5tb2RlOwo+ID4gIAkJfQo+ID4gLQkJLyoK
PiA+IC0JCSAqIEluIGNhc2Ugb2YgdGlsZWQgbW9kZXMsIGlmIGFsbCB0aWxlcyBhcmUgbm90IHBy
ZXNlbnQKPiA+IC0JCSAqIHRoZW4gZmFsbGJhY2sgdG8gYSBub24gdGlsZWQgbW9kZS4KPiA+IC0J
CSAqLwo+ID4gLQkJaWYgKGNvbm5lY3Rvci0+aGFzX3RpbGUgJiYKPiA+IC0JCSAgICBudW1fdGls
ZWRfY29ubnMgPCBjb25uZWN0b3ItPm51bV9oX3RpbGUgKiBjb25uZWN0b3ItPm51bV92X3RpbGUp
IHsKPiA+IC0JCQlEUk1fREVCVUdfS01TKCJGYWxsaW5nIGJhY2sgdG8gbm9uIHRpbGVkIG1vZGUg
b24gQ29ubmVjdG9yICVkXG4iLAo+ID4gLQkJCQkgICAgICBjb25uZWN0b3ItPmJhc2UuaWQpOwo+
ID4gLQkJCW1vZGVzW2ldID0gZHJtX2Nvbm5lY3Rvcl9mYWxsYmFja19ub25fdGlsZWRfbW9kZShj
b25uZWN0b3IpOwo+ID4gLQkJfQo+ID4gIAkJY3J0Y3NbaV0gPSBuZXdfY3J0YzsKPiA+ICAKPiA+
ICAJCURSTV9ERUJVR19LTVMoImNvbm5lY3RvciAlcyBvbiBbQ1JUQzolZDolc106ICVkeCVkJXNc
biIsCj4gCj4gLS0gCj4gSmFuaSBOaWt1bGEsIEludGVsIE9wZW4gU291cmNlIEdyYXBoaWNzIENl
bnRlcgoKLS0gCkRhbmllbCBWZXR0ZXIKU29mdHdhcmUgRW5naW5lZXIsIEludGVsIENvcnBvcmF0
aW9uCmh0dHA6Ly9ibG9nLmZmd2xsLmNoCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2RyaS1kZXZlbA==
