Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5A1508BA51
	for <lists+dri-devel@lfdr.de>; Tue, 13 Aug 2019 15:33:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E49B96E135;
	Tue, 13 Aug 2019 13:33:29 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4F3916E135
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 13:33:27 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 5BF8CFA0;
 Tue, 13 Aug 2019 15:33:22 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v3 8/9] drm/panel: Add driver for the Toppoly TD028TTEC1 panel
Date: Tue, 13 Aug 2019 16:33:10 +0300
Message-Id: <20190813133311.26441-9-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190813133311.26441-1-laurent.pinchart@ideasonboard.com>
References: <20190813133311.26441-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1565703202;
 bh=PHWqE/hWzKP2ORQeQVrivnMFXvkUGz2AzrYgR+20lFc=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=s8e4NthZ4kV7lKF7q5MLshAqMcM9DB7b5dd0qJq3GIKInyU6UiVALZpUPQpzv6v6p
 B2/OIy3xAOEQ7yWX8z+7vBUwxzwwbhezbIF63+PzLMwgFoF6SOMTlA8QmojIGkvtlt
 p+b/C3qivAMMzKrJ5RiRLsw2i9D0+0OFvGL/8mSM=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYW5lbCBpcyB1c2VkIG9uIHRoZSBPcGVuTW9rbyBOZW8gRnJlZVJ1bm5lciBhbmQgTmVv
IDE5NzMuCgpUaGUgY29kZSBpcyBiYXNlZCBvbiB0aGUgb21hcGRybS1zcGVjaWZpYyBwYW5lbC10
cG8tdGQwMjh0dGVjMSBkcml2ZXIuCgpTaWduZWQtb2ZmLWJ5OiBMYXVyZW50IFBpbmNoYXJ0IDxs
YXVyZW50LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+Ci0tLQpDaGFuZ2VzIHNpbmNlIHYyOgoK
LSBDYWxsIGRybV9wYW5lbF91bnByZXBhcmUoKSBpbiAucmVtb3ZlKCkgaGFuZGxlcgoKQ2hhbmdl
cyBzaW5jZSB2MToKCi0gTWVudGlvbiBib2FyZHMgdXNpbmcgdGhlIHBhbmVsIGluIEtjb25maWcK
LSBSZW5hbWVkIHRkMDI4dHRlYzFfZGV2aWNlIHRvIHRkMDI4dHRlYzFfcGFuZWwKLSBDb21tZW50
cyB1cGRhdGVzCi0gUmVtb3ZlZCB1bm5lZWRlZCByZXQgY2hlY2sKLSBTdG9yZSB3aWR0aF9tbSBh
bmQgaGVpZ2h0X21tIGluIGRybV9kaXNwbGF5X21vZGUKLSBVc2UgZHJtX3BhbmVsX2Rpc2FibGUo
KSBpbiAucmVtb3ZlKCkgaGFuZGxlcgotLS0KIGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmln
ICAgICAgICAgICAgICAgIHwgICA4ICsKIGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZSAg
ICAgICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC10cG8tdGQw
Mjh0dGVjMS5jIHwgMzgyICsrKysrKysrKysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdlZCwgMzkx
IGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vcGFuZWwv
cGFuZWwtdHBvLXRkMDI4dHRlYzEuYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5l
bC9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcKaW5kZXggYjA1NjQ5YjMx
MThhLi5jMjY4OTQyMGQyZGQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29u
ZmlnCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnCkBAIC0zMjQsNiArMzI0LDE0
IEBAIGNvbmZpZyBEUk1fUEFORUxfU09OWV9BQ1g1NjVBS00KIAkgIFNheSBZIGhlcmUgaWYgeW91
IHdhbnQgdG8gZW5hYmxlIHN1cHBvcnQgZm9yIHRoZSBTb255IEFDWDU2NUFLTQogCSAgODAweDYw
MCAzLjUiIHBhbmVsIChmb3VuZCBvbiB0aGUgTm9raWEgTjkwMCkuCiAKK2NvbmZpZyBEUk1fUEFO
RUxfVFBPX1REMDI4VFRFQzEKKwl0cmlzdGF0ZSAiVG9wcG9seSAoVFBPKSBURDAyOFRURUMxIHBh
bmVsIGRyaXZlciIKKwlkZXBlbmRzIG9uIE9GICYmIFNQSQorCWRlcGVuZHMgb24gQkFDS0xJR0hU
X0NMQVNTX0RFVklDRQorCWhlbHAKKwkgIFNheSBZIGhlcmUgaWYgeW91IHdhbnQgdG8gZW5hYmxl
IHN1cHBvcnQgZm9yIFRQTyBURDAyOFRURUMxIDQ4MHg2NDAKKwkgIDIuOCIgcGFuZWwgKGZvdW5k
IG9uIHRoZSBPcGVuTW9rbyBOZW8gRnJlZVJ1bm5lciBhbmQgTmVvIDE5NzMpLgorCiBjb25maWcg
RFJNX1BBTkVMX1RQT19UUEcxMTAKIAl0cmlzdGF0ZSAiVFBPIFRQRyA4MDB4NDAwIHBhbmVsIgog
CWRlcGVuZHMgb24gT0YgJiYgU1BJICYmIEdQSU9MSUIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9wYW5lbC9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQppbmRl
eCAyOGNmMjMzMmZkMDYuLjI3Yjc3NjczN2FkMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L3BhbmVsL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQpAQCAt
MzQsNSArMzQsNiBAQCBvYmotJChDT05GSUdfRFJNX1BBTkVMX1NIQVJQX0xTMDQzVDFMRTAxKSAr
PSBwYW5lbC1zaGFycC1sczA0M3QxbGUwMS5vCiBvYmotJChDT05GSUdfRFJNX1BBTkVMX1NJVFJP
TklYX1NUNzcwMSkgKz0gcGFuZWwtc2l0cm9uaXgtc3Q3NzAxLm8KIG9iai0kKENPTkZJR19EUk1f
UEFORUxfU0lUUk9OSVhfU1Q3Nzg5VikgKz0gcGFuZWwtc2l0cm9uaXgtc3Q3Nzg5di5vCiBvYmot
JChDT05GSUdfRFJNX1BBTkVMX1NPTllfQUNYNTY1QUtNKSArPSBwYW5lbC1zb255LWFjeDU2NWFr
bS5vCitvYmotJChDT05GSUdfRFJNX1BBTkVMX1RQT19URDAyOFRURUMxKSArPSBwYW5lbC10cG8t
dGQwMjh0dGVjMS5vCiBvYmotJChDT05GSUdfRFJNX1BBTkVMX1RQT19UUEcxMTApICs9IHBhbmVs
LXRwby10cGcxMTAubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9UUlVMWV9OVDM1NTk3X1dRWEdB
KSArPSBwYW5lbC10cnVseS1udDM1NTk3Lm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9w
YW5lbC9wYW5lbC10cG8tdGQwMjh0dGVjMS5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVs
LXRwby10ZDAyOHR0ZWMxLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAw
Li5kZDY5ZmFjOTgwOGYKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwv
cGFuZWwtdHBvLXRkMDI4dHRlYzEuYwpAQCAtMCwwICsxLDM4MiBAQAorLy8gU1BEWC1MaWNlbnNl
LUlkZW50aWZpZXI6IEdQTC0yLjAKKy8qCisgKiBUb3Bwb2x5IFREMDI4VFRFQzEgUGFuZWwgRHJp
dmVyCisgKgorICogQ29weXJpZ2h0IChDKSAyMDE5IFRleGFzIEluc3RydW1lbnRzIEluY29ycG9y
YXRlZAorICoKKyAqIEJhc2VkIG9uIHRoZSBvbWFwZHJtLXNwZWNpZmljIHBhbmVsLXRwby10ZDAy
OHR0ZWMxIGRyaXZlcgorICoKKyAqIENvcHlyaWdodCAoQykgMjAwOCBOb2tpYSBDb3Jwb3JhdGlv
bgorICogQXV0aG9yOiBUb21pIFZhbGtlaW5lbiA8dG9taS52YWxrZWluZW5AdGkuY29tPgorICoK
KyAqIE5lbyAxOTczIGNvZGUgKGpidDZrNzQuYyk6CisgKiBDb3B5cmlnaHQgKEMpIDIwMDYtMjAw
NyBPcGVuTW9rbywgSW5jLgorICogQXV0aG9yOiBIYXJhbGQgV2VsdGUgPGxhZm9yZ2VAb3Blbm1v
a28ub3JnPgorICoKKyAqIFBvcnRlZCBhbmQgYWRhcHRlZCBmcm9tIE5lbyAxOTczIFUtQm9vdCBi
eToKKyAqIEguIE5pa29sYXVzIFNjaGFsbGVyIDxobnNAZ29sZGVsaWNvLmNvbT4KKyAqLworCisj
aW5jbHVkZSA8bGludXgvYmFja2xpZ2h0Lmg+CisjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KKyNp
bmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KKyNpbmNsdWRlIDxsaW51eC9zcGkvc3BpLmg+CisKKyNp
bmNsdWRlIDxkcm0vZHJtX2Nvbm5lY3Rvci5oPgorI2luY2x1ZGUgPGRybS9kcm1fbW9kZXMuaD4K
KyNpbmNsdWRlIDxkcm0vZHJtX3BhbmVsLmg+CisKKyNkZWZpbmUgSkJUX0NPTU1BTkQJCQkweDAw
MAorI2RlZmluZSBKQlRfREFUQQkJCTB4MTAwCisKKyNkZWZpbmUgSkJUX1JFR19TTEVFUF9JTgkJ
MHgxMAorI2RlZmluZSBKQlRfUkVHX1NMRUVQX09VVAkJMHgxMQorCisjZGVmaW5lIEpCVF9SRUdf
RElTUExBWV9PRkYJCTB4MjgKKyNkZWZpbmUgSkJUX1JFR19ESVNQTEFZX09OCQkweDI5CisKKyNk
ZWZpbmUgSkJUX1JFR19SR0JfRk9STUFUCQkweDNhCisjZGVmaW5lIEpCVF9SRUdfUVVBRF9SQVRF
CQkweDNiCisKKyNkZWZpbmUgSkJUX1JFR19QT1dFUl9PTl9PRkYJCTB4YjAKKyNkZWZpbmUgSkJU
X1JFR19CT09TVEVSX09QCQkweGIxCisjZGVmaW5lIEpCVF9SRUdfQk9PU1RFUl9NT0RFCQkweGIy
CisjZGVmaW5lIEpCVF9SRUdfQk9PU1RFUl9GUkVRCQkweGIzCisjZGVmaW5lIEpCVF9SRUdfT1BB
TVBfU1lTQ0xLCQkweGI0CisjZGVmaW5lIEpCVF9SRUdfVlNDX1ZPTFRBR0UJCTB4YjUKKyNkZWZp
bmUgSkJUX1JFR19WQ09NX1ZPTFRBR0UJCTB4YjYKKyNkZWZpbmUgSkJUX1JFR19FWFRfRElTUEwJ
CTB4YjcKKyNkZWZpbmUgSkJUX1JFR19PVVRQVVRfQ09OVFJPTAkJMHhiOAorI2RlZmluZSBKQlRf
UkVHX0RDQ0xLX0RDRVYJCTB4YjkKKyNkZWZpbmUgSkJUX1JFR19ESVNQTEFZX01PREUxCQkweGJh
CisjZGVmaW5lIEpCVF9SRUdfRElTUExBWV9NT0RFMgkJMHhiYgorI2RlZmluZSBKQlRfUkVHX0RJ
U1BMQVlfTU9ERQkJMHhiYworI2RlZmluZSBKQlRfUkVHX0FTV19TTEVXCQkweGJkCisjZGVmaW5l
IEpCVF9SRUdfRFVNTVlfRElTUExBWQkJMHhiZQorI2RlZmluZSBKQlRfUkVHX0RSSVZFX1NZU1RF
TQkJMHhiZgorCisjZGVmaW5lIEpCVF9SRUdfU0xFRVBfT1VUX0ZSX0EJCTB4YzAKKyNkZWZpbmUg
SkJUX1JFR19TTEVFUF9PVVRfRlJfQgkJMHhjMQorI2RlZmluZSBKQlRfUkVHX1NMRUVQX09VVF9G
Ul9DCQkweGMyCisjZGVmaW5lIEpCVF9SRUdfU0xFRVBfSU5fTENDTlRfRAkweGMzCisjZGVmaW5l
IEpCVF9SRUdfU0xFRVBfSU5fTENDTlRfRQkweGM0CisjZGVmaW5lIEpCVF9SRUdfU0xFRVBfSU5f
TENDTlRfRgkweGM1CisjZGVmaW5lIEpCVF9SRUdfU0xFRVBfSU5fTENDTlRfRwkweGM2CisKKyNk
ZWZpbmUgSkJUX1JFR19HQU1NQTFfRklORV8xCQkweGM3CisjZGVmaW5lIEpCVF9SRUdfR0FNTUEx
X0ZJTkVfMgkJMHhjOAorI2RlZmluZSBKQlRfUkVHX0dBTU1BMV9JTkNMSU5BVElPTgkweGM5Cisj
ZGVmaW5lIEpCVF9SRUdfR0FNTUExX0JMVUVfT0ZGU0VUCTB4Y2EKKworI2RlZmluZSBKQlRfUkVH
X0JMQU5LX0NPTlRST0wJCTB4Y2YKKyNkZWZpbmUgSkJUX1JFR19CTEFOS19USF9UVgkJMHhkMAor
I2RlZmluZSBKQlRfUkVHX0NLVl9PTl9PRkYJCTB4ZDEKKyNkZWZpbmUgSkJUX1JFR19DS1ZfMV8y
CQkJMHhkMgorI2RlZmluZSBKQlRfUkVHX09FVl9USU1JTkcJCTB4ZDMKKyNkZWZpbmUgSkJUX1JF
R19BU1dfVElNSU5HXzEJCTB4ZDQKKyNkZWZpbmUgSkJUX1JFR19BU1dfVElNSU5HXzIJCTB4ZDUK
KworI2RlZmluZSBKQlRfUkVHX0hDTE9DS19WR0EJCTB4ZWMKKyNkZWZpbmUgSkJUX1JFR19IQ0xP
Q0tfUVZHQQkJMHhlZAorCitzdHJ1Y3QgdGQwMjh0dGVjMV9wYW5lbCB7CisJc3RydWN0IGRybV9w
YW5lbCBwYW5lbDsKKworCXN0cnVjdCBzcGlfZGV2aWNlICpzcGk7CisJc3RydWN0IGJhY2tsaWdo
dF9kZXZpY2UgKmJhY2tsaWdodDsKK307CisKKyNkZWZpbmUgdG9fdGQwMjh0dGVjMV9kZXZpY2Uo
cCkgY29udGFpbmVyX29mKHAsIHN0cnVjdCB0ZDAyOHR0ZWMxX3BhbmVsLCBwYW5lbCkKKworc3Rh
dGljIGludCBqYnRfcmV0X3dyaXRlXzAoc3RydWN0IHRkMDI4dHRlYzFfcGFuZWwgKmxjZCwgdTgg
cmVnLCBpbnQgKmVycikKK3sKKwlzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpID0gbGNkLT5zcGk7CisJ
dTE2IHR4X2J1ZiA9IEpCVF9DT01NQU5EIHwgcmVnOworCWludCByZXQ7CisKKwlpZiAoZXJyICYm
ICplcnIpCisJCXJldHVybiAqZXJyOworCisJcmV0ID0gc3BpX3dyaXRlKHNwaSwgKHU4ICopJnR4
X2J1Ziwgc2l6ZW9mKHR4X2J1ZikpOworCWlmIChyZXQgPCAwKSB7CisJCWRldl9lcnIoJnNwaS0+
ZGV2LCAiJXM6IFNQSSB3cml0ZSBmYWlsZWQ6ICVkXG4iLCBfX2Z1bmNfXywgcmV0KTsKKwkJaWYg
KGVycikKKwkJCSplcnIgPSByZXQ7CisJfQorCisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGlu
dCBqYnRfcmVnX3dyaXRlXzEoc3RydWN0IHRkMDI4dHRlYzFfcGFuZWwgKmxjZCwKKwkJCSAgIHU4
IHJlZywgdTggZGF0YSwgaW50ICplcnIpCit7CisJc3RydWN0IHNwaV9kZXZpY2UgKnNwaSA9IGxj
ZC0+c3BpOworCXUxNiB0eF9idWZbMl07CisJaW50IHJldDsKKworCWlmIChlcnIgJiYgKmVycikK
KwkJcmV0dXJuICplcnI7CisKKwl0eF9idWZbMF0gPSBKQlRfQ09NTUFORCB8IHJlZzsKKwl0eF9i
dWZbMV0gPSBKQlRfREFUQSB8IGRhdGE7CisKKwlyZXQgPSBzcGlfd3JpdGUoc3BpLCAodTggKil0
eF9idWYsIHNpemVvZih0eF9idWYpKTsKKwlpZiAocmV0IDwgMCkgeworCQlkZXZfZXJyKCZzcGkt
PmRldiwgIiVzOiBTUEkgd3JpdGUgZmFpbGVkOiAlZFxuIiwgX19mdW5jX18sIHJldCk7CisJCWlm
IChlcnIpCisJCQkqZXJyID0gcmV0OworCX0KKworCXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyBp
bnQgamJ0X3JlZ193cml0ZV8yKHN0cnVjdCB0ZDAyOHR0ZWMxX3BhbmVsICpsY2QsCisJCQkgICB1
OCByZWcsIHUxNiBkYXRhLCBpbnQgKmVycikKK3sKKwlzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpID0g
bGNkLT5zcGk7CisJdTE2IHR4X2J1ZlszXTsKKwlpbnQgcmV0OworCisJaWYgKGVyciAmJiAqZXJy
KQorCQlyZXR1cm4gKmVycjsKKworCXR4X2J1ZlswXSA9IEpCVF9DT01NQU5EIHwgcmVnOworCXR4
X2J1ZlsxXSA9IEpCVF9EQVRBIHwgKGRhdGEgPj4gOCk7CisJdHhfYnVmWzJdID0gSkJUX0RBVEEg
fCAoZGF0YSAmIDB4ZmYpOworCisJcmV0ID0gc3BpX3dyaXRlKHNwaSwgKHU4ICopdHhfYnVmLCBz
aXplb2YodHhfYnVmKSk7CisJaWYgKHJldCA8IDApIHsKKwkJZGV2X2Vycigmc3BpLT5kZXYsICIl
czogU1BJIHdyaXRlIGZhaWxlZDogJWRcbiIsIF9fZnVuY19fLCByZXQpOworCQlpZiAoZXJyKQor
CQkJKmVyciA9IHJldDsKKwl9CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IHRkMDI4
dHRlYzFfZGlzYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgdGQwMjh0
dGVjMV9wYW5lbCAqbGNkID0gdG9fdGQwMjh0dGVjMV9kZXZpY2UocGFuZWwpOworCisJYmFja2xp
Z2h0X2Rpc2FibGUobGNkLT5iYWNrbGlnaHQpOworCisJamJ0X3JldF93cml0ZV8wKGxjZCwgSkJU
X1JFR19ESVNQTEFZX09GRiwgTlVMTCk7CisJamJ0X3JlZ193cml0ZV8yKGxjZCwgSkJUX1JFR19P
VVRQVVRfQ09OVFJPTCwgMHg4MDAyLCBOVUxMKTsKKwlqYnRfcmV0X3dyaXRlXzAobGNkLCBKQlRf
UkVHX1NMRUVQX0lOLCBOVUxMKTsKKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX1BPV0VS
X09OX09GRiwgMHgwMCwgTlVMTCk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCB0ZDAy
OHR0ZWMxX2VuYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgdGQwMjh0
dGVjMV9wYW5lbCAqbGNkID0gdG9fdGQwMjh0dGVjMV9kZXZpY2UocGFuZWwpOworCXVuc2lnbmVk
IGludCBpOworCWludCByZXQgPSAwOworCisJLyogVGhyZWUgdGltZXMgY29tbWFuZCB6ZXJvICov
CisJZm9yIChpID0gMDsgaSA8IDM7ICsraSkgeworCQlqYnRfcmV0X3dyaXRlXzAobGNkLCAweDAw
LCAmcmV0KTsKKwkJdXNsZWVwX3JhbmdlKDEwMDAsIDIwMDApOworCX0KKworCS8qIGRlZXAgc3Rh
bmRieSBvdXQgKi8KKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX1BPV0VSX09OX09GRiwg
MHgxNywgJnJldCk7CisKKwkvKiBSR0IgSS9GIG9uLCBSQU0gd3JpdGUgb2ZmLCBRVkdBIHRocm91
Z2gsIFNJR0NPTiBlbmFibGUgKi8KKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX0RJU1BM
QVlfTU9ERSwgMHg4MCwgJnJldCk7CisKKwkvKiBRdWFkIG1vZGUgb2ZmICovCisJamJ0X3JlZ193
cml0ZV8xKGxjZCwgSkJUX1JFR19RVUFEX1JBVEUsIDB4MDAsICZyZXQpOworCisJLyogQVZERCBv
biwgWFZERCBvbiAqLworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpCVF9SRUdfUE9XRVJfT05fT0ZG
LCAweDE2LCAmcmV0KTsKKworCS8qIE91dHB1dCBjb250cm9sICovCisJamJ0X3JlZ193cml0ZV8y
KGxjZCwgSkJUX1JFR19PVVRQVVRfQ09OVFJPTCwgMHhmZmY5LCAmcmV0KTsKKworCS8qIFNsZWVw
IG1vZGUgb2ZmICovCisJamJ0X3JldF93cml0ZV8wKGxjZCwgSkJUX1JFR19TTEVFUF9PVVQsICZy
ZXQpOworCisJLyogYXQgdGhpcyBwb2ludCB3ZSBoYXZlIGxpa2UgNTAlIGdyZXkgKi8KKworCS8q
IGluaXRpYWxpemUgcmVnaXN0ZXIgc2V0ICovCisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJUX1JF
R19ESVNQTEFZX01PREUxLCAweDAxLCAmcmV0KTsKKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRf
UkVHX0RJU1BMQVlfTU9ERTIsIDB4MDAsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpC
VF9SRUdfUkdCX0ZPUk1BVCwgMHg2MCwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJU
X1JFR19EUklWRV9TWVNURU0sIDB4MTAsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpC
VF9SRUdfQk9PU1RFUl9PUCwgMHg1NiwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJU
X1JFR19CT09TVEVSX01PREUsIDB4MzMsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpC
VF9SRUdfQk9PU1RFUl9GUkVRLCAweDExLCAmcmV0KTsKKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBK
QlRfUkVHX0JPT1NURVJfRlJFUSwgMHgxMSwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwg
SkJUX1JFR19PUEFNUF9TWVNDTEssIDB4MDIsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2Qs
IEpCVF9SRUdfVlNDX1ZPTFRBR0UsIDB4MmIsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2Qs
IEpCVF9SRUdfVkNPTV9WT0xUQUdFLCAweDQwLCAmcmV0KTsKKwlqYnRfcmVnX3dyaXRlXzEobGNk
LCBKQlRfUkVHX0VYVF9ESVNQTCwgMHgwMywgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwg
SkJUX1JFR19EQ0NMS19EQ0VWLCAweDA0LCAmcmV0KTsKKwkvKgorCSAqIGRlZmF1bHQgb2YgMHgw
MiBpbiBKQlRfUkVHX0FTV19TTEVXIHJlc3BvbnNpYmxlIGZvciA3Mkh6IHJlcXVpcmVtZW50CisJ
ICogdG8gYXZvaWQgcmVkIC8gYmx1ZSBmbGlja2VyCisJICovCisJamJ0X3JlZ193cml0ZV8xKGxj
ZCwgSkJUX1JFR19BU1dfU0xFVywgMHgwNCwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwg
SkJUX1JFR19EVU1NWV9ESVNQTEFZLCAweDAwLCAmcmV0KTsKKworCWpidF9yZWdfd3JpdGVfMShs
Y2QsIEpCVF9SRUdfU0xFRVBfT1VUX0ZSX0EsIDB4MTEsICZyZXQpOworCWpidF9yZWdfd3JpdGVf
MShsY2QsIEpCVF9SRUdfU0xFRVBfT1VUX0ZSX0IsIDB4MTEsICZyZXQpOworCWpidF9yZWdfd3Jp
dGVfMShsY2QsIEpCVF9SRUdfU0xFRVBfT1VUX0ZSX0MsIDB4MTEsICZyZXQpOworCWpidF9yZWdf
d3JpdGVfMihsY2QsIEpCVF9SRUdfU0xFRVBfSU5fTENDTlRfRCwgMHgyMDQwLCAmcmV0KTsKKwlq
YnRfcmVnX3dyaXRlXzIobGNkLCBKQlRfUkVHX1NMRUVQX0lOX0xDQ05UX0UsIDB4NjBjMCwgJnJl
dCk7CisJamJ0X3JlZ193cml0ZV8yKGxjZCwgSkJUX1JFR19TTEVFUF9JTl9MQ0NOVF9GLCAweDEw
MjAsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMihsY2QsIEpCVF9SRUdfU0xFRVBfSU5fTENDTlRf
RywgMHg2MGMwLCAmcmV0KTsKKworCWpidF9yZWdfd3JpdGVfMihsY2QsIEpCVF9SRUdfR0FNTUEx
X0ZJTkVfMSwgMHg1NTMzLCAmcmV0KTsKKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX0dB
TU1BMV9GSU5FXzIsIDB4MDAsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpCVF9SRUdf
R0FNTUExX0lOQ0xJTkFUSU9OLCAweDAwLCAmcmV0KTsKKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBK
QlRfUkVHX0dBTU1BMV9CTFVFX09GRlNFVCwgMHgwMCwgJnJldCk7CisKKwlqYnRfcmVnX3dyaXRl
XzIobGNkLCBKQlRfUkVHX0hDTE9DS19WR0EsIDB4MWYwLCAmcmV0KTsKKwlqYnRfcmVnX3dyaXRl
XzEobGNkLCBKQlRfUkVHX0JMQU5LX0NPTlRST0wsIDB4MDIsICZyZXQpOworCWpidF9yZWdfd3Jp
dGVfMihsY2QsIEpCVF9SRUdfQkxBTktfVEhfVFYsIDB4MDgwNCwgJnJldCk7CisKKwlqYnRfcmVn
X3dyaXRlXzEobGNkLCBKQlRfUkVHX0NLVl9PTl9PRkYsIDB4MDEsICZyZXQpOworCWpidF9yZWdf
d3JpdGVfMihsY2QsIEpCVF9SRUdfQ0tWXzFfMiwgMHgwMDAwLCAmcmV0KTsKKworCWpidF9yZWdf
d3JpdGVfMihsY2QsIEpCVF9SRUdfT0VWX1RJTUlORywgMHgwZDBlLCAmcmV0KTsKKwlqYnRfcmVn
X3dyaXRlXzIobGNkLCBKQlRfUkVHX0FTV19USU1JTkdfMSwgMHgxMWE0LCAmcmV0KTsKKwlqYnRf
cmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX0FTV19USU1JTkdfMiwgMHgwZSwgJnJldCk7CisKKwlq
YnRfcmV0X3dyaXRlXzAobGNkLCBKQlRfUkVHX0RJU1BMQVlfT04sICZyZXQpOworCisJaWYgKHJl
dCkKKwkJcmV0dXJuIHJldDsKKworCWJhY2tsaWdodF9lbmFibGUobGNkLT5iYWNrbGlnaHQpOwor
CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSB0
ZDAyOHR0ZWMxX21vZGUgPSB7CisJLmNsb2NrID0gMjIxNTMsCisJLmhkaXNwbGF5ID0gNDgwLAor
CS5oc3luY19zdGFydCA9IDQ4MCArIDI0LAorCS5oc3luY19lbmQgPSA0ODAgKyAyNCArIDgsCisJ
Lmh0b3RhbCA9IDQ4MCArIDI0ICsgOCArIDgsCisJLnZkaXNwbGF5ID0gNjQwLAorCS52c3luY19z
dGFydCA9IDY0MCArIDQsCisJLnZzeW5jX2VuZCA9IDY0MCArIDQgKyAyLAorCS52dG90YWwgPSA2
NDAgKyA0ICsgMiArIDIsCisJLnZyZWZyZXNoID0gNjYsCisJLnR5cGUgPSBEUk1fTU9ERV9UWVBF
X0RSSVZFUiB8IERSTV9NT0RFX1RZUEVfUFJFRkVSUkVELAorCS5mbGFncyA9IERSTV9NT0RFX0ZM
QUdfTkhTWU5DIHwgRFJNX01PREVfRkxBR19OVlNZTkMsCisJLndpZHRoX21tID0gNDMsCisJLmhl
aWdodF9tbSA9IDU4LAorfTsKKworc3RhdGljIGludCB0ZDAyOHR0ZWMxX2dldF9tb2RlcyhzdHJ1
Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9y
ID0gcGFuZWwtPmNvbm5lY3RvcjsKKwlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZTsKKwor
CW1vZGUgPSBkcm1fbW9kZV9kdXBsaWNhdGUocGFuZWwtPmRybSwgJnRkMDI4dHRlYzFfbW9kZSk7
CisJaWYgKCFtb2RlKQorCQlyZXR1cm4gLUVOT01FTTsKKworCWRybV9tb2RlX3NldF9uYW1lKG1v
ZGUpOworCWRybV9tb2RlX3Byb2JlZF9hZGQoY29ubmVjdG9yLCBtb2RlKTsKKworCWNvbm5lY3Rv
ci0+ZGlzcGxheV9pbmZvLndpZHRoX21tID0gdGQwMjh0dGVjMV9tb2RlLndpZHRoX21tOworCWNv
bm5lY3Rvci0+ZGlzcGxheV9pbmZvLmhlaWdodF9tbSA9IHRkMDI4dHRlYzFfbW9kZS5oZWlnaHRf
bW07CisJLyoKKwkgKiBGSVhNRTogQWNjb3JkaW5nIHRvIHRoZSBkYXRhc2hlZXQgc3luYyBzaWdu
YWxzIGFyZSBzYW1wbGVkIG9uIHRoZQorCSAqIHJpc2luZyBlZGdlIG9mIHRoZSBjbG9jaywgYnV0
IHRoZSBjb2RlIHJ1bm5pbmcgb24gdGhlIE9wZW5Nb2tvIE5lbworCSAqIEZyZWVSdW5uZXIgYW5k
IE5lbyAxOTczIGluZGljYXRlcyBzYW1wbGluZyBvbiB0aGUgZmFsbGluZyBlZGdlLiBUaGlzCisJ
ICogc2hvdWxkIGJlIHRlc3RlZCBvbiBhIHJlYWwgZGV2aWNlLgorCSAqLworCWNvbm5lY3Rvci0+
ZGlzcGxheV9pbmZvLmJ1c19mbGFncyA9IERSTV9CVVNfRkxBR19ERV9ISUdICisJCQkJCSAgfCBE
Uk1fQlVTX0ZMQUdfU1lOQ19TQU1QTEVfTkVHRURHRQorCQkJCQkgIHwgRFJNX0JVU19GTEFHX1BJ
WERBVEFfU0FNUExFX1BPU0VER0U7CisKKwlyZXR1cm4gMTsKK30KKworc3RhdGljIGNvbnN0IHN0
cnVjdCBkcm1fcGFuZWxfZnVuY3MgdGQwMjh0dGVjMV9mdW5jcyA9IHsKKwkuZGlzYWJsZSA9IHRk
MDI4dHRlYzFfZGlzYWJsZSwKKwkuZW5hYmxlID0gdGQwMjh0dGVjMV9lbmFibGUsCisJLmdldF9t
b2RlcyA9IHRkMDI4dHRlYzFfZ2V0X21vZGVzLAorfTsKKworc3RhdGljIGludCB0ZDAyOHR0ZWMx
X3Byb2JlKHN0cnVjdCBzcGlfZGV2aWNlICpzcGkpCit7CisJc3RydWN0IHRkMDI4dHRlYzFfcGFu
ZWwgKmxjZDsKKwlpbnQgcmV0OworCisJbGNkID0gZGV2bV9remFsbG9jKCZzcGktPmRldiwgc2l6
ZW9mKCpsY2QpLCBHRlBfS0VSTkVMKTsKKwlpZiAobGNkID09IE5VTEwpCisJCXJldHVybiAtRU5P
TUVNOworCisJc3BpX3NldF9kcnZkYXRhKHNwaSwgbGNkKTsKKwlsY2QtPnNwaSA9IHNwaTsKKwor
CWxjZC0+YmFja2xpZ2h0ID0gZGV2bV9vZl9maW5kX2JhY2tsaWdodCgmc3BpLT5kZXYpOworCWlm
IChJU19FUlIobGNkLT5iYWNrbGlnaHQpKQorCQlyZXR1cm4gUFRSX0VSUihsY2QtPmJhY2tsaWdo
dCk7CisKKwlzcGktPm1vZGUgPSBTUElfTU9ERV8zOworCXNwaS0+Yml0c19wZXJfd29yZCA9IDk7
CisKKwlyZXQgPSBzcGlfc2V0dXAoc3BpKTsKKwlpZiAocmV0IDwgMCkgeworCQlkZXZfZXJyKCZz
cGktPmRldiwgImZhaWxlZCB0byBzZXR1cCBTUEk6ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0
OworCX0KKworCWRybV9wYW5lbF9pbml0KCZsY2QtPnBhbmVsKTsKKwlsY2QtPnBhbmVsLmRldiA9
ICZsY2QtPnNwaS0+ZGV2OworCWxjZC0+cGFuZWwuZnVuY3MgPSAmdGQwMjh0dGVjMV9mdW5jczsK
KworCXJldHVybiBkcm1fcGFuZWxfYWRkKCZsY2QtPnBhbmVsKTsKK30KKworc3RhdGljIGludCB0
ZDAyOHR0ZWMxX3JlbW92ZShzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpKQoreworCXN0cnVjdCB0ZDAy
OHR0ZWMxX3BhbmVsICpsY2QgPSBzcGlfZ2V0X2RydmRhdGEoc3BpKTsKKworCWRybV9wYW5lbF9y
ZW1vdmUoJmxjZC0+cGFuZWwpOworCWRybV9wYW5lbF9kaXNhYmxlKCZsY2QtPnBhbmVsKTsKKwlk
cm1fcGFuZWxfdW5wcmVwYXJlKCZsY2QtPnBhbmVsKTsKKworCXJldHVybiAwOworfQorCitzdGF0
aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCB0ZDAyOHR0ZWMxX29mX21hdGNoW10gPSB7CisJ
eyAuY29tcGF0aWJsZSA9ICJ0cG8sdGQwMjh0dGVjMSIsIH0sCisJLyogRFQgYmFja3dhcmQgY29t
cGF0aWJpbGl0eS4gKi8KKwl7IC5jb21wYXRpYmxlID0gInRvcHBvbHksdGQwMjh0dGVjMSIsIH0s
CisJeyAvKiBzZW50aW5lbCAqLyB9LAorfTsKKworTU9EVUxFX0RFVklDRV9UQUJMRShvZiwgdGQw
Mjh0dGVjMV9vZl9tYXRjaCk7CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgc3BpX2RldmljZV9pZCB0
ZDAyOHR0ZWMxX2lkc1tdID0geworCXsgInRwbyx0ZDAyOHR0ZWMxIiwgMH0sCisJeyAidG9wcG9s
eSx0ZDAyOHR0ZWMxIiwgMCB9LAorCXsgLyogc2VudGluZWwgKi8gfQorfTsKKworTU9EVUxFX0RF
VklDRV9UQUJMRShzcGksIHRkMDI4dHRlYzFfaWRzKTsKKworc3RhdGljIHN0cnVjdCBzcGlfZHJp
dmVyIHRkMDI4dHRlYzFfZHJpdmVyID0geworCS5wcm9iZQkJPSB0ZDAyOHR0ZWMxX3Byb2JlLAor
CS5yZW1vdmUJCT0gdGQwMjh0dGVjMV9yZW1vdmUsCisJLmlkX3RhYmxlCT0gdGQwMjh0dGVjMV9p
ZHMsCisJLmRyaXZlcgkJPSB7CisJCS5uYW1lICAgPSAicGFuZWwtdHBvLXRkMDI4dHRlYzEiLAor
CQkub2ZfbWF0Y2hfdGFibGUgPSB0ZDAyOHR0ZWMxX29mX21hdGNoLAorCX0sCit9OworCittb2R1
bGVfc3BpX2RyaXZlcih0ZDAyOHR0ZWMxX2RyaXZlcik7CisKK01PRFVMRV9BVVRIT1IoIkguIE5p
a29sYXVzIFNjaGFsbGVyIDxobnNAZ29sZGVsaWNvLmNvbT4iKTsKK01PRFVMRV9ERVNDUklQVElP
TigiVG9wcG9seSBURDAyOFRURUMxIHBhbmVsIGRyaXZlciIpOworTU9EVUxFX0xJQ0VOU0UoIkdQ
TCIpOwotLSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hhcnQKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
