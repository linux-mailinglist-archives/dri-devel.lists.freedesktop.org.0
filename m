Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2EB0EDD908
	for <lists+dri-devel@lfdr.de>; Sat, 19 Oct 2019 16:12:41 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DBFD489D9A;
	Sat, 19 Oct 2019 14:12:38 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from honk.sigxcpu.org (honk.sigxcpu.org [24.134.29.49])
 by gabe.freedesktop.org (Postfix) with ESMTPS id ADF0E8995F
 for <dri-devel@lists.freedesktop.org>; Sat, 19 Oct 2019 14:12:34 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by honk.sigxcpu.org (Postfix) with ESMTP id 58807FB02;
 Sat, 19 Oct 2019 16:12:33 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at honk.sigxcpu.org
Received: from honk.sigxcpu.org ([127.0.0.1])
 by localhost (honk.sigxcpu.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id PEIZ6setv_h1; Sat, 19 Oct 2019 16:12:28 +0200 (CEST)
Received: by bogon.sigxcpu.org (Postfix, from userid 1000)
 id 099D049B0E; Sat, 19 Oct 2019 16:12:26 +0200 (CEST)
From: =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>
To: David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Shawn Guo <shawnguo@kernel.org>, Sascha Hauer <s.hauer@pengutronix.de>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 Fabio Estevam <festevam@gmail.com>, NXP Linux Team <linux-imx@nxp.com>,
 Andrzej Hajda <a.hajda@samsung.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Jonas Karlman <jonas@kwiboo.se>, Jernej Skrabec <jernej.skrabec@siol.net>,
 Lee Jones <lee.jones@linaro.org>,
 =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>,
 dri-devel@lists.freedesktop.org, devicetree@vger.kernel.org,
 linux-arm-kernel@lists.infradead.org, linux-kernel@vger.kernel.org,
 Robert Chiras <robert.chiras@nxp.com>, Sam Ravnborg <sam@ravnborg.org>,
 Arnd Bergmann <arnd@arndb.de>
Subject: [PATCH v7 2/2] drm/bridge: Add NWL MIPI DSI host controller support
Date: Sat, 19 Oct 2019 16:12:25 +0200
Message-Id: <e0304ab9320cbbf3e63d78449e50975c036b2633.1571494140.git.agx@sigxcpu.org>
X-Mailer: git-send-email 2.23.0.rc1
In-Reply-To: <cover.1571494140.git.agx@sigxcpu.org>
References: <cover.1571494140.git.agx@sigxcpu.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBhZGRzIGluaXRpYWwgc3VwcG9ydCBmb3IgdGhlIE5XTCBNSVBJIERTSSBIb3N0IGNvbnRy
b2xsZXIgZm91bmQgb24KaS5NWDggU29Dcy4KCkl0IGFkZHMgc3VwcG9ydCBmb3IgdGhlIGkuTVg4
TVEgYnV0IHRoZSBzYW1lIElQIGNhbiBiZSBmb3VuZCBvbgplLmcuIHRoZSBpLk1YOFFYUC4KCkl0
IGhhcyBiZWVuIHRlc3RlZCBvbiB0aGUgTGlicmVtIDUgZGV2a2l0IHVzaW5nIG14c2ZiLgoKU2ln
bmVkLW9mZi1ieTogR3VpZG8gR8O8bnRoZXIgPGFneEBzaWd4Y3B1Lm9yZz4KQ28tZGV2ZWxvcGVk
LWJ5OiBSb2JlcnQgQ2hpcmFzIDxyb2JlcnQuY2hpcmFzQG54cC5jb20+ClNpZ25lZC1vZmYtYnk6
IFJvYmVydCBDaGlyYXMgPHJvYmVydC5jaGlyYXNAbnhwLmNvbT4KVGVzdGVkLWJ5OiBSb2JlcnQg
Q2hpcmFzIDxyb2JlcnQuY2hpcmFzQG54cC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9LY29uZmlnICAgfCAgIDE2ICsKIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvTWFrZWZpbGUgIHwg
ICAgMyArCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuYyB8IDEyMzUgKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuaCB8
ICAxNDQgKysrKwogNCBmaWxlcyBjaGFuZ2VkLCAxMzk4IGluc2VydGlvbnMoKykKIGNyZWF0ZSBt
b2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuYwogY3JlYXRlIG1vZGUg
MTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS5oCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2JyaWRnZS9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9LY29u
ZmlnCmluZGV4IDM0MzYyOTc2Y2Q2Zi4uNmZiNTM0ZjU1ZDIyIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL0tjb25maWcKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9LY29u
ZmlnCkBAIC02NSw2ICs2NSwyMiBAQCBjb25maWcgRFJNX01FR0FDSElQU19TVERQWFhYWF9HRV9C
ODUwVjNfRlcKICAgICAgICAgICB0byBEUCsrLiBUaGlzIGlzIHVzZWQgd2l0aCB0aGUgaS5NWDYg
aW14LWxkYgogICAgICAgICAgIGRyaXZlci4gWW91IGFyZSBsaWtlbHkgdG8gc2F5IE4gaGVyZS4K
IAorY29uZmlnIERSTV9OV0xfTUlQSV9EU0kKKwl0cmlzdGF0ZSAiTm9ydGh3ZXN0IExvZ2ljIE1J
UEkgRFNJIEhvc3QgY29udHJvbGxlciIKKwlkZXBlbmRzIG9uIERSTQorCWRlcGVuZHMgb24gQ09N
TU9OX0NMSworCWRlcGVuZHMgb24gT0YgJiYgSEFTX0lPTUVNCisJc2VsZWN0IERSTV9LTVNfSEVM
UEVSCisJc2VsZWN0IERSTV9NSVBJX0RTSQorCXNlbGVjdCBEUk1fUEFORUxfQlJJREdFCisJc2Vs
ZWN0IEdFTkVSSUNfUEhZX01JUElfRFBIWQorCXNlbGVjdCBNRkRfU1lTQ09OCisJc2VsZWN0IE1V
TFRJUExFWEVSCisJc2VsZWN0IFJFR01BUF9NTUlPCisJaGVscAorCSAgVGhpcyBlbmFibGVzIHRo
ZSBOb3J0aHdlc3QgTG9naWMgTUlQSSBEU0kgSG9zdCBjb250cm9sbGVyIGFzCisJICBmb3IgZXhh
bXBsZSBmb3VuZCBvbiBOWFAncyBpLk1YOCBQcm9jZXNzb3JzLgorCiBjb25maWcgRFJNX05YUF9Q
VE4zNDYwCiAJdHJpc3RhdGUgIk5YUCBQVE4zNDYwIERQL0xWRFMgYnJpZGdlIgogCWRlcGVuZHMg
b24gT0YKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvTWFrZWZpbGUgYi9kcml2
ZXJzL2dwdS9kcm0vYnJpZGdlL01ha2VmaWxlCmluZGV4IDQ5MzRmY2Y1YTZmOC4uYzNmM2E0M2U5
YjhmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL01ha2VmaWxlCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9icmlkZ2UvTWFrZWZpbGUKQEAgLTE2LDQgKzE2LDcgQEAgb2JqLSQoQ09O
RklHX0RSTV9BTkFMT0dJWF9EUCkgKz0gYW5hbG9naXgvCiBvYmotJChDT05GSUdfRFJNX0kyQ19B
RFY3NTExKSArPSBhZHY3NTExLwogb2JqLSQoQ09ORklHX0RSTV9USV9TTjY1RFNJODYpICs9IHRp
LXNuNjVkc2k4Ni5vCiBvYmotJChDT05GSUdfRFJNX1RJX1RGUDQxMCkgKz0gdGktdGZwNDEwLm8K
K29iai0kKENPTkZJR19EUk1fTldMX01JUElfRFNJKSArPSBud2wtZHNpLm8KIG9iai15ICs9IHN5
bm9wc3lzLworCitoZWFkZXItdGVzdC15ICs9IG53bC1kc2kuaApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1k
c2kuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjU2MDk2YWVkOWM3
YgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS5jCkBA
IC0wLDAgKzEsMTIzNSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjArCisv
KgorICogaS5NWDggTldMIE1JUEkgRFNJIGhvc3QgZHJpdmVyCisgKgorICogQ29weXJpZ2h0IChD
KSAyMDE3IE5YUAorICogQ29weXJpZ2h0IChDKSAyMDE5IFB1cmlzbSBTUEMKKyAqLworCisjaW5j
bHVkZSA8bGludXgvYml0ZmllbGQuaD4KKyNpbmNsdWRlIDxsaW51eC9jbGsuaD4KKyNpbmNsdWRl
IDxsaW51eC9pcnEuaD4KKyNpbmNsdWRlIDxsaW51eC9tYXRoNjQuaD4KKyNpbmNsdWRlIDxsaW51
eC9tZmQvc3lzY29uLmg+CisjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+CisjaW5jbHVkZSA8bGlu
dXgvbXV4L2NvbnN1bWVyLmg+CisjaW5jbHVkZSA8bGludXgvb2YuaD4KKyNpbmNsdWRlIDxsaW51
eC9vZl9wbGF0Zm9ybS5oPgorI2luY2x1ZGUgPGxpbnV4L3BoeS9waHkuaD4KKyNpbmNsdWRlIDxs
aW51eC9yZWdtYXAuaD4KKyNpbmNsdWRlIDxsaW51eC9yZXNldC5oPgorI2luY2x1ZGUgPGxpbnV4
L3N5c19zb2MuaD4KKyNpbmNsdWRlIDxsaW51eC90aW1lNjQuaD4KKworI2luY2x1ZGUgPGRybS9k
cm1fYXRvbWljX2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fYnJpZGdlLmg+CisjaW5jbHVk
ZSA8ZHJtL2RybV9taXBpX2RzaS5oPgorI2luY2x1ZGUgPGRybS9kcm1fb2YuaD4KKyNpbmNsdWRl
IDxkcm0vZHJtX3BhbmVsLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9wcmludC5oPgorI2luY2x1ZGUg
PGRybS9kcm1fcHJvYmVfaGVscGVyLmg+CisKKyNpbmNsdWRlIDx2aWRlby9taXBpX2Rpc3BsYXku
aD4KKyNpbmNsdWRlIDx2aWRlby92aWRlb21vZGUuaD4KKworI2luY2x1ZGUgIm53bC1kc2kuaCIK
KworI2RlZmluZSBEUlZfTkFNRSAibndsLWRzaSIKKworLyogaS5NWDggTldMIHF1aXJrcyAqLwor
LyogaS5NWDhNUSBlcnJhdGEgRTExNDE4ICovCisjZGVmaW5lIEUxMTQxOF9IU19NT0RFX1FVSVJL
CUJJVCgwKQorLyogU2tpcCBEU0kgYml0cyBpbiBTUkMgb24gZGlzYWJsZSB0byBhdm9pZCBibGFu
ayBkaXNwbGF5IG9uIGVuYWJsZSAqLworI2RlZmluZSBTUkNfUkVTRVRfUVVJUksJCUJJVCgxKQor
CisjZGVmaW5lIE5XTF9EU0lfTUlQSV9GSUZPX1RJTUVPVVQgbXNlY3NfdG9famlmZmllcyg1MDAp
CisKK2VudW0gdHJhbnNmZXJfZGlyZWN0aW9uIHsKKwlEU0lfUEFDS0VUX1NFTkQsCisJRFNJX1BB
Q0tFVF9SRUNFSVZFLAorfTsKKworLyogUG9zc2libGUgcGxhdGZvcm0gc3BlY2lmaWMgY2xvY2tz
ICovCisjZGVmaW5lIE5XTF9EU0lfQ0xLX0NPUkUJICAgICJjb3JlIgorI2RlZmluZSBOV0xfRFNJ
X01BWF9QTEFURk9STV9DTE9DS1MgMQorCisjZGVmaW5lIE5XTF9EU0lfRU5EUE9JTlRfTENESUYg
MAorI2RlZmluZSBOV0xfRFNJX0VORFBPSU5UX0RDU1MgMQorCitzdHJ1Y3QgbndsX2RzaV9wbGF0
X2Nsa19jb25maWcgeworCWNvbnN0IGNoYXIgKmlkOworCXN0cnVjdCBjbGsgKmNsazsKKwlib29s
IHByZXNlbnQ7Cit9OworCitzdHJ1Y3QgbndsX2RzaV90cmFuc2ZlciB7CisJY29uc3Qgc3RydWN0
IG1pcGlfZHNpX21zZyAqbXNnOworCXN0cnVjdCBtaXBpX2RzaV9wYWNrZXQgcGFja2V0OworCXN0
cnVjdCBjb21wbGV0aW9uIGNvbXBsZXRlZDsKKworCWludCBzdGF0dXM7IC8qIHN0YXR1cyBvZiB0
cmFuc21pc3Npb24gKi8KKwllbnVtIHRyYW5zZmVyX2RpcmVjdGlvbiBkaXJlY3Rpb247CisJYm9v
bCBuZWVkX2J0YTsKKwl1OCBjbWQ7CisJdTE2IHJ4X3dvcmRfY291bnQ7CisJc2l6ZV90IHR4X2xl
bjsgLyogaW4gYnl0ZXMgKi8KKwlzaXplX3QgcnhfbGVuOyAvKiBpbiBieXRlcyAqLworfTsKKwor
c3RydWN0IG53bF9kc2kgeworCXN0cnVjdCBkcm1fYnJpZGdlIGJyaWRnZTsKKwlzdHJ1Y3QgbWlw
aV9kc2lfaG9zdCBkc2lfaG9zdDsKKwlzdHJ1Y3QgZHJtX2JyaWRnZSAqcGFuZWxfYnJpZGdlOwor
CXN0cnVjdCBkZXZpY2UgKmRldjsKKwlzdHJ1Y3QgcGh5ICpwaHk7CisJdW5pb24gcGh5X2NvbmZp
Z3VyZV9vcHRzIHBoeV9jZmc7CisJdW5zaWduZWQgaW50IHF1aXJrczsKKworCXN0cnVjdCByZWdt
YXAgKnJlZ21hcDsKKwlpbnQgaXJxOworCXN0cnVjdCByZXNldF9jb250cm9sICpyc3RjOworCXN0
cnVjdCBtdXhfY29udHJvbCAqbXV4OworCisJLyogRFNJIGNsb2NrcyAqLworCXN0cnVjdCBjbGsg
KnBoeV9yZWZfY2xrOworCXN0cnVjdCBjbGsgKnJ4X2VzY19jbGs7CisJc3RydWN0IGNsayAqdHhf
ZXNjX2NsazsKKwkvKiBQbGF0Zm9ybSBkZXBlbmRlbnQgY2xvY2tzICovCisJc3RydWN0IG53bF9k
c2lfcGxhdF9jbGtfY29uZmlnIGNsa19jb25maWdbTldMX0RTSV9NQVhfUExBVEZPUk1fQ0xPQ0tT
XTsKKworCS8qIGRzaSBsYW5lcyAqLworCXUzMiBsYW5lczsKKwllbnVtIG1pcGlfZHNpX3BpeGVs
X2Zvcm1hdCBmb3JtYXQ7CisJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgbW9kZTsKKwl1bnNpZ25l
ZCBsb25nIGRzaV9tb2RlX2ZsYWdzOworCWludCBlcnJvcjsKKworCXN0cnVjdCBud2xfZHNpX3Ry
YW5zZmVyICp4ZmVyOworCisJY29uc3Qgc3RydWN0IG53bF9kc2lfcGxhdGZvcm1fZGF0YSAqcGRh
dGE7Cit9OworCisvKiBQbGF0Zm9ybSBzcGVjaWZpYyBob29rcyB0byBlbmFibGUgb3RoZXIgU29D
cyBsaWtlIHRoZSBpLk1YOFFNICovCitzdHJ1Y3QgbndsX2RzaV9wbGF0Zm9ybV9kYXRhIHsKKwlp
bnQgKCpwb3dlcm9uKShzdHJ1Y3QgbndsX2RzaSAqZHNpKTsKKwlpbnQgKCpwb3dlcm9mZikoc3Ry
dWN0IG53bF9kc2kgKmRzaSk7CisJaW50ICgqc2VsZWN0X2lucHV0KShzdHJ1Y3QgbndsX2RzaSAq
ZHNpKTsKKwlpbnQgKCpkZXNlbGVjdF9pbnB1dCkoc3RydWN0IG53bF9kc2kgKmRzaSk7CisJc3Ry
dWN0IG53bF9kc2lfcGxhdF9jbGtfY29uZmlnIGNsa19jb25maWdbTldMX0RTSV9NQVhfUExBVEZP
Uk1fQ0xPQ0tTXTsKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgcmVnbWFwX2NvbmZpZyBud2xf
ZHNpX3JlZ21hcF9jb25maWcgPSB7CisJLnJlZ19iaXRzID0gMTYsCisJLnZhbF9iaXRzID0gMzIs
CisJLnJlZ19zdHJpZGUgPSA0LAorCS5tYXhfcmVnaXN0ZXIgPSBOV0xfRFNJX0lSUV9NQVNLMiwK
KwkubmFtZSA9IERSVl9OQU1FLAorfTsKKworc3RhdGljIGlubGluZSBzdHJ1Y3QgbndsX2RzaSAq
YnJpZGdlX3RvX2RzaShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQoreworCXJldHVybiBjb250
YWluZXJfb2YoYnJpZGdlLCBzdHJ1Y3QgbndsX2RzaSwgYnJpZGdlKTsKK30KKworc3RhdGljIGlu
dCBud2xfZHNpX2NsZWFyX2Vycm9yKHN0cnVjdCBud2xfZHNpICpkc2kpCit7CisJaW50IHJldCA9
IGRzaS0+ZXJyb3I7CisKKwlkc2ktPmVycm9yID0gMDsKKwlyZXR1cm4gcmV0OworfQorCitzdGF0
aWMgdm9pZCBud2xfZHNpX3dyaXRlKHN0cnVjdCBud2xfZHNpICpkc2ksIHVuc2lnbmVkIGludCBy
ZWcsIHUzMiB2YWwpCit7CisJaW50IHJldDsKKworCWlmIChkc2ktPmVycm9yKQorCQlyZXR1cm47
CisKKwlyZXQgPSByZWdtYXBfd3JpdGUoZHNpLT5yZWdtYXAsIHJlZywgdmFsKTsKKwlpZiAocmV0
IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LAorCQkJICAgICAgIkZhaWxlZCB0byB3
cml0ZSBOV0wgRFNJIHJlZyAweCV4OiAlZFxuIiwgcmVnLAorCQkJICAgICAgcmV0KTsKKwkJZHNp
LT5lcnJvciA9IHJldDsKKwl9Cit9CisKK3N0YXRpYyB1MzIgbndsX2RzaV9yZWFkKHN0cnVjdCBu
d2xfZHNpICpkc2ksIHUzMiByZWcpCit7CisJdW5zaWduZWQgaW50IHZhbDsKKwlpbnQgcmV0Owor
CisJaWYgKGRzaS0+ZXJyb3IpCisJCXJldHVybiAwOworCisJcmV0ID0gcmVnbWFwX3JlYWQoZHNp
LT5yZWdtYXAsIHJlZywgJnZhbCk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RFVl9FUlJPUihk
c2ktPmRldiwgIkZhaWxlZCB0byByZWFkIE5XTCBEU0kgcmVnIDB4JXg6ICVkXG4iLAorCQkJICAg
ICAgcmVnLCByZXQpOworCQlkc2ktPmVycm9yID0gcmV0OworCX0KKwlyZXR1cm4gdmFsOworfQor
CitzdGF0aWMgaW50IG53bF9kc2lfZ2V0X2RwaV9waXhlbF9mb3JtYXQoZW51bSBtaXBpX2RzaV9w
aXhlbF9mb3JtYXQgZm9ybWF0KQoreworCXN3aXRjaCAoZm9ybWF0KSB7CisJY2FzZSBNSVBJX0RT
SV9GTVRfUkdCNTY1OgorCQlyZXR1cm4gTldMX0RTSV9QSVhFTF9GT1JNQVRfMTY7CisJY2FzZSBN
SVBJX0RTSV9GTVRfUkdCNjY2OgorCQlyZXR1cm4gTldMX0RTSV9QSVhFTF9GT1JNQVRfMThMOwor
CWNhc2UgTUlQSV9EU0lfRk1UX1JHQjY2Nl9QQUNLRUQ6CisJCXJldHVybiBOV0xfRFNJX1BJWEVM
X0ZPUk1BVF8xODsKKwljYXNlIE1JUElfRFNJX0ZNVF9SR0I4ODg6CisJCXJldHVybiBOV0xfRFNJ
X1BJWEVMX0ZPUk1BVF8yNDsKKwlkZWZhdWx0OgorCQlyZXR1cm4gLUVJTlZBTDsKKwl9Cit9CisK
Ky8qCisgKiBwczJiYyAtIFBpY29zZWNvbmRzIHRvIGJ5dGUgY2xvY2sgY3ljbGVzCisgKi8KK3N0
YXRpYyB1MzIgcHMyYmMoc3RydWN0IG53bF9kc2kgKmRzaSwgdW5zaWduZWQgbG9uZyBsb25nIHBz
KQoreworCXUzMiBicHAgPSBtaXBpX2RzaV9waXhlbF9mb3JtYXRfdG9fYnBwKGRzaS0+Zm9ybWF0
KTsKKworCXJldHVybiBESVY2NF9VNjRfUk9VTkRfVVAocHMgKiBkc2ktPm1vZGUuY2xvY2sgKiBi
cHAsCisJCQkJICBkc2ktPmxhbmVzICogOCAqIE5TRUNfUEVSX1NFQyk7Cit9CisKKy8qCisgKiB1
aTJiYyAtIFVJIHRpbWUgcGVyaW9kcyB0byBieXRlIGNsb2NrIGN5Y2xlcworICovCitzdGF0aWMg
dTMyIHVpMmJjKHN0cnVjdCBud2xfZHNpICpkc2ksIHVuc2lnbmVkIGxvbmcgbG9uZyB1aSkKK3sK
Kwl1MzIgYnBwID0gbWlwaV9kc2lfcGl4ZWxfZm9ybWF0X3RvX2JwcChkc2ktPmZvcm1hdCk7CisK
KwlyZXR1cm4gRElWNjRfVTY0X1JPVU5EX1VQKHVpICogZHNpLT5sYW5lcywKKwkJCQkgIGRzaS0+
bW9kZS5jbG9jayAqIDEwMDAgKiBicHApOworfQorCisvKgorICogdXMyYmMgLSBtaWNybyBzZWNv
bmRzIHRvIGxwIGNsb2NrIGN5Y2xlcworICovCitzdGF0aWMgdTMyIHVzMmxwKHUzMiBscF9jbGtf
cmF0ZSwgdW5zaWduZWQgbG9uZyB1cykKK3sKKwlyZXR1cm4gRElWX1JPVU5EX1VQKHVzICogbHBf
Y2xrX3JhdGUsIFVTRUNfUEVSX1NFQyk7Cit9CisKK3N0YXRpYyBpbnQgbndsX2RzaV9jb25maWdf
aG9zdChzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXUzMiBjeWNsZXM7CisJc3RydWN0IHBoeV9j
b25maWd1cmVfb3B0c19taXBpX2RwaHkgKmNmZyA9ICZkc2ktPnBoeV9jZmcubWlwaV9kcGh5Owor
CisJaWYgKGRzaS0+bGFuZXMgPCAxIHx8IGRzaS0+bGFuZXMgPiA0KQorCQlyZXR1cm4gLUVJTlZB
TDsKKworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiRFNJIExhbmVzICVkXG4iLCBk
c2ktPmxhbmVzKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfTlVNX0xBTkVTLCBk
c2ktPmxhbmVzIC0gMSk7CisKKwlpZiAoZHNpLT5kc2lfbW9kZV9mbGFncyAmIE1JUElfRFNJX0NM
T0NLX05PTl9DT05USU5VT1VTKSB7CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NGR19O
T05DT05USU5VT1VTX0NMSywgMHgwMSk7CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NG
R19BVVRPSU5TRVJUX0VPVFAsIDB4MDEpOworCX0gZWxzZSB7CisJCW53bF9kc2lfd3JpdGUoZHNp
LCBOV0xfRFNJX0NGR19OT05DT05USU5VT1VTX0NMSywgMHgwMCk7CisJCW53bF9kc2lfd3JpdGUo
ZHNpLCBOV0xfRFNJX0NGR19BVVRPSU5TRVJUX0VPVFAsIDB4MDApOworCX0KKworCS8qIHZhbHVl
cyBpbiBieXRlIGNsb2NrIGN5Y2xlcyAqLworCWN5Y2xlcyA9IHVpMmJjKGRzaSwgY2ZnLT5jbGtf
cHJlKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImNmZ190X3ByZTogMHgleFxu
IiwgY3ljbGVzKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfVF9QUkUsIGN5Y2xl
cyk7CisJY3ljbGVzID0gcHMyYmMoZHNpLCBjZmctPmxweCArIGNmZy0+Y2xrX3ByZXBhcmUgKyBj
ZmctPmNsa196ZXJvKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImNmZ190eF9n
YXAgKHByZSk6IDB4JXhcbiIsIGN5Y2xlcyk7CisJY3ljbGVzICs9IHVpMmJjKGRzaSwgY2ZnLT5j
bGtfcHJlKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImNmZ190X3Bvc3Q6IDB4
JXhcbiIsIGN5Y2xlcyk7CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfQ0ZHX1RfUE9TVCwg
Y3ljbGVzKTsKKwljeWNsZXMgPSBwczJiYyhkc2ksIGNmZy0+aHNfZXhpdCk7CisJRFJNX0RFVl9E
RUJVR19EUklWRVIoZHNpLT5kZXYsICJjZmdfdHhfZ2FwOiAweCV4XG4iLCBjeWNsZXMpOworCW53
bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NGR19UWF9HQVAsIGN5Y2xlcyk7CisKKwlud2xfZHNp
X3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfRVhUUkFfQ01EU19BRlRFUl9FT1RQLCAweDAxKTsKKwlu
d2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfSFRYX1RPX0NPVU5ULCAweDAwKTsKKwlud2xf
ZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfTFJYX0hfVE9fQ09VTlQsIDB4MDApOworCW53bF9k
c2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NGR19CVEFfSF9UT19DT1VOVCwgMHgwMCk7CisJLyogSW4g
TFAgY2xvY2sgY3ljbGVzICovCisJY3ljbGVzID0gdXMybHAoY2ZnLT5scF9jbGtfcmF0ZSwgY2Zn
LT53YWtldXApOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiY2ZnX3R3YWtldXA6
IDB4JXhcbiIsIGN5Y2xlcyk7CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfQ0ZHX1RXQUtF
VVAsIGN5Y2xlcyk7CisKKwlyZXR1cm4gbndsX2RzaV9jbGVhcl9lcnJvcihkc2kpOworfQorCitz
dGF0aWMgaW50IG53bF9kc2lfY29uZmlnX2RwaShzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXUz
MiBtb2RlOworCWludCBjb2xvcl9mb3JtYXQ7CisJYm9vbCBidXJzdF9tb2RlOworCWludCBoZnJv
bnRfcG9yY2gsIGhiYWNrX3BvcmNoLCB2ZnJvbnRfcG9yY2gsIHZiYWNrX3BvcmNoOworCWludCBo
c3luY19sZW4sIHZzeW5jX2xlbjsKKworCWhmcm9udF9wb3JjaCA9IGRzaS0+bW9kZS5oc3luY19z
dGFydCAtIGRzaS0+bW9kZS5oZGlzcGxheTsKKwloc3luY19sZW4gPSBkc2ktPm1vZGUuaHN5bmNf
ZW5kIC0gZHNpLT5tb2RlLmhzeW5jX3N0YXJ0OworCWhiYWNrX3BvcmNoID0gZHNpLT5tb2RlLmh0
b3RhbCAtIGRzaS0+bW9kZS5oc3luY19lbmQ7CisKKwl2ZnJvbnRfcG9yY2ggPSBkc2ktPm1vZGUu
dnN5bmNfc3RhcnQgLSBkc2ktPm1vZGUudmRpc3BsYXk7CisJdnN5bmNfbGVuID0gZHNpLT5tb2Rl
LnZzeW5jX2VuZCAtIGRzaS0+bW9kZS52c3luY19zdGFydDsKKwl2YmFja19wb3JjaCA9IGRzaS0+
bW9kZS52dG90YWwgLSBkc2ktPm1vZGUudnN5bmNfZW5kOworCisJRFJNX0RFVl9ERUJVR19EUklW
RVIoZHNpLT5kZXYsICJoZnJvbnRfcG9yY2ggPSAlZFxuIiwgaGZyb250X3BvcmNoKTsKKwlEUk1f
REVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImhiYWNrX3BvcmNoID0gJWRcbiIsIGhiYWNrX3Bv
cmNoKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImhzeW5jX2xlbiA9ICVkXG4i
LCBoc3luY19sZW4pOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiaGRpc3BsYXkg
PSAlZFxuIiwgZHNpLT5tb2RlLmhkaXNwbGF5KTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2kt
PmRldiwgInZmcm9udF9wb3JjaCA9ICVkXG4iLCB2ZnJvbnRfcG9yY2gpOworCURSTV9ERVZfREVC
VUdfRFJJVkVSKGRzaS0+ZGV2LCAidmJhY2tfcG9yY2ggPSAlZFxuIiwgdmJhY2tfcG9yY2gpOwor
CURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAidnN5bmNfbGVuID0gJWRcbiIsIHZzeW5j
X2xlbik7CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJ2YWN0aXZlID0gJWRcbiIs
IGRzaS0+bW9kZS52ZGlzcGxheSk7CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJj
bG9jayA9ICVkIGtIelxuIiwgZHNpLT5tb2RlLmNsb2NrKTsKKworCWNvbG9yX2Zvcm1hdCA9IG53
bF9kc2lfZ2V0X2RwaV9waXhlbF9mb3JtYXQoZHNpLT5mb3JtYXQpOworCWlmIChjb2xvcl9mb3Jt
YXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJJbnZhbGlkIGNvbG9yIGZvcm1h
dCAweCV4XG4iLAorCQkJICAgICAgZHNpLT5mb3JtYXQpOworCQlyZXR1cm4gY29sb3JfZm9ybWF0
OworCX0KKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgInBpeGVsIGZtdCA9ICVkXG4i
LCBkc2ktPmZvcm1hdCk7CisKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9JTlRFUkZBQ0Vf
Q09MT1JfQ09ESU5HLCBOV0xfRFNJX0RQSV8yNF9CSVQpOworCW53bF9kc2lfd3JpdGUoZHNpLCBO
V0xfRFNJX1BJWEVMX0ZPUk1BVCwgY29sb3JfZm9ybWF0KTsKKwkvKgorCSAqIEFkanVzdGluZyBp
bnB1dCBwb2xhcml0eSBiYXNlZCBvbiB0aGUgdmlkZW8gbW9kZSByZXN1bHRzIGluCisJICogYSBi
bGFjayBzY3JlZW4gc28gYWx3YXlzIHBpY2sgYWN0aXZlIGxvdzoKKwkgKi8KKwlud2xfZHNpX3dy
aXRlKGRzaSwgTldMX0RTSV9WU1lOQ19QT0xBUklUWSwKKwkJICAgICAgTldMX0RTSV9WU1lOQ19Q
T0xBUklUWV9BQ1RJVkVfTE9XKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9IU1lOQ19Q
T0xBUklUWSwKKwkJICAgICAgTldMX0RTSV9IU1lOQ19QT0xBUklUWV9BQ1RJVkVfTE9XKTsKKwor
CWJ1cnN0X21vZGUgPSAoZHNpLT5kc2lfbW9kZV9mbGFncyAmIE1JUElfRFNJX01PREVfVklERU9f
QlVSU1QpICYmCisJCSAgICAgIShkc2ktPmRzaV9tb2RlX2ZsYWdzICYgTUlQSV9EU0lfTU9ERV9W
SURFT19TWU5DX1BVTFNFKTsKKworCWlmIChidXJzdF9tb2RlKSB7CisJCW53bF9kc2lfd3JpdGUo
ZHNpLCBOV0xfRFNJX1ZJREVPX01PREUsIE5XTF9EU0lfVk1fQlVSU1RfTU9ERSk7CisJCW53bF9k
c2lfd3JpdGUoZHNpLCBOV0xfRFNJX1BJWEVMX0ZJRk9fU0VORF9MRVZFTCwgMjU2KTsKKwl9IGVs
c2UgeworCQltb2RlID0gKChkc2ktPmRzaV9tb2RlX2ZsYWdzICYgTUlQSV9EU0lfTU9ERV9WSURF
T19TWU5DX1BVTFNFKSA/CisJCQkJTldMX0RTSV9WTV9CVVJTVF9NT0RFX1dJVEhfU1lOQ19QVUxT
RVMgOgorCQkJCU5XTF9EU0lfVk1fTk9OX0JVUlNUX01PREVfV0lUSF9TWU5DX0VWRU5UUyk7CisJ
CW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1ZJREVPX01PREUsIG1vZGUpOworCQlud2xfZHNp
X3dyaXRlKGRzaSwgTldMX0RTSV9QSVhFTF9GSUZPX1NFTkRfTEVWRUwsCisJCQkgICAgICBkc2kt
Pm1vZGUuaGRpc3BsYXkpOworCX0KKworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0hGUCwg
aGZyb250X3BvcmNoKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9IQlAsIGhiYWNrX3Bv
cmNoKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9IU0EsIGhzeW5jX2xlbik7CisKKwlu
d2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9FTkFCTEVfTVVMVF9QS1RTLCAweDApOworCW53bF9k
c2lfd3JpdGUoZHNpLCBOV0xfRFNJX0JMTFBfTU9ERSwgMHgxKTsKKwlud2xfZHNpX3dyaXRlKGRz
aSwgTldMX0RTSV9VU0VfTlVMTF9QS1RfQkxMUCwgMHgwKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwg
TldMX0RTSV9WQywgMHgwKTsKKworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1BJWEVMX1BB
WUxPQURfU0laRSwgZHNpLT5tb2RlLmhkaXNwbGF5KTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldM
X0RTSV9WQUNUSVZFLCBkc2ktPm1vZGUudmRpc3BsYXkgLSAxKTsKKwlud2xfZHNpX3dyaXRlKGRz
aSwgTldMX0RTSV9WQlAsIHZiYWNrX3BvcmNoKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RT
SV9WRlAsIHZmcm9udF9wb3JjaCk7CisKKwlyZXR1cm4gbndsX2RzaV9jbGVhcl9lcnJvcihkc2kp
OworfQorCitzdGF0aWMgaW50IG53bF9kc2lfaW5pdF9pbnRlcnJ1cHRzKHN0cnVjdCBud2xfZHNp
ICpkc2kpCit7CisJdTMyIGlycV9lbmFibGU7CisKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RT
SV9JUlFfTUFTSywgMHhmZmZmZmZmZik7CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfSVJR
X01BU0syLCAweDcpOworCisJaXJxX2VuYWJsZSA9IH4odTMyKShOV0xfRFNJX1RYX1BLVF9ET05F
X01BU0sgfAorCQkJICAgIE5XTF9EU0lfUlhfUEtUX0hEUl9SQ1ZEX01BU0sgfAorCQkJICAgIE5X
TF9EU0lfVFhfRklGT19PVkZMV19NQVNLIHwKKwkJCSAgICBOV0xfRFNJX0hTX1RYX1RJTUVPVVRf
TUFTSyk7CisKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9JUlFfTUFTSywgaXJxX2VuYWJs
ZSk7CisKKwlyZXR1cm4gbndsX2RzaV9jbGVhcl9lcnJvcihkc2kpOworfQorCitzdGF0aWMgaW50
IG53bF9kc2lfaG9zdF9hdHRhY2goc3RydWN0IG1pcGlfZHNpX2hvc3QgKmRzaV9ob3N0LAorCQkJ
ICAgICAgIHN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRldmljZSkKK3sKKwlzdHJ1Y3QgbndsX2Rz
aSAqZHNpID0gY29udGFpbmVyX29mKGRzaV9ob3N0LCBzdHJ1Y3QgbndsX2RzaSwgZHNpX2hvc3Qp
OworCXN0cnVjdCBkZXZpY2UgKmRldiA9IGRzaS0+ZGV2OworCXN0cnVjdCBkcm1fYnJpZGdlICpi
cmlkZ2U7CisJc3RydWN0IGRybV9wYW5lbCAqcGFuZWw7CisJaW50IHJldDsKKworCURSTV9ERVZf
SU5GTyhkZXYsICJsYW5lcz0ldSwgZm9ybWF0PTB4JXggZmxhZ3M9MHglbHhcbiIsIGRldmljZS0+
bGFuZXMsCisJCSAgICAgZGV2aWNlLT5mb3JtYXQsIGRldmljZS0+bW9kZV9mbGFncyk7CisKKwlp
ZiAoZGV2aWNlLT5sYW5lcyA8IDEgfHwgZGV2aWNlLT5sYW5lcyA+IDQpCisJCXJldHVybiAtRUlO
VkFMOworCisJZHNpLT5sYW5lcyA9IGRldmljZS0+bGFuZXM7CisJZHNpLT5mb3JtYXQgPSBkZXZp
Y2UtPmZvcm1hdDsKKwlkc2ktPmRzaV9tb2RlX2ZsYWdzID0gZGV2aWNlLT5tb2RlX2ZsYWdzOwor
CisJcmV0ID0gZHJtX29mX2ZpbmRfcGFuZWxfb3JfYnJpZGdlKGRzaS0+ZGV2LT5vZl9ub2RlLCAx
LCAwLCAmcGFuZWwsCisJCQkJCSAgJmJyaWRnZSk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsK
KworCWlmIChwYW5lbCkgeworCQlicmlkZ2UgPSBkcm1fcGFuZWxfYnJpZGdlX2FkZChwYW5lbCk7
CisJCWlmIChJU19FUlIoYnJpZGdlKSkKKwkJCXJldHVybiBQVFJfRVJSKGJyaWRnZSk7CisJfQor
CisJZHNpLT5wYW5lbF9icmlkZ2UgPSBicmlkZ2U7CisJZHJtX2JyaWRnZV9hZGQoJmRzaS0+YnJp
ZGdlKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IG53bF9kc2lfaG9zdF9kZXRhY2go
c3RydWN0IG1pcGlfZHNpX2hvc3QgKmRzaV9ob3N0LAorCQkJICAgICAgIHN0cnVjdCBtaXBpX2Rz
aV9kZXZpY2UgKmRldmljZSkKK3sKKwlzdHJ1Y3QgbndsX2RzaSAqZHNpID0gY29udGFpbmVyX29m
KGRzaV9ob3N0LCBzdHJ1Y3QgbndsX2RzaSwgZHNpX2hvc3QpOworCisJZHJtX29mX3BhbmVsX2Jy
aWRnZV9yZW1vdmUoZHNpLT5kZXYtPm9mX25vZGUsIDEsIDApOworCWRybV9icmlkZ2VfcmVtb3Zl
KCZkc2ktPmJyaWRnZSk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGJvb2wgbndsX2RzaV9y
ZWFkX3BhY2tldChzdHJ1Y3QgbndsX2RzaSAqZHNpLCB1MzIgc3RhdHVzKQoreworCXN0cnVjdCBk
ZXZpY2UgKmRldiA9IGRzaS0+ZGV2OworCXN0cnVjdCBud2xfZHNpX3RyYW5zZmVyICp4ZmVyID0g
ZHNpLT54ZmVyOworCWludCBlcnI7CisJdTggKnBheWxvYWQgPSB4ZmVyLT5tc2ctPnJ4X2J1ZjsK
Kwl1MzIgdmFsOworCXUxNiB3b3JkX2NvdW50OworCXU4IGNoYW5uZWw7CisJdTggZGF0YV90eXBl
OworCisJeGZlci0+c3RhdHVzID0gMDsKKworCWlmICh4ZmVyLT5yeF93b3JkX2NvdW50ID09IDAp
IHsKKwkJaWYgKCEoc3RhdHVzICYgTldMX0RTSV9SWF9QS1RfSERSX1JDVkQpKQorCQkJcmV0dXJu
IGZhbHNlOworCQkvKiBHZXQgdGhlIFJYIGhlYWRlciBhbmQgcGFyc2UgaXQgKi8KKwkJdmFsID0g
bndsX2RzaV9yZWFkKGRzaSwgTldMX0RTSV9SWF9QS1RfSEVBREVSKTsKKwkJZXJyID0gbndsX2Rz
aV9jbGVhcl9lcnJvcihkc2kpOworCQlpZiAoZXJyKQorCQkJeGZlci0+c3RhdHVzID0gZXJyOwor
CQl3b3JkX2NvdW50ID0gTldMX0RTSV9XQyh2YWwpOworCQljaGFubmVsID0gTldMX0RTSV9SWF9W
Qyh2YWwpOworCQlkYXRhX3R5cGUgPSBOV0xfRFNJX1JYX0RUKHZhbCk7CisKKwkJaWYgKGNoYW5u
ZWwgIT0geGZlci0+bXNnLT5jaGFubmVsKSB7CisJCQlEUk1fREVWX0VSUk9SKGRldiwKKwkJCQkg
ICAgICAiWyUwMlhdIENoYW5uZWwgbWlzbWF0Y2ggKCV1ICE9ICV1KVxuIiwKKwkJCQkgICAgICB4
ZmVyLT5jbWQsIGNoYW5uZWwsIHhmZXItPm1zZy0+Y2hhbm5lbCk7CisJCQl4ZmVyLT5zdGF0dXMg
PSAtRUlOVkFMOworCQkJcmV0dXJuIHRydWU7CisJCX0KKworCQlzd2l0Y2ggKGRhdGFfdHlwZSkg
eworCQljYXNlIE1JUElfRFNJX1JYX0dFTkVSSUNfU0hPUlRfUkVBRF9SRVNQT05TRV8yQllURToK
KwkJCS8qIEZhbGwgdGhyb3VnaCAqLworCQljYXNlIE1JUElfRFNJX1JYX0RDU19TSE9SVF9SRUFE
X1JFU1BPTlNFXzJCWVRFOgorCQkJaWYgKHhmZXItPm1zZy0+cnhfbGVuID4gMSkgeworCQkJCS8q
IHJlYWQgc2Vjb25kIGJ5dGUgKi8KKwkJCQlwYXlsb2FkWzFdID0gd29yZF9jb3VudCA+PiA4Owor
CQkJCSsreGZlci0+cnhfbGVuOworCQkJfQorCQkJLyogRmFsbCB0aHJvdWdoICovCisJCWNhc2Ug
TUlQSV9EU0lfUlhfR0VORVJJQ19TSE9SVF9SRUFEX1JFU1BPTlNFXzFCWVRFOgorCQkJLyogRmFs
bCB0aHJvdWdoICovCisJCWNhc2UgTUlQSV9EU0lfUlhfRENTX1NIT1JUX1JFQURfUkVTUE9OU0Vf
MUJZVEU6CisJCQlpZiAoeGZlci0+bXNnLT5yeF9sZW4gPiAwKSB7CisJCQkJLyogcmVhZCBmaXJz
dCBieXRlICovCisJCQkJcGF5bG9hZFswXSA9IHdvcmRfY291bnQgJiAweGZmOworCQkJCSsreGZl
ci0+cnhfbGVuOworCQkJfQorCQkJeGZlci0+c3RhdHVzID0geGZlci0+cnhfbGVuOworCQkJcmV0
dXJuIHRydWU7CisJCWNhc2UgTUlQSV9EU0lfUlhfQUNLTk9XTEVER0VfQU5EX0VSUk9SX1JFUE9S
VDoKKwkJCXdvcmRfY291bnQgJj0gMHhmZjsKKwkJCURSTV9ERVZfRVJST1IoZGV2LCAiWyUwMlhd
IERTSSBlcnJvciByZXBvcnQ6IDB4JTAyeFxuIiwKKwkJCQkgICAgICB4ZmVyLT5jbWQsIHdvcmRf
Y291bnQpOworCQkJeGZlci0+c3RhdHVzID0gLUVQUk9UTzsKKwkJCXJldHVybiB0cnVlOworCQl9
CisKKwkJaWYgKHdvcmRfY291bnQgPiB4ZmVyLT5tc2ctPnJ4X2xlbikgeworCQkJRFJNX0RFVl9F
UlJPUigKKwkJCQlkZXYsCisJCQkJIlslMDJYXSBSZWNlaXZlIGJ1ZmZlciB0b28gc21hbGw6ICV6
dSAoPCAldSlcbiIsCisJCQkJeGZlci0+Y21kLCB4ZmVyLT5tc2ctPnJ4X2xlbiwgd29yZF9jb3Vu
dCk7CisJCQl4ZmVyLT5zdGF0dXMgPSAtRUlOVkFMOworCQkJcmV0dXJuIHRydWU7CisJCX0KKwor
CQl4ZmVyLT5yeF93b3JkX2NvdW50ID0gd29yZF9jb3VudDsKKwl9IGVsc2UgeworCQkvKiBTZXQg
d29yZF9jb3VudCBmcm9tIHByZXZpb3VzIGhlYWRlciByZWFkICovCisJCXdvcmRfY291bnQgPSB4
ZmVyLT5yeF93b3JkX2NvdW50OworCX0KKworCS8qIElmIFJYIHBheWxvYWQgaXMgbm90IHlldCBy
ZWNlaXZlZCwgd2FpdCBmb3IgaXQgKi8KKwlpZiAoIShzdGF0dXMgJiBOV0xfRFNJX1JYX1BLVF9Q
QVlMT0FEX0RBVEFfUkNWRCkpCisJCXJldHVybiBmYWxzZTsKKworCS8qIFJlYWQgdGhlIFJYIHBh
eWxvYWQgKi8KKwl3aGlsZSAod29yZF9jb3VudCA+PSA0KSB7CisJCXZhbCA9IG53bF9kc2lfcmVh
ZChkc2ksIE5XTF9EU0lfUlhfUEFZTE9BRCk7CisJCXBheWxvYWRbMF0gPSAodmFsID4+IDApICYg
MHhmZjsKKwkJcGF5bG9hZFsxXSA9ICh2YWwgPj4gOCkgJiAweGZmOworCQlwYXlsb2FkWzJdID0g
KHZhbCA+PiAxNikgJiAweGZmOworCQlwYXlsb2FkWzNdID0gKHZhbCA+PiAyNCkgJiAweGZmOwor
CQlwYXlsb2FkICs9IDQ7CisJCXhmZXItPnJ4X2xlbiArPSA0OworCQl3b3JkX2NvdW50IC09IDQ7
CisJfQorCisJaWYgKHdvcmRfY291bnQgPiAwKSB7CisJCXZhbCA9IG53bF9kc2lfcmVhZChkc2ks
IE5XTF9EU0lfUlhfUEFZTE9BRCk7CisJCXN3aXRjaCAod29yZF9jb3VudCkgeworCQljYXNlIDM6
CisJCQlwYXlsb2FkWzJdID0gKHZhbCA+PiAxNikgJiAweGZmOworCQkJKyt4ZmVyLT5yeF9sZW47
CisJCQkvKiBGYWxsIHRocm91Z2ggKi8KKwkJY2FzZSAyOgorCQkJcGF5bG9hZFsxXSA9ICh2YWwg
Pj4gOCkgJiAweGZmOworCQkJKyt4ZmVyLT5yeF9sZW47CisJCQkvKiBGYWxsIHRocm91Z2ggKi8K
KwkJY2FzZSAxOgorCQkJcGF5bG9hZFswXSA9ICh2YWwgPj4gMCkgJiAweGZmOworCQkJKyt4ZmVy
LT5yeF9sZW47CisJCQlicmVhazsKKwkJfQorCX0KKworCXhmZXItPnN0YXR1cyA9IHhmZXItPnJ4
X2xlbjsKKwllcnIgPSBud2xfZHNpX2NsZWFyX2Vycm9yKGRzaSk7CisJaWYgKGVycikKKwkJeGZl
ci0+c3RhdHVzID0gZXJyOworCisJcmV0dXJuIHRydWU7Cit9CisKK3N0YXRpYyB2b2lkIG53bF9k
c2lfZmluaXNoX3RyYW5zbWlzc2lvbihzdHJ1Y3QgbndsX2RzaSAqZHNpLCB1MzIgc3RhdHVzKQor
eworCXN0cnVjdCBud2xfZHNpX3RyYW5zZmVyICp4ZmVyID0gZHNpLT54ZmVyOworCWJvb2wgZW5k
X3BhY2tldCA9IGZhbHNlOworCisJaWYgKCF4ZmVyKQorCQlyZXR1cm47CisKKwlpZiAoeGZlci0+
ZGlyZWN0aW9uID09IERTSV9QQUNLRVRfU0VORCAmJgorCSAgICBzdGF0dXMgJiBOV0xfRFNJX1RY
X1BLVF9ET05FKSB7CisJCXhmZXItPnN0YXR1cyA9IHhmZXItPnR4X2xlbjsKKwkJZW5kX3BhY2tl
dCA9IHRydWU7CisJfSBlbHNlIGlmIChzdGF0dXMgJiBOV0xfRFNJX0RQSFlfRElSRUNUSU9OICYm
CisJCSAgICgoc3RhdHVzICYgKE5XTF9EU0lfUlhfUEtUX0hEUl9SQ1ZEIHwKKwkJCSAgICAgICBO
V0xfRFNJX1JYX1BLVF9QQVlMT0FEX0RBVEFfUkNWRCkpKSkgeworCQllbmRfcGFja2V0ID0gbnds
X2RzaV9yZWFkX3BhY2tldChkc2ksIHN0YXR1cyk7CisJfQorCisJaWYgKGVuZF9wYWNrZXQpCisJ
CWNvbXBsZXRlKCZ4ZmVyLT5jb21wbGV0ZWQpOworfQorCitzdGF0aWMgdm9pZCBud2xfZHNpX2Jl
Z2luX3RyYW5zbWlzc2lvbihzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXN0cnVjdCBud2xfZHNp
X3RyYW5zZmVyICp4ZmVyID0gZHNpLT54ZmVyOworCXN0cnVjdCBtaXBpX2RzaV9wYWNrZXQgKnBr
dCA9ICZ4ZmVyLT5wYWNrZXQ7CisJY29uc3QgdTggKnBheWxvYWQ7CisJc2l6ZV90IGxlbmd0aDsK
Kwl1MTYgd29yZF9jb3VudDsKKwl1OCBoc19tb2RlOworCXUzMiB2YWw7CisJdTMyIGhzX3dvcmth
cm91bmQgPSAwOworCisJLyogU2VuZCB0aGUgcGF5bG9hZCwgaWYgYW55ICovCisJbGVuZ3RoID0g
cGt0LT5wYXlsb2FkX2xlbmd0aDsKKwlwYXlsb2FkID0gcGt0LT5wYXlsb2FkOworCisJd2hpbGUg
KGxlbmd0aCA+PSA0KSB7CisJCXZhbCA9ICoodTMyICopcGF5bG9hZDsKKwkJaHNfd29ya2Fyb3Vu
ZCB8PSAhKHZhbCAmIDB4RkZGRjAwKTsKKwkJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfVFhf
UEFZTE9BRCwgdmFsKTsKKwkJcGF5bG9hZCArPSA0OworCQlsZW5ndGggLT0gNDsKKwl9CisJLyog
U2VuZCB0aGUgcmVzdCBvZiB0aGUgcGF5bG9hZCAqLworCXZhbCA9IDA7CisJc3dpdGNoIChsZW5n
dGgpIHsKKwljYXNlIDM6CisJCXZhbCB8PSBwYXlsb2FkWzJdIDw8IDE2OworCQkvKiBGYWxsIHRo
cm91Z2ggKi8KKwljYXNlIDI6CisJCXZhbCB8PSBwYXlsb2FkWzFdIDw8IDg7CisJCWhzX3dvcmth
cm91bmQgfD0gISh2YWwgJiAweEZGRkYwMCk7CisJCS8qIEZhbGwgdGhyb3VnaCAqLworCWNhc2Ug
MToKKwkJdmFsIHw9IHBheWxvYWRbMF07CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1RY
X1BBWUxPQUQsIHZhbCk7CisJCWJyZWFrOworCX0KKwl4ZmVyLT50eF9sZW4gPSBwa3QtPnBheWxv
YWRfbGVuZ3RoOworCisJLyoKKwkgKiBTZW5kIHRoZSBoZWFkZXIKKwkgKiBoZWFkZXJbMF0gPSBW
aXJ0dWFsIENoYW5uZWwgKyBEYXRhIFR5cGUKKwkgKiBoZWFkZXJbMV0gPSBXb3JkIENvdW50IExT
QiAoTFApIG9yIGZpcnN0IHBhcmFtIChTUCkKKwkgKiBoZWFkZXJbMl0gPSBXb3JkIENvdW50IE1T
QiAoTFApIG9yIHNlY29uZCBwYXJhbSAoU1ApCisJICovCisJd29yZF9jb3VudCA9IHBrdC0+aGVh
ZGVyWzFdIHwgKHBrdC0+aGVhZGVyWzJdIDw8IDgpOworCWlmIChoc193b3JrYXJvdW5kICYmIChk
c2ktPnF1aXJrcyAmIEUxMTQxOF9IU19NT0RFX1FVSVJLKSkgeworCQlEUk1fREVWX0RFQlVHX0RS
SVZFUihkc2ktPmRldiwKKwkJCQkgICAgICJVc2luZyBocyBtb2RlIHdvcmthcm91bmQgZm9yIGNt
ZCAweCV4XG4iLAorCQkJCSAgICAgeGZlci0+Y21kKTsKKwkJaHNfbW9kZSA9IDE7CisJfSBlbHNl
IHsKKwkJaHNfbW9kZSA9ICh4ZmVyLT5tc2ctPmZsYWdzICYgTUlQSV9EU0lfTVNHX1VTRV9MUE0p
ID8gMCA6IDE7CisJfQorCXZhbCA9IE5XTF9EU0lfV0Mod29yZF9jb3VudCkgfCBOV0xfRFNJX1RY
X1ZDKHhmZXItPm1zZy0+Y2hhbm5lbCkgfAorCSAgICAgIE5XTF9EU0lfVFhfRFQoeGZlci0+bXNn
LT50eXBlKSB8IE5XTF9EU0lfSFNfU0VMKGhzX21vZGUpIHwKKwkgICAgICBOV0xfRFNJX0JUQV9U
WCh4ZmVyLT5uZWVkX2J0YSk7CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfUEtUX0NPTlRS
T0wsIHZhbCk7CisKKwkvKiBTZW5kIHBhY2tldCBjb21tYW5kICovCisJbndsX2RzaV93cml0ZShk
c2ksIE5XTF9EU0lfU0VORF9QQUNLRVQsIDB4MSk7Cit9CisKK3N0YXRpYyBzc2l6ZV90IG53bF9k
c2lfaG9zdF90cmFuc2ZlcihzdHJ1Y3QgbWlwaV9kc2lfaG9zdCAqZHNpX2hvc3QsCisJCQkJICAg
ICBjb25zdCBzdHJ1Y3QgbWlwaV9kc2lfbXNnICptc2cpCit7CisJc3RydWN0IG53bF9kc2kgKmRz
aSA9IGNvbnRhaW5lcl9vZihkc2lfaG9zdCwgc3RydWN0IG53bF9kc2ksIGRzaV9ob3N0KTsKKwlz
dHJ1Y3QgbndsX2RzaV90cmFuc2ZlciB4ZmVyOworCXNzaXplX3QgcmV0ID0gMDsKKworCS8qIENy
ZWF0ZSBwYWNrZXQgdG8gYmUgc2VudCAqLworCWRzaS0+eGZlciA9ICZ4ZmVyOworCXJldCA9IG1p
cGlfZHNpX2NyZWF0ZV9wYWNrZXQoJnhmZXIucGFja2V0LCBtc2cpOworCWlmIChyZXQgPCAwKSB7
CisJCWRzaS0+eGZlciA9IE5VTEw7CisJCXJldHVybiByZXQ7CisJfQorCisJaWYgKChtc2ctPnR5
cGUgJiBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8wX1BBUkFNIHx8CisJICAgICBtc2ct
PnR5cGUgJiBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8xX1BBUkFNIHx8CisJICAgICBt
c2ctPnR5cGUgJiBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8yX1BBUkFNIHx8CisJICAg
ICBtc2ctPnR5cGUgJiBNSVBJX0RTSV9EQ1NfUkVBRCkgJiYKKwkgICAgbXNnLT5yeF9sZW4gPiAw
ICYmIG1zZy0+cnhfYnVmICE9IE5VTEwpCisJCXhmZXIuZGlyZWN0aW9uID0gRFNJX1BBQ0tFVF9S
RUNFSVZFOworCWVsc2UKKwkJeGZlci5kaXJlY3Rpb24gPSBEU0lfUEFDS0VUX1NFTkQ7CisKKwl4
ZmVyLm5lZWRfYnRhID0gKHhmZXIuZGlyZWN0aW9uID09IERTSV9QQUNLRVRfUkVDRUlWRSk7CisJ
eGZlci5uZWVkX2J0YSB8PSAobXNnLT5mbGFncyAmIE1JUElfRFNJX01TR19SRVFfQUNLKSA/IDEg
OiAwOworCXhmZXIubXNnID0gbXNnOworCXhmZXIuc3RhdHVzID0gLUVUSU1FRE9VVDsKKwl4ZmVy
LnJ4X3dvcmRfY291bnQgPSAwOworCXhmZXIucnhfbGVuID0gMDsKKwl4ZmVyLmNtZCA9IDB4MDA7
CisJaWYgKG1zZy0+dHhfbGVuID4gMCkKKwkJeGZlci5jbWQgPSAoKHU4ICopKG1zZy0+dHhfYnVm
KSlbMF07CisJaW5pdF9jb21wbGV0aW9uKCZ4ZmVyLmNvbXBsZXRlZCk7CisKKwlyZXQgPSBjbGtf
cHJlcGFyZV9lbmFibGUoZHNpLT5yeF9lc2NfY2xrKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1f
REVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGVuYWJsZSByeF9lc2MgY2xrOiAlemRcbiIs
CisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwlEUk1fREVWX0RFQlVHX0RSSVZF
Uihkc2ktPmRldiwgIkVuYWJsZWQgcnhfZXNjIGNsayBAJWx1IEh6XG4iLAorCQkJICAgICBjbGtf
Z2V0X3JhdGUoZHNpLT5yeF9lc2NfY2xrKSk7CisKKwkvKiBJbml0aWF0ZSB0aGUgRFNJIHBhY2tl
dCB0cmFuc21pc2lvbiAqLworCW53bF9kc2lfYmVnaW5fdHJhbnNtaXNzaW9uKGRzaSk7CisKKwlp
ZiAoIXdhaXRfZm9yX2NvbXBsZXRpb25fdGltZW91dCgmeGZlci5jb21wbGV0ZWQsCisJCQkJCSBO
V0xfRFNJX01JUElfRklGT19USU1FT1VUKSkgeworCQlEUk1fREVWX0VSUk9SKGRzaV9ob3N0LT5k
ZXYsICJbJTAyWF0gRFNJIHRyYW5zZmVyIHRpbWVkIG91dFxuIiwKKwkJCSAgICAgIHhmZXIuY21k
KTsKKwkJcmV0ID0gLUVUSU1FRE9VVDsKKwl9IGVsc2UgeworCQlyZXQgPSB4ZmVyLnN0YXR1czsK
Kwl9CisKKwljbGtfZGlzYWJsZV91bnByZXBhcmUoZHNpLT5yeF9lc2NfY2xrKTsKKworCXJldHVy
biByZXQ7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgbWlwaV9kc2lfaG9zdF9vcHMgbndsX2Rz
aV9ob3N0X29wcyA9IHsKKwkuYXR0YWNoID0gbndsX2RzaV9ob3N0X2F0dGFjaCwKKwkuZGV0YWNo
ID0gbndsX2RzaV9ob3N0X2RldGFjaCwKKwkudHJhbnNmZXIgPSBud2xfZHNpX2hvc3RfdHJhbnNm
ZXIsCit9OworCitzdGF0aWMgaXJxcmV0dXJuX3QgbndsX2RzaV9pcnFfaGFuZGxlcihpbnQgaXJx
LCB2b2lkICpkYXRhKQoreworCXUzMiBpcnFfc3RhdHVzOworCXN0cnVjdCBud2xfZHNpICpkc2kg
PSBkYXRhOworCisJaXJxX3N0YXR1cyA9IG53bF9kc2lfcmVhZChkc2ksIE5XTF9EU0lfSVJRX1NU
QVRVUyk7CisKKwlpZiAoaXJxX3N0YXR1cyAmIE5XTF9EU0lfVFhfRklGT19PVkZMVykKKwkJRFJN
X0RFVl9FUlJPUl9SQVRFTElNSVRFRChkc2ktPmRldiwgInR4IGZpZm8gb3ZlcmZsb3dcbiIpOwor
CisJaWYgKGlycV9zdGF0dXMgJiBOV0xfRFNJX0hTX1RYX1RJTUVPVVQpCisJCURSTV9ERVZfRVJS
T1JfUkFURUxJTUlURUQoZHNpLT5kZXYsICJIUyB0eCB0aW1lb3V0XG4iKTsKKworCWlmIChpcnFf
c3RhdHVzICYgTldMX0RTSV9UWF9QS1RfRE9ORSB8fAorCSAgICBpcnFfc3RhdHVzICYgTldMX0RT
SV9SWF9QS1RfSERSX1JDVkQgfHwKKwkgICAgaXJxX3N0YXR1cyAmIE5XTF9EU0lfUlhfUEtUX1BB
WUxPQURfREFUQV9SQ1ZEKQorCQlud2xfZHNpX2ZpbmlzaF90cmFuc21pc3Npb24oZHNpLCBpcnFf
c3RhdHVzKTsKKworCXJldHVybiBJUlFfSEFORExFRDsKK30KKworc3RhdGljIGludCBud2xfZHNp
X2VuYWJsZShzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXN0cnVjdCBkZXZpY2UgKmRldiA9IGRz
aS0+ZGV2OworCXVuaW9uIHBoeV9jb25maWd1cmVfb3B0cyAqcGh5X2NmZyA9ICZkc2ktPnBoeV9j
Zmc7CisJaW50IHJldDsKKworCWlmICghZHNpLT5sYW5lcykgeworCQlEUk1fREVWX0VSUk9SKGRl
diwgIk5lZWQgRFNJIGxhbmVzOiAlZFxuIiwgZHNpLT5sYW5lcyk7CisJCXJldHVybiAtRUlOVkFM
OworCX0KKworCXJldCA9IHBoeV9pbml0KGRzaS0+cGh5KTsKKwlpZiAocmV0IDwgMCkgeworCQlE
Uk1fREVWX0VSUk9SKGRldiwgIkZhaWxlZCB0byBpbml0IERTSSBwaHk6ICVkXG4iLCByZXQpOwor
CQlyZXR1cm4gcmV0OworCX0KKworCXJldCA9IHBoeV9jb25maWd1cmUoZHNpLT5waHksIHBoeV9j
ZmcpOworCWlmIChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFpbGVkIHRvIGNv
bmZpZ3VyZSBEU0kgcGh5OiAlZFxuIiwgcmV0KTsKKwkJZ290byB1bmluaXRfcGh5OworCX0KKwor
CXJldCA9IGNsa19wcmVwYXJlX2VuYWJsZShkc2ktPnR4X2VzY19jbGspOworCWlmIChyZXQgPCAw
KSB7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gZW5hYmxlIHR4X2VzYyBj
bGs6ICVkXG4iLAorCQkJICAgICAgcmV0KTsKKwkJZ290byB1bmluaXRfcGh5OworCX0KKwlEUk1f
REVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgIkVuYWJsZWQgdHhfZXNjIGNsayBAJWx1IEh6XG4i
LAorCQkJICAgICBjbGtfZ2V0X3JhdGUoZHNpLT50eF9lc2NfY2xrKSk7CisKKwlyZXQgPSBud2xf
ZHNpX2NvbmZpZ19ob3N0KGRzaSk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RFVl9FUlJPUihk
ZXYsICJGYWlsZWQgdG8gc2V0IHVwIERTSTogJWQiLCByZXQpOworCQlnb3RvIGRpc2FibGVfY2xv
Y2s7CisJfQorCisJcmV0ID0gbndsX2RzaV9jb25maWdfZHBpKGRzaSk7CisJaWYgKHJldCA8IDAp
IHsKKwkJRFJNX0RFVl9FUlJPUihkZXYsICJGYWlsZWQgdG8gc2V0IHVwIERQSTogJWQiLCByZXQp
OworCQlnb3RvIGRpc2FibGVfY2xvY2s7CisJfQorCisJcmV0ID0gcGh5X3Bvd2VyX29uKGRzaS0+
cGh5KTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRldiwgIkZhaWxlZCB0byBw
b3dlciBvbiBEUEhZICglZClcbiIsIHJldCk7CisJCWdvdG8gZGlzYWJsZV9jbG9jazsKKwl9CisK
KwlyZXQgPSBud2xfZHNpX2luaXRfaW50ZXJydXB0cyhkc2kpOworCWlmIChyZXQgPCAwKQorCQln
b3RvIHBvd2VyX29mZl9waHk7CisKKwlyZXR1cm4gcmV0OworCitwb3dlcl9vZmZfcGh5OgorCXBo
eV9wb3dlcl9vZmYoZHNpLT5waHkpOworZGlzYWJsZV9jbG9jazoKKwljbGtfZGlzYWJsZV91bnBy
ZXBhcmUoZHNpLT50eF9lc2NfY2xrKTsKK3VuaW5pdF9waHk6CisJcGh5X2V4aXQoZHNpLT5waHkp
OworCisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCBud2xfZHNpX2Rpc2FibGUoc3RydWN0
IG53bF9kc2kgKmRzaSkKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSBkc2ktPmRldjsKKworCURS
TV9ERVZfREVCVUdfRFJJVkVSKGRldiwgIkRpc2FibGluZyBjbG9ja3MgYW5kIHBoeVxuIik7CisK
KwlwaHlfcG93ZXJfb2ZmKGRzaS0+cGh5KTsKKwlwaHlfZXhpdChkc2ktPnBoeSk7CisKKwkvKiBE
aXNhYmxpbmcgdGhlIGNsb2NrIGJlZm9yZSB0aGUgcGh5IGJyZWFrcyBlbmFibGluZyBkc2kgYWdh
aW4gKi8KKwljbGtfZGlzYWJsZV91bnByZXBhcmUoZHNpLT50eF9lc2NfY2xrKTsKKworCXJldHVy
biAwOworfQorCitzdGF0aWMgaW50IG53bF9kc2lfc2V0X3BsYXRmb3JtX2Nsb2NrcyhzdHJ1Y3Qg
bndsX2RzaSAqZHNpLCBib29sIGVuYWJsZSkKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSBkc2kt
PmRldjsKKwljb25zdCBjaGFyICppZDsKKwlzdHJ1Y3QgY2xrICpjbGs7CisJc2l6ZV90IGk7CisJ
dW5zaWduZWQgbG9uZyByYXRlOworCWludCByZXQsIHJlc3VsdCA9IDA7CisKKwlEUk1fREVWX0RF
QlVHX0RSSVZFUihkZXYsICIlcyBwbGF0Zm9ybSBjbG9ja3NcbiIsCisJCQkgICAgIGVuYWJsZSA/
ICJlbmFibGluZyIgOiAiZGlzYWJsaW5nIik7CisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUo
ZHNpLT5wZGF0YS0+Y2xrX2NvbmZpZyk7IGkrKykgeworCQlpZiAoIWRzaS0+Y2xrX2NvbmZpZ1tp
XS5wcmVzZW50KQorCQkJY29udGludWU7CisJCWlkID0gZHNpLT5jbGtfY29uZmlnW2ldLmlkOwor
CQljbGsgPSBkc2ktPmNsa19jb25maWdbaV0uY2xrOworCisJCWlmIChlbmFibGUpIHsKKwkJCXJl
dCA9IGNsa19wcmVwYXJlX2VuYWJsZShjbGspOworCQkJaWYgKHJldCA8IDApIHsKKwkJCQlEUk1f
REVWX0VSUk9SKGRldiwKKwkJCQkJICAgICAgIkZhaWxlZCB0byBlbmFibGUgJXMgY2xrOiAlZFxu
IiwKKwkJCQkJICAgICAgaWQsIHJldCk7CisJCQkJcmVzdWx0ID0gcmVzdWx0ID86IHJldDsKKwkJ
CX0KKwkJCXJhdGUgPSBjbGtfZ2V0X3JhdGUoY2xrKTsKKwkJCURSTV9ERVZfREVCVUdfRFJJVkVS
KGRldiwgIkVuYWJsZWQgJXMgY2xrIEAlbHUgSHpcbiIsCisJCQkJCSAgICAgaWQsIHJhdGUpOwor
CQl9IGVsc2UgeworCQkJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKGNsayk7CisJCQlEUk1fREVWX0RF
QlVHX0RSSVZFUihkZXYsICJEaXNhYmxlZCAlcyBjbGtcbiIsIGlkKTsKKwkJfQorCX0KKworCXJl
dHVybiByZXN1bHQ7Cit9CisKK3N0YXRpYyBpbnQgbndsX2RzaV9wbGF0X2VuYWJsZShzdHJ1Y3Qg
bndsX2RzaSAqZHNpKQoreworCXN0cnVjdCBkZXZpY2UgKmRldiA9IGRzaS0+ZGV2OworCWludCBy
ZXQ7CisKKwlpZiAoZHNpLT5wZGF0YS0+c2VsZWN0X2lucHV0KSB7CisJCXJldCA9IGRzaS0+cGRh
dGEtPnNlbGVjdF9pbnB1dChkc2kpOworCQlpZiAocmV0IDwgMCkKKwkJCXJldHVybiByZXQ7CisJ
fQorCisJcmV0ID0gbndsX2RzaV9zZXRfcGxhdGZvcm1fY2xvY2tzKGRzaSwgdHJ1ZSk7CisJaWYg
KHJldCA8IDApCisJCXJldHVybiByZXQ7CisKKwlyZXQgPSBkc2ktPnBkYXRhLT5wb3dlcm9uKGRz
aSk7CisJaWYgKHJldCA8IDApCisJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFpbGVkIHRvIHBvd2Vy
IG9uIERTSTogJWRcbiIsIHJldCk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZvaWQgbnds
X2RzaV9wbGF0X2Rpc2FibGUoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlkc2ktPnBkYXRhLT5w
b3dlcm9mZihkc2kpOworCW53bF9kc2lfc2V0X3BsYXRmb3JtX2Nsb2Nrcyhkc2ksIGZhbHNlKTsK
KwlpZiAoZHNpLT5wZGF0YS0+ZGVzZWxlY3RfaW5wdXQpCisJCWRzaS0+cGRhdGEtPmRlc2VsZWN0
X2lucHV0KGRzaSk7Cit9CisKK3N0YXRpYyB2b2lkIG53bF9kc2lfYnJpZGdlX2Rpc2FibGUoc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3sKKwlzdHJ1Y3QgbndsX2RzaSAqZHNpID0gYnJpZGdl
X3RvX2RzaShicmlkZ2UpOworCisJbndsX2RzaV9kaXNhYmxlKGRzaSk7CisJbndsX2RzaV9wbGF0
X2Rpc2FibGUoZHNpKTsKKwlwbV9ydW50aW1lX3B1dChkc2ktPmRldik7Cit9CisKK3N0YXRpYyBp
bnQgbndsX2RzaV9nZXRfZHBoeV9wYXJhbXMoc3RydWN0IG53bF9kc2kgKmRzaSwKKwkJCQkgICBj
b25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwKKwkJCQkgICB1bmlvbiBwaHlfY29u
ZmlndXJlX29wdHMgKnBoeV9vcHRzKQoreworCXVuc2lnbmVkIGxvbmcgcmF0ZTsKKwlpbnQgcmV0
OworCisJaWYgKGRzaS0+bGFuZXMgPCAxIHx8IGRzaS0+bGFuZXMgPiA0KQorCQlyZXR1cm4gLUVJ
TlZBTDsKKworCS8qCisJICogU28gZmFyIHRoZSBEUEhZIHNwZWMgbWluaW1hbCB0aW1pbmdzIHdv
cmsgZm9yIGJvdGggbWl4ZWwKKwkgKiBkcGh5IGFuZCBud2wgZHNpIGhvc3QKKwkgKi8KKwlyZXQg
PSBwaHlfbWlwaV9kcGh5X2dldF9kZWZhdWx0X2NvbmZpZygKKwkJbW9kZS0+Y3J0Y19jbG9jayAq
IDEwMDAsCisJCW1pcGlfZHNpX3BpeGVsX2Zvcm1hdF90b19icHAoZHNpLT5mb3JtYXQpLCBkc2kt
PmxhbmVzLAorCQkmcGh5X29wdHMtPm1pcGlfZHBoeSk7CisJaWYgKHJldCA8IDApCisJCXJldHVy
biByZXQ7CisKKwlyYXRlID0gY2xrX2dldF9yYXRlKGRzaS0+dHhfZXNjX2Nsayk7CisJRFJNX0RF
Vl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJMUCBjbGsgaXMgQCVsdSBIelxuIiwgcmF0ZSk7CisJ
cGh5X29wdHMtPm1pcGlfZHBoeS5scF9jbGtfcmF0ZSA9IHJhdGU7CisKKwlyZXR1cm4gMDsKK30K
Kworc3RhdGljIGJvb2wgbndsX2RzaV9icmlkZ2VfbW9kZV9maXh1cChzdHJ1Y3QgZHJtX2JyaWRn
ZSAqYnJpZGdlLAorCQkJCSAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2Rl
LAorCQkJCSAgICAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlKQorewor
CS8qIEF0IGxlYXN0IExDRElGICsgTldMIG5lZWRzIGFjdGl2ZSBoaWdoIHN5bmMgKi8KKwlhZGp1
c3RlZF9tb2RlLT5mbGFncyB8PSAoRFJNX01PREVfRkxBR19QSFNZTkMgfCBEUk1fTU9ERV9GTEFH
X1BWU1lOQyk7CisJYWRqdXN0ZWRfbW9kZS0+ZmxhZ3MgJj0gfihEUk1fTU9ERV9GTEFHX05IU1lO
QyB8IERSTV9NT0RFX0ZMQUdfTlZTWU5DKTsKKworCXJldHVybiB0cnVlOworfQorCitzdGF0aWMg
ZW51bSBkcm1fbW9kZV9zdGF0dXMKK253bF9kc2lfYnJpZGdlX21vZGVfdmFsaWQoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSwKKwkJCSAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1v
ZGUpCit7CisJc3RydWN0IG53bF9kc2kgKmRzaSA9IGJyaWRnZV90b19kc2koYnJpZGdlKTsKKwlp
bnQgYnBwID0gbWlwaV9kc2lfcGl4ZWxfZm9ybWF0X3RvX2JwcChkc2ktPmZvcm1hdCk7CisKKwlp
ZiAobW9kZS0+Y2xvY2sgKiBicHAgPiAxNTAwMDAwMCAqIGRzaS0+bGFuZXMpCisJCXJldHVybiBN
T0RFX0NMT0NLX0hJR0g7CisKKwlpZiAobW9kZS0+Y2xvY2sgKiBicHAgPCA4MDAwMCAqIGRzaS0+
bGFuZXMpCisJCXJldHVybiBNT0RFX0NMT0NLX0xPVzsKKworCXJldHVybiBNT0RFX09LOworfQor
CitzdGF0aWMgdm9pZAorbndsX2RzaV9icmlkZ2VfbW9kZV9zZXQoc3RydWN0IGRybV9icmlkZ2Ug
KmJyaWRnZSwKKwkJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAorCQkJY29u
c3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpCit7CisJc3RydWN0IG53
bF9kc2kgKmRzaSA9IGJyaWRnZV90b19kc2koYnJpZGdlKTsKKwlzdHJ1Y3QgZGV2aWNlICpkZXYg
PSBkc2ktPmRldjsKKwl1bmlvbiBwaHlfY29uZmlndXJlX29wdHMgbmV3X2NmZzsKKwl1bnNpZ25l
ZCBsb25nIHBoeV9yZWZfcmF0ZTsKKwlpbnQgcmV0OworCisJcmV0ID0gbndsX2RzaV9nZXRfZHBo
eV9wYXJhbXMoZHNpLCBhZGp1c3RlZF9tb2RlLCAmbmV3X2NmZyk7CisJaWYgKHJldCA8IDApCisJ
CXJldHVybjsKKworCS8qCisJICogSWYgaHMgY2xvY2sgaXMgdW5jaGFuZ2VkLCB3ZSdyZSBhbGwg
Z29vZCAtIGFsbCBwYXJhbWV0ZXJzIGFyZQorCSAqIGRlcml2ZWQgZnJvbSBpdCBhdG0uCisJICov
CisJaWYgKG5ld19jZmcubWlwaV9kcGh5LmhzX2Nsa19yYXRlID09IGRzaS0+cGh5X2NmZy5taXBp
X2RwaHkuaHNfY2xrX3JhdGUpCisJCXJldHVybjsKKworCXBoeV9yZWZfcmF0ZSA9IGNsa19nZXRf
cmF0ZShkc2ktPnBoeV9yZWZfY2xrKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkZXYsICJQSFkg
YXQgcmVmIHJhdGU6ICVsdVxuIiwgcGh5X3JlZl9yYXRlKTsKKwkvKiBTYXZlIHRoZSBuZXcgZGVz
aXJlZCBwaHkgY29uZmlnICovCisJbWVtY3B5KCZkc2ktPnBoeV9jZmcsICZuZXdfY2ZnLCBzaXpl
b2YobmV3X2NmZykpOworCisJbWVtY3B5KCZkc2ktPm1vZGUsIGFkanVzdGVkX21vZGUsIHNpemVv
Zihkc2ktPm1vZGUpKTsKKwlkcm1fbW9kZV9kZWJ1Z19wcmludG1vZGVsaW5lKGFkanVzdGVkX21v
ZGUpOworfQorCitzdGF0aWMgdm9pZCBud2xfZHNpX2JyaWRnZV9wcmVfZW5hYmxlKHN0cnVjdCBk
cm1fYnJpZGdlICpicmlkZ2UpCit7CisJc3RydWN0IG53bF9kc2kgKmRzaSA9IGJyaWRnZV90b19k
c2koYnJpZGdlKTsKKworCXBtX3J1bnRpbWVfZ2V0X3N5bmMoZHNpLT5kZXYpOworCW53bF9kc2lf
cGxhdF9lbmFibGUoZHNpKTsKKwlud2xfZHNpX2VuYWJsZShkc2kpOworfQorCitzdGF0aWMgaW50
IG53bF9kc2lfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQoreworCXN0
cnVjdCBud2xfZHNpICpkc2kgPSBicmlkZ2VfdG9fZHNpKGJyaWRnZSk7CisKKwlyZXR1cm4gZHJt
X2JyaWRnZV9hdHRhY2goYnJpZGdlLT5lbmNvZGVyLCBkc2ktPnBhbmVsX2JyaWRnZSwgYnJpZGdl
KTsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIG53bF9kc2lfYnJp
ZGdlX2Z1bmNzID0geworCS5wcmVfZW5hYmxlID0gbndsX2RzaV9icmlkZ2VfcHJlX2VuYWJsZSwK
KwkuZGlzYWJsZSAgICA9IG53bF9kc2lfYnJpZGdlX2Rpc2FibGUsCisJLm1vZGVfZml4dXAgPSBu
d2xfZHNpX2JyaWRnZV9tb2RlX2ZpeHVwLAorCS5tb2RlX3NldCAgID0gbndsX2RzaV9icmlkZ2Vf
bW9kZV9zZXQsCisJLm1vZGVfdmFsaWQgPSBud2xfZHNpX2JyaWRnZV9tb2RlX3ZhbGlkLAorCS5h
dHRhY2gJICAgID0gbndsX2RzaV9icmlkZ2VfYXR0YWNoLAorfTsKKworc3RhdGljIGludCBud2xf
ZHNpX3BhcnNlX2R0KHN0cnVjdCBud2xfZHNpICpkc2kpCit7CisJc3RydWN0IHBsYXRmb3JtX2Rl
dmljZSAqcGRldiA9IHRvX3BsYXRmb3JtX2RldmljZShkc2ktPmRldik7CisJc3RydWN0IGNsayAq
Y2xrOworCWNvbnN0IGNoYXIgKmNsa19pZDsKKwl2b2lkIF9faW9tZW0gKmJhc2U7CisJaW50IGks
IHJldDsKKworCWRzaS0+cGh5ID0gZGV2bV9waHlfZ2V0KGRzaS0+ZGV2LCAiZHBoeSIpOworCWlm
IChJU19FUlIoZHNpLT5waHkpKSB7CisJCXJldCA9IFBUUl9FUlIoZHNpLT5waHkpOworCQlpZiAo
cmV0ICE9IC1FUFJPQkVfREVGRVIpCisJCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiQ291bGQg
bm90IGdldCBQSFk6ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKworCS8qIFBsYXRm
b3JtIGRlcGVuZGVudCBjbG9ja3MgKi8KKwltZW1jcHkoZHNpLT5jbGtfY29uZmlnLCBkc2ktPnBk
YXRhLT5jbGtfY29uZmlnLAorCSAgICAgICBzaXplb2YoZHNpLT5wZGF0YS0+Y2xrX2NvbmZpZykp
OworCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUoZHNpLT5wZGF0YS0+Y2xrX2NvbmZpZyk7
IGkrKykgeworCQlpZiAoIWRzaS0+Y2xrX2NvbmZpZ1tpXS5wcmVzZW50KQorCQkJY29udGludWU7
CisKKwkJY2xrX2lkID0gZHNpLT5jbGtfY29uZmlnW2ldLmlkOworCQljbGsgPSBkZXZtX2Nsa19n
ZXQoZHNpLT5kZXYsIGNsa19pZCk7CisJCWlmIChJU19FUlIoY2xrKSkgeworCQkJcmV0ID0gUFRS
X0VSUihjbGspOworCQkJRFJNX0RFVl9FUlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byBnZXQgJXMg
Y2xvY2s6ICVkXG4iLAorCQkJCSAgICAgIGNsa19pZCwgcmV0KTsKKwkJCXJldHVybiByZXQ7CisJ
CX0KKwkJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJTZXR1cCBjbGsgJXMgKHJhdGU6
ICVsdSlcbiIsCisJCQkJICAgICBjbGtfaWQsIGNsa19nZXRfcmF0ZShjbGspKTsKKwkJZHNpLT5j
bGtfY29uZmlnW2ldLmNsayA9IGNsazsKKwl9CisKKwkvKiBEU0kgY2xvY2tzICovCisJY2xrID0g
ZGV2bV9jbGtfZ2V0KGRzaS0+ZGV2LCAicGh5X3JlZiIpOworCWlmIChJU19FUlIoY2xrKSkgewor
CQlyZXQgPSBQVFJfRVJSKGNsayk7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQg
dG8gZ2V0IHBoeV9yZWYgY2xvY2s6ICVkXG4iLAorCQkJICAgICAgcmV0KTsKKwkJcmV0dXJuIHJl
dDsKKwl9CisJZHNpLT5waHlfcmVmX2NsayA9IGNsazsKKworCWNsayA9IGRldm1fY2xrX2dldChk
c2ktPmRldiwgInJ4X2VzYyIpOworCWlmIChJU19FUlIoY2xrKSkgeworCQlyZXQgPSBQVFJfRVJS
KGNsayk7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gZ2V0IHJ4X2VzYyBj
bG9jazogJWRcbiIsCisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwlkc2ktPnJ4
X2VzY19jbGsgPSBjbGs7CisKKwljbGsgPSBkZXZtX2Nsa19nZXQoZHNpLT5kZXYsICJ0eF9lc2Mi
KTsKKwlpZiAoSVNfRVJSKGNsaykpIHsKKwkJcmV0ID0gUFRSX0VSUihjbGspOworCQlEUk1fREVW
X0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGdldCB0eF9lc2MgY2xvY2s6ICVkXG4iLAorCQkJ
ICAgICAgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisJZHNpLT50eF9lc2NfY2xrID0gY2xrOwor
CisJZHNpLT5tdXggPSBkZXZtX211eF9jb250cm9sX2dldChkc2ktPmRldiwgTlVMTCk7CisJaWYg
KElTX0VSUihkc2ktPm11eCkpIHsKKwkJcmV0ID0gUFRSX0VSUihkc2ktPm11eCk7CisJCWlmIChy
ZXQgIT0gLUVQUk9CRV9ERUZFUikKKwkJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQg
dG8gZ2V0IG11eDogJWRcbiIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJYmFzZSA9IGRl
dm1fcGxhdGZvcm1faW9yZW1hcF9yZXNvdXJjZShwZGV2LCAwKTsKKwlpZiAoSVNfRVJSKGJhc2Up
KQorCQlyZXR1cm4gUFRSX0VSUihiYXNlKTsKKworCWRzaS0+cmVnbWFwID0KKwkJZGV2bV9yZWdt
YXBfaW5pdF9tbWlvKGRzaS0+ZGV2LCBiYXNlLCAmbndsX2RzaV9yZWdtYXBfY29uZmlnKTsKKwlp
ZiAoSVNfRVJSKGRzaS0+cmVnbWFwKSkgeworCQlyZXQgPSBQVFJfRVJSKGRzaS0+cmVnbWFwKTsK
KwkJRFJNX0RFVl9FUlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byBjcmVhdGUgTldMIERTSSByZWdt
YXA6ICVkXG4iLAorCQkJICAgICAgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlkc2ktPmly
cSA9IHBsYXRmb3JtX2dldF9pcnEocGRldiwgMCk7CisJaWYgKGRzaS0+aXJxIDwgMCkgeworCQlE
Uk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGdldCBkZXZpY2UgSVJROiAlZFxuIiwK
KwkJCSAgICAgIGRzaS0+aXJxKTsKKwkJcmV0dXJuIGRzaS0+aXJxOworCX0KKworCWRzaS0+cnN0
YyA9IGRldm1fcmVzZXRfY29udHJvbF9hcnJheV9nZXQoZHNpLT5kZXYsIGZhbHNlLCB0cnVlKTsK
KwlpZiAoSVNfRVJSKGRzaS0+cnN0YykpIHsKKwkJcmV0ID0gUFRSX0VSUihkc2ktPnJzdGMpOwor
CQlpZiAocmV0ICE9IC1FUFJPQkVfREVGRVIpCisJCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAi
RmFpbGVkIHRvIGdldCByZXNldHM6ICVkXG4iLAorCQkJCSAgICAgIHJldCk7CisJCXJldHVybiBy
ZXQ7CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgaW14OG1xX2RzaV9zZWxlY3Rf
aW5wdXQoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlzdHJ1Y3QgZGV2aWNlX25vZGUgKnJlbW90
ZTsKKwl1MzIgdXNlX2Rjc3MgPSAxOworCWludCByZXQ7CisKKwlyZW1vdGUgPSBvZl9ncmFwaF9n
ZXRfcmVtb3RlX25vZGUoZHNpLT5kZXYtPm9mX25vZGUsIDAsCisJCQkJCSAgTldMX0RTSV9FTkRQ
T0lOVF9MQ0RJRik7CisJaWYgKHJlbW90ZSkgeworCQl1c2VfZGNzcyA9IDA7CisJfSBlbHNlIHsK
KwkJcmVtb3RlID0gb2ZfZ3JhcGhfZ2V0X3JlbW90ZV9ub2RlKGRzaS0+ZGV2LT5vZl9ub2RlLCAw
LAorCQkJCQkJICBOV0xfRFNJX0VORFBPSU5UX0RDU1MpOworCQlpZiAoIXJlbW90ZSkgeworCQkJ
RFJNX0RFVl9FUlJPUihkc2ktPmRldiwKKwkJCQkgICAgICAiTm8gdmFsaWQgaW5wdXQgZW5kcG9p
bnQgZm91bmRcbiIpOworCQkJcmV0dXJuIC1FSU5WQUw7CisJCX0KKwl9CisKKwlEUk1fREVWX0lO
Rk8oZHNpLT5kZXYsICJVc2luZyAlcyBhcyBpbnB1dCBzb3VyY2VcbiIsCisJCSAgICAgKHVzZV9k
Y3NzKSA/ICJEQ1NTIiA6ICJMQ0RJRiIpOworCXJldCA9IG11eF9jb250cm9sX3RyeV9zZWxlY3Qo
ZHNpLT5tdXgsIHVzZV9kY3NzKTsKKwlpZiAocmV0IDwgMCkKKwkJRFJNX0RFVl9FUlJPUihkc2kt
PmRldiwgIkZhaWxlZCB0byBzZWxlY3QgaW5wdXQ6ICVkXG4iLCByZXQpOworCisJb2Zfbm9kZV9w
dXQocmVtb3RlKTsKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IGlteDhtcV9kc2lfZGVz
ZWxlY3RfaW5wdXQoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlpbnQgcmV0OworCisJcmV0ID0g
bXV4X2NvbnRyb2xfZGVzZWxlY3QoZHNpLT5tdXgpOworCWlmIChyZXQgPCAwKQorCQlEUk1fREVW
X0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGRlc2VsZWN0IGlucHV0OiAlZFxuIiwgcmV0KTsK
KworCXJldHVybiByZXQ7Cit9CisKKworc3RhdGljIGludCBpbXg4bXFfZHNpX3Bvd2Vyb24oc3Ry
dWN0IG53bF9kc2kgKmRzaSkKK3sKKwlpbnQgcmV0ID0gMDsKKworCS8qIG90aGVyd2lzZSB0aGUg
ZGlzcGxheSBzdGF5cyBibGFuayAqLworCXVzbGVlcF9yYW5nZSgyMDAsIDMwMCk7CisKKwlpZiAo
ZHNpLT5yc3RjKQorCQlyZXQgPSByZXNldF9jb250cm9sX2RlYXNzZXJ0KGRzaS0+cnN0Yyk7CisK
KwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IGlteDhtcV9kc2lfcG93ZXJvZmYoc3RydWN0
IG53bF9kc2kgKmRzaSkKK3sKKwlpbnQgcmV0ID0gMDsKKworCWlmIChkc2ktPnF1aXJrcyAmIFNS
Q19SRVNFVF9RVUlSSykKKwkJcmV0dXJuIDA7CisKKwlpZiAoZHNpLT5yc3RjKQorCQlyZXQgPSBy
ZXNldF9jb250cm9sX2Fzc2VydChkc2ktPnJzdGMpOworCXJldHVybiByZXQ7Cit9CisKK3N0YXRp
YyBjb25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV90aW1pbmdzIG53bF9kc2lfdGltaW5ncyA9IHsKKwku
aW5wdXRfYnVzX2ZsYWdzID0gRFJNX0JVU19GTEFHX0RFX0xPVywKK307CisKK3N0YXRpYyBjb25z
dCBzdHJ1Y3QgbndsX2RzaV9wbGF0Zm9ybV9kYXRhIGlteDhtcV9kZXYgPSB7CisJLnBvd2Vyb24g
PSAmaW14OG1xX2RzaV9wb3dlcm9uLAorCS5wb3dlcm9mZiA9ICZpbXg4bXFfZHNpX3Bvd2Vyb2Zm
LAorCS5zZWxlY3RfaW5wdXQgPSAmaW14OG1xX2RzaV9zZWxlY3RfaW5wdXQsCisJLmRlc2VsZWN0
X2lucHV0ID0gJmlteDhtcV9kc2lfZGVzZWxlY3RfaW5wdXQsCisJLmNsa19jb25maWcgPSB7CisJ
CXsgLmlkID0gTldMX0RTSV9DTEtfQ09SRSwgLnByZXNlbnQgPSB0cnVlIH0sCisJfSwKK307CisK
K3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIG53bF9kc2lfZHRfaWRzW10gPSB7CisJ
eyAuY29tcGF0aWJsZSA9ICJmc2wsaW14OG1xLW53bC1kc2kiLCAuZGF0YSA9ICZpbXg4bXFfZGV2
LCB9LAorCXsgLyogc2VudGluZWwgKi8gfQorfTsKK01PRFVMRV9ERVZJQ0VfVEFCTEUob2YsIG53
bF9kc2lfZHRfaWRzKTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBzb2NfZGV2aWNlX2F0dHJpYnV0
ZSBud2xfZHNpX3F1aXJrc19tYXRjaFtdID0geworCXsgLnNvY19pZCA9ICJpLk1YOE1RIiwgLnJl
dmlzaW9uID0gIjIuMCIsCisJICAuZGF0YSA9ICh2b2lkICopKEUxMTQxOF9IU19NT0RFX1FVSVJL
IHwgU1JDX1JFU0VUX1FVSVJLKSB9LAorCXsgLyogc2VudGluZWwuICovIH0sCit9OworCitzdGF0
aWMgaW50IG53bF9kc2lfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKK3sKKwlz
dHJ1Y3QgZGV2aWNlICpkZXYgPSAmcGRldi0+ZGV2OworCWNvbnN0IHN0cnVjdCBvZl9kZXZpY2Vf
aWQgKm9mX2lkID0gb2ZfbWF0Y2hfZGV2aWNlKG53bF9kc2lfZHRfaWRzLCBkZXYpOworCWNvbnN0
IHN0cnVjdCBud2xfZHNpX3BsYXRmb3JtX2RhdGEgKnBkYXRhID0gb2ZfaWQtPmRhdGE7CisJY29u
c3Qgc3RydWN0IHNvY19kZXZpY2VfYXR0cmlidXRlICphdHRyOworCXN0cnVjdCBud2xfZHNpICpk
c2k7CisJaW50IHJldDsKKworCWRzaSA9IGRldm1fa3phbGxvYyhkZXYsIHNpemVvZigqZHNpKSwg
R0ZQX0tFUk5FTCk7CisJaWYgKCFkc2kpCisJCXJldHVybiAtRU5PTUVNOworCisJZHNpLT5kZXYg
PSBkZXY7CisJZHNpLT5wZGF0YSA9IHBkYXRhOworCisJcmV0ID0gbndsX2RzaV9wYXJzZV9kdChk
c2kpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwlyZXQgPSBkZXZtX3JlcXVlc3RfaXJx
KGRldiwgZHNpLT5pcnEsIG53bF9kc2lfaXJxX2hhbmRsZXIsIDAsCisJCQkgICAgICAgZGV2X25h
bWUoZGV2KSwgZHNpKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRldiwgIkZh
aWxlZCB0byByZXF1ZXN0IElSUSAlZDogJWRcbiIsIGRzaS0+aXJxLAorCQkJICAgICAgcmV0KTsK
KwkJcmV0dXJuIHJldDsKKwl9CisKKwlkc2ktPmRzaV9ob3N0Lm9wcyA9ICZud2xfZHNpX2hvc3Rf
b3BzOworCWRzaS0+ZHNpX2hvc3QuZGV2ID0gZGV2OworCXJldCA9IG1pcGlfZHNpX2hvc3RfcmVn
aXN0ZXIoJmRzaS0+ZHNpX2hvc3QpOworCWlmIChyZXQpIHsKKwkJRFJNX0RFVl9FUlJPUihkZXYs
ICJGYWlsZWQgdG8gcmVnaXN0ZXIgTUlQSSBob3N0OiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJuIHJl
dDsKKwl9CisKKwlhdHRyID0gc29jX2RldmljZV9tYXRjaChud2xfZHNpX3F1aXJrc19tYXRjaCk7
CisJaWYgKGF0dHIpCisJCWRzaS0+cXVpcmtzID0gKHVpbnRwdHJfdClhdHRyLT5kYXRhOworCisJ
ZHNpLT5icmlkZ2UuZHJpdmVyX3ByaXZhdGUgPSBkc2k7CisJZHNpLT5icmlkZ2UuZnVuY3MgPSAm
bndsX2RzaV9icmlkZ2VfZnVuY3M7CisJZHNpLT5icmlkZ2Uub2Zfbm9kZSA9IGRldi0+b2Zfbm9k
ZTsKKwlkc2ktPmJyaWRnZS50aW1pbmdzID0gJm53bF9kc2lfdGltaW5nczsKKworCWRldl9zZXRf
ZHJ2ZGF0YShkZXYsIGRzaSk7CisJcG1fcnVudGltZV9lbmFibGUoZGV2KTsKKwlyZXR1cm4gMDsK
K30KKworc3RhdGljIGludCBud2xfZHNpX3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpw
ZGV2KQoreworCXN0cnVjdCBud2xfZHNpICpkc2kgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2
KTsKKworCW1pcGlfZHNpX2hvc3RfdW5yZWdpc3RlcigmZHNpLT5kc2lfaG9zdCk7CisJcG1fcnVu
dGltZV9kaXNhYmxlKCZwZGV2LT5kZXYpOworCXJldHVybiAwOworfQorCitzdGF0aWMgc3RydWN0
IHBsYXRmb3JtX2RyaXZlciBud2xfZHNpX2RyaXZlciA9IHsKKwkucHJvYmUJCT0gbndsX2RzaV9w
cm9iZSwKKwkucmVtb3ZlCQk9IG53bF9kc2lfcmVtb3ZlLAorCS5kcml2ZXIJCT0geworCQkub2Zf
bWF0Y2hfdGFibGUgPSBud2xfZHNpX2R0X2lkcywKKwkJLm5hbWUJPSBEUlZfTkFNRSwKKwl9LAor
fTsKKworbW9kdWxlX3BsYXRmb3JtX2RyaXZlcihud2xfZHNpX2RyaXZlcik7CisKK01PRFVMRV9B
VVRIT1IoIk5YUCBTZW1pY29uZHVjdG9yIik7CitNT0RVTEVfQVVUSE9SKCJQdXJpc20gU1BDIik7
CitNT0RVTEVfREVTQ1JJUFRJT04oIk5vcnRod2VzdCBMb2dpYyBNSVBJLURTSSBkcml2ZXIiKTsK
K01PRFVMRV9MSUNFTlNFKCJHUEwiKTsgLyogR1BMdjIgb3IgbGF0ZXIgKi8KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS5oIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9ud2wtZHNpLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5hMjQ3
YThhMTFjN2MKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1k
c2kuaApAQCAtMCwwICsxLDE0NCBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0y
LjArICovCisvKgorICogTldMIE1JUEkgRFNJIGhvc3QgZHJpdmVyCisgKgorICogQ29weXJpZ2h0
IChDKSAyMDE3IE5YUAorICogQ29weXJpZ2h0IChDKSAyMDE5IFB1cmlzbSBTUEMKKyAqLworI2lm
bmRlZiBfX05XTF9EU0lfSF9fCisjZGVmaW5lIF9fTldMX0RTSV9IX18KKworLyogRFNJIEhPU1Qg
cmVnaXN0ZXJzICovCisjZGVmaW5lIE5XTF9EU0lfQ0ZHX05VTV9MQU5FUwkJCTB4MAorI2RlZmlu
ZSBOV0xfRFNJX0NGR19OT05DT05USU5VT1VTX0NMSwkJMHg0CisjZGVmaW5lIE5XTF9EU0lfQ0ZH
X1RfUFJFCQkJMHg4CisjZGVmaW5lIE5XTF9EU0lfQ0ZHX1RfUE9TVAkJCTB4YworI2RlZmluZSBO
V0xfRFNJX0NGR19UWF9HQVAJCQkweDEwCisjZGVmaW5lIE5XTF9EU0lfQ0ZHX0FVVE9JTlNFUlRf
RU9UUAkJMHgxNAorI2RlZmluZSBOV0xfRFNJX0NGR19FWFRSQV9DTURTX0FGVEVSX0VPVFAJMHgx
OAorI2RlZmluZSBOV0xfRFNJX0NGR19IVFhfVE9fQ09VTlQJCTB4MWMKKyNkZWZpbmUgTldMX0RT
SV9DRkdfTFJYX0hfVE9fQ09VTlQJCTB4MjAKKyNkZWZpbmUgTldMX0RTSV9DRkdfQlRBX0hfVE9f
Q09VTlQJCTB4MjQKKyNkZWZpbmUgTldMX0RTSV9DRkdfVFdBS0VVUAkJCTB4MjgKKyNkZWZpbmUg
TldMX0RTSV9DRkdfU1RBVFVTX09VVAkJCTB4MmMKKyNkZWZpbmUgTldMX0RTSV9SWF9FUlJPUl9T
VEFUVVMJCQkweDMwCisKKy8qIERTSSBEUEkgcmVnaXN0ZXJzICovCisjZGVmaW5lIE5XTF9EU0lf
UElYRUxfUEFZTE9BRF9TSVpFCQkweDIwMAorI2RlZmluZSBOV0xfRFNJX1BJWEVMX0ZJRk9fU0VO
RF9MRVZFTAkJMHgyMDQKKyNkZWZpbmUgTldMX0RTSV9JTlRFUkZBQ0VfQ09MT1JfQ09ESU5HCQkw
eDIwOAorI2RlZmluZSBOV0xfRFNJX1BJWEVMX0ZPUk1BVAkJCTB4MjBjCisjZGVmaW5lIE5XTF9E
U0lfVlNZTkNfUE9MQVJJVFkJCQkweDIxMAorI2RlZmluZSBOV0xfRFNJX1ZTWU5DX1BPTEFSSVRZ
X0FDVElWRV9MT1cJMAorI2RlZmluZSBOV0xfRFNJX1ZTWU5DX1BPTEFSSVRZX0FDVElWRV9ISUdI
CUJJVCgxKQorCisjZGVmaW5lIE5XTF9EU0lfSFNZTkNfUE9MQVJJVFkJCQkweDIxNAorI2RlZmlu
ZSBOV0xfRFNJX0hTWU5DX1BPTEFSSVRZX0FDVElWRV9MT1cJMAorI2RlZmluZSBOV0xfRFNJX0hT
WU5DX1BPTEFSSVRZX0FDVElWRV9ISUdICUJJVCgxKQorCisjZGVmaW5lIE5XTF9EU0lfVklERU9f
TU9ERQkJCTB4MjE4CisjZGVmaW5lIE5XTF9EU0lfSEZQCQkJCTB4MjFjCisjZGVmaW5lIE5XTF9E
U0lfSEJQCQkJCTB4MjIwCisjZGVmaW5lIE5XTF9EU0lfSFNBCQkJCTB4MjI0CisjZGVmaW5lIE5X
TF9EU0lfRU5BQkxFX01VTFRfUEtUUwkJMHgyMjgKKyNkZWZpbmUgTldMX0RTSV9WQlAJCQkJMHgy
MmMKKyNkZWZpbmUgTldMX0RTSV9WRlAJCQkJMHgyMzAKKyNkZWZpbmUgTldMX0RTSV9CTExQX01P
REUJCQkweDIzNAorI2RlZmluZSBOV0xfRFNJX1VTRV9OVUxMX1BLVF9CTExQCQkweDIzOAorI2Rl
ZmluZSBOV0xfRFNJX1ZBQ1RJVkUJCQkJMHgyM2MKKyNkZWZpbmUgTldMX0RTSV9WQwkJCQkweDI0
MAorCisvKiBEU0kgQVBCIFBLVCBjb250cm9sICovCisjZGVmaW5lIE5XTF9EU0lfVFhfUEFZTE9B
RAkJCTB4MjgwCisjZGVmaW5lIE5XTF9EU0lfUEtUX0NPTlRST0wJCQkweDI4NAorI2RlZmluZSBO
V0xfRFNJX1NFTkRfUEFDS0VUCQkJMHgyODgKKyNkZWZpbmUgTldMX0RTSV9QS1RfU1RBVFVTCQkJ
MHgyOGMKKyNkZWZpbmUgTldMX0RTSV9QS1RfRklGT19XUl9MRVZFTAkJMHgyOTAKKyNkZWZpbmUg
TldMX0RTSV9QS1RfRklGT19SRF9MRVZFTAkJMHgyOTQKKyNkZWZpbmUgTldMX0RTSV9SWF9QQVlM
T0FECQkJMHgyOTgKKyNkZWZpbmUgTldMX0RTSV9SWF9QS1RfSEVBREVSCQkJMHgyOWMKKworLyog
RFNJIElSUSBoYW5kbGluZyAqLworI2RlZmluZSBOV0xfRFNJX0lSUV9TVEFUVVMJCQkweDJhMAor
I2RlZmluZSBOV0xfRFNJX1NNX05PVF9JRExFCQkJQklUKDApCisjZGVmaW5lIE5XTF9EU0lfVFhf
UEtUX0RPTkUJCQlCSVQoMSkKKyNkZWZpbmUgTldMX0RTSV9EUEhZX0RJUkVDVElPTgkJCUJJVCgy
KQorI2RlZmluZSBOV0xfRFNJX1RYX0ZJRk9fT1ZGTFcJCQlCSVQoMykKKyNkZWZpbmUgTldMX0RT
SV9UWF9GSUZPX1VERkxXCQkJQklUKDQpCisjZGVmaW5lIE5XTF9EU0lfUlhfRklGT19PVkZMVwkJ
CUJJVCg1KQorI2RlZmluZSBOV0xfRFNJX1JYX0ZJRk9fVURGTFcJCQlCSVQoNikKKyNkZWZpbmUg
TldMX0RTSV9SWF9QS1RfSERSX1JDVkQJCQlCSVQoNykKKyNkZWZpbmUgTldMX0RTSV9SWF9QS1Rf
UEFZTE9BRF9EQVRBX1JDVkQJQklUKDgpCisjZGVmaW5lIE5XTF9EU0lfQlRBX1RJTUVPVVQJCQlC
SVQoMjkpCisjZGVmaW5lIE5XTF9EU0lfTFBfUlhfVElNRU9VVAkJCUJJVCgzMCkKKyNkZWZpbmUg
TldMX0RTSV9IU19UWF9USU1FT1VUCQkJQklUKDMxKQorCisjZGVmaW5lIE5XTF9EU0lfSVJRX1NU
QVRVUzIJCQkweDJhNAorI2RlZmluZSBOV0xfRFNJX1NJTkdMRV9CSVRfRUNDX0VSUgkJQklUKDAp
CisjZGVmaW5lIE5XTF9EU0lfTVVMVElfQklUX0VDQ19FUlIJCUJJVCgxKQorI2RlZmluZSBOV0xf
RFNJX0NSQ19FUlIJCQkJQklUKDIpCisKKyNkZWZpbmUgTldMX0RTSV9JUlFfTUFTSwkJCTB4MmE4
CisjZGVmaW5lIE5XTF9EU0lfU01fTk9UX0lETEVfTUFTSwkJQklUKDApCisjZGVmaW5lIE5XTF9E
U0lfVFhfUEtUX0RPTkVfTUFTSwkJQklUKDEpCisjZGVmaW5lIE5XTF9EU0lfRFBIWV9ESVJFQ1RJ
T05fTUFTSwkJQklUKDIpCisjZGVmaW5lIE5XTF9EU0lfVFhfRklGT19PVkZMV19NQVNLCQlCSVQo
MykKKyNkZWZpbmUgTldMX0RTSV9UWF9GSUZPX1VERkxXX01BU0sJCUJJVCg0KQorI2RlZmluZSBO
V0xfRFNJX1JYX0ZJRk9fT1ZGTFdfTUFTSwkJQklUKDUpCisjZGVmaW5lIE5XTF9EU0lfUlhfRklG
T19VREZMV19NQVNLCQlCSVQoNikKKyNkZWZpbmUgTldMX0RTSV9SWF9QS1RfSERSX1JDVkRfTUFT
SwkJQklUKDcpCisjZGVmaW5lIE5XTF9EU0lfUlhfUEtUX1BBWUxPQURfREFUQV9SQ1ZEX01BU0sJ
QklUKDgpCisjZGVmaW5lIE5XTF9EU0lfQlRBX1RJTUVPVVRfTUFTSwkJQklUKDI5KQorI2RlZmlu
ZSBOV0xfRFNJX0xQX1JYX1RJTUVPVVRfTUFTSwkJQklUKDMwKQorI2RlZmluZSBOV0xfRFNJX0hT
X1RYX1RJTUVPVVRfTUFTSwkJQklUKDMxKQorCisjZGVmaW5lIE5XTF9EU0lfSVJRX01BU0syCQkJ
MHgyYWMKKyNkZWZpbmUgTldMX0RTSV9TSU5HTEVfQklUX0VDQ19FUlJfTUFTSwkJQklUKDApCisj
ZGVmaW5lIE5XTF9EU0lfTVVMVElfQklUX0VDQ19FUlJfTUFTSwkJQklUKDEpCisjZGVmaW5lIE5X
TF9EU0lfQ1JDX0VSUl9NQVNLCQkJQklUKDIpCisKKy8qCisgKiBQS1RfQ09OVFJPTCBmb3JtYXQ6
CisgKiBbMTU6IDBdIC0gd29yZCBjb3VudAorICogWzE3OjE2XSAtIHZpcnR1YWwgY2hhbm5lbAor
ICogWzIzOjE4XSAtIGRhdGEgdHlwZQorICogWzI0XQkgICAtIExQIG9yIEhTIHNlbGVjdCAoMCAt
IExQLCAxIC0gSFMpCisgKiBbMjVdCSAgIC0gcGVyZm9ybSBCVEEgYWZ0ZXIgcGFja2V0IGlzIHNl
bnQKKyAqIFsyNl0JICAgLSBwZXJmb3JtIEJUQSBvbmx5LCBubyBwYWNrZXQgdHgKKyAqLworI2Rl
ZmluZSBOV0xfRFNJX1dDKHgpCQlGSUVMRF9QUkVQKEdFTk1BU0soMTUsIDApLCAoeCkpCisjZGVm
aW5lIE5XTF9EU0lfVFhfVkMoeCkJRklFTERfUFJFUChHRU5NQVNLKDE3LCAxNiksICh4KSkKKyNk
ZWZpbmUgTldMX0RTSV9UWF9EVCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjMsIDE4KSwgKHgpKQor
I2RlZmluZSBOV0xfRFNJX0hTX1NFTCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjQsIDI0KSwgKHgp
KQorI2RlZmluZSBOV0xfRFNJX0JUQV9UWCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjUsIDI1KSwg
KHgpKQorI2RlZmluZSBOV0xfRFNJX0JUQV9OT19UWCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjYs
IDI2KSwgKHgpKQorCisvKgorICogUlhfUEtUX0hFQURFUiBmb3JtYXQ6CisgKiBbMTU6IDBdIC0g
d29yZCBjb3VudAorICogWzIxOjE2XSAtIGRhdGEgdHlwZQorICogWzIzOjIyXSAtIHZpcnR1YWwg
Y2hhbm5lbAorICovCisjZGVmaW5lIE5XTF9EU0lfUlhfRFQoeCkJRklFTERfR0VUKEdFTk1BU0so
MjEsIDE2KSwgKHgpKQorI2RlZmluZSBOV0xfRFNJX1JYX1ZDKHgpCUZJRUxEX0dFVChHRU5NQVNL
KDIzLCAyMiksICh4KSkKKworLyogRFNJIFZpZGVvIG1vZGUgKi8KKyNkZWZpbmUgTldMX0RTSV9W
TV9CVVJTVF9NT0RFX1dJVEhfU1lOQ19QVUxTRVMJCTAKKyNkZWZpbmUgTldMX0RTSV9WTV9OT05f
QlVSU1RfTU9ERV9XSVRIX1NZTkNfRVZFTlRTCUJJVCgwKQorI2RlZmluZSBOV0xfRFNJX1ZNX0JV
UlNUX01PREUJCQkJQklUKDEpCisKKy8qICogRFBJIGNvbG9yIGNvZGluZyAqLworI2RlZmluZSBO
V0xfRFNJX0RQSV8xNl9CSVRfNTY1X1BBQ0tFRAkwCisjZGVmaW5lIE5XTF9EU0lfRFBJXzE2X0JJ
VF81NjVfQUxJR05FRAkxCisjZGVmaW5lIE5XTF9EU0lfRFBJXzE2X0JJVF81NjVfU0hJRlRFRAky
CisjZGVmaW5lIE5XTF9EU0lfRFBJXzE4X0JJVF9QQUNLRUQJMworI2RlZmluZSBOV0xfRFNJX0RQ
SV8xOF9CSVRfQUxJR05FRAk0CisjZGVmaW5lIE5XTF9EU0lfRFBJXzI0X0JJVAkJNQorCisvKiAq
IERQSSBQaXhlbCBmb3JtYXQgKi8KKyNkZWZpbmUgTldMX0RTSV9QSVhFTF9GT1JNQVRfMTYgIDAK
KyNkZWZpbmUgTldMX0RTSV9QSVhFTF9GT1JNQVRfMTggIEJJVCgwKQorI2RlZmluZSBOV0xfRFNJ
X1BJWEVMX0ZPUk1BVF8xOEwgQklUKDEpCisjZGVmaW5lIE5XTF9EU0lfUElYRUxfRk9STUFUXzI0
ICAoQklUKDApIHwgQklUKDEpKQorCisjZW5kaWYgLyogX19OV0xfRFNJX0hfXyAqLwotLSAKMi4y
My4wLnJjMQoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
