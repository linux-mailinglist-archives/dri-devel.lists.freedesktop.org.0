Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4013C5B139
	for <lists+dri-devel@lfdr.de>; Sun, 30 Jun 2019 20:27:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5011789D4A;
	Sun, 30 Jun 2019 18:26:16 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8C4866E95B;
 Fri, 28 Jun 2019 16:08:18 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: andrzej.p) with ESMTPSA id 59BCF28957D
From: Andrzej Pietrasiewicz <andrzej.p@collabora.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v3 22/22] drm/radeon: Provide ddc symlink in connector sysfs
 directory
Date: Fri, 28 Jun 2019 18:01:36 +0200
Message-Id: <dd1312ee84adef0161ebeaaf3c0448b1a1371919.1561735433.git.andrzej.p@collabora.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <cover.1561735433.git.andrzej.p@collabora.com>
References: <3fb19371-db7d-f9dc-31a7-1ccd126f6784@collabora.com>
 <cover.1561735433.git.andrzej.p@collabora.com>
In-Reply-To: <cover.1561735433.git.andrzej.p@collabora.com>
References: <cover.1561735433.git.andrzej.p@collabora.com>
X-Mailman-Approved-At: Sun, 30 Jun 2019 18:26:11 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Sam Ravnborg <sam@ravnborg.org>, Neil Armstrong <narmstrong@baylibre.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>,
 Douglas Anderson <dianders@chromium.org>,
 Thierry Reding <thierry.reding@gmail.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>, kernel@collabora.com,
 linux-samsung-soc@vger.kernel.org, linux-rockchip@lists.infradead.org,
 Vincent Abriou <vincent.abriou@st.com>, Krzysztof Kozlowski <krzk@kernel.org>,
 Jonathan Hunter <jonathanh@nvidia.com>, David Airlie <airlied@linux.ie>,
 Chen-Yu Tsai <wens@csie.org>, Kukjin Kim <kgene@kernel.org>,
 NXP Linux Team <linux-imx@nxp.com>, Dave Airlie <airlied@redhat.com>,
 freedreno@lists.freedesktop.org, linux-tegra@vger.kernel.org,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 Jonas Karlman <jonas@kwiboo.se>, linux-arm-msm@vger.kernel.org,
 Jyri Sarha <jsarha@ti.com>, Mamta Shukla <mamtashukla555@gmail.com>,
 linux-mediatek@lists.infradead.org, Rodrigo Vivi <rodrigo.vivi@intel.com>,
 Matthias Brugger <matthias.bgg@gmail.com>,
 Thomas Gleixner <tglx@linutronix.de>, Sean Paul <sean@poorly.run>,
 linux-arm-kernel@lists.infradead.org, amd-gfx@lists.freedesktop.org,
 Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Thomas Zimmermann <tzimmermann@suse.de>,
 Seung-Woo Kim <sw0312.kim@samsung.com>, linux-kernel@vger.kernel.org,
 Todor Tomov <todor.tomov@linaro.org>,
 Kyungmin Park <kyungmin.park@samsung.com>, Huang Rui <ray.huang@amd.com>,
 Alex Deucher <alexander.deucher@amd.com>, Shawn Guo <shawnguo@kernel.org>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Gerd Hoffmann <kraxel@redhat.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VXNlIHRoZSBkZGMgcG9pbnRlciBwcm92aWRlZCBieSB0aGUgZ2VuZXJpYyBjb25uZWN0b3IuCgpT
aWduZWQtb2ZmLWJ5OiBBbmRyemVqIFBpZXRyYXNpZXdpY3ogPGFuZHJ6ZWoucEBjb2xsYWJvcmEu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2Nvbm5lY3RvcnMuYyB8IDgy
ICsrKysrKysrKysrKysrKysrLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA2MyBpbnNlcnRpb25zKCsp
LCAxOSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3Jh
ZGVvbl9jb25uZWN0b3JzLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9jb25uZWN0
b3JzLmMKaW5kZXggYzYwZDFhNDRkMjJhLi5hODc2ZTUxZDI3NWEgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2Nvbm5lY3RvcnMuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vcmFkZW9uL3JhZGVvbl9jb25uZWN0b3JzLmMKQEAgLTE5NDYsMTEgKzE5NDYsMTUgQEAgcmFk
ZW9uX2FkZF9hdG9tX2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQlyYWRlb25f
ZGlnX2Nvbm5lY3Rvci0+aWdwX2xhbmVfaW5mbyA9IGlncF9sYW5lX2luZm87CiAJCXJhZGVvbl9j
b25uZWN0b3ItPmNvbl9wcml2ID0gcmFkZW9uX2RpZ19jb25uZWN0b3I7CiAJCWlmIChpMmNfYnVz
LT52YWxpZCkgewotCQkJcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cyA9IHJhZGVvbl9pMmNfbG9v
a3VwKHJkZXYsIGkyY19idXMpOwotCQkJaWYgKHJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMpCisJ
CQlzdHJ1Y3QgcmFkZW9uX2Nvbm5lY3RvciAqcmNuID0gcmFkZW9uX2Nvbm5lY3RvcjsKKworCQkJ
cmNuLT5kZGNfYnVzID0gcmFkZW9uX2kyY19sb29rdXAocmRldiwgaTJjX2J1cyk7CisJCQlpZiAo
cmNuLT5kZGNfYnVzKSB7CiAJCQkJaGFzX2F1eCA9IHRydWU7Ci0JCQllbHNlCisJCQkJY29ubmVj
dG9yLT5kZGMgPSAmcmNuLT5kZGNfYnVzLT5hZGFwdGVyOworCQkJfSBlbHNlIHsKIAkJCQlEUk1f
RVJST1IoIkRQOiBGYWlsZWQgdG8gYXNzaWduIGRkYyBidXMhIENoZWNrIGRtZXNnIGZvciBpMmMg
ZXJyb3JzLlxuIik7CisJCQl9CiAJCX0KIAkJc3dpdGNoIChjb25uZWN0b3JfdHlwZSkgewogCQlj
YXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9WR0E6CkBAIC0yMDQ1LDkgKzIwNDksMTMgQEAgcmFkZW9u
X2FkZF9hdG9tX2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJZHJtX2Nvbm5l
Y3Rvcl9pbml0KGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fdmdhX2Nvbm5l
Y3Rvcl9mdW5jcywgY29ubmVjdG9yX3R5cGUpOwogCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRk
KCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX3ZnYV9jb25uZWN0b3JfaGVscGVyX2Z1
bmNzKTsKIAkJCWlmIChpMmNfYnVzLT52YWxpZCkgewotCQkJCXJhZGVvbl9jb25uZWN0b3ItPmRk
Y19idXMgPSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVzKTsKLQkJCQlpZiAoIXJhZGVv
bl9jb25uZWN0b3ItPmRkY19idXMpCisJCQkJc3RydWN0IHJhZGVvbl9jb25uZWN0b3IgKnJjbiA9
IHJhZGVvbl9jb25uZWN0b3I7CisKKwkJCQlyY24tPmRkY19idXMgPSByYWRlb25faTJjX2xvb2t1
cChyZGV2LCBpMmNfYnVzKTsKKwkJCQlpZiAoIXJjbi0+ZGRjX2J1cykKIAkJCQkJRFJNX0VSUk9S
KCJWR0E6IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sgZG1lc2cgZm9yIGkyYyBlcnJv
cnMuXG4iKTsKKwkJCQllbHNlCisJCQkJCWNvbm5lY3Rvci0+ZGRjID0gJnJjbi0+ZGRjX2J1cy0+
YWRhcHRlcjsKIAkJCX0KIAkJCXJhZGVvbl9jb25uZWN0b3ItPmRhY19sb2FkX2RldGVjdCA9IHRy
dWU7CiAJCQlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFz
ZS5iYXNlLApAQCAtMjA3MCw5ICsyMDc4LDEzIEBAIHJhZGVvbl9hZGRfYXRvbV9jb25uZWN0b3Io
c3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJCWRybV9jb25uZWN0b3JfaW5pdChkZXYsICZyYWRl
b25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX3ZnYV9jb25uZWN0b3JfZnVuY3MsIGNvbm5lY3Rv
cl90eXBlKTsKIAkJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+
YmFzZSwgJnJhZGVvbl92Z2FfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlpZiAoaTJjX2J1
cy0+dmFsaWQpIHsKLQkJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9uX2kyY19s
b29rdXAocmRldiwgaTJjX2J1cyk7Ci0JCQkJaWYgKCFyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVz
KQorCQkJCXN0cnVjdCByYWRlb25fY29ubmVjdG9yICpyY24gPSByYWRlb25fY29ubmVjdG9yOwor
CisJCQkJcmNuLT5kZGNfYnVzID0gcmFkZW9uX2kyY19sb29rdXAocmRldiwgaTJjX2J1cyk7CisJ
CQkJaWYgKCFyY24tPmRkY19idXMpCiAJCQkJCURSTV9FUlJPUigiRFZJQTogRmFpbGVkIHRvIGFz
c2lnbiBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJCWVsc2UK
KwkJCQkJY29ubmVjdG9yLT5kZGMgPSAmcmNuLT5kZGNfYnVzLT5hZGFwdGVyOwogCQkJfQogCQkJ
cmFkZW9uX2Nvbm5lY3Rvci0+ZGFjX2xvYWRfZGV0ZWN0ID0gdHJ1ZTsKIAkJCWRybV9vYmplY3Rf
YXR0YWNoX3Byb3BlcnR5KCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLmJhc2UsCkBAIC0yMTAxLDkg
KzIxMTMsMTMgQEAgcmFkZW9uX2FkZF9hdG9tX2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LAogCQkJZHJtX2Nvbm5lY3Rvcl9pbml0KGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2Us
ICZyYWRlb25fZHZpX2Nvbm5lY3Rvcl9mdW5jcywgY29ubmVjdG9yX3R5cGUpOwogCQkJZHJtX2Nv
bm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2R2aV9j
b25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJCWlmIChpMmNfYnVzLT52YWxpZCkgewotCQkJCXJh
ZGVvbl9jb25uZWN0b3ItPmRkY19idXMgPSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVz
KTsKLQkJCQlpZiAoIXJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMpCisJCQkJc3RydWN0IHJhZGVv
bl9jb25uZWN0b3IgKnJjbiA9IHJhZGVvbl9jb25uZWN0b3I7CisKKwkJCQlyY24tPmRkY19idXMg
PSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVzKTsKKwkJCQlpZiAoIXJjbi0+ZGRjX2J1
cykKIAkJCQkJRFJNX0VSUk9SKCJEVkk6IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sg
ZG1lc2cgZm9yIGkyYyBlcnJvcnMuXG4iKTsKKwkJCQllbHNlCisJCQkJCWNvbm5lY3Rvci0+ZGRj
ID0gJnJjbi0+ZGRjX2J1cy0+YWRhcHRlcjsKIAkJCX0KIAkJCXN1YnBpeGVsX29yZGVyID0gU3Vi
UGl4ZWxIb3Jpem9udGFsUkdCOwogCQkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHkoJnJhZGVv
bl9jb25uZWN0b3ItPmJhc2UuYmFzZSwKQEAgLTIxNTgsOSArMjE3NCwxMyBAQCByYWRlb25fYWRk
X2F0b21fY29ubmVjdG9yKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJCQlkcm1fY29ubmVjdG9y
X2luaXQoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9kdmlfY29ubmVjdG9y
X2Z1bmNzLCBjb25uZWN0b3JfdHlwZSk7CiAJCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJh
ZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fZHZpX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3Mp
OwogCQkJaWYgKGkyY19idXMtPnZhbGlkKSB7Ci0JCQkJcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1
cyA9IHJhZGVvbl9pMmNfbG9va3VwKHJkZXYsIGkyY19idXMpOwotCQkJCWlmICghcmFkZW9uX2Nv
bm5lY3Rvci0+ZGRjX2J1cykKKwkJCQlzdHJ1Y3QgcmFkZW9uX2Nvbm5lY3RvciAqcmNuID0gcmFk
ZW9uX2Nvbm5lY3RvcjsKKworCQkJCXJjbi0+ZGRjX2J1cyA9IHJhZGVvbl9pMmNfbG9va3VwKHJk
ZXYsIGkyY19idXMpOworCQkJCWlmICghcmNuLT5kZGNfYnVzKQogCQkJCQlEUk1fRVJST1IoIkhE
TUk6IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sgZG1lc2cgZm9yIGkyYyBlcnJvcnMu
XG4iKTsKKwkJCQllbHNlCisJCQkJCWNvbm5lY3Rvci0+ZGRjID0gJnJjbi0+ZGRjX2J1cy0+YWRh
cHRlcjsKIAkJCX0KIAkJCWRybV9vYmplY3RfYXR0YWNoX3Byb3BlcnR5KCZyYWRlb25fY29ubmVj
dG9yLT5iYXNlLmJhc2UsCiAJCQkJCQkgICAgICByZGV2LT5tb2RlX2luZm8uY29oZXJlbnRfbW9k
ZV9wcm9wZXJ0eSwKQEAgLTIyMDgsMTEgKzIyMjgsMTUgQEAgcmFkZW9uX2FkZF9hdG9tX2Nvbm5l
Y3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJZHJtX2Nvbm5lY3Rvcl9pbml0KGRldiwg
JnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fZHBfY29ubmVjdG9yX2Z1bmNzLCBjb25u
ZWN0b3JfdHlwZSk7CiAJCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25uZWN0
b3ItPmJhc2UsICZyYWRlb25fZHBfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlpZiAoaTJj
X2J1cy0+dmFsaWQpIHsKLQkJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9uX2ky
Y19sb29rdXAocmRldiwgaTJjX2J1cyk7Ci0JCQkJaWYgKHJhZGVvbl9jb25uZWN0b3ItPmRkY19i
dXMpCisJCQkJc3RydWN0IHJhZGVvbl9jb25uZWN0b3IgKnJjbiA9IHJhZGVvbl9jb25uZWN0b3I7
CisKKwkJCQlyY24tPmRkY19idXMgPSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVzKTsK
KwkJCQlpZiAocmNuLT5kZGNfYnVzKSB7CiAJCQkJCWhhc19hdXggPSB0cnVlOwotCQkJCWVsc2UK
KwkJCQkJY29ubmVjdG9yLT5kZGMgPSAmcmNuLT5kZGNfYnVzLT5hZGFwdGVyOworCQkJCX0gZWxz
ZSB7CiAJCQkJCURSTV9FUlJPUigiRFA6IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sg
ZG1lc2cgZm9yIGkyYyBlcnJvcnMuXG4iKTsKKwkJCQl9CiAJCQl9CiAJCQlzdWJwaXhlbF9vcmRl
ciA9IFN1YlBpeGVsSG9yaXpvbnRhbFJHQjsKIAkJCWRybV9vYmplY3RfYXR0YWNoX3Byb3BlcnR5
KCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLmJhc2UsCkBAIC0yMjU4LDExICsyMjgyLDE1IEBAIHJh
ZGVvbl9hZGRfYXRvbV9jb25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJCWRybV9j
b25uZWN0b3JfaW5pdChkZXYsICZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2VkcF9j
b25uZWN0b3JfZnVuY3MsIGNvbm5lY3Rvcl90eXBlKTsKIAkJCWRybV9jb25uZWN0b3JfaGVscGVy
X2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9kcF9jb25uZWN0b3JfaGVscGVy
X2Z1bmNzKTsKIAkJCWlmIChpMmNfYnVzLT52YWxpZCkgewotCQkJCXJhZGVvbl9jb25uZWN0b3It
PmRkY19idXMgPSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVzKTsKLQkJCQlpZiAocmFk
ZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cykKKwkJCQlzdHJ1Y3QgcmFkZW9uX2Nvbm5lY3RvciAqcmNu
ID0gcmFkZW9uX2Nvbm5lY3RvcjsKKworCQkJCXJjbi0+ZGRjX2J1cyA9IHJhZGVvbl9pMmNfbG9v
a3VwKHJkZXYsIGkyY19idXMpOworCQkJCWlmIChyY24tPmRkY19idXMpIHsKIAkJCQkJaGFzX2F1
eCA9IHRydWU7Ci0JCQkJZWxzZQorCQkJCQljb25uZWN0b3ItPmRkYyA9ICZyY24tPmRkY19idXMt
PmFkYXB0ZXI7CisJCQkJfSBlbHNlIHsKIAkJCQkJRFJNX0VSUk9SKCJEUDogRmFpbGVkIHRvIGFz
c2lnbiBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJCX0KIAkJ
CX0KIAkJCWRybV9vYmplY3RfYXR0YWNoX3Byb3BlcnR5KCZyYWRlb25fY29ubmVjdG9yLT5iYXNl
LmJhc2UsCiAJCQkJCQkgICAgICBkZXYtPm1vZGVfY29uZmlnLnNjYWxpbmdfbW9kZV9wcm9wZXJ0
eSwKQEAgLTIyOTcsOSArMjMyNSwxMyBAQCByYWRlb25fYWRkX2F0b21fY29ubmVjdG9yKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsCiAJCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2LCAmcmFkZW9uX2Nv
bm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9sdmRzX2Nvbm5lY3Rvcl9mdW5jcywgY29ubmVjdG9yX3R5
cGUpOwogCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNl
LCAmcmFkZW9uX2x2ZHNfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlpZiAoaTJjX2J1cy0+
dmFsaWQpIHsKLQkJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9uX2kyY19sb29r
dXAocmRldiwgaTJjX2J1cyk7Ci0JCQkJaWYgKCFyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzKQor
CQkJCXN0cnVjdCByYWRlb25fY29ubmVjdG9yICpyY24gPSByYWRlb25fY29ubmVjdG9yOworCisJ
CQkJcmNuLT5kZGNfYnVzID0gcmFkZW9uX2kyY19sb29rdXAocmRldiwgaTJjX2J1cyk7CisJCQkJ
aWYgKCFyY24tPmRkY19idXMpCiAJCQkJCURSTV9FUlJPUigiTFZEUzogRmFpbGVkIHRvIGFzc2ln
biBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJCWVsc2UKKwkJ
CQkJY29ubmVjdG9yLT5kZGMgPSAmcmNuLT5kZGNfYnVzLT5hZGFwdGVyOwogCQkJfQogCQkJZHJt
X29iamVjdF9hdHRhY2hfcHJvcGVydHkoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UuYmFzZSwKIAkJ
CQkJCSAgICAgIGRldi0+bW9kZV9jb25maWcuc2NhbGluZ19tb2RlX3Byb3BlcnR5LApAQCAtMjM4
NCw2ICsyNDE2LDkgQEAgcmFkZW9uX2FkZF9sZWdhY3lfY29ubmVjdG9yKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsCiAJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9uX2kyY19sb29r
dXAocmRldiwgaTJjX2J1cyk7CiAJCQlpZiAoIXJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMpCiAJ
CQkJRFJNX0VSUk9SKCJWR0E6IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sgZG1lc2cg
Zm9yIGkyYyBlcnJvcnMuXG4iKTsKKwkJCWVsc2UKKwkJCQljb25uZWN0b3ItPmRkYyA9CisJCQkJ
CSZyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzLT5hZGFwdGVyOwogCQl9CiAJCXJhZGVvbl9jb25u
ZWN0b3ItPmRhY19sb2FkX2RldGVjdCA9IHRydWU7CiAJCWRybV9vYmplY3RfYXR0YWNoX3Byb3Bl
cnR5KCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLmJhc2UsCkBAIC0yNDAxLDYgKzI0MzYsOSBAQCBy
YWRlb25fYWRkX2xlZ2FjeV9jb25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJCXJh
ZGVvbl9jb25uZWN0b3ItPmRkY19idXMgPSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVz
KTsKIAkJCWlmICghcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cykKIAkJCQlEUk1fRVJST1IoIkRW
SUE6IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sgZG1lc2cgZm9yIGkyYyBlcnJvcnMu
XG4iKTsKKwkJCWVsc2UKKwkJCQljb25uZWN0b3ItPmRkYyA9CisJCQkJCSZyYWRlb25fY29ubmVj
dG9yLT5kZGNfYnVzLT5hZGFwdGVyOwogCQl9CiAJCXJhZGVvbl9jb25uZWN0b3ItPmRhY19sb2Fk
X2RldGVjdCA9IHRydWU7CiAJCWRybV9vYmplY3RfYXR0YWNoX3Byb3BlcnR5KCZyYWRlb25fY29u
bmVjdG9yLT5iYXNlLmJhc2UsCkBAIC0yNDE5LDYgKzI0NTcsOSBAQCByYWRlb25fYWRkX2xlZ2Fj
eV9jb25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJCXJhZGVvbl9jb25uZWN0b3It
PmRkY19idXMgPSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVzKTsKIAkJCWlmICghcmFk
ZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cykKIAkJCQlEUk1fRVJST1IoIkRWSTogRmFpbGVkIHRvIGFz
c2lnbiBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJZWxzZQor
CQkJCWNvbm5lY3Rvci0+ZGRjID0KKwkJCQkJJnJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMtPmFk
YXB0ZXI7CiAJCX0KIAkJaWYgKGNvbm5lY3Rvcl90eXBlID09IERSTV9NT0RFX0NPTk5FQ1RPUl9E
VklJKSB7CiAJCQlyYWRlb25fY29ubmVjdG9yLT5kYWNfbG9hZF9kZXRlY3QgPSB0cnVlOwpAQCAt
MjQ2NCw2ICsyNTA1LDkgQEAgcmFkZW9uX2FkZF9sZWdhY3lfY29ubmVjdG9yKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsCiAJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9uX2kyY19s
b29rdXAocmRldiwgaTJjX2J1cyk7CiAJCQlpZiAoIXJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMp
CiAJCQkJRFJNX0VSUk9SKCJMVkRTOiBGYWlsZWQgdG8gYXNzaWduIGRkYyBidXMhIENoZWNrIGRt
ZXNnIGZvciBpMmMgZXJyb3JzLlxuIik7CisJCQllbHNlCisJCQkJY29ubmVjdG9yLT5kZGMgPQor
CQkJCQkmcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cy0+YWRhcHRlcjsKIAkJfQogCQlkcm1fb2Jq
ZWN0X2F0dGFjaF9wcm9wZXJ0eSgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZS5iYXNlLAogCQkJCQkg
ICAgICBkZXYtPm1vZGVfY29uZmlnLnNjYWxpbmdfbW9kZV9wcm9wZXJ0eSwKLS0gCjIuMTcuMQoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVs
IG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
