Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 782C29E1BD
	for <lists+dri-devel@lfdr.de>; Tue, 27 Aug 2019 10:14:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8B2C2890E5;
	Tue, 27 Aug 2019 08:14:46 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x342.google.com (mail-wm1-x342.google.com
 [IPv6:2a00:1450:4864:20::342])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 13D8C890AA
 for <dri-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 08:14:36 +0000 (UTC)
Received: by mail-wm1-x342.google.com with SMTP id o4so2066291wmh.2
 for <dri-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 01:14:36 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=AHSCP8eF6R66zBKuoLdUdIg9WzlUKOlPH86Fd6tbhWo=;
 b=nCNuQ1k/niE4VbFypzZ98IYMmusz57SkmtskB+SpyweNOzswyFqMeyKcPiumAxX+qL
 DzXBnH5MtP48sVowfmAd2THrnScmkaPrZqloBSzA/s23JlG2fBw14yuJOL7sYpNO0sTQ
 AY6EdW0L7xkz1Zh69A3auun71ydwFbgmDUAXtja5VHW6BFHBUVKzROkanBa7ca65IilK
 OUyitX5HjslC1nvZmCe956R3Tul7pbX4qoPllZ/jWDXgUCRYwmy8wzKJ8SFIa3R+ij78
 ldLq5mGgYTCWTY60H8U58y99Uf/KW2o6TgJKEWDWWcrY6hErj36cBY4dnGdHcfbFM8Km
 MQhQ==
X-Gm-Message-State: APjAAAU3wpWlw8at91qQREtWo7SNk5Hf/ifRKf04AmONkc0N07h4AMc1
 KvjtYAbplbfYPqph9Ktm84LQfA==
X-Google-Smtp-Source: APXvYqyczMkD3BCWCKbqBKK2Epk+8BKX1eKSbZkdVuqz7gSEUlx6nyzrmOicXiNWRsP4gnuS1RSAcw==
X-Received: by 2002:a05:600c:389:: with SMTP id
 w9mr26156481wmd.119.1566893674449; 
 Tue, 27 Aug 2019 01:14:34 -0700 (PDT)
Received: from bender.baylibre.local
 (lmontsouris-657-1-212-31.w90-63.abo.wanadoo.fr. [90.63.244.31])
 by smtp.gmail.com with ESMTPSA id f18sm11911792wrx.85.2019.08.27.01.14.33
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 27 Aug 2019 01:14:33 -0700 (PDT)
From: Neil Armstrong <narmstrong@baylibre.com>
To: a.hajda@samsung.com, Laurent.pinchart@ideasonboard.com, jonas@kwiboo.se,
 jernej.skrabec@siol.net, boris.brezillon@collabora.com
Subject: [PATCH RFC v2 7/8] drm/meson: vclk: add support for YUV420 setup
Date: Tue, 27 Aug 2019 10:14:24 +0200
Message-Id: <20190827081425.15011-8-narmstrong@baylibre.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190827081425.15011-1-narmstrong@baylibre.com>
References: <20190827081425.15011-1-narmstrong@baylibre.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=baylibre-com.20150623.gappssmtp.com; s=20150623;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=AHSCP8eF6R66zBKuoLdUdIg9WzlUKOlPH86Fd6tbhWo=;
 b=dKf+hYqW55ms2Fszjnk+WqnXaINcywJjgX6BKG6QUkaklf7//doHDj75pZ/1HsTgj6
 n7MEZf/VNHTv/IswknNw1al/HnBrMNX+NpEKMTn91vdli4zfnnB7V73bIL69Nf/NV/PF
 /138gumu+DGgweyinkT0YjsPYqfV02VEJIpKFvL2jl8bIPjXMijcMjJhUtLJJs7/DABU
 vtkP87S4tmgmzMPx/oSGhgsWNbL8FnwwBaWT70KUl3+R5f+6EFyBOuS6vWtoOIyR6VX/
 aQfUuqrOsQ0mHERnSL5xGa46GAxjAJL2mHf1h1YuBlDQwrBBkmmtysr3mU7Xkr9bPi6q
 vwYw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-amlogic@lists.infradead.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, Neil Armstrong <narmstrong@baylibre.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBhZGRzIGNsb2NraW5nIHN1cHBvcnQgZm9yIHRoZSBZVVY0MjAgb3V0cHV0IGZy
b20gdGhlCkFtbG9naWMgTWVzb24gU29DcyBWaWRlbyBQcm9jZXNzaW5nIFVuaXQgdG8gdGhlIEhE
TUkgQ29udHJvbGxlci4KClRoZSBZVVY0MjAgaXMgb2J0YWluZWQgYnkgZ2VuZXJhdGluZyBhIFlV
VjQ0NCBwaXhlbCBzdHJlYW0gbGlrZQp0aGUgY2xhc3NpYyBIRE1JIGRpc3BsYXkgbW9kZXMsIGJ1
dCB0aGVuIHRoZSBWaWRlbyBFbmNvZGVyIG91dHB1dApjYW4gYmUgY29uZmlndXJlZCB0byBkb3du
LXNhbXBsZSB0aGUgWVVWNDQ0IHBpeGVsIHN0cmVhbSB0byBhIFlVVjQyMApzdHJlYW0uCgpUaGlz
IG1vZGUgbmVlZHMgYSBkaWZmZXJlbnQgY2xvY2sgZ2VuZXJhdGlvbiBzY2hlbWUgc2luY2UgdGhl
IFRNRFMgUEhZCmNsb2NrIG11c3QgbWF0Y2ggdGhlIDEweCByYXRpbyB3aXRoIHRoZSBZVVY0MjAg
cGl4ZWwgY2xvY2ssIGJ1dAp0aGUgdmlkZW8gZW5jb2RlciBtdXN0IHJ1biBhdCAyeCB0aGUgcGl4
ZWwgY2xvY2suCgpUaGlzIHBhdGNoIGFkZHMgdGhlIFRNRFMgUEhZIGNsb2NrIHZhbHVlIGluIGFs
bCB0aGUgdmlkZW8gY2xvY2sgc2V0dXAKaW4gb3JkZXIgdG8gYmV0dGVyIHN1cHBvcnQgdGhlc2Ug
c3BlY2lmaWMgdXNlcyBjYXNlcyBhbmQgc3dpdGNoCnRvIHRoZSBDb21tb24gQ2xvY2sgZnJhbWV3
b3JrIGZvciBjbG9ja3MgaGFuZGxpbmcgaW4gdGhlIGZ1dHVyZS4KClNpZ25lZC1vZmYtYnk6IE5l
aWwgQXJtc3Ryb25nIDxuYXJtc3Ryb25nQGJheWxpYnJlLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9k
cm0vbWVzb24vbWVzb25fZHdfaGRtaS5jICAgfCAyNCArKysrLS0tCiBkcml2ZXJzL2dwdS9kcm0v
bWVzb24vbWVzb25fdmNsay5jICAgICAgfCA5MyArKysrKysrKysrKysrKysrKysrLS0tLS0tCiBk
cml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fdmNsay5oICAgICAgfCAgNyArLQogZHJpdmVycy9n
cHUvZHJtL21lc29uL21lc29uX3ZlbmNfY3Zicy5jIHwgIDMgKy0KIDQgZmlsZXMgY2hhbmdlZCwg
OTMgaW5zZXJ0aW9ucygrKSwgMzQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL21lc29uL21lc29uX2R3X2hkbWkuYyBiL2RyaXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNv
bl9kd19oZG1pLmMKaW5kZXggMmM2OTAyNGU1YmNmLi4zODMxNmM2Y2FjMjYgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl9kd19oZG1pLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL21lc29uL21lc29uX2R3X2hkbWkuYwpAQCAtMzcyLDE1ICszNzIsMTkgQEAgc3RhdGljIHZv
aWQgZHdfaGRtaV9zZXRfdmNsayhzdHJ1Y3QgbWVzb25fZHdfaGRtaSAqZHdfaGRtaSwKIHsKIAlz
dHJ1Y3QgbWVzb25fZHJtICpwcml2ID0gZHdfaGRtaS0+cHJpdjsKIAlpbnQgdmljID0gZHJtX21h
dGNoX2NlYV9tb2RlKG1vZGUpOworCXVuc2lnbmVkIGludCBwaHlfZnJlcTsKIAl1bnNpZ25lZCBp
bnQgdmNsa19mcmVxOwogCXVuc2lnbmVkIGludCB2ZW5jX2ZyZXE7CiAJdW5zaWduZWQgaW50IGhk
bWlfZnJlcTsKIAogCXZjbGtfZnJlcSA9IG1vZGUtPmNsb2NrOwogCisJLyogVE1EUyBjbG9jayBp
cyBwaXhlbF9jbG9jayAqIDEwICovCisJcGh5X2ZyZXEgPSB2Y2xrX2ZyZXEgKiAxMDsKKwogCWlm
ICghdmljKSB7Ci0JCW1lc29uX3ZjbGtfc2V0dXAocHJpdiwgTUVTT05fVkNMS19UQVJHRVRfRE1U
LCB2Y2xrX2ZyZXEsCi0JCQkJIHZjbGtfZnJlcSwgdmNsa19mcmVxLCBmYWxzZSk7CisJCW1lc29u
X3ZjbGtfc2V0dXAocHJpdiwgTUVTT05fVkNMS19UQVJHRVRfRE1ULCBwaHlfZnJlcSwKKwkJCQkg
dmNsa19mcmVxLCB2Y2xrX2ZyZXEsIHZjbGtfZnJlcSwgZmFsc2UpOwogCQlyZXR1cm47CiAJfQog
CkBAIC0zOTgsMTEgKzQwMiwxMSBAQCBzdGF0aWMgdm9pZCBkd19oZG1pX3NldF92Y2xrKHN0cnVj
dCBtZXNvbl9kd19oZG1pICpkd19oZG1pLAogCWlmIChtb2RlLT5mbGFncyAmIERSTV9NT0RFX0ZM
QUdfREJMQ0xLKQogCQl2ZW5jX2ZyZXEgLz0gMjsKIAotCURSTV9ERUJVR19EUklWRVIoInZjbGs6
JWQgdmVuYz0lZCBoZG1pPSVkIGVuY2k9JWRcbiIsCi0JCXZjbGtfZnJlcSwgdmVuY19mcmVxLCBo
ZG1pX2ZyZXEsCisJRFJNX0RFQlVHX0RSSVZFUigidmNsazolZCBwaHk9JWQgdmVuYz0lZCBoZG1p
PSVkIGVuY2k9JWRcbiIsCisJCXBoeV9mcmVxLCB2Y2xrX2ZyZXEsIHZlbmNfZnJlcSwgaGRtaV9m
cmVxLAogCQlwcml2LT52ZW5jLmhkbWlfdXNlX2VuY2kpOwogCi0JbWVzb25fdmNsa19zZXR1cChw
cml2LCBNRVNPTl9WQ0xLX1RBUkdFVF9IRE1JLCB2Y2xrX2ZyZXEsCisJbWVzb25fdmNsa19zZXR1
cChwcml2LCBNRVNPTl9WQ0xLX1RBUkdFVF9IRE1JLCBwaHlfZnJlcSwgdmNsa19mcmVxLAogCQkJ
IHZlbmNfZnJlcSwgaGRtaV9mcmVxLCBwcml2LT52ZW5jLmhkbWlfdXNlX2VuY2kpOwogfQogCkBA
IC02MTMsNiArNjE3LDcgQEAgZHdfaGRtaV9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fY29ubmVjdG9y
ICpjb25uZWN0b3IsCiAJCSAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKQog
ewogCXN0cnVjdCBtZXNvbl9kcm0gKnByaXYgPSBjb25uZWN0b3ItPmRldi0+ZGV2X3ByaXZhdGU7
CisJdW5zaWduZWQgaW50IHBoeV9mcmVxOwogCXVuc2lnbmVkIGludCB2Y2xrX2ZyZXE7CiAJdW5z
aWduZWQgaW50IHZlbmNfZnJlcTsKIAl1bnNpZ25lZCBpbnQgaGRtaV9mcmVxOwpAQCAtNjM5LDYg
KzY0NCw5IEBAIGR3X2hkbWlfbW9kZV92YWxpZChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVj
dG9yLAogCiAJdmNsa19mcmVxID0gbW9kZS0+Y2xvY2s7CiAKKwkvKiBUTURTIGNsb2NrIGlzIHBp
eGVsX2Nsb2NrICogMTAgKi8KKwlwaHlfZnJlcSA9IHZjbGtfZnJlcSAqIDEwOworCiAJLyogNDgw
aS81NzZpIG5lZWRzIGdsb2JhbCBwaXhlbCBkb3VibGluZyAqLwogCWlmIChtb2RlLT5mbGFncyAm
IERSTV9NT0RFX0ZMQUdfREJMQ0xLKQogCQl2Y2xrX2ZyZXEgKj0gMjsKQEAgLTY1NSwxMCArNjYz
LDEwIEBAIGR3X2hkbWlfbW9kZV92YWxpZChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9y
LAogCWlmIChtb2RlLT5mbGFncyAmIERSTV9NT0RFX0ZMQUdfREJMQ0xLKQogCQl2ZW5jX2ZyZXEg
Lz0gMjsKIAotCWRldl9kYmcoY29ubmVjdG9yLT5kZXYtPmRldiwgIiVzOiB2Y2xrOiVkIHZlbmM9
JWQgaGRtaT0lZFxuIiwgX19mdW5jX18sCi0JCXZjbGtfZnJlcSwgdmVuY19mcmVxLCBoZG1pX2Zy
ZXEpOworCWRldl9kYmcoY29ubmVjdG9yLT5kZXYtPmRldiwgIiVzOiB2Y2xrOiVkIHBoeT0lZCB2
ZW5jPSVkIGhkbWk9JWRcbiIsCisJCV9fZnVuY19fLCBwaHlfZnJlcSwgdmNsa19mcmVxLCB2ZW5j
X2ZyZXEsIGhkbWlfZnJlcSk7CiAKLQlyZXR1cm4gbWVzb25fdmNsa192aWNfc3VwcG9ydGVkX2Zy
ZXEodmNsa19mcmVxKTsKKwlyZXR1cm4gbWVzb25fdmNsa192aWNfc3VwcG9ydGVkX2ZyZXEocGh5
X2ZyZXEsIHZjbGtfZnJlcSk7CiB9CiAKIC8qIEVuY29kZXIgKi8KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9tZXNvbi9tZXNvbl92Y2xrLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVz
b25fdmNsay5jCmluZGV4IDg2OTIzMWM5MzYxNy4uYTdjYmJjNzVlZjFiIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fdmNsay5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9t
ZXNvbi9tZXNvbl92Y2xrLmMKQEAgLTM1NCwxMiArMzU0LDE3IEBAIGVudW0gewogLyogMjk3MCAv
MSAvMSAvMSAvNSAvMiAgPT4gLzEgLzEgKi8KIAlNRVNPTl9WQ0xLX0hETUlfMjk3MDAwLAogLyog
NTk0MCAvMSAvMSAvMiAvNSAvMSAgPT4gLzEgLzEgKi8KLQlNRVNPTl9WQ0xLX0hETUlfNTk0MDAw
CisJTUVTT05fVkNMS19IRE1JXzU5NDAwMCwKKy8qIDI5NzAgLzEgLzEgLzEgLzUgLzEgID0+IC8x
IC8yICovCisJTUVTT05fVkNMS19IRE1JXzU5NDAwMF9ZVVY0MjAsCiB9OwogCiBzdHJ1Y3QgbWVz
b25fdmNsa19wYXJhbXMgeworCXVuc2lnbmVkIGludCBwbGxfZnJlcTsKKwl1bnNpZ25lZCBpbnQg
cGh5X2ZyZXE7CisJdW5zaWduZWQgaW50IHZjbGtfZnJlcTsKKwl1bnNpZ25lZCBpbnQgdmVuY19m
cmVxOwogCXVuc2lnbmVkIGludCBwaXhlbF9mcmVxOwotCXVuc2lnbmVkIGludCBwbGxfYmFzZV9m
cmVxOwogCXVuc2lnbmVkIGludCBwbGxfb2QxOwogCXVuc2lnbmVkIGludCBwbGxfb2QyOwogCXVu
c2lnbmVkIGludCBwbGxfb2QzOwpAQCAtMzY3LDggKzM3MiwxMSBAQCBzdHJ1Y3QgbWVzb25fdmNs
a19wYXJhbXMgewogCXVuc2lnbmVkIGludCB2Y2xrX2RpdjsKIH0gcGFyYW1zW10gPSB7CiAJW01F
U09OX1ZDTEtfSERNSV9FTkNJXzU0MDAwXSA9IHsKKwkJLnBsbF9mcmVxID0gNDMyMDAwMCwKKwkJ
LnBoeV9mcmVxID0gMjcwMDAwLAorCQkudmNsa19mcmVxID0gNTQwMDAsCisJCS52ZW5jX2ZyZXEg
PSA1NDAwMCwKIAkJLnBpeGVsX2ZyZXEgPSA1NDAwMCwKLQkJLnBsbF9iYXNlX2ZyZXEgPSA0MzIw
MDAwLAogCQkucGxsX29kMSA9IDQsCiAJCS5wbGxfb2QyID0gNCwKIAkJLnBsbF9vZDMgPSAxLApA
QCAtMzc2LDggKzM4NCwxMSBAQCBzdHJ1Y3QgbWVzb25fdmNsa19wYXJhbXMgewogCQkudmNsa19k
aXYgPSAxLAogCX0sCiAJW01FU09OX1ZDTEtfSERNSV9ERFJfNTQwMDBdID0gewotCQkucGl4ZWxf
ZnJlcSA9IDU0MDAwLAotCQkucGxsX2Jhc2VfZnJlcSA9IDQzMjAwMDAsCisJCS5wbGxfZnJlcSA9
IDQzMjAwMDAsCisJCS5waHlfZnJlcSA9IDI3MDAwMCwKKwkJLnZjbGtfZnJlcSA9IDU0MDAwLAor
CQkudmVuY19mcmVxID0gNTQwMDAsCisJCS5waXhlbF9mcmVxID0gMjcwMDAsCiAJCS5wbGxfb2Qx
ID0gNCwKIAkJLnBsbF9vZDIgPSA0LAogCQkucGxsX29kMyA9IDEsCkBAIC0zODUsOCArMzk2LDEx
IEBAIHN0cnVjdCBtZXNvbl92Y2xrX3BhcmFtcyB7CiAJCS52Y2xrX2RpdiA9IDEsCiAJfSwKIAlb
TUVTT05fVkNMS19IRE1JX0REUl8xNDg1MDBdID0gewotCQkucGl4ZWxfZnJlcSA9IDE0ODUwMCwK
LQkJLnBsbF9iYXNlX2ZyZXEgPSAyOTcwMDAwLAorCQkucGxsX2ZyZXEgPSAyOTcwMDAwLAorCQku
cGh5X2ZyZXEgPSA3NDI1MDAsCisJCS52Y2xrX2ZyZXEgPSAxNDg1MDAsCisJCS52ZW5jX2ZyZXEg
PSAxNDg1MDAsCisJCS5waXhlbF9mcmVxID0gNzQyNTAsCiAJCS5wbGxfb2QxID0gNCwKIAkJLnBs
bF9vZDIgPSAxLAogCQkucGxsX29kMyA9IDEsCkBAIC0zOTQsOCArNDA4LDExIEBAIHN0cnVjdCBt
ZXNvbl92Y2xrX3BhcmFtcyB7CiAJCS52Y2xrX2RpdiA9IDEsCiAJfSwKIAlbTUVTT05fVkNMS19I
RE1JXzc0MjUwXSA9IHsKKwkJLnBsbF9mcmVxID0gMjk3MDAwMCwKKwkJLnBoeV9mcmVxID0gNzQy
NTAwLAorCQkudmNsa19mcmVxID0gNzQyNTAsCisJCS52ZW5jX2ZyZXEgPSA3NDI1MCwKIAkJLnBp
eGVsX2ZyZXEgPSA3NDI1MCwKLQkJLnBsbF9iYXNlX2ZyZXEgPSAyOTcwMDAwLAogCQkucGxsX29k
MSA9IDIsCiAJCS5wbGxfb2QyID0gMiwKIAkJLnBsbF9vZDMgPSAyLApAQCAtNDAzLDggKzQyMCwx
MSBAQCBzdHJ1Y3QgbWVzb25fdmNsa19wYXJhbXMgewogCQkudmNsa19kaXYgPSAxLAogCX0sCiAJ
W01FU09OX1ZDTEtfSERNSV8xNDg1MDBdID0geworCQkucGxsX2ZyZXEgPSAyOTcwMDAwLAorCQku
cGh5X2ZyZXEgPSAxNDg1MDAwLAorCQkudmNsa19mcmVxID0gMTQ4NTAwLAorCQkudmVuY19mcmVx
ID0gMTQ4NTAwLAogCQkucGl4ZWxfZnJlcSA9IDE0ODUwMCwKLQkJLnBsbF9iYXNlX2ZyZXEgPSAy
OTcwMDAwLAogCQkucGxsX29kMSA9IDEsCiAJCS5wbGxfb2QyID0gMiwKIAkJLnBsbF9vZDMgPSAy
LApAQCAtNDEyLDggKzQzMiwxMSBAQCBzdHJ1Y3QgbWVzb25fdmNsa19wYXJhbXMgewogCQkudmNs
a19kaXYgPSAxLAogCX0sCiAJW01FU09OX1ZDTEtfSERNSV8yOTcwMDBdID0geworCQkucGxsX2Zy
ZXEgPSA1OTQwMDAwLAorCQkucGh5X2ZyZXEgPSAyOTcwMDAwLAorCQkudmVuY19mcmVxID0gMjk3
MDAwLAorCQkudmNsa19mcmVxID0gMjk3MDAwLAogCQkucGl4ZWxfZnJlcSA9IDI5NzAwMCwKLQkJ
LnBsbF9iYXNlX2ZyZXEgPSA1OTQwMDAwLAogCQkucGxsX29kMSA9IDIsCiAJCS5wbGxfb2QyID0g
MSwKIAkJLnBsbF9vZDMgPSAxLApAQCAtNDIxLDE0ICs0NDQsMjkgQEAgc3RydWN0IG1lc29uX3Zj
bGtfcGFyYW1zIHsKIAkJLnZjbGtfZGl2ID0gMiwKIAl9LAogCVtNRVNPTl9WQ0xLX0hETUlfNTk0
MDAwXSA9IHsKKwkJLnBsbF9mcmVxID0gNTk0MDAwMCwKKwkJLnBoeV9mcmVxID0gNTk0MDAwMCwK
KwkJLnZlbmNfZnJlcSA9IDU5NDAwMCwKKwkJLnZjbGtfZnJlcSA9IDU5NDAwMCwKIAkJLnBpeGVs
X2ZyZXEgPSA1OTQwMDAsCi0JCS5wbGxfYmFzZV9mcmVxID0gNTk0MDAwMCwKIAkJLnBsbF9vZDEg
PSAxLAogCQkucGxsX29kMiA9IDEsCiAJCS5wbGxfb2QzID0gMiwKIAkJLnZpZF9wbGxfZGl2ID0g
VklEX1BMTF9ESVZfNSwKIAkJLnZjbGtfZGl2ID0gMSwKIAl9LAorCVtNRVNPTl9WQ0xLX0hETUlf
NTk0MDAwX1lVVjQyMF0gPSB7CisJCS5wbGxfZnJlcSA9IDU5NDAwMDAsCisJCS5waHlfZnJlcSA9
IDI5NzAwMDAsCisJCS52ZW5jX2ZyZXEgPSA1OTQwMDAsCisJCS52Y2xrX2ZyZXEgPSA1OTQwMDAs
CisJCS5waXhlbF9mcmVxID0gMjk3MDAwLAorCQkucGxsX29kMSA9IDIsCisJCS5wbGxfb2QyID0g
MSwKKwkJLnBsbF9vZDMgPSAxLAorCQkudmlkX3BsbF9kaXYgPSBWSURfUExMX0RJVl81LAorCQku
dmNsa19kaXYgPSAxLAorCX0sCiAJeyAvKiBzZW50aW5lbCAqLyB9LAogfTsKIApAQCAtNjk2LDYg
KzczNCw3IEBAIHN0YXRpYyB2b2lkIG1lc29uX2hkbWlfcGxsX2dlbmVyaWNfc2V0KHN0cnVjdCBt
ZXNvbl9kcm0gKnByaXYsCiAJdW5zaWduZWQgaW50IG9kLCBtLCBmcmFjLCBvZDEsIG9kMiwgb2Qz
OwogCiAJaWYgKG1lc29uX2hkbWlfcGxsX2ZpbmRfcGFyYW1zKHByaXYsIHBsbF9mcmVxLCAmbSwg
JmZyYWMsICZvZCkpIHsKKwkJLyogT0QyIGdvZXMgdG8gdGhlIFBIWSwgYW5kIG5lZWRzIHRvIGJl
ICoxMCwgc28ga2VlcCBPRDM9MSAqLwogCQlvZDMgPSAxOwogCQlpZiAob2QgPCA0KSB7CiAJCQlv
ZDEgPSAyOwpAQCAtNzE4LDIxICs3NTcsMjggQEAgc3RhdGljIHZvaWQgbWVzb25faGRtaV9wbGxf
Z2VuZXJpY19zZXQoc3RydWN0IG1lc29uX2RybSAqcHJpdiwKIH0KIAogZW51bSBkcm1fbW9kZV9z
dGF0dXMKLW1lc29uX3ZjbGtfdmljX3N1cHBvcnRlZF9mcmVxKHVuc2lnbmVkIGludCBmcmVxKQor
bWVzb25fdmNsa192aWNfc3VwcG9ydGVkX2ZyZXEodW5zaWduZWQgaW50IHBoeV9mcmVxLAorCQkJ
ICAgICAgdW5zaWduZWQgaW50IHZjbGtfZnJlcSkKIHsKIAlpbnQgaTsKIAotCURSTV9ERUJVR19E
UklWRVIoImZyZXEgPSAlZFxuIiwgZnJlcSk7CisJRFJNX0RFQlVHX0RSSVZFUigicGh5X2ZyZXEg
PSAlZCB2Y2xrX2ZyZXEgPSAlZFxuIiwKKwkJCSBwaHlfZnJlcSwgdmNsa19mcmVxKTsKIAogCWZv
ciAoaSA9IDAgOyBwYXJhbXNbaV0ucGl4ZWxfZnJlcSA7ICsraSkgewogCQlEUk1fREVCVUdfRFJJ
VkVSKCJpID0gJWQgcGl4ZWxfZnJlcSA9ICVkIGFsdCA9ICVkXG4iLAogCQkJCSBpLCBwYXJhbXNb
aV0ucGl4ZWxfZnJlcSwKIAkJCQkgRlJFUV8xMDAwXzEwMDEocGFyYW1zW2ldLnBpeGVsX2ZyZXEp
KTsKKwkJRFJNX0RFQlVHX0RSSVZFUigiaSA9ICVkIHBoeV9mcmVxID0gJWQgYWx0ID0gJWRcbiIs
CisJCQkJIGksIHBhcmFtc1tpXS5waHlfZnJlcSwKKwkJCQkgRlJFUV8xMDAwXzEwMDEocGFyYW1z
W2ldLnBoeV9mcmVxLzEwKSoxMCk7CiAJCS8qIE1hdGNoIHN0cmljdCBmcmVxdWVuY3kgKi8KLQkJ
aWYgKGZyZXEgPT0gcGFyYW1zW2ldLnBpeGVsX2ZyZXEpCisJCWlmIChwaHlfZnJlcSA9PSBwYXJh
bXNbaV0ucGh5X2ZyZXEgJiYKKwkJICAgIHZjbGtfZnJlcSA9PSBwYXJhbXNbaV0udmNsa19mcmVx
KQogCQkJcmV0dXJuIE1PREVfT0s7CiAJCS8qIE1hdGNoIDEwMDAvMTAwMSB2YXJpYW50ICovCi0J
CWlmIChmcmVxID09IEZSRVFfMTAwMF8xMDAxKHBhcmFtc1tpXS5waXhlbF9mcmVxKSkKKwkJaWYg
KHBoeV9mcmVxID09IChGUkVRXzEwMDBfMTAwMShwYXJhbXNbaV0ucGh5X2ZyZXEvMTApKjEwKSAm
JgorCQkgICAgdmNsa19mcmVxID09IEZSRVFfMTAwMF8xMDAxKHBhcmFtc1tpXS52Y2xrX2ZyZXEp
KQogCQkJcmV0dXJuIE1PREVfT0s7CiAJfQogCkBAIC05NjAsOCArMTAwNiw5IEBAIHN0YXRpYyB2
b2lkIG1lc29uX3ZjbGtfc2V0KHN0cnVjdCBtZXNvbl9kcm0gKnByaXYsIHVuc2lnbmVkIGludCBw
bGxfYmFzZV9mcmVxLAogfQogCiB2b2lkIG1lc29uX3ZjbGtfc2V0dXAoc3RydWN0IG1lc29uX2Ry
bSAqcHJpdiwgdW5zaWduZWQgaW50IHRhcmdldCwKLQkJICAgICAgdW5zaWduZWQgaW50IHZjbGtf
ZnJlcSwgdW5zaWduZWQgaW50IHZlbmNfZnJlcSwKLQkJICAgICAgdW5zaWduZWQgaW50IGRhY19m
cmVxLCBib29sIGhkbWlfdXNlX2VuY2kpCisJCSAgICAgIHVuc2lnbmVkIGludCBwaHlfZnJlcSwg
dW5zaWduZWQgaW50IHZjbGtfZnJlcSwKKwkJICAgICAgdW5zaWduZWQgaW50IHZlbmNfZnJlcSwg
dW5zaWduZWQgaW50IGRhY19mcmVxLAorCQkgICAgICBib29sIGhkbWlfdXNlX2VuY2kpCiB7CiAJ
Ym9vbCB2aWNfYWx0ZXJuYXRlX2Nsb2NrID0gZmFsc2U7CiAJdW5zaWduZWQgaW50IGZyZXE7CkBA
IC05ODEsNyArMTAyOCw3IEBAIHZvaWQgbWVzb25fdmNsa19zZXR1cChzdHJ1Y3QgbWVzb25fZHJt
ICpwcml2LCB1bnNpZ25lZCBpbnQgdGFyZ2V0LAogCQkgKiAtIHZlbmNfZGl2ID0gMQogCQkgKiAt
IGVuY3AgZW5jb2RlcgogCQkgKi8KLQkJbWVzb25fdmNsa19zZXQocHJpdiwgdmNsa19mcmVxICog
MTAsIDAsIDAsIDAsCisJCW1lc29uX3ZjbGtfc2V0KHByaXYsIHBoeV9mcmVxLCAwLCAwLCAwLAog
CQkJICAgICAgIFZJRF9QTExfRElWXzUsIDIsIDEsIDEsIGZhbHNlLCBmYWxzZSk7CiAJCXJldHVy
bjsKIAl9CkBAIC0xMDAzLDkgKzEwNTAsMTEgQEAgdm9pZCBtZXNvbl92Y2xrX3NldHVwKHN0cnVj
dCBtZXNvbl9kcm0gKnByaXYsIHVuc2lnbmVkIGludCB0YXJnZXQsCiAJfQogCiAJZm9yIChmcmVx
ID0gMCA7IHBhcmFtc1tmcmVxXS5waXhlbF9mcmVxIDsgKytmcmVxKSB7Ci0JCWlmICh2Y2xrX2Zy
ZXEgPT0gcGFyYW1zW2ZyZXFdLnBpeGVsX2ZyZXEgfHwKLQkJICAgIHZjbGtfZnJlcSA9PSBGUkVR
XzEwMDBfMTAwMShwYXJhbXNbZnJlcV0ucGl4ZWxfZnJlcSkpIHsKLQkJCWlmICh2Y2xrX2ZyZXEg
IT0gcGFyYW1zW2ZyZXFdLnBpeGVsX2ZyZXEpCisJCWlmICgocGh5X2ZyZXEgPT0gcGFyYW1zW2Zy
ZXFdLnBoeV9mcmVxIHx8CisJCSAgICAgcGh5X2ZyZXEgPT0gRlJFUV8xMDAwXzEwMDEocGFyYW1z
W2ZyZXFdLnBoeV9mcmVxLzEwKSoxMCkgJiYKKwkJICAgICh2Y2xrX2ZyZXEgPT0gcGFyYW1zW2Zy
ZXFdLnZjbGtfZnJlcSB8fAorCQkgICAgIHZjbGtfZnJlcSA9PSBGUkVRXzEwMDBfMTAwMShwYXJh
bXNbZnJlcV0udmNsa19mcmVxKSkpIHsKKwkJCWlmICh2Y2xrX2ZyZXEgIT0gcGFyYW1zW2ZyZXFd
LnZjbGtfZnJlcSkKIAkJCQl2aWNfYWx0ZXJuYXRlX2Nsb2NrID0gdHJ1ZTsKIAkJCWVsc2UKIAkJ
CQl2aWNfYWx0ZXJuYXRlX2Nsb2NrID0gZmFsc2U7CkBAIC0xMDM0LDcgKzEwODMsNyBAQCB2b2lk
IG1lc29uX3ZjbGtfc2V0dXAoc3RydWN0IG1lc29uX2RybSAqcHJpdiwgdW5zaWduZWQgaW50IHRh
cmdldCwKIAkJcmV0dXJuOwogCX0KIAotCW1lc29uX3ZjbGtfc2V0KHByaXYsIHBhcmFtc1tmcmVx
XS5wbGxfYmFzZV9mcmVxLAorCW1lc29uX3ZjbGtfc2V0KHByaXYsIHBhcmFtc1tmcmVxXS5wbGxf
ZnJlcSwKIAkJICAgICAgIHBhcmFtc1tmcmVxXS5wbGxfb2QxLCBwYXJhbXNbZnJlcV0ucGxsX29k
MiwKIAkJICAgICAgIHBhcmFtc1tmcmVxXS5wbGxfb2QzLCBwYXJhbXNbZnJlcV0udmlkX3BsbF9k
aXYsCiAJCSAgICAgICBwYXJhbXNbZnJlcV0udmNsa19kaXYsIGhkbWlfdHhfZGl2LCB2ZW5jX2Rp
diwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl92Y2xrLmggYi9kcml2
ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fdmNsay5oCmluZGV4IGI2MjEyNTU0MGFlZi4uYWVkMGFi
MmVmYTcxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fdmNsay5oCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl92Y2xrLmgKQEAgLTI1LDEwICsyNSwxMSBA
QCBlbnVtIHsKIGVudW0gZHJtX21vZGVfc3RhdHVzCiBtZXNvbl92Y2xrX2RtdF9zdXBwb3J0ZWRf
ZnJlcShzdHJ1Y3QgbWVzb25fZHJtICpwcml2LCB1bnNpZ25lZCBpbnQgZnJlcSk7CiBlbnVtIGRy
bV9tb2RlX3N0YXR1cwotbWVzb25fdmNsa192aWNfc3VwcG9ydGVkX2ZyZXEodW5zaWduZWQgaW50
IGZyZXEpOworbWVzb25fdmNsa192aWNfc3VwcG9ydGVkX2ZyZXEodW5zaWduZWQgaW50IHBoeV9m
cmVxLCB1bnNpZ25lZCBpbnQgdmNsa19mcmVxKTsKIAogdm9pZCBtZXNvbl92Y2xrX3NldHVwKHN0
cnVjdCBtZXNvbl9kcm0gKnByaXYsIHVuc2lnbmVkIGludCB0YXJnZXQsCi0JCSAgICAgIHVuc2ln
bmVkIGludCB2Y2xrX2ZyZXEsIHVuc2lnbmVkIGludCB2ZW5jX2ZyZXEsCi0JCSAgICAgIHVuc2ln
bmVkIGludCBkYWNfZnJlcSwgYm9vbCBoZG1pX3VzZV9lbmNpKTsKKwkJICAgICAgdW5zaWduZWQg
aW50IHBoeV9mcmVxLCB1bnNpZ25lZCBpbnQgdmNsa19mcmVxLAorCQkgICAgICB1bnNpZ25lZCBp
bnQgdmVuY19mcmVxLCB1bnNpZ25lZCBpbnQgZGFjX2ZyZXEsCisJCSAgICAgIGJvb2wgaGRtaV91
c2VfZW5jaSk7CiAKICNlbmRpZiAvKiBfX01FU09OX1ZDTEtfSCAqLwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL21lc29uL21lc29uX3ZlbmNfY3Zicy5jIGIvZHJpdmVycy9ncHUvZHJtL21l
c29uL21lc29uX3ZlbmNfY3Zicy5jCmluZGV4IDZkYzEzMGEyNDA3MC4uNTY0ZGVmNGQwYjA0IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fdmVuY19jdmJzLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL21lc29uL21lc29uX3ZlbmNfY3Zicy5jCkBAIC0yMDYsNyArMjA2LDgg
QEAgc3RhdGljIHZvaWQgbWVzb25fdmVuY19jdmJzX2VuY29kZXJfbW9kZV9zZXQoc3RydWN0IGRy
bV9lbmNvZGVyICplbmNvZGVyLAogCQkJLyogU2V0dXAgMjdNSHogdmNsazIgZm9yIEVOQ0kgYW5k
IFZEQUMgKi8KIAkJCW1lc29uX3ZjbGtfc2V0dXAocHJpdiwgTUVTT05fVkNMS19UQVJHRVRfQ1ZC
UywKIAkJCQkJIE1FU09OX1ZDTEtfQ1ZCUywgTUVTT05fVkNMS19DVkJTLAotCQkJCQkgTUVTT05f
VkNMS19DVkJTLCB0cnVlKTsKKwkJCQkJIE1FU09OX1ZDTEtfQ1ZCUywgTUVTT05fVkNMS19DVkJT
LAorCQkJCQkgdHJ1ZSk7CiAJCQlicmVhazsKIAkJfQogCX0KLS0gCjIuMjIuMAoKX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcg
bGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRl
c2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
