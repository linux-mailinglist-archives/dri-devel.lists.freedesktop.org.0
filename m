Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 02F70C29E8
	for <lists+dri-devel@lfdr.de>; Tue,  1 Oct 2019 00:47:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 35EF96E4FF;
	Mon, 30 Sep 2019 22:47:04 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1D4706E4FF;
 Mon, 30 Sep 2019 22:47:03 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 30 Sep 2019 15:47:02 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,568,1559545200"; d="scan'208";a="184991996"
Received: from mdroper-desk1.fm.intel.com ([10.1.27.135])
 by orsmga008.jf.intel.com with ESMTP; 30 Sep 2019 15:47:02 -0700
From: Matt Roper <matthew.d.roper@intel.com>
To: intel-gfx@lists.freedesktop.org,
	dri-devel@lists.freedesktop.org
Subject: [PATCH v7 1/3] drm: Add CRTC background color property
Date: Mon, 30 Sep 2019 15:47:05 -0700
Message-Id: <20190930224707.14904-2-matthew.d.roper@intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190930224707.14904-1-matthew.d.roper@intel.com>
References: <20190930224707.14904-1-matthew.d.roper@intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jean-Jacques Hiblot <jjhiblot@ti.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>, wei.c.li@intel.com,
 harish.krupo.kps@intel.com,
 =?UTF-8?q?St=C3=A9phane=20Marchesin?= <marcheu@chromium.org>,
 Sean Paul <sean@poorly.run>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U29tZSBkaXNwbGF5IGNvbnRyb2xsZXJzIGNhbiBiZSBwcm9ncmFtbWVkIHRvIHByZXNlbnQgbm9u
LWJsYWNrIGNvbG9ycwpmb3IgcGl4ZWxzIG5vdCBjb3ZlcmVkIGJ5IGFueSBwbGFuZSAob3IgcGl4
ZWxzIGNvdmVyZWQgYnkgdGhlCnRyYW5zcGFyZW50IHJlZ2lvbnMgb2YgaGlnaGVyIHBsYW5lcyku
ICBDb21wb3NpdG9ycyB0aGF0IHdhbnQgYSBVSSB3aXRoCmEgc29saWQgY29sb3IgYmFja2dyb3Vu
ZCBjYW4gcG90ZW50aWFsbHkgc2F2ZSBtZW1vcnkgYmFuZHdpZHRoIGJ5CnNldHRpbmcgdGhlIENS
VEMgYmFja2dyb3VuZCBwcm9wZXJ0eSBhbmQgdXNpbmcgc21hbGxlciBwbGFuZXMgdG8gZGlzcGxh
eQp0aGUgcmVzdCBvZiB0aGUgY29udGVudC4KClRvIGF2b2lkIGNvbmZ1c2lvbiBiZXR3ZWVuIGRp
ZmZlcmVudCB3YXlzIG9mIGVuY29kaW5nIFJHQiBkYXRhLCB3ZQpkZWZpbmUgYSBzdGFuZGFyZCA2
NC1iaXQgZm9ybWF0IHRoYXQgc2hvdWxkIGJlIHVzZWQgZm9yIHRoaXMgcHJvcGVydHkncwp2YWx1
ZS4gIEhlbHBlciBmdW5jdGlvbnMgYW5kIG1hY3JvcyBhcmUgcHJvdmlkZWQgdG8gZ2VuZXJhdGUg
YW5kIGRpc3NlY3QKdmFsdWVzIGluIHRoaXMgc3RhbmRhcmQgZm9ybWF0IHdpdGggdmFyeWluZyBj
b21wb25lbnQgcHJlY2lzaW9uIHZhbHVlcy4KCnYyOgogLSBTd2FwIGludGVybmFsIHJlcHJlc2Vu
dGF0aW9uJ3MgYmx1ZSBhbmQgcmVkIGJpdHMgdG8gbWFrZSBpdCBlYXNpZXIKICAgdG8gcmVhZCBp
ZiBwcmludGVkIG91dC4gIChWaWxsZSkKIC0gRG9jdW1lbnQgYmdjb2xvciBwcm9wZXJ0eSBpbiBk
cm1fYmxlbmQuYy4gIChTZWFuIFBhdWwpCiAtIHMvYmFja2dyb3VuZF9jb2xvci9iZ2NvbG9yLyBm
b3IgY29uc2lzdGVuY3kgYmV0d2VlbiBwcm9wZXJ0eSBuYW1lIGFuZAogICB2YWx1ZSBzdG9yYWdl
IGZpZWxkLiAgKFNlYW4gUGF1bCkKIC0gQWRkIGEgY29udmVuaWVuY2UgZnVuY3Rpb24gdG8gYXR0
YWNoIHByb3BlcnR5IHRvIGEgZ2l2ZW4gY3J0Yy4KCnYzOgogLSBSZXN0cnVjdHVyZSBBUkdCIGNv
bXBvbmVudCBleHRyYWN0aW9uIG1hY3JvcyB0byBiZSBlYXNpZXIgdG8KICAgdW5kZXJzdGFuZCBh
bmQgZW5jbG9zZSB0aGUgcGFyYW1ldGVycyBpbiAoKSB0byBhdm9pZCBjYWxjdWxhdGlvbnMKICAg
aWYgZXhwcmVzc2lvbnMgYXJlIHBhc3NlZC4gIChTZWFuIFBhdWwpCiAtIHMvcmdiYS9hcmdiLyBp
biBoZWxwZXIgZnVuY3Rpb24vbWFjcm8gbmFtZXMuICBFdmVuIHRob3VnaCB0aGUgaWRlYSBpcwog
ICB0byBub3Qgd29ycnkgYWJvdXQgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB1
NjQsIGl0IGNhbgogICBzdGlsbCBiZSBjb25mdXNpbmcgdG8gbG9vayBhdCBjb2RlIHRoYXQgdXNl
cyAncmdiYScgdGVybWlub2xvZ3ksIGJ1dAogICBzdG9yZXMgdmFsdWVzIHdpdGggYXJnYiBvcmRl
cmluZy4gIChWaWxsZSkKCnY0OgogLSBEcm9wIHRoZSBiZ2NvbG9yX2NoYW5nZWQgZmxhZy4gIChW
aWxsZSwgQnJpYW4gU3RhcmtleSkKIC0gQ2xhcmlmeSBpbiBrZXJuZWxkb2MgdGhhdCBiYWNrZ3Jv
dW5kIGNvbG9yIGlzIGV4cGVjdGVkIHRvIHVuZGVyZ28gdGhlCiAgIHNhbWUgcGlwZS1sZXZlbCBk
ZWdhbW1hL2NzYy9nYW1tYSB0cmFuc2Zvcm1hdGlvbnMgdGhhdCBwbGFuZXMgZG8uCiAgIChCcmlh
biBTdGFya2V5KQogLSBVcGRhdGUga2VybmVsZG9jIHRvIGluZGljYXRlIG5vbi1vcGFxdWUgY29s
b3JzIGFyZSBhbGxvd2VkLCBidXQgYXJlCiAgIGdlbmVyYWxseSBvbmx5IHVzZWZ1bCBpbiBzcGVj
aWFsIGNhc2VzIHN1Y2ggYXMgd2hlbiB3cml0ZWJhY2sKICAgY29ubmVjdG9ycyBhcmUgdXNlZCAo
QnJpYW4gU3RhcmtleSAvIEVyaWMgQW5ob2x0KQoKdjU6CiAtIFNldCBjcnRjLT5zdGF0ZS0+Ymdj
b2xvciB0byBzb2xpZCBibGFjayBpbnNpZGUKICAgZHJtX2NydGNfYWRkX2JnY29sb3JfcHJvcGVy
dHkoKSBpbiBjYXNlIGRyaXZlcnMgZG9uJ3QgZG8gdGhpcwogICB0aGVtc2VsdmVzLiAgKFZpbGxl
KQogLSBBZGQga2VybmVsZG9jIHRvIGRybV9jcnRjX2FkZF9iZ2NvbG9yX3Byb3BlcnR5KCkgZnVu
Y3Rpb24uCgp2NzoKIC0gRG9uJ3QgdXBkYXRlIENSVEMgc3RhdGUgYXQgYXR0YWNoIHRpbWU7IGlu
c3RlYWQgc2V0IHRoZSBkZWZhdWx0IHZhbHVlCiAgIGluIF9fZHJtX2F0b21pY19oZWxwZXJfY3J0
Y19yZXNldC4gIChNYWFydGVuKQoKQ2M6IGRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
Q2M6IHdlaS5jLmxpQGludGVsLmNvbQpDYzogaGFyaXNoLmtydXBvLmtwc0BpbnRlbC5jb20KQ2M6
IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+CkNjOiBTZWFu
IFBhdWwgPHNlYW5AcG9vcmx5LnJ1bj4KQ2M6IEJyaWFuIFN0YXJrZXkgPEJyaWFuLlN0YXJrZXlA
YXJtLmNvbT4KQ2M6IEVyaWMgQW5ob2x0IDxlcmljQGFuaG9sdC5uZXQ+CkNjOiBTdMOpcGhhbmUg
TWFyY2hlc2luIDxtYXJjaGV1QGNocm9taXVtLm9yZz4KQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmll
bC52ZXR0ZXJAZmZ3bGwuY2g+CkNjOiBNYWFydGVuIExhbmtob3JzdCA8bWFhcnRlbi5sYW5raG9y
c3RAbGludXguaW50ZWwuY29tPgpDYzogSmVhbi1KYWNxdWVzIEhpYmxvdCA8ampoaWJsb3RAdGku
Y29tPgpTaWduZWQtb2ZmLWJ5OiBNYXR0IFJvcGVyIDxtYXR0aGV3LmQucm9wZXJAaW50ZWwuY29t
PgpSZXZpZXdlZC1ieTogU2VhbiBQYXVsIDxzZWFuQHBvb3JseS5ydW4+ICAgICAgICAgICAgIyB2
MgpSZXZpZXdlZC1ieTogQnJpYW4gU3RhcmtleSA8YnJpYW4uc3RhcmtleUBhcm0uY29tPiAgIyB2
NAotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX3N0YXRlX2hlbHBlci5jIHwgIDQgKyst
CiBkcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY191YXBpLmMgICAgICAgICB8ICA0ICsrKwogZHJp
dmVycy9ncHUvZHJtL2RybV9ibGVuZC5jICAgICAgICAgICAgICAgfCAzNSArKysrKysrKysrKysr
KysrKysrKystLQogZHJpdmVycy9ncHUvZHJtL2RybV9tb2RlX2NvbmZpZy5jICAgICAgICAgfCAg
NiArKysrCiBpbmNsdWRlL2RybS9kcm1fYmxlbmQuaCAgICAgICAgICAgICAgICAgICB8ICAxICsK
IGluY2x1ZGUvZHJtL2RybV9jcnRjLmggICAgICAgICAgICAgICAgICAgIHwgMTIgKysrKysrKysK
IGluY2x1ZGUvZHJtL2RybV9tb2RlX2NvbmZpZy5oICAgICAgICAgICAgIHwgIDUgKysrKwogaW5j
bHVkZS91YXBpL2RybS9kcm1fbW9kZS5oICAgICAgICAgICAgICAgfCAyOCArKysrKysrKysrKysr
KysrKysKIDggZmlsZXMgY2hhbmdlZCwgOTEgaW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19zdGF0ZV9oZWxwZXIuYyBi
L2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX3N0YXRlX2hlbHBlci5jCmluZGV4IGQwYTkzN2Zi
MGM1Ni4uYjhjYzEyNTc5MDI0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21p
Y19zdGF0ZV9oZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19zdGF0ZV9o
ZWxwZXIuYwpAQCAtNzMsOCArNzMsMTAgQEAgdm9pZAogX19kcm1fYXRvbWljX2hlbHBlcl9jcnRj
X3Jlc2V0KHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAkJCSAgICAgICBzdHJ1Y3QgZHJtX2NydGNf
c3RhdGUgKmNydGNfc3RhdGUpCiB7Ci0JaWYgKGNydGNfc3RhdGUpCisJaWYgKGNydGNfc3RhdGUp
IHsKIAkJY3J0Y19zdGF0ZS0+Y3J0YyA9IGNydGM7CisJCWNydGNfc3RhdGUtPmJnY29sb3IgPSBk
cm1fYXJnYigxNiwgMHhmZmZmLCAwLCAwLCAwKTsKKwl9CiAKIAljcnRjLT5zdGF0ZSA9IGNydGNf
c3RhdGU7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY191YXBpLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY191YXBpLmMKaW5kZXggN2EyNmJmYjUzMjljLi4w
MzhlNmEzOGFlNWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX3VhcGku
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY191YXBpLmMKQEAgLTQ2OSw2ICs0Njks
OCBAQCBzdGF0aWMgaW50IGRybV9hdG9taWNfY3J0Y19zZXRfcHJvcGVydHkoc3RydWN0IGRybV9j
cnRjICpjcnRjLAogCQkJcmV0dXJuIC1FRkFVTFQ7CiAKIAkJc2V0X291dF9mZW5jZV9mb3JfY3J0
YyhzdGF0ZS0+c3RhdGUsIGNydGMsIGZlbmNlX3B0cik7CisJfSBlbHNlIGlmIChwcm9wZXJ0eSA9
PSBjb25maWctPmJnY29sb3JfcHJvcGVydHkpIHsKKwkJc3RhdGUtPmJnY29sb3IgPSB2YWw7CiAJ
fSBlbHNlIGlmIChjcnRjLT5mdW5jcy0+YXRvbWljX3NldF9wcm9wZXJ0eSkgewogCQlyZXR1cm4g
Y3J0Yy0+ZnVuY3MtPmF0b21pY19zZXRfcHJvcGVydHkoY3J0Yywgc3RhdGUsIHByb3BlcnR5LCB2
YWwpOwogCX0gZWxzZSB7CkBAIC01MDMsNiArNTA1LDggQEAgZHJtX2F0b21pY19jcnRjX2dldF9w
cm9wZXJ0eShzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCiAJCSp2YWwgPSAoc3RhdGUtPmdhbW1hX2x1
dCkgPyBzdGF0ZS0+Z2FtbWFfbHV0LT5iYXNlLmlkIDogMDsKIAllbHNlIGlmIChwcm9wZXJ0eSA9
PSBjb25maWctPnByb3Bfb3V0X2ZlbmNlX3B0cikKIAkJKnZhbCA9IDA7CisJZWxzZSBpZiAocHJv
cGVydHkgPT0gY29uZmlnLT5iZ2NvbG9yX3Byb3BlcnR5KQorCQkqdmFsID0gc3RhdGUtPmJnY29s
b3I7CiAJZWxzZSBpZiAoY3J0Yy0+ZnVuY3MtPmF0b21pY19nZXRfcHJvcGVydHkpCiAJCXJldHVy
biBjcnRjLT5mdW5jcy0+YXRvbWljX2dldF9wcm9wZXJ0eShjcnRjLCBzdGF0ZSwgcHJvcGVydHks
IHZhbCk7CiAJZWxzZQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9ibGVuZC5jIGIv
ZHJpdmVycy9ncHUvZHJtL2RybV9ibGVuZC5jCmluZGV4IGQwMjcwOWRkMmQ0YS4uZjcxYWYwNDEw
MWU1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2JsZW5kLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2RybV9ibGVuZC5jCkBAIC0xODMsOSArMTgzLDIyIEBACiAgKgkJIHBsYW5lIGRv
ZXMgbm90IGV4cG9zZSB0aGUgImFscGhhIiBwcm9wZXJ0eSwgdGhlbiB0aGlzIGlzCiAgKgkJIGFz
c3VtZWQgdG8gYmUgMS4wCiAgKgotICogTm90ZSB0aGF0IGFsbCB0aGUgcHJvcGVydHkgZXh0ZW5z
aW9ucyBkZXNjcmliZWQgaGVyZSBhcHBseSBlaXRoZXIgdG8gdGhlCi0gKiBwbGFuZSBvciB0aGUg
Q1JUQyAoZS5nLiBmb3IgdGhlIGJhY2tncm91bmQgY29sb3IsIHdoaWNoIGN1cnJlbnRseSBpcyBu
b3QKLSAqIGV4cG9zZWQgYW5kIGFzc3VtZWQgdG8gYmUgYmxhY2spLgorICogVGhlIHByb3BlcnR5
IGV4dGVuc2lvbnMgZGVzY3JpYmVkIGFib3ZlIGFsbCBhcHBseSB0byB0aGUgcGxhbmUuICBEcml2
ZXJzCisgKiBtYXkgYWxzbyBleHBvc2UgdGhlIGZvbGxvd2luZyBjcnRjIHByb3BlcnR5IGV4dGVu
c2lvbjoKKyAqCisgKiBCQUNLR1JPVU5EX0NPTE9SOgorICoJQmFja2dyb3VuZCBjb2xvciBpcyBz
ZXR1cCB3aXRoIGRybV9jcnRjX2FkZF9iZ2NvbG9yX3Byb3BlcnR5KCkuICBJdAorICoJY29udHJv
bHMgdGhlIEFSR0IgY29sb3Igb2YgYSBmdWxsLXNjcmVlbiBsYXllciB0aGF0IGV4aXN0cyBiZWxv
dyBhbGwKKyAqCXBsYW5lcy4gIFRoaXMgY29sb3Igd2lsbCBiZSB1c2VkIGZvciBwaXhlbHMgbm90
IGNvdmVyZWQgYnkgYW55IHBsYW5lCisgKglhbmQgbWF5IGFsc28gYmUgYmxlbmRlZCB3aXRoIHBs
YW5lIGNvbnRlbnRzIGFzIGFsbG93ZWQgYnkgYSBwbGFuZSdzCisgKglhbHBoYSB2YWx1ZXMuICBU
aGUgYmFja2dyb3VuZCBjb2xvciBkZWZhdWx0cyB0byBibGFjaywgYW5kIGlzIGFzc3VtZWQKKyAq
CXRvIGJlIGJsYWNrIGZvciBkcml2ZXJzIHRoYXQgZG8gbm90IGV4cG9zZSB0aGlzIHByb3BlcnR5
LiAgQWx0aG91Z2gKKyAqCWJhY2tncm91bmQgY29sb3IgaXNuJ3QgYSBwbGFuZSwgaXQgaXMgYXNz
dW1lZCB0aGF0IHRoZSBjb2xvciBwcm92aWRlZAorICoJaGVyZSB1bmRlcmdvZXMgdGhlIHNhbWUg
cGlwZS1sZXZlbCBkZWdhbW1hL0NTQy9nYW1tYSB0cmFuc2Zvcm1hdGlvbnMKKyAqCXRoYXQgcGxh
bmVzIHVuZGVyZ28uICBOb3RlIHRoYXQgdGhlIGNvbG9yIHZhbHVlIHByb3ZpZGVkIGhlcmUgaW5j
bHVkZXMKKyAqCWFuIGFscGhhIGNoYW5uZWwuLi5ub24tb3BhcXVlIGJhY2tncm91bmQgY29sb3Ig
dmFsdWVzIGFyZSBhbGxvd2VkLAorICoJYnV0IGFyZSBnZW5lcmFsbHkgb25seSBob25vcmVkIGlu
IHNwZWNpYWwgY2FzZXMgKGUuZy4sIHdoZW4gYSBtZW1vcnkKKyAqCXdyaXRlYmFjayBjb25uZWN0
b3IgaXMgaW4gdXNlKS4KICAqLwogCiAvKioKQEAgLTYwMSwzICs2MTQsMTkgQEAgaW50IGRybV9w
bGFuZV9jcmVhdGVfYmxlbmRfbW9kZV9wcm9wZXJ0eShzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwK
IAlyZXR1cm4gMDsKIH0KIEVYUE9SVF9TWU1CT0woZHJtX3BsYW5lX2NyZWF0ZV9ibGVuZF9tb2Rl
X3Byb3BlcnR5KTsKKworLyoqCisgKiBkcm1fY3J0Y19hZGRfYmdjb2xvcl9wcm9wZXJ0eSAtIGFk
ZCBiYWNrZ3JvdW5kIGNvbG9yIHByb3BlcnR5CisgKiBAY3J0YzogZHJtIGNydGMKKyAqCisgKiBB
ZGRzIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIHByb3BlcnR5IHRvIEBjcnRjLiAgVGhlIHByb3BlcnR5
IGRlZmF1bHRzIHRvCisgKiBzb2xpZCBibGFjayBhbmQgd2lsbCBhY2NlcHQgNjQtYml0IEFSR0Ig
dmFsdWVzIGluIHRoZSBmb3JtYXQgZ2VuZXJhdGVkIGJ5CisgKiBkcm1fYXJnYigpLgorICovCit2
b2lkIGRybV9jcnRjX2FkZF9iZ2NvbG9yX3Byb3BlcnR5KHN0cnVjdCBkcm1fY3J0YyAqY3J0YykK
K3sKKwlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmY3J0Yy0+YmFzZSwKKwkJCQkgICBjcnRj
LT5kZXYtPm1vZGVfY29uZmlnLmJnY29sb3JfcHJvcGVydHksCisJCQkJICAgZHJtX2FyZ2IoMTYs
IDB4ZmZmZiwgMCwgMCwgMCkpOworfQorRVhQT1JUX1NZTUJPTChkcm1fY3J0Y19hZGRfYmdjb2xv
cl9wcm9wZXJ0eSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX21vZGVfY29uZmln
LmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX21vZGVfY29uZmlnLmMKaW5kZXggN2JjMDNjM2MxNTRm
Li5kYzcxNDA1MGVkMmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fbW9kZV9jb25m
aWcuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX21vZGVfY29uZmlnLmMKQEAgLTM2OSw2ICsz
NjksMTIgQEAgc3RhdGljIGludCBkcm1fbW9kZV9jcmVhdGVfc3RhbmRhcmRfcHJvcGVydGllcyhz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCQlyZXR1cm4gLUVOT01FTTsKIAlkZXYtPm1vZGVfY29u
ZmlnLm1vZGlmaWVyc19wcm9wZXJ0eSA9IHByb3A7CiAKKwlwcm9wID0gZHJtX3Byb3BlcnR5X2Ny
ZWF0ZV9yYW5nZShkZXYsIDAsICJCQUNLR1JPVU5EX0NPTE9SIiwKKwkJCQkJIDAsIEdFTk1BU0tf
VUxMKDYzLCAwKSk7CisJaWYgKCFwcm9wKQorCQlyZXR1cm4gLUVOT01FTTsKKwlkZXYtPm1vZGVf
Y29uZmlnLmJnY29sb3JfcHJvcGVydHkgPSBwcm9wOworCiAJcmV0dXJuIDA7CiB9CiAKZGlmZiAt
LWdpdCBhL2luY2x1ZGUvZHJtL2RybV9ibGVuZC5oIGIvaW5jbHVkZS9kcm0vZHJtX2JsZW5kLmgK
aW5kZXggODhiZGZlYzNiZDg4Li45ZTI1MzhkZDdiOWEgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJt
L2RybV9ibGVuZC5oCisrKyBiL2luY2x1ZGUvZHJtL2RybV9ibGVuZC5oCkBAIC01OCw0ICs1OCw1
IEBAIGludCBkcm1fYXRvbWljX25vcm1hbGl6ZV96cG9zKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYs
CiAJCQkgICAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpOwogaW50IGRybV9wbGFu
ZV9jcmVhdGVfYmxlbmRfbW9kZV9wcm9wZXJ0eShzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwKIAkJ
CQkJIHVuc2lnbmVkIGludCBzdXBwb3J0ZWRfbW9kZXMpOwordm9pZCBkcm1fY3J0Y19hZGRfYmdj
b2xvcl9wcm9wZXJ0eShzdHJ1Y3QgZHJtX2NydGMgKmNydGMpOwogI2VuZGlmCmRpZmYgLS1naXQg
YS9pbmNsdWRlL2RybS9kcm1fY3J0Yy5oIGIvaW5jbHVkZS9kcm0vZHJtX2NydGMuaAppbmRleCA1
ZTliMTVhMGU4YzUuLjViNDZkYWJlYzU0NiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2Ny
dGMuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fY3J0Yy5oCkBAIC0yNzUsNiArMjc1LDE4IEBAIHN0
cnVjdCBkcm1fY3J0Y19zdGF0ZSB7CiAJICovCiAJc3RydWN0IGRybV9wcm9wZXJ0eV9ibG9iICpn
YW1tYV9sdXQ7CiAKKwkvKioKKwkgKiBAYmdjb2xvcjoKKwkgKgorCSAqIFJHQiB2YWx1ZSByZXBy
ZXNlbnRpbmcgdGhlIHBpcGUncyBiYWNrZ3JvdW5kIGNvbG9yLiAgVGhlIGJhY2tncm91bmQKKwkg
KiBjb2xvciAoYWthICJjYW52YXMgY29sb3IiKSBvZiBhIHBpcGUgaXMgdGhlIGNvbG9yIHRoYXQg
d2lsbCBiZSB1c2VkCisJICogZm9yIHBpeGVscyBub3QgY292ZXJlZCBieSBhIHBsYW5lLCBvciBj
b3ZlcmVkIGJ5IHRyYW5zcGFyZW50IHBpeGVscworCSAqIG9mIGEgcGxhbmUuICBUaGUgdmFsdWUg
aGVyZSBzaG91bGQgYmUgYnVpbHQgdmlhIGRybV9hcmdiKCk7CisJICogaW5kaXZpZHVhbCBjb2xv
ciBjb21wb25lbnRzIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBkZXNpcmVkIHByZWNpc2lvbgorCSAq
IHZpYSB0aGUgRFJNX0FSR0JfKigpIG1hY3Jvcy4KKwkgKi8KKwl1NjQgYmdjb2xvcjsKKwogCS8q
KgogCSAqIEB0YXJnZXRfdmJsYW5rOgogCSAqCmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1f
bW9kZV9jb25maWcuaCBiL2luY2x1ZGUvZHJtL2RybV9tb2RlX2NvbmZpZy5oCmluZGV4IDNiY2Jl
MzAzMzlmMC4uOGVlMjlmOTkyZDI1IDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS9kcm1fbW9kZV9j
b25maWcuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fbW9kZV9jb25maWcuaApAQCAtODU1LDYgKzg1
NSwxMSBAQCBzdHJ1Y3QgZHJtX21vZGVfY29uZmlnIHsKIAkgKi8KIAlzdHJ1Y3QgZHJtX3Byb3Bl
cnR5ICpoZGNwX2NvbnRlbnRfdHlwZV9wcm9wZXJ0eTsKIAorCS8qKgorCSAqIEBiZ2NvbG9yX3By
b3BlcnR5OiBSR0IgYmFja2dyb3VuZCBjb2xvciBmb3IgQ1JUQy4KKwkgKi8KKwlzdHJ1Y3QgZHJt
X3Byb3BlcnR5ICpiZ2NvbG9yX3Byb3BlcnR5OworCiAJLyogZHVtYiBpb2N0bCBwYXJhbWV0ZXJz
ICovCiAJdWludDMyX3QgcHJlZmVycmVkX2RlcHRoLCBwcmVmZXJfc2hhZG93OwogCmRpZmYgLS1n
aXQgYS9pbmNsdWRlL3VhcGkvZHJtL2RybV9tb2RlLmggYi9pbmNsdWRlL3VhcGkvZHJtL2RybV9t
b2RlLmgKaW5kZXggNzM1YzhjZmRhYWExLi4xZmM3ZjJiY2QxNTAgMTAwNjQ0Ci0tLSBhL2luY2x1
ZGUvdWFwaS9kcm0vZHJtX21vZGUuaAorKysgYi9pbmNsdWRlL3VhcGkvZHJtL2RybV9tb2RlLmgK
QEAgLTEwMjUsNiArMTAyNSwzNCBAQCBzdHJ1Y3QgZHJtX21vZGVfcmVjdCB7CiAJX19zMzIgeTI7
CiB9OwogCisvKgorICogUHV0IEFSR0IgdmFsdWVzIGludG8gYSBzdGFuZGFyZCA2NC1iaXQgcmVw
cmVzZW50YXRpb24gdGhhdCBjYW4gYmUgdXNlZAorICogZm9yIGlvY3RsIHBhcmFtZXRlcnMsIGlu
dGVyLWRyaXZlciBjb21tbXVuaWNhdGlvbiwgZXRjLiAgSWYgdGhlIGNvbXBvbmVudAorICogdmFs
dWVzIGJlaW5nIHByb3ZpZGVkIGNvbnRhaW4gbGVzcyB0aGFuIDE2IGJpdHMgb2YgcHJlY2lzaW9u
LCB0aGV5J2xsCisgKiBiZSBzaGlmdGVkIGludG8gdGhlIG1vc3Qgc2lnbmlmaWNhbnQgYml0cy4K
KyAqLworc3RhdGljIGlubGluZSBfX3U2NAorZHJtX2FyZ2IoX191OCBicGMsIF9fdTE2IGFscGhh
LCBfX3UxNiByZWQsIF9fdTE2IGdyZWVuLCBfX3UxNiBibHVlKQoreworCWludCBtc2Jfc2hpZnQg
PSAxNiAtIGJwYzsKKworCXJldHVybiAoX191NjQpYWxwaGEgPDwgbXNiX3NoaWZ0IDw8IDQ4IHwK
KwkgICAgICAgKF9fdTY0KXJlZCAgIDw8IG1zYl9zaGlmdCA8PCAzMiB8CisJICAgICAgIChfX3U2
NClncmVlbiA8PCBtc2Jfc2hpZnQgPDwgMTYgfAorCSAgICAgICAoX191NjQpYmx1ZSAgPDwgbXNi
X3NoaWZ0OworfQorCisvKgorICogRXh0cmFjdCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBiaXRz
IG9mIGEgc3BlY2lmaWMgY29sb3IgY29tcG9uZW50IGZyb20gYQorICogc3RhbmRhcmQgNjQtYml0
IEFSR0IgdmFsdWUuCisgKi8KKyNkZWZpbmUgRFJNX0FSR0JfQ09NUChjLCBzaGlmdCwgbnVtYml0
cykgXAorCShfX3UxNikoKChjKSAmIDB4RkZGRnVsbCA8PCAoc2hpZnQpKSA+PiAoKHNoaWZ0KSAr
IDE2IC0gKG51bWJpdHMpKSkKKyNkZWZpbmUgRFJNX0FSR0JfQkxVRShjLCBudW1iaXRzKSAgRFJN
X0FSR0JfQ09NUChjLCAwLCBudW1iaXRzKQorI2RlZmluZSBEUk1fQVJHQl9HUkVFTihjLCBudW1i
aXRzKSBEUk1fQVJHQl9DT01QKGMsIDE2LCBudW1iaXRzKQorI2RlZmluZSBEUk1fQVJHQl9SRUQo
YywgbnVtYml0cykgICBEUk1fQVJHQl9DT01QKGMsIDMyLCBudW1iaXRzKQorI2RlZmluZSBEUk1f
QVJHQl9BTFBIQShjLCBudW1iaXRzKSBEUk1fQVJHQl9DT01QKGMsIDQ4LCBudW1iaXRzKQorCiAj
aWYgZGVmaW5lZChfX2NwbHVzcGx1cykKIH0KICNlbmRpZgotLSAKMi4yMS4wCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBs
aXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
