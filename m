Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 41AB45E58C
	for <lists+dri-devel@lfdr.de>; Wed,  3 Jul 2019 15:31:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D34AF6E143;
	Wed,  3 Jul 2019 13:30:58 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4D7266E136;
 Wed,  3 Jul 2019 13:30:56 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id f9so2809244wre.12;
 Wed, 03 Jul 2019 06:30:56 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=vHMMy111qCPVlhn20MByNml0Hvj0MXblkspr7lTOdj8=;
 b=bYBk8L1YB93ahOCvEgPUNCoGrCbku+df3TBeaVKfwPqT4u/2VEJVzkvZE8IKqJyutn
 LlWDDFiixoKWNAhUpnqwNPNJemEib/UsB4F1UDca7f3ysfLFh6o6LRRovXIjTEhUrwTD
 1sjSCLc0j8EKq0m3jdocwf+bbatG1HnNMWNnUjh0n3QpRUv+jhinA5OLHlpjwC/OaC9I
 iBIg0kJlZLWrHrUkmZu4vZfk+o0hNJWxQihZ033zmIRz5/zksxCmyh0EBP1NFqXXGCts
 bPgEY+X3uzUAstQIzVQvI5mGGmdvIyVVbWS/3DqwK6a1TzXShQzjAYeoaXaBbS8s+RBk
 F+Cw==
X-Gm-Message-State: APjAAAViVcljn3SYYmjq/venaxJCJXF5GYxjHdoELW42MSc/FRtd7OnW
 npDWnJQG7KM1WwZ3xicgr87HjkH4
X-Google-Smtp-Source: APXvYqz6AL75fN06b2j9keUaa1qnKkC2xXkH+juMeyYkFLUSy0vvNNuLIj/PBzXyAS3TnrzLdfRxJA==
X-Received: by 2002:adf:fdc2:: with SMTP id i2mr28767972wrs.146.1562160654616; 
 Wed, 03 Jul 2019 06:30:54 -0700 (PDT)
Received: from arch-x1c3.cbg.collabora.co.uk
 ([2a00:5f00:102:0:9665:9cff:feee:aa4d])
 by smtp.gmail.com with ESMTPSA id g10sm2353263wrw.60.2019.07.03.06.30.53
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 03 Jul 2019 06:30:53 -0700 (PDT)
From: Emil Velikov <emil.l.velikov@gmail.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 3/3] drm: allow render capable master with DRM_AUTH ioctls
Date: Wed,  3 Jul 2019 14:31:04 +0100
Message-Id: <20190703133104.3211-3-emil.l.velikov@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190703133104.3211-1-emil.l.velikov@gmail.com>
References: <20190703133104.3211-1-emil.l.velikov@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=vHMMy111qCPVlhn20MByNml0Hvj0MXblkspr7lTOdj8=;
 b=JkHrjsuehFsn3lKf3QZrZO8bxCjhwTtTS5jTJq9+Nzt/+c2HCGCp6azV8R2c8LRFzK
 zn1agcm0ncX2wiQKDky/xx3zTTbWyL51/KXcXX/7eKWfZhZLeQ+xYgM/+9GQLMLIpSRO
 bgwepc6n/Zv4H8nTAhKWNhzGu+jFt+YLrDLQH3ebrZa/ocfFxUpHH6zt/+0ktf/psNoI
 CTkjP8BvGQ9iJVZZc/hiBjzvxtzxjjkIcGuKcql4ryXgbcc3c33D/KlX4YeqV5yhQGDm
 F6aiOZp+jeHQoCdMme8kOKezFNLbLIcgvHGpysBno7uTEtgfxnfSZvMGSsLIATVGGqY8
 Hi8A==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@ffwll.ch>, intel-gfx@lists.freedesktop.org,
 emil.l.velikov@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogRW1pbCBWZWxpa292IDxlbWlsLnZlbGlrb3ZAY29sbGFib3JhLmNvbT4KClRoZXJlIGFy
ZSBjYXNlcyAoaW4gbWVzYSBhbmQgYXBwbGljYXRpb25zKSB3aGVyZSBvbmUgd291bGQgb3BlbiB0
aGUKcHJpbWFyeSBub2RlIHdpdGhvdXQgcHJvcGVybHkgYXV0aGVudGljYXRpbmcgdGhlIGNsaWVu
dC4KClNvbWV0aW1lcyB3ZSBkb24ndCBjaGVjayBpZiB0aGUgYXV0aGVudGljYXRpb24gc3VjY2Vl
ZHMsIGJ1dCB0aGVyZSdzCmFsc28gY2FzZXMgd2Ugc2ltcGx5IGZvcmdldCB0byBkbyBpdC4KClRo
ZSBmb3JtZXIgd2FzIGEgY2FzZSBmb3IgTWVzYSB3aGVyZSBpdCBkaWQgbm90IG5vdCBjaGVjayB0
aGUgcmV0dXJuCnZhbHVlIG9mIGRybUdldE1hZ2ljKCkgWzFdLiBUaGF0IHdhcyBmaXhlZCByZWNl
bnRseSBhbHRob3VnaCwgdGhlcmUncwp0aGUgcXVlc3Rpb24gb2Ygb2xkZXIgZHJpdmVycyBvciBv
dGhlciBhcHBzIHRoYXQgZXhiaWJpdCB0aGlzIGJlaGF2aW91ci4KCldoaWxlIG9taXR0aW5nIHRo
ZSBjYWxsIHJlc3VsdHMgaW4gaXNzdWVzIGFzIHNlZW4gaW4gWzJdIGFuZCBbM10uCgpJbiB0aGUg
bGlidmEgY2FzZSwgbGlidmEgaXRzZWxmIGRvZXNuJ3QgYXV0aGVudGljYXRlIHRoZSBEUk0gY2xp
ZW50IGFuZAp0aGUgdmFHZXREaXNwbGF5RFJNIGRvY3VtZW50YXRpb24gZG9lc24ndCBtZW50aW9u
IGlmIHRoZSBhcHAgc2hvdWxkCmVpdGhlci4KCkFzIG9mIHRvZGF5LCB0aGUgb2ZmaWNpYWwgdmFp
bmZvIHV0aWxpdHkgZG9lc24ndCBhdXRoZW50aWNhdGUuCgpUbyB3b3JrYXJvdW5kIGlzc3VlcyBs
aWtlIHRoZXNlLCBzb21lIHVzZXJzIHJlc29ydCB0byBydW5uaW5nIHRoZWlyIGFwcHMKdW5kZXIg
c3Vkby4gV2hpY2ggYWRtaXR0ZWRseSBpc24ndCBhbHdheXMgYSBnb29kIGlkZWEuCgpTaW5jZSBh
bnkgRFJJVkVSX1JFTkRFUiBkcml2ZXIgaGFzIHN1ZmZpY2llbnQgaXNvbGF0aW9uIGJldHdlZW4g
Y2xpZW50cywKd2UgY2FuIHVzZSB0aGF0LCBmb3IgdW5hdXRoZW50aWNhdGVkIFtwcmltYXJ5IG5v
ZGVdIGlvY3RscyB0aGF0IHJlcXVpcmUKRFJNX0FVVEguIEJ1dCBvbmx5IGlmIHRoZSByZXNwZWN0
aXZlIGlvY3RsIGlzIHRhZ2dlZCBhcyBEUk1fUkVOREVSX0FMTE9XLgoKdjI6Ci0gUmV3b3JrL3Np
bXBsaWZ5IGlmIGNoZWNrIChEYW5pZWwgVikKLSBBZGQgZXhhbXBsZXMgdG8gY29tbWl0IG1lc3Nh
Z2VzLCBlbGFib3JhdGUuIChEYW5pZWwgVikKCnYzOgotIFVzZSBzaW5nbGUgdW5saWtlbHkgKERh
bmllbCBWKQoKdjQ6Ci0gUmVhcHBseSBwYXRjaCwgdXNlIERSSVZFUl9GT1JDRV9BVVRIIHcvYSBm
b3IgYW1kZ3B1L3JhZGVvbi4KClsxXSBodHRwczovL2dpdGxhYi5mcmVlZGVza3RvcC5vcmcvbWVz
YS9tZXNhL2Jsb2IvMmJjMWY1YzJlNzBmZTNiNGQ0MWYwNjBhZjk4NTliYzJhOTRjNWI2Mi9zcmMv
ZWdsL2RyaXZlcnMvZHJpMi9wbGF0Zm9ybV93YXlsYW5kLmMjTDExMzYKWzJdIGh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL2FyY2hpdmVzL2xpYnZhLzIwMTYtSnVseS8wMDQxODUuaHRtbApb
M10gaHR0cHM6Ly9naXRsYWIuZnJlZWRlc2t0b3Aub3JnL21lc2Eva21zY3ViZS9pc3N1ZXMvMQpU
ZXN0Y2FzZTogaWd0L2NvcmVfdW5hdXRoX3ZzX3JlbmRlcgpDYzogaW50ZWwtZ2Z4QGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBmZndsbC5jaD4K
U2lnbmVkLW9mZi1ieTogRW1pbCBWZWxpa292IDxlbWlsLnZlbGlrb3ZAY29sbGFib3JhLmNvbT4K
UmV2aWV3ZWQtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+Ci0tLQog
ZHJpdmVycy9ncHUvZHJtL2RybV9pb2N0bC5jIHwgMTggKysrKysrKysrKysrKysrKystCiAxIGZp
bGUgY2hhbmdlZCwgMTcgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQoKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9kcm1faW9jdGwuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1faW9jdGwu
YwppbmRleCAwOWY3ZjhlMzNmYTMuLmMzMGZlYjVlOTdlMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2RybV9pb2N0bC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1faW9jdGwuYwpAQCAt
NTE3LDYgKzUxNywxMyBAQCBpbnQgZHJtX3ZlcnNpb24oc3RydWN0IGRybV9kZXZpY2UgKmRldiwg
dm9pZCAqZGF0YSwKIAlyZXR1cm4gZXJyOwogfQogCitzdGF0aWMgaW5saW5lIGJvb2wKK2RybV9y
ZW5kZXJfZHJpdmVyX2FuZF9pb2N0bChjb25zdCBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1MzIg
ZmxhZ3MpCit7CisJcmV0dXJuIGRybV9jb3JlX2NoZWNrX2ZlYXR1cmUoZGV2LCBEUklWRVJfUkVO
REVSKSAmJgorCQkoZmxhZ3MgJiBEUk1fUkVOREVSX0FMTE9XKTsKK30KKwogLyoqCiAgKiBkcm1f
aW9jdGxfcGVybWl0IC0gQ2hlY2sgaW9jdGwgcGVybWlzc2lvbnMgYWdhaW5zdCBjYWxsZXIKICAq
CkBAIC01MzEsNiArNTM4LDggQEAgaW50IGRybV92ZXJzaW9uKHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYsIHZvaWQgKmRhdGEsCiAgKi8KIGludCBkcm1faW9jdGxfcGVybWl0KHUzMiBmbGFncywgc3Ry
dWN0IGRybV9maWxlICpmaWxlX3ByaXYpCiB7CisJY29uc3Qgc3RydWN0IGRybV9kZXZpY2UgKmRl
diA9IGZpbGVfcHJpdi0+bWlub3ItPmRldjsKKwogCS8qIFJPT1RfT05MWSBpcyBvbmx5IGZvciBD
QVBfU1lTX0FETUlOICovCiAJaWYgKHVubGlrZWx5KChmbGFncyAmIERSTV9ST09UX09OTFkpICYm
ICFjYXBhYmxlKENBUF9TWVNfQURNSU4pKSkKIAkJcmV0dXJuIC1FQUNDRVM7CkBAIC01MzgsNyAr
NTQ3LDE0IEBAIGludCBkcm1faW9jdGxfcGVybWl0KHUzMiBmbGFncywgc3RydWN0IGRybV9maWxl
ICpmaWxlX3ByaXYpCiAJLyogQVVUSCBpcyBvbmx5IGZvciBhdXRoZW50aWNhdGVkIG9yIHJlbmRl
ciBjbGllbnQgKi8KIAlpZiAodW5saWtlbHkoKGZsYWdzICYgRFJNX0FVVEgpICYmICFkcm1faXNf
cmVuZGVyX2NsaWVudChmaWxlX3ByaXYpICYmCiAJCSAgICAgIWZpbGVfcHJpdi0+YXV0aGVudGlj
YXRlZCkpCi0JCXJldHVybiAtRUFDQ0VTOworCQkvKgorCQkgKiBBbHRob3VnaCB3ZSBhbGxvdzoK
KwkJICogIC0gcmVuZGVyIGRyaXZlcnMgd2l0aCBEUk1fUkVOREVSX0FMTE9XIGlvY3Rscywgd2hl
bgorCQkgKiAgLSBkcml2ZXJzIGRvIG5vdCBleHBsaWNpdGx5IG1hbmRhdGUgYXV0aGVudGljYXRp
b24uCisJCSAqLworCQlpZiAoIWRybV9yZW5kZXJfZHJpdmVyX2FuZF9pb2N0bChkZXYsIGZsYWdz
KSB8fAorCQkgICAgZHJtX2NvcmVfY2hlY2tfZmVhdHVyZShkZXYsIERSSVZFUl9GT1JDRV9BVVRI
KSkKKwkJCXJldHVybiAtRUFDQ0VTOwogCiAJLyogTUFTVEVSIGlzIG9ubHkgZm9yIG1hc3RlciBv
ciBjb250cm9sIGNsaWVudHMgKi8KIAlpZiAodW5saWtlbHkoKGZsYWdzICYgRFJNX01BU1RFUikg
JiYKLS0gCjIuMjEuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
