Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B14F1615EA
	for <lists+dri-devel@lfdr.de>; Sun,  7 Jul 2019 20:27:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 60B7789B33;
	Sun,  7 Jul 2019 18:27:46 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3337F89B29
 for <dri-devel@lists.freedesktop.org>; Sun,  7 Jul 2019 18:27:44 +0000 (UTC)
Received: from pendragon.nordic-sky.finnair.com (unknown [38.98.37.142])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 5DD74AF9;
 Sun,  7 Jul 2019 20:27:14 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 21/60] drm/panel: Add driver for the Sharp LS037V7DW01 panel
Date: Sun,  7 Jul 2019 21:18:58 +0300
Message-Id: <20190707181937.6250-18-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190707181937.6250-1-laurent.pinchart@ideasonboard.com>
References: <20190707180852.5512-1-laurent.pinchart@ideasonboard.com>
 <20190707181937.6250-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1562524062;
 bh=BMY9i2gAZO4JMeZWBU6fYJ2gRPGaKoDHOwcLKgu8BDE=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=FQQ4atw2xhHhO1TmDSP9CYLWpf7rHm2iJvWfr6g5+Hh/llJ0vset8dfWa0s5svLWb
 QXTysZETy71CbBLtBDo50fCHymD3RANwwN5PBje4xc/1NsTzvO0p5KFfrMcy+GesSu
 w+ncpP/ydugTvtTjObfijxlncpVE/IuooUu5neWQ=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>, Sam Ravnborg <sam@ravnborg.org>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Thierry Reding <thierry.reding@gmail.com>, Sean Paul <sean@poorly.run>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYW5lbCBpcyB1c2VkIG9uIHRoZSBTRFAzNDMwLgoKU2lnbmVkLW9mZi1ieTogTGF1cmVu
dCBQaW5jaGFydCA8bGF1cmVudC5waW5jaGFydEBpZGVhc29uYm9hcmQuY29tPgotLS0KIGRyaXZl
cnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnICAgICAgICAgICAgICAgICB8ICAgNyArCiBkcml2ZXJz
L2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUgICAgICAgICAgICAgICAgfCAgIDEgKwogLi4uL2dwdS9k
cm0vcGFuZWwvcGFuZWwtc2hhcnAtbHMwMzd2N2R3MDEuYyAgIHwgMjMxICsrKysrKysrKysrKysr
KysrKwogMyBmaWxlcyBjaGFuZ2VkLCAyMzkgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAw
NjQ0IGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1zaGFycC1sczAzN3Y3ZHcwMS5jCgpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcgYi9kcml2ZXJzL2dwdS9kcm0v
cGFuZWwvS2NvbmZpZwppbmRleCBkYTYxM2MwNGI4MzUuLjA0ZmQxNTJlZmU0YyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcKKysrIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmVsL0tjb25maWcKQEAgLTI3MSw2ICsyNzEsMTMgQEAgY29uZmlnIERSTV9QQU5FTF9TSEFSUF9M
UzA0M1QxTEUwMQogCSAgU2F5IFkgaGVyZSBpZiB5b3Ugd2FudCB0byBlbmFibGUgc3VwcG9ydCBm
b3IgU2hhcnAgTFMwNDNUMUxFMDEgcUhECiAJICAoNTQweDk2MCkgRFNJIHBhbmVsIGFzIGZvdW5k
IG9uIHRoZSBRdWFsY29tbSBBUFE4MDc0IERyYWdvbmJvYXJkCiAKK2NvbmZpZyBEUk1fUEFORUxf
U0hBUlBfTFMwMzdWN0RXMDEKKwl0cmlzdGF0ZSAiU2hhcnAgTFMwMzdWN0RXMDEgVkdBIExDRCBw
YW5lbCIKKwlkZXBlbmRzIG9uIEdQSU9MSUIgJiYgT0YgJiYgUkVHVUxBVE9SCisJaGVscAorCSAg
U2F5IFkgaGVyZSBpZiB5b3Ugd2FudCB0byBlbmFibGUgc3VwcG9ydCBmb3IgU2hhcnAgTFMwMzdW
N0RXMDEgVkdBCisJICAoNDgweDY0MCkgTENEIHBhbmVsLgorCiBjb25maWcgRFJNX1BBTkVMX1NJ
VFJPTklYX1NUNzcwMQogCXRyaXN0YXRlICJTaXRyb25peCBTVDc3MDEgcGFuZWwgZHJpdmVyIgog
CWRlcGVuZHMgb24gT0YKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmls
ZSBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQppbmRleCBlODFlZDE1MzUwMjQuLjEy
ZGNkNzZlYjg3YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQpAQCAtMjcsNiArMjcsNyBAQCBvYmot
JChDT05GSUdfRFJNX1BBTkVMX1NBTVNVTkdfUzZFNjNNMCkgKz0gcGFuZWwtc2Ftc3VuZy1zNmU2
M20wLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfU0FNU1VOR19TNkU4QUEwKSArPSBwYW5lbC1z
YW1zdW5nLXM2ZThhYTAubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9TRUlLT180M1dWRjFHKSAr
PSBwYW5lbC1zZWlrby00M3d2ZjFnLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfU0hBUlBfTFEx
MDFSMVNYMDEpICs9IHBhbmVsLXNoYXJwLWxxMTAxcjFzeDAxLm8KK29iai0kKENPTkZJR19EUk1f
UEFORUxfU0hBUlBfTFMwMzdWN0RXMDEpICs9IHBhbmVsLXNoYXJwLWxzMDM3djdkdzAxLm8KIG9i
ai0kKENPTkZJR19EUk1fUEFORUxfU0hBUlBfTFMwNDNUMUxFMDEpICs9IHBhbmVsLXNoYXJwLWxz
MDQzdDFsZTAxLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfU0lUUk9OSVhfU1Q3NzAxKSArPSBw
YW5lbC1zaXRyb25peC1zdDc3MDEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9TSVRST05JWF9T
VDc3ODlWKSArPSBwYW5lbC1zaXRyb25peC1zdDc3ODl2Lm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9wYW5lbC9wYW5lbC1zaGFycC1sczAzN3Y3ZHcwMS5jIGIvZHJpdmVycy9ncHUvZHJt
L3BhbmVsL3BhbmVsLXNoYXJwLWxzMDM3djdkdzAxLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5k
ZXggMDAwMDAwMDAwMDAwLi40NTMyNDU1YjQxNjEKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJz
L2dwdS9kcm0vcGFuZWwvcGFuZWwtc2hhcnAtbHMwMzd2N2R3MDEuYwpAQCAtMCwwICsxLDIzMSBA
QAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKKy8qCisgKiBTaGFycCBMUzAz
N1Y3RFcwMSBMQ0QgUGFuZWwgRHJpdmVyCisgKgorICogQ29weXJpZ2h0IChDKSAyMDE5IFRleGFz
IEluc3RydW1lbnRzIEluY29ycG9yYXRlZAorICoKKyAqIEJhc2VkIG9uIHRoZSBvbWFwZHJtLXNw
ZWNpZmljIHBhbmVsLXNoYXJwLWxzMDM3djdkdzAxIGRyaXZlcgorICoKKyAqIENvcHlyaWdodCAo
QykgMjAxMyBUZXhhcyBJbnN0cnVtZW50cyBJbmNvcnBvcmF0ZWQKKyAqIEF1dGhvcjogVG9taSBW
YWxrZWluZW4gPHRvbWkudmFsa2VpbmVuQHRpLmNvbT4KKyAqLworCisjaW5jbHVkZSA8bGludXgv
ZGVsYXkuaD4KKyNpbmNsdWRlIDxsaW51eC9ncGlvL2NvbnN1bWVyLmg+CisjaW5jbHVkZSA8bGlu
dXgvbW9kdWxlLmg+CisjaW5jbHVkZSA8bGludXgvb2YuaD4KKyNpbmNsdWRlIDxsaW51eC9wbGF0
Zm9ybV9kZXZpY2UuaD4KKyNpbmNsdWRlIDxsaW51eC9yZWd1bGF0b3IvY29uc3VtZXIuaD4KKwor
I2luY2x1ZGUgPGRybS9kcm1fY29ubmVjdG9yLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9tb2Rlcy5o
PgorI2luY2x1ZGUgPGRybS9kcm1fcGFuZWwuaD4KKworc3RydWN0IGxzMDM3djdkdzAxX2Rldmlj
ZSB7CisJc3RydWN0IGRybV9wYW5lbCBwYW5lbDsKKwlzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpw
ZGV2OworCisJc3RydWN0IHJlZ3VsYXRvciAqdmNjOworCXN0cnVjdCBncGlvX2Rlc2MgKnJlc2Jf
Z3BpbzsJLyogbG93ID0gcmVzZXQgYWN0aXZlIG1pbiAyMCB1cyAqLworCXN0cnVjdCBncGlvX2Rl
c2MgKmluaV9ncGlvOwkvKiBoaWdoID0gcG93ZXIgb24gKi8KKwlzdHJ1Y3QgZ3Bpb19kZXNjICpt
b19ncGlvOwkvKiBsb3cgPSA0ODB4NjQwLCBoaWdoID0gMjQweDMyMCAqLworCXN0cnVjdCBncGlv
X2Rlc2MgKmxyX2dwaW87CS8qIGhpZ2ggPSBjb252ZW50aW9uYWwgaG9yaXpvbnRhbCBzY2Fubmlu
ZyAqLworCXN0cnVjdCBncGlvX2Rlc2MgKnVkX2dwaW87CS8qIGhpZ2ggPSBjb252ZW50aW9uYWwg
dmVydGljYWwgc2Nhbm5pbmcgKi8KK307CisKKyNkZWZpbmUgdG9fbHMwMzd2N2R3MDFfZGV2aWNl
KHApIFwKKwljb250YWluZXJfb2YocCwgc3RydWN0IGxzMDM3djdkdzAxX2RldmljZSwgcGFuZWwp
CisKK3N0YXRpYyBpbnQgbHMwMzd2N2R3MDFfZGlzYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5l
bCkKK3sKKwlzdHJ1Y3QgbHMwMzd2N2R3MDFfZGV2aWNlICpsY2QgPSB0b19sczAzN3Y3ZHcwMV9k
ZXZpY2UocGFuZWwpOworCisJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGxjZC0+aW5pX2dwaW8s
IDApOworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChsY2QtPnJlc2JfZ3BpbywgMCk7CisKKwkv
KiBXYWl0IGF0IGxlYXN0IDUgdnN5bmNzIGFmdGVyIGRpc2FibGluZyB0aGUgTENELiAqLworCW1z
bGVlcCgxMDApOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbHMwMzd2N2R3MDFfdW5w
cmVwYXJlKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCBsczAzN3Y3ZHcwMV9k
ZXZpY2UgKmxjZCA9IHRvX2xzMDM3djdkdzAxX2RldmljZShwYW5lbCk7CisKKwlpZiAobGNkLT52
Y2MpCisJCXJlZ3VsYXRvcl9kaXNhYmxlKGxjZC0+dmNjKTsKKworCXJldHVybiAwOworfQorCitz
dGF0aWMgaW50IGxzMDM3djdkdzAxX3ByZXBhcmUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCit7
CisJc3RydWN0IGxzMDM3djdkdzAxX2RldmljZSAqbGNkID0gdG9fbHMwMzd2N2R3MDFfZGV2aWNl
KHBhbmVsKTsKKwlpbnQgcmV0OworCisJaWYgKCFsY2QtPnZjYykKKwkJcmV0dXJuIDA7CisKKwly
ZXQgPSByZWd1bGF0b3JfZW5hYmxlKGxjZC0+dmNjKTsKKwlpZiAocmV0IDwgMCkKKwkJZGV2X2Vy
cigmbGNkLT5wZGV2LT5kZXYsICIlczogZmFpbGVkIHRvIGVuYWJsZSByZWd1bGF0b3JcbiIsCisJ
CQlfX2Z1bmNfXyk7CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IGxzMDM3djdkdzAx
X2VuYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgbHMwMzd2N2R3MDFf
ZGV2aWNlICpsY2QgPSB0b19sczAzN3Y3ZHcwMV9kZXZpY2UocGFuZWwpOworCisJLyogV2FpdCBj
b3VwbGUgb2YgdnN5bmNzIGJlZm9yZSBlbmFibGluZyB0aGUgTENELiAqLworCW1zbGVlcCg1MCk7
CisKKwlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAobGNkLT5yZXNiX2dwaW8sIDEpOworCWdwaW9k
X3NldF92YWx1ZV9jYW5zbGVlcChsY2QtPmluaV9ncGlvLCAxKTsKKworCXJldHVybiAwOworfQor
CitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgbHMwMzd2N2R3MDFfbW9kZSA9
IHsKKwkuY2xvY2sgPSAxOTIwMCwKKwkuaGRpc3BsYXkgPSA0ODAsCisJLmhzeW5jX3N0YXJ0ID0g
NDgwICsgMSwKKwkuaHN5bmNfZW5kID0gNDgwICsgMSArIDIsCisJLmh0b3RhbCA9IDQ4MCArIDEg
KyAyICsgMjgsCisJLnZkaXNwbGF5ID0gNjQwLAorCS52c3luY19zdGFydCA9IDY0MCArIDEsCisJ
LnZzeW5jX2VuZCA9IDY0MCArIDEgKyAxLAorCS52dG90YWwgPSA2NDAgKyAxICsgMSArIDEsCisJ
LnZyZWZyZXNoID0gNTgsCisJLnR5cGUgPSBEUk1fTU9ERV9UWVBFX0RSSVZFUiB8IERSTV9NT0RF
X1RZUEVfUFJFRkVSUkVELAorCS5mbGFncyA9IERSTV9NT0RFX0ZMQUdfTkhTWU5DIHwgRFJNX01P
REVfRkxBR19OVlNZTkMsCit9OworCitzdGF0aWMgaW50IGxzMDM3djdkdzAxX2dldF9tb2Rlcyhz
dHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVj
dG9yID0gcGFuZWwtPmNvbm5lY3RvcjsKKwlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZTsK
KworCW1vZGUgPSBkcm1fbW9kZV9kdXBsaWNhdGUocGFuZWwtPmRybSwgJmxzMDM3djdkdzAxX21v
ZGUpOworCWlmICghbW9kZSkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlkcm1fbW9kZV9zZXRfbmFt
ZShtb2RlKTsKKwlkcm1fbW9kZV9wcm9iZWRfYWRkKGNvbm5lY3RvciwgbW9kZSk7CisKKwljb25u
ZWN0b3ItPmRpc3BsYXlfaW5mby53aWR0aF9tbSA9IDU2OworCWNvbm5lY3Rvci0+ZGlzcGxheV9p
bmZvLmhlaWdodF9tbSA9IDc1OworCS8qCisJICogRklYTUU6IEFjY29yZGluZyB0byB0aGUgZGF0
YXNoZWV0IHBpeGVsIGRhdGEgaXMgc2FtcGxlZCBvbiB0aGUKKwkgKiByaXNpbmcgZWRnZSBvZiB0
aGUgY2xvY2ssIGJ1dCB0aGUgY29kZSBydW5uaW5nIG9uIHRoZSBTRFAzNDMwCisJICogaW5kaWNh
dGVzIHNhbXBsaW5nIG9uIHRoZSBuZWdhdGl2ZSBlZGdlLiBUaGlzIHNob3VsZCBiZSB0ZXN0ZWQg
b24gYQorCSAqIHJlYWwgZGV2aWNlLgorCSAqLworCWNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLmJ1
c19mbGFncyA9IERSTV9CVVNfRkxBR19ERV9ISUdICisJCQkJCSAgfCBEUk1fQlVTX0ZMQUdfU1lO
Q19TQU1QTEVfUE9TRURHRQorCQkJCQkgIHwgRFJNX0JVU19GTEFHX1BJWERBVEFfU0FNUExFX05F
R0VER0U7CisKKwlyZXR1cm4gMTsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcGFuZWxf
ZnVuY3MgbHMwMzd2N2R3MDFfZnVuY3MgPSB7CisJLmRpc2FibGUgPSBsczAzN3Y3ZHcwMV9kaXNh
YmxlLAorCS51bnByZXBhcmUgPSBsczAzN3Y3ZHcwMV91bnByZXBhcmUsCisJLnByZXBhcmUgPSBs
czAzN3Y3ZHcwMV9wcmVwYXJlLAorCS5lbmFibGUgPSBsczAzN3Y3ZHcwMV9lbmFibGUsCisJLmdl
dF9tb2RlcyA9IGxzMDM3djdkdzAxX2dldF9tb2RlcywKK307CisKK3N0YXRpYyBpbnQgbHMwMzd2
N2R3MDFfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKK3sKKwlzdHJ1Y3QgbHMw
Mzd2N2R3MDFfZGV2aWNlICpsY2Q7CisKKwlsY2QgPSBkZXZtX2t6YWxsb2MoJnBkZXYtPmRldiwg
c2l6ZW9mKCpsY2QpLCBHRlBfS0VSTkVMKTsKKwlpZiAobGNkID09IE5VTEwpCisJCXJldHVybiAt
RU5PTUVNOworCisJcGxhdGZvcm1fc2V0X2RydmRhdGEocGRldiwgbGNkKTsKKwlsY2QtPnBkZXYg
PSBwZGV2OworCisJbGNkLT52Y2MgPSBkZXZtX3JlZ3VsYXRvcl9nZXQoJnBkZXYtPmRldiwgImVu
dmRkIik7CisJaWYgKElTX0VSUihsY2QtPnZjYykpIHsKKwkJZGV2X2VycigmcGRldi0+ZGV2LCAi
ZmFpbGVkIHRvIGdldCByZWd1bGF0b3JcbiIpOworCQlyZXR1cm4gUFRSX0VSUihsY2QtPnZjYyk7
CisJfQorCisJbGNkLT5pbmlfZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0X2luZGV4KCZwZGV2LT5kZXYs
ICJlbmFibGUiLCAwLAorCQkJCQkgICAgR1BJT0RfT1VUX0xPVyk7CisJaWYgKElTX0VSUihsY2Qt
PmluaV9ncGlvKSkgeworCQlkZXZfZXJyKCZwZGV2LT5kZXYsICJmYWlsZWQgdG8gZ2V0IGVuYWJs
ZSBncGlvXG4iKTsKKwkJcmV0dXJuIFBUUl9FUlIobGNkLT5pbmlfZ3Bpbyk7CisJfQorCisJbGNk
LT5yZXNiX2dwaW8gPSBkZXZtX2dwaW9kX2dldF9pbmRleCgmcGRldi0+ZGV2LCAicmVzZXQiLCAw
LAorCQkJCQkgICAgIEdQSU9EX09VVF9MT1cpOworCWlmIChJU19FUlIobGNkLT5yZXNiX2dwaW8p
KSB7CisJCWRldl9lcnIoJnBkZXYtPmRldiwgImZhaWxlZCB0byBnZXQgcmVzZXQgZ3Bpb1xuIik7
CisJCXJldHVybiBQVFJfRVJSKGxjZC0+cmVzYl9ncGlvKTsKKwl9CisKKwlsY2QtPm1vX2dwaW8g
PSBkZXZtX2dwaW9kX2dldF9pbmRleCgmcGRldi0+ZGV2LCAibW9kZSIsIDAsCisJCQkJCSAgIEdQ
SU9EX09VVF9MT1cpOworCWlmIChJU19FUlIobGNkLT5tb19ncGlvKSkgeworCQlkZXZfZXJyKCZw
ZGV2LT5kZXYsICJmYWlsZWQgdG8gZ2V0IG1vZGVbMF0gZ3Bpb1xuIik7CisJCXJldHVybiBQVFJf
RVJSKGxjZC0+bW9fZ3Bpbyk7CisJfQorCisJbGNkLT5scl9ncGlvID0gZGV2bV9ncGlvZF9nZXRf
aW5kZXgoJnBkZXYtPmRldiwgIm1vZGUiLCAxLAorCQkJCQkgICBHUElPRF9PVVRfTE9XKTsKKwlp
ZiAoSVNfRVJSKGxjZC0+bHJfZ3BpbykpIHsKKwkJZGV2X2VycigmcGRldi0+ZGV2LCAiZmFpbGVk
IHRvIGdldCBtb2RlWzFdIGdwaW9cbiIpOworCQlyZXR1cm4gUFRSX0VSUihsY2QtPmxyX2dwaW8p
OworCX0KKworCWxjZC0+dWRfZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0X2luZGV4KCZwZGV2LT5kZXYs
ICJtb2RlIiwgMiwKKwkJCQkJICAgR1BJT0RfT1VUX0xPVyk7CisJaWYgKElTX0VSUihsY2QtPnVk
X2dwaW8pKSB7CisJCWRldl9lcnIoJnBkZXYtPmRldiwgImZhaWxlZCB0byBnZXQgbW9kZVsyXSBn
cGlvXG4iKTsKKwkJcmV0dXJuIFBUUl9FUlIobGNkLT51ZF9ncGlvKTsKKwl9CisKKwlkcm1fcGFu
ZWxfaW5pdCgmbGNkLT5wYW5lbCk7CisJbGNkLT5wYW5lbC5kZXYgPSAmcGRldi0+ZGV2OworCWxj
ZC0+cGFuZWwuZnVuY3MgPSAmbHMwMzd2N2R3MDFfZnVuY3M7CisKKwlyZXR1cm4gZHJtX3BhbmVs
X2FkZCgmbGNkLT5wYW5lbCk7Cit9CisKK3N0YXRpYyBpbnQgbHMwMzd2N2R3MDFfcmVtb3ZlKHN0
cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCit7CisJc3RydWN0IGxzMDM3djdkdzAxX2Rldmlj
ZSAqbGNkID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7CisKKwlkcm1fcGFuZWxfcmVtb3Zl
KCZsY2QtPnBhbmVsKTsKKwlsczAzN3Y3ZHcwMV9kaXNhYmxlKCZsY2QtPnBhbmVsKTsKKwlsczAz
N3Y3ZHcwMV91bnByZXBhcmUoJmxjZC0+cGFuZWwpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRp
YyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIGxzMDM3djdkdzAxX29mX21hdGNoW10gPSB7CisJ
eyAuY29tcGF0aWJsZSA9ICJzaGFycCxsczAzN3Y3ZHcwMSIsIH0sCisJe30sCit9OworCitNT0RV
TEVfREVWSUNFX1RBQkxFKG9mLCBsczAzN3Y3ZHcwMV9vZl9tYXRjaCk7CisKK3N0YXRpYyBzdHJ1
Y3QgcGxhdGZvcm1fZHJpdmVyIGxzMDM3djdkdzAxX2RyaXZlciA9IHsKKwkucHJvYmUJCT0gbHMw
Mzd2N2R3MDFfcHJvYmUsCisJLnJlbW92ZQkJPSBfX2V4aXRfcChsczAzN3Y3ZHcwMV9yZW1vdmUp
LAorCS5kcml2ZXIJCT0geworCQkubmFtZSA9ICJwYW5lbC1zaGFycC1sczAzN3Y3ZHcwMSIsCisJ
CS5vZl9tYXRjaF90YWJsZSA9IGxzMDM3djdkdzAxX29mX21hdGNoLAorCX0sCit9OworCittb2R1
bGVfcGxhdGZvcm1fZHJpdmVyKGxzMDM3djdkdzAxX2RyaXZlcik7CisKK01PRFVMRV9BVVRIT1Io
IlRvbWkgVmFsa2VpbmVuIDx0b21pLnZhbGtlaW5lbkB0aS5jb20+Iik7CitNT0RVTEVfREVTQ1JJ
UFRJT04oIlNoYXJwIExTMDM3VjdEVzAxIFBhbmVsIERyaXZlciIpOworTU9EVUxFX0xJQ0VOU0Uo
IkdQTCIpOwotLSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hhcnQKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJp
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
