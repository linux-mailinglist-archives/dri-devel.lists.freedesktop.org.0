Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B9BD19A8C9
	for <lists+dri-devel@lfdr.de>; Fri, 23 Aug 2019 09:30:54 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3E4936EBC2;
	Fri, 23 Aug 2019 07:30:45 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from onstation.org (onstation.org [52.200.56.107])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B690E6EB79;
 Thu, 22 Aug 2019 14:37:34 +0000 (UTC)
Received: from ins7386.localdomain (unknown [207.110.43.92])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: masneyb)
 by onstation.org (Postfix) with ESMTPSA id 006033E8A5;
 Thu, 22 Aug 2019 14:37:32 +0000 (UTC)
From: Brian Masney <masneyb@onstation.org>
To: agross@kernel.org, robdclark@gmail.com, sean@poorly.run,
 robh+dt@kernel.org, bjorn.andersson@linaro.org
Subject: [PATCH v6 6/7] drm/msm/gpu: add ocmem init/cleanup functions
Date: Thu, 22 Aug 2019 07:37:02 -0700
Message-Id: <20190822143703.13030-7-masneyb@onstation.org>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190822143703.13030-1-masneyb@onstation.org>
References: <20190822143703.13030-1-masneyb@onstation.org>
MIME-Version: 1.0
X-Mailman-Approved-At: Fri, 23 Aug 2019 07:30:43 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=onstation.org; s=default; t=1566484654;
 bh=+R5wxFKjGBd6xlthipoXdjnc9HnWqBhJuerO5oNP6jA=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=UU9dHboeeDk+GCgIS7gSIB8uRmqO7LfUgLTYZjbKqZStCh2Hg1X/oiO1syof8CKZr
 iKTLVzzuBEEUm9Je0Oe4hcQucfTKCVxbcfg05OHBRbr3YMkaQvsnWVvrIXVEb983gM
 S2FrkX9/+VS5RE0wZC2Furf/R+cG6UhilT5Cixv0=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org, jonathan@marek.ca,
 airlied@linux.ie, linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, freedreno@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGZpbGVzIGEzeHhfZ3B1LmMgYW5kIGE0eHhfZ3B1LmMgaGF2ZSBpZmRlZnMgZm9yIHRoZSBP
Q01FTSBzdXBwb3J0CnRoYXQgd2FzIG1pc3NpbmcgdXBzdHJlYW0uIEFkZCB0d28gbmV3IGZ1bmN0
aW9ucyAoYWRyZW5vX2dwdV9vY21lbV9pbml0CmFuZCBhZHJlbm9fZ3B1X29jbWVtX2NsZWFudXAp
IHRoYXQgcmVtb3ZlcyBzb21lIGR1cGxpY2F0ZWQgY29kZS4KClNpZ25lZC1vZmYtYnk6IEJyaWFu
IE1hc25leSA8bWFzbmV5YkBvbnN0YXRpb24ub3JnPgotLS0KQ2hhbmdlcyBzaW5jZSB2NToKLSBO
b25lCgpDaGFuZ2VzIHNpbmNlIHY0OgotIE5vbmUKCkNoYW5nZXMgc2luY2UgdjM6Ci0gTm9uZQoK
Q2hhbmdlcyBzaW5jZSB2MjoKLSBDaGVjayBmb3IgLUVOT0RFViBlcnJvciBvZl9nZXRfb2NtZW0o
KQotIHJlbW92ZSBmYWlsX2NsZWFudXBfb2NtZW0gbGFiZWwgaW4gYVszNF14eF9ncHVfaW5pdAoK
Q2hhbmdlcyBzaW5jZSB2MToKLSByZW1vdmUgQ09ORklHX1FDT01fT0NNRU0gI2lmZGVmcwotIHVz
ZSB1bnNpZ25lZCBsb25nIGZvciBtZW1vcnkgYWRkcmVzc2VzIGluc3RlYWQgb2YgdWludDMyX3QK
LSBhZGQgJ2RlcGVuZHMgb24gUUNPTV9PQ01FTSB8fCBRQ09NX09DTUVNPW4nIHRvIEtjb25maWcK
CiBkcml2ZXJzL2dwdS9kcm0vbXNtL0tjb25maWcgICAgICAgICAgICAgfCAgMSArCiBkcml2ZXJz
L2dwdS9kcm0vbXNtL2FkcmVuby9hM3h4X2dwdS5jICAgfCAyOCArKysrKy0tLS0tLS0tLS0tLQog
ZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTN4eF9ncHUuaCAgIHwgIDMgKy0KIGRyaXZlcnMv
Z3B1L2RybS9tc20vYWRyZW5vL2E0eHhfZ3B1LmMgICB8IDI1ICsrKystLS0tLS0tLS0tLS0KIGRy
aXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E0eHhfZ3B1LmggICB8ICAzICstCiBkcml2ZXJzL2dw
dS9kcm0vbXNtL2FkcmVuby9hZHJlbm9fZ3B1LmMgfCA0MCArKysrKysrKysrKysrKysrKysrKysr
KysrCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hZHJlbm9fZ3B1LmggfCAxMCArKysrKysr
CiA3IGZpbGVzIGNoYW5nZWQsIDY2IGluc2VydGlvbnMoKyksIDQ0IGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vS2NvbmZpZyBiL2RyaXZlcnMvZ3B1L2RybS9t
c20vS2NvbmZpZwppbmRleCA5YzM3ZTRkZTU4OTYuLmIzZDNiMjE3MjY1OSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL21zbS9LY29uZmlnCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vS2Nv
bmZpZwpAQCAtNyw2ICs3LDcgQEAgY29uZmlnIERSTV9NU00KIAlkZXBlbmRzIG9uIE9GICYmIENP
TU1PTl9DTEsKIAlkZXBlbmRzIG9uIE1NVQogCWRlcGVuZHMgb24gSU5URVJDT05ORUNUIHx8ICFJ
TlRFUkNPTk5FQ1QKKwlkZXBlbmRzIG9uIFFDT01fT0NNRU0gfHwgUUNPTV9PQ01FTT1uCiAJc2Vs
ZWN0IFFDT01fTURUX0xPQURFUiBpZiBBUkNIX1FDT00KIAlzZWxlY3QgUkVHVUxBVE9SCiAJc2Vs
ZWN0IERSTV9LTVNfSEVMUEVSCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVu
by9hM3h4X2dwdS5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTN4eF9ncHUuYwppbmRl
eCA1ZjdlOTgwMjhlYWYuLjdhZDE0OTM3ZmNkZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L21zbS9hZHJlbm8vYTN4eF9ncHUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9h
M3h4X2dwdS5jCkBAIC02LDEwICs2LDYgQEAKICAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgTGlu
dXggRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICAqLwogCi0jaWZkZWYgQ09ORklH
X01TTV9PQ01FTQotIyAgaW5jbHVkZSA8bWFjaC9vY21lbS5oPgotI2VuZGlmCi0KICNpbmNsdWRl
ICJhM3h4X2dwdS5oIgogCiAjZGVmaW5lIEEzWFhfSU5UMF9NQVNLIFwKQEAgLTE5NSw5ICsxOTEs
OSBAQCBzdGF0aWMgaW50IGEzeHhfaHdfaW5pdChzdHJ1Y3QgbXNtX2dwdSAqZ3B1KQogCQlncHVf
d3JpdGUoZ3B1LCBSRUdfQTNYWF9SQkJNX0dQUjBfQ1RMLCAweDAwMDAwMDAwKTsKIAogCS8qIFNl
dCB0aGUgT0NNRU0gYmFzZSBhZGRyZXNzIGZvciBBMzMwLCBldGMgKi8KLQlpZiAoYTN4eF9ncHUt
Pm9jbWVtX2hkbCkgeworCWlmIChhM3h4X2dwdS0+b2NtZW0uaGRsKSB7CiAJCWdwdV93cml0ZShn
cHUsIFJFR19BM1hYX1JCX0dNRU1fQkFTRV9BRERSLAotCQkJKHVuc2lnbmVkIGludCkoYTN4eF9n
cHUtPm9jbWVtX2Jhc2UgPj4gMTQpKTsKKwkJCSh1bnNpZ25lZCBpbnQpKGEzeHhfZ3B1LT5vY21l
bS5iYXNlID4+IDE0KSk7CiAJfQogCiAJLyogVHVybiBvbiBwZXJmb3JtYW5jZSBjb3VudGVyczog
Ki8KQEAgLTMxOCwxMCArMzE0LDcgQEAgc3RhdGljIHZvaWQgYTN4eF9kZXN0cm95KHN0cnVjdCBt
c21fZ3B1ICpncHUpCiAKIAlhZHJlbm9fZ3B1X2NsZWFudXAoYWRyZW5vX2dwdSk7CiAKLSNpZmRl
ZiBDT05GSUdfTVNNX09DTUVNCi0JaWYgKGEzeHhfZ3B1LT5vY21lbV9iYXNlKQotCQlvY21lbV9m
cmVlKE9DTUVNX0dSQVBISUNTLCBhM3h4X2dwdS0+b2NtZW1faGRsKTsKLSNlbmRpZgorCWFkcmVu
b19ncHVfb2NtZW1fY2xlYW51cCgmYTN4eF9ncHUtPm9jbWVtKTsKIAogCWtmcmVlKGEzeHhfZ3B1
KTsKIH0KQEAgLTQ5NCwxNyArNDg3LDEwIEBAIHN0cnVjdCBtc21fZ3B1ICphM3h4X2dwdV9pbml0
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiAKIAkvKiBpZiBuZWVkZWQsIGFsbG9jYXRlIGdtZW06
ICovCiAJaWYgKGFkcmVub19pc19hMzMwKGFkcmVub19ncHUpKSB7Ci0jaWZkZWYgQ09ORklHX01T
TV9PQ01FTQotCQkvKiBUT0RPIHRoaXMgaXMgZGlmZmVyZW50L21pc3NpbmcgdXBzdHJlYW06ICov
Ci0JCXN0cnVjdCBvY21lbV9idWYgKm9jbWVtX2hkbCA9Ci0JCQkJb2NtZW1fYWxsb2NhdGUoT0NN
RU1fR1JBUEhJQ1MsIGFkcmVub19ncHUtPmdtZW0pOwotCi0JCWEzeHhfZ3B1LT5vY21lbV9oZGwg
PSBvY21lbV9oZGw7Ci0JCWEzeHhfZ3B1LT5vY21lbV9iYXNlID0gb2NtZW1faGRsLT5hZGRyOwot
CQlhZHJlbm9fZ3B1LT5nbWVtID0gb2NtZW1faGRsLT5sZW47Ci0JCURCRygidXNpbmcgJWRLIG9m
IE9DTUVNIGF0IDB4JTA4eCIsIGFkcmVub19ncHUtPmdtZW0gLyAxMDI0LAotCQkJCWEzeHhfZ3B1
LT5vY21lbV9iYXNlKTsKLSNlbmRpZgorCQlyZXQgPSBhZHJlbm9fZ3B1X29jbWVtX2luaXQoJmFk
cmVub19ncHUtPmJhc2UucGRldi0+ZGV2LAorCQkJCQkgICAgYWRyZW5vX2dwdSwgJmEzeHhfZ3B1
LT5vY21lbSk7CisJCWlmIChyZXQpCisJCQlnb3RvIGZhaWw7CiAJfQogCiAJaWYgKCFncHUtPmFz
cGFjZSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTN4eF9ncHUu
aCBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2EzeHhfZ3B1LmgKaW5kZXggNWRjMzNlNWVh
NTNiLi5jNTU1ZmIxM2UwZDcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5v
L2EzeHhfZ3B1LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTN4eF9ncHUuaApA
QCAtMTksOCArMTksNyBAQCBzdHJ1Y3QgYTN4eF9ncHUgewogCXN0cnVjdCBhZHJlbm9fZ3B1IGJh
c2U7CiAKIAkvKiBpZiBPQ01FTSBpcyB1c2VkIGZvciBHTUVNOiAqLwotCXVpbnQzMl90IG9jbWVt
X2Jhc2U7Ci0Jdm9pZCAqb2NtZW1faGRsOworCXN0cnVjdCBhZHJlbm9fb2NtZW0gb2NtZW07CiB9
OwogI2RlZmluZSB0b19hM3h4X2dwdSh4KSBjb250YWluZXJfb2YoeCwgc3RydWN0IGEzeHhfZ3B1
LCBiYXNlKQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNHh4X2dw
dS5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTR4eF9ncHUuYwppbmRleCBhYjJiNzUy
NTY2ZDguLmIwMTM4OGE5ZTg5ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJl
bm8vYTR4eF9ncHUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNHh4X2dwdS5j
CkBAIC0yLDkgKzIsNiBAQAogLyogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSBMaW51eCBGb3VuZGF0
aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogICovCiAjaW5jbHVkZSAiYTR4eF9ncHUuaCIKLSNp
ZmRlZiBDT05GSUdfTVNNX09DTUVNCi0jICBpbmNsdWRlIDxzb2MvcWNvbS9vY21lbS5oPgotI2Vu
ZGlmCiAKICNkZWZpbmUgQTRYWF9JTlQwX01BU0sgXAogCShBNFhYX0lOVDBfUkJCTV9BSEJfRVJS
T1IgfCAgICAgICAgXApAQCAtMTg4LDcgKzE4NSw3IEBAIHN0YXRpYyBpbnQgYTR4eF9od19pbml0
KHN0cnVjdCBtc21fZ3B1ICpncHUpCiAJCQkoMSA8PCAzMCkgfCAweEZGRkYpOwogCiAJZ3B1X3dy
aXRlKGdwdSwgUkVHX0E0WFhfUkJfR01FTV9CQVNFX0FERFIsCi0JCQkodW5zaWduZWQgaW50KShh
NHh4X2dwdS0+b2NtZW1fYmFzZSA+PiAxNCkpOworCQkJKHVuc2lnbmVkIGludCkoYTR4eF9ncHUt
Pm9jbWVtLmJhc2UgPj4gMTQpKTsKIAogCS8qIFR1cm4gb24gcGVyZm9ybWFuY2UgY291bnRlcnM6
ICovCiAJZ3B1X3dyaXRlKGdwdSwgUkVHX0E0WFhfUkJCTV9QRVJGQ1RSX0NUTCwgMHgwMSk7CkBA
IC0zMTgsMTAgKzMxNSw3IEBAIHN0YXRpYyB2b2lkIGE0eHhfZGVzdHJveShzdHJ1Y3QgbXNtX2dw
dSAqZ3B1KQogCiAJYWRyZW5vX2dwdV9jbGVhbnVwKGFkcmVub19ncHUpOwogCi0jaWZkZWYgQ09O
RklHX01TTV9PQ01FTQotCWlmIChhNHh4X2dwdS0+b2NtZW1fYmFzZSkKLQkJb2NtZW1fZnJlZShP
Q01FTV9HUkFQSElDUywgYTR4eF9ncHUtPm9jbWVtX2hkbCk7Ci0jZW5kaWYKKwlhZHJlbm9fZ3B1
X29jbWVtX2NsZWFudXAoJmE0eHhfZ3B1LT5vY21lbSk7CiAKIAlrZnJlZShhNHh4X2dwdSk7CiB9
CkBAIC01NzgsMTcgKzU3MiwxMCBAQCBzdHJ1Y3QgbXNtX2dwdSAqYTR4eF9ncHVfaW5pdChzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2KQogCiAJLyogaWYgbmVlZGVkLCBhbGxvY2F0ZSBnbWVtOiAqLwog
CWlmIChhZHJlbm9faXNfYTR4eChhZHJlbm9fZ3B1KSkgewotI2lmZGVmIENPTkZJR19NU01fT0NN
RU0KLQkJLyogVE9ETyB0aGlzIGlzIGRpZmZlcmVudC9taXNzaW5nIHVwc3RyZWFtOiAqLwotCQlz
dHJ1Y3Qgb2NtZW1fYnVmICpvY21lbV9oZGwgPQotCQkJCW9jbWVtX2FsbG9jYXRlKE9DTUVNX0dS
QVBISUNTLCBhZHJlbm9fZ3B1LT5nbWVtKTsKLQotCQlhNHh4X2dwdS0+b2NtZW1faGRsID0gb2Nt
ZW1faGRsOwotCQlhNHh4X2dwdS0+b2NtZW1fYmFzZSA9IG9jbWVtX2hkbC0+YWRkcjsKLQkJYWRy
ZW5vX2dwdS0+Z21lbSA9IG9jbWVtX2hkbC0+bGVuOwotCQlEQkcoInVzaW5nICVkSyBvZiBPQ01F
TSBhdCAweCUwOHgiLCBhZHJlbm9fZ3B1LT5nbWVtIC8gMTAyNCwKLQkJCQlhNHh4X2dwdS0+b2Nt
ZW1fYmFzZSk7Ci0jZW5kaWYKKwkJcmV0ID0gYWRyZW5vX2dwdV9vY21lbV9pbml0KGRldi0+ZGV2
LCBhZHJlbm9fZ3B1LAorCQkJCQkgICAgJmE0eHhfZ3B1LT5vY21lbSk7CisJCWlmIChyZXQpCisJ
CQlnb3RvIGZhaWw7CiAJfQogCiAJaWYgKCFncHUtPmFzcGFjZSkgewpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTR4eF9ncHUuaCBiL2RyaXZlcnMvZ3B1L2RybS9tc20v
YWRyZW5vL2E0eHhfZ3B1LmgKaW5kZXggZDUwNjMxMWVlMjQwLi5hMDE0NDhjYmEyZWEgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E0eHhfZ3B1LmgKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL21zbS9hZHJlbm8vYTR4eF9ncHUuaApAQCAtMTYsOCArMTYsNyBAQCBzdHJ1Y3Qg
YTR4eF9ncHUgewogCXN0cnVjdCBhZHJlbm9fZ3B1IGJhc2U7CiAKIAkvKiBpZiBPQ01FTSBpcyB1
c2VkIGZvciBHTUVNOiAqLwotCXVpbnQzMl90IG9jbWVtX2Jhc2U7Ci0Jdm9pZCAqb2NtZW1faGRs
OworCXN0cnVjdCBhZHJlbm9fb2NtZW0gb2NtZW07CiB9OwogI2RlZmluZSB0b19hNHh4X2dwdSh4
KSBjb250YWluZXJfb2YoeCwgc3RydWN0IGE0eHhfZ3B1LCBiYXNlKQogCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hZHJlbm9fZ3B1LmMgYi9kcml2ZXJzL2dwdS9kcm0v
bXNtL2FkcmVuby9hZHJlbm9fZ3B1LmMKaW5kZXggMDQ4YzhiZTQyNmYzLi4wNzgzZTRiNTQ4NmEg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hZHJlbm9fZ3B1LmMKQEAgLTE0LDYgKzE0LDcg
QEAKICNpbmNsdWRlIDxsaW51eC9wbV9vcHAuaD4KICNpbmNsdWRlIDxsaW51eC9zbGFiLmg+CiAj
aW5jbHVkZSA8bGludXgvc29jL3Fjb20vbWR0X2xvYWRlci5oPgorI2luY2x1ZGUgPHNvYy9xY29t
L29jbWVtLmg+CiAjaW5jbHVkZSAiYWRyZW5vX2dwdS5oIgogI2luY2x1ZGUgIm1zbV9nZW0uaCIK
ICNpbmNsdWRlICJtc21fbW11LmgiCkBAIC04OTMsNiArODk0LDQ1IEBAIHN0YXRpYyBpbnQgYWRy
ZW5vX2dldF9wd3JsZXZlbHMoc3RydWN0IGRldmljZSAqZGV2LAogCXJldHVybiAwOwogfQogCitp
bnQgYWRyZW5vX2dwdV9vY21lbV9pbml0KHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGFkcmVu
b19ncHUgKmFkcmVub19ncHUsCisJCQkgIHN0cnVjdCBhZHJlbm9fb2NtZW0gKmFkcmVub19vY21l
bSkKK3sKKwlzdHJ1Y3Qgb2NtZW1fYnVmICpvY21lbV9oZGw7CisJc3RydWN0IG9jbWVtICpvY21l
bTsKKworCW9jbWVtID0gb2ZfZ2V0X29jbWVtKGRldik7CisJaWYgKElTX0VSUihvY21lbSkpIHsK
KwkJaWYgKFBUUl9FUlIob2NtZW0pID09IC1FTk9ERVYpIHsKKwkJCS8qCisJCQkgKiBSZXR1cm4g
c3VjY2VzcyBzaW5jZSBlaXRoZXIgdGhlIG9jbWVtIHByb3BlcnR5IHdhcworCQkJICogbm90IHNw
ZWNpZmllZCBpbiBkZXZpY2UgdHJlZSwgb3Igb2NtZW0gc3VwcG9ydCBpcworCQkJICogbm90IGNv
bXBpbGVkIGludG8gdGhlIGtlcm5lbC4KKwkJCSAqLworCQkJcmV0dXJuIDA7CisJCX0KKworCQly
ZXR1cm4gUFRSX0VSUihvY21lbSk7CisJfQorCisJb2NtZW1faGRsID0gb2NtZW1fYWxsb2NhdGUo
b2NtZW0sIE9DTUVNX0dSQVBISUNTLCBhZHJlbm9fZ3B1LT5nbWVtKTsKKwlpZiAoSVNfRVJSKG9j
bWVtX2hkbCkpCisJCXJldHVybiBQVFJfRVJSKG9jbWVtX2hkbCk7CisKKwlhZHJlbm9fb2NtZW0t
Pm9jbWVtID0gb2NtZW07CisJYWRyZW5vX29jbWVtLT5iYXNlID0gb2NtZW1faGRsLT5hZGRyOwor
CWFkcmVub19vY21lbS0+aGRsID0gb2NtZW1faGRsOworCWFkcmVub19ncHUtPmdtZW0gPSBvY21l
bV9oZGwtPmxlbjsKKworCXJldHVybiAwOworfQorCit2b2lkIGFkcmVub19ncHVfb2NtZW1fY2xl
YW51cChzdHJ1Y3QgYWRyZW5vX29jbWVtICphZHJlbm9fb2NtZW0pCit7CisJaWYgKGFkcmVub19v
Y21lbSAmJiBhZHJlbm9fb2NtZW0tPmJhc2UpCisJCW9jbWVtX2ZyZWUoYWRyZW5vX29jbWVtLT5v
Y21lbSwgT0NNRU1fR1JBUEhJQ1MsCisJCQkgICBhZHJlbm9fb2NtZW0tPmhkbCk7Cit9CisKIGlu
dCBhZHJlbm9fZ3B1X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRybSwgc3RydWN0IHBsYXRmb3Jt
X2RldmljZSAqcGRldiwKIAkJc3RydWN0IGFkcmVub19ncHUgKmFkcmVub19ncHUsCiAJCWNvbnN0
IHN0cnVjdCBhZHJlbm9fZ3B1X2Z1bmNzICpmdW5jcywgaW50IG5yX3JpbmdzKQpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2dwdS5oIGIvZHJpdmVycy9ncHUv
ZHJtL21zbS9hZHJlbm8vYWRyZW5vX2dwdS5oCmluZGV4IGM3NDQxZmI4MzEzZS4uZDIyNWE4YTky
ZTU4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hZHJlbm9fZ3B1LmgK
KysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2dwdS5oCkBAIC0xMjYsNiAr
MTI2LDEyIEBAIHN0cnVjdCBhZHJlbm9fZ3B1IHsKIH07CiAjZGVmaW5lIHRvX2FkcmVub19ncHUo
eCkgY29udGFpbmVyX29mKHgsIHN0cnVjdCBhZHJlbm9fZ3B1LCBiYXNlKQogCitzdHJ1Y3QgYWRy
ZW5vX29jbWVtIHsKKwlzdHJ1Y3Qgb2NtZW0gKm9jbWVtOworCXVuc2lnbmVkIGxvbmcgYmFzZTsK
Kwl2b2lkICpoZGw7Cit9OworCiAvKiBwbGF0Zm9ybSBjb25maWcgZGF0YSAoaWUuIGZyb20gRFQs
IG9yIHBkYXRhKSAqLwogc3RydWN0IGFkcmVub19wbGF0Zm9ybV9jb25maWcgewogCXN0cnVjdCBh
ZHJlbm9fcmV2IHJldjsKQEAgLTIzNiw2ICsyNDIsMTAgQEAgdm9pZCBhZHJlbm9fZHVtcChzdHJ1
Y3QgbXNtX2dwdSAqZ3B1KTsKIHZvaWQgYWRyZW5vX3dhaXRfcmluZyhzdHJ1Y3QgbXNtX3Jpbmdi
dWZmZXIgKnJpbmcsIHVpbnQzMl90IG5kd29yZHMpOwogc3RydWN0IG1zbV9yaW5nYnVmZmVyICph
ZHJlbm9fYWN0aXZlX3Jpbmcoc3RydWN0IG1zbV9ncHUgKmdwdSk7CiAKK2ludCBhZHJlbm9fZ3B1
X29jbWVtX2luaXQoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgYWRyZW5vX2dwdSAqYWRyZW5v
X2dwdSwKKwkJCSAgc3RydWN0IGFkcmVub19vY21lbSAqb2NtZW0pOwordm9pZCBhZHJlbm9fZ3B1
X29jbWVtX2NsZWFudXAoc3RydWN0IGFkcmVub19vY21lbSAqb2NtZW0pOworCiBpbnQgYWRyZW5v
X2dwdV9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkcm0sIHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2Ug
KnBkZXYsCiAJCXN0cnVjdCBhZHJlbm9fZ3B1ICpncHUsIGNvbnN0IHN0cnVjdCBhZHJlbm9fZ3B1
X2Z1bmNzICpmdW5jcywKIAkJaW50IG5yX3JpbmdzKTsKLS0gCjIuMjEuMAoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
