Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AD6D7184C55
	for <lists+dri-devel@lfdr.de>; Fri, 13 Mar 2020 17:21:31 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 87F396EC19;
	Fri, 13 Mar 2020 16:21:29 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A212C6EC0D;
 Fri, 13 Mar 2020 16:21:27 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga001.jf.intel.com ([10.7.209.18])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 13 Mar 2020 09:21:27 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,549,1574150400"; d="scan'208";a="322834965"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga001.jf.intel.com with SMTP; 13 Mar 2020 09:21:25 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 13 Mar 2020 18:21:24 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 9/9] drm/edid: Fix DispID tile parsing for override EDID
Date: Fri, 13 Mar 2020 18:20:54 +0200
Message-Id: <20200313162054.16009-10-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200313162054.16009-1-ville.syrjala@linux.intel.com>
References: <20200313162054.16009-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkN1
cnJlbnRseSB0aGUgRGlzcElEIHRpbGUgYmxvY2sgZ2V0cyBwYXJzZWQgaW4gZHJtX2dldF9lZGlk
KCksIHdoaWNoCmlzIGFuIG9kZCBwbGFjZSBmb3IgaXQgY29uc2lkZXJpbmcgd2UgcGFyc2Ugbm90
aGluZyBlbHNlIHRoZXJlLiBBbHNvCnRoaXMgZG9lc24ndCB3b3JrIGZvciBvdmVycmlkZSBFRElE
cyBzaW5jZQpkcm1fY29ubmVjdG9yX3VwZGF0ZV9lZGlkX3Byb3BlcnR5KCkgcmVmdXNlcyB0byBk
byBpdHMgam9iIHR3aWNlCmluIHN1Y2ggY2FzZXMuIFRodXMgd2UgbmV2ZXIgdXBkYXRlIHRoZSB0
aWxlIHByb3BlcnR5IHdpdGggcmVzdWx0cwpvZiB0aGUgRGlzcElEIHRpbGUgYmxvY2sgcGFyc2lu
ZyBkdXJpbmcgZHJtX2dldF9lZGlkKCkuCgpUbyBmaXggdGhpcyBsZXQncyBqdXN0IG1vdmUgdGhl
IHRpbGUgYmxvY2sgcGFyc2luZyB0byBoYXBwZW4gZHVyaW5nCmRybV9jb25uZWN0b3JfdXBkYXRl
X2VkaWRfcHJvcGVydHkoKSwgd2hpY2ggaXMgd2hlcmUgd2UgcGFyc2UgYSBidW5jaApvZiBvdGhl
ciBzdHVmZiBhcyB3ZWxsIChhbmQgd2hlcmUgd2UgdXBkYXRlIGJvdGggdGhlIEVESUQgYW5kIHRp
bGUKcHJvcGVydGllcykuCgpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5
cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fY29ubmVjdG9y
LmMgICAgIHwgIDIgKysKIGRyaXZlcnMvZ3B1L2RybS9kcm1fY3J0Y19pbnRlcm5hbC5oIHwgIDEg
KwogZHJpdmVycy9ncHUvZHJtL2RybV9lZGlkLmMgICAgICAgICAgfCAzMyArKysrKysrKystLS0t
LS0tLS0tLS0tLS0tLS0tLQogMyBmaWxlcyBjaGFuZ2VkLCAxMyBpbnNlcnRpb25zKCspLCAyMyBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2Nvbm5lY3Rvci5j
IGIvZHJpdmVycy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYwppbmRleCA0NjJkOGNhYTZlNzIuLmIx
MDk5ZTEyNTFhMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2Nvbm5lY3Rvci5jCkBAIC0xOTcwLDYgKzE5NzAsOCBA
QCBpbnQgZHJtX2Nvbm5lY3Rvcl91cGRhdGVfZWRpZF9wcm9wZXJ0eShzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubmVjdG9yLAogCWVsc2UKIAkJZHJtX3Jlc2V0X2Rpc3BsYXlfaW5mbyhjb25uZWN0
b3IpOwogCisJZHJtX3VwZGF0ZV90aWxlX2luZm8oY29ubmVjdG9yLCBlZGlkKTsKKwogCWRybV9v
YmplY3RfcHJvcGVydHlfc2V0X3ZhbHVlKCZjb25uZWN0b3ItPmJhc2UsCiAJCQkJICAgICAgZGV2
LT5tb2RlX2NvbmZpZy5ub25fZGVza3RvcF9wcm9wZXJ0eSwKIAkJCQkgICAgICBjb25uZWN0b3It
PmRpc3BsYXlfaW5mby5ub25fZGVza3RvcCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
ZHJtX2NydGNfaW50ZXJuYWwuaCBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fY3J0Y19pbnRlcm5hbC5o
CmluZGV4IDE2ZjI0MTM0MDNhYS4uZmViYTY4M2MxMmE2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vZHJtX2NydGNfaW50ZXJuYWwuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2NydGNf
aW50ZXJuYWwuaApAQCAtMjc4LDMgKzI3OCw0IEBAIGludCBkcm1fbW9kZV9wYWdlX2ZsaXBfaW9j
dGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIHZvaWQgZHJtX21vZGVfZml4dXBfMTM2Nng3Njgo
c3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpOwogdm9pZCBkcm1fcmVzZXRfZGlzcGxheV9p
bmZvKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpOwogdTMyIGRybV9hZGRfZGlzcGxh
eV9pbmZvKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsIGNvbnN0IHN0cnVjdCBlZGlk
ICplZGlkKTsKK3ZvaWQgZHJtX3VwZGF0ZV90aWxlX2luZm8oc3RydWN0IGRybV9jb25uZWN0b3Ig
KmNvbm5lY3RvciwgY29uc3Qgc3RydWN0IGVkaWQgKmVkaWQpOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2RybV9lZGlkLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2VkaWQuYwppbmRleCAx
ODUwMjdmNzUxZjYuLjgyMzlmZDVhMzM1ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ry
bV9lZGlkLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9lZGlkLmMKQEAgLTE1ODMsOCArMTU4
Myw2IEBAIG1vZHVsZV9wYXJhbV9uYW1lZChlZGlkX2ZpeHVwLCBlZGlkX2ZpeHVwLCBpbnQsIDA0
MDApOwogTU9EVUxFX1BBUk1fREVTQyhlZGlkX2ZpeHVwLAogCQkgIk1pbmltdW0gbnVtYmVyIG9m
IHZhbGlkIEVESUQgaGVhZGVyIGJ5dGVzICgwLTgsIGRlZmF1bHQgNikiKTsKIAotc3RhdGljIHZv
aWQgZHJtX2dldF9kaXNwbGF5aWQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKLQkJ
CSAgICAgIHN0cnVjdCBlZGlkICplZGlkKTsKIHN0YXRpYyBpbnQgdmFsaWRhdGVfZGlzcGxheWlk
KHU4ICpkaXNwbGF5aWQsIGludCBsZW5ndGgsIGludCBpZHgpOwogCiBzdGF0aWMgaW50IGRybV9l
ZGlkX2Jsb2NrX2NoZWNrc3VtKGNvbnN0IHU4ICpyYXdfZWRpZCkKQEAgLTIwMTgsMTggKzIwMTYs
MTMgQEAgRVhQT1JUX1NZTUJPTChkcm1fcHJvYmVfZGRjKTsKIHN0cnVjdCBlZGlkICpkcm1fZ2V0
X2VkaWQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKIAkJCSAgc3RydWN0IGkyY19h
ZGFwdGVyICphZGFwdGVyKQogewotCXN0cnVjdCBlZGlkICplZGlkOwotCiAJaWYgKGNvbm5lY3Rv
ci0+Zm9yY2UgPT0gRFJNX0ZPUkNFX09GRikKIAkJcmV0dXJuIE5VTEw7CiAKIAlpZiAoY29ubmVj
dG9yLT5mb3JjZSA9PSBEUk1fRk9SQ0VfVU5TUEVDSUZJRUQgJiYgIWRybV9wcm9iZV9kZGMoYWRh
cHRlcikpCiAJCXJldHVybiBOVUxMOwogCi0JZWRpZCA9IGRybV9kb19nZXRfZWRpZChjb25uZWN0
b3IsIGRybV9kb19wcm9iZV9kZGNfZWRpZCwgYWRhcHRlcik7Ci0JaWYgKGVkaWQpCi0JCWRybV9n
ZXRfZGlzcGxheWlkKGNvbm5lY3RvciwgZWRpZCk7Ci0JcmV0dXJuIGVkaWQ7CisJcmV0dXJuIGRy
bV9kb19nZXRfZWRpZChjb25uZWN0b3IsIGRybV9kb19wcm9iZV9kZGNfZWRpZCwgYWRhcHRlcik7
CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9nZXRfZWRpZCk7CiAKQEAgLTU3OTMsOSArNTc4Niw5IEBA
IGRybV9oZG1pX3ZlbmRvcl9pbmZvZnJhbWVfZnJvbV9kaXNwbGF5X21vZGUoc3RydWN0IGhkbWlf
dmVuZG9yX2luZm9mcmFtZSAqZnJhbWUsCiBFWFBPUlRfU1lNQk9MKGRybV9oZG1pX3ZlbmRvcl9p
bmZvZnJhbWVfZnJvbV9kaXNwbGF5X21vZGUpOwogCiBzdGF0aWMgaW50IGRybV9wYXJzZV90aWxl
ZF9ibG9jayhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAotCQkJCSBzdHJ1Y3QgZGlz
cGxheWlkX2Jsb2NrICpibG9jaykKKwkJCQkgY29uc3Qgc3RydWN0IGRpc3BsYXlpZF9ibG9jayAq
YmxvY2spCiB7Ci0Jc3RydWN0IGRpc3BsYXlpZF90aWxlZF9ibG9jayAqdGlsZSA9IChzdHJ1Y3Qg
ZGlzcGxheWlkX3RpbGVkX2Jsb2NrICopYmxvY2s7CisJY29uc3Qgc3RydWN0IGRpc3BsYXlpZF90
aWxlZF9ibG9jayAqdGlsZSA9IChzdHJ1Y3QgZGlzcGxheWlkX3RpbGVkX2Jsb2NrICopYmxvY2s7
CiAJdTE2IHcsIGg7CiAJdTggdGlsZV92X2xvYywgdGlsZV9oX2xvYzsKIAl1OCBudW1fdl90aWxl
LCBudW1faF90aWxlOwpAQCAtNTg0NiwxMCArNTgzOSwxMCBAQCBzdGF0aWMgaW50IGRybV9wYXJz
ZV90aWxlZF9ibG9jayhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCXJldHVybiAw
OwogfQogCi1zdGF0aWMgaW50IGRybV9wYXJzZV9kaXNwbGF5X2lkKHN0cnVjdCBkcm1fY29ubmVj
dG9yICpjb25uZWN0b3IsCi0JCQkJdTggKmRpc3BsYXlpZCwgaW50IGxlbmd0aCwgaW50IGlkeCkK
K3N0YXRpYyBpbnQgZHJtX2Rpc3BsYXlpZF9wYXJzZV90aWxlZChzdHJ1Y3QgZHJtX2Nvbm5lY3Rv
ciAqY29ubmVjdG9yLAorCQkJCSAgICAgY29uc3QgdTggKmRpc3BsYXlpZCwgaW50IGxlbmd0aCwg
aW50IGlkeCkKIHsKLQlzdHJ1Y3QgZGlzcGxheWlkX2Jsb2NrICpibG9jazsKKwljb25zdCBzdHJ1
Y3QgZGlzcGxheWlkX2Jsb2NrICpibG9jazsKIAlpbnQgcmV0OwogCiAJaWR4ICs9IHNpemVvZihz
dHJ1Y3QgZGlzcGxheWlkX2hkcik7CkBAIC01ODYzLDEyICs1ODU2LDYgQEAgc3RhdGljIGludCBk
cm1fcGFyc2VfZGlzcGxheV9pZChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQkJ
aWYgKHJldCkKIAkJCQlyZXR1cm4gcmV0OwogCQkJYnJlYWs7Ci0JCWNhc2UgREFUQV9CTE9DS19U
WVBFXzFfREVUQUlMRURfVElNSU5HOgotCQkJLyogaGFuZGxlZCBpbiBtb2RlIGdhdGhlcmluZyBj
b2RlLiAqLwotCQkJYnJlYWs7Ci0JCWNhc2UgREFUQV9CTE9DS19DVEE6Ci0JCQkvKiBoYW5kbGVk
IGluIHRoZSBjZWEgcGFyc2VyIGNvZGUuICovCi0JCQlicmVhazsKIAkJZGVmYXVsdDoKIAkJCURS
TV9ERUJVR19LTVMoImZvdW5kIERpc3BsYXlJRCB0YWcgMHgleCwgdW5oYW5kbGVkXG4iLCBibG9j
ay0+dGFnKTsKIAkJCWJyZWFrOwpAQCAtNTg3NywxMCArNTg2NCwxMCBAQCBzdGF0aWMgaW50IGRy
bV9wYXJzZV9kaXNwbGF5X2lkKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCiAJcmV0
dXJuIDA7CiB9CiAKLXN0YXRpYyB2b2lkIGRybV9nZXRfZGlzcGxheWlkKHN0cnVjdCBkcm1fY29u
bmVjdG9yICpjb25uZWN0b3IsCi0JCQkgICAgICBzdHJ1Y3QgZWRpZCAqZWRpZCkKK3ZvaWQgZHJt
X3VwZGF0ZV90aWxlX2luZm8oc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKKwkJCSAg
Y29uc3Qgc3RydWN0IGVkaWQgKmVkaWQpCiB7Ci0Jdm9pZCAqZGlzcGxheWlkID0gTlVMTDsKKwlj
b25zdCB2b2lkICpkaXNwbGF5aWQgPSBOVUxMOwogCWludCBsZW5ndGgsIGlkeDsKIAlpbnQgcmV0
OwogCkBAIC01ODkxLDcgKzU4NzgsNyBAQCBzdGF0aWMgdm9pZCBkcm1fZ2V0X2Rpc3BsYXlpZChz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQlnb3RvIG91dF9kcm9wX3JlZjsKIAl9
CiAKLQlyZXQgPSBkcm1fcGFyc2VfZGlzcGxheV9pZChjb25uZWN0b3IsIGRpc3BsYXlpZCwgbGVu
Z3RoLCBpZHgpOworCXJldCA9IGRybV9kaXNwbGF5aWRfcGFyc2VfdGlsZWQoY29ubmVjdG9yLCBk
aXNwbGF5aWQsIGxlbmd0aCwgaWR4KTsKIAlpZiAocmV0IDwgMCkKIAkJZ290byBvdXRfZHJvcF9y
ZWY7CiAJaWYgKCFjb25uZWN0b3ItPmhhc190aWxlKQotLSAKMi4yNC4xCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0
CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
