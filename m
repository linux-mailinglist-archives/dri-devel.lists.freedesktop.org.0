Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3D2C9F41DB
	for <lists+dri-devel@lfdr.de>; Fri,  8 Nov 2019 09:14:08 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DCDA76F86D;
	Fri,  8 Nov 2019 08:12:58 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from hqemgate15.nvidia.com (hqemgate15.nvidia.com [216.228.121.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3B6256E4F8;
 Thu,  7 Nov 2019 19:39:47 +0000 (UTC)
Received: from hqpgpgate101.nvidia.com (Not Verified[216.228.121.13]) by
 hqemgate15.nvidia.com (using TLS: TLSv1.2, DES-CBC3-SHA)
 id <B5dc472c60000>; Thu, 07 Nov 2019 11:38:46 -0800
Received: from hqmail.nvidia.com ([172.20.161.6])
 by hqpgpgate101.nvidia.com (PGP Universal service);
 Thu, 07 Nov 2019 11:39:46 -0800
X-PGP-Universal: processed;
 by hqpgpgate101.nvidia.com on Thu, 07 Nov 2019 11:39:46 -0800
Received: from [10.25.75.102] (172.20.13.39) by HQMAIL107.nvidia.com
 (172.20.187.13) with Microsoft SMTP Server (TLS) id 15.0.1473.3; Thu, 7 Nov
 2019 19:39:24 +0000
Subject: Re: [PATCH V11 3/6] mdev: introduce device specific ops
To: Jason Wang <jasowang@redhat.com>, <kvm@vger.kernel.org>,
 <linux-s390@vger.kernel.org>, <linux-kernel@vger.kernel.org>,
 <dri-devel@lists.freedesktop.org>, <intel-gfx@lists.freedesktop.org>,
 <intel-gvt-dev@lists.freedesktop.org>, <alex.williamson@redhat.com>,
 <mst@redhat.com>, <tiwei.bie@intel.com>
References: <20191107151109.23261-1-jasowang@redhat.com>
 <20191107151109.23261-4-jasowang@redhat.com>
X-Nvconfidentiality: public
From: Kirti Wankhede <kwankhede@nvidia.com>
Message-ID: <26a2dedf-c8c6-ba0b-1a73-9fec082d572e@nvidia.com>
Date: Fri, 8 Nov 2019 01:09:18 +0530
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101
 Thunderbird/68.1.2
MIME-Version: 1.0
In-Reply-To: <20191107151109.23261-4-jasowang@redhat.com>
X-Originating-IP: [172.20.13.39]
X-ClientProxiedBy: HQMAIL107.nvidia.com (172.20.187.13) To
 HQMAIL107.nvidia.com (172.20.187.13)
Content-Language: en-US
X-Mailman-Approved-At: Fri, 08 Nov 2019 08:12:31 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=nvidia.com; s=n1; 
 t=1573155526; bh=huOsw4TCJvN0fCSwZr8zZKc46u8D7LDIYCH44uLPByk=;
 h=X-PGP-Universal:Subject:To:CC:References:X-Nvconfidentiality:From:
 Message-ID:Date:User-Agent:MIME-Version:In-Reply-To:
 X-Originating-IP:X-ClientProxiedBy:Content-Type:Content-Language:
 Content-Transfer-Encoding;
 b=fgFJhL4ZMHKuwtWgiTjpTbe0lBksRKOjY6CgrMRKwQiGok3kEWAIQmMac9Mhf2X0X
 6BbW1W1QFzsqi2Hw3PReZOgC+2zx5o2Gp9evETcX6ci6lFkkf4FRyksddGIO86bMRe
 sD3apfwEjPF8f9wzwelk/Y/CmCSvIuQfNEEAkPE8GPwwtWsCkzw8QIKlzXFrRg+x1F
 ZoTYAQ1Gpn1kEh+UTrtFNTOn1izXHKm0nT7onq0h4KbCEIMxoROUt71aEqF4qvIEU/
 FEyH0UTIuA6XZh3kqHvnkC8OkXEJi2R/tHF2yZ9M+QsLd/fr59aJOZ2Bjm5q7ML9gt
 bOVvAHVMCJFpg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: rdunlap@infradead.org, christophe.de.dinechin@gmail.com,
 sebott@linux.ibm.com, airlied@linux.ie, heiko.carstens@de.ibm.com,
 kevin.tian@intel.com, virtualization@lists.linux-foundation.org,
 rob.miller@broadcom.com, lulu@redhat.com, eperezma@redhat.com,
 pasic@linux.ibm.com, borntraeger@de.ibm.com, haotian.wang@sifive.com,
 zhi.a.wang@intel.com, farman@linux.ibm.com, parav@mellanox.com,
 gor@linux.ibm.com, cunming.liang@intel.com, rodrigo.vivi@intel.com,
 xiao.w.wang@intel.com, freude@linux.ibm.com, stefanha@redhat.com,
 zhihong.wang@intel.com, akrowiak@linux.ibm.com, netdev@vger.kernel.org,
 cohuck@redhat.com, oberpar@linux.ibm.com, maxime.coquelin@redhat.com,
 lingshan.zhu@intel.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

CgpPbiAxMS83LzIwMTkgODo0MSBQTSwgSmFzb24gV2FuZyB3cm90ZToKPiBDdXJyZW50bHksIGV4
Y2VwdCBmb3IgdGhlIGNyZWF0ZSBhbmQgcmVtb3ZlLCB0aGUgcmVzdCBvZgo+IG1kZXZfcGFyZW50
X29wcyBpcyBkZXNpZ25lZCBmb3IgdmZpby1tZGV2IGRyaXZlciBvbmx5IGFuZCBtYXkgbm90IGhl
bHAKPiBmb3Iga2VybmVsIG1kZXYgZHJpdmVyLiBXaXRoIHRoZSBoZWxwIG9mIGNsYXNzIGlkLCB0
aGlzIHBhdGNoCj4gaW50cm9kdWNlcyBkZXZpY2Ugc3BlY2lmaWMgY2FsbGJhY2tzIGluc2lkZSBt
ZGV2X2RldmljZQo+IHN0cnVjdHVyZS4gVGhpcyBhbGxvd3MgZGlmZmVyZW50IHNldCBvZiBjYWxs
YmFjayB0byBiZSB1c2VkIGJ5Cj4gdmZpby1tZGV2IGFuZCB2aXJ0aW8tbWRldi4KPiAKPiBSZXZp
ZXdlZC1ieTogUGFyYXYgUGFuZGl0IDxwYXJhdkBtZWxsYW5veC5jb20+Cj4gU2lnbmVkLW9mZi1i
eTogSmFzb24gV2FuZyA8amFzb3dhbmdAcmVkaGF0LmNvbT4KCgpSZXZpZXdlZC1ieTogS2lydGkg
V2Fua2hlZGUgPGt3YW5raGVkZUBudmlkaWEuY29tPgoKVGhhbmtzLApLaXJ0aQoKPiAtLS0KPiAg
IC4uLi9kcml2ZXItYXBpL3ZmaW8tbWVkaWF0ZWQtZGV2aWNlLnJzdCAgICAgICB8IDM1ICsrKysr
KysrKy0tLS0KPiAgIE1BSU5UQUlORVJTICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB8ICAxICsKPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d2dC9rdm1ndC5jICAgICAgICAgICAg
ICB8IDE4ICsrKystLS0KPiAgIGRyaXZlcnMvczM5MC9jaW8vdmZpb19jY3dfb3BzLmMgICAgICAg
ICAgICAgICB8IDE4ICsrKystLS0KPiAgIGRyaXZlcnMvczM5MC9jcnlwdG8vdmZpb19hcF9vcHMu
YyAgICAgICAgICAgICB8IDE0ICsrKy0tCj4gICBkcml2ZXJzL3ZmaW8vbWRldi9tZGV2X2NvcmUu
YyAgICAgICAgICAgICAgICAgfCAyNCArKysrKysrKy0KPiAgIGRyaXZlcnMvdmZpby9tZGV2L21k
ZXZfcHJpdmF0ZS5oICAgICAgICAgICAgICB8ICA1ICsrCj4gICBkcml2ZXJzL3ZmaW8vbWRldi92
ZmlvX21kZXYuYyAgICAgICAgICAgICAgICAgfCAzNyArKysrKystLS0tLS0tCj4gICBpbmNsdWRl
L2xpbnV4L21kZXYuaCAgICAgICAgICAgICAgICAgICAgICAgICAgfCA0MyArKysrLS0tLS0tLS0t
LS0KPiAgIGluY2x1ZGUvbGludXgvbWRldl92ZmlvX29wcy5oICAgICAgICAgICAgICAgICB8IDUy
ICsrKysrKysrKysrKysrKysrKysKPiAgIHNhbXBsZXMvdmZpby1tZGV2L21ib2Nocy5jICAgICAg
ICAgICAgICAgICAgICB8IDIwICsrKystLS0KPiAgIHNhbXBsZXMvdmZpby1tZGV2L21kcHkuYyAg
ICAgICAgICAgICAgICAgICAgICB8IDIwICsrKystLS0KPiAgIHNhbXBsZXMvdmZpby1tZGV2L210
dHkuYyAgICAgICAgICAgICAgICAgICAgICB8IDE4ICsrKystLS0KPiAgIDEzIGZpbGVzIGNoYW5n
ZWQsIDIwNiBpbnNlcnRpb25zKCspLCA5OSBkZWxldGlvbnMoLSkKPiAgIGNyZWF0ZSBtb2RlIDEw
MDY0NCBpbmNsdWRlL2xpbnV4L21kZXZfdmZpb19vcHMuaAo+IAo+IGRpZmYgLS1naXQgYS9Eb2N1
bWVudGF0aW9uL2RyaXZlci1hcGkvdmZpby1tZWRpYXRlZC1kZXZpY2UucnN0IGIvRG9jdW1lbnRh
dGlvbi9kcml2ZXItYXBpL3ZmaW8tbWVkaWF0ZWQtZGV2aWNlLnJzdAo+IGluZGV4IDY3MDk0MTNi
ZWUyOS4uMDRkNTY4ODRjMzU3IDEwMDY0NAo+IC0tLSBhL0RvY3VtZW50YXRpb24vZHJpdmVyLWFw
aS92ZmlvLW1lZGlhdGVkLWRldmljZS5yc3QKPiArKysgYi9Eb2N1bWVudGF0aW9uL2RyaXZlci1h
cGkvdmZpby1tZWRpYXRlZC1kZXZpY2UucnN0Cj4gQEAgLTE1MiwxNSArMTUyLDYgQEAgY2FsbGJh
Y2tzIHBlciBtZGV2IHBhcmVudCBkZXZpY2UsIHBlciBtZGV2IHR5cGUsIG9yIGFueSBvdGhlciBj
YXRlZ29yaXphdGlvbi4KPiAgIFZlbmRvciBkcml2ZXJzIGFyZSBleHBlY3RlZCB0byBiZSBmdWxs
eSBhc3luY2hyb25vdXMgaW4gdGhpcyByZXNwZWN0IG9yCj4gICBwcm92aWRlIHRoZWlyIG93biBp
bnRlcm5hbCByZXNvdXJjZSBwcm90ZWN0aW9uLikKPiAgIAo+IC1UaGUgY2FsbGJhY2tzIGluIHRo
ZSBtZGV2X3BhcmVudF9vcHMgc3RydWN0dXJlIGFyZSBhcyBmb2xsb3dzOgo+IC0KPiAtKiBvcGVu
OiBvcGVuIGNhbGxiYWNrIG9mIG1lZGlhdGVkIGRldmljZQo+IC0qIGNsb3NlOiBjbG9zZSBjYWxs
YmFjayBvZiBtZWRpYXRlZCBkZXZpY2UKPiAtKiBpb2N0bDogaW9jdGwgY2FsbGJhY2sgb2YgbWVk
aWF0ZWQgZGV2aWNlCj4gLSogcmVhZCA6IHJlYWQgZW11bGF0aW9uIGNhbGxiYWNrCj4gLSogd3Jp
dGU6IHdyaXRlIGVtdWxhdGlvbiBjYWxsYmFjawo+IC0qIG1tYXA6IG1tYXAgZW11bGF0aW9uIGNh
bGxiYWNrCj4gLQo+ICAgQSBkcml2ZXIgc2hvdWxkIHVzZSB0aGUgbWRldl9wYXJlbnRfb3BzIHN0
cnVjdHVyZSBpbiB0aGUgZnVuY3Rpb24gY2FsbCB0bwo+ICAgcmVnaXN0ZXIgaXRzZWxmIHdpdGgg
dGhlIG1kZXYgY29yZSBkcml2ZXI6Ogo+ICAgCj4gQEAgLTE3MiwxMCArMTYzLDM0IEBAIHRoYXQg
YSBkcml2ZXIgc2hvdWxkIHVzZSB0byB1bnJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBtZGV2IGNv
cmUgZHJpdmVyOjoKPiAgIAo+ICAgCWV4dGVybiB2b2lkIG1kZXZfdW5yZWdpc3Rlcl9kZXZpY2Uo
c3RydWN0IGRldmljZSAqZGV2KTsKPiAgIAo+IC1JdCBpcyBhbHNvIHJlcXVpcmVkIHRvIHNwZWNp
ZnkgdGhlIGNsYXNzX2lkIGluIGNyZWF0ZSgpIGNhbGxiYWNrIHRocm91Z2g6Ogo+ICtBcyBtdWx0
aXBsZSB0eXBlcyBvZiBtZWRpYXRlZCBkZXZpY2VzIG1heSBiZSBzdXBwb3J0ZWQsIGNsYXNzIGlk
IG5lZWRzCj4gK3RvIGJlIHNwZWNpZmllZCBpbiB0aGUgY3JlYXRlKCkgY2FsbGJhY2suIFRoaXMg
Y291bGQgYmUgZG9uZQo+ICtleHBsaWNpdGx5IGZvciB0aGUgZGV2aWNlIHRoYXQgaW50ZXJhY3Rz
IHdpdGggdGhlIG1kZXYgZGV2aWNlIGRpcmVjdGx5Cj4gK3Rocm91Z2g6Ogo+ICAgCj4gICAJaW50
IG1kZXZfc2V0X2NsYXNzKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdTE2IGlkKTsKPiAgIAo+
ICtGb3IgdGhlIGRldmljZSB0aGF0IHVzZXMgdGhlIG1kZXYgYnVzIGZvciBpdHMgb3BlcmF0aW9u
LCB0aGUgY2xhc3MKPiArc2hvdWxkIHByb3ZpZGUgaGVscGVyIGZ1bmN0aW9uIHRvIHNldCBjbGFz
cyBpZCBhbmQgZGV2aWNlIHNwZWNpZmljCj4gK29wcy4gRS5nIGZvciB2ZmlvLW1kZXYgZGV2aWNl
cywgdGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBpczo6Cj4gKwo+ICsJaW50IG1kZXZfc2V0X3Zm
aW9fb3BzKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgY29uc3Qgc3RydWN0IG1kZXZfdmZpb19kZXZpY2Vfb3BzICp2ZmlvX29wcyk7Cj4g
Kwo+ICtUaGUgY2xhc3MgaWQgKHNldCBieSB0aGlzIGZ1bmN0aW9uIHRvIE1ERVZfQ0xBU1NfSURf
VkZJTykgaXMgdXNlZCB0bwo+ICttYXRjaCBhIGRldmljZSB3aXRoIGFuIG1kZXYgZHJpdmVyIHZp
YSBpdHMgaWQgdGFibGUuIFRoZSBkZXZpY2UKPiArc3BlY2lmaWMgY2FsbGJhY2tzIChzcGVjaWZp
ZWQgaW4gKnZmaW9fb3BzKSBhcmUgb2J0YWluYWJsZSB2aWEKPiArbWRldl9nZXRfdmZpb19vcHMo
KSAoZm9yIHVzZSBieSB0aGUgbWRldiBidXMgZHJpdmVyKS4gQSB2ZmlvLW1kZXYKPiArZGV2aWNl
IChjbGFzcyBpZCBNREVWX0NMQVNTX0lEX1ZGSU8pIHVzZXMgdGhlIGZvbGxvd2luZwo+ICtkZXZp
Y2Utc3BlY2lmaWMgb3BzOgo+ICsKPiArKiBvcGVuOiBvcGVuIGNhbGxiYWNrIG9mIHZmaW8gbWVk
aWF0ZWQgZGV2aWNlCj4gKyogY2xvc2U6IGNsb3NlIGNhbGxiYWNrIG9mIHZmaW8gbWVkaWF0ZWQg
ZGV2aWNlCj4gKyogaW9jdGw6IGlvY3RsIGNhbGxiYWNrIG9mIHZmaW8gbWVkaWF0ZWQgZGV2aWNl
Cj4gKyogcmVhZCA6IHJlYWQgZW11bGF0aW9uIGNhbGxiYWNrCj4gKyogd3JpdGU6IHdyaXRlIGVt
dWxhdGlvbiBjYWxsYmFjawo+ICsqIG1tYXA6IG1tYXAgZW11bGF0aW9uIGNhbGxiYWNrCj4gKwo+
ICAgTWVkaWF0ZWQgRGV2aWNlIE1hbmFnZW1lbnQgSW50ZXJmYWNlIFRocm91Z2ggc3lzZnMKPiAg
ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Cj4gICAK
PiBkaWZmIC0tZ2l0IGEvTUFJTlRBSU5FUlMgYi9NQUlOVEFJTkVSUwo+IGluZGV4IGNiYTEwOTU1
NDdmZC4uZjY2MWQxMzM0NGQ2IDEwMDY0NAo+IC0tLSBhL01BSU5UQUlORVJTCj4gKysrIGIvTUFJ
TlRBSU5FUlMKPiBAQCAtMTcxMjEsNiArMTcxMjEsNyBAQCBTOglNYWludGFpbmVkCj4gICBGOglE
b2N1bWVudGF0aW9uL2RyaXZlci1hcGkvdmZpby1tZWRpYXRlZC1kZXZpY2UucnN0Cj4gICBGOglk
cml2ZXJzL3ZmaW8vbWRldi8KPiAgIEY6CWluY2x1ZGUvbGludXgvbWRldi5oCj4gK0Y6CWluY2x1
ZGUvbGludXgvbWRldl92ZmlvX29wcy5oCj4gICBGOglzYW1wbGVzL3ZmaW8tbWRldi8KPiAgIAo+
ICAgVkZJTyBQTEFURk9STSBEUklWRVIKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3Z0L2t2bWd0LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3QuYwo+IGluZGV4
IDY0MjBmMGRiZDMxYi4uNjYyZjNhNjcyMzcyIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d2dC9rdm1ndC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Z0L2t2bWd0
LmMKPiBAQCAtNDIsNiArNDIsNyBAQAo+ICAgI2luY2x1ZGUgPGxpbnV4L2t2bV9ob3N0Lmg+Cj4g
ICAjaW5jbHVkZSA8bGludXgvdmZpby5oPgo+ICAgI2luY2x1ZGUgPGxpbnV4L21kZXYuaD4KPiAr
I2luY2x1ZGUgPGxpbnV4L21kZXZfdmZpb19vcHMuaD4KPiAgICNpbmNsdWRlIDxsaW51eC9kZWJ1
Z2ZzLmg+Cj4gICAKPiAgICNpbmNsdWRlIDxsaW51eC9ub3NwZWMuaD4KPiBAQCAtNjQzLDYgKzY0
NCw4IEBAIHN0YXRpYyB2b2lkIGt2bWd0X3B1dF92ZmlvX2RldmljZSh2b2lkICp2Z3B1KQo+ICAg
CXZmaW9fZGV2aWNlX3B1dCgoKHN0cnVjdCBpbnRlbF92Z3B1ICopdmdwdSktPnZkZXYudmZpb19k
ZXZpY2UpOwo+ICAgfQo+ICAgCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3QgbWRldl92ZmlvX2Rldmlj
ZV9vcHMgaW50ZWxfdmZpb192Z3B1X2Rldl9vcHM7Cj4gKwo+ICAgc3RhdGljIGludCBpbnRlbF92
Z3B1X2NyZWF0ZShzdHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IG1kZXZfZGV2aWNlICptZGV2
KQo+ICAgewo+ICAgCXN0cnVjdCBpbnRlbF92Z3B1ICp2Z3B1ID0gTlVMTDsKPiBAQCAtNjc4LDcg
KzY4MSw3IEBAIHN0YXRpYyBpbnQgaW50ZWxfdmdwdV9jcmVhdGUoc3RydWN0IGtvYmplY3QgKmtv
YmosIHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKPiAgIAkJICAgICBkZXZfbmFtZShtZGV2X2Rl
dihtZGV2KSkpOwo+ICAgCXJldCA9IDA7Cj4gICAKPiAtCW1kZXZfc2V0X2NsYXNzKG1kZXYsIE1E
RVZfQ0xBU1NfSURfVkZJTyk7Cj4gKwltZGV2X3NldF92ZmlvX29wcyhtZGV2LCAmaW50ZWxfdmZp
b192Z3B1X2Rldl9vcHMpOwo+ICAgb3V0Ogo+ICAgCXJldHVybiByZXQ7Cj4gICB9Cj4gQEAgLTE1
OTksMjAgKzE2MDIsMjEgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBhdHRyaWJ1dGVfZ3JvdXAgKmlu
dGVsX3ZncHVfZ3JvdXBzW10gPSB7Cj4gICAJTlVMTCwKPiAgIH07Cj4gICAKPiAtc3RhdGljIHN0
cnVjdCBtZGV2X3BhcmVudF9vcHMgaW50ZWxfdmdwdV9vcHMgPSB7Cj4gLQkubWRldl9hdHRyX2dy
b3VwcyAgICAgICA9IGludGVsX3ZncHVfZ3JvdXBzLAo+IC0JLmNyZWF0ZQkJCT0gaW50ZWxfdmdw
dV9jcmVhdGUsCj4gLQkucmVtb3ZlCQkJPSBpbnRlbF92Z3B1X3JlbW92ZSwKPiAtCj4gK3N0YXRp
YyBjb25zdCBzdHJ1Y3QgbWRldl92ZmlvX2RldmljZV9vcHMgaW50ZWxfdmZpb192Z3B1X2Rldl9v
cHMgPSB7Cj4gICAJLm9wZW4JCQk9IGludGVsX3ZncHVfb3BlbiwKPiAgIAkucmVsZWFzZQkJPSBp
bnRlbF92Z3B1X3JlbGVhc2UsCj4gLQo+ICAgCS5yZWFkCQkJPSBpbnRlbF92Z3B1X3JlYWQsCj4g
ICAJLndyaXRlCQkJPSBpbnRlbF92Z3B1X3dyaXRlLAo+ICAgCS5tbWFwCQkJPSBpbnRlbF92Z3B1
X21tYXAsCj4gICAJLmlvY3RsCQkJPSBpbnRlbF92Z3B1X2lvY3RsLAo+ICAgfTsKPiAgIAo+ICtz
dGF0aWMgc3RydWN0IG1kZXZfcGFyZW50X29wcyBpbnRlbF92Z3B1X29wcyA9IHsKPiArCS5tZGV2
X2F0dHJfZ3JvdXBzICAgICAgID0gaW50ZWxfdmdwdV9ncm91cHMsCj4gKwkuY3JlYXRlCQkJPSBp
bnRlbF92Z3B1X2NyZWF0ZSwKPiArCS5yZW1vdmUJCQk9IGludGVsX3ZncHVfcmVtb3ZlLAo+ICt9
Owo+ICsKPiAgIHN0YXRpYyBpbnQga3ZtZ3RfaG9zdF9pbml0KHN0cnVjdCBkZXZpY2UgKmRldiwg
dm9pZCAqZ3Z0LCBjb25zdCB2b2lkICpvcHMpCj4gICB7Cj4gICAJc3RydWN0IGF0dHJpYnV0ZSAq
Kmt2bV90eXBlX2F0dHJzOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3MzOTAvY2lvL3ZmaW9fY2N3
X29wcy5jIGIvZHJpdmVycy9zMzkwL2Npby92ZmlvX2Njd19vcHMuYwo+IGluZGV4IGNmMmMwMTNh
ZTMyZi4uZmE0NzNkZWQ3MWM3IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvczM5MC9jaW8vdmZpb19j
Y3dfb3BzLmMKPiArKysgYi9kcml2ZXJzL3MzOTAvY2lvL3ZmaW9fY2N3X29wcy5jCj4gQEAgLTEy
LDYgKzEyLDcgQEAKPiAgIAo+ICAgI2luY2x1ZGUgPGxpbnV4L3ZmaW8uaD4KPiAgICNpbmNsdWRl
IDxsaW51eC9tZGV2Lmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9tZGV2X3ZmaW9fb3BzLmg+Cj4gICAj
aW5jbHVkZSA8bGludXgvbm9zcGVjLmg+Cj4gICAjaW5jbHVkZSA8bGludXgvc2xhYi5oPgo+ICAg
Cj4gQEAgLTExMCw2ICsxMTEsOCBAQCBzdGF0aWMgc3RydWN0IGF0dHJpYnV0ZV9ncm91cCAqbWRl
dl90eXBlX2dyb3Vwc1tdID0gewo+ICAgCU5VTEwsCj4gICB9Owo+ICAgCj4gK3N0YXRpYyBjb25z
dCBzdHJ1Y3QgbWRldl92ZmlvX2RldmljZV9vcHMgbWRldl92ZmlvX29wczsKPiArCj4gICBzdGF0
aWMgaW50IHZmaW9fY2N3X21kZXZfY3JlYXRlKHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3Qg
bWRldl9kZXZpY2UgKm1kZXYpCj4gICB7Cj4gICAJc3RydWN0IHZmaW9fY2N3X3ByaXZhdGUgKnBy
aXZhdGUgPQo+IEBAIC0xMjksNyArMTMyLDcgQEAgc3RhdGljIGludCB2ZmlvX2Njd19tZGV2X2Ny
ZWF0ZShzdHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IG1kZXZfZGV2aWNlICptZGV2KQo+ICAg
CQkJICAgcHJpdmF0ZS0+c2NoLT5zY2hpZC5zc2lkLAo+ICAgCQkJICAgcHJpdmF0ZS0+c2NoLT5z
Y2hpZC5zY2hfbm8pOwo+ICAgCj4gLQltZGV2X3NldF9jbGFzcyhtZGV2LCBNREVWX0NMQVNTX0lE
X1ZGSU8pOwo+ICsJbWRldl9zZXRfdmZpb19vcHMobWRldiwgJm1kZXZfdmZpb19vcHMpOwo+ICAg
CXJldHVybiAwOwo+ICAgfQo+ICAgCj4gQEAgLTU3NSwxMSArNTc4LDcgQEAgc3RhdGljIHNzaXpl
X3QgdmZpb19jY3dfbWRldl9pb2N0bChzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsCj4gICAJfQo+
ICAgfQo+ICAgCj4gLXN0YXRpYyBjb25zdCBzdHJ1Y3QgbWRldl9wYXJlbnRfb3BzIHZmaW9fY2N3
X21kZXZfb3BzID0gewo+IC0JLm93bmVyCQkJPSBUSElTX01PRFVMRSwKPiAtCS5zdXBwb3J0ZWRf
dHlwZV9ncm91cHMgID0gbWRldl90eXBlX2dyb3VwcywKPiAtCS5jcmVhdGUJCQk9IHZmaW9fY2N3
X21kZXZfY3JlYXRlLAo+IC0JLnJlbW92ZQkJCT0gdmZpb19jY3dfbWRldl9yZW1vdmUsCj4gK3N0
YXRpYyBjb25zdCBzdHJ1Y3QgbWRldl92ZmlvX2RldmljZV9vcHMgbWRldl92ZmlvX29wcyA9IHsK
PiAgIAkub3BlbgkJCT0gdmZpb19jY3dfbWRldl9vcGVuLAo+ICAgCS5yZWxlYXNlCQk9IHZmaW9f
Y2N3X21kZXZfcmVsZWFzZSwKPiAgIAkucmVhZAkJCT0gdmZpb19jY3dfbWRldl9yZWFkLAo+IEBA
IC01ODcsNiArNTg2LDEzIEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgbWRldl9wYXJlbnRfb3BzIHZm
aW9fY2N3X21kZXZfb3BzID0gewo+ICAgCS5pb2N0bAkJCT0gdmZpb19jY3dfbWRldl9pb2N0bCwK
PiAgIH07Cj4gICAKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBtZGV2X3BhcmVudF9vcHMgdmZpb19j
Y3dfbWRldl9vcHMgPSB7Cj4gKwkub3duZXIJCQk9IFRISVNfTU9EVUxFLAo+ICsJLnN1cHBvcnRl
ZF90eXBlX2dyb3VwcyAgPSBtZGV2X3R5cGVfZ3JvdXBzLAo+ICsJLmNyZWF0ZQkJCT0gdmZpb19j
Y3dfbWRldl9jcmVhdGUsCj4gKwkucmVtb3ZlCQkJPSB2ZmlvX2Njd19tZGV2X3JlbW92ZSwKPiAr
fTsKPiArCj4gICBpbnQgdmZpb19jY3dfbWRldl9yZWcoc3RydWN0IHN1YmNoYW5uZWwgKnNjaCkK
PiAgIHsKPiAgIAlyZXR1cm4gbWRldl9yZWdpc3Rlcl9kZXZpY2UoJnNjaC0+ZGV2LCAmdmZpb19j
Y3dfbWRldl9vcHMpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3MzOTAvY3J5cHRvL3ZmaW9fYXBf
b3BzLmMgYi9kcml2ZXJzL3MzOTAvY3J5cHRvL3ZmaW9fYXBfb3BzLmMKPiBpbmRleCAwN2MzMTA3
MGFmZWIuLjdiZGM2MjM5MzExMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3MzOTAvY3J5cHRvL3Zm
aW9fYXBfb3BzLmMKPiArKysgYi9kcml2ZXJzL3MzOTAvY3J5cHRvL3ZmaW9fYXBfb3BzLmMKPiBA
QCAtMTYsNiArMTYsNyBAQAo+ICAgI2luY2x1ZGUgPGxpbnV4L2JpdG9wcy5oPgo+ICAgI2luY2x1
ZGUgPGxpbnV4L2t2bV9ob3N0Lmg+Cj4gICAjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+Cj4gKyNp
bmNsdWRlIDxsaW51eC9tZGV2X3ZmaW9fb3BzLmg+Cj4gICAjaW5jbHVkZSA8YXNtL2t2bS5oPgo+
ICAgI2luY2x1ZGUgPGFzbS96Y3J5cHQuaD4KPiAgIAo+IEBAIC0zMjEsNiArMzIyLDggQEAgc3Rh
dGljIHZvaWQgdmZpb19hcF9tYXRyaXhfaW5pdChzdHJ1Y3QgYXBfY29uZmlnX2luZm8gKmluZm8s
Cj4gICAJbWF0cml4LT5hZG1fbWF4ID0gaW5mby0+YXB4YSA/IGluZm8tPk5kIDogMTU7Cj4gICB9
Cj4gICAKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBtZGV2X3ZmaW9fZGV2aWNlX29wcyBtZGV2X3Zm
aW9fb3BzOwo+ICsKPiAgIHN0YXRpYyBpbnQgdmZpb19hcF9tZGV2X2NyZWF0ZShzdHJ1Y3Qga29i
amVjdCAqa29iaiwgc3RydWN0IG1kZXZfZGV2aWNlICptZGV2KQo+ICAgewo+ICAgCXN0cnVjdCBh
cF9tYXRyaXhfbWRldiAqbWF0cml4X21kZXY7Cj4gQEAgLTM0Myw3ICszNDYsNyBAQCBzdGF0aWMg
aW50IHZmaW9fYXBfbWRldl9jcmVhdGUoc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBtZGV2
X2RldmljZSAqbWRldikKPiAgIAlsaXN0X2FkZCgmbWF0cml4X21kZXYtPm5vZGUsICZtYXRyaXhf
ZGV2LT5tZGV2X2xpc3QpOwo+ICAgCW11dGV4X3VubG9jaygmbWF0cml4X2Rldi0+bG9jayk7Cj4g
ICAKPiAtCW1kZXZfc2V0X2NsYXNzKG1kZXYsIE1ERVZfQ0xBU1NfSURfVkZJTyk7Cj4gKwltZGV2
X3NldF92ZmlvX29wcyhtZGV2LCAmbWRldl92ZmlvX29wcyk7Cj4gICAJcmV0dXJuIDA7Cj4gICB9
Cj4gICAKPiBAQCAtMTI4MSwxNSArMTI4NCwxOCBAQCBzdGF0aWMgc3NpemVfdCB2ZmlvX2FwX21k
ZXZfaW9jdGwoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LAo+ICAgCXJldHVybiByZXQ7Cj4gICB9
Cj4gICAKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBtZGV2X3ZmaW9fZGV2aWNlX29wcyBtZGV2X3Zm
aW9fb3BzID0gewo+ICsJLm9wZW4JCQk9IHZmaW9fYXBfbWRldl9vcGVuLAo+ICsJLnJlbGVhc2UJ
CT0gdmZpb19hcF9tZGV2X3JlbGVhc2UsCj4gKwkuaW9jdGwJCQk9IHZmaW9fYXBfbWRldl9pb2N0
bCwKPiArfTsKPiArCj4gICBzdGF0aWMgY29uc3Qgc3RydWN0IG1kZXZfcGFyZW50X29wcyB2Zmlv
X2FwX21hdHJpeF9vcHMgPSB7Cj4gICAJLm93bmVyCQkJPSBUSElTX01PRFVMRSwKPiAgIAkuc3Vw
cG9ydGVkX3R5cGVfZ3JvdXBzCT0gdmZpb19hcF9tZGV2X3R5cGVfZ3JvdXBzLAo+ICAgCS5tZGV2
X2F0dHJfZ3JvdXBzCT0gdmZpb19hcF9tZGV2X2F0dHJfZ3JvdXBzLAo+ICAgCS5jcmVhdGUJCQk9
IHZmaW9fYXBfbWRldl9jcmVhdGUsCj4gICAJLnJlbW92ZQkJCT0gdmZpb19hcF9tZGV2X3JlbW92
ZSwKPiAtCS5vcGVuCQkJPSB2ZmlvX2FwX21kZXZfb3BlbiwKPiAtCS5yZWxlYXNlCQk9IHZmaW9f
YXBfbWRldl9yZWxlYXNlLAo+IC0JLmlvY3RsCQkJPSB2ZmlvX2FwX21kZXZfaW9jdGwsCj4gICB9
Owo+ICAgCj4gICBpbnQgdmZpb19hcF9tZGV2X3JlZ2lzdGVyKHZvaWQpCj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvdmZpby9tZGV2L21kZXZfY29yZS5jIGIvZHJpdmVycy92ZmlvL21kZXYvbWRldl9j
b3JlLmMKPiBpbmRleCA3YmZhMmU0NmU4MjkuLjRlNzBmMTlhYzE0NSAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL3ZmaW8vbWRldi9tZGV2X2NvcmUuYwo+ICsrKyBiL2RyaXZlcnMvdmZpby9tZGV2L21k
ZXZfY29yZS5jCj4gQEAgLTQ3LDcgKzQ3LDggQEAgRVhQT1JUX1NZTUJPTChtZGV2X3NldF9kcnZk
YXRhKTsKPiAgIAo+ICAgLyoKPiAgICAqIFNwZWNpZnkgdGhlIGNsYXNzIGZvciB0aGUgbWRldiBk
ZXZpY2UsIHRoaXMgbXVzdCBiZSBjYWxsZWQgZHVyaW5nCj4gLSAqIGNyZWF0ZSgpIGNhbGxiYWNr
Lgo+ICsgKiBjcmVhdGUoKSBjYWxsYmFjayBleHBsaWNpdGx5IG9yIGltcGxpY2l0bHkgdGhyb3Vn
aCB0aGUgaGVscGVycwo+ICsgKiBwcm92aWRlZCBieSBlYWNoIGNsYXNzLgo+ICAgICovCj4gICB2
b2lkIG1kZXZfc2V0X2NsYXNzKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdTE2IGlkKQo+ICAg
ewo+IEBAIC01Niw2ICs1NywyNyBAQCB2b2lkIG1kZXZfc2V0X2NsYXNzKHN0cnVjdCBtZGV2X2Rl
dmljZSAqbWRldiwgdTE2IGlkKQo+ICAgfQo+ICAgRVhQT1JUX1NZTUJPTChtZGV2X3NldF9jbGFz
cyk7Cj4gICAKPiArLyoKPiArICogU3BlY2lmeSB0aGUgbWRldiBkZXZpY2UgdG8gYmUgYSBWRklP
IG1kZXYgZGV2aWNlLCBhbmQgc2V0IFZGSU8KPiArICogZGV2aWNlIG9wcyBmb3IgaXQuIFRoaXMg
bXVzdCBiZSBjYWxsZWQgZnJvbSB0aGUgY3JlYXRlKCkgY2FsbGJhY2sKPiArICogZm9yIFZGSU8g
bWRldiBkZXZpY2UuCj4gKyAqLwo+ICt2b2lkIG1kZXZfc2V0X3ZmaW9fb3BzKHN0cnVjdCBtZGV2
X2RldmljZSAqbWRldiwKPiArCQkgICAgICAgY29uc3Qgc3RydWN0IG1kZXZfdmZpb19kZXZpY2Vf
b3BzICp2ZmlvX29wcykKPiArewo+ICsJbWRldl9zZXRfY2xhc3MobWRldiwgTURFVl9DTEFTU19J
RF9WRklPKTsKPiArCW1kZXYtPnZmaW9fb3BzID0gdmZpb19vcHM7Cj4gK30KPiArRVhQT1JUX1NZ
TUJPTChtZGV2X3NldF92ZmlvX29wcyk7Cj4gKwo+ICsvKiBHZXQgdGhlIFZGSU8gZGV2aWNlIG9w
cyBmb3IgdGhlIG1kZXYgZGV2aWNlLiAqLwo+ICtjb25zdCBzdHJ1Y3QgbWRldl92ZmlvX2Rldmlj
ZV9vcHMgKm1kZXZfZ2V0X3ZmaW9fb3BzKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKPiArewo+
ICsJV0FSTl9PTihtZGV2LT5jbGFzc19pZCAhPSBNREVWX0NMQVNTX0lEX1ZGSU8pOwo+ICsJcmV0
dXJuIG1kZXYtPnZmaW9fb3BzOwo+ICt9Cj4gK0VYUE9SVF9TWU1CT0wobWRldl9nZXRfdmZpb19v
cHMpOwo+ICsKPiAgIHN0cnVjdCBkZXZpY2UgKm1kZXZfZGV2KHN0cnVjdCBtZGV2X2RldmljZSAq
bWRldikKPiAgIHsKPiAgIAlyZXR1cm4gJm1kZXYtPmRldjsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy92ZmlvL21kZXYvbWRldl9wcml2YXRlLmggYi9kcml2ZXJzL3ZmaW8vbWRldi9tZGV2X3ByaXZh
dGUuaAo+IGluZGV4IGM2NWY0MzZjMTg2OS4uNDExMjI3MzczNjI1IDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvdmZpby9tZGV2L21kZXZfcHJpdmF0ZS5oCj4gKysrIGIvZHJpdmVycy92ZmlvL21kZXYv
bWRldl9wcml2YXRlLmgKPiBAQCAtMTAsNiArMTAsOCBAQAo+ICAgI2lmbmRlZiBNREVWX1BSSVZB
VEVfSAo+ICAgI2RlZmluZSBNREVWX1BSSVZBVEVfSAo+ICAgCj4gKyNpbmNsdWRlIDxsaW51eC9t
ZGV2X3ZmaW9fb3BzLmg+Cj4gKwo+ICAgaW50ICBtZGV2X2J1c19yZWdpc3Rlcih2b2lkKTsKPiAg
IHZvaWQgbWRldl9idXNfdW5yZWdpc3Rlcih2b2lkKTsKPiAgIAo+IEBAIC0zNCw2ICszNiw5IEBA
IHN0cnVjdCBtZGV2X2RldmljZSB7Cj4gICAJc3RydWN0IGRldmljZSAqaW9tbXVfZGV2aWNlOwo+
ICAgCWJvb2wgYWN0aXZlOwo+ICAgCXUxNiBjbGFzc19pZDsKPiArCXVuaW9uIHsKPiArCQljb25z
dCBzdHJ1Y3QgbWRldl92ZmlvX2RldmljZV9vcHMgKnZmaW9fb3BzOwo+ICsJfTsKPiAgIH07Cj4g
ICAKPiAgICNkZWZpbmUgdG9fbWRldl9kZXZpY2UoZGV2KQljb250YWluZXJfb2YoZGV2LCBzdHJ1
Y3QgbWRldl9kZXZpY2UsIGRldikKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92ZmlvL21kZXYvdmZp
b19tZGV2LmMgYi9kcml2ZXJzL3ZmaW8vbWRldi92ZmlvX21kZXYuYwo+IGluZGV4IGE2NjQxY2Q4
YjVhMy4uYzAxZTIxOTRlNGIzIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvdmZpby9tZGV2L3ZmaW9f
bWRldi5jCj4gKysrIGIvZHJpdmVycy92ZmlvL21kZXYvdmZpb19tZGV2LmMKPiBAQCAtMTQsNiAr
MTQsNyBAQAo+ICAgI2luY2x1ZGUgPGxpbnV4L3NsYWIuaD4KPiAgICNpbmNsdWRlIDxsaW51eC92
ZmlvLmg+Cj4gICAjaW5jbHVkZSA8bGludXgvbWRldi5oPgo+ICsjaW5jbHVkZSA8bGludXgvbWRl
dl92ZmlvX29wcy5oPgo+ICAgCj4gICAjaW5jbHVkZSAibWRldl9wcml2YXRlLmgiCj4gICAKPiBA
QCAtMjQsMTYgKzI1LDE2IEBACj4gICBzdGF0aWMgaW50IHZmaW9fbWRldl9vcGVuKHZvaWQgKmRl
dmljZV9kYXRhKQo+ICAgewo+ICAgCXN0cnVjdCBtZGV2X2RldmljZSAqbWRldiA9IGRldmljZV9k
YXRhOwo+IC0Jc3RydWN0IG1kZXZfcGFyZW50ICpwYXJlbnQgPSBtZGV2LT5wYXJlbnQ7Cj4gKwlj
b25zdCBzdHJ1Y3QgbWRldl92ZmlvX2RldmljZV9vcHMgKm9wcyA9IG1kZXZfZ2V0X3ZmaW9fb3Bz
KG1kZXYpOwo+ICAgCWludCByZXQ7Cj4gICAKPiAtCWlmICh1bmxpa2VseSghcGFyZW50LT5vcHMt
Pm9wZW4pKQo+ICsJaWYgKHVubGlrZWx5KCFvcHMtPm9wZW4pKQo+ICAgCQlyZXR1cm4gLUVJTlZB
TDsKPiAgIAo+ICAgCWlmICghdHJ5X21vZHVsZV9nZXQoVEhJU19NT0RVTEUpKQo+ICAgCQlyZXR1
cm4gLUVOT0RFVjsKPiAgIAo+IC0JcmV0ID0gcGFyZW50LT5vcHMtPm9wZW4obWRldik7Cj4gKwly
ZXQgPSBvcHMtPm9wZW4obWRldik7Cj4gICAJaWYgKHJldCkKPiAgIAkJbW9kdWxlX3B1dChUSElT
X01PRFVMRSk7Cj4gICAKPiBAQCAtNDMsMTAgKzQ0LDEwIEBAIHN0YXRpYyBpbnQgdmZpb19tZGV2
X29wZW4odm9pZCAqZGV2aWNlX2RhdGEpCj4gICBzdGF0aWMgdm9pZCB2ZmlvX21kZXZfcmVsZWFz
ZSh2b2lkICpkZXZpY2VfZGF0YSkKPiAgIHsKPiAgIAlzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYg
PSBkZXZpY2VfZGF0YTsKPiAtCXN0cnVjdCBtZGV2X3BhcmVudCAqcGFyZW50ID0gbWRldi0+cGFy
ZW50Owo+ICsJY29uc3Qgc3RydWN0IG1kZXZfdmZpb19kZXZpY2Vfb3BzICpvcHMgPSBtZGV2X2dl
dF92ZmlvX29wcyhtZGV2KTsKPiAgIAo+IC0JaWYgKGxpa2VseShwYXJlbnQtPm9wcy0+cmVsZWFz
ZSkpCj4gLQkJcGFyZW50LT5vcHMtPnJlbGVhc2UobWRldik7Cj4gKwlpZiAobGlrZWx5KG9wcy0+
cmVsZWFzZSkpCj4gKwkJb3BzLT5yZWxlYXNlKG1kZXYpOwo+ICAgCj4gICAJbW9kdWxlX3B1dChU
SElTX01PRFVMRSk7Cj4gICB9Cj4gQEAgLTU1LDQ3ICs1Niw0NyBAQCBzdGF0aWMgbG9uZyB2Zmlv
X21kZXZfdW5sb2NrZWRfaW9jdGwodm9pZCAqZGV2aWNlX2RhdGEsCj4gICAJCQkJICAgICB1bnNp
Z25lZCBpbnQgY21kLCB1bnNpZ25lZCBsb25nIGFyZykKPiAgIHsKPiAgIAlzdHJ1Y3QgbWRldl9k
ZXZpY2UgKm1kZXYgPSBkZXZpY2VfZGF0YTsKPiAtCXN0cnVjdCBtZGV2X3BhcmVudCAqcGFyZW50
ID0gbWRldi0+cGFyZW50Owo+ICsJY29uc3Qgc3RydWN0IG1kZXZfdmZpb19kZXZpY2Vfb3BzICpv
cHMgPSBtZGV2X2dldF92ZmlvX29wcyhtZGV2KTsKPiAgIAo+IC0JaWYgKHVubGlrZWx5KCFwYXJl
bnQtPm9wcy0+aW9jdGwpKQo+ICsJaWYgKHVubGlrZWx5KCFvcHMtPmlvY3RsKSkKPiAgIAkJcmV0
dXJuIC1FSU5WQUw7Cj4gICAKPiAtCXJldHVybiBwYXJlbnQtPm9wcy0+aW9jdGwobWRldiwgY21k
LCBhcmcpOwo+ICsJcmV0dXJuIG9wcy0+aW9jdGwobWRldiwgY21kLCBhcmcpOwo+ICAgfQo+ICAg
Cj4gICBzdGF0aWMgc3NpemVfdCB2ZmlvX21kZXZfcmVhZCh2b2lkICpkZXZpY2VfZGF0YSwgY2hh
ciBfX3VzZXIgKmJ1ZiwKPiAgIAkJCSAgICAgIHNpemVfdCBjb3VudCwgbG9mZl90ICpwcG9zKQo+
ICAgewo+ICAgCXN0cnVjdCBtZGV2X2RldmljZSAqbWRldiA9IGRldmljZV9kYXRhOwo+IC0Jc3Ry
dWN0IG1kZXZfcGFyZW50ICpwYXJlbnQgPSBtZGV2LT5wYXJlbnQ7Cj4gKwljb25zdCBzdHJ1Y3Qg
bWRldl92ZmlvX2RldmljZV9vcHMgKm9wcyA9IG1kZXZfZ2V0X3ZmaW9fb3BzKG1kZXYpOwo+ICAg
Cj4gLQlpZiAodW5saWtlbHkoIXBhcmVudC0+b3BzLT5yZWFkKSkKPiArCWlmICh1bmxpa2VseSgh
b3BzLT5yZWFkKSkKPiAgIAkJcmV0dXJuIC1FSU5WQUw7Cj4gICAKPiAtCXJldHVybiBwYXJlbnQt
Pm9wcy0+cmVhZChtZGV2LCBidWYsIGNvdW50LCBwcG9zKTsKPiArCXJldHVybiBvcHMtPnJlYWQo
bWRldiwgYnVmLCBjb3VudCwgcHBvcyk7Cj4gICB9Cj4gICAKPiAgIHN0YXRpYyBzc2l6ZV90IHZm
aW9fbWRldl93cml0ZSh2b2lkICpkZXZpY2VfZGF0YSwgY29uc3QgY2hhciBfX3VzZXIgKmJ1ZiwK
PiAgIAkJCSAgICAgICBzaXplX3QgY291bnQsIGxvZmZfdCAqcHBvcykKPiAgIHsKPiAgIAlzdHJ1
Y3QgbWRldl9kZXZpY2UgKm1kZXYgPSBkZXZpY2VfZGF0YTsKPiAtCXN0cnVjdCBtZGV2X3BhcmVu
dCAqcGFyZW50ID0gbWRldi0+cGFyZW50Owo+ICsJY29uc3Qgc3RydWN0IG1kZXZfdmZpb19kZXZp
Y2Vfb3BzICpvcHMgPSBtZGV2X2dldF92ZmlvX29wcyhtZGV2KTsKPiAgIAo+IC0JaWYgKHVubGlr
ZWx5KCFwYXJlbnQtPm9wcy0+d3JpdGUpKQo+ICsJaWYgKHVubGlrZWx5KCFvcHMtPndyaXRlKSkK
PiAgIAkJcmV0dXJuIC1FSU5WQUw7Cj4gICAKPiAtCXJldHVybiBwYXJlbnQtPm9wcy0+d3JpdGUo
bWRldiwgYnVmLCBjb3VudCwgcHBvcyk7Cj4gKwlyZXR1cm4gb3BzLT53cml0ZShtZGV2LCBidWYs
IGNvdW50LCBwcG9zKTsKPiAgIH0KPiAgIAo+ICAgc3RhdGljIGludCB2ZmlvX21kZXZfbW1hcCh2
b2lkICpkZXZpY2VfZGF0YSwgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpCj4gICB7Cj4gICAJ
c3RydWN0IG1kZXZfZGV2aWNlICptZGV2ID0gZGV2aWNlX2RhdGE7Cj4gLQlzdHJ1Y3QgbWRldl9w
YXJlbnQgKnBhcmVudCA9IG1kZXYtPnBhcmVudDsKPiArCWNvbnN0IHN0cnVjdCBtZGV2X3ZmaW9f
ZGV2aWNlX29wcyAqb3BzID0gbWRldl9nZXRfdmZpb19vcHMobWRldik7Cj4gICAKPiAtCWlmICh1
bmxpa2VseSghcGFyZW50LT5vcHMtPm1tYXApKQo+ICsJaWYgKHVubGlrZWx5KCFvcHMtPm1tYXAp
KQo+ICAgCQlyZXR1cm4gLUVJTlZBTDsKPiAgIAo+IC0JcmV0dXJuIHBhcmVudC0+b3BzLT5tbWFw
KG1kZXYsIHZtYSk7Cj4gKwlyZXR1cm4gb3BzLT5tbWFwKG1kZXYsIHZtYSk7Cj4gICB9Cj4gICAK
PiAgIHN0YXRpYyBjb25zdCBzdHJ1Y3QgdmZpb19kZXZpY2Vfb3BzIHZmaW9fbWRldl9kZXZfb3Bz
ID0gewo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L21kZXYuaCBiL2luY2x1ZGUvbGludXgv
bWRldi5oCj4gaW5kZXggNzhiNjlkMDllYjU0Li45ZTM3NTA2ZDE5ODcgMTAwNjQ0Cj4gLS0tIGEv
aW5jbHVkZS9saW51eC9tZGV2LmgKPiArKysgYi9pbmNsdWRlL2xpbnV4L21kZXYuaAo+IEBAIC0x
MCw3ICsxMCwxMyBAQAo+ICAgI2lmbmRlZiBNREVWX0gKPiAgICNkZWZpbmUgTURFVl9ICj4gICAK
PiArI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9kZXZpY2UuaD4K
PiArI2luY2x1ZGUgPGxpbnV4L21kZXYuaD4KPiArI2luY2x1ZGUgPHVhcGkvbGludXgvdXVpZC5o
Pgo+ICsKPiAgIHN0cnVjdCBtZGV2X2RldmljZTsKPiArc3RydWN0IG1kZXZfdmZpb19kZXZpY2Vf
b3BzOwo+ICAgCj4gICAvKgo+ICAgICogQ2FsbGVkIGJ5IHRoZSBwYXJlbnQgZGV2aWNlIGRyaXZl
ciB0byBzZXQgdGhlIGRldmljZSB3aGljaCByZXByZXNlbnRzCj4gQEAgLTQ4LDMwICs1NCw3IEBA
IHN0cnVjdCBkZXZpY2UgKm1kZXZfZ2V0X2lvbW11X2RldmljZShzdHJ1Y3QgZGV2aWNlICpkZXYp
Owo+ICAgICoJCQlAbWRldjogbWRldl9kZXZpY2UgZGV2aWNlIHN0cnVjdHVyZSB3aGljaCBpcyBi
ZWluZwo+ICAgICoJCQkgICAgICAgZGVzdHJveWVkCj4gICAgKgkJCVJldHVybnMgaW50ZWdlcjog
c3VjY2VzcyAoMCkgb3IgZXJyb3IgKDwgMCkKPiAtICogQG9wZW46CQlPcGVuIG1lZGlhdGVkIGRl
dmljZS4KPiAtICoJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlLgo+IC0gKgkJCVJldHVybnMgaW50
ZWdlcjogc3VjY2VzcyAoMCkgb3IgZXJyb3IgKDwgMCkKPiAtICogQHJlbGVhc2U6CQlyZWxlYXNl
IG1lZGlhdGVkIGRldmljZQo+IC0gKgkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UuCj4gLSAqIEBy
ZWFkOgkJUmVhZCBlbXVsYXRpb24gY2FsbGJhY2sKPiAtICoJCQlAbWRldjogbWVkaWF0ZWQgZGV2
aWNlIHN0cnVjdHVyZQo+IC0gKgkJCUBidWY6IHJlYWQgYnVmZmVyCj4gLSAqCQkJQGNvdW50OiBu
dW1iZXIgb2YgYnl0ZXMgdG8gcmVhZAo+IC0gKgkJCUBwcG9zOiBhZGRyZXNzLgo+IC0gKgkJCVJl
dHVucyBudW1iZXIgb24gYnl0ZXMgcmVhZCBvbiBzdWNjZXNzIG9yIGVycm9yLgo+IC0gKiBAd3Jp
dGU6CQlXcml0ZSBlbXVsYXRpb24gY2FsbGJhY2sKPiAtICoJCQlAbWRldjogbWVkaWF0ZWQgZGV2
aWNlIHN0cnVjdHVyZQo+IC0gKgkJCUBidWY6IHdyaXRlIGJ1ZmZlcgo+IC0gKgkJCUBjb3VudDog
bnVtYmVyIG9mIGJ5dGVzIHRvIGJlIHdyaXR0ZW4KPiAtICoJCQlAcHBvczogYWRkcmVzcy4KPiAt
ICoJCQlSZXR1bnMgbnVtYmVyIG9uIGJ5dGVzIHdyaXR0ZW4gb24gc3VjY2VzcyBvciBlcnJvci4K
PiAtICogQGlvY3RsOgkJSU9DVEwgY2FsbGJhY2sKPiAtICoJCQlAbWRldjogbWVkaWF0ZWQgZGV2
aWNlIHN0cnVjdHVyZQo+IC0gKgkJCUBjbWQ6IGlvY3RsIGNvbW1hbmQKPiAtICoJCQlAYXJnOiBh
cmd1bWVudHMgdG8gaW9jdGwKPiAtICogQG1tYXA6CQltbWFwIGNhbGxiYWNrCj4gLSAqCQkJQG1k
ZXY6IG1lZGlhdGVkIGRldmljZSBzdHJ1Y3R1cmUKPiAtICoJCQlAdm1hOiB2bWEgc3RydWN0dXJl
Cj4gKyAqCj4gICAgKiBQYXJlbnQgZGV2aWNlIHRoYXQgc3VwcG9ydCBtZWRpYXRlZCBkZXZpY2Ug
c2hvdWxkIGJlIHJlZ2lzdGVyZWQgd2l0aCBtZGV2Cj4gICAgKiBtb2R1bGUgd2l0aCBtZGV2X3Bh
cmVudF9vcHMgc3RydWN0dXJlLgo+ICAgICoqLwo+IEBAIC04MywxNSArNjYsNiBAQCBzdHJ1Y3Qg
bWRldl9wYXJlbnRfb3BzIHsKPiAgIAo+ICAgCWludCAgICAgKCpjcmVhdGUpKHN0cnVjdCBrb2Jq
ZWN0ICprb2JqLCBzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpOwo+ICAgCWludCAgICAgKCpyZW1v
dmUpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7Cj4gLQlpbnQgICAgICgqb3Blbikoc3RydWN0
IG1kZXZfZGV2aWNlICptZGV2KTsKPiAtCXZvaWQgICAgKCpyZWxlYXNlKShzdHJ1Y3QgbWRldl9k
ZXZpY2UgKm1kZXYpOwo+IC0Jc3NpemVfdCAoKnJlYWQpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRl
diwgY2hhciBfX3VzZXIgKmJ1ZiwKPiAtCQkJc2l6ZV90IGNvdW50LCBsb2ZmX3QgKnBwb3MpOwo+
IC0Jc3NpemVfdCAoKndyaXRlKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIGNvbnN0IGNoYXIg
X191c2VyICpidWYsCj4gLQkJCSBzaXplX3QgY291bnQsIGxvZmZfdCAqcHBvcyk7Cj4gLQlsb25n
CSgqaW9jdGwpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdW5zaWduZWQgaW50IGNtZCwKPiAt
CQkJIHVuc2lnbmVkIGxvbmcgYXJnKTsKPiAtCWludAkoKm1tYXApKHN0cnVjdCBtZGV2X2Rldmlj
ZSAqbWRldiwgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpOwo+ICAgfTsKPiAgIAo+ICAgLyog
aW50ZXJmYWNlIGZvciBleHBvcnRpbmcgbWRldiBzdXBwb3J0ZWQgdHlwZSBhdHRyaWJ1dGVzICov
Cj4gQEAgLTEzNSw2ICsxMDksOSBAQCB2b2lkICptZGV2X2dldF9kcnZkYXRhKHN0cnVjdCBtZGV2
X2RldmljZSAqbWRldik7Cj4gICB2b2lkIG1kZXZfc2V0X2RydmRhdGEoc3RydWN0IG1kZXZfZGV2
aWNlICptZGV2LCB2b2lkICpkYXRhKTsKPiAgIGNvbnN0IGd1aWRfdCAqbWRldl91dWlkKHN0cnVj
dCBtZGV2X2RldmljZSAqbWRldik7Cj4gICB2b2lkIG1kZXZfc2V0X2NsYXNzKHN0cnVjdCBtZGV2
X2RldmljZSAqbWRldiwgdTE2IGlkKTsKPiArdm9pZCBtZGV2X3NldF92ZmlvX29wcyhzdHJ1Y3Qg
bWRldl9kZXZpY2UgKm1kZXYsCj4gKwkJICAgICAgIGNvbnN0IHN0cnVjdCBtZGV2X3ZmaW9fZGV2
aWNlX29wcyAqdmZpb19vcHMpOwo+ICtjb25zdCBzdHJ1Y3QgbWRldl92ZmlvX2RldmljZV9vcHMg
Km1kZXZfZ2V0X3ZmaW9fb3BzKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7Cj4gICAKPiAgIGV4
dGVybiBzdHJ1Y3QgYnVzX3R5cGUgbWRldl9idXNfdHlwZTsKPiAgIAo+IGRpZmYgLS1naXQgYS9p
bmNsdWRlL2xpbnV4L21kZXZfdmZpb19vcHMuaCBiL2luY2x1ZGUvbGludXgvbWRldl92ZmlvX29w
cy5oCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAuLjMxNzUxOGYz
MDYyMQo+IC0tLSAvZGV2L251bGwKPiArKysgYi9pbmNsdWRlL2xpbnV4L21kZXZfdmZpb19vcHMu
aAo+IEBAIC0wLDAgKzEsNTIgQEAKPiArLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0y
LjAtb25seSAqLwo+ICsvKgo+ICsgKiBWRklPIE1lZGlhdGVkIGRldmljZSBkZWZpbml0aW9uCj4g
KyAqLwo+ICsKPiArI2lmbmRlZiBNREVWX1ZGSU9fT1BTX0gKPiArI2RlZmluZSBNREVWX1ZGSU9f
T1BTX0gKPiArCj4gKyNpbmNsdWRlIDxsaW51eC9tZGV2Lmg+Cj4gKwo+ICsvKioKPiArICogc3Ry
dWN0IG1kZXZfdmZpb19kZXZpY2Vfb3BzIC0gU3RydWN0dXJlIHRvIGJlIHJlZ2lzdGVyZWQgZm9y
IGVhY2gKPiArICogbWRldiBkZXZpY2UgdG8gcmVnaXN0ZXIgdGhlIGRldmljZSB0byB2ZmlvLW1k
ZXYgbW9kdWxlLgo+ICsgKgo+ICsgKiBAb3BlbjoJCU9wZW4gbWVkaWF0ZWQgZGV2aWNlLgo+ICsg
KgkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UuCj4gKyAqCQkJUmV0dXJucyBpbnRlZ2VyOiBzdWNj
ZXNzICgwKSBvciBlcnJvciAoPCAwKQo+ICsgKiBAcmVsZWFzZToJCXJlbGVhc2UgbWVkaWF0ZWQg
ZGV2aWNlCj4gKyAqCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZS4KPiArICogQHJlYWQ6CQlSZWFk
IGVtdWxhdGlvbiBjYWxsYmFjawo+ICsgKgkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2Ugc3RydWN0
dXJlCj4gKyAqCQkJQGJ1ZjogcmVhZCBidWZmZXIKPiArICoJCQlAY291bnQ6IG51bWJlciBvZiBi
eXRlcyB0byByZWFkCj4gKyAqCQkJQHBwb3M6IGFkZHJlc3MuCj4gKyAqCQkJUmV0dW5zIG51bWJl
ciBvbiBieXRlcyByZWFkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuCj4gKyAqIEB3cml0ZToJCVdyaXRl
IGVtdWxhdGlvbiBjYWxsYmFjawo+ICsgKgkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2Ugc3RydWN0
dXJlCj4gKyAqCQkJQGJ1Zjogd3JpdGUgYnVmZmVyCj4gKyAqCQkJQGNvdW50OiBudW1iZXIgb2Yg
Ynl0ZXMgdG8gYmUgd3JpdHRlbgo+ICsgKgkJCUBwcG9zOiBhZGRyZXNzLgo+ICsgKgkJCVJldHVu
cyBudW1iZXIgb24gYnl0ZXMgd3JpdHRlbiBvbiBzdWNjZXNzIG9yIGVycm9yLgo+ICsgKiBAaW9j
dGw6CQlJT0NUTCBjYWxsYmFjawo+ICsgKgkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2Ugc3RydWN0
dXJlCj4gKyAqCQkJQGNtZDogaW9jdGwgY29tbWFuZAo+ICsgKgkJCUBhcmc6IGFyZ3VtZW50cyB0
byBpb2N0bAo+ICsgKiBAbW1hcDoJCW1tYXAgY2FsbGJhY2sKPiArICoJCQlAbWRldjogbWVkaWF0
ZWQgZGV2aWNlIHN0cnVjdHVyZQo+ICsgKgkJCUB2bWE6IHZtYSBzdHJ1Y3R1cmUKPiArICovCj4g
K3N0cnVjdCBtZGV2X3ZmaW9fZGV2aWNlX29wcyB7Cj4gKwlpbnQgICAgICgqb3Blbikoc3RydWN0
IG1kZXZfZGV2aWNlICptZGV2KTsKPiArCXZvaWQgICAgKCpyZWxlYXNlKShzdHJ1Y3QgbWRldl9k
ZXZpY2UgKm1kZXYpOwo+ICsJc3NpemVfdCAoKnJlYWQpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRl
diwgY2hhciBfX3VzZXIgKmJ1ZiwKPiArCQkJc2l6ZV90IGNvdW50LCBsb2ZmX3QgKnBwb3MpOwo+
ICsJc3NpemVfdCAoKndyaXRlKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIGNvbnN0IGNoYXIg
X191c2VyICpidWYsCj4gKwkJCSBzaXplX3QgY291bnQsIGxvZmZfdCAqcHBvcyk7Cj4gKwlsb25n
CSgqaW9jdGwpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdW5zaWduZWQgaW50IGNtZCwKPiAr
CQkJIHVuc2lnbmVkIGxvbmcgYXJnKTsKPiArCWludAkoKm1tYXApKHN0cnVjdCBtZGV2X2Rldmlj
ZSAqbWRldiwgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpOwo+ICt9Owo+ICsKPiArI2VuZGlm
Cj4gZGlmZiAtLWdpdCBhL3NhbXBsZXMvdmZpby1tZGV2L21ib2Nocy5jIGIvc2FtcGxlcy92Zmlv
LW1kZXYvbWJvY2hzLmMKPiBpbmRleCAxMTViYzUwNzQ2NTYuLjEyOTYzNzY3YmEzNyAxMDA2NDQK
PiAtLS0gYS9zYW1wbGVzL3ZmaW8tbWRldi9tYm9jaHMuYwo+ICsrKyBiL3NhbXBsZXMvdmZpby1t
ZGV2L21ib2Nocy5jCj4gQEAgLTMwLDYgKzMwLDcgQEAKPiAgICNpbmNsdWRlIDxsaW51eC9pb21t
dS5oPgo+ICAgI2luY2x1ZGUgPGxpbnV4L3N5c2ZzLmg+Cj4gICAjaW5jbHVkZSA8bGludXgvbWRl
di5oPgo+ICsjaW5jbHVkZSA8bGludXgvbWRldl92ZmlvX29wcy5oPgo+ICAgI2luY2x1ZGUgPGxp
bnV4L3BjaS5oPgo+ICAgI2luY2x1ZGUgPGxpbnV4L2RtYS1idWYuaD4KPiAgICNpbmNsdWRlIDxs
aW51eC9oaWdobWVtLmg+Cj4gQEAgLTUxNiw2ICs1MTcsOCBAQCBzdGF0aWMgaW50IG1ib2Noc19y
ZXNldChzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpCj4gICAJcmV0dXJuIDA7Cj4gICB9Cj4gICAK
PiArc3RhdGljIGNvbnN0IHN0cnVjdCBtZGV2X3ZmaW9fZGV2aWNlX29wcyBtZGV2X3ZmaW9fb3Bz
Owo+ICsKPiAgIHN0YXRpYyBpbnQgbWJvY2hzX2NyZWF0ZShzdHJ1Y3Qga29iamVjdCAqa29iaiwg
c3RydWN0IG1kZXZfZGV2aWNlICptZGV2KQo+ICAgewo+ICAgCWNvbnN0IHN0cnVjdCBtYm9jaHNf
dHlwZSAqdHlwZSA9IG1ib2Noc19maW5kX3R5cGUoa29iaik7Cj4gQEAgLTU2MSw3ICs1NjQsNyBA
QCBzdGF0aWMgaW50IG1ib2Noc19jcmVhdGUoc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBt
ZGV2X2RldmljZSAqbWRldikKPiAgIAltYm9jaHNfcmVzZXQobWRldik7Cj4gICAKPiAgIAltYm9j
aHNfdXNlZF9tYnl0ZXMgKz0gdHlwZS0+bWJ5dGVzOwo+IC0JbWRldl9zZXRfY2xhc3MobWRldiwg
TURFVl9DTEFTU19JRF9WRklPKTsKPiArCW1kZXZfc2V0X3ZmaW9fb3BzKG1kZXYsICZtZGV2X3Zm
aW9fb3BzKTsKPiAgIAlyZXR1cm4gMDsKPiAgIAo+ICAgZXJyX21lbToKPiBAQCAtMTQxOSwxMiAr
MTQyMiw3IEBAIHN0YXRpYyBzdHJ1Y3QgYXR0cmlidXRlX2dyb3VwICptZGV2X3R5cGVfZ3JvdXBz
W10gPSB7Cj4gICAJTlVMTCwKPiAgIH07Cj4gICAKPiAtc3RhdGljIGNvbnN0IHN0cnVjdCBtZGV2
X3BhcmVudF9vcHMgbWRldl9mb3BzID0gewo+IC0JLm93bmVyCQkJPSBUSElTX01PRFVMRSwKPiAt
CS5tZGV2X2F0dHJfZ3JvdXBzCT0gbWRldl9kZXZfZ3JvdXBzLAo+IC0JLnN1cHBvcnRlZF90eXBl
X2dyb3Vwcwk9IG1kZXZfdHlwZV9ncm91cHMsCj4gLQkuY3JlYXRlCQkJPSBtYm9jaHNfY3JlYXRl
LAo+IC0JLnJlbW92ZQkJCT0gbWJvY2hzX3JlbW92ZSwKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBt
ZGV2X3ZmaW9fZGV2aWNlX29wcyBtZGV2X3ZmaW9fb3BzID0gewo+ICAgCS5vcGVuCQkJPSBtYm9j
aHNfb3BlbiwKPiAgIAkucmVsZWFzZQkJPSBtYm9jaHNfY2xvc2UsCj4gICAJLnJlYWQJCQk9IG1i
b2Noc19yZWFkLAo+IEBAIC0xNDMzLDYgKzE0MzEsMTQgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBt
ZGV2X3BhcmVudF9vcHMgbWRldl9mb3BzID0gewo+ICAgCS5tbWFwCQkJPSBtYm9jaHNfbW1hcCwK
PiAgIH07Cj4gICAKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBtZGV2X3BhcmVudF9vcHMgbWRldl9m
b3BzID0gewo+ICsJLm93bmVyCQkJPSBUSElTX01PRFVMRSwKPiArCS5tZGV2X2F0dHJfZ3JvdXBz
CT0gbWRldl9kZXZfZ3JvdXBzLAo+ICsJLnN1cHBvcnRlZF90eXBlX2dyb3Vwcwk9IG1kZXZfdHlw
ZV9ncm91cHMsCj4gKwkuY3JlYXRlCQkJPSBtYm9jaHNfY3JlYXRlLAo+ICsJLnJlbW92ZQkJCT0g
bWJvY2hzX3JlbW92ZSwKPiArfTsKPiArCj4gICBzdGF0aWMgY29uc3Qgc3RydWN0IGZpbGVfb3Bl
cmF0aW9ucyB2ZF9mb3BzID0gewo+ICAgCS5vd25lcgkJPSBUSElTX01PRFVMRSwKPiAgIH07Cj4g
ZGlmZiAtLWdpdCBhL3NhbXBsZXMvdmZpby1tZGV2L21kcHkuYyBiL3NhbXBsZXMvdmZpby1tZGV2
L21kcHkuYwo+IGluZGV4IDY2NTYxNDU3NGQ1MC4uNTBlZTZjOThiMmFmIDEwMDY0NAo+IC0tLSBh
L3NhbXBsZXMvdmZpby1tZGV2L21kcHkuYwo+ICsrKyBiL3NhbXBsZXMvdmZpby1tZGV2L21kcHku
Ywo+IEBAIC0yNiw2ICsyNiw3IEBACj4gICAjaW5jbHVkZSA8bGludXgvaW9tbXUuaD4KPiAgICNp
bmNsdWRlIDxsaW51eC9zeXNmcy5oPgo+ICAgI2luY2x1ZGUgPGxpbnV4L21kZXYuaD4KPiArI2lu
Y2x1ZGUgPGxpbnV4L21kZXZfdmZpb19vcHMuaD4KPiAgICNpbmNsdWRlIDxsaW51eC9wY2kuaD4K
PiAgICNpbmNsdWRlIDxkcm0vZHJtX2ZvdXJjYy5oPgo+ICAgI2luY2x1ZGUgIm1kcHktZGVmcy5o
Igo+IEBAIC0yMjYsNiArMjI3LDggQEAgc3RhdGljIGludCBtZHB5X3Jlc2V0KHN0cnVjdCBtZGV2
X2RldmljZSAqbWRldikKPiAgIAlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+ICtzdGF0aWMgY29uc3Qg
c3RydWN0IG1kZXZfdmZpb19kZXZpY2Vfb3BzIG1kZXZfdmZpb19vcHM7Cj4gKwo+ICAgc3RhdGlj
IGludCBtZHB5X2NyZWF0ZShzdHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IG1kZXZfZGV2aWNl
ICptZGV2KQo+ICAgewo+ICAgCWNvbnN0IHN0cnVjdCBtZHB5X3R5cGUgKnR5cGUgPSBtZHB5X2Zp
bmRfdHlwZShrb2JqKTsKPiBAQCAtMjY5LDcgKzI3Miw3IEBAIHN0YXRpYyBpbnQgbWRweV9jcmVh
dGUoc3RydWN0IGtvYmplY3QgKmtvYmosIHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKPiAgIAlt
ZHB5X3Jlc2V0KG1kZXYpOwo+ICAgCj4gICAJbWRweV9jb3VudCsrOwo+IC0JbWRldl9zZXRfY2xh
c3MobWRldiwgTURFVl9DTEFTU19JRF9WRklPKTsKPiArCW1kZXZfc2V0X3ZmaW9fb3BzKG1kZXYs
ICZtZGV2X3ZmaW9fb3BzKTsKPiAgIAlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+IEBAIC03MjYsMTIg
KzcyOSw3IEBAIHN0YXRpYyBzdHJ1Y3QgYXR0cmlidXRlX2dyb3VwICptZGV2X3R5cGVfZ3JvdXBz
W10gPSB7Cj4gICAJTlVMTCwKPiAgIH07Cj4gICAKPiAtc3RhdGljIGNvbnN0IHN0cnVjdCBtZGV2
X3BhcmVudF9vcHMgbWRldl9mb3BzID0gewo+IC0JLm93bmVyCQkJPSBUSElTX01PRFVMRSwKPiAt
CS5tZGV2X2F0dHJfZ3JvdXBzCT0gbWRldl9kZXZfZ3JvdXBzLAo+IC0JLnN1cHBvcnRlZF90eXBl
X2dyb3Vwcwk9IG1kZXZfdHlwZV9ncm91cHMsCj4gLQkuY3JlYXRlCQkJPSBtZHB5X2NyZWF0ZSwK
PiAtCS5yZW1vdmUJCQk9IG1kcHlfcmVtb3ZlLAo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IG1kZXZf
dmZpb19kZXZpY2Vfb3BzIG1kZXZfdmZpb19vcHMgPSB7Cj4gICAJLm9wZW4JCQk9IG1kcHlfb3Bl
biwKPiAgIAkucmVsZWFzZQkJPSBtZHB5X2Nsb3NlLAo+ICAgCS5yZWFkCQkJPSBtZHB5X3JlYWQs
Cj4gQEAgLTc0MCw2ICs3MzgsMTQgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBtZGV2X3BhcmVudF9v
cHMgbWRldl9mb3BzID0gewo+ICAgCS5tbWFwCQkJPSBtZHB5X21tYXAsCj4gICB9Owo+ICAgCj4g
K3N0YXRpYyBjb25zdCBzdHJ1Y3QgbWRldl9wYXJlbnRfb3BzIG1kZXZfZm9wcyA9IHsKPiArCS5v
d25lcgkJCT0gVEhJU19NT0RVTEUsCj4gKwkubWRldl9hdHRyX2dyb3Vwcwk9IG1kZXZfZGV2X2dy
b3VwcywKPiArCS5zdXBwb3J0ZWRfdHlwZV9ncm91cHMJPSBtZGV2X3R5cGVfZ3JvdXBzLAo+ICsJ
LmNyZWF0ZQkJCT0gbWRweV9jcmVhdGUsCj4gKwkucmVtb3ZlCQkJPSBtZHB5X3JlbW92ZSwKPiAr
fTsKPiArCj4gICBzdGF0aWMgY29uc3Qgc3RydWN0IGZpbGVfb3BlcmF0aW9ucyB2ZF9mb3BzID0g
ewo+ICAgCS5vd25lcgkJPSBUSElTX01PRFVMRSwKPiAgIH07Cj4gZGlmZiAtLWdpdCBhL3NhbXBs
ZXMvdmZpby1tZGV2L210dHkuYyBiL3NhbXBsZXMvdmZpby1tZGV2L210dHkuYwo+IGluZGV4IDkw
ZGExMmZmN2ZkOS4uYmU0NzZlN2FkMWY4IDEwMDY0NAo+IC0tLSBhL3NhbXBsZXMvdmZpby1tZGV2
L210dHkuYwo+ICsrKyBiL3NhbXBsZXMvdmZpby1tZGV2L210dHkuYwo+IEBAIC0yNyw2ICsyNyw3
IEBACj4gICAjaW5jbHVkZSA8bGludXgvY3R5cGUuaD4KPiAgICNpbmNsdWRlIDxsaW51eC9maWxl
Lmg+Cj4gICAjaW5jbHVkZSA8bGludXgvbWRldi5oPgo+ICsjaW5jbHVkZSA8bGludXgvbWRldl92
ZmlvX29wcy5oPgo+ICAgI2luY2x1ZGUgPGxpbnV4L3BjaS5oPgo+ICAgI2luY2x1ZGUgPGxpbnV4
L3NlcmlhbC5oPgo+ICAgI2luY2x1ZGUgPHVhcGkvbGludXgvc2VyaWFsX3JlZy5oPgo+IEBAIC03
MDgsNiArNzA5LDggQEAgc3RhdGljIHNzaXplX3QgbWRldl9hY2Nlc3Moc3RydWN0IG1kZXZfZGV2
aWNlICptZGV2LCB1OCAqYnVmLCBzaXplX3QgY291bnQsCj4gICAJcmV0dXJuIHJldDsKPiAgIH0K
PiAgIAo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IG1kZXZfdmZpb19kZXZpY2Vfb3BzIHZmaW9fZGV2
X29wczsKPiArCj4gICBzdGF0aWMgaW50IG10dHlfY3JlYXRlKHN0cnVjdCBrb2JqZWN0ICprb2Jq
LCBzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpCj4gICB7Cj4gICAJc3RydWN0IG1kZXZfc3RhdGUg
Km1kZXZfc3RhdGU7Cj4gQEAgLTc1NSw3ICs3NTgsNyBAQCBzdGF0aWMgaW50IG10dHlfY3JlYXRl
KHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpCj4gICAJbGlz
dF9hZGQoJm1kZXZfc3RhdGUtPm5leHQsICZtZGV2X2RldmljZXNfbGlzdCk7Cj4gICAJbXV0ZXhf
dW5sb2NrKCZtZGV2X2xpc3RfbG9jayk7Cj4gICAKPiAtCW1kZXZfc2V0X2NsYXNzKG1kZXYsIE1E
RVZfQ0xBU1NfSURfVkZJTyk7Cj4gKwltZGV2X3NldF92ZmlvX29wcyhtZGV2LCAmdmZpb19kZXZf
b3BzKTsKPiAgIAlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+IEBAIC0xMzg4LDYgKzEzOTEsMTQgQEAg
c3RhdGljIHN0cnVjdCBhdHRyaWJ1dGVfZ3JvdXAgKm1kZXZfdHlwZV9ncm91cHNbXSA9IHsKPiAg
IAlOVUxMLAo+ICAgfTsKPiAgIAo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IG1kZXZfdmZpb19kZXZp
Y2Vfb3BzIHZmaW9fZGV2X29wcyA9IHsKPiArCS5vcGVuCQk9IG10dHlfb3BlbiwKPiArCS5yZWxl
YXNlCT0gbXR0eV9jbG9zZSwKPiArCS5yZWFkCQk9IG10dHlfcmVhZCwKPiArCS53cml0ZQkJPSBt
dHR5X3dyaXRlLAo+ICsJLmlvY3RsCQk9IG10dHlfaW9jdGwsCj4gK307Cj4gKwo+ICAgc3RhdGlj
IGNvbnN0IHN0cnVjdCBtZGV2X3BhcmVudF9vcHMgbWRldl9mb3BzID0gewo+ICAgCS5vd25lciAg
ICAgICAgICAgICAgICAgID0gVEhJU19NT0RVTEUsCj4gICAJLmRldl9hdHRyX2dyb3VwcyAgICAg
ICAgPSBtdHR5X2Rldl9ncm91cHMsCj4gQEAgLTEzOTUsMTEgKzE0MDYsNiBAQCBzdGF0aWMgY29u
c3Qgc3RydWN0IG1kZXZfcGFyZW50X29wcyBtZGV2X2ZvcHMgPSB7Cj4gICAJLnN1cHBvcnRlZF90
eXBlX2dyb3VwcyAgPSBtZGV2X3R5cGVfZ3JvdXBzLAo+ICAgCS5jcmVhdGUgICAgICAgICAgICAg
ICAgID0gbXR0eV9jcmVhdGUsCj4gICAJLnJlbW92ZQkJCT0gbXR0eV9yZW1vdmUsCj4gLQkub3Bl
biAgICAgICAgICAgICAgICAgICA9IG10dHlfb3BlbiwKPiAtCS5yZWxlYXNlICAgICAgICAgICAg
ICAgID0gbXR0eV9jbG9zZSwKPiAtCS5yZWFkICAgICAgICAgICAgICAgICAgID0gbXR0eV9yZWFk
LAo+IC0JLndyaXRlICAgICAgICAgICAgICAgICAgPSBtdHR5X3dyaXRlLAo+IC0JLmlvY3RsCQkg
ICAgICAgID0gbXR0eV9pb2N0bCwKPiAgIH07Cj4gICAKPiAgIHN0YXRpYyB2b2lkIG10dHlfZGV2
aWNlX3JlbGVhc2Uoc3RydWN0IGRldmljZSAqZGV2KQo+IApfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZl
bEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
