Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5E8103405FB
	for <lists+dri-devel@lfdr.de>; Thu, 18 Mar 2021 13:47:31 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B95406E8EC;
	Thu, 18 Mar 2021 12:47:23 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x52f.google.com (mail-ed1-x52f.google.com
 [IPv6:2a00:1450:4864:20::52f])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 35AF36E8EA
 for <dri-devel@lists.freedesktop.org>; Thu, 18 Mar 2021 12:47:23 +0000 (UTC)
Received: by mail-ed1-x52f.google.com with SMTP id bf3so6484502edb.6
 for <dri-devel@lists.freedesktop.org>; Thu, 18 Mar 2021 05:47:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=9PINMiQ4mbfTaBjs3kvRdIkVxb2+DOQrupWfVzv1sdk=;
 b=ZwMcPXmJbef6d5rnuw3yqG9AzW4afyirmQz7eaRjxazIaPdpiT5jNPIDvH0q8N/psj
 RQN/wDwuE5T1p7NH8Eiinlxw8asP3rt63BZiHIV4oPcGaYq6PRnr2pFtW6+cKpvAEgsk
 548uYSKtJKpHbhS1Npvfq9Ql2PQcFBesSeojEnvh6AqA4RKOcQKA1jQfw/uwxS3TH0K3
 FFSavmCJQAYnhLNSzl4Z2uO+UjN2vtQwkwjJr9vvYnpbeT64D4QFZQYdlm3Iqz+KCgC+
 bB1+zlyqnT3twX63iljSR3R0dx8fXmOH2WgR/Z2QI+d2Zfy7oImfcsFks6T6bblRYE6j
 pkKg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=9PINMiQ4mbfTaBjs3kvRdIkVxb2+DOQrupWfVzv1sdk=;
 b=gHfefRHeE76luywDtpA23n5kcLBO/FWQjTViujfrtGQG/cqPRt8rEizc2O0/EUq3uq
 BU9hsLy124nvVMDq2YAYyPlNInOL+GcGHXPmB0EGmaRcs3tQqr+BVZxRR/O03W3TCix2
 0kPILRdBF6TY/hdtp1tSujvEIjFAei5Rkd92r1mAiXwI4FVYFcZ6vb7BXLx04jfJ9qMb
 3VADvqFAIJ6zPI5bwY21v1lPEs72eikkczkhkqCM5d5Z4PwZJdLc7xLeycP34LlAAsqH
 ToJOMwfAVktEBQ30SnFXbA7kKO9YJusCPXQoK/C9USkL2mM+7QZEzhA223aLEFur6Y6i
 Bscw==
X-Gm-Message-State: AOAM5312H+nqs5CRVyhuyv0vIOIZIbTqE8eemR1UuRI9b1iYNctIb3bB
 +lETn13oSknWr4g6utacHVw0I7nv61E=
X-Google-Smtp-Source: ABdhPJwqUT/uuvVaUUFDwlMHgskLJ2rVmmCFha4377uucLgN8mHm2LmfY+/0mUIA3cv3OMoErNZLyw==
X-Received: by 2002:aa7:db4f:: with SMTP id n15mr3417292edt.12.1616071641912; 
 Thu, 18 Mar 2021 05:47:21 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:ff35:798:863e:f776])
 by smtp.gmail.com with ESMTPSA id gb22sm1736882ejc.78.2021.03.18.05.47.21
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 18 Mar 2021 05:47:21 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 2/3] drm/ttm: remove swap LRU v3
Date: Thu, 18 Mar 2021 13:47:18 +0100
Message-Id: <20210318124719.13656-2-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20210318124719.13656-1-christian.koenig@amd.com>
References: <20210318124719.13656-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: ray.huang@amd.com, matthew.william.auld@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW5zdGVhZCBldmljdCByb3VuZCByb2JpbiBmcm9tIGVhY2ggZGV2aWNlcyBTWVNURU0gYW5kIFRU
IGRvbWFpbi4KCnYyOiByZW9yZGVyIG51bV9wYWdlcyBhY2Nlc3MgcmVwb3J0ZWQgYnkgRGFuJ3Mg
c2NyaXB0CnYzOiBmaXggcmViYXNlIGZhbGxvdXQsIG51bV9wYWdlcyBzaG91bGQgYmUgMzJiaXQK
ClNpZ25lZC1vZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNv
bT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jICAgICAgICB8IDI5IC0tLS0tLS0t
LS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMgICB8ICAxIC0KIGRyaXZl
cnMvZ3B1L2RybS90dG0vdHRtX2RldmljZS5jICAgIHwgNjAgKysrKysrKysrKysrKysrKysrKysr
LS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2Rydi5jIHwgIDIgKy0KIGlu
Y2x1ZGUvZHJtL3R0bS90dG1fYm9fYXBpLmggICAgICAgIHwgIDEgLQogaW5jbHVkZS9kcm0vdHRt
L3R0bV9ib19kcml2ZXIuaCAgICAgfCAgMSAtCiBpbmNsdWRlL2RybS90dG0vdHRtX2RldmljZS5o
ICAgICAgICB8ICA3ICstLS0KIDcgZmlsZXMgY2hhbmdlZCwgNDggaW5zZXJ0aW9ucygrKSwgNTMg
ZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYyBi
L2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKaW5kZXggNjZlMDBiNDA0ZWMzLi4zNjczMTU3
NTI3ZmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYwpAQCAtNzMsNyArNzMsNiBAQCBzdGF0aWMgdm9pZCB0
dG1fYm9fZGVsX2Zyb21fbHJ1KHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8pCiB7CiAJc3Ry
dWN0IHR0bV9kZXZpY2UgKmJkZXYgPSBiby0+YmRldjsKIAotCWxpc3RfZGVsX2luaXQoJmJvLT5z
d2FwKTsKIAlsaXN0X2RlbF9pbml0KCZiby0+bHJ1KTsKIAogCWlmIChiZGV2LT5mdW5jcy0+ZGVs
X2Zyb21fbHJ1X25vdGlmeSkKQEAgLTEwNSwxNiArMTA0LDYgQEAgdm9pZCB0dG1fYm9fbW92ZV90
b19scnVfdGFpbChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAogCiAJbWFuID0gdHRtX21h
bmFnZXJfdHlwZShiZGV2LCBtZW0tPm1lbV90eXBlKTsKIAlsaXN0X21vdmVfdGFpbCgmYm8tPmxy
dSwgJm1hbi0+bHJ1W2JvLT5wcmlvcml0eV0pOwotCWlmIChtYW4tPnVzZV90dCAmJiBiby0+dHRt
ICYmCi0JICAgICEoYm8tPnR0bS0+cGFnZV9mbGFncyAmIChUVE1fUEFHRV9GTEFHX1NHIHwKLQkJ
CQkgICAgIFRUTV9QQUdFX0ZMQUdfU1dBUFBFRCkpKSB7Ci0JCXN0cnVjdCBsaXN0X2hlYWQgKnN3
YXA7Ci0KLQkJc3dhcCA9ICZ0dG1fZ2xvYi5zd2FwX2xydVtiby0+cHJpb3JpdHldOwotCQlsaXN0
X21vdmVfdGFpbCgmYm8tPnN3YXAsIHN3YXApOwotCX0gZWxzZSB7Ci0JCWxpc3RfZGVsX2luaXQo
JmJvLT5zd2FwKTsKLQl9CiAKIAlpZiAoYmRldi0+ZnVuY3MtPmRlbF9mcm9tX2xydV9ub3RpZnkp
CiAJCWJkZXYtPmZ1bmNzLT5kZWxfZnJvbV9scnVfbm90aWZ5KGJvKTsKQEAgLTEyOSw5ICsxMTgs
NiBAQCB2b2lkIHR0bV9ib19tb3ZlX3RvX2xydV90YWlsKHN0cnVjdCB0dG1fYnVmZmVyX29iamVj
dCAqYm8sCiAJCQl0dG1fYm9fYnVsa19tb3ZlX3NldF9wb3MoJmJ1bGstPnZyYW1bYm8tPnByaW9y
aXR5XSwgYm8pOwogCQkJYnJlYWs7CiAJCX0KLQkJaWYgKGJvLT50dG0gJiYgIShiby0+dHRtLT5w
YWdlX2ZsYWdzICYKLQkJCQkgKFRUTV9QQUdFX0ZMQUdfU0cgfCBUVE1fUEFHRV9GTEFHX1NXQVBQ
RUQpKSkKLQkJCXR0bV9ib19idWxrX21vdmVfc2V0X3BvcygmYnVsay0+c3dhcFtiby0+cHJpb3Jp
dHldLCBibyk7CiAJfQogfQogRVhQT1JUX1NZTUJPTCh0dG1fYm9fbW92ZV90b19scnVfdGFpbCk7
CkBAIC0xNjksMjAgKzE1NSw2IEBAIHZvaWQgdHRtX2JvX2J1bGtfbW92ZV9scnVfdGFpbChzdHJ1
Y3QgdHRtX2xydV9idWxrX21vdmUgKmJ1bGspCiAJCWxpc3RfYnVsa19tb3ZlX3RhaWwoJm1hbi0+
bHJ1W2ldLCAmcG9zLT5maXJzdC0+bHJ1LAogCQkJCSAgICAmcG9zLT5sYXN0LT5scnUpOwogCX0K
LQotCWZvciAoaSA9IDA7IGkgPCBUVE1fTUFYX0JPX1BSSU9SSVRZOyArK2kpIHsKLQkJc3RydWN0
IHR0bV9scnVfYnVsa19tb3ZlX3BvcyAqcG9zID0gJmJ1bGstPnN3YXBbaV07Ci0JCXN0cnVjdCBs
aXN0X2hlYWQgKmxydTsKLQotCQlpZiAoIXBvcy0+Zmlyc3QpCi0JCQljb250aW51ZTsKLQotCQlk
bWFfcmVzdl9hc3NlcnRfaGVsZChwb3MtPmZpcnN0LT5iYXNlLnJlc3YpOwotCQlkbWFfcmVzdl9h
c3NlcnRfaGVsZChwb3MtPmxhc3QtPmJhc2UucmVzdik7Ci0KLQkJbHJ1ID0gJnR0bV9nbG9iLnN3
YXBfbHJ1W2ldOwotCQlsaXN0X2J1bGtfbW92ZV90YWlsKGxydSwgJnBvcy0+Zmlyc3QtPnN3YXAs
ICZwb3MtPmxhc3QtPnN3YXApOwotCX0KIH0KIEVYUE9SVF9TWU1CT0wodHRtX2JvX2J1bGtfbW92
ZV9scnVfdGFpbCk7CiAKQEAgLTEwNjUsNyArMTAzNyw2IEBAIGludCB0dG1fYm9faW5pdF9yZXNl
cnZlZChzdHJ1Y3QgdHRtX2RldmljZSAqYmRldiwKIAlrcmVmX2luaXQoJmJvLT5rcmVmKTsKIAlJ
TklUX0xJU1RfSEVBRCgmYm8tPmxydSk7CiAJSU5JVF9MSVNUX0hFQUQoJmJvLT5kZGVzdHJveSk7
Ci0JSU5JVF9MSVNUX0hFQUQoJmJvLT5zd2FwKTsKIAliby0+YmRldiA9IGJkZXY7CiAJYm8tPnR5
cGUgPSB0eXBlOwogCWJvLT5tZW0ubWVtX3R5cGUgPSBUVE1fUExfU1lTVEVNOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdXRpbC5jIGIvZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fYm9fdXRpbC5jCmluZGV4IDAzMWU1ODE5ZmVjNC4uYTJhMTdjODRjZWIzIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3R0bS90dG1fYm9fdXRpbC5jCkBAIC0zMDMsNyArMzAzLDYgQEAgc3RhdGljIGludCB0dG1f
YnVmZmVyX29iamVjdF90cmFuc2ZlcihzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAogCWF0
b21pY19pbmMoJnR0bV9nbG9iLmJvX2NvdW50KTsKIAlJTklUX0xJU1RfSEVBRCgmZmJvLT5iYXNl
LmRkZXN0cm95KTsKIAlJTklUX0xJU1RfSEVBRCgmZmJvLT5iYXNlLmxydSk7Ci0JSU5JVF9MSVNU
X0hFQUQoJmZiby0+YmFzZS5zd2FwKTsKIAlmYm8tPmJhc2UubW92aW5nID0gTlVMTDsKIAlkcm1f
dm1hX25vZGVfcmVzZXQoJmZiby0+YmFzZS5iYXNlLnZtYV9ub2RlKTsKIApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fZGV2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0
bV9kZXZpY2UuYwppbmRleCBiMTQyNDE4OWZkZmIuLjIwOTZhMGZkOWMzNSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fZGV2aWNlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fZGV2aWNlLmMKQEAgLTY3LDcgKzY3LDYgQEAgc3RhdGljIGludCB0dG1fZ2xvYmFsX2lu
aXQodm9pZCkKIAl1bnNpZ25lZCBsb25nIG51bV9wYWdlczsKIAlzdHJ1Y3Qgc3lzaW5mbyBzaTsK
IAlpbnQgcmV0ID0gMDsKLQl1bnNpZ25lZCBpOwogCiAJbXV0ZXhfbG9jaygmdHRtX2dsb2JhbF9t
dXRleCk7CiAJaWYgKCsrdHRtX2dsb2JfdXNlX2NvdW50ID4gMSkKQEAgLTkwLDggKzg5LDYgQEAg
c3RhdGljIGludCB0dG1fZ2xvYmFsX2luaXQodm9pZCkKIAkJZ290byBvdXQ7CiAJfQogCi0JZm9y
IChpID0gMDsgaSA8IFRUTV9NQVhfQk9fUFJJT1JJVFk7ICsraSkKLQkJSU5JVF9MSVNUX0hFQUQo
Jmdsb2ItPnN3YXBfbHJ1W2ldKTsKIAlJTklUX0xJU1RfSEVBRCgmZ2xvYi0+ZGV2aWNlX2xpc3Qp
OwogCWF0b21pY19zZXQoJmdsb2ItPmJvX2NvdW50LCAwKTsKIApAQCAtMTA5LDI3ICsxMDYsNjAg
QEAgc3RhdGljIGludCB0dG1fZ2xvYmFsX2luaXQodm9pZCkKIGludCB0dG1fZ2xvYmFsX3N3YXBv
dXQoc3RydWN0IHR0bV9vcGVyYXRpb25fY3R4ICpjdHgsIGdmcF90IGdmcF9mbGFncykKIHsKIAlz
dHJ1Y3QgdHRtX2dsb2JhbCAqZ2xvYiA9ICZ0dG1fZ2xvYjsKKwlzdHJ1Y3QgdHRtX2RldmljZSAq
YmRldjsKKwlpbnQgcmV0ID0gLUVCVVNZOworCisJbXV0ZXhfbG9jaygmdHRtX2dsb2JhbF9tdXRl
eCk7CisJbGlzdF9mb3JfZWFjaF9lbnRyeShiZGV2LCAmZ2xvYi0+ZGV2aWNlX2xpc3QsIGRldmlj
ZV9saXN0KSB7CisJCXJldCA9IHR0bV9kZXZpY2Vfc3dhcG91dChiZGV2LCBjdHgsIGdmcF9mbGFn
cyk7CisJCWlmIChyZXQgPiAwKSB7CisJCQlsaXN0X21vdmVfdGFpbCgmYmRldi0+ZGV2aWNlX2xp
c3QsICZnbG9iLT5kZXZpY2VfbGlzdCk7CisJCQlicmVhazsKKwkJfQorCX0KKwltdXRleF91bmxv
Y2soJnR0bV9nbG9iYWxfbXV0ZXgpOworCXJldHVybiByZXQ7Cit9CitFWFBPUlRfU1lNQk9MKHR0
bV9nbG9iYWxfc3dhcG91dCk7CisKK2xvbmcgdHRtX2RldmljZV9zd2Fwb3V0KHN0cnVjdCB0dG1f
ZGV2aWNlICpiZGV2LCBzdHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHggKmN0eCwKKwkJCWdmcF90IGdm
cF9mbGFncykKK3sKKwlzdHJ1Y3QgdHRtX2dsb2JhbCAqZ2xvYiA9ICZ0dG1fZ2xvYjsKKwlzdHJ1
Y3QgdHRtX3Jlc291cmNlX21hbmFnZXIgKm1hbjsKIAlzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3Qg
KmJvOwotCXVuc2lnbmVkIGk7CisJdW5zaWduZWQgaSwgajsKIAlpbnQgcmV0OwogCiAJc3Bpbl9s
b2NrKCZnbG9iLT5scnVfbG9jayk7Ci0JZm9yIChpID0gMDsgaSA8IFRUTV9NQVhfQk9fUFJJT1JJ
VFk7ICsraSkgewotCQlsaXN0X2Zvcl9lYWNoX2VudHJ5KGJvLCAmZ2xvYi0+c3dhcF9scnVbaV0s
IHN3YXApIHsKLQkJCXVpbnQzMl90IG51bV9wYWdlcyA9IGJvLT50dG0tPm51bV9wYWdlczsKLQot
CQkJcmV0ID0gdHRtX2JvX3N3YXBvdXQoYm8sIGN0eCwgZ2ZwX2ZsYWdzKTsKLQkJCS8qIHR0bV9i
b19zd2Fwb3V0IGhhcyBkcm9wcGVkIHRoZSBscnVfbG9jayAqLwotCQkJaWYgKCFyZXQpCi0JCQkJ
cmV0dXJuIG51bV9wYWdlczsKLQkJCWlmIChyZXQgIT0gLUVCVVNZKQotCQkJCXJldHVybiByZXQ7
CisJZm9yIChpID0gVFRNX1BMX1NZU1RFTTsgaSA8IFRUTV9OVU1fTUVNX1RZUEVTOyArK2kpIHsK
KwkJbWFuID0gdHRtX21hbmFnZXJfdHlwZShiZGV2LCBpKTsKKwkJaWYgKCFtYW4gfHwgIW1hbi0+
dXNlX3R0KQorCQkJY29udGludWU7CisKKwkJZm9yIChqID0gMDsgaiA8IFRUTV9NQVhfQk9fUFJJ
T1JJVFk7ICsraikgeworCQkJbGlzdF9mb3JfZWFjaF9lbnRyeShibywgJm1hbi0+bHJ1W2pdLCBs
cnUpIHsKKwkJCQl1aW50MzJfdCBudW1fcGFnZXM7CisKKwkJCQlpZiAoIWJvLT50dG0gfHwKKwkJ
CQkgICAgYm8tPnR0bS0+cGFnZV9mbGFncyAmIFRUTV9QQUdFX0ZMQUdfU0cgfHwKKwkJCQkgICAg
Ym8tPnR0bS0+cGFnZV9mbGFncyAmIFRUTV9QQUdFX0ZMQUdfU1dBUFBFRCkKKwkJCQkJY29udGlu
dWU7CisKKwkJCQludW1fcGFnZXMgPSBiby0+dHRtLT5udW1fcGFnZXM7CisJCQkJcmV0ID0gdHRt
X2JvX3N3YXBvdXQoYm8sIGN0eCwgZ2ZwX2ZsYWdzKTsKKwkJCQkvKiB0dG1fYm9fc3dhcG91dCBo
YXMgZHJvcHBlZCB0aGUgbHJ1X2xvY2sgKi8KKwkJCQlpZiAoIXJldCkKKwkJCQkJcmV0dXJuIG51
bV9wYWdlczsKKwkJCQlpZiAocmV0ICE9IC1FQlVTWSkKKwkJCQkJcmV0dXJuIHJldDsKKwkJCX0K
IAkJfQogCX0KIAlzcGluX3VubG9jaygmZ2xvYi0+bHJ1X2xvY2spOwogCXJldHVybiAwOwogfQot
RVhQT1JUX1NZTUJPTCh0dG1fZ2xvYmFsX3N3YXBvdXQpOworRVhQT1JUX1NZTUJPTCh0dG1fZGV2
aWNlX3N3YXBvdXQpOwogCiBzdGF0aWMgdm9pZCB0dG1faW5pdF9zeXNtYW4oc3RydWN0IHR0bV9k
ZXZpY2UgKmJkZXYpCiB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dm
eF9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2Rydi5jCmluZGV4IGI5OTE0
MjJlMTU2Yy4uNGU0MWQ4MjIxZjA2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4
L3Ztd2dmeF9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9kcnYuYwpA
QCAtMTM3MSw3ICsxMzcxLDcgQEAgc3RhdGljIGludCB2bXdfcG1fZnJlZXplKHN0cnVjdCBkZXZp
Y2UgKmtkZXYpCiAJdm13X2V4ZWNidWZfcmVsZWFzZV9waW5uZWRfYm8oZGV2X3ByaXYpOwogCXZt
d19yZXNvdXJjZV9ldmljdF9hbGwoZGV2X3ByaXYpOwogCXZtd19yZWxlYXNlX2RldmljZV9lYXJs
eShkZXZfcHJpdik7Ci0Jd2hpbGUgKHR0bV9nbG9iYWxfc3dhcG91dCgmY3R4LCBHRlBfS0VSTkVM
KSA+IDApOworCXdoaWxlICh0dG1fZGV2aWNlX3N3YXBvdXQoJmRldl9wcml2LT5iZGV2LCAmY3R4
LCBHRlBfS0VSTkVMKSA+IDApOwogCWlmIChkZXZfcHJpdi0+ZW5hYmxlX2ZiKQogCQl2bXdfZmlm
b19yZXNvdXJjZV9kZWMoZGV2X3ByaXYpOwogCWlmIChhdG9taWNfcmVhZCgmZGV2X3ByaXYtPm51
bV9maWZvX3Jlc291cmNlcykgIT0gMCkgewpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vdHRtL3R0
bV9ib19hcGkuaCBiL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fYXBpLmgKaW5kZXggNTA0NGFjMzMw
ODU4Li4zNTg3ZjY2MGU4ZjQgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fYXBp
LmgKKysrIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV9ib19hcGkuaApAQCAtMTQ0LDcgKzE0NCw2IEBA
IHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCB7CiAKIAlzdHJ1Y3QgbGlzdF9oZWFkIGxydTsKIAlz
dHJ1Y3QgbGlzdF9oZWFkIGRkZXN0cm95OwotCXN0cnVjdCBsaXN0X2hlYWQgc3dhcDsKIAogCS8q
KgogCSAqIE1lbWJlcnMgcHJvdGVjdGVkIGJ5IGEgYm8gcmVzZXJ2YXRpb24uCmRpZmYgLS1naXQg
YS9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2RyaXZlci5oIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV9i
b19kcml2ZXIuaAppbmRleCA4OTU5YzAwNzVjZmQuLmQwMDdmZWVmNzY3NiAxMDA2NDQKLS0tIGEv
aW5jbHVkZS9kcm0vdHRtL3R0bV9ib19kcml2ZXIuaAorKysgYi9pbmNsdWRlL2RybS90dG0vdHRt
X2JvX2RyaXZlci5oCkBAIC02OSw3ICs2OSw2IEBAIHN0cnVjdCB0dG1fbHJ1X2J1bGtfbW92ZV9w
b3Mgewogc3RydWN0IHR0bV9scnVfYnVsa19tb3ZlIHsKIAlzdHJ1Y3QgdHRtX2xydV9idWxrX21v
dmVfcG9zIHR0W1RUTV9NQVhfQk9fUFJJT1JJVFldOwogCXN0cnVjdCB0dG1fbHJ1X2J1bGtfbW92
ZV9wb3MgdnJhbVtUVE1fTUFYX0JPX1BSSU9SSVRZXTsKLQlzdHJ1Y3QgdHRtX2xydV9idWxrX21v
dmVfcG9zIHN3YXBbVFRNX01BWF9CT19QUklPUklUWV07CiB9OwogCiAvKgpkaWZmIC0tZ2l0IGEv
aW5jbHVkZS9kcm0vdHRtL3R0bV9kZXZpY2UuaCBiL2luY2x1ZGUvZHJtL3R0bS90dG1fZGV2aWNl
LmgKaW5kZXggNmEwYjI2N2Q0ZmU2Li5jZGE2ZWZiNGMzNGIgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUv
ZHJtL3R0bS90dG1fZGV2aWNlLmgKKysrIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV9kZXZpY2UuaApA
QCAtNjMsMTEgKzYzLDYgQEAgZXh0ZXJuIHN0cnVjdCB0dG1fZ2xvYmFsIHsKIAkgKi8KIAlzdHJ1
Y3QgbGlzdF9oZWFkIGRldmljZV9saXN0OwogCi0JLyoqCi0JICogUHJvdGVjdGVkIGJ5IHRoZSBs
cnVfbG9jay4KLQkgKi8KLQlzdHJ1Y3QgbGlzdF9oZWFkIHN3YXBfbHJ1W1RUTV9NQVhfQk9fUFJJ
T1JJVFldOwotCiAJLyoqCiAJICogSW50ZXJuYWwgcHJvdGVjdGlvbi4KIAkgKi8KQEAgLTI5OCw2
ICsyOTMsOCBAQCBzdHJ1Y3QgdHRtX2RldmljZSB7CiB9OwogCiBsb25nIHR0bV9nbG9iYWxfc3dh
cG91dChzdHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHggKmN0eCwgZ2ZwX3QgZ2ZwX2ZsYWdzKTsKK2xv
bmcgdHRtX2RldmljZV9zd2Fwb3V0KHN0cnVjdCB0dG1fZGV2aWNlICpiZGV2LCBzdHJ1Y3QgdHRt
X29wZXJhdGlvbl9jdHggKmN0eCwKKwkJICAgICAgIGdmcF90IGdmcF9mbGFncyk7CiAKIHN0YXRp
YyBpbmxpbmUgc3RydWN0IHR0bV9yZXNvdXJjZV9tYW5hZ2VyICoKIHR0bV9tYW5hZ2VyX3R5cGUo
c3RydWN0IHR0bV9kZXZpY2UgKmJkZXYsIGludCBtZW1fdHlwZSkKLS0gCjIuMjUuMQoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxp
bmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
