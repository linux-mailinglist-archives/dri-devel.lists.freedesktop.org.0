Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2E1B610F9F7
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 09:38:32 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E3A346E42D;
	Tue,  3 Dec 2019 08:38:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D803E6E42C
 for <dri-devel@lists.freedesktop.org>; Tue,  3 Dec 2019 08:38:24 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 5B110ADDA;
 Tue,  3 Dec 2019 08:38:23 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: daniel@ffwll.ch, maarten.lankhorst@linux.intel.com, mripard@kernel.org,
 airlied@linux.ie, z.liuxinliang@hisilicon.com, zourongrong@gmail.com,
 kong.kongxinwei@hisilicon.com, puck.chen@hisilicon.com, sam@ravnborg.org,
 kraxel@redhat.com
Subject: [PATCH v3 3/5] drm/vram: Support scanline alignment for dumb buffers
Date: Tue,  3 Dec 2019 09:38:17 +0100
Message-Id: <20191203083819.6643-4-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191203083819.6643-1-tzimmermann@suse.de>
References: <20191203083819.6643-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@ffwll.ch>,
 Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkaW5nIHRoZSBwaXRjaCBhbGlnbm1lbnQgYXMgYW4gYXJndW1lbnQgdG8gZHJtX2dlbV92cmFt
X2ZpbGxfY3JlYXRlX2R1bWIoKQphbGxvd3MgdG8gYWxpZ24gc2NhbmxpbmVzIHRvIGNlcnRhaW4g
b2Zmc2V0cy4gQSB2YWx1ZSBvZiAwIGRpc2FibGVzIHNjYW5saW5lCnBpdGNoZXMuCgp2MzoKCSog
b25seSBkbyBwb3dlci1vZi0yIHRlc3QgaWYgcGl0Y2hfYWxpZ24gZ2l2ZW47IGZhaWxzIG90aGVy
d2lzZQoJKiBtZ2FnMjAwOiBjYWxsIGRybV9nZW1fdnJhbV9maWxsX2NyZWF0ZV9kdW1iKCkgd2l0
aCBwaXRjaF9hbGlnbgp2MjoKCSogc3BsaXQgb2YgcGF0Y2ggZnJvbSByZWxhdGVkIGhpYm1jIGNo
YW5nZXMKCSogdGVzdCBpZiBzY2FubGluZSBwaXRjaCBpcyBwb3dlciBvZiAyCgpTaWduZWQtb2Zm
LWJ5OiBUaG9tYXMgWmltbWVybWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4KUmV2aWV3ZWQtYnk6
IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+CkFja2VkLWJ5OiBTYW0gUmF2
bmJvcmcgPHNhbUByYXZuYm9yZy5vcmc+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJh
bV9oZWxwZXIuYyB8IDEzICsrKysrKysrKystLS0KIGRyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL21n
YWcyMDBfZHJ2LmMgfCAgMiArLQogaW5jbHVkZS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5oICAg
ICB8ICAxICsKIDMgZmlsZXMgY2hhbmdlZCwgMTIgaW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5jIGIv
ZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYwppbmRleCA2NjZjYjRjMjJiYjku
LjUxZWUxZjdiYzczMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9o
ZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5jCkBAIC00
ODUsNiArNDg1LDcgQEAgRVhQT1JUX1NZTUJPTChkcm1fZ2VtX3ZyYW1fdnVubWFwKTsKICAqIEBk
ZXY6CQl0aGUgRFJNIGRldmljZQogICogQGJkZXY6CQl0aGUgVFRNIEJPIGRldmljZSBtYW5hZ2lu
ZyB0aGUgYnVmZmVyIG9iamVjdAogICogQHBnX2FsaWduOgkJdGhlIGJ1ZmZlcidzIGFsaWdubWVu
dCBpbiBtdWx0aXBsZXMgb2YgdGhlIHBhZ2Ugc2l6ZQorICogQHBpdGNoX2FsaWduOgl0aGUgc2Nh
bmxpbmUncyBhbGlnbm1lbnQgaW4gcG93ZXJzIG9mIDIKICAqIEBpbnRlcnJ1cHRpYmxlOglzbGVl
cCBpbnRlcnJ1cHRpYmxlIGlmIHdhaXRpbmcgZm9yIG1lbW9yeQogICogQGFyZ3M6CQl0aGUgYXJn
dW1lbnRzIGFzIHByb3ZpZGVkIHRvIFwKIAkJCQkmc3RydWN0IGRybV9kcml2ZXIuZHVtYl9jcmVh
dGUKQEAgLTUwMiw2ICs1MDMsNyBAQCBpbnQgZHJtX2dlbV92cmFtX2ZpbGxfY3JlYXRlX2R1bWIo
c3RydWN0IGRybV9maWxlICpmaWxlLAogCQkJCSAgc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJ
CQkgIHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LAogCQkJCSAgdW5zaWduZWQgbG9uZyBwZ19h
bGlnbiwKKwkJCQkgIHVuc2lnbmVkIGxvbmcgcGl0Y2hfYWxpZ24sCiAJCQkJICBib29sIGludGVy
cnVwdGlibGUsCiAJCQkJICBzdHJ1Y3QgZHJtX21vZGVfY3JlYXRlX2R1bWIgKmFyZ3MpCiB7CkBA
IC01MTAsNyArNTEyLDEyIEBAIGludCBkcm1fZ2VtX3ZyYW1fZmlsbF9jcmVhdGVfZHVtYihzdHJ1
Y3QgZHJtX2ZpbGUgKmZpbGUsCiAJaW50IHJldDsKIAl1MzIgaGFuZGxlOwogCi0JcGl0Y2ggPSBh
cmdzLT53aWR0aCAqICgoYXJncy0+YnBwICsgNykgLyA4KTsKKwlwaXRjaCA9IGFyZ3MtPndpZHRo
ICogRElWX1JPVU5EX1VQKGFyZ3MtPmJwcCwgOCk7CisJaWYgKHBpdGNoX2FsaWduKSB7CisJCWlm
IChXQVJOX09OX09OQ0UoIWlzX3Bvd2VyX29mXzIocGl0Y2hfYWxpZ24pKSkKKwkJCXJldHVybiAt
RUlOVkFMOworCQlwaXRjaCA9IEFMSUdOKHBpdGNoLCBwaXRjaF9hbGlnbik7CisJfQogCXNpemUg
PSBwaXRjaCAqIGFyZ3MtPmhlaWdodDsKIAogCXNpemUgPSByb3VuZHVwKHNpemUsIFBBR0VfU0la
RSk7CkBAIC02MTIsOCArNjE5LDggQEAgaW50IGRybV9nZW1fdnJhbV9kcml2ZXJfZHVtYl9jcmVh
dGUoc3RydWN0IGRybV9maWxlICpmaWxlLAogCWlmIChXQVJOX09OQ0UoIWRldi0+dnJhbV9tbSwg
IlZSQU0gTU0gbm90IGluaXRpYWxpemVkIikpCiAJCXJldHVybiAtRUlOVkFMOwogCi0JcmV0dXJu
IGRybV9nZW1fdnJhbV9maWxsX2NyZWF0ZV9kdW1iKGZpbGUsIGRldiwgJmRldi0+dnJhbV9tbS0+
YmRldiwgMCwKLQkJCQkJICAgICBmYWxzZSwgYXJncyk7CisJcmV0dXJuIGRybV9nZW1fdnJhbV9m
aWxsX2NyZWF0ZV9kdW1iKGZpbGUsIGRldiwgJmRldi0+dnJhbV9tbS0+YmRldiwKKwkJCQkJICAg
ICAwLCAwLCBmYWxzZSwgYXJncyk7CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9nZW1fdnJhbV9kcml2
ZXJfZHVtYl9jcmVhdGUpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9t
Z2FnMjAwX2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9kcnYuYwppbmRl
eCBkNDM5NTFjYWVlYTAuLjE3ODc3MjYzY2M5YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L21nYWcyMDAvbWdhZzIwMF9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2Fn
MjAwX2Rydi5jCkBAIC04OCw3ICs4OCw3IEBAIGludCBtZ2FnMjAwX2RyaXZlcl9kdW1iX2NyZWF0
ZShzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUsCiAJCXBnX2FsaWduID0gUEZOX1VQKG1kZXYtPm1jLnZy
YW1fc2l6ZSk7CiAKIAlyZXR1cm4gZHJtX2dlbV92cmFtX2ZpbGxfY3JlYXRlX2R1bWIoZmlsZSwg
ZGV2LCAmZGV2LT52cmFtX21tLT5iZGV2LAotCQkJCQkgICAgIHBnX2FsaWduLCBmYWxzZSwgYXJn
cyk7CisJCQkJCSAgICAgcGdfYWxpZ24sIDAsIGZhbHNlLCBhcmdzKTsKIH0KIAogc3RhdGljIHN0
cnVjdCBkcm1fZHJpdmVyIGRyaXZlciA9IHsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9n
ZW1fdnJhbV9oZWxwZXIuaCBiL2luY2x1ZGUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuaAppbmRl
eCAwOGFkYWYzNjk1ZWEuLmI4NmQwMzhmOGEzZCAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJt
X2dlbV92cmFtX2hlbHBlci5oCisrKyBiL2luY2x1ZGUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIu
aApAQCAtMTEyLDYgKzExMiw3IEBAIGludCBkcm1fZ2VtX3ZyYW1fZmlsbF9jcmVhdGVfZHVtYihz
dHJ1Y3QgZHJtX2ZpbGUgKmZpbGUsCiAJCQkJICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJ
CSAgc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCiAJCQkJICB1bnNpZ25lZCBsb25nIHBnX2Fs
aWduLAorCQkJCSAgdW5zaWduZWQgbG9uZyBwaXRjaF9hbGlnbiwKIAkJCQkgIGJvb2wgaW50ZXJy
dXB0aWJsZSwKIAkJCQkgIHN0cnVjdCBkcm1fbW9kZV9jcmVhdGVfZHVtYiAqYXJncyk7CiAKLS0g
CjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
ZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
