Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 422505F03D
	for <lists+dri-devel@lfdr.de>; Thu,  4 Jul 2019 02:37:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1C8866E226;
	Thu,  4 Jul 2019 00:37:41 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x54a.google.com (mail-pg1-x54a.google.com
 [IPv6:2607:f8b0:4864:20::54a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2B28B6E226
 for <dri-devel@lists.freedesktop.org>; Thu,  4 Jul 2019 00:37:39 +0000 (UTC)
Received: by mail-pg1-x54a.google.com with SMTP id a13so2568132pgw.19
 for <dri-devel@lists.freedesktop.org>; Wed, 03 Jul 2019 17:37:39 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=f0PwmK8KrN9Jpyw0Rue8Ft1fka8kdXwoPf6EfT7qZIw=;
 b=aXnmGYpbmMACBJvdLQ3Woe3/AiO8zMbJUPxF26MQCMLrGhIeDxmJYYZ+cTl/hIgAvN
 j1QoZj/IaiNiJBVEUZU438ceJ6XTK71w/mEYiL8fSZDH5Q3NQ3feQry2J/FS6ah3sFVj
 /HEDbgCYEbUvKyXmUFJP4Izd4rsolofbfwyndUWWGi/Ov50rAS6lnfnbz+xya77oXQ09
 +J8zSkWV/vNfk7DkZIMa239BSUrZC2E7t8I2MkImIGCRueeC9oATYNyW6MPRrF9vDKyN
 LqHt7RwrYql+TYou1zr5PZw1I5vj+buOU2X4wYk9rCeYrgrIWxed2uHuvXcMkCiDRMxQ
 VNEA==
X-Gm-Message-State: APjAAAWX882rDvB/5h9tPC/YB4eJ7/tUEBRIZb1cB3/Xm/u2obBsndtK
 82c4BLV/QijZU9Nt3BFrz6xJ+txC7qhiiERanbN/dw==
X-Google-Smtp-Source: APXvYqwbpNsGjtf7QHt4urJS7wjUhWkD2PI3oHuHtZOM2G/nN7YCPHGjQ5yGYK0AsgvoGOi++fUmMf22gtvxJ2PhVV9CtQ==
X-Received: by 2002:a63:1462:: with SMTP id 34mr40229339pgu.417.1562200658210; 
 Wed, 03 Jul 2019 17:37:38 -0700 (PDT)
Date: Wed,  3 Jul 2019 17:36:01 -0700
In-Reply-To: <20190704003615.204860-1-brendanhiggins@google.com>
Message-Id: <20190704003615.204860-5-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190704003615.204860-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.22.0.410.gd8fdbe21b5-goog
Subject: [PATCH v6 04/18] kunit: test: add kunit_stream a std::stream like
 logger
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=f0PwmK8KrN9Jpyw0Rue8Ft1fka8kdXwoPf6EfT7qZIw=;
 b=U4ZRei3OdgZI68WZawZWFae/Lu1PnUlyWBtfnJgdU6+d0ltIx7gjfrWcCzoSLPkMnj
 h1bffkO2vsdxoA0WKchAXI/4wbxP7kJ8E7tGUMVPrWSboxak3MKrNAlQRGdNuJi+ia3K
 V3yv2YQQP0P/plKf9OccqxLBCOn3QvqnBuTccNOQSp9ZGqsnzozwid9spcBmESNXE5Qb
 SlhMGpQU1ElfwO3LhVuLMycqzd31ycNjhkUIiAPaEdb/bnVL/8J+Qw6pj1TqtgBYBsr8
 ByKlmsm36VSIPOfzsKn3vJ9HzbSylZGesYJx8P6YEcyA9VhXHv622quvB2EkYB/95OeO
 xtNg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QSBsb3Qgb2YgdGhlIGV4cGVjdGF0aW9uIGFuZCBhc3NlcnRpb24gaW5mcmFzdHJ1Y3R1cmUgcHJp
bnRzIG91dCBmYWlybHkKY29tcGxpY2F0ZWQgdGVzdCBmYWlsdXJlIG1lc3NhZ2VzLCBzbyBhZGQg
YSBDKysgc3R5bGUgbG9nIGxpYnJhcnkgZm9yCmZvciBsb2dnaW5nIHRlc3QgcmVzdWx0cy4KClNp
Z25lZC1vZmYtYnk6IEJyZW5kYW4gSGlnZ2lucyA8YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbT4K
UmV2aWV3ZWQtYnk6IEdyZWcgS3JvYWgtSGFydG1hbiA8Z3JlZ2toQGxpbnV4Zm91bmRhdGlvbi5v
cmc+ClJldmlld2VkLWJ5OiBMb2dhbiBHdW50aG9ycGUgPGxvZ2FuZ0BkZWx0YXRlZS5jb20+Ci0t
LQogaW5jbHVkZS9rdW5pdC9rdW5pdC1zdHJlYW0uaCB8ICA4MSArKysrKysrKysrKysrKysrKysr
KysrKwogaW5jbHVkZS9rdW5pdC90ZXN0LmggICAgICAgICB8ICAgMyArCiBrdW5pdC9NYWtlZmls
ZSAgICAgICAgICAgICAgIHwgICAzICstCiBrdW5pdC9rdW5pdC1zdHJlYW0uYyAgICAgICAgIHwg
MTIzICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiBrdW5pdC90ZXN0LmMgICAg
ICAgICAgICAgICAgIHwgICA2ICsrCiA1IGZpbGVzIGNoYW5nZWQsIDIxNSBpbnNlcnRpb25zKCsp
LCAxIGRlbGV0aW9uKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS9rdW5pdC9rdW5pdC1z
dHJlYW0uaAogY3JlYXRlIG1vZGUgMTAwNjQ0IGt1bml0L2t1bml0LXN0cmVhbS5jCgpkaWZmIC0t
Z2l0IGEvaW5jbHVkZS9rdW5pdC9rdW5pdC1zdHJlYW0uaCBiL2luY2x1ZGUva3VuaXQva3VuaXQt
c3RyZWFtLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwMC4uYTdiNTNl
YWJmNmJlNAotLS0gL2Rldi9udWxsCisrKyBiL2luY2x1ZGUva3VuaXQva3VuaXQtc3RyZWFtLmgK
QEAgLTAsMCArMSw4MSBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAgKi8K
Ky8qCisgKiBDKysgc3RyZWFtIHN0eWxlIHN0cmluZyBmb3JtYXR0ZXIgYW5kIHByaW50ZXIgdXNl
ZCBpbiBLVW5pdCBmb3Igb3V0cHV0dGluZworICogS1VuaXQgbWVzc2FnZXMuCisgKgorICogQ29w
eXJpZ2h0IChDKSAyMDE5LCBHb29nbGUgTExDLgorICogQXV0aG9yOiBCcmVuZGFuIEhpZ2dpbnMg
PGJyZW5kYW5oaWdnaW5zQGdvb2dsZS5jb20+CisgKi8KKworI2lmbmRlZiBfS1VOSVRfS1VOSVRf
U1RSRUFNX0gKKyNkZWZpbmUgX0tVTklUX0tVTklUX1NUUkVBTV9ICisKKyNpbmNsdWRlIDxsaW51
eC90eXBlcy5oPgorI2luY2x1ZGUgPGt1bml0L3N0cmluZy1zdHJlYW0uaD4KKworc3RydWN0IGt1
bml0OworCisvKioKKyAqIHN0cnVjdCBrdW5pdF9zdHJlYW0gLSBhIHN0ZDo6c3RyZWFtIHN0eWxl
IHN0cmluZyBidWlsZGVyLgorICoKKyAqIEEgc3RkOjpzdHJlYW0gc3R5bGUgc3RyaW5nIGJ1aWxk
ZXIuIEFsbG93cyBtZXNzYWdlcyB0byBiZSBidWlsdCB1cCBhbmQKKyAqIHByaW50ZWQgYWxsIGF0
IG9uY2UuCisgKi8KK3N0cnVjdCBrdW5pdF9zdHJlYW0geworCS8qIHByaXZhdGU6IGludGVybmFs
IHVzZSBvbmx5LiAqLworCXN0cnVjdCBrdW5pdCAqdGVzdDsKKwljb25zdCBjaGFyICpsZXZlbDsK
KwlzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqaW50ZXJuYWxfc3RyZWFtOworfTsKKworLyoqCisgKiBh
bGxvY19rdW5pdF9zdHJlYW0oKSAtIGNvbnN0cnVjdHMgYSBuZXcgJnN0cnVjdCBrdW5pdF9zdHJl
YW0uCisgKiBAdGVzdDogVGhlIHRlc3QgY29udGV4dCBvYmplY3QuCisgKiBAbGV2ZWw6IFRoZSBs
b2cgbGV2ZWwgYXQgd2hpY2ggdG8gcHJpbnQgb3V0IHRoZSBtZXNzYWdlLgorICoKKyAqIENvbnN0
cnVjdHMgYSBuZXcgdGVzdCBtYW5hZ2VkICZzdHJ1Y3Qga3VuaXRfc3RyZWFtLgorICovCitzdHJ1
Y3Qga3VuaXRfc3RyZWFtICphbGxvY19rdW5pdF9zdHJlYW0oc3RydWN0IGt1bml0ICp0ZXN0LCBj
b25zdCBjaGFyICpsZXZlbCk7CisKKy8qKgorICoga3VuaXRfc3RyZWFtX2FkZCgpOiBhZGRzIHRo
ZSBmb3JtYXR0ZWQgaW5wdXQgdG8gdGhlIGludGVybmFsIGJ1ZmZlci4KKyAqIEBrc3RyZWFtOiB0
aGUgc3RyZWFtIGJlaW5nIG9wZXJhdGVkIG9uLgorICogQGZtdDogcHJpbnRmIHN0eWxlIGZvcm1h
dCBzdHJpbmcgdG8gYXBwZW5kIHRvIHN0cmVhbS4KKyAqCisgKiBBcHBlbmRzIHRoZSBmb3JtYXR0
ZWQgc3RyaW5nLCBAZm10LCB0byB0aGUgaW50ZXJuYWwgYnVmZmVyLgorICovCit2b2lkIF9fcHJp
bnRmKDIsIDMpIGt1bml0X3N0cmVhbV9hZGQoc3RydWN0IGt1bml0X3N0cmVhbSAqa3N0cmVhbSwK
KwkJCQkgICAgIGNvbnN0IGNoYXIgKmZtdCwgLi4uKTsKKworLyoqCisgKiBrdW5pdF9zdHJlYW1f
YXBwZW5kKCk6IGFwcGVuZHMgdGhlIGNvbnRlbnRzIG9mIEBvdGhlciB0byBAa3N0cmVhbS4KKyAq
IEBrc3RyZWFtOiB0aGUgc3RyZWFtIHRvIHdoaWNoIEBvdGhlciBpcyBhcHBlbmRlZC4KKyAqIEBv
dGhlcjogdGhlIHN0cmVhbSB3aG9zZSBjb250ZW50cyBhcmUgYXBwZW5kZWQgdG8gQGtzdHJlYW0u
CisgKgorICogQXBwZW5kcyB0aGUgY29udGVudHMgb2YgQG90aGVyIHRvIEBrc3RyZWFtLgorICov
Cit2b2lkIGt1bml0X3N0cmVhbV9hcHBlbmQoc3RydWN0IGt1bml0X3N0cmVhbSAqa3N0cmVhbSwK
KwkJCSBzdHJ1Y3Qga3VuaXRfc3RyZWFtICpvdGhlcik7CisKKy8qKgorICoga3VuaXRfc3RyZWFt
X2NvbW1pdCgpOiBwcmludHMgb3V0IHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gdGhlIHVzZXIuCisg
KiBAa3N0cmVhbTogdGhlIHN0cmVhbSBiZWluZyBvcGVyYXRlZCBvbi4KKyAqCisgKiBPdXRwdXRz
IHRoZSBjb250ZW50cyBvZiB0aGUgaW50ZXJuYWwgYnVmZmVyIGFzIGEga3VuaXRfcHJpbnRrIGZv
cm1hdHRlZAorICogb3V0cHV0LiBLVU5JVF9TVFJFQU0gT05MWSBPVVRQVVRTIElUUyBCVUZGRVIg
VE8gVEhFIFVTRVIgSUYgQ09NTUlUIElTCisgKiBDQUxMRUQhISEgVGhlIHJlYXNvbiBmb3IgdGhp
cyBpcyB0aGF0IGl0IGFsbG93cyB1cyB0byBjb25zdHJ1Y3QgYSBtZXNzYWdlCisgKiBiZWZvcmUg
d2Uga25vdyB3aGV0aGVyIHdlIHdhbnQgdG8gcHJpbnQgaXQgb3V0OyB0aGlzIGNhbiBiZSBleHRy
ZW1lbHkgaGFuZHkKKyAqIGlmIHRoZXJlIGlzIGluZm9ybWF0aW9uIHlvdSBtaWdodCBuZWVkIGZv
ciBhIGZhaWx1cmUgbWVzc2FnZSB0aGF0IGlzIGVhc2llc3QKKyAqIHRvIGNvbGxlY3QgaW4gdGhl
IHN0ZXBzIGxlYWRpbmcgdXAgdG8gdGhlIGFjdHVhbCBjaGVjay4KKyAqLwordm9pZCBrdW5pdF9z
dHJlYW1fY29tbWl0KHN0cnVjdCBrdW5pdF9zdHJlYW0gKmtzdHJlYW0pOworCisvKioKKyAqIGt1
bml0X3N0cmVhbV9jbGVhcigpOiBjbGVhcnMgdGhlIGludGVybmFsIGJ1ZmZlci4KKyAqIEBrc3Ry
ZWFtOiB0aGUgc3RyZWFtIGJlaW5nIG9wZXJhdGVkIG9uLgorICoKKyAqIENsZWFycyB0aGUgY29u
dGVudHMgb2YgdGhlIGludGVybmFsIGJ1ZmZlci4KKyAqLwordm9pZCBrdW5pdF9zdHJlYW1fY2xl
YXIoc3RydWN0IGt1bml0X3N0cmVhbSAqa3N0cmVhbSk7CisKKyNlbmRpZiAvKiBfS1VOSVRfS1VO
SVRfU1RSRUFNX0ggKi8KZGlmZiAtLWdpdCBhL2luY2x1ZGUva3VuaXQvdGVzdC5oIGIvaW5jbHVk
ZS9rdW5pdC90ZXN0LmgKaW5kZXggZDk5NzNlZTVkN2Y4Mi4uYTk2YTE2NmM0ODA4YyAxMDA2NDQK
LS0tIGEvaW5jbHVkZS9rdW5pdC90ZXN0LmgKKysrIGIvaW5jbHVkZS9rdW5pdC90ZXN0LmgKQEAg
LTExLDYgKzExLDcgQEAKIAogI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+CiAjaW5jbHVkZSA8bGlu
dXgvc2xhYi5oPgorI2luY2x1ZGUgPGt1bml0L2t1bml0LXN0cmVhbS5oPgogCiBzdHJ1Y3Qga3Vu
aXRfcmVzb3VyY2U7CiAKQEAgLTE4NCw2ICsxODUsOCBAQCBzdHJ1Y3Qga3VuaXQgewogCiB2b2lk
IGt1bml0X2luaXRfdGVzdChzdHJ1Y3Qga3VuaXQgKnRlc3QsIGNvbnN0IGNoYXIgKm5hbWUpOwog
Cit2b2lkIGt1bml0X2ZhaWwoc3RydWN0IGt1bml0ICp0ZXN0LCBzdHJ1Y3Qga3VuaXRfc3RyZWFt
ICpzdHJlYW0pOworCiBpbnQga3VuaXRfcnVuX3Rlc3RzKHN0cnVjdCBrdW5pdF9zdWl0ZSAqc3Vp
dGUpOwogCiAvKioKZGlmZiAtLWdpdCBhL2t1bml0L01ha2VmaWxlIGIva3VuaXQvTWFrZWZpbGUK
aW5kZXggMjc1YjU2NWEwZTgxZi4uNmRkYzYyMmVlNmIxYyAxMDA2NDQKLS0tIGEva3VuaXQvTWFr
ZWZpbGUKKysrIGIva3VuaXQvTWFrZWZpbGUKQEAgLTEsMiArMSwzIEBACiBvYmotJChDT05GSUdf
S1VOSVQpICs9CQkJdGVzdC5vIFwKLQkJCQkJc3RyaW5nLXN0cmVhbS5vCisJCQkJCXN0cmluZy1z
dHJlYW0ubyBcCisJCQkJCWt1bml0LXN0cmVhbS5vCmRpZmYgLS1naXQgYS9rdW5pdC9rdW5pdC1z
dHJlYW0uYyBiL2t1bml0L2t1bml0LXN0cmVhbS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAwMDAwMDAuLjhiZWExZjIyZWFmYjUKLS0tIC9kZXYvbnVsbAorKysgYi9rdW5pdC9r
dW5pdC1zdHJlYW0uYwpAQCAtMCwwICsxLDEyMyBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZp
ZXI6IEdQTC0yLjAKKy8qCisgKiBDKysgc3RyZWFtIHN0eWxlIHN0cmluZyBmb3JtYXR0ZXIgYW5k
IHByaW50ZXIgdXNlZCBpbiBLVW5pdCBmb3Igb3V0cHV0dGluZworICogS1VuaXQgbWVzc2FnZXMu
CisgKgorICogQ29weXJpZ2h0IChDKSAyMDE5LCBHb29nbGUgTExDLgorICogQXV0aG9yOiBCcmVu
ZGFuIEhpZ2dpbnMgPGJyZW5kYW5oaWdnaW5zQGdvb2dsZS5jb20+CisgKi8KKworI2luY2x1ZGUg
PGt1bml0L3Rlc3QuaD4KKyNpbmNsdWRlIDxrdW5pdC9rdW5pdC1zdHJlYW0uaD4KKyNpbmNsdWRl
IDxrdW5pdC9zdHJpbmctc3RyZWFtLmg+CisKK3ZvaWQga3VuaXRfc3RyZWFtX2FkZChzdHJ1Y3Qg
a3VuaXRfc3RyZWFtICprc3RyZWFtLCBjb25zdCBjaGFyICpmbXQsIC4uLikKK3sKKwl2YV9saXN0
IGFyZ3M7CisJc3RydWN0IHN0cmluZ19zdHJlYW0gKnN0cmVhbSA9IGtzdHJlYW0tPmludGVybmFs
X3N0cmVhbTsKKworCXZhX3N0YXJ0KGFyZ3MsIGZtdCk7CisKKwlpZiAoc3RyaW5nX3N0cmVhbV92
YWRkKHN0cmVhbSwgZm10LCBhcmdzKSA8IDApCisJCWt1bml0X2Vycihrc3RyZWFtLT50ZXN0LAor
CQkJICAiRmFpbGVkIHRvIGFsbG9jYXRlIGZyYWdtZW50OiAlc1xuIiwKKwkJCSAgZm10KTsKKwor
CXZhX2VuZChhcmdzKTsKK30KKwordm9pZCBrdW5pdF9zdHJlYW1fYXBwZW5kKHN0cnVjdCBrdW5p
dF9zdHJlYW0gKmtzdHJlYW0sCisJCQkJc3RydWN0IGt1bml0X3N0cmVhbSAqb3RoZXIpCit7CisJ
c3RydWN0IHN0cmluZ19zdHJlYW0gKm90aGVyX3N0cmVhbSA9IG90aGVyLT5pbnRlcm5hbF9zdHJl
YW07CisJY29uc3QgY2hhciAqb3RoZXJfY29udGVudDsKKworCW90aGVyX2NvbnRlbnQgPSBzdHJp
bmdfc3RyZWFtX2dldF9zdHJpbmcob3RoZXJfc3RyZWFtKTsKKworCWlmICghb3RoZXJfY29udGVu
dCkgeworCQlrdW5pdF9lcnIoa3N0cmVhbS0+dGVzdCwKKwkJCSAgIkZhaWxlZCB0byBnZXQgc3Ry
aW5nIGZyb20gc2Vjb25kIGFyZ3VtZW50IGZvciBhcHBlbmRpbmdcbiIpOworCQlyZXR1cm47CisJ
fQorCisJa3VuaXRfc3RyZWFtX2FkZChrc3RyZWFtLCBvdGhlcl9jb250ZW50KTsKK30KKwordm9p
ZCBrdW5pdF9zdHJlYW1fY2xlYXIoc3RydWN0IGt1bml0X3N0cmVhbSAqa3N0cmVhbSkKK3sKKwlz
dHJpbmdfc3RyZWFtX2NsZWFyKGtzdHJlYW0tPmludGVybmFsX3N0cmVhbSk7Cit9CisKK3ZvaWQg
a3VuaXRfc3RyZWFtX2NvbW1pdChzdHJ1Y3Qga3VuaXRfc3RyZWFtICprc3RyZWFtKQoreworCXN0
cnVjdCBzdHJpbmdfc3RyZWFtICpzdHJlYW0gPSBrc3RyZWFtLT5pbnRlcm5hbF9zdHJlYW07CisJ
c3RydWN0IHN0cmluZ19zdHJlYW1fZnJhZ21lbnQgKmZyYWdtZW50OworCXN0cnVjdCBrdW5pdCAq
dGVzdCA9IGtzdHJlYW0tPnRlc3Q7CisJY2hhciAqYnVmOworCisJYnVmID0gc3RyaW5nX3N0cmVh
bV9nZXRfc3RyaW5nKHN0cmVhbSk7CisJaWYgKCFidWYpIHsKKwkJa3VuaXRfZXJyKHRlc3QsCisJ
CQkgICJDb3VsZCBub3QgYWxsb2NhdGUgYnVmZmVyLCBkdW1waW5nIHN0cmVhbTpcbiIpOworCQls
aXN0X2Zvcl9lYWNoX2VudHJ5KGZyYWdtZW50LCAmc3RyZWFtLT5mcmFnbWVudHMsIG5vZGUpIHsK
KwkJCWt1bml0X2Vycih0ZXN0LCBmcmFnbWVudC0+ZnJhZ21lbnQpOworCQl9CisJCWt1bml0X2Vy
cih0ZXN0LCAiXG4iKTsKKwkJZ290byBjbGVhbnVwOworCX0KKworCWt1bml0X3ByaW50ayhrc3Ry
ZWFtLT5sZXZlbCwgdGVzdCwgYnVmKTsKKwlrZnJlZShidWYpOworCitjbGVhbnVwOgorCWt1bml0
X3N0cmVhbV9jbGVhcihrc3RyZWFtKTsKK30KKworc3RhdGljIGludCBrdW5pdF9zdHJlYW1faW5p
dChzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlcywgdm9pZCAqY29udGV4dCkKK3sKKwlzdHJ1Y3Qg
a3VuaXQgKnRlc3QgPSBjb250ZXh0OworCXN0cnVjdCBrdW5pdF9zdHJlYW0gKnN0cmVhbTsKKwor
CXN0cmVhbSA9IGt6YWxsb2Moc2l6ZW9mKCpzdHJlYW0pLCBHRlBfS0VSTkVMKTsKKwlpZiAoIXN0
cmVhbSkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlyZXMtPmFsbG9jYXRpb24gPSBzdHJlYW07CisJ
c3RyZWFtLT50ZXN0ID0gdGVzdDsKKwlzdHJlYW0tPmludGVybmFsX3N0cmVhbSA9IGFsbG9jX3N0
cmluZ19zdHJlYW0odGVzdCk7CisKKwlpZiAoIXN0cmVhbS0+aW50ZXJuYWxfc3RyZWFtKQorCQly
ZXR1cm4gLUVOT01FTTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgdm9pZCBrdW5pdF9zdHJl
YW1fZnJlZShzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlcykKK3sKKwlzdHJ1Y3Qga3VuaXRfc3Ry
ZWFtICpzdHJlYW0gPSByZXMtPmFsbG9jYXRpb247CisKKwlpZiAoIXN0cmluZ19zdHJlYW1faXNf
ZW1wdHkoc3RyZWFtLT5pbnRlcm5hbF9zdHJlYW0pKSB7CisJCWt1bml0X2VycihzdHJlYW0tPnRl
c3QsCisJCQkgICJFbmQgb2YgdGVzdCBjYXNlIHJlYWNoZWQgd2l0aCB1bmNvbW1pdHRlZCBzdHJl
YW0gZW50cmllc1xuIik7CisJCWt1bml0X3N0cmVhbV9jb21taXQoc3RyZWFtKTsKKwl9Cit9CisK
K3N0cnVjdCBrdW5pdF9zdHJlYW0gKmFsbG9jX2t1bml0X3N0cmVhbShzdHJ1Y3Qga3VuaXQgKnRl
c3QsIGNvbnN0IGNoYXIgKmxldmVsKQoreworCXN0cnVjdCBrdW5pdF9zdHJlYW0gKmtzdHJlYW07
CisJc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXM7CisKKwlyZXMgPSBrdW5pdF9hbGxvY19yZXNv
dXJjZSh0ZXN0LAorCQkJCSAgIGt1bml0X3N0cmVhbV9pbml0LAorCQkJCSAgIGt1bml0X3N0cmVh
bV9mcmVlLAorCQkJCSAgIHRlc3QpOworCisJaWYgKCFyZXMpCisJCXJldHVybiBOVUxMOworCisJ
a3N0cmVhbSA9IHJlcy0+YWxsb2NhdGlvbjsKKwlrc3RyZWFtLT5sZXZlbCA9IGxldmVsOworCisJ
cmV0dXJuIGtzdHJlYW07Cit9CmRpZmYgLS1naXQgYS9rdW5pdC90ZXN0LmMgYi9rdW5pdC90ZXN0
LmMKaW5kZXggYTcwZmJlNDQ5ZTkyMi4uYzZhOWU4OWFlMzA0OCAxMDA2NDQKLS0tIGEva3VuaXQv
dGVzdC5jCisrKyBiL2t1bml0L3Rlc3QuYwpAQCAtMTIwLDYgKzEyMCwxMiBAQCBzdGF0aWMgdm9p
ZCBrdW5pdF9wcmludF90ZXN0X2Nhc2Vfb2tfbm90X29rKHN0cnVjdCBrdW5pdF9jYXNlICp0ZXN0
X2Nhc2UsCiAJCQkgICAgICB0ZXN0X2Nhc2UtPm5hbWUpOwogfQogCit2b2lkIGt1bml0X2ZhaWwo
c3RydWN0IGt1bml0ICp0ZXN0LCBzdHJ1Y3Qga3VuaXRfc3RyZWFtICpzdHJlYW0pCit7CisJa3Vu
aXRfc2V0X2ZhaWx1cmUodGVzdCk7CisJa3VuaXRfc3RyZWFtX2NvbW1pdChzdHJlYW0pOworfQor
CiB2b2lkIGt1bml0X2luaXRfdGVzdChzdHJ1Y3Qga3VuaXQgKnRlc3QsIGNvbnN0IGNoYXIgKm5h
bWUpCiB7CiAJbXV0ZXhfaW5pdCgmdGVzdC0+bG9jayk7Ci0tIAoyLjIyLjAuNDEwLmdkOGZkYmUy
MWI1LWdvb2cKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
