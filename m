Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6F2247DCDB
	for <lists+dri-devel@lfdr.de>; Thu,  1 Aug 2019 15:53:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 111116E611;
	Thu,  1 Aug 2019 13:53:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.domeneshop.no (smtp.domeneshop.no
 [IPv6:2a01:5b40:0:3005::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7D3EA6E610
 for <dri-devel@lists.freedesktop.org>; Thu,  1 Aug 2019 13:53:06 +0000 (UTC)
Received: from 211.81-166-168.customer.lyse.net ([81.166.168.211]:56446
 helo=localhost.localdomain)
 by smtp.domeneshop.no with esmtpsa (TLS1.2:ECDHE_RSA_AES_128_CBC_SHA1:128)
 (Exim 4.84_2) (envelope-from <noralf@tronnes.org>)
 id 1htBVw-0000ZK-J2; Thu, 01 Aug 2019 15:53:04 +0200
From: =?UTF-8?q?Noralf=20Tr=C3=B8nnes?= <noralf@tronnes.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 1/4] drm/mipi-dbi: Support command mode panel drivers
Date: Thu,  1 Aug 2019 15:52:46 +0200
Message-Id: <20190801135249.28803-2-noralf@tronnes.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190801135249.28803-1-noralf@tronnes.org>
References: <20190801135249.28803-1-noralf@tronnes.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; d=tronnes.org; s=ds201810; 
 h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From;
 bh=X7htPHlp6VRHKQ4vz7sSWmfuQnKNZh6hHNPQ/QygjhE=; 
 b=EVbeiyTVt6+gPze6nkN0tnTG9PZd+H9nWk1QQFaOcokoCTOClG0IjnjSp/NBWv5jMfde26frH2tAX6H1Xa8fQPbLKLoCUlwokjSGJzJJ2UsHZMnZP8PiQql96dcRcbAmFbiFoICvnbEeWttIE5so9bEj+ZgumjfEDUD9qjQ6E243fOZcvFeJixBUjaCr9MyutiiEemzJPiz0GNTwNHB2YyHZgB6/xc8og9k4CWgb429xHXxgtyaGnhpfpTmh2A9vjJX3uD2hFLBy0gCpJGSIHUJpct4+u9Rtw9I+qL9OWygJkZwyGeccgyn3EnH+SaNZ8u9j+1DSmewB1+pbCHEaiA==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: daniel.vetter@ffwll.ch, emil.l.velikov@gmail.com, josef@lusticky.cz,
 thierry.reding@gmail.com, laurent.pinchart@ideasonboard.com, sam@ravnborg.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBhZGRzIGEgZnVuY3Rpb24gdGhhdCByZWdpc3RlcnMgYSBEUk0gZHJpdmVyIGZvciB1c2Ug
d2l0aCBNSVBJIERCSQpwYW5lbHMgaW4gY29tbWFuZCBtb2RlLiBUaGF0IGlzLCBmcmFtZWJ1ZmZl
ciB1cGxvYWQgb3ZlciBEQkkuCgpTaWduZWQtb2ZmLWJ5OiBOb3JhbGYgVHLDuG5uZXMgPG5vcmFs
ZkB0cm9ubmVzLm9yZz4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX21pcGlfZGJpLmMgfCA5MiAr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiBpbmNsdWRlL2RybS9kcm1fbWlwaV9k
YmkuaCAgICAgfCAzNCArKysrKysrKysrKysrCiAyIGZpbGVzIGNoYW5nZWQsIDEyNiBpbnNlcnRp
b25zKCspCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9taXBpX2RiaS5jIGIvZHJp
dmVycy9ncHUvZHJtL2RybV9taXBpX2RiaS5jCmluZGV4IDE5NjFmNzEzYWFhYi4uNzk3YTIwZTNh
MDE3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX21pcGlfZGJpLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2RybV9taXBpX2RiaS5jCkBAIC0xNywxMSArMTcsMTMgQEAKICNpbmNsdWRl
IDxkcm0vZHJtX2RhbWFnZV9oZWxwZXIuaD4KICNpbmNsdWRlIDxkcm0vZHJtX2Rydi5oPgogI2lu
Y2x1ZGUgPGRybS9kcm1fZ2VtX2NtYV9oZWxwZXIuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2ZiX2hl
bHBlci5oPgogI2luY2x1ZGUgPGRybS9kcm1fZm9ybWF0X2hlbHBlci5oPgogI2luY2x1ZGUgPGRy
bS9kcm1fZm91cmNjLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9nZW1fZnJhbWVidWZmZXJfaGVscGVy
Lmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9taXBpX2RiaS5oPgogI2luY2x1ZGUgPGRybS9kcm1fbW9k
ZXMuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX3BhbmVsLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9wcm9i
ZV9oZWxwZXIuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3JlY3QuaD4KICNpbmNsdWRlIDxkcm0vZHJt
X3ZibGFuay5oPgpAQCAtNTk3LDYgKzU5OSw5NiBAQCB2b2lkIG1pcGlfZGJpX3JlbGVhc2Uoc3Ry
dWN0IGRybV9kZXZpY2UgKmRybSkKIH0KIEVYUE9SVF9TWU1CT0wobWlwaV9kYmlfcmVsZWFzZSk7
CiAKK3N0YXRpYyB2b2lkIGRybV9taXBpX2RiaV9wYW5lbF9waXBlX2VuYWJsZShzdHJ1Y3QgZHJt
X3NpbXBsZV9kaXNwbGF5X3BpcGUgKnBpcGUsCisJCQkJCSAgIHN0cnVjdCBkcm1fY3J0Y19zdGF0
ZSAqY3J0Y19zdGF0ZSwKKwkJCQkJICAgc3RydWN0IGRybV9wbGFuZV9zdGF0ZSAqcGxhbmVfc3Rh
dGUpCit7CisJc3RydWN0IG1pcGlfZGJpX2RldiAqZGJpZGV2ID0gZHJtX3RvX21pcGlfZGJpX2Rl
dihwaXBlLT5jcnRjLmRldik7CisJc3RydWN0IGRybV9wYW5lbCAqcGFuZWwgPSBkYmlkZXYtPnBh
bmVsOworCWludCByZXQsIGlkeDsKKworCWlmICghZHJtX2Rldl9lbnRlcihwaXBlLT5jcnRjLmRl
diwgJmlkeCkpCisJCXJldHVybjsKKworCURSTV9ERUJVR19LTVMoIlxuIik7CisKKwlyZXQgPSBk
cm1fcGFuZWxfcHJlcGFyZShwYW5lbCk7CisJaWYgKHJldCkKKwkJZ290byBvdXRfZXhpdDsKKwor
CW1pcGlfZGJpX2VuYWJsZV9mbHVzaChkYmlkZXYsIGNydGNfc3RhdGUsIHBsYW5lX3N0YXRlKTsK
KworCWRybV9wYW5lbF9lbmFibGUocGFuZWwpOworb3V0X2V4aXQ6CisJZHJtX2Rldl9leGl0KGlk
eCk7Cit9CisKK3N0YXRpYyB2b2lkIGRybV9taXBpX2RiaV9wYW5lbF9waXBlX2Rpc2FibGUoc3Ry
dWN0IGRybV9zaW1wbGVfZGlzcGxheV9waXBlICpwaXBlKQoreworCXN0cnVjdCBtaXBpX2RiaV9k
ZXYgKmRiaWRldiA9IGRybV90b19taXBpX2RiaV9kZXYocGlwZS0+Y3J0Yy5kZXYpOworCXN0cnVj
dCBkcm1fcGFuZWwgKnBhbmVsID0gZGJpZGV2LT5wYW5lbDsKKworCWlmICghZGJpZGV2LT5lbmFi
bGVkKQorCQlyZXR1cm47CisKKwlEUk1fREVCVUdfS01TKCJcbiIpOworCisJZGJpZGV2LT5lbmFi
bGVkID0gZmFsc2U7CisJZHJtX3BhbmVsX2Rpc2FibGUocGFuZWwpOworCWRybV9wYW5lbF91bnBy
ZXBhcmUocGFuZWwpOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9zaW1wbGVfZGlzcGxh
eV9waXBlX2Z1bmNzIGRybV9taXBpX2RiaV9waXBlX2Z1bmNzID0geworCS5lbmFibGUgPSBkcm1f
bWlwaV9kYmlfcGFuZWxfcGlwZV9lbmFibGUsCisJLmRpc2FibGUgPSBkcm1fbWlwaV9kYmlfcGFu
ZWxfcGlwZV9kaXNhYmxlLAorCS51cGRhdGUgPSBtaXBpX2RiaV9waXBlX3VwZGF0ZSwKKwkucHJl
cGFyZV9mYiA9IGRybV9nZW1fZmJfc2ltcGxlX2Rpc3BsYXlfcGlwZV9wcmVwYXJlX2ZiLAorfTsK
KworLyoqCisgKiBkcm1fbWlwaV9kYmlfcGFuZWxfcmVnaXN0ZXIgLSBSZWdpc3RlciBhIE1JUEkg
REJJIERSTSBkcml2ZXIKKyAqIEBwYW5lbDogRFJNIFBhbmVsCisgKiBAZGJpZGV2OiBNSVBJIERC
SSBkZXZpY2Ugc3RydWN0dXJlIHRvIGluaXRpYWxpemUKKyAqIEBtb2RlOiBEaXNwbGF5IG1vZGUK
KyAqCisgKiBUaGlzIGZ1bmN0aW9uIHJlZ2lzdGVyZXMgYSBEUk0gZHJpdmVyIHdpdGggQHBhbmVs
IGF0dGFjaGVkLgorICoKKyAqIFJldHVybnM6CisgKiBaZXJvIG9uIHN1Y2Nlc3MsIG5lZ2F0aXZl
IGVycm9yIGNvZGUgb24gZmFpbHVyZS4KKyAqLworaW50IGRybV9taXBpX2RiaV9wYW5lbF9yZWdp
c3RlcihzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCwgc3RydWN0IG1pcGlfZGJpX2RldiAqZGJpZGV2
LAorCQkJCXN0cnVjdCBkcm1fZHJpdmVyICpkcml2ZXIsIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxh
eV9tb2RlICptb2RlLAorCQkJCXUzMiByb3RhdGlvbikKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYg
PSBwYW5lbC0+ZGV2OworCXN0cnVjdCBkcm1fZGV2aWNlICpkcm07CisJaW50IHJldDsKKworCWRi
aWRldi0+cGFuZWwgPSBwYW5lbDsKKworCWRybSA9ICZkYmlkZXYtPmRybTsKKwlyZXQgPSBkZXZt
X2RybV9kZXZfaW5pdChkZXYsIGRybSwgZHJpdmVyKTsKKwlpZiAocmV0KSB7CisJCWtmcmVlKGRi
aWRldik7CisJCXJldHVybiByZXQ7CisJfQorCisJZHJtX21vZGVfY29uZmlnX2luaXQoZHJtKTsK
KworCXJldCA9IG1pcGlfZGJpX2Rldl9pbml0KGRiaWRldiwgJmRybV9taXBpX2RiaV9waXBlX2Z1
bmNzLCBtb2RlLCByb3RhdGlvbik7CisKKwlkcm1fbW9kZV9jb25maWdfcmVzZXQoZHJtKTsKKwor
CXJldCA9IGRybV9kZXZfcmVnaXN0ZXIoZHJtLCAwKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0
OworCisJZHJtX2ZiZGV2X2dlbmVyaWNfc2V0dXAoZHJtLCAxNik7CisKKwlyZXR1cm4gMDsKK30K
K0VYUE9SVF9TWU1CT0woZHJtX21pcGlfZGJpX3BhbmVsX3JlZ2lzdGVyKTsKKwogLyoqCiAgKiBt
aXBpX2RiaV9od19yZXNldCAtIEhhcmR3YXJlIHJlc2V0IG9mIGNvbnRyb2xsZXIKICAqIEBkYmk6
IE1JUEkgREJJIHN0cnVjdHVyZQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX21pcGlfZGJp
LmggYi9pbmNsdWRlL2RybS9kcm1fbWlwaV9kYmkuaAppbmRleCA2N2M2NmY1ZWU1OTEuLmY0MWVl
MGQzMTg3MSAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX21pcGlfZGJpLmgKKysrIGIvaW5j
bHVkZS9kcm0vZHJtX21pcGlfZGJpLmgKQEAgLTEyLDYgKzEyLDcgQEAKICNpbmNsdWRlIDxkcm0v
ZHJtX2RldmljZS5oPgogI2luY2x1ZGUgPGRybS9kcm1fc2ltcGxlX2ttc19oZWxwZXIuaD4KIAor
c3RydWN0IGRybV9wYW5lbDsKIHN0cnVjdCBkcm1fcmVjdDsKIHN0cnVjdCBzcGlfZGV2aWNlOwog
c3RydWN0IGdwaW9fZGVzYzsKQEAgLTEyMyw2ICsxMjQsMTEgQEAgc3RydWN0IG1pcGlfZGJpX2Rl
diB7CiAJICogQGRiaTogTUlQSSBEQkkgaW50ZXJmYWNlCiAJICovCiAJc3RydWN0IG1pcGlfZGJp
IGRiaTsKKworCS8qKgorCSAqIEBwYW5lbDogQXR0YWNoZWQgRFJNIHBhbmVsLiBTZWUgZHJtX21p
cGlfZGJpX3BhbmVsX3JlZ2lzdGVyKCkuCisJICovCisJc3RydWN0IGRybV9wYW5lbCAqcGFuZWw7
CiB9OwogCiBzdGF0aWMgaW5saW5lIHN0cnVjdCBtaXBpX2RiaV9kZXYgKmRybV90b19taXBpX2Ri
aV9kZXYoc3RydWN0IGRybV9kZXZpY2UgKmRybSkKQEAgLTE0MCw2ICsxNDYsMzQgQEAgaW50IG1p
cGlfZGJpX2Rldl9pbml0X3dpdGhfZm9ybWF0cyhzdHJ1Y3QgbWlwaV9kYmlfZGV2ICpkYmlkZXYs
CiBpbnQgbWlwaV9kYmlfZGV2X2luaXQoc3RydWN0IG1pcGlfZGJpX2RldiAqZGJpZGV2LAogCQkg
ICAgICBjb25zdCBzdHJ1Y3QgZHJtX3NpbXBsZV9kaXNwbGF5X3BpcGVfZnVuY3MgKmZ1bmNzLAog
CQkgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwgdW5zaWduZWQgaW50
IHJvdGF0aW9uKTsKKworLyoqCisgKiBERUZJTkVfRFJNX01JUElfREJJX1BBTkVMX0RSSVZFUiAt
IERlZmluZSBhIERSTSBkcml2ZXIgc3RydWN0dXJlCisgKiBAX25hbWU6IE5hbWUKKyAqIEBfZGVz
YzogRGVzY3JpcHRpb24KKyAqIEBfZGF0ZTogRGF0ZQorICoKKyAqIFRoaXMgbWFjcm8gZGVmaW5l
cyBhICZkcm1fZHJpdmVyIGZvciBNSVBJIERCSSBwYW5lbCBkcml2ZXJzLgorICovCisjZGVmaW5l
IERFRklORV9EUk1fTUlQSV9EQklfUEFORUxfRFJJVkVSKF9uYW1lLCBfZGVzYywgX2RhdGUpIFwK
KwlERUZJTkVfRFJNX0dFTV9DTUFfRk9QUyhfbmFtZSAjIyBfZm9wcyk7IFwKKwlzdGF0aWMgc3Ry
dWN0IGRybV9kcml2ZXIgX25hbWUgIyMgX2RybV9kcml2ZXIgPSB7IFwKKwkJLmRyaXZlcl9mZWF0
dXJlcwk9IERSSVZFUl9HRU0gfCBEUklWRVJfTU9ERVNFVCB8IERSSVZFUl9BVE9NSUMsIFwKKwkJ
LmZvcHMJCQk9ICYgX25hbWUgIyMgX2ZvcHMsIFwKKwkJLnJlbGVhc2UJCT0gbWlwaV9kYmlfcmVs
ZWFzZSwgXAorCQlEUk1fR0VNX0NNQV9WTUFQX0RSSVZFUl9PUFMsIFwKKwkJLmRlYnVnZnNfaW5p
dAkJPSBtaXBpX2RiaV9kZWJ1Z2ZzX2luaXQsIFwKKwkJLm5hbWUJCQk9ICNfbmFtZSwgXAorCQku
ZGVzYwkJCT0gX2Rlc2MsIFwKKwkJLmRhdGUJCQk9IF9kYXRlLCBcCisJCS5tYWpvcgkJCT0gMSwg
XAorCQkubWlub3IJCQk9IDAsIFwKKwl9CisKK2ludCBkcm1fbWlwaV9kYmlfcGFuZWxfcmVnaXN0
ZXIoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwsIHN0cnVjdCBtaXBpX2RiaV9kZXYgKmRiaWRldiwK
KwkJCQlzdHJ1Y3QgZHJtX2RyaXZlciAqZHJpdmVyLCBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlf
bW9kZSAqbW9kZSwKKwkJCQl1MzIgcm90YXRpb24pOworCiB2b2lkIG1pcGlfZGJpX3JlbGVhc2Uo
c3RydWN0IGRybV9kZXZpY2UgKmRybSk7CiB2b2lkIG1pcGlfZGJpX3BpcGVfdXBkYXRlKHN0cnVj
dCBkcm1fc2ltcGxlX2Rpc3BsYXlfcGlwZSAqcGlwZSwKIAkJCSAgc3RydWN0IGRybV9wbGFuZV9z
dGF0ZSAqb2xkX3N0YXRlKTsKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vZHJpLWRldmVs
