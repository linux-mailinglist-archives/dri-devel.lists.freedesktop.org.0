Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B440EC1BCF
	for <lists+dri-devel@lfdr.de>; Mon, 30 Sep 2019 08:57:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B70586E359;
	Mon, 30 Sep 2019 06:57:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.codeaurora.org (smtp.codeaurora.org [198.145.29.96])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BCB0F6E365
 for <dri-devel@lists.freedesktop.org>; Mon, 30 Sep 2019 06:40:58 +0000 (UTC)
Received: by smtp.codeaurora.org (Postfix, from userid 1000)
 id 3C52D60BF9; Mon, 30 Sep 2019 06:40:57 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on
 pdx-caf-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No, score=-2.7 required=2.0 tests=ALL_TRUSTED,BAYES_00,
 DKIM_INVALID,DKIM_SIGNED,SPF_NONE autolearn=no autolearn_force=no
 version=3.4.0
Received: from kgunda-linux.qualcomm.com
 (blr-c-bdr-fw-01_globalnat_allzones-outside.qualcomm.com [103.229.19.19])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-SHA256 (128/128 bits))
 (No client certificate requested)
 (Authenticated sender: kgunda@smtp.codeaurora.org)
 by smtp.codeaurora.org (Postfix) with ESMTPSA id 9A0D66134E;
 Mon, 30 Sep 2019 06:40:49 +0000 (UTC)
DMARC-Filter: OpenDMARC Filter v1.3.2 smtp.codeaurora.org 9A0D66134E
From: Kiran Gunda <kgunda@codeaurora.org>
To: bjorn.andersson@linaro.org, jingoohan1@gmail.com, lee.jones@linaro.org,
 b.zolnierkie@samsung.com, dri-devel@lists.freedesktop.org,
 daniel.thompson@linaro.org, jacek.anaszewski@gmail.com, pavel@ucw.cz,
 robh+dt@kernel.org, mark.rutland@arm.com, linux-leds@vger.kernel.org,
 devicetree@vger.kernel.org, linux-kernel@vger.kernel.org,
 Andy Gross <agross@kernel.org>, linux-arm-msm@vger.kernel.org,
 linux-fbdev@vger.kernel.org
Subject: [PATCH V6 6/8] backlight: qcom-wled: Add support for WLED4 peripheral
Date: Mon, 30 Sep 2019 12:09:11 +0530
Message-Id: <1569825553-26039-7-git-send-email-kgunda@codeaurora.org>
X-Mailer: git-send-email 1.9.1
In-Reply-To: <1569825553-26039-1-git-send-email-kgunda@codeaurora.org>
References: <1569825553-26039-1-git-send-email-kgunda@codeaurora.org>
X-Mailman-Approved-At: Mon, 30 Sep 2019 06:57:28 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=codeaurora.org; s=default; t=1569825658;
 bh=+7JHGAgcA+GdC8dVlMB5h7P0Uy5NXqdTP7hWLkSJaGU=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=T5XqOKPibc6P3v1Th0ree4ADycfydSnZVFoTTKZAaUYD3zHCb3Xl7ibWB4Qc8l7kb
 BNti6Tpyo4OkZIeyS9CoEC+BJ9VEc92U6CEJ9EFuIuZua2LkWeLAvurXJr4/2OyjEV
 2Lp+AaUflLoQVkdF+xf+lbH1boi3zNjnMtUv/E/k=
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=codeaurora.org; s=default; t=1569825655;
 bh=+7JHGAgcA+GdC8dVlMB5h7P0Uy5NXqdTP7hWLkSJaGU=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=bDXeoPxRmatxxZmrHaib0T1koR29/LUTGupjzwxeLOVeRhNm+lfVCycBXlokfjQWG
 yh7vn9yi/1LTXWIiOSw3fHaVQHsgLTIAtELuhSjCCVJTFyH9kPbJOEd6bqExiz/PnO
 ExsoH5i6r9lXHM/JKpbe5t6KmNslfmERsHbzUl+k=
X-Mailman-Original-Authentication-Results: pdx-caf-mail.web.codeaurora.org;
 dmarc=none (p=none dis=none)
 header.from=codeaurora.org
X-Mailman-Original-Authentication-Results: pdx-caf-mail.web.codeaurora.org;
 spf=none
 smtp.mailfrom=kgunda@codeaurora.org
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Kiran Gunda <kgunda@codeaurora.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V0xFRDQgcGVyaXBoZXJhbCBpcyBwcmVzZW50IG9uIHNvbWUgUE1JQ3MgbGlrZSBwbWk4OTk4IGFu
ZApwbTY2MGwuIEl0IGhhcyBhIGRpZmZlcmVudCByZWdpc3RlciBtYXAgYW5kIGNvbmZpZ3VyYXRp
b25zCmFyZSBhbHNvIGRpZmZlcmVudC4gQWRkIHN1cHBvcnQgZm9yIGl0LgoKU2lnbmVkLW9mZi1i
eTogS2lyYW4gR3VuZGEgPGtndW5kYUBjb2RlYXVyb3JhLm9yZz4KUmV2aWV3ZWQtYnk6IEJqb3Ju
IEFuZGVyc3NvbiA8Ympvcm4uYW5kZXJzc29uQGxpbmFyby5vcmc+Ci0tLQogZHJpdmVycy92aWRl
by9iYWNrbGlnaHQvcWNvbS13bGVkLmMgfCAyNjMgKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKystCiAxIGZpbGUgY2hhbmdlZCwgMjU3IGluc2VydGlvbnMoKyksIDYgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvcWNvbS13bGVkLmMgYi9k
cml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9xY29tLXdsZWQuYwppbmRleCA3NDBmMWI2Li5iMDEyYTJh
IDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9xY29tLXdsZWQuYworKysgYi9k
cml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9xY29tLXdsZWQuYwpAQCAtNTYsNiArNTYsMjggQEAKICNk
ZWZpbmUgV0xFRDNfU0lOS19SRUdfU1RSX0NBQkMobikJCQkoMHg2NiArIChuICogMHgxMCkpCiAj
ZGVmaW5lICBXTEVEM19TSU5LX1JFR19TVFJfQ0FCQ19NQVNLCQkJQklUKDcpCiAKKy8qIFdMRUQ0
IHNwZWNpZmljIHNpbmsgcmVnaXN0ZXJzICovCisjZGVmaW5lIFdMRUQ0X1NJTktfUkVHX0NVUlJf
U0lOSwkJCTB4NDYKKyNkZWZpbmUgIFdMRUQ0X1NJTktfUkVHX0NVUlJfU0lOS19NQVNLCQkJR0VO
TUFTSyg3LCA0KQorI2RlZmluZSAgV0xFRDRfU0lOS19SRUdfQ1VSUl9TSU5LX1NIRlQJCQk0CisK
Ky8qIFdMRUQ0IHNwZWNpZmljIHBlci0nc3RyaW5nJyByZWdpc3RlcnMgYmVsb3cgKi8KKyNkZWZp
bmUgV0xFRDRfU0lOS19SRUdfU1RSX01PRF9FTihuKQkJCSgweDUwICsgKG4gKiAweDEwKSkKKyNk
ZWZpbmUgIFdMRUQ0X1NJTktfUkVHX1NUUl9NT0RfTUFTSwkJCUJJVCg3KQorCisjZGVmaW5lIFdM
RUQ0X1NJTktfUkVHX1NUUl9GVUxMX1NDQUxFX0NVUlIobikJCSgweDUyICsgKG4gKiAweDEwKSkK
KyNkZWZpbmUgIFdMRUQ0X1NJTktfUkVHX1NUUl9GVUxMX1NDQUxFX0NVUlJfTUFTSwlHRU5NQVNL
KDMsIDApCisKKyNkZWZpbmUgV0xFRDRfU0lOS19SRUdfU1RSX01PRF9TUkMobikJCQkoMHg1MyAr
IChuICogMHgxMCkpCisjZGVmaW5lICBXTEVENF9TSU5LX1JFR19TVFJfTU9EX1NSQ19NQVNLCQlC
SVQoMCkKKyNkZWZpbmUgIFdMRUQ0X1NJTktfUkVHX1NUUl9NT0RfU1JDX0lOVAkJCTB4MDAKKyNk
ZWZpbmUgIFdMRUQ0X1NJTktfUkVHX1NUUl9NT0RfU1JDX0VYVAkJCTB4MDEKKworI2RlZmluZSBX
TEVENF9TSU5LX1JFR19TVFJfQ0FCQyhuKQkJCSgweDU2ICsgKG4gKiAweDEwKSkKKyNkZWZpbmUg
IFdMRUQ0X1NJTktfUkVHX1NUUl9DQUJDX01BU0sJCQlCSVQoNykKKworI2RlZmluZSBXTEVENF9T
SU5LX1JFR19CUklHSFQobikJCQkoMHg1NyArIChuICogMHgxMCkpCisKIHN0cnVjdCB3bGVkX3Zh
cl9jZmcgewogCWNvbnN0IHUzMiAqdmFsdWVzOwogCXUzMiAoKmZuKSh1MzIpOwpAQCAtOTAsNiAr
MTEyLDcgQEAgc3RydWN0IHdsZWQgewogCXN0cnVjdCBkZXZpY2UgKmRldjsKIAlzdHJ1Y3QgcmVn
bWFwICpyZWdtYXA7CiAJdTE2IGN0cmxfYWRkcjsKKwl1MTYgc2lua19hZGRyOwogCXUxNiBtYXhf
c3RyaW5nX2NvdW50OwogCXUzMiBicmlnaHRuZXNzOwogCXUzMiBtYXhfYnJpZ2h0bmVzczsKQEAg
LTExNiw2ICsxMzksMjkgQEAgc3RhdGljIGludCB3bGVkM19zZXRfYnJpZ2h0bmVzcyhzdHJ1Y3Qg
d2xlZCAqd2xlZCwgdTE2IGJyaWdodG5lc3MpCiAJcmV0dXJuIDA7CiB9CiAKK3N0YXRpYyBpbnQg
d2xlZDRfc2V0X2JyaWdodG5lc3Moc3RydWN0IHdsZWQgKndsZWQsIHUxNiBicmlnaHRuZXNzKQor
eworCWludCByYywgaTsKKwl1MTYgbG93X2xpbWl0ID0gd2xlZC0+bWF4X2JyaWdodG5lc3MgKiA0
IC8gMTAwMDsKKwl1OCB2WzJdOworCisJLyogV0xFRDQncyBsb3dlciBsaW1pdCBvZiBvcGVyYXRp
b24gaXMgMC40JSAqLworCWlmIChicmlnaHRuZXNzID4gMCAmJiBicmlnaHRuZXNzIDwgbG93X2xp
bWl0KQorCQlicmlnaHRuZXNzID0gbG93X2xpbWl0OworCisJdlswXSA9IGJyaWdodG5lc3MgJiAw
eGZmOworCXZbMV0gPSAoYnJpZ2h0bmVzcyA+PiA4KSAmIDB4ZjsKKworCWZvciAoaSA9IDA7ICBp
IDwgd2xlZC0+Y2ZnLm51bV9zdHJpbmdzOyArK2kpIHsKKwkJcmMgPSByZWdtYXBfYnVsa193cml0
ZSh3bGVkLT5yZWdtYXAsIHdsZWQtPnNpbmtfYWRkciArCisJCQkJICAgICAgIFdMRUQ0X1NJTktf
UkVHX0JSSUdIVChpKSwgdiwgMik7CisJCWlmIChyYyA8IDApCisJCQlyZXR1cm4gcmM7CisJfQor
CisJcmV0dXJuIDA7Cit9CisKIHN0YXRpYyBpbnQgd2xlZF9tb2R1bGVfZW5hYmxlKHN0cnVjdCB3
bGVkICp3bGVkLCBpbnQgdmFsKQogewogCWludCByYzsKQEAgLTEzMywxMyArMTc5LDEzIEBAIHN0
YXRpYyBpbnQgd2xlZF9zeW5jX3RvZ2dsZShzdHJ1Y3Qgd2xlZCAqd2xlZCkKIAl1bnNpZ25lZCBp
bnQgbWFzayA9IEdFTk1BU0sod2xlZC0+bWF4X3N0cmluZ19jb3VudCAtIDEsIDApOwogCiAJcmMg
PSByZWdtYXBfdXBkYXRlX2JpdHMod2xlZC0+cmVnbWFwLAotCQkJCXdsZWQtPmN0cmxfYWRkciAr
IFdMRURfU0lOS19SRUdfU1lOQywKKwkJCQl3bGVkLT5zaW5rX2FkZHIgKyBXTEVEX1NJTktfUkVH
X1NZTkMsCiAJCQkJbWFzaywgbWFzayk7CiAJaWYgKHJjIDwgMCkKIAkJcmV0dXJuIHJjOwogCiAJ
cmMgPSByZWdtYXBfdXBkYXRlX2JpdHMod2xlZC0+cmVnbWFwLAotCQkJCXdsZWQtPmN0cmxfYWRk
ciArIFdMRURfU0lOS19SRUdfU1lOQywKKwkJCQl3bGVkLT5zaW5rX2FkZHIgKyBXTEVEX1NJTktf
UkVHX1NZTkMsCiAJCQkJbWFzaywgV0xFRF9TSU5LX1JFR19TWU5DX0NMRUFSKTsKIAogCXJldHVy
biByYzsKQEAgLTI2Nyw2ICszMTMsMTIwIEBAIHN0YXRpYyBpbnQgd2xlZDNfc2V0dXAoc3RydWN0
IHdsZWQgKndsZWQpCiAJLmVuYWJsZWRfc3RyaW5ncyA9IHswLCAxLCAyLCAzfSwKIH07CiAKK3N0
YXRpYyBpbnQgd2xlZDRfc2V0dXAoc3RydWN0IHdsZWQgKndsZWQpCit7CisJaW50IHJjLCB0ZW1w
LCBpLCBqOworCXUxNiBhZGRyOworCXU4IHNpbmtfZW4gPSAwOworCXUzMiBzaW5rX2NmZyA9IDA7
CisKKwlyYyA9IHJlZ21hcF91cGRhdGVfYml0cyh3bGVkLT5yZWdtYXAsCisJCQkJd2xlZC0+Y3Ry
bF9hZGRyICsgV0xFRF9DVFJMX1JFR19PVlAsCisJCQkJV0xFRF9DVFJMX1JFR19PVlBfTUFTSywg
d2xlZC0+Y2ZnLm92cCk7CisJaWYgKHJjIDwgMCkKKwkJcmV0dXJuIHJjOworCisJcmMgPSByZWdt
YXBfdXBkYXRlX2JpdHMod2xlZC0+cmVnbWFwLAorCQkJCXdsZWQtPmN0cmxfYWRkciArIFdMRURf
Q1RSTF9SRUdfSUxJTUlULAorCQkJCVdMRURfQ1RSTF9SRUdfSUxJTUlUX01BU0ssCisJCQkJd2xl
ZC0+Y2ZnLmJvb3N0X2lfbGltaXQpOworCWlmIChyYyA8IDApCisJCXJldHVybiByYzsKKworCXJj
ID0gcmVnbWFwX3VwZGF0ZV9iaXRzKHdsZWQtPnJlZ21hcCwKKwkJCQl3bGVkLT5jdHJsX2FkZHIg
KyBXTEVEX0NUUkxfUkVHX0ZSRVEsCisJCQkJV0xFRF9DVFJMX1JFR19GUkVRX01BU0ssCisJCQkJ
d2xlZC0+Y2ZnLnN3aXRjaF9mcmVxKTsKKwlpZiAocmMgPCAwKQorCQlyZXR1cm4gcmM7CisKKwly
YyA9IHJlZ21hcF9yZWFkKHdsZWQtPnJlZ21hcCwgd2xlZC0+c2lua19hZGRyICsKKwkJCSBXTEVE
NF9TSU5LX1JFR19DVVJSX1NJTkssICZzaW5rX2NmZyk7CisJaWYgKHJjIDwgMCkKKwkJcmV0dXJu
IHJjOworCisJZm9yIChpID0gMDsgaSA8IHdsZWQtPmNmZy5udW1fc3RyaW5nczsgaSsrKSB7CisJ
CWogPSB3bGVkLT5jZmcuZW5hYmxlZF9zdHJpbmdzW2ldOworCQl0ZW1wID0gaiArIFdMRUQ0X1NJ
TktfUkVHX0NVUlJfU0lOS19TSEZUOworCQlzaW5rX2VuIHw9IDEgPDwgdGVtcDsKKwl9CisKKwlp
ZiAoc2lua19jZmcgPT0gc2lua19lbikKKwkJcmV0dXJuIDA7CisKKwlyYyA9IHJlZ21hcF91cGRh
dGVfYml0cyh3bGVkLT5yZWdtYXAsCisJCQkJd2xlZC0+c2lua19hZGRyICsgV0xFRDRfU0lOS19S
RUdfQ1VSUl9TSU5LLAorCQkJCVdMRUQ0X1NJTktfUkVHX0NVUlJfU0lOS19NQVNLLCAwKTsKKwlp
ZiAocmMgPCAwKQorCQlyZXR1cm4gcmM7CisKKwlyYyA9IHJlZ21hcF91cGRhdGVfYml0cyh3bGVk
LT5yZWdtYXAsIHdsZWQtPmN0cmxfYWRkciArCisJCQkJV0xFRF9DVFJMX1JFR19NT0RfRU4sCisJ
CQkJV0xFRF9DVFJMX1JFR19NT0RfRU5fTUFTSywgMCk7CisJaWYgKHJjIDwgMCkKKwkJcmV0dXJu
IHJjOworCisJLyogUGVyIHNpbmsvc3RyaW5nIGNvbmZpZ3VyYXRpb24gKi8KKwlmb3IgKGkgPSAw
OyBpIDwgd2xlZC0+Y2ZnLm51bV9zdHJpbmdzOyBpKyspIHsKKwkJaiA9IHdsZWQtPmNmZy5lbmFi
bGVkX3N0cmluZ3NbaV07CisKKwkJYWRkciA9IHdsZWQtPnNpbmtfYWRkciArCisJCQkJV0xFRDRf
U0lOS19SRUdfU1RSX01PRF9FTihqKTsKKwkJcmMgPSByZWdtYXBfdXBkYXRlX2JpdHMod2xlZC0+
cmVnbWFwLCBhZGRyLAorCQkJCQlXTEVENF9TSU5LX1JFR19TVFJfTU9EX01BU0ssCisJCQkJCVdM
RUQ0X1NJTktfUkVHX1NUUl9NT0RfTUFTSyk7CisJCWlmIChyYyA8IDApCisJCQlyZXR1cm4gcmM7
CisKKwkJYWRkciA9IHdsZWQtPnNpbmtfYWRkciArCisJCQkJV0xFRDRfU0lOS19SRUdfU1RSX0ZV
TExfU0NBTEVfQ1VSUihqKTsKKwkJcmMgPSByZWdtYXBfdXBkYXRlX2JpdHMod2xlZC0+cmVnbWFw
LCBhZGRyLAorCQkJCQlXTEVENF9TSU5LX1JFR19TVFJfRlVMTF9TQ0FMRV9DVVJSX01BU0ssCisJ
CQkJCXdsZWQtPmNmZy5zdHJpbmdfaV9saW1pdCk7CisJCWlmIChyYyA8IDApCisJCQlyZXR1cm4g
cmM7CisKKwkJYWRkciA9IHdsZWQtPnNpbmtfYWRkciArCisJCQkJV0xFRDRfU0lOS19SRUdfU1RS
X0NBQkMoaik7CisJCXJjID0gcmVnbWFwX3VwZGF0ZV9iaXRzKHdsZWQtPnJlZ21hcCwgYWRkciwK
KwkJCQkJV0xFRDRfU0lOS19SRUdfU1RSX0NBQkNfTUFTSywKKwkJCQkJd2xlZC0+Y2ZnLmNhYmMg
PworCQkJCQlXTEVENF9TSU5LX1JFR19TVFJfQ0FCQ19NQVNLIDogMCk7CisJCWlmIChyYyA8IDAp
CisJCQlyZXR1cm4gcmM7CisJfQorCisJcmMgPSByZWdtYXBfdXBkYXRlX2JpdHMod2xlZC0+cmVn
bWFwLCB3bGVkLT5jdHJsX2FkZHIgKworCQkJCVdMRURfQ1RSTF9SRUdfTU9EX0VOLAorCQkJCVdM
RURfQ1RSTF9SRUdfTU9EX0VOX01BU0ssCisJCQkJV0xFRF9DVFJMX1JFR19NT0RfRU5fTUFTSyk7
CisJaWYgKHJjIDwgMCkKKwkJcmV0dXJuIHJjOworCisJcmMgPSByZWdtYXBfdXBkYXRlX2JpdHMo
d2xlZC0+cmVnbWFwLAorCQkJCXdsZWQtPnNpbmtfYWRkciArIFdMRUQ0X1NJTktfUkVHX0NVUlJf
U0lOSywKKwkJCQlXTEVENF9TSU5LX1JFR19DVVJSX1NJTktfTUFTSywgc2lua19lbik7CisJaWYg
KHJjIDwgMCkKKwkJcmV0dXJuIHJjOworCisJcmMgPSB3bGVkX3N5bmNfdG9nZ2xlKHdsZWQpOwor
CWlmIChyYyA8IDApIHsKKwkJZGV2X2Vycih3bGVkLT5kZXYsICJGYWlsZWQgdG8gdG9nZ2xlIHN5
bmMgcmVnIHJjOiVkXG4iLCByYyk7CisJCXJldHVybiByYzsKKwl9CisKKwlyZXR1cm4gMDsKK30K
Kworc3RhdGljIGNvbnN0IHN0cnVjdCB3bGVkX2NvbmZpZyB3bGVkNF9jb25maWdfZGVmYXVsdHMg
PSB7CisJLmJvb3N0X2lfbGltaXQgPSA0LAorCS5zdHJpbmdfaV9saW1pdCA9IDEwLAorCS5vdnAg
PSAxLAorCS5udW1fc3RyaW5ncyA9IDQsCisJLnN3aXRjaF9mcmVxID0gMTEsCisJLmNhYmMgPSBm
YWxzZSwKK307CisKIHN0YXRpYyBjb25zdCB1MzIgd2xlZDNfYm9vc3RfaV9saW1pdF92YWx1ZXNb
XSA9IHsKIAkxMDUsIDM4NSwgNTI1LCA4MDUsIDk4MCwgMTI2MCwgMTQwMCwgMTY4MCwKIH07CkBA
IC0yNzYsNiArNDM2LDE1IEBAIHN0YXRpYyBpbnQgd2xlZDNfc2V0dXAoc3RydWN0IHdsZWQgKnds
ZWQpCiAJLnNpemUgPSBBUlJBWV9TSVpFKHdsZWQzX2Jvb3N0X2lfbGltaXRfdmFsdWVzKSwKIH07
CiAKK3N0YXRpYyBjb25zdCB1MzIgd2xlZDRfYm9vc3RfaV9saW1pdF92YWx1ZXNbXSA9IHsKKwkx
MDUsIDI4MCwgNDUwLCA2MjAsIDk3MCwgMTE1MCwgMTMwMCwgMTUwMCwKK307CisKK3N0YXRpYyBj
b25zdCBzdHJ1Y3Qgd2xlZF92YXJfY2ZnIHdsZWQ0X2Jvb3N0X2lfbGltaXRfY2ZnID0geworCS52
YWx1ZXMgPSB3bGVkNF9ib29zdF9pX2xpbWl0X3ZhbHVlcywKKwkuc2l6ZSA9IEFSUkFZX1NJWkUo
d2xlZDRfYm9vc3RfaV9saW1pdF92YWx1ZXMpLAorfTsKKwogc3RhdGljIGNvbnN0IHUzMiB3bGVk
M19vdnBfdmFsdWVzW10gPSB7CiAJMzUsIDMyLCAyOSwgMjcsCiB9OwpAQCAtMjg1LDYgKzQ1NCwx
NSBAQCBzdGF0aWMgaW50IHdsZWQzX3NldHVwKHN0cnVjdCB3bGVkICp3bGVkKQogCS5zaXplID0g
QVJSQVlfU0laRSh3bGVkM19vdnBfdmFsdWVzKSwKIH07CiAKK3N0YXRpYyBjb25zdCB1MzIgd2xl
ZDRfb3ZwX3ZhbHVlc1tdID0geworCTMxMTAwLCAyOTYwMCwgMTk2MDAsIDE4MTAwLAorfTsKKwor
c3RhdGljIGNvbnN0IHN0cnVjdCB3bGVkX3Zhcl9jZmcgd2xlZDRfb3ZwX2NmZyA9IHsKKwkudmFs
dWVzID0gd2xlZDRfb3ZwX3ZhbHVlcywKKwkuc2l6ZSA9IEFSUkFZX1NJWkUod2xlZDRfb3ZwX3Zh
bHVlcyksCit9OworCiBzdGF0aWMgdTMyIHdsZWQzX251bV9zdHJpbmdzX3ZhbHVlc19mbih1MzIg
aWR4KQogewogCXJldHVybiBpZHggKyAxOwpAQCAtMjk1LDYgKzQ3MywxMSBAQCBzdGF0aWMgdTMy
IHdsZWQzX251bV9zdHJpbmdzX3ZhbHVlc19mbih1MzIgaWR4KQogCS5zaXplID0gMywKIH07CiAK
K3N0YXRpYyBjb25zdCBzdHJ1Y3Qgd2xlZF92YXJfY2ZnIHdsZWQ0X251bV9zdHJpbmdzX2NmZyA9
IHsKKwkuZm4gPSB3bGVkM19udW1fc3RyaW5nc192YWx1ZXNfZm4sCisJLnNpemUgPSA0LAorfTsK
Kwogc3RhdGljIHUzMiB3bGVkM19zd2l0Y2hfZnJlcV92YWx1ZXNfZm4odTMyIGlkeCkKIHsKIAly
ZXR1cm4gMTkyMDAgLyAoMiAqICgxICsgaWR4KSk7CkBAIC0zMDksMTAgKzQ5MiwyNCBAQCBzdGF0
aWMgdTMyIHdsZWQzX3N3aXRjaF9mcmVxX3ZhbHVlc19mbih1MzIgaWR4KQogCS5zaXplID0gMjYs
CiB9OwogCitzdGF0aWMgY29uc3QgdTMyIHdsZWQ0X3N0cmluZ19pX2xpbWl0X3ZhbHVlc1tdID0g
eworCTAsIDI1MDAsIDUwMDAsIDc1MDAsIDEwMDAwLCAxMjUwMCwgMTUwMDAsIDE3NTAwLCAyMDAw
MCwKKwkyMjUwMCwgMjUwMDAsIDI3NTAwLCAzMDAwMCwKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1
Y3Qgd2xlZF92YXJfY2ZnIHdsZWQ0X3N0cmluZ19pX2xpbWl0X2NmZyA9IHsKKwkudmFsdWVzID0g
d2xlZDRfc3RyaW5nX2lfbGltaXRfdmFsdWVzLAorCS5zaXplID0gQVJSQVlfU0laRSh3bGVkNF9z
dHJpbmdfaV9saW1pdF92YWx1ZXMpLAorfTsKKwogc3RhdGljIGNvbnN0IHN0cnVjdCB3bGVkX3Zh
cl9jZmcgd2xlZDNfc3RyaW5nX2NmZyA9IHsKIAkuc2l6ZSA9IDgsCiB9OwogCitzdGF0aWMgY29u
c3Qgc3RydWN0IHdsZWRfdmFyX2NmZyB3bGVkNF9zdHJpbmdfY2ZnID0geworCS5zaXplID0gMTYs
Cit9OworCiBzdGF0aWMgdTMyIHdsZWRfdmFsdWVzKGNvbnN0IHN0cnVjdCB3bGVkX3Zhcl9jZmcg
KmNmZywgdTMyIGlkeCkKIHsKIAlpZiAoaWR4ID49IGNmZy0+c2l6ZSkKQEAgLTM2MSw2ICs1NTgs
MzQgQEAgc3RhdGljIGludCB3bGVkX2NvbmZpZ3VyZShzdHJ1Y3Qgd2xlZCAqd2xlZCwgaW50IHZl
cnNpb24pCiAJCX0sCiAJfTsKIAorCWNvbnN0IHN0cnVjdCB3bGVkX3UzMl9vcHRzIHdsZWQ0X29w
dHNbXSA9IHsKKwkJeworCQkJLm5hbWUgPSAicWNvbSxjdXJyZW50LWJvb3N0LWxpbWl0IiwKKwkJ
CS52YWxfcHRyID0gJmNmZy0+Ym9vc3RfaV9saW1pdCwKKwkJCS5jZmcgPSAmd2xlZDRfYm9vc3Rf
aV9saW1pdF9jZmcsCisJCX0sCisJCXsKKwkJCS5uYW1lID0gInFjb20sY3VycmVudC1saW1pdC1t
aWNyb2FtcCIsCisJCQkudmFsX3B0ciA9ICZjZmctPnN0cmluZ19pX2xpbWl0LAorCQkJLmNmZyA9
ICZ3bGVkNF9zdHJpbmdfaV9saW1pdF9jZmcsCisJCX0sCisJCXsKKwkJCS5uYW1lID0gInFjb20s
b3ZwLW1pbGxpdm9sdCIsCisJCQkudmFsX3B0ciA9ICZjZmctPm92cCwKKwkJCS5jZmcgPSAmd2xl
ZDRfb3ZwX2NmZywKKwkJfSwKKwkJeworCQkJLm5hbWUgPSAicWNvbSxzd2l0Y2hpbmctZnJlcSIs
CisJCQkudmFsX3B0ciA9ICZjZmctPnN3aXRjaF9mcmVxLAorCQkJLmNmZyA9ICZ3bGVkM19zd2l0
Y2hfZnJlcV9jZmcsCisJCX0sCisJCXsKKwkJCS5uYW1lID0gInFjb20sbnVtLXN0cmluZ3MiLAor
CQkJLnZhbF9wdHIgPSAmY2ZnLT5udW1fc3RyaW5ncywKKwkJCS5jZmcgPSAmd2xlZDRfbnVtX3N0
cmluZ3NfY2ZnLAorCQl9LAorCX07CisKIAljb25zdCBzdHJ1Y3Qgd2xlZF9ib29sX29wdHMgYm9v
bF9vcHRzW10gPSB7CiAJCXsgInFjb20sY3Mtb3V0IiwgJmNmZy0+Y3Nfb3V0X2VuLCB9LAogCQl7
ICJxY29tLGV4dC1nZW4iLCAmY2ZnLT5leHRfZ2VuLCB9LApAQCAtMzc0LDEwICs1OTksNiBAQCBz
dGF0aWMgaW50IHdsZWRfY29uZmlndXJlKHN0cnVjdCB3bGVkICp3bGVkLCBpbnQgdmVyc2lvbikK
IAl9CiAJd2xlZC0+Y3RybF9hZGRyID0gYmUzMl90b19jcHUoKnByb3BfYWRkcik7CiAKLQlyYyA9
IG9mX3Byb3BlcnR5X3JlYWRfc3RyaW5nKGRldi0+b2Zfbm9kZSwgImxhYmVsIiwgJndsZWQtPm5h
bWUpOwotCWlmIChyYykKLQkJd2xlZC0+bmFtZSA9IGRldm1fa2FzcHJpbnRmKGRldiwgR0ZQX0tF
Uk5FTCwgIiVwT0ZuIiwgZGV2LT5vZl9ub2RlKTsKLQogCXN3aXRjaCAodmVyc2lvbikgewogCWNh
c2UgMzoKIAkJdTMyX29wdHMgPSB3bGVkM19vcHRzOwpAQCAtMzg1LDYgKzYwNiwyMiBAQCBzdGF0
aWMgaW50IHdsZWRfY29uZmlndXJlKHN0cnVjdCB3bGVkICp3bGVkLCBpbnQgdmVyc2lvbikKIAkJ
KmNmZyA9IHdsZWQzX2NvbmZpZ19kZWZhdWx0czsKIAkJd2xlZC0+d2xlZF9zZXRfYnJpZ2h0bmVz
cyA9IHdsZWQzX3NldF9icmlnaHRuZXNzOwogCQl3bGVkLT5tYXhfc3RyaW5nX2NvdW50ID0gMzsK
KwkJd2xlZC0+c2lua19hZGRyID0gd2xlZC0+Y3RybF9hZGRyOworCQlicmVhazsKKworCWNhc2Ug
NDoKKwkJdTMyX29wdHMgPSB3bGVkNF9vcHRzOworCQlzaXplID0gQVJSQVlfU0laRSh3bGVkNF9v
cHRzKTsKKwkJKmNmZyA9IHdsZWQ0X2NvbmZpZ19kZWZhdWx0czsKKwkJd2xlZC0+d2xlZF9zZXRf
YnJpZ2h0bmVzcyA9IHdsZWQ0X3NldF9icmlnaHRuZXNzOworCQl3bGVkLT5tYXhfc3RyaW5nX2Nv
dW50ID0gNDsKKworCQlwcm9wX2FkZHIgPSBvZl9nZXRfYWRkcmVzcyhkZXYtPm9mX25vZGUsIDEs
IE5VTEwsIE5VTEwpOworCQlpZiAoIXByb3BfYWRkcikgeworCQkJZGV2X2Vycih3bGVkLT5kZXYs
ICJpbnZhbGlkIElPIHJlc291cmNlc1xuIik7CisJCQlyZXR1cm4gLUVJTlZBTDsKKwkJfQorCQl3
bGVkLT5zaW5rX2FkZHIgPSBiZTMyX3RvX2NwdSgqcHJvcF9hZGRyKTsKIAkJYnJlYWs7CiAKIAlk
ZWZhdWx0OgpAQCAtMzkyLDYgKzYyOSwxMCBAQCBzdGF0aWMgaW50IHdsZWRfY29uZmlndXJlKHN0
cnVjdCB3bGVkICp3bGVkLCBpbnQgdmVyc2lvbikKIAkJYnJlYWs7CiAJfQogCisJcmMgPSBvZl9w
cm9wZXJ0eV9yZWFkX3N0cmluZyhkZXYtPm9mX25vZGUsICJsYWJlbCIsICZ3bGVkLT5uYW1lKTsK
KwlpZiAocmMpCisJCXdsZWQtPm5hbWUgPSBkZXYtPm9mX25vZGUtPm5hbWU7CisKIAlmb3IgKGkg
PSAwOyBpIDwgc2l6ZTsgKytpKSB7CiAJCXJjID0gb2ZfcHJvcGVydHlfcmVhZF91MzIoZGV2LT5v
Zl9ub2RlLCB1MzJfb3B0c1tpXS5uYW1lLCAmdmFsKTsKIAkJaWYgKHJjID09IC1FSU5WQUwpIHsK
QEAgLTQ4Myw2ICs3MjQsMTQgQEAgc3RhdGljIGludCB3bGVkX3Byb2JlKHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYpCiAJCX0KIAkJYnJlYWs7CiAKKwljYXNlIDQ6CisJCXJjID0gd2xlZDRf
c2V0dXAod2xlZCk7CisJCWlmIChyYykgeworCQkJZGV2X2VycigmcGRldi0+ZGV2LCAid2xlZDRf
c2V0dXAgZmFpbGVkXG4iKTsKKwkJCXJldHVybiByYzsKKwkJfQorCQlicmVhazsKKwogCWRlZmF1
bHQ6CiAJCWRldl9lcnIod2xlZC0+ZGV2LCAiSW52YWxpZCBXTEVEIHZlcnNpb25cbiIpOwogCQli
cmVhazsKQEAgLTUwMyw2ICs3NTIsOCBAQCBzdGF0aWMgaW50IHdsZWRfcHJvYmUoc3RydWN0IHBs
YXRmb3JtX2RldmljZSAqcGRldikKIAogc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQg
d2xlZF9tYXRjaF90YWJsZVtdID0gewogCXsgLmNvbXBhdGlibGUgPSAicWNvbSxwbTg5NDEtd2xl
ZCIsIC5kYXRhID0gKHZvaWQgKikzIH0sCisJeyAuY29tcGF0aWJsZSA9ICJxY29tLHBtaTg5OTgt
d2xlZCIsIC5kYXRhID0gKHZvaWQgKik0IH0sCisJeyAuY29tcGF0aWJsZSA9ICJxY29tLHBtNjYw
bC13bGVkIiwgLmRhdGEgPSAodm9pZCAqKTQgfSwKIAl7fQogfTsKIE1PRFVMRV9ERVZJQ0VfVEFC
TEUob2YsIHdsZWRfbWF0Y2hfdGFibGUpOwotLSAKVGhlIFF1YWxjb21tIElubm92YXRpb24gQ2Vu
dGVyLCBJbmMuIGlzIGEgbWVtYmVyIG9mIHRoZSBDb2RlIEF1cm9yYSBGb3J1bSwKIGEgTGludXgg
Rm91bmRhdGlvbiBDb2xsYWJvcmF0aXZlIFByb2plY3QKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
