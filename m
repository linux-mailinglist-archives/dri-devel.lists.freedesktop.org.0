Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 694BA287173
	for <lists+dri-devel@lfdr.de>; Thu,  8 Oct 2020 11:29:34 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 974456E0FF;
	Thu,  8 Oct 2020 09:29:30 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-oo1-xc43.google.com (mail-oo1-xc43.google.com
 [IPv6:2607:f8b0:4864:20::c43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B72786E0FF
 for <dri-devel@lists.freedesktop.org>; Thu,  8 Oct 2020 09:29:29 +0000 (UTC)
Received: by mail-oo1-xc43.google.com with SMTP id l18so1309430ooa.9
 for <dri-devel@lists.freedesktop.org>; Thu, 08 Oct 2020 02:29:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=AZtrktLaTa1q52GDC60nZwLAsgFOHVK1n21yznBhVEs=;
 b=XSud/uQRtgvqIb3IDA77ZF0DC24MDDdeNhk03TNRcSjpyNjtyKEESQu1OButw+1j3u
 YxkVjIC3CogywNkjkDaDO8zVvcRzloXlvNuFG6mWbqSgT1gjE5WU5tSkB1x4+d6XUTaL
 sQ+TZHsHUTR/F0302Q5kfVN/Rw27sbqeGGFP0=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=AZtrktLaTa1q52GDC60nZwLAsgFOHVK1n21yznBhVEs=;
 b=FkT7tMnjbZQgGa3vx+yWwre+4F5iIB8UU9A9GKw4CJJ0wp4i9q3oi5VFbHVVchp5NZ
 PBasNG04JvD/8eAniA6Lp5chi3ufe1dAGixWIeaeE8Fs/8mrJ4wD7mQ8rOEDnP1VNCkx
 u39FrHoRdDC+/FjGtFSgsmErhY2BP9YzlhoKqXvw992BNJ31qEM2uewMgK2Sr5eACacY
 krzhzmo5+nWbIFrYCUWjZr5XOhMZeLumaDlOvKsZRGVF1ekJtLsG4YDNjfaQOuQ68v1K
 jiJJtt96ZB/QDGa8sOilvJ85VKihWqXWYKn5LlS759WP4TXN5WYqM99WC3iElyBgtzeu
 TODQ==
X-Gm-Message-State: AOAM531bAQ1ocofQz4eHOBZJhvm9kqinfi3sLH1Hi1aTqxv3xAD7r3mG
 vvyS5X6yrgfJiXjYQrFAxczVL+SlgurAIsiExOnHKw==
X-Google-Smtp-Source: ABdhPJwtau5D0RqHwUtJyullad7BBq5a+Ft1kEgRRLm1pZsMZIrvJ9INwFIEmhfWZc0Q81FibbXqTHtWb0VLRv1cgUs=
X-Received: by 2002:a4a:e1d7:: with SMTP id n23mr4828251oot.85.1602149369091; 
 Thu, 08 Oct 2020 02:29:29 -0700 (PDT)
MIME-Version: 1.0
References: <20201007133036.1541639-1-daniel.vetter@ffwll.ch>
 <fedcb884-fdb0-8f32-34ce-e0a2d3238413@suse.de>
In-Reply-To: <fedcb884-fdb0-8f32-34ce-e0a2d3238413@suse.de>
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Thu, 8 Oct 2020 11:29:18 +0200
Message-ID: <CAKMK7uGFqNiHU5tSC_db4dBNRybY1Wc-b-OYQXReK7efn-AN4g@mail.gmail.com>
Subject: Re: [PATCH] drm/fb-helper: Add locking to sysrq handling
To: Thomas Zimmermann <tzimmermann@suse.de>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 Daniel Vetter <daniel.vetter@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBPY3QgOCwgMjAyMCBhdCAxMToyMiBBTSBUaG9tYXMgWmltbWVybWFubiA8dHppbW1l
cm1hbm5Ac3VzZS5kZT4gd3JvdGU6Cj4KPiBIaQo+Cj4gQW0gMDcuMTAuMjAgdW0gMTU6MzAgc2No
cmllYiBEYW5pZWwgVmV0dGVyOgo+ID4gV2UgZGlkbid0IHRha2UgdGhlIGtlcm5lbF9mYl9oZWxw
ZXJfbG9jayBtdXRleCwgd2hpY2ggcHJvdGVjdHMgdGhhdAo+ID4gY29kZS4gV2hpbGUgYXQgaXQs
IHNpbXBsaWZ5IHRoZSBjb2RlCj4gPiAtIGlubGluZSB0aGUgZnVuY3Rpb24gKG9yaWdpbmFsbHkg
c2hhcmVkIHdpdGgga2dkYiBJIHRoaW5rKQo+ID4gLSBkcm9wIHRoZSBlcnJvciB0cmFja2luZyBh
bmQgYWxsIHRoZSBjb21wbGljYXRpb25zCj4gPiAtIGRyb3AgdGhlIHBvaW50bGVzcyBlYXJseSBv
dXQsIGl0IHNlcnZlZCBub3RoaW5nCj4gPgo+ID4gU2lnbmVkLW9mZi1ieTogRGFuaWVsIFZldHRl
ciA8ZGFuaWVsLnZldHRlckBpbnRlbC5jb20+Cj4gPiBDYzogTWFhcnRlbiBMYW5raG9yc3QgPG1h
YXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KPiA+IENjOiBNYXhpbWUgUmlwYXJkIDxt
cmlwYXJkQGtlcm5lbC5vcmc+Cj4gPiBDYzogVGhvbWFzIFppbW1lcm1hbm4gPHR6aW1tZXJtYW5u
QHN1c2UuZGU+Cj4gPiBDYzogRGF2aWQgQWlybGllIDxhaXJsaWVkQGxpbnV4LmllPgo+ID4gQ2M6
IERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZndsbC5jaD4KPiA+IC0tLQo+ID4gIGRyaXZlcnMvZ3B1
L2RybS9kcm1fZmJfaGVscGVyLmMgfCAyNiArKysrKy0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4g
IDEgZmlsZSBjaGFuZ2VkLCA1IGluc2VydGlvbnMoKyksIDIxIGRlbGV0aW9ucygtKQo+ID4KPiA+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2ZiX2hlbHBlci5jIGIvZHJpdmVycy9n
cHUvZHJtL2RybV9mYl9oZWxwZXIuYwo+ID4gaW5kZXggODY5NzU1NGNjZDQxLi5jMmY3MmJiNmFm
YjEgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2ZiX2hlbHBlci5jCj4gPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2ZiX2hlbHBlci5jCj4gPiBAQCAtMjgxLDE4ICsyODEs
MTIgQEAgaW50IGRybV9mYl9oZWxwZXJfcmVzdG9yZV9mYmRldl9tb2RlX3VubG9ja2VkKHN0cnVj
dCBkcm1fZmJfaGVscGVyICpmYl9oZWxwZXIpCj4gPiAgRVhQT1JUX1NZTUJPTChkcm1fZmJfaGVs
cGVyX3Jlc3RvcmVfZmJkZXZfbW9kZV91bmxvY2tlZCk7Cj4gPgo+ID4gICNpZmRlZiBDT05GSUdf
TUFHSUNfU1lTUlEKPiA+IC0vKgo+ID4gLSAqIHJlc3RvcmUgZmJjb24gZGlzcGxheSBmb3IgYWxs
IGttcyBkcml2ZXIncyB1c2luZyB0aGlzIGhlbHBlciwgdXNlZCBmb3Igc3lzcnEKPiA+IC0gKiBh
bmQgcGFuaWMgaGFuZGxpbmcuCj4gPiAtICovCj4gPiAtc3RhdGljIGJvb2wgZHJtX2ZiX2hlbHBl
cl9mb3JjZV9rZXJuZWxfbW9kZSh2b2lkKQo+ID4gKy8qIGVtZXJnZW5jeSByZXN0b3JlLCBkb24n
dCBib3RoZXIgd2l0aCBlcnJvciByZXBvcnRpbmcgKi8KPiA+ICtzdGF0aWMgdm9pZCBkcm1fZmJf
aGVscGVyX3Jlc3RvcmVfd29ya19mbihzdHJ1Y3Qgd29ya19zdHJ1Y3QgKmlnbm9yZWQpCj4gPiAg
ewo+ID4gLSAgICAgYm9vbCByZXQsIGVycm9yID0gZmFsc2U7Cj4gPiAgICAgICBzdHJ1Y3QgZHJt
X2ZiX2hlbHBlciAqaGVscGVyOwo+ID4KPiA+IC0gICAgIGlmIChsaXN0X2VtcHR5KCZrZXJuZWxf
ZmJfaGVscGVyX2xpc3QpKQo+ID4gLSAgICAgICAgICAgICByZXR1cm4gZmFsc2U7Cj4gPiAtCj4g
PiArICAgICBtdXRleF9sb2NrKCZrZXJuZWxfZmJfaGVscGVyX2xvY2spOwo+ID4gICAgICAgbGlz
dF9mb3JfZWFjaF9lbnRyeShoZWxwZXIsICZrZXJuZWxfZmJfaGVscGVyX2xpc3QsIGtlcm5lbF9m
Yl9saXN0KSB7Cj4gPiAgICAgICAgICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBoZWxw
ZXItPmRldjsKPiA+Cj4gPiBAQCAtMzAwLDIyICsyOTQsMTIgQEAgc3RhdGljIGJvb2wgZHJtX2Zi
X2hlbHBlcl9mb3JjZV9rZXJuZWxfbW9kZSh2b2lkKQo+ID4gICAgICAgICAgICAgICAgICAgICAg
IGNvbnRpbnVlOwo+ID4KPiA+ICAgICAgICAgICAgICAgbXV0ZXhfbG9jaygmaGVscGVyLT5sb2Nr
KTsKPiA+IC0gICAgICAgICAgICAgcmV0ID0gZHJtX2NsaWVudF9tb2Rlc2V0X2NvbW1pdF9sb2Nr
ZWQoJmhlbHBlci0+Y2xpZW50KTsKPiA+IC0gICAgICAgICAgICAgaWYgKHJldCkKPiA+IC0gICAg
ICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7Cj4gPiArICAgICAgICAgICAgIGRybV9jbGll
bnRfbW9kZXNldF9jb21taXRfbG9ja2VkKCZoZWxwZXItPmNsaWVudCk7Cj4gPiAgICAgICAgICAg
ICAgIG11dGV4X3VubG9jaygmaGVscGVyLT5sb2NrKTsKPiA+ICAgICAgIH0KPiA+IC0gICAgIHJl
dHVybiBlcnJvcjsKPiA+ICsgICAgIG11dGV4X3VubG9jaygma2VybmVsX2ZiX2hlbHBlcl9sb2Nr
KTsKPiA+ICB9Cj4gPgo+ID4gLXN0YXRpYyB2b2lkIGRybV9mYl9oZWxwZXJfcmVzdG9yZV93b3Jr
X2ZuKHN0cnVjdCB3b3JrX3N0cnVjdCAqaWdub3JlZCkKPiA+IC17Cj4gPiAtICAgICBib29sIHJl
dDsKPiA+IC0KPiA+IC0gICAgIHJldCA9IGRybV9mYl9oZWxwZXJfZm9yY2Vfa2VybmVsX21vZGUo
KTsKPiA+IC0gICAgIGlmIChyZXQgPT0gdHJ1ZSkKPiA+IC0gICAgICAgICAgICAgRFJNX0VSUk9S
KCJGYWlsZWQgdG8gcmVzdG9yZSBjcnRjIGNvbmZpZ3VyYXRpb25cbiIpOwo+Cj4gSXMgdGhlcmUg
YSBzcGVjaWZpYyByZWFzb24gZm9yIHJlbW92aW5nIHRoYXQgd2FybmluZz8gRXZlbiBpZiBpdCBk
b2Vzbid0Cj4gc2hvdyB1cCBvbiBzY3JlZW4sIGlzIGl0IG5vdCBoZWxwZnVsIGluIHRoZSBrZXJu
ZWwncyBsb2c/CgpJIGp1c3QgZm91bmQgaXQgcmVhbGx5IHVuaGVscGZ1bCwgaWYgeW91J3JlIHRy
eWluZyB0byBmb3JjZS1zaG93CmZiY29uLCB3aGF0J3MgdGhlIHBvaW50IGlmIGl0IGRvZXNuJ3Qg
d29yayBvdXQ/IFRoZSB1c2VyIHdpbGwgbm90aWNlLgpBbHNvLCBpZiB3ZSdyZSByZWFsbHkgaW4g
YSBkaXJlIHNpdHVhdGlvbiB3aGVyZSB5b3Ugd2FudCB0aGlzLCBpbiBteQpleHBlcmllbmNlIHRo
ZXJlJ3MgYSBidW5jaCBvZiByYW5kb20gb3RoZXIgcmVhc29ucyB3aHkgdGhpcyBjYW4gZmFpbCwK
bW9zdGx5IHdoZW4gdGhlIHdvcmsgd2UgaGF2ZSB0byBzY2hlZHVsZSBmb3IgbG9ja2luZyByZWFz
b25zIG5ldmVyCnJ1bnMuIFNvIGl0J3MgYWxzbyB1bnJlbGlhYmxlLgoKPiBJbiBhbnkgY2FzZSwg
dGhlIHJlc3QgbG9va3MgZ29vZC4KPgo+IEFja2VkLWJ5OiBUaG9tYXMgWmltbWVybWFubiA8dHpp
bW1lcm1hbm5Ac3VzZS5kZT4KClRoYW5rcyBmb3IgdGFraW5nIGEgbG9vaywgSSdsbCBhcHBseSBp
dC4KLURhbmllbAoKPgo+IEJlc3QgcmVnYXJkcwo+IFRob21hcwo+Cj4gPiAtfQo+ID4gIHN0YXRp
YyBERUNMQVJFX1dPUksoZHJtX2ZiX2hlbHBlcl9yZXN0b3JlX3dvcmssIGRybV9mYl9oZWxwZXJf
cmVzdG9yZV93b3JrX2ZuKTsKPiA+Cj4gPiAgc3RhdGljIHZvaWQgZHJtX2ZiX2hlbHBlcl9zeXNy
cShpbnQgZHVtbXkxKQo+ID4KPgo+IC0tCj4gVGhvbWFzIFppbW1lcm1hbm4KPiBHcmFwaGljcyBE
cml2ZXIgRGV2ZWxvcGVyCj4gU1VTRSBTb2Z0d2FyZSBTb2x1dGlvbnMgR2VybWFueSBHbWJICj4g
TWF4ZmVsZHN0ci4gNSwgOTA0MDkgTsO8cm5iZXJnLCBHZXJtYW55Cj4gKEhSQiAzNjgwOSwgQUcg
TsO8cm5iZXJnKQo+IEdlc2Now6RmdHNmw7xocmVyOiBGZWxpeCBJbWVuZMO2cmZmZXIKPgoKCi0t
IApEYW5pZWwgVmV0dGVyClNvZnR3YXJlIEVuZ2luZWVyLCBJbnRlbCBDb3Jwb3JhdGlvbgpodHRw
Oi8vYmxvZy5mZndsbC5jaApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmkt
ZGV2ZWwK
