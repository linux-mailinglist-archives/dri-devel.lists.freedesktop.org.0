Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A231BFBAC
	for <lists+dri-devel@lfdr.de>; Tue, 30 Apr 2019 16:40:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1CA5B891D6;
	Tue, 30 Apr 2019 14:40:22 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from honk.sigxcpu.org (honk.sigxcpu.org [24.134.29.49])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 74BE9891D5
 for <dri-devel@lists.freedesktop.org>; Tue, 30 Apr 2019 14:40:20 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by honk.sigxcpu.org (Postfix) with ESMTP id 297FCFB02;
 Tue, 30 Apr 2019 16:40:19 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at honk.sigxcpu.org
Received: from honk.sigxcpu.org ([127.0.0.1])
 by localhost (honk.sigxcpu.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 6tI_8gzmyAsj; Tue, 30 Apr 2019 16:40:14 +0200 (CEST)
Received: by bogon.sigxcpu.org (Postfix, from userid 1000)
 id 6DC47402B0; Tue, 30 Apr 2019 16:40:11 +0200 (CEST)
From: =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>
To: Kishon Vijay Abraham I <kishon@ti.com>, Rob Herring <robh+dt@kernel.org>,
 Mark Rutland <mark.rutland@arm.com>, Shawn Guo <shawnguo@kernel.org>,
 Sascha Hauer <s.hauer@pengutronix.de>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 Fabio Estevam <festevam@gmail.com>, NXP Linux Team <linux-imx@nxp.com>,
 Thierry Reding <treding@nvidia.com>,
 =?UTF-8?q?Andreas=20F=C3=A4rber?= <afaerber@suse.de>,
 Martin Blumenstingl <martin.blumenstingl@googlemail.com>,
 Heiko Stuebner <heiko@sntech.de>, Johan Hovold <johan@kernel.org>,
 Lucas Stach <l.stach@pengutronix.de>, Abel Vesa <abel.vesa@nxp.com>,
 Li Jun <jun.li@nxp.com>, linux-kernel@vger.kernel.org,
 devicetree@vger.kernel.org, linux-arm-kernel@lists.infradead.org,
 dri-devel@lists.freedesktop.org, Robert Chiras <robert.chiras@nxp.com>,
 Sam Ravnborg <sam@ravnborg.org>, Maxime Ripard <maxime.ripard@bootlin.com>
Subject: [PATCH v9 2/2] phy: Add driver for mixel mipi dphy found on NXP's
 i.MX8 SoCs
Date: Tue, 30 Apr 2019 16:40:11 +0200
Message-Id: <b999b07673e59c676d2e43a786b635beb056e9bf.1556633413.git.agx@sigxcpu.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1556633413.git.agx@sigxcpu.org>
References: <cover.1556633413.git.agx@sigxcpu.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBhZGRzIHN1cHBvcnQgZm9yIHRoZSBNaXhlbCBEUEhZIGFzIGZvdW5kIG9uIGkuTVg4IENQ
VXMgYnV0IHNpbmNlCnRoaXMgaXMgYW4gSVAgY29yZSBpdCB3aWxsIGxpa2VseSBiZSBmb3VuZCBv
biBvdGhlcnMgaW4gdGhlIGZ1dHVyZS4gU28KaW5zdGVhZCBvZiBhZGRpbmcgdGhpcyB0byB0aGUg
bndsIGhvc3QgZHJpdmVyIG1ha2UgaXQgYSBnZW5lcmljIFBIWQpkcml2ZXIuCgpUaGUgZHJpdmVy
IHN1cHBvcnRzIHRoZSBpLk1YOE1RLiBTdXBwb3J0IGZvciBpLk1YOFFNIGFuZCBpLk1YOFFYUCBj
YW4gYmUKYWRkZWQgb25jZSB0aGUgbmVjZXNzYXJ5IHN5c3RlbSBjb250cm9sbGVyIGJpdHMgYXJl
IGluIHZpYQptaXhlbF9kcGh5X2RldmRhdGEuCgpDby1hdXRob3JlZC1ieTogUm9iZXJ0IENoaXJh
cyA8cm9iZXJ0LmNoaXJhc0BueHAuY29tPgpTaWduZWQtb2ZmLWJ5OiBHdWlkbyBHw7xudGhlciA8
YWd4QHNpZ3hjcHUub3JnPgotLS0KIGRyaXZlcnMvcGh5L2ZyZWVzY2FsZS9LY29uZmlnICAgICAg
ICAgICAgICAgICB8ICAxMSArCiBkcml2ZXJzL3BoeS9mcmVlc2NhbGUvTWFrZWZpbGUgICAgICAg
ICAgICAgICAgfCAgIDEgKwogLi4uL3BoeS9mcmVlc2NhbGUvcGh5LWZzbC1pbXg4LW1pcGktZHBo
eS5jICAgIHwgNTA2ICsrKysrKysrKysrKysrKysrKwogMyBmaWxlcyBjaGFuZ2VkLCA1MTggaW5z
ZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvcGh5L2ZyZWVzY2FsZS9waHkt
ZnNsLWlteDgtbWlwaS1kcGh5LmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3BoeS9mcmVlc2NhbGUv
S2NvbmZpZyBiL2RyaXZlcnMvcGh5L2ZyZWVzY2FsZS9LY29uZmlnCmluZGV4IDgzMjY3MGI0OTUy
Yi4uYTExMWIxMzBmOWQyIDEwMDY0NAotLS0gYS9kcml2ZXJzL3BoeS9mcmVlc2NhbGUvS2NvbmZp
ZworKysgYi9kcml2ZXJzL3BoeS9mcmVlc2NhbGUvS2NvbmZpZwpAQCAtMywzICszLDE0IEBAIGNv
bmZpZyBQSFlfRlNMX0lNWDhNUV9VU0IKIAlkZXBlbmRzIG9uIE9GICYmIEhBU19JT01FTQogCXNl
bGVjdCBHRU5FUklDX1BIWQogCWRlZmF1bHQgQVJDSF9NWEMgJiYgQVJNNjQKKworY29uZmlnIFBI
WV9NSVhFTF9NSVBJX0RQSFkKKwl0cmlzdGF0ZSAiTWl4ZWwgTUlQSSBEU0kgUEhZIHN1cHBvcnQi
CisJZGVwZW5kcyBvbiBPRiAmJiBIQVNfSU9NRU0KKwlzZWxlY3QgR0VORVJJQ19QSFkKKwlzZWxl
Y3QgR0VORVJJQ19QSFlfTUlQSV9EUEhZCisJc2VsZWN0IFJFR01BUF9NTUlPCisJZGVmYXVsdCBB
UkNIX01YQyAmJiBBUk02NAorCWhlbHAKKwkgIEVuYWJsZSB0aGlzIHRvIGFkZCBzdXBwb3J0IGZv
ciB0aGUgTWl4ZWwgRFNJIFBIWSBhcyBmb3VuZAorCSAgb24gTlhQJ3MgaS5NWDggZmFtaWx5IG9m
IFNPQ3MuCmRpZmYgLS1naXQgYS9kcml2ZXJzL3BoeS9mcmVlc2NhbGUvTWFrZWZpbGUgYi9kcml2
ZXJzL3BoeS9mcmVlc2NhbGUvTWFrZWZpbGUKaW5kZXggZGMyYjNmMWYyZjgwLi4wNzQ5MWM5MjZh
MmMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvcGh5L2ZyZWVzY2FsZS9NYWtlZmlsZQorKysgYi9kcml2
ZXJzL3BoeS9mcmVlc2NhbGUvTWFrZWZpbGUKQEAgLTEgKzEsMiBAQAogb2JqLSQoQ09ORklHX1BI
WV9GU0xfSU1YOE1RX1VTQikJKz0gcGh5LWZzbC1pbXg4bXEtdXNiLm8KK29iai0kKENPTkZJR19Q
SFlfTUlYRUxfTUlQSV9EUEhZKQkrPSBwaHktZnNsLWlteDgtbWlwaS1kcGh5Lm8KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvcGh5L2ZyZWVzY2FsZS9waHktZnNsLWlteDgtbWlwaS1kcGh5LmMgYi9kcml2
ZXJzL3BoeS9mcmVlc2NhbGUvcGh5LWZzbC1pbXg4LW1pcGktZHBoeS5jCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uZDZiNWFmMGIzMzgwCi0tLSAvZGV2L251bGwKKysr
IGIvZHJpdmVycy9waHkvZnJlZXNjYWxlL3BoeS1mc2wtaW14OC1taXBpLWRwaHkuYwpAQCAtMCww
ICsxLDUwNiBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjArCisvKgorICog
Q29weXJpZ2h0IDIwMTcsMjAxOCBOWFAKKyAqIENvcHlyaWdodCAyMDE5IFB1cmlzbSBTUEMKKyAq
LworCisjaW5jbHVkZSA8bGludXgvY2xrLmg+CisjaW5jbHVkZSA8bGludXgvY2xrLXByb3ZpZGVy
Lmg+CisjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KKyNpbmNsdWRlIDxsaW51eC9pby5oPgorI2lu
Y2x1ZGUgPGxpbnV4L2tlcm5lbC5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1
ZGUgPGxpbnV4L29mLmg+CisjaW5jbHVkZSA8bGludXgvb2ZfcGxhdGZvcm0uaD4KKyNpbmNsdWRl
IDxsaW51eC9yZWdtYXAuaD4KKyNpbmNsdWRlIDxsaW51eC9waHkvcGh5Lmg+CisjaW5jbHVkZSA8
bGludXgvcGxhdGZvcm1fZGV2aWNlLmg+CisKKy8qIERQSFkgcmVnaXN0ZXJzICovCisjZGVmaW5l
IERQSFlfUERfRFBIWQkJCTB4MDAKKyNkZWZpbmUgRFBIWV9NX1BSR19IU19QUkVQQVJFCQkweDA0
CisjZGVmaW5lIERQSFlfTUNfUFJHX0hTX1BSRVBBUkUJCTB4MDgKKyNkZWZpbmUgRFBIWV9NX1BS
R19IU19aRVJPCQkweDBjCisjZGVmaW5lIERQSFlfTUNfUFJHX0hTX1pFUk8JCTB4MTAKKyNkZWZp
bmUgRFBIWV9NX1BSR19IU19UUkFJTAkJMHgxNAorI2RlZmluZSBEUEhZX01DX1BSR19IU19UUkFJ
TAkJMHgxOAorI2RlZmluZSBEUEhZX1BEX1BMTAkJCTB4MWMKKyNkZWZpbmUgRFBIWV9UU1QJCQkw
eDIwCisjZGVmaW5lIERQSFlfQ04JCQkJMHgyNAorI2RlZmluZSBEUEhZX0NNCQkJCTB4MjgKKyNk
ZWZpbmUgRFBIWV9DTwkJCQkweDJjCisjZGVmaW5lIERQSFlfTE9DSwkJCTB4MzAKKyNkZWZpbmUg
RFBIWV9MT0NLX0JZUAkJCTB4MzQKKyNkZWZpbmUgRFBIWV9SRUdfQllQQVNTX1BMTAkJMHg0Qwor
CisjZGVmaW5lIE1CUFMoeCkgKCh4KSAqIDEwMDAwMDApCisKKyNkZWZpbmUgREFUQV9SQVRFX01B
WF9TUEVFRCBNQlBTKDE1MDApCisjZGVmaW5lIERBVEFfUkFURV9NSU5fU1BFRUQgTUJQUyg4MCkK
KworI2RlZmluZSBQTExfTE9DS19TTEVFUCAxMAorI2RlZmluZSBQTExfTE9DS19USU1FT1VUIDEw
MDAKKworI2RlZmluZSBDTl9CVUYJMHhjYjdhODljMAorI2RlZmluZSBDT19CVUYJMHg2MworI2Rl
ZmluZSBDTSh4KQkoCQkJCVwKKwkJKCh4KSA8CTMyKT8weGUwfCgoeCktMTYpIDoJXAorCQkoKHgp
IDwJNjQpPzB4YzB8KCh4KS0zMikgOglcCisJCSgoeCkgPCAxMjgpPzB4ODB8KCh4KS02NCkgOglc
CisJCSgoeCkgLSAxMjgpKQorI2RlZmluZSBDTih4KQkoKCh4KSA9PSAxKT8weDFmIDogKCgoQ05f
QlVGKT4+KCh4KS0xKSkmMHgxZikpCisjZGVmaW5lIENPKHgpCSgoQ09fQlVGKT4+KDgtKHgpKSYw
eDMpCisKKy8qIFBIWSBwb3dlciBvbiBpcyBhY3RpdmUgbG93ICovCisjZGVmaW5lIFBXUl9PTgkw
CisjZGVmaW5lIFBXUl9PRkYJMQorCitlbnVtIG1peGVsX2RwaHlfZGV2dHlwZSB7CisJTUlYRUxf
SU1YOE1RLAorfTsKKworc3RydWN0IG1peGVsX2RwaHlfZGV2ZGF0YSB7CisJdTggcmVnX3R4X3Jj
YWw7CisJdTggcmVnX2F1dG9fcGRfZW47CisJdTggcmVnX3J4bHBycDsKKwl1OCByZWdfcnhjZHJw
OworCXU4IHJlZ19yeGhzX3NldHRsZTsKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgbWl4ZWxf
ZHBoeV9kZXZkYXRhIG1peGVsX2RwaHlfZGV2ZGF0YVtdID0geworCVtNSVhFTF9JTVg4TVFdID0g
eworCQkucmVnX3R4X3JjYWwgPSAweDM4LAorCQkucmVnX2F1dG9fcGRfZW4gPSAweDNjLAorCQku
cmVnX3J4bHBycCA9IDB4NDAsCisJCS5yZWdfcnhjZHJwID0gMHg0NCwKKwkJLnJlZ19yeGhzX3Nl
dHRsZSA9IDB4NDgsCisJfSwKK307CisKK3N0cnVjdCBtaXhlbF9kcGh5X2NmZyB7CisJLyogRFBI
WSBQTEwgcGFyYW1ldGVycyAqLworCXUzMiBjbTsKKwl1MzIgY247CisJdTMyIGNvOworCS8qIERQ
SFkgcmVnaXN0ZXIgdmFsdWVzICovCisJdTggbWNfcHJnX2hzX3ByZXBhcmU7CisJdTggbV9wcmdf
aHNfcHJlcGFyZTsKKwl1OCBtY19wcmdfaHNfemVybzsKKwl1OCBtX3ByZ19oc196ZXJvOworCXU4
IG1jX3ByZ19oc190cmFpbDsKKwl1OCBtX3ByZ19oc190cmFpbDsKKwl1OCByeGhzX3NldHRsZTsK
K307CisKK3N0cnVjdCBtaXhlbF9kcGh5X3ByaXYgeworCXN0cnVjdCBtaXhlbF9kcGh5X2NmZyBj
Zmc7CisJc3RydWN0IHJlZ21hcCAqcmVnczsKKwlzdHJ1Y3QgY2xrICpwaHlfcmVmX2NsazsKKwlj
b25zdCBzdHJ1Y3QgbWl4ZWxfZHBoeV9kZXZkYXRhICpkZXZkYXRhOworfTsKKworc3RhdGljIGNv
bnN0IHN0cnVjdCByZWdtYXBfY29uZmlnIG1peGVsX2RwaHlfcmVnbWFwX2NvbmZpZyA9IHsKKwku
cmVnX2JpdHMgPSA4LAorCS52YWxfYml0cyA9IDMyLAorCS5yZWdfc3RyaWRlID0gNCwKKwkubWF4
X3JlZ2lzdGVyID0gRFBIWV9SRUdfQllQQVNTX1BMTCwKKwkubmFtZSA9ICJtaXBpLWRwaHkiLAor
fTsKKworc3RhdGljIGludCBwaHlfd3JpdGUoc3RydWN0IHBoeSAqcGh5LCB1MzIgdmFsdWUsIHVu
c2lnbmVkIGludCByZWcpCit7CisJc3RydWN0IG1peGVsX2RwaHlfcHJpdiAqcHJpdiA9IHBoeV9n
ZXRfZHJ2ZGF0YShwaHkpOworCWludCByZXQ7CisKKwlyZXQgPSByZWdtYXBfd3JpdGUocHJpdi0+
cmVncywgcmVnLCB2YWx1ZSk7CisJaWYgKHJldCA8IDApCisJCWRldl9lcnIoJnBoeS0+ZGV2LCAi
RmFpbGVkIHRvIHdyaXRlIERQSFkgcmVnICVkOiAlZCIsIHJlZywgcmV0KTsKKwlyZXR1cm4gcmV0
OworfQorCisvKgorICogRmluZCBhIHJhdGlvIGNsb3NlIHRvIHRoZSBkZXNpcmVkIG9uZSB1c2lu
ZyBjb250aW51ZWQgZnJhY3Rpb24KKyAqIGFwcHJveGltYXRpb24gZW5kaW5nIGVpdGhlciBhdCBl
eGFjdCBtYXRjaCBvciBtYXhpbXVtIGFsbG93ZWQKKyAqIG5vbWluYXRvciwgZGVub21pbmF0b3Iu
CisgKi8KK3N0YXRpYyB2b2lkIGdldF9iZXN0X3JhdGlvKHUzMiAqcG51bSwgdTMyICpwZGVub20s
IHVuc2lnbmVkIGludCBtYXhfbiwKKwkJCSAgIHVuc2lnbmVkIGludCBtYXhfZCkKK3sKKwl1MzIg
YSA9ICpwbnVtOworCXUzMiBiID0gKnBkZW5vbTsKKwl1MzIgYzsKKwl1MzIgbltdID0gezAsIDF9
OworCXUzMiBkW10gPSB7MSwgMH07CisJdTMyIHdob2xlOworCXVuc2lnbmVkIGludCBpID0gMTsK
KworCXdoaWxlIChiKSB7CisJCWkgXj0gMTsKKwkJd2hvbGUgPSBhIC8gYjsKKwkJbltpXSArPSAo
bltpIF4gMV0gKiB3aG9sZSk7CisJCWRbaV0gKz0gKGRbaSBeIDFdICogd2hvbGUpOworCQlpZiAo
KG5baV0gPiBtYXhfbikgfHwgKGRbaV0gPiBtYXhfZCkpIHsKKwkJCWkgXj0gMTsKKwkJCWJyZWFr
OworCQl9CisJCWMgPSBhIC0gKGIgKiB3aG9sZSk7CisJCWEgPSBiOworCQliID0gYzsKKwl9CisJ
KnBudW0gPSBuW2ldOworCSpwZGVub20gPSBkW2ldOworfQorCitzdGF0aWMgaW50IG1peGVsX2Rw
aHlfY29uZmlnX2Zyb21fb3B0cyhzdHJ1Y3QgcGh5ICpwaHksCisJICAgICAgIHN0cnVjdCBwaHlf
Y29uZmlndXJlX29wdHNfbWlwaV9kcGh5ICpkcGh5X29wdHMsCisJICAgICAgIHN0cnVjdCBtaXhl
bF9kcGh5X2NmZyAqY2ZnKQoreworCXN0cnVjdCBtaXhlbF9kcGh5X3ByaXYgKnByaXYgPSBkZXZf
Z2V0X2RydmRhdGEocGh5LT5kZXYucGFyZW50KTsKKwl1bnNpZ25lZCBsb25nIHJlZl9jbGsgPSBj
bGtfZ2V0X3JhdGUocHJpdi0+cGh5X3JlZl9jbGspOworCXUzMiBscF90LCBudW1lcmF0b3IsIGRl
bm9taW5hdG9yOworCXVuc2lnbmVkIGxvbmcgbG9uZyB0bXA7CisJdTMyIG47CisJaW50IGk7CisK
KwlpZiAoZHBoeV9vcHRzLT5oc19jbGtfcmF0ZSA+IERBVEFfUkFURV9NQVhfU1BFRUQgfHwKKwkg
ICAgZHBoeV9vcHRzLT5oc19jbGtfcmF0ZSA8IERBVEFfUkFURV9NSU5fU1BFRUQpCisJCXJldHVy
biAtRUlOVkFMOworCisJbnVtZXJhdG9yID0gZHBoeV9vcHRzLT5oc19jbGtfcmF0ZTsKKwlkZW5v
bWluYXRvciA9IHJlZl9jbGs7CisJZ2V0X2Jlc3RfcmF0aW8oJm51bWVyYXRvciwgJmRlbm9taW5h
dG9yLCAyNTUsIDI1Nik7CisJaWYgKCFudW1lcmF0b3IgfHwgIWRlbm9taW5hdG9yKSB7CisJCWRl
dl9lcnIoJnBoeS0+ZGV2LCAiSW52YWxpZCAlZC8lZCBmb3IgJWxkLyVsZFxuIiwKKwkJCW51bWVy
YXRvciwgZGVub21pbmF0b3IsCisJCQlkcGh5X29wdHMtPmhzX2Nsa19yYXRlLCByZWZfY2xrKTsK
KwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCisJd2hpbGUgKChudW1lcmF0b3IgPCAxNikgJiYgKGRl
bm9taW5hdG9yIDw9IDEyOCkpIHsKKwkJbnVtZXJhdG9yIDw8PSAxOworCQlkZW5vbWluYXRvciA8
PD0gMTsKKwl9CisJLyoKKwkgKiBDTSByYW5nZXMgYmV0d2VlbiAxNiBhbmQgMjU1CisJICogQ04g
cmFuZ2VzIGJldHdlZW4gMSBhbmQgMzIKKwkgKiBDTyBpcyBwb3dlciBvZiAyOiAxLCAyLCA0LCA4
CisJICovCisJaSA9IF9fZmZzKGRlbm9taW5hdG9yKTsKKwlpZiAoaSA+IDMpCisJCWkgPSAzOwor
CWNmZy0+Y24gPSBkZW5vbWluYXRvciA+PiBpOworCWNmZy0+Y28gPSAxIDw8IGk7CisJY2ZnLT5j
bSA9IG51bWVyYXRvcjsKKworCWlmIChjZmctPmNtIDwgMTYgfHwgY2ZnLT5jbSA+IDI1NSB8fAor
CSAgICBjZmctPmNuIDwgMSB8fCBjZmctPmNuID4gMzIgfHwKKwkgICAgY2ZnLT5jbyA8IDEgfHwg
Y2ZnLT5jbyA+IDgpIHsKKwkJZGV2X2VycigmcGh5LT5kZXYsICJJbnZhbGlkIENNL0NOL0NPIHZh
bHVlczogJXUvJXUvJXVcbiIsCisJCQljZmctPmNtLCBjZmctPmNuLCBjZmctPmNvKTsKKwkJZGV2
X2VycigmcGh5LT5kZXYsICJmb3IgaHNfY2xrL3JlZl9jbGs9JWxkLyVsZCDiqbAgJWQvJWRcbiIs
CisJCQlkcGh5X29wdHMtPmhzX2Nsa19yYXRlLCByZWZfY2xrLAorCQkJbnVtZXJhdG9yLCBkZW5v
bWluYXRvcik7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCWRldl9kYmcoJnBoeS0+ZGV2LCAi
aHNfY2xrL3JlZl9jbGs9JWxkLyVsZCDiqbAgJWQvJWRcbiIsCisJCWRwaHlfb3B0cy0+aHNfY2xr
X3JhdGUsIHJlZl9jbGssIG51bWVyYXRvciwgZGVub21pbmF0b3IpOworCisJLyogTFAgY2xvY2sg
cGVyaW9kICovCisJdG1wID0gMTAwMDAwMDAwMDAwMExMOworCWRvX2Rpdih0bXAsIGRwaHlfb3B0
cy0+bHBfY2xrX3JhdGUpOyAvKiBwcyAqLworCWlmICh0bXAgPiBVTE9OR19NQVgpCisJCXJldHVy
biAtRUlOVkFMOworCisJbHBfdCA9IHRtcDsKKwlkZXZfZGJnKCZwaHktPmRldiwgIkxQIGNsb2Nr
ICVsdSwgcGVyaW9kOiAldSBwc1xuIiwKKwkJZHBoeV9vcHRzLT5scF9jbGtfcmF0ZSwgbHBfdCk7
CisKKwkvKiBoc19wcmVwYXJlOiBpbiBscCBjbG9jayBwZXJpb2RzICovCisJaWYgKDIgKiBkcGh5
X29wdHMtPmhzX3ByZXBhcmUgPiA1ICogbHBfdCkgeworCQlkZXZfZXJyKCZwaHktPmRldiwKKwkJ
CSJoc19wcmVwYXJlICgldSkgPiAyLjUgKiBscCBjbG9jayBwZXJpb2QgKCV1KSIsCisJCQlkcGh5
X29wdHMtPmhzX3ByZXBhcmUsIGxwX3QpOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisJLyogMDA6
IGxwX3QsIDAxOiAxLjUgKiBscF90LCAxMDogMiAqIGxwX3QsIDExOiAyLjUgKiBscF90ICovCisJ
aWYgKGRwaHlfb3B0cy0+aHNfcHJlcGFyZSA8IGxwX3QpIHsKKwkJbiA9IDA7CisJfSBlbHNlIHsK
KwkJdG1wID0gMiAqIChkcGh5X29wdHMtPmhzX3ByZXBhcmUgLSBscF90KTsKKwkJZG9fZGl2KHRt
cCwgbHBfdCk7CisJCW4gPSB0bXA7CisJfQorCWNmZy0+bV9wcmdfaHNfcHJlcGFyZSA9IG47CisK
KwkvKiBjbGtfcHJlcGFyZTogaW4gbHAgY2xvY2sgcGVyaW9kcyAqLworCWlmICgyICogZHBoeV9v
cHRzLT5jbGtfcHJlcGFyZSA+IDMgKiBscF90KSB7CisJCWRldl9lcnIoJnBoeS0+ZGV2LAorCQkJ
ImNsa19wcmVwYXJlICgldSkgPiAxLjUgKiBscCBjbG9jayBwZXJpb2QgKCV1KSIsCisJCQlkcGh5
X29wdHMtPmNsa19wcmVwYXJlLCBscF90KTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCS8qIDAw
OiBscF90LCAwMTogMS41ICogbHBfdCAqLworCWNmZy0+bWNfcHJnX2hzX3ByZXBhcmUgPSBkcGh5
X29wdHMtPmNsa19wcmVwYXJlID4gbHBfdCA/IDEgOiAwOworCisJLyogaHNfemVybzogZm9ybXVs
YSBmcm9tIE5YUCBCU1AgKi8KKwluID0gKDE0NCAqIChkcGh5X29wdHMtPmhzX2Nsa19yYXRlIC8g
MTAwMDAwMCkgLSA0NzUwMCkgLyAxMDAwMDsKKwljZmctPm1fcHJnX2hzX3plcm8gPSBuIDwgMSA/
IDEgOiBuOworCisJLyogY2xrX3plcm86IGZvcm11bGEgZnJvbSBOWFAgQlNQICovCisJbiA9ICgz
NCAqIChkcGh5X29wdHMtPmhzX2Nsa19yYXRlIC8gMTAwMDAwMCkgLSAyNTAwKSAvIDEwMDA7CisJ
Y2ZnLT5tY19wcmdfaHNfemVybyA9IG4gPCAxID8gMSA6IG47CisKKwkvKiBjbGtfdHJhaWwsIGhz
X3RyYWlsOiBmb3JtdWxhIGZyb20gTlhQIEJTUCAqLworCW4gPSAoMTAzICogKGRwaHlfb3B0cy0+
aHNfY2xrX3JhdGUgLyAxMDAwMDAwKSArIDEwMDAwKSAvIDEwMDAwOworCWlmIChuID4gMTUpCisJ
CW4gPSAxNTsKKwlpZiAobiA8IDEpCisJCW4gPSAxOworCWNmZy0+bV9wcmdfaHNfdHJhaWwgPSBu
OworCWNmZy0+bWNfcHJnX2hzX3RyYWlsID0gbjsKKworCS8qIHJ4aHNfc2V0dGxlOiBmb3JtdWxh
IGZyb20gTlhQIEJTUCAqLworCWlmIChkcGh5X29wdHMtPmhzX2Nsa19yYXRlIDwgTUJQUyg4MCkp
CisJCWNmZy0+cnhoc19zZXR0bGUgPSAweDBkOworCWVsc2UgaWYgKGRwaHlfb3B0cy0+aHNfY2xr
X3JhdGUgPCBNQlBTKDkwKSkKKwkJY2ZnLT5yeGhzX3NldHRsZSA9IDB4MGM7CisJZWxzZSBpZiAo
ZHBoeV9vcHRzLT5oc19jbGtfcmF0ZSA8IE1CUFMoMTI1KSkKKwkJY2ZnLT5yeGhzX3NldHRsZSA9
IDB4MGI7CisJZWxzZSBpZiAoZHBoeV9vcHRzLT5oc19jbGtfcmF0ZSA8IE1CUFMoMTUwKSkKKwkJ
Y2ZnLT5yeGhzX3NldHRsZSA9IDB4MGE7CisJZWxzZSBpZiAoZHBoeV9vcHRzLT5oc19jbGtfcmF0
ZSA8IE1CUFMoMjI1KSkKKwkJY2ZnLT5yeGhzX3NldHRsZSA9IDB4MDk7CisJZWxzZSBpZiAoZHBo
eV9vcHRzLT5oc19jbGtfcmF0ZSA8IE1CUFMoNTAwKSkKKwkJY2ZnLT5yeGhzX3NldHRsZSA9IDB4
MDg7CisJZWxzZQorCQljZmctPnJ4aHNfc2V0dGxlID0gMHgwNzsKKworCWRldl9kYmcoJnBoeS0+
ZGV2LCAiaHNfcHJlcGFyZTogJXUsIGNsa19wcmVwYXJlOiAldSwgIgorCQkiaHNfemVybzogJXUs
IGNsa196ZXJvOiAldSwgIgorCQkiaHNfdHJhaWw6ICV1LCBjbGtfdHJhaWw6ICV1LCAiCisJCSJy
eGhzX3NldHRsZTogJXVcbiIsCisJCWNmZy0+bV9wcmdfaHNfcHJlcGFyZSwgY2ZnLT5tY19wcmdf
aHNfcHJlcGFyZSwKKwkJY2ZnLT5tX3ByZ19oc196ZXJvLCBjZmctPm1jX3ByZ19oc196ZXJvLAor
CQljZmctPm1fcHJnX2hzX3RyYWlsLCBjZmctPm1jX3ByZ19oc190cmFpbCwKKwkJY2ZnLT5yeGhz
X3NldHRsZSk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgbWl4ZWxfcGh5X3NldF9o
c190aW1pbmdzKHN0cnVjdCBwaHkgKnBoeSkKK3sKKwlzdHJ1Y3QgbWl4ZWxfZHBoeV9wcml2ICpw
cml2ID0gcGh5X2dldF9kcnZkYXRhKHBoeSk7CisKKwlwaHlfd3JpdGUocGh5LCBwcml2LT5jZmcu
bV9wcmdfaHNfcHJlcGFyZSwgRFBIWV9NX1BSR19IU19QUkVQQVJFKTsKKwlwaHlfd3JpdGUocGh5
LCBwcml2LT5jZmcubWNfcHJnX2hzX3ByZXBhcmUsIERQSFlfTUNfUFJHX0hTX1BSRVBBUkUpOwor
CXBoeV93cml0ZShwaHksIHByaXYtPmNmZy5tX3ByZ19oc196ZXJvLCBEUEhZX01fUFJHX0hTX1pF
Uk8pOworCXBoeV93cml0ZShwaHksIHByaXYtPmNmZy5tY19wcmdfaHNfemVybywgRFBIWV9NQ19Q
UkdfSFNfWkVSTyk7CisJcGh5X3dyaXRlKHBoeSwgcHJpdi0+Y2ZnLm1fcHJnX2hzX3RyYWlsLCBE
UEhZX01fUFJHX0hTX1RSQUlMKTsKKwlwaHlfd3JpdGUocGh5LCBwcml2LT5jZmcubWNfcHJnX2hz
X3RyYWlsLCBEUEhZX01DX1BSR19IU19UUkFJTCk7CisJcGh5X3dyaXRlKHBoeSwgcHJpdi0+Y2Zn
LnJ4aHNfc2V0dGxlLCBwcml2LT5kZXZkYXRhLT5yZWdfcnhoc19zZXR0bGUpOworfQorCitzdGF0
aWMgaW50IG1peGVsX2RwaHlfc2V0X3BsbF9wYXJhbXMoc3RydWN0IHBoeSAqcGh5KQoreworCXN0
cnVjdCBtaXhlbF9kcGh5X3ByaXYgKnByaXYgPSBkZXZfZ2V0X2RydmRhdGEocGh5LT5kZXYucGFy
ZW50KTsKKworCWlmIChwcml2LT5jZmcuY20gPCAxNiB8fCBwcml2LT5jZmcuY20gPiAyNTUgfHwK
KwkgICAgcHJpdi0+Y2ZnLmNuIDwgMSB8fCBwcml2LT5jZmcuY24gPiAzMiB8fAorCSAgICBwcml2
LT5jZmcuY28gPCAxIHx8IHByaXYtPmNmZy5jbyA+IDgpIHsKKwkJZGV2X2VycigmcGh5LT5kZXYs
ICJJbnZhbGlkIENNL0NOL0NPIHZhbHVlcyEgKCV1LyV1LyV1KVxuIiwKKwkJCXByaXYtPmNmZy5j
bSwgcHJpdi0+Y2ZnLmNuLCBwcml2LT5jZmcuY28pOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisJ
ZGV2X2RiZygmcGh5LT5kZXYsICJVc2luZyBDTToldSBDTjoldSBDTzoldVxuIiwKKwkJcHJpdi0+
Y2ZnLmNtLCBwcml2LT5jZmcuY24sIHByaXYtPmNmZy5jbyk7CisJcGh5X3dyaXRlKHBoeSwgQ00o
cHJpdi0+Y2ZnLmNtKSwgRFBIWV9DTSk7CisJcGh5X3dyaXRlKHBoeSwgQ04ocHJpdi0+Y2ZnLmNu
KSwgRFBIWV9DTik7CisJcGh5X3dyaXRlKHBoeSwgQ08ocHJpdi0+Y2ZnLmNvKSwgRFBIWV9DTyk7
CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbWl4ZWxfZHBoeV9jb25maWd1cmUoc3RydWN0
IHBoeSAqcGh5LCB1bmlvbiBwaHlfY29uZmlndXJlX29wdHMgKm9wdHMpCit7CisJc3RydWN0IG1p
eGVsX2RwaHlfcHJpdiAqcHJpdiA9IHBoeV9nZXRfZHJ2ZGF0YShwaHkpOworCXN0cnVjdCBtaXhl
bF9kcGh5X2NmZyBjZmcgPSB7IDAgfTsKKwlpbnQgcmV0OworCisJcmV0ID0gbWl4ZWxfZHBoeV9j
b25maWdfZnJvbV9vcHRzKHBoeSwgJm9wdHMtPm1pcGlfZHBoeSwgJmNmZyk7CisJaWYgKHJldCkK
KwkJcmV0dXJuIHJldDsKKworCS8qIFVwZGF0ZSB0aGUgY29uZmlndXJhdGlvbiAqLworCW1lbWNw
eSgmcHJpdi0+Y2ZnLCAmY2ZnLCBzaXplb2Yoc3RydWN0IG1peGVsX2RwaHlfY2ZnKSk7CisKKwlw
aHlfd3JpdGUocGh5LCAweDAwLCBEUEhZX0xPQ0tfQllQKTsKKwlwaHlfd3JpdGUocGh5LCAweDAx
LCBwcml2LT5kZXZkYXRhLT5yZWdfdHhfcmNhbCk7CisJcGh5X3dyaXRlKHBoeSwgMHgwMCwgcHJp
di0+ZGV2ZGF0YS0+cmVnX2F1dG9fcGRfZW4pOworCXBoeV93cml0ZShwaHksIDB4MDIsIHByaXYt
PmRldmRhdGEtPnJlZ19yeGxwcnApOworCXBoeV93cml0ZShwaHksIDB4MDIsIHByaXYtPmRldmRh
dGEtPnJlZ19yeGNkcnApOworCXBoeV93cml0ZShwaHksIDB4MjUsIERQSFlfVFNUKTsKKworCW1p
eGVsX3BoeV9zZXRfaHNfdGltaW5ncyhwaHkpOworCXJldCA9IG1peGVsX2RwaHlfc2V0X3BsbF9w
YXJhbXMocGh5KTsKKwlpZiAocmV0IDwgMCkKKwkJcmV0dXJuIHJldDsKKworCXJldHVybiAwOwor
fQorCitzdGF0aWMgaW50IG1peGVsX2RwaHlfdmFsaWRhdGUoc3RydWN0IHBoeSAqcGh5LCBlbnVt
IHBoeV9tb2RlIG1vZGUsIGludCBzdWJtb2RlLAorCQkJICAgICAgIHVuaW9uIHBoeV9jb25maWd1
cmVfb3B0cyAqb3B0cykKK3sKKwlzdHJ1Y3QgbWl4ZWxfZHBoeV9jZmcgY2ZnID0geyAwIH07CisK
KwlpZiAobW9kZSAhPSBQSFlfTU9ERV9NSVBJX0RQSFkpCisJCXJldHVybiAtRUlOVkFMOworCisJ
cmV0dXJuIG1peGVsX2RwaHlfY29uZmlnX2Zyb21fb3B0cyhwaHksICZvcHRzLT5taXBpX2RwaHks
ICZjZmcpOworfQorCisKK3N0YXRpYyBpbnQgbWl4ZWxfZHBoeV9pbml0KHN0cnVjdCBwaHkgKnBo
eSkKK3sKKwlwaHlfd3JpdGUocGh5LCBQV1JfT0ZGLCBEUEhZX1BEX1BMTCk7CisJcGh5X3dyaXRl
KHBoeSwgUFdSX09GRiwgRFBIWV9QRF9EUEhZKTsKKworCXJldHVybiAwOworfQorCisKK3N0YXRp
YyBpbnQgbWl4ZWxfZHBoeV9leGl0KHN0cnVjdCBwaHkgKnBoeSkKK3sKKwlwaHlfd3JpdGUocGh5
LCAwLCBEUEhZX0NNKTsKKwlwaHlfd3JpdGUocGh5LCAwLCBEUEhZX0NOKTsKKwlwaHlfd3JpdGUo
cGh5LCAwLCBEUEhZX0NPKTsKKworCXJldHVybiAwOworfQorCisKK3N0YXRpYyBpbnQgbWl4ZWxf
ZHBoeV9wb3dlcl9vbihzdHJ1Y3QgcGh5ICpwaHkpCit7CisJc3RydWN0IG1peGVsX2RwaHlfcHJp
diAqcHJpdiA9IHBoeV9nZXRfZHJ2ZGF0YShwaHkpOworCXUzMiBsb2NrZWQ7CisJaW50IHJldDsK
KworCXJldCA9IGNsa19wcmVwYXJlX2VuYWJsZShwcml2LT5waHlfcmVmX2Nsayk7CisJaWYgKHJl
dCA8IDApCisJCXJldHVybiByZXQ7CisKKwlwaHlfd3JpdGUocGh5LCBQV1JfT04sIERQSFlfUERf
UExMKTsKKwlyZXQgPSByZWdtYXBfcmVhZF9wb2xsX3RpbWVvdXQocHJpdi0+cmVncywgRFBIWV9M
T0NLLCBsb2NrZWQsCisJCQkJICAgICAgIGxvY2tlZCwgUExMX0xPQ0tfU0xFRVAsCisJCQkJICAg
ICAgIFBMTF9MT0NLX1RJTUVPVVQpOworCWlmIChyZXQgPCAwKSB7CisJCWRldl9lcnIoJnBoeS0+
ZGV2LCAiQ291bGQgbm90IGdldCBEUEhZIGxvY2sgKCVkKSFcbiIsIHJldCk7CisJCWdvdG8gY2xv
Y2tfZGlzYWJsZTsKKwl9CisJcGh5X3dyaXRlKHBoeSwgUFdSX09OLCBEUEhZX1BEX0RQSFkpOwor
CisJcmV0dXJuIDA7CitjbG9ja19kaXNhYmxlOgorCWNsa19kaXNhYmxlX3VucHJlcGFyZShwcml2
LT5waHlfcmVmX2Nsayk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCBtaXhlbF9kcGh5
X3Bvd2VyX29mZihzdHJ1Y3QgcGh5ICpwaHkpCit7CisJc3RydWN0IG1peGVsX2RwaHlfcHJpdiAq
cHJpdiA9IHBoeV9nZXRfZHJ2ZGF0YShwaHkpOworCisJcGh5X3dyaXRlKHBoeSwgUFdSX09GRiwg
RFBIWV9QRF9QTEwpOworCXBoeV93cml0ZShwaHksIFBXUl9PRkYsIERQSFlfUERfRFBIWSk7CisK
KwljbGtfZGlzYWJsZV91bnByZXBhcmUocHJpdi0+cGh5X3JlZl9jbGspOworCisJcmV0dXJuIDA7
Cit9CisKKworc3RhdGljIGNvbnN0IHN0cnVjdCBwaHlfb3BzIG1peGVsX2RwaHlfcGh5X29wcyA9
IHsKKwkuaW5pdCA9IG1peGVsX2RwaHlfaW5pdCwKKwkuZXhpdCA9IG1peGVsX2RwaHlfZXhpdCwK
KwkucG93ZXJfb24gPSBtaXhlbF9kcGh5X3Bvd2VyX29uLAorCS5wb3dlcl9vZmYgPSBtaXhlbF9k
cGh5X3Bvd2VyX29mZiwKKwkuY29uZmlndXJlID0gbWl4ZWxfZHBoeV9jb25maWd1cmUsCisJLnZh
bGlkYXRlID0gbWl4ZWxfZHBoeV92YWxpZGF0ZSwKKwkub3duZXIgPSBUSElTX01PRFVMRSwKK307
CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIG1peGVsX2RwaHlfb2ZfbWF0Y2hb
XSA9IHsKKwl7IC5jb21wYXRpYmxlID0gImZzbCxpbXg4bXEtbWlwaS1kcGh5IiwKKwkgIC5kYXRh
ID0gJm1peGVsX2RwaHlfZGV2ZGF0YVtNSVhFTF9JTVg4TVFdIH0sCisJeyAvKiBzZW50aW5lbCAq
LyB9LAorfTsKK01PRFVMRV9ERVZJQ0VfVEFCTEUob2YsIG1peGVsX2RwaHlfb2ZfbWF0Y2gpOwor
CitzdGF0aWMgaW50IG1peGVsX2RwaHlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRl
dikKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmcGRldi0+ZGV2OworCXN0cnVjdCBkZXZpY2Vf
bm9kZSAqbnAgPSBkZXYtPm9mX25vZGU7CisJc3RydWN0IHBoeV9wcm92aWRlciAqcGh5X3Byb3Zp
ZGVyOworCXN0cnVjdCBtaXhlbF9kcGh5X3ByaXYgKnByaXY7CisJc3RydWN0IHJlc291cmNlICpy
ZXM7CisJc3RydWN0IHBoeSAqcGh5OworCXZvaWQgX19pb21lbSAqcmVnczsKKworCWlmICghbnAp
CisJCXJldHVybiAtRU5PREVWOworCisJcHJpdiA9IGRldm1fa3phbGxvYyhkZXYsIHNpemVvZigq
cHJpdiksIEdGUF9LRVJORUwpOworCWlmICghcHJpdikKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlw
cml2LT5kZXZkYXRhID0gb2ZfZGV2aWNlX2dldF9tYXRjaF9kYXRhKCZwZGV2LT5kZXYpOworCWlm
ICghcHJpdi0+ZGV2ZGF0YSkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlyZXMgPSBwbGF0Zm9ybV9n
ZXRfcmVzb3VyY2UocGRldiwgSU9SRVNPVVJDRV9NRU0sIDApOworCXJlZ3MgPSBkZXZtX2lvcmVt
YXBfcmVzb3VyY2UoZGV2LCByZXMpOworCWlmIChJU19FUlIocmVncykpIHsKKwkJZGV2X2Vycihk
ZXYsICJDb3VsZG4ndCBtYXAgdGhlIERQSFkgcmVnaXN0ZXJzXG4iKTsKKwkJcmV0dXJuIFBUUl9F
UlIocmVncyk7CisJfQorCisJcHJpdi0+cmVncyA9IGRldm1fcmVnbWFwX2luaXRfbW1pbygmcGRl
di0+ZGV2LCByZWdzLAorCQkJCQkgICAmbWl4ZWxfZHBoeV9yZWdtYXBfY29uZmlnKTsKKwlpZiAo
SVNfRVJSKHByaXYtPnJlZ3MpKSB7CisJCWRldl9lcnIoZGV2LCAiQ291bGRuJ3QgY3JlYXRlIHRo
ZSBEUEhZIHJlZ21hcFxuIik7CisJCXJldHVybiBQVFJfRVJSKHByaXYtPnJlZ3MpOworCX0KKwor
CXByaXYtPnBoeV9yZWZfY2xrID0gZGV2bV9jbGtfZ2V0KCZwZGV2LT5kZXYsICJwaHlfcmVmIik7
CisJaWYgKElTX0VSUihwcml2LT5waHlfcmVmX2NsaykpIHsKKwkJZGV2X2VycihkZXYsICJObyBw
aHlfcmVmIGNsb2NrIGZvdW5kXG4iKTsKKwkJcmV0dXJuIFBUUl9FUlIocHJpdi0+cGh5X3JlZl9j
bGspOworCX0KKwlkZXZfZGJnKGRldiwgInBoeV9yZWYgY2xvY2sgcmF0ZTogJWx1XG4iLAorCQlj
bGtfZ2V0X3JhdGUocHJpdi0+cGh5X3JlZl9jbGspKTsKKworCWRldl9zZXRfZHJ2ZGF0YShkZXYs
IHByaXYpOworCisJcGh5ID0gZGV2bV9waHlfY3JlYXRlKGRldiwgbnAsICZtaXhlbF9kcGh5X3Bo
eV9vcHMpOworCWlmIChJU19FUlIocGh5KSkgeworCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0byBj
cmVhdGUgcGh5ICVsZFxuIiwgUFRSX0VSUihwaHkpKTsKKwkJcmV0dXJuIFBUUl9FUlIocGh5KTsK
Kwl9CisJcGh5X3NldF9kcnZkYXRhKHBoeSwgcHJpdik7CisKKwlwaHlfcHJvdmlkZXIgPSBkZXZt
X29mX3BoeV9wcm92aWRlcl9yZWdpc3RlcihkZXYsIG9mX3BoeV9zaW1wbGVfeGxhdGUpOworCisJ
cmV0dXJuIFBUUl9FUlJfT1JfWkVSTyhwaHlfcHJvdmlkZXIpOworfQorCitzdGF0aWMgc3RydWN0
IHBsYXRmb3JtX2RyaXZlciBtaXhlbF9kcGh5X2RyaXZlciA9IHsKKwkucHJvYmUJPSBtaXhlbF9k
cGh5X3Byb2JlLAorCS5kcml2ZXIgPSB7CisJCS5uYW1lID0gIm1peGVsLW1pcGktZHBoeSIsCisJ
CS5vZl9tYXRjaF90YWJsZQk9IG1peGVsX2RwaHlfb2ZfbWF0Y2gsCisJfQorfTsKK21vZHVsZV9w
bGF0Zm9ybV9kcml2ZXIobWl4ZWxfZHBoeV9kcml2ZXIpOworCitNT0RVTEVfQVVUSE9SKCJOWFAg
U2VtaWNvbmR1Y3RvciIpOworTU9EVUxFX0RFU0NSSVBUSU9OKCJNaXhlbCBNSVBJLURTSSBQSFkg
ZHJpdmVyIik7CitNT0RVTEVfTElDRU5TRSgiR1BMIHYyIik7Ci0tIAoyLjIwLjEKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
