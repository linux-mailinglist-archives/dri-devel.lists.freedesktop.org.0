Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EA2E6845BC
	for <lists+dri-devel@lfdr.de>; Wed,  7 Aug 2019 09:27:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C48C26E636;
	Wed,  7 Aug 2019 07:26:29 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qt1-x842.google.com (mail-qt1-x842.google.com
 [IPv6:2607:f8b0:4864:20::842])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 306B36E588
 for <dri-devel@lists.freedesktop.org>; Tue,  6 Aug 2019 23:16:18 +0000 (UTC)
Received: by mail-qt1-x842.google.com with SMTP id h18so86464051qtm.9
 for <dri-devel@lists.freedesktop.org>; Tue, 06 Aug 2019 16:16:18 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=JxsVo1tSo9nOofaC+CW71G9A/3jHBgy7XZ2Y+iDU6wk=;
 b=C6UikkogFX5tCmiAE6/FeK5GUcmRWq42Lm5uMNGs9fo/58QEi3N6jdO9De8k0g0qfa
 7nyev8ZE6MacYjv+uy/nh93w9VG3cacjnENH6apZ+t1Qer6VcbVrYLpXzle5L1DW1oaN
 Kw6gxJlgnkDzl3v6eMTXFpYisyNS/9qMLgdLm6HLXyJRCcw4AEToX4mt9uZsVvOVnhpy
 8RnAabVzr+WzwbU9MctgTtPZWYioTChy/j3QPfOGodZvTQ+b6NsEpSyfWhOTCvFAJRKK
 HzVe9ptYdI/AB8vwB6TBXv4c4smlM0Tp5luWk6agxJtIkoLjanUAyZP4dnIa7Hfm7SJL
 2/YA==
X-Gm-Message-State: APjAAAVVsPMWsaRjTt/xhg6LMIORo0LMPVOy3/KcsrQCu5lmhXvEQ0IB
 UnGgo4aPmdKUpdgdnFEXqVyW7w==
X-Google-Smtp-Source: APXvYqxBbEyHGgxF5Nl8cVhIwdz1mu4o1neH5++dyqiahCeO4T26lyxvhtz3KCxPPf/9Z4FNDxc5Wg==
X-Received: by 2002:aed:3ac1:: with SMTP id o59mr5389656qte.260.1565133377305; 
 Tue, 06 Aug 2019 16:16:17 -0700 (PDT)
Received: from ziepe.ca
 (hlfxns017vw-156-34-55-100.dhcp-dynamic.fibreop.ns.bellaliant.net.
 [156.34.55.100])
 by smtp.gmail.com with ESMTPSA id b13sm52681923qtk.55.2019.08.06.16.16.14
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Tue, 06 Aug 2019 16:16:17 -0700 (PDT)
Received: from jgg by mlx.ziepe.ca with local (Exim 4.90_1)
 (envelope-from <jgg@ziepe.ca>)
 id 1hv8gg-0006f4-G2; Tue, 06 Aug 2019 20:16:14 -0300
From: Jason Gunthorpe <jgg@ziepe.ca>
To: linux-mm@kvack.org
Subject: [PATCH v3 hmm 09/11] drm/amdkfd: fix a use after free race with
 mmu_notifer unregister
Date: Tue,  6 Aug 2019 20:15:46 -0300
Message-Id: <20190806231548.25242-10-jgg@ziepe.ca>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190806231548.25242-1-jgg@ziepe.ca>
References: <20190806231548.25242-1-jgg@ziepe.ca>
MIME-Version: 1.0
X-Mailman-Approved-At: Wed, 07 Aug 2019 07:26:18 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ziepe.ca; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=JxsVo1tSo9nOofaC+CW71G9A/3jHBgy7XZ2Y+iDU6wk=;
 b=DzuN0SMd6m3Y09EQ3hGtHT0JB2aJvet1X6xSjLP8soFwijScUkjfei+cE2aizwyqi8
 8Jha5XC787VVWgoXYljT8xUpYPYOFigvSiU+1J03D3b5wV89VGY0fRB+2O+s8PxEW8Cc
 XHLP7NRjVVVDcyhUMTRcguAhGAT3GgYfCIM3KKJYjCw6SRWgG0LgRecPMWYG/h7iyqhL
 SibXtCYOyQ2FlxTLqndgSo2yQc+yBvh9wTZCUo6uritT4lvyCwq2m+CMyMiFrNowhMlw
 wZUotLzWJuJo3OH1QCGYmHg/VKilwJSVIFt6wDKRQhIZCMQPFq5BgAju/1yQr1cKLEEf
 ycrA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Andrea Arcangeli <aarcange@redhat.com>,
 Ralph Campbell <rcampbell@nvidia.com>, Dimitri Sivanich <sivanich@sgi.com>,
 Gavin Shan <shangw@linux.vnet.ibm.com>, Andrea Righi <andrea@betterlinux.com>,
 linux-rdma@vger.kernel.org, John Hubbard <jhubbard@nvidia.com>, "Kuehling,
 Felix" <Felix.Kuehling@amd.com>, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 =?UTF-8?q?J=C3=A9r=C3=B4me=20Glisse?= <jglisse@redhat.com>,
 iommu@lists.linux-foundation.org, amd-gfx@lists.freedesktop.org,
 Jason Gunthorpe <jgg@mellanox.com>, Alex Deucher <alexander.deucher@amd.com>,
 intel-gfx@lists.freedesktop.org, Christoph Hellwig <hch@lst.de>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogSmFzb24gR3VudGhvcnBlIDxqZ2dAbWVsbGFub3guY29tPgoKV2hlbiB1c2luZyBtbXVf
bm90aWZlcl91bnJlZ2lzdGVyX25vX3JlbGVhc2UoKSB0aGUgY2FsbGVyIG11c3QgZW5zdXJlCnRo
ZXJlIGlzIGEgU1JDVSBzeW5jaHJvbml6ZSBiZWZvcmUgdGhlIG1uIG1lbW9yeSBpcyBmcmVlZCwg
b3RoZXJ3aXNlIHVzZQphZnRlciBmcmVlIHJhY2VzIGFyZSBwb3NzaWJsZSwgZm9yIGluc3RhbmNl
OgoKICAgICBDUFUwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUFUxCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0ZV9yYW5nZV9zdGFy
dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhsaXN0X2Zvcl9lYWNo
X2VudHJ5X3JjdSguLikKIG1tdV9ub3RpZmllcl91bnJlZ2lzdGVyX25vX3JlbGVhc2UoJnAtPm1u
KQoga2ZyZWUobW4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1u
LT5vcHMtPmludmFsaWRhdGVfcmFuZ2VfZW5kKQoKVGhlIGVycm9yIHVud2luZCBpbiBhbWRrZmQg
bWlzc2VzIHRoZSBTUkNVIHN5bmNocm9uaXphdGlvbi4KCmFtZGtmZCBrZWVwcyB0aGUga2ZkX3By
b2Nlc3MgYXJvdW5kIHVudGlsIHRoZSBtbSBpcyByZWxlYXNlZCwgc28gc3BsaXQgdGhlCmZsb3cg
dG8gZnVsbHkgaW5pdGlhbGl6ZSB0aGUga2ZkX3Byb2Nlc3MgYW5kIHJlZ2lzdGVyIGl0IGZvciBm
aW5kX3Byb2Nlc3MsCmFuZCB3aXRoIHRoZSBub3RpZmllci4gUGFzdCB0aGlzIHBvaW50IHRoZSBr
ZmRfcHJvY2VzcyBkb2VzIG5vdCBuZWVkIHRvIGJlCmNsZWFuZWQgdXAgYXMgaXQgaXMgZnVsbHkg
cmVhZHkuCgpUaGUgZmluYWwgZmFpbGFibGUgc3RlcCBkb2VzIGEgdm1fbW1hcCgpIGFuZCBkb2Vz
IG5vdCBzZWVtIHRvIGltcGFjdCB0aGUKa2ZkX3Byb2Nlc3MgZ2xvYmFsIHN0YXRlLiBTaW5jZSBp
dCBhbHNvIGNhbm5vdCBiZSB1bmRvbmUgKGFuZCBhbHJlYWR5IGhhcwpwcm9ibGVtcyB3aXRoIHVu
ZG8gaWYgaXQgaW50ZXJuYWxseSBmYWlscyksIGl0IGhhcyB0byBiZSBsYXN0LgoKVGhpcyB3YXkg
d2UgZG9uJ3QgaGF2ZSB0byB0cnkgdG8gdW53aW5kIHRoZSBtbXVfbm90aWZpZXJfcmVnaXN0ZXIo
KSBhbmQKYXZvaWQgdGhlIHByb2JsZW0gd2l0aCB0aGUgU1JDVS4KCkFsb25nIHRoZSB3YXkgdGhp
cyBhbHNvIGZpeGVzIHZhcmlvdXMgb3RoZXIgZXJyb3IgdW53aW5kIGJ1Z3MgaW4gdGhlIGZsb3cu
CgpGaXhlczogNDUxMDIwNDhmNzdlICgiYW1ka2ZkOiBBZGQgcHJvY2VzcyBxdWV1ZSBtYW5hZ2Vy
IG1vZHVsZSIpClJldmlld2VkLWJ5OiBGZWxpeCBLdWVobGluZyA8RmVsaXguS3VlaGxpbmdAYW1k
LmNvbT4KU2lnbmVkLW9mZi1ieTogSmFzb24gR3VudGhvcnBlIDxqZ2dAbWVsbGFub3guY29tPgot
LS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1ka2ZkL2tmZF9wcm9jZXNzLmMgfCA3OCArKysrKysr
KysrKy0tLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAzNyBpbnNlcnRpb25zKCspLCA0MSBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGtmZC9rZmRf
cHJvY2Vzcy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRrZmQva2ZkX3Byb2Nlc3MuYwppbmRl
eCA4ZjEwNzZjMGM4OGEyNS4uYzA2ZTYxOTBmMjFmZmEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1ka2ZkL2tmZF9wcm9jZXNzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRrZmQva2ZkX3Byb2Nlc3MuYwpAQCAtNjIsOCArNjIsOCBAQCBzdGF0aWMgc3RydWN0IHdvcmtx
dWV1ZV9zdHJ1Y3QgKmtmZF9yZXN0b3JlX3dxOwogCiBzdGF0aWMgc3RydWN0IGtmZF9wcm9jZXNz
ICpmaW5kX3Byb2Nlc3MoY29uc3Qgc3RydWN0IHRhc2tfc3RydWN0ICp0aHJlYWQpOwogc3RhdGlj
IHZvaWQga2ZkX3Byb2Nlc3NfcmVmX3JlbGVhc2Uoc3RydWN0IGtyZWYgKnJlZik7Ci1zdGF0aWMg
c3RydWN0IGtmZF9wcm9jZXNzICpjcmVhdGVfcHJvY2Vzcyhjb25zdCBzdHJ1Y3QgdGFza19zdHJ1
Y3QgKnRocmVhZCwKLQkJCQkJc3RydWN0IGZpbGUgKmZpbGVwKTsKK3N0YXRpYyBzdHJ1Y3Qga2Zk
X3Byb2Nlc3MgKmNyZWF0ZV9wcm9jZXNzKGNvbnN0IHN0cnVjdCB0YXNrX3N0cnVjdCAqdGhyZWFk
KTsKK3N0YXRpYyBpbnQga2ZkX3Byb2Nlc3NfaW5pdF9jd3NyX2FwdShzdHJ1Y3Qga2ZkX3Byb2Nl
c3MgKnAsIHN0cnVjdCBmaWxlICpmaWxlcCk7CiAKIHN0YXRpYyB2b2lkIGV2aWN0X3Byb2Nlc3Nf
d29ya2VyKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yayk7CiBzdGF0aWMgdm9pZCByZXN0b3JlX3By
b2Nlc3Nfd29ya2VyKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yayk7CkBAIC0yODksNyArMjg5LDE1
IEBAIHN0cnVjdCBrZmRfcHJvY2VzcyAqa2ZkX2NyZWF0ZV9wcm9jZXNzKHN0cnVjdCBmaWxlICpm
aWxlcCkKIAlpZiAocHJvY2VzcykgewogCQlwcl9kZWJ1ZygiUHJvY2VzcyBhbHJlYWR5IGZvdW5k
XG4iKTsKIAl9IGVsc2UgewotCQlwcm9jZXNzID0gY3JlYXRlX3Byb2Nlc3ModGhyZWFkLCBmaWxl
cCk7CisJCXByb2Nlc3MgPSBjcmVhdGVfcHJvY2Vzcyh0aHJlYWQpOworCQlpZiAoSVNfRVJSKHBy
b2Nlc3MpKQorCQkJZ290byBvdXQ7CisKKwkJcmV0ID0ga2ZkX3Byb2Nlc3NfaW5pdF9jd3NyX2Fw
dShwcm9jZXNzLCBmaWxlcCk7CisJCWlmIChyZXQpIHsKKwkJCXByb2Nlc3MgPSBFUlJfUFRSKHJl
dCk7CisJCQlnb3RvIG91dDsKKwkJfQogCiAJCWlmICghcHJvY2ZzLmtvYmopCiAJCQlnb3RvIG91
dDsKQEAgLTYwOSw4MSArNjE3LDY5IEBAIHN0YXRpYyBpbnQga2ZkX3Byb2Nlc3NfZGV2aWNlX2lu
aXRfY3dzcl9kZ3B1KHN0cnVjdCBrZmRfcHJvY2Vzc19kZXZpY2UgKnBkZCkKIAlyZXR1cm4gMDsK
IH0KIAotc3RhdGljIHN0cnVjdCBrZmRfcHJvY2VzcyAqY3JlYXRlX3Byb2Nlc3MoY29uc3Qgc3Ry
dWN0IHRhc2tfc3RydWN0ICp0aHJlYWQsCi0JCQkJCXN0cnVjdCBmaWxlICpmaWxlcCkKKy8qCisg
KiBPbiByZXR1cm4gdGhlIGtmZF9wcm9jZXNzIGlzIGZ1bGx5IG9wZXJhdGlvbmFsIGFuZCB3aWxs
IGJlIGZyZWVkIHdoZW4gdGhlCisgKiBtbSBpcyByZWxlYXNlZAorICovCitzdGF0aWMgc3RydWN0
IGtmZF9wcm9jZXNzICpjcmVhdGVfcHJvY2Vzcyhjb25zdCBzdHJ1Y3QgdGFza19zdHJ1Y3QgKnRo
cmVhZCkKIHsKIAlzdHJ1Y3Qga2ZkX3Byb2Nlc3MgKnByb2Nlc3M7CiAJaW50IGVyciA9IC1FTk9N
RU07CiAKIAlwcm9jZXNzID0ga3phbGxvYyhzaXplb2YoKnByb2Nlc3MpLCBHRlBfS0VSTkVMKTsK
LQogCWlmICghcHJvY2VzcykKIAkJZ290byBlcnJfYWxsb2NfcHJvY2VzczsKIAotCXByb2Nlc3Mt
PnBhc2lkID0ga2ZkX3Bhc2lkX2FsbG9jKCk7Ci0JaWYgKHByb2Nlc3MtPnBhc2lkID09IDApCi0J
CWdvdG8gZXJyX2FsbG9jX3Bhc2lkOwotCi0JaWYgKGtmZF9hbGxvY19wcm9jZXNzX2Rvb3JiZWxs
cyhwcm9jZXNzKSA8IDApCi0JCWdvdG8gZXJyX2FsbG9jX2Rvb3JiZWxsczsKLQogCWtyZWZfaW5p
dCgmcHJvY2Vzcy0+cmVmKTsKLQogCW11dGV4X2luaXQoJnByb2Nlc3MtPm11dGV4KTsKLQogCXBy
b2Nlc3MtPm1tID0gdGhyZWFkLT5tbTsKLQotCS8qIHJlZ2lzdGVyIG5vdGlmaWVyICovCi0JcHJv
Y2Vzcy0+bW11X25vdGlmaWVyLm9wcyA9ICZrZmRfcHJvY2Vzc19tbXVfbm90aWZpZXJfb3BzOwot
CWVyciA9IG1tdV9ub3RpZmllcl9yZWdpc3RlcigmcHJvY2Vzcy0+bW11X25vdGlmaWVyLCBwcm9j
ZXNzLT5tbSk7Ci0JaWYgKGVycikKLQkJZ290byBlcnJfbW11X25vdGlmaWVyOwotCi0JaGFzaF9h
ZGRfcmN1KGtmZF9wcm9jZXNzZXNfdGFibGUsICZwcm9jZXNzLT5rZmRfcHJvY2Vzc2VzLAotCQkJ
KHVpbnRwdHJfdClwcm9jZXNzLT5tbSk7Ci0KIAlwcm9jZXNzLT5sZWFkX3RocmVhZCA9IHRocmVh
ZC0+Z3JvdXBfbGVhZGVyOwotCWdldF90YXNrX3N0cnVjdChwcm9jZXNzLT5sZWFkX3RocmVhZCk7
Ci0KIAlJTklUX0xJU1RfSEVBRCgmcHJvY2Vzcy0+cGVyX2RldmljZV9kYXRhKTsKLQorCUlOSVRf
REVMQVlFRF9XT1JLKCZwcm9jZXNzLT5ldmljdGlvbl93b3JrLCBldmljdF9wcm9jZXNzX3dvcmtl
cik7CisJSU5JVF9ERUxBWUVEX1dPUksoJnByb2Nlc3MtPnJlc3RvcmVfd29yaywgcmVzdG9yZV9w
cm9jZXNzX3dvcmtlcik7CisJcHJvY2Vzcy0+bGFzdF9yZXN0b3JlX3RpbWVzdGFtcCA9IGdldF9q
aWZmaWVzXzY0KCk7CiAJa2ZkX2V2ZW50X2luaXRfcHJvY2Vzcyhwcm9jZXNzKTsKKwlwcm9jZXNz
LT5pc18zMmJpdF91c2VyX21vZGUgPSBpbl9jb21wYXRfc3lzY2FsbCgpOworCisJcHJvY2Vzcy0+
cGFzaWQgPSBrZmRfcGFzaWRfYWxsb2MoKTsKKwlpZiAocHJvY2Vzcy0+cGFzaWQgPT0gMCkKKwkJ
Z290byBlcnJfYWxsb2NfcGFzaWQ7CisKKwlpZiAoa2ZkX2FsbG9jX3Byb2Nlc3NfZG9vcmJlbGxz
KHByb2Nlc3MpIDwgMCkKKwkJZ290byBlcnJfYWxsb2NfZG9vcmJlbGxzOwogCiAJZXJyID0gcHFt
X2luaXQoJnByb2Nlc3MtPnBxbSwgcHJvY2Vzcyk7CiAJaWYgKGVyciAhPSAwKQogCQlnb3RvIGVy
cl9wcm9jZXNzX3BxbV9pbml0OwogCiAJLyogaW5pdCBwcm9jZXNzIGFwZXJ0dXJlcyovCi0JcHJv
Y2Vzcy0+aXNfMzJiaXRfdXNlcl9tb2RlID0gaW5fY29tcGF0X3N5c2NhbGwoKTsKIAllcnIgPSBr
ZmRfaW5pdF9hcGVydHVyZXMocHJvY2Vzcyk7CiAJaWYgKGVyciAhPSAwKQogCQlnb3RvIGVycl9p
bml0X2FwZXJ0dXJlczsKIAotCUlOSVRfREVMQVlFRF9XT1JLKCZwcm9jZXNzLT5ldmljdGlvbl93
b3JrLCBldmljdF9wcm9jZXNzX3dvcmtlcik7Ci0JSU5JVF9ERUxBWUVEX1dPUksoJnByb2Nlc3Mt
PnJlc3RvcmVfd29yaywgcmVzdG9yZV9wcm9jZXNzX3dvcmtlcik7Ci0JcHJvY2Vzcy0+bGFzdF9y
ZXN0b3JlX3RpbWVzdGFtcCA9IGdldF9qaWZmaWVzXzY0KCk7Ci0KLQllcnIgPSBrZmRfcHJvY2Vz
c19pbml0X2N3c3JfYXB1KHByb2Nlc3MsIGZpbGVwKTsKKwkvKiBNdXN0IGJlIGxhc3QsIGhhdmUg
dG8gdXNlIHJlbGVhc2UgZGVzdHJ1Y3Rpb24gYWZ0ZXIgdGhpcyAqLworCXByb2Nlc3MtPm1tdV9u
b3RpZmllci5vcHMgPSAma2ZkX3Byb2Nlc3NfbW11X25vdGlmaWVyX29wczsKKwllcnIgPSBtbXVf
bm90aWZpZXJfcmVnaXN0ZXIoJnByb2Nlc3MtPm1tdV9ub3RpZmllciwgcHJvY2Vzcy0+bW0pOwog
CWlmIChlcnIpCi0JCWdvdG8gZXJyX2luaXRfY3dzcjsKKwkJZ290byBlcnJfcmVnaXN0ZXJfbm90
aWZpZXI7CisKKwlnZXRfdGFza19zdHJ1Y3QocHJvY2Vzcy0+bGVhZF90aHJlYWQpOworCWhhc2hf
YWRkX3JjdShrZmRfcHJvY2Vzc2VzX3RhYmxlLCAmcHJvY2Vzcy0+a2ZkX3Byb2Nlc3NlcywKKwkJ
CSh1aW50cHRyX3QpcHJvY2Vzcy0+bW0pOwogCiAJcmV0dXJuIHByb2Nlc3M7CiAKLWVycl9pbml0
X2N3c3I6CitlcnJfcmVnaXN0ZXJfbm90aWZpZXI6CiAJa2ZkX3Byb2Nlc3NfZnJlZV9vdXRzdGFu
ZGluZ19rZmRfYm9zKHByb2Nlc3MpOwogCWtmZF9wcm9jZXNzX2Rlc3Ryb3lfcGRkcyhwcm9jZXNz
KTsKIGVycl9pbml0X2FwZXJ0dXJlczoKIAlwcW1fdW5pbml0KCZwcm9jZXNzLT5wcW0pOwogZXJy
X3Byb2Nlc3NfcHFtX2luaXQ6Ci0JaGFzaF9kZWxfcmN1KCZwcm9jZXNzLT5rZmRfcHJvY2Vzc2Vz
KTsKLQlzeW5jaHJvbml6ZV9yY3UoKTsKLQltbXVfbm90aWZpZXJfdW5yZWdpc3Rlcl9ub19yZWxl
YXNlKCZwcm9jZXNzLT5tbXVfbm90aWZpZXIsIHByb2Nlc3MtPm1tKTsKLWVycl9tbXVfbm90aWZp
ZXI6Ci0JbXV0ZXhfZGVzdHJveSgmcHJvY2Vzcy0+bXV0ZXgpOwogCWtmZF9mcmVlX3Byb2Nlc3Nf
ZG9vcmJlbGxzKHByb2Nlc3MpOwogZXJyX2FsbG9jX2Rvb3JiZWxsczoKIAlrZmRfcGFzaWRfZnJl
ZShwcm9jZXNzLT5wYXNpZCk7CiBlcnJfYWxsb2NfcGFzaWQ6CisJbXV0ZXhfZGVzdHJveSgmcHJv
Y2Vzcy0+bXV0ZXgpOwogCWtmcmVlKHByb2Nlc3MpOwogZXJyX2FsbG9jX3Byb2Nlc3M6CiAJcmV0
dXJuIEVSUl9QVFIoZXJyKTsKLS0gCjIuMjIuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vZHJpLWRldmVs
