Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7BB2E114D58
	for <lists+dri-devel@lfdr.de>; Fri,  6 Dec 2019 09:17:47 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9E4FA6EAEC;
	Fri,  6 Dec 2019 08:17:34 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x549.google.com (mail-pg1-x549.google.com
 [IPv6:2607:f8b0:4864:20::549])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DEA3D6F62F
 for <dri-devel@lists.freedesktop.org>; Thu,  5 Dec 2019 09:34:00 +0000 (UTC)
Received: by mail-pg1-x549.google.com with SMTP id t11so1505756pgm.2
 for <dri-devel@lists.freedesktop.org>; Thu, 05 Dec 2019 01:34:00 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc:content-transfer-encoding;
 bh=UDw98xQ3l8jb/G4I/C4jLU3wltugH4Xugs74OzkFeik=;
 b=f7Ex7RYtzYA8KprUPlHGX41ppIIUjJH0xBZ7H5bZlNT8cflLAiTFa3ndIrAWCPcEK+
 1uTDPTQL32ZkwRX5K3uLAs1ICiGyWaJHUT8aIe8XM+k4fjuJfxGV8T5AjnxcBQMp7w93
 bQqEEl3e94gQ1o9gVoPKEJZLxsPyyA5Le9dgTR6Tbn+JiiP9ia2zZpR5xOBGzynW7o/b
 /FSBVlxUqHFS69C+iZwHTXq1mccTQn3yOmFRT2sl+PNkI93hpYu6SMC3cycdYaAYMo8a
 kRjRX993SZafvnafolf6i2XjI2cYixLhO+IOM/qMriDPTAuBcFxnKna5AMv3sp8yIdWc
 PFBQ==
X-Gm-Message-State: APjAAAXB7EU3guy1+WHAeKtIe0Jhw1n2EmLV17TrS296Tumwiou9Y+Ri
 TH7hsU6rzaKKpQMeg0BPiraNtrKLR6Ah
X-Google-Smtp-Source: APXvYqyB1JKKVzxS+JYkFrqpUq62INfT2kJP2MIey/8F4Kg/RV8LgQrN+yrqtaqsApxSmoSi9eVMrre7aC2m
X-Received: by 2002:a63:ed4a:: with SMTP id m10mr7430508pgk.99.1575538440322; 
 Thu, 05 Dec 2019 01:34:00 -0800 (PST)
Date: Thu,  5 Dec 2019 01:33:46 -0800
In-Reply-To: <20191205093346.57930-1-rajatja@google.com>
Message-Id: <20191205093346.57930-3-rajatja@google.com>
Mime-Version: 1.0
References: <20191205093346.57930-1-rajatja@google.com>
X-Mailer: git-send-email 2.24.0.393.g34dc348eaf-goog
Subject: [PATCH v3 3/3] drm/i915: Add support for integrated privacy screens
From: Rajat Jain <rajatja@google.com>
To: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Maxime Ripard <mripard@kernel.org>, 
 Sean Paul <sean@poorly.run>, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel@ffwll.ch>, 
 Jani Nikula <jani.nikula@linux.intel.com>, 
 Joonas Lahtinen <joonas.lahtinen@linux.intel.com>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>, 
 "=?UTF-8?q?Ville=20Syrj=C3=A4l=C3=A4?=" <ville.syrjala@linux.intel.com>,
 Chris Wilson <chris@chris-wilson.co.uk>, Imre Deak <imre.deak@intel.com>, 
 "=?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?=" <jose.souza@intel.com>,
 linux-kernel@vger.kernel.org, 
 dri-devel@lists.freedesktop.org, intel-gfx@lists.freedesktop.org, 
 gregkh@linuxfoundation.org, mathewk@google.com, 
 Daniel Thompson <daniel.thompson@linaro.org>, Jonathan Corbet <corbet@lwn.net>,
 Pavel Machek <pavel@denx.de>, seanpaul@google.com,
 Duncan Laurie <dlaurie@google.com>, 
 jsbarnes@google.com, Thierry Reding <thierry.reding@gmail.com>
X-Mailman-Approved-At: Fri, 06 Dec 2019 08:17:34 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc:content-transfer-encoding;
 bh=UDw98xQ3l8jb/G4I/C4jLU3wltugH4Xugs74OzkFeik=;
 b=V41nfIyY4WmVZX/575il83HExfBAxo/Q3JYTo3utJdOEXmiDj3Xwhdwi/MDsL2fZfV
 VVhz5KV7V/IAn5WoaZ9IDVMNYTGGYcNLX1vVWOBb7LIYoYuZc2HiHy56ayFwSFaTkK1Z
 Gn/AYVreeDlqJ6v9IGPFzh3Zh//N/NNDeIWUHY/jqmnAoH94loJaQAOeycLfh3sKM2Jt
 iIrDEqvX6rhG5/8ey78/D5wl2RSAyXfc+gFqnVBWkBF7idf/NyZw0As1ITrVu/WI9Krq
 aFXwgludRWLWqu/ZCs1aXgDb9wQcpBLnirBkxDV1VIjyRGPlAeOWvnv8+H/2vA2IVH5z
 77ZA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rajat Jain <rajatja@google.com>, rajatxjain@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q2VydGFpbiBsYXB0b3BzIG5vdyBjb21lIHdpdGggcGFuZWxzIHRoYXQgaGF2ZSBpbnRlZ3JhdGVk
IHByaXZhY3kKc2NyZWVucyBvbiB0aGVtLiBUaGlzIHBhdGNoIGFkZHMgc3VwcG9ydCBmb3Igc3Vj
aCBwYW5lbHMgYnkgYWRkaW5nCmEgcHJpdmFjeS1zY3JlZW4gcHJvcGVydHkgdG8gdGhlIGludGVs
X2Nvbm5lY3RvciBmb3IgdGhlIHBhbmVsLCB0aGF0CnRoZSB1c2Vyc3BhY2UgY2FuIHRoZW4gdXNl
IHRvIGNvbnRyb2wgYW5kIGNoZWNrIHRoZSBzdGF0dXMuCgpJZGVudGlmeWluZyB0aGUgcHJlc2Vu
Y2Ugb2YgcHJpdmFjeSBzY3JlZW4sIGFuZCBjb250cm9sbGluZyBpdCwgaXMgZG9uZQp2aWEgQUNQ
SSBfRFNNIG1ldGhvZHMuCgpDdXJyZW50bHksIHRoaXMgaXMgZG9uZSBvbmx5IGZvciB0aGUgSW50
ZWwgZGlzcGxheSBwb3J0cy4gQnV0IGluIGZ1dHVyZSwKdGhpcyBjYW4gYmUgZG9uZSBmb3IgYW55
IG90aGVyIHBvcnRzIGlmIHRoZSBoYXJkd2FyZSBiZWNvbWVzIGF2YWlsYWJsZQooZS5nLiBleHRl
cm5hbCBtb25pdG9ycyBzdXBwb3J0aW5nIGludGVncmF0ZWQgcHJpdmFjeSBzY3JlZW5zPykuCgpT
aWduZWQtb2ZmLWJ5OiBSYWphdCBKYWluIDxyYWphdGphQGdvb2dsZS5jb20+Ci0tLQp2MzogKiBD
aGFuZ2UgbGljZW5zZSB0byBHUEwtMi4wIE9SIE1JVAogICAgKiBNb3ZlIHByaXZhY3kgc2NyZWVu
IGVudW0gZnJvbSBVQVBJIHRvIGludGVsX2Rpc3BsYXlfdHlwZXMuaAogICAgKiBSZW5hbWUgcGFy
YW1ldGVyIG5hbWUgYW5kIHNvbWUgb3RoZXIgbWlub3IgY2hhbmdlcy4KdjI6IEZvcm1lZCBieSBz
cGxpdHRpbmcgdGhlIG9yaWdpbmFsIHBhdGNoIGludG8gbXVsdGlwbGUgcGF0Y2hlcy4KICAgIC0g
QWxsIGNvZGUgaGFzIGJlZW4gbW92ZWQgaW50byBpOTE1IG5vdy4KICAgIC0gUHJpdmFjeSBzY3Jl
ZW4gaXMgYSBpOTE1IHByb3BlcnR5CiAgICAtIEhhdmUgYSBsb2NhbCBzdGF0ZSB2YXJpYWJsZSB0
byBzdG9yZSB0aGUgcHJ2YWN5IHNjcmVlbi4gRG9uJ3QgcmVhZAogICAgICBpdCBmcm9tIGhhcmR3
YXJlLgoKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlICAgICAgICAgICAgICAgICB8ICAz
ICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pYy5jICAgfCAxMyAr
KystCiAuLi4vZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY29ubmVjdG9yLmMgICAgfCAzNSAr
KysrKysrKysKIC4uLi9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jb25uZWN0b3IuaCAgICB8
ICAxICsKIC4uLi9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaCAgICB8IDE4
ICsrKysrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMgICAgICAgfCAg
NiArKwogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHJpdmFjeV9zY3JlZW4uYyAgIHwgNzIg
KysrKysrKysrKysrKysrKysrKwogLi4uL2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHJpdmFjeV9z
Y3JlZW4uaCAgIHwgMjUgKysrKysrKwogOCBmaWxlcyBjaGFuZ2VkLCAxNjkgaW5zZXJ0aW9ucygr
KSwgNCBkZWxldGlvbnMoLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vaTkx
NS9kaXNwbGF5L2ludGVsX3ByaXZhY3lfc2NyZWVuLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3ByaXZhY3lfc2NyZWVuLmgKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L01ha2VmaWxlCmluZGV4IDkwZGNmMDlmNTJjYy4uZjcwNjdjOGYwNDA3IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9N
YWtlZmlsZQpAQCAtMTk3LDcgKzE5Nyw4IEBAIGk5MTUteSArPSBcCiAJZGlzcGxheS9pbnRlbF92
Z2EubwogaTkxNS0kKENPTkZJR19BQ1BJKSArPSBcCiAJZGlzcGxheS9pbnRlbF9hY3BpLm8gXAot
CWRpc3BsYXkvaW50ZWxfb3ByZWdpb24ubworCWRpc3BsYXkvaW50ZWxfb3ByZWdpb24ubyBcCisJ
ZGlzcGxheS9pbnRlbF9wcml2YWN5X3NjcmVlbi5vCiBpOTE1LSQoQ09ORklHX0RSTV9GQkRFVl9F
TVVMQVRJT04pICs9IFwKIAlkaXNwbGF5L2ludGVsX2ZiZGV2Lm8KIApkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWMuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljLmMKaW5kZXggYzI4NzViMTBhZGY5Li5jNzNiODFj
NGMzZjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRv
bWljLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hdG9taWMuYwpA
QCAtMzcsNiArMzcsNyBAQAogI2luY2x1ZGUgImludGVsX2F0b21pYy5oIgogI2luY2x1ZGUgImlu
dGVsX2Rpc3BsYXlfdHlwZXMuaCIKICNpbmNsdWRlICJpbnRlbF9oZGNwLmgiCisjaW5jbHVkZSAi
aW50ZWxfcHJpdmFjeV9zY3JlZW4uaCIKICNpbmNsdWRlICJpbnRlbF9zcHJpdGUuaCIKIAogLyoq
CkBAIC01NywxMSArNTgsMTQgQEAgaW50IGludGVsX2RpZ2l0YWxfY29ubmVjdG9yX2F0b21pY19n
ZXRfcHJvcGVydHkoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKIAlzdHJ1Y3QgZHJt
X2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGRldik7CiAJc3RydWN0IGludGVsX2Rp
Z2l0YWxfY29ubmVjdG9yX3N0YXRlICppbnRlbF9jb25uX3N0YXRlID0KIAkJdG9faW50ZWxfZGln
aXRhbF9jb25uZWN0b3Jfc3RhdGUoc3RhdGUpOworCXN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmlu
dGVsX2Nvbm5lY3RvciA9IHRvX2ludGVsX2Nvbm5lY3Rvcihjb25uZWN0b3IpOwogCiAJaWYgKHBy
b3BlcnR5ID09IGRldl9wcml2LT5mb3JjZV9hdWRpb19wcm9wZXJ0eSkKIAkJKnZhbCA9IGludGVs
X2Nvbm5fc3RhdGUtPmZvcmNlX2F1ZGlvOwogCWVsc2UgaWYgKHByb3BlcnR5ID09IGRldl9wcml2
LT5icm9hZGNhc3RfcmdiX3Byb3BlcnR5KQogCQkqdmFsID0gaW50ZWxfY29ubl9zdGF0ZS0+YnJv
YWRjYXN0X3JnYjsKKwllbHNlIGlmIChwcm9wZXJ0eSA9PSBpbnRlbF9jb25uZWN0b3ItPnByaXZh
Y3lfc2NyZWVuX3Byb3BlcnR5KQorCQkqdmFsID0gaW50ZWxfY29ubl9zdGF0ZS0+cHJpdmFjeV9z
Y3JlZW5fc3RhdHVzOwogCWVsc2UgewogCQlEUk1fREVCVUdfQVRPTUlDKCJVbmtub3duIHByb3Bl
cnR5IFtQUk9QOiVkOiVzXVxuIiwKIAkJCQkgcHJvcGVydHktPmJhc2UuaWQsIHByb3BlcnR5LT5u
YW1lKTsKQEAgLTg5LDE1ICs5MywxOCBAQCBpbnQgaW50ZWxfZGlnaXRhbF9jb25uZWN0b3JfYXRv
bWljX3NldF9wcm9wZXJ0eShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCXN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoZGV2KTsKIAlzdHJ1Y3QgaW50
ZWxfZGlnaXRhbF9jb25uZWN0b3Jfc3RhdGUgKmludGVsX2Nvbm5fc3RhdGUgPQogCQl0b19pbnRl
bF9kaWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZShzdGF0ZSk7CisJc3RydWN0IGludGVsX2Nvbm5lY3Rv
ciAqaW50ZWxfY29ubmVjdG9yID0gdG9faW50ZWxfY29ubmVjdG9yKGNvbm5lY3Rvcik7CiAKIAlp
ZiAocHJvcGVydHkgPT0gZGV2X3ByaXYtPmZvcmNlX2F1ZGlvX3Byb3BlcnR5KSB7CiAJCWludGVs
X2Nvbm5fc3RhdGUtPmZvcmNlX2F1ZGlvID0gdmFsOwogCQlyZXR1cm4gMDsKLQl9Ci0KLQlpZiAo
cHJvcGVydHkgPT0gZGV2X3ByaXYtPmJyb2FkY2FzdF9yZ2JfcHJvcGVydHkpIHsKKwl9IGVsc2Ug
aWYgKHByb3BlcnR5ID09IGRldl9wcml2LT5icm9hZGNhc3RfcmdiX3Byb3BlcnR5KSB7CiAJCWlu
dGVsX2Nvbm5fc3RhdGUtPmJyb2FkY2FzdF9yZ2IgPSB2YWw7CiAJCXJldHVybiAwOworCX0gZWxz
ZSBpZiAocHJvcGVydHkgPT0gaW50ZWxfY29ubmVjdG9yLT5wcml2YWN5X3NjcmVlbl9wcm9wZXJ0
eSkgeworCQlpbnRlbF9wcml2YWN5X3NjcmVlbl9zZXRfdmFsKGludGVsX2Nvbm5lY3RvciwgdmFs
KTsKKwkJaW50ZWxfY29ubl9zdGF0ZS0+cHJpdmFjeV9zY3JlZW5fc3RhdHVzID0gdmFsOworCQly
ZXR1cm4gMDsKIAl9CiAKIAlEUk1fREVCVUdfQVRPTUlDKCJVbmtub3duIHByb3BlcnR5IFtQUk9Q
OiVkOiVzXVxuIiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfY29ubmVjdG9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Nvbm5l
Y3Rvci5jCmluZGV4IDExMzNjNGU5N2JiNC4uZjNlMDQxYzczN2RlIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Nvbm5lY3Rvci5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY29ubmVjdG9yLmMKQEAgLTI5NiwzICsyOTYsMzgg
QEAgaW50ZWxfYXR0YWNoX2NvbG9yc3BhY2VfcHJvcGVydHkoc3RydWN0IGRybV9jb25uZWN0b3Ig
KmNvbm5lY3RvcikKIAlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmY29ubmVjdG9yLT5iYXNl
LAogCQkJCSAgIGNvbm5lY3Rvci0+Y29sb3JzcGFjZV9wcm9wZXJ0eSwgMCk7CiB9CisKK3N0YXRp
YyBjb25zdCBzdHJ1Y3QgZHJtX3Byb3BfZW51bV9saXN0IHByaXZhY3lfc2NyZWVuX2VudW1bXSA9
IHsKKwl7IFBSSVZBQ1lfU0NSRUVOX0RJU0FCTEVELCAiRGlzYWJsZWQiIH0sCisJeyBQUklWQUNZ
X1NDUkVFTl9FTkFCTEVELCAiRW5hYmxlZCIgfSwKK307CisKKy8qKgorICogaW50ZWxfYXR0YWNo
X3ByaXZhY3lfc2NyZWVuX3Byb3BlcnR5IC0KKyAqICAgICBjcmVhdGUgYW5kIGF0dGFjaCB0aGUg
Y29ubmVjdGVyJ3MgcHJpdmFjeS1zY3JlZW4gcHJvcGVydHkuICoKKyAqIEBjb25uZWN0b3I6IGNv
bm5lY3RvciBmb3Igd2hpY2ggdG8gaW5pdCB0aGUgcHJpdmFjeS1zY3JlZW4gcHJvcGVydHkKKyAq
CisgKiBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgYW5kIGF0dGFjaGVzIHRoZSAicHJpdmFjeS1zY3Jl
ZW4iIHByb3BlcnR5IHRvIHRoZQorICogY29ubmVjdG9yLiBJbml0aWFsIHN0YXRlIG9mIHByaXZh
Y3ktc2NyZWVuIGlzIHNldCB0byBkaXNhYmxlZC4KKyAqLwordm9pZAoraW50ZWxfYXR0YWNoX3By
aXZhY3lfc2NyZWVuX3Byb3BlcnR5KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCit7
CisJc3RydWN0IGludGVsX2Nvbm5lY3RvciAqaW50ZWxfY29ubmVjdG9yID0gdG9faW50ZWxfY29u
bmVjdG9yKGNvbm5lY3Rvcik7CisJc3RydWN0IGRybV9wcm9wZXJ0eSAqcHJvcDsKKworCWlmICgh
aW50ZWxfY29ubmVjdG9yLT5wcml2YWN5X3NjcmVlbl9wcm9wZXJ0eSkgeworCQlwcm9wID0gZHJt
X3Byb3BlcnR5X2NyZWF0ZV9lbnVtKGNvbm5lY3Rvci0+ZGV2LAorCQkJCQkJRFJNX01PREVfUFJP
UF9FTlVNLAorCQkJCQkJInByaXZhY3ktc2NyZWVuIiwKKwkJCQkJCXByaXZhY3lfc2NyZWVuX2Vu
dW0sCisJCQkJCSAgICBBUlJBWV9TSVpFKHByaXZhY3lfc2NyZWVuX2VudW0pKTsKKwkJaWYgKCFw
cm9wKQorCQkJcmV0dXJuOworCisJCWludGVsX2Nvbm5lY3Rvci0+cHJpdmFjeV9zY3JlZW5fcHJv
cGVydHkgPSBwcm9wOworCX0KKworCWRybV9vYmplY3RfYXR0YWNoX3Byb3BlcnR5KCZjb25uZWN0
b3ItPmJhc2UsIHByb3AsCisJCQkJICAgUFJJVkFDWV9TQ1JFRU5fRElTQUJMRUQpOworfQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9jb25uZWN0b3IuaCBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfY29ubmVjdG9yLmgKaW5kZXggOTNh
NzM3NWM4MTk2Li42MTAwNWYzN2EzMzggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfY29ubmVjdG9yLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlz
cGxheS9pbnRlbF9jb25uZWN0b3IuaApAQCAtMzEsNSArMzEsNiBAQCB2b2lkIGludGVsX2F0dGFj
aF9mb3JjZV9hdWRpb19wcm9wZXJ0eShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKTsK
IHZvaWQgaW50ZWxfYXR0YWNoX2Jyb2FkY2FzdF9yZ2JfcHJvcGVydHkoc3RydWN0IGRybV9jb25u
ZWN0b3IgKmNvbm5lY3Rvcik7CiB2b2lkIGludGVsX2F0dGFjaF9hc3BlY3RfcmF0aW9fcHJvcGVy
dHkoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3Rvcik7CiB2b2lkIGludGVsX2F0dGFjaF9j
b2xvcnNwYWNlX3Byb3BlcnR5KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpOwordm9p
ZCBpbnRlbF9hdHRhY2hfcHJpdmFjeV9zY3JlZW5fcHJvcGVydHkoc3RydWN0IGRybV9jb25uZWN0
b3IgKmNvbm5lY3Rvcik7CiAKICNlbmRpZiAvKiBfX0lOVEVMX0NPTk5FQ1RPUl9IX18gKi8KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBl
cy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgK
aW5kZXggMGE0YTA0MTE2MDkxLi5hMGFkZGQyYzUzNzYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCkBAIC00MzMsNiArNDMzLDIz
IEBAIHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgewogCXN0cnVjdCB3b3JrX3N0cnVjdCBtb2Rlc2V0
X3JldHJ5X3dvcms7CiAKIAlzdHJ1Y3QgaW50ZWxfaGRjcCBoZGNwOworCisJLyogT3B0aW9uYWwg
InByaXZhY3ktc2NyZWVuIiBwcm9wZXJ0eSBmb3IgdGhlIGNvbm5lY3RvciBwYW5lbCAqLworCXN0
cnVjdCBkcm1fcHJvcGVydHkgKnByaXZhY3lfc2NyZWVuX3Byb3BlcnR5OworfTsKKworLyoqCisg
KiBlbnVtIGludGVsX3ByaXZhY3lfc2NyZWVuX3N0YXR1cyAtIHByaXZhY3lfc2NyZWVuIHN0YXR1
cworICoKKyAqIFRoaXMgZW51bSBpcyB1c2VkIHRvIHRyYWNrIGFuZCBjb250cm9sIHRoZSBzdGF0
ZSBvZiB0aGUgaW50ZWdyYXRlZCBwcml2YWN5CisgKiBzY3JlZW4gcHJlc2VudCBvbiBzb21lIGRp
c3BsYXkgcGFuZWxzLCB2aWEgdGhlICJwcml2YWN5LXNjcmVlbiIgcHJvcGVydHkuCisgKgorICog
QFBSSVZBQ1lfU0NSRUVOX0RJU0FCTEVEOiBUaGUgcHJpdmFjeS1zY3JlZW4gb24gdGhlIHBhbmVs
IGlzIGRpc2FibGVkCisgKiBAUFJJVkFDWV9TQ1JFRU5fRU5BQkxFRDogIFRoZSBwcml2YWN5LXNj
cmVlbiBvbiB0aGUgcGFuZWwgaXMgZW5hYmxlZAorICoqLworZW51bSBpbnRlbF9wcml2YWN5X3Nj
cmVlbl9zdGF0dXMgeworCVBSSVZBQ1lfU0NSRUVOX0RJU0FCTEVEID0gMCwKKwlQUklWQUNZX1ND
UkVFTl9FTkFCTEVEID0gMSwKIH07CiAKIHN0cnVjdCBpbnRlbF9kaWdpdGFsX2Nvbm5lY3Rvcl9z
dGF0ZSB7CkBAIC00NDAsNiArNDU3LDcgQEAgc3RydWN0IGludGVsX2RpZ2l0YWxfY29ubmVjdG9y
X3N0YXRlIHsKIAogCWVudW0gaGRtaV9mb3JjZV9hdWRpbyBmb3JjZV9hdWRpbzsKIAlpbnQgYnJv
YWRjYXN0X3JnYjsKKwllbnVtIGludGVsX3ByaXZhY3lfc2NyZWVuX3N0YXR1cyBwcml2YWN5X3Nj
cmVlbl9zdGF0dXM7CiB9OwogCiAjZGVmaW5lIHRvX2ludGVsX2RpZ2l0YWxfY29ubmVjdG9yX3N0
YXRlKHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9jb25uZWN0b3Jfc3Rh
dGUsIGJhc2UpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2RwLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMKaW5kZXggNmIy
MDkxOTNjYmJiLi43OWU1YTRkYWRlMWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2RwLmMKQEAgLTYyLDYgKzYyLDcgQEAKICNpbmNsdWRlICJpbnRlbF9sc3Bjb24uaCIKICNp
bmNsdWRlICJpbnRlbF9sdmRzLmgiCiAjaW5jbHVkZSAiaW50ZWxfcGFuZWwuaCIKKyNpbmNsdWRl
ICJpbnRlbF9wcml2YWN5X3NjcmVlbi5oIgogI2luY2x1ZGUgImludGVsX3Bzci5oIgogI2luY2x1
ZGUgImludGVsX3NpZGViYW5kLmgiCiAjaW5jbHVkZSAiaW50ZWxfdGMuaCIKQEAgLTY2MDEsNiAr
NjYwMiw3IEBAIGludGVsX2RwX2FkZF9wcm9wZXJ0aWVzKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxf
ZHAsIHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0CiB7CiAJc3RydWN0IGRybV9pOTE1X3By
aXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShjb25uZWN0b3ItPmRldik7CiAJZW51bSBwb3J0IHBv
cnQgPSBkcF90b19kaWdfcG9ydChpbnRlbF9kcCktPmJhc2UucG9ydDsKKwlzdHJ1Y3QgaW50ZWxf
Y29ubmVjdG9yICppbnRlbF9jb25uZWN0b3IgPSB0b19pbnRlbF9jb25uZWN0b3IoY29ubmVjdG9y
KTsKIAogCWlmICghSVNfRzRYKGRldl9wcml2KSAmJiBwb3J0ICE9IFBPUlRfQSkKIAkJaW50ZWxf
YXR0YWNoX2ZvcmNlX2F1ZGlvX3Byb3BlcnR5KGNvbm5lY3Rvcik7CkBAIC02NjMxLDYgKzY2MzMs
MTAgQEAgaW50ZWxfZHBfYWRkX3Byb3BlcnRpZXMoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCwg
c3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3QKIAogCQkvKiBMb29rdXAgdGhlIEFDUEkgbm9k
ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBjb25uZWN0b3IgKi8KIAkJaW50ZWxfYWNwaV9kZXZpY2Vf
aWRfdXBkYXRlKGRldl9wcml2KTsKKworCQkvKiBDaGVjayBmb3IgaW50ZWdyYXRlZCBQcml2YWN5
IHNjcmVlbiBzdXBwb3J0ICovCisJCWlmIChpbnRlbF9wcml2YWN5X3NjcmVlbl9wcmVzZW50KGlu
dGVsX2Nvbm5lY3RvcikpCisJCQlpbnRlbF9hdHRhY2hfcHJpdmFjeV9zY3JlZW5fcHJvcGVydHko
Y29ubmVjdG9yKTsKIAl9CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfcHJpdmFjeV9zY3JlZW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfcHJpdmFjeV9zY3JlZW4uYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAw
MDAwMDAwMDAuLmM4YTViNjRmOTRmYgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfcHJpdmFjeV9zY3JlZW4uYwpAQCAtMCwwICsxLDcyIEBACisv
LyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCBPUiBNSVQKKy8qCisgKiBJbnRlbCBB
Q1BJIHByaXZhY3kgc2NyZWVuIGNvZGUKKyAqCisgKiBDb3B5cmlnaHQgwqkgMjAxOSBHb29nbGUg
SW5jLgorICovCisKKyNpbmNsdWRlIDxsaW51eC9hY3BpLmg+CisKKyNpbmNsdWRlICJpbnRlbF9w
cml2YWN5X3NjcmVlbi5oIgorCisjZGVmaW5lIENPTk5FQ1RPUl9EU01fUkVWSUQgMQorCisjZGVm
aW5lIENPTk5FQ1RPUl9EU01fRk5fUFJJVkFDWV9FTkFCTEUJCTIKKyNkZWZpbmUgQ09OTkVDVE9S
X0RTTV9GTl9QUklWQUNZX0RJU0FCTEUJCTMKKworc3RhdGljIGNvbnN0IGd1aWRfdCBkcm1fY29u
bl9kc21fZ3VpZCA9CisJR1VJRF9JTklUKDB4QzcwMzMxMTMsIDB4ODcyMCwgMHg0Q0VCLAorCQkg
IDB4OTAsIDB4OTAsIDB4OUQsIDB4NTIsIDB4QjMsIDB4RTUsIDB4MkQsIDB4NzMpOworCisvKiBN
YWtlcyBfRFNNIGNhbGwgdG8gc2V0IHByaXZhY3kgc2NyZWVuIHN0YXR1cyAqLworc3RhdGljIHZv
aWQgYWNwaV9wcml2YWN5X3NjcmVlbl9jYWxsX2RzbShhY3BpX2hhbmRsZSBjb25uX2hhbmRsZSwg
dTY0IGZ1bmMpCit7CisJdW5pb24gYWNwaV9vYmplY3QgKm9iajsKKworCW9iaiA9IGFjcGlfZXZh
bHVhdGVfZHNtKGNvbm5faGFuZGxlLCAmZHJtX2Nvbm5fZHNtX2d1aWQsCisJCQkJQ09OTkVDVE9S
X0RTTV9SRVZJRCwgZnVuYywgTlVMTCk7CisJaWYgKCFvYmopIHsKKwkJRFJNX0RFQlVHX0RSSVZF
UigiZmFpbGVkIHRvIGV2YWx1YXRlIF9EU00gZm9yIGZuICVsbHhcbiIsIGZ1bmMpOworCQlyZXR1
cm47CisJfQorCisJQUNQSV9GUkVFKG9iaik7Cit9CisKK3ZvaWQgaW50ZWxfcHJpdmFjeV9zY3Jl
ZW5fc2V0X3ZhbChzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IsCisJCQkJICBlbnVt
IGludGVsX3ByaXZhY3lfc2NyZWVuX3N0YXR1cyB2YWwpCit7CisJYWNwaV9oYW5kbGUgYWNwaV9o
YW5kbGUgPSBjb25uZWN0b3ItPmFjcGlfaGFuZGxlOworCisJaWYgKCFhY3BpX2hhbmRsZSkKKwkJ
cmV0dXJuOworCisJaWYgKHZhbCA9PSBQUklWQUNZX1NDUkVFTl9ESVNBQkxFRCkKKwkJYWNwaV9w
cml2YWN5X3NjcmVlbl9jYWxsX2RzbShhY3BpX2hhbmRsZSwKKwkJCQkJICAgICBDT05ORUNUT1Jf
RFNNX0ZOX1BSSVZBQ1lfRElTQUJMRSk7CisJZWxzZSBpZiAodmFsID09IFBSSVZBQ1lfU0NSRUVO
X0VOQUJMRUQpCisJCWFjcGlfcHJpdmFjeV9zY3JlZW5fY2FsbF9kc20oYWNwaV9oYW5kbGUsCisJ
CQkJCSAgICAgQ09OTkVDVE9SX0RTTV9GTl9QUklWQUNZX0VOQUJMRSk7CisJZWxzZQorCQlEUk1f
V0FSTigiJXM6IENhbm5vdCBzZXQgcHJpdmFjeSBzY3JlZW4gdG8gaW52YWxpZCB2YWwgJXVcbiIs
CisJCQkgZGV2X25hbWUoY29ubmVjdG9yLT5iYXNlLmRldi0+ZGV2KSwgdmFsKTsKK30KKworYm9v
bCBpbnRlbF9wcml2YWN5X3NjcmVlbl9wcmVzZW50KHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNv
bm5lY3RvcikKK3sKKwlhY3BpX2hhbmRsZSBoYW5kbGUgPSBjb25uZWN0b3ItPmFjcGlfaGFuZGxl
OworCisJaWYgKCFoYW5kbGUpCisJCXJldHVybiBmYWxzZTsKKworCWlmICghYWNwaV9jaGVja19k
c20oaGFuZGxlLCAmZHJtX2Nvbm5fZHNtX2d1aWQsCisJCQkgICAgQ09OTkVDVE9SX0RTTV9SRVZJ
RCwKKwkJCSAgICAxIDw8IENPTk5FQ1RPUl9EU01fRk5fUFJJVkFDWV9FTkFCTEUgfAorCQkJICAg
IDEgPDwgQ09OTkVDVE9SX0RTTV9GTl9QUklWQUNZX0RJU0FCTEUpKSB7CisJCURSTV9XQVJOKCIl
czogT2RkLCBjb25uZWN0b3IgQUNQSSBub2RlIGJ1dCBubyBwcml2YWN5IHNjcm4/XG4iLAorCQkJ
IGRldl9uYW1lKGNvbm5lY3Rvci0+YmFzZS5kZXYtPmRldikpOworCQlyZXR1cm4gZmFsc2U7CisJ
fQorCURSTV9ERVZfSU5GTyhjb25uZWN0b3ItPmJhc2UuZGV2LT5kZXYsICJzdXBwb3J0cyBwcml2
YWN5IHNjcmVlblxuIik7CisJcmV0dXJuIHRydWU7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3ByaXZhY3lfc2NyZWVuLmggYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX3ByaXZhY3lfc2NyZWVuLmgKbmV3IGZpbGUgbW9kZSAxMDA2
NDQKaW5kZXggMDAwMDAwMDAwMDAwLi42YWRhMjM0YTIxNjEKLS0tIC9kZXYvbnVsbAorKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3ByaXZhY3lfc2NyZWVuLmgKQEAgLTAs
MCArMSwyNSBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAgT1IgTUlUICov
CisvKgorICogQ29weXJpZ2h0IMKpIDIwMTkgR29vZ2xlIEluYy4KKyAqLworCisjaWZuZGVmIF9f
RFJNX1BSSVZBQ1lfU0NSRUVOX0hfXworI2RlZmluZSBfX0RSTV9QUklWQUNZX1NDUkVFTl9IX18K
KworI2luY2x1ZGUgImludGVsX2Rpc3BsYXlfdHlwZXMuaCIKKworI2lmZGVmIENPTkZJR19BQ1BJ
Citib29sIGludGVsX3ByaXZhY3lfc2NyZWVuX3ByZXNlbnQoc3RydWN0IGludGVsX2Nvbm5lY3Rv
ciAqY29ubmVjdG9yKTsKK3ZvaWQgaW50ZWxfcHJpdmFjeV9zY3JlZW5fc2V0X3ZhbChzdHJ1Y3Qg
aW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IsCisJCQkJICBlbnVtIGludGVsX3ByaXZhY3lfc2Ny
ZWVuX3N0YXR1cyB2YWwpOworI2Vsc2UKK2Jvb2wgaW50ZWxfcHJpdmFjeV9zY3JlZW5fcHJlc2Vu
dChzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IpOworeworCXJldHVybiBmYWxzZTsK
K30KK3ZvaWQgaW50ZWxfcHJpdmFjeV9zY3JlZW5fc2V0X3ZhbChzdHJ1Y3QgaW50ZWxfY29ubmVj
dG9yICpjb25uZWN0b3IsCisJCQkJICBlbnVtIGludGVsX3ByaXZhY3lfc2NyZWVuX3N0YXR1cyB2
YWwpCit7IH0KKyNlbmRpZiAvKiBDT05GSUdfQUNQSSAqLworCisjZW5kaWYgLyogX19EUk1fUFJJ
VkFDWV9TQ1JFRU5fSF9fICovCi0tIAoyLjI0LjAuMzkzLmczNGRjMzQ4ZWFmLWdvb2cKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
