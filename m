Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 98739B414E
	for <lists+dri-devel@lfdr.de>; Mon, 16 Sep 2019 21:45:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A807A6EA68;
	Mon, 16 Sep 2019 19:45:18 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga04.intel.com (mga04.intel.com [192.55.52.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7B3E76EA67;
 Mon, 16 Sep 2019 19:45:17 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 16 Sep 2019 12:45:16 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,513,1559545200"; d="scan'208";a="337762404"
Received: from fmsmsx106.amr.corp.intel.com ([10.18.124.204])
 by orsmga004.jf.intel.com with ESMTP; 16 Sep 2019 12:45:15 -0700
Received: from fmsmsx154.amr.corp.intel.com (10.18.116.70) by
 FMSMSX106.amr.corp.intel.com (10.18.124.204) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Mon, 16 Sep 2019 12:45:15 -0700
Received: from fmsmsx108.amr.corp.intel.com ([169.254.9.205]) by
 FMSMSX154.amr.corp.intel.com ([169.254.6.73]) with mapi id 14.03.0439.000;
 Mon, 16 Sep 2019 12:45:15 -0700
From: "Ruhl, Michael J" <michael.j.ruhl@intel.com>
To: Chris Wilson <chris@chris-wilson.co.uk>, "dri-devel@lists.freedesktop.org"
 <dri-devel@lists.freedesktop.org>
Subject: RE: [PATCH 2/2] drm/mm: Pack allocated/scanned boolean into a bitfield
Thread-Topic: [PATCH 2/2] drm/mm: Pack allocated/scanned boolean into a
 bitfield
Thread-Index: AQHVa/XR7TJ1QATpcU21b1VYmdrMnacutgEQ
Date: Mon, 16 Sep 2019 19:45:14 +0000
Message-ID: <14063C7AD467DE4B82DEDB5C278E8663D3DBA8B8@FMSMSX108.amr.corp.intel.com>
References: <20190915184539.16724-1-chris@chris-wilson.co.uk>
 <20190915184539.16724-2-chris@chris-wilson.co.uk>
In-Reply-To: <20190915184539.16724-2-chris@chris-wilson.co.uk>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ctpclassification: CTP_NT
x-titus-metadata-40: eyJDYXRlZ29yeUxhYmVscyI6IiIsIk1ldGFkYXRhIjp7Im5zIjoiaHR0cDpcL1wvd3d3LnRpdHVzLmNvbVwvbnNcL0ludGVsMyIsImlkIjoiY2ZlNWJiNWQtYjUwOC00MTgwLWI4MjQtMDY1MDJlYzRjYjE3IiwicHJvcHMiOlt7Im4iOiJDVFBDbGFzc2lmaWNhdGlvbiIsInZhbHMiOlt7InZhbHVlIjoiQ1RQX05UIn1dfV19LCJTdWJqZWN0TGFiZWxzIjpbXSwiVE1DVmVyc2lvbiI6IjE3LjEwLjE4MDQuNDkiLCJUcnVzdGVkTGFiZWxIYXNoIjoiTHYxbmxRNERsRjArK1JPVGtMcHhhOUdGcDJuWHg5MlZ4YU9aRXZiMkJlN2tKeXNqMUwza0t6aGtnVDQzSXNRTSJ9
dlp-product: dlpe-windows
dlp-version: 11.2.0.6
dlp-reaction: no-action
x-originating-ip: [10.1.200.107]
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: "intel-gfx@lists.freedesktop.org" <intel-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Pi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+RnJvbTogZHJpLWRldmVsIFttYWlsdG86ZHJp
LWRldmVsLWJvdW5jZXNAbGlzdHMuZnJlZWRlc2t0b3Aub3JnXSBPbiBCZWhhbGYNCj5PZiBDaHJp
cyBXaWxzb24NCj5TZW50OiBTdW5kYXksIFNlcHRlbWJlciAxNSwgMjAxOSAyOjQ2IFBNDQo+VG86
IGRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcNCj5DYzogaW50ZWwtZ2Z4QGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZw0KPlN1YmplY3Q6IFtQQVRDSCAyLzJdIGRybS9tbTogUGFjayBhbGxvY2F0
ZWQvc2Nhbm5lZCBib29sZWFuIGludG8gYSBiaXRmaWVsZA0KPg0KPlRoZSB1bHRlcmlvciBtb3Rp
dmUgdG8gc3dpdGNoaW5nIHRoZSBib29sZWFucyBvdmVyIHRvIGJpdG9wcyBpcyB0bw0KPmFsbG93
IHVzZSBvZiB0aGUgYWxsb2NhdGVkIGZsYWcgYXMgYSBiaXRsb2NrLg0KPg0KPlNpZ25lZC1vZmYt
Ynk6IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPg0KPi0tLQ0KPiBkcml2
ZXJzL2dwdS9kcm0vZHJtX21tLmMgICAgICAgICAgICAgICAgICAgICAgfCAzNiArKysrKysrKysr
Ky0tLS0tLS0tDQo+IC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYyAg
ICB8ICA2ICsrLS0NCj4gZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvdWMvaW50ZWxfdWNfZncuYyAg
ICAgIHwgIDIgKy0NCj4gZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYyAgICAgICAgICAg
ICAgIHwgMTYgKysrKy0tLS0tDQo+IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2V2aWN0
LmMgICAgICAgICB8ICAyICstDQo+IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmMgICAg
ICAgICAgICAgICB8ICAyICstDQo+IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmggICAg
ICAgICAgICAgICB8ICA0ICstLQ0KPiBkcml2ZXJzL2dwdS9kcm0vc2VsZnRlc3RzL3Rlc3QtZHJt
X21tLmMgICAgICAgfCAxNCArKysrLS0tLQ0KPiBkcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9jcnRj
LmMgICAgICAgICAgICAgICAgfCAgMiArLQ0KPiBkcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9odnMu
YyAgICAgICAgICAgICAgICAgfCAgMiArLQ0KPiBkcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9wbGFu
ZS5jICAgICAgICAgICAgICAgfCAgNCArLS0NCj4gaW5jbHVkZS9kcm0vZHJtX21tLmggICAgICAg
ICAgICAgICAgICAgICAgICAgIHwgIDcgKystLQ0KPiAxMiBmaWxlcyBjaGFuZ2VkLCA1MiBpbnNl
cnRpb25zKCspLCA0NSBkZWxldGlvbnMoLSkNCj4NCj5kaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2RybV9tbS5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9tbS5jDQo+aW5kZXggNDU4MWM1Mzg3
MzcyLi4yMTE5NjcwMDZjZWMgMTAwNjQ0DQo+LS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9tbS5j
DQo+KysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9tbS5jDQo+QEAgLTE3NCw3ICsxNzQsNyBAQCBz
dGF0aWMgdm9pZCBkcm1fbW1faW50ZXJ2YWxfdHJlZV9hZGRfbm9kZShzdHJ1Y3QNCj5kcm1fbW1f
bm9kZSAqaG9sZV9ub2RlLA0KPg0KPiAJbm9kZS0+X19zdWJ0cmVlX2xhc3QgPSBMQVNUKG5vZGUp
Ow0KPg0KPi0JaWYgKGhvbGVfbm9kZS0+YWxsb2NhdGVkKSB7DQo+KwlpZiAoZHJtX21tX25vZGVf
YWxsb2NhdGVkKGhvbGVfbm9kZSkpIHsNCj4gCQlyYiA9ICZob2xlX25vZGUtPnJiOw0KPiAJCXdo
aWxlIChyYikgew0KPiAJCQlwYXJlbnQgPSByYl9lbnRyeShyYiwgc3RydWN0IGRybV9tbV9ub2Rl
LCByYik7DQo+QEAgLTQyNCw5ICs0MjQsOSBAQCBpbnQgZHJtX21tX3Jlc2VydmVfbm9kZShzdHJ1
Y3QgZHJtX21tICptbSwNCj5zdHJ1Y3QgZHJtX21tX25vZGUgKm5vZGUpDQo+DQo+IAlub2RlLT5t
bSA9IG1tOw0KPg0KPisJX19zZXRfYml0KERSTV9NTV9OT0RFX0FMTE9DQVRFRF9CSVQsICZub2Rl
LT5mbGFncyk7DQoNCk1heWJlIGEgc2lsbHkgcXVlc3Rpb24ocyksIGJ1dCB5b3UgYXBwZWFyIHRv
IGJlIG1peGluZyBhdG9taWMgYml0IG9wcw0KKGNsZWFyXyBhbmQgdGVzdF8pIHdpdGggbm9uLWF0
b21pYyBiaXQgb3BzIF9feHh4X2JpdCgpLg0KDQpTaG91bGQgdGhhdCBiZSBhIGNvbmNlcm4/ICAg
U2hvdWxkIHRoYXQgYmUgbWVudGlvbiBpbiB0aGUgY29tbWl0Pw0KDQpNaWtlDQoNCg0KPiAJbGlz
dF9hZGQoJm5vZGUtPm5vZGVfbGlzdCwgJmhvbGUtPm5vZGVfbGlzdCk7DQo+IAlkcm1fbW1faW50
ZXJ2YWxfdHJlZV9hZGRfbm9kZShob2xlLCBub2RlKTsNCj4tCW5vZGUtPmFsbG9jYXRlZCA9IHRy
dWU7DQo+IAlub2RlLT5ob2xlX3NpemUgPSAwOw0KPg0KPiAJcm1faG9sZShob2xlKTsNCj5AQCAt
NTQzLDkgKzU0Myw5IEBAIGludCBkcm1fbW1faW5zZXJ0X25vZGVfaW5fcmFuZ2Uoc3RydWN0IGRy
bV9tbSAqDQo+Y29uc3QgbW0sDQo+IAkJbm9kZS0+Y29sb3IgPSBjb2xvcjsNCj4gCQlub2RlLT5o
b2xlX3NpemUgPSAwOw0KPg0KPisJCV9fc2V0X2JpdChEUk1fTU1fTk9ERV9BTExPQ0FURURfQklU
LCAmbm9kZS0+ZmxhZ3MpOw0KPiAJCWxpc3RfYWRkKCZub2RlLT5ub2RlX2xpc3QsICZob2xlLT5u
b2RlX2xpc3QpOw0KPiAJCWRybV9tbV9pbnRlcnZhbF90cmVlX2FkZF9ub2RlKGhvbGUsIG5vZGUp
Ow0KPi0JCW5vZGUtPmFsbG9jYXRlZCA9IHRydWU7DQo+DQo+IAkJcm1faG9sZShob2xlKTsNCj4g
CQlpZiAoYWRqX3N0YXJ0ID4gaG9sZV9zdGFydCkNCj5AQCAtNTYxLDYgKzU2MSwxMSBAQCBpbnQg
ZHJtX21tX2luc2VydF9ub2RlX2luX3JhbmdlKHN0cnVjdCBkcm1fbW0NCj4qIGNvbnN0IG1tLA0K
PiB9DQo+IEVYUE9SVF9TWU1CT0woZHJtX21tX2luc2VydF9ub2RlX2luX3JhbmdlKTsNCj4NCj4r
c3RhdGljIGlubGluZSBib29sIGRybV9tbV9ub2RlX3NjYW5uZWRfYmxvY2soY29uc3Qgc3RydWN0
DQo+ZHJtX21tX25vZGUgKm5vZGUpDQo+K3sNCj4rCXJldHVybiB0ZXN0X2JpdChEUk1fTU1fTk9E
RV9TQ0FOTkVEX0JJVCwgJm5vZGUtPmZsYWdzKTsNCj4rfQ0KPisNCj4gLyoqDQo+ICAqIGRybV9t
bV9yZW1vdmVfbm9kZSAtIFJlbW92ZSBhIG1lbW9yeSBub2RlIGZyb20gdGhlIGFsbG9jYXRvci4N
Cj4gICogQG5vZGU6IGRybV9tbV9ub2RlIHRvIHJlbW92ZQ0KPkBAIC01NzQsOCArNTc5LDggQEAg
dm9pZCBkcm1fbW1fcmVtb3ZlX25vZGUoc3RydWN0IGRybV9tbV9ub2RlDQo+Km5vZGUpDQo+IAlz
dHJ1Y3QgZHJtX21tICptbSA9IG5vZGUtPm1tOw0KPiAJc3RydWN0IGRybV9tbV9ub2RlICpwcmV2
X25vZGU7DQo+DQo+LQlEUk1fTU1fQlVHX09OKCFub2RlLT5hbGxvY2F0ZWQpOw0KPi0JRFJNX01N
X0JVR19PTihub2RlLT5zY2FubmVkX2Jsb2NrKTsNCj4rCURSTV9NTV9CVUdfT04oIWRybV9tbV9u
b2RlX2FsbG9jYXRlZChub2RlKSk7DQo+KwlEUk1fTU1fQlVHX09OKGRybV9tbV9ub2RlX3NjYW5u
ZWRfYmxvY2sobm9kZSkpOw0KPg0KPiAJcHJldl9ub2RlID0gbGlzdF9wcmV2X2VudHJ5KG5vZGUs
IG5vZGVfbGlzdCk7DQo+DQo+QEAgLTU4NCwxMSArNTg5LDEyIEBAIHZvaWQgZHJtX21tX3JlbW92
ZV9ub2RlKHN0cnVjdA0KPmRybV9tbV9ub2RlICpub2RlKQ0KPg0KPiAJZHJtX21tX2ludGVydmFs
X3RyZWVfcmVtb3ZlKG5vZGUsICZtbS0+aW50ZXJ2YWxfdHJlZSk7DQo+IAlsaXN0X2RlbCgmbm9k
ZS0+bm9kZV9saXN0KTsNCj4tCW5vZGUtPmFsbG9jYXRlZCA9IGZhbHNlOw0KPg0KPiAJaWYgKGRy
bV9tbV9ob2xlX2ZvbGxvd3MocHJldl9ub2RlKSkNCj4gCQlybV9ob2xlKHByZXZfbm9kZSk7DQo+
IAlhZGRfaG9sZShwcmV2X25vZGUpOw0KPisNCj4rCWNsZWFyX2JpdF91bmxvY2soRFJNX01NX05P
REVfQUxMT0NBVEVEX0JJVCwgJm5vZGUtPmZsYWdzKTsNCj4gfQ0KPiBFWFBPUlRfU1lNQk9MKGRy
bV9tbV9yZW1vdmVfbm9kZSk7DQo+DQo+QEAgLTYwNSw3ICs2MTEsNyBAQCB2b2lkIGRybV9tbV9y
ZXBsYWNlX25vZGUoc3RydWN0IGRybV9tbV9ub2RlDQo+Km9sZCwgc3RydWN0IGRybV9tbV9ub2Rl
ICpuZXcpDQo+IHsNCj4gCXN0cnVjdCBkcm1fbW0gKm1tID0gb2xkLT5tbTsNCj4NCj4tCURSTV9N
TV9CVUdfT04oIW9sZC0+YWxsb2NhdGVkKTsNCj4rCURSTV9NTV9CVUdfT04oIWRybV9tbV9ub2Rl
X2FsbG9jYXRlZChvbGQpKTsNCj4NCj4gCSpuZXcgPSAqb2xkOw0KPg0KPkBAIC02MjIsOCArNjI4
LDcgQEAgdm9pZCBkcm1fbW1fcmVwbGFjZV9ub2RlKHN0cnVjdCBkcm1fbW1fbm9kZQ0KPipvbGQs
IHN0cnVjdCBkcm1fbW1fbm9kZSAqbmV3KQ0KPiAJCQkJJm1tLT5ob2xlc19hZGRyKTsNCj4gCX0N
Cj4NCj4tCW9sZC0+YWxsb2NhdGVkID0gZmFsc2U7DQo+LQluZXctPmFsbG9jYXRlZCA9IHRydWU7
DQo+KwljbGVhcl9iaXRfdW5sb2NrKERSTV9NTV9OT0RFX0FMTE9DQVRFRF9CSVQsICZvbGQtPmZs
YWdzKTsNCj4gfQ0KPiBFWFBPUlRfU1lNQk9MKGRybV9tbV9yZXBsYWNlX25vZGUpOw0KPg0KPkBA
IC03MzEsOSArNzM2LDkgQEAgYm9vbCBkcm1fbW1fc2Nhbl9hZGRfYmxvY2soc3RydWN0IGRybV9t
bV9zY2FuDQo+KnNjYW4sDQo+IAl1NjQgYWRqX3N0YXJ0LCBhZGpfZW5kOw0KPg0KPiAJRFJNX01N
X0JVR19PTihub2RlLT5tbSAhPSBtbSk7DQo+LQlEUk1fTU1fQlVHX09OKCFub2RlLT5hbGxvY2F0
ZWQpOw0KPi0JRFJNX01NX0JVR19PTihub2RlLT5zY2FubmVkX2Jsb2NrKTsNCj4tCW5vZGUtPnNj
YW5uZWRfYmxvY2sgPSB0cnVlOw0KPisJRFJNX01NX0JVR19PTighZHJtX21tX25vZGVfYWxsb2Nh
dGVkKG5vZGUpKTsNCj4rCURSTV9NTV9CVUdfT04oZHJtX21tX25vZGVfc2Nhbm5lZF9ibG9jayhu
b2RlKSk7DQo+KwlfX3NldF9iaXQoRFJNX01NX05PREVfU0NBTk5FRF9CSVQsICZub2RlLT5mbGFn
cyk7DQo+IAltbS0+c2Nhbl9hY3RpdmUrKzsNCj4NCj4gCS8qIFJlbW92ZSB0aGlzIGJsb2NrIGZy
b20gdGhlIG5vZGVfbGlzdCBzbyB0aGF0IHdlIGVubGFyZ2UgdGhlIGhvbGUNCj5AQCAtODE4LDgg
KzgyMyw3IEBAIGJvb2wgZHJtX21tX3NjYW5fcmVtb3ZlX2Jsb2NrKHN0cnVjdA0KPmRybV9tbV9z
Y2FuICpzY2FuLA0KPiAJc3RydWN0IGRybV9tbV9ub2RlICpwcmV2X25vZGU7DQo+DQo+IAlEUk1f
TU1fQlVHX09OKG5vZGUtPm1tICE9IHNjYW4tPm1tKTsNCj4tCURSTV9NTV9CVUdfT04oIW5vZGUt
PnNjYW5uZWRfYmxvY2spOw0KPi0Jbm9kZS0+c2Nhbm5lZF9ibG9jayA9IGZhbHNlOw0KPisJRFJN
X01NX0JVR19PTighZHJtX21tX25vZGVfc2Nhbm5lZF9ibG9jayhub2RlKSk7DQo+DQo+IAlEUk1f
TU1fQlVHX09OKCFub2RlLT5tbS0+c2Nhbl9hY3RpdmUpOw0KPiAJbm9kZS0+bW0tPnNjYW5fYWN0
aXZlLS07DQo+QEAgLTgzNyw2ICs4NDEsOCBAQCBib29sIGRybV9tbV9zY2FuX3JlbW92ZV9ibG9j
ayhzdHJ1Y3QNCj5kcm1fbW1fc2NhbiAqc2NhbiwNCj4gCQkgICAgICBsaXN0X25leHRfZW50cnko
bm9kZSwgbm9kZV9saXN0KSk7DQo+IAlsaXN0X2FkZCgmbm9kZS0+bm9kZV9saXN0LCAmcHJldl9u
b2RlLT5ub2RlX2xpc3QpOw0KPg0KPisJX19jbGVhcl9iaXQoRFJNX01NX05PREVfU0NBTk5FRF9C
SVQsICZub2RlLT5mbGFncyk7DQo+Kw0KPiAJcmV0dXJuIChub2RlLT5zdGFydCArIG5vZGUtPnNp
emUgPiBzY2FuLT5oaXRfc3RhcnQgJiYNCj4gCQlub2RlLT5zdGFydCA8IHNjYW4tPmhpdF9lbmQp
Ow0KPiB9DQo+QEAgLTkxNyw3ICs5MjMsNyBAQCB2b2lkIGRybV9tbV9pbml0KHN0cnVjdCBkcm1f
bW0gKm1tLCB1NjQgc3RhcnQsDQo+dTY0IHNpemUpDQo+DQo+IAkvKiBDbGV2ZXIgdHJpY2sgdG8g
YXZvaWQgYSBzcGVjaWFsIGNhc2UgaW4gdGhlIGZyZWUgaG9sZSB0cmFja2luZy4gKi8NCj4gCUlO
SVRfTElTVF9IRUFEKCZtbS0+aGVhZF9ub2RlLm5vZGVfbGlzdCk7DQo+LQltbS0+aGVhZF9ub2Rl
LmFsbG9jYXRlZCA9IGZhbHNlOw0KPisJbW0tPmhlYWRfbm9kZS5mbGFncyA9IDA7DQo+IAltbS0+
aGVhZF9ub2RlLm1tID0gbW07DQo+IAltbS0+aGVhZF9ub2RlLnN0YXJ0ID0gc3RhcnQgKyBzaXpl
Ow0KPiAJbW0tPmhlYWRfbm9kZS5zaXplID0gLXNpemU7DQo+ZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMNCj5iL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMNCj5pbmRleCAyN2RiY2I1MDgwNTUuLmMw
NDkxOTlhMWRmNSAxMDA2NDQNCj4tLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fZXhlY2J1ZmZlci5jDQo+KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X2V4ZWNidWZmZXIuYw0KPkBAIC05MDYsNyArOTA2LDcgQEAgc3RhdGljIHZvaWQgcmVsb2NfY2Fj
aGVfaW5pdChzdHJ1Y3QgcmVsb2NfY2FjaGUgKmNhY2hlLA0KPiAJY2FjaGUtPnVzZV82NGJpdF9y
ZWxvYyA9IEhBU182NEJJVF9SRUxPQyhpOTE1KTsNCj4gCWNhY2hlLT5oYXNfZmVuY2UgPSBjYWNo
ZS0+Z2VuIDwgNDsNCj4gCWNhY2hlLT5uZWVkc191bmZlbmNlZCA9IElOVEVMX0lORk8oaTkxNSkt
DQo+PnVuZmVuY2VkX25lZWRzX2FsaWdubWVudDsNCj4tCWNhY2hlLT5ub2RlLmFsbG9jYXRlZCA9
IGZhbHNlOw0KPisJY2FjaGUtPm5vZGUuZmxhZ3MgPSAwOw0KPiAJY2FjaGUtPmNlID0gTlVMTDsN
Cj4gCWNhY2hlLT5ycSA9IE5VTEw7DQo+IAljYWNoZS0+cnFfc2l6ZSA9IDA7DQo+QEAgLTk2OCw3
ICs5NjgsNyBAQCBzdGF0aWMgdm9pZCByZWxvY19jYWNoZV9yZXNldChzdHJ1Y3QgcmVsb2NfY2Fj
aGUNCj4qY2FjaGUpDQo+IAkJaW50ZWxfZ3RfZmx1c2hfZ2d0dF93cml0ZXMoZ2d0dC0+dm0uZ3Qp
Ow0KPiAJCWlvX21hcHBpbmdfdW5tYXBfYXRvbWljKCh2b2lkIF9faW9tZW0gKil2YWRkcik7DQo+
DQo+LQkJaWYgKGNhY2hlLT5ub2RlLmFsbG9jYXRlZCkgew0KPisJCWlmIChkcm1fbW1fbm9kZV9h
bGxvY2F0ZWQoJmNhY2hlLT5ub2RlKSkgew0KPiAJCQlnZ3R0LT52bS5jbGVhcl9yYW5nZSgmZ2d0
dC0+dm0sDQo+IAkJCQkJICAgICBjYWNoZS0+bm9kZS5zdGFydCwNCj4gCQkJCQkgICAgIGNhY2hl
LT5ub2RlLnNpemUpOw0KPkBAIC0xMDYxLDcgKzEwNjEsNyBAQCBzdGF0aWMgdm9pZCAqcmVsb2Nf
aW9tYXAoc3RydWN0DQo+ZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLA0KPiAJfQ0KPg0KPiAJb2Zm
c2V0ID0gY2FjaGUtPm5vZGUuc3RhcnQ7DQo+LQlpZiAoY2FjaGUtPm5vZGUuYWxsb2NhdGVkKSB7
DQo+KwlpZiAoZHJtX21tX25vZGVfYWxsb2NhdGVkKCZjYWNoZS0+bm9kZSkpIHsNCj4gCQlnZ3R0
LT52bS5pbnNlcnRfcGFnZSgmZ2d0dC0+dm0sDQo+IAkJCQkgICAgIGk5MTVfZ2VtX29iamVjdF9n
ZXRfZG1hX2FkZHJlc3Mob2JqLA0KPnBhZ2UpLA0KPiAJCQkJICAgICBvZmZzZXQsIEk5MTVfQ0FD
SEVfTk9ORSwgMCk7DQo+ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2lu
dGVsX3VjX2Z3LmMNCj5iL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L3VjL2ludGVsX3VjX2Z3LmMN
Cj5pbmRleCAyOTZhODI2MDNiZTAuLjA3ZmM2ZjI4YWJjZCAxMDA2NDQNCj4tLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9ndC91Yy9pbnRlbF91Y19mdy5jDQo+KysrIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3QvdWMvaW50ZWxfdWNfZncuYw0KPkBAIC00MDEsNyArNDAxLDcgQEAgc3RhdGljIHUz
MiB1Y19md19nZ3R0X29mZnNldChzdHJ1Y3QgaW50ZWxfdWNfZncNCj4qdWNfZncsIHN0cnVjdCBp
OTE1X2dndHQgKmdndHQpDQo+IHsNCj4gCXN0cnVjdCBkcm1fbW1fbm9kZSAqbm9kZSA9ICZnZ3R0
LT51Y19mdzsNCj4NCj4tCUdFTV9CVUdfT04oIW5vZGUtPmFsbG9jYXRlZCk7DQo+KwlHRU1fQlVH
X09OKCFkcm1fbW1fbm9kZV9hbGxvY2F0ZWQobm9kZSkpOw0KPiAJR0VNX0JVR19PTih1cHBlcl8z
Ml9iaXRzKG5vZGUtPnN0YXJ0KSk7DQo+IAlHRU1fQlVHX09OKHVwcGVyXzMyX2JpdHMobm9kZS0+
c3RhcnQgKyBub2RlLT5zaXplIC0gMSkpOw0KPg0KPmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dlbS5jDQo+Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jDQo+
aW5kZXggMmRhOTU0NGZhOWE0Li5iOGY3ZmUzMTFiMGEgMTAwNjQ0DQo+LS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvaTkxNV9nZW0uYw0KPisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
Z2VtLmMNCj5AQCAtMzUxLDEyICszNTEsMTIgQEAgaTkxNV9nZW1fZ3R0X3ByZWFkKHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0DQo+Km9iaiwNCj4gCQkJCQkgICAgICAgUElOX05PRVZJQ1QpOw0K
PiAJaWYgKCFJU19FUlIodm1hKSkgew0KPiAJCW5vZGUuc3RhcnQgPSBpOTE1X2dndHRfb2Zmc2V0
KHZtYSk7DQo+LQkJbm9kZS5hbGxvY2F0ZWQgPSBmYWxzZTsNCj4rCQlub2RlLmZsYWdzID0gMDsN
Cj4gCX0gZWxzZSB7DQo+IAkJcmV0ID0gaW5zZXJ0X21hcHBhYmxlX25vZGUoZ2d0dCwgJm5vZGUs
IFBBR0VfU0laRSk7DQo+IAkJaWYgKHJldCkNCj4gCQkJZ290byBvdXRfdW5sb2NrOw0KPi0JCUdF
TV9CVUdfT04oIW5vZGUuYWxsb2NhdGVkKTsNCj4rCQlHRU1fQlVHX09OKCFkcm1fbW1fbm9kZV9h
bGxvY2F0ZWQoJm5vZGUpKTsNCj4gCX0NCj4NCj4gCW11dGV4X3VubG9jaygmaTkxNS0+ZHJtLnN0
cnVjdF9tdXRleCk7DQo+QEAgLTM5Myw3ICszOTMsNyBAQCBpOTE1X2dlbV9ndHRfcHJlYWQoc3Ry
dWN0IGRybV9pOTE1X2dlbV9vYmplY3QNCj4qb2JqLA0KPiAJCXVuc2lnbmVkIHBhZ2Vfb2Zmc2V0
ID0gb2Zmc2V0X2luX3BhZ2Uob2Zmc2V0KTsNCj4gCQl1bnNpZ25lZCBwYWdlX2xlbmd0aCA9IFBB
R0VfU0laRSAtIHBhZ2Vfb2Zmc2V0Ow0KPiAJCXBhZ2VfbGVuZ3RoID0gcmVtYWluIDwgcGFnZV9s
ZW5ndGggPyByZW1haW4gOiBwYWdlX2xlbmd0aDsNCj4tCQlpZiAobm9kZS5hbGxvY2F0ZWQpIHsN
Cj4rCQlpZiAoZHJtX21tX25vZGVfYWxsb2NhdGVkKCZub2RlKSkgew0KPiAJCQlnZ3R0LT52bS5p
bnNlcnRfcGFnZSgmZ2d0dC0+dm0sDQo+DQo+aTkxNV9nZW1fb2JqZWN0X2dldF9kbWFfYWRkcmVz
cyhvYmosIG9mZnNldCA+PiBQQUdFX1NISUZUKSwNCj4gCQkJCQkgICAgIG5vZGUuc3RhcnQsIEk5
MTVfQ0FDSEVfTk9ORSwgMCk7DQo+QEAgLTQxNSw3ICs0MTUsNyBAQCBpOTE1X2dlbV9ndHRfcHJl
YWQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QNCj4qb2JqLA0KPiAJaTkxNV9nZW1fb2JqZWN0
X3VubG9ja19mZW5jZShvYmosIGZlbmNlKTsNCj4gb3V0X3VucGluOg0KPiAJbXV0ZXhfbG9jaygm
aTkxNS0+ZHJtLnN0cnVjdF9tdXRleCk7DQo+LQlpZiAobm9kZS5hbGxvY2F0ZWQpIHsNCj4rCWlm
IChkcm1fbW1fbm9kZV9hbGxvY2F0ZWQoJm5vZGUpKSB7DQo+IAkJZ2d0dC0+dm0uY2xlYXJfcmFu
Z2UoJmdndHQtPnZtLCBub2RlLnN0YXJ0LCBub2RlLnNpemUpOw0KPiAJCXJlbW92ZV9tYXBwYWJs
ZV9ub2RlKCZub2RlKTsNCj4gCX0gZWxzZSB7DQo+QEAgLTU2MSwxMiArNTYxLDEyIEBAIGk5MTVf
Z2VtX2d0dF9wd3JpdGVfZmFzdChzdHJ1Y3QNCj5kcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosDQo+
IAkJCQkJICAgICAgIFBJTl9OT0VWSUNUKTsNCj4gCWlmICghSVNfRVJSKHZtYSkpIHsNCj4gCQlu
b2RlLnN0YXJ0ID0gaTkxNV9nZ3R0X29mZnNldCh2bWEpOw0KPi0JCW5vZGUuYWxsb2NhdGVkID0g
ZmFsc2U7DQo+KwkJbm9kZS5mbGFncyA9IDA7DQo+IAl9IGVsc2Ugew0KPiAJCXJldCA9IGluc2Vy
dF9tYXBwYWJsZV9ub2RlKGdndHQsICZub2RlLCBQQUdFX1NJWkUpOw0KPiAJCWlmIChyZXQpDQo+
IAkJCWdvdG8gb3V0X3JwbTsNCj4tCQlHRU1fQlVHX09OKCFub2RlLmFsbG9jYXRlZCk7DQo+KwkJ
R0VNX0JVR19PTighZHJtX21tX25vZGVfYWxsb2NhdGVkKCZub2RlKSk7DQo+IAl9DQo+DQo+IAlt
dXRleF91bmxvY2soJmk5MTUtPmRybS5zdHJ1Y3RfbXV0ZXgpOw0KPkBAIC02MDQsNyArNjA0LDcg
QEAgaTkxNV9nZW1fZ3R0X3B3cml0ZV9mYXN0KHN0cnVjdA0KPmRybV9pOTE1X2dlbV9vYmplY3Qg
Km9iaiwNCj4gCQl1bnNpZ25lZCBpbnQgcGFnZV9vZmZzZXQgPSBvZmZzZXRfaW5fcGFnZShvZmZz
ZXQpOw0KPiAJCXVuc2lnbmVkIGludCBwYWdlX2xlbmd0aCA9IFBBR0VfU0laRSAtIHBhZ2Vfb2Zm
c2V0Ow0KPiAJCXBhZ2VfbGVuZ3RoID0gcmVtYWluIDwgcGFnZV9sZW5ndGggPyByZW1haW4gOiBw
YWdlX2xlbmd0aDsNCj4tCQlpZiAobm9kZS5hbGxvY2F0ZWQpIHsNCj4rCQlpZiAoZHJtX21tX25v
ZGVfYWxsb2NhdGVkKCZub2RlKSkgew0KPiAJCQkvKiBmbHVzaCB0aGUgd3JpdGUgYmVmb3JlIHdl
IG1vZGlmeSB0aGUgR0dUVCAqLw0KPiAJCQlpbnRlbF9ndF9mbHVzaF9nZ3R0X3dyaXRlcyhnZ3R0
LT52bS5ndCk7DQo+IAkJCWdndHQtPnZtLmluc2VydF9wYWdlKCZnZ3R0LT52bSwNCj5AQCAtNjM2
LDcgKzYzNiw3IEBAIGk5MTVfZ2VtX2d0dF9wd3JpdGVfZmFzdChzdHJ1Y3QNCj5kcm1faTkxNV9n
ZW1fb2JqZWN0ICpvYmosDQo+IG91dF91bnBpbjoNCj4gCW11dGV4X2xvY2soJmk5MTUtPmRybS5z
dHJ1Y3RfbXV0ZXgpOw0KPiAJaW50ZWxfZ3RfZmx1c2hfZ2d0dF93cml0ZXMoZ2d0dC0+dm0uZ3Qp
Ow0KPi0JaWYgKG5vZGUuYWxsb2NhdGVkKSB7DQo+KwlpZiAoZHJtX21tX25vZGVfYWxsb2NhdGVk
KCZub2RlKSkgew0KPiAJCWdndHQtPnZtLmNsZWFyX3JhbmdlKCZnZ3R0LT52bSwgbm9kZS5zdGFy
dCwgbm9kZS5zaXplKTsNCj4gCQlyZW1vdmVfbWFwcGFibGVfbm9kZSgmbm9kZSk7DQo+IAl9IGVs
c2Ugew0KPmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ldmljdC5j
DQo+Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ldmljdC5jDQo+aW5kZXggZTc2Yzlk
YTk5OTJkLi44YzFlMDRmNDAyYmMgMTAwNjQ0DQo+LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aTkxNV9nZW1fZXZpY3QuYw0KPisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2V2
aWN0LmMNCj5AQCAtMjk5LDcgKzI5OSw3IEBAIGludCBpOTE1X2dlbV9ldmljdF9mb3Jfbm9kZShz
dHJ1Y3QNCj5pOTE1X2FkZHJlc3Nfc3BhY2UgKnZtLA0KPiAJCQlicmVhazsNCj4gCQl9DQo+DQo+
LQkJR0VNX0JVR19PTighbm9kZS0+YWxsb2NhdGVkKTsNCj4rCQlHRU1fQlVHX09OKCFkcm1fbW1f
bm9kZV9hbGxvY2F0ZWQobm9kZSkpOw0KPiAJCXZtYSA9IGNvbnRhaW5lcl9vZihub2RlLCB0eXBl
b2YoKnZtYSksIG5vZGUpOw0KPg0KPiAJCS8qIElmIHdlIGFyZSB1c2luZyBjb2xvcmluZyB0byBp
bnNlcnQgZ3VhcmQgcGFnZXMgYmV0d2Vlbg0KPmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X3ZtYS5jDQo+Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jDQo+aW5k
ZXggNDExMDQ3ZDZhOTA5Li5kMTA2MTQwOTFiYjkgMTAwNjQ0DQo+LS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvaTkxNV92bWEuYw0KPisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1h
LmMNCj5AQCAtNzk1LDcgKzc5NSw3IEBAIHZvaWQgaTkxNV92bWFfcmVvcGVuKHN0cnVjdCBpOTE1
X3ZtYSAqdm1hKQ0KPg0KPiBzdGF0aWMgdm9pZCBfX2k5MTVfdm1hX2Rlc3Ryb3koc3RydWN0IGk5
MTVfdm1hICp2bWEpDQo+IHsNCj4tCUdFTV9CVUdfT04odm1hLT5ub2RlLmFsbG9jYXRlZCk7DQo+
KwlHRU1fQlVHX09OKGRybV9tbV9ub2RlX2FsbG9jYXRlZCgmdm1hLT5ub2RlKSk7DQo+IAlHRU1f
QlVHX09OKHZtYS0+ZmVuY2UpOw0KPg0KPiAJbXV0ZXhfbG9jaygmdm1hLT52bS0+bXV0ZXgpOw0K
PmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5oDQo+Yi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5oDQo+aW5kZXggOGJjYjU4MTJjNDQ2Li5lNDliMTk5Zjdk
ZTcgMTAwNjQ0DQo+LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV92bWEuaA0KPisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmgNCj5AQCAtMjI4LDcgKzIyOCw3IEBAIHN0
YXRpYyBpbmxpbmUgYm9vbCBpOTE1X3ZtYV9pc19jbG9zZWQoY29uc3Qgc3RydWN0DQo+aTkxNV92
bWEgKnZtYSkNCj4gc3RhdGljIGlubGluZSB1MzIgaTkxNV9nZ3R0X29mZnNldChjb25zdCBzdHJ1
Y3QgaTkxNV92bWEgKnZtYSkNCj4gew0KPiAJR0VNX0JVR19PTighaTkxNV92bWFfaXNfZ2d0dCh2
bWEpKTsNCj4tCUdFTV9CVUdfT04oIXZtYS0+bm9kZS5hbGxvY2F0ZWQpOw0KPisJR0VNX0JVR19P
TighZHJtX21tX25vZGVfYWxsb2NhdGVkKCZ2bWEtPm5vZGUpKTsNCj4gCUdFTV9CVUdfT04odXBw
ZXJfMzJfYml0cyh2bWEtPm5vZGUuc3RhcnQpKTsNCj4gCUdFTV9CVUdfT04odXBwZXJfMzJfYml0
cyh2bWEtPm5vZGUuc3RhcnQgKyB2bWEtPm5vZGUuc2l6ZSAtDQo+MSkpOw0KPiAJcmV0dXJuIGxv
d2VyXzMyX2JpdHModm1hLT5ub2RlLnN0YXJ0KTsNCj5AQCAtMzkwLDcgKzM5MCw3IEBAIHN0YXRp
YyBpbmxpbmUgYm9vbCBpOTE1X3ZtYV9pc19ib3VuZChjb25zdCBzdHJ1Y3QNCj5pOTE1X3ZtYSAq
dm1hLA0KPiBzdGF0aWMgaW5saW5lIGJvb2wgaTkxNV9ub2RlX2NvbG9yX2RpZmZlcnMoY29uc3Qg
c3RydWN0IGRybV9tbV9ub2RlDQo+Km5vZGUsDQo+IAkJCQkJICAgdW5zaWduZWQgbG9uZyBjb2xv
cikNCj4gew0KPi0JcmV0dXJuIG5vZGUtPmFsbG9jYXRlZCAmJiBub2RlLT5jb2xvciAhPSBjb2xv
cjsNCj4rCXJldHVybiBkcm1fbW1fbm9kZV9hbGxvY2F0ZWQobm9kZSkgJiYgbm9kZS0+Y29sb3Ig
IT0gY29sb3I7DQo+IH0NCj4NCj4gLyoqDQo+ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9z
ZWxmdGVzdHMvdGVzdC1kcm1fbW0uYw0KPmIvZHJpdmVycy9ncHUvZHJtL3NlbGZ0ZXN0cy90ZXN0
LWRybV9tbS5jDQo+aW5kZXggMzg4Zjk4NDRmNGJhLi45YWFiZTgyZGNkM2EgMTAwNjQ0DQo+LS0t
IGEvZHJpdmVycy9ncHUvZHJtL3NlbGZ0ZXN0cy90ZXN0LWRybV9tbS5jDQo+KysrIGIvZHJpdmVy
cy9ncHUvZHJtL3NlbGZ0ZXN0cy90ZXN0LWRybV9tbS5jDQo+QEAgLTg1NCw3ICs4NTQsNyBAQCBz
dGF0aWMgYm9vbCBhc3NlcnRfY29udGlndW91c19pbl9yYW5nZShzdHJ1Y3QNCj5kcm1fbW0gKm1t
LA0KPg0KPiAJaWYgKHN0YXJ0ID4gMCkgew0KPiAJCW5vZGUgPSBfX2RybV9tbV9pbnRlcnZhbF9m
aXJzdChtbSwgMCwgc3RhcnQgLSAxKTsNCj4tCQlpZiAobm9kZS0+YWxsb2NhdGVkKSB7DQo+KwkJ
aWYgKGRybV9tbV9ub2RlX2FsbG9jYXRlZChub2RlKSkgew0KPiAJCQlwcl9lcnIoIm5vZGUgYmVm
b3JlIHN0YXJ0OiBub2RlPSVsbHgrJWxsdSwNCj5zdGFydD0lbGx4XG4iLA0KPiAJCQkgICAgICAg
bm9kZS0+c3RhcnQsIG5vZGUtPnNpemUsIHN0YXJ0KTsNCj4gCQkJcmV0dXJuIGZhbHNlOw0KPkBA
IC04NjMsNyArODYzLDcgQEAgc3RhdGljIGJvb2wgYXNzZXJ0X2NvbnRpZ3VvdXNfaW5fcmFuZ2Uo
c3RydWN0DQo+ZHJtX21tICptbSwNCj4NCj4gCWlmIChlbmQgPCBVNjRfTUFYKSB7DQo+IAkJbm9k
ZSA9IF9fZHJtX21tX2ludGVydmFsX2ZpcnN0KG1tLCBlbmQsIFU2NF9NQVgpOw0KPi0JCWlmIChu
b2RlLT5hbGxvY2F0ZWQpIHsNCj4rCQlpZiAoZHJtX21tX25vZGVfYWxsb2NhdGVkKG5vZGUpKSB7
DQo+IAkJCXByX2Vycigibm9kZSBhZnRlciBlbmQ6IG5vZGU9JWxseCslbGx1LA0KPmVuZD0lbGx4
XG4iLA0KPiAJCQkgICAgICAgbm9kZS0+c3RhcnQsIG5vZGUtPnNpemUsIGVuZCk7DQo+IAkJCXJl
dHVybiBmYWxzZTsNCj5AQCAtMTE1NiwxMiArMTE1NiwxMiBAQCBzdGF0aWMgdm9pZCBzaG93X2hv
bGVzKGNvbnN0IHN0cnVjdCBkcm1fbW0NCj4qbW0sIGludCBjb3VudCkNCj4gCQlzdHJ1Y3QgZHJt
X21tX25vZGUgKm5leHQgPSBsaXN0X25leHRfZW50cnkoaG9sZSwNCj5ub2RlX2xpc3QpOw0KPiAJ
CWNvbnN0IGNoYXIgKm5vZGUxID0gTlVMTCwgKm5vZGUyID0gTlVMTDsNCj4NCj4tCQlpZiAoaG9s
ZS0+YWxsb2NhdGVkKQ0KPisJCWlmIChkcm1fbW1fbm9kZV9hbGxvY2F0ZWQoaG9sZSkpDQo+IAkJ
CW5vZGUxID0ga2FzcHJpbnRmKEdGUF9LRVJORUwsDQo+IAkJCQkJICAiWyVsbHggKyAlbGxkLCBj
b2xvcj0lbGRdLCAiLA0KPiAJCQkJCSAgaG9sZS0+c3RhcnQsIGhvbGUtPnNpemUsIGhvbGUtPmNv
bG9yKTsNCj4NCj4tCQlpZiAobmV4dC0+YWxsb2NhdGVkKQ0KPisJCWlmIChkcm1fbW1fbm9kZV9h
bGxvY2F0ZWQobmV4dCkpDQo+IAkJCW5vZGUyID0ga2FzcHJpbnRmKEdGUF9LRVJORUwsDQo+IAkJ
CQkJICAiLCBbJWxseCArICVsbGQsIGNvbG9yPSVsZF0iLA0KPiAJCQkJCSAgbmV4dC0+c3RhcnQs
IG5leHQtPnNpemUsIG5leHQtPmNvbG9yKTsNCj5AQCAtMTkwMCwxOCArMTkwMCwxOCBAQCBzdGF0
aWMgdm9pZCBzZXBhcmF0ZV9hZGphY2VudF9jb2xvcnMoY29uc3Qgc3RydWN0DQo+ZHJtX21tX25v
ZGUgKm5vZGUsDQo+IAkJCQkgICAgIHU2NCAqc3RhcnQsDQo+IAkJCQkgICAgIHU2NCAqZW5kKQ0K
PiB7DQo+LQlpZiAobm9kZS0+YWxsb2NhdGVkICYmIG5vZGUtPmNvbG9yICE9IGNvbG9yKQ0KPisJ
aWYgKGRybV9tbV9ub2RlX2FsbG9jYXRlZChub2RlKSAmJiBub2RlLT5jb2xvciAhPSBjb2xvcikN
Cj4gCQkrKypzdGFydDsNCj4NCj4gCW5vZGUgPSBsaXN0X25leHRfZW50cnkobm9kZSwgbm9kZV9s
aXN0KTsNCj4tCWlmIChub2RlLT5hbGxvY2F0ZWQgJiYgbm9kZS0+Y29sb3IgIT0gY29sb3IpDQo+
KwlpZiAoZHJtX21tX25vZGVfYWxsb2NhdGVkKG5vZGUpICYmIG5vZGUtPmNvbG9yICE9IGNvbG9y
KQ0KPiAJCS0tKmVuZDsNCj4gfQ0KPg0KPiBzdGF0aWMgYm9vbCBjb2xvcnNfYWJ1dHQoY29uc3Qg
c3RydWN0IGRybV9tbV9ub2RlICpub2RlKQ0KPiB7DQo+IAlpZiAoIWRybV9tbV9ob2xlX2ZvbGxv
d3Mobm9kZSkgJiYNCj4tCSAgICBsaXN0X25leHRfZW50cnkobm9kZSwgbm9kZV9saXN0KS0+YWxs
b2NhdGVkKSB7DQo+KwkgICAgZHJtX21tX25vZGVfYWxsb2NhdGVkKGxpc3RfbmV4dF9lbnRyeShu
b2RlLCBub2RlX2xpc3QpKSkgew0KPiAJCXByX2VycigiY29sb3JzIGFidXR0OyAlbGQgWyVsbHgg
KyAlbGx4XSBpcyBuZXh0IHRvICVsZCBbJWxseCArDQo+JWxseF0hXG4iLA0KPiAJCSAgICAgICBu
b2RlLT5jb2xvciwgbm9kZS0+c3RhcnQsIG5vZGUtPnNpemUsDQo+IAkJICAgICAgIGxpc3RfbmV4
dF9lbnRyeShub2RlLCBub2RlX2xpc3QpLT5jb2xvciwNCj5kaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3ZjNC92YzRfY3J0Yy5jIGIvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfY3J0Yy5jDQo+
aW5kZXggZjFmMGE3Yzg3NzcxLi5iMDBlMjBmNWNlMDUgMTAwNjQ0DQo+LS0tIGEvZHJpdmVycy9n
cHUvZHJtL3ZjNC92YzRfY3J0Yy5jDQo+KysrIGIvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfY3J0
Yy5jDQo+QEAgLTk5NCw3ICs5OTQsNyBAQCBzdGF0aWMgdm9pZCB2YzRfY3J0Y19kZXN0cm95X3N0
YXRlKHN0cnVjdCBkcm1fY3J0Yw0KPipjcnRjLA0KPiAJc3RydWN0IHZjNF9kZXYgKnZjNCA9IHRv
X3ZjNF9kZXYoY3J0Yy0+ZGV2KTsNCj4gCXN0cnVjdCB2YzRfY3J0Y19zdGF0ZSAqdmM0X3N0YXRl
ID0gdG9fdmM0X2NydGNfc3RhdGUoc3RhdGUpOw0KPg0KPi0JaWYgKHZjNF9zdGF0ZS0+bW0uYWxs
b2NhdGVkKSB7DQo+KwlpZiAoZHJtX21tX25vZGVfYWxsb2NhdGVkKCZ2YzRfc3RhdGUtPm1tKSkg
ew0KPiAJCXVuc2lnbmVkIGxvbmcgZmxhZ3M7DQo+DQo+IAkJc3Bpbl9sb2NrX2lycXNhdmUoJnZj
NC0+aHZzLT5tbV9sb2NrLCBmbGFncyk7DQo+ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92
YzQvdmM0X2h2cy5jIGIvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfaHZzLmMNCj5pbmRleCA5OTM2
YjE1ZDBiZjEuLjVhNDM2NTlkYTMxOSAxMDA2NDQNCj4tLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmM0
L3ZjNF9odnMuYw0KPisrKyBiL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2h2cy5jDQo+QEAgLTMx
NSw3ICszMTUsNyBAQCBzdGF0aWMgdm9pZCB2YzRfaHZzX3VuYmluZChzdHJ1Y3QgZGV2aWNlICpk
ZXYsIHN0cnVjdA0KPmRldmljZSAqbWFzdGVyLA0KPiAJc3RydWN0IGRybV9kZXZpY2UgKmRybSA9
IGRldl9nZXRfZHJ2ZGF0YShtYXN0ZXIpOw0KPiAJc3RydWN0IHZjNF9kZXYgKnZjNCA9IGRybS0+
ZGV2X3ByaXZhdGU7DQo+DQo+LQlpZiAodmM0LT5odnMtPm1pdGNoZWxsX25ldHJhdmFsaV9maWx0
ZXIuYWxsb2NhdGVkKQ0KPisJaWYgKGRybV9tbV9ub2RlX2FsbG9jYXRlZCgmdmM0LT5odnMtPm1p
dGNoZWxsX25ldHJhdmFsaV9maWx0ZXIpKQ0KPiAJCWRybV9tbV9yZW1vdmVfbm9kZSgmdmM0LT5o
dnMtDQo+Pm1pdGNoZWxsX25ldHJhdmFsaV9maWx0ZXIpOw0KPg0KPiAJZHJtX21tX3Rha2Vkb3du
KCZ2YzQtPmh2cy0+ZGxpc3RfbW0pOw0KPmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmM0
L3ZjNF9wbGFuZS5jDQo+Yi9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9wbGFuZS5jDQo+aW5kZXgg
NWU1ZjkwODEwYWNhLi40OTM0MTI3ZjBkNzYgMTAwNjQ0DQo+LS0tIGEvZHJpdmVycy9ncHUvZHJt
L3ZjNC92YzRfcGxhbmUuYw0KPisrKyBiL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X3BsYW5lLmMN
Cj5AQCAtMTc4LDcgKzE3OCw3IEBAIHN0YXRpYyB2b2lkIHZjNF9wbGFuZV9kZXN0cm95X3N0YXRl
KHN0cnVjdCBkcm1fcGxhbmUNCj4qcGxhbmUsDQo+IAlzdHJ1Y3QgdmM0X2RldiAqdmM0ID0gdG9f
dmM0X2RldihwbGFuZS0+ZGV2KTsNCj4gCXN0cnVjdCB2YzRfcGxhbmVfc3RhdGUgKnZjNF9zdGF0
ZSA9IHRvX3ZjNF9wbGFuZV9zdGF0ZShzdGF0ZSk7DQo+DQo+LQlpZiAodmM0X3N0YXRlLT5sYm0u
YWxsb2NhdGVkKSB7DQo+KwlpZiAoZHJtX21tX25vZGVfYWxsb2NhdGVkKCZ2YzRfc3RhdGUtPmxi
bSkpIHsNCj4gCQl1bnNpZ25lZCBsb25nIGlycWZsYWdzOw0KPg0KPiAJCXNwaW5fbG9ja19pcnFz
YXZlKCZ2YzQtPmh2cy0+bW1fbG9jaywgaXJxZmxhZ3MpOw0KPkBAIC01NTcsNyArNTU3LDcgQEAg
c3RhdGljIGludCB2YzRfcGxhbmVfYWxsb2NhdGVfbGJtKHN0cnVjdA0KPmRybV9wbGFuZV9zdGF0
ZSAqc3RhdGUpDQo+IAkvKiBBbGxvY2F0ZSB0aGUgTEJNIG1lbW9yeSB0aGF0IHRoZSBIVlMgd2ls
bCB1c2UgZm9yIHRlbXBvcmFyeQ0KPiAJICogc3RvcmFnZSBkdWUgdG8gb3VyIHNjYWxpbmcvZm9y
bWF0IGNvbnZlcnNpb24uDQo+IAkgKi8NCj4tCWlmICghdmM0X3N0YXRlLT5sYm0uYWxsb2NhdGVk
KSB7DQo+KwlpZiAoIWRybV9tbV9ub2RlX2FsbG9jYXRlZCgmdmM0X3N0YXRlLT5sYm0pKSB7DQo+
IAkJaW50IHJldDsNCj4NCj4gCQlzcGluX2xvY2tfaXJxc2F2ZSgmdmM0LT5odnMtPm1tX2xvY2ss
IGlycWZsYWdzKTsNCj5kaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX21tLmggYi9pbmNsdWRl
L2RybS9kcm1fbW0uaA0KPmluZGV4IDJjM2JiYjQzYzdkMS4uZDc5MzljMDU0MjU5IDEwMDY0NA0K
Pi0tLSBhL2luY2x1ZGUvZHJtL2RybV9tbS5oDQo+KysrIGIvaW5jbHVkZS9kcm0vZHJtX21tLmgN
Cj5AQCAtMTY4LDggKzE2OCw5IEBAIHN0cnVjdCBkcm1fbW1fbm9kZSB7DQo+IAlzdHJ1Y3QgcmJf
bm9kZSByYl9ob2xlX2FkZHI7DQo+IAl1NjQgX19zdWJ0cmVlX2xhc3Q7DQo+IAl1NjQgaG9sZV9z
aXplOw0KPi0JYm9vbCBhbGxvY2F0ZWQgOiAxOw0KPi0JYm9vbCBzY2FubmVkX2Jsb2NrIDogMTsN
Cj4rCXVuc2lnbmVkIGxvbmcgZmxhZ3M7DQo+KyNkZWZpbmUgRFJNX01NX05PREVfQUxMT0NBVEVE
X0JJVAkwDQo+KyNkZWZpbmUgRFJNX01NX05PREVfU0NBTk5FRF9CSVQJCTENCj4gI2lmZGVmIENP
TkZJR19EUk1fREVCVUdfTU0NCj4gCWRlcG90X3N0YWNrX2hhbmRsZV90IHN0YWNrOw0KPiAjZW5k
aWYNCj5AQCAtMjUzLDcgKzI1NCw3IEBAIHN0cnVjdCBkcm1fbW1fc2NhbiB7DQo+ICAqLw0KPiBz
dGF0aWMgaW5saW5lIGJvb2wgZHJtX21tX25vZGVfYWxsb2NhdGVkKGNvbnN0IHN0cnVjdCBkcm1f
bW1fbm9kZQ0KPipub2RlKQ0KPiB7DQo+LQlyZXR1cm4gbm9kZS0+YWxsb2NhdGVkOw0KPisJcmV0
dXJuIHRlc3RfYml0KERSTV9NTV9OT0RFX0FMTE9DQVRFRF9CSVQsICZub2RlLT5mbGFncyk7DQo+
IH0NCj4NCj4gLyoqDQo+LS0NCj4yLjIzLjANCj4NCj5fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXw0KPmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QNCj5kcmktZGV2
ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnDQo+aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwNCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2RyaS1kZXZlbA==
