Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3A4CC10FB81
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 11:14:49 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EC1AB6E466;
	Tue,  3 Dec 2019 10:14:46 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D66216E466
 for <dri-devel@lists.freedesktop.org>; Tue,  3 Dec 2019 10:14:45 +0000 (UTC)
Received: from pendragon.ideasonboard.com (81-175-216-236.bb.dnainternet.fi
 [81.175.216.236])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 6D1B2309;
 Tue,  3 Dec 2019 11:14:43 +0100 (CET)
Date: Tue, 3 Dec 2019 12:14:36 +0200
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Boris Brezillon <boris.brezillon@collabora.com>
Subject: Re: [PATCH v3 16/21] drm/bridge: lvds-encoder: Implement basic bus
 format negotiation
Message-ID: <20191203101436.GN4730@pendragon.ideasonboard.com>
References: <20191023154512.9762-1-boris.brezillon@collabora.com>
 <20191023154512.9762-17-boris.brezillon@collabora.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191023154512.9762-17-boris.brezillon@collabora.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1575368083;
 bh=k1EcPsevo+ctMUKE+5XmSieUFQIApn944TP8UM8km9o=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=aU7PG0X0oZLSWdGIe92knEpVovVhuRvKQscUJQstg81Cgl7ABjEmYDXPzJTU8GtuC
 eXi65QsXrntxqizuuGZDjnrX1g1hwqjP+cfXfTj7sMrkKRH353UCAm08TgopPGnNnG
 QFz8uTocyNIB9T7a82NmnAzJxpnMuIdggIfAAzGo=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Mark Rutland <mark.rutland@arm.com>,
 Neil Armstrong <narmstrong@baylibre.com>, dri-devel@lists.freedesktop.org,
 Thierry Reding <thierry.reding@gmail.com>, kernel@collabora.com,
 Sam Ravnborg <sam@ravnborg.org>,
 Nikita Yushchenko <nikita.yoush@cogentembedded.com>,
 Andrey Smirnov <andrew.smirnov@gmail.com>,
 Kyungmin Park <kyungmin.park@samsung.com>, Chris Healy <cphealy@gmail.com>,
 devicetree@vger.kernel.org, Jonas Karlman <jonas@kwiboo.se>,
 Rob Herring <robh+dt@kernel.org>, Jernej Skrabec <jernej.skrabec@siol.net>,
 Seung-Woo Kim <sw0312.kim@samsung.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgQm9yaXMsCgpUaGFuayB5b3UgZm9yIHRoZSBwYXRjaC4KCk9uIFdlZCwgT2N0IDIzLCAyMDE5
IGF0IDA1OjQ1OjA3UE0gKzAyMDAsIEJvcmlzIEJyZXppbGxvbiB3cm90ZToKPiBTb21lIExWRFMg
ZW5jb2RlciBtaWdodCBzdXBwb3J0IHNldmVyYWwgaW5wdXQvb3V0cHV0IGJ1cyBmb3JtYXRzLiBB
ZGQKCnMvZW5jb2Rlci9lbmNvZGVycy8KCj4gYSB3YXkgdG8gZGVzY3JpYmUgdGhlIG9uZSB1c2Vk
IG9uIGEgc3BlY2lmaWMgZGVzaWduIGJ5IGFkZGluZyBvcHRpb25hbAoKcy90aGUgb25lL3RoZSBm
b3JtYXQvCgo+ICdkYXRhLW1hcHBpbmcnIHByb3BlcnRpZXMgdG8gdGhlIGlucHV0L291dHB1dCBw
b3J0cy4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBCb3JpcyBCcmV6aWxsb24gPGJvcmlzLmJyZXppbGxv
bkBjb2xsYWJvcmEuY29tPgo+IC0tLQo+IENoYW5nZXMgaW4gdjM6Cj4gKiBVc2UgYnVzLXdpZHRo
IGZvciB0aGUgcmdiMjQvcmdiMTggZGlzdGluY3Rpb24KPiAqIEFkanVzdCBjb2RlIHRvIG1hdGNo
IGNvcmUgY2hhbmdlcwo+ICogR2V0IHJpZCBvZiBvZl9nZXRfZGF0YV9tYXBwaW5nKCkKPiAqIERv
bid0IGltcGxlbWVudCAtPmF0b21pY19jaGVjaygpICh0aGUgY29yZSBub3cgdGFrZXMgY2FyZSBv
ZiBidXMKPiAgIGZsYWdzIHByb3BhZ2F0aW9uKQo+IAo+IENoYW5nZXMgaW4gdjI6Cj4gKiBNYWtl
IHRoZSBidXMtZm9ybWF0IG5lZ290aWF0aW9uIGxvZ2ljIG1vcmUgZ2VuZXJpYwo+IC0tLQo+ICBk
cml2ZXJzL2dwdS9kcm0vYnJpZGdlL2x2ZHMtZW5jb2Rlci5jIHwgNzIgKysrKysrKysrKysrKysr
KysrKysrKysrKysrCj4gIDEgZmlsZSBjaGFuZ2VkLCA3MiBpbnNlcnRpb25zKCspCj4gCj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbHZkcy1lbmNvZGVyLmMgYi9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL2x2ZHMtZW5jb2Rlci5jCj4gaW5kZXggZTIxMzJhOGQ1MTA2Li5hMmE4
ZjdmNGFjOTcgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9sdmRzLWVuY29k
ZXIuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbHZkcy1lbmNvZGVyLmMKPiBAQCAt
Niw2ICs2LDcgQEAKPiAgI2luY2x1ZGUgPGxpbnV4L2dwaW8vY29uc3VtZXIuaD4KPiAgI2luY2x1
ZGUgPGxpbnV4L21vZHVsZS5oPgo+ICAjaW5jbHVkZSA8bGludXgvb2YuaD4KPiArI2luY2x1ZGUg
PGxpbnV4L29mX2RldmljZS5oPgo+ICAjaW5jbHVkZSA8bGludXgvb2ZfZ3JhcGguaD4KPiAgI2lu
Y2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgo+ICAKPiBAQCAtMTYsNiArMTcsOCBAQCBz
dHJ1Y3QgbHZkc19lbmNvZGVyIHsKPiAgCXN0cnVjdCBkcm1fYnJpZGdlIGJyaWRnZTsKPiAgCXN0
cnVjdCBkcm1fYnJpZGdlICpwYW5lbF9icmlkZ2U7Cj4gIAlzdHJ1Y3QgZ3Bpb19kZXNjICpwb3dl
cmRvd25fZ3BpbzsKPiArCXUzMiBvdXRwdXRfZm10Owo+ICsJdTMyIGlucHV0X2ZtdDsKPiAgfTsK
PiAgCj4gIHN0YXRpYyBpbnQgbHZkc19lbmNvZGVyX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAq
YnJpZGdlKQo+IEBAIC00OCwxMCArNTEsNDAgQEAgc3RhdGljIHZvaWQgbHZkc19lbmNvZGVyX2Rp
c2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKPiAgCQlncGlvZF9zZXRfdmFsdWVfY2Fu
c2xlZXAobHZkc19lbmNvZGVyLT5wb3dlcmRvd25fZ3BpbywgMSk7Cj4gIH0KPiAgCj4gK3N0YXRp
YyB1MzIgKmx2ZHNfYXRvbWljX2dldF9pbnB1dF9idXNfZm10cyhzdHJ1Y3QgZHJtX2JyaWRnZSAq
YnJpZGdlLAo+ICsJCQkJCSAgIHN0cnVjdCBkcm1fYnJpZGdlX3N0YXRlICpicmlkZ2Vfc3RhdGUs
Cj4gKwkJCQkJICAgc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+ICsJCQkJCSAg
IHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRlLAo+ICsJCQkJCSAgIHUzMiBv
dXRwdXRfZm10LAo+ICsJCQkJCSAgIHVuc2lnbmVkIGludCAqbnVtX2lucHV0X2ZtdHMpCj4gK3sK
PiArCXN0cnVjdCBsdmRzX2VuY29kZXIgKmx2ZHNfZW5jb2RlciA9IGNvbnRhaW5lcl9vZihicmlk
Z2UsCj4gKwkJCQkJCQkgc3RydWN0IGx2ZHNfZW5jb2RlciwKPiArCQkJCQkJCSBicmlkZ2UpOwo+
ICsJdTMyICppbnB1dF9mbXRzOwo+ICsKPiArCWlmIChvdXRwdXRfZm10ID09IE1FRElBX0JVU19G
TVRfRklYRUQgfHwKPiArCSAgICBvdXRwdXRfZm10ID09IGx2ZHNfZW5jb2Rlci0+b3V0cHV0X2Zt
dCkKPiArCQkqbnVtX2lucHV0X2ZtdHMgPSAxOwo+ICsJZWxzZQo+ICsJCSpudW1faW5wdXRfZm10
cyA9IDA7Cj4gKwo+ICsJaWYgKCEqbnVtX2lucHV0X2ZtdHMpCj4gKwkJcmV0dXJuIE5VTEw7Cj4g
Kwo+ICsJaW5wdXRfZm10cyA9IGtjYWxsb2MoKm51bV9pbnB1dF9mbXRzLCBzaXplb2YoKmlucHV0
X2ZtdHMpLCBHRlBfS0VSTkVMKTsKCkFzICpudW1faW5wdXRfZm10cyA9PSAxLCB5b3UgY2FuCgoJ
aW5wdXRfZm10cyA9IGttYWxsb2Moc2l6ZW9mKCppbnB1dF9mbXRzKSwgR0ZQX0tFUk5FTCk7Cgo+
ICsJaWYgKCFpbnB1dF9mbXRzKQo+ICsJCXJldHVybiBOVUxMOwo+ICsKPiArCWlucHV0X2ZtdHNb
MF0gPSBsdmRzX2VuY29kZXItPmlucHV0X2ZtdDsKPiArCXJldHVybiBpbnB1dF9mbXRzOwo+ICt9
Cj4gKwo+ICBzdGF0aWMgc3RydWN0IGRybV9icmlkZ2VfZnVuY3MgZnVuY3MgPSB7Cj4gIAkuYXR0
YWNoID0gbHZkc19lbmNvZGVyX2F0dGFjaCwKPiAgCS5lbmFibGUgPSBsdmRzX2VuY29kZXJfZW5h
YmxlLAo+ICAJLmRpc2FibGUgPSBsdmRzX2VuY29kZXJfZGlzYWJsZSwKPiArCS5hdG9taWNfZ2V0
X2lucHV0X2J1c19mbXRzID0gbHZkc19hdG9taWNfZ2V0X2lucHV0X2J1c19mbXRzLAo+ICB9Owo+
ICAKPiAgc3RhdGljIGludCBsdmRzX2VuY29kZXJfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqcGRldikKPiBAQCAtNjIsMTEgKzk1LDE2IEBAIHN0YXRpYyBpbnQgbHZkc19lbmNvZGVyX3By
b2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gIAlzdHJ1Y3QgZGV2aWNlX25vZGUg
KnBhbmVsX25vZGU7Cj4gIAlzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbDsKPiAgCXN0cnVjdCBsdmRz
X2VuY29kZXIgKmx2ZHNfZW5jb2RlcjsKPiArCWNvbnN0IGNoYXIgKm91dHB1dF9kYXRhX21hcHBp
bmcgPSBOVUxMOwo+ICsJdTMyIGlucHV0X2J1c193aWR0aCA9IDA7Cj4gIAo+ICAJbHZkc19lbmNv
ZGVyID0gZGV2bV9remFsbG9jKGRldiwgc2l6ZW9mKCpsdmRzX2VuY29kZXIpLCBHRlBfS0VSTkVM
KTsKPiAgCWlmICghbHZkc19lbmNvZGVyKQo+ICAJCXJldHVybiAtRU5PTUVNOwo+ICAKPiArCWx2
ZHNfZW5jb2Rlci0+aW5wdXRfZm10ID0gTUVESUFfQlVTX0ZNVF9GSVhFRDsKPiArCWx2ZHNfZW5j
b2Rlci0+b3V0cHV0X2ZtdCA9IE1FRElBX0JVU19GTVRfRklYRUQ7Cj4gKwo+ICAJbHZkc19lbmNv
ZGVyLT5wb3dlcmRvd25fZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlvbmFsKGRldiwgInBvd2Vy
ZG93biIsCj4gIAkJCQkJCQkgICAgICAgR1BJT0RfT1VUX0hJR0gpOwo+ICAJaWYgKElTX0VSUihs
dmRzX2VuY29kZXItPnBvd2VyZG93bl9ncGlvKSkgewo+IEBAIC03Nyw2ICsxMTUsMjUgQEAgc3Rh
dGljIGludCBsdmRzX2VuY29kZXJfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikK
PiAgCQlyZXR1cm4gZXJyOwo+ICAJfQo+ICAKPiArCXBvcnQgPSBvZl9ncmFwaF9nZXRfcG9ydF9i
eV9pZChkZXYtPm9mX25vZGUsIDApOwo+ICsJaWYgKCFwb3J0KSB7Cj4gKwkJZGV2X2RiZyhkZXYs
ICJwb3J0IDAgbm90IGZvdW5kXG4iKTsKPiArCQlyZXR1cm4gLUVOWElPOwo+ICsJfQo+ICsKPiAr
CW9mX25vZGVfcHV0KHBvcnQpOwo+ICsKPiArCWlmIChvZl9wcm9wZXJ0eV9yZWFkX3UzMihwb3J0
LCAiYnVzLXdpZHRoIiwgJmlucHV0X2J1c193aWR0aCkpIHsKCllvdSdyZSB1c2luZyBwb3J0IGFm
dGVyIGNhbGxpbmcgb2Zfbm9kZV9wdXQoKS4KCj4gKwkJbHZkc19lbmNvZGVyLT5pbnB1dF9mbXQg
PSBNRURJQV9CVVNfRk1UX0ZJWEVEOwo+ICsJfSBlbHNlIGlmIChpbnB1dF9idXNfd2lkdGggPT0g
MTgpIHsKPiArCQlsdmRzX2VuY29kZXItPmlucHV0X2ZtdCA9IE1FRElBX0JVU19GTVRfUkdCNjY2
XzFYMTg7Cj4gKwl9IGVsc2UgaWYgKGlucHV0X2J1c193aWR0aCA9PSAyNCkgewo+ICsJCWx2ZHNf
ZW5jb2Rlci0+aW5wdXRfZm10ID0gTUVESUFfQlVTX0ZNVF9SR0I4ODhfMVgyNDsKPiArCX0gZWxz
ZSB7Cj4gKwkJZGV2X2RiZyhkZXYsICJ1bnN1cHBvcnRlZCBidXMtd2lkdGgpXG4iKTsKCnMvYnVz
LXdpZHRoKS9idXMtd2lkdGgvCgpidXQgSSB0aGluayB5b3Ugc2hvdWxkIG1ha2UgdGhlIGVycm9y
IG1lc3NhZ2UgYSBiaXQgY2xlYXJlcgoKCQlkZXZfZGJnKGRldiwgInVuc3VwcG9ydGVkIGJ1cy13
aWR0aCB2YWx1ZSAldSBvbiBwb3J0IDBcbiIsCgkJCWlucHV0X2J1c193aWR0aCk7Cgo+ICsJCXJl
dHVybiAtRU5PVFNVUFA7Cj4gKwl9Cj4gKwo+ICAJLyogTG9jYXRlIHRoZSBwYW5lbCBEVCBub2Rl
LiAqLwo+ICAJcG9ydCA9IG9mX2dyYXBoX2dldF9wb3J0X2J5X2lkKGRldi0+b2Zfbm9kZSwgMSk7
Cj4gIAlpZiAoIXBvcnQpIHsKPiBAQCAtODQsNiArMTQxLDIxIEBAIHN0YXRpYyBpbnQgbHZkc19l
bmNvZGVyX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gIAkJcmV0dXJuIC1F
TlhJTzsKPiAgCX0KPiAgCj4gKwlvZl9wcm9wZXJ0eV9yZWFkX3N0cmluZyhwb3J0LCAiZGF0YS1t
YXBwaW5nIiwgJm91dHB1dF9kYXRhX21hcHBpbmcpOwo+ICsJaWYgKCFvdXRwdXRfZGF0YV9tYXBw
aW5nKSB7Cj4gKwkJbHZkc19lbmNvZGVyLT5vdXRwdXRfZm10ID0gTUVESUFfQlVTX0ZNVF9GSVhF
RDsKPiArCX0gZWxzZSBpZiAoIXN0cmNtcChvdXRwdXRfZGF0YV9tYXBwaW5nLCAiamVpZGEtMTgi
KSkgewo+ICsJCWx2ZHNfZW5jb2Rlci0+b3V0cHV0X2ZtdCA9IE1FRElBX0JVU19GTVRfUkdCNjY2
XzFYN1gzX1NQV0c7Cj4gKwl9IGVsc2UgaWYgKCFzdHJjbXAob3V0cHV0X2RhdGFfbWFwcGluZywg
ImplaWRhLTI0IikpIHsKPiArCQlsdmRzX2VuY29kZXItPm91dHB1dF9mbXQgPSBNRURJQV9CVVNf
Rk1UX1JHQjg4OF8xWDdYNF9KRUlEQTsKPiArCX0gZWxzZSBpZiAoIXN0cmNtcChvdXRwdXRfZGF0
YV9tYXBwaW5nLCAidmVzYS0yNCIpKSB7Cj4gKwkJbHZkc19lbmNvZGVyLT5vdXRwdXRfZm10ID0g
TUVESUFfQlVTX0ZNVF9SR0I4ODhfMVg3WDRfU1BXRzsKPiArCX0gZWxzZSB7Cj4gKwkJb2Zfbm9k
ZV9wdXQocG9ydCk7Cj4gKwkJZGV2X2RiZyhkZXYsICJ1bnN1cHBvcnRlZCBvdXRwdXQgZGF0YS1t
YXBwaW5nXG4iKTsKPiArCQlyZXR1cm4gLUVOT1RTVVBQOwo+ICsJfQo+ICsKPiAgCWVuZHBvaW50
ID0gb2ZfZ2V0X2NoaWxkX2J5X25hbWUocG9ydCwgImVuZHBvaW50Iik7Cj4gIAlvZl9ub2RlX3B1
dChwb3J0KTsKPiAgCWlmICghZW5kcG9pbnQpIHsKCi0tIApSZWdhcmRzLAoKTGF1cmVudCBQaW5j
aGFydApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmkt
ZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
