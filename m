Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4D355550E2
	for <lists+dri-devel@lfdr.de>; Tue, 25 Jun 2019 15:55:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DF8166E0FF;
	Tue, 25 Jun 2019 13:55:12 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x336.google.com (mail-wm1-x336.google.com
 [IPv6:2a00:1450:4864:20::336])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 18AF96E0FF
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 13:55:11 +0000 (UTC)
Received: by mail-wm1-x336.google.com with SMTP id z23so3065077wma.4
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 06:55:10 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=cV4KsDQvRxm7DEMIm8JuhK5ZZzz2X/va/1G3dFC0a4I=;
 b=nymH0+XzKrrqUtwd+DXycluVYMc/NkI0QEBgoQ39+tE/ee8FucM2OpUkpuGHeHMsBy
 3yXY5Av771gKROLJXCRyo3lfwCsl335KHjYGR+JfFxjU2TqV7vt0JE7wXJHezKG/hNK1
 8iy0ymqUhQO5RixWAoZTzqoi6wXzzVzF+8MZ+1HpHDWIOA/NSygJV4gF4VYyzgjlLScL
 3S5joX1EAqhBCXGFm6liVYmSijvGQ5GZeR2CwLVug+Rnq2FBXzJn1ieXcGvh9nWH+oBB
 u1WcBLCqV2RWr56RgjAVtO3D5fQzJ50hn/xfp5AtUQsq+nHwnjlemKSJJg/2706AJa+b
 Pcpg==
X-Gm-Message-State: APjAAAUcJt+Q/engKahofGV5P1R9pVoKYy22BKYbX3Z+cmZnG2sj308k
 fuVEn5xFVdniJ2PfqEXCw4EpTMJ1
X-Google-Smtp-Source: APXvYqz/CWK6u/g8YjLJKogaCIlE9mQXApmks4Rs2xvNdjnyVs3QK+NuFJfrAi2mP5cXbdHIb/RiTA==
X-Received: by 2002:a1c:ac81:: with SMTP id
 v123mr20644138wme.145.1561470909389; 
 Tue, 25 Jun 2019 06:55:09 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:2df2:5da:22f9:1506])
 by smtp.gmail.com with ESMTPSA id y44sm13814441wrd.13.2019.06.25.06.55.08
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Tue, 25 Jun 2019 06:55:08 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: daniel@ffwll.ch, peterz@infradead.org, dri-devel@lists.freedesktop.org,
 linux-kernel@vger.kernel.org
Subject: [PATCH 2/2] drm/ttm: switch ttm_execbuf_util to new
 reservation_context
Date: Tue, 25 Jun 2019 15:55:07 +0200
Message-Id: <20190625135507.80548-2-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190625135507.80548-1-christian.koenig@amd.com>
References: <20190625135507.80548-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=cV4KsDQvRxm7DEMIm8JuhK5ZZzz2X/va/1G3dFC0a4I=;
 b=agM+XA9ob1kgKZeEbZHPplhDfx0ko6I8sXPtrzHeaoTppnDDK1a5EFtQXb+B3cQhBS
 hUxbo5qPIQPqIJ7MU5rV1Jny/4VeTn53My8P8XEfwJG3Pt0SpnFLSKIZaIJso0kLwwf6
 PmDTgG/pxA4i6CfYcBgIvs8rhgJWDlBuy+nXVIa8FupsstsnAt5HeAu4hYJhbSkagiNl
 E9Va6yhiBmdPQ2qgCqZTiZGqL/vgAjwv1U0jvIrEiiiwMbuHLdZdN2ujXB1m2mhQKrY/
 S3bDh0a3AFNIk0l+yreckJGqFxIu2hxk2nDDWt0f5xzSR1YbUuHUpxvxRcYzy1TANw6s
 Acbw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q2hhbmdlIHR0bV9leGVjYnVmX3V0aWwgdG8gdXNlIHRoZSBuZXcgcmVzZXJ2YXRpb24gY29udGV4
dApvYmplY3QgZm9yIGRlYWRsb2NrIGhhbmRsaW5nLgoKU2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFu
IEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdS5oICAgICAgICAgICB8ICAgMiArLQogLi4uL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMgIHwgICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfY3MuYyAgICAgICAgfCAgIDQgKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9jc2EuYyAgICAgICB8ICAgMiArLQogZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2dlbS5jICAgICAgIHwgICA0ICstCiAuLi4vZ3B1L2RybS9hbWQvZGlzcGxh
eS9hbWRncHVfZG0vYW1kZ3B1X2RtLmMgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9xeGwvcXhs
X2Rydi5oICAgICAgICAgICAgICAgICB8ICAgMiArLQogZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxf
cmVsZWFzZS5jICAgICAgICAgICAgIHwgICAyICstCiBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3Jh
ZGVvbi5oICAgICAgICAgICAgICAgfCAgIDMgKy0KIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFk
ZW9uX2dlbS5jICAgICAgICAgICB8ICAgMiArLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRl
b25fb2JqZWN0LmMgICAgICAgIHwgICAyICstCiBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVv
bl9vYmplY3QuaCAgICAgICAgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2V4ZWNi
dWZfdXRpbC5jICAgICAgICB8IDExNyArKysrKysrKy0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2Ry
bS92aXJ0aW8vdmlydGdwdV9kcnYuaCAgICAgICAgICB8ICAgMiArLQogZHJpdmVycy9ncHUvZHJt
L3ZpcnRpby92aXJ0Z3B1X2lvY3RsLmMgICAgICAgIHwgICA0ICstCiBkcml2ZXJzL2dwdS9kcm0v
dmlydGlvL3ZpcnRncHVfb2JqZWN0LmMgICAgICAgfCAgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS92
bXdnZngvdm13Z2Z4X3Jlc291cmNlLmMgICAgICB8ICAgOCArLQogZHJpdmVycy9ncHUvZHJtL3Zt
d2dmeC92bXdnZnhfdmFsaWRhdGlvbi5oICAgIHwgICAyICstCiBpbmNsdWRlL2RybS90dG0vdHRt
X2V4ZWNidWZfdXRpbC5oICAgICAgICAgICAgfCAgMTIgKy0KIDE5IGZpbGVzIGNoYW5nZWQsIDgz
IGluc2VydGlvbnMoKyksIDk1IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1LmgKaW5kZXggMTlhMDAyODJlMzRjLi5mN2YwNjFmNzFiMjYgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdS5oCkBAIC00NTcsNyArNDU3LDcgQEAgc3RydWN0IGFtZGdwdV9jc19wYXJz
ZXIgewogCXN0cnVjdCBkcm1fc2NoZWRfZW50aXR5CSplbnRpdHk7CiAKIAkvKiBidWZmZXIgb2Jq
ZWN0cyAqLwotCXN0cnVjdCB3d19hY3F1aXJlX2N0eAkJdGlja2V0OworCXN0cnVjdCByZXNlcnZh
dGlvbl9jb250ZXh0CXRpY2tldDsKIAlzdHJ1Y3QgYW1kZ3B1X2JvX2xpc3QJCSpib19saXN0Owog
CXN0cnVjdCBhbWRncHVfbW4JCSptbjsKIAlzdHJ1Y3QgYW1kZ3B1X2JvX2xpc3RfZW50cnkJdm1f
cGQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2Zk
X2dwdXZtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZt
LmMKaW5kZXggODFlMGU3NThjYzU0Li5hOWJlNmQxZDRmNzYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ3B1dm0uYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMKQEAgLTUzOSw3ICs1MzksNyBA
QCBzdHJ1Y3QgYm9fdm1fcmVzZXJ2YXRpb25fY29udGV4dCB7CiAJc3RydWN0IGFtZGdwdV9ib19s
aXN0X2VudHJ5IGtmZF9ibzsgLyogQk8gbGlzdCBlbnRyeSBmb3IgdGhlIEtGRCBCTyAqLwogCXVu
c2lnbmVkIGludCBuX3ZtczsJCSAgICAvKiBOdW1iZXIgb2YgVk1zIHJlc2VydmVkCSAgICAqLwog
CXN0cnVjdCBhbWRncHVfYm9fbGlzdF9lbnRyeSAqdm1fcGQ7IC8qIEFycmF5IG9mIFZNIEJPIGxp
c3QgZW50cmllcyAgKi8KLQlzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0OwkgICAgLyogUmVz
ZXJ2YXRpb24gdGlja2V0CSAgICAqLworCXN0cnVjdCByZXNlcnZhdGlvbl9jb250ZXh0IHRpY2tl
dDsgIC8qIFJlc2VydmF0aW9uIHRpY2tldAkgICAgKi8KIAlzdHJ1Y3QgbGlzdF9oZWFkIGxpc3Qs
IGR1cGxpY2F0ZXM7ICAvKiBCTyBsaXN0cwkJCSAgICAqLwogCXN0cnVjdCBhbWRncHVfc3luYyAq
c3luYzsJICAgIC8qIFBvaW50ZXIgdG8gc3luYyBvYmplY3QJICAgICovCiAJYm9vbCByZXNlcnZl
ZDsJCQkgICAgLyogV2hldGhlciBCT3MgYXJlIHJlc2VydmVkCSAgICAqLwpAQCAtMTc3Miw3ICsx
NzcyLDcgQEAgc3RhdGljIGludCB2YWxpZGF0ZV9pbnZhbGlkX3VzZXJfcGFnZXMoc3RydWN0IGFt
ZGtmZF9wcm9jZXNzX2luZm8gKnByb2Nlc3NfaW5mbykKIHsKIAlzdHJ1Y3QgYW1kZ3B1X2JvX2xp
c3RfZW50cnkgKnBkX2JvX2xpc3RfZW50cmllczsKIAlzdHJ1Y3QgbGlzdF9oZWFkIHJlc3ZfbGlz
dCwgZHVwbGljYXRlczsKLQlzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0OworCXN0cnVjdCBy
ZXNlcnZhdGlvbl9jb250ZXh0IHRpY2tldDsKIAlzdHJ1Y3QgYW1kZ3B1X3N5bmMgc3luYzsKIAog
CXN0cnVjdCBhbWRncHVfdm0gKnBlZXJfdm07CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9jcy5jCmluZGV4IDNlMmRhMjRjZDE3YS4uMGZjNGMwYzEwZWY4IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfY3MuYwpAQCAtMTMyMiw3ICsxMzIyLDcgQEAgc3RhdGljIGludCBh
bWRncHVfY3Nfc3VibWl0KHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLAogCWFtZGdwdV9qb2Jf
ZnJlZV9yZXNvdXJjZXMoam9iKTsKIAogCXRyYWNlX2FtZGdwdV9jc19pb2N0bChqb2IpOwotCWFt
ZGdwdV92bV9ib190cmFjZV9jcygmZnByaXYtPnZtLCAmcC0+dGlja2V0KTsKKwlhbWRncHVfdm1f
Ym9fdHJhY2VfY3MoJmZwcml2LT52bSwgJnAtPnRpY2tldC5jdHgpOwogCXByaW9yaXR5ID0gam9i
LT5iYXNlLnNfcHJpb3JpdHk7CiAJZHJtX3NjaGVkX2VudGl0eV9wdXNoX2pvYigmam9iLT5iYXNl
LCBlbnRpdHkpOwogCkBAIC0xNzI2LDcgKzE3MjYsNyBAQCBpbnQgYW1kZ3B1X2NzX2ZpbmRfbWFw
cGluZyhzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcGFyc2VyLAogCSptYXAgPSBtYXBwaW5nOwog
CiAJLyogRG91YmxlIGNoZWNrIHRoYXQgdGhlIEJPIGlzIHJlc2VydmVkIGJ5IHRoaXMgQ1MgKi8K
LQlpZiAoUkVBRF9PTkNFKCgqYm8pLT50Ym8ucmVzdi0+bG9jay5jdHgpICE9ICZwYXJzZXItPnRp
Y2tldCkKKwlpZiAoUkVBRF9PTkNFKCgqYm8pLT50Ym8ucmVzdi0+bG9jay5jdHgpICE9ICZwYXJz
ZXItPnRpY2tldC5jdHgpCiAJCXJldHVybiAtRUlOVkFMOwogCiAJaWYgKCEoKCpibyktPmZsYWdz
ICYgQU1ER1BVX0dFTV9DUkVBVEVfVlJBTV9DT05USUdVT1VTKSkgewpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2NzYS5jIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2NzYS5jCmluZGV4IGY2NjA2MjhlNmFmOS4uM2UxMzg1MGIyNDM1IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3NhLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2NzYS5jCkBAIC02NSw3ICs2NSw3IEBA
IGludCBhbWRncHVfbWFwX3N0YXRpY19jc2Eoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0
cnVjdCBhbWRncHVfdm0gKnZtLAogCQkJICBzdHJ1Y3QgYW1kZ3B1X2JvICpibywgc3RydWN0IGFt
ZGdwdV9ib192YSAqKmJvX3ZhLAogCQkJICB1aW50NjRfdCBjc2FfYWRkciwgdWludDMyX3Qgc2l6
ZSkKIHsKLQlzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0OworCXN0cnVjdCByZXNlcnZhdGlv
bl9jb250ZXh0IHRpY2tldDsKIAlzdHJ1Y3QgbGlzdF9oZWFkIGxpc3Q7CiAJc3RydWN0IGFtZGdw
dV9ib19saXN0X2VudHJ5IHBkOwogCXN0cnVjdCB0dG1fdmFsaWRhdGVfYnVmZmVyIGNzYV90djsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nZW0uYyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nZW0uYwppbmRleCBlZDI1YTRlMTQ0MDQu
LjZlODE5ZDZhODBlMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2dlbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nZW0uYwpA
QCAtMTU4LDcgKzE1OCw3IEBAIHZvaWQgYW1kZ3B1X2dlbV9vYmplY3RfY2xvc2Uoc3RydWN0IGRy
bV9nZW1fb2JqZWN0ICpvYmosCiAJc3RydWN0IGFtZGdwdV9ib19saXN0X2VudHJ5IHZtX3BkOwog
CXN0cnVjdCBsaXN0X2hlYWQgbGlzdCwgZHVwbGljYXRlczsKIAlzdHJ1Y3QgdHRtX3ZhbGlkYXRl
X2J1ZmZlciB0djsKLQlzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0OworCXN0cnVjdCByZXNl
cnZhdGlvbl9jb250ZXh0IHRpY2tldDsKIAlzdHJ1Y3QgYW1kZ3B1X2JvX3ZhICpib192YTsKIAlp
bnQgcjsKIApAQCAtNTQ2LDcgKzU0Niw3IEBAIGludCBhbWRncHVfZ2VtX3ZhX2lvY3RsKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJc3RydWN0IGFtZGdwdV9ib192YSAqYm9f
dmE7CiAJc3RydWN0IGFtZGdwdV9ib19saXN0X2VudHJ5IHZtX3BkOwogCXN0cnVjdCB0dG1fdmFs
aWRhdGVfYnVmZmVyIHR2OwotCXN0cnVjdCB3d19hY3F1aXJlX2N0eCB0aWNrZXQ7CisJc3RydWN0
IHJlc2VydmF0aW9uX2NvbnRleHQgdGlja2V0OwogCXN0cnVjdCBsaXN0X2hlYWQgbGlzdCwgZHVw
bGljYXRlczsKIAl1aW50NjRfdCB2YV9mbGFnczsKIAlpbnQgciA9IDA7CmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG0uYwppbmRleCAzNmVlOGZl
NTJmMzguLjI0MWJiNDU2MjI0MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNw
bGF5L2FtZGdwdV9kbS9hbWRncHVfZG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3Bs
YXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jCkBAIC00MTkzLDcgKzQxOTMsNyBAQCBzdGF0aWMgaW50
IGRtX3BsYW5lX2hlbHBlcl9wcmVwYXJlX2ZiKHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAogCXN0
cnVjdCBkbV9wbGFuZV9zdGF0ZSAqZG1fcGxhbmVfc3RhdGVfbmV3LCAqZG1fcGxhbmVfc3RhdGVf
b2xkOwogCXN0cnVjdCBsaXN0X2hlYWQgbGlzdDsKIAlzdHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZl
ciB0djsKLQlzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0OworCXN0cnVjdCByZXNlcnZhdGlv
bl9jb250ZXh0IHRpY2tldDsKIAl1aW50NjRfdCB0aWxpbmdfZmxhZ3M7CiAJdWludDMyX3QgZG9t
YWluOwogCWludCByOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfZHJ2Lmgg
Yi9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9kcnYuaAppbmRleCAyODk2YmI2ZmRiZjQuLjMwNjZm
ZDk3NzZiZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfZHJ2LmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfZHJ2LmgKQEAgLTE1NCw3ICsxNTQsNyBAQCBzdHJ1Y3Qg
cXhsX3JlbGVhc2UgewogCXN0cnVjdCBxeGxfYm8gKnJlbGVhc2VfYm87CiAJdWludDMyX3QgcmVs
ZWFzZV9vZmZzZXQ7CiAJdWludDMyX3Qgc3VyZmFjZV9yZWxlYXNlX2lkOwotCXN0cnVjdCB3d19h
Y3F1aXJlX2N0eCB0aWNrZXQ7CisJc3RydWN0IHJlc2VydmF0aW9uX2NvbnRleHQgdGlja2V0Owog
CXN0cnVjdCBsaXN0X2hlYWQgYm9zOwogfTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3F4bC9xeGxfcmVsZWFzZS5jIGIvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfcmVsZWFzZS5jCmlu
ZGV4IDQ5ZjlhOTM4NTM5My4uZTM5MmJkZDgyNjA5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vcXhsL3F4bF9yZWxlYXNlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfcmVsZWFz
ZS5jCkBAIC00NTksNiArNDU5LDYgQEAgdm9pZCBxeGxfcmVsZWFzZV9mZW5jZV9idWZmZXJfb2Jq
ZWN0cyhzdHJ1Y3QgcXhsX3JlbGVhc2UgKnJlbGVhc2UpCiAJCXJlc2VydmF0aW9uX29iamVjdF91
bmxvY2soYm8tPnJlc3YpOwogCX0KIAlzcGluX3VubG9jaygmZ2xvYi0+bHJ1X2xvY2spOwotCXd3
X2FjcXVpcmVfZmluaSgmcmVsZWFzZS0+dGlja2V0KTsKKwlyZXNlcnZhdGlvbl9jb250ZXh0X2Zp
bmkoJnJlbGVhc2UtPnRpY2tldCk7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9y
YWRlb24vcmFkZW9uLmggYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbi5oCmluZGV4IDMy
ODA4ZTUwYmUxMi4uMDRmOTQ3OTJiZTU1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFk
ZW9uL3JhZGVvbi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uLmgKQEAgLTEw
ODQsNyArMTA4NCw4IEBAIHN0cnVjdCByYWRlb25fY3NfcGFyc2VyIHsKIAl1MzIJCQljc19mbGFn
czsKIAl1MzIJCQlyaW5nOwogCXMzMgkJCXByaW9yaXR5OwotCXN0cnVjdCB3d19hY3F1aXJlX2N0
eAl0aWNrZXQ7CisKKwlzdHJ1Y3QgcmVzZXJ2YXRpb25fY29udGV4dAl0aWNrZXQ7CiB9OwogCiBz
dGF0aWMgaW5saW5lIHUzMiByYWRlb25fZ2V0X2liX3ZhbHVlKHN0cnVjdCByYWRlb25fY3NfcGFy
c2VyICpwLCBpbnQgaWR4KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRl
b25fZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9nZW0uYwppbmRleCA3NDEx
ZTY5ZTI3MTIuLjgyM2NjYjhkYWUyMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVv
bi9yYWRlb25fZ2VtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fZ2VtLmMK
QEAgLTU0NCw3ICs1NDQsNyBAQCBzdGF0aWMgdm9pZCByYWRlb25fZ2VtX3ZhX3VwZGF0ZV92bShz
dHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiwKIHsKIAlzdHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZl
ciB0diwgKmVudHJ5OwogCXN0cnVjdCByYWRlb25fYm9fbGlzdCAqdm1fYm9zOwotCXN0cnVjdCB3
d19hY3F1aXJlX2N0eCB0aWNrZXQ7CisJc3RydWN0IHJlc2VydmF0aW9uX2NvbnRleHQgdGlja2V0
OwogCXN0cnVjdCBsaXN0X2hlYWQgbGlzdDsKIAl1bnNpZ25lZCBkb21haW47CiAJaW50IHI7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuYyBiL2RyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX29iamVjdC5jCmluZGV4IDM2NjgzZGUwMzAwYi4uNTZi
OTA5MDM0ODJhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmpl
Y3QuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuYwpAQCAtNTI4
LDcgKzUyOCw3IEBAIHN0YXRpYyB1NjQgcmFkZW9uX2JvX2dldF90aHJlc2hvbGRfZm9yX21vdmVz
KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQogfQogCiBpbnQgcmFkZW9uX2JvX2xpc3RfdmFs
aWRhdGUoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYsCi0JCQkgICAgc3RydWN0IHd3X2FjcXVp
cmVfY3R4ICp0aWNrZXQsCisJCQkgICAgc3RydWN0IHJlc2VydmF0aW9uX2NvbnRleHQgKnRpY2tl
dCwKIAkJCSAgICBzdHJ1Y3QgbGlzdF9oZWFkICpoZWFkLCBpbnQgcmluZykKIHsKIAlzdHJ1Y3Qg
dHRtX29wZXJhdGlvbl9jdHggY3R4ID0geyB0cnVlLCBmYWxzZSB9OwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmggYi9kcml2ZXJzL2dwdS9kcm0vcmFk
ZW9uL3JhZGVvbl9vYmplY3QuaAppbmRleCA5ZmZkODIxNWQzOGEuLjlkZDNiMmZhM2Y5YSAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmgKKysrIGIvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmgKQEAgLTE0MSw3ICsxNDEsNyBAQCBl
eHRlcm4gdm9pZCByYWRlb25fYm9fZm9yY2VfZGVsZXRlKHN0cnVjdCByYWRlb25fZGV2aWNlICpy
ZGV2KTsKIGV4dGVybiBpbnQgcmFkZW9uX2JvX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJk
ZXYpOwogZXh0ZXJuIHZvaWQgcmFkZW9uX2JvX2Zpbmkoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJk
ZXYpOwogZXh0ZXJuIGludCByYWRlb25fYm9fbGlzdF92YWxpZGF0ZShzdHJ1Y3QgcmFkZW9uX2Rl
dmljZSAqcmRldiwKLQkJCQkgICBzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggKnRpY2tldCwKKwkJCQkg
ICBzdHJ1Y3QgcmVzZXJ2YXRpb25fY29udGV4dCAqdGlja2V0LAogCQkJCSAgIHN0cnVjdCBsaXN0
X2hlYWQgKmhlYWQsIGludCByaW5nKTsKIGV4dGVybiBpbnQgcmFkZW9uX2JvX3NldF90aWxpbmdf
ZmxhZ3Moc3RydWN0IHJhZGVvbl9ibyAqYm8sCiAJCQkJdTMyIHRpbGluZ19mbGFncywgdTMyIHBp
dGNoKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2V4ZWNidWZfdXRpbC5j
IGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fZXhlY2J1Zl91dGlsLmMKaW5kZXggOTU3ZWMzNzVh
NGJhLi42ZGYyODc5YjI0ODAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2V4
ZWNidWZfdXRpbC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2V4ZWNidWZfdXRpbC5j
CkBAIC0zMywxNiArMzMsNiBAQAogI2luY2x1ZGUgPGxpbnV4L3NjaGVkLmg+CiAjaW5jbHVkZSA8
bGludXgvbW9kdWxlLmg+CiAKLXN0YXRpYyB2b2lkIHR0bV9ldV9iYWNrb2ZmX3Jlc2VydmF0aW9u
X3JldmVyc2Uoc3RydWN0IGxpc3RfaGVhZCAqbGlzdCwKLQkJCQkJICAgICAgc3RydWN0IHR0bV92
YWxpZGF0ZV9idWZmZXIgKmVudHJ5KQotewotCWxpc3RfZm9yX2VhY2hfZW50cnlfY29udGludWVf
cmV2ZXJzZShlbnRyeSwgbGlzdCwgaGVhZCkgewotCQlzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3Qg
KmJvID0gZW50cnktPmJvOwotCi0JCXJlc2VydmF0aW9uX29iamVjdF91bmxvY2soYm8tPnJlc3Yp
OwotCX0KLX0KLQogc3RhdGljIHZvaWQgdHRtX2V1X2RlbF9mcm9tX2xydV9sb2NrZWQoc3RydWN0
IGxpc3RfaGVhZCAqbGlzdCkKIHsKIAlzdHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZlciAqZW50cnk7
CkBAIC01Myw3ICs0Myw3IEBAIHN0YXRpYyB2b2lkIHR0bV9ldV9kZWxfZnJvbV9scnVfbG9ja2Vk
KHN0cnVjdCBsaXN0X2hlYWQgKmxpc3QpCiAJfQogfQogCi12b2lkIHR0bV9ldV9iYWNrb2ZmX3Jl
c2VydmF0aW9uKHN0cnVjdCB3d19hY3F1aXJlX2N0eCAqdGlja2V0LAordm9pZCB0dG1fZXVfYmFj
a29mZl9yZXNlcnZhdGlvbihzdHJ1Y3QgcmVzZXJ2YXRpb25fY29udGV4dCAqdGlja2V0LAogCQkJ
CXN0cnVjdCBsaXN0X2hlYWQgKmxpc3QpCiB7CiAJc3RydWN0IHR0bV92YWxpZGF0ZV9idWZmZXIg
KmVudHJ5OwpAQCAtNzEsMTIgKzYxLDE1IEBAIHZvaWQgdHRtX2V1X2JhY2tvZmZfcmVzZXJ2YXRp
b24oc3RydWN0IHd3X2FjcXVpcmVfY3R4ICp0aWNrZXQsCiAKIAkJaWYgKGxpc3RfZW1wdHkoJmJv
LT5scnUpKQogCQkJdHRtX2JvX2FkZF90b19scnUoYm8pOwotCQlyZXNlcnZhdGlvbl9vYmplY3Rf
dW5sb2NrKGJvLT5yZXN2KTsKKwkJaWYgKCF0aWNrZXQpCisJCQlyZXNlcnZhdGlvbl9vYmplY3Rf
dW5sb2NrKGJvLT5yZXN2KTsKIAl9CiAJc3Bpbl91bmxvY2soJmdsb2ItPmxydV9sb2NrKTsKIAot
CWlmICh0aWNrZXQpCi0JCXd3X2FjcXVpcmVfZmluaSh0aWNrZXQpOworCWlmICh0aWNrZXQpIHsK
KwkJcmVzZXJ2YXRpb25fY29udGV4dF91bmxvY2tfYWxsKHRpY2tldCk7CisJCXJlc2VydmF0aW9u
X2NvbnRleHRfZmluaSh0aWNrZXQpOworCX0KIH0KIEVYUE9SVF9TWU1CT0wodHRtX2V1X2JhY2tv
ZmZfcmVzZXJ2YXRpb24pOwogCkBAIC05MiwxMiArODUsMTIgQEAgRVhQT1JUX1NZTUJPTCh0dG1f
ZXVfYmFja29mZl9yZXNlcnZhdGlvbik7CiAgKiBidWZmZXJzIGluIGRpZmZlcmVudCBvcmRlcnMu
CiAgKi8KIAotaW50IHR0bV9ldV9yZXNlcnZlX2J1ZmZlcnMoc3RydWN0IHd3X2FjcXVpcmVfY3R4
ICp0aWNrZXQsCitpbnQgdHRtX2V1X3Jlc2VydmVfYnVmZmVycyhzdHJ1Y3QgcmVzZXJ2YXRpb25f
Y29udGV4dCAqdGlja2V0LAogCQkJICAgc3RydWN0IGxpc3RfaGVhZCAqbGlzdCwgYm9vbCBpbnRy
LAogCQkJICAgc3RydWN0IGxpc3RfaGVhZCAqZHVwcywgYm9vbCBkZWxfbHJ1KQogewotCXN0cnVj
dCB0dG1fYm9fZ2xvYmFsICpnbG9iOwogCXN0cnVjdCB0dG1fdmFsaWRhdGVfYnVmZmVyICplbnRy
eTsKKwlzdHJ1Y3QgdHRtX2JvX2dsb2JhbCAqZ2xvYjsKIAlpbnQgcmV0OwogCiAJaWYgKGxpc3Rf
ZW1wdHkobGlzdCkpCkBAIC0xMDcsNzAgKzEwMCw0NSBAQCBpbnQgdHRtX2V1X3Jlc2VydmVfYnVm
ZmVycyhzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggKnRpY2tldCwKIAlnbG9iID0gZW50cnktPmJvLT5i
ZGV2LT5nbG9iOwogCiAJaWYgKHRpY2tldCkKLQkJd3dfYWNxdWlyZV9pbml0KHRpY2tldCwgJnJl
c2VydmF0aW9uX3d3X2NsYXNzKTsKKwkJcmVzZXJ2YXRpb25fY29udGV4dF9pbml0KHRpY2tldCk7
CiAKK3JldHJ5OgogCWxpc3RfZm9yX2VhY2hfZW50cnkoZW50cnksIGxpc3QsIGhlYWQpIHsKIAkJ
c3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibyA9IGVudHJ5LT5ibzsKIAotCQlyZXQgPSBfX3R0
bV9ib19yZXNlcnZlKGJvLCBpbnRyLCAodGlja2V0ID09IE5VTEwpLCB0aWNrZXQpOworCQlpZiAo
bGlrZWx5KHRpY2tldCkpIHsKKwkJCXJldCA9IHJlc2VydmF0aW9uX2NvbnRleHRfbG9jayh0aWNr
ZXQsIGJvLT5yZXN2LCBpbnRyKTsKKwkJCWlmIChyZXQgPT0gLUVERUFETEspCisJCQkJZ290byBy
ZXRyeTsKKwkJfSBlbHNlIHsKKwkJCXJldCA9IHJlc2VydmF0aW9uX29iamVjdF90cnlsb2NrKGJv
LT5yZXN2KSA/IDAgOiAtRUJVU1k7CisJCX0KKwogCQlpZiAoIXJldCAmJiB1bmxpa2VseShhdG9t
aWNfcmVhZCgmYm8tPmNwdV93cml0ZXJzKSA+IDApKSB7CiAJCQlyZXNlcnZhdGlvbl9vYmplY3Rf
dW5sb2NrKGJvLT5yZXN2KTsKLQogCQkJcmV0ID0gLUVCVVNZOwogCiAJCX0gZWxzZSBpZiAocmV0
ID09IC1FQUxSRUFEWSAmJiBkdXBzKSB7CiAJCQlzdHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZlciAq
c2FmZSA9IGVudHJ5OworCiAJCQllbnRyeSA9IGxpc3RfcHJldl9lbnRyeShlbnRyeSwgaGVhZCk7
CiAJCQlsaXN0X2RlbCgmc2FmZS0+aGVhZCk7CiAJCQlsaXN0X2FkZCgmc2FmZS0+aGVhZCwgZHVw
cyk7CiAJCQljb250aW51ZTsKIAkJfQogCi0JCWlmICghcmV0KSB7Ci0JCQlpZiAoIWVudHJ5LT5u
dW1fc2hhcmVkKQotCQkJCWNvbnRpbnVlOworCQlpZiAodW5saWtlbHkocmV0KSkKKwkJCWdvdG8g
ZXJyb3I7CiAKLQkJCXJldCA9IHJlc2VydmF0aW9uX29iamVjdF9yZXNlcnZlX3NoYXJlZChiby0+
cmVzdiwKLQkJCQkJCQkJZW50cnktPm51bV9zaGFyZWQpOwotCQkJaWYgKCFyZXQpCi0JCQkJY29u
dGludWU7Ci0JCX0KLQotCQkvKiB1aCBvaCwgd2UgbG9zdCBvdXQsIGRyb3AgZXZlcnkgcmVzZXJ2
YXRpb24gYW5kIHRyeQotCQkgKiB0byBvbmx5IHJlc2VydmUgdGhpcyBidWZmZXIsIHRoZW4gc3Rh
cnQgb3ZlciBpZgotCQkgKiB0aGlzIHN1Y2NlZWRzLgotCQkgKi8KLQkJdHRtX2V1X2JhY2tvZmZf
cmVzZXJ2YXRpb25fcmV2ZXJzZShsaXN0LCBlbnRyeSk7Ci0KLQkJaWYgKHJldCA9PSAtRURFQURM
SykgewotCQkJaWYgKGludHIpIHsKLQkJCQlyZXQgPSB3d19tdXRleF9sb2NrX3Nsb3dfaW50ZXJy
dXB0aWJsZSgmYm8tPnJlc3YtPmxvY2ssCi0JCQkJCQkJCSAgICAgICB0aWNrZXQpOwotCQkJfSBl
bHNlIHsKLQkJCQl3d19tdXRleF9sb2NrX3Nsb3coJmJvLT5yZXN2LT5sb2NrLCB0aWNrZXQpOwot
CQkJCXJldCA9IDA7Ci0JCQl9Ci0JCX0KKwkJaWYgKCFlbnRyeS0+bnVtX3NoYXJlZCkKKwkJCWNv
bnRpbnVlOwogCi0JCWlmICghcmV0ICYmIGVudHJ5LT5udW1fc2hhcmVkKQotCQkJcmV0ID0gcmVz
ZXJ2YXRpb25fb2JqZWN0X3Jlc2VydmVfc2hhcmVkKGJvLT5yZXN2LAotCQkJCQkJCQllbnRyeS0+
bnVtX3NoYXJlZCk7Ci0KLQkJaWYgKHVubGlrZWx5KHJldCAhPSAwKSkgewotCQkJaWYgKHJldCA9
PSAtRUlOVFIpCi0JCQkJcmV0ID0gLUVSRVNUQVJUU1lTOwotCQkJaWYgKHRpY2tldCkgewotCQkJ
CXd3X2FjcXVpcmVfZG9uZSh0aWNrZXQpOwotCQkJCXd3X2FjcXVpcmVfZmluaSh0aWNrZXQpOwot
CQkJfQotCQkJcmV0dXJuIHJldDsKKwkJcmV0ID0gcmVzZXJ2YXRpb25fb2JqZWN0X3Jlc2VydmVf
c2hhcmVkKGJvLT5yZXN2LAorCQkJCQkJCWVudHJ5LT5udW1fc2hhcmVkKTsKKwkJaWYgKHVubGlr
ZWx5KHJldCkpIHsKKwkJCXJlc2VydmF0aW9uX29iamVjdF91bmxvY2soYm8tPnJlc3YpOworCQkJ
Z290byBlcnJvcjsKIAkJfQotCi0JCS8qIG1vdmUgdGhpcyBpdGVtIHRvIHRoZSBmcm9udCBvZiB0
aGUgbGlzdCwKLQkJICogZm9yY2VzIGNvcnJlY3QgaXRlcmF0aW9uIG9mIHRoZSBsb29wIHdpdGhv
dXQga2VlcGluZyB0cmFjawotCQkgKi8KLQkJbGlzdF9kZWwoJmVudHJ5LT5oZWFkKTsKLQkJbGlz
dF9hZGQoJmVudHJ5LT5oZWFkLCBsaXN0KTsKIAl9CiAKIAlpZiAoZGVsX2xydSkgewpAQCAtMTc5
LDEwICsxNDcsMjYgQEAgaW50IHR0bV9ldV9yZXNlcnZlX2J1ZmZlcnMoc3RydWN0IHd3X2FjcXVp
cmVfY3R4ICp0aWNrZXQsCiAJCXNwaW5fdW5sb2NrKCZnbG9iLT5scnVfbG9jayk7CiAJfQogCXJl
dHVybiAwOworCitlcnJvcjoKKwlpZiAocmV0ID09IC1FSU5UUikKKwkJcmV0ID0gLUVSRVNUQVJU
U1lTOworCWlmICh0aWNrZXQpIHsKKwkJcmVzZXJ2YXRpb25fY29udGV4dF91bmxvY2tfYWxsKHRp
Y2tldCk7CisJCXJlc2VydmF0aW9uX2NvbnRleHRfZG9uZSh0aWNrZXQpOworCQlyZXNlcnZhdGlv
bl9jb250ZXh0X2ZpbmkodGlja2V0KTsKKwl9IGVsc2UgeworCQlsaXN0X2Zvcl9lYWNoX2VudHJ5
X2NvbnRpbnVlX3JldmVyc2UoZW50cnksIGxpc3QsIGhlYWQpIHsKKwkJCXN0cnVjdCB0dG1fYnVm
ZmVyX29iamVjdCAqYm8gPSBlbnRyeS0+Ym87CisKKwkJCXJlc2VydmF0aW9uX29iamVjdF91bmxv
Y2soYm8tPnJlc3YpOworCQl9CisJfQorCXJldHVybiByZXQ7CiB9CiBFWFBPUlRfU1lNQk9MKHR0
bV9ldV9yZXNlcnZlX2J1ZmZlcnMpOwogCi12b2lkIHR0bV9ldV9mZW5jZV9idWZmZXJfb2JqZWN0
cyhzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggKnRpY2tldCwKK3ZvaWQgdHRtX2V1X2ZlbmNlX2J1ZmZl
cl9vYmplY3RzKHN0cnVjdCByZXNlcnZhdGlvbl9jb250ZXh0ICp0aWNrZXQsCiAJCQkJIHN0cnVj
dCBsaXN0X2hlYWQgKmxpc3QsCiAJCQkJIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQogewpAQCAt
MjA4LDEwICsxOTIsMTMgQEAgdm9pZCB0dG1fZXVfZmVuY2VfYnVmZmVyX29iamVjdHMoc3RydWN0
IHd3X2FjcXVpcmVfY3R4ICp0aWNrZXQsCiAJCQl0dG1fYm9fYWRkX3RvX2xydShibyk7CiAJCWVs
c2UKIAkJCXR0bV9ib19tb3ZlX3RvX2xydV90YWlsKGJvLCBOVUxMKTsKLQkJcmVzZXJ2YXRpb25f
b2JqZWN0X3VubG9jayhiby0+cmVzdik7CisJCWlmICghdGlja2V0KQorCQkJcmVzZXJ2YXRpb25f
b2JqZWN0X3VubG9jayhiby0+cmVzdik7CiAJfQogCXNwaW5fdW5sb2NrKCZnbG9iLT5scnVfbG9j
ayk7Ci0JaWYgKHRpY2tldCkKLQkJd3dfYWNxdWlyZV9maW5pKHRpY2tldCk7CisJaWYgKHRpY2tl
dCkgeworCQlyZXNlcnZhdGlvbl9jb250ZXh0X3VubG9ja19hbGwodGlja2V0KTsKKwkJcmVzZXJ2
YXRpb25fY29udGV4dF9maW5pKHRpY2tldCk7CisJfQogfQogRVhQT1JUX1NZTUJPTCh0dG1fZXVf
ZmVuY2VfYnVmZmVyX29iamVjdHMpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRp
by92aXJ0Z3B1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oCmlu
ZGV4IGI2OWFlMTBjYTIzOC4uYjY5YWM3ODA3OWZkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vdmlydGlvL3ZpcnRncHVfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0
Z3B1X2Rydi5oCkBAIC0yMjEsNyArMjIxLDcgQEAgc3RydWN0IHZpcnRpb19ncHVfZnByaXYgewog
LyogdmlydGlvX2lvY3RsLmMgKi8KICNkZWZpbmUgRFJNX1ZJUlRJT19OVU1fSU9DVExTIDEwCiBl
eHRlcm4gc3RydWN0IGRybV9pb2N0bF9kZXNjIHZpcnRpb19ncHVfaW9jdGxzW0RSTV9WSVJUSU9f
TlVNX0lPQ1RMU107Ci1pbnQgdmlydGlvX2dwdV9vYmplY3RfbGlzdF92YWxpZGF0ZShzdHJ1Y3Qg
d3dfYWNxdWlyZV9jdHggKnRpY2tldCwKK2ludCB2aXJ0aW9fZ3B1X29iamVjdF9saXN0X3ZhbGlk
YXRlKHN0cnVjdCByZXNlcnZhdGlvbl9jb250ZXh0ICp0aWNrZXQsCiAJCQkJICAgIHN0cnVjdCBs
aXN0X2hlYWQgKmhlYWQpOwogdm9pZCB2aXJ0aW9fZ3B1X3VucmVmX2xpc3Qoc3RydWN0IGxpc3Rf
aGVhZCAqaGVhZCk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdw
dV9pb2N0bC5jIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2lvY3RsLmMKaW5kZXgg
MjRlYmUwNDliYWE4Li43YjdmYWZlNGIxZjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92
aXJ0aW8vdmlydGdwdV9pb2N0bC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdw
dV9pb2N0bC5jCkBAIC01NCw3ICs1NCw3IEBAIHN0YXRpYyBpbnQgdmlydGlvX2dwdV9tYXBfaW9j
dGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKIAkJCQkJICZ2aXJ0aW9fZ3B1
X21hcC0+b2Zmc2V0KTsKIH0KIAotaW50IHZpcnRpb19ncHVfb2JqZWN0X2xpc3RfdmFsaWRhdGUo
c3RydWN0IHd3X2FjcXVpcmVfY3R4ICp0aWNrZXQsCitpbnQgdmlydGlvX2dwdV9vYmplY3RfbGlz
dF92YWxpZGF0ZShzdHJ1Y3QgcmVzZXJ2YXRpb25fY29udGV4dCAqdGlja2V0LAogCQkJCSAgICBz
dHJ1Y3QgbGlzdF9oZWFkICpoZWFkKQogewogCXN0cnVjdCB0dG1fb3BlcmF0aW9uX2N0eCBjdHgg
PSB7IGZhbHNlLCBmYWxzZSB9OwpAQCAtMTE0LDcgKzExNCw3IEBAIHN0YXRpYyBpbnQgdmlydGlv
X2dwdV9leGVjYnVmZmVyX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEs
CiAJc3RydWN0IGxpc3RfaGVhZCB2YWxpZGF0ZV9saXN0OwogCXN0cnVjdCB0dG1fdmFsaWRhdGVf
YnVmZmVyICpidWZsaXN0ID0gTlVMTDsKIAlpbnQgaTsKLQlzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHgg
dGlja2V0OworCXN0cnVjdCByZXNlcnZhdGlvbl9jb250ZXh0IHRpY2tldDsKIAlzdHJ1Y3Qgc3lu
Y19maWxlICpzeW5jX2ZpbGU7CiAJaW50IGluX2ZlbmNlX2ZkID0gZXhidWYtPmZlbmNlX2ZkOwog
CWludCBvdXRfZmVuY2VfZmQgPSAtMTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92aXJ0
aW8vdmlydGdwdV9vYmplY3QuYyBiL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9vYmpl
Y3QuYwppbmRleCBiMmRhMzEzMTBkMjQuLjBkMThlNWMzOTM1NyAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X29iamVjdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92
aXJ0aW8vdmlydGdwdV9vYmplY3QuYwpAQCAtMTQyLDcgKzE0Miw3IEBAIGludCB2aXJ0aW9fZ3B1
X29iamVjdF9jcmVhdGUoc3RydWN0IHZpcnRpb19ncHVfZGV2aWNlICp2Z2RldiwKIAkJc3RydWN0
IHZpcnRpb19ncHVfZmVuY2VfZHJpdmVyICpkcnYgPSAmdmdkZXYtPmZlbmNlX2RydjsKIAkJc3Ry
dWN0IGxpc3RfaGVhZCB2YWxpZGF0ZV9saXN0OwogCQlzdHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZl
ciBtYWluYnVmOwotCQlzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0OworCQlzdHJ1Y3QgcmVz
ZXJ2YXRpb25fY29udGV4dCB0aWNrZXQ7CiAJCXVuc2lnbmVkIGxvbmcgaXJxX2ZsYWdzOwogCQli
b29sIHNpZ25hbGVkOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dm
eF9yZXNvdXJjZS5jIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfcmVzb3VyY2UuYwpp
bmRleCAxZDM4YThiMmYyZWMuLjk0YmQ4MDMzZGY0ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL3Ztd2dmeC92bXdnZnhfcmVzb3VyY2UuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4
L3Ztd2dmeF9yZXNvdXJjZS5jCkBAIC00NDMsNyArNDQzLDcgQEAgdm9pZCB2bXdfcmVzb3VyY2Vf
dW5yZXNlcnZlKHN0cnVjdCB2bXdfcmVzb3VyY2UgKnJlcywKICAqICAgICAgICAgICAgICAgICAg
cmVzZXJ2ZWQgYW5kIHZhbGlkYXRlZCBiYWNrdXAgYnVmZmVyLgogICovCiBzdGF0aWMgaW50Ci12
bXdfcmVzb3VyY2VfY2hlY2tfYnVmZmVyKHN0cnVjdCB3d19hY3F1aXJlX2N0eCAqdGlja2V0LAor
dm13X3Jlc291cmNlX2NoZWNrX2J1ZmZlcihzdHJ1Y3QgcmVzZXJ2YXRpb25fY29udGV4dCAqdGlj
a2V0LAogCQkJICBzdHJ1Y3Qgdm13X3Jlc291cmNlICpyZXMsCiAJCQkgIGJvb2wgaW50ZXJydXB0
aWJsZSwKIAkJCSAgc3RydWN0IHR0bV92YWxpZGF0ZV9idWZmZXIgKnZhbF9idWYpCkBAIC01MzUs
NyArNTM1LDcgQEAgaW50IHZtd19yZXNvdXJjZV9yZXNlcnZlKHN0cnVjdCB2bXdfcmVzb3VyY2Ug
KnJlcywgYm9vbCBpbnRlcnJ1cHRpYmxlLAogICogQHZhbF9idWY6ICAgICAgICBCYWNrdXAgYnVm
ZmVyIGluZm9ybWF0aW9uLgogICovCiBzdGF0aWMgdm9pZAotdm13X3Jlc291cmNlX2JhY2tvZmZf
cmVzZXJ2YXRpb24oc3RydWN0IHd3X2FjcXVpcmVfY3R4ICp0aWNrZXQsCit2bXdfcmVzb3VyY2Vf
YmFja29mZl9yZXNlcnZhdGlvbihzdHJ1Y3QgcmVzZXJ2YXRpb25fY29udGV4dCAqdGlja2V0LAog
CQkJCSBzdHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZlciAqdmFsX2J1ZikKIHsKIAlzdHJ1Y3QgbGlz
dF9oZWFkIHZhbF9saXN0OwpAQCAtNTU4LDcgKzU1OCw3IEBAIHZtd19yZXNvdXJjZV9iYWNrb2Zm
X3Jlc2VydmF0aW9uKHN0cnVjdCB3d19hY3F1aXJlX2N0eCAqdGlja2V0LAogICogQHJlczogICAg
ICAgICAgICBUaGUgcmVzb3VyY2UgdG8gZXZpY3QuCiAgKiBAaW50ZXJydXB0aWJsZTogIFdoZXRo
ZXIgdG8gd2FpdCBpbnRlcnJ1cHRpYmxlLgogICovCi1zdGF0aWMgaW50IHZtd19yZXNvdXJjZV9k
b19ldmljdChzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggKnRpY2tldCwKK3N0YXRpYyBpbnQgdm13X3Jl
c291cmNlX2RvX2V2aWN0KHN0cnVjdCByZXNlcnZhdGlvbl9jb250ZXh0ICp0aWNrZXQsCiAJCQkJ
IHN0cnVjdCB2bXdfcmVzb3VyY2UgKnJlcywgYm9vbCBpbnRlcnJ1cHRpYmxlKQogewogCXN0cnVj
dCB0dG1fdmFsaWRhdGVfYnVmZmVyIHZhbF9idWY7CkBAIC04MjIsNyArODIyLDcgQEAgc3RhdGlj
IHZvaWQgdm13X3Jlc291cmNlX2V2aWN0X3R5cGUoc3RydWN0IHZtd19wcml2YXRlICpkZXZfcHJp
diwKIAlzdHJ1Y3Qgdm13X3Jlc291cmNlICpldmljdF9yZXM7CiAJdW5zaWduZWQgZXJyX2NvdW50
ID0gMDsKIAlpbnQgcmV0OwotCXN0cnVjdCB3d19hY3F1aXJlX2N0eCB0aWNrZXQ7CisJc3RydWN0
IHJlc2VydmF0aW9uX2NvbnRleHQgdGlja2V0OwogCiAJZG8gewogCQlzcGluX2xvY2soJmRldl9w
cml2LT5yZXNvdXJjZV9sb2NrKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngv
dm13Z2Z4X3ZhbGlkYXRpb24uaCBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3ZhbGlk
YXRpb24uaAppbmRleCAxZDIzMjJhZDZmZDUuLmRlZDY2YjNlMGM0YyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfdmFsaWRhdGlvbi5oCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS92bXdnZngvdm13Z2Z4X3ZhbGlkYXRpb24uaApAQCAtNzcsNyArNzcsNyBAQCBzdHJ1Y3Qg
dm13X3ZhbGlkYXRpb25fY29udGV4dCB7CiAJc3RydWN0IGxpc3RfaGVhZCByZXNvdXJjZV9jdHhf
bGlzdDsKIAlzdHJ1Y3QgbGlzdF9oZWFkIGJvX2xpc3Q7CiAJc3RydWN0IGxpc3RfaGVhZCBwYWdl
X2xpc3Q7Ci0Jc3RydWN0IHd3X2FjcXVpcmVfY3R4IHRpY2tldDsKKwlzdHJ1Y3QgcmVzZXJ2YXRp
b25fY29udGV4dCB0aWNrZXQ7CiAJc3RydWN0IG11dGV4ICpyZXNfbXV0ZXg7CiAJdW5zaWduZWQg
aW50IG1lcmdlX2R1cHM7CiAJdW5zaWduZWQgaW50IG1lbV9zaXplX2xlZnQ7CmRpZmYgLS1naXQg
YS9pbmNsdWRlL2RybS90dG0vdHRtX2V4ZWNidWZfdXRpbC5oIGIvaW5jbHVkZS9kcm0vdHRtL3R0
bV9leGVjYnVmX3V0aWwuaAppbmRleCA3ZTQ2Y2M2NzhlN2UuLjgyYzdhMjVhNzBiZSAxMDA2NDQK
LS0tIGEvaW5jbHVkZS9kcm0vdHRtL3R0bV9leGVjYnVmX3V0aWwuaAorKysgYi9pbmNsdWRlL2Ry
bS90dG0vdHRtX2V4ZWNidWZfdXRpbC5oCkBAIC01MiwyMCArNTIsMjAgQEAgc3RydWN0IHR0bV92
YWxpZGF0ZV9idWZmZXIgewogLyoqCiAgKiBmdW5jdGlvbiB0dG1fZXVfYmFja29mZl9yZXNlcnZh
dGlvbgogICoKLSAqIEB0aWNrZXQ6ICAgd3dfYWNxdWlyZV9jdHggZnJvbSByZXNlcnZlIGNhbGwK
KyAqIEB0aWNrZXQ6ICAgcmVzZXJ2YXRpb25fY29udGV4dCBmcm9tIHJlc2VydmUgY2FsbAogICog
QGxpc3Q6ICAgICB0aHJlYWQgcHJpdmF0ZSBsaXN0IG9mIHR0bV92YWxpZGF0ZV9idWZmZXIgc3Ry
dWN0cy4KICAqCiAgKiBVbmRvZXMgYWxsIGJ1ZmZlciB2YWxpZGF0aW9uIHJlc2VydmF0aW9ucyBm
b3IgYm9zIHBvaW50ZWQgdG8gYnkKICAqIHRoZSBsaXN0IGVudHJpZXMuCiAgKi8KIAotZXh0ZXJu
IHZvaWQgdHRtX2V1X2JhY2tvZmZfcmVzZXJ2YXRpb24oc3RydWN0IHd3X2FjcXVpcmVfY3R4ICp0
aWNrZXQsCitleHRlcm4gdm9pZCB0dG1fZXVfYmFja29mZl9yZXNlcnZhdGlvbihzdHJ1Y3QgcmVz
ZXJ2YXRpb25fY29udGV4dCAqdGlja2V0LAogCQkJCSAgICAgICBzdHJ1Y3QgbGlzdF9oZWFkICps
aXN0KTsKIAogLyoqCiAgKiBmdW5jdGlvbiB0dG1fZXVfcmVzZXJ2ZV9idWZmZXJzCiAgKgotICog
QHRpY2tldDogIFtvdXRdIHd3X2FjcXVpcmVfY3R4IGZpbGxlZCBpbiBieSBjYWxsLCBvciBOVUxM
IGlmIG9ubHkKKyAqIEB0aWNrZXQ6ICBbb3V0XSByZXNlcnZhdGlvbl9jb250ZXh0IGZpbGxlZCBp
biBieSBjYWxsZXIsIG9yIE5VTEwgaWYgb25seQogICogICAgICAgICAgIG5vbi1ibG9ja2luZyBy
ZXNlcnZlcyBzaG91bGQgYmUgdHJpZWQuCiAgKiBAbGlzdDogICAgdGhyZWFkIHByaXZhdGUgbGlz
dCBvZiB0dG1fdmFsaWRhdGVfYnVmZmVyIHN0cnVjdHMuCiAgKiBAaW50cjogICAgc2hvdWxkIHRo
ZSB3YWl0IGJlIGludGVycnVwdGlibGUKQEAgLTk3LDE0ICs5NywxNCBAQCBleHRlcm4gdm9pZCB0
dG1fZXVfYmFja29mZl9yZXNlcnZhdGlvbihzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggKnRpY2tldCwK
ICAqIGhhcyBmYWlsZWQuCiAgKi8KIAotZXh0ZXJuIGludCB0dG1fZXVfcmVzZXJ2ZV9idWZmZXJz
KHN0cnVjdCB3d19hY3F1aXJlX2N0eCAqdGlja2V0LAorZXh0ZXJuIGludCB0dG1fZXVfcmVzZXJ2
ZV9idWZmZXJzKHN0cnVjdCByZXNlcnZhdGlvbl9jb250ZXh0ICp0aWNrZXQsCiAJCQkJICBzdHJ1
Y3QgbGlzdF9oZWFkICpsaXN0LCBib29sIGludHIsCiAJCQkJICBzdHJ1Y3QgbGlzdF9oZWFkICpk
dXBzLCBib29sIGRlbF9scnUpOwogCiAvKioKICAqIGZ1bmN0aW9uIHR0bV9ldV9mZW5jZV9idWZm
ZXJfb2JqZWN0cy4KICAqCi0gKiBAdGlja2V0OiAgICAgIHd3X2FjcXVpcmVfY3R4IGZyb20gcmVz
ZXJ2ZSBjYWxsCisgKiBAdGlja2V0OiAgICAgIHJlc2VydmF0aW9uX2NvbnRleHQgZnJvbSByZXNl
cnZlIGNhbGwKICAqIEBsaXN0OiAgICAgICAgdGhyZWFkIHByaXZhdGUgbGlzdCBvZiB0dG1fdmFs
aWRhdGVfYnVmZmVyIHN0cnVjdHMuCiAgKiBAZmVuY2U6ICAgICAgIFRoZSBuZXcgZXhjbHVzaXZl
IGZlbmNlIGZvciB0aGUgYnVmZmVycy4KICAqCkBAIC0xMTQsNyArMTE0LDcgQEAgZXh0ZXJuIGlu
dCB0dG1fZXVfcmVzZXJ2ZV9idWZmZXJzKHN0cnVjdCB3d19hY3F1aXJlX2N0eCAqdGlja2V0LAog
ICoKICAqLwogCi1leHRlcm4gdm9pZCB0dG1fZXVfZmVuY2VfYnVmZmVyX29iamVjdHMoc3RydWN0
IHd3X2FjcXVpcmVfY3R4ICp0aWNrZXQsCitleHRlcm4gdm9pZCB0dG1fZXVfZmVuY2VfYnVmZmVy
X29iamVjdHMoc3RydWN0IHJlc2VydmF0aW9uX2NvbnRleHQgKnRpY2tldCwKIAkJCQkJc3RydWN0
IGxpc3RfaGVhZCAqbGlzdCwKIAkJCQkJc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpOwogCi0tIAoy
LjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRy
aS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
