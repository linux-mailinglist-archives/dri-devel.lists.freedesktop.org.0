Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5CB7B348B96
	for <lists+dri-devel@lfdr.de>; Thu, 25 Mar 2021 09:32:08 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 113216EB60;
	Thu, 25 Mar 2021 08:32:04 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-oi1-x22f.google.com (mail-oi1-x22f.google.com
 [IPv6:2607:f8b0:4864:20::22f])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 411B36EB60
 for <dri-devel@lists.freedesktop.org>; Thu, 25 Mar 2021 08:32:03 +0000 (UTC)
Received: by mail-oi1-x22f.google.com with SMTP id m13so1293320oiw.13
 for <dri-devel@lists.freedesktop.org>; Thu, 25 Mar 2021 01:32:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=OSJJN6tx81YHfrI0UAeuzZVXunphtfPSIhfgCcMn1EY=;
 b=HZqsaxoxbmFaRTQ//LQp4SY3lvKCjGAIZnkgV3B3pQYjLrKu8gOGhSzMmUF4/IA4vG
 r6/dNMHEvFq3Goz0uBhL9JfEgeiQfhdUWIctEpBP5rv+YXA+Yws8OAYJNDzUpzdEiiKv
 H3yAfQ//XrdXTEN0GMthIGLT+I5aGeifbEmZQ=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=OSJJN6tx81YHfrI0UAeuzZVXunphtfPSIhfgCcMn1EY=;
 b=cGjuL8cMXYyjIkQ+rB0WRIej1ytwdD+iPSHxgAhAddpG4MYjC1UiXmhQzNyVgAJHwr
 ofFlSRErqiD6dJln/RrCyNIs0ZnryjxzD+0JC353bB3SOLgcFG+QyLc38nRlCgaAzevr
 YIgQxxvxFUUMzEeDdQjwLBewUoAqpnDa5CFMBiunZCUTUlo+et3j6KK0XWBdqhkEzvuB
 Den5yByMoqsWsvxEZjljk6YAj8j66jbreD6S+46GdXv3ZdYnUVxK1tq4yBnLvJJIjRVN
 N5YGwuJ9GkUauZx9DzyoaeYf8de8sFI7CnZIZPVYfF44CcKpDDD/gT4ylGDG7WtJhUNH
 hEwQ==
X-Gm-Message-State: AOAM530m+eLgxBwUjrj78xVT9zGt9YUhj6q1FzRUaQMCCoKzxjvR9cN7
 d6VeKzv2j/AMCN8/t/Oy3Z6dez8wOzzvbo6VkLjc3w==
X-Google-Smtp-Source: ABdhPJw/hOOj/X/5U+YWyGdFDELGl46IA5TLHxr47YSMIL2MsHlGSNlM7sy38K6UWF63I63W/hIJ10gkkktEVyyzNhg=
X-Received: by 2002:aca:4188:: with SMTP id o130mr5173626oia.101.1616661122459; 
 Thu, 25 Mar 2021 01:32:02 -0700 (PDT)
MIME-Version: 1.0
References: <20210324134845.2338-1-christian.koenig@amd.com>
 <YFuTEl/R73Fvet/y@phenom.ffwll.local>
 <0f2308b4-f36e-ab02-c26d-4065e9972b50@gmail.com>
In-Reply-To: <0f2308b4-f36e-ab02-c26d-4065e9972b50@gmail.com>
From: Daniel Vetter <daniel@ffwll.ch>
Date: Thu, 25 Mar 2021 09:31:51 +0100
Message-ID: <CAKMK7uEocjdROj2_CBr+_uJ7KDjUFM3FQiFN0_6OfHWyQP0bSA@mail.gmail.com>
Subject: Re: [PATCH] drm/ttm: switch back to static allocation limits for now
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <ckoenig.leichtzumerken@gmail.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Linux MM <linux-mm@kvack.org>,
 =?UTF-8?Q?Thomas_Hellstr=C3=B6m_=28VMware=29?= <thomas_os@shipmail.org>,
 Liang.Liang@amd.com, dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBNYXIgMjUsIDIwMjEgYXQgOTowNyBBTSBDaHJpc3RpYW4gS8O2bmlnCjxja29lbmln
LmxlaWNodHp1bWVya2VuQGdtYWlsLmNvbT4gd3JvdGU6Cj4KPiBBbSAyNC4wMy4yMSB1bSAyMDoy
OSBzY2hyaWViIERhbmllbCBWZXR0ZXI6Cj4gPiBPbiBXZWQsIE1hciAyNCwgMjAyMSBhdCAwMjo0
ODo0NVBNICswMTAwLCBDaHJpc3RpYW4gS8O2bmlnIHdyb3RlOgo+ID4+IFRoZSBzaHJpbmtlciBi
YXNlZCBhcHByb2FjaCBzdGlsbCBoYXMgc29tZSBmbGF3cy4gRXNwZWNpYWxseSB0aGF0IHdlIG5l
ZWQKPiA+PiB0ZW1wb3JhcnkgcGFnZXMgdG8gZnJlZSB1cCB0aGUgcGFnZXMgYWxsb2NhdGVkIHRv
IHRoZSBkcml2ZXIgaXMgcHJvYmxlbWF0aWMKPiA+PiBpbiBhIHNocmlua2VyLgo+ID4+Cj4gPj4g
U2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29t
Pgo+ID4+IC0tLQo+ID4+ICAgZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fZGV2aWNlLmMgfCAgMTQg
KystLQo+ID4+ICAgZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fdHQuYyAgICAgfCAxMTIgKysrKysr
KysrKysrLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4+ICAgaW5jbHVkZS9kcm0vdHRtL3R0bV90dC5o
ICAgICAgICAgfCAgIDMgKy0KPiA+PiAgIDMgZmlsZXMgY2hhbmdlZCwgNTMgaW5zZXJ0aW9ucygr
KSwgNzYgZGVsZXRpb25zKC0pCj4gPj4KPiA+PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3R0bS90dG1fZGV2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9kZXZpY2UuYwo+ID4+
IGluZGV4IDk1ZTFiN2IxZjJlNi4uMzg4ZGEyYTdmMGJiIDEwMDY0NAo+ID4+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS90dG0vdHRtX2RldmljZS5jCj4gPj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fZGV2aWNlLmMKPiA+PiBAQCAtNTMsNyArNTMsNiBAQCBzdGF0aWMgdm9pZCB0dG1fZ2xv
YmFsX3JlbGVhc2Uodm9pZCkKPiA+PiAgICAgICAgICAgICAgZ290byBvdXQ7Cj4gPj4KPiA+PiAg
ICAgIHR0bV9wb29sX21ncl9maW5pKCk7Cj4gPj4gLSAgICB0dG1fdHRfbWdyX2ZpbmkoKTsKPiA+
Pgo+ID4+ICAgICAgX19mcmVlX3BhZ2UoZ2xvYi0+ZHVtbXlfcmVhZF9wYWdlKTsKPiA+PiAgICAg
IG1lbXNldChnbG9iLCAwLCBzaXplb2YoKmdsb2IpKTsKPiA+PiBAQCAtNjQsNyArNjMsNyBAQCBz
dGF0aWMgdm9pZCB0dG1fZ2xvYmFsX3JlbGVhc2Uodm9pZCkKPiA+PiAgIHN0YXRpYyBpbnQgdHRt
X2dsb2JhbF9pbml0KHZvaWQpCj4gPj4gICB7Cj4gPj4gICAgICBzdHJ1Y3QgdHRtX2dsb2JhbCAq
Z2xvYiA9ICZ0dG1fZ2xvYjsKPiA+PiAtICAgIHVuc2lnbmVkIGxvbmcgbnVtX3BhZ2VzOwo+ID4+
ICsgICAgdW5zaWduZWQgbG9uZyBudW1fcGFnZXMsIG51bV9kbWEzMjsKPiA+PiAgICAgIHN0cnVj
dCBzeXNpbmZvIHNpOwo+ID4+ICAgICAgaW50IHJldCA9IDA7Cj4gPj4gICAgICB1bnNpZ25lZCBp
Owo+ID4+IEBAIC03OSw4ICs3OCwxNSBAQCBzdGF0aWMgaW50IHR0bV9nbG9iYWxfaW5pdCh2b2lk
KQo+ID4+ICAgICAgICogc3lzdGVtIG1lbW9yeS4KPiA+PiAgICAgICAqLwo+ID4+ICAgICAgbnVt
X3BhZ2VzID0gKCh1NjQpc2kudG90YWxyYW0gKiBzaS5tZW1fdW5pdCkgPj4gUEFHRV9TSElGVDsK
PiA+PiAtICAgIHR0bV9wb29sX21ncl9pbml0KG51bV9wYWdlcyAqIDUwIC8gMTAwKTsKPiA+PiAt
ICAgIHR0bV90dF9tZ3JfaW5pdCgpOwo+ID4+ICsgICAgbnVtX3BhZ2VzIC89IDI7Cj4gPj4gKwo+
ID4+ICsgICAgLyogQnV0IGZvciBETUEzMiB3ZSBsaW1pdCBvdXJzZWxmIHRvIG9ubHkgdXNlIDJH
aUIgbWF4aW11bS4gKi8KPiA+PiArICAgIG51bV9kbWEzMiA9ICh1NjQpKHNpLnRvdGFscmFtIC0g
c2kudG90YWxoaWdoKSAqIHNpLm1lbV91bml0Cj4gPj4gKyAgICAgICAgICAgID4+IFBBR0VfU0hJ
RlQ7Cj4gPj4gKyAgICBudW1fZG1hMzIgPSBtaW4obnVtX2RtYTMyLCAyVUwgPDwgKDMwIC0gUEFH
RV9TSElGVCkpOwo+ID4+ICsKPiA+PiArICAgIHR0bV9wb29sX21ncl9pbml0KG51bV9wYWdlcyk7
Cj4gPj4gKyAgICB0dG1fdHRfbWdyX2luaXQobnVtX3BhZ2VzLCBudW1fZG1hMzIpOwo+ID4+Cj4g
Pj4gICAgICBzcGluX2xvY2tfaW5pdCgmZ2xvYi0+bHJ1X2xvY2spOwo+ID4+ICAgICAgZ2xvYi0+
ZHVtbXlfcmVhZF9wYWdlID0gYWxsb2NfcGFnZShfX0dGUF9aRVJPIHwgR0ZQX0RNQTMyKTsKPiA+
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fdHQuYyBiL2RyaXZlcnMvZ3B1
L2RybS90dG0vdHRtX3R0LmMKPiA+PiBpbmRleCAyZjA4MzNjOThkMmMuLjVkODgyMDcyNWI3NSAx
MDA2NDQKPiA+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90dC5jCj4gPj4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fdHQuYwo+ID4+IEBAIC00MCw4ICs0MCwxOCBAQAo+ID4+
Cj4gPj4gICAjaW5jbHVkZSAidHRtX21vZHVsZS5oIgo+ID4+Cj4gPj4gLXN0YXRpYyBzdHJ1Y3Qg
c2hyaW5rZXIgbW1fc2hyaW5rZXI7Cj4gPj4gLXN0YXRpYyBhdG9taWNfbG9uZ190IHN3YXBhYmxl
X3BhZ2VzOwo+ID4+ICtzdGF0aWMgdW5zaWduZWQgbG9uZyB0dG1fcGFnZXNfbGltaXQ7Cj4gPj4g
Kwo+ID4+ICtNT0RVTEVfUEFSTV9ERVNDKHBhZ2VzX2xpbWl0LCAiTGltaXQgZm9yIHRoZSBhbGxv
Y2F0ZWQgcGFnZXMiKTsKPiA+PiArbW9kdWxlX3BhcmFtX25hbWVkKHBhZ2VzX2xpbWl0LCB0dG1f
cGFnZXNfbGltaXQsIHVsb25nLCAwNjQ0KTsKPiA+PiArCj4gPj4gK3N0YXRpYyB1bnNpZ25lZCBs
b25nIHR0bV9kbWEzMl9wYWdlc19saW1pdDsKPiA+PiArCj4gPj4gK01PRFVMRV9QQVJNX0RFU0Mo
ZG1hMzJfcGFnZXNfbGltaXQsICJMaW1pdCBmb3IgdGhlIGFsbG9jYXRlZCBETUEzMiBwYWdlcyIp
Owo+ID4+ICttb2R1bGVfcGFyYW1fbmFtZWQoZG1hMzJfcGFnZXNfbGltaXQsIHR0bV9kbWEzMl9w
YWdlc19saW1pdCwgdWxvbmcsIDA2NDQpOwo+ID4+ICsKPiA+PiArc3RhdGljIGF0b21pY19sb25n
X3QgdHRtX3BhZ2VzX2FsbG9jYXRlZDsKPiA+PiArc3RhdGljIGF0b21pY19sb25nX3QgdHRtX2Rt
YTMyX3BhZ2VzX2FsbG9jYXRlZDsKPiA+IE1ha2luZyB0aGlzIGNvbmZpZ3VyYWJsZSBsb29rcyBh
biBhd2Z1bCBsb3QgbGlrZSAiam9iIGRvbmUsIG1vdmUgb24iLiBKdXN0Cj4gPiB0aGUgcmV2ZXJ0
IHRvIGhhcmRjb2RlZCA1MCUgKG9yIEkgZ3Vlc3MganVzdCByZXZlcnQgdGhlIHNocmlua2VyIHBh
dGNoIGF0Cj4gPiB0aGF0IHBvaW50KSBmb3IgLWZpeGVzIGlzIGltbyBiZXR0ZXIuCj4KPiBXZWxs
IHRoaXMgaXMgdGhlIHJldmVydCB0byBoYXJkY29kZWQgNTAlLiBXZSBoYWQgdGhhdCBjb25maWd1
cmFibGUKPiBiZWZvcmUgYW5kIGhhdmUgaXQgY29uZmlndXJhYmxlIG5vdy4KCkhtIEkgbG9va2Vk
LCBidXQgSSBtaXNzZWQgaXQgSSBndWVzcy4KCkFja2VkLWJ5OiBEYW5pZWwgVmV0dGVyIDxkYW5p
ZWwudmV0dGVyQGZmd2xsLmNoPgoKSSBqdXN0IHJlYWxseSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBk
b24ndCB3YWxrIGRvd24gdGhlIHBhdGggb2YgZmlyc3QKcmVpbnZlbnRpbmcga3N3YXBkLCB0aGVu
IHJlaW52ZW50aW5nIGRpcmVjdCByZWNsYWltIChpOTE1LWdlbSBoYXMgZG9uZQp0aGF0IGJlY2F1
c2Ugb2YgdGhlIHNpbmdsZSBkZXYtPnN0cnVjdF9tdXRleCwgZGVzcGl0ZSBvdXIgc2hyaW5rZXIs
Cml0J3MgcmVhbCB1Z2x5IGFuZCBmcmFnaWxlKSBpbiBzZWxlY3RpdmUgY2FsbHMsIHRoZW4gcmVh
bGl6aW5nIHRoYXQncwpzdGlsbCBub3QgZW5vdWdoIGJlY2F1c2UgZXNwZWNpYWxseSBjb21wdXRl
IGxvdmVzIHVzZXJwdHIsIGFuZCB0aGVuCndlJ3JlIGJhY2sgdG8gaGF2aW5nIHRvIHJlaW52ZW50
IHRoZSBHRlAgaGllcmFyY2h5LiBCZWVuIHRoZXJlIHdpdGgKaTkxNS1nZW0gZm9yIGRldi0+c3Ry
dWN0X211dGV4IHJlYXNvbnMsIGJ1dCB0aGUgZWZmZWN0IGlzIGtpbmRhCnNpbWlsYXI6IEluIHNv
bWUgY2FzZXMgdGhlIHNocmlua2VyIGlzIGRlZmFjdG8gbm90IHRoZXJlLCBhbmQKZXZlcnl0aGlu
ZyB0aGVuIGtlZWxzIG92ZXIuCgpidHcgb25lIHRoaW5nIHRoYXQgY3Jvc3MgbXkgbWluZCBhIGJ1
bmNoIHRpbWVzIGlzIHRvIGFkZCBhIEdGUF9OT0dQVS4KVGhhdCBmaXhlcyB0aGluZ3MgZm9yIGV2
ZXJ5dGhpbmcgZWxzZSBleGNlcHQgb3VyIG93biBncHUgbWVtb3J5IHVzYWdlLAphbmQgc2luY2Ug
dGhlIGdvYWwgaXMgdG8gbGV0IHRoYXQgYXBwcm9hY2ggMTAwJSBpdCdzIG5vdCByZWFsbHkgYQpn
YWluLgoKPiBSZXZlcnRpbmcgZXZlcnl0aGluZyBiYWNrIHdvdWxkIG1lYW4gdGhhdCB3ZSBhbHNv
IG5lZWQgdG8gcmV2ZXJ0IHRoZQo+IHN5c2ZzIGNoYW5nZXMgYW5kIG1vdmUgYWxsIHRoZSBtZW1v
cnkgYWNjb3VudGluZyBjb2RlIGZyb20gVk1XR0ZYIGJhY2sKPiBpbnRvIFRUTS4KCkhtIHllYWgg
Li4uCi1EYW5pZWwKCj4gQ2hyaXN0aWFuLgo+Cj4gPgo+ID4gVGhlbiBJIGd1ZXNzIHJldHJ5IGFn
YWluIGZvciA1LjE0IG9yIHNvLgo+ID4gLURhbmllbAo+ID4KPiA+Pgo+ID4+ICAgLyoKPiA+PiAg
ICAqIEFsbG9jYXRlcyBhIHR0bSBzdHJ1Y3R1cmUgZm9yIHRoZSBnaXZlbiBCTy4KPiA+PiBAQCAt
Mjk0LDggKzMwNCw2IEBAIHN0YXRpYyB2b2lkIHR0bV90dF9hZGRfbWFwcGluZyhzdHJ1Y3QgdHRt
X2RldmljZSAqYmRldiwgc3RydWN0IHR0bV90dCAqdHRtKQo+ID4+Cj4gPj4gICAgICBmb3IgKGkg
PSAwOyBpIDwgdHRtLT5udW1fcGFnZXM7ICsraSkKPiA+PiAgICAgICAgICAgICAgdHRtLT5wYWdl
c1tpXS0+bWFwcGluZyA9IGJkZXYtPmRldl9tYXBwaW5nOwo+ID4+IC0KPiA+PiAtICAgIGF0b21p
Y19sb25nX2FkZCh0dG0tPm51bV9wYWdlcywgJnN3YXBhYmxlX3BhZ2VzKTsKPiA+PiAgIH0KPiA+
Pgo+ID4+ICAgaW50IHR0bV90dF9wb3B1bGF0ZShzdHJ1Y3QgdHRtX2RldmljZSAqYmRldiwKPiA+
PiBAQCAtMzA5LDEyICszMTcsMjUgQEAgaW50IHR0bV90dF9wb3B1bGF0ZShzdHJ1Y3QgdHRtX2Rl
dmljZSAqYmRldiwKPiA+PiAgICAgIGlmICh0dG1fdHRfaXNfcG9wdWxhdGVkKHR0bSkpCj4gPj4g
ICAgICAgICAgICAgIHJldHVybiAwOwo+ID4+Cj4gPj4gKyAgICBhdG9taWNfbG9uZ19hZGQodHRt
LT5udW1fcGFnZXMsICZ0dG1fcGFnZXNfYWxsb2NhdGVkKTsKPiA+PiArICAgIGlmIChiZGV2LT5w
b29sLnVzZV9kbWEzMikKPiA+PiArICAgICAgICAgICAgYXRvbWljX2xvbmdfYWRkKHR0bS0+bnVt
X3BhZ2VzLCAmdHRtX2RtYTMyX3BhZ2VzX2FsbG9jYXRlZCk7Cj4gPj4gKwo+ID4+ICsgICAgd2hp
bGUgKGF0b21pY19sb25nX3JlYWQoJnR0bV9wYWdlc19hbGxvY2F0ZWQpID4gdHRtX3BhZ2VzX2xp
bWl0IHx8Cj4gPj4gKyAgICAgICAgICAgYXRvbWljX2xvbmdfcmVhZCgmdHRtX2RtYTMyX3BhZ2Vz
X2FsbG9jYXRlZCkgPgo+ID4+ICsgICAgICAgICAgIHR0bV9kbWEzMl9wYWdlc19saW1pdCkgewo+
ID4+ICsKPiA+PiArICAgICAgICAgICAgcmV0ID0gdHRtX2JvX3N3YXBvdXQoY3R4LCBHRlBfS0VS
TkVMKTsKPiA+PiArICAgICAgICAgICAgaWYgKHJldCkKPiA+PiArICAgICAgICAgICAgICAgICAg
ICBnb3RvIGVycm9yOwo+ID4+ICsgICAgfQo+ID4+ICsKPiA+PiAgICAgIGlmIChiZGV2LT5mdW5j
cy0+dHRtX3R0X3BvcHVsYXRlKQo+ID4+ICAgICAgICAgICAgICByZXQgPSBiZGV2LT5mdW5jcy0+
dHRtX3R0X3BvcHVsYXRlKGJkZXYsIHR0bSwgY3R4KTsKPiA+PiAgICAgIGVsc2UKPiA+PiAgICAg
ICAgICAgICAgcmV0ID0gdHRtX3Bvb2xfYWxsb2MoJmJkZXYtPnBvb2wsIHR0bSwgY3R4KTsKPiA+
PiAgICAgIGlmIChyZXQpCj4gPj4gLSAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gPj4gKyAgICAg
ICAgICAgIGdvdG8gZXJyb3I7Cj4gPj4KPiA+PiAgICAgIHR0bV90dF9hZGRfbWFwcGluZyhiZGV2
LCB0dG0pOwo+ID4+ICAgICAgdHRtLT5wYWdlX2ZsYWdzIHw9IFRUTV9QQUdFX0ZMQUdfUFJJVl9Q
T1BVTEFURUQ7Cj4gPj4gQEAgLTMyNyw2ICszNDgsMTIgQEAgaW50IHR0bV90dF9wb3B1bGF0ZShz
dHJ1Y3QgdHRtX2RldmljZSAqYmRldiwKPiA+PiAgICAgIH0KPiA+Pgo+ID4+ICAgICAgcmV0dXJu
IDA7Cj4gPj4gKwo+ID4+ICtlcnJvcjoKPiA+PiArICAgIGF0b21pY19sb25nX3N1Yih0dG0tPm51
bV9wYWdlcywgJnR0bV9wYWdlc19hbGxvY2F0ZWQpOwo+ID4+ICsgICAgaWYgKGJkZXYtPnBvb2wu
dXNlX2RtYTMyKQo+ID4+ICsgICAgICAgICAgICBhdG9taWNfbG9uZ19zdWIodHRtLT5udW1fcGFn
ZXMsICZ0dG1fZG1hMzJfcGFnZXNfYWxsb2NhdGVkKTsKPiA+PiArICAgIHJldHVybiByZXQ7Cj4g
Pj4gICB9Cj4gPj4gICBFWFBPUlRfU1lNQk9MKHR0bV90dF9wb3B1bGF0ZSk7Cj4gPj4KPiA+PiBA
QCAtMzQyLDEyICszNjksOSBAQCBzdGF0aWMgdm9pZCB0dG1fdHRfY2xlYXJfbWFwcGluZyhzdHJ1
Y3QgdHRtX3R0ICp0dG0pCj4gPj4gICAgICAgICAgICAgICgqcGFnZSktPm1hcHBpbmcgPSBOVUxM
Owo+ID4+ICAgICAgICAgICAgICAoKnBhZ2UrKyktPmluZGV4ID0gMDsKPiA+PiAgICAgIH0KPiA+
PiAtCj4gPj4gLSAgICBhdG9taWNfbG9uZ19zdWIodHRtLT5udW1fcGFnZXMsICZzd2FwYWJsZV9w
YWdlcyk7Cj4gPj4gICB9Cj4gPj4KPiA+PiAtdm9pZCB0dG1fdHRfdW5wb3B1bGF0ZShzdHJ1Y3Qg
dHRtX2RldmljZSAqYmRldiwKPiA+PiAtICAgICAgICAgICAgICAgICAgIHN0cnVjdCB0dG1fdHQg
KnR0bSkKPiA+PiArdm9pZCB0dG1fdHRfdW5wb3B1bGF0ZShzdHJ1Y3QgdHRtX2RldmljZSAqYmRl
diwgc3RydWN0IHR0bV90dCAqdHRtKQo+ID4+ICAgewo+ID4+ICAgICAgaWYgKCF0dG1fdHRfaXNf
cG9wdWxhdGVkKHR0bSkpCj4gPj4gICAgICAgICAgICAgIHJldHVybjsKPiA+PiBAQCAtMzU3LDc2
ICszODEsMjQgQEAgdm9pZCB0dG1fdHRfdW5wb3B1bGF0ZShzdHJ1Y3QgdHRtX2RldmljZSAqYmRl
diwKPiA+PiAgICAgICAgICAgICAgYmRldi0+ZnVuY3MtPnR0bV90dF91bnBvcHVsYXRlKGJkZXYs
IHR0bSk7Cj4gPj4gICAgICBlbHNlCj4gPj4gICAgICAgICAgICAgIHR0bV9wb29sX2ZyZWUoJmJk
ZXYtPnBvb2wsIHR0bSk7Cj4gPj4gLSAgICB0dG0tPnBhZ2VfZmxhZ3MgJj0gflRUTV9QQUdFX0ZM
QUdfUFJJVl9QT1BVTEFURUQ7Cj4gPj4gLX0KPiA+PiAtCj4gPj4gLS8qIEFzIGxvbmcgYXMgcGFn
ZXMgYXJlIGF2YWlsYWJsZSBtYWtlIHN1cmUgdG8gcmVsZWFzZSBhdCBsZWFzdCBvbmUgKi8KPiA+
PiAtc3RhdGljIHVuc2lnbmVkIGxvbmcgdHRtX3R0X3Nocmlua2VyX3NjYW4oc3RydWN0IHNocmlu
a2VyICpzaHJpbmssCj4gPj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
c3RydWN0IHNocmlua19jb250cm9sICpzYykKPiA+PiAtewo+ID4+IC0gICAgc3RydWN0IHR0bV9v
cGVyYXRpb25fY3R4IGN0eCA9IHsKPiA+PiAtICAgICAgICAgICAgLm5vX3dhaXRfZ3B1ID0gZmFs
c2UKPiA+PiAtICAgIH07Cj4gPj4gLSAgICBpbnQgcmV0Owo+ID4+IC0KPiA+PiAtICAgIHJldCA9
IHR0bV9ib19zd2Fwb3V0KCZjdHgsIEdGUF9OT0ZTKTsKPiA+PiAtICAgIHJldHVybiByZXQgPCAw
ID8gU0hSSU5LX0VNUFRZIDogcmV0Owo+ID4+IC19Cj4gPj4gLQo+ID4+IC0vKiBSZXR1cm4gdGhl
IG51bWJlciBvZiBwYWdlcyBhdmFpbGFibGUgb3IgU0hSSU5LX0VNUFRZIGlmIHdlIGhhdmUgbm9u
ZSAqLwo+ID4+IC1zdGF0aWMgdW5zaWduZWQgbG9uZyB0dG1fdHRfc2hyaW5rZXJfY291bnQoc3Ry
dWN0IHNocmlua2VyICpzaHJpbmssCj4gPj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHN0cnVjdCBzaHJpbmtfY29udHJvbCAqc2MpCj4gPj4gLXsKPiA+PiAtICAgIHVu
c2lnbmVkIGxvbmcgbnVtX3BhZ2VzOwo+ID4+IC0KPiA+PiAtICAgIG51bV9wYWdlcyA9IGF0b21p
Y19sb25nX3JlYWQoJnN3YXBhYmxlX3BhZ2VzKTsKPiA+PiAtICAgIHJldHVybiBudW1fcGFnZXMg
PyBudW1fcGFnZXMgOiBTSFJJTktfRU1QVFk7Cj4gPj4gLX0KPiA+Pgo+ID4+IC0jaWZkZWYgQ09O
RklHX0RFQlVHX0ZTCj4gPj4gKyAgICBhdG9taWNfbG9uZ19zdWIodHRtLT5udW1fcGFnZXMsICZ0
dG1fcGFnZXNfYWxsb2NhdGVkKTsKPiA+PiArICAgIGlmIChiZGV2LT5wb29sLnVzZV9kbWEzMikK
PiA+PiArICAgICAgICAgICAgYXRvbWljX2xvbmdfc3ViKHR0bS0+bnVtX3BhZ2VzLCAmdHRtX2Rt
YTMyX3BhZ2VzX2FsbG9jYXRlZCk7Cj4gPj4KPiA+PiAtLyogVGVzdCB0aGUgc2hyaW5rZXIgZnVu
Y3Rpb25zIGFuZCBkdW1wIHRoZSByZXN1bHQgKi8KPiA+PiAtc3RhdGljIGludCB0dG1fdHRfZGVi
dWdmc19zaHJpbmtfc2hvdyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpCj4gPj4gLXsK
PiA+PiAtICAgIHN0cnVjdCBzaHJpbmtfY29udHJvbCBzYyA9IHsgLmdmcF9tYXNrID0gR0ZQX0tF
Uk5FTCB9Owo+ID4+IC0KPiA+PiAtICAgIGZzX3JlY2xhaW1fYWNxdWlyZShHRlBfS0VSTkVMKTsK
PiA+PiAtICAgIHNlcV9wcmludGYobSwgIiVsdS8lbHVcbiIsIHR0bV90dF9zaHJpbmtlcl9jb3Vu
dCgmbW1fc2hyaW5rZXIsICZzYyksCj4gPj4gLSAgICAgICAgICAgICAgIHR0bV90dF9zaHJpbmtl
cl9zY2FuKCZtbV9zaHJpbmtlciwgJnNjKSk7Cj4gPj4gLSAgICBmc19yZWNsYWltX3JlbGVhc2Uo
R0ZQX0tFUk5FTCk7Cj4gPj4gLQo+ID4+IC0gICAgcmV0dXJuIDA7Cj4gPj4gKyAgICB0dG0tPnBh
Z2VfZmxhZ3MgJj0gflRUTV9QQUdFX0ZMQUdfUFJJVl9QT1BVTEFURUQ7Cj4gPj4gICB9Cj4gPj4g
LURFRklORV9TSE9XX0FUVFJJQlVURSh0dG1fdHRfZGVidWdmc19zaHJpbmspOwo+ID4+IC0KPiA+
PiAtI2VuZGlmCj4gPj4gLQo+ID4+IC0KPiA+Pgo+ID4+ICAgLyoqCj4gPj4gICAgKiB0dG1fdHRf
bWdyX2luaXQgLSByZWdpc3RlciB3aXRoIHRoZSBNTSBzaHJpbmtlcgo+ID4+ICAgICoKPiA+PiAg
ICAqIFJlZ2lzdGVyIHdpdGggdGhlIE1NIHNocmlua2VyIGZvciBzd2FwcGluZyBvdXQgQk9zLgo+
ID4+ICAgICovCj4gPj4gLWludCB0dG1fdHRfbWdyX2luaXQodm9pZCkKPiA+PiArdm9pZCB0dG1f
dHRfbWdyX2luaXQodW5zaWduZWQgbG9uZyBudW1fcGFnZXMsIHVuc2lnbmVkIGxvbmcgbnVtX2Rt
YTMyX3BhZ2VzKQo+ID4+ICAgewo+ID4+IC0jaWZkZWYgQ09ORklHX0RFQlVHX0ZTCj4gPj4gLSAg
ICBkZWJ1Z2ZzX2NyZWF0ZV9maWxlKCJ0dF9zaHJpbmsiLCAwNDAwLCB0dG1fZGVidWdmc19yb290
LCBOVUxMLAo+ID4+IC0gICAgICAgICAgICAgICAgICAgICAgICAmdHRtX3R0X2RlYnVnZnNfc2hy
aW5rX2ZvcHMpOwo+ID4+IC0jZW5kaWYKPiA+PiAtCj4gPj4gLSAgICBtbV9zaHJpbmtlci5jb3Vu
dF9vYmplY3RzID0gdHRtX3R0X3Nocmlua2VyX2NvdW50Owo+ID4+IC0gICAgbW1fc2hyaW5rZXIu
c2Nhbl9vYmplY3RzID0gdHRtX3R0X3Nocmlua2VyX3NjYW47Cj4gPj4gLSAgICBtbV9zaHJpbmtl
ci5zZWVrcyA9IDE7Cj4gPj4gLSAgICByZXR1cm4gcmVnaXN0ZXJfc2hyaW5rZXIoJm1tX3Nocmlu
a2VyKTsKPiA+PiAtfQo+ID4+ICsgICAgaWYgKCF0dG1fcGFnZXNfbGltaXQpCj4gPj4gKyAgICAg
ICAgICAgIHR0bV9wYWdlc19saW1pdCA9IG51bV9wYWdlczsKPiA+Pgo+ID4+IC0vKioKPiA+PiAt
ICogdHRtX3R0X21ncl9maW5pIC0gdW5yZWdpc3RlciBvdXIgTU0gc2hyaW5rZXIKPiA+PiAtICoK
PiA+PiAtICogVW5yZWdpc3RlcnMgdGhlIE1NIHNocmlua2VyLgo+ID4+IC0gKi8KPiA+PiAtdm9p
ZCB0dG1fdHRfbWdyX2Zpbmkodm9pZCkKPiA+PiAtewo+ID4+IC0gICAgdW5yZWdpc3Rlcl9zaHJp
bmtlcigmbW1fc2hyaW5rZXIpOwo+ID4+ICsgICAgaWYgKCF0dG1fZG1hMzJfcGFnZXNfbGltaXQp
Cj4gPj4gKyAgICAgICAgICAgIHR0bV9kbWEzMl9wYWdlc19saW1pdCA9IG51bV9kbWEzMl9wYWdl
czsKPiA+PiAgIH0KPiA+PiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vdHRtL3R0bV90dC5oIGIv
aW5jbHVkZS9kcm0vdHRtL3R0bV90dC5oCj4gPj4gaW5kZXggMDY5ZjgxMzAyNDFhLi4xMzRkMDll
Zjc3NjYgMTAwNjQ0Cj4gPj4gLS0tIGEvaW5jbHVkZS9kcm0vdHRtL3R0bV90dC5oCj4gPj4gKysr
IGIvaW5jbHVkZS9kcm0vdHRtL3R0bV90dC5oCj4gPj4gQEAgLTE1Nyw4ICsxNTcsNyBAQCBpbnQg
dHRtX3R0X3BvcHVsYXRlKHN0cnVjdCB0dG1fZGV2aWNlICpiZGV2LCBzdHJ1Y3QgdHRtX3R0ICp0
dG0sIHN0cnVjdCB0dG1fb3Blcgo+ID4+ICAgICovCj4gPj4gICB2b2lkIHR0bV90dF91bnBvcHVs
YXRlKHN0cnVjdCB0dG1fZGV2aWNlICpiZGV2LCBzdHJ1Y3QgdHRtX3R0ICp0dG0pOwo+ID4+Cj4g
Pj4gLWludCB0dG1fdHRfbWdyX2luaXQodm9pZCk7Cj4gPj4gLXZvaWQgdHRtX3R0X21ncl9maW5p
KHZvaWQpOwo+ID4+ICt2b2lkIHR0bV90dF9tZ3JfaW5pdCh1bnNpZ25lZCBsb25nIG51bV9wYWdl
cywgdW5zaWduZWQgbG9uZyBudW1fZG1hMzJfcGFnZXMpOwo+ID4+Cj4gPj4gICAjaWYgSVNfRU5B
QkxFRChDT05GSUdfQUdQKQo+ID4+ICAgI2luY2x1ZGUgPGxpbnV4L2FncF9iYWNrZW5kLmg+Cj4g
Pj4gLS0KPiA+PiAyLjI1LjEKPiA+Pgo+Cj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KPiBkcmktZGV2ZWwgbWFpbGluZyBsaXN0Cj4gZHJpLWRldmVsQGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vZHJpLWRldmVsCgoKCi0tIApEYW5pZWwgVmV0dGVyClNvZnR3YXJlIEVuZ2lu
ZWVyLCBJbnRlbCBDb3Jwb3JhdGlvbgpodHRwOi8vYmxvZy5mZndsbC5jaApfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0
CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
