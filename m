Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4C246110365
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 18:26:52 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3A5816EA1F;
	Tue,  3 Dec 2019 17:26:48 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pj1-x1044.google.com (mail-pj1-x1044.google.com
 [IPv6:2607:f8b0:4864:20::1044])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7898C6EA1D
 for <dri-devel@lists.freedesktop.org>; Tue,  3 Dec 2019 17:26:46 +0000 (UTC)
Received: by mail-pj1-x1044.google.com with SMTP id z21so1761693pjq.13
 for <dri-devel@lists.freedesktop.org>; Tue, 03 Dec 2019 09:26:46 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=ytFFh3YEL5nl6UWhv/otonp04dC0j/SQX6ZTHkECKQk=;
 b=e8YVtMwGJcDg1Z9V0OqfwxYgiFrNkUlqnMfYmNz3jDVn3VHzkuR0OjNUTdKDW8z8Ts
 3IgbkX6imHgSg4Wobvwrj3ZDx22Xy/1B7VQV/VqJ5CIODYUoY+3rIrerxFHM814gTdNS
 hqOReU/39fziKKL/ZVpTkDpgwjeOOX+Bx1crwDjz7oquB+xhAT5wKjQa8Gk30FkCprVl
 4W2j0a6ygf5n9Ggrgo2Nj5Wn9Z3bdNz9DopDK1OXzoeHdy+cXgdWC4sLd4gZODRs9kW5
 ru0E/PzOlRB71I6WH7VXd6TGtmffDS2GibHaKxe58iDOL82c37s59eqArcvr3pgCjjOv
 e94g==
X-Gm-Message-State: APjAAAUsLisCV2ycsXaS+3Bn3W77CKIbZl0cDG77xewUwSPmvX+54Wol
 baPKU9eCFVZ9WtrNmTlnWMCBHQ==
X-Google-Smtp-Source: APXvYqw/zzmMn92NsQV5ghRMmKAs94jY49wgC/Pg5qwCWBm5uJOy5/M+6ELonEVO0ifq8idem/Hv9A==
X-Received: by 2002:a17:902:7b82:: with SMTP id
 w2mr5927649pll.92.1575394005872; 
 Tue, 03 Dec 2019 09:26:45 -0800 (PST)
Received: from localhost.localdomain ([2601:1c2:680:1319:692:26ff:feda:3a81])
 by smtp.gmail.com with ESMTPSA id
 l9sm4066177pgh.34.2019.12.03.09.26.44
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 03 Dec 2019 09:26:45 -0800 (PST)
From: John Stultz <john.stultz@linaro.org>
To: lkml <linux-kernel@vger.kernel.org>
Subject: [RESEND][PATCH v16 1/5] dma-buf: Add dma-buf heaps framework
Date: Tue,  3 Dec 2019 17:26:37 +0000
Message-Id: <20191203172641.66642-2-john.stultz@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20191203172641.66642-1-john.stultz@linaro.org>
References: <20191203172641.66642-1-john.stultz@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=ytFFh3YEL5nl6UWhv/otonp04dC0j/SQX6ZTHkECKQk=;
 b=NbdtVzm4VvHyK3eCQNUdKRSM/S7UguItlUQeSnXNuKsgCV3+Q0YWeMheAKSZOCg4iB
 FuzqkdS65P5ec/7kMfNBaC2yZB3jwJnBG948EnRpYsDHLkk0I8A99qUT70livSZ0V+qs
 L1KJfh0Bw1vgnYMvyslekzPxY7P6u5F/IE6aekjRIM6EJvkvl5uDy0gd0Ydz1Vh7jdtp
 zt4je19LXgKL2jv8H2qxl5gL9BVTWeRk0bxdBBXp48Z+9jBzzs79c6ziC568qVCQAPCI
 DzoAJYL4QGJcJX1yYXxIxmRzMCKA3+Cd/u5SL0QWHrpVAf2SWf1QTNdqPQIJQ1wLUqsy
 qalw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hillf Danton <hdanton@sina.com>, Sandeep Patil <sspatil@google.com>,
 Sudipto Paul <Sudipto.Paul@arm.com>,
 Vincent Donnefort <Vincent.Donnefort@arm.com>, Chenbo Feng <fengc@google.com>,
 Alistair Strachan <astrachan@google.com>, Liam Mark <lmark@codeaurora.org>,
 "Andrew F. Davis" <afd@ti.com>, Christoph Hellwig <hch@infradead.org>,
 dri-devel@lists.freedesktop.org, Hridya Valsaraju <hridya@google.com>,
 Pratik Patel <pratikp@codeaurora.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogIkFuZHJldyBGLiBEYXZpcyIgPGFmZEB0aS5jb20+CgpUaGlzIGZyYW1ld29yayBhbGxv
d3MgYSB1bmlmaWVkIHVzZXJzcGFjZSBpbnRlcmZhY2UgZm9yIGRtYS1idWYKZXhwb3J0ZXJzLCBh
bGxvd2luZyB1c2VybGFuZCB0byBhbGxvY2F0ZSBzcGVjaWZpYyB0eXBlcyBvZiBtZW1vcnkKZm9y
IHVzZSBpbiBkbWEtYnVmIHNoYXJpbmcuCgpFYWNoIGhlYXAgaXMgZ2l2ZW4gaXRzIG93biBkZXZp
Y2Ugbm9kZSwgd2hpY2ggYSB1c2VyIGNhbiBhbGxvY2F0ZQphIGRtYS1idWYgZmQgZnJvbSB1c2lu
ZyB0aGUgRE1BX0hFQVBfSU9DX0FMTE9DLgoKVGhpcyBjb2RlIGlzIGFuIGV2b2x1aXRvbiBvZiB0
aGUgQW5kcm9pZCBJT04gaW1wbGVtZW50YXRpb24sCmFuZCBhIGJpZyB0aGFua3MgaXMgZHVlIHRv
IGl0cyBhdXRob3JzL21haW50YWluZXJzIG92ZXIgdGltZQpmb3IgdGhlaXIgZWZmb3J0OgogIFJl
YmVjY2EgU2NodWx0eiBaYXZpbiwgQ29saW4gQ3Jvc3MsIEJlbmphbWluIEdhaWduYXJkLAogIExh
dXJhIEFiYm90dCwgYW5kIG1hbnkgb3RoZXIgY29udHJpYnV0b3JzIQoKQ2M6IExhdXJhIEFiYm90
dCA8bGFiYm90dEByZWRoYXQuY29tPgpDYzogQmVuamFtaW4gR2FpZ25hcmQgPGJlbmphbWluLmdh
aWduYXJkQGxpbmFyby5vcmc+CkNjOiBTdW1pdCBTZW13YWwgPHN1bWl0LnNlbXdhbEBsaW5hcm8u
b3JnPgpDYzogTGlhbSBNYXJrIDxsbWFya0Bjb2RlYXVyb3JhLm9yZz4KQ2M6IFByYXRpayBQYXRl
bCA8cHJhdGlrcEBjb2RlYXVyb3JhLm9yZz4KQ2M6IEJyaWFuIFN0YXJrZXkgPEJyaWFuLlN0YXJr
ZXlAYXJtLmNvbT4KQ2M6IFZpbmNlbnQgRG9ubmVmb3J0IDxWaW5jZW50LkRvbm5lZm9ydEBhcm0u
Y29tPgpDYzogU3VkaXB0byBQYXVsIDxTdWRpcHRvLlBhdWxAYXJtLmNvbT4KQ2M6IEFuZHJldyBG
LiBEYXZpcyA8YWZkQHRpLmNvbT4KQ2M6IENocmlzdG9waCBIZWxsd2lnIDxoY2hAaW5mcmFkZWFk
Lm9yZz4KQ2M6IENoZW5ibyBGZW5nIDxmZW5nY0Bnb29nbGUuY29tPgpDYzogQWxpc3RhaXIgU3Ry
YWNoYW4gPGFzdHJhY2hhbkBnb29nbGUuY29tPgpDYzogSHJpZHlhIFZhbHNhcmFqdSA8aHJpZHlh
QGdvb2dsZS5jb20+CkNjOiBTYW5kZWVwIFBhdGlsIDxzc3BhdGlsQGdvb2dsZS5jb20+CkNjOiBI
aWxsZiBEYW50b24gPGhkYW50b25Ac2luYS5jb20+CkNjOiBEYXZlIEFpcmxpZSA8YWlybGllZEBn
bWFpbC5jb20+CkNjOiBkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnClJldmlld2VkLWJ5
OiBCcmlhbiBTdGFya2V5IDxicmlhbi5zdGFya2V5QGFybS5jb20+CkFja2VkLWJ5OiBTYW5kZWVw
IFBhdGlsIDxzc3BhdGlsQGFuZHJvaWQuY29tPgpTaWduZWQtb2ZmLWJ5OiBBbmRyZXcgRi4gRGF2
aXMgPGFmZEB0aS5jb20+ClNpZ25lZC1vZmYtYnk6IEpvaG4gU3R1bHR6IDxqb2huLnN0dWx0ekBs
aW5hcm8ub3JnPgotLS0KdjI6CiogRm9sZGVkIGRvd24gZml4ZXMgSSBoYWQgcHJldmlvdXNseSBz
aGFyZWQgaW4gaW1wbGVtZW50aW5nCiAgaGVhcHMKKiBNYWtlIGZsYWdzIGEgdTY0IChTdWdnZXN0
ZWQgYnkgTGF1cmEpCiogQWRkIFBBR0VfQUxJR04oKSBmaXggdG8gdGhlIGNvcmUgYWxsb2MgZnVu
Y2l0b24KKiBJT0NUTCBmaXh1cHMgc3VnZ2VzdGVkIGJ5IEJyaWFuCiogQWRkZWQgZml4ZXMgc3Vn
Z2VzdGVkIGJ5IEJlbmphbWluCiogUmVtb3ZlZCBjb3JlIHN0YXRzIG1nbXQsIGFzIHRoYXQgc2hv
dWxkIGJlIGltcGxlbWVudGVkIGJ5CiAgcGVyLWhlYXAgY29kZQoqIENoYW5nZWQgYWxsb2MgdG8g
cmV0dXJuIGEgZG1hLWJ1ZiBmZCwgcmF0aGVyIHRoYW4gYSBidWZmZXIKICAoYXMgaXQgc2ltcGxp
ZmllcyBlcnJvciBoYW5kbGluZykKdjM6CiogUmVtb3ZlZCBzY2FyZS1xdW90ZXMgaW4gTUFJTlRB
SU5FUlMgZW1haWwgYWRkcmVzcwoqIEdldCByaWQgb2YgLnJlbGVhc2UgZnVuY3Rpb24gYXMgaXQg
ZGlkbid0IGRvIGFueXRoaW5nIChmcm9tCiAgQ2hyaXN0b3BoKQoqIFJlbmFtZWQgZmlscCB0byBm
aWxlIChzdWdnZXN0ZWQgYnkgQ2hyaXN0b3BoKQoqIFNwbGl0IG91dCBpb2N0bCBoYW5kbGluZyB0
byBzZXBhcmF0ZSBmdW5jdGlvbiAoc3VnZ2VzdGVkIGJ5CiAgQ2hyaXN0b3BoKQoqIEFkZCBjb21t
ZW50IGRvY3VtZW50aW5nIFBBR0VfQUxJR04gdXNhZ2UgKHN1Z2dlc3RlZCBieSBCcmlhbikKKiBT
d2l0Y2ggZnJvbSBpZHIgdG8gWGFycmF5IChzdWdnZXN0ZWQgYnkgQnJpYW4pCiogRml4dXAgY2Rl
diBjcmVhdGlvbiAoc3VnZ2VzdGVkIGJ5IEJyaWFuKQoqIEF2b2lkIEVYUE9SVF9TWU1CT0wgdW50
aWwgd2UgZmluYWxpemUgbW9kdWxlcyAoc3VnZ2VzdGVkIGJ5CiAgQnJpYW4pCiogTWFrZSBzdHJ1
Y3QgZG1hX2hlYXAgaW50ZXJuYWwgb25seSAoZm9sZGVkIGluIGZyb20gQW5kcmV3KQoqIFNtYWxs
IGNsZWFudXBzIHN1Z2dlc3RlZCBieSBHcmVnS0gKKiBQcm92aWRlIGNsYXNzLT5kZXZub2RlIGNh
bGxiYWNrIHRvIGdldCBjb25zaXN0ZW50IC9kZXYvCiAgc3ViZGlyZWN0b3J5IG5hbWluZyAoU3Vn
Z2VzdGVkIGJ5IEJqb3JuKQp2NDoKKiBGb2xkZWQgZG93biBkbWEtaGVhcC5oIGNoYW5nZSB0aGF0
IHdhcyBpbiBhIGZvbGxvd2luZyBwYXRjaAoqIEFkZGVkIGZkX2ZsYWdzIGVudHJ5IHRvIGFsbG9j
YXRpb24gc3RydWN0dXJlIGFuZCBwYXNzIGl0CiAgdGhyb3VnaCB0byBoZWFwIGNvZGUgZm9yIHVz
ZSBvbiBkbWEtYnVmIGZkIGNyZWF0aW9uIChzdWdnZXN0ZWQKICBieSBCZW5qYW1pbikKdjU6Ciog
TWlub3IgY2xlYW51cHMKdjY6CiogSW1wcm92ZWQgZXJyb3IgcGF0aCBoYW5kbGluZywgbWlub3Ig
d2hpdGVzcGFjZSBmaXhlcywgYm90aAogIHN1Z2dlc3RlZCBieSBCcmlhbgp2NzoKKiBMb25nZXIg
S2NvbmZpZyBkZXNjcmlwdGlvbiB0byBxdWlldCBjaGVja3BhdGNoIHdhcm5pbmdzCiogUmUtYWRk
IGNvbXBhdF9pb2N0bCBiaXRzIChIcmlkeWEgbm90aWNlZCAzMmJpdCB1c2VybGFuZCB3YXNuJ3QK
ICB3b3JraW5nKQp2ODoKKiBNYWtlIHN0cnVjdCBkbWFfaGVhcF9vcHMgY29uc3RzIChTdWdnZXN0
ZWQgYnkgQ2hyaXN0b3BoKQoqIENoZWNrcGF0Y2ggd2hpdGVzcGFjZSBmaXh1cHMKdjk6CiogTWlu
b3IgY2xlYW51cHMgc3VnZ2VzdGVkIGJ5IEJyaWFuIFN0YXJrZXkKKiBSZW5hbWUgZG1hX2hlYXBf
Z2V0X2RhdGEtPmRtYV9oZWFwX2dldF9kcnZkYXRhIHN1Z2dlc3RlZAogIGJ5IEhpbGYgRGFudG9u
CnYxMToKKiBLY29uZmlnIHRleHQgaW1wcm92ZW1lbnRzIHN1Z2dlc3RlZCBieSBSYW5keSBEdW5s
YXAKdjEyOgoqIEFkZCBsb2dpYyB0byBwcmV2ZW50IGR1cGxpY2F0ZWx5IG5hbWVkIGhlYXBzIGJl
aW5nIGFkZGVkCiogQWRkIHN5bWJvbCBleHBvcnRzIGZvciBoZWFwcyBhcyBtb2R1bGVzCnYxMzoK
KiBSZS1yZW1vdmUgc3ltYm9sIGV4cG9ydHMgcGVyIGRpc2N1c3Npb24gdy8gQnJpYW4uIFdpbGwK
ICByZXN1Ym1pdCBpbiBhIHNlcGFydGUgcGF0Y2ggZm9yIHJldmlldwp2MTQ6CiogUmV3b3JrZWQg
aW9jdGwgaGFuZGxlciB0byB6ZXJvIGZpbGwgYW55IGRpZmZlcmVuY2UgaW4KICBzdHJ1Y3R1cmUg
c2l6ZSwgc2ltaWxhciB0byB3aGF0IHRoZSBEUk0gY29yZSBkb2VzLCBhcwogIHN1Z2dlc3RlZCBi
eSBEYXZlIEFpcmxpZQoqIFJlbW92ZWQgbm93IHVubmVjZXNzYXJ5IHJlc2VydmVkIGJpdHMgaW4g
YWxsb2NhdGVfZGF0YQoqIEFkZGVkIGdldF9mZWF0dXJlcyBpb2N0bCBhcyBzdWdnZXN0ZWQgYnkg
RGF2ZSBBaXJsaWUKKiBSZW1vdmVkIHByX3dhcm5fb25jZSBtZXNzYWdlcyBhcyByZXF1ZXN0ZWQg
YnkgRGF2ZQogIEFpcmxpZQp2MTU6CiogRHJvcHBlZCB0aGUgZ2V0X2ZlYXR1cmVzIGlvY3RsIGFz
IHN1Z2dlc3RlZCBieSBCcmlhbgogIFN0YXJrZXkgYW5kIERhbmllbCBWZXR0ZXIKKiBBZGQgbGlz
dGhlYWQgY29tbWVudCBzdWdnZXN0ZWQgYnkgU2FuZGVlcCBQYXRpbAoqIERyb3BwZWQgbWlub3Ig
dmFsdWUgaW4gc3RydWN0IGRtYV9oZWFwIGFzIHN1Z2dlc3RlZCBieQogIFNhbmRlZXAgUGF0aWwK
KiBGaXggZ3JhbW1hciB0eXBvIGZyb20gQnJpYW4gU3RhcmtleQp2MTY6CiogVHlwbyBmaXggc3Vn
Z2VzdGVkIGJ5IEhyaWR5YSBWYWxzYXJhanUgPGhyaWR5YUBnb29nbGUuY29tPgotLS0KIE1BSU5U
QUlORVJTICAgICAgICAgICAgICAgICAgIHwgIDE4ICsrKwogZHJpdmVycy9kbWEtYnVmL0tjb25m
aWcgICAgICAgfCAgIDkgKysKIGRyaXZlcnMvZG1hLWJ1Zi9NYWtlZmlsZSAgICAgIHwgICAxICsK
IGRyaXZlcnMvZG1hLWJ1Zi9kbWEtaGVhcC5jICAgIHwgMjk3ICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysKIGluY2x1ZGUvbGludXgvZG1hLWhlYXAuaCAgICAgIHwgIDU5ICsrKysr
KysKIGluY2x1ZGUvdWFwaS9saW51eC9kbWEtaGVhcC5oIHwgIDUzICsrKysrKwogNiBmaWxlcyBj
aGFuZ2VkLCA0MzcgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZG1h
LWJ1Zi9kbWEtaGVhcC5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS9saW51eC9kbWEtaGVh
cC5oCiBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS91YXBpL2xpbnV4L2RtYS1oZWFwLmgKCmRp
ZmYgLS1naXQgYS9NQUlOVEFJTkVSUyBiL01BSU5UQUlORVJTCmluZGV4IDg2MDg3MjQ4MzVkZC4u
NDRiN2NiYzBlYzI5IDEwMDY0NAotLS0gYS9NQUlOVEFJTkVSUworKysgYi9NQUlOVEFJTkVSUwpA
QCAtNDk3MSw2ICs0OTcxLDI0IEBAIEY6CWluY2x1ZGUvbGludXgvKmZlbmNlLmgKIEY6CURvY3Vt
ZW50YXRpb24vZHJpdmVyLWFwaS9kbWEtYnVmLnJzdAogVDoJZ2l0IGdpdDovL2Fub25naXQuZnJl
ZWRlc2t0b3Aub3JnL2RybS9kcm0tbWlzYwogCitETUEtQlVGIEhFQVBTIEZSQU1FV09SSworTToJ
U3VtaXQgU2Vtd2FsIDxzdW1pdC5zZW13YWxAbGluYXJvLm9yZz4KK1I6CUFuZHJldyBGLiBEYXZp
cyA8YWZkQHRpLmNvbT4KK1I6CUJlbmphbWluIEdhaWduYXJkIDxiZW5qYW1pbi5nYWlnbmFyZEBs
aW5hcm8ub3JnPgorUjoJTGlhbSBNYXJrIDxsbWFya0Bjb2RlYXVyb3JhLm9yZz4KK1I6CUxhdXJh
IEFiYm90dCA8bGFiYm90dEByZWRoYXQuY29tPgorUjoJQnJpYW4gU3RhcmtleSA8QnJpYW4uU3Rh
cmtleUBhcm0uY29tPgorUjoJSm9obiBTdHVsdHogPGpvaG4uc3R1bHR6QGxpbmFyby5vcmc+CitT
OglNYWludGFpbmVkCitMOglsaW51eC1tZWRpYUB2Z2VyLmtlcm5lbC5vcmcKK0w6CWRyaS1kZXZl
bEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKK0w6CWxpbmFyby1tbS1zaWdAbGlzdHMubGluYXJvLm9y
ZyAobW9kZXJhdGVkIGZvciBub24tc3Vic2NyaWJlcnMpCitGOglpbmNsdWRlL3VhcGkvbGludXgv
ZG1hLWhlYXAuaAorRjoJaW5jbHVkZS9saW51eC9kbWEtaGVhcC5oCitGOglkcml2ZXJzL2RtYS1i
dWYvZG1hLWhlYXAuYworRjoJZHJpdmVycy9kbWEtYnVmL2hlYXBzLyoKK1Q6CWdpdCBnaXQ6Ly9h
bm9uZ2l0LmZyZWVkZXNrdG9wLm9yZy9kcm0vZHJtLW1pc2MKKwogRE1BIEdFTkVSSUMgT0ZGTE9B
RCBFTkdJTkUgU1VCU1lTVEVNCiBNOglWaW5vZCBLb3VsIDx2a291bEBrZXJuZWwub3JnPgogTDoJ
ZG1hZW5naW5lQHZnZXIua2VybmVsLm9yZwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVmL0tj
b25maWcgYi9kcml2ZXJzL2RtYS1idWYvS2NvbmZpZwppbmRleCBhMjNiNjc1MmQxMWEuLmJmZmE1
OGZjM2U2ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9kbWEtYnVmL0tjb25maWcKKysrIGIvZHJpdmVy
cy9kbWEtYnVmL0tjb25maWcKQEAgLTQ0LDQgKzQ0LDEzIEBAIGNvbmZpZyBETUFCVUZfU0VMRlRF
U1RTCiAJZGVmYXVsdCBuCiAJZGVwZW5kcyBvbiBETUFfU0hBUkVEX0JVRkZFUgogCittZW51Y29u
ZmlnIERNQUJVRl9IRUFQUworCWJvb2wgIkRNQS1CVUYgVXNlcmxhbmQgTWVtb3J5IEhlYXBzIgor
CXNlbGVjdCBETUFfU0hBUkVEX0JVRkZFUgorCWhlbHAKKwkgIENob29zZSB0aGlzIG9wdGlvbiB0
byBlbmFibGUgdGhlIERNQS1CVUYgdXNlcmxhbmQgbWVtb3J5IGhlYXBzLgorCSAgVGhpcyBvcHRp
b25zIGNyZWF0ZXMgcGVyIGhlYXAgY2hhcmRldnMgaW4gL2Rldi9kbWFfaGVhcC8gd2hpY2gKKwkg
IGFsbG93cyB1c2Vyc3BhY2UgdG8gYWxsb2NhdGUgZG1hLWJ1ZnMgdGhhdCBjYW4gYmUgc2hhcmVk
CisJICBiZXR3ZWVuIGRyaXZlcnMuCisKIGVuZG1lbnUKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1h
LWJ1Zi9NYWtlZmlsZSBiL2RyaXZlcnMvZG1hLWJ1Zi9NYWtlZmlsZQppbmRleCAwMzQ3OWRhMDY0
MjIuLmNhZWU1ZWIzZDM1MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9kbWEtYnVmL01ha2VmaWxlCisr
KyBiL2RyaXZlcnMvZG1hLWJ1Zi9NYWtlZmlsZQpAQCAtMSw2ICsxLDcgQEAKICMgU1BEWC1MaWNl
bnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb25seQogb2JqLXkgOj0gZG1hLWJ1Zi5vIGRtYS1mZW5j
ZS5vIGRtYS1mZW5jZS1hcnJheS5vIGRtYS1mZW5jZS1jaGFpbi5vIFwKIAkgZG1hLXJlc3YubyBz
ZXFuby1mZW5jZS5vCitvYmotJChDT05GSUdfRE1BQlVGX0hFQVBTKQkrPSBkbWEtaGVhcC5vCiBv
YmotJChDT05GSUdfU1lOQ19GSUxFKQkJKz0gc3luY19maWxlLm8KIG9iai0kKENPTkZJR19TV19T
WU5DKQkJKz0gc3dfc3luYy5vIHN5bmNfZGVidWcubwogb2JqLSQoQ09ORklHX1VETUFCVUYpCQkr
PSB1ZG1hYnVmLm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtaGVhcC5jIGIvZHJp
dmVycy9kbWEtYnVmL2RtYS1oZWFwLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MDAwMDAwLi40ZjA0ZDEwNGFlNjEKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2RtYS1idWYv
ZG1hLWhlYXAuYwpAQCAtMCwwICsxLDI5NyBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6
IEdQTC0yLjAKKy8qCisgKiBGcmFtZXdvcmsgZm9yIHVzZXJzcGFjZSBETUEtQlVGIGFsbG9jYXRp
b25zCisgKgorICogQ29weXJpZ2h0IChDKSAyMDExIEdvb2dsZSwgSW5jLgorICogQ29weXJpZ2h0
IChDKSAyMDE5IExpbmFybyBMdGQuCisgKi8KKworI2luY2x1ZGUgPGxpbnV4L2NkZXYuaD4KKyNp
bmNsdWRlIDxsaW51eC9kZWJ1Z2ZzLmg+CisjaW5jbHVkZSA8bGludXgvZGV2aWNlLmg+CisjaW5j
bHVkZSA8bGludXgvZG1hLWJ1Zi5oPgorI2luY2x1ZGUgPGxpbnV4L2Vyci5oPgorI2luY2x1ZGUg
PGxpbnV4L3hhcnJheS5oPgorI2luY2x1ZGUgPGxpbnV4L2xpc3QuaD4KKyNpbmNsdWRlIDxsaW51
eC9zbGFiLmg+CisjaW5jbHVkZSA8bGludXgvdWFjY2Vzcy5oPgorI2luY2x1ZGUgPGxpbnV4L3N5
c2NhbGxzLmg+CisjaW5jbHVkZSA8bGludXgvZG1hLWhlYXAuaD4KKyNpbmNsdWRlIDx1YXBpL2xp
bnV4L2RtYS1oZWFwLmg+CisKKyNkZWZpbmUgREVWTkFNRSAiZG1hX2hlYXAiCisKKyNkZWZpbmUg
TlVNX0hFQVBfTUlOT1JTIDEyOAorCisvKioKKyAqIHN0cnVjdCBkbWFfaGVhcCAtIHJlcHJlc2Vu
dHMgYSBkbWFidWYgaGVhcCBpbiB0aGUgc3lzdGVtCisgKiBAbmFtZToJCXVzZWQgZm9yIGRlYnVn
Z2luZy9kZXZpY2Utbm9kZSBuYW1lCisgKiBAb3BzOgkJb3BzIHN0cnVjdCBmb3IgdGhpcyBoZWFw
CisgKiBAaGVhcF9kZXZ0CQloZWFwIGRldmljZSBub2RlCisgKiBAbGlzdAkJbGlzdCBoZWFkIGNv
bm5lY3RpbmcgdG8gbGlzdCBvZiBoZWFwcworICogQGhlYXBfY2RldgkJaGVhcCBjaGFyIGRldmlj
ZQorICoKKyAqIFJlcHJlc2VudHMgYSBoZWFwIG9mIG1lbW9yeSBmcm9tIHdoaWNoIGJ1ZmZlcnMg
Y2FuIGJlIG1hZGUuCisgKi8KK3N0cnVjdCBkbWFfaGVhcCB7CisJY29uc3QgY2hhciAqbmFtZTsK
Kwljb25zdCBzdHJ1Y3QgZG1hX2hlYXBfb3BzICpvcHM7CisJdm9pZCAqcHJpdjsKKwlkZXZfdCBo
ZWFwX2RldnQ7CisJc3RydWN0IGxpc3RfaGVhZCBsaXN0OworCXN0cnVjdCBjZGV2IGhlYXBfY2Rl
djsKK307CisKK3N0YXRpYyBMSVNUX0hFQUQoaGVhcF9saXN0KTsKK3N0YXRpYyBERUZJTkVfTVVU
RVgoaGVhcF9saXN0X2xvY2spOworc3RhdGljIGRldl90IGRtYV9oZWFwX2RldnQ7CitzdGF0aWMg
c3RydWN0IGNsYXNzICpkbWFfaGVhcF9jbGFzczsKK3N0YXRpYyBERUZJTkVfWEFSUkFZX0FMTE9D
KGRtYV9oZWFwX21pbm9ycyk7CisKK3N0YXRpYyBpbnQgZG1hX2hlYXBfYnVmZmVyX2FsbG9jKHN0
cnVjdCBkbWFfaGVhcCAqaGVhcCwgc2l6ZV90IGxlbiwKKwkJCQkgdW5zaWduZWQgaW50IGZkX2Zs
YWdzLAorCQkJCSB1bnNpZ25lZCBpbnQgaGVhcF9mbGFncykKK3sKKwkvKgorCSAqIEFsbG9jYXRp
b25zIGZyb20gYWxsIGhlYXBzIGhhdmUgdG8gYmVnaW4KKwkgKiBhbmQgZW5kIG9uIHBhZ2UgYm91
bmRhcmllcy4KKwkgKi8KKwlsZW4gPSBQQUdFX0FMSUdOKGxlbik7CisJaWYgKCFsZW4pCisJCXJl
dHVybiAtRUlOVkFMOworCisJcmV0dXJuIGhlYXAtPm9wcy0+YWxsb2NhdGUoaGVhcCwgbGVuLCBm
ZF9mbGFncywgaGVhcF9mbGFncyk7Cit9CisKK3N0YXRpYyBpbnQgZG1hX2hlYXBfb3BlbihzdHJ1
Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlsZSkKK3sKKwlzdHJ1Y3QgZG1hX2hlYXAg
KmhlYXA7CisKKwloZWFwID0geGFfbG9hZCgmZG1hX2hlYXBfbWlub3JzLCBpbWlub3IoaW5vZGUp
KTsKKwlpZiAoIWhlYXApIHsKKwkJcHJfZXJyKCJkbWFfaGVhcDogbWlub3IgJWQgdW5rbm93bi5c
biIsIGltaW5vcihpbm9kZSkpOworCQlyZXR1cm4gLUVOT0RFVjsKKwl9CisKKwkvKiBpbnN0YW5j
ZSBkYXRhIGFzIGNvbnRleHQgKi8KKwlmaWxlLT5wcml2YXRlX2RhdGEgPSBoZWFwOworCW5vbnNl
ZWthYmxlX29wZW4oaW5vZGUsIGZpbGUpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBsb25n
IGRtYV9oZWFwX2lvY3RsX2FsbG9jYXRlKHN0cnVjdCBmaWxlICpmaWxlLCB2b2lkICpkYXRhKQor
eworCXN0cnVjdCBkbWFfaGVhcF9hbGxvY2F0aW9uX2RhdGEgKmhlYXBfYWxsb2NhdGlvbiA9IGRh
dGE7CisJc3RydWN0IGRtYV9oZWFwICpoZWFwID0gZmlsZS0+cHJpdmF0ZV9kYXRhOworCWludCBm
ZDsKKworCWlmIChoZWFwX2FsbG9jYXRpb24tPmZkKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWlm
IChoZWFwX2FsbG9jYXRpb24tPmZkX2ZsYWdzICYgfkRNQV9IRUFQX1ZBTElEX0ZEX0ZMQUdTKQor
CQlyZXR1cm4gLUVJTlZBTDsKKworCWlmIChoZWFwX2FsbG9jYXRpb24tPmhlYXBfZmxhZ3MgJiB+
RE1BX0hFQVBfVkFMSURfSEVBUF9GTEFHUykKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlmZCA9IGRt
YV9oZWFwX2J1ZmZlcl9hbGxvYyhoZWFwLCBoZWFwX2FsbG9jYXRpb24tPmxlbiwKKwkJCQkgICBo
ZWFwX2FsbG9jYXRpb24tPmZkX2ZsYWdzLAorCQkJCSAgIGhlYXBfYWxsb2NhdGlvbi0+aGVhcF9m
bGFncyk7CisJaWYgKGZkIDwgMCkKKwkJcmV0dXJuIGZkOworCisJaGVhcF9hbGxvY2F0aW9uLT5m
ZCA9IGZkOworCisJcmV0dXJuIDA7Cit9CisKK3Vuc2lnbmVkIGludCBkbWFfaGVhcF9pb2N0bF9j
bWRzW10gPSB7CisJRE1BX0hFQVBfSU9DX0FMTE9DLAorfTsKKworc3RhdGljIGxvbmcgZG1hX2hl
YXBfaW9jdGwoc3RydWN0IGZpbGUgKmZpbGUsIHVuc2lnbmVkIGludCB1Y21kLAorCQkJICAgdW5z
aWduZWQgbG9uZyBhcmcpCit7CisJY2hhciBzdGFja19rZGF0YVsxMjhdOworCWNoYXIgKmtkYXRh
ID0gc3RhY2tfa2RhdGE7CisJdW5zaWduZWQgaW50IGtjbWQ7CisJdW5zaWduZWQgaW50IGluX3Np
emUsIG91dF9zaXplLCBkcnZfc2l6ZSwga3NpemU7CisJaW50IG5yID0gX0lPQ19OUih1Y21kKTsK
KwlpbnQgcmV0ID0gMDsKKworCWlmIChuciA+PSBBUlJBWV9TSVpFKGRtYV9oZWFwX2lvY3RsX2Nt
ZHMpKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCS8qIEdldCB0aGUga2VybmVsIGlvY3RsIGNtZCB0
aGF0IG1hdGNoZXMgKi8KKwlrY21kID0gZG1hX2hlYXBfaW9jdGxfY21kc1tucl07CisKKwkvKiBG
aWd1cmUgb3V0IHRoZSBkZWx0YSBiZXR3ZWVuIHVzZXIgY21kIHNpemUgYW5kIGtlcm5lbCBjbWQg
c2l6ZSAqLworCWRydl9zaXplID0gX0lPQ19TSVpFKGtjbWQpOworCW91dF9zaXplID0gX0lPQ19T
SVpFKHVjbWQpOworCWluX3NpemUgPSBvdXRfc2l6ZTsKKwlpZiAoKHVjbWQgJiBrY21kICYgSU9D
X0lOKSA9PSAwKQorCQlpbl9zaXplID0gMDsKKwlpZiAoKHVjbWQgJiBrY21kICYgSU9DX09VVCkg
PT0gMCkKKwkJb3V0X3NpemUgPSAwOworCWtzaXplID0gbWF4KG1heChpbl9zaXplLCBvdXRfc2l6
ZSksIGRydl9zaXplKTsKKworCS8qIElmIG5lY2Vzc2FyeSwgYWxsb2NhdGUgYnVmZmVyIGZvciBp
b2N0bCBhcmd1bWVudCAqLworCWlmIChrc2l6ZSA+IHNpemVvZihzdGFja19rZGF0YSkpIHsKKwkJ
a2RhdGEgPSBrbWFsbG9jKGtzaXplLCBHRlBfS0VSTkVMKTsKKwkJaWYgKCFrZGF0YSkKKwkJCXJl
dHVybiAtRU5PTUVNOworCX0KKworCWlmIChjb3B5X2Zyb21fdXNlcihrZGF0YSwgKHZvaWQgX191
c2VyICopYXJnLCBpbl9zaXplKSAhPSAwKSB7CisJCXJldCA9IC1FRkFVTFQ7CisJCWdvdG8gZXJy
OworCX0KKworCS8qIHplcm8gb3V0IGFueSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIGtlcm5lbC91
c2VyIHN0cnVjdHVyZSBzaXplICovCisJaWYgKGtzaXplID4gaW5fc2l6ZSkKKwkJbWVtc2V0KGtk
YXRhICsgaW5fc2l6ZSwgMCwga3NpemUgLSBpbl9zaXplKTsKKworCXN3aXRjaCAoa2NtZCkgewor
CWNhc2UgRE1BX0hFQVBfSU9DX0FMTE9DOgorCQlyZXQgPSBkbWFfaGVhcF9pb2N0bF9hbGxvY2F0
ZShmaWxlLCBrZGF0YSk7CisJCWJyZWFrOworCWRlZmF1bHQ6CisJCXJldHVybiAtRU5PVFRZOwor
CX0KKworCWlmIChjb3B5X3RvX3VzZXIoKHZvaWQgX191c2VyICopYXJnLCBrZGF0YSwgb3V0X3Np
emUpICE9IDApCisJCXJldCA9IC1FRkFVTFQ7CitlcnI6CisJaWYgKGtkYXRhICE9IHN0YWNrX2tk
YXRhKQorCQlrZnJlZShrZGF0YSk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGNvbnN0IHN0
cnVjdCBmaWxlX29wZXJhdGlvbnMgZG1hX2hlYXBfZm9wcyA9IHsKKwkub3duZXIgICAgICAgICAg
PSBUSElTX01PRFVMRSwKKwkub3BlbgkJPSBkbWFfaGVhcF9vcGVuLAorCS51bmxvY2tlZF9pb2N0
bCA9IGRtYV9oZWFwX2lvY3RsLAorI2lmZGVmIENPTkZJR19DT01QQVQKKwkuY29tcGF0X2lvY3Rs
CT0gZG1hX2hlYXBfaW9jdGwsCisjZW5kaWYKK307CisKKy8qKgorICogZG1hX2hlYXBfZ2V0X2Ry
dmRhdGEoKSAtIGdldCBwZXItc3ViZHJpdmVyIGRhdGEgZm9yIHRoZSBoZWFwCisgKiBAaGVhcDog
RE1BLUhlYXAgdG8gcmV0cmlldmUgcHJpdmF0ZSBkYXRhIGZvcgorICoKKyAqIFJldHVybnM6Cisg
KiBUaGUgcGVyLXN1YmRyaXZlciBkYXRhIGZvciB0aGUgaGVhcC4KKyAqLwordm9pZCAqZG1hX2hl
YXBfZ2V0X2RydmRhdGEoc3RydWN0IGRtYV9oZWFwICpoZWFwKQoreworCXJldHVybiBoZWFwLT5w
cml2OworfQorCitzdHJ1Y3QgZG1hX2hlYXAgKmRtYV9oZWFwX2FkZChjb25zdCBzdHJ1Y3QgZG1h
X2hlYXBfZXhwb3J0X2luZm8gKmV4cF9pbmZvKQoreworCXN0cnVjdCBkbWFfaGVhcCAqaGVhcCwg
KmgsICplcnJfcmV0OworCXN0cnVjdCBkZXZpY2UgKmRldl9yZXQ7CisJdW5zaWduZWQgaW50IG1p
bm9yOworCWludCByZXQ7CisKKwlpZiAoIWV4cF9pbmZvLT5uYW1lIHx8ICFzdHJjbXAoZXhwX2lu
Zm8tPm5hbWUsICIiKSkgeworCQlwcl9lcnIoImRtYV9oZWFwOiBDYW5ub3QgYWRkIGhlYXAgd2l0
aG91dCBhIG5hbWVcbiIpOworCQlyZXR1cm4gRVJSX1BUUigtRUlOVkFMKTsKKwl9CisKKwlpZiAo
IWV4cF9pbmZvLT5vcHMgfHwgIWV4cF9pbmZvLT5vcHMtPmFsbG9jYXRlKSB7CisJCXByX2Vycigi
ZG1hX2hlYXA6IENhbm5vdCBhZGQgaGVhcCB3aXRoIGludmFsaWQgb3BzIHN0cnVjdFxuIik7CisJ
CXJldHVybiBFUlJfUFRSKC1FSU5WQUwpOworCX0KKworCS8qIGNoZWNrIHRoZSBuYW1lIGlzIHVu
aXF1ZSAqLworCW11dGV4X2xvY2soJmhlYXBfbGlzdF9sb2NrKTsKKwlsaXN0X2Zvcl9lYWNoX2Vu
dHJ5KGgsICZoZWFwX2xpc3QsIGxpc3QpIHsKKwkJaWYgKCFzdHJjbXAoaC0+bmFtZSwgZXhwX2lu
Zm8tPm5hbWUpKSB7CisJCQltdXRleF91bmxvY2soJmhlYXBfbGlzdF9sb2NrKTsKKwkJCXByX2Vy
cigiZG1hX2hlYXA6IEFscmVhZHkgcmVnaXN0ZXJlZCBoZWFwIG5hbWVkICVzXG4iLAorCQkJICAg
ICAgIGV4cF9pbmZvLT5uYW1lKTsKKwkJCXJldHVybiBFUlJfUFRSKC1FSU5WQUwpOworCQl9CisJ
fQorCW11dGV4X3VubG9jaygmaGVhcF9saXN0X2xvY2spOworCisJaGVhcCA9IGt6YWxsb2Moc2l6
ZW9mKCpoZWFwKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFoZWFwKQorCQlyZXR1cm4gRVJSX1BUUigt
RU5PTUVNKTsKKworCWhlYXAtPm5hbWUgPSBleHBfaW5mby0+bmFtZTsKKwloZWFwLT5vcHMgPSBl
eHBfaW5mby0+b3BzOworCWhlYXAtPnByaXYgPSBleHBfaW5mby0+cHJpdjsKKworCS8qIEZpbmQg
dW51c2VkIG1pbm9yIG51bWJlciAqLworCXJldCA9IHhhX2FsbG9jKCZkbWFfaGVhcF9taW5vcnMs
ICZtaW5vciwgaGVhcCwKKwkJICAgICAgIFhBX0xJTUlUKDAsIE5VTV9IRUFQX01JTk9SUyAtIDEp
LCBHRlBfS0VSTkVMKTsKKwlpZiAocmV0IDwgMCkgeworCQlwcl9lcnIoImRtYV9oZWFwOiBVbmFi
bGUgdG8gZ2V0IG1pbm9yIG51bWJlciBmb3IgaGVhcFxuIik7CisJCWVycl9yZXQgPSBFUlJfUFRS
KHJldCk7CisJCWdvdG8gZXJyMDsKKwl9CisKKwkvKiBDcmVhdGUgZGV2aWNlICovCisJaGVhcC0+
aGVhcF9kZXZ0ID0gTUtERVYoTUFKT1IoZG1hX2hlYXBfZGV2dCksIG1pbm9yKTsKKworCWNkZXZf
aW5pdCgmaGVhcC0+aGVhcF9jZGV2LCAmZG1hX2hlYXBfZm9wcyk7CisJcmV0ID0gY2Rldl9hZGQo
JmhlYXAtPmhlYXBfY2RldiwgaGVhcC0+aGVhcF9kZXZ0LCAxKTsKKwlpZiAocmV0IDwgMCkgewor
CQlwcl9lcnIoImRtYV9oZWFwOiBVbmFibGUgdG8gYWRkIGNoYXIgZGV2aWNlXG4iKTsKKwkJZXJy
X3JldCA9IEVSUl9QVFIocmV0KTsKKwkJZ290byBlcnIxOworCX0KKworCWRldl9yZXQgPSBkZXZp
Y2VfY3JlYXRlKGRtYV9oZWFwX2NsYXNzLAorCQkJCU5VTEwsCisJCQkJaGVhcC0+aGVhcF9kZXZ0
LAorCQkJCU5VTEwsCisJCQkJaGVhcC0+bmFtZSk7CisJaWYgKElTX0VSUihkZXZfcmV0KSkgewor
CQlwcl9lcnIoImRtYV9oZWFwOiBVbmFibGUgdG8gY3JlYXRlIGRldmljZVxuIik7CisJCWVycl9y
ZXQgPSBFUlJfQ0FTVChkZXZfcmV0KTsKKwkJZ290byBlcnIyOworCX0KKwkvKiBBZGQgaGVhcCB0
byB0aGUgbGlzdCAqLworCW11dGV4X2xvY2soJmhlYXBfbGlzdF9sb2NrKTsKKwlsaXN0X2FkZCgm
aGVhcC0+bGlzdCwgJmhlYXBfbGlzdCk7CisJbXV0ZXhfdW5sb2NrKCZoZWFwX2xpc3RfbG9jayk7
CisKKwlyZXR1cm4gaGVhcDsKKworZXJyMjoKKwljZGV2X2RlbCgmaGVhcC0+aGVhcF9jZGV2KTsK
K2VycjE6CisJeGFfZXJhc2UoJmRtYV9oZWFwX21pbm9ycywgbWlub3IpOworZXJyMDoKKwlrZnJl
ZShoZWFwKTsKKwlyZXR1cm4gZXJyX3JldDsKK30KKworc3RhdGljIGNoYXIgKmRtYV9oZWFwX2Rl
dm5vZGUoc3RydWN0IGRldmljZSAqZGV2LCB1bW9kZV90ICptb2RlKQoreworCXJldHVybiBrYXNw
cmludGYoR0ZQX0tFUk5FTCwgImRtYV9oZWFwLyVzIiwgZGV2X25hbWUoZGV2KSk7Cit9CisKK3N0
YXRpYyBpbnQgZG1hX2hlYXBfaW5pdCh2b2lkKQoreworCWludCByZXQ7CisKKwlyZXQgPSBhbGxv
Y19jaHJkZXZfcmVnaW9uKCZkbWFfaGVhcF9kZXZ0LCAwLCBOVU1fSEVBUF9NSU5PUlMsIERFVk5B
TUUpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwlkbWFfaGVhcF9jbGFzcyA9IGNsYXNz
X2NyZWF0ZShUSElTX01PRFVMRSwgREVWTkFNRSk7CisJaWYgKElTX0VSUihkbWFfaGVhcF9jbGFz
cykpIHsKKwkJdW5yZWdpc3Rlcl9jaHJkZXZfcmVnaW9uKGRtYV9oZWFwX2RldnQsIE5VTV9IRUFQ
X01JTk9SUyk7CisJCXJldHVybiBQVFJfRVJSKGRtYV9oZWFwX2NsYXNzKTsKKwl9CisJZG1hX2hl
YXBfY2xhc3MtPmRldm5vZGUgPSBkbWFfaGVhcF9kZXZub2RlOworCisJcmV0dXJuIDA7Cit9Citz
dWJzeXNfaW5pdGNhbGwoZG1hX2hlYXBfaW5pdCk7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4
L2RtYS1oZWFwLmggYi9pbmNsdWRlL2xpbnV4L2RtYS1oZWFwLmgKbmV3IGZpbGUgbW9kZSAxMDA2
NDQKaW5kZXggMDAwMDAwMDAwMDAwLi40NTRlMzU0ZDFmZmIKLS0tIC9kZXYvbnVsbAorKysgYi9p
bmNsdWRlL2xpbnV4L2RtYS1oZWFwLmgKQEAgLTAsMCArMSw1OSBAQAorLyogU1BEWC1MaWNlbnNl
LUlkZW50aWZpZXI6IEdQTC0yLjAgKi8KKy8qCisgKiBETUFCVUYgSGVhcHMgQWxsb2NhdGlvbiBJ
bmZyYXN0cnVjdHVyZQorICoKKyAqIENvcHlyaWdodCAoQykgMjAxMSBHb29nbGUsIEluYy4KKyAq
IENvcHlyaWdodCAoQykgMjAxOSBMaW5hcm8gTHRkLgorICovCisKKyNpZm5kZWYgX0RNQV9IRUFQ
U19ICisjZGVmaW5lIF9ETUFfSEVBUFNfSAorCisjaW5jbHVkZSA8bGludXgvY2Rldi5oPgorI2lu
Y2x1ZGUgPGxpbnV4L3R5cGVzLmg+CisKK3N0cnVjdCBkbWFfaGVhcDsKKworLyoqCisgKiBzdHJ1
Y3QgZG1hX2hlYXBfb3BzIC0gb3BzIHRvIG9wZXJhdGUgb24gYSBnaXZlbiBoZWFwCisgKiBAYWxs
b2NhdGU6CQlhbGxvY2F0ZSBkbWFidWYgYW5kIHJldHVybiBmZAorICoKKyAqIGFsbG9jYXRlIHJl
dHVybnMgZG1hYnVmIGZkICBvbiBzdWNjZXNzLCAtZXJybm8gb24gZXJyb3IuCisgKi8KK3N0cnVj
dCBkbWFfaGVhcF9vcHMgeworCWludCAoKmFsbG9jYXRlKShzdHJ1Y3QgZG1hX2hlYXAgKmhlYXAs
CisJCQl1bnNpZ25lZCBsb25nIGxlbiwKKwkJCXVuc2lnbmVkIGxvbmcgZmRfZmxhZ3MsCisJCQl1
bnNpZ25lZCBsb25nIGhlYXBfZmxhZ3MpOworfTsKKworLyoqCisgKiBzdHJ1Y3QgZG1hX2hlYXBf
ZXhwb3J0X2luZm8gLSBpbmZvcm1hdGlvbiBuZWVkZWQgdG8gZXhwb3J0IGEgbmV3IGRtYWJ1ZiBo
ZWFwCisgKiBAbmFtZToJdXNlZCBmb3IgZGVidWdnaW5nL2RldmljZS1ub2RlIG5hbWUKKyAqIEBv
cHM6CW9wcyBzdHJ1Y3QgZm9yIHRoaXMgaGVhcAorICogQHByaXY6CWhlYXAgZXhwb3J0ZXIgcHJp
dmF0ZSBkYXRhCisgKgorICogSW5mb3JtYXRpb24gbmVlZGVkIHRvIGV4cG9ydCBhIG5ldyBkbWFi
dWYgaGVhcC4KKyAqLworc3RydWN0IGRtYV9oZWFwX2V4cG9ydF9pbmZvIHsKKwljb25zdCBjaGFy
ICpuYW1lOworCWNvbnN0IHN0cnVjdCBkbWFfaGVhcF9vcHMgKm9wczsKKwl2b2lkICpwcml2Owor
fTsKKworLyoqCisgKiBkbWFfaGVhcF9nZXRfZHJ2ZGF0YSgpIC0gZ2V0IHBlci1oZWFwIGRyaXZl
ciBkYXRhCisgKiBAaGVhcDogRE1BLUhlYXAgdG8gcmV0cmlldmUgcHJpdmF0ZSBkYXRhIGZvcgor
ICoKKyAqIFJldHVybnM6CisgKiBUaGUgcGVyLWhlYXAgZGF0YSBmb3IgdGhlIGhlYXAuCisgKi8K
K3ZvaWQgKmRtYV9oZWFwX2dldF9kcnZkYXRhKHN0cnVjdCBkbWFfaGVhcCAqaGVhcCk7CisKKy8q
KgorICogZG1hX2hlYXBfYWRkIC0gYWRkcyBhIGhlYXAgdG8gZG1hYnVmIGhlYXBzCisgKiBAZXhw
X2luZm86CQlpbmZvcm1hdGlvbiBuZWVkZWQgdG8gcmVnaXN0ZXIgdGhpcyBoZWFwCisgKi8KK3N0
cnVjdCBkbWFfaGVhcCAqZG1hX2hlYXBfYWRkKGNvbnN0IHN0cnVjdCBkbWFfaGVhcF9leHBvcnRf
aW5mbyAqZXhwX2luZm8pOworCisjZW5kaWYgLyogX0RNQV9IRUFQU19IICovCmRpZmYgLS1naXQg
YS9pbmNsdWRlL3VhcGkvbGludXgvZG1hLWhlYXAuaCBiL2luY2x1ZGUvdWFwaS9saW51eC9kbWEt
aGVhcC5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uNzNlN2Y2NmMx
Y2FlCi0tLSAvZGV2L251bGwKKysrIGIvaW5jbHVkZS91YXBpL2xpbnV4L2RtYS1oZWFwLmgKQEAg
LTAsMCArMSw1MyBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAgV0lUSCBM
aW51eC1zeXNjYWxsLW5vdGUgKi8KKy8qCisgKiBETUFCVUYgSGVhcHMgVXNlcnNwYWNlIEFQSQor
ICoKKyAqIENvcHlyaWdodCAoQykgMjAxMSBHb29nbGUsIEluYy4KKyAqIENvcHlyaWdodCAoQykg
MjAxOSBMaW5hcm8gTHRkLgorICovCisjaWZuZGVmIF9VQVBJX0xJTlVYX0RNQUJVRl9QT09MX0gK
KyNkZWZpbmUgX1VBUElfTElOVVhfRE1BQlVGX1BPT0xfSAorCisjaW5jbHVkZSA8bGludXgvaW9j
dGwuaD4KKyNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgorCisvKioKKyAqIERPQzogRE1BQlVGIEhl
YXBzIFVzZXJzcGFjZSBBUEkKKyAqLworCisvKiBWYWxpZCBGRF9GTEFHUyBhcmUgT19DTE9FWEVD
LCBPX1JET05MWSwgT19XUk9OTFksIE9fUkRXUiAqLworI2RlZmluZSBETUFfSEVBUF9WQUxJRF9G
RF9GTEFHUyAoT19DTE9FWEVDIHwgT19BQ0NNT0RFKQorCisvKiBDdXJyZW50bHkgbm8gaGVhcCBm
bGFncyAqLworI2RlZmluZSBETUFfSEVBUF9WQUxJRF9IRUFQX0ZMQUdTICgwKQorCisvKioKKyAq
IHN0cnVjdCBkbWFfaGVhcF9hbGxvY2F0aW9uX2RhdGEgLSBtZXRhZGF0YSBwYXNzZWQgZnJvbSB1
c2Vyc3BhY2UgZm9yCisgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxs
b2NhdGlvbnMKKyAqIEBsZW46CQlzaXplIG9mIHRoZSBhbGxvY2F0aW9uCisgKiBAZmQ6CQkJd2ls
bCBiZSBwb3B1bGF0ZWQgd2l0aCBhIGZkIHdoaWNoIHByb3ZpZGVzIHRoZQorICoJCQloYW5kbGUg
dG8gdGhlIGFsbG9jYXRlZCBkbWEtYnVmCisgKiBAZmRfZmxhZ3M6CQlmaWxlIGRlc2NyaXB0b3Ig
ZmxhZ3MgdXNlZCB3aGVuIGFsbG9jYXRpbmcKKyAqIEBoZWFwX2ZsYWdzOgkJZmxhZ3MgcGFzc2Vk
IHRvIGhlYXAKKyAqCisgKiBQcm92aWRlZCBieSB1c2Vyc3BhY2UgYXMgYW4gYXJndW1lbnQgdG8g
dGhlIGlvY3RsCisgKi8KK3N0cnVjdCBkbWFfaGVhcF9hbGxvY2F0aW9uX2RhdGEgeworCV9fdTY0
IGxlbjsKKwlfX3UzMiBmZDsKKwlfX3UzMiBmZF9mbGFnczsKKwlfX3U2NCBoZWFwX2ZsYWdzOwor
fTsKKworI2RlZmluZSBETUFfSEVBUF9JT0NfTUFHSUMJCSdIJworCisvKioKKyAqIERPQzogRE1B
X0hFQVBfSU9DX0FMTE9DIC0gYWxsb2NhdGUgbWVtb3J5IGZyb20gcG9vbAorICoKKyAqIFRha2Vz
IGEgZG1hX2hlYXBfYWxsb2NhdGlvbl9kYXRhIHN0cnVjdCBhbmQgcmV0dXJucyBpdCB3aXRoIHRo
ZSBmZCBmaWVsZAorICogcG9wdWxhdGVkIHdpdGggdGhlIGRtYWJ1ZiBoYW5kbGUgb2YgdGhlIGFs
bG9jYXRpb24uCisgKi8KKyNkZWZpbmUgRE1BX0hFQVBfSU9DX0FMTE9DCV9JT1dSKERNQV9IRUFQ
X0lPQ19NQUdJQywgMHgwLFwKKwkJCQkgICAgICBzdHJ1Y3QgZG1hX2hlYXBfYWxsb2NhdGlvbl9k
YXRhKQorCisjZW5kaWYgLyogX1VBUElfTElOVVhfRE1BQlVGX1BPT0xfSCAqLwotLSAKMi4xNy4x
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2
ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
