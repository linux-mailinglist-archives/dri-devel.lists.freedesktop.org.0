Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C89E810FE04
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 13:48:53 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9A9B76E4E6;
	Tue,  3 Dec 2019 12:48:33 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx0a-0014ca01.pphosted.com (mx0a-0014ca01.pphosted.com
 [208.84.65.235])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 946B16E03E
 for <dri-devel@lists.freedesktop.org>; Tue,  3 Dec 2019 10:34:44 +0000 (UTC)
Received: from pps.filterd (m0042385.ppops.net [127.0.0.1])
 by mx0a-0014ca01.pphosted.com (8.16.0.42/8.16.0.42) with SMTP id
 xB3ACEZR020558; Tue, 3 Dec 2019 02:14:22 -0800
Received: from nam04-sn1-obe.outbound.protection.outlook.com
 (mail-sn1nam04lp2059.outbound.protection.outlook.com [104.47.44.59])
 by mx0a-0014ca01.pphosted.com with ESMTP id 2wknv0uk8r-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 03 Dec 2019 02:14:21 -0800
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=MGUaV6unVgGorQ46Lmf8Hd0HHj71AQgGzdaLQc9KDBxdo/e2z7N2eea+9XPZCy11ZfxzdtuXBv4rlc3jKpisdRAGswY2YxXqQNHloIMAsgo1lcgqOvlDqNcRbBH6yQ+8TJKH3y1F517eR+7E+cJYWtl8h5AmQHQawSa7kitWiQYV/U7fcEgq5wbV5kf7fHKIzU0Z4sEDkXFCBdWEKu31vth20/qdQKxIU2VdWOAr+EzpFRaebrfQ1OlpsrKtrwaXM02lqjcY9XVzKqqvqOidh92vAFra+gJ0lnt7Fi2zQ9/iCIuYerx3P0HKAHOeQZLXSyzfKZw7OZJVjR6wK2ZPlQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=7RGZBOpx9VdEuLgi+i7b8K5P7xYohB7N/Pz9HLRmkho=;
 b=T+YBCHxQoGG9FUNobqDte6PErY0hVPL9JwNNJEpQ5Y6J0btRaA0R6xVhhtrUM5JIxCml7koHsBBvaeonjdGCiWCQ175fGRT37b0Y4Kce/Ld5s6G/pfg2JpWFHS+R93QTc1y6NxZMcnG4iHerhxvLqPKNQzJ5cjzO8gwkojat4rLm8mRTl3UZ8aXXahdMfKUgtw5ObIme/Ht6A2s7Fs/QKVZwR8Gasy6a5v8a10A6Cp7wT9OhfnVs3A6QTSigMceUqK/PcDmW/XfuqZouqscCw1m1pl5CvmRifC8BlUBh2sORwXSdAmtTLYvuJZA3ajvKs3ulY+seiQCRS3+nZXmeCQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=softfail (sender ip
 is 158.140.1.28) smtp.rcpttodomain=ti.com smtp.mailfrom=cadence.com;
 dmarc=fail (p=none sp=none pct=100) action=none header.from=cadence.com;
 dkim=none (message not signed); arc=none
Received: from BYAPR07CA0065.namprd07.prod.outlook.com (2603:10b6:a03:60::42)
 by MN2PR07MB7055.namprd07.prod.outlook.com (2603:10b6:208:1aa::19)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2495.19; Tue, 3 Dec
 2019 10:14:18 +0000
Received: from MW2NAM12FT050.eop-nam12.prod.protection.outlook.com
 (2a01:111:f400:fe5a::201) by BYAPR07CA0065.outlook.office365.com
 (2603:10b6:a03:60::42) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2495.18 via Frontend
 Transport; Tue, 3 Dec 2019 10:14:18 +0000
Received-SPF: SoftFail (protection.outlook.com: domain of transitioning
 cadence.com discourages use of 158.140.1.28 as permitted sender)
Received: from sjmaillnx2.cadence.com (158.140.1.28) by
 MW2NAM12FT050.mail.protection.outlook.com (10.13.180.241) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2495.18 via Frontend Transport; Tue, 3 Dec 2019 10:14:18 +0000
Received: from maileu3.global.cadence.com (maileu3.cadence.com [10.160.88.99])
 by sjmaillnx2.cadence.com (8.14.4/8.14.4) with ESMTP id
 xB3AE7t2027708
 (version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=OK);
 Tue, 3 Dec 2019 02:14:17 -0800
X-CrossPremisesHeadersFilteredBySendConnector: maileu3.global.cadence.com
Received: from maileu3.global.cadence.com (10.160.88.99) by
 maileu3.global.cadence.com (10.160.88.99) with Microsoft SMTP Server (TLS) id
 15.0.1367.3; Tue, 3 Dec 2019 11:14:10 +0100
Received: from vleu-orange.cadence.com (10.160.88.83) by
 maileu3.global.cadence.com (10.160.88.99) with Microsoft SMTP Server (TLS) id
 15.0.1367.3 via Frontend Transport; Tue, 3 Dec 2019 11:14:10 +0100
Received: from vleu-orange.cadence.com (localhost.localdomain [127.0.0.1])
 by vleu-orange.cadence.com (8.14.4/8.14.4) with ESMTP id xB3AEAPh030985;
 Tue, 3 Dec 2019 11:14:10 +0100
Received: (from yamonkar@localhost)
 by vleu-orange.cadence.com (8.14.4/8.14.4/Submit) id xB3AEASx030981;
 Tue, 3 Dec 2019 11:14:10 +0100
From: Yuti Amonkar <yamonkar@cadence.com>
To: <dri-devel@lists.freedesktop.org>
Subject: [PATCH v1 13/15] phy: cadence-torrent: Use regmap to read and write
 DPTX PHY registers
Date: Tue, 3 Dec 2019 11:13:23 +0100
Message-ID: <1575368005-29797-14-git-send-email-yamonkar@cadence.com>
X-Mailer: git-send-email 2.4.5
In-Reply-To: <1575368005-29797-1-git-send-email-yamonkar@cadence.com>
References: <1575368005-29797-1-git-send-email-yamonkar@cadence.com>
MIME-Version: 1.0
X-OrganizationHeadersPreserved: maileu3.global.cadence.com
X-EOPAttributedMessage: 0
X-Forefront-Antispam-Report: CIP:158.140.1.28; IPV:CAL; SCL:-1; CTRY:US;
 EFV:NLI; SFV:NSPM;
 SFS:(10009020)(4636009)(346002)(39860400002)(396003)(136003)(376002)(36092001)(199004)(189003)(5660300002)(186003)(305945005)(50466002)(48376002)(316002)(70206006)(54906003)(2906002)(70586007)(87636003)(478600001)(76130400001)(26826003)(16586007)(107886003)(14444005)(7636002)(86362001)(446003)(426003)(336012)(42186006)(26005)(2616005)(4326008)(11346002)(356004)(8936002)(6666004)(2351001)(246002)(30864003)(8676002)(50226002)(36756003)(6916009)(76176011)(51416003);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR07MB7055; H:sjmaillnx2.cadence.com; FPR:;
 SPF:SoftFail; LANG:en; PTR:corp.Cadence.COM; A:1; MX:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 0b6db48b-fa45-40f1-1e08-08d777d98eb0
X-MS-TrafficTypeDiagnostic: MN2PR07MB7055:
X-Microsoft-Antispam-PRVS: <MN2PR07MB7055AD79BBB5A09794664A00D2420@MN2PR07MB7055.namprd07.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:4125;
X-Forefront-PRVS: 02408926C4
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: 2LvPGqUH5wzLPpVmQg2UccvIYqa6Kwegfcm5R1co1SFeYFOlBYF1J0MqSNThIg7mfOWkwaaGnesieqeC4BzDZnRwvxclwp506Y7/djAfBqzMgQRVzP2H2XPvAXaBhwMWBT7nfufAQDfWUclO1nUXf0dl7d/8InH/jLoqlDCmNBR20nht8UzQLaH+ChqsJh3Qi53e2en892wboMYFHzkJzTiaP9giJ2ax+oq+nYssOj0tOkn0OVehLEyqCHvaYqW0EKO7vmM+2xzeCod5dunZBqc55OOVmPzObcmx3iUPUbX/Wy8G1b6lTup2BHRUn4pwPc0iw9Io0lPHCupl1l+mK0IzeADmTnZ4wWONIiTvzIVpMdK3WKIRI7zSPn+9qFdERnsrFKtH+vMf2TxDN09kL4c8BEps09jOUSPGavbJTPV97woH03Kx8plazqBu548J
X-OriginatorOrg: cadence.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 03 Dec 2019 10:14:18.0969 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: 0b6db48b-fa45-40f1-1e08-08d777d98eb0
X-MS-Exchange-CrossTenant-Id: d36035c5-6ce6-4662-a3dc-e762e61ae4c9
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=d36035c5-6ce6-4662-a3dc-e762e61ae4c9; Ip=[158.140.1.28];
 Helo=[sjmaillnx2.cadence.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR07MB7055
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10434:6.0.95,18.0.572
 definitions=2019-12-03_02:2019-11-29,2019-12-03 signatures=0
X-Proofpoint-Spam-Details: rule=outbound_check_notspam policy=outbound_check
 score=0 adultscore=0
 spamscore=0 suspectscore=1 clxscore=1015 mlxlogscore=924 phishscore=0
 impostorscore=0 malwarescore=0 bulkscore=0 lowpriorityscore=0
 priorityscore=1501 mlxscore=0 classifier=spam adjust=0 reason=mlx
 scancount=1 engine=8.12.0-1910280000 definitions=main-1912030082
X-Mailman-Approved-At: Tue, 03 Dec 2019 12:48:27 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=cadence.com; h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-type; s=proofpoint;
 bh=7RGZBOpx9VdEuLgi+i7b8K5P7xYohB7N/Pz9HLRmkho=;
 b=eh8wtEunHgb4SBfjTZ4dHlwiZqAnbpz9Zbt0oxWG/AwsY3uTrG4aLr9L7PtUBZ9e5JCI
 vh2i9veOjilxco7/ZcfM/Ba3Z47t4uHqVtWW+nHH5+XLT7KXJUYKaAtLLGJFi1xTdg/c
 SkfaoyTdL4Ki/U0rbAFvKRoLQQkFwX+pSgJ9uuIP8ow0Idq0dNNB33xC9VyL5l7+aGCf
 KPYPkEATWfZkTqMA5D5Fw5Zyo2wwkzuBPzs2/DCTEh+69LFvOKmHudUIPLPtDMgzE4r1
 3ZsdPeLMjhTi9w/OS7cv8ZNOWvolJBbHgv5LmTmpLdZ8nWFwyTVHbxUesQiLvrpz6G5p Hw== 
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=cadence.com; s=selector2;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=7RGZBOpx9VdEuLgi+i7b8K5P7xYohB7N/Pz9HLRmkho=;
 b=UPWEuQliej7Z41KkTl1v4T2T4xcnHjuMdXOiNAY9bLxfgk/WRah4ATPNP9/p1XSIaCh01dAfsPdO8e3+0yJaxF78IrY8TxUOu8efY0Q8jVG4yojnK++enjZrjLjOgdNyN03CWE6Rz9eVE6WYElcAdIraBxqPzSZw42Qe3gyXI1g=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mparab@cadence.com, yamonkar@cadence.com, praneeth@ti.com,
 dkangude@cadence.com, jsarha@ti.com, kishon@ti.com, tomi.valkeinen@ti.com,
 sjakhade@cadence.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogU3dhcG5pbCBKYWtoYWRlIDxzamFraGFkZUBjYWRlbmNlLmNvbT4KClVzZSByZWdtYXAg
dG8gcmVhZCBhbmQgd3JpdGUgRFBUWCBzcGVjaWZpYyBQSFkgcmVnaXN0ZXJzLgoKU2lnbmVkLW9m
Zi1ieTogU3dhcG5pbCBKYWtoYWRlIDxzamFraGFkZUBjYWRlbmNlLmNvbT4KLS0tCiBkcml2ZXJz
L3BoeS9jYWRlbmNlL3BoeS1jYWRlbmNlLXRvcnJlbnQuYyB8IDE2OSArKysrKysrKysrKysrKysr
Ky0tLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA5OSBpbnNlcnRpb25zKCspLCA3MCBkZWxl
dGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3BoeS9jYWRlbmNlL3BoeS1jYWRlbmNlLXRv
cnJlbnQuYyBiL2RyaXZlcnMvcGh5L2NhZGVuY2UvcGh5LWNhZGVuY2UtdG9ycmVudC5jCmluZGV4
IDc1YjhhODEuLmE2NGVkNGIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvcGh5L2NhZGVuY2UvcGh5LWNh
ZGVuY2UtdG9ycmVudC5jCisrKyBiL2RyaXZlcnMvcGh5L2NhZGVuY2UvcGh5LWNhZGVuY2UtdG9y
cmVudC5jCkBAIC00NiwxMSArNDYsMTIgQEAKICNkZWZpbmUgVE9SUkVOVF9QSFlfUE1BX0NPTU1P
Tl9PRkZTRVQoYmxvY2tfb2Zmc2V0KQlcCiAJCQkJKDB4RTAwMCA8PCAoYmxvY2tfb2Zmc2V0KSkK
IAorI2RlZmluZSBUT1JSRU5UX0RQVFhfUEhZX09GRlNFVAkJMHgwCisKIC8qCiAgKiByZWdpc3Rl
ciBvZmZzZXRzIGZyb20gRFBUWCBQSFkgcmVnaXN0ZXIgYmxvY2sgYmFzZSAoaS5lIE1IRFAKICAq
IHJlZ2lzdGVyIGJhc2UgKyAweDMwYTAwKQogICovCi0jZGVmaW5lIFBIWV9BVVhfQ09ORklHCQkJ
MHgwMAogI2RlZmluZSBQSFlfQVVYX0NUUkwJCQkweDA0CiAjZGVmaW5lIFBIWV9SRVNFVAkJCTB4
MjAKICNkZWZpbmUgUE1BX1RYX0VMRUNfSURMRV9NQVNLCQkweEYwVQpAQCAtNjYsOCArNjcsNiBA
QAogI2RlZmluZSBQTUFfWENWUl9QT1dFUl9TVEFURV9SRVFfTE5fTUFTSwkweDNGVQogI2RlZmlu
ZSBQSFlfUE1BX1hDVlJfUE9XRVJfU1RBVEVfQUNLCTB4MzAKICNkZWZpbmUgUEhZX1BNQV9DTU5f
UkVBRFkJCTB4MzQKLSNkZWZpbmUgUEhZX1BNQV9YQ1ZSX1RYX1ZNQVJHSU4JCTB4MzgKLSNkZWZp
bmUgUEhZX1BNQV9YQ1ZSX1RYX0RFRU1QSAkJMHgzYwogCiAvKgogICogcmVnaXN0ZXIgb2Zmc2V0
cyBmcm9tIFNEMDgwMSBQSFkgcmVnaXN0ZXIgYmxvY2sgYmFzZSAoaS5lIE1IRFAKQEAgLTE4MCw2
ICsxNzksOSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHJlZ19maWVsZCBwaHlfcG1hX2Ntbl9jdHJs
XzIgPQogc3RhdGljIGNvbnN0IHN0cnVjdCByZWdfZmllbGQgcGh5X3BtYV9wbGxfcmF3X2N0cmwg
PQogCQkJCVJFR19GSUVMRChQSFlfUE1BX1BMTF9SQVdfQ1RSTCwgMCwgMSk7CiAKK3N0YXRpYyBj
b25zdCBzdHJ1Y3QgcmVnX2ZpZWxkIHBoeV9yZXNldF9jdHJsID0KKwkJCQlSRUdfRklFTEQoUEhZ
X1JFU0VULCA4LCA4KTsKKwogc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgY2Ruc190
b3JyZW50X3BoeV9vZl9tYXRjaFtdOwogCiBzdHJ1Y3QgY2Ruc190b3JyZW50X3BoeSB7CkBAIC0x
OTcsOSArMTk5LDExIEBAIHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5IHsKIAlzdHJ1Y3QgcmVnbWFw
ICpyZWdtYXBfcGh5X3BtYV9jb21tb25fY2RiOwogCXN0cnVjdCByZWdtYXAgKnJlZ21hcF90eF9s
YW5lX2NkYltNQVhfTlVNX0xBTkVTXTsKIAlzdHJ1Y3QgcmVnbWFwICpyZWdtYXBfcnhfbGFuZV9j
ZGJbTUFYX05VTV9MQU5FU107CisJc3RydWN0IHJlZ21hcCAqcmVnbWFwX2RwdHhfcGh5X3JlZzsK
IAlzdHJ1Y3QgcmVnbWFwX2ZpZWxkICpwaHlfcGxsX2NmZzsKIAlzdHJ1Y3QgcmVnbWFwX2ZpZWxk
ICpwaHlfcG1hX2Ntbl9jdHJsXzI7CiAJc3RydWN0IHJlZ21hcF9maWVsZCAqcGh5X3BtYV9wbGxf
cmF3X2N0cmw7CisJc3RydWN0IHJlZ21hcF9maWVsZCAqcGh5X3Jlc2V0X2N0cmw7CiB9OwogCiBl
bnVtIHBoeV9wb3dlcnN0YXRlIHsKQEAgLTIyOSwxMiArMjMzLDYgQEAgc3RhdGljIHZvaWQgY2Ru
c190b3JyZW50X2RwX3BtYV9sYW5lX2NmZyhzdHJ1Y3QgY2Ruc190b3JyZW50X3BoeSAqY2Ruc19w
aHksCiAJCQkJCSB1bnNpZ25lZCBpbnQgbGFuZSk7CiBzdGF0aWMgdm9pZCBjZG5zX3RvcnJlbnRf
ZHBfcG1hX2Ntbl9yYXRlKHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5ICpjZG5zX3BoeSwKIAkJCQkJ
IHUzMiByYXRlLCB1MzIgbGFuZXMpOwotc3RhdGljIHZvaWQgY2Ruc19kcF9waHlfd3JpdGVfZmll
bGQoc3RydWN0IGNkbnNfdG9ycmVudF9waHkgKmNkbnNfcGh5LAotCQkJCSAgICB1bnNpZ25lZCBp
bnQgb2Zmc2V0LAotCQkJCSAgICB1bnNpZ25lZCBjaGFyIHN0YXJ0X2JpdCwKLQkJCQkgICAgdW5z
aWduZWQgY2hhciBudW1fYml0cywKLQkJCQkgICAgdW5zaWduZWQgaW50IHZhbCk7Ci0KIHN0YXRp
YyBpbnQgY2Ruc190b3JyZW50X2RwX2NvbmZpZ3VyZShzdHJ1Y3QgcGh5ICpwaHksCiAJCQkJICAg
ICB1bmlvbiBwaHlfY29uZmlndXJlX29wdHMgKm9wdHMpOwogc3RhdGljIGludCBjZG5zX3RvcnJl
bnRfZHBfc2V0X3Bvd2VyX3N0YXRlKHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5ICpjZG5zX3BoeSwK
QEAgLTI4Miw2ICsyODAsMjcgQEAgc3RhdGljIGludCBjZG5zX3JlZ21hcF9yZWFkKHZvaWQgKmNv
bnRleHQsIHVuc2lnbmVkIGludCByZWcsIHVuc2lnbmVkIGludCAqdmFsKQogCXJldHVybiAwOwog
fQogCitzdGF0aWMgaW50IGNkbnNfcmVnbWFwX2RwdHhfd3JpdGUodm9pZCAqY29udGV4dCwgdW5z
aWduZWQgaW50IHJlZywKKwkJCQkgIHVuc2lnbmVkIGludCB2YWwpCit7CisJc3RydWN0IGNkbnNf
cmVnbWFwX2NkYl9jb250ZXh0ICpjdHggPSBjb250ZXh0OworCXUzMiBvZmZzZXQgPSByZWc7CisK
Kwl3cml0ZWwodmFsLCBjdHgtPmJhc2UgKyBvZmZzZXQpOworCisJcmV0dXJuIDA7Cit9CisKK3N0
YXRpYyBpbnQgY2Ruc19yZWdtYXBfZHB0eF9yZWFkKHZvaWQgKmNvbnRleHQsIHVuc2lnbmVkIGlu
dCByZWcsCisJCQkJIHVuc2lnbmVkIGludCAqdmFsKQoreworCXN0cnVjdCBjZG5zX3JlZ21hcF9j
ZGJfY29udGV4dCAqY3R4ID0gY29udGV4dDsKKwl1MzIgb2Zmc2V0ID0gcmVnOworCisJKnZhbCA9
IHJlYWRsKGN0eC0+YmFzZSArIG9mZnNldCk7CisJcmV0dXJuIDA7Cit9CisKICNkZWZpbmUgVE9S
UkVOVF9UWF9MQU5FX0NEQl9SRUdNQVBfQ09ORihuKSBcCiB7IFwKIAkubmFtZSA9ICJ0b3JyZW50
X3R4X2xhbmUiIG4gIl9jZGIiLCBcCkBAIC0zMzgsNiArMzU3LDE0IEBAIHN0YXRpYyBzdHJ1Y3Qg
cmVnbWFwX2NvbmZpZyBjZG5zX3RvcnJlbnRfcGh5X3BtYV9jbW5fY2RiX2NvbmZpZyA9IHsKIAku
cmVnX3JlYWQgPSBjZG5zX3JlZ21hcF9yZWFkLAogfTsKIAorc3RhdGljIHN0cnVjdCByZWdtYXBf
Y29uZmlnIGNkbnNfdG9ycmVudF9kcHR4X3BoeV9jb25maWcgPSB7CisJLm5hbWUgPSAidG9ycmVu
dF9kcHR4X3BoeSIsCisJLnJlZ19zdHJpZGUgPSAxLAorCS5mYXN0X2lvID0gdHJ1ZSwKKwkucmVn
X3dyaXRlID0gY2Ruc19yZWdtYXBfZHB0eF93cml0ZSwKKwkucmVnX3JlYWQgPSBjZG5zX3JlZ21h
cF9kcHR4X3JlYWQsCit9OworCiAvKiBQSFkgbW1yIGFjY2VzcyBmdW5jdGlvbnMgKi8KIAogc3Rh
dGljIHZvaWQgY2Ruc190b3JyZW50X3BoeV93cml0ZShzdHJ1Y3QgcmVnbWFwICpyZWdtYXAsIHUz
MiBvZmZzZXQsIHUzMiB2YWwpCkBAIC0zNTUsMjEgKzM4MiwxOCBAQCBzdGF0aWMgdTMyIGNkbnNf
dG9ycmVudF9waHlfcmVhZChzdHJ1Y3QgcmVnbWFwICpyZWdtYXAsIHUzMiBvZmZzZXQpCiAKIC8q
IERQVFggbW1yIGFjY2VzcyBmdW5jdGlvbnMgKi8KIAotc3RhdGljIHZvaWQgY2Ruc190b3JyZW50
X2RwX3dyaXRlKHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5ICpjZG5zX3BoeSwKLQkJCQkgIHUzMiBv
ZmZzZXQsIHUzMiB2YWwpCitzdGF0aWMgdm9pZCBjZG5zX3RvcnJlbnRfZHBfd3JpdGUoc3RydWN0
IHJlZ21hcCAqcmVnbWFwLCB1MzIgb2Zmc2V0LCB1MzIgdmFsKQogewotCXdyaXRlbCh2YWwsIGNk
bnNfcGh5LT5iYXNlICsgb2Zmc2V0KTsKKwlyZWdtYXBfd3JpdGUocmVnbWFwLCBvZmZzZXQsIHZh
bCk7CiB9CiAKLXN0YXRpYyB1MzIgY2Ruc190b3JyZW50X2RwX3JlYWQoc3RydWN0IGNkbnNfdG9y
cmVudF9waHkgKmNkbnNfcGh5LCB1MzIgb2Zmc2V0KQorc3RhdGljIHUzMiBjZG5zX3RvcnJlbnRf
ZHBfcmVhZChzdHJ1Y3QgcmVnbWFwICpyZWdtYXAsIHUzMiBvZmZzZXQpCiB7Ci0JcmV0dXJuIHJl
YWRsKGNkbnNfcGh5LT5iYXNlICsgb2Zmc2V0KTsKLX0KKwl1MzIgdmFsOwogCi0jZGVmaW5lIGNk
bnNfdG9ycmVudF9kcF9yZWFkX3BvbGxfdGltZW91dChjZG5zX3BoeSwgb2Zmc2V0LCB2YWwsIGNv
bmQsIFwKLQkJCQkJICBkZWxheV91cywgdGltZW91dF91cykgXAotCXJlYWRsX3BvbGxfdGltZW91
dCgoY2Ruc19waHkpLT5iYXNlICsgKG9mZnNldCksIFwKLQkJCSAgIHZhbCwgY29uZCwgZGVsYXlf
dXMsIHRpbWVvdXRfdXMpCisJcmVnbWFwX3JlYWQocmVnbWFwLCBvZmZzZXQsICZ2YWwpOworCXJl
dHVybiB2YWw7Cit9CiAKIC8qCiAgKiBTdHJ1Y3R1cmUgdXNlZCB0byBzdG9yZSB2YWx1ZXMgb2Yg
UEhZIHJlZ2lzdGVycyBmb3Igdm9sdGFnZS1yZWxhdGVkCkBAIC00NDQsNiArNDY4LDggQEAgc3Rh
dGljIGludCBjZG5zX3RvcnJlbnRfZHBfc2V0X3BsbF9lbihzdHJ1Y3QgY2Ruc190b3JyZW50X3Bo
eSAqY2Ruc19waHksCiB7CiAJdTMyIHJkX3ZhbDsKIAl1MzIgcmV0OworCXN0cnVjdCByZWdtYXAg
KnJlZ21hcCA9IGNkbnNfcGh5LT5yZWdtYXBfZHB0eF9waHlfcmVnOworCiAJLyoKIAkgKiBVc2Vk
IHRvIGRldGVybWluZSwgd2hpY2ggYml0cyB0byBjaGVjayBmb3Igb3IgZW5hYmxlIGluCiAJICog
UEhZX1BNQV9YQ1ZSX1BMTENMS19FTiByZWdpc3Rlci4KQEAgLTQ3NSwxNCArNTAxLDE0IEBAIHN0
YXRpYyBpbnQgY2Ruc190b3JyZW50X2RwX3NldF9wbGxfZW4oc3RydWN0IGNkbnNfdG9ycmVudF9w
aHkgKmNkbnNfcGh5LAogCWVsc2UKIAkJcGxsX3ZhbCA9IDB4MDAwMDAwMDA7CiAKLQljZG5zX3Rv
cnJlbnRfZHBfd3JpdGUoY2Ruc19waHksIFBIWV9QTUFfWENWUl9QTExDTEtfRU4sIHBsbF92YWwp
OworCWNkbnNfdG9ycmVudF9kcF93cml0ZShyZWdtYXAsIFBIWV9QTUFfWENWUl9QTExDTEtfRU4s
IHBsbF92YWwpOwogCiAJLyogV2FpdCBmb3IgYWNrbm93bGVkZ21lbnQgZnJvbSBQSFkuICovCi0J
cmV0ID0gY2Ruc190b3JyZW50X2RwX3JlYWRfcG9sbF90aW1lb3V0KGNkbnNfcGh5LAotCQkJCQkJ
UEhZX1BNQV9YQ1ZSX1BMTENMS19FTl9BQ0ssCi0JCQkJCQlyZF92YWwsCi0JCQkJCQkocmRfdmFs
ICYgcGxsX2JpdHMpID09IHBsbF92YWwsCi0JCQkJCQkwLCBQT0xMX1RJTUVPVVRfVVMpOworCXJl
dCA9IHJlZ21hcF9yZWFkX3BvbGxfdGltZW91dChyZWdtYXAsCisJCQkJICAgICAgIFBIWV9QTUFf
WENWUl9QTExDTEtfRU5fQUNLLAorCQkJCSAgICAgICByZF92YWwsCisJCQkJICAgICAgIChyZF92
YWwgJiBwbGxfYml0cykgPT0gcGxsX3ZhbCwKKwkJCQkgICAgICAgMCwgUE9MTF9USU1FT1VUX1VT
KTsKIAluZGVsYXkoMTAwKTsKIAlyZXR1cm4gcmV0OwogfQpAQCAtNjA2LDkgKzYzMiwxMCBAQCBz
dGF0aWMgaW50IGNkbnNfdG9ycmVudF9kcF92ZXJpZnlfY29uZmlnKHN0cnVjdCBjZG5zX3RvcnJl
bnRfcGh5ICpjZG5zX3BoeSwKIHN0YXRpYyB2b2lkIGNkbnNfdG9ycmVudF9kcF9zZXRfYTBfcGxs
KHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5ICpjZG5zX3BoeSwKIAkJCQkgICAgICAgdTMyIG51bV9s
YW5lcykKIHsKLQl1MzIgcHdyX3N0YXRlID0gY2Ruc190b3JyZW50X2RwX3JlYWQoY2Ruc19waHks
CisJc3RydWN0IHJlZ21hcCAqcmVnbWFwID0gY2Ruc19waHktPnJlZ21hcF9kcHR4X3BoeV9yZWc7
CisJdTMyIHB3cl9zdGF0ZSA9IGNkbnNfdG9ycmVudF9kcF9yZWFkKHJlZ21hcCwKIAkJCQkJICAg
ICBQSFlfUE1BX1hDVlJfUE9XRVJfU1RBVEVfUkVRKTsKLQl1MzIgcGxsX2Nsa19lbiA9IGNkbnNf
dG9ycmVudF9kcF9yZWFkKGNkbnNfcGh5LAorCXUzMiBwbGxfY2xrX2VuID0gY2Ruc190b3JyZW50
X2RwX3JlYWQocmVnbWFwLAogCQkJCQkgICAgICBQSFlfUE1BX1hDVlJfUExMQ0xLX0VOKTsKIAog
CS8qIExhbmUgMCBpcyBhbHdheXMgZW5hYmxlZC4gKi8KQEAgLTYzMyw5ICs2NjAsOCBAQCBzdGF0
aWMgdm9pZCBjZG5zX3RvcnJlbnRfZHBfc2V0X2EwX3BsbChzdHJ1Y3QgY2Ruc190b3JyZW50X3Bo
eSAqY2Ruc19waHksCiAJCXBsbF9jbGtfZW4gJj0gfigweDAxVSA8PCAzKTsKIAl9CiAKLQljZG5z
X3RvcnJlbnRfZHBfd3JpdGUoY2Ruc19waHksCi0JCQkgICAgICBQSFlfUE1BX1hDVlJfUE9XRVJf
U1RBVEVfUkVRLCBwd3Jfc3RhdGUpOwotCWNkbnNfdG9ycmVudF9kcF93cml0ZShjZG5zX3BoeSwg
UEhZX1BNQV9YQ1ZSX1BMTENMS19FTiwgcGxsX2Nsa19lbik7CisJY2Ruc190b3JyZW50X2RwX3dy
aXRlKHJlZ21hcCwgUEhZX1BNQV9YQ1ZSX1BPV0VSX1NUQVRFX1JFUSwgcHdyX3N0YXRlKTsKKwlj
ZG5zX3RvcnJlbnRfZHBfd3JpdGUocmVnbWFwLCBQSFlfUE1BX1hDVlJfUExMQ0xLX0VOLCBwbGxf
Y2xrX2VuKTsKIH0KIAogLyogQ29uZmlndXJlIGxhbmUgY291bnQgYXMgcmVxdWlyZWQuICovCkBA
IC02NDQsMTggKzY3MCwxOSBAQCBzdGF0aWMgaW50IGNkbnNfdG9ycmVudF9kcF9zZXRfbGFuZXMo
c3RydWN0IGNkbnNfdG9ycmVudF9waHkgKmNkbnNfcGh5LAogewogCXUzMiB2YWx1ZTsKIAl1MzIg
cmV0OworCXN0cnVjdCByZWdtYXAgKnJlZ21hcCA9IGNkbnNfcGh5LT5yZWdtYXBfZHB0eF9waHlf
cmVnOwogCXU4IGxhbmVfbWFzayA9ICgxIDw8IGRwLT5sYW5lcykgLSAxOwogCi0JdmFsdWUgPSBj
ZG5zX3RvcnJlbnRfZHBfcmVhZChjZG5zX3BoeSwgUEhZX1JFU0VUKTsKKwl2YWx1ZSA9IGNkbnNf
dG9ycmVudF9kcF9yZWFkKHJlZ21hcCwgUEhZX1JFU0VUKTsKIAkvKiBjbGVhciBwbWFfdHhfZWxl
Y19pZGxlX2xuXyogYml0cy4gKi8KIAl2YWx1ZSAmPSB+UE1BX1RYX0VMRUNfSURMRV9NQVNLOwog
CS8qIEFzc2VydCBwbWFfdHhfZWxlY19pZGxlX2xuXyogZm9yIGRpc2FibGVkIGxhbmVzLiAqLwog
CXZhbHVlIHw9ICgofmxhbmVfbWFzaykgPDwgUE1BX1RYX0VMRUNfSURMRV9TSElGVCkgJgogCQkg
UE1BX1RYX0VMRUNfSURMRV9NQVNLOwotCWNkbnNfdG9ycmVudF9kcF93cml0ZShjZG5zX3BoeSwg
UEhZX1JFU0VULCB2YWx1ZSk7CisJY2Ruc190b3JyZW50X2RwX3dyaXRlKHJlZ21hcCwgUEhZX1JF
U0VULCB2YWx1ZSk7CiAKIAkvKiByZXNldCB0aGUgbGluayBieSBhc3NlcnRpbmcgcGh5X2wwMF9y
ZXNldF9uIGxvdyAqLwotCWNkbnNfdG9ycmVudF9kcF93cml0ZShjZG5zX3BoeSwgUEhZX1JFU0VU
LAorCWNkbnNfdG9ycmVudF9kcF93cml0ZShyZWdtYXAsIFBIWV9SRVNFVCwKIAkJCSAgICAgIHZh
bHVlICYgKH5QSFlfTDAwX1JFU0VUX05fTUFTSykpOwogCiAJLyoKQEAgLTY2MywxMyArNjkwLDEz
IEBAIHN0YXRpYyBpbnQgY2Ruc190b3JyZW50X2RwX3NldF9sYW5lcyhzdHJ1Y3QgY2Ruc190b3Jy
ZW50X3BoeSAqY2Ruc19waHksCiAJICogYW5kIHBvd2VyZWQgZG93biB3aGVuIHJlLWVuYWJsaW5n
IHRoZSBsaW5rCiAJICovCiAJdmFsdWUgPSAodmFsdWUgJiAweDAwMDBGRkYwKSB8ICgweDAwMDAw
MDBFICYgbGFuZV9tYXNrKTsKLQljZG5zX3RvcnJlbnRfZHBfd3JpdGUoY2Ruc19waHksIFBIWV9S
RVNFVCwgdmFsdWUpOworCWNkbnNfdG9ycmVudF9kcF93cml0ZShyZWdtYXAsIFBIWV9SRVNFVCwg
dmFsdWUpOwogCiAJY2Ruc190b3JyZW50X2RwX3NldF9hMF9wbGwoY2Ruc19waHksIGRwLT5sYW5l
cyk7CiAKIAkvKiByZWxlYXNlIHBoeV9sMCpfcmVzZXRfbiBiYXNlZCBvbiB1c2VkIGxhbmVDb3Vu
dCAqLwogCXZhbHVlID0gKHZhbHVlICYgMHgwMDAwRkZGMCkgfCAoMHgwMDAwMDAwRiAmIGxhbmVf
bWFzayk7Ci0JY2Ruc190b3JyZW50X2RwX3dyaXRlKGNkbnNfcGh5LCBQSFlfUkVTRVQsIHZhbHVl
KTsKKwljZG5zX3RvcnJlbnRfZHBfd3JpdGUocmVnbWFwLCBQSFlfUkVTRVQsIHZhbHVlKTsKIAog
CS8qIFdhaXQsIHVudGlsIFBIWSBnZXRzIHJlYWR5IGFmdGVyIHJlbGVhc2luZyBQSFkgcmVzZXQg
c2lnbmFsLiAqLwogCXJldCA9IGNkbnNfdG9ycmVudF9kcF93YWl0X3BtYV9jbW5fcmVhZHkoY2Ru
c19waHkpOwpAQCAtNjc5LDcgKzcwNiw3IEBAIHN0YXRpYyBpbnQgY2Ruc190b3JyZW50X2RwX3Nl
dF9sYW5lcyhzdHJ1Y3QgY2Ruc190b3JyZW50X3BoeSAqY2Ruc19waHksCiAJbmRlbGF5KDEwMCk7
CiAKIAkvKiByZWxlYXNlIHBtYV94Y3ZyX3BsbGNsa19lbl9sbl8qLCBvbmx5IGZvciB0aGUgbWFz
dGVyIGxhbmUgKi8KLQljZG5zX3RvcnJlbnRfZHBfd3JpdGUoY2Ruc19waHksIFBIWV9QTUFfWENW
Ul9QTExDTEtfRU4sIDB4MDAwMSk7CisJY2Ruc190b3JyZW50X2RwX3dyaXRlKHJlZ21hcCwgUEhZ
X1BNQV9YQ1ZSX1BMTENMS19FTiwgMHgwMDAxKTsKIAogCXJldCA9IGNkbnNfdG9ycmVudF9kcF9y
dW4oY2Ruc19waHkpOwogCkBAIC04MDYsNiArODMzLDcgQEAgc3RhdGljIGludCBjZG5zX3RvcnJl
bnRfZHBfaW5pdChzdHJ1Y3QgcGh5ICpwaHkpCiAJaW50IHJldDsKIAogCXN0cnVjdCBjZG5zX3Rv
cnJlbnRfcGh5ICpjZG5zX3BoeSA9IHBoeV9nZXRfZHJ2ZGF0YShwaHkpOworCXN0cnVjdCByZWdt
YXAgKnJlZ21hcCA9IGNkbnNfcGh5LT5yZWdtYXBfZHB0eF9waHlfcmVnOwogCiAJcmV0ID0gY2xr
X3ByZXBhcmVfZW5hYmxlKGNkbnNfcGh5LT5jbGspOwogCWlmIChyZXQpIHsKQEAgLTgzMCw3ICs4
NTgsNyBAQCBzdGF0aWMgaW50IGNkbnNfdG9ycmVudF9kcF9pbml0KHN0cnVjdCBwaHkgKnBoeSkK
IAkJcmV0dXJuIC1FSU5WQUw7CiAJfQogCi0JY2Ruc190b3JyZW50X2RwX3dyaXRlKGNkbnNfcGh5
LCBQSFlfQVVYX0NUUkwsIDB4MDAwMyk7IC8qIGVuYWJsZSBBVVggKi8KKwljZG5zX3RvcnJlbnRf
ZHBfd3JpdGUocmVnbWFwLCBQSFlfQVVYX0NUUkwsIDB4MDAwMyk7IC8qIGVuYWJsZSBBVVggKi8K
IAogCS8qIFBIWSBQTUEgcmVnaXN0ZXJzIGNvbmZpZ3VyYXRpb24gZnVuY3Rpb24gKi8KIAljZG5z
X3RvcnJlbnRfZHBfcG1hX2NmZyhjZG5zX3BoeSk7CkBAIC04NDYsMTEgKzg3NCwxMSBAQCBzdGF0
aWMgaW50IGNkbnNfdG9ycmVudF9kcF9pbml0KHN0cnVjdCBwaHkgKnBoeSkKIAkgKiB1c2VkIGxh
bmVzCiAJICovCiAJbGFuZV9iaXRzID0gKDEgPDwgY2Ruc19waHktPm51bV9sYW5lcykgLSAxOwot
CWNkbnNfdG9ycmVudF9kcF93cml0ZShjZG5zX3BoeSwgUEhZX1JFU0VULAorCWNkbnNfdG9ycmVu
dF9kcF93cml0ZShyZWdtYXAsIFBIWV9SRVNFVCwKIAkJCSAgICAgICgoMHhGICYgfmxhbmVfYml0
cykgPDwgNCkgfCAoMHhGICYgbGFuZV9iaXRzKSk7CiAKIAkvKiByZWxlYXNlIHBtYV94Y3ZyX3Bs
bGNsa19lbl9sbl8qLCBvbmx5IGZvciB0aGUgbWFzdGVyIGxhbmUgKi8KLQljZG5zX3RvcnJlbnRf
ZHBfd3JpdGUoY2Ruc19waHksIFBIWV9QTUFfWENWUl9QTExDTEtfRU4sIDB4MDAwMSk7CisJY2Ru
c190b3JyZW50X2RwX3dyaXRlKHJlZ21hcCwgUEhZX1BNQV9YQ1ZSX1BMTENMS19FTiwgMHgwMDAx
KTsKIAogCS8qIFBIWSBQTUEgcmVnaXN0ZXJzIGNvbmZpZ3VyYXRpb24gZnVuY3Rpb25zICovCiAJ
LyogSW5pdGlhbGl6ZSBQSFkgd2l0aCBtYXggc3VwcG9ydGVkIGxpbmsgcmF0ZSwgd2l0aG91dCBT
U0MuICovCkBAIC04NjYsNyArODk0LDcgQEAgc3RhdGljIGludCBjZG5zX3RvcnJlbnRfZHBfaW5p
dChzdHJ1Y3QgcGh5ICpwaHkpCiAJCQkJICAgICBjZG5zX3BoeS0+bnVtX2xhbmVzKTsKIAogCS8q
IHRha2Ugb3V0IG9mIHJlc2V0ICovCi0JY2Ruc19kcF9waHlfd3JpdGVfZmllbGQoY2Ruc19waHks
IFBIWV9SRVNFVCwgOCwgMSwgMSk7CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGNkbnNfcGh5LT5waHlf
cmVzZXRfY3RybCwgMHgxKTsKIAogCWNkbnNfdG9ycmVudF9waHlfb24ocGh5KTsKIApAQCAtODky
LDEwICs5MjAsMTAgQEAgaW50IGNkbnNfdG9ycmVudF9kcF93YWl0X3BtYV9jbW5fcmVhZHkoc3Ry
dWN0IGNkbnNfdG9ycmVudF9waHkgKmNkbnNfcGh5KQogewogCXVuc2lnbmVkIGludCByZWc7CiAJ
aW50IHJldDsKKwlzdHJ1Y3QgcmVnbWFwICpyZWdtYXAgPSBjZG5zX3BoeS0+cmVnbWFwX2RwdHhf
cGh5X3JlZzsKIAotCXJldCA9IGNkbnNfdG9ycmVudF9kcF9yZWFkX3BvbGxfdGltZW91dChjZG5z
X3BoeSwgUEhZX1BNQV9DTU5fUkVBRFksCi0JCQkJCQlyZWcsIHJlZyAmIDEsIDAsCi0JCQkJCQlQ
T0xMX1RJTUVPVVRfVVMpOworCXJldCA9IHJlZ21hcF9yZWFkX3BvbGxfdGltZW91dChyZWdtYXAs
IFBIWV9QTUFfQ01OX1JFQURZLCByZWcsCisJCQkJICAgICAgIHJlZyAmIDEsIDAsIFBPTExfVElN
RU9VVF9VUyk7CiAJaWYgKHJldCA9PSAtRVRJTUVET1VUKSB7CiAJCWRldl9lcnIoY2Ruc19waHkt
PmRldiwKIAkJCSJ0aW1lb3V0IHdhaXRpbmcgZm9yIFBNQSBjb21tb24gcmVhZHlcbiIpOwpAQCAt
MTQxMyw2ICsxNDQxLDcgQEAgc3RhdGljIGludCBjZG5zX3RvcnJlbnRfZHBfc2V0X3Bvd2VyX3N0
YXRlKHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5ICpjZG5zX3BoeSwKIAl1MzIgbWFzazsKIAl1MzIg
cmVhZF92YWw7CiAJdTMyIHJldDsKKwlzdHJ1Y3QgcmVnbWFwICpyZWdtYXAgPSBjZG5zX3BoeS0+
cmVnbWFwX2RwdHhfcGh5X3JlZzsKIAogCXN3aXRjaCAocG93ZXJzdGF0ZSkgewogCWNhc2UgKFBP
V0VSU1RBVEVfQTApOgpAQCAtMTQ1MywxNSArMTQ4MiwxMiBAQCBzdGF0aWMgaW50IGNkbnNfdG9y
cmVudF9kcF9zZXRfcG93ZXJfc3RhdGUoc3RydWN0IGNkbnNfdG9ycmVudF9waHkgKmNkbnNfcGh5
LAogCX0KIAogCS8qIFNldCBwb3dlciBzdGF0ZSBBPG4+LiAqLwotCWNkbnNfdG9ycmVudF9kcF93
cml0ZShjZG5zX3BoeSwgUEhZX1BNQV9YQ1ZSX1BPV0VSX1NUQVRFX1JFUSwgdmFsdWUpOworCWNk
bnNfdG9ycmVudF9kcF93cml0ZShyZWdtYXAsIFBIWV9QTUFfWENWUl9QT1dFUl9TVEFURV9SRVEs
IHZhbHVlKTsKIAkvKiBXYWl0LCB1bnRpbCBQSFkgYWNrbm93bGVkZ2VzIHBvd2VyIHN0YXRlIGNv
bXBsZXRpb24uICovCi0JcmV0ID0gY2Ruc190b3JyZW50X2RwX3JlYWRfcG9sbF90aW1lb3V0KGNk
bnNfcGh5LAotCQkJCQkJUEhZX1BNQV9YQ1ZSX1BPV0VSX1NUQVRFX0FDSywKLQkJCQkJCXJlYWRf
dmFsLAotCQkJCQkJKHJlYWRfdmFsICYgbWFzaykgPT0gdmFsdWUsIDAsCi0JCQkJCQlQT0xMX1RJ
TUVPVVRfVVMpOwotCWNkbnNfdG9ycmVudF9kcF93cml0ZShjZG5zX3BoeSwKLQkJCSAgICAgIFBI
WV9QTUFfWENWUl9QT1dFUl9TVEFURV9SRVEsIDB4MDAwMDAwMDApOworCXJldCA9IHJlZ21hcF9y
ZWFkX3BvbGxfdGltZW91dChyZWdtYXAsIFBIWV9QTUFfWENWUl9QT1dFUl9TVEFURV9BQ0ssCisJ
CQkJICAgICAgIHJlYWRfdmFsLCAocmVhZF92YWwgJiBtYXNrKSA9PSB2YWx1ZSwgMCwKKwkJCQkg
ICAgICAgUE9MTF9USU1FT1VUX1VTKTsKKwljZG5zX3RvcnJlbnRfZHBfd3JpdGUocmVnbWFwLCBQ
SFlfUE1BX1hDVlJfUE9XRVJfU1RBVEVfUkVRLCAweDAwMDAwMDAwKTsKIAluZGVsYXkoMTAwKTsK
IAogCXJldHVybiByZXQ7CkBAIC0xNDcxLDE1ICsxNDk3LDE1IEBAIHN0YXRpYyBpbnQgY2Ruc190
b3JyZW50X2RwX3J1bihzdHJ1Y3QgY2Ruc190b3JyZW50X3BoeSAqY2Ruc19waHkpCiB7CiAJdW5z
aWduZWQgaW50IHJlYWRfdmFsOwogCWludCByZXQ7CisJc3RydWN0IHJlZ21hcCAqcmVnbWFwID0g
Y2Ruc19waHktPnJlZ21hcF9kcHR4X3BoeV9yZWc7CiAKIAkvKgogCSAqIHdhaXRpbmcgZm9yIEFD
SyBvZiBwbWFfeGN2cl9wbGxjbGtfZW5fbG5fKiwgb25seSBmb3IgdGhlCiAJICogbWFzdGVyIGxh
bmUKIAkgKi8KLQlyZXQgPSBjZG5zX3RvcnJlbnRfZHBfcmVhZF9wb2xsX3RpbWVvdXQoY2Ruc19w
aHksCi0JCQkJCQlQSFlfUE1BX1hDVlJfUExMQ0xLX0VOX0FDSywKLQkJCQkJCXJlYWRfdmFsLCBy
ZWFkX3ZhbCAmIDEsIDAsCi0JCQkJCQlQT0xMX1RJTUVPVVRfVVMpOworCXJldCA9IHJlZ21hcF9y
ZWFkX3BvbGxfdGltZW91dChyZWdtYXAsIFBIWV9QTUFfWENWUl9QTExDTEtfRU5fQUNLLAorCQkJ
CSAgICAgICByZWFkX3ZhbCwgcmVhZF92YWwgJiAxLAorCQkJCSAgICAgICAwLCBQT0xMX1RJTUVP
VVRfVVMpOwogCWlmIChyZXQgPT0gLUVUSU1FRE9VVCkgewogCQlkZXZfZXJyKGNkbnNfcGh5LT5k
ZXYsCiAJCQkidGltZW91dCB3YWl0aW5nIGZvciBsaW5rIFBMTCBjbG9jayBlbmFibGUgYWNrXG4i
KTsKQEAgLTE0OTksMjEgKzE1MjUsNiBAQCBzdGF0aWMgaW50IGNkbnNfdG9ycmVudF9kcF9ydW4o
c3RydWN0IGNkbnNfdG9ycmVudF9waHkgKmNkbnNfcGh5KQogCXJldHVybiByZXQ7CiB9CiAKLXN0
YXRpYyB2b2lkIGNkbnNfZHBfcGh5X3dyaXRlX2ZpZWxkKHN0cnVjdCBjZG5zX3RvcnJlbnRfcGh5
ICpjZG5zX3BoeSwKLQkJCQkgICAgdW5zaWduZWQgaW50IG9mZnNldCwKLQkJCQkgICAgdW5zaWdu
ZWQgY2hhciBzdGFydF9iaXQsCi0JCQkJICAgIHVuc2lnbmVkIGNoYXIgbnVtX2JpdHMsCi0JCQkJ
ICAgIHVuc2lnbmVkIGludCB2YWwpCi17Ci0JdW5zaWduZWQgaW50IHJlYWRfdmFsOwotCi0JcmVh
ZF92YWwgPSBjZG5zX3RvcnJlbnRfZHBfcmVhZChjZG5zX3BoeSwgb2Zmc2V0KTsKLQljZG5zX3Rv
cnJlbnRfZHBfd3JpdGUoY2Ruc19waHksIG9mZnNldCwKLQkJCSAgICAgICgodmFsIDw8IHN0YXJ0
X2JpdCkgfAotCQkJICAgICAgKHJlYWRfdmFsICYgfigoKDEgPDwgbnVtX2JpdHMpIC0gMSkgPDwK
LQkJCSAgICAgIHN0YXJ0X2JpdCkpKSk7Ci19Ci0KIHN0YXRpYyBpbnQgY2Ruc190b3JyZW50X3Bo
eV9vbihzdHJ1Y3QgcGh5ICpwaHkpCiB7CiAJc3RydWN0IGNkbnNfdG9ycmVudF9waHkgKmNkbnNf
cGh5ID0gcGh5X2dldF9kcnZkYXRhKHBoeSk7CkBAIC0xNTc3LDYgKzE1ODgsMTQgQEAgc3RhdGlj
IGludCBjZG5zX3JlZ2ZpZWxkX2luaXQoc3RydWN0IGNkbnNfdG9ycmVudF9waHkgKmNkbnNfcGh5
KQogCX0KIAljZG5zX3BoeS0+cGh5X3BtYV9wbGxfcmF3X2N0cmwgPSBmaWVsZDsKIAorCXJlZ21h
cCA9IGNkbnNfcGh5LT5yZWdtYXBfZHB0eF9waHlfcmVnOworCWZpZWxkID0gZGV2bV9yZWdtYXBf
ZmllbGRfYWxsb2MoZGV2LCByZWdtYXAsIHBoeV9yZXNldF9jdHJsKTsKKwlpZiAoSVNfRVJSKGZp
ZWxkKSkgeworCQlkZXZfZXJyKGRldiwgIlBIWV9SRVNFVCByZWcgZmllbGQgaW5pdCBmYWlsZWRc
biIpOworCQlyZXR1cm4gUFRSX0VSUihmaWVsZCk7CisJfQorCWNkbnNfcGh5LT5waHlfcmVzZXRf
Y3RybCA9IGZpZWxkOworCiAJcmV0dXJuIDA7CiB9CiAKQEAgLTE2NDUsNiArMTY2NCwxNiBAQCBz
dGF0aWMgaW50IGNkbnNfcmVnbWFwX2luaXRfdG9ycmVudF9kcChzdHJ1Y3QgY2Ruc190b3JyZW50
X3BoeSAqY2Ruc19waHksCiAJfQogCWNkbnNfcGh5LT5yZWdtYXBfcGh5X3BtYV9jb21tb25fY2Ri
ID0gcmVnbWFwOwogCisJYmxvY2tfb2Zmc2V0ID0gVE9SUkVOVF9EUFRYX1BIWV9PRkZTRVQ7CisJ
cmVnbWFwID0gY2Ruc19yZWdtYXBfaW5pdChkZXYsIGJhc2UsIGJsb2NrX29mZnNldCwKKwkJCQkg
IHJlZ19vZmZzZXRfc2hpZnQsCisJCQkJICAmY2Ruc190b3JyZW50X2RwdHhfcGh5X2NvbmZpZyk7
CisJaWYgKElTX0VSUihyZWdtYXApKSB7CisJCWRldl9lcnIoZGV2LCAiRmFpbGVkIHRvIGluaXQg
RFBUWCBQSFkgcmVnbWFwXG4iKTsKKwkJcmV0dXJuIFBUUl9FUlIocmVnbWFwKTsKKwl9CisJY2Ru
c19waHktPnJlZ21hcF9kcHR4X3BoeV9yZWcgPSByZWdtYXA7CisKIAlyZXR1cm4gMDsKIH0KIAot
LSAKMi43LjQKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
