Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9BAFF5B58D
	for <lists+dri-devel@lfdr.de>; Mon,  1 Jul 2019 09:13:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0F11F89F07;
	Mon,  1 Jul 2019 07:13:00 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x541.google.com (mail-pg1-x541.google.com
 [IPv6:2607:f8b0:4864:20::541])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B69ED89D73;
 Mon,  1 Jul 2019 03:23:07 +0000 (UTC)
Received: by mail-pg1-x541.google.com with SMTP id i18so619419pgl.11;
 Sun, 30 Jun 2019 20:23:07 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id;
 bh=PrNNA7UemSEt+9xPeSxVNoncNwrWLLFfcBGUueJJCmY=;
 b=mx8vtUPr37tNFYZNBNruOa+tfS94wOzC7rBbsdAz/TQdWsJSxS/mKIK62UGUFkZseY
 dTbtUhX/83YYk8xBbtWBIXz8vPfVLIFo4o2tBDJkARVJioaR/ed3t9XAD8XS7yOHNVxX
 Dyh4TlEtFXoZr8fTJpTlIki0pOf2Pfh6dLfbUCiZrtQZhiBwp7wKxkarqNtcfYBOttpm
 2U00xBfj8pXsAZn8kIIZBR6M8G+euThrIjLrvwWDt+T8/nd2H1CwPUYFx2UoqAogQzXS
 tIKNSyrYeoQ2yWeD/J/9dic5O/5+p6UPqQ4mrYhy2ulsLZbtvTUSZvfjsan61aqgt0Ng
 1QSA==
X-Gm-Message-State: APjAAAWtwUkBNwUhcacgdU7xMcAQf4ZInj7ozY/SXuL20vfPSUdY8xh6
 MCkaM/t7xoVAPNlrkoFIPJA=
X-Google-Smtp-Source: APXvYqzMEFgmFIqdX2C093FHy/XWxDUnBWMzfZ9JHtwBQdhr/x0OR95JKpj4+iE2WGIxuFjaIRCm2Q==
X-Received: by 2002:a17:90a:26e4:: with SMTP id
 m91mr28480919pje.93.1561951387264; 
 Sun, 30 Jun 2019 20:23:07 -0700 (PDT)
Received: from hfq-skylake.ipads-lab.se.sjtu.edu.cn ([202.120.40.82])
 by smtp.googlemail.com with ESMTPSA id v4sm10092040pff.45.2019.06.30.20.23.00
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Sun, 30 Jun 2019 20:23:06 -0700 (PDT)
From: Fuqian Huang <huangfq.daxian@gmail.com>
To: 
Subject: [PATCH 1/4] gpu: Use dev_get_drvdata()
Date: Mon,  1 Jul 2019 11:22:35 +0800
Message-Id: <20190701032245.25906-1-huangfq.daxian@gmail.com>
X-Mailer: git-send-email 2.11.0
X-Mailman-Approved-At: Mon, 01 Jul 2019 07:12:58 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id;
 bh=PrNNA7UemSEt+9xPeSxVNoncNwrWLLFfcBGUueJJCmY=;
 b=iTQH984o/AQOMuBEhmTJENql3LVdFAOsva3/2ZUdQEsqIhyR+ekcVUPujjotl2K0l9
 XSpVBG37dDuryIlbEOognx1gEXHaEElKKoMBBbMgzcecxEbKV1OLkzeGbrWjB565F8WE
 yT4Z7kFxl07KpO/3NFmifHvxYamW02T+iyfbz7rk5H8dcs28GYJcvbtugoQ8BEnPWL7N
 EIyyrNtjpREchxTvQ4Qn8bm+YXkW0szlxSJk9iG8iQbv4jjcEvrvhCUzYbcjTLo9Kd6A
 EvljS4nAeapQPteUAnJPjmaghAd4s5vsIwju8UmL4hMUxKNP0WNCED39h2iEutGy3Z9B
 jvig==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, dri-devel@lists.freedesktop.org,
 Chandan Uddaraju <chandanu@codeaurora.org>,
 Laurent Pinchart <laurent.pinchart+renesas@ideasonboard.com>,
 Jonathan Marek <jonathan@marek.ca>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 Mamta Shukla <mamtashukla555@gmail.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sibi Sankar <sibis@codeaurora.org>,
 Fuqian Huang <huangfq.daxian@gmail.com>, freedreno@lists.freedesktop.org,
 Rajesh Yadav <ryadav@codeaurora.org>, linux-arm-msm@vger.kernel.org,
 Abhinav Kumar <abhinavk@codeaurora.org>, Bruce Wang <bzwang@chromium.org>,
 Thomas Gleixner <tglx@linutronix.de>, Sean Paul <sean@poorly.run>,
 Tomeu Vizoso <tomeu.vizoso@collabora.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>, linux-kernel@vger.kernel.org,
 Daniel Mack <daniel@zonque.org>, Enrico Weigelt <info@metux.net>,
 Sravanthi Kollukuduru <skolluku@codeaurora.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VXNpbmcgZGV2X2dldF9kcnZkYXRhIGRpcmVjdGx5LgoKU2lnbmVkLW9mZi1ieTogRnVxaWFuIEh1
YW5nIDxodWFuZ2ZxLmRheGlhbkBnbWFpbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL21zbS9h
ZHJlbm8vYWRyZW5vX2RldmljZS5jICAgICAgfCAgNiArKy0tLS0KIGRyaXZlcnMvZ3B1L2RybS9t
c20vZGlzcC9kcHUxL2RwdV9rbXMuYyAgICAgICAgIHwgMTMgKysrKystLS0tLS0tLQogZHJpdmVy
cy9ncHUvZHJtL21zbS9kaXNwL21kcDUvbWRwNV9rbXMuYyAgICAgICAgfCAgNiArKy0tLS0KIGRy
aXZlcnMvZ3B1L2RybS9tc20vZHNpL2RzaV9ob3N0LmMgICAgICAgICAgICAgIHwgIDYgKystLS0t
CiBkcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9kcnYuYyAgICAgICAgICAgICAgICAgICB8ICAzICst
LQogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvcGFuZWwtZHNpLWNtLmMgfCAxNSAr
KysrKy0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2Uu
YyAgICAgIHwgIDYgKystLS0tCiA3IGZpbGVzIGNoYW5nZWQsIDE5IGluc2VydGlvbnMoKyksIDM2
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2Fk
cmVub19kZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19kZXZpY2Uu
YwppbmRleCBiM2RlYjM0NmE0MmIuLmZhZmQwMGQyNTc0YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2RldmljZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9t
c20vYWRyZW5vL2FkcmVub19kZXZpY2UuYwpAQCAtNDAzLDE2ICs0MDMsMTQgQEAgc3RhdGljIGNv
bnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgZHRfbWF0Y2hbXSA9IHsKICNpZmRlZiBDT05GSUdfUE0K
IHN0YXRpYyBpbnQgYWRyZW5vX3Jlc3VtZShzdHJ1Y3QgZGV2aWNlICpkZXYpCiB7Ci0Jc3RydWN0
IHBsYXRmb3JtX2RldmljZSAqcGRldiA9IHRvX3BsYXRmb3JtX2RldmljZShkZXYpOwotCXN0cnVj
dCBtc21fZ3B1ICpncHUgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKKwlzdHJ1Y3QgbXNt
X2dwdSAqZ3B1ID0gZGV2X2dldF9kcnZkYXRhKGRldik7CiAKIAlyZXR1cm4gZ3B1LT5mdW5jcy0+
cG1fcmVzdW1lKGdwdSk7CiB9CiAKIHN0YXRpYyBpbnQgYWRyZW5vX3N1c3BlbmQoc3RydWN0IGRl
dmljZSAqZGV2KQogewotCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYgPSB0b19wbGF0Zm9y
bV9kZXZpY2UoZGV2KTsKLQlzdHJ1Y3QgbXNtX2dwdSAqZ3B1ID0gcGxhdGZvcm1fZ2V0X2RydmRh
dGEocGRldik7CisJc3RydWN0IG1zbV9ncHUgKmdwdSA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwog
CiAJcmV0dXJuIGdwdS0+ZnVuY3MtPnBtX3N1c3BlbmQoZ3B1KTsKIH0KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9t
c20vZGlzcC9kcHUxL2RwdV9rbXMuYwppbmRleCBhZTg4NWU1ZGQwN2QuLjZjNmY4Y2E5MzgwZiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2ttcy5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuYwpAQCAtMTAyNSwxNiArMTAy
NSwxNSBAQCBzdGF0aWMgaW50IGRwdV9iaW5kKHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRl
dmljZSAqbWFzdGVyLCB2b2lkICpkYXRhKQogCiBzdGF0aWMgdm9pZCBkcHVfdW5iaW5kKHN0cnVj
dCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZSAqbWFzdGVyLCB2b2lkICpkYXRhKQogewotCXN0
cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYgPSB0b19wbGF0Zm9ybV9kZXZpY2UoZGV2KTsKLQlz
dHJ1Y3QgZHB1X2ttcyAqZHB1X2ttcyA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOworCXN0
cnVjdCBkcHVfa21zICpkcHVfa21zID0gZGV2X2dldF9kcnZkYXRhKGRldik7CiAJc3RydWN0IGRz
c19tb2R1bGVfcG93ZXIgKm1wID0gJmRwdV9rbXMtPm1wOwogCiAJbXNtX2Rzc19wdXRfY2xrKG1w
LT5jbGtfY29uZmlnLCBtcC0+bnVtX2Nsayk7Ci0JZGV2bV9rZnJlZSgmcGRldi0+ZGV2LCBtcC0+
Y2xrX2NvbmZpZyk7CisJZGV2bV9rZnJlZShkZXYsIG1wLT5jbGtfY29uZmlnKTsKIAltcC0+bnVt
X2NsayA9IDA7CiAKIAlpZiAoZHB1X2ttcy0+cnBtX2VuYWJsZWQpCi0JCXBtX3J1bnRpbWVfZGlz
YWJsZSgmcGRldi0+ZGV2KTsKKwkJcG1fcnVudGltZV9kaXNhYmxlKGRldik7CiB9CiAKIHN0YXRp
YyBjb25zdCBzdHJ1Y3QgY29tcG9uZW50X29wcyBkcHVfb3BzID0gewpAQCAtMTA1Niw4ICsxMDU1
LDcgQEAgc3RhdGljIGludCBkcHVfZGV2X3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpw
ZGV2KQogc3RhdGljIGludCBfX21heWJlX3VudXNlZCBkcHVfcnVudGltZV9zdXNwZW5kKHN0cnVj
dCBkZXZpY2UgKmRldikKIHsKIAlpbnQgcmMgPSAtMTsKLQlzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNl
ICpwZGV2ID0gdG9fcGxhdGZvcm1fZGV2aWNlKGRldik7Ci0Jc3RydWN0IGRwdV9rbXMgKmRwdV9r
bXMgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKKwlzdHJ1Y3QgZHB1X2ttcyAqZHB1X2tt
cyA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwogCXN0cnVjdCBkcm1fZGV2aWNlICpkZGV2OwogCXN0
cnVjdCBkc3NfbW9kdWxlX3Bvd2VyICptcCA9ICZkcHVfa21zLT5tcDsKIApAQCAtMTA3Nyw4ICsx
MDc1LDcgQEAgc3RhdGljIGludCBfX21heWJlX3VudXNlZCBkcHVfcnVudGltZV9zdXNwZW5kKHN0
cnVjdCBkZXZpY2UgKmRldikKIHN0YXRpYyBpbnQgX19tYXliZV91bnVzZWQgZHB1X3J1bnRpbWVf
cmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikKIHsKIAlpbnQgcmMgPSAtMTsKLQlzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlICpwZGV2ID0gdG9fcGxhdGZvcm1fZGV2aWNlKGRldik7Ci0Jc3RydWN0IGRw
dV9rbXMgKmRwdV9rbXMgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKKwlzdHJ1Y3QgZHB1
X2ttcyAqZHB1X2ttcyA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwogCXN0cnVjdCBkcm1fZW5jb2Rl
ciAqZW5jb2RlcjsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGRldjsKIAlzdHJ1Y3QgZHNzX21vZHVs
ZV9wb3dlciAqbXAgPSAmZHB1X2ttcy0+bXA7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
bXNtL2Rpc3AvbWRwNS9tZHA1X2ttcy5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL21kcDUv
bWRwNV9rbXMuYwppbmRleCA5MDEwMDllMWYyMTkuLjI1ZDFlYmIzMmU3MyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL21kcDUvbWRwNV9rbXMuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vbXNtL2Rpc3AvbWRwNS9tZHA1X2ttcy5jCkBAIC0xMDUyLDggKzEwNTIsNyBAQCBzdGF0
aWMgaW50IG1kcDVfZGV2X3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCiBz
dGF0aWMgX19tYXliZV91bnVzZWQgaW50IG1kcDVfcnVudGltZV9zdXNwZW5kKHN0cnVjdCBkZXZp
Y2UgKmRldikKIHsKLQlzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2ID0gdG9fcGxhdGZvcm1f
ZGV2aWNlKGRldik7Ci0Jc3RydWN0IG1kcDVfa21zICptZHA1X2ttcyA9IHBsYXRmb3JtX2dldF9k
cnZkYXRhKHBkZXYpOworCXN0cnVjdCBtZHA1X2ttcyAqbWRwNV9rbXMgPSBkZXZfZ2V0X2RydmRh
dGEoZGV2KTsKIAogCURCRygiIik7CiAKQEAgLTEwNjIsOCArMTA2MSw3IEBAIHN0YXRpYyBfX21h
eWJlX3VudXNlZCBpbnQgbWRwNV9ydW50aW1lX3N1c3BlbmQoc3RydWN0IGRldmljZSAqZGV2KQog
CiBzdGF0aWMgX19tYXliZV91bnVzZWQgaW50IG1kcDVfcnVudGltZV9yZXN1bWUoc3RydWN0IGRl
dmljZSAqZGV2KQogewotCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYgPSB0b19wbGF0Zm9y
bV9kZXZpY2UoZGV2KTsKLQlzdHJ1Y3QgbWRwNV9rbXMgKm1kcDVfa21zID0gcGxhdGZvcm1fZ2V0
X2RydmRhdGEocGRldik7CisJc3RydWN0IG1kcDVfa21zICptZHA1X2ttcyA9IGRldl9nZXRfZHJ2
ZGF0YShkZXYpOwogCiAJREJHKCIiKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21z
bS9kc2kvZHNpX2hvc3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZHNpL2RzaV9ob3N0LmMKaW5k
ZXggZGJmNDkwMTc2YzJjLi44ODJmMTM3MjU4MTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9tc20vZHNpL2RzaV9ob3N0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kc2kvZHNpX2hv
c3QuYwpAQCAtNDc3LDggKzQ3Nyw3IEBAIHN0YXRpYyB2b2lkIGRzaV9idXNfY2xrX2Rpc2FibGUo
c3RydWN0IG1zbV9kc2lfaG9zdCAqbXNtX2hvc3QpCiAKIGludCBtc21fZHNpX3J1bnRpbWVfc3Vz
cGVuZChzdHJ1Y3QgZGV2aWNlICpkZXYpCiB7Ci0Jc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRl
diA9IHRvX3BsYXRmb3JtX2RldmljZShkZXYpOwotCXN0cnVjdCBtc21fZHNpICptc21fZHNpID0g
cGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7CisJc3RydWN0IG1zbV9kc2kgKm1zbV9kc2kgPSBk
ZXZfZ2V0X2RydmRhdGEoZGV2KTsKIAlzdHJ1Y3QgbWlwaV9kc2lfaG9zdCAqaG9zdCA9IG1zbV9k
c2ktPmhvc3Q7CiAJc3RydWN0IG1zbV9kc2lfaG9zdCAqbXNtX2hvc3QgPSB0b19tc21fZHNpX2hv
c3QoaG9zdCk7CiAKQEAgLTQ5Miw4ICs0OTEsNyBAQCBpbnQgbXNtX2RzaV9ydW50aW1lX3N1c3Bl
bmQoc3RydWN0IGRldmljZSAqZGV2KQogCiBpbnQgbXNtX2RzaV9ydW50aW1lX3Jlc3VtZShzdHJ1
Y3QgZGV2aWNlICpkZXYpCiB7Ci0Jc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiA9IHRvX3Bs
YXRmb3JtX2RldmljZShkZXYpOwotCXN0cnVjdCBtc21fZHNpICptc21fZHNpID0gcGxhdGZvcm1f
Z2V0X2RydmRhdGEocGRldik7CisJc3RydWN0IG1zbV9kc2kgKm1zbV9kc2kgPSBkZXZfZ2V0X2Ry
dmRhdGEoZGV2KTsKIAlzdHJ1Y3QgbWlwaV9kc2lfaG9zdCAqaG9zdCA9IG1zbV9kc2ktPmhvc3Q7
CiAJc3RydWN0IG1zbV9kc2lfaG9zdCAqbXNtX2hvc3QgPSB0b19tc21fZHNpX2hvc3QoaG9zdCk7
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2Rydi5jIGIvZHJpdmVycy9n
cHUvZHJtL21zbS9tc21fZHJ2LmMKaW5kZXggZjM4ZDczNjdiZDNiLi4wZDllNDY1NjE2MDkgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9tc20vbXNtX2Rydi5jCkBAIC0yNDEsOCArMjQxLDcgQEAgc3RhdGljIGludCB2Ymxhbmtf
Y3RybF9xdWV1ZV93b3JrKHN0cnVjdCBtc21fZHJtX3ByaXZhdGUgKnByaXYsCiAKIHN0YXRpYyBp
bnQgbXNtX2RybV91bmluaXQoc3RydWN0IGRldmljZSAqZGV2KQogewotCXN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYgPSB0b19wbGF0Zm9ybV9kZXZpY2UoZGV2KTsKLQlzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGRldiA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOworCXN0cnVjdCBkcm1fZGV2
aWNlICpkZGV2ID0gZGV2X2dldF9kcnZkYXRhKGRldik7CiAJc3RydWN0IG1zbV9kcm1fcHJpdmF0
ZSAqcHJpdiA9IGRkZXYtPmRldl9wcml2YXRlOwogCXN0cnVjdCBtc21fa21zICprbXMgPSBwcml2
LT5rbXM7CiAJc3RydWN0IG1zbV9tZHNzICptZHNzID0gcHJpdi0+bWRzczsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL3BhbmVsLWRzaS1jbS5jIGIvZHJpdmVy
cy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvcGFuZWwtZHNpLWNtLmMKaW5kZXggOGVkZWY4ZWYy
M2IwLi41MzI0MGRhMTM5YjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rp
c3BsYXlzL3BhbmVsLWRzaS1jbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3Bs
YXlzL3BhbmVsLWRzaS1jbS5jCkBAIC00MDcsOCArNDA3LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVj
dCBiYWNrbGlnaHRfb3BzIGRzaWNtX2JsX29wcyA9IHsKIHN0YXRpYyBzc2l6ZV90IGRzaWNtX251
bV9lcnJvcnNfc2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYsCiAJCXN0cnVjdCBkZXZpY2VfYXR0cmli
dXRlICphdHRyLCBjaGFyICpidWYpCiB7Ci0Jc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiA9
IHRvX3BsYXRmb3JtX2RldmljZShkZXYpOwotCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEg
PSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKKwlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRk
YXRhID0gZGV2X2dldF9kcnZkYXRhKGRldik7CiAJc3RydWN0IG9tYXBfZHNzX2RldmljZSAqc3Jj
ID0gZGRhdGEtPnNyYzsKIAl1OCBlcnJvcnMgPSAwOwogCWludCByOwpAQCAtNDM5LDggKzQzOCw3
IEBAIHN0YXRpYyBzc2l6ZV90IGRzaWNtX251bV9lcnJvcnNfc2hvdyhzdHJ1Y3QgZGV2aWNlICpk
ZXYsCiBzdGF0aWMgc3NpemVfdCBkc2ljbV9od19yZXZpc2lvbl9zaG93KHN0cnVjdCBkZXZpY2Ug
KmRldiwKIAkJc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIgKmJ1ZikKIHsKLQlz
dHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2ID0gdG9fcGxhdGZvcm1fZGV2aWNlKGRldik7Ci0J
c3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYp
OworCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsK
IAlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpzcmMgPSBkZGF0YS0+c3JjOwogCXU4IGlkMSwgaWQy
LCBpZDM7CiAJaW50IHI7CkBAIC01MDYsOCArNTA0LDcgQEAgc3RhdGljIHNzaXplX3QgZHNpY21f
c2hvd191bHBzKHN0cnVjdCBkZXZpY2UgKmRldiwKIAkJc3RydWN0IGRldmljZV9hdHRyaWJ1dGUg
KmF0dHIsCiAJCWNoYXIgKmJ1ZikKIHsKLQlzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2ID0g
dG9fcGxhdGZvcm1fZGV2aWNlKGRldik7Ci0Jc3RydWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSA9
IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOworCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRh
dGEgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKIAl1bnNpZ25lZCBpbnQgdDsKIAogCW11dGV4X2xv
Y2soJmRkYXRhLT5sb2NrKTsKQEAgLTUyMSw4ICs1MTgsNyBAQCBzdGF0aWMgc3NpemVfdCBkc2lj
bV9zdG9yZV91bHBzX3RpbWVvdXQoc3RydWN0IGRldmljZSAqZGV2LAogCQlzdHJ1Y3QgZGV2aWNl
X2F0dHJpYnV0ZSAqYXR0ciwKIAkJY29uc3QgY2hhciAqYnVmLCBzaXplX3QgY291bnQpCiB7Ci0J
c3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiA9IHRvX3BsYXRmb3JtX2RldmljZShkZXYpOwot
CXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2
KTsKKwlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRhID0gZGV2X2dldF9kcnZkYXRhKGRldik7
CiAJc3RydWN0IG9tYXBfZHNzX2RldmljZSAqc3JjID0gZGRhdGEtPnNyYzsKIAl1bnNpZ25lZCBs
b25nIHQ7CiAJaW50IHI7CkBAIC01NTMsOCArNTQ5LDcgQEAgc3RhdGljIHNzaXplX3QgZHNpY21f
c2hvd191bHBzX3RpbWVvdXQoc3RydWN0IGRldmljZSAqZGV2LAogCQlzdHJ1Y3QgZGV2aWNlX2F0
dHJpYnV0ZSAqYXR0ciwKIAkJY2hhciAqYnVmKQogewotCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2Ug
KnBkZXYgPSB0b19wbGF0Zm9ybV9kZXZpY2UoZGV2KTsKLQlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEg
KmRkYXRhID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7CisJc3RydWN0IHBhbmVsX2Rydl9k
YXRhICpkZGF0YSA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwogCXVuc2lnbmVkIGludCB0OwogCiAJ
bXV0ZXhfbG9jaygmZGRhdGEtPmxvY2spOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Bh
bmZyb3N0L3BhbmZyb3N0X2RldmljZS5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZy
b3N0X2RldmljZS5jCmluZGV4IDNiMmJjZWQxYjAxNS4uZWQxODc2NDhlNmQ4IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5jCkBAIC0yMjcsOCArMjI3LDcgQEAg
Y29uc3QgY2hhciAqcGFuZnJvc3RfZXhjZXB0aW9uX25hbWUoc3RydWN0IHBhbmZyb3N0X2Rldmlj
ZSAqcGZkZXYsIHUzMiBleGNlcHRpb24KICNpZmRlZiBDT05GSUdfUE0KIGludCBwYW5mcm9zdF9k
ZXZpY2VfcmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikKIHsKLQlzdHJ1Y3QgcGxhdGZvcm1fZGV2
aWNlICpwZGV2ID0gdG9fcGxhdGZvcm1fZGV2aWNlKGRldik7Ci0Jc3RydWN0IHBhbmZyb3N0X2Rl
dmljZSAqcGZkZXYgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKKwlzdHJ1Y3QgcGFuZnJv
c3RfZGV2aWNlICpwZmRldiA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwogCiAJcGFuZnJvc3RfZ3B1
X3NvZnRfcmVzZXQocGZkZXYpOwogCkBAIC0yNDMsOCArMjQyLDcgQEAgaW50IHBhbmZyb3N0X2Rl
dmljZV9yZXN1bWUoc3RydWN0IGRldmljZSAqZGV2KQogCiBpbnQgcGFuZnJvc3RfZGV2aWNlX3N1
c3BlbmQoc3RydWN0IGRldmljZSAqZGV2KQogewotCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBk
ZXYgPSB0b19wbGF0Zm9ybV9kZXZpY2UoZGV2KTsKLQlzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpw
ZmRldiA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOworCXN0cnVjdCBwYW5mcm9zdF9kZXZp
Y2UgKnBmZGV2ID0gZGV2X2dldF9kcnZkYXRhKGRldik7CiAKIAlpZiAoIXBhbmZyb3N0X2pvYl9p
c19pZGxlKHBmZGV2KSkKIAkJcmV0dXJuIC1FQlVTWTsKLS0gCjIuMTEuMAoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
