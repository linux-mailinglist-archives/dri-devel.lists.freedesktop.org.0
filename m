Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9DAF310C1EA
	for <lists+dri-devel@lfdr.de>; Thu, 28 Nov 2019 02:53:05 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 002236E5DC;
	Thu, 28 Nov 2019 01:53:02 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6068E6E5DC
 for <dri-devel@lists.freedesktop.org>; Thu, 28 Nov 2019 01:53:01 +0000 (UTC)
Received: from pendragon.ideasonboard.com (unknown [104.132.253.101])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id E38D54FF;
 Thu, 28 Nov 2019 02:52:58 +0100 (CET)
Date: Thu, 28 Nov 2019 03:52:49 +0200
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Jacopo Mondi <jacopo+renesas@jmondi.org>
Subject: Re: [PATCH v7 3/7] drm: rcar-du: Add support for CMM
Message-ID: <20191128015249.GB13942@pendragon.ideasonboard.com>
References: <20191113100556.15616-1-jacopo+renesas@jmondi.org>
 <20191113100556.15616-4-jacopo+renesas@jmondi.org>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191113100556.15616-4-jacopo+renesas@jmondi.org>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1574905979;
 bh=B7iiRFAP7yNrqFy1QHlxqmaxXM0DvDVg+ZOBcqTu9xw=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=eV3DZqc0C1jxN0Ywzyc8mYyAoKFVDMok/OVh0x91NBy10TXjB7+DmqQ+N5tXnaAu1
 +Rd4oFSLGGV+m46Ob5nJFuWYs2qgkqq5G08kDdE6QpljybXYlOjrJa/8L+4iweQYAk
 AGZ9zOyVI9YbCggHbmPZoxeu56yyKqeYIcemCDAk=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: horms@verge.net.au, airlied@linux.ie, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, linux-renesas-soc@vger.kernel.org,
 kieran.bingham+renesas@ideasonboard.com, geert@linux-m68k.org,
 uli+renesas@fpond.eu
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgSmFjb3BvLAoKVGhhbmsgeW91IGZvciB0aGUgcGF0Y2guCgpPbiBXZWQsIE5vdiAxMywgMjAx
OSBhdCAxMTowNTo1MkFNICswMTAwLCBKYWNvcG8gTW9uZGkgd3JvdGU6Cj4gQWRkIGEgZHJpdmVy
IGZvciB0aGUgUi1DYXIgRGlzcGxheSBVbml0IENvbG9yIENvcnJlY3Rpb24gTW9kdWxlLgo+IAo+
IEluIG1vc3Qgb2YgR2VuMyBTb0NzLCBlYWNoIERVIG91dHB1dCBjaGFubmVsIGlzIHByb3ZpZGVk
IHdpdGggYSBDTU0gdW5pdAo+IHRvIHBlcmZvcm0gaW1hZ2UgZW5oYW5jZW1lbnQgYW5kIGNvbG9y
IGNvcnJlY3Rpb24uCj4gCj4gQWRkIHN1cHBvcnQgZm9yIENNTSB0aHJvdWdoIGEgZHJpdmVyIHRo
YXQgc3VwcG9ydHMgY29uZmlndXJhdGlvbiBvZgo+IHRoZSAxLWRpbWVuc2lvbmFsIExVVCB0YWJs
ZS4gTW9yZSBhZHZhbmNlZCBDTU0gZmVhdHVyZXMgd2lsbCBiZQo+IGltcGxlbWVudGVkIG9uIHRv
cCBvZiB0aGlzIGluaXRpYWwgb25lLgo+IAo+IFJldmlld2VkLWJ5OiBMYXVyZW50IFBpbmNoYXJ0
IDxsYXVyZW50LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+Cj4gUmV2aWV3ZWQtYnk6IEtpZXJh
biBCaW5naGFtIDxraWVyYW4uYmluZ2hhbStyZW5lc2FzQGlkZWFzb25ib2FyZC5jb20+Cj4gU2ln
bmVkLW9mZi1ieTogSmFjb3BvIE1vbmRpIDxqYWNvcG8rcmVuZXNhc0BqbW9uZGkub3JnPgo+IAo+
IC0tLQo+IHY2IC0+IHY3Cj4gLSBFeHBhbmQgcmNhcl9jbW1fc2V0dXAoKSBmdW5jdGlvbiBkb2N1
bWVudGF0aW9uIHRvIGRldGFpbCBpdHMgcmVsYXRpb25zaGlwCj4gICB3aXRoIHJjYXJfY21tX2Vu
YWJsZSgpIGFuZCB0aGVpciBjYWxsIG9yZGVyIHByZWNlZGVuY2UuCj4gCj4gLSBLY29uZmlnIHVw
ZGF0ZTogTWFrZSBEUk1fUkNBUl9DTU0gYSB0cmlzdGF0ZSBvcHRpb24gYW5kICdpbXBseScgaXQg
ZnJvbSB0aGUKPiAgIFJDQVJfRFUgb25lLiBUaGlzIGd1YXJhbnRlZXMgdGhhdCBpZiBEVSBpcyBi
dWlsdCBhcyBhIG1vZHVsZSBDTU0gY2FuIG9ubHkgYmUKPiAgIGJ1aWx0IGFzIGEgbW9kdWxlIGFz
IHdlbGwuIEF0IHRoZSBzYW1lIHRpbWUsIGlmIERVIGlzIGJ1aWx0LWluLCBDTU0gY2FuCj4gICBi
ZSBidWlsdC1pbiBvbmx5Lgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9LY29uZmln
ICAgIHwgICA4ICsrCj4gIGRyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L01ha2VmaWxlICAgfCAgIDEg
Kwo+ICBkcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2NtbS5jIHwgMjE3ICsrKysrKysrKysr
KysrKysrKysrKysrKysrKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfY21tLmgg
fCAgNTggKysrKysrKysKPiAgNCBmaWxlcyBjaGFuZ2VkLCAyODQgaW5zZXJ0aW9ucygrKQo+ICBj
cmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9jbW0uYwo+ICBj
cmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9jbW0uaAo+IAo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9LY29uZmlnIGIvZHJpdmVycy9n
cHUvZHJtL3JjYXItZHUvS2NvbmZpZwo+IGluZGV4IDE1Mjk4NDllMjE3ZS4uNmVkN2E0ZjNjNDRl
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L0tjb25maWcKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vcmNhci1kdS9LY29uZmlnCj4gQEAgLTUsNiArNSw3IEBAIGNvbmZpZyBE
Uk1fUkNBUl9EVQo+ICAJZGVwZW5kcyBvbiBBUk0gfHwgQVJNNjQKPiAgCWRlcGVuZHMgb24gQVJD
SF9SRU5FU0FTIHx8IENPTVBJTEVfVEVTVAo+ICAJaW1wbHkgRFJNX1JDQVJfTFZEUwo+ICsJaW1w
bHkgRFJNX1JDQVJfQ01NCgpJJ2xsIHN3YXAgdGhvc2UgdHdvIGxpbmVzLgoKPiAgCXNlbGVjdCBE
Uk1fS01TX0hFTFBFUgo+ICAJc2VsZWN0IERSTV9LTVNfQ01BX0hFTFBFUgo+ICAJc2VsZWN0IERS
TV9HRU1fQ01BX0hFTFBFUgo+IEBAIC0xMyw2ICsxNCwxMyBAQCBjb25maWcgRFJNX1JDQVJfRFUK
PiAgCSAgQ2hvb3NlIHRoaXMgb3B0aW9uIGlmIHlvdSBoYXZlIGFuIFItQ2FyIGNoaXBzZXQuCj4g
IAkgIElmIE0gaXMgc2VsZWN0ZWQgdGhlIG1vZHVsZSB3aWxsIGJlIGNhbGxlZCByY2FyLWR1LWRy
bS4KPiAKPiArY29uZmlnIERSTV9SQ0FSX0NNTQo+ICsJdHJpc3RhdGUgIlItQ2FyIERVIENvbG9y
IE1hbmFnZW1lbnQgTW9kdWxlIChDTU0pIFN1cHBvcnQiCj4gKwlkZXBlbmRzIG9uIERSTSAmJiBP
Rgo+ICsJZGVwZW5kcyBvbiBEUk1fUkNBUl9EVQoKSSBqdXN0IHdhbnRlZCB0byBwb2ludCBvdXQg
dGhhdCB0aGlzIHByZXZlbnRzIERSTV9SQ0FSX0RVPW0gYW5kCkRSTV9SQ0FSX0NNTT15LCBidXQg
SSBkb24ndCB0aGluayB0aGF0IGlzIGEgdXNlZnVsIHVzZSBjYXNlLgoKPiArCWhlbHAKPiArCSAg
RW5hYmxlIHN1cHBvcnQgZm9yIFItQ2FyIENvbG9yIE1hbmFnZW1lbnQgTW9kdWxlIChDTU0pLgo+
ICsKPiAgY29uZmlnIERSTV9SQ0FSX0RXX0hETUkKPiAgCXRyaXN0YXRlICJSLUNhciBEVSBHZW4z
IEhETUkgRW5jb2RlciBTdXBwb3J0Igo+ICAJZGVwZW5kcyBvbiBEUk0gJiYgT0YKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0v
cmNhci1kdS9NYWtlZmlsZQo+IGluZGV4IDZjMmVkOWM0NjQ2Ny4uNGQxMTg3Y2NjM2U1IDEwMDY0
NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L01ha2VmaWxlCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL3JjYXItZHUvTWFrZWZpbGUKPiBAQCAtMTUsNiArMTUsNyBAQCByY2FyLWR1LWRy
bS0kKENPTkZJR19EUk1fUkNBUl9MVkRTKQkrPSByY2FyX2R1X29mLm8gXAo+ICByY2FyLWR1LWRy
bS0kKENPTkZJR19EUk1fUkNBUl9WU1ApCSs9IHJjYXJfZHVfdnNwLm8KPiAgcmNhci1kdS1kcm0t
JChDT05GSUdfRFJNX1JDQVJfV1JJVEVCQUNLKSArPSByY2FyX2R1X3dyaXRlYmFjay5vCj4gCj4g
K29iai0kKENPTkZJR19EUk1fUkNBUl9DTU0pCQkrPSByY2FyX2NtbS5vCj4gIG9iai0kKENPTkZJ
R19EUk1fUkNBUl9EVSkJCSs9IHJjYXItZHUtZHJtLm8KPiAgb2JqLSQoQ09ORklHX0RSTV9SQ0FS
X0RXX0hETUkpCQkrPSByY2FyX2R3X2hkbWkubwo+ICBvYmotJChDT05GSUdfRFJNX1JDQVJfTFZE
UykJCSs9IHJjYXJfbHZkcy5vCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1
L3JjYXJfY21tLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2NtbS5jCj4gbmV3IGZp
bGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAuLmM1NzgwOTViMDlhNQo+IC0tLSAv
ZGV2L251bGwKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2NtbS5jCj4gQEAg
LTAsMCArMSwyMTcgQEAKPiArLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjArCj4g
Ky8qCj4gKyAqIHJjYXJfY21tLmMgLS0gUi1DYXIgRGlzcGxheSBVbml0IENvbG9yIE1hbmFnZW1l
bnQgTW9kdWxlCj4gKyAqCj4gKyAqIENvcHlyaWdodCAoQykgMjAxOSBKYWNvcG8gTW9uZGkgPGph
Y29wbytyZW5lc2FzQGptb25kaS5vcmc+Cj4gKyAqLwo+ICsKPiArI2luY2x1ZGUgPGxpbnV4L2lv
Lmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KPiArI2luY2x1ZGUgPGxpbnV4L29mLmg+
Cj4gKyNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kZXZpY2UuaD4KPiArI2luY2x1ZGUgPGxpbnV4
L3BtX3J1bnRpbWUuaD4KPiArCj4gKyNpbmNsdWRlIDxkcm0vZHJtX2NvbG9yX21nbXQuaD4KPiAr
Cj4gKyNpbmNsdWRlICJyY2FyX2NtbS5oIgo+ICsKPiArI2RlZmluZSBDTTJfTFVUX0NUUkwJCTB4
MDAwMAo+ICsjZGVmaW5lIENNMl9MVVRfQ1RSTF9MVVRfRU4JQklUKDApCj4gKyNkZWZpbmUgQ00y
X0xVVF9UQkxfQkFTRQkweDA2MDAKPiArI2RlZmluZSBDTTJfTFVUX1RCTChfX2kpCShDTTJfTFVU
X1RCTF9CQVNFICsgKF9faSkgKiA0KQo+ICsKPiArc3RydWN0IHJjYXJfY21tIHsKPiArCXZvaWQg
X19pb21lbSAqYmFzZTsKPiArCj4gKwkvKgo+ICsJICogQGx1dDoJCTFELUxVVCBzdGF0ZQo+ICsJ
ICogQGx1dC5lbmFibGVkOgkxRC1MVVQgZW5hYmxlZCBmbGFnCj4gKwkgKi8KPiArCXN0cnVjdCB7
Cj4gKwkJYm9vbCBlbmFibGVkOwo+ICsJfSBsdXQ7Cj4gK307Cj4gKwo+ICtzdGF0aWMgaW5saW5l
IGludCByY2FyX2NtbV9yZWFkKHN0cnVjdCByY2FyX2NtbSAqcmNtbSwgdTMyIHJlZykKPiArewo+
ICsJcmV0dXJuIGlvcmVhZDMyKHJjbW0tPmJhc2UgKyByZWcpOwo+ICt9Cj4gKwo+ICtzdGF0aWMg
aW5saW5lIHZvaWQgcmNhcl9jbW1fd3JpdGUoc3RydWN0IHJjYXJfY21tICpyY21tLCB1MzIgcmVn
LCB1MzIgZGF0YSkKPiArewo+ICsJaW93cml0ZTMyKGRhdGEsIHJjbW0tPmJhc2UgKyByZWcpOwo+
ICt9Cj4gKwo+ICsvKgo+ICsgKiByY2FyX2NtbV9sdXRfd3JpdGUoKSAtIFNjYWxlIHRoZSBEUk0g
TFVUIHRhYmxlIGVudHJpZXMgdG8gaGFyZHdhcmUgcHJlY2lzaW9uCj4gKyAqCQkJICBhbmQgd3Jp
dGUgdG8gdGhlIENNTSByZWdpc3RlcnMKPiArICogQHJjbW06IFBvaW50ZXIgdG8gdGhlIENNTSBk
ZXZpY2UKPiArICogQGRybV9sdXQ6IFBvaW50ZXIgdG8gdGhlIERSTSBMVVQgdGFibGUKPiArICov
Cj4gK3N0YXRpYyB2b2lkIHJjYXJfY21tX2x1dF93cml0ZShzdHJ1Y3QgcmNhcl9jbW0gKnJjbW0s
Cj4gKwkJCSAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2NvbG9yX2x1dCAqZHJtX2x1dCkKPiArewo+
ICsJdW5zaWduZWQgaW50IGk7Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IENNMl9MVVRfU0laRTsg
KytpKSB7Cj4gKwkJdTMyIGVudHJ5ID0gZHJtX2NvbG9yX2x1dF9leHRyYWN0KGRybV9sdXRbaV0u
cmVkLCA4KSA8PCAxNgo+ICsJCQkgIHwgZHJtX2NvbG9yX2x1dF9leHRyYWN0KGRybV9sdXRbaV0u
Z3JlZW4sIDgpIDw8IDgKPiArCQkJICB8IGRybV9jb2xvcl9sdXRfZXh0cmFjdChkcm1fbHV0W2ld
LmJsdWUsIDgpOwo+ICsKPiArCQlyY2FyX2NtbV93cml0ZShyY21tLCBDTTJfTFVUX1RCTChpKSwg
ZW50cnkpOwo+ICsJfQo+ICt9Cj4gKwo+ICsvKgo+ICsgKiByY2FyX2NtbV9zZXR1cCgpIC0gQ29u
ZmlndXJlIHRoZSBDTU0gdW5pdAo+ICsgKiBAcGRldjogVGhlIHBsYXRmb3JtIGRldmljZSBhc3Nv
Y2lhdGVkIHdpdGggdGhlIENNTSBpbnN0YW5jZQo+ICsgKiBAY29uZmlnOiBUaGUgQ01NIHVuaXQg
Y29uZmlndXJhdGlvbgo+ICsgKgo+ICsgKiBDb25maWd1cmUgdGhlIENNTSB1bml0IHdpdGggdGhl
IGdpdmVuIGNvbmZpZ3VyYXRpb24uIEN1cnJlbnRseSBlbmFibGluZywKPiArICogZGlzYWJsaW5n
IGFuZCBwcm9ncmFtbWluZyBvZiB0aGUgMS1EIExVVCB1bml0IGlzIHN1cHBvcnRlZC4KPiArICoK
PiArICogQXMgcmNhcl9jbW1fc2V0dXAoKSBhY2Nlc3NlcyB0aGUgQ01NIHJlZ2lzdGVycyB0aGUg
dW5pdCBzaG91bGQgYmUgcG93ZXJlZAo+ICsgKiBhbmQgaXRzIGZ1bmN0aW9uYWwgY2xvY2sgZW5h
YmxlZC4gVG8gZ3VhcmFudGVlIHRoaXMsIGJlZm9yZSBhbnkgY2FsbCB0bwo+ICsgKiB0aGlzIGZ1
bmN0aW9uIGlzIG1hZGUsIHRoZSBDTU0gdW5pdCBoYXMgdG8gYmUgZW5hYmxlZCBieSBjYWxsaW5n
Cj4gKyAqIHJjYXJfY21tX2VuYWJsZSgpIGZpcnN0Lgo+ICsgKgo+ICsgKiBUT0RPOiBBZGQgc3Vw
cG9ydCBmb3IgTFVUIGRvdWJsZSBidWZmZXIgb3BlcmF0aW9ucyB0byBhdm9pZCB1cGRhdGluZyB0
aGUKPiArICogTFVUIHRhYmxlIGVudHJpZXMgd2hpbGUgYSBmcmFtZSBpcyBiZWluZyBkaXNwbGF5
ZWQuCj4gKyAqLwo+ICtpbnQgcmNhcl9jbW1fc2V0dXAoc3RydWN0IHBsYXRmb3JtX2RldmljZSAq
cGRldiwKPiArCQkgICBjb25zdCBzdHJ1Y3QgcmNhcl9jbW1fY29uZmlnICpjb25maWcpCj4gK3sK
PiArCXN0cnVjdCByY2FyX2NtbSAqcmNtbSA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwo+
ICsKPiArCS8qIERpc2FibGUgTFVUIGlmIG5vIHRhYmxlIGlzIHByb3ZpZGVkLiAqLwo+ICsJaWYg
KCFjb25maWctPmx1dC50YWJsZSkgewo+ICsJCWlmIChyY21tLT5sdXQuZW5hYmxlZCkgewo+ICsJ
CQlyY2FyX2NtbV93cml0ZShyY21tLCBDTTJfTFVUX0NUUkwsIDApOwo+ICsJCQlyY21tLT5sdXQu
ZW5hYmxlZCA9IGZhbHNlOwo+ICsJCX0KPiArCj4gKwkJcmV0dXJuIDA7Cj4gKwl9Cj4gKwo+ICsJ
LyogRW5hYmxlIExVVCBhbmQgcHJvZ3JhbSB0aGUgbmV3IGdhbW1hIHRhYmxlIHZhbHVlcy4gKi8K
PiArCWlmICghcmNtbS0+bHV0LmVuYWJsZWQpIHsKPiArCQlyY2FyX2NtbV93cml0ZShyY21tLCBD
TTJfTFVUX0NUUkwsIENNMl9MVVRfQ1RSTF9MVVRfRU4pOwo+ICsJCXJjbW0tPmx1dC5lbmFibGVk
ID0gdHJ1ZTsKPiArCX0KPiArCj4gKwlyY2FyX2NtbV9sdXRfd3JpdGUocmNtbSwgY29uZmlnLT5s
dXQudGFibGUpOwo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gK0VYUE9SVF9TWU1CT0xfR1BMKHJj
YXJfY21tX3NldHVwKTsKPiArCj4gKy8qCj4gKyAqIHJjYXJfY21tX2VuYWJsZSgpIC0gRW5hYmxl
IHRoZSBDTU0gdW5pdAo+ICsgKiBAcGRldjogVGhlIHBsYXRmb3JtIGRldmljZSBhc3NvY2lhdGVk
IHdpdGggdGhlIENNTSBpbnN0YW5jZQo+ICsgKgo+ICsgKiBXaGVuIHRoZSBvdXRwdXQgb2YgdGhl
IGNvcnJlc3BvbmRpbmcgRFUgY2hhbm5lbCBpcyByb3V0ZWQgdG8gdGhlIENNTSB1bml0LAo+ICsg
KiB0aGUgdW5pdCBzaGFsbCBiZSBlbmFibGVkIGJlZm9yZSB0aGUgRFUgY2hhbm5lbCBpcyBzdGFy
dGVkLCBhbmQgcmVtYWluCj4gKyAqIGVuYWJsZWQgdW50aWwgdGhlIGNoYW5uZWwgaXMgc3RvcHBl
ZC4gVGhlIENNTSB1bml0IHNoYWxsIGJlIGRpc2FibGVkIHdpdGgKPiArICogcmNhcl9jbW1fZGlz
YWJsZSgpLgo+ICsgKgo+ICsgKiBDYWxscyB0byByY2FyX2NtbV9lbmFibGUoKSBhbmQgcmNhcl9j
bW1fZGlzYWJsZSgpIGFyZSBub3QgcmVmZXJlbmNlLWNvdW50ZWQuCj4gKyAqIEl0IGlzIGFuIGVy
cm9yIHRvIGF0dGVtcHQgdG8gZW5hYmxlIGFuIGFscmVhZHkgZW5hYmxlZCBDTU0gdW5pdCwgb3Ig
dG8KPiArICogYXR0ZW1wdCB0byBkaXNhYmxlIGEgZGlzYWJsZWQgdW5pdC4KPiArICovCj4gK2lu
dCByY2FyX2NtbV9lbmFibGUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKPiArewo+ICsJ
aW50IHJldDsKPiArCj4gKwlyZXQgPSBwbV9ydW50aW1lX2dldF9zeW5jKCZwZGV2LT5kZXYpOwo+
ICsJaWYgKHJldCA8IDApCj4gKwkJcmV0dXJuIHJldDsKPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+
ICtFWFBPUlRfU1lNQk9MX0dQTChyY2FyX2NtbV9lbmFibGUpOwo+ICsKPiArLyoKPiArICogcmNh
cl9jbW1fZGlzYWJsZSgpIC0gRGlzYWJsZSB0aGUgQ01NIHVuaXQKPiArICogQHBkZXY6IFRoZSBw
bGF0Zm9ybSBkZXZpY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBDTU0gaW5zdGFuY2UKPiArICoKPiAr
ICogU2VlIHJjYXJfY21tX2VuYWJsZSgpIGZvciB1c2FnZSBpbmZvcm1hdGlvbi4KPiArICoKPiAr
ICogRGlzYWJsaW5nIHRoZSBDTU0gdW5pdCBkaXNhYmxlIGFsbCB0aGUgaW50ZXJuYWwgcHJvY2Vz
c2luZyBibG9ja3MuIFRoZSBDTU0KPiArICogc3RhdGUgc2hhbGwgdGh1cyBiZSByZXN0b3JlZCB3
aXRoIHJjYXJfY21tX3NldHVwKCkgd2hlbiByZS1lbmFibGluZyB0aGUgQ01NCj4gKyAqIHVuaXQg
YWZ0ZXIgdGhlIG5leHQgcmNhcl9jbW1fZW5hYmxlKCkgY2FsbC4KPiArICovCj4gK3ZvaWQgcmNh
cl9jbW1fZGlzYWJsZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQo+ICt7Cj4gKwlzdHJ1
Y3QgcmNhcl9jbW0gKnJjbW0gPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKPiArCj4gKwly
Y2FyX2NtbV93cml0ZShyY21tLCBDTTJfTFVUX0NUUkwsIDApOwo+ICsJcmNtbS0+bHV0LmVuYWJs
ZWQgPSBmYWxzZTsKPiArCj4gKwlwbV9ydW50aW1lX3B1dCgmcGRldi0+ZGV2KTsKPiArfQo+ICtF
WFBPUlRfU1lNQk9MX0dQTChyY2FyX2NtbV9kaXNhYmxlKTsKPiArCj4gKy8qCj4gKyAqIHJjYXJf
Y21tX2luaXQoKSAtIEluaXRpYWxpemUgdGhlIENNTSB1bml0Cj4gKyAqIEBwZGV2OiBUaGUgcGxh
dGZvcm0gZGV2aWNlIGFzc29jaWF0ZWQgd2l0aCB0aGUgQ01NIGluc3RhbmNlCj4gKyAqCj4gKyAq
IFJldHVybjogMCBvbiBzdWNjZXNzLCAtRVBST0JFX0RFRkVSIGlmIHRoZSBDTU0gaXMgbm90IGF2
YWlsYWJsZSB5ZXQsCj4gKyAqICAgICAgICAgLUVOT0RFViBpZiB0aGUgRFJNX1JDQVJfQ01NIGNv
bmZpZyBvcHRpb24gaXMgZGlzYWJsZWQKPiArICovCj4gK2ludCByY2FyX2NtbV9pbml0KHN0cnVj
dCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gK3sKPiArCXN0cnVjdCByY2FyX2NtbSAqcmNtbSA9
IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwo+ICsKPiArCWlmICghcmNtbSkKPiArCQlyZXR1
cm4gLUVQUk9CRV9ERUZFUjsKPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICtFWFBPUlRfU1lNQk9M
X0dQTChyY2FyX2NtbV9pbml0KTsKPiArCj4gK3N0YXRpYyBpbnQgcmNhcl9jbW1fcHJvYmUoc3Ry
dWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKPiArewo+ICsJc3RydWN0IHJjYXJfY21tICpyY21t
Owo+ICsKPiArCXJjbW0gPSBkZXZtX2t6YWxsb2MoJnBkZXYtPmRldiwgc2l6ZW9mKCpyY21tKSwg
R0ZQX0tFUk5FTCk7Cj4gKwlpZiAoIXJjbW0pCj4gKwkJcmV0dXJuIC1FTk9NRU07Cj4gKwlwbGF0
Zm9ybV9zZXRfZHJ2ZGF0YShwZGV2LCByY21tKTsKPiArCj4gKwlyY21tLT5iYXNlID0gZGV2bV9w
bGF0Zm9ybV9pb3JlbWFwX3Jlc291cmNlKHBkZXYsIDApOwo+ICsJaWYgKElTX0VSUihyY21tLT5i
YXNlKSkKPiArCQlyZXR1cm4gUFRSX0VSUihyY21tLT5iYXNlKTsKPiArCj4gKwlwbV9ydW50aW1l
X2VuYWJsZSgmcGRldi0+ZGV2KTsKPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGlj
IGludCByY2FyX2NtbV9yZW1vdmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKPiArewo+
ICsJcG1fcnVudGltZV9kaXNhYmxlKCZwZGV2LT5kZXYpOwo+ICsKPiArCXJldHVybiAwOwo+ICt9
Cj4gKwo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCByY2FyX2NtbV9vZl90YWJs
ZVtdID0gewo+ICsJeyAuY29tcGF0aWJsZSA9ICJyZW5lc2FzLHJjYXItZ2VuMy1jbW0iLCB9LAo+
ICsJeyAuY29tcGF0aWJsZSA9ICJyZW5lc2FzLHJjYXItZ2VuMi1jbW0iLCB9LAo+ICsJeyB9LAo+
ICt9Owo+ICtNT0RVTEVfREVWSUNFX1RBQkxFKG9mLCByY2FyX2NtbV9vZl90YWJsZSk7Cj4gKwo+
ICtzdGF0aWMgc3RydWN0IHBsYXRmb3JtX2RyaXZlciByY2FyX2NtbV9wbGF0Zm9ybV9kcml2ZXIg
PSB7Cj4gKwkucHJvYmUJCT0gcmNhcl9jbW1fcHJvYmUsCj4gKwkucmVtb3ZlCQk9IHJjYXJfY21t
X3JlbW92ZSwKPiArCS5kcml2ZXIJCT0gewo+ICsJCS5uYW1lCT0gInJjYXItY21tIiwKPiArCQku
b2ZfbWF0Y2hfdGFibGUgPSByY2FyX2NtbV9vZl90YWJsZSwKPiArCX0sCj4gK307Cj4gKwo+ICtt
b2R1bGVfcGxhdGZvcm1fZHJpdmVyKHJjYXJfY21tX3BsYXRmb3JtX2RyaXZlcik7Cj4gKwo+ICtN
T0RVTEVfQVVUSE9SKCJKYWNvcG8gTW9uZGkgPGphY29wbytyZW5lc2FzQGptb25kaS5vcmc+Iik7
Cj4gK01PRFVMRV9ERVNDUklQVElPTigiUmVuZXNhcyBSLUNhciBDTU0gRHJpdmVyIik7Cj4gK01P
RFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Jj
YXItZHUvcmNhcl9jbW0uaCBiL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfY21tLmgKPiBu
ZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAwMDAwMDAwMDAwMC4uYjVmN2VjNmRiMDRhCj4g
LS0tIC9kZXYvbnVsbAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfY21tLmgK
PiBAQCAtMCwwICsxLDU4IEBACj4gKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4w
KyAqLwo+ICsvKgo+ICsgKiByY2FyX2NtbS5oIC0tIFItQ2FyIERpc3BsYXkgVW5pdCBDb2xvciBN
YW5hZ2VtZW50IE1vZHVsZQo+ICsgKgo+ICsgKiBDb3B5cmlnaHQgKEMpIDIwMTkgSmFjb3BvIE1v
bmRpIDxqYWNvcG8rcmVuZXNhc0BqbW9uZGkub3JnPgo+ICsgKi8KPiArCj4gKyNpZm5kZWYgX19S
Q0FSX0NNTV9IX18KPiArI2RlZmluZSBfX1JDQVJfQ01NX0hfXwo+ICsKPiArI2RlZmluZSBDTTJf
TFVUX1NJWkUJCTI1Ngo+ICsKPiArc3RydWN0IGRybV9jb2xvcl9sdXQ7Cj4gK3N0cnVjdCBwbGF0
Zm9ybV9kZXZpY2U7Cj4gKwo+ICsvKioKPiArICogc3RydWN0IHJjYXJfY21tX2NvbmZpZyAtIENN
TSBjb25maWd1cmF0aW9uCj4gKyAqCj4gKyAqIEBsdXQ6CTFELUxVVCBjb25maWd1cmF0aW9uCj4g
KyAqIEBsdXQudGFibGU6CTFELUxVVCB0YWJsZSBlbnRyaWVzLiBEaXNhYmxlIExVVCBvcGVyYXRp
b25zIHdoZW4gTlVMTAo+ICsgKi8KPiArc3RydWN0IHJjYXJfY21tX2NvbmZpZyB7Cj4gKwlzdHJ1
Y3Qgewo+ICsJCXN0cnVjdCBkcm1fY29sb3JfbHV0ICp0YWJsZTsKPiArCX0gbHV0Owo+ICt9Owo+
ICsKPiArI2lmIElTX0VOQUJMRUQoQ09ORklHX0RSTV9SQ0FSX0NNTSkKPiAraW50IHJjYXJfY21t
X2luaXQoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldik7Cj4gKwo+ICtpbnQgcmNhcl9jbW1f
ZW5hYmxlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpOwo+ICt2b2lkIHJjYXJfY21tX2Rp
c2FibGUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldik7Cj4gKwo+ICtpbnQgcmNhcl9jbW1f
c2V0dXAoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiwKPiArCQkgICBjb25zdCBzdHJ1Y3Qg
cmNhcl9jbW1fY29uZmlnICpjb25maWcpOwo+ICsjZWxzZQo+ICtzdGF0aWMgaW5saW5lIGludCBy
Y2FyX2NtbV9pbml0KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gK3sKPiArCXJldHVy
biAtRU5PREVWOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW5saW5lIGludCByY2FyX2NtbV9lbmFibGUo
c3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKPiArewo+ICsJcmV0dXJuIDA7Cj4gK30KPiAr
Cj4gK3N0YXRpYyBpbmxpbmUgdm9pZCByY2FyX2NtbV9kaXNhYmxlKHN0cnVjdCBwbGF0Zm9ybV9k
ZXZpY2UgKnBkZXYpCj4gK3sKPiArfQo+ICsKPiArc3RhdGljIGlubGluZSBpbnQgcmNhcl9jbW1f
c2V0dXAoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiwKPiArCQkJCSBjb25zdCBzdHJ1Y3Qg
cmNhcl9jbW1fY29uZmlnICpjb25maWcpCj4gK3sKPiArCXJldHVybiAwOwo+ICt9Cj4gKyNlbmRp
ZiAvKiBJU19FTkFCTEVEKENPTkZJR19EUk1fUkNBUl9DTU0pICovCj4gKwo+ICsjZW5kaWYgLyog
X19SQ0FSX0NNTV9IX18gKi8KCi0tIApSZWdhcmRzLAoKTGF1cmVudCBQaW5jaGFydApfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGlu
ZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
