Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 53A334E86F
	for <lists+dri-devel@lfdr.de>; Fri, 21 Jun 2019 15:01:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C01F16E8AD;
	Fri, 21 Jun 2019 13:01:14 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mailout2.w1.samsung.com (mailout2.w1.samsung.com
 [210.118.77.12])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1E1566E8AD
 for <dri-devel@lists.freedesktop.org>; Fri, 21 Jun 2019 13:01:13 +0000 (UTC)
Received: from eucas1p1.samsung.com (unknown [182.198.249.206])
 by mailout2.w1.samsung.com (KnoxPortal) with ESMTP id
 20190621130111euoutp0258a19f604c3198561d4975c0d49bab5a~qOEDBWMtJ1405714057euoutp02F
 for <dri-devel@lists.freedesktop.org>; Fri, 21 Jun 2019 13:01:11 +0000 (GMT)
DKIM-Filter: OpenDKIM Filter v2.11.0 mailout2.w1.samsung.com
 20190621130111euoutp0258a19f604c3198561d4975c0d49bab5a~qOEDBWMtJ1405714057euoutp02F
Received: from eusmges1new.samsung.com (unknown [203.254.199.242]) by
 eucas1p2.samsung.com (KnoxPortal) with ESMTP id
 20190621130111eucas1p22c391dbf28b5f1447a0a8e5cf9ecaeab~qOECuVri21716517165eucas1p2a;
 Fri, 21 Jun 2019 13:01:11 +0000 (GMT)
Received: from eucas1p2.samsung.com ( [182.198.249.207]) by
 eusmges1new.samsung.com (EUCPMTA) with SMTP id 08.5A.04298.615DC0D5; Fri, 21
 Jun 2019 14:01:10 +0100 (BST)
Received: from eusmtrp1.samsung.com (unknown [182.198.249.138]) by
 eucas1p2.samsung.com (KnoxPortal) with ESMTPA id
 20190621130110eucas1p204a5041f91f1b52dade288e6ef137b37~qOEB8z4ae1717417174eucas1p2J;
 Fri, 21 Jun 2019 13:01:10 +0000 (GMT)
Received: from eusmgms2.samsung.com (unknown [182.198.249.180]) by
 eusmtrp1.samsung.com (KnoxPortal) with ESMTP id
 20190621130110eusmtrp178eaa4e443b6c0016fb2e172ec88f4e0~qOEBuqGve0948509485eusmtrp1X;
 Fri, 21 Jun 2019 13:01:10 +0000 (GMT)
X-AuditID: cbfec7f2-f13ff700000010ca-05-5d0cd516c2c6
Received: from eusmtip2.samsung.com ( [203.254.199.222]) by
 eusmgms2.samsung.com (EUCPMTA) with SMTP id D1.30.04140.615DC0D5; Fri, 21
 Jun 2019 14:01:10 +0100 (BST)
Received: from [106.120.51.71] (unknown [106.120.51.71]) by
 eusmtip2.samsung.com (KnoxPortal) with ESMTPA id
 20190621130109eusmtip295fa88dde609e29a4546ff46c323975b~qOEBS5RU80652406524eusmtip2F;
 Fri, 21 Jun 2019 13:01:09 +0000 (GMT)
Subject: Re: [PATCH] video: fbdev: omap2: remove rfbi
To: Aaro Koskinen <aaro.koskinen@iki.fi>
From: Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>
Message-ID: <a8779d39-7e14-6f28-6ac9-2ea0f4db2b4e@samsung.com>
Date: Fri, 21 Jun 2019 15:01:06 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <20180430195931.GC2456@t60.musicnaut.iki.fi>
Content-Language: en-US
X-Brightmail-Tracker: H4sIAAAAAAAAA01SbUhTYRjtvffu7rqcXafmk5rRqEhLTSq5aYhB0CiCfpYf5cqLim7KrjMt
 ghVZpis/KZ2CGqapMT8wTX/0sdFWGYZfYEpoqCkLNbUZRm15vUr+O8/znPOec+ClcFmHyIdK
 VmewGrUyVU5KiA7Lyqeg7UOucYfacyOYZzNRzKB9nmTuFdWKmXcPfoiYge5KkqmoLSCY5qoR
 knk1eDqKUizbiwlFRW65SGG21xCKsXwrprAOd2KKpTb/c2S05HgCm5qcyWpCIuMlSaZlozjd
 fAvLal3MI3VoqA/lIRcK6CMwXVMrzkMSSkY/RdCr/0UIw08ElpvtJM+S0UsI8o2BGwpreRsm
 kOoRPB7oxoVhFkHOHP+WC+VBH4U6ZyfOY096P9heFoh4Ek7rMHA6mzH+QNLhUHS3cS2IlI6E
 aVuhiMcEvRfGbSNrYi/6PIxZWkQCxx3el08SPHahj8GyvmuNg9PeMDJZhQl4F3TOVq4lAtok
 homO/PWmJ6Hf4RAL2ANs1vZ17Ac9JXpCEBgR/M2dWVd3IqgvcZACKwLM1r7VGNSqRQA0d4cI
 6xPQYJ8j+DXQbjA86y6EcIPijke4sJZC7h2ZwN4HLXUt5IZtXlcDXojkhk3VDJvqGDbVMfz3
 rUZEI/JmtZwqkeVC1ezVYE6p4rTqxOAraao2tPqbehzWxRfI3n/ZhGgKyV2lrw1b42QiZSaX
 rTIhoHC5p9Q11TVOJk1QZl9jNWmXNNpUljMhX4qQe0uvbxmPkdGJygw2hWXTWc3GFaNcfHRo
 97bWP351FQeNjUExTwqaxg+UBvgHvVlpbUwJe2jcceHD5/mxPd5hDSkzzttl9tjwnN77s4GW
 wOCkUrfvX4vtWoU+S/2tddQ2YXre9CVxihh9m/x7YeqijsMXqnY6HHMW/xLJ2Rqqqr+k0Cte
 XW0+RTjZG1PYmWi/w5qFstiPvnKCS1KGBuIaTvkPkQrvtEkDAAA=
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFjrBIsWRmVeSWpSXmKPExsVy+t/xe7piV3liDXo/cFuseeFgceXrezaL
 zolL2C1O9H1gtbi8aw6bxewl/SwW6+ffYrPYf8XLgcPj29dJLB6zO2ayehz+upDF4373cSaP
 4ze2M3l83iQXwBalZ1OUX1qSqpCRX1xiqxRtaGGkZ2hpoWdkYqlnaGwea2VkqqRvZ5OSmpNZ
 llqkb5egl3Ho2zr2gsNNTBUbP3WxNTBevcjYxcjJISFgInF85iamLkYuDiGBpYwSezd3s3Yx
 cgAlZCSOry+DqBGW+HOtiw2i5jWjxJNv55lBEsICphLL/m8Hs0UENCRe7etnBSliFmhiktiy
 bSXU1B9MEn1btrKAVLEJWElMbF8FtppXwE7i+asJrCA2i4CqxINXt8AmiQpESJx5v4IFokZQ
 4uTMJ2A2p4ClxLeenWA1zALqEn/mXYKyxSVuPZnPBGHLS2x/O4d5AqPQLCTts5C0zELSMgtJ
 ywJGllWMIqmlxbnpucVGesWJucWleel6yfm5mxiBsbjt2M8tOxi73gUfYhTgYFTi4T0wiztW
 iDWxrLgy9xCjBAezkggvTw5PrBBvSmJlVWpRfnxRaU5q8SFGU6DnJjJLiSbnA9NEXkm8oamh
 uYWlobmxubGZhZI4b4fAwRghgfTEktTs1NSC1CKYPiYOTqkGxmX9Gjem+G5+KKMpcXLt4VXv
 bYVXWqV/CmGoeus888H0RPetc03lCvvmBh7xPSzi/ev377+f1p36xNTolrXNybEpYsMs6e64
 vU5/Cp3UhXvOW67vWCInfkUh/8ma/LvMkoY8uV6coevnTOnX/We7ZvuPZ6U9vDpPZ9nUmm7R
 /Cqx7G9NQVb0dyWW4oxEQy3mouJEAL99WUDbAgAA
X-CMS-MailID: 20190621130110eucas1p204a5041f91f1b52dade288e6ef137b37
X-Msg-Generator: CA
X-RootMTR: 20180427150914eucas1p14dd8df4a215014ddac990b0ccdb1805c
X-EPHeader: CA
CMS-TYPE: 201P
X-CMS-RootMailID: 20180427150914eucas1p14dd8df4a215014ddac990b0ccdb1805c
References: <CGME20180427150914eucas1p14dd8df4a215014ddac990b0ccdb1805c@eucas1p1.samsung.com>
 <2238944.jilJcacc6d@amdc3058>
 <20180427174714.bdvvlljk3txwu2bo@darkstar.musicnaut.iki.fi>
 <2055912.iuafLNK0IC@amdc3058>
 <20180427181243.o7ro63l6z7yatey7@darkstar.musicnaut.iki.fi>
 <cd513378-7be2-a5eb-adc5-bf04c789f1d4@ti.com>
 <20180430195931.GC2456@t60.musicnaut.iki.fi>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=samsung.com; 
 s=mail20170921; t=1561122071;
 bh=wtqjzC4PRlrEKSLMR0Q14owWV8QHmUGLERn0UDDbSa4=;
 h=Subject:To:Cc:From:Date:In-Reply-To:References:From;
 b=L8r5/gVXNTFsszQgDfyf8XT3DF6uDyhCc6PA2Hqicc8vuqns3WJ9W8FU/r4lz7ACn
 6lUdarov8Fty6DO5AkD+bF/boy/PhcW/+x5Q97WcraDA0wKTvFpNbEeogCXcfO93+m
 aIb9qIusvjkxDAx8efLRmaO8Q7v0+deVR+1KEq6M=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-fbdev@vger.kernel.org, Tony Lindgren <tony@atomide.com>,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 linux-omap@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

CkhpLAoKT24gNC8zMC8xOCA5OjU5IFBNLCBBYXJvIEtvc2tpbmVuIHdyb3RlOgo+IEhpLAo+IAo+
IE9uIE1vbiwgQXByIDMwLCAyMDE4IGF0IDEwOjA2OjExQU0gKzAzMDAsIFRvbWkgVmFsa2VpbmVu
IHdyb3RlOgo+PiBPbiAyNy8wNC8xOCAyMToxMiwgQWFybyBLb3NraW5lbiB3cm90ZToKPj4+PiBZ
b3Ugc2hvdWxkIGJlIHRhcmdldGluZyBvbWFwZHJtIGRyaXZlciBpbnN0ZWFkLCBmYmRldiBzdWJz
eXN0ZW0gaXMgY2xvc2VkCj4+Pj4gZm9yIHRoZSBuZXcgaGFyZHdhcmUgc3VwcG9ydC4KPj4+Cj4+
PiBBRkFJSywgYmFzZWQgb24gTjk1MCBkaXNwbGF5IHN1cHBvcnQgZGlzY3Vzc2lvbiwgaXQncyBp
bXBvc3NpYmxlIHRvIGdldAo+Pj4gYW55dGhpbmcgbmV3IGludG8gb21hcGRybSBmb3IgYSBsb25n
IHRpbWUuIEFuZCBiYXNlZCBvbiBUb21pJ3MgY29tbWVudHMsCj4+PiByZXN0b3JpbmcgUkZCSSBz
dXBwb3J0IHdpdGggb21hcGZiIHNob3VsZCBiZSBhIG1pbm9yIHRoaW5nLgo+Pgo+PiBJIHdhcyBw
ZXJoYXBzIGEgYml0IHZhZ3VlLCBidXQgSSBkaWRuJ3Qgc2F5IGl0IHNob3VsZCBiZSBhIG1pbm9y
IHRoaW5nLgo+PiBJIG1lYW50IHRoYXQgdGhlcmUgc2hvdWxkIGJlIG5vIGFyY2hpdGVjdHVyYWwg
b2JzdGFjbGVzIGluIG9tYXBmYiwgYW5kIEkKPj4gdGhpbmsgYWxsIHRoZSBnZW5lcmljIHBsdW1i
aW5nIHRvIGVuYWJsZSBOODAwIGRpc3BsYXkgaXMgdGhlcmUgaW4gb21hcGZiLgo+Pgo+PiBUaGF0
IHNhaWQsIGl0IHN0aWxsIG5lZWRzIGEgcmVhbCBhbW91bnQgb2Ygd29yayB3aXRoIHRoZSByZmJp
IGRyaXZlciwKPj4gdGhlIGVuY29kZXIgZHJpdmVyIGFuZCB0aGUgcGFuZWwgZHJpdmVyIG9uIE44
MDAgKHRoZSBlbmNvZGVyIGFuZCB0aGUKPj4gcGFuZWwgZHJpdmVyIGFyZSBub3QgaW4gbWFpbmxp
bmUgYW55bW9yZSkuCj4gCj4gTGV0J3Mgc2VlIGZpcnN0IGlmIEkgZ2V0IGFueXRoaW5nIHdvcmtp
bmcuIEFmdGVyIHRoYXQgd2UgY2FuIGV2YWx1YXRlCj4gdGhlIGltcGFjdCBwcm9wZXJseSBvbmNl
IHdlIHNlZSB0aGUgYWN0dWFsIHBhdGNoZXMgbmVlZGVkLgpJdCBoYXMgYmVlbiBvdmVyIGEgeWVh
ciBub3cgYW5kIG5vdCBtdWNoIGhhcyBoYXBwZW5lZCBpbiB0aGUgY2FzZSBvZgpmaXhpbmcgcmZi
aSBkcml2ZXIgc28gSSd2ZSBxdWV1ZWQgdGhlIG9sZCBwYXRjaCByZW1vdmluZyBpdCAod2l0aAp1
cGRhdGVkIHBhdGNoIGRlc2NyaXB0aW9uLCBwbGVhc2Ugc2VlIGJlbG93KSBmb3IgdjUuMyAocGxl
YXNlIG5vdGUKdGhhdCBpdCBjYW4gYmUgdHJpdmlhbGx5IHJldmVydGVkIHVzaW5nIGtlcm5lbCBn
aXQgcmVwb3NpdG9yeSBpZiBldmVyCm5lZWRlZCkuCgpCZXN0IHJlZ2FyZHMsCi0tCkJhcnRsb21p
ZWogWm9sbmllcmtpZXdpY3oKU2Ftc3VuZyBSJkQgSW5zdGl0dXRlIFBvbGFuZApTYW1zdW5nIEVs
ZWN0cm9uaWNzCgoKRnJvbTogQmFydGxvbWllaiBab2xuaWVya2lld2ljeiA8Yi56b2xuaWVya2ll
QHNhbXN1bmcuY29tPgpTdWJqZWN0OiBbUEFUQ0hdIHZpZGVvOiBmYmRldjogb21hcDI6IHJlbW92
ZSByZmJpCgpFcXVpdmFsZW50IG9mIGRybSdzIGNvbW1pdCBhYTYxMzIxZDRjMDggKCJkcm0vb21h
cDogcmVtb3ZlIHJmYmkiKS4KClRoZSBSRkJJIGRyaXZlciBoYXMgYmVlbiBtYXJrZWQgYXMgQlJP
S0VOIGFuZCBoYXMgbm90IGJlZW4KaW5jbHVkZWQgaW4gdGhlIGtlcm5lbCBidWlsZCBmb3IgbWFu
eSB5ZWFycy4gSnVzdCByZW1vdmUgaXQKKGl0IGNhbiBiZSB0cml2aWFsbHkgYnJvdWdodCBiYWNr
IGZyb20gZ2l0IHJlcG9zaXRvcnkgaWYKZXZlciBuZWVkZWQpLgoKQ2M6IFRvbWkgVmFsa2VpbmVu
IDx0b21pLnZhbGtlaW5lbkB0aS5jb20+CkNjOiBMYXVyZW50IFBpbmNoYXJ0IDxsYXVyZW50LnBp
bmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+CkNjOiBBYXJvIEtvc2tpbmVuIDxhYXJvLmtvc2tpbmVu
QGlraS5maT4KQ2M6IFRvbnkgTGluZGdyZW4gPHRvbnlAYXRvbWlkZS5jb20+ClNpZ25lZC1vZmYt
Ynk6IEJhcnRsb21pZWogWm9sbmllcmtpZXdpY3ogPGIuem9sbmllcmtpZUBzYW1zdW5nLmNvbT4K
LS0tCiBkcml2ZXJzL3ZpZGVvL2ZiZGV2L29tYXAyL29tYXBmYi9kc3MvS2NvbmZpZyAgfCAgIDEy
IAogZHJpdmVycy92aWRlby9mYmRldi9vbWFwMi9vbWFwZmIvZHNzL01ha2VmaWxlIHwgICAgMSAK
IGRyaXZlcnMvdmlkZW8vZmJkZXYvb21hcDIvb21hcGZiL2Rzcy9jb3JlLmMgICB8ICAgIDYgCiBk
cml2ZXJzL3ZpZGVvL2ZiZGV2L29tYXAyL29tYXBmYi9kc3MvZHNzLmggICAgfCAgICA0IAogZHJp
dmVycy92aWRlby9mYmRldi9vbWFwMi9vbWFwZmIvZHNzL3JmYmkuYyAgIHwgMTA3OCAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQogaW5jbHVkZS92aWRlby9vbWFwZmJfZHNzLmggICAgICAgICAg
ICAgICAgICAgIHwgICAzMiAKIDYgZmlsZXMgY2hhbmdlZCwgMTEzMyBkZWxldGlvbnMoLSkKIGRl
bGV0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL3ZpZGVvL2ZiZGV2L29tYXAyL29tYXBmYi9kc3MvcmZi
aS5jCgpJbmRleDogYi9kcml2ZXJzL3ZpZGVvL2ZiZGV2L29tYXAyL29tYXBmYi9kc3MvS2NvbmZp
Zwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09Ci0tLSBhL2RyaXZlcnMvdmlkZW8vZmJkZXYvb21hcDIvb21hcGZiL2Rzcy9L
Y29uZmlnCisrKyBiL2RyaXZlcnMvdmlkZW8vZmJkZXYvb21hcDIvb21hcGZiL2Rzcy9LY29uZmln
CkBAIC0zOSwxOCArMzksNiBAQCBjb25maWcgRkJfT01BUDJfRFNTX0RQSQogCWhlbHAKIAkgIERQ
SSBJbnRlcmZhY2UuIFRoaXMgaXMgdGhlIFBhcmFsbGVsIERpc3BsYXkgSW50ZXJmYWNlLgogCi1j
b25maWcgRkJfT01BUDJfRFNTX1JGQkkKLQlib29sICJSRkJJIHN1cHBvcnQiCi0JZGVwZW5kcyBv
biBCUk9LRU4KLQloZWxwCi0JICBNSVBJIERCSSBzdXBwb3J0IChSRkJJLCBSZW1vdGUgRnJhbWVi
dWZmZXIgSW50ZXJmYWNlLCBpbiBUZXhhcwotCSAgSW5zdHJ1bWVudCdzIHRlcm1pbm9sb2d5KS4K
LQotCSAgREJJIGlzIGEgYnVzIGJldHdlZW4gdGhlIGhvc3QgcHJvY2Vzc29yIGFuZCBhIHBlcmlw
aGVyYWwsCi0JICBzdWNoIGFzIGEgZGlzcGxheSBvciBhIGZyYW1lYnVmZmVyIGNoaXAuCi0KLQkg
IFNlZSBodHRwOi8vd3d3Lm1pcGkub3JnLyBmb3IgREJJIHNwZWNpZmljYXRpb25zLgotCiBjb25m
aWcgRkJfT01BUDJfRFNTX1ZFTkMKIAlib29sICJWRU5DIHN1cHBvcnQiCiAJZGVmYXVsdCB5Cklu
ZGV4OiBiL2RyaXZlcnMvdmlkZW8vZmJkZXYvb21hcDIvb21hcGZiL2Rzcy9NYWtlZmlsZQo9PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09Ci0tLSBhL2RyaXZlcnMvdmlkZW8vZmJkZXYvb21hcDIvb21hcGZiL2Rzcy9NYWtlZmls
ZQorKysgYi9kcml2ZXJzL3ZpZGVvL2ZiZGV2L29tYXAyL29tYXBmYi9kc3MvTWFrZWZpbGUKQEAg
LTgsNyArOCw2IEBAIG9tYXBkc3MteSA6PSBjb3JlLm8gZHNzLm8gZHNzX2ZlYXR1cmVzLm8KIG9t
YXBkc3MteSArPSBtYW5hZ2VyLm8gbWFuYWdlci1zeXNmcy5vIG92ZXJsYXkubyBvdmVybGF5LXN5
c2ZzLm8gYXBwbHkubyBcCiAJZGlzcGMtY29tcGF0Lm8gZGlzcGxheS1zeXNmcy5vCiBvbWFwZHNz
LSQoQ09ORklHX0ZCX09NQVAyX0RTU19EUEkpICs9IGRwaS5vCi1vbWFwZHNzLSQoQ09ORklHX0ZC
X09NQVAyX0RTU19SRkJJKSArPSByZmJpLm8KIG9tYXBkc3MtJChDT05GSUdfRkJfT01BUDJfRFNT
X1ZFTkMpICs9IHZlbmMubwogb21hcGRzcy0kKENPTkZJR19GQl9PTUFQMl9EU1NfU0RJKSArPSBz
ZGkubwogb21hcGRzcy0kKENPTkZJR19GQl9PTUFQMl9EU1NfRFNJKSArPSBkc2kubwpJbmRleDog
Yi9kcml2ZXJzL3ZpZGVvL2ZiZGV2L29tYXAyL29tYXBmYi9kc3MvY29yZS5jCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0K
LS0tIGEvZHJpdmVycy92aWRlby9mYmRldi9vbWFwMi9vbWFwZmIvZHNzL2NvcmUuYworKysgYi9k
cml2ZXJzL3ZpZGVvL2ZiZGV2L29tYXAyL29tYXBmYi9kc3MvY29yZS5jCkBAIC0yMTgsOSArMjE4
LDYgQEAgc3RhdGljIGludCAoKmRzc19vdXRwdXRfZHJ2X3JlZ19mdW5jc1tdKQogI2lmZGVmIENP
TkZJR19GQl9PTUFQMl9EU1NfU0RJCiAJc2RpX2luaXRfcGxhdGZvcm1fZHJpdmVyLAogI2VuZGlm
Ci0jaWZkZWYgQ09ORklHX0ZCX09NQVAyX0RTU19SRkJJCi0JcmZiaV9pbml0X3BsYXRmb3JtX2Ry
aXZlciwKLSNlbmRpZgogI2lmZGVmIENPTkZJR19GQl9PTUFQMl9EU1NfVkVOQwogCXZlbmNfaW5p
dF9wbGF0Zm9ybV9kcml2ZXIsCiAjZW5kaWYKQEAgLTI0Miw5ICsyMzksNiBAQCBzdGF0aWMgdm9p
ZCAoKmRzc19vdXRwdXRfZHJ2X3VucmVnX2Z1bmNzCiAjaWZkZWYgQ09ORklHX0ZCX09NQVAyX0RT
U19WRU5DCiAJdmVuY191bmluaXRfcGxhdGZvcm1fZHJpdmVyLAogI2VuZGlmCi0jaWZkZWYgQ09O
RklHX0ZCX09NQVAyX0RTU19SRkJJCi0JcmZiaV91bmluaXRfcGxhdGZvcm1fZHJpdmVyLAotI2Vu
ZGlmCiAjaWZkZWYgQ09ORklHX0ZCX09NQVAyX0RTU19TREkKIAlzZGlfdW5pbml0X3BsYXRmb3Jt
X2RyaXZlciwKICNlbmRpZgpJbmRleDogYi9kcml2ZXJzL3ZpZGVvL2ZiZGV2L29tYXAyL29tYXBm
Yi9kc3MvZHNzLmgKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PQotLS0gYS9kcml2ZXJzL3ZpZGVvL2ZiZGV2L29tYXAyL29t
YXBmYi9kc3MvZHNzLmgKKysrIGIvZHJpdmVycy92aWRlby9mYmRldi9vbWFwMi9vbWFwZmIvZHNz
L2Rzcy5oCkBAIC00NzIsMTAgKzQ3Miw2IEBAIHZvaWQgaGRtaTRfdW5pbml0X3BsYXRmb3JtX2Ry
aXZlcih2b2lkKTsKIGludCBoZG1pNV9pbml0X3BsYXRmb3JtX2RyaXZlcih2b2lkKSBfX2luaXQ7
CiB2b2lkIGhkbWk1X3VuaW5pdF9wbGF0Zm9ybV9kcml2ZXIodm9pZCk7CiAKLS8qIFJGQkkgKi8K
LWludCByZmJpX2luaXRfcGxhdGZvcm1fZHJpdmVyKHZvaWQpIF9faW5pdDsKLXZvaWQgcmZiaV91
bmluaXRfcGxhdGZvcm1fZHJpdmVyKHZvaWQpOwotCiAKICNpZmRlZiBDT05GSUdfRkJfT01BUDJf
RFNTX0NPTExFQ1RfSVJRX1NUQVRTCiBzdGF0aWMgaW5saW5lIHZvaWQgZHNzX2NvbGxlY3RfaXJx
X3N0YXRzKHUzMiBpcnFzdGF0dXMsIHVuc2lnbmVkICppcnFfYXJyKQpJbmRleDogYi9kcml2ZXJz
L3ZpZGVvL2ZiZGV2L29tYXAyL29tYXBmYi9kc3MvcmZiaS5jCj09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIGEvZHJp
dmVycy92aWRlby9mYmRldi9vbWFwMi9vbWFwZmIvZHNzL3JmYmkuYworKysgL2Rldi9udWxsCkBA
IC0xLDEwNzggKzAsMCBAQAotLyoKLSAqIGxpbnV4L2RyaXZlcnMvdmlkZW8vb21hcDIvZHNzL3Jm
YmkuYwotICoKLSAqIENvcHlyaWdodCAoQykgMjAwOSBOb2tpYSBDb3Jwb3JhdGlvbgotICogQXV0
aG9yOiBUb21pIFZhbGtlaW5lbiA8dG9taS52YWxrZWluZW5Abm9raWEuY29tPgotICoKLSAqIFNv
bWUgY29kZSBhbmQgaWRlYXMgdGFrZW4gZnJvbSBkcml2ZXJzL3ZpZGVvL29tYXAvIGRyaXZlcgot
ICogYnkgSW1yZSBEZWFrLgotICoKLSAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5
b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0Ci0gKiB1bmRlciB0aGUgdGVy
bXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMiBhcyBwdWJsaXNo
ZWQgYnkKLSAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uCi0gKgotICogVGhpcyBwcm9n
cmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1
dCBXSVRIT1VUCi0gKiBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJy
YW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IKLSAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQ
VVJQT1NFLiAgU2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IKLSAqIG1vcmUg
ZGV0YWlscy4KLSAqCi0gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBH
TlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoCi0gKiB0aGlzIHByb2dyYW0uICBJ
ZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCi0gKi8KLQotI2RlZmlu
ZSBEU1NfU1VCU1lTX05BTUUgIlJGQkkiCi0KLSNpbmNsdWRlIDxsaW51eC9rZXJuZWwuaD4KLSNp
bmNsdWRlIDxsaW51eC9kbWEtbWFwcGluZy5oPgotI2luY2x1ZGUgPGxpbnV4L2V4cG9ydC5oPgot
I2luY2x1ZGUgPGxpbnV4L3ZtYWxsb2MuaD4KLSNpbmNsdWRlIDxsaW51eC9jbGsuaD4KLSNpbmNs
dWRlIDxsaW51eC9pby5oPgotI2luY2x1ZGUgPGxpbnV4L2RlbGF5Lmg+Ci0jaW5jbHVkZSA8bGlu
dXgva2ZpZm8uaD4KLSNpbmNsdWRlIDxsaW51eC9rdGltZS5oPgotI2luY2x1ZGUgPGxpbnV4L2hy
dGltZXIuaD4KLSNpbmNsdWRlIDxsaW51eC9zZXFfZmlsZS5oPgotI2luY2x1ZGUgPGxpbnV4L3Nl
bWFwaG9yZS5oPgotI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgotI2luY2x1ZGUg
PGxpbnV4L3BtX3J1bnRpbWUuaD4KLSNpbmNsdWRlIDxsaW51eC9jb21wb25lbnQuaD4KLQotI2lu
Y2x1ZGUgPHZpZGVvL29tYXBmYl9kc3MuaD4KLSNpbmNsdWRlICJkc3MuaCIKLQotc3RydWN0IHJm
YmlfcmVnIHsgdTE2IGlkeDsgfTsKLQotI2RlZmluZSBSRkJJX1JFRyhpZHgpCQkoKGNvbnN0IHN0
cnVjdCByZmJpX3JlZykgeyBpZHggfSkKLQotI2RlZmluZSBSRkJJX1JFVklTSU9OCQlSRkJJX1JF
RygweDAwMDApCi0jZGVmaW5lIFJGQklfU1lTQ09ORklHCQlSRkJJX1JFRygweDAwMTApCi0jZGVm
aW5lIFJGQklfU1lTU1RBVFVTCQlSRkJJX1JFRygweDAwMTQpCi0jZGVmaW5lIFJGQklfQ09OVFJP
TAkJUkZCSV9SRUcoMHgwMDQwKQotI2RlZmluZSBSRkJJX1BJWEVMX0NOVAkJUkZCSV9SRUcoMHgw
MDQ0KQotI2RlZmluZSBSRkJJX0xJTkVfTlVNQkVSCVJGQklfUkVHKDB4MDA0OCkKLSNkZWZpbmUg
UkZCSV9DTUQJCVJGQklfUkVHKDB4MDA0YykKLSNkZWZpbmUgUkZCSV9QQVJBTQkJUkZCSV9SRUco
MHgwMDUwKQotI2RlZmluZSBSRkJJX0RBVEEJCVJGQklfUkVHKDB4MDA1NCkKLSNkZWZpbmUgUkZC
SV9SRUFECQlSRkJJX1JFRygweDAwNTgpCi0jZGVmaW5lIFJGQklfU1RBVFVTCQlSRkJJX1JFRygw
eDAwNWMpCi0KLSNkZWZpbmUgUkZCSV9DT05GSUcobikJCVJGQklfUkVHKDB4MDA2MCArIChuKSow
eDE4KQotI2RlZmluZSBSRkJJX09OT0ZGX1RJTUUobikJUkZCSV9SRUcoMHgwMDY0ICsgKG4pKjB4
MTgpCi0jZGVmaW5lIFJGQklfQ1lDTEVfVElNRShuKQlSRkJJX1JFRygweDAwNjggKyAobikqMHgx
OCkKLSNkZWZpbmUgUkZCSV9EQVRBX0NZQ0xFMShuKQlSRkJJX1JFRygweDAwNmMgKyAobikqMHgx
OCkKLSNkZWZpbmUgUkZCSV9EQVRBX0NZQ0xFMihuKQlSRkJJX1JFRygweDAwNzAgKyAobikqMHgx
OCkKLSNkZWZpbmUgUkZCSV9EQVRBX0NZQ0xFMyhuKQlSRkJJX1JFRygweDAwNzQgKyAobikqMHgx
OCkKLQotI2RlZmluZSBSRkJJX1ZTWU5DX1dJRFRICVJGQklfUkVHKDB4MDA5MCkKLSNkZWZpbmUg
UkZCSV9IU1lOQ19XSURUSAlSRkJJX1JFRygweDAwOTQpCi0KLSNkZWZpbmUgUkVHX0ZMRF9NT0Qo
aWR4LCB2YWwsIHN0YXJ0LCBlbmQpIFwKLQlyZmJpX3dyaXRlX3JlZyhpZHgsIEZMRF9NT0QocmZi
aV9yZWFkX3JlZyhpZHgpLCB2YWwsIHN0YXJ0LCBlbmQpKQotCi1lbnVtIG9tYXBfcmZiaV9jeWNs
ZWZvcm1hdCB7Ci0JT01BUF9EU1NfUkZCSV9DWUNMRUZPUk1BVF8xXzEgPSAwLAotCU9NQVBfRFNT
X1JGQklfQ1lDTEVGT1JNQVRfMl8xID0gMSwKLQlPTUFQX0RTU19SRkJJX0NZQ0xFRk9STUFUXzNf
MSA9IDIsCi0JT01BUF9EU1NfUkZCSV9DWUNMRUZPUk1BVF8zXzIgPSAzLAotfTsKLQotZW51bSBv
bWFwX3JmYmlfZGF0YXR5cGUgewotCU9NQVBfRFNTX1JGQklfREFUQVRZUEVfMTIgPSAwLAotCU9N
QVBfRFNTX1JGQklfREFUQVRZUEVfMTYgPSAxLAotCU9NQVBfRFNTX1JGQklfREFUQVRZUEVfMTgg
PSAyLAotCU9NQVBfRFNTX1JGQklfREFUQVRZUEVfMjQgPSAzLAotfTsKLQotZW51bSBvbWFwX3Jm
YmlfcGFyYWxsZWxtb2RlIHsKLQlPTUFQX0RTU19SRkJJX1BBUkFMTEVMTU9ERV84ID0gMCwKLQlP
TUFQX0RTU19SRkJJX1BBUkFMTEVMTU9ERV85ID0gMSwKLQlPTUFQX0RTU19SRkJJX1BBUkFMTEVM
TU9ERV8xMiA9IDIsCi0JT01BUF9EU1NfUkZCSV9QQVJBTExFTE1PREVfMTYgPSAzLAotfTsKLQot
c3RhdGljIGludCByZmJpX2NvbnZlcnRfdGltaW5ncyhzdHJ1Y3QgcmZiaV90aW1pbmdzICp0KTsK
LXN0YXRpYyB2b2lkIHJmYmlfZ2V0X2Nsa19pbmZvKHUzMiAqY2xrX3BlcmlvZCwgdTMyICptYXhf
Y2xrX2Rpdik7Ci0KLXN0YXRpYyBzdHJ1Y3QgewotCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBk
ZXY7Ci0Jdm9pZCBfX2lvbWVtCSpiYXNlOwotCi0JdW5zaWduZWQgbG9uZwlsNF9raHo7Ci0KLQll
bnVtIG9tYXBfcmZiaV9kYXRhdHlwZSBkYXRhdHlwZTsKLQllbnVtIG9tYXBfcmZiaV9wYXJhbGxl
bG1vZGUgcGFyYWxsZWxtb2RlOwotCi0JZW51bSBvbWFwX3JmYmlfdGVfbW9kZSB0ZV9tb2RlOwot
CWludCB0ZV9lbmFibGVkOwotCi0Jdm9pZCAoKmZyYW1lZG9uZV9jYWxsYmFjaykodm9pZCAqZGF0
YSk7Ci0Jdm9pZCAqZnJhbWVkb25lX2NhbGxiYWNrX2RhdGE7Ci0KLQlzdHJ1Y3Qgb21hcF9kc3Nf
ZGV2aWNlICpkc3NkZXZbMl07Ci0KLQlzdHJ1Y3Qgc2VtYXBob3JlIGJ1c19sb2NrOwotCi0Jc3Ry
dWN0IG9tYXBfdmlkZW9fdGltaW5ncyB0aW1pbmdzOwotCWludCBwaXhlbF9zaXplOwotCWludCBk
YXRhX2xpbmVzOwotCXN0cnVjdCByZmJpX3RpbWluZ3MgaW50Zl90aW1pbmdzOwotCi0Jc3RydWN0
IG9tYXBfZHNzX2RldmljZSBvdXRwdXQ7Ci19IHJmYmk7Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCBy
ZmJpX3dyaXRlX3JlZyhjb25zdCBzdHJ1Y3QgcmZiaV9yZWcgaWR4LCB1MzIgdmFsKQotewotCV9f
cmF3X3dyaXRlbCh2YWwsIHJmYmkuYmFzZSArIGlkeC5pZHgpOwotfQotCi1zdGF0aWMgaW5saW5l
IHUzMiByZmJpX3JlYWRfcmVnKGNvbnN0IHN0cnVjdCByZmJpX3JlZyBpZHgpCi17Ci0JcmV0dXJu
IF9fcmF3X3JlYWRsKHJmYmkuYmFzZSArIGlkeC5pZHgpOwotfQotCi1zdGF0aWMgaW50IHJmYmlf
cnVudGltZV9nZXQodm9pZCkKLXsKLQlpbnQgcjsKLQotCURTU0RCRygicmZiaV9ydW50aW1lX2dl
dFxuIik7Ci0KLQlyID0gcG1fcnVudGltZV9nZXRfc3luYygmcmZiaS5wZGV2LT5kZXYpOwotCVdB
Uk5fT04ociA8IDApOwotCXJldHVybiByIDwgMCA/IHIgOiAwOwotfQotCi1zdGF0aWMgdm9pZCBy
ZmJpX3J1bnRpbWVfcHV0KHZvaWQpCi17Ci0JaW50IHI7Ci0KLQlEU1NEQkcoInJmYmlfcnVudGlt
ZV9wdXRcbiIpOwotCi0JciA9IHBtX3J1bnRpbWVfcHV0X3N5bmMoJnJmYmkucGRldi0+ZGV2KTsK
LQlXQVJOX09OKHIgPCAwICYmIHIgIT0gLUVOT1NZUyk7Ci19Ci0KLXN0YXRpYyB2b2lkIHJmYmlf
YnVzX2xvY2sodm9pZCkKLXsKLQlkb3duKCZyZmJpLmJ1c19sb2NrKTsKLX0KLQotc3RhdGljIHZv
aWQgcmZiaV9idXNfdW5sb2NrKHZvaWQpCi17Ci0JdXAoJnJmYmkuYnVzX2xvY2spOwotfQotCi1z
dGF0aWMgdm9pZCByZmJpX3dyaXRlX2NvbW1hbmQoY29uc3Qgdm9pZCAqYnVmLCB1MzIgbGVuKQot
ewotCXN3aXRjaCAocmZiaS5wYXJhbGxlbG1vZGUpIHsKLQljYXNlIE9NQVBfRFNTX1JGQklfUEFS
QUxMRUxNT0RFXzg6Ci0JewotCQljb25zdCB1OCAqYiA9IGJ1ZjsKLQkJZm9yICg7IGxlbjsgbGVu
LS0pCi0JCQlyZmJpX3dyaXRlX3JlZyhSRkJJX0NNRCwgKmIrKyk7Ci0JCWJyZWFrOwotCX0KLQot
CWNhc2UgT01BUF9EU1NfUkZCSV9QQVJBTExFTE1PREVfMTY6Ci0JewotCQljb25zdCB1MTYgKncg
PSBidWY7Ci0JCUJVR19PTihsZW4gJiAxKTsKLQkJZm9yICg7IGxlbjsgbGVuIC09IDIpCi0JCQly
ZmJpX3dyaXRlX3JlZyhSRkJJX0NNRCwgKncrKyk7Ci0JCWJyZWFrOwotCX0KLQotCWNhc2UgT01B
UF9EU1NfUkZCSV9QQVJBTExFTE1PREVfOToKLQljYXNlIE9NQVBfRFNTX1JGQklfUEFSQUxMRUxN
T0RFXzEyOgotCWRlZmF1bHQ6Ci0JCUJVRygpOwotCX0KLX0KLQotc3RhdGljIHZvaWQgcmZiaV9y
ZWFkX2RhdGEodm9pZCAqYnVmLCB1MzIgbGVuKQotewotCXN3aXRjaCAocmZiaS5wYXJhbGxlbG1v
ZGUpIHsKLQljYXNlIE9NQVBfRFNTX1JGQklfUEFSQUxMRUxNT0RFXzg6Ci0JewotCQl1OCAqYiA9
IGJ1ZjsKLQkJZm9yICg7IGxlbjsgbGVuLS0pIHsKLQkJCXJmYmlfd3JpdGVfcmVnKFJGQklfUkVB
RCwgMCk7Ci0JCQkqYisrID0gcmZiaV9yZWFkX3JlZyhSRkJJX1JFQUQpOwotCQl9Ci0JCWJyZWFr
OwotCX0KLQotCWNhc2UgT01BUF9EU1NfUkZCSV9QQVJBTExFTE1PREVfMTY6Ci0JewotCQl1MTYg
KncgPSBidWY7Ci0JCUJVR19PTihsZW4gJiB+MSk7Ci0JCWZvciAoOyBsZW47IGxlbiAtPSAyKSB7
Ci0JCQlyZmJpX3dyaXRlX3JlZyhSRkJJX1JFQUQsIDApOwotCQkJKncrKyA9IHJmYmlfcmVhZF9y
ZWcoUkZCSV9SRUFEKTsKLQkJfQotCQlicmVhazsKLQl9Ci0KLQljYXNlIE9NQVBfRFNTX1JGQklf
UEFSQUxMRUxNT0RFXzk6Ci0JY2FzZSBPTUFQX0RTU19SRkJJX1BBUkFMTEVMTU9ERV8xMjoKLQlk
ZWZhdWx0OgotCQlCVUcoKTsKLQl9Ci19Ci0KLXN0YXRpYyB2b2lkIHJmYmlfd3JpdGVfZGF0YShj
b25zdCB2b2lkICpidWYsIHUzMiBsZW4pCi17Ci0Jc3dpdGNoIChyZmJpLnBhcmFsbGVsbW9kZSkg
ewotCWNhc2UgT01BUF9EU1NfUkZCSV9QQVJBTExFTE1PREVfODoKLQl7Ci0JCWNvbnN0IHU4ICpi
ID0gYnVmOwotCQlmb3IgKDsgbGVuOyBsZW4tLSkKLQkJCXJmYmlfd3JpdGVfcmVnKFJGQklfUEFS
QU0sICpiKyspOwotCQlicmVhazsKLQl9Ci0KLQljYXNlIE9NQVBfRFNTX1JGQklfUEFSQUxMRUxN
T0RFXzE2OgotCXsKLQkJY29uc3QgdTE2ICp3ID0gYnVmOwotCQlCVUdfT04obGVuICYgMSk7Ci0J
CWZvciAoOyBsZW47IGxlbiAtPSAyKQotCQkJcmZiaV93cml0ZV9yZWcoUkZCSV9QQVJBTSwgKncr
Kyk7Ci0JCWJyZWFrOwotCX0KLQotCWNhc2UgT01BUF9EU1NfUkZCSV9QQVJBTExFTE1PREVfOToK
LQljYXNlIE9NQVBfRFNTX1JGQklfUEFSQUxMRUxNT0RFXzEyOgotCWRlZmF1bHQ6Ci0JCUJVRygp
OwotCi0JfQotfQotCi1zdGF0aWMgdm9pZCByZmJpX3dyaXRlX3BpeGVscyhjb25zdCB2b2lkIF9f
aW9tZW0gKmJ1ZiwgaW50IHNjcl93aWR0aCwKLQkJdTE2IHgsIHUxNiB5LAotCQl1MTYgdywgdTE2
IGgpCi17Ci0JaW50IHN0YXJ0X29mZnNldCA9IHNjcl93aWR0aCAqIHkgKyB4OwotCWludCBob3Jp
el9vZmZzZXQgPSBzY3Jfd2lkdGggLSB3OwotCWludCBpOwotCi0JaWYgKHJmYmkuZGF0YXR5cGUg
PT0gT01BUF9EU1NfUkZCSV9EQVRBVFlQRV8xNiAmJgotCSAgIHJmYmkucGFyYWxsZWxtb2RlID09
IE9NQVBfRFNTX1JGQklfUEFSQUxMRUxNT0RFXzgpIHsKLQkJY29uc3QgdTE2IF9faW9tZW0gKnBk
ID0gYnVmOwotCQlwZCArPSBzdGFydF9vZmZzZXQ7Ci0KLQkJZm9yICg7IGg7IC0taCkgewotCQkJ
Zm9yIChpID0gMDsgaSA8IHc7ICsraSkgewotCQkJCWNvbnN0IHU4IF9faW9tZW0gKmIgPSAoY29u
c3QgdTggX19pb21lbSAqKXBkOwotCQkJCXJmYmlfd3JpdGVfcmVnKFJGQklfUEFSQU0sIF9fcmF3
X3JlYWRiKGIrMSkpOwotCQkJCXJmYmlfd3JpdGVfcmVnKFJGQklfUEFSQU0sIF9fcmF3X3JlYWRi
KGIrMCkpOwotCQkJCSsrcGQ7Ci0JCQl9Ci0JCQlwZCArPSBob3Jpel9vZmZzZXQ7Ci0JCX0KLQl9
IGVsc2UgaWYgKHJmYmkuZGF0YXR5cGUgPT0gT01BUF9EU1NfUkZCSV9EQVRBVFlQRV8yNCAmJgot
CSAgIHJmYmkucGFyYWxsZWxtb2RlID09IE9NQVBfRFNTX1JGQklfUEFSQUxMRUxNT0RFXzgpIHsK
LQkJY29uc3QgdTMyIF9faW9tZW0gKnBkID0gYnVmOwotCQlwZCArPSBzdGFydF9vZmZzZXQ7Ci0K
LQkJZm9yICg7IGg7IC0taCkgewotCQkJZm9yIChpID0gMDsgaSA8IHc7ICsraSkgewotCQkJCWNv
bnN0IHU4IF9faW9tZW0gKmIgPSAoY29uc3QgdTggX19pb21lbSAqKXBkOwotCQkJCXJmYmlfd3Jp
dGVfcmVnKFJGQklfUEFSQU0sIF9fcmF3X3JlYWRiKGIrMikpOwotCQkJCXJmYmlfd3JpdGVfcmVn
KFJGQklfUEFSQU0sIF9fcmF3X3JlYWRiKGIrMSkpOwotCQkJCXJmYmlfd3JpdGVfcmVnKFJGQklf
UEFSQU0sIF9fcmF3X3JlYWRiKGIrMCkpOwotCQkJCSsrcGQ7Ci0JCQl9Ci0JCQlwZCArPSBob3Jp
el9vZmZzZXQ7Ci0JCX0KLQl9IGVsc2UgaWYgKHJmYmkuZGF0YXR5cGUgPT0gT01BUF9EU1NfUkZC
SV9EQVRBVFlQRV8xNiAmJgotCSAgIHJmYmkucGFyYWxsZWxtb2RlID09IE9NQVBfRFNTX1JGQklf
UEFSQUxMRUxNT0RFXzE2KSB7Ci0JCWNvbnN0IHUxNiBfX2lvbWVtICpwZCA9IGJ1ZjsKLQkJcGQg
Kz0gc3RhcnRfb2Zmc2V0OwotCi0JCWZvciAoOyBoOyAtLWgpIHsKLQkJCWZvciAoaSA9IDA7IGkg
PCB3OyArK2kpIHsKLQkJCQlyZmJpX3dyaXRlX3JlZyhSRkJJX1BBUkFNLCBfX3Jhd19yZWFkdyhw
ZCkpOwotCQkJCSsrcGQ7Ci0JCQl9Ci0JCQlwZCArPSBob3Jpel9vZmZzZXQ7Ci0JCX0KLQl9IGVs
c2UgewotCQlCVUcoKTsKLQl9Ci19Ci0KLXN0YXRpYyBpbnQgcmZiaV90cmFuc2Zlcl9hcmVhKHN0
cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwKLQkJdm9pZCAoKmNhbGxiYWNrKSh2b2lkICpk
YXRhKSwgdm9pZCAqZGF0YSkKLXsKLQl1MzIgbDsKLQlpbnQgcjsKLQlzdHJ1Y3Qgb21hcF9vdmVy
bGF5X21hbmFnZXIgKm1nciA9IHJmYmkub3V0cHV0Lm1hbmFnZXI7Ci0JdTE2IHdpZHRoID0gcmZi
aS50aW1pbmdzLnhfcmVzOwotCXUxNiBoZWlnaHQgPSByZmJpLnRpbWluZ3MueV9yZXM7Ci0KLQkv
KkJVR19PTihjYWxsYmFjayA9PSAwKTsqLwotCUJVR19PTihyZmJpLmZyYW1lZG9uZV9jYWxsYmFj
ayAhPSBOVUxMKTsKLQotCURTU0RCRygicmZiaV90cmFuc2Zlcl9hcmVhICVkeCVkXG4iLCB3aWR0
aCwgaGVpZ2h0KTsKLQotCWRzc19tZ3Jfc2V0X3RpbWluZ3MobWdyLCAmcmZiaS50aW1pbmdzKTsK
LQotCXIgPSBkc3NfbWdyX2VuYWJsZShtZ3IpOwotCWlmIChyKQotCQlyZXR1cm4gcjsKLQotCXJm
YmkuZnJhbWVkb25lX2NhbGxiYWNrID0gY2FsbGJhY2s7Ci0JcmZiaS5mcmFtZWRvbmVfY2FsbGJh
Y2tfZGF0YSA9IGRhdGE7Ci0KLQlyZmJpX3dyaXRlX3JlZyhSRkJJX1BJWEVMX0NOVCwgd2lkdGgg
KiBoZWlnaHQpOwotCi0JbCA9IHJmYmlfcmVhZF9yZWcoUkZCSV9DT05UUk9MKTsKLQlsID0gRkxE
X01PRChsLCAxLCAwLCAwKTsgLyogZW5hYmxlICovCi0JaWYgKCFyZmJpLnRlX2VuYWJsZWQpCi0J
CWwgPSBGTERfTU9EKGwsIDEsIDQsIDQpOyAvKiBJVEUgKi8KLQotCXJmYmlfd3JpdGVfcmVnKFJG
QklfQ09OVFJPTCwgbCk7Ci0KLQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIHZvaWQgZnJhbWVkb25l
X2NhbGxiYWNrKHZvaWQgKmRhdGEpCi17Ci0Jdm9pZCAoKmNhbGxiYWNrKSh2b2lkICpkYXRhKTsK
LQotCURTU0RCRygiRlJBTUVET05FXG4iKTsKLQotCVJFR19GTERfTU9EKFJGQklfQ09OVFJPTCwg
MCwgMCwgMCk7Ci0KLQljYWxsYmFjayA9IHJmYmkuZnJhbWVkb25lX2NhbGxiYWNrOwotCXJmYmku
ZnJhbWVkb25lX2NhbGxiYWNrID0gTlVMTDsKLQotCWlmIChjYWxsYmFjayAhPSBOVUxMKQotCQlj
YWxsYmFjayhyZmJpLmZyYW1lZG9uZV9jYWxsYmFja19kYXRhKTsKLX0KLQotI2lmIDEgLyogVkVS
Qk9TRSAqLwotc3RhdGljIHZvaWQgcmZiaV9wcmludF90aW1pbmdzKHZvaWQpCi17Ci0JdTMyIGw7
Ci0JdTMyIHRpbWU7Ci0KLQlsID0gcmZiaV9yZWFkX3JlZyhSRkJJX0NPTkZJRygwKSk7Ci0JdGlt
ZSA9IDEwMDAwMDAwMDAgLyByZmJpLmw0X2toejsKLQlpZiAobCAmICgxIDw8IDQpKQotCQl0aW1l
ICo9IDI7Ci0KLQlEU1NEQkcoIlRpY2sgdGltZSAldSBwc1xuIiwgdGltZSk7Ci0JbCA9IHJmYmlf
cmVhZF9yZWcoUkZCSV9PTk9GRl9USU1FKDApKTsKLQlEU1NEQkcoIkNTT05USU1FICVkLCBDU09G
RlRJTUUgJWQsIFdFT05USU1FICVkLCBXRU9GRlRJTUUgJWQsICIKLQkJIlJFT05USU1FICVkLCBS
RU9GRlRJTUUgJWRcbiIsCi0JCWwgJiAweDBmLCAobCA+PiA0KSAmIDB4M2YsIChsID4+IDEwKSAm
IDB4MGYsIChsID4+IDE0KSAmIDB4M2YsCi0JCShsID4+IDIwKSAmIDB4MGYsIChsID4+IDI0KSAm
IDB4M2YpOwotCi0JbCA9IHJmYmlfcmVhZF9yZWcoUkZCSV9DWUNMRV9USU1FKDApKTsKLQlEU1NE
QkcoIldFQ1lDTEVUSU1FICVkLCBSRUNZQ0xFVElNRSAlZCwgQ1NQVUxTRVdJRFRIICVkLCAiCi0J
CSJBQ0NFU1NUSU1FICVkXG4iLAotCQkobCAmIDB4M2YpLCAobCA+PiA2KSAmIDB4M2YsIChsID4+
IDEyKSAmIDB4M2YsCi0JCShsID4+IDIyKSAmIDB4M2YpOwotfQotI2Vsc2UKLXN0YXRpYyB2b2lk
IHJmYmlfcHJpbnRfdGltaW5ncyh2b2lkKSB7fQotI2VuZGlmCi0KLQotCi0KLXN0YXRpYyB1MzIg
ZXh0aWZfY2xrX3BlcmlvZDsKLQotc3RhdGljIGlubGluZSB1bnNpZ25lZCBsb25nIHJvdW5kX3Rv
X2V4dGlmX3RpY2tzKHVuc2lnbmVkIGxvbmcgcHMsIGludCBkaXYpCi17Ci0JaW50IGJ1c190aWNr
ID0gZXh0aWZfY2xrX3BlcmlvZCAqIGRpdjsKLQlyZXR1cm4gKHBzICsgYnVzX3RpY2sgLSAxKSAv
IGJ1c190aWNrICogYnVzX3RpY2s7Ci19Ci0KLXN0YXRpYyBpbnQgY2FsY19yZWdfdGltaW5nKHN0
cnVjdCByZmJpX3RpbWluZ3MgKnQsIGludCBkaXYpCi17Ci0JdC0+Y2xrX2RpdiA9IGRpdjsKLQot
CXQtPmNzX29uX3RpbWUgPSByb3VuZF90b19leHRpZl90aWNrcyh0LT5jc19vbl90aW1lLCBkaXYp
OwotCi0JdC0+d2Vfb25fdGltZSA9IHJvdW5kX3RvX2V4dGlmX3RpY2tzKHQtPndlX29uX3RpbWUs
IGRpdik7Ci0JdC0+d2Vfb2ZmX3RpbWUgPSByb3VuZF90b19leHRpZl90aWNrcyh0LT53ZV9vZmZf
dGltZSwgZGl2KTsKLQl0LT53ZV9jeWNsZV90aW1lID0gcm91bmRfdG9fZXh0aWZfdGlja3ModC0+
d2VfY3ljbGVfdGltZSwgZGl2KTsKLQotCXQtPnJlX29uX3RpbWUgPSByb3VuZF90b19leHRpZl90
aWNrcyh0LT5yZV9vbl90aW1lLCBkaXYpOwotCXQtPnJlX29mZl90aW1lID0gcm91bmRfdG9fZXh0
aWZfdGlja3ModC0+cmVfb2ZmX3RpbWUsIGRpdik7Ci0JdC0+cmVfY3ljbGVfdGltZSA9IHJvdW5k
X3RvX2V4dGlmX3RpY2tzKHQtPnJlX2N5Y2xlX3RpbWUsIGRpdik7Ci0KLQl0LT5hY2Nlc3NfdGlt
ZSA9IHJvdW5kX3RvX2V4dGlmX3RpY2tzKHQtPmFjY2Vzc190aW1lLCBkaXYpOwotCXQtPmNzX29m
Zl90aW1lID0gcm91bmRfdG9fZXh0aWZfdGlja3ModC0+Y3Nfb2ZmX3RpbWUsIGRpdik7Ci0JdC0+
Y3NfcHVsc2Vfd2lkdGggPSByb3VuZF90b19leHRpZl90aWNrcyh0LT5jc19wdWxzZV93aWR0aCwg
ZGl2KTsKLQotCURTU0RCRygiW3JlZ11jc29uICVkIGNzb2ZmICVkIHJlb24gJWQgcmVvZmYgJWRc
biIsCi0JICAgICAgIHQtPmNzX29uX3RpbWUsIHQtPmNzX29mZl90aW1lLCB0LT5yZV9vbl90aW1l
LCB0LT5yZV9vZmZfdGltZSk7Ci0JRFNTREJHKCJbcmVnXXdlb24gJWQgd2VvZmYgJWQgcmVjeWMg
JWQgd2VjeWMgJWRcbiIsCi0JICAgICAgIHQtPndlX29uX3RpbWUsIHQtPndlX29mZl90aW1lLCB0
LT5yZV9jeWNsZV90aW1lLAotCSAgICAgICB0LT53ZV9jeWNsZV90aW1lKTsKLQlEU1NEQkcoIlty
ZWddcmRhY2Nlc3MgJWQgY3NwdWxzZSAlZFxuIiwKLQkgICAgICAgdC0+YWNjZXNzX3RpbWUsIHQt
PmNzX3B1bHNlX3dpZHRoKTsKLQotCXJldHVybiByZmJpX2NvbnZlcnRfdGltaW5ncyh0KTsKLX0K
LQotc3RhdGljIGludCBjYWxjX2V4dGlmX3RpbWluZ3Moc3RydWN0IHJmYmlfdGltaW5ncyAqdCkK
LXsKLQl1MzIgbWF4X2Nsa19kaXY7Ci0JaW50IGRpdjsKLQotCXJmYmlfZ2V0X2Nsa19pbmZvKCZl
eHRpZl9jbGtfcGVyaW9kLCAmbWF4X2Nsa19kaXYpOwotCWZvciAoZGl2ID0gMTsgZGl2IDw9IG1h
eF9jbGtfZGl2OyBkaXYrKykgewotCQlpZiAoY2FsY19yZWdfdGltaW5nKHQsIGRpdikgPT0gMCkK
LQkJCWJyZWFrOwotCX0KLQotCWlmIChkaXYgPD0gbWF4X2Nsa19kaXYpCi0JCXJldHVybiAwOwot
Ci0JRFNTRVJSKCJjYW4ndCBzZXR1cCB0aW1pbmdzXG4iKTsKLQlyZXR1cm4gLTE7Ci19Ci0KLQot
c3RhdGljIHZvaWQgcmZiaV9zZXRfdGltaW5ncyhpbnQgcmZiaV9tb2R1bGUsIHN0cnVjdCByZmJp
X3RpbWluZ3MgKnQpCi17Ci0JaW50IHI7Ci0KLQlpZiAoIXQtPmNvbnZlcnRlZCkgewotCQlyID0g
Y2FsY19leHRpZl90aW1pbmdzKHQpOwotCQlpZiAociA8IDApCi0JCQlEU1NFUlIoIkZhaWxlZCB0
byBjYWxjIHRpbWluZ3NcbiIpOwotCX0KLQotCUJVR19PTighdC0+Y29udmVydGVkKTsKLQotCXJm
Ymlfd3JpdGVfcmVnKFJGQklfT05PRkZfVElNRShyZmJpX21vZHVsZSksIHQtPnRpbVswXSk7Ci0J
cmZiaV93cml0ZV9yZWcoUkZCSV9DWUNMRV9USU1FKHJmYmlfbW9kdWxlKSwgdC0+dGltWzFdKTsK
LQotCS8qIFRJTUVHUkFOVUxBUklUWSAqLwotCVJFR19GTERfTU9EKFJGQklfQ09ORklHKHJmYmlf
bW9kdWxlKSwKLQkJICAgICh0LT50aW1bMl0gPyAxIDogMCksIDQsIDQpOwotCi0JcmZiaV9wcmlu
dF90aW1pbmdzKCk7Ci19Ci0KLXN0YXRpYyBpbnQgcHNfdG9fcmZiaV90aWNrcyhpbnQgdGltZSwg
aW50IGRpdikKLXsKLQl1bnNpZ25lZCBsb25nIHRpY2tfcHM7Ci0JaW50IHJldDsKLQotCS8qIENh
bGN1bGF0ZSBpbiBwaWNvc2VjcyB0byB5aWVsZCBtb3JlIGV4YWN0IHJlc3VsdHMgKi8KLQl0aWNr
X3BzID0gMTAwMDAwMDAwMCAvIChyZmJpLmw0X2toeikgKiBkaXY7Ci0KLQlyZXQgPSAodGltZSAr
IHRpY2tfcHMgLSAxKSAvIHRpY2tfcHM7Ci0KLQlyZXR1cm4gcmV0OwotfQotCi1zdGF0aWMgdm9p
ZCByZmJpX2dldF9jbGtfaW5mbyh1MzIgKmNsa19wZXJpb2QsIHUzMiAqbWF4X2Nsa19kaXYpCi17
Ci0JKmNsa19wZXJpb2QgPSAxMDAwMDAwMDAwIC8gcmZiaS5sNF9raHo7Ci0JKm1heF9jbGtfZGl2
ID0gMjsKLX0KLQotc3RhdGljIGludCByZmJpX2NvbnZlcnRfdGltaW5ncyhzdHJ1Y3QgcmZiaV90
aW1pbmdzICp0KQotewotCXUzMiBsOwotCWludCByZW9uLCByZW9mZiwgd2Vvbiwgd2VvZmYsIGNz
b24sIGNzb2ZmLCBjc19wdWxzZTsKLQlpbnQgYWN0aW0sIHJlY3ljLCB3ZWN5YzsKLQlpbnQgZGl2
ID0gdC0+Y2xrX2RpdjsKLQotCWlmIChkaXYgPD0gMCB8fCBkaXYgPiAyKQotCQlyZXR1cm4gLTE7
Ci0KLQkvKiBNYWtlIHN1cmUgdGhhdCBhZnRlciBjb252ZXJzaW9uIGl0IHN0aWxsIGhvbGRzIHRo
YXQ6Ci0JICogd2VvZmYgPiB3ZW9uLCByZW9mZiA+IHJlb24sIHJlY3ljID49IHJlb2ZmLCB3ZWN5
YyA+PSB3ZW9mZiwKLQkgKiBjc29mZiA+IGNzb24sIGNzb2ZmID49IG1heCh3ZW9mZiwgcmVvZmYp
LCBhY3RpbSA+IHJlb24KLQkgKi8KLQl3ZW9uID0gcHNfdG9fcmZiaV90aWNrcyh0LT53ZV9vbl90
aW1lLCBkaXYpOwotCXdlb2ZmID0gcHNfdG9fcmZiaV90aWNrcyh0LT53ZV9vZmZfdGltZSwgZGl2
KTsKLQlpZiAod2VvZmYgPD0gd2VvbikKLQkJd2VvZmYgPSB3ZW9uICsgMTsKLQlpZiAod2VvbiA+
IDB4MGYpCi0JCXJldHVybiAtMTsKLQlpZiAod2VvZmYgPiAweDNmKQotCQlyZXR1cm4gLTE7Ci0K
LQlyZW9uID0gcHNfdG9fcmZiaV90aWNrcyh0LT5yZV9vbl90aW1lLCBkaXYpOwotCXJlb2ZmID0g
cHNfdG9fcmZiaV90aWNrcyh0LT5yZV9vZmZfdGltZSwgZGl2KTsKLQlpZiAocmVvZmYgPD0gcmVv
bikKLQkJcmVvZmYgPSByZW9uICsgMTsKLQlpZiAocmVvbiA+IDB4MGYpCi0JCXJldHVybiAtMTsK
LQlpZiAocmVvZmYgPiAweDNmKQotCQlyZXR1cm4gLTE7Ci0KLQljc29uID0gcHNfdG9fcmZiaV90
aWNrcyh0LT5jc19vbl90aW1lLCBkaXYpOwotCWNzb2ZmID0gcHNfdG9fcmZiaV90aWNrcyh0LT5j
c19vZmZfdGltZSwgZGl2KTsKLQlpZiAoY3NvZmYgPD0gY3NvbikKLQkJY3NvZmYgPSBjc29uICsg
MTsKLQlpZiAoY3NvZmYgPCBtYXgod2VvZmYsIHJlb2ZmKSkKLQkJY3NvZmYgPSBtYXgod2VvZmYs
IHJlb2ZmKTsKLQlpZiAoY3NvbiA+IDB4MGYpCi0JCXJldHVybiAtMTsKLQlpZiAoY3NvZmYgPiAw
eDNmKQotCQlyZXR1cm4gLTE7Ci0KLQlsID0gIGNzb247Ci0JbCB8PSBjc29mZiA8PCA0OwotCWwg
fD0gd2VvbiAgPDwgMTA7Ci0JbCB8PSB3ZW9mZiA8PCAxNDsKLQlsIHw9IHJlb24gIDw8IDIwOwot
CWwgfD0gcmVvZmYgPDwgMjQ7Ci0KLQl0LT50aW1bMF0gPSBsOwotCi0JYWN0aW0gPSBwc190b19y
ZmJpX3RpY2tzKHQtPmFjY2Vzc190aW1lLCBkaXYpOwotCWlmIChhY3RpbSA8PSByZW9uKQotCQlh
Y3RpbSA9IHJlb24gKyAxOwotCWlmIChhY3RpbSA+IDB4M2YpCi0JCXJldHVybiAtMTsKLQotCXdl
Y3ljID0gcHNfdG9fcmZiaV90aWNrcyh0LT53ZV9jeWNsZV90aW1lLCBkaXYpOwotCWlmICh3ZWN5
YyA8IHdlb2ZmKQotCQl3ZWN5YyA9IHdlb2ZmOwotCWlmICh3ZWN5YyA+IDB4M2YpCi0JCXJldHVy
biAtMTsKLQotCXJlY3ljID0gcHNfdG9fcmZiaV90aWNrcyh0LT5yZV9jeWNsZV90aW1lLCBkaXYp
OwotCWlmIChyZWN5YyA8IHJlb2ZmKQotCQlyZWN5YyA9IHJlb2ZmOwotCWlmIChyZWN5YyA+IDB4
M2YpCi0JCXJldHVybiAtMTsKLQotCWNzX3B1bHNlID0gcHNfdG9fcmZiaV90aWNrcyh0LT5jc19w
dWxzZV93aWR0aCwgZGl2KTsKLQlpZiAoY3NfcHVsc2UgPiAweDNmKQotCQlyZXR1cm4gLTE7Ci0K
LQlsID0gIHdlY3ljOwotCWwgfD0gcmVjeWMgICAgPDwgNjsKLQlsIHw9IGNzX3B1bHNlIDw8IDEy
OwotCWwgfD0gYWN0aW0gICAgPDwgMjI7Ci0KLQl0LT50aW1bMV0gPSBsOwotCi0JdC0+dGltWzJd
ID0gZGl2IC0gMTsKLQotCXQtPmNvbnZlcnRlZCA9IDE7Ci0KLQlyZXR1cm4gMDsKLX0KLQotLyog
eHh4IEZJWCBtb2R1bGUgc2VsZWN0aW9uIG1pc3NpbmcgKi8KLXN0YXRpYyBpbnQgcmZiaV9zZXR1
cF90ZShlbnVtIG9tYXBfcmZiaV90ZV9tb2RlIG1vZGUsCi0JCQkgICAgIHVuc2lnbmVkIGhzX3B1
bHNlX3RpbWUsIHVuc2lnbmVkIHZzX3B1bHNlX3RpbWUsCi0JCQkgICAgIGludCBoc19wb2xfaW52
LCBpbnQgdnNfcG9sX2ludiwgaW50IGV4dGlmX2RpdikKLXsKLQlpbnQgaHMsIHZzOwotCWludCBt
aW47Ci0JdTMyIGw7Ci0KLQlocyA9IHBzX3RvX3JmYmlfdGlja3MoaHNfcHVsc2VfdGltZSwgMSk7
Ci0JdnMgPSBwc190b19yZmJpX3RpY2tzKHZzX3B1bHNlX3RpbWUsIDEpOwotCWlmIChocyA8IDIp
Ci0JCXJldHVybiAtRURPTTsKLQlpZiAobW9kZSA9PSBPTUFQX0RTU19SRkJJX1RFX01PREVfMikK
LQkJbWluID0gMjsKLQllbHNlIC8qIE9NQVBfRFNTX1JGQklfVEVfTU9ERV8xICovCi0JCW1pbiA9
IDQ7Ci0JaWYgKHZzIDwgbWluKQotCQlyZXR1cm4gLUVET007Ci0JaWYgKHZzID09IGhzKQotCQly
ZXR1cm4gLUVJTlZBTDsKLQlyZmJpLnRlX21vZGUgPSBtb2RlOwotCURTU0RCRygic2V0dXBfdGU6
IG1vZGUgJWQgaHMgJWQgdnMgJWQgaHNfaW52ICVkIHZzX2ludiAlZFxuIiwKLQkJbW9kZSwgaHMs
IHZzLCBoc19wb2xfaW52LCB2c19wb2xfaW52KTsKLQotCXJmYmlfd3JpdGVfcmVnKFJGQklfSFNZ
TkNfV0lEVEgsIGhzKTsKLQlyZmJpX3dyaXRlX3JlZyhSRkJJX1ZTWU5DX1dJRFRILCB2cyk7Ci0K
LQlsID0gcmZiaV9yZWFkX3JlZyhSRkJJX0NPTkZJRygwKSk7Ci0JaWYgKGhzX3BvbF9pbnYpCi0J
CWwgJj0gfigxIDw8IDIxKTsKLQllbHNlCi0JCWwgfD0gMSA8PCAyMTsKLQlpZiAodnNfcG9sX2lu
dikKLQkJbCAmPSB+KDEgPDwgMjApOwotCWVsc2UKLQkJbCB8PSAxIDw8IDIwOwotCi0JcmV0dXJu
IDA7Ci19Ci0KLS8qIHh4eCBGSVggbW9kdWxlIHNlbGVjdGlvbiBtaXNzaW5nICovCi1zdGF0aWMg
aW50IHJmYmlfZW5hYmxlX3RlKGJvb2wgZW5hYmxlLCB1bnNpZ25lZCBsaW5lKQotewotCXUzMiBs
OwotCi0JRFNTREJHKCJ0ZSAlZCBsaW5lICVkIG1vZGUgJWRcbiIsIGVuYWJsZSwgbGluZSwgcmZi
aS50ZV9tb2RlKTsKLQlpZiAobGluZSA+ICgxIDw8IDExKSAtIDEpCi0JCXJldHVybiAtRUlOVkFM
OwotCi0JbCA9IHJmYmlfcmVhZF9yZWcoUkZCSV9DT05GSUcoMCkpOwotCWwgJj0gfigweDMgPDwg
Mik7Ci0JaWYgKGVuYWJsZSkgewotCQlyZmJpLnRlX2VuYWJsZWQgPSAxOwotCQlsIHw9IHJmYmku
dGVfbW9kZSA8PCAyOwotCX0gZWxzZQotCQlyZmJpLnRlX2VuYWJsZWQgPSAwOwotCXJmYmlfd3Jp
dGVfcmVnKFJGQklfQ09ORklHKDApLCBsKTsKLQlyZmJpX3dyaXRlX3JlZyhSRkJJX0xJTkVfTlVN
QkVSLCBsaW5lKTsKLQotCXJldHVybiAwOwotfQotCi1zdGF0aWMgaW50IHJmYmlfY29uZmlndXJl
X2J1cyhpbnQgcmZiaV9tb2R1bGUsIGludCBicHAsIGludCBsaW5lcykKLXsKLQl1MzIgbDsKLQlp
bnQgY3ljbGUxID0gMCwgY3ljbGUyID0gMCwgY3ljbGUzID0gMDsKLQllbnVtIG9tYXBfcmZiaV9j
eWNsZWZvcm1hdCBjeWNsZWZvcm1hdDsKLQllbnVtIG9tYXBfcmZiaV9kYXRhdHlwZSBkYXRhdHlw
ZTsKLQllbnVtIG9tYXBfcmZiaV9wYXJhbGxlbG1vZGUgcGFyYWxsZWxtb2RlOwotCi0Jc3dpdGNo
IChicHApIHsKLQljYXNlIDEyOgotCQlkYXRhdHlwZSA9IE9NQVBfRFNTX1JGQklfREFUQVRZUEVf
MTI7Ci0JCWJyZWFrOwotCWNhc2UgMTY6Ci0JCWRhdGF0eXBlID0gT01BUF9EU1NfUkZCSV9EQVRB
VFlQRV8xNjsKLQkJYnJlYWs7Ci0JY2FzZSAxODoKLQkJZGF0YXR5cGUgPSBPTUFQX0RTU19SRkJJ
X0RBVEFUWVBFXzE4OwotCQlicmVhazsKLQljYXNlIDI0OgotCQlkYXRhdHlwZSA9IE9NQVBfRFNT
X1JGQklfREFUQVRZUEVfMjQ7Ci0JCWJyZWFrOwotCWRlZmF1bHQ6Ci0JCUJVRygpOwotCQlyZXR1
cm4gMTsKLQl9Ci0JcmZiaS5kYXRhdHlwZSA9IGRhdGF0eXBlOwotCi0Jc3dpdGNoIChsaW5lcykg
ewotCWNhc2UgODoKLQkJcGFyYWxsZWxtb2RlID0gT01BUF9EU1NfUkZCSV9QQVJBTExFTE1PREVf
ODsKLQkJYnJlYWs7Ci0JY2FzZSA5OgotCQlwYXJhbGxlbG1vZGUgPSBPTUFQX0RTU19SRkJJX1BB
UkFMTEVMTU9ERV85OwotCQlicmVhazsKLQljYXNlIDEyOgotCQlwYXJhbGxlbG1vZGUgPSBPTUFQ
X0RTU19SRkJJX1BBUkFMTEVMTU9ERV8xMjsKLQkJYnJlYWs7Ci0JY2FzZSAxNjoKLQkJcGFyYWxs
ZWxtb2RlID0gT01BUF9EU1NfUkZCSV9QQVJBTExFTE1PREVfMTY7Ci0JCWJyZWFrOwotCWRlZmF1
bHQ6Ci0JCUJVRygpOwotCQlyZXR1cm4gMTsKLQl9Ci0JcmZiaS5wYXJhbGxlbG1vZGUgPSBwYXJh
bGxlbG1vZGU7Ci0KLQlpZiAoKGJwcCAlIGxpbmVzKSA9PSAwKSB7Ci0JCXN3aXRjaCAoYnBwIC8g
bGluZXMpIHsKLQkJY2FzZSAxOgotCQkJY3ljbGVmb3JtYXQgPSBPTUFQX0RTU19SRkJJX0NZQ0xF
Rk9STUFUXzFfMTsKLQkJCWJyZWFrOwotCQljYXNlIDI6Ci0JCQljeWNsZWZvcm1hdCA9IE9NQVBf
RFNTX1JGQklfQ1lDTEVGT1JNQVRfMl8xOwotCQkJYnJlYWs7Ci0JCWNhc2UgMzoKLQkJCWN5Y2xl
Zm9ybWF0ID0gT01BUF9EU1NfUkZCSV9DWUNMRUZPUk1BVF8zXzE7Ci0JCQlicmVhazsKLQkJZGVm
YXVsdDoKLQkJCUJVRygpOwotCQkJcmV0dXJuIDE7Ci0JCX0KLQl9IGVsc2UgaWYgKCgyICogYnBw
ICUgbGluZXMpID09IDApIHsKLQkJaWYgKCgyICogYnBwIC8gbGluZXMpID09IDMpCi0JCQljeWNs
ZWZvcm1hdCA9IE9NQVBfRFNTX1JGQklfQ1lDTEVGT1JNQVRfM18yOwotCQllbHNlIHsKLQkJCUJV
RygpOwotCQkJcmV0dXJuIDE7Ci0JCX0KLQl9IGVsc2UgewotCQlCVUcoKTsKLQkJcmV0dXJuIDE7
Ci0JfQotCi0Jc3dpdGNoIChjeWNsZWZvcm1hdCkgewotCWNhc2UgT01BUF9EU1NfUkZCSV9DWUNM
RUZPUk1BVF8xXzE6Ci0JCWN5Y2xlMSA9IGxpbmVzOwotCQlicmVhazsKLQotCWNhc2UgT01BUF9E
U1NfUkZCSV9DWUNMRUZPUk1BVF8yXzE6Ci0JCWN5Y2xlMSA9IGxpbmVzOwotCQljeWNsZTIgPSBs
aW5lczsKLQkJYnJlYWs7Ci0KLQljYXNlIE9NQVBfRFNTX1JGQklfQ1lDTEVGT1JNQVRfM18xOgot
CQljeWNsZTEgPSBsaW5lczsKLQkJY3ljbGUyID0gbGluZXM7Ci0JCWN5Y2xlMyA9IGxpbmVzOwot
CQlicmVhazsKLQotCWNhc2UgT01BUF9EU1NfUkZCSV9DWUNMRUZPUk1BVF8zXzI6Ci0JCWN5Y2xl
MSA9IGxpbmVzOwotCQljeWNsZTIgPSAobGluZXMgLyAyKSB8ICgobGluZXMgLyAyKSA8PCAxNik7
Ci0JCWN5Y2xlMyA9IChsaW5lcyA8PCAxNik7Ci0JCWJyZWFrOwotCX0KLQotCVJFR19GTERfTU9E
KFJGQklfQ09OVFJPTCwgMCwgMywgMik7IC8qIGNsZWFyIENTICovCi0KLQlsID0gMDsKLQlsIHw9
IEZMRF9WQUwocGFyYWxsZWxtb2RlLCAxLCAwKTsKLQlsIHw9IEZMRF9WQUwoMCwgMywgMik7CQkv
KiBUUklHR0VSTU9ERTogSVRFICovCi0JbCB8PSBGTERfVkFMKDAsIDQsIDQpOwkJLyogVElNRUdS
QU5VTEFSSVRZICovCi0JbCB8PSBGTERfVkFMKGRhdGF0eXBlLCA2LCA1KTsKLQkvKiBsIHw9IEZM
RF9WQUwoMiwgOCwgNyk7ICovCS8qIEw0Rk9STUFULCAycGl4L0w0ICovCi0JbCB8PSBGTERfVkFM
KDAsIDgsIDcpOwkvKiBMNEZPUk1BVCwgMXBpeC9MNCAqLwotCWwgfD0gRkxEX1ZBTChjeWNsZWZv
cm1hdCwgMTAsIDkpOwotCWwgfD0gRkxEX1ZBTCgwLCAxMiwgMTEpOwkvKiBVTlVTRURCSVRTICov
Ci0JbCB8PSBGTERfVkFMKDAsIDE2LCAxNik7CS8qIEEwUE9MQVJJVFkgKi8KLQlsIHw9IEZMRF9W
QUwoMCwgMTcsIDE3KTsJLyogUkVQT0xBUklUWSAqLwotCWwgfD0gRkxEX1ZBTCgwLCAxOCwgMTgp
OwkvKiBXRVBPTEFSSVRZICovCi0JbCB8PSBGTERfVkFMKDAsIDE5LCAxOSk7CS8qIENTUE9MQVJJ
VFkgKi8KLQlsIHw9IEZMRF9WQUwoMSwgMjAsIDIwKTsJLyogVEVfVlNZTkNfUE9MQVJJVFkgKi8K
LQlsIHw9IEZMRF9WQUwoMSwgMjEsIDIxKTsJLyogSFNZTkNQT0xBUklUWSAqLwotCXJmYmlfd3Jp
dGVfcmVnKFJGQklfQ09ORklHKHJmYmlfbW9kdWxlKSwgbCk7Ci0KLQlyZmJpX3dyaXRlX3JlZyhS
RkJJX0RBVEFfQ1lDTEUxKHJmYmlfbW9kdWxlKSwgY3ljbGUxKTsKLQlyZmJpX3dyaXRlX3JlZyhS
RkJJX0RBVEFfQ1lDTEUyKHJmYmlfbW9kdWxlKSwgY3ljbGUyKTsKLQlyZmJpX3dyaXRlX3JlZyhS
RkJJX0RBVEFfQ1lDTEUzKHJmYmlfbW9kdWxlKSwgY3ljbGUzKTsKLQotCi0JbCA9IHJmYmlfcmVh
ZF9yZWcoUkZCSV9DT05UUk9MKTsKLQlsID0gRkxEX01PRChsLCByZmJpX21vZHVsZSsxLCAzLCAy
KTsgLyogU2VsZWN0IENTeCAqLwotCWwgPSBGTERfTU9EKGwsIDAsIDEsIDEpOyAvKiBjbGVhciBi
eXBhc3MgKi8KLQlyZmJpX3dyaXRlX3JlZyhSRkJJX0NPTlRST0wsIGwpOwotCi0KLQlEU1NEQkco
IlJGQkkgY29uZmlnOiBicHAgJWQsIGxpbmVzICVkLCBjeWNsZXM6IDB4JXggMHgleCAweCV4XG4i
LAotCSAgICAgICBicHAsIGxpbmVzLCBjeWNsZTEsIGN5Y2xlMiwgY3ljbGUzKTsKLQotCXJldHVy
biAwOwotfQotCi1zdGF0aWMgaW50IHJmYmlfY29uZmlndXJlKHN0cnVjdCBvbWFwX2Rzc19kZXZp
Y2UgKmRzc2RldikKLXsKLQlyZXR1cm4gcmZiaV9jb25maWd1cmVfYnVzKGRzc2Rldi0+cGh5LnJm
YmkuY2hhbm5lbCwgcmZiaS5waXhlbF9zaXplLAotCQkJcmZiaS5kYXRhX2xpbmVzKTsKLX0KLQot
c3RhdGljIGludCByZmJpX3VwZGF0ZShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsIHZv
aWQgKCpjYWxsYmFjaykodm9pZCAqKSwKLQkJdm9pZCAqZGF0YSkKLXsKLQlyZXR1cm4gcmZiaV90
cmFuc2Zlcl9hcmVhKGRzc2RldiwgY2FsbGJhY2ssIGRhdGEpOwotfQotCi1zdGF0aWMgdm9pZCBy
ZmJpX3NldF9zaXplKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwgdTE2IHcsIHUxNiBo
KQotewotCXJmYmkudGltaW5ncy54X3JlcyA9IHc7Ci0JcmZiaS50aW1pbmdzLnlfcmVzID0gaDsK
LX0KLQotc3RhdGljIHZvaWQgcmZiaV9zZXRfcGl4ZWxfc2l6ZShzdHJ1Y3Qgb21hcF9kc3NfZGV2
aWNlICpkc3NkZXYsIGludCBwaXhlbF9zaXplKQotewotCXJmYmkucGl4ZWxfc2l6ZSA9IHBpeGVs
X3NpemU7Ci19Ci0KLXN0YXRpYyB2b2lkIHJmYmlfc2V0X2RhdGFfbGluZXMoc3RydWN0IG9tYXBf
ZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgZGF0YV9saW5lcykKLXsKLQlyZmJpLmRhdGFfbGluZXMg
PSBkYXRhX2xpbmVzOwotfQotCi1zdGF0aWMgdm9pZCByZmJpX3NldF9pbnRlcmZhY2VfdGltaW5n
cyhzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsCi0JCXN0cnVjdCByZmJpX3RpbWluZ3Mg
KnRpbWluZ3MpCi17Ci0JcmZiaS5pbnRmX3RpbWluZ3MgPSAqdGltaW5nczsKLX0KLQotc3RhdGlj
IHZvaWQgcmZiaV9kdW1wX3JlZ3Moc3RydWN0IHNlcV9maWxlICpzKQotewotI2RlZmluZSBEVU1Q
UkVHKHIpIHNlcV9wcmludGYocywgIiUtMzVzICUwOHhcbiIsICNyLCByZmJpX3JlYWRfcmVnKHIp
KQotCi0JaWYgKHJmYmlfcnVudGltZV9nZXQoKSkKLQkJcmV0dXJuOwotCi0JRFVNUFJFRyhSRkJJ
X1JFVklTSU9OKTsKLQlEVU1QUkVHKFJGQklfU1lTQ09ORklHKTsKLQlEVU1QUkVHKFJGQklfU1lT
U1RBVFVTKTsKLQlEVU1QUkVHKFJGQklfQ09OVFJPTCk7Ci0JRFVNUFJFRyhSRkJJX1BJWEVMX0NO
VCk7Ci0JRFVNUFJFRyhSRkJJX0xJTkVfTlVNQkVSKTsKLQlEVU1QUkVHKFJGQklfQ01EKTsKLQlE
VU1QUkVHKFJGQklfUEFSQU0pOwotCURVTVBSRUcoUkZCSV9EQVRBKTsKLQlEVU1QUkVHKFJGQklf
UkVBRCk7Ci0JRFVNUFJFRyhSRkJJX1NUQVRVUyk7Ci0KLQlEVU1QUkVHKFJGQklfQ09ORklHKDAp
KTsKLQlEVU1QUkVHKFJGQklfT05PRkZfVElNRSgwKSk7Ci0JRFVNUFJFRyhSRkJJX0NZQ0xFX1RJ
TUUoMCkpOwotCURVTVBSRUcoUkZCSV9EQVRBX0NZQ0xFMSgwKSk7Ci0JRFVNUFJFRyhSRkJJX0RB
VEFfQ1lDTEUyKDApKTsKLQlEVU1QUkVHKFJGQklfREFUQV9DWUNMRTMoMCkpOwotCi0JRFVNUFJF
RyhSRkJJX0NPTkZJRygxKSk7Ci0JRFVNUFJFRyhSRkJJX09OT0ZGX1RJTUUoMSkpOwotCURVTVBS
RUcoUkZCSV9DWUNMRV9USU1FKDEpKTsKLQlEVU1QUkVHKFJGQklfREFUQV9DWUNMRTEoMSkpOwot
CURVTVBSRUcoUkZCSV9EQVRBX0NZQ0xFMigxKSk7Ci0JRFVNUFJFRyhSRkJJX0RBVEFfQ1lDTEUz
KDEpKTsKLQotCURVTVBSRUcoUkZCSV9WU1lOQ19XSURUSCk7Ci0JRFVNUFJFRyhSRkJJX0hTWU5D
X1dJRFRIKTsKLQotCXJmYmlfcnVudGltZV9wdXQoKTsKLSN1bmRlZiBEVU1QUkVHCi19Ci0KLXN0
YXRpYyB2b2lkIHJmYmlfY29uZmlnX2xjZF9tYW5hZ2VyKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2Ug
KmRzc2RldikKLXsKLQlzdHJ1Y3Qgb21hcF9vdmVybGF5X21hbmFnZXIgKm1nciA9IHJmYmkub3V0
cHV0Lm1hbmFnZXI7Ci0Jc3RydWN0IGRzc19sY2RfbWdyX2NvbmZpZyBtZ3JfY29uZmlnOwotCi0J
bWdyX2NvbmZpZy5pb19wYWRfbW9kZSA9IERTU19JT19QQURfTU9ERV9SRkJJOwotCi0JbWdyX2Nv
bmZpZy5zdGFsbG1vZGUgPSB0cnVlOwotCS8qIERvIHdlIG5lZWQgZmlmb2hhbmRjaGVjayBmb3Ig
UkZCST8gKi8KLQltZ3JfY29uZmlnLmZpZm9oYW5kY2hlY2sgPSBmYWxzZTsKLQotCW1ncl9jb25m
aWcudmlkZW9fcG9ydF93aWR0aCA9IHJmYmkucGl4ZWxfc2l6ZTsKLQltZ3JfY29uZmlnLmxjZGVu
X3NpZ19wb2xhcml0eSA9IDA7Ci0KLQlkc3NfbWdyX3NldF9sY2RfY29uZmlnKG1nciwgJm1ncl9j
b25maWcpOwotCi0JLyoKLQkgKiBTZXQgcmZiaS50aW1pbmdzIHdpdGggZGVmYXVsdCB2YWx1ZXMs
IHRoZSB4X3JlcyBhbmQgeV9yZXMgZmllbGRzCi0JICogYXJlIGV4cGVjdGVkIHRvIGJlIGFscmVh
ZHkgY29uZmlndXJlZCBieSB0aGUgcGFuZWwgZHJpdmVyIHZpYQotCSAqIG9tYXBkc3NfcmZiaV9z
ZXRfc2l6ZSgpCi0JICovCi0JcmZiaS50aW1pbmdzLmhzdyA9IDE7Ci0JcmZiaS50aW1pbmdzLmhm
cCA9IDE7Ci0JcmZiaS50aW1pbmdzLmhicCA9IDE7Ci0JcmZiaS50aW1pbmdzLnZzdyA9IDE7Ci0J
cmZiaS50aW1pbmdzLnZmcCA9IDA7Ci0JcmZiaS50aW1pbmdzLnZicCA9IDA7Ci0KLQlyZmJpLnRp
bWluZ3MuaW50ZXJsYWNlID0gZmFsc2U7Ci0JcmZiaS50aW1pbmdzLmhzeW5jX2xldmVsID0gT01B
UERTU19TSUdfQUNUSVZFX0hJR0g7Ci0JcmZiaS50aW1pbmdzLnZzeW5jX2xldmVsID0gT01BUERT
U19TSUdfQUNUSVZFX0hJR0g7Ci0JcmZiaS50aW1pbmdzLmRhdGFfcGNsa19lZGdlID0gT01BUERT
U19EUklWRV9TSUdfUklTSU5HX0VER0U7Ci0JcmZiaS50aW1pbmdzLmRlX2xldmVsID0gT01BUERT
U19TSUdfQUNUSVZFX0hJR0g7Ci0JcmZiaS50aW1pbmdzLnN5bmNfcGNsa19lZGdlID0gT01BUERT
U19EUklWRV9TSUdfRkFMTElOR19FREdFOwotCi0JZHNzX21ncl9zZXRfdGltaW5ncyhtZ3IsICZy
ZmJpLnRpbWluZ3MpOwotfQotCi1zdGF0aWMgaW50IHJmYmlfZGlzcGxheV9lbmFibGUoc3RydWN0
IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2KQotewotCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKm91
dCA9ICZyZmJpLm91dHB1dDsKLQlpbnQgcjsKLQotCWlmIChvdXQtPm1hbmFnZXIgPT0gTlVMTCkg
ewotCQlEU1NFUlIoImZhaWxlZCB0byBlbmFibGUgZGlzcGxheTogbm8gb3V0cHV0L21hbmFnZXJc
biIpOwotCQlyZXR1cm4gLUVOT0RFVjsKLQl9Ci0KLQlyID0gcmZiaV9ydW50aW1lX2dldCgpOwot
CWlmIChyKQotCQlyZXR1cm4gcjsKLQotCXIgPSBkc3NfbWdyX3JlZ2lzdGVyX2ZyYW1lZG9uZV9o
YW5kbGVyKG91dC0+bWFuYWdlciwKLQkJCWZyYW1lZG9uZV9jYWxsYmFjaywgTlVMTCk7Ci0JaWYg
KHIpIHsKLQkJRFNTRVJSKCJjYW4ndCBnZXQgRlJBTUVET05FIGlycVxuIik7Ci0JCWdvdG8gZXJy
MTsKLQl9Ci0KLQlyZmJpX2NvbmZpZ19sY2RfbWFuYWdlcihkc3NkZXYpOwotCi0JcmZiaV9jb25m
aWd1cmVfYnVzKGRzc2Rldi0+cGh5LnJmYmkuY2hhbm5lbCwgcmZiaS5waXhlbF9zaXplLAotCQkJ
cmZiaS5kYXRhX2xpbmVzKTsKLQotCXJmYmlfc2V0X3RpbWluZ3MoZHNzZGV2LT5waHkucmZiaS5j
aGFubmVsLCAmcmZiaS5pbnRmX3RpbWluZ3MpOwotCi0JcmV0dXJuIDA7Ci1lcnIxOgotCXJmYmlf
cnVudGltZV9wdXQoKTsKLQlyZXR1cm4gcjsKLX0KLQotc3RhdGljIHZvaWQgcmZiaV9kaXNwbGF5
X2Rpc2FibGUoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2KQotewotCXN0cnVjdCBvbWFw
X2Rzc19kZXZpY2UgKm91dCA9ICZyZmJpLm91dHB1dDsKLQotCWRzc19tZ3JfdW5yZWdpc3Rlcl9m
cmFtZWRvbmVfaGFuZGxlcihvdXQtPm1hbmFnZXIsCi0JCQlmcmFtZWRvbmVfY2FsbGJhY2ssIE5V
TEwpOwotCi0JcmZiaV9ydW50aW1lX3B1dCgpOwotfQotCi1zdGF0aWMgaW50IHJmYmlfaW5pdF9k
aXNwbGF5KHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldikKLXsKLQlyZmJpLmRzc2Rldltk
c3NkZXYtPnBoeS5yZmJpLmNoYW5uZWxdID0gZHNzZGV2OwotCXJldHVybiAwOwotfQotCi1zdGF0
aWMgdm9pZCByZmJpX2luaXRfb3V0cHV0KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCi17
Ci0Jc3RydWN0IG9tYXBfZHNzX2RldmljZSAqb3V0ID0gJnJmYmkub3V0cHV0OwotCi0Jb3V0LT5k
ZXYgPSAmcGRldi0+ZGV2OwotCW91dC0+aWQgPSBPTUFQX0RTU19PVVRQVVRfREJJOwotCW91dC0+
b3V0cHV0X3R5cGUgPSBPTUFQX0RJU1BMQVlfVFlQRV9EQkk7Ci0Jb3V0LT5uYW1lID0gInJmYmku
MCI7Ci0Jb3V0LT5kaXNwY19jaGFubmVsID0gT01BUF9EU1NfQ0hBTk5FTF9MQ0Q7Ci0Jb3V0LT5v
d25lciA9IFRISVNfTU9EVUxFOwotCi0Jb21hcGRzc19yZWdpc3Rlcl9vdXRwdXQob3V0KTsKLX0K
LQotc3RhdGljIHZvaWQgcmZiaV91bmluaXRfb3V0cHV0KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2Ug
KnBkZXYpCi17Ci0Jc3RydWN0IG9tYXBfZHNzX2RldmljZSAqb3V0ID0gJnJmYmkub3V0cHV0Owot
Ci0Jb21hcGRzc191bnJlZ2lzdGVyX291dHB1dChvdXQpOwotfQotCi0vKiBSRkJJIEhXIElQIGlu
aXRpYWxpc2F0aW9uICovCi1zdGF0aWMgaW50IHJmYmlfYmluZChzdHJ1Y3QgZGV2aWNlICpkZXYs
IHN0cnVjdCBkZXZpY2UgKm1hc3Rlciwgdm9pZCAqZGF0YSkKLXsKLQlzdHJ1Y3QgcGxhdGZvcm1f
ZGV2aWNlICpwZGV2ID0gdG9fcGxhdGZvcm1fZGV2aWNlKGRldik7Ci0JdTMyIHJldjsKLQlzdHJ1
Y3QgcmVzb3VyY2UgKnJmYmlfbWVtOwotCXN0cnVjdCBjbGsgKmNsazsKLQlpbnQgcjsKLQotCXJm
YmkucGRldiA9IHBkZXY7Ci0KLQlzZW1hX2luaXQoJnJmYmkuYnVzX2xvY2ssIDEpOwotCi0JcmZi
aV9tZW0gPSBwbGF0Zm9ybV9nZXRfcmVzb3VyY2UocmZiaS5wZGV2LCBJT1JFU09VUkNFX01FTSwg
MCk7Ci0JaWYgKCFyZmJpX21lbSkgewotCQlEU1NFUlIoImNhbid0IGdldCBJT1JFU09VUkNFX01F
TSBSRkJJXG4iKTsKLQkJcmV0dXJuIC1FSU5WQUw7Ci0JfQotCi0JcmZiaS5iYXNlID0gZGV2bV9p
b3JlbWFwKCZwZGV2LT5kZXYsIHJmYmlfbWVtLT5zdGFydCwKLQkJCQkgcmVzb3VyY2Vfc2l6ZShy
ZmJpX21lbSkpOwotCWlmICghcmZiaS5iYXNlKSB7Ci0JCURTU0VSUigiY2FuJ3QgaW9yZW1hcCBS
RkJJXG4iKTsKLQkJcmV0dXJuIC1FTk9NRU07Ci0JfQotCi0JY2xrID0gY2xrX2dldCgmcGRldi0+
ZGV2LCAiaWNrIik7Ci0JaWYgKElTX0VSUihjbGspKSB7Ci0JCURTU0VSUigiY2FuJ3QgZ2V0IGlj
a1xuIik7Ci0JCXJldHVybiBQVFJfRVJSKGNsayk7Ci0JfQotCi0JcmZiaS5sNF9raHogPSBjbGtf
Z2V0X3JhdGUoY2xrKSAvIDEwMDA7Ci0KLQljbGtfcHV0KGNsayk7Ci0KLQlwbV9ydW50aW1lX2Vu
YWJsZSgmcGRldi0+ZGV2KTsKLQotCXIgPSByZmJpX3J1bnRpbWVfZ2V0KCk7Ci0JaWYgKHIpCi0J
CWdvdG8gZXJyX3J1bnRpbWVfZ2V0OwotCi0JbXNsZWVwKDEwKTsKLQotCXJldiA9IHJmYmlfcmVh
ZF9yZWcoUkZCSV9SRVZJU0lPTik7Ci0JZGV2X2RiZygmcGRldi0+ZGV2LCAiT01BUCBSRkJJIHJl
diAlZC4lZFxuIiwKLQkgICAgICAgRkxEX0dFVChyZXYsIDcsIDQpLCBGTERfR0VUKHJldiwgMywg
MCkpOwotCi0JcmZiaV9ydW50aW1lX3B1dCgpOwotCi0JZHNzX2RlYnVnZnNfY3JlYXRlX2ZpbGUo
InJmYmkiLCByZmJpX2R1bXBfcmVncyk7Ci0KLQlyZmJpX2luaXRfb3V0cHV0KHBkZXYpOwotCi0J
cmV0dXJuIDA7Ci0KLWVycl9ydW50aW1lX2dldDoKLQlwbV9ydW50aW1lX2Rpc2FibGUoJnBkZXYt
PmRldik7Ci0JcmV0dXJuIHI7Ci19Ci0KLXN0YXRpYyB2b2lkIHJmYmlfdW5iaW5kKHN0cnVjdCBk
ZXZpY2UgKmRldiwgc3RydWN0IGRldmljZSAqbWFzdGVyLCB2b2lkICpkYXRhKQotewotCXN0cnVj
dCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYgPSB0b19wbGF0Zm9ybV9kZXZpY2UoZGV2KTsKLQotCXJm
YmlfdW5pbml0X291dHB1dChwZGV2KTsKLQotCXBtX3J1bnRpbWVfZGlzYWJsZSgmcGRldi0+ZGV2
KTsKLQotCXJldHVybiAwOwotfQotCi1zdGF0aWMgY29uc3Qgc3RydWN0IGNvbXBvbmVudF9vcHMg
cmZiaV9jb21wb25lbnRfb3BzID0gewotCS5iaW5kCT0gcmZiaV9iaW5kLAotCS51bmJpbmQJPSBy
ZmJpX3VuYmluZCwKLX07Ci0KLXN0YXRpYyBpbnQgcmZiaV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1f
ZGV2aWNlICpwZGV2KQotewotCXJldHVybiBjb21wb25lbnRfYWRkKCZwZGV2LT5kZXYsICZyZmJp
X2NvbXBvbmVudF9vcHMpOwotfQotCi1zdGF0aWMgaW50IHJmYmlfcmVtb3ZlKHN0cnVjdCBwbGF0
Zm9ybV9kZXZpY2UgKnBkZXYpCi17Ci0JY29tcG9uZW50X2RlbCgmcGRldi0+ZGV2LCAmcmZiaV9j
b21wb25lbnRfb3BzKTsKLQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIGludCByZmJpX3J1bnRpbWVf
c3VzcGVuZChzdHJ1Y3QgZGV2aWNlICpkZXYpCi17Ci0JZGlzcGNfcnVudGltZV9wdXQoKTsKLQot
CXJldHVybiAwOwotfQotCi1zdGF0aWMgaW50IHJmYmlfcnVudGltZV9yZXN1bWUoc3RydWN0IGRl
dmljZSAqZGV2KQotewotCWludCByOwotCi0JciA9IGRpc3BjX3J1bnRpbWVfZ2V0KCk7Ci0JaWYg
KHIgPCAwKQotCQlyZXR1cm4gcjsKLQotCXJldHVybiAwOwotfQotCi1zdGF0aWMgY29uc3Qgc3Ry
dWN0IGRldl9wbV9vcHMgcmZiaV9wbV9vcHMgPSB7Ci0JLnJ1bnRpbWVfc3VzcGVuZCA9IHJmYmlf
cnVudGltZV9zdXNwZW5kLAotCS5ydW50aW1lX3Jlc3VtZSA9IHJmYmlfcnVudGltZV9yZXN1bWUs
Ci19OwotCi1zdGF0aWMgc3RydWN0IHBsYXRmb3JtX2RyaXZlciBvbWFwX3JmYmlod19kcml2ZXIg
PSB7Ci0JLnByb2JlCQk9IHJmYmlfcHJvYmUsCi0JLnJlbW92ZSAgICAgICAgID0gcmZiaV9yZW1v
dmUsCi0JLmRyaXZlciAgICAgICAgID0gewotCQkubmFtZSAgID0gIm9tYXBkc3NfcmZiaSIsCi0J
CS5wbQk9ICZyZmJpX3BtX29wcywKLQkJLnN1cHByZXNzX2JpbmRfYXR0cnMgPSB0cnVlLAotCX0s
Ci19OwotCi1pbnQgX19pbml0IHJmYmlfaW5pdF9wbGF0Zm9ybV9kcml2ZXIodm9pZCkKLXsKLQly
ZXR1cm4gcGxhdGZvcm1fZHJpdmVyX3JlZ2lzdGVyKCZvbWFwX3JmYmlod19kcml2ZXIpOwotfQot
Ci12b2lkIHJmYmlfdW5pbml0X3BsYXRmb3JtX2RyaXZlcih2b2lkKQotewotCXBsYXRmb3JtX2Ry
aXZlcl91bnJlZ2lzdGVyKCZvbWFwX3JmYmlod19kcml2ZXIpOwotfQpJbmRleDogYi9pbmNsdWRl
L3ZpZGVvL29tYXBmYl9kc3MuaAo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBhL2luY2x1ZGUvdmlkZW8vb21hcGZi
X2Rzcy5oCisrKyBiL2luY2x1ZGUvdmlkZW8vb21hcGZiX2Rzcy5oCkBAIC0xMTQsMTEgKzExNCw2
IEBAIGVudW0gb21hcF9kc3NfdHJhbnNfa2V5X3R5cGUgewogCU9NQVBfRFNTX0NPTE9SX0tFWV9W
SURfU1JDID0gMSwKIH07CiAKLWVudW0gb21hcF9yZmJpX3RlX21vZGUgewotCU9NQVBfRFNTX1JG
QklfVEVfTU9ERV8xID0gMSwKLQlPTUFQX0RTU19SRkJJX1RFX01PREVfMiA9IDIsCi19OwotCiBl
bnVtIG9tYXBfZHNzX3NpZ25hbF9sZXZlbCB7CiAJT01BUERTU19TSUdfQUNUSVZFX0xPVywKIAlP
TUFQRFNTX1NJR19BQ1RJVkVfSElHSCwKQEAgLTE4OSwyNyArMTg0LDYgQEAgZW51bSBvbWFwX2Rz
c19vdXRwdXRfaWQgewogCU9NQVBfRFNTX09VVFBVVF9IRE1JCT0gMSA8PCA2LAogfTsKIAotLyog
UkZCSSAqLwotCi1zdHJ1Y3QgcmZiaV90aW1pbmdzIHsKLQlpbnQgY3Nfb25fdGltZTsKLQlpbnQg
Y3Nfb2ZmX3RpbWU7Ci0JaW50IHdlX29uX3RpbWU7Ci0JaW50IHdlX29mZl90aW1lOwotCWludCBy
ZV9vbl90aW1lOwotCWludCByZV9vZmZfdGltZTsKLQlpbnQgd2VfY3ljbGVfdGltZTsKLQlpbnQg
cmVfY3ljbGVfdGltZTsKLQlpbnQgY3NfcHVsc2Vfd2lkdGg7Ci0JaW50IGFjY2Vzc190aW1lOwot
Ci0JaW50IGNsa19kaXY7Ci0KLQl1MzIgdGltWzVdOyAgICAgICAgICAgICAvKiBzZXQgYnkgcmZi
aV9jb252ZXJ0X3RpbWluZ3MoKSAqLwotCi0JaW50IGNvbnZlcnRlZDsKLX07Ci0KIC8qIERTSSAq
LwogCiBlbnVtIG9tYXBfZHNzX2RzaV90cmFuc19tb2RlIHsKQEAgLTY0MSwxMSArNjE1LDYgQEAg
c3RydWN0IG9tYXBfZHNzX2RldmljZSB7CiAJCX0gZHBpOwogCiAJCXN0cnVjdCB7Ci0JCQl1OCBj
aGFubmVsOwotCQkJdTggZGF0YV9saW5lczsKLQkJfSByZmJpOwotCi0JCXN0cnVjdCB7CiAJCQl1
OCBkYXRhcGFpcnM7CiAJCX0gc2RpOwogCkBAIC02NjgsNyArNjM3LDYgQEAgc3RydWN0IG9tYXBf
ZHNzX2RldmljZSB7CiAKIAlzdHJ1Y3QgewogCQl1OCBwaXhlbF9zaXplOwotCQlzdHJ1Y3QgcmZi
aV90aW1pbmdzIHJmYmlfdGltaW5nczsKIAl9IGN0cmw7CiAKIAljb25zdCBjaGFyICpuYW1lOwoK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZl
bCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
