Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9DA414750F
	for <lists+dri-devel@lfdr.de>; Sun, 16 Jun 2019 16:03:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2BD09892A6;
	Sun, 16 Jun 2019 14:02:48 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from onstation.org (onstation.org [52.200.56.107])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3DF97890D2;
 Sun, 16 Jun 2019 13:29:48 +0000 (UTC)
Received: from localhost.localdomain (c-98-239-145-235.hsd1.wv.comcast.net
 [98.239.145.235])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: masneyb)
 by onstation.org (Postfix) with ESMTPSA id EAA6B3EA09;
 Sun, 16 Jun 2019 13:29:46 +0000 (UTC)
From: Brian Masney <masneyb@onstation.org>
To: agross@kernel.org, david.brown@linaro.org, robdclark@gmail.com,
 sean@poorly.run, robh+dt@kernel.org
Subject: [PATCH 3/6] firmware: qcom: scm: add support to restore secure config
Date: Sun, 16 Jun 2019 09:29:27 -0400
Message-Id: <20190616132930.6942-4-masneyb@onstation.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190616132930.6942-1-masneyb@onstation.org>
References: <20190616132930.6942-1-masneyb@onstation.org>
MIME-Version: 1.0
X-Mailman-Approved-At: Sun, 16 Jun 2019 14:01:48 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=onstation.org; s=default; t=1560691787;
 bh=IvihjvxJrpflaZx8L6IactS1thBLIM/+BYBN9VVX/oE=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=HK+XvpQX8trVvroDCRyK56lSu0KgsbaSsefd8SPk6qv2oMdAFMXfbUyMfNib26j4j
 nR3xOCe7NlhD1i2stlnjDRV6YYC+v0g7j9/p5E0CRb5II9FczIo1iWUkekdtszh5St
 cWXKBCCNfXmWw9JasfMm9MguyjZ1CxEU2JwDG410=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org, jonathan@marek.ca,
 airlied@linux.ie, linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, bjorn.andersson@linaro.org,
 freedreno@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9iIENsYXJrIDxyb2JkY2xhcmtAZ21haWwuY29tPgoKQWRkIHN1cHBvcnQgdG8gcmVz
dG9yZSB0aGUgc2VjdXJlIGNvbmZpZ3VyYXRpb24gdGhhdCBpcyBuZWVkZWQgYnkgdGhlCk9uIENo
aXAgTUVNb3J5IChPQ01FTSkgdGhhdCBpcyBwcmVzZW50IG9uIHNvbWUgU25hcGRyYWdvbiBkZXZp
Y2VzLgoKU2lnbmVkLW9mZi1ieTogUm9iIENsYXJrIDxyb2JkY2xhcmtAZ21haWwuY29tPgpbbWFz
bmV5YkBvbnN0YXRpb24ub3JnOiBwb3J0ZWQgdG8gbGF0ZXN0IGtlcm5lbDsgbWlub3IgcmVmb3Jt
YXR0aW5nLl0KU2lnbmVkLW9mZi1ieTogQnJpYW4gTWFzbmV5IDxtYXNuZXliQG9uc3RhdGlvbi5v
cmc+Ci0tLQpSb2IncyBsYXN0IHZlcnNpb24gb2YgdGhpcyBwYXRjaDoKaHR0cHM6Ly9wYXRjaHdv
cmsua2VybmVsLm9yZy9wYXRjaC83MzQwNzAxLwoKIGRyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20t
MzIuYyB8IDIxICsrKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9maXJtd2FyZS9xY29tX3Nj
bS02NC5jIHwgIDYgKysrKysrCiBkcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMgICAgfCAyMyAr
KysrKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS5oICAgIHwg
IDYgKysrKysrCiBpbmNsdWRlL2xpbnV4L3Fjb21fc2NtLmggICAgICAgfCAxMyArKysrKysrKysr
KysrCiA1IGZpbGVzIGNoYW5nZWQsIDY5IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLTMyLmMgYi9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLTMy
LmMKaW5kZXggMjE1MDYxYzU4MWUxLi4wODliNDcxMjQ5MzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
ZmlybXdhcmUvcWNvbV9zY20tMzIuYworKysgYi9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLTMy
LmMKQEAgLTQ0Miw2ICs0NDIsMjcgQEAgaW50IF9fcWNvbV9zY21faGRjcF9yZXEoc3RydWN0IGRl
dmljZSAqZGV2LCBzdHJ1Y3QgcWNvbV9zY21faGRjcF9yZXEgKnJlcSwKIAkJcmVxLCByZXFfY250
ICogc2l6ZW9mKCpyZXEpLCByZXNwLCBzaXplb2YoKnJlc3ApKTsKIH0KIAoraW50IF9fcWNvbV9z
Y21fcmVzdG9yZV9zZWNfY29uZmlnKHN0cnVjdCBkZXZpY2UgKmRldiwgdTMyIHNlY19pZCwKKwkJ
CQkgIHUzMiBjdHhfYmFua19udW0pCit7CisJc3RydWN0IG1zbV9zY21fc2VjX2NmZyB7CisJCV9f
bGUzMiBpZDsKKwkJX19sZTMyIGN0eF9iYW5rX251bTsKKwl9IGNmZzsKKwlpbnQgcmV0LCBzY21f
cmV0ID0gMDsKKworCWNmZy5pZCA9IGNwdV90b19sZTMyKHNlY19pZCk7CisJY2ZnLmN0eF9iYW5r
X251bSA9IGNwdV90b19sZTMyKHNlY19pZCk7CisKKwlyZXQgPSBxY29tX3NjbV9jYWxsKGRldiwg
UUNPTV9TQ01fTVBfU1ZDLCBRQ09NX1NDTV9NUF9SRVNUT1JFX1NFQ19DRkcsCisJCQkgICAgJmNm
Zywgc2l6ZW9mKGNmZyksICZzY21fcmV0LCBzaXplb2Yoc2NtX3JldCkpOworCisJaWYgKHJldCB8
fCBzY21fcmV0KQorCQlyZXR1cm4gcmV0ID8gcmV0IDogLUVJTlZBTDsKKworCXJldHVybiAwOwor
fQorCiB2b2lkIF9fcWNvbV9zY21faW5pdCh2b2lkKQogewogfQpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9maXJtd2FyZS9xY29tX3NjbS02NC5jIGIvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS02NC5j
CmluZGV4IDkxZDVhZDdjZjU4Yi4uYjZiNzhkYTdmOWM5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2Zp
cm13YXJlL3Fjb21fc2NtLTY0LmMKKysrIGIvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS02NC5j
CkBAIC0yNDEsNiArMjQxLDEyIEBAIGludCBfX3Fjb21fc2NtX2hkY3BfcmVxKHN0cnVjdCBkZXZp
Y2UgKmRldiwgc3RydWN0IHFjb21fc2NtX2hkY3BfcmVxICpyZXEsCiAJcmV0dXJuIHJldDsKIH0K
IAoraW50IF9fcWNvbV9zY21fcmVzdG9yZV9zZWNfY29uZmlnKHN0cnVjdCBkZXZpY2UgKmRldiwg
dTMyIHNlY19pZCwKKwkJCQkgIHUzMiBjdHhfYmFua19udW0pCit7CisJcmV0dXJuIC1FTk9UU1VQ
UDsKK30KKwogdm9pZCBfX3Fjb21fc2NtX2luaXQodm9pZCkKIHsKIAl1NjQgY21kOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS5jIGIvZHJpdmVycy9maXJtd2FyZS9xY29t
X3NjbS5jCmluZGV4IDJkZGMxMThkYmExYi4uNTQ5NWVmOTk0YzVkIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMKKysrIGIvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS5j
CkBAIC0xNzAsNiArMTcwLDI5IEBAIGludCBxY29tX3NjbV9oZGNwX3JlcShzdHJ1Y3QgcWNvbV9z
Y21faGRjcF9yZXEgKnJlcSwgdTMyIHJlcV9jbnQsIHUzMiAqcmVzcCkKIH0KIEVYUE9SVF9TWU1C
T0wocWNvbV9zY21faGRjcF9yZXEpOwogCisvKioKKyAqIHFjb21fc2NtX3Jlc3RvcmVfc2VjX2Nv
bmZpZ19hdmFpbGFibGUoKSAtIENoZWNrIGlmIHNlY3VyZSBlbnZpcm9ubWVudAorICogc3VwcG9y
dHMgcmVzdG9yZSBzZWN1cml0eSBjb25maWcgaW50ZXJmYWNlLgorICoKKyAqIFJldHVybiB0cnVl
IGlmIHJlc3RvcmUtY2ZnIGludGVyZmFjZSBpcyBzdXBwb3J0ZWQsIGZhbHNlIGlmIG5vdC4KKyAq
LworYm9vbCBxY29tX3NjbV9yZXN0b3JlX3NlY19jb25maWdfYXZhaWxhYmxlKHZvaWQpCit7CisJ
cmV0dXJuIF9fcWNvbV9zY21faXNfY2FsbF9hdmFpbGFibGUoX19zY20tPmRldiwgUUNPTV9TQ01f
TVBfU1ZDLAorCQkJCQkgICAgUUNPTV9TQ01fTVBfUkVTVE9SRV9TRUNfQ0ZHKTsKK30KK0VYUE9S
VF9TWU1CT0wocWNvbV9zY21fcmVzdG9yZV9zZWNfY29uZmlnX2F2YWlsYWJsZSk7CisKKy8qKgor
ICogcWNvbV9zY21fcmVzdG9yZV9zZWNfY29uZmlnKCkgLSBjYWxsIHJlc3RvcmUtY2ZnIGludGVy
ZmFjZQorICovCitpbnQgcWNvbV9zY21fcmVzdG9yZV9zZWNfY29uZmlnKHN0cnVjdCBkZXZpY2Ug
KmRldiwKKwkJCQllbnVtIHFjb21fc2NtX3NlY19kZXZfaWQgc2VjX2lkKQoreworCXJldHVybiBf
X3Fjb21fc2NtX3Jlc3RvcmVfc2VjX2NvbmZpZyhkZXYsIHNlY19pZCwgMCk7Cit9CitFWFBPUlRf
U1lNQk9MKHFjb21fc2NtX3Jlc3RvcmVfc2VjX2NvbmZpZyk7CisKIC8qKgogICogcWNvbV9zY21f
cGFzX3N1cHBvcnRlZCgpIC0gQ2hlY2sgaWYgdGhlIHBlcmlwaGVyYWwgYXV0aGVudGljYXRpb24g
c2VydmljZSBpcwogICoJCQkgICAgICBhdmFpbGFibGUgZm9yIHRoZSBnaXZlbiBwZXJpcGhlcmlh
bApkaWZmIC0tZ2l0IGEvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS5oIGIvZHJpdmVycy9maXJt
d2FyZS9xY29tX3NjbS5oCmluZGV4IDk5NTA2YmQ4NzNjMC4uYmNjYzdkMTBjNWMyIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmgKKysrIGIvZHJpdmVycy9maXJtd2FyZS9x
Y29tX3NjbS5oCkBAIC00Miw2ICs0MiwxMiBAQCBleHRlcm4gaW50IF9fcWNvbV9zY21faGRjcF9y
ZXEoc3RydWN0IGRldmljZSAqZGV2LAogCiBleHRlcm4gdm9pZCBfX3Fjb21fc2NtX2luaXQodm9p
ZCk7CiAKKyNkZWZpbmUgUUNPTV9TQ01fTVBfU1ZDCQkJMHhjCisjZGVmaW5lIFFDT01fU0NNX01Q
X1JFU1RPUkVfU0VDX0NGRwkweDIKKworZXh0ZXJuIGludCBfX3Fjb21fc2NtX3Jlc3RvcmVfc2Vj
X2NvbmZpZyhzdHJ1Y3QgZGV2aWNlICpkZXYsIHUzMiBzZWNfaWQsCisJCQkJCSB1MzIgY3R4X2Jh
bmtfbnVtKTsKKwogI2RlZmluZSBRQ09NX1NDTV9TVkNfUElMCQkweDIKICNkZWZpbmUgUUNPTV9T
Q01fUEFTX0lOSVRfSU1BR0VfQ01ECTB4MQogI2RlZmluZSBRQ09NX1NDTV9QQVNfTUVNX1NFVFVQ
X0NNRAkweDIKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvcWNvbV9zY20uaCBiL2luY2x1ZGUv
bGludXgvcWNvbV9zY20uaAppbmRleCAzZjEyY2M3N2ZiNTguLmI1YzBhZmFjYTk1NSAxMDA2NDQK
LS0tIGEvaW5jbHVkZS9saW51eC9xY29tX3NjbS5oCisrKyBiL2luY2x1ZGUvbGludXgvcWNvbV9z
Y20uaApAQCAtMjQsNiArMjQsMTYgQEAgc3RydWN0IHFjb21fc2NtX3ZtcGVybSB7CiAJaW50IHBl
cm07CiB9OwogCitlbnVtIHFjb21fc2NtX3NlY19kZXZfaWQgeworCVFDT01fU0NNX01EU1NfREVW
X0lECT0gMSwKKwlRQ09NX1NDTV9PQ01FTV9ERVZfSUQJPSA1LAorCVFDT01fU0NNX1BDSUUwX0RF
Vl9JRAk9IDExLAorCVFDT01fU0NNX1BDSUUxX0RFVl9JRAk9IDEyLAorCVFDT01fU0NNX0dGWF9E
RVZfSUQJPSAxOCwKKwlRQ09NX1NDTV9VRlNfREVWX0lECT0gMTksCisJUUNPTV9TQ01fSUNFX0RF
Vl9JRAk9IDIwLAorfTsKKwogI2RlZmluZSBRQ09NX1NDTV9WTUlEX0hMT1MgICAgICAgMHgzCiAj
ZGVmaW5lIFFDT01fU0NNX1ZNSURfTVNTX01TQSAgICAweEYKICNkZWZpbmUgUUNPTV9TQ01fVk1J
RF9XTEFOICAgICAgIDB4MTgKQEAgLTQxLDYgKzUxLDkgQEAgZXh0ZXJuIGJvb2wgcWNvbV9zY21f
aXNfYXZhaWxhYmxlKHZvaWQpOwogZXh0ZXJuIGJvb2wgcWNvbV9zY21faGRjcF9hdmFpbGFibGUo
dm9pZCk7CiBleHRlcm4gaW50IHFjb21fc2NtX2hkY3BfcmVxKHN0cnVjdCBxY29tX3NjbV9oZGNw
X3JlcSAqcmVxLCB1MzIgcmVxX2NudCwKIAkJCSAgICAgdTMyICpyZXNwKTsKK2V4dGVybiBib29s
IHFjb21fc2NtX3Jlc3RvcmVfc2VjX2NvbmZpZ19hdmFpbGFibGUodm9pZCk7CitleHRlcm4gaW50
IHFjb21fc2NtX3Jlc3RvcmVfc2VjX2NvbmZpZyhzdHJ1Y3QgZGV2aWNlICpkZXYsCisJCQkJICAg
ICAgIGVudW0gcWNvbV9zY21fc2VjX2Rldl9pZCBzZWNfaWQpOwogZXh0ZXJuIGJvb2wgcWNvbV9z
Y21fcGFzX3N1cHBvcnRlZCh1MzIgcGVyaXBoZXJhbCk7CiBleHRlcm4gaW50IHFjb21fc2NtX3Bh
c19pbml0X2ltYWdlKHUzMiBwZXJpcGhlcmFsLCBjb25zdCB2b2lkICptZXRhZGF0YSwKIAkJCQkg
ICBzaXplX3Qgc2l6ZSk7Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2RyaS1kZXZlbA==
