Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B5683B4815
	for <lists+dri-devel@lfdr.de>; Tue, 17 Sep 2019 09:18:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 942E96EAFF;
	Tue, 17 Sep 2019 07:17:30 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x430.google.com (mail-pf1-x430.google.com
 [IPv6:2607:f8b0:4864:20::430])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 076776E8EC
 for <dri-devel@lists.freedesktop.org>; Mon, 16 Sep 2019 10:14:22 +0000 (UTC)
Received: by mail-pf1-x430.google.com with SMTP id y5so19957224pfo.4
 for <dri-devel@lists.freedesktop.org>; Mon, 16 Sep 2019 03:14:22 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:from:date:message-id:subject:to;
 bh=620ST/xQjaI/WsbRm2XByLYUJa1eIHSd2TpZRpjp1ks=;
 b=rZWU3mfaXJHgt37JbYYXJ382T/LqRHOPlL78WZLnEV8eyCS1EHQZ9DqtO31SBzjUiQ
 z2RxsG1/34AMjsvL/F6CTYkVOalxwiGxp5npEukw1cygVk5y017V0vi2JZtfjPt9dK3y
 bk04FGiF0HhuijmymWRODKiZgy4U/rAJJPzdONRJxRqWFOYoqGXC2qcRWBgE3MBDOntV
 MeRqS9vq2LP8ST3mU1qsp93bFBw2Pxgw6bE7wZD5BLGvGebyWEz9/01TMYsz/t5GFEWq
 DhFt1PtwkOKo49tgKQ82B+6twIPfMc494uEolNY2IkIcZkXbqgQS9q9CU/LaSgkOzD9A
 /U+w==
X-Gm-Message-State: APjAAAXZnVDMD9LQHvX71wchVHwoGDwjSmBhkUPKILTrHmOylx5EJ82p
 SVgk9RvVlty05TAb/5FKWtFk0NjC5N9D6JUyO2J4dQ==
X-Google-Smtp-Source: APXvYqz727OpesJGVd5fgqlDn2xcDUrMCnVzvG3nKqCfa0j4cT3W+MkCf7SUGJa7mNsM/Xelw6pvnYZrIKsjItM0AmI=
X-Received: by 2002:a17:90a:d356:: with SMTP id
 i22mr18998456pjx.24.1568628861521; 
 Mon, 16 Sep 2019 03:14:21 -0700 (PDT)
MIME-Version: 1.0
From: Jerry Han <jerry.han.hq@gmail.com>
Date: Mon, 16 Sep 2019 18:14:10 +0800
Message-ID: <CA+quO7+CN4NJKuQWiAPrpDmcThCr1bKQB+bmEMjjHbLoTq36oQ@mail.gmail.com>
Subject: [PATCH 1/9] [v10, 1/9] drm/panel:Add Boe Himax8279d MIPI-DSI LCD panel
To: ML dri-devel <dri-devel@lists.freedesktop.org>, 
 Jerry Han <hanxu5@huaqin.corp-partner.google.com>,
 Jitao Shi <jitao.shi@mediatek.com>, 
 Derek Basehore <dbasehore@chromium.org>, Rock wang <rock_wang@himax.com.cn>, 
 Emil Velikov <emil.l.velikov@gmail.com>
Content-Type: multipart/mixed; boundary="000000000000136e840592a8de26"
X-Mailman-Approved-At: Tue, 17 Sep 2019 07:17:12 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:from:date:message-id:subject:to;
 bh=620ST/xQjaI/WsbRm2XByLYUJa1eIHSd2TpZRpjp1ks=;
 b=cTeJkstC0JTvO/vqI+CNmShHMkV9OsLf0acY4RACnSYfVV+yIApnxw3oIaiMnot1ok
 Ai2uAqbEPM1Diiv/ZVjhxE40eQqeAh/n9MczkUlJuYm7fSbFmiw+7V/F+PU1m1D3Cdc1
 HFjnx7c9geTFHNCk6b9nMR/4sY9Kh+8liMF904MR9R3U+/ByezktqELT/kIxZ9mfL0k4
 cyTip6dKp2v4BCymXDT3C/WrmrSx39RQbwZaQAAF+6ddsRwkTX/yyGYWDP7MJFnkgaiD
 MTVLjnCEkO1MzED3iZOy0fJkn3Yy+po5AMp7DW9ABXqddjIVhrJ7lSbvhYws11FDkfo8
 aVPw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

--000000000000136e840592a8de26
Content-Type: text/plain; charset="UTF-8"



--000000000000136e840592a8de26
Content-Type: application/octet-stream; 
	name="0001-v10-1-9-drm-panel-Add-Boe-Himax8279d-MIPI-DSI-LCD-pa.patch"
Content-Disposition: attachment; 
	filename="0001-v10-1-9-drm-panel-Add-Boe-Himax8279d-MIPI-DSI-LCD-pa.patch"
Content-Transfer-Encoding: base64
Content-ID: <f_k0m942xp0>
X-Attachment-Id: f_k0m942xp0

RnJvbSA2ZmUxOWRmYmY1OGY2OTg3NGE1YzdmMTY2M2U4OGIwOThlZTk4MjgxIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBKZXJyeSBIYW4gPGplcnJ5Lmhhbi5ocUBnbWFpbC5jb20+CkRh
dGU6IE1vbiwgMTYgU2VwIDIwMTkgMTY6MzU6NTQgKzA4MDAKU3ViamVjdDogW1BBVENIIDEvOV0g
W3YxMCwxLzldIGRybS9wYW5lbDpBZGQgQm9lIEhpbWF4ODI3OWQgTUlQSS1EU0kgTENEIHBhbmVs
CgpBZGQgcGFuZWwgZHJpdmVyIGZvciBpdC4KClNpZ25lZC1vZmYtYnk6IEplcnJ5IEhhbiA8aGFu
eHU1QGh1YXFpbi5jb3JwLXBhcnRuZXIuZ29vZ2xlLmNvbT4KLS0tCiBNQUlOVEFJTkVSUyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgNiArCiBkcml2ZXJzL2dwdS9kcm0vcGFu
ZWwvS2NvbmZpZyAgICAgICAgICAgICAgICB8ICAxMSArCiBkcml2ZXJzL2dwdS9kcm0vcGFuZWwv
TWFrZWZpbGUgICAgICAgICAgICAgICB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFu
ZWwtYm9lLWhpbWF4ODI3OWQuYyB8IDU5MyArKysrKysrKysrKysrKysrKysrCiA0IGZpbGVzIGNo
YW5nZWQsIDYxMSBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUv
ZHJtL3BhbmVsL3BhbmVsLWJvZS1oaW1heDgyNzlkLmMKCmRpZmYgLS1naXQgYS9NQUlOVEFJTkVS
UyBiL01BSU5UQUlORVJTCmluZGV4IDI4ZjRhMjA5NDBjYi4uN2M2YWMxOGI5MjJlIDEwMDY0NAot
LS0gYS9NQUlOVEFJTkVSUworKysgYi9NQUlOVEFJTkVSUwpAQCAtNTExMCw2ICs1MTEwLDEyIEBA
IFM6CU1haW50YWluZWQKIEY6CWRyaXZlcnMvZ3B1L2RybS90aW55L2lsaTkyMjUuYwogRjoJRG9j
dW1lbnRhdGlvbi9kZXZpY2V0cmVlL2JpbmRpbmdzL2Rpc3BsYXkvaWxpdGVrLGlsaTkyMjUudHh0
CiAKK0RSTSBEUklWRVIgRk9SIEJPRSBISU1BWDgyNzlEIFBBTkVMUworTToJSmVycnkgSGFuIDxo
YW54dTVAaHVhcWluLmNvcnAtcGFydG5lci5nb29nbGUuY29tPgorUzoJTWFpbnRhaW5lZAorRjoJ
ZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWJvZS1oaW1heDgyNzlkLmMKK0Y6CURvY3VtZW50
YXRpb24vZGV2aWNldHJlZS9iaW5kaW5ncy9kaXNwbGF5L3BhbmVsL2JvZSxoaW1heDgyNzlkLnR4
dAorCiBEUk0gRFJJVkVSIEZPUiBIWDgzNTdEIFBBTkVMUwogTToJRXJpYyBBbmhvbHQgPGVyaWNA
YW5ob2x0Lm5ldD4KIFQ6CWdpdCBnaXQ6Ly9hbm9uZ2l0LmZyZWVkZXNrdG9wLm9yZy9kcm0vZHJt
LW1pc2MKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnIGIvZHJpdmVy
cy9ncHUvZHJtL3BhbmVsL0tjb25maWcKaW5kZXggZjE1MmJjNGVlYjUzLi5jZmQ4Yzg4NmZmZjcg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9wYW5lbC9LY29uZmlnCkBAIC0zMzksNiArMzM5LDE3IEBAIGNvbmZpZyBEUk1fUEFO
RUxfVFBPX1REMDQzTVRFQTEKIAkgIFNheSBZIGhlcmUgaWYgeW91IHdhbnQgdG8gZW5hYmxlIHN1
cHBvcnQgZm9yIFRQTyBURDA0M01URUExIDgwMHg0ODAKIAkgIDQuMyIgcGFuZWwgKGZvdW5kIG9u
IHRoZSBPTUFQMyBQYW5kb3JhIGJvYXJkKS4KIAorY29uZmlnIERSTV9QQU5FTF9CT0VfSElNQVg4
Mjc5RAorCXRyaXN0YXRlICJCb2UgSGltYXg4Mjc5ZCBwYW5lbCIKKwlkZXBlbmRzIG9uIE9GCisJ
ZGVwZW5kcyBvbiBEUk1fTUlQSV9EU0kKKwlkZXBlbmRzIG9uIEJBQ0tMSUdIVF9DTEFTU19ERVZJ
Q0UKKwloZWxwCisJICBTYXkgWSBoZXJlIGlmIHlvdSB3YW50IHRvIGVuYWJsZSBzdXBwb3J0IGZv
ciBTYW1lIHR5cGUKKwkgIFRGVC1MQ0QgbW9kdWxlcy4gVGhlIHBhbmVsIGhhcyBhIDEyMDB4MTky
MCByZXNvbHV0aW9uIGFuZCB1c2VzCisJICAyNCBiaXQgUkdCIHBlciBwaXhlbC4gSXQgcHJvdmlk
ZXMgYSBNSVBJIERTSSBpbnRlcmZhY2UgdG8KKwkgIHRoZSBob3N0IGFuZCBoYXMgYSBidWlsdC1p
biBMRUQgYmFja2xpZ2h0LgorCiBjb25maWcgRFJNX1BBTkVMX1RQT19UUEcxMTAKIAl0cmlzdGF0
ZSAiVFBPIFRQRyA4MDB4NDAwIHBhbmVsIgogCWRlcGVuZHMgb24gT0YgJiYgU1BJICYmIEdQSU9M
SUIKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZSBiL2RyaXZlcnMv
Z3B1L2RybS9wYW5lbC9NYWtlZmlsZQppbmRleCBiNmNkMzlmZTBmMjAuLmE3NzFjOTJmODgwYSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9wYW5lbC9NYWtlZmlsZQpAQCAtMzYsNSArMzYsNiBAQCBvYmotJChDT05GSUdfRFJN
X1BBTkVMX1NJVFJPTklYX1NUNzc4OVYpICs9IHBhbmVsLXNpdHJvbml4LXN0Nzc4OXYubwogb2Jq
LSQoQ09ORklHX0RSTV9QQU5FTF9TT05ZX0FDWDU2NUFLTSkgKz0gcGFuZWwtc29ueS1hY3g1NjVh
a20ubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9UUE9fVEQwMjhUVEVDMSkgKz0gcGFuZWwtdHBv
LXRkMDI4dHRlYzEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9UUE9fVEQwNDNNVEVBMSkgKz0g
cGFuZWwtdHBvLXRkMDQzbXRlYTEubworb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9CT0VfSElNQVg4
Mjc5RCkgKz0gcGFuZWwtYm9lLWhpbWF4ODI3OWQubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9U
UE9fVFBHMTEwKSArPSBwYW5lbC10cG8tdHBnMTEwLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxf
VFJVTFlfTlQzNTU5N19XUVhHQSkgKz0gcGFuZWwtdHJ1bHktbnQzNTU5Ny5vCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtYm9lLWhpbWF4ODI3OWQuYyBiL2RyaXZlcnMv
Z3B1L2RybS9wYW5lbC9wYW5lbC1ib2UtaGltYXg4Mjc5ZC5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAwMDAwMC4uMjc4OGJkZGE2OWVjCi0tLSAvZGV2L251bGwKKysrIGIvZHJp
dmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWJvZS1oaW1heDgyNzlkLmMKQEAgLTAsMCArMSw1OTMg
QEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCisvKgorICogQ29weXJpZ2h0
IChjKSAyMDE5LCBIdWFxaW4gRWxlY3Ryb25pY3MgQ28uLCBMdGQKKyAqCisgKiBUaGlzIHByb2dy
YW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlm
eQorICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5z
ZSBhcyBwdWJsaXNoZWQgYnkKKyAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhl
ciB2ZXJzaW9uIDIgb2YgdGhlIExpY2Vuc2UsIG9yCisgKiAoYXQgeW91ciBvcHRpb24pIGFueSBs
YXRlciB2ZXJzaW9uLgorICovCisKKyNpbmNsdWRlIDxsaW51eC9iYWNrbGlnaHQuaD4KKyNpbmNs
dWRlIDxsaW51eC9ncGlvL2NvbnN1bWVyLmg+CisjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+Cisj
aW5jbHVkZSA8bGludXgvb2YuaD4KKyNpbmNsdWRlIDxsaW51eC9vZl9kZXZpY2UuaD4KKyNpbmNs
dWRlIDxsaW51eC9yZWd1bGF0b3IvY29uc3VtZXIuaD4KKworI2luY2x1ZGUgPGRybS9kcm1QLmg+
CisjaW5jbHVkZSA8ZHJtL2RybV9jcnRjLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9taXBpX2RzaS5o
PgorI2luY2x1ZGUgPGRybS9kcm1fcGFuZWwuaD4KKworI2luY2x1ZGUgPHZpZGVvL21pcGlfZGlz
cGxheS5oPgorI2luY2x1ZGUgPGxpbnV4L2Vyci5oPgorCitzdHJ1Y3QgZHNpX2NtZF9kZXNjIHsK
KwljaGFyIHdhaXQ7CisJY2hhciBjbWQ7CisJY2hhciBsZW47CisJY2hhciAqcGF5bG9hZDsKK307
CisKK3N0cnVjdCBkc2lfcGFuZWxfY21kcyB7CisJY2hhciAqYnVmOworCWludCBibGVuOworCXN0
cnVjdCBkc2lfY21kX2Rlc2MgKmNtZHM7CisJaW50IGNtZF9jbnQ7Cit9OworCitzdHJ1Y3QgcGFu
ZWxfaW5mbyB7CisJc3RydWN0IGRybV9wYW5lbCBiYXNlOworCXN0cnVjdCBtaXBpX2RzaV9kZXZp
Y2UgKmxpbms7CisKKwlzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmFja2xpZ2h0OworCXN0cnVj
dCBncGlvX2Rlc2MgKnJlc2V0X2dwaW87CisJc3RydWN0IGdwaW9fZGVzYyAqcHAzMzAwMF9ncGlv
OworCXN0cnVjdCBncGlvX2Rlc2MgKnBwMTgwMDBfZ3BpbzsKKworCXUzMiByc3Rfc2VxWzEwXTsK
Kwl1MzIgcnN0X3NlcV9sZW47CisKKwlzdHJ1Y3QgZHNpX3BhbmVsX2NtZHMgKm9uX2NtZHM7CisJ
c3RydWN0IGRzaV9wYW5lbF9jbWRzICpvZmZfY21kczsKKwlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZQkqcGFuZWxfZGlzcGxheV9tb2RlOworCisJdW5zaWduZWQgaW50IHBhbmVsX3dpZHRoX21tOwor
CXVuc2lnbmVkIGludCBwYW5lbF9oZWlnaHRfbW07CisJdW5zaWduZWQgaW50IHBlcl9jb2xvcl9j
aGFubmVsOworCisJYm9vbCBwcmVwYXJlZDsKKwlib29sIGVuYWJsZWQ7Cit9OworCitzdGF0aWMg
aW50IGRzaV9wYXJzZV9yZXNldF9zZXEoc3RydWN0IGRldmljZV9ub2RlICpucCwgdTMyIHJzdF9z
ZXFbMTBdLAorCQl1MzIgKnJzdF9sZW4sIGNvbnN0IGNoYXIgKm5hbWUpCit7CisJaW50IG51bSA9
IDAsIGk7CisJaW50IHJjOworCXN0cnVjdCBwcm9wZXJ0eSAqZGF0YTsKKwl1MzIgdG1wWzEwXTsK
KwkqcnN0X2xlbiA9IDA7CisJZGF0YSA9IG9mX2ZpbmRfcHJvcGVydHkobnAsIG5hbWUsICZudW0p
OworCisJbnVtIC89IHNpemVvZih1MzIpOworCWlmICghZGF0YSB8fCAhbnVtIHx8IG51bSA+IDEw
IHx8IG51bSAlIDIpIHsKKwkJcHJfZXJyKCIlczolZCwgZXJyb3IgcmVhZGluZyAlcywgbGVuZ3Ro
IGZvdW5kID0gJWRcbiIsCisJCQkJX19mdW5jX18sIF9fTElORV9fLCBuYW1lLCBudW0pOworCQly
ZXR1cm4gLUVJTlZBTDsKKwl9CisKKwlyYyA9IG9mX3Byb3BlcnR5X3JlYWRfdTMyX2FycmF5KG5w
LCBuYW1lLCB0bXAsIG51bSk7CisJaWYgKHJjKSB7CisJCXByX2VycigiJXM6JWQsIGVycm9yIHJl
YWRpbmcgJXMsIHJjID0gJWRcbiIsCisJCQkJCV9fZnVuY19fLCBfX0xJTkVfXywgbmFtZSwgcmMp
OworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwlmb3IgKGkgPSAwOyBpIDwgbnVtOyArK2kpIHsK
KwkJcnN0X3NlcVtpXSA9IHRtcFtpXTsKKwkJKnJzdF9sZW4gPSBudW07CisJfQorCXJldHVybiAw
OworfQorCitzc2l6ZV90IG1pcGlfZHNpX2Rjc193cml0ZV9kZWxheShzdHJ1Y3QgbWlwaV9kc2lf
ZGV2aWNlICpkc2ksIHU4IGNtZCwKKwkJY29uc3Qgdm9pZCAqZGF0YSwgc2l6ZV90IGxlbiwgc2l6
ZV90IHRpbWUpCit7CisJc3NpemVfdCByZXQ7CisKKwlpZiAobGVuID09IDApCisJCXJldCA9IG1p
cGlfZHNpX2Rjc193cml0ZShkc2ksIGNtZCwgTlVMTCwgMCk7CisJZWxzZQorCQlyZXQgPSBtaXBp
X2RzaV9kY3Nfd3JpdGUoZHNpLCBjbWQsIGRhdGEsIGxlbik7CisKKwltc2xlZXAodGltZSk7CisK
KwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IHdyaXRlX2NtZHMoc3RydWN0IG1pcGlfZHNp
X2RldmljZSAqZHNpX2RldmljZSwKKwkJCQkJc3RydWN0IGRzaV9wYW5lbF9jbWRzICppbml0X2Nt
ZHMpCit7CisJc3RydWN0IGRzaV9jbWRfZGVzYyAqb25lX2NtZCA9IGluaXRfY21kcy0+Y21kczsK
KwlpbnQgaSA9IDA7CisJaW50IHJldDsKKworCWZvciAoaSA9IDA7IGkgPCBpbml0X2NtZHMtPmNt
ZF9jbnQ7IGkrKykgeworCQlpZiAob25lX2NtZCA9PSBOVUxMKQorCQkJcmV0dXJuIC1FSU5WQUw7
CisKKwkJcmV0ID0gbWlwaV9kc2lfZGNzX3dyaXRlX2RlbGF5KGRzaV9kZXZpY2UsCisJCQkJb25l
X2NtZC0+Y21kLCBvbmVfY21kLT5wYXlsb2FkLAorCQkJCW9uZV9jbWQtPmxlbiwgb25lX2NtZC0+
d2FpdCk7CisJCW9uZV9jbWQrKzsKKwl9CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50
IHBhcnNlX2Rjc19jbWRzKHN0cnVjdCBkZXZpY2Vfbm9kZSAqbnAsCisJCQkJc3RydWN0IGRzaV9w
YW5lbF9jbWRzICpwY21kcywgY2hhciAqY21kX2tleSkKK3sKKwljb25zdCBjaGFyICpkYXRhOwor
CWludCBibGVuID0gMCwgbGVuLCBjbnQgPSAwOworCWNoYXIgKmJ1ZiwgKmJwOworCXN0cnVjdCBk
c2lfY21kX2Rlc2MgKnRlbXBfY21kOworCisJZGF0YSA9IG9mX2dldF9wcm9wZXJ0eShucCwgY21k
X2tleSwgJmJsZW4pOworCWlmICghZGF0YSkgeworCQlwcl9lcnIoIiVzOiBmYWlsZWQsIGtleT0l
c1xuIiwgX19mdW5jX18sIGNtZF9rZXkpOworCQlyZXR1cm4gLUVOT01FTTsKKwl9CisKKwlidWYg
PSBremFsbG9jKHNpemVvZihjaGFyKSAqIGJsZW4sIEdGUF9LRVJORUwpOworCWlmICghYnVmKQor
CQlyZXR1cm4gLUVOT01FTTsKKworCW1lbWNweShidWYsIGRhdGEsIGJsZW4pOworCisJLyogc2Nh
biBkY3MgY29tbWFuZHMgKi8KKwlicCA9IGJ1ZjsKKwlsZW4gPSBibGVuOworCisJLyogZ2V0IGhv
dyBtdWNoIGNtZCBjbnQgICovCisJd2hpbGUgKGxlbiA+IDApIHsKKwkJY250Kys7CisJCWxlbiA9
IGxlbiAtICooYnApOworCQlicCA9IGJwICsgKihicCk7CisJfQorCisJcGNtZHMtPmNtZF9jbnQg
PSBjbnQ7CisKKwlwY21kcy0+Y21kcyA9IGtjYWxsb2MoY250LCBzaXplb2Yoc3RydWN0IGRzaV9j
bWRfZGVzYyksIEdGUF9LRVJORUwpOworCWlmICghcGNtZHMtPmNtZHMpCisJCXJldHVybiAtRU5P
TUVNOworCXRlbXBfY21kID0gcGNtZHMtPmNtZHM7CisKKwlicCA9IGJ1ZjsKKwlsZW4gPSBibGVu
OworCisJd2hpbGUgKGNudCAhPSAwKSB7CisJCXRlbXBfY21kLT53YWl0ID0gKihicCsxKTsKKwkJ
dGVtcF9jbWQtPmNtZCA9ICooYnArMik7CisJCXRlbXBfY21kLT5sZW4gPSAqKGJwKSAtIDM7CisJ
CXRlbXBfY21kLT5wYXlsb2FkID0gYnAgKyAzOworCisJCWNudC0tOworCQl0ZW1wX2NtZCsrOwor
CQlicCA9IGJwICsgKihicCk7CisJfQorCisJcGNtZHMtPmJ1ZiA9IGJ1ZjsKKwlwY21kcy0+Ymxl
biA9IGJsZW47CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBwYW5lbF9wYXJzZV9kdChz
dHJ1Y3QgcGFuZWxfaW5mbyAqcGluZm8pCit7CisJc3RydWN0IGRldmljZV9ub2RlICpwYW5lbHNf
bm9kZTsKKwlzdHJ1Y3QgZGV2aWNlX25vZGUgKnBhcmFtZXRlcl9ub2RlOworCXN0YXRpYyBjb25z
dCBjaGFyICpsY2RfbmFtZTsKKwlzdGF0aWMgY29uc3QgY2hhciAqcGFuZWxfcGFyYW1ldGVyOwor
CXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICpkaXNwbGF5X21vZGU7CisJc3RydWN0IG1pcGlfZHNp
X2RldmljZQkqZHNpX2RldmljZSA9IHBpbmZvLT5saW5rOworCWludCByZXQgPSAwOworCXUzMgl0
bXA7CisKKwlwYW5lbHNfbm9kZSA9IG9mX2ZpbmRfbm9kZV9ieV9uYW1lKE5VTEwsICJwYW5lbHMi
KTsKKwlpZiAoIXBhbmVsc19ub2RlKSB7CisJCXByX2VycigiR2V0IHBhbmVscyBub2RlIEZhaWwh
XG4iKTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCisJcGFuZWxfcGFyYW1ldGVyID0gb2ZfZ2V0
X3Byb3BlcnR5KHBhbmVsc19ub2RlLCAicGFuZWwtcGFyYW1ldGVyIiwgTlVMTCk7CisJaWYgKCFw
YW5lbF9wYXJhbWV0ZXIpIHsKKwkJcHJfZXJyKCJHZXQgcGFuZWwgcGFyYW1ldGVyIEZhaWwhXG4i
KTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCisJcGFyYW1ldGVyX25vZGUgPSBvZl9maW5kX25v
ZGVfYnlfbmFtZShwYW5lbHNfbm9kZSwgcGFuZWxfcGFyYW1ldGVyKTsKKwlpZiAoIXBhcmFtZXRl
cl9ub2RlKQorCQlyZXR1cm4gLUVOT0RFVjsKKworCS8qIGdldCBsY2QgbmFtZSAqLworCWxjZF9u
YW1lID0gb2ZfZ2V0X3Byb3BlcnR5KHBhcmFtZXRlcl9ub2RlLCAiZHNpLXBhbmVsLW5hbWUiLCBO
VUxMKTsKKwlpZiAoIWxjZF9uYW1lKSB7CisJCXByX2VycigiR2V0IGxjZF9uYW1lIEZhaWwhXG4i
KTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCXByX2luZm8oIiVzOiBMY2QgTmFtZSA9ICVzXG4i
LCBfX2Z1bmNfXywgbGNkX25hbWUpOworCisJLyogZ2V0IGxjZCBpbml0IGNvZGUgKi8KKwlwaW5m
by0+b25fY21kcyA9IGt6YWxsb2Moc2l6ZW9mKHN0cnVjdCBkc2lfcGFuZWxfY21kcyksIEdGUF9L
RVJORUwpOworCWlmICghKHBpbmZvLT5vbl9jbWRzKSkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwly
ZXQgPSBwYXJzZV9kY3NfY21kcyhwYXJhbWV0ZXJfbm9kZSwgcGluZm8tPm9uX2NtZHMsICJkc2kt
b24tY29tbWFuZCIpOworCWlmIChyZXQgPCAwKSB7CisJCXByX2VycigiR2V0IERzaSBvbiBjb21t
YW5kIEZhaWxcbiIpOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwkvKiBnZXQgbGNkIG9mZiBj
b2RlICovCisJcGluZm8tPm9mZl9jbWRzID0ga3phbGxvYyhzaXplb2Yoc3RydWN0IGRzaV9wYW5l
bF9jbWRzKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCEocGluZm8tPm9mZl9jbWRzKSkKKwkJcmV0dXJu
IC1FTk9NRU07CisKKwlyZXQgPSBwYXJzZV9kY3NfY21kcyhwYXJhbWV0ZXJfbm9kZSwgcGluZm8t
Pm9mZl9jbWRzLAorCQkJImRzaS1vZmYtY29tbWFuZCIpOworCWlmIChyZXQgPCAwKSB7CisJCXBy
X2VycigiR2V0IERzaSBvZmYgY29tbWFuZCBGYWlsXG4iKTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJ
fQorCisJLyogZ2V0IFBvcmNoICAqLworCWRpc3BsYXlfbW9kZSA9IGt6YWxsb2Moc2l6ZW9mKHN0
cnVjdCBkcm1fZGlzcGxheV9tb2RlKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFkaXNwbGF5X21vZGUp
CisJCXJldHVybiAtRU5PTUVNOworCXBpbmZvLT5wYW5lbF9kaXNwbGF5X21vZGUgPSBkaXNwbGF5
X21vZGU7CisKKwlyZXQgPSBvZl9wcm9wZXJ0eV9yZWFkX3UzMihwYXJhbWV0ZXJfbm9kZSwgImRz
aS1waXhlbC1jbGsiLCAmdG1wKTsKKwlkaXNwbGF5X21vZGUtPmNsb2NrID0gKCFyZXQgPyB0bXAg
OiAwKTsKKworCXJldCA9IG9mX3Byb3BlcnR5X3JlYWRfdTMyKHBhcmFtZXRlcl9ub2RlLAorCQkJ
ImRzaS1wYW5lbC1oem9yaXpvbnRhbCIsICZ0bXApOworCWRpc3BsYXlfbW9kZS0+aGRpc3BsYXkg
PSAoIXJldCA/IHRtcCA6IDApOworCisJcmV0ID0gb2ZfcHJvcGVydHlfcmVhZF91MzIocGFyYW1l
dGVyX25vZGUsICJkc2ktaC1mcm9udC1wb3JjaCIsICZ0bXApOworCXRtcCA9ICghcmV0ID8gdG1w
IDogMCk7CisJZGlzcGxheV9tb2RlLT5oc3luY19zdGFydCA9IGRpc3BsYXlfbW9kZS0+aGRpc3Bs
YXkgKyB0bXA7CisKKwlyZXQgPSBvZl9wcm9wZXJ0eV9yZWFkX3UzMihwYXJhbWV0ZXJfbm9kZSwg
ImRzaS1oLWJhY2stcG9yY2giLCAmdG1wKTsKKwl0bXAgPSAoIXJldCA/IHRtcCA6IDApOworCWRp
c3BsYXlfbW9kZS0+aHN5bmNfZW5kID0gZGlzcGxheV9tb2RlLT5oc3luY19zdGFydCArIHRtcDsK
KworCXJldCA9IG9mX3Byb3BlcnR5X3JlYWRfdTMyKHBhcmFtZXRlcl9ub2RlLCAiZHNpLWgtcHVs
c2Utd2lkdGgiLCAmdG1wKTsKKwl0bXAgPSAoIXJldCA/IHRtcCA6IDApOworCWRpc3BsYXlfbW9k
ZS0+aHRvdGFsID0gZGlzcGxheV9tb2RlLT5oc3luY19lbmQgKyB0bXA7CisKKwlyZXQgPSBvZl9w
cm9wZXJ0eV9yZWFkX3UzMihwYXJhbWV0ZXJfbm9kZSwgImRzaS1wYW5lbC12ZXJ0aWNhbCIsICZ0
bXApOworCWRpc3BsYXlfbW9kZS0+dmRpc3BsYXkgPSAoIXJldCA/IHRtcCA6IDApOworCisJcmV0
ID0gb2ZfcHJvcGVydHlfcmVhZF91MzIocGFyYW1ldGVyX25vZGUsICJkc2ktdi1mcm9udC1wb3Jj
aCIsICZ0bXApOworCXRtcCA9ICghcmV0ID8gdG1wIDogMCk7CisJZGlzcGxheV9tb2RlLT52c3lu
Y19zdGFydCA9IGRpc3BsYXlfbW9kZS0+dmRpc3BsYXkgKyB0bXA7CisKKwlyZXQgPSBvZl9wcm9w
ZXJ0eV9yZWFkX3UzMihwYXJhbWV0ZXJfbm9kZSwgImRzaS12LWJhY2stcG9yY2giLCAmdG1wKTsK
Kwl0bXAgPSAoIXJldCA/IHRtcCA6IDApOworCWRpc3BsYXlfbW9kZS0+dnN5bmNfZW5kID0gZGlz
cGxheV9tb2RlLT52c3luY19zdGFydCArIHRtcDsKKworCXJldCA9IG9mX3Byb3BlcnR5X3JlYWRf
dTMyKHBhcmFtZXRlcl9ub2RlLCAiZHNpLXYtcHVsc2Utd2lkdGgiLCAmdG1wKTsKKwl0bXAgPSAo
IXJldCA/IHRtcCA6IDApOworCWRpc3BsYXlfbW9kZS0+dnRvdGFsID0gZGlzcGxheV9tb2RlLT52
c3luY19lbmQgKyB0bXA7CisKKwlyZXQgPSBvZl9wcm9wZXJ0eV9yZWFkX3UzMihwYXJhbWV0ZXJf
bm9kZSwgImRzaS1wYW5lbC1yZWZyZXNoIiwgJnRtcCk7CisJZGlzcGxheV9tb2RlLT52cmVmcmVz
aCA9ICghcmV0ID8gdG1wIDogMCk7CisKKwkvKiBnZXQgbGFucyAqLworCXJldCA9IG9mX3Byb3Bl
cnR5X3JlYWRfdTMyKHBhcmFtZXRlcl9ub2RlLCAiZHNpLXBhbmVsLWxhbmVzIiwgJnRtcCk7CisJ
ZHNpX2RldmljZS0+bGFuZXMgID0gKCFyZXQgPyB0bXAgOiAwKTsKKworCXJldCA9IG9mX3Byb3Bl
cnR5X3JlYWRfdTMyKHBhcmFtZXRlcl9ub2RlLCAiZHNpLXBhbmVsLWZvcm1hdCIsICZ0bXApOwor
CWRzaV9kZXZpY2UtPmZvcm1hdCA9ICghcmV0ID8gdG1wIDogMCk7CisKKwlyZXQgPSBvZl9wcm9w
ZXJ0eV9yZWFkX3UzMihwYXJhbWV0ZXJfbm9kZSwKKwkJCSJkc2ktcGFuZWwtbW9kZS1mbGFncyIs
ICZ0bXApOworCWRzaV9kZXZpY2UtPm1vZGVfZmxhZ3MgPSAoIXJldCA/IHRtcCA6IDApOworCisJ
LyogZ2V0IFd4SCAqLworCXJldCA9IG9mX3Byb3BlcnR5X3JlYWRfdTMyKHBhcmFtZXRlcl9ub2Rl
LCAiZHNpLXBhbmVsLXdpZHRoLW1tIiwgJnRtcCk7CisJcGluZm8tPnBhbmVsX3dpZHRoX21tICA9
ICghcmV0ID8gdG1wIDogMCk7CisKKwlyZXQgPSBvZl9wcm9wZXJ0eV9yZWFkX3UzMihwYXJhbWV0
ZXJfbm9kZSwgImRzaS1wYW5lbC1oZWlnaHQtbW0iLCAmdG1wKTsKKwlwaW5mby0+cGFuZWxfaGVp
Z2h0X21tICA9ICghcmV0ID8gdG1wIDogMCk7CisKKwlyZXQgPSBvZl9wcm9wZXJ0eV9yZWFkX3Uz
MihwYXJhbWV0ZXJfbm9kZSwgInBlci1jb2xvci1jaGFubmVsIiwgJnRtcCk7CisJcGluZm8tPnBl
cl9jb2xvcl9jaGFubmVsID0gKCFyZXQgPyB0bXAgOiAwKTsKKworCS8qIHJlc2V0IHRpbWUgKi8K
KwlyZXQgPSBkc2lfcGFyc2VfcmVzZXRfc2VxKHBhcmFtZXRlcl9ub2RlLCBwaW5mby0+cnN0X3Nl
cSwKKwkJCQkmKHBpbmZvLT5yc3Rfc2VxX2xlbiksICJkc2ktcmVzZXQtc2VxdWVuY2UiKTsKKwlp
ZiAocmV0IDwgMCkKKwkJcmV0dXJuIHJldDsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW5s
aW5lIHN0cnVjdCBwYW5lbF9pbmZvICp0b19wYW5lbF9pbmZvKHN0cnVjdCBkcm1fcGFuZWwgKnBh
bmVsKQoreworCXJldHVybiBjb250YWluZXJfb2YocGFuZWwsIHN0cnVjdCBwYW5lbF9pbmZvLCBi
YXNlKTsKK30KKworc3RhdGljIGludCBwYW5lbF9kaXNhYmxlKHN0cnVjdCBkcm1fcGFuZWwgKnBh
bmVsKQoreworCXN0cnVjdCBwYW5lbF9pbmZvICpwaW5mbyA9IHRvX3BhbmVsX2luZm8ocGFuZWwp
OworCisJaWYgKCFwaW5mby0+ZW5hYmxlZCkKKwkJcmV0dXJuIDA7CisKKwliYWNrbGlnaHRfZGlz
YWJsZShwaW5mby0+YmFja2xpZ2h0KTsKKworCXBpbmZvLT5lbmFibGVkID0gZmFsc2U7CisKKwly
ZXR1cm4gMDsKK30KKworc3RhdGljIGludCBwYW5lbF91bnByZXBhcmUoc3RydWN0IGRybV9wYW5l
bCAqcGFuZWwpCit7CisJc3RydWN0IHBhbmVsX2luZm8gKnBpbmZvID0gdG9fcGFuZWxfaW5mbyhw
YW5lbCk7CisJaW50IGVycjsKKworCWlmICghcGluZm8tPnByZXBhcmVkKQorCQlyZXR1cm4gMDsK
KworCWVyciA9IHdyaXRlX2NtZHMocGluZm8tPmxpbmssIHBpbmZvLT5vZmZfY21kcyk7CisJaWYg
KGVyciA8IDApIHsKKwkJZGV2X2VycihwYW5lbC0+ZGV2LAorCQkJCSJmYWlsZWQgdG8gc2VuZCBE
Q1MgT2ZmIENvZGU6ICVkXG4iLCBlcnIpOworCQlyZXR1cm4gZXJyOworCX0KKworCXVzbGVlcF9y
YW5nZSgxMDAwLCAxMDAwKTsKKwlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAocGluZm8tPnJlc2V0
X2dwaW8sIDApOworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChwaW5mby0+cHAzMzAwMF9ncGlv
LCAwKTsKKwlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAocGluZm8tPnBwMTgwMDBfZ3BpbywgMCk7
CisKKwlwaW5mby0+cHJlcGFyZWQgPSBmYWxzZTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMg
aW50IHBhbmVsX3ByZXBhcmUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJc3RydWN0IHBh
bmVsX2luZm8gKnBpbmZvID0gdG9fcGFuZWxfaW5mbyhwYW5lbCk7CisJaW50IGVyciwgaTsKKwor
CWlmIChwaW5mby0+cHJlcGFyZWQpCisJCXJldHVybiAwOworCisJZ3Bpb2Rfc2V0X3ZhbHVlX2Nh
bnNsZWVwKHBpbmZvLT5wcDE4MDAwX2dwaW8sIDEpOworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVl
cChwaW5mby0+cHAzMzAwMF9ncGlvLCAxKTsKKworCS8qIHJlc2V0IHNlcXVlbmNlICovCisJZm9y
IChpID0gMDsgaSA8IHBpbmZvLT5yc3Rfc2VxX2xlbjsgKytpKSB7CisJCWdwaW9kX3NldF92YWx1
ZV9jYW5zbGVlcChwaW5mby0+cmVzZXRfZ3BpbywgcGluZm8tPnJzdF9zZXFbaV0pOworCQlpZiAo
cGluZm8tPnJzdF9zZXFbKytpXSkKKwkJCXVzbGVlcF9yYW5nZShwaW5mby0+cnN0X3NlcVtpXSAq
IDEwMDAsCisJCQkJCQlwaW5mby0+cnN0X3NlcVtpXSAqIDEwMDApOworCX0KKworCS8qIHNlbmQg
aW5pdCBjb2RlICovCisJZXJyID0gd3JpdGVfY21kcyhwaW5mby0+bGluaywgcGluZm8tPm9uX2Nt
ZHMpOworCWlmIChlcnIgPCAwKSB7CisJCWRldl9lcnIocGFuZWwtPmRldiwKKwkJCQkiZmFpbGVk
IHRvIHNlbmQgRENTIEluaXQgQ29kZTogJWRcbiIsIGVycik7CisJCWdvdG8gcG93ZXJvZmY7CisJ
fQorCisJcGluZm8tPnByZXBhcmVkID0gdHJ1ZTsKKworCXJldHVybiAwOworCitwb3dlcm9mZjoK
KwlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAocGluZm8tPnJlc2V0X2dwaW8sIDApOworCWdwaW9k
X3NldF92YWx1ZV9jYW5zbGVlcChwaW5mby0+cHAzMzAwMF9ncGlvLCAwKTsKKwlncGlvZF9zZXRf
dmFsdWVfY2Fuc2xlZXAocGluZm8tPnBwMTgwMDBfZ3BpbywgMCk7CisJcmV0dXJuIGVycjsKK30K
Kworc3RhdGljIGludCBwYW5lbF9lbmFibGUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJ
c3RydWN0IHBhbmVsX2luZm8gKnBpbmZvID0gdG9fcGFuZWxfaW5mbyhwYW5lbCk7CisJaW50IHJl
dDsKKworCWlmIChwaW5mby0+ZW5hYmxlZCkKKwkJcmV0dXJuIDA7CisKKwlyZXQgPSBiYWNrbGln
aHRfZW5hYmxlKHBpbmZvLT5iYWNrbGlnaHQpOworCWlmIChyZXQpIHsKKwkJRFJNX0RFVl9FUlJP
UihwYW5lbC0+ZHJtLT5kZXYsCisJCQkgICAgICAiRmFpbGVkIHRvIGVuYWJsZSBiYWNrbGlnaHQg
JWRcbiIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJcGluZm8tPmVuYWJsZWQgPSB0cnVl
OworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgcGFuZWxfZ2V0X21vZGVzKHN0cnVjdCBk
cm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCBwYW5lbF9pbmZvICpwaW5mbyA9IHRvX3BhbmVs
X2luZm8ocGFuZWwpOworCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlOworCisJaWYgKCFw
aW5mby0+cGFuZWxfZGlzcGxheV9tb2RlKSB7CisJCXByX2VycigiR2V0IHBhbmVsX2Rpc3BsYXlf
bW9kZSBmYWlsIVxuIik7CisJCXJldHVybiAtMTsKKwl9CisKKwltb2RlID0gZHJtX21vZGVfZHVw
bGljYXRlKHBhbmVsLT5kcm0sIHBpbmZvLT5wYW5lbF9kaXNwbGF5X21vZGUpOworCWlmICghbW9k
ZSkgeworCQlwcl9lcnIoImZhaWxlZCB0byBhZGQgbW9kZVxuIik7CisJCXJldHVybiAtRU5PTUVN
OworCX0KKworCWRybV9tb2RlX3NldF9uYW1lKG1vZGUpOworCisJZHJtX21vZGVfcHJvYmVkX2Fk
ZChwYW5lbC0+Y29ubmVjdG9yLCBtb2RlKTsKKworCXBhbmVsLT5jb25uZWN0b3ItPmRpc3BsYXlf
aW5mby53aWR0aF9tbSA9IHBpbmZvLT5wYW5lbF93aWR0aF9tbTsKKwlwYW5lbC0+Y29ubmVjdG9y
LT5kaXNwbGF5X2luZm8uaGVpZ2h0X21tID0gcGluZm8tPnBhbmVsX2hlaWdodF9tbTsKKwlwYW5l
bC0+Y29ubmVjdG9yLT5kaXNwbGF5X2luZm8uYnBjID0gcGluZm8tPnBlcl9jb2xvcl9jaGFubmVs
OworCisJcmV0dXJuIDE7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3BhbmVsX2Z1bmNz
IHBhbmVsX2Z1bmNzID0geworCS5kaXNhYmxlID0gcGFuZWxfZGlzYWJsZSwKKwkudW5wcmVwYXJl
ID0gcGFuZWxfdW5wcmVwYXJlLAorCS5wcmVwYXJlID0gcGFuZWxfcHJlcGFyZSwKKwkuZW5hYmxl
ID0gcGFuZWxfZW5hYmxlLAorCS5nZXRfbW9kZXMgPSBwYW5lbF9nZXRfbW9kZXMsCit9OworCitz
dGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBwYW5lbF9vZl9tYXRjaFtdID0geworCXsg
LmNvbXBhdGlibGUgPSAiYm9lLGhpbWF4ODI3OWQiLCB9LAorCXsgfQorfTsKK01PRFVMRV9ERVZJ
Q0VfVEFCTEUob2YsIHBhbmVsX29mX21hdGNoKTsKKworc3RhdGljIGludCBwYW5lbF9hZGQoc3Ry
dWN0IHBhbmVsX2luZm8gKnBpbmZvKQoreworCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZwaW5mby0+
bGluay0+ZGV2OworCXN0cnVjdCBkZXZpY2Vfbm9kZSAqbnA7CisJaW50IGVycjsKKworCXBpbmZv
LT5wcDMzMDAwX2dwaW8gPSBkZXZtX2dwaW9kX2dldF9vcHRpb25hbChkZXYsCisJCQkJCQkJInBw
MzMwMDAiLAorCQkJCQkJCUdQSU9EX09VVF9ISUdIKTsKKwlpZiAoSVNfRVJSKHBpbmZvLT5wcDMz
MDAwX2dwaW8pKSB7CisJCWVyciA9IFBUUl9FUlIocGluZm8tPnBwMzMwMDBfZ3Bpbyk7CisJCWRl
dl9lcnIoZGV2LCAiZmFpbGVkIHRvIGdldCBwcDMzMDAwIGdwaW86ICVkXG4iLCBlcnIpOworCQlw
aW5mby0+cHAzMzAwMF9ncGlvID0gTlVMTDsKKwl9CisKKwlwaW5mby0+cHAxODAwMF9ncGlvID0g
ZGV2bV9ncGlvZF9nZXRfb3B0aW9uYWwoZGV2LAorCQkJCQkJCSJwcDE4MDAwIiwKKwkJCQkJCQlH
UElPRF9PVVRfSElHSCk7CisJaWYgKElTX0VSUihwaW5mby0+cHAxODAwMF9ncGlvKSkgeworCQll
cnIgPSBQVFJfRVJSKHBpbmZvLT5wcDE4MDAwX2dwaW8pOworCQlkZXZfZXJyKGRldiwgImZhaWxl
ZCB0byBnZXQgcHAxODAwMCBncGlvOiAlZFxuIiwgZXJyKTsKKwkJcGluZm8tPnBwMTgwMDBfZ3Bp
byA9IE5VTEw7CisJfQorCisJcGluZm8tPnJlc2V0X2dwaW8gPSBkZXZtX2dwaW9kX2dldF9vcHRp
b25hbChkZXYsICJlbmFibGUiLAorCQkJCQkJCUdQSU9EX09VVF9ISUdIKTsKKwlpZiAoSVNfRVJS
KHBpbmZvLT5yZXNldF9ncGlvKSkgeworCQllcnIgPSBQVFJfRVJSKHBpbmZvLT5yZXNldF9ncGlv
KTsKKwkJZGV2X2VycihkZXYsICJmYWlsZWQgdG8gZ2V0IGVuYWJsZSBncGlvOiAlZFxuIiwgZXJy
KTsKKwkJcGluZm8tPnJlc2V0X2dwaW8gPSBOVUxMOworCX0KKworCW5wID0gb2ZfcGFyc2VfcGhh
bmRsZShkZXYtPm9mX25vZGUsICJiYWNrbGlnaHQiLCAwKTsKKwlpZiAobnApIHsKKwkJcGluZm8t
PmJhY2tsaWdodCA9IG9mX2ZpbmRfYmFja2xpZ2h0X2J5X25vZGUobnApOworCQlvZl9ub2RlX3B1
dChucCk7CisKKwkJaWYgKCFwaW5mby0+YmFja2xpZ2h0KQorCQkJcmV0dXJuIC1FUFJPQkVfREVG
RVI7CisJfQorCisJZHJtX3BhbmVsX2luaXQoJnBpbmZvLT5iYXNlKTsKKwlwaW5mby0+YmFzZS5m
dW5jcyA9ICZwYW5lbF9mdW5jczsKKwlwaW5mby0+YmFzZS5kZXYgPSAmcGluZm8tPmxpbmstPmRl
djsKKworCWVyciA9IGRybV9wYW5lbF9hZGQoJnBpbmZvLT5iYXNlKTsKKwlpZiAoZXJyIDwgMCkK
KwkJZ290byBwdXRfYmFja2xpZ2h0OworCisJcmV0dXJuIDA7CisKK3B1dF9iYWNrbGlnaHQ6CisJ
cHV0X2RldmljZSgmcGluZm8tPmJhY2tsaWdodC0+ZGV2KTsKKworCXJldHVybiBlcnI7Cit9CisK
K3N0YXRpYyB2b2lkIHBhbmVsX2RlbChzdHJ1Y3QgcGFuZWxfaW5mbyAqcGluZm8pCit7CisJaWYg
KHBpbmZvLT5iYXNlLmRldikKKwkJZHJtX3BhbmVsX3JlbW92ZSgmcGluZm8tPmJhc2UpOworCisJ
cHV0X2RldmljZSgmcGluZm8tPmJhY2tsaWdodC0+ZGV2KTsKK30KKworc3RhdGljIGludCBwYW5l
bF9wcm9iZShzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCit7CisJc3RydWN0IHBhbmVsX2lu
Zm8gKnBpbmZvOworCWludCBlcnI7CisKKwlwaW5mbyA9IGRldm1fa3phbGxvYygmZHNpLT5kZXYs
IHNpemVvZigqcGluZm8pLCBHRlBfS0VSTkVMKTsKKwlpZiAoIXBpbmZvKQorCQlyZXR1cm4gLUVO
T01FTTsKKworCXBpbmZvLT5saW5rID0gZHNpOworCXBhbmVsX3BhcnNlX2R0KHBpbmZvKTsKKwlt
aXBpX2RzaV9zZXRfZHJ2ZGF0YShkc2ksIHBpbmZvKTsKKworCWVyciA9IHBhbmVsX2FkZChwaW5m
byk7CisJaWYgKGVyciA8IDApCisJCXJldHVybiBlcnI7CisKKwlyZXR1cm4gbWlwaV9kc2lfYXR0
YWNoKGRzaSk7Cit9CisKK3N0YXRpYyBpbnQgcGFuZWxfcmVtb3ZlKHN0cnVjdCBtaXBpX2RzaV9k
ZXZpY2UgKmRzaSkKK3sKKwlzdHJ1Y3QgcGFuZWxfaW5mbyAqcGluZm8gPSBtaXBpX2RzaV9nZXRf
ZHJ2ZGF0YShkc2kpOworCWludCBlcnI7CisKKwllcnIgPSBwYW5lbF91bnByZXBhcmUoJnBpbmZv
LT5iYXNlKTsKKwlpZiAoZXJyIDwgMCkKKwkJRFJNX0RFVl9FUlJPUigmZHNpLT5kZXYsICJmYWls
ZWQgdG8gdW5wcmVwYXJlIHBhbmVsOiAlZFxuIiwKKwkJCSAgICAgIGVycik7CisKKwllcnIgPSBw
YW5lbF9kaXNhYmxlKCZwaW5mby0+YmFzZSk7CisJaWYgKGVyciA8IDApCisJCURSTV9ERVZfRVJS
T1IoJmRzaS0+ZGV2LCAiZmFpbGVkIHRvIGRpc2FibGUgcGFuZWw6ICVkXG4iLCBlcnIpOworCisJ
ZXJyID0gbWlwaV9kc2lfZGV0YWNoKGRzaSk7CisJaWYgKGVyciA8IDApCisJCURSTV9ERVZfRVJS
T1IoJmRzaS0+ZGV2LCAiZmFpbGVkIHRvIGRldGFjaCBmcm9tIERTSSBob3N0OiAlZFxuIiwKKwkJ
CSAgICAgIGVycik7CisKKwlkcm1fcGFuZWxfZGV0YWNoKCZwaW5mby0+YmFzZSk7CisJcGFuZWxf
ZGVsKHBpbmZvKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgdm9pZCBwYW5lbF9zaHV0ZG93
bihzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCit7CisJc3RydWN0IHBhbmVsX2luZm8gKnBp
bmZvID0gbWlwaV9kc2lfZ2V0X2RydmRhdGEoZHNpKTsKKworCXBhbmVsX3VucHJlcGFyZSgmcGlu
Zm8tPmJhc2UpOworCXBhbmVsX2Rpc2FibGUoJnBpbmZvLT5iYXNlKTsKK30KKworc3RhdGljIHN0
cnVjdCBtaXBpX2RzaV9kcml2ZXIgcGFuZWxfZHJpdmVyID0geworCS5kcml2ZXIgPSB7CisJCS5u
YW1lID0gInBhbmVsLWlubm9sdXgtb3RhNzI5MGIiLAorCQkub2ZfbWF0Y2hfdGFibGUgPSBwYW5l
bF9vZl9tYXRjaCwKKwl9LAorCS5wcm9iZSA9IHBhbmVsX3Byb2JlLAorCS5yZW1vdmUgPSBwYW5l
bF9yZW1vdmUsCisJLnNodXRkb3duID0gcGFuZWxfc2h1dGRvd24sCit9OworbW9kdWxlX21pcGlf
ZHNpX2RyaXZlcihwYW5lbF9kcml2ZXIpOworCitNT0RVTEVfQVVUSE9SKCJKZXJyeSBIYW4gPGhh
bnh1NUBodWFxaW4uY29ycC1wYXJ0bmVyLmdvb2dsZS5jb20+Iik7CitNT0RVTEVfREVTQ1JJUFRJ
T04oIkJvZSBIaW1heDgyNzlkIGRyaXZlciIpOworTU9EVUxFX0xJQ0VOU0UoIkdQTCB2MiIpOwot
LSAKMi4xNy4xCgo=
--000000000000136e840592a8de26
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: base64
Content-Disposition: inline

X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVs
IG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs

--000000000000136e840592a8de26--
