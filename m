Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B6F0C34952A
	for <lists+dri-devel@lfdr.de>; Thu, 25 Mar 2021 16:17:53 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B699488007;
	Thu, 25 Mar 2021 15:17:50 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ej1-x62a.google.com (mail-ej1-x62a.google.com
 [IPv6:2a00:1450:4864:20::62a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D7E7B6EDA8
 for <dri-devel@lists.freedesktop.org>; Thu, 25 Mar 2021 15:17:48 +0000 (UTC)
Received: by mail-ej1-x62a.google.com with SMTP id l4so3494858ejc.10
 for <dri-devel@lists.freedesktop.org>; Thu, 25 Mar 2021 08:17:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=vpYcFQ6E9P+EOfCRnAO43rA2HbrrpYIa/GxjJY98Vxo=;
 b=MrTPluyEGSYEqgqk2Gs79D5jOQ+5savHVVHpH8ZnYcrHVUPAQvUrFK/fQklPRGs0OC
 g0zuBlbnFkbpfDch8fXQDPIT7YoAPPF7y5dOmkmR0nbEPh5oTyv07qNVy8VshDme3qBx
 6IyPo6l4ZEMc4UoQxBa0buFCIUrj+JsldkQRnYQNHz0yfM0/ZQFoCdygpM+7TPVWo8LI
 H/ASMW52liIIMAUXxuh+ldGnIeE7Hlw+m/QCcfBsFUkv5Esy3crsyc8PpbwbvRXse8Fb
 a0ua30y4pHMsmscQ296qkx+/qHQzHHprhKi0+pQWXgKWmjjrsS1iyeA1b/E3LG79sO3C
 68yQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=vpYcFQ6E9P+EOfCRnAO43rA2HbrrpYIa/GxjJY98Vxo=;
 b=bae3SzBnrCezHEzxZqb8lJbfzXFLfamzbkNJIrl/Nay7lISGK80fArQ7RGVu4hJ+d9
 LtPxyDgvIdVvRz/UQHktCyD2lo125Ftnn3jRKsEI78scJUMc4wIlvZT/s5zoX4/s0lyW
 cvCjkj4ODGpsh0JfAnr6whfDkClMvBUTsLO9Jz1UVmtt0cjiChjjYBkGQJuedOv47ZtC
 JGG7MQIBAvDuFMrv+cxA7bNqp/w6f4RjbLKnJ3MJ0ZyGgmC2WGkZYxxPQyzvHtoGxjLV
 rf0ujCz30T87jrD0NQGb/fKNRzdTHWXqb6c2Ustk2nUOMa5nslUeezLF24/PFBTG6TeQ
 t5OQ==
X-Gm-Message-State: AOAM531yQ0cjXGeoC3K95235mqyXd/ITA7cvn9tJJucM+JNq7Y8IpbCI
 qdFs0nULkrnFfVfmug1b+XnAt+YhhSw=
X-Google-Smtp-Source: ABdhPJwJGACaifk/fCeV6TP8H4WI0c7isTXvPkA1FoNtwIwIm0GGqs2J0N0mYIBR9pJfMM1DDQogsA==
X-Received: by 2002:a17:906:94ca:: with SMTP id
 d10mr9824006ejy.107.1616685467541; 
 Thu, 25 Mar 2021 08:17:47 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:fe55:c06:5237:9a7b])
 by smtp.gmail.com with ESMTPSA id v8sm2849186edq.76.2021.03.25.08.17.46
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 25 Mar 2021 08:17:46 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: colin.king@canonical.com,
	dri-devel@lists.freedesktop.org
Subject: [PATCH] drm/ttm: switch back to static allocation limits for now
Date: Thu, 25 Mar 2021 16:17:46 +0100
Message-Id: <20210325151746.24298-1-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIHNocmlua2VyIGJhc2VkIGFwcHJvYWNoIHN0aWxsIGhhcyBzb21lIGZsYXdzLiBFc3BlY2lh
bGx5IHRoYXQgd2UgbmVlZAp0ZW1wb3JhcnkgcGFnZXMgdG8gZnJlZSB1cCB0aGUgcGFnZXMgYWxs
b2NhdGVkIHRvIHRoZSBkcml2ZXIgaXMgcHJvYmxlbWF0aWMKaW4gYSBzaHJpbmtlci4KClNpZ25l
ZC1vZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KQWNr
ZWQtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+Ci0tLQogZHJpdmVy
cy9ncHUvZHJtL3R0bS90dG1fZGV2aWNlLmMgfCAgMTQgKystLQogZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fdHQuYyAgICAgfCAxMTIgKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLS0tLQogaW5j
bHVkZS9kcm0vdHRtL3R0bV90dC5oICAgICAgICAgfCAgIDMgKy0KIDMgZmlsZXMgY2hhbmdlZCwg
NTMgaW5zZXJ0aW9ucygrKSwgNzYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3R0bS90dG1fZGV2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9kZXZpY2Uu
YwppbmRleCA4ZTgyMWNkZGY4MWMuLjliNzg3YjNjYWViNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3R0bS90dG1fZGV2aWNlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fZGV2
aWNlLmMKQEAgLTUzLDcgKzUzLDYgQEAgc3RhdGljIHZvaWQgdHRtX2dsb2JhbF9yZWxlYXNlKHZv
aWQpCiAJCWdvdG8gb3V0OwogCiAJdHRtX3Bvb2xfbWdyX2ZpbmkoKTsKLQl0dG1fdHRfbWdyX2Zp
bmkoKTsKIAogCV9fZnJlZV9wYWdlKGdsb2ItPmR1bW15X3JlYWRfcGFnZSk7CiAJbWVtc2V0KGds
b2IsIDAsIHNpemVvZigqZ2xvYikpOwpAQCAtNjQsNyArNjMsNyBAQCBzdGF0aWMgdm9pZCB0dG1f
Z2xvYmFsX3JlbGVhc2Uodm9pZCkKIHN0YXRpYyBpbnQgdHRtX2dsb2JhbF9pbml0KHZvaWQpCiB7
CiAJc3RydWN0IHR0bV9nbG9iYWwgKmdsb2IgPSAmdHRtX2dsb2I7Ci0JdW5zaWduZWQgbG9uZyBu
dW1fcGFnZXM7CisJdW5zaWduZWQgbG9uZyBudW1fcGFnZXMsIG51bV9kbWEzMjsKIAlzdHJ1Y3Qg
c3lzaW5mbyBzaTsKIAlpbnQgcmV0ID0gMDsKIApAQCAtNzgsOCArNzcsMTUgQEAgc3RhdGljIGlu
dCB0dG1fZ2xvYmFsX2luaXQodm9pZCkKIAkgKiBzeXN0ZW0gbWVtb3J5LgogCSAqLwogCW51bV9w
YWdlcyA9ICgodTY0KXNpLnRvdGFscmFtICogc2kubWVtX3VuaXQpID4+IFBBR0VfU0hJRlQ7Ci0J
dHRtX3Bvb2xfbWdyX2luaXQobnVtX3BhZ2VzICogNTAgLyAxMDApOwotCXR0bV90dF9tZ3JfaW5p
dCgpOworCW51bV9wYWdlcyAvPSAyOworCisJLyogQnV0IGZvciBETUEzMiB3ZSBsaW1pdCBvdXJz
ZWxmIHRvIG9ubHkgdXNlIDJHaUIgbWF4aW11bS4gKi8KKwludW1fZG1hMzIgPSAodTY0KShzaS50
b3RhbHJhbSAtIHNpLnRvdGFsaGlnaCkgKiBzaS5tZW1fdW5pdAorCQk+PiBQQUdFX1NISUZUOwor
CW51bV9kbWEzMiA9IG1pbihudW1fZG1hMzIsIDJVTCA8PCAoMzAgLSBQQUdFX1NISUZUKSk7CisK
Kwl0dG1fcG9vbF9tZ3JfaW5pdChudW1fcGFnZXMpOworCXR0bV90dF9tZ3JfaW5pdChudW1fcGFn
ZXMsIG51bV9kbWEzMik7CiAKIAlnbG9iLT5kdW1teV9yZWFkX3BhZ2UgPSBhbGxvY19wYWdlKF9f
R0ZQX1pFUk8gfCBHRlBfRE1BMzIpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRt
L3R0bV90dC5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fdHQuYwppbmRleCA5NWI1Y2ZmMjVm
NGMuLjdkY2QzZmI2OTQ5NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fdHQu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90dC5jCkBAIC00MCw4ICs0MCwxOCBAQAog
CiAjaW5jbHVkZSAidHRtX21vZHVsZS5oIgogCi1zdGF0aWMgc3RydWN0IHNocmlua2VyIG1tX3No
cmlua2VyOwotc3RhdGljIGF0b21pY19sb25nX3Qgc3dhcGFibGVfcGFnZXM7CitzdGF0aWMgdW5z
aWduZWQgbG9uZyB0dG1fcGFnZXNfbGltaXQ7CisKK01PRFVMRV9QQVJNX0RFU0MocGFnZXNfbGlt
aXQsICJMaW1pdCBmb3IgdGhlIGFsbG9jYXRlZCBwYWdlcyIpOworbW9kdWxlX3BhcmFtX25hbWVk
KHBhZ2VzX2xpbWl0LCB0dG1fcGFnZXNfbGltaXQsIHVsb25nLCAwNjQ0KTsKKworc3RhdGljIHVu
c2lnbmVkIGxvbmcgdHRtX2RtYTMyX3BhZ2VzX2xpbWl0OworCitNT0RVTEVfUEFSTV9ERVNDKGRt
YTMyX3BhZ2VzX2xpbWl0LCAiTGltaXQgZm9yIHRoZSBhbGxvY2F0ZWQgRE1BMzIgcGFnZXMiKTsK
K21vZHVsZV9wYXJhbV9uYW1lZChkbWEzMl9wYWdlc19saW1pdCwgdHRtX2RtYTMyX3BhZ2VzX2xp
bWl0LCB1bG9uZywgMDY0NCk7CisKK3N0YXRpYyBhdG9taWNfbG9uZ190IHR0bV9wYWdlc19hbGxv
Y2F0ZWQ7CitzdGF0aWMgYXRvbWljX2xvbmdfdCB0dG1fZG1hMzJfcGFnZXNfYWxsb2NhdGVkOwog
CiAvKgogICogQWxsb2NhdGVzIGEgdHRtIHN0cnVjdHVyZSBmb3IgdGhlIGdpdmVuIEJPLgpAQCAt
Mjk0LDggKzMwNCw2IEBAIHN0YXRpYyB2b2lkIHR0bV90dF9hZGRfbWFwcGluZyhzdHJ1Y3QgdHRt
X2RldmljZSAqYmRldiwgc3RydWN0IHR0bV90dCAqdHRtKQogCiAJZm9yIChpID0gMDsgaSA8IHR0
bS0+bnVtX3BhZ2VzOyArK2kpCiAJCXR0bS0+cGFnZXNbaV0tPm1hcHBpbmcgPSBiZGV2LT5kZXZf
bWFwcGluZzsKLQotCWF0b21pY19sb25nX2FkZCh0dG0tPm51bV9wYWdlcywgJnN3YXBhYmxlX3Bh
Z2VzKTsKIH0KIAogaW50IHR0bV90dF9wb3B1bGF0ZShzdHJ1Y3QgdHRtX2RldmljZSAqYmRldiwK
QEAgLTMwOSwxMiArMzE3LDI1IEBAIGludCB0dG1fdHRfcG9wdWxhdGUoc3RydWN0IHR0bV9kZXZp
Y2UgKmJkZXYsCiAJaWYgKHR0bV90dF9pc19wb3B1bGF0ZWQodHRtKSkKIAkJcmV0dXJuIDA7CiAK
KwlhdG9taWNfbG9uZ19hZGQodHRtLT5udW1fcGFnZXMsICZ0dG1fcGFnZXNfYWxsb2NhdGVkKTsK
KwlpZiAoYmRldi0+cG9vbC51c2VfZG1hMzIpCisJCWF0b21pY19sb25nX2FkZCh0dG0tPm51bV9w
YWdlcywgJnR0bV9kbWEzMl9wYWdlc19hbGxvY2F0ZWQpOworCisJd2hpbGUgKGF0b21pY19sb25n
X3JlYWQoJnR0bV9wYWdlc19hbGxvY2F0ZWQpID4gdHRtX3BhZ2VzX2xpbWl0IHx8CisJICAgICAg
IGF0b21pY19sb25nX3JlYWQoJnR0bV9kbWEzMl9wYWdlc19hbGxvY2F0ZWQpID4KKwkgICAgICAg
dHRtX2RtYTMyX3BhZ2VzX2xpbWl0KSB7CisKKwkJcmV0ID0gdHRtX2dsb2JhbF9zd2Fwb3V0KGN0
eCwgR0ZQX0tFUk5FTCk7CisJCWlmIChyZXQpCisJCQlnb3RvIGVycm9yOworCX0KKwogCWlmIChi
ZGV2LT5mdW5jcy0+dHRtX3R0X3BvcHVsYXRlKQogCQlyZXQgPSBiZGV2LT5mdW5jcy0+dHRtX3R0
X3BvcHVsYXRlKGJkZXYsIHR0bSwgY3R4KTsKIAllbHNlCiAJCXJldCA9IHR0bV9wb29sX2FsbG9j
KCZiZGV2LT5wb29sLCB0dG0sIGN0eCk7CiAJaWYgKHJldCkKLQkJcmV0dXJuIHJldDsKKwkJZ290
byBlcnJvcjsKIAogCXR0bV90dF9hZGRfbWFwcGluZyhiZGV2LCB0dG0pOwogCXR0bS0+cGFnZV9m
bGFncyB8PSBUVE1fUEFHRV9GTEFHX1BSSVZfUE9QVUxBVEVEOwpAQCAtMzI3LDYgKzM0OCwxMiBA
QCBpbnQgdHRtX3R0X3BvcHVsYXRlKHN0cnVjdCB0dG1fZGV2aWNlICpiZGV2LAogCX0KIAogCXJl
dHVybiAwOworCitlcnJvcjoKKwlhdG9taWNfbG9uZ19zdWIodHRtLT5udW1fcGFnZXMsICZ0dG1f
cGFnZXNfYWxsb2NhdGVkKTsKKwlpZiAoYmRldi0+cG9vbC51c2VfZG1hMzIpCisJCWF0b21pY19s
b25nX3N1Yih0dG0tPm51bV9wYWdlcywgJnR0bV9kbWEzMl9wYWdlc19hbGxvY2F0ZWQpOworCXJl
dHVybiByZXQ7CiB9CiBFWFBPUlRfU1lNQk9MKHR0bV90dF9wb3B1bGF0ZSk7CiAKQEAgLTM0Miwx
MiArMzY5LDkgQEAgc3RhdGljIHZvaWQgdHRtX3R0X2NsZWFyX21hcHBpbmcoc3RydWN0IHR0bV90
dCAqdHRtKQogCQkoKnBhZ2UpLT5tYXBwaW5nID0gTlVMTDsKIAkJKCpwYWdlKyspLT5pbmRleCA9
IDA7CiAJfQotCi0JYXRvbWljX2xvbmdfc3ViKHR0bS0+bnVtX3BhZ2VzLCAmc3dhcGFibGVfcGFn
ZXMpOwogfQogCi12b2lkIHR0bV90dF91bnBvcHVsYXRlKHN0cnVjdCB0dG1fZGV2aWNlICpiZGV2
LAotCQkgICAgICAgc3RydWN0IHR0bV90dCAqdHRtKQordm9pZCB0dG1fdHRfdW5wb3B1bGF0ZShz
dHJ1Y3QgdHRtX2RldmljZSAqYmRldiwgc3RydWN0IHR0bV90dCAqdHRtKQogewogCWlmICghdHRt
X3R0X2lzX3BvcHVsYXRlZCh0dG0pKQogCQlyZXR1cm47CkBAIC0zNTcsNzYgKzM4MSwyNCBAQCB2
b2lkIHR0bV90dF91bnBvcHVsYXRlKHN0cnVjdCB0dG1fZGV2aWNlICpiZGV2LAogCQliZGV2LT5m
dW5jcy0+dHRtX3R0X3VucG9wdWxhdGUoYmRldiwgdHRtKTsKIAllbHNlCiAJCXR0bV9wb29sX2Zy
ZWUoJmJkZXYtPnBvb2wsIHR0bSk7Ci0JdHRtLT5wYWdlX2ZsYWdzICY9IH5UVE1fUEFHRV9GTEFH
X1BSSVZfUE9QVUxBVEVEOwotfQotCi0vKiBBcyBsb25nIGFzIHBhZ2VzIGFyZSBhdmFpbGFibGUg
bWFrZSBzdXJlIHRvIHJlbGVhc2UgYXQgbGVhc3Qgb25lICovCi1zdGF0aWMgdW5zaWduZWQgbG9u
ZyB0dG1fdHRfc2hyaW5rZXJfc2NhbihzdHJ1Y3Qgc2hyaW5rZXIgKnNocmluaywKLQkJCQkJICBz
dHJ1Y3Qgc2hyaW5rX2NvbnRyb2wgKnNjKQotewotCXN0cnVjdCB0dG1fb3BlcmF0aW9uX2N0eCBj
dHggPSB7Ci0JCS5ub193YWl0X2dwdSA9IGZhbHNlCi0JfTsKLQlpbnQgcmV0OwotCi0JcmV0ID0g
dHRtX2dsb2JhbF9zd2Fwb3V0KCZjdHgsIEdGUF9OT0ZTKTsKLQlyZXR1cm4gcmV0IDwgMCA/IFNI
UklOS19FTVBUWSA6IHJldDsKLX0KLQotLyogUmV0dXJuIHRoZSBudW1iZXIgb2YgcGFnZXMgYXZh
aWxhYmxlIG9yIFNIUklOS19FTVBUWSBpZiB3ZSBoYXZlIG5vbmUgKi8KLXN0YXRpYyB1bnNpZ25l
ZCBsb25nIHR0bV90dF9zaHJpbmtlcl9jb3VudChzdHJ1Y3Qgc2hyaW5rZXIgKnNocmluaywKLQkJ
CQkJICAgc3RydWN0IHNocmlua19jb250cm9sICpzYykKLXsKLQl1bnNpZ25lZCBsb25nIG51bV9w
YWdlczsKLQotCW51bV9wYWdlcyA9IGF0b21pY19sb25nX3JlYWQoJnN3YXBhYmxlX3BhZ2VzKTsK
LQlyZXR1cm4gbnVtX3BhZ2VzID8gbnVtX3BhZ2VzIDogU0hSSU5LX0VNUFRZOwotfQogCi0jaWZk
ZWYgQ09ORklHX0RFQlVHX0ZTCisJYXRvbWljX2xvbmdfc3ViKHR0bS0+bnVtX3BhZ2VzLCAmdHRt
X3BhZ2VzX2FsbG9jYXRlZCk7CisJaWYgKGJkZXYtPnBvb2wudXNlX2RtYTMyKQorCQlhdG9taWNf
bG9uZ19zdWIodHRtLT5udW1fcGFnZXMsICZ0dG1fZG1hMzJfcGFnZXNfYWxsb2NhdGVkKTsKIAot
LyogVGVzdCB0aGUgc2hyaW5rZXIgZnVuY3Rpb25zIGFuZCBkdW1wIHRoZSByZXN1bHQgKi8KLXN0
YXRpYyBpbnQgdHRtX3R0X2RlYnVnZnNfc2hyaW5rX3Nob3coc3RydWN0IHNlcV9maWxlICptLCB2
b2lkICpkYXRhKQotewotCXN0cnVjdCBzaHJpbmtfY29udHJvbCBzYyA9IHsgLmdmcF9tYXNrID0g
R0ZQX0tFUk5FTCB9OwotCi0JZnNfcmVjbGFpbV9hY3F1aXJlKEdGUF9LRVJORUwpOwotCXNlcV9w
cmludGYobSwgIiVsdS8lbHVcbiIsIHR0bV90dF9zaHJpbmtlcl9jb3VudCgmbW1fc2hyaW5rZXIs
ICZzYyksCi0JCSAgIHR0bV90dF9zaHJpbmtlcl9zY2FuKCZtbV9zaHJpbmtlciwgJnNjKSk7Ci0J
ZnNfcmVjbGFpbV9yZWxlYXNlKEdGUF9LRVJORUwpOwotCi0JcmV0dXJuIDA7CisJdHRtLT5wYWdl
X2ZsYWdzICY9IH5UVE1fUEFHRV9GTEFHX1BSSVZfUE9QVUxBVEVEOwogfQotREVGSU5FX1NIT1df
QVRUUklCVVRFKHR0bV90dF9kZWJ1Z2ZzX3Nocmluayk7Ci0KLSNlbmRpZgotCi0KIAogLyoqCiAg
KiB0dG1fdHRfbWdyX2luaXQgLSByZWdpc3RlciB3aXRoIHRoZSBNTSBzaHJpbmtlcgogICoKICAq
IFJlZ2lzdGVyIHdpdGggdGhlIE1NIHNocmlua2VyIGZvciBzd2FwcGluZyBvdXQgQk9zLgogICov
Ci1pbnQgdHRtX3R0X21ncl9pbml0KHZvaWQpCit2b2lkIHR0bV90dF9tZ3JfaW5pdCh1bnNpZ25l
ZCBsb25nIG51bV9wYWdlcywgdW5zaWduZWQgbG9uZyBudW1fZG1hMzJfcGFnZXMpCiB7Ci0jaWZk
ZWYgQ09ORklHX0RFQlVHX0ZTCi0JZGVidWdmc19jcmVhdGVfZmlsZSgidHRfc2hyaW5rIiwgMDQw
MCwgdHRtX2RlYnVnZnNfcm9vdCwgTlVMTCwKLQkJCSAgICAmdHRtX3R0X2RlYnVnZnNfc2hyaW5r
X2ZvcHMpOwotI2VuZGlmCi0KLQltbV9zaHJpbmtlci5jb3VudF9vYmplY3RzID0gdHRtX3R0X3No
cmlua2VyX2NvdW50OwotCW1tX3Nocmlua2VyLnNjYW5fb2JqZWN0cyA9IHR0bV90dF9zaHJpbmtl
cl9zY2FuOwotCW1tX3Nocmlua2VyLnNlZWtzID0gMTsKLQlyZXR1cm4gcmVnaXN0ZXJfc2hyaW5r
ZXIoJm1tX3Nocmlua2VyKTsKLX0KKwlpZiAoIXR0bV9wYWdlc19saW1pdCkKKwkJdHRtX3BhZ2Vz
X2xpbWl0ID0gbnVtX3BhZ2VzOwogCi0vKioKLSAqIHR0bV90dF9tZ3JfZmluaSAtIHVucmVnaXN0
ZXIgb3VyIE1NIHNocmlua2VyCi0gKgotICogVW5yZWdpc3RlcnMgdGhlIE1NIHNocmlua2VyLgot
ICovCi12b2lkIHR0bV90dF9tZ3JfZmluaSh2b2lkKQotewotCXVucmVnaXN0ZXJfc2hyaW5rZXIo
Jm1tX3Nocmlua2VyKTsKKwlpZiAoIXR0bV9kbWEzMl9wYWdlc19saW1pdCkKKwkJdHRtX2RtYTMy
X3BhZ2VzX2xpbWl0ID0gbnVtX2RtYTMyX3BhZ2VzOwogfQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9k
cm0vdHRtL3R0bV90dC5oIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV90dC5oCmluZGV4IDA2OWY4MTMw
MjQxYS4uMTM0ZDA5ZWY3NzY2IDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS90dG0vdHRtX3R0LmgK
KysrIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV90dC5oCkBAIC0xNTcsOCArMTU3LDcgQEAgaW50IHR0
bV90dF9wb3B1bGF0ZShzdHJ1Y3QgdHRtX2RldmljZSAqYmRldiwgc3RydWN0IHR0bV90dCAqdHRt
LCBzdHJ1Y3QgdHRtX29wZXIKICAqLwogdm9pZCB0dG1fdHRfdW5wb3B1bGF0ZShzdHJ1Y3QgdHRt
X2RldmljZSAqYmRldiwgc3RydWN0IHR0bV90dCAqdHRtKTsKIAotaW50IHR0bV90dF9tZ3JfaW5p
dCh2b2lkKTsKLXZvaWQgdHRtX3R0X21ncl9maW5pKHZvaWQpOwordm9pZCB0dG1fdHRfbWdyX2lu
aXQodW5zaWduZWQgbG9uZyBudW1fcGFnZXMsIHVuc2lnbmVkIGxvbmcgbnVtX2RtYTMyX3BhZ2Vz
KTsKIAogI2lmIElTX0VOQUJMRUQoQ09ORklHX0FHUCkKICNpbmNsdWRlIDxsaW51eC9hZ3BfYmFj
a2VuZC5oPgotLSAKMi4yNS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9k
cmktZGV2ZWwK
