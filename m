Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 47579E38A3
	for <lists+dri-devel@lfdr.de>; Thu, 24 Oct 2019 18:46:28 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F00796E4D0;
	Thu, 24 Oct 2019 16:46:17 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x444.google.com (mail-wr1-x444.google.com
 [IPv6:2a00:1450:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 74A5C6E4C4
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 16:46:12 +0000 (UTC)
Received: by mail-wr1-x444.google.com with SMTP id p4so26869590wrm.8
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 09:46:12 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=ZmA4CCQ3zKG7QoqtlGNTQGTEdWNG2D4PniESW4LhASE=;
 b=Eq/y/FezfWRrLnFpIEf3wSlv+jMx3gGSwo4MWfPqmBW4JTaBRZyFBO1WHisLKMzZBx
 MIVeDjtHoNzWuP7zhB9eQazAF4cZhtNcv23dGQTjQSbAWk51/wwOxTENdpoJoOSexuwz
 2O0OlsrxqrB3hGLJZobbXf9ivFHKbL1S63MlH7buZ9pNRNFjF3lwUensL01O2gR7i/UD
 f/LGWLZ/kqicezFrOnC+4Dgey0nhj9Z62fUiFwbUzTxDYXdN8GDO3CiIiuQpE21ve0qV
 CFC0kG3ELqgWcUOcb2ua2G2daekCzqJERHBkZW/hQ353GYX0U/POKKz15f590669+dEE
 y6ag==
X-Gm-Message-State: APjAAAVK38oQEsVwwoYTXp0eurDuBrp8XYAzRBm18rI9KnfL1o7EbDVJ
 HirGTLhjRyf/1XKoltyFh+E=
X-Google-Smtp-Source: APXvYqyH/0NeQY+42spVg1z2IjJVsOvpIuMFgks8UGun/fp1nCfAHu/yMIbrC3S2ZU3ULFlM4t72Ug==
X-Received: by 2002:adf:9f08:: with SMTP id l8mr4500171wrf.325.1571935570614; 
 Thu, 24 Oct 2019 09:46:10 -0700 (PDT)
Received: from localhost (p2E5BE2CE.dip0.t-ipconnect.de. [46.91.226.206])
 by smtp.gmail.com with ESMTPSA id y1sm29072699wrw.6.2019.10.24.09.46.09
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 24 Oct 2019 09:46:09 -0700 (PDT)
From: Thierry Reding <thierry.reding@gmail.com>
To: Thierry Reding <thierry.reding@gmail.com>
Subject: [PATCH 15/32] drm/tegra: dp: Add support for eDP link rates
Date: Thu, 24 Oct 2019 18:45:17 +0200
Message-Id: <20191024164534.132764-16-thierry.reding@gmail.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191024164534.132764-1-thierry.reding@gmail.com>
References: <20191024164534.132764-1-thierry.reding@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=ZmA4CCQ3zKG7QoqtlGNTQGTEdWNG2D4PniESW4LhASE=;
 b=MbJRPFT36/d6lD1Yv6VGcEWxYAtG+W2eMU8WZXpifEbv4Ko1LJmKrZHv64DWhwjJ4X
 Wo6gN06pmq70cRoQwxDA5iEqKx1n/btinPa+hAu5UzZ7/aY8qbfuSfNWSCBckoN3eDwo
 Yy5UAAa+ou7GnkOoUx4dw1YYodX8lkkiN1oFu4i71s1DSxB3KjAaUXHAdtZzoJkTNsuB
 Oev+s7myrSfmsF35MTlPB8RiOfznxGsyF4k8kzj8J9WMxa4XR6NUZUudA9D/A2EiJlTk
 bDIaZVkPDbiwwXkA3x7OcA3+S+DLdnVqqPwwDjJlrW/posDNZVOCNoQUq0eZf+scGyRc
 zwEw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-tegra@vger.kernel.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVGhpZXJyeSBSZWRpbmcgPHRyZWRpbmdAbnZpZGlhLmNvbT4KClBhcnNlcyBhZGRpdGlv
bmFsIGxpbmsgcmF0ZXMgZnJvbSBEUENEIGlmIHRoZSBzaW5rIHN1cHBvcnRzIGVEUCAxLjQuCgpT
aWduZWQtb2ZmLWJ5OiBUaGllcnJ5IFJlZGluZyA8dHJlZGluZ0BudmlkaWEuY29tPgotLS0KIGRy
aXZlcnMvZ3B1L2RybS90ZWdyYS9kcC5jIHwgMTI3ICsrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS90ZWdyYS9kcC5oIHwgICA5ICsrKwogMiBmaWxl
cyBjaGFuZ2VkLCAxMzYgaW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS90ZWdyYS9kcC5jIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2RwLmMKaW5kZXggZTlhNWRiNzdh
MmRjLi5iY2Y5ZGY5NjVlZjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9kcC5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9kcC5jCkBAIC0zMyw2ICszMyw4IEBAIHZvaWQg
ZHJtX2RwX2xpbmtfY2Fwc19jb3B5KHN0cnVjdCBkcm1fZHBfbGlua19jYXBzICpkZXN0LAogCiBz
dGF0aWMgdm9pZCBkcm1fZHBfbGlua19yZXNldChzdHJ1Y3QgZHJtX2RwX2xpbmsgKmxpbmspCiB7
CisJdW5zaWduZWQgaW50IGk7CisKIAlpZiAoIWxpbmspCiAJCXJldHVybjsKIApAQCAtNDcsNiAr
NDksMTExIEBAIHN0YXRpYyB2b2lkIGRybV9kcF9saW5rX3Jlc2V0KHN0cnVjdCBkcm1fZHBfbGlu
ayAqbGluaykKIAogCWxpbmstPnJhdGUgPSAwOwogCWxpbmstPmxhbmVzID0gMDsKKworCWZvciAo
aSA9IDA7IGkgPCBEUF9NQVhfU1VQUE9SVEVEX1JBVEVTOyBpKyspCisJCWxpbmstPnJhdGVzW2ld
ID0gMDsKKworCWxpbmstPm51bV9yYXRlcyA9IDA7Cit9CisKKy8qKgorICogZHJtX2RwX2xpbmtf
YWRkX3JhdGUoKSAtIGFkZCBhIHJhdGUgdG8gdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIHJhdGVzCisg
KiBAbGluazogdGhlIGxpbmsgdG8gYWRkIHRoZSByYXRlIHRvCisgKiBAcmF0ZTogdGhlIHJhdGUg
dG8gYWRkCisgKgorICogQWRkIGEgbGluayByYXRlIHRvIHRoZSBsaXN0IG9mIHN1cHBvcnRlZCBs
aW5rIHJhdGVzLgorICoKKyAqIFJldHVybnM6CisgKiAwIG9uIHN1Y2Nlc3Mgb3Igb25lIG9mIHRo
ZSBmb2xsb3dpbmcgbmVnYXRpdmUgZXJyb3IgY29kZXMgb24gZmFpbHVyZToKKyAqIC0gRU5PU1BD
IGlmIHRoZSBtYXhpbXVtIG51bWJlciBvZiBzdXBwb3J0ZWQgcmF0ZXMgaGFzIGJlZW4gcmVhY2hl
ZAorICogLSBFRVhJU1RTIGlmIHRoZSBsaW5rIGFscmVhZHkgc3VwcG9ydHMgdGhpcyByYXRlCisg
KgorICogU2VlIGFsc286CisgKiBkcm1fZHBfbGlua19yZW1vdmVfcmF0ZSgpCisgKi8KK2ludCBk
cm1fZHBfbGlua19hZGRfcmF0ZShzdHJ1Y3QgZHJtX2RwX2xpbmsgKmxpbmssIHVuc2lnbmVkIGxv
bmcgcmF0ZSkKK3sKKwl1bnNpZ25lZCBpbnQgaSwgcGl2b3Q7CisKKwlpZiAobGluay0+bnVtX3Jh
dGVzID09IERQX01BWF9TVVBQT1JURURfUkFURVMpCisJCXJldHVybiAtRU5PU1BDOworCisJZm9y
IChwaXZvdCA9IDA7IHBpdm90IDwgbGluay0+bnVtX3JhdGVzOyBwaXZvdCsrKQorCQlpZiAocmF0
ZSA8PSBsaW5rLT5yYXRlc1twaXZvdF0pCisJCQlicmVhazsKKworCWlmIChwaXZvdCAhPSBsaW5r
LT5udW1fcmF0ZXMgJiYgcmF0ZSA9PSBsaW5rLT5yYXRlc1twaXZvdF0pCisJCXJldHVybiAtRUVY
SVNUOworCisJZm9yIChpID0gbGluay0+bnVtX3JhdGVzOyBpID4gcGl2b3Q7IGktLSkKKwkJbGlu
ay0+cmF0ZXNbaV0gPSBsaW5rLT5yYXRlc1tpIC0gMV07CisKKwlsaW5rLT5yYXRlc1twaXZvdF0g
PSByYXRlOworCWxpbmstPm51bV9yYXRlcysrOworCisJcmV0dXJuIDA7Cit9CisKKy8qKgorICog
ZHJtX2RwX2xpbmtfcmVtb3ZlX3JhdGUoKSAtIHJlbW92ZSBhIHJhdGUgZnJvbSB0aGUgbGlzdCBv
ZiBzdXBwb3J0ZWQgcmF0ZXMKKyAqIEBsaW5rOiB0aGUgbGluayBmcm9tIHdoaWNoIHRvIHJlbW92
ZSB0aGUgcmF0ZQorICogQHJhdGU6IHRoZSByYXRlIHRvIHJlbW92ZQorICoKKyAqIFJlbW92ZXMg
YSBsaW5rIHJhdGUgZnJvbSB0aGUgbGlzdCBvZiBzdXBwb3J0ZWQgbGluayByYXRlcy4KKyAqCisg
KiBSZXR1cm5zOgorICogMCBvbiBzdWNjZXNzIG9yIG9uZSBvZiB0aGUgZm9sbG93aW5nIG5lZ2F0
aXZlIGVycm9yIGNvZGVzIG9uIGZhaWx1cmU6CisgKiAtIEVJTlZBTCBpZiB0aGUgc3BlY2lmaWVk
IHJhdGUgaXMgbm90IGFtb25nIHRoZSBzdXBwb3J0ZWQgcmF0ZXMKKyAqCisgKiBTZWUgYWxzbzoK
KyAqIGRybV9kcF9saW5rX2FkZF9yYXRlKCkKKyAqLworaW50IGRybV9kcF9saW5rX3JlbW92ZV9y
YXRlKHN0cnVjdCBkcm1fZHBfbGluayAqbGluaywgdW5zaWduZWQgbG9uZyByYXRlKQoreworCXVu
c2lnbmVkIGludCBpOworCisJZm9yIChpID0gMDsgaSA8IGxpbmstPm51bV9yYXRlczsgaSsrKQor
CQlpZiAocmF0ZSA9PSBsaW5rLT5yYXRlc1tpXSkKKwkJCWJyZWFrOworCisJaWYgKGkgPT0gbGlu
ay0+bnVtX3JhdGVzKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWxpbmstPm51bV9yYXRlcy0tOwor
CisJd2hpbGUgKGkgPCBsaW5rLT5udW1fcmF0ZXMpIHsKKwkJbGluay0+cmF0ZXNbaV0gPSBsaW5r
LT5yYXRlc1tpICsgMV07CisJCWkrKzsKKwl9CisKKwlyZXR1cm4gMDsKK30KKworLyoqCisgKiBk
cm1fZHBfbGlua191cGRhdGVfcmF0ZXMoKSAtIG5vcm1hbGl6ZSB0aGUgc3VwcG9ydGVkIGxpbmsg
cmF0ZXMgYXJyYXkKKyAqIEBsaW5rOiB0aGUgbGluayBmb3Igd2hpY2ggdG8gbm9ybWFsaXplIHRo
ZSBzdXBwb3J0ZWQgbGluayByYXRlcworICoKKyAqIFVzZXJzIHNob3VsZCBjYWxsIHRoaXMgZnVu
Y3Rpb24gYWZ0ZXIgdGhleSd2ZSBtYW51YWxseSBtb2RpZmllZCB0aGUgYXJyYXkKKyAqIG9mIHN1
cHBvcnRlZCBsaW5rIHJhdGVzLiBUaGlzIGZ1bmN0aW9uIHJlbW92ZXMgYW55IHN0YWxlIGVudHJp
ZXMsIGNvbXBhY3RzCisgKiB0aGUgYXJyYXkgYW5kIHVwZGF0ZXMgdGhlIHN1cHBvcnRlZCBsaW5r
IHJhdGUgY291bnQuIE5vdGUgdGhhdCBjYWxsaW5nIHRoZQorICogZHJtX2RwX2xpbmtfcmVtb3Zl
X3JhdGUoKSBmdW5jdGlvbiBhbHJlYWR5IGRvZXMgdGhpcyBqYW5pdG9yaWFsIHdvcmsuCisgKgor
ICogU2VlIGFsc286CisgKiBkcm1fZHBfbGlua19hZGRfcmF0ZSgpLCBkcm1fZHBfbGlua19yZW1v
dmVfcmF0ZSgpCisgKi8KK3ZvaWQgZHJtX2RwX2xpbmtfdXBkYXRlX3JhdGVzKHN0cnVjdCBkcm1f
ZHBfbGluayAqbGluaykKK3sKKwl1bnNpZ25lZCBpbnQgaSwgY291bnQgPSAwOworCisJZm9yIChp
ID0gMDsgaSA8IGxpbmstPm51bV9yYXRlczsgaSsrKSB7CisJCWlmIChsaW5rLT5yYXRlc1tpXSAh
PSAwKQorCQkJbGluay0+cmF0ZXNbY291bnQrK10gPSBsaW5rLT5yYXRlc1tpXTsKKwl9CisKKwlm
b3IgKGkgPSBjb3VudDsgaSA8IGxpbmstPm51bV9yYXRlczsgaSsrKQorCQlsaW5rLT5yYXRlc1tp
XSA9IDA7CisKKwlsaW5rLT5udW1fcmF0ZXMgPSBjb3VudDsKIH0KIAogLyoqCkBAIC0xMjUsNiAr
MjMyLDI2IEBAIGludCBkcm1fZHBfbGlua19wcm9iZShzdHJ1Y3QgZHJtX2RwX2F1eCAqYXV4LCBz
dHJ1Y3QgZHJtX2RwX2xpbmsgKmxpbmspCiAJbGluay0+cmF0ZSA9IGxpbmstPm1heF9yYXRlOwog
CWxpbmstPmxhbmVzID0gbGluay0+bWF4X2xhbmVzOwogCisJLyogUGFyc2UgU1VQUE9SVEVEX0xJ
TktfUkFURVMgZnJvbSBlRFAgMS40ICovCisJaWYgKGxpbmstPmVkcCA+PSAweDE0KSB7CisJCXU4
IHN1cHBvcnRlZF9yYXRlc1tEUF9NQVhfU1VQUE9SVEVEX1JBVEVTICogMl07CisJCXVuc2lnbmVk
IGludCBpOworCQl1MTYgcmF0ZTsKKworCQllcnIgPSBkcm1fZHBfZHBjZF9yZWFkKGF1eCwgRFBf
U1VQUE9SVEVEX0xJTktfUkFURVMsCisJCQkJICAgICAgIHN1cHBvcnRlZF9yYXRlcywKKwkJCQkg
ICAgICAgc2l6ZW9mKHN1cHBvcnRlZF9yYXRlcykpOworCQlpZiAoZXJyIDwgMCkKKwkJCXJldHVy
biBlcnI7CisKKwkJZm9yIChpID0gMDsgaSA8IERQX01BWF9TVVBQT1JURURfUkFURVM7IGkrKykg
eworCQkJcmF0ZSA9IHN1cHBvcnRlZF9yYXRlc1tpICogMiArIDFdIDw8IDggfAorCQkJICAgICAg
IHN1cHBvcnRlZF9yYXRlc1tpICogMiArIDBdOworCisJCQlkcm1fZHBfbGlua19hZGRfcmF0ZShs
aW5rLCByYXRlICogMjAwKTsKKwkJfQorCX0KKwogCXJldHVybiAwOwogfQogCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vdGVncmEvZHAuaCBiL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9kcC5o
CmluZGV4IGUwN2I5YTFlNDNkOC4uYTIwZWU5ZjFmMWI2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vdGVncmEvZHAuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vdGVncmEvZHAuaApAQCAtNjYs
NiArNjYsOCBAQCB2b2lkIGRybV9kcF9saW5rX2NhcHNfY29weShzdHJ1Y3QgZHJtX2RwX2xpbmtf
Y2FwcyAqZGVzdCwKICAqIEBlZHA6IGVEUCByZXZpc2lvbiAoMHgxMTogZURQIDEuMSwgMHgxMjog
ZURQIDEuMiwgLi4uKQogICogQHJhdGU6IGN1cnJlbnRseSBjb25maWd1cmVkIGxpbmsgcmF0ZQog
ICogQGxhbmVzOiBjdXJyZW50bHkgY29uZmlndXJlZCBudW1iZXIgb2YgbGFuZXMKKyAqIEByYXRl
czogYWRkaXRpb25hbCBzdXBwb3J0ZWQgbGluayByYXRlcyBpbiBrSHogKGVEUCAxLjQpCisgKiBA
bnVtX3JhdGVzOiBudW1iZXIgb2YgYWRkaXRpb25hbCBzdXBwb3J0ZWQgbGluayByYXRlcyAoZURQ
IDEuNCkKICAqLwogc3RydWN0IGRybV9kcF9saW5rIHsKIAl1bnNpZ25lZCBjaGFyIHJldmlzaW9u
OwpAQCAtODcsOCArODksMTUgQEAgc3RydWN0IGRybV9kcF9saW5rIHsKIAogCXVuc2lnbmVkIGlu
dCByYXRlOwogCXVuc2lnbmVkIGludCBsYW5lczsKKworCXVuc2lnbmVkIGxvbmcgcmF0ZXNbRFBf
TUFYX1NVUFBPUlRFRF9SQVRFU107CisJdW5zaWduZWQgaW50IG51bV9yYXRlczsKIH07CiAKK2lu
dCBkcm1fZHBfbGlua19hZGRfcmF0ZShzdHJ1Y3QgZHJtX2RwX2xpbmsgKmxpbmssIHVuc2lnbmVk
IGxvbmcgcmF0ZSk7CitpbnQgZHJtX2RwX2xpbmtfcmVtb3ZlX3JhdGUoc3RydWN0IGRybV9kcF9s
aW5rICpsaW5rLCB1bnNpZ25lZCBsb25nIHJhdGUpOwordm9pZCBkcm1fZHBfbGlua191cGRhdGVf
cmF0ZXMoc3RydWN0IGRybV9kcF9saW5rICpsaW5rKTsKKwogaW50IGRybV9kcF9saW5rX3Byb2Jl
KHN0cnVjdCBkcm1fZHBfYXV4ICphdXgsIHN0cnVjdCBkcm1fZHBfbGluayAqbGluayk7CiBpbnQg
ZHJtX2RwX2xpbmtfcG93ZXJfdXAoc3RydWN0IGRybV9kcF9hdXggKmF1eCwgc3RydWN0IGRybV9k
cF9saW5rICpsaW5rKTsKIGludCBkcm1fZHBfbGlua19wb3dlcl9kb3duKHN0cnVjdCBkcm1fZHBf
YXV4ICphdXgsIHN0cnVjdCBkcm1fZHBfbGluayAqbGluayk7Ci0tIAoyLjIzLjAKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
