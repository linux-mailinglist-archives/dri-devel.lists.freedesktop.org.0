Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9CBC85E424
	for <lists+dri-devel@lfdr.de>; Wed,  3 Jul 2019 14:42:39 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B1715897C5;
	Wed,  3 Jul 2019 12:42:37 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from foss.arm.com (foss.arm.com [217.140.110.172])
 by gabe.freedesktop.org (Postfix) with ESMTP id 2064D897C5
 for <dri-devel@lists.freedesktop.org>; Wed,  3 Jul 2019 12:42:36 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 3569A2B;
 Wed,  3 Jul 2019 05:42:35 -0700 (PDT)
Received: from [10.1.197.57] (e110467-lin.cambridge.arm.com [10.1.197.57])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 7E1223F703;
 Wed,  3 Jul 2019 05:42:33 -0700 (PDT)
Subject: Re: [PATCH 1/2] iommu: add support for drivers that manage iommu
 explicitly
To: Rob Clark <robdclark@gmail.com>, iommu@lists.linux-foundation.org,
 dri-devel@lists.freedesktop.org
References: <20190702202631.32148-1-robdclark@gmail.com>
 <20190702202631.32148-2-robdclark@gmail.com>
From: Robin Murphy <robin.murphy@arm.com>
Message-ID: <2d612bbc-2d2d-f718-1499-79d5a55e0d00@arm.com>
Date: Wed, 3 Jul 2019 13:42:32 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <20190702202631.32148-2-robdclark@gmail.com>
Content-Language: en-GB
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rob Clark <robdclark@chromium.org>, aarch64-laptops@lists.linaro.org,
 Ulf Hansson <ulf.hansson@linaro.org>,
 Heikki Krogerus <heikki.krogerus@linux.intel.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Bartosz Golaszewski <brgl@bgdev.pl>,
 "Rafael J. Wysocki" <rafael.j.wysocki@intel.com>,
 Rasmus Villemoes <linux@rasmusvillemoes.dk>, linux-kernel@vger.kernel.org,
 Sudeep Holla <sudeep.holla@arm.com>, Joe Perches <joe@perches.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gMDIvMDcvMjAxOSAyMToyNiwgUm9iIENsYXJrIHdyb3RlOgo+IEZyb206IFJvYiBDbGFyayA8
cm9iZGNsYXJrQGNocm9taXVtLm9yZz4KPiAKPiBBdm9pZCBhdHRhY2hpbmcgYW55IG5vbi1kcml2
ZXIgbWFuYWdlZCBkb21haW4gaWYgdGhlIGRyaXZlciBpbmRpY2F0ZXMKPiB0aGF0IGl0IG1hbmFn
ZXMgdGhlIGlvbW11IGRpcmVjdGx5Lgo+IAo+IFRoaXMgc29sdmVzIGEgY291cGxlIHByb2JsZW1z
IHRoYXQgZHJtL21zbSArIGFybS1zbW11IGhhcyB3aXRoIHRoZSBpb21tdQo+IGZyYW1ld29yazoK
PiAKPiAxKSBJbiBzb21lIGNhc2VzIHRoZSBib290bG9hZGVyIHRha2VzIHRoZSBpb21tdSBvdXQg
b2YgYnlwYXNzIGFuZAo+ICAgICBlbmFibGVzIHRoZSBkaXNwbGF5LiAgVGhpcyBpcyBpbiBwYXJ0
aWN1bGFyIGEgcHJvYmxlbSBvbiB0aGUgYWFyY2g2NAo+ICAgICBsYXB0b3BzIHRoYXQgZXhpc3Qg
dGhlc2UgZGF5cywgYW5kIG1vZGVybiBzbmFwZHJhZ29uIGFuZHJvaWQgZGV2aWNlcy4KPiAgICAg
KE9sZGVyIGRldmljZXMgYWxzbyBlbmFibGVkIHRoZSBkaXNwbGF5IGluIGJvb3Rsb2FkZXIgYnV0
IGRpZCBub3QKPiAgICAgdGFrZSB0aGUgaW9tbXUgb3V0IG9mIGJ5cGFzcy4pICBBdHRhY2hpbmcg
YSBETUEgb3IgSURFTlRJVFkgZG9tYWluCj4gICAgIHdoaWxlIHNjYW5vdXQgaXMgYWN0aXZlLCBi
ZWZvcmUgdGhlIGRyaXZlciBoYXMgYSBjaGFuY2UgdG8gaW50ZXJ2ZW5lLAo+ICAgICBtYWtlcyB0
aGluZ3MgZ28gKmJvb20qCgpJbiB0aGUgZ2VuZXJhbCBjYXNlLCB3ZSBoYXZlIHRvIGFzc3VtZSB0
aGF0IHRoaW5ncyBhbHJlYWR5IHdlbnQgYm9vbSAKbG9uZyBhZ28sIGFzIHNvb24gYXMgdGhlIElP
TU1VIGl0c2VsZiB3YXMgcHJvYmVkIGFuZCByZXNldC4gQnkgdGhlIHRpbWUgCndlIGdldCB0byB0
aGUgcG9pbnQgb2YgYmluZGluZyBvZiBhIGNsaWVudCBkcml2ZXIsIGFsc28gYXNzdW1lIHRoYXQg
dGhlIApJT01NVSBpcyBhbHJlYWR5IHBvd2VyZWQgb2ZmIGFuZCBzdG9wcGluZyB0cmFmZmljIGJl
Y2F1c2UgdGhlIFJQTSBkZXZpY2UgCmxpbmtzIGFyZW4ndCBpbiBwbGFjZSB5ZXQgYW5kIGl0IGJl
bGlldmVzIGl0c2VsZiB1bnVzZWQuCgo+IDIpIFdlIGFyZSBjdXJyZW50bHkgYmxvY2tlZCBvbiBs
YW5kaW5nIHN1cHBvcnQgZm9yIEdQVSBwZXItY29udGV4dAo+ICAgICBwYWdldGFibGVzIGJlY2F1
c2Ugb2YgdGhlIGRvbWFpbiBhdHRhY2hlZCBiZWZvcmUgZHJpdmVyJ3MgLT5wcm9iZSgpCj4gICAg
IGlzIGNhbGxlZC4KCkknbSBnZXR0aW5nIGEgbGl0dGxlIGZlZCB1cCBvZiBleHBsYWluaW5nIHRo
YXQgdGhhdCBwcm9ibGVtIGlzIHNwZWNpZmljIAp0byB0aGUgY3VycmVudCBiZWhhdmlvdXIgb2Yg
b25lIHBhcnRpY3VsYXIgSU9NTVUgZHJpdmVyIGFuZCB0cnlpbmcgdG8gCndvcmsgYXJvdW5kIGl0
IGFueXdoZXJlIG90aGVyIHRoYW4gaW4gdGhhdCBkcml2ZXIgaXMgYXQgYmVzdCBhbiAKdW5yZWxp
YWJsZSBoYWNrLgoKPiBUaGlzIHNvbHZlcyBib3RoIHByb2JsZW1zLgoKRm9yIGEgdmVyeSwgdmVy
eSBzcGVjaWZpYyB2YWx1ZSBvZiAic29sdmUiLi4uIDspCgo+IFNpZ25lZC1vZmYtYnk6IFJvYiBD
bGFyayA8cm9iZGNsYXJrQGNocm9taXVtLm9yZz4KPiAtLS0KPiAgIGRyaXZlcnMvaW9tbXUvaW9t
bXUuYyAgfCAxMSArKysrKysrKysrKwo+ICAgaW5jbHVkZS9saW51eC9kZXZpY2UuaCB8ICAzICsr
LQo+ICAgMiBmaWxlcyBjaGFuZ2VkLCAxMyBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCj4g
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvaW9tbXUvaW9tbXUuYyBiL2RyaXZlcnMvaW9tbXUvaW9t
bXUuYwo+IGluZGV4IDBjNjc0ZDgwYzM3Zi4uZWZhMDk1N2Y5NzcyIDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvaW9tbXUvaW9tbXUuYwo+ICsrKyBiL2RyaXZlcnMvaW9tbXUvaW9tbXUuYwo+IEBAIC0x
NTczLDYgKzE1NzMsMTcgQEAgc3RhdGljIGludCBfX2lvbW11X2F0dGFjaF9kZXZpY2Uoc3RydWN0
IGlvbW11X2RvbWFpbiAqZG9tYWluLAo+ICAgCSAgICBkb21haW4tPm9wcy0+aXNfYXR0YWNoX2Rl
ZmVycmVkKGRvbWFpbiwgZGV2KSkKPiAgIAkJcmV0dXJuIDA7Cj4gICAKPiArCS8qCj4gKwkgKiBJ
ZiBkcml2ZXIgaXMgZ29pbmcgdG8gbWFuYWdlIGlvbW11IGRpcmVjdGx5LCB0aGVuIGF2b2lkCj4g
KwkgKiBhdHRhY2hpbmcgYW55IG5vbiBkcml2ZXIgbWFuYWdlZCBkb21haW4uICBUaGVyZSBjb3Vs
ZAo+ICsJICogYmUgYWxyZWFkeSBhY3RpdmUgZG1hIHVuZGVyd2F5IChpZS4gc2Nhbm91dCBpbiBj
YXNlIG9mCj4gKwkgKiBib290bG9hZGVyIGVuYWJsZWQgZGlzcGxheSksIGFuZCBpbnRlcmZlcmlu
ZyB3aXRoIHRoYXQKPiArCSAqIHdpbGwgbWFrZSB0aGluZ3MgZ28gKmJvb20qCj4gKwkgKi8KPiAr
CWlmICgoZG9tYWluLT50eXBlICE9IElPTU1VX0RPTUFJTl9VTk1BTkFHRUQpICYmCj4gKwkgICAg
ZGV2LT5kcml2ZXIgJiYgZGV2LT5kcml2ZXItPmRyaXZlcl9tYW5hZ2VzX2lvbW11KQo+ICsJCXJl
dHVybiAwOwoKVGhpcyBsZWF2aW5nIHRoaW5ncyBoYWxmLWhhbmdpbmcgaXMgcmVhbGx5IHVnbHks
IGJ1dCBtb3JlIHRoYW4gdGhhdCBpdCAKYXNzdW1lcyB0aGF0IGFsbG9jYXRpbmcgYSBkZWZhdWx0
IGRvbWFpbiBpbiB0aGUgZmlyc3QgcGxhY2UgaXNuJ3QgCmRpc3J1cHRpdmUgLSBJJ20gbm90IDEw
MCUgc3VyZSB0aGF0J3MgKmFsd2F5cyogdGhlIGNhc2UgdG9kYXksIGFuZCBpdCdzIApkZWZpbml0
ZWx5IGxpa2VseSB0byBjaGFuZ2UgaW4gZnV0dXJlIGFzIHBhcnQgb2YgaW1wcm92aW5nIHRoZSBj
dXJyZW50IApyZXF1ZXN0X2RtX2Zvcl9kZXYoKSBtZWNoYW5pc20uIEFzIGl0IGhhcHBlbnMsIHRo
b3NlIHByb3Bvc2VkIGNoYW5nZXMgCndvdWxkIG5vdCBvbmx5IGJyZWFrIHRoaXMgaWRlYSwgYnV0
IG1ha2UgaXQgcmVkdW5kYW50LCBzaW5jZSB0aGV5J3JlIAphYm91dCBmb3JjaW5nIHRoZSBkZWZh
dWx0IGRvbWFpbiB0eXBlIHRvIHBhc3N0aHJvdWdoIG9uIGEgcGVyLWRldmljZSAKYmFzaXMsIHdo
aWNoIGxlYWRzIHRvIGFuIGVxdWl2YWxlbnQgZW5kIHJlc3VsdCB0byB0aGlzIHBhdGNoLCBidXQg
aW4gYSAKY2xlYW5lciBhbmQgbW9yZSByb2J1c3QgbWFubmVyLgoKUm9iaW4uCgo+ICsKPiAgIAlp
ZiAodW5saWtlbHkoZG9tYWluLT5vcHMtPmF0dGFjaF9kZXYgPT0gTlVMTCkpCj4gICAJCXJldHVy
biAtRU5PREVWOwo+ICAgCj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvZGV2aWNlLmggYi9p
bmNsdWRlL2xpbnV4L2RldmljZS5oCj4gaW5kZXggZTEzOGJhYWJlMDFlLi5kOThhYTRkM2M4YzMg
MTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9saW51eC9kZXZpY2UuaAo+ICsrKyBiL2luY2x1ZGUvbGlu
dXgvZGV2aWNlLmgKPiBAQCAtMjgyLDcgKzI4Miw4IEBAIHN0cnVjdCBkZXZpY2VfZHJpdmVyIHsK
PiAgIAlzdHJ1Y3QgbW9kdWxlCQkqb3duZXI7Cj4gICAJY29uc3QgY2hhcgkJKm1vZF9uYW1lOwkv
KiB1c2VkIGZvciBidWlsdC1pbiBtb2R1bGVzICovCj4gICAKPiAtCWJvb2wgc3VwcHJlc3NfYmlu
ZF9hdHRyczsJLyogZGlzYWJsZXMgYmluZC91bmJpbmQgdmlhIHN5c2ZzICovCj4gKwlib29sIHN1
cHByZXNzX2JpbmRfYXR0cnM6MTsJLyogZGlzYWJsZXMgYmluZC91bmJpbmQgdmlhIHN5c2ZzICov
Cj4gKwlib29sIGRyaXZlcl9tYW5hZ2VzX2lvbW11OjE7CS8qIGRyaXZlciBtYW5hZ2VzIElPTU1V
IGV4cGxpY2l0bHkgKi8KPiAgIAllbnVtIHByb2JlX3R5cGUgcHJvYmVfdHlwZTsKPiAgIAo+ICAg
CWNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQJKm9mX21hdGNoX3RhYmxlOwo+IApfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBs
aXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
