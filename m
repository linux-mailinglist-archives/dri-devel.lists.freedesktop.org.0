Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5AC7696D2B
	for <lists+dri-devel@lfdr.de>; Wed, 21 Aug 2019 01:21:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 737716E8DD;
	Tue, 20 Aug 2019 23:21:29 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qk1-x74a.google.com (mail-qk1-x74a.google.com
 [IPv6:2607:f8b0:4864:20::74a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 503996E8DD
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 23:21:28 +0000 (UTC)
Received: by mail-qk1-x74a.google.com with SMTP id y188so198613qke.18
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 16:21:28 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=6GIvcQlkCtdAi30r1LnLRHUgjIjXimHY6JEil5FCkXw=;
 b=XYeXfGqRG+CPleK+fgZdOQ+GgD7sr5XwgpBjV2S5wIdHqbPmVw9U9BexsyqIvYB5jm
 xjf9+0RfMPK9ZHAD9tnkqxbjuM0QDHFznXPpkS4bm03V3fA3B5SLwah74KAuKPBMFZ7b
 9XM37d4LZZn3YiUDHbo2nEFdT2rqMte6oeRuoCSd/EPsP/WVtR14h3FP5iiQThUYnOiI
 LihFU2JmL0L7P1N2b1oMjpFzcV9zCP/4K9XU54hTEI+gTEV5op1l0qst/9HIP+KzUFI4
 E+wb9NZpljO4t/ta6xkMhiaUlMt403HTzalofjmBMX4QgdzomOqKJlaVDxDFGKwnXWfp
 sryA==
X-Gm-Message-State: APjAAAVl3o0lvWso6jtS5+1f7plIE/JRwO+d7GvKcwcAshldqiia/omU
 7ecrFHaFi8sVI3H0aUAzyw4dpoxjbr1v7G/ukkHRKA==
X-Google-Smtp-Source: APXvYqxd7eNoHBnTYDwBmXbm9bp6qnWnVNc7tsUhOZdOd8/M7VsqlsRqVpVWg+4vwlQYZmXpHG33tTk6DdogMZWxDs1qaA==
X-Received: by 2002:ac8:7344:: with SMTP id q4mr29268226qtp.338.1566343287141; 
 Tue, 20 Aug 2019 16:21:27 -0700 (PDT)
Date: Tue, 20 Aug 2019 16:20:40 -0700
In-Reply-To: <20190820232046.50175-1-brendanhiggins@google.com>
Message-Id: <20190820232046.50175-13-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190820232046.50175-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.23.0.rc1.153.gdeed80330f-goog
Subject: [PATCH v14 12/18] kunit: test: add tests for KUnit managed resources
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=6GIvcQlkCtdAi30r1LnLRHUgjIjXimHY6JEil5FCkXw=;
 b=oVhAqCHfYnXucGOz017sxTeTlkCLNf6lBjDC8HpFiXB8yeBo5WR8Lip4M4FSL0JJbm
 jsUNdzPt3oHvxAhD69V2xLuHzolCc/lyn34zrZ/14EImCT586L+8HsZ8rWLt0aYvmnbp
 7CfmoI4KiX/Jg8x5mNQ75tRnyBci8RAsHR0uMmYAMeGpQw+aFRJxSnjg3VEBXNcWq6td
 Ijweh1XHlppsKGkteDdGx7Jcb7PTfIpoZnchD29E5soMUFsetBtk3c8AKMNIyNV4HfVc
 pI1uHahLpL+uyCNhMSDDuJPAGgtmhKTdFz+R3+Z6WJoPpAosekpQp2hgEwXUIMXEUH+U
 JJaA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com,
 Avinash Kondareddy <akndr41@gmail.com>, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogQXZpbmFzaCBLb25kYXJlZGR5IDxha25kcjQxQGdtYWlsLmNvbT4KCkFkZCB1bml0IHRl
c3RzIGZvciBLVW5pdCBtYW5hZ2VkIHJlc291cmNlcy4gS1VuaXQgbWFuYWdlZCByZXNvdXJjZXMK
KHN0cnVjdCBrdW5pdF9yZXNvdXJjZSkgYXJlIHJlc291cmNlcyB0aGF0IGFyZSBhdXRvbWF0aWNh
bGx5IGNsZWFuZWQgdXAKYXQgdGhlIGVuZCBvZiBhIEtVbml0IHRlc3QsIHNpbWlsYXIgdG8gdGhl
IGNvbmNlcHQgb2YgZGV2bV8qIG1hbmFnZWQKcmVzb3VyY2VzLgoKU2lnbmVkLW9mZi1ieTogQXZp
bmFzaCBLb25kYXJlZGR5IDxha25kcjQxQGdtYWlsLmNvbT4KU2lnbmVkLW9mZi1ieTogQnJlbmRh
biBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29tPgpSZXZpZXdlZC1ieTogR3JlZyBL
cm9haC1IYXJ0bWFuIDxncmVna2hAbGludXhmb3VuZGF0aW9uLm9yZz4KUmV2aWV3ZWQtYnk6IExv
Z2FuIEd1bnRob3JwZSA8bG9nYW5nQGRlbHRhdGVlLmNvbT4KUmV2aWV3ZWQtYnk6IFN0ZXBoZW4g
Qm95ZCA8c2JveWRAa2VybmVsLm9yZz4KLS0tCiBrdW5pdC90ZXN0LXRlc3QuYyB8IDIyOCArKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAxIGZpbGUgY2hhbmdl
ZCwgMjI4IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9rdW5pdC90ZXN0LXRlc3QuYyBiL2t1
bml0L3Rlc3QtdGVzdC5jCmluZGV4IGUwYWI0YmQ1NDZlYWMuLjVlYmUwNTlkMTZlMjUgMTAwNjQ0
Ci0tLSBhL2t1bml0L3Rlc3QtdGVzdC5jCisrKyBiL2t1bml0L3Rlc3QtdGVzdC5jCkBAIC0xMDEs
MyArMTAxLDIzMSBAQCBzdGF0aWMgc3RydWN0IGt1bml0X3N1aXRlIGt1bml0X3RyeV9jYXRjaF90
ZXN0X3N1aXRlID0gewogCS50ZXN0X2Nhc2VzID0ga3VuaXRfdHJ5X2NhdGNoX3Rlc3RfY2FzZXMs
CiB9Owoga3VuaXRfdGVzdF9zdWl0ZShrdW5pdF90cnlfY2F0Y2hfdGVzdF9zdWl0ZSk7CisKKy8q
CisgKiBDb250ZXh0IGZvciB0ZXN0aW5nIHRlc3QgbWFuYWdlZCByZXNvdXJjZXMKKyAqIGlzX3Jl
c291cmNlX2luaXRpYWxpemVkIGlzIHVzZWQgdG8gdGVzdCBhcmJpdHJhcnkgcmVzb3VyY2VzCisg
Ki8KK3N0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRleHQgeworCXN0cnVjdCBrdW5pdCB0
ZXN0OworCWJvb2wgaXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQ7CisJaW50IGFsbG9jYXRlX29yZGVy
WzJdOworCWludCBmcmVlX29yZGVyWzJdOworfTsKKworc3RhdGljIGludCBmYWtlX3Jlc291cmNl
X2luaXQoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMsIHZvaWQgKmNvbnRleHQpCit7CisJc3Ry
dWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gY29udGV4dDsKKworCXJlcy0+
YWxsb2NhdGlvbiA9ICZjdHgtPmlzX3Jlc291cmNlX2luaXRpYWxpemVkOworCWN0eC0+aXNfcmVz
b3VyY2VfaW5pdGlhbGl6ZWQgPSB0cnVlOworCXJldHVybiAwOworfQorCitzdGF0aWMgdm9pZCBm
YWtlX3Jlc291cmNlX2ZyZWUoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMpCit7CisJYm9vbCAq
aXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQgPSByZXMtPmFsbG9jYXRpb247CisKKwkqaXNfcmVzb3Vy
Y2VfaW5pdGlhbGl6ZWQgPSBmYWxzZTsKK30KKworc3RhdGljIHZvaWQga3VuaXRfcmVzb3VyY2Vf
dGVzdF9pbml0X3Jlc291cmNlcyhzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0IGt1bml0
X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsKKworCWt1bml0X2luaXRf
dGVzdCgmY3R4LT50ZXN0LCAidGVzdGluZ190ZXN0X2luaXRfdGVzdCIpOworCisJS1VOSVRfRVhQ
RUNUX1RSVUUodGVzdCwgbGlzdF9lbXB0eSgmY3R4LT50ZXN0LnJlc291cmNlcykpOworfQorCitz
dGF0aWMgdm9pZCBrdW5pdF9yZXNvdXJjZV90ZXN0X2FsbG9jX3Jlc291cmNlKHN0cnVjdCBrdW5p
dCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0ICpjdHggPSB0
ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzOworCWt1bml0X3Jlc291cmNl
X2ZyZWVfdCBmcmVlID0gZmFrZV9yZXNvdXJjZV9mcmVlOworCisJcmVzID0ga3VuaXRfYWxsb2Nf
YW5kX2dldF9yZXNvdXJjZSgmY3R4LT50ZXN0LAorCQkJCQkgICBmYWtlX3Jlc291cmNlX2luaXQs
CisJCQkJCSAgIGZha2VfcmVzb3VyY2VfZnJlZSwKKwkJCQkJICAgR0ZQX0tFUk5FTCwKKwkJCQkJ
ICAgY3R4KTsKKworCUtVTklUX0FTU0VSVF9OT1RfRVJSX09SX05VTEwodGVzdCwgcmVzKTsKKwlL
VU5JVF9FWFBFQ1RfUFRSX0VRKHRlc3QsCisJCQkgICAgJmN0eC0+aXNfcmVzb3VyY2VfaW5pdGlh
bGl6ZWQsCisJCQkgICAgKGJvb2wgKikgcmVzLT5hbGxvY2F0aW9uKTsKKwlLVU5JVF9FWFBFQ1Rf
VFJVRSh0ZXN0LCBsaXN0X2lzX2xhc3QoJnJlcy0+bm9kZSwgJmN0eC0+dGVzdC5yZXNvdXJjZXMp
KTsKKwlLVU5JVF9FWFBFQ1RfUFRSX0VRKHRlc3QsIGZyZWUsIHJlcy0+ZnJlZSk7Cit9CisKK3N0
YXRpYyB2b2lkIGt1bml0X3Jlc291cmNlX3Rlc3RfZGVzdHJveV9yZXNvdXJjZShzdHJ1Y3Qga3Vu
aXQgKnRlc3QpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0g
dGVzdC0+cHJpdjsKKwlzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlcyA9IGt1bml0X2FsbG9jX2Fu
ZF9nZXRfcmVzb3VyY2UoCisJCQkmY3R4LT50ZXN0LAorCQkJZmFrZV9yZXNvdXJjZV9pbml0LAor
CQkJZmFrZV9yZXNvdXJjZV9mcmVlLAorCQkJR0ZQX0tFUk5FTCwKKwkJCWN0eCk7CisKKwlLVU5J
VF9BU1NFUlRfRkFMU0UodGVzdCwKKwkJCSAgIGt1bml0X3Jlc291cmNlX2Rlc3Ryb3koJmN0eC0+
dGVzdCwKKwkJCQkJCSAga3VuaXRfcmVzb3VyY2VfaW5zdGFuY2VfbWF0Y2gsCisJCQkJCQkgIHJl
cy0+ZnJlZSwKKwkJCQkJCSAgcmVzLT5hbGxvY2F0aW9uKSk7CisKKwlLVU5JVF9FWFBFQ1RfRkFM
U0UodGVzdCwgY3R4LT5pc19yZXNvdXJjZV9pbml0aWFsaXplZCk7CisJS1VOSVRfRVhQRUNUX1RS
VUUodGVzdCwgbGlzdF9lbXB0eSgmY3R4LT50ZXN0LnJlc291cmNlcykpOworfQorCitzdGF0aWMg
dm9pZCBrdW5pdF9yZXNvdXJjZV90ZXN0X2NsZWFudXBfcmVzb3VyY2VzKHN0cnVjdCBrdW5pdCAq
dGVzdCkKK3sKKwlpbnQgaTsKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0ICpj
dHggPSB0ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzb3VyY2VzWzVdOwor
CisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUocmVzb3VyY2VzKTsgaSsrKSB7CisJCXJlc291
cmNlc1tpXSA9IGt1bml0X2FsbG9jX2FuZF9nZXRfcmVzb3VyY2UoJmN0eC0+dGVzdCwKKwkJCQkJ
CQkgICAgZmFrZV9yZXNvdXJjZV9pbml0LAorCQkJCQkJCSAgICBmYWtlX3Jlc291cmNlX2ZyZWUs
CisJCQkJCQkJICAgIEdGUF9LRVJORUwsCisJCQkJCQkJICAgIGN0eCk7CisJfQorCisJa3VuaXRf
Y2xlYW51cCgmY3R4LT50ZXN0KTsKKworCUtVTklUX0VYUEVDVF9UUlVFKHRlc3QsIGxpc3RfZW1w
dHkoJmN0eC0+dGVzdC5yZXNvdXJjZXMpKTsKK30KKworc3RhdGljIHZvaWQga3VuaXRfcmVzb3Vy
Y2VfdGVzdF9tYXJrX29yZGVyKGludCBvcmRlcl9hcnJheVtdLAorCQkJCQkgICBzaXplX3Qgb3Jk
ZXJfc2l6ZSwKKwkJCQkJICAgaW50IGtleSkKK3sKKwlpbnQgaTsKKworCWZvciAoaSA9IDA7IGkg
PCBvcmRlcl9zaXplICYmIG9yZGVyX2FycmF5W2ldOyBpKyspCisJCTsKKworCW9yZGVyX2FycmF5
W2ldID0ga2V5OworfQorCisjZGVmaW5lIEtVTklUX1JFU09VUkNFX1RFU1RfTUFSS19PUkRFUihj
dHgsIG9yZGVyX2ZpZWxkLCBrZXkpCQkgICAgICAgXAorCQlrdW5pdF9yZXNvdXJjZV90ZXN0X21h
cmtfb3JkZXIoY3R4LT5vcmRlcl9maWVsZCwJICAgICAgIFwKKwkJCQkJICAgICAgIEFSUkFZX1NJ
WkUoY3R4LT5vcmRlcl9maWVsZCksICAgXAorCQkJCQkgICAgICAga2V5KQorCitzdGF0aWMgaW50
IGZha2VfcmVzb3VyY2VfMl9pbml0KHN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzLCB2b2lkICpj
b250ZXh0KQoreworCXN0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRleHQgKmN0eCA9IGNv
bnRleHQ7CisKKwlLVU5JVF9SRVNPVVJDRV9URVNUX01BUktfT1JERVIoY3R4LCBhbGxvY2F0ZV9v
cmRlciwgMik7CisKKwlyZXMtPmFsbG9jYXRpb24gPSBjdHg7CisKKwlyZXR1cm4gMDsKK30KKwor
c3RhdGljIHZvaWQgZmFrZV9yZXNvdXJjZV8yX2ZyZWUoc3RydWN0IGt1bml0X3Jlc291cmNlICpy
ZXMpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gcmVzLT5h
bGxvY2F0aW9uOworCisJS1VOSVRfUkVTT1VSQ0VfVEVTVF9NQVJLX09SREVSKGN0eCwgZnJlZV9v
cmRlciwgMik7Cit9CisKK3N0YXRpYyBpbnQgZmFrZV9yZXNvdXJjZV8xX2luaXQoc3RydWN0IGt1
bml0X3Jlc291cmNlICpyZXMsIHZvaWQgKmNvbnRleHQpCit7CisJc3RydWN0IGt1bml0X3Rlc3Rf
cmVzb3VyY2VfY29udGV4dCAqY3R4ID0gY29udGV4dDsKKworCWt1bml0X2FsbG9jX2FuZF9nZXRf
cmVzb3VyY2UoJmN0eC0+dGVzdCwKKwkJCQkgICAgIGZha2VfcmVzb3VyY2VfMl9pbml0LAorCQkJ
CSAgICAgZmFrZV9yZXNvdXJjZV8yX2ZyZWUsCisJCQkJICAgICBHRlBfS0VSTkVMLAorCQkJCSAg
ICAgY3R4KTsKKworCUtVTklUX1JFU09VUkNFX1RFU1RfTUFSS19PUkRFUihjdHgsIGFsbG9jYXRl
X29yZGVyLCAxKTsKKworCXJlcy0+YWxsb2NhdGlvbiA9IGN0eDsKKworCXJldHVybiAwOworfQor
CitzdGF0aWMgdm9pZCBmYWtlX3Jlc291cmNlXzFfZnJlZShzdHJ1Y3Qga3VuaXRfcmVzb3VyY2Ug
KnJlcykKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0ICpjdHggPSByZXMt
PmFsbG9jYXRpb247CisKKwlLVU5JVF9SRVNPVVJDRV9URVNUX01BUktfT1JERVIoY3R4LCBmcmVl
X29yZGVyLCAxKTsKK30KKworLyoKKyAqIFRPRE8oYnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbSk6
IHJlcGxhY2UgdGhlIGFycmF5cyB0aGF0IGtlZXAgdHJhY2sgb2YgdGhlCisgKiBvcmRlciBvZiBh
bGxvY2F0aW9uIGFuZCBmcmVlaW5nIHdpdGggc3RyaWN0IG1vY2tzIHVzaW5nIHRoZSBJTl9TRVFV
RU5DRSBtYWNybworICogdG8gYXNzZXJ0IGFsbG9jYXRpb24gYW5kIGZyZWVpbmcgb3JkZXIgd2hl
biB0aGUgZmVhdHVyZSBiZWNvbWVzIGF2YWlsYWJsZS4KKyAqLworc3RhdGljIHZvaWQga3VuaXRf
cmVzb3VyY2VfdGVzdF9wcm9wZXJfZnJlZV9vcmRlcmluZyhzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7
CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsK
KworCS8qIGZha2VfcmVzb3VyY2VfMSBhbGxvY2F0ZXMgYSBmYWtlX3Jlc291cmNlXzIgaW4gaXRz
IGluaXQuICovCisJa3VuaXRfYWxsb2NfYW5kX2dldF9yZXNvdXJjZSgmY3R4LT50ZXN0LAorCQkJ
CSAgICAgZmFrZV9yZXNvdXJjZV8xX2luaXQsCisJCQkJICAgICBmYWtlX3Jlc291cmNlXzFfZnJl
ZSwKKwkJCQkgICAgIEdGUF9LRVJORUwsCisJCQkJICAgICBjdHgpOworCisJLyoKKwkgKiBTaW5j
ZSBmYWtlX3Jlc291cmNlXzJfaW5pdCBjYWxscyBLVU5JVF9SRVNPVVJDRV9URVNUX01BUktfT1JE
RVIKKwkgKiBiZWZvcmUgcmV0dXJuaW5nIHRvIGZha2VfcmVzb3VyY2VfMV9pbml0LCBpdCBzaG91
bGQgYmUgdGhlIGZpcnN0IHRvCisJICogcHV0IGl0cyBrZXkgaW4gdGhlIGFsbG9jYXRlX29yZGVy
IGFycmF5LgorCSAqLworCUtVTklUX0VYUEVDVF9FUSh0ZXN0LCBjdHgtPmFsbG9jYXRlX29yZGVy
WzBdLCAyKTsKKwlLVU5JVF9FWFBFQ1RfRVEodGVzdCwgY3R4LT5hbGxvY2F0ZV9vcmRlclsxXSwg
MSk7CisKKwlrdW5pdF9jbGVhbnVwKCZjdHgtPnRlc3QpOworCisJLyoKKwkgKiBCZWNhdXNlIGZh
a2VfcmVzb3VyY2VfMiBmaW5pc2hlcyBhbGxvY2F0aW9uIGJlZm9yZSBmYWtlX3Jlc291cmNlXzEs
CisJICogZmFrZV9yZXNvdXJjZV8xIHNob3VsZCBiZSBmcmVlZCBmaXJzdCBzaW5jZSBpdCBjb3Vs
ZCBkZXBlbmQgb24KKwkgKiBmYWtlX3Jlc291cmNlXzIuCisJICovCisJS1VOSVRfRVhQRUNUX0VR
KHRlc3QsIGN0eC0+ZnJlZV9vcmRlclswXSwgMSk7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIGN0
eC0+ZnJlZV9vcmRlclsxXSwgMik7Cit9CisKK3N0YXRpYyBpbnQga3VuaXRfcmVzb3VyY2VfdGVz
dF9pbml0KHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJj
ZV9jb250ZXh0ICpjdHggPQorCQkJa3phbGxvYyhzaXplb2YoKmN0eCksIEdGUF9LRVJORUwpOwor
CisJS1VOSVRfQVNTRVJUX05PVF9FUlJfT1JfTlVMTCh0ZXN0LCBjdHgpOworCisJdGVzdC0+cHJp
diA9IGN0eDsKKworCWt1bml0X2luaXRfdGVzdCgmY3R4LT50ZXN0LCAidGVzdF90ZXN0X2NvbnRl
eHQiKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgdm9pZCBrdW5pdF9yZXNvdXJjZV90ZXN0
X2V4aXQoc3RydWN0IGt1bml0ICp0ZXN0KQoreworCXN0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNl
X2NvbnRleHQgKmN0eCA9IHRlc3QtPnByaXY7CisKKwlrdW5pdF9jbGVhbnVwKCZjdHgtPnRlc3Qp
OworCWtmcmVlKGN0eCk7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qga3VuaXRfY2FzZSBrdW5pdF9yZXNv
dXJjZV90ZXN0X2Nhc2VzW10gPSB7CisJS1VOSVRfQ0FTRShrdW5pdF9yZXNvdXJjZV90ZXN0X2lu
aXRfcmVzb3VyY2VzKSwKKwlLVU5JVF9DQVNFKGt1bml0X3Jlc291cmNlX3Rlc3RfYWxsb2NfcmVz
b3VyY2UpLAorCUtVTklUX0NBU0Uoa3VuaXRfcmVzb3VyY2VfdGVzdF9kZXN0cm95X3Jlc291cmNl
KSwKKwlLVU5JVF9DQVNFKGt1bml0X3Jlc291cmNlX3Rlc3RfY2xlYW51cF9yZXNvdXJjZXMpLAor
CUtVTklUX0NBU0Uoa3VuaXRfcmVzb3VyY2VfdGVzdF9wcm9wZXJfZnJlZV9vcmRlcmluZyksCisJ
e30KK307CisKK3N0YXRpYyBzdHJ1Y3Qga3VuaXRfc3VpdGUga3VuaXRfcmVzb3VyY2VfdGVzdF9z
dWl0ZSA9IHsKKwkubmFtZSA9ICJrdW5pdC1yZXNvdXJjZS10ZXN0IiwKKwkuaW5pdCA9IGt1bml0
X3Jlc291cmNlX3Rlc3RfaW5pdCwKKwkuZXhpdCA9IGt1bml0X3Jlc291cmNlX3Rlc3RfZXhpdCwK
KwkudGVzdF9jYXNlcyA9IGt1bml0X3Jlc291cmNlX3Rlc3RfY2FzZXMsCit9Owora3VuaXRfdGVz
dF9zdWl0ZShrdW5pdF9yZXNvdXJjZV90ZXN0X3N1aXRlKTsKLS0gCjIuMjMuMC5yYzEuMTUzLmdk
ZWVkODAzMzBmLWdvb2cKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1k
ZXZlbA==
