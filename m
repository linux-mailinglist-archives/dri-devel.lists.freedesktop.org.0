Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 11B36348CE8
	for <lists+dri-devel@lfdr.de>; Thu, 25 Mar 2021 10:30:18 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 25C536ECEA;
	Thu, 25 Mar 2021 09:30:07 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lf1-x12c.google.com (mail-lf1-x12c.google.com
 [IPv6:2a00:1450:4864:20::12c])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 699376EB40
 for <dri-devel@lists.freedesktop.org>; Thu, 25 Mar 2021 08:22:24 +0000 (UTC)
Received: by mail-lf1-x12c.google.com with SMTP id i26so1271442lfl.1
 for <dri-devel@lists.freedesktop.org>; Thu, 25 Mar 2021 01:22:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=G826T6os5KhrXWhgWWSol9eRD4q55UejsVL4Aih0kVk=;
 b=nkK7ygHCjzogkk85Hs85aPvKDl9+y9aHUUxCc/JPwvqHRwreCYcqEoBSlHZJRAC526
 meVjDtOWr3Ub1/hGxUxqgGg23+WyX1Q3jXCxhvy0T8e8vEwq/Kg0ulhjPdpUuQpD4odT
 zP3buTH4Crg4mBy7ydWLObie0uC0qdQYAYwZmxwD2bPwxYLZXAgi6/K+kTe4PVTAmxpf
 2caREH833aSsd+iiEll92r2kWBUdOh+mh2F+em2BveLKygEEd1vCAcpW0tJhSp2mtGhv
 cpEfskC2Ce0sPmwnC40/XP/LGo1gpO9MhCBwm8r0noLNnPP2iS442cFkXcJdQh5fRb8i
 asPQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=G826T6os5KhrXWhgWWSol9eRD4q55UejsVL4Aih0kVk=;
 b=kRVBBW/wOZVX0Wxpg+oFLomZnlkQGVZpd60gHu+NlUbEqz8zoMDWVdw1vRYk2Ogh6V
 urQ8E83jEIldVnnUf0i11xsKSGxBXyiURI5sSAnl+qFVaChqXToEzOp8jOE2NCTMbh/F
 Xio9vuGXkoozhg0C66WEeNToO7LrDSo/YloEhT7k7Q62jPZhKFQhDUyTagxZdMExawno
 IKNbmPpIm4zGPs0/OovIbnNxmypGVlklcf1DFRkLGFN8SFNh5LQMiZ2dsXRGYohZv4p0
 KpAHM2v7oy0N6gt++CtwuzZiT+xtD0TXLGQfIvo1bn4Xg67Fzgs+BuMu4p1Jsqr567n1
 9kWg==
X-Gm-Message-State: AOAM531XxMb/OO17VefScMPthrQrNno+zB3tBhm2howaSHsz0MNXw246
 zOvYMSkmQLJo35pEdKDYwz4sYg0GlJ1Mbe1tRJg=
X-Google-Smtp-Source: ABdhPJyilmo5xJ3ryeQb1hDSfMNJ6g9UEiWKYjSioLwKiFVpAG+2I7g0hvodsspIy0sK9ApNIQWpYBymBEszsmTSPio=
X-Received: by 2002:a05:6512:1192:: with SMTP id
 g18mr4084205lfr.408.1616660542638; 
 Thu, 25 Mar 2021 01:22:22 -0700 (PDT)
MIME-Version: 1.0
References: <1608217244-314-1-git-send-email-u0084500@gmail.com>
 <1608217244-314-5-git-send-email-u0084500@gmail.com>
In-Reply-To: <1608217244-314-5-git-send-email-u0084500@gmail.com>
From: ChiYuan Huang <u0084500@gmail.com>
Date: Thu, 25 Mar 2021 16:22:11 +0800
Message-ID: <CADiBU38aafx9H1Skz_hHmmkQgCGJSssE1VYBC6WddnGfR3ux1w@mail.gmail.com>
Subject: Re: [PATCH v5 5/6] backlight: rt4831: Adds support for Richtek RT4831
 backlight
To: Lee Jones <lee.jones@linaro.org>, lgirdwood@gmail.com, 
 Mark Brown <broonie@kernel.org>, Daniel Thompson <daniel.thompson@linaro.org>,
 jingoohan1@gmail.com, b.zolnierkie@samsung.com
X-Mailman-Approved-At: Thu, 25 Mar 2021 09:30:06 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: ChiYuan Huang <cy_huang@richtek.com>, linux-fbdev@vger.kernel.org,
 lkml <linux-kernel@vger.kernel.org>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RGVhciByZXZpZXdlcnM6CgogICAgICAgICAgIERpZG4ndCBnZXQgYW55IHJlc3BvbnNlIGFib3V0
IHRoaXMgYmFja2xpZ2h0IHBhdGNoLgpJcyB0aGVyZSBhbnkgcGFydCBuZWVkIHRvIGJlIHJlZmlu
ZWQ/CgpjeV9odWFuZyA8dTAwODQ1MDBAZ21haWwuY29tPiDmlrwgMjAyMOW5tDEy5pyIMTfml6Ug
6YCx5ZubIOS4i+WNiDExOjAx5a+r6YGT77yaCj4KPiBGcm9tOiBDaGlZdWFuIEh1YW5nIDxjeV9o
dWFuZ0ByaWNodGVrLmNvbT4KPgo+IEFkZHMgc3VwcG9ydCBmb3IgUmljaHRlayBSVDQ4MzEgYmFj
a2xpZ2h0Lgo+Cj4gU2lnbmVkLW9mZi1ieTogQ2hpWXVhbiBIdWFuZyA8Y3lfaHVhbmdAcmljaHRl
ay5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L0tjb25maWcgICAgICAgICAg
ICB8ICAgOCArKwo+ICBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9NYWtlZmlsZSAgICAgICAgICAg
fCAgIDEgKwo+ICBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9ydDQ4MzEtYmFja2xpZ2h0LmMgfCAy
MTkgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKPiAgMyBmaWxlcyBjaGFuZ2VkLCAyMjgg
aW5zZXJ0aW9ucygrKQo+ICBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy92aWRlby9iYWNrbGln
aHQvcnQ0ODMxLWJhY2tsaWdodC5jCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNr
bGlnaHQvS2NvbmZpZyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L0tjb25maWcKPiBpbmRleCBk
ODNjODdiLi42NjZiZGIwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L0tj
b25maWcKPiArKysgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9LY29uZmlnCj4gQEAgLTI4OSw2
ICsyODksMTQgQEAgY29uZmlnIEJBQ0tMSUdIVF9RQ09NX1dMRUQKPiAgICAgICAgICAgSWYgeW91
IGhhdmUgdGhlIFF1YWxjb21tIFBNSUMsIHNheSBZIHRvIGVuYWJsZSBhIGRyaXZlciBmb3IgdGhl
Cj4gICAgICAgICAgIFdMRUQgYmxvY2suIEN1cnJlbnRseSBpdCBzdXBwb3J0cyBQTTg5NDEgYW5k
IFBNSTg5OTguCj4KPiArY29uZmlnIEJBQ0tMSUdIVF9SVDQ4MzEKPiArICAgICAgIHRyaXN0YXRl
ICJSaWNodGVrIFJUNDgzMSBCYWNrbGlnaHQgRHJpdmVyIgo+ICsgICAgICAgZGVwZW5kcyBvbiBN
RkRfUlQ0ODMxCj4gKyAgICAgICBoZWxwCj4gKyAgICAgICAgIFRoaXMgZW5hYmxlcyBzdXBwb3J0
IGZvciBSaWNodGVrIFJUNDgzMSBCYWNrbGlnaHQgZHJpdmVyLgo+ICsgICAgICAgICBJdCdzIGNv
bW1vbnQgdXNlZCB0byBkcml2ZSB0aGUgZGlzcGxheSBXTEVELiBUaGVyZSdyZSBmb3VyIGNoYW5u
ZWxzCj4gKyAgICAgICAgIGluaXNkZSwgYW5kIGVhY2ggY2hhbm5lbCBjYW4gcHJvdmlkZSB1cCB0
byAzMG1BIGN1cnJlbnQuCj4gKwo+ICBjb25maWcgQkFDS0xJR0hUX1NBSEFSQQo+ICAgICAgICAg
dHJpc3RhdGUgIlRhYmxldGtpb3NrIFNhaGFyYSBUb3VjaC1pVCBCYWNrbGlnaHQgRHJpdmVyIgo+
ICAgICAgICAgZGVwZW5kcyBvbiBYODYKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNr
bGlnaHQvTWFrZWZpbGUgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9NYWtlZmlsZQo+IGluZGV4
IDY4NWYzZjEuLmNhZTJjODMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQv
TWFrZWZpbGUKPiArKysgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9NYWtlZmlsZQo+IEBAIC00
OSw2ICs0OSw3IEBAIG9iai0kKENPTkZJR19CQUNLTElHSFRfUEFORE9SQSkgICAgICAgICAgICAg
ICArPSBwYW5kb3JhX2JsLm8KPiAgb2JqLSQoQ09ORklHX0JBQ0tMSUdIVF9QQ0Y1MDYzMykgICAg
ICAgKz0gcGNmNTA2MzMtYmFja2xpZ2h0Lm8KPiAgb2JqLSQoQ09ORklHX0JBQ0tMSUdIVF9QV00p
ICAgICAgICAgICAgKz0gcHdtX2JsLm8KPiAgb2JqLSQoQ09ORklHX0JBQ0tMSUdIVF9RQ09NX1dM
RUQpICAgICAgKz0gcWNvbS13bGVkLm8KPiArb2JqLSQoQ09ORklHX0JBQ0tMSUdIVF9SVDQ4MzEp
ICAgICAgICAgKz0gcnQ0ODMxLWJhY2tsaWdodC5vCj4gIG9iai0kKENPTkZJR19CQUNLTElHSFRf
U0FIQVJBKSAgICAgICAgICs9IGtiMzg4Nl9ibC5vCj4gIG9iai0kKENPTkZJR19CQUNLTElHSFRf
U0tZODE0NTIpICAgICAgICs9IHNreTgxNDUyLWJhY2tsaWdodC5vCj4gIG9iai0kKENPTkZJR19C
QUNLTElHSFRfVE9TQSkgICAgICAgICAgICs9IHRvc2FfYmwubwo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL3ZpZGVvL2JhY2tsaWdodC9ydDQ4MzEtYmFja2xpZ2h0LmMgYi9kcml2ZXJzL3ZpZGVvL2Jh
Y2tsaWdodC9ydDQ4MzEtYmFja2xpZ2h0LmMKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4
IDAwMDAwMDAwLi44MTZjNGQ2Cj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL2RyaXZlcnMvdmlkZW8v
YmFja2xpZ2h0L3J0NDgzMS1iYWNrbGlnaHQuYwo+IEBAIC0wLDAgKzEsMjE5IEBACj4gKy8vIFNQ
RFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkKPiArCj4gKyNpbmNsdWRlIDxkdC1i
aW5kaW5ncy9sZWRzL3J0NDgzMS1iYWNrbGlnaHQuaD4KPiArI2luY2x1ZGUgPGxpbnV4L2JhY2ts
aWdodC5oPgo+ICsjaW5jbHVkZSA8bGludXgvYml0b3BzLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9r
ZXJuZWwuaD4KPiArI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgo+ICsjaW5jbHVkZSA8bGludXgv
bXV0ZXguaD4KPiArI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgo+ICsjaW5jbHVk
ZSA8bGludXgvcHJvcGVydHkuaD4KPiArI2luY2x1ZGUgPGxpbnV4L3JlZ21hcC5oPgo+ICsKPiAr
I2RlZmluZSBSVDQ4MzFfUkVHX0JMQ0ZHICAgICAgIDB4MDIKPiArI2RlZmluZSBSVDQ4MzFfUkVH
X0JMRElNTCAgICAgIDB4MDQKPiArI2RlZmluZSBSVDQ4MzFfUkVHX0VOQUJMRSAgICAgIDB4MDgK
PiArCj4gKyNkZWZpbmUgQkxfTUFYX0JSSUdIVE5FU1MgICAgICAyMDQ4Cj4gKwo+ICsjZGVmaW5l
IFJUNDgzMV9CTE9WUF9NQVNLICAgICAgR0VOTUFTSyg3LCA1KQo+ICsjZGVmaW5lIFJUNDgzMV9C
TE9WUF9TSElGVCAgICAgNQo+ICsjZGVmaW5lIFJUNDgzMV9CTFBXTUVOX01BU0sgICAgQklUKDAp
Cj4gKyNkZWZpbmUgUlQ0ODMxX0JMRU5fTUFTSyAgICAgICBCSVQoNCkKPiArI2RlZmluZSBSVDQ4
MzFfQkxDSF9NQVNLICAgICAgIEdFTk1BU0soMywgMCkKPiArI2RlZmluZSBSVDQ4MzFfQkxESU1M
X01BU0sgICAgIEdFTk1BU0soMiwgMCkKPiArI2RlZmluZSBSVDQ4MzFfQkxESU1IX01BU0sgICAg
IEdFTk1BU0soMTAsIDMpCj4gKyNkZWZpbmUgUlQ0ODMxX0JMRElNSF9TSElGVCAgICAzCj4gKwo+
ICtzdHJ1Y3QgcnQ0ODMxX3ByaXYgewo+ICsgICAgICAgc3RydWN0IHJlZ21hcCAqcmVnbWFwOwo+
ICsgICAgICAgc3RydWN0IG11dGV4IGxvY2s7Cj4gKyAgICAgICBzdHJ1Y3QgYmFja2xpZ2h0X2Rl
dmljZSAqYmw7Cj4gK307Cj4gKwo+ICtzdGF0aWMgaW50IHJ0NDgzMV9ibF91cGRhdGVfc3RhdHVz
KHN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpibF9kZXYpCj4gK3sKPiArICAgICAgIHN0cnVjdCBy
dDQ4MzFfcHJpdiAqcHJpdiA9IGJsX2dldF9kYXRhKGJsX2Rldik7Cj4gKyAgICAgICBpbnQgYnJp
Z2h0bmVzcyA9IGJhY2tsaWdodF9nZXRfYnJpZ2h0bmVzcyhibF9kZXYpOwo+ICsgICAgICAgdW5z
aWduZWQgaW50IGVuYWJsZSA9IGJyaWdodG5lc3MgPyBSVDQ4MzFfQkxFTl9NQVNLIDogMDsKPiAr
ICAgICAgIHU4IHZbMl07Cj4gKyAgICAgICBpbnQgcmV0Owo+ICsKPiArICAgICAgIG11dGV4X2xv
Y2soJnByaXYtPmxvY2spOwo+ICsKPiArICAgICAgIGlmIChicmlnaHRuZXNzKSB7Cj4gKyAgICAg
ICAgICAgICAgIHZbMF0gPSAoYnJpZ2h0bmVzcyAtIDEpICYgUlQ0ODMxX0JMRElNTF9NQVNLOwo+
ICsgICAgICAgICAgICAgICB2WzFdID0gKChicmlnaHRuZXNzIC0gMSkgJiBSVDQ4MzFfQkxESU1I
X01BU0spID4+IFJUNDgzMV9CTERJTUhfU0hJRlQ7Cj4gKwo+ICsgICAgICAgICAgICAgICByZXQg
PSByZWdtYXBfcmF3X3dyaXRlKHByaXYtPnJlZ21hcCwgUlQ0ODMxX1JFR19CTERJTUwsIHYsIHNp
emVvZih2KSk7Cj4gKyAgICAgICAgICAgICAgIGlmIChyZXQpCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgZ290byB1bmxvY2s7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgcmV0ID0gcmVnbWFw
X3VwZGF0ZV9iaXRzKHByaXYtPnJlZ21hcCwgUlQ0ODMxX1JFR19FTkFCTEUsIFJUNDgzMV9CTEVO
X01BU0ssIGVuYWJsZSk7Cj4gKwo+ICt1bmxvY2s6Cj4gKyAgICAgICBtdXRleF91bmxvY2soJnBy
aXYtPmxvY2spOwo+ICsgICAgICAgcmV0dXJuIHJldDsKPiArfQo+ICsKPiArc3RhdGljIGludCBy
dDQ4MzFfYmxfZ2V0X2JyaWdodG5lc3Moc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJsX2RldikK
PiArewo+ICsgICAgICAgc3RydWN0IHJ0NDgzMV9wcml2ICpwcml2ID0gYmxfZ2V0X2RhdGEoYmxf
ZGV2KTsKPiArICAgICAgIHVuc2lnbmVkIGludCB2YWw7Cj4gKyAgICAgICB1OCB2WzJdOwo+ICsg
ICAgICAgaW50IHJldDsKPiArCj4gKyAgICAgICBtdXRleF9sb2NrKCZwcml2LT5sb2NrKTsKPiAr
Cj4gKyAgICAgICByZXQgPSByZWdtYXBfcmVhZChwcml2LT5yZWdtYXAsIFJUNDgzMV9SRUdfRU5B
QkxFLCAmdmFsKTsKPiArICAgICAgIGlmIChyZXQpCj4gKyAgICAgICAgICAgICAgIHJldHVybiBy
ZXQ7Cj4gKwo+ICsgICAgICAgaWYgKCEodmFsICYgUlQ0ODMxX0JMRU5fTUFTSykpIHsKPiArICAg
ICAgICAgICAgICAgcmV0ID0gMDsKPiArICAgICAgICAgICAgICAgZ290byB1bmxvY2s7Cj4gKyAg
ICAgICB9Cj4gKwo+ICsgICAgICAgcmV0ID0gcmVnbWFwX3Jhd19yZWFkKHByaXYtPnJlZ21hcCwg
UlQ0ODMxX1JFR19CTERJTUwsIHYsIHNpemVvZih2KSk7Cj4gKyAgICAgICBpZiAocmV0KQo+ICsg
ICAgICAgICAgICAgICBnb3RvIHVubG9jazsKPiArCj4gKyAgICAgICByZXQgPSAodlsxXSA8PCBS
VDQ4MzFfQkxESU1IX1NISUZUKSArICh2WzBdICYgUlQ0ODMxX0JMRElNTF9NQVNLKSArIDE7Cj4g
Kwo+ICt1bmxvY2s6Cj4gKyAgICAgICBtdXRleF91bmxvY2soJnByaXYtPmxvY2spOwo+ICsgICAg
ICAgcmV0dXJuIHJldDsKPiArfQo+ICsKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBiYWNrbGlnaHRf
b3BzIHJ0NDgzMV9ibF9vcHMgPSB7Cj4gKyAgICAgICAub3B0aW9ucyA9IEJMX0NPUkVfU1VTUEVO
RFJFU1VNRSwKPiArICAgICAgIC51cGRhdGVfc3RhdHVzID0gcnQ0ODMxX2JsX3VwZGF0ZV9zdGF0
dXMsCj4gKyAgICAgICAuZ2V0X2JyaWdodG5lc3MgPSBydDQ4MzFfYmxfZ2V0X2JyaWdodG5lc3Ms
Cj4gK307Cj4gKwo+ICtzdGF0aWMgaW50IHJ0NDgzMV9pbml0X2RldmljZV9wcm9wZXJ0aWVzKHN0
cnVjdCBydDQ4MzFfcHJpdiAqcHJpdiwgc3RydWN0IGRldmljZSAqZGV2LAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBiYWNrbGlnaHRfcHJvcGVydGll
cyAqYmxfcHJvcHMpCj4gK3sKPiArICAgICAgIHU4IHByb3B2YWw7Cj4gKyAgICAgICB1MzIgYnJp
Z2h0bmVzczsKPiArICAgICAgIHVuc2lnbmVkIGludCB2YWwgPSAwOwo+ICsgICAgICAgaW50IHJl
dDsKPiArCj4gKyAgICAgICAvKiBjb21tb24gcHJvcGVydGllcyAqLwo+ICsgICAgICAgcmV0ID0g
ZGV2aWNlX3Byb3BlcnR5X3JlYWRfdTMyKGRldiwgIm1heC1icmlnaHRuZXNzIiwgJmJyaWdodG5l
c3MpOwo+ICsgICAgICAgaWYgKHJldCkgewo+ICsgICAgICAgICAgICAgICBkZXZfd2FybihkZXYs
ICJtYXgtYnJpZ2h0bmVzcyBEVCBwcm9wZXJ0eSBtaXNzaW5nLCB1c2UgSFcgbWF4IGFzIGRlZmF1
bHRcbiIpOwo+ICsgICAgICAgICAgICAgICBicmlnaHRuZXNzID0gQkxfTUFYX0JSSUdIVE5FU1M7
Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgYmxfcHJvcHMtPm1heF9icmlnaHRuZXNzID0gbWlu
X3QodTMyLCBicmlnaHRuZXNzLCBCTF9NQVhfQlJJR0hUTkVTUyk7Cj4gKwo+ICsgICAgICAgcmV0
ID0gZGV2aWNlX3Byb3BlcnR5X3JlYWRfdTMyKGRldiwgImRlZmF1bHQtYnJpZ2h0bmVzcyIsICZi
cmlnaHRuZXNzKTsKPiArICAgICAgIGlmIChyZXQpIHsKPiArICAgICAgICAgICAgICAgZGV2X3dh
cm4oZGV2LCAiZGVmYXVsdC1icmlnaHRuZXNzIERUIHByb3BlcnR5IG1pc3NpbmcsIHVzZSBtYXgg
bGltaXQgYXMgZGVmYXVsdFxuIik7Cj4gKyAgICAgICAgICAgICAgIGJyaWdodG5lc3MgPSBibF9w
cm9wcy0+bWF4X2JyaWdodG5lc3M7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgYmxfcHJvcHMt
PmJyaWdodG5lc3MgPSBtaW5fdCh1MzIsIGJyaWdodG5lc3MsIGJsX3Byb3BzLT5tYXhfYnJpZ2h0
bmVzcyk7Cj4gKwo+ICsgICAgICAgLyogdmVuZG9yIHByb3BlcnRpZXMgKi8KPiArICAgICAgIGlm
IChkZXZpY2VfcHJvcGVydHlfcmVhZF9ib29sKGRldiwgInJpY2h0ZWsscHdtLWVuYWJsZSIpKQo+
ICsgICAgICAgICAgICAgICB2YWwgPSBSVDQ4MzFfQkxQV01FTl9NQVNLOwo+ICsKPiArICAgICAg
IHJldCA9IHJlZ21hcF91cGRhdGVfYml0cyhwcml2LT5yZWdtYXAsIFJUNDgzMV9SRUdfQkxDRkcs
IFJUNDgzMV9CTFBXTUVOX01BU0ssIHZhbCk7Cj4gKyAgICAgICBpZiAocmV0KQo+ICsgICAgICAg
ICAgICAgICByZXR1cm4gcmV0Owo+ICsKPiArICAgICAgIHJldCA9IGRldmljZV9wcm9wZXJ0eV9y
ZWFkX3U4KGRldiwgInJpY2h0ZWssYmxlZC1vdnAtc2VsIiwgJnByb3B2YWwpOwo+ICsgICAgICAg
aWYgKHJldCkgewo+ICsgICAgICAgICAgICAgICBkZXZfd2FybihkZXYsICJyaWNodGVrLGJsZWQt
b3ZwLXNlbCBEVCBwcm9wZXJ0eSBtaXNzaW5nLCB1c2UgZGVmYXVsdCAyMVZcbiIpOwo+ICsgICAg
ICAgICAgICAgICBwcm9wdmFsID0gUlQ0ODMxX0JMT1ZQTFZMXzIxVjsKPiArICAgICAgIH0KPiAr
Cj4gKyAgICAgICBwcm9wdmFsID0gbWluX3QodTgsIHByb3B2YWwsIFJUNDgzMV9CTE9WUExWTF8y
OVYpOwo+ICsgICAgICAgcmV0ID0gcmVnbWFwX3VwZGF0ZV9iaXRzKHByaXYtPnJlZ21hcCwgUlQ0
ODMxX1JFR19CTENGRywgUlQ0ODMxX0JMT1ZQX01BU0ssCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcHJvcHZhbCA8PCBSVDQ4MzFfQkxPVlBfU0hJRlQpOwo+ICsgICAgICAgaWYg
KHJldCkKPiArICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiArCj4gKyAgICAgICByZXQgPSBk
ZXZpY2VfcHJvcGVydHlfcmVhZF91OChkZXYsICJyaWNodGVrLGNoYW5uZWwtdXNlIiwgJnByb3B2
YWwpOwo+ICsgICAgICAgaWYgKHJldCkgewo+ICsgICAgICAgICAgICAgICBkZXZfZXJyKGRldiwg
InJpY2h0ZWssY2hhbm5lbC11c2UgRFQgcHJvcGVydHkgbWlzc2luZ1xuIik7Cj4gKyAgICAgICAg
ICAgICAgIHJldHVybiByZXQ7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgaWYgKCEocHJvcHZh
bCAmIFJUNDgzMV9CTENIX01BU0spKSB7Cj4gKyAgICAgICAgICAgICAgIGRldl9lcnIoZGV2LCAi
Tm8gY2hhbm5lbCBzcGVjaWZpZWRcbiIpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZB
TDsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICByZXR1cm4gcmVnbWFwX3VwZGF0ZV9iaXRzKHBy
aXYtPnJlZ21hcCwgUlQ0ODMxX1JFR19FTkFCTEUsIFJUNDgzMV9CTENIX01BU0ssIHByb3B2YWwp
Owo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHJ0NDgzMV9ibF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1f
ZGV2aWNlICpwZGV2KQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgcnQ0ODMxX3ByaXYgKnByaXY7Cj4g
KyAgICAgICBzdHJ1Y3QgYmFja2xpZ2h0X3Byb3BlcnRpZXMgYmxfcHJvcHMgPSB7IC50eXBlID0g
QkFDS0xJR0hUX1JBVywgfTsKPiArICAgICAgIGludCByZXQ7Cj4gKwo+ICsgICAgICAgcHJpdiA9
IGRldm1fa3phbGxvYygmcGRldi0+ZGV2LCBzaXplb2YoKnByaXYpLCBHRlBfS0VSTkVMKTsKPiAr
ICAgICAgIGlmICghcHJpdikKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gKwo+
ICsgICAgICAgbXV0ZXhfaW5pdCgmcHJpdi0+bG9jayk7Cj4gKwo+ICsgICAgICAgcHJpdi0+cmVn
bWFwID0gZGV2X2dldF9yZWdtYXAocGRldi0+ZGV2LnBhcmVudCwgTlVMTCk7Cj4gKyAgICAgICBp
ZiAoSVNfRVJSKHByaXYtPnJlZ21hcCkpIHsKPiArICAgICAgICAgICAgICAgZGV2X2VycigmcGRl
di0+ZGV2LCAiRmFpbGVkIHRvIGluaXQgcmVnbWFwXG4iKTsKPiArICAgICAgICAgICAgICAgcmV0
dXJuIFBUUl9FUlIocHJpdi0+cmVnbWFwKTsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICByZXQg
PSBydDQ4MzFfaW5pdF9kZXZpY2VfcHJvcGVydGllcyhwcml2LCAmcGRldi0+ZGV2LCAmYmxfcHJv
cHMpOwo+ICsgICAgICAgaWYgKHJldCkgewo+ICsgICAgICAgICAgICAgICBkZXZfZXJyKCZwZGV2
LT5kZXYsICJGYWlsZWQgdG8gaW5pdCBkZXZpY2UgcHJvcGVydGllc1xuIik7Cj4gKyAgICAgICAg
ICAgICAgIHJldHVybiByZXQ7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgcHJpdi0+YmwgPSBk
ZXZtX2JhY2tsaWdodF9kZXZpY2VfcmVnaXN0ZXIoJnBkZXYtPmRldiwgcGRldi0+bmFtZSwgJnBk
ZXYtPmRldiwgcHJpdiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICZydDQ4MzFfYmxfb3BzLCAmYmxfcHJvcHMpOwo+ICsgICAgICAgaWYgKElTX0VS
Uihwcml2LT5ibCkpIHsKPiArICAgICAgICAgICAgICAgZGV2X2VycigmcGRldi0+ZGV2LCAiRmFp
bGVkIHRvIHJlZ2lzdGVyIGJhY2tsaWdodFxuIik7Cj4gKyAgICAgICAgICAgICAgIHJldHVybiBQ
VFJfRVJSKHByaXYtPmJsKTsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBiYWNrbGlnaHRfdXBk
YXRlX3N0YXR1cyhwcml2LT5ibCk7Cj4gKyAgICAgICBwbGF0Zm9ybV9zZXRfZHJ2ZGF0YShwZGV2
LCBwcml2KTsKPiArCj4gKyAgICAgICByZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIGludCBy
dDQ4MzFfYmxfcmVtb3ZlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gK3sKPiArICAg
ICAgIHN0cnVjdCBydDQ4MzFfcHJpdiAqcHJpdiA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYp
Owo+ICsgICAgICAgc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJsX2RldiA9IHByaXYtPmJsOwo+
ICsKPiArICAgICAgIGJsX2Rldi0+cHJvcHMuYnJpZ2h0bmVzcyA9IDA7Cj4gKyAgICAgICBiYWNr
bGlnaHRfdXBkYXRlX3N0YXR1cyhwcml2LT5ibCk7Cj4gKwo+ICsgICAgICAgcmV0dXJuIDA7Cj4g
K30KPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIF9fbWF5YmVfdW51c2Vk
IHJ0NDgzMV9ibF9vZl9tYXRjaFtdID0gewo+ICsgICAgICAgeyAuY29tcGF0aWJsZSA9ICJyaWNo
dGVrLHJ0NDgzMS1iYWNrbGlnaHQiLCB9LAo+ICsgICAgICAge30KPiArfTsKPiArTU9EVUxFX0RF
VklDRV9UQUJMRShvZiwgcnQ0ODMxX2JsX29mX21hdGNoKTsKPiArCj4gK3N0YXRpYyBzdHJ1Y3Qg
cGxhdGZvcm1fZHJpdmVyIHJ0NDgzMV9ibF9kcml2ZXIgPSB7Cj4gKyAgICAgICAuZHJpdmVyID0g
ewo+ICsgICAgICAgICAgICAgICAubmFtZSA9ICJydDQ4MzEtYmFja2xpZ2h0IiwKPiArICAgICAg
ICAgICAgICAgLm9mX21hdGNoX3RhYmxlID0gcnQ0ODMxX2JsX29mX21hdGNoLAo+ICsgICAgICAg
fSwKPiArICAgICAgIC5wcm9iZSA9IHJ0NDgzMV9ibF9wcm9iZSwKPiArICAgICAgIC5yZW1vdmUg
PSBydDQ4MzFfYmxfcmVtb3ZlLAo+ICt9Owo+ICttb2R1bGVfcGxhdGZvcm1fZHJpdmVyKHJ0NDgz
MV9ibF9kcml2ZXIpOwo+ICsKPiArTU9EVUxFX0FVVEhPUigiQ2hpWXVhbiBIdWFuZyA8Y3lfaHVh
bmdAcmljaHRlay5jb20+Iik7Cj4gK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsKPiAtLQo+IDIu
Ny40Cj4KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJp
LWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
