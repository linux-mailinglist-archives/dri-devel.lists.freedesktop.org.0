Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 162B519C35
	for <lists+dri-devel@lfdr.de>; Fri, 10 May 2019 13:09:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 04A2289AC6;
	Fri, 10 May 2019 11:09:09 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from relay9-d.mail.gandi.net (relay9-d.mail.gandi.net
 [217.70.183.199])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5A28D89AC6
 for <dri-devel@lists.freedesktop.org>; Fri, 10 May 2019 11:09:07 +0000 (UTC)
X-Originating-IP: 90.89.68.76
Received: from localhost (lfbn-1-10718-76.w90-89.abo.wanadoo.fr [90.89.68.76])
 (Authenticated sender: maxime.ripard@bootlin.com)
 by relay9-d.mail.gandi.net (Postfix) with ESMTPSA id DE2B8FF807;
 Fri, 10 May 2019 11:09:01 +0000 (UTC)
From: Maxime Ripard <maxime.ripard@bootlin.com>
To: Daniel Vetter <daniel.vetter@intel.com>, David Airlie <airlied@linux.ie>,
 Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Sean Paul <seanpaul@chromium.org>,
 Maxime Ripard <maxime.ripard@bootlin.com>
Subject: [PATCH v2 5/6] drm/fourcc: Pass the format_info pointer to
 drm_format_plane_width/height
Date: Fri, 10 May 2019 13:08:50 +0200
Message-Id: <514af1d489d80b8b1767e3716b663ce5103da6eb.1557486447.git-series.maxime.ripard@bootlin.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <27b0041c7977402df4a087c78d2849ffe51c9f1c.1557486447.git-series.maxime.ripard@bootlin.com>
References: <27b0041c7977402df4a087c78d2849ffe51c9f1c.1557486447.git-series.maxime.ripard@bootlin.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 Emil Velikov <emil.velikov@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U28gZmFyLCB0aGUgZHJtX2Zvcm1hdF9wbGFuZV9oZWlnaHQvd2lkdGggZnVuY3Rpb25zIHdlcmUg
b3BlcmF0aW5nIG9uIHRoZQpmb3JtYXQncyBmb3VyY2MgYW5kIHdhcyBkb2luZyBhIGxvb2t1cCB0
byByZXRyaWV2ZSB0aGUgZHJtX2Zvcm1hdF9pbmZvCnN0cnVjdHVyZSBhbmQgcmV0dXJuIHRoZSBj
cHAuCgpIb3dldmVyLCB0aGlzIGlzIGluZWZmaWNpZW50IHNpbmNlIGluIG1vc3QgY2FzZXMsIHdl
IHdpbGwgaGF2ZSB0aGUKZHJtX2Zvcm1hdF9pbmZvIHBvaW50ZXIgYWxyZWFkeSBhdmFpbGFibGUg
c28gd2Ugc2hvdWxkbid0IGhhdmUgdG8gcGVyZm9ybSBhCm5ldyBsb29rdXAuIFNvbWUgZHJtX2Zv
dXJjYyBmdW5jdGlvbnMgYWxzbyBhbHJlYWR5IG9wZXJhdGUgb24gdGhlCmRybV9mb3JtYXRfaW5m
byBwb2ludGVyIGZvciB0aGF0IHJlYXNvbiwgc28gdGhlIEFQSSBpcyBxdWl0ZSBpbmNvbnNpc3Rl
bnQKdGhlcmUuCgpMZXQncyBmb2xsb3cgdGhlIGxhdHRlciBwYXR0ZXJuIGFuZCByZW1vdmUgdGhl
IGV4dHJhIGxvb2t1cCB3aGlsZSBiZWluZyBhCmJpdCBtb3JlIGNvbnNpc3RlbnQuCgpJbiBvcmRl
ciB0byBiZSBleHRyYSBjb25zaXN0ZW50LCBhbHNvIHJlbmFtZSB0aGF0IGZ1bmN0aW9uIHRvCmRy
bV9mb3JtYXRfaW5mb19wbGFuZV9jcHAgYW5kIHRvIGEgc3RhdGljIGZ1bmN0aW9uIGluIHRoZSBo
ZWFkZXIgdG8gbWF0Y2gKdGhlIGN1cnJlbnQgcG9saWN5LiBUaGUgcGFyYW1ldGVycyBvcmRlciBo
YXZlIGFsc28gYmUgY2hhbmdlZCB0byBtYXRjaCB0aGUKb3RoZXIgZnVuY3Rpb25zIHByb3RvdHlw
ZS4KClJldmlld2VkLWJ5OiBFbWlsIFZlbGlrb3YgPGVtaWwudmVsaWtvdkBjb2xsYWJvcmEuY29t
PgpTaWduZWQtb2ZmLWJ5OiBNYXhpbWUgUmlwYXJkIDxtYXhpbWUucmlwYXJkQGJvb3RsaW4uY29t
PgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fZm91cmNjLmMgICAgICAgICAgfCA0OCArLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL21lc29uL21lc29uX292ZXJs
YXkuYyB8IDEyICsrKy0tLS0KIGluY2x1ZGUvZHJtL2RybV9mb3VyY2MuaCAgICAgICAgICAgICAg
fCA0NiArKysrKysrKysrKysrKysrKysrKysrKysrLS0KIDMgZmlsZXMgY2hhbmdlZCwgNTAgaW5z
ZXJ0aW9ucygrKSwgNTYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2RybV9mb3VyY2MuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZm91cmNjLmMKaW5kZXggNWY2M2Zj
NzRlMjY1Li4zNWI0NTlkMTg2YzUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZm91
cmNjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9mb3VyY2MuYwpAQCAtMzMzLDU0ICszMzMs
NiBAQCBkcm1fZ2V0X2Zvcm1hdF9pbmZvKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiBFWFBPUlRf
U1lNQk9MKGRybV9nZXRfZm9ybWF0X2luZm8pOwogCiAvKioKLSAqIGRybV9mb3JtYXRfcGxhbmVf
d2lkdGggLSB3aWR0aCBvZiB0aGUgcGxhbmUgZ2l2ZW4gdGhlIGZpcnN0IHBsYW5lCi0gKiBAd2lk
dGg6IHdpZHRoIG9mIHRoZSBmaXJzdCBwbGFuZQotICogQGZvcm1hdDogcGl4ZWwgZm9ybWF0Ci0g
KiBAcGxhbmU6IHBsYW5lIGluZGV4Ci0gKgotICogUmV0dXJuczoKLSAqIFRoZSB3aWR0aCBvZiBA
cGxhbmUsIGdpdmVuIHRoYXQgdGhlIHdpZHRoIG9mIHRoZSBmaXJzdCBwbGFuZSBpcyBAd2lkdGgu
Ci0gKi8KLWludCBkcm1fZm9ybWF0X3BsYW5lX3dpZHRoKGludCB3aWR0aCwgdWludDMyX3QgZm9y
bWF0LCBpbnQgcGxhbmUpCi17Ci0JY29uc3Qgc3RydWN0IGRybV9mb3JtYXRfaW5mbyAqaW5mbzsK
LQotCWluZm8gPSBkcm1fZm9ybWF0X2luZm8oZm9ybWF0KTsKLQlpZiAoIWluZm8gfHwgcGxhbmUg
Pj0gaW5mby0+bnVtX3BsYW5lcykKLQkJcmV0dXJuIDA7Ci0KLQlpZiAocGxhbmUgPT0gMCkKLQkJ
cmV0dXJuIHdpZHRoOwotCi0JcmV0dXJuIHdpZHRoIC8gaW5mby0+aHN1YjsKLX0KLUVYUE9SVF9T
WU1CT0woZHJtX2Zvcm1hdF9wbGFuZV93aWR0aCk7Ci0KLS8qKgotICogZHJtX2Zvcm1hdF9wbGFu
ZV9oZWlnaHQgLSBoZWlnaHQgb2YgdGhlIHBsYW5lIGdpdmVuIHRoZSBmaXJzdCBwbGFuZQotICog
QGhlaWdodDogaGVpZ2h0IG9mIHRoZSBmaXJzdCBwbGFuZQotICogQGZvcm1hdDogcGl4ZWwgZm9y
bWF0Ci0gKiBAcGxhbmU6IHBsYW5lIGluZGV4Ci0gKgotICogUmV0dXJuczoKLSAqIFRoZSBoZWln
aHQgb2YgQHBsYW5lLCBnaXZlbiB0aGF0IHRoZSBoZWlnaHQgb2YgdGhlIGZpcnN0IHBsYW5lIGlz
IEBoZWlnaHQuCi0gKi8KLWludCBkcm1fZm9ybWF0X3BsYW5lX2hlaWdodChpbnQgaGVpZ2h0LCB1
aW50MzJfdCBmb3JtYXQsIGludCBwbGFuZSkKLXsKLQljb25zdCBzdHJ1Y3QgZHJtX2Zvcm1hdF9p
bmZvICppbmZvOwotCi0JaW5mbyA9IGRybV9mb3JtYXRfaW5mbyhmb3JtYXQpOwotCWlmICghaW5m
byB8fCBwbGFuZSA+PSBpbmZvLT5udW1fcGxhbmVzKQotCQlyZXR1cm4gMDsKLQotCWlmIChwbGFu
ZSA9PSAwKQotCQlyZXR1cm4gaGVpZ2h0OwotCi0JcmV0dXJuIGhlaWdodCAvIGluZm8tPnZzdWI7
Ci19Ci1FWFBPUlRfU1lNQk9MKGRybV9mb3JtYXRfcGxhbmVfaGVpZ2h0KTsKLQotLyoqCiAgKiBk
cm1fZm9ybWF0X2luZm9fYmxvY2tfd2lkdGggLSB3aWR0aCBpbiBwaXhlbHMgb2YgYmxvY2suCiAg
KiBAaW5mbzogcGl4ZWwgZm9ybWF0IGluZm8KICAqIEBwbGFuZTogcGxhbmUgaW5kZXgKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl9vdmVybGF5LmMgYi9kcml2ZXJzL2dw
dS9kcm0vbWVzb24vbWVzb25fb3ZlcmxheS5jCmluZGV4IGZiODUxNWIyODYwYy4uNTViM2YyZjJl
NjA4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fb3ZlcmxheS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl9vdmVybGF5LmMKQEAgLTQ2Niw4ICs0NjYs
OCBAQCBzdGF0aWMgdm9pZCBtZXNvbl9vdmVybGF5X2F0b21pY191cGRhdGUoc3RydWN0IGRybV9w
bGFuZSAqcGxhbmUsCiAJCXByaXYtPnZpdS52ZDFfYWRkcjIgPSBnZW0tPnBhZGRyICsgZmItPm9m
ZnNldHNbMl07CiAJCXByaXYtPnZpdS52ZDFfc3RyaWRlMiA9IGZiLT5waXRjaGVzWzJdOwogCQlw
cml2LT52aXUudmQxX2hlaWdodDIgPQotCQkJZHJtX2Zvcm1hdF9wbGFuZV9oZWlnaHQoZmItPmhl
aWdodCwKLQkJCQkJCWZiLT5mb3JtYXQtPmZvcm1hdCwgMik7CisJCQlkcm1fZm9ybWF0X2luZm9f
cGxhbmVfaGVpZ2h0KGZiLT5mb3JtYXQsCisJCQkJCQlmYi0+aGVpZ2h0LCAyKTsKIAkJRFJNX0RF
QlVHKCJwbGFuZSAyIGFkZHIgMHgleCBzdHJpZGUgJWQgaGVpZ2h0ICVkXG4iLAogCQkJIHByaXYt
PnZpdS52ZDFfYWRkcjIsCiAJCQkgcHJpdi0+dml1LnZkMV9zdHJpZGUyLApAQCAtNDc4LDggKzQ3
OCw4IEBAIHN0YXRpYyB2b2lkIG1lc29uX292ZXJsYXlfYXRvbWljX3VwZGF0ZShzdHJ1Y3QgZHJt
X3BsYW5lICpwbGFuZSwKIAkJcHJpdi0+dml1LnZkMV9hZGRyMSA9IGdlbS0+cGFkZHIgKyBmYi0+
b2Zmc2V0c1sxXTsKIAkJcHJpdi0+dml1LnZkMV9zdHJpZGUxID0gZmItPnBpdGNoZXNbMV07CiAJ
CXByaXYtPnZpdS52ZDFfaGVpZ2h0MSA9Ci0JCQlkcm1fZm9ybWF0X3BsYW5lX2hlaWdodChmYi0+
aGVpZ2h0LAotCQkJCQkJZmItPmZvcm1hdC0+Zm9ybWF0LCAxKTsKKwkJCWRybV9mb3JtYXRfaW5m
b19wbGFuZV9oZWlnaHQoZmItPmZvcm1hdCwKKwkJCQkJCWZiLT5oZWlnaHQsIDEpOwogCQlEUk1f
REVCVUcoInBsYW5lIDEgYWRkciAweCV4IHN0cmlkZSAlZCBoZWlnaHQgJWRcbiIsCiAJCQkgcHJp
di0+dml1LnZkMV9hZGRyMSwKIAkJCSBwcml2LT52aXUudmQxX3N0cmlkZTEsCkBAIC00OTAsOCAr
NDkwLDggQEAgc3RhdGljIHZvaWQgbWVzb25fb3ZlcmxheV9hdG9taWNfdXBkYXRlKHN0cnVjdCBk
cm1fcGxhbmUgKnBsYW5lLAogCQlwcml2LT52aXUudmQxX2FkZHIwID0gZ2VtLT5wYWRkciArIGZi
LT5vZmZzZXRzWzBdOwogCQlwcml2LT52aXUudmQxX3N0cmlkZTAgPSBmYi0+cGl0Y2hlc1swXTsK
IAkJcHJpdi0+dml1LnZkMV9oZWlnaHQwID0KLQkJCWRybV9mb3JtYXRfcGxhbmVfaGVpZ2h0KGZi
LT5oZWlnaHQsCi0JCQkJCQlmYi0+Zm9ybWF0LT5mb3JtYXQsIDApOworCQkJZHJtX2Zvcm1hdF9p
bmZvX3BsYW5lX2hlaWdodChmYi0+Zm9ybWF0LAorCQkJCQkJZmItPmhlaWdodCwgMCk7CiAJCURS
TV9ERUJVRygicGxhbmUgMCBhZGRyIDB4JXggc3RyaWRlICVkIGhlaWdodCAlZFxuIiwKIAkJCSBw
cml2LT52aXUudmQxX2FkZHIwLAogCQkJIHByaXYtPnZpdS52ZDFfc3RyaWRlMCwKZGlmZiAtLWdp
dCBhL2luY2x1ZGUvZHJtL2RybV9mb3VyY2MuaCBiL2luY2x1ZGUvZHJtL2RybV9mb3VyY2MuaApp
bmRleCA2YjVhODJiMzFiYzQuLjRlZjhjY2I1ZDIzNiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0v
ZHJtX2ZvdXJjYy5oCisrKyBiL2luY2x1ZGUvZHJtL2RybV9mb3VyY2MuaApAQCAtMjc3LDYgKzI3
Nyw1MCBAQCBpbnQgZHJtX2Zvcm1hdF9pbmZvX3BsYW5lX2NwcChjb25zdCBzdHJ1Y3QgZHJtX2Zv
cm1hdF9pbmZvICppbmZvLCBpbnQgcGxhbmUpCiAJcmV0dXJuIGluZm8tPmNwcFtwbGFuZV07CiB9
CiAKKy8qKgorICogZHJtX2Zvcm1hdF9pbmZvX3BsYW5lX3dpZHRoIC0gd2lkdGggb2YgdGhlIHBs
YW5lIGdpdmVuIHRoZSBmaXJzdCBwbGFuZQorICogQGZvcm1hdDogcGl4ZWwgZm9ybWF0IGluZm8K
KyAqIEB3aWR0aDogd2lkdGggb2YgdGhlIGZpcnN0IHBsYW5lCisgKiBAcGxhbmU6IHBsYW5lIGlu
ZGV4CisgKgorICogUmV0dXJuczoKKyAqIFRoZSB3aWR0aCBvZiBAcGxhbmUsIGdpdmVuIHRoYXQg
dGhlIHdpZHRoIG9mIHRoZSBmaXJzdCBwbGFuZSBpcyBAd2lkdGguCisgKi8KK3N0YXRpYyBpbmxp
bmUKK2ludCBkcm1fZm9ybWF0X2luZm9fcGxhbmVfd2lkdGgoY29uc3Qgc3RydWN0IGRybV9mb3Jt
YXRfaW5mbyAqaW5mbywgaW50IHdpZHRoLAorCQkJCWludCBwbGFuZSkKK3sKKwlpZiAoIWluZm8g
fHwgcGxhbmUgPj0gaW5mby0+bnVtX3BsYW5lcykKKwkJcmV0dXJuIDA7CisKKwlpZiAocGxhbmUg
PT0gMCkKKwkJcmV0dXJuIHdpZHRoOworCisJcmV0dXJuIHdpZHRoIC8gaW5mby0+aHN1YjsKK30K
KworLyoqCisgKiBkcm1fZm9ybWF0X2luZm9fcGxhbmVfaGVpZ2h0IC0gaGVpZ2h0IG9mIHRoZSBw
bGFuZSBnaXZlbiB0aGUgZmlyc3QgcGxhbmUKKyAqIEBmb3JtYXQ6IHBpeGVsIGZvcm1hdCBpbmZv
CisgKiBAaGVpZ2h0OiBoZWlnaHQgb2YgdGhlIGZpcnN0IHBsYW5lCisgKiBAcGxhbmU6IHBsYW5l
IGluZGV4CisgKgorICogUmV0dXJuczoKKyAqIFRoZSBoZWlnaHQgb2YgQHBsYW5lLCBnaXZlbiB0
aGF0IHRoZSBoZWlnaHQgb2YgdGhlIGZpcnN0IHBsYW5lIGlzIEBoZWlnaHQuCisgKi8KK3N0YXRp
YyBpbmxpbmUKK2ludCBkcm1fZm9ybWF0X2luZm9fcGxhbmVfaGVpZ2h0KGNvbnN0IHN0cnVjdCBk
cm1fZm9ybWF0X2luZm8gKmluZm8sIGludCBoZWlnaHQsCisJCQkJIGludCBwbGFuZSkKK3sKKwlp
ZiAoIWluZm8gfHwgcGxhbmUgPj0gaW5mby0+bnVtX3BsYW5lcykKKwkJcmV0dXJuIDA7CisKKwlp
ZiAocGxhbmUgPT0gMCkKKwkJcmV0dXJuIGhlaWdodDsKKworCXJldHVybiBoZWlnaHQgLyBpbmZv
LT52c3ViOworfQorCiBjb25zdCBzdHJ1Y3QgZHJtX2Zvcm1hdF9pbmZvICpfX2RybV9mb3JtYXRf
aW5mbyh1MzIgZm9ybWF0KTsKIGNvbnN0IHN0cnVjdCBkcm1fZm9ybWF0X2luZm8gKmRybV9mb3Jt
YXRfaW5mbyh1MzIgZm9ybWF0KTsKIGNvbnN0IHN0cnVjdCBkcm1fZm9ybWF0X2luZm8gKgpAQCAt
Mjg1LDggKzMyOSw2IEBAIGRybV9nZXRfZm9ybWF0X2luZm8oc3RydWN0IGRybV9kZXZpY2UgKmRl
diwKIHVpbnQzMl90IGRybV9tb2RlX2xlZ2FjeV9mYl9mb3JtYXQodWludDMyX3QgYnBwLCB1aW50
MzJfdCBkZXB0aCk7CiB1aW50MzJfdCBkcm1fZHJpdmVyX2xlZ2FjeV9mYl9mb3JtYXQoc3RydWN0
IGRybV9kZXZpY2UgKmRldiwKIAkJCQkgICAgIHVpbnQzMl90IGJwcCwgdWludDMyX3QgZGVwdGgp
OwotaW50IGRybV9mb3JtYXRfcGxhbmVfd2lkdGgoaW50IHdpZHRoLCB1aW50MzJfdCBmb3JtYXQs
IGludCBwbGFuZSk7Ci1pbnQgZHJtX2Zvcm1hdF9wbGFuZV9oZWlnaHQoaW50IGhlaWdodCwgdWlu
dDMyX3QgZm9ybWF0LCBpbnQgcGxhbmUpOwogdW5zaWduZWQgaW50IGRybV9mb3JtYXRfaW5mb19i
bG9ja193aWR0aChjb25zdCBzdHJ1Y3QgZHJtX2Zvcm1hdF9pbmZvICppbmZvLAogCQkJCQkgaW50
IHBsYW5lKTsKIHVuc2lnbmVkIGludCBkcm1fZm9ybWF0X2luZm9fYmxvY2tfaGVpZ2h0KGNvbnN0
IHN0cnVjdCBkcm1fZm9ybWF0X2luZm8gKmluZm8sCi0tIApnaXQtc2VyaWVzIDAuOS4xCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
