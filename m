Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 57FA623B7BD
	for <lists+dri-devel@lfdr.de>; Tue,  4 Aug 2020 11:31:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0F50589D4B;
	Tue,  4 Aug 2020 09:31:44 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-oi1-x241.google.com (mail-oi1-x241.google.com
 [IPv6:2607:f8b0:4864:20::241])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F3E0C89D4B
 for <dri-devel@lists.freedesktop.org>; Tue,  4 Aug 2020 09:31:41 +0000 (UTC)
Received: by mail-oi1-x241.google.com with SMTP id 25so12203421oir.0
 for <dri-devel@lists.freedesktop.org>; Tue, 04 Aug 2020 02:31:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=Bx8QnSbD21aKEv4HPh/WQgnpCovb+oX4WSI/yUidvUA=;
 b=hSRc18DI12vibI2y/PhLUpEH+n2WEK43Hx+65fY+/xoVAy8Nk+iOU1wBQlXk53IF+q
 am4mS9n9SJASS+m1vHXi9FxNsGa2Z/5oejaQoiErvncEZ9HLXEK9RJfWfdRctFk5aNT8
 eXpK2q6Ga41ilbw3cwzfxFdgg0/zYkp4LetcA=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=Bx8QnSbD21aKEv4HPh/WQgnpCovb+oX4WSI/yUidvUA=;
 b=rZXAvGbVT1vd5UJsW2UVb3oWtYemTJGSJUmmga9JT8CK0TzB5c6vYmENJnTOAK7r4I
 LAyPIONHkOXxSYK707JQwBMwnsGKx0WnG3Hh7+p5V72RGBqonSLPR18IEJr8gDL0wF5p
 FaqG0uSKAgCH5MrnFp6WtvbKQa1SobVC5TF69mUZ8Bxxp6yPIb188bbebBLCiYLDY/n8
 M+Y1L7+s15NYBcKdvUuz2PB/lQ8XT/QcklvxjGobQMY0tkV3X11BYcA/JtIfcBW7Q4sU
 v25CxbGzgxSldjWy7NJeWSOZiwvYPP+5RLZ4lUVkhInVavdL3ZwvJBIwcj1BT9Em8NTh
 mf1w==
X-Gm-Message-State: AOAM533yREdnMR6KbvoAj5IRUsxZ4MWMdsEnGTyQub1+wMIyc2FHFKkc
 sghERUzdcjBGEC89iL36KUUkLN933wd0XXR2cDNI6Q==
X-Google-Smtp-Source: ABdhPJwdpUdLPhrTPAaU7NeuwyRn6hE1IzDc4jwEglS1bZDZpyn1A79/YYbgME6XqG72lThDZ7VnwRdmnDyTYRZ8hEI=
X-Received: by 2002:aca:ab87:: with SMTP id u129mr2628735oie.128.1596533501194; 
 Tue, 04 Aug 2020 02:31:41 -0700 (PDT)
MIME-Version: 1.0
References: <20200730144830.10479-1-paul@crapouillou.net>
 <20200730144830.10479-4-paul@crapouillou.net>
 <20200730152958.GB1474381@ravnborg.org> <6RIAEQ.2KRLCE1YRKKB1@crapouillou.net>
In-Reply-To: <6RIAEQ.2KRLCE1YRKKB1@crapouillou.net>
From: Daniel Vetter <daniel@ffwll.ch>
Date: Tue, 4 Aug 2020 11:31:29 +0200
Message-ID: <CAKMK7uFfS0XuGAeT0t_UF7f0gALUK-BHFVsk4w_u9BjoeFtNYQ@mail.gmail.com>
Subject: Re: [PATCH v2 3/3] drm/ingenic: ipu: Only enable clock when needed
To: Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>,
 Linux Kernel Mailing List <linux-kernel@vger.kernel.org>,
 dri-devel <dri-devel@lists.freedesktop.org>, od@zcrc.me,
 Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBKdWwgMzAsIDIwMjAgYXQgMDY6MjE6MDVQTSArMDIwMCwgUGF1bCBDZXJjdWVpbCB3
cm90ZToKPgo+Cj4gTGUgamV1LiAzMCBqdWlsLiAyMDIwIMOgIDE3OjI5LCBTYW0gUmF2bmJvcmcg
PHNhbUByYXZuYm9yZy5vcmc+IGEgw6ljcml0IDoKPiA+IE9uIFRodSwgSnVsIDMwLCAyMDIwIGF0
IDA0OjQ4OjMwUE0gKzAyMDAsIFBhdWwgQ2VyY3VlaWwgd3JvdGU6Cj4gPiA+ICBJbnN0ZWFkIG9m
IGtlZXBpbmcgdGhlIElQVSBjbG9jayBlbmFibGVkIGNvbnN0YW50bHksIGVuYWJsZSBhbmQKPiA+
ID4gZGlzYWJsZQo+ID4gPiAgaXQgb24gZGVtYW5kLCB3aGVuIHRoZSBJUFUgcGxhbmUgaXMgdXNl
ZC4gVGhhdCB3YXksIHdlIHdvbid0IHVzZSBhbnkKPiA+ID4gIGV4dHJhIHBvd2VyIHdoZW4gdGhl
IElQVSBpcyBub3QgdXNlZC4KPiA+ID4KPiA+ID4gIHYyOiBFeHBsYWluIHRoZSByZWFzb24gb2Yg
dGhpcyBwYXRjaAo+ID4gPgo+ID4gPiAgU2lnbmVkLW9mZi1ieTogUGF1bCBDZXJjdWVpbCA8cGF1
bEBjcmFwb3VpbGxvdS5uZXQ+Cj4gPiBSZXZpZXdlZC1ieTogU2FtIFJhdm5ib3JnIDxzYW1AcmF2
bmJvcmcub3JnPgo+ID4KPiA+IEFuZCB0aGFua3MgZm9yIHRoZSBxdWljayB1cGRhdGUhCj4KPiBQ
dXNoZWQgdG8gZHJtLW1pc2MtbmV4dC4gVGhhbmtzIQoKSGkgUGF1bCwKCk1heWJlIEknbSBtaXhp
bmcgdXAgcGVvcGxlLCBidXQgaWlyYyB5b3UncmUgdGhlIG9uZSB2ZXJ5IG11Y2ggaW50ZXJlc3Rl
ZAppbiBydW5uaW5nIGZiZGV2IHVzZXJzcGFjZS4gRGlkIHlvdSB0aGluayBhYm91dCBidWlsZGlu
ZyB1cCBhIHNldCBvZgpyZWdyZXNzaW9uIHRlc3RzIGluIGlndCAod2hpY2ggd2UgY291bGQgZXZl
bnR1YWxseSBldmVuIHJ1biBvbiBzb21ldGhpbmcKbGlrZSB2a21zIGZvciBody1mcmVlIHJlZ3Jl
c3Npb24gdGVzdGluZykgc28gdGhhdCB3ZSBtYWtlIHN1cmUgZmJkZXYga2VlcHMKd3Jva2luZz8K
CkRlZmFjdG8gZHJtX2ZiX2hlbHBlci5jIGhhcyBiZWNvbWUgdGhlIGZiZGV2IHJlZmVyZW5jZSBp
bXBsZW1lbnRhdGlvbgphbHJlYWR5IGFueXdheSAoZS5nLiB3aXRoIHN0dWZmIGxpa2Ugc3RhbmFy
ZGl6aW5nIHZibGFuayB3YWl0aW5nCmJlaGF2aW91ciksIHNvIHRoaXMgd291bGQgb25seSBiZSB0
aGUgbmV4dCBsb2dpY2FsIHN0ZXAuCgpBbHNvIGFkZGluZyBCYXJ0LgoKQ2hlZXJzLCBEYW5pZWwK
Cgo+Cj4gQ2hlZXJzLAo+IC1QYXVsCj4KPiA+Cj4gPiAgICAgU2FtCj4gPgo+ID4gPiAgLS0tCj4g
PiA+ICAgZHJpdmVycy9ncHUvZHJtL2luZ2VuaWMvaW5nZW5pYy1pcHUuYyB8IDIzICsrKysrKysr
KysrKysrKysrKysrLS0tCj4gPiA+ICAgMSBmaWxlIGNoYW5nZWQsIDIwIGluc2VydGlvbnMoKyks
IDMgZGVsZXRpb25zKC0pCj4gPiA+Cj4gPiA+ICBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2luZ2VuaWMvaW5nZW5pYy1pcHUuYwo+ID4gPiBiL2RyaXZlcnMvZ3B1L2RybS9pbmdlbmljL2lu
Z2VuaWMtaXB1LmMKPiA+ID4gIGluZGV4IDdkZDJhNmFlNDk5NC4uZmM4YzZlOTcwZWUzIDEwMDY0
NAo+ID4gPiAgLS0tIGEvZHJpdmVycy9ncHUvZHJtL2luZ2VuaWMvaW5nZW5pYy1pcHUuYwo+ID4g
PiAgKysrIGIvZHJpdmVycy9ncHUvZHJtL2luZ2VuaWMvaW5nZW5pYy1pcHUuYwo+ID4gPiAgQEAg
LTQ5LDYgKzQ5LDcgQEAgc3RydWN0IGluZ2VuaWNfaXB1IHsKPiA+ID4gICAgICAgICAgIHN0cnVj
dCByZWdtYXAgKm1hcDsKPiA+ID4gICAgICAgICAgIHN0cnVjdCBjbGsgKmNsazsKPiA+ID4gICAg
ICAgICAgIGNvbnN0IHN0cnVjdCBzb2NfaW5mbyAqc29jX2luZm87Cj4gPiA+ICArICAgICAgICBi
b29sIGNsa19lbmFibGVkOwo+ID4gPgo+ID4gPiAgICAgICAgICAgdW5zaWduZWQgaW50IG51bV93
LCBudW1faCwgZGVub21fdywgZGVub21faDsKPiA+ID4KPiA+ID4gIEBAIC0yODgsMTIgKzI4OSwy
MyBAQCBzdGF0aWMgdm9pZAo+ID4gPiBpbmdlbmljX2lwdV9wbGFuZV9hdG9taWNfdXBkYXRlKHN0
cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAo+ID4gPiAgICAgICAgICAgY29uc3Qgc3RydWN0IGRybV9m
b3JtYXRfaW5mbyAqZmluZm87Cj4gPiA+ICAgICAgICAgICB1MzIgY3RybCwgc3RyaWRlID0gMCwg
Y29lZl9pbmRleCA9IDAsIGZvcm1hdCA9IDA7Cj4gPiA+ICAgICAgICAgICBib29sIG5lZWRzX21v
ZGVzZXQsIHVwc2NhbGluZ193LCB1cHNjYWxpbmdfaDsKPiA+ID4gICsgICAgICAgIGludCBlcnI7
Cj4gPiA+Cj4gPiA+ICAgICAgICAgICBpZiAoIXN0YXRlIHx8ICFzdGF0ZS0+ZmIpCj4gPiA+ICAg
ICAgICAgICAgICAgICAgIHJldHVybjsKPiA+ID4KPiA+ID4gICAgICAgICAgIGZpbmZvID0gZHJt
X2Zvcm1hdF9pbmZvKHN0YXRlLT5mYi0+Zm9ybWF0LT5mb3JtYXQpOwo+ID4gPgo+ID4gPiAgKyAg
ICAgICAgaWYgKCFpcHUtPmNsa19lbmFibGVkKSB7Cj4gPiA+ICArICAgICAgICAgICAgICAgIGVy
ciA9IGNsa19lbmFibGUoaXB1LT5jbGspOwo+ID4gPiAgKyAgICAgICAgICAgICAgICBpZiAoZXJy
KSB7Cj4gPiA+ICArICAgICAgICAgICAgICAgICAgICAgICAgZGV2X2VycihpcHUtPmRldiwgIlVu
YWJsZSB0byBlbmFibGUgY2xvY2s6ICVkXG4iLCBlcnIpOwo+ID4gPiAgKyAgICAgICAgICAgICAg
ICAgICAgICAgIHJldHVybjsKPiA+ID4gICsgICAgICAgICAgICAgICAgfQo+ID4gPiAgKwo+ID4g
PiAgKyAgICAgICAgICAgICAgICBpcHUtPmNsa19lbmFibGVkID0gdHJ1ZTsKPiA+ID4gICsgICAg
ICAgIH0KPiA+ID4gICsKPiA+ID4gICAgICAgICAgIC8qIFJlc2V0IGFsbCB0aGUgcmVnaXN0ZXJz
IGlmIG5lZWRlZCAqLwo+ID4gPiAgICAgICAgICAgbmVlZHNfbW9kZXNldCA9IGRybV9hdG9taWNf
Y3J0Y19uZWVkc19tb2Rlc2V0KHN0YXRlLT5jcnRjLT5zdGF0ZSk7Cj4gPiA+ICAgICAgICAgICBp
ZiAobmVlZHNfbW9kZXNldCkgewo+ID4gPiAgQEAgLTU3OCw2ICs1OTAsMTEgQEAgc3RhdGljIHZv
aWQKPiA+ID4gaW5nZW5pY19pcHVfcGxhbmVfYXRvbWljX2Rpc2FibGUoc3RydWN0IGRybV9wbGFu
ZSAqcGxhbmUsCj4gPiA+ICAgICAgICAgICByZWdtYXBfY2xlYXJfYml0cyhpcHUtPm1hcCwgSlpf
UkVHX0lQVV9DVFJMLCBKWl9JUFVfQ1RSTF9DSElQX0VOKTsKPiA+ID4KPiA+ID4gICAgICAgICAg
IGluZ2VuaWNfZHJtX3BsYW5lX2Rpc2FibGUoaXB1LT5tYXN0ZXIsIHBsYW5lKTsKPiA+ID4gICsK
PiA+ID4gICsgICAgICAgIGlmIChpcHUtPmNsa19lbmFibGVkKSB7Cj4gPiA+ICArICAgICAgICAg
ICAgICAgIGNsa19kaXNhYmxlKGlwdS0+Y2xrKTsKPiA+ID4gICsgICAgICAgICAgICAgICAgaXB1
LT5jbGtfZW5hYmxlZCA9IGZhbHNlOwo+ID4gPiAgKyAgICAgICAgfQo+ID4gPiAgIH0KPiA+ID4K
PiA+ID4gICBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9wbGFuZV9oZWxwZXJfZnVuY3MKPiA+ID4g
aW5nZW5pY19pcHVfcGxhbmVfaGVscGVyX2Z1bmNzID0gewo+ID4gPiAgQEAgLTc2MSw5ICs3Nzgs
OSBAQCBzdGF0aWMgaW50IGluZ2VuaWNfaXB1X2JpbmQoc3RydWN0IGRldmljZSAqZGV2LAo+ID4g
PiBzdHJ1Y3QgZGV2aWNlICptYXN0ZXIsIHZvaWQgKmQpCj4gPiA+ICAgICAgICAgICBkcm1fb2Jq
ZWN0X2F0dGFjaF9wcm9wZXJ0eSgmcGxhbmUtPmJhc2UsIGlwdS0+c2hhcnBuZXNzX3Byb3AsCj4g
PiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcHUtPnNoYXJwbmVzcyk7
Cj4gPiA+Cj4gPiA+ICAtICAgICAgICBlcnIgPSBjbGtfcHJlcGFyZV9lbmFibGUoaXB1LT5jbGsp
Owo+ID4gPiAgKyAgICAgICAgZXJyID0gY2xrX3ByZXBhcmUoaXB1LT5jbGspOwo+ID4gPiAgICAg
ICAgICAgaWYgKGVycikgewo+ID4gPiAgLSAgICAgICAgICAgICAgICBkZXZfZXJyKGRldiwgIlVu
YWJsZSB0byBlbmFibGUgY2xvY2tcbiIpOwo+ID4gPiAgKyAgICAgICAgICAgICAgICBkZXZfZXJy
KGRldiwgIlVuYWJsZSB0byBwcmVwYXJlIGNsb2NrXG4iKTsKPiA+ID4gICAgICAgICAgICAgICAg
ICAgcmV0dXJuIGVycjsKPiA+ID4gICAgICAgICAgIH0KPiA+ID4KPiA+ID4gIEBAIC03NzUsNyAr
NzkyLDcgQEAgc3RhdGljIHZvaWQgaW5nZW5pY19pcHVfdW5iaW5kKHN0cnVjdCBkZXZpY2UKPiA+
ID4gKmRldiwKPiA+ID4gICB7Cj4gPiA+ICAgICAgICAgICBzdHJ1Y3QgaW5nZW5pY19pcHUgKmlw
dSA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwo+ID4gPgo+ID4gPiAgLSAgICAgICAgY2xrX2Rpc2Fi
bGVfdW5wcmVwYXJlKGlwdS0+Y2xrKTsKPiA+ID4gICsgICAgICAgIGNsa191bnByZXBhcmUoaXB1
LT5jbGspOwo+ID4gPiAgIH0KPiA+ID4KPiA+ID4gICBzdGF0aWMgY29uc3Qgc3RydWN0IGNvbXBv
bmVudF9vcHMgaW5nZW5pY19pcHVfb3BzID0gewo+ID4gPiAgLS0KPiA+ID4gIDIuMjcuMAo+Cj4K
Ci0tCkRhbmllbCBWZXR0ZXIKU29mdHdhcmUgRW5naW5lZXIsIEludGVsIENvcnBvcmF0aW9uCmh0
dHA6Ly9ibG9nLmZmd2xsLmNoCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2Ry
aS1kZXZlbAo=
