Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4D3DA10D716
	for <lists+dri-devel@lfdr.de>; Fri, 29 Nov 2019 15:35:06 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 76B156E921;
	Fri, 29 Nov 2019 14:35:02 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from foss.arm.com (foss.arm.com [217.140.110.172])
 by gabe.freedesktop.org (Postfix) with ESMTP id E85DC6E921
 for <dri-devel@lists.freedesktop.org>; Fri, 29 Nov 2019 14:35:01 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 910E91FB;
 Fri, 29 Nov 2019 06:35:01 -0800 (PST)
Received: from [10.1.194.43] (e112269-lin.cambridge.arm.com [10.1.194.43])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id C148F3F52E;
 Fri, 29 Nov 2019 06:35:00 -0800 (PST)
Subject: Re: [PATCH 5/8] drm/panfrost: Open/close the perfcnt BO
To: Boris Brezillon <boris.brezillon@collabora.com>,
 Rob Herring <robh+dt@kernel.org>, Tomeu Vizoso <tomeu@tomeuvizoso.net>,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>
References: <20191129135908.2439529-1-boris.brezillon@collabora.com>
 <20191129135908.2439529-6-boris.brezillon@collabora.com>
From: Steven Price <steven.price@arm.com>
Message-ID: <f2928095-c117-580a-ac3d-efe073429b65@arm.com>
Date: Fri, 29 Nov 2019 14:34:59 +0000
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.2.2
MIME-Version: 1.0
In-Reply-To: <20191129135908.2439529-6-boris.brezillon@collabora.com>
Content-Language: en-US
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org, stable@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gMjkvMTEvMjAxOSAxMzo1OSwgQm9yaXMgQnJlemlsbG9uIHdyb3RlOgo+IENvbW1pdCBhNWVm
YjRjOWE1NjIgKCJkcm0vcGFuZnJvc3Q6IFJlc3RydWN0dXJlIHRoZSBHRU0gb2JqZWN0IGNyZWF0
aW9uIikKPiBtb3ZlZCB0aGUgZHJtX21tX2luc2VydF9ub2RlX2dlbmVyaWMoKSBjYWxsIHRvIHRo
ZSBnZW0tPm9wZW4oKSBob29rLAo+IGJ1dCBmb3Jnb3QgdG8gdXBkYXRlIHBlcmZjbnQgYWNjb3Jk
aW5nbHkuCj4gCj4gUGF0Y2ggdGhlIHBlcmZjbnQgbG9naWMgdG8gY2FsbCBwYW5mcm9zdF9nZW1f
b3Blbi9jbG9zZSgpIHdoZXJlCj4gYXBwcm9wcmlhdGUuCj4gCj4gRml4ZXM6IGE1ZWZiNGM5YTU2
MiAoImRybS9wYW5mcm9zdDogUmVzdHJ1Y3R1cmUgdGhlIEdFTSBvYmplY3QgY3JlYXRpb24iKQo+
IENjOiA8c3RhYmxlQHZnZXIua2VybmVsLm9yZz4KPiBTaWduZWQtb2ZmLWJ5OiBCb3JpcyBCcmV6
aWxsb24gPGJvcmlzLmJyZXppbGxvbkBjb2xsYWJvcmEuY29tPgoKUmV2aWV3ZWQtYnk6IFN0ZXZl
biBQcmljZSA8c3RldmVuLnByaWNlQGFybS5jb20+CgpTdGV2ZQoKPiAtLS0KPiAgZHJpdmVycy9n
cHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jICAgICB8ICAyICstCj4gIGRyaXZlcnMvZ3B1
L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uYyAgICAgfCAgNCArKy0tCj4gIGRyaXZlcnMvZ3B1
L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaCAgICAgfCAgNCArKysrCj4gIGRyaXZlcnMvZ3B1
L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9wZXJmY250LmMgfCAyMyArKysrKysrKysrKysrLS0tLS0t
LS0KPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQuaCB8ICAyICst
Cj4gIDUgZmlsZXMgY2hhbmdlZCwgMjIgaW5zZXJ0aW9ucygrKSwgMTMgZGVsZXRpb25zKC0pCj4g
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kcnYuYyBi
L2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kcnYuYwo+IGluZGV4IDI2MzBjNTAy
N2M2My4uMWM2N2FjNDM0ZTEwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9z
dC9wYW5mcm9zdF9kcnYuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9z
dF9kcnYuYwo+IEBAIC00NDUsNyArNDQ1LDcgQEAgcGFuZnJvc3RfcG9zdGNsb3NlKHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkKPiAgewo+ICAJc3RydWN0IHBh
bmZyb3N0X2ZpbGVfcHJpdiAqcGFuZnJvc3RfcHJpdiA9IGZpbGUtPmRyaXZlcl9wcml2Owo+ICAK
PiAtCXBhbmZyb3N0X3BlcmZjbnRfY2xvc2UocGFuZnJvc3RfcHJpdik7Cj4gKwlwYW5mcm9zdF9w
ZXJmY250X2Nsb3NlKGZpbGUpOwo+ICAJcGFuZnJvc3Rfam9iX2Nsb3NlKHBhbmZyb3N0X3ByaXYp
Owo+ICAKPiAgCXBhbmZyb3N0X21tdV9wZ3RhYmxlX2ZyZWUocGFuZnJvc3RfcHJpdik7Cj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uYyBiL2RyaXZl
cnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uYwo+IGluZGV4IGRhZjRjNTVhMjg2My4u
OTJhOTUyMTBhODk5IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5m
cm9zdF9nZW0uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0u
Ywo+IEBAIC00Niw3ICs0Niw3IEBAIHN0YXRpYyB2b2lkIHBhbmZyb3N0X2dlbV9mcmVlX29iamVj
dChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKPiAgCWRybV9nZW1fc2htZW1fZnJlZV9vYmpl
Y3Qob2JqKTsKPiAgfQo+ICAKPiAtc3RhdGljIGludCBwYW5mcm9zdF9nZW1fb3BlbihzdHJ1Y3Qg
ZHJtX2dlbV9vYmplY3QgKm9iaiwgc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYpCj4gK2ludCBw
YW5mcm9zdF9nZW1fb3BlbihzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgc3RydWN0IGRybV9m
aWxlICpmaWxlX3ByaXYpCj4gIHsKPiAgCWludCByZXQ7Cj4gIAlzaXplX3Qgc2l6ZSA9IG9iai0+
c2l6ZTsKPiBAQCAtODUsNyArODUsNyBAQCBzdGF0aWMgaW50IHBhbmZyb3N0X2dlbV9vcGVuKHN0
cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcAo+ICAJcmV0
dXJuIHJldDsKPiAgfQo+ICAKPiAtc3RhdGljIHZvaWQgcGFuZnJvc3RfZ2VtX2Nsb3NlKHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdikKPiArdm9p
ZCBwYW5mcm9zdF9nZW1fY2xvc2Uoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIHN0cnVjdCBk
cm1fZmlsZSAqZmlsZV9wcml2KQo+ICB7Cj4gIAlzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAq
Ym8gPSB0b19wYW5mcm9zdF9ibyhvYmopOwo+ICAJc3RydWN0IHBhbmZyb3N0X2ZpbGVfcHJpdiAq
cHJpdiA9IGZpbGVfcHJpdi0+ZHJpdmVyX3ByaXY7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaCBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9w
YW5mcm9zdF9nZW0uaAo+IGluZGV4IDUwOTIwODE5Y2MxNi4uNGIxN2U3MzA4NzY0IDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaAo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaAo+IEBAIC00NSw2ICs0NSwxMCBA
QCBwYW5mcm9zdF9nZW1fY3JlYXRlX3dpdGhfaGFuZGxlKHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9w
cml2LAo+ICAJCQkJdTMyIGZsYWdzLAo+ICAJCQkJdWludDMyX3QgKmhhbmRsZSk7Cj4gIAo+ICtp
bnQgcGFuZnJvc3RfZ2VtX29wZW4oc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIHN0cnVjdCBk
cm1fZmlsZSAqZmlsZV9wcml2KTsKPiArdm9pZCBwYW5mcm9zdF9nZW1fY2xvc2Uoc3RydWN0IGRy
bV9nZW1fb2JqZWN0ICpvYmosCj4gKwkJCXN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2KTsKPiAr
Cj4gIHZvaWQgcGFuZnJvc3RfZ2VtX3Nocmlua2VyX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRl
dik7Cj4gIHZvaWQgcGFuZnJvc3RfZ2VtX3Nocmlua2VyX2NsZWFudXAoc3RydWN0IGRybV9kZXZp
Y2UgKmRldik7Cj4gIAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFu
ZnJvc3RfcGVyZmNudC5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZj
bnQuYwo+IGluZGV4IDJkYmExOTJiZjE5OC4uMmMwNGU4NThjNTBhIDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9wZXJmY250LmMKPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfcGVyZmNudC5jCj4gQEAgLTY3LDkgKzY3LDEwIEBA
IHN0YXRpYyBpbnQgcGFuZnJvc3RfcGVyZmNudF9kdW1wX2xvY2tlZChzdHJ1Y3QgcGFuZnJvc3Rf
ZGV2aWNlICpwZmRldikKPiAgfQo+ICAKPiAgc3RhdGljIGludCBwYW5mcm9zdF9wZXJmY250X2Vu
YWJsZV9sb2NrZWQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsCj4gLQkJCQkJICBzdHJ1
Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICp1c2VyLAo+ICsJCQkJCSAgc3RydWN0IGRybV9maWxlICpm
aWxlX3ByaXYsCj4gIAkJCQkJICB1bnNpZ25lZCBpbnQgY291bnRlcnNldCkKPiAgewo+ICsJc3Ry
dWN0IHBhbmZyb3N0X2ZpbGVfcHJpdiAqdXNlciA9IGZpbGVfcHJpdi0+ZHJpdmVyX3ByaXY7Cj4g
IAlzdHJ1Y3QgcGFuZnJvc3RfcGVyZmNudCAqcGVyZmNudCA9IHBmZGV2LT5wZXJmY250Owo+ICAJ
c3RydWN0IGRybV9nZW1fc2htZW1fb2JqZWN0ICpibzsKPiAgCXUzMiBjZmc7Cj4gQEAgLTkxLDE0
ICs5MiwxNCBAQCBzdGF0aWMgaW50IHBhbmZyb3N0X3BlcmZjbnRfZW5hYmxlX2xvY2tlZChzdHJ1
Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwKPiAgCXBlcmZjbnQtPmJvID0gdG9fcGFuZnJvc3Rf
Ym8oJmJvLT5iYXNlKTsKPiAgCj4gIAkvKiBNYXAgdGhlIHBlcmZjbnQgYnVmIGluIHRoZSBhZGRy
ZXNzIHNwYWNlIGF0dGFjaGVkIHRvIGZpbGVfcHJpdi4gKi8KPiAtCXJldCA9IHBhbmZyb3N0X21t
dV9tYXAocGVyZmNudC0+Ym8pOwo+ICsJcmV0ID0gcGFuZnJvc3RfZ2VtX29wZW4oJnBlcmZjbnQt
PmJvLT5iYXNlLmJhc2UsIGZpbGVfcHJpdik7Cj4gIAlpZiAocmV0KQo+ICAJCWdvdG8gZXJyX3B1
dF9ibzsKPiAgCj4gIAlwZXJmY250LT5idWYgPSBkcm1fZ2VtX3NobWVtX3ZtYXAoJmJvLT5iYXNl
KTsKPiAgCWlmIChJU19FUlIocGVyZmNudC0+YnVmKSkgewo+ICAJCXJldCA9IFBUUl9FUlIocGVy
ZmNudC0+YnVmKTsKPiAtCQlnb3RvIGVycl9wdXRfYm87Cj4gKwkJZ290byBlcnJfY2xvc2VfYm87
Cj4gIAl9Cj4gIAo+ICAJLyoKPiBAQCAtMTU3LDE0ICsxNTgsMTcgQEAgc3RhdGljIGludCBwYW5m
cm9zdF9wZXJmY250X2VuYWJsZV9sb2NrZWQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYs
Cj4gIAo+ICBlcnJfdnVubWFwOgo+ICAJZHJtX2dlbV9zaG1lbV92dW5tYXAoJnBlcmZjbnQtPmJv
LT5iYXNlLmJhc2UsIHBlcmZjbnQtPmJ1Zik7Cj4gK2Vycl9jbG9zZV9ibzoKPiArCXBhbmZyb3N0
X2dlbV9jbG9zZSgmcGVyZmNudC0+Ym8tPmJhc2UuYmFzZSwgZmlsZV9wcml2KTsKPiAgZXJyX3B1
dF9ibzoKPiAgCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZCgmYm8tPmJhc2UpOwo+ICAJcmV0
dXJuIHJldDsKPiAgfQo+ICAKPiAgc3RhdGljIGludCBwYW5mcm9zdF9wZXJmY250X2Rpc2FibGVf
bG9ja2VkKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LAo+IC0JCQkJCSAgIHN0cnVjdCBw
YW5mcm9zdF9maWxlX3ByaXYgKnVzZXIpCj4gKwkJCQkJICAgc3RydWN0IGRybV9maWxlICpmaWxl
X3ByaXYpCj4gIHsKPiArCXN0cnVjdCBwYW5mcm9zdF9maWxlX3ByaXYgKnVzZXIgPSBmaWxlX3By
aXYtPmRyaXZlcl9wcml2Owo+ICAJc3RydWN0IHBhbmZyb3N0X3BlcmZjbnQgKnBlcmZjbnQgPSBw
ZmRldi0+cGVyZmNudDsKPiAgCj4gIAlpZiAodXNlciAhPSBwZXJmY250LT51c2VyKQo+IEBAIC0x
ODAsNiArMTg0LDcgQEAgc3RhdGljIGludCBwYW5mcm9zdF9wZXJmY250X2Rpc2FibGVfbG9ja2Vk
KHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LAo+ICAJcGVyZmNudC0+dXNlciA9IE5VTEw7
Cj4gIAlkcm1fZ2VtX3NobWVtX3Z1bm1hcCgmcGVyZmNudC0+Ym8tPmJhc2UuYmFzZSwgcGVyZmNu
dC0+YnVmKTsKPiAgCXBlcmZjbnQtPmJ1ZiA9IE5VTEw7Cj4gKwlwYW5mcm9zdF9nZW1fY2xvc2Uo
JnBlcmZjbnQtPmJvLT5iYXNlLmJhc2UsIGZpbGVfcHJpdik7Cj4gIAlkcm1fZ2VtX29iamVjdF9w
dXRfdW5sb2NrZWQoJnBlcmZjbnQtPmJvLT5iYXNlLmJhc2UpOwo+ICAJcGVyZmNudC0+Ym8gPSBO
VUxMOwo+ICAJcG1fcnVudGltZV9tYXJrX2xhc3RfYnVzeShwZmRldi0+ZGV2KTsKPiBAQCAtMTkx
LDcgKzE5Niw2IEBAIHN0YXRpYyBpbnQgcGFuZnJvc3RfcGVyZmNudF9kaXNhYmxlX2xvY2tlZChz
dHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwKPiAgaW50IHBhbmZyb3N0X2lvY3RsX3BlcmZj
bnRfZW5hYmxlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCj4gIAkJCQkgIHN0
cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2KQo+ICB7Cj4gLQlzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9w
cml2ICpwZmlsZSA9IGZpbGVfcHJpdi0+ZHJpdmVyX3ByaXY7Cj4gIAlzdHJ1Y3QgcGFuZnJvc3Rf
ZGV2aWNlICpwZmRldiA9IGRldi0+ZGV2X3ByaXZhdGU7Cj4gIAlzdHJ1Y3QgcGFuZnJvc3RfcGVy
ZmNudCAqcGVyZmNudCA9IHBmZGV2LT5wZXJmY250Owo+ICAJc3RydWN0IGRybV9wYW5mcm9zdF9w
ZXJmY250X2VuYWJsZSAqcmVxID0gZGF0YTsKPiBAQCAtMjA3LDEwICsyMTEsMTAgQEAgaW50IHBh
bmZyb3N0X2lvY3RsX3BlcmZjbnRfZW5hYmxlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQg
KmRhdGEsCj4gIAo+ICAJbXV0ZXhfbG9jaygmcGVyZmNudC0+bG9jayk7Cj4gIAlpZiAocmVxLT5l
bmFibGUpCj4gLQkJcmV0ID0gcGFuZnJvc3RfcGVyZmNudF9lbmFibGVfbG9ja2VkKHBmZGV2LCBw
ZmlsZSwKPiArCQlyZXQgPSBwYW5mcm9zdF9wZXJmY250X2VuYWJsZV9sb2NrZWQocGZkZXYsIGZp
bGVfcHJpdiwKPiAgCQkJCQkJICAgICByZXEtPmNvdW50ZXJzZXQpOwo+ICAJZWxzZQo+IC0JCXJl
dCA9IHBhbmZyb3N0X3BlcmZjbnRfZGlzYWJsZV9sb2NrZWQocGZkZXYsIHBmaWxlKTsKPiArCQly
ZXQgPSBwYW5mcm9zdF9wZXJmY250X2Rpc2FibGVfbG9ja2VkKHBmZGV2LCBmaWxlX3ByaXYpOwo+
ICAJbXV0ZXhfdW5sb2NrKCZwZXJmY250LT5sb2NrKTsKPiAgCj4gIAlyZXR1cm4gcmV0Owo+IEBA
IC0yNDgsMTUgKzI1MiwxNiBAQCBpbnQgcGFuZnJvc3RfaW9jdGxfcGVyZmNudF9kdW1wKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCj4gIAlyZXR1cm4gcmV0Owo+ICB9Cj4gIAo+
IC12b2lkIHBhbmZyb3N0X3BlcmZjbnRfY2xvc2Uoc3RydWN0IHBhbmZyb3N0X2ZpbGVfcHJpdiAq
cGZpbGUpCj4gK3ZvaWQgcGFuZnJvc3RfcGVyZmNudF9jbG9zZShzdHJ1Y3QgZHJtX2ZpbGUgKmZp
bGVfcHJpdikKPiAgewo+ICsJc3RydWN0IHBhbmZyb3N0X2ZpbGVfcHJpdiAqcGZpbGUgPSBmaWxl
X3ByaXYtPmRyaXZlcl9wcml2Owo+ICAJc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYgPSBw
ZmlsZS0+cGZkZXY7Cj4gIAlzdHJ1Y3QgcGFuZnJvc3RfcGVyZmNudCAqcGVyZmNudCA9IHBmZGV2
LT5wZXJmY250Owo+ICAKPiAgCXBtX3J1bnRpbWVfZ2V0X3N5bmMocGZkZXYtPmRldik7Cj4gIAlt
dXRleF9sb2NrKCZwZXJmY250LT5sb2NrKTsKPiAgCWlmIChwZXJmY250LT51c2VyID09IHBmaWxl
KQo+IC0JCXBhbmZyb3N0X3BlcmZjbnRfZGlzYWJsZV9sb2NrZWQocGZkZXYsIHBmaWxlKTsKPiAr
CQlwYW5mcm9zdF9wZXJmY250X2Rpc2FibGVfbG9ja2VkKHBmZGV2LCBmaWxlX3ByaXYpOwo+ICAJ
bXV0ZXhfdW5sb2NrKCZwZXJmY250LT5sb2NrKTsKPiAgCXBtX3J1bnRpbWVfbWFya19sYXN0X2J1
c3kocGZkZXYtPmRldik7Cj4gIAlwbV9ydW50aW1lX3B1dF9hdXRvc3VzcGVuZChwZmRldi0+ZGV2
KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZj
bnQuaCBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9wZXJmY250LmgKPiBpbmRl
eCAxM2I4ZmRhYTFiNDMuLjhiYmNmNWY1ZmIzMyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vcGFuZnJvc3QvcGFuZnJvc3RfcGVyZmNudC5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQuaAo+IEBAIC05LDcgKzksNyBAQCB2b2lkIHBhbmZyb3N0
X3BlcmZjbnRfc2FtcGxlX2RvbmUoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpOwo+ICB2
b2lkIHBhbmZyb3N0X3BlcmZjbnRfY2xlYW5fY2FjaGVfZG9uZShzdHJ1Y3QgcGFuZnJvc3RfZGV2
aWNlICpwZmRldik7Cj4gIGludCBwYW5mcm9zdF9wZXJmY250X2luaXQoc3RydWN0IHBhbmZyb3N0
X2RldmljZSAqcGZkZXYpOwo+ICB2b2lkIHBhbmZyb3N0X3BlcmZjbnRfZmluaShzdHJ1Y3QgcGFu
ZnJvc3RfZGV2aWNlICpwZmRldik7Cj4gLXZvaWQgcGFuZnJvc3RfcGVyZmNudF9jbG9zZShzdHJ1
Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICpwZmlsZSk7Cj4gK3ZvaWQgcGFuZnJvc3RfcGVyZmNudF9j
bG9zZShzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdik7Cj4gIGludCBwYW5mcm9zdF9pb2N0bF9w
ZXJmY250X2VuYWJsZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAo+ICAJCQkJ
ICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdik7Cj4gIGludCBwYW5mcm9zdF9pb2N0bF9wZXJm
Y250X2R1bXAoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKPiAKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
