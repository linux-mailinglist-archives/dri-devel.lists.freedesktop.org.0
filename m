Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 239DBF07D5
	for <lists+dri-devel@lfdr.de>; Tue,  5 Nov 2019 22:11:05 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 56BBE6EA20;
	Tue,  5 Nov 2019 21:11:01 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yb1-xb41.google.com (mail-yb1-xb41.google.com
 [IPv6:2607:f8b0:4864:20::b41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B88CC6EA20
 for <dri-devel@lists.freedesktop.org>; Tue,  5 Nov 2019 21:10:58 +0000 (UTC)
Received: by mail-yb1-xb41.google.com with SMTP id i15so1085796ybq.0
 for <dri-devel@lists.freedesktop.org>; Tue, 05 Nov 2019 13:10:58 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=zsWMYnPd4Aw1CcoU1mvThLbX9TGaEGFP0Ia7fKCg/po=;
 b=SmdMQrIpZUJElSGXKyL3B6L3Q2oB25zhpyK50iSKmO8udouN0HOMopVYBRJeAISDAt
 kRS6SuEZKV6SFq34qp5A3Xnnw5VY/yPrGxOjgtrOocmKA7MB09QwMY64LiYzswLH9/5j
 ndsZDwuPRD66ni1iuOtNDDyPiMSjfXHagJHEbg+fjP204ruVKejgAlmf6v0QRmwlR0VW
 oAQr5xTCcvlnzhLvQZ11F1lJr6S2VLDo7Y/dnH2AMvQrMneXQyNt7YobkW9Z5uLq2ax0
 f84xhEqq/0+/RnhOA6rRkbyhnJyPIQ6vBn3CtKHPgeDVw28nBnbe4cmfGDlrJezdpmMq
 1YnQ==
X-Gm-Message-State: APjAAAUrBgTPm4r1F1jHWUogejVAZHUYAzKyBazlAW4PCpLgxvoz0ocN
 4KIFF1YVSCzFrAlTd2vIukxW1kQ6+7k=
X-Google-Smtp-Source: APXvYqzOzXSiMBon8QdPw00BMVJRl1tQsrr2noW3epgpCXkqmtMfVGaEK0hFffrZka1kAFUZhMO3RA==
X-Received: by 2002:a25:bd88:: with SMTP id f8mr28380318ybh.135.1572988257623; 
 Tue, 05 Nov 2019 13:10:57 -0800 (PST)
Received: from rosewood.cam.corp.google.com
 ([2620:0:1013:11:89c6:2139:5435:371d])
 by smtp.gmail.com with ESMTPSA id j66sm1815216ywb.101.2019.11.05.13.10.56
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 05 Nov 2019 13:10:57 -0800 (PST)
From: Sean Paul <sean@poorly.run>
To: dri-devel@lists.freedesktop.org,
	linux-mediatek@lists.infradead.org
Subject: [PATCH v2 5/7] drm/mediatek: Support reflect-y plane rotation
Date: Tue,  5 Nov 2019 16:10:22 -0500
Message-Id: <20191105211034.123937-6-sean@poorly.run>
X-Mailer: git-send-email 2.24.0.rc1.363.gb1bccd3e3d-goog
In-Reply-To: <20191105211034.123937-1-sean@poorly.run>
References: <20191105211034.123937-1-sean@poorly.run>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=poorly.run; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=zsWMYnPd4Aw1CcoU1mvThLbX9TGaEGFP0Ia7fKCg/po=;
 b=XLW1y6CQbRxMSOYcoi5wZSuKszC0GIywu0TVxMMjfwFK1PnNXWKRUIH6TK4/d5kMO1
 /ww32khexerF4EmfttsPK6IEubjlkxvsbV1NZrgKzY4l5FzqonI+/eBp6TEZTCPzs00A
 iGztN2ZPkPUH115D6+aBVICxtW0khGZIU2sJZUOV8N8XRiodrapKWOk78mTGZA+v90p/
 b9tPSxG9B9wJOzQO27Rq4m2HtAEoEfcxFb5MZ3rtqbe7YfLhS+cL9aan0PaflwhRfSnM
 dWXbhFH5Ia/KEA98zjYpIdoCmh+l55LuEdIoIAxUjARlKE626MTmrMQ2Uhdgb9RfG5Hw
 cXHw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dcastagna@chromium.org, matthias.bgg@gmail.com, mcasas@chromium.org,
 Sean Paul <seanpaul@chromium.org>, frkoenig@chromium.org,
 linux-arm-kernel@lists.infradead.org, markyacoub@google.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogU2VhbiBQYXVsIDxzZWFucGF1bEBjaHJvbWl1bS5vcmc+CgpFeHBvc2UgdGhlIHJvdGF0
aW9uIHByb3BlcnR5IGFuZCBoYW5kbGUgUkVGTEVDVF9ZIHJvdGF0aW9ucy4KCkNoYW5nZXMgaW4g
djI6Ci0gTW92ZSB0aGUgY2hlY2sgbG9naWMgaW50byBtdGtfZGlzcF9vdmwuYyBzaW5jZSBpdCBk
b2Vzbid0IGFwcGx5IHRvIHJkbWEKCkxpbmsgdG8gdjE6IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL2FyY2hpdmVzL2RyaS1kZXZlbC8yMDE5LU5vdmVtYmVyLzI0MjMxMi5odG1sCgpDYzog
RnJpdHogS29lbmlnIDxmcmtvZW5pZ0BjaHJvbWl1bS5vcmc+CkNjOiBEYW5pZWxlIENhc3RhZ25h
IDxkY2FzdGFnbmFAY2hyb21pdW0ub3JnPgpDYzogTWlndWVsIENhc2FzIDxtY2FzYXNAY2hyb21p
dW0ub3JnPgpDYzogTWFyayBZYWNvdWIgPG1hcmt5YWNvdWJAZ29vZ2xlLmNvbT4KU2lnbmVkLW9m
Zi1ieTogU2VhbiBQYXVsIDxzZWFucGF1bEBjaHJvbWl1bS5vcmc+Ci0tLQogZHJpdmVycy9ncHUv
ZHJtL21lZGlhdGVrL210a19kaXNwX292bC5jIHwgNDIgKysrKysrKysrKysrKysrKysrKysrKysr
KwogMSBmaWxlIGNoYW5nZWQsIDQyIGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2Rpc3Bfb3ZsLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0
ZWsvbXRrX2Rpc3Bfb3ZsLmMKaW5kZXggMTQ4NzhlYmY1OWQ3Li5mYWUxMGFlYWQzZDUgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZGlzcF9vdmwuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2Rpc3Bfb3ZsLmMKQEAgLTMsNiArMyw4IEBACiAgKiBD
b3B5cmlnaHQgKGMpIDIwMTUgTWVkaWFUZWsgSW5jLgogICovCiAKKyNpbmNsdWRlIDxkcm0vZHJt
X2ZvdXJjYy5oPgorCiAjaW5jbHVkZSA8bGludXgvY2xrLmg+CiAjaW5jbHVkZSA8bGludXgvY29t
cG9uZW50Lmg+CiAjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+CkBAIC01MCw2ICs1Miw3IEBACiAJ
CQkJCU9WTF9DT05fQ0xSRk1UX1JHQiA6IDApCiAjZGVmaW5lCU9WTF9DT05fQUVOCQlCSVQoOCkK
ICNkZWZpbmUJT1ZMX0NPTl9BTFBIQQkJMHhmZgorI2RlZmluZQlPVkxfQ09OX1ZJUlRfRkxJUAlC
SVQoOSkKIAogc3RydWN0IG10a19kaXNwX292bF9kYXRhIHsKIAl1bnNpZ25lZCBpbnQgYWRkcjsK
QEAgLTEzNyw2ICsxNDAsMzggQEAgc3RhdGljIHVuc2lnbmVkIGludCBtdGtfb3ZsX2xheWVyX25y
KHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXApCiAJcmV0dXJuIG92bC0+ZGF0YS0+bGF5ZXJfbnI7
CiB9CiAKK3N0YXRpYyB1bnNpZ25lZCBpbnQgbXRrX292bF9zdXBwb3J0ZWRfcm90YXRpb25zKHN0
cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXApCit7CisJcmV0dXJuIERSTV9NT0RFX1JPVEFURV8wIHwg
RFJNX01PREVfUkVGTEVDVF9ZOworfQorCitzdGF0aWMgaW50IG10a19vdmxfbGF5ZXJfY2hlY2so
c3RydWN0IG10a19kZHBfY29tcCAqY29tcCwgdW5zaWduZWQgaW50IGlkeCwKKwkJCSAgICAgICBz
dHJ1Y3QgbXRrX3BsYW5lX3N0YXRlICptdGtfc3RhdGUpCit7CisJc3RydWN0IGRybV9wbGFuZV9z
dGF0ZSAqc3RhdGUgPSAmbXRrX3N0YXRlLT5iYXNlOworCXVuc2lnbmVkIGludCByb3RhdGlvbiA9
IDA7CisKKwlyb3RhdGlvbiA9IGRybV9yb3RhdGlvbl9zaW1wbGlmeShzdGF0ZS0+cm90YXRpb24s
CisJCQkJCSBEUk1fTU9ERV9ST1RBVEVfMCB8CisJCQkJCSBEUk1fTU9ERV9SRUZMRUNUX1kpOwor
CXJvdGF0aW9uICY9IH5EUk1fTU9ERV9ST1RBVEVfMDsKKworCS8qIFdlIGNhbiBvbmx5IGRvIHJl
ZmxlY3Rpb24sIG5vdCByb3RhdGlvbiAqLworCWlmICgocm90YXRpb24gJiBEUk1fTU9ERV9ST1RB
VEVfTUFTSykgIT0gMCkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwkvKgorCSAqIFRPRE86IFJvdGF0
aW5nL3JlZmxlY3RpbmcgWVVWIGJ1ZmZlcnMgaXMgbm90IHN1cHBvcnRlZCBhdCB0aGlzIHRpbWUu
CisJICoJIE9ubHkgUkdCW0FYXSB2YXJpYW50cyBhcmUgc3VwcG9ydGVkLgorCSAqLworCWlmIChz
dGF0ZS0+ZmItPmZvcm1hdC0+aXNfeXV2ICYmIHJvdGF0aW9uICE9IDApCisJCXJldHVybiAtRUlO
VkFMOworCisJc3RhdGUtPnJvdGF0aW9uID0gcm90YXRpb247CisKKwlyZXR1cm4gMDsKK30KKwog
c3RhdGljIHZvaWQgbXRrX292bF9sYXllcl9vbihzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wLCB1
bnNpZ25lZCBpbnQgaWR4KQogewogCXVuc2lnbmVkIGludCByZWc7CkBAIC0yMjksNiArMjY0LDEx
IEBAIHN0YXRpYyB2b2lkIG10a19vdmxfbGF5ZXJfY29uZmlnKHN0cnVjdCBtdGtfZGRwX2NvbXAg
KmNvbXAsIHVuc2lnbmVkIGludCBpZHgsCiAJaWYgKGlkeCAhPSAwKQogCQljb24gfD0gT1ZMX0NP
Tl9BRU4gfCBPVkxfQ09OX0FMUEhBOwogCisJaWYgKHBlbmRpbmctPnJvdGF0aW9uICYgRFJNX01P
REVfUkVGTEVDVF9ZKSB7CisJCWNvbiB8PSBPVkxfQ09OX1ZJUlRfRkxJUDsKKwkJYWRkciArPSAo
cGVuZGluZy0+aGVpZ2h0IC0gMSkgKiBwZW5kaW5nLT5waXRjaDsKKwl9CisKIAl3cml0ZWxfcmVs
YXhlZChjb24sIGNvbXAtPnJlZ3MgKyBESVNQX1JFR19PVkxfQ09OKGlkeCkpOwogCXdyaXRlbF9y
ZWxheGVkKHBpdGNoLCBjb21wLT5yZWdzICsgRElTUF9SRUdfT1ZMX1BJVENIKGlkeCkpOwogCXdy
aXRlbF9yZWxheGVkKHNyY19zaXplLCBjb21wLT5yZWdzICsgRElTUF9SRUdfT1ZMX1NSQ19TSVpF
KGlkeCkpOwpAQCAtMjYzLDkgKzMwMywxMSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IG10a19kZHBf
Y29tcF9mdW5jcyBtdGtfZGlzcF9vdmxfZnVuY3MgPSB7CiAJLnN0b3AgPSBtdGtfb3ZsX3N0b3As
CiAJLmVuYWJsZV92YmxhbmsgPSBtdGtfb3ZsX2VuYWJsZV92YmxhbmssCiAJLmRpc2FibGVfdmJs
YW5rID0gbXRrX292bF9kaXNhYmxlX3ZibGFuaywKKwkuc3VwcG9ydGVkX3JvdGF0aW9ucyA9IG10
a19vdmxfc3VwcG9ydGVkX3JvdGF0aW9ucywKIAkubGF5ZXJfbnIgPSBtdGtfb3ZsX2xheWVyX25y
LAogCS5sYXllcl9vbiA9IG10a19vdmxfbGF5ZXJfb24sCiAJLmxheWVyX29mZiA9IG10a19vdmxf
bGF5ZXJfb2ZmLAorCS5sYXllcl9jaGVjayA9IG10a19vdmxfbGF5ZXJfY2hlY2ssCiAJLmxheWVy
X2NvbmZpZyA9IG10a19vdmxfbGF5ZXJfY29uZmlnLAogCS5iZ2Nscl9pbl9vbiA9IG10a19vdmxf
YmdjbHJfaW5fb24sCiAJLmJnY2xyX2luX29mZiA9IG10a19vdmxfYmdjbHJfaW5fb2ZmLAotLSAK
U2VhbiBQYXVsLCBTb2Z0d2FyZSBFbmdpbmVlciwgR29vZ2xlIC8gQ2hyb21pdW0gT1MKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
