Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 87B8DCFD03
	for <lists+dri-devel@lfdr.de>; Tue,  8 Oct 2019 17:01:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7EF266E821;
	Tue,  8 Oct 2019 15:01:02 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-oi1-x243.google.com (mail-oi1-x243.google.com
 [IPv6:2607:f8b0:4864:20::243])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DD58A6E821
 for <dri-devel@lists.freedesktop.org>; Tue,  8 Oct 2019 15:00:58 +0000 (UTC)
Received: by mail-oi1-x243.google.com with SMTP id i185so15008447oif.9
 for <dri-devel@lists.freedesktop.org>; Tue, 08 Oct 2019 08:00:58 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=LbF7WG0VVMrh+RlETkWL6K7152RECJRWyhuVFKyOKT0=;
 b=VntgmgABGvxcSIkc1Uv4lTCXVfc8o+8+VywOt/vAi2Z/XVBCFwIDsE+7qvMhCKaKA2
 MoicaMgyD1eMVzM+/Kqip1xeVnPyxVwPzFnP5aBf5FEkN70e/xY9e01zvkLTSCEFwq5G
 span5Oz1Y7FR3HippyfuNWGta0rBFsprLyYIQoJYwO8VPzoqlp+Fjrmc8/Aac47IYNdo
 PAHyqYvFSwcAD5q9Kx+j+G3qIbIzN6Ew4ci+ckXNsTpa00yIaYECu1mpmzAHgkkVpZUe
 9UoIDIkJI6V1fqpZZtRzttIxoWWt4toF93kepxrsgyXbMV922rf2aDhZA1m9ToZjRf/d
 g7EA==
X-Gm-Message-State: APjAAAULE5TegHeDOGQu5ykgcDwaNyTfm3TkmMwc4Ken1I7JX6mBM8cq
 quQb9V64dF+o1Fh41gKUuiIKwUI8CdqtdVF/lST1fiHk
X-Google-Smtp-Source: APXvYqxePf0H09iiLoL03nM0CZaAHHGXlX0aAhKzg6033m4U8lliHyQj0GcebQFdSka/XeXqF5UcsIiwu/KpYhNDfT8=
X-Received: by 2002:aca:5c45:: with SMTP id q66mr4096587oib.132.1570546857869; 
 Tue, 08 Oct 2019 08:00:57 -0700 (PDT)
MIME-Version: 1.0
References: <1558323179-18857-1-git-send-email-lowry.li@arm.com>
In-Reply-To: <1558323179-18857-1-git-send-email-lowry.li@arm.com>
From: Daniel Vetter <daniel@ffwll.ch>
Date: Tue, 8 Oct 2019 17:00:46 +0200
Message-ID: <CAKMK7uEEQUdSHFPP7UoXs9jv2CLiPQBFQv9gsxyVnsSjApFyVQ@mail.gmail.com>
Subject: Re: [PATCH] drm/komeda: Adds zorder support
To: "Lowry Li (Arm Technology China)" <Lowry.Li@arm.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=LbF7WG0VVMrh+RlETkWL6K7152RECJRWyhuVFKyOKT0=;
 b=J8FiqaRtyCslpoOrFvHAyIezrRefCEOaAujpFQLaevw6Wsxbr5fqvNWdAR6rA+BspJ
 1XaSAwkzTEoGSm7UQbl+2omjROnBkPIxoULTIuJdYJUN/bAAu8RtpI2tW8A4Uu6HoW1C
 hGO8puHB4KET0A68pJ89t1zcx0TapdM6QB5O8=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: nd <nd@arm.com>, "airlied@linux.ie" <airlied@linux.ie>,
 Liviu Dudau <Liviu.Dudau@arm.com>,
 "Jonathan Chai \(Arm Technology China\)" <Jonathan.Chai@arm.com>,
 "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
 "dri-devel@lists.freedesktop.org" <dri-devel@lists.freedesktop.org>,
 "Julien Yin \(Arm Technology China\)" <Julien.Yin@arm.com>,
 "james qian wang \(Arm Technology China\)" <james.qian.wang@arm.com>,
 "seanpaul@chromium.org" <seanpaul@chromium.org>,
 Ayan Halder <Ayan.Halder@arm.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gTW9uLCBNYXkgMjAsIDIwMTkgYXQgNTozMyBBTSBMb3dyeSBMaSAoQXJtIFRlY2hub2xvZ3kg
Q2hpbmEpCjxMb3dyeS5MaUBhcm0uY29tPiB3cm90ZToKPgo+IC0gQ3JlYXRlcyB0aGUgenBvcyBw
cm9wZXJ0eS4KPiAtIEltcGxlbWVudCBrb21lZGFfY3J0Y19ub3JtYWxpemVfenBvcyB0byByZXBs
YWNlCj4gZHJtX2F0b21pY19ub3JtYWxpemVfenBvcywgcmVhc29ucyBhcyB0aGUgZm9sbG93aW5n
Ogo+Cj4gMS4gVGhlIGRybV9hdG9taWNfbm9ybWFsaXplX3pwb3MgYWxsb3dzIHRvIGNvbmZpZ3Vy
ZSBzYW1lIHpwb3MgZm9yCj4gZGlmZmVyZW50IHBsYW5lcywgYnV0IGtvbWVkYSBkb2Vzbid0IHN1
cHBvcnQgc3VjaCBjb25maWd1cmF0aW9uLgoKSnVzdCBzdHVtYmxlZCBvdmVyIHlvdXIgY3VzdG9t
IG5vcm1hbGl6ZWRfenBvcyBjYWxjdWxhdGlvbiwgYW5kIGl0Cmxvb2tzIHZlcnkgZmlzaHkuIFlv
dSBzZWVtIHRvIHJlaW52ZW50IHRoZSBub3JtYWxpemVkIHpwb3MKY29tcHV0YXRpb24sIHdoaWNo
IGhhcyB0aGUgZW50aXJlIGpvYiBvZiByZXNvbHZpbmcgZHVwbGljYXRlZCB6cG9zCnZhbHVlcyAo
d2hpY2ggY2FuIGhhcHBlbiB3aXRoIGxlZ2FjeSBrbXMpLiBTbyB0aGUgYWJvdmUgaXMgZGVmaW5p
dGVseQp3cm9uZy4KCkNhbiB5b3UgcGxzIGRvIGEgcGF0Y2ggdG8gcmVtb3ZlIHlvdXIgb3duIGNv
ZGUsIGFuZCByZXBsYWNlIGl0IHdpdGgKaGVscGVyIHVzYWdlPyBPciBhdCBsZWFzdCBleHBsYWlu
IHdoeSBleGFjdGx5IHlvdSBjYW4ndCB1c2UgdGhlCnN0YW5kYXJkIG5vcm1hbGl6ZWQgenBvcyBz
dHVmZiBhbmQgbmVlZCB5b3VyIG93biAoc2luY2UgaXQgcmVhbGx5Cmxvb2tzIGxpa2UganVzdCBy
ZWludmVudGluZyB0aGUgc2FtZSB0aGluZykuCi1EYW5pZWwKCj4gMi4gRm9yIGZ1cnRoZXIgc2xh
dmUgcGlwbGluZSBjYXNlLCBLb21lZGEgbmVlZCB0byBjYWxjdWxhdGUgdGhlCj4gbWF4X3NsYXZl
X3pvcmRlciwgd2Ugd2lsbCBtZXJnZSBzdWNoIGNhbGN1bGF0aW9uIGludG8KPiBrb21lZF9jcnRj
X25vcm1hbGl6ZV96cG9zIHRvIHNhdmUgYSBzZXBhcmF0ZWQgcGxhbmVfc3RhdGUgbG9vcC4KPiAz
LiBGb3IgZmVhdHVyZSBub25lLXNjYWxpbmcgbGF5ZXJfc3BsaXQsIHdoaWNoIGEgcGxhbmVfc3Rh
dGUgd2lsbCBiZQo+IGFzc2lnbmVkIHRvIHR3byBpbmRpdmlkdWFsIGxheWVycyhsZWZ0L3JpZ2h0
KSwgd2hpY2ggcmVxdWlyZXMgdHdvCj4gbm9ybWFsaXplX3pwb3MgZm9yIHRoaXMgcGxhbmUsIHBs
YW5lX3N0LT5ub3JtYWxpemVfenBvcyB3aWxsIGJlIHVzZWQKPiBieSBsZWZ0IGxheWVyLCBub3Jt
YWxpemVfenBvcyArIDEgZm9yIHJpZ2h0X2xheWVyLgo+Cj4gVGhpcyBwYXRjaCBzZXJpZXMgZGVw
ZW5kcyBvbjoKPiAtIGh0dHBzOi8vcGF0Y2h3b3JrLmZyZWVkZXNrdG9wLm9yZy9zZXJpZXMvNTg3
MTAvCj4gLSBodHRwczovL3BhdGNod29yay5mcmVlZGVza3RvcC5vcmcvc2VyaWVzLzU5MDAwLwo+
IC0gaHR0cHM6Ly9wYXRjaHdvcmsuZnJlZWRlc2t0b3Aub3JnL3Nlcmllcy81OTAwMi8KPiAtIGh0
dHBzOi8vcGF0Y2h3b3JrLmZyZWVkZXNrdG9wLm9yZy9zZXJpZXMvNTk3NDcvCj4gLSBodHRwczov
L3BhdGNod29yay5mcmVlZGVza3RvcC5vcmcvc2VyaWVzLzU5OTE1Lwo+IC0gaHR0cHM6Ly9wYXRj
aHdvcmsuZnJlZWRlc2t0b3Aub3JnL3Nlcmllcy82MDA4My8KPiAtIGh0dHBzOi8vcGF0Y2h3b3Jr
LmZyZWVkZXNrdG9wLm9yZy9zZXJpZXMvNjA2OTgvCj4KPiBTaWduZWQtb2ZmLWJ5OiBMb3dyeSBM
aSAoQXJtIFRlY2hub2xvZ3kgQ2hpbmEpIDxsb3dyeS5saUBhcm0uY29tPgo+IC0tLQo+ICBkcml2
ZXJzL2dwdS9kcm0vYXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV9rbXMuYyAgIHwgOTAgKysrKysr
KysrKysrKysrKysrKysrKy0KPiAgZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9r
b21lZGFfa21zLmggICB8ICAzICsKPiAgZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVk
YS9rb21lZGFfcGxhbmUuYyB8ICA2ICstCj4gIDMgZmlsZXMgY2hhbmdlZCwgOTcgaW5zZXJ0aW9u
cygrKSwgMiBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYXJt
L2Rpc3BsYXkva29tZWRhL2tvbWVkYV9rbXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxh
eS9rb21lZGEva29tZWRhX2ttcy5jCj4gaW5kZXggMzA2ZWEwNi4uMGVjNzY2NSAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV9rbXMuYwo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX2ttcy5jCj4gQEAg
LTEwMCw2ICsxMDAsOTAgQEAgc3RhdGljIHZvaWQga29tZWRhX2ttc19jb21taXRfdGFpbChzdHJ1
Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX3N0YXRlKQo+ICAgICAgICAgLmF0b21pY19jb21taXRf
dGFpbCA9IGtvbWVkYV9rbXNfY29tbWl0X3RhaWwsCj4gIH07Cj4KPiArc3RhdGljIGludCBrb21l
ZGFfcGxhbmVfc3RhdGVfbGlzdF9hZGQoc3RydWN0IGRybV9wbGFuZV9zdGF0ZSAqcGxhbmVfc3Qs
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGxpc3RfaGVh
ZCAqem9yZGVyX2xpc3QpCj4gK3sKPiArICAgICAgIHN0cnVjdCBrb21lZGFfcGxhbmVfc3RhdGUg
Km5ldyA9IHRvX2twbGFuZV9zdChwbGFuZV9zdCk7Cj4gKyAgICAgICBzdHJ1Y3Qga29tZWRhX3Bs
YW5lX3N0YXRlICpub2RlLCAqbGFzdDsKPiArCj4gKyAgICAgICBsYXN0ID0gbGlzdF9lbXB0eSh6
b3JkZXJfbGlzdCkgPwo+ICsgICAgICAgICAgICAgIE5VTEwgOiBsaXN0X2xhc3RfZW50cnkoem9y
ZGVyX2xpc3QsIHR5cGVvZigqbGFzdCksIHpsaXN0X25vZGUpOwo+ICsKPiArICAgICAgIC8qIENv
bnNpZGVyaW5nIHRoZSBsaXN0IHNlcXVlbmNlIGlzIHpwb3MgaW5jcmVhc2luZywgc28gaWYgbGlz
dCBpcyBlbXB0eQo+ICsgICAgICAgICogb3IgdGhlIHpwb3Mgb2YgbmV3IG5vZGUgYmlnZ2VyIHRo
YW4gdGhlIGxhc3Qgbm9kZSBpbiBsaXN0LCBubyBuZWVkCj4gKyAgICAgICAgKiBsb29wIGFuZCBq
dXN0IGluc2VydCB0aGUgbmV3IG9uZSB0byB0aGUgdGFpbCBvZiB0aGUgbGlzdC4KPiArICAgICAg
ICAqLwo+ICsgICAgICAgaWYgKCFsYXN0IHx8IChuZXctPmJhc2UuenBvcyA+IGxhc3QtPmJhc2Uu
enBvcykpIHsKPiArICAgICAgICAgICAgICAgbGlzdF9hZGRfdGFpbCgmbmV3LT56bGlzdF9ub2Rl
LCB6b3JkZXJfbGlzdCk7Cj4gKyAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICsgICAgICAgfQo+
ICsKPiArICAgICAgIC8qIEJ1aWxkIHRoZSBsaXN0IGJ5IHpwb3MgaW5jcmVhc2luZyAqLwo+ICsg
ICAgICAgbGlzdF9mb3JfZWFjaF9lbnRyeShub2RlLCB6b3JkZXJfbGlzdCwgemxpc3Rfbm9kZSkg
ewo+ICsgICAgICAgICAgICAgICBpZiAobmV3LT5iYXNlLnpwb3MgPCBub2RlLT5iYXNlLnpwb3Mp
IHsKPiArICAgICAgICAgICAgICAgICAgICAgICBsaXN0X2FkZF90YWlsKCZuZXctPnpsaXN0X25v
ZGUsICZub2RlLT56bGlzdF9ub2RlKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsK
PiArICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlLT5iYXNlLnpwb3MgPT0gbmV3LT5iYXNl
Lnpwb3MpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX3BsYW5lICphID0g
bm9kZS0+YmFzZS5wbGFuZTsKPiArICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX3Bs
YW5lICpiID0gbmV3LT5iYXNlLnBsYW5lOwo+ICsKPiArICAgICAgICAgICAgICAgICAgICAgICAv
KiBLb21lZGEgZG9lc24ndCBzdXBwb3J0IHNldHRpbmcgYSBzYW1lIHpwb3MgZm9yCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICogZGlmZmVyZW50IHBsYW5lcy4KPiArICAgICAgICAgICAgICAg
ICAgICAgICAgKi8KPiArICAgICAgICAgICAgICAgICAgICAgICBEUk1fREVCVUdfQVRPTUlDKCJQ
TEFORTogJXMgYW5kIFBMQU5FOiAlcyBhcmUgY29uZmlndXJlZCBzYW1lIHpwb3M6ICVkLlxuIiwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEtPm5hbWUsIGItPm5h
bWUsIG5vZGUtPmJhc2UuenBvcyk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1F
SU5WQUw7Cj4gKyAgICAgICAgICAgICAgIH0KPiArICAgICAgIH0KPiArCj4gKyAgICAgICByZXR1
cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIGludCBrb21lZGFfY3J0Y19ub3JtYWxpemVfenBvcyhz
dHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKmNydGNfc3QpCj4gK3sKPiArICAgICAgIHN0cnVj
dCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSA9IGNydGNfc3QtPnN0YXRlOwo+ICsgICAgICAgc3Ry
dWN0IGtvbWVkYV9wbGFuZV9zdGF0ZSAqa3BsYW5lX3N0Owo+ICsgICAgICAgc3RydWN0IGRybV9w
bGFuZV9zdGF0ZSAqcGxhbmVfc3Q7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpm
YjsKPiArICAgICAgIHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lOwo+ICsgICAgICAgc3RydWN0IGxp
c3RfaGVhZCB6b3JkZXJfbGlzdDsKPiArICAgICAgIGludCBvcmRlciA9IDAsIGVycjsKPiArCj4g
KyAgICAgICBEUk1fREVCVUdfQVRPTUlDKCJbQ1JUQzolZDolc10gY2FsY3VsYXRpbmcgbm9ybWFs
aXplZCB6cG9zIHZhbHVlc1xuIiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgY3J0Yy0+YmFz
ZS5pZCwgY3J0Yy0+bmFtZSk7Cj4gKwo+ICsgICAgICAgSU5JVF9MSVNUX0hFQUQoJnpvcmRlcl9s
aXN0KTsKPiArCj4gKyAgICAgICAvKiBUaGlzIGxvb3AgYWxzbyBhZGRlZCBhbGwgZWZmZWN0ZWQg
cGxhbmVzIGludG8gdGhlIG5ldyBzdGF0ZSAqLwo+ICsgICAgICAgZHJtX2Zvcl9lYWNoX3BsYW5l
X21hc2socGxhbmUsIGNydGMtPmRldiwgY3J0Y19zdC0+cGxhbmVfbWFzaykgewo+ICsgICAgICAg
ICAgICAgICBwbGFuZV9zdCA9IGRybV9hdG9taWNfZ2V0X3BsYW5lX3N0YXRlKHN0YXRlLCBwbGFu
ZSk7Cj4gKyAgICAgICAgICAgICAgIGlmIChJU19FUlIocGxhbmVfc3QpKQo+ICsgICAgICAgICAg
ICAgICAgICAgICAgIHJldHVybiBQVFJfRVJSKHBsYW5lX3N0KTsKPiArCj4gKyAgICAgICAgICAg
ICAgIC8qIEJ1aWxkIGEgbGlzdCBieSB6cG9zIGluY3JlYXNpbmcgKi8KPiArICAgICAgICAgICAg
ICAgZXJyID0ga29tZWRhX3BsYW5lX3N0YXRlX2xpc3RfYWRkKHBsYW5lX3N0LCAmem9yZGVyX2xp
c3QpOwo+ICsgICAgICAgICAgICAgICBpZiAoZXJyKQo+ICsgICAgICAgICAgICAgICAgICAgICAg
IHJldHVybiBlcnI7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgbGlzdF9mb3JfZWFjaF9lbnRy
eShrcGxhbmVfc3QsICZ6b3JkZXJfbGlzdCwgemxpc3Rfbm9kZSkgewo+ICsgICAgICAgICAgICAg
ICBwbGFuZV9zdCA9ICZrcGxhbmVfc3QtPmJhc2U7Cj4gKyAgICAgICAgICAgICAgIGZiID0gcGxh
bmVfc3QtPmZiOwo+ICsgICAgICAgICAgICAgICBwbGFuZSA9IHBsYW5lX3N0LT5wbGFuZTsKPiAr
Cj4gKyAgICAgICAgICAgICAgIHBsYW5lX3N0LT5ub3JtYWxpemVkX3pwb3MgPSBvcmRlcisrOwo+
ICsKPiArICAgICAgICAgICAgICAgRFJNX0RFQlVHX0FUT01JQygiW1BMQU5FOiVkOiVzXSB6cG9z
OiVkLCBub3JtYWxpemVkIHpwb3M6ICVkXG4iLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHBsYW5lLT5iYXNlLmlkLCBwbGFuZS0+bmFtZSwKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBwbGFuZV9zdC0+enBvcywgcGxhbmVfc3QtPm5vcm1hbGl6ZWRfenBvcyk7
Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgY3J0Y19zdC0+enBvc19jaGFuZ2VkID0gdHJ1ZTsK
PiArCj4gKyAgICAgICByZXR1cm4gMDsKPiArfQo+ICsKPiAgc3RhdGljIGludCBrb21lZGFfa21z
X2NoZWNrKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSkKPiAgewo+IEBAIC0xMTEsNyArMTk1
LDcgQEAgc3RhdGljIGludCBrb21lZGFfa21zX2NoZWNrKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYs
Cj4gICAgICAgICBpZiAoZXJyKQo+ICAgICAgICAgICAgICAgICByZXR1cm4gZXJyOwo+Cj4gLSAg
ICAgICAvKiBrb21lZGEgbmVlZCB0byByZS1jYWxjdWxhdGUgcmVzb3VyY2UgYXNzdW1wdGlvbiBp
biBldmVyeSBjb21taXQKPiArICAgICAgIC8qIEtvbWVkYSBuZWVkIHRvIHJlLWNhbGN1bGF0ZSBy
ZXNvdXJjZSBhc3N1bXB0aW9uIGluIGV2ZXJ5IGNvbW1pdAo+ICAgICAgICAgICogc28gbmVlZCB0
byBhZGQgYWxsIGFmZmVjdGVkX3BsYW5lcyAoZXZlbiB1bmNoYW5nZWQpIHRvCj4gICAgICAgICAg
KiBkcm1fYXRvbWljX3N0YXRlLgo+ICAgICAgICAgICovCj4gQEAgLTExOSw2ICsyMDMsMTAgQEAg
c3RhdGljIGludCBrb21lZGFfa21zX2NoZWNrKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gICAg
ICAgICAgICAgICAgIGVyciA9IGRybV9hdG9taWNfYWRkX2FmZmVjdGVkX3BsYW5lcyhzdGF0ZSwg
Y3J0Yyk7Cj4gICAgICAgICAgICAgICAgIGlmIChlcnIpCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgcmV0dXJuIGVycjsKPiArCj4gKyAgICAgICAgICAgICAgIGVyciA9IGtvbWVkYV9jcnRjX25v
cm1hbGl6ZV96cG9zKGNydGMsIG5ld19jcnRjX3N0KTsKPiArICAgICAgICAgICAgICAgaWYgKGVy
cikKPiArICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyOwo+ICAgICAgICAgfQo+Cj4g
ICAgICAgICBlcnIgPSBkcm1fYXRvbWljX2hlbHBlcl9jaGVja19wbGFuZXMoZGV2LCBzdGF0ZSk7
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRh
X2ttcy5oIGIvZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfa21zLmgK
PiBpbmRleCAxNzhiZWU2Li5kMWNlZjQ2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
cm0vZGlzcGxheS9rb21lZGEva29tZWRhX2ttcy5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2Fy
bS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfa21zLmgKPiBAQCAtNyw2ICs3LDcgQEAKPiAgI2lmbmRl
ZiBfS09NRURBX0tNU19IXwo+ICAjZGVmaW5lIF9LT01FREFfS01TX0hfCj4KPiArI2luY2x1ZGUg
PGxpbnV4L2xpc3QuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fYXRvbWljLmg+Cj4gICNpbmNsdWRl
IDxkcm0vZHJtX2F0b21pY19oZWxwZXIuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fY3J0Y19oZWxw
ZXIuaD4KPiBAQCAtNDYsNiArNDcsOCBAQCBzdHJ1Y3Qga29tZWRhX3BsYW5lIHsKPiAgc3RydWN0
IGtvbWVkYV9wbGFuZV9zdGF0ZSB7Cj4gICAgICAgICAvKiogQGJhc2U6ICZkcm1fcGxhbmVfc3Rh
dGUgKi8KPiAgICAgICAgIHN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgYmFzZTsKPiArICAgICAgIC8q
KiBAemxpc3Rfbm9kZTogem9yZGVyIGxpc3Qgbm9kZSAqLwo+ICsgICAgICAgc3RydWN0IGxpc3Rf
aGVhZCB6bGlzdF9ub2RlOwo+Cj4gICAgICAgICAvKiBAaW1nX2VuaGFuY2VtZW50OiBvbi9vZmYg
aW1hZ2UgZW5oYW5jZW1lbnQgKi8KPiAgICAgICAgIHU4IGltZ19lbmhhbmNlbWVudCA6IDE7Cj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX3Bs
YW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0vYXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV9wbGFuZS5j
Cj4gaW5kZXggYmNmMzBhNy4uYWFkNzY2MyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV9wbGFuZS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfcGxhbmUuYwo+IEBAIC0yMSw3ICsyMSw3IEBACj4K
PiAgICAgICAgIG1lbXNldChkZmxvdywgMCwgc2l6ZW9mKCpkZmxvdykpOwo+Cj4gLSAgICAgICBk
Zmxvdy0+YmxlbmRpbmdfem9yZGVyID0gc3QtPnpwb3M7Cj4gKyAgICAgICBkZmxvdy0+YmxlbmRp
bmdfem9yZGVyID0gc3QtPm5vcm1hbGl6ZWRfenBvczsKPgo+ICAgICAgICAgLyogaWYgZm9ybWF0
IGRvZXNuJ3QgaGF2ZSBhbHBoYSwgZml4IGJsZW5kIG1vZGUgdG8gUElYRUxfTk9ORSAqLwo+ICAg
ICAgICAgZGZsb3ctPnBpeGVsX2JsZW5kX21vZGUgPSBmYi0+Zm9ybWF0LT5oYXNfYWxwaGEgPwo+
IEBAIC0zNDMsNiArMzQzLDEwIEBAIHN0YXRpYyBpbnQga29tZWRhX3BsYW5lX2FkZChzdHJ1Y3Qg
a29tZWRhX2ttc19kZXYgKmttcywKPiAgICAgICAgIGlmIChlcnIpCj4gICAgICAgICAgICAgICAg
IGdvdG8gY2xlYW51cDsKPgo+ICsgICAgICAgZXJyID0gZHJtX3BsYW5lX2NyZWF0ZV96cG9zX3By
b3BlcnR5KHBsYW5lLCBsYXllci0+YmFzZS5pZCwgMCwgOCk7Cj4gKyAgICAgICBpZiAoZXJyKQo+
ICsgICAgICAgICAgICAgICBnb3RvIGNsZWFudXA7Cj4gKwo+ICAgICAgICAgcmV0dXJuIDA7Cj4g
IGNsZWFudXA6Cj4gICAgICAgICBrb21lZGFfcGxhbmVfZGVzdHJveShwbGFuZSk7Cj4gLS0KPiAx
LjkuMQo+Cj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
PiBkcmktZGV2ZWwgbWFpbGluZyBsaXN0Cj4gZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9y
Zwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVsCgoKCi0tIApEYW5pZWwgVmV0dGVyClNvZnR3YXJlIEVuZ2luZWVyLCBJbnRlbCBDb3Jwb3Jh
dGlvbgorNDEgKDApIDc5IDM2NSA1NyA0OCAtIGh0dHA6Ly9ibG9nLmZmd2xsLmNoCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
