Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0B87C2450FE
	for <lists+dri-devel@lfdr.de>; Sat, 15 Aug 2020 14:54:39 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D76DC6E384;
	Sat, 15 Aug 2020 12:54:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lf1-x143.google.com (mail-lf1-x143.google.com
 [IPv6:2a00:1450:4864:20::143])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 484B96E372
 for <dri-devel@lists.freedesktop.org>; Sat, 15 Aug 2020 12:54:24 +0000 (UTC)
Received: by mail-lf1-x143.google.com with SMTP id k13so6158225lfo.0
 for <dri-devel@lists.freedesktop.org>; Sat, 15 Aug 2020 05:54:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=sender:from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=+ewEl8cXVo2R+lzzdN/PE7TqtGC2QsVvxfylTaQLGJs=;
 b=kqPB9ScZoXmxAQUxbVV1e/LeM6BegprxNyFx9a9sUqBlg6t7bl1lWfC7acXAYfrWGS
 xxYiCnyOxBc9CQWG87f4Y5uR94Dq+Pgt2KKnPBno1gSTzQiTPknCY3NcpqVfqPnWxrRO
 pyskITspIPi58Rb8lP+m+oFWEIbSRPWMGK3nmwMg3GQ1cZRO8/r0kNSOZI8Ii/ble535
 nXm58m2QFJIkjfM8sZYQKI87l3rn9iJ4mTwvt+wZegAIGsoOkSQBkcBUM0DI2BMcmDYm
 gwFXEh9eJRLDxlLSyrVxHXIUtt0FKLeyUyvZzLF6sB5juNufgxxGmEMf7tOaFmJWOZdU
 kRIA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:from:to:cc:subject:date:message-id
 :in-reply-to:references:mime-version:content-transfer-encoding;
 bh=+ewEl8cXVo2R+lzzdN/PE7TqtGC2QsVvxfylTaQLGJs=;
 b=JyFey6Q5DLHki2ll/oU93xb72AnLK2U6zCbCOr8SlkzNh5Yl/WSJp+tdAp5wo1Co9G
 NT8H5J1WmrHE4uW+n+Va0u1/UZ/frpdqdn84+Qfxq6iFue6YhcK3Kd64Vb8HUp8ZWbqZ
 PwLY4d3Mfh5PRmjzsrmmkNX2INveuRmSuO6q5OG6jOzD6e2MfYYc9CphcNonP0wRg10T
 NQo5xVKYWUhv4qsUvIlT5xsDAJA8yM+Qklrynqox+TNsHhwaYM2Z05U82pNA3d6LbHLm
 vNfDdjOXfWkyxIDXvHnFrMRlPXEBdGMcbzBeXvOempWTmviLe7lSNpwWR2/hkKu+IaXC
 noRg==
X-Gm-Message-State: AOAM533i9iAR6G203Mz8zJVAu8nItdvj7gxNh0lQLZ4AcS4+DIQxlm9V
 jq1kddL+LeMzCW8iCmsa+QXhH8n/rdAtCA==
X-Google-Smtp-Source: ABdhPJz1dF73bWzqmibv8pHoZIJnh81ivfpZdN0XDl1It2LlckNQhQo+CR3+7E01yBs3yV/WSaQtlQ==
X-Received: by 2002:a19:f80e:: with SMTP id a14mr3353999lff.49.1597496062426; 
 Sat, 15 Aug 2020 05:54:22 -0700 (PDT)
Received: from saturn.lan ([2a00:fd00:805f:db00:402:93d8:3e64:6121])
 by smtp.gmail.com with ESMTPSA id e29sm2396322ljp.136.2020.08.15.05.54.21
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Sat, 15 Aug 2020 05:54:21 -0700 (PDT)
From: Sam Ravnborg <sam@ravnborg.org>
To: dri-devel@lists.freedesktop.org, Thierry Reding <thierry.reding@gmail.com>
Subject: [PATCH v1 2/5] drm/panel: leadtek: Use dev_ based logging
Date: Sat, 15 Aug 2020 14:54:03 +0200
Message-Id: <20200815125406.1153224-3-sam@ravnborg.org>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20200815125406.1153224-1-sam@ravnborg.org>
References: <20200815125406.1153224-1-sam@ravnborg.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 David Airlie <airlied@linux.ie>,
 =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>,
 Jerry Han <hanxu5@huaqin.corp-partner.google.com>,
 Jani Nikula <jani.nikula@intel.com>, Jagan Teki <jagan@amarulasolutions.com>,
 Robert Chiras <robert.chiras@nxp.com>, Sam Ravnborg <sam@ravnborg.org>,
 Icenowy Zheng <icenowy@aosc.io>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U3RhbmRhcmRpemUgb24gdGhlIGRldl8gYmFzZWQgbG9nZ2luZyBhbmQgZHJvcCB0aGUgaW5jbHVk
ZSBvZiBkcm1fcHJpbnQuaC4KRml4IGEgZmV3IGNhc2VzIHdoZXJlICJ4QCIgd2FzIHVzZWQgd2hl
biBwcmludGluZyB0aGUgbW9kZS4KClNpZ25lZC1vZmYtYnk6IFNhbSBSYXZuYm9yZyA8c2FtQHJh
dm5ib3JnLm9yZz4KQ2M6IFRoaWVycnkgUmVkaW5nIDx0aGllcnJ5LnJlZGluZ0BnbWFpbC5jb20+
CkNjOiBTYW0gUmF2bmJvcmcgPHNhbUByYXZuYm9yZy5vcmc+CkNjOiBHdWlkbyBHw7xudGhlciA8
YWd4QHNpZ3hjcHUub3JnPgpDYzogTGludXMgV2FsbGVpaiA8bGludXMud2FsbGVpakBsaW5hcm8u
b3JnPgpDYzogTGF1cmVudCBQaW5jaGFydCA8bGF1cmVudC5waW5jaGFydEBpZGVhc29uYm9hcmQu
Y29tPgotLS0KIC4uLi9kcm0vcGFuZWwvcGFuZWwtbGVhZHRlay1sdGswNTBoMzE0NncuYyAgICB8
IDU4ICsrKysrKystLS0tLS0tLS0tLS0KIC4uLi9kcm0vcGFuZWwvcGFuZWwtbGVhZHRlay1sdGs1
MDBoZDE4MjkuYyAgICB8IDQ5ICsrKysrKy0tLS0tLS0tLS0KIDIgZmlsZXMgY2hhbmdlZCwgMzcg
aW5zZXJ0aW9ucygrKSwgNzAgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3BhbmVsL3BhbmVsLWxlYWR0ZWstbHRrMDUwaDMxNDZ3LmMgYi9kcml2ZXJzL2dwdS9kcm0v
cGFuZWwvcGFuZWwtbGVhZHRlay1sdGswNTBoMzE0NncuYwppbmRleCBlYWE5ZGEzZWJiZWEuLmVk
MGQ1Zjk1OTAzNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWxlYWR0
ZWstbHRrMDUwaDMxNDZ3LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWxlYWR0
ZWstbHRrMDUwaDMxNDZ3LmMKQEAgLTE3LDcgKzE3LDYgQEAKICNpbmNsdWRlIDxkcm0vZHJtX21p
cGlfZHNpLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9tb2Rlcy5oPgogI2luY2x1ZGUgPGRybS9kcm1f
cGFuZWwuaD4KLSNpbmNsdWRlIDxkcm0vZHJtX3ByaW50Lmg+CiAKIHN0cnVjdCBsdGswNTBoMzE0
NndfY21kIHsKIAljaGFyIGNtZDsKQEAgLTMxNCw4ICszMTMsNyBAQCBzdGF0aWMgaW50IGx0azA1
MGgzMTQ2d19pbml0X3NlcXVlbmNlKHN0cnVjdCBsdGswNTBoMzE0NncgKmN0eCkKIAogCXJldCA9
IG1pcGlfZHNpX2Rjc19zZXRfdGVhcl9vbihkc2ksIDEpOwogCWlmIChyZXQgPCAwKSB7Ci0JCURS
TV9ERVZfRVJST1IoY3R4LT5kZXYsICJmYWlsZWQgdG8gc2V0IHRlYXIgb246ICVkXG4iLAotCQkJ
ICAgICAgcmV0KTsKKwkJZGV2X2VycihjdHgtPmRldiwgImZhaWxlZCB0byBzZXQgdGVhciBvbjog
JWRcbiIsIHJldCk7CiAJCXJldHVybiByZXQ7CiAJfQogCkBAIC0zNjAsOCArMzU4LDcgQEAgc3Rh
dGljIGludCBsdGswNTBoMzE0NndfYTJfd3JpdGVfcGFnZShzdHJ1Y3QgbHRrMDUwaDMxNDZ3ICpj
dHgsIGludCBwYWdlLAogCiAJcmV0ID0gbHRrMDUwaDMxNDZ3X2EyX3NlbGVjdF9wYWdlKGN0eCwg
cGFnZSk7CiAJaWYgKHJldCA8IDApIHsKLQkJRFJNX0RFVl9FUlJPUihjdHgtPmRldiwgImZhaWxl
ZCB0byBzZWxlY3QgcGFnZSAlZDogJWRcbiIsCi0JCQkgICAgICBwYWdlLCByZXQpOworCQlkZXZf
ZXJyKGN0eC0+ZGV2LCAiZmFpbGVkIHRvIHNlbGVjdCBwYWdlICVkOiAlZFxuIiwgcGFnZSwgcmV0
KTsKIAkJcmV0dXJuIHJldDsKIAl9CiAKQEAgLTM2OSw5ICszNjYsNyBAQCBzdGF0aWMgaW50IGx0
azA1MGgzMTQ2d19hMl93cml0ZV9wYWdlKHN0cnVjdCBsdGswNTBoMzE0NncgKmN0eCwgaW50IHBh
Z2UsCiAJCXJldCA9IG1pcGlfZHNpX2dlbmVyaWNfd3JpdGUoZHNpLCAmY21kc1tpXSwKIAkJCQkJ
ICAgICBzaXplb2Yoc3RydWN0IGx0azA1MGgzMTQ2d19jbWQpKTsKIAkJaWYgKHJldCA8IDApIHsK
LQkJCURSTV9ERVZfRVJST1IoY3R4LT5kZXYsCi0JCQkJICAgICAgImZhaWxlZCB0byB3cml0ZSBw
YWdlICVkIGluaXQgY21kczogJWRcbiIsCi0JCQkJICAgICAgIHBhZ2UsIHJldCk7CisJCQlkZXZf
ZXJyKGN0eC0+ZGV2LCAiZmFpbGVkIHRvIHdyaXRlIHBhZ2UgJWQgaW5pdCBjbWRzOiAlZFxuIiwg
cGFnZSwgcmV0KTsKIAkJCXJldHVybiByZXQ7CiAJCX0KIAl9CkBAIC00MDUsMTUgKzQwMCwxNCBA
QCBzdGF0aWMgaW50IGx0azA1MGgzMTQ2d19hMl9pbml0X3NlcXVlbmNlKHN0cnVjdCBsdGswNTBo
MzE0NncgKmN0eCkKIAogCXJldCA9IGx0azA1MGgzMTQ2d19hMl9zZWxlY3RfcGFnZShjdHgsIDAp
OwogCWlmIChyZXQgPCAwKSB7Ci0JCURSTV9ERVZfRVJST1IoY3R4LT5kZXYsICJmYWlsZWQgdG8g
c2VsZWN0IHBhZ2UgMDogJWRcbiIsIHJldCk7CisJCWRldl9lcnIoY3R4LT5kZXYsICJmYWlsZWQg
dG8gc2VsZWN0IHBhZ2UgMDogJWRcbiIsIHJldCk7CiAJCXJldHVybiByZXQ7CiAJfQogCiAJLyog
dmVuZG9yIGNvZGUgY2FsbGVkIHRoaXMgd2l0aG91dCBwYXJhbSwgd2hlcmUgdGhlcmUgc2hvdWxk
IGJlIG9uZSAqLwogCXJldCA9IG1pcGlfZHNpX2Rjc19zZXRfdGVhcl9vbihkc2ksIDApOwogCWlm
IChyZXQgPCAwKSB7Ci0JCURSTV9ERVZfRVJST1IoY3R4LT5kZXYsICJmYWlsZWQgdG8gc2V0IHRl
YXIgb246ICVkXG4iLAotCQkJICAgICAgcmV0KTsKKwkJZGV2X2VycihjdHgtPmRldiwgImZhaWxl
ZCB0byBzZXQgdGVhciBvbjogJWRcbiIsIHJldCk7CiAJCXJldHVybiByZXQ7CiAJfQogCkBAIC00
NTIsMTUgKzQ0NiwxMyBAQCBzdGF0aWMgaW50IGx0azA1MGgzMTQ2d191bnByZXBhcmUoc3RydWN0
IGRybV9wYW5lbCAqcGFuZWwpCiAKIAlyZXQgPSBtaXBpX2RzaV9kY3Nfc2V0X2Rpc3BsYXlfb2Zm
KGRzaSk7CiAJaWYgKHJldCA8IDApIHsKLQkJRFJNX0RFVl9FUlJPUihjdHgtPmRldiwgImZhaWxl
ZCB0byBzZXQgZGlzcGxheSBvZmY6ICVkXG4iLAotCQkJICAgICAgcmV0KTsKKwkJZGV2X2Vycihj
dHgtPmRldiwgImZhaWxlZCB0byBzZXQgZGlzcGxheSBvZmY6ICVkXG4iLCByZXQpOwogCQlyZXR1
cm4gcmV0OwogCX0KIAogCW1pcGlfZHNpX2Rjc19lbnRlcl9zbGVlcF9tb2RlKGRzaSk7CiAJaWYg
KHJldCA8IDApIHsKLQkJRFJNX0RFVl9FUlJPUihjdHgtPmRldiwgImZhaWxlZCB0byBlbnRlciBz
bGVlcCBtb2RlOiAlZFxuIiwKLQkJCSAgICAgIHJldCk7CisJCWRldl9lcnIoY3R4LT5kZXYsICJm
YWlsZWQgdG8gZW50ZXIgc2xlZXAgbW9kZTogJWRcbiIsIHJldCk7CiAJCXJldHVybiByZXQ7CiAJ
fQogCkBAIC00ODEsMTcgKzQ3MywxNSBAQCBzdGF0aWMgaW50IGx0azA1MGgzMTQ2d19wcmVwYXJl
KHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQogCWlmIChjdHgtPnByZXBhcmVkKQogCQlyZXR1cm4g
MDsKIAotCURSTV9ERVZfREVCVUdfRFJJVkVSKGN0eC0+ZGV2LCAiUmVzZXR0aW5nIHRoZSBwYW5l
bFxuIik7CisJZGV2X2RiZyhjdHgtPmRldiwgIlJlc2V0dGluZyB0aGUgcGFuZWxcbiIpOwogCXJl
dCA9IHJlZ3VsYXRvcl9lbmFibGUoY3R4LT52Y2kpOwogCWlmIChyZXQgPCAwKSB7Ci0JCURSTV9E
RVZfRVJST1IoY3R4LT5kZXYsCi0JCQkgICAgICAiRmFpbGVkIHRvIGVuYWJsZSB2Y2kgc3VwcGx5
OiAlZFxuIiwgcmV0KTsKKwkJZGV2X2VycihjdHgtPmRldiwgIkZhaWxlZCB0byBlbmFibGUgdmNp
IHN1cHBseTogJWRcbiIsIHJldCk7CiAJCXJldHVybiByZXQ7CiAJfQogCXJldCA9IHJlZ3VsYXRv
cl9lbmFibGUoY3R4LT5pb3ZjYyk7CiAJaWYgKHJldCA8IDApIHsKLQkJRFJNX0RFVl9FUlJPUihj
dHgtPmRldiwKLQkJCSAgICAgICJGYWlsZWQgdG8gZW5hYmxlIGlvdmNjIHN1cHBseTogJWRcbiIs
IHJldCk7CisJCWRldl9lcnIoY3R4LT5kZXYsICJGYWlsZWQgdG8gZW5hYmxlIGlvdmNjIHN1cHBs
eTogJWRcbiIsIHJldCk7CiAJCWdvdG8gZGlzYWJsZV92Y2k7CiAJfQogCkBAIC01MDIsMTQgKzQ5
MiwxMyBAQCBzdGF0aWMgaW50IGx0azA1MGgzMTQ2d19wcmVwYXJlKHN0cnVjdCBkcm1fcGFuZWwg
KnBhbmVsKQogCiAJcmV0ID0gY3R4LT5wYW5lbF9kZXNjLT5pbml0KGN0eCk7CiAJaWYgKHJldCA8
IDApIHsKLQkJRFJNX0RFVl9FUlJPUihjdHgtPmRldiwgIlBhbmVsIGluaXQgc2VxdWVuY2UgZmFp
bGVkOiAlZFxuIiwKLQkJCSAgICAgIHJldCk7CisJCWRldl9lcnIoY3R4LT5kZXYsICJQYW5lbCBp
bml0IHNlcXVlbmNlIGZhaWxlZDogJWRcbiIsIHJldCk7CiAJCWdvdG8gZGlzYWJsZV9pb3ZjYzsK
IAl9CiAKIAlyZXQgPSBtaXBpX2RzaV9kY3NfZXhpdF9zbGVlcF9tb2RlKGRzaSk7CiAJaWYgKHJl
dCA8IDApIHsKLQkJRFJNX0RFVl9FUlJPUihjdHgtPmRldiwgIkZhaWxlZCB0byBleGl0IHNsZWVw
IG1vZGU6ICVkXG4iLCByZXQpOworCQlkZXZfZXJyKGN0eC0+ZGV2LCAiRmFpbGVkIHRvIGV4aXQg
c2xlZXAgbW9kZTogJWRcbiIsIHJldCk7CiAJCWdvdG8gZGlzYWJsZV9pb3ZjYzsKIAl9CiAKQEAg
LTUxOCw3ICs1MDcsNyBAQCBzdGF0aWMgaW50IGx0azA1MGgzMTQ2d19wcmVwYXJlKHN0cnVjdCBk
cm1fcGFuZWwgKnBhbmVsKQogCiAJcmV0ID0gbWlwaV9kc2lfZGNzX3NldF9kaXNwbGF5X29uKGRz
aSk7CiAJaWYgKHJldCA8IDApIHsKLQkJRFJNX0RFVl9FUlJPUihjdHgtPmRldiwgIkZhaWxlZCB0
byBzZXQgZGlzcGxheSBvbjogJWRcbiIsIHJldCk7CisJCWRldl9lcnIoY3R4LT5kZXYsICJGYWls
ZWQgdG8gc2V0IGRpc3BsYXkgb246ICVkXG4iLCByZXQpOwogCQlnb3RvIGRpc2FibGVfaW92Y2M7
CiAJfQogCkBAIC01NzcsNyArNTY2LDcgQEAgc3RhdGljIGludCBsdGswNTBoMzE0NndfcHJvYmUo
c3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpKQogCiAJY3R4LT5yZXNldF9ncGlvID0gZGV2bV9n
cGlvZF9nZXRfb3B0aW9uYWwoZGV2LCAicmVzZXQiLCBHUElPRF9PVVRfTE9XKTsKIAlpZiAoSVNf
RVJSKGN0eC0+cmVzZXRfZ3BpbykpIHsKLQkJRFJNX0RFVl9FUlJPUihkZXYsICJjYW5ub3QgZ2V0
IHJlc2V0IGdwaW9cbiIpOworCQlkZXZfZXJyKGRldiwgImNhbm5vdCBnZXQgcmVzZXQgZ3Bpb1xu
Iik7CiAJCXJldHVybiBQVFJfRVJSKGN0eC0+cmVzZXRfZ3Bpbyk7CiAJfQogCkBAIC01ODUsOSAr
NTc0LDcgQEAgc3RhdGljIGludCBsdGswNTBoMzE0NndfcHJvYmUoc3RydWN0IG1pcGlfZHNpX2Rl
dmljZSAqZHNpKQogCWlmIChJU19FUlIoY3R4LT52Y2kpKSB7CiAJCXJldCA9IFBUUl9FUlIoY3R4
LT52Y2kpOwogCQlpZiAocmV0ICE9IC1FUFJPQkVfREVGRVIpCi0JCQlEUk1fREVWX0VSUk9SKGRl
diwKLQkJCQkgICAgICAiRmFpbGVkIHRvIHJlcXVlc3QgdmNpIHJlZ3VsYXRvcjogJWRcbiIsCi0J
CQkJICAgICAgcmV0KTsKKwkJCWRldl9lcnIoZGV2LCAiRmFpbGVkIHRvIHJlcXVlc3QgdmNpIHJl
Z3VsYXRvcjogJWRcbiIsIHJldCk7CiAJCXJldHVybiByZXQ7CiAJfQogCkBAIC01OTUsOSArNTgy
LDcgQEAgc3RhdGljIGludCBsdGswNTBoMzE0NndfcHJvYmUoc3RydWN0IG1pcGlfZHNpX2Rldmlj
ZSAqZHNpKQogCWlmIChJU19FUlIoY3R4LT5pb3ZjYykpIHsKIAkJcmV0ID0gUFRSX0VSUihjdHgt
PmlvdmNjKTsKIAkJaWYgKHJldCAhPSAtRVBST0JFX0RFRkVSKQotCQkJRFJNX0RFVl9FUlJPUihk
ZXYsCi0JCQkJICAgICAgIkZhaWxlZCB0byByZXF1ZXN0IGlvdmNjIHJlZ3VsYXRvcjogJWRcbiIs
Ci0JCQkJICAgICAgcmV0KTsKKwkJCWRldl9lcnIoZGV2LCAiRmFpbGVkIHRvIHJlcXVlc3QgaW92
Y2MgcmVndWxhdG9yOiAlZFxuIiwgcmV0KTsKIAkJcmV0dXJuIHJldDsKIAl9CiAKQEAgLTYyMSw3
ICs2MDYsNyBAQCBzdGF0aWMgaW50IGx0azA1MGgzMTQ2d19wcm9iZShzdHJ1Y3QgbWlwaV9kc2lf
ZGV2aWNlICpkc2kpCiAKIAlyZXQgPSBtaXBpX2RzaV9hdHRhY2goZHNpKTsKIAlpZiAocmV0IDwg
MCkgewotCQlEUk1fREVWX0VSUk9SKGRldiwgIm1pcGlfZHNpX2F0dGFjaCBmYWlsZWQ6ICVkXG4i
LCByZXQpOworCQlkZXZfZXJyKGRldiwgIm1pcGlfZHNpX2F0dGFjaCBmYWlsZWQ6ICVkXG4iLCBy
ZXQpOwogCQlkcm1fcGFuZWxfcmVtb3ZlKCZjdHgtPnBhbmVsKTsKIAkJcmV0dXJuIHJldDsKIAl9
CkBAIC02MzYsMTMgKzYyMSwxMSBAQCBzdGF0aWMgdm9pZCBsdGswNTBoMzE0Nndfc2h1dGRvd24o
c3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpKQogCiAJcmV0ID0gZHJtX3BhbmVsX3VucHJlcGFy
ZSgmY3R4LT5wYW5lbCk7CiAJaWYgKHJldCA8IDApCi0JCURSTV9ERVZfRVJST1IoJmRzaS0+ZGV2
LCAiRmFpbGVkIHRvIHVucHJlcGFyZSBwYW5lbDogJWRcbiIsCi0JCQkgICAgICByZXQpOworCQlk
ZXZfZXJyKCZkc2ktPmRldiwgIkZhaWxlZCB0byB1bnByZXBhcmUgcGFuZWw6ICVkXG4iLCByZXQp
OwogCiAJcmV0ID0gZHJtX3BhbmVsX2Rpc2FibGUoJmN0eC0+cGFuZWwpOwogCWlmIChyZXQgPCAw
KQotCQlEUk1fREVWX0VSUk9SKCZkc2ktPmRldiwgIkZhaWxlZCB0byBkaXNhYmxlIHBhbmVsOiAl
ZFxuIiwKLQkJCSAgICAgIHJldCk7CisJCWRldl9lcnIoJmRzaS0+ZGV2LCAiRmFpbGVkIHRvIGRp
c2FibGUgcGFuZWw6ICVkXG4iLCByZXQpOwogfQogCiBzdGF0aWMgaW50IGx0azA1MGgzMTQ2d19y
ZW1vdmUoc3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpKQpAQCAtNjU0LDggKzYzNyw3IEBAIHN0
YXRpYyBpbnQgbHRrMDUwaDMxNDZ3X3JlbW92ZShzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kp
CiAKIAlyZXQgPSBtaXBpX2RzaV9kZXRhY2goZHNpKTsKIAlpZiAocmV0IDwgMCkKLQkJRFJNX0RF
Vl9FUlJPUigmZHNpLT5kZXYsICJGYWlsZWQgdG8gZGV0YWNoIGZyb20gRFNJIGhvc3Q6ICVkXG4i
LAotCQkJICAgICAgcmV0KTsKKwkJZGV2X2VycigmZHNpLT5kZXYsICJGYWlsZWQgdG8gZGV0YWNo
IGZyb20gRFNJIGhvc3Q6ICVkXG4iLCByZXQpOwogCiAJZHJtX3BhbmVsX3JlbW92ZSgmY3R4LT5w
YW5lbCk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1sZWFkdGVr
LWx0azUwMGhkMTgyOS5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWxlYWR0ZWstbHRr
NTAwaGQxODI5LmMKaW5kZXggMGY2YTI0OGM0N2E1Li4zYzAwZTRmOGY4MDMgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1sZWFkdGVrLWx0azUwMGhkMTgyOS5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1sZWFkdGVrLWx0azUwMGhkMTgyOS5jCkBAIC0y
MCw3ICsyMCw2IEBACiAjaW5jbHVkZSA8ZHJtL2RybV9taXBpX2RzaS5oPgogI2luY2x1ZGUgPGRy
bS9kcm1fbW9kZXMuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3BhbmVsLmg+Ci0jaW5jbHVkZSA8ZHJt
L2RybV9wcmludC5oPgogCiBzdHJ1Y3QgbHRrNTAwaGQxODI5IHsKIAlzdHJ1Y3QgZGV2aWNlICpk
ZXY7CkBAIC0yNzgsMTMgKzI3NywxMSBAQCBzdGF0aWMgaW50IGx0azUwMGhkMTgyOV91bnByZXBh
cmUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCiAKIAlyZXQgPSBtaXBpX2RzaV9kY3Nfc2V0X2Rp
c3BsYXlfb2ZmKGRzaSk7CiAJaWYgKHJldCA8IDApCi0JCURSTV9ERVZfRVJST1IocGFuZWwtPmRl
diwgImZhaWxlZCB0byBzZXQgZGlzcGxheSBvZmY6ICVkXG4iLAotCQkJICAgICAgcmV0KTsKKwkJ
ZGV2X2VycihwYW5lbC0+ZGV2LCAiZmFpbGVkIHRvIHNldCBkaXNwbGF5IG9mZjogJWRcbiIsIHJl
dCk7CiAKIAlyZXQgPSBtaXBpX2RzaV9kY3NfZW50ZXJfc2xlZXBfbW9kZShkc2kpOwogCWlmIChy
ZXQgPCAwKSB7Ci0JCURSTV9ERVZfRVJST1IocGFuZWwtPmRldiwgImZhaWxlZCB0byBlbnRlciBz
bGVlcCBtb2RlOiAlZFxuIiwKLQkJCSAgICAgIHJldCk7CisJCWRldl9lcnIocGFuZWwtPmRldiwg
ImZhaWxlZCB0byBlbnRlciBzbGVlcCBtb2RlOiAlZFxuIiwgcmV0KTsKIAl9CiAKIAkvKiAxMjBt
cyB0byBlbnRlciBzbGVlcCBtb2RlICovCkBAIC0zMTAsMTQgKzMwNywxMiBAQCBzdGF0aWMgaW50
IGx0azUwMGhkMTgyOV9wcmVwYXJlKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQogCiAJcmV0ID0g
cmVndWxhdG9yX2VuYWJsZShjdHgtPnZjYyk7CiAJaWYgKHJldCA8IDApIHsKLQkJRFJNX0RFVl9F
UlJPUihjdHgtPmRldiwKLQkJCSAgICAgICJGYWlsZWQgdG8gZW5hYmxlIHZjaSBzdXBwbHk6ICVk
XG4iLCByZXQpOworCQlkZXZfZXJyKGN0eC0+ZGV2LCAiRmFpbGVkIHRvIGVuYWJsZSB2Y2kgc3Vw
cGx5OiAlZFxuIiwgcmV0KTsKIAkJcmV0dXJuIHJldDsKIAl9CiAJcmV0ID0gcmVndWxhdG9yX2Vu
YWJsZShjdHgtPmlvdmNjKTsKIAlpZiAocmV0IDwgMCkgewotCQlEUk1fREVWX0VSUk9SKGN0eC0+
ZGV2LAotCQkJICAgICAgIkZhaWxlZCB0byBlbmFibGUgaW92Y2Mgc3VwcGx5OiAlZFxuIiwgcmV0
KTsKKwkJZGV2X2VycihjdHgtPmRldiwgIkZhaWxlZCB0byBlbmFibGUgaW92Y2Mgc3VwcGx5OiAl
ZFxuIiwgcmV0KTsKIAkJZ290byBkaXNhYmxlX3ZjYzsKIAl9CiAKQEAgLTMzMywxNiArMzI4LDE0
IEBAIHN0YXRpYyBpbnQgbHRrNTAwaGQxODI5X3ByZXBhcmUoc3RydWN0IGRybV9wYW5lbCAqcGFu
ZWwpCiAJCXJldCA9IG1pcGlfZHNpX2dlbmVyaWNfd3JpdGUoZHNpLCAmaW5pdF9jb2RlW2ldLAog
CQkJCQkgICAgIHNpemVvZihzdHJ1Y3QgbHRrNTAwaGQxODI5X2NtZCkpOwogCQlpZiAocmV0IDwg
MCkgewotCQkJRFJNX0RFVl9FUlJPUihwYW5lbC0+ZGV2LAotCQkJCSAgICAgICJmYWlsZWQgdG8g
d3JpdGUgaW5pdCBjbWRzOiAlZFxuIiwgcmV0KTsKKwkJCWRldl9lcnIocGFuZWwtPmRldiwgImZh
aWxlZCB0byB3cml0ZSBpbml0IGNtZHM6ICVkXG4iLCByZXQpOwogCQkJZ290byBkaXNhYmxlX2lv
dmNjOwogCQl9CiAJfQogCiAJcmV0ID0gbWlwaV9kc2lfZGNzX2V4aXRfc2xlZXBfbW9kZShkc2kp
OwogCWlmIChyZXQgPCAwKSB7Ci0JCURSTV9ERVZfRVJST1IocGFuZWwtPmRldiwgImZhaWxlZCB0
byBleGl0IHNsZWVwIG1vZGU6ICVkXG4iLAotCQkJICAgICAgcmV0KTsKKwkJZGV2X2VycihwYW5l
bC0+ZGV2LCAiZmFpbGVkIHRvIGV4aXQgc2xlZXAgbW9kZTogJWRcbiIsIHJldCk7CiAJCWdvdG8g
ZGlzYWJsZV9pb3ZjYzsKIAl9CiAKQEAgLTM1MSw4ICszNDQsNyBAQCBzdGF0aWMgaW50IGx0azUw
MGhkMTgyOV9wcmVwYXJlKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQogCiAJcmV0ID0gbWlwaV9k
c2lfZGNzX3NldF9kaXNwbGF5X29uKGRzaSk7CiAJaWYgKHJldCA8IDApIHsKLQkJRFJNX0RFVl9F
UlJPUihwYW5lbC0+ZGV2LCAiZmFpbGVkIHRvIHNldCBkaXNwbGF5IG9uOiAlZFxuIiwKLQkJCSAg
ICAgIHJldCk7CisJCWRldl9lcnIocGFuZWwtPmRldiwgImZhaWxlZCB0byBzZXQgZGlzcGxheSBv
bjogJWRcbiIsIHJldCk7CiAJCWdvdG8gZGlzYWJsZV9pb3ZjYzsKIAl9CiAKQEAgLTM4OSw5ICsz
ODEsOSBAQCBzdGF0aWMgaW50IGx0azUwMGhkMTgyOV9nZXRfbW9kZXMoc3RydWN0IGRybV9wYW5l
bCAqcGFuZWwsCiAKIAltb2RlID0gZHJtX21vZGVfZHVwbGljYXRlKGNvbm5lY3Rvci0+ZGV2LCAm
ZGVmYXVsdF9tb2RlKTsKIAlpZiAoIW1vZGUpIHsKLQkJRFJNX0RFVl9FUlJPUihjdHgtPmRldiwg
ImZhaWxlZCB0byBhZGQgbW9kZSAldXgldXhAJXVcbiIsCi0JCQkgICAgICBkZWZhdWx0X21vZGUu
aGRpc3BsYXksIGRlZmF1bHRfbW9kZS52ZGlzcGxheSwKLQkJCSAgICAgIGRybV9tb2RlX3ZyZWZy
ZXNoKCZkZWZhdWx0X21vZGUpKTsKKwkJZGV2X2VycihjdHgtPmRldiwgImZhaWxlZCB0byBhZGQg
bW9kZSAldXgldUAldVxuIiwKKwkJCWRlZmF1bHRfbW9kZS5oZGlzcGxheSwgZGVmYXVsdF9tb2Rl
LnZkaXNwbGF5LAorCQkJZHJtX21vZGVfdnJlZnJlc2goJmRlZmF1bHRfbW9kZSkpOwogCQlyZXR1
cm4gLUVOT01FTTsKIAl9CiAKQEAgLTQyMyw3ICs0MTUsNyBAQCBzdGF0aWMgaW50IGx0azUwMGhk
MTgyOV9wcm9iZShzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCiAKIAljdHgtPnJlc2V0X2dw
aW8gPSBkZXZtX2dwaW9kX2dldF9vcHRpb25hbChkZXYsICJyZXNldCIsIEdQSU9EX09VVF9MT1cp
OwogCWlmIChJU19FUlIoY3R4LT5yZXNldF9ncGlvKSkgewotCQlEUk1fREVWX0VSUk9SKGRldiwg
ImNhbm5vdCBnZXQgcmVzZXQgZ3Bpb1xuIik7CisJCWRldl9lcnIoZGV2LCAiY2Fubm90IGdldCBy
ZXNldCBncGlvXG4iKTsKIAkJcmV0dXJuIFBUUl9FUlIoY3R4LT5yZXNldF9ncGlvKTsKIAl9CiAK
QEAgLTQzMSw5ICs0MjMsNyBAQCBzdGF0aWMgaW50IGx0azUwMGhkMTgyOV9wcm9iZShzdHJ1Y3Qg
bWlwaV9kc2lfZGV2aWNlICpkc2kpCiAJaWYgKElTX0VSUihjdHgtPnZjYykpIHsKIAkJcmV0ID0g
UFRSX0VSUihjdHgtPnZjYyk7CiAJCWlmIChyZXQgIT0gLUVQUk9CRV9ERUZFUikKLQkJCURSTV9E
RVZfRVJST1IoZGV2LAotCQkJCSAgICAgICJGYWlsZWQgdG8gcmVxdWVzdCB2Y2MgcmVndWxhdG9y
OiAlZFxuIiwKLQkJCQkgICAgICByZXQpOworCQkJZGV2X2VycihkZXYsICJGYWlsZWQgdG8gcmVx
dWVzdCB2Y2MgcmVndWxhdG9yOiAlZFxuIiwgcmV0KTsKIAkJcmV0dXJuIHJldDsKIAl9CiAKQEAg
LTQ0MSw5ICs0MzEsNyBAQCBzdGF0aWMgaW50IGx0azUwMGhkMTgyOV9wcm9iZShzdHJ1Y3QgbWlw
aV9kc2lfZGV2aWNlICpkc2kpCiAJaWYgKElTX0VSUihjdHgtPmlvdmNjKSkgewogCQlyZXQgPSBQ
VFJfRVJSKGN0eC0+aW92Y2MpOwogCQlpZiAocmV0ICE9IC1FUFJPQkVfREVGRVIpCi0JCQlEUk1f
REVWX0VSUk9SKGRldiwKLQkJCQkgICAgICAiRmFpbGVkIHRvIHJlcXVlc3QgaW92Y2MgcmVndWxh
dG9yOiAlZFxuIiwKLQkJCQkgICAgICByZXQpOworCQkJZGV2X2VycihkZXYsICJGYWlsZWQgdG8g
cmVxdWVzdCBpb3ZjYyByZWd1bGF0b3I6ICVkXG4iLCByZXQpOwogCQlyZXR1cm4gcmV0OwogCX0K
IApAQCAtNDY3LDcgKzQ1NSw3IEBAIHN0YXRpYyBpbnQgbHRrNTAwaGQxODI5X3Byb2JlKHN0cnVj
dCBtaXBpX2RzaV9kZXZpY2UgKmRzaSkKIAogCXJldCA9IG1pcGlfZHNpX2F0dGFjaChkc2kpOwog
CWlmIChyZXQgPCAwKSB7Ci0JCURSTV9ERVZfRVJST1IoZGV2LCAibWlwaV9kc2lfYXR0YWNoIGZh
aWxlZDogJWRcbiIsIHJldCk7CisJCWRldl9lcnIoZGV2LCAibWlwaV9kc2lfYXR0YWNoIGZhaWxl
ZDogJWRcbiIsIHJldCk7CiAJCWRybV9wYW5lbF9yZW1vdmUoJmN0eC0+cGFuZWwpOwogCQlyZXR1
cm4gcmV0OwogCX0KQEAgLTQ4MiwxMyArNDcwLDExIEBAIHN0YXRpYyB2b2lkIGx0azUwMGhkMTgy
OV9zaHV0ZG93bihzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCiAKIAlyZXQgPSBkcm1fcGFu
ZWxfdW5wcmVwYXJlKCZjdHgtPnBhbmVsKTsKIAlpZiAocmV0IDwgMCkKLQkJRFJNX0RFVl9FUlJP
UigmZHNpLT5kZXYsICJGYWlsZWQgdG8gdW5wcmVwYXJlIHBhbmVsOiAlZFxuIiwKLQkJCSAgICAg
IHJldCk7CisJCWRldl9lcnIoJmRzaS0+ZGV2LCAiRmFpbGVkIHRvIHVucHJlcGFyZSBwYW5lbDog
JWRcbiIsIHJldCk7CiAKIAlyZXQgPSBkcm1fcGFuZWxfZGlzYWJsZSgmY3R4LT5wYW5lbCk7CiAJ
aWYgKHJldCA8IDApCi0JCURSTV9ERVZfRVJST1IoJmRzaS0+ZGV2LCAiRmFpbGVkIHRvIGRpc2Fi
bGUgcGFuZWw6ICVkXG4iLAotCQkJICAgICAgcmV0KTsKKwkJZGV2X2VycigmZHNpLT5kZXYsICJG
YWlsZWQgdG8gZGlzYWJsZSBwYW5lbDogJWRcbiIsIHJldCk7CiB9CiAKIHN0YXRpYyBpbnQgbHRr
NTAwaGQxODI5X3JlbW92ZShzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCkBAIC01MDAsOCAr
NDg2LDcgQEAgc3RhdGljIGludCBsdGs1MDBoZDE4MjlfcmVtb3ZlKHN0cnVjdCBtaXBpX2RzaV9k
ZXZpY2UgKmRzaSkKIAogCXJldCA9IG1pcGlfZHNpX2RldGFjaChkc2kpOwogCWlmIChyZXQgPCAw
KQotCQlEUk1fREVWX0VSUk9SKCZkc2ktPmRldiwgImZhaWxlZCB0byBkZXRhY2ggZnJvbSBEU0kg
aG9zdDogJWRcbiIsCi0JCQkgICAgICByZXQpOworCQlkZXZfZXJyKCZkc2ktPmRldiwgImZhaWxl
ZCB0byBkZXRhY2ggZnJvbSBEU0kgaG9zdDogJWRcbiIsIHJldCk7CiAKIAlkcm1fcGFuZWxfcmVt
b3ZlKCZjdHgtPnBhbmVsKTsKIAotLSAKMi4yNS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9kcmktZGV2ZWwK
