Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 28BAD6A521
	for <lists+dri-devel@lfdr.de>; Tue, 16 Jul 2019 11:43:25 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8DD8F6E0F6;
	Tue, 16 Jul 2019 09:43:22 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-vk1-xa4a.google.com (mail-vk1-xa4a.google.com
 [IPv6:2607:f8b0:4864:20::a4a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D4B236E0F6
 for <dri-devel@lists.freedesktop.org>; Tue, 16 Jul 2019 09:43:21 +0000 (UTC)
Received: by mail-vk1-xa4a.google.com with SMTP id y198so9617545vky.9
 for <dri-devel@lists.freedesktop.org>; Tue, 16 Jul 2019 02:43:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=TqlQqjzxZZ3G8gKzAaIB3o8BgpiljaP5AXN98lbOCcc=;
 b=eg2niEiwWojBxDFI10VtnuCSSu44KjT8VNAWlcIcHqG02UbZEkYYe2L3Z+jWU/R63R
 0/Di19u6E/i5nikqov0iHrW1/N2XxsWD1/3XR65h1tfydlRYg7C5FZihL0xLbro5ZYEO
 uMte7ZNN1ZXgM6zFnwBtim0wjl0GOsLHdCPUP2zqLjTARnW7JQJdJJrfhHmWhzO5hLIc
 ozujATe3SFyZUhboBdk8t7ZOOd+bQfZy0hqejcb3dRkhSG9k3DXkAFE1NH/eGRMT01v2
 eYHE5qKRNZ4EF7BGy/AfyAf9bvUSa2t7nXtjHeg9jVlBYfwrpzEibIsFZyd9iRX4XuON
 vO+Q==
X-Gm-Message-State: APjAAAXn5dlVJDhzwQSVUDTGhfB9fylEjspROFE3ggMyjQGf2j7dZXGO
 4EiHtpj/aLqXY86s5TT6Jhg22kMpbRUXaJMnB+/S9w==
X-Google-Smtp-Source: APXvYqwIbm7JxNlDogsJxSfizqw2t4SKDaVyPJJRYSQrWc4qwERW0wH53pqIAppUmtC5n+DIgt8XtwZJyC6giWyEsCA4xw==
X-Received: by 2002:a67:d50f:: with SMTP id l15mr19688769vsj.108.1563270200491; 
 Tue, 16 Jul 2019 02:43:20 -0700 (PDT)
Date: Tue, 16 Jul 2019 02:42:48 -0700
In-Reply-To: <20190716094302.180360-1-brendanhiggins@google.com>
Message-Id: <20190716094302.180360-5-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190716094302.180360-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.22.0.510.g264f2c817a-goog
Subject: [PATCH v10 04/18] kunit: test: add kunit_stream a std::stream like
 logger
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=TqlQqjzxZZ3G8gKzAaIB3o8BgpiljaP5AXN98lbOCcc=;
 b=b+x1y6mMnXsqkekWLIXfsj8Vbl45WTrrs1bixw1uF7FXw1tzJOv/Q3wH6id2Mq4dCo
 3g0ynGU45w8KR5sQz5FrcvwLeWepFLuXQGGKUaObVBrbC8tQx1jEu6s5DPmHyRiY50Pw
 AO9FkEIW3TzWdHfIuyB3UIf8Du4u0HAxL7oEjv04EXQ+GH4xpnLXPJbt1eDiDwPJ3pMw
 +oPeGNWREg5AzytL8uXuh/Ie3x9Vpc7FXQ3U6OtS4RA93N8xZ43vWmqFRJYDDYBxBa4l
 2s64soc3LbTYlh+YeSYFxigKmddAR19FUhkIHf7Y0ZE4LmfSE+ZNcN2NWVvtH64+/2s+
 QMjw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QSBsb3Qgb2YgdGhlIGV4cGVjdGF0aW9uIGFuZCBhc3NlcnRpb24gaW5mcmFzdHJ1Y3R1cmUgcHJp
bnRzIG91dCBmYWlybHkKY29tcGxpY2F0ZWQgdGVzdCBmYWlsdXJlIG1lc3NhZ2VzLCBzbyBhZGQg
YSBDKysgc3R5bGUgbG9nIGxpYnJhcnkgZm9yCmZvciBsb2dnaW5nIHRlc3QgcmVzdWx0cyBjYWxs
ZWQgYHN0cnVjdCBrdW5pdF9zdHJlYW1gLgoKa3VuaXRfc3RyZWFtIGFsbG93cyB1cyB0byBjb25z
dHJ1Y3QgYSBtZXNzYWdlIGJlZm9yZSB3ZSBrbm93IHdoZXRoZXIgd2UKd2FudCB0byBwcmludCBp
dCBvdXQ7IHRoaXMgY2FuIGJlIGV4dHJlbWVseSBoYW5keSBpZiB0aGVyZSBpcwppbmZvcm1hdGlv
biB5b3UgbWlnaHQgbmVlZCBmb3IgYSBmYWlsdXJlIG1lc3NhZ2UgdGhhdCBpcyBlYXNpZXN0IHRv
CmNvbGxlY3QgaW4gdGhlIHN0ZXBzIGxlYWRpbmcgdXAgdG8gdGhlIGFjdHVhbCBjaGVjay4KClNp
Z25lZC1vZmYtYnk6IEJyZW5kYW4gSGlnZ2lucyA8YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbT4K
UmV2aWV3ZWQtYnk6IEdyZWcgS3JvYWgtSGFydG1hbiA8Z3JlZ2toQGxpbnV4Zm91bmRhdGlvbi5v
cmc+ClJldmlld2VkLWJ5OiBMb2dhbiBHdW50aG9ycGUgPGxvZ2FuZ0BkZWx0YXRlZS5jb20+Ci0t
LQogaW5jbHVkZS9rdW5pdC9rdW5pdC1zdHJlYW0uaCB8ICA4MSArKysrKysrKysrKysrKysrKysr
KysrKysKIGluY2x1ZGUva3VuaXQvdGVzdC5oICAgICAgICAgfCAgIDMgKwoga3VuaXQvTWFrZWZp
bGUgICAgICAgICAgICAgICB8ICAgMyArLQoga3VuaXQva3VuaXQtc3RyZWFtLmMgICAgICAgICB8
IDExNiArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwoga3VuaXQvdGVzdC5jICAg
ICAgICAgICAgICAgICB8ICAgNiArKwogNSBmaWxlcyBjaGFuZ2VkLCAyMDggaW5zZXJ0aW9ucygr
KSwgMSBkZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGluY2x1ZGUva3VuaXQva3VuaXQt
c3RyZWFtLmgKIGNyZWF0ZSBtb2RlIDEwMDY0NCBrdW5pdC9rdW5pdC1zdHJlYW0uYwoKZGlmZiAt
LWdpdCBhL2luY2x1ZGUva3VuaXQva3VuaXQtc3RyZWFtLmggYi9pbmNsdWRlL2t1bml0L2t1bml0
LXN0cmVhbS5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMDAuLmE3YjUz
ZWFiZjZiZTQKLS0tIC9kZXYvbnVsbAorKysgYi9pbmNsdWRlL2t1bml0L2t1bml0LXN0cmVhbS5o
CkBAIC0wLDAgKzEsODEgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wICov
CisvKgorICogQysrIHN0cmVhbSBzdHlsZSBzdHJpbmcgZm9ybWF0dGVyIGFuZCBwcmludGVyIHVz
ZWQgaW4gS1VuaXQgZm9yIG91dHB1dHRpbmcKKyAqIEtVbml0IG1lc3NhZ2VzLgorICoKKyAqIENv
cHlyaWdodCAoQykgMjAxOSwgR29vZ2xlIExMQy4KKyAqIEF1dGhvcjogQnJlbmRhbiBIaWdnaW5z
IDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29tPgorICovCisKKyNpZm5kZWYgX0tVTklUX0tVTklU
X1NUUkVBTV9ICisjZGVmaW5lIF9LVU5JVF9LVU5JVF9TVFJFQU1fSAorCisjaW5jbHVkZSA8bGlu
dXgvdHlwZXMuaD4KKyNpbmNsdWRlIDxrdW5pdC9zdHJpbmctc3RyZWFtLmg+CisKK3N0cnVjdCBr
dW5pdDsKKworLyoqCisgKiBzdHJ1Y3Qga3VuaXRfc3RyZWFtIC0gYSBzdGQ6OnN0cmVhbSBzdHls
ZSBzdHJpbmcgYnVpbGRlci4KKyAqCisgKiBBIHN0ZDo6c3RyZWFtIHN0eWxlIHN0cmluZyBidWls
ZGVyLiBBbGxvd3MgbWVzc2FnZXMgdG8gYmUgYnVpbHQgdXAgYW5kCisgKiBwcmludGVkIGFsbCBh
dCBvbmNlLgorICovCitzdHJ1Y3Qga3VuaXRfc3RyZWFtIHsKKwkvKiBwcml2YXRlOiBpbnRlcm5h
bCB1c2Ugb25seS4gKi8KKwlzdHJ1Y3Qga3VuaXQgKnRlc3Q7CisJY29uc3QgY2hhciAqbGV2ZWw7
CisJc3RydWN0IHN0cmluZ19zdHJlYW0gKmludGVybmFsX3N0cmVhbTsKK307CisKKy8qKgorICog
YWxsb2Nfa3VuaXRfc3RyZWFtKCkgLSBjb25zdHJ1Y3RzIGEgbmV3ICZzdHJ1Y3Qga3VuaXRfc3Ry
ZWFtLgorICogQHRlc3Q6IFRoZSB0ZXN0IGNvbnRleHQgb2JqZWN0LgorICogQGxldmVsOiBUaGUg
bG9nIGxldmVsIGF0IHdoaWNoIHRvIHByaW50IG91dCB0aGUgbWVzc2FnZS4KKyAqCisgKiBDb25z
dHJ1Y3RzIGEgbmV3IHRlc3QgbWFuYWdlZCAmc3RydWN0IGt1bml0X3N0cmVhbS4KKyAqLworc3Ry
dWN0IGt1bml0X3N0cmVhbSAqYWxsb2Nfa3VuaXRfc3RyZWFtKHN0cnVjdCBrdW5pdCAqdGVzdCwg
Y29uc3QgY2hhciAqbGV2ZWwpOworCisvKioKKyAqIGt1bml0X3N0cmVhbV9hZGQoKTogYWRkcyB0
aGUgZm9ybWF0dGVkIGlucHV0IHRvIHRoZSBpbnRlcm5hbCBidWZmZXIuCisgKiBAa3N0cmVhbTog
dGhlIHN0cmVhbSBiZWluZyBvcGVyYXRlZCBvbi4KKyAqIEBmbXQ6IHByaW50ZiBzdHlsZSBmb3Jt
YXQgc3RyaW5nIHRvIGFwcGVuZCB0byBzdHJlYW0uCisgKgorICogQXBwZW5kcyB0aGUgZm9ybWF0
dGVkIHN0cmluZywgQGZtdCwgdG8gdGhlIGludGVybmFsIGJ1ZmZlci4KKyAqLwordm9pZCBfX3By
aW50ZigyLCAzKSBrdW5pdF9zdHJlYW1fYWRkKHN0cnVjdCBrdW5pdF9zdHJlYW0gKmtzdHJlYW0s
CisJCQkJICAgICBjb25zdCBjaGFyICpmbXQsIC4uLik7CisKKy8qKgorICoga3VuaXRfc3RyZWFt
X2FwcGVuZCgpOiBhcHBlbmRzIHRoZSBjb250ZW50cyBvZiBAb3RoZXIgdG8gQGtzdHJlYW0uCisg
KiBAa3N0cmVhbTogdGhlIHN0cmVhbSB0byB3aGljaCBAb3RoZXIgaXMgYXBwZW5kZWQuCisgKiBA
b3RoZXI6IHRoZSBzdHJlYW0gd2hvc2UgY29udGVudHMgYXJlIGFwcGVuZGVkIHRvIEBrc3RyZWFt
LgorICoKKyAqIEFwcGVuZHMgdGhlIGNvbnRlbnRzIG9mIEBvdGhlciB0byBAa3N0cmVhbS4KKyAq
Lwordm9pZCBrdW5pdF9zdHJlYW1fYXBwZW5kKHN0cnVjdCBrdW5pdF9zdHJlYW0gKmtzdHJlYW0s
CisJCQkgc3RydWN0IGt1bml0X3N0cmVhbSAqb3RoZXIpOworCisvKioKKyAqIGt1bml0X3N0cmVh
bV9jb21taXQoKTogcHJpbnRzIG91dCB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIHRoZSB1c2VyLgor
ICogQGtzdHJlYW06IHRoZSBzdHJlYW0gYmVpbmcgb3BlcmF0ZWQgb24uCisgKgorICogT3V0cHV0
cyB0aGUgY29udGVudHMgb2YgdGhlIGludGVybmFsIGJ1ZmZlciBhcyBhIGt1bml0X3ByaW50ayBm
b3JtYXR0ZWQKKyAqIG91dHB1dC4gS1VOSVRfU1RSRUFNIE9OTFkgT1VUUFVUUyBJVFMgQlVGRkVS
IFRPIFRIRSBVU0VSIElGIENPTU1JVCBJUworICogQ0FMTEVEISEhIFRoZSByZWFzb24gZm9yIHRo
aXMgaXMgdGhhdCBpdCBhbGxvd3MgdXMgdG8gY29uc3RydWN0IGEgbWVzc2FnZQorICogYmVmb3Jl
IHdlIGtub3cgd2hldGhlciB3ZSB3YW50IHRvIHByaW50IGl0IG91dDsgdGhpcyBjYW4gYmUgZXh0
cmVtZWx5IGhhbmR5CisgKiBpZiB0aGVyZSBpcyBpbmZvcm1hdGlvbiB5b3UgbWlnaHQgbmVlZCBm
b3IgYSBmYWlsdXJlIG1lc3NhZ2UgdGhhdCBpcyBlYXNpZXN0CisgKiB0byBjb2xsZWN0IGluIHRo
ZSBzdGVwcyBsZWFkaW5nIHVwIHRvIHRoZSBhY3R1YWwgY2hlY2suCisgKi8KK3ZvaWQga3VuaXRf
c3RyZWFtX2NvbW1pdChzdHJ1Y3Qga3VuaXRfc3RyZWFtICprc3RyZWFtKTsKKworLyoqCisgKiBr
dW5pdF9zdHJlYW1fY2xlYXIoKTogY2xlYXJzIHRoZSBpbnRlcm5hbCBidWZmZXIuCisgKiBAa3N0
cmVhbTogdGhlIHN0cmVhbSBiZWluZyBvcGVyYXRlZCBvbi4KKyAqCisgKiBDbGVhcnMgdGhlIGNv
bnRlbnRzIG9mIHRoZSBpbnRlcm5hbCBidWZmZXIuCisgKi8KK3ZvaWQga3VuaXRfc3RyZWFtX2Ns
ZWFyKHN0cnVjdCBrdW5pdF9zdHJlYW0gKmtzdHJlYW0pOworCisjZW5kaWYgLyogX0tVTklUX0tV
TklUX1NUUkVBTV9IICovCmRpZmYgLS1naXQgYS9pbmNsdWRlL2t1bml0L3Rlc3QuaCBiL2luY2x1
ZGUva3VuaXQvdGVzdC5oCmluZGV4IDEyMTk2NzE5Y2Y4ZjQuLmU5Mjk0MGQ3ZTllNTAgMTAwNjQ0
Ci0tLSBhL2luY2x1ZGUva3VuaXQvdGVzdC5oCisrKyBiL2luY2x1ZGUva3VuaXQvdGVzdC5oCkBA
IC0xMSw2ICsxMSw3IEBACiAKICNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgogI2luY2x1ZGUgPGxp
bnV4L3NsYWIuaD4KKyNpbmNsdWRlIDxrdW5pdC9rdW5pdC1zdHJlYW0uaD4KIAogc3RydWN0IGt1
bml0X3Jlc291cmNlOwogCkBAIC0xODQsNiArMTg1LDggQEAgc3RydWN0IGt1bml0IHsKIAogdm9p
ZCBrdW5pdF9pbml0X3Rlc3Qoc3RydWN0IGt1bml0ICp0ZXN0LCBjb25zdCBjaGFyICpuYW1lKTsK
IAordm9pZCBrdW5pdF9mYWlsKHN0cnVjdCBrdW5pdCAqdGVzdCwgc3RydWN0IGt1bml0X3N0cmVh
bSAqc3RyZWFtKTsKKwogaW50IGt1bml0X3J1bl90ZXN0cyhzdHJ1Y3Qga3VuaXRfc3VpdGUgKnN1
aXRlKTsKIAogLyoqCmRpZmYgLS1naXQgYS9rdW5pdC9NYWtlZmlsZSBiL2t1bml0L01ha2VmaWxl
CmluZGV4IDI3NWI1NjVhMGU4MWYuLjZkZGM2MjJlZTZiMWMgMTAwNjQ0Ci0tLSBhL2t1bml0L01h
a2VmaWxlCisrKyBiL2t1bml0L01ha2VmaWxlCkBAIC0xLDIgKzEsMyBAQAogb2JqLSQoQ09ORklH
X0tVTklUKSArPQkJCXRlc3QubyBcCi0JCQkJCXN0cmluZy1zdHJlYW0ubworCQkJCQlzdHJpbmct
c3RyZWFtLm8gXAorCQkJCQlrdW5pdC1zdHJlYW0ubwpkaWZmIC0tZ2l0IGEva3VuaXQva3VuaXQt
c3RyZWFtLmMgYi9rdW5pdC9rdW5pdC1zdHJlYW0uYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwMDAwMDAwLi5jODdiN2ZkM2MwNmI0Ci0tLSAvZGV2L251bGwKKysrIGIva3VuaXQv
a3VuaXQtc3RyZWFtLmMKQEAgLTAsMCArMSwxMTYgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlm
aWVyOiBHUEwtMi4wCisvKgorICogQysrIHN0cmVhbSBzdHlsZSBzdHJpbmcgZm9ybWF0dGVyIGFu
ZCBwcmludGVyIHVzZWQgaW4gS1VuaXQgZm9yIG91dHB1dHRpbmcKKyAqIEtVbml0IG1lc3NhZ2Vz
LgorICoKKyAqIENvcHlyaWdodCAoQykgMjAxOSwgR29vZ2xlIExMQy4KKyAqIEF1dGhvcjogQnJl
bmRhbiBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29tPgorICovCisKKyNpbmNsdWRl
IDxrdW5pdC90ZXN0Lmg+CisjaW5jbHVkZSA8a3VuaXQva3VuaXQtc3RyZWFtLmg+CisjaW5jbHVk
ZSA8a3VuaXQvc3RyaW5nLXN0cmVhbS5oPgorCit2b2lkIGt1bml0X3N0cmVhbV9hZGQoc3RydWN0
IGt1bml0X3N0cmVhbSAqa3N0cmVhbSwgY29uc3QgY2hhciAqZm10LCAuLi4pCit7CisJdmFfbGlz
dCBhcmdzOworCXN0cnVjdCBzdHJpbmdfc3RyZWFtICpzdHJlYW0gPSBrc3RyZWFtLT5pbnRlcm5h
bF9zdHJlYW07CisKKwl2YV9zdGFydChhcmdzLCBmbXQpOworCisJaWYgKHN0cmluZ19zdHJlYW1f
dmFkZChzdHJlYW0sIGZtdCwgYXJncykpCisJCWt1bml0X2Vycihrc3RyZWFtLT50ZXN0LAorCQkJ
ICAiRmFpbGVkIHRvIGFsbG9jYXRlIGZyYWdtZW50OiAlc1xuIiwKKwkJCSAgZm10KTsKKworCXZh
X2VuZChhcmdzKTsKK30KKwordm9pZCBrdW5pdF9zdHJlYW1fYXBwZW5kKHN0cnVjdCBrdW5pdF9z
dHJlYW0gKmtzdHJlYW0sCisJCQkgc3RydWN0IGt1bml0X3N0cmVhbSAqb3RoZXIpCit7CisJaW50
IHJldDsKKworCXJldCA9IHN0cmluZ19zdHJlYW1fYXBwZW5kKGtzdHJlYW0tPmludGVybmFsX3N0
cmVhbSwKKwkJCQkgICBvdGhlci0+aW50ZXJuYWxfc3RyZWFtKTsKKworCWlmIChyZXQpCisJCWt1
bml0X2Vycihrc3RyZWFtLT50ZXN0LAorCQkJICAiRmFpbGVkIHRvIGFwcGVuZCBvdGhlciBzdHJl
YW06ICVkXG4iLCByZXQpOworfQorCit2b2lkIGt1bml0X3N0cmVhbV9jbGVhcihzdHJ1Y3Qga3Vu
aXRfc3RyZWFtICprc3RyZWFtKQoreworCXN0cmluZ19zdHJlYW1fY2xlYXIoa3N0cmVhbS0+aW50
ZXJuYWxfc3RyZWFtKTsKK30KKwordm9pZCBrdW5pdF9zdHJlYW1fY29tbWl0KHN0cnVjdCBrdW5p
dF9zdHJlYW0gKmtzdHJlYW0pCit7CisJc3RydWN0IHN0cmluZ19zdHJlYW0gKnN0cmVhbSA9IGtz
dHJlYW0tPmludGVybmFsX3N0cmVhbTsKKwlzdHJ1Y3Qgc3RyaW5nX3N0cmVhbV9mcmFnbWVudCAq
ZnJhZ21lbnQ7CisJc3RydWN0IGt1bml0ICp0ZXN0ID0ga3N0cmVhbS0+dGVzdDsKKwljaGFyICpi
dWY7CisKKwlidWYgPSBzdHJpbmdfc3RyZWFtX2dldF9zdHJpbmcoc3RyZWFtKTsKKwlpZiAoIWJ1
ZikgeworCQlrdW5pdF9lcnIodGVzdCwKKwkJCSAgIkNvdWxkIG5vdCBhbGxvY2F0ZSBidWZmZXIs
IGR1bXBpbmcgc3RyZWFtOlxuIik7CisJCWxpc3RfZm9yX2VhY2hfZW50cnkoZnJhZ21lbnQsICZz
dHJlYW0tPmZyYWdtZW50cywgbm9kZSkgeworCQkJa3VuaXRfZXJyKHRlc3QsIGZyYWdtZW50LT5m
cmFnbWVudCk7CisJCX0KKwkJa3VuaXRfZXJyKHRlc3QsICJcbiIpOworCX0gZWxzZSB7CisJCWt1
bml0X3ByaW50ayhrc3RyZWFtLT5sZXZlbCwgdGVzdCwgYnVmKTsKKwkJa2ZyZWUoYnVmKTsKKwl9
CisKKwlrdW5pdF9zdHJlYW1fY2xlYXIoa3N0cmVhbSk7Cit9CisKK3N0YXRpYyBpbnQga3VuaXRf
c3RyZWFtX2luaXQoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMsIHZvaWQgKmNvbnRleHQpCit7
CisJc3RydWN0IGt1bml0ICp0ZXN0ID0gY29udGV4dDsKKwlzdHJ1Y3Qga3VuaXRfc3RyZWFtICpz
dHJlYW07CisKKwlzdHJlYW0gPSBremFsbG9jKHNpemVvZigqc3RyZWFtKSwgR0ZQX0tFUk5FTCk7
CisJaWYgKCFzdHJlYW0pCisJCXJldHVybiAtRU5PTUVNOworCisJcmVzLT5hbGxvY2F0aW9uID0g
c3RyZWFtOworCXN0cmVhbS0+dGVzdCA9IHRlc3Q7CisJc3RyZWFtLT5pbnRlcm5hbF9zdHJlYW0g
PSBhbGxvY19zdHJpbmdfc3RyZWFtKHRlc3QpOworCisJaWYgKCFzdHJlYW0tPmludGVybmFsX3N0
cmVhbSkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQg
a3VuaXRfc3RyZWFtX2ZyZWUoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMpCit7CisJc3RydWN0
IGt1bml0X3N0cmVhbSAqc3RyZWFtID0gcmVzLT5hbGxvY2F0aW9uOworCisJaWYgKCFzdHJpbmdf
c3RyZWFtX2lzX2VtcHR5KHN0cmVhbS0+aW50ZXJuYWxfc3RyZWFtKSkgeworCQlrdW5pdF9lcnIo
c3RyZWFtLT50ZXN0LAorCQkJICAiRW5kIG9mIHRlc3QgY2FzZSByZWFjaGVkIHdpdGggdW5jb21t
aXR0ZWQgc3RyZWFtIGVudHJpZXNcbiIpOworCQlrdW5pdF9zdHJlYW1fY29tbWl0KHN0cmVhbSk7
CisJfQorfQorCitzdHJ1Y3Qga3VuaXRfc3RyZWFtICphbGxvY19rdW5pdF9zdHJlYW0oc3RydWN0
IGt1bml0ICp0ZXN0LCBjb25zdCBjaGFyICpsZXZlbCkKK3sKKwlzdHJ1Y3Qga3VuaXRfc3RyZWFt
ICprc3RyZWFtOworCisJa3N0cmVhbSA9IGt1bml0X2FsbG9jX3Jlc291cmNlKHRlc3QsCisJCQkJ
ICAgICAgIGt1bml0X3N0cmVhbV9pbml0LAorCQkJCSAgICAgICBrdW5pdF9zdHJlYW1fZnJlZSwK
KwkJCQkgICAgICAgR0ZQX0tFUk5FTCwKKwkJCQkgICAgICAgdGVzdCk7CisKKwlpZiAoIWtzdHJl
YW0pCisJCXJldHVybiBOVUxMOworCisJa3N0cmVhbS0+bGV2ZWwgPSBsZXZlbDsKKworCXJldHVy
biBrc3RyZWFtOworfQpkaWZmIC0tZ2l0IGEva3VuaXQvdGVzdC5jIGIva3VuaXQvdGVzdC5jCmlu
ZGV4IDRjMTc4YTgxN2YyZmUuLmZkYWIwN2JiMGI1MjkgMTAwNjQ0Ci0tLSBhL2t1bml0L3Rlc3Qu
YworKysgYi9rdW5pdC90ZXN0LmMKQEAgLTEyMCw2ICsxMjAsMTIgQEAgc3RhdGljIHZvaWQga3Vu
aXRfcHJpbnRfdGVzdF9jYXNlX29rX25vdF9vayhzdHJ1Y3Qga3VuaXRfY2FzZSAqdGVzdF9jYXNl
LAogCQkJICAgICAgdGVzdF9jYXNlLT5uYW1lKTsKIH0KIAordm9pZCBrdW5pdF9mYWlsKHN0cnVj
dCBrdW5pdCAqdGVzdCwgc3RydWN0IGt1bml0X3N0cmVhbSAqc3RyZWFtKQoreworCWt1bml0X3Nl
dF9mYWlsdXJlKHRlc3QpOworCWt1bml0X3N0cmVhbV9jb21taXQoc3RyZWFtKTsKK30KKwogdm9p
ZCBrdW5pdF9pbml0X3Rlc3Qoc3RydWN0IGt1bml0ICp0ZXN0LCBjb25zdCBjaGFyICpuYW1lKQog
ewogCXNwaW5fbG9ja19pbml0KCZ0ZXN0LT5sb2NrKTsKLS0gCjIuMjIuMC41MTAuZzI2NGYyYzgx
N2EtZ29vZwoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
ZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
