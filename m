Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 344162450FC
	for <lists+dri-devel@lfdr.de>; Sat, 15 Aug 2020 14:54:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 93ECD6E378;
	Sat, 15 Aug 2020 12:54:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lf1-x144.google.com (mail-lf1-x144.google.com
 [IPv6:2a00:1450:4864:20::144])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A1AE66E358
 for <dri-devel@lists.freedesktop.org>; Sat, 15 Aug 2020 12:54:26 +0000 (UTC)
Received: by mail-lf1-x144.google.com with SMTP id v15so6126890lfg.6
 for <dri-devel@lists.freedesktop.org>; Sat, 15 Aug 2020 05:54:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=sender:from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=dLsRoexQdN6Ljo/Wh8IjTR8DwXXY1DYwkT2H3ZrvEKY=;
 b=lQIxc2pnmc5TnocdbjCSBCs3FTtl7yjMB9cD+QEva//MhFzQtrlwLiJDsDp/oYtHMi
 eRvEDm1sqqFo9Fc+qTtC0hxq136NWGH7Abo+m6bffBWxo46V6aK243ylzE0ZjozEVkXi
 S+3DGU7gLGu34hhrdJMTWGpSJxPF0hayJyQOD8fCqWUzUebwmZhmImU85OUS0cYITTCA
 d7ihIashXrQd8FFbsesKUGEsi0z4zW5F146j6qZ1+XKfKxskO8zpFeAmhngWKPc1j3CH
 azZ3BdxJq+KAluOO5626Lejd2K2bjyPQl6A/fI9gTTTjAcVR7lIP5az9dNy+rAl3q4M4
 zscg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:from:to:cc:subject:date:message-id
 :in-reply-to:references:mime-version:content-transfer-encoding;
 bh=dLsRoexQdN6Ljo/Wh8IjTR8DwXXY1DYwkT2H3ZrvEKY=;
 b=lVnVPAQcrguHVanQV5saiHNE9Rwbq7l1o3XHnUQ3cpxVUc2VRhpoYtHMUcmbZc5Xhk
 AbusZ4e3OCCpOBUwpioBX2POzpyCvFo2itP9ghSIFLDq6syLZ+pIjuK11I82tnj+DQaV
 5IBhwY+n87jhB7SuDLTV+pjvxRLU090poJgMf81DkxABzCxzimun18KOxjRHUUVHwnvC
 D+/gtLBaHMIYhxuWNlVKzlmrzP+5bKsVQeXRVBTzDjuInz1vGcxMo4YnkAbYCB1AzDXz
 mrsEPd5QQrPXww30omLSvmg5pjc4Z0b9hIIK+CzmoBt1ARL7EY4q6jB7Qr7mTJIUhwyr
 nCwQ==
X-Gm-Message-State: AOAM530MXUMVdeTo4bZf0x2d93IMUWNQsNM/1HroRLvbw1eyEcAcWvPU
 rgUQ2GUSEqAFfGyb1rC4YW0aj+lSEcMZvQ==
X-Google-Smtp-Source: ABdhPJzdwtOTExznMU6ZiJbKKnIad378y1r3PGfC3/e5HxizMtz8lQl+Q/z3LrPTOYiSvBsBAYi1wA==
X-Received: by 2002:a19:fc14:: with SMTP id a20mr3525879lfi.0.1597496064816;
 Sat, 15 Aug 2020 05:54:24 -0700 (PDT)
Received: from saturn.lan ([2a00:fd00:805f:db00:402:93d8:3e64:6121])
 by smtp.gmail.com with ESMTPSA id e29sm2396322ljp.136.2020.08.15.05.54.23
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Sat, 15 Aug 2020 05:54:24 -0700 (PDT)
From: Sam Ravnborg <sam@ravnborg.org>
To: dri-devel@lists.freedesktop.org, Thierry Reding <thierry.reding@gmail.com>
Subject: [PATCH v1 4/5] drm/panel: sitronix: Use dev_ based logging
Date: Sat, 15 Aug 2020 14:54:05 +0200
Message-Id: <20200815125406.1153224-5-sam@ravnborg.org>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20200815125406.1153224-1-sam@ravnborg.org>
References: <20200815125406.1153224-1-sam@ravnborg.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 David Airlie <airlied@linux.ie>,
 =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>,
 Jerry Han <hanxu5@huaqin.corp-partner.google.com>,
 Jani Nikula <jani.nikula@intel.com>, Jagan Teki <jagan@amarulasolutions.com>,
 Robert Chiras <robert.chiras@nxp.com>, Sam Ravnborg <sam@ravnborg.org>,
 Icenowy Zheng <icenowy@aosc.io>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U3RhbmRhcmRpemUgb24gdGhlIGRldl8gYmFzZWQgbG9nZ2luZyBhbmQgZHJvcCB0aGUgaW5jbHVk
ZSBvZiBkcm1fcHJpbnQuaC4KRml4IGEgZmV3IGNhc2VzIHdoZXJlICJ4QCIgd2FzIHVzZWQgd2hl
biBwcmludGluZyB0aGUgbW9kZS4KClNpZ25lZC1vZmYtYnk6IFNhbSBSYXZuYm9yZyA8c2FtQHJh
dm5ib3JnLm9yZz4KQ2M6IEphZ2FuIFRla2kgPGphZ2FuQGFtYXJ1bGFzb2x1dGlvbnMuY29tPgpD
YzogVGhpZXJyeSBSZWRpbmcgPHRoaWVycnkucmVkaW5nQGdtYWlsLmNvbT4KQ2M6IFNhbSBSYXZu
Ym9yZyA8c2FtQHJhdm5ib3JnLm9yZz4KQ2M6IEd1aWRvIEfDvG50aGVyIDxhZ3hAc2lneGNwdS5v
cmc+CkNjOiBMaW51cyBXYWxsZWlqIDxsaW51cy53YWxsZWlqQGxpbmFyby5vcmc+CkNjOiBMYXVy
ZW50IFBpbmNoYXJ0IDxsYXVyZW50LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+Ci0tLQogZHJp
dmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLXNpdHJvbml4LXN0NzcwMS5jIHwgMTAgKystCiBkcml2
ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtc2l0cm9uaXgtc3Q3NzAzLmMgfCA2MSArKysrKysrLS0t
LS0tLS0tLS0tCiAyIGZpbGVzIGNoYW5nZWQsIDI3IGluc2VydGlvbnMoKyksIDQ0IGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1zaXRyb25peC1z
dDc3MDEuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1zaXRyb25peC1zdDc3MDEuYwpp
bmRleCAxMjQ2MjExNGE1MmQuLjRkMmExNDliMjAyYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL3BhbmVsL3BhbmVsLXNpdHJvbml4LXN0NzcwMS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9w
YW5lbC9wYW5lbC1zaXRyb25peC1zdDc3MDEuYwpAQCAtNyw3ICs3LDYgQEAKICNpbmNsdWRlIDxk
cm0vZHJtX21pcGlfZHNpLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9tb2Rlcy5oPgogI2luY2x1ZGUg
PGRybS9kcm1fcGFuZWwuaD4KLSNpbmNsdWRlIDxkcm0vZHJtX3ByaW50Lmg+CiAKICNpbmNsdWRl
IDxsaW51eC9ncGlvL2NvbnN1bWVyLmg+CiAjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KQEAgLTI2
OSwxMCArMjY4LDkgQEAgc3RhdGljIGludCBzdDc3MDFfZ2V0X21vZGVzKHN0cnVjdCBkcm1fcGFu
ZWwgKnBhbmVsLAogCiAJbW9kZSA9IGRybV9tb2RlX2R1cGxpY2F0ZShjb25uZWN0b3ItPmRldiwg
ZGVzY19tb2RlKTsKIAlpZiAoIW1vZGUpIHsKLQkJRFJNX0RFVl9FUlJPUigmc3Q3NzAxLT5kc2kt
PmRldiwKLQkJCSAgICAgICJmYWlsZWQgdG8gYWRkIG1vZGUgJXV4JXV4QCV1XG4iLAotCQkJICAg
ICAgZGVzY19tb2RlLT5oZGlzcGxheSwgZGVzY19tb2RlLT52ZGlzcGxheSwKLQkJCSAgICAgIGRy
bV9tb2RlX3ZyZWZyZXNoKGRlc2NfbW9kZSkpOworCQlkZXZfZXJyKCZzdDc3MDEtPmRzaS0+ZGV2
LCAiZmFpbGVkIHRvIGFkZCBtb2RlICV1eCV1QCV1XG4iLAorCQkJZGVzY19tb2RlLT5oZGlzcGxh
eSwgZGVzY19tb2RlLT52ZGlzcGxheSwKKwkJCWRybV9tb2RlX3ZyZWZyZXNoKGRlc2NfbW9kZSkp
OwogCQlyZXR1cm4gLUVOT01FTTsKIAl9CiAKQEAgLTM1OCw3ICszNTYsNyBAQCBzdGF0aWMgaW50
IHN0NzcwMV9kc2lfcHJvYmUoc3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpKQogCiAJc3Q3NzAx
LT5yZXNldCA9IGRldm1fZ3Bpb2RfZ2V0KCZkc2ktPmRldiwgInJlc2V0IiwgR1BJT0RfT1VUX0xP
Vyk7CiAJaWYgKElTX0VSUihzdDc3MDEtPnJlc2V0KSkgewotCQlEUk1fREVWX0VSUk9SKCZkc2kt
PmRldiwgIkNvdWxkbid0IGdldCBvdXIgcmVzZXQgR1BJT1xuIik7CisJCWRldl9lcnIoJmRzaS0+
ZGV2LCAiQ291bGRuJ3QgZ2V0IG91ciByZXNldCBHUElPXG4iKTsKIAkJcmV0dXJuIFBUUl9FUlIo
c3Q3NzAxLT5yZXNldCk7CiAJfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwv
cGFuZWwtc2l0cm9uaXgtc3Q3NzAzLmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtc2l0
cm9uaXgtc3Q3NzAzLmMKaW5kZXggODk5NmNlZDJiNzIxLi5jMjJlN2M0OWUwNzcgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1zaXRyb25peC1zdDc3MDMuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtc2l0cm9uaXgtc3Q3NzAzLmMKQEAgLTIyLDcgKzIy
LDYgQEAKICNpbmNsdWRlIDxkcm0vZHJtX21pcGlfZHNpLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9t
b2Rlcy5oPgogI2luY2x1ZGUgPGRybS9kcm1fcGFuZWwuaD4KLSNpbmNsdWRlIDxkcm0vZHJtX3By
aW50Lmg+CiAKICNkZWZpbmUgRFJWX05BTUUgInBhbmVsLXNpdHJvbml4LXN0NzcwMyIKIApAQCAt
MzY0LDggKzM2Myw3IEBAIHN0YXRpYyBpbnQgc3Q3NzAzX2VuYWJsZShzdHJ1Y3QgZHJtX3BhbmVs
ICpwYW5lbCkKIAogCXJldCA9IGN0eC0+ZGVzYy0+aW5pdF9zZXF1ZW5jZShjdHgpOwogCWlmIChy
ZXQgPCAwKSB7Ci0JCURSTV9ERVZfRVJST1IoY3R4LT5kZXYsICJQYW5lbCBpbml0IHNlcXVlbmNl
IGZhaWxlZDogJWRcbiIsCi0JCQkgICAgICByZXQpOworCQlkZXZfZXJyKGN0eC0+ZGV2LCAiUGFu
ZWwgaW5pdCBzZXF1ZW5jZSBmYWlsZWQ6ICVkXG4iLCByZXQpOwogCQlyZXR1cm4gcmV0OwogCX0K
IApAQCAtMzczLDcgKzM3MSw3IEBAIHN0YXRpYyBpbnQgc3Q3NzAzX2VuYWJsZShzdHJ1Y3QgZHJt
X3BhbmVsICpwYW5lbCkKIAogCXJldCA9IG1pcGlfZHNpX2Rjc19leGl0X3NsZWVwX21vZGUoZHNp
KTsKIAlpZiAocmV0IDwgMCkgewotCQlEUk1fREVWX0VSUk9SKGN0eC0+ZGV2LCAiRmFpbGVkIHRv
IGV4aXQgc2xlZXAgbW9kZTogJWRcbiIsIHJldCk7CisJCWRldl9lcnIoY3R4LT5kZXYsICJGYWls
ZWQgdG8gZXhpdCBzbGVlcCBtb2RlOiAlZFxuIiwgcmV0KTsKIAkJcmV0dXJuIHJldDsKIAl9CiAK
QEAgLTM4NCw3ICszODIsNyBAQCBzdGF0aWMgaW50IHN0NzcwM19lbmFibGUoc3RydWN0IGRybV9w
YW5lbCAqcGFuZWwpCiAJaWYgKHJldCkKIAkJcmV0dXJuIHJldDsKIAotCURSTV9ERVZfREVCVUdf
RFJJVkVSKGN0eC0+ZGV2LCAiUGFuZWwgaW5pdCBzZXF1ZW5jZSBkb25lXG4iKTsKKwlkZXZfZGJn
KGN0eC0+ZGV2LCAiUGFuZWwgaW5pdCBzZXF1ZW5jZSBkb25lXG4iKTsKIAogCXJldHVybiAwOwog
fQpAQCAtMzk3LDEzICszOTUsMTEgQEAgc3RhdGljIGludCBzdDc3MDNfZGlzYWJsZShzdHJ1Y3Qg
ZHJtX3BhbmVsICpwYW5lbCkKIAogCXJldCA9IG1pcGlfZHNpX2Rjc19zZXRfZGlzcGxheV9vZmYo
ZHNpKTsKIAlpZiAocmV0IDwgMCkKLQkJRFJNX0RFVl9FUlJPUihjdHgtPmRldiwKLQkJCSAgICAg
ICJGYWlsZWQgdG8gdHVybiBvZmYgdGhlIGRpc3BsYXk6ICVkXG4iLCByZXQpOworCQlkZXZfZXJy
KGN0eC0+ZGV2LCAiRmFpbGVkIHRvIHR1cm4gb2ZmIHRoZSBkaXNwbGF5OiAlZFxuIiwgcmV0KTsK
IAogCXJldCA9IG1pcGlfZHNpX2Rjc19lbnRlcl9zbGVlcF9tb2RlKGRzaSk7CiAJaWYgKHJldCA8
IDApCi0JCURSTV9ERVZfRVJST1IoY3R4LT5kZXYsCi0JCQkgICAgICAiRmFpbGVkIHRvIGVudGVy
IHNsZWVwIG1vZGU6ICVkXG4iLCByZXQpOworCQlkZXZfZXJyKGN0eC0+ZGV2LCAiRmFpbGVkIHRv
IGVudGVyIHNsZWVwIG1vZGU6ICVkXG4iLCByZXQpOwogCiAJcmV0dXJuIDA7CiB9CkBAIC00MzEs
MTcgKzQyNywxNSBAQCBzdGF0aWMgaW50IHN0NzcwM19wcmVwYXJlKHN0cnVjdCBkcm1fcGFuZWwg
KnBhbmVsKQogCWlmIChjdHgtPnByZXBhcmVkKQogCQlyZXR1cm4gMDsKIAotCURSTV9ERVZfREVC
VUdfRFJJVkVSKGN0eC0+ZGV2LCAiUmVzZXR0aW5nIHRoZSBwYW5lbFxuIik7CisJZGV2X2RiZyhj
dHgtPmRldiwgIlJlc2V0dGluZyB0aGUgcGFuZWxcbiIpOwogCXJldCA9IHJlZ3VsYXRvcl9lbmFi
bGUoY3R4LT52Y2MpOwogCWlmIChyZXQgPCAwKSB7Ci0JCURSTV9ERVZfRVJST1IoY3R4LT5kZXYs
Ci0JCQkgICAgICAiRmFpbGVkIHRvIGVuYWJsZSB2Y2Mgc3VwcGx5OiAlZFxuIiwgcmV0KTsKKwkJ
ZGV2X2VycihjdHgtPmRldiwgIkZhaWxlZCB0byBlbmFibGUgdmNjIHN1cHBseTogJWRcbiIsIHJl
dCk7CiAJCXJldHVybiByZXQ7CiAJfQogCXJldCA9IHJlZ3VsYXRvcl9lbmFibGUoY3R4LT5pb3Zj
Yyk7CiAJaWYgKHJldCA8IDApIHsKLQkJRFJNX0RFVl9FUlJPUihjdHgtPmRldiwKLQkJCSAgICAg
ICJGYWlsZWQgdG8gZW5hYmxlIGlvdmNjIHN1cHBseTogJWRcbiIsIHJldCk7CisJCWRldl9lcnIo
Y3R4LT5kZXYsICJGYWlsZWQgdG8gZW5hYmxlIGlvdmNjIHN1cHBseTogJWRcbiIsIHJldCk7CiAJ
CWdvdG8gZGlzYWJsZV92Y2M7CiAJfQogCkBAIC00NjcsOSArNDYxLDkgQEAgc3RhdGljIGludCBz
dDc3MDNfZ2V0X21vZGVzKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsLAogCiAJbW9kZSA9IGRybV9t
b2RlX2R1cGxpY2F0ZShjb25uZWN0b3ItPmRldiwgY3R4LT5kZXNjLT5tb2RlKTsKIAlpZiAoIW1v
ZGUpIHsKLQkJRFJNX0RFVl9FUlJPUihjdHgtPmRldiwgIkZhaWxlZCB0byBhZGQgbW9kZSAldXgl
dUAldVxuIiwKLQkJCSAgICAgIGN0eC0+ZGVzYy0+bW9kZS0+aGRpc3BsYXksIGN0eC0+ZGVzYy0+
bW9kZS0+dmRpc3BsYXksCi0JCQkgICAgICBkcm1fbW9kZV92cmVmcmVzaChjdHgtPmRlc2MtPm1v
ZGUpKTsKKwkJZGV2X2VycihjdHgtPmRldiwgIkZhaWxlZCB0byBhZGQgbW9kZSAldXgldUAldVxu
IiwKKwkJCWN0eC0+ZGVzYy0+bW9kZS0+aGRpc3BsYXksIGN0eC0+ZGVzYy0+bW9kZS0+dmRpc3Bs
YXksCisJCQlkcm1fbW9kZV92cmVmcmVzaChjdHgtPmRlc2MtPm1vZGUpKTsKIAkJcmV0dXJuIC1F
Tk9NRU07CiAJfQogCkBAIC00OTYsNyArNDkwLDcgQEAgc3RhdGljIGludCBhbGxwaXhlbHNvbl9z
ZXQodm9pZCAqZGF0YSwgdTY0IHZhbCkKIAlzdHJ1Y3Qgc3Q3NzAzICpjdHggPSBkYXRhOwogCXN0
cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRzaSA9IHRvX21pcGlfZHNpX2RldmljZShjdHgtPmRldik7
CiAKLQlEUk1fREVWX0RFQlVHX0RSSVZFUihjdHgtPmRldiwgIlNldHRpbmcgYWxsIHBpeGVscyBv
blxuIik7CisJZGV2X2RiZyhjdHgtPmRldiwgIlNldHRpbmcgYWxsIHBpeGVscyBvblxuIik7CiAJ
ZHNpX2dlbmVyaWNfd3JpdGVfc2VxKGRzaSwgU1Q3NzAzX0NNRF9BTExfUElYRUxfT04pOwogCW1z
bGVlcCh2YWwgKiAxMDAwKTsKIAkvKiBSZXNldCB0aGUgcGFuZWwgdG8gZ2V0IHZpZGVvIGJhY2sg
Ki8KQEAgLTUzNyw3ICs1MzEsNyBAQCBzdGF0aWMgaW50IHN0NzcwM19wcm9iZShzdHJ1Y3QgbWlw
aV9kc2lfZGV2aWNlICpkc2kpCiAKIAljdHgtPnJlc2V0X2dwaW8gPSBkZXZtX2dwaW9kX2dldChk
ZXYsICJyZXNldCIsIEdQSU9EX09VVF9MT1cpOwogCWlmIChJU19FUlIoY3R4LT5yZXNldF9ncGlv
KSkgewotCQlEUk1fREVWX0VSUk9SKGRldiwgImNhbm5vdCBnZXQgcmVzZXQgZ3Bpb1xuIik7CisJ
CWRldl9lcnIoZGV2LCAiY2Fubm90IGdldCByZXNldCBncGlvXG4iKTsKIAkJcmV0dXJuIFBUUl9F
UlIoY3R4LT5yZXNldF9ncGlvKTsKIAl9CiAKQEAgLTU1NCwxOCArNTQ4LDE0IEBAIHN0YXRpYyBp
bnQgc3Q3NzAzX3Byb2JlKHN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRzaSkKIAlpZiAoSVNfRVJS
KGN0eC0+dmNjKSkgewogCQlyZXQgPSBQVFJfRVJSKGN0eC0+dmNjKTsKIAkJaWYgKHJldCAhPSAt
RVBST0JFX0RFRkVSKQotCQkJRFJNX0RFVl9FUlJPUihkZXYsCi0JCQkJICAgICAgIkZhaWxlZCB0
byByZXF1ZXN0IHZjYyByZWd1bGF0b3I6ICVkXG4iLAotCQkJCSAgICAgIHJldCk7CisJCQlkZXZf
ZXJyKGRldiwgIkZhaWxlZCB0byByZXF1ZXN0IHZjYyByZWd1bGF0b3I6ICVkXG4iLCByZXQpOwog
CQlyZXR1cm4gcmV0OwogCX0KIAljdHgtPmlvdmNjID0gZGV2bV9yZWd1bGF0b3JfZ2V0KGRldiwg
ImlvdmNjIik7CiAJaWYgKElTX0VSUihjdHgtPmlvdmNjKSkgewogCQlyZXQgPSBQVFJfRVJSKGN0
eC0+aW92Y2MpOwogCQlpZiAocmV0ICE9IC1FUFJPQkVfREVGRVIpCi0JCQlEUk1fREVWX0VSUk9S
KGRldiwKLQkJCQkgICAgICAiRmFpbGVkIHRvIHJlcXVlc3QgaW92Y2MgcmVndWxhdG9yOiAlZFxu
IiwKLQkJCQkgICAgICByZXQpOworCQkJZGV2X2VycihkZXYsICJGYWlsZWQgdG8gcmVxdWVzdCBp
b3ZjYyByZWd1bGF0b3I6ICVkXG4iLCByZXQpOwogCQlyZXR1cm4gcmV0OwogCX0KIApAQCAtNTgw
LDE3ICs1NzAsMTUgQEAgc3RhdGljIGludCBzdDc3MDNfcHJvYmUoc3RydWN0IG1pcGlfZHNpX2Rl
dmljZSAqZHNpKQogCiAJcmV0ID0gbWlwaV9kc2lfYXR0YWNoKGRzaSk7CiAJaWYgKHJldCA8IDAp
IHsKLQkJRFJNX0RFVl9FUlJPUihkZXYsCi0JCQkgICAgICAibWlwaV9kc2lfYXR0YWNoIGZhaWxl
ZCAoJWQpLiBJcyBob3N0IHJlYWR5P1xuIiwKLQkJCSAgICAgIHJldCk7CisJCWRldl9lcnIoZGV2
LCAibWlwaV9kc2lfYXR0YWNoIGZhaWxlZCAoJWQpLiBJcyBob3N0IHJlYWR5P1xuIiwgcmV0KTsK
IAkJZHJtX3BhbmVsX3JlbW92ZSgmY3R4LT5wYW5lbCk7CiAJCXJldHVybiByZXQ7CiAJfQogCi0J
RFJNX0RFVl9JTkZPKGRldiwgIiV1eCV1QCV1ICV1YnBwIGRzaSAldWRsIC0gcmVhZHlcbiIsCi0J
CSAgICAgY3R4LT5kZXNjLT5tb2RlLT5oZGlzcGxheSwgY3R4LT5kZXNjLT5tb2RlLT52ZGlzcGxh
eSwKLQkJICAgICBkcm1fbW9kZV92cmVmcmVzaChjdHgtPmRlc2MtPm1vZGUpLAotCQkgICAgIG1p
cGlfZHNpX3BpeGVsX2Zvcm1hdF90b19icHAoZHNpLT5mb3JtYXQpLCBkc2ktPmxhbmVzKTsKKwlk
ZXZfaW5mbyhkZXYsICIldXgldUAldSAldWJwcCBkc2kgJXVkbCAtIHJlYWR5XG4iLAorCQkgY3R4
LT5kZXNjLT5tb2RlLT5oZGlzcGxheSwgY3R4LT5kZXNjLT5tb2RlLT52ZGlzcGxheSwKKwkJIGRy
bV9tb2RlX3ZyZWZyZXNoKGN0eC0+ZGVzYy0+bW9kZSksCisJCSBtaXBpX2RzaV9waXhlbF9mb3Jt
YXRfdG9fYnBwKGRzaS0+Zm9ybWF0KSwgZHNpLT5sYW5lcyk7CiAKIAlzdDc3MDNfZGVidWdmc19p
bml0KGN0eCk7CiAJcmV0dXJuIDA7CkBAIC02MDMsMTMgKzU5MSwxMSBAQCBzdGF0aWMgdm9pZCBz
dDc3MDNfc2h1dGRvd24oc3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpKQogCiAJcmV0ID0gZHJt
X3BhbmVsX3VucHJlcGFyZSgmY3R4LT5wYW5lbCk7CiAJaWYgKHJldCA8IDApCi0JCURSTV9ERVZf
RVJST1IoJmRzaS0+ZGV2LCAiRmFpbGVkIHRvIHVucHJlcGFyZSBwYW5lbDogJWRcbiIsCi0JCQkg
ICAgICByZXQpOworCQlkZXZfZXJyKCZkc2ktPmRldiwgIkZhaWxlZCB0byB1bnByZXBhcmUgcGFu
ZWw6ICVkXG4iLCByZXQpOwogCiAJcmV0ID0gZHJtX3BhbmVsX2Rpc2FibGUoJmN0eC0+cGFuZWwp
OwogCWlmIChyZXQgPCAwKQotCQlEUk1fREVWX0VSUk9SKCZkc2ktPmRldiwgIkZhaWxlZCB0byBk
aXNhYmxlIHBhbmVsOiAlZFxuIiwKLQkJCSAgICAgIHJldCk7CisJCWRldl9lcnIoJmRzaS0+ZGV2
LCAiRmFpbGVkIHRvIGRpc2FibGUgcGFuZWw6ICVkXG4iLCByZXQpOwogfQogCiBzdGF0aWMgaW50
IHN0NzcwM19yZW1vdmUoc3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpKQpAQCAtNjIxLDggKzYw
Nyw3IEBAIHN0YXRpYyBpbnQgc3Q3NzAzX3JlbW92ZShzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpk
c2kpCiAKIAlyZXQgPSBtaXBpX2RzaV9kZXRhY2goZHNpKTsKIAlpZiAocmV0IDwgMCkKLQkJRFJN
X0RFVl9FUlJPUigmZHNpLT5kZXYsICJGYWlsZWQgdG8gZGV0YWNoIGZyb20gRFNJIGhvc3Q6ICVk
XG4iLAotCQkJICAgICAgcmV0KTsKKwkJZGV2X2VycigmZHNpLT5kZXYsICJGYWlsZWQgdG8gZGV0
YWNoIGZyb20gRFNJIGhvc3Q6ICVkXG4iLCByZXQpOwogCiAJZHJtX3BhbmVsX3JlbW92ZSgmY3R4
LT5wYW5lbCk7CiAKLS0gCjIuMjUuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZHJpLWRldmVsCg==
