Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C9238A8391
	for <lists+dri-devel@lfdr.de>; Wed,  4 Sep 2019 15:19:10 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8633289B9F;
	Wed,  4 Sep 2019 13:19:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A8AA789B65;
 Wed,  4 Sep 2019 13:19:06 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 04 Sep 2019 06:19:06 -0700
X-IronPort-AV: E=Sophos;i="5.64,467,1559545200"; d="scan'208";a="176940991"
Received: from jnikula-mobl3.fi.intel.com (HELO localhost) ([10.237.66.161])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 04 Sep 2019 06:19:02 -0700
From: Jani Nikula <jani.nikula@linux.intel.com>
To: Baolin Wang <baolin.wang@linaro.org>, stable@vger.kernel.org,
 chris@chris-wilson.co.uk, airlied@linux.ie
Subject: Re: [BACKPORT 4.14.y 1/8] drm/i915/fbdev: Actually configure untiled
 displays
In-Reply-To: <5723d9006de706582fb46f9e1e3eb8ce168c2126.1567492316.git.baolin.wang@linaro.org>
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
References: <cover.1567492316.git.baolin.wang@linaro.org>
 <5723d9006de706582fb46f9e1e3eb8ce168c2126.1567492316.git.baolin.wang@linaro.org>
Date: Wed, 04 Sep 2019 16:18:59 +0300
Message-ID: <878sr442t8.fsf@intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: vincent.guittot@linaro.org, arnd@arndb.de, baolin.wang@linaro.org,
 intel-gfx@lists.freedesktop.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, orsonzhai@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCAwMyBTZXAgMjAxOSwgQmFvbGluIFdhbmcgPGJhb2xpbi53YW5nQGxpbmFyby5vcmc+
IHdyb3RlOgo+IEZyb206IENocmlzIFdpbHNvbiA8Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgo+
Cj4gSWYgd2Ugc2tpcHBlZCBhbGwgdGhlIGNvbm5lY3RvcnMgdGhhdCB3ZXJlIG5vdCBwYXJ0IG9m
IGEgdGlsZSwgd2Ugd291bGQKPiBsZWF2ZSBjb25uX3NlcT0wIGFuZCBjb25uX2NvbmZpZ3VyZWQ9
MCwgY29udmluY2luZyBvdXJzZWx2ZXMgdGhhdCB3ZQo+IGhhZCBzdGFnbmF0ZWQgaW4gb3VyIGNv
bmZpZ3VyYXRpb24gYXR0ZW1wdHMuIEF2b2lkIHRoaXMgc2l0dWF0aW9uIGJ5Cj4gc3RhcnRpbmcg
Y29ubl9zZXE9QUxMX0NPTk5FQ1RPUlMsIGFuZCByZXBlYXRpbmcgdW50aWwgd2UgZmluZCBubyBt
b3JlCj4gY29ubmVjdG9ycyB0byBjb25maWd1cmUuCj4KPiBGaXhlczogNzU0YTc2NTkxYjEyICgi
ZHJtL2k5MTUvZmJkZXY6IFN0b3AgcmVwZWF0aW5nIHRpbGUgY29uZmlndXJhdGlvbiBvbiBzdGFn
bmF0aW9uIikKPiBSZXBvcnRlZC1ieTogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hv
cnN0QGxpbnV4LmludGVsLmNvbT4KPiBTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlz
QGNocmlzLXdpbHNvbi5jby51az4KPiBDYzogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFu
a2hvcnN0QGxpbnV4LmludGVsLmNvbT4KPiBSZXZpZXdlZC1ieTogTWFhcnRlbiBMYW5raG9yc3Qg
PG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KPiBMaW5rOiBodHRwczovL3BhdGNo
d29yay5mcmVlZGVza3RvcC5vcmcvcGF0Y2gvbXNnaWQvMjAxOTAyMTUxMjMwMTkuMzIyODMtMS1j
aHJpc0BjaHJpcy13aWxzb24uY28udWsKPiBDYzogPHN0YWJsZUB2Z2VyLmtlcm5lbC5vcmc+ICMg
djMuMTkrCj4gU2lnbmVkLW9mZi1ieTogQmFvbGluIFdhbmcgPGJhb2xpbi53YW5nQGxpbmFyby5v
cmc+CgpQbGVhc2UgbG9vayBpbnRvIHRoZSBzY3JpcHRzIHRvIGF2b2lkIHBpY2tpbmcgdXAgc3R1
ZmYgdGhhdCBoYXMKc3Vic2VxdWVudGx5IGJlZW4gcmV2ZXJ0ZWQ6Cgpjb21taXQgOWZhMjQ2MjU2
ZTA5ZGMzMDgyMDUyNDQwMWNkYmVlYWFkZWU5NDAyNQpBdXRob3I6IERhdmUgQWlybGllIDxhaXJs
aWVkQHJlZGhhdC5jb20+CkRhdGU6ICAgV2VkIEFwciAyNCAxMDo0Nzo1NiAyMDE5ICsxMDAwCgog
ICAgUmV2ZXJ0ICJkcm0vaTkxNS9mYmRldjogQWN0dWFsbHkgY29uZmlndXJlIHVudGlsZWQgZGlz
cGxheXMiCiAgICAKICAgIFRoaXMgcmV2ZXJ0cyBjb21taXQgZDE3OWI4OGRlYjNiZjZmZWQ0OTkx
YTMxZmQ2ZjBmMmNhZDIxZmFiNS4KICAgIAogICAgVGhpcyBjb21taXQgaXMgZG9jdW1lbnRlZCB0
byBicmVhayB1c2Vyc3BhY2UgWC5vcmcgbW9kZXNldHRpbmcgZHJpdmVyIGluIGNlcnRhaW4gY29u
ZmlndXJhdGlvbnMuCiAgICAKICAgIFRoZSBYLm9yZyBtb2Rlc2V0dGluZyB1c2Vyc3BhY2UgZHJp
dmVyIGlzIGJyb2tlbi4gTm8gZml4ZXMgYXJlIGF2YWlsYWJsZSB5ZXQuIEluIG9yZGVyIGZvciB0
aGlzIHBhdGNoIHRvIGJlIGFwcGxpZWQgaXQgZWl0aGVyIG5lZWRzIGEgY29uZmlnIG9wdGlvbiBv
ciBhIHdvcmthcm91bmQgZGV2ZWxvcGVkLgogICAgCiAgICBUaGlzIGhhcyBiZWVuIHJlcG9ydGVk
IGEgZmV3IHRpbWVzLCBzYXlpbmcgaXQncyBhIHVzZXJzcGFjZSBwcm9ibGVtIGlzIGNsZWFybHkg
YWdhaW5zdCB0aGUgcmVncmVzc2lvbiBydWxlcy4KICAgIAogICAgQnVnemlsbGE6IGh0dHBzOi8v
YnVncy5mcmVlZGVza3RvcC5vcmcvc2hvd19idWcuY2dpP2lkPTEwOTgwNgogICAgU2lnbmVkLW9m
Zi1ieTogRGF2ZSBBaXJsaWUgPGFpcmxpZWRAcmVkaGF0LmNvbT4KICAgIENjOiA8c3RhYmxlQHZn
ZXIua2VybmVsLm9yZz4gIyB2My4xOSsKCgoKQlIsCkphbmkuCgoKPiAtLS0KPiAgZHJpdmVycy9n
cHUvZHJtL2k5MTUvaW50ZWxfZmJkZXYuYyB8ICAgMTIgKysrKysrKy0tLS0tCj4gIDEgZmlsZSBj
aGFuZ2VkLCA3IGluc2VydGlvbnMoKyksIDUgZGVsZXRpb25zKC0pCj4KPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZmJkZXYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2ludGVsX2ZiZGV2LmMKPiBpbmRleCBkYTJkMzA5Li4xNGViOGEwIDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2ZiZGV2LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9mYmRldi5jCj4gQEAgLTMyNiw4ICszMjYsOCBAQCBzdGF0aWMgYm9vbCBpbnRl
bF9mYl9pbml0aWFsX2NvbmZpZyhzdHJ1Y3QgZHJtX2ZiX2hlbHBlciAqZmJfaGVscGVyLAo+ICAJ
CQkJICAgIGJvb2wgKmVuYWJsZWQsIGludCB3aWR0aCwgaW50IGhlaWdodCkKPiAgewo+ICAJc3Ry
dWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShmYl9oZWxwZXItPmRldik7
Cj4gLQl1bnNpZ25lZCBsb25nIGNvbm5fY29uZmlndXJlZCwgY29ubl9zZXEsIG1hc2s7Cj4gIAl1
bnNpZ25lZCBpbnQgY291bnQgPSBtaW4oZmJfaGVscGVyLT5jb25uZWN0b3JfY291bnQsIEJJVFNf
UEVSX0xPTkcpOwo+ICsJdW5zaWduZWQgbG9uZyBjb25uX2NvbmZpZ3VyZWQsIGNvbm5fc2VxOwo+
ICAJaW50IGksIGo7Cj4gIAlib29sICpzYXZlX2VuYWJsZWQ7Cj4gIAlib29sIGZhbGxiYWNrID0g
dHJ1ZSwgcmV0ID0gdHJ1ZTsKPiBAQCAtMzQ1LDEwICszNDUsOSBAQCBzdGF0aWMgYm9vbCBpbnRl
bF9mYl9pbml0aWFsX2NvbmZpZyhzdHJ1Y3QgZHJtX2ZiX2hlbHBlciAqZmJfaGVscGVyLAo+ICAJ
CWRybV9tb2Rlc2V0X2JhY2tvZmYoJmN0eCk7Cj4gIAo+ICAJbWVtY3B5KHNhdmVfZW5hYmxlZCwg
ZW5hYmxlZCwgY291bnQpOwo+IC0JbWFzayA9IEdFTk1BU0soY291bnQgLSAxLCAwKTsKPiArCWNv
bm5fc2VxID0gR0VOTUFTSyhjb3VudCAtIDEsIDApOwo+ICAJY29ubl9jb25maWd1cmVkID0gMDsK
PiAgcmV0cnk6Cj4gLQljb25uX3NlcSA9IGNvbm5fY29uZmlndXJlZDsKPiAgCWZvciAoaSA9IDA7
IGkgPCBjb3VudDsgaSsrKSB7Cj4gIAkJc3RydWN0IGRybV9mYl9oZWxwZXJfY29ubmVjdG9yICpm
Yl9jb25uOwo+ICAJCXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3I7Cj4gQEAgLTM2MSw3
ICszNjAsOCBAQCBzdGF0aWMgYm9vbCBpbnRlbF9mYl9pbml0aWFsX2NvbmZpZyhzdHJ1Y3QgZHJt
X2ZiX2hlbHBlciAqZmJfaGVscGVyLAo+ICAJCWlmIChjb25uX2NvbmZpZ3VyZWQgJiBCSVQoaSkp
Cj4gIAkJCWNvbnRpbnVlOwo+ICAKPiAtCQlpZiAoY29ubl9zZXEgPT0gMCAmJiAhY29ubmVjdG9y
LT5oYXNfdGlsZSkKPiArCQkvKiBGaXJzdCBwYXNzLCBvbmx5IGNvbnNpZGVyIHRpbGVkIGNvbm5l
Y3RvcnMgKi8KPiArCQlpZiAoY29ubl9zZXEgPT0gR0VOTUFTSyhjb3VudCAtIDEsIDApICYmICFj
b25uZWN0b3ItPmhhc190aWxlKQo+ICAJCQljb250aW51ZTsKPiAgCj4gIAkJaWYgKGNvbm5lY3Rv
ci0+c3RhdHVzID09IGNvbm5lY3Rvcl9zdGF0dXNfY29ubmVjdGVkKQo+IEBAIC00NjUsOCArNDY1
LDEwIEBAIHN0YXRpYyBib29sIGludGVsX2ZiX2luaXRpYWxfY29uZmlnKHN0cnVjdCBkcm1fZmJf
aGVscGVyICpmYl9oZWxwZXIsCj4gIAkJY29ubl9jb25maWd1cmVkIHw9IEJJVChpKTsKPiAgCX0K
PiAgCj4gLQlpZiAoKGNvbm5fY29uZmlndXJlZCAmIG1hc2spICE9IG1hc2sgJiYgY29ubl9jb25m
aWd1cmVkICE9IGNvbm5fc2VxKQo+ICsJaWYgKGNvbm5fY29uZmlndXJlZCAhPSBjb25uX3NlcSkg
eyAvKiByZXBlYXQgdW50aWwgbm8gbW9yZSBhcmUgZm91bmQgKi8KPiArCQljb25uX3NlcSA9IGNv
bm5fY29uZmlndXJlZDsKPiAgCQlnb3RvIHJldHJ5Owo+ICsJfQo+ICAKPiAgCS8qCj4gIAkgKiBJ
ZiB0aGUgQklPUyBkaWRuJ3QgZW5hYmxlIGV2ZXJ5dGhpbmcgaXQgY291bGQsIGZhbGwgYmFjayB0
byBoYXZlIHRoZQoKLS0gCkphbmkgTmlrdWxhLCBJbnRlbCBPcGVuIFNvdXJjZSBHcmFwaGljcyBD
ZW50ZXIKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJp
LWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
