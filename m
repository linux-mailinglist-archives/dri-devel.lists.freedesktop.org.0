Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B5010176727
	for <lists+dri-devel@lfdr.de>; Mon,  2 Mar 2020 23:28:01 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 22C286E8AC;
	Mon,  2 Mar 2020 22:27:17 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x344.google.com (mail-wm1-x344.google.com
 [IPv6:2a00:1450:4864:20::344])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 09A6D6E899
 for <dri-devel@lists.freedesktop.org>; Mon,  2 Mar 2020 22:27:15 +0000 (UTC)
Received: by mail-wm1-x344.google.com with SMTP id a132so853087wme.1
 for <dri-devel@lists.freedesktop.org>; Mon, 02 Mar 2020 14:27:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=AKngnvASun6ar0jjkj8I6yfYMT4MLE+nKW5mox4W/qg=;
 b=LF2qYGQNbJIF/096XKJGFQB75/lCNaGN8Ypgg0Xf6X7GKs/23A5C99eOy22JbPm5Vq
 zRbSRXVL3bJGdf8AjviJj6oBzZoKunGsOOthGLzpWi8cieCDECcs9yEtY+ZrDyB/eyVE
 Rh78xhn21RMA8xFjyPhDO8AsLUh7LlBAnAfLU=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=AKngnvASun6ar0jjkj8I6yfYMT4MLE+nKW5mox4W/qg=;
 b=EAX1aaGry0XLCKJSnjsSk6mxuSs4+pMFVuZbLOX1w6gfaHczMsKZHHAWIifKJ9K6hJ
 KUxzdezPbrI2fs+Z1J2RtwseOzJAvL0JjPq2LQgYg4LzENramA6n6CLcjjPZodg6k5Rz
 YYUEwJzxgrnpSbmYDBljNbe9nxqhGFQnCxeBxMrCaKZpVjT8VjTOe7mUa5zFiZ5gJEAu
 06y7CSqVpJu4CArKkS2VBCB/gtnbJeXOFP+8gbqoCSX6D6tBrjfxQI36SJINK5/iRmeX
 tjvDXXNu6218mXPltv5WUZAEWSNyyHwNnDV4zn3p9569tWrwG6UvaG+BF60EeC7Go6b9
 sUwA==
X-Gm-Message-State: ANhLgQ03dKbsRHb7Lcw43ofc0ScmwbLup6ypctqhaD41qqBJ+jbsusV6
 pRIdHNwkD7iWe0a+i4UaZEs+IChr5i8=
X-Google-Smtp-Source: ADFU+vs3PyK08Brlc0ACJTXsGe337UCrtm3qR7aGWZ7xjMcvi1X/cOoDiVep//DzSSJ7w/HPrnQ21g==
X-Received: by 2002:a1c:e143:: with SMTP id y64mr509480wmg.131.1583188033218; 
 Mon, 02 Mar 2020 14:27:13 -0800 (PST)
Received: from phenom.ffwll.local ([2a02:168:57f4:0:efd0:b9e5:5ae6:c2fa])
 by smtp.gmail.com with ESMTPSA id o18sm26114589wrv.60.2020.03.02.14.27.11
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 02 Mar 2020 14:27:12 -0800 (PST)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: DRI Development <dri-devel@lists.freedesktop.org>
Subject: [PATCH 26/51] drm: Manage drm_mode_config_init with drmm_
Date: Mon,  2 Mar 2020 23:26:06 +0100
Message-Id: <20200302222631.3861340-27-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200302222631.3861340-1-daniel.vetter@ffwll.ch>
References: <20200302222631.3861340-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Thomas Zimmermann <tzimmermann@suse.de>,
 Daniel Vetter <daniel.vetter@intel.com>, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

ZHJtX21vZGVfY29uZmlnX2NsZWFudXAgaXMgaWRlbXBvdGVudCwgc28gbm8gaGFybSBpbiBjYWxs
aW5nIHRoaXMKdHdpY2UuIFRoaXMgYWxsb3dzIHVzIHRvIGdyYWR1YWxseSBzd2l0Y2ggZHJpdmVy
cyBvdmVyIGJ5IHJlbW92aW5nCmV4cGxpY2l0IGRybV9tb2RlX2NvbmZpZ19jbGVhbnVwIGNhbGxz
LgoKV2l0aCB0aGlzIHN0ZXAgaXQncyBub3cgYWxzbyBwb3NzaWJsZSB0aGF0IChhdCBsZWFzdCBm
b3Igc2ltcGxlCmRyaXZlcnMpIGF1dG9tYXRpYyByZXNvdXJjZSBjbGVhbnVwIGNhbiBiZSBkb25l
IGNvcnJlY3RseSB3aXRob3V0IGEKZHJtX2RyaXZlci0+cmVsZWFzZSBob29rLiBUaGVyZWZvcmUg
YWxsb3cgdGhpcyBub3cgaW4KZGV2bV9kcm1fZGV2X2luaXQoKS4KCkFsc28gd2l0aCBkcm1tXyBl
eHBsaWNpdCBkcm1fZHJpdmVyLT5yZWxlYXNlIGhvb2tzIGFyZSBraW5kYSBub3QgdGhlCmJlc3Qg
b3B0aW9uOiBEcml2ZXJzIGNhbiBhbHdheXMganVzdCByZWdpc3RlciB0aGVpciBjdXJyZW50IHJl
bGVhc2UKaG9vayB3aXRoIGRybW1fYWRkX2FjdGlvbiwgYnV0IGV2ZW4gYmV0dGVyIHRoZXkgY291
bGQgc3BsaXQgdGhlbSB1cCB0bwpzaW1wbGlmeSB0aGUgdW53aW5kaW5nIGZvciB0aGUgZHJpdmVy
IGxvYWQgZmFpbHVyZSBjYXNlLiBTbyBkZXByZWNhdGUKdGhhdCBob29rIHRvIGRpc2NvdXJhZ2Ug
ZnV0dXJlIHVzZXJzLgoKdjI6IEZpeHVwIHRoZSBleGFtcGxlIGluIHRoZSBrZXJuZWxkb2MgdG9v
LgoKdjM6Ci0gRm9yIHBhcmFub2lhLCBkb3VibGUgY2hlY2sgdGhhdCBtaW5vci0+ZGV2ID09IGRl
diBpbiB0aGUgcmVsZWFzZQogIGhvb2ssIGJlY2F1c2UgSSBib3RjaGVkIHRoZSBwb2ludGVyIG1h
dGggaW4gdGhlIGRybW0gbGlicmFyeS4KLSBDYWxsIGRybV9tb2RlX2NvbmZpZ19jbGVhbnVwIHdo
ZW4gZHJtbV9hZGRfYWN0aW9uIGZhaWxzLCB3ZSdkIGJlCiAgbWlzc2luZyBzb21lIG11dGV4X2Rl
c3Ryb3kgYW5kIGlkYV9jbGVhbnVwIG90aGVyd2lzZSAoTGF1cmVudCkKCnY0OiBBZGQgYSBkcm1t
X2FkZF9hY3Rpb25fb3JfcmVzZXQgKGxpa2UgZGV2bV8gaGFzKSB0byBlbmNhcHN1bGF0ZSB0aGlz
CnBhdHRlcm4gKE5vcmFsZikuCgp2NTogRml4IG92ZXJzaWdodCBpbiB0aGUgbmV3IGRybW1fYWRk
X2FjdGlvbl9vcl9yZXNldCBtYWNybyAoTm9yYWxmKQoKdjQ6IFJldmlldyBmcm9tIFNhbToKLSBk
cm1tX21vZGVfY29uZmlnX2luaXQgd3JhcHBlciAoYWxzbyBzdWdnZXN0ZWQgYnkgVGhvbWFzKQot
IGltcHJvdmUgY29tbWl0IG1lc3NhZ2UsIGV4cGxhaW4gYmV0dGVyIHdoeSAtPnJlbGFzZSBpcyBk
ZXByZWNhdGVkCgpDYzogTGF1cmVudCBQaW5jaGFydCA8bGF1cmVudC5waW5jaGFydEBpZGVhc29u
Ym9hcmQuY29tPgpDYzogIk5vcmFsZiBUcsO4bm5lcyIgPG5vcmFsZkB0cm9ubmVzLm9yZz4KQ2M6
IFNhbSBSYXZuYm9yZyA8c2FtQHJhdm5ib3JnLm9yZz4KQ2M6IFRob21hcyBaaW1tZXJtYW5uIDx0
emltbWVybWFubkBzdXNlLmRlPgpBY2tlZC1ieTogTm9yYWxmIFRyw7hubmVzIDxub3JhbGZAdHJv
bm5lcy5vcmc+ClNpZ25lZC1vZmYtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAaW50
ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fZHJ2LmMgICAgICAgICB8IDIzICsrKysr
KystLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX21hbmFnZWQuYyAgICAgfCAx
NCArKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2RybV9tb2RlX2NvbmZpZy5jIHwgMTMg
KysrKysrKysrKysrLQogaW5jbHVkZS9kcm0vZHJtX21hbmFnZWQuaCAgICAgICAgIHwgIDcgKysr
KysrKwogaW5jbHVkZS9kcm0vZHJtX21vZGVfY29uZmlnLmggICAgIHwgMTkgKysrKysrKysrKysr
KysrKysrLQogNSBmaWxlcyBjaGFuZ2VkLCA1OCBpbnNlcnRpb25zKCspLCAxOCBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2Rydi5jIGIvZHJpdmVycy9ncHUv
ZHJtL2RybV9kcnYuYwppbmRleCBjNzA5YTBjZTAxOGMuLmE4MjcwMmQwYzJmYiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2RybV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2Ry
di5jCkBAIC05OCw2ICs5OCw4IEBAIHN0YXRpYyB2b2lkIGRybV9taW5vcl9hbGxvY19yZWxlYXNl
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEpCiAJc3RydWN0IGRybV9taW5vciAq
bWlub3IgPSBkYXRhOwogCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CiAKKwlXQVJOX09OKGRldiAhPSBt
aW5vci0+ZGV2KTsKKwogCXB1dF9kZXZpY2UobWlub3ItPmtkZXYpOwogCiAJc3Bpbl9sb2NrX2ly
cXNhdmUoJmRybV9taW5vcl9sb2NrLCBmbGFncyk7CkBAIC0yNjcsOCArMjY5LDcgQEAgdm9pZCBk
cm1fbWlub3JfcmVsZWFzZShzdHJ1Y3QgZHJtX21pbm9yICptaW5vcikKICAqCiAgKiBUaGUgZm9s
bG93aW5nIGV4YW1wbGUgc2hvd3MgYSB0eXBpY2FsIHN0cnVjdHVyZSBvZiBhIERSTSBkaXNwbGF5
IGRyaXZlci4KICAqIFRoZSBleGFtcGxlIGZvY3VzIG9uIHRoZSBwcm9iZSgpIGZ1bmN0aW9uIGFu
ZCB0aGUgb3RoZXIgZnVuY3Rpb25zIHRoYXQgaXMKLSAqIGFsbW9zdCBhbHdheXMgcHJlc2VudCBh
bmQgc2VydmVzIGFzIGEgZGVtb25zdHJhdGlvbiBvZiBkZXZtX2RybV9kZXZfaW5pdCgpCi0gKiB1
c2FnZSB3aXRoIGl0cyBhY2NvbXBhbnlpbmcgZHJtX2RyaXZlci0+cmVsZWFzZSBjYWxsYmFjay4K
KyAqIGFsbW9zdCBhbHdheXMgcHJlc2VudCBhbmQgc2VydmVzIGFzIGEgZGVtb25zdHJhdGlvbiBv
ZiBkZXZtX2RybV9kZXZfaW5pdCgpLgogICoKICAqIC4uIGNvZGUtYmxvY2s6OiBjCiAgKgpAQCAt
Mjc4LDE2ICsyNzksOCBAQCB2b2lkIGRybV9taW5vcl9yZWxlYXNlKHN0cnVjdCBkcm1fbWlub3Ig
Km1pbm9yKQogICoJCXN0cnVjdCBjbGsgKnBjbGs7CiAgKgl9OwogICoKLSAqCXN0YXRpYyB2b2lk
IGRyaXZlcl9kcm1fcmVsZWFzZShzdHJ1Y3QgZHJtX2RldmljZSAqZHJtKQotICoJewotICoJCXN0
cnVjdCBkcml2ZXJfZGV2aWNlICpwcml2ID0gY29udGFpbmVyX29mKC4uLik7Ci0gKgotICoJCWRy
bV9tb2RlX2NvbmZpZ19jbGVhbnVwKGRybSk7Ci0gKgl9Ci0gKgogICoJc3RhdGljIHN0cnVjdCBk
cm1fZHJpdmVyIGRyaXZlcl9kcm1fZHJpdmVyID0gewogICoJCVsuLi5dCi0gKgkJLnJlbGVhc2Ug
PSBkcml2ZXJfZHJtX3JlbGVhc2UsCiAgKgl9OwogICoKICAqCXN0YXRpYyBpbnQgZHJpdmVyX3By
b2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCkBAIC0zMTIsNyArMzA1LDkgQEAgdm9p
ZCBkcm1fbWlub3JfcmVsZWFzZShzdHJ1Y3QgZHJtX21pbm9yICptaW5vcikKICAqCQl9CiAgKgkJ
ZHJtbV9hZGRfZmluYWxfa2ZyZWUoZHJtLCBwcml2KTsKICAqCi0gKgkJZHJtX21vZGVfY29uZmln
X2luaXQoZHJtKTsKKyAqCQlyZXQgPSBkcm1fbW9kZV9jb25maWdfaW5pdChkcm0pOworICoJCWlm
IChyZXQpCisgKgkJCXJldHVybiByZXQ7CiAgKgogICoJCXByaXYtPnVzZXJzcGFjZV9mYWNpbmcg
PSBkcm1tX2t6YWxsb2MoLi4uLCBHRlBfS0VSTkVMKTsKICAqCQlpZiAoIXByaXYtPnVzZXJzcGFj
ZV9mYWNpbmcpCkBAIC03MTAsOCArNzA1LDcgQEAgc3RhdGljIHZvaWQgZGV2bV9kcm1fZGV2X2lu
aXRfcmVsZWFzZSh2b2lkICpkYXRhKQogICogQGRyaXZlcjogRFJNIGRyaXZlcgogICoKICAqIE1h
bmFnZWQgZHJtX2Rldl9pbml0KCkuIFRoZSBEUk0gZGV2aWNlIGluaXRpYWxpemVkIHdpdGggdGhp
cyBmdW5jdGlvbiBpcwotICogYXV0b21hdGljYWxseSBwdXQgb24gZHJpdmVyIGRldGFjaCB1c2lu
ZyBkcm1fZGV2X3B1dCgpLiBZb3UgbXVzdCBzdXBwbHkgYQotICogJmRybV9kcml2ZXIucmVsZWFz
ZSBjYWxsYmFjayB0byBjb250cm9sIHRoZSBmaW5hbGl6YXRpb24gZXhwbGljaXRseS4KKyAqIGF1
dG9tYXRpY2FsbHkgcHV0IG9uIGRyaXZlciBkZXRhY2ggdXNpbmcgZHJtX2Rldl9wdXQoKS4KICAq
CiAgKiBSRVRVUk5TOgogICogMCBvbiBzdWNjZXNzLCBvciBlcnJvciBjb2RlIG9uIGZhaWx1cmUu
CkBAIC03MjIsOSArNzE2LDYgQEAgaW50IGRldm1fZHJtX2Rldl9pbml0KHN0cnVjdCBkZXZpY2Ug
KnBhcmVudCwKIHsKIAlpbnQgcmV0OwogCi0JaWYgKFdBUk5fT04oIWRyaXZlci0+cmVsZWFzZSkp
Ci0JCXJldHVybiAtRUlOVkFMOwotCiAJcmV0ID0gZHJtX2Rldl9pbml0KGRldiwgZHJpdmVyLCBw
YXJlbnQpOwogCWlmIChyZXQpCiAJCXJldHVybiByZXQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vZHJtX21hbmFnZWQuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fbWFuYWdlZC5jCmluZGV4
IDA4ODM2MTVjMjA4OC4uOGM1ZjFmMDNjNDg1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
ZHJtX21hbmFnZWQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX21hbmFnZWQuYwpAQCAtMTQy
LDYgKzE0MiwyMCBAQCBpbnQgX19kcm1tX2FkZF9hY3Rpb24oc3RydWN0IGRybV9kZXZpY2UgKmRl
diwKIH0KIEVYUE9SVF9TWU1CT0woX19kcm1tX2FkZF9hY3Rpb24pOwogCitpbnQgX19kcm1tX2Fk
ZF9hY3Rpb25fb3JfcmVzZXQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKKwkJCSAgICAgICBkcm1y
ZXNfcmVsZWFzZV90IGFjdGlvbiwKKwkJCSAgICAgICB2b2lkICpkYXRhLCBjb25zdCBjaGFyICpu
YW1lKQoreworCWludCByZXQ7CisKKwlyZXQgPSBfX2RybW1fYWRkX2FjdGlvbihkZXYsIGFjdGlv
biwgZGF0YSwgbmFtZSk7CisJaWYgKHJldCkKKwkJYWN0aW9uKGRldiwgZGF0YSk7CisKKwlyZXR1
cm4gcmV0OworfQorRVhQT1JUX1NZTUJPTChfX2RybW1fYWRkX2FjdGlvbl9vcl9yZXNldCk7CisK
IHZvaWQgZHJtbV9yZW1vdmVfYWN0aW9uKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJCQlkcm1y
ZXNfcmVsZWFzZV90IGFjdGlvbiwKIAkJCXZvaWQgKmRhdGEpCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vZHJtX21vZGVfY29uZmlnLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX21vZGVfY29u
ZmlnLmMKaW5kZXggMDhlNmVmZjZhMTc5Li42ZjcwMDViYzU5N2YgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9kcm1fbW9kZV9jb25maWcuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX21v
ZGVfY29uZmlnLmMKQEAgLTI1LDYgKzI1LDcgQEAKICNpbmNsdWRlIDxkcm0vZHJtX2Rydi5oPgog
I2luY2x1ZGUgPGRybS9kcm1fZW5jb2Rlci5oPgogI2luY2x1ZGUgPGRybS9kcm1fZmlsZS5oPgor
I2luY2x1ZGUgPGRybS9kcm1fbWFuYWdlZC5oPgogI2luY2x1ZGUgPGRybS9kcm1fbW9kZV9jb25m
aWcuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3ByaW50Lmg+CiAjaW5jbHVkZSA8bGludXgvZG1hLXJl
c3YuaD4KQEAgLTM3Myw2ICszNzQsMTEgQEAgc3RhdGljIGludCBkcm1fbW9kZV9jcmVhdGVfc3Rh
bmRhcmRfcHJvcGVydGllcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCXJldHVybiAwOwogfQog
CitzdGF0aWMgdm9pZCBkcm1fbW9kZV9jb25maWdfaW5pdF9yZWxlYXNlKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsIHZvaWQgKnB0cikKK3sKKwlkcm1fbW9kZV9jb25maWdfY2xlYW51cChkZXYpOwor
fQorCiAvKioKICAqIGRybV9tb2RlX2NvbmZpZ19pbml0IC0gaW5pdGlhbGl6ZSBEUk0gbW9kZV9j
b25maWd1cmF0aW9uIHN0cnVjdHVyZQogICogQGRldjogRFJNIGRldmljZQpAQCAtMzg0LDggKzM5
MCwxMCBAQCBzdGF0aWMgaW50IGRybV9tb2RlX2NyZWF0ZV9zdGFuZGFyZF9wcm9wZXJ0aWVzKHN0
cnVjdCBkcm1fZGV2aWNlICpkZXYpCiAgKiBwcm9ibGVtLCBzaW5jZSB0aGlzIHNob3VsZCBoYXBw
ZW4gc2luZ2xlIHRocmVhZGVkIGF0IGluaXQgdGltZS4gSXQgaXMgdGhlCiAgKiBkcml2ZXIncyBw
cm9ibGVtIHRvIGVuc3VyZSB0aGlzIGd1YXJhbnRlZS4KICAqCisgKiBDbGVhbnVwIGlzIGF1dG9t
YXRpY2FsbHkgaGFuZGxlZCB0aHJvdWdoIHJlZ2lzdGVyaW5nIGRybV9tb2RlX2NvbmZpZ19jbGVh
bnVwCisgKiB3aXRoIGRybW1fYWRkX2FjdGlvbigpLgogICovCi12b2lkIGRybV9tb2RlX2NvbmZp
Z19pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCitpbnQgZHJtX21vZGVfY29uZmlnX2luaXQo
c3RydWN0IGRybV9kZXZpY2UgKmRldikKIHsKIAltdXRleF9pbml0KCZkZXYtPm1vZGVfY29uZmln
Lm11dGV4KTsKIAlkcm1fbW9kZXNldF9sb2NrX2luaXQoJmRldi0+bW9kZV9jb25maWcuY29ubmVj
dGlvbl9tdXRleCk7CkBAIC00NDMsNiArNDUxLDkgQEAgdm9pZCBkcm1fbW9kZV9jb25maWdfaW5p
dChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCQlkcm1fbW9kZXNldF9hY3F1aXJlX2ZpbmkoJm1v
ZGVzZXRfY3R4KTsKIAkJZG1hX3Jlc3ZfZmluaSgmcmVzdik7CiAJfQorCisJcmV0dXJuIGRybW1f
YWRkX2FjdGlvbl9vcl9yZXNldChkZXYsIGRybV9tb2RlX2NvbmZpZ19pbml0X3JlbGVhc2UsCisJ
CQkJCU5VTEwpOwogfQogRVhQT1JUX1NZTUJPTChkcm1fbW9kZV9jb25maWdfaW5pdCk7CiAKZGlm
ZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9tYW5hZ2VkLmggYi9pbmNsdWRlL2RybS9kcm1fbWFu
YWdlZC5oCmluZGV4IDJiMWJhMmFkNTU4Mi4uMWU2MjkxNDA3NTg2IDEwMDY0NAotLS0gYS9pbmNs
dWRlL2RybS9kcm1fbWFuYWdlZC5oCisrKyBiL2luY2x1ZGUvZHJtL2RybV9tYW5hZ2VkLmgKQEAg
LTE4LDYgKzE4LDEzIEBAIGludCBfX211c3RfY2hlY2sgX19kcm1tX2FkZF9hY3Rpb24oc3RydWN0
IGRybV9kZXZpY2UgKmRldiwKIAkJCQkgICBkcm1yZXNfcmVsZWFzZV90IGFjdGlvbiwKIAkJCQkg
ICB2b2lkICpkYXRhLCBjb25zdCBjaGFyICpuYW1lKTsKIAorI2RlZmluZSBkcm1tX2FkZF9hY3Rp
b25fb3JfcmVzZXQoZGV2LCBhY3Rpb24sIGRhdGEpIFwKKwlfX2RybW1fYWRkX2FjdGlvbl9vcl9y
ZXNldChkZXYsIGFjdGlvbiwgZGF0YSwgI2FjdGlvbikKKworaW50IF9fbXVzdF9jaGVjayBfX2Ry
bW1fYWRkX2FjdGlvbl9vcl9yZXNldChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAorCQkJCQkgICAg
ZHJtcmVzX3JlbGVhc2VfdCBhY3Rpb24sCisJCQkJCSAgICB2b2lkICpkYXRhLCBjb25zdCBjaGFy
ICpuYW1lKTsKKwogdm9pZCBkcm1tX3JlbW92ZV9hY3Rpb24oc3RydWN0IGRybV9kZXZpY2UgKmRl
diwKIAkJCWRybXJlc19yZWxlYXNlX3QgYWN0aW9uLAogCQkJdm9pZCAqZGF0YSk7CmRpZmYgLS1n
aXQgYS9pbmNsdWRlL2RybS9kcm1fbW9kZV9jb25maWcuaCBiL2luY2x1ZGUvZHJtL2RybV9tb2Rl
X2NvbmZpZy5oCmluZGV4IDNiY2JlMzAzMzlmMC4uYWE2Mjg4YmYwNGRmIDEwMDY0NAotLS0gYS9p
bmNsdWRlL2RybS9kcm1fbW9kZV9jb25maWcuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fbW9kZV9j
b25maWcuaApAQCAtOTI5LDcgKzkyOSwyNCBAQCBzdHJ1Y3QgZHJtX21vZGVfY29uZmlnIHsKIAlj
b25zdCBzdHJ1Y3QgZHJtX21vZGVfY29uZmlnX2hlbHBlcl9mdW5jcyAqaGVscGVyX3ByaXZhdGU7
CiB9OwogCi12b2lkIGRybV9tb2RlX2NvbmZpZ19pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYp
OworaW50IGRybV9tb2RlX2NvbmZpZ19pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOworCisv
KioKKyAqIGRybW1fbW9kZV9jb25maWdfaW5pdCAtIG1hbmFnZWQgRFJNIG1vZGVfY29uZmlndXJh
dGlvbiBzdHJ1Y3R1cmUKKyAqIAlpbml0aWFsaXphdGlvbgorICogQGRldjogRFJNIGRldmljZQor
ICoKKyAqIFRoaXMgaXMgYSBtYW5hZ2VkIHZlcnNpb24gb2YgZHJtX21vZGVfY29uZmlnX2luaXQo
KS4gVGhlIG9ubHkgZGlmZmVyZW5jZSBpcworICogdGhhdCB0aGlzIHZlcnNpb24gaXMgYW5ub3Rh
dGVkIHdpdGggX19tdXN0X2NoZWNrLCB0byBtYWtlIHN1cmUgdGhhdCBkcml2ZXJzCisgKiBjYW4g
YWN0dWFsbHkgcmVseSBvbiB0aGUgYXV0b21hdGljIGNsZWFudXAuCisgKgorICogUmV0dXJuczog
MCBvbiBzdWNjZXNzLCBuZWdhdGl2ZSBlcnJvciB2YWx1ZSBvbiBmYWlsdXJlLgorICovCitzdGF0
aWMgaW5saW5lIF9fbXVzdF9jaGVjayBpbnQgZHJtbV9tb2RlX2NvbmZpZ19pbml0KHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYpCit7CisJcmV0dXJuIGRybV9tb2RlX2NvbmZpZ19pbml0KGRldik7Cit9
CisKIHZvaWQgZHJtX21vZGVfY29uZmlnX3Jlc2V0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwog
dm9pZCBkcm1fbW9kZV9jb25maWdfY2xlYW51cChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKIAot
LSAKMi4yNC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
