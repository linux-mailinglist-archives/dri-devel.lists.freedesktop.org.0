Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E3C21232F13
	for <lists+dri-devel@lfdr.de>; Thu, 30 Jul 2020 11:00:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 68D8B6E898;
	Thu, 30 Jul 2020 09:00:30 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x543.google.com (mail-ed1-x543.google.com
 [IPv6:2a00:1450:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B2DE26E896
 for <dri-devel@lists.freedesktop.org>; Thu, 30 Jul 2020 09:00:27 +0000 (UTC)
Received: by mail-ed1-x543.google.com with SMTP id c15so9717752edj.3
 for <dri-devel@lists.freedesktop.org>; Thu, 30 Jul 2020 02:00:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=tXrZrW+eXihAG0tuy23qxy1ApNvcW7abcUQneXkK5Kc=;
 b=cVIaJ+lR8a3n4cMIQCRXzrNMdtIRb9RQqwjKlrybLlxo4aIA84py5cUctTdTnw5cmS
 VeWUT1qiplMnNCUARUY1UIc9eJigCgsUgRmTlZ/4u36ceIZw6jDOmywFb3cdxYNSRFTn
 O7sLnMShUWmWidZ0B9NZn3j3aZSgfrSIsiuJ+mfUmHeSKbqq15+u4+Tz06MdG7nA73c/
 oi07u3nl4E4bHtfVjr6Xfh3+cIkxRzZq1+BYxm6eP+nnLffs2YVK8Ty6q7JRlBe552Ph
 R9lfeI0+PP/7Y0F0Bh/EjqYPtvF49raJgS/87Y5TYlzWsSUM9KKrCDtt4VfL2nV/3qVo
 WSuw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=tXrZrW+eXihAG0tuy23qxy1ApNvcW7abcUQneXkK5Kc=;
 b=m4ay+uxVAST/ye6FqHpCszoYPLh140eYrmkCKnqcWxMSVrbE+aT6GX0KXvEW42f3cy
 0uDfCVkk88xUFjCc39LouZZ3YeXm8NAECsmTIESTgZwXy6jGjgf5T2wWDSQwAPdUdS4k
 HFFAA3SyLFgDOlG2UME/qYAlOTEO+eEtzKdtu8CgHnOfjuqD+EjMBxJVvTqa429Z8L2j
 4zFnNRRXW0ucIy10xoe8Zc9oepBhpQ2S8jev4red+ReRkOAvkgzopumTFW/WEU6/eoVF
 Oifu+5pYgTVTxVnrcnSXzrfNrgm5ZgYEWtwaT070NBoqAGPeOloeaT5G+CgwLXAQIqzD
 oixg==
X-Gm-Message-State: AOAM533zVB8aBrZQ00u3US7EbIl8fSVnv8aoLBTtrvftJt6XIGIKzZB0
 +qf4aZ0THQrDcEsJY57Nb6WiafQP
X-Google-Smtp-Source: ABdhPJyH/KOYJ87kLW+fv55FA3Cwjgj1UpgyGfEkZj0QwgSEnqcNfeulcEnzWsAJgFXGnAJgdJnPHg==
X-Received: by 2002:a05:6402:c0c:: with SMTP id
 co12mr1598070edb.384.1596099626149; 
 Thu, 30 Jul 2020 02:00:26 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:cb71:127d:d8c4:4acb])
 by smtp.gmail.com with ESMTPSA id j24sm4968238ejv.32.2020.07.30.02.00.21
 for <dri-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 30 Jul 2020 02:00:21 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 3/9] drm/radeon: stop implementing init_mem_type
Date: Thu, 30 Jul 2020 11:00:09 +0200
Message-Id: <20200730090015.17295-3-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200730090015.17295-1-christian.koenig@amd.com>
References: <20200730090015.17295-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW5zdGVhZCBqdXN0IGluaXRpYWxpemUgdGhlIG1lbW9yeSB0eXBlIHBhcmFtZXRlcnMKYmVmb3Jl
IGNhbGxpbmcgdHRtX2JvX2luaXRfbW0uCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmln
IDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+ClJldmlld2VkLWJ5OiBBbGV4IERldWNoZXIgPGFs
ZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRl
b25fdHRtLmMgfCA3MCArKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5n
ZWQsIDM1IGluc2VydGlvbnMoKyksIDM1IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9y
YWRlb25fdHRtLmMKaW5kZXggOWFiYTE4YTE0M2U3Li5iMGI1OWM1NTM3ODUgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9yYWRlb24vcmFkZW9uX3R0bS5jCkBAIC02OSw0MyArNjksNDMgQEAgc3RydWN0IHJhZGVvbl9k
ZXZpY2UgKnJhZGVvbl9nZXRfcmRldihzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldikKIHN0YXRp
YyBpbnQgcmFkZW9uX2luaXRfbWVtX3R5cGUoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsIHVp
bnQzMl90IHR5cGUsCiAJCQkJc3RydWN0IHR0bV9tZW1fdHlwZV9tYW5hZ2VyICptYW4pCiB7Ci0J
c3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXY7CisJcmV0dXJuIDA7Cit9CiAKLQlyZGV2ID0gcmFk
ZW9uX2dldF9yZGV2KGJkZXYpOworc3RhdGljIGludCByYWRlb25fdHRtX2luaXRfdnJhbShzdHJ1
Y3QgcmFkZW9uX2RldmljZSAqcmRldikKK3sKKwlzdHJ1Y3QgdHRtX21lbV90eXBlX21hbmFnZXIg
Km1hbiA9ICZyZGV2LT5tbWFuLmJkZXYubWFuW1RUTV9QTF9WUkFNXTsKIAotCXN3aXRjaCAodHlw
ZSkgewotCWNhc2UgVFRNX1BMX1NZU1RFTToKLQkJLyogU3lzdGVtIG1lbW9yeSAqLwotCQlicmVh
azsKLQljYXNlIFRUTV9QTF9UVDoKLQkJbWFuLT5mdW5jID0gJnR0bV9ib19tYW5hZ2VyX2Z1bmM7
Ci0JCW1hbi0+YXZhaWxhYmxlX2NhY2hpbmcgPSBUVE1fUExfTUFTS19DQUNISU5HOwotCQltYW4t
PmRlZmF1bHRfY2FjaGluZyA9IFRUTV9QTF9GTEFHX0NBQ0hFRDsKLQkJbWFuLT51c2VfdHQgPSB0
cnVlOworCW1hbi0+ZnVuYyA9ICZ0dG1fYm9fbWFuYWdlcl9mdW5jOworCW1hbi0+YXZhaWxhYmxl
X2NhY2hpbmcgPSBUVE1fUExfRkxBR19VTkNBQ0hFRCB8IFRUTV9QTF9GTEFHX1dDOworCW1hbi0+
ZGVmYXVsdF9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfV0M7CisKKwlyZXR1cm4gdHRtX2JvX2luaXRf
bW0oJnJkZXYtPm1tYW4uYmRldiwgVFRNX1BMX1ZSQU0sCisJCQkgICAgICByZGV2LT5tYy5yZWFs
X3ZyYW1fc2l6ZSA+PiBQQUdFX1NISUZUKTsKK30KKworc3RhdGljIGludCByYWRlb25fdHRtX2lu
aXRfZ3R0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQoreworCXN0cnVjdCB0dG1fbWVtX3R5
cGVfbWFuYWdlciAqbWFuID0gJnJkZXYtPm1tYW4uYmRldi5tYW5bVFRNX1BMX1RUXTsKKworCW1h
bi0+ZnVuYyA9ICZ0dG1fYm9fbWFuYWdlcl9mdW5jOworCW1hbi0+YXZhaWxhYmxlX2NhY2hpbmcg
PSBUVE1fUExfTUFTS19DQUNISU5HOworCW1hbi0+ZGVmYXVsdF9jYWNoaW5nID0gVFRNX1BMX0ZM
QUdfQ0FDSEVEOworCW1hbi0+dXNlX3R0ID0gdHJ1ZTsKICNpZiBJU19FTkFCTEVEKENPTkZJR19B
R1ApCi0JCWlmIChyZGV2LT5mbGFncyAmIFJBREVPTl9JU19BR1ApIHsKLQkJCWlmICghcmRldi0+
ZGRldi0+YWdwKSB7Ci0JCQkJRFJNX0VSUk9SKCJBR1AgaXMgbm90IGVuYWJsZWQgZm9yIG1lbW9y
eSB0eXBlICV1XG4iLAotCQkJCQkgICh1bnNpZ25lZCl0eXBlKTsKLQkJCQlyZXR1cm4gLUVJTlZB
TDsKLQkJCX0KLQkJCW1hbi0+YXZhaWxhYmxlX2NhY2hpbmcgPSBUVE1fUExfRkxBR19VTkNBQ0hF
RCB8Ci0JCQkJCQkgVFRNX1BMX0ZMQUdfV0M7Ci0JCQltYW4tPmRlZmF1bHRfY2FjaGluZyA9IFRU
TV9QTF9GTEFHX1dDOworCWlmIChyZGV2LT5mbGFncyAmIFJBREVPTl9JU19BR1ApIHsKKwkJaWYg
KCFyZGV2LT5kZGV2LT5hZ3ApIHsKKwkJCURSTV9FUlJPUigiQUdQIGlzIG5vdCBlbmFibGVkXG4i
KTsKKwkJCXJldHVybiAtRUlOVkFMOwogCQl9Ci0jZW5kaWYKLQkJYnJlYWs7Ci0JY2FzZSBUVE1f
UExfVlJBTToKLQkJLyogIk9uLWNhcmQiIHZpZGVvIHJhbSAqLwotCQltYW4tPmZ1bmMgPSAmdHRt
X2JvX21hbmFnZXJfZnVuYzsKLQkJbWFuLT5hdmFpbGFibGVfY2FjaGluZyA9IFRUTV9QTF9GTEFH
X1VOQ0FDSEVEIHwgVFRNX1BMX0ZMQUdfV0M7CisJCW1hbi0+YXZhaWxhYmxlX2NhY2hpbmcgPSBU
VE1fUExfRkxBR19VTkNBQ0hFRCB8CisJCQkJCSBUVE1fUExfRkxBR19XQzsKIAkJbWFuLT5kZWZh
dWx0X2NhY2hpbmcgPSBUVE1fUExfRkxBR19XQzsKLQkJYnJlYWs7Ci0JZGVmYXVsdDoKLQkJRFJN
X0VSUk9SKCJVbnN1cHBvcnRlZCBtZW1vcnkgdHlwZSAldVxuIiwgKHVuc2lnbmVkKXR5cGUpOwot
CQlyZXR1cm4gLUVJTlZBTDsKIAl9Ci0JcmV0dXJuIDA7CisjZW5kaWYKKworCXJldHVybiB0dG1f
Ym9faW5pdF9tbSgmcmRldi0+bW1hbi5iZGV2LCBUVE1fUExfVFQsCisJCQkgICAgICByZGV2LT5t
Yy5ndHRfc2l6ZSA+PiBQQUdFX1NISUZUKTsKIH0KIAogc3RhdGljIHZvaWQgcmFkZW9uX2V2aWN0
X2ZsYWdzKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCkBAIC03NzgsOCArNzc4LDggQEAg
aW50IHJhZGVvbl90dG1faW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIAkJcmV0dXJu
IHI7CiAJfQogCXJkZXYtPm1tYW4uaW5pdGlhbGl6ZWQgPSB0cnVlOwotCXIgPSB0dG1fYm9faW5p
dF9tbSgmcmRldi0+bW1hbi5iZGV2LCBUVE1fUExfVlJBTSwKLQkJCQlyZGV2LT5tYy5yZWFsX3Zy
YW1fc2l6ZSA+PiBQQUdFX1NISUZUKTsKKworCXIgPSByYWRlb25fdHRtX2luaXRfdnJhbShyZGV2
KTsKIAlpZiAocikgewogCQlEUk1fRVJST1IoIkZhaWxlZCBpbml0aWFsaXppbmcgVlJBTSBoZWFw
LlxuIik7CiAJCXJldHVybiByOwpAQCAtODA0LDggKzgwNCw4IEBAIGludCByYWRlb25fdHRtX2lu
aXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiAJfQogCURSTV9JTkZPKCJyYWRlb246ICV1
TSBvZiBWUkFNIG1lbW9yeSByZWFkeVxuIiwKIAkJICh1bnNpZ25lZCkgKHJkZXYtPm1jLnJlYWxf
dnJhbV9zaXplIC8gKDEwMjQgKiAxMDI0KSkpOwotCXIgPSB0dG1fYm9faW5pdF9tbSgmcmRldi0+
bW1hbi5iZGV2LCBUVE1fUExfVFQsCi0JCQkJcmRldi0+bWMuZ3R0X3NpemUgPj4gUEFHRV9TSElG
VCk7CisKKwlyID0gcmFkZW9uX3R0bV9pbml0X2d0dChyZGV2KTsKIAlpZiAocikgewogCQlEUk1f
RVJST1IoIkZhaWxlZCBpbml0aWFsaXppbmcgR1RUIGhlYXAuXG4iKTsKIAkJcmV0dXJuIHI7Ci0t
IAoyLjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
