Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 278641CE167
	for <lists+dri-devel@lfdr.de>; Mon, 11 May 2020 19:17:39 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CF0086E50E;
	Mon, 11 May 2020 17:17:30 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x441.google.com (mail-wr1-x441.google.com
 [IPv6:2a00:1450:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1DBB489E41;
 Mon, 11 May 2020 17:17:29 +0000 (UTC)
Received: by mail-wr1-x441.google.com with SMTP id x17so11987123wrt.5;
 Mon, 11 May 2020 10:17:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=4RArt/cn32mfe55R1GUfHv4ZRFgFXRrnnOd2qAnYiIs=;
 b=ClF8gB3b8IEBTTk+XiKigGhjpTfeJJDQGPZ5AT1oD2BgLlmls4awDYgEUm5qZ/jkt0
 PvkN/XndMVjS7TLXBIwS4HG1Ujm5Vco5uOUr2wCy4zjxiueRc2ds8Ntk23meje9+KiVG
 hJxzcZ39i8bx6piKJ3i2Lw3NAIGPtplfFfFqvCEcXs9IXtkuCQBmOtppG94eErMw1ogo
 /6UXulAKsayKYeavmOFGxWHVk4vcQC53JdDuh1XPaNddDmH2iiz5GJ5IG4dLb8pUxvws
 eUWEA6cod0vOA06gL93m6YVcVi/3CXiotQCgIjhT7toTYT2bjZmAoZAhp2I16vAaEYKk
 q4dQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=4RArt/cn32mfe55R1GUfHv4ZRFgFXRrnnOd2qAnYiIs=;
 b=QmML/ZZklQ1ggGjZ5/3OHrRk7lTzQUc8c24T6Ti9S2Mz1OSKYoT/dgC3KDmyy3PNVc
 EC2N3lM+KeMgxKCudgpiXJdbu49TxrhEuKUSrkbPAJc7Cv1hwFn+u4XsKFN4YUJUxlDx
 S6AlN17bTHEvLUh+f+Evlyf9+AemPo2SiaJtGQ26+TSIzlwDepnAIrcKAlHO7B8L1R3O
 BE3CwTIvN4LNJBiB/CJ9di9mf7+BgsP0O5Xkiy4iXjr1gUkSWrFS7fhCsLf6ltfI6bcA
 P9T773ESH6HHJVEK+t56vEmZd3xgAlrBAe6Oo5/FjtT62dQ6zEmZtATKYZnED4eGCaJL
 umvg==
X-Gm-Message-State: AGi0PuZCkslzDo9rqebjtUpt7AnQLloJUNg8cNehPn62yj+7GAIrAhPB
 PRa4rRlzNr5wCDbsLZAkDVgjSLOA
X-Google-Smtp-Source: APiQypJtWVGjt0kKWLVVVtd+tG65b/KvsQPU17oSDkJ/zm4KTT8slwDL0tP4KiJj1GsXUZOClgUkaw==
X-Received: by 2002:a5d:6388:: with SMTP id p8mr19629641wru.369.1589217446524; 
 Mon, 11 May 2020 10:17:26 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:d8ef:6c45:1f3c:c5dd])
 by smtp.gmail.com with ESMTPSA id x1sm9843232wrt.86.2020.05.11.10.17.25
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 11 May 2020 10:17:25 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org, amd-gfx@lists.freedesktop.org,
 nouveau@lists.freedesktop.org
Subject: [PATCH 1/3] drm/radeon: remove AGP support
Date: Mon, 11 May 2020 19:17:20 +0200
Message-Id: <20200511171722.96576-2-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200511171722.96576-1-christian.koenig@amd.com>
References: <20200511171722.96576-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QUdQIGlzIGRlcHJlY2F0ZWQgZm9yIDEwKyB5ZWFycyBub3cgYW5kIG5vdCB1c2VkIGFueSBtb3Jl
IG9uIG1vZGVybiBoYXJkd2FyZS4KCk9sZCBoYXJkd2FyZSBzaG91bGQgY29udGludWUgdG8gd29y
ayBpbiBQQ0kgbW9kZS4KClNpZ25lZC1vZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlh
bi5rb2VuaWdAYW1kLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL01ha2VmaWxlICAg
ICAgICB8ICAgNCArLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9ldmVyZ3JlZW4uYyAgICAgfCAg
IDcgLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yMTAwLmMgICAgICAgICAgfCAgMTAgKy0KIGRy
aXZlcnMvZ3B1L2RybS9yYWRlb24vcjMwMC5jICAgICAgICAgIHwgICA5IC0KIGRyaXZlcnMvZ3B1
L2RybS9yYWRlb24vcjQyMC5jICAgICAgICAgIHwgICA5IC0KIGRyaXZlcnMvZ3B1L2RybS9yYWRl
b24vcjUyMC5jICAgICAgICAgIHwgICA4IC0KIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcjYwMC5j
ICAgICAgICAgIHwgICA2IC0KIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uLmggICAgICAg
IHwgIDExIC0KIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2FncC5jICAgIHwgMjkwIC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2Rl
dmljZS5jIHwgIDIzICstCiBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9kcnYuYyAgICB8
ICAgOSAtCiBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90dG0uYyAgICB8ICAzOSAtLS0t
CiBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3J2NTE1LmMgICAgICAgICB8ICAgOSAtCiBkcml2ZXJz
L2dwdS9kcm0vcmFkZW9uL3J2NzcwLmMgICAgICAgICB8ICAgNyAtCiAxNCBmaWxlcyBjaGFuZ2Vk
LCA0IGluc2VydGlvbnMoKyksIDQzNyBkZWxldGlvbnMoLSkKIGRlbGV0ZSBtb2RlIDEwMDY0NCBk
cml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9hZ3AuYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9yYWRlb24vTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL01ha2VmaWxl
CmluZGV4IGM2OTNiMmNhMDMyOS4uNzc0MjljZmQzMDNlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vcmFkZW9uL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vTWFrZWZp
bGUKQEAgLTYxLDggKzYxLDggQEAgcmFkZW9uLXkgOj0gcmFkZW9uX2Rydi5vCiAKICMgYWRkIEtN
UyBkcml2ZXIKIHJhZGVvbi15ICs9IHJhZGVvbl9kZXZpY2UubyByYWRlb25fYXNpYy5vIHJhZGVv
bl9rbXMubyBcCi0JcmFkZW9uX2F0b21iaW9zLm8gcmFkZW9uX2FncC5vIGF0b21iaW9zX2NydGMu
byByYWRlb25fY29tYmlvcy5vIFwKLQlhdG9tLm8gcmFkZW9uX2ZlbmNlLm8gcmFkZW9uX3R0bS5v
IHJhZGVvbl9vYmplY3QubyByYWRlb25fZ2FydC5vIFwKKwlyYWRlb25fYXRvbWJpb3MubyBhdG9t
Ymlvc19jcnRjLm8gcmFkZW9uX2NvbWJpb3MubyBhdG9tLm8gXAorCXJhZGVvbl9mZW5jZS5vIHJh
ZGVvbl90dG0ubyByYWRlb25fb2JqZWN0Lm8gcmFkZW9uX2dhcnQubyBcCiAJcmFkZW9uX2xlZ2Fj
eV9jcnRjLm8gcmFkZW9uX2xlZ2FjeV9lbmNvZGVycy5vIHJhZGVvbl9jb25uZWN0b3JzLm8gXAog
CXJhZGVvbl9lbmNvZGVycy5vIHJhZGVvbl9kaXNwbGF5Lm8gcmFkZW9uX2N1cnNvci5vIHJhZGVv
bl9pMmMubyBcCiAJcmFkZW9uX2Nsb2Nrcy5vIHJhZGVvbl9mYi5vIHJhZGVvbl9nZW0ubyByYWRl
b25fcmluZy5vIHJhZGVvbl9pcnFfa21zLm8gXApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3JhZGVvbi9ldmVyZ3JlZW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vZXZlcmdyZWVuLmMK
aW5kZXggMTRkOTBkYzM3NmU3Li42NmIzZDlhMmM2ZGQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9yYWRlb24vZXZlcmdyZWVuLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9ldmVy
Z3JlZW4uYwpAQCAtNTIxNiwxMiArNTIxNiw2IEBAIGludCBldmVyZ3JlZW5faW5pdChzdHJ1Y3Qg
cmFkZW9uX2RldmljZSAqcmRldikKIAlyID0gcmFkZW9uX2ZlbmNlX2RyaXZlcl9pbml0KHJkZXYp
OwogCWlmIChyKQogCQlyZXR1cm4gcjsKLQkvKiBpbml0aWFsaXplIEFHUCAqLwotCWlmIChyZGV2
LT5mbGFncyAmIFJBREVPTl9JU19BR1ApIHsKLQkJciA9IHJhZGVvbl9hZ3BfaW5pdChyZGV2KTsK
LQkJaWYgKHIpCi0JCQlyYWRlb25fYWdwX2Rpc2FibGUocmRldik7Ci0JfQogCS8qIGluaXRpYWxp
emUgbWVtb3J5IGNvbnRyb2xsZXIgKi8KIAlyID0gZXZlcmdyZWVuX21jX2luaXQocmRldik7CiAJ
aWYgKHIpCkBAIC01MzE1LDcgKzUzMDksNiBAQCB2b2lkIGV2ZXJncmVlbl9maW5pKHN0cnVjdCBy
YWRlb25fZGV2aWNlICpyZGV2KQogCXI2MDBfdnJhbV9zY3JhdGNoX2ZpbmkocmRldik7CiAJcmFk
ZW9uX2dlbV9maW5pKHJkZXYpOwogCXJhZGVvbl9mZW5jZV9kcml2ZXJfZmluaShyZGV2KTsKLQly
YWRlb25fYWdwX2ZpbmkocmRldik7CiAJcmFkZW9uX2JvX2ZpbmkocmRldik7CiAJcmFkZW9uX2F0
b21iaW9zX2ZpbmkocmRldik7CiAJa2ZyZWUocmRldi0+Ymlvcyk7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vcmFkZW9uL3IxMDAuYyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcjEwMC5j
CmluZGV4IDI0YzhkYjY3MzkzMS4uMzIwYjFiNDBhMzBhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vcmFkZW9uL3IxMDAuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3IxMDAuYwpA
QCAtMzM4Miw3ICszMzgyLDcgQEAgdm9pZCByMTAwX2JhbmR3aWR0aF91cGRhdGUoc3RydWN0IHJh
ZGVvbl9kZXZpY2UgKnJkZXYpCiAKIAlpZiAocmRldi0+ZmxhZ3MgJiBSQURFT05fSVNfQUdQKSB7
CiAJCWZpeGVkMjBfMTIgYWdwbW9kZV9mZjsKLQkJYWdwbW9kZV9mZi5mdWxsID0gZGZpeGVkX2Nv
bnN0KHJhZGVvbl9hZ3Btb2RlKTsKKwkJYWdwbW9kZV9mZi5mdWxsID0gZGZpeGVkX2NvbnN0KDAp
OwogCQl0ZW1wX2ZmLmZ1bGwgPSBkZml4ZWRfY29uc3RfNjY2KDE2KTsKIAkJc2Nsa19lZmZfZmYu
ZnVsbCAtPSBkZml4ZWRfbXVsKGFncG1vZGVfZmYsIHRlbXBfZmYpOwogCX0KQEAgLTM5OTIsNyAr
Mzk5Miw2IEBAIHZvaWQgcjEwMF9maW5pKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQogCXJh
ZGVvbl9nZW1fZmluaShyZGV2KTsKIAlpZiAocmRldi0+ZmxhZ3MgJiBSQURFT05fSVNfUENJKQog
CQlyMTAwX3BjaV9nYXJ0X2ZpbmkocmRldik7Ci0JcmFkZW9uX2FncF9maW5pKHJkZXYpOwogCXJh
ZGVvbl9pcnFfa21zX2ZpbmkocmRldik7CiAJcmFkZW9uX2ZlbmNlX2RyaXZlcl9maW5pKHJkZXYp
OwogCXJhZGVvbl9ib19maW5pKHJkZXYpOwpAQCAtNDA2OCwxMyArNDA2Nyw2IEBAIGludCByMTAw
X2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiAJcjEwMF9lcnJhdGEocmRldik7CiAJ
LyogSW5pdGlhbGl6ZSBjbG9ja3MgKi8KIAlyYWRlb25fZ2V0X2Nsb2NrX2luZm8ocmRldi0+ZGRl
dik7Ci0JLyogaW5pdGlhbGl6ZSBBR1AgKi8KLQlpZiAocmRldi0+ZmxhZ3MgJiBSQURFT05fSVNf
QUdQKSB7Ci0JCXIgPSByYWRlb25fYWdwX2luaXQocmRldik7Ci0JCWlmIChyKSB7Ci0JCQlyYWRl
b25fYWdwX2Rpc2FibGUocmRldik7Ci0JCX0KLQl9CiAJLyogaW5pdGlhbGl6ZSBWUkFNICovCiAJ
cjEwMF9tY19pbml0KHJkZXYpOwogCS8qIEZlbmNlIGRyaXZlciAqLwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yMzAwLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3IzMDAu
YwppbmRleCAzYjdlYWQ1YmU1YmYuLmFmZDY4ODYyOWNmOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3JhZGVvbi9yMzAwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yMzAwLmMK
QEAgLTE0OTgsNyArMTQ5OCw2IEBAIHZvaWQgcjMwMF9maW5pKHN0cnVjdCByYWRlb25fZGV2aWNl
ICpyZGV2KQogCQlydjM3MF9wY2llX2dhcnRfZmluaShyZGV2KTsKIAlpZiAocmRldi0+ZmxhZ3Mg
JiBSQURFT05fSVNfUENJKQogCQlyMTAwX3BjaV9nYXJ0X2ZpbmkocmRldik7Ci0JcmFkZW9uX2Fn
cF9maW5pKHJkZXYpOwogCXJhZGVvbl9pcnFfa21zX2ZpbmkocmRldik7CiAJcmFkZW9uX2ZlbmNl
X2RyaXZlcl9maW5pKHJkZXYpOwogCXJhZGVvbl9ib19maW5pKHJkZXYpOwpAQCAtMTU0NywxMyAr
MTU0Niw2IEBAIGludCByMzAwX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiAJcjMw
MF9lcnJhdGEocmRldik7CiAJLyogSW5pdGlhbGl6ZSBjbG9ja3MgKi8KIAlyYWRlb25fZ2V0X2Ns
b2NrX2luZm8ocmRldi0+ZGRldik7Ci0JLyogaW5pdGlhbGl6ZSBBR1AgKi8KLQlpZiAocmRldi0+
ZmxhZ3MgJiBSQURFT05fSVNfQUdQKSB7Ci0JCXIgPSByYWRlb25fYWdwX2luaXQocmRldik7Ci0J
CWlmIChyKSB7Ci0JCQlyYWRlb25fYWdwX2Rpc2FibGUocmRldik7Ci0JCX0KLQl9CiAJLyogaW5p
dGlhbGl6ZSBtZW1vcnkgY29udHJvbGxlciAqLwogCXIzMDBfbWNfaW5pdChyZGV2KTsKIAkvKiBG
ZW5jZSBkcml2ZXIgKi8KQEAgLTE1OTIsNyArMTU4NCw2IEBAIGludCByMzAwX2luaXQoc3RydWN0
IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiAJCQlydjM3MF9wY2llX2dhcnRfZmluaShyZGV2KTsKIAkJ
aWYgKHJkZXYtPmZsYWdzICYgUkFERU9OX0lTX1BDSSkKIAkJCXIxMDBfcGNpX2dhcnRfZmluaShy
ZGV2KTsKLQkJcmFkZW9uX2FncF9maW5pKHJkZXYpOwogCQlyZGV2LT5hY2NlbF93b3JraW5nID0g
ZmFsc2U7CiAJfQogCXJldHVybiAwOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVv
bi9yNDIwLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3I0MjAuYwppbmRleCAxZDRjMDRlMGE0
NDkuLjNjYjMzN2RhY2Q1NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yNDIw
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yNDIwLmMKQEAgLTM2Niw3ICszNjYsNiBA
QCB2b2lkIHI0MjBfZmluaShzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIAkJcnYzNzBfcGNp
ZV9nYXJ0X2ZpbmkocmRldik7CiAJaWYgKHJkZXYtPmZsYWdzICYgUkFERU9OX0lTX1BDSSkKIAkJ
cjEwMF9wY2lfZ2FydF9maW5pKHJkZXYpOwotCXJhZGVvbl9hZ3BfZmluaShyZGV2KTsKIAlyYWRl
b25faXJxX2ttc19maW5pKHJkZXYpOwogCXJhZGVvbl9mZW5jZV9kcml2ZXJfZmluaShyZGV2KTsK
IAlyYWRlb25fYm9fZmluaShyZGV2KTsKQEAgLTQxOSwxMyArNDE4LDYgQEAgaW50IHI0MjBfaW5p
dChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIAogCS8qIEluaXRpYWxpemUgY2xvY2tzICov
CiAJcmFkZW9uX2dldF9jbG9ja19pbmZvKHJkZXYtPmRkZXYpOwotCS8qIGluaXRpYWxpemUgQUdQ
ICovCi0JaWYgKHJkZXYtPmZsYWdzICYgUkFERU9OX0lTX0FHUCkgewotCQlyID0gcmFkZW9uX2Fn
cF9pbml0KHJkZXYpOwotCQlpZiAocikgewotCQkJcmFkZW9uX2FncF9kaXNhYmxlKHJkZXYpOwot
CQl9Ci0JfQogCS8qIGluaXRpYWxpemUgbWVtb3J5IGNvbnRyb2xsZXIgKi8KIAlyMzAwX21jX2lu
aXQocmRldik7CiAJcjQyMF9kZWJ1Z2ZzKHJkZXYpOwpAQCAtNDcwLDcgKzQ2Miw2IEBAIGludCBy
NDIwX2luaXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiAJCQlydjM3MF9wY2llX2dhcnRf
ZmluaShyZGV2KTsKIAkJaWYgKHJkZXYtPmZsYWdzICYgUkFERU9OX0lTX1BDSSkKIAkJCXIxMDBf
cGNpX2dhcnRfZmluaShyZGV2KTsKLQkJcmFkZW9uX2FncF9maW5pKHJkZXYpOwogCQlyZGV2LT5h
Y2NlbF93b3JraW5nID0gZmFsc2U7CiAJfQogCXJldHVybiAwOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL3JhZGVvbi9yNTIwLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3I1MjAuYwpp
bmRleCBmYzc4ZTY0YWU3MjcuLjc2YWM4N2Q3MjQwNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL3JhZGVvbi9yNTIwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yNTIwLmMKQEAg
LTI4OCwxMyArMjg4LDYgQEAgaW50IHI1MjBfaW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRl
dikKIAl9CiAJLyogSW5pdGlhbGl6ZSBjbG9ja3MgKi8KIAlyYWRlb25fZ2V0X2Nsb2NrX2luZm8o
cmRldi0+ZGRldik7Ci0JLyogaW5pdGlhbGl6ZSBBR1AgKi8KLQlpZiAocmRldi0+ZmxhZ3MgJiBS
QURFT05fSVNfQUdQKSB7Ci0JCXIgPSByYWRlb25fYWdwX2luaXQocmRldik7Ci0JCWlmIChyKSB7
Ci0JCQlyYWRlb25fYWdwX2Rpc2FibGUocmRldik7Ci0JCX0KLQl9CiAJLyogaW5pdGlhbGl6ZSBt
ZW1vcnkgY29udHJvbGxlciAqLwogCXI1MjBfbWNfaW5pdChyZGV2KTsKIAlydjUxNV9kZWJ1Z2Zz
KHJkZXYpOwpAQCAtMzI0LDcgKzMxNyw2IEBAIGludCByNTIwX2luaXQoc3RydWN0IHJhZGVvbl9k
ZXZpY2UgKnJkZXYpCiAJCXJhZGVvbl9pYl9wb29sX2ZpbmkocmRldik7CiAJCXJhZGVvbl9pcnFf
a21zX2ZpbmkocmRldik7CiAJCXJ2MzcwX3BjaWVfZ2FydF9maW5pKHJkZXYpOwotCQlyYWRlb25f
YWdwX2ZpbmkocmRldik7CiAJCXJkZXYtPmFjY2VsX3dvcmtpbmcgPSBmYWxzZTsKIAl9CiAJcmV0
dXJuIDA7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3I2MDAuYyBiL2RyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcjYwMC5jCmluZGV4IGQ5YTMzY2E3NjhmMy4uNGE1YWMxNTg5M2My
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3I2MDAuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vcmFkZW9uL3I2MDAuYwpAQCAtMzI4NiwxMSArMzI4Niw2IEBAIGludCByNjAwX2lu
aXQoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiAJciA9IHJhZGVvbl9mZW5jZV9kcml2ZXJf
aW5pdChyZGV2KTsKIAlpZiAocikKIAkJcmV0dXJuIHI7Ci0JaWYgKHJkZXYtPmZsYWdzICYgUkFE
RU9OX0lTX0FHUCkgewotCQlyID0gcmFkZW9uX2FncF9pbml0KHJkZXYpOwotCQlpZiAocikKLQkJ
CXJhZGVvbl9hZ3BfZGlzYWJsZShyZGV2KTsKLQl9CiAJciA9IHI2MDBfbWNfaW5pdChyZGV2KTsK
IAlpZiAocikKIAkJcmV0dXJuIHI7CkBAIC0zMzUzLDcgKzMzNDgsNiBAQCB2b2lkIHI2MDBfZmlu
aShzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIAlyYWRlb25faXJxX2ttc19maW5pKHJkZXYp
OwogCXI2MDBfcGNpZV9nYXJ0X2ZpbmkocmRldik7CiAJcjYwMF92cmFtX3NjcmF0Y2hfZmluaShy
ZGV2KTsKLQlyYWRlb25fYWdwX2ZpbmkocmRldik7CiAJcmFkZW9uX2dlbV9maW5pKHJkZXYpOwog
CXJhZGVvbl9mZW5jZV9kcml2ZXJfZmluaShyZGV2KTsKIAlyYWRlb25fYm9fZmluaShyZGV2KTsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uLmggYi9kcml2ZXJzL2dw
dS9kcm0vcmFkZW9uL3JhZGVvbi5oCmluZGV4IDMwZTMyYWRjMWZjNi4uMzc3ZTE0MDNiMTM0IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbi5oCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9yYWRlb24vcmFkZW9uLmgKQEAgLTkxLDcgKzkxLDYgQEAgZXh0ZXJuIGludCByYWRl
b25fbm9fd2I7CiBleHRlcm4gaW50IHJhZGVvbl9tb2Rlc2V0OwogZXh0ZXJuIGludCByYWRlb25f
ZHluY2xrczsKIGV4dGVybiBpbnQgcmFkZW9uX3I0eHhfYXRvbTsKLWV4dGVybiBpbnQgcmFkZW9u
X2FncG1vZGU7CiBleHRlcm4gaW50IHJhZGVvbl92cmFtX2xpbWl0OwogZXh0ZXJuIGludCByYWRl
b25fZ2FydF9zaXplOwogZXh0ZXJuIGludCByYWRlb25fYmVuY2htYXJraW5nOwpAQCAtMTExNiwx
NiArMTExNSw2IEBAIHR5cGVkZWYgaW50ICgqcmFkZW9uX3BhY2tldDBfY2hlY2tfdCkoc3RydWN0
IHJhZGVvbl9jc19wYXJzZXIgKnAsCiB0eXBlZGVmIGludCAoKnJhZGVvbl9wYWNrZXQzX2NoZWNr
X3QpKHN0cnVjdCByYWRlb25fY3NfcGFyc2VyICpwLAogCQkJCSAgICAgIHN0cnVjdCByYWRlb25f
Y3NfcGFja2V0ICpwa3QpOwogCi0KLS8qCi0gKiBBR1AKLSAqLwotaW50IHJhZGVvbl9hZ3BfaW5p
dChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldik7Ci12b2lkIHJhZGVvbl9hZ3BfcmVzdW1lKHN0
cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KTsKLXZvaWQgcmFkZW9uX2FncF9zdXNwZW5kKHN0cnVj
dCByYWRlb25fZGV2aWNlICpyZGV2KTsKLXZvaWQgcmFkZW9uX2FncF9maW5pKHN0cnVjdCByYWRl
b25fZGV2aWNlICpyZGV2KTsKLQotCiAvKgogICogV3JpdGViYWNrCiAgKi8KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2FncC5jIGIvZHJpdmVycy9ncHUvZHJtL3Jh
ZGVvbi9yYWRlb25fYWdwLmMKZGVsZXRlZCBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDBhY2E3YmRm
NTRjNy4uMDAwMDAwMDAwMDAwCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2Fn
cC5jCisrKyAvZGV2L251bGwKQEAgLTEsMjkwICswLDAgQEAKLS8qCi0gKiBDb3B5cmlnaHQgMjAw
OCBSZWQgSGF0IEluYy4KLSAqIENvcHlyaWdodCAyMDA5IEplcm9tZSBHbGlzc2UuCi0gKgotICog
UGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJz
b24gb2J0YWluaW5nIGEKLSAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBk
b2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCi0gKiB0byBkZWFsIGluIHRoZSBT
b2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9u
Ci0gKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlz
dHJpYnV0ZSwgc3VibGljZW5zZSwKLSAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdh
cmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQotICogU29mdHdhcmUgaXMgZnVy
bmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKLSAq
Ci0gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGlj
ZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgotICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0
aW9ucyBvZiB0aGUgU29mdHdhcmUuCi0gKgotICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJB
UyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKLSAqIElNUExJ
RUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hB
TlRBQklMSVRZLAotICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklO
RlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMCi0gKiBUSEUgQ09QWVJJR0hUIEhPTERFUihT
KSBPUiBBVVRIT1IoUykgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IKLSAqIE9U
SEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Ig
T1RIRVJXSVNFLAotICogQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRI
IFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SCi0gKiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09G
VFdBUkUuCi0gKgotICogQXV0aG9yczoKLSAqICAgIERhdmUgQWlybGllCi0gKiAgICBKZXJvbWUg
R2xpc3NlIDxnbGlzc2VAZnJlZWRlc2t0b3Aub3JnPgotICovCi0KLSNpbmNsdWRlIDxsaW51eC9w
Y2kuaD4KLQotI2luY2x1ZGUgPGRybS9kcm1fYWdwc3VwcG9ydC5oPgotI2luY2x1ZGUgPGRybS9k
cm1fZGV2aWNlLmg+Ci0jaW5jbHVkZSA8ZHJtL3JhZGVvbl9kcm0uaD4KLQotI2luY2x1ZGUgInJh
ZGVvbi5oIgotCi0jaWYgSVNfRU5BQkxFRChDT05GSUdfQUdQKQotCi1zdHJ1Y3QgcmFkZW9uX2Fn
cG1vZGVfcXVpcmsgewotCXUzMiBob3N0YnJpZGdlX3ZlbmRvcjsKLQl1MzIgaG9zdGJyaWRnZV9k
ZXZpY2U7Ci0JdTMyIGNoaXBfdmVuZG9yOwotCXUzMiBjaGlwX2RldmljZTsKLQl1MzIgc3Vic3lz
X3ZlbmRvcjsKLQl1MzIgc3Vic3lzX2RldmljZTsKLQl1MzIgZGVmYXVsdF9tb2RlOwotfTsKLQot
c3RhdGljIHN0cnVjdCByYWRlb25fYWdwbW9kZV9xdWlyayByYWRlb25fYWdwbW9kZV9xdWlya19s
aXN0W10gPSB7Ci0JLyogSW50ZWwgRTc1MDUgTWVtb3J5IENvbnRyb2xsZXIgSHViIC8gUlYzNTAg
QVIgW1JhZGVvbiA5NjAwWFRdIE5lZWRzIEFHUE1vZGUgNCAoZGViICM1MTUzMjYpICovCi0JeyBQ
Q0lfVkVORE9SX0lEX0lOVEVMLCAweDI1NTAsIFBDSV9WRU5ET1JfSURfQVRJLCAweDQxNTIsIDB4
MTQ1OCwgMHg0MDM4LCA0fSwKLQkvKiBJbnRlbCA4Mjg2NUcvUEUvUCBEUkFNIENvbnRyb2xsZXIv
SG9zdC1IdWIgLyBNb2JpbGl0eSA5ODAwIE5lZWRzIEFHUE1vZGUgNCAoZGViICM0NjI1OTApICov
Ci0JeyBQQ0lfVkVORE9SX0lEX0lOVEVMLCAweDI1NzAsIFBDSV9WRU5ET1JfSURfQVRJLCAweDRh
NGUsIFBDSV9WRU5ET1JfSURfREVMTCwgMHg1MTA2LCA0fSwKLQkvKiBJbnRlbCA4Mjg2NUcvUEUv
UCBEUkFNIENvbnRyb2xsZXIvSG9zdC1IdWIgLyBSVjI4MCBbUmFkZW9uIDkyMDAgU0VdIE5lZWRz
IEFHUE1vZGUgNCAobHAgIzMwMDMwNCkgKi8KLQl7IFBDSV9WRU5ET1JfSURfSU5URUwsIDB4MjU3
MCwgUENJX1ZFTkRPUl9JRF9BVEksIDB4NTk2NCwKLQkJMHgxNDhjLCAweDIwNzMsIDR9LAotCS8q
IEludGVsIDgyODU1UE0gUHJvY2Vzc29yIHRvIEkvTyBDb250cm9sbGVyIC8gTW9iaWxpdHkgTTYg
TFkgTmVlZHMgQUdQTW9kZSAxIChkZWIgIzQ2NzIzNSkgKi8KLQl7IFBDSV9WRU5ET1JfSURfSU5U
RUwsIDB4MzM0MCwgUENJX1ZFTkRPUl9JRF9BVEksIDB4NGM1OSwKLQkJUENJX1ZFTkRPUl9JRF9J
Qk0sIDB4MDUyZiwgMX0sCi0JLyogSW50ZWwgODI4NTVQTSBob3N0IGJyaWRnZSAvIE1vYmlsaXR5
IDk2MDAgTTEwIFJWMzUwIE5lZWRzIEFHUE1vZGUgMSAobHAgIzE5NTA1MSkgKi8KLQl7IFBDSV9W
RU5ET1JfSURfSU5URUwsIDB4MzM0MCwgUENJX1ZFTkRPUl9JRF9BVEksIDB4NGU1MCwKLQkJUENJ
X1ZFTkRPUl9JRF9JQk0sIDB4MDU1MCwgMX0sCi0JLyogSW50ZWwgODI4NTVQTSBob3N0IGJyaWRn
ZSAvIFJWMjUwL005IEdMIFtNb2JpbGl0eSBGaXJlR0wgOTAwMC9SYWRlb24gOTAwMF0gbmVlZHMg
QUdQTW9kZSAxIChUaGlua3BhZCBUNDBwKSAqLwotCXsgUENJX1ZFTkRPUl9JRF9JTlRFTCwgMHgz
MzQwLCBQQ0lfVkVORE9SX0lEX0FUSSwgMHg0YzY2LAotCQlQQ0lfVkVORE9SX0lEX0lCTSwgMHgw
NTRkLCAxfSwKLQkvKiBJbnRlbCA4Mjg1NVBNIGhvc3QgYnJpZGdlIC8gTW9iaWxpdHkgTTcgbmVl
ZHMgQUdQTW9kZSAxICovCi0JeyBQQ0lfVkVORE9SX0lEX0lOVEVMLCAweDMzNDAsIFBDSV9WRU5E
T1JfSURfQVRJLCAweDRjNTcsCi0JCVBDSV9WRU5ET1JfSURfSUJNLCAweDA1MzAsIDF9LAotCS8q
IEludGVsIDgyODU1UE0gaG9zdCBicmlkZ2UgLyBGaXJlR0wgTW9iaWxpdHkgVDIgUlYzNTAgTmVl
ZHMgQUdQTW9kZSAyIChmZG8gIzIwNjQ3KSAqLwotCXsgUENJX1ZFTkRPUl9JRF9JTlRFTCwgMHgz
MzQwLCBQQ0lfVkVORE9SX0lEX0FUSSwgMHg0ZTU0LAotCQlQQ0lfVkVORE9SX0lEX0lCTSwgMHgw
NTRmLCAyfSwKLQkvKiBJbnRlbCA4Mjg1NVBNIGhvc3QgYnJpZGdlIC8gTW9iaWxpdHkgTTkrIC8g
VmFpb1BDRy1WNTA1RFggTmVlZHMgQUdQTW9kZSAyIChmZG8gIzE3OTI4KSAqLwotCXsgUENJX1ZF
TkRPUl9JRF9JTlRFTCwgMHgzMzQwLCBQQ0lfVkVORE9SX0lEX0FUSSwgMHg1YzYxLAotCQlQQ0lf
VkVORE9SX0lEX1NPTlksIDB4ODE2YiwgMn0sCi0JLyogSW50ZWwgODI4NTVQTSBQcm9jZXNzb3Ig
dG8gSS9PIENvbnRyb2xsZXIgLyBNb2JpbGl0eSBNOSsgTmVlZHMgQUdQTW9kZSA4IChwaG9yb25p
eCBmb3J1bSkgKi8KLQl7IFBDSV9WRU5ET1JfSURfSU5URUwsIDB4MzM0MCwgUENJX1ZFTkRPUl9J
RF9BVEksIDB4NWM2MSwKLQkJUENJX1ZFTkRPUl9JRF9TT05ZLCAweDgxOTUsIDh9LAotCS8qIElu
dGVsIDgyODMwIDgzMCBDaGlwc2V0IEhvc3QgQnJpZGdlIC8gTW9iaWxpdHkgTTYgTFkgTmVlZHMg
QUdQTW9kZSAyIChmZG8gIzE3MzYwKSovCi0JeyBQQ0lfVkVORE9SX0lEX0lOVEVMLCAweDM1NzUs
IFBDSV9WRU5ET1JfSURfQVRJLCAweDRjNTksCi0JCVBDSV9WRU5ET1JfSURfREVMTCwgMHgwMGUz
LCAyfSwKLQkvKiBJbnRlbCA4Mjg1Mi84Mjg1NSBob3N0IGJyaWRnZSAvIE1vYmlsaXR5IEZpcmVH
TCA5MDAwIFJWMjUwIE5lZWRzIEFHUE1vZGUgMSAobHAgIzI5NjYxNykgKi8KLQl7IFBDSV9WRU5E
T1JfSURfSU5URUwsIDB4MzU4MCwgUENJX1ZFTkRPUl9JRF9BVEksIDB4NGM2NiwKLQkJUENJX1ZF
TkRPUl9JRF9ERUxMLCAweDAxNDksIDF9LAotCS8qIEludGVsIDgyODU1UE0gaG9zdCBicmlkZ2Ug
LyBNb2JpbGl0eSBGaXJlR0wgOTAwMCBSVjI1MCBOZWVkcyBBR1BNb2RlIDEgZm9yIHN1c3BlbmQv
cmVzdW1lICovCi0JeyBQQ0lfVkVORE9SX0lEX0lOVEVMLCAweDMzNDAsIFBDSV9WRU5ET1JfSURf
QVRJLCAweDRjNjYsCi0JCVBDSV9WRU5ET1JfSURfSUJNLCAweDA1MzEsIDF9LAotCS8qIEludGVs
IDgyODUyLzgyODU1IGhvc3QgYnJpZGdlIC8gTW9iaWxpdHkgOTYwMCBNMTAgUlYzNTAgTmVlZHMg
QUdQTW9kZSAxIChkZWIgIzQ2NzQ2MCkgKi8KLQl7IFBDSV9WRU5ET1JfSURfSU5URUwsIDB4MzU4
MCwgUENJX1ZFTkRPUl9JRF9BVEksIDB4NGU1MCwKLQkJMHgxMDI1LCAweDAwNjEsIDF9LAotCS8q
IEludGVsIDgyODUyLzgyODU1IGhvc3QgYnJpZGdlIC8gTW9iaWxpdHkgOTYwMCBNMTAgUlYzNTAg
TmVlZHMgQUdQTW9kZSAxIChscCAjMjAzMDA3KSAqLwotCXsgUENJX1ZFTkRPUl9JRF9JTlRFTCwg
MHgzNTgwLCBQQ0lfVkVORE9SX0lEX0FUSSwgMHg0ZTUwLAotCQkweDEwMjUsIDB4MDA2NCwgMX0s
Ci0JLyogSW50ZWwgODI4NTIvODI4NTUgaG9zdCBicmlkZ2UgLyBNb2JpbGl0eSA5NjAwIE0xMCBS
VjM1MCBOZWVkcyBBR1BNb2RlIDEgKGxwICMxNDE1NTEpICovCi0JeyBQQ0lfVkVORE9SX0lEX0lO
VEVMLCAweDM1ODAsIFBDSV9WRU5ET1JfSURfQVRJLCAweDRlNTAsCi0JCVBDSV9WRU5ET1JfSURf
QVNVU1RFSywgMHgxOTQyLCAxfSwKLQkvKiBJbnRlbCA4Mjg1Mi84Mjg1NSBob3N0IGJyaWRnZSAv
IE1vYmlsaXR5IDk2MDAvOTcwMCBOZWVkcyBBR1BNb2RlIDEgKGRlYiAjNTEwMjA4KSAqLwotCXsg
UENJX1ZFTkRPUl9JRF9JTlRFTCwgMHgzNTgwLCBQQ0lfVkVORE9SX0lEX0FUSSwgMHg0ZTUwLAot
CQkweDEwY2YsIDB4MTI3ZiwgMX0sCi0JLyogQVNSb2NrIEs3VlQ0QSsgQUdQIDh4IC8gQVRJIFJh
ZGVvbiA5MjUwIEFHUCBOZWVkcyBBR1BNb2RlIDQgKGxwICMxMzMxOTIpICovCi0JeyAweDE4NDks
IDB4MzE4OSwgUENJX1ZFTkRPUl9JRF9BVEksIDB4NTk2MCwKLQkJMHgxNzg3LCAweDU5NjAsIDR9
LAotCS8qIFZJQSBLOE04MDAgSG9zdCBCcmlkZ2UgLyBSVjI4MCBbUmFkZW9uIDkyMDAgUFJPXSBO
ZWVkcyBBR1BNb2RlIDQgKGZkbyAjMTI1NDQpICovCi0JeyBQQ0lfVkVORE9SX0lEX1ZJQSwgMHgw
MjA0LCBQQ0lfVkVORE9SX0lEX0FUSSwgMHg1OTYwLAotCQkweDE3YWYsIDB4MjAyMCwgNH0sCi0J
LyogVklBIEtUODgwIEhvc3QgQnJpZGdlIC8gUlYzNTAgW1JhZGVvbiA5NTUwXSBOZWVkcyBBR1BN
b2RlIDQgKGZkbyAjMTk5ODEpICovCi0JeyBQQ0lfVkVORE9SX0lEX1ZJQSwgMHgwMjY5LCBQQ0lf
VkVORE9SX0lEX0FUSSwgMHg0MTUzLAotCQlQQ0lfVkVORE9SX0lEX0FTVVNURUssIDB4MDAzYywg
NH0sCi0JLyogVklBIFZUODM2MyBIb3N0IEJyaWRnZSAvIFIyMDAgUUwgW1JhZGVvbiA4NTAwXSBO
ZWVkcyBBR1BNb2RlIDIgKGxwICMxNDE1NTEpICovCi0JeyBQQ0lfVkVORE9SX0lEX1ZJQSwgMHgw
MzA1LCBQQ0lfVkVORE9SX0lEX0FUSSwgMHg1MTRjLAotCQlQQ0lfVkVORE9SX0lEX0FUSSwgMHgw
MTNhLCAyfSwKLQkvKiBWSUEgVlQ4MkM2OTNBIEhvc3QgQnJpZGdlIC8gUlYyODAgW1JhZGVvbiA5
MjAwIFBST10gTmVlZHMgQUdQTW9kZSAyIChkZWIgIzUxNTUxMikgKi8KLQl7IFBDSV9WRU5ET1Jf
SURfVklBLCAweDA2OTEsIFBDSV9WRU5ET1JfSURfQVRJLCAweDU5NjAsCi0JCVBDSV9WRU5ET1Jf
SURfQVNVU1RFSywgMHgwMDRjLCAyfSwKLQkvKiBWSUEgVlQ4MkM2OTNBIEhvc3QgQnJpZGdlIC8g
UlYyODAgW1JhZGVvbiA5MjAwIFBST10gTmVlZHMgQUdQTW9kZSAyICovCi0JeyBQQ0lfVkVORE9S
X0lEX1ZJQSwgMHgwNjkxLCBQQ0lfVkVORE9SX0lEX0FUSSwgMHg1OTYwLAotCQlQQ0lfVkVORE9S
X0lEX0FTVVNURUssIDB4MDA1NCwgMn0sCi0JLyogVklBIFZUODM3NyBIb3N0IEJyaWRnZSAvIFIy
MDAgUU0gW1JhZGVvbiA5MTAwXSBOZWVkcyBBR1BNb2RlIDQgKGRlYiAjNDYxMTQ0KSAqLwotCXsg
UENJX1ZFTkRPUl9JRF9WSUEsIDB4MzE4OSwgUENJX1ZFTkRPUl9JRF9BVEksIDB4NTE0ZCwKLQkJ
MHgxNzRiLCAweDcxNDksIDR9LAotCS8qIFZJQSBWVDgzNzcgSG9zdCBCcmlkZ2UgLyBSVjI4MCBb
UmFkZW9uIDkyMDAgUFJPXSBOZWVkcyBBR1BNb2RlIDQgKGxwICMzMTI2OTMpICovCi0JeyBQQ0lf
VkVORE9SX0lEX1ZJQSwgMHgzMTg5LCBQQ0lfVkVORE9SX0lEX0FUSSwgMHg1OTYwLAotCQkweDE0
NjIsIDB4MDM4MCwgNH0sCi0JLyogVklBIFZUODM3NyBIb3N0IEJyaWRnZSAvIFJWMjgwIE5lZWRz
IEFHUE1vZGUgNCAoYXRpIE1MKSAqLwotCXsgUENJX1ZFTkRPUl9JRF9WSUEsIDB4MzE4OSwgUENJ
X1ZFTkRPUl9JRF9BVEksIDB4NTk2NCwKLQkJMHgxNDhjLCAweDIwNzMsIDR9LAotCS8qIEFUSSBI
b3N0IEJyaWRnZSAvIFJWMjgwIFtNOStdIE5lZWRzIEFHUE1vZGUgMSAocGhvcm9uaXggZm9ydW0p
ICovCi0JeyBQQ0lfVkVORE9SX0lEX0FUSSwgMHhjYmIyLCBQQ0lfVkVORE9SX0lEX0FUSSwgMHg1
YzYxLAotCQlQQ0lfVkVORE9SX0lEX1NPTlksIDB4ODE3NSwgMX0sCi0JeyAwLCAwLCAwLCAwLCAw
LCAwLCAwIH0sCi19OwotI2VuZGlmCi0KLWludCByYWRlb25fYWdwX2luaXQoc3RydWN0IHJhZGVv
bl9kZXZpY2UgKnJkZXYpCi17Ci0jaWYgSVNfRU5BQkxFRChDT05GSUdfQUdQKQotCXN0cnVjdCBy
YWRlb25fYWdwbW9kZV9xdWlyayAqcCA9IHJhZGVvbl9hZ3Btb2RlX3F1aXJrX2xpc3Q7Ci0Jc3Ry
dWN0IGRybV9hZ3BfbW9kZSBtb2RlOwotCXN0cnVjdCBkcm1fYWdwX2luZm8gaW5mbzsKLQl1aW50
MzJfdCBhZ3Bfc3RhdHVzOwotCWludCBkZWZhdWx0X21vZGU7Ci0JYm9vbCBpc192MzsKLQlpbnQg
cmV0OwotCi0JLyogQWNxdWlyZSBBR1AuICovCi0JcmV0ID0gZHJtX2FncF9hY3F1aXJlKHJkZXYt
PmRkZXYpOwotCWlmIChyZXQpIHsKLQkJRFJNX0VSUk9SKCJVbmFibGUgdG8gYWNxdWlyZSBBR1A6
ICVkXG4iLCByZXQpOwotCQlyZXR1cm4gcmV0OwotCX0KLQotCXJldCA9IGRybV9hZ3BfaW5mbyhy
ZGV2LT5kZGV2LCAmaW5mbyk7Ci0JaWYgKHJldCkgewotCQlkcm1fYWdwX3JlbGVhc2UocmRldi0+
ZGRldik7Ci0JCURSTV9FUlJPUigiVW5hYmxlIHRvIGdldCBBR1AgaW5mbzogJWRcbiIsIHJldCk7
Ci0JCXJldHVybiByZXQ7Ci0JfQotCi0JaWYgKHJkZXYtPmRkZXYtPmFncC0+YWdwX2luZm8uYXBl
cl9zaXplIDwgMzIpIHsKLQkJZHJtX2FncF9yZWxlYXNlKHJkZXYtPmRkZXYpOwotCQlkZXZfd2Fy
bihyZGV2LT5kZXYsICJBR1AgYXBlcnR1cmUgdG9vIHNtYWxsICglenVNKSAiCi0JCQkibmVlZCBh
dCBsZWFzdCAzMk0sIGRpc2FibGluZyBBR1BcbiIsCi0JCQlyZGV2LT5kZGV2LT5hZ3AtPmFncF9p
bmZvLmFwZXJfc2l6ZSk7Ci0JCXJldHVybiAtRUlOVkFMOwotCX0KLQotCW1vZGUubW9kZSA9IGlu
Zm8ubW9kZTsKLQkvKiBjaGlwcyB3aXRoIHRoZSBhZ3AgdG8gcGNpZSBicmlkZ2UgZG9uJ3QgaGF2
ZSB0aGUgQUdQX1NUQVRVUyByZWdpc3RlcgotCSAqIEp1c3QgdXNlIHRoZSB3aGF0ZXZlciBtb2Rl
IHRoZSBob3N0IHNldHMgdXAuCi0JICovCi0JaWYgKHJkZXYtPmZhbWlseSA8PSBDSElQX1JWMzUw
KQotCQlhZ3Bfc3RhdHVzID0gKFJSRUczMihSQURFT05fQUdQX1NUQVRVUykgfCBSQURFT05fQUdQ
djNfTU9ERSkgJiBtb2RlLm1vZGU7Ci0JZWxzZQotCQlhZ3Bfc3RhdHVzID0gbW9kZS5tb2RlOwot
CWlzX3YzID0gISEoYWdwX3N0YXR1cyAmIFJBREVPTl9BR1B2M19NT0RFKTsKLQotCWlmIChpc192
MykgewotCQlkZWZhdWx0X21vZGUgPSAoYWdwX3N0YXR1cyAmIFJBREVPTl9BR1B2M184WF9NT0RF
KSA/IDggOiA0OwotCX0gZWxzZSB7Ci0JCWlmIChhZ3Bfc3RhdHVzICYgUkFERU9OX0FHUF80WF9N
T0RFKSB7Ci0JCQlkZWZhdWx0X21vZGUgPSA0OwotCQl9IGVsc2UgaWYgKGFncF9zdGF0dXMgJiBS
QURFT05fQUdQXzJYX01PREUpIHsKLQkJCWRlZmF1bHRfbW9kZSA9IDI7Ci0JCX0gZWxzZSB7Ci0J
CQlkZWZhdWx0X21vZGUgPSAxOwotCQl9Ci0JfQotCi0JLyogQXBwbHkgQUdQTW9kZSBRdWlya3Mg
Ki8KLQl3aGlsZSAocCAmJiBwLT5jaGlwX2RldmljZSAhPSAwKSB7Ci0JCWlmIChpbmZvLmlkX3Zl
bmRvciA9PSBwLT5ob3N0YnJpZGdlX3ZlbmRvciAmJgotCQkgICAgaW5mby5pZF9kZXZpY2UgPT0g
cC0+aG9zdGJyaWRnZV9kZXZpY2UgJiYKLQkJICAgIHJkZXYtPnBkZXYtPnZlbmRvciA9PSBwLT5j
aGlwX3ZlbmRvciAmJgotCQkgICAgcmRldi0+cGRldi0+ZGV2aWNlID09IHAtPmNoaXBfZGV2aWNl
ICYmCi0JCSAgICByZGV2LT5wZGV2LT5zdWJzeXN0ZW1fdmVuZG9yID09IHAtPnN1YnN5c192ZW5k
b3IgJiYKLQkJICAgIHJkZXYtPnBkZXYtPnN1YnN5c3RlbV9kZXZpY2UgPT0gcC0+c3Vic3lzX2Rl
dmljZSkgewotCQkJZGVmYXVsdF9tb2RlID0gcC0+ZGVmYXVsdF9tb2RlOwotCQl9Ci0JCSsrcDsK
LQl9Ci0KLQlpZiAocmFkZW9uX2FncG1vZGUgPiAwKSB7Ci0JCWlmICgocmFkZW9uX2FncG1vZGUg
PCAoaXNfdjMgPyA0IDogMSkpIHx8Ci0JCSAgICAocmFkZW9uX2FncG1vZGUgPiAoaXNfdjMgPyA4
IDogNCkpIHx8Ci0JCSAgICAocmFkZW9uX2FncG1vZGUgJiAocmFkZW9uX2FncG1vZGUgLSAxKSkp
IHsKLQkJCURSTV9FUlJPUigiSWxsZWdhbCBBR1AgTW9kZTogJWQgKHZhbGlkICVzKSwgbGVhdmlu
ZyBhdCAlZFxuIiwKLQkJCQkgIHJhZGVvbl9hZ3Btb2RlLCBpc192MyA/ICI0LCA4IiA6ICIxLCAy
LCA0IiwKLQkJCQkgIGRlZmF1bHRfbW9kZSk7Ci0JCQlyYWRlb25fYWdwbW9kZSA9IGRlZmF1bHRf
bW9kZTsKLQkJfSBlbHNlIHsKLQkJCURSTV9JTkZPKCJBR1AgbW9kZSByZXF1ZXN0ZWQ6ICVkXG4i
LCByYWRlb25fYWdwbW9kZSk7Ci0JCX0KLQl9IGVsc2UgewotCQlyYWRlb25fYWdwbW9kZSA9IGRl
ZmF1bHRfbW9kZTsKLQl9Ci0KLQltb2RlLm1vZGUgJj0gflJBREVPTl9BR1BfTU9ERV9NQVNLOwot
CWlmIChpc192MykgewotCQlzd2l0Y2ggKHJhZGVvbl9hZ3Btb2RlKSB7Ci0JCWNhc2UgODoKLQkJ
CW1vZGUubW9kZSB8PSBSQURFT05fQUdQdjNfOFhfTU9ERTsKLQkJCWJyZWFrOwotCQljYXNlIDQ6
Ci0JCWRlZmF1bHQ6Ci0JCQltb2RlLm1vZGUgfD0gUkFERU9OX0FHUHYzXzRYX01PREU7Ci0JCQli
cmVhazsKLQkJfQotCX0gZWxzZSB7Ci0JCXN3aXRjaCAocmFkZW9uX2FncG1vZGUpIHsKLQkJY2Fz
ZSA0OgotCQkJbW9kZS5tb2RlIHw9IFJBREVPTl9BR1BfNFhfTU9ERTsKLQkJCWJyZWFrOwotCQlj
YXNlIDI6Ci0JCQltb2RlLm1vZGUgfD0gUkFERU9OX0FHUF8yWF9NT0RFOwotCQkJYnJlYWs7Ci0J
CWNhc2UgMToKLQkJZGVmYXVsdDoKLQkJCW1vZGUubW9kZSB8PSBSQURFT05fQUdQXzFYX01PREU7
Ci0JCQlicmVhazsKLQkJfQotCX0KLQotCW1vZGUubW9kZSAmPSB+UkFERU9OX0FHUF9GV19NT0RF
OyAvKiBkaXNhYmxlIGZ3ICovCi0JcmV0ID0gZHJtX2FncF9lbmFibGUocmRldi0+ZGRldiwgbW9k
ZSk7Ci0JaWYgKHJldCkgewotCQlEUk1fRVJST1IoIlVuYWJsZSB0byBlbmFibGUgQUdQIChtb2Rl
ID0gMHglbHgpXG4iLCBtb2RlLm1vZGUpOwotCQlkcm1fYWdwX3JlbGVhc2UocmRldi0+ZGRldik7
Ci0JCXJldHVybiByZXQ7Ci0JfQotCi0JcmRldi0+bWMuYWdwX2Jhc2UgPSByZGV2LT5kZGV2LT5h
Z3AtPmFncF9pbmZvLmFwZXJfYmFzZTsKLQlyZGV2LT5tYy5ndHRfc2l6ZSA9IHJkZXYtPmRkZXYt
PmFncC0+YWdwX2luZm8uYXBlcl9zaXplIDw8IDIwOwotCXJkZXYtPm1jLmd0dF9zdGFydCA9IHJk
ZXYtPm1jLmFncF9iYXNlOwotCXJkZXYtPm1jLmd0dF9lbmQgPSByZGV2LT5tYy5ndHRfc3RhcnQg
KyByZGV2LT5tYy5ndHRfc2l6ZSAtIDE7Ci0JZGV2X2luZm8ocmRldi0+ZGV2LCAiR1RUOiAlbGx1
TSAweCUwOGxsWCAtIDB4JTA4bGxYXG4iLAotCQlyZGV2LT5tYy5ndHRfc2l6ZSA+PiAyMCwgcmRl
di0+bWMuZ3R0X3N0YXJ0LCByZGV2LT5tYy5ndHRfZW5kKTsKLQotCS8qIHdvcmthcm91bmQgc29t
ZSBodyBpc3N1ZXMgKi8KLQlpZiAocmRldi0+ZmFtaWx5IDwgQ0hJUF9SMjAwKSB7Ci0JCVdSRUcz
MihSQURFT05fQUdQX0NOVEwsIFJSRUczMihSQURFT05fQUdQX0NOVEwpIHwgMHgwMDBlMDAwMCk7
Ci0JfQotCXJldHVybiAwOwotI2Vsc2UKLQlyZXR1cm4gMDsKLSNlbmRpZgotfQotCi12b2lkIHJh
ZGVvbl9hZ3BfcmVzdW1lKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQotewotI2lmIElTX0VO
QUJMRUQoQ09ORklHX0FHUCkKLQlpbnQgcjsKLQlpZiAocmRldi0+ZmxhZ3MgJiBSQURFT05fSVNf
QUdQKSB7Ci0JCXIgPSByYWRlb25fYWdwX2luaXQocmRldik7Ci0JCWlmIChyKQotCQkJZGV2X3dh
cm4ocmRldi0+ZGV2LCAicmFkZW9uIEFHUCByZWluaXQgZmFpbGVkXG4iKTsKLQl9Ci0jZW5kaWYK
LX0KLQotdm9pZCByYWRlb25fYWdwX2Zpbmkoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCi17
Ci0jaWYgSVNfRU5BQkxFRChDT05GSUdfQUdQKQotCWlmIChyZGV2LT5kZGV2LT5hZ3AgJiYgcmRl
di0+ZGRldi0+YWdwLT5hY3F1aXJlZCkgewotCQlkcm1fYWdwX3JlbGVhc2UocmRldi0+ZGRldik7
Ci0JfQotI2VuZGlmCi19Ci0KLXZvaWQgcmFkZW9uX2FncF9zdXNwZW5kKHN0cnVjdCByYWRlb25f
ZGV2aWNlICpyZGV2KQotewotCXJhZGVvbl9hZ3BfZmluaShyZGV2KTsKLX0KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2RldmljZS5jIGIvZHJpdmVycy9ncHUvZHJt
L3JhZGVvbi9yYWRlb25fZGV2aWNlLmMKaW5kZXggMjY2ZTNjYmJkMDliLi4xMmU1YzVkODFjNDcg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2RldmljZS5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2RldmljZS5jCkBAIC0xMTQ1LDIyICsxMTQ1
LDYgQEAgc3RhdGljIHZvaWQgcmFkZW9uX2NoZWNrX2FyZ3VtZW50cyhzdHJ1Y3QgcmFkZW9uX2Rl
dmljZSAqcmRldikKIAl9CiAJcmRldi0+bWMuZ3R0X3NpemUgPSAodWludDY0X3QpcmFkZW9uX2dh
cnRfc2l6ZSA8PCAyMDsKIAotCS8qIEFHUCBtb2RlIGNhbiBvbmx5IGJlIC0xLCAxLCAyLCA0LCA4
ICovCi0Jc3dpdGNoIChyYWRlb25fYWdwbW9kZSkgewotCWNhc2UgLTE6Ci0JY2FzZSAwOgotCWNh
c2UgMToKLQljYXNlIDI6Ci0JY2FzZSA0OgotCWNhc2UgODoKLQkJYnJlYWs7Ci0JZGVmYXVsdDoK
LQkJZGV2X3dhcm4ocmRldi0+ZGV2LCAiaW52YWxpZCBBR1AgbW9kZSAlZCAodmFsaWQgbW9kZTog
IgotCQkJCSItMSwgMCwgMSwgMiwgNCwgOClcbiIsIHJhZGVvbl9hZ3Btb2RlKTsKLQkJcmFkZW9u
X2FncG1vZGUgPSAwOwotCQlicmVhazsKLQl9Ci0KIAlpZiAoIXJhZGVvbl9jaGVja19wb3RfYXJn
dW1lbnQocmFkZW9uX3ZtX3NpemUpKSB7CiAJCWRldl93YXJuKHJkZXYtPmRldiwgIlZNIHNpemUg
KCVkKSBtdXN0IGJlIGEgcG93ZXIgb2YgMlxuIiwKIAkJCSByYWRlb25fdm1fc2l6ZSk7CkBAIC0x
MzQ4LDkgKzEzMzIsOCBAQCBpbnQgcmFkZW9uX2RldmljZV9pbml0KHN0cnVjdCByYWRlb25fZGV2
aWNlICpyZGV2LAogCQlyZGV2LT5mbGFncyAmPSB+UkFERU9OX0lTX0FHUDsKIAl9CiAKLQlpZiAo
cmRldi0+ZmxhZ3MgJiBSQURFT05fSVNfQUdQICYmIHJhZGVvbl9hZ3Btb2RlID09IC0xKSB7CisJ
aWYgKHJkZXYtPmZsYWdzICYgUkFERU9OX0lTX0FHUCkKIAkJcmFkZW9uX2FncF9kaXNhYmxlKHJk
ZXYpOwotCX0KIAogCS8qIFNldCB0aGUgaW50ZXJuYWwgTUMgYWRkcmVzcyBtYXNrCiAJICogVGhp
cyBpcyB0aGUgbWF4IGFkZHJlc3Mgb2YgdGhlIEdQVSdzCkBAIC0xNjM2LDggKzE2MTksNiBAQCBp
bnQgcmFkZW9uX3N1c3BlbmRfa21zKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIGJvb2wgc3VzcGVu
ZCwKIAkgKi8KIAlyYWRlb25fYm9fZXZpY3RfdnJhbShyZGV2KTsKIAotCXJhZGVvbl9hZ3Bfc3Vz
cGVuZChyZGV2KTsKLQogCXBjaV9zYXZlX3N0YXRlKGRldi0+cGRldik7CiAJaWYgKGZyZWV6ZSAm
JiByZGV2LT5mYW1pbHkgPj0gQ0hJUF9DRURBUiAmJiAhKHJkZXYtPmZsYWdzICYgUkFERU9OX0lT
X0lHUCkpIHsKIAkJcmRldi0+YXNpYy0+YXNpY19yZXNldChyZGV2LCB0cnVlKTsKQEAgLTE2ODcs
OCArMTY2OCw2IEBAIGludCByYWRlb25fcmVzdW1lX2ttcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LCBib29sIHJlc3VtZSwgYm9vbCBmYmNvbikKIAkJCXJldHVybiAtMTsKIAkJfQogCX0KLQkvKiBy
ZXN1bWUgQUdQIGlmIGluIHVzZSAqLwotCXJhZGVvbl9hZ3BfcmVzdW1lKHJkZXYpOwogCXJhZGVv
bl9yZXN1bWUocmRldik7CiAKIAlyID0gcmFkZW9uX2liX3JpbmdfdGVzdHMocmRldik7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9kcnYuYyBiL2RyaXZlcnMvZ3B1
L2RybS9yYWRlb24vcmFkZW9uX2Rydi5jCmluZGV4IGJiYjA4ODNlOGNlNi4uNjJhNWRmYWY5OTBi
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9kcnYuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9kcnYuYwpAQCAtMTcxLDEyICsxNzEsNiBAQCBp
bnQgcmFkZW9uX25vX3diOwogaW50IHJhZGVvbl9tb2Rlc2V0ID0gLTE7CiBpbnQgcmFkZW9uX2R5
bmNsa3MgPSAtMTsKIGludCByYWRlb25fcjR4eF9hdG9tID0gMDsKLSNpZmRlZiBfX3Bvd2VycGNf
XwotLyogRGVmYXVsdCB0byBQQ0kgb24gUG93ZXJQQyAoZmRvICM5NTAxNykgKi8KLWludCByYWRl
b25fYWdwbW9kZSA9IC0xOwotI2Vsc2UKLWludCByYWRlb25fYWdwbW9kZSA9IDA7Ci0jZW5kaWYK
IGludCByYWRlb25fdnJhbV9saW1pdCA9IDA7CiBpbnQgcmFkZW9uX2dhcnRfc2l6ZSA9IC0xOyAv
KiBhdXRvICovCiBpbnQgcmFkZW9uX2JlbmNobWFya2luZyA9IDA7CkBAIC0yMjAsOSArMjE0LDYg
QEAgbW9kdWxlX3BhcmFtX25hbWVkKHI0eHhfYXRvbSwgcmFkZW9uX3I0eHhfYXRvbSwgaW50LCAw
NDQ0KTsKIE1PRFVMRV9QQVJNX0RFU0ModnJhbWxpbWl0LCAiUmVzdHJpY3QgVlJBTSBmb3IgdGVz
dGluZywgaW4gbWVnYWJ5dGVzIik7CiBtb2R1bGVfcGFyYW1fbmFtZWQodnJhbWxpbWl0LCByYWRl
b25fdnJhbV9saW1pdCwgaW50LCAwNjAwKTsKIAotTU9EVUxFX1BBUk1fREVTQyhhZ3Btb2RlLCAi
QUdQIE1vZGUgKC0xID09IFBDSSkiKTsKLW1vZHVsZV9wYXJhbV9uYW1lZChhZ3Btb2RlLCByYWRl
b25fYWdwbW9kZSwgaW50LCAwNDQ0KTsKLQogTU9EVUxFX1BBUk1fREVTQyhnYXJ0c2l6ZSwgIlNp
emUgb2YgUENJRS9JR1AgZ2FydCB0byBzZXR1cCBpbiBtZWdhYnl0ZXMgKDMyLCA2NCwgZXRjLiwg
LTEgPSBhdXRvKSIpOwogbW9kdWxlX3BhcmFtX25hbWVkKGdhcnRzaXplLCByYWRlb25fZ2FydF9z
aXplLCBpbnQsIDA2MDApOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3Jh
ZGVvbl90dG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jCmluZGV4IDVk
NTBjOWVkYmU4MC4uMjFiYjM3MDZjMTNjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFk
ZW9uL3JhZGVvbl90dG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90dG0u
YwpAQCAtODYsMjAgKzg2LDYgQEAgc3RhdGljIGludCByYWRlb25faW5pdF9tZW1fdHlwZShzdHJ1
Y3QgdHRtX2JvX2RldmljZSAqYmRldiwgdWludDMyX3QgdHlwZSwKIAkJbWFuLT5hdmFpbGFibGVf
Y2FjaGluZyA9IFRUTV9QTF9NQVNLX0NBQ0hJTkc7CiAJCW1hbi0+ZGVmYXVsdF9jYWNoaW5nID0g
VFRNX1BMX0ZMQUdfQ0FDSEVEOwogCQltYW4tPmZsYWdzID0gVFRNX01FTVRZUEVfRkxBR19NQVBQ
QUJMRSB8IFRUTV9NRU1UWVBFX0ZMQUdfQ01BOwotI2lmIElTX0VOQUJMRUQoQ09ORklHX0FHUCkK
LQkJaWYgKHJkZXYtPmZsYWdzICYgUkFERU9OX0lTX0FHUCkgewotCQkJaWYgKCFyZGV2LT5kZGV2
LT5hZ3ApIHsKLQkJCQlEUk1fRVJST1IoIkFHUCBpcyBub3QgZW5hYmxlZCBmb3IgbWVtb3J5IHR5
cGUgJXVcbiIsCi0JCQkJCSAgKHVuc2lnbmVkKXR5cGUpOwotCQkJCXJldHVybiAtRUlOVkFMOwot
CQkJfQotCQkJaWYgKCFyZGV2LT5kZGV2LT5hZ3AtPmNhbnRfdXNlX2FwZXJ0dXJlKQotCQkJCW1h
bi0+ZmxhZ3MgPSBUVE1fTUVNVFlQRV9GTEFHX01BUFBBQkxFOwotCQkJbWFuLT5hdmFpbGFibGVf
Y2FjaGluZyA9IFRUTV9QTF9GTEFHX1VOQ0FDSEVEIHwKLQkJCQkJCSBUVE1fUExfRkxBR19XQzsK
LQkJCW1hbi0+ZGVmYXVsdF9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfV0M7Ci0JCX0KLSNlbmRpZgog
CQlicmVhazsKIAljYXNlIFRUTV9QTF9WUkFNOgogCQkvKiAiT24tY2FyZCIgdmlkZW8gcmFtICov
CkBAIC00MTEsMTQgKzM5Nyw2IEBAIHN0YXRpYyBpbnQgcmFkZW9uX3R0bV9pb19tZW1fcmVzZXJ2
ZShzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldiwgc3RydWN0IHR0bV9tZW1fCiAJCS8qIHN5c3Rl
bSBtZW1vcnkgKi8KIAkJcmV0dXJuIDA7CiAJY2FzZSBUVE1fUExfVFQ6Ci0jaWYgSVNfRU5BQkxF
RChDT05GSUdfQUdQKQotCQlpZiAocmRldi0+ZmxhZ3MgJiBSQURFT05fSVNfQUdQKSB7Ci0JCQkv
KiBSQURFT05fSVNfQUdQIGlzIHNldCBvbmx5IGlmIEFHUCBpcyBhY3RpdmUgKi8KLQkJCW1lbS0+
YnVzLm9mZnNldCA9IG1lbS0+c3RhcnQgPDwgUEFHRV9TSElGVDsKLQkJCW1lbS0+YnVzLmJhc2Ug
PSByZGV2LT5tYy5hZ3BfYmFzZTsKLQkJCW1lbS0+YnVzLmlzX2lvbWVtID0gIXJkZXYtPmRkZXYt
PmFncC0+Y2FudF91c2VfYXBlcnR1cmU7Ci0JCX0KLSNlbmRpZgogCQlicmVhazsKIAljYXNlIFRU
TV9QTF9WUkFNOgogCQltZW0tPmJ1cy5vZmZzZXQgPSBtZW0tPnN0YXJ0IDw8IFBBR0VfU0hJRlQ7
CkBAIC02MzEsMTIgKzYwOSw2IEBAIHN0YXRpYyBzdHJ1Y3QgdHRtX3R0ICpyYWRlb25fdHRtX3R0
X2NyZWF0ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAogCXN0cnVjdCByYWRlb25fdHRt
X3R0ICpndHQ7CiAKIAlyZGV2ID0gcmFkZW9uX2dldF9yZGV2KGJvLT5iZGV2KTsKLSNpZiBJU19F
TkFCTEVEKENPTkZJR19BR1ApCi0JaWYgKHJkZXYtPmZsYWdzICYgUkFERU9OX0lTX0FHUCkgewot
CQlyZXR1cm4gdHRtX2FncF90dF9jcmVhdGUoYm8sIHJkZXYtPmRkZXYtPmFncC0+YnJpZGdlLAot
CQkJCQkgcGFnZV9mbGFncyk7Ci0JfQotI2VuZGlmCiAKIAlndHQgPSBremFsbG9jKHNpemVvZihz
dHJ1Y3QgcmFkZW9uX3R0bV90dCksIEdGUF9LRVJORUwpOwogCWlmIChndHQgPT0gTlVMTCkgewpA
QCAtNjgzLDExICs2NTUsNiBAQCBzdGF0aWMgaW50IHJhZGVvbl90dG1fdHRfcG9wdWxhdGUoc3Ry
dWN0IHR0bV90dCAqdHRtLAogCX0KIAogCXJkZXYgPSByYWRlb25fZ2V0X3JkZXYodHRtLT5iZGV2
KTsKLSNpZiBJU19FTkFCTEVEKENPTkZJR19BR1ApCi0JaWYgKHJkZXYtPmZsYWdzICYgUkFERU9O
X0lTX0FHUCkgewotCQlyZXR1cm4gdHRtX2FncF90dF9wb3B1bGF0ZSh0dG0sIGN0eCk7Ci0JfQot
I2VuZGlmCiAKICNpZmRlZiBDT05GSUdfU1dJT1RMQgogCWlmIChyZGV2LT5uZWVkX3N3aW90bGIg
JiYgc3dpb3RsYl9ucl90YmwoKSkgewpAQCAtNzE0LDEyICs2ODEsNiBAQCBzdGF0aWMgdm9pZCBy
YWRlb25fdHRtX3R0X3VucG9wdWxhdGUoc3RydWN0IHR0bV90dCAqdHRtKQogCQlyZXR1cm47CiAK
IAlyZGV2ID0gcmFkZW9uX2dldF9yZGV2KHR0bS0+YmRldik7Ci0jaWYgSVNfRU5BQkxFRChDT05G
SUdfQUdQKQotCWlmIChyZGV2LT5mbGFncyAmIFJBREVPTl9JU19BR1ApIHsKLQkJdHRtX2FncF90
dF91bnBvcHVsYXRlKHR0bSk7Ci0JCXJldHVybjsKLQl9Ci0jZW5kaWYKIAogI2lmZGVmIENPTkZJ
R19TV0lPVExCCiAJaWYgKHJkZXYtPm5lZWRfc3dpb3RsYiAmJiBzd2lvdGxiX25yX3RibCgpKSB7
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3J2NTE1LmMgYi9kcml2ZXJzL2dw
dS9kcm0vcmFkZW9uL3J2NTE1LmMKaW5kZXggMTQ3ZTVjZjgzNDhkLi44YTJmMTYzMjA4NjkgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcnY1MTUuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vcmFkZW9uL3J2NTE1LmMKQEAgLTYyMiw3ICs2MjIsNiBAQCB2b2lkIHJ2NTE1X2Zpbmko
c3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCiAJcmFkZW9uX2liX3Bvb2xfZmluaShyZGV2KTsK
IAlyYWRlb25fZ2VtX2ZpbmkocmRldik7CiAJcnYzNzBfcGNpZV9nYXJ0X2ZpbmkocmRldik7Ci0J
cmFkZW9uX2FncF9maW5pKHJkZXYpOwogCXJhZGVvbl9pcnFfa21zX2ZpbmkocmRldik7CiAJcmFk
ZW9uX2ZlbmNlX2RyaXZlcl9maW5pKHJkZXYpOwogCXJhZGVvbl9ib19maW5pKHJkZXYpOwpAQCAt
NjY3LDEzICs2NjYsNiBAQCBpbnQgcnY1MTVfaW5pdChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRl
dikKIAkJcmV0dXJuIC1FSU5WQUw7CiAJLyogSW5pdGlhbGl6ZSBjbG9ja3MgKi8KIAlyYWRlb25f
Z2V0X2Nsb2NrX2luZm8ocmRldi0+ZGRldik7Ci0JLyogaW5pdGlhbGl6ZSBBR1AgKi8KLQlpZiAo
cmRldi0+ZmxhZ3MgJiBSQURFT05fSVNfQUdQKSB7Ci0JCXIgPSByYWRlb25fYWdwX2luaXQocmRl
dik7Ci0JCWlmIChyKSB7Ci0JCQlyYWRlb25fYWdwX2Rpc2FibGUocmRldik7Ci0JCX0KLQl9CiAJ
LyogaW5pdGlhbGl6ZSBtZW1vcnkgY29udHJvbGxlciAqLwogCXJ2NTE1X21jX2luaXQocmRldik7
CiAJcnY1MTVfZGVidWdmcyhyZGV2KTsKQEAgLTcwMyw3ICs2OTUsNiBAQCBpbnQgcnY1MTVfaW5p
dChzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKIAkJcmFkZW9uX2liX3Bvb2xfZmluaShyZGV2
KTsKIAkJcmFkZW9uX2lycV9rbXNfZmluaShyZGV2KTsKIAkJcnYzNzBfcGNpZV9nYXJ0X2Zpbmko
cmRldik7Ci0JCXJhZGVvbl9hZ3BfZmluaShyZGV2KTsKIAkJcmRldi0+YWNjZWxfd29ya2luZyA9
IGZhbHNlOwogCX0KIAlyZXR1cm4gMDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRl
b24vcnY3NzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcnY3NzAuYwppbmRleCAyMWY2NTNh
ZTFlMWIuLjIwYmY1NDI2NmYyNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9y
djc3MC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcnY3NzAuYwpAQCAtMTk0MywxMiAr
MTk0Myw2IEBAIGludCBydjc3MF9pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQogCXIg
PSByYWRlb25fZmVuY2VfZHJpdmVyX2luaXQocmRldik7CiAJaWYgKHIpCiAJCXJldHVybiByOwot
CS8qIGluaXRpYWxpemUgQUdQICovCi0JaWYgKHJkZXYtPmZsYWdzICYgUkFERU9OX0lTX0FHUCkg
ewotCQlyID0gcmFkZW9uX2FncF9pbml0KHJkZXYpOwotCQlpZiAocikKLQkJCXJhZGVvbl9hZ3Bf
ZGlzYWJsZShyZGV2KTsKLQl9CiAJciA9IHJ2NzcwX21jX2luaXQocmRldik7CiAJaWYgKHIpCiAJ
CXJldHVybiByOwpAQCAtMjAxNSw3ICsyMDA5LDYgQEAgdm9pZCBydjc3MF9maW5pKHN0cnVjdCBy
YWRlb25fZGV2aWNlICpyZGV2KQogCXI2MDBfdnJhbV9zY3JhdGNoX2ZpbmkocmRldik7CiAJcmFk
ZW9uX2dlbV9maW5pKHJkZXYpOwogCXJhZGVvbl9mZW5jZV9kcml2ZXJfZmluaShyZGV2KTsKLQly
YWRlb25fYWdwX2ZpbmkocmRldik7CiAJcmFkZW9uX2JvX2ZpbmkocmRldik7CiAJcmFkZW9uX2F0
b21iaW9zX2ZpbmkocmRldik7CiAJa2ZyZWUocmRldi0+Ymlvcyk7Ci0tIAoyLjE3LjEKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
