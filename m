Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C54072C83B
	for <lists+dri-devel@lfdr.de>; Tue, 28 May 2019 16:01:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1BF0689D83;
	Tue, 28 May 2019 14:01:21 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AC79F89D83
 for <dri-devel@lists.freedesktop.org>; Tue, 28 May 2019 14:01:19 +0000 (UTC)
Received: from localhost (unknown [IPv6:2a01:e0a:2c:6930:5cf4:84a1:2763:fe0d])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256
 bits)) (No client certificate requested)
 (Authenticated sender: bbrezillon)
 by bhuna.collabora.co.uk (Postfix) with ESMTPSA id 6220C264C43;
 Tue, 28 May 2019 15:01:18 +0100 (BST)
Date: Tue, 28 May 2019 16:01:15 +0200
From: Boris Brezillon <boris.brezillon@collabora.com>
To: Steven Price <steven.price@arm.com>
Subject: Re: [RESEND PATCH v2 2/2] drm/panfrost: Expose perf counters
 through debugfs
Message-ID: <20190528160115.5ef0a9b0@collabora.com>
In-Reply-To: <20190528155348.597b332a@collabora.com>
References: <20190514104801.20448-1-boris.brezillon@collabora.com>
 <20190514104801.20448-3-boris.brezillon@collabora.com>
 <CAL_JsqKg52T4dVXvv8OJMwUAYDxauRmzKKgFW2+Loi3hqGk-AA@mail.gmail.com>
 <e3570bb8-46b7-bb27-8dcb-461fc8ec55ae@arm.com>
 <20190528155348.597b332a@collabora.com>
Organization: Collabora
X-Mailer: Claws Mail 3.17.3 (GTK+ 2.24.32; x86_64-redhat-linux-gnu)
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rob Herring <robh+dt@kernel.org>, kernel@collabora.com,
 Alyssa Rosenzweig <alyssa@rosenzweig.io>,
 dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCAyOCBNYXkgMjAxOSAxNTo1Mzo0OCArMDIwMApCb3JpcyBCcmV6aWxsb24gPGJvcmlz
LmJyZXppbGxvbkBjb2xsYWJvcmEuY29tPiB3cm90ZToKCj4gSGkgU3RldmUsCj4gCj4gT24gVGh1
LCAxNiBNYXkgMjAxOSAxNzoyMTozOSArMDEwMAo+IFN0ZXZlbiBQcmljZSA8c3RldmVuLnByaWNl
QGFybS5jb20+IHdyb3RlOgo+IAo+IAo+ID4gPj4gK3N0YXRpYyB2b2lkIHBhbmZyb3N0X3BlcmZj
bnRfc2V0dXAoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCj4gPiA+PiArewo+ID4gPj4g
KyAgICAgICB1MzIgY2ZnOwo+ID4gPj4gKwo+ID4gPj4gKyAgICAgICAvKgo+ID4gPj4gKyAgICAg
ICAgKiBBbHdheXMgdXNlIGFkZHJlc3Mgc3BhY2UgMCBmb3Igbm93Lgo+ID4gPj4gKyAgICAgICAg
KiBGSVhNRTogdGhpcyBuZWVkcyB0byBiZSB1cGRhdGVkIHdoZW4gd2Ugc3RhcnQgdXNpbmcgZGlm
ZmVyZW50Cj4gPiA+PiArICAgICAgICAqIGFkZHJlc3Mgc3BhY2UuCj4gPiA+PiArICAgICAgICAq
Lwo+ID4gPj4gKyAgICAgICBjZmcgPSBHUFVfUEVSRkNOVF9DRkdfQVMoMCk7Cj4gPiA+PiArICAg
ICAgIGlmIChwYW5mcm9zdF9tb2RlbF9jbXAocGZkZXYsIDB4MTAwMCkgPj0gMCkgICAgCj4gPiA+
IAo+ID4gPiBZb3UndmUgZ290IGEgY291cGxlIG9mIHRoZXNlLiBQZXJoYXBzIHdlIHNob3VsZCBh
ZGQgZWl0aGVyIGEKPiA+ID4gbW9kZWxfaXNfYmlmcm9zdCgpIGhlbHBlciBvciBhbiBpc19iaWZy
b3N0IHZhcmlhYmxlIHRvIHVzZS4KPiA+ID4gICAgIAo+ID4gPj4gKyAgICAgICAgICAgICAgIGNm
ZyB8PSBHUFVfUEVSRkNOVF9DRkdfU0VUU0VMKDEpOyAgICAKPiA+IAo+ID4gbWFsaV9rYmFzZSBv
bmx5IHNldHMgdGhpcyBpZiBDT05GSUdfTUFMSV9QUkZDTlRfU0VUX1NFQ09OREFSWSBpcyBkZWZp
bmVkCj4gPiAtIGkuZS4gdGhpcyBzZWxlY3RzIGEgZGlmZmVyZW50IHNlbGVjdGlvbiBvZiBjb3Vu
dGVycy4gQXQgYXQgdGhlIHZlcnkKPiA+IGxlYXN0IHRoaXMgc2hvdWxkIGJlIGFuIG9wdGlvbmFs
IGZsYWcgdGhhdCBjYW4gYmUgc2V0LCBidXQgSSBzdXNwZWN0IHRoZQo+ID4gcHJpbWFyeSBzZXQg
YXJlIHRoZSBvbmVzIHlvdSBhcmUgaW50ZXJlc3RlZCBpbi4gIAo+IAo+IEknbGwgYWRkIGEgcGFy
YW0gdG8gcGFzcyB0aGUgc2V0IG9mIGNvdW50ZXJzIHRvIG1vbml0b3IuCj4gCj4gPiAgIAo+ID4g
Pj4gKwo+ID4gPj4gKyAgICAgICBncHVfd3JpdGUocGZkZXYsIEdQVV9QRVJGQ05UX0NGRywKPiA+
ID4+ICsgICAgICAgICAgICAgICAgIGNmZyB8IEdQVV9QRVJGQ05UX0NGR19NT0RFKEdQVV9QRVJG
Q05UX0NGR19NT0RFX09GRikpOwo+ID4gPj4gKwo+ID4gPj4gKyAgICAgICBpZiAoIXBmZGV2LT5w
ZXJmY250LT5lbmFibGVkKQo+ID4gPj4gKyAgICAgICAgICAgICAgIHJldHVybjsKPiA+ID4+ICsK
PiA+ID4+ICsgICAgICAgZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUFJGQ05UX0pNX0VOLCAweGZmZmZm
ZmZmKTsKPiA+ID4+ICsgICAgICAgZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUFJGQ05UX1NIQURFUl9F
TiwgMHhmZmZmZmZmZik7Cj4gPiA+PiArICAgICAgIGdwdV93cml0ZShwZmRldiwgR1BVX1BSRkNO
VF9NTVVfTDJfRU4sIDB4ZmZmZmZmZmYpOwo+ID4gPj4gKwo+ID4gPj4gKyAgICAgICAvKgo+ID4g
Pj4gKyAgICAgICAgKiBEdWUgdG8gUFJMQU0tODE4NiB3ZSBuZWVkIHRvIGRpc2FibGUgdGhlIFRp
bGVyIGJlZm9yZSB3ZSBlbmFibGUgSFcKPiA+ID4+ICsgICAgICAgICogY291bnRlcnMuICAgIAo+
ID4gPiAKPiA+ID4gU2VlbXMgbGlrZSB5b3UgY291bGQganVzdCBhbHdheXMgYXBwbHkgdGhlIHdv
cmstYXJvdW5kPyBJdCBkb2Vzbid0Cj4gPiA+IGxvb2sgbGlrZSBpdCB3b3VsZCBiZSBtdWNoIGRp
ZmZlcmVudC4gICAgCj4gPiAKPiA+IFRlY2huaWNhbGx5IHRoZSB3b3JrYXJvdW5kIGNhdXNlcyB0
aGUgZHJpdmVyIHRvIHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBpbgo+ID4gdGhlIHdyb25nIG9yZGVy
IGJlbG93ICh3cml0ZSBUSUxFUl9FTiB3aGVuIHRoZSBtb2RlIGlzIE1BTlVBTCkgLSB0aGlzIGlz
Cj4gPiBhIHdvcmthcm91bmQgZm9yIHRoZSBoYXJkd2FyZSBpc3N1ZSAoYW5kIHRoZXJlZm9yZSB3
b3JrcyBvbiB0aGF0Cj4gPiBoYXJkd2FyZSkuIEJ1dCBJIHdvdWxkbid0IGxpa2UgdG8gc2F5IGl0
IHdvcmtzIG9uIG90aGVyIGhhcmR3YXJlIHdoaWNoCj4gPiBkb2Vzbid0IGhhdmUgdGhlIGlzc3Vl
LiAgCj4gCj4gT2theSwgSSdsbCBrZWVwIHRoZSB3b3JrYXJvdW5kIG9ubHkgZm9yIEhXIHRoYXQg
YXJlIGltcGFjdGVkIGJ5IHRoZSBidWcuCj4gCj4gPiAgIAo+ID4gPj4gKyAgICAgICAgKi8KPiA+
ID4+ICsgICAgICAgaWYgKHBhbmZyb3N0X2hhc19od19pc3N1ZShwZmRldiwgSFdfSVNTVUVfODE4
NikpCj4gPiA+PiArICAgICAgICAgICAgICAgZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUFJGQ05UX1RJ
TEVSX0VOLCAwKTsKPiA+ID4+ICsgICAgICAgZWxzZQo+ID4gPj4gKyAgICAgICAgICAgICAgIGdw
dV93cml0ZShwZmRldiwgR1BVX1BSRkNOVF9USUxFUl9FTiwgMHhmZmZmZmZmZik7Cj4gPiA+PiAr
Cj4gPiA+PiArICAgICAgIGdwdV93cml0ZShwZmRldiwgR1BVX1BFUkZDTlRfQ0ZHLAo+ID4gPj4g
KyAgICAgICAgICAgICAgICAgY2ZnIHwgR1BVX1BFUkZDTlRfQ0ZHX01PREUoR1BVX1BFUkZDTlRf
Q0ZHX01PREVfTUFOVUFMKSk7Cj4gPiA+PiArCj4gPiA+PiArICAgICAgIGlmIChwYW5mcm9zdF9o
YXNfaHdfaXNzdWUocGZkZXYsIEhXX0lTU1VFXzgxODYpKQo+ID4gPj4gKyAgICAgICAgICAgICAg
IGdwdV93cml0ZShwZmRldiwgR1BVX1BSRkNOVF9USUxFUl9FTiwgMHhmZmZmZmZmZik7Cj4gPiA+
PiArfSAgCj4gCj4gWy4uLl0KPiAKPiA+ID4+ICtpbnQgcGFuZnJvc3RfcGVyZmNudF9pbml0KHN0
cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KQo+ID4gPj4gK3sKPiA+ID4+ICsgICAgICAgc3Ry
dWN0IHBhbmZyb3N0X3BlcmZjbnQgKnBlcmZjbnQ7Cj4gPiA+PiArICAgICAgIHN0cnVjdCBkcm1f
Z2VtX3NobWVtX29iamVjdCAqYm87Cj4gPiA+PiArICAgICAgIHNpemVfdCBzaXplOwo+ID4gPj4g
KyAgICAgICB1MzIgc3RhdHVzOwo+ID4gPj4gKyAgICAgICBpbnQgcmV0Owo+ID4gPj4gKwo+ID4g
Pj4gKyAgICAgICBpZiAocGFuZnJvc3RfaGFzX2h3X2ZlYXR1cmUocGZkZXYsIEhXX0ZFQVRVUkVf
VjQpKSB7Cj4gPiA+PiArICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IG5jb3JlZ3JvdXBzOwo+
ID4gPj4gKwo+ID4gPj4gKyAgICAgICAgICAgICAgIG5jb3JlZ3JvdXBzID0gaHdlaWdodDY0KHBm
ZGV2LT5mZWF0dXJlcy5sMl9wcmVzZW50KTsKPiA+ID4+ICsgICAgICAgICAgICAgICBzaXplID0g
bmNvcmVncm91cHMgKiBCTE9DS1NfUEVSX0NPUkVHUk9VUCAqCj4gPiA+PiArICAgICAgICAgICAg
ICAgICAgICAgIENPVU5URVJTX1BFUl9CTE9DSyAqIEJZVEVTX1BFUl9DT1VOVEVSOwo+ID4gPj4g
KyAgICAgICB9IGVsc2Ugewo+ID4gPj4gKyAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBubDJj
LCBuY29yZXM7Cj4gPiA+PiArCj4gPiA+PiArICAgICAgICAgICAgICAgLyoKPiA+ID4+ICsgICAg
ICAgICAgICAgICAgKiBUT0RPOiBkZWZpbmUgYSBtYWNybyB0byBleHRyYWN0IHRoZSBudW1iZXIg
b2YgbDIgY2FjaGVzIGZyb20KPiA+ID4+ICsgICAgICAgICAgICAgICAgKiBtZW1fZmVhdHVyZXMu
Cj4gPiA+PiArICAgICAgICAgICAgICAgICovCj4gPiA+PiArICAgICAgICAgICAgICAgbmwyYyA9
ICgocGZkZXYtPmZlYXR1cmVzLm1lbV9mZWF0dXJlcyA+PiA4KSAmIEdFTk1BU0soMywgMCkpICsg
MTsKPiA+ID4+ICsKPiA+ID4+ICsgICAgICAgICAgICAgICAvKgo+ID4gPj4gKyAgICAgICAgICAg
ICAgICAqIFRoZSBBUk0gZHJpdmVyIGlzIGdyb3VwaW5nIGNvcmVzIHBlciBjb3JlIGdyb3VwIGFu
ZCB0aGVuCj4gPiA+PiArICAgICAgICAgICAgICAgICogb25seSB1c2luZyB0aGUgbnVtYmVyIG9m
IGNvcmVzIGluIGdyb3VwIDAgdG8gY2FsY3VsYXRlIHRoZQo+ID4gPj4gKyAgICAgICAgICAgICAg
ICAqIHNpemUuIE5vdCBzdXJlIHdoeSB0aGlzIGlzIGRvbmUgbGlrZSB0aGF0LCBidXQgSSBndWVz
cwo+ID4gPj4gKyAgICAgICAgICAgICAgICAqIHNoYWRlcl9wcmVzZW50IHdpbGwgb25seSBzaG93
IGNvcmVzIGluIHRoZSBmaXJzdCBncm91cAo+ID4gPj4gKyAgICAgICAgICAgICAgICAqIGFueXdh
eS4KPiA+ID4+ICsgICAgICAgICAgICAgICAgKi8gICAgCj4gPiAKPiA+IEknbSBub3Qgc3VyZSBJ
IHVuZGVyc3RhbmQgdGhpcyBjb21tZW50LiBJJ20gbm90IHN1cmUgd2hpY2ggdmVyc2lvbiBvZgo+
ID4gdGhlIGRyaXZlciB5b3UgYXJlIGxvb2tpbmcgYXQsIGJ1dCBzaGFkZXJfcHJlc2VudCBzaG91
bGQgY29udGFpbiBhbGwgdGhlCj4gPiBjb3JlcyAoaW4gZXZlcnkgY29yZSBncm91cCkuCj4gPiAK
PiA+IFRoZSBrYmFzZSBkcml2ZXIgKGluIHBhbmZyb3N0J3MgZ2l0IHRyZWVbMV0pLCBjb250YWlu
czoKPiA+IAo+ID4gCWJhc2VfZ3B1X3Byb3BzICpwcm9wcyA9ICZrYmRldi0+Z3B1X3Byb3BzLnBy
b3BzOwo+ID4gCXUzMiBucl9sMiA9IHByb3BzLT5sMl9wcm9wcy5udW1fbDJfc2xpY2VzOwo+ID4g
CXU2NCBjb3JlX21hc2sgPSBwcm9wcy0+Y29oZXJlbmN5X2luZm8uZ3JvdXBbMF0uY29yZV9tYXNr
Owo+ID4gCj4gPiAJdTMyIG5yX2Jsb2NrcyA9IGZsczY0KGNvcmVfbWFzayk7Cj4gPiAKPiA+IAkv
KiBKTSBhbmQgdGlsZXIgY291bnRlciBibG9ja3MgYXJlIGFsd2F5cyBwcmVzZW50ICovCj4gPiAJ
ZHVtcF9zaXplID0gKDIgKyBucl9sMiArIG5yX2Jsb2NrcykgKgo+ID4gCQkJTlJfQ05UX1BFUl9C
TE9DSyAqCj4gPiAJCQlOUl9CWVRFU19QRVJfQ05UOwo+ID4gCj4gPiBbMV0KPiA+IGh0dHBzOi8v
Z2l0bGFiLmZyZWVkZXNrdG9wLm9yZy9wYW5mcm9zdC9tYWxpX2tiYXNlL2Jsb2IvbWFzdGVyL2Ry
aXZlci9wcm9kdWN0L2tlcm5lbC9kcml2ZXJzL2dwdS9hcm0vbWlkZ2FyZC9tYWxpX2tiYXNlX3Zp
bnN0ci5jCj4gPiAKPiA+IGkuZS4gdGhlIG51bWJlciBvZiBjb3JlcyArIG51bWJlciBvZiBMMiBj
YWNoZXMgKHBsdXMgMiBmb3IgSk0vdGlsZXIpCj4gPiBtdWx0aXBsaWVkIGJ5IHRoZSBibG9jayBz
aXplLiAgCj4gCj4gQWN0dWFsbHksIEkgd2FzIHJlZmVycmluZyB0byB3aGF0J3MgZG9uZSBpbgo+
IGtiYXNlX2dwdXByb3BzX2NvbnN0cnVjdF9jb2hlcmVudF9ncm91cHMoKSBbMl0uCj4gCj4gPiAK
PiA+IEFsc28gYW5vdGhlciBkaWZmZXJlbmNlIHdpdGggdGhlIGJlbG93IGlzIHRoYXQgZmxzNjQg
YW5kIGh3ZWlnaHQ2NCBkb24ndAo+ID4gcmV0dXJuIHRoZSBzYW1lIG51bWJlcnMuIElmIHRoZSBj
b3JlIG1hc2sgaXMgbm9uLWNvbnRpZ3VvdXMgdGhpcyB3aWxsCj4gPiByZXR1cm4gZGlmZmVyZW50
IHZhbHVlcy4gIAo+IAo+IFJpZ2h0LCBJIHNob3VsZCB1c2UgZmxzNjQoKSBub3QgaHdlaWdodDY0
KCkuCgpPb3BzLCBmb3Jnb3QgdG8gYXNrIHRoZSBleHRyYSBxdWVzdGlvbiBJIGhhZC4gTG9va3Mg
bGlrZSB3aGVuIHRoZSBHUFUKaXMgYnVzeSBhbmQgSSBlbmFibGUvZHVtcC9kaXNhYmxlIHBlcmZj
bnQgdG9vIHF1aWNrbHksIEkgc29tZXRpbWUgZ2V0cwp7Sk0sU0hBREVSLE1NVV9MMixUSUxFUn1f
Q09VTlRFUlsyXSA9IDAgd2hpbGUgSSdkIGV4cGVjdCBpdCB0byBiZSBzZXQKdG8gdGhlIHtKTSxT
SEFERVIsTU1VX0wyLFRJTEVSfV9FTiB2YWx1ZSAoMHhmZiBvciAweGZmZmYgZGVwZW5kaW5nIG9u
CnRoZSBibG9jaykuIEkgbWFkZSBzdXJlIEkgd2FzIHJlY2VpdmluZyB0aGUgU0FNUExFX0RPTkUr
Q0xFQU5fRE9ORQpldmVudHMuIEFueSBpZGVhIHdoYXQgY291bGQgY2F1c2UgdGhpcz8KCk5vdGUg
dGhhdCB3aGVuIHRoZSBHUFUgaXMgaWRsZSwge0pNLFNIQURFUixNTVVfTDIsVElMRVJ9X0NPVU5U
RVJbMl0gYXJlCnNldCB0byB0aGUgdmFsdWUgSSBleHBlY3QgKDB4ZmYgb3IgMHhmZmZmIGRlcGVu
ZGluZyBvbiB0aGUgYmxvY2spLgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9k
cmktZGV2ZWw=
