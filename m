Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3377B94B10
	for <lists+dri-devel@lfdr.de>; Mon, 19 Aug 2019 18:58:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B3A916E233;
	Mon, 19 Aug 2019 16:58:29 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AB0606E233
 for <dri-devel@lists.freedesktop.org>; Mon, 19 Aug 2019 16:58:28 +0000 (UTC)
Received: from mail-qt1-f180.google.com (mail-qt1-f180.google.com
 [209.85.160.180])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 7076022CEB
 for <dri-devel@lists.freedesktop.org>; Mon, 19 Aug 2019 16:58:28 +0000 (UTC)
Received: by mail-qt1-f180.google.com with SMTP id e8so2647474qtp.7
 for <dri-devel@lists.freedesktop.org>; Mon, 19 Aug 2019 09:58:28 -0700 (PDT)
X-Gm-Message-State: APjAAAWOBHysfmbvSPi5DOUGtQqeSbSDdh+Yf9rbQ59KiDym8Pafltq4
 /A1D4b8zCVMmKP+DZDSnYyv79dZcDOB44XaLUQ==
X-Google-Smtp-Source: APXvYqyC4K6hDEfKTOtWD8dHY6tdS5htlOWoxGZdKVdQyuAu1jI2/uEG4E/+K43Xo4WtMeeUYdGX/l4DqM3gSJFtut8=
X-Received: by 2002:ac8:386f:: with SMTP id r44mr22408374qtb.300.1566233907616; 
 Mon, 19 Aug 2019 09:58:27 -0700 (PDT)
MIME-Version: 1.0
References: <20190816093107.30518-2-steven.price@arm.com>
In-Reply-To: <20190816093107.30518-2-steven.price@arm.com>
From: Rob Herring <robh@kernel.org>
Date: Mon, 19 Aug 2019 11:58:16 -0500
X-Gmail-Original-Message-ID: <CAL_JsqJKm7n=SuQrPTxfWR=Cgqn-gR-bgOrOdTVyR_XCae0FQg@mail.gmail.com>
Message-ID: <CAL_JsqJKm7n=SuQrPTxfWR=Cgqn-gR-bgOrOdTVyR_XCae0FQg@mail.gmail.com>
Subject: Re: [PATCH] drm/panfrost: Queue jobs on the hardware
To: Steven Price <steven.price@arm.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=kernel.org; s=default; t=1566233908;
 bh=g7kVlBCVAodPzDkYY1OcJfHcsAghNjnMJvDNyNo04NM=;
 h=References:In-Reply-To:From:Date:Subject:To:Cc:From;
 b=sP51mE9Gddo1yJclORSeMLnhVoqH2kNg8A2jM7pJ1CsHDAeFng9MpZTHQKDBcwMbv
 +fvjHKDzmB6BtPIILI7Ak1qHw8pXQWM0U8Fcg2eR++l5aX0VjJ3thWq2CiTpwbEUYK
 WXURB/tIvO7Ypp5/ZE3yYg77sas50TcLxS9ZkHoA=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel <dri-devel@lists.freedesktop.org>,
 Tomeu Vizoso <tomeu.vizoso@collabora.com>,
 "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBBdWcgMTYsIDIwMTkgYXQgNDozMSBBTSBTdGV2ZW4gUHJpY2UgPHN0ZXZlbi5wcmlj
ZUBhcm0uY29tPiB3cm90ZToKPgo+IFRoZSBoYXJkd2FyZSBoYXMgYSBzZXQgb2YgJ19ORVhUJyBy
ZWdpc3RlcnMgdGhhdCBjYW4gaG9sZCBhIHNlY29uZCBqb2IKPiB3aGlsZSB0aGUgZmlyc3QgaXMg
ZXhlY3V0aW5nLiBNYWtlIHVzZSBvZiB0aGVzZSByZWdpc3RlcnMgdG8gZW5xdWV1ZSBhCj4gc2Vj
b25kIGpvYiBwZXIgc2xvdC4KPgo+IFNpZ25lZC1vZmYtYnk6IFN0ZXZlbiBQcmljZSA8c3RldmVu
LnByaWNlQGFybS5jb20+Cj4gLS0tCj4gTm90ZSB0aGF0IHRoaXMgaXMgYmFzZWQgb24gdG9wIG9m
IFJvYiBIZXJyaW5nJ3MgInBlciBGRCBhZGRyZXNzIHNwYWNlIgo+IHBhdGNoWzFdLgo+Cj4gWzFd
IGh0dHBzOi8vbWFyYy5pbmZvLz9pPTIwMTkwODEzMTUwMTE1LjMwMzM4LTEtcm9iaCUyMCgpJTIw
a2VybmVsJTIwISUyMG9yZwo+Cj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9k
ZXZpY2UuaCB8ICA0ICstCj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9qb2Iu
YyAgICB8IDc2ICsrKysrKysrKysrKysrKysrKy0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZy
b3N0L3BhbmZyb3N0X21tdS5jICAgIHwgIDIgKy0KPiAgMyBmaWxlcyBjaGFuZ2VkLCA2NyBpbnNl
cnRpb25zKCspLCAxNSBkZWxldGlvbnMoLSkKCkxHVE0sIGJ1dCBJJ2xsIGdpdmUgVG9tZXUgYSBj
aGFuY2UgdG8gY29tbWVudC4KClJvYgoKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
cGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmggYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFu
ZnJvc3RfZGV2aWNlLmgKPiBpbmRleCBmNTAzYzU2NmU5OWYuLjAxNTNkZWZkNjA4NSAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmgKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmgKPiBAQCAtNTUsNyAr
NTUsNyBAQCBzdHJ1Y3QgcGFuZnJvc3RfZGV2ZnJlcV9zbG90IHsKPiAgICAgICAgIGt0aW1lX3Qg
YnVzeV90aW1lOwo+ICAgICAgICAga3RpbWVfdCBpZGxlX3RpbWU7Cj4gICAgICAgICBrdGltZV90
IHRpbWVfbGFzdF91cGRhdGU7Cj4gLSAgICAgICBib29sIGJ1c3k7Cj4gKyAgICAgICBpbnQgYnVz
eTsKPiAgfTsKPgo+ICBzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlIHsKPiBAQCAtODAsNyArODAsNyBA
QCBzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlIHsKPgo+ICAgICAgICAgc3RydWN0IHBhbmZyb3N0X2pv
Yl9zbG90ICpqczsKPgo+IC0gICAgICAgc3RydWN0IHBhbmZyb3N0X2pvYiAqam9ic1tOVU1fSk9C
X1NMT1RTXTsKPiArICAgICAgIHN0cnVjdCBwYW5mcm9zdF9qb2IgKmpvYnNbTlVNX0pPQl9TTE9U
U11bMl07Cj4gICAgICAgICBzdHJ1Y3QgbGlzdF9oZWFkIHNjaGVkdWxlZF9qb2JzOwo+Cj4gICAg
ICAgICBzdHJ1Y3QgcGFuZnJvc3RfcGVyZmNudCAqcGVyZmNudDsKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4gaW5kZXggMDVjODVmNDVhMGRlLi5iMmI1MDI3YWY5NzYg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4gQEAgLTEzOCw2
ICsxMzgsMzcgQEAgc3RhdGljIHZvaWQgcGFuZnJvc3Rfam9iX3dyaXRlX2FmZmluaXR5KHN0cnVj
dCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LAo+ICAgICAgICAgam9iX3dyaXRlKHBmZGV2LCBKU19B
RkZJTklUWV9ORVhUX0hJKGpzKSwgYWZmaW5pdHkgPj4gMzIpOwo+ICB9Cj4KPiArc3RhdGljIGlu
dCBwYW5mcm9zdF9qb2JfY291bnQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIGludCBz
bG90KQo+ICt7Cj4gKyAgICAgICBpZiAocGZkZXYtPmpvYnNbc2xvdF1bMF0gPT0gTlVMTCkKPiAr
ICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4gKyAgICAgICBpZiAocGZkZXYtPmpvYnNbc2xvdF1b
MV0gPT0gTlVMTCkKPiArICAgICAgICAgICAgICAgcmV0dXJuIDE7Cj4gKyAgICAgICByZXR1cm4g
MjsKPiArfQo+ICsKPiArc3RhdGljIHN0cnVjdCBwYW5mcm9zdF9qb2IgKnBhbmZyb3N0X2RlcXVl
dWVfam9iKAo+ICsgICAgICAgICAgICAgICBzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwg
aW50IHNsb3QpCj4gK3sKPiArICAgICAgIHN0cnVjdCBwYW5mcm9zdF9qb2IgKmpvYiA9IHBmZGV2
LT5qb2JzW3Nsb3RdWzBdOwo+ICsKPiArICAgICAgIHBmZGV2LT5qb2JzW3Nsb3RdWzBdID0gcGZk
ZXYtPmpvYnNbc2xvdF1bMV07Cj4gKyAgICAgICBwZmRldi0+am9ic1tzbG90XVsxXSA9IE5VTEw7
Cj4gKwo+ICsgICAgICAgcmV0dXJuIGpvYjsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgcGFuZnJv
c3RfZW5xdWV1ZV9qb2Ioc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIGludCBzbG90LAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBwYW5mcm9zdF9qb2IgKmpv
YikKPiArewo+ICsgICAgICAgaWYgKHBmZGV2LT5qb2JzW3Nsb3RdWzBdID09IE5VTEwpIHsKPiAr
ICAgICAgICAgICAgICAgcGZkZXYtPmpvYnNbc2xvdF1bMF0gPSBqb2I7Cj4gKyAgICAgICAgICAg
ICAgIHJldHVybjsKPiArICAgICAgIH0KPiArICAgICAgIFdBUk5fT04ocGZkZXYtPmpvYnNbc2xv
dF1bMV0gIT0gTlVMTCk7Cj4gKyAgICAgICBwZmRldi0+am9ic1tzbG90XVsxXSA9IGpvYjsKPiAr
fQo+ICsKPiAgc3RhdGljIHZvaWQgcGFuZnJvc3Rfam9iX2h3X3N1Ym1pdChzdHJ1Y3QgcGFuZnJv
c3Rfam9iICpqb2IsIGludCBqcykKPiAgewo+ICAgICAgICAgc3RydWN0IHBhbmZyb3N0X2Rldmlj
ZSAqcGZkZXYgPSBqb2ItPnBmZGV2Owo+IEBAIC0xNTAsMTMgKzE4MSwxNiBAQCBzdGF0aWMgdm9p
ZCBwYW5mcm9zdF9qb2JfaHdfc3VibWl0KHN0cnVjdCBwYW5mcm9zdF9qb2IgKmpvYiwgaW50IGpz
KQo+ICAgICAgICAgaWYgKHJldCA8IDApCj4gICAgICAgICAgICAgICAgIHJldHVybjsKPgo+IC0g
ICAgICAgaWYgKFdBUk5fT04oam9iX3JlYWQocGZkZXYsIEpTX0NPTU1BTkRfTkVYVChqcykpKSkK
PiAtICAgICAgICAgICAgICAgZ290byBlbmQ7Cj4gLQo+ICAgICAgICAgY2ZnID0gcGFuZnJvc3Rf
bW11X2FzX2dldChwZmRldiwgJmpvYi0+ZmlsZV9wcml2LT5tbXUpOwo+Cj4gLSAgICAgICBwYW5m
cm9zdF9kZXZmcmVxX3JlY29yZF90cmFuc2l0aW9uKHBmZGV2LCBqcyk7Cj4gICAgICAgICBzcGlu
X2xvY2tfaXJxc2F2ZSgmcGZkZXYtPmh3YWNjZXNzX2xvY2ssIGZsYWdzKTsKPiArICAgICAgIHBh
bmZyb3N0X2VucXVldWVfam9iKHBmZGV2LCBqcywgam9iKTsKPiArCj4gKyAgICAgICBpZiAoV0FS
Tl9PTihqb2JfcmVhZChwZmRldiwgSlNfQ09NTUFORF9ORVhUKGpzKSkpKQo+ICsgICAgICAgICAg
ICAgICBnb3RvIGVuZDsKPiArCj4gKyAgICAgICBpZiAocGFuZnJvc3Rfam9iX2NvdW50KHBmZGV2
LCBqcykgPT0gMSkKPiArICAgICAgICAgICAgICAgcGFuZnJvc3RfZGV2ZnJlcV9yZWNvcmRfdHJh
bnNpdGlvbihwZmRldiwganMpOwo+Cj4gICAgICAgICBqb2Jfd3JpdGUocGZkZXYsIEpTX0hFQURf
TkVYVF9MTyhqcyksIGpjX2hlYWQgJiAweEZGRkZGRkZGKTsKPiAgICAgICAgIGpvYl93cml0ZShw
ZmRldiwgSlNfSEVBRF9ORVhUX0hJKGpzKSwgamNfaGVhZCA+PiAzMik7Cj4gQEAgLTE4Niw5ICsy
MjAsOSBAQCBzdGF0aWMgdm9pZCBwYW5mcm9zdF9qb2JfaHdfc3VibWl0KHN0cnVjdCBwYW5mcm9z
dF9qb2IgKmpvYiwgaW50IGpzKQo+Cj4gICAgICAgICBqb2Jfd3JpdGUocGZkZXYsIEpTX0NPTU1B
TkRfTkVYVChqcyksIEpTX0NPTU1BTkRfU1RBUlQpOwo+Cj4gK2VuZDoKPiAgICAgICAgIHNwaW5f
dW5sb2NrX2lycXJlc3RvcmUoJnBmZGV2LT5od2FjY2Vzc19sb2NrLCBmbGFncyk7Cj4KPiAtZW5k
Ogo+ICAgICAgICAgcG1fcnVudGltZV9tYXJrX2xhc3RfYnVzeShwZmRldi0+ZGV2KTsKPiAgICAg
ICAgIHBtX3J1bnRpbWVfcHV0X2F1dG9zdXNwZW5kKHBmZGV2LT5kZXYpOwo+ICB9Cj4gQEAgLTMz
Niw4ICszNzAsNiBAQCBzdGF0aWMgc3RydWN0IGRtYV9mZW5jZSAqcGFuZnJvc3Rfam9iX3J1bihz
dHJ1Y3QgZHJtX3NjaGVkX2pvYiAqc2NoZWRfam9iKQo+ICAgICAgICAgaWYgKHVubGlrZWx5KGpv
Yi0+YmFzZS5zX2ZlbmNlLT5maW5pc2hlZC5lcnJvcikpCj4gICAgICAgICAgICAgICAgIHJldHVy
biBOVUxMOwo+Cj4gLSAgICAgICBwZmRldi0+am9ic1tzbG90XSA9IGpvYjsKPiAtCj4gICAgICAg
ICBmZW5jZSA9IHBhbmZyb3N0X2ZlbmNlX2NyZWF0ZShwZmRldiwgc2xvdCk7Cj4gICAgICAgICBp
ZiAoSVNfRVJSKGZlbmNlKSkKPiAgICAgICAgICAgICAgICAgcmV0dXJuIE5VTEw7Cj4gQEAgLTQy
MSwyMSArNDUzLDM2IEBAIHN0YXRpYyBpcnFyZXR1cm5fdCBwYW5mcm9zdF9qb2JfaXJxX2hhbmRs
ZXIoaW50IGlycSwgdm9pZCAqZGF0YSkKPiAgICAgICAgIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2Ug
KnBmZGV2ID0gZGF0YTsKPiAgICAgICAgIHUzMiBzdGF0dXMgPSBqb2JfcmVhZChwZmRldiwgSk9C
X0lOVF9TVEFUKTsKPiAgICAgICAgIGludCBqOwo+ICsgICAgICAgdW5zaWduZWQgbG9uZyBmbGFn
czsKPgo+ICAgICAgICAgZGV2X2RiZyhwZmRldi0+ZGV2LCAiam9ic2xvdCBpcnEgc3RhdHVzPSV4
XG4iLCBzdGF0dXMpOwo+Cj4gICAgICAgICBpZiAoIXN0YXR1cykKPiAgICAgICAgICAgICAgICAg
cmV0dXJuIElSUV9OT05FOwo+Cj4gKyAgICAgICBzcGluX2xvY2tfaXJxc2F2ZSgmcGZkZXYtPmh3
YWNjZXNzX2xvY2ssIGZsYWdzKTsKPiArCj4gICAgICAgICBwbV9ydW50aW1lX21hcmtfbGFzdF9i
dXN5KHBmZGV2LT5kZXYpOwo+Cj4gICAgICAgICBmb3IgKGogPSAwOyBzdGF0dXM7IGorKykgewo+
ICAgICAgICAgICAgICAgICB1MzIgbWFzayA9IE1LX0pTX01BU0soaik7Cj4gKyAgICAgICAgICAg
ICAgIGludCBqb2JzID0gcGFuZnJvc3Rfam9iX2NvdW50KHBmZGV2LCBqKTsKPiArICAgICAgICAg
ICAgICAgaW50IGFjdGl2ZTsKPgo+ICAgICAgICAgICAgICAgICBpZiAoIShzdGF0dXMgJiBtYXNr
KSkKPiAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPgo+ICAgICAgICAgICAgICAg
ICBqb2Jfd3JpdGUocGZkZXYsIEpPQl9JTlRfQ0xFQVIsIG1hc2spOwo+ICsgICAgICAgICAgICAg
ICBhY3RpdmUgPSAoam9iX3JlYWQocGZkZXYsIEpPQl9JTlRfSlNfU1RBVEUpICYKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgIEpPQl9JTlRfTUFTS19ET05FKGopKSA/IDEgOiAwOwo+ICsKPiAr
ICAgICAgICAgICAgICAgaWYgKCEoc3RhdHVzICYgSk9CX0lOVF9NQVNLX0VSUihqKSkpIHsKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAvKiBSZWNoZWNrIFJBV1NUQVQgdG8gY2hlY2sgaWYgdGhl
cmUncyBhIG5ld2x5Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICogZmFpbGVkIGpvYiAoc2lu
Y2UgSk9CX0lOVF9TVEFUIHdhcyByZWFkKQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAqLwo+
ICsgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyB8PSBqb2JfcmVhZChwZmRldiwgSk9CX0lO
VF9SQVdTVEFUKSAmCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKT0JfSU5UX01B
U0tfRVJSKGopOwo+ICsgICAgICAgICAgICAgICB9Cj4KPiAgICAgICAgICAgICAgICAgaWYgKHN0
YXR1cyAmIEpPQl9JTlRfTUFTS19FUlIoaikpIHsKPiAgICAgICAgICAgICAgICAgICAgICAgICBq
b2Jfd3JpdGUocGZkZXYsIEpTX0NPTU1BTkRfTkVYVChqKSwgSlNfQ09NTUFORF9OT1ApOwo+IEBA
IC00NDcsMjAgKzQ5NCwyNSBAQCBzdGF0aWMgaXJxcmV0dXJuX3QgcGFuZnJvc3Rfam9iX2lycV9o
YW5kbGVyKGludCBpcnEsIHZvaWQgKmRhdGEpCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBqb2JfcmVhZChwZmRldiwgSlNfVEFJTF9MTyhqKSkpOwo+Cj4gICAgICAgICAgICAgICAg
ICAgICAgICAgZHJtX3NjaGVkX2ZhdWx0KCZwZmRldi0+anMtPnF1ZXVlW2pdLnNjaGVkKTsKPiAr
ICAgICAgICAgICAgICAgICAgICAgICBqb2JzIC0tOwo+ICAgICAgICAgICAgICAgICB9Cj4KPiAt
ICAgICAgICAgICAgICAgaWYgKHN0YXR1cyAmIEpPQl9JTlRfTUFTS19ET05FKGopKSB7Cj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHBhbmZyb3N0X2pvYiAqam9iID0gcGZkZXYtPmpv
YnNbal07Cj4gKyAgICAgICAgICAgICAgIHdoaWxlIChqb2JzIC0tID4gYWN0aXZlKSB7Cj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHBhbmZyb3N0X2pvYiAqam9iID0KPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHBhbmZyb3N0X2RlcXVldWVfam9iKHBmZGV2LCBqKTsK
Pgo+IC0gICAgICAgICAgICAgICAgICAgICAgIHBmZGV2LT5qb2JzW2pdID0gTlVMTDsKPiAgICAg
ICAgICAgICAgICAgICAgICAgICBwYW5mcm9zdF9tbXVfYXNfcHV0KHBmZGV2LCAmam9iLT5maWxl
X3ByaXYtPm1tdSk7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgcGFuZnJvc3RfZGV2ZnJlcV9y
ZWNvcmRfdHJhbnNpdGlvbihwZmRldiwgaik7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgZG1h
X2ZlbmNlX3NpZ25hbChqb2ItPmRvbmVfZmVuY2UpOwo+ICAgICAgICAgICAgICAgICB9Cj4KPiAr
ICAgICAgICAgICAgICAgaWYgKCFhY3RpdmUpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgcGFu
ZnJvc3RfZGV2ZnJlcV9yZWNvcmRfdHJhbnNpdGlvbihwZmRldiwgaik7Cj4gKwo+ICAgICAgICAg
ICAgICAgICBzdGF0dXMgJj0gfm1hc2s7Cj4gICAgICAgICB9Cj4KPiArICAgICAgIHNwaW5fdW5s
b2NrX2lycXJlc3RvcmUoJnBmZGV2LT5od2FjY2Vzc19sb2NrLCBmbGFncyk7Cj4gKwo+ICAgICAg
ICAgcmV0dXJuIElSUV9IQU5ETEVEOwo+ICB9Cj4KPiBAQCAtNDkxLDcgKzU0Myw3IEBAIGludCBw
YW5mcm9zdF9qb2JfaW5pdChzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldikKPgo+ICAgICAg
ICAgICAgICAgICByZXQgPSBkcm1fc2NoZWRfaW5pdCgmanMtPnF1ZXVlW2pdLnNjaGVkLAo+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmcGFuZnJvc3Rfc2NoZWRfb3BzLAo+
IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLCAwLCBtc2Vjc190b19qaWZm
aWVzKDUwMCksCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIsIDAsIG1z
ZWNzX3RvX2ppZmZpZXMoNTAwKSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgInBhbl9qcyIpOwo+ICAgICAgICAgICAgICAgICBpZiAocmV0KSB7Cj4gICAgICAgICAgICAg
ICAgICAgICAgICAgZGV2X2VycihwZmRldi0+ZGV2LCAiRmFpbGVkIHRvIGNyZWF0ZSBzY2hlZHVs
ZXI6ICVkLiIsIHJldCk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9w
YW5mcm9zdF9tbXUuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9tbXUuYwo+
IGluZGV4IGYyMmQ4ZjAyNTY4ZC4uYzI1ZmQ4OGVmNDM3IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9tbXUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9w
YW5mcm9zdC9wYW5mcm9zdF9tbXUuYwo+IEBAIC0xNDcsNyArMTQ3LDcgQEAgdTMyIHBhbmZyb3N0
X21tdV9hc19nZXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIHN0cnVjdCBwYW5mcm9z
dF9tbXUgKm1tdSkKPiAgICAgICAgIGFzID0gbW11LT5hczsKPiAgICAgICAgIGlmIChhcyA+PSAw
KSB7Cj4gICAgICAgICAgICAgICAgIGludCBlbiA9IGF0b21pY19pbmNfcmV0dXJuKCZtbXUtPmFz
X2NvdW50KTsKPiAtICAgICAgICAgICAgICAgV0FSTl9PTihlbiA+PSBOVU1fSk9CX1NMT1RTKTsK
PiArICAgICAgICAgICAgICAgV0FSTl9PTihlbiA+PSBOVU1fSk9CX1NMT1RTKjIpOwo+Cj4gICAg
ICAgICAgICAgICAgIGxpc3RfbW92ZSgmbW11LT5saXN0LCAmcGZkZXYtPmFzX2xydV9saXN0KTsK
PiAgICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4gLS0KPiAyLjIwLjEKPgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0
CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
