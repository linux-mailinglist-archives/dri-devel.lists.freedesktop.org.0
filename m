Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6EB146CE5A
	for <lists+dri-devel@lfdr.de>; Thu, 18 Jul 2019 14:57:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 26ED76E3B4;
	Thu, 18 Jul 2019 12:57:02 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x444.google.com (mail-wr1-x444.google.com
 [IPv6:2a00:1450:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 202806E3AE
 for <dri-devel@lists.freedesktop.org>; Thu, 18 Jul 2019 12:57:00 +0000 (UTC)
Received: by mail-wr1-x444.google.com with SMTP id n4so28633380wrs.3
 for <dri-devel@lists.freedesktop.org>; Thu, 18 Jul 2019 05:57:00 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=GBZIMb/cv4p86kHI5WJte6N1oUCOAcyaBxPi0Hq61Aw=;
 b=s7TuHdjAsKl9r1gtlp2VDfb5pVxYLYmWo97To6WVUNqI/07sqQhphTezUQpZxJ/LOb
 Yv61TIRw/dO0Zz5jSRY++DCh24tgSnnPvWKgcHUEX1ToDS2sT8Z7HVnGuvBMTjgHp4EL
 epy76/ZgMaNLdbrNIwkKI5h7Qch0OVo7AKTU+sgSeh3tm32mMO47U79nGE3l+KL9GPr7
 vJwVLSOs/3uO2eSgXXnCbRc+gcxp9mGEqoY5h3SWKR02LDGZVIUG4P5OFqZs+40zRtQ2
 07lxY2lpKJn9tjU1yRWTOJKqE6XcoR1/SpDUoUAtH01CL8gJ5Mwwu8V57VsrM0RKgJ6N
 91tg==
X-Gm-Message-State: APjAAAX1vO0sllq/g6+5x6/b3RCBAlNhGmUJHhsAh8RX4tYZDbgnepxE
 0wUYI+XR4yw/kJdimyV5nN0n/v12PEleECLos8i/Ml9hJyoq
X-Google-Smtp-Source: APXvYqwsDiDoa/u9Ygd5gihAYozyjCzB+4HWT9/GC9RwvJop09GJRlSYu6/VSqC50r7nHpO7u7jQTXCQp16GTDF2IHo=
X-Received: by 2002:adf:dfc4:: with SMTP id q4mr48860500wrn.54.1563454618636; 
 Thu, 18 Jul 2019 05:56:58 -0700 (PDT)
MIME-Version: 1.0
References: <20190718020745.8867-1-fred@fredlawl.com>
 <20190718020745.8867-3-fred@fredlawl.com>
In-Reply-To: <20190718020745.8867-3-fred@fredlawl.com>
From: Bjorn Helgaas <bhelgaas@google.com>
Date: Thu, 18 Jul 2019 07:56:46 -0500
Message-ID: <CAErSpo4tVvPFSh+fJmfSUNHhmjepDXrpoqVnvOx+jZY8u+r+aQ@mail.gmail.com>
Subject: Re: [PATCH] drm/radeon: Prefer pcie_capability_read_word()
To: Frederick Lawler <fred@fredlawl.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=GBZIMb/cv4p86kHI5WJte6N1oUCOAcyaBxPi0Hq61Aw=;
 b=M7b1cfX/FQQdwf5j1BZI0tZLYWnDxEN/RvoJcwpvS6vwpgCCk35TCYpO6rIw0vmEmN
 UbXR9fH0NPcQzqcIDfbA7u1JKcFFWX6e/ziF4OK6W94eDHSmVxXOMKAH752iSiaFZn73
 vyvwMEt5hLh54/0OBPYJb12uJ7bRTr6kwy2VTOOM1c97XE7o1devRMYA7x5sPti2ncc+
 O4obqmhblD1EnJLhnhEjoguDCNBkNpeoEW7brUXgogcwuIu9r5t9XY07m7njetMImgmM
 KdtYIIOU5hGVHTOm6kw1BvGc7gYR/XkNLRrEOFKm/Nfr0eHBgiFYNpsFyO7oDKnX+CIu
 03zA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>,
 DRI mailing list <dri-devel@lists.freedesktop.org>,
 amd-gfx@lists.freedesktop.org,
 Linux Kernel Mailing List <linux-kernel@vger.kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBKdWwgMTcsIDIwMTkgYXQgOTowOCBQTSBGcmVkZXJpY2sgTGF3bGVyIDxmcmVkQGZy
ZWRsYXdsLmNvbT4gd3JvdGU6Cj4KPiBDb21taXQgOGMwZDNhMDJjMTMwICgiUENJOiBBZGQgYWNj
ZXNzb3JzIGZvciBQQ0kgRXhwcmVzcyBDYXBhYmlsaXR5IikKPiBhZGRlZCBhY2Nlc3NvcnMgZm9y
IHRoZSBQQ0kgRXhwcmVzcyBDYXBhYmlsaXR5IHNvIHRoYXQgZHJpdmVycyBkaWRuJ3QKPiBuZWVk
IHRvIGJlIGF3YXJlIG9mIGRpZmZlcmVuY2VzIGJldHdlZW4gdjEgYW5kIHYyIG9mIHRoZSBQQ0kK
PiBFeHByZXNzIENhcGFiaWxpdHkuCj4KPiBSZXBsYWNlIHBjaV9yZWFkX2NvbmZpZ193b3JkKCkg
YW5kIHBjaV93cml0ZV9jb25maWdfd29yZCgpIGNhbGxzIHdpdGgKPiBwY2llX2NhcGFiaWxpdHlf
cmVhZF93b3JkKCkgYW5kIHBjaWVfY2FwYWJpbGl0eV93cml0ZV93b3JkKCkuCj4KPiBTaWduZWQt
b2ZmLWJ5OiBGcmVkZXJpY2sgTGF3bGVyIDxmcmVkQGZyZWRsYXdsLmNvbT4KPiAtLS0KPiAgZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9jaWsuYyB8IDcwICsrKysrKysrKysrKysrKysrKysrKy0tLS0t
LS0tLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9zaS5jICB8IDczICsrKysrKysrKysr
KysrKysrKysrKysrLS0tLS0tLS0tLS0tLQo+ICAyIGZpbGVzIGNoYW5nZWQsIDkwIGluc2VydGlv
bnMoKyksIDUzIGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9y
YWRlb24vY2lrLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL2Npay5jCj4gaW5kZXggYWI3YjRl
MmZmY2QyLi5mNmM5MWFjNTQyN2EgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVv
bi9jaWsuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vY2lrLmMKPiBAQCAtOTUwMCw3
ICs5NTAwLDYgQEAgc3RhdGljIHZvaWQgY2lrX3BjaWVfZ2VuM19lbmFibGUoc3RydWN0IHJhZGVv
bl9kZXZpY2UgKnJkZXYpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBwY2lfZGV2ICpyb290ID0gcmRl
di0+cGRldi0+YnVzLT5zZWxmOwo+ICAgICAgICAgZW51bSBwY2lfYnVzX3NwZWVkIHNwZWVkX2Nh
cDsKPiAtICAgICAgIGludCBicmlkZ2VfcG9zLCBncHVfcG9zOwo+ICAgICAgICAgdTMyIHNwZWVk
X2NudGwsIGN1cnJlbnRfZGF0YV9yYXRlOwo+ICAgICAgICAgaW50IGk7Cj4gICAgICAgICB1MTYg
dG1wMTY7Cj4gQEAgLTk1NDIsMTIgKzk1NDEsNyBAQCBzdGF0aWMgdm9pZCBjaWtfcGNpZV9nZW4z
X2VuYWJsZShzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKPiAgICAgICAgICAgICAgICAgRFJN
X0lORk8oImVuYWJsaW5nIFBDSUUgZ2VuIDIgbGluayBzcGVlZHMsIGRpc2FibGUgd2l0aCByYWRl
b24ucGNpZV9nZW4yPTBcbiIpOwo+ICAgICAgICAgfQo+Cj4gLSAgICAgICBicmlkZ2VfcG9zID0g
cGNpX3BjaWVfY2FwKHJvb3QpOwo+IC0gICAgICAgaWYgKCFicmlkZ2VfcG9zKQo+IC0gICAgICAg
ICAgICAgICByZXR1cm47Cj4gLQo+IC0gICAgICAgZ3B1X3BvcyA9IHBjaV9wY2llX2NhcChyZGV2
LT5wZGV2KTsKPiAtICAgICAgIGlmICghZ3B1X3BvcykKPiArICAgICAgIGlmICghcGNpX2lzX3Bj
aWUocm9vdCkgfHwgIXBjaV9pc19wY2llKHJkZXYtPnBkZXYpKQo+ICAgICAgICAgICAgICAgICBy
ZXR1cm47Cj4KPiAgICAgICAgIGlmIChzcGVlZF9jYXAgPT0gUENJRV9TUEVFRF84XzBHVCkgewo+
IEBAIC05NTU3LDE0ICs5NTUxLDE3IEBAIHN0YXRpYyB2b2lkIGNpa19wY2llX2dlbjNfZW5hYmxl
KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQo+ICAgICAgICAgICAgICAgICAgICAgICAgIHUx
NiBicmlkZ2VfY2ZnMiwgZ3B1X2NmZzI7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgdTMyIG1h
eF9sdywgY3VycmVudF9sdywgdG1wOwo+Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgcGNpX3Jl
YWRfY29uZmlnX3dvcmQocm9vdCwgYnJpZGdlX3BvcyArIFBDSV9FWFBfTE5LQ1RMLCAmYnJpZGdl
X2NmZyk7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgcGNpX3JlYWRfY29uZmlnX3dvcmQocmRl
di0+cGRldiwgZ3B1X3BvcyArIFBDSV9FWFBfTE5LQ1RMLCAmZ3B1X2NmZyk7Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgcGNpZV9jYXBhYmlsaXR5X3JlYWRfd29yZChyb290LCBQQ0lfRVhQX0xO
S0NUTCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICZicmlkZ2VfY2ZnKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBwY2llX2NhcGFiaWxpdHlf
cmVhZF93b3JkKHJkZXYtPnBkZXYsIFBDSV9FWFBfTE5LQ1RMLAo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmdwdV9jZmcpOwo+Cj4gICAgICAgICAg
ICAgICAgICAgICAgICAgdG1wMTYgPSBicmlkZ2VfY2ZnIHwgUENJX0VYUF9MTktDVExfSEFXRDsK
PiAtICAgICAgICAgICAgICAgICAgICAgICBwY2lfd3JpdGVfY29uZmlnX3dvcmQocm9vdCwgYnJp
ZGdlX3BvcyArIFBDSV9FWFBfTE5LQ1RMLCB0bXAxNik7Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgcGNpZV9jYXBhYmlsaXR5X3dyaXRlX3dvcmQocm9vdCwgUENJX0VYUF9MTktDVEwsIHRtcDE2
KTsKPgo+ICAgICAgICAgICAgICAgICAgICAgICAgIHRtcDE2ID0gZ3B1X2NmZyB8IFBDSV9FWFBf
TE5LQ1RMX0hBV0Q7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgcGNpX3dyaXRlX2NvbmZpZ193
b3JkKHJkZXYtPnBkZXYsIGdwdV9wb3MgKyBQQ0lfRVhQX0xOS0NUTCwgdG1wMTYpOwo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIHBjaWVfY2FwYWJpbGl0eV93cml0ZV93b3JkKHJkZXYtPnBkZXYs
IFBDSV9FWFBfTE5LQ1RMLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHRtcDE2KTsKPgo+ICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IFJS
RUczMl9QQ0lFX1BPUlQoUENJRV9MQ19TVEFUVVMxKTsKPiAgICAgICAgICAgICAgICAgICAgICAg
ICBtYXhfbHcgPSAodG1wICYgTENfREVURUNURURfTElOS19XSURUSF9NQVNLKSA+PiBMQ19ERVRF
Q1RFRF9MSU5LX1dJRFRIX1NISUZUOwo+IEBAIC05NTgyLDE1ICs5NTc5LDIzIEBAIHN0YXRpYyB2
b2lkIGNpa19wY2llX2dlbjNfZW5hYmxlKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQo+Cj4g
ICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDEwOyBpKyspIHsKPiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGNoZWNrIHN0YXR1cyAqLwo+IC0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcGNpX3JlYWRfY29uZmlnX3dvcmQocmRldi0+cGRldiwg
Z3B1X3BvcyArIFBDSV9FWFBfREVWU1RBLCAmdG1wMTYpOwo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcGNpZV9jYXBhYmlsaXR5X3JlYWRfd29yZChyZGV2LT5wZGV2LAo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQQ0lf
RVhQX0RFVlNUQSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgJnRtcDE2KTsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGlmICh0bXAxNiAmIFBDSV9FWFBfREVWU1RBX1RSUE5EKQo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBicmVhazsKPgo+IC0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgcGNpX3JlYWRfY29uZmlnX3dvcmQocm9vdCwgYnJpZGdlX3BvcyArIFBDSV9FWFBfTE5L
Q1RMLCAmYnJpZGdlX2NmZyk7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2lf
cmVhZF9jb25maWdfd29yZChyZGV2LT5wZGV2LCBncHVfcG9zICsgUENJX0VYUF9MTktDVEwsICZn
cHVfY2ZnKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjaWVfY2FwYWJpbGl0
eV9yZWFkX3dvcmQocm9vdCwgUENJX0VYUF9MTktDVEwsCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZicmlkZ2VfY2ZnKTsKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjaWVfY2FwYWJpbGl0eV9yZWFkX3dvcmQocmRl
di0+cGRldiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgUENJX0VYUF9MTktDVEwsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZncHVfY2ZnKTsKPgo+IC0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcGNpX3JlYWRfY29uZmlnX3dvcmQocm9vdCwgYnJpZGdlX3Bv
cyArIFBDSV9FWFBfTE5LQ1RMMiwgJmJyaWRnZV9jZmcyKTsKPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHBjaV9yZWFkX2NvbmZpZ193b3JkKHJkZXYtPnBkZXYsIGdwdV9wb3MgKyBQ
Q0lfRVhQX0xOS0NUTDIsICZncHVfY2ZnMik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBwY2llX2NhcGFiaWxpdHlfcmVhZF93b3JkKHJvb3QsIFBDSV9FWFBfTE5LQ1RMMiwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
JmJyaWRnZV9jZmcyKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjaWVfY2Fw
YWJpbGl0eV9yZWFkX3dvcmQocmRldi0+cGRldiwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUENJX0VYUF9MTktDVEwyLAo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmZ3B1
X2NmZzIpOwo+Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAgPSBSUkVHMzJf
UENJRV9QT1JUKFBDSUVfTENfQ05UTDQpOwo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdG1wIHw9IExDX1NFVF9RVUlFU0NFOwo+IEBAIC05NjAzLDI2ICs5NjA4LDM5IEBAIHN0YXRp
YyB2b2lkIGNpa19wY2llX2dlbjNfZW5hYmxlKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNsZWVwKDEwMCk7Cj4KPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGxpbmtjdGwgKi8KPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHBjaV9yZWFkX2NvbmZpZ193b3JkKHJvb3QsIGJyaWRnZV9wb3MgKyBQ
Q0lfRVhQX0xOS0NUTCwgJnRtcDE2KTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHBjaWVfY2FwYWJpbGl0eV9yZWFkX3dvcmQocm9vdCwgUENJX0VYUF9MTktDVEwsCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZ0bXAx
Nik7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAxNiAmPSB+UENJX0VYUF9M
TktDVExfSEFXRDsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcDE2IHw9IChi
cmlkZ2VfY2ZnICYgUENJX0VYUF9MTktDVExfSEFXRCk7Cj4gLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBwY2lfd3JpdGVfY29uZmlnX3dvcmQocm9vdCwgYnJpZGdlX3BvcyArIFBDSV9F
WFBfTE5LQ1RMLCB0bXAxNik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2ll
X2NhcGFiaWxpdHlfd3JpdGVfd29yZChyb290LCBQQ0lfRVhQX0xOS0NUTCwKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcDE2KTsK
Pgo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNpX3JlYWRfY29uZmlnX3dvcmQo
cmRldi0+cGRldiwgZ3B1X3BvcyArIFBDSV9FWFBfTE5LQ1RMLCAmdG1wMTYpOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcGNpZV9jYXBhYmlsaXR5X3JlYWRfd29yZChyZGV2LT5w
ZGV2LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBQQ0lfRVhQX0xOS0NUTCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgJnRtcDE2KTsKPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHRtcDE2ICY9IH5QQ0lfRVhQX0xOS0NUTF9IQVdEOwo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdG1wMTYgfD0gKGdwdV9jZmcgJiBQQ0lfRVhQX0xOS0NUTF9I
QVdEKTsKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjaV93cml0ZV9jb25maWdf
d29yZChyZGV2LT5wZGV2LCBncHVfcG9zICsgUENJX0VYUF9MTktDVEwsIHRtcDE2KTsKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjaWVfY2FwYWJpbGl0eV93cml0ZV93b3JkKHJk
ZXYtPnBkZXYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBQQ0lfRVhQX0xOS0NUTCwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcDE2KTsKPgo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgLyogbGlua2N0bDIgKi8KPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHBjaV9yZWFkX2NvbmZpZ193b3JkKHJvb3QsIGJyaWRnZV9wb3MgKyBQQ0lf
RVhQX0xOS0NUTDIsICZ0bXAxNik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
Y2llX2NhcGFiaWxpdHlfcmVhZF93b3JkKHJvb3QsIFBDSV9FWFBfTE5LQ1RMMiwKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnRtcDE2
KTsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcDE2ICY9IH4oKDEgPDwgNCkg
fCAoNyA8PCA5KSk7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAxNiB8PSAo
YnJpZGdlX2NmZzIgJiAoKDEgPDwgNCkgfCAoNyA8PCA5KSkpOwoKTG9va3MgbGlrZSB3ZSBjb3Vs
ZCB1c2Ugc29tZSBuZXcgI2RlZmluZXMgZm9yIHRoZXNlIExOS0NUTDIgYml0cyAoYWxzbyBiZWxv
dykuCgo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNpX3dyaXRlX2NvbmZpZ193
b3JkKHJvb3QsIGJyaWRnZV9wb3MgKyBQQ0lfRVhQX0xOS0NUTDIsIHRtcDE2KTsKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHBjaWVfY2FwYWJpbGl0eV93cml0ZV93b3JkKHJvb3Qs
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBQQ0lfRVhQX0xOS0NUTDIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAxNik7Cj4KPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHBjaV9yZWFkX2NvbmZpZ193b3JkKHJkZXYtPnBkZXYsIGdwdV9wb3MgKyBQ
Q0lfRVhQX0xOS0NUTDIsICZ0bXAxNik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwY2llX2NhcGFiaWxpdHlfcmVhZF93b3JkKHJkZXYtPnBkZXYsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBDSV9FWFBfTE5LQ1RM
MiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgJnRtcDE2KTsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcDE2ICY9
IH4oKDEgPDwgNCkgfCAoNyA8PCA5KSk7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB0bXAxNiB8PSAoZ3B1X2NmZzIgJiAoKDEgPDwgNCkgfCAoNyA8PCA5KSkpOwo+IC0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcGNpX3dyaXRlX2NvbmZpZ193b3JkKHJkZXYtPnBkZXYs
IGdwdV9wb3MgKyBQQ0lfRVhQX0xOS0NUTDIsIHRtcDE2KTsKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHBjaWVfY2FwYWJpbGl0eV93cml0ZV93b3JkKHJkZXYtPnBkZXYsCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQ
Q0lfRVhQX0xOS0NUTDIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB0bXAxNik7Cj4KPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHRtcCA9IFJSRUczMl9QQ0lFX1BPUlQoUENJRV9MQ19DTlRMNCk7Cj4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB0bXAgJj0gfkxDX1NFVF9RVUlFU0NFOwo+IEBAIC05NjM2
LDcgKzk2NTQsNyBAQCBzdGF0aWMgdm9pZCBjaWtfcGNpZV9nZW4zX2VuYWJsZShzdHJ1Y3QgcmFk
ZW9uX2RldmljZSAqcmRldikKPiAgICAgICAgIHNwZWVkX2NudGwgJj0gfkxDX0ZPUkNFX0RJU19T
V19TUEVFRF9DSEFOR0U7Cj4gICAgICAgICBXUkVHMzJfUENJRV9QT1JUKFBDSUVfTENfU1BFRURf
Q05UTCwgc3BlZWRfY250bCk7Cj4KPiAtICAgICAgIHBjaV9yZWFkX2NvbmZpZ193b3JkKHJkZXYt
PnBkZXYsIGdwdV9wb3MgKyBQQ0lfRVhQX0xOS0NUTDIsICZ0bXAxNik7Cj4gKyAgICAgICBwY2ll
X2NhcGFiaWxpdHlfcmVhZF93b3JkKHJkZXYtPnBkZXYsIFBDSV9FWFBfTE5LQ1RMMiwgJnRtcDE2
KTsKPiAgICAgICAgIHRtcDE2ICY9IH4weGY7Cj4gICAgICAgICBpZiAoc3BlZWRfY2FwID09IFBD
SUVfU1BFRURfOF8wR1QpCj4gICAgICAgICAgICAgICAgIHRtcDE2IHw9IDM7IC8qIGdlbjMgKi8K
PiBAQCAtOTY0NCw3ICs5NjYyLDcgQEAgc3RhdGljIHZvaWQgY2lrX3BjaWVfZ2VuM19lbmFibGUo
c3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCj4gICAgICAgICAgICAgICAgIHRtcDE2IHw9IDI7
IC8qIGdlbjIgKi8KPiAgICAgICAgIGVsc2UKPiAgICAgICAgICAgICAgICAgdG1wMTYgfD0gMTsg
LyogZ2VuMSAqLwo+IC0gICAgICAgcGNpX3dyaXRlX2NvbmZpZ193b3JkKHJkZXYtPnBkZXYsIGdw
dV9wb3MgKyBQQ0lfRVhQX0xOS0NUTDIsIHRtcDE2KTsKPiArICAgICAgIHBjaWVfY2FwYWJpbGl0
eV93cml0ZV93b3JkKHJkZXYtPnBkZXYsIFBDSV9FWFBfTE5LQ1RMMiwgdG1wMTYpOwo+Cj4gICAg
ICAgICBzcGVlZF9jbnRsID0gUlJFRzMyX1BDSUVfUE9SVChQQ0lFX0xDX1NQRUVEX0NOVEwpOwo+
ICAgICAgICAgc3BlZWRfY250bCB8PSBMQ19JTklUSUFURV9MSU5LX1NQRUVEX0NIQU5HRTsKPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9zaS5jIGIvZHJpdmVycy9ncHUvZHJt
L3JhZGVvbi9zaS5jCj4gaW5kZXggODQxYmM4YmMzMzNkLi42OTE2NzAzZDc4OTkgMTAwNjQ0Cj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9zaS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L3JhZGVvbi9zaS5jCj4gQEAgLTMyNTMsNyArMzI1Myw3IEBAIHN0YXRpYyB2b2lkIHNpX2dwdV9p
bml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQo+ICAgICAgICAgICAgICAgICAvKiBYWFgg
d2hhdCBhYm91dCAxMj8gKi8KPiAgICAgICAgICAgICAgICAgcmRldi0+Y29uZmlnLnNpLnRpbGVf
Y29uZmlnIHw9ICgzIDw8IDApOwo+ICAgICAgICAgICAgICAgICBicmVhazsKPiAtICAgICAgIH0K
PiArICAgICAgIH0KPiAgICAgICAgIHN3aXRjaCAoKG1jX2FyYl9yYW1jZmcgJiBOT09GQkFOS19N
QVNLKSA+PiBOT09GQkFOS19TSElGVCkgewo+ICAgICAgICAgY2FzZSAwOiAvKiBmb3VyIGJhbmtz
ICovCj4gICAgICAgICAgICAgICAgIHJkZXYtPmNvbmZpZy5zaS50aWxlX2NvbmZpZyB8PSAwIDw8
IDQ7Cj4gQEAgLTcwODMsNyArNzA4Myw2IEBAIHN0YXRpYyB2b2lkIHNpX3BjaWVfZ2VuM19lbmFi
bGUoc3RydWN0IHJhZGVvbl9kZXZpY2UgKnJkZXYpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBwY2lf
ZGV2ICpyb290ID0gcmRldi0+cGRldi0+YnVzLT5zZWxmOwo+ICAgICAgICAgZW51bSBwY2lfYnVz
X3NwZWVkIHNwZWVkX2NhcDsKPiAtICAgICAgIGludCBicmlkZ2VfcG9zLCBncHVfcG9zOwo+ICAg
ICAgICAgdTMyIHNwZWVkX2NudGwsIGN1cnJlbnRfZGF0YV9yYXRlOwo+ICAgICAgICAgaW50IGk7
Cj4gICAgICAgICB1MTYgdG1wMTY7Cj4gQEAgLTcxMjUsMTIgKzcxMjQsNyBAQCBzdGF0aWMgdm9p
ZCBzaV9wY2llX2dlbjNfZW5hYmxlKHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQo+ICAgICAg
ICAgICAgICAgICBEUk1fSU5GTygiZW5hYmxpbmcgUENJRSBnZW4gMiBsaW5rIHNwZWVkcywgZGlz
YWJsZSB3aXRoIHJhZGVvbi5wY2llX2dlbjI9MFxuIik7Cj4gICAgICAgICB9Cj4KPiAtICAgICAg
IGJyaWRnZV9wb3MgPSBwY2lfcGNpZV9jYXAocm9vdCk7Cj4gLSAgICAgICBpZiAoIWJyaWRnZV9w
b3MpCj4gLSAgICAgICAgICAgICAgIHJldHVybjsKPiAtCj4gLSAgICAgICBncHVfcG9zID0gcGNp
X3BjaWVfY2FwKHJkZXYtPnBkZXYpOwo+IC0gICAgICAgaWYgKCFncHVfcG9zKQo+ICsgICAgICAg
aWYgKCFwY2lfaXNfcGNpZShyb290KSB8fCAhcGNpX2lzX3BjaWUocmRldi0+cGRldikpCj4gICAg
ICAgICAgICAgICAgIHJldHVybjsKPgo+ICAgICAgICAgaWYgKHNwZWVkX2NhcCA9PSBQQ0lFX1NQ
RUVEXzhfMEdUKSB7Cj4gQEAgLTcxNDAsMTQgKzcxMzQsMTcgQEAgc3RhdGljIHZvaWQgc2lfcGNp
ZV9nZW4zX2VuYWJsZShzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldikKPiAgICAgICAgICAgICAg
ICAgICAgICAgICB1MTYgYnJpZGdlX2NmZzIsIGdwdV9jZmcyOwo+ICAgICAgICAgICAgICAgICAg
ICAgICAgIHUzMiBtYXhfbHcsIGN1cnJlbnRfbHcsIHRtcDsKPgo+IC0gICAgICAgICAgICAgICAg
ICAgICAgIHBjaV9yZWFkX2NvbmZpZ193b3JkKHJvb3QsIGJyaWRnZV9wb3MgKyBQQ0lfRVhQX0xO
S0NUTCwgJmJyaWRnZV9jZmcpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIHBjaV9yZWFkX2Nv
bmZpZ193b3JkKHJkZXYtPnBkZXYsIGdwdV9wb3MgKyBQQ0lfRVhQX0xOS0NUTCwgJmdwdV9jZmcp
Owo+ICsgICAgICAgICAgICAgICAgICAgICAgIHBjaWVfY2FwYWJpbGl0eV9yZWFkX3dvcmQocm9v
dCwgUENJX0VYUF9MTktDVEwsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAmYnJpZGdlX2NmZyk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgcGNp
ZV9jYXBhYmlsaXR5X3JlYWRfd29yZChyZGV2LT5wZGV2LCBQQ0lfRVhQX0xOS0NUTCwKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZncHVfY2ZnKTsK
Pgo+ICAgICAgICAgICAgICAgICAgICAgICAgIHRtcDE2ID0gYnJpZGdlX2NmZyB8IFBDSV9FWFBf
TE5LQ1RMX0hBV0Q7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgcGNpX3dyaXRlX2NvbmZpZ193
b3JkKHJvb3QsIGJyaWRnZV9wb3MgKyBQQ0lfRVhQX0xOS0NUTCwgdG1wMTYpOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIHBjaWVfY2FwYWJpbGl0eV93cml0ZV93b3JkKHJvb3QsIFBDSV9FWFBf
TE5LQ1RMLCB0bXAxNik7Cj4KPiAgICAgICAgICAgICAgICAgICAgICAgICB0bXAxNiA9IGdwdV9j
ZmcgfCBQQ0lfRVhQX0xOS0NUTF9IQVdEOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIHBjaV93
cml0ZV9jb25maWdfd29yZChyZGV2LT5wZGV2LCBncHVfcG9zICsgUENJX0VYUF9MTktDVEwsIHRt
cDE2KTsKPiArICAgICAgICAgICAgICAgICAgICAgICBwY2llX2NhcGFiaWxpdHlfd3JpdGVfd29y
ZChyZGV2LT5wZGV2LCBQQ0lfRVhQX0xOS0NUTCwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAxNik7Cj4KPiAgICAgICAgICAgICAgICAgICAg
ICAgICB0bXAgPSBSUkVHMzJfUENJRShQQ0lFX0xDX1NUQVRVUzEpOwo+ICAgICAgICAgICAgICAg
ICAgICAgICAgIG1heF9sdyA9ICh0bXAgJiBMQ19ERVRFQ1RFRF9MSU5LX1dJRFRIX01BU0spID4+
IExDX0RFVEVDVEVEX0xJTktfV0lEVEhfU0hJRlQ7Cj4gQEAgLTcxNjUsMTUgKzcxNjIsMjMgQEAg
c3RhdGljIHZvaWQgc2lfcGNpZV9nZW4zX2VuYWJsZShzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRl
dikKPgo+ICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAxMDsgaSsrKSB7
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBjaGVjayBzdGF0dXMgKi8KPiAt
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjaV9yZWFkX2NvbmZpZ193b3JkKHJkZXYt
PnBkZXYsIGdwdV9wb3MgKyBQQ0lfRVhQX0RFVlNUQSwgJnRtcDE2KTsKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHBjaWVfY2FwYWJpbGl0eV9yZWFkX3dvcmQocmRldi0+cGRldiwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgUENJX0VYUF9ERVZTVEEsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZ0bXAxNik7Cj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpZiAodG1wMTYgJiBQQ0lfRVhQX0RFVlNUQV9UUlBORCkKPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4KPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHBjaV9yZWFkX2NvbmZpZ193b3JkKHJvb3QsIGJyaWRnZV9wb3MgKyBQQ0lf
RVhQX0xOS0NUTCwgJmJyaWRnZV9jZmcpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgcGNpX3JlYWRfY29uZmlnX3dvcmQocmRldi0+cGRldiwgZ3B1X3BvcyArIFBDSV9FWFBfTE5L
Q1RMLCAmZ3B1X2NmZyk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2llX2Nh
cGFiaWxpdHlfcmVhZF93b3JkKHJvb3QsIFBDSV9FWFBfTE5LQ1RMLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmYnJpZGdlX2NmZyk7
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2llX2NhcGFiaWxpdHlfcmVhZF93
b3JkKHJkZXYtPnBkZXYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIFBDSV9FWFBfTE5LQ1RMLAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmZ3B1X2NmZyk7Cj4KPiAtICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjaV9yZWFkX2NvbmZpZ193b3JkKHJvb3QsIGJy
aWRnZV9wb3MgKyBQQ0lfRVhQX0xOS0NUTDIsICZicmlkZ2VfY2ZnMik7Cj4gLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBwY2lfcmVhZF9jb25maWdfd29yZChyZGV2LT5wZGV2LCBncHVf
cG9zICsgUENJX0VYUF9MTktDVEwyLCAmZ3B1X2NmZzIpOwo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcGNpZV9jYXBhYmlsaXR5X3JlYWRfd29yZChyb290LCBQQ0lfRVhQX0xOS0NU
TDIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICZicmlkZ2VfY2ZnMik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
Y2llX2NhcGFiaWxpdHlfcmVhZF93b3JkKHJkZXYtPnBkZXYsCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBDSV9FWFBfTE5LQ1RMMiwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgJmdwdV9jZmcyKTsKPgo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wID0g
UlJFRzMyX1BDSUVfUE9SVChQQ0lFX0xDX0NOVEw0KTsKPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHRtcCB8PSBMQ19TRVRfUVVJRVNDRTsKPiBAQCAtNzE4NiwyNiArNzE5MSw0MCBA
QCBzdGF0aWMgdm9pZCBzaV9wY2llX2dlbjNfZW5hYmxlKHN0cnVjdCByYWRlb25fZGV2aWNlICpy
ZGV2KQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNsZWVwKDEwMCk7Cj4KPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGxpbmtjdGwgKi8KPiAtICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHBjaV9yZWFkX2NvbmZpZ193b3JkKHJvb3QsIGJyaWRnZV9w
b3MgKyBQQ0lfRVhQX0xOS0NUTCwgJnRtcDE2KTsKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHBjaWVfY2FwYWJpbGl0eV9yZWFkX3dvcmQocm9vdCwgUENJX0VYUF9MTktDVEwsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICZ0bXAxNik7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAxNiAmPSB+UENJ
X0VYUF9MTktDVExfSEFXRDsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcDE2
IHw9IChicmlkZ2VfY2ZnICYgUENJX0VYUF9MTktDVExfSEFXRCk7Cj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBwY2lfd3JpdGVfY29uZmlnX3dvcmQocm9vdCwgYnJpZGdlX3BvcyAr
IFBDSV9FWFBfTE5LQ1RMLCB0bXAxNik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwY2llX2NhcGFiaWxpdHlfd3JpdGVfd29yZChyb290LAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUENJX0VYUF9MTktDVEwsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB0bXAxNik7Cj4KPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjaV9yZWFkX2Nv
bmZpZ193b3JkKHJkZXYtPnBkZXYsIGdwdV9wb3MgKyBQQ0lfRVhQX0xOS0NUTCwgJnRtcDE2KTsK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjaWVfY2FwYWJpbGl0eV9yZWFkX3dv
cmQocmRldi0+cGRldiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgUENJX0VYUF9MTktDVEwsCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZ0bXAxNik7Cj4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB0bXAxNiAmPSB+UENJX0VYUF9MTktDVExfSEFXRDsKPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcDE2IHw9IChncHVfY2ZnICYgUENJX0VY
UF9MTktDVExfSEFXRCk7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2lfd3Jp
dGVfY29uZmlnX3dvcmQocmRldi0+cGRldiwgZ3B1X3BvcyArIFBDSV9FWFBfTE5LQ1RMLCB0bXAx
Nik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2llX2NhcGFiaWxpdHlfd3Jp
dGVfd29yZChyZGV2LT5wZGV2LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgUENJX0VYUF9MTktDVEwsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAxNik7Cj4KPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGxpbmtjdGwyICovCj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBwY2lfcmVhZF9jb25maWdfd29yZChyb290LCBicmlkZ2Vf
cG9zICsgUENJX0VYUF9MTktDVEwyLCAmdG1wMTYpOwo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcGNpZV9jYXBhYmlsaXR5X3JlYWRfd29yZChyb290LCBQQ0lfRVhQX0xOS0NUTDIs
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICZ0bXAxNik7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAxNiAmPSB+
KCgxIDw8IDQpIHwgKDcgPDwgOSkpOwo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dG1wMTYgfD0gKGJyaWRnZV9jZmcyICYgKCgxIDw8IDQpIHwgKDcgPDwgOSkpKTsKPiAtICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHBjaV93cml0ZV9jb25maWdfd29yZChyb290LCBicmlk
Z2VfcG9zICsgUENJX0VYUF9MTktDVEwyLCB0bXAxNik7Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBwY2llX2NhcGFiaWxpdHlfd3JpdGVfd29yZChyb290LAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUENJX0VYUF9M
TktDVEwyLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdG1wMTYpOwo+Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
Y2lfcmVhZF9jb25maWdfd29yZChyZGV2LT5wZGV2LCBncHVfcG9zICsgUENJX0VYUF9MTktDVEwy
LCAmdG1wMTYpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNpZV9jYXBhYmls
aXR5X3JlYWRfd29yZChyZGV2LT5wZGV2LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQQ0lfRVhQX0xOS0NUTDIsCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZ0bXAxNik7
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAxNiAmPSB+KCgxIDw8IDQpIHwg
KDcgPDwgOSkpOwo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wMTYgfD0gKGdw
dV9jZmcyICYgKCgxIDw8IDQpIHwgKDcgPDwgOSkpKTsKPiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHBjaV93cml0ZV9jb25maWdfd29yZChyZGV2LT5wZGV2LCBncHVfcG9zICsgUENJ
X0VYUF9MTktDVEwyLCB0bXAxNik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
Y2llX2NhcGFiaWxpdHlfd3JpdGVfd29yZChyZGV2LT5wZGV2LAo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUENJX0VYUF9MTktDVEwy
LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdG1wMTYpOwo+Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAgPSBS
UkVHMzJfUENJRV9QT1JUKFBDSUVfTENfQ05UTDQpOwo+ICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgdG1wICY9IH5MQ19TRVRfUVVJRVNDRTsKPiBAQCAtNzIxOSw3ICs3MjM4LDcgQEAg
c3RhdGljIHZvaWQgc2lfcGNpZV9nZW4zX2VuYWJsZShzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRl
dikKPiAgICAgICAgIHNwZWVkX2NudGwgJj0gfkxDX0ZPUkNFX0RJU19TV19TUEVFRF9DSEFOR0U7
Cj4gICAgICAgICBXUkVHMzJfUENJRV9QT1JUKFBDSUVfTENfU1BFRURfQ05UTCwgc3BlZWRfY250
bCk7Cj4KPiAtICAgICAgIHBjaV9yZWFkX2NvbmZpZ193b3JkKHJkZXYtPnBkZXYsIGdwdV9wb3Mg
KyBQQ0lfRVhQX0xOS0NUTDIsICZ0bXAxNik7Cj4gKyAgICAgICBwY2llX2NhcGFiaWxpdHlfcmVh
ZF93b3JkKHJkZXYtPnBkZXYsIFBDSV9FWFBfTE5LQ1RMMiwgJnRtcDE2KTsKPiAgICAgICAgIHRt
cDE2ICY9IH4weGY7Cj4gICAgICAgICBpZiAoc3BlZWRfY2FwID09IFBDSUVfU1BFRURfOF8wR1Qp
Cj4gICAgICAgICAgICAgICAgIHRtcDE2IHw9IDM7IC8qIGdlbjMgKi8KClBDSV9FWFBfTE5LQ1RM
Ml9UTFMsIFBDSV9FWFBfTE5LQ1RMMl9UTFNfOF8wR1QsIGV0Yy4KCj4gQEAgLTcyMjcsNyArNzI0
Niw3IEBAIHN0YXRpYyB2b2lkIHNpX3BjaWVfZ2VuM19lbmFibGUoc3RydWN0IHJhZGVvbl9kZXZp
Y2UgKnJkZXYpCj4gICAgICAgICAgICAgICAgIHRtcDE2IHw9IDI7IC8qIGdlbjIgKi8KPiAgICAg
ICAgIGVsc2UKPiAgICAgICAgICAgICAgICAgdG1wMTYgfD0gMTsgLyogZ2VuMSAqLwo+IC0gICAg
ICAgcGNpX3dyaXRlX2NvbmZpZ193b3JkKHJkZXYtPnBkZXYsIGdwdV9wb3MgKyBQQ0lfRVhQX0xO
S0NUTDIsIHRtcDE2KTsKPiArICAgICAgIHBjaWVfY2FwYWJpbGl0eV93cml0ZV93b3JkKHJkZXYt
PnBkZXYsIFBDSV9FWFBfTE5LQ1RMMiwgdG1wMTYpOwo+Cj4gICAgICAgICBzcGVlZF9jbnRsID0g
UlJFRzMyX1BDSUVfUE9SVChQQ0lFX0xDX1NQRUVEX0NOVEwpOwo+ICAgICAgICAgc3BlZWRfY250
bCB8PSBMQ19JTklUSUFURV9MSU5LX1NQRUVEX0NIQU5HRTsKPiAtLQo+IDIuMTcuMQo+Cl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
