Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 99AFF17417
	for <lists+dri-devel@lfdr.de>; Wed,  8 May 2019 10:42:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7C6668982C;
	Wed,  8 May 2019 08:41:40 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx0a-001b2d01.pphosted.com (mx0b-001b2d01.pphosted.com
 [148.163.158.5])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0689B892B4
 for <dri-devel@lists.freedesktop.org>; Wed,  8 May 2019 07:02:53 +0000 (UTC)
Received: from pps.filterd (m0098416.ppops.net [127.0.0.1])
 by mx0b-001b2d01.pphosted.com (8.16.0.27/8.16.0.27) with SMTP id
 x487239j075984
 for <dri-devel@lists.freedesktop.org>; Wed, 8 May 2019 03:02:53 -0400
Received: from e06smtp01.uk.ibm.com (e06smtp01.uk.ibm.com [195.75.94.97])
 by mx0b-001b2d01.pphosted.com with ESMTP id 2sbt87reyn-1
 (version=TLSv1.2 cipher=AES256-GCM-SHA384 bits=256 verify=NOT)
 for <dri-devel@lists.freedesktop.org>; Wed, 08 May 2019 03:02:52 -0400
Received: from localhost
 by e06smtp01.uk.ibm.com with IBM ESMTP SMTP Gateway: Authorized Use Only!
 Violators will be prosecuted
 for <dri-devel@lists.freedesktop.org> from <alastair@au1.ibm.com>;
 Wed, 8 May 2019 08:02:50 +0100
Received: from b06cxnps3074.portsmouth.uk.ibm.com (9.149.109.194)
 by e06smtp01.uk.ibm.com (192.168.101.131) with IBM ESMTP SMTP Gateway:
 Authorized Use Only! Violators will be prosecuted; 
 (version=TLSv1/SSLv3 cipher=AES256-GCM-SHA384 bits=256/256)
 Wed, 8 May 2019 08:02:41 +0100
Received: from d06av26.portsmouth.uk.ibm.com (d06av26.portsmouth.uk.ibm.com
 [9.149.105.62])
 by b06cxnps3074.portsmouth.uk.ibm.com (8.14.9/8.14.9/NCO v10.0) with ESMTP id
 x4872euL55181412
 (version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
 Wed, 8 May 2019 07:02:40 GMT
Received: from d06av26.portsmouth.uk.ibm.com (unknown [127.0.0.1])
 by IMSVA (Postfix) with ESMTP id 130A8AE058;
 Wed,  8 May 2019 07:02:40 +0000 (GMT)
Received: from d06av26.portsmouth.uk.ibm.com (unknown [127.0.0.1])
 by IMSVA (Postfix) with ESMTP id 2C072AE053;
 Wed,  8 May 2019 07:02:39 +0000 (GMT)
Received: from ozlabs.au.ibm.com (unknown [9.192.253.14])
 by d06av26.portsmouth.uk.ibm.com (Postfix) with ESMTP;
 Wed,  8 May 2019 07:02:39 +0000 (GMT)
Received: from adsilva.ozlabs.ibm.com (haven.au.ibm.com [9.192.254.114])
 (using TLSv1.2 with cipher DHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by ozlabs.au.ibm.com (Postfix) with ESMTPSA id 7E655A03C4;
 Wed,  8 May 2019 17:02:35 +1000 (AEST)
From: "Alastair D'Silva" <alastair@au1.ibm.com>
To: alastair@d-silva.org
Subject: [PATCH v2 7/7] lib/hexdump.c: Optionally retain byte ordering
Date: Wed,  8 May 2019 17:01:47 +1000
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190508070148.23130-1-alastair@au1.ibm.com>
References: <20190508070148.23130-1-alastair@au1.ibm.com>
MIME-Version: 1.0
X-TM-AS-GCONF: 00
x-cbid: 19050807-4275-0000-0000-00000332844E
X-IBM-AV-DETECTION: SAVI=unused REMOTE=unused XFE=unused
x-cbparentid: 19050807-4276-0000-0000-00003841F1F4
Message-Id: <20190508070148.23130-8-alastair@au1.ibm.com>
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10434:, ,
 definitions=2019-05-08_05:, , signatures=0
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 priorityscore=1501
 malwarescore=0 suspectscore=1 phishscore=0 bulkscore=0 spamscore=0
 clxscore=1015 lowpriorityscore=0 mlxscore=0 impostorscore=0
 mlxlogscore=999 adultscore=0 classifier=spam adjust=0 reason=mlx
 scancount=1 engine=8.0.1-1810050000 definitions=main-1905080046
X-Mailman-Approved-At: Wed, 08 May 2019 08:41:38 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-fbdev@vger.kernel.org, Stanislaw Gruszka <sgruszka@redhat.com>,
 Petr Mladek <pmladek@suse.com>, David Airlie <airlied@linux.ie>,
 dri-devel@lists.freedesktop.org, devel@driverdev.osuosl.org,
 linux-scsi@vger.kernel.org, Jassi Brar <jassisinghbrar@gmail.com>,
 ath10k@lists.infradead.org, intel-gfx@lists.freedesktop.org,
 Dan Carpenter <dan.carpenter@oracle.com>, Jose Abreu <Jose.Abreu@synopsys.com>,
 Tom Lendacky <thomas.lendacky@amd.com>,
 "James E.J. Bottomley" <jejb@linux.ibm.com>, linux-fsdevel@vger.kernel.org,
 Steven Rostedt <rostedt@goodmis.org>, Rodrigo Vivi <rodrigo.vivi@intel.com>,
 Kalle Valo <kvalo@codeaurora.org>, Karsten Keil <isdn@linux-pingi.de>,
 "Martin K. Petersen" <martin.petersen@oracle.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 linux-wireless@vger.kernel.org, linux-kernel@vger.kernel.org,
 Sergey Senozhatsky <sergey.senozhatsky@gmail.com>,
 David Laight <David.Laight@ACULAB.COM>, netdev@vger.kernel.org,
 Enric Balletbo i Serra <enric.balletbo@collabora.com>,
 Andrew Morton <akpm@linux-foundation.org>,
 "David S. Miller" <davem@davemloft.net>,
 Alexander Viro <viro@zeniv.linux.org.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogQWxhc3RhaXIgRCdTaWx2YSA8YWxhc3RhaXJAZC1zaWx2YS5vcmc+CgpUaGUgYmVoYXZp
b3VyIG9mIGhleGR1bXAgZ3JvdXBzIGlzIHRvIHByaW50IHRoZSBkYXRhIG91dCBhcyBpZgppdCB3
YXMgYSBuYXRpdmUtZW5kaWFuIG51bWJlci4KClRoaXMgcGF0Y2ggdHdlYWtzIHRoZSBkb2N1bWVu
dGF0aW9uIHRvIG1ha2UgdGhpcyBjbGVhciwgYW5kIGFsc28KYWRkcyB0aGUgSEVYRFVNUF9SRVRB
SU5fQllURV9PUkRFUiBmbGFnIHRvIGFsbG93IGdyb3VwcyBvZgptdWx0aXBsZSBieXRlcyB0byBi
ZSBwcmludGVkIHdpdGhvdXQgYWZmZWN0aW5nIHRoZSBvcmRlcmluZwpvZiB0aGUgcHJpbnRlZCBi
eXRlcy4KClNpZ25lZC1vZmYtYnk6IEFsYXN0YWlyIEQnU2lsdmEgPGFsYXN0YWlyQGQtc2lsdmEu
b3JnPgotLS0KIGluY2x1ZGUvbGludXgvcHJpbnRrLmggfCAgMSArCiBsaWIvaGV4ZHVtcC5jICAg
ICAgICAgIHwgMzAgKysrKysrKysrKysrKysrKystLS0tCiBsaWIvdGVzdF9oZXhkdW1wLmMgICAg
IHwgNjAgKysrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tCiAzIGZpbGVz
IGNoYW5nZWQsIDY4IGluc2VydGlvbnMoKyksIDIzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L2luY2x1ZGUvbGludXgvcHJpbnRrLmggYi9pbmNsdWRlL2xpbnV4L3ByaW50ay5oCmluZGV4IDUy
MzFhMTRlNDU5My4uMTUyNzdkNTAxNTljIDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4L3ByaW50
ay5oCisrKyBiL2luY2x1ZGUvbGludXgvcHJpbnRrLmgKQEAgLTQ4OCw2ICs0ODgsNyBAQCBlbnVt
IHsKICNkZWZpbmUgSEVYRFVNUF8yX0dSUF9TUEFDRVMJCSgxIDw8IDUpCiAjZGVmaW5lIEhFWERV
TVBfNF9HUlBfU1BBQ0VTCQkoMSA8PCA2KQogI2RlZmluZSBIRVhEVU1QXzhfR1JQX1NQQUNFUwkJ
KDEgPDwgNykKKyNkZWZpbmUgSEVYRFVNUF9SRVRBSU5fQllURV9PUkRFUgkoMSA8PCA4KQogCiBl
eHRlcm4gaW50IGhleF9kdW1wX3RvX2J1ZmZlcihjb25zdCB2b2lkICpidWYsIHNpemVfdCBsZW4s
IGludCByb3dzaXplLAogCQkJICAgICAgaW50IGdyb3Vwc2l6ZSwgY2hhciAqbGluZWJ1Ziwgc2l6
ZV90IGxpbmVidWZsZW4sCmRpZmYgLS1naXQgYS9saWIvaGV4ZHVtcC5jIGIvbGliL2hleGR1bXAu
YwppbmRleCBmZWJkNjE0NDA2ZDEuLmJmYzk4MDA2MzBhZSAxMDA2NDQKLS0tIGEvbGliL2hleGR1
bXAuYworKysgYi9saWIvaGV4ZHVtcC5jCkBAIC0xMjcsNyArMTI3LDggQEAgc3RhdGljIHZvaWQg
c2VwYXJhdG9yX3BhcmFtZXRlcnModTY0IGZsYWdzLCBpbnQgZ3JvdXBzaXplLCBpbnQgKnNlcF9j
aGFycywKICAqIEBidWY6IGRhdGEgYmxvYiB0byBkdW1wCiAgKiBAbGVuOiBudW1iZXIgb2YgYnl0
ZXMgaW4gdGhlIEBidWYKICAqIEByb3dzaXplOiBudW1iZXIgb2YgYnl0ZXMgdG8gcHJpbnQgcGVy
IGxpbmU7IG11c3QgYmUgYSBtdWx0aXBsZSBvZiBncm91cHNpemUKLSAqIEBncm91cHNpemU6IG51
bWJlciBvZiBieXRlcyB0byBwcmludCBhdCBhIHRpbWUgKDEsIDIsIDQsIDg7IGRlZmF1bHQgPSAx
KQorICogQGdyb3Vwc2l6ZTogbnVtYmVyIG9mIGJ5dGVzIHRvIGNvbnZlcnQgdG8gYSBuYXRpdmUg
ZW5kaWFuIG51bWJlciBhbmQgcHJpbnQ6CisgKiAJICAgICAgIDEsIDIsIDQsIDg7IGRlZmF1bHQg
PSAxCiAgKiBAbGluZWJ1Zjogd2hlcmUgdG8gcHV0IHRoZSBjb252ZXJ0ZWQgZGF0YQogICogQGxp
bmVidWZsZW46IHRvdGFsIHNpemUgb2YgQGxpbmVidWYsIGluY2x1ZGluZyBzcGFjZSBmb3IgdGVy
bWluYXRpbmcgTlVMCiAgKiBAZmxhZ3M6IEEgYml0d2lzZSBPUiBvZiB0aGUgZm9sbG93aW5nIGZs
YWdzOgpAQCAtMTM4LDYgKzEzOSw5IEBAIHN0YXRpYyB2b2lkIHNlcGFyYXRvcl9wYXJhbWV0ZXJz
KHU2NCBmbGFncywgaW50IGdyb3Vwc2l6ZSwgaW50ICpzZXBfY2hhcnMsCiAgKglIRVhEVU1QXzJf
R1JQX1NQQUNFUzoJCWluc2VydCBhICcgJyBhZnRlciBldmVyeSAyIGdyb3VwcwogICoJSEVYRFVN
UF80X0dSUF9TUEFDRVM6CQlpbnNlcnQgYSAnICcgYWZ0ZXIgZXZlcnkgNCBncm91cHMKICAqCUhF
WERVTVBfOF9HUlBfU1BBQ0VTOgkJaW5zZXJ0IGEgJyAnIGFmdGVyIGV2ZXJ5IDggZ3JvdXBzCisg
KglIRVhEVU1QX1JFVEFJTl9CWVRFX09SREVSOglSZXRhaW4gdGhlIGJ5dGUgb3JkZXJpbmcgb2Yg
Z3JvdXBzCisgKgkJCQkJaW5zdGVhZCBvZiB0cmVhdGluZyBlYWNoIGdyb3VwIGFzIGEKKyAqCQkJ
CQluYXRpdmUtZW5kaWFuIG51bWJlcgogICoKICAqIGhleF9kdW1wX3RvX2J1ZmZlcigpIHdvcmtz
IG9uIG9uZSAibGluZSIgb2Ygb3V0cHV0IGF0IGEgdGltZSwgY29udmVydGluZwogICogPGdyb3Vw
c2l6ZT4gYnl0ZXMgb2YgaW5wdXQgdG8gaGV4YWRlY2ltYWwgKGFuZCBvcHRpb25hbGx5IHByaW50
YWJsZSBBU0NJSSkKQEAgLTE3MSw2ICsxNzUsNyBAQCBpbnQgaGV4X2R1bXBfdG9fYnVmZmVyKGNv
bnN0IHZvaWQgKmJ1Ziwgc2l6ZV90IGxlbiwgaW50IHJvd3NpemUsIGludCBncm91cHNpemUsCiAJ
aW50IHJldDsKIAlpbnQgc2VwX2NoYXJzID0gMDsKIAljaGFyIHNlcCA9IDA7CisJYm9vbCBiaWdf
ZW5kaWFuID0gKGZsYWdzICYgSEVYRFVNUF9SRVRBSU5fQllURV9PUkRFUikgPyAxIDogMDsKIAog
CWlmICghaXNfcG93ZXJfb2ZfMihncm91cHNpemUpIHx8IGdyb3Vwc2l6ZSA+IDgpCiAJCWdyb3Vw
c2l6ZSA9IDE7CkBAIC0yMDIsMTAgKzIwNywxMyBAQCBpbnQgaGV4X2R1bXBfdG9fYnVmZmVyKGNv
bnN0IHZvaWQgKmJ1Ziwgc2l6ZV90IGxlbiwgaW50IHJvd3NpemUsIGludCBncm91cHNpemUsCiAJ
CWNvbnN0IHU2NCAqcHRyOCA9IGJ1ZjsKIAogCQlmb3IgKGogPSAwOyBqIDwgbmdyb3Vwczsgaisr
KSB7CisJCQl1NjQgdmFsID0gYmlnX2VuZGlhbiA/CisJCQkJCWJlNjRfdG9fY3B1KGdldF91bmFs
aWduZWQocHRyOCArIGopKSA6CisJCQkJCWdldF91bmFsaWduZWQocHRyOCArIGopOwogCQkJcmV0
ID0gc25wcmludGYobGluZWJ1ZiArIGx4LCBsaW5lYnVmbGVuIC0gbHgsCiAJCQkJICAgICAgICIl
cyUxNi4xNmxseCIsCiAJCQkJICAgICAgIGogPyBncm91cF9zZXBhcmF0b3IoaiwgZmxhZ3MpIDog
IiIsCi0JCQkJICAgICAgIGdldF91bmFsaWduZWQocHRyOCArIGopKTsKKwkJCQkgICAgICAgdmFs
KTsKIAkJCWlmIChyZXQgPj0gbGluZWJ1ZmxlbiAtIGx4KQogCQkJCWdvdG8gb3ZlcmZsb3cxOwog
CQkJbHggKz0gcmV0OwpAQCAtMjE0LDEwICsyMjIsMTQgQEAgaW50IGhleF9kdW1wX3RvX2J1ZmZl
cihjb25zdCB2b2lkICpidWYsIHNpemVfdCBsZW4sIGludCByb3dzaXplLCBpbnQgZ3JvdXBzaXpl
LAogCQljb25zdCB1MzIgKnB0cjQgPSBidWY7CiAKIAkJZm9yIChqID0gMDsgaiA8IG5ncm91cHM7
IGorKykgeworCQkJdTMyIHZhbCA9IGJpZ19lbmRpYW4gPworCQkJCQliZTMyX3RvX2NwdShnZXRf
dW5hbGlnbmVkKHB0cjQgKyBqKSkgOgorCQkJCQlnZXRfdW5hbGlnbmVkKHB0cjQgKyBqKTsKKwog
CQkJcmV0ID0gc25wcmludGYobGluZWJ1ZiArIGx4LCBsaW5lYnVmbGVuIC0gbHgsCiAJCQkJICAg
ICAgICIlcyU4Ljh4IiwKIAkJCQkgICAgICAgaiA/IGdyb3VwX3NlcGFyYXRvcihqLCBmbGFncykg
OiAiIiwKLQkJCQkgICAgICAgZ2V0X3VuYWxpZ25lZChwdHI0ICsgaikpOworCQkJCSAgICAgICB2
YWwpOwogCQkJaWYgKHJldCA+PSBsaW5lYnVmbGVuIC0gbHgpCiAJCQkJZ290byBvdmVyZmxvdzE7
CiAJCQlseCArPSByZXQ7CkBAIC0yMjYsMTAgKzIzOCwxNCBAQCBpbnQgaGV4X2R1bXBfdG9fYnVm
ZmVyKGNvbnN0IHZvaWQgKmJ1Ziwgc2l6ZV90IGxlbiwgaW50IHJvd3NpemUsIGludCBncm91cHNp
emUsCiAJCWNvbnN0IHUxNiAqcHRyMiA9IGJ1ZjsKIAogCQlmb3IgKGogPSAwOyBqIDwgbmdyb3Vw
czsgaisrKSB7CisJCQl1MTYgdmFsID0gYmlnX2VuZGlhbiA/CisJCQkJCWJlMTZfdG9fY3B1KGdl
dF91bmFsaWduZWQocHRyMiArIGopKSA6CisJCQkJCWdldF91bmFsaWduZWQocHRyMiArIGopOwor
CiAJCQlyZXQgPSBzbnByaW50ZihsaW5lYnVmICsgbHgsIGxpbmVidWZsZW4gLSBseCwKIAkJCQkg
ICAgICAgIiVzJTQuNHgiLAogCQkJCSAgICAgICBqID8gZ3JvdXBfc2VwYXJhdG9yKGosIGZsYWdz
KSA6ICIiLAotCQkJCSAgICAgICBnZXRfdW5hbGlnbmVkKHB0cjIgKyBqKSk7CisJCQkJICAgICAg
IHZhbCk7CiAJCQlpZiAocmV0ID49IGxpbmVidWZsZW4gLSBseCkKIAkJCQlnb3RvIG92ZXJmbG93
MTsKIAkJCWx4ICs9IHJldDsKQEAgLTMzMSw3ICszNDcsOCBAQCBzdGF0aWMgdm9pZCBhbm5vdW5j
ZV9za2lwcGVkKGNvbnN0IGNoYXIgKmxldmVsLCBjb25zdCBjaGFyICpwcmVmaXhfc3RyLAogICog
QHByZWZpeF90eXBlOiBjb250cm9scyB3aGV0aGVyIHByZWZpeCBvZiBhbiBvZmZzZXQsIGFkZHJl
c3MsIG9yIG5vbmUKICAqICBpcyBwcmludGVkICglRFVNUF9QUkVGSVhfT0ZGU0VULCAlRFVNUF9Q
UkVGSVhfQUREUkVTUywgJURVTVBfUFJFRklYX05PTkUpCiAgKiBAcm93c2l6ZTogbnVtYmVyIG9m
IGJ5dGVzIHRvIHByaW50IHBlciBsaW5lOyBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgZ3JvdXBzaXpl
Ci0gKiBAZ3JvdXBzaXplOiBudW1iZXIgb2YgYnl0ZXMgdG8gcHJpbnQgYXQgYSB0aW1lICgxLCAy
LCA0LCA4OyBkZWZhdWx0ID0gMSkKKyAqIEBncm91cHNpemU6IG51bWJlciBvZiBieXRlcyB0byBj
b252ZXJ0IHRvIGEgbmF0aXZlIGVuZGlhbiBudW1iZXIgYW5kIHByaW50OgorICogCSAgICAgICAx
LCAyLCA0LCA4OyBkZWZhdWx0ID0gMQogICogQGJ1ZjogZGF0YSBibG9iIHRvIGR1bXAKICAqIEBs
ZW46IG51bWJlciBvZiBieXRlcyBpbiB0aGUgQGJ1ZgogICogQGFzY2lpOiBpbmNsdWRlIEFTQ0lJ
IGFmdGVyIHRoZSBoZXggb3V0cHV0CkBAIC0zNDIsNiArMzU5LDkgQEAgc3RhdGljIHZvaWQgYW5u
b3VuY2Vfc2tpcHBlZChjb25zdCBjaGFyICpsZXZlbCwgY29uc3QgY2hhciAqcHJlZml4X3N0ciwK
ICAqCUhFWERVTVBfMl9HUlBfTElORVM6CQlpbnNlcnQgYSAnfCcgYWZ0ZXIgZXZlcnkgMiBncm91
cHMKICAqCUhFWERVTVBfNF9HUlBfTElORVM6CQlpbnNlcnQgYSAnfCcgYWZ0ZXIgZXZlcnkgNCBn
cm91cHMKICAqCUhFWERVTVBfOF9HUlBfTElORVM6CQlpbnNlcnQgYSAnfCcgYWZ0ZXIgZXZlcnkg
OCBncm91cHMKKyAqCUhFWERVTVBfUkVUQUlOX0JZVEVfT1JERVI6CVJldGFpbiB0aGUgYnl0ZSBv
cmRlcmluZyBvZiBncm91cHMKKyAqCQkJCQlpbnN0ZWFkIG9mIHRyZWF0aW5nIGVhY2ggZ3JvdXAg
YXMgYQorICoJCQkJCW5hdGl2ZS1lbmRpYW4gbnVtYmVyCiAgKgogICogR2l2ZW4gYSBidWZmZXIg
b2YgdTggZGF0YSwgcHJpbnRfaGV4X2R1bXAoKSBwcmludHMgYSBoZXggKyBBU0NJSSBkdW1wCiAg
KiB0byB0aGUga2VybmVsIGxvZyBhdCB0aGUgc3BlY2lmaWVkIGtlcm5lbCBsb2cgbGV2ZWwsIHdp
dGggYW4gb3B0aW9uYWwKZGlmZiAtLWdpdCBhL2xpYi90ZXN0X2hleGR1bXAuYyBiL2xpYi90ZXN0
X2hleGR1bXAuYwppbmRleCBhZTM0MGM1YzFjNmYuLjFlNTEwZTkzNDU2OCAxMDA2NDQKLS0tIGEv
bGliL3Rlc3RfaGV4ZHVtcC5jCisrKyBiL2xpYi90ZXN0X2hleGR1bXAuYwpAQCAtOTgsMTQgKzk4
LDE1IEBAIHN0YXRpYyB1bnNpZ25lZCBmYWlsZWRfdGVzdHMgX19pbml0ZGF0YTsKIAogc3RhdGlj
IHZvaWQgX19pbml0IHRlc3RfaGV4ZHVtcF9wcmVwYXJlX3Rlc3Qoc2l6ZV90IGxlbiwgaW50IHJv
d3NpemUsCiAJCQkJCSAgICAgaW50IGdyb3Vwc2l6ZSwgY2hhciAqdGVzdCwKLQkJCQkJICAgICBz
aXplX3QgdGVzdGxlbiwgYm9vbCBhc2NpaSkKKwkJCQkJICAgICBzaXplX3QgdGVzdGxlbiwgdTY0
IGZsYWdzKQogewogCWNoYXIgKnA7CiAJY29uc3QgY2hhciAqIGNvbnN0ICpyZXN1bHQ7CiAJc2l6
ZV90IGwgPSBsZW47CiAJaW50IGdzID0gZ3JvdXBzaXplLCBycyA9IHJvd3NpemU7CiAJdW5zaWdu
ZWQgaW50IGk7Ci0JY29uc3QgYm9vbCBpc19iZSA9IElTX0VOQUJMRUQoQ09ORklHX0NQVV9CSUdf
RU5ESUFOKTsKKwljb25zdCBib29sIGlzX2JlID0gSVNfRU5BQkxFRChDT05GSUdfQ1BVX0JJR19F
TkRJQU4pIHx8CisJCQkoZmxhZ3MgJiBIRVhEVU1QX1JFVEFJTl9CWVRFX09SREVSKTsKIAogCWlm
IChsID4gcnMpCiAJCWwgPSByczsKQEAgLTE0Miw3ICsxNDMsNyBAQCBzdGF0aWMgdm9pZCBfX2lu
aXQgdGVzdF9oZXhkdW1wX3ByZXBhcmVfdGVzdChzaXplX3QgbGVuLCBpbnQgcm93c2l6ZSwKIAkJ
cC0tOwogCiAJLyogQVNDSUkgcGFydCAqLwotCWlmIChhc2NpaSkgeworCWlmIChmbGFncyAmIEhF
WERVTVBfQVNDSUkpIHsKIAkJZG8gewogCQkJKnArKyA9ICcgJzsKIAkJfSB3aGlsZSAocCA8IHRl
c3QgKyBycyAqIDIgKyBycyAvIGdzICsgMSk7CkBAIC0xNTcsNyArMTU4LDcgQEAgc3RhdGljIHZv
aWQgX19pbml0IHRlc3RfaGV4ZHVtcF9wcmVwYXJlX3Rlc3Qoc2l6ZV90IGxlbiwgaW50IHJvd3Np
emUsCiAjZGVmaW5lIFRFU1RfSEVYRFVNUF9CVUZfU0laRQkJKDY0ICogMyArIDIgKyA2NCArIDEp
CiAKIHN0YXRpYyB2b2lkIF9faW5pdCB0ZXN0X2hleGR1bXAoc2l6ZV90IGxlbiwgaW50IHJvd3Np
emUsIGludCBncm91cHNpemUsCi0JCQkJYm9vbCBhc2NpaSkKKwkJCQl1NjQgZmxhZ3MpCiB7CiAJ
Y2hhciB0ZXN0W1RFU1RfSEVYRFVNUF9CVUZfU0laRV07CiAJY2hhciByZWFsW1RFU1RfSEVYRFVN
UF9CVUZfU0laRV07CkBAIC0xNjYsMTEgKzE2NywxMSBAQCBzdGF0aWMgdm9pZCBfX2luaXQgdGVz
dF9oZXhkdW1wKHNpemVfdCBsZW4sIGludCByb3dzaXplLCBpbnQgZ3JvdXBzaXplLAogCiAJbWVt
c2V0KHJlYWwsIEZJTExfQ0hBUiwgc2l6ZW9mKHJlYWwpKTsKIAloZXhfZHVtcF90b19idWZmZXIo
ZGF0YV9iLCBsZW4sIHJvd3NpemUsIGdyb3Vwc2l6ZSwgcmVhbCwgc2l6ZW9mKHJlYWwpLAotCQkJ
ICAgYXNjaWkgPyBIRVhEVU1QX0FTQ0lJIDogMCk7CisJCQkgICBmbGFncyk7CiAKIAltZW1zZXQo
dGVzdCwgRklMTF9DSEFSLCBzaXplb2YodGVzdCkpOwogCXRlc3RfaGV4ZHVtcF9wcmVwYXJlX3Rl
c3QobGVuLCByb3dzaXplLCBncm91cHNpemUsIHRlc3QsIHNpemVvZih0ZXN0KSwKLQkJCQkgIGFz
Y2lpKTsKKwkJCQkgIGZsYWdzKTsKIAogCWlmIChtZW1jbXAodGVzdCwgcmVhbCwgVEVTVF9IRVhE
VU1QX0JVRl9TSVpFKSkgewogCQlwcl9lcnIoIkxlbjogJXp1IHJvdzogJWQgZ3JvdXA6ICVkXG4i
LCBsZW4sIHJvd3NpemUsIGdyb3Vwc2l6ZSk7CkBAIC0xOTMsNyArMTk0LDcgQEAgc3RhdGljIHZv
aWQgX19pbml0IHRlc3RfaGV4ZHVtcF9zZXQoaW50IHJvd3NpemUsIGJvb2wgYXNjaWkpCiAKIHN0
YXRpYyB2b2lkIF9faW5pdCB0ZXN0X2hleGR1bXBfb3ZlcmZsb3coc2l6ZV90IGJ1Zmxlbiwgc2l6
ZV90IGxlbiwKIAkJCQkJIGludCByb3dzaXplLCBpbnQgZ3JvdXBzaXplLAotCQkJCQkgYm9vbCBh
c2NpaSkKKwkJCQkJIHU2NCBmbGFncykKIHsKIAljaGFyIHRlc3RbVEVTVF9IRVhEVU1QX0JVRl9T
SVpFXTsKIAljaGFyIGJ1ZltURVNUX0hFWERVTVBfQlVGX1NJWkVdOwpAQCAtMjA1LDcgKzIwNiw3
IEBAIHN0YXRpYyB2b2lkIF9faW5pdCB0ZXN0X2hleGR1bXBfb3ZlcmZsb3coc2l6ZV90IGJ1Zmxl
biwgc2l6ZV90IGxlbiwKIAltZW1zZXQoYnVmLCBGSUxMX0NIQVIsIHNpemVvZihidWYpKTsKIAog
CXJjID0gaGV4X2R1bXBfdG9fYnVmZmVyKGRhdGFfYiwgbGVuLCByb3dzaXplLCBncm91cHNpemUs
IGJ1ZiwgYnVmbGVuLAotCQkJCWFzY2lpID8gSEVYRFVNUF9BU0NJSSA6IDApOworCQkJCWZsYWdz
KTsKIAogCS8qCiAJICogQ2FsbGVyIG11c3QgcHJvdmlkZSB0aGUgZGF0YSBsZW5ndGggbXVsdGlw
bGUgb2YgZ3JvdXBzaXplLiBUaGUKQEAgLTIyMiwxMiArMjIzLDEyIEBAIHN0YXRpYyB2b2lkIF9f
aW5pdCB0ZXN0X2hleGR1bXBfb3ZlcmZsb3coc2l6ZV90IGJ1Zmxlbiwgc2l6ZV90IGxlbiwKIAkJ
ICAtIDEgLyogbm8gdHJhaWxpbmcgc3BhY2UgKi87CiAJfQogCi0JZXhwZWN0ZWRfbGVuID0gKGFz
Y2lpKSA/IGFzY2lpX2xlbiA6IGhleF9sZW47CisJZXhwZWN0ZWRfbGVuID0gKGZsYWdzICYgSEVY
RFVNUF9BU0NJSSkgPyBhc2NpaV9sZW4gOiBoZXhfbGVuOwogCiAJZmlsbF9wb2ludCA9IG1pbl90
KGludCwgZXhwZWN0ZWRfbGVuICsgMSwgYnVmbGVuKTsKIAlpZiAoYnVmbGVuKSB7CiAJCXRlc3Rf
aGV4ZHVtcF9wcmVwYXJlX3Rlc3QobGVuLCByb3dzaXplLCBncm91cHNpemUsIHRlc3QsCi0JCQkJ
CSAgc2l6ZW9mKHRlc3QpLCBhc2NpaSk7CisJCQkJCSAgc2l6ZW9mKHRlc3QpLCBmbGFncyk7CiAJ
CXRlc3RbZmlsbF9wb2ludCAtIDFdID0gJ1wwJzsKIAl9CiAJbWVtc2V0KHRlc3QgKyBmaWxsX3Bv
aW50LCBGSUxMX0NIQVIsIHNpemVvZih0ZXN0KSAtIGZpbGxfcG9pbnQpOwpAQCAtMjM3LDggKzIz
OCw4IEBAIHN0YXRpYyB2b2lkIF9faW5pdCB0ZXN0X2hleGR1bXBfb3ZlcmZsb3coc2l6ZV90IGJ1
Zmxlbiwgc2l6ZV90IGxlbiwKIAlidWZbc2l6ZW9mKGJ1ZikgLSAxXSA9ICdcMCc7CiAKIAlpZiAo
IW1hdGNoKSB7Ci0JCXByX2Vycigicm93c2l6ZTogJXUgZ3JvdXBzaXplOiAldSBhc2NpaTogJWQg
TGVuOiAlenUgYnVmbGVuOiAlenUgc3RybGVuOiAlenVcbiIsCi0JCQlyb3dzaXplLCBncm91cHNp
emUsIGFzY2lpLCBsZW4sIGJ1ZmxlbiwKKwkJcHJfZXJyKCJyb3dzaXplOiAldSBncm91cHNpemU6
ICV1IGZsYWdzOiAlbGx4IExlbjogJXp1IGJ1ZmxlbjogJXp1IHN0cmxlbjogJXp1XG4iLAorCQkJ
cm93c2l6ZSwgZ3JvdXBzaXplLCBmbGFncywgbGVuLCBidWZsZW4sCiAJCQlzdHJubGVuKGJ1Ziwg
c2l6ZW9mKGJ1ZikpKTsKIAkJcHJfZXJyKCJSZXN1bHQ6ICVkICclLS4qcydcbiIsIHJjLCAoaW50
KWJ1ZmxlbiwgYnVmKTsKIAkJcHJfZXJyKCJFeHBlY3Q6ICVkICclLS4qcydcbiIsIGV4cGVjdGVk
X2xlbiwgKGludClidWZsZW4sIHRlc3QpOwpAQCAtMjQ3LDcgKzI0OCw3IEBAIHN0YXRpYyB2b2lk
IF9faW5pdCB0ZXN0X2hleGR1bXBfb3ZlcmZsb3coc2l6ZV90IGJ1Zmxlbiwgc2l6ZV90IGxlbiwK
IAl9CiB9CiAKLXN0YXRpYyB2b2lkIF9faW5pdCB0ZXN0X2hleGR1bXBfb3ZlcmZsb3dfc2V0KHNp
emVfdCBidWZsZW4sIGJvb2wgYXNjaWkpCitzdGF0aWMgdm9pZCBfX2luaXQgdGVzdF9oZXhkdW1w
X292ZXJmbG93X3NldChzaXplX3QgYnVmbGVuLCB1NjQgZmxhZ3MpCiB7CiAJdW5zaWduZWQgaW50
IGkgPSAwOwogCWludCBycyA9IChnZXRfcmFuZG9tX2ludCgpICUgNCArIDEpICogMTY7CkBAIC0y
NTYsNyArMjU3LDcgQEAgc3RhdGljIHZvaWQgX19pbml0IHRlc3RfaGV4ZHVtcF9vdmVyZmxvd19z
ZXQoc2l6ZV90IGJ1ZmxlbiwgYm9vbCBhc2NpaSkKIAkJaW50IGdzID0gMSA8PCBpOwogCQlzaXpl
X3QgbGVuID0gZ2V0X3JhbmRvbV9pbnQoKSAlIHJzICsgZ3M7CiAKLQkJdGVzdF9oZXhkdW1wX292
ZXJmbG93KGJ1Zmxlbiwgcm91bmRkb3duKGxlbiwgZ3MpLCBycywgZ3MsIGFzY2lpKTsKKwkJdGVz
dF9oZXhkdW1wX292ZXJmbG93KGJ1Zmxlbiwgcm91bmRkb3duKGxlbiwgZ3MpLCBycywgZ3MsIGZs
YWdzKTsKIAl9IHdoaWxlIChpKysgPCAzKTsKIH0KIApAQCAtMjY0LDIwICsyNjUsNDMgQEAgc3Rh
dGljIGludCBfX2luaXQgdGVzdF9oZXhkdW1wX2luaXQodm9pZCkKIHsKIAl1bnNpZ25lZCBpbnQg
aTsKIAlpbnQgcm93c2l6ZTsKKwl1NjQgZmxhZ3M7CiAKKwlmbGFncyA9IDA7CiAJcm93c2l6ZSA9
IChnZXRfcmFuZG9tX2ludCgpICUgNCArIDEpICogMTY7CiAJZm9yIChpID0gMDsgaSA8IDE2OyBp
KyspCi0JCXRlc3RfaGV4ZHVtcF9zZXQocm93c2l6ZSwgZmFsc2UpOworCQl0ZXN0X2hleGR1bXBf
c2V0KHJvd3NpemUsIGZsYWdzKTsKIAorCWZsYWdzID0gSEVYRFVNUF9BU0NJSTsKIAlyb3dzaXpl
ID0gKGdldF9yYW5kb21faW50KCkgJSA0ICsgMSkgKiAxNjsKIAlmb3IgKGkgPSAwOyBpIDwgMTY7
IGkrKykKLQkJdGVzdF9oZXhkdW1wX3NldChyb3dzaXplLCB0cnVlKTsKKwkJdGVzdF9oZXhkdW1w
X3NldChyb3dzaXplLCBmbGFncyk7CiAKKwlmbGFncyA9IEhFWERVTVBfUkVUQUlOX0JZVEVfT1JE
RVI7CisJcm93c2l6ZSA9IChnZXRfcmFuZG9tX2ludCgpICUgMiArIDEpICogMTY7CisJZm9yIChp
ID0gMDsgaSA8IDE2OyBpKyspCisJCXRlc3RfaGV4ZHVtcF9zZXQocm93c2l6ZSwgZmxhZ3MpOwor
CisJZmxhZ3MgPSBIRVhEVU1QX0FTQ0lJIHwgSEVYRFVNUF9SRVRBSU5fQllURV9PUkRFUjsKKwly
b3dzaXplID0gKGdldF9yYW5kb21faW50KCkgJSAyICsgMSkgKiAxNjsKKwlmb3IgKGkgPSAwOyBp
IDwgMTY7IGkrKykKKwkJdGVzdF9oZXhkdW1wX3NldChyb3dzaXplLCBmbGFncyk7CisKKwlmbGFn
cyA9IDA7CisJZm9yIChpID0gMDsgaSA8PSBURVNUX0hFWERVTVBfQlVGX1NJWkU7IGkrKykKKwkJ
dGVzdF9oZXhkdW1wX292ZXJmbG93X3NldChpLCBmbGFncyk7CisKKwlmbGFncyA9IEhFWERVTVBf
QVNDSUk7CisJZm9yIChpID0gMDsgaSA8PSBURVNUX0hFWERVTVBfQlVGX1NJWkU7IGkrKykKKwkJ
dGVzdF9oZXhkdW1wX292ZXJmbG93X3NldChpLCBmbGFncyk7CisKKwlmbGFncyA9IEhFWERVTVBf
UkVUQUlOX0JZVEVfT1JERVI7CiAJZm9yIChpID0gMDsgaSA8PSBURVNUX0hFWERVTVBfQlVGX1NJ
WkU7IGkrKykKLQkJdGVzdF9oZXhkdW1wX292ZXJmbG93X3NldChpLCBmYWxzZSk7CisJCXRlc3Rf
aGV4ZHVtcF9vdmVyZmxvd19zZXQoaSwgZmxhZ3MpOwogCisJZmxhZ3MgPSBIRVhEVU1QX0FTQ0lJ
IHwgSEVYRFVNUF9SRVRBSU5fQllURV9PUkRFUjsKIAlmb3IgKGkgPSAwOyBpIDw9IFRFU1RfSEVY
RFVNUF9CVUZfU0laRTsgaSsrKQotCQl0ZXN0X2hleGR1bXBfb3ZlcmZsb3dfc2V0KGksIHRydWUp
OworCQl0ZXN0X2hleGR1bXBfb3ZlcmZsb3dfc2V0KGksIGZsYWdzKTsKIAogCWlmIChmYWlsZWRf
dGVzdHMgPT0gMCkKIAkJcHJfaW5mbygiYWxsICV1IHRlc3RzIHBhc3NlZFxuIiwgdG90YWxfdGVz
dHMpOwotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmkt
ZGV2ZWw=
