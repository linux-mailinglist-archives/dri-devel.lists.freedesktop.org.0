Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 57A50248FE8
	for <lists+dri-devel@lfdr.de>; Tue, 18 Aug 2020 23:05:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 57DFE6E182;
	Tue, 18 Aug 2020 21:05:46 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qk1-x731.google.com (mail-qk1-x731.google.com
 [IPv6:2607:f8b0:4864:20::731])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E92A26E17E
 for <dri-devel@lists.freedesktop.org>; Tue, 18 Aug 2020 21:05:43 +0000 (UTC)
Received: by mail-qk1-x731.google.com with SMTP id m7so19655386qki.12
 for <dri-devel@lists.freedesktop.org>; Tue, 18 Aug 2020 14:05:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=poorly.run; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=mG081VWh41E/74h1YNTDo3z34D+ykCssbL82TFjYiUY=;
 b=gWnlyjdckR9w9wISCKWoP8VJ3JWSNidL5/I15ThKTdy54xREO0Ux2vbBkOBD12H7cT
 UNH/+7bsomRF+Wav5eLyLmBGykubhZ7hPcGcbgRKq+z+oZt8J0gLMIxqChNAiORs/mrX
 O2b/CSc+JggRh9ED4mm/uJjp9U7kwMwGb82e6o6ytRJNpYgwl+TS65laCGDhIh6LPAK1
 c/UfNQPBkZy5B9uZAbrQieApSZEl4tR48aElUR6jeONaO5q9ynf0Wue86m72uocjuxY6
 hGEfRTX72xKCkfCNNeJbwfoP/O8NHcgb9TiwMFUejseBqEy4EdL/EKT7780RhKBAVllu
 EkrA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=mG081VWh41E/74h1YNTDo3z34D+ykCssbL82TFjYiUY=;
 b=qvWbdoSoeBYFgSDFqVcDKp5afHB6svjfy/E7s3GhslM74A5sJu7wBNffnF3gkrM0nZ
 Oo0eykKpFYrZRa1vJp23TUunvcitrndAot183tFZ1pbBErUP98IofYlJBGFrn/VcZODl
 UhO9sdVC4TQa7skTCHnPqcbQ/WZ7f5Kmhbm8rEympW30hd+/LvijkRRlyq1BSKHdMaSi
 weghDebzQ5A0xPuMpH2v6rZ65AwKUwFpveT7hnScd6sC3rhRQINxU5u8JTrVDdRbQSsv
 /nNxrdTySOBe14FqY1cT38aLDlraIjhkzeBhufDkbKyrks+GYtLQ4I/6duZwPhjdQsGj
 033Q==
X-Gm-Message-State: AOAM530x6boyJQXdmNauHu0JsfT+eAHWORJ9GMR61YI0LhByYjangl96
 HHOiS/aHIR0mkBDxY5oedBjO+GGE/ODRdw==
X-Google-Smtp-Source: ABdhPJwKpPW/hXejU7QleeDt4A958x/0+e2SWV0cnsIUGRK7yXFTqb18QwZaZi0kX47wMhJGpoOZrw==
X-Received: by 2002:a37:5dc6:: with SMTP id
 r189mr18573740qkb.364.1597784741960; 
 Tue, 18 Aug 2020 14:05:41 -0700 (PDT)
Received: from localhost (mobile-166-177-184-140.mycingular.net.
 [166.177.184.140])
 by smtp.gmail.com with ESMTPSA id l189sm22081532qke.67.2020.08.18.14.05.41
 (version=TLS1_2 cipher=ECDHE-ECDSA-CHACHA20-POLY1305 bits=256/256);
 Tue, 18 Aug 2020 14:05:41 -0700 (PDT)
From: Sean Paul <sean@poorly.run>
To: dri-devel@lists.freedesktop.org, ppaalanen@gmail.com,
 maarten.lankhorst@linux.intel.com, mripard@kernel.org, tzimmermann@suse.de,
 seanpaul@chromium.org, airlied@linux.ie
Subject: [PATCH v6 14/14] drm/print: Add tracefs support to the drm logging
 helpers
Date: Tue, 18 Aug 2020 17:05:10 -0400
Message-Id: <20200818210510.49730-15-sean@poorly.run>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200818210510.49730-1-sean@poorly.run>
References: <20200818210510.49730-1-sean@poorly.run>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: daniel.vetter@ffwll.ch, Steven Rostedt <rostedt@goodmis.org>,
 Chris Wilson <chris@chris-wilson.co.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogU2VhbiBQYXVsIDxzZWFucGF1bEBjaHJvbWl1bS5vcmc+CgpUaGlzIHBhdGNoIGFkZHMg
YSBuZXcgbW9kdWxlIHBhcmFtZXRlciBjYWxsZWQgZHJtLnRyYWNlIHdoaWNoIGFjY2VwdHMKdGhl
IHNhbWUgbWFzayBhcyBkcm0uZGVidWcuIFdoZW4gYSBkZWJ1ZyBjYXRlZ29yeSBpcyBlbmFibGVk
LCBsb2cKbWVzc2FnZXMgd2lsbCBiZSBwdXQgaW4gYSBuZXcgdHJhY2VmcyBpbnN0YW5jZSBjYWxs
ZWQgZHJtIGZvcgpjb25zdW1wdGlvbi4KClVzaW5nIHRoZSBuZXcgdHJhY2VmcyBpbnN0YW5jZSB3
aWxsIGFsbG93IGRpc3Ryb3MgdG8gZW5hYmxlIGRybSBsb2dnaW5nCmluIHByb2R1Y3Rpb24gd2l0
aG91dCBpbXBhY3RpbmcgcGVyZm9ybWFuY2Ugb3Igc3BhbW1pbmcgdGhlIHN5c3RlbQpsb2dzLgoK
Q2M6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+CkNjOiBEYXZpZCBBaXJs
aWUgPGFpcmxpZWRAZ21haWwuY29tPgpDYzogSmFuaSBOaWt1bGEgPGphbmkubmlrdWxhQGxpbnV4
LmludGVsLmNvbT4KQ2M6IEpvb25hcyBMYWh0aW5lbiA8am9vbmFzLmxhaHRpbmVuQGxpbnV4Lmlu
dGVsLmNvbT4KQ2M6IFBla2thIFBhYWxhbmVuIDxwcGFhbGFuZW5AZ21haWwuY29tPgpDYzogUm9i
IENsYXJrIDxyb2JkY2xhcmtAZ21haWwuY29tPgpDYzogU3RldmVuIFJvc3RlZHQgPHJvc3RlZHRA
Z29vZG1pcy5vcmc+CkNjOiBUaG9tYXMgWmltbWVybWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4K
Q2M6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+CkNjOiBD
aHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KQ2M6IFN0ZXZlbiBSb3N0ZWR0
IDxyb3N0ZWR0QGdvb2RtaXMub3JnPgpBY2tlZC1ieTogUGVra2EgUGFhbGFuZW4gPHBla2thLnBh
YWxhbmVuQGNvbGxhYm9yYS5jb20+ClNpZ25lZC1vZmYtYnk6IFNlYW4gUGF1bCA8c2VhbnBhdWxA
Y2hyb21pdW0ub3JnPgpMaW5rOiBodHRwczovL3BhdGNod29yay5mcmVlZGVza3RvcC5vcmcvcGF0
Y2gvbXNnaWQvMjAxOTEwMTAyMDQ4MjMuMTk1NTQwLTEtc2VhbkBwb29ybHkucnVuICN2MQpMaW5r
OiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9hcmNoaXZlcy9kcmktZGV2ZWwvMjAxOS1O
b3ZlbWJlci8yNDMyMzAuaHRtbCAjdjIKTGluazogaHR0cHM6Ly9wYXRjaHdvcmsuZnJlZWRlc2t0
b3Aub3JnL3BhdGNoL21zZ2lkLzIwMTkxMjEyMjAzMzAxLjE0MjQzNy0xLXNlYW5AcG9vcmx5LnJ1
biAjdjMKTGluazogaHR0cHM6Ly9wYXRjaHdvcmsuZnJlZWRlc2t0b3Aub3JnL3BhdGNoL21zZ2lk
LzIwMjAwMTE0MTcyMTU1LjIxNTQ2My0xLXNlYW5AcG9vcmx5LnJ1biAjdjQKTGluazogaHR0cHM6
Ly9wYXRjaHdvcmsuZnJlZWRlc2t0b3Aub3JnL3BhdGNoL21zZ2lkLzIwMjAwNjA4MjEwNTA1LjQ4
NTE5LTE0LXNlYW5AcG9vcmx5LnJ1biAjdjUKCkNoYW5nZXMgaW4gdjU6Ci1SZS13cml0ZSB0byB1
c2UgdHJhY2VfYXJyYXkgYW5kIHRoZSB0cmFjZWZzIGluc3RhbmNlIHN1cHBvcnQKQ2hhbmdlcyBp
biB2NjoKLVVzZSB0aGUgbmV3IHRyYWNlX2FycmF5X2luaXRfcHJpbnRrKCkgdG8gaW5pdGlhbGl6
ZSBnbG9iYWwgdHJhY2UKIGJ1ZmZlcnMKLS0tCiBEb2N1bWVudGF0aW9uL2dwdS9kcm0tdWFwaS5y
c3QgfCAgIDYgKwogZHJpdmVycy9ncHUvZHJtL2RybV9kcnYuYyAgICAgIHwgICAzICsKIGRyaXZl
cnMvZ3B1L2RybS9kcm1fcHJpbnQuYyAgICB8IDIxNiArKysrKysrKysrKysrKysrKysrKysrKysr
KysrLS0tLS0KIGluY2x1ZGUvZHJtL2RybV9wcmludC5oICAgICAgICB8ICA2MyArKysrKysrKy0t
CiA0IGZpbGVzIGNoYW5nZWQsIDI0OCBpbnNlcnRpb25zKCspLCA0MCBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9Eb2N1bWVudGF0aW9uL2dwdS9kcm0tdWFwaS5yc3QgYi9Eb2N1bWVudGF0aW9u
L2dwdS9kcm0tdWFwaS5yc3QKaW5kZXggN2RjZTE3NWY2ZDc1Li4wMjk3ZmY3MWY4ZjggMTAwNjQ0
Ci0tLSBhL0RvY3VtZW50YXRpb24vZ3B1L2RybS11YXBpLnJzdAorKysgYi9Eb2N1bWVudGF0aW9u
L2dwdS9kcm0tdWFwaS5yc3QKQEAgLTQyNCw2ICs0MjQsMTIgQEAgRGVidWdmcyBTdXBwb3J0CiAu
LiBrZXJuZWwtZG9jOjogZHJpdmVycy9ncHUvZHJtL2RybV9kZWJ1Z2ZzLmMKICAgIDpleHBvcnQ6
CiAKK0RSTSBUcmFjaW5nCistLS0tLS0tLS0tLS0tLS0KKworLi4ga2VybmVsLWRvYzo6IGRyaXZl
cnMvZ3B1L2RybS9kcm1fcHJpbnQuYworICAgOmRvYzogRFJNIFRyYWNpbmcKKwogU3lzZnMgU3Vw
cG9ydAogPT09PT09PT09PT09PQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2Ry
di5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9kcnYuYwppbmRleCAxMzA2OGZkZjQzMzEuLjU1NWI0
MDU4MDQ5NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9kcnYuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vZHJtX2Rydi5jCkBAIC0xMTA3LDEyICsxMTA3LDE1IEBAIHN0YXRpYyB2b2lk
IGRybV9jb3JlX2V4aXQodm9pZCkKIAlkcm1fc3lzZnNfZGVzdHJveSgpOwogCWlkcl9kZXN0cm95
KCZkcm1fbWlub3JzX2lkcik7CiAJZHJtX2Nvbm5lY3Rvcl9pZGFfZGVzdHJveSgpOworCWRybV90
cmFjZV9jbGVhbnVwKCk7CiB9CiAKIHN0YXRpYyBpbnQgX19pbml0IGRybV9jb3JlX2luaXQodm9p
ZCkKIHsKIAlpbnQgcmV0OwogCisJZHJtX3RyYWNlX2luaXQoKTsKKwogCWRybV9jb25uZWN0b3Jf
aWRhX2luaXQoKTsKIAlpZHJfaW5pdCgmZHJtX21pbm9yc19pZHIpOwogCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vZHJtX3ByaW50LmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW50LmMK
aW5kZXggNGQ5ODRhMDFiM2EzLi42YjExMTQzZDFhYjIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9kcm1fcHJpbnQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW50LmMKQEAgLTMx
LDYgKzMxLDcgQEAKICNpbmNsdWRlIDxsaW51eC9tb2R1bGVwYXJhbS5oPgogI2luY2x1ZGUgPGxp
bnV4L3NlcV9maWxlLmg+CiAjaW5jbHVkZSA8bGludXgvc2xhYi5oPgorI2luY2x1ZGUgPGxpbnV4
L3RyYWNlLmg+CiAKICNpbmNsdWRlIDxkcm0vZHJtLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9kcnYu
aD4KQEAgLTQzLDE3ICs0NCwzNCBAQAogdW5zaWduZWQgaW50IF9fZHJtX2RlYnVnX3N5c2xvZzsK
IEVYUE9SVF9TWU1CT0woX19kcm1fZGVidWdfc3lzbG9nKTsKIAotTU9EVUxFX1BBUk1fREVTQyhk
ZWJ1ZywgIkVuYWJsZSBkZWJ1ZyBvdXRwdXQsIHdoZXJlIGVhY2ggYml0IGVuYWJsZXMgYSBkZWJ1
ZyBjYXRlZ29yeS5cbiIKLSJcdFx0Qml0IDAgKDB4MDEpICB3aWxsIGVuYWJsZSBDT1JFIG1lc3Nh
Z2VzIChkcm0gY29yZSBjb2RlKVxuIgotIlx0XHRCaXQgMSAoMHgwMikgIHdpbGwgZW5hYmxlIERS
SVZFUiBtZXNzYWdlcyAoZHJtIGNvbnRyb2xsZXIgY29kZSlcbiIKLSJcdFx0Qml0IDIgKDB4MDQp
ICB3aWxsIGVuYWJsZSBLTVMgbWVzc2FnZXMgKG1vZGVzZXR0aW5nIGNvZGUpXG4iCi0iXHRcdEJp
dCAzICgweDA4KSAgd2lsbCBlbmFibGUgUFJJTUUgbWVzc2FnZXMgKHByaW1lIGNvZGUpXG4iCi0i
XHRcdEJpdCA0ICgweDEwKSAgd2lsbCBlbmFibGUgQVRPTUlDIG1lc3NhZ2VzIChhdG9taWMgY29k
ZSlcbiIKLSJcdFx0Qml0IDUgKDB4MjApICB3aWxsIGVuYWJsZSBWQkwgbWVzc2FnZXMgKHZibGFu
ayBjb2RlKVxuIgotIlx0XHRCaXQgNyAoMHg4MCkgIHdpbGwgZW5hYmxlIExFQVNFIG1lc3NhZ2Vz
IChsZWFzaW5nIGNvZGUpXG4iCi0iXHRcdEJpdCA4ICgweDEwMCkgd2lsbCBlbmFibGUgRFAgbWVz
c2FnZXMgKGRpc3BsYXlwb3J0IGNvZGUpIik7CisvKgorICogX19kcm1fZGVidWdfdHJhY2U6IEVu
YWJsZSBkZWJ1ZyBvdXRwdXQgaW4gZHJtIHRyYWNpbmcgaW5zdGFuY2UuCisgKiBCaXRtYXNrIG9m
IERSTV9VVF94LiBTZWUgaW5jbHVkZS9kcm0vZHJtX3ByaW50LmggZm9yIGRldGFpbHMuCisgKi8K
K3Vuc2lnbmVkIGludCBfX2RybV9kZWJ1Z190cmFjZTsKK0VYUE9SVF9TWU1CT0woX19kcm1fZGVi
dWdfdHJhY2UpOworCisjZGVmaW5lIERFQlVHX1BBUk1fREVTQyhkc3QpIFwKKyJFbmFibGUgZGVi
dWcgb3V0cHV0IHRvICIgZHN0ICIsIHdoZXJlIGVhY2ggYml0IGVuYWJsZXMgYSBkZWJ1ZyBjYXRl
Z29yeS5cbiIgXAorIlx0XHRCaXQgMCAoMHgwMSkgIHdpbGwgZW5hYmxlIENPUkUgbWVzc2FnZXMg
KGRybSBjb3JlIGNvZGUpXG4iIFwKKyJcdFx0Qml0IDEgKDB4MDIpICB3aWxsIGVuYWJsZSBEUklW
RVIgbWVzc2FnZXMgKGRybSBjb250cm9sbGVyIGNvZGUpXG4iIFwKKyJcdFx0Qml0IDIgKDB4MDQp
ICB3aWxsIGVuYWJsZSBLTVMgbWVzc2FnZXMgKG1vZGVzZXR0aW5nIGNvZGUpXG4iIFwKKyJcdFx0
Qml0IDMgKDB4MDgpICB3aWxsIGVuYWJsZSBQUklNRSBtZXNzYWdlcyAocHJpbWUgY29kZSlcbiIg
XAorIlx0XHRCaXQgNCAoMHgxMCkgIHdpbGwgZW5hYmxlIEFUT01JQyBtZXNzYWdlcyAoYXRvbWlj
IGNvZGUpXG4iIFwKKyJcdFx0Qml0IDUgKDB4MjApICB3aWxsIGVuYWJsZSBWQkwgbWVzc2FnZXMg
KHZibGFuayBjb2RlKVxuIiBcCisiXHRcdEJpdCA3ICgweDgwKSAgd2lsbCBlbmFibGUgTEVBU0Ug
bWVzc2FnZXMgKGxlYXNpbmcgY29kZSlcbiIgXAorIlx0XHRCaXQgOCAoMHgxMDApIHdpbGwgZW5h
YmxlIERQIG1lc3NhZ2VzIChkaXNwbGF5cG9ydCBjb2RlKSIKKworTU9EVUxFX1BBUk1fREVTQyhk
ZWJ1ZywgREVCVUdfUEFSTV9ERVNDKCJzeXNsb2ciKSk7CiBtb2R1bGVfcGFyYW1fbmFtZWQoZGVi
dWcsIF9fZHJtX2RlYnVnX3N5c2xvZywgaW50LCAwNjAwKTsKIAorTU9EVUxFX1BBUk1fREVTQyh0
cmFjZSwgREVCVUdfUEFSTV9ERVNDKCJ0cmFjZWZzIikpOworbW9kdWxlX3BhcmFtX25hbWVkKHRy
YWNlLCBfX2RybV9kZWJ1Z190cmFjZSwgaW50LCAwNjAwKTsKKworI2lmZGVmIENPTkZJR19UUkFD
SU5HCitzdHJ1Y3QgdHJhY2VfYXJyYXkgKnRyYWNlX2FycjsKKyNlbmRpZgorCiB2b2lkIF9fZHJt
X3B1dHNfY29yZWR1bXAoc3RydWN0IGRybV9wcmludGVyICpwLCBjb25zdCBjaGFyICpzdHIpCiB7
CiAJc3RydWN0IGRybV9wcmludF9pdGVyYXRvciAqaXRlcmF0b3IgPSBwLT5hcmc7CkBAIC0xNjYs
NiArMTg0LDIwIEBAIHZvaWQgX19kcm1fcHJpbnRmbl9kZWJ1Z19zeXNsb2coc3RydWN0IGRybV9w
cmludGVyICpwLCBzdHJ1Y3QgdmFfZm9ybWF0ICp2YWYpCiB9CiBFWFBPUlRfU1lNQk9MKF9fZHJt
X3ByaW50Zm5fZGVidWdfc3lzbG9nKTsKIAordm9pZCBfX2RybV9wcmludGZuX3RyYWNlKHN0cnVj
dCBkcm1fcHJpbnRlciAqcCwgc3RydWN0IHZhX2Zvcm1hdCAqdmFmKQoreworCWRybV90cmFjZV9w
cmludGYoIiVzICVwViIsIHAtPnByZWZpeCwgdmFmKTsKK30KK0VYUE9SVF9TWU1CT0woX19kcm1f
cHJpbnRmbl90cmFjZSk7CisKK3ZvaWQgX19kcm1fcHJpbnRmbl9kZWJ1Z19zeXNsb2dfYW5kX3Ry
YWNlKHN0cnVjdCBkcm1fcHJpbnRlciAqcCwKKwkJCQkJICAgc3RydWN0IHZhX2Zvcm1hdCAqdmFm
KQoreworCXByX2RlYnVnKCIlcyAlcFYiLCBwLT5wcmVmaXgsIHZhZik7CisJZHJtX3RyYWNlX3By
aW50ZigiJXMgJXBWIiwgcC0+cHJlZml4LCB2YWYpOworfQorRVhQT1JUX1NZTUJPTChfX2RybV9w
cmludGZuX2RlYnVnX3N5c2xvZ19hbmRfdHJhY2UpOworCiB2b2lkIF9fZHJtX3ByaW50Zm5fZXJy
KHN0cnVjdCBkcm1fcHJpbnRlciAqcCwgc3RydWN0IHZhX2Zvcm1hdCAqdmFmKQogewogCXByX2Vy
cigiKkVSUk9SKiAlcyAlcFYiLCBwLT5wcmVmaXgsIHZhZik7CkBAIC0yNDYsNiArMjc4LDE0IEBA
IHZvaWQgZHJtX2Rldl9wcmludGsoY29uc3Qgc3RydWN0IGRldmljZSAqZGV2LCBjb25zdCBjaGFy
ICpsZXZlbCwKIAlzdHJ1Y3QgdmFfZm9ybWF0IHZhZjsKIAl2YV9saXN0IGFyZ3M7CiAKKwl2YV9z
dGFydChhcmdzLCBmb3JtYXQpOworCXZhZi5mbXQgPSBmb3JtYXQ7CisJdmFmLnZhID0gJmFyZ3M7
CisJZHJtX3RyYWNlX3ByaW50ZigiJXMlc1siIERSTV9OQU1FICI6JXBzXSAlcFYiLAorCQkJIGRl
diA/IGRldl9uYW1lKGRldikgOiAiIixkZXYgPyAiICIgOiAiIiwKKwkJCSBfX2J1aWx0aW5fcmV0
dXJuX2FkZHJlc3MoMCksICZ2YWYpOworCXZhX2VuZChhcmdzKTsKKwogCXZhX3N0YXJ0KGFyZ3Ms
IGZvcm1hdCk7CiAJdmFmLmZtdCA9IGZvcm1hdDsKIAl2YWYudmEgPSAmYXJnczsKQEAgLTI2Nywy
MSArMzA3LDMwIEBAIHZvaWQgZHJtX2Rldl9kYmcoY29uc3Qgc3RydWN0IGRldmljZSAqZGV2LCBl
bnVtIGRybV9kZWJ1Z19jYXRlZ29yeSBjYXRlZ29yeSwKIAlzdHJ1Y3QgdmFfZm9ybWF0IHZhZjsK
IAl2YV9saXN0IGFyZ3M7CiAKLQlpZiAoIWRybV9kZWJ1Z19lbmFibGVkKGNhdGVnb3J5KSkKLQkJ
cmV0dXJuOworCWlmIChkcm1fZGVidWdfc3lzbG9nX2VuYWJsZWQoY2F0ZWdvcnkpKSB7CisJCXZh
X3N0YXJ0KGFyZ3MsIGZvcm1hdCk7CisJCXZhZi5mbXQgPSBmb3JtYXQ7CisJCXZhZi52YSA9ICZh
cmdzOwogCi0JdmFfc3RhcnQoYXJncywgZm9ybWF0KTsKLQl2YWYuZm10ID0gZm9ybWF0OwotCXZh
Zi52YSA9ICZhcmdzOworCQlpZiAoZGV2KQorCQkJZGV2X3ByaW50ayhLRVJOX0RFQlVHLCBkZXYs
ICJbIiBEUk1fTkFNRSAiOiVwc10gJXBWIiwKKwkJCQlfX2J1aWx0aW5fcmV0dXJuX2FkZHJlc3Mo
MCksICZ2YWYpOworCQllbHNlCisJCQlwcmludGsoS0VSTl9ERUJVRyAiWyIgRFJNX05BTUUgIjol
cHNdICVwViIsCisJCQlfX2J1aWx0aW5fcmV0dXJuX2FkZHJlc3MoMCksICZ2YWYpOwogCi0JaWYg
KGRldikKLQkJZGV2X3ByaW50ayhLRVJOX0RFQlVHLCBkZXYsICJbIiBEUk1fTkFNRSAiOiVwc10g
JXBWIiwKLQkJCSAgIF9fYnVpbHRpbl9yZXR1cm5fYWRkcmVzcygwKSwgJnZhZik7Ci0JZWxzZQot
CQlwcmludGsoS0VSTl9ERUJVRyAiWyIgRFJNX05BTUUgIjolcHNdICVwViIsCi0JCSAgICAgICBf
X2J1aWx0aW5fcmV0dXJuX2FkZHJlc3MoMCksICZ2YWYpOworCQl2YV9lbmQoYXJncyk7CisJfQog
Ci0JdmFfZW5kKGFyZ3MpOworCWlmIChkcm1fZGVidWdfdHJhY2VfZW5hYmxlZChjYXRlZ29yeSkp
IHsKKwkJdmFfc3RhcnQoYXJncywgZm9ybWF0KTsKKwkJdmFmLmZtdCA9IGZvcm1hdDsKKwkJdmFm
LnZhID0gJmFyZ3M7CisJCWRybV90cmFjZV9wcmludGYoIiVzJXNbIiBEUk1fTkFNRSAiOiVwc10g
JXBWIiwKKwkJCQkgZGV2ID8gZGV2X25hbWUoZGV2KSA6ICIiLCBkZXYgPyAiICIgOiAiIiwKKwkJ
CQkgX19idWlsdGluX3JldHVybl9hZGRyZXNzKDApLCAmdmFmKTsKKwkJdmFfZW5kKGFyZ3MpOwor
CX0KIH0KIEVYUE9SVF9TWU1CT0woZHJtX2Rldl9kYmcpOwogCkBAIC0yOTAsMTcgKzMzOSwyNSBA
QCB2b2lkIF9fZHJtX2RiZyhlbnVtIGRybV9kZWJ1Z19jYXRlZ29yeSBjYXRlZ29yeSwgY29uc3Qg
Y2hhciAqZm9ybWF0LCAuLi4pCiAJc3RydWN0IHZhX2Zvcm1hdCB2YWY7CiAJdmFfbGlzdCBhcmdz
OwogCi0JaWYgKCFkcm1fZGVidWdfZW5hYmxlZChjYXRlZ29yeSkpCi0JCXJldHVybjsKKwlpZiAo
ZHJtX2RlYnVnX3N5c2xvZ19lbmFibGVkKGNhdGVnb3J5KSkgeworCQl2YV9zdGFydChhcmdzLCBm
b3JtYXQpOworCQl2YWYuZm10ID0gZm9ybWF0OworCQl2YWYudmEgPSAmYXJnczsKIAotCXZhX3N0
YXJ0KGFyZ3MsIGZvcm1hdCk7Ci0JdmFmLmZtdCA9IGZvcm1hdDsKLQl2YWYudmEgPSAmYXJnczsK
KwkJcHJpbnRrKEtFUk5fREVCVUcgIlsiIERSTV9OQU1FICI6JXBzXSAlcFYiLAorCQlfX2J1aWx0
aW5fcmV0dXJuX2FkZHJlc3MoMCksICZ2YWYpOwogCi0JcHJpbnRrKEtFUk5fREVCVUcgIlsiIERS
TV9OQU1FICI6JXBzXSAlcFYiLAotCSAgICAgICBfX2J1aWx0aW5fcmV0dXJuX2FkZHJlc3MoMCks
ICZ2YWYpOworCQl2YV9lbmQoYXJncyk7CisJfQogCi0JdmFfZW5kKGFyZ3MpOworCWlmIChkcm1f
ZGVidWdfdHJhY2VfZW5hYmxlZChjYXRlZ29yeSkpIHsKKwkJdmFfc3RhcnQoYXJncywgZm9ybWF0
KTsKKwkJdmFmLmZtdCA9IGZvcm1hdDsKKwkJdmFmLnZhID0gJmFyZ3M7CisJCWRybV90cmFjZV9w
cmludGYoIlsiIERSTV9OQU1FICI6JXBzXSAlcFYiLAorCQkJCSBfX2J1aWx0aW5fcmV0dXJuX2Fk
ZHJlc3MoMCksICZ2YWYpOworCQl2YV9lbmQoYXJncyk7CisJfQogfQogRVhQT1JUX1NZTUJPTChf
X2RybV9kYmcpOwogCkBAIC0zNDcsMyArNDA0LDEwNCBAQCB2b2lkIGRybV9wcmludF9yZWdzZXQz
MihzdHJ1Y3QgZHJtX3ByaW50ZXIgKnAsIHN0cnVjdCBkZWJ1Z2ZzX3JlZ3NldDMyICpyZWdzZXQp
CiAJfQogfQogRVhQT1JUX1NZTUJPTChkcm1fcHJpbnRfcmVnc2V0MzIpOworCisKKy8qKgorICog
RE9DOiBEUk0gVHJhY2luZworICoKKyAqICp0bDtkciogRFJNIHRyYWNpbmcgaXMgYSBsaWdodHdl
aWdodCBhbHRlcm5hdGl2ZSB0byB0cmFkaXRpb25hbCBEUk0gZGVidWcKKyAqIGxvZ2dpbmcuCisg
KgorICogV2hpbGUgRFJNIGxvZ2dpbmcgaXMgcXVpdGUgY29udmVuaWVudCB3aGVuIHJlcHJvZHVj
aW5nIGEgc3BlY2lmaWMgaXNzdWUsIGl0CisgKiBkb2Vzbid0IGhlbHAgd2hlbiBzb21ldGhpbmcg
Z29lcyB3cm9uZyB1bmV4cGVjdGVkbHkuIFRoZXJlIGFyZSBhIGNvdXBsZQorICogcmVhc29ucyB3
aHkgb25lIGRvZXMgbm90IHdhbnQgdG8gZW5hYmxlIERSTSBsb2dnaW5nIGF0IGFsbCB0aW1lczoK
KyAqCisgKiAxLiBXZSBkb24ndCB3YW50IHRvIG92ZXJ3aGVsbSBzeXNsb2cgd2l0aCBkcm0gc3Bh
bSwgb3RoZXJzIGhhdmUgdG8gdXNlIGl0IHRvbworICogMi4gQ29uc29sZSBsb2dnaW5nIGlzIHNs
b3cKKyAqCisgKiBEUk0gdHJhY2luZyBhaW1zIHRvIHNvbHZlIGJvdGggdGhlc2UgcHJvYmxlbXMu
CisgKgorICogVG8gdXNlIERSTSB0cmFjaW5nLCBzZXQgdGhlIGRybS50cmFjZSBtb2R1bGUgcGFy
YW1ldGVyICh2aWEgY21kbGluZSBvciBzeXNmcykKKyAqIHRvIGEgRFJNIGRlYnVnIGNhdGVnb3J5
IG1hc2sgKHRoaXMgaXMgYSBiaXRtYXNrIG9mICZkcm1fZGVidWdfY2F0ZWdvcnkKKyAqIHZhbHVl
cyk6CisgKiA6OgorICoKKyAqICAgIGVnOiBlY2hvIDB4MTA2ID4gL3N5cy9tb2R1bGUvZHJtL3Bh
cmFtZXRlcnMvdHJhY2UKKyAqCisgKiBPbmNlIGFjdGl2ZSwgYWxsIGxvZyBtZXNzYWdlcyBpbiB0
aGUgc3BlY2lmaWVkIGNhdGVnb3JpZXMgd2lsbCBiZSB3cml0dGVuIHRvCisgKiB0aGUgRFJNIHRy
YWNlLiBPbmNlIGF0IGNhcGFjaXR5LCB0aGUgdHJhY2Ugd2lsbCBvdmVyd3JpdGUgb2xkIG1lc3Nh
Z2VzIHdpdGgKKyAqIG5ldyBvbmVzLiBBdCBhbnkgcG9pbnQsIG9uZSBjYW4gcmVhZCB0aGUgdHJh
Y2UgZmlsZSB0byBleHRyYWN0IHRoZSBwcmV2aW91cyBOCisgKiBEUk0gbWVzc2FnZXM6CisgKiA6
OgorICoKKyAqICAgIGVnOiBjYXQgL3N5cy9rZXJuZWwvdHJhY2luZy9pbnN0YW5jZXMvZHJtL3Ry
YWNlCisgKgorICogQ29uc2lkZXJhdGlvbnMKKyAqICoqKioqKioqKioqKioqCisgKiBUaGUgdHJh
Y2UgaXMgc3Vic3lzdGVtIHdpZGUsIHNvIGlmIHlvdSBoYXZlIG11bHRpcGxlIGRldmljZXMgYWN0
aXZlLCB0aGV5CisgKiB3aWxsIGJlIGFkZGluZyBsb2dzIHRvIHRoZSBzYW1lIHRyYWNlLgorICoK
KyAqIFRoZSBjb250ZW50cyBvZiB0aGUgRFJNIFRyYWNlIGFyZSAqKm5vdCoqIGNvbnNpZGVyZWQg
VUFCSS4gKipETyBOT1QgZGVwZW5kIG9uCisgKiB0aGUgdmFsdWVzIG9mIHRoZXNlIHRyYWNlcyBp
biB5b3VyIHVzZXJzcGFjZS4qKiBUaGVzZSB0cmFjZXMgYXJlIGludGVuZGVkIGZvcgorICogZW50
ZXJ0YWlubWVudCBwdXJwb3NlcyBvbmx5LiBUaGUgY29udGVudHMgb2YgdGhlc2UgbG9ncyBjYXJy
eSBubyB3YXJyYW50eSwKKyAqIGV4cHJlc3NlZCBvciBpbXBsaWVkLgorICovCisKKworI2lmZGVm
IENPTkZJR19UUkFDSU5HCisKKy8qKgorICogZHJtX3RyYWNlX2luaXQgLSBpbml0aWFsaXplcyB0
aGUgZHJtIHRyYWNlIGFycmF5CisgKgorICogVGhpcyBmdW5jdGlvbiBmZXRjaGVzIChvciBjcmVh
dGVzKSB0aGUgZHJtIHRyYWNlIGFycmF5LiBUaGlzIHNob3VsZCBiZSBjYWxsZWQKKyAqIG9uY2Ug
b24gZHJtIHN1YnN5c3RlbSBjcmVhdGlvbiBhbmQgbWF0Y2hlZCB3aXRoIGRybV90cmFjZV9jbGVh
bnVwKCkuCisgKi8KK3ZvaWQgZHJtX3RyYWNlX2luaXQoKQoreworCWludCByZXQ7CisKKwl0cmFj
ZV9hcnIgPSB0cmFjZV9hcnJheV9nZXRfYnlfbmFtZSgiZHJtIik7CisJaWYgKCF0cmFjZV9hcnIp
CisJCXJldHVybjsKKworCXJldCA9IHRyYWNlX2FycmF5X2luaXRfcHJpbnRrKHRyYWNlX2Fycik7
CisJaWYgKHJldCkKKwkJZHJtX3RyYWNlX2NsZWFudXAoKTsKK30KK0VYUE9SVF9TWU1CT0woZHJt
X3RyYWNlX2luaXQpOworCisvKioKKyAqIGRybV90cmFjZV9wcmludGYgLSBhZGRzIGFuIGVudHJ5
IHRvIHRoZSBkcm0gdHJhY2VmcyBpbnN0YW5jZQorICogQGZvcm1hdDogcHJpbnRmIGZvcm1hdCBv
ZiB0aGUgbWVzc2FnZSB0byBhZGQgdG8gdGhlIHRyYWNlCisgKgorICogVGhpcyBmdW5jdGlvbiBh
ZGRzIGEgbmV3IGVudHJ5IGluIHRoZSBkcm0gdHJhY2VmcyBpbnN0YW5jZQorICovCit2b2lkIGRy
bV90cmFjZV9wcmludGYoY29uc3QgY2hhciAqZm9ybWF0LCAuLi4pCit7CisJc3RydWN0IHZhX2Zv
cm1hdCB2YWY7CisJdmFfbGlzdCBhcmdzOworCisJdmFfc3RhcnQoYXJncywgZm9ybWF0KTsKKwl2
YWYuZm10ID0gZm9ybWF0OworCXZhZi52YSA9ICZhcmdzOworCXRyYWNlX2FycmF5X3ByaW50ayh0
cmFjZV9hcnIsIF9USElTX0lQXywgIiVwViIsICZ2YWYpOworCXZhX2VuZChhcmdzKTsKK30KKwor
LyoqCisgKiBkcm1fdHJhY2VfY2xlYW51cCAtIGRlc3Ryb3lzIHRoZSBkcm0gdHJhY2UgYXJyYXkK
KyAqCisgKiBUaGlzIGZ1bmN0aW9uIGRlc3Ryb3lzIHRoZSBkcm0gdHJhY2UgYXJyYXkgY3JlYXRl
ZCB3aXRoIGRybV90cmFjZV9pbml0LiBUaGlzCisgKiBzaG91bGQgYmUgY2FsbGVkIG9uY2Ugb24g
ZHJtIHN1YnN5c3RlbSBjbG9zZSBhbmQgbWF0Y2hlZCB3aXRoCisgKiBkcm1fdHJhY2VfaW5pdCgp
LgorICovCit2b2lkIGRybV90cmFjZV9jbGVhbnVwKCkKK3sKKwlpZiAodHJhY2VfYXJyKSB7CisJ
CXRyYWNlX2FycmF5X3B1dCh0cmFjZV9hcnIpOworCQl0cmFjZV9hcnJheV9kZXN0cm95KHRyYWNl
X2Fycik7CisJCXRyYWNlX2FyciA9IE5VTEw7CisJfQorfQorRVhQT1JUX1NZTUJPTChkcm1fdHJh
Y2VfY2xlYW51cCk7CisjZW5kaWYKXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCmRpZmYgLS1n
aXQgYS9pbmNsdWRlL2RybS9kcm1fcHJpbnQuaCBiL2luY2x1ZGUvZHJtL2RybV9wcmludC5oCmlu
ZGV4IDg5ODdiOThiYmZkYS4uMjg0ZjdkMzI1MDU2IDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS9k
cm1fcHJpbnQuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fcHJpbnQuaApAQCAtMzYsMTIgKzM2LDEz
IEBACiAKIC8qIERvICpub3QqIHVzZSBvdXRzaWRlIG9mIGRybV9wcmludC5bY2hdISAqLwogZXh0
ZXJuIHVuc2lnbmVkIGludCBfX2RybV9kZWJ1Z19zeXNsb2c7CitleHRlcm4gdW5zaWduZWQgaW50
IF9fZHJtX2RlYnVnX3RyYWNlOwogCiAvKioKICAqIERPQzogcHJpbnQKICAqCiAgKiBBIHNpbXBs
ZSB3cmFwcGVyIGZvciBkZXZfcHJpbnRrKCksIHNlcV9wcmludGYoKSwgZXRjLiAgQWxsb3dzIHNh
bWUKLSAqIGRlYnVnIGNvZGUgdG8gYmUgdXNlZCBmb3IgYm90aCBkZWJ1Z2ZzIGFuZCBwcmludGsg
bG9nZ2luZy4KKyAqIGRlYnVnIGNvZGUgdG8gYmUgdXNlZCBmb3IgZGVidWdmcywgcHJpbnRrIGFu
ZCB0cmFjZWZzIGxvZ2dpbmcuCiAgKgogICogRm9yIGV4YW1wbGU6OgogICoKQEAgLTg2LDYgKzg3
LDkgQEAgdm9pZCBfX2RybV9wcmludGZuX3NlcV9maWxlKHN0cnVjdCBkcm1fcHJpbnRlciAqcCwg
c3RydWN0IHZhX2Zvcm1hdCAqdmFmKTsKIHZvaWQgX19kcm1fcHV0c19zZXFfZmlsZShzdHJ1Y3Qg
ZHJtX3ByaW50ZXIgKnAsIGNvbnN0IGNoYXIgKnN0cik7CiB2b2lkIF9fZHJtX3ByaW50Zm5faW5m
byhzdHJ1Y3QgZHJtX3ByaW50ZXIgKnAsIHN0cnVjdCB2YV9mb3JtYXQgKnZhZik7CiB2b2lkIF9f
ZHJtX3ByaW50Zm5fZGVidWdfc3lzbG9nKHN0cnVjdCBkcm1fcHJpbnRlciAqcCwgc3RydWN0IHZh
X2Zvcm1hdCAqdmFmKTsKK3ZvaWQgX19kcm1fcHJpbnRmbl90cmFjZShzdHJ1Y3QgZHJtX3ByaW50
ZXIgKnAsIHN0cnVjdCB2YV9mb3JtYXQgKnZhZik7Cit2b2lkIF9fZHJtX3ByaW50Zm5fZGVidWdf
c3lzbG9nX2FuZF90cmFjZShzdHJ1Y3QgZHJtX3ByaW50ZXIgKnAsCisJCQkJCSAgIHN0cnVjdCB2
YV9mb3JtYXQgKnZhZik7CiB2b2lkIF9fZHJtX3ByaW50Zm5fZXJyKHN0cnVjdCBkcm1fcHJpbnRl
ciAqcCwgc3RydWN0IHZhX2Zvcm1hdCAqdmFmKTsKIHZvaWQgX19kcm1fcHJpbnRmbl9ub29wKHN0
cnVjdCBkcm1fcHJpbnRlciAqcCwgc3RydWN0IHZhX2Zvcm1hdCAqdmFmKTsKIApAQCAtMjE5LDcg
KzIyMyw4IEBAIHN0YXRpYyBpbmxpbmUgc3RydWN0IGRybV9wcmludGVyIGRybV9pbmZvX3ByaW50
ZXIoc3RydWN0IGRldmljZSAqZGV2KQogfQogCiAvKioKLSAqIGRybV9kZWJ1Z19wcmludGVyIC0g
Y29uc3RydWN0IGEgJmRybV9wcmludGVyIHRoYXQgb3V0cHV0cyB0byBwcl9kZWJ1ZygpCisgKiBk
cm1fZGVidWdfcHJpbnRlciAtIGNvbnN0cnVjdCBhICZkcm1fcHJpbnRlciB0aGF0IG91dHB1dHMg
dG8gcHJfZGVidWcoKSBhbmQKKyAqIGRybSB0cmFjZWZzCiAgKiBAcHJlZml4OiBkZWJ1ZyBvdXRw
dXQgcHJlZml4CiAgKgogICogUkVUVVJOUzoKQEAgLTIyOCw3ICsyMzMsNyBAQCBzdGF0aWMgaW5s
aW5lIHN0cnVjdCBkcm1fcHJpbnRlciBkcm1faW5mb19wcmludGVyKHN0cnVjdCBkZXZpY2UgKmRl
dikKIHN0YXRpYyBpbmxpbmUgc3RydWN0IGRybV9wcmludGVyIGRybV9kZWJ1Z19wcmludGVyKGNv
bnN0IGNoYXIgKnByZWZpeCkKIHsKIAlzdHJ1Y3QgZHJtX3ByaW50ZXIgcCA9IHsKLQkJLnByaW50
Zm4gPSBfX2RybV9wcmludGZuX2RlYnVnX3N5c2xvZywKKwkJLnByaW50Zm4gPSBfX2RybV9wcmlu
dGZuX2RlYnVnX3N5c2xvZ19hbmRfdHJhY2UsCiAJCS5wcmVmaXggPSBwcmVmaXgKIAl9OwogCXJl
dHVybiBwOwpAQCAtMjU0LDE0ICsyNTksMTQgQEAgc3RhdGljIGlubGluZSBzdHJ1Y3QgZHJtX3By
aW50ZXIgZHJtX2Vycl9wcmludGVyKGNvbnN0IGNoYXIgKnByZWZpeCkKICAqIGVudW0gZHJtX2Rl
YnVnX2NhdGVnb3J5IC0gVGhlIERSTSBkZWJ1ZyBjYXRlZ29yaWVzCiAgKgogICogRWFjaCBvZiB0
aGUgRFJNIGRlYnVnIGxvZ2dpbmcgbWFjcm9zIHVzZSBhIHNwZWNpZmljIGNhdGVnb3J5LCBhbmQg
dGhlIGxvZ2dpbmcKLSAqIGlzIGZpbHRlcmVkIGJ5IHRoZSBkcm0uZGVidWcgbW9kdWxlIHBhcmFt
ZXRlci4gVGhpcyBlbnVtIHNwZWNpZmllcyB0aGUgdmFsdWVzCi0gKiBmb3IgdGhlIGludGVyZmFj
ZS4KKyAqIGlzIGZpbHRlcmVkIGJ5IHRoZSBkcm0uZGVidWcgYW5kIGRybS50cmFjZSBtb2R1bGUg
cGFyYW1ldGVycy4gVGhpcyBlbnVtCisgKiBzcGVjaWZpZXMgdGhlIHZhbHVlcyBmb3IgdGhlIGlu
dGVyZmFjZS4KICAqCiAgKiBFYWNoIERSTV9ERUJVR188Q0FURUdPUlk+IG1hY3JvIGxvZ3MgdG8g
RFJNX1VUXzxDQVRFR09SWT4gY2F0ZWdvcnksIGV4Y2VwdAogICogRFJNX0RFQlVHKCkgbG9ncyB0
byBEUk1fVVRfQ09SRS4KICAqCi0gKiBFbmFibGluZyB2ZXJib3NlIGRlYnVnIG1lc3NhZ2VzIGlz
IGRvbmUgdGhyb3VnaCB0aGUgZHJtLmRlYnVnIHBhcmFtZXRlciwgZWFjaAotICogY2F0ZWdvcnkg
YmVpbmcgZW5hYmxlZCBieSBhIGJpdDoKKyAqIEVuYWJsaW5nIHZlcmJvc2UgZGVidWcgbWVzc2Fn
ZXMgaXMgZG9uZSB0aHJvdWdoIHRoZSBkcm0uZGVidWcgYW5kIGRybS50cmFjZQorICogcGFyYW1l
dGVycywgZWFjaCBjYXRlZ29yeSBiZWluZyBlbmFibGVkIGJ5IGEgYml0OgogICoKICAqICAtIGRy
bS5kZWJ1Zz0weDEgd2lsbCBlbmFibGUgQ09SRSBtZXNzYWdlcwogICogIC0gZHJtLmRlYnVnPTB4
MiB3aWxsIGVuYWJsZSBEUklWRVIgbWVzc2FnZXMKQEAgLTI3MCwxMCArMjc1LDE0IEBAIHN0YXRp
YyBpbmxpbmUgc3RydWN0IGRybV9wcmludGVyIGRybV9lcnJfcHJpbnRlcihjb25zdCBjaGFyICpw
cmVmaXgpCiAgKiAgLSBkcm0uZGVidWc9MHgxZmYgd2lsbCBlbmFibGUgYWxsIG1lc3NhZ2VzCiAg
KgogICogQW4gaW50ZXJlc3RpbmcgZmVhdHVyZSBpcyB0aGF0IGl0J3MgcG9zc2libGUgdG8gZW5h
YmxlIHZlcmJvc2UgbG9nZ2luZyBhdAotICogcnVuLXRpbWUgYnkgZWNob2luZyB0aGUgZGVidWcg
dmFsdWUgaW4gaXRzIHN5c2ZzIG5vZGU6OgorICogcnVuLXRpbWUgYnkgZWNob2luZyB0aGUgZGVi
dWcgY2F0ZWdvcnkgdmFsdWUgaW4gaXRzIHN5c2ZzIG5vZGU6OgogICoKKyAqICAgIyBGb3Igc3lz
bG9nIGxvZ2dpbmc6CiAgKiAgICMgZWNobyAweGYgPiAvc3lzL21vZHVsZS9kcm0vcGFyYW1ldGVy
cy9kZWJ1ZwogICoKKyAqICAgIyBGb3IgdHJhY2VmcyBsb2dnaW5nOgorICogICAjIGVjaG8gMHhm
ID4gL3N5cy9tb2R1bGUvZHJtL3BhcmFtZXRlcnMvdHJhY2UKKyAqCiAgKi8KIGVudW0gZHJtX2Rl
YnVnX2NhdGVnb3J5IHsKIAkvKioKQEAgLTMyNSwxNCArMzM0LDIwIEBAIHN0YXRpYyBpbmxpbmUg
Ym9vbCBkcm1fZGVidWdfc3lzbG9nX2VuYWJsZWQoZW51bSBkcm1fZGVidWdfY2F0ZWdvcnkgY2F0
ZWdvcnkpCiAJcmV0dXJuIHVubGlrZWx5KF9fZHJtX2RlYnVnX3N5c2xvZyAmIGNhdGVnb3J5KTsK
IH0KIAorc3RhdGljIGlubGluZSBib29sIGRybV9kZWJ1Z190cmFjZV9lbmFibGVkKGVudW0gZHJt
X2RlYnVnX2NhdGVnb3J5IGNhdGVnb3J5KQoreworCXJldHVybiB1bmxpa2VseShfX2RybV9kZWJ1
Z190cmFjZSAmIGNhdGVnb3J5KTsKK30KKwogc3RhdGljIGlubGluZSBib29sIGRybV9kZWJ1Z19l
bmFibGVkKGVudW0gZHJtX2RlYnVnX2NhdGVnb3J5IGNhdGVnb3J5KQogewotCXJldHVybiBkcm1f
ZGVidWdfc3lzbG9nX2VuYWJsZWQoY2F0ZWdvcnkpOworCXJldHVybiBkcm1fZGVidWdfc3lzbG9n
X2VuYWJsZWQoY2F0ZWdvcnkpIHx8CisJICAgICAgIGRybV9kZWJ1Z190cmFjZV9lbmFibGVkKGNh
dGVnb3J5KTsKIH0KIAogLyoqCiAgKiBkcm1fZGVidWdfY2F0ZWdvcnlfcHJpbnRlciAtIGNvbnN0
cnVjdCBhICZkcm1fcHJpbnRlciB0aGF0IG91dHB1dHMgdG8KLSAqIHByX2RlYnVnKCkgaWYgZW5h
YmxlZCBmb3IgdGhlIGdpdmVuIGNhdGVnb3J5LgorICogcHJfZGVidWcoKSBhbmQvb3IgdGhlIGRy
bSB0cmFjZWZzIGluc3RhbmNlIGlmIGVuYWJsZWQgZm9yIHRoZSBnaXZlbiBjYXRlZ29yeS4KICAq
IEBjYXRlZ29yeTogdGhlIERSTV9VVF8qIG1lc3NhZ2UgY2F0ZWdvcnkgdGhpcyBtZXNzYWdlIGJl
bG9uZ3MgdG8KICAqIEBwcmVmaXg6IHRyYWNlIG91dHB1dCBwcmVmaXgKICAqCkBAIC0zNDcsOCAr
MzYyLDEzIEBAIGRybV9kZWJ1Z19jYXRlZ29yeV9wcmludGVyKGVudW0gZHJtX2RlYnVnX2NhdGVn
b3J5IGNhdGVnb3J5LAogCQkucHJlZml4ID0gcHJlZml4CiAJfTsKIAotCWlmIChkcm1fZGVidWdf
c3lzbG9nX2VuYWJsZWQoY2F0ZWdvcnkpKSB7CisJaWYgKGRybV9kZWJ1Z19zeXNsb2dfZW5hYmxl
ZChjYXRlZ29yeSkgJiYKKwkgICAgZHJtX2RlYnVnX3RyYWNlX2VuYWJsZWQoY2F0ZWdvcnkpKSB7
CisJCXAucHJpbnRmbiA9IF9fZHJtX3ByaW50Zm5fZGVidWdfc3lzbG9nX2FuZF90cmFjZTsKKwl9
IGVsc2UgaWYgKGRybV9kZWJ1Z19zeXNsb2dfZW5hYmxlZChjYXRlZ29yeSkpIHsKIAkJcC5wcmlu
dGZuID0gX19kcm1fcHJpbnRmbl9kZWJ1Z19zeXNsb2c7CisJfSBlbHNlIGlmIChkcm1fZGVidWdf
dHJhY2VfZW5hYmxlZChjYXRlZ29yeSkpIHsKKwkJcC5wcmludGZuID0gX19kcm1fcHJpbnRmbl90
cmFjZTsKIAl9IGVsc2UgewogCQlXQVJOKDEsICJEZWJ1ZyBjYXRlZ29yeSAlZCBpcyBpbmFjdGl2
ZS4iLCBjYXRlZ29yeSk7CiAJCXAucHJpbnRmbiA9IF9fZHJtX3ByaW50Zm5fbm9vcDsKQEAgLTM1
Nyw2ICszNzcsMjcgQEAgZHJtX2RlYnVnX2NhdGVnb3J5X3ByaW50ZXIoZW51bSBkcm1fZGVidWdf
Y2F0ZWdvcnkgY2F0ZWdvcnksCiAJcmV0dXJuIHA7CiB9CiAKKworI2lmZGVmIENPTkZJR19UUkFD
SU5HCit2b2lkIGRybV90cmFjZV9pbml0KHZvaWQpOworX19wcmludGYoMSwgMikKK3ZvaWQgZHJt
X3RyYWNlX3ByaW50Zihjb25zdCBjaGFyICpmb3JtYXQsIC4uLik7Cit2b2lkIGRybV90cmFjZV9j
bGVhbnVwKHZvaWQpOworI2Vsc2UKK3N0YXRpYyBpbmxpbmUgdm9pZCBkcm1fdHJhY2VfaW5pdCh2
b2lkKQoreworfQorCitfX3ByaW50ZigxLCAyKQorc3RhdGljIGlubGluZSB2b2lkIGRybV90cmFj
ZV9wcmludGYoY29uc3QgY2hhciAqZm9ybWF0LCAuLi4pCit7Cit9CisKK3N0YXRpYyBpbmxpbmUg
dm9pZCBkcm1fdHJhY2VfY2xlYW51cCh2b2lkKQoreworfQorI2VuZGlmCisKIC8qCiAgKiBzdHJ1
Y3QgZGV2aWNlIGJhc2VkIGxvZ2dpbmcKICAqCi0tIApTZWFuIFBhdWwsIFNvZnR3YXJlIEVuZ2lu
ZWVyLCBHb29nbGUgLyBDaHJvbWl1bSBPUwoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlz
dGluZm8vZHJpLWRldmVsCg==
