Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id AED56109F77
	for <lists+dri-devel@lfdr.de>; Tue, 26 Nov 2019 14:47:16 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 721DA6E3E3;
	Tue, 26 Nov 2019 13:47:12 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8709B6E3E5
 for <dri-devel@lists.freedesktop.org>; Tue, 26 Nov 2019 13:47:11 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id B766CB22A;
 Tue, 26 Nov 2019 13:47:09 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: airlied@redhat.com, daniel@ffwll.ch, sam@ravnborg.org, kraxel@redhat.com,
 emil.velikov@collabora.com, noralf@tronnes.org, zboszor@pr.hu
Subject: [PATCH 1/7] drm/udl: Init connector before encoder and CRTC
Date: Tue, 26 Nov 2019 14:47:01 +0100
Message-Id: <20191126134707.22385-2-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191126134707.22385-1-tzimmermann@suse.de>
References: <20191126134707.22385-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VG8gbWltaWMgc2ltcGxlLXBpcGUsIHdlIGluaXRpYWxpemUgdGhlIGNvbm5lY3RvciBiZWZvcmUg
dGhlIHJlc3Qgb2YKdGhlIGRpc3BsYXkgcGlwZWxpbmUuCgpTaWduZWQtb2ZmLWJ5OiBUaG9tYXMg
WmltbWVybWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vdWRs
L3VkbF9jb25uZWN0b3IuYyB8ICA3ICsrKy0tLS0KIGRyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2Ry
di5oICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX21vZGVzZXQuYyAgIHwg
MTYgKysrKysrKysrKysrKystLQogMyBmaWxlcyBjaGFuZ2VkLCAxOCBpbnNlcnRpb25zKCspLCA3
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2Nvbm5l
Y3Rvci5jIGIvZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfY29ubmVjdG9yLmMKaW5kZXggYjRhZTNl
ODlhN2I0Li42OGUxMTNhZTQ0ZjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS91ZGwvdWRs
X2Nvbm5lY3Rvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2Nvbm5lY3Rvci5jCkBA
IC0xMjMsMTQgKzEyMywxNCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfZnVu
Y3MgdWRsX2Nvbm5lY3Rvcl9mdW5jcyA9IHsKIAkuc2V0X3Byb3BlcnR5ID0gdWRsX2Nvbm5lY3Rv
cl9zZXRfcHJvcGVydHksCiB9OwogCi1pbnQgdWRsX2Nvbm5lY3Rvcl9pbml0KHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKK3N0cnVjdCBkcm1fY29u
bmVjdG9yICp1ZGxfY29ubmVjdG9yX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldikKIHsKIAlz
dHJ1Y3QgdWRsX2RybV9jb25uZWN0b3IgKnVkbF9jb25uZWN0b3I7CiAJc3RydWN0IGRybV9jb25u
ZWN0b3IgKmNvbm5lY3RvcjsKIAogCXVkbF9jb25uZWN0b3IgPSBremFsbG9jKHNpemVvZihzdHJ1
Y3QgdWRsX2RybV9jb25uZWN0b3IpLCBHRlBfS0VSTkVMKTsKIAlpZiAoIXVkbF9jb25uZWN0b3Ip
Ci0JCXJldHVybiAtRU5PTUVNOworCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsKIAogCWNvbm5l
Y3RvciA9ICZ1ZGxfY29ubmVjdG9yLT5jb25uZWN0b3I7CiAJZHJtX2Nvbm5lY3Rvcl9pbml0KGRl
diwgY29ubmVjdG9yLCAmdWRsX2Nvbm5lY3Rvcl9mdW5jcywKQEAgLTEzOCw5ICsxMzgsOCBAQCBp
bnQgdWRsX2Nvbm5lY3Rvcl9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1f
ZW5jb2RlciAqZW5jb2RlcikKIAlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoY29ubmVjdG9yLCAm
dWRsX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCiAJZHJtX2Nvbm5lY3Rvcl9yZWdpc3Rlcihj
b25uZWN0b3IpOwotCWRybV9jb25uZWN0b3JfYXR0YWNoX2VuY29kZXIoY29ubmVjdG9yLCBlbmNv
ZGVyKTsKIAljb25uZWN0b3ItPnBvbGxlZCA9IERSTV9DT05ORUNUT1JfUE9MTF9IUEQgfAogCQlE
Uk1fQ09OTkVDVE9SX1BPTExfQ09OTkVDVCB8IERSTV9DT05ORUNUT1JfUE9MTF9ESVNDT05ORUNU
OwogCi0JcmV0dXJuIDA7CisJcmV0dXJuIGNvbm5lY3RvcjsKIH0KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS91ZGwvdWRsX2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfZHJ2LmgK
aW5kZXggNjZjYmUwNGY4MzJhLi44ZGMwNDcxN2FiYWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS91ZGwvdWRsX2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2Rydi5oCkBA
IC03OCw3ICs3OCw3IEBAIHN0cnVjdCB1ZGxfZGV2aWNlIHsKIGludCB1ZGxfbW9kZXNldF9pbml0
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwogdm9pZCB1ZGxfbW9kZXNldF9yZXN0b3JlKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYpOwogdm9pZCB1ZGxfbW9kZXNldF9jbGVhbnVwKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYpOwotaW50IHVkbF9jb25uZWN0b3JfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LCBzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpOworc3RydWN0IGRybV9jb25uZWN0b3Ig
KnVkbF9jb25uZWN0b3JfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKIAogc3RydWN0IGRy
bV9lbmNvZGVyICp1ZGxfZW5jb2Rlcl9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdWRsL3VkbF9tb2Rlc2V0LmMgYi9kcml2ZXJzL2dw
dS9kcm0vdWRsL3VkbF9tb2Rlc2V0LmMKaW5kZXggOTFhZjI1Y2FlZDY0Li41YmIxNTIyMDM2Yzcg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX21vZGVzZXQuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vdWRsL3VkbF9tb2Rlc2V0LmMKQEAgLTQyMSw3ICs0MjEsMTAgQEAgc3RhdGlj
IGNvbnN0IHN0cnVjdCBkcm1fbW9kZV9jb25maWdfZnVuY3MgdWRsX21vZGVfZnVuY3MgPSB7CiAK
IGludCB1ZGxfbW9kZXNldF9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiB7CisJc3RydWN0
IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKIAlzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXI7
CisJaW50IHJldDsKKwogCWRybV9tb2RlX2NvbmZpZ19pbml0KGRldik7CiAKIAlkZXYtPm1vZGVf
Y29uZmlnLm1pbl93aWR0aCA9IDY0MDsKQEAgLTQzNSwxMyArNDM4LDIyIEBAIGludCB1ZGxfbW9k
ZXNldF9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiAKIAlkZXYtPm1vZGVfY29uZmlnLmZ1
bmNzID0gJnVkbF9tb2RlX2Z1bmNzOwogCisJY29ubmVjdG9yID0gdWRsX2Nvbm5lY3Rvcl9pbml0
KGRldik7CisJaWYgKElTX0VSUihjb25uZWN0b3IpKSB7CisJCXJldCA9IFBUUl9FUlIoY29ubmVj
dG9yKTsKKwkJZ290byBlcnJfZHJtX21vZGVfY29uZmlnX2NsZWFudXA7CisJfQorCiAJdWRsX2Ny
dGNfaW5pdChkZXYpOwogCiAJZW5jb2RlciA9IHVkbF9lbmNvZGVyX2luaXQoZGV2KTsKLQotCXVk
bF9jb25uZWN0b3JfaW5pdChkZXYsIGVuY29kZXIpOworCWRybV9jb25uZWN0b3JfYXR0YWNoX2Vu
Y29kZXIoY29ubmVjdG9yLCBlbmNvZGVyKTsKIAogCXJldHVybiAwOworCitlcnJfZHJtX21vZGVf
Y29uZmlnX2NsZWFudXA6CisJZHJtX21vZGVfY29uZmlnX2NsZWFudXAoZGV2KTsKKwlyZXR1cm4g
cmV0OwogfQogCiB2b2lkIHVkbF9tb2Rlc2V0X3Jlc3RvcmUoc3RydWN0IGRybV9kZXZpY2UgKmRl
dikKLS0gCjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
