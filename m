Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 40A5C26620D
	for <lists+dri-devel@lfdr.de>; Fri, 11 Sep 2020 17:24:55 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A858589B9A;
	Fri, 11 Sep 2020 15:24:51 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ej1-x641.google.com (mail-ej1-x641.google.com
 [IPv6:2a00:1450:4864:20::641])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 145546EA85
 for <dri-devel@lists.freedesktop.org>; Fri, 11 Sep 2020 15:24:50 +0000 (UTC)
Received: by mail-ej1-x641.google.com with SMTP id i22so14327140eja.5
 for <dri-devel@lists.freedesktop.org>; Fri, 11 Sep 2020 08:24:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=h9F0t2giFxNcqueI7mhd/EPDBnbkIPlM93pRNgVDaNA=;
 b=H0QjqT+4ETbMc0uC7Ut89eVByqShuMr4TtklDvULc0k801ZrdK6k3AviyjcpTEqrCT
 1l+2unlAqvQqWpfebe8UXU+rkOHGZjoaskcDZnQXClp8oiB0ldh//D/IGrBD4wJe5ooG
 llAYnDJyvwiwPlLZscv467UHgHlTwzxWgwATk0lRxCeQ85tBXBIeblCMv18kvKM0y0T5
 CKdpRYwQHmSbuCFeebatPlBPPL+gUgSHRybTZ0fGpChY8xlKUoSyjZUgV8A0crB9evkM
 lcBa5MJPezTuAYE1lC9CDIXGxvmEsUZOhDAfGnR4lL0o0SLGmzKgOEFsdNppPFvNQ1rM
 /OkA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=h9F0t2giFxNcqueI7mhd/EPDBnbkIPlM93pRNgVDaNA=;
 b=a+Bc2kq16s12frBkQockyAgXd3GfXu2JPUKEng1p9je5WIM5zqp1SkOMlwHWhFy1nj
 XlP0ykjbBmfe1zQJMyDBRIhQ84/nPKyxCjOzqYAvFNouC7sexeJH95jb6uiY6xklbTAz
 8QGp9xI5f9OAn2NzWHiXx59sj7JWp+wISbsg81HtxIpN8g7Q4Tm5ljInJmMkgJ7q1p2m
 kizu/zvbP/e501MHYpfR0DY8npNZpOwzX1cFOez8w6nF8a3Z0sbO1lVdzY8Hapj/PXMH
 q5mxa+3UbROef7LeSkrR5OERNqcwtDmcCdGNOPVrvIulYazldCIUHhhyVO0otir7KVmR
 hMmQ==
X-Gm-Message-State: AOAM530i9b/4htUWNO6oMLt5AmrkGjSyjNIjOHwVM5vFQ4/0fyqvkO2W
 KRi1N1W8WHy3AxRDKjUdqWbyKQrpfqU=
X-Google-Smtp-Source: ABdhPJxtAXg46wG1PCiftjGORkYSHL4NAzDkWqSNuBTXEQdsXKMKs1RpvuJ7YPK5315tUs8/cjZV9w==
X-Received: by 2002:a17:906:ae50:: with SMTP id
 lf16mr2483837ejb.343.1599837888354; 
 Fri, 11 Sep 2020 08:24:48 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:d9bd:f15d:8f14:81e4])
 by smtp.gmail.com with ESMTPSA id n15sm1787408eja.26.2020.09.11.08.24.47
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 11 Sep 2020 08:24:47 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org,
	airlied@gmail.com
Subject: [PATCH 1/2] drm/nouveau: explicitly specify caching to use
Date: Fri, 11 Sep 2020 17:24:45 +0200
Message-Id: <20200911152446.2215-1-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW5zdGVhZCBvZiBsZXR0aW5nIFRUTSBtYXNraW5nIHRoZSBjYWNoaW5nIGJpdHMKc3BlY2lmeSBk
aXJlY3RseSB3aGF0IHRoZSBkcml2ZXIgbmVlZHMuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4g
S8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL25v
dXZlYXUvbm91dmVhdV9iby5jICB8IDI4ICsrKysrKysrKysrKysrKysrKysrKy0tLS0tLQogZHJp
dmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV90dG0uYyB8IDE5ICsrKy0tLS0tLS0tLS0tLS0t
LQogMiBmaWxlcyBjaGFuZ2VkLCAyNSBpbnNlcnRpb25zKCspLCAyMiBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMgYi9kcml2ZXJz
L2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMKaW5kZXggOTdlMTkwOGVhZGEwLi5iMDYyZWE4
YWZmZmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMKQEAgLTM0MCwxOCArMzQw
LDMzIEBAIG5vdXZlYXVfYm9fbmV3KHN0cnVjdCBub3V2ZWF1X2NsaSAqY2xpLCB1NjQgc2l6ZSwg
aW50IGFsaWduLAogfQogCiBzdGF0aWMgdm9pZAotc2V0X3BsYWNlbWVudF9saXN0KHN0cnVjdCB0
dG1fcGxhY2UgKnBsLCB1bnNpZ25lZCAqbiwgdWludDMyX3QgZG9tYWluLAotCQkgICB1aW50MzJf
dCBmbGFncykKK3NldF9wbGFjZW1lbnRfbGlzdChzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRybSwgc3Ry
dWN0IHR0bV9wbGFjZSAqcGwsIHVuc2lnbmVkICpuLAorCQkgICB1aW50MzJfdCBkb21haW4sIHVp
bnQzMl90IGZsYWdzKQogewogCSpuID0gMDsKIAogCWlmIChkb21haW4gJiBOT1VWRUFVX0dFTV9E
T01BSU5fVlJBTSkgeworCQlzdHJ1Y3QgbnZpZl9tbXUgKm1tdSA9ICZkcm0tPmNsaWVudC5tbXU7
CisJCWNvbnN0IHU4IHR5cGUgPSBtbXUtPnR5cGVbZHJtLT50dG0udHlwZV92cmFtXS50eXBlOwor
CiAJCXBsWypuXS5tZW1fdHlwZSA9IFRUTV9QTF9WUkFNOwotCQlwbFsoKm4pKytdLmZsYWdzID0g
ZmxhZ3M7CisJCXBsWypuXS5mbGFncyA9IGZsYWdzICYgflRUTV9QTF9GTEFHX0NBQ0hFRDsKKwor
CQkvKiBTb21lIEJBUnMgZG8gbm90IHN1cHBvcnQgYmVpbmcgaW9yZW1hcHBlZCBXQyAqLworCQlp
ZiAoZHJtLT5jbGllbnQuZGV2aWNlLmluZm8uZmFtaWx5ID49IE5WX0RFVklDRV9JTkZPX1YwX1RF
U0xBICYmCisJCSAgICB0eXBlICYgTlZJRl9NRU1fVU5DQUNIRUQpCisJCQlwbFsqbl0uZmxhZ3Mg
Jj0gflRUTV9QTF9GTEFHX1dDOworCisJCSgqbikrKzsKIAl9CiAJaWYgKGRvbWFpbiAmIE5PVVZF
QVVfR0VNX0RPTUFJTl9HQVJUKSB7CiAJCXBsWypuXS5tZW1fdHlwZSA9IFRUTV9QTF9UVDsKLQkJ
cGxbKCpuKSsrXS5mbGFncyA9IGZsYWdzOworCQlwbFsqbl0uZmxhZ3MgPSBmbGFnczsKKworCQlp
ZiAoZHJtLT5hZ3AuYnJpZGdlKQorCQkJcGxbKm5dLmZsYWdzICY9IH5UVE1fUExfRkxBR19DQUNI
RUQ7CisKKwkJKCpuKSsrOwogCX0KIAlpZiAoZG9tYWluICYgTk9VVkVBVV9HRU1fRE9NQUlOX0NQ
VSkgewogCQlwbFsqbl0ubWVtX3R5cGUgPSBUVE1fUExfU1lTVEVNOwpAQCAtMzk3LDE3ICs0MTIs
MTggQEAgdm9pZAogbm91dmVhdV9ib19wbGFjZW1lbnRfc2V0KHN0cnVjdCBub3V2ZWF1X2JvICpu
dmJvLCB1aW50MzJfdCBkb21haW4sCiAJCQkgdWludDMyX3QgYnVzeSkKIHsKKwlzdHJ1Y3Qgbm91
dmVhdV9kcm0gKmRybSA9IG5vdXZlYXVfYmRldihudmJvLT5iby5iZGV2KTsKIAlzdHJ1Y3QgdHRt
X3BsYWNlbWVudCAqcGwgPSAmbnZiby0+cGxhY2VtZW50OwogCXVpbnQzMl90IGZsYWdzID0gKG52
Ym8tPmZvcmNlX2NvaGVyZW50ID8gVFRNX1BMX0ZMQUdfVU5DQUNIRUQgOgogCQkJCQkJIFRUTV9Q
TF9NQVNLX0NBQ0hJTkcpIHwKIAkJCSAobnZiby0+cGluX3JlZmNudCA/IFRUTV9QTF9GTEFHX05P
X0VWSUNUIDogMCk7CiAKIAlwbC0+cGxhY2VtZW50ID0gbnZiby0+cGxhY2VtZW50czsKLQlzZXRf
cGxhY2VtZW50X2xpc3QobnZiby0+cGxhY2VtZW50cywgJnBsLT5udW1fcGxhY2VtZW50LAorCXNl
dF9wbGFjZW1lbnRfbGlzdChkcm0sIG52Ym8tPnBsYWNlbWVudHMsICZwbC0+bnVtX3BsYWNlbWVu
dCwKIAkJCSAgIGRvbWFpbiwgZmxhZ3MpOwogCiAJcGwtPmJ1c3lfcGxhY2VtZW50ID0gbnZiby0+
YnVzeV9wbGFjZW1lbnRzOwotCXNldF9wbGFjZW1lbnRfbGlzdChudmJvLT5idXN5X3BsYWNlbWVu
dHMsICZwbC0+bnVtX2J1c3lfcGxhY2VtZW50LAorCXNldF9wbGFjZW1lbnRfbGlzdChkcm0sIG52
Ym8tPmJ1c3lfcGxhY2VtZW50cywgJnBsLT5udW1fYnVzeV9wbGFjZW1lbnQsCiAJCQkgICBkb21h
aW4gfCBidXN5LCBmbGFncyk7CiAKIAlzZXRfcGxhY2VtZW50X3JhbmdlKG52Ym8sIGRvbWFpbik7
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3R0bS5jIGIvZHJp
dmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV90dG0uYwppbmRleCBjZjE4Zjc1Y2QwZjEuLjFi
MDBmMzJiMzg0OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV90
dG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3R0bS5jCkBAIC0xOTQs
MTkgKzE5NCwxMyBAQCBub3V2ZWF1X3R0bV9pbml0X2hvc3Qoc3RydWN0IG5vdXZlYXVfZHJtICpk
cm0sIHU4IGtpbmQpCiBzdGF0aWMgaW50CiBub3V2ZWF1X3R0bV9pbml0X3ZyYW0oc3RydWN0IG5v
dXZlYXVfZHJtICpkcm0pCiB7Ci0Jc3RydWN0IG52aWZfbW11ICptbXUgPSAmZHJtLT5jbGllbnQu
bW11OwogCWlmIChkcm0tPmNsaWVudC5kZXZpY2UuaW5mby5mYW1pbHkgPj0gTlZfREVWSUNFX0lO
Rk9fVjBfVEVTTEEpIHsKLQkJLyogU29tZSBCQVJzIGRvIG5vdCBzdXBwb3J0IGJlaW5nIGlvcmVt
YXBwZWQgV0MgKi8KLQkJY29uc3QgdTggdHlwZSA9IG1tdS0+dHlwZVtkcm0tPnR0bS50eXBlX3Zy
YW1dLnR5cGU7CiAJCXN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAqbWFuID0ga3phbGxvYyhz
aXplb2YoKm1hbiksIEdGUF9LRVJORUwpOworCiAJCWlmICghbWFuKQogCQkJcmV0dXJuIC1FTk9N
RU07CiAKIAkJbWFuLT5hdmFpbGFibGVfY2FjaGluZyA9IFRUTV9QTF9GTEFHX1VOQ0FDSEVEIHwg
VFRNX1BMX0ZMQUdfV0M7Ci0KLQkJaWYgKHR5cGUgJiBOVklGX01FTV9VTkNBQ0hFRCkKLQkJCW1h
bi0+YXZhaWxhYmxlX2NhY2hpbmcgPSBUVE1fUExfRkxBR19VTkNBQ0hFRDsKLQogCQltYW4tPmZ1
bmMgPSAmbm91dmVhdV92cmFtX21hbmFnZXI7CiAKIAkJdHRtX3Jlc291cmNlX21hbmFnZXJfaW5p
dChtYW4sCkBAIC0yNDMsMTMgKzIzNyw2IEBAIG5vdXZlYXVfdHRtX2luaXRfZ3R0KHN0cnVjdCBu
b3V2ZWF1X2RybSAqZHJtKQogCXN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAqbWFuOwogCXVu
c2lnbmVkIGxvbmcgc2l6ZV9wYWdlcyA9IGRybS0+Z2VtLmdhcnRfYXZhaWxhYmxlID4+IFBBR0Vf
U0hJRlQ7CiAJY29uc3Qgc3RydWN0IHR0bV9yZXNvdXJjZV9tYW5hZ2VyX2Z1bmMgKmZ1bmMgPSBO
VUxMOwotCXVuc2lnbmVkIGF2YWlsYWJsZV9jYWNoaW5nOwotCi0JaWYgKGRybS0+YWdwLmJyaWRn
ZSkKLQkJYXZhaWxhYmxlX2NhY2hpbmcgPSBUVE1fUExfRkxBR19VTkNBQ0hFRCB8Ci0JCQlUVE1f
UExfRkxBR19XQzsKLQllbHNlCi0JCWF2YWlsYWJsZV9jYWNoaW5nID0gVFRNX1BMX01BU0tfQ0FD
SElORzsKIAogCWlmIChkcm0tPmNsaWVudC5kZXZpY2UuaW5mby5mYW1pbHkgPj0gTlZfREVWSUNF
X0lORk9fVjBfVEVTTEEpCiAJCWZ1bmMgPSAmbm91dmVhdV9nYXJ0X21hbmFnZXI7CkBAIC0yNTcs
NyArMjQ0LDcgQEAgbm91dmVhdV90dG1faW5pdF9ndHQoc3RydWN0IG5vdXZlYXVfZHJtICpkcm0p
CiAJCWZ1bmMgPSAmbnYwNF9nYXJ0X21hbmFnZXI7CiAJZWxzZQogCQlyZXR1cm4gdHRtX3Jhbmdl
X21hbl9pbml0KCZkcm0tPnR0bS5iZGV2LCBUVE1fUExfVFQsCi0JCQkJCSAgYXZhaWxhYmxlX2Nh
Y2hpbmcsIHRydWUsCisJCQkJCSAgVFRNX1BMX01BU0tfQ0FDSElORywgdHJ1ZSwKIAkJCQkJICBz
aXplX3BhZ2VzKTsKIAogCW1hbiA9IGt6YWxsb2Moc2l6ZW9mKCptYW4pLCBHRlBfS0VSTkVMKTsK
QEAgLTI2NSw3ICsyNTIsNyBAQCBub3V2ZWF1X3R0bV9pbml0X2d0dChzdHJ1Y3Qgbm91dmVhdV9k
cm0gKmRybSkKIAkJcmV0dXJuIC1FTk9NRU07CiAKIAltYW4tPmZ1bmMgPSBmdW5jOwotCW1hbi0+
YXZhaWxhYmxlX2NhY2hpbmcgPSBhdmFpbGFibGVfY2FjaGluZzsKKwltYW4tPmF2YWlsYWJsZV9j
YWNoaW5nID0gVFRNX1BMX01BU0tfQ0FDSElORzsKIAltYW4tPnVzZV90dCA9IHRydWU7CiAJdHRt
X3Jlc291cmNlX21hbmFnZXJfaW5pdChtYW4sIHNpemVfcGFnZXMpOwogCXR0bV9zZXRfZHJpdmVy
X21hbmFnZXIoJmRybS0+dHRtLmJkZXYsIFRUTV9QTF9UVCwgbWFuKTsKLS0gCjIuMTcuMQoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1h
aWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
