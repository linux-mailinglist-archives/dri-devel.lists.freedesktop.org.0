Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 62A7A585EA
	for <lists+dri-devel@lfdr.de>; Thu, 27 Jun 2019 17:34:41 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CE7266E5B6;
	Thu, 27 Jun 2019 15:34:38 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ot1-x344.google.com (mail-ot1-x344.google.com
 [IPv6:2607:f8b0:4864:20::344])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 96D726E560
 for <dri-devel@lists.freedesktop.org>; Thu, 27 Jun 2019 15:34:37 +0000 (UTC)
Received: by mail-ot1-x344.google.com with SMTP id z23so2678712ote.13
 for <dri-devel@lists.freedesktop.org>; Thu, 27 Jun 2019 08:34:37 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=TIFHUnD2U1WN/j0DxEExjePFkt4Ve8cP0qx+aBkwvnw=;
 b=r+8YRFTip0EA9u5KD/b1RbQyjplAW3hmS68CdgVGG4pqYpEKv+RaiaK808DbM/goY9
 J2FxKlGzDUW03Nc8W/zkDEbvn0OxwJ5xlxZZwdr4ye3p29D1t/OjrfjLUGQfu6GcbUQP
 ho7i46QHykHK+/u+IrZ/Oe1/+5Ds5ZW2LdvyG6P8UZyowrpZ497Cr7JcSycbw/UYJ3o5
 ZNukE5UeyGW5FJWwclCsel6KvOKZ80MoUq2f+/Zf23BIT+QLT3jkTCFxCMRqARLd+mRt
 UpY081HZe6/0MXnN2l7llaSYASB+V801bpH1BnA5TVpIxt9jNpezFkhQoKtXCds278w6
 e3Dw==
X-Gm-Message-State: APjAAAVGDncRjwtqgFvXzwQsCBsqY8dthrSZ+qPM6Buu4rgkhoKy1C/y
 +xH4COyIVGSFov/lpooaO7GKz8TirfTR7zxM9rlqlw==
X-Google-Smtp-Source: APXvYqwwhPY4Z3RXmYNqoc6G+NYUyWTu2gY2ZpjN/HhQ1+Gd51rxA+yXt1swGTQS8NEYs78bkVziL3CfiF9eHcTolxY=
X-Received: by 2002:a05:6830:4b:: with SMTP id
 d11mr3827485otp.106.1561649676477; 
 Thu, 27 Jun 2019 08:34:36 -0700 (PDT)
MIME-Version: 1.0
References: <20190627101813.61430-1-christian.koenig@amd.com>
 <20190627101813.61430-2-christian.koenig@amd.com>
 <CAKMK7uGtdSxVSUor8P_8XH+uf4_A-kRfY6h+XnJoizscWE4AOg@mail.gmail.com>
 <f1a792c2-87e0-9aba-c6f1-0374122d025b@gmail.com>
In-Reply-To: <f1a792c2-87e0-9aba-c6f1-0374122d025b@gmail.com>
From: Daniel Vetter <daniel@ffwll.ch>
Date: Thu, 27 Jun 2019 17:34:24 +0200
Message-ID: <CAKMK7uFoeugD0ASHm4DRLzq6h3aAvNhE1ODh-bxoH7Lucf1m3w@mail.gmail.com>
Subject: Re: [PATCH 2/2] dma-buf: cleanup shared fence removal
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=TIFHUnD2U1WN/j0DxEExjePFkt4Ve8cP0qx+aBkwvnw=;
 b=ipxAfztC0D9z5VzpXOiSRlvbMFYzsfzcLURELVm0a7WJeBNe+A/dRfw4MLvYzE8gvj
 RmXUbm7kPoHOGpL+dfrHAt/oGMLWvzlpGo+4G+RR8ddMhQIwqyCVGnbwxhKdmJcUm3wp
 4n52QRuhW/DLjEAXE9QDk7jocwotfza5Ui2nU=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel <dri-devel@lists.freedesktop.org>,
 amd-gfx list <amd-gfx@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBKdW4gMjcsIDIwMTkgYXQgMzoxOSBQTSBDaHJpc3RpYW4gS8O2bmlnCjxja29lbmln
LmxlaWNodHp1bWVya2VuQGdtYWlsLmNvbT4gd3JvdGU6Cj4KPiBBbSAyNy4wNi4xOSB1bSAxMjo0
MyBzY2hyaWViIERhbmllbCBWZXR0ZXI6Cj4gPiBPbiBUaHUsIEp1biAyNywgMjAxOSBhdCAxMjox
OCBQTSBDaHJpc3RpYW4gS8O2bmlnCj4gPiA8Y2tvZW5pZy5sZWljaHR6dW1lcmtlbkBnbWFpbC5j
b20+IHdyb3RlOgo+ID4+IFdoaWxlIGZyZWVpbmcgdXAgbWVtb3J5IGl0IGlzIGVhc2llciB0byBy
ZW1vdmUgYSBmZW5jZSBmcm9tIGEgcmVzZXJ2YXRpb24KPiA+PiBvYmplY3QgaW5zdGVhZCBvZiBz
aWduYWxpbmcgaXQgYW5kIGluc3RhbGxpbmcgYSBuZXcgb25lIGluIGFsbCBvdGhlciBvYmplY3Rz
Lgo+ID4+Cj4gPj4gQ2xlYW4gdGhpcyB1cCBieSBhZGRpbmcgdGhlIHJlbW92YWwgZnVuY3Rpb24g
dG8gdGhlIGNvcmUgcmVzZXJ2YXRpb24gb2JqZWN0Cj4gPj4gY29kZSBpbnN0ZWFkIG9mIG1lc3Np
bmcgd2l0aCB0aGUgaW50ZXJuYWwgaW4gYW1kZ3B1Lgo+ID4+Cj4gPj4gTm8gZnVuY3Rpb25hbCBj
aGFuZ2UuCj4gPj4KPiA+PiBTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3Rp
YW4ua29lbmlnQGFtZC5jb20+Cj4gPj4gLS0tCj4gPj4gICBkcml2ZXJzL2RtYS1idWYvcmVzZXJ2
YXRpb24uYyAgICAgICAgICAgICAgICAgfCA2MiArKysrKysrKysrKysrKysrKysrCj4gPj4gICAu
Li4vZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ3B1dm0uYyAgfCA0NSArLS0tLS0t
LS0tLS0tLQo+ID4+ICAgaW5jbHVkZS9saW51eC9yZXNlcnZhdGlvbi5oICAgICAgICAgICAgICAg
ICAgIHwgIDMgKy0KPiA+PiAgIDMgZmlsZXMgY2hhbmdlZCwgNjUgaW5zZXJ0aW9ucygrKSwgNDUg
ZGVsZXRpb25zKC0pCj4gPj4KPiA+PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVmL3Jlc2Vy
dmF0aW9uLmMgYi9kcml2ZXJzL2RtYS1idWYvcmVzZXJ2YXRpb24uYwo+ID4+IGluZGV4IGVmNzEw
ZWZmZWRmYS4uZTQzYTMxNmEwMDVkIDEwMDY0NAo+ID4+IC0tLSBhL2RyaXZlcnMvZG1hLWJ1Zi9y
ZXNlcnZhdGlvbi5jCj4gPj4gKysrIGIvZHJpdmVycy9kbWEtYnVmL3Jlc2VydmF0aW9uLmMKPiA+
PiBAQCAtMjMxLDYgKzIzMSw2OCBAQCB2b2lkIHJlc2VydmF0aW9uX29iamVjdF9hZGRfc2hhcmVk
X2ZlbmNlKHN0cnVjdCByZXNlcnZhdGlvbl9vYmplY3QgKm9iaiwKPiA+PiAgIH0KPiA+PiAgIEVY
UE9SVF9TWU1CT0wocmVzZXJ2YXRpb25fb2JqZWN0X2FkZF9zaGFyZWRfZmVuY2UpOwo+ID4+Cj4g
Pj4gKy8qKgo+ID4+ICsgKiByZXNlcnZhdGlvbl9vYmplY3RfcmVtb3ZlX3NoYXJlZF9mZW5jZSAt
IHJlbW92ZSBzaGFyZWQgZmVuY2VzCj4gPj4gKyAqIEBvYmo6IHRoZSByZXNlcnZhdGlvbiBvYmpl
Y3QKPiA+PiArICogQGNvbnRleHQ6IHRoZSBjb250ZXh0IG9mIHRoZSBmZW5jZXMgdG8gcmVtb3Zl
Cj4gPj4gKyAqCj4gPj4gKyAqIFJlbW92ZSBzaGFyZWQgZmVuY2VzIGJhc2VkIG9uIHRoZWlyIGZl
bmNlIGNvbnRleHQuCj4gPj4gKyAqLwo+ID4gVGhpcyBuZWVkcyBhIHNlcmlvdXMgZXhwbGFuYXRp
b24gb2YgIndoeT8iLiBSZW1vdmluZyBmZW5jZXMgd2l0aG91dAo+ID4gZ3VhcmFudGVlaW5nIHRo
ZXkncmUgYWxsIHNpZ25hbGVkIGlzIGEgZ29vZCB3YXkgdG8gY3JlYXRlIGhhdm9jLiBZb3VyCj4g
PiBjb21taXQgbWVzc2FnZSBoYXMgYSBmZXcgd29yZHMgYWJvdXQgd2hhdCB5b3UncmUgZG9pbmcg
aGVyZSwgYnV0IGl0Cj4gPiBzdGlsbCBkb2Vzbid0IGV4cGxhaW4gd2h5IHRoaXMgaXMgc2FmZSBh
bmQgd2hlbiBleGFjdGx5IGl0IHNob3VsZCBiZQo+ID4gdXNlZC4KPgo+IFllYWgsIEknbSBub3Qg
dmVyeSBrZWVuIGFib3V0IHRoaXMgZWl0aGVyLgo+Cj4gVGhlIGtleSBwb2ludCBpcyB0aGUgbWVt
b3J5IGlzIG5vdCBhY2Nlc3NpYmxlIGJ5IHRoZSBoYXJkd2FyZSBhbnkgbW9yZQo+IGJlY2F1c2Ug
aXQgaXMgZnJlZWQgYW5kIHJlbW92ZWQgZnJvbSB0aGUgcGFnZSB0YWJsZXMuCj4KPiBTbyBmdXJ0
aGVyIGFjY2VzcyBpcyBwcmV2ZW50ZWQgYW5kIGluIHRoaXMgc3BlY2lhbCBjYXNlIGl0IGlzIGFj
dHVhbGx5Cj4gdmFsaWQgdG8gZG8gdGhpcyBldmVuIGlmIHRoZSBvcGVyYXRpb24gcmVwcmVzZW50
ZWQgYnkgdGhlIGZlbmNlIGlzIHN0aWxsCj4gb25nb2luZy4KCkhtLCB3aHkgZG8geW91IGhhdmUg
dG8gcmVtb3ZlIHRoZXNlIGZlbmNlcyB0aGVuPyBDYW4ndCB5b3UganVzdCBsZXQKdGhlbSBzaWdu
YWwgYW5kIGdldCBjb2xsZWN0ZWQgYXMgdXN1YWw/IEFzIHNvb24gYXMgeW91IHNoYXJlIGJ1ZmZl
cnMKdGhlc2UgZmVuY2VzIGNhbiBnZXQgYW55d2hlcmUsIHNvIHlvdSBuZWVkIHRvIGNvcnJlY3Rs
eSB1bndpbmQgdGhlbSBubwptYXR0ZXIgd2hhdC4KCllvdSdyZSBraW5kYSBzdGlsbCBqdXN0IGRl
c2NyaWJpbmcgd2hhdCB5b3UncmUgZG9pbmcsIG5vdCB3aHkuCgo+IEhvdyBzaG91bGQgd2Ugd29y
ZCB0aGlzPyBTb21ldGhpbmcgbGlrZToKPgo+ICAgKiBSZW1vdmUgc2hhcmVkIGZlbmNlcyBiYXNl
ZCBvbiB0aGVpciBmZW5jZSBjb250ZXh0LiBSZW1vdmluZyBhIGZlbmNlCj4gYmVmb3JlIGl0IGlz
IHNpZ25hbGVkIGlzIG9ubHkgdmFsaWQgaWYgaGFyZHdhcmUgYWNjZXNzIGlzIHByZXZlbnRlZCBi
eQo+IHNvbWUgb3RoZXIgbWVhbnMgbGlrZSBJT01NVSBvciBzaW1pbGFyIHZpcnR1YWwgbWVtb3J5
IHByb3RlY3Rpb24uCgpUaGUgcGFydCB0aGF0IGZyZWFrcyBtZSBvdXQgaXMgd2hldGhlciB3ZSBi
cmVhayB0aGUgZmVuY2UgY2hhaW5nCmFueXdoZXJlIGJ5IHJlbW92aW5nIGZlbmNlcy4gQnV0IEkg
Z3Vlc3MgaWYgeW91J3JlIG9ubHkgcmVtb3ZpbmcgdGhlCnNoYXJlZCBmZW5jZXMgdGhhdCBzaG91
ZGwgYmUgZmluZSAuLi4KCj4gPiBBbHNvIEknbSBub3Qgc3VyZSAoZGVwZW5kaW5nIHVwb24gd2hh
dCB5b3UgdXNlIHRoaXMgZm9yKSB0aGlzIGlzCj4gPiBhY3R1YWxseSBjb3JyZWN0IG91dHNpZGUg
b2YgYW1kZ3B1IGFuZCBpdCdzIGlnbm9yYW5jZSBvZiB0aGUgZXhjbHVzaXZlCj4gPiBmZW5jZS4K
Pgo+IE5vLCB0aGF0IGlzIGNvbXBsZXRlbHkgdW5yZWxhdGVkLiBCdXQgSSB0aG91Z2h0IHRoYXQg
SSBjbGVhbiB0aGlzIHVwCj4gYmVmb3JlIEkgc3RhcnQgdG8gdGFja2xlIHRoZSBleGNsdXNpdmUg
ZmVuY2UgaXNzdWUuCgouLi4gZXhjZXB0IGFtZGdwdSBoYXMgaW50ZXJuYWxseSBhIHZlcnkgc3Ry
YW5nZSBpZGVhIG9mIHNoYXJlZCBmZW5jZXMKd2l0aCBhdXRvLWV4Y2x1c2l2ZSBwcm9tb3Rpb24u
IEFuZCBJIHRoaW5rIHJlbW92aW5nIGV4Y2x1c2l2ZSBmZW5jZXMKd2lsbCBicmVhayB0aGUgZmVu
Y2UgZGVwZW5kZW5jaWVzIG9mIG90aGVyIChlYXJsaWVyKSBkbWEgZHJpdmVycyBieQpvdGhlciBv
cGVyYXRpb25zLiBPciBpcyB0aGF0IHdoeSB5b3UgZmlsdGVyIG9uIHRoZSBjb250ZXh0LAplc3Nl
bnRpYWxseSBhbWQncyB3YXkgb2Ygc2F5aW5nICJyZW1vdmUgYWxsIHNoYXJlZCBmZW5jZXMgZm9y
IHRoaXMKdGhpbmcsIGtlZXAgb25seSB0aGUgZXhjbHVzaXZlIG9uZXMiLgoKSSBndWVzcyBJIG5l
ZWQgdG8gcmVhZCB3aGF0IHRoaXMgYWN0dWFsbHkgZG9lcyBpbiB0aGUgY29kZSwgc2luY2UgSQpz
dGlsbCBoYXZlIG5vIGlkZWEgd2h5IHlvdSBuZWVkIHRvIGRvIHRoaXMuCi1EYW5pZWwKCj4gQ2hy
aXN0aWFuLgo+Cj4gPiAtRGFuaWVsCj4gPgo+ID4+ICtpbnQgcmVzZXJ2YXRpb25fb2JqZWN0X3Jl
bW92ZV9zaGFyZWRfZmVuY2Uoc3RydWN0IHJlc2VydmF0aW9uX29iamVjdCAqb2JqLAo+ID4+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50NjRfdCBjb250ZXh0
KQo+ID4+ICt7Cj4gPj4gKyAgICAgICBzdHJ1Y3QgcmVzZXJ2YXRpb25fb2JqZWN0X2xpc3QgKm9s
ZCwgKm5ldzsKPiA+PiArICAgICAgIHVuc2lnbmVkIGludCBpLCBqLCBrOwo+ID4+ICsKPiA+PiAr
ICAgICAgIHJlc2VydmF0aW9uX29iamVjdF9hc3NlcnRfaGVsZChvYmopOwo+ID4+ICsKPiA+PiAr
ICAgICAgIG9sZCA9IHJlc2VydmF0aW9uX29iamVjdF9nZXRfbGlzdChvYmopOwo+ID4+ICsgICAg
ICAgaWYgKCFvbGQpCj4gPj4gKyAgICAgICAgICAgICAgIHJldHVybiAwOwo+ID4+ICsKPiA+PiAr
ICAgICAgIG5ldyA9IGttYWxsb2Mob2Zmc2V0b2YodHlwZW9mKCpuZXcpLCBzaGFyZWRbb2xkLT5z
aGFyZWRfbWF4XSksCj4gPj4gKyAgICAgICAgICAgICAgICAgICAgIEdGUF9LRVJORUwpOwo+ID4+
ICsgICAgICAgaWYgKCFuZXcpCj4gPj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRU5PTUVNOwo+
ID4+ICsKPiA+PiArICAgICAgIC8qIEdvIHRocm91Z2ggYWxsIHRoZSBzaGFyZWQgZmVuY2VzIGlu
IHRoZSByZXNldmF0aW9uIG9iamVjdCBhbmQgc29ydAo+ID4+ICsgICAgICAgICogdGhlIGludGVy
ZXN0aW5nIG9uZXMgdG8gdGhlIGVuZCBvZiB0aGUgbmV3IGxpc3QuCj4gPj4gKyAgICAgICAgKi8K
PiA+PiArICAgICAgIGZvciAoaSA9IDAsIGogPSBvbGQtPnNoYXJlZF9jb3VudCwgayA9IDA7IGkg
PCBvbGQtPnNoYXJlZF9jb3VudDsgKytpKSB7Cj4gPj4gKyAgICAgICAgICAgICAgIHN0cnVjdCBk
bWFfZmVuY2UgKmY7Cj4gPj4gKwo+ID4+ICsgICAgICAgICAgICAgICBmID0gcmN1X2RlcmVmZXJl
bmNlX3Byb3RlY3RlZChvbGQtPnNoYXJlZFtpXSwKPiA+PiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXJ2YXRpb25fb2JqZWN0X2hlbGQob2JqKSk7Cj4g
Pj4gKwo+ID4+ICsgICAgICAgICAgICAgICBpZiAoZi0+Y29udGV4dCA9PSBjb250ZXh0KQo+ID4+
ICsgICAgICAgICAgICAgICAgICAgICAgIFJDVV9JTklUX1BPSU5URVIobmV3LT5zaGFyZWRbLS1q
XSwgZik7Cj4gPj4gKyAgICAgICAgICAgICAgIGVsc2UKPiA+PiArICAgICAgICAgICAgICAgICAg
ICAgICBSQ1VfSU5JVF9QT0lOVEVSKG5ldy0+c2hhcmVkW2srK10sIGYpOwo+ID4+ICsgICAgICAg
fQo+ID4+ICsgICAgICAgbmV3LT5zaGFyZWRfbWF4ID0gb2xkLT5zaGFyZWRfbWF4Owo+ID4+ICsg
ICAgICAgbmV3LT5zaGFyZWRfY291bnQgPSBrOwo+ID4+ICsKPiA+PiArICAgICAgIC8qIEluc3Rh
bGwgdGhlIG5ldyBmZW5jZSBsaXN0LCBzZXFjb3VudCBwcm92aWRlcyB0aGUgYmFycmllcnMgKi8K
PiA+PiArICAgICAgIHByZWVtcHRfZGlzYWJsZSgpOwo+ID4+ICsgICAgICAgd3JpdGVfc2VxY291
bnRfYmVnaW4oJm9iai0+c2VxKTsKPiA+PiArICAgICAgIFJDVV9JTklUX1BPSU5URVIob2JqLT5m
ZW5jZSwgbmV3KTsKPiA+PiArICAgICAgIHdyaXRlX3NlcWNvdW50X2VuZCgmb2JqLT5zZXEpOwo+
ID4+ICsgICAgICAgcHJlZW1wdF9lbmFibGUoKTsKPiA+PiArCj4gPj4gKyAgICAgICAvKiBEcm9w
IHRoZSByZWZlcmVuY2VzIHRvIHRoZSByZW1vdmVkIGZlbmNlcyAqLwo+ID4+ICsgICAgICAgZm9y
IChpID0gaiwgayA9IDA7IGkgPCBvbGQtPnNoYXJlZF9jb3VudDsgKytpKSB7Cj4gPj4gKyAgICAg
ICAgICAgICAgIHN0cnVjdCBkbWFfZmVuY2UgKmY7Cj4gPj4gKwo+ID4+ICsgICAgICAgICAgICAg
ICBmID0gcmN1X2RlcmVmZXJlbmNlX3Byb3RlY3RlZChuZXctPnNoYXJlZFtpXSwKPiA+PiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXJ2YXRpb25fb2Jq
ZWN0X2hlbGQob2JqKSk7Cj4gPj4gKyAgICAgICAgICAgICAgIGRtYV9mZW5jZV9wdXQoZik7Cj4g
Pj4gKyAgICAgICB9Cj4gPj4gKyAgICAgICBrZnJlZV9yY3Uob2xkLCByY3UpOwo+ID4+ICsKPiA+
PiArICAgICAgIHJldHVybiAwOwo+ID4+ICt9Cj4gPj4gK0VYUE9SVF9TWU1CT0wocmVzZXJ2YXRp
b25fb2JqZWN0X3JlbW92ZV9zaGFyZWRfZmVuY2UpOwo+ID4+ICsKPiA+PiAgIC8qKgo+ID4+ICAg
ICogcmVzZXJ2YXRpb25fb2JqZWN0X2FkZF9leGNsX2ZlbmNlIC0gQWRkIGFuIGV4Y2x1c2l2ZSBm
ZW5jZS4KPiA+PiAgICAqIEBvYmo6IHRoZSByZXNlcnZhdGlvbiBvYmplY3QKPiA+PiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9ncHV2bS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9ncHV2bS5jCj4gPj4gaW5k
ZXggMTBhYmFlMzk4ZTUxLi45YjI1YWQzZDAwM2UgMTAwNjQ0Cj4gPj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9ncHV2bS5jCj4gPj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9ncHV2bS5jCj4gPj4gQEAgLTIyNCw1
MCArMjI0LDcgQEAgc3RhdGljIGludCBhbWRncHVfYW1ka2ZkX3JlbW92ZV9ldmljdGlvbl9mZW5j
ZShzdHJ1Y3QgYW1kZ3B1X2JvICpibywKPiA+PiAgICAgICAgICBpZiAoIWVmKQo+ID4+ICAgICAg
ICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gPj4KPiA+PiAtICAgICAgIG9sZCA9IHJlc2Vy
dmF0aW9uX29iamVjdF9nZXRfbGlzdChyZXN2KTsKPiA+PiAtICAgICAgIGlmICghb2xkKQo+ID4+
IC0gICAgICAgICAgICAgICByZXR1cm4gMDsKPiA+PiAtCj4gPj4gLSAgICAgICBuZXcgPSBrbWFs
bG9jKG9mZnNldG9mKHR5cGVvZigqbmV3KSwgc2hhcmVkW29sZC0+c2hhcmVkX21heF0pLAo+ID4+
IC0gICAgICAgICAgICAgICAgICAgICBHRlBfS0VSTkVMKTsKPiA+PiAtICAgICAgIGlmICghbmV3
KQo+ID4+IC0gICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiA+PiAtCj4gPj4gLSAgICAg
ICAvKiBHbyB0aHJvdWdoIGFsbCB0aGUgc2hhcmVkIGZlbmNlcyBpbiB0aGUgcmVzZXZhdGlvbiBv
YmplY3QgYW5kIHNvcnQKPiA+PiAtICAgICAgICAqIHRoZSBpbnRlcmVzdGluZyBvbmVzIHRvIHRo
ZSBlbmQgb2YgdGhlIGxpc3QuCj4gPj4gLSAgICAgICAgKi8KPiA+PiAtICAgICAgIGZvciAoaSA9
IDAsIGogPSBvbGQtPnNoYXJlZF9jb3VudCwgayA9IDA7IGkgPCBvbGQtPnNoYXJlZF9jb3VudDsg
KytpKSB7Cj4gPj4gLSAgICAgICAgICAgICAgIHN0cnVjdCBkbWFfZmVuY2UgKmY7Cj4gPj4gLQo+
ID4+IC0gICAgICAgICAgICAgICBmID0gcmN1X2RlcmVmZXJlbmNlX3Byb3RlY3RlZChvbGQtPnNo
YXJlZFtpXSwKPiA+PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgcmVzZXJ2YXRpb25fb2JqZWN0X2hlbGQocmVzdikpOwo+ID4+IC0KPiA+PiAtICAgICAgICAg
ICAgICAgaWYgKGYtPmNvbnRleHQgPT0gZWYtPmJhc2UuY29udGV4dCkKPiA+PiAtICAgICAgICAg
ICAgICAgICAgICAgICBSQ1VfSU5JVF9QT0lOVEVSKG5ldy0+c2hhcmVkWy0tal0sIGYpOwo+ID4+
IC0gICAgICAgICAgICAgICBlbHNlCj4gPj4gLSAgICAgICAgICAgICAgICAgICAgICAgUkNVX0lO
SVRfUE9JTlRFUihuZXctPnNoYXJlZFtrKytdLCBmKTsKPiA+PiAtICAgICAgIH0KPiA+PiAtICAg
ICAgIG5ldy0+c2hhcmVkX21heCA9IG9sZC0+c2hhcmVkX21heDsKPiA+PiAtICAgICAgIG5ldy0+
c2hhcmVkX2NvdW50ID0gazsKPiA+PiAtCj4gPj4gLSAgICAgICAvKiBJbnN0YWxsIHRoZSBuZXcg
ZmVuY2UgbGlzdCwgc2VxY291bnQgcHJvdmlkZXMgdGhlIGJhcnJpZXJzICovCj4gPj4gLSAgICAg
ICBwcmVlbXB0X2Rpc2FibGUoKTsKPiA+PiAtICAgICAgIHdyaXRlX3NlcWNvdW50X2JlZ2luKCZy
ZXN2LT5zZXEpOwo+ID4+IC0gICAgICAgUkNVX0lOSVRfUE9JTlRFUihyZXN2LT5mZW5jZSwgbmV3
KTsKPiA+PiAtICAgICAgIHdyaXRlX3NlcWNvdW50X2VuZCgmcmVzdi0+c2VxKTsKPiA+PiAtICAg
ICAgIHByZWVtcHRfZW5hYmxlKCk7Cj4gPj4gLQo+ID4+IC0gICAgICAgLyogRHJvcCB0aGUgcmVm
ZXJlbmNlcyB0byB0aGUgcmVtb3ZlZCBmZW5jZXMgb3IgbW92ZSB0aGVtIHRvIGVmX2xpc3QgKi8K
PiA+PiAtICAgICAgIGZvciAoaSA9IGosIGsgPSAwOyBpIDwgb2xkLT5zaGFyZWRfY291bnQ7ICsr
aSkgewo+ID4+IC0gICAgICAgICAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICpmOwo+ID4+IC0KPiA+
PiAtICAgICAgICAgICAgICAgZiA9IHJjdV9kZXJlZmVyZW5jZV9wcm90ZWN0ZWQobmV3LT5zaGFy
ZWRbaV0sCj4gPj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHJlc2VydmF0aW9uX29iamVjdF9oZWxkKHJlc3YpKTsKPiA+PiAtICAgICAgICAgICAgICAgZG1h
X2ZlbmNlX3B1dChmKTsKPiA+PiAtICAgICAgIH0KPiA+PiAtICAgICAgIGtmcmVlX3JjdShvbGQs
IHJjdSk7Cj4gPj4gLQo+ID4+IC0gICAgICAgcmV0dXJuIDA7Cj4gPj4gKyAgICAgICByZXR1cm4g
cmVzZXJ2YXRpb25fb2JqZWN0X3JlbW92ZV9zaGFyZWRfZmVuY2UocmVzdiwgZWYtPmJhc2UuY29u
dGV4dCk7Cj4gPj4gICB9Cj4gPj4KPiA+PiAgIHN0YXRpYyBpbnQgYW1kZ3B1X2FtZGtmZF9ib192
YWxpZGF0ZShzdHJ1Y3QgYW1kZ3B1X2JvICpibywgdWludDMyX3QgZG9tYWluLAo+ID4+IGRpZmYg
LS1naXQgYS9pbmNsdWRlL2xpbnV4L3Jlc2VydmF0aW9uLmggYi9pbmNsdWRlL2xpbnV4L3Jlc2Vy
dmF0aW9uLmgKPiA+PiBpbmRleCBmNDdlODE5NmQwMzkuLjFjODMzYTU2YjY3OCAxMDA2NDQKPiA+
PiAtLS0gYS9pbmNsdWRlL2xpbnV4L3Jlc2VydmF0aW9uLmgKPiA+PiArKysgYi9pbmNsdWRlL2xp
bnV4L3Jlc2VydmF0aW9uLmgKPiA+PiBAQCAtMjI5LDcgKzIyOSw4IEBAIGludCByZXNlcnZhdGlv
bl9vYmplY3RfcmVzZXJ2ZV9zaGFyZWQoc3RydWN0IHJlc2VydmF0aW9uX29iamVjdCAqb2JqLAo+
ID4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBu
dW1fZmVuY2VzKTsKPiA+PiAgIHZvaWQgcmVzZXJ2YXRpb25fb2JqZWN0X2FkZF9zaGFyZWRfZmVu
Y2Uoc3RydWN0IHJlc2VydmF0aW9uX29iamVjdCAqb2JqLAo+ID4+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKTsKPiA+PiAt
Cj4gPj4gK2ludCByZXNlcnZhdGlvbl9vYmplY3RfcmVtb3ZlX3NoYXJlZF9mZW5jZShzdHJ1Y3Qg
cmVzZXJ2YXRpb25fb2JqZWN0ICpvYmosCj4gPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVpbnQ2NF90IGNvbnRleHQpOwo+ID4+ICAgdm9pZCByZXNlcnZhdGlv
bl9vYmplY3RfYWRkX2V4Y2xfZmVuY2Uoc3RydWN0IHJlc2VydmF0aW9uX29iamVjdCAqb2JqLAo+
ID4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZG1hX2Zl
bmNlICpmZW5jZSk7Cj4gPj4KPiA+PiAtLQo+ID4+IDIuMTcuMQo+ID4+Cj4gPj4gX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiA+PiBkcmktZGV2ZWwgbWFp
bGluZyBsaXN0Cj4gPj4gZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+ID4+IGh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCj4gPgo+
ID4KPgoKCi0tIApEYW5pZWwgVmV0dGVyClNvZnR3YXJlIEVuZ2luZWVyLCBJbnRlbCBDb3Jwb3Jh
dGlvbgorNDEgKDApIDc5IDM2NSA1NyA0OCAtIGh0dHA6Ly9ibG9nLmZmd2xsLmNoCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
