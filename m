Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3EB70AC073
	for <lists+dri-devel@lfdr.de>; Fri,  6 Sep 2019 21:24:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D275D6E0BD;
	Fri,  6 Sep 2019 19:24:00 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd41.google.com (mail-io1-xd41.google.com
 [IPv6:2607:f8b0:4864:20::d41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4C7376E10B
 for <dri-devel@lists.freedesktop.org>; Fri,  6 Sep 2019 19:23:59 +0000 (UTC)
Received: by mail-io1-xd41.google.com with SMTP id u185so15172419iod.10
 for <dri-devel@lists.freedesktop.org>; Fri, 06 Sep 2019 12:23:59 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=3Y04QnjYU5dJNrZssW/fqqEItLo+91e3CGDIJ1aD7PM=;
 b=DoDXSZUZfNXp016JuJxzIfi9upiQ+U+6CnBhhDTXNhLShup+sSSzew+zsRiPhVk4oZ
 a3OwQOFDaTn7liLi3FfLw9sjgPgx3/zt5imtkpmrpZ70JaaY2VUE9D94mr2B2I9an8Ju
 GTJl9KfRJp5pdURxdhaIe5zpo+43G0BDUJxHEiLc2x8/P14vQpmghUv82VUJwJK4p+5h
 CXfs7nZ335c0gTK4RCEQ0gVclvmJuX2jNnDO0AO81ZsxYjXJkXYKsB0S67Dv0o4kEKTd
 xmjTMrhPFodgQK9Wu+YWONdQ6NCNAAs8KBarz/UCJSZPFNuxaIAqsNkCasrrF/8inP4o
 vJMw==
X-Gm-Message-State: APjAAAXytCA+oFEWRhKkG4jLFN/ng5B5VduePlhgQMUPAhAHg0DceSO7
 5bvGXz8l6wAt0rBnfSR0qpjnUXdLZzejEg==
X-Google-Smtp-Source: APXvYqyBbtoo1o0fe5WO0n2dN8F0Smtrfi9xLASw+PgMwTpy9LBoyvwyJFyzoel+FarZsdy/gyoIhw==
X-Received: by 2002:a02:cf10:: with SMTP id q16mr11453526jar.89.1567797837840; 
 Fri, 06 Sep 2019 12:23:57 -0700 (PDT)
Received: from ddavenport4.bld.corp.google.com
 ([2620:15c:183:0:92f:a80a:519d:f777])
 by smtp.gmail.com with ESMTPSA id h70sm10931804iof.48.2019.09.06.12.23.56
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
 Fri, 06 Sep 2019 12:23:57 -0700 (PDT)
From: Drew Davenport <ddavenport@chromium.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 5/6] drm/msm/dpu: Remove unnecessary NULL checks
Date: Fri,  6 Sep 2019 13:23:43 -0600
Message-Id: <20190906192344.223694-5-ddavenport@chromium.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190906192344.223694-1-ddavenport@chromium.org>
References: <20190906192344.223694-1-ddavenport@chromium.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=chromium.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=3Y04QnjYU5dJNrZssW/fqqEItLo+91e3CGDIJ1aD7PM=;
 b=NLZLAm6VsmD2KIJSboAW7bdf1CLhAbOAzv1bOsD/9BWTa31MLOaEYpevUNHRd4Nkeh
 wSE8T5fq2iEzPzoDmb3K+tXS4x7NlHuCZX+fIr2tK3inGdI6hyvNdSwDNCgFEFdwOtHA
 0IWPyIcC/3j6cp7bIwei94+YwSaRUDkDqb0g0=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Bruce Wang <bzwang@chromium.org>, Fritz Koenig <frkoenig@google.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 David Airlie <airlied@linux.ie>, Sam Ravnborg <sam@ravnborg.org>,
 Abhinav Kumar <abhinavk@codeaurora.org>, linux-kernel@vger.kernel.org,
 Jayant Shekhar <jshekhar@codeaurora.org>,
 Alexios Zavras <alexios.zavras@intel.com>,
 Sravanthi Kollukuduru <skolluku@codeaurora.org>, linux-arm-msm@vger.kernel.org,
 Drew Davenport <ddavenport@chromium.org>, Thomas Gleixner <tglx@linutronix.de>,
 freedreno@lists.freedesktop.org, Sean Paul <sean@poorly.run>,
 Allison Randal <allison@lohutok.net>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

bXNtX2RybV9wcml2YXRlLmttcyB3aWxsIG9ubHkgYmUgTlVMTCBpbiB0aGUgZHVtbXkgaGVhZGxl
c3MgY2FzZSwgc28KdGhlcmUgaXMgbm8gbmVlZCB0byBjaGVjayBpdCBpbiB0aGUgZHB1IGRpc3Bs
YXkgZHJpdmVyLgoKU2lnbmVkLW9mZi1ieTogRHJldyBEYXZlbnBvcnQgPGRkYXZlbnBvcnRAY2hy
b21pdW0ub3JnPgotLS0KCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfY29yZV9p
cnEuYyAgfCAyMyArKysrKysrKy0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3Av
ZHB1MS9kcHVfY29yZV9wZXJmLmMgfCAxMiArKystLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vbXNt
L2Rpc3AvZHB1MS9kcHVfZW5jb2Rlci5jICAgfCAxNCArKy0tLS0tLS0tLQogLi4uL2RybS9tc20v
ZGlzcC9kcHUxL2RwdV9lbmNvZGVyX3BoeXNfY21kLmMgIHwgIDIgKy0KIC4uLi9kcm0vbXNtL2Rp
c3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX3ZpZC5jICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0v
bXNtL2Rpc3AvZHB1MS9kcHVfa21zLmMgICAgICAgfCAgNSArLS0tCiBkcml2ZXJzL2dwdS9kcm0v
bXNtL2Rpc3AvZHB1MS9kcHVfdmJpZi5jICAgICAgfCAgNiArLS0tLQogNyBmaWxlcyBjaGFuZ2Vk
LCAxOSBpbnNlcnRpb25zKCspLCA0NSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfY29yZV9pcnEuYyBiL2RyaXZlcnMvZ3B1L2RybS9t
c20vZGlzcC9kcHUxL2RwdV9jb3JlX2lycS5jCmluZGV4IDE3ZjkxN2I3MThjZS4uYTUzNTE3YWJm
MTVjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfY29yZV9p
cnEuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfY29yZV9pcnEuYwpA
QCAtNTUsOCArNTUsNyBAQCBzdGF0aWMgdm9pZCBkcHVfY29yZV9pcnFfY2FsbGJhY2tfaGFuZGxl
cih2b2lkICphcmcsIGludCBpcnFfaWR4KQogaW50IGRwdV9jb3JlX2lycV9pZHhfbG9va3VwKHN0
cnVjdCBkcHVfa21zICpkcHVfa21zLAogCQllbnVtIGRwdV9pbnRyX3R5cGUgaW50cl90eXBlLCB1
MzIgaW5zdGFuY2VfaWR4KQogewotCWlmICghZHB1X2ttcyB8fCAhZHB1X2ttcy0+aHdfaW50ciB8
fAotCQkJIWRwdV9rbXMtPmh3X2ludHItPm9wcy5pcnFfaWR4X2xvb2t1cCkKKwlpZiAoIWRwdV9r
bXMtPmh3X2ludHIgfHwgIWRwdV9rbXMtPmh3X2ludHItPm9wcy5pcnFfaWR4X2xvb2t1cCkKIAkJ
cmV0dXJuIC1FSU5WQUw7CiAKIAlyZXR1cm4gZHB1X2ttcy0+aHdfaW50ci0+b3BzLmlycV9pZHhf
bG9va3VwKGludHJfdHlwZSwKQEAgLTczLDcgKzcyLDcgQEAgc3RhdGljIGludCBfZHB1X2NvcmVf
aXJxX2VuYWJsZShzdHJ1Y3QgZHB1X2ttcyAqZHB1X2ttcywgaW50IGlycV9pZHgpCiAJdW5zaWdu
ZWQgbG9uZyBpcnFfZmxhZ3M7CiAJaW50IHJldCA9IDAsIGVuYWJsZV9jb3VudDsKIAotCWlmICgh
ZHB1X2ttcyB8fCAhZHB1X2ttcy0+aHdfaW50ciB8fAorCWlmICghZHB1X2ttcy0+aHdfaW50ciB8
fAogCQkJIWRwdV9rbXMtPmlycV9vYmouZW5hYmxlX2NvdW50cyB8fAogCQkJIWRwdV9rbXMtPmly
cV9vYmouaXJxX2NvdW50cykgewogCQlEUFVfRVJST1IoImludmFsaWQgcGFyYW1zXG4iKTsKQEAg
LTExNCw3ICsxMTMsNyBAQCBpbnQgZHB1X2NvcmVfaXJxX2VuYWJsZShzdHJ1Y3QgZHB1X2ttcyAq
ZHB1X2ttcywgaW50ICppcnFfaWR4cywgdTMyIGlycV9jb3VudCkKIHsKIAlpbnQgaSwgcmV0ID0g
MCwgY291bnRzOwogCi0JaWYgKCFkcHVfa21zIHx8ICFpcnFfaWR4cyB8fCAhaXJxX2NvdW50KSB7
CisJaWYgKCFpcnFfaWR4cyB8fCAhaXJxX2NvdW50KSB7CiAJCURQVV9FUlJPUigiaW52YWxpZCBw
YXJhbXNcbiIpOwogCQlyZXR1cm4gLUVJTlZBTDsKIAl9CkBAIC0xMzgsNyArMTM3LDcgQEAgc3Rh
dGljIGludCBfZHB1X2NvcmVfaXJxX2Rpc2FibGUoc3RydWN0IGRwdV9rbXMgKmRwdV9rbXMsIGlu
dCBpcnFfaWR4KQogewogCWludCByZXQgPSAwLCBlbmFibGVfY291bnQ7CiAKLQlpZiAoIWRwdV9r
bXMgfHwgIWRwdV9rbXMtPmh3X2ludHIgfHwgIWRwdV9rbXMtPmlycV9vYmouZW5hYmxlX2NvdW50
cykgeworCWlmICghZHB1X2ttcy0+aHdfaW50ciB8fCAhZHB1X2ttcy0+aXJxX29iai5lbmFibGVf
Y291bnRzKSB7CiAJCURQVV9FUlJPUigiaW52YWxpZCBwYXJhbXNcbiIpOwogCQlyZXR1cm4gLUVJ
TlZBTDsKIAl9CkBAIC0xNjksNyArMTY4LDcgQEAgaW50IGRwdV9jb3JlX2lycV9kaXNhYmxlKHN0
cnVjdCBkcHVfa21zICpkcHVfa21zLCBpbnQgKmlycV9pZHhzLCB1MzIgaXJxX2NvdW50KQogewog
CWludCBpLCByZXQgPSAwLCBjb3VudHM7CiAKLQlpZiAoIWRwdV9rbXMgfHwgIWlycV9pZHhzIHx8
ICFpcnFfY291bnQpIHsKKwlpZiAoIWlycV9pZHhzIHx8ICFpcnFfY291bnQpIHsKIAkJRFBVX0VS
Uk9SKCJpbnZhbGlkIHBhcmFtc1xuIik7CiAJCXJldHVybiAtRUlOVkFMOwogCX0KQEAgLTE4Niw3
ICsxODUsNyBAQCBpbnQgZHB1X2NvcmVfaXJxX2Rpc2FibGUoc3RydWN0IGRwdV9rbXMgKmRwdV9r
bXMsIGludCAqaXJxX2lkeHMsIHUzMiBpcnFfY291bnQpCiAKIHUzMiBkcHVfY29yZV9pcnFfcmVh
ZChzdHJ1Y3QgZHB1X2ttcyAqZHB1X2ttcywgaW50IGlycV9pZHgsIGJvb2wgY2xlYXIpCiB7Ci0J
aWYgKCFkcHVfa21zIHx8ICFkcHVfa21zLT5od19pbnRyIHx8CisJaWYgKCFkcHVfa21zLT5od19p
bnRyIHx8CiAJCQkhZHB1X2ttcy0+aHdfaW50ci0+b3BzLmdldF9pbnRlcnJ1cHRfc3RhdHVzKQog
CQlyZXR1cm4gMDsKIApAQCAtMjA1LDcgKzIwNCw3IEBAIGludCBkcHVfY29yZV9pcnFfcmVnaXN0
ZXJfY2FsbGJhY2soc3RydWN0IGRwdV9rbXMgKmRwdV9rbXMsIGludCBpcnFfaWR4LAogewogCXVu
c2lnbmVkIGxvbmcgaXJxX2ZsYWdzOwogCi0JaWYgKCFkcHVfa21zIHx8ICFkcHVfa21zLT5pcnFf
b2JqLmlycV9jYl90YmwpIHsKKwlpZiAoIWRwdV9rbXMtPmlycV9vYmouaXJxX2NiX3RibCkgewog
CQlEUFVfRVJST1IoImludmFsaWQgcGFyYW1zXG4iKTsKIAkJcmV0dXJuIC1FSU5WQUw7CiAJfQpA
QCAtMjQwLDcgKzIzOSw3IEBAIGludCBkcHVfY29yZV9pcnFfdW5yZWdpc3Rlcl9jYWxsYmFjayhz
dHJ1Y3QgZHB1X2ttcyAqZHB1X2ttcywgaW50IGlycV9pZHgsCiB7CiAJdW5zaWduZWQgbG9uZyBp
cnFfZmxhZ3M7CiAKLQlpZiAoIWRwdV9rbXMgfHwgIWRwdV9rbXMtPmlycV9vYmouaXJxX2NiX3Ri
bCkgeworCWlmICghZHB1X2ttcy0+aXJxX29iai5pcnFfY2JfdGJsKSB7CiAJCURQVV9FUlJPUigi
aW52YWxpZCBwYXJhbXNcbiIpOwogCQlyZXR1cm4gLUVJTlZBTDsKIAl9CkBAIC0yNzQsOCArMjcz
LDcgQEAgaW50IGRwdV9jb3JlX2lycV91bnJlZ2lzdGVyX2NhbGxiYWNrKHN0cnVjdCBkcHVfa21z
ICpkcHVfa21zLCBpbnQgaXJxX2lkeCwKIAogc3RhdGljIHZvaWQgZHB1X2NsZWFyX2FsbF9pcnFz
KHN0cnVjdCBkcHVfa21zICpkcHVfa21zKQogewotCWlmICghZHB1X2ttcyB8fCAhZHB1X2ttcy0+
aHdfaW50ciB8fAotCQkJIWRwdV9rbXMtPmh3X2ludHItPm9wcy5jbGVhcl9hbGxfaXJxcykKKwlp
ZiAoIWRwdV9rbXMtPmh3X2ludHIgfHwgIWRwdV9rbXMtPmh3X2ludHItPm9wcy5jbGVhcl9hbGxf
aXJxcykKIAkJcmV0dXJuOwogCiAJZHB1X2ttcy0+aHdfaW50ci0+b3BzLmNsZWFyX2FsbF9pcnFz
KGRwdV9rbXMtPmh3X2ludHIpOwpAQCAtMjgzLDggKzI4MSw3IEBAIHN0YXRpYyB2b2lkIGRwdV9j
bGVhcl9hbGxfaXJxcyhzdHJ1Y3QgZHB1X2ttcyAqZHB1X2ttcykKIAogc3RhdGljIHZvaWQgZHB1
X2Rpc2FibGVfYWxsX2lycXMoc3RydWN0IGRwdV9rbXMgKmRwdV9rbXMpCiB7Ci0JaWYgKCFkcHVf
a21zIHx8ICFkcHVfa21zLT5od19pbnRyIHx8Ci0JCQkhZHB1X2ttcy0+aHdfaW50ci0+b3BzLmRp
c2FibGVfYWxsX2lycXMpCisJaWYgKCFkcHVfa21zLT5od19pbnRyIHx8ICFkcHVfa21zLT5od19p
bnRyLT5vcHMuZGlzYWJsZV9hbGxfaXJxcykKIAkJcmV0dXJuOwogCiAJZHB1X2ttcy0+aHdfaW50
ci0+b3BzLmRpc2FibGVfYWxsX2lycXMoZHB1X2ttcy0+aHdfaW50cik7CmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfY29yZV9wZXJmLmMgYi9kcml2ZXJzL2dw
dS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfY29yZV9wZXJmLmMKaW5kZXggODM5ODg3YTNhODBjLi5l
OTY4NDMwMTBkZmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2Rw
dV9jb3JlX3BlcmYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfY29y
ZV9wZXJmLmMKQEAgLTMyLDEzICszMiw3IEBAIGVudW0gZHB1X3BlcmZfbW9kZSB7CiBzdGF0aWMg
c3RydWN0IGRwdV9rbXMgKl9kcHVfY3J0Y19nZXRfa21zKHN0cnVjdCBkcm1fY3J0YyAqY3J0YykK
IHsKIAlzdHJ1Y3QgbXNtX2RybV9wcml2YXRlICpwcml2OwotCiAJcHJpdiA9IGNydGMtPmRldi0+
ZGV2X3ByaXZhdGU7Ci0JaWYgKCFwcml2LT5rbXMpIHsKLQkJRFBVX0VSUk9SKCJpbnZhbGlkIGtt
c1xuIik7Ci0JCXJldHVybiBOVUxMOwotCX0KLQogCXJldHVybiB0b19kcHVfa21zKHByaXYtPmtt
cyk7CiB9CiAKQEAgLTExMSw3ICsxMDUsNyBAQCBpbnQgZHB1X2NvcmVfcGVyZl9jcnRjX2NoZWNr
KHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAl9CiAKIAlrbXMgPSBfZHB1X2NydGNfZ2V0X2ttcyhj
cnRjKTsKLQlpZiAoIWttcyB8fCAha21zLT5jYXRhbG9nKSB7CisJaWYgKCFrbXMtPmNhdGFsb2cp
IHsKIAkJRFBVX0VSUk9SKCJpbnZhbGlkIHBhcmFtZXRlcnNcbiIpOwogCQlyZXR1cm4gMDsKIAl9
CkBAIC0yMTksNyArMjEzLDcgQEAgdm9pZCBkcHVfY29yZV9wZXJmX2NydGNfcmVsZWFzZV9idyhz
dHJ1Y3QgZHJtX2NydGMgKmNydGMpCiAJfQogCiAJa21zID0gX2RwdV9jcnRjX2dldF9rbXMoY3J0
Yyk7Ci0JaWYgKCFrbXMgfHwgIWttcy0+Y2F0YWxvZykgeworCWlmICgha21zLT5jYXRhbG9nKSB7
CiAJCURQVV9FUlJPUigiaW52YWxpZCBrbXNcbiIpOwogCQlyZXR1cm47CiAJfQpAQCAtMjkyLDcg
KzI4Niw3IEBAIGludCBkcHVfY29yZV9wZXJmX2NydGNfdXBkYXRlKHN0cnVjdCBkcm1fY3J0YyAq
Y3J0YywKIAl9CiAKIAlrbXMgPSBfZHB1X2NydGNfZ2V0X2ttcyhjcnRjKTsKLQlpZiAoIWttcyB8
fCAha21zLT5jYXRhbG9nKSB7CisJaWYgKCFrbXMtPmNhdGFsb2cpIHsKIAkJRFBVX0VSUk9SKCJp
bnZhbGlkIGttc1xuIik7CiAJCXJldHVybiAtRUlOVkFMOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0v
bXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlci5jCmluZGV4IDdiMzdkMWVlZWFiNS4uODVlN2JhY2Jj
ZTQyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rl
ci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyLmMKQEAg
LTY0NSwxMSArNjQ1LDYgQEAgc3RhdGljIHZvaWQgX2RwdV9lbmNvZGVyX3VwZGF0ZV92c3luY19z
b3VyY2Uoc3RydWN0IGRwdV9lbmNvZGVyX3ZpcnQgKmRwdV9lbmMsCiAJcHJpdiA9IGRybV9lbmMt
PmRldi0+ZGV2X3ByaXZhdGU7CiAKIAlkcHVfa21zID0gdG9fZHB1X2ttcyhwcml2LT5rbXMpOwot
CWlmICghZHB1X2ttcykgewotCQlEUFVfRVJST1IoImludmFsaWQgZHB1X2ttc1xuIik7Ci0JCXJl
dHVybjsKLQl9Ci0KIAlod19tZHB0b3AgPSBkcHVfa21zLT5od19tZHA7CiAJaWYgKCFod19tZHB0
b3ApIHsKIAkJRFBVX0VSUk9SKCJpbnZhbGlkIG1kcHRvcFxuIik7CkBAIC0xMDk4LDEwICsxMDkz
LDYgQEAgc3RhdGljIHZvaWQgX2RwdV9lbmNvZGVyX3ZpcnRfZW5hYmxlX2hlbHBlcihzdHJ1Y3Qg
ZHJtX2VuY29kZXIgKmRybV9lbmMpCiAKIAlwcml2ID0gZHJtX2VuYy0+ZGV2LT5kZXZfcHJpdmF0
ZTsKIAlkcHVfa21zID0gdG9fZHB1X2ttcyhwcml2LT5rbXMpOwotCWlmICghZHB1X2ttcykgewot
CQlEUFVfRVJST1IoImludmFsaWQgZHB1X2ttc1xuIik7Ci0JCXJldHVybjsKLQl9CiAKIAlkcHVf
ZW5jID0gdG9fZHB1X2VuY29kZXJfdmlydChkcm1fZW5jKTsKIAlpZiAoIWRwdV9lbmMgfHwgIWRw
dV9lbmMtPmN1cl9tYXN0ZXIpIHsKQEAgLTIwMzIsOSArMjAyMyw4IEBAIHN0YXRpYyBpbnQgZHB1
X2VuY29kZXJfc2V0dXBfZGlzcGxheShzdHJ1Y3QgZHB1X2VuY29kZXJfdmlydCAqZHB1X2VuYywK
IAllbnVtIGRwdV9pbnRmX3R5cGUgaW50Zl90eXBlOwogCXN0cnVjdCBkcHVfZW5jX3BoeXNfaW5p
dF9wYXJhbXMgcGh5c19wYXJhbXM7CiAKLQlpZiAoIWRwdV9lbmMgfHwgIWRwdV9rbXMpIHsKLQkJ
RFBVX0VSUk9SKCJpbnZhbGlkIGFyZyhzKSwgZW5jICVkIGttcyAlZFxuIiwKLQkJCQlkcHVfZW5j
ICE9IDAsIGRwdV9rbXMgIT0gMCk7CisJaWYgKCFkcHVfZW5jKSB7CisJCURQVV9FUlJPUigiaW52
YWxpZCBhcmcocyksIGVuYyAlZFxuIiwgZHB1X2VuYyAhPSAwKTsKIAkJcmV0dXJuIC1FSU5WQUw7
CiAJfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5j
b2Rlcl9waHlzX2NtZC5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2VuY29k
ZXJfcGh5c19jbWQuYwppbmRleCA1MGZlMWVkNzA5NWMuLjM5ZmMzOWNkMjQzOSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2VuY29kZXJfcGh5c19jbWQuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX2NtZC5j
CkBAIC0zNzMsNyArMzczLDcgQEAgc3RhdGljIHZvaWQgZHB1X2VuY29kZXJfcGh5c19jbWRfdGVh
cmNoZWNrX2NvbmZpZygKIAl9CiAKIAlkcHVfa21zID0gcGh5c19lbmMtPmRwdV9rbXM7Ci0JaWYg
KCFkcHVfa21zIHx8ICFkcHVfa21zLT5kZXYpIHsKKwlpZiAoIWRwdV9rbXMtPmRldikgewogCQlE
UFVfRVJST1IoImludmFsaWQgZGV2aWNlXG4iKTsKIAkJcmV0dXJuOwogCX0KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyX3BoeXNfdmlkLmMgYi9k
cml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX3ZpZC5jCmluZGV4
IGJkMzMzZDk1N2FkZC4uMTVkMjFkN2VjMzA0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
bXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX3ZpZC5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyX3BoeXNfdmlkLmMKQEAgLTM3NCw3ICszNzQsNyBA
QCBzdGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9waHlzX3ZpZF9tb2RlX3NldCgKIAkJc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKm1vZGUsCiAJCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGpfbW9k
ZSkKIHsKLQlpZiAoIXBoeXNfZW5jIHx8ICFwaHlzX2VuYy0+ZHB1X2ttcykgeworCWlmICghcGh5
c19lbmMpIHsKIAkJRFBVX0VSUk9SKCJpbnZhbGlkIGVuY29kZXIva21zXG4iKTsKIAkJcmV0dXJu
OwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuYwppbmRleCA0YTY5ZDhl
Y2Y1ZTEuLjlkNjQyOWZhNjIyOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNw
L2RwdTEvZHB1X2ttcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9r
bXMuYwpAQCAtNDYxLDEwICs0NjEsNyBAQCBzdGF0aWMgdm9pZCBfZHB1X2ttc19kcm1fb2JqX2Rl
c3Ryb3koc3RydWN0IGRwdV9rbXMgKmRwdV9rbXMpCiAJc3RydWN0IG1zbV9kcm1fcHJpdmF0ZSAq
cHJpdjsKIAlpbnQgaTsKIAotCWlmICghZHB1X2ttcykgewotCQlEUFVfRVJST1IoImludmFsaWQg
ZHB1X2ttc1xuIik7Ci0JCXJldHVybjsKLQl9IGVsc2UgaWYgKCFkcHVfa21zLT5kZXYpIHsKKwlp
ZiAoIWRwdV9rbXMtPmRldikgewogCQlEUFVfRVJST1IoImludmFsaWQgZGV2XG4iKTsKIAkJcmV0
dXJuOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV92
YmlmLmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfdmJpZi5jCmluZGV4IDhk
MjRiNzlmZDQwMC4uOTkxZjRjOGY4YTEyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNt
L2Rpc3AvZHB1MS9kcHVfdmJpZi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUx
L2RwdV92YmlmLmMKQEAgLTE1NCwxMCArMTU0LDYgQEAgdm9pZCBkcHVfdmJpZl9zZXRfb3RfbGlt
aXQoc3RydWN0IGRwdV9rbXMgKmRwdV9rbXMsCiAJdTMyIG90X2xpbTsKIAlpbnQgcmV0LCBpOwog
Ci0JaWYgKCFkcHVfa21zKSB7Ci0JCURQVV9FUlJPUigiaW52YWxpZCBhcmd1bWVudHNcbiIpOwot
CQlyZXR1cm47Ci0JfQogCW1kcCA9IGRwdV9rbXMtPmh3X21kcDsKIAogCWZvciAoaSA9IDA7IGkg
PCBBUlJBWV9TSVpFKGRwdV9rbXMtPmh3X3ZiaWYpOyBpKyspIHsKQEAgLTIxNCw3ICsyMTAsNyBA
QCB2b2lkIGRwdV92YmlmX3NldF9xb3NfcmVtYXAoc3RydWN0IGRwdV9rbXMgKmRwdV9rbXMsCiAJ
Y29uc3Qgc3RydWN0IGRwdV92YmlmX3Fvc190YmwgKnFvc190Ymw7CiAJaW50IGk7CiAKLQlpZiAo
IWRwdV9rbXMgfHwgIXBhcmFtcyB8fCAhZHB1X2ttcy0+aHdfbWRwKSB7CisJaWYgKCFwYXJhbXMg
fHwgIWRwdV9rbXMtPmh3X21kcCkgewogCQlEUFVfRVJST1IoImludmFsaWQgYXJndW1lbnRzXG4i
KTsKIAkJcmV0dXJuOwogCX0KLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vZHJpLWRldmVs
