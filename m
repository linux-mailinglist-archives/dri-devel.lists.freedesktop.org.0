Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2B6DF95315
	for <lists+dri-devel@lfdr.de>; Tue, 20 Aug 2019 03:17:57 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 13C546E513;
	Tue, 20 Aug 2019 01:17:51 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 22F126E4A0
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 01:17:39 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id EF5EBD50;
 Tue, 20 Aug 2019 03:17:35 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 06/50] drm/bridge: dumb-vga-dac: Rename internal symbols to
 simple-bridge
Date: Tue, 20 Aug 2019 04:16:37 +0300
Message-Id: <20190820011721.30136-7-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
References: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1566263856;
 bh=Qlcvh1to7Ycvdnn/CQRlQIlXE79uHfIaXZ7sauHF368=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=BtoZx48taz4MzxwaHaxUxad1oLZQEIYIQiJ3BOCHS1UozGzqpKf4TMXh9/DIY1HRi
 TXDSHS0rTlwvrVss4CJ6wGm7DIvgiKIexulAL2XAtJd10t/GxpRg6gvDnxQNqVkGq+
 OvBeduvR+h19ExYrBcD4O+bvLQsveWh/JvLkJuuc=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sean Paul <sean@poorly.run>,
 Sebastian Reichel <sebastian.reichel@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGR1bWItdmdhLWRhYyBkcml2ZXIgaXMgYSBzaW1wbGUgRFJNIGJyaWRnZSBkcml2ZXIgZm9y
IHNpbXBsZSBWR0EKREFDcyB0aGF0IGRvbid0IHJlcXVpcmUgY29uZmlndXJhdGlvbi4gT3RoZXIg
bm9uLVZHQSBicmlkZ2VzIGZhbGwgaW4gYQpzaW1pbGFyIGNhdGVnb3J5LCBhbmQgd291bGQgYmVu
ZWZpdCBmcm9tIGEgY29tbW9uIGRyaXZlci4gUHJlcGFyZSBmb3IKdGhpcyBieSByZW5hbWluZyB0
aGUgaW50ZXJuYWwgc3ltYm9scyBmcm9tIGR1bWItdmdhLWRhYyB0bwpzaW1wbGUtYnJpZGdlLgoK
U2lnbmVkLW9mZi1ieTogTGF1cmVudCBQaW5jaGFydCA8bGF1cmVudC5waW5jaGFydEBpZGVhc29u
Ym9hcmQuY29tPgpSZXZpZXdlZC1ieTogQW5kcnplaiBIYWpkYSA8YS5oYWpkYUBzYW1zdW5nLmNv
bT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2R1bWItdmdhLWRhYy5jIHwgMTU0ICsrKysr
KysrKysrKystLS0tLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgNzcgaW5zZXJ0aW9ucygrKSwg
NzcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9kdW1i
LXZnYS1kYWMuYyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvZHVtYi12Z2EtZGFjLmMKaW5kZXgg
NzRlYmNhNThlYjFmLi4wM2NlYjBjZDhiOWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9i
cmlkZ2UvZHVtYi12Z2EtZGFjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9kdW1iLXZn
YS1kYWMuYwpAQCAtMTYsNyArMTYsNyBAQAogI2luY2x1ZGUgPGRybS9kcm1fcHJpbnQuaD4KICNp
bmNsdWRlIDxkcm0vZHJtX3Byb2JlX2hlbHBlci5oPgogCi1zdHJ1Y3QgZHVtYl92Z2Egeworc3Ry
dWN0IHNpbXBsZV9icmlkZ2UgewogCXN0cnVjdCBkcm1fYnJpZGdlCWJyaWRnZTsKIAlzdHJ1Y3Qg
ZHJtX2Nvbm5lY3Rvcgljb25uZWN0b3I7CiAKQEAgLTI0LDI4ICsyNCwyOCBAQCBzdHJ1Y3QgZHVt
Yl92Z2EgewogCXN0cnVjdCByZWd1bGF0b3IJKnZkZDsKIH07CiAKLXN0YXRpYyBpbmxpbmUgc3Ry
dWN0IGR1bWJfdmdhICoKLWRybV9icmlkZ2VfdG9fZHVtYl92Z2Eoc3RydWN0IGRybV9icmlkZ2Ug
KmJyaWRnZSkKK3N0YXRpYyBpbmxpbmUgc3RydWN0IHNpbXBsZV9icmlkZ2UgKgorZHJtX2JyaWRn
ZV90b19zaW1wbGVfYnJpZGdlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCiB7Ci0JcmV0dXJu
IGNvbnRhaW5lcl9vZihicmlkZ2UsIHN0cnVjdCBkdW1iX3ZnYSwgYnJpZGdlKTsKKwlyZXR1cm4g
Y29udGFpbmVyX29mKGJyaWRnZSwgc3RydWN0IHNpbXBsZV9icmlkZ2UsIGJyaWRnZSk7CiB9CiAK
LXN0YXRpYyBpbmxpbmUgc3RydWN0IGR1bWJfdmdhICoKLWRybV9jb25uZWN0b3JfdG9fZHVtYl92
Z2Eoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKK3N0YXRpYyBpbmxpbmUgc3RydWN0
IHNpbXBsZV9icmlkZ2UgKgorZHJtX2Nvbm5lY3Rvcl90b19zaW1wbGVfYnJpZGdlKHN0cnVjdCBk
cm1fY29ubmVjdG9yICpjb25uZWN0b3IpCiB7Ci0JcmV0dXJuIGNvbnRhaW5lcl9vZihjb25uZWN0
b3IsIHN0cnVjdCBkdW1iX3ZnYSwgY29ubmVjdG9yKTsKKwlyZXR1cm4gY29udGFpbmVyX29mKGNv
bm5lY3Rvciwgc3RydWN0IHNpbXBsZV9icmlkZ2UsIGNvbm5lY3Rvcik7CiB9CiAKLXN0YXRpYyBp
bnQgZHVtYl92Z2FfZ2V0X21vZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCitz
dGF0aWMgaW50IHNpbXBsZV9icmlkZ2VfZ2V0X21vZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpj
b25uZWN0b3IpCiB7Ci0Jc3RydWN0IGR1bWJfdmdhICp2Z2EgPSBkcm1fY29ubmVjdG9yX3RvX2R1
bWJfdmdhKGNvbm5lY3Rvcik7CisJc3RydWN0IHNpbXBsZV9icmlkZ2UgKnNicmlkZ2UgPSBkcm1f
Y29ubmVjdG9yX3RvX3NpbXBsZV9icmlkZ2UoY29ubmVjdG9yKTsKIAlzdHJ1Y3QgZWRpZCAqZWRp
ZDsKIAlpbnQgcmV0OwogCi0JaWYgKCF2Z2EtPmRkYykKKwlpZiAoIXNicmlkZ2UtPmRkYykKIAkJ
Z290byBmYWxsYmFjazsKIAotCWVkaWQgPSBkcm1fZ2V0X2VkaWQoY29ubmVjdG9yLCB2Z2EtPmRk
Yyk7CisJZWRpZCA9IGRybV9nZXRfZWRpZChjb25uZWN0b3IsIHNicmlkZ2UtPmRkYyk7CiAJaWYg
KCFlZGlkKSB7CiAJCURSTV9JTkZPKCJFRElEIHJlYWRvdXQgZmFpbGVkLCBmYWxsaW5nIGJhY2sg
dG8gc3RhbmRhcmQgbW9kZXNcbiIpOwogCQlnb3RvIGZhbGxiYWNrOwpAQCAtNjksMTQgKzY5LDE0
IEBAIHN0YXRpYyBpbnQgZHVtYl92Z2FfZ2V0X21vZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpj
b25uZWN0b3IpCiAJcmV0dXJuIHJldDsKIH0KIAotc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29u
bmVjdG9yX2hlbHBlcl9mdW5jcyBkdW1iX3ZnYV9jb25faGVscGVyX2Z1bmNzID0gewotCS5nZXRf
bW9kZXMJPSBkdW1iX3ZnYV9nZXRfbW9kZXMsCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25u
ZWN0b3JfaGVscGVyX2Z1bmNzIHNpbXBsZV9icmlkZ2VfY29uX2hlbHBlcl9mdW5jcyA9IHsKKwku
Z2V0X21vZGVzCT0gc2ltcGxlX2JyaWRnZV9nZXRfbW9kZXMsCiB9OwogCiBzdGF0aWMgZW51bSBk
cm1fY29ubmVjdG9yX3N0YXR1cwotZHVtYl92Z2FfY29ubmVjdG9yX2RldGVjdChzdHJ1Y3QgZHJt
X2Nvbm5lY3RvciAqY29ubmVjdG9yLCBib29sIGZvcmNlKQorc2ltcGxlX2JyaWRnZV9jb25uZWN0
b3JfZGV0ZWN0KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsIGJvb2wgZm9yY2UpCiB7
Ci0Jc3RydWN0IGR1bWJfdmdhICp2Z2EgPSBkcm1fY29ubmVjdG9yX3RvX2R1bWJfdmdhKGNvbm5l
Y3Rvcik7CisJc3RydWN0IHNpbXBsZV9icmlkZ2UgKnNicmlkZ2UgPSBkcm1fY29ubmVjdG9yX3Rv
X3NpbXBsZV9icmlkZ2UoY29ubmVjdG9yKTsKIAogCS8qCiAJICogRXZlbiBpZiB3ZSBoYXZlIGFu
IEkyQyBidXMsIHdlIGNhbid0IGFzc3VtZSB0aGF0IHRoZSBjYWJsZQpAQCAtODQsMTQgKzg0LDE0
IEBAIGR1bWJfdmdhX2Nvbm5lY3Rvcl9kZXRlY3Qoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5l
Y3RvciwgYm9vbCBmb3JjZSkKIAkgKiB3aXJlIHRoZSBEREMgcGlucywgb3IgdGhlIEkyQyBidXMg
bWlnaHQgbm90IGJlIHdvcmtpbmcgYXQKIAkgKiBhbGwuCiAJICovCi0JaWYgKHZnYS0+ZGRjICYm
IGRybV9wcm9iZV9kZGModmdhLT5kZGMpKQorCWlmIChzYnJpZGdlLT5kZGMgJiYgZHJtX3Byb2Jl
X2RkYyhzYnJpZGdlLT5kZGMpKQogCQlyZXR1cm4gY29ubmVjdG9yX3N0YXR1c19jb25uZWN0ZWQ7
CiAKIAlyZXR1cm4gY29ubmVjdG9yX3N0YXR1c191bmtub3duOwogfQogCi1zdGF0aWMgY29uc3Qg
c3RydWN0IGRybV9jb25uZWN0b3JfZnVuY3MgZHVtYl92Z2FfY29uX2Z1bmNzID0gewotCS5kZXRl
Y3QJCQk9IGR1bWJfdmdhX2Nvbm5lY3Rvcl9kZXRlY3QsCitzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9jb25uZWN0b3JfZnVuY3Mgc2ltcGxlX2JyaWRnZV9jb25fZnVuY3MgPSB7CisJLmRldGVjdAkJ
CT0gc2ltcGxlX2JyaWRnZV9jb25uZWN0b3JfZGV0ZWN0LAogCS5maWxsX21vZGVzCQk9IGRybV9o
ZWxwZXJfcHJvYmVfc2luZ2xlX2Nvbm5lY3Rvcl9tb2RlcywKIAkuZGVzdHJveQkJPSBkcm1fY29u
bmVjdG9yX2NsZWFudXAsCiAJLnJlc2V0CQkJPSBkcm1fYXRvbWljX2hlbHBlcl9jb25uZWN0b3Jf
cmVzZXQsCkBAIC05OSwxMCArOTksMTAgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVj
dG9yX2Z1bmNzIGR1bWJfdmdhX2Nvbl9mdW5jcyA9IHsKIAkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUJ
PSBkcm1fYXRvbWljX2hlbHBlcl9jb25uZWN0b3JfZGVzdHJveV9zdGF0ZSwKIH07CiAKLXN0YXRp
YyBpbnQgZHVtYl92Z2FfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCi0JCQkgICBl
bnVtIGRybV9icmlkZ2VfYXR0YWNoX2ZsYWdzIGZsYWdzKQorc3RhdGljIGludCBzaW1wbGVfYnJp
ZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCWVudW0gZHJtX2JyaWRn
ZV9hdHRhY2hfZmxhZ3MgZmxhZ3MpCiB7Ci0Jc3RydWN0IGR1bWJfdmdhICp2Z2EgPSBkcm1fYnJp
ZGdlX3RvX2R1bWJfdmdhKGJyaWRnZSk7CisJc3RydWN0IHNpbXBsZV9icmlkZ2UgKnNicmlkZ2Ug
PSBkcm1fYnJpZGdlX3RvX3NpbXBsZV9icmlkZ2UoYnJpZGdlKTsKIAlpbnQgcmV0OwogCiAJaWYg
KGZsYWdzICYgRFJNX0JSSURHRV9BVFRBQ0hfTk9fQ09OTkVDVE9SKQpAQCAtMTEzLDUwICsxMTMs
NTAgQEAgc3RhdGljIGludCBkdW1iX3ZnYV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSwKIAkJcmV0dXJuIC1FTk9ERVY7CiAJfQogCi0JZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZ2
Z2EtPmNvbm5lY3RvciwKLQkJCQkgJmR1bWJfdmdhX2Nvbl9oZWxwZXJfZnVuY3MpOwotCXJldCA9
IGRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhicmlkZ2UtPmRldiwgJnZnYS0+Y29ubmVjdG9y
LAotCQkJCQkgICZkdW1iX3ZnYV9jb25fZnVuY3MsCisJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRk
KCZzYnJpZGdlLT5jb25uZWN0b3IsCisJCQkJICZzaW1wbGVfYnJpZGdlX2Nvbl9oZWxwZXJfZnVu
Y3MpOworCXJldCA9IGRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhicmlkZ2UtPmRldiwgJnNi
cmlkZ2UtPmNvbm5lY3RvciwKKwkJCQkJICAmc2ltcGxlX2JyaWRnZV9jb25fZnVuY3MsCiAJCQkJ
CSAgRFJNX01PREVfQ09OTkVDVE9SX1ZHQSwKLQkJCQkJICB2Z2EtPmRkYyk7CisJCQkJCSAgc2Jy
aWRnZS0+ZGRjKTsKIAlpZiAocmV0KSB7CiAJCURSTV9FUlJPUigiRmFpbGVkIHRvIGluaXRpYWxp
emUgY29ubmVjdG9yXG4iKTsKIAkJcmV0dXJuIHJldDsKIAl9CiAKLQlkcm1fY29ubmVjdG9yX2F0
dGFjaF9lbmNvZGVyKCZ2Z2EtPmNvbm5lY3RvciwKKwlkcm1fY29ubmVjdG9yX2F0dGFjaF9lbmNv
ZGVyKCZzYnJpZGdlLT5jb25uZWN0b3IsCiAJCQkJCSAgYnJpZGdlLT5lbmNvZGVyKTsKIAogCXJl
dHVybiAwOwogfQogCi1zdGF0aWMgdm9pZCBkdW1iX3ZnYV9lbmFibGUoc3RydWN0IGRybV9icmlk
Z2UgKmJyaWRnZSkKK3N0YXRpYyB2b2lkIHNpbXBsZV9icmlkZ2VfZW5hYmxlKHN0cnVjdCBkcm1f
YnJpZGdlICpicmlkZ2UpCiB7Ci0Jc3RydWN0IGR1bWJfdmdhICp2Z2EgPSBkcm1fYnJpZGdlX3Rv
X2R1bWJfdmdhKGJyaWRnZSk7CisJc3RydWN0IHNpbXBsZV9icmlkZ2UgKnNicmlkZ2UgPSBkcm1f
YnJpZGdlX3RvX3NpbXBsZV9icmlkZ2UoYnJpZGdlKTsKIAlpbnQgcmV0ID0gMDsKIAotCWlmICh2
Z2EtPnZkZCkKLQkJcmV0ID0gcmVndWxhdG9yX2VuYWJsZSh2Z2EtPnZkZCk7CisJaWYgKHNicmlk
Z2UtPnZkZCkKKwkJcmV0ID0gcmVndWxhdG9yX2VuYWJsZShzYnJpZGdlLT52ZGQpOwogCiAJaWYg
KHJldCkKIAkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gZW5hYmxlIHZkZCByZWd1bGF0b3I6ICVkXG4i
LCByZXQpOwogfQogCi1zdGF0aWMgdm9pZCBkdW1iX3ZnYV9kaXNhYmxlKHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UpCitzdGF0aWMgdm9pZCBzaW1wbGVfYnJpZGdlX2Rpc2FibGUoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSkKIHsKLQlzdHJ1Y3QgZHVtYl92Z2EgKnZnYSA9IGRybV9icmlkZ2Vf
dG9fZHVtYl92Z2EoYnJpZGdlKTsKKwlzdHJ1Y3Qgc2ltcGxlX2JyaWRnZSAqc2JyaWRnZSA9IGRy
bV9icmlkZ2VfdG9fc2ltcGxlX2JyaWRnZShicmlkZ2UpOwogCi0JaWYgKHZnYS0+dmRkKQotCQly
ZWd1bGF0b3JfZGlzYWJsZSh2Z2EtPnZkZCk7CisJaWYgKHNicmlkZ2UtPnZkZCkKKwkJcmVndWxh
dG9yX2Rpc2FibGUoc2JyaWRnZS0+dmRkKTsKIH0KIAotc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1f
YnJpZGdlX2Z1bmNzIGR1bWJfdmdhX2JyaWRnZV9mdW5jcyA9IHsKLQkuYXR0YWNoCQk9IGR1bWJf
dmdhX2F0dGFjaCwKLQkuZW5hYmxlCQk9IGR1bWJfdmdhX2VuYWJsZSwKLQkuZGlzYWJsZQk9IGR1
bWJfdmdhX2Rpc2FibGUsCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9icmlkZ2VfZnVuY3Mgc2lt
cGxlX2JyaWRnZV9icmlkZ2VfZnVuY3MgPSB7CisJLmF0dGFjaAkJPSBzaW1wbGVfYnJpZGdlX2F0
dGFjaCwKKwkuZW5hYmxlCQk9IHNpbXBsZV9icmlkZ2VfZW5hYmxlLAorCS5kaXNhYmxlCT0gc2lt
cGxlX2JyaWRnZV9kaXNhYmxlLAogfTsKIAotc3RhdGljIHN0cnVjdCBpMmNfYWRhcHRlciAqZHVt
Yl92Z2FfcmV0cmlldmVfZGRjKHN0cnVjdCBkZXZpY2UgKmRldikKK3N0YXRpYyBzdHJ1Y3QgaTJj
X2FkYXB0ZXIgKnNpbXBsZV9icmlkZ2VfcmV0cmlldmVfZGRjKHN0cnVjdCBkZXZpY2UgKmRldikK
IHsKIAlzdHJ1Y3QgZGV2aWNlX25vZGUgKnBoYW5kbGUsICpyZW1vdGU7CiAJc3RydWN0IGkyY19h
ZGFwdGVyICpkZGM7CkBAIC0xNzgsNTMgKzE3OCw1MyBAQCBzdGF0aWMgc3RydWN0IGkyY19hZGFw
dGVyICpkdW1iX3ZnYV9yZXRyaWV2ZV9kZGMoc3RydWN0IGRldmljZSAqZGV2KQogCXJldHVybiBk
ZGM7CiB9CiAKLXN0YXRpYyBpbnQgZHVtYl92Z2FfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqcGRldikKK3N0YXRpYyBpbnQgc2ltcGxlX2JyaWRnZV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1f
ZGV2aWNlICpwZGV2KQogewotCXN0cnVjdCBkdW1iX3ZnYSAqdmdhOworCXN0cnVjdCBzaW1wbGVf
YnJpZGdlICpzYnJpZGdlOwogCi0JdmdhID0gZGV2bV9remFsbG9jKCZwZGV2LT5kZXYsIHNpemVv
ZigqdmdhKSwgR0ZQX0tFUk5FTCk7Ci0JaWYgKCF2Z2EpCisJc2JyaWRnZSA9IGRldm1fa3phbGxv
YygmcGRldi0+ZGV2LCBzaXplb2YoKnNicmlkZ2UpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIXNicmlk
Z2UpCiAJCXJldHVybiAtRU5PTUVNOwotCXBsYXRmb3JtX3NldF9kcnZkYXRhKHBkZXYsIHZnYSk7
CisJcGxhdGZvcm1fc2V0X2RydmRhdGEocGRldiwgc2JyaWRnZSk7CiAKLQl2Z2EtPnZkZCA9IGRl
dm1fcmVndWxhdG9yX2dldF9vcHRpb25hbCgmcGRldi0+ZGV2LCAidmRkIik7Ci0JaWYgKElTX0VS
Uih2Z2EtPnZkZCkpIHsKLQkJaW50IHJldCA9IFBUUl9FUlIodmdhLT52ZGQpOworCXNicmlkZ2Ut
PnZkZCA9IGRldm1fcmVndWxhdG9yX2dldF9vcHRpb25hbCgmcGRldi0+ZGV2LCAidmRkIik7CisJ
aWYgKElTX0VSUihzYnJpZGdlLT52ZGQpKSB7CisJCWludCByZXQgPSBQVFJfRVJSKHNicmlkZ2Ut
PnZkZCk7CiAJCWlmIChyZXQgPT0gLUVQUk9CRV9ERUZFUikKIAkJCXJldHVybiAtRVBST0JFX0RF
RkVSOwotCQl2Z2EtPnZkZCA9IE5VTEw7CisJCXNicmlkZ2UtPnZkZCA9IE5VTEw7CiAJCWRldl9k
YmcoJnBkZXYtPmRldiwgIk5vIHZkZCByZWd1bGF0b3IgZm91bmQ6ICVkXG4iLCByZXQpOwogCX0K
IAotCXZnYS0+ZGRjID0gZHVtYl92Z2FfcmV0cmlldmVfZGRjKCZwZGV2LT5kZXYpOwotCWlmIChJ
U19FUlIodmdhLT5kZGMpKSB7Ci0JCWlmIChQVFJfRVJSKHZnYS0+ZGRjKSA9PSAtRU5PREVWKSB7
CisJc2JyaWRnZS0+ZGRjID0gc2ltcGxlX2JyaWRnZV9yZXRyaWV2ZV9kZGMoJnBkZXYtPmRldik7
CisJaWYgKElTX0VSUihzYnJpZGdlLT5kZGMpKSB7CisJCWlmIChQVFJfRVJSKHNicmlkZ2UtPmRk
YykgPT0gLUVOT0RFVikgewogCQkJZGV2X2RiZygmcGRldi0+ZGV2LAogCQkJCSJObyBpMmMgYnVz
IHNwZWNpZmllZC4gRGlzYWJsaW5nIEVESUQgcmVhZG91dFxuIik7Ci0JCQl2Z2EtPmRkYyA9IE5V
TEw7CisJCQlzYnJpZGdlLT5kZGMgPSBOVUxMOwogCQl9IGVsc2UgewogCQkJZGV2X2VycigmcGRl
di0+ZGV2LCAiQ291bGRuJ3QgcmV0cmlldmUgaTJjIGJ1c1xuIik7Ci0JCQlyZXR1cm4gUFRSX0VS
Uih2Z2EtPmRkYyk7CisJCQlyZXR1cm4gUFRSX0VSUihzYnJpZGdlLT5kZGMpOwogCQl9CiAJfQog
Ci0JdmdhLT5icmlkZ2UuZnVuY3MgPSAmZHVtYl92Z2FfYnJpZGdlX2Z1bmNzOwotCXZnYS0+YnJp
ZGdlLm9mX25vZGUgPSBwZGV2LT5kZXYub2Zfbm9kZTsKLQl2Z2EtPmJyaWRnZS50aW1pbmdzID0g
b2ZfZGV2aWNlX2dldF9tYXRjaF9kYXRhKCZwZGV2LT5kZXYpOworCXNicmlkZ2UtPmJyaWRnZS5m
dW5jcyA9ICZzaW1wbGVfYnJpZGdlX2JyaWRnZV9mdW5jczsKKwlzYnJpZGdlLT5icmlkZ2Uub2Zf
bm9kZSA9IHBkZXYtPmRldi5vZl9ub2RlOworCXNicmlkZ2UtPmJyaWRnZS50aW1pbmdzID0gb2Zf
ZGV2aWNlX2dldF9tYXRjaF9kYXRhKCZwZGV2LT5kZXYpOwogCi0JZHJtX2JyaWRnZV9hZGQoJnZn
YS0+YnJpZGdlKTsKKwlkcm1fYnJpZGdlX2FkZCgmc2JyaWRnZS0+YnJpZGdlKTsKIAogCXJldHVy
biAwOwogfQogCi1zdGF0aWMgaW50IGR1bWJfdmdhX3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2
aWNlICpwZGV2KQorc3RhdGljIGludCBzaW1wbGVfYnJpZGdlX3JlbW92ZShzdHJ1Y3QgcGxhdGZv
cm1fZGV2aWNlICpwZGV2KQogewotCXN0cnVjdCBkdW1iX3ZnYSAqdmdhID0gcGxhdGZvcm1fZ2V0
X2RydmRhdGEocGRldik7CisJc3RydWN0IHNpbXBsZV9icmlkZ2UgKnNicmlkZ2UgPSBwbGF0Zm9y
bV9nZXRfZHJ2ZGF0YShwZGV2KTsKIAotCWRybV9icmlkZ2VfcmVtb3ZlKCZ2Z2EtPmJyaWRnZSk7
CisJZHJtX2JyaWRnZV9yZW1vdmUoJnNicmlkZ2UtPmJyaWRnZSk7CiAKLQlpZiAodmdhLT5kZGMp
Ci0JCWkyY19wdXRfYWRhcHRlcih2Z2EtPmRkYyk7CisJaWYgKHNicmlkZ2UtPmRkYykKKwkJaTJj
X3B1dF9hZGFwdGVyKHNicmlkZ2UtPmRkYyk7CiAKIAlyZXR1cm4gMDsKIH0KQEAgLTIzNSw3ICsy
MzUsNyBAQCBzdGF0aWMgaW50IGR1bWJfdmdhX3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNl
ICpwZGV2KQogICogTk9URTogdGhlIEFEVjcxMjNFUCBzZWVtcyB0byBoYXZlIG90aGVyIHRpbWlu
Z3MgYW5kIG5lZWQgYSBuZXcgdGltaW5ncwogICogc2V0IGlmIHVzZWQuCiAgKi8KLXN0YXRpYyBj
b25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV90aW1pbmdzIGRlZmF1bHRfZGFjX3RpbWluZ3MgPSB7Citz
dGF0aWMgY29uc3Qgc3RydWN0IGRybV9icmlkZ2VfdGltaW5ncyBkZWZhdWx0X2JyaWRnZV90aW1p
bmdzID0gewogCS8qIFRpbWluZyBzcGVjaWZpY2F0aW9ucywgZGF0YXNoZWV0IHBhZ2UgNyAqLwog
CS5pbnB1dF9idXNfZmxhZ3MgPSBEUk1fQlVTX0ZMQUdfUElYREFUQV9TQU1QTEVfUE9TRURHRSwK
IAkuc2V0dXBfdGltZV9wcyA9IDUwMCwKQEAgLTI0Niw3ICsyNDYsNyBAQCBzdGF0aWMgY29uc3Qg
c3RydWN0IGRybV9icmlkZ2VfdGltaW5ncyBkZWZhdWx0X2RhY190aW1pbmdzID0gewogICogSW5m
b3JtYXRpb24gdGFrZW4gZnJvbSB0aGUgVEhTODEzNCwgVEhTODEzNEEsIFRIUzgxMzRCIGRhdGFz
aGVldCBuYW1lZAogICogIlNMVlMyMDVEIiwgZGF0ZWQgTWF5IDE5OTAsIHJldmlzZWQgTWFyY2gg
MjAwMC4KICAqLwotc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fYnJpZGdlX3RpbWluZ3MgdGlfdGhz
ODEzNF9kYWNfdGltaW5ncyA9IHsKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV90aW1p
bmdzIHRpX3RoczgxMzRfYnJpZGdlX3RpbWluZ3MgPSB7CiAJLyogRnJvbSB0aW1pbmcgZGlhZ3Jh
bSwgZGF0YXNoZWV0IHBhZ2UgOSAqLwogCS5pbnB1dF9idXNfZmxhZ3MgPSBEUk1fQlVTX0ZMQUdf
UElYREFUQV9TQU1QTEVfUE9TRURHRSwKIAkvKiBGcm9tIGRhdGFzaGVldCwgcGFnZSAxMiAqLwpA
QCAtMjU5LDcgKzI1OSw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV90aW1pbmdz
IHRpX3RoczgxMzRfZGFjX3RpbWluZ3MgPSB7CiAgKiBJbmZvcm1hdGlvbiB0YWtlbiBmcm9tIHRo
ZSBUSFM4MTM1IGRhdGFzaGVldCBuYW1lZCAiU0xBUzM0M0IiLCBkYXRlZAogICogTWF5IDIwMDEs
IHJldmlzZWQgQXByaWwgMjAxMy4KICAqLwotc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fYnJpZGdl
X3RpbWluZ3MgdGlfdGhzODEzNV9kYWNfdGltaW5ncyA9IHsKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZHJtX2JyaWRnZV90aW1pbmdzIHRpX3RoczgxMzVfYnJpZGdlX3RpbWluZ3MgPSB7CiAJLyogRnJv
bSB0aW1pbmcgZGlhZ3JhbSwgZGF0YXNoZWV0IHBhZ2UgMTQgKi8KIAkuaW5wdXRfYnVzX2ZsYWdz
ID0gRFJNX0JVU19GTEFHX1BJWERBVEFfU0FNUExFX1BPU0VER0UsCiAJLyogRnJvbSBkYXRhc2hl
ZXQsIHBhZ2UgMTYgKi8KQEAgLTI2NywzNyArMjY3LDM3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZHJtX2JyaWRnZV90aW1pbmdzIHRpX3RoczgxMzVfZGFjX3RpbWluZ3MgPSB7CiAJLmhvbGRfdGlt
ZV9wcyA9IDUwMCwKIH07CiAKLXN0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIGR1bWJf
dmdhX21hdGNoW10gPSB7CitzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBzaW1wbGVf
YnJpZGdlX21hdGNoW10gPSB7CiAJewogCQkuY29tcGF0aWJsZSA9ICJkdW1iLXZnYS1kYWMiLAog
CQkuZGF0YSA9IE5VTEwsCiAJfSwKIAl7CiAJCS5jb21wYXRpYmxlID0gImFkaSxhZHY3MTIzIiwK
LQkJLmRhdGEgPSAmZGVmYXVsdF9kYWNfdGltaW5ncywKKwkJLmRhdGEgPSAmZGVmYXVsdF9icmlk
Z2VfdGltaW5ncywKIAl9LAogCXsKIAkJLmNvbXBhdGlibGUgPSAidGksdGhzODEzNSIsCi0JCS5k
YXRhID0gJnRpX3RoczgxMzVfZGFjX3RpbWluZ3MsCisJCS5kYXRhID0gJnRpX3RoczgxMzVfYnJp
ZGdlX3RpbWluZ3MsCiAJfSwKIAl7CiAJCS5jb21wYXRpYmxlID0gInRpLHRoczgxMzQiLAotCQku
ZGF0YSA9ICZ0aV90aHM4MTM0X2RhY190aW1pbmdzLAorCQkuZGF0YSA9ICZ0aV90aHM4MTM0X2Jy
aWRnZV90aW1pbmdzLAogCX0sCiAJe30sCiB9OwotTU9EVUxFX0RFVklDRV9UQUJMRShvZiwgZHVt
Yl92Z2FfbWF0Y2gpOworTU9EVUxFX0RFVklDRV9UQUJMRShvZiwgc2ltcGxlX2JyaWRnZV9tYXRj
aCk7CiAKLXN0YXRpYyBzdHJ1Y3QgcGxhdGZvcm1fZHJpdmVyIGR1bWJfdmdhX2RyaXZlciA9IHsK
LQkucHJvYmUJPSBkdW1iX3ZnYV9wcm9iZSwKLQkucmVtb3ZlCT0gZHVtYl92Z2FfcmVtb3ZlLAor
c3RhdGljIHN0cnVjdCBwbGF0Zm9ybV9kcml2ZXIgc2ltcGxlX2JyaWRnZV9kcml2ZXIgPSB7CisJ
LnByb2JlCT0gc2ltcGxlX2JyaWRnZV9wcm9iZSwKKwkucmVtb3ZlCT0gc2ltcGxlX2JyaWRnZV9y
ZW1vdmUsCiAJLmRyaXZlcgkJPSB7CiAJCS5uYW1lCQk9ICJkdW1iLXZnYS1kYWMiLAotCQkub2Zf
bWF0Y2hfdGFibGUJPSBkdW1iX3ZnYV9tYXRjaCwKKwkJLm9mX21hdGNoX3RhYmxlCT0gc2ltcGxl
X2JyaWRnZV9tYXRjaCwKIAl9LAogfTsKLW1vZHVsZV9wbGF0Zm9ybV9kcml2ZXIoZHVtYl92Z2Ff
ZHJpdmVyKTsKK21vZHVsZV9wbGF0Zm9ybV9kcml2ZXIoc2ltcGxlX2JyaWRnZV9kcml2ZXIpOwog
CiBNT0RVTEVfQVVUSE9SKCJNYXhpbWUgUmlwYXJkIDxtYXhpbWUucmlwYXJkQGZyZWUtZWxlY3Ry
b25zLmNvbT4iKTsKLU1PRFVMRV9ERVNDUklQVElPTigiRHVtYiBWR0EgREFDIGJyaWRnZSBkcml2
ZXIiKTsKK01PRFVMRV9ERVNDUklQVElPTigiU2ltcGxlIERSTSBicmlkZ2UgZHJpdmVyIik7CiBN
T0RVTEVfTElDRU5TRSgiR1BMIik7Ci0tIApSZWdhcmRzLAoKTGF1cmVudCBQaW5jaGFydAoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1h
aWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
