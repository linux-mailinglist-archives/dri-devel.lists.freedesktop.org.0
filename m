Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0D4CB329D8
	for <lists+dri-devel@lfdr.de>; Mon,  3 Jun 2019 09:41:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 24FFF896E4;
	Mon,  3 Jun 2019 07:40:48 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x644.google.com (mail-pl1-x644.google.com
 [IPv6:2607:f8b0:4864:20::644])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DD77A89904
 for <dri-devel@lists.freedesktop.org>; Mon,  3 Jun 2019 04:33:36 +0000 (UTC)
Received: by mail-pl1-x644.google.com with SMTP id go2so6444246plb.9
 for <dri-devel@lists.freedesktop.org>; Sun, 02 Jun 2019 21:33:36 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=THpWWd94tGmQN+NdFGT3/k0LHquClB5/KK663N0sln0=;
 b=XNOZKXEpWUhsnFDfJMrJubOjKzeQUzvJku9mpva/vgDYrp9LZgRp1cqbDCzuKSc69W
 5PSRv19p78+fcmfJb0ANUMqp4FT6WVmUMEV2CsNaIDa0DgNKgGgr+e9UPj9B3aj3MzIG
 OvWaUblIVpPYejGUCdnhv/HI4TzsprBNWB7z1AVOgFQpKV7oQvxF9wRqaWSVNDHJF/Rs
 V5UwgupV6U8YX2DoJmsvzvoN3XZTdJrpPy7cXkk/oadBGlpYzcw8PnOEpa2j/4Sdzx5p
 Mw18964FTxuV3lMPbu2q8i2d0EGqaBL6XiBoyAQyxJae43qRggPFd7fSQp8951UjXZQT
 m6mA==
X-Gm-Message-State: APjAAAUL8o4iJa2XhefukKgM/2aiGW19OlMLkYc3N/P5dH12M1J9hSat
 wGhDPPVgwe40mfUPJxl36jhrFQ==
X-Google-Smtp-Source: APXvYqwws/fG+++4fl7pwkP7whHCh5KwVv/jHX0W+ARw9Qav4UnXZIe+8/mlxxK/nHoVLY0RrHtTyw==
X-Received: by 2002:a17:902:7591:: with SMTP id
 j17mr27660314pll.200.1559536416450; 
 Sun, 02 Jun 2019 21:33:36 -0700 (PDT)
Received: from localhost ([2401:fa00:1:b:e688:dfd2:a1a7:2956])
 by smtp.gmail.com with ESMTPSA id i25sm13348782pfr.73.2019.06.02.21.33.32
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Sun, 02 Jun 2019 21:33:35 -0700 (PDT)
From: Cheng-Yi Chiang <cychiang@chromium.org>
To: linux-kernel@vger.kernel.org
Subject: [PATCH 2/7] ASoC: hdmi-codec: use HDMI state notifier to add jack
 support
Date: Mon,  3 Jun 2019 12:32:46 +0800
Message-Id: <20190603043251.226549-3-cychiang@chromium.org>
X-Mailer: git-send-email 2.22.0.rc1.257.g3120a18244-goog
In-Reply-To: <20190603043251.226549-1-cychiang@chromium.org>
References: <20190603043251.226549-1-cychiang@chromium.org>
MIME-Version: 1.0
X-Mailman-Approved-At: Mon, 03 Jun 2019 07:40:43 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=chromium.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=THpWWd94tGmQN+NdFGT3/k0LHquClB5/KK663N0sln0=;
 b=KJJ1x0++tPXhvMrHIIn+IkJ/vK8nkc8NHbB2D6JxfEvO7fQ7JvXfP5vQQym4cUZid7
 eXWRl+urkk59DTsjUfW4h8UzpjNysutkrDV8SjNkxUyhnoYvWF9oflHr5Gj4oI4wI2dE
 aKzJPUU63kjAbR5g+z6/OO2IamS68nQduWMvM=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: alsa-devel@alsa-project.org, David Airlie <airlied@linux.ie>,
 dri-devel@lists.freedesktop.org, Liam Girdwood <lgirdwood@gmail.com>,
 Hans Verkuil <hverkuil@xs4all.nl>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Cheng-Yi Chiang <cychiang@chromium.org>, Takashi Iwai <tiwai@suse.com>,
 linux-rockchip@lists.infradead.org, dgreid@chromium.org,
 linux-media@vger.kernel.org, devicetree@vger.kernel.org, tzungbi@chromium.org,
 Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 Russell King <rmk+kernel@armlinux.org.uk>, Rob Herring <robh+dt@kernel.org>,
 Jaroslav Kysela <perex@perex.cz>, linux-arm-kernel@lists.infradead.org,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>, dianders@chromium.org,
 Mark Brown <broonie@kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUGhpbGlwcCBaYWJlbCA8cC56YWJlbEBwZW5ndXRyb25peC5kZT4KClVzZSBIRE1JIGNv
bm5lY3Rpb24gLyBkaXNjb25uZWN0aW9uIG5vdGlmaWNhdGlvbnMgdG8gdXBkYXRlIGFuIEFMU0EK
amFjayBvYmplY3QuIEFsc28gbWFrZSBhIGNvcHkgb2YgdGhlIEVMRCBibG9jayBhZnRlciBldmVy
eSBjaGFuZ2UuCgpUaGlzIHdhcyBwb3N0ZWQgYnkgUGhpbGlwcCBaYWJlbCBhdAoKaHR0cHM6Ly9w
YXRjaHdvcmsua2VybmVsLm9yZy9wYXRjaC85NDMwNzQ3LwoKTW9kaWZpZWQgYnkgQ2hlbmctWWkg
Q2hpYW5nOgotIEZpeCB0aGUgY29uZmxpY3Qgb2YgcmVtb3ZlZCBoZG1pX2NvZGVjX3JlbW92ZSBv
cHMuCi0gT3RoZXIgbWlub3IgZml4IGZvciB0aGUgY29uZmxpY3Qgd2l0aCBsYXRlc3QgaGRtaS1j
b2RlYyBvbiBBU29DCiAgZm9yLW5leHQgdHJlZS4KClNpZ25lZC1vZmYtYnk6IFBoaWxpcHAgWmFi
ZWwgPHAuemFiZWxAcGVuZ3V0cm9uaXguZGU+ClNpZ25lZC1vZmYtYnk6IENoZW5nLVlpIENoaWFu
ZyA8Y3ljaGlhbmdAY2hyb21pdW0ub3JnPgotLS0KVGhlIG9yaWdpbmFsIHBhdGNoIGlzIGF0IGh0
dHBzOi8vcGF0Y2h3b3JrLmtlcm5lbC5vcmcvcGF0Y2gvOTQzMDc0Ny8KSSBjb3VsZCBub3QgZmlu
ZCB0aGUgTEtNTCBsaW5rIGZvciB0aGUgcGF0Y2guCgogaW5jbHVkZS9zb3VuZC9oZG1pLWNvZGVj
LmggICAgfCAgIDcgKysrCiBzb3VuZC9zb2MvY29kZWNzL0tjb25maWcgICAgICB8ICAgMSArCiBz
b3VuZC9zb2MvY29kZWNzL2hkbWktY29kZWMuYyB8IDEwNCArKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKystCiAzIGZpbGVzIGNoYW5nZWQsIDExMCBpbnNlcnRpb25zKCspLCAyIGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL2luY2x1ZGUvc291bmQvaGRtaS1jb2RlYy5oIGIvaW5jbHVk
ZS9zb3VuZC9oZG1pLWNvZGVjLmgKaW5kZXggOTQ4M2M1NWY4NzFiLi40ZmEzOWM5MzM2M2YgMTAw
NjQ0Ci0tLSBhL2luY2x1ZGUvc291bmQvaGRtaS1jb2RlYy5oCisrKyBiL2luY2x1ZGUvc291bmQv
aGRtaS1jb2RlYy5oCkBAIC0xMDcsNiArMTA3LDEzIEBAIHN0cnVjdCBoZG1pX2NvZGVjX3BkYXRh
IHsKIAl2b2lkICpkYXRhOwogfTsKIAorc3RydWN0IHNuZF9zb2NfY29tcG9uZW50Oworc3RydWN0
IHNuZF9zb2NfamFjazsKKworaW50IGhkbWlfY29kZWNfc2V0X2phY2tfZGV0ZWN0KHN0cnVjdCBz
bmRfc29jX2NvbXBvbmVudCAqY29tcG9uZW50LAorCQkJICAgICAgIHN0cnVjdCBzbmRfc29jX2ph
Y2sgKmphY2ssCisJCQkgICAgICAgc3RydWN0IGRldmljZSAqZGV2KTsKKwogI2RlZmluZSBIRE1J
X0NPREVDX0RSVl9OQU1FICJoZG1pLWF1ZGlvLWNvZGVjIgogCiAjZW5kaWYgLyogX19IRE1JX0NP
REVDX0hfXyAqLwpkaWZmIC0tZ2l0IGEvc291bmQvc29jL2NvZGVjcy9LY29uZmlnIGIvc291bmQv
c29jL2NvZGVjcy9LY29uZmlnCmluZGV4IDhmNTc3MjU4MDgwYi4uZjVmNmRkMDQyMzRjIDEwMDY0
NAotLS0gYS9zb3VuZC9zb2MvY29kZWNzL0tjb25maWcKKysrIGIvc291bmQvc29jL2NvZGVjcy9L
Y29uZmlnCkBAIC02MzksNiArNjM5LDcgQEAgY29uZmlnIFNORF9TT0NfSERNSV9DT0RFQwogCXNl
bGVjdCBTTkRfUENNX0VMRAogCXNlbGVjdCBTTkRfUENNX0lFQzk1OAogCXNlbGVjdCBIRE1JCisJ
c2VsZWN0IEhETUlfTk9USUZJRVJTCiAKIGNvbmZpZyBTTkRfU09DX0VTNzEzNAogICAgICAgIHRy
aXN0YXRlICJFdmVyZXN0IFNlbWkgRVM3MTM0IENPREVDIgpkaWZmIC0tZ2l0IGEvc291bmQvc29j
L2NvZGVjcy9oZG1pLWNvZGVjLmMgYi9zb3VuZC9zb2MvY29kZWNzL2hkbWktY29kZWMuYwppbmRl
eCA2YTBjYzhkN2UxNDEuLmZlNzk2YTc0NzVhNSAxMDA2NDQKLS0tIGEvc291bmQvc29jL2NvZGVj
cy9oZG1pLWNvZGVjLmMKKysrIGIvc291bmQvc29jL2NvZGVjcy9oZG1pLWNvZGVjLmMKQEAgLTEy
LDkgKzEyLDEyIEBACiAgKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNV
TEFSIFBVUlBPU0UuCSBTZWUgdGhlIEdOVQogICogR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3Ig
bW9yZSBkZXRhaWxzLgogICovCisjaW5jbHVkZSA8bGludXgvaGRtaS1ub3RpZmllci5oPgogI2lu
Y2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L25vdGlmaWVyLmg+CiAjaW5j
bHVkZSA8bGludXgvc3RyaW5nLmg+CiAjaW5jbHVkZSA8c291bmQvY29yZS5oPgorI2luY2x1ZGUg
PHNvdW5kL2phY2suaD4KICNpbmNsdWRlIDxzb3VuZC9wY20uaD4KICNpbmNsdWRlIDxzb3VuZC9w
Y21fcGFyYW1zLmg+CiAjaW5jbHVkZSA8c291bmQvc29jLmg+CkBAIC0yODIsNiArMjg1LDEzIEBA
IHN0cnVjdCBoZG1pX2NvZGVjX3ByaXYgewogCXN0cnVjdCBzbmRfcGNtX2NobWFwICpjaG1hcF9p
bmZvOwogCXVuc2lnbmVkIGludCBjaG1hcF9pZHg7CiAJc3RydWN0IG11dGV4IGxvY2s7CisJc3Ry
dWN0IHNuZF9zb2NfamFjayAqamFjazsKKwkvKiBMb2NrIHRvIHByb3RlY3Qgc2V0dGluZyBhbmQg
Z2V0dGluZyBlbGQuICovCisJc3RydWN0IG11dGV4IGVsZF9sb2NrOworCXN0cnVjdCBkZXZpY2Ug
KmRldjsKKwlzdHJ1Y3QgaGRtaV9ub3RpZmllciAqbm90aWZpZXI7CisJc3RydWN0IG5vdGlmaWVy
X2Jsb2NrIG5iOworCXVuc2lnbmVkIGludCBqYWNrX3N0YXR1czsKIH07CiAKIHN0YXRpYyBjb25z
dCBzdHJ1Y3Qgc25kX3NvY19kYXBtX3dpZGdldCBoZG1pX3dpZGdldHNbXSA9IHsKQEAgLTMwOCw3
ICszMTgsOSBAQCBzdGF0aWMgaW50IGhkbWlfZWxkX2N0bF9nZXQoc3RydWN0IHNuZF9rY29udHJv
bCAqa2NvbnRyb2wsCiAJc3RydWN0IHNuZF9zb2NfY29tcG9uZW50ICpjb21wb25lbnQgPSBzbmRf
a2NvbnRyb2xfY2hpcChrY29udHJvbCk7CiAJc3RydWN0IGhkbWlfY29kZWNfcHJpdiAqaGNwID0g
c25kX3NvY19jb21wb25lbnRfZ2V0X2RydmRhdGEoY29tcG9uZW50KTsKIAorCW11dGV4X2xvY2so
JmhjcC0+ZWxkX2xvY2spOwogCW1lbWNweSh1Y29udHJvbC0+dmFsdWUuYnl0ZXMuZGF0YSwgaGNw
LT5lbGQsIHNpemVvZihoY3AtPmVsZCkpOworCW11dGV4X3VubG9jaygmaGNwLT5lbGRfbG9jayk7
CiAKIAlyZXR1cm4gMDsKIH0KQEAgLTM5Myw3ICs0MDUsNyBAQCBzdGF0aWMgaW50IGhkbWlfY29k
ZWNfc3RhcnR1cChzdHJ1Y3Qgc25kX3BjbV9zdWJzdHJlYW0gKnN1YnN0cmVhbSwKIAkJCSAgICAg
IHN0cnVjdCBzbmRfc29jX2RhaSAqZGFpKQogewogCXN0cnVjdCBoZG1pX2NvZGVjX3ByaXYgKmhj
cCA9IHNuZF9zb2NfZGFpX2dldF9kcnZkYXRhKGRhaSk7Ci0JaW50IHJldCA9IDA7CisJaW50IHJl
dDsKIAogCXJldCA9IG11dGV4X3RyeWxvY2soJmhjcC0+bG9jayk7CiAJaWYgKCFyZXQpIHsKQEAg
LTQwOCw5ICs0MjAsOSBAQCBzdGF0aWMgaW50IGhkbWlfY29kZWNfc3RhcnR1cChzdHJ1Y3Qgc25k
X3BjbV9zdWJzdHJlYW0gKnN1YnN0cmVhbSwKIAl9CiAKIAlpZiAoaGNwLT5oY2Qub3BzLT5nZXRf
ZWxkKSB7CisJCW11dGV4X2xvY2soJmhjcC0+ZWxkX2xvY2spOwogCQlyZXQgPSBoY3AtPmhjZC5v
cHMtPmdldF9lbGQoZGFpLT5kZXYtPnBhcmVudCwgaGNwLT5oY2QuZGF0YSwKIAkJCQkJICAgIGhj
cC0+ZWxkLCBzaXplb2YoaGNwLT5lbGQpKTsKLQogCQlpZiAoIXJldCkgewogCQkJcmV0ID0gc25k
X3BjbV9od19jb25zdHJhaW50X2VsZChzdWJzdHJlYW0tPnJ1bnRpbWUsCiAJCQkJCQkJaGNwLT5l
bGQpOwpAQCAtNDE5LDYgKzQzMSw3IEBAIHN0YXRpYyBpbnQgaGRtaV9jb2RlY19zdGFydHVwKHN0
cnVjdCBzbmRfcGNtX3N1YnN0cmVhbSAqc3Vic3RyZWFtLAogCQl9CiAJCS8qIFNlbGVjdCBjaG1h
cCBzdXBwb3J0ZWQgKi8KIAkJaGRtaV9jb2RlY19lbGRfY2htYXAoaGNwKTsKKwkJbXV0ZXhfdW5s
b2NrKCZoY3AtPmVsZF9sb2NrKTsKIAl9CiAJcmV0dXJuIDA7CiAKQEAgLTc0Nyw2ICs3NjAsNzcg
QEAgc3RhdGljIGNvbnN0IHN0cnVjdCBzbmRfc29jX2NvbXBvbmVudF9kcml2ZXIgaGRtaV9kcml2
ZXIgPSB7CiAJLm5vbl9sZWdhY3lfZGFpX25hbWluZwk9IDEsCiB9OwogCitzdGF0aWMgdm9pZCBo
ZG1pX2NvZGVjX2phY2tfcmVwb3J0KHN0cnVjdCBoZG1pX2NvZGVjX3ByaXYgKmhjcCwKKwkJCQkg
ICB1bnNpZ25lZCBpbnQgamFja19zdGF0dXMpCit7CisJaWYgKCFoY3AtPmphY2spCisJCXJldHVy
bjsKKworCWlmIChqYWNrX3N0YXR1cyAhPSBoY3AtPmphY2tfc3RhdHVzKSB7CisJCXNuZF9zb2Nf
amFja19yZXBvcnQoaGNwLT5qYWNrLCBqYWNrX3N0YXR1cywgU05EX0pBQ0tfTElORU9VVCk7CisJ
CWhjcC0+amFja19zdGF0dXMgPSBqYWNrX3N0YXR1czsKKwl9Cit9CisKK3N0YXRpYyBpbnQgaGRt
aV9jb2RlY19ub3RpZnkoc3RydWN0IG5vdGlmaWVyX2Jsb2NrICpuYiwgdW5zaWduZWQgbG9uZyBl
dmVudCwKKwkJCSAgICAgdm9pZCAqZGF0YSkKK3sKKwlzdHJ1Y3QgaGRtaV9jb2RlY19wcml2ICpo
Y3AgPSBjb250YWluZXJfb2YobmIsIHN0cnVjdCBoZG1pX2NvZGVjX3ByaXYsCisJCQkJCQkgICBu
Yik7CisJc3RydWN0IGhkbWlfbm90aWZpZXIgKm4gPSBkYXRhOworCisJaWYgKCFoY3AtPmphY2sp
CisJCXJldHVybiBOT1RJRllfT0s7CisKKwlzd2l0Y2ggKGV2ZW50KSB7CisJY2FzZSBIRE1JX05F
V19FTEQ6CisJCW11dGV4X2xvY2soJmhjcC0+ZWxkX2xvY2spOworCQltZW1jcHkoaGNwLT5lbGQs
IG4tPmVsZCwgc2l6ZW9mKGhjcC0+ZWxkKSk7CisJCW11dGV4X3VubG9jaygmaGNwLT5lbGRfbG9j
ayk7CisJCS8qIGZhbGwgdGhyb3VnaCAqLworCWNhc2UgSERNSV9DT05ORUNURUQ6CisJCWhkbWlf
Y29kZWNfamFja19yZXBvcnQoaGNwLCBTTkRfSkFDS19MSU5FT1VUKTsKKwkJYnJlYWs7CisJY2Fz
ZSBIRE1JX0RJU0NPTk5FQ1RFRDoKKwkJaGRtaV9jb2RlY19qYWNrX3JlcG9ydChoY3AsIDApOwor
CQlicmVhazsKKwl9CisKKwlyZXR1cm4gTk9USUZZX09LOworfQorCisvKioKKyAqIGhkbWlfY29k
ZWNfc2V0X2phY2tfZGV0ZWN0IC0gcmVnaXN0ZXIgSERNSSBzdGF0ZSBub3RpZmllciBjYWxsYmFj
aworICogQGNvbXBvbmVudDogdGhlIGhkbWktY29kZWMgaW5zdGFuY2UKKyAqIEBqYWNrOiBBU29D
IGphY2sgdG8gcmVwb3J0IChkaXMpY29ubmVjdGlvbiBldmVudHMgb24KKyAqIEBkZXY6IGhkbWlf
bm90aWZpZXIgZGV2aWNlLCB1c3VhbGx5IEhETUlfVFggb3IgQ0VDIGRldmljZQorICovCitpbnQg
aGRtaV9jb2RlY19zZXRfamFja19kZXRlY3Qoc3RydWN0IHNuZF9zb2NfY29tcG9uZW50ICpjb21w
b25lbnQsCisJCQkgICAgICAgc3RydWN0IHNuZF9zb2NfamFjayAqamFjaywKKwkJCSAgICAgICBz
dHJ1Y3QgZGV2aWNlICpkZXYpCit7CisJc3RydWN0IGhkbWlfY29kZWNfcHJpdiAqaGNwID0gc25k
X3NvY19jb21wb25lbnRfZ2V0X2RydmRhdGEoY29tcG9uZW50KTsKKwlpbnQgcmV0OworCisJaGNw
LT5ub3RpZmllciA9IGhkbWlfbm90aWZpZXJfZ2V0KGRldik7CisJaWYgKCFoY3AtPm5vdGlmaWVy
KQorCQlyZXR1cm4gLUVOT01FTTsKKworCWhjcC0+amFjayA9IGphY2s7CisJaGNwLT5uYi5ub3Rp
Zmllcl9jYWxsID0gaGRtaV9jb2RlY19ub3RpZnk7CisJcmV0ID0gaGRtaV9ub3RpZmllcl9yZWdp
c3RlcihoY3AtPm5vdGlmaWVyLCAmaGNwLT5uYik7CisJaWYgKHJldCkKKwkJZ290byBlcnJfbm90
aWZpZXJfcHV0OworCisJcmV0dXJuIDA7CisKK2Vycl9ub3RpZmllcl9wdXQ6CisJaGRtaV9ub3Rp
Zmllcl9wdXQoaGNwLT5ub3RpZmllcik7CisJaGNwLT5ub3RpZmllciA9IE5VTEw7CisJcmV0dXJu
IHJldDsKK30KK0VYUE9SVF9TWU1CT0xfR1BMKGhkbWlfY29kZWNfc2V0X2phY2tfZGV0ZWN0KTsK
Kwogc3RhdGljIGludCBoZG1pX2NvZGVjX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBk
ZXYpCiB7CiAJc3RydWN0IGhkbWlfY29kZWNfcGRhdGEgKmhjZCA9IHBkZXYtPmRldi5wbGF0Zm9y
bV9kYXRhOwpAQCAtNzc0LDYgKzg1OCw3IEBAIHN0YXRpYyBpbnQgaGRtaV9jb2RlY19wcm9iZShz
dHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCiAJaGNwLT5oY2QgPSAqaGNkOwogCW11dGV4
X2luaXQoJmhjcC0+bG9jayk7CisJbXV0ZXhfaW5pdCgmaGNwLT5lbGRfbG9jayk7CiAKIAlkYWlk
cnYgPSBkZXZtX2tjYWxsb2MoZGV2LCBkYWlfY291bnQsIHNpemVvZigqZGFpZHJ2KSwgR0ZQX0tF
Uk5FTCk7CiAJaWYgKCFkYWlkcnYpCkBAIC03OTcsNiArODgyLDIwIEBAIHN0YXRpYyBpbnQgaGRt
aV9jb2RlY19wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCQkJX19mdW5jX18s
IHJldCk7CiAJCXJldHVybiByZXQ7CiAJfQorCisJaGNwLT5kZXYgPSBkZXY7CisKKwlyZXR1cm4g
MDsKK30KKworc3RhdGljIGludCBoZG1pX2NvZGVjX3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2
aWNlICpwZGV2KQoreworCXN0cnVjdCBoZG1pX2NvZGVjX3ByaXYgKmhjcCA9IHBsYXRmb3JtX2dl
dF9kcnZkYXRhKHBkZXYpOworCisJaWYgKGhjcC0+bm90aWZpZXIpIHsKKwkJaGRtaV9ub3RpZmll
cl91bnJlZ2lzdGVyKGhjcC0+bm90aWZpZXIsICZoY3AtPm5iKTsKKwkJaGRtaV9ub3RpZmllcl9w
dXQoaGNwLT5ub3RpZmllcik7CisJfQogCXJldHVybiAwOwogfQogCkBAIC04MDUsNiArOTA0LDcg
QEAgc3RhdGljIHN0cnVjdCBwbGF0Zm9ybV9kcml2ZXIgaGRtaV9jb2RlY19kcml2ZXIgPSB7CiAJ
CS5uYW1lID0gSERNSV9DT0RFQ19EUlZfTkFNRSwKIAl9LAogCS5wcm9iZSA9IGhkbWlfY29kZWNf
cHJvYmUsCisJLnJlbW92ZSA9IGhkbWlfY29kZWNfcmVtb3ZlLAogfTsKIAogbW9kdWxlX3BsYXRm
b3JtX2RyaXZlcihoZG1pX2NvZGVjX2RyaXZlcik7Ci0tIAoyLjIyLjAucmMxLjI1Ny5nMzEyMGEx
ODI0NC1nb29nCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
