Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D14F120381
	for <lists+dri-devel@lfdr.de>; Thu, 16 May 2019 12:32:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 67D078937C;
	Thu, 16 May 2019 10:32:35 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from relay4-d.mail.gandi.net (relay4-d.mail.gandi.net
 [217.70.183.196])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 24D4F8937C
 for <dri-devel@lists.freedesktop.org>; Thu, 16 May 2019 10:32:33 +0000 (UTC)
X-Originating-IP: 80.215.244.179
Received: from localhost (unknown [80.215.244.179])
 (Authenticated sender: maxime.ripard@bootlin.com)
 by relay4-d.mail.gandi.net (Postfix) with ESMTPSA id 10B16E0009;
 Thu, 16 May 2019 10:32:25 +0000 (UTC)
From: Maxime Ripard <maxime.ripard@bootlin.com>
To: Daniel Vetter <daniel.vetter@intel.com>, David Airlie <airlied@linux.ie>,
 Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Sean Paul <seanpaul@chromium.org>,
 Maxime Ripard <maxime.ripard@bootlin.com>
Subject: [PATCH v3 7/7] drm: Remove users of drm_format_num_planes
Date: Thu, 16 May 2019 12:31:52 +0200
Message-Id: <c0a78c87cd0410a1819edad2794ad06543c85bb5.1558002671.git-series.maxime.ripard@bootlin.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <27b0041c7977402df4a087c78d2849ffe51c9f1c.1558002671.git-series.maxime.ripard@bootlin.com>
References: <27b0041c7977402df4a087c78d2849ffe51c9f1c.1558002671.git-series.maxime.ripard@bootlin.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

ZHJtX2Zvcm1hdF9pbmZvX3BsYW5lX2NwcCgpIGJhc2ljYWxseSBqdXN0IHJldHVybnMgdGhlIGNw
cCBhcnJheSBjb250ZW50CmZvdW5kIGluIHRoZSBkcm1fZm9ybWF0X2luZm8gc3RydWN0dXJlLgoK
U2luY2UgaXQncyBwcmV0dHkgdHJpdmlhbCwgbGV0J3MgcmVtb3ZlIHRoZSBmdW5jdGlvbiBhbmQg
aGF2ZSB0aGUgdXNlcnMgdXNlCnRoZSBhcnJheSBkaXJlY3RseQoKU3VnZ2VzdGVkLWJ5OiBWaWxs
ZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5
OiBNYXhpbWUgUmlwYXJkIDxtYXhpbWUucmlwYXJkQGJvb3RsaW4uY29tPgoKLS0tCgpDaGFuZ2Vz
IGZyb20gdjI6CiAgLSBuZXcgcGF0Y2gKLS0tCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfZmIuYyAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2FybS9tYWxpZHBfaHcuYyAg
ICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9hcm0vbWFsaWRwX3BsYW5lcy5jICAg
ICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2NsaWVudC5jICAgICAgICAgICAgICAg
fCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2RybV9mYl9oZWxwZXIuYyAgICAgICAgICAgIHwgIDIg
Ky0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fZm9ybWF0X2hlbHBlci5jICAgICAgICB8ICA0ICsrLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3Nwcml0ZS5jICAgICAgICB8ICAyICstCiBkcml2
ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9mYi5jICAgICAgfCAgMiArLQogZHJpdmVycy9n
cHUvZHJtL21zbS9kaXNwL21kcDUvbWRwNV9jcnRjLmMgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2Ry
bS9tc20vZGlzcC9tZHA1L21kcDVfc21wLmMgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vbXNt
L21zbV9mYi5jICAgICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9y
YWRlb25fZmIuYyAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2Nr
Y2hpcF9kcm1fZmIuYyB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vc3RtL2x0ZGMuYyAgICAgICAg
ICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2ZiLmMgICAgICAgICAgICAg
ICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS96dGUvenhfcGxhbmUuYyAgICAgICAgICAgICB8
ICAyICstCiBpbmNsdWRlL2RybS9kcm1fZm91cmNjLmggICAgICAgICAgICAgICAgICAgfCAxNyAt
LS0tLS0tLS0tLS0tLS0tLQogMTcgZmlsZXMgY2hhbmdlZCwgMTcgaW5zZXJ0aW9ucygrKSwgMzQg
ZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2ZiLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmIuYwppbmRleCA2
ZWRhZTY0NThiZTguLjJlMjg2OTI5OWE4NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2ZiLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2ZiLmMKQEAgLTEzMyw3ICsxMzMsNyBAQCBzdGF0aWMgaW50IGFtZGdwdWZiX2NyZWF0ZV9w
aW5uZWRfb2JqZWN0KHN0cnVjdCBhbWRncHVfZmJkZXYgKnJmYmRldiwKIAl1MzIgY3BwOwogCiAJ
aW5mbyA9IGRybV9nZXRfZm9ybWF0X2luZm8oYWRldi0+ZGRldiwgbW9kZV9jbWQpOwotCWNwcCA9
IGRybV9mb3JtYXRfaW5mb19wbGFuZV9jcHAoaW5mbywgMCk7CisJY3BwID0gaW5mby0+Y3BwWzBd
OwogCiAJLyogbmVlZCB0byBhbGlnbiBwaXRjaCB3aXRoIGNydGMgbGltaXRzICovCiAJbW9kZV9j
bWQtPnBpdGNoZXNbMF0gPSBhbWRncHVfYWxpZ25fcGl0Y2goYWRldiwgbW9kZV9jbWQtPndpZHRo
LCBjcHAsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYXJtL21hbGlkcF9ody5jIGIvZHJp
dmVycy9ncHUvZHJtL2FybS9tYWxpZHBfaHcuYwppbmRleCAxYzllODY5ZjRjNTIuLjUzMzkxYzBm
ODdlYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FybS9tYWxpZHBfaHcuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vYXJtL21hbGlkcF9ody5jCkBAIC0zODMsNyArMzgzLDcgQEAgc3RhdGlj
IHZvaWQgbWFsaWRwNTAwX21vZGVzZXQoc3RydWN0IG1hbGlkcF9od19kZXZpY2UgKmh3ZGV2LCBz
dHJ1Y3QgdmlkZW9tb2RlICoKIGludCBtYWxpZHBfZm9ybWF0X2dldF9icHAodTMyIGZtdCkKIHsK
IAljb25zdCBzdHJ1Y3QgZHJtX2Zvcm1hdF9pbmZvICppbmZvID0gZHJtX2Zvcm1hdF9pbmZvKGZt
dCk7Ci0JaW50IGJwcCA9IGRybV9mb3JtYXRfaW5mb19wbGFuZV9jcHAoaW5mbywgMCkgKiA4Owor
CWludCBicHAgPSBpbmZvLT5jcHBbMF0gKiA4OwogCiAJaWYgKGJwcCA9PSAwKSB7CiAJCXN3aXRj
aCAoZm10KSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYXJtL21hbGlkcF9wbGFuZXMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9hcm0vbWFsaWRwX3BsYW5lcy5jCmluZGV4IDM2MWMwMjk4ODM3
NS4uMDdjZWI0ZWUxNGUzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYXJtL21hbGlkcF9w
bGFuZXMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYXJtL21hbGlkcF9wbGFuZXMuYwpAQCAtMjI3
LDcgKzIyNyw3IEBAIGJvb2wgbWFsaWRwX2Zvcm1hdF9tb2Rfc3VwcG9ydGVkKHN0cnVjdCBkcm1f
ZGV2aWNlICpkcm0sCiAKIAlpZiAobW9kaWZpZXIgJiBBRkJDX1NQTElUKSB7CiAJCWlmICghaW5m
by0+aXNfeXV2KSB7Ci0JCQlpZiAoZHJtX2Zvcm1hdF9pbmZvX3BsYW5lX2NwcChpbmZvLCAwKSA8
PSAyKSB7CisJCQlpZiAoaW5mby0+Y3BwWzBdIDw9IDIpIHsKIAkJCQlEUk1fREVCVUdfS01TKCJS
R0IgZm9ybWF0cyA8PSAxNmJwcCBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIFNQTElUXG4iKTsKIAkJ
CQlyZXR1cm4gZmFsc2U7CiAJCQl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2Ns
aWVudC5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9jbGllbnQuYwppbmRleCAxNjlkOGVlYWE2NjIu
LjVhYmNkODNkYTZhNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9jbGllbnQuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2NsaWVudC5jCkBAIC0yNTksNyArMjU5LDcgQEAgZHJt
X2NsaWVudF9idWZmZXJfY3JlYXRlKHN0cnVjdCBkcm1fY2xpZW50X2RldiAqY2xpZW50LCB1MzIg
d2lkdGgsIHUzMiBoZWlnaHQsIHUKIAogCWR1bWJfYXJncy53aWR0aCA9IHdpZHRoOwogCWR1bWJf
YXJncy5oZWlnaHQgPSBoZWlnaHQ7Ci0JZHVtYl9hcmdzLmJwcCA9IGRybV9mb3JtYXRfaW5mb19w
bGFuZV9jcHAoaW5mbywgMCkgKiA4OworCWR1bWJfYXJncy5icHAgPSBpbmZvLT5jcHBbMF0gKiA4
OwogCXJldCA9IGRybV9tb2RlX2NyZWF0ZV9kdW1iKGRldiwgJmR1bWJfYXJncywgY2xpZW50LT5m
aWxlKTsKIAlpZiAocmV0KQogCQlnb3RvIGVycl9kZWxldGU7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vZHJtX2ZiX2hlbHBlci5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9mYl9oZWxwZXIu
YwppbmRleCAxODRmNDU1Yzk5YWIuLjA5NjA1ZWQ2OWYwNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2RybV9mYl9oZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2ZiX2hlbHBl
ci5jCkBAIC03NjcsNyArNzY3LDcgQEAgc3RhdGljIHZvaWQgZHJtX2ZiX2hlbHBlcl9kaXJ0eV9i
bGl0X3JlYWwoc3RydWN0IGRybV9mYl9oZWxwZXIgKmZiX2hlbHBlciwKIAkJCQkJICBzdHJ1Y3Qg
ZHJtX2NsaXBfcmVjdCAqY2xpcCkKIHsKIAlzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiA9IGZi
X2hlbHBlci0+ZmI7Ci0JdW5zaWduZWQgaW50IGNwcCA9IGRybV9mb3JtYXRfaW5mb19wbGFuZV9j
cHAoZmItPmZvcm1hdCwgMCk7CisJdW5zaWduZWQgaW50IGNwcCA9IGZiLT5mb3JtYXQtPmNwcFsw
XTsKIAlzaXplX3Qgb2Zmc2V0ID0gY2xpcC0+eTEgKiBmYi0+cGl0Y2hlc1swXSArIGNsaXAtPngx
ICogY3BwOwogCXZvaWQgKnNyYyA9IGZiX2hlbHBlci0+ZmJkZXYtPnNjcmVlbl9idWZmZXIgKyBv
ZmZzZXQ7CiAJdm9pZCAqZHN0ID0gZmJfaGVscGVyLT5idWZmZXItPnZhZGRyICsgb2Zmc2V0Owpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9mb3JtYXRfaGVscGVyLmMgYi9kcml2ZXJz
L2dwdS9kcm0vZHJtX2Zvcm1hdF9oZWxwZXIuYwppbmRleCA4YWQ2NmFhMTM2MmEuLjA4OTdjYjlh
ZWFmZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9mb3JtYXRfaGVscGVyLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2RybV9mb3JtYXRfaGVscGVyLmMKQEAgLTM2LDcgKzM2LDcgQEAg
c3RhdGljIHVuc2lnbmVkIGludCBjbGlwX29mZnNldChzdHJ1Y3QgZHJtX3JlY3QgKmNsaXAsCiB2
b2lkIGRybV9mYl9tZW1jcHkodm9pZCAqZHN0LCB2b2lkICp2YWRkciwgc3RydWN0IGRybV9mcmFt
ZWJ1ZmZlciAqZmIsCiAJCSAgIHN0cnVjdCBkcm1fcmVjdCAqY2xpcCkKIHsKLQl1bnNpZ25lZCBp
bnQgY3BwID0gZHJtX2Zvcm1hdF9pbmZvX3BsYW5lX2NwcChmYi0+Zm9ybWF0LCAwKTsKKwl1bnNp
Z25lZCBpbnQgY3BwID0gZmItPmZvcm1hdC0+Y3BwWzBdOwogCXNpemVfdCBsZW4gPSAoY2xpcC0+
eDIgLSBjbGlwLT54MSkgKiBjcHA7CiAJdW5zaWduZWQgaW50IHksIGxpbmVzID0gY2xpcC0+eTIg
LSBjbGlwLT55MTsKIApAQCAtNjMsNyArNjMsNyBAQCB2b2lkIGRybV9mYl9tZW1jcHlfZHN0Y2xp
cCh2b2lkIF9faW9tZW0gKmRzdCwgdm9pZCAqdmFkZHIsCiAJCQkgICBzdHJ1Y3QgZHJtX2ZyYW1l
YnVmZmVyICpmYiwKIAkJCSAgIHN0cnVjdCBkcm1fcmVjdCAqY2xpcCkKIHsKLQl1bnNpZ25lZCBp
bnQgY3BwID0gZHJtX2Zvcm1hdF9pbmZvX3BsYW5lX2NwcChmYi0+Zm9ybWF0LCAwKTsKKwl1bnNp
Z25lZCBpbnQgY3BwID0gZmItPmZvcm1hdC0+Y3BwWzBdOwogCXVuc2lnbmVkIGludCBvZmZzZXQg
PSBjbGlwX29mZnNldChjbGlwLCBmYi0+cGl0Y2hlc1swXSwgY3BwKTsKIAlzaXplX3QgbGVuID0g
KGNsaXAtPngyIC0gY2xpcC0+eDEpICogY3BwOwogCXVuc2lnbmVkIGludCB5LCBsaW5lcyA9IGNs
aXAtPnkyIC0gY2xpcC0+eTE7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF9zcHJpdGUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3Nwcml0ZS5jCmluZGV4IGUz
NTYwMWIxZjg3OC4uYzE2NDdjMGNjMjE3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pbnRlbF9zcHJpdGUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9zcHJpdGUu
YwpAQCAtMzI2LDcgKzMyNiw3IEBAIHNrbF9wbGFuZV9tYXhfc3RyaWRlKHN0cnVjdCBpbnRlbF9w
bGFuZSAqcGxhbmUsCiAJCSAgICAgdW5zaWduZWQgaW50IHJvdGF0aW9uKQogewogCWNvbnN0IHN0
cnVjdCBkcm1fZm9ybWF0X2luZm8gKmluZm8gPSBkcm1fZm9ybWF0X2luZm8ocGl4ZWxfZm9ybWF0
KTsKLQlpbnQgY3BwID0gZHJtX2Zvcm1hdF9pbmZvX3BsYW5lX2NwcChpbmZvLCAwKTsKKwlpbnQg
Y3BwID0gaW5mby0+Y3BwWzBdOwogCiAJLyoKIAkgKiAiVGhlIHN0cmlkZSBpbiBieXRlcyBtdXN0
IG5vdCBleGNlZWQgdGhlCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRr
X2RybV9mYi5jIGIvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fZmIuYwppbmRleCAw
ZDUzMzRhNWE5YTcuLmI1ZTJmMjMwZGEwMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21l
ZGlhdGVrL210a19kcm1fZmIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2Ry
bV9mYi5jCkBAIC0xMDQsNyArMTA0LDcgQEAgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqbXRrX2Ry
bV9tb2RlX2ZiX2NyZWF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCWlmICghZ2VtKQogCQly
ZXR1cm4gRVJSX1BUUigtRU5PRU5UKTsKIAotCWJwcCA9IGRybV9mb3JtYXRfaW5mb19wbGFuZV9j
cHAoaW5mbywgMCk7CisJYnBwID0gaW5mby0+Y3BwWzBdOwogCXNpemUgPSAoaGVpZ2h0IC0gMSkg
KiBjbWQtPnBpdGNoZXNbMF0gKyB3aWR0aCAqIGJwcDsKIAlzaXplICs9IGNtZC0+b2Zmc2V0c1sw
XTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL21kcDUvbWRwNV9jcnRj
LmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvbWRwNS9tZHA1X2NydGMuYwppbmRleCBhNTY1
ZGNjYWJhM2EuLjc0ZGQwMzZhMjI0NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9k
aXNwL21kcDUvbWRwNV9jcnRjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL21kcDUv
bWRwNV9jcnRjLmMKQEAgLTgwMSw3ICs4MDEsNyBAQCBzdGF0aWMgdm9pZCBtZHA1X2NydGNfcmVz
dG9yZV9jdXJzb3Ioc3RydWN0IGRybV9jcnRjICpjcnRjKQogCXdpZHRoID0gbWRwNV9jcnRjLT5j
dXJzb3Iud2lkdGg7CiAJaGVpZ2h0ID0gbWRwNV9jcnRjLT5jdXJzb3IuaGVpZ2h0OwogCi0Jc3Ry
aWRlID0gd2lkdGggKiBkcm1fZm9ybWF0X2luZm9fcGxhbmVfY3BwKGluZm8sIDApOworCXN0cmlk
ZSA9IHdpZHRoICogaW5mby0+Y3BwWzBdOwogCiAJZ2V0X3JvaShjcnRjLCAmcm9pX3csICZyb2lf
aCk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9tZHA1L21kcDVfc21w
LmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvbWRwNS9tZHA1X3NtcC5jCmluZGV4IDFjYTI5
NDY5NDU5Ny4uMjgzNDgzN2Y0ZDNlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rp
c3AvbWRwNS9tZHA1X3NtcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9tZHA1L21k
cDVfc21wLmMKQEAgLTE1OCw3ICsxNTgsNyBAQCB1aW50MzJfdCBtZHA1X3NtcF9jYWxjdWxhdGUo
c3RydWN0IG1kcDVfc21wICpzbXAsCiAJZm9yIChpID0gMDsgaSA8IG5wbGFuZXM7IGkrKykgewog
CQlpbnQgbiwgZmV0Y2hfc3RyaWRlLCBjcHA7CiAKLQkJY3BwID0gZHJtX2Zvcm1hdF9pbmZvX3Bs
YW5lX2NwcChpbmZvLCBpKTsKKwkJY3BwID0gaW5mby0+Y3BwW2ldOwogCQlmZXRjaF9zdHJpZGUg
PSB3aWR0aCAqIGNwcCAvIChpID8gaHN1YiA6IDEpOwogCiAJCW4gPSBESVZfUk9VTkRfVVAoZmV0
Y2hfc3RyaWRlICogbmxpbmVzLCBzbXAtPmJsa19zaXplKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9tc20vbXNtX2ZiLmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9mYi5jCmluZGV4
IDI5ZTQ1ZjIxNDRiNS4uNjhmYTJjOGY2MWU2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
bXNtL21zbV9mYi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2ZiLmMKQEAgLTE4MSw3
ICsxODEsNyBAQCBzdGF0aWMgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqbXNtX2ZyYW1lYnVmZmVy
X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJdW5zaWduZWQgaW50IG1pbl9zaXplOwog
CiAJCW1pbl9zaXplID0gKGhlaWdodCAtIDEpICogbW9kZV9jbWQtPnBpdGNoZXNbaV0KLQkJCSAr
IHdpZHRoICogZHJtX2Zvcm1hdF9pbmZvX3BsYW5lX2NwcChpbmZvLCBpKQorCQkJICsgd2lkdGgg
KiBpbmZvLT5jcHBbaV0KIAkJCSArIG1vZGVfY21kLT5vZmZzZXRzW2ldOwogCiAJCWlmIChib3Nb
aV0tPnNpemUgPCBtaW5fc2l6ZSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVv
bi9yYWRlb25fZmIuYyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2ZiLmMKaW5kZXgg
ZGJmNTk2ZmM0MzM5Li4yODdlM2Y5MjEwMmEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9y
YWRlb24vcmFkZW9uX2ZiLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fZmIu
YwpAQCAtMTM3LDcgKzEzNyw3IEBAIHN0YXRpYyBpbnQgcmFkZW9uZmJfY3JlYXRlX3Bpbm5lZF9v
YmplY3Qoc3RydWN0IHJhZGVvbl9mYmRldiAqcmZiZGV2LAogCXUzMiBjcHA7CiAKIAlpbmZvID0g
ZHJtX2dldF9mb3JtYXRfaW5mbyhyZGV2LT5kZGV2LCBtb2RlX2NtZCk7Ci0JY3BwID0gZHJtX2Zv
cm1hdF9pbmZvX3BsYW5lX2NwcChpbmZvLCAwKTsKKwljcHAgPSBpbmZvLT5jcHBbMF07CiAKIAkv
KiBuZWVkIHRvIGFsaWduIHBpdGNoIHdpdGggY3J0YyBsaW1pdHMgKi8KIAltb2RlX2NtZC0+cGl0
Y2hlc1swXSA9IHJhZGVvbl9hbGlnbl9waXRjaChyZGV2LCBtb2RlX2NtZC0+d2lkdGgsIGNwcCwK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9kcm1fZmIuYyBi
L2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9kcm1fZmIuYwppbmRleCA1Nzg3M2M5
OWFlMjkuLjMxMDMwY2Y4MWJjOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlw
L3JvY2tjaGlwX2RybV9mYi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hp
cF9kcm1fZmIuYwpAQCAtOTgsNyArOTgsNyBAQCByb2NrY2hpcF91c2VyX2ZiX2NyZWF0ZShzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwKIAogCQltaW5f
c2l6ZSA9IChoZWlnaHQgLSAxKSAqIG1vZGVfY21kLT5waXRjaGVzW2ldICsKIAkJCW1vZGVfY21k
LT5vZmZzZXRzW2ldICsKLQkJCXdpZHRoICogZHJtX2Zvcm1hdF9pbmZvX3BsYW5lX2NwcChpbmZv
LCBpKTsKKwkJCXdpZHRoICogaW5mby0+Y3BwW2ldOwogCiAJCWlmIChvYmotPnNpemUgPCBtaW5f
c2l6ZSkgewogCQkJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKG9iaik7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vc3RtL2x0ZGMuYyBiL2RyaXZlcnMvZ3B1L2RybS9zdG0vbHRkYy5j
CmluZGV4IDZiYjNjZDNhMWEwMS4uOWZmMzk3ODlmZmI3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vc3RtL2x0ZGMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vc3RtL2x0ZGMuYwpAQCAtNzc5
LDcgKzc3OSw3IEBAIHN0YXRpYyB2b2lkIGx0ZGNfcGxhbmVfYXRvbWljX3VwZGF0ZShzdHJ1Y3Qg
ZHJtX3BsYW5lICpwbGFuZSwKIAogCS8qIENvbmZpZ3VyZXMgdGhlIGNvbG9yIGZyYW1lIGJ1ZmZl
ciBwaXRjaCBpbiBieXRlcyAmIGxpbmUgbGVuZ3RoICovCiAJcGl0Y2hfaW5fYnl0ZXMgPSBmYi0+
cGl0Y2hlc1swXTsKLQlsaW5lX2xlbmd0aCA9IGRybV9mb3JtYXRfaW5mb19wbGFuZV9jcHAoZmIt
PmZvcm1hdCwgMCkgKgorCWxpbmVfbGVuZ3RoID0gZmItPmZvcm1hdC0+Y3BwWzBdICoKIAkJICAg
ICAgKHgxIC0geDAgKyAxKSArIChsZGV2LT5jYXBzLmJ1c193aWR0aCA+PiAzKSAtIDE7CiAJdmFs
ID0gKChwaXRjaF9pbl9ieXRlcyA8PCAxNikgfCBsaW5lX2xlbmd0aCk7CiAJcmVnX3VwZGF0ZV9i
aXRzKGxkZXYtPnJlZ3MsIExURENfTDFDRkJMUiArIGxvZnMsCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vdGVncmEvZmIuYyBiL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9mYi5jCmluZGV4IGQx
MDQyMTk2YTMwZi4uNTdjYzI2ZTFkYTAxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGVn
cmEvZmIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdGVncmEvZmIuYwpAQCAtMTQ5LDcgKzE0OSw3
IEBAIHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKnRlZ3JhX2ZiX2NyZWF0ZShzdHJ1Y3QgZHJtX2Rl
dmljZSAqZHJtLAogCQkJZ290byB1bnJlZmVyZW5jZTsKIAkJfQogCi0JCWJwcCA9IGRybV9mb3Jt
YXRfaW5mb19wbGFuZV9jcHAoaW5mbywgaSk7CisJCWJwcCA9IGluZm8tPmNwcFtpXTsKIAogCQlz
aXplID0gKGhlaWdodCAtIDEpICogY21kLT5waXRjaGVzW2ldICsKIAkJICAgICAgIHdpZHRoICog
YnBwICsgY21kLT5vZmZzZXRzW2ldOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3p0ZS96
eF9wbGFuZS5jIGIvZHJpdmVycy9ncHUvZHJtL3p0ZS96eF9wbGFuZS5jCmluZGV4IGQ5N2E0ZGZm
NTE1ZC4uNzA2NDUyZjliMjc2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0venRlL3p4X3Bs
YW5lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3p0ZS96eF9wbGFuZS5jCkBAIC0yMjIsNyArMjIy
LDcgQEAgc3RhdGljIHZvaWQgenhfdmxfcGxhbmVfYXRvbWljX3VwZGF0ZShzdHJ1Y3QgZHJtX3Bs
YW5lICpwbGFuZSwKIAkJY21hX29iaiA9IGRybV9mYl9jbWFfZ2V0X2dlbV9vYmooZmIsIGkpOwog
CQlwYWRkciA9IGNtYV9vYmotPnBhZGRyICsgZmItPm9mZnNldHNbaV07CiAJCXBhZGRyICs9IHNy
Y195ICogZmItPnBpdGNoZXNbaV07Ci0JCXBhZGRyICs9IHNyY194ICogZHJtX2Zvcm1hdF9pbmZv
X3BsYW5lX2NwcChmYi0+Zm9ybWF0LCBpKTsKKwkJcGFkZHIgKz0gc3JjX3ggKiBmYi0+Zm9ybWF0
LT5jcHBbaV07CiAJCXp4X3dyaXRlbChwYWRkcl9yZWcsIHBhZGRyKTsKIAkJcGFkZHJfcmVnICs9
IDQ7CiAJfQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2ZvdXJjYy5oIGIvaW5jbHVkZS9k
cm0vZHJtX2ZvdXJjYy5oCmluZGV4IDRlZjhjY2I1ZDIzNi4uNDA1NDY2NjkyYmQyIDEwMDY0NAot
LS0gYS9pbmNsdWRlL2RybS9kcm1fZm91cmNjLmgKKysrIGIvaW5jbHVkZS9kcm0vZHJtX2ZvdXJj
Yy5oCkBAIC0yNjEsMjMgKzI2MSw2IEBAIGRybV9mb3JtYXRfaW5mb19pc195dXZfc2FtcGxpbmdf
NDQ0KGNvbnN0IHN0cnVjdCBkcm1fZm9ybWF0X2luZm8gKmluZm8pCiB9CiAKIC8qKgotICogZHJt
X2Zvcm1hdF9pbmZvX3BsYW5lX2NwcCAtIGRldGVybWluZSB0aGUgYnl0ZXMgcGVyIHBpeGVsIHZh
bHVlCi0gKiBAZm9ybWF0OiBwaXhlbCBmb3JtYXQgaW5mbwotICogQHBsYW5lOiBwbGFuZSBpbmRl
eAotICoKLSAqIFJldHVybnM6Ci0gKiBUaGUgYnl0ZXMgcGVyIHBpeGVsIHZhbHVlIGZvciB0aGUg
c3BlY2lmaWVkIHBsYW5lLgotICovCi1zdGF0aWMgaW5saW5lCi1pbnQgZHJtX2Zvcm1hdF9pbmZv
X3BsYW5lX2NwcChjb25zdCBzdHJ1Y3QgZHJtX2Zvcm1hdF9pbmZvICppbmZvLCBpbnQgcGxhbmUp
Ci17Ci0JaWYgKCFpbmZvIHx8IHBsYW5lID49IGluZm8tPm51bV9wbGFuZXMpCi0JCXJldHVybiAw
OwotCi0JcmV0dXJuIGluZm8tPmNwcFtwbGFuZV07Ci19Ci0KLS8qKgogICogZHJtX2Zvcm1hdF9p
bmZvX3BsYW5lX3dpZHRoIC0gd2lkdGggb2YgdGhlIHBsYW5lIGdpdmVuIHRoZSBmaXJzdCBwbGFu
ZQogICogQGZvcm1hdDogcGl4ZWwgZm9ybWF0IGluZm8KICAqIEB3aWR0aDogd2lkdGggb2YgdGhl
IGZpcnN0IHBsYW5lCi0tIApnaXQtc2VyaWVzIDAuOS4xCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
