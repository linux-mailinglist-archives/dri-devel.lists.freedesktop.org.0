Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 65470E1FC1
	for <lists+dri-devel@lfdr.de>; Wed, 23 Oct 2019 17:45:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DD7A0891B1;
	Wed, 23 Oct 2019 15:45:26 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B0B726EB1B
 for <dri-devel@lists.freedesktop.org>; Wed, 23 Oct 2019 15:45:20 +0000 (UTC)
Received: from localhost.localdomain (unknown
 [IPv6:2a01:e0a:2c:6930:5cf4:84a1:2763:fe0d])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: bbrezillon)
 by bhuna.collabora.co.uk (Postfix) with ESMTPSA id EE7A128F90B;
 Wed, 23 Oct 2019 16:45:18 +0100 (BST)
From: Boris Brezillon <boris.brezillon@collabora.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v3 03/21] drm/exynos: Declare the DSI encoder as a bridge
 element
Date: Wed, 23 Oct 2019 17:44:54 +0200
Message-Id: <20191023154512.9762-4-boris.brezillon@collabora.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191023154512.9762-1-boris.brezillon@collabora.com>
References: <20191023154512.9762-1-boris.brezillon@collabora.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Mark Rutland <mark.rutland@arm.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 Thierry Reding <thierry.reding@gmail.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>, kernel@collabora.com,
 Sam Ravnborg <sam@ravnborg.org>,
 Nikita Yushchenko <nikita.yoush@cogentembedded.com>,
 Andrey Smirnov <andrew.smirnov@gmail.com>,
 Kyungmin Park <kyungmin.park@samsung.com>, Chris Healy <cphealy@gmail.com>,
 devicetree@vger.kernel.org, Jonas Karlman <jonas@kwiboo.se>,
 Rob Herring <robh+dt@kernel.org>, Jernej Skrabec <jernej.skrabec@siol.net>,
 Seung-Woo Kim <sw0312.kim@samsung.com>,
 Boris Brezillon <boris.brezillon@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RW5jb2RlciBkcml2ZXJzIHdpbGwgcHJvZ3Jlc3NpdmVseSB0cmFuc2l0aW9uIHRvIHRoZSBkcm1f
YnJpZGdlCmludGVyZmFjZSBpbiBwbGFjZSBvZiB0aGUgZHJtX2VuY29kZXIgb25lLgoKQ29udmVy
dGluZyB0aGUgRXh5bm9zIERTSSBlbmNvZGVyIGRyaXZlciB0byB0aGlzIGFwcHJvYWNoIGFsbG93
cyB1cyB0bwp1c2UgdGhlIC0+cHJlX3tlbmFibGUsZGlzYWJsZX0oKSAgaG9va3MgYW5kIGdldCBy
aWQgb2YgdGhlIGhhY2sKcmVzZXR0aW5nIGVuY29kZXItPmJyaWRnZS5uZXh0ICh3aGljaCB3YXMg
bmVlZGVkIHRvIGNvbnRyb2wgdGhlCmVuY29kZXIvYnJpZGdlIGVuYWJsZS9kaXNhYmxlIHNlcXVl
bmNlKS4KClNpZ25lZC1vZmYtYnk6IEJvcmlzIEJyZXppbGxvbiA8Ym9yaXMuYnJlemlsbG9uQGNv
bGxhYm9yYS5jb20+Ci0tLQpDaGFuZ2VzIGluIHYzOgoqIEVtYmVkIGEgZHJtX2JyaWRnZSBvYmpl
Y3QgaW4gZXh5bm9zX2RzaSBzaW5jZSBkcm1fZW5jb2RlciBubyBsb25nZXIKICBoYXMgYSBkdW1t
eSBicmlkZ2UKCkNoYW5nZXMgaW4gdjI6CiogTmV3IHBhdGNoIChyZXBsYWNlbWVudCBmb3IgImRy
bS9leHlub3M6IEdldCByaWQgb2YgZXh5bm9zX2RzaS0+b3V0X2JyaWRnZSIpCi0tLQogZHJpdmVy
cy9ncHUvZHJtL2V4eW5vcy9leHlub3NfZHJtX2RzaS5jIHwgODkgKysrKysrKysrKysrKysrLS0t
LS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDU1IGluc2VydGlvbnMoKyksIDM0IGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kc2kuYyBi
L2RyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kc2kuYwppbmRleCA3MjcyNmYyYzdh
OWYuLjM5MTVmNTBiMDA1ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2V4eW5vcy9leHlu
b3NfZHJtX2RzaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9kc2ku
YwpAQCAtMjUyLDEwICsyNTIsMTAgQEAgc3RydWN0IGV4eW5vc19kc2lfZHJpdmVyX2RhdGEgewog
CiBzdHJ1Y3QgZXh5bm9zX2RzaSB7CiAJc3RydWN0IGRybV9lbmNvZGVyIGVuY29kZXI7CisJc3Ry
dWN0IGRybV9icmlkZ2UgYnJpZGdlOwogCXN0cnVjdCBtaXBpX2RzaV9ob3N0IGRzaV9ob3N0Owog
CXN0cnVjdCBkcm1fY29ubmVjdG9yIGNvbm5lY3RvcjsKIAlzdHJ1Y3QgZHJtX3BhbmVsICpwYW5l
bDsKLQlzdHJ1Y3QgZHJtX2JyaWRnZSAqb3V0X2JyaWRnZTsKIAlzdHJ1Y3QgZGV2aWNlICpkZXY7
CiAKIAl2b2lkIF9faW9tZW0gKnJlZ19iYXNlOwpAQCAtMjkxLDYgKzI5MSwxMSBAQCBzdGF0aWMg
aW5saW5lIHN0cnVjdCBleHlub3NfZHNpICplbmNvZGVyX3RvX2RzaShzdHJ1Y3QgZHJtX2VuY29k
ZXIgKmUpCiAJcmV0dXJuIGNvbnRhaW5lcl9vZihlLCBzdHJ1Y3QgZXh5bm9zX2RzaSwgZW5jb2Rl
cik7CiB9CiAKK3N0YXRpYyBpbmxpbmUgc3RydWN0IGV4eW5vc19kc2kgKmJyaWRnZV90b19kc2ko
c3RydWN0IGRybV9icmlkZ2UgKmIpCit7CisJcmV0dXJuIGNvbnRhaW5lcl9vZihiLCBzdHJ1Y3Qg
ZXh5bm9zX2RzaSwgYnJpZGdlKTsKK30KKwogZW51bSByZWdfaWR4IHsKIAlEU0lNX1NUQVRVU19S
RUcsCS8qIFN0YXR1cyByZWdpc3RlciAqLwogCURTSU1fU1dSU1RfUkVHLAkJLyogU29mdHdhcmUg
cmVzZXQgcmVnaXN0ZXIgKi8KQEAgLTEzNzQsMjUgKzEzNzksMzggQEAgc3RhdGljIHZvaWQgZXh5
bm9zX2RzaV91bnJlZ2lzdGVyX3RlX2lycShzdHJ1Y3QgZXh5bm9zX2RzaSAqZHNpKQogCX0KIH0K
IAotc3RhdGljIHZvaWQgZXh5bm9zX2RzaV9lbmFibGUoc3RydWN0IGRybV9lbmNvZGVyICplbmNv
ZGVyKQorc3RhdGljIHZvaWQgZXh5bm9zX2RzaV9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdl
ICpicmlkZ2UpCiB7Ci0Jc3RydWN0IGV4eW5vc19kc2kgKmRzaSA9IGVuY29kZXJfdG9fZHNpKGVu
Y29kZXIpOworCXN0cnVjdCBleHlub3NfZHNpICpkc2kgPSBicmlkZ2VfdG9fZHNpKGJyaWRnZSk7
CiAJaW50IHJldDsKIAogCWlmIChkc2ktPnN0YXRlICYgRFNJTV9TVEFURV9FTkFCTEVEKQogCQly
ZXR1cm47CiAKIAlwbV9ydW50aW1lX2dldF9zeW5jKGRzaS0+ZGV2KTsKLQlkc2ktPnN0YXRlIHw9
IERTSU1fU1RBVEVfRU5BQkxFRDsKIAogCWlmIChkc2ktPnBhbmVsKSB7CiAJCXJldCA9IGRybV9w
YW5lbF9wcmVwYXJlKGRzaS0+cGFuZWwpOwogCQlpZiAocmV0IDwgMCkKIAkJCWdvdG8gZXJyX3B1
dF9zeW5jOwotCX0gZWxzZSB7Ci0JCWRybV9icmlkZ2VfcHJlX2VuYWJsZShkc2ktPm91dF9icmlk
Z2UpOwogCX0KIAorCWRzaS0+c3RhdGUgfD0gRFNJTV9TVEFURV9FTkFCTEVEOworCXJldHVybjsK
KworZXJyX3B1dF9zeW5jOgorCXBtX3J1bnRpbWVfcHV0KGRzaS0+ZGV2KTsKK30KKworc3RhdGlj
IHZvaWQgZXh5bm9zX2RzaV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3sKKwlz
dHJ1Y3QgZXh5bm9zX2RzaSAqZHNpID0gYnJpZGdlX3RvX2RzaShicmlkZ2UpOworCWludCByZXQ7
CisKKwlpZiAoIShkc2ktPnN0YXRlICYgRFNJTV9TVEFURV9FTkFCTEVEKSB8fAorCSAgICAoZHNp
LT5zdGF0ZSAmIERTSU1fU1RBVEVfVklET1VUX0FWQUlMQUJMRSkpCisJCXJldHVybjsKKwogCWV4
eW5vc19kc2lfc2V0X2Rpc3BsYXlfbW9kZShkc2kpOwogCWV4eW5vc19kc2lfc2V0X2Rpc3BsYXlf
ZW5hYmxlKGRzaSwgdHJ1ZSk7CiAKQEAgLTE0MDAsOCArMTQxOCw2IEBAIHN0YXRpYyB2b2lkIGV4
eW5vc19kc2lfZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKIAkJcmV0ID0gZHJt
X3BhbmVsX2VuYWJsZShkc2ktPnBhbmVsKTsKIAkJaWYgKHJldCA8IDApCiAJCQlnb3RvIGVycl9k
aXNwbGF5X2Rpc2FibGU7Ci0JfSBlbHNlIHsKLQkJZHJtX2JyaWRnZV9lbmFibGUoZHNpLT5vdXRf
YnJpZGdlKTsKIAl9CiAKIAlkc2ktPnN0YXRlIHw9IERTSU1fU1RBVEVfVklET1VUX0FWQUlMQUJM
RTsKQEAgLTE0MTAsMjggKzE0MjYsMzAgQEAgc3RhdGljIHZvaWQgZXh5bm9zX2RzaV9lbmFibGUo
c3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQogZXJyX2Rpc3BsYXlfZGlzYWJsZToKIAlleHlu
b3NfZHNpX3NldF9kaXNwbGF5X2VuYWJsZShkc2ksIGZhbHNlKTsKIAlkcm1fcGFuZWxfdW5wcmVw
YXJlKGRzaS0+cGFuZWwpOwotCi1lcnJfcHV0X3N5bmM6Ci0JZHNpLT5zdGF0ZSAmPSB+RFNJTV9T
VEFURV9FTkFCTEVEOwotCXBtX3J1bnRpbWVfcHV0KGRzaS0+ZGV2KTsKIH0KIAotc3RhdGljIHZv
aWQgZXh5bm9zX2RzaV9kaXNhYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKK3N0YXRp
YyB2b2lkIGV4eW5vc19kc2lfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogewot
CXN0cnVjdCBleHlub3NfZHNpICpkc2kgPSBlbmNvZGVyX3RvX2RzaShlbmNvZGVyKTsKKwlzdHJ1
Y3QgZXh5bm9zX2RzaSAqZHNpID0gYnJpZGdlX3RvX2RzaShicmlkZ2UpOworCisJaWYgKCEoZHNp
LT5zdGF0ZSAmIERTSU1fU1RBVEVfVklET1VUX0FWQUlMQUJMRSkpCisJCXJldHVybjsKKworCWRy
bV9wYW5lbF9kaXNhYmxlKGRzaS0+cGFuZWwpOworCWV4eW5vc19kc2lfc2V0X2Rpc3BsYXlfZW5h
YmxlKGRzaSwgZmFsc2UpOworCWRzaS0+c3RhdGUgJj0gfkRTSU1fU1RBVEVfVklET1VUX0FWQUlM
QUJMRTsKK30KKworc3RhdGljIHZvaWQgZXh5bm9zX2RzaV9wb3N0X2Rpc2FibGUoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSkKK3sKKwlzdHJ1Y3QgZXh5bm9zX2RzaSAqZHNpID0gYnJpZGdlX3Rv
X2RzaShicmlkZ2UpOwogCiAJaWYgKCEoZHNpLT5zdGF0ZSAmIERTSU1fU1RBVEVfRU5BQkxFRCkp
CiAJCXJldHVybjsKIAotCWRzaS0+c3RhdGUgJj0gfkRTSU1fU1RBVEVfVklET1VUX0FWQUlMQUJM
RTsKLQotCWRybV9wYW5lbF9kaXNhYmxlKGRzaS0+cGFuZWwpOwotCWRybV9icmlkZ2VfZGlzYWJs
ZShkc2ktPm91dF9icmlkZ2UpOwotCWV4eW5vc19kc2lfc2V0X2Rpc3BsYXlfZW5hYmxlKGRzaSwg
ZmFsc2UpOwogCWRybV9wYW5lbF91bnByZXBhcmUoZHNpLT5wYW5lbCk7Ci0JZHJtX2JyaWRnZV9w
b3N0X2Rpc2FibGUoZHNpLT5vdXRfYnJpZGdlKTsKLQlkc2ktPnN0YXRlICY9IH5EU0lNX1NUQVRF
X0VOQUJMRUQ7CiAJcG1fcnVudGltZV9wdXRfc3luYyhkc2ktPmRldik7CisJZHNpLT5zdGF0ZSAm
PSB+RFNJTV9TVEFURV9FTkFCTEVEOwogfQogCiBzdGF0aWMgZW51bSBkcm1fY29ubmVjdG9yX3N0
YXR1cwpAQCAtMTQ5OSw5ICsxNTE3LDExIEBAIHN0YXRpYyBpbnQgZXh5bm9zX2RzaV9jcmVhdGVf
Y29ubmVjdG9yKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKIAlyZXR1cm4gMDsKIH0KIAot
c3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZW5jb2Rlcl9oZWxwZXJfZnVuY3MgZXh5bm9zX2RzaV9l
bmNvZGVyX2hlbHBlcl9mdW5jcyA9IHsKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV9m
dW5jcyBleHlub3NfZHNpX2JyaWRnZV9mdW5jcyA9IHsKKwkucHJlX2VuYWJsZSA9IGV4eW5vc19k
c2lfcHJlX2VuYWJsZSwKIAkuZW5hYmxlID0gZXh5bm9zX2RzaV9lbmFibGUsCiAJLmRpc2FibGUg
PSBleHlub3NfZHNpX2Rpc2FibGUsCisJLnBvc3RfZGlzYWJsZSA9IGV4eW5vc19kc2lfcG9zdF9k
aXNhYmxlLAogfTsKIAogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZW5jb2Rlcl9mdW5jcyBleHlu
b3NfZHNpX2VuY29kZXJfZnVuY3MgPSB7CkBAIC0xNTIwLDkgKzE1NDAsNyBAQCBzdGF0aWMgaW50
IGV4eW5vc19kc2lfaG9zdF9hdHRhY2goc3RydWN0IG1pcGlfZHNpX2hvc3QgKmhvc3QsCiAKIAlv
dXRfYnJpZGdlICA9IG9mX2RybV9maW5kX2JyaWRnZShkZXZpY2UtPmRldi5vZl9ub2RlKTsKIAlp
ZiAob3V0X2JyaWRnZSkgewotCQlkcm1fYnJpZGdlX2F0dGFjaChlbmNvZGVyLCBvdXRfYnJpZGdl
LCBOVUxMKTsKLQkJZHNpLT5vdXRfYnJpZGdlID0gb3V0X2JyaWRnZTsKLQkJZW5jb2Rlci0+YnJp
ZGdlID0gTlVMTDsKKwkJZHJtX2JyaWRnZV9hdHRhY2goZW5jb2Rlciwgb3V0X2JyaWRnZSwgJmRz
aS0+YnJpZGdlKTsKIAl9IGVsc2UgewogCQlpbnQgcmV0ID0gZXh5bm9zX2RzaV9jcmVhdGVfY29u
bmVjdG9yKGVuY29kZXIpOwogCkBAIC0xNTc1LDE5ICsxNTkzLDE5IEBAIHN0YXRpYyBpbnQgZXh5
bm9zX2RzaV9ob3N0X2RldGFjaChzdHJ1Y3QgbWlwaV9kc2lfaG9zdCAqaG9zdCwKIAkJCQkgIHN0
cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRldmljZSkKIHsKIAlzdHJ1Y3QgZXh5bm9zX2RzaSAqZHNp
ID0gaG9zdF90b19kc2koaG9zdCk7CisJc3RydWN0IGRybV9icmlkZ2UgKm91dF9icmlkZ2UgPSBk
c2ktPmJyaWRnZS5uZXh0OwogCXN0cnVjdCBkcm1fZGV2aWNlICpkcm0gPSBkc2ktPmVuY29kZXIu
ZGV2OwogCiAJaWYgKGRzaS0+cGFuZWwpIHsKIAkJbXV0ZXhfbG9jaygmZHJtLT5tb2RlX2NvbmZp
Zy5tdXRleCk7Ci0JCWV4eW5vc19kc2lfZGlzYWJsZSgmZHNpLT5lbmNvZGVyKTsKKwkJZXh5bm9z
X2RzaV9kaXNhYmxlKCZkc2ktPmJyaWRnZSk7CisJCWV4eW5vc19kc2lfcG9zdF9kaXNhYmxlKCZk
c2ktPmJyaWRnZSk7CiAJCWRybV9wYW5lbF9kZXRhY2goZHNpLT5wYW5lbCk7CiAJCWRzaS0+cGFu
ZWwgPSBOVUxMOwogCQlkc2ktPmNvbm5lY3Rvci5zdGF0dXMgPSBjb25uZWN0b3Jfc3RhdHVzX2Rp
c2Nvbm5lY3RlZDsKIAkJbXV0ZXhfdW5sb2NrKCZkcm0tPm1vZGVfY29uZmlnLm11dGV4KTsKLQl9
IGVsc2UgewotCQlpZiAoZHNpLT5vdXRfYnJpZGdlLT5mdW5jcy0+ZGV0YWNoKQotCQkJZHNpLT5v
dXRfYnJpZGdlLT5mdW5jcy0+ZGV0YWNoKGRzaS0+b3V0X2JyaWRnZSk7Ci0JCWRzaS0+b3V0X2Jy
aWRnZSA9IE5VTEw7CisJfSBlbHNlIGlmIChvdXRfYnJpZGdlICYmIG91dF9icmlkZ2UtPmZ1bmNz
LT5kZXRhY2gpIHsKKwkJb3V0X2JyaWRnZS0+ZnVuY3MtPmRldGFjaChvdXRfYnJpZGdlKTsKIAl9
CiAKIAlpZiAoZHJtLT5tb2RlX2NvbmZpZy5wb2xsX2VuYWJsZWQpCkBAIC0xNjg3LDE2ICsxNzA1
LDE4IEBAIHN0YXRpYyBpbnQgZXh5bm9zX2RzaV9iaW5kKHN0cnVjdCBkZXZpY2UgKmRldiwgc3Ry
dWN0IGRldmljZSAqbWFzdGVyLAogCWRybV9lbmNvZGVyX2luaXQoZHJtX2RldiwgZW5jb2Rlciwg
JmV4eW5vc19kc2lfZW5jb2Rlcl9mdW5jcywKIAkJCSBEUk1fTU9ERV9FTkNPREVSX1RNRFMsIE5V
TEwpOwogCi0JZHJtX2VuY29kZXJfaGVscGVyX2FkZChlbmNvZGVyLCAmZXh5bm9zX2RzaV9lbmNv
ZGVyX2hlbHBlcl9mdW5jcyk7Ci0KIAlyZXQgPSBleHlub3NfZHJtX3NldF9wb3NzaWJsZV9jcnRj
cyhlbmNvZGVyLCBFWFlOT1NfRElTUExBWV9UWVBFX0xDRCk7CiAJaWYgKHJldCA8IDApCiAJCXJl
dHVybiByZXQ7CiAKKwkvKiBEZWNsYXJlIG91cnNlbGYgYXMgdGhlIGZpcnN0IGJyaWRnZSBlbGVt
ZW50LiAqLworCWRzaS0+YnJpZGdlLmZ1bmNzID0gJmV4eW5vc19kc2lfYnJpZGdlX2Z1bmNzOwor
CWRybV9icmlkZ2VfYXR0YWNoKGVuY29kZXIsICZkc2ktPmJyaWRnZSwgTlVMTCk7CisKIAlpZiAo
ZHNpLT5pbl9icmlkZ2Vfbm9kZSkgewogCQlpbl9icmlkZ2UgPSBvZl9kcm1fZmluZF9icmlkZ2Uo
ZHNpLT5pbl9icmlkZ2Vfbm9kZSk7CiAJCWlmIChpbl9icmlkZ2UpCi0JCQlkcm1fYnJpZGdlX2F0
dGFjaChlbmNvZGVyLCBpbl9icmlkZ2UsIE5VTEwpOworCQkJZHJtX2JyaWRnZV9hdHRhY2goZW5j
b2RlciwgaW5fYnJpZGdlLCAmZHNpLT5icmlkZ2UpOwogCX0KIAogCXJldHVybiBtaXBpX2RzaV9o
b3N0X3JlZ2lzdGVyKCZkc2ktPmRzaV9ob3N0KTsKQEAgLTE3MDgsNyArMTcyOCw4IEBAIHN0YXRp
YyB2b2lkIGV4eW5vc19kc2lfdW5iaW5kKHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmlj
ZSAqbWFzdGVyLAogCXN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciA9IGRldl9nZXRfZHJ2ZGF0
YShkZXYpOwogCXN0cnVjdCBleHlub3NfZHNpICpkc2kgPSBlbmNvZGVyX3RvX2RzaShlbmNvZGVy
KTsKIAotCWV4eW5vc19kc2lfZGlzYWJsZShlbmNvZGVyKTsKKwlleHlub3NfZHNpX2Rpc2FibGUo
JmRzaS0+YnJpZGdlKTsKKwlleHlub3NfZHNpX3Bvc3RfZGlzYWJsZSgmZHNpLT5icmlkZ2UpOwog
CiAJbWlwaV9kc2lfaG9zdF91bnJlZ2lzdGVyKCZkc2ktPmRzaV9ob3N0KTsKIH0KLS0gCjIuMjEu
MAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRl
dmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
