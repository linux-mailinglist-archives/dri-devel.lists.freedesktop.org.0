Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 166A510F098
	for <lists+dri-devel@lfdr.de>; Mon,  2 Dec 2019 20:35:30 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B1ADB6E314;
	Mon,  2 Dec 2019 19:35:27 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from honk.sigxcpu.org (honk.sigxcpu.org [24.134.29.49])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AC1C46E316
 for <dri-devel@lists.freedesktop.org>; Mon,  2 Dec 2019 19:35:19 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by honk.sigxcpu.org (Postfix) with ESMTP id 20E71FB07;
 Mon,  2 Dec 2019 20:35:18 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at honk.sigxcpu.org
Received: from honk.sigxcpu.org ([127.0.0.1])
 by localhost (honk.sigxcpu.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 08wWtg_oT9Yn; Mon,  2 Dec 2019 20:35:08 +0100 (CET)
Received: by bogon.sigxcpu.org (Postfix, from userid 1000)
 id 905DA49221; Mon,  2 Dec 2019 20:35:03 +0100 (CET)
From: =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>
To: David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Shawn Guo <shawnguo@kernel.org>, Sascha Hauer <s.hauer@pengutronix.de>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 Fabio Estevam <festevam@gmail.com>, NXP Linux Team <linux-imx@nxp.com>,
 Andrzej Hajda <a.hajda@samsung.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Jonas Karlman <jonas@kwiboo.se>, Jernej Skrabec <jernej.skrabec@siol.net>,
 Lee Jones <lee.jones@linaro.org>,
 =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>,
 dri-devel@lists.freedesktop.org, devicetree@vger.kernel.org,
 linux-arm-kernel@lists.infradead.org, linux-kernel@vger.kernel.org,
 Robert Chiras <robert.chiras@nxp.com>, Sam Ravnborg <sam@ravnborg.org>,
 Arnd Bergmann <arnd@arndb.de>
Subject: [PATCH v8 2/2] drm/bridge: Add NWL MIPI DSI host controller support
Date: Mon,  2 Dec 2019 20:35:03 +0100
Message-Id: <cf9957498dd6d26015d8f39f47189b0df047ffc4.1575315215.git.agx@sigxcpu.org>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <cover.1575315215.git.agx@sigxcpu.org>
References: <cover.1575315215.git.agx@sigxcpu.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBhZGRzIGluaXRpYWwgc3VwcG9ydCBmb3IgdGhlIE5XTCBNSVBJIERTSSBIb3N0IGNvbnRy
b2xsZXIgZm91bmQgb24KaS5NWDggU29Dcy4KCkl0IGFkZHMgc3VwcG9ydCBmb3IgdGhlIGkuTVg4
TVEgYnV0IHRoZSBzYW1lIElQIGNhbiBiZSBmb3VuZCBvbgplLmcuIHRoZSBpLk1YOFFYUC4KCkl0
IGhhcyBiZWVuIHRlc3RlZCBvbiB0aGUgTGlicmVtIDUgZGV2a2l0IHVzaW5nIG14c2ZiLgoKU2ln
bmVkLW9mZi1ieTogR3VpZG8gR8O8bnRoZXIgPGFneEBzaWd4Y3B1Lm9yZz4KQ28tZGV2ZWxvcGVk
LWJ5OiBSb2JlcnQgQ2hpcmFzIDxyb2JlcnQuY2hpcmFzQG54cC5jb20+ClNpZ25lZC1vZmYtYnk6
IFJvYmVydCBDaGlyYXMgPHJvYmVydC5jaGlyYXNAbnhwLmNvbT4KVGVzdGVkLWJ5OiBSb2JlcnQg
Q2hpcmFzIDxyb2JlcnQuY2hpcmFzQG54cC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9LY29uZmlnICAgfCAgIDE2ICsKIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvTWFrZWZpbGUgIHwg
ICAgMyArCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuYyB8IDEyMzAgKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuaCB8
ICAxNDQgKysrKwogNCBmaWxlcyBjaGFuZ2VkLCAxMzkzIGluc2VydGlvbnMoKykKIGNyZWF0ZSBt
b2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuYwogY3JlYXRlIG1vZGUg
MTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS5oCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2JyaWRnZS9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9LY29u
ZmlnCmluZGV4IDM0MzYyOTc2Y2Q2Zi4uNmZiNTM0ZjU1ZDIyIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL0tjb25maWcKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9LY29u
ZmlnCkBAIC02NSw2ICs2NSwyMiBAQCBjb25maWcgRFJNX01FR0FDSElQU19TVERQWFhYWF9HRV9C
ODUwVjNfRlcKICAgICAgICAgICB0byBEUCsrLiBUaGlzIGlzIHVzZWQgd2l0aCB0aGUgaS5NWDYg
aW14LWxkYgogICAgICAgICAgIGRyaXZlci4gWW91IGFyZSBsaWtlbHkgdG8gc2F5IE4gaGVyZS4K
IAorY29uZmlnIERSTV9OV0xfTUlQSV9EU0kKKwl0cmlzdGF0ZSAiTm9ydGh3ZXN0IExvZ2ljIE1J
UEkgRFNJIEhvc3QgY29udHJvbGxlciIKKwlkZXBlbmRzIG9uIERSTQorCWRlcGVuZHMgb24gQ09N
TU9OX0NMSworCWRlcGVuZHMgb24gT0YgJiYgSEFTX0lPTUVNCisJc2VsZWN0IERSTV9LTVNfSEVM
UEVSCisJc2VsZWN0IERSTV9NSVBJX0RTSQorCXNlbGVjdCBEUk1fUEFORUxfQlJJREdFCisJc2Vs
ZWN0IEdFTkVSSUNfUEhZX01JUElfRFBIWQorCXNlbGVjdCBNRkRfU1lTQ09OCisJc2VsZWN0IE1V
TFRJUExFWEVSCisJc2VsZWN0IFJFR01BUF9NTUlPCisJaGVscAorCSAgVGhpcyBlbmFibGVzIHRo
ZSBOb3J0aHdlc3QgTG9naWMgTUlQSSBEU0kgSG9zdCBjb250cm9sbGVyIGFzCisJICBmb3IgZXhh
bXBsZSBmb3VuZCBvbiBOWFAncyBpLk1YOCBQcm9jZXNzb3JzLgorCiBjb25maWcgRFJNX05YUF9Q
VE4zNDYwCiAJdHJpc3RhdGUgIk5YUCBQVE4zNDYwIERQL0xWRFMgYnJpZGdlIgogCWRlcGVuZHMg
b24gT0YKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvTWFrZWZpbGUgYi9kcml2
ZXJzL2dwdS9kcm0vYnJpZGdlL01ha2VmaWxlCmluZGV4IDQ5MzRmY2Y1YTZmOC4uYzNmM2E0M2U5
YjhmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL01ha2VmaWxlCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9icmlkZ2UvTWFrZWZpbGUKQEAgLTE2LDQgKzE2LDcgQEAgb2JqLSQoQ09O
RklHX0RSTV9BTkFMT0dJWF9EUCkgKz0gYW5hbG9naXgvCiBvYmotJChDT05GSUdfRFJNX0kyQ19B
RFY3NTExKSArPSBhZHY3NTExLwogb2JqLSQoQ09ORklHX0RSTV9USV9TTjY1RFNJODYpICs9IHRp
LXNuNjVkc2k4Ni5vCiBvYmotJChDT05GSUdfRFJNX1RJX1RGUDQxMCkgKz0gdGktdGZwNDEwLm8K
K29iai0kKENPTkZJR19EUk1fTldMX01JUElfRFNJKSArPSBud2wtZHNpLm8KIG9iai15ICs9IHN5
bm9wc3lzLworCitoZWFkZXItdGVzdC15ICs9IG53bC1kc2kuaApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1k
c2kuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjAyMzE5MTg5NGZl
NAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS5jCkBA
IC0wLDAgKzEsMTIzMCBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjArCisv
KgorICogaS5NWDggTldMIE1JUEkgRFNJIGhvc3QgZHJpdmVyCisgKgorICogQ29weXJpZ2h0IChD
KSAyMDE3IE5YUAorICogQ29weXJpZ2h0IChDKSAyMDE5IFB1cmlzbSBTUEMKKyAqLworCisjaW5j
bHVkZSA8bGludXgvYml0ZmllbGQuaD4KKyNpbmNsdWRlIDxsaW51eC9jbGsuaD4KKyNpbmNsdWRl
IDxsaW51eC9pcnEuaD4KKyNpbmNsdWRlIDxsaW51eC9tYXRoNjQuaD4KKyNpbmNsdWRlIDxsaW51
eC9tZmQvc3lzY29uLmg+CisjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+CisjaW5jbHVkZSA8bGlu
dXgvbXV4L2NvbnN1bWVyLmg+CisjaW5jbHVkZSA8bGludXgvb2YuaD4KKyNpbmNsdWRlIDxsaW51
eC9vZl9wbGF0Zm9ybS5oPgorI2luY2x1ZGUgPGxpbnV4L3BoeS9waHkuaD4KKyNpbmNsdWRlIDxs
aW51eC9yZWdtYXAuaD4KKyNpbmNsdWRlIDxsaW51eC9yZXNldC5oPgorI2luY2x1ZGUgPGxpbnV4
L3N5c19zb2MuaD4KKyNpbmNsdWRlIDxsaW51eC90aW1lNjQuaD4KKworI2luY2x1ZGUgPGRybS9k
cm1fYXRvbWljX2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fYnJpZGdlLmg+CisjaW5jbHVk
ZSA8ZHJtL2RybV9taXBpX2RzaS5oPgorI2luY2x1ZGUgPGRybS9kcm1fb2YuaD4KKyNpbmNsdWRl
IDxkcm0vZHJtX3BhbmVsLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9wcmludC5oPgorI2luY2x1ZGUg
PGRybS9kcm1fcHJvYmVfaGVscGVyLmg+CisKKyNpbmNsdWRlIDx2aWRlby9taXBpX2Rpc3BsYXku
aD4KKyNpbmNsdWRlIDx2aWRlby92aWRlb21vZGUuaD4KKworI2luY2x1ZGUgIm53bC1kc2kuaCIK
KworI2RlZmluZSBEUlZfTkFNRSAibndsLWRzaSIKKworLyogaS5NWDggTldMIHF1aXJrcyAqLwor
LyogaS5NWDhNUSBlcnJhdGEgRTExNDE4ICovCisjZGVmaW5lIEUxMTQxOF9IU19NT0RFX1FVSVJL
CUJJVCgwKQorCisjZGVmaW5lIE5XTF9EU0lfTUlQSV9GSUZPX1RJTUVPVVQgbXNlY3NfdG9famlm
Zmllcyg1MDApCisKK2VudW0gdHJhbnNmZXJfZGlyZWN0aW9uIHsKKwlEU0lfUEFDS0VUX1NFTkQs
CisJRFNJX1BBQ0tFVF9SRUNFSVZFLAorfTsKKworLyogUG9zc2libGUgcGxhdGZvcm0gc3BlY2lm
aWMgY2xvY2tzICovCisjZGVmaW5lIE5XTF9EU0lfQ0xLX0NPUkUJICAgICJjb3JlIgorI2RlZmlu
ZSBOV0xfRFNJX01BWF9QTEFURk9STV9DTE9DS1MgMQorCisjZGVmaW5lIE5XTF9EU0lfRU5EUE9J
TlRfTENESUYgMAorI2RlZmluZSBOV0xfRFNJX0VORFBPSU5UX0RDU1MgMQorCitzdHJ1Y3Qgbnds
X2RzaV9wbGF0X2Nsa19jb25maWcgeworCWNvbnN0IGNoYXIgKmlkOworCXN0cnVjdCBjbGsgKmNs
azsKKwlib29sIHByZXNlbnQ7Cit9OworCitzdHJ1Y3QgbndsX2RzaV90cmFuc2ZlciB7CisJY29u
c3Qgc3RydWN0IG1pcGlfZHNpX21zZyAqbXNnOworCXN0cnVjdCBtaXBpX2RzaV9wYWNrZXQgcGFj
a2V0OworCXN0cnVjdCBjb21wbGV0aW9uIGNvbXBsZXRlZDsKKworCWludCBzdGF0dXM7IC8qIHN0
YXR1cyBvZiB0cmFuc21pc3Npb24gKi8KKwllbnVtIHRyYW5zZmVyX2RpcmVjdGlvbiBkaXJlY3Rp
b247CisJYm9vbCBuZWVkX2J0YTsKKwl1OCBjbWQ7CisJdTE2IHJ4X3dvcmRfY291bnQ7CisJc2l6
ZV90IHR4X2xlbjsgLyogaW4gYnl0ZXMgKi8KKwlzaXplX3QgcnhfbGVuOyAvKiBpbiBieXRlcyAq
LworfTsKKworc3RydWN0IG53bF9kc2kgeworCXN0cnVjdCBkcm1fYnJpZGdlIGJyaWRnZTsKKwlz
dHJ1Y3QgbWlwaV9kc2lfaG9zdCBkc2lfaG9zdDsKKwlzdHJ1Y3QgZHJtX2JyaWRnZSAqcGFuZWxf
YnJpZGdlOworCXN0cnVjdCBkZXZpY2UgKmRldjsKKwlzdHJ1Y3QgcGh5ICpwaHk7CisJdW5pb24g
cGh5X2NvbmZpZ3VyZV9vcHRzIHBoeV9jZmc7CisJdW5zaWduZWQgaW50IHF1aXJrczsKKworCXN0
cnVjdCByZWdtYXAgKnJlZ21hcDsKKwlpbnQgaXJxOworCXN0cnVjdCByZXNldF9jb250cm9sICpy
c3RjOworCXN0cnVjdCBtdXhfY29udHJvbCAqbXV4OworCisJLyogRFNJIGNsb2NrcyAqLworCXN0
cnVjdCBjbGsgKnBoeV9yZWZfY2xrOworCXN0cnVjdCBjbGsgKnJ4X2VzY19jbGs7CisJc3RydWN0
IGNsayAqdHhfZXNjX2NsazsKKwkvKiBQbGF0Zm9ybSBkZXBlbmRlbnQgY2xvY2tzICovCisJc3Ry
dWN0IG53bF9kc2lfcGxhdF9jbGtfY29uZmlnIGNsa19jb25maWdbTldMX0RTSV9NQVhfUExBVEZP
Uk1fQ0xPQ0tTXTsKKworCS8qIGRzaSBsYW5lcyAqLworCXUzMiBsYW5lczsKKwllbnVtIG1pcGlf
ZHNpX3BpeGVsX2Zvcm1hdCBmb3JtYXQ7CisJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgbW9kZTsK
Kwl1bnNpZ25lZCBsb25nIGRzaV9tb2RlX2ZsYWdzOworCWludCBlcnJvcjsKKworCXN0cnVjdCBu
d2xfZHNpX3RyYW5zZmVyICp4ZmVyOworCisJY29uc3Qgc3RydWN0IG53bF9kc2lfcGxhdGZvcm1f
ZGF0YSAqcGRhdGE7Cit9OworCisvKiBQbGF0Zm9ybSBzcGVjaWZpYyBob29rcyB0byBlbmFibGUg
b3RoZXIgU29DcyBsaWtlIHRoZSBpLk1YOFFNICovCitzdHJ1Y3QgbndsX2RzaV9wbGF0Zm9ybV9k
YXRhIHsKKwlpbnQgKCpwb3dlcm9uKShzdHJ1Y3QgbndsX2RzaSAqZHNpKTsKKwlpbnQgKCpwb3dl
cm9mZikoc3RydWN0IG53bF9kc2kgKmRzaSk7CisJaW50ICgqc2VsZWN0X2lucHV0KShzdHJ1Y3Qg
bndsX2RzaSAqZHNpKTsKKwlpbnQgKCpkZXNlbGVjdF9pbnB1dCkoc3RydWN0IG53bF9kc2kgKmRz
aSk7CisJc3RydWN0IG53bF9kc2lfcGxhdF9jbGtfY29uZmlnIGNsa19jb25maWdbTldMX0RTSV9N
QVhfUExBVEZPUk1fQ0xPQ0tTXTsKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgcmVnbWFwX2Nv
bmZpZyBud2xfZHNpX3JlZ21hcF9jb25maWcgPSB7CisJLnJlZ19iaXRzID0gMTYsCisJLnZhbF9i
aXRzID0gMzIsCisJLnJlZ19zdHJpZGUgPSA0LAorCS5tYXhfcmVnaXN0ZXIgPSBOV0xfRFNJX0lS
UV9NQVNLMiwKKwkubmFtZSA9IERSVl9OQU1FLAorfTsKKworc3RhdGljIGlubGluZSBzdHJ1Y3Qg
bndsX2RzaSAqYnJpZGdlX3RvX2RzaShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQoreworCXJl
dHVybiBjb250YWluZXJfb2YoYnJpZGdlLCBzdHJ1Y3QgbndsX2RzaSwgYnJpZGdlKTsKK30KKwor
c3RhdGljIGludCBud2xfZHNpX2NsZWFyX2Vycm9yKHN0cnVjdCBud2xfZHNpICpkc2kpCit7CisJ
aW50IHJldCA9IGRzaS0+ZXJyb3I7CisKKwlkc2ktPmVycm9yID0gMDsKKwlyZXR1cm4gcmV0Owor
fQorCitzdGF0aWMgdm9pZCBud2xfZHNpX3dyaXRlKHN0cnVjdCBud2xfZHNpICpkc2ksIHVuc2ln
bmVkIGludCByZWcsIHUzMiB2YWwpCit7CisJaW50IHJldDsKKworCWlmIChkc2ktPmVycm9yKQor
CQlyZXR1cm47CisKKwlyZXQgPSByZWdtYXBfd3JpdGUoZHNpLT5yZWdtYXAsIHJlZywgdmFsKTsK
KwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LAorCQkJICAgICAgIkZh
aWxlZCB0byB3cml0ZSBOV0wgRFNJIHJlZyAweCV4OiAlZFxuIiwgcmVnLAorCQkJICAgICAgcmV0
KTsKKwkJZHNpLT5lcnJvciA9IHJldDsKKwl9Cit9CisKK3N0YXRpYyB1MzIgbndsX2RzaV9yZWFk
KHN0cnVjdCBud2xfZHNpICpkc2ksIHUzMiByZWcpCit7CisJdW5zaWduZWQgaW50IHZhbDsKKwlp
bnQgcmV0OworCisJaWYgKGRzaS0+ZXJyb3IpCisJCXJldHVybiAwOworCisJcmV0ID0gcmVnbWFw
X3JlYWQoZHNpLT5yZWdtYXAsIHJlZywgJnZhbCk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RF
Vl9FUlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byByZWFkIE5XTCBEU0kgcmVnIDB4JXg6ICVkXG4i
LAorCQkJICAgICAgcmVnLCByZXQpOworCQlkc2ktPmVycm9yID0gcmV0OworCX0KKwlyZXR1cm4g
dmFsOworfQorCitzdGF0aWMgaW50IG53bF9kc2lfZ2V0X2RwaV9waXhlbF9mb3JtYXQoZW51bSBt
aXBpX2RzaV9waXhlbF9mb3JtYXQgZm9ybWF0KQoreworCXN3aXRjaCAoZm9ybWF0KSB7CisJY2Fz
ZSBNSVBJX0RTSV9GTVRfUkdCNTY1OgorCQlyZXR1cm4gTldMX0RTSV9QSVhFTF9GT1JNQVRfMTY7
CisJY2FzZSBNSVBJX0RTSV9GTVRfUkdCNjY2OgorCQlyZXR1cm4gTldMX0RTSV9QSVhFTF9GT1JN
QVRfMThMOworCWNhc2UgTUlQSV9EU0lfRk1UX1JHQjY2Nl9QQUNLRUQ6CisJCXJldHVybiBOV0xf
RFNJX1BJWEVMX0ZPUk1BVF8xODsKKwljYXNlIE1JUElfRFNJX0ZNVF9SR0I4ODg6CisJCXJldHVy
biBOV0xfRFNJX1BJWEVMX0ZPUk1BVF8yNDsKKwlkZWZhdWx0OgorCQlyZXR1cm4gLUVJTlZBTDsK
Kwl9Cit9CisKKy8qCisgKiBwczJiYyAtIFBpY29zZWNvbmRzIHRvIGJ5dGUgY2xvY2sgY3ljbGVz
CisgKi8KK3N0YXRpYyB1MzIgcHMyYmMoc3RydWN0IG53bF9kc2kgKmRzaSwgdW5zaWduZWQgbG9u
ZyBsb25nIHBzKQoreworCXUzMiBicHAgPSBtaXBpX2RzaV9waXhlbF9mb3JtYXRfdG9fYnBwKGRz
aS0+Zm9ybWF0KTsKKworCXJldHVybiBESVY2NF9VNjRfUk9VTkRfVVAocHMgKiBkc2ktPm1vZGUu
Y2xvY2sgKiBicHAsCisJCQkJICBkc2ktPmxhbmVzICogOCAqIE5TRUNfUEVSX1NFQyk7Cit9CisK
Ky8qCisgKiB1aTJiYyAtIFVJIHRpbWUgcGVyaW9kcyB0byBieXRlIGNsb2NrIGN5Y2xlcworICov
CitzdGF0aWMgdTMyIHVpMmJjKHN0cnVjdCBud2xfZHNpICpkc2ksIHVuc2lnbmVkIGxvbmcgbG9u
ZyB1aSkKK3sKKwl1MzIgYnBwID0gbWlwaV9kc2lfcGl4ZWxfZm9ybWF0X3RvX2JwcChkc2ktPmZv
cm1hdCk7CisKKwlyZXR1cm4gRElWNjRfVTY0X1JPVU5EX1VQKHVpICogZHNpLT5sYW5lcywKKwkJ
CQkgIGRzaS0+bW9kZS5jbG9jayAqIDEwMDAgKiBicHApOworfQorCisvKgorICogdXMyYmMgLSBt
aWNybyBzZWNvbmRzIHRvIGxwIGNsb2NrIGN5Y2xlcworICovCitzdGF0aWMgdTMyIHVzMmxwKHUz
MiBscF9jbGtfcmF0ZSwgdW5zaWduZWQgbG9uZyB1cykKK3sKKwlyZXR1cm4gRElWX1JPVU5EX1VQ
KHVzICogbHBfY2xrX3JhdGUsIFVTRUNfUEVSX1NFQyk7Cit9CisKK3N0YXRpYyBpbnQgbndsX2Rz
aV9jb25maWdfaG9zdChzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXUzMiBjeWNsZXM7CisJc3Ry
dWN0IHBoeV9jb25maWd1cmVfb3B0c19taXBpX2RwaHkgKmNmZyA9ICZkc2ktPnBoeV9jZmcubWlw
aV9kcGh5OworCisJaWYgKGRzaS0+bGFuZXMgPCAxIHx8IGRzaS0+bGFuZXMgPiA0KQorCQlyZXR1
cm4gLUVJTlZBTDsKKworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiRFNJIExhbmVz
ICVkXG4iLCBkc2ktPmxhbmVzKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfTlVN
X0xBTkVTLCBkc2ktPmxhbmVzIC0gMSk7CisKKwlpZiAoZHNpLT5kc2lfbW9kZV9mbGFncyAmIE1J
UElfRFNJX0NMT0NLX05PTl9DT05USU5VT1VTKSB7CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xf
RFNJX0NGR19OT05DT05USU5VT1VTX0NMSywgMHgwMSk7CisJCW53bF9kc2lfd3JpdGUoZHNpLCBO
V0xfRFNJX0NGR19BVVRPSU5TRVJUX0VPVFAsIDB4MDEpOworCX0gZWxzZSB7CisJCW53bF9kc2lf
d3JpdGUoZHNpLCBOV0xfRFNJX0NGR19OT05DT05USU5VT1VTX0NMSywgMHgwMCk7CisJCW53bF9k
c2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NGR19BVVRPSU5TRVJUX0VPVFAsIDB4MDApOworCX0KKwor
CS8qIHZhbHVlcyBpbiBieXRlIGNsb2NrIGN5Y2xlcyAqLworCWN5Y2xlcyA9IHVpMmJjKGRzaSwg
Y2ZnLT5jbGtfcHJlKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImNmZ190X3By
ZTogMHgleFxuIiwgY3ljbGVzKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfVF9Q
UkUsIGN5Y2xlcyk7CisJY3ljbGVzID0gcHMyYmMoZHNpLCBjZmctPmxweCArIGNmZy0+Y2xrX3By
ZXBhcmUgKyBjZmctPmNsa196ZXJvKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwg
ImNmZ190eF9nYXAgKHByZSk6IDB4JXhcbiIsIGN5Y2xlcyk7CisJY3ljbGVzICs9IHVpMmJjKGRz
aSwgY2ZnLT5jbGtfcHJlKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImNmZ190
X3Bvc3Q6IDB4JXhcbiIsIGN5Y2xlcyk7CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfQ0ZH
X1RfUE9TVCwgY3ljbGVzKTsKKwljeWNsZXMgPSBwczJiYyhkc2ksIGNmZy0+aHNfZXhpdCk7CisJ
RFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJjZmdfdHhfZ2FwOiAweCV4XG4iLCBjeWNs
ZXMpOworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NGR19UWF9HQVAsIGN5Y2xlcyk7CisK
Kwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfRVhUUkFfQ01EU19BRlRFUl9FT1RQLCAw
eDAxKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfSFRYX1RPX0NPVU5ULCAweDAw
KTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfTFJYX0hfVE9fQ09VTlQsIDB4MDAp
OworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NGR19CVEFfSF9UT19DT1VOVCwgMHgwMCk7
CisJLyogSW4gTFAgY2xvY2sgY3ljbGVzICovCisJY3ljbGVzID0gdXMybHAoY2ZnLT5scF9jbGtf
cmF0ZSwgY2ZnLT53YWtldXApOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiY2Zn
X3R3YWtldXA6IDB4JXhcbiIsIGN5Y2xlcyk7CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lf
Q0ZHX1RXQUtFVVAsIGN5Y2xlcyk7CisKKwlyZXR1cm4gbndsX2RzaV9jbGVhcl9lcnJvcihkc2kp
OworfQorCitzdGF0aWMgaW50IG53bF9kc2lfY29uZmlnX2RwaShzdHJ1Y3QgbndsX2RzaSAqZHNp
KQoreworCXUzMiBtb2RlOworCWludCBjb2xvcl9mb3JtYXQ7CisJYm9vbCBidXJzdF9tb2RlOwor
CWludCBoZnJvbnRfcG9yY2gsIGhiYWNrX3BvcmNoLCB2ZnJvbnRfcG9yY2gsIHZiYWNrX3BvcmNo
OworCWludCBoc3luY19sZW4sIHZzeW5jX2xlbjsKKworCWhmcm9udF9wb3JjaCA9IGRzaS0+bW9k
ZS5oc3luY19zdGFydCAtIGRzaS0+bW9kZS5oZGlzcGxheTsKKwloc3luY19sZW4gPSBkc2ktPm1v
ZGUuaHN5bmNfZW5kIC0gZHNpLT5tb2RlLmhzeW5jX3N0YXJ0OworCWhiYWNrX3BvcmNoID0gZHNp
LT5tb2RlLmh0b3RhbCAtIGRzaS0+bW9kZS5oc3luY19lbmQ7CisKKwl2ZnJvbnRfcG9yY2ggPSBk
c2ktPm1vZGUudnN5bmNfc3RhcnQgLSBkc2ktPm1vZGUudmRpc3BsYXk7CisJdnN5bmNfbGVuID0g
ZHNpLT5tb2RlLnZzeW5jX2VuZCAtIGRzaS0+bW9kZS52c3luY19zdGFydDsKKwl2YmFja19wb3Jj
aCA9IGRzaS0+bW9kZS52dG90YWwgLSBkc2ktPm1vZGUudnN5bmNfZW5kOworCisJRFJNX0RFVl9E
RUJVR19EUklWRVIoZHNpLT5kZXYsICJoZnJvbnRfcG9yY2ggPSAlZFxuIiwgaGZyb250X3BvcmNo
KTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImhiYWNrX3BvcmNoID0gJWRcbiIs
IGhiYWNrX3BvcmNoKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImhzeW5jX2xl
biA9ICVkXG4iLCBoc3luY19sZW4pOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAi
aGRpc3BsYXkgPSAlZFxuIiwgZHNpLT5tb2RlLmhkaXNwbGF5KTsKKwlEUk1fREVWX0RFQlVHX0RS
SVZFUihkc2ktPmRldiwgInZmcm9udF9wb3JjaCA9ICVkXG4iLCB2ZnJvbnRfcG9yY2gpOworCURS
TV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAidmJhY2tfcG9yY2ggPSAlZFxuIiwgdmJhY2tf
cG9yY2gpOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAidnN5bmNfbGVuID0gJWRc
biIsIHZzeW5jX2xlbik7CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJ2YWN0aXZl
ID0gJWRcbiIsIGRzaS0+bW9kZS52ZGlzcGxheSk7CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNp
LT5kZXYsICJjbG9jayA9ICVkIGtIelxuIiwgZHNpLT5tb2RlLmNsb2NrKTsKKworCWNvbG9yX2Zv
cm1hdCA9IG53bF9kc2lfZ2V0X2RwaV9waXhlbF9mb3JtYXQoZHNpLT5mb3JtYXQpOworCWlmIChj
b2xvcl9mb3JtYXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJJbnZhbGlkIGNv
bG9yIGZvcm1hdCAweCV4XG4iLAorCQkJICAgICAgZHNpLT5mb3JtYXQpOworCQlyZXR1cm4gY29s
b3JfZm9ybWF0OworCX0KKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgInBpeGVsIGZt
dCA9ICVkXG4iLCBkc2ktPmZvcm1hdCk7CisKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9J
TlRFUkZBQ0VfQ09MT1JfQ09ESU5HLCBOV0xfRFNJX0RQSV8yNF9CSVQpOworCW53bF9kc2lfd3Jp
dGUoZHNpLCBOV0xfRFNJX1BJWEVMX0ZPUk1BVCwgY29sb3JfZm9ybWF0KTsKKwkvKgorCSAqIEFk
anVzdGluZyBpbnB1dCBwb2xhcml0eSBiYXNlZCBvbiB0aGUgdmlkZW8gbW9kZSByZXN1bHRzIGlu
CisJICogYSBibGFjayBzY3JlZW4gc28gYWx3YXlzIHBpY2sgYWN0aXZlIGxvdzoKKwkgKi8KKwlu
d2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9WU1lOQ19QT0xBUklUWSwKKwkJICAgICAgTldMX0RT
SV9WU1lOQ19QT0xBUklUWV9BQ1RJVkVfTE9XKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RT
SV9IU1lOQ19QT0xBUklUWSwKKwkJICAgICAgTldMX0RTSV9IU1lOQ19QT0xBUklUWV9BQ1RJVkVf
TE9XKTsKKworCWJ1cnN0X21vZGUgPSAoZHNpLT5kc2lfbW9kZV9mbGFncyAmIE1JUElfRFNJX01P
REVfVklERU9fQlVSU1QpICYmCisJCSAgICAgIShkc2ktPmRzaV9tb2RlX2ZsYWdzICYgTUlQSV9E
U0lfTU9ERV9WSURFT19TWU5DX1BVTFNFKTsKKworCWlmIChidXJzdF9tb2RlKSB7CisJCW53bF9k
c2lfd3JpdGUoZHNpLCBOV0xfRFNJX1ZJREVPX01PREUsIE5XTF9EU0lfVk1fQlVSU1RfTU9ERSk7
CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1BJWEVMX0ZJRk9fU0VORF9MRVZFTCwgMjU2
KTsKKwl9IGVsc2UgeworCQltb2RlID0gKChkc2ktPmRzaV9tb2RlX2ZsYWdzICYgTUlQSV9EU0lf
TU9ERV9WSURFT19TWU5DX1BVTFNFKSA/CisJCQkJTldMX0RTSV9WTV9CVVJTVF9NT0RFX1dJVEhf
U1lOQ19QVUxTRVMgOgorCQkJCU5XTF9EU0lfVk1fTk9OX0JVUlNUX01PREVfV0lUSF9TWU5DX0VW
RU5UUyk7CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1ZJREVPX01PREUsIG1vZGUpOwor
CQlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9QSVhFTF9GSUZPX1NFTkRfTEVWRUwsCisJCQkg
ICAgICBkc2ktPm1vZGUuaGRpc3BsYXkpOworCX0KKworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xf
RFNJX0hGUCwgaGZyb250X3BvcmNoKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9IQlAs
IGhiYWNrX3BvcmNoKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9IU0EsIGhzeW5jX2xl
bik7CisKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9FTkFCTEVfTVVMVF9QS1RTLCAweDAp
OworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0JMTFBfTU9ERSwgMHgxKTsKKwlud2xfZHNp
X3dyaXRlKGRzaSwgTldMX0RTSV9VU0VfTlVMTF9QS1RfQkxMUCwgMHgwKTsKKwlud2xfZHNpX3dy
aXRlKGRzaSwgTldMX0RTSV9WQywgMHgwKTsKKworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJ
X1BJWEVMX1BBWUxPQURfU0laRSwgZHNpLT5tb2RlLmhkaXNwbGF5KTsKKwlud2xfZHNpX3dyaXRl
KGRzaSwgTldMX0RTSV9WQUNUSVZFLCBkc2ktPm1vZGUudmRpc3BsYXkgLSAxKTsKKwlud2xfZHNp
X3dyaXRlKGRzaSwgTldMX0RTSV9WQlAsIHZiYWNrX3BvcmNoKTsKKwlud2xfZHNpX3dyaXRlKGRz
aSwgTldMX0RTSV9WRlAsIHZmcm9udF9wb3JjaCk7CisKKwlyZXR1cm4gbndsX2RzaV9jbGVhcl9l
cnJvcihkc2kpOworfQorCitzdGF0aWMgaW50IG53bF9kc2lfaW5pdF9pbnRlcnJ1cHRzKHN0cnVj
dCBud2xfZHNpICpkc2kpCit7CisJdTMyIGlycV9lbmFibGU7CisKKwlud2xfZHNpX3dyaXRlKGRz
aSwgTldMX0RTSV9JUlFfTUFTSywgMHhmZmZmZmZmZik7CisJbndsX2RzaV93cml0ZShkc2ksIE5X
TF9EU0lfSVJRX01BU0syLCAweDcpOworCisJaXJxX2VuYWJsZSA9IH4odTMyKShOV0xfRFNJX1RY
X1BLVF9ET05FX01BU0sgfAorCQkJICAgIE5XTF9EU0lfUlhfUEtUX0hEUl9SQ1ZEX01BU0sgfAor
CQkJICAgIE5XTF9EU0lfVFhfRklGT19PVkZMV19NQVNLIHwKKwkJCSAgICBOV0xfRFNJX0hTX1RY
X1RJTUVPVVRfTUFTSyk7CisKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9JUlFfTUFTSywg
aXJxX2VuYWJsZSk7CisKKwlyZXR1cm4gbndsX2RzaV9jbGVhcl9lcnJvcihkc2kpOworfQorCitz
dGF0aWMgaW50IG53bF9kc2lfaG9zdF9hdHRhY2goc3RydWN0IG1pcGlfZHNpX2hvc3QgKmRzaV9o
b3N0LAorCQkJICAgICAgIHN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRldmljZSkKK3sKKwlzdHJ1
Y3QgbndsX2RzaSAqZHNpID0gY29udGFpbmVyX29mKGRzaV9ob3N0LCBzdHJ1Y3QgbndsX2RzaSwg
ZHNpX2hvc3QpOworCXN0cnVjdCBkZXZpY2UgKmRldiA9IGRzaS0+ZGV2OworCXN0cnVjdCBkcm1f
YnJpZGdlICpicmlkZ2U7CisJc3RydWN0IGRybV9wYW5lbCAqcGFuZWw7CisJaW50IHJldDsKKwor
CURSTV9ERVZfSU5GTyhkZXYsICJsYW5lcz0ldSwgZm9ybWF0PTB4JXggZmxhZ3M9MHglbHhcbiIs
IGRldmljZS0+bGFuZXMsCisJCSAgICAgZGV2aWNlLT5mb3JtYXQsIGRldmljZS0+bW9kZV9mbGFn
cyk7CisKKwlpZiAoZGV2aWNlLT5sYW5lcyA8IDEgfHwgZGV2aWNlLT5sYW5lcyA+IDQpCisJCXJl
dHVybiAtRUlOVkFMOworCisJZHNpLT5sYW5lcyA9IGRldmljZS0+bGFuZXM7CisJZHNpLT5mb3Jt
YXQgPSBkZXZpY2UtPmZvcm1hdDsKKwlkc2ktPmRzaV9tb2RlX2ZsYWdzID0gZGV2aWNlLT5tb2Rl
X2ZsYWdzOworCisJcmV0ID0gZHJtX29mX2ZpbmRfcGFuZWxfb3JfYnJpZGdlKGRzaS0+ZGV2LT5v
Zl9ub2RlLCAxLCAwLCAmcGFuZWwsCisJCQkJCSAgJmJyaWRnZSk7CisJaWYgKHJldCkKKwkJcmV0
dXJuIHJldDsKKworCWlmIChwYW5lbCkgeworCQlicmlkZ2UgPSBkcm1fcGFuZWxfYnJpZGdlX2Fk
ZChwYW5lbCk7CisJCWlmIChJU19FUlIoYnJpZGdlKSkKKwkJCXJldHVybiBQVFJfRVJSKGJyaWRn
ZSk7CisJfQorCisJZHNpLT5wYW5lbF9icmlkZ2UgPSBicmlkZ2U7CisJZHJtX2JyaWRnZV9hZGQo
JmRzaS0+YnJpZGdlKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IG53bF9kc2lfaG9z
dF9kZXRhY2goc3RydWN0IG1pcGlfZHNpX2hvc3QgKmRzaV9ob3N0LAorCQkJICAgICAgIHN0cnVj
dCBtaXBpX2RzaV9kZXZpY2UgKmRldmljZSkKK3sKKwlzdHJ1Y3QgbndsX2RzaSAqZHNpID0gY29u
dGFpbmVyX29mKGRzaV9ob3N0LCBzdHJ1Y3QgbndsX2RzaSwgZHNpX2hvc3QpOworCisJZHJtX29m
X3BhbmVsX2JyaWRnZV9yZW1vdmUoZHNpLT5kZXYtPm9mX25vZGUsIDEsIDApOworCWRybV9icmlk
Z2VfcmVtb3ZlKCZkc2ktPmJyaWRnZSk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGJvb2wg
bndsX2RzaV9yZWFkX3BhY2tldChzdHJ1Y3QgbndsX2RzaSAqZHNpLCB1MzIgc3RhdHVzKQorewor
CXN0cnVjdCBkZXZpY2UgKmRldiA9IGRzaS0+ZGV2OworCXN0cnVjdCBud2xfZHNpX3RyYW5zZmVy
ICp4ZmVyID0gZHNpLT54ZmVyOworCWludCBlcnI7CisJdTggKnBheWxvYWQgPSB4ZmVyLT5tc2ct
PnJ4X2J1ZjsKKwl1MzIgdmFsOworCXUxNiB3b3JkX2NvdW50OworCXU4IGNoYW5uZWw7CisJdTgg
ZGF0YV90eXBlOworCisJeGZlci0+c3RhdHVzID0gMDsKKworCWlmICh4ZmVyLT5yeF93b3JkX2Nv
dW50ID09IDApIHsKKwkJaWYgKCEoc3RhdHVzICYgTldMX0RTSV9SWF9QS1RfSERSX1JDVkQpKQor
CQkJcmV0dXJuIGZhbHNlOworCQkvKiBHZXQgdGhlIFJYIGhlYWRlciBhbmQgcGFyc2UgaXQgKi8K
KwkJdmFsID0gbndsX2RzaV9yZWFkKGRzaSwgTldMX0RTSV9SWF9QS1RfSEVBREVSKTsKKwkJZXJy
ID0gbndsX2RzaV9jbGVhcl9lcnJvcihkc2kpOworCQlpZiAoZXJyKQorCQkJeGZlci0+c3RhdHVz
ID0gZXJyOworCQl3b3JkX2NvdW50ID0gTldMX0RTSV9XQyh2YWwpOworCQljaGFubmVsID0gTldM
X0RTSV9SWF9WQyh2YWwpOworCQlkYXRhX3R5cGUgPSBOV0xfRFNJX1JYX0RUKHZhbCk7CisKKwkJ
aWYgKGNoYW5uZWwgIT0geGZlci0+bXNnLT5jaGFubmVsKSB7CisJCQlEUk1fREVWX0VSUk9SKGRl
diwKKwkJCQkgICAgICAiWyUwMlhdIENoYW5uZWwgbWlzbWF0Y2ggKCV1ICE9ICV1KVxuIiwKKwkJ
CQkgICAgICB4ZmVyLT5jbWQsIGNoYW5uZWwsIHhmZXItPm1zZy0+Y2hhbm5lbCk7CisJCQl4ZmVy
LT5zdGF0dXMgPSAtRUlOVkFMOworCQkJcmV0dXJuIHRydWU7CisJCX0KKworCQlzd2l0Y2ggKGRh
dGFfdHlwZSkgeworCQljYXNlIE1JUElfRFNJX1JYX0dFTkVSSUNfU0hPUlRfUkVBRF9SRVNQT05T
RV8yQllURToKKwkJCS8qIEZhbGwgdGhyb3VnaCAqLworCQljYXNlIE1JUElfRFNJX1JYX0RDU19T
SE9SVF9SRUFEX1JFU1BPTlNFXzJCWVRFOgorCQkJaWYgKHhmZXItPm1zZy0+cnhfbGVuID4gMSkg
eworCQkJCS8qIHJlYWQgc2Vjb25kIGJ5dGUgKi8KKwkJCQlwYXlsb2FkWzFdID0gd29yZF9jb3Vu
dCA+PiA4OworCQkJCSsreGZlci0+cnhfbGVuOworCQkJfQorCQkJLyogRmFsbCB0aHJvdWdoICov
CisJCWNhc2UgTUlQSV9EU0lfUlhfR0VORVJJQ19TSE9SVF9SRUFEX1JFU1BPTlNFXzFCWVRFOgor
CQkJLyogRmFsbCB0aHJvdWdoICovCisJCWNhc2UgTUlQSV9EU0lfUlhfRENTX1NIT1JUX1JFQURf
UkVTUE9OU0VfMUJZVEU6CisJCQlpZiAoeGZlci0+bXNnLT5yeF9sZW4gPiAwKSB7CisJCQkJLyog
cmVhZCBmaXJzdCBieXRlICovCisJCQkJcGF5bG9hZFswXSA9IHdvcmRfY291bnQgJiAweGZmOwor
CQkJCSsreGZlci0+cnhfbGVuOworCQkJfQorCQkJeGZlci0+c3RhdHVzID0geGZlci0+cnhfbGVu
OworCQkJcmV0dXJuIHRydWU7CisJCWNhc2UgTUlQSV9EU0lfUlhfQUNLTk9XTEVER0VfQU5EX0VS
Uk9SX1JFUE9SVDoKKwkJCXdvcmRfY291bnQgJj0gMHhmZjsKKwkJCURSTV9ERVZfRVJST1IoZGV2
LCAiWyUwMlhdIERTSSBlcnJvciByZXBvcnQ6IDB4JTAyeFxuIiwKKwkJCQkgICAgICB4ZmVyLT5j
bWQsIHdvcmRfY291bnQpOworCQkJeGZlci0+c3RhdHVzID0gLUVQUk9UTzsKKwkJCXJldHVybiB0
cnVlOworCQl9CisKKwkJaWYgKHdvcmRfY291bnQgPiB4ZmVyLT5tc2ctPnJ4X2xlbikgeworCQkJ
RFJNX0RFVl9FUlJPUigKKwkJCQlkZXYsCisJCQkJIlslMDJYXSBSZWNlaXZlIGJ1ZmZlciB0b28g
c21hbGw6ICV6dSAoPCAldSlcbiIsCisJCQkJeGZlci0+Y21kLCB4ZmVyLT5tc2ctPnJ4X2xlbiwg
d29yZF9jb3VudCk7CisJCQl4ZmVyLT5zdGF0dXMgPSAtRUlOVkFMOworCQkJcmV0dXJuIHRydWU7
CisJCX0KKworCQl4ZmVyLT5yeF93b3JkX2NvdW50ID0gd29yZF9jb3VudDsKKwl9IGVsc2Ugewor
CQkvKiBTZXQgd29yZF9jb3VudCBmcm9tIHByZXZpb3VzIGhlYWRlciByZWFkICovCisJCXdvcmRf
Y291bnQgPSB4ZmVyLT5yeF93b3JkX2NvdW50OworCX0KKworCS8qIElmIFJYIHBheWxvYWQgaXMg
bm90IHlldCByZWNlaXZlZCwgd2FpdCBmb3IgaXQgKi8KKwlpZiAoIShzdGF0dXMgJiBOV0xfRFNJ
X1JYX1BLVF9QQVlMT0FEX0RBVEFfUkNWRCkpCisJCXJldHVybiBmYWxzZTsKKworCS8qIFJlYWQg
dGhlIFJYIHBheWxvYWQgKi8KKwl3aGlsZSAod29yZF9jb3VudCA+PSA0KSB7CisJCXZhbCA9IG53
bF9kc2lfcmVhZChkc2ksIE5XTF9EU0lfUlhfUEFZTE9BRCk7CisJCXBheWxvYWRbMF0gPSAodmFs
ID4+IDApICYgMHhmZjsKKwkJcGF5bG9hZFsxXSA9ICh2YWwgPj4gOCkgJiAweGZmOworCQlwYXls
b2FkWzJdID0gKHZhbCA+PiAxNikgJiAweGZmOworCQlwYXlsb2FkWzNdID0gKHZhbCA+PiAyNCkg
JiAweGZmOworCQlwYXlsb2FkICs9IDQ7CisJCXhmZXItPnJ4X2xlbiArPSA0OworCQl3b3JkX2Nv
dW50IC09IDQ7CisJfQorCisJaWYgKHdvcmRfY291bnQgPiAwKSB7CisJCXZhbCA9IG53bF9kc2lf
cmVhZChkc2ksIE5XTF9EU0lfUlhfUEFZTE9BRCk7CisJCXN3aXRjaCAod29yZF9jb3VudCkgewor
CQljYXNlIDM6CisJCQlwYXlsb2FkWzJdID0gKHZhbCA+PiAxNikgJiAweGZmOworCQkJKyt4ZmVy
LT5yeF9sZW47CisJCQkvKiBGYWxsIHRocm91Z2ggKi8KKwkJY2FzZSAyOgorCQkJcGF5bG9hZFsx
XSA9ICh2YWwgPj4gOCkgJiAweGZmOworCQkJKyt4ZmVyLT5yeF9sZW47CisJCQkvKiBGYWxsIHRo
cm91Z2ggKi8KKwkJY2FzZSAxOgorCQkJcGF5bG9hZFswXSA9ICh2YWwgPj4gMCkgJiAweGZmOwor
CQkJKyt4ZmVyLT5yeF9sZW47CisJCQlicmVhazsKKwkJfQorCX0KKworCXhmZXItPnN0YXR1cyA9
IHhmZXItPnJ4X2xlbjsKKwllcnIgPSBud2xfZHNpX2NsZWFyX2Vycm9yKGRzaSk7CisJaWYgKGVy
cikKKwkJeGZlci0+c3RhdHVzID0gZXJyOworCisJcmV0dXJuIHRydWU7Cit9CisKK3N0YXRpYyB2
b2lkIG53bF9kc2lfZmluaXNoX3RyYW5zbWlzc2lvbihzdHJ1Y3QgbndsX2RzaSAqZHNpLCB1MzIg
c3RhdHVzKQoreworCXN0cnVjdCBud2xfZHNpX3RyYW5zZmVyICp4ZmVyID0gZHNpLT54ZmVyOwor
CWJvb2wgZW5kX3BhY2tldCA9IGZhbHNlOworCisJaWYgKCF4ZmVyKQorCQlyZXR1cm47CisKKwlp
ZiAoeGZlci0+ZGlyZWN0aW9uID09IERTSV9QQUNLRVRfU0VORCAmJgorCSAgICBzdGF0dXMgJiBO
V0xfRFNJX1RYX1BLVF9ET05FKSB7CisJCXhmZXItPnN0YXR1cyA9IHhmZXItPnR4X2xlbjsKKwkJ
ZW5kX3BhY2tldCA9IHRydWU7CisJfSBlbHNlIGlmIChzdGF0dXMgJiBOV0xfRFNJX0RQSFlfRElS
RUNUSU9OICYmCisJCSAgICgoc3RhdHVzICYgKE5XTF9EU0lfUlhfUEtUX0hEUl9SQ1ZEIHwKKwkJ
CSAgICAgICBOV0xfRFNJX1JYX1BLVF9QQVlMT0FEX0RBVEFfUkNWRCkpKSkgeworCQllbmRfcGFj
a2V0ID0gbndsX2RzaV9yZWFkX3BhY2tldChkc2ksIHN0YXR1cyk7CisJfQorCisJaWYgKGVuZF9w
YWNrZXQpCisJCWNvbXBsZXRlKCZ4ZmVyLT5jb21wbGV0ZWQpOworfQorCitzdGF0aWMgdm9pZCBu
d2xfZHNpX2JlZ2luX3RyYW5zbWlzc2lvbihzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXN0cnVj
dCBud2xfZHNpX3RyYW5zZmVyICp4ZmVyID0gZHNpLT54ZmVyOworCXN0cnVjdCBtaXBpX2RzaV9w
YWNrZXQgKnBrdCA9ICZ4ZmVyLT5wYWNrZXQ7CisJY29uc3QgdTggKnBheWxvYWQ7CisJc2l6ZV90
IGxlbmd0aDsKKwl1MTYgd29yZF9jb3VudDsKKwl1OCBoc19tb2RlOworCXUzMiB2YWw7CisJdTMy
IGhzX3dvcmthcm91bmQgPSAwOworCisJLyogU2VuZCB0aGUgcGF5bG9hZCwgaWYgYW55ICovCisJ
bGVuZ3RoID0gcGt0LT5wYXlsb2FkX2xlbmd0aDsKKwlwYXlsb2FkID0gcGt0LT5wYXlsb2FkOwor
CisJd2hpbGUgKGxlbmd0aCA+PSA0KSB7CisJCXZhbCA9ICoodTMyICopcGF5bG9hZDsKKwkJaHNf
d29ya2Fyb3VuZCB8PSAhKHZhbCAmIDB4RkZGRjAwKTsKKwkJbndsX2RzaV93cml0ZShkc2ksIE5X
TF9EU0lfVFhfUEFZTE9BRCwgdmFsKTsKKwkJcGF5bG9hZCArPSA0OworCQlsZW5ndGggLT0gNDsK
Kwl9CisJLyogU2VuZCB0aGUgcmVzdCBvZiB0aGUgcGF5bG9hZCAqLworCXZhbCA9IDA7CisJc3dp
dGNoIChsZW5ndGgpIHsKKwljYXNlIDM6CisJCXZhbCB8PSBwYXlsb2FkWzJdIDw8IDE2OworCQkv
KiBGYWxsIHRocm91Z2ggKi8KKwljYXNlIDI6CisJCXZhbCB8PSBwYXlsb2FkWzFdIDw8IDg7CisJ
CWhzX3dvcmthcm91bmQgfD0gISh2YWwgJiAweEZGRkYwMCk7CisJCS8qIEZhbGwgdGhyb3VnaCAq
LworCWNhc2UgMToKKwkJdmFsIHw9IHBheWxvYWRbMF07CisJCW53bF9kc2lfd3JpdGUoZHNpLCBO
V0xfRFNJX1RYX1BBWUxPQUQsIHZhbCk7CisJCWJyZWFrOworCX0KKwl4ZmVyLT50eF9sZW4gPSBw
a3QtPnBheWxvYWRfbGVuZ3RoOworCisJLyoKKwkgKiBTZW5kIHRoZSBoZWFkZXIKKwkgKiBoZWFk
ZXJbMF0gPSBWaXJ0dWFsIENoYW5uZWwgKyBEYXRhIFR5cGUKKwkgKiBoZWFkZXJbMV0gPSBXb3Jk
IENvdW50IExTQiAoTFApIG9yIGZpcnN0IHBhcmFtIChTUCkKKwkgKiBoZWFkZXJbMl0gPSBXb3Jk
IENvdW50IE1TQiAoTFApIG9yIHNlY29uZCBwYXJhbSAoU1ApCisJICovCisJd29yZF9jb3VudCA9
IHBrdC0+aGVhZGVyWzFdIHwgKHBrdC0+aGVhZGVyWzJdIDw8IDgpOworCWlmIChoc193b3JrYXJv
dW5kICYmIChkc2ktPnF1aXJrcyAmIEUxMTQxOF9IU19NT0RFX1FVSVJLKSkgeworCQlEUk1fREVW
X0RFQlVHX0RSSVZFUihkc2ktPmRldiwKKwkJCQkgICAgICJVc2luZyBocyBtb2RlIHdvcmthcm91
bmQgZm9yIGNtZCAweCV4XG4iLAorCQkJCSAgICAgeGZlci0+Y21kKTsKKwkJaHNfbW9kZSA9IDE7
CisJfSBlbHNlIHsKKwkJaHNfbW9kZSA9ICh4ZmVyLT5tc2ctPmZsYWdzICYgTUlQSV9EU0lfTVNH
X1VTRV9MUE0pID8gMCA6IDE7CisJfQorCXZhbCA9IE5XTF9EU0lfV0Mod29yZF9jb3VudCkgfCBO
V0xfRFNJX1RYX1ZDKHhmZXItPm1zZy0+Y2hhbm5lbCkgfAorCSAgICAgIE5XTF9EU0lfVFhfRFQo
eGZlci0+bXNnLT50eXBlKSB8IE5XTF9EU0lfSFNfU0VMKGhzX21vZGUpIHwKKwkgICAgICBOV0xf
RFNJX0JUQV9UWCh4ZmVyLT5uZWVkX2J0YSk7CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lf
UEtUX0NPTlRST0wsIHZhbCk7CisKKwkvKiBTZW5kIHBhY2tldCBjb21tYW5kICovCisJbndsX2Rz
aV93cml0ZShkc2ksIE5XTF9EU0lfU0VORF9QQUNLRVQsIDB4MSk7Cit9CisKK3N0YXRpYyBzc2l6
ZV90IG53bF9kc2lfaG9zdF90cmFuc2ZlcihzdHJ1Y3QgbWlwaV9kc2lfaG9zdCAqZHNpX2hvc3Qs
CisJCQkJICAgICBjb25zdCBzdHJ1Y3QgbWlwaV9kc2lfbXNnICptc2cpCit7CisJc3RydWN0IG53
bF9kc2kgKmRzaSA9IGNvbnRhaW5lcl9vZihkc2lfaG9zdCwgc3RydWN0IG53bF9kc2ksIGRzaV9o
b3N0KTsKKwlzdHJ1Y3QgbndsX2RzaV90cmFuc2ZlciB4ZmVyOworCXNzaXplX3QgcmV0ID0gMDsK
KworCS8qIENyZWF0ZSBwYWNrZXQgdG8gYmUgc2VudCAqLworCWRzaS0+eGZlciA9ICZ4ZmVyOwor
CXJldCA9IG1pcGlfZHNpX2NyZWF0ZV9wYWNrZXQoJnhmZXIucGFja2V0LCBtc2cpOworCWlmIChy
ZXQgPCAwKSB7CisJCWRzaS0+eGZlciA9IE5VTEw7CisJCXJldHVybiByZXQ7CisJfQorCisJaWYg
KChtc2ctPnR5cGUgJiBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8wX1BBUkFNIHx8CisJ
ICAgICBtc2ctPnR5cGUgJiBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8xX1BBUkFNIHx8
CisJICAgICBtc2ctPnR5cGUgJiBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8yX1BBUkFN
IHx8CisJICAgICBtc2ctPnR5cGUgJiBNSVBJX0RTSV9EQ1NfUkVBRCkgJiYKKwkgICAgbXNnLT5y
eF9sZW4gPiAwICYmIG1zZy0+cnhfYnVmICE9IE5VTEwpCisJCXhmZXIuZGlyZWN0aW9uID0gRFNJ
X1BBQ0tFVF9SRUNFSVZFOworCWVsc2UKKwkJeGZlci5kaXJlY3Rpb24gPSBEU0lfUEFDS0VUX1NF
TkQ7CisKKwl4ZmVyLm5lZWRfYnRhID0gKHhmZXIuZGlyZWN0aW9uID09IERTSV9QQUNLRVRfUkVD
RUlWRSk7CisJeGZlci5uZWVkX2J0YSB8PSAobXNnLT5mbGFncyAmIE1JUElfRFNJX01TR19SRVFf
QUNLKSA/IDEgOiAwOworCXhmZXIubXNnID0gbXNnOworCXhmZXIuc3RhdHVzID0gLUVUSU1FRE9V
VDsKKwl4ZmVyLnJ4X3dvcmRfY291bnQgPSAwOworCXhmZXIucnhfbGVuID0gMDsKKwl4ZmVyLmNt
ZCA9IDB4MDA7CisJaWYgKG1zZy0+dHhfbGVuID4gMCkKKwkJeGZlci5jbWQgPSAoKHU4ICopKG1z
Zy0+dHhfYnVmKSlbMF07CisJaW5pdF9jb21wbGV0aW9uKCZ4ZmVyLmNvbXBsZXRlZCk7CisKKwly
ZXQgPSBjbGtfcHJlcGFyZV9lbmFibGUoZHNpLT5yeF9lc2NfY2xrKTsKKwlpZiAocmV0IDwgMCkg
eworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGVuYWJsZSByeF9lc2MgY2xr
OiAlemRcbiIsCisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwlEUk1fREVWX0RF
QlVHX0RSSVZFUihkc2ktPmRldiwgIkVuYWJsZWQgcnhfZXNjIGNsayBAJWx1IEh6XG4iLAorCQkJ
ICAgICBjbGtfZ2V0X3JhdGUoZHNpLT5yeF9lc2NfY2xrKSk7CisKKwkvKiBJbml0aWF0ZSB0aGUg
RFNJIHBhY2tldCB0cmFuc21pc2lvbiAqLworCW53bF9kc2lfYmVnaW5fdHJhbnNtaXNzaW9uKGRz
aSk7CisKKwlpZiAoIXdhaXRfZm9yX2NvbXBsZXRpb25fdGltZW91dCgmeGZlci5jb21wbGV0ZWQs
CisJCQkJCSBOV0xfRFNJX01JUElfRklGT19USU1FT1VUKSkgeworCQlEUk1fREVWX0VSUk9SKGRz
aV9ob3N0LT5kZXYsICJbJTAyWF0gRFNJIHRyYW5zZmVyIHRpbWVkIG91dFxuIiwKKwkJCSAgICAg
IHhmZXIuY21kKTsKKwkJcmV0ID0gLUVUSU1FRE9VVDsKKwl9IGVsc2UgeworCQlyZXQgPSB4ZmVy
LnN0YXR1czsKKwl9CisKKwljbGtfZGlzYWJsZV91bnByZXBhcmUoZHNpLT5yeF9lc2NfY2xrKTsK
KworCXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgbWlwaV9kc2lfaG9zdF9v
cHMgbndsX2RzaV9ob3N0X29wcyA9IHsKKwkuYXR0YWNoID0gbndsX2RzaV9ob3N0X2F0dGFjaCwK
KwkuZGV0YWNoID0gbndsX2RzaV9ob3N0X2RldGFjaCwKKwkudHJhbnNmZXIgPSBud2xfZHNpX2hv
c3RfdHJhbnNmZXIsCit9OworCitzdGF0aWMgaXJxcmV0dXJuX3QgbndsX2RzaV9pcnFfaGFuZGxl
cihpbnQgaXJxLCB2b2lkICpkYXRhKQoreworCXUzMiBpcnFfc3RhdHVzOworCXN0cnVjdCBud2xf
ZHNpICpkc2kgPSBkYXRhOworCisJaXJxX3N0YXR1cyA9IG53bF9kc2lfcmVhZChkc2ksIE5XTF9E
U0lfSVJRX1NUQVRVUyk7CisKKwlpZiAoaXJxX3N0YXR1cyAmIE5XTF9EU0lfVFhfRklGT19PVkZM
VykKKwkJRFJNX0RFVl9FUlJPUl9SQVRFTElNSVRFRChkc2ktPmRldiwgInR4IGZpZm8gb3ZlcmZs
b3dcbiIpOworCisJaWYgKGlycV9zdGF0dXMgJiBOV0xfRFNJX0hTX1RYX1RJTUVPVVQpCisJCURS
TV9ERVZfRVJST1JfUkFURUxJTUlURUQoZHNpLT5kZXYsICJIUyB0eCB0aW1lb3V0XG4iKTsKKwor
CWlmIChpcnFfc3RhdHVzICYgTldMX0RTSV9UWF9QS1RfRE9ORSB8fAorCSAgICBpcnFfc3RhdHVz
ICYgTldMX0RTSV9SWF9QS1RfSERSX1JDVkQgfHwKKwkgICAgaXJxX3N0YXR1cyAmIE5XTF9EU0lf
UlhfUEtUX1BBWUxPQURfREFUQV9SQ1ZEKQorCQlud2xfZHNpX2ZpbmlzaF90cmFuc21pc3Npb24o
ZHNpLCBpcnFfc3RhdHVzKTsKKworCXJldHVybiBJUlFfSEFORExFRDsKK30KKworc3RhdGljIGlu
dCBud2xfZHNpX2VuYWJsZShzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXN0cnVjdCBkZXZpY2Ug
KmRldiA9IGRzaS0+ZGV2OworCXVuaW9uIHBoeV9jb25maWd1cmVfb3B0cyAqcGh5X2NmZyA9ICZk
c2ktPnBoeV9jZmc7CisJaW50IHJldDsKKworCWlmICghZHNpLT5sYW5lcykgeworCQlEUk1fREVW
X0VSUk9SKGRldiwgIk5lZWQgRFNJIGxhbmVzOiAlZFxuIiwgZHNpLT5sYW5lcyk7CisJCXJldHVy
biAtRUlOVkFMOworCX0KKworCXJldCA9IHBoeV9pbml0KGRzaS0+cGh5KTsKKwlpZiAocmV0IDwg
MCkgeworCQlEUk1fREVWX0VSUk9SKGRldiwgIkZhaWxlZCB0byBpbml0IERTSSBwaHk6ICVkXG4i
LCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKworCXJldCA9IHBoeV9jb25maWd1cmUoZHNpLT5w
aHksIHBoeV9jZmcpOworCWlmIChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFp
bGVkIHRvIGNvbmZpZ3VyZSBEU0kgcGh5OiAlZFxuIiwgcmV0KTsKKwkJZ290byB1bmluaXRfcGh5
OworCX0KKworCXJldCA9IGNsa19wcmVwYXJlX2VuYWJsZShkc2ktPnR4X2VzY19jbGspOworCWlm
IChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gZW5hYmxl
IHR4X2VzYyBjbGs6ICVkXG4iLAorCQkJICAgICAgcmV0KTsKKwkJZ290byB1bmluaXRfcGh5Owor
CX0KKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgIkVuYWJsZWQgdHhfZXNjIGNsayBA
JWx1IEh6XG4iLAorCQkJICAgICBjbGtfZ2V0X3JhdGUoZHNpLT50eF9lc2NfY2xrKSk7CisKKwly
ZXQgPSBud2xfZHNpX2NvbmZpZ19ob3N0KGRzaSk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RF
Vl9FUlJPUihkZXYsICJGYWlsZWQgdG8gc2V0IHVwIERTSTogJWQiLCByZXQpOworCQlnb3RvIGRp
c2FibGVfY2xvY2s7CisJfQorCisJcmV0ID0gbndsX2RzaV9jb25maWdfZHBpKGRzaSk7CisJaWYg
KHJldCA8IDApIHsKKwkJRFJNX0RFVl9FUlJPUihkZXYsICJGYWlsZWQgdG8gc2V0IHVwIERQSTog
JWQiLCByZXQpOworCQlnb3RvIGRpc2FibGVfY2xvY2s7CisJfQorCisJcmV0ID0gcGh5X3Bvd2Vy
X29uKGRzaS0+cGh5KTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRldiwgIkZh
aWxlZCB0byBwb3dlciBvbiBEUEhZICglZClcbiIsIHJldCk7CisJCWdvdG8gZGlzYWJsZV9jbG9j
azsKKwl9CisKKwlyZXQgPSBud2xfZHNpX2luaXRfaW50ZXJydXB0cyhkc2kpOworCWlmIChyZXQg
PCAwKQorCQlnb3RvIHBvd2VyX29mZl9waHk7CisKKwlyZXR1cm4gcmV0OworCitwb3dlcl9vZmZf
cGh5OgorCXBoeV9wb3dlcl9vZmYoZHNpLT5waHkpOworZGlzYWJsZV9jbG9jazoKKwljbGtfZGlz
YWJsZV91bnByZXBhcmUoZHNpLT50eF9lc2NfY2xrKTsKK3VuaW5pdF9waHk6CisJcGh5X2V4aXQo
ZHNpLT5waHkpOworCisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCBud2xfZHNpX2Rpc2Fi
bGUoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSBkc2ktPmRl
djsKKworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRldiwgIkRpc2FibGluZyBjbG9ja3MgYW5kIHBo
eVxuIik7CisKKwlwaHlfcG93ZXJfb2ZmKGRzaS0+cGh5KTsKKwlwaHlfZXhpdChkc2ktPnBoeSk7
CisKKwkvKiBEaXNhYmxpbmcgdGhlIGNsb2NrIGJlZm9yZSB0aGUgcGh5IGJyZWFrcyBlbmFibGlu
ZyBkc2kgYWdhaW4gKi8KKwljbGtfZGlzYWJsZV91bnByZXBhcmUoZHNpLT50eF9lc2NfY2xrKTsK
KworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IG53bF9kc2lfc2V0X3BsYXRmb3JtX2Nsb2Nr
cyhzdHJ1Y3QgbndsX2RzaSAqZHNpLCBib29sIGVuYWJsZSkKK3sKKwlzdHJ1Y3QgZGV2aWNlICpk
ZXYgPSBkc2ktPmRldjsKKwljb25zdCBjaGFyICppZDsKKwlzdHJ1Y3QgY2xrICpjbGs7CisJc2l6
ZV90IGk7CisJdW5zaWduZWQgbG9uZyByYXRlOworCWludCByZXQsIHJlc3VsdCA9IDA7CisKKwlE
Uk1fREVWX0RFQlVHX0RSSVZFUihkZXYsICIlcyBwbGF0Zm9ybSBjbG9ja3NcbiIsCisJCQkgICAg
IGVuYWJsZSA/ICJlbmFibGluZyIgOiAiZGlzYWJsaW5nIik7CisJZm9yIChpID0gMDsgaSA8IEFS
UkFZX1NJWkUoZHNpLT5wZGF0YS0+Y2xrX2NvbmZpZyk7IGkrKykgeworCQlpZiAoIWRzaS0+Y2xr
X2NvbmZpZ1tpXS5wcmVzZW50KQorCQkJY29udGludWU7CisJCWlkID0gZHNpLT5jbGtfY29uZmln
W2ldLmlkOworCQljbGsgPSBkc2ktPmNsa19jb25maWdbaV0uY2xrOworCisJCWlmIChlbmFibGUp
IHsKKwkJCXJldCA9IGNsa19wcmVwYXJlX2VuYWJsZShjbGspOworCQkJaWYgKHJldCA8IDApIHsK
KwkJCQlEUk1fREVWX0VSUk9SKGRldiwKKwkJCQkJICAgICAgIkZhaWxlZCB0byBlbmFibGUgJXMg
Y2xrOiAlZFxuIiwKKwkJCQkJICAgICAgaWQsIHJldCk7CisJCQkJcmVzdWx0ID0gcmVzdWx0ID86
IHJldDsKKwkJCX0KKwkJCXJhdGUgPSBjbGtfZ2V0X3JhdGUoY2xrKTsKKwkJCURSTV9ERVZfREVC
VUdfRFJJVkVSKGRldiwgIkVuYWJsZWQgJXMgY2xrIEAlbHUgSHpcbiIsCisJCQkJCSAgICAgaWQs
IHJhdGUpOworCQl9IGVsc2UgeworCQkJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKGNsayk7CisJCQlE
Uk1fREVWX0RFQlVHX0RSSVZFUihkZXYsICJEaXNhYmxlZCAlcyBjbGtcbiIsIGlkKTsKKwkJfQor
CX0KKworCXJldHVybiByZXN1bHQ7Cit9CisKK3N0YXRpYyBpbnQgbndsX2RzaV9wbGF0X2VuYWJs
ZShzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXN0cnVjdCBkZXZpY2UgKmRldiA9IGRzaS0+ZGV2
OworCWludCByZXQ7CisKKwlpZiAoZHNpLT5wZGF0YS0+c2VsZWN0X2lucHV0KSB7CisJCXJldCA9
IGRzaS0+cGRhdGEtPnNlbGVjdF9pbnB1dChkc2kpOworCQlpZiAocmV0IDwgMCkKKwkJCXJldHVy
biByZXQ7CisJfQorCisJcmV0ID0gbndsX2RzaV9zZXRfcGxhdGZvcm1fY2xvY2tzKGRzaSwgdHJ1
ZSk7CisJaWYgKHJldCA8IDApCisJCXJldHVybiByZXQ7CisKKwlyZXQgPSBkc2ktPnBkYXRhLT5w
b3dlcm9uKGRzaSk7CisJaWYgKHJldCA8IDApCisJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFpbGVk
IHRvIHBvd2VyIG9uIERTSTogJWRcbiIsIHJldCk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGlj
IHZvaWQgbndsX2RzaV9wbGF0X2Rpc2FibGUoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlkc2kt
PnBkYXRhLT5wb3dlcm9mZihkc2kpOworCW53bF9kc2lfc2V0X3BsYXRmb3JtX2Nsb2Nrcyhkc2ks
IGZhbHNlKTsKKwlpZiAoZHNpLT5wZGF0YS0+ZGVzZWxlY3RfaW5wdXQpCisJCWRzaS0+cGRhdGEt
PmRlc2VsZWN0X2lucHV0KGRzaSk7Cit9CisKK3N0YXRpYyB2b2lkIG53bF9kc2lfYnJpZGdlX2Rp
c2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3sKKwlzdHJ1Y3QgbndsX2RzaSAqZHNp
ID0gYnJpZGdlX3RvX2RzaShicmlkZ2UpOworCisJbndsX2RzaV9kaXNhYmxlKGRzaSk7CisJbnds
X2RzaV9wbGF0X2Rpc2FibGUoZHNpKTsKKwlwbV9ydW50aW1lX3B1dChkc2ktPmRldik7Cit9CisK
K3N0YXRpYyBpbnQgbndsX2RzaV9nZXRfZHBoeV9wYXJhbXMoc3RydWN0IG53bF9kc2kgKmRzaSwK
KwkJCQkgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwKKwkJCQkgICB1bmlv
biBwaHlfY29uZmlndXJlX29wdHMgKnBoeV9vcHRzKQoreworCXVuc2lnbmVkIGxvbmcgcmF0ZTsK
KwlpbnQgcmV0OworCisJaWYgKGRzaS0+bGFuZXMgPCAxIHx8IGRzaS0+bGFuZXMgPiA0KQorCQly
ZXR1cm4gLUVJTlZBTDsKKworCS8qCisJICogU28gZmFyIHRoZSBEUEhZIHNwZWMgbWluaW1hbCB0
aW1pbmdzIHdvcmsgZm9yIGJvdGggbWl4ZWwKKwkgKiBkcGh5IGFuZCBud2wgZHNpIGhvc3QKKwkg
Ki8KKwlyZXQgPSBwaHlfbWlwaV9kcGh5X2dldF9kZWZhdWx0X2NvbmZpZygKKwkJbW9kZS0+Y3J0
Y19jbG9jayAqIDEwMDAsCisJCW1pcGlfZHNpX3BpeGVsX2Zvcm1hdF90b19icHAoZHNpLT5mb3Jt
YXQpLCBkc2ktPmxhbmVzLAorCQkmcGh5X29wdHMtPm1pcGlfZHBoeSk7CisJaWYgKHJldCA8IDAp
CisJCXJldHVybiByZXQ7CisKKwlyYXRlID0gY2xrX2dldF9yYXRlKGRzaS0+dHhfZXNjX2Nsayk7
CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJMUCBjbGsgaXMgQCVsdSBIelxuIiwg
cmF0ZSk7CisJcGh5X29wdHMtPm1pcGlfZHBoeS5scF9jbGtfcmF0ZSA9IHJhdGU7CisKKwlyZXR1
cm4gMDsKK30KKworc3RhdGljIGJvb2wgbndsX2RzaV9icmlkZ2VfbW9kZV9maXh1cChzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCSAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlICptb2RlLAorCQkJCSAgICAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9t
b2RlKQoreworCS8qIEF0IGxlYXN0IExDRElGICsgTldMIG5lZWRzIGFjdGl2ZSBoaWdoIHN5bmMg
Ki8KKwlhZGp1c3RlZF9tb2RlLT5mbGFncyB8PSAoRFJNX01PREVfRkxBR19QSFNZTkMgfCBEUk1f
TU9ERV9GTEFHX1BWU1lOQyk7CisJYWRqdXN0ZWRfbW9kZS0+ZmxhZ3MgJj0gfihEUk1fTU9ERV9G
TEFHX05IU1lOQyB8IERSTV9NT0RFX0ZMQUdfTlZTWU5DKTsKKworCXJldHVybiB0cnVlOworfQor
CitzdGF0aWMgZW51bSBkcm1fbW9kZV9zdGF0dXMKK253bF9kc2lfYnJpZGdlX21vZGVfdmFsaWQo
c3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCSAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKm1vZGUpCit7CisJc3RydWN0IG53bF9kc2kgKmRzaSA9IGJyaWRnZV90b19kc2koYnJp
ZGdlKTsKKwlpbnQgYnBwID0gbWlwaV9kc2lfcGl4ZWxfZm9ybWF0X3RvX2JwcChkc2ktPmZvcm1h
dCk7CisKKwlpZiAobW9kZS0+Y2xvY2sgKiBicHAgPiAxNTAwMDAwMCAqIGRzaS0+bGFuZXMpCisJ
CXJldHVybiBNT0RFX0NMT0NLX0hJR0g7CisKKwlpZiAobW9kZS0+Y2xvY2sgKiBicHAgPCA4MDAw
MCAqIGRzaS0+bGFuZXMpCisJCXJldHVybiBNT0RFX0NMT0NLX0xPVzsKKworCXJldHVybiBNT0RF
X09LOworfQorCitzdGF0aWMgdm9pZAorbndsX2RzaV9icmlkZ2VfbW9kZV9zZXQoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSwKKwkJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2Rl
LAorCQkJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpCit7CisJ
c3RydWN0IG53bF9kc2kgKmRzaSA9IGJyaWRnZV90b19kc2koYnJpZGdlKTsKKwlzdHJ1Y3QgZGV2
aWNlICpkZXYgPSBkc2ktPmRldjsKKwl1bmlvbiBwaHlfY29uZmlndXJlX29wdHMgbmV3X2NmZzsK
Kwl1bnNpZ25lZCBsb25nIHBoeV9yZWZfcmF0ZTsKKwlpbnQgcmV0OworCisJcmV0ID0gbndsX2Rz
aV9nZXRfZHBoeV9wYXJhbXMoZHNpLCBhZGp1c3RlZF9tb2RlLCAmbmV3X2NmZyk7CisJaWYgKHJl
dCA8IDApCisJCXJldHVybjsKKworCS8qCisJICogSWYgaHMgY2xvY2sgaXMgdW5jaGFuZ2VkLCB3
ZSdyZSBhbGwgZ29vZCAtIGFsbCBwYXJhbWV0ZXJzIGFyZQorCSAqIGRlcml2ZWQgZnJvbSBpdCBh
dG0uCisJICovCisJaWYgKG5ld19jZmcubWlwaV9kcGh5LmhzX2Nsa19yYXRlID09IGRzaS0+cGh5
X2NmZy5taXBpX2RwaHkuaHNfY2xrX3JhdGUpCisJCXJldHVybjsKKworCXBoeV9yZWZfcmF0ZSA9
IGNsa19nZXRfcmF0ZShkc2ktPnBoeV9yZWZfY2xrKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihk
ZXYsICJQSFkgYXQgcmVmIHJhdGU6ICVsdVxuIiwgcGh5X3JlZl9yYXRlKTsKKwkvKiBTYXZlIHRo
ZSBuZXcgZGVzaXJlZCBwaHkgY29uZmlnICovCisJbWVtY3B5KCZkc2ktPnBoeV9jZmcsICZuZXdf
Y2ZnLCBzaXplb2YobmV3X2NmZykpOworCisJbWVtY3B5KCZkc2ktPm1vZGUsIGFkanVzdGVkX21v
ZGUsIHNpemVvZihkc2ktPm1vZGUpKTsKKwlkcm1fbW9kZV9kZWJ1Z19wcmludG1vZGVsaW5lKGFk
anVzdGVkX21vZGUpOworfQorCitzdGF0aWMgdm9pZCBud2xfZHNpX2JyaWRnZV9wcmVfZW5hYmxl
KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCit7CisJc3RydWN0IG53bF9kc2kgKmRzaSA9IGJy
aWRnZV90b19kc2koYnJpZGdlKTsKKworCXBtX3J1bnRpbWVfZ2V0X3N5bmMoZHNpLT5kZXYpOwor
CW53bF9kc2lfcGxhdF9lbmFibGUoZHNpKTsKKwlud2xfZHNpX2VuYWJsZShkc2kpOworfQorCitz
dGF0aWMgaW50IG53bF9kc2lfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdl
KQoreworCXN0cnVjdCBud2xfZHNpICpkc2kgPSBicmlkZ2VfdG9fZHNpKGJyaWRnZSk7CisKKwly
ZXR1cm4gZHJtX2JyaWRnZV9hdHRhY2goYnJpZGdlLT5lbmNvZGVyLCBkc2ktPnBhbmVsX2JyaWRn
ZSwgYnJpZGdlKTsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIG53
bF9kc2lfYnJpZGdlX2Z1bmNzID0geworCS5wcmVfZW5hYmxlID0gbndsX2RzaV9icmlkZ2VfcHJl
X2VuYWJsZSwKKwkuZGlzYWJsZSAgICA9IG53bF9kc2lfYnJpZGdlX2Rpc2FibGUsCisJLm1vZGVf
Zml4dXAgPSBud2xfZHNpX2JyaWRnZV9tb2RlX2ZpeHVwLAorCS5tb2RlX3NldCAgID0gbndsX2Rz
aV9icmlkZ2VfbW9kZV9zZXQsCisJLm1vZGVfdmFsaWQgPSBud2xfZHNpX2JyaWRnZV9tb2RlX3Zh
bGlkLAorCS5hdHRhY2gJICAgID0gbndsX2RzaV9icmlkZ2VfYXR0YWNoLAorfTsKKworc3RhdGlj
IGludCBud2xfZHNpX3BhcnNlX2R0KHN0cnVjdCBud2xfZHNpICpkc2kpCit7CisJc3RydWN0IHBs
YXRmb3JtX2RldmljZSAqcGRldiA9IHRvX3BsYXRmb3JtX2RldmljZShkc2ktPmRldik7CisJc3Ry
dWN0IGNsayAqY2xrOworCWNvbnN0IGNoYXIgKmNsa19pZDsKKwl2b2lkIF9faW9tZW0gKmJhc2U7
CisJaW50IGksIHJldDsKKworCWRzaS0+cGh5ID0gZGV2bV9waHlfZ2V0KGRzaS0+ZGV2LCAiZHBo
eSIpOworCWlmIChJU19FUlIoZHNpLT5waHkpKSB7CisJCXJldCA9IFBUUl9FUlIoZHNpLT5waHkp
OworCQlpZiAocmV0ICE9IC1FUFJPQkVfREVGRVIpCisJCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2
LCAiQ291bGQgbm90IGdldCBQSFk6ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwor
CS8qIFBsYXRmb3JtIGRlcGVuZGVudCBjbG9ja3MgKi8KKwltZW1jcHkoZHNpLT5jbGtfY29uZmln
LCBkc2ktPnBkYXRhLT5jbGtfY29uZmlnLAorCSAgICAgICBzaXplb2YoZHNpLT5wZGF0YS0+Y2xr
X2NvbmZpZykpOworCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUoZHNpLT5wZGF0YS0+Y2xr
X2NvbmZpZyk7IGkrKykgeworCQlpZiAoIWRzaS0+Y2xrX2NvbmZpZ1tpXS5wcmVzZW50KQorCQkJ
Y29udGludWU7CisKKwkJY2xrX2lkID0gZHNpLT5jbGtfY29uZmlnW2ldLmlkOworCQljbGsgPSBk
ZXZtX2Nsa19nZXQoZHNpLT5kZXYsIGNsa19pZCk7CisJCWlmIChJU19FUlIoY2xrKSkgeworCQkJ
cmV0ID0gUFRSX0VSUihjbGspOworCQkJRFJNX0RFVl9FUlJPUihkc2ktPmRldiwgIkZhaWxlZCB0
byBnZXQgJXMgY2xvY2s6ICVkXG4iLAorCQkJCSAgICAgIGNsa19pZCwgcmV0KTsKKwkJCXJldHVy
biByZXQ7CisJCX0KKwkJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJTZXR1cCBjbGsg
JXMgKHJhdGU6ICVsdSlcbiIsCisJCQkJICAgICBjbGtfaWQsIGNsa19nZXRfcmF0ZShjbGspKTsK
KwkJZHNpLT5jbGtfY29uZmlnW2ldLmNsayA9IGNsazsKKwl9CisKKwkvKiBEU0kgY2xvY2tzICov
CisJY2xrID0gZGV2bV9jbGtfZ2V0KGRzaS0+ZGV2LCAicGh5X3JlZiIpOworCWlmIChJU19FUlIo
Y2xrKSkgeworCQlyZXQgPSBQVFJfRVJSKGNsayk7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYs
ICJGYWlsZWQgdG8gZ2V0IHBoeV9yZWYgY2xvY2s6ICVkXG4iLAorCQkJICAgICAgcmV0KTsKKwkJ
cmV0dXJuIHJldDsKKwl9CisJZHNpLT5waHlfcmVmX2NsayA9IGNsazsKKworCWNsayA9IGRldm1f
Y2xrX2dldChkc2ktPmRldiwgInJ4X2VzYyIpOworCWlmIChJU19FUlIoY2xrKSkgeworCQlyZXQg
PSBQVFJfRVJSKGNsayk7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gZ2V0
IHJ4X2VzYyBjbG9jazogJWRcbiIsCisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0K
Kwlkc2ktPnJ4X2VzY19jbGsgPSBjbGs7CisKKwljbGsgPSBkZXZtX2Nsa19nZXQoZHNpLT5kZXYs
ICJ0eF9lc2MiKTsKKwlpZiAoSVNfRVJSKGNsaykpIHsKKwkJcmV0ID0gUFRSX0VSUihjbGspOwor
CQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGdldCB0eF9lc2MgY2xvY2s6ICVk
XG4iLAorCQkJICAgICAgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisJZHNpLT50eF9lc2NfY2xr
ID0gY2xrOworCisJZHNpLT5tdXggPSBkZXZtX211eF9jb250cm9sX2dldChkc2ktPmRldiwgTlVM
TCk7CisJaWYgKElTX0VSUihkc2ktPm11eCkpIHsKKwkJcmV0ID0gUFRSX0VSUihkc2ktPm11eCk7
CisJCWlmIChyZXQgIT0gLUVQUk9CRV9ERUZFUikKKwkJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYs
ICJGYWlsZWQgdG8gZ2V0IG11eDogJWRcbiIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJ
YmFzZSA9IGRldm1fcGxhdGZvcm1faW9yZW1hcF9yZXNvdXJjZShwZGV2LCAwKTsKKwlpZiAoSVNf
RVJSKGJhc2UpKQorCQlyZXR1cm4gUFRSX0VSUihiYXNlKTsKKworCWRzaS0+cmVnbWFwID0KKwkJ
ZGV2bV9yZWdtYXBfaW5pdF9tbWlvKGRzaS0+ZGV2LCBiYXNlLCAmbndsX2RzaV9yZWdtYXBfY29u
ZmlnKTsKKwlpZiAoSVNfRVJSKGRzaS0+cmVnbWFwKSkgeworCQlyZXQgPSBQVFJfRVJSKGRzaS0+
cmVnbWFwKTsKKwkJRFJNX0RFVl9FUlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byBjcmVhdGUgTldM
IERTSSByZWdtYXA6ICVkXG4iLAorCQkJICAgICAgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisK
Kwlkc2ktPmlycSA9IHBsYXRmb3JtX2dldF9pcnEocGRldiwgMCk7CisJaWYgKGRzaS0+aXJxIDwg
MCkgeworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGdldCBkZXZpY2UgSVJR
OiAlZFxuIiwKKwkJCSAgICAgIGRzaS0+aXJxKTsKKwkJcmV0dXJuIGRzaS0+aXJxOworCX0KKwor
CWRzaS0+cnN0YyA9IGRldm1fcmVzZXRfY29udHJvbF9hcnJheV9nZXQoZHNpLT5kZXYsIGZhbHNl
LCB0cnVlKTsKKwlpZiAoSVNfRVJSKGRzaS0+cnN0YykpIHsKKwkJcmV0ID0gUFRSX0VSUihkc2kt
PnJzdGMpOworCQlpZiAocmV0ICE9IC1FUFJPQkVfREVGRVIpCisJCQlEUk1fREVWX0VSUk9SKGRz
aS0+ZGV2LCAiRmFpbGVkIHRvIGdldCByZXNldHM6ICVkXG4iLAorCQkJCSAgICAgIHJldCk7CisJ
CXJldHVybiByZXQ7CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgaW14OG1xX2Rz
aV9zZWxlY3RfaW5wdXQoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlzdHJ1Y3QgZGV2aWNlX25v
ZGUgKnJlbW90ZTsKKwl1MzIgdXNlX2Rjc3MgPSAxOworCWludCByZXQ7CisKKwlyZW1vdGUgPSBv
Zl9ncmFwaF9nZXRfcmVtb3RlX25vZGUoZHNpLT5kZXYtPm9mX25vZGUsIDAsCisJCQkJCSAgTldM
X0RTSV9FTkRQT0lOVF9MQ0RJRik7CisJaWYgKHJlbW90ZSkgeworCQl1c2VfZGNzcyA9IDA7CisJ
fSBlbHNlIHsKKwkJcmVtb3RlID0gb2ZfZ3JhcGhfZ2V0X3JlbW90ZV9ub2RlKGRzaS0+ZGV2LT5v
Zl9ub2RlLCAwLAorCQkJCQkJICBOV0xfRFNJX0VORFBPSU5UX0RDU1MpOworCQlpZiAoIXJlbW90
ZSkgeworCQkJRFJNX0RFVl9FUlJPUihkc2ktPmRldiwKKwkJCQkgICAgICAiTm8gdmFsaWQgaW5w
dXQgZW5kcG9pbnQgZm91bmRcbiIpOworCQkJcmV0dXJuIC1FSU5WQUw7CisJCX0KKwl9CisKKwlE
Uk1fREVWX0lORk8oZHNpLT5kZXYsICJVc2luZyAlcyBhcyBpbnB1dCBzb3VyY2VcbiIsCisJCSAg
ICAgKHVzZV9kY3NzKSA/ICJEQ1NTIiA6ICJMQ0RJRiIpOworCXJldCA9IG11eF9jb250cm9sX3Ry
eV9zZWxlY3QoZHNpLT5tdXgsIHVzZV9kY3NzKTsKKwlpZiAocmV0IDwgMCkKKwkJRFJNX0RFVl9F
UlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byBzZWxlY3QgaW5wdXQ6ICVkXG4iLCByZXQpOworCisJ
b2Zfbm9kZV9wdXQocmVtb3RlKTsKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IGlteDht
cV9kc2lfZGVzZWxlY3RfaW5wdXQoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlpbnQgcmV0Owor
CisJcmV0ID0gbXV4X2NvbnRyb2xfZGVzZWxlY3QoZHNpLT5tdXgpOworCWlmIChyZXQgPCAwKQor
CQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGRlc2VsZWN0IGlucHV0OiAlZFxu
IiwgcmV0KTsKKworCXJldHVybiByZXQ7Cit9CisKKworc3RhdGljIGludCBpbXg4bXFfZHNpX3Bv
d2Vyb24oc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlpbnQgcmV0ID0gMDsKKworCS8qIG90aGVy
d2lzZSB0aGUgZGlzcGxheSBzdGF5cyBibGFuayAqLworCXVzbGVlcF9yYW5nZSgyMDAsIDMwMCk7
CisKKwlpZiAoZHNpLT5yc3RjKQorCQlyZXQgPSByZXNldF9jb250cm9sX2RlYXNzZXJ0KGRzaS0+
cnN0Yyk7CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IGlteDhtcV9kc2lfcG93ZXJv
ZmYoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlpbnQgcmV0ID0gMDsKKworCWlmIChkc2ktPnJz
dGMpCisJCXJldCA9IHJlc2V0X2NvbnRyb2xfYXNzZXJ0KGRzaS0+cnN0Yyk7CisJcmV0dXJuIHJl
dDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fYnJpZGdlX3RpbWluZ3MgbndsX2RzaV90
aW1pbmdzID0geworCS5pbnB1dF9idXNfZmxhZ3MgPSBEUk1fQlVTX0ZMQUdfREVfTE9XLAorfTsK
Kworc3RhdGljIGNvbnN0IHN0cnVjdCBud2xfZHNpX3BsYXRmb3JtX2RhdGEgaW14OG1xX2RldiA9
IHsKKwkucG93ZXJvbiA9ICZpbXg4bXFfZHNpX3Bvd2Vyb24sCisJLnBvd2Vyb2ZmID0gJmlteDht
cV9kc2lfcG93ZXJvZmYsCisJLnNlbGVjdF9pbnB1dCA9ICZpbXg4bXFfZHNpX3NlbGVjdF9pbnB1
dCwKKwkuZGVzZWxlY3RfaW5wdXQgPSAmaW14OG1xX2RzaV9kZXNlbGVjdF9pbnB1dCwKKwkuY2xr
X2NvbmZpZyA9IHsKKwkJeyAuaWQgPSBOV0xfRFNJX0NMS19DT1JFLCAucHJlc2VudCA9IHRydWUg
fSwKKwl9LAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgbndsX2RzaV9k
dF9pZHNbXSA9IHsKKwl7IC5jb21wYXRpYmxlID0gImZzbCxpbXg4bXEtbndsLWRzaSIsIC5kYXRh
ID0gJmlteDhtcV9kZXYsIH0sCisJeyAvKiBzZW50aW5lbCAqLyB9Cit9OworTU9EVUxFX0RFVklD
RV9UQUJMRShvZiwgbndsX2RzaV9kdF9pZHMpOworCitzdGF0aWMgY29uc3Qgc3RydWN0IHNvY19k
ZXZpY2VfYXR0cmlidXRlIG53bF9kc2lfcXVpcmtzX21hdGNoW10gPSB7CisJeyAuc29jX2lkID0g
ImkuTVg4TVEiLCAucmV2aXNpb24gPSAiMi4wIiwKKwkgIC5kYXRhID0gKHZvaWQgKilFMTE0MThf
SFNfTU9ERV9RVUlSSyB9LAorCXsgLyogc2VudGluZWwuICovIH0sCit9OworCitzdGF0aWMgaW50
IG53bF9kc2lfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKK3sKKwlzdHJ1Y3Qg
ZGV2aWNlICpkZXYgPSAmcGRldi0+ZGV2OworCWNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgKm9m
X2lkID0gb2ZfbWF0Y2hfZGV2aWNlKG53bF9kc2lfZHRfaWRzLCBkZXYpOworCWNvbnN0IHN0cnVj
dCBud2xfZHNpX3BsYXRmb3JtX2RhdGEgKnBkYXRhID0gb2ZfaWQtPmRhdGE7CisJY29uc3Qgc3Ry
dWN0IHNvY19kZXZpY2VfYXR0cmlidXRlICphdHRyOworCXN0cnVjdCBud2xfZHNpICpkc2k7CisJ
aW50IHJldDsKKworCWRzaSA9IGRldm1fa3phbGxvYyhkZXYsIHNpemVvZigqZHNpKSwgR0ZQX0tF
Uk5FTCk7CisJaWYgKCFkc2kpCisJCXJldHVybiAtRU5PTUVNOworCisJZHNpLT5kZXYgPSBkZXY7
CisJZHNpLT5wZGF0YSA9IHBkYXRhOworCisJcmV0ID0gbndsX2RzaV9wYXJzZV9kdChkc2kpOwor
CWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwlyZXQgPSBkZXZtX3JlcXVlc3RfaXJxKGRldiwg
ZHNpLT5pcnEsIG53bF9kc2lfaXJxX2hhbmRsZXIsIDAsCisJCQkgICAgICAgZGV2X25hbWUoZGV2
KSwgZHNpKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRldiwgIkZhaWxlZCB0
byByZXF1ZXN0IElSUSAlZDogJWRcbiIsIGRzaS0+aXJxLAorCQkJICAgICAgcmV0KTsKKwkJcmV0
dXJuIHJldDsKKwl9CisKKwlkc2ktPmRzaV9ob3N0Lm9wcyA9ICZud2xfZHNpX2hvc3Rfb3BzOwor
CWRzaS0+ZHNpX2hvc3QuZGV2ID0gZGV2OworCXJldCA9IG1pcGlfZHNpX2hvc3RfcmVnaXN0ZXIo
JmRzaS0+ZHNpX2hvc3QpOworCWlmIChyZXQpIHsKKwkJRFJNX0RFVl9FUlJPUihkZXYsICJGYWls
ZWQgdG8gcmVnaXN0ZXIgTUlQSSBob3N0OiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9
CisKKwlhdHRyID0gc29jX2RldmljZV9tYXRjaChud2xfZHNpX3F1aXJrc19tYXRjaCk7CisJaWYg
KGF0dHIpCisJCWRzaS0+cXVpcmtzID0gKHVpbnRwdHJfdClhdHRyLT5kYXRhOworCisJZHNpLT5i
cmlkZ2UuZHJpdmVyX3ByaXZhdGUgPSBkc2k7CisJZHNpLT5icmlkZ2UuZnVuY3MgPSAmbndsX2Rz
aV9icmlkZ2VfZnVuY3M7CisJZHNpLT5icmlkZ2Uub2Zfbm9kZSA9IGRldi0+b2Zfbm9kZTsKKwlk
c2ktPmJyaWRnZS50aW1pbmdzID0gJm53bF9kc2lfdGltaW5nczsKKworCWRldl9zZXRfZHJ2ZGF0
YShkZXYsIGRzaSk7CisJcG1fcnVudGltZV9lbmFibGUoZGV2KTsKKwlyZXR1cm4gMDsKK30KKwor
c3RhdGljIGludCBud2xfZHNpX3JlbW92ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQor
eworCXN0cnVjdCBud2xfZHNpICpkc2kgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKKwor
CW1pcGlfZHNpX2hvc3RfdW5yZWdpc3RlcigmZHNpLT5kc2lfaG9zdCk7CisJcG1fcnVudGltZV9k
aXNhYmxlKCZwZGV2LT5kZXYpOworCXJldHVybiAwOworfQorCitzdGF0aWMgc3RydWN0IHBsYXRm
b3JtX2RyaXZlciBud2xfZHNpX2RyaXZlciA9IHsKKwkucHJvYmUJCT0gbndsX2RzaV9wcm9iZSwK
KwkucmVtb3ZlCQk9IG53bF9kc2lfcmVtb3ZlLAorCS5kcml2ZXIJCT0geworCQkub2ZfbWF0Y2hf
dGFibGUgPSBud2xfZHNpX2R0X2lkcywKKwkJLm5hbWUJPSBEUlZfTkFNRSwKKwl9LAorfTsKKwor
bW9kdWxlX3BsYXRmb3JtX2RyaXZlcihud2xfZHNpX2RyaXZlcik7CisKK01PRFVMRV9BVVRIT1Io
Ik5YUCBTZW1pY29uZHVjdG9yIik7CitNT0RVTEVfQVVUSE9SKCJQdXJpc20gU1BDIik7CitNT0RV
TEVfREVTQ1JJUFRJT04oIk5vcnRod2VzdCBMb2dpYyBNSVBJLURTSSBkcml2ZXIiKTsKK01PRFVM
RV9MSUNFTlNFKCJHUEwiKTsgLyogR1BMdjIgb3IgbGF0ZXIgKi8KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS5oIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wt
ZHNpLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5hMjQ3YThhMTFj
N2MKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuaApA
QCAtMCwwICsxLDE0NCBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjArICov
CisvKgorICogTldMIE1JUEkgRFNJIGhvc3QgZHJpdmVyCisgKgorICogQ29weXJpZ2h0IChDKSAy
MDE3IE5YUAorICogQ29weXJpZ2h0IChDKSAyMDE5IFB1cmlzbSBTUEMKKyAqLworI2lmbmRlZiBf
X05XTF9EU0lfSF9fCisjZGVmaW5lIF9fTldMX0RTSV9IX18KKworLyogRFNJIEhPU1QgcmVnaXN0
ZXJzICovCisjZGVmaW5lIE5XTF9EU0lfQ0ZHX05VTV9MQU5FUwkJCTB4MAorI2RlZmluZSBOV0xf
RFNJX0NGR19OT05DT05USU5VT1VTX0NMSwkJMHg0CisjZGVmaW5lIE5XTF9EU0lfQ0ZHX1RfUFJF
CQkJMHg4CisjZGVmaW5lIE5XTF9EU0lfQ0ZHX1RfUE9TVAkJCTB4YworI2RlZmluZSBOV0xfRFNJ
X0NGR19UWF9HQVAJCQkweDEwCisjZGVmaW5lIE5XTF9EU0lfQ0ZHX0FVVE9JTlNFUlRfRU9UUAkJ
MHgxNAorI2RlZmluZSBOV0xfRFNJX0NGR19FWFRSQV9DTURTX0FGVEVSX0VPVFAJMHgxOAorI2Rl
ZmluZSBOV0xfRFNJX0NGR19IVFhfVE9fQ09VTlQJCTB4MWMKKyNkZWZpbmUgTldMX0RTSV9DRkdf
TFJYX0hfVE9fQ09VTlQJCTB4MjAKKyNkZWZpbmUgTldMX0RTSV9DRkdfQlRBX0hfVE9fQ09VTlQJ
CTB4MjQKKyNkZWZpbmUgTldMX0RTSV9DRkdfVFdBS0VVUAkJCTB4MjgKKyNkZWZpbmUgTldMX0RT
SV9DRkdfU1RBVFVTX09VVAkJCTB4MmMKKyNkZWZpbmUgTldMX0RTSV9SWF9FUlJPUl9TVEFUVVMJ
CQkweDMwCisKKy8qIERTSSBEUEkgcmVnaXN0ZXJzICovCisjZGVmaW5lIE5XTF9EU0lfUElYRUxf
UEFZTE9BRF9TSVpFCQkweDIwMAorI2RlZmluZSBOV0xfRFNJX1BJWEVMX0ZJRk9fU0VORF9MRVZF
TAkJMHgyMDQKKyNkZWZpbmUgTldMX0RTSV9JTlRFUkZBQ0VfQ09MT1JfQ09ESU5HCQkweDIwOAor
I2RlZmluZSBOV0xfRFNJX1BJWEVMX0ZPUk1BVAkJCTB4MjBjCisjZGVmaW5lIE5XTF9EU0lfVlNZ
TkNfUE9MQVJJVFkJCQkweDIxMAorI2RlZmluZSBOV0xfRFNJX1ZTWU5DX1BPTEFSSVRZX0FDVElW
RV9MT1cJMAorI2RlZmluZSBOV0xfRFNJX1ZTWU5DX1BPTEFSSVRZX0FDVElWRV9ISUdICUJJVCgx
KQorCisjZGVmaW5lIE5XTF9EU0lfSFNZTkNfUE9MQVJJVFkJCQkweDIxNAorI2RlZmluZSBOV0xf
RFNJX0hTWU5DX1BPTEFSSVRZX0FDVElWRV9MT1cJMAorI2RlZmluZSBOV0xfRFNJX0hTWU5DX1BP
TEFSSVRZX0FDVElWRV9ISUdICUJJVCgxKQorCisjZGVmaW5lIE5XTF9EU0lfVklERU9fTU9ERQkJ
CTB4MjE4CisjZGVmaW5lIE5XTF9EU0lfSEZQCQkJCTB4MjFjCisjZGVmaW5lIE5XTF9EU0lfSEJQ
CQkJCTB4MjIwCisjZGVmaW5lIE5XTF9EU0lfSFNBCQkJCTB4MjI0CisjZGVmaW5lIE5XTF9EU0lf
RU5BQkxFX01VTFRfUEtUUwkJMHgyMjgKKyNkZWZpbmUgTldMX0RTSV9WQlAJCQkJMHgyMmMKKyNk
ZWZpbmUgTldMX0RTSV9WRlAJCQkJMHgyMzAKKyNkZWZpbmUgTldMX0RTSV9CTExQX01PREUJCQkw
eDIzNAorI2RlZmluZSBOV0xfRFNJX1VTRV9OVUxMX1BLVF9CTExQCQkweDIzOAorI2RlZmluZSBO
V0xfRFNJX1ZBQ1RJVkUJCQkJMHgyM2MKKyNkZWZpbmUgTldMX0RTSV9WQwkJCQkweDI0MAorCisv
KiBEU0kgQVBCIFBLVCBjb250cm9sICovCisjZGVmaW5lIE5XTF9EU0lfVFhfUEFZTE9BRAkJCTB4
MjgwCisjZGVmaW5lIE5XTF9EU0lfUEtUX0NPTlRST0wJCQkweDI4NAorI2RlZmluZSBOV0xfRFNJ
X1NFTkRfUEFDS0VUCQkJMHgyODgKKyNkZWZpbmUgTldMX0RTSV9QS1RfU1RBVFVTCQkJMHgyOGMK
KyNkZWZpbmUgTldMX0RTSV9QS1RfRklGT19XUl9MRVZFTAkJMHgyOTAKKyNkZWZpbmUgTldMX0RT
SV9QS1RfRklGT19SRF9MRVZFTAkJMHgyOTQKKyNkZWZpbmUgTldMX0RTSV9SWF9QQVlMT0FECQkJ
MHgyOTgKKyNkZWZpbmUgTldMX0RTSV9SWF9QS1RfSEVBREVSCQkJMHgyOWMKKworLyogRFNJIElS
USBoYW5kbGluZyAqLworI2RlZmluZSBOV0xfRFNJX0lSUV9TVEFUVVMJCQkweDJhMAorI2RlZmlu
ZSBOV0xfRFNJX1NNX05PVF9JRExFCQkJQklUKDApCisjZGVmaW5lIE5XTF9EU0lfVFhfUEtUX0RP
TkUJCQlCSVQoMSkKKyNkZWZpbmUgTldMX0RTSV9EUEhZX0RJUkVDVElPTgkJCUJJVCgyKQorI2Rl
ZmluZSBOV0xfRFNJX1RYX0ZJRk9fT1ZGTFcJCQlCSVQoMykKKyNkZWZpbmUgTldMX0RTSV9UWF9G
SUZPX1VERkxXCQkJQklUKDQpCisjZGVmaW5lIE5XTF9EU0lfUlhfRklGT19PVkZMVwkJCUJJVCg1
KQorI2RlZmluZSBOV0xfRFNJX1JYX0ZJRk9fVURGTFcJCQlCSVQoNikKKyNkZWZpbmUgTldMX0RT
SV9SWF9QS1RfSERSX1JDVkQJCQlCSVQoNykKKyNkZWZpbmUgTldMX0RTSV9SWF9QS1RfUEFZTE9B
RF9EQVRBX1JDVkQJQklUKDgpCisjZGVmaW5lIE5XTF9EU0lfQlRBX1RJTUVPVVQJCQlCSVQoMjkp
CisjZGVmaW5lIE5XTF9EU0lfTFBfUlhfVElNRU9VVAkJCUJJVCgzMCkKKyNkZWZpbmUgTldMX0RT
SV9IU19UWF9USU1FT1VUCQkJQklUKDMxKQorCisjZGVmaW5lIE5XTF9EU0lfSVJRX1NUQVRVUzIJ
CQkweDJhNAorI2RlZmluZSBOV0xfRFNJX1NJTkdMRV9CSVRfRUNDX0VSUgkJQklUKDApCisjZGVm
aW5lIE5XTF9EU0lfTVVMVElfQklUX0VDQ19FUlIJCUJJVCgxKQorI2RlZmluZSBOV0xfRFNJX0NS
Q19FUlIJCQkJQklUKDIpCisKKyNkZWZpbmUgTldMX0RTSV9JUlFfTUFTSwkJCTB4MmE4CisjZGVm
aW5lIE5XTF9EU0lfU01fTk9UX0lETEVfTUFTSwkJQklUKDApCisjZGVmaW5lIE5XTF9EU0lfVFhf
UEtUX0RPTkVfTUFTSwkJQklUKDEpCisjZGVmaW5lIE5XTF9EU0lfRFBIWV9ESVJFQ1RJT05fTUFT
SwkJQklUKDIpCisjZGVmaW5lIE5XTF9EU0lfVFhfRklGT19PVkZMV19NQVNLCQlCSVQoMykKKyNk
ZWZpbmUgTldMX0RTSV9UWF9GSUZPX1VERkxXX01BU0sJCUJJVCg0KQorI2RlZmluZSBOV0xfRFNJ
X1JYX0ZJRk9fT1ZGTFdfTUFTSwkJQklUKDUpCisjZGVmaW5lIE5XTF9EU0lfUlhfRklGT19VREZM
V19NQVNLCQlCSVQoNikKKyNkZWZpbmUgTldMX0RTSV9SWF9QS1RfSERSX1JDVkRfTUFTSwkJQklU
KDcpCisjZGVmaW5lIE5XTF9EU0lfUlhfUEtUX1BBWUxPQURfREFUQV9SQ1ZEX01BU0sJQklUKDgp
CisjZGVmaW5lIE5XTF9EU0lfQlRBX1RJTUVPVVRfTUFTSwkJQklUKDI5KQorI2RlZmluZSBOV0xf
RFNJX0xQX1JYX1RJTUVPVVRfTUFTSwkJQklUKDMwKQorI2RlZmluZSBOV0xfRFNJX0hTX1RYX1RJ
TUVPVVRfTUFTSwkJQklUKDMxKQorCisjZGVmaW5lIE5XTF9EU0lfSVJRX01BU0syCQkJMHgyYWMK
KyNkZWZpbmUgTldMX0RTSV9TSU5HTEVfQklUX0VDQ19FUlJfTUFTSwkJQklUKDApCisjZGVmaW5l
IE5XTF9EU0lfTVVMVElfQklUX0VDQ19FUlJfTUFTSwkJQklUKDEpCisjZGVmaW5lIE5XTF9EU0lf
Q1JDX0VSUl9NQVNLCQkJQklUKDIpCisKKy8qCisgKiBQS1RfQ09OVFJPTCBmb3JtYXQ6CisgKiBb
MTU6IDBdIC0gd29yZCBjb3VudAorICogWzE3OjE2XSAtIHZpcnR1YWwgY2hhbm5lbAorICogWzIz
OjE4XSAtIGRhdGEgdHlwZQorICogWzI0XQkgICAtIExQIG9yIEhTIHNlbGVjdCAoMCAtIExQLCAx
IC0gSFMpCisgKiBbMjVdCSAgIC0gcGVyZm9ybSBCVEEgYWZ0ZXIgcGFja2V0IGlzIHNlbnQKKyAq
IFsyNl0JICAgLSBwZXJmb3JtIEJUQSBvbmx5LCBubyBwYWNrZXQgdHgKKyAqLworI2RlZmluZSBO
V0xfRFNJX1dDKHgpCQlGSUVMRF9QUkVQKEdFTk1BU0soMTUsIDApLCAoeCkpCisjZGVmaW5lIE5X
TF9EU0lfVFhfVkMoeCkJRklFTERfUFJFUChHRU5NQVNLKDE3LCAxNiksICh4KSkKKyNkZWZpbmUg
TldMX0RTSV9UWF9EVCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjMsIDE4KSwgKHgpKQorI2RlZmlu
ZSBOV0xfRFNJX0hTX1NFTCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjQsIDI0KSwgKHgpKQorI2Rl
ZmluZSBOV0xfRFNJX0JUQV9UWCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjUsIDI1KSwgKHgpKQor
I2RlZmluZSBOV0xfRFNJX0JUQV9OT19UWCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjYsIDI2KSwg
KHgpKQorCisvKgorICogUlhfUEtUX0hFQURFUiBmb3JtYXQ6CisgKiBbMTU6IDBdIC0gd29yZCBj
b3VudAorICogWzIxOjE2XSAtIGRhdGEgdHlwZQorICogWzIzOjIyXSAtIHZpcnR1YWwgY2hhbm5l
bAorICovCisjZGVmaW5lIE5XTF9EU0lfUlhfRFQoeCkJRklFTERfR0VUKEdFTk1BU0soMjEsIDE2
KSwgKHgpKQorI2RlZmluZSBOV0xfRFNJX1JYX1ZDKHgpCUZJRUxEX0dFVChHRU5NQVNLKDIzLCAy
MiksICh4KSkKKworLyogRFNJIFZpZGVvIG1vZGUgKi8KKyNkZWZpbmUgTldMX0RTSV9WTV9CVVJT
VF9NT0RFX1dJVEhfU1lOQ19QVUxTRVMJCTAKKyNkZWZpbmUgTldMX0RTSV9WTV9OT05fQlVSU1Rf
TU9ERV9XSVRIX1NZTkNfRVZFTlRTCUJJVCgwKQorI2RlZmluZSBOV0xfRFNJX1ZNX0JVUlNUX01P
REUJCQkJQklUKDEpCisKKy8qICogRFBJIGNvbG9yIGNvZGluZyAqLworI2RlZmluZSBOV0xfRFNJ
X0RQSV8xNl9CSVRfNTY1X1BBQ0tFRAkwCisjZGVmaW5lIE5XTF9EU0lfRFBJXzE2X0JJVF81NjVf
QUxJR05FRAkxCisjZGVmaW5lIE5XTF9EU0lfRFBJXzE2X0JJVF81NjVfU0hJRlRFRAkyCisjZGVm
aW5lIE5XTF9EU0lfRFBJXzE4X0JJVF9QQUNLRUQJMworI2RlZmluZSBOV0xfRFNJX0RQSV8xOF9C
SVRfQUxJR05FRAk0CisjZGVmaW5lIE5XTF9EU0lfRFBJXzI0X0JJVAkJNQorCisvKiAqIERQSSBQ
aXhlbCBmb3JtYXQgKi8KKyNkZWZpbmUgTldMX0RTSV9QSVhFTF9GT1JNQVRfMTYgIDAKKyNkZWZp
bmUgTldMX0RTSV9QSVhFTF9GT1JNQVRfMTggIEJJVCgwKQorI2RlZmluZSBOV0xfRFNJX1BJWEVM
X0ZPUk1BVF8xOEwgQklUKDEpCisjZGVmaW5lIE5XTF9EU0lfUElYRUxfRk9STUFUXzI0ICAoQklU
KDApIHwgQklUKDEpKQorCisjZW5kaWYgLyogX19OV0xfRFNJX0hfXyAqLwotLSAKMi4yMy4wCgoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVs
IG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
