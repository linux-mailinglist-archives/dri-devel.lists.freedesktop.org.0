Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6A8A1620F3
	for <lists+dri-devel@lfdr.de>; Mon,  8 Jul 2019 16:56:47 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2765589E19;
	Mon,  8 Jul 2019 14:56:44 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 93CB989E14
 for <dri-devel@lists.freedesktop.org>; Mon,  8 Jul 2019 14:56:41 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id n4so17516106wrs.3
 for <dri-devel@lists.freedesktop.org>; Mon, 08 Jul 2019 07:56:41 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=Qks6huK9PjJ7axz52EWgNZCOtNEhVZbSxesN0cPqE5g=;
 b=c08XCHI6mHiQN/IukzO80gjECSmdA55oHDBI1tfGJdYDJPIE1cucdMH9Z/28ZU27iq
 BiH8DfHcPnLQSV2KGDoVnVoCOeAJOLrEgO9g1+AxNepiOFwhN4Se0jeioWDjcEUZvAUb
 8tl9e6fta+xcZDO0AcRKLtyco0lpDAfpRh6EtGUx9orov/+rm58XIOjBRTEYg73ZmxMe
 hNBmgC+u4f8hFNU0chcRM9gj7PDDxwsXPkNQiycc2SbaSEPKTmhjKXctjyfZN45TX+We
 t+FzTa9JYHOzYEQfqJqBtwk1oKKxafjpFE9VfmbnqhwWhQvVUogRDavRMHH0PVL4OdZQ
 b9BQ==
X-Gm-Message-State: APjAAAXtekWaNSt6oaq5diyXvPWcyhUCxYTu4dFi5Vs4ZQvrgs/mGA+Q
 SKnxaKw32fnXa9cmPj3lWP1Xxw==
X-Google-Smtp-Source: APXvYqyCQ5Qs2d8AWgSDe31YNLghM90udICUq4+rAc+I4xIfponO0N4QRio/daOLAczwi/JzORanFw==
X-Received: by 2002:adf:eb06:: with SMTP id s6mr19940685wrn.151.1562597800156; 
 Mon, 08 Jul 2019 07:56:40 -0700 (PDT)
Received: from e430.riomail.cz (188-175-152-238.client.rionet.cz.
 [188.175.152.238])
 by smtp.gmail.com with ESMTPSA id f70sm11887595wme.22.2019.07.08.07.56.39
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Mon, 08 Jul 2019 07:56:39 -0700 (PDT)
From: Josef Lusticky <josef@lusticky.cz>
To: sam@ravnborg.org, robh@kernel.org, dri-devel@lists.freedesktop.org,
 devicetree@vger.kernel.org
Subject: [PATCH v2 2/2] drm/panel: Add Ilitek ILI9341 parallel RGB panel driver
Date: Mon,  8 Jul 2019 16:56:18 +0200
Message-Id: <20190708145618.26031-3-josef@lusticky.cz>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190708145618.26031-1-josef@lusticky.cz>
References: <20190304125033.28841-1-josef@lusticky.cz>
 <20190708145618.26031-1-josef@lusticky.cz>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=lusticky.cz; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=Qks6huK9PjJ7axz52EWgNZCOtNEhVZbSxesN0cPqE5g=;
 b=qw+5vHURgVqu0/D/7NqQwSOlNOEDd6uHGo7IpQXK7eiQWAV+HMvfxHpk44kgoLNf9G
 fguxglf/7pCP655ZwCPFIIOrbTqcP+frS3Lz+HpPo8+XeRzG8nI/GvvRc3kU2il+R4Lg
 ubW74Q9k1mszBzpxTYTdUp0bxcYr+I51pPy5yPoaekW2EYymaNdcYY6xzxJBABGrF/lQ
 0mZIvj4OP5IcmcWZUYhgt0fIGmq50J75Tsd/SW/g0Qa45ja0rkQUYmRQ0Cymd+s5BoVr
 Rzlx2mhnSB6ylHk1B80qWwDbDWPTmv1hn9JATGr5KrhRHLSNHKaQ15Rky8904lyi3qTM
 H51Q==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: airlied@linux.ie, thierry.reding@gmail.com,
 Josef Lusticky <josef@lusticky.cz>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIGRyaXZlciBmb3IgSWxpdGVrIElMSTkzNDEgcGFuZWxzIGluIHBhcmFsbGVsIFJHQiBtb2Rl
CgpTaWduZWQtb2ZmLWJ5OiBKb3NlZiBMdXN0aWNreSA8am9zZWZAbHVzdGlja3kuY3o+Ci0tLQog
TUFJTlRBSU5FUlMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgIDYgKwogZHJp
dmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcgICAgICAgICAgICAgICAgfCAgIDkgKwogZHJpdmVy
cy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlICAgICAgICAgICAgICAgfCAgIDEgKwogZHJpdmVycy9n
cHUvZHJtL3BhbmVsL3BhbmVsLWlsaXRlay1pbGk5MzQxLmMgfCAyOTEgKysrKysrKysrKysrKysr
KysrKwogNCBmaWxlcyBjaGFuZ2VkLCAzMDcgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAw
NjQ0IGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1pbGl0ZWstaWxpOTM0MS5jCgpkaWZmIC0t
Z2l0IGEvTUFJTlRBSU5FUlMgYi9NQUlOVEFJTkVSUwppbmRleCAwYTc2NzE2ODc0YmQuLmEzNWJm
NTZjYzAxOCAxMDA2NDQKLS0tIGEvTUFJTlRBSU5FUlMKKysrIGIvTUFJTlRBSU5FUlMKQEAgLTUw
MjgsNiArNTAyOCwxMiBAQCBTOglNYWludGFpbmVkCiBGOglkcml2ZXJzL2dwdS9kcm0vdGlueWRy
bS9oeDgzNTdkLmMKIEY6CURvY3VtZW50YXRpb24vZGV2aWNldHJlZS9iaW5kaW5ncy9kaXNwbGF5
L2hpbWF4LGh4ODM1N2QudHh0CiAKK0RSTSBEUklWRVIgRk9SIElMSVRFSyBJTEk5MzQxIFBBTkVM
UworTToJSm9zZWYgTHVzdGlja3kgPGpvc2VmQGx1c3RpY2t5LmN6PgorUzoJTWFpbnRhaW5lZAor
RjoJZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWlsaXRlay1pbGk5MzQxLmMKK0Y6CURvY3Vt
ZW50YXRpb24vZGV2aWNldHJlZS9iaW5kaW5ncy9kaXNwbGF5L3BhbmVsL2lsaXRlayxpbGk5MzQx
LnR4dAorCiBEUk0gRFJJVkVSIEZPUiBJTlRFTCBJODEwIFZJREVPIENBUkRTCiBTOglPcnBoYW4g
LyBPYnNvbGV0ZQogRjoJZHJpdmVycy9ncHUvZHJtL2k4MTAvCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vcGFuZWwvS2NvbmZpZyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnCmlu
ZGV4IGVhZWNkNDBjYzMyZS4uMzRhNWIyNjJmOTI0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vcGFuZWwvS2NvbmZpZworKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvS2NvbmZpZwpAQCAt
NTYsNiArNTYsMTUgQEAgY29uZmlnIERSTV9QQU5FTF9JTElURUtfSUw5MzIyCiAJICBTYXkgWSBo
ZXJlIGlmIHlvdSB3YW50IHRvIGVuYWJsZSBzdXBwb3J0IGZvciBJbGl0ZWsgSUw5MzIyCiAJICBR
VkdBICgzMjB4MjQwKSBSR0IsIFlVViBhbmQgSVRVLVQgQlQuNjU2IHBhbmVscy4KIAorY29uZmln
IERSTV9QQU5FTF9JTElURUtfSUxJOTM0MQorCXRyaXN0YXRlICJJbGl0ZWsgSUxJOTM0MSAyNDB4
MzIwIHBhbmVscyIKKwlkZXBlbmRzIG9uIE9GICYmIFNQSQorCWRlcGVuZHMgb24gQkFDS0xJR0hU
X0NMQVNTX0RFVklDRQorCXNlbGVjdCBUSU5ZRFJNX01JUElfREJJCisJaGVscAorCSAgU2F5IFkg
aGVyZSBpZiB5b3Ugd2FudCB0byBlbmFibGUgc3VwcG9ydCBmb3IgSWxpdGVrIElMSTkzNDEKKwkg
IFFWR0EgKDI0MHgzMjApIFJHQiBwYW5lbC4KKwogY29uZmlnIERSTV9QQU5FTF9JTElURUtfSUxJ
OTg4MUMKIAl0cmlzdGF0ZSAiSWxpdGVrIElMSTk4ODFDLWJhc2VkIHBhbmVscyIKIAlkZXBlbmRz
IG9uIE9GCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUgYi9kcml2
ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKaW5kZXggNjJkYWU0NWY4Zjc0Li5iYTRhMzAzYzFh
NjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQorKysgYi9kcml2
ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKQEAgLTQsNiArNCw3IEBAIG9iai0kKENPTkZJR19E
Uk1fUEFORUxfTFZEUykgKz0gcGFuZWwtbHZkcy5vCiBvYmotJChDT05GSUdfRFJNX1BBTkVMX1NJ
TVBMRSkgKz0gcGFuZWwtc2ltcGxlLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfRkVJWUFOR19G
WTA3MDI0REkyNkEzMEQpICs9IHBhbmVsLWZlaXlhbmctZnkwNzAyNGRpMjZhMzBkLm8KIG9iai0k
KENPTkZJR19EUk1fUEFORUxfSUxJVEVLX0lMOTMyMikgKz0gcGFuZWwtaWxpdGVrLWlsaTkzMjIu
bworb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9JTElURUtfSUxJOTM0MSkgKz0gcGFuZWwtaWxpdGVr
LWlsaTkzNDEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9JTElURUtfSUxJOTg4MUMpICs9IHBh
bmVsLWlsaXRlay1pbGk5ODgxYy5vCiBvYmotJChDT05GSUdfRFJNX1BBTkVMX0lOTk9MVVhfUDA3
OVpDQSkgKz0gcGFuZWwtaW5ub2x1eC1wMDc5emNhLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxf
SkRJX0xUMDcwTUUwNTAwMCkgKz0gcGFuZWwtamRpLWx0MDcwbWUwNTAwMC5vCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtaWxpdGVrLWlsaTkzNDEuYyBiL2RyaXZlcnMv
Z3B1L2RybS9wYW5lbC9wYW5lbC1pbGl0ZWstaWxpOTM0MS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAwMDAwMC4uMGM3MDBiMTcxMDI1Ci0tLSAvZGV2L251bGwKKysrIGIvZHJp
dmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWlsaXRlay1pbGk5MzQxLmMKQEAgLTAsMCArMSwyOTEg
QEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wKworLyoKKyAqIElsaXRlayBJ
TEk5MzQxIGRybV9wYW5lbCBkcml2ZXIKKyAqIDI0MFJHQngzMjAgZG90cyByZXNvbHV0aW9uIFRG
VCBMQ0QgZGlzcGxheQorICoKKyAqIFRoaXMgZHJpdmVyIHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcg
cGFuZWwgY29uZmlndXJhdGlvbnM6CisgKiAtIENvbW1hbmQgaW50ZXJmYWNlOgorICogICAgIC0g
TUlQSS1EQkkgVHlwZSAzIE9wdGlvbiAxCisgKiAgICAgICAoOS1iaXQgU1BJIHdpdGggRGF0YS9D
b21tYW5kIGJpdCAgLSBJTVszOjBdID0gMTEwMSkKKyAqICAgICAtIE1JUEktREJJIFR5cGUgMyBP
cHRpb24gMworICogICAgICAgKDgtYml0IFNQSSB3aXRoIERhdGEvQ29tbWFuZCBHUElPIC0gSU1b
MzowXSA9IDExMTApCisgKiAtIEdyYXBoaWNhbCBkYXRhIGludGVyZmFjZToKKyAqICAgICAtIE1J
UEktRFBJIDE4LWJpdCBwYXJhbGxlbCBSR0IgaW50ZXJmYWNlCisgKgorICogQ29weXJpZ2h0IChD
KSAyMDE5IEpvc2VmIEx1c3RpY2t5IDxqb3NlZkBsdXN0aWNreS5jej4KKyAqCisgKi8KKworI2lu
Y2x1ZGUgPGxpbnV4L2JhY2tsaWdodC5oPgorI2luY2x1ZGUgPGxpbnV4L2RlbGF5Lmg+CisjaW5j
bHVkZSA8bGludXgvZ3Bpby9jb25zdW1lci5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgor
I2luY2x1ZGUgPGxpbnV4L29mX2RldmljZS5oPgorI2luY2x1ZGUgPGxpbnV4L3NwaS9zcGkuaD4K
KworI2luY2x1ZGUgPHZpZGVvL21pcGlfZGlzcGxheS5oPgorCisjaW5jbHVkZSA8ZHJtL2RybV9t
b2Rlcy5oPgorI2luY2x1ZGUgPGRybS9kcm1fcGFuZWwuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX3By
aW50Lmg+CisjaW5jbHVkZSA8ZHJtL3Rpbnlkcm0vbWlwaS1kYmkuaD4KKworLyogSUxJOTM0MSBl
eHRlbmRlZCByZWdpc3RlciBzZXQgKFZlbmRvciBDb21tYW5kIFNldCkgKi8KKyNkZWZpbmUgSUxJ
OTM0MV9JRk1PREUgICAgICAgICAweEIwIC8vIGNsb2NrIHBvbGFyaXR5CisjZGVmaW5lIElMSTkz
NDFfSUZDVEwgICAgICAgICAgMHhGNiAvLyBpbnRlcmZhY2UgY29ucm9sCisjZGVmaW5lIElMSTkz
NDFfUEdBTUNUUkwgICAgICAgMHhFMCAvLyBwb3NpdGl2ZSBnYW1tYSBjb250cm9sCisjZGVmaW5l
IElMSTkzNDFfTkdBTUNUUkwgICAgICAgMHhFMSAvLyBuZWdhdGl2ZSBnYW1tYSBjb250cm9sCisK
KyNkZWZpbmUgSUxJOTM0MV9NQURDVExfTVYgICAgICBCSVQoNSkKKyNkZWZpbmUgSUxJOTM0MV9N
QURDVExfTVggICAgICBCSVQoNikKKyNkZWZpbmUgSUxJOTM0MV9NQURDVExfTVkgICAgICBCSVQo
NykKKworLyoqCisgKiBzdHJ1Y3QgaWxpOTM0MV9jb25maWcgLSB0aGUgZGlzcGxheSBzcGVjaWZp
YyBjb25maWd1cmF0aW9uCisgKiBAd2lkdGhfbW06IHBoeXNpY2FsIHBhbmVsIHdpZHRoIFttbV0K
KyAqIEBoZWlnaHRfbW06IHBoeXNpY2FsIHBhbmVsIGhlaWdodCBbbW1dCisgKi8KK3N0cnVjdCBp
bGk5MzQxX2NvbmZpZyB7CisJdTMyIHdpZHRoX21tOworCXUzMiBoZWlnaHRfbW07Cit9OworCitz
dHJ1Y3QgaWxpOTM0MSB7CisJc3RydWN0IGRybV9wYW5lbCBwYW5lbDsKKwlzdHJ1Y3QgbWlwaV9k
YmkgKm1pcGk7CisJY29uc3Qgc3RydWN0IGlsaTkzNDFfY29uZmlnICpjb25mOworfTsKKworc3Rh
dGljIGlubGluZSBzdHJ1Y3QgaWxpOTM0MSAqcGFuZWxfdG9faWxpOTM0MShzdHJ1Y3QgZHJtX3Bh
bmVsICpwYW5lbCkKK3sKKwlyZXR1cm4gY29udGFpbmVyX29mKHBhbmVsLCBzdHJ1Y3QgaWxpOTM0
MSwgcGFuZWwpOworfQorCitzdGF0aWMgaW50IGlsaTkzNDFfZGVpbml0KHN0cnVjdCBkcm1fcGFu
ZWwgKnBhbmVsLCBzdHJ1Y3QgaWxpOTM0MSAqaWxpKQoreworCW1pcGlfZGJpX2NvbW1hbmQoaWxp
LT5taXBpLCBNSVBJX0RDU19TRVRfRElTUExBWV9PRkYpOworCW1pcGlfZGJpX2NvbW1hbmQoaWxp
LT5taXBpLCBNSVBJX0RDU19FTlRFUl9TTEVFUF9NT0RFKTsKKwltc2xlZXAoNSk7CisJcmV0dXJu
IDA7Cit9CisKK3N0YXRpYyBpbnQgaWxpOTM0MV9pbml0KHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVs
LCBzdHJ1Y3QgaWxpOTM0MSAqaWxpKQoreworCS8qIEhXIC8gU1cgUmVzZXQgZGlzcGxheSBhbmQg
d2FpdCAqLworCWlmIChpbGktPm1pcGktPnJlc2V0KQorCQltaXBpX2RiaV9od19yZXNldChpbGkt
Pm1pcGkpOworCisJbWlwaV9kYmlfY29tbWFuZChpbGktPm1pcGksIE1JUElfRENTX1NPRlRfUkVT
RVQpOworCW1zbGVlcCgxMjApOworCisJLyogUG9sYXJpdHkgKi8KKwltaXBpX2RiaV9jb21tYW5k
KGlsaS0+bWlwaSwgSUxJOTM0MV9JRk1PREUsIDB4QzApOworCisJLyogSW50ZXJmYWNlIGNvbnRy
b2wgKi8KKwltaXBpX2RiaV9jb21tYW5kKGlsaS0+bWlwaSwgSUxJOTM0MV9JRkNUTCwgMHgwOSwg
MHgwMSwgMHgyNik7CisKKwkvKiBQaXhlbCBmb3JtYXQgKi8KKwltaXBpX2RiaV9jb21tYW5kKGls
aS0+bWlwaSwgTUlQSV9EQ1NfU0VUX1BJWEVMX0ZPUk1BVCwgTUlQSV9EQ1NfUElYRUxfRk1UXzE4
QklUIDw8IDQpOworCisJLyogR2FtbWEgKi8KKwltaXBpX2RiaV9jb21tYW5kKGlsaS0+bWlwaSwg
TUlQSV9EQ1NfU0VUX0dBTU1BX0NVUlZFLCAweDAxKTsKKwltaXBpX2RiaV9jb21tYW5kKGlsaS0+
bWlwaSwgSUxJOTM0MV9QR0FNQ1RSTCwKKwkJMHgwZiwgMHgzMSwgMHgyYiwgMHgwYywgMHgwZSwg
MHgwOCwgMHg0ZSwgMHhmMSwKKwkJMHgzNywgMHgwNywgMHgxMCwgMHgwMywgMHgwZSwgMHgwOSwg
MHgwMCk7CisJbWlwaV9kYmlfY29tbWFuZChpbGktPm1pcGksIElMSTkzNDFfTkdBTUNUUkwsCisJ
CTB4MDAsIDB4MGUsIDB4MTQsIDB4MDMsIDB4MTEsIDB4MDcsIDB4MzEsIDB4YzEsCisJCTB4NDgs
IDB4MDgsIDB4MGYsIDB4MGMsIDB4MzEsIDB4MzYsIDB4MGYpOworCisJLyogUm90YXRpb24gKi8K
KwltaXBpX2RiaV9jb21tYW5kKGlsaS0+bWlwaSwgTUlQSV9EQ1NfU0VUX0FERFJFU1NfTU9ERSwg
SUxJOTM0MV9NQURDVExfTVgpOworCisJLyogRXhpdCBzbGVlcCBtb2RlICovCisJbWlwaV9kYmlf
Y29tbWFuZChpbGktPm1pcGksIE1JUElfRENTX0VYSVRfU0xFRVBfTU9ERSk7CisJbXNsZWVwKDEy
MCk7CisKKwltaXBpX2RiaV9jb21tYW5kKGlsaS0+bWlwaSwgTUlQSV9EQ1NfU0VUX0RJU1BMQVlf
T04pOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgaWxpOTM0MV91bnByZXBhcmUoc3Ry
dWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJc3RydWN0IGlsaTkzNDEgKmlsaSA9IHBhbmVsX3Rv
X2lsaTkzNDEocGFuZWwpOworCisJcmV0dXJuIGlsaTkzNDFfZGVpbml0KHBhbmVsLCBpbGkpOwor
fQorCitzdGF0aWMgaW50IGlsaTkzNDFfcHJlcGFyZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkK
K3sKKwlzdHJ1Y3QgaWxpOTM0MSAqaWxpID0gcGFuZWxfdG9faWxpOTM0MShwYW5lbCk7CisJaW50
IHJldDsKKworCXJldCA9IGlsaTkzNDFfaW5pdChwYW5lbCwgaWxpKTsKKwlpZiAocmV0IDwgMCkK
KwkJaWxpOTM0MV91bnByZXBhcmUocGFuZWwpOworCXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyBp
bnQgaWxpOTM0MV9lbmFibGUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJc3RydWN0IGls
aTkzNDEgKmlsaSA9IHBhbmVsX3RvX2lsaTkzNDEocGFuZWwpOworCisJcmV0dXJuIGJhY2tsaWdo
dF9lbmFibGUoaWxpLT5taXBpLT5iYWNrbGlnaHQpOworfQorCitzdGF0aWMgaW50IGlsaTkzNDFf
ZGlzYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgaWxpOTM0MSAqaWxp
ID0gcGFuZWxfdG9faWxpOTM0MShwYW5lbCk7CisKKwlyZXR1cm4gYmFja2xpZ2h0X2Rpc2FibGUo
aWxpLT5taXBpLT5iYWNrbGlnaHQpOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9kaXNw
bGF5X21vZGUgcHJnYl8yNDB4MzIwX21vZGUgPSB7CisJLmNsb2NrID0gNjM1MCwKKworCS5oZGlz
cGxheSA9IDI0MCwKKwkuaHN5bmNfc3RhcnQgPSAyNDAgKyAxMCwKKwkuaHN5bmNfZW5kID0gMjQw
ICsgMTAgKyAxMCwKKwkuaHRvdGFsID0gMjQwICsgMTAgKyAxMCArIDIwLAorCisJLnZkaXNwbGF5
ID0gMzIwLAorCS52c3luY19zdGFydCA9IDMyMCArIDQsCisJLnZzeW5jX2VuZCA9IDMyMCArIDQg
KyAyLAorCS52dG90YWwgPSAzMjAgKyA0ICsgMiArIDIsCisKKwkuZmxhZ3MgPSBEUk1fTU9ERV9G
TEFHX05IU1lOQyB8IERSTV9NT0RFX0ZMQUdfTlZTWU5DLAorCS50eXBlID0gRFJNX01PREVfVFlQ
RV9EUklWRVIgfCBEUk1fTU9ERV9UWVBFX1BSRUZFUlJFRAorfTsKKworc3RhdGljIGludCBpbGk5
MzQxX2dldF9tb2RlcyhzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgZHJtX2Nv
bm5lY3RvciAqY29ubmVjdG9yID0gcGFuZWwtPmNvbm5lY3RvcjsKKwlzdHJ1Y3QgaWxpOTM0MSAq
aWxpID0gcGFuZWxfdG9faWxpOTM0MShwYW5lbCk7CisJc3RydWN0IGRybV9kaXNwbGF5X21vZGUg
Km1vZGU7CisKKwltb2RlID0gZHJtX21vZGVfZHVwbGljYXRlKHBhbmVsLT5kcm0sICZwcmdiXzI0
MHgzMjBfbW9kZSk7CisJaWYgKCFtb2RlKSB7CisJCURSTV9ERVZfRVJST1IocGFuZWwtPmRybS0+
ZGV2LCAiYmFkIG1vZGUgb3IgZmFpbGVkIHRvIGFkZCBtb2RlXG4iKTsKKwkJcmV0dXJuIC1FTk9N
RU07CisJfQorCisJZHJtX21vZGVfc2V0X25hbWUobW9kZSk7CisKKwltb2RlLT53aWR0aF9tbSA9
IGlsaS0+Y29uZi0+d2lkdGhfbW07CisJbW9kZS0+aGVpZ2h0X21tID0gaWxpLT5jb25mLT5oZWln
aHRfbW07CisKKwljb25uZWN0b3ItPmRpc3BsYXlfaW5mby53aWR0aF9tbSA9IG1vZGUtPndpZHRo
X21tOworCWNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLmhlaWdodF9tbSA9IG1vZGUtPmhlaWdodF9t
bTsKKwljb25uZWN0b3ItPmRpc3BsYXlfaW5mby5idXNfZmxhZ3MgfD0gRFJNX0JVU19GTEFHX0RF
X0hJR0ggfAorCQlEUk1fQlVTX0ZMQUdfUElYREFUQV9QT1NFREdFIHwgRFJNX0JVU19GTEFHX1NZ
TkNfTkVHRURHRTsKKworCWRybV9tb2RlX3Byb2JlZF9hZGQoY29ubmVjdG9yLCBtb2RlKTsKKwor
CXJldHVybiAxOyAvKiBOdW1iZXIgb2YgbW9kZXMgKi8KK30KKworc3RhdGljIGNvbnN0IHN0cnVj
dCBkcm1fcGFuZWxfZnVuY3MgaWxpOTM0MV9kcm1fZnVuY3MgPSB7CisJLmRpc2FibGUgPSBpbGk5
MzQxX2Rpc2FibGUsCisJLnVucHJlcGFyZSA9IGlsaTkzNDFfdW5wcmVwYXJlLAorCS5wcmVwYXJl
ID0gaWxpOTM0MV9wcmVwYXJlLAorCS5lbmFibGUgPSBpbGk5MzQxX2VuYWJsZSwKKwkuZ2V0X21v
ZGVzID0gaWxpOTM0MV9nZXRfbW9kZXMsCit9OworCitzdGF0aWMgaW50IGlsaTkzNDFfcHJvYmUo
c3RydWN0IHNwaV9kZXZpY2UgKnNwaSkKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmc3BpLT5k
ZXY7CisJc3RydWN0IGlsaTkzNDEgKmlsaTsKKwlzdHJ1Y3QgbWlwaV9kYmkgKm1pcGk7CisJc3Ry
dWN0IGdwaW9fZGVzYyAqZGNfZ3BpbzsKKwlpbnQgcmV0OworCisJbWlwaSA9IGRldm1fa3phbGxv
YyhkZXYsIHNpemVvZigqbWlwaSksIEdGUF9LRVJORUwpOworCWlmICghbWlwaSkKKwkJcmV0dXJu
IC1FTk9NRU07CisKKwlpbGkgPSBkZXZtX2t6YWxsb2MoZGV2LCBzaXplb2YoKmlsaSksIEdGUF9L
RVJORUwpOworCWlmICghaWxpKQorCQlyZXR1cm4gLUVOT01FTTsKKworCWlsaS0+bWlwaSA9IG1p
cGk7CisKKwlzcGlfc2V0X2RydmRhdGEoc3BpLCBpbGkpOworCisJLyoKKwkgKiBFdmVyeSBuZXcg
aW5jYXJuYXRpb24gb2YgdGhpcyBkaXNwbGF5IG11c3QgaGF2ZSBhIHVuaXF1ZQorCSAqIGRhdGEg
ZW50cnkgZm9yIHRoZSBzeXN0ZW0gaW4gdGhpcyBkcml2ZXIuCisJICovCisJaWxpLT5jb25mID0g
b2ZfZGV2aWNlX2dldF9tYXRjaF9kYXRhKGRldik7CisJaWYgKCFpbGktPmNvbmYpIHsKKwkJRFJN
X0RFVl9FUlJPUihkZXYsICJtaXNzaW5nIGRldmljZSBjb25maWd1cmF0aW9uXG4iKTsKKwkJcmV0
dXJuIC1FTk9ERVY7CisJfQorCisJaWxpLT5taXBpLT5yZXNldCA9IGRldm1fZ3Bpb2RfZ2V0X29w
dGlvbmFsKGRldiwgInJlc2V0IiwgR1BJT0RfT1VUX0hJR0gpOworCWlmIChJU19FUlIoaWxpLT5t
aXBpLT5yZXNldCkpIHsKKwkJRFJNX0RFVl9FUlJPUihkZXYsICJmYWlsZWQgdG8gZ2V0IGdwaW8g
J3Jlc2V0J1xuIik7CisJCXJldHVybiBQVFJfRVJSKGlsaS0+bWlwaS0+cmVzZXQpOworCX0KKwor
CWlsaS0+bWlwaS0+YmFja2xpZ2h0ID0gZGV2bV9vZl9maW5kX2JhY2tsaWdodChkZXYpOworCWlm
IChJU19FUlIoaWxpLT5taXBpLT5iYWNrbGlnaHQpKSB7CisJCURSTV9ERVZfRVJST1IoZGV2LCAi
ZmFpbGVkIHRvIGdldCBiYWNrbGlnaHRcbiIpOworCQlyZXR1cm4gUFRSX0VSUihpbGktPm1pcGkt
PmJhY2tsaWdodCk7CisJfQorCisJZGNfZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlvbmFsKGRl
diwgImRjIiwgR1BJT0RfT1VUX0xPVyk7CisJaWYgKElTX0VSUihkY19ncGlvKSkgeworCQlEUk1f
REVWX0VSUk9SKGRldiwgImZhaWxlZCB0byBnZXQgZ3BpbyAnZGMnXG4iKTsKKwkJcmV0dXJuIFBU
Ul9FUlIoZGNfZ3Bpbyk7CisJfQorCisJcmV0ID0gbWlwaV9kYmlfc3BpX2luaXQoc3BpLCBpbGkt
Pm1pcGksIGRjX2dwaW8pOworCWlmIChyZXQpIHsKKwkJRFJNX0RFVl9FUlJPUihkZXYsICJNSVBJ
LURCSSBTUEkgc2V0dXAgZmFpbGVkXG4iKTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlkcm1fcGFu
ZWxfaW5pdCgmaWxpLT5wYW5lbCk7CisJaWxpLT5wYW5lbC5kZXYgPSBkZXY7CisJaWxpLT5wYW5l
bC5mdW5jcyA9ICZpbGk5MzQxX2RybV9mdW5jczsKKworCXJldHVybiBkcm1fcGFuZWxfYWRkKCZp
bGktPnBhbmVsKTsKK30KKworc3RhdGljIGludCBpbGk5MzQxX3JlbW92ZShzdHJ1Y3Qgc3BpX2Rl
dmljZSAqc3BpKQoreworCXN0cnVjdCBpbGk5MzQxICppbGkgPSBzcGlfZ2V0X2RydmRhdGEoc3Bp
KTsKKworCWRybV9wYW5lbF9yZW1vdmUoJmlsaS0+cGFuZWwpOworCisJaWxpOTM0MV9kaXNhYmxl
KCZpbGktPnBhbmVsKTsKKwlpbGk5MzQxX3VucHJlcGFyZSgmaWxpLT5wYW5lbCk7CisKKwlyZXR1
cm4gMDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBpbGk5MzQxX2NvbmZpZyBkdDAyNGN0ZnRf
ZGF0YSA9IHsKKwkud2lkdGhfbW0gPSAzNywKKwkuaGVpZ2h0X21tID0gNDksCit9OworCitzdGF0
aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBpbGk5MzQxX29mX21hdGNoW10gPSB7CisJeyAu
Y29tcGF0aWJsZSA9ICJkaXNwbGF5dGVjaCxkdDAyNGN0ZnQiLCAuZGF0YSA9ICZkdDAyNGN0ZnRf
ZGF0YSB9LAorCXsgLyogc2VudGluZWwgKi8gfQorfTsKK01PRFVMRV9ERVZJQ0VfVEFCTEUob2Ys
IGlsaTkzNDFfb2ZfbWF0Y2gpOworCitzdGF0aWMgc3RydWN0IHNwaV9kcml2ZXIgaWxpOTM0MV9k
cml2ZXIgPSB7CisJLnByb2JlID0gaWxpOTM0MV9wcm9iZSwKKwkucmVtb3ZlID0gaWxpOTM0MV9y
ZW1vdmUsCisJLmRyaXZlciA9IHsKKwkJLm5hbWUgPSAicGFuZWwtaWxpdGVrLWlsaTkzNDEiLAor
CQkub2ZfbWF0Y2hfdGFibGUgPSBpbGk5MzQxX29mX21hdGNoLAorCX0sCit9OworbW9kdWxlX3Nw
aV9kcml2ZXIoaWxpOTM0MV9kcml2ZXIpOworCitNT0RVTEVfQVVUSE9SKCJKb3NlZiBMdXN0aWNr
eSA8am9zZWZAbHVzdGlja3kuY3o+Iik7CitNT0RVTEVfREVTQ1JJUFRJT04oIklMSTkzNDEgTENE
IHBhbmVsIGRyaXZlciIpOworTU9EVUxFX0xJQ0VOU0UoIkdQTCIpOwotLSAKMi4yMC4xCgpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFp
bGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
