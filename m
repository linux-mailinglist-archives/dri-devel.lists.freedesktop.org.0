Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E113038A03
	for <lists+dri-devel@lfdr.de>; Fri,  7 Jun 2019 14:19:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B18EA89DDD;
	Fri,  7 Jun 2019 12:19:06 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5A0D189DDD
 for <dri-devel@lists.freedesktop.org>; Fri,  7 Jun 2019 12:19:05 +0000 (UTC)
Received: from pendragon.ideasonboard.com (unknown
 [IPv6:2a02:a03f:44f0:8500:ca05:8177:199c:fed4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 918FDB91;
 Fri,  7 Jun 2019 14:19:03 +0200 (CEST)
Date: Fri, 7 Jun 2019 15:18:49 +0300
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Jacopo Mondi <jacopo+renesas@jmondi.org>
Subject: Re: [PATCH 14/20] drm: rcar-du: Add support for CMM
Message-ID: <20190607121849.GJ7593@pendragon.ideasonboard.com>
References: <20190606142220.1392-1-jacopo+renesas@jmondi.org>
 <20190606142220.1392-15-jacopo+renesas@jmondi.org>
 <20190607113540.GB7593@pendragon.ideasonboard.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190607113540.GB7593@pendragon.ideasonboard.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1559909943;
 bh=KA1C7M+ObNBdy6LZOUhFC85JKMIRJQ8N8E1tmKSt2oA=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=JcD6PIyrwDt5Om2g5T+WXvS12VnXUB07DFJhaZRTSGXLBp6OrOAb86Lkza0rMQeJE
 QGal0YL6HdtptEbI/v3iWdcTrpGRNzWweglk8AZI+fawycc8UW/I2JJV0XIZOm0/4n
 COo+/MoUxbhBIYYtYOg/9WrvDOd17d89o906hXPg=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: muroya@ksk.co.jp, VenkataRajesh.Kalakodima@in.bosch.com, airlied@linux.ie,
 koji.matsuoka.xm@renesas.com, dri-devel@lists.freedesktop.org,
 linux-kernel@vger.kernel.org, linux-renesas-soc@vger.kernel.org,
 kieran.bingham+renesas@ideasonboard.com,
 Harsha.ManjulaMallikarjun@in.bosch.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgSmFjb3BvLAoKTm93IHRoYXQgSSd2ZSByZWFkIHRoZSB3aG9sZSBzZXJpZXMsIGhlcmUgYXJl
IGEgZmV3IGNvbW1lbnRzLgoKT24gRnJpLCBKdW4gMDcsIDIwMTkgYXQgMDI6MzU6NDBQTSArMDMw
MCwgTGF1cmVudCBQaW5jaGFydCB3cm90ZToKPiBIaSBKYWNvcG8sCj4gCj4gVGhhbmsgeW91IGZv
ciB0aGUgcGF0Y2guCj4gCj4gT24gVGh1LCBKdW4gMDYsIDIwMTkgYXQgMDQ6MjI6MTRQTSArMDIw
MCwgSmFjb3BvIE1vbmRpIHdyb3RlOgo+ID4gQWRkIGEgZHJpdmVyIGZvciB0aGUgUi1DYXIgRGlz
cGxheSBVbml0IENvbG9yIENvcnJlY3Rpb24gTW9kdWxlLgo+ID4gCj4gPiBFYWNoIERVIG91dHB1
dCBjaGFubmVsIGlzIHByb3ZpZGVkIHdpdGggYSBDTU0gdW5pdCB0byBwZXJmb3JtIGltYWdlCj4g
PiBlbmhhbmNlbWVudCBhbmQgY29sb3IgY29ycmVjdGlvbi4KPiAKPiBJIHdvdWxkIHNheSAiT24g
bW9zdCBHZW4zIFNvQ3MsIGVhY2ggRFUgLi4uIiBhcyBWMyogU29DcyBoYXZlIG5vIENNTS4KPiAK
PiA+IAo+ID4gQWRkIHN1cHBvcnQgZm9yIENNTSB0aHJvdWdoIGEgZHJpdmVyIHRoYXQgc3VwcG9y
dHMgY29uZmlndXJhdGlvbiBvZgo+ID4gdGhlIDEtZGltZW5zaW9uYWwgTFVUIHRhYmxlLiBNb3Jl
IGFkdmFuY2VkIENNTSBmZWF0dXJlIGNvdWxkIGJlCj4gPiBpbXBsZW1lbnRlZCBvbiB0b3Agb2Yg
dGhpcyBiYXNpYyBvbmUuCj4gCj4gcy9jb3VsZCBiZS93aWxsIGJlLyA/IDotKQo+IAo+ID4gCj4g
PiBTaWduZWQtb2ZmLWJ5OiBKYWNvcG8gTW9uZGkgPGphY29wbytyZW5lc2FzQGptb25kaS5vcmc+
Cj4gPiAtLS0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9LY29uZmlnICAgIHwgICA3ICsK
PiA+ICBkcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9NYWtlZmlsZSAgIHwgICAxICsKPiA+ICBkcml2
ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2NtbS5jIHwgMTk3ICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysrCj4gPiAgZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9jbW0uaCB8ICAzOCAr
KysrKysKPiA+ICA0IGZpbGVzIGNoYW5nZWQsIDI0MyBpbnNlcnRpb25zKCspCj4gPiAgY3JlYXRl
IG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfY21tLmMKPiA+ICBjcmVh
dGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9jbW0uaAo+ID4gCj4g
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvS2NvbmZpZyBiL2RyaXZlcnMv
Z3B1L2RybS9yY2FyLWR1L0tjb25maWcKPiA+IGluZGV4IDE1Mjk4NDllMjE3ZS4uNTM5ZDIzMjc5
MGQxIDEwMDY0NAo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvS2NvbmZpZwo+ID4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvS2NvbmZpZwo+ID4gQEAgLTEzLDYgKzEzLDEz
IEBAIGNvbmZpZyBEUk1fUkNBUl9EVQo+ID4gIAkgIENob29zZSB0aGlzIG9wdGlvbiBpZiB5b3Ug
aGF2ZSBhbiBSLUNhciBjaGlwc2V0Lgo+ID4gIAkgIElmIE0gaXMgc2VsZWN0ZWQgdGhlIG1vZHVs
ZSB3aWxsIGJlIGNhbGxlZCByY2FyLWR1LWRybS4KPiA+ICAKPiA+ICtjb25maWcgRFJNX1JDQVJf
Q01NCj4gPiArCWJvb2wgIlItQ2FyIERVIENvbG9yIE1hbmFnZW1lbnQgTW9kdWxlIChDTU0pIFN1
cHBvcnQiCj4gPiArCWRlcGVuZHMgb24gRFJNICYmIE9GCj4gPiArCWRlcGVuZHMgb24gRFJNX1JD
QVJfRFUKPiA+ICsJaGVscAo+ID4gKwkgIEVuYWJsZSBzdXBwb3J0IGZvciBSLUNhciBDb2xvciBN
YW5hZ2VtZW50IE1vZHVsZSAoQ01NKS4KPiA+ICsKPiA+ICBjb25maWcgRFJNX1JDQVJfRFdfSERN
SQo+ID4gIAl0cmlzdGF0ZSAiUi1DYXIgRFUgR2VuMyBIRE1JIEVuY29kZXIgU3VwcG9ydCIKPiA+
ICAJZGVwZW5kcyBvbiBEUk0gJiYgT0YKPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
cmNhci1kdS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L01ha2VmaWxlCj4gPiBp
bmRleCA2YzJlZDljNDY0NjcuLjRkMTE4N2NjYzNlNSAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9yY2FyLWR1L01ha2VmaWxlCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1k
dS9NYWtlZmlsZQo+ID4gQEAgLTE1LDYgKzE1LDcgQEAgcmNhci1kdS1kcm0tJChDT05GSUdfRFJN
X1JDQVJfTFZEUykJKz0gcmNhcl9kdV9vZi5vIFwKPiA+ICByY2FyLWR1LWRybS0kKENPTkZJR19E
Uk1fUkNBUl9WU1ApCSs9IHJjYXJfZHVfdnNwLm8KPiA+ICByY2FyLWR1LWRybS0kKENPTkZJR19E
Uk1fUkNBUl9XUklURUJBQ0spICs9IHJjYXJfZHVfd3JpdGViYWNrLm8KPiA+ICAKPiA+ICtvYmot
JChDT05GSUdfRFJNX1JDQVJfQ01NKQkJKz0gcmNhcl9jbW0ubwo+ID4gIG9iai0kKENPTkZJR19E
Uk1fUkNBUl9EVSkJCSs9IHJjYXItZHUtZHJtLm8KPiA+ICBvYmotJChDT05GSUdfRFJNX1JDQVJf
RFdfSERNSSkJCSs9IHJjYXJfZHdfaGRtaS5vCj4gPiAgb2JqLSQoQ09ORklHX0RSTV9SQ0FSX0xW
RFMpCQkrPSByY2FyX2x2ZHMubwo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yY2Fy
LWR1L3JjYXJfY21tLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2NtbS5jCj4gPiBu
ZXcgZmlsZSBtb2RlIDEwMDY0NAo+ID4gaW5kZXggMDAwMDAwMDAwMDAwLi41ZDlkOTE3YjkxZjQK
PiA+IC0tLSAvZGV2L251bGwKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJf
Y21tLmMKPiA+IEBAIC0wLDAgKzEsMTk3IEBACj4gPiArLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZp
ZXI6IEdQTC0yLjAKPiA+ICsvKgo+ID4gKyAqIHJjYXJfY21tLmMgLS0gUi1DYXIgRGlzcGxheSBV
bml0IENvbG9yIE1hbmFnZW1lbnQgTW9kdWxlCj4gPiArICoKPiA+ICsgKiBDb3B5cmlnaHQgKEMp
IDIwMTkgSmFjb3BvIE1vbmRpIDxqYWNvcG8rcmVuZXNhc0BqbW9uZGkub3JnPgo+ID4gKyAqLwo+
ID4gKwo+ID4gKyNpbmNsdWRlIDxsaW51eC9jbGsuaD4KPiA+ICsjaW5jbHVkZSA8bGludXgvaW8u
aD4KPiA+ICsjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+Cj4gPiArI2luY2x1ZGUgPGxpbnV4L29m
Lmg+Cj4gPiArI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgo+ID4gKwo+ID4gKyNp
bmNsdWRlIDxkcm0vZHJtX2F0b21pYy5oPgo+ID4gKwo+ID4gKyNpbmNsdWRlICJyY2FyX2NtbS5o
Igo+ID4gKwo+ID4gKyNkZWZpbmUgQ00yX0xVVF9DVFJMCQkweDAwCj4gCj4gSSB3b3VsZCB3cml0
ZSBhbGwgcmVnaXN0ZXIgYWRkcmVzc2VzIHdpdGggMyAob3IgNCkgZGlnaXRzLgo+IAo+ID4gKyNk
ZWZpbmUgQ00yX0xVVF9DVFJMX0VOCQlCSVQoMCkKPiA+ICsjZGVmaW5lIENNMl9MVVRfVEJMQQkJ
MHg2MDAKPiAKPiBJIHdvdWxkIGRlZmluZSB0aGlzIGFzCj4gCj4gI2RlZmluZSBDTTJfTFVUX1RC
TEEobikJCSgweDYwMCArIChuKSAqIDQpCj4gCj4gPiArCj4gPiArc3RydWN0IHJjYXJfY21tIHsK
PiA+ICsJc3RydWN0IGNsayAqY2xrOwo+ID4gKwl2b2lkIF9faW9tZW0gKmJhc2U7Cj4gPiArCWJv
b2wgZW5hYmxlZDsKPiA+ICsKPiA+ICsJLyogTFVUIHRhYmxlIHNjcmF0Y2ggYnVmZmVyLiAqLwo+
ID4gKwlzdHJ1Y3Qgewo+ID4gKwkJYm9vbCByZXN0b3JlOwo+ID4gKwkJdW5zaWduZWQgaW50IHNp
emU7Cj4gPiArCQl1aW50MzJfdCB0YWJsZVtDTU1fR0FNTUFfTFVUX1NJWkVdOwo+ID4gKwl9IGx1
dDsKPiA+ICt9Owo+ID4gKwo+ID4gK3N0YXRpYyBpbmxpbmUgaW50IHJjYXJfY21tX3JlYWQoc3Ry
dWN0IHJjYXJfY21tICpyY21tLCB1MzIgcmVnKQo+ID4gK3sKPiA+ICsJcmV0dXJuIGlvcmVhZDMy
KHJjbW0tPmJhc2UgKyByZWcpOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgaW5saW5lIHZvaWQg
cmNhcl9jbW1fd3JpdGUoc3RydWN0IHJjYXJfY21tICpyY21tLCB1MzIgcmVnLCB1MzIgZGF0YSkK
PiA+ICt7Cj4gPiArCWlvd3JpdGUzMihkYXRhLCByY21tLT5iYXNlICsgcmVnKTsKPiA+ICt9Cj4g
PiArCj4gPiAraW50IHJjYXJfY21tX3NldHVwKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYs
IHN0cnVjdCByY2FyX2NtbV9jb25maWcgKmNvbmZpZykKPiAKPiBQbGVhc2UgZG9jdW1lbnQgdGhl
IGZ1bmN0aW9ucyBleHBvc2VkIHRvIHRoZSBEVSBkcml2ZXIuIEl0J3MgaGFyZCB0bwo+IHVuZGVy
c3RhbmQgdGhlIHNldHVwIHZzLiBlbmFibGUvZGlzYWJsZSBzcGxpdCBieSBqdXN0IHJlYWRpbmcg
dGhpcwo+IGRyaXZlci4KPiAKPiA+ICt7Cj4gPiArCXN0cnVjdCByY2FyX2NtbSAqcmNtbSA9IHBs
YXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwo+ID4gKwl1bnNpZ25lZCBpbnQgaTsKPiA+ICsKPiA+
ICsJaWYgKGNvbmZpZy0+bHV0LnNpemUgPiBDTU1fR0FNTUFfTFVUX1NJWkUpCj4gPiArCQlyZXR1
cm4gLUVJTlZBTDsKPiA+ICsKPiA+ICsJLyoKPiA+ICsJICogQXMgY21tX3NldHVwIGlzIGNhbGxl
ZCBieSBhdG9taWMgY29tbWl0IHRhaWwgaGVscGVyLCBpdCBtaWdodCBiZQo+ID4gKwkgKiBjYWxs
ZWQgYmVmb3JlIHRoZSBlbmFibGluZyB0aGUgQ1JUQyAod2hpY2ggY2FsbHMgY21tX2VuYWJsZSgp
KS4KPiA+ICsJICoKPiA+ICsJICogU3RvcmUgdGhlIExVVCB0YWJsZSBlbnRyaWVzIGluIHRoZSBz
Y3JhdGNoIGJ1ZmZlciB0byBiZSBsYXRlcgo+ID4gKwkgKiBwcm9ncmFtbWVkIGF0IGVuYWJsZSB0
aW1lLgo+ID4gKwkgKi8KCkkgdGhpbmsgd2UnbGwgYmUgYWJsZSB0byBzaW1wbGlmeSB0aGlzIG9u
Y2UgS2llcmFuJ3MgRFUgZ3JvdXAgaGFuZGxpbmcKcGF0Y2hlcyBsYW5kLiBMZXQncyBzZWUgd2hp
Y2ggc2VyaWVzIGdldHMgbWVyZ2VkIGZpcnN0IDotKQoKPiA+ICsJaWYgKCFyY21tLT5lbmFibGVk
KSB7Cj4gPiArCQlpZiAoIWNvbmZpZy0+bHV0LmVuYWJsZSkKPiA+ICsJCQlyZXR1cm4gMDsKPiA+
ICsKPiA+ICsJCWZvciAoaSA9IDA7IGkgPCBjb25maWctPmx1dC5zaXplOyArK2kpIHsKPiA+ICsJ
CQlzdHJ1Y3QgZHJtX2NvbG9yX2x1dCAqbHV0ID0gJmNvbmZpZy0+bHV0LnRhYmxlW2ldOwo+ID4g
Kwo+ID4gKwkJCXJjbW0tPmx1dC50YWJsZVtpXSA9IChsdXQtPnJlZCAmIDB4ZmYpIDw8IDE2IHwK
PiA+ICsJCQkJCSAgICAgKGx1dC0+Z3JlZW4gJiAweGZmKSA8PCA4IHwKPiA+ICsJCQkJCSAgICAg
KGx1dC0+Ymx1ZSAmIDB4ZmYpOwo+ID4gKwkJfQo+ID4gKwo+ID4gKwkJcmNtbS0+bHV0LnJlc3Rv
cmUgPSB0cnVlOwo+ID4gKwkJcmNtbS0+bHV0LnNpemUgPSBjb25maWctPmx1dC5zaXplOwo+ID4g
Kwo+ID4gKwkJcmV0dXJuIDA7Cj4gPiArCX0KPiA+ICsKPiA+ICsJaWYgKHJjYXJfY21tX3JlYWQo
cmNtbSwgQ00yX0xVVF9DVFJMKSAmIENNMl9MVVRfQ1RSTF9FTiAmJgo+ID4gKwkgICAgIWNvbmZp
Zy0+bHV0LmVuYWJsZSkgewo+ID4gKwkJcmNhcl9jbW1fd3JpdGUocmNtbSwgQ00yX0xVVF9DVFJM
LCAwKTsKPiA+ICsJCXJldHVybiAwOwo+ID4gKwl9Cj4gPiArCj4gPiArCS8qIEVuYWJsZSBMVVQg
YW5kIHByb2dyYW0gdGhlIG5ldyBnYW1tYSB0YWJsZSB2YWx1ZXMuICovCj4gPiArCXJjYXJfY21t
X3dyaXRlKHJjbW0sIENNMl9MVVRfQ1RSTCwgQ00yX0xVVF9DVFJMX0VOKTsKPiAKPiBTaG91bGRu
J3QgeW91IHdyaXRlIHRoZSBMVVQgY29udGVudHMgYmVmb3JlIGVuYWJsaW5nIGl0IChzYW1lIGJl
bG93KSA/Cj4gCj4gPiArCWZvciAoaSA9IDA7IGkgPCBjb25maWctPmx1dC5zaXplOyArK2kpIHsK
PiA+ICsJCXN0cnVjdCBkcm1fY29sb3JfbHV0ICpsdXQgPSAmY29uZmlnLT5sdXQudGFibGVbaV07
Cj4gPiArCQl1MzIgdmFsID0gKGx1dC0+cmVkICYgMHhmZikgPDwgMTYgfCAobHV0LT5ncmVlbiAm
IDB4ZmYpIDw8IDggfAo+ID4gKwkJCSAgKGx1dC0+Ymx1ZSAmIDB4ZmYpOwo+IAo+IERvIHlvdSBu
ZWVkIHRvIHJlY29tcHV0ZSB0aGUgdmFsdWUsIGNhbid0IHlvdSB1c2UgcmNtbS0+bHV0LnRhYmxl
ID8KPiAKPiA+ICsKPiA+ICsJCXJjYXJfY21tX3dyaXRlKHJjbW0sIENNMl9MVVRfVEJMQSArIGkg
KiA0LCB2YWwpOwo+ID4gKwl9Cj4gPiArCj4gPiArCXJldHVybiAwOwo+ID4gK30KPiAKPiBZb3Ug
bmVlZCB0byBleHBvcnQgdGhpcyBhbmQgdGhlIG5leHQgdHdvIGZ1bmN0aW9ucy4KPiAKPiA+ICsK
PiA+ICtpbnQgcmNhcl9jbW1fZW5hYmxlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4g
PiArewo+ID4gKwlzdHJ1Y3QgcmNhcl9jbW0gKnJjbW0gPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShw
ZGV2KTsKCldoYXQgaWYgdGhpcyBmdW5jdGlvbiBnZXRzIGNhbGxlZCBiZWZvcmUgdGhlIENNTSBp
cyBwcm9iZWQgPyBJIHRoaW5rIHlvdQpuZWVkIGFuIGVxdWl2YWxlbnQgdG8gdnNwMV9kdV9pbml0
KCkgdG8gaGFuZGxlIHRoaXMuCgo+ID4gKwl1bnNpZ25lZCBpbnQgaTsKPiA+ICsJaW50IHJldDsK
PiA+ICsKPiA+ICsJaWYgKHJjbW0tPmVuYWJsZWQpCj4gPiArCQlyZXR1cm4gMDsKPiAKPiBDYW4g
dGhpcyBoYXBwZW4gd2l0aG91dCBhIGJ1ZyBpbiB0aGUgY2FsbGVyID8gSWYgaXQgY2FuLCBhbmQg
YXNzdW1pbmcKPiB0aGUgY2FsbGVyIGJhbGFuY2VzIHRoZSBlbmFibGUgYW5kIGRpc2FibGUgY2Fs
bHMsIHlvdSB3aWxsIGhhdmUKPiB1bmJhbGFuY2VkIGNsa19wcmVwYXJlX2VuYWJsZSgpIGFuZCBj
bGtfZGlzYWJsZV91bnByZXBhcmUoKSBjYWxscy4KPiAKPiA+ICsKPiA+ICsJcmV0ID0gY2xrX3By
ZXBhcmVfZW5hYmxlKHJjbW0tPmNsayk7Cj4gPiArCWlmIChyZXQpCj4gPiArCQlyZXR1cm4gcmV0
Owo+IAo+IENvdWxkIHlvdSB1c2UgcG1fcnVudGltZV9nZXRfc3luYygpIGluc3RlYWQgPwo+IAo+
ID4gKwo+ID4gKwkvKiBBcHBseSB0aGUgTFVUIHRhYmxlIHZhbHVlcyBzYXZlZCBhdCBjbW1fc2V0
dXAgdGltZS4gKi8KPiA+ICsJaWYgKHJjbW0tPmx1dC5yZXN0b3JlKSB7Cj4gPiArCQlyY2FyX2Nt
bV93cml0ZShyY21tLCBDTTJfTFVUX0NUUkwsIENNMl9MVVRfQ1RSTF9FTik7Cj4gPiArCQlmb3Ig
KGkgPSAwOyBpIDwgcmNtbS0+bHV0LnNpemU7ICsraSkKPiA+ICsJCQlyY2FyX2NtbV93cml0ZShy
Y21tLCBDTTJfTFVUX1RCTEEgKyBpICogNCwKPiA+ICsJCQkJICAgICAgIHJjbW0tPmx1dC50YWJs
ZVtpXSk7Cj4gPiArCj4gPiArCQlyY21tLT5sdXQucmVzdG9yZSA9IGZhbHNlOwo+ID4gKwkJcmNt
bS0+bHV0LnNpemUgPSAwOwo+ID4gKwl9CgpJIHdvdWxkIG1vdmUgdGhpcyBjb2RlIHRvIGEgc2Vw
YXJhdGUgZnVuY3Rpb24gY2FsbGVkIGJ5IGJvdGgKcmNhcl9jbW1fc2V0dXAoKSBhbmQgcmNhcl9j
bW1fZW5hYmxlKCkuCgo+ID4gKwo+ID4gKwlyY21tLT5lbmFibGVkID0gdHJ1ZTsKPiA+ICsKPiA+
ICsJcmV0dXJuIDA7Cj4gPiArfQo+ID4gKwo+ID4gK3ZvaWQgcmNhcl9jbW1fZGlzYWJsZShzdHJ1
Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQo+ID4gK3sKPiA+ICsJc3RydWN0IHJjYXJfY21tICpy
Y21tID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7Cj4gPiArCj4gPiArCXJjYXJfY21tX3dy
aXRlKHJjbW0sIENNMl9MVVRfQ1RSTCwgMCk7Cj4gPiArCj4gPiArCWNsa19kaXNhYmxlX3VucHJl
cGFyZShyY21tLT5jbGspOwo+ID4gKwo+ID4gKwlyY21tLT5sdXQucmVzdG9yZSA9IGZhbHNlOwo+
ID4gKwlyY21tLT5sdXQuc2l6ZSA9IDA7Cj4gPiArCXJjbW0tPmVuYWJsZWQgPSBmYWxzZTsKPiA+
ICt9Cj4gPiArCj4gPiArc3RhdGljIGludCByY2FyX2NtbV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1f
ZGV2aWNlICpwZGV2KQo+ID4gK3sKPiA+ICsJc3RydWN0IHJjYXJfY21tICpyY21tOwo+ID4gKwlz
dHJ1Y3QgcmVzb3VyY2UgKnJlczsKPiA+ICsJcmVzb3VyY2Vfc2l6ZV90IHNpemU7Cj4gPiArCj4g
PiArCXJjbW0gPSBkZXZtX2t6YWxsb2MoJnBkZXYtPmRldiwgc2l6ZW9mKCpyY21tKSwgR0ZQX0tF
Uk5FTCk7Cj4gPiArCWlmICghcmNtbSkKPiA+ICsJCXJldHVybiAtRU5PTUVNOwo+ID4gKwo+ID4g
KwlwbGF0Zm9ybV9zZXRfZHJ2ZGF0YShwZGV2LCByY21tKTsKPiA+ICsKPiA+ICsJcmVzID0gcGxh
dGZvcm1fZ2V0X3Jlc291cmNlKHBkZXYsIElPUkVTT1VSQ0VfTUVNLCAwKTsKPiA+ICsJc2l6ZSA9
IHJlc291cmNlX3NpemUocmVzKTsKPiA+ICsJaWYgKCFkZXZtX3JlcXVlc3RfbWVtX3JlZ2lvbigm
cGRldi0+ZGV2LCByZXMtPnN0YXJ0LCBzaXplLAo+ID4gKwkJCQkgICAgIGRldl9uYW1lKCZwZGV2
LT5kZXYpKSkgewo+ID4gKwkJZGV2X2VycigmcGRldi0+ZGV2LAo+ID4gKwkJCSJjYW4ndCByZXF1
ZXN0IHJlZ2lvbiBmb3IgcmVzb3VyY2UgJXBSXG4iLCByZXMpOwo+ID4gKwkJcmV0dXJuIC1FQlVT
WTsKPiA+ICsJfQo+ID4gKwo+ID4gKwlyY21tLT5iYXNlID0gZGV2bV9pb3JlbWFwX25vY2FjaGUo
JnBkZXYtPmRldiwgcmVzLT5zdGFydCwgc2l6ZSk7Cj4gPiArCWlmIChJU19FUlIocmNtbS0+YmFz
ZSkpCj4gPiArCQlyZXR1cm4gUFRSX0VSUihyY21tLT5iYXNlKTsKPiAKPiBBbnl0aGluZyB3cm9u
ZyB3aXRoIGRldm1faW9yZW1hcF9yZXNvdXJjZSgpID8KPiAKPiA+ICsKPiA+ICsJcmNtbS0+Y2xr
ID0gZGV2bV9jbGtfZ2V0KCZwZGV2LT5kZXYsIE5VTEwpOwo+ID4gKwlpZiAoSVNfRVJSKHJjbW0t
PmNsaykpIHsKPiA+ICsJCWRldl9lcnIoJnBkZXYtPmRldiwgIkZhaWxlZCB0byBnZXQgQ01NIGNs
b2NrIik7Cj4gPiArCQlyZXR1cm4gUFRSX0VSUihyY21tLT5jbGspOwo+ID4gKwl9Cj4gPiArCj4g
PiArCXJjbW0tPmx1dC5yZXN0b3JlID0gZmFsc2U7Cj4gPiArCXJjbW0tPmx1dC5zaXplID0gMDsK
PiA+ICsJcmNtbS0+ZW5hYmxlZCA9IGZhbHNlOwo+IAo+IEFzIHlvdSBhbGxvY2F0ZSBtZW1vcnkg
d2l0aCBremFsbG9jKCkgeW91IGNvdWxkIHNraXAgdGhpcy4KPiAKPiA+ICsKPiA+ICsJcmV0dXJu
IDA7Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIHJj
YXJfY21tX29mX3RhYmxlW10gPSB7Cj4gPiArCXsgLmNvbXBhdGlibGUgPSAicmVuZXNhcyxjbW0t
Z2VuMyIgfSwKPiA+ICsJeyAuY29tcGF0aWJsZSA9ICJyZW5lc2FzLGNtbS1nZW4yIiB9LAo+ID4g
Kwl7IH0sCj4gPiArfTsKPiA+ICsKPiA+ICtNT0RVTEVfREVWSUNFX1RBQkxFKG9mLCByY2FyX2Nt
bV9vZl90YWJsZSk7Cj4gPiArCj4gPiArc3RhdGljIHN0cnVjdCBwbGF0Zm9ybV9kcml2ZXIgcmNh
cl9jbW1fcGxhdGZvcm1fZHJpdmVyID0gewo+ID4gKwkucHJvYmUJCT0gcmNhcl9jbW1fcHJvYmUs
Cj4gPiArCS5kcml2ZXIJCT0gewo+ID4gKwkJLm5hbWUJPSAicmNhci1jbW0iLAo+ID4gKwkJLm9m
X21hdGNoX3RhYmxlID0gcmNhcl9jbW1fb2ZfdGFibGUsCj4gPiArCX0sCj4gCj4gTm8gbmVlZCBm
b3Igc3VzcGVuZC9yZXN1bWUgc3VwcG9ydCA/IFRoZSBEVSBkcml2ZXIgc2hvdWxkIGRpc2FibGUv
ZW5hYmxlCj4gdGhlIENNTSBpbiBpdHMgc3VzcGVuZC9yZXN1bWUgcGF0aHMsIHNvIHRoaXMgc2hv
dWxkIGJlIGZpbmUsIGJ1dCB3b24ndAo+IHRoZSBMVVQgY29udGVudHMgYmUgbG9zdCBhbmQgbmVl
ZCB0byBiZSByZXN0b3JlZCA/Cj4gCj4gPiArfTsKPiA+ICsKPiA+ICttb2R1bGVfcGxhdGZvcm1f
ZHJpdmVyKHJjYXJfY21tX3BsYXRmb3JtX2RyaXZlcik7Cj4gPiArCj4gPiArTU9EVUxFX0FVVEhP
UigiSmFjb3BvIE1vbmRpIDxqYWNvcG8rcmVuZXNhc0BqbW9uZGkub3JnIik7Cj4gCj4gTWlzc2lu
ZyA+Lgo+IAo+ID4gK01PRFVMRV9ERVNDUklQVElPTigiUmVuZXNhcyBSLUNhciBDTU0gRHJpdmVy
Iik7Cj4gPiArTU9EVUxFX0xJQ0VOU0UoIkdQTCB2MiIpOwo+ID4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfY21tLmggYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9y
Y2FyX2NtbS5oCj4gPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+ID4gaW5kZXggMDAwMDAwMDAwMDAw
Li5kYTYxYTE0NWRjNWMKPiA+IC0tLSAvZGV2L251bGwKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9yY2FyLWR1L3JjYXJfY21tLmgKPiA+IEBAIC0wLDAgKzEsMzggQEAKPiA+ICsvKiBTUERYLUxp
Y2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCsgKi8KPiAKPiBUaGUgLmMgYW5kIC5oIGZpbGUgbGlj
ZW5zZXMgZG9uJ3QgbWF0Y2guCj4gCj4gPiArLyoKPiA+ICsgKiByY2FyX2NtbS5oIC0tIFItQ2Fy
IERpc3BsYXkgVW5pdCBDb2xvciBNYW5hZ2VtZW50IE1vZHVsZQo+ID4gKyAqCj4gPiArICogQ29w
eXJpZ2h0IChDKSAyMDE5IEphY29wbyBNb25kaSA8amFjb3BvK3JlbmVzYXNAam1vbmRpLm9yZz4K
PiA+ICsgKi8KPiA+ICsKPiA+ICsjaWZuZGVmIF9fUkNBUl9DTU1fSF9fCj4gPiArI2RlZmluZSBf
X1JDQVJfQ01NX0hfXwo+ID4gKwo+ID4gKyNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kZXZpY2Uu
aD4KPiAKPiBZb3UgY2FuIGZvcndhcmQtZGVjbGFyZSBzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlIGlu
c3RlYWQuCj4gCj4gPiArCj4gPiArI2RlZmluZSBDTU1fR0FNTUFfTFVUX1NJWkUJCTI1Ngo+ID4g
Kwo+ID4gK3N0cnVjdCBkcm1fY29sb3JfbHV0Owo+ID4gKwo+ID4gKy8qKgo+ID4gKyAqIHN0cnVj
dCByY2FyX2NtbV9jb25maWcgLSBDTU0gY29uZmlndXJhdGlvbgo+ID4gKyAqCj4gPiArICogQGx1
dDoJMUQtTFVUIGNvbmZpZ3VyYXRpb24KPiA+ICsgKiBAbHV0LmVuYWJsZToJMUQtTFVUIGVuYWJs
ZSBmbGFnCj4gPiArICogQGx1dC50YWJsZToJMUQtTFVUIHRhYmxlIGVudHJpZXMuCj4gPiArICog
QGx1dC5zaXplCTFELUxVVCBudW1iZXIgb2YgZW50cmllcy4gTWF4IGlzIDI1Ngo+IAo+IFRoZSBs
YXN0IGxpbmUgaXMgbWlzc2luZyBhIGNvbG9uLgo+IAo+ID4gKyAqLwo+ID4gK3N0cnVjdCByY2Fy
X2NtbV9jb25maWcgewo+ID4gKwlzdHJ1Y3Qgewo+ID4gKwkJYm9vbCBlbmFibGU7Cj4gPiArCQlz
dHJ1Y3QgZHJtX2NvbG9yX2x1dCAqdGFibGU7Cj4gPiArCQl1bnNpZ25lZCBpbnQgc2l6ZTsKPiA+
ICsJfSBsdXQ7Cj4gPiArfTsKPiA+ICsKPiA+ICtpbnQgcmNhcl9jbW1fZW5hYmxlKHN0cnVjdCBw
bGF0Zm9ybV9kZXZpY2UgKik7Cj4gCj4gQXMgdGhlIE9GIEFQSSBsb29rcyB1cCBhIHN0cnVjdCBk
ZXZpY2UgZnJvbSBhIGRldmljZV9ub2RlLCBzaG91bGQgd2UgdXNlCj4gc3RydWN0IGRldmljZSBo
ZXJlID8KPiAKPiA+ICt2b2lkIHJjYXJfY21tX2Rpc2FibGUoc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqKTsKPiAKPiBJIGZpbmQgaGVhZGVycyBtb3JlIHJlYWRhYmxlIHdoZW4gZnVuY3Rpb24gYXJn
dW1lbnRzIGFyZSBuYW1lZC4gSW4gdGhpcwo+IGNhc2UgdGhlIHR5cGVzIHByb2JhYmx5IHByb3Zp
ZGUgZW5vdWdoIGluZm9ybWF0aW9uLCBidXQgZ29vZCBsdWNrIHRyeWluZwo+IHRvIHJlYWQgYSBm
dW5jdGlvbiBzdWNoIGFzCj4gCj4gaW50IGZvbyhpbnQsIGludCwgYm9vbCk7Cj4gCj4gPiArCj4g
PiAraW50IHJjYXJfY21tX3NldHVwKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKiwgc3RydWN0IHJj
YXJfY21tX2NvbmZpZyAqKTsKPiAKPiBDYW4gdGhlIHNlY29uZCBhcmd1bWVudCBiZSBjb25zdCA/
Cj4gCj4gPiArCj4gPiArI2VuZGlmIC8qIF9fUkNBUl9DTU1fSF9fICovCj4gCj4gLS0gCj4gUmVn
YXJkcywKPiAKPiBMYXVyZW50IFBpbmNoYXJ0CgotLSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hh
cnQKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRl
dmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
