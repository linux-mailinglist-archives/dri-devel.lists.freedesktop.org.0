Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id F018735CA1
	for <lists+dri-devel@lfdr.de>; Wed,  5 Jun 2019 14:23:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BBAF1898E4;
	Wed,  5 Jun 2019 12:23:02 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x542.google.com (mail-ed1-x542.google.com
 [IPv6:2a00:1450:4864:20::542])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5958F898E4
 for <dri-devel@lists.freedesktop.org>; Wed,  5 Jun 2019 12:23:01 +0000 (UTC)
Received: by mail-ed1-x542.google.com with SMTP id r18so5496799edo.7
 for <dri-devel@lists.freedesktop.org>; Wed, 05 Jun 2019 05:23:01 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:date:from:to:cc:subject:message-id
 :mail-followup-to:references:mime-version:content-disposition
 :in-reply-to:user-agent;
 bh=kn7L2PqRa1fGEOO9Zxax19qGHTC2cJnJMInOPgMzeKs=;
 b=r898PdsFZGAREQ0XISfwooqaIwrs9HmEq9LN+obpAH6LyZ/l645X0ahrFkKqml/LpJ
 Ytw8zMF1Z8ddyLkvdsAkfM4XC+ejEwstd14aWzdfLS4C/NcEFLir9aMtf4AlS9iNoTxF
 iVLK6CHGp4lGXKoXMuN7qk3//Cf2GsJGlfOkM5Yci3ChVVmaVowgTKAwY1u2SLVaUhFV
 cQloWZQFq94DzDeEsi+/3inm5tdbeXnU2sSI6lOl/7MqB3BDOq8gq0N3KVXMNPJOx1/K
 aaAYiib+UFKBuJVF44khrptYe625mO8wyJBTSieY+ecGMOctO6HDjqqjQURUCnmrInfo
 bMhQ==
X-Gm-Message-State: APjAAAWvPDI+4TWsBf/HUiOuydrico1IgMv5Lq86R91SjGoEk4iAwenY
 2w3kAMgaIzq07pO/DU/ciWHq5Q==
X-Google-Smtp-Source: APXvYqxSH/zkD/h6sKRvHharGsaYNwbos67OvbuVupAmgBDFYXgLxqjWvfdInzHGD1vuxOUTsRjoww==
X-Received: by 2002:a05:6402:1819:: with SMTP id
 g25mr33808810edy.56.1559737379986; 
 Wed, 05 Jun 2019 05:22:59 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id r9sm5062445eds.61.2019.06.05.05.22.58
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Wed, 05 Jun 2019 05:22:59 -0700 (PDT)
Date: Wed, 5 Jun 2019 14:22:57 +0200
From: Daniel Vetter <daniel@ffwll.ch>
To: Rodrigo Siqueira <rodrigosiqueiramelo@gmail.com>
Subject: Re: [PATCH V2] drm/vkms: Avoid extra discount in the timestamp value
Message-ID: <20190605122257.GQ21222@phenom.ffwll.local>
Mail-Followup-To: Rodrigo Siqueira <rodrigosiqueiramelo@gmail.com>,
 Simon Ser <simon.ser@intel.com>,
 Ville Syrjala <ville.syrjala@linux.intel.com>,
 Shayenne Moura <shayenneluzmoura@gmail.com>,
 Haneen Mohammed <hamohammed.sa@gmail.com>,
 David Airlie <airlied@linux.ie>, dri-devel@lists.freedesktop.org,
 linux-kernel@vger.kernel.org, 18oliveira.charles@gmail.com
References: <20190605024543.pcsnkf74mmgfhtuh@smtp.gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190605024543.pcsnkf74mmgfhtuh@smtp.gmail.com>
X-Operating-System: Linux phenom 4.14.0-3-amd64 
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=sender:date:from:to:cc:subject:message-id:mail-followup-to
 :references:mime-version:content-disposition:in-reply-to:user-agent;
 bh=kn7L2PqRa1fGEOO9Zxax19qGHTC2cJnJMInOPgMzeKs=;
 b=JA89mj9LtX/N7h/odMfvFdmQTVWkpB+/hAE8l3AaDFbfhzVkI0Oy43kpxX8jQpzBEt
 SbBr0vvdZFJRPGbB/VO47hbZ0Nhs+ROK46P1Gf1TALc3nVYUUrKgWDDv65ETI3G7aeUF
 Vizn5WJyb8jur9B45ljnu7e1s6ik1ATeJT+x4=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Haneen Mohammed <hamohammed.sa@gmail.com>, David Airlie <airlied@linux.ie>,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 Simon Ser <simon.ser@intel.com>, Shayenne Moura <shayenneluzmoura@gmail.com>,
 18oliveira.charles@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBKdW4gMDQsIDIwMTkgYXQgMTE6NDU6NDNQTSAtMDMwMCwgUm9kcmlnbyBTaXF1ZWly
YSB3cm90ZToKPiBBZnRlciB0aGUgY29tbWl0IGRlZjM1ZTdjNTkyNiAoImRybS92a21zOiBCdWdm
aXggZXh0cmEgdmJsYW5rIGZyYW1lIikKPiBzb21lIG9mIHRoZSBjcmMgdGVzdHMgc3RhcnRlZCB0
byBmYWlsIGluIHRoZSB2a21zIHdpdGggdGhlIGZvbGxvd2luZwo+IGVycm9yOgo+IAo+ICBbZHJt
OmRybV9jcnRjX2FkZF9jcmNfZW50cnkgW2RybV1dICpFUlJPUiogT3ZlcmZsb3cgb2YgQ1JDIGJ1
ZmZlciwKPiAgICAgdXNlcnNwYWNlIHJlYWRzIHRvbyBzbG93Lgo+ICBbZHJtXSBmYWlsZWQgdG8g
cXVldWUgdmttc19jcmNfd29ya19oYW5kbGUKPiAgLi4uCj4gCj4gVGhlIGFmb3JlbWVudGlvbmVk
IGNvbW1pdCBmaXhlZCB0aGUgZXh0cmEgdmJsYW5rIGFkZGVkIGJ5Cj4gYGRybV9jcnRjX2FybV92
YmxhbmtfZXZlbnQoKWAgd2hpY2ggaXMgaW52b2tlZCBpbnNpZGUKPiBgdmttc19jcnRjX2F0b21p
Y19mbHVzaCgpYCBpZiB0aGUgdmJsYW5rIGV2ZW50IGNvdW50IHdhcyB6ZXJvLCBvdGhlcndpc2UK
PiBgZHJtX2NydGNfc2VuZF92YmxhbmtfZXZlbnQoKWAgaXMgaW52b2tlZC4gVGhlIGZpeCB3YXMg
aW1wbGVtZW50ZWQgaW4KPiBgdmttc19nZXRfdmJsYW5rX3RpbWVzdGFtcCgpYCBieSBzdWJ0cmFj
dGluZyBvbmUgcGVyaW9kIGZyb20gdGhlIGN1cnJlbnQKPiB0aW1lc3RhbXAsIGFzIHRoZSBjb2Rl
IHNuaXBwZXQgYmVsb3cgaWxsdXN0cmF0ZXM6Cj4gCj4gIGlmICghaW5fdmJsYW5rX2lycSkKPiAg
ICp2YmxhbmtfdGltZSAtPSBvdXRwdXQtPnBlcmlvZF9uczsKPiAKPiBUaGUgYWJvdmUgZml4IHdv
cmtzIHdlbGwgd2hlbiBgZHJtX2NydGNfYXJtX3ZibGFua19ldmVudCgpYCBpcyBpbnZva2VkLgo+
IEhvd2V2ZXIsIGl0IGRvZXMgbm90IHByb3Blcmx5IHdvcmsgd2hlbiBgZHJtX2NydGNfc2VuZF92
YmxhbmtfZXZlbnQoKWAKPiBleGVjdXRlcyBzaW5jZSBpdCBzdWJ0cmFjdHMgdGhlIGNvcnJlY3Qg
dGltZXN0YW1wLCB3aGljaCBpdCBzaG91bGRuJ3QuCj4gSW4gdGhpcyBjYXNlLCB0aGUgYGRybV9j
cnRjX2FjY3VyYXRlX3ZibGFua19jb3VudCgpYCBmdW5jdGlvbiB3aWxsCj4gcmV0dXJucyB0aGUg
d3JvbmcgZnJhbWUgbnVtYmVyLCB3aGljaCBnZW5lcmF0ZXMgdGhlIGFmb3JlbWVudGlvbmVkCj4g
ZXJyb3IuIFN1Y2ggZGVjcmVhc2UgaW4gYGdldF92YmxhbmtfdGltZXN0YW1wKClgIHByb2R1Y2Ug
YSBuZWdhdGl2ZQo+IG51bWJlciBpbiB0aGUgZm9sbG93aW5nIGNhbGN1bGF0aW9uIHdpdGhpbiBg
ZHJtX3VwZGF0ZV92YmxhbmtfY291bnQoKWA6Cj4gCj4gIHU2NCBkaWZmX25zID0ga3RpbWVfdG9f
bnMoa3RpbWVfc3ViKHRfdmJsYW5rLCB2YmxhbmstPnRpbWUpKTsKPiAKPiBBZnRlciB0aGlzIG9w
ZXJhdGlvbiwgdGhlIERJVl9ST1VORF9DTE9TRVNUX1VMTCBtYWNybyBpcyBpbnZva2VkIHVzaW5n
Cj4gZGlmZl9ucyB3aXRoIGEgbmVnYXRpdmUgbnVtYmVyLCB3aGljaCBnZW5lcmF0ZXMgYW4gdW5k
ZWZpbmVkIHJlc3VsdDsKPiB0aGVyZWZvcmUsIHRoZSByZXR1cm5lZCBmcmFtZSBpcyBhIGh1Z2Ug
YW5kIGluY29ycmVjdCBudW1iZXIuIEZpbmFsbHksCj4gdGhlIGNvZGUgYmVsb3cgaXMgcGFydCBv
ZiB0aGUgYHZrbXNfY3JjX3dvcmtfaGFuZGxlKClgLCBub3RlIHRoYXQgdGhlCj4gd2hpbGUgbG9v
cCBkZXBlbmRzIG9uIHRoZSByZXR1cm5lZCB2YWx1ZSBmcm9tCj4gYGRybV9jcnRjX2FjY3VyYXRl
X3ZibGFua19jb3VudCgpYCB3aGljaCBtYXkgY2F1c2UgdGhlIGxvb3AgdG8gdGFrZSBhCj4gbG9u
ZyB0aW1lIHRvIGZpbmlzaCBpbiBjYXNlIG9mIGh1Z2UgdmFsdWUuCj4gCj4gIGZyYW1lX2VuZCA9
IGRybV9jcnRjX2FjY3VyYXRlX3ZibGFua19jb3VudChjcnRjKTsKPiAgd2hpbGUgKGZyYW1lX3N0
YXJ0IDw9IGZyYW1lX2VuZCkKPiAgICBkcm1fY3J0Y19hZGRfY3JjX2VudHJ5KGNydGMsIHRydWUs
IGZyYW1lX3N0YXJ0KyssICZjcmMzMik7Cj4gCj4gVGhpcyBjb21taXQgZml4ZXMgdGhpcyBpc3N1
ZSBieSBjaGVja2luZyBpZiB0aGUgdmJsYW5rIHRpbWVzdGFtcAo+IGNvcnJlc3BvbmRpbmcgdG8g
dGhlIGN1cnJlbnQgc29mdHdhcmUgdmJsYW5rIGNvdW50ZXIgaXMgZXF1YWwgdG8gdGhlCj4gY3Vy
cmVudCB2Ymxhbms7IGlmIHRoZXkgYXJlIGVxdWFsLCBpdCBtZWFucyB0aGF0Cj4gYGRybV9jcnRj
X3NlbmRfdmJsYW5rX2V2ZW50KClgIHdhcyBpbnZva2VkIGFuZCB2a21zIGRvZXMgbm90IG5lZWQg
dG8KPiBkaXNjb3VudCB0aGUgZXh0cmEgdmJsYW5rLCBvdGhlcndpc2UsIGBkcm1fY3J0Y19hcm1f
dmJsYW5rX2V2ZW50KClgIHdhcwo+IGV4ZWN1dGVkIGFuZCB2a21zIGhhdmUgdG8gZGlzY291bnQg
dGhlIGV4dHJhIHZibGFuay4gVGhpcyBmaXggbWFkZSB0aGUKPiBDUkMgdGVzdHMgd29yayBhZ2Fp
biB3aGVyZWFzIGtlZXAgYWxsIHRlc3RzIGZyb20ga21zX2ZsaXAgd29ya2luZyBhcwo+IHdlbGwu
Cj4gCj4gVjI6IFVwZGF0ZSBjb21taXQgbWVzc2FnZQo+IAo+IFNpZ25lZC1vZmYtYnk6IFJvZHJp
Z28gU2lxdWVpcmEgPHJvZHJpZ29zaXF1ZWlyYW1lbG9AZ21haWwuY29tPgo+IFNpZ25lZC1vZmYt
Ynk6IFNoYXllbm5lIE1vdXJhIDxzaGF5ZW5uZWx1em1vdXJhQGdtYWlsLmNvbT4KClRoYW5rcyBh
IGxvdCBmb3IgdHlwaW5nIHVwIHRoaXMgY29tbWl0IG1lc3NhZ2UuIEknbSBzdGlsbCBub3QgZm9s
bG93aW5nCndoYXQncyBnb2luZyBvbiAodGhpcyBzdHVmZiBpcyB0cmlja3kpLCBidXQgbm93IEkg
dGhpbmsgSSBjYW4gYXQgbGVhc3QgYXNrCnVzZWZ1bCBzY2VuYXJpb3MuCgpGb3IgbXkgdW5kZXJz
dGFuZGluZzogVGhpbmdzIGdvIHdyb25nIHdoZW4gaW4gdGhlIGZ1bmN0aW9uCnZrbXNfY3J0Y19h
dG9taWNfZmx1c2goKSB0aGUgY2FsbCB0byBkcm1fY3J0Y192YmxhbmtfZ2V0KCkgcmV0dXJucyAw
LCBhbmQKd2UgY2FsbCBkcm1fY3J0Y19zZW5kX3ZibGFua19ldmVudCgpIGRpcmVjdGx5PyBJJ20g
bm90IDEwMCUgZnJvbSB5b3VyCmRlc2NyaXB0aW9uIGFib3ZlIHdoZXRoZXIgdGhhdCdzIHRoZSBm
YWlsdXJlIGNhc2Ugd2hlcmUgZXZlcnl0aGluZyBibG93cwp1cC4KClRoZSBvdGhlciBwYXJ0IEkn
bSBoYXZpbmcgYSBoYXJkIHRpbWUgdW5kZXJzdGFuZGluZzogSWYgd2UgYXJlIGluIHRoZSBjYXNl
CndoZXJlIHdlIGNhbGwgZHJtX2NydGNfc2VuZF92YmxhbmtfZXZlbnQoKSBkaXJlY3RseSwgaG93
IGRvIHdlIGVuZCB1cCBpbgp0aGUgdmttc19nZXRfdmJsYW5rX3RpbWVzdGFtcCgpLgoKRnJvbSB3
aGF0IEkgY2FuIHNlZSB0aGVyZSdzIG5vdCBjYWxsZXIgdG8gd2hlcmUgd2Ugc2FtcGxlIGEgbmV3
IHZibGFuayAuLi4KSSB0aGluayBhIGZ1bGwgYmFja3RyYWNlIHRoYXQgaGl0cyB0aGUgbmV3IGNv
bmRpdGlvbiB5b3UncmUgYWRkaW5nIHRvCnVuZGVyc3RhbmQgd2hlbiBleGFjdGx5IHdlJ3JlIGhp
dHRpbmcgaXQgd291bGQgYmUgcGVyZmVjdC4KCj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS92a21z
L3ZrbXNfY3J0Yy5jIHwgNCArKysrCj4gIDEgZmlsZSBjaGFuZ2VkLCA0IGluc2VydGlvbnMoKykK
PiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19jcnRjLmMgYi9kcml2
ZXJzL2dwdS9kcm0vdmttcy92a21zX2NydGMuYwo+IGluZGV4IDc1MDg4MTVmYWMxMS4uM2NlNjBl
NjY2NzNlIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS92a21zL3ZrbXNfY3J0Yy5jCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19jcnRjLmMKPiBAQCAtNzQsOSArNzQsMTMg
QEAgYm9vbCB2a21zX2dldF92YmxhbmtfdGltZXN0YW1wKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYs
IHVuc2lnbmVkIGludCBwaXBlLAo+ICB7Cj4gIAlzdHJ1Y3Qgdmttc19kZXZpY2UgKnZrbXNkZXYg
PSBkcm1fZGV2aWNlX3RvX3ZrbXNfZGV2aWNlKGRldik7Cj4gIAlzdHJ1Y3Qgdmttc19vdXRwdXQg
Km91dHB1dCA9ICZ2a21zZGV2LT5vdXRwdXQ7Cj4gKwlzdHJ1Y3QgZHJtX3ZibGFua19jcnRjICp2
YmxhbmsgPSAmZGV2LT52YmxhbmtbcGlwZV07Cj4gIAo+ICAJKnZibGFua190aW1lID0gb3V0cHV0
LT52YmxhbmtfaHJ0aW1lci5ub2RlLmV4cGlyZXM7Cj4gIAo+ICsJaWYgKCp2YmxhbmtfdGltZSA9
PSB2YmxhbmstPnRpbWUpCj4gKwkJcmV0dXJuIHRydWU7CgpPaywgSSB0aGluayB3aXRoIHRoZSBh
Ym92ZSBJIGRvIG5vdyBoYXZlIGEgcm91Z2ggaWRlYSB3aGF0J3MgZ29pbmcgd3JvbmcuCkkgdGhp
bmsgdGhhdCB3b3VsZCBiZSBhIGJ1ZyBpbiB0aGUgZHJtX3ZibGFuay5jLiBPciBhdCBsZWFzdCBp
dCBjb3VsZCBiZSwKSSB0aGluayBJIGZpcnN0IG5lZWQgdG8gYmV0dGVyIHVuZGVyc3RhbmQgc3Rp
bGwgd2hhdCdzIGdvaW5nIG9uIGhlcmUgdG8KZGVjaWRlZCB0aGF0LgoKSSBoYXZlIGEgYml0IGEg
aHVuY2ggdGhpcyBpcyBmYWxsb3V0IGZyb20gb3VyIHZibGFuayBmdWRnaW5nLCBidXQgSSBndWVz
cwp3ZSdsbCBzZWUuCgpJdCdzIGRlZmluaXRlbHkgY2xlYXIgdGhhdCB0aGluZ3MgYmxvdyB1cCBp
ZiB0aGUgdmJsYW5rIHRpbWUgc29tZWhvdyBnb2VzCmJhY2t3YXJkcywgYnV0IEkgZG9uJ3QgdW5k
ZXJzdGFuZCB5ZXQgaG93IHRoYXQncyBwb3NzaWJsZS4KLURhbmllbAo+ICsKPiAgCWlmICghaW5f
dmJsYW5rX2lycSkKPiAgCQkqdmJsYW5rX3RpbWUgLT0gb3V0cHV0LT5wZXJpb2RfbnM7Cj4gIAo+
IC0tIAo+IDIuMjEuMAo+IAoKCgotLSAKRGFuaWVsIFZldHRlcgpTb2Z0d2FyZSBFbmdpbmVlciwg
SW50ZWwgQ29ycG9yYXRpb24KaHR0cDovL2Jsb2cuZmZ3bGwuY2gKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmkt
ZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
