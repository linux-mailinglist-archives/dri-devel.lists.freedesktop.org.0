Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 231E525B73
	for <lists+dri-devel@lfdr.de>; Wed, 22 May 2019 03:03:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F3B94896C7;
	Wed, 22 May 2019 01:03:32 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x643.google.com (mail-pl1-x643.google.com
 [IPv6:2607:f8b0:4864:20::643])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DF6E6896C4
 for <dri-devel@lists.freedesktop.org>; Wed, 22 May 2019 01:03:30 +0000 (UTC)
Received: by mail-pl1-x643.google.com with SMTP id f97so191319plb.5
 for <dri-devel@lists.freedesktop.org>; Tue, 21 May 2019 18:03:30 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=7hje4FsfBPJPMKbxtLZB2p363LKCH0+OWM/5l2pYlCQ=;
 b=mcnAO0b23tefhiyRq2Y8WzuHl0Xc0mzIbYGjDoCgMons7XnGT0t0c0nXf9d8VChNpg
 8WY+ivEWky3Ys768WrcHPWGceQV0TaFYSHsN7kFmxc8La1eV85wwZXhKXkk2vIR+Obmx
 6knZZ1W2c/M+XHy6MkoU3urD5yEkXZiQ1RiM5bkzmc/yDjcIGgtb2xToEV35NEYlIiBq
 qV8laY3XRTogDikAWedhFfNlZINA43nDrn91yWHHCorTLHdwYtqvbGL5UOXDZ6K0U/Fr
 vK/OWtx7eqa31w3XEGpc6ewqatPub3Cey/KAYldVjxdAaaiNso+TVehGEh0GuaaPuXnT
 4q9g==
X-Gm-Message-State: APjAAAWS6oUdVhATXE9v+gHSXAO1V8S03oOm9SRfIKRw6R5lCQ/6evMe
 F0hAM8Gu7HpBaK7/5dtdkhE=
X-Google-Smtp-Source: APXvYqy6HXFpMBopQ5N+7EA4FCDrWyrwi9faPF2z60FqUVwkDffdxvrpUvcQprh7YxSXJuWYuE5FPA==
X-Received: by 2002:a17:902:4623:: with SMTP id
 o32mr66617798pld.276.1558487010155; 
 Tue, 21 May 2019 18:03:30 -0700 (PDT)
Received: from majic.sklembedded.com (c-73-202-231-77.hsd1.ca.comcast.net.
 [73.202.231.77]) by smtp.googlemail.com with ESMTPSA id
 q193sm34291242pfc.52.2019.05.21.18.03.28
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Tue, 21 May 2019 18:03:29 -0700 (PDT)
From: Steve Longerbeam <slongerbeam@gmail.com>
To: linux-media@vger.kernel.org
Subject: [PATCH v8 2/5] gpu: ipu-v3: ipu-ic: Fully describe colorspace
 conversions
Date: Tue, 21 May 2019 18:03:14 -0700
Message-Id: <20190522010317.23710-3-slongerbeam@gmail.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190522010317.23710-1-slongerbeam@gmail.com>
References: <20190522010317.23710-1-slongerbeam@gmail.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=7hje4FsfBPJPMKbxtLZB2p363LKCH0+OWM/5l2pYlCQ=;
 b=cJfIE37IhFI1J+tbPbzYI52k0rd7G7+wj/XfuUKd0kUZxwBlOtbqM1OapByKS84pVk
 4vaOECZBoVljnGEB2PAXht1SZZhqmznzCiWenPP7zyp8/z7Cxwn3PjK8UMrTE3m6P5mZ
 kLnIgAqbrJipIroW0bshtF3iuYEHxZpPaidesEcEGsDEj0tzLgPoLMeGc2X2y0aLZui1
 tJGkVdV9W+ygxnJn/2wYN2cztVfecVNo4FhryhHxKR/aorAg0OJP4cJb541orj3L+FKf
 WEmZsqXyJCvi2zBR+r6iBMFvm6La2jWKVEEbkgCzRW+/Lcw91wWK/41zp5nSjeUQLclY
 qOWw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: "open list:STAGING SUBSYSTEM" <devel@driverdev.osuosl.org>,
 "open list:FRAMEBUFFER LAYER" <linux-fbdev@vger.kernel.org>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 open list <linux-kernel@vger.kernel.org>,
 "open list:DRM DRIVERS FOR FREESCALE IMX" <dri-devel@lists.freedesktop.org>,
 NXP Linux Team <linux-imx@nxp.com>, Steve Longerbeam <slongerbeam@gmail.com>,
 Mauro Carvalho Chehab <mchehab@kernel.org>, Shawn Guo <shawnguo@kernel.org>,
 "moderated list:ARM/FREESCALE IMX / MXC ARM ARCHITECTURE"
 <linux-arm-kernel@lists.infradead.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T25seSBwcm92aWRpbmcgdGhlIGlucHV0IGFuZCBvdXRwdXQgUkdCL1lVViBzcGFjZSB0byB0aGUg
SUMgdGFzayBpbml0CmZ1bmN0aW9ucyBpcyBub3Qgc3VmZmljaWVudC4gVG8gZnVsbHkgY2hhcmFj
dGVyaXplIGEgY29sb3JzcGFjZQpjb252ZXJzaW9uLCB0aGUgWSdDYkNyIGVuY29kaW5nIHN0YW5k
YXJkLCBhbmQgcXVhbnRpemF0aW9uIGFsc28KbmVlZCB0byBiZSBzcGVjaWZpZWQuCgpEZWZpbmUg
YSAnc3RydWN0IGlwdV9pY19jb2xvcnNwYWNlJyB0aGF0IGluY2x1ZGVzIGFsbCB0aGUgYWJvdmUu
CgpUaGlzIGFsbG93cyB0byBhY3R1YWxseSBlbmZvcmNlIHRoZSBmYWN0IHRoYXQgdGhlIElDOgoK
LSBjYW4gb25seSBlbmNvZGUgdG8vZnJvbSBZVVYgYW5kIFJHQiBmdWxsIHJhbmdlLiBBIGZvbGxv
dy11cCBwYXRjaCB3aWxsCiAgcmVtb3ZlIHRoaXMgcmVzdHJpY3Rpb24uCi0gY2FuIG9ubHkgZW5j
b2RlIHVzaW5nIEJULjYwMSBzdGFuZGFyZC4gQSBmb2xsb3ctdXAgcGF0Y2ggd2lsbCBhZGQKICBS
ZWMuNzA5IGVuY29kaW5nIHN1cHBvcnQuCgpUaGUgZGV0ZXJtaW5hdGlvbiBvZiB0aGUgQ1NDIGNv
ZWZmaWNpZW50cyBiYXNlZCBvbiB0aGUgaW5wdXQvb3V0cHV0CidzdHJ1Y3QgaXB1X2ljX2NvbG9y
c3BhY2UnIGFyZSBtb3ZlZCB0byBhIG5ldyBleHBvcnRlZCBmdW5jdGlvbgppcHVfaWNfY2FsY19j
c2MoKSwgYW5kICdzdHJ1Y3QgaWNfY3NjX3BhcmFtcycgaXMgZXhwb3J0ZWQgYXMKJ3N0cnVjdCBp
cHVfaWNfY3NjX3BhcmFtcycuIGlwdV9pY19jYWxjX2NzYygpIGZpbGxzIGEgJ3N0cnVjdCBpcHVf
aWNfY3NjJwp3aXRoIHRoZSBpbnB1dC9vdXRwdXQgJ3N0cnVjdCBpcHVfaWNfY29sb3JzcGFjZScg
YW5kIHRoZSBjYWxjdWxhdGVkCidzdHJ1Y3QgaWNfY3NjX3BhcmFtcycgZnJvbSB0aG9zZSBpbnB1
dC9vdXRwdXQgY29sb3JzcGFjZXMuCgpUaGUgZnVuY3Rpb25zIGlwdV9pY190YXNrX2luaXQoX3Jz
YykoKSBub3cgdGFrZSBhIGZpbGxlZCAnc3RydWN0CmlwdV9pY19jc2MnLgoKVGhlIGV4aXN0aW5n
IENTQyBjb2VmZmljaWVudCB0YWJsZXMgYW5kIGlwdV9pY19jYWxjX2NzYygpIGFyZSBtb3ZlZAp0
byBhIG5ldyBtb2R1bGUgaXB1LWljLWNzYy5jLiBUaGlzIGlzIGluIHByZXBhcmF0aW9uIGZvciBh
ZGRpbmcgbW9yZQpjb2VmZmljaWVudCB0YWJsZXMgZm9yIGxpbWl0ZWQgcmFuZ2UgcXVhbnRpemF0
aW9uIGFuZCBtb3JlIGVuY29kaW5nCnN0YW5kYXJkcy4KClRoZSBleGlzdGluZyB5Y2JjcjJyZ2Ig
YW5kIGludmVyc2UgcmdiMnljYmNyIHRhYmxlcyBkZWZpbmVkIHRoZSBCVC42MDEKWSdDYkNyIGVu
Y29kaW5nIGNvZWZmaWNpZW50cy4gVGhlIHJnYjJ5Y2JjciB0YWJsZSBzcGVjaWZpY2FsbHkgZGVz
Y3JpYmVkCnRoZSBCVC42MDEgZW5jb2RpbmcgZnJvbSBmdWxsIHJhbmdlIFJHQiB0byBmdWxsIHJh
bmdlIFlVVi4gVGFibGUKY29tbWVudHMgaGF2ZSBiZWVuIGFkZGVkIGluIGlwdS1pYy1jc2MuYyB0
byBtYWtlIHRoaXMgbW9yZSBjbGVhci4KClRoZSB5Y2JjcjJyZ2IgaW52ZXJzZSB0YWJsZSBkZXNj
cmliZWQgZW5jb2RpbmcgWVVWIGxpbWl0ZWQgcmFuZ2UgdG8gUkdCCmZ1bGwgcmFuZ2UuIFRvIGJl
IGNvbnNpc3RlbnQgd2l0aCB0aGUgcmdiMnljYmNyIHRhYmxlLCB0aGlzIHRhYmxlIGlzCmNvbnZl
cnRlZCB0byBZVVYgZnVsbCByYW5nZSB0byBSR0IgZnVsbCByYW5nZSwgYW5kIHRoZSBjb21tZW50
cyBhcmUKZXhwYW5kZWQgaW4gaXB1LWljLWNzYy5jLgoKVGhlIGljX2NzY19yZ2IycmdiIHRhYmxl
IHdhcyBqdXN0IGFuIGlkZW50aXR5IG1hdHJpeCwgc28gaXQgaXMgcmVuYW1lZAonaWRlbnRpdHkn
IGluIGlwdS1pYy1jc2MuYy4KClNpZ25lZC1vZmYtYnk6IFN0ZXZlIExvbmdlcmJlYW0gPHNsb25n
ZXJiZWFtQGdtYWlsLmNvbT4KLS0tCkNoYW5nZXMgaW4gdjg6Ci0gcmVtb3ZlIEZpeGVzOiBhbmQg
Y2M6IHN0YWJsZS4gVGhpcyBwYXRjaCBpcyB0b28gZGlmZmljdWx0IHRvIGJhY2twb3J0CiAgdG8g
c3RhYmxlIHRyZWVzLgpDaGFuZ2VzIGluIHY3OgotIHNxdWFzaGVkIHdpdGggImdwdTogaXB1LXYz
OiBpcHUtaWM6IEZpeCBCVC42MDEgY29lZmZpY2llbnRzIi4KLSBtb3ZlZCB0aGUgY29lZmZpY2ll
bnQgdGFibGVzIGFuZCBjYWxjX2NzY19jb2VmZnMoKSB0byBhIG5ldwogIG1vZHVsZSBpcHUtaWMt
Y3NjLmMsIGFuZCBhZGRlZCBleHBvcnRlZCBpcHVfaWNfY2FsY19jc2MoKSB0byBpdC4KLSBkcm9w
IHY0bDJfY29sb3JzcGFjZSAoY2hyb21hdGljaXRpZXMpIGZyb20gJ3N0cnVjdCBpcHVfaWNfY29s
b3JzcGFjZScuCiAgSXQncyBpbXBsaWVkIHRoYXQgeGZlcl9mdW5jIChnYW1tYSBmdW5jdGlvbikg
bXVzdCBiZSB0aGUgc2FtZSBmb3IgaW5wdXQKICBhbmQgb3V0cHV0LCBzbyBtYWtlIHRoYXQgaW1w
bGljaXQgZm9yIGNocm9tYXRpY2l0aWVzIHRvby4KLSBkcm9wIHBhc3NpbmcgcHJpdiB0byBjYWxj
X2NzY19jb2VmZnMoKSwgd2FzIG9ubHkgdXNlZCB0byBwcmludCBlcnJvcgogIG1lc3NhZ2VzLgot
IHJlbW92ZWQgdGhlIGludmVyc2VfZW5jb2RlIGJvb2xlYW4gaW4gY2FsY19jc2NfY29lZmZzKCku
Ci0gZXhwcmVzcyBuZWdhdGl2ZSBjb2VmZmljaWVudHMgYXMgdHJ1ZSBzaWduZWQgaW50J3MsIGZv
ciBiZXR0ZXIKICByZWFkYWJpbGl0eS4KLSB0d2VhayBpbnZlcnNlIGNvZWZmIGluIGNvbW1lbnRz
LCBubyBjaGFuZ2UgdG8gcm91bmRlZCB0YWJsZSB2YWx1ZXMuCi0tLQogZHJpdmVycy9ncHUvaXB1
LXYzL01ha2VmaWxlICAgICAgICAgICAgICAgICB8ICAgNCArLQogZHJpdmVycy9ncHUvaXB1LXYz
L2lwdS1pYy1jc2MuYyAgICAgICAgICAgICB8IDEyOSArKysrKysrKysrKysrKysrKysKIGRyaXZl
cnMvZ3B1L2lwdS12My9pcHUtaWMuYyAgICAgICAgICAgICAgICAgfCAxMzggKysrKysrKy0tLS0t
LS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2lwdS12My9pcHUtaW1hZ2UtY29udmVydC5jICAgICAgfCAg
MjggKystLQogZHJpdmVycy9zdGFnaW5nL21lZGlhL2lteC9pbXgtaWMtcHJwZW5jdmYuYyB8ICAz
NCArKysrLQogaW5jbHVkZS92aWRlby9pbXgtaXB1LXYzLmggICAgICAgICAgICAgICAgICB8ICA1
NiArKysrKysrLQogNiBmaWxlcyBjaGFuZ2VkLCAyNzEgaW5zZXJ0aW9ucygrKSwgMTE4IGRlbGV0
aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2lwdS12My9pcHUtaWMtY3Nj
LmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9pcHUtdjMvTWFrZWZpbGUgYi9kcml2ZXJzL2dw
dS9pcHUtdjMvTWFrZWZpbGUKaW5kZXggN2NjOGI0N2U0ODhiLi41ZmU1ZWYyMDcwMWEgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2lwdS12My9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9pcHUt
djMvTWFrZWZpbGUKQEAgLTIsOCArMiw4IEBACiBvYmotJChDT05GSUdfSU1YX0lQVVYzX0NPUkUp
ICs9IGlteC1pcHUtdjMubwogCiBpbXgtaXB1LXYzLW9ianMgOj0gaXB1LWNvbW1vbi5vIGlwdS1j
cG1lbS5vIGlwdS1jc2kubyBpcHUtZGMubyBpcHUtZGkubyBcCi0JCWlwdS1kcC5vIGlwdS1kbWZj
Lm8gaXB1LWljLm8gaXB1LWltYWdlLWNvbnZlcnQubyBcCi0JCWlwdS1zbWZjLm8gaXB1LXZkaS5v
CisJCWlwdS1kcC5vIGlwdS1kbWZjLm8gaXB1LWljLm8gaXB1LWljLWNzYy5vIFwKKwkJaXB1LWlt
YWdlLWNvbnZlcnQubyBpcHUtc21mYy5vIGlwdS12ZGkubwogCiBpZmRlZiBDT05GSUdfRFJNCiAJ
aW14LWlwdS12My1vYmpzICs9IGlwdS1wcmUubyBpcHUtcHJnLm8KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2lwdS12My9pcHUtaWMtY3NjLmMgYi9kcml2ZXJzL2dwdS9pcHUtdjMvaXB1LWljLWNz
Yy5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uNWZiNDY5Y2Q2NGZl
Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvaXB1LXYzL2lwdS1pYy1jc2MuYwpAQCAt
MCwwICsxLDEyOSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjArCisvKgor
ICogQ29weXJpZ2h0IChDKSAyMDE5IE1lbnRvciBHcmFwaGljcyBJbmMuCisgKi8KKworI2luY2x1
ZGUgPGxpbnV4L3R5cGVzLmg+CisjaW5jbHVkZSA8bGludXgvaW5pdC5oPgorI2luY2x1ZGUgPGxp
bnV4L2Vycm5vLmg+CisjaW5jbHVkZSA8bGludXgvZXJyLmg+CisjaW5jbHVkZSA8bGludXgvc2l6
ZXMuaD4KKyNpbmNsdWRlICJpcHUtcHJ2LmgiCisKKy8qIGlkZW50aXR5IG1hdHJpeCAqLworc3Rh
dGljIGNvbnN0IHN0cnVjdCBpcHVfaWNfY3NjX3BhcmFtcyBpZGVudGl0eSA9IHsKKwkuY29lZmYg
PSB7CisJCXsgIDEyOCwgICAgMCwgICAgMCwgfSwKKwkJeyAgICAwLCAgMTI4LCAgICAwLCB9LAor
CQl7ICAgIDAsICAgIDAsICAxMjgsIH0sCisJfSwKKwkub2Zmc2V0ID0geyAwLCAwLCAwLCB9LAor
CS5zY2FsZSA9IDIsCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGlwdV9pY19jc2NfcGFyYW1z
ICpyZ2IycmdiW10gPSB7CisJJmlkZW50aXR5LAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBp
cHVfaWNfY3NjX3BhcmFtcyAqeXV2Mnl1dltdID0geworCSZpZGVudGl0eSwKK307CisKKy8qCisg
KiBCVC42MDEgUkdCIGZ1bGwtcmFuZ2UgdG8gWVVWIGZ1bGwtcmFuZ2UKKyAqCisgKiBZID0gIC4y
OTkwICogUiArIC41ODcwICogRyArIC4xMTQwICogQgorICogVSA9IC0uMTY4NyAqIFIgLSAuMzMx
MyAqIEcgKyAuNTAwMCAqIEIgKyAxMjgKKyAqIFYgPSAgLjUwMDAgKiBSIC0gLjQxODcgKiBHIC0g
LjA4MTMgKiBCICsgMTI4CisgKi8KK3N0YXRpYyBjb25zdCBzdHJ1Y3QgaXB1X2ljX2NzY19wYXJh
bXMgcmdiZjJ5dXZmXzYwMSA9IHsKKwkuY29lZmYgPSB7CisJCXsgICA3NywgIDE1MCwgICAyOSwg
fSwKKwkJeyAgLTQzLCAgLTg1LCAgMTI4LCB9LAorCQl7ICAxMjgsIC0xMDcsICAtMjEsIH0sCisJ
fSwKKwkub2Zmc2V0ID0geyAwLCA1MTIsIDUxMiwgfSwKKwkuc2NhbGUgPSAxLAorfTsKKworLyoK
KyAqIEJULjYwMSBZVVYgZnVsbC1yYW5nZSB0byBSR0IgZnVsbC1yYW5nZQorICoKKyAqIFIgPSAx
LiAqIFkgKyAgICAgIDAgKiAoQ2IgLSAxMjgpICsgMS40MDIwICogKENyIC0gMTI4KQorICogRyA9
IDEuICogWSAtICAuMzQ0MSAqIChDYiAtIDEyOCkgLSAgLjcxNDEgKiAoQ3IgLSAxMjgpCisgKiBC
ID0gMS4gKiBZICsgMS43NzIwICogKENiIC0gMTI4KSArICAgICAgMCAqIChDciAtIDEyOCkKKyAq
CisgKiBlcXVpdmFsZW50bHkgKGZhY3RvcmluZyBvdXQgdGhlIG9mZnNldHMpOgorICoKKyAqIFIg
PSAxLiAqIFkgICsgICAgICAwICogQ2IgKyAxLjQwMjAgKiBDciAtIDE3OS40NTYKKyAqIEcgPSAx
LiAqIFkgIC0gIC4zNDQxICogQ2IgLSAgLjcxNDEgKiBDciArIDEzNS40NTAKKyAqIEIgPSAxLiAq
IFkgICsgMS43NzIwICogQ2IgKyAgICAgIDAgKiBDciAtIDIyNi44MTYKKyAqLworc3RhdGljIGNv
bnN0IHN0cnVjdCBpcHVfaWNfY3NjX3BhcmFtcyB5dXZmMnJnYmZfNjAxID0geworCS5jb2VmZiA9
IHsKKwkJeyAgMTI4LCAgICAwLCAgMTc5LCB9LAorCQl7ICAxMjgsICAtNDQsICAtOTEsIH0sCisJ
CXsgIDEyOCwgIDIyNywgICAgMCwgfSwKKwl9LAorCS5vZmZzZXQgPSB7IC0zNTksIDI3MSwgLTQ1
NCwgfSwKKwkuc2NhbGUgPSAyLAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBpcHVfaWNfY3Nj
X3BhcmFtcyAqcmdiMnl1dl82MDFbXSA9IHsKKwkmcmdiZjJ5dXZmXzYwMSwKK307CisKK3N0YXRp
YyBjb25zdCBzdHJ1Y3QgaXB1X2ljX2NzY19wYXJhbXMgKnl1djJyZ2JfNjAxW10gPSB7CisJJnl1
dmYycmdiZl82MDEsCit9OworCitzdGF0aWMgaW50IGNhbGNfY3NjX2NvZWZmcyhzdHJ1Y3QgaXB1
X2ljX2NzYyAqY3NjKQoreworCWlmIChjc2MtPm91dF9jcy5lbmMgIT0gVjRMMl9ZQ0JDUl9FTkNf
NjAxKQorCQlyZXR1cm4gLUVOT1RTVVBQOworCisJaWYgKChjc2MtPmluX2NzLmNzID09IElQVVYz
X0NPTE9SU1BBQ0VfWVVWICYmCisJICAgICBjc2MtPmluX2NzLnF1YW50ICE9IFY0TDJfUVVBTlRJ
WkFUSU9OX0ZVTExfUkFOR0UpIHx8CisJICAgIChjc2MtPm91dF9jcy5jcyA9PSBJUFVWM19DT0xP
UlNQQUNFX1lVViAmJgorCSAgICAgY3NjLT5vdXRfY3MucXVhbnQgIT0gVjRMMl9RVUFOVElaQVRJ
T05fRlVMTF9SQU5HRSkpCisJCXJldHVybiAtRU5PVFNVUFA7CisKKwlpZiAoKGNzYy0+aW5fY3Mu
Y3MgPT0gSVBVVjNfQ09MT1JTUEFDRV9SR0IgJiYKKwkgICAgIGNzYy0+aW5fY3MucXVhbnQgIT0g
VjRMMl9RVUFOVElaQVRJT05fRlVMTF9SQU5HRSkgfHwKKwkgICAgKGNzYy0+b3V0X2NzLmNzID09
IElQVVYzX0NPTE9SU1BBQ0VfUkdCICYmCisJICAgICBjc2MtPm91dF9jcy5xdWFudCAhPSBWNEwy
X1FVQU5USVpBVElPTl9GVUxMX1JBTkdFKSkKKwkJcmV0dXJuIC1FTk9UU1VQUDsKKworCWlmIChj
c2MtPmluX2NzLmNzID09IGNzYy0+b3V0X2NzLmNzKSB7CisJCWNzYy0+cGFyYW1zID0gKGNzYy0+
aW5fY3MuY3MgPT0gSVBVVjNfQ09MT1JTUEFDRV9ZVVYpID8KKwkJCSp5dXYyeXV2WzBdIDogKnJn
YjJyZ2JbMF07CisJCXJldHVybiAwOworCX0KKworCWNzYy0+cGFyYW1zID0gKGNzYy0+aW5fY3Mu
Y3MgPT0gSVBVVjNfQ09MT1JTUEFDRV9ZVVYpID8KKwkJKnl1djJyZ2JfNjAxWzBdIDogKnJnYjJ5
dXZfNjAxWzBdOworCisJcmV0dXJuIDA7Cit9CisKK2ludCBfX2lwdV9pY19jYWxjX2NzYyhzdHJ1
Y3QgaXB1X2ljX2NzYyAqY3NjKQoreworCXJldHVybiBjYWxjX2NzY19jb2VmZnMoY3NjKTsKK30K
K0VYUE9SVF9TWU1CT0xfR1BMKF9faXB1X2ljX2NhbGNfY3NjKTsKKworaW50IGlwdV9pY19jYWxj
X2NzYyhzdHJ1Y3QgaXB1X2ljX2NzYyAqY3NjLAorCQkgICAgZW51bSB2NGwyX3ljYmNyX2VuY29k
aW5nIGluX2VuYywKKwkJICAgIGVudW0gdjRsMl9xdWFudGl6YXRpb24gaW5fcXVhbnQsCisJCSAg
ICBlbnVtIGlwdV9jb2xvcl9zcGFjZSBpbl9jcywKKwkJICAgIGVudW0gdjRsMl95Y2Jjcl9lbmNv
ZGluZyBvdXRfZW5jLAorCQkgICAgZW51bSB2NGwyX3F1YW50aXphdGlvbiBvdXRfcXVhbnQsCisJ
CSAgICBlbnVtIGlwdV9jb2xvcl9zcGFjZSBvdXRfY3MpCit7CisJaXB1X2ljX2ZpbGxfY29sb3Jz
cGFjZSgmY3NjLT5pbl9jcywgaW5fZW5jLCBpbl9xdWFudCwgaW5fY3MpOworCWlwdV9pY19maWxs
X2NvbG9yc3BhY2UoJmNzYy0+b3V0X2NzLCBvdXRfZW5jLCBvdXRfcXVhbnQsIG91dF9jcyk7CisK
KwlyZXR1cm4gX19pcHVfaWNfY2FsY19jc2MoY3NjKTsKKworfQorRVhQT1JUX1NZTUJPTF9HUEwo
aXB1X2ljX2NhbGNfY3NjKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2lwdS12My9pcHUtaWMu
YyBiL2RyaXZlcnMvZ3B1L2lwdS12My9pcHUtaWMuYwppbmRleCAxODgxNmNjZjYwMGUuLmQ2NDA4
M2MyNDk0MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvaXB1LXYzL2lwdS1pYy5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2lwdS12My9pcHUtaWMuYwpAQCAtMTQ2LDggKzE0NiwxMCBAQCBzdHJ1Y3QgaXB1
X2ljIHsKIAljb25zdCBzdHJ1Y3QgaWNfdGFza19yZWdvZmZzICpyZWc7CiAJY29uc3Qgc3RydWN0
IGljX3Rhc2tfYml0ZmllbGRzICpiaXQ7CiAKLQllbnVtIGlwdV9jb2xvcl9zcGFjZSBpbl9jcywg
Z19pbl9jczsKLQllbnVtIGlwdV9jb2xvcl9zcGFjZSBvdXRfY3M7CisJc3RydWN0IGlwdV9pY19j
b2xvcnNwYWNlIGluX2NzOworCXN0cnVjdCBpcHVfaWNfY29sb3JzcGFjZSBnX2luX2NzOworCXN0
cnVjdCBpcHVfaWNfY29sb3JzcGFjZSBvdXRfY3M7CisKIAlib29sIGdyYXBoaWNzOwogCWJvb2wg
cm90YXRpb247CiAJYm9vbCBpbl91c2U7CkBAIC0xNzUsNjAgKzE3NywxMSBAQCBzdGF0aWMgaW5s
aW5lIHZvaWQgaXB1X2ljX3dyaXRlKHN0cnVjdCBpcHVfaWMgKmljLCB1MzIgdmFsdWUsIHVuc2ln
bmVkIG9mZnNldCkKIAl3cml0ZWwodmFsdWUsIGljLT5wcml2LT5iYXNlICsgb2Zmc2V0KTsKIH0K
IAotc3RydWN0IGljX2NzY19wYXJhbXMgewotCXMxNiBjb2VmZlszXVszXTsJLyogc2lnbmVkIDkt
Yml0IGludGVnZXIgY29lZmZpY2llbnRzICovCi0JczE2IG9mZnNldFszXTsJCS8qIHNpZ25lZCAx
MSsyLWJpdCBmaXhlZCBwb2ludCBvZmZzZXQgKi8KLQl1OCBzY2FsZToyOwkJLyogc2NhbGUgY29l
ZmZpY2llbnRzICogMl4oc2NhbGUtMSkgKi8KLQlib29sIHNhdDoxOwkJLyogc2F0dXJhdGUgdG8g
KDE2LCAyMzUoWSkgLyAyNDAoVSwgVikpICovCi19OwotCi0vKgotICogWSA9IFIgKiAgLjI5OSAr
IEcgKiAgLjU4NyArIEIgKiAgLjExNDsKLSAqIFUgPSBSICogLS4xNjkgKyBHICogLS4zMzIgKyBC
ICogIC41MDAgKyAxMjguOwotICogViA9IFIgKiAgLjUwMCArIEcgKiAtLjQxOSArIEIgKiAtLjA4
MTMgKyAxMjguOwotICovCi1zdGF0aWMgY29uc3Qgc3RydWN0IGljX2NzY19wYXJhbXMgaWNfY3Nj
X3JnYjJ5Y2JjciA9IHsKLQkuY29lZmYgPSB7Ci0JCXsgNzcsIDE1MCwgMjkgfSwKLQkJeyA0Njks
IDQyNywgMTI4IH0sCi0JCXsgMTI4LCA0MDUsIDQ5MSB9LAotCX0sCi0JLm9mZnNldCA9IHsgMCwg
NTEyLCA1MTIgfSwKLQkuc2NhbGUgPSAxLAotfTsKLQotLyogdHJhbnNwYXJlbnQgUkdCLT5SR0Ig
bWF0cml4IGZvciBncmFwaGljcyBjb21iaW5pbmcgKi8KLXN0YXRpYyBjb25zdCBzdHJ1Y3QgaWNf
Y3NjX3BhcmFtcyBpY19jc2NfcmdiMnJnYiA9IHsKLQkuY29lZmYgPSB7Ci0JCXsgMTI4LCAwLCAw
IH0sCi0JCXsgMCwgMTI4LCAwIH0sCi0JCXsgMCwgMCwgMTI4IH0sCi0JfSwKLQkuc2NhbGUgPSAy
LAotfTsKLQotLyoKLSAqIFIgPSAoMS4xNjQgKiAoWSAtIDE2KSkgKyAoMS41OTYgKiAoQ3IgLSAx
MjgpKTsKLSAqIEcgPSAoMS4xNjQgKiAoWSAtIDE2KSkgLSAoMC4zOTIgKiAoQ2IgLSAxMjgpKSAt
ICgwLjgxMyAqIChDciAtIDEyOCkpOwotICogQiA9ICgxLjE2NCAqIChZIC0gMTYpKSArICgyLjAx
NyAqIChDYiAtIDEyOCk7Ci0gKi8KLXN0YXRpYyBjb25zdCBzdHJ1Y3QgaWNfY3NjX3BhcmFtcyBp
Y19jc2NfeWNiY3IycmdiID0gewotCS5jb2VmZiA9IHsKLQkJeyAxNDksIDAsIDIwNCB9LAotCQl7
IDE0OSwgNDYyLCA0MDggfSwKLQkJeyAxNDksIDI1NSwgMCB9LAotCX0sCi0JLm9mZnNldCA9IHsg
LTQ0NiwgMjY2LCAtNTU0IH0sCi0JLnNjYWxlID0gMiwKLX07Ci0KIHN0YXRpYyBpbnQgaW5pdF9j
c2Moc3RydWN0IGlwdV9pYyAqaWMsCi0JCSAgICBlbnVtIGlwdV9jb2xvcl9zcGFjZSBpbmYsCi0J
CSAgICBlbnVtIGlwdV9jb2xvcl9zcGFjZSBvdXRmLAorCQkgICAgY29uc3Qgc3RydWN0IGlwdV9p
Y19jc2MgKmNzYywKIAkJICAgIGludCBjc2NfaW5kZXgpCiB7CiAJc3RydWN0IGlwdV9pY19wcml2
ICpwcml2ID0gaWMtPnByaXY7Ci0JY29uc3Qgc3RydWN0IGljX2NzY19wYXJhbXMgKnBhcmFtczsK
IAl1MzIgX19pb21lbSAqYmFzZTsKIAljb25zdCB1MTYgKCpjKVszXTsKIAljb25zdCB1MTYgKmE7
CkBAIC0yMzcsMjcgKzE5MCwxNiBAQCBzdGF0aWMgaW50IGluaXRfY3NjKHN0cnVjdCBpcHVfaWMg
KmljLAogCWJhc2UgPSAodTMyIF9faW9tZW0gKikKIAkJKHByaXYtPnRwbWVtX2Jhc2UgKyBpYy0+
cmVnLT50cG1lbV9jc2NbY3NjX2luZGV4XSk7CiAKLQlpZiAoaW5mID09IElQVVYzX0NPTE9SU1BB
Q0VfWVVWICYmIG91dGYgPT0gSVBVVjNfQ09MT1JTUEFDRV9SR0IpCi0JCXBhcmFtcyA9ICZpY19j
c2NfeWNiY3IycmdiOwotCWVsc2UgaWYgKGluZiA9PSBJUFVWM19DT0xPUlNQQUNFX1JHQiAmJiBv
dXRmID09IElQVVYzX0NPTE9SU1BBQ0VfWVVWKQotCQlwYXJhbXMgPSAmaWNfY3NjX3JnYjJ5Y2Jj
cjsKLQllbHNlIGlmIChpbmYgPT0gSVBVVjNfQ09MT1JTUEFDRV9SR0IgJiYgb3V0ZiA9PSBJUFVW
M19DT0xPUlNQQUNFX1JHQikKLQkJcGFyYW1zID0gJmljX2NzY19yZ2IycmdiOwotCWVsc2Ugewot
CQlkZXZfZXJyKHByaXYtPmlwdS0+ZGV2LCAiVW5zdXBwb3J0ZWQgY29sb3Igc3BhY2UgY29udmVy
c2lvblxuIik7Ci0JCXJldHVybiAtRUlOVkFMOwotCX0KLQogCS8qIENhc3QgdG8gdW5zaWduZWQg
Ki8KLQljID0gKGNvbnN0IHUxNiAoKilbM10pcGFyYW1zLT5jb2VmZjsKLQlhID0gKGNvbnN0IHUx
NiAqKXBhcmFtcy0+b2Zmc2V0OworCWMgPSAoY29uc3QgdTE2ICgqKVszXSljc2MtPnBhcmFtcy5j
b2VmZjsKKwlhID0gKGNvbnN0IHUxNiAqKWNzYy0+cGFyYW1zLm9mZnNldDsKIAogCXBhcmFtID0g
KChhWzBdICYgMHgxZikgPDwgMjcpIHwgKChjWzBdWzBdICYgMHgxZmYpIDw8IDE4KSB8CiAJCSgo
Y1sxXVsxXSAmIDB4MWZmKSA8PCA5KSB8IChjWzJdWzJdICYgMHgxZmYpOwogCXdyaXRlbChwYXJh
bSwgYmFzZSsrKTsKIAotCXBhcmFtID0gKChhWzBdICYgMHgxZmUwKSA+PiA1KSB8IChwYXJhbXMt
PnNjYWxlIDw8IDgpIHwKLQkJKHBhcmFtcy0+c2F0IDw8IDEwKTsKKwlwYXJhbSA9ICgoYVswXSAm
IDB4MWZlMCkgPj4gNSkgfCAoY3NjLT5wYXJhbXMuc2NhbGUgPDwgOCkgfAorCQkoY3NjLT5wYXJh
bXMuc2F0IDw8IDEwKTsKIAl3cml0ZWwocGFyYW0sIGJhc2UrKyk7CiAKIAlwYXJhbSA9ICgoYVsx
XSAmIDB4MWYpIDw8IDI3KSB8ICgoY1swXVsxXSAmIDB4MWZmKSA8PCAxOCkgfApAQCAtMzQ0LDE0
ICsyODYsMTQgQEAgdm9pZCBpcHVfaWNfdGFza19lbmFibGUoc3RydWN0IGlwdV9pYyAqaWMpCiAJ
aWYgKGljLT5yb3RhdGlvbikKIAkJaWNfY29uZiB8PSBpYy0+Yml0LT5pY19jb25mX3JvdF9lbjsK
IAotCWlmIChpYy0+aW5fY3MgIT0gaWMtPm91dF9jcykKKwlpZiAoaWMtPmluX2NzLmNzICE9IGlj
LT5vdXRfY3MuY3MpCiAJCWljX2NvbmYgfD0gaWMtPmJpdC0+aWNfY29uZl9jc2MxX2VuOwogCiAJ
aWYgKGljLT5ncmFwaGljcykgewogCQlpY19jb25mIHw9IGljLT5iaXQtPmljX2NvbmZfY21iX2Vu
OwogCQlpY19jb25mIHw9IGljLT5iaXQtPmljX2NvbmZfY3NjMV9lbjsKIAotCQlpZiAoaWMtPmdf
aW5fY3MgIT0gaWMtPm91dF9jcykKKwkJaWYgKGljLT5nX2luX2NzLmNzICE9IGljLT5vdXRfY3Mu
Y3MpCiAJCQlpY19jb25mIHw9IGljLT5iaXQtPmljX2NvbmZfY3NjMl9lbjsKIAl9CiAKQEAgLTM4
NiwxMSArMzI4LDEyIEBAIHZvaWQgaXB1X2ljX3Rhc2tfZGlzYWJsZShzdHJ1Y3QgaXB1X2ljICpp
YykKIEVYUE9SVF9TWU1CT0xfR1BMKGlwdV9pY190YXNrX2Rpc2FibGUpOwogCiBpbnQgaXB1X2lj
X3Rhc2tfZ3JhcGhpY3NfaW5pdChzdHJ1Y3QgaXB1X2ljICppYywKLQkJCSAgICAgIGVudW0gaXB1
X2NvbG9yX3NwYWNlIGluX2dfY3MsCisJCQkgICAgICBjb25zdCBzdHJ1Y3QgaXB1X2ljX2NvbG9y
c3BhY2UgKmdfaW5fY3MsCiAJCQkgICAgICBib29sIGdhbHBoYV9lbiwgdTMyIGdhbHBoYSwKIAkJ
CSAgICAgIGJvb2wgY29sb3JrZXlfZW4sIHUzMiBjb2xvcmtleSkKIHsKIAlzdHJ1Y3QgaXB1X2lj
X3ByaXYgKnByaXYgPSBpYy0+cHJpdjsKKwlzdHJ1Y3QgaXB1X2ljX2NzYyBjc2MyOwogCXVuc2ln
bmVkIGxvbmcgZmxhZ3M7CiAJdTMyIHJlZywgaWNfY29uZjsKIAlpbnQgcmV0ID0gMDsKQEAgLTQw
MywyMSArMzQ2LDM2IEBAIGludCBpcHVfaWNfdGFza19ncmFwaGljc19pbml0KHN0cnVjdCBpcHVf
aWMgKmljLAogCWljX2NvbmYgPSBpcHVfaWNfcmVhZChpYywgSUNfQ09ORik7CiAKIAlpZiAoIShp
Y19jb25mICYgaWMtPmJpdC0+aWNfY29uZl9jc2MxX2VuKSkgewotCQkvKiBuZWVkIHRyYW5zcGFy
ZW50IENTQzEgY29udmVyc2lvbiAqLwotCQlyZXQgPSBpbml0X2NzYyhpYywgSVBVVjNfQ09MT1JT
UEFDRV9SR0IsCi0JCQkgICAgICAgSVBVVjNfQ09MT1JTUEFDRV9SR0IsIDApOworCQlzdHJ1Y3Qg
aXB1X2ljX2NzYyBjc2MxOworCisJCXJldCA9IGlwdV9pY19jYWxjX2NzYygmY3NjMSwKKwkJCQkg
ICAgICBWNEwyX1lDQkNSX0VOQ182MDEsCisJCQkJICAgICAgVjRMMl9RVUFOVElaQVRJT05fRlVM
TF9SQU5HRSwKKwkJCQkgICAgICBJUFVWM19DT0xPUlNQQUNFX1JHQiwKKwkJCQkgICAgICBWNEwy
X1lDQkNSX0VOQ182MDEsCisJCQkJICAgICAgVjRMMl9RVUFOVElaQVRJT05fRlVMTF9SQU5HRSwK
KwkJCQkgICAgICBJUFVWM19DT0xPUlNQQUNFX1JHQik7CiAJCWlmIChyZXQpCiAJCQlnb3RvIHVu
bG9jazsKLQl9Ci0KLQlpYy0+Z19pbl9jcyA9IGluX2dfY3M7CiAKLQlpZiAoaWMtPmdfaW5fY3Mg
IT0gaWMtPm91dF9jcykgewotCQlyZXQgPSBpbml0X2NzYyhpYywgaWMtPmdfaW5fY3MsIGljLT5v
dXRfY3MsIDEpOworCQkvKiBuZWVkIHRyYW5zcGFyZW50IENTQzEgY29udmVyc2lvbiAqLworCQly
ZXQgPSBpbml0X2NzYyhpYywgJmNzYzEsIDApOwogCQlpZiAocmV0KQogCQkJZ290byB1bmxvY2s7
CiAJfQogCisJaWMtPmdfaW5fY3MgPSAqZ19pbl9jczsKKwljc2MyLmluX2NzID0gaWMtPmdfaW5f
Y3M7CisJY3NjMi5vdXRfY3MgPSBpYy0+b3V0X2NzOworCisJcmV0ID0gX19pcHVfaWNfY2FsY19j
c2MoJmNzYzIpOworCWlmIChyZXQpCisJCWdvdG8gdW5sb2NrOworCisJcmV0ID0gaW5pdF9jc2Mo
aWMsICZjc2MyLCAxKTsKKwlpZiAocmV0KQorCQlnb3RvIHVubG9jazsKKwogCWlmIChnYWxwaGFf
ZW4pIHsKIAkJaWNfY29uZiB8PSBJQ19DT05GX0lDX0dMQl9MT0NfQTsKIAkJcmVnID0gaXB1X2lj
X3JlYWQoaWMsIElDX0NNQlBfMSk7CkBAIC00NDMsMTAgKzQwMSw5IEBAIGludCBpcHVfaWNfdGFz
a19ncmFwaGljc19pbml0KHN0cnVjdCBpcHVfaWMgKmljLAogRVhQT1JUX1NZTUJPTF9HUEwoaXB1
X2ljX3Rhc2tfZ3JhcGhpY3NfaW5pdCk7CiAKIGludCBpcHVfaWNfdGFza19pbml0X3JzYyhzdHJ1
Y3QgaXB1X2ljICppYywKKwkJCSBjb25zdCBzdHJ1Y3QgaXB1X2ljX2NzYyAqY3NjLAogCQkJIGlu
dCBpbl93aWR0aCwgaW50IGluX2hlaWdodCwKIAkJCSBpbnQgb3V0X3dpZHRoLCBpbnQgb3V0X2hl
aWdodCwKLQkJCSBlbnVtIGlwdV9jb2xvcl9zcGFjZSBpbl9jcywKLQkJCSBlbnVtIGlwdV9jb2xv
cl9zcGFjZSBvdXRfY3MsCiAJCQkgdTMyIHJzYykKIHsKIAlzdHJ1Y3QgaXB1X2ljX3ByaXYgKnBy
aXYgPSBpYy0+cHJpdjsKQEAgLTQ3OCwyOCArNDM1LDIzIEBAIGludCBpcHVfaWNfdGFza19pbml0
X3JzYyhzdHJ1Y3QgaXB1X2ljICppYywKIAlpcHVfaWNfd3JpdGUoaWMsIHJzYywgaWMtPnJlZy0+
cnNjKTsKIAogCS8qIFNldHVwIGNvbG9yIHNwYWNlIGNvbnZlcnNpb24gKi8KLQlpYy0+aW5fY3Mg
PSBpbl9jczsKLQlpYy0+b3V0X2NzID0gb3V0X2NzOworCWljLT5pbl9jcyA9IGNzYy0+aW5fY3M7
CisJaWMtPm91dF9jcyA9IGNzYy0+b3V0X2NzOwogCi0JaWYgKGljLT5pbl9jcyAhPSBpYy0+b3V0
X2NzKSB7Ci0JCXJldCA9IGluaXRfY3NjKGljLCBpYy0+aW5fY3MsIGljLT5vdXRfY3MsIDApOwot
CQlpZiAocmV0KQotCQkJZ290byB1bmxvY2s7Ci0JfQorCXJldCA9IGluaXRfY3NjKGljLCBjc2Ms
IDApOwogCi11bmxvY2s6CiAJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmcHJpdi0+bG9jaywgZmxh
Z3MpOwogCXJldHVybiByZXQ7CiB9CiAKIGludCBpcHVfaWNfdGFza19pbml0KHN0cnVjdCBpcHVf
aWMgKmljLAorCQkgICAgIGNvbnN0IHN0cnVjdCBpcHVfaWNfY3NjICpjc2MsCiAJCSAgICAgaW50
IGluX3dpZHRoLCBpbnQgaW5faGVpZ2h0LAotCQkgICAgIGludCBvdXRfd2lkdGgsIGludCBvdXRf
aGVpZ2h0LAotCQkgICAgIGVudW0gaXB1X2NvbG9yX3NwYWNlIGluX2NzLAotCQkgICAgIGVudW0g
aXB1X2NvbG9yX3NwYWNlIG91dF9jcykKKwkJICAgICBpbnQgb3V0X3dpZHRoLCBpbnQgb3V0X2hl
aWdodCkKIHsKLQlyZXR1cm4gaXB1X2ljX3Rhc2tfaW5pdF9yc2MoaWMsIGluX3dpZHRoLCBpbl9o
ZWlnaHQsIG91dF93aWR0aCwKLQkJCQkgICAgb3V0X2hlaWdodCwgaW5fY3MsIG91dF9jcywgMCk7
CisJcmV0dXJuIGlwdV9pY190YXNrX2luaXRfcnNjKGljLCBjc2MsCisJCQkJICAgIGluX3dpZHRo
LCBpbl9oZWlnaHQsCisJCQkJICAgIG91dF93aWR0aCwgb3V0X2hlaWdodCwgMCk7CiB9CiBFWFBP
UlRfU1lNQk9MX0dQTChpcHVfaWNfdGFza19pbml0KTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvaXB1LXYzL2lwdS1pbWFnZS1jb252ZXJ0LmMgYi9kcml2ZXJzL2dwdS9pcHUtdjMvaXB1LWlt
YWdlLWNvbnZlcnQuYwppbmRleCAxMzEwM2FiODYwNTAuLjM1MjBlYWMwZWFjYyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvaXB1LXYzL2lwdS1pbWFnZS1jb252ZXJ0LmMKKysrIGIvZHJpdmVycy9n
cHUvaXB1LXYzL2lwdS1pbWFnZS1jb252ZXJ0LmMKQEAgLTE1NSw2ICsxNTUsNyBAQCBzdHJ1Y3Qg
aXB1X2ltYWdlX2NvbnZlcnRfY3R4IHsKIAkvKiBTb3VyY2UvZGVzdGluYXRpb24gaW1hZ2UgZGF0
YSBhbmQgcm90YXRpb24gbW9kZSAqLwogCXN0cnVjdCBpcHVfaW1hZ2VfY29udmVydF9pbWFnZSBp
bjsKIAlzdHJ1Y3QgaXB1X2ltYWdlX2NvbnZlcnRfaW1hZ2Ugb3V0OworCXN0cnVjdCBpcHVfaWNf
Y3NjIGNzYzsKIAllbnVtIGlwdV9yb3RhdGVfbW9kZSByb3RfbW9kZTsKIAl1MzIgZG93bnNpemVf
Y29lZmZfaDsKIAl1MzIgZG93bnNpemVfY29lZmZfdjsKQEAgLTEzMTcsNyArMTMxOCw2IEBAIHN0
YXRpYyBpbnQgY29udmVydF9zdGFydChzdHJ1Y3QgaXB1X2ltYWdlX2NvbnZlcnRfcnVuICpydW4s
IHVuc2lnbmVkIGludCB0aWxlKQogCXN0cnVjdCBpcHVfaW1hZ2VfY29udmVydF9wcml2ICpwcml2
ID0gY2hhbi0+cHJpdjsKIAlzdHJ1Y3QgaXB1X2ltYWdlX2NvbnZlcnRfaW1hZ2UgKnNfaW1hZ2Ug
PSAmY3R4LT5pbjsKIAlzdHJ1Y3QgaXB1X2ltYWdlX2NvbnZlcnRfaW1hZ2UgKmRfaW1hZ2UgPSAm
Y3R4LT5vdXQ7Ci0JZW51bSBpcHVfY29sb3Jfc3BhY2Ugc3JjX2NzLCBkZXN0X2NzOwogCXVuc2ln
bmVkIGludCBkc3RfdGlsZSA9IGN0eC0+b3V0X3RpbGVfbWFwW3RpbGVdOwogCXVuc2lnbmVkIGlu
dCBkZXN0X3dpZHRoLCBkZXN0X2hlaWdodDsKIAl1bnNpZ25lZCBpbnQgY29sLCByb3c7CkBAIC0x
MzI3LDkgKzEzMjcsNiBAQCBzdGF0aWMgaW50IGNvbnZlcnRfc3RhcnQoc3RydWN0IGlwdV9pbWFn
ZV9jb252ZXJ0X3J1biAqcnVuLCB1bnNpZ25lZCBpbnQgdGlsZSkKIAlkZXZfZGJnKHByaXYtPmlw
dS0+ZGV2LCAiJXM6IHRhc2sgJXU6IHN0YXJ0aW5nIGN0eCAlcCBydW4gJXAgdGlsZSAldSAtPiAl
dVxuIiwKIAkJX19mdW5jX18sIGNoYW4tPmljX3Rhc2ssIGN0eCwgcnVuLCB0aWxlLCBkc3RfdGls
ZSk7CiAKLQlzcmNfY3MgPSBpcHVfcGl4ZWxmb3JtYXRfdG9fY29sb3JzcGFjZShzX2ltYWdlLT5m
bXQtPmZvdXJjYyk7Ci0JZGVzdF9jcyA9IGlwdV9waXhlbGZvcm1hdF90b19jb2xvcnNwYWNlKGRf
aW1hZ2UtPmZtdC0+Zm91cmNjKTsKLQogCWlmIChpcHVfcm90X21vZGVfaXNfaXJ0KGN0eC0+cm90
X21vZGUpKSB7CiAJCS8qIHN3YXAgd2lkdGgvaGVpZ2h0IGZvciByZXNpemVyICovCiAJCWRlc3Rf
d2lkdGggPSBkX2ltYWdlLT50aWxlW2RzdF90aWxlXS5oZWlnaHQ7CkBAIC0xMzUyLDEzICsxMzQ5
LDEyIEBAIHN0YXRpYyBpbnQgY29udmVydF9zdGFydChzdHJ1Y3QgaXB1X2ltYWdlX2NvbnZlcnRf
cnVuICpydW4sIHVuc2lnbmVkIGludCB0aWxlKQogCQlzX2ltYWdlLT50aWxlW3RpbGVdLmhlaWdo
dCwgZGVzdF93aWR0aCwgZGVzdF9oZWlnaHQsIHJzYyk7CiAKIAkvKiBzZXR1cCB0aGUgSUMgcmVz
aXplciBhbmQgQ1NDICovCi0JcmV0ID0gaXB1X2ljX3Rhc2tfaW5pdF9yc2MoY2hhbi0+aWMsCi0J
CQkgICAgICAgc19pbWFnZS0+dGlsZVt0aWxlXS53aWR0aCwKLQkJCSAgICAgICBzX2ltYWdlLT50
aWxlW3RpbGVdLmhlaWdodCwKLQkJCSAgICAgICBkZXN0X3dpZHRoLAotCQkJICAgICAgIGRlc3Rf
aGVpZ2h0LAotCQkJICAgICAgIHNyY19jcywgZGVzdF9jcywKLQkJCSAgICAgICByc2MpOworCXJl
dCA9IGlwdV9pY190YXNrX2luaXRfcnNjKGNoYW4tPmljLCAmY3R4LT5jc2MsCisJCQkJICAgc19p
bWFnZS0+dGlsZVt0aWxlXS53aWR0aCwKKwkJCQkgICBzX2ltYWdlLT50aWxlW3RpbGVdLmhlaWdo
dCwKKwkJCQkgICBkZXN0X3dpZHRoLAorCQkJCSAgIGRlc3RfaGVpZ2h0LAorCQkJCSAgIHJzYyk7
CiAJaWYgKHJldCkgewogCQlkZXZfZXJyKHByaXYtPmlwdS0+ZGV2LCAiaXB1X2ljX3Rhc2tfaW5p
dCBmYWlsZWQsICVkXG4iLCByZXQpOwogCQlyZXR1cm4gcmV0OwpAQCAtMjA1OCw2ICsyMDU0LDE2
IEBAIGlwdV9pbWFnZV9jb252ZXJ0X3ByZXBhcmUoc3RydWN0IGlwdV9zb2MgKmlwdSwgZW51bSBp
cHVfaWNfdGFzayBpY190YXNrLAogCiAJY2FsY190aWxlX3Jlc2l6ZV9jb2VmZmljaWVudHMoY3R4
KTsKIAorCXJldCA9IGlwdV9pY19jYWxjX2NzYygmY3R4LT5jc2MsCisJCQlzX2ltYWdlLT5iYXNl
LnBpeC55Y2Jjcl9lbmMsCisJCQlzX2ltYWdlLT5iYXNlLnBpeC5xdWFudGl6YXRpb24sCisJCQlp
cHVfcGl4ZWxmb3JtYXRfdG9fY29sb3JzcGFjZShzX2ltYWdlLT5mbXQtPmZvdXJjYyksCisJCQlk
X2ltYWdlLT5iYXNlLnBpeC55Y2Jjcl9lbmMsCisJCQlkX2ltYWdlLT5iYXNlLnBpeC5xdWFudGl6
YXRpb24sCisJCQlpcHVfcGl4ZWxmb3JtYXRfdG9fY29sb3JzcGFjZShkX2ltYWdlLT5mbXQtPmZv
dXJjYykpOworCWlmIChyZXQpCisJCWdvdG8gb3V0X2ZyZWU7CisKIAlkdW1wX2Zvcm1hdChjdHgs
IHNfaW1hZ2UpOwogCWR1bXBfZm9ybWF0KGN0eCwgZF9pbWFnZSk7CiAKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvc3RhZ2luZy9tZWRpYS9pbXgvaW14LWljLXBycGVuY3ZmLmMgYi9kcml2ZXJzL3N0YWdp
bmcvbWVkaWEvaW14L2lteC1pYy1wcnBlbmN2Zi5jCmluZGV4IDY0MDM3YjBhODM4Ny4uZThiMzZh
MTgxY2NjIDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcvbWVkaWEvaW14L2lteC1pYy1wcnBl
bmN2Zi5jCisrKyBiL2RyaXZlcnMvc3RhZ2luZy9tZWRpYS9pbXgvaW14LWljLXBycGVuY3ZmLmMK
QEAgLTQ1Niw2ICs0NTYsNyBAQCBzdGF0aWMgaW50IHBycF9zZXR1cF9yb3RhdGlvbihzdHJ1Y3Qg
cHJwX3ByaXYgKnByaXYpCiAJY29uc3Qgc3RydWN0IGlteF9tZWRpYV9waXhmbXQgKm91dGNjLCAq
aW5jYzsKIAlzdHJ1Y3QgdjRsMl9tYnVzX2ZyYW1lZm10ICppbmZtdDsKIAlzdHJ1Y3QgdjRsMl9w
aXhfZm9ybWF0ICpvdXRmbXQ7CisJc3RydWN0IGlwdV9pY19jc2MgY3NjOwogCWRtYV9hZGRyX3Qg
cGh5c1syXTsKIAlpbnQgcmV0OwogCkBAIC00NjQsNiArNDY1LDE3IEBAIHN0YXRpYyBpbnQgcHJw
X3NldHVwX3JvdGF0aW9uKHN0cnVjdCBwcnBfcHJpdiAqcHJpdikKIAlpbmNjID0gcHJpdi0+Y2Nb
UFJQRU5DVkZfU0lOS19QQURdOwogCW91dGNjID0gdmRldi0+Y2M7CiAKKwlyZXQgPSBpcHVfaWNf
Y2FsY19jc2MoJmNzYywKKwkJCSAgICAgIGluZm10LT55Y2Jjcl9lbmMsIGluZm10LT5xdWFudGl6
YXRpb24sCisJCQkgICAgICBpbmNjLT5jcywKKwkJCSAgICAgIG91dGZtdC0+eWNiY3JfZW5jLCBv
dXRmbXQtPnF1YW50aXphdGlvbiwKKwkJCSAgICAgIG91dGNjLT5jcyk7CisJaWYgKHJldCkgewor
CQl2NGwyX2VycigmaWNfcHJpdi0+c2QsICJpcHVfaWNfY2FsY19jc2MgZmFpbGVkLCAlZFxuIiwK
KwkJCSByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwogCXJldCA9IGlteF9tZWRpYV9hbGxvY19k
bWFfYnVmKHByaXYtPm1kLCAmcHJpdi0+cm90X2J1ZlswXSwKIAkJCQkgICAgICBvdXRmbXQtPnNp
emVpbWFnZSk7CiAJaWYgKHJldCkgewpAQCAtNDc3LDEwICs0ODksOSBAQCBzdGF0aWMgaW50IHBy
cF9zZXR1cF9yb3RhdGlvbihzdHJ1Y3QgcHJwX3ByaXYgKnByaXYpCiAJCWdvdG8gZnJlZV9yb3Qw
OwogCX0KIAotCXJldCA9IGlwdV9pY190YXNrX2luaXQocHJpdi0+aWMsCisJcmV0ID0gaXB1X2lj
X3Rhc2tfaW5pdChwcml2LT5pYywgJmNzYywKIAkJCSAgICAgICBpbmZtdC0+d2lkdGgsIGluZm10
LT5oZWlnaHQsCi0JCQkgICAgICAgb3V0Zm10LT5oZWlnaHQsIG91dGZtdC0+d2lkdGgsCi0JCQkg
ICAgICAgaW5jYy0+Y3MsIG91dGNjLT5jcyk7CisJCQkgICAgICAgb3V0Zm10LT5oZWlnaHQsIG91
dGZtdC0+d2lkdGgpOwogCWlmIChyZXQpIHsKIAkJdjRsMl9lcnIoJmljX3ByaXYtPnNkLCAiaXB1
X2ljX3Rhc2tfaW5pdCBmYWlsZWQsICVkXG4iLCByZXQpOwogCQlnb3RvIGZyZWVfcm90MTsKQEAg
LTU3Miw2ICs1ODMsNyBAQCBzdGF0aWMgaW50IHBycF9zZXR1cF9ub3JvdGF0aW9uKHN0cnVjdCBw
cnBfcHJpdiAqcHJpdikKIAljb25zdCBzdHJ1Y3QgaW14X21lZGlhX3BpeGZtdCAqb3V0Y2MsICpp
bmNjOwogCXN0cnVjdCB2NGwyX21idXNfZnJhbWVmbXQgKmluZm10OwogCXN0cnVjdCB2NGwyX3Bp
eF9mb3JtYXQgKm91dGZtdDsKKwlzdHJ1Y3QgaXB1X2ljX2NzYyBjc2M7CiAJZG1hX2FkZHJfdCBw
aHlzWzJdOwogCWludCByZXQ7CiAKQEAgLTU4MCwxMCArNTkyLDIwIEBAIHN0YXRpYyBpbnQgcHJw
X3NldHVwX25vcm90YXRpb24oc3RydWN0IHBycF9wcml2ICpwcml2KQogCWluY2MgPSBwcml2LT5j
Y1tQUlBFTkNWRl9TSU5LX1BBRF07CiAJb3V0Y2MgPSB2ZGV2LT5jYzsKIAotCXJldCA9IGlwdV9p
Y190YXNrX2luaXQocHJpdi0+aWMsCisJcmV0ID0gaXB1X2ljX2NhbGNfY3NjKCZjc2MsCisJCQkg
ICAgICBpbmZtdC0+eWNiY3JfZW5jLCBpbmZtdC0+cXVhbnRpemF0aW9uLAorCQkJICAgICAgaW5j
Yy0+Y3MsCisJCQkgICAgICBvdXRmbXQtPnljYmNyX2VuYywgb3V0Zm10LT5xdWFudGl6YXRpb24s
CisJCQkgICAgICBvdXRjYy0+Y3MpOworCWlmIChyZXQpIHsKKwkJdjRsMl9lcnIoJmljX3ByaXYt
PnNkLCAiaXB1X2ljX2NhbGNfY3NjIGZhaWxlZCwgJWRcbiIsCisJCQkgcmV0KTsKKwkJcmV0dXJu
IHJldDsKKwl9CisKKwlyZXQgPSBpcHVfaWNfdGFza19pbml0KHByaXYtPmljLCAmY3NjLAogCQkJ
ICAgICAgIGluZm10LT53aWR0aCwgaW5mbXQtPmhlaWdodCwKLQkJCSAgICAgICBvdXRmbXQtPndp
ZHRoLCBvdXRmbXQtPmhlaWdodCwKLQkJCSAgICAgICBpbmNjLT5jcywgb3V0Y2MtPmNzKTsKKwkJ
CSAgICAgICBvdXRmbXQtPndpZHRoLCBvdXRmbXQtPmhlaWdodCk7CiAJaWYgKHJldCkgewogCQl2
NGwyX2VycigmaWNfcHJpdi0+c2QsICJpcHVfaWNfdGFza19pbml0IGZhaWxlZCwgJWRcbiIsIHJl
dCk7CiAJCXJldHVybiByZXQ7CmRpZmYgLS1naXQgYS9pbmNsdWRlL3ZpZGVvL2lteC1pcHUtdjMu
aCBiL2luY2x1ZGUvdmlkZW8vaW14LWlwdS12My5oCmluZGV4IGIwM2ZhZmExZmY1OC4uMDZiMGI1
N2U5OTZjIDEwMDY0NAotLS0gYS9pbmNsdWRlL3ZpZGVvL2lteC1pcHUtdjMuaAorKysgYi9pbmNs
dWRlL3ZpZGVvL2lteC1pcHUtdjMuaApAQCAtMzg3LDIwICszODcsNjQgQEAgZW51bSBpcHVfaWNf
dGFzayB7CiAJSUNfTlVNX1RBU0tTLAogfTsKIAorLyoKKyAqIFRoZSBwYXJhbWV0ZXJzIHRoYXQg
ZGVzY3JpYmUgYSBjb2xvcnNwYWNlIGFjY29yZGluZyB0byB0aGUKKyAqIEltYWdlIENvbnZlcnRl
cjoKKyAqICAgIC0gWSdDYkNyIGVuY29kaW5nCisgKiAgICAtIHF1YW50aXphdGlvbgorICogICAg
LSAiY29sb3JzcGFjZSIgKFJHQiBvciBZVVYpLgorICovCitzdHJ1Y3QgaXB1X2ljX2NvbG9yc3Bh
Y2UgeworCWVudW0gdjRsMl95Y2Jjcl9lbmNvZGluZyBlbmM7CisJZW51bSB2NGwyX3F1YW50aXph
dGlvbiBxdWFudDsKKwllbnVtIGlwdV9jb2xvcl9zcGFjZSBjczsKK307CisKK3N0YXRpYyBpbmxp
bmUgdm9pZAoraXB1X2ljX2ZpbGxfY29sb3JzcGFjZShzdHJ1Y3QgaXB1X2ljX2NvbG9yc3BhY2Ug
KmljX2NzLAorCQkgICAgICAgZW51bSB2NGwyX3ljYmNyX2VuY29kaW5nIGVuYywKKwkJICAgICAg
IGVudW0gdjRsMl9xdWFudGl6YXRpb24gcXVhbnQsCisJCSAgICAgICBlbnVtIGlwdV9jb2xvcl9z
cGFjZSBjcykKK3sKKwlpY19jcy0+ZW5jID0gZW5jOworCWljX2NzLT5xdWFudCA9IHF1YW50Owor
CWljX2NzLT5jcyA9IGNzOworfQorCitzdHJ1Y3QgaXB1X2ljX2NzY19wYXJhbXMgeworCXMxNiBj
b2VmZlszXVszXTsJLyogc2lnbmVkIDktYml0IGludGVnZXIgY29lZmZpY2llbnRzICovCisJczE2
IG9mZnNldFszXTsJCS8qIHNpZ25lZCAxMSsyLWJpdCBmaXhlZCBwb2ludCBvZmZzZXQgKi8KKwl1
OCBzY2FsZToyOwkJLyogc2NhbGUgY29lZmZpY2llbnRzICogMl4oc2NhbGUtMSkgKi8KKwlib29s
IHNhdDoxOwkJLyogc2F0dXJhdGUgdG8gKDE2LCAyMzUoWSkgLyAyNDAoVSwgVikpICovCit9Owor
CitzdHJ1Y3QgaXB1X2ljX2NzYyB7CisJc3RydWN0IGlwdV9pY19jb2xvcnNwYWNlIGluX2NzOwor
CXN0cnVjdCBpcHVfaWNfY29sb3JzcGFjZSBvdXRfY3M7CisJc3RydWN0IGlwdV9pY19jc2NfcGFy
YW1zIHBhcmFtczsKK307CisKIHN0cnVjdCBpcHVfaWM7CisKK2ludCBfX2lwdV9pY19jYWxjX2Nz
YyhzdHJ1Y3QgaXB1X2ljX2NzYyAqY3NjKTsKK2ludCBpcHVfaWNfY2FsY19jc2Moc3RydWN0IGlw
dV9pY19jc2MgKmNzYywKKwkJICAgIGVudW0gdjRsMl95Y2Jjcl9lbmNvZGluZyBpbl9lbmMsCisJ
CSAgICBlbnVtIHY0bDJfcXVhbnRpemF0aW9uIGluX3F1YW50LAorCQkgICAgZW51bSBpcHVfY29s
b3Jfc3BhY2UgaW5fY3MsCisJCSAgICBlbnVtIHY0bDJfeWNiY3JfZW5jb2Rpbmcgb3V0X2VuYywK
KwkJICAgIGVudW0gdjRsMl9xdWFudGl6YXRpb24gb3V0X3F1YW50LAorCQkgICAgZW51bSBpcHVf
Y29sb3Jfc3BhY2Ugb3V0X2NzKTsKIGludCBpcHVfaWNfdGFza19pbml0KHN0cnVjdCBpcHVfaWMg
KmljLAorCQkgICAgIGNvbnN0IHN0cnVjdCBpcHVfaWNfY3NjICpjc2MsCiAJCSAgICAgaW50IGlu
X3dpZHRoLCBpbnQgaW5faGVpZ2h0LAotCQkgICAgIGludCBvdXRfd2lkdGgsIGludCBvdXRfaGVp
Z2h0LAotCQkgICAgIGVudW0gaXB1X2NvbG9yX3NwYWNlIGluX2NzLAotCQkgICAgIGVudW0gaXB1
X2NvbG9yX3NwYWNlIG91dF9jcyk7CisJCSAgICAgaW50IG91dF93aWR0aCwgaW50IG91dF9oZWln
aHQpOwogaW50IGlwdV9pY190YXNrX2luaXRfcnNjKHN0cnVjdCBpcHVfaWMgKmljLAorCQkJIGNv
bnN0IHN0cnVjdCBpcHVfaWNfY3NjICpjc2MsCiAJCQkgaW50IGluX3dpZHRoLCBpbnQgaW5faGVp
Z2h0LAogCQkJIGludCBvdXRfd2lkdGgsIGludCBvdXRfaGVpZ2h0LAotCQkJIGVudW0gaXB1X2Nv
bG9yX3NwYWNlIGluX2NzLAotCQkJIGVudW0gaXB1X2NvbG9yX3NwYWNlIG91dF9jcywKIAkJCSB1
MzIgcnNjKTsKIGludCBpcHVfaWNfdGFza19ncmFwaGljc19pbml0KHN0cnVjdCBpcHVfaWMgKmlj
LAotCQkJICAgICAgZW51bSBpcHVfY29sb3Jfc3BhY2UgaW5fZ19jcywKKwkJCSAgICAgIGNvbnN0
IHN0cnVjdCBpcHVfaWNfY29sb3JzcGFjZSAqZ19pbl9jcywKIAkJCSAgICAgIGJvb2wgZ2FscGhh
X2VuLCB1MzIgZ2FscGhhLAogCQkJICAgICAgYm9vbCBjb2xvcmtleV9lbiwgdTMyIGNvbG9ya2V5
KTsKIHZvaWQgaXB1X2ljX3Rhc2tfZW5hYmxlKHN0cnVjdCBpcHVfaWMgKmljKTsKLS0gCjIuMTcu
MQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRl
dmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
