Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 974E9670C7
	for <lists+dri-devel@lfdr.de>; Fri, 12 Jul 2019 15:59:22 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 52D116E0E4;
	Fri, 12 Jul 2019 13:59:17 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 941366E0DB;
 Fri, 12 Jul 2019 13:59:15 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 12 Jul 2019 06:59:15 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,482,1557212400"; d="scan'208";a="168323413"
Received: from ramaling-i9x.iind.intel.com ([10.99.66.154])
 by fmsmga007.fm.intel.com with ESMTP; 12 Jul 2019 06:59:13 -0700
From: Ramalingam C <ramalingam.c@intel.com>
To: intel-gfx <intel-gfx@lists.freedesktop.org>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Pekka Paalanen <ppaalanen@gmail.com>, Daniel Vetter <daniel@ffwll.ch>
Subject: [PATCH v10 1/6] drm: Add Content protection type property
Date: Fri, 12 Jul 2019 12:30:21 +0530
Message-Id: <20190712070026.13088-2-ramalingam.c@intel.com>
X-Mailer: git-send-email 2.19.1
In-Reply-To: <20190712070026.13088-1-ramalingam.c@intel.com>
References: <20190712070026.13088-1-ramalingam.c@intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBhZGRzIGEgRFJNIEVOVU0gcHJvcGVydHkgdG8gdGhlIHNlbGVjdGVkIGNvbm5l
Y3RvcnMuClRoaXMgcHJvcGVydHkgaXMgdXNlZCBmb3IgbWVudGlvbmluZyB0aGUgcHJvdGVjdGVk
IGNvbnRlbnQncyB0eXBlCmZyb20gdXNlcnNwYWNlIHRvIGtlcm5lbCBIRENQIGF1dGhlbnRpY2F0
aW9uLgoKVHlwZSBvZiB0aGUgc3RyZWFtIGlzIGRlY2lkZWQgYnkgdGhlIHByb3RlY3RlZCBjb250
ZW50IHByb3ZpZGVycy4KVHlwZSAwIGNvbnRlbnQgY2FuIGJlIHJlbmRlcmVkIG9uIGFueSBIRENQ
IHByb3RlY3RlZCBkaXNwbGF5IHdpcmVzLgpCdXQgVHlwZSAxIGNvbnRlbnQgY2FuIGJlIHJlbmRl
cmVkIG9ubHkgb24gSERDUDIuMiBwcm90ZWN0ZWQgcGF0aHMuCgpTbyB3aGVuIGEgdXNlcnNwYWNl
IHNldHMgdGhpcyBwcm9wZXJ0eSB0byBUeXBlIDEgYW5kIHN0YXJ0cyB0aGUgSERDUAplbmFibGUs
IGtlcm5lbCB3aWxsIGhvbm91ciBpdCBvbmx5IGlmIEhEQ1AyLjIgYXV0aGVudGljYXRpb24gaXMg
dGhyb3VnaApmb3IgdHlwZSAxLiBFbHNlIEhEQ1AgZW5hYmxlIHdpbGwgYmUgZmFpbGVkLgoKTmVl
ZCBBQ0sgZm9yIHRoaXMgbmV3IGNvbmVuY3RvciBwcm9wZXJ0eSBmcm9tIHVzZXJzcGFjZSBjb25z
dW1lci4KCnYyOgogIGNwX2NvbnRlbnRfdHlwZSBpcyByZXBsYWNlZCB3aXRoIGNvbnRlbnRfcHJv
dGVjdGlvbl90eXBlIFtkYW5pZWxdCiAgY2hlY2sgYXQgYXRvbWljX3NldF9wcm9wZXJ0eSBpcyBy
ZW1vdmVkIFtNYWFydGVuXQp2MzoKICAlcy9jb250ZW50X3Byb3RlY3Rpb25fdHlwZS9oZGNwX2Nv
bnRlbnRfdHlwZSBbUGVra2FdCnY0OgogIHByb3BlcnR5IGlzIGNyZWF0ZWQgZm9yIHRoZSBmaXJz
dCByZXF1ZXN0ZWQgY29ubmVjdG9yIGFuZCB0aGVuIHJldXNlZC4KCVtEYW52ZXRdCnY1OgogIGtl
cm5lbCBkb2Mgbml0cyBhZGRyZXNzZWQgW0RhbmllbF0KICBSZWJhc2VkIGFzIHBhcnQgb2YgcGF0
Y2ggcmVvcmRlcmluZy4KdjY6CiAgS2VybmVsIGRvY3MgYXJlIG1vZGlmaWVkIFtwZWtrYV0Kdjc6
CiAgTW9yZSBkZXRhaWxzIGluIEtlcm5lbCBkb2NzLiBbcGVra2FdCnY4OgogIEZldyBtb3JlIGNs
YXJpZmljYXRpb24gaW50byBrZXJuZWwgZG9jIG9mIGNvbnRlbnQgdHlwZSBbcGVra2FdCgpTaWdu
ZWQtb2ZmLWJ5OiBSYW1hbGluZ2FtIEMgPHJhbWFsaW5nYW0uY0BpbnRlbC5jb20+ClJldmlld2Vk
LWJ5OiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgotLS0KIGRyaXZlcnMv
Z3B1L2RybS9kcm1fYXRvbWljX3VhcGkuYyAgICAgICAgIHwgIDQgKysKIGRyaXZlcnMvZ3B1L2Ry
bS9kcm1fY29ubmVjdG9yLmMgICAgICAgICAgIHwgNTAgKysrKysrKysrKysrKysrKysrKysrKysK
IGRyaXZlcnMvZ3B1L2RybS9kcm1faGRjcC5jICAgICAgICAgICAgICAgIHwgMzYgKysrKysrKysr
KysrKysrLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9oZGNwLmMgfCAgNCAr
LQogaW5jbHVkZS9kcm0vZHJtX2Nvbm5lY3Rvci5oICAgICAgICAgICAgICAgfCAgNyArKysrCiBp
bmNsdWRlL2RybS9kcm1faGRjcC5oICAgICAgICAgICAgICAgICAgICB8ICAyICstCiBpbmNsdWRl
L2RybS9kcm1fbW9kZV9jb25maWcuaCAgICAgICAgICAgICB8ICA2ICsrKwogaW5jbHVkZS91YXBp
L2RybS9kcm1fbW9kZS5oICAgICAgICAgICAgICAgfCAgNCArKwogOCBmaWxlcyBjaGFuZ2VkLCAx
MTAgaW5zZXJ0aW9ucygrKSwgMyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vZHJtX2F0b21pY191YXBpLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY191YXBp
LmMKaW5kZXggYWJlMzhiZGY4NWFlLi4xOWFlMTE5ZjFhNWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9kcm1fYXRvbWljX3VhcGkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21p
Y191YXBpLmMKQEAgLTc0Nyw2ICs3NDcsOCBAQCBzdGF0aWMgaW50IGRybV9hdG9taWNfY29ubmVj
dG9yX3NldF9wcm9wZXJ0eShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQkJcmV0
dXJuIC1FSU5WQUw7CiAJCX0KIAkJc3RhdGUtPmNvbnRlbnRfcHJvdGVjdGlvbiA9IHZhbDsKKwl9
IGVsc2UgaWYgKHByb3BlcnR5ID09IGNvbmZpZy0+aGRjcF9jb250ZW50X3R5cGVfcHJvcGVydHkp
IHsKKwkJc3RhdGUtPmhkY3BfY29udGVudF90eXBlID0gdmFsOwogCX0gZWxzZSBpZiAocHJvcGVy
dHkgPT0gY29ubmVjdG9yLT5jb2xvcnNwYWNlX3Byb3BlcnR5KSB7CiAJCXN0YXRlLT5jb2xvcnNw
YWNlID0gdmFsOwogCX0gZWxzZSBpZiAocHJvcGVydHkgPT0gY29uZmlnLT53cml0ZWJhY2tfZmJf
aWRfcHJvcGVydHkpIHsKQEAgLTgzMSw2ICs4MzMsOCBAQCBkcm1fYXRvbWljX2Nvbm5lY3Rvcl9n
ZXRfcHJvcGVydHkoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKIAkJCXN0YXRlLT5o
ZHJfb3V0cHV0X21ldGFkYXRhLT5iYXNlLmlkIDogMDsKIAl9IGVsc2UgaWYgKHByb3BlcnR5ID09
IGNvbmZpZy0+Y29udGVudF9wcm90ZWN0aW9uX3Byb3BlcnR5KSB7CiAJCSp2YWwgPSBzdGF0ZS0+
Y29udGVudF9wcm90ZWN0aW9uOworCX0gZWxzZSBpZiAocHJvcGVydHkgPT0gY29uZmlnLT5oZGNw
X2NvbnRlbnRfdHlwZV9wcm9wZXJ0eSkgeworCQkqdmFsID0gc3RhdGUtPmhkY3BfY29udGVudF90
eXBlOwogCX0gZWxzZSBpZiAocHJvcGVydHkgPT0gY29uZmlnLT53cml0ZWJhY2tfZmJfaWRfcHJv
cGVydHkpIHsKIAkJLyogV3JpdGViYWNrIGZyYW1lYnVmZmVyIGlzIG9uZS1zaG90LCB3cml0ZSBh
bmQgZm9yZ2V0ICovCiAJCSp2YWwgPSAwOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ry
bV9jb25uZWN0b3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fY29ubmVjdG9yLmMKaW5kZXggMDY4
ZDRiMDVmMWJlLi5mZWZkMzZhMWM0YzkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1f
Y29ubmVjdG9yLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYwpAQCAtOTUy
LDYgKzk1Miw1NiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9wcm9wX2VudW1fbGlzdCBoZG1p
X2NvbG9yc3BhY2VzW10gPSB7CiAgKgkgIGlzIG5vIGxvbmdlciBwcm90ZWN0ZWQgYW5kIHVzZXJz
cGFjZSBzaG91bGQgdGFrZSBhcHByb3ByaWF0ZSBhY3Rpb24KICAqCSAgKHdoYXRldmVyIHRoYXQg
bWlnaHQgYmUpLgogICoKKyAqIEhEQ1AgQ29udGVudCBUeXBlOgorICoJVGhpcyBFbnVtIHByb3Bl
cnR5IGlzIHVzZWQgYnkgdGhlIHVzZXJzcGFjZSB0byBkZWNsYXJlIHRoZSBjb250ZW50IHR5cGUK
KyAqCW9mIHRoZSBkaXNwbGF5IHN0cmVhbSwgdG8ga2VybmVsLiBIZXJlIGRpc3BsYXkgc3RyZWFt
IHN0YW5kcyBmb3IgYW55CisgKglkaXNwbGF5IGNvbnRlbnQgdGhhdCB1c2Vyc3BhY2UgaW50ZW5k
ZWQgdG8gZGlzcGxheSB0aHJvdWdoIEhEQ1AKKyAqCWVuY3J5cHRpb24uCisgKgorICoJQ29udGVu
dCBUeXBlIG9mIGEgc3RyZWFtIGlzIGRlY2lkZWQgYnkgdGhlIG93bmVyIG9mIHRoZSBzdHJlYW0s
IGFzCisgKgkiSERDUCBUeXBlMCIgb3IgIkhEQ1AgVHlwZTEiLgorICoKKyAqCVRoZSB2YWx1ZSBv
ZiB0aGUgcHJvcGVydHkgY2FuIGJlIG9uZSBvZiB0aGUgYmVsb3c6CisgKgkgIC0gIkhEQ1AgVHlw
ZTAiOiBEUk1fTU9ERV9IRENQX0NPTlRFTlRfVFlQRTAgPSAwCisgKgkgIC0gIkhEQ1AgVHlwZTEi
OiBEUk1fTU9ERV9IRENQX0NPTlRFTlRfVFlQRTEgPSAxCisgKgorICoJV2hlbiBrZXJuZWwgc3Rh
cnRzIHRoZSBIRENQIGF1dGhlbnRpY2F0aW9uIChzZWUgIkNvbnRlbnQgUHJvdGVjdGlvbiIKKyAq
CWZvciBkZXRhaWxzKSwgaXQgdXNlcyB0aGUgY29udGVudCB0eXBlIGluICJIRENQIENvbnRlbnQg
VHlwZSIKKyAqCWZvciBwZXJmb3JtaW5nIHRoZSBIRENQIGF1dGhlbnRpY2F0aW9uIHdpdGggdGhl
IGRpc3BsYXkgc2luay4KKyAqCisgKglQbGVhc2Ugbm90ZSBpbiBIRENQIHNwZWMgdmVyc2lvbnMs
IGEgbGluayBjYW4gYmUgYXV0aGVudGljYXRlZCB3aXRoCisgKglIRENQIDIuMiBmb3IgQ29udGVu
dCBUeXBlIDAvQ29udGVudCBUeXBlIDEuIFdoZXJlIGFzIGEgbGluayBjYW4gYmUKKyAqCWF1dGhl
bnRpY2F0ZWQgd2l0aCBIRENQMS40IG9ubHkgZm9yIENvbnRlbnQgVHlwZSAwKHRob3VnaCBpdCBp
cyBpbXBsaWNpdAorICoJaW4gbmF0dXJlLiBBcyB0aGVyZSBpcyBubyByZWZlcmVuY2UgZm9yIENv
bnRlbnQgVHlwZSBpbiBIRENQMS40KS4KKyAqCisgICoJSERDUDIuMiBhdXRoZW50aWNhdGlvbiBw
cm90b2NvbCBpdHNlbGYgdGFrZXMgdGhlICJDb250ZW50IFR5cGUiIGFzIGEKKyAqCXBhcmFtZXRl
ciwgd2hpY2ggaXMgYSBpbnB1dCBmb3IgdGhlIERQIEhEQ1AyLjIgZW5jcnlwdGlvbiBhbGdvLgor
ICoKKyAqCUluIGNhc2Ugb2YgVHlwZSAwIGNvbnRlbnQgcHJvdGVjdGlvbiByZXF1ZXN0LCBrZXJu
ZWwgZHJpdmVyIGNhbiBjaG9vc2UKKyAqCWVpdGhlciBvZiBIRENQIHNwZWMgdmVyc2lvbnMgMS40
IGFuZCAyLjIuIFdoZW4gSERDUDIuMiBpcyB1c2VkIGZvcgorICoJIkhEQ1AgVHlwZSAwIiwgYSBI
RENQIDIuMiBjYXBhYmxlIHJlcGVhdGVyIGluIHRoZSBkb3duc3RyZWFtIGNhbiBzZW5kCisgKgl0
aGF0IGNvbnRlbnQgdG8gYSBIRENQIDEuNCBhdXRoZW50aWNhdGVkIEhEQ1Agc2luayAoVHlwZTAg
bGluaykuCisgKglCdXQgaWYgdGhlIGNvbnRlbnQgaXMgY2xhc3NpZmllZCBhcyAiSERDUCBUeXBl
IDEiLCBhYm92ZSBtZW50aW9uZWQKKyAqCUhEQ1AgMi4yIHJlcGVhdGVyIHdvbnQgc2VuZCB0aGUg
Y29udGVudCB0byB0aGUgSERDUCBzaW5rIGFzIGl0IGNhbid0CisgKglhdXRoZW50aWNhdGUgdGhl
IEhEQ1AxLjQgY2FwYWJsZSBzaW5rIGZvciAiSERDUCBUeXBlIDEiLgorICoKKyAqCVBsZWFzZSBu
b3RlIHVzZXJzcGFjZSBjYW4gYmUgaWdub3JhbnQgb2YgdGhlIEhEQ1AgdmVyc2lvbnMgdXNlZCBi
eSB0aGUKKyAqCWtlcm5lbCBkcml2ZXIgdG8gYWNoaWV2ZSB0aGUgIkhEQ1AgQ29udGVudCBUeXBl
Ii4KKyAqCisgKglBdCBjdXJyZW50IHNjZW5hcmlvLCBjbGFzc2lmeWluZyBhIGNvbnRlbnQgYXMg
VHlwZSAxIGVuc3VyZXMgdGhhdCB0aGUKKyAqCWNvbnRlbnQgd2lsbCBiZSBkaXNwbGF5ZWQgb25s
eSB0aHJvdWdoIHRoZSBIRENQMi4yIGVuY3J5cHRlZCBsaW5rLgorICoKKyAqCU5vdGUgdGhhdCB0
aGUgSERDUCBDb250ZW50IFR5cGUgcHJvcGVydHkgaXMgaW50cm9kdWNlZCBhdCBIRENQIDIuMiwg
YW5kCisgKglkZWZhdWx0cyB0byB0eXBlIDAuIEl0IGlzIG9ubHkgZXhwb3NlZCBieSBkcml2ZXJz
IHN1cHBvcnRpbmcgSERDUCAyLjIKKyAqCShoZW5jZSBzdXBwb3J0aW5nIFR5cGUgMCBhbmQgVHlw
ZSAxKS4gQmFzZWQgb24gaG93IG5leHQgdmVyc2lvbnMgb2YKKyAqCUhEQ1Agc3BlY3MgYXJlIGRl
ZmluZWQgY29udGVudCBUeXBlIGNvdWxkIGJlIHVzZWQgZm9yIGhpZ2hlciB2ZXJzaW9ucyB0b28u
CisgKgorICoJSWYgY29udGVudCB0eXBlIGlzIGNoYW5nZWQgd2hlbiAiQ29udGVudCBQcm90ZWN0
aW9uIiBpcyBub3QgVU5ERVNJUkVELAorICoJdGhlbiBrZXJuZWwgd2lsbCBkaXNhYmxlIHRoZSBI
RENQIGFuZCByZS1lbmFibGUgd2l0aCBuZXcgdHlwZSBpbiB0aGUKKyAqCXNhbWUgYXRvbWljIGNv
bW1pdC4gQW5kIHdoZW4gIkNvbnRlbnQgUHJvdGVjdGlvbiIgaXMgRU5BQkxFRCwgaXQgbWVhbnMK
KyAqCXRoYXQgbGluayBpcyBIRENQIGF1dGhlbnRpY2F0ZWQgYW5kIGVuY3J5cHRlZCwgZm9yIHRo
ZSB0cmFuc21pc3Npb24gb2YKKyAqCXRoZSBUeXBlIG9mIHN0cmVhbSBtZW50aW9uZWQgYXQgIkhE
Q1AgQ29udGVudCBUeXBlIi4KKyAqCiAgKiBIRFJfT1VUUFVUX01FVEFEQVRBOgogICoJQ29ubmVj
dG9yIHByb3BlcnR5IHRvIGVuYWJsZSB1c2Vyc3BhY2UgdG8gc2VuZCBIRFIgTWV0YWRhdGEgdG8K
ICAqCWRyaXZlci4gVGhpcyBtZXRhZGF0YSBpcyBiYXNlZCBvbiB0aGUgY29tcG9zaXRpb24gYW5k
IGJsZW5kaW5nCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2hkY3AuYyBiL2RyaXZl
cnMvZ3B1L2RybS9kcm1faGRjcC5jCmluZGV4IGNkODM3YmQ0MDlmNy4uY2UyMzVmZDFjODQ0IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2hkY3AuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vZHJtX2hkY3AuYwpAQCAtMzQ0LDIzICszNDQsNDEgQEAgc3RhdGljIHN0cnVjdCBkcm1fcHJv
cF9lbnVtX2xpc3QgZHJtX2NwX2VudW1fbGlzdFtdID0gewogfTsKIERSTV9FTlVNX05BTUVfRk4o
ZHJtX2dldF9jb250ZW50X3Byb3RlY3Rpb25fbmFtZSwgZHJtX2NwX2VudW1fbGlzdCkKIAorc3Rh
dGljIHN0cnVjdCBkcm1fcHJvcF9lbnVtX2xpc3QgZHJtX2hkY3BfY29udGVudF90eXBlX2VudW1f
bGlzdFtdID0geworCXsgRFJNX01PREVfSERDUF9DT05URU5UX1RZUEUwLCAiSERDUCBUeXBlMCIg
fSwKKwl7IERSTV9NT0RFX0hEQ1BfQ09OVEVOVF9UWVBFMSwgIkhEQ1AgVHlwZTEiIH0sCit9Owor
RFJNX0VOVU1fTkFNRV9GTihkcm1fZ2V0X2hkY3BfY29udGVudF90eXBlX25hbWUsCisJCSBkcm1f
aGRjcF9jb250ZW50X3R5cGVfZW51bV9saXN0KQorCiAvKioKICAqIGRybV9jb25uZWN0b3JfYXR0
YWNoX2NvbnRlbnRfcHJvdGVjdGlvbl9wcm9wZXJ0eSAtIGF0dGFjaCBjb250ZW50IHByb3RlY3Rp
b24KICAqIHByb3BlcnR5CiAgKgogICogQGNvbm5lY3RvcjogY29ubmVjdG9yIHRvIGF0dGFjaCBD
UCBwcm9wZXJ0eSBvbi4KKyAqIEBoZGNwX2NvbnRlbnRfdHlwZTogaXMgSERDUCBDb250ZW50IFR5
cGUgcHJvcGVydHkgbmVlZGVkIGZvciBjb25uZWN0b3IKICAqCiAgKiBUaGlzIGlzIHVzZWQgdG8g
YWRkIHN1cHBvcnQgZm9yIGNvbnRlbnQgcHJvdGVjdGlvbiBvbiBzZWxlY3QgY29ubmVjdG9ycy4K
ICAqIENvbnRlbnQgUHJvdGVjdGlvbiBpcyBpbnRlbnRpb25hbGx5IHZhZ3VlIHRvIGFsbG93IGZv
ciBkaWZmZXJlbnQgdW5kZXJseWluZwogICogdGVjaG5vbG9naWVzLCBob3dldmVyIGl0IGlzIG1v
c3QgaW1wbGVtZW50ZWQgYnkgSERDUC4KICAqCisgKiBXaGVuIGhkY3BfY29udGVudF90eXBlIGlz
IHRydWUgZW51bSBwcm9wZXJ0eSBjYWxsZWQgSERDUCBDb250ZW50IFR5cGUgaXMKKyAqIGNyZWF0
ZWQgKGlmIGl0IGlzIG5vdCBhbHJlYWR5KSBhbmQgYXR0YWNoZWQgdG8gdGhlIGNvbm5lY3Rvci4K
KyAqCisgKiBUaGlzIHByb3BlcnR5IGlzIHVzZWQgZm9yIHNlbmRpbmcgdGhlIHByb3RlY3RlZCBj
b250ZW50J3Mgc3RyZWFtIHR5cGUKKyAqIGZyb20gdXNlcnNwYWNlIHRvIGtlcm5lbCBvbiBzZWxl
Y3RlZCBjb25uZWN0b3JzLiBQcm90ZWN0ZWQgY29udGVudCBwcm92aWRlcgorICogd2lsbCBkZWNp
ZGUgdGhlaXIgdHlwZSBvZiB0aGVpciBjb250ZW50IGFuZCBkZWNsYXJlIHRoZSBzYW1lIHRvIGtl
cm5lbC4KKyAqCisgKiBDb250ZW50IHR5cGUgd2lsbCBiZSB1c2VkIGR1cmluZyB0aGUgSERDUCAy
LjIgYXV0aGVudGljYXRpb24uCisgKiBDb250ZW50IHR5cGUgd2lsbCBiZSBzZXQgdG8gJmRybV9j
b25uZWN0b3Jfc3RhdGUuaGRjcF9jb250ZW50X3R5cGUuCisgKgogICogVGhlIGNvbnRlbnQgcHJv
dGVjdGlvbiB3aWxsIGJlIHNldCB0byAmZHJtX2Nvbm5lY3Rvcl9zdGF0ZS5jb250ZW50X3Byb3Rl
Y3Rpb24KICAqCiAgKiBSZXR1cm5zOgogICogWmVybyBvbiBzdWNjZXNzLCBuZWdhdGl2ZSBlcnJu
byBvbiBmYWlsdXJlLgogICovCiBpbnQgZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfY29udGVudF9wcm90
ZWN0aW9uX3Byb3BlcnR5KAotCQlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQorCQlz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLCBib29sIGhkY3BfY29udGVudF90eXBlKQog
ewogCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBjb25uZWN0b3ItPmRldjsKIAlzdHJ1Y3QgZHJt
X3Byb3BlcnR5ICpwcm9wID0KQEAgLTM3Nyw2ICszOTUsMjIgQEAgaW50IGRybV9jb25uZWN0b3Jf
YXR0YWNoX2NvbnRlbnRfcHJvdGVjdGlvbl9wcm9wZXJ0eSgKIAkJCQkgICBEUk1fTU9ERV9DT05U
RU5UX1BST1RFQ1RJT05fVU5ERVNJUkVEKTsKIAlkZXYtPm1vZGVfY29uZmlnLmNvbnRlbnRfcHJv
dGVjdGlvbl9wcm9wZXJ0eSA9IHByb3A7CiAKKwlpZiAoIWhkY3BfY29udGVudF90eXBlKQorCQly
ZXR1cm4gMDsKKworCXByb3AgPSBkZXYtPm1vZGVfY29uZmlnLmhkY3BfY29udGVudF90eXBlX3By
b3BlcnR5OworCWlmICghcHJvcCkKKwkJcHJvcCA9IGRybV9wcm9wZXJ0eV9jcmVhdGVfZW51bShk
ZXYsIDAsICJIRENQIENvbnRlbnQgVHlwZSIsCisJCQkJCWRybV9oZGNwX2NvbnRlbnRfdHlwZV9l
bnVtX2xpc3QsCisJCQkJCUFSUkFZX1NJWkUoCisJCQkJCWRybV9oZGNwX2NvbnRlbnRfdHlwZV9l
bnVtX2xpc3QpKTsKKwlpZiAoIXByb3ApCisJCXJldHVybiAtRU5PTUVNOworCisJZHJtX29iamVj
dF9hdHRhY2hfcHJvcGVydHkoJmNvbm5lY3Rvci0+YmFzZSwgcHJvcCwKKwkJCQkgICBEUk1fTU9E
RV9IRENQX0NPTlRFTlRfVFlQRTApOworCWRldi0+bW9kZV9jb25maWcuaGRjcF9jb250ZW50X3R5
cGVfcHJvcGVydHkgPSBwcm9wOworCiAJcmV0dXJuIDA7CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9j
b25uZWN0b3JfYXR0YWNoX2NvbnRlbnRfcHJvdGVjdGlvbl9wcm9wZXJ0eSk7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkY3AuYyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jCmluZGV4IGE3ODEzOWY5ZTg0Ny4uNDBlMjIw
MGZmNjk3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hk
Y3AuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkY3AuYwpAQCAt
MTgzNSw3ICsxODM1LDkgQEAgaW50IGludGVsX2hkY3BfaW5pdChzdHJ1Y3QgaW50ZWxfY29ubmVj
dG9yICpjb25uZWN0b3IsCiAJaWYgKCFzaGltKQogCQlyZXR1cm4gLUVJTlZBTDsKIAotCXJldCA9
IGRybV9jb25uZWN0b3JfYXR0YWNoX2NvbnRlbnRfcHJvdGVjdGlvbl9wcm9wZXJ0eSgmY29ubmVj
dG9yLT5iYXNlKTsKKwlyZXQgPQorCWRybV9jb25uZWN0b3JfYXR0YWNoX2NvbnRlbnRfcHJvdGVj
dGlvbl9wcm9wZXJ0eSgmY29ubmVjdG9yLT5iYXNlLAorCQkJCQkJCSBmYWxzZSk7CiAJaWYgKHJl
dCkKIAkJcmV0dXJuIHJldDsKIApkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2Nvbm5lY3Rv
ci5oIGIvaW5jbHVkZS9kcm0vZHJtX2Nvbm5lY3Rvci5oCmluZGV4IDRjMzBkNzUxNDg3YS4uZDY0
MzI5NjdhMmE5IDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS9kcm1fY29ubmVjdG9yLmgKKysrIGIv
aW5jbHVkZS9kcm0vZHJtX2Nvbm5lY3Rvci5oCkBAIC02MDEsNiArNjAxLDEyIEBAIHN0cnVjdCBk
cm1fY29ubmVjdG9yX3N0YXRlIHsKIAkgKi8KIAl1bnNpZ25lZCBpbnQgY29udGVudF90eXBlOwog
CisJLyoqCisJICogQGhkY3BfY29udGVudF90eXBlOiBDb25uZWN0b3IgcHJvcGVydHkgdG8gcGFz
cyB0aGUgdHlwZSBvZgorCSAqIHByb3RlY3RlZCBjb250ZW50LiBUaGlzIGlzIG1vc3QgY29tbW9u
bHkgdXNlZCBmb3IgSERDUC4KKwkgKi8KKwl1bnNpZ25lZCBpbnQgaGRjcF9jb250ZW50X3R5cGU7
CisKIAkvKioKIAkgKiBAc2NhbGluZ19tb2RlOiBDb25uZWN0b3IgcHJvcGVydHkgdG8gY29udHJv
bCB0aGUKIAkgKiB1cHNjYWxpbmcsIG1vc3RseSB1c2VkIGZvciBidWlsdC1pbiBwYW5lbHMuCkBA
IC0xNDg0LDYgKzE0OTAsNyBAQCBjb25zdCBjaGFyICpkcm1fZ2V0X2R2aV9pX3NlbGVjdF9uYW1l
KGludCB2YWwpOwogY29uc3QgY2hhciAqZHJtX2dldF90dl9zdWJjb25uZWN0b3JfbmFtZShpbnQg
dmFsKTsKIGNvbnN0IGNoYXIgKmRybV9nZXRfdHZfc2VsZWN0X25hbWUoaW50IHZhbCk7CiBjb25z
dCBjaGFyICpkcm1fZ2V0X2NvbnRlbnRfcHJvdGVjdGlvbl9uYW1lKGludCB2YWwpOworY29uc3Qg
Y2hhciAqZHJtX2dldF9oZGNwX2NvbnRlbnRfdHlwZV9uYW1lKGludCB2YWwpOwogCiBpbnQgZHJt
X21vZGVfY3JlYXRlX2R2aV9pX3Byb3BlcnRpZXMoc3RydWN0IGRybV9kZXZpY2UgKmRldik7CiBp
bnQgZHJtX21vZGVfY3JlYXRlX3R2X21hcmdpbl9wcm9wZXJ0aWVzKHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYpOwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2hkY3AuaCBiL2luY2x1ZGUvZHJt
L2RybV9oZGNwLmgKaW5kZXggMTM3NzFhNDk2ZTJiLi4yOTcwYWJkZmFmMTIgMTAwNjQ0Ci0tLSBh
L2luY2x1ZGUvZHJtL2RybV9oZGNwLmgKKysrIGIvaW5jbHVkZS9kcm0vZHJtX2hkY3AuaApAQCAt
MjkxLDUgKzI5MSw1IEBAIHN0cnVjdCBkcm1fY29ubmVjdG9yOwogYm9vbCBkcm1faGRjcF9jaGVj
a19rc3ZzX3Jldm9rZWQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJCQkgdTggKmtzdnMsIHUz
MiBrc3ZfY291bnQpOwogaW50IGRybV9jb25uZWN0b3JfYXR0YWNoX2NvbnRlbnRfcHJvdGVjdGlv
bl9wcm9wZXJ0eSgKLQkJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3Rvcik7CisJCXN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsIGJvb2wgaGRjcF9jb250ZW50X3R5cGUpOwogI2Vu
ZGlmCmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fbW9kZV9jb25maWcuaCBiL2luY2x1ZGUv
ZHJtL2RybV9tb2RlX2NvbmZpZy5oCmluZGV4IGY1N2VlYTA0ODFlMC4uM2JjYmUzMDMzOWYwIDEw
MDY0NAotLS0gYS9pbmNsdWRlL2RybS9kcm1fbW9kZV9jb25maWcuaAorKysgYi9pbmNsdWRlL2Ry
bS9kcm1fbW9kZV9jb25maWcuaApAQCAtODQ5LDYgKzg0OSwxMiBAQCBzdHJ1Y3QgZHJtX21vZGVf
Y29uZmlnIHsKIAkgKi8KIAlzdHJ1Y3QgZHJtX3Byb3BlcnR5ICpjb250ZW50X3Byb3RlY3Rpb25f
cHJvcGVydHk7CiAKKwkvKioKKwkgKiBAaGRjcF9jb250ZW50X3R5cGVfcHJvcGVydHk6IERSTSBF
TlVNIHByb3BlcnR5IGZvciB0eXBlIG9mCisJICogUHJvdGVjdGVkIENvbnRlbnQuCisJICovCisJ
c3RydWN0IGRybV9wcm9wZXJ0eSAqaGRjcF9jb250ZW50X3R5cGVfcHJvcGVydHk7CisKIAkvKiBk
dW1iIGlvY3RsIHBhcmFtZXRlcnMgKi8KIAl1aW50MzJfdCBwcmVmZXJyZWRfZGVwdGgsIHByZWZl
cl9zaGFkb3c7CiAKZGlmZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9kcm0vZHJtX21vZGUuaCBiL2lu
Y2x1ZGUvdWFwaS9kcm0vZHJtX21vZGUuaAppbmRleCA1YWIzMzFlNWRjMjMuLjVjOTU0Mzk0MDkz
ZiAxMDA2NDQKLS0tIGEvaW5jbHVkZS91YXBpL2RybS9kcm1fbW9kZS5oCisrKyBiL2luY2x1ZGUv
dWFwaS9kcm0vZHJtX21vZGUuaApAQCAtMjE4LDYgKzIxOCwxMCBAQCBleHRlcm4gIkMiIHsKICNk
ZWZpbmUgRFJNX01PREVfQ09OVEVOVF9QUk9URUNUSU9OX0RFU0lSRUQgICAgIDEKICNkZWZpbmUg
RFJNX01PREVfQ09OVEVOVF9QUk9URUNUSU9OX0VOQUJMRUQgICAgIDIKIAorLyogQ29udGVudCBU
eXBlIGNsYXNzaWZpY2F0aW9uIGZvciBIRENQMi4yIHZzIG90aGVycyAqLworI2RlZmluZSBEUk1f
TU9ERV9IRENQX0NPTlRFTlRfVFlQRTAJCTAKKyNkZWZpbmUgRFJNX01PREVfSERDUF9DT05URU5U
X1RZUEUxCQkxCisKIHN0cnVjdCBkcm1fbW9kZV9tb2RlaW5mbyB7CiAJX191MzIgY2xvY2s7CiAJ
X191MTYgaGRpc3BsYXk7Ci0tIAoyLjE5LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2RyaS1kZXZlbA==
