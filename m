Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9234C6E84B
	for <lists+dri-devel@lfdr.de>; Fri, 19 Jul 2019 17:59:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0FA266E851;
	Fri, 19 Jul 2019 15:59:42 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.domeneshop.no (smtp.domeneshop.no
 [IPv6:2a01:5b40:0:3005::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C0E546E850
 for <dri-devel@lists.freedesktop.org>; Fri, 19 Jul 2019 15:59:38 +0000 (UTC)
Received: from 211.81-166-168.customer.lyse.net ([81.166.168.211]:55144
 helo=localhost.localdomain)
 by smtp.domeneshop.no with esmtpsa (TLS1.2:ECDHE_RSA_AES_128_CBC_SHA1:128)
 (Exim 4.84_2) (envelope-from <noralf@tronnes.org>)
 id 1hoVIG-0001bQ-Rf; Fri, 19 Jul 2019 17:59:36 +0200
From: =?UTF-8?q?Noralf=20Tr=C3=B8nnes?= <noralf@tronnes.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 03/11] drm/tinydrm: Use spi_is_bpw_supported()
Date: Fri, 19 Jul 2019 17:59:08 +0200
Message-Id: <20190719155916.62465-4-noralf@tronnes.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190719155916.62465-1-noralf@tronnes.org>
References: <20190719155916.62465-1-noralf@tronnes.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; d=tronnes.org; s=ds201810; 
 h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From;
 bh=IpdvvYn0Vtg8O+aDAn7qHDiTiw8SbK+LmAnQ1CYLcIQ=; 
 b=Pv4PlK8f3V0YiLatz+78De0v4K7o+vxbV11Afd8d663r0cZ8fRRnat2AMKlD+FCIazBVNkklM3JcOIT7djGn0U+Pdew4Z2ulPDb+/OttOhRhruW+eA/9SeJfRQ2J417leO618fYgaeqIGVqHL5U0ZFRKmp4EKa0QibvuuH+BUotPQySPhYWq54IctleJJVXCpnqD1DxZkJbNQ3UdtRXRntIBOV4cU84MrnMNTOvI21mwYj+P8OmSYlLllf0KCKpVmvoWp0cSkf7x7qfZWbU1BM1uij9bSeVtke/6z/E3/HX5KCPCDNRCMfIX9vZgAbXSBNdOI0E9QPQ8FIPPnAdguw==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: sam@ravnborg.org, david@lechnology.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBtZWFucyB0aGF0IHRpbnlkcm1fc3BpX2Jwd19zdXBwb3J0ZWQoKSBjYW4gYmUgcmVtb3Zl
ZC4KClJldmlld2VkLWJ5OiBTYW0gUmF2bmJvcmcgPHNhbUByYXZuYm9yZy5vcmc+ClNpZ25lZC1v
ZmYtYnk6IE5vcmFsZiBUcsO4bm5lcyA8bm9yYWxmQHRyb25uZXMub3JnPgotLS0KIC4uLi9ncHUv
ZHJtL3Rpbnlkcm0vY29yZS90aW55ZHJtLWhlbHBlcnMuYyAgICB8IDMyICstLS0tLS0tLS0tLS0t
LS0tLS0KIGRyaXZlcnMvZ3B1L2RybS90aW55ZHJtL21pcGktZGJpLmMgICAgICAgICAgICB8ICA1
ICsrLQogaW5jbHVkZS9kcm0vdGlueWRybS90aW55ZHJtLWhlbHBlcnMuaCAgICAgICAgIHwgIDEg
LQogMyBmaWxlcyBjaGFuZ2VkLCAzIGluc2VydGlvbnMoKyksIDM1IGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL2NvcmUvdGlueWRybS1oZWxwZXJzLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vdGlueWRybS9jb3JlL3Rpbnlkcm0taGVscGVycy5jCmluZGV4IGRm
ZWFmYWM0YzY1Ni4uYWViNDljZWZlZDI1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGlu
eWRybS9jb3JlL3Rpbnlkcm0taGVscGVycy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJt
L2NvcmUvdGlueWRybS1oZWxwZXJzLmMKQEAgLTUzLDM2ICs1Myw2IEBAIHNpemVfdCB0aW55ZHJt
X3NwaV9tYXhfdHJhbnNmZXJfc2l6ZShzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpLCBzaXplX3QgbWF4
X2xlbikKIH0KIEVYUE9SVF9TWU1CT0wodGlueWRybV9zcGlfbWF4X3RyYW5zZmVyX3NpemUpOwog
Ci0vKioKLSAqIHRpbnlkcm1fc3BpX2Jwd19zdXBwb3J0ZWQgLSBDaGVjayBpZiBiaXRzIHBlciB3
b3JkIGlzIHN1cHBvcnRlZAotICogQHNwaTogU1BJIGRldmljZQotICogQGJwdzogQml0cyBwZXIg
d29yZAotICoKLSAqIFRoaXMgZnVuY3Rpb24gY2hlY2tzIHRvIHNlZSBpZiB0aGUgU1BJIG1hc3Rl
ciBkcml2ZXIgc3VwcG9ydHMgQGJwdy4KLSAqCi0gKiBSZXR1cm5zOgotICogVHJ1ZSBpZiBAYnB3
IGlzIHN1cHBvcnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLgotICovCi1ib29sIHRpbnlkcm1fc3BpX2Jw
d19zdXBwb3J0ZWQoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSwgdTggYnB3KQotewotCXUzMiBicHdf
bWFzayA9IHNwaS0+bWFzdGVyLT5iaXRzX3Blcl93b3JkX21hc2s7Ci0KLQlpZiAoYnB3ID09IDgp
Ci0JCXJldHVybiB0cnVlOwotCi0JaWYgKCFicHdfbWFzaykgewotCQlkZXZfd2Fybl9vbmNlKCZz
cGktPmRldiwKLQkJCSAgICAgICJiaXRzX3Blcl93b3JkX21hc2sgbm90IHNldCwgYXNzdW1lIDgt
Yml0IG9ubHlcbiIpOwotCQlyZXR1cm4gZmFsc2U7Ci0JfQotCi0JaWYgKGJwd19tYXNrICYgU1BJ
X0JQV19NQVNLKGJwdykpCi0JCXJldHVybiB0cnVlOwotCi0JcmV0dXJuIGZhbHNlOwotfQotRVhQ
T1JUX1NZTUJPTCh0aW55ZHJtX3NwaV9icHdfc3VwcG9ydGVkKTsKLQogc3RhdGljIHZvaWQKIHRp
bnlkcm1fZGJnX3NwaV9wcmludChzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpLCBzdHJ1Y3Qgc3BpX3Ry
YW5zZmVyICp0ciwKIAkJICAgICAgY29uc3Qgdm9pZCAqYnVmLCBpbnQgaWR4LCBib29sIHR4KQpA
QCAtMTU5LDcgKzEyOSw3IEBAIGludCB0aW55ZHJtX3NwaV90cmFuc2ZlcihzdHJ1Y3Qgc3BpX2Rl
dmljZSAqc3BpLCB1MzIgc3BlZWRfaHosCiAJCXByX2RlYnVnKCJbZHJtOiVzXSBicHc9JXUsIG1h
eF9jaHVuaz0lenUsIHRyYW5zZmVyczpcbiIsCiAJCQkgX19mdW5jX18sIGJwdywgbWF4X2NodW5r
KTsKIAotCWlmIChicHcgPT0gMTYgJiYgIXRpbnlkcm1fc3BpX2Jwd19zdXBwb3J0ZWQoc3BpLCAx
NikpIHsKKwlpZiAoYnB3ID09IDE2ICYmICFzcGlfaXNfYnB3X3N1cHBvcnRlZChzcGksIDE2KSkg
ewogCQl0ci5iaXRzX3Blcl93b3JkID0gODsKIAkJaWYgKHRpbnlkcm1fbWFjaGluZV9saXR0bGVf
ZW5kaWFuKCkpIHsKIAkJCXN3YXBfYnVmID0ga21hbGxvYyhtaW4obGVuLCBtYXhfY2h1bmspLCBH
RlBfS0VSTkVMKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL21pcGktZGJp
LmMgYi9kcml2ZXJzL2dwdS9kcm0vdGlueWRybS9taXBpLWRiaS5jCmluZGV4IDc5MWEwYjQzYmVl
Zi4uYjZjNDY0NTNlOTA0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGlueWRybS9taXBp
LWRiaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL21pcGktZGJpLmMKQEAgLTc4Miw3
ICs3ODIsNyBAQCBzdGF0aWMgaW50IG1pcGlfZGJpX3NwaTFfdHJhbnNmZXIoc3RydWN0IG1pcGlf
ZGJpICptaXBpLCBpbnQgZGMsCiAJdTE2ICpkc3QxNjsKIAlpbnQgcmV0OwogCi0JaWYgKCF0aW55
ZHJtX3NwaV9icHdfc3VwcG9ydGVkKHNwaSwgOSkpCisJaWYgKCFzcGlfaXNfYnB3X3N1cHBvcnRl
ZChzcGksIDkpKQogCQlyZXR1cm4gbWlwaV9kYmlfc3BpMWVfdHJhbnNmZXIobWlwaSwgZGMsIGJ1
ZiwgbGVuLCBicHcpOwogCiAJdHIuc3BlZWRfaHogPSBtaXBpX2RiaV9zcGlfY21kX21heF9zcGVl
ZChzcGksIGxlbik7CkBAIC0xMDAzLDggKzEwMDMsNyBAQCBpbnQgbWlwaV9kYmlfc3BpX2luaXQo
c3RydWN0IHNwaV9kZXZpY2UgKnNwaSwgc3RydWN0IG1pcGlfZGJpICptaXBpLAogCWlmIChkYykg
ewogCQltaXBpLT5jb21tYW5kID0gbWlwaV9kYmlfdHlwZWMzX2NvbW1hbmQ7CiAJCW1pcGktPmRj
ID0gZGM7Ci0JCWlmICh0aW55ZHJtX21hY2hpbmVfbGl0dGxlX2VuZGlhbigpICYmCi0JCSAgICAh
dGlueWRybV9zcGlfYnB3X3N1cHBvcnRlZChzcGksIDE2KSkKKwkJaWYgKHRpbnlkcm1fbWFjaGlu
ZV9saXR0bGVfZW5kaWFuKCkgJiYgIXNwaV9pc19icHdfc3VwcG9ydGVkKHNwaSwgMTYpKQogCQkJ
bWlwaS0+c3dhcF9ieXRlcyA9IHRydWU7CiAJfSBlbHNlIHsKIAkJbWlwaS0+Y29tbWFuZCA9IG1p
cGlfZGJpX3R5cGVjMV9jb21tYW5kOwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vdGlueWRybS90
aW55ZHJtLWhlbHBlcnMuaCBiL2luY2x1ZGUvZHJtL3Rpbnlkcm0vdGlueWRybS1oZWxwZXJzLmgK
aW5kZXggZjhiY2FkZjQ4Y2IxLi4xNDZiYzM4MzI5N2MgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJt
L3Rpbnlkcm0vdGlueWRybS1oZWxwZXJzLmgKKysrIGIvaW5jbHVkZS9kcm0vdGlueWRybS90aW55
ZHJtLWhlbHBlcnMuaApAQCAtNDMsNyArNDMsNiBAQCBpbnQgdGlueWRybV9kaXNwbGF5X3BpcGVf
aW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZHJtLAogCQkJICAgICAgdW5zaWduZWQgaW50IHJvdGF0
aW9uKTsKIAogc2l6ZV90IHRpbnlkcm1fc3BpX21heF90cmFuc2Zlcl9zaXplKHN0cnVjdCBzcGlf
ZGV2aWNlICpzcGksIHNpemVfdCBtYXhfbGVuKTsKLWJvb2wgdGlueWRybV9zcGlfYnB3X3N1cHBv
cnRlZChzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpLCB1OCBicHcpOwogaW50IHRpbnlkcm1fc3BpX3Ry
YW5zZmVyKHN0cnVjdCBzcGlfZGV2aWNlICpzcGksIHUzMiBzcGVlZF9oeiwKIAkJCSBzdHJ1Y3Qg
c3BpX3RyYW5zZmVyICpoZWFkZXIsIHU4IGJwdywgY29uc3Qgdm9pZCAqYnVmLAogCQkJIHNpemVf
dCBsZW4pOwotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9k
cmktZGV2ZWw=
