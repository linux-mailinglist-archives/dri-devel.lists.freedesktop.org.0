Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DC64F22D22E
	for <lists+dri-devel@lfdr.de>; Sat, 25 Jul 2020 01:26:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 868776EA4B;
	Fri, 24 Jul 2020 23:26:24 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 857EB6EA4A;
 Fri, 24 Jul 2020 23:26:22 +0000 (UTC)
IronPort-SDR: hkqRb9uKQ/2pyRYyeqIbA1NlxMc2wEbQRRDPevDo9h79gi/4AyH/2Vi2V+mhp2NWRO0Gyr401Y
 s6Q9sWCNssLw==
X-IronPort-AV: E=McAfee;i="6000,8403,9692"; a="152071520"
X-IronPort-AV: E=Sophos;i="5.75,392,1589266800"; d="scan'208";a="152071520"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by orsmga102.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 24 Jul 2020 16:26:21 -0700
IronPort-SDR: 6ix0auTjq1EvPCoeNorl1Gb8dGt6qMjish+wO0ac2XdGi2WA94suxdfb7h6bSoB8sGgfbsfssl
 OnYVCjFhgjIg==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.75,392,1589266800"; d="scan'208";a="329063209"
Received: from przanoni-mobl.amr.corp.intel.com ([10.255.228.246])
 by orsmga007.jf.intel.com with ESMTP; 24 Jul 2020 16:26:20 -0700
Message-ID: <9a77507657f9f25a651edb39756c83f454f06631.camel@intel.com>
Subject: Re: [PATCH v5 2/5] drm/i915: Add support for async flips in I915
From: Paulo Zanoni <paulo.r.zanoni@intel.com>
To: Karthik B S <karthik.b.s@intel.com>, intel-gfx@lists.freedesktop.org
Date: Fri, 24 Jul 2020 16:26:11 -0700
In-Reply-To: <20200720113117.16131-3-karthik.b.s@intel.com>
References: <20200720113117.16131-1-karthik.b.s@intel.com>
 <20200720113117.16131-3-karthik.b.s@intel.com>
User-Agent: Evolution 3.34.4 (3.34.4-1.fc31) 
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org, vandita.kulkarni@intel.com,
 uma.shankar@intel.com, daniel.vetter@intel.com, nicholas.kazlauskas@amd.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RW0gc2VnLCAyMDIwLTA3LTIwIMOgcyAxNzowMSArMDUzMCwgS2FydGhpayBCIFMgZXNjcmV2ZXU6
Cj4gU2V0IHRoZSBBc3luYyBBZGRyZXNzIFVwZGF0ZSBFbmFibGUgYml0IGluIHBsYW5lIGN0bAo+
IHdoZW4gYXN5bmMgZmxpcCBpcyByZXF1ZXN0ZWQuCj4gCj4gdjI6IC1Nb3ZlIHRoZSBBc3luYyBm
bGlwIGVuYWJsZW1lbnQgdG8gaW5kaXZpZHVhbCBwYXRjaCAoUGF1bG8pCj4gCj4gdjM6IC1SZWJh
c2VkLgo+IAo+IHY0OiAtQWRkIHNlcGFyYXRlIHBsYW5lIGhvb2sgZm9yIGFzeW5jIGZsaXAgY2Fz
ZSAoVmlsbGUpCj4gCj4gdjU6IC1SZWJhc2VkLgo+IAo+IFNpZ25lZC1vZmYtYnk6IEthcnRoaWsg
QiBTIDxrYXJ0aGlrLmIuc0BpbnRlbC5jb20+Cj4gU2lnbmVkLW9mZi1ieTogVmFuZGl0YSBLdWxr
YXJuaSA8dmFuZGl0YS5rdWxrYXJuaUBpbnRlbC5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIHwgIDYgKysrKysKPiAgZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYyAgfCAyNSArKysrKysrKysrKysrKysrKysr
Kwo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5oICAgICAgICAgICAgICB8ICAxICsK
PiAgMyBmaWxlcyBjaGFuZ2VkLCAzMiBpbnNlcnRpb25zKCspCj4gCj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKPiBpbmRleCBiOGZmMDMyMTk1ZDkuLjQ3
NzNmMzllNTkyNCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2Rpc3BsYXkuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZGlzcGxheS5jCj4gQEAgLTQ3NjYsNiArNDc2NiwxMiBAQCB1MzIgc2tsX3BsYW5lX2N0bChjb25z
dCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKPiAgCWNvbnN0IHN0cnVjdCBk
cm1faW50ZWxfc3ByaXRlX2NvbG9ya2V5ICprZXkgPSAmcGxhbmVfc3RhdGUtPmNrZXk7Cj4gIAl1
MzIgcGxhbmVfY3RsOwo+ICAKPiArCS8qIER1cmluZyBBc3luYyBmbGlwLCBubyBvdGhlciB1cGRh
dGVzIGFyZSBhbGxvd2VkICovCgpNeSB1bmRlcnN0YW5kaW5nIGlzIHRoYXQgdGhpcyBmdW5jdGlv
biBpcyBmdWxseSBzZXR0aW5nIHRoZSByaWdodCBiaXRzCmJhc2VkIG9uIHRoZSBjaG9zZW4gY29u
ZmlnIChpbnN0ZWFkIG9mIGRvaW5nIHJlYWQtbW9kaWZ5LXdyaXRlKSwgYW5kCnRoZSBjaGVja3Mg
Zm9yICJvdGhlciB1cGRhdGVzIiB3ZXJlIGRvbmUgYmVmb3JlLiBTbyB0aGUgbG9naWMKaW1wbGVt
ZW50ZWQgaGVyZSBvZiBlYXJseSByZXR1cm5pbmcgZG9lc24ndCBtYWtlIHNlbnNlLgoKCj4gKwlp
ZiAoY3J0Y19zdGF0ZS0+dWFwaS5hc3luY19mbGlwKSB7Cj4gKwkJcGxhbmVfY3RsIHw9IFBMQU5F
X0NUTF9BU1lOQ19GTElQOwoKSSB3b25kZXIgd2h5IGdjYyBkb2VzIG5vdCBjb21wbGFpbiB3ZSdy
ZSBPUmluZyB3aXRoIGFuIHVuaXRpYWxpemVkCnZhbHVlLgoKCj4gKwkJcmV0dXJuIHBsYW5lX2N0
bDsKPiArCX0KPiArCj4gIAlwbGFuZV9jdGwgPSBQTEFORV9DVExfRU5BQkxFOwoKSXQgc2VlbXMg
dG8gYmUgdGhlIHJldHVybiBhYm92ZSBtZWFucyB3ZSdsbCBuZXZlciBldmVuIHRyeSB0byBlbmFi
bGUKdGhlIHBsYW5lLCB3ZSdyZSBvbmx5IHJlbHlpbmcgb24gdGhlIGZhY3QgdGhhdCBwbGFuZV9j
dGwgaXMgbm90IHplcm8KaW5pdGlhbGl6ZSBzbyBtYXliZSAgYml0IDMxIGlzIGFscmVhZHkgc2V0
LgoKCj4gIAo+ICAJaWYgKElOVEVMX0dFTihkZXZfcHJpdikgPCAxMCAmJiAhSVNfR0VNSU5JTEFL
RShkZXZfcHJpdikpIHsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9zcHJpdGUuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfc3By
aXRlLmMKPiBpbmRleCBjMjZjYTAyOWZjMGEuLjM3NDc0ODJlOGZhMyAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX3Nwcml0ZS5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9zcHJpdGUuYwo+IEBAIC02MDMsNiArNjAzLDI0
IEBAIGljbF9wcm9ncmFtX2lucHV0X2NzYyhzdHJ1Y3QgaW50ZWxfcGxhbmUgKnBsYW5lLAo+ICAJ
CQkgIFBMQU5FX0lOUFVUX0NTQ19QT1NUT0ZGKHBpcGUsIHBsYW5lX2lkLCAyKSwgMHgwKTsKPiAg
fQo+ICAKPiArc3RhdGljIHZvaWQKPiArc2tsX3Byb2dyYW1fYXN5bmNfc3VyZmFjZV9hZGRyZXNz
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKPiArCQkJCSAgY29uc3Qgc3RydWN0
IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZSwKPiArCQkJCSAgZW51bSBwaXBlIHBpcGUs
IGVudW0gcGxhbmVfaWQgcGxhbmVfaWQsCj4gKwkJCQkgIHUzMiBzdXJmX2FkZHIpCj4gK3sKPiAr
CXVuc2lnbmVkIGxvbmcgaXJxZmxhZ3M7Cj4gKwl1MzIgcGxhbmVfY3RsID0gcGxhbmVfc3RhdGUt
PmN0bDsKPiArCj4gKwlzcGluX2xvY2tfaXJxc2F2ZSgmZGV2X3ByaXYtPnVuY29yZS5sb2NrLCBp
cnFmbGFncyk7Cj4gKwo+ICsJaW50ZWxfZGVfd3JpdGVfZncoZGV2X3ByaXYsIFBMQU5FX0NUTChw
aXBlLCBwbGFuZV9pZCksIHBsYW5lX2N0bCk7Cj4gKwlpbnRlbF9kZV93cml0ZV9mdyhkZXZfcHJp
diwgUExBTkVfU1VSRihwaXBlLCBwbGFuZV9pZCksCj4gKwkJCSAgaW50ZWxfcGxhbmVfZ2d0dF9v
ZmZzZXQocGxhbmVfc3RhdGUpICsgc3VyZl9hZGRyKTsKPiArCj4gKwlzcGluX3VubG9ja19pcnFy
ZXN0b3JlKCZkZXZfcHJpdi0+dW5jb3JlLmxvY2ssIGlycWZsYWdzKTsKPiArfQo+ICsKPiAgc3Rh
dGljIHZvaWQKPiAgc2tsX3Byb2dyYW1fcGxhbmUoc3RydWN0IGludGVsX3BsYW5lICpwbGFuZSwK
PiAgCQkgIGNvbnN0IHN0cnVjdCBpbnRlbF9jcnRjX3N0YXRlICpjcnRjX3N0YXRlLAo+IEBAIC02
MzEsNiArNjQ5LDEzIEBAIHNrbF9wcm9ncmFtX3BsYW5lKHN0cnVjdCBpbnRlbF9wbGFuZSAqcGxh
bmUsCj4gIAl1MzIga2V5bXNrLCBrZXltYXg7Cj4gIAl1MzIgcGxhbmVfY3RsID0gcGxhbmVfc3Rh
dGUtPmN0bDsKPiAgCj4gKwkvKiBEdXJpbmcgQXN5bmMgZmxpcCwgbm8gb3RoZXIgdXBkYXRlcyBh
cmUgYWxsb3dlZCAqLwo+ICsJaWYgKGNydGNfc3RhdGUtPnVhcGkuYXN5bmNfZmxpcCkgewo+ICsJ
CXNrbF9wcm9ncmFtX2FzeW5jX3N1cmZhY2VfYWRkcmVzcyhkZXZfcHJpdiwgcGxhbmVfc3RhdGUs
Cj4gKwkJCQkJCSAgcGlwZSwgcGxhbmVfaWQsIHN1cmZfYWRkcik7Cj4gKwkJcmV0dXJuOwo+ICsJ
fQoKCkknZCB2b3RlIGZvciB1cyB0byBrZWVwIHRoZSAiZG9uJ3QgcmV3cml0ZSByZWdpc3RlcnMg
dGhhdCBzaG91bGRuJ3QKY2hhbmdlIiBwYXJ0IG9uIGl0cyBvd24gY29tbWl0LCBzaW5jZSBpdCdz
IGp1c3QgYW4gb3B0aW1pemF0aW9uLiBJdApjb3VsZCBldmVuIGdvIGF0IHRoZSBlbmQgb2YgdGhl
IHNlcmllcy4gQnV0IHBlcmhhcHMgdGhpcyBpcyBzaW1wbGUKZW5vdWdoIGFuZCBub3QgbmVlZGVk
LgoKCj4gKwo+ICAJcGxhbmVfY3RsIHw9IHNrbF9wbGFuZV9jdGxfY3J0YyhjcnRjX3N0YXRlKTsK
PiAgCj4gIAlpZiAoSU5URUxfR0VOKGRldl9wcml2KSA+PSAxMCB8fCBJU19HRU1JTklMQUtFKGRl
dl9wcml2KSkKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaCBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVnLmgKPiBpbmRleCA4Y2VlMDYzMTRkNWQuLjE5
YWFkNDE5OTg3NCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlZy5o
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9yZWcuaAo+IEBAIC02OTM1LDYgKzY5
MzUsNyBAQCBlbnVtIHsKPiAgI2RlZmluZSAgIFBMQU5FX0NUTF9USUxFRF9YCQkJKDEgPDwgMTAp
Cj4gICNkZWZpbmUgICBQTEFORV9DVExfVElMRURfWQkJCSg0IDw8IDEwKQo+ICAjZGVmaW5lICAg
UExBTkVfQ1RMX1RJTEVEX1lGCQkJKDUgPDwgMTApCj4gKyNkZWZpbmUgICBQTEFORV9DVExfQVNZ
TkNfRkxJUAkJCSgxIDw8IDkpCj4gICNkZWZpbmUgICBQTEFORV9DVExfRkxJUF9IT1JJWk9OVEFM
CQkoMSA8PCA4KQo+ICAjZGVmaW5lICAgUExBTkVfQ1RMX01FRElBX0RFQ09NUFJFU1NJT05fRU5B
QkxFCSgxIDw8IDQpIC8qIFRHTCsgKi8KPiAgI2RlZmluZSAgIFBMQU5FX0NUTF9BTFBIQV9NQVNL
CQkJKDB4MyA8PCA0KSAvKiBQcmUtR0xLICovCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9kcmktZGV2ZWwK
