Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B000910FFDB
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 15:15:41 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A5A7C6E05A;
	Tue,  3 Dec 2019 14:15:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1CBDD6E5DB
 for <dri-devel@lists.freedesktop.org>; Tue,  3 Dec 2019 14:15:26 +0000 (UTC)
Received: from localhost.localdomain (unknown
 [IPv6:2a01:e0a:2c:6930:5cf4:84a1:2763:fe0d])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: bbrezillon)
 by bhuna.collabora.co.uk (Postfix) with ESMTPSA id 388A52800D3;
 Tue,  3 Dec 2019 14:15:24 +0000 (GMT)
From: Boris Brezillon <boris.brezillon@collabora.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v4 02/11] drm/bridge: Introduce drm_bridge_get_next_bridge()
Date: Tue,  3 Dec 2019 15:15:06 +0100
Message-Id: <20191203141515.3597631-3-boris.brezillon@collabora.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191203141515.3597631-1-boris.brezillon@collabora.com>
References: <20191203141515.3597631-1-boris.brezillon@collabora.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Mark Rutland <mark.rutland@arm.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 Thierry Reding <thierry.reding@gmail.com>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>, kernel@collabora.com,
 Sam Ravnborg <sam@ravnborg.org>,
 Nikita Yushchenko <nikita.yoush@cogentembedded.com>,
 Andrey Smirnov <andrew.smirnov@gmail.com>,
 Kyungmin Park <kyungmin.park@samsung.com>, Chris Healy <cphealy@gmail.com>,
 devicetree@vger.kernel.org, Jonas Karlman <jonas@kwiboo.se>,
 Rob Herring <robh+dt@kernel.org>, Jernej Skrabec <jernej.skrabec@siol.net>,
 Seung-Woo Kim <sw0312.kim@samsung.com>,
 Boris Brezillon <boris.brezillon@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QW5kIHVzZSBpdCBpbiBkcml2ZXJzIGFjY2Vzc2luZyB0aGUgYnJpZGdlLT5uZXh0IGZpZWxkIGRp
cmVjdGx5LgpUaGlzIGlzIHBhcnQgb2Ygb3VyIGF0dGVtcHQgdG8gbWFrZSB0aGUgYnJpZGdlIGNo
YWluIGEgZG91YmxlLWxpbmtlZCBsaXN0CmJhc2VkIG9uIHRoZSBnZW5lcmljIGxpc3QgaGVscGVy
cy4KClNpZ25lZC1vZmYtYnk6IEJvcmlzIEJyZXppbGxvbiA8Ym9yaXMuYnJlemlsbG9uQGNvbGxh
Ym9yYS5jb20+ClJldmlld2VkLWJ5OiBOZWlsIEFybXN0cm9uZyA8bmFybXN0cm9uZ0BiYXlsaWJy
ZS5jb20+ClJldmlld2VkLWJ5OiBMYXVyZW50IFBpbmNoYXJ0IDxsYXVyZW50LnBpbmNoYXJ0QGlk
ZWFzb25ib2FyZC5jb20+Ci0tLQpDaGFuZ2VzIGluIHY0OgoqIFJlbmFtZSB0aGUgaGVscGVyCiog
QWRkIFItYnMKCkNoYW5nZXMgaW4gdjM6CiogSW5saW5lIGRybV9icmlkZ2VfY2hhaW5fZ2V0X25l
eHRfYnJpZGdlKCkgKFN1Z2dlc3RlZCBieSBMYXVyZW50KQoKQ2hhbmdlcyBpbiB2MjoKKiBLaWxs
IHRoZSBsYXN0L2ZpcnN0IGhlbHBlcnMgKHRoZXkncmUgbm90IHJlYWxseSBuZWVkZWQpCiogRHJv
cCB0aGUgIWJyaWRnZSB8fCAhYnJpZGdlLT5lbmNvZGVyIHRlc3QKLS0tCiBkcml2ZXJzL2dwdS9k
cm0vZHJtX2VuY29kZXIuYyAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vbWVkaWF0
ZWsvbXRrX2hkbWkuYyAgICB8ICA2ICsrKystLQogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21h
cF9kcnYuYyAgICAgfCAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2VuY29k
ZXIuYyB8ICAzICsrLQogaW5jbHVkZS9kcm0vZHJtX2JyaWRnZS5oICAgICAgICAgICAgICAgfCAx
MyArKysrKysrKysrKysrCiA1IGZpbGVzIGNoYW5nZWQsIDIyIGluc2VydGlvbnMoKyksIDYgZGVs
ZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9lbmNvZGVyLmMgYi9k
cml2ZXJzL2dwdS9kcm0vZHJtX2VuY29kZXIuYwppbmRleCA4MGQ4OGE1NTMwMmUuLmZjZDNhZjFh
YzQzMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9lbmNvZGVyLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2RybV9lbmNvZGVyLmMKQEAgLTE3MSw3ICsxNzEsNyBAQCB2b2lkIGRybV9l
bmNvZGVyX2NsZWFudXAoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQogCQlzdHJ1Y3QgZHJt
X2JyaWRnZSAqbmV4dDsKIAogCQl3aGlsZSAoYnJpZGdlKSB7Ci0JCQluZXh0ID0gYnJpZGdlLT5u
ZXh0OworCQkJbmV4dCA9IGRybV9icmlkZ2VfZ2V0X25leHRfYnJpZGdlKGJyaWRnZSk7CiAJCQlk
cm1fYnJpZGdlX2RldGFjaChicmlkZ2UpOwogCQkJYnJpZGdlID0gbmV4dDsKIAkJfQpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19oZG1pLmMgYi9kcml2ZXJzL2dwdS9k
cm0vbWVkaWF0ZWsvbXRrX2hkbWkuYwppbmRleCBlZTNhNWU5YzEwYzQuLjVlNGE0ZGJkYTQ0MyAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19oZG1pLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL21lZGlhdGVrL210a19oZG1pLmMKQEAgLTEyMzgsMTYgKzEyMzgsMTggQEAg
c3RhdGljIGludCBtdGtfaGRtaV9jb25uX21vZGVfdmFsaWQoc3RydWN0IGRybV9jb25uZWN0b3Ig
KmNvbm4sCiAJCQkJICAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKQogewogCXN0cnVj
dCBtdGtfaGRtaSAqaGRtaSA9IGhkbWlfY3R4X2Zyb21fY29ubihjb25uKTsKKwlzdHJ1Y3QgZHJt
X2JyaWRnZSAqbmV4dF9icmlkZ2U7CiAKIAlkZXZfZGJnKGhkbWktPmRldiwgInhyZXM9JWQsIHly
ZXM9JWQsIHJlZnJlc2g9JWQsIGludGw9JWQgY2xvY2s9JWRcbiIsCiAJCW1vZGUtPmhkaXNwbGF5
LCBtb2RlLT52ZGlzcGxheSwgbW9kZS0+dnJlZnJlc2gsCiAJCSEhKG1vZGUtPmZsYWdzICYgRFJN
X01PREVfRkxBR19JTlRFUkxBQ0UpLCBtb2RlLT5jbG9jayAqIDEwMDApOwogCi0JaWYgKGhkbWkt
PmJyaWRnZS5uZXh0KSB7CisJbmV4dF9icmlkZ2UgPSBkcm1fYnJpZGdlX2dldF9uZXh0X2JyaWRn
ZSgmaGRtaS0+YnJpZGdlKTsKKwlpZiAobmV4dF9icmlkZ2UpIHsKIAkJc3RydWN0IGRybV9kaXNw
bGF5X21vZGUgYWRqdXN0ZWRfbW9kZTsKIAogCQlkcm1fbW9kZV9jb3B5KCZhZGp1c3RlZF9tb2Rl
LCBtb2RlKTsKLQkJaWYgKCFkcm1fYnJpZGdlX2NoYWluX21vZGVfZml4dXAoaGRtaS0+YnJpZGdl
Lm5leHQsIG1vZGUsCisJCWlmICghZHJtX2JyaWRnZV9jaGFpbl9tb2RlX2ZpeHVwKG5leHRfYnJp
ZGdlLCBtb2RlLAogCQkJCQkJICZhZGp1c3RlZF9tb2RlKSkKIAkJCXJldHVybiBNT0RFX0JBRDsK
IAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2Rydi5jIGIvZHJp
dmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9kcnYuYwppbmRleCBiM2UyMmM4OTBjNTEuLmQyNzUw
ZjYwZjUxOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9kcnYuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2Rydi5jCkBAIC0yMTcsOCArMjE3LDgg
QEAgc3RhdGljIGludCBvbWFwX2Rpc3BsYXlfaWQoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqb3V0
cHV0KQogCX0gZWxzZSBpZiAob3V0cHV0LT5icmlkZ2UpIHsKIAkJc3RydWN0IGRybV9icmlkZ2Ug
KmJyaWRnZSA9IG91dHB1dC0+YnJpZGdlOwogCi0JCXdoaWxlIChicmlkZ2UtPm5leHQpCi0JCQli
cmlkZ2UgPSBicmlkZ2UtPm5leHQ7CisJCXdoaWxlIChkcm1fYnJpZGdlX2dldF9uZXh0X2JyaWRn
ZShicmlkZ2UpKQorCQkJYnJpZGdlID0gZHJtX2JyaWRnZV9nZXRfbmV4dF9icmlkZ2UoYnJpZGdl
KTsKIAogCQlub2RlID0gYnJpZGdlLT5vZl9ub2RlOwogCX0gZWxzZSBpZiAob3V0cHV0LT5wYW5l
bCkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9lbmNvZGVyLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2VuY29kZXIuYwppbmRleCAyNGJiZTlmMmEz
MmUuLjRmMjE2NWEzNzc5NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21h
cF9lbmNvZGVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9lbmNvZGVyLmMK
QEAgLTEyNiw3ICsxMjYsOCBAQCBzdGF0aWMgdm9pZCBvbWFwX2VuY29kZXJfbW9kZV9zZXQoc3Ry
dWN0IGRybV9lbmNvZGVyICplbmNvZGVyLAogCWZvciAoZHNzZGV2ID0gb3V0cHV0OyBkc3NkZXY7
IGRzc2RldiA9IGRzc2Rldi0+bmV4dCkKIAkJb21hcF9lbmNvZGVyX3VwZGF0ZV92aWRlb21vZGVf
ZmxhZ3MoJnZtLCBkc3NkZXYtPmJ1c19mbGFncyk7CiAKLQlmb3IgKGJyaWRnZSA9IG91dHB1dC0+
YnJpZGdlOyBicmlkZ2U7IGJyaWRnZSA9IGJyaWRnZS0+bmV4dCkgeworCWZvciAoYnJpZGdlID0g
b3V0cHV0LT5icmlkZ2U7IGJyaWRnZTsKKwkgICAgIGJyaWRnZSA9IGRybV9icmlkZ2VfZ2V0X25l
eHRfYnJpZGdlKGJyaWRnZSkpIHsKIAkJaWYgKCFicmlkZ2UtPnRpbWluZ3MpCiAJCQljb250aW51
ZTsKIApkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2JyaWRnZS5oIGIvaW5jbHVkZS9kcm0v
ZHJtX2JyaWRnZS5oCmluZGV4IDcyNjQzNWJhZjRhZC4uNDZmYzE3YzYzYTQ0IDEwMDY0NAotLS0g
YS9pbmNsdWRlL2RybS9kcm1fYnJpZGdlLmgKKysrIGIvaW5jbHVkZS9kcm0vZHJtX2JyaWRnZS5o
CkBAIC00MDksNiArNDA5LDE5IEBAIHN0cnVjdCBkcm1fYnJpZGdlICpvZl9kcm1fZmluZF9icmlk
Z2Uoc3RydWN0IGRldmljZV9ub2RlICpucCk7CiBpbnQgZHJtX2JyaWRnZV9hdHRhY2goc3RydWN0
IGRybV9lbmNvZGVyICplbmNvZGVyLCBzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCQkgICAg
ICBzdHJ1Y3QgZHJtX2JyaWRnZSAqcHJldmlvdXMpOwogCisvKioKKyAqIGRybV9icmlkZ2VfZ2V0
X25leHRfYnJpZGdlKCkgLSBHZXQgdGhlIG5leHQgYnJpZGdlIGluIHRoZSBjaGFpbgorICogQGJy
aWRnZTogYnJpZGdlIG9iamVjdAorICoKKyAqIFJFVFVSTlM6CisgKiB0aGUgbmV4dCBicmlkZ2Ug
aW4gdGhlIGNoYWluIGFmdGVyIEBicmlkZ2UsIG9yIE5VTEwgaWYgQGJyaWRnZSBpcyB0aGUgbGFz
dC4KKyAqLworc3RhdGljIGlubGluZSBzdHJ1Y3QgZHJtX2JyaWRnZSAqCitkcm1fYnJpZGdlX2dl
dF9uZXh0X2JyaWRnZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQoreworCXJldHVybiBicmlk
Z2UtPm5leHQ7Cit9CisKIGJvb2wgZHJtX2JyaWRnZV9jaGFpbl9tb2RlX2ZpeHVwKHN0cnVjdCBk
cm1fYnJpZGdlICpicmlkZ2UsCiAJCQkJIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICpt
b2RlLAogCQkJCSBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSk7Ci0tIAoy
LjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRy
aS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
