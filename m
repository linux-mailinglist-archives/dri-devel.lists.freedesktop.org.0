Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4D8DA2C271
	for <lists+dri-devel@lfdr.de>; Tue, 28 May 2019 11:05:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 123D96E1C0;
	Tue, 28 May 2019 09:04:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x542.google.com (mail-ed1-x542.google.com
 [IPv6:2a00:1450:4864:20::542])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0CE326E1AA
 for <dri-devel@lists.freedesktop.org>; Tue, 28 May 2019 09:03:56 +0000 (UTC)
Received: by mail-ed1-x542.google.com with SMTP id n17so30690078edb.0
 for <dri-devel@lists.freedesktop.org>; Tue, 28 May 2019 02:03:55 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=xl+FmsN1b/Z0dRTg7/MTehgEAqXNH21CIN1ZETZQ/L8=;
 b=MF/cZ/xzCxznqIWbvWR4eCxeWOzndlqRD1Idt6+vArLKTiJkVn1DnB1BfUPzL0pljo
 6oOQWMCsOOrRrGOpB1SAKcWOo4TNn8De9CD3jcokNseoAzWoWjPnXHsHszYlXmR2r2kJ
 RNykPO9gwwFiXHNjDDWqKd1YdpV0nlhV8RMGJAsA2ZlyzUB1VNh8ysgSOB5IzWS/4YTI
 VqZo/ZdRvO/E9R7TQOp7mUee9OU6BKE+ZLMIk+wjPPoYbctCc8EOHmagncttmv6jATCi
 T2kb7GhS1IctpPeUlptjgaCmrG792cNLnvu4kmLy6Jw3aMA5kKKjHP0VLwoc9vtAK6Hi
 Flvw==
X-Gm-Message-State: APjAAAVFL/c4qkByvrr8gdW/q7aQ9B+jeOfjriQfi7hhCmjfgUsHG8mV
 TK1EwSmcdAxxWQ+mqKtUeKIJBQ==
X-Google-Smtp-Source: APXvYqzRA7UP0UMRngIGDlfV8DR7R4CLDWGwCYwpTvM3Dr/srd+AZ3tufkvaM/d//bxX/fxuu4blxg==
X-Received: by 2002:a50:fa4a:: with SMTP id c10mr3181724edq.35.1559034234601; 
 Tue, 28 May 2019 02:03:54 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id x49sm4072656edm.25.2019.05.28.02.03.53
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Tue, 28 May 2019 02:03:53 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: LKML <linux-kernel@vger.kernel.org>
Subject: [PATCH 30/33] fbcon: Call con2fb_map functions directly
Date: Tue, 28 May 2019 11:03:01 +0200
Message-Id: <20190528090304.9388-31-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190528090304.9388-1-daniel.vetter@ffwll.ch>
References: <20190528090304.9388-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=xl+FmsN1b/Z0dRTg7/MTehgEAqXNH21CIN1ZETZQ/L8=;
 b=P1BhmTk1hbE5r2B+QiA3mLyctcrzMOPiA0FF2afph9QwuSqbe+7Vg34nWxGic2cpIp
 Dr+njroxLWdPZ8tRtVTzw7pvAOF3qky5AKxB+uMoKHv18H6B828Ycb17qHIsW/Sdilgp
 hFjFysr93tlnN9Xyxj9PNyqSg4WYWz899PxWI=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Thompson <daniel.thompson@linaro.org>,
 Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 linux-fbdev@vger.kernel.org, DRI Development <dri-devel@lists.freedesktop.org>,
 =?UTF-8?q?Micha=C5=82=20Miros=C5=82aw?= <mirq-linux@rere.qmqm.pl>,
 Yisheng Xie <ysxie@foxmail.com>, Hans de Goede <hdegoede@redhat.com>,
 Mikulas Patocka <mpatocka@redhat.com>, Daniel Vetter <daniel.vetter@intel.com>,
 Sam Ravnborg <sam@ravnborg.org>, Peter Rosin <peda@axentia.se>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlc2UgYXJlIGFjdHVhbGx5IGZiY29uIGlvY3RscyB3aGljaCBqdXN0IGhhcHBlbiB0byBiZSBl
eHBvc2VkCnRocm91Z2ggL2Rldi9mYiouIFRoZXkgY29tcGxldGVseSBpZ25vcmUgd2hpY2ggZmJf
aW5mbyB0aGV5J3JlIGNhbGxlZApvbiwgYW5kIEkgdGhpbmsgdGhlIHVzZXJzcGFjZSB0b29sIGV2
ZW4gaGFyZGNvZGVzIHRvIC9kZXYvZmIwLgoKSGVuY2UganVzdCBmb3J3YXJkIHRoZSBlbnRpcmUg
dGhpbmcgdG8gZmJjb24uYyB3aG9sZXNhbGUuCgpOb3RlIHRoYXQgdGhpcyBwYXRjaCBkcm9wcyB0
aGUgZmJfbG9jay91bmxvY2sgb24gdGhlIHNldCBzaWRlLiBTaW5jZQp0aGUgaW9jdGwgY2FuIG9w
ZXJhdGUgb24gYW55IGZiIChhcyBwYXNzZWQgaW4gdGhyb3VnaApjb24yZmIuZnJhbWVidWZmZXIp
IHRoaXMgaXMgYm9ndXMuIEFsc28gbm90ZSB0aGF0IGZiY29uLmMgaW4gZ2VuZXJhbApuZXZlciBj
YWxscyBmYl9sb2NrIG9uIGFueXRoaW5nLCBzbyB0aGlzIGhhcyBiZWVuIGJhZGx5IGJyb2tlbgph
bHJlYWR5LgoKV2l0aCB0aGlzIHRoZSBsYXN0IHVzZXIgb2YgdGhlIGZiY29uIG5vdGlmaWVyIGNh
bGxiYWNrIGlzIGdvbmUsIGFuZCB3ZQpjYW4gZ2FyYmFnZSBjb2xsZWN0IHRoYXQgdG9vLgoKdjI6
IGFkZCBtaXNzaW5nIHVhY2Nlc3MuaCBpbmNsdWRlIChhbHBoYSBmYWlscyB0byBjb21waWxlIG90
aGVyd2lzZSksCnJlcG9ydGVkIGJ5IGtidWlsZC4KCnYzOiBSZW1lbWJlciB0byBhbHNvIGRyb3Ag
dGhlICNkZWZpbmVzIChNYWFydGVuKQoKdjQ6IEFkZCB0aGUgc3RhdGljIGlubGluZSB0byBkdW1t
eSBmdW5jdGlvbnMuCgpTaWduZWQtb2ZmLWJ5OiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVy
QGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IFNhbSBSYXZuYm9yZyA8c2FtQHJhdm5ib3JnLm9yZz4K
UmV2aWV3ZWQtYnk6IE1hYXJ0ZW4gTGFua2hvcnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51eC5p
bnRlbC5jb20+CkNjOiBNYWFydGVuIExhbmtob3JzdCA8bWFhcnRlbi5sYW5raG9yc3RAbGludXgu
aW50ZWwuY29tPgpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBmZndsbC5jaD4KQ2M6
IEJhcnRsb21pZWogWm9sbmllcmtpZXdpY3ogPGIuem9sbmllcmtpZUBzYW1zdW5nLmNvbT4KQ2M6
IEhhbnMgZGUgR29lZGUgPGhkZWdvZWRlQHJlZGhhdC5jb20+CkNjOiBZaXNoZW5nIFhpZSA8eXN4
aWVAZm94bWFpbC5jb20+CkNjOiAiTWljaGHFgiBNaXJvc8WCYXciIDxtaXJxLWxpbnV4QHJlcmUu
cW1xbS5wbD4KQ2M6IFBldGVyIFJvc2luIDxwZWRhQGF4ZW50aWEuc2U+CkNjOiBNaWt1bGFzIFBh
dG9ja2EgPG1wYXRvY2thQHJlZGhhdC5jb20+Ci0tLQogZHJpdmVycy92aWRlby9mYmRldi9jb3Jl
L2ZiY29uLmMgfCA1OSArKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLQogZHJpdmVycy92
aWRlby9mYmRldi9jb3JlL2ZibWVtLmMgfCAzNCArKy0tLS0tLS0tLS0tLS0tLS0KIGluY2x1ZGUv
bGludXgvZmIuaCAgICAgICAgICAgICAgIHwgIDQgLS0tCiBpbmNsdWRlL2xpbnV4L2ZiY29uLmgg
ICAgICAgICAgICB8ICA0ICsrKwogNCBmaWxlcyBjaGFuZ2VkLCA0MiBpbnNlcnRpb25zKCspLCA1
OSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJj
b24uYyBiL2RyaXZlcnMvdmlkZW8vZmJkZXYvY29yZS9mYmNvbi5jCmluZGV4IDE1OGI5ZDUyMzNl
MS4uZmJkMjhhZWZmMzA3IDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJj
b24uYworKysgYi9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJjb24uYwpAQCAtNzYsNiArNzYs
NyBAQAogI2luY2x1ZGUgPGxpbnV4L2luaXQuaD4KICNpbmNsdWRlIDxsaW51eC9pbnRlcnJ1cHQu
aD4KICNpbmNsdWRlIDxsaW51eC9jcmMzMi5oPiAvKiBGb3IgY291bnRpbmcgZm9udCBjaGVja3N1
bXMgKi8KKyNpbmNsdWRlIDxsaW51eC91YWNjZXNzLmg+CiAjaW5jbHVkZSA8YXNtL2ZiLmg+CiAj
aW5jbHVkZSA8YXNtL2lycS5oPgogCkBAIC0zMzE4LDI5ICszMzE5LDQ3IEBAIHZvaWQgZmJjb25f
Z2V0X3JlcXVpcmVtZW50KHN0cnVjdCBmYl9pbmZvICppbmZvLAogCX0KIH0KIAotc3RhdGljIGlu
dCBmYmNvbl9ldmVudF9ub3RpZnkoc3RydWN0IG5vdGlmaWVyX2Jsb2NrICpzZWxmLAotCQkJICAg
ICAgdW5zaWduZWQgbG9uZyBhY3Rpb24sIHZvaWQgKmRhdGEpCitpbnQgZmJjb25fc2V0X2NvbjJm
Yl9tYXBfaW9jdGwodm9pZCBfX3VzZXIgKmFyZ3ApCiB7Ci0Jc3RydWN0IGZiX2V2ZW50ICpldmVu
dCA9IGRhdGE7Ci0Jc3RydWN0IGZiX2luZm8gKmluZm8gPSBldmVudC0+aW5mbzsKLQlzdHJ1Y3Qg
ZmJfY29uMmZibWFwICpjb24yZmI7Ci0JaW50IGlkeCwgcmV0ID0gMDsKKwlzdHJ1Y3QgZmJfY29u
MmZibWFwIGNvbjJmYjsKKwlpbnQgcmV0OwogCi0Jc3dpdGNoKGFjdGlvbikgewotCWNhc2UgRkJf
RVZFTlRfU0VUX0NPTlNPTEVfTUFQOgotCQkvKiBjYWxsZWQgd2l0aCBjb25zb2xlIGxvY2sgaGVs
ZCAqLwotCQljb24yZmIgPSBldmVudC0+ZGF0YTsKLQkJcmV0ID0gc2V0X2NvbjJmYl9tYXAoY29u
MmZiLT5jb25zb2xlIC0gMSwKLQkJCQkgICAgIGNvbjJmYi0+ZnJhbWVidWZmZXIsIDEpOwotCQli
cmVhazsKLQljYXNlIEZCX0VWRU5UX0dFVF9DT05TT0xFX01BUDoKLQkJY29uMmZiID0gZXZlbnQt
PmRhdGE7Ci0JCWNvbjJmYi0+ZnJhbWVidWZmZXIgPSBjb24yZmJfbWFwW2NvbjJmYi0+Y29uc29s
ZSAtIDFdOwotCQlicmVhazsKKwlpZiAoY29weV9mcm9tX3VzZXIoJmNvbjJmYiwgYXJncCwgc2l6
ZW9mKGNvbjJmYikpKQorCQlyZXR1cm4gLUVGQVVMVDsKKwlpZiAoY29uMmZiLmNvbnNvbGUgPCAx
IHx8IGNvbjJmYi5jb25zb2xlID4gTUFYX05SX0NPTlNPTEVTKQorCQlyZXR1cm4gLUVJTlZBTDsK
KwlpZiAoY29uMmZiLmZyYW1lYnVmZmVyID49IEZCX01BWCkKKwkJcmV0dXJuIC1FSU5WQUw7CisJ
aWYgKCFyZWdpc3RlcmVkX2ZiW2NvbjJmYi5mcmFtZWJ1ZmZlcl0pCisJCXJlcXVlc3RfbW9kdWxl
KCJmYiVkIiwgY29uMmZiLmZyYW1lYnVmZmVyKTsKKwlpZiAoIXJlZ2lzdGVyZWRfZmJbY29uMmZi
LmZyYW1lYnVmZmVyXSkgeworCQlyZXR1cm4gLUVJTlZBTDsKIAl9CisKKwljb25zb2xlX2xvY2so
KTsKKwlyZXQgPSBzZXRfY29uMmZiX21hcChjb24yZmIuY29uc29sZSAtIDEsCisJCQkgICAgIGNv
bjJmYi5mcmFtZWJ1ZmZlciwgMSk7CisJY29uc29sZV91bmxvY2soKTsKKwogCXJldHVybiByZXQ7
CiB9CiAKK2ludCBmYmNvbl9nZXRfY29uMmZiX21hcF9pb2N0bCh2b2lkIF9fdXNlciAqYXJncCkK
K3sKKwlzdHJ1Y3QgZmJfY29uMmZibWFwIGNvbjJmYjsKKworCWlmIChjb3B5X2Zyb21fdXNlcigm
Y29uMmZiLCBhcmdwLCBzaXplb2YoY29uMmZiKSkpCisJCXJldHVybiAtRUZBVUxUOworCWlmIChj
b24yZmIuY29uc29sZSA8IDEgfHwgY29uMmZiLmNvbnNvbGUgPiBNQVhfTlJfQ09OU09MRVMpCisJ
CXJldHVybiAtRUlOVkFMOworCisJY29uc29sZV9sb2NrKCk7CisJY29uMmZiLmZyYW1lYnVmZmVy
ID0gY29uMmZiX21hcFtjb24yZmIuY29uc29sZSAtIDFdOworCWNvbnNvbGVfdW5sb2NrKCk7CisK
KwlyZXR1cm4gY29weV90b191c2VyKGFyZ3AsICZjb24yZmIsIHNpemVvZihjb24yZmIpKSA/IC1F
RkFVTFQgOiAwOworfQorCiAvKgogICogIFRoZSBjb25zb2xlIGBzd2l0Y2gnIHN0cnVjdHVyZSBm
b3IgdGhlIGZyYW1lIGJ1ZmZlciBiYXNlZCBjb25zb2xlCiAgKi8KQEAgLTMzNzIsMTAgKzMzOTEs
NiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGNvbnN3IGZiX2NvbiA9IHsKIAkuY29uX2RlYnVnX2xl
YXZlCT0gZmJjb25fZGVidWdfbGVhdmUsCiB9OwogCi1zdGF0aWMgc3RydWN0IG5vdGlmaWVyX2Js
b2NrIGZiY29uX2V2ZW50X25vdGlmaWVyID0gewotCS5ub3RpZmllcl9jYWxsCT0gZmJjb25fZXZl
bnRfbm90aWZ5LAotfTsKLQogc3RhdGljIHNzaXplX3Qgc3RvcmVfcm90YXRlKHN0cnVjdCBkZXZp
Y2UgKmRldmljZSwKIAkJCSAgICBzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwgY29uc3Qg
Y2hhciAqYnVmLAogCQkJICAgIHNpemVfdCBjb3VudCkKQEAgLTM2NDgsNyArMzY2Myw2IEBAIHZv
aWQgX19pbml0IGZiX2NvbnNvbGVfaW5pdCh2b2lkKQogCWludCBpOwogCiAJY29uc29sZV9sb2Nr
KCk7Ci0JZmJfcmVnaXN0ZXJfY2xpZW50KCZmYmNvbl9ldmVudF9ub3RpZmllcik7CiAJZmJjb25f
ZGV2aWNlID0gZGV2aWNlX2NyZWF0ZShmYl9jbGFzcywgTlVMTCwgTUtERVYoMCwgMCksIE5VTEws
CiAJCQkJICAgICAiZmJjb24iKTsKIApAQCAtMzY4NCw3ICszNjk4LDYgQEAgc3RhdGljIHZvaWQg
X19leGl0IGZiY29uX2RlaW5pdF9kZXZpY2Uodm9pZCkKIHZvaWQgX19leGl0IGZiX2NvbnNvbGVf
ZXhpdCh2b2lkKQogewogCWNvbnNvbGVfbG9jaygpOwotCWZiX3VucmVnaXN0ZXJfY2xpZW50KCZm
YmNvbl9ldmVudF9ub3RpZmllcik7CiAJZmJjb25fZGVpbml0X2RldmljZSgpOwogCWRldmljZV9k
ZXN0cm95KGZiX2NsYXNzLCBNS0RFVigwLCAwKSk7CiAJZmJjb25fZXhpdCgpOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy92aWRlby9mYmRldi9jb3JlL2ZibWVtLmMgYi9kcml2ZXJzL3ZpZGVvL2ZiZGV2
L2NvcmUvZmJtZW0uYwppbmRleCBkZDFhNzA4ZGYxYTcuLjY0ZGQ3MzIwMjFkOCAxMDA2NDQKLS0t
IGEvZHJpdmVycy92aWRlby9mYmRldi9jb3JlL2ZibWVtLmMKKysrIGIvZHJpdmVycy92aWRlby9m
YmRldi9jb3JlL2ZibWVtLmMKQEAgLTEwOTIsMTAgKzEwOTIsOCBAQCBzdGF0aWMgbG9uZyBkb19m
Yl9pb2N0bChzdHJ1Y3QgZmJfaW5mbyAqaW5mbywgdW5zaWduZWQgaW50IGNtZCwKIAlzdHJ1Y3Qg
ZmJfb3BzICpmYjsKIAlzdHJ1Y3QgZmJfdmFyX3NjcmVlbmluZm8gdmFyOwogCXN0cnVjdCBmYl9m
aXhfc2NyZWVuaW5mbyBmaXg7Ci0Jc3RydWN0IGZiX2NvbjJmYm1hcCBjb24yZmI7CiAJc3RydWN0
IGZiX2NtYXAgY21hcF9mcm9tOwogCXN0cnVjdCBmYl9jbWFwX3VzZXIgY21hcDsKLQlzdHJ1Y3Qg
ZmJfZXZlbnQgZXZlbnQ7CiAJdm9pZCBfX3VzZXIgKmFyZ3AgPSAodm9pZCBfX3VzZXIgKilhcmc7
CiAJbG9uZyByZXQgPSAwOwogCkBAIC0xMTU3LDM4ICsxMTU1LDEwIEBAIHN0YXRpYyBsb25nIGRv
X2ZiX2lvY3RsKHN0cnVjdCBmYl9pbmZvICppbmZvLCB1bnNpZ25lZCBpbnQgY21kLAogCQlyZXQg
PSAtRUlOVkFMOwogCQlicmVhazsKIAljYXNlIEZCSU9HRVRfQ09OMkZCTUFQOgotCQlpZiAoY29w
eV9mcm9tX3VzZXIoJmNvbjJmYiwgYXJncCwgc2l6ZW9mKGNvbjJmYikpKQotCQkJcmV0dXJuIC1F
RkFVTFQ7Ci0JCWlmIChjb24yZmIuY29uc29sZSA8IDEgfHwgY29uMmZiLmNvbnNvbGUgPiBNQVhf
TlJfQ09OU09MRVMpCi0JCQlyZXR1cm4gLUVJTlZBTDsKLQkJY29uMmZiLmZyYW1lYnVmZmVyID0g
LTE7Ci0JCWV2ZW50LmRhdGEgPSAmY29uMmZiOwotCQlsb2NrX2ZiX2luZm8oaW5mbyk7Ci0JCWV2
ZW50LmluZm8gPSBpbmZvOwotCQlmYl9ub3RpZmllcl9jYWxsX2NoYWluKEZCX0VWRU5UX0dFVF9D
T05TT0xFX01BUCwgJmV2ZW50KTsKLQkJdW5sb2NrX2ZiX2luZm8oaW5mbyk7Ci0JCXJldCA9IGNv
cHlfdG9fdXNlcihhcmdwLCAmY29uMmZiLCBzaXplb2YoY29uMmZiKSkgPyAtRUZBVUxUIDogMDsK
KwkJcmV0ID0gZmJjb25fZ2V0X2NvbjJmYl9tYXBfaW9jdGwoYXJncCk7CiAJCWJyZWFrOwogCWNh
c2UgRkJJT1BVVF9DT04yRkJNQVA6Ci0JCWlmIChjb3B5X2Zyb21fdXNlcigmY29uMmZiLCBhcmdw
LCBzaXplb2YoY29uMmZiKSkpCi0JCQlyZXR1cm4gLUVGQVVMVDsKLQkJaWYgKGNvbjJmYi5jb25z
b2xlIDwgMSB8fCBjb24yZmIuY29uc29sZSA+IE1BWF9OUl9DT05TT0xFUykKLQkJCXJldHVybiAt
RUlOVkFMOwotCQlpZiAoY29uMmZiLmZyYW1lYnVmZmVyID49IEZCX01BWCkKLQkJCXJldHVybiAt
RUlOVkFMOwotCQlpZiAoIXJlZ2lzdGVyZWRfZmJbY29uMmZiLmZyYW1lYnVmZmVyXSkKLQkJCXJl
cXVlc3RfbW9kdWxlKCJmYiVkIiwgY29uMmZiLmZyYW1lYnVmZmVyKTsKLQkJaWYgKCFyZWdpc3Rl
cmVkX2ZiW2NvbjJmYi5mcmFtZWJ1ZmZlcl0pIHsKLQkJCXJldCA9IC1FSU5WQUw7Ci0JCQlicmVh
azsKLQkJfQotCQlldmVudC5kYXRhID0gJmNvbjJmYjsKLQkJY29uc29sZV9sb2NrKCk7Ci0JCWxv
Y2tfZmJfaW5mbyhpbmZvKTsKLQkJZXZlbnQuaW5mbyA9IGluZm87Ci0JCXJldCA9IGZiX25vdGlm
aWVyX2NhbGxfY2hhaW4oRkJfRVZFTlRfU0VUX0NPTlNPTEVfTUFQLCAmZXZlbnQpOwotCQl1bmxv
Y2tfZmJfaW5mbyhpbmZvKTsKLQkJY29uc29sZV91bmxvY2soKTsKKwkJcmV0ID0gZmJjb25fc2V0
X2NvbjJmYl9tYXBfaW9jdGwoYXJncCk7CiAJCWJyZWFrOwogCWNhc2UgRkJJT0JMQU5LOgogCQlj
b25zb2xlX2xvY2soKTsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvZmIuaCBiL2luY2x1ZGUv
bGludXgvZmIuaAppbmRleCAyNWU0Yjg4NWY1YjMuLjMwMzc3MTI2NDY0NCAxMDA2NDQKLS0tIGEv
aW5jbHVkZS9saW51eC9mYi5oCisrKyBiL2luY2x1ZGUvbGludXgvZmIuaApAQCAtMTMzLDEwICsx
MzMsNiBAQCBzdHJ1Y3QgZmJfY3Vyc29yX3VzZXIgewogI2RlZmluZSBGQl9FVkVOVF9GQl9VTlJF
R0lTVEVSRUQgICAgICAgIDB4MDYKICNlbmRpZgogCi0vKiAgICAgIENPTlNPTEUtU1BFQ0lGSUM6
IGdldCBjb25zb2xlIHRvIGZyYW1lYnVmZmVyIG1hcHBpbmcgKi8KLSNkZWZpbmUgRkJfRVZFTlRf
R0VUX0NPTlNPTEVfTUFQICAgICAgICAweDA3Ci0vKiAgICAgIENPTlNPTEUtU1BFQ0lGSUM6IHNl
dCBjb25zb2xlIHRvIGZyYW1lYnVmZmVyIG1hcHBpbmcgKi8KLSNkZWZpbmUgRkJfRVZFTlRfU0VU
X0NPTlNPTEVfTUFQICAgICAgICAweDA4CiAvKiAgICAgIEEgZGlzcGxheSBibGFuayBpcyByZXF1
ZXN0ZWQgICAgICAgKi8KICNkZWZpbmUgRkJfRVZFTlRfQkxBTksgICAgICAgICAgICAgICAgICAw
eDA5CiAvKiAgICAgIEEgaGFyZHdhcmUgZGlzcGxheSBibGFuayBlYXJseSBjaGFuZ2Ugb2NjdXJy
ZWQgKi8KZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvZmJjb24uaCBiL2luY2x1ZGUvbGludXgv
ZmJjb24uaAppbmRleCA2OWY5MDBkMjg5YjIuLmZmNTU5NmRkMzBmOCAxMDA2NDQKLS0tIGEvaW5j
bHVkZS9saW51eC9mYmNvbi5oCisrKyBiL2luY2x1ZGUvbGludXgvZmJjb24uaApAQCAtMTcsNiAr
MTcsOCBAQCB2b2lkIGZiY29uX2dldF9yZXF1aXJlbWVudChzdHJ1Y3QgZmJfaW5mbyAqaW5mbywK
IHZvaWQgZmJjb25fZmJfYmxhbmtlZChzdHJ1Y3QgZmJfaW5mbyAqaW5mbywgaW50IGJsYW5rKTsK
IHZvaWQgZmJjb25fdXBkYXRlX3ZjcyhzdHJ1Y3QgZmJfaW5mbyAqaW5mbywgYm9vbCBhbGwpOwog
dm9pZCBmYmNvbl9yZW1hcF9hbGwoc3RydWN0IGZiX2luZm8gKmluZm8pOworaW50IGZiY29uX3Nl
dF9jb24yZmJfbWFwX2lvY3RsKHZvaWQgX191c2VyICphcmdwKTsKK2ludCBmYmNvbl9nZXRfY29u
MmZiX21hcF9pb2N0bCh2b2lkIF9fdXNlciAqYXJncCk7CiAjZWxzZQogc3RhdGljIGlubGluZSB2
b2lkIGZiX2NvbnNvbGVfaW5pdCh2b2lkKSB7fQogc3RhdGljIGlubGluZSB2b2lkIGZiX2NvbnNv
bGVfZXhpdCh2b2lkKSB7fQpAQCAtMzMsNiArMzUsOCBAQCBzdGF0aWMgaW5saW5lIHZvaWQgZmJj
b25fZ2V0X3JlcXVpcmVtZW50KHN0cnVjdCBmYl9pbmZvICppbmZvLAogc3RhdGljIGlubGluZSB2
b2lkIGZiY29uX2ZiX2JsYW5rZWQoc3RydWN0IGZiX2luZm8gKmluZm8sIGludCBibGFuaykge30K
IHN0YXRpYyBpbmxpbmUgdm9pZCBmYmNvbl91cGRhdGVfdmNzKHN0cnVjdCBmYl9pbmZvICppbmZv
LCBib29sIGFsbCkge30KIHN0YXRpYyBpbmxpbmUgdm9pZCBmYmNvbl9yZW1hcF9hbGwoc3RydWN0
IGZiX2luZm8gKmluZm8pIHt9CitzdGF0aWMgaW5saW5lIGludCBmYmNvbl9zZXRfY29uMmZiX21h
cF9pb2N0bCh2b2lkIF9fdXNlciAqYXJncCkgeyByZXR1cm4gMDsgfQorc3RhdGljIGlubGluZSBp
bnQgZmJjb25fZ2V0X2NvbjJmYl9tYXBfaW9jdGwodm9pZCBfX3VzZXIgKmFyZ3ApIHsgcmV0dXJu
IDA7IH0KICNlbmRpZgogCiAjZW5kaWYgLyogX0xJTlVYX0ZCQ09OX0ggKi8KLS0gCjIuMjAuMQoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVs
IG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
