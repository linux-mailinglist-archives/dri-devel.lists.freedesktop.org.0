Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3712A10DA83
	for <lists+dri-devel@lfdr.de>; Fri, 29 Nov 2019 21:15:15 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 958766E979;
	Fri, 29 Nov 2019 20:15:09 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x344.google.com (mail-wm1-x344.google.com
 [IPv6:2a00:1450:4864:20::344])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C3F076E979
 for <dri-devel@lists.freedesktop.org>; Fri, 29 Nov 2019 20:15:04 +0000 (UTC)
Received: by mail-wm1-x344.google.com with SMTP id s14so9600825wmh.4
 for <dri-devel@lists.freedesktop.org>; Fri, 29 Nov 2019 12:15:04 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=W4GyshrJ4MDTAclavHaML3icMO1p7bIqX1+sLsqpJxQ=;
 b=N37yac+0zix9n3VjvfdENiGUjtNa87yWc+ikpmw+NgWHbgkri89NS7DWM1pfselXBi
 eCCawjlC9KtoTKV+ZsK52+ZNaRnbGheJAGhvw6WCQwfNvaTgEUZ5gV3lmgS6eDEjHvsp
 HB5sZ7H6mc/5EAW+UhpFMmOps/cCKmqgna1O2nRKig9WUZz7BPCdgDri57nRP0jg5/Co
 7haQgZ/zW7H+8pxgEEDG4cf2UeULmx6c67uPfSfkVlAhHePYNrBoRWtP49XoI2/ydgKU
 oi+5qrnp4Micf8hg/BO+P+0LlSL9UFBHpZqNB981Jm8UF8lWBBdMQdR6GSLFrYUkI2m3
 AfQg==
X-Gm-Message-State: APjAAAU07A3Tqfefwg3diIRs2dmoi03ZRUs3PVzA1HvgvJLPPkZovEa3
 epdcWedNZSVoX6pRWrEp6lNniA==
X-Google-Smtp-Source: APXvYqw1Fqv747WUhcW99VG9SvBkVvEB7VGmX4cjwmZ0h+W2zkxfa/WRZ4YOO5rq40dqEPEt0ycbAg==
X-Received: by 2002:a05:600c:243:: with SMTP id 3mr115949wmj.169.1575058503002; 
 Fri, 29 Nov 2019 12:15:03 -0800 (PST)
Received: from phenom.ffwll.local (212-51-149-96.fiber7.init7.net.
 [212.51.149.96])
 by smtp.gmail.com with ESMTPSA id a20sm5602940wmd.19.2019.11.29.12.15.01
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 29 Nov 2019 12:15:02 -0800 (PST)
Date: Fri, 29 Nov 2019 21:14:59 +0100
From: Daniel Vetter <daniel@ffwll.ch>
To: Boris Brezillon <boris.brezillon@collabora.com>
Subject: Re: [PATCH 7/8] drm/panfrost: Add the panfrost_gem_mapping concept
Message-ID: <20191129201459.GS624164@phenom.ffwll.local>
References: <20191129135908.2439529-1-boris.brezillon@collabora.com>
 <20191129135908.2439529-8-boris.brezillon@collabora.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191129135908.2439529-8-boris.brezillon@collabora.com>
X-Operating-System: Linux phenom 5.3.0-2-amd64 
User-Agent: Mutt/1.12.2 (2019-09-21)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=W4GyshrJ4MDTAclavHaML3icMO1p7bIqX1+sLsqpJxQ=;
 b=a2p/fHMo6gtiFwUaYucH7cIlSYOZOLXNJUG0IoLoEduuCzGiSbIr7sTstt/ohYejn2
 TQ3XJ2UmenqcAWX3weU3m+eTol405TVykfANpTk3MhWWt90EcYTnrzRoLJEHJt2BYxCc
 2yGc0G0D7TMI6bNuNbAC/Z9PGMNUKaL96RHB8=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: stable@vger.kernel.org, Steven Price <steven.price@arm.com>,
 Rob Herring <robh+dt@kernel.org>, dri-devel@lists.freedesktop.org,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBOb3YgMjksIDIwMTkgYXQgMDI6NTk6MDdQTSArMDEwMCwgQm9yaXMgQnJlemlsbG9u
IHdyb3RlOgo+IFdpdGggdGhlIGludHJvZHVjdGlvbiBvZiBwZXItRkQgYWRkcmVzcyBzcGFjZSwg
dGhlIHNhbWUgQk8gY2FuIGJlIG1hcHBlZAo+IGluIGRpZmZlcmVudCBhZGRyZXNzIHNwYWNlIGlm
IHRoZSBCTyBpcyBnbG9iYWxseSB2aXNpYmxlIChHRU1fRkxJTkspCgpBbHNvIGRtYS1idWYgc2Vs
Zi1pbXBvcnRzIGZvciB3YXlsYW5kL2RyaTMgLi4uCgo+IGFuZCBvcGVuZWQgaW4gZGlmZmVyZW50
IGNvbnRleHQuIFRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIGRvZXMgbm90Cj4gdGFrZSBjYXNl
IGludG8gYWNjb3VudCwgYW5kIGF0dGFjaGVzIHRoZSBtYXBwaW5nIGRpcmVjdGx5IHRvIHRoZQo+
IHBhbmZyb3N0X2dlbV9vYmplY3QuCj4gCj4gTGV0J3MgY3JlYXRlIGEgcGFuZnJvc3RfZ2VtX21h
cHBpbmcgc3RydWN0IGFuZCBhbGxvdyBtdWx0aXBsZSBtYXBwaW5ncwo+IHBlciBCTy4KPiAKPiBU
aGUgbWFwcGluZ3MgYXJlIHJlZmNvdW50ZWQsIHdoaWNoIGhlbHBzIHNvbHZlIGFub3RoZXIgcHJv
YmxlbSB3aGVyZQo+IG1hcHBpbmdzIHdlcmUgdGVhcmVkIGRvd24gKEdFTSBoYW5kbGUgY2xvc2Vk
IGJ5IHVzZXJzcGFjZSkgd2hpbGUgR1BVCj4gam9icyBhY2Nlc3NpbmcgdGhvc2UgQk9zIHdlcmUg
c3RpbGwgaW4tZmxpZ2h0LiBKb2JzIG5vdyBrZWVwIGEKPiByZWZlcmVuY2Ugb24gdGhlIG1hcHBp
bmdzIHRoZXkgdXNlLgoKdWggd2hhdC4KCnRiaCB0aGlzIHNvdW5kcyBiYWQgZW5vdWdoIChhcyBp
biBob3cgZGlkIGEgZGVza3RvcCBvbiBwYW5mcm9zdCBldmVyIHdvcmspCnRoYXQgSSB0aGluayB5
b3UgcmVhbGx5IHdhbnQgYSBmZXcgaWd0cyB0byB0ZXN0IHRoaXMgc3R1ZmYuCi1EYW5pZWwKCj4g
Cj4gRml4ZXM6IGE1ZWZiNGM5YTU2MiAoImRybS9wYW5mcm9zdDogUmVzdHJ1Y3R1cmUgdGhlIEdF
TSBvYmplY3QgY3JlYXRpb24iKQo+IEZpeGVzOiA3MjgyZjc2NDVkMDYgKCJkcm0vcGFuZnJvc3Q6
IEltcGxlbWVudCBwZXIgRkQgYWRkcmVzcyBzcGFjZXMiKQo+IENjOiA8c3RhYmxlQHZnZXIua2Vy
bmVsLm9yZz4KPiBTaWduZWQtb2ZmLWJ5OiBCb3JpcyBCcmV6aWxsb24gPGJvcmlzLmJyZXppbGxv
bkBjb2xsYWJvcmEuY29tPgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJv
c3RfZHJ2LmMgICAgICAgfCAgOTIgKysrKysrKysrKystCj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5m
cm9zdC9wYW5mcm9zdF9nZW0uYyAgICAgICB8IDE0MCArKysrKysrKysrKysrKystLS0KPiAgZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbS5oICAgICAgIHwgIDQxICsrKystCj4g
IC4uLi9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbV9zaHJpbmtlci5jICB8ICAgNCArLQo+
ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMgICAgICAgfCAgMTMgKy0K
PiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5oICAgICAgIHwgICAxICsK
PiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5jICAgICAgIHwgIDYxICsr
KystLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9tbXUuaCAgICAgICB8
ICAgNiArLQo+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfcGVyZmNudC5jICAg
fCAgMzQgKysrLS0KPiAgOSBmaWxlcyBjaGFuZ2VkLCAzMTggaW5zZXJ0aW9ucygrKSwgNzQgZGVs
ZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5m
cm9zdF9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kcnYuYwo+IGlu
ZGV4IDc1MWRmOTc1NTM0Zi4uYjQwNmI1MjQzYjQwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kcnYuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5m
cm9zdC9wYW5mcm9zdF9kcnYuYwo+IEBAIC03OCw4ICs3OCwxMCBAQCBzdGF0aWMgaW50IHBhbmZy
b3N0X2lvY3RsX2dldF9wYXJhbShzdHJ1Y3QgZHJtX2RldmljZSAqZGRldiwgdm9pZCAqZGF0YSwg
c3RydWN0Cj4gIHN0YXRpYyBpbnQgcGFuZnJvc3RfaW9jdGxfY3JlYXRlX2JvKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCj4gIAkJc3RydWN0IGRybV9maWxlICpmaWxlKQo+ICB7
Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICpwcml2ID0gZmlsZS0+ZHJpdmVyX3ByaXY7
Cj4gIAlzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm87Cj4gIAlzdHJ1Y3QgZHJtX3BhbmZy
b3N0X2NyZWF0ZV9ibyAqYXJncyA9IGRhdGE7Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfZ2VtX21hcHBp
bmcgKm1hcHBpbmc7Cj4gIAo+ICAJaWYgKCFhcmdzLT5zaXplIHx8IGFyZ3MtPnBhZCB8fAo+ICAJ
ICAgIChhcmdzLT5mbGFncyAmIH4oUEFORlJPU1RfQk9fTk9FWEVDIHwgUEFORlJPU1RfQk9fSEVB
UCkpKQo+IEBAIC05NSw3ICs5NywxNCBAQCBzdGF0aWMgaW50IHBhbmZyb3N0X2lvY3RsX2NyZWF0
ZV9ibyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAo+ICAJaWYgKElTX0VSUihi
bykpCj4gIAkJcmV0dXJuIFBUUl9FUlIoYm8pOwo+ICAKPiAtCWFyZ3MtPm9mZnNldCA9IGJvLT5u
b2RlLnN0YXJ0IDw8IFBBR0VfU0hJRlQ7Cj4gKwltYXBwaW5nID0gcGFuZnJvc3RfZ2VtX21hcHBp
bmdfZ2V0KGJvLCBwcml2KTsKPiArCWlmICghbWFwcGluZykgewo+ICsJCWRybV9nZW1fb2JqZWN0
X3B1dF91bmxvY2tlZCgmYm8tPmJhc2UuYmFzZSk7Cj4gKwkJcmV0dXJuIC1FSU5WQUw7Cj4gKwl9
Cj4gKwo+ICsJYXJncy0+b2Zmc2V0ID0gbWFwcGluZy0+bW1ub2RlLnN0YXJ0IDw8IFBBR0VfU0hJ
RlQ7Cj4gKwlwYW5mcm9zdF9nZW1fbWFwcGluZ19wdXQobWFwcGluZyk7Cj4gIAo+ICAJcmV0dXJu
IDA7Cj4gIH0KPiBAQCAtMTE5LDYgKzEyOCwxMSBAQCBwYW5mcm9zdF9sb29rdXBfYm9zKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsCj4gIAkJICBzdHJ1Y3QgZHJtX3BhbmZyb3N0X3N1Ym1pdCAqYXJn
cywKPiAgCQkgIHN0cnVjdCBwYW5mcm9zdF9qb2IgKmpvYikKPiAgewo+ICsJc3RydWN0IHBhbmZy
b3N0X2ZpbGVfcHJpdiAqcHJpdiA9IGZpbGVfcHJpdi0+ZHJpdmVyX3ByaXY7Cj4gKwlzdHJ1Y3Qg
cGFuZnJvc3RfZ2VtX29iamVjdCAqYm87Cj4gKwl1bnNpZ25lZCBpbnQgaTsKPiArCWludCByZXQ7
Cj4gKwo+ICAJam9iLT5ib19jb3VudCA9IGFyZ3MtPmJvX2hhbmRsZV9jb3VudDsKPiAgCj4gIAlp
ZiAoIWpvYi0+Ym9fY291bnQpCj4gQEAgLTEzMCw5ICsxNDQsMzIgQEAgcGFuZnJvc3RfbG9va3Vw
X2JvcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAJaWYgKCFqb2ItPmltcGxpY2l0X2ZlbmNl
cykKPiAgCQlyZXR1cm4gLUVOT01FTTsKPiAgCj4gLQlyZXR1cm4gZHJtX2dlbV9vYmplY3RzX2xv
b2t1cChmaWxlX3ByaXYsCj4gLQkJCQkgICAgICAodm9pZCBfX3VzZXIgKikodWludHB0cl90KWFy
Z3MtPmJvX2hhbmRsZXMsCj4gLQkJCQkgICAgICBqb2ItPmJvX2NvdW50LCAmam9iLT5ib3MpOwo+
ICsJcmV0ID0gZHJtX2dlbV9vYmplY3RzX2xvb2t1cChmaWxlX3ByaXYsCj4gKwkJCQkgICAgICh2
b2lkIF9fdXNlciAqKSh1aW50cHRyX3QpYXJncy0+Ym9faGFuZGxlcywKPiArCQkJCSAgICAgam9i
LT5ib19jb3VudCwgJmpvYi0+Ym9zKTsKPiArCWlmIChyZXQpCj4gKwkJcmV0dXJuIHJldDsKPiAr
Cj4gKwlqb2ItPm1hcHBpbmdzID0ga3ZtYWxsb2NfYXJyYXkoam9iLT5ib19jb3VudCwKPiArCQkJ
CSAgICAgICBzaXplb2Yoc3RydWN0IHBhbmZyb3N0X2dlbV9tYXBwaW5nICopLAo+ICsJCQkJICAg
ICAgIEdGUF9LRVJORUwgfCBfX0dGUF9aRVJPKTsKPiArCWlmICgham9iLT5tYXBwaW5ncykKPiAr
CQlyZXR1cm4gLUVOT01FTTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgam9iLT5ib19jb3VudDsg
aSsrKSB7Cj4gKwkJc3RydWN0IHBhbmZyb3N0X2dlbV9tYXBwaW5nICptYXBwaW5nOwo+ICsKPiAr
CQlibyA9IHRvX3BhbmZyb3N0X2JvKGpvYi0+Ym9zW2ldKTsKPiArCQltYXBwaW5nID0gcGFuZnJv
c3RfZ2VtX21hcHBpbmdfZ2V0KGJvLCBwcml2KTsKPiArCQlpZiAoIW1hcHBpbmcpIHsKPiArCQkJ
cmV0ID0gLUVJTlZBTDsKPiArCQkJYnJlYWs7Cj4gKwkJfQo+ICsKPiArCQlqb2ItPm1hcHBpbmdz
W2ldID0gbWFwcGluZzsKPiArCX0KPiArCj4gKwlyZXR1cm4gcmV0Owo+ICB9Cj4gIAo+ICAvKioK
PiBAQCAtMzIwLDcgKzM1Nyw5IEBAIHN0YXRpYyBpbnQgcGFuZnJvc3RfaW9jdGxfbW1hcF9ibyhz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAo+ICBzdGF0aWMgaW50IHBhbmZyb3N0
X2lvY3RsX2dldF9ib19vZmZzZXQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwK
PiAgCQkJICAgIHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2KQo+ICB7Cj4gKwlzdHJ1Y3QgcGFu
ZnJvc3RfZmlsZV9wcml2ICpwcml2ID0gZmlsZV9wcml2LT5kcml2ZXJfcHJpdjsKPiAgCXN0cnVj
dCBkcm1fcGFuZnJvc3RfZ2V0X2JvX29mZnNldCAqYXJncyA9IGRhdGE7Cj4gKwlzdHJ1Y3QgcGFu
ZnJvc3RfZ2VtX21hcHBpbmcgKm1hcHBpbmc7Cj4gIAlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdl
bV9vYmo7Cj4gIAlzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm87Cj4gIAo+IEBAIC0zMzEs
MTggKzM3MCwyNSBAQCBzdGF0aWMgaW50IHBhbmZyb3N0X2lvY3RsX2dldF9ib19vZmZzZXQoc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKPiAgCX0KPiAgCWJvID0gdG9fcGFuZnJv
c3RfYm8oZ2VtX29iaik7Cj4gIAo+IC0JYXJncy0+b2Zmc2V0ID0gYm8tPm5vZGUuc3RhcnQgPDwg
UEFHRV9TSElGVDsKPiAtCj4gKwltYXBwaW5nID0gcGFuZnJvc3RfZ2VtX21hcHBpbmdfZ2V0KGJv
LCBwcml2KTsKPiAgCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZChnZW1fb2JqKTsKPiArCj4g
KwlpZiAoIW1hcHBpbmcpCj4gKwkJcmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsJYXJncy0+b2Zmc2V0
ID0gbWFwcGluZy0+bW1ub2RlLnN0YXJ0IDw8IFBBR0VfU0hJRlQ7Cj4gKwlwYW5mcm9zdF9nZW1f
bWFwcGluZ19wdXQobWFwcGluZyk7Cj4gIAlyZXR1cm4gMDsKPiAgfQo+ICAKPiAgc3RhdGljIGlu
dCBwYW5mcm9zdF9pb2N0bF9tYWR2aXNlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRh
dGEsCj4gIAkJCQkgIHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2KQo+ICB7Cj4gKwlzdHJ1Y3Qg
cGFuZnJvc3RfZmlsZV9wcml2ICpwcml2ID0gZmlsZV9wcml2LT5kcml2ZXJfcHJpdjsKPiAgCXN0
cnVjdCBkcm1fcGFuZnJvc3RfbWFkdmlzZSAqYXJncyA9IGRhdGE7Cj4gIAlzdHJ1Y3QgcGFuZnJv
c3RfZGV2aWNlICpwZmRldiA9IGRldi0+ZGV2X3ByaXZhdGU7Cj4gIAlzdHJ1Y3QgZHJtX2dlbV9v
YmplY3QgKmdlbV9vYmo7Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm87Cj4gIAlp
bnQgcmV0Owo+ICAKPiAgCWdlbV9vYmogPSBkcm1fZ2VtX29iamVjdF9sb29rdXAoZmlsZV9wcml2
LCBhcmdzLT5oYW5kbGUpOwo+IEBAIC0zNjQsMTggKzQxMCw0OCBAQCBzdGF0aWMgaW50IHBhbmZy
b3N0X2lvY3RsX21hZHZpc2Uoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKPiAg
CWlmIChyZXQpCj4gIAkJZ290byBvdXRfdW5sb2NrX29iamVjdF9uYW1lOwo+ICAKPiArCWJvID0g
dG9fcGFuZnJvc3RfYm8oZ2VtX29iaik7Cj4gKwo+ICAJbXV0ZXhfbG9jaygmcGZkZXYtPnNocmlu
a2VyX2xvY2spOwo+ICsJbXV0ZXhfbG9jaygmYm8tPm1hcHBpbmdzLmxvY2spOwo+ICsJaWYgKGFy
Z3MtPm1hZHYgPT0gUEFORlJPU1RfTUFEVl9ET05UTkVFRCkgewo+ICsJCXN0cnVjdCBwYW5mcm9z
dF9nZW1fbWFwcGluZyAqZmlyc3QsICpsYXN0Owo+ICsKPiArCQlmaXJzdCA9IGxpc3RfZmlyc3Rf
ZW50cnkoJmJvLT5tYXBwaW5ncy5saXN0LAo+ICsJCQkJCSBzdHJ1Y3QgcGFuZnJvc3RfZ2VtX21h
cHBpbmcsCj4gKwkJCQkJIG5vZGUpOwo+ICsJCWxhc3QgPSBsaXN0X2xhc3RfZW50cnkoJmJvLT5t
YXBwaW5ncy5saXN0LAo+ICsJCQkJICAgICAgIHN0cnVjdCBwYW5mcm9zdF9nZW1fbWFwcGluZywK
PiArCQkJCSAgICAgICBub2RlKTsKPiArCj4gKwkJLyoKPiArCQkgKiBJZiB3ZSB3YW50IHRvIG1h
cmsgdGhlIEJPIHB1cmdlYWJsZSwgdGhlcmUgbXVzdCBiZSBvbmx5IG9uZQo+ICsJCSAqIHVzZXI6
IHRoZSBjYWxsZXIgRkQuCj4gKwkJICogV2UgY291bGQgZG8gc29tZXRoaW5nIHNtYXJ0ZXIgYW5k
IG1hcmsgdGhlIEJPIHB1cmdlYWJsZSBvbmx5Cj4gKwkJICogd2hlbiBhbGwgaXRzIHVzZXJzIGhh
dmUgbWFya2VkIGl0IHB1cmdlYWJsZSwgYnV0IGdsb2JhbGx5Cj4gKwkJICogdmlzaWJsZS9zaGFy
ZWQgQk9zIGFyZSBsaWtlbHkgdG8gbmV2ZXIgYmUgbWFya2VkIHB1cmdlYWJsZQo+ICsJCSAqIGFu
eXdheSwgc28gbGV0J3Mgbm90IGJvdGhlci4KPiArCQkgKi8KPiArCQlpZiAoZmlyc3QgIT0gbGFz
dCB8fCBXQVJOX09OX09OQ0UoZmlyc3QtPm1tdSAhPSAmcHJpdi0+bW11KSkgewo+ICsJCQlyZXQg
PSAtRUlOVkFMOwo+ICsJCQlnb3RvIG91dF91bmxvY2tfbWFwcGluZ3M7Cj4gKwkJfQo+ICsJfQo+
ICsKPiAgCWFyZ3MtPnJldGFpbmVkID0gZHJtX2dlbV9zaG1lbV9tYWR2aXNlKGdlbV9vYmosIGFy
Z3MtPm1hZHYpOwo+ICAKPiAgCWlmIChhcmdzLT5yZXRhaW5lZCkgewo+IC0JCXN0cnVjdCBwYW5m
cm9zdF9nZW1fb2JqZWN0ICpibyA9IHRvX3BhbmZyb3N0X2JvKGdlbV9vYmopOwo+IC0KPiAgCQlp
ZiAoYXJncy0+bWFkdiA9PSBQQU5GUk9TVF9NQURWX0RPTlRORUVEKQo+ICAJCQlsaXN0X2FkZF90
YWlsKCZiby0+YmFzZS5tYWR2X2xpc3QsCj4gIAkJCQkgICAgICAmcGZkZXYtPnNocmlua2VyX2xp
c3QpOwo+ICAJCWVsc2UgaWYgKGFyZ3MtPm1hZHYgPT0gUEFORlJPU1RfTUFEVl9XSUxMTkVFRCkK
PiAgCQkJbGlzdF9kZWxfaW5pdCgmYm8tPmJhc2UubWFkdl9saXN0KTsKPiAgCX0KPiArCj4gKwly
ZXQgPSAwOwo+ICsKPiArb3V0X3VubG9ja19tYXBwaW5nczoKPiArCW11dGV4X3VubG9jaygmYm8t
Pm1hcHBpbmdzLmxvY2spOwo+ICAJbXV0ZXhfdW5sb2NrKCZwZmRldi0+c2hyaW5rZXJfbG9jayk7
Cj4gIAo+ICBvdXRfdW5sb2NrX29iamVjdF9uYW1lOgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3Qv
cGFuZnJvc3RfZ2VtLmMKPiBpbmRleCAzMWQ2NDE3ZGQyMWMuLjVhMmM0NjNjNDVkMyAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ2VtLmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ2VtLmMKPiBAQCAtMjksNiArMjksMTIg
QEAgc3RhdGljIHZvaWQgcGFuZnJvc3RfZ2VtX2ZyZWVfb2JqZWN0KHN0cnVjdCBkcm1fZ2VtX29i
amVjdCAqb2JqKQo+ICAJbGlzdF9kZWxfaW5pdCgmYm8tPmJhc2UubWFkdl9saXN0KTsKPiAgCW11
dGV4X3VubG9jaygmcGZkZXYtPnNocmlua2VyX2xvY2spOwo+ICAKPiArCS8qCj4gKwkgKiBJZiB3
ZSBzdGlsbCBoYXZlIG1hcHBpbmdzIGF0dGFjaGVkIHRvIHRoZSBCTywgdGhlcmUncyBhIHByb2Js
ZW0gaW4KPiArCSAqIG91ciByZWZjb3VudGluZy4KPiArCSAqLwo+ICsJV0FSTl9PTl9PTkNFKCFs
aXN0X2VtcHR5KCZiby0+bWFwcGluZ3MubGlzdCkpOwo+ICsKPiAgCWlmIChiby0+c2d0cykgewo+
ICAJCWludCBpOwo+ICAJCWludCBuX3NndCA9IGJvLT5iYXNlLmJhc2Uuc2l6ZSAvIFNaXzJNOwo+
IEBAIC00Niw2ICs1Miw3MCBAQCBzdGF0aWMgdm9pZCBwYW5mcm9zdF9nZW1fZnJlZV9vYmplY3Qo
c3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCj4gIAlkcm1fZ2VtX3NobWVtX2ZyZWVfb2JqZWN0
KG9iaik7Cj4gIH0KPiAgCj4gK3N0cnVjdCBwYW5mcm9zdF9nZW1fbWFwcGluZyAqCj4gK3BhbmZy
b3N0X2dlbV9tYXBwaW5nX2dldChzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm8sCj4gKwkJ
CSBzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICpwcml2KQo+ICt7Cj4gKwlzdHJ1Y3QgcGFuZnJv
c3RfZ2VtX21hcHBpbmcgKm1hcHBpbmcgPSBOVUxMLCAqaXRlcjsKPiArCj4gKwltdXRleF9sb2Nr
KCZiby0+bWFwcGluZ3MubG9jayk7Cj4gKwlsaXN0X2Zvcl9lYWNoX2VudHJ5KGl0ZXIsICZiby0+
bWFwcGluZ3MubGlzdCwgbm9kZSkgewo+ICsJCWlmIChpdGVyLT5tbXUgPT0gJnByaXYtPm1tdSkg
ewo+ICsJCQlrcmVmX2dldCgmaXRlci0+cmVmY291bnQpOwo+ICsJCQltYXBwaW5nID0gaXRlcjsK
PiArCQl9Cj4gKwl9Cj4gKwltdXRleF91bmxvY2soJmJvLT5tYXBwaW5ncy5sb2NrKTsKPiArCj4g
KwlyZXR1cm4gbWFwcGluZzsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQKPiArcGFuZnJvc3RfZ2Vt
X3RlYXJkb3duX21hcHBpbmcoc3RydWN0IHBhbmZyb3N0X2dlbV9tYXBwaW5nICptYXBwaW5nKQo+
ICt7Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICpwcml2Owo+ICsKPiArCWlmIChtYXBw
aW5nLT5hY3RpdmUpCj4gKwkJcGFuZnJvc3RfbW11X3VubWFwKG1hcHBpbmcpOwo+ICsKPiArCXBy
aXYgPSBjb250YWluZXJfb2YobWFwcGluZy0+bW11LCBzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9wcml2
LCBtbXUpOwo+ICsJc3Bpbl9sb2NrKCZwcml2LT5tbV9sb2NrKTsKPiArCWlmIChkcm1fbW1fbm9k
ZV9hbGxvY2F0ZWQoJm1hcHBpbmctPm1tbm9kZSkpCj4gKwkJZHJtX21tX3JlbW92ZV9ub2RlKCZt
YXBwaW5nLT5tbW5vZGUpOwo+ICsJc3Bpbl91bmxvY2soJnByaXYtPm1tX2xvY2spOwo+ICt9Cj4g
Kwo+ICtzdGF0aWMgdm9pZCBwYW5mcm9zdF9nZW1fbWFwcGluZ19yZWxlYXNlKHN0cnVjdCBrcmVm
ICprcmVmKQo+ICt7Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfZ2VtX21hcHBpbmcgKm1hcHBpbmc7Cj4g
KwlzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICpwcml2Owo+ICsKPiArCW1hcHBpbmcgPSBjb250
YWluZXJfb2Yoa3JlZiwgc3RydWN0IHBhbmZyb3N0X2dlbV9tYXBwaW5nLCByZWZjb3VudCk7Cj4g
Kwlwcml2ID0gY29udGFpbmVyX29mKG1hcHBpbmctPm1tdSwgc3RydWN0IHBhbmZyb3N0X2ZpbGVf
cHJpdiwgbW11KTsKPiArCj4gKwlwYW5mcm9zdF9nZW1fdGVhcmRvd25fbWFwcGluZyhtYXBwaW5n
KTsKPiArCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZCgmbWFwcGluZy0+b2JqLT5iYXNlLmJh
c2UpOwo+ICsJa2ZyZWUobWFwcGluZyk7Cj4gK30KPiArCj4gK3ZvaWQgcGFuZnJvc3RfZ2VtX21h
cHBpbmdfcHV0KHN0cnVjdCBwYW5mcm9zdF9nZW1fbWFwcGluZyAqbWFwcGluZykKPiArewo+ICsJ
aWYgKCFtYXBwaW5nKQo+ICsJCXJldHVybjsKPiArCj4gKwlrcmVmX3B1dCgmbWFwcGluZy0+cmVm
Y291bnQsIHBhbmZyb3N0X2dlbV9tYXBwaW5nX3JlbGVhc2UpOwo+ICt9Cj4gKwo+ICt2b2lkIHBh
bmZyb3N0X2dlbV90ZWFyZG93bl9tYXBwaW5ncyhzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAq
Ym8pCj4gK3sKPiArCXN0cnVjdCBwYW5mcm9zdF9nZW1fbWFwcGluZyAqbWFwcGluZzsKPiArCj4g
KwltdXRleF9sb2NrKCZiby0+bWFwcGluZ3MubG9jayk7Cj4gKwlsaXN0X2Zvcl9lYWNoX2VudHJ5
KG1hcHBpbmcsICZiby0+bWFwcGluZ3MubGlzdCwgbm9kZSkKPiArCQlwYW5mcm9zdF9nZW1fdGVh
cmRvd25fbWFwcGluZyhtYXBwaW5nKTsKPiArCW11dGV4X3VubG9jaygmYm8tPm1hcHBpbmdzLmxv
Y2spOwo+ICt9Cj4gKwo+ICBpbnQgcGFuZnJvc3RfZ2VtX29wZW4oc3RydWN0IGRybV9nZW1fb2Jq
ZWN0ICpvYmosIHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2KQo+ICB7Cj4gIAlpbnQgcmV0Owo+
IEBAIC01NCw2ICsxMjQsMTYgQEAgaW50IHBhbmZyb3N0X2dlbV9vcGVuKHN0cnVjdCBkcm1fZ2Vt
X29iamVjdCAqb2JqLCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdikKPiAgCXN0cnVjdCBwYW5m
cm9zdF9nZW1fb2JqZWN0ICpibyA9IHRvX3BhbmZyb3N0X2JvKG9iaik7Cj4gIAl1bnNpZ25lZCBs
b25nIGNvbG9yID0gYm8tPm5vZXhlYyA/IFBBTkZST1NUX0JPX05PRVhFQyA6IDA7Cj4gIAlzdHJ1
Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICpwcml2ID0gZmlsZV9wcml2LT5kcml2ZXJfcHJpdjsKPiAr
CXN0cnVjdCBwYW5mcm9zdF9nZW1fbWFwcGluZyAqbWFwcGluZzsKPiArCj4gKwltYXBwaW5nID0g
a3phbGxvYyhzaXplb2YoKm1hcHBpbmcpLCBHRlBfS0VSTkVMKTsKPiArCWlmICghbWFwcGluZykK
PiArCQlyZXR1cm4gLUVOT01FTTsKPiArCj4gKwlJTklUX0xJU1RfSEVBRCgmbWFwcGluZy0+bm9k
ZSk7Cj4gKwlrcmVmX2luaXQoJm1hcHBpbmctPnJlZmNvdW50KTsKPiArCWRybV9nZW1fb2JqZWN0
X2dldChvYmopOwo+ICsJbWFwcGluZy0+b2JqID0gYm87Cj4gIAo+ICAJLyoKPiAgCSAqIEV4ZWN1
dGFibGUgYnVmZmVycyBjYW5ub3QgY3Jvc3MgYSAxNk1CIGJvdW5kYXJ5IGFzIHRoZSBwcm9ncmFt
Cj4gQEAgLTY2LDM3ICsxNDYsNjEgQEAgaW50IHBhbmZyb3N0X2dlbV9vcGVuKHN0cnVjdCBkcm1f
Z2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdikKPiAgCWVsc2UKPiAg
CQlhbGlnbiA9IHNpemUgPj0gU1pfMk0gPyBTWl8yTSA+PiBQQUdFX1NISUZUIDogMDsKPiAgCj4g
LQliby0+bW11ID0gJnByaXYtPm1tdTsKPiArCW1hcHBpbmctPm1tdSA9ICZwcml2LT5tbXU7Cj4g
IAlzcGluX2xvY2soJnByaXYtPm1tX2xvY2spOwo+IC0JcmV0ID0gZHJtX21tX2luc2VydF9ub2Rl
X2dlbmVyaWMoJnByaXYtPm1tLCAmYm8tPm5vZGUsCj4gKwlyZXQgPSBkcm1fbW1faW5zZXJ0X25v
ZGVfZ2VuZXJpYygmcHJpdi0+bW0sICZtYXBwaW5nLT5tbW5vZGUsCj4gIAkJCQkJIHNpemUgPj4g
UEFHRV9TSElGVCwgYWxpZ24sIGNvbG9yLCAwKTsKPiAgCXNwaW5fdW5sb2NrKCZwcml2LT5tbV9s
b2NrKTsKPiAgCWlmIChyZXQpCj4gLQkJcmV0dXJuIHJldDsKPiArCQlnb3RvIGVycjsKPiAgCj4g
IAlpZiAoIWJvLT5pc19oZWFwKSB7Cj4gLQkJcmV0ID0gcGFuZnJvc3RfbW11X21hcChibyk7Cj4g
LQkJaWYgKHJldCkgewo+IC0JCQlzcGluX2xvY2soJnByaXYtPm1tX2xvY2spOwo+IC0JCQlkcm1f
bW1fcmVtb3ZlX25vZGUoJmJvLT5ub2RlKTsKPiAtCQkJc3Bpbl91bmxvY2soJnByaXYtPm1tX2xv
Y2spOwo+IC0JCX0KPiArCQlyZXQgPSBwYW5mcm9zdF9tbXVfbWFwKG1hcHBpbmcpOwo+ICsJCWlm
IChyZXQpCj4gKwkJCWdvdG8gZXJyOwo+ICAJfQo+ICsKPiArCW11dGV4X2xvY2soJm9iai0+ZGV2
LT5vYmplY3RfbmFtZV9sb2NrKTsKPiArCS8qCj4gKwkgKiBXZSBtdXN0IG1ha2Ugc3VyZSB0aGUg
Qk8gaGFzIG5vdCBiZWVuIG1hcmtlZCBwdXJnZWFibGUgYmVmb3JlCj4gKwkgKiBhZGRpbmcgdGhl
IG1hcHBpbmcuCj4gKwkgKi8KPiArCWlmIChiby0+YmFzZS5tYWR2ID09IFBBTkZST1NUX01BRFZf
V0lMTE5FRUQpIHsKPiArCQltdXRleF9sb2NrKCZiby0+bWFwcGluZ3MubG9jayk7Cj4gKwkJbGlz
dF9hZGRfdGFpbCgmbWFwcGluZy0+bm9kZSwgJmJvLT5tYXBwaW5ncy5saXN0KTsKPiArCQltdXRl
eF91bmxvY2soJmJvLT5tYXBwaW5ncy5sb2NrKTsKPiArCX0gZWxzZSB7Cj4gKwkJcmV0ID0gLUVJ
TlZBTDsKPiArCX0KPiArCW11dGV4X3VubG9jaygmb2JqLT5kZXYtPm9iamVjdF9uYW1lX2xvY2sp
Owo+ICsKPiArCWlmIChyZXQpCj4gKwkJZ290byBlcnI7Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gKwo+
ICtlcnI6Cj4gKwlwYW5mcm9zdF9nZW1fbWFwcGluZ19wdXQobWFwcGluZyk7Cj4gIAlyZXR1cm4g
cmV0Owo+ICB9Cj4gIAo+ICB2b2lkIHBhbmZyb3N0X2dlbV9jbG9zZShzdHJ1Y3QgZHJtX2dlbV9v
YmplY3QgKm9iaiwgc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYpCj4gIHsKPiAtCXN0cnVjdCBw
YW5mcm9zdF9nZW1fb2JqZWN0ICpibyA9IHRvX3BhbmZyb3N0X2JvKG9iaik7Cj4gIAlzdHJ1Y3Qg
cGFuZnJvc3RfZmlsZV9wcml2ICpwcml2ID0gZmlsZV9wcml2LT5kcml2ZXJfcHJpdjsKPiArCXN0
cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0ICpibyA9IHRvX3BhbmZyb3N0X2JvKG9iaik7Cj4gKwlz
dHJ1Y3QgcGFuZnJvc3RfZ2VtX21hcHBpbmcgKm1hcHBpbmcgPSBOVUxMLCAqaXRlcjsKPiArCj4g
KwltdXRleF9sb2NrKCZiby0+bWFwcGluZ3MubG9jayk7Cj4gKwlsaXN0X2Zvcl9lYWNoX2VudHJ5
KGl0ZXIsICZiby0+bWFwcGluZ3MubGlzdCwgbm9kZSkgewo+ICsJCWlmIChpdGVyLT5tbXUgPT0g
JnByaXYtPm1tdSkgewo+ICsJCQltYXBwaW5nID0gaXRlcjsKPiArCQkJbGlzdF9kZWwoJml0ZXIt
Pm5vZGUpOwo+ICsJCQlicmVhazsKPiArCQl9Cj4gKwl9Cj4gKwltdXRleF91bmxvY2soJmJvLT5t
YXBwaW5ncy5sb2NrKTsKPiAgCj4gLQlpZiAoYm8tPmlzX21hcHBlZCkKPiAtCQlwYW5mcm9zdF9t
bXVfdW5tYXAoYm8pOwo+IC0KPiAtCXNwaW5fbG9jaygmcHJpdi0+bW1fbG9jayk7Cj4gLQlpZiAo
ZHJtX21tX25vZGVfYWxsb2NhdGVkKCZiby0+bm9kZSkpCj4gLQkJZHJtX21tX3JlbW92ZV9ub2Rl
KCZiby0+bm9kZSk7Cj4gLQlzcGluX3VubG9jaygmcHJpdi0+bW1fbG9jayk7Cj4gKwlwYW5mcm9z
dF9nZW1fbWFwcGluZ19wdXQobWFwcGluZyk7Cj4gIH0KPiAgCj4gIHN0YXRpYyBzdHJ1Y3QgZG1h
X2J1ZiAqCj4gQEAgLTE2Myw2ICsyNjcsOCBAQCBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKnBhbmZy
b3N0X2dlbV9jcmVhdGVfb2JqZWN0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHNpemVfdAo+ICAJ
aWYgKCFvYmopCj4gIAkJcmV0dXJuIE5VTEw7Cj4gIAo+ICsJSU5JVF9MSVNUX0hFQUQoJm9iai0+
bWFwcGluZ3MubGlzdCk7Cj4gKwltdXRleF9pbml0KCZvYmotPm1hcHBpbmdzLmxvY2spOwo+ICAJ
b2JqLT5iYXNlLmJhc2UuZnVuY3MgPSAmcGFuZnJvc3RfZ2VtX2Z1bmNzOwo+ICAKPiAgCXJldHVy
biAmb2JqLT5iYXNlLmJhc2U7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9z
dC9wYW5mcm9zdF9nZW0uaCBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0u
aAo+IGluZGV4IDRiMTdlNzMwODc2NC4uY2ExYmM5MDE5NjAwIDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaAo+IEBAIC0xMywyMyArMTMsNDYgQEAgc3RydWN0IHBh
bmZyb3N0X2dlbV9vYmplY3Qgewo+ICAJc3RydWN0IGRybV9nZW1fc2htZW1fb2JqZWN0IGJhc2U7
Cj4gIAlzdHJ1Y3Qgc2dfdGFibGUgKnNndHM7Cj4gIAo+IC0Jc3RydWN0IHBhbmZyb3N0X21tdSAq
bW11Owo+IC0Jc3RydWN0IGRybV9tbV9ub2RlIG5vZGU7Cj4gLQlib29sIGlzX21hcHBlZAkJOjE7
Cj4gKwkvKgo+ICsJICogVXNlIGEgbGlzdCBmb3Igbm93LiBJZiBzZWFyY2hpbmcgYSBtYXBwaW5n
IGV2ZXIgYmVjb21lcyB0aGUKPiArCSAqIGJvdHRsZW5lY2ssIHdlIHNob3VsZCBjb25zaWRlciB1
c2luZyBhbiBSQi10cmVlLCBvciBldmVuIGJldHRlciwKPiArCSAqIGxldCB0aGUgY29yZSBzdG9y
ZSBkcm1fZ2VtX29iamVjdF9tYXBwaW5nIGVudHJpZXMgKHdoZXJlIHdlCj4gKwkgKiBjb3VsZCBw
bGFjZSBkcml2ZXIgc3BlY2lmaWMgZGF0YSkgaW5zdGVhZCBvZiBkcm1fZ2VtX29iamVjdCBvbmVz
Cj4gKwkgKiBpbiBpdHMgZHJtX2ZpbGUtPm9iamVjdF9pZHIgdGFibGUuCj4gKwkgKgo+ICsJICog
c3RydWN0IGRybV9nZW1fb2JqZWN0X21hcHBpbmcgewo+ICsJICoJc3RydWN0IGRybV9nZW1fb2Jq
ZWN0ICpvYmo7Cj4gKwkgKgl2b2lkICpkcml2ZXJfcHJpdjsKPiArCSAqIH07Cj4gKwkgKi8KPiAr
CXN0cnVjdCB7Cj4gKwkJc3RydWN0IGxpc3RfaGVhZCBsaXN0Owo+ICsJCXN0cnVjdCBtdXRleCBs
b2NrOwo+ICsJfSBtYXBwaW5nczsKPiArCj4gIAlib29sIG5vZXhlYwkJOjE7Cj4gIAlib29sIGlz
X2hlYXAJCToxOwo+ICB9Owo+ICAKPiArc3RydWN0IHBhbmZyb3N0X2dlbV9tYXBwaW5nIHsKPiAr
CXN0cnVjdCBsaXN0X2hlYWQgbm9kZTsKPiArCXN0cnVjdCBrcmVmIHJlZmNvdW50Owo+ICsJc3Ry
dWN0IHBhbmZyb3N0X2dlbV9vYmplY3QgKm9iajsKPiArCXN0cnVjdCBkcm1fbW1fbm9kZSBtbW5v
ZGU7Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfbW11ICptbXU7Cj4gKwlib29sIGFjdGl2ZQkJOjE7Cj4g
K307Cj4gKwo+ICBzdGF0aWMgaW5saW5lCj4gIHN0cnVjdCAgcGFuZnJvc3RfZ2VtX29iamVjdCAq
dG9fcGFuZnJvc3RfYm8oc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCj4gIHsKPiAgCXJldHVy
biBjb250YWluZXJfb2YodG9fZHJtX2dlbV9zaG1lbV9vYmoob2JqKSwgc3RydWN0IHBhbmZyb3N0
X2dlbV9vYmplY3QsIGJhc2UpOwo+ICB9Cj4gIAo+IC1zdGF0aWMgaW5saW5lCj4gLXN0cnVjdCAg
cGFuZnJvc3RfZ2VtX29iamVjdCAqZHJtX21tX25vZGVfdG9fcGFuZnJvc3RfYm8oc3RydWN0IGRy
bV9tbV9ub2RlICpub2RlKQo+ICtzdGF0aWMgaW5saW5lIHN0cnVjdCBwYW5mcm9zdF9nZW1fbWFw
cGluZyAqCj4gK2RybV9tbV9ub2RlX3RvX3BhbmZyb3N0X21hcHBpbmcoc3RydWN0IGRybV9tbV9u
b2RlICpub2RlKQo+ICB7Cj4gLQlyZXR1cm4gY29udGFpbmVyX29mKG5vZGUsIHN0cnVjdCBwYW5m
cm9zdF9nZW1fb2JqZWN0LCBub2RlKTsKPiArCXJldHVybiBjb250YWluZXJfb2Yobm9kZSwgc3Ry
dWN0IHBhbmZyb3N0X2dlbV9tYXBwaW5nLCBtbW5vZGUpOwo+ICB9Cj4gIAo+ICBzdHJ1Y3QgZHJt
X2dlbV9vYmplY3QgKnBhbmZyb3N0X2dlbV9jcmVhdGVfb2JqZWN0KHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYsIHNpemVfdCBzaXplKTsKPiBAQCAtNDksNiArNzIsMTIgQEAgaW50IHBhbmZyb3N0X2dl
bV9vcGVuKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVf
cHJpdik7Cj4gIHZvaWQgcGFuZnJvc3RfZ2VtX2Nsb3NlKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAq
b2JqLAo+ICAJCQlzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdik7Cj4gIAo+ICtzdHJ1Y3QgcGFu
ZnJvc3RfZ2VtX21hcHBpbmcgKgo+ICtwYW5mcm9zdF9nZW1fbWFwcGluZ19nZXQoc3RydWN0IHBh
bmZyb3N0X2dlbV9vYmplY3QgKmJvLAo+ICsJCQkgc3RydWN0IHBhbmZyb3N0X2ZpbGVfcHJpdiAq
cHJpdik7Cj4gK3ZvaWQgcGFuZnJvc3RfZ2VtX21hcHBpbmdfcHV0KHN0cnVjdCBwYW5mcm9zdF9n
ZW1fbWFwcGluZyAqbWFwcGluZyk7Cj4gK3ZvaWQgcGFuZnJvc3RfZ2VtX3RlYXJkb3duX21hcHBp
bmdzKHN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0ICpibyk7Cj4gKwo+ICB2b2lkIHBhbmZyb3N0
X2dlbV9zaHJpbmtlcl9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwo+ICB2b2lkIHBhbmZy
b3N0X2dlbV9zaHJpbmtlcl9jbGVhbnVwKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwo+ICAKPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbV9zaHJpbmtl
ci5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbV9zaHJpbmtlci5jCj4g
aW5kZXggNDU4ZjBmYTY4MTExLi5iMzZkZjMyNmM4NjAgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbV9zaHJpbmtlci5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbV9zaHJpbmtlci5jCj4gQEAgLTM5LDExICszOSwx
MyBAQCBwYW5mcm9zdF9nZW1fc2hyaW5rZXJfY291bnQoc3RydWN0IHNocmlua2VyICpzaHJpbmtl
ciwgc3RydWN0IHNocmlua19jb250cm9sICpzYwo+ICBzdGF0aWMgYm9vbCBwYW5mcm9zdF9nZW1f
cHVyZ2Uoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCj4gIHsKPiAgCXN0cnVjdCBkcm1fZ2Vt
X3NobWVtX29iamVjdCAqc2htZW0gPSB0b19kcm1fZ2VtX3NobWVtX29iaihvYmopOwo+ICsJc3Ry
dWN0IHBhbmZyb3N0X2dlbV9vYmplY3QgKmJvID0gdG9fcGFuZnJvc3RfYm8ob2JqKTsKPiArCj4g
IAo+ICAJaWYgKCFtdXRleF90cnlsb2NrKCZzaG1lbS0+cGFnZXNfbG9jaykpCj4gIAkJcmV0dXJu
IGZhbHNlOwo+ICAKPiAtCXBhbmZyb3N0X21tdV91bm1hcCh0b19wYW5mcm9zdF9ibyhvYmopKTsK
PiArCXBhbmZyb3N0X2dlbV90ZWFyZG93bl9tYXBwaW5ncyhibyk7Cj4gIAlkcm1fZ2VtX3NobWVt
X3B1cmdlX2xvY2tlZChvYmopOwo+ICAKPiAgCW11dGV4X3VubG9jaygmc2htZW0tPnBhZ2VzX2xv
Y2spOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9i
LmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMKPiBpbmRleCBjZGQ5
NDQ4ZmJiZGQuLmM4NWQ0NWJlM2I1ZSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFu
ZnJvc3QvcGFuZnJvc3Rfam9iLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFu
ZnJvc3Rfam9iLmMKPiBAQCAtMjY5LDkgKzI2OSwyMCBAQCBzdGF0aWMgdm9pZCBwYW5mcm9zdF9q
b2JfY2xlYW51cChzdHJ1Y3Qga3JlZiAqcmVmKQo+ICAJZG1hX2ZlbmNlX3B1dChqb2ItPmRvbmVf
ZmVuY2UpOwo+ICAJZG1hX2ZlbmNlX3B1dChqb2ItPnJlbmRlcl9kb25lX2ZlbmNlKTsKPiAgCj4g
LQlpZiAoam9iLT5ib3MpIHsKPiArCWlmIChqb2ItPm1hcHBpbmdzKSB7Cj4gIAkJZm9yIChpID0g
MDsgaSA8IGpvYi0+Ym9fY291bnQ7IGkrKykKPiArCQkJcGFuZnJvc3RfZ2VtX21hcHBpbmdfcHV0
KGpvYi0+bWFwcGluZ3NbaV0pOwo+ICsJCWt2ZnJlZShqb2ItPm1hcHBpbmdzKTsKPiArCX0KPiAr
Cj4gKwlpZiAoam9iLT5ib3MpIHsKPiArCQlzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm87
Cj4gKwo+ICsJCWZvciAoaSA9IDA7IGkgPCBqb2ItPmJvX2NvdW50OyBpKyspIHsKPiArCQkJYm8g
PSB0b19wYW5mcm9zdF9ibyhqb2ItPmJvc1tpXSk7Cj4gIAkJCWRybV9nZW1fb2JqZWN0X3B1dF91
bmxvY2tlZChqb2ItPmJvc1tpXSk7Cj4gKwkJfQo+ICsKPiAgCQlrdmZyZWUoam9iLT5ib3MpOwo+
ICAJfQo+ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0
X2pvYi5oIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5oCj4gaW5kZXgg
NjI0NTQxMjhhNzkyLi5iYmQzYmE5N2ZmNjcgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJt
L3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0
L3BhbmZyb3N0X2pvYi5oCj4gQEAgLTMyLDYgKzMyLDcgQEAgc3RydWN0IHBhbmZyb3N0X2pvYiB7
Cj4gIAo+ICAJLyogRXhjbHVzaXZlIGZlbmNlcyB3ZSBoYXZlIHRha2VuIGZyb20gdGhlIEJPcyB0
byB3YWl0IGZvciAqLwo+ICAJc3RydWN0IGRtYV9mZW5jZSAqKmltcGxpY2l0X2ZlbmNlczsKPiAr
CXN0cnVjdCBwYW5mcm9zdF9nZW1fbWFwcGluZyAqKm1hcHBpbmdzOwo+ICAJc3RydWN0IGRybV9n
ZW1fb2JqZWN0ICoqYm9zOwo+ICAJdTMyIGJvX2NvdW50Owo+ICAKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5jIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmZyb3N0L3BhbmZyb3N0X21tdS5jCj4gaW5kZXggYTNlZDY0YTFmMTVlLi43NjNjZmNhODg2YTcg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5jCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5jCj4gQEAgLTI2OSwx
NCArMjY5LDE1IEBAIHN0YXRpYyBpbnQgbW11X21hcF9zZyhzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNl
ICpwZmRldiwgc3RydWN0IHBhbmZyb3N0X21tdSAqbW11LAo+ICAJcmV0dXJuIDA7Cj4gIH0KPiAg
Cj4gLWludCBwYW5mcm9zdF9tbXVfbWFwKHN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0ICpibykK
PiAraW50IHBhbmZyb3N0X21tdV9tYXAoc3RydWN0IHBhbmZyb3N0X2dlbV9tYXBwaW5nICptYXBw
aW5nKQo+ICB7Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm8gPSBtYXBwaW5nLT5v
Ymo7Cj4gIAlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiA9ICZiby0+YmFzZS5iYXNlOwo+ICAJ
c3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYgPSB0b19wYW5mcm9zdF9kZXZpY2Uob2JqLT5k
ZXYpOwo+ICAJc3RydWN0IHNnX3RhYmxlICpzZ3Q7Cj4gIAlpbnQgcHJvdCA9IElPTU1VX1JFQUQg
fCBJT01NVV9XUklURTsKPiAgCj4gLQlpZiAoV0FSTl9PTihiby0+aXNfbWFwcGVkKSkKPiArCWlm
IChXQVJOX09OKG1hcHBpbmctPmFjdGl2ZSkpCj4gIAkJcmV0dXJuIDA7Cj4gIAo+ICAJaWYgKGJv
LT5ub2V4ZWMpCj4gQEAgLTI4NiwyNSArMjg3LDI4IEBAIGludCBwYW5mcm9zdF9tbXVfbWFwKHN0
cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0ICpibykKPiAgCWlmIChXQVJOX09OKElTX0VSUihzZ3Qp
KSkKPiAgCQlyZXR1cm4gUFRSX0VSUihzZ3QpOwo+ICAKPiAtCW1tdV9tYXBfc2cocGZkZXYsIGJv
LT5tbXUsIGJvLT5ub2RlLnN0YXJ0IDw8IFBBR0VfU0hJRlQsIHByb3QsIHNndCk7Cj4gLQliby0+
aXNfbWFwcGVkID0gdHJ1ZTsKPiArCW1tdV9tYXBfc2cocGZkZXYsIG1hcHBpbmctPm1tdSwgbWFw
cGluZy0+bW1ub2RlLnN0YXJ0IDw8IFBBR0VfU0hJRlQsCj4gKwkJICAgcHJvdCwgc2d0KTsKPiAr
CW1hcHBpbmctPmFjdGl2ZSA9IHRydWU7Cj4gIAo+ICAJcmV0dXJuIDA7Cj4gIH0KPiAgCj4gLXZv
aWQgcGFuZnJvc3RfbW11X3VubWFwKHN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0ICpibykKPiAr
dm9pZCBwYW5mcm9zdF9tbXVfdW5tYXAoc3RydWN0IHBhbmZyb3N0X2dlbV9tYXBwaW5nICptYXBw
aW5nKQo+ICB7Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm8gPSBtYXBwaW5nLT5v
Ymo7Cj4gIAlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiA9ICZiby0+YmFzZS5iYXNlOwo+ICAJ
c3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYgPSB0b19wYW5mcm9zdF9kZXZpY2Uob2JqLT5k
ZXYpOwo+IC0Jc3RydWN0IGlvX3BndGFibGVfb3BzICpvcHMgPSBiby0+bW11LT5wZ3RibF9vcHM7
Cj4gLQl1NjQgaW92YSA9IGJvLT5ub2RlLnN0YXJ0IDw8IFBBR0VfU0hJRlQ7Cj4gLQlzaXplX3Qg
bGVuID0gYm8tPm5vZGUuc2l6ZSA8PCBQQUdFX1NISUZUOwo+ICsJc3RydWN0IGlvX3BndGFibGVf
b3BzICpvcHMgPSBtYXBwaW5nLT5tbXUtPnBndGJsX29wczsKPiArCXU2NCBpb3ZhID0gbWFwcGlu
Zy0+bW1ub2RlLnN0YXJ0IDw8IFBBR0VfU0hJRlQ7Cj4gKwlzaXplX3QgbGVuID0gbWFwcGluZy0+
bW1ub2RlLnNpemUgPDwgUEFHRV9TSElGVDsKPiAgCXNpemVfdCB1bm1hcHBlZF9sZW4gPSAwOwo+
ICAKPiAtCWlmIChXQVJOX09OKCFiby0+aXNfbWFwcGVkKSkKPiArCWlmIChXQVJOX09OKCFtYXBw
aW5nLT5hY3RpdmUpKQo+ICAJCXJldHVybjsKPiAgCj4gLQlkZXZfZGJnKHBmZGV2LT5kZXYsICJ1
bm1hcDogYXM9JWQsIGlvdmE9JWxseCwgbGVuPSV6eCIsIGJvLT5tbXUtPmFzLCBpb3ZhLCBsZW4p
Owo+ICsJZGV2X2RiZyhwZmRldi0+ZGV2LCAidW5tYXA6IGFzPSVkLCBpb3ZhPSVsbHgsIGxlbj0l
engiLAo+ICsJCW1hcHBpbmctPm1tdS0+YXMsIGlvdmEsIGxlbik7Cj4gIAo+ICAJd2hpbGUgKHVu
bWFwcGVkX2xlbiA8IGxlbikgewo+ICAJCXNpemVfdCB1bm1hcHBlZF9wYWdlOwo+IEBAIC0zMTgs
OCArMzIyLDkgQEAgdm9pZCBwYW5mcm9zdF9tbXVfdW5tYXAoc3RydWN0IHBhbmZyb3N0X2dlbV9v
YmplY3QgKmJvKQo+ICAJCXVubWFwcGVkX2xlbiArPSBwZ3NpemU7Cj4gIAl9Cj4gIAo+IC0JcGFu
ZnJvc3RfbW11X2ZsdXNoX3JhbmdlKHBmZGV2LCBiby0+bW11LCBiby0+bm9kZS5zdGFydCA8PCBQ
QUdFX1NISUZULCBsZW4pOwo+IC0JYm8tPmlzX21hcHBlZCA9IGZhbHNlOwo+ICsJcGFuZnJvc3Rf
bW11X2ZsdXNoX3JhbmdlKHBmZGV2LCBtYXBwaW5nLT5tbXUsCj4gKwkJCQkgbWFwcGluZy0+bW1u
b2RlLnN0YXJ0IDw8IFBBR0VfU0hJRlQsIGxlbik7Cj4gKwltYXBwaW5nLT5hY3RpdmUgPSBmYWxz
ZTsKPiAgfQo+ICAKPiAgc3RhdGljIHZvaWQgbW11X3RsYl9pbnZfY29udGV4dF9zMSh2b2lkICpj
b29raWUpCj4gQEAgLTM5NCwxMCArMzk5LDEwIEBAIHZvaWQgcGFuZnJvc3RfbW11X3BndGFibGVf
ZnJlZShzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICpwcml2KQo+ICAJZnJlZV9pb19wZ3RhYmxl
X29wcyhtbXUtPnBndGJsX29wcyk7Cj4gIH0KPiAgCj4gLXN0YXRpYyBzdHJ1Y3QgcGFuZnJvc3Rf
Z2VtX29iamVjdCAqCj4gLWFkZHJfdG9fZHJtX21tX25vZGUoc3RydWN0IHBhbmZyb3N0X2Rldmlj
ZSAqcGZkZXYsIGludCBhcywgdTY0IGFkZHIpCj4gK3N0YXRpYyBzdHJ1Y3QgcGFuZnJvc3RfZ2Vt
X21hcHBpbmcgKgo+ICthZGRyX3RvX21hcHBpbmcoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZk
ZXYsIGludCBhcywgdTY0IGFkZHIpCj4gIHsKPiAtCXN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0
ICpibyA9IE5VTEw7Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfZ2VtX21hcHBpbmcgKm1hcHBpbmcgPSBO
VUxMOwo+ICAJc3RydWN0IHBhbmZyb3N0X2ZpbGVfcHJpdiAqcHJpdjsKPiAgCXN0cnVjdCBkcm1f
bW1fbm9kZSAqbm9kZTsKPiAgCXU2NCBvZmZzZXQgPSBhZGRyID4+IFBBR0VfU0hJRlQ7Cj4gQEAg
LTQxOCw4ICs0MjMsOSBAQCBhZGRyX3RvX2RybV9tbV9ub2RlKHN0cnVjdCBwYW5mcm9zdF9kZXZp
Y2UgKnBmZGV2LCBpbnQgYXMsIHU2NCBhZGRyKQo+ICAJZHJtX21tX2Zvcl9lYWNoX25vZGUobm9k
ZSwgJnByaXYtPm1tKSB7Cj4gIAkJaWYgKG9mZnNldCA+PSBub2RlLT5zdGFydCAmJgo+ICAJCSAg
ICBvZmZzZXQgPCAobm9kZS0+c3RhcnQgKyBub2RlLT5zaXplKSkgewo+IC0JCQlibyA9IGRybV9t
bV9ub2RlX3RvX3BhbmZyb3N0X2JvKG5vZGUpOwo+IC0JCQlkcm1fZ2VtX29iamVjdF9nZXQoJmJv
LT5iYXNlLmJhc2UpOwo+ICsJCQltYXBwaW5nID0gZHJtX21tX25vZGVfdG9fcGFuZnJvc3RfbWFw
cGluZyhub2RlKTsKPiArCj4gKwkJCWtyZWZfZ2V0KCZtYXBwaW5nLT5yZWZjb3VudCk7Cj4gIAkJ
CWJyZWFrOwo+ICAJCX0KPiAgCX0KPiBAQCAtNDI3LDcgKzQzMyw3IEBAIGFkZHJfdG9fZHJtX21t
X25vZGUoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIGludCBhcywgdTY0IGFkZHIpCj4g
IAlzcGluX3VubG9jaygmcHJpdi0+bW1fbG9jayk7Cj4gIG91dDoKPiAgCXNwaW5fdW5sb2NrKCZw
ZmRldi0+YXNfbG9jayk7Cj4gLQlyZXR1cm4gYm87Cj4gKwlyZXR1cm4gbWFwcGluZzsKPiAgfQo+
ICAKPiAgI2RlZmluZSBOVU1fRkFVTFRfUEFHRVMgKFNaXzJNIC8gUEFHRV9TSVpFKQo+IEBAIC00
MzYsMjggKzQ0MiwzMCBAQCBzdGF0aWMgaW50IHBhbmZyb3N0X21tdV9tYXBfZmF1bHRfYWRkcihz
dHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwgaW50IGFzLAo+ICAJCQkJICAgICAgIHU2NCBh
ZGRyKQo+ICB7Cj4gIAlpbnQgcmV0LCBpOwo+ICsJc3RydWN0IHBhbmZyb3N0X2dlbV9tYXBwaW5n
ICpib21hcHBpbmc7Cj4gIAlzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm87Cj4gIAlzdHJ1
Y3QgYWRkcmVzc19zcGFjZSAqbWFwcGluZzsKPiAgCXBnb2ZmX3QgcGFnZV9vZmZzZXQ7Cj4gIAlz
dHJ1Y3Qgc2dfdGFibGUgKnNndDsKPiAgCXN0cnVjdCBwYWdlICoqcGFnZXM7Cj4gIAo+IC0JYm8g
PSBhZGRyX3RvX2RybV9tbV9ub2RlKHBmZGV2LCBhcywgYWRkcik7Cj4gLQlpZiAoIWJvKQo+ICsJ
Ym9tYXBwaW5nID0gYWRkcl90b19tYXBwaW5nKHBmZGV2LCBhcywgYWRkcik7Cj4gKwlpZiAoIWJv
bWFwcGluZykKPiAgCQlyZXR1cm4gLUVOT0VOVDsKPiAgCj4gKwlibyA9IGJvbWFwcGluZy0+b2Jq
Owo+ICAJaWYgKCFiby0+aXNfaGVhcCkgewo+ICAJCWRldl9XQVJOKHBmZGV2LT5kZXYsICJtYXRj
aGluZyBCTyBpcyBub3QgaGVhcCB0eXBlIChHUFUgVkEgPSAlbGx4KSIsCj4gLQkJCSBiby0+bm9k
ZS5zdGFydCA8PCBQQUdFX1NISUZUKTsKPiArCQkJIGJvbWFwcGluZy0+bW1ub2RlLnN0YXJ0IDw8
IFBBR0VfU0hJRlQpOwo+ICAJCXJldCA9IC1FSU5WQUw7Cj4gIAkJZ290byBlcnJfYm87Cj4gIAl9
Cj4gLQlXQVJOX09OKGJvLT5tbXUtPmFzICE9IGFzKTsKPiArCVdBUk5fT04oYm9tYXBwaW5nLT5t
bXUtPmFzICE9IGFzKTsKPiAgCj4gIAkvKiBBc3N1bWUgMk1CIGFsaWdubWVudCBhbmQgc2l6ZSBt
dWx0aXBsZSAqLwo+ICAJYWRkciAmPSB+KCh1NjQpU1pfMk0gLSAxKTsKPiAgCXBhZ2Vfb2Zmc2V0
ID0gYWRkciA+PiBQQUdFX1NISUZUOwo+IC0JcGFnZV9vZmZzZXQgLT0gYm8tPm5vZGUuc3RhcnQ7
Cj4gKwlwYWdlX29mZnNldCAtPSBib21hcHBpbmctPm1tbm9kZS5zdGFydDsKPiAgCj4gIAltdXRl
eF9sb2NrKCZiby0+YmFzZS5wYWdlc19sb2NrKTsKPiAgCj4gQEAgLTUwOSwxMyArNTE3LDE0IEBA
IHN0YXRpYyBpbnQgcGFuZnJvc3RfbW11X21hcF9mYXVsdF9hZGRyKHN0cnVjdCBwYW5mcm9zdF9k
ZXZpY2UgKnBmZGV2LCBpbnQgYXMsCj4gIAkJZ290byBlcnJfbWFwOwo+ICAJfQo+ICAKPiAtCW1t
dV9tYXBfc2cocGZkZXYsIGJvLT5tbXUsIGFkZHIsIElPTU1VX1dSSVRFIHwgSU9NTVVfUkVBRCB8
IElPTU1VX05PRVhFQywgc2d0KTsKPiArCW1tdV9tYXBfc2cocGZkZXYsIGJvbWFwcGluZy0+bW11
LCBhZGRyLAo+ICsJCSAgIElPTU1VX1dSSVRFIHwgSU9NTVVfUkVBRCB8IElPTU1VX05PRVhFQywg
c2d0KTsKPiAgCj4gLQliby0+aXNfbWFwcGVkID0gdHJ1ZTsKPiArCWJvbWFwcGluZy0+YWN0aXZl
ID0gdHJ1ZTsKPiAgCj4gIAlkZXZfZGJnKHBmZGV2LT5kZXYsICJtYXBwZWQgcGFnZSBmYXVsdCBA
IEFTJWQgJWxseCIsIGFzLCBhZGRyKTsKPiAgCj4gLQlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2Nr
ZWQoJmJvLT5iYXNlLmJhc2UpOwo+ICsJcGFuZnJvc3RfZ2VtX21hcHBpbmdfcHV0KGJvbWFwcGlu
Zyk7Cj4gIAo+ICAJcmV0dXJuIDA7Cj4gIAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
cGFuZnJvc3QvcGFuZnJvc3RfbW11LmggYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJv
c3RfbW11LmgKPiBpbmRleCA3YzViNjc3NWFlMjMuLjQ0ZmMyZWRmNjNjZSAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfbW11LmgKPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfbW11LmgKPiBAQCAtNCwxMiArNCwxMiBAQAo+ICAj
aWZuZGVmIF9fUEFORlJPU1RfTU1VX0hfXwo+ICAjZGVmaW5lIF9fUEFORlJPU1RfTU1VX0hfXwo+
ICAKPiAtc3RydWN0IHBhbmZyb3N0X2dlbV9vYmplY3Q7Cj4gK3N0cnVjdCBwYW5mcm9zdF9nZW1f
bWFwcGluZzsKPiAgc3RydWN0IHBhbmZyb3N0X2ZpbGVfcHJpdjsKPiAgc3RydWN0IHBhbmZyb3N0
X21tdTsKPiAgCj4gLWludCBwYW5mcm9zdF9tbXVfbWFwKHN0cnVjdCBwYW5mcm9zdF9nZW1fb2Jq
ZWN0ICpibyk7Cj4gLXZvaWQgcGFuZnJvc3RfbW11X3VubWFwKHN0cnVjdCBwYW5mcm9zdF9nZW1f
b2JqZWN0ICpibyk7Cj4gK2ludCBwYW5mcm9zdF9tbXVfbWFwKHN0cnVjdCBwYW5mcm9zdF9nZW1f
bWFwcGluZyAqbWFwcGluZyk7Cj4gK3ZvaWQgcGFuZnJvc3RfbW11X3VubWFwKHN0cnVjdCBwYW5m
cm9zdF9nZW1fbWFwcGluZyAqbWFwcGluZyk7Cj4gIAo+ICBpbnQgcGFuZnJvc3RfbW11X2luaXQo
c3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpOwo+ICB2b2lkIHBhbmZyb3N0X21tdV9maW5p
KHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5m
cm9zdC9wYW5mcm9zdF9wZXJmY250LmMKPiBpbmRleCAyYzA0ZTg1OGM1MGEuLjY4NDgyMDQ0OGJl
MyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfcGVyZmNu
dC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQuYwo+
IEBAIC0yNSw3ICsyNSw3IEBACj4gICNkZWZpbmUgVjRfU0hBREVSU19QRVJfQ09SRUdST1VQCTQK
PiAgCj4gIHN0cnVjdCBwYW5mcm9zdF9wZXJmY250IHsKPiAtCXN0cnVjdCBwYW5mcm9zdF9nZW1f
b2JqZWN0ICpibzsKPiArCXN0cnVjdCBwYW5mcm9zdF9nZW1fbWFwcGluZyAqbWFwcGluZzsKPiAg
CXNpemVfdCBib3NpemU7Cj4gIAl2b2lkICpidWY7Cj4gIAlzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9w
cml2ICp1c2VyOwo+IEBAIC00OSw3ICs0OSw3IEBAIHN0YXRpYyBpbnQgcGFuZnJvc3RfcGVyZmNu
dF9kdW1wX2xvY2tlZChzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldikKPiAgCWludCByZXQ7
Cj4gIAo+ICAJcmVpbml0X2NvbXBsZXRpb24oJnBmZGV2LT5wZXJmY250LT5kdW1wX2NvbXApOwo+
IC0JZ3B1dmEgPSBwZmRldi0+cGVyZmNudC0+Ym8tPm5vZGUuc3RhcnQgPDwgUEFHRV9TSElGVDsK
PiArCWdwdXZhID0gcGZkZXYtPnBlcmZjbnQtPm1hcHBpbmctPm1tbm9kZS5zdGFydCA8PCBQQUdF
X1NISUZUOwo+ICAJZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUEVSRkNOVF9CQVNFX0xPLCBncHV2YSk7
Cj4gIAlncHVfd3JpdGUocGZkZXYsIEdQVV9QRVJGQ05UX0JBU0VfSEksIGdwdXZhID4+IDMyKTsK
PiAgCWdwdV93cml0ZShwZmRldiwgR1BVX0lOVF9DTEVBUiwKPiBAQCAtODksMTcgKzg5LDIyIEBA
IHN0YXRpYyBpbnQgcGFuZnJvc3RfcGVyZmNudF9lbmFibGVfbG9ja2VkKHN0cnVjdCBwYW5mcm9z
dF9kZXZpY2UgKnBmZGV2LAo+ICAJaWYgKElTX0VSUihibykpCj4gIAkJcmV0dXJuIFBUUl9FUlIo
Ym8pOwo+ICAKPiAtCXBlcmZjbnQtPmJvID0gdG9fcGFuZnJvc3RfYm8oJmJvLT5iYXNlKTsKPiAt
Cj4gIAkvKiBNYXAgdGhlIHBlcmZjbnQgYnVmIGluIHRoZSBhZGRyZXNzIHNwYWNlIGF0dGFjaGVk
IHRvIGZpbGVfcHJpdi4gKi8KPiAtCXJldCA9IHBhbmZyb3N0X2dlbV9vcGVuKCZwZXJmY250LT5i
by0+YmFzZS5iYXNlLCBmaWxlX3ByaXYpOwo+ICsJcmV0ID0gcGFuZnJvc3RfZ2VtX29wZW4oJmJv
LT5iYXNlLCBmaWxlX3ByaXYpOwo+ICAJaWYgKHJldCkKPiAgCQlnb3RvIGVycl9wdXRfYm87Cj4g
IAo+ICsJcGVyZmNudC0+bWFwcGluZyA9IHBhbmZyb3N0X2dlbV9tYXBwaW5nX2dldCh0b19wYW5m
cm9zdF9ibygmYm8tPmJhc2UpLAo+ICsJCQkJCQkgICAgdXNlcik7Cj4gKwlpZiAoIXBlcmZjbnQt
Pm1hcHBpbmcpIHsKPiArCQlyZXQgPSAtRUlOVkFMOwo+ICsJCWdvdG8gZXJyX2Nsb3NlX2JvOwo+
ICsJfQo+ICsKPiAgCXBlcmZjbnQtPmJ1ZiA9IGRybV9nZW1fc2htZW1fdm1hcCgmYm8tPmJhc2Up
Owo+ICAJaWYgKElTX0VSUihwZXJmY250LT5idWYpKSB7Cj4gIAkJcmV0ID0gUFRSX0VSUihwZXJm
Y250LT5idWYpOwo+IC0JCWdvdG8gZXJyX2Nsb3NlX2JvOwo+ICsJCWdvdG8gZXJyX3B1dF9tYXBw
aW5nOwo+ICAJfQo+ICAKPiAgCS8qCj4gQEAgLTE1NCwxMiArMTU5LDE3IEBAIHN0YXRpYyBpbnQg
cGFuZnJvc3RfcGVyZmNudF9lbmFibGVfbG9ja2VkKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBm
ZGV2LAo+ICAJaWYgKHBhbmZyb3N0X2hhc19od19pc3N1ZShwZmRldiwgSFdfSVNTVUVfODE4Nikp
Cj4gIAkJZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUFJGQ05UX1RJTEVSX0VOLCAweGZmZmZmZmZmKTsK
PiAgCj4gKwkvKiBUaGUgQk8gcmVmIGlzIHJldGFpbmVkIGJ5IHRoZSBtYXBwaW5nLiAqLwo+ICsJ
ZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKCZiby0+YmFzZSk7Cj4gKwo+ICAJcmV0dXJuIDA7
Cj4gIAo+ICBlcnJfdnVubWFwOgo+IC0JZHJtX2dlbV9zaG1lbV92dW5tYXAoJnBlcmZjbnQtPmJv
LT5iYXNlLmJhc2UsIHBlcmZjbnQtPmJ1Zik7Cj4gKwlkcm1fZ2VtX3NobWVtX3Z1bm1hcCgmYm8t
PmJhc2UsIHBlcmZjbnQtPmJ1Zik7Cj4gK2Vycl9wdXRfbWFwcGluZzoKPiArCXBhbmZyb3N0X2dl
bV9tYXBwaW5nX3B1dChwZXJmY250LT5tYXBwaW5nKTsKPiAgZXJyX2Nsb3NlX2JvOgo+IC0JcGFu
ZnJvc3RfZ2VtX2Nsb3NlKCZwZXJmY250LT5iby0+YmFzZS5iYXNlLCBmaWxlX3ByaXYpOwo+ICsJ
cGFuZnJvc3RfZ2VtX2Nsb3NlKCZiby0+YmFzZSwgZmlsZV9wcml2KTsKPiAgZXJyX3B1dF9ibzoK
PiAgCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZCgmYm8tPmJhc2UpOwo+ICAJcmV0dXJuIHJl
dDsKPiBAQCAtMTgyLDExICsxOTIsMTEgQEAgc3RhdGljIGludCBwYW5mcm9zdF9wZXJmY250X2Rp
c2FibGVfbG9ja2VkKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LAo+ICAJCSAgR1BVX1BF
UkZDTlRfQ0ZHX01PREUoR1BVX1BFUkZDTlRfQ0ZHX01PREVfT0ZGKSk7Cj4gIAo+ICAJcGVyZmNu
dC0+dXNlciA9IE5VTEw7Cj4gLQlkcm1fZ2VtX3NobWVtX3Z1bm1hcCgmcGVyZmNudC0+Ym8tPmJh
c2UuYmFzZSwgcGVyZmNudC0+YnVmKTsKPiArCWRybV9nZW1fc2htZW1fdnVubWFwKCZwZXJmY250
LT5tYXBwaW5nLT5vYmotPmJhc2UuYmFzZSwgcGVyZmNudC0+YnVmKTsKPiAgCXBlcmZjbnQtPmJ1
ZiA9IE5VTEw7Cj4gLQlwYW5mcm9zdF9nZW1fY2xvc2UoJnBlcmZjbnQtPmJvLT5iYXNlLmJhc2Us
IGZpbGVfcHJpdik7Cj4gLQlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQoJnBlcmZjbnQtPmJv
LT5iYXNlLmJhc2UpOwo+IC0JcGVyZmNudC0+Ym8gPSBOVUxMOwo+ICsJcGFuZnJvc3RfZ2VtX2Ns
b3NlKCZwZXJmY250LT5tYXBwaW5nLT5vYmotPmJhc2UuYmFzZSwgZmlsZV9wcml2KTsKPiArCXBh
bmZyb3N0X2dlbV9tYXBwaW5nX3B1dChwZXJmY250LT5tYXBwaW5nKTsKPiArCXBlcmZjbnQtPm1h
cHBpbmcgPSBOVUxMOwo+ICAJcG1fcnVudGltZV9tYXJrX2xhc3RfYnVzeShwZmRldi0+ZGV2KTsK
PiAgCXBtX3J1bnRpbWVfcHV0X2F1dG9zdXNwZW5kKHBmZGV2LT5kZXYpOwo+ICAKPiAtLSAKPiAy
LjIzLjAKPiAKPiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
Xwo+IGRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKPiBkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmkt
ZGV2ZWwKCi0tIApEYW5pZWwgVmV0dGVyClNvZnR3YXJlIEVuZ2luZWVyLCBJbnRlbCBDb3Jwb3Jh
dGlvbgpodHRwOi8vYmxvZy5mZndsbC5jaApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
