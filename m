Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 855E4885F4
	for <lists+dri-devel@lfdr.de>; Sat, 10 Aug 2019 00:27:54 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E64606EEFA;
	Fri,  9 Aug 2019 22:27:21 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 211736EF0C;
 Fri,  9 Aug 2019 22:27:16 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Aug 2019 15:27:16 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,366,1559545200"; d="scan'208";a="176927047"
Received: from jmath3-mobl1.ger.corp.intel.com (HELO
 mwahaha-bdw.ger.corp.intel.com) ([10.252.5.86])
 by fmsmga007.fm.intel.com with ESMTP; 09 Aug 2019 15:27:14 -0700
From: Matthew Auld <matthew.auld@intel.com>
To: intel-gfx@lists.freedesktop.org
Subject: [PATCH v3 21/37] drm/i915: treat stolen as a region
Date: Fri,  9 Aug 2019 23:26:27 +0100
Message-Id: <20190809222643.23142-22-matthew.auld@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190809222643.23142-1-matthew.auld@intel.com>
References: <20190809222643.23142-1-matthew.auld@intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>,
 dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q29udmVydCBzdG9sZW4gbWVtb3J5IG92ZXIgdG8gYSByZWdpb24gb2JqZWN0LiBTdGlsbCBsZWF2
ZXMgb3BlbiB0aGUKcXVlc3Rpb24gd2l0aCB3aGF0IHRvIGRvIHdpdGggcHJlLWFsbG9jYXRlZCBv
YmplY3RzLi4uCgpTaWduZWQtb2ZmLWJ5OiBNYXR0aGV3IEF1bGQgPG1hdHRoZXcuYXVsZEBpbnRl
bC5jb20+CkNjOiBKb29uYXMgTGFodGluZW4gPGpvb25hcy5sYWh0aW5lbkBsaW51eC5pbnRlbC5j
b20+CkNjOiBBYmRpZWwgSmFudWxndWUgPGFiZGllbC5qYW51bGd1ZUBsaW51eC5pbnRlbC5jb20+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5jIHwgIDIgKy0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zdG9sZW4uYyB8IDcxICsrKysrKysr
KysrKysrKysrKystLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zdG9sZW4u
aCB8ICAzICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9ndHQuYyAgICAgICAgfCAx
NCArLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wY2kuYyAgICAgICAgICAgIHwgIDIg
Ky0KIDUgZmlsZXMgY2hhbmdlZCwgNjggaW5zZXJ0aW9ucygrKSwgMjQgZGVsZXRpb25zKC0pCgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5jCmluZGV4IDU5MjAxMmJi
OWIxNC4uYjZmMThjM2I5ZWVkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fcmVnaW9uLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X3JlZ2lvbi5jCkBAIC0xNTgsNyArMTU4LDcgQEAgaTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9yZWdp
b24oc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbSwKIAkJcmV0dXJuIEVSUl9QVFIoLUUy
QklHKTsKIAogCW9iaiA9IG1lbS0+b3BzLT5jcmVhdGVfb2JqZWN0KG1lbSwgc2l6ZSwgZmxhZ3Mp
OwotCWlmICghSVNfRVJSKG9iaikpCisJaWYgKCFJU19FUlJfT1JfTlVMTChvYmopKQogCQl0cmFj
ZV9pOTE1X2dlbV9vYmplY3RfY3JlYXRlKG9iaik7CiAKIAlyZXR1cm4gb2JqOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3N0b2xlbi5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3N0b2xlbi5jCmluZGV4IDY5NmRlYTVlYzdjNi4uYzkz
YTNmYWM5MGY2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
c3RvbGVuLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3N0b2xlbi5j
CkBAIC0xMCw2ICsxMCw3IEBACiAjaW5jbHVkZSA8ZHJtL2RybV9tbS5oPgogI2luY2x1ZGUgPGRy
bS9pOTE1X2RybS5oPgogCisjaW5jbHVkZSAiZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5oIgogI2luY2x1
ZGUgImk5MTVfZHJ2LmgiCiAjaW5jbHVkZSAiaTkxNV9nZW1fc3RvbGVuLmgiCiAKQEAgLTE1MCw3
ICsxNTEsNyBAQCBzdGF0aWMgaW50IGk5MTVfYWRqdXN0X3N0b2xlbihzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYsCiAJcmV0dXJuIDA7CiB9CiAKLXZvaWQgaTkxNV9nZW1fY2xlYW51
cF9zdG9sZW4oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQorc3RhdGljIHZvaWQg
aTkxNV9nZW1fY2xlYW51cF9zdG9sZW4oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
KQogewogCWlmICghZHJtX21tX2luaXRpYWxpemVkKCZkZXZfcHJpdi0+bW0uc3RvbGVuKSkKIAkJ
cmV0dXJuOwpAQCAtMzU1LDcgKzM1Niw3IEBAIHN0YXRpYyB2b2lkIGljbF9nZXRfc3RvbGVuX3Jl
c2VydmVkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LAogCX0KIH0KIAotaW50IGk5MTVf
Z2VtX2luaXRfc3RvbGVuKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3N0YXRp
YyBpbnQgaTkxNV9nZW1faW5pdF9zdG9sZW4oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2KQogewogCXJlc291cmNlX3NpemVfdCByZXNlcnZlZF9iYXNlLCBzdG9sZW5fdG9wOwogCXJl
c291cmNlX3NpemVfdCByZXNlcnZlZF90b3RhbCwgcmVzZXJ2ZWRfc2l6ZTsKQEAgLTUzMiw2ICs1
MzMsOSBAQCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9zdG9sZW4oc3RydWN0IGRybV9pOTE1X2dl
bV9vYmplY3QgKm9iaikKIAogCWk5MTVfZ2VtX3N0b2xlbl9yZW1vdmVfbm9kZShkZXZfcHJpdiwg
c3RvbGVuKTsKIAlrZnJlZShzdG9sZW4pOworCisJaWYgKG9iai0+bW0ucmVnaW9uKQorCQlpOTE1
X2dlbV9vYmplY3RfcmVsZWFzZV9tZW1vcnlfcmVnaW9uKG9iaik7CiB9CiAKIHN0YXRpYyBjb25z
dCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdF9vcHMgaTkxNV9nZW1fb2JqZWN0X3N0b2xlbl9v
cHMgPSB7CkBAIC01NDEsOCArNTQ1LDkgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1faTkxNV9n
ZW1fb2JqZWN0X29wcyBpOTE1X2dlbV9vYmplY3Rfc3RvbGVuX29wcyA9IHsKIH07CiAKIHN0YXRp
YyBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqCi1faTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9z
dG9sZW4oc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAotCQkJICAgICAgIHN0cnVj
dCBkcm1fbW1fbm9kZSAqc3RvbGVuKQorX19pOTE1X2dlbV9vYmplY3RfY3JlYXRlX3N0b2xlbihz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCisJCQkJc3RydWN0IGRybV9tbV9ub2Rl
ICpzdG9sZW4sCisJCQkJc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbSkKIHsKIAlzdHJ1
Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqOwogCXVuc2lnbmVkIGludCBjYWNoZV9sZXZlbDsK
QEAgLTU1OSw2ICs1NjQsOSBAQCBfaTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9zdG9sZW4oc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCWNhY2hlX2xldmVsID0gSEFTX0xMQyhkZXZf
cHJpdikgPyBJOTE1X0NBQ0hFX0xMQyA6IEk5MTVfQ0FDSEVfTk9ORTsKIAlpOTE1X2dlbV9vYmpl
Y3Rfc2V0X2NhY2hlX2NvaGVyZW5jeShvYmosIGNhY2hlX2xldmVsKTsKIAorCWlmIChtZW0pCisJ
CWk5MTVfZ2VtX29iamVjdF9pbml0X21lbW9yeV9yZWdpb24ob2JqLCBtZW0sIDApOworCiAJaWYg
KGk5MTVfZ2VtX29iamVjdF9waW5fcGFnZXMob2JqKSkKIAkJZ290byBjbGVhbnVwOwogCkBAIC01
NjksMTAgKzU3NywxMiBAQCBfaTkxNV9nZW1fb2JqZWN0X2NyZWF0ZV9zdG9sZW4oc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCXJldHVybiBOVUxMOwogfQogCi1zdHJ1Y3QgZHJt
X2k5MTVfZ2VtX29iamVjdCAqCi1pOTE1X2dlbV9vYmplY3RfY3JlYXRlX3N0b2xlbihzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCi0JCQkgICAgICByZXNvdXJjZV9zaXplX3Qgc2l6
ZSkKK3N0YXRpYyBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqCitfaTkxNV9nZW1fb2JqZWN0
X2NyZWF0ZV9zdG9sZW4oc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbSwKKwkJCSAgICAg
ICByZXNvdXJjZV9zaXplX3Qgc2l6ZSwKKwkJCSAgICAgICB1bnNpZ25lZCBpbnQgZmxhZ3MpCiB7
CisJc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gbWVtLT5pOTE1OwogCXN0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmo7CiAJc3RydWN0IGRybV9tbV9ub2RlICpzdG9sZW47
CiAJaW50IHJldDsKQEAgLTU5Myw3ICs2MDMsNyBAQCBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX3N0
b2xlbihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCiAJCXJldHVybiBOVUxMOwog
CX0KIAotCW9iaiA9IF9pOTE1X2dlbV9vYmplY3RfY3JlYXRlX3N0b2xlbihkZXZfcHJpdiwgc3Rv
bGVuKTsKKwlvYmogPSBfX2k5MTVfZ2VtX29iamVjdF9jcmVhdGVfc3RvbGVuKGRldl9wcml2LCBz
dG9sZW4sIG1lbSk7CiAJaWYgKG9iaikKIAkJcmV0dXJuIG9iajsKIApAQCAtNjAyLDYgKzYxMiw0
OSBAQCBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX3N0b2xlbihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqZGV2X3ByaXYsCiAJcmV0dXJuIE5VTEw7CiB9CiAKK3N0cnVjdCBkcm1faTkxNV9nZW1fb2Jq
ZWN0ICoKK2k5MTVfZ2VtX29iamVjdF9jcmVhdGVfc3RvbGVuKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdiwKKwkJCSAgICAgIHJlc291cmNlX3NpemVfdCBzaXplKQoreworCXN0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmo7CisKKwlvYmogPSBpOTE1X2dlbV9vYmplY3RfY3Jl
YXRlX3JlZ2lvbihkZXZfcHJpdi0+cmVnaW9uc1tJTlRFTF9NRU1PUllfU1RPTEVOXSwKKwkJCQkJ
ICAgIHNpemUsIEk5MTVfQk9fQUxMT0NfQ09OVElHVU9VUyk7CisJaWYgKElTX0VSUihvYmopKQor
CQlyZXR1cm4gTlVMTDsKKworCXJldHVybiBvYmo7Cit9CisKK3N0YXRpYyBpbnQgaW5pdF9zdG9s
ZW4oc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKm1lbSkKK3sKKwkvKgorCSAqIEluaXRpYWxp
c2Ugc3RvbGVuIGVhcmx5IHNvIHRoYXQgd2UgbWF5IHJlc2VydmUgcHJlYWxsb2NhdGVkCisJICog
b2JqZWN0cyBmb3IgdGhlIEJJT1MgdG8gS01TIHRyYW5zaXRpb24uCisJICovCisJcmV0dXJuIGk5
MTVfZ2VtX2luaXRfc3RvbGVuKG1lbS0+aTkxNSk7Cit9CisKK3N0YXRpYyB2b2lkIHJlbGVhc2Vf
c3RvbGVuKHN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICptZW0pCit7CisJaTkxNV9nZW1fY2xl
YW51cF9zdG9sZW4obWVtLT5pOTE1KTsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBpbnRlbF9t
ZW1vcnlfcmVnaW9uX29wcyBpOTE1X3JlZ2lvbl9zdG9sZW5fb3BzID0geworCS5pbml0ID0gaW5p
dF9zdG9sZW4sCisJLnJlbGVhc2UgPSByZWxlYXNlX3N0b2xlbiwKKwkuY3JlYXRlX29iamVjdCA9
IF9pOTE1X2dlbV9vYmplY3RfY3JlYXRlX3N0b2xlbiwKK307CisKK3N0cnVjdCBpbnRlbF9tZW1v
cnlfcmVnaW9uICppOTE1X2dlbV9zdG9sZW5fc2V0dXAoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
Kmk5MTUpCit7CisJcmV0dXJuIGludGVsX21lbW9yeV9yZWdpb25fY3JlYXRlKGk5MTUsCisJCQkJ
CSAgaW50ZWxfZ3JhcGhpY3Nfc3RvbGVuX3Jlcy5zdGFydCwKKwkJCQkJICByZXNvdXJjZV9zaXpl
KCZpbnRlbF9ncmFwaGljc19zdG9sZW5fcmVzKSwKKwkJCQkJICBJOTE1X0dUVF9QQUdFX1NJWkVf
NEssIDAsCisJCQkJCSAgJmk5MTVfcmVnaW9uX3N0b2xlbl9vcHMpOworfQorCiBzdHJ1Y3QgZHJt
X2k5MTVfZ2VtX29iamVjdCAqCiBpOTE1X2dlbV9vYmplY3RfY3JlYXRlX3N0b2xlbl9mb3JfcHJl
YWxsb2NhdGVkKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJCQkJICAgICAg
IHJlc291cmNlX3NpemVfdCBzdG9sZW5fb2Zmc2V0LApAQCAtNjQzLDcgKzY5Niw3IEBAIGk5MTVf
Z2VtX29iamVjdF9jcmVhdGVfc3RvbGVuX2Zvcl9wcmVhbGxvY2F0ZWQoc3RydWN0IGRybV9pOTE1
X3ByaXZhdGUgKmRldl9wcml2CiAJCXJldHVybiBOVUxMOwogCX0KIAotCW9iaiA9IF9pOTE1X2dl
bV9vYmplY3RfY3JlYXRlX3N0b2xlbihkZXZfcHJpdiwgc3RvbGVuKTsKKwlvYmogPSBfX2k5MTVf
Z2VtX29iamVjdF9jcmVhdGVfc3RvbGVuKGRldl9wcml2LCBzdG9sZW4sIE5VTEwpOwogCWlmIChv
YmogPT0gTlVMTCkgewogCQlEUk1fREVCVUdfRFJJVkVSKCJmYWlsZWQgdG8gYWxsb2NhdGUgc3Rv
bGVuIG9iamVjdFxuIik7CiAJCWk5MTVfZ2VtX3N0b2xlbl9yZW1vdmVfbm9kZShkZXZfcHJpdiwg
c3RvbGVuKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9z
dG9sZW4uaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zdG9sZW4uaAppbmRl
eCAyMjg5NjQ0ZDg2MDQuLmMxMDQwNjI3ZmJmMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL2k5MTVfZ2VtX3N0b2xlbi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9zdG9sZW4uaApAQCAtMjEsOCArMjEsNyBAQCBpbnQgaTkxNV9nZW1fc3RvbGVu
X2luc2VydF9ub2RlX2luX3JhbmdlKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwK
IAkJCQkJIHU2NCBlbmQpOwogdm9pZCBpOTE1X2dlbV9zdG9sZW5fcmVtb3ZlX25vZGUoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2LAogCQkJCSBzdHJ1Y3QgZHJtX21tX25vZGUgKm5v
ZGUpOwotaW50IGk5MTVfZ2VtX2luaXRfc3RvbGVuKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdik7Ci12b2lkIGk5MTVfZ2VtX2NsZWFudXBfc3RvbGVuKHN0cnVjdCBkcm1faTkxNV9w
cml2YXRlICpkZXZfcHJpdik7CitzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbiAqaTkxNV9nZW1f
c3RvbGVuX3NldHVwKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1KTsKIHN0cnVjdCBkcm1f
aTkxNV9nZW1fb2JqZWN0ICoKIGk5MTVfZ2VtX29iamVjdF9jcmVhdGVfc3RvbGVuKHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJCSAgICAgIHJlc291cmNlX3NpemVfdCBzaXpl
KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMKaW5kZXggMTAzMzJiODc2ZGQxLi41YmNm
NzFiMThlNWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0dC5jCkBAIC0yNzE3LDggKzI3
MTcsNiBAQCB2b2lkIGk5MTVfZ2VtX2NsZWFudXBfbWVtb3J5X3JlZ2lvbnMoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmk5MTUpCiB7CiAJaW50IGk7CiAKLQlpOTE1X2dlbV9jbGVhbnVwX3N0b2xl
bihpOTE1KTsKLQogCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGk5MTUtPnJlZ2lvbnMpOyAr
K2kpCXsKIAkJc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKnJlZ2lvbiA9IGk5MTUtPnJlZ2lv
bnNbaV07CiAKQEAgLTI3MzEsMTUgKzI3MjksNiBAQCBpbnQgaTkxNV9nZW1faW5pdF9tZW1vcnlf
cmVnaW9ucyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIHsKIAlpbnQgZXJyLCBpOwog
Ci0JLyoKLQkgKiBJbml0aWFsaXNlIHN0b2xlbiBlYXJseSBzbyB0aGF0IHdlIG1heSByZXNlcnZl
IHByZWFsbG9jYXRlZAotCSAqIG9iamVjdHMgZm9yIHRoZSBCSU9TIHRvIEtNUyB0cmFuc2l0aW9u
LgotCSAqLwotCS8qIFhYWDogc3RvbGVuIHdpbGwgYmVjb21lIGEgcmVnaW9uIGF0IHNvbWUgcG9p
bnQgKi8KLQllcnIgPSBpOTE1X2dlbV9pbml0X3N0b2xlbihpOTE1KTsKLQlpZiAoZXJyKQotCQly
ZXR1cm4gZXJyOwotCiAJZm9yIChpID0gMDsgaSA8IElOVEVMX01FTU9SWV9VS05PV047IGkrKykg
ewogCQlzdHJ1Y3QgaW50ZWxfbWVtb3J5X3JlZ2lvbiAqbWVtID0gTlVMTDsKIAkJdTMyIHR5cGU7
CkBAIC0yNzUyLDYgKzI3NDEsOSBAQCBpbnQgaTkxNV9nZW1faW5pdF9tZW1vcnlfcmVnaW9ucyhz
dHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSkKIAkJY2FzZSBJTlRFTF9TTUVNOgogCQkJbWVt
ID0gaTkxNV9nZW1fc2htZW1fc2V0dXAoaTkxNSk7CiAJCQlicmVhazsKKwkJY2FzZSBJTlRFTF9T
VE9MRU46CisJCQltZW0gPSBpOTE1X2dlbV9zdG9sZW5fc2V0dXAoaTkxNSk7CisJCQlicmVhazsK
IAkJfQogCiAJCWlmIChJU19FUlIobWVtKSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaTkxNV9wY2kuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcGNpLmMKaW5kZXgg
NTJhZDIxNDQwZjA0Li4wNTU0N2FmZGU5NzQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfcGNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9wY2kuYwpAQCAt
MTQ1LDcgKzE0NSw3IEBACiAJLnBhZ2Vfc2l6ZXMgPSBJOTE1X0dUVF9QQUdFX1NJWkVfNEsKIAog
I2RlZmluZSBHRU5fREVGQVVMVF9SRUdJT05TIFwKLQkubWVtb3J5X3JlZ2lvbnMgPSBSRUdJT05f
U01FTQorCS5tZW1vcnlfcmVnaW9ucyA9IFJFR0lPTl9TTUVNIHwgUkVHSU9OX1NUT0xFTgogCiAj
ZGVmaW5lIEk4MzBfRkVBVFVSRVMgXAogCUdFTigyKSwgXAotLSAKMi4yMC4xCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBs
aXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
