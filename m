Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4A32BE13C4
	for <lists+dri-devel@lfdr.de>; Wed, 23 Oct 2019 10:11:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 779666E9AD;
	Wed, 23 Oct 2019 08:11:11 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-vk1-xa4a.google.com (mail-vk1-xa4a.google.com
 [IPv6:2607:f8b0:4864:20::a4a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DC1C789260
 for <dri-devel@lists.freedesktop.org>; Tue, 22 Oct 2019 11:46:55 +0000 (UTC)
Received: by mail-vk1-xa4a.google.com with SMTP id o66so7472009vka.19
 for <dri-devel@lists.freedesktop.org>; Tue, 22 Oct 2019 04:46:55 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=6PvO4YGcBPU7HqTKrAMBpr5jWnrEO6vhCWHVgxtCZF0=;
 b=OShTUsCiPtBFeuG5aqdlnyoFzVIbzGqa/inucGaKuG06BpjrXHcEFlKyUy06pw4XCj
 Z0GpzmHO2yKrbsuFvkkm+0GEJDFn0Zu5us6y6BNX483pbq23h4HccVa1Mnl4Z7IXfzUO
 K72f/sGfxxMNnWaUTggPRJ18/fSSLoorJiij+kYlS4Y+G9EkpdLil/wW5gIn2cftMwxZ
 YeCZ4oSBDi4D2NkOO7SmZJz0CZ23hCClnVlgelgODSrSiFGT64FMtzvKtwubSU2cx7WD
 kNxfkBoQeZb9+NoT9FfhO9tTDg6D8q7jxhTamhg9fD2nCNjx7iFmKsAZe8gHpubYK2Q/
 hBsg==
X-Gm-Message-State: APjAAAUObgwT8EYMWWNiN16QoAAyrfNqNq0Qt3FZGCPidKiLNQBqRsA/
 J1FrFDiKSGSmJosYyMU8POr1ok/Ja/YD
X-Google-Smtp-Source: APXvYqwY1rlBy1N3hHiRYbjJlOMwfLIOQOq0dmz2amkEN+2rQ4+TI3BcHF+QmqbKwaRye4ZzLeXpjHYP/Bkz
X-Received: by 2002:a67:f2da:: with SMTP id a26mr1534141vsn.60.1571744814867; 
 Tue, 22 Oct 2019 04:46:54 -0700 (PDT)
Date: Tue, 22 Oct 2019 19:45:01 +0800
In-Reply-To: <20191022114505.196852-1-tzungbi@google.com>
Message-Id: <20191022193301.2.I66284413ef7dbbf4b6ea7735f71807ebd35bf7e8@changeid>
Mime-Version: 1.0
References: <20191022114505.196852-1-tzungbi@google.com>
X-Mailer: git-send-email 2.23.0.866.gb869b98d4c-goog
Subject: [PATCH 2/6] drm: bridge: it6505: bridge to hdmi-codec
From: Tzung-Bi Shih <tzungbi@google.com>
To: broonie@kernel.org, robh+dt@kernel.org, narmstrong@baylibre.com
X-Mailman-Approved-At: Wed, 23 Oct 2019 08:09:38 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=6PvO4YGcBPU7HqTKrAMBpr5jWnrEO6vhCWHVgxtCZF0=;
 b=v/XhJrE4hvhwOzEGcKs+eQoCDnnCj5mUo5POIAosRXGG9AR786k5ivdMEx0u1rAa0G
 6FwQqiAnM4B6RlupEtxMjyDNTPzx34+E+/70eATGUSkjoJ8W8GvCVILVpBm2wwS0OLtF
 FsHUuxV6o+LY4rkICqCZ2pv588XXJ85QW0p3TajaPFxkmYIuxmsJAgn01++mJD7sr8FX
 qQK7k3vaWYUeu/1UDlFrcRHs8lKDl5yseG5047lhqeRkvc7QVEOoMnskxTlBn2dviIYF
 WvDKYhDmT/6v2QcIjvBcyBFdj5zYQORvKyeT9rKwpfGTE+vQjTOHSioHV293JvSx2+5k
 jm2g==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, alsa-devel@alsa-project.org,
 cychiang@google.com, jonas@kwiboo.se, allen.chen@ite.com.tw,
 jernej.skrabec@siol.net, dri-devel@lists.freedesktop.org,
 Laurent.pinchart@ideasonboard.com, tzungbi@google.com, dgreid@google.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogQWxsZW4gQ2hlbiA8YWxsZW4uY2hlbkBpdGUuY29tLnR3PgoKQnJpZGdlIHRvIGhkbWkt
Y29kZWMgdG8gc3VwcG9ydCBhdWRpbyBmZWF0dXJlLgoKSXQgaXMgb2JzZXJ2ZWQgdGhhdCBzb21l
IERQLXRvLUhETUkgZG9uZ2xlcyB3aWxsIGdldCBpbnRvIGJhZCBzdGF0ZXMKaWYgc2VuZGluZyBJ
bmZvRnJhbWUgd2l0aG91dCBhdWRpbyBkYXRhLiAgRGVmZXIgdG8gZW5hYmxlIGl0NjUwNSdzCmF1
ZGlvIGZlYXR1cmUgd2hlbiBQQ00gdHJpZ2dlcnMgU1RBUlQgb3IgUkVTVU1FLgoKU2lnbmVkLW9m
Zi1ieTogQWxsZW4gQ2hlbiA8YWxsZW4uY2hlbkBpdGUuY29tLnR3PgpTaWduZWQtb2ZmLWJ5OiBU
enVuZy1CaSBTaGloIDx0enVuZ2JpQGdvb2dsZS5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2Jy
aWRnZS9pdGUtaXQ2NTA1LmMgfCAxNTIgKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogMSBm
aWxlIGNoYW5nZWQsIDE1MiBpbnNlcnRpb25zKCspCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS9pdGUtaXQ2NTA1LmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2l0ZS1pdDY1
MDUuYwppbmRleCA1ZTA0NmY2NzczNDMuLjFkMTkxODRkMjA1NiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2JyaWRnZS9pdGUtaXQ2NTA1LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9pdGUtaXQ2NTA1LmMKQEAgLTI2LDYgKzI2LDggQEAKICNpbmNsdWRlIDxkcm0vZHJtX2RwX2hl
bHBlci5oPgogI2luY2x1ZGUgPGRybS9kcm1fZWRpZC5oPgogCisjaW5jbHVkZSA8c291bmQvaGRt
aS1jb2RlYy5oPgorCiAjZGVmaW5lIEFYIDAKICNkZWZpbmUgQlggMQogI2RlZmluZSBBVURTRUwg
STJTCkBAIC0xNDYsNiArMTQ4LDcgQEAgc3RydWN0IGl0NjUwNSB7CiAJc3RydWN0IG5vdGlmaWVy
X2Jsb2NrIGV2ZW50X25iOwogCXN0cnVjdCBleHRjb25fZGV2ICpleHRjb247CiAJc3RydWN0IHdv
cmtfc3RydWN0IGV4dGNvbl93cTsKKwlzdHJ1Y3QgZGVsYXllZF93b3JrIGRlbGF5ZWRfYXVkaW87
CiAJZW51bSBzeXNfc3RhdHVzIHN0YXR1czsKIAlib29sIGhicjsKIAl1OCBlbl9zc2M7CkBAIC0x
MjIzLDYgKzEyMjYsMTQ5IEBAIHN0YXRpYyB2b2lkIGl0NjUwNV9zZXRfYXVkaW8oc3RydWN0IGl0
NjUwNSAqaXQ2NTA1KQogCWRwdHhzZXQoaXQ2NTA1LCAweEQzLCAweDIwLCAweDAwKTsKIH0KIAor
c3RhdGljIHZvaWQgaXQ2NTA1X2RlbGF5ZWRfYXVkaW8oc3RydWN0IHdvcmtfc3RydWN0ICp3b3Jr
KQoreworCXN0cnVjdCBpdDY1MDUgKml0NjUwNSA9IGNvbnRhaW5lcl9vZih3b3JrLCBzdHJ1Y3Qg
aXQ2NTA1LAorCQkJCQkgICAgIGRlbGF5ZWRfYXVkaW8ud29yayk7CisKKwlpdDY1MDVfc2V0X2F1
ZGlvKGl0NjUwNSk7CisJaXQ2NTA1LT5lbl9hdWRpbyA9IDE7Cit9CisKK3N0YXRpYyBpbnQgaXQ2
NTA1X2F1ZGlvX2h3X3BhcmFtcyhzdHJ1Y3QgZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCisJCQkJ
ICBzdHJ1Y3QgaGRtaV9jb2RlY19kYWlmbXQgKmRhaWZtdCwKKwkJCQkgIHN0cnVjdCBoZG1pX2Nv
ZGVjX3BhcmFtcyAqcGFyYW1zKQoreworCXN0cnVjdCBpdDY1MDUgKml0NjUwNSA9IGRldl9nZXRf
ZHJ2ZGF0YShkZXYpOworCXVuc2lnbmVkIGludCBjaGFubmVsX251bSA9IHBhcmFtcy0+Y2VhLmNo
YW5uZWxzOworCisJRFJNX0RFVl9ERUJVR19EUklWRVIoZGV2LCAic2V0dGluZyAlZCBIeiwgJWQg
Yml0LCAlZCBjaGFubmVsc1xuIiwKKwkJCSAgICAgcGFyYW1zLT5zYW1wbGVfcmF0ZSwgcGFyYW1z
LT5zYW1wbGVfd2lkdGgsCisJCQkgICAgIGNoYW5uZWxfbnVtKTsKKworCWlmICghaXQ2NTA1LT5i
cmlkZ2UuZW5jb2RlcikKKwkJcmV0dXJuIC1FTk9ERVY7CisKKwlzd2l0Y2ggKHBhcmFtcy0+c2Ft
cGxlX3JhdGUpIHsKKwljYXNlIDI0MDAwOgorCQlpdDY1MDUtPmF1ZF9mcyA9IEFVRDI0SzsKKwkJ
YnJlYWs7CisJY2FzZSAzMjAwMDoKKwkJaXQ2NTA1LT5hdWRfZnMgPSBBVUQzMks7CisJCWJyZWFr
OworCWNhc2UgNDQxMDA6CisJCWl0NjUwNS0+YXVkX2ZzID0gQVVENDRQMUs7CisJCWJyZWFrOwor
CWNhc2UgNDgwMDA6CisJCWl0NjUwNS0+YXVkX2ZzID0gQVVENDhLOworCQlicmVhazsKKwljYXNl
IDg4MjAwOgorCQlpdDY1MDUtPmF1ZF9mcyA9IEFVRDg4UDJLOworCQlicmVhazsKKwljYXNlIDk2
MDAwOgorCQlpdDY1MDUtPmF1ZF9mcyA9IEFVRDk2SzsKKwkJYnJlYWs7CisJY2FzZSAxNzY0MDA6
CisJCWl0NjUwNS0+YXVkX2ZzID0gQVVEMTc2UDRLOworCQlicmVhazsKKwljYXNlIDE5MjAwMDoK
KwkJaXQ2NTA1LT5hdWRfZnMgPSBBVUQxOTJLOworCQlicmVhazsKKwlkZWZhdWx0OgorCQlEUk1f
REVWX0RFQlVHX0RSSVZFUihkZXYsICJzYW1wbGUgcmF0ZTogJWQgSHogbm90IHN1cHBvcnQiLAor
CQkJCSAgICAgcGFyYW1zLT5zYW1wbGVfcmF0ZSk7CisJCXJldHVybiAtRUlOVkFMOworCX0KKwor
CXN3aXRjaCAocGFyYW1zLT5zYW1wbGVfd2lkdGgpIHsKKwljYXNlIDE2OgorCQlpdDY1MDUtPmF1
ZHdvcmRsZW5ndGggPSBBVUQxNkJJVDsKKwkJYnJlYWs7CisJY2FzZSAxODoKKwkJaXQ2NTA1LT5h
dWR3b3JkbGVuZ3RoID0gQVVEMThCSVQ7CisJCWJyZWFrOworCWNhc2UgMjA6CisJCWl0NjUwNS0+
YXVkd29yZGxlbmd0aCA9IEFVRDIwQklUOworCQlicmVhazsKKwljYXNlIDI0OgorCWNhc2UgMzI6
CisJCWl0NjUwNS0+YXVkd29yZGxlbmd0aCA9IEFVRDI0QklUOworCQlicmVhazsKKwlkZWZhdWx0
OgorCQlEUk1fREVWX0RFQlVHX0RSSVZFUihkZXYsICJ3b3JkbGVuZ3RoOiAlZCBiaXQgbm90IHN1
cHBvcnQiLAorCQkJCSAgICAgcGFyYW1zLT5zYW1wbGVfd2lkdGgpOworCQlyZXR1cm4gLUVJTlZB
TDsKKwl9CisKKwlpZiAoY2hhbm5lbF9udW0gPT0gMCB8fCBjaGFubmVsX251bSAlIDIpIHsKKwkJ
RFJNX0RFVl9ERUJVR19EUklWRVIoZGV2LCAiY2hhbm5lbCBudW1iZXI6ICVkIG5vdCBzdXBwb3J0
IiwKKwkJCQkgICAgIGNoYW5uZWxfbnVtKTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCWl0NjUw
NS0+YXVkX2NoID0gY2hhbm5lbF9udW07CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBp
dDY1MDVfYXVkaW9fdHJpZ2dlcihzdHJ1Y3QgZGV2aWNlICpkZXYsIGludCBldmVudCkKK3sKKwlz
dHJ1Y3QgaXQ2NTA1ICppdDY1MDUgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKKworCURSTV9ERVZf
REVCVUdfRFJJVkVSKGRldiwgImV2ZW50OiAlZCIsIGV2ZW50KTsKKwlzd2l0Y2ggKGV2ZW50KSB7
CisJY2FzZSBIRE1JX0NPREVDX1RSSUdHRVJfRVZFTlRfU1RBUlQ6CisJY2FzZSBIRE1JX0NPREVD
X1RSSUdHRVJfRVZFTlRfUkVTVU1FOgorCQlxdWV1ZV9kZWxheWVkX3dvcmsoc3lzdGVtX3dxLCAm
aXQ2NTA1LT5kZWxheWVkX2F1ZGlvLAorCQkJCSAgIG1zZWNzX3RvX2ppZmZpZXMoMTgwKSk7CisJ
CWJyZWFrOworCWNhc2UgSERNSV9DT0RFQ19UUklHR0VSX0VWRU5UX1NUT1A6CisJY2FzZSBIRE1J
X0NPREVDX1RSSUdHRVJfRVZFTlRfU1VTUEVORDoKKwkJY2FuY2VsX2RlbGF5ZWRfd29yaygmaXQ2
NTA1LT5kZWxheWVkX2F1ZGlvKTsKKwkJYnJlYWs7CisJZGVmYXVsdDoKKwkJcmV0dXJuIC1FSU5W
QUw7CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lkIGl0NjUwNV9hdWRpb19zaHV0
ZG93bihzdHJ1Y3QgZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEpCit7CisJc3RydWN0IGl0NjUwNSAq
aXQ2NTA1ID0gZGV2X2dldF9kcnZkYXRhKGRldik7CisKKwlkcHR4c2V0KGl0NjUwNSwgMHhFOCwg
MHgyMiwgMHgwMCk7CisJZHB0eHNldChpdDY1MDUsIDB4MDUsIDB4MDIsIDB4MDIpOworCWl0NjUw
NS0+ZW5fYXVkaW8gPSAwOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGhkbWlfY29kZWNfb3Bz
IGl0NjUwNV9hdWRpb19jb2RlY19vcHMgPSB7CisJLmh3X3BhcmFtcyA9IGl0NjUwNV9hdWRpb19o
d19wYXJhbXMsCisJLnRyaWdnZXIgPSBpdDY1MDVfYXVkaW9fdHJpZ2dlciwKKwkuYXVkaW9fc2h1
dGRvd24gPSBpdDY1MDVfYXVkaW9fc2h1dGRvd24sCit9OworCitzdGF0aWMgaW50IGl0NjUwNV9y
ZWdpc3Rlcl9hdWRpb19kcml2ZXIoc3RydWN0IGRldmljZSAqZGV2KQoreworCXN0cnVjdCBpdDY1
MDUgKml0NjUwNSA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOworCXN0cnVjdCBoZG1pX2NvZGVjX3Bk
YXRhIGNvZGVjX2RhdGEgPSB7CisJCS5vcHMgPSAmaXQ2NTA1X2F1ZGlvX2NvZGVjX29wcywKKwkJ
Lm1heF9pMnNfY2hhbm5lbHMgPSA4LAorCQkuaTJzID0gMSwKKwl9OworCXN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXY7CisKKwlwZGV2ID0gcGxhdGZvcm1fZGV2aWNlX3JlZ2lzdGVyX2RhdGEo
ZGV2LCBIRE1JX0NPREVDX0RSVl9OQU1FLAorCQkJCQkgICAgIFBMQVRGT1JNX0RFVklEX0FVVE8s
ICZjb2RlY19kYXRhLAorCQkJCQkgICAgIHNpemVvZihjb2RlY19kYXRhKSk7CisJaWYgKElTX0VS
UihwZGV2KSkKKwkJcmV0dXJuIFBUUl9FUlIocGRldik7CisKKwlJTklUX0RFTEFZRURfV09SSygm
aXQ2NTA1LT5kZWxheWVkX2F1ZGlvLCBpdDY1MDVfZGVsYXllZF9hdWRpbyk7CisKKwlEUk1fREVW
X0RFQlVHX0RSSVZFUihkZXYsICJib3VuZCB0byAlcyIsIEhETUlfQ09ERUNfRFJWX05BTUUpOwor
CXJldHVybiAwOworfQorCiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgKiBEUENEIFJlYWQgYW5kIEVE
SUQKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKiovCkBAIC0yNDYwLDYgKzI2MDYsMTIgQEAgc3RhdGljIGlu
dCBpdDY1MDVfaTJjX3Byb2JlKHN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQsCiAJCXJldHVybiBl
cnI7CiAJfQogCisJZXJyID0gaXQ2NTA1X3JlZ2lzdGVyX2F1ZGlvX2RyaXZlcihkZXYpOworCWlm
IChlcnIgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFpbGVkIHRvIHJlZ2lzdGVyIGF1
ZGlvIGRyaXZlcjogJWQiLCBlcnIpOworCQlyZXR1cm4gZXJyOworCX0KKwogCS8qIFJlZ2lzdGVy
IGF1eCBjaGFubmVsICovCiAJaXQ2NTA1LT5hdXgubmFtZSA9ICJEUC1BVVgiOwogCWl0NjUwNS0+
YXV4LmRldiA9IGRldjsKLS0gCjIuMjMuMC44NjYuZ2I4NjliOThkNGMtZ29vZwoKX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcg
bGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRl
c2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
