Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 86ADA1FEC4A
	for <lists+dri-devel@lfdr.de>; Thu, 18 Jun 2020 09:18:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 557006EB1F;
	Thu, 18 Jun 2020 07:17:38 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lj1-x244.google.com (mail-lj1-x244.google.com
 [IPv6:2a00:1450:4864:20::244])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AE20B6E16D
 for <dri-devel@lists.freedesktop.org>; Wed, 17 Jun 2020 23:41:04 +0000 (UTC)
Received: by mail-lj1-x244.google.com with SMTP id i27so4961608ljb.12
 for <dri-devel@lists.freedesktop.org>; Wed, 17 Jun 2020 16:41:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=lirhIx0iRlu3vfHaJJDD4eWpH3fBzn3WOnUPZr0Pdc8=;
 b=UGFppwtD0S5aRu9OWJnC+hJtvi9i+WRb8+BaxEQnvQ9nBaBQYWzUVtupwJFIvS4YAx
 sqE1UFcQKsTgRkcprPyaOb7GMTJmXZwCqNvxmqpkS6bkNacwLTVv2wF8z0uBtWYyAyAt
 XwCGFzgtqDGS2/iRx7p2vNFmJ2I5s6ffcKxgnAAfJziw7WZV9+RSWFXhwq1tq55IExpq
 7S4TvBNbV4gKMUp468nQRIgs2h0lFGXIOnIUPZHwWYl0bheD2opdfw1UJJ/KGuBv+9IW
 UvaKTavhUU65GB5kzn7eCIe9+m9kqz8kJx6ntzazRhYt2nSOUmfGWTASYjVU2Aw/VbfZ
 BGjQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=lirhIx0iRlu3vfHaJJDD4eWpH3fBzn3WOnUPZr0Pdc8=;
 b=ZIMtBYXpiPeRBBpcZiX9eiL7STD+cCVHOlxUi31KKX33E6f56Rc8OLafldZugqAAQj
 JWz2cDPkBarBBHoZypF4t1ohkFoK65/mjeXJcvHbPcX0xJVkY7o6QRBOin7mUij9OVgF
 t6BG6JHFZS/rBNp4xPbpPkOR52imywXpoV/1oVLGH+fqDJaU6IzWVpTPxwK1ASy9CWhT
 9FE2XVCKMr+LhiK2UJzc2QEUKQ3zVpc9xkzAwbzi3U7oHb57VfQaNKz+75sa2ufIIKFG
 nDoB+hRbU6RbEfyRte8rJAUcbyEBLv1Hg7sLgM+wKl9O+vlv+qeGTDYer8Q5cz5wRh1k
 bC6g==
X-Gm-Message-State: AOAM5327LEU/aQtHj087ygWHvJtA/OHCyxp5bOtkMQHq3fXHb89TJbOc
 uTA2XXeXtyV4Q8zV3tA98iA=
X-Google-Smtp-Source: ABdhPJwbNPhhk36ZR70FeX2ugPoqhRhe7oYpCWKRrs0eFMjwGmC3mutK7RmOplQMyq6VuXvzu9kQDA==
X-Received: by 2002:a2e:7c03:: with SMTP id x3mr778161ljc.227.1592437263111;
 Wed, 17 Jun 2020 16:41:03 -0700 (PDT)
Received: from localhost.localdomain (79-139-237-54.dynamic.spd-mgts.ru.
 [79.139.237.54])
 by smtp.gmail.com with ESMTPSA id c8sm287871lfc.46.2020.06.17.16.41.02
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 17 Jun 2020 16:41:02 -0700 (PDT)
From: Dmitry Osipenko <digetx@gmail.com>
To: Thierry Reding <thierry.reding@gmail.com>,
 Thomas Zimmermann <tzimmermann@suse.de>,
 Derek Basehore <dbasehore@chromium.org>, Sam Ravnborg <sam@ravnborg.org>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Sean Paul <sean@poorly.run>, Daniel Vetter <daniel@ffwll.ch>,
 =?UTF-8?q?Ville=20Syrj=C3=A4l=C3=A4?= <ville.syrjala@linux.intel.com>,
 Emil Velikov <emil.l.velikov@gmail.com>,
 Daniel Stone <daniel@fooishbar.org>
Subject: [PATCH v3 2/3] drm/tegra: plane: Support horizontal reflection
Date: Thu, 18 Jun 2020 02:40:39 +0300
Message-Id: <20200617234040.1094-3-digetx@gmail.com>
X-Mailer: git-send-email 2.26.0
In-Reply-To: <20200617234040.1094-1-digetx@gmail.com>
References: <20200617234040.1094-1-digetx@gmail.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Thu, 18 Jun 2020 07:17:31 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-tegra@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U3VwcG9ydCBob3Jpem9udGFsIHJlZmxlY3Rpb24gbW9kZSB3aGljaCB3aWxsIGFsbG93IHRvIHN1
cHBvcnQgMTgwwrAKcm90YXRpb24gbW9kZSB3aGVuIGNvbWJpbmVkIHdpdGggdGhlIHZlcnRpY2Fs
IHJlZmxlY3Rpb24uCgpTaWduZWQtb2ZmLWJ5OiBEbWl0cnkgT3NpcGVua28gPGRpZ2V0eEBnbWFp
bC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2RjLmMgICAgfCAzOCArKysrKysrKysr
KysrKysrKysrKysrKysrKysrKy0tLS0tLQogZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2RjLmggICAg
fCAgMSArCiBkcml2ZXJzL2dwdS9kcm0vdGVncmEvcGxhbmUuYyB8ICAxICsKIGRyaXZlcnMvZ3B1
L2RybS90ZWdyYS9wbGFuZS5oIHwgIDEgKwogNCBmaWxlcyBjaGFuZ2VkLCAzNSBpbnNlcnRpb25z
KCspLCA2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9k
Yy5jIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2RjLmMKaW5kZXggYmI5MmMxZWQ0NGU5Li5mODE0
OWRjM2IxYjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9kYy5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS90ZWdyYS9kYy5jCkBAIC0zNjgsNiArMzY4LDEyIEBAIHN0YXRpYyB2b2lk
IHRlZ3JhX2RjX3NldHVwX3dpbmRvdyhzdHJ1Y3QgdGVncmFfcGxhbmUgKnBsYW5lLAogCWhfc2l6
ZSA9IHdpbmRvdy0+c3JjLncgKiBicHA7CiAJdl9zaXplID0gd2luZG93LT5zcmMuaDsKIAorCWlm
ICh3aW5kb3ctPnJlZmxlY3RfeCkKKwkJaF9vZmZzZXQgKz0gKHdpbmRvdy0+c3JjLncgLSAxKSAq
IGJwcDsKKworCWlmICh3aW5kb3ctPnJlZmxlY3RfeSkKKwkJdl9vZmZzZXQgKz0gd2luZG93LT5z
cmMuaCAtIDE7CisKIAl2YWx1ZSA9IFZfUFJFU0NBTEVEX1NJWkUodl9zaXplKSB8IEhfUFJFU0NB
TEVEX1NJWkUoaF9zaXplKTsKIAl0ZWdyYV9wbGFuZV93cml0ZWwocGxhbmUsIHZhbHVlLCBEQ19X
SU5fUFJFU0NBTEVEX1NJWkUpOwogCkBAIC00MDQsOSArNDEwLDYgQEAgc3RhdGljIHZvaWQgdGVn
cmFfZGNfc2V0dXBfd2luZG93KHN0cnVjdCB0ZWdyYV9wbGFuZSAqcGxhbmUsCiAJCXRlZ3JhX3Bs
YW5lX3dyaXRlbChwbGFuZSwgd2luZG93LT5zdHJpZGVbMF0sIERDX1dJTl9MSU5FX1NUUklERSk7
CiAJfQogCi0JaWYgKHdpbmRvdy0+cmVmbGVjdF95KQotCQl2X29mZnNldCArPSB3aW5kb3ctPnNy
Yy5oIC0gMTsKLQogCXRlZ3JhX3BsYW5lX3dyaXRlbChwbGFuZSwgaF9vZmZzZXQsIERDX1dJTkJV
Rl9BRERSX0hfT0ZGU0VUKTsKIAl0ZWdyYV9wbGFuZV93cml0ZWwocGxhbmUsIHZfb2Zmc2V0LCBE
Q19XSU5CVUZfQUREUl9WX09GRlNFVCk7CiAKQEAgLTQ3MCw2ICs0NzMsOSBAQCBzdGF0aWMgdm9p
ZCB0ZWdyYV9kY19zZXR1cF93aW5kb3coc3RydWN0IHRlZ3JhX3BsYW5lICpwbGFuZSwKIAkJdmFs
dWUgfD0gQ09MT1JfRVhQQU5EOwogCX0KIAorCWlmICh3aW5kb3ctPnJlZmxlY3RfeCkKKwkJdmFs
dWUgfD0gSF9ESVJFQ1RJT047CisKIAlpZiAod2luZG93LT5yZWZsZWN0X3kpCiAJCXZhbHVlIHw9
IFZfRElSRUNUSU9OOwogCkBAIC02MDEsNyArNjA3LDEwIEBAIHN0YXRpYyBpbnQgdGVncmFfcGxh
bmVfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAogCQkJCSAgICBzdHJ1Y3Qg
ZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSkKIHsKIAlzdHJ1Y3QgdGVncmFfcGxhbmVfc3RhdGUgKnBs
YW5lX3N0YXRlID0gdG9fdGVncmFfcGxhbmVfc3RhdGUoc3RhdGUpOwotCXVuc2lnbmVkIGludCBy
b3RhdGlvbiA9IERSTV9NT0RFX1JPVEFURV8wIHwgRFJNX01PREVfUkVGTEVDVF9ZOworCXVuc2ln
bmVkIGludCBzdXBwb3J0ZWRfcm90YXRpb24gPSBEUk1fTU9ERV9ST1RBVEVfMCB8CisJCQkJCSAg
RFJNX01PREVfUkVGTEVDVF9YIHwKKwkJCQkJICBEUk1fTU9ERV9SRUZMRUNUX1k7CisJdW5zaWdu
ZWQgaW50IHJvdGF0aW9uID0gc3RhdGUtPnJvdGF0aW9uOwogCXN0cnVjdCB0ZWdyYV9ib190aWxp
bmcgKnRpbGluZyA9ICZwbGFuZV9zdGF0ZS0+dGlsaW5nOwogCXN0cnVjdCB0ZWdyYV9wbGFuZSAq
dGVncmEgPSB0b190ZWdyYV9wbGFuZShwbGFuZSk7CiAJc3RydWN0IHRlZ3JhX2RjICpkYyA9IHRv
X3RlZ3JhX2RjKHN0YXRlLT5jcnRjKTsKQEAgLTYzOSw3ICs2NDgsMjEgQEAgc3RhdGljIGludCB0
ZWdyYV9wbGFuZV9hdG9taWNfY2hlY2soc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCiAJCXJldHVy
biAtRUlOVkFMOwogCX0KIAotCXJvdGF0aW9uID0gZHJtX3JvdGF0aW9uX3NpbXBsaWZ5KHN0YXRl
LT5yb3RhdGlvbiwgcm90YXRpb24pOworCS8qCisJICogT2xkZXIgdXNlcnNwYWNlIHVzZWQgY3Vz
dG9tIEJPIGZsYWcgaW4gb3JkZXIgdG8gc3BlY2lmeSB0aGUgWQorCSAqIHJlZmxlY3Rpb24sIHdo
aWxlIG1vZGVybiB1c2Vyc3BhY2UgdXNlcyB0aGUgZ2VuZXJpYyBEUk0gcm90YXRpb24KKwkgKiBw
cm9wZXJ0eSBpbiBvcmRlciB0byBhY2hpZXZlIHRoZSBzYW1lIHJlc3VsdC4gIFRoZSBsZWdhY3kg
Qk8gZmxhZworCSAqIGR1cGxpY2F0ZXMgdGhlIERSTSByb3RhdGlvbiBwcm9wZXJ0eSB3aGVuIGJv
dGggYXJlIHNldC4KKwkgKi8KKwlpZiAodGVncmFfZmJfaXNfYm90dG9tX3VwKHN0YXRlLT5mYikp
CisJCXJvdGF0aW9uIHw9IERSTV9NT0RFX1JFRkxFQ1RfWTsKKworCXJvdGF0aW9uID0gZHJtX3Jv
dGF0aW9uX3NpbXBsaWZ5KHJvdGF0aW9uLCBzdXBwb3J0ZWRfcm90YXRpb24pOworCisJaWYgKHJv
dGF0aW9uICYgRFJNX01PREVfUkVGTEVDVF9YKQorCQlwbGFuZV9zdGF0ZS0+cmVmbGVjdF94ID0g
dHJ1ZTsKKwllbHNlCisJCXBsYW5lX3N0YXRlLT5yZWZsZWN0X3ggPSBmYWxzZTsKIAogCWlmIChy
b3RhdGlvbiAmIERSTV9NT0RFX1JFRkxFQ1RfWSkKIAkJcGxhbmVfc3RhdGUtPnJlZmxlY3RfeSA9
IHRydWU7CkBAIC03MDYsNyArNzI5LDggQEAgc3RhdGljIHZvaWQgdGVncmFfcGxhbmVfYXRvbWlj
X3VwZGF0ZShzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwKIAl3aW5kb3cuZHN0LncgPSBkcm1fcmVj
dF93aWR0aCgmcGxhbmUtPnN0YXRlLT5kc3QpOwogCXdpbmRvdy5kc3QuaCA9IGRybV9yZWN0X2hl
aWdodCgmcGxhbmUtPnN0YXRlLT5kc3QpOwogCXdpbmRvdy5iaXRzX3Blcl9waXhlbCA9IGZiLT5m
b3JtYXQtPmNwcFswXSAqIDg7Ci0Jd2luZG93LnJlZmxlY3RfeSA9IHRlZ3JhX2ZiX2lzX2JvdHRv
bV91cChmYikgfHwgc3RhdGUtPnJlZmxlY3RfeTsKKwl3aW5kb3cucmVmbGVjdF94ID0gc3RhdGUt
PnJlZmxlY3RfeDsKKwl3aW5kb3cucmVmbGVjdF95ID0gc3RhdGUtPnJlZmxlY3RfeTsKIAogCS8q
IGNvcHkgZnJvbSBzdGF0ZSAqLwogCXdpbmRvdy56cG9zID0gcGxhbmUtPnN0YXRlLT5ub3JtYWxp
emVkX3pwb3M7CkBAIC03OTIsNiArODE2LDcgQEAgc3RhdGljIHN0cnVjdCBkcm1fcGxhbmUgKnRl
Z3JhX3ByaW1hcnlfcGxhbmVfY3JlYXRlKHN0cnVjdCBkcm1fZGV2aWNlICpkcm0sCiAJZXJyID0g
ZHJtX3BsYW5lX2NyZWF0ZV9yb3RhdGlvbl9wcm9wZXJ0eSgmcGxhbmUtPmJhc2UsCiAJCQkJCQkg
RFJNX01PREVfUk9UQVRFXzAsCiAJCQkJCQkgRFJNX01PREVfUk9UQVRFXzAgfAorCQkJCQkJIERS
TV9NT0RFX1JFRkxFQ1RfWCB8CiAJCQkJCQkgRFJNX01PREVfUkVGTEVDVF9ZKTsKIAlpZiAoZXJy
IDwgMCkKIAkJZGV2X2VycihkYy0+ZGV2LCAiZmFpbGVkIHRvIGNyZWF0ZSByb3RhdGlvbiBwcm9w
ZXJ0eTogJWRcbiIsCkBAIC0xMDgwLDYgKzExMDUsNyBAQCBzdGF0aWMgc3RydWN0IGRybV9wbGFu
ZSAqdGVncmFfZGNfb3ZlcmxheV9wbGFuZV9jcmVhdGUoc3RydWN0IGRybV9kZXZpY2UgKmRybSwK
IAllcnIgPSBkcm1fcGxhbmVfY3JlYXRlX3JvdGF0aW9uX3Byb3BlcnR5KCZwbGFuZS0+YmFzZSwK
IAkJCQkJCSBEUk1fTU9ERV9ST1RBVEVfMCwKIAkJCQkJCSBEUk1fTU9ERV9ST1RBVEVfMCB8CisJ
CQkJCQkgRFJNX01PREVfUkVGTEVDVF9YIHwKIAkJCQkJCSBEUk1fTU9ERV9SRUZMRUNUX1kpOwog
CWlmIChlcnIgPCAwKQogCQlkZXZfZXJyKGRjLT5kZXYsICJmYWlsZWQgdG8gY3JlYXRlIHJvdGF0
aW9uIHByb3BlcnR5OiAlZFxuIiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9k
Yy5oIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2RjLmgKaW5kZXggOThlMWI2MjUxNjhlLi4wNTFk
MDNkY2I5YjAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9kYy5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS90ZWdyYS9kYy5oCkBAIC0xMzYsNiArMTM2LDcgQEAgc3RydWN0IHRlZ3Jh
X2RjX3dpbmRvdyB7CiAJdW5zaWduZWQgaW50IHN0cmlkZVsyXTsKIAl1bnNpZ25lZCBsb25nIGJh
c2VbM107CiAJdW5zaWduZWQgaW50IHpwb3M7CisJYm9vbCByZWZsZWN0X3g7CiAJYm9vbCByZWZs
ZWN0X3k7CiAKIAlzdHJ1Y3QgdGVncmFfYm9fdGlsaW5nIHRpbGluZzsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS90ZWdyYS9wbGFuZS5jIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL3BsYW5l
LmMKaW5kZXggZTA1ZWY2MDEzYTk3Li40Y2QwNDYxY2M1MDggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS90ZWdyYS9wbGFuZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9wbGFuZS5j
CkBAIC02MSw2ICs2MSw3IEBAIHRlZ3JhX3BsYW5lX2F0b21pY19kdXBsaWNhdGVfc3RhdGUoc3Ry
dWN0IGRybV9wbGFuZSAqcGxhbmUpCiAJY29weS0+dGlsaW5nID0gc3RhdGUtPnRpbGluZzsKIAlj
b3B5LT5mb3JtYXQgPSBzdGF0ZS0+Zm9ybWF0OwogCWNvcHktPnN3YXAgPSBzdGF0ZS0+c3dhcDsK
Kwljb3B5LT5yZWZsZWN0X3ggPSBzdGF0ZS0+cmVmbGVjdF94OwogCWNvcHktPnJlZmxlY3RfeSA9
IHN0YXRlLT5yZWZsZWN0X3k7CiAJY29weS0+b3BhcXVlID0gc3RhdGUtPm9wYXF1ZTsKIApkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL3BsYW5lLmggYi9kcml2ZXJzL2dwdS9kcm0v
dGVncmEvcGxhbmUuaAppbmRleCA4MDQ3ZmM5MTZkOGMuLmM2OTFkZDc5YjI3YiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL3BsYW5lLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL3Rl
Z3JhL3BsYW5lLmgKQEAgLTQ2LDYgKzQ2LDcgQEAgc3RydWN0IHRlZ3JhX3BsYW5lX3N0YXRlIHsK
IAl1MzIgZm9ybWF0OwogCXUzMiBzd2FwOwogCisJYm9vbCByZWZsZWN0X3g7CiAJYm9vbCByZWZs
ZWN0X3k7CiAKIAkvKiB1c2VkIGZvciBsZWdhY3kgYmxlbmRpbmcgc3VwcG9ydCBvbmx5ICovCi0t
IAoyLjI2LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
