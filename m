Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7A3C72A0788
	for <lists+dri-devel@lfdr.de>; Fri, 30 Oct 2020 15:11:38 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D074E6E9AA;
	Fri, 30 Oct 2020 14:11:33 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ej1-x642.google.com (mail-ej1-x642.google.com
 [IPv6:2a00:1450:4864:20::642])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1FB276E9AA
 for <dri-devel@lists.freedesktop.org>; Fri, 30 Oct 2020 14:11:33 +0000 (UTC)
Received: by mail-ej1-x642.google.com with SMTP id dk16so8225505ejb.12
 for <dri-devel@lists.freedesktop.org>; Fri, 30 Oct 2020 07:11:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=chromium.org; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=fGLh8FE7n+kGnPiOSCfCu+B491Brb7ePqBRZY6cItBg=;
 b=LH6iU5G+qAZ4T7sqXNGE44q/WiF+g2smHT8tK2NZZq846wCXnKZVs/i0NAbqwfc9xk
 21Yj3MNkwi0ukryfrHB9hVgWhM+cdTTWfsDLp+g3D7Iig02N7iwYOeg6SfA5q4dylm2H
 zlOSbk28N2b27zmw/TwjqgMUPI5sLxmAXsXzk=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=fGLh8FE7n+kGnPiOSCfCu+B491Brb7ePqBRZY6cItBg=;
 b=UkBDVpyS9bP2LhZPAyT2/+P48ElA860tc/eCzIaGpVcn+zVmXtesVLLYK7kTH8x9Cr
 f4gVD2idR9+CAdxLXYq6EWZm66y83HgwD0bWJKuKOImgGyuVi/YkU6565YhGx+i2yp9z
 CaCfWJzYudj7XI92lDerFar/ROqMhNY/AILWuRGS/fc0f/rx99p+vO9oC/Z6csw2G7sd
 xhJtkCbr4omJF1Ue/jHLIX/4oA/xhukTS60nEnamxURwXkSE0djcDl3V8c+HWTpZO9je
 cpDLsEy2AQzEZLLbo3HqLVzQczVuCo8dXO6IJqtc4ZuxCpaKaizmGA6EWSMZwhNiu3ts
 Gm1Q==
X-Gm-Message-State: AOAM533sYAusKiIxTCtAT24geFgvamaWMzoZqJNuWqeHFDs4//y3ZuKd
 kiY8+nOBJy3LtnMHFlBUtA4sbsgW64793A==
X-Google-Smtp-Source: ABdhPJzxyv41SJ3ydeG1XDiH8zZ5B6u6l3luAaOb0bG2CwLhDB15SE9EVvzTeFAKxbaRrFAGNlvP+g==
X-Received: by 2002:a17:906:84a:: with SMTP id
 f10mr2607122ejd.93.1604067091411; 
 Fri, 30 Oct 2020 07:11:31 -0700 (PDT)
Received: from mail-wr1-f48.google.com (mail-wr1-f48.google.com.
 [209.85.221.48])
 by smtp.gmail.com with ESMTPSA id j3sm3207993edh.25.2020.10.30.07.11.25
 for <dri-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Fri, 30 Oct 2020 07:11:26 -0700 (PDT)
Received: by mail-wr1-f48.google.com with SMTP id s9so6607689wro.8
 for <dri-devel@lists.freedesktop.org>; Fri, 30 Oct 2020 07:11:25 -0700 (PDT)
X-Received: by 2002:adf:e892:: with SMTP id d18mr3615109wrm.103.1604067085454; 
 Fri, 30 Oct 2020 07:11:25 -0700 (PDT)
MIME-Version: 1.0
References: <20201030100815.2269-1-daniel.vetter@ffwll.ch>
 <20201030100815.2269-6-daniel.vetter@ffwll.ch>
In-Reply-To: <20201030100815.2269-6-daniel.vetter@ffwll.ch>
From: Tomasz Figa <tfiga@chromium.org>
Date: Fri, 30 Oct 2020 15:11:14 +0100
X-Gmail-Original-Message-ID: <CAAFQd5ANOAzVf+tC1iYKXeY0ALahtYrG7xtKHXHmvv1xh7si3g@mail.gmail.com>
Message-ID: <CAAFQd5ANOAzVf+tC1iYKXeY0ALahtYrG7xtKHXHmvv1xh7si3g@mail.gmail.com>
Subject: Re: [PATCH v5 05/15] mm/frame-vector: Use FOLL_LONGTERM
To: Daniel Vetter <daniel.vetter@ffwll.ch>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?B?SsOpcsO0bWUgR2xpc3Nl?= <jglisse@redhat.com>,
 linux-samsung-soc <linux-samsung-soc@vger.kernel.org>, Jan Kara <jack@suse.cz>,
 Pawel Osciak <pawel@osciak.com>, kvm <kvm@vger.kernel.org>,
 Jason Gunthorpe <jgg@ziepe.ca>, John Hubbard <jhubbard@nvidia.com>,
 Mauro Carvalho Chehab <mchehab@kernel.org>,
 LKML <linux-kernel@vger.kernel.org>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 Linux MM <linux-mm@kvack.org>, Kyungmin Park <kyungmin.park@samsung.com>,
 Daniel Vetter <daniel.vetter@intel.com>,
 Andrew Morton <akpm@linux-foundation.org>,
 Marek Szyprowski <m.szyprowski@samsung.com>,
 Dan Williams <dan.j.williams@intel.com>,
 "list@263.net:IOMMU DRIVERS <iommu@lists.linux-foundation.org>,
 Joerg Roedel <joro@8bytes.org>, " <linux-arm-kernel@lists.infradead.org>,
 Linux Media Mailing List <linux-media@vger.kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBPY3QgMzAsIDIwMjAgYXQgMTE6MDggQU0gRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZl
dHRlckBmZndsbC5jaD4gd3JvdGU6Cj4KPiBUaGlzIGlzIHVzZWQgYnkgbWVkaWEvdmlkZWJ1ZjIg
Zm9yIHBlcnNpc3RlbnQgZG1hIG1hcHBpbmdzLCBub3QganVzdAo+IGZvciBhIHNpbmdsZSBkbWEg
b3BlcmF0aW9uIGFuZCB0aGVuIGZyZWVkIGFnYWluLCBzbyBuZWVkcwo+IEZPTExfTE9OR1RFUk0u
Cj4KPiBVbmZvcnR1bmF0ZWx5IGN1cnJlbnQgcHVwX2xvY2tlZCBkb2Vzbid0IHN1cHBvcnQgRk9M
TF9MT05HVEVSTSBkdWUgdG8KPiBsb2NraW5nIGlzc3Vlcy4gUmV3b3JrIHRoZSBjb2RlIHRvIHB1
bGwgdGhlIHB1cCBwYXRoIG91dCBmcm9tIHRoZQo+IG1tYXBfc2VtIGNyaXRpY2FsIHNlY3Rpb24g
YXMgc3VnZ2VzdGVkIGJ5IEphc29uLgo+Cj4gQnkgcmVseWluZyBlbnRpcmVseSBvbiB0aGUgdm1h
IGNoZWNrcyBpbiBwaW5fdXNlcl9wYWdlcyBhbmQgZm9sbG93X3Bmbgo+IChmb3Igdm1fZmxhZ3Mg
YW5kIHZtYV9pc19mc2RheCkgd2UgY2FuIGFsc28gc3RyZWFtbGluZSB0aGUgY29kZSBhIGxvdC4K
Pgo+IFNpZ25lZC1vZmYtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAaW50ZWwuY29t
Pgo+IENjOiBKYXNvbiBHdW50aG9ycGUgPGpnZ0B6aWVwZS5jYT4KPiBDYzogUGF3ZWwgT3NjaWFr
IDxwYXdlbEBvc2NpYWsuY29tPgo+IENjOiBNYXJlayBTenlwcm93c2tpIDxtLnN6eXByb3dza2lA
c2Ftc3VuZy5jb20+Cj4gQ2M6IEt5dW5nbWluIFBhcmsgPGt5dW5nbWluLnBhcmtAc2Ftc3VuZy5j
b20+Cj4gQ2M6IFRvbWFzeiBGaWdhIDx0ZmlnYUBjaHJvbWl1bS5vcmc+Cj4gQ2M6IE1hdXJvIENh
cnZhbGhvIENoZWhhYiA8bWNoZWhhYkBrZXJuZWwub3JnPgo+IENjOiBBbmRyZXcgTW9ydG9uIDxh
a3BtQGxpbnV4LWZvdW5kYXRpb24ub3JnPgo+IENjOiBKb2huIEh1YmJhcmQgPGpodWJiYXJkQG52
aWRpYS5jb20+Cj4gQ2M6IErDqXLDtG1lIEdsaXNzZSA8amdsaXNzZUByZWRoYXQuY29tPgo+IENj
OiBKYW4gS2FyYSA8amFja0BzdXNlLmN6Pgo+IENjOiBEYW4gV2lsbGlhbXMgPGRhbi5qLndpbGxp
YW1zQGludGVsLmNvbT4KPiBDYzogbGludXgtbW1Aa3ZhY2sub3JnCj4gQ2M6IGxpbnV4LWFybS1r
ZXJuZWxAbGlzdHMuaW5mcmFkZWFkLm9yZwo+IENjOiBsaW51eC1zYW1zdW5nLXNvY0B2Z2VyLmtl
cm5lbC5vcmcKPiBDYzogbGludXgtbWVkaWFAdmdlci5rZXJuZWwub3JnCj4gU2lnbmVkLW9mZi1i
eTogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBmZndsbC5jaD4KPiAtLQo+IHYyOiBTdHJl
YW1saW5lIHRoZSBjb2RlIGFuZCBmdXJ0aGVyIHNpbXBsaWZ5IHRoZSBsb29wIGNoZWNrcyAoSmFz
b24pCj4KPiB2NTogUmV2aWV3IGZyb20gVG9tYXN6Ogo+IC0gZml4IHBhZ2UgY291bnRpbmcgZm9y
IHRoZSBmb2xsb3dfcGZuIGNhc2UgYnkgcmVzZXR0aW5nIHJldAo+IC0gZHJvcCBndXBfZmxhZ3Mg
cGFyYW1hdGVyLCBub3cgdW51c2VkCj4gLS0tCj4gIC4uLi9tZWRpYS9jb21tb24vdmlkZW9idWYy
L3ZpZGVvYnVmMi1tZW1vcHMuYyB8ICAzICstCj4gIGluY2x1ZGUvbGludXgvbW0uaCAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB8ICAyICstCj4gIG1tL2ZyYW1lX3ZlY3Rvci5jICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB8IDUzICsrKysrKy0tLS0tLS0tLS0tLS0KPiAgMyBmaWxlcyBj
aGFuZ2VkLCAxOSBpbnNlcnRpb25zKCspLCAzOSBkZWxldGlvbnMoLSkKPgoKVGhhbmtzLCBsb29r
cyBnb29kIHRvIG1lIG5vdy4KCkFja2VkLWJ5OiBUb21hc3ogRmlnYSA8dGZpZ2FAY2hyb21pdW0u
b3JnPgoKRnJvbSByZWFkaW5nIHRoZSBjb2RlLCB0aGlzIGlzIHF1aXRlIHVubGlrZWx5IHRvIGlu
dHJvZHVjZSBhbnkKYmVoYXZpb3IgY2hhbmdlcywgYnV0IGp1c3QgdG8gYmUgc2FmZSwgZGlkIHlv
dSBoYXZlIGEgY2hhbmNlIHRvIHRlc3QKdGhpcyB3aXRoIHNvbWUgVjRMMiBkcml2ZXI/CgpCZXN0
IHJlZ2FyZHMsClRvbWFzegoKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZWRpYS9jb21tb24vdmlk
ZW9idWYyL3ZpZGVvYnVmMi1tZW1vcHMuYyBiL2RyaXZlcnMvbWVkaWEvY29tbW9uL3ZpZGVvYnVm
Mi92aWRlb2J1ZjItbWVtb3BzLmMKPiBpbmRleCA2ZTllMDUxNTNmNGUuLjlkZDZjMjcxNjJmNCAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL21lZGlhL2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLW1l
bW9wcy5jCj4gKysrIGIvZHJpdmVycy9tZWRpYS9jb21tb24vdmlkZW9idWYyL3ZpZGVvYnVmMi1t
ZW1vcHMuYwo+IEBAIC00MCw3ICs0MCw2IEBAIHN0cnVjdCBmcmFtZV92ZWN0b3IgKnZiMl9jcmVh
dGVfZnJhbWV2ZWModW5zaWduZWQgbG9uZyBzdGFydCwKPiAgICAgICAgIHVuc2lnbmVkIGxvbmcg
Zmlyc3QsIGxhc3Q7Cj4gICAgICAgICB1bnNpZ25lZCBsb25nIG5yOwo+ICAgICAgICAgc3RydWN0
IGZyYW1lX3ZlY3RvciAqdmVjOwo+IC0gICAgICAgdW5zaWduZWQgaW50IGZsYWdzID0gRk9MTF9G
T1JDRSB8IEZPTExfV1JJVEU7Cj4KPiAgICAgICAgIGZpcnN0ID0gc3RhcnQgPj4gUEFHRV9TSElG
VDsKPiAgICAgICAgIGxhc3QgPSAoc3RhcnQgKyBsZW5ndGggLSAxKSA+PiBQQUdFX1NISUZUOwo+
IEBAIC00OCw3ICs0Nyw3IEBAIHN0cnVjdCBmcmFtZV92ZWN0b3IgKnZiMl9jcmVhdGVfZnJhbWV2
ZWModW5zaWduZWQgbG9uZyBzdGFydCwKPiAgICAgICAgIHZlYyA9IGZyYW1lX3ZlY3Rvcl9jcmVh
dGUobnIpOwo+ICAgICAgICAgaWYgKCF2ZWMpCj4gICAgICAgICAgICAgICAgIHJldHVybiBFUlJf
UFRSKC1FTk9NRU0pOwo+IC0gICAgICAgcmV0ID0gZ2V0X3ZhZGRyX2ZyYW1lcyhzdGFydCAmIFBB
R0VfTUFTSywgbnIsIGZsYWdzLCB2ZWMpOwo+ICsgICAgICAgcmV0ID0gZ2V0X3ZhZGRyX2ZyYW1l
cyhzdGFydCAmIFBBR0VfTUFTSywgbnIsIHZlYyk7Cj4gICAgICAgICBpZiAocmV0IDwgMCkKPiAg
ICAgICAgICAgICAgICAgZ290byBvdXRfZGVzdHJveTsKPiAgICAgICAgIC8qIFdlIGFjY2VwdCBv
bmx5IGNvbXBsZXRlIHNldCBvZiBQRk5zICovCj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgv
bW0uaCBiL2luY2x1ZGUvbGludXgvbW0uaAo+IGluZGV4IGVmMzYwZmU3MGFhZi4uZDZiOGUzMGRj
ZTJlIDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvbGludXgvbW0uaAo+ICsrKyBiL2luY2x1ZGUvbGlu
dXgvbW0uaAo+IEBAIC0xNzY1LDcgKzE3NjUsNyBAQCBzdHJ1Y3QgZnJhbWVfdmVjdG9yIHsKPiAg
c3RydWN0IGZyYW1lX3ZlY3RvciAqZnJhbWVfdmVjdG9yX2NyZWF0ZSh1bnNpZ25lZCBpbnQgbnJf
ZnJhbWVzKTsKPiAgdm9pZCBmcmFtZV92ZWN0b3JfZGVzdHJveShzdHJ1Y3QgZnJhbWVfdmVjdG9y
ICp2ZWMpOwo+ICBpbnQgZ2V0X3ZhZGRyX2ZyYW1lcyh1bnNpZ25lZCBsb25nIHN0YXJ0LCB1bnNp
Z25lZCBpbnQgbnJfcGZucywKPiAtICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgZ3Vw
X2ZsYWdzLCBzdHJ1Y3QgZnJhbWVfdmVjdG9yICp2ZWMpOwo+ICsgICAgICAgICAgICAgICAgICAg
IHN0cnVjdCBmcmFtZV92ZWN0b3IgKnZlYyk7Cj4gIHZvaWQgcHV0X3ZhZGRyX2ZyYW1lcyhzdHJ1
Y3QgZnJhbWVfdmVjdG9yICp2ZWMpOwo+ICBpbnQgZnJhbWVfdmVjdG9yX3RvX3BhZ2VzKHN0cnVj
dCBmcmFtZV92ZWN0b3IgKnZlYyk7Cj4gIHZvaWQgZnJhbWVfdmVjdG9yX3RvX3BmbnMoc3RydWN0
IGZyYW1lX3ZlY3RvciAqdmVjKTsKPiBkaWZmIC0tZ2l0IGEvbW0vZnJhbWVfdmVjdG9yLmMgYi9t
bS9mcmFtZV92ZWN0b3IuYwo+IGluZGV4IDEwZjgyZDU2NDNiNi4uZjhjMzRiODk1Yzc2IDEwMDY0
NAo+IC0tLSBhL21tL2ZyYW1lX3ZlY3Rvci5jCj4gKysrIGIvbW0vZnJhbWVfdmVjdG9yLmMKPiBA
QCAtMzIsMTMgKzMyLDEyIEBACj4gICAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgY2FyZSBvZiBncmFi
YmluZyBtbWFwX2xvY2sgYXMgbmVjZXNzYXJ5Lgo+ICAgKi8KPiAgaW50IGdldF92YWRkcl9mcmFt
ZXModW5zaWduZWQgbG9uZyBzdGFydCwgdW5zaWduZWQgaW50IG5yX2ZyYW1lcywKPiAtICAgICAg
ICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgZ3VwX2ZsYWdzLCBzdHJ1Y3QgZnJhbWVfdmVjdG9y
ICp2ZWMpCj4gKyAgICAgICAgICAgICAgICAgICAgc3RydWN0IGZyYW1lX3ZlY3RvciAqdmVjKQo+
ICB7Cj4gICAgICAgICBzdHJ1Y3QgbW1fc3RydWN0ICptbSA9IGN1cnJlbnQtPm1tOwo+ICAgICAg
ICAgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWE7Cj4gICAgICAgICBpbnQgcmV0ID0gMDsKPiAg
ICAgICAgIGludCBlcnI7Cj4gLSAgICAgICBpbnQgbG9ja2VkOwo+Cj4gICAgICAgICBpZiAobnJf
ZnJhbWVzID09IDApCj4gICAgICAgICAgICAgICAgIHJldHVybiAwOwo+IEBAIC00OCw0MCArNDcs
MjYgQEAgaW50IGdldF92YWRkcl9mcmFtZXModW5zaWduZWQgbG9uZyBzdGFydCwgdW5zaWduZWQg
aW50IG5yX2ZyYW1lcywKPgo+ICAgICAgICAgc3RhcnQgPSB1bnRhZ2dlZF9hZGRyKHN0YXJ0KTsK
Pgo+IC0gICAgICAgbW1hcF9yZWFkX2xvY2sobW0pOwo+IC0gICAgICAgbG9ja2VkID0gMTsKPiAt
ICAgICAgIHZtYSA9IGZpbmRfdm1hX2ludGVyc2VjdGlvbihtbSwgc3RhcnQsIHN0YXJ0ICsgMSk7
Cj4gLSAgICAgICBpZiAoIXZtYSkgewo+IC0gICAgICAgICAgICAgICByZXQgPSAtRUZBVUxUOwo+
IC0gICAgICAgICAgICAgICBnb3RvIG91dDsKPiAtICAgICAgIH0KPiAtCj4gLSAgICAgICAvKgo+
IC0gICAgICAgICogV2hpbGUgZ2V0X3ZhZGRyX2ZyYW1lcygpIGNvdWxkIGJlIHVzZWQgZm9yIHRy
YW5zaWVudCAoa2VybmVsCj4gLSAgICAgICAgKiBjb250cm9sbGVkIGxpZmV0aW1lKSBwaW5uaW5n
IG9mIG1lbW9yeSBwYWdlcyBhbGwgY3VycmVudAo+IC0gICAgICAgICogdXNlcnMgZXN0YWJsaXNo
IGxvbmcgdGVybSAodXNlcnNwYWNlIGNvbnRyb2xsZWQgbGlmZXRpbWUpCj4gLSAgICAgICAgKiBw
YWdlIHBpbm5pbmcuIFRyZWF0IGdldF92YWRkcl9mcmFtZXMoKSBsaWtlCj4gLSAgICAgICAgKiBn
ZXRfdXNlcl9wYWdlc19sb25ndGVybSgpIGFuZCBkaXNhbGxvdyBpdCBmb3IgZmlsZXN5c3RlbS1k
YXgKPiAtICAgICAgICAqIG1hcHBpbmdzLgo+IC0gICAgICAgICovCj4gLSAgICAgICBpZiAodm1h
X2lzX2ZzZGF4KHZtYSkpIHsKPiAtICAgICAgICAgICAgICAgcmV0ID0gLUVPUE5PVFNVUFA7Cj4g
LSAgICAgICAgICAgICAgIGdvdG8gb3V0Owo+IC0gICAgICAgfQo+IC0KPiAtICAgICAgIGlmICgh
KHZtYS0+dm1fZmxhZ3MgJiAoVk1fSU8gfCBWTV9QRk5NQVApKSkgewo+ICsgICAgICAgcmV0ID0g
cGluX3VzZXJfcGFnZXNfZmFzdChzdGFydCwgbnJfZnJhbWVzLAo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBGT0xMX0ZPUkNFIHwgRk9MTF9XUklURSB8IEZPTExfTE9OR1RFUk0s
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdHJ1Y3QgcGFnZSAqKikodmVj
LT5wdHJzKSk7Cj4gKyAgICAgICBpZiAocmV0ID4gMCkgewo+ICAgICAgICAgICAgICAgICB2ZWMt
PmdvdF9yZWYgPSB0cnVlOwo+ICAgICAgICAgICAgICAgICB2ZWMtPmlzX3BmbnMgPSBmYWxzZTsK
PiAtICAgICAgICAgICAgICAgcmV0ID0gcGluX3VzZXJfcGFnZXNfbG9ja2VkKHN0YXJ0LCBucl9m
cmFtZXMsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgZ3VwX2ZsYWdzLCAoc3RydWN0IHBhZ2Ug
KiopKHZlYy0+cHRycyksICZsb2NrZWQpOwo+IC0gICAgICAgICAgICAgICBnb3RvIG91dDsKPiAr
ICAgICAgICAgICAgICAgZ290byBvdXRfdW5sb2NrZWQ7Cj4gICAgICAgICB9Cj4KPiArICAgICAg
IG1tYXBfcmVhZF9sb2NrKG1tKTsKPiAgICAgICAgIHZlYy0+Z290X3JlZiA9IGZhbHNlOwo+ICAg
ICAgICAgdmVjLT5pc19wZm5zID0gdHJ1ZTsKPiArICAgICAgIHJldCA9IDA7Cj4gICAgICAgICBk
byB7Cj4gICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgKm51bXMgPSBmcmFtZV92ZWN0b3Jf
cGZucyh2ZWMpOwo+Cj4gKyAgICAgICAgICAgICAgIHZtYSA9IGZpbmRfdm1hX2ludGVyc2VjdGlv
bihtbSwgc3RhcnQsIHN0YXJ0ICsgMSk7Cj4gKyAgICAgICAgICAgICAgIGlmICghdm1hKQo+ICsg
ICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsKPiAgICAgICAgICAgICAgICAgd2hpbGUg
KHJldCA8IG5yX2ZyYW1lcyAmJiBzdGFydCArIFBBR0VfU0laRSA8PSB2bWEtPnZtX2VuZCkgewo+
ICAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IGZvbGxvd19wZm4odm1hLCBzdGFydCwgJm51
bXNbcmV0XSk7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgewo+IEBAIC05Miwx
NyArNzcsMTMgQEAgaW50IGdldF92YWRkcl9mcmFtZXModW5zaWduZWQgbG9uZyBzdGFydCwgdW5z
aWduZWQgaW50IG5yX2ZyYW1lcywKPiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydCArPSBQ
QUdFX1NJWkU7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgcmV0Kys7Cj4gICAgICAgICAgICAg
ICAgIH0KPiAtICAgICAgICAgICAgICAgLyoKPiAtICAgICAgICAgICAgICAgICogV2Ugc3RvcCBp
ZiB3ZSBoYXZlIGVub3VnaCBwYWdlcyBvciBpZiBWTUEgZG9lc24ndCBjb21wbGV0ZWx5Cj4gLSAg
ICAgICAgICAgICAgICAqIGNvdmVyIHRoZSB0YWlsIHBhZ2UuCj4gLSAgICAgICAgICAgICAgICAq
Lwo+IC0gICAgICAgICAgICAgICBpZiAocmV0ID49IG5yX2ZyYW1lcyB8fCBzdGFydCA8IHZtYS0+
dm1fZW5kKQo+ICsgICAgICAgICAgICAgICAvKiBCYWlsIG91dCBpZiBWTUEgZG9lc24ndCBjb21w
bGV0ZWx5IGNvdmVyIHRoZSB0YWlsIHBhZ2UuICovCj4gKyAgICAgICAgICAgICAgIGlmIChzdGFy
dCA8IHZtYS0+dm1fZW5kKQo+ICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+IC0gICAg
ICAgICAgICAgICB2bWEgPSBmaW5kX3ZtYV9pbnRlcnNlY3Rpb24obW0sIHN0YXJ0LCBzdGFydCAr
IDEpOwo+IC0gICAgICAgfSB3aGlsZSAodm1hICYmIHZtYS0+dm1fZmxhZ3MgJiAoVk1fSU8gfCBW
TV9QRk5NQVApKTsKPiArICAgICAgIH0gd2hpbGUgKHJldCA8IG5yX2ZyYW1lcyk7Cj4gIG91dDoK
PiAtICAgICAgIGlmIChsb2NrZWQpCj4gLSAgICAgICAgICAgICAgIG1tYXBfcmVhZF91bmxvY2so
bW0pOwo+ICsgICAgICAgbW1hcF9yZWFkX3VubG9jayhtbSk7Cj4gK291dF91bmxvY2tlZDoKPiAg
ICAgICAgIGlmICghcmV0KQo+ICAgICAgICAgICAgICAgICByZXQgPSAtRUZBVUxUOwo+ICAgICAg
ICAgaWYgKHJldCA+IDApCj4gLS0KPiAyLjI4LjAKPgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9kcmktZGV2ZWwK
