Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6E30733FB8
	for <lists+dri-devel@lfdr.de>; Tue,  4 Jun 2019 09:15:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D1A168968D;
	Tue,  4 Jun 2019 07:14:35 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from crapouillou.net (outils.crapouillou.net [89.234.176.41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A8B2E89189
 for <dri-devel@lists.freedesktop.org>; Mon,  3 Jun 2019 15:26:26 +0000 (UTC)
From: Paul Cercueil <paul@crapouillou.net>
To: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>
Subject: [PATCH v2 2/2] drm/panel: Add Novatek NT39016 panel support
Date: Mon,  3 Jun 2019 17:25:55 +0200
Message-Id: <20190603152555.23527-2-paul@crapouillou.net>
In-Reply-To: <20190603152555.23527-1-paul@crapouillou.net>
References: <20190603152555.23527-1-paul@crapouillou.net>
MIME-Version: 1.0
X-Mailman-Approved-At: Tue, 04 Jun 2019 07:14:23 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=crapouillou.net; 
 s=mail; t=1559575584; h=from:from:sender:reply-to:subject:subject:date:date:
 message-id:message-id:to:to:cc:cc:mime-version:mime-version:
 content-type:content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=1xY7+XI8Hj0+1PI1pTdJqblUd7r6bzlrxvLvMUUhZCM=;
 b=ygoDCOnRohP8PcqKU3PvKVw2QXT5RlQ2/Vok8Hm3Z6B1lz3wxj0C4x+Qc3Fu4KxHENcpbP
 +HFJIhVm+cltZowOCG4e8Am1Y9TijajjruK+HZugffAR3u02csI3RE8dVhxY6jaIMrmViR
 Q4NMPyPMHVruCtY+vRDU8SrPDkjfJJU=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, Paul Cercueil <paul@crapouillou.net>,
 od@zcrc.me, Maarten ter Huurne <maarten@treewalker.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIHN1cHBvcnQgZm9yIGRpc3BsYXkgcGFuZWxzIGJ1aWx0IGFyb3VuZCB0aGUgTm92YXRlayBO
VDM5MDE2IGRpc3BsYXkKY29udHJvbGxlciwgYXMgZm91bmQgb24gZS5nLiB0aGUgS2luZyBEaXNw
bGF5IEtEMDM1RzYtNTROVCAyNC1iaXQKMzIweDI0MCAzLjUiIExDRCBwYW5lbCB3aGljaCBlcXVp
cHMgdGhlIEdDVyBaZXJvIG9wZW4tc291cmNlIGhhbmRoZWxkCmdhbWluZyBjb25zb2xlLgoKU2ln
bmVkLW9mZi1ieTogUGF1bCBDZXJjdWVpbCA8cGF1bEBjcmFwb3VpbGxvdS5uZXQ+ClNpZ25lZC1v
ZmYtYnk6IE1hYXJ0ZW4gdGVyIEh1dXJuZSA8bWFhcnRlbkB0cmVld2Fsa2VyLm9yZz4KLS0tCgpO
b3RlczoKICAgIHYyOiAtIERvbid0IGNsZWFudXAgYmFja2xpZ2h0LCBhcyB3ZSB1c2UgZGV2bSBm
dW5jdGlvbiB0byBjcmVhdGUgaXQKICAgICAgICAtIFVzZSBiYWNrbGlnaHRfZW5hYmxlIC8gYmFj
a2xpZ2h0X2Rpc2FibGUKICAgIAktIFJlb3JkZXIgaW5jbHVkZXMKICAgIAktIFVzZSAlZCBpbnN0
ZWFkIG9mICVpIHRvIG1hdGNoIG90aGVyIHBhbmVsIGRyaXZlcnMKICAgIAktIEJpdCAyIG9mIE5U
MzkwMTZfUkVHX1NZU1RFTSByZWdpc3RlciBpcyAncmVzZXJ2ZWQnIGFuZCBzZXR0aW5nCiAgICAJ
ICBpdCBkb2Vzbid0IHNlZW0gdG8gaGF2ZSBhbnkgZWZmZWN0LCBzbyB3ZSBkb24ndCBzZXQgaXQg
YW55bW9yZQogICAgCS0gVXNlIG1hY3JvcyBmb3IgYml0cyAwIGFuZCAxIG9mIE5UMzkwMTZfUkVH
X1NZU1RFTQogICAgCS0gQXZvaWQgMTUwbXMgc2xlZXAgaW4gbnQzOTAxNl9lbmFibGUoKSBpZiB0
aGVyZSBpcyBubyBiYWNrbGlnaHQKICAgIAkgIGRldmljZQogICAgCS0gSW5jbHVkZSA8bGludXgv
bWVkaWEtYnVzLWZvcm1hdC5oPiBpbnN0ZWFkIG9mCiAgICAJICA8dWFwaS9saW51eC9tZWRpYS1i
dXMtZm9ybWF0Lmg+CiAgICAJLSB1c2UgLyogc2VudGluZWwgKi8gaW4gdGhlIGxhc3QgZW50cnkg
b2YgdGhlIG9mX2RldmljZV9pZCB0YWJsZQoKIGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmln
ICAgICAgICAgICAgICAgICB8ICAgOSArCiBkcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUg
ICAgICAgICAgICAgICAgfCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLW5vdmF0
ZWstbnQzOTAxNi5jIHwgMzU5ICsrKysrKysrKysrKysrKysrKwogMyBmaWxlcyBjaGFuZ2VkLCAz
NjkgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9wYW5l
bC9wYW5lbC1ub3ZhdGVrLW50MzkwMTYuYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9w
YW5lbC9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcKaW5kZXggZDlkOTMx
YWE2ZTI2Li4xNzk1OTg3NjYyMWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9L
Y29uZmlnCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnCkBAIC0xMTEsNiArMTEx
LDE1IEBAIGNvbmZpZyBEUk1fUEFORUxfTEdfTEc0NTczCiAJICBTYXkgWSBoZXJlIGlmIHlvdSB3
YW50IHRvIGVuYWJsZSBzdXBwb3J0IGZvciBMRzQ1NzMgUkdCIHBhbmVsLgogCSAgVG8gY29tcGls
ZSB0aGlzIGRyaXZlciBhcyBhIG1vZHVsZSwgY2hvb3NlIE0gaGVyZS4KIAorY29uZmlnIERSTV9Q
QU5FTF9OT1ZBVEVLX05UMzkwMTYKKwl0cmlzdGF0ZSAiTm92YXRlayBOVDM5MDE2IFJHQi9TUEkg
cGFuZWwiCisJZGVwZW5kcyBvbiBPRiAmJiBTUEkKKwlkZXBlbmRzIG9uIEJBQ0tMSUdIVF9DTEFT
U19ERVZJQ0UKKwlzZWxlY3QgUkVHTUFQX1NQSQorCWhlbHAKKwkgIFNheSBZIGhlcmUgaWYgeW91
IHdhbnQgdG8gZW5hYmxlIHN1cHBvcnQgZm9yIHRoZSBwYW5lbHMgYnVpbHQKKwkgIGFyb3VuZCB0
aGUgTm92YXRlayBOVDM5MDE2IGRpc3BsYXkgY29udHJvbGxlci4KKwogY29uZmlnIERSTV9QQU5F
TF9PTElNRVhfTENEX09MSU5VWElOTwogCXRyaXN0YXRlICJPbGltZXggTENELU9MaW51WGlubyBw
YW5lbCIKIAlkZXBlbmRzIG9uIE9GCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwv
TWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKaW5kZXggZmIwY2IzYWFh
OWU2Li5mODcwOWQyODBkNjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtl
ZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKQEAgLTksNiArOSw3IEBA
IG9iai0kKENPTkZJR19EUk1fUEFORUxfSU5OT0xVWF9QMDc5WkNBKSArPSBwYW5lbC1pbm5vbHV4
LXAwNzl6Y2Eubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9KRElfTFQwNzBNRTA1MDAwKSArPSBw
YW5lbC1qZGktbHQwNzBtZTA1MDAwLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfS0lOR0RJU1BM
QVlfS0QwOTdEMDQpICs9IHBhbmVsLWtpbmdkaXNwbGF5LWtkMDk3ZDA0Lm8KIG9iai0kKENPTkZJ
R19EUk1fUEFORUxfTEdfTEc0NTczKSArPSBwYW5lbC1sZy1sZzQ1NzMubworb2JqLSQoQ09ORklH
X0RSTV9QQU5FTF9OT1ZBVEVLX05UMzkwMTYpICs9IHBhbmVsLW5vdmF0ZWstbnQzOTAxNi5vCiBv
YmotJChDT05GSUdfRFJNX1BBTkVMX09MSU1FWF9MQ0RfT0xJTlVYSU5PKSArPSBwYW5lbC1vbGlt
ZXgtbGNkLW9saW51eGluby5vCiBvYmotJChDT05GSUdfRFJNX1BBTkVMX09SSVNFVEVDSF9PVE04
MDA5QSkgKz0gcGFuZWwtb3Jpc2V0ZWNoLW90bTgwMDlhLm8KIG9iai0kKENPTkZJR19EUk1fUEFO
RUxfT1NEX09TRDEwMVQyNTg3XzUzVFMpICs9IHBhbmVsLW9zZC1vc2QxMDF0MjU4Ny01M3RzLm8K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1ub3ZhdGVrLW50MzkwMTYu
YyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1ub3ZhdGVrLW50MzkwMTYuYwpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjRhMWMxNzJiNTdjMwotLS0gL2Rldi9u
dWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1ub3ZhdGVrLW50MzkwMTYuYwpA
QCAtMCwwICsxLDM1OSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKKy8q
CisgKiBOb3ZhdGVrIE5UMzkwMTYgVEZUIExDRCBwYW5lbCBkcml2ZXIKKyAqCisgKiBDb3B5cmln
aHQgKEMpIDIwMTcsIE1hYXJ0ZW4gdGVyIEh1dXJuZSA8bWFhcnRlbkB0cmVld2Fsa2VyLm9yZz4K
KyAqIENvcHlyaWdodCAoQykgMjAxOSwgUGF1bCBDZXJjdWVpbCA8cGF1bEBjcmFwb3VpbGxvdS5u
ZXQ+CisgKi8KKworI2luY2x1ZGUgPGxpbnV4L2JhY2tsaWdodC5oPgorI2luY2x1ZGUgPGxpbnV4
L2RlbGF5Lmg+CisjaW5jbHVkZSA8bGludXgvZGV2aWNlLmg+CisjaW5jbHVkZSA8bGludXgvZ3Bp
by9jb25zdW1lci5oPgorI2luY2x1ZGUgPGxpbnV4L21lZGlhLWJ1cy1mb3JtYXQuaD4KKyNpbmNs
dWRlIDxsaW51eC9tb2R1bGUuaD4KKyNpbmNsdWRlIDxsaW51eC9vZi5oPgorI2luY2x1ZGUgPGxp
bnV4L29mX2RldmljZS5oPgorI2luY2x1ZGUgPGxpbnV4L3JlZ21hcC5oPgorI2luY2x1ZGUgPGxp
bnV4L3JlZ3VsYXRvci9jb25zdW1lci5oPgorI2luY2x1ZGUgPGxpbnV4L3NwaS9zcGkuaD4KKwor
I2luY2x1ZGUgPGRybS9kcm1fbW9kZXMuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX3BhbmVsLmg+CisK
KworZW51bSBudDM5MDE2X3JlZ3MgeworCU5UMzkwMTZfUkVHX1NZU1RFTSwKKwlOVDM5MDE2X1JF
R19USU1JTkcsCisJTlQzOTAxNl9SRUdfT1AsCisJTlQzOTAxNl9SRUdfREFUQV9JTiwKKwlOVDM5
MDE2X1JFR19TUkNfVElNSU5HX0RFTEFZLAorCU5UMzkwMTZfUkVHX0dBVEVfVElNSU5HX0RFTEFZ
LAorCU5UMzkwMTZfUkVHX1JFU0VSVkVELAorCU5UMzkwMTZfUkVHX0lOSVRJQUxfRlVOQywKKwlO
VDM5MDE2X1JFR19DT05UUkFTVCwKKwlOVDM5MDE2X1JFR19CUklHSFRORVNTLAorCU5UMzkwMTZf
UkVHX0hVRV9TQVRVUkFUSU9OLAorCU5UMzkwMTZfUkVHX1JCX1NVQkNPTlRSQVNULAorCU5UMzkw
MTZfUkVHX1JfU1VCQlJJR0hUTkVTUywKKwlOVDM5MDE2X1JFR19CX1NVQkJSSUdIVE5FU1MsCisJ
TlQzOTAxNl9SRUdfVkNPTURDLAorCU5UMzkwMTZfUkVHX1ZDT01BQywKKwlOVDM5MDE2X1JFR19W
R0FNMiwKKwlOVDM5MDE2X1JFR19WR0FNMzQsCisJTlQzOTAxNl9SRUdfVkdBTTU2LAorCU5UMzkw
MTZfUkVHX1ZDT01EQ19UUklNID0gMHgxZSwKKwlOVDM5MDE2X1JFR19ESVNQTEFZX01PREUgPSAw
eDIwLAorfTsKKworI2RlZmluZSBOVDM5MDE2X1NZU1RFTV9SRVNFVF9OCUJJVCgwKQorI2RlZmlu
ZSBOVDM5MDE2X1NZU1RFTV9TVEFOREJZCUJJVCgxKQorCitzdHJ1Y3QgbnQzOTAxNl9wYW5lbF9p
bmZvIHsKKwlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSBkaXNwbGF5X21vZGU7CisJdTE2IHdpZHRo
X21tLCBoZWlnaHRfbW07CisJdTMyIGJ1c19mb3JtYXQsIGJ1c19mbGFnczsKK307CisKK3N0cnVj
dCBudDM5MDE2IHsKKwlzdHJ1Y3QgZHJtX3BhbmVsIGRybV9wYW5lbDsKKwlzdHJ1Y3QgZGV2aWNl
ICpkZXY7CisJc3RydWN0IHJlZ21hcCAqbWFwOworCXN0cnVjdCByZWd1bGF0b3IgKnN1cHBseTsK
Kwljb25zdCBzdHJ1Y3QgbnQzOTAxNl9wYW5lbF9pbmZvICpwYW5lbF9pbmZvOworCisJc3RydWN0
IGdwaW9fZGVzYyAqcmVzZXRfZ3BpbzsKKworCXN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpiYWNr
bGlnaHQ7Cit9OworCitzdGF0aWMgaW5saW5lIHN0cnVjdCBudDM5MDE2ICp0b19udDM5MDE2KHN0
cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXJldHVybiBjb250YWluZXJfb2YocGFuZWwsIHN0
cnVjdCBudDM5MDE2LCBkcm1fcGFuZWwpOworfQorCisjZGVmaW5lIFJWKFJFRywgVkFMKSB7IC5y
ZWcgPSAoUkVHKSwgLmRlZiA9IChWQUwpLCAuZGVsYXlfdXMgPSAyIH0KK3N0YXRpYyBjb25zdCBz
dHJ1Y3QgcmVnX3NlcXVlbmNlIG50MzkwMTZfcGFuZWxfcmVnc1tdID0geworCVJWKE5UMzkwMTZf
UkVHX1NZU1RFTSwgMHgwMCksCisJUlYoTlQzOTAxNl9SRUdfVElNSU5HLCAweDAwKSwKKwlSVihO
VDM5MDE2X1JFR19PUCwgMHgwMyksCisJUlYoTlQzOTAxNl9SRUdfREFUQV9JTiwgMHhDQyksCisJ
UlYoTlQzOTAxNl9SRUdfU1JDX1RJTUlOR19ERUxBWSwgMHg0NiksCisJUlYoTlQzOTAxNl9SRUdf
R0FURV9USU1JTkdfREVMQVksIDB4MDUpLAorCVJWKE5UMzkwMTZfUkVHX1JFU0VSVkVELCAweDAw
KSwKKwlSVihOVDM5MDE2X1JFR19JTklUSUFMX0ZVTkMsIDB4MDApLAorCVJWKE5UMzkwMTZfUkVH
X0NPTlRSQVNULCAweDA4KSwKKwlSVihOVDM5MDE2X1JFR19CUklHSFRORVNTLCAweDQwKSwKKwlS
VihOVDM5MDE2X1JFR19IVUVfU0FUVVJBVElPTiwgMHg4OCksCisJUlYoTlQzOTAxNl9SRUdfUkJf
U1VCQ09OVFJBU1QsIDB4ODgpLAorCVJWKE5UMzkwMTZfUkVHX1JfU1VCQlJJR0hUTkVTUywgMHgy
MCksCisJUlYoTlQzOTAxNl9SRUdfQl9TVUJCUklHSFRORVNTLCAweDIwKSwKKwlSVihOVDM5MDE2
X1JFR19WQ09NREMsIDB4NjcpLAorCVJWKE5UMzkwMTZfUkVHX1ZDT01BQywgMHhBNCksCisJUlYo
TlQzOTAxNl9SRUdfVkdBTTIsIDB4MDQpLAorCVJWKE5UMzkwMTZfUkVHX1ZHQU0zNCwgMHgyNCks
CisJUlYoTlQzOTAxNl9SRUdfVkdBTTU2LCAweDI0KSwKKwlSVihOVDM5MDE2X1JFR19ESVNQTEFZ
X01PREUsIDB4MDApLAorfTsKKyN1bmRlZiBSVgorCitzdGF0aWMgY29uc3Qgc3RydWN0IHJlZ21h
cF9yYW5nZSBudDM5MDE2X3JlZ21hcF9ub19yYW5nZXNbXSA9IHsKKwlyZWdtYXBfcmVnX3Jhbmdl
KDB4MTMsIDB4MUQpLAorCXJlZ21hcF9yZWdfcmFuZ2UoMHgxRiwgMHgxRiksCit9OworCitzdGF0
aWMgY29uc3Qgc3RydWN0IHJlZ21hcF9hY2Nlc3NfdGFibGUgbnQzOTAxNl9yZWdtYXBfYWNjZXNz
X3RhYmxlID0geworCS5ub19yYW5nZXMgPSBudDM5MDE2X3JlZ21hcF9ub19yYW5nZXMsCisJLm5f
bm9fcmFuZ2VzID0gQVJSQVlfU0laRShudDM5MDE2X3JlZ21hcF9ub19yYW5nZXMpLAorfTsKKwor
c3RhdGljIGNvbnN0IHN0cnVjdCByZWdtYXBfY29uZmlnIG50MzkwMTZfcmVnbWFwX2NvbmZpZyA9
IHsKKwkucmVnX2JpdHMgPSA2LAorCS5wYWRfYml0cyA9IDIsCisJLnZhbF9iaXRzID0gOCwKKwor
CS5tYXhfcmVnaXN0ZXIgPSBOVDM5MDE2X1JFR19ESVNQTEFZX01PREUsCisJLndyX3RhYmxlID0g
Jm50MzkwMTZfcmVnbWFwX2FjY2Vzc190YWJsZSwKKwkud3JpdGVfZmxhZ19tYXNrID0gMHgwMiwK
KworCS5jYWNoZV90eXBlID0gUkVHQ0FDSEVfRkxBVCwKK307CisKK3N0YXRpYyBpbnQgbnQzOTAx
Nl9wcmVwYXJlKHN0cnVjdCBkcm1fcGFuZWwgKmRybV9wYW5lbCkKK3sKKwlzdHJ1Y3QgbnQzOTAx
NiAqcGFuZWwgPSB0b19udDM5MDE2KGRybV9wYW5lbCk7CisJaW50IGVycjsKKworCWVyciA9IHJl
Z3VsYXRvcl9lbmFibGUocGFuZWwtPnN1cHBseSk7CisJaWYgKGVycikgeworCQlkZXZfZXJyKHBh
bmVsLT5kZXYsICJGYWlsZWQgdG8gZW5hYmxlIHBvd2VyIHN1cHBseTogJWQiLCBlcnIpOworCQly
ZXR1cm4gZXJyOworCX0KKworCS8qCisJICogUmVzZXQgdGhlIE5UMzkwMTYuCisJICogVGhlIGRv
Y3VtZW50YXRpb24gc2F5cyB0aGUgcmVzZXQgcHVsc2Ugc2hvdWxkIGJlIGF0IGxlYXN0IDQwIHVz
IHRvCisJICogcGFzcyB0aGUgZ2xpdGNoIGZpbHRlciwgYnV0IHdoZW4gdGVzdGluZyBJIHNlZSBz
b21lIHJlc2V0cyBmYWlsIGFuZAorCSAqIHNvbWUgc3VjY2VlZCB3aGVuIHVzaW5nIGEgNzAgdXMg
ZGVsYXksIHNvIHdlIHVzZSAxMDAgdXMgaW5zdGVhZC4KKwkgKi8KKwlncGlvZF9zZXRfdmFsdWVf
Y2Fuc2xlZXAocGFuZWwtPnJlc2V0X2dwaW8sIDEpOworCXVzbGVlcF9yYW5nZSgxMDAsIDEwMDAp
OworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChwYW5lbC0+cmVzZXRfZ3BpbywgMCk7CisJdWRl
bGF5KDIpOworCisJLyogSW5pdCBhbGwgcmVnaXN0ZXJzLiAqLworCWVyciA9IHJlZ21hcF9tdWx0
aV9yZWdfd3JpdGUocGFuZWwtPm1hcCwgbnQzOTAxNl9wYW5lbF9yZWdzLAorCQkJCSAgICAgQVJS
QVlfU0laRShudDM5MDE2X3BhbmVsX3JlZ3MpKTsKKwlpZiAoZXJyKSB7CisJCWRldl9lcnIocGFu
ZWwtPmRldiwgIkZhaWxlZCB0byBpbml0IHJlZ2lzdGVyczogJWQiLCBlcnIpOworCQlnb3RvIGVy
cl9kaXNhYmxlX3JlZ3VsYXRvcjsKKwl9CisKKwlyZXR1cm4gMDsKKworZXJyX2Rpc2FibGVfcmVn
dWxhdG9yOgorCXJlZ3VsYXRvcl9kaXNhYmxlKHBhbmVsLT5zdXBwbHkpOworCXJldHVybiBlcnI7
Cit9CisKK3N0YXRpYyBpbnQgbnQzOTAxNl91bnByZXBhcmUoc3RydWN0IGRybV9wYW5lbCAqZHJt
X3BhbmVsKQoreworCXN0cnVjdCBudDM5MDE2ICpwYW5lbCA9IHRvX250MzkwMTYoZHJtX3BhbmVs
KTsKKworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChwYW5lbC0+cmVzZXRfZ3BpbywgMSk7CisK
KwlyZWd1bGF0b3JfZGlzYWJsZShwYW5lbC0+c3VwcGx5KTsKKworCXJldHVybiAwOworfQorCitz
dGF0aWMgaW50IG50MzkwMTZfZW5hYmxlKHN0cnVjdCBkcm1fcGFuZWwgKmRybV9wYW5lbCkKK3sK
KwlzdHJ1Y3QgbnQzOTAxNiAqcGFuZWwgPSB0b19udDM5MDE2KGRybV9wYW5lbCk7CisJaW50IHJl
dDsKKworCXJldCA9IHJlZ21hcF93cml0ZShwYW5lbC0+bWFwLCBOVDM5MDE2X1JFR19TWVNURU0s
CisJCQkgICBOVDM5MDE2X1NZU1RFTV9SRVNFVF9OIHwgTlQzOTAxNl9TWVNURU1fU1RBTkRCWSk7
CisJaWYgKHJldCkgeworCQlkZXZfZXJyKHBhbmVsLT5kZXYsICJVbmFibGUgdG8gZW5hYmxlIHBh
bmVsOiAlZCIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJaWYgKHBhbmVsLT5iYWNrbGln
aHQpIHsKKwkJLyogV2FpdCBmb3IgdGhlIHBpY3R1cmUgdG8gYmUgcmVhZHkgYmVmb3JlIGVuYWJs
aW5nIGJhY2tsaWdodCAqLworCQltc2xlZXAoMTUwKTsKKworCQlyZXQgPSBiYWNrbGlnaHRfZW5h
YmxlKHBhbmVsLT5iYWNrbGlnaHQpOworCX0KKworCXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyBp
bnQgbnQzOTAxNl9kaXNhYmxlKHN0cnVjdCBkcm1fcGFuZWwgKmRybV9wYW5lbCkKK3sKKwlzdHJ1
Y3QgbnQzOTAxNiAqcGFuZWwgPSB0b19udDM5MDE2KGRybV9wYW5lbCk7CisJaW50IGVycjsKKwor
CWJhY2tsaWdodF9kaXNhYmxlKHBhbmVsLT5iYWNrbGlnaHQpOworCisJZXJyID0gcmVnbWFwX3dy
aXRlKHBhbmVsLT5tYXAsIE5UMzkwMTZfUkVHX1NZU1RFTSwKKwkJCSAgIE5UMzkwMTZfU1lTVEVN
X1JFU0VUX04pOworCWlmIChlcnIpIHsKKwkJZGV2X2VycihwYW5lbC0+ZGV2LCAiVW5hYmxlIHRv
IGRpc2FibGUgcGFuZWw6ICVkIiwgZXJyKTsKKwkJcmV0dXJuIGVycjsKKwl9CisKKwlyZXR1cm4g
MDsKK30KKworc3RhdGljIGludCBudDM5MDE2X2dldF9tb2RlcyhzdHJ1Y3QgZHJtX3BhbmVsICpk
cm1fcGFuZWwpCit7CisJc3RydWN0IG50MzkwMTYgKnBhbmVsID0gdG9fbnQzOTAxNihkcm1fcGFu
ZWwpOworCWNvbnN0IHN0cnVjdCBudDM5MDE2X3BhbmVsX2luZm8gKnBhbmVsX2luZm8gPSBwYW5l
bC0+cGFuZWxfaW5mbzsKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yID0gZHJtX3Bh
bmVsLT5jb25uZWN0b3I7CisJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGU7CisKKwltb2Rl
ID0gZHJtX21vZGVfZHVwbGljYXRlKGRybV9wYW5lbC0+ZHJtLCAmcGFuZWxfaW5mby0+ZGlzcGxh
eV9tb2RlKTsKKwlpZiAoIW1vZGUpCisJCXJldHVybiAtRU5PTUVNOworCisJZHJtX21vZGVfc2V0
X25hbWUobW9kZSk7CisKKwltb2RlLT50eXBlID0gRFJNX01PREVfVFlQRV9EUklWRVIgfCBEUk1f
TU9ERV9UWVBFX1BSRUZFUlJFRDsKKwlkcm1fbW9kZV9wcm9iZWRfYWRkKGNvbm5lY3RvciwgbW9k
ZSk7CisKKwljb25uZWN0b3ItPmRpc3BsYXlfaW5mby5icGMgPSA4OworCWNvbm5lY3Rvci0+ZGlz
cGxheV9pbmZvLndpZHRoX21tID0gcGFuZWxfaW5mby0+d2lkdGhfbW07CisJY29ubmVjdG9yLT5k
aXNwbGF5X2luZm8uaGVpZ2h0X21tID0gcGFuZWxfaW5mby0+aGVpZ2h0X21tOworCisJZHJtX2Rp
c3BsYXlfaW5mb19zZXRfYnVzX2Zvcm1hdHMoJmNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLAorCQkJ
CQkgJnBhbmVsX2luZm8tPmJ1c19mb3JtYXQsIDEpOworCWNvbm5lY3Rvci0+ZGlzcGxheV9pbmZv
LmJ1c19mbGFncyA9IHBhbmVsX2luZm8tPmJ1c19mbGFnczsKKworCXJldHVybiAxOworfQorCitz
dGF0aWMgY29uc3Qgc3RydWN0IGRybV9wYW5lbF9mdW5jcyBudDM5MDE2X2Z1bmNzID0geworCS5w
cmVwYXJlCT0gbnQzOTAxNl9wcmVwYXJlLAorCS51bnByZXBhcmUJPSBudDM5MDE2X3VucHJlcGFy
ZSwKKwkuZW5hYmxlCQk9IG50MzkwMTZfZW5hYmxlLAorCS5kaXNhYmxlCT0gbnQzOTAxNl9kaXNh
YmxlLAorCS5nZXRfbW9kZXMJPSBudDM5MDE2X2dldF9tb2RlcywKK307CisKK3N0YXRpYyBpbnQg
bnQzOTAxNl9wcm9iZShzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpKQoreworCXN0cnVjdCBkZXZpY2Ug
KmRldiA9ICZzcGktPmRldjsKKwlzdHJ1Y3QgbnQzOTAxNiAqcGFuZWw7CisJaW50IGVycjsKKwor
CXBhbmVsID0gZGV2bV9remFsbG9jKGRldiwgc2l6ZW9mKCpwYW5lbCksIEdGUF9LRVJORUwpOwor
CWlmICghcGFuZWwpCisJCXJldHVybiAtRU5PTUVNOworCisJcGFuZWwtPmRldiA9IGRldjsKKwlz
cGlfc2V0X2RydmRhdGEoc3BpLCBwYW5lbCk7CisKKwlwYW5lbC0+cGFuZWxfaW5mbyA9IG9mX2Rl
dmljZV9nZXRfbWF0Y2hfZGF0YShkZXYpOworCWlmICghcGFuZWwtPnBhbmVsX2luZm8pCisJCXJl
dHVybiAtRUlOVkFMOworCisJcGFuZWwtPnN1cHBseSA9IGRldm1fcmVndWxhdG9yX2dldChkZXYs
ICJwb3dlciIpOworCWlmIChJU19FUlIocGFuZWwtPnN1cHBseSkpIHsKKwkJZGV2X2VycihkZXYs
ICJGYWlsZWQgdG8gZ2V0IHBvd2VyIHN1cHBseSIpOworCQlyZXR1cm4gUFRSX0VSUihwYW5lbC0+
c3VwcGx5KTsKKwl9CisKKwlwYW5lbC0+cmVzZXRfZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0KGRldiwg
InJlc2V0IiwgR1BJT0RfT1VUX0hJR0gpOworCWlmIChJU19FUlIocGFuZWwtPnJlc2V0X2dwaW8p
KSB7CisJCWRldl9lcnIoZGV2LCAiRmFpbGVkIHRvIGdldCByZXNldCBHUElPIik7CisJCXJldHVy
biBQVFJfRVJSKHBhbmVsLT5yZXNldF9ncGlvKTsKKwl9CisKKwlzcGktPmJpdHNfcGVyX3dvcmQg
PSA4OworCXNwaS0+bW9kZSA9IFNQSV9NT0RFXzMgfCBTUElfM1dJUkU7CisJZXJyID0gc3BpX3Nl
dHVwKHNwaSk7CisJaWYgKGVycikgeworCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0byBzZXR1cCBT
UEkiKTsKKwkJcmV0dXJuIGVycjsKKwl9CisKKwlwYW5lbC0+bWFwID0gZGV2bV9yZWdtYXBfaW5p
dF9zcGkoc3BpLCAmbnQzOTAxNl9yZWdtYXBfY29uZmlnKTsKKwlpZiAoSVNfRVJSKHBhbmVsLT5t
YXApKSB7CisJCWRldl9lcnIoZGV2LCAiRmFpbGVkIHRvIGluaXQgcmVnbWFwIik7CisJCXJldHVy
biBQVFJfRVJSKHBhbmVsLT5tYXApOworCX0KKworCXBhbmVsLT5iYWNrbGlnaHQgPSBkZXZtX29m
X2ZpbmRfYmFja2xpZ2h0KGRldik7CisJaWYgKElTX0VSUihwYW5lbC0+YmFja2xpZ2h0KSkgewor
CQllcnIgPSBQVFJfRVJSKHBhbmVsLT5iYWNrbGlnaHQpOworCQlpZiAoZXJyICE9IC1FUFJPQkVf
REVGRVIpCisJCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0byBnZXQgYmFja2xpZ2h0IGhhbmRsZSIp
OworCQlyZXR1cm4gZXJyOworCX0KKworCWRybV9wYW5lbF9pbml0KCZwYW5lbC0+ZHJtX3BhbmVs
KTsKKwlwYW5lbC0+ZHJtX3BhbmVsLmRldiA9IGRldjsKKwlwYW5lbC0+ZHJtX3BhbmVsLmZ1bmNz
ID0gJm50MzkwMTZfZnVuY3M7CisKKwllcnIgPSBkcm1fcGFuZWxfYWRkKCZwYW5lbC0+ZHJtX3Bh
bmVsKTsKKwlpZiAoZXJyIDwgMCkgeworCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0byByZWdpc3Rl
ciBwYW5lbCIpOworCQlyZXR1cm4gZXJyOworCX0KKworCXJldHVybiAwOworfQorCitzdGF0aWMg
aW50IG50MzkwMTZfcmVtb3ZlKHN0cnVjdCBzcGlfZGV2aWNlICpzcGkpCit7CisJc3RydWN0IG50
MzkwMTYgKnBhbmVsID0gc3BpX2dldF9kcnZkYXRhKHNwaSk7CisKKwlkcm1fcGFuZWxfcmVtb3Zl
KCZwYW5lbC0+ZHJtX3BhbmVsKTsKKworCW50MzkwMTZfZGlzYWJsZSgmcGFuZWwtPmRybV9wYW5l
bCk7CisJbnQzOTAxNl91bnByZXBhcmUoJnBhbmVsLT5kcm1fcGFuZWwpOworCisJcmV0dXJuIDA7
Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgbnQzOTAxNl9wYW5lbF9pbmZvIGtkMDM1ZzZfaW5m
byA9IHsKKwkuZGlzcGxheV9tb2RlID0geworCQkuY2xvY2sgPSA2MDAwLAorCQkuaGRpc3BsYXkg
PSAzMjAsCisJCS5oc3luY19zdGFydCA9IDMyMCArIDEwLAorCQkuaHN5bmNfZW5kID0gMzIwICsg
MTAgKyA1MCwKKwkJLmh0b3RhbCA9IDMyMCArIDEwICsgNTAgKyAyMCwKKwkJLnZkaXNwbGF5ID0g
MjQwLAorCQkudnN5bmNfc3RhcnQgPSAyNDAgKyA1LAorCQkudnN5bmNfZW5kID0gMjQwICsgNSAr
IDEsCisJCS52dG90YWwgPSAyNDAgKyA1ICsgMSArIDQsCisJCS52cmVmcmVzaCA9IDYwLAorCQku
ZmxhZ3MgPSBEUk1fTU9ERV9GTEFHX05IU1lOQyB8IERSTV9NT0RFX0ZMQUdfTlZTWU5DLAorCX0s
CisJLndpZHRoX21tID0gNzEsCisJLmhlaWdodF9tbSA9IDUzLAorCS5idXNfZm9ybWF0ID0gTUVE
SUFfQlVTX0ZNVF9SR0I4ODhfMVgyNCwKKwkuYnVzX2ZsYWdzID0gRFJNX0JVU19GTEFHX1BJWERB
VEFfTkVHRURHRSwKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIG50Mzkw
MTZfb2ZfbWF0Y2hbXSA9IHsKKwl7IC5jb21wYXRpYmxlID0gImtpbmdkaXNwbGF5LGtkMDM1ZzYt
NTRudCIsIC5kYXRhID0gJmtkMDM1ZzZfaW5mbyB9LAorCXsgLyogc2VudGluZWwgKi8gfQorfTsK
K01PRFVMRV9ERVZJQ0VfVEFCTEUob2YsIG50MzkwMTZfb2ZfbWF0Y2gpOworCitzdGF0aWMgc3Ry
dWN0IHNwaV9kcml2ZXIgbnQzOTAxNl9kcml2ZXIgPSB7CisJLmRyaXZlciA9IHsKKwkJLm5hbWUg
PSAibnQzOTAxNiIsCisJCS5vZl9tYXRjaF90YWJsZSA9IG50MzkwMTZfb2ZfbWF0Y2gsCisJfSwK
KwkucHJvYmUgPSBudDM5MDE2X3Byb2JlLAorCS5yZW1vdmUgPSBudDM5MDE2X3JlbW92ZSwKK307
CisKK21vZHVsZV9zcGlfZHJpdmVyKG50MzkwMTZfZHJpdmVyKTsKKworTU9EVUxFX0FVVEhPUigi
TWFhcnRlbiB0ZXIgSHV1cm5lIDxtYWFydGVuQHRyZWV3YWxrZXIub3JnPiIpOworTU9EVUxFX0FV
VEhPUigiUGF1bCBDZXJjdWVpbCA8cGF1bEBjcmFwb3VpbGxvdS5uZXQ+Iik7CitNT0RVTEVfTElD
RU5TRSgiR1BMIHYyIik7Ci0tIAoyLjIxLjAuNTkzLmc1MTFlYzM0NWUxOAoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
