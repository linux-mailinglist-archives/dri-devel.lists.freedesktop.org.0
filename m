Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DD0FF47505
	for <lists+dri-devel@lfdr.de>; Sun, 16 Jun 2019 16:03:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9B22E89259;
	Sun, 16 Jun 2019 14:02:44 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from foss.arm.com (foss.arm.com [217.140.110.172])
 by gabe.freedesktop.org (Postfix) with ESMTP id 8104D89A9A
 for <dri-devel@lists.freedesktop.org>; Fri, 14 Jun 2019 17:55:19 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id B91BED6E;
 Fri, 14 Jun 2019 10:55:18 -0700 (PDT)
Received: from en101.cambridge.arm.com (en101.cambridge.arm.com [10.1.196.93])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPA id
 155873F718; Fri, 14 Jun 2019 10:55:15 -0700 (PDT)
From: Suzuki K Poulose <suzuki.poulose@arm.com>
To: linux-kernel@vger.kernel.org
Subject: [PATCH v2 17/28] drivers: Introduce bus_find_device_by_of_node()
 helper
Date: Fri, 14 Jun 2019 18:54:12 +0100
Message-Id: <1560534863-15115-18-git-send-email-suzuki.poulose@arm.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1560534863-15115-1-git-send-email-suzuki.poulose@arm.com>
References: <1560534863-15115-1-git-send-email-suzuki.poulose@arm.com>
X-Mailman-Approved-At: Sun, 16 Jun 2019 14:01:48 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Florian Fainelli <f.fainelli@gmail.com>,
 Mathieu Poirier <mathieu.poirier@linaro.org>, suzuki.poulose@arm.com,
 Maxime Ripard <maxime.ripard@bootlin.com>, gregkh@linuxfoundation.org,
 rafael@kernel.org, Liam Girdwood <lgirdwood@gmail.com>,
 dri-devel@lists.freedesktop.org, linux-spi@vger.kernel.org,
 David Airlie <airlied@linux.ie>, Rob Herring <robh+dt@kernel.org>,
 Srinivas Kandagatla <srinivas.kandagatla@linaro.org>,
 linux-i2c@vger.kernel.org, Wolfram Sang <wsa@the-dreams.de>,
 linux-rockchip@lists.infradead.org, Takashi Iwai <tiwai@suse.com>,
 Frank Rowand <frowand.list@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIGEgd3JhcHBlciB0byBidXNfZmluZF9kZXZpY2UoKSB0byBzZWFyY2ggZm9yIGEgZGV2aWNl
CmJ5IHRoZSBvZl9ub2RlIHBvaW50ZXIsIHJldXNpbmcgdGhlIGdlbmVyaWMgbWF0Y2ggZnVuY3Rp
b24uCkFsc28gY29udmVydCB0aGUgZXhpc3RpbmcgdXNlcnMgdG8gbWFrZSB1c2Ugb2YgdGhlIG5l
dyBoZWxwZXIuCgpDYzogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4
LmludGVsLmNvbT4KQ2M6IE1heGltZSBSaXBhcmQgPG1heGltZS5yaXBhcmRAYm9vdGxpbi5jb20+
CkNjOiBkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCkNjOiBEYXZpZCBBaXJsaWUgPGFp
cmxpZWRAbGludXguaWU+CkNjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWxAZmZ3bGwuY2g+CkNjOiBk
ZXZpY2V0cmVlQHZnZXIua2VybmVsLm9yZwpDYzogRmxvcmlhbiBGYWluZWxsaSA8Zi5mYWluZWxs
aUBnbWFpbC5jb20+CkNjOiBGcmFuayBSb3dhbmQgPGZyb3dhbmQubGlzdEBnbWFpbC5jb20+CkNj
OiBIZWlrbyBTdHVlYm5lciA8aGVpa29Ac250ZWNoLmRlPgpDYzogTGlhbSBHaXJkd29vZCA8bGdp
cmR3b29kQGdtYWlsLmNvbT4KQ2M6IGxpbnV4LWkyY0B2Z2VyLmtlcm5lbC5vcmcKQ2M6IGxpbnV4
LXJvY2tjaGlwQGxpc3RzLmluZnJhZGVhZC5vcmcKQ2M6IGxpbnV4LXNwaUB2Z2VyLmtlcm5lbC5v
cmcKQ2M6IE1hdGhpZXUgUG9pcmllciA8bWF0aGlldS5wb2lyaWVyQGxpbmFyby5vcmc+CkNjOiBS
b2IgSGVycmluZyA8cm9iaCtkdEBrZXJuZWwub3JnPgpDYzogU3Jpbml2YXMgS2FuZGFnYXRsYSA8
c3Jpbml2YXMua2FuZGFnYXRsYUBsaW5hcm8ub3JnPgpDYzogVGFrYXNoaSBJd2FpIDx0aXdhaUBz
dXNlLmNvbT4KQ2M6IFdvbGZyYW0gU2FuZyA8d3NhQHRoZS1kcmVhbXMuZGU+CkNjOiBHcmVnIEty
b2FoLUhhcnRtYW4gPGdyZWdraEBsaW51eGZvdW5kYXRpb24ub3JnPgpDYzogIlJhZmFlbCBKLiBX
eXNvY2tpIiA8cmFmYWVsQGtlcm5lbC5vcmc+ClNpZ25lZC1vZmYtYnk6IFN1enVraSBLIFBvdWxv
c2UgPHN1enVraS5wb3Vsb3NlQGFybS5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2RybV9taXBp
X2RzaS5jICAgICAgICAgICAgIHwgIDcgKy0tLS0tLQogZHJpdmVycy9od3RyYWNpbmcvY29yZXNp
Z2h0L29mX2NvcmVzaWdodC5jIHwgMTEgKystLS0tLS0tLS0KIGRyaXZlcnMvaTJjL2kyYy1jb3Jl
LW9mLmMgICAgICAgICAgICAgICAgICB8ICA3ICstLS0tLS0KIGRyaXZlcnMvbnZtZW0vY29yZS5j
ICAgICAgICAgICAgICAgICAgICAgICB8ICA3ICstLS0tLS0KIGRyaXZlcnMvb2Yvb2ZfbWRpby5j
ICAgICAgICAgICAgICAgICAgICAgICB8ICA4ICstLS0tLS0tCiBkcml2ZXJzL29mL3BsYXRmb3Jt
LmMgICAgICAgICAgICAgICAgICAgICAgfCAgNyArLS0tLS0tCiBkcml2ZXJzL3NwaS9zcGkuYyAg
ICAgICAgICAgICAgICAgICAgICAgICAgfCAgOSArKy0tLS0tLS0KIGluY2x1ZGUvbGludXgvZGV2
aWNlLmggICAgICAgICAgICAgICAgICAgICB8IDEyICsrKysrKysrKysrKwogc291bmQvc29jL3Jv
Y2tjaGlwL3JrMzM5OV9ncnVfc291bmQuYyAgICAgIHwgIDkgKystLS0tLS0tCiA5IGZpbGVzIGNo
YW5nZWQsIDIzIGluc2VydGlvbnMoKyksIDU0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9kcm1fbWlwaV9kc2kuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fbWlwaV9k
c2kuYwppbmRleCBhZDE5ZGYwLi5iZDI0OThiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
ZHJtX21pcGlfZHNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9taXBpX2RzaS5jCkBAIC05
MywxMSArOTMsNiBAQCBzdGF0aWMgc3RydWN0IGJ1c190eXBlIG1pcGlfZHNpX2J1c190eXBlID0g
ewogCS5wbSA9ICZtaXBpX2RzaV9kZXZpY2VfcG1fb3BzLAogfTsKIAotc3RhdGljIGludCBvZl9k
ZXZpY2VfbWF0Y2goc3RydWN0IGRldmljZSAqZGV2LCBjb25zdCB2b2lkICpkYXRhKQotewotCXJl
dHVybiBkZXYtPm9mX25vZGUgPT0gZGF0YTsKLX0KLQogLyoqCiAgKiBvZl9maW5kX21pcGlfZHNp
X2RldmljZV9ieV9ub2RlKCkgLSBmaW5kIHRoZSBNSVBJIERTSSBkZXZpY2UgbWF0Y2hpbmcgYQog
ICogICAgZGV2aWNlIHRyZWUgbm9kZQpAQCAtMTEwLDcgKzEwNSw3IEBAIHN0cnVjdCBtaXBpX2Rz
aV9kZXZpY2UgKm9mX2ZpbmRfbWlwaV9kc2lfZGV2aWNlX2J5X25vZGUoc3RydWN0IGRldmljZV9u
b2RlICpucCkKIHsKIAlzdHJ1Y3QgZGV2aWNlICpkZXY7CiAKLQlkZXYgPSBidXNfZmluZF9kZXZp
Y2UoJm1pcGlfZHNpX2J1c190eXBlLCBOVUxMLCBucCwgb2ZfZGV2aWNlX21hdGNoKTsKKwlkZXYg
PSBidXNfZmluZF9kZXZpY2VfYnlfb2Zfbm9kZSgmbWlwaV9kc2lfYnVzX3R5cGUsIG5wKTsKIAog
CXJldHVybiBkZXYgPyB0b19taXBpX2RzaV9kZXZpY2UoZGV2KSA6IE5VTEw7CiB9CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2h3dHJhY2luZy9jb3Jlc2lnaHQvb2ZfY29yZXNpZ2h0LmMgYi9kcml2ZXJz
L2h3dHJhY2luZy9jb3Jlc2lnaHQvb2ZfY29yZXNpZ2h0LmMKaW5kZXggM2ZjMjAwZS4uZjQxN2Y3
NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9od3RyYWNpbmcvY29yZXNpZ2h0L29mX2NvcmVzaWdodC5j
CisrKyBiL2RyaXZlcnMvaHd0cmFjaW5nL2NvcmVzaWdodC9vZl9jb3Jlc2lnaHQuYwpAQCAtMTgs
MTEgKzE4LDYgQEAKICNpbmNsdWRlIDxhc20vc21wX3BsYXQuaD4KIAogCi1zdGF0aWMgaW50IG9m
X2Rldl9ub2RlX21hdGNoKHN0cnVjdCBkZXZpY2UgKmRldiwgY29uc3Qgdm9pZCAqZGF0YSkKLXsK
LQlyZXR1cm4gZGV2LT5vZl9ub2RlID09IGRhdGE7Ci19Ci0KIHN0YXRpYyBzdHJ1Y3QgZGV2aWNl
ICoKIG9mX2NvcmVzaWdodF9nZXRfZW5kcG9pbnRfZGV2aWNlKHN0cnVjdCBkZXZpY2Vfbm9kZSAq
ZW5kcG9pbnQpCiB7CkBAIC0zMiw4ICsyNyw3IEBAIG9mX2NvcmVzaWdodF9nZXRfZW5kcG9pbnRf
ZGV2aWNlKHN0cnVjdCBkZXZpY2Vfbm9kZSAqZW5kcG9pbnQpCiAJICogSWYgd2UgaGF2ZSBhIG5v
bi1jb25maWd1cmFibGUgcmVwbGljYXRvciwgaXQgd2lsbCBiZSBmb3VuZCBvbiB0aGUKIAkgKiBw
bGF0Zm9ybSBidXMuCiAJICovCi0JZGV2ID0gYnVzX2ZpbmRfZGV2aWNlKCZwbGF0Zm9ybV9idXNf
dHlwZSwgTlVMTCwKLQkJCSAgICAgIGVuZHBvaW50LCBvZl9kZXZfbm9kZV9tYXRjaCk7CisJZGV2
ID0gYnVzX2ZpbmRfZGV2aWNlX2J5X29mX25vZGUoJnBsYXRmb3JtX2J1c190eXBlLCBlbmRwb2lu
dCk7CiAJaWYgKGRldikKIAkJcmV0dXJuIGRldjsKIApAQCAtNDEsOCArMzUsNyBAQCBvZl9jb3Jl
c2lnaHRfZ2V0X2VuZHBvaW50X2RldmljZShzdHJ1Y3QgZGV2aWNlX25vZGUgKmVuZHBvaW50KQog
CSAqIFdlIGhhdmUgYSBjb25maWd1cmFibGUgY29tcG9uZW50IC0gY2lyY2xlIHRocm91Z2ggdGhl
IEFNQkEgYnVzCiAJICogbG9va2luZyBmb3IgdGhlIGRldmljZSB0aGF0IG1hdGNoZXMgdGhlIGVu
ZHBvaW50IG5vZGUuCiAJICovCi0JcmV0dXJuIGJ1c19maW5kX2RldmljZSgmYW1iYV9idXN0eXBl
LCBOVUxMLAotCQkJICAgICAgIGVuZHBvaW50LCBvZl9kZXZfbm9kZV9tYXRjaCk7CisJcmV0dXJu
IGJ1c19maW5kX2RldmljZV9ieV9vZl9ub2RlKCZhbWJhX2J1c3R5cGUsIGVuZHBvaW50KTsKIH0K
IAogc3RhdGljIGlubGluZSBib29sIG9mX2NvcmVzaWdodF9sZWdhY3lfZXBfaXNfaW5wdXQoc3Ry
dWN0IGRldmljZV9ub2RlICplcCkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvaTJjL2kyYy1jb3JlLW9m
LmMgYi9kcml2ZXJzL2kyYy9pMmMtY29yZS1vZi5jCmluZGV4IDJlYjU5YTIuLjc0YTQxMjYgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvaTJjL2kyYy1jb3JlLW9mLmMKKysrIGIvZHJpdmVycy9pMmMvaTJj
LWNvcmUtb2YuYwpAQCAtMTEyLDExICsxMTIsNiBAQCB2b2lkIG9mX2kyY19yZWdpc3Rlcl9kZXZp
Y2VzKHN0cnVjdCBpMmNfYWRhcHRlciAqYWRhcCkKIAlvZl9ub2RlX3B1dChidXMpOwogfQogCi1z
dGF0aWMgaW50IG9mX2Rldl9ub2RlX21hdGNoKHN0cnVjdCBkZXZpY2UgKmRldiwgY29uc3Qgdm9p
ZCAqZGF0YSkKLXsKLQlyZXR1cm4gZGV2LT5vZl9ub2RlID09IGRhdGE7Ci19Ci0KIHN0YXRpYyBp
bnQgb2ZfZGV2X29yX3BhcmVudF9ub2RlX21hdGNoKHN0cnVjdCBkZXZpY2UgKmRldiwgY29uc3Qg
dm9pZCAqZGF0YSkKIHsKIAlpZiAoZGV2LT5vZl9ub2RlID09IGRhdGEpCkBAIC0xMzQsNyArMTI5
LDcgQEAgc3RydWN0IGkyY19jbGllbnQgKm9mX2ZpbmRfaTJjX2RldmljZV9ieV9ub2RlKHN0cnVj
dCBkZXZpY2Vfbm9kZSAqbm9kZSkKIAlzdHJ1Y3QgZGV2aWNlICpkZXY7CiAJc3RydWN0IGkyY19j
bGllbnQgKmNsaWVudDsKIAotCWRldiA9IGJ1c19maW5kX2RldmljZSgmaTJjX2J1c190eXBlLCBO
VUxMLCBub2RlLCBvZl9kZXZfbm9kZV9tYXRjaCk7CisJZGV2ID0gYnVzX2ZpbmRfZGV2aWNlX2J5
X29mX25vZGUoJmkyY19idXNfdHlwZSwgbm9kZSk7CiAJaWYgKCFkZXYpCiAJCXJldHVybiBOVUxM
OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL252bWVtL2NvcmUuYyBiL2RyaXZlcnMvbnZtZW0vY29y
ZS5jCmluZGV4IGFjNWQ5NDUuLjA1N2QxZmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbnZtZW0vY29y
ZS5jCisrKyBiL2RyaXZlcnMvbnZtZW0vY29yZS5jCkBAIC03NiwxMSArNzYsNiBAQCBzdGF0aWMg
c3RydWN0IGJ1c190eXBlIG52bWVtX2J1c190eXBlID0gewogCS5uYW1lCQk9ICJudm1lbSIsCiB9
OwogCi1zdGF0aWMgaW50IG9mX252bWVtX21hdGNoKHN0cnVjdCBkZXZpY2UgKmRldiwgY29uc3Qg
dm9pZCAqbnZtZW1fbnApCi17Ci0JcmV0dXJuIGRldi0+b2Zfbm9kZSA9PSBudm1lbV9ucDsKLX0K
LQogc3RhdGljIHN0cnVjdCBudm1lbV9kZXZpY2UgKm9mX252bWVtX2ZpbmQoc3RydWN0IGRldmlj
ZV9ub2RlICpudm1lbV9ucCkKIHsKIAlzdHJ1Y3QgZGV2aWNlICpkOwpAQCAtODgsNyArODMsNyBA
QCBzdGF0aWMgc3RydWN0IG52bWVtX2RldmljZSAqb2ZfbnZtZW1fZmluZChzdHJ1Y3QgZGV2aWNl
X25vZGUgKm52bWVtX25wKQogCWlmICghbnZtZW1fbnApCiAJCXJldHVybiBOVUxMOwogCi0JZCA9
IGJ1c19maW5kX2RldmljZSgmbnZtZW1fYnVzX3R5cGUsIE5VTEwsIG52bWVtX25wLCBvZl9udm1l
bV9tYXRjaCk7CisJZCA9IGJ1c19maW5kX2RldmljZV9ieV9vZl9ub2RlKCZudm1lbV9idXNfdHlw
ZSwgbnZtZW1fbnApOwogCiAJaWYgKCFkKQogCQlyZXR1cm4gTlVMTDsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvb2Yvb2ZfbWRpby5jIGIvZHJpdmVycy9vZi9vZl9tZGlvLmMKaW5kZXggNDRmNTM0OS4u
MDAwYjk1NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9vZi9vZl9tZGlvLmMKKysrIGIvZHJpdmVycy9v
Zi9vZl9tZGlvLmMKQEAgLTI4MCwxMiArMjgwLDYgQEAgaW50IG9mX21kaW9idXNfcmVnaXN0ZXIo
c3RydWN0IG1paV9idXMgKm1kaW8sIHN0cnVjdCBkZXZpY2Vfbm9kZSAqbnApCiB9CiBFWFBPUlRf
U1lNQk9MKG9mX21kaW9idXNfcmVnaXN0ZXIpOwogCi0vKiBIZWxwZXIgZnVuY3Rpb24gZm9yIG9m
X3BoeV9maW5kX2RldmljZSAqLwotc3RhdGljIGludCBvZl9waHlfbWF0Y2goc3RydWN0IGRldmlj
ZSAqZGV2LCBjb25zdCB2b2lkICpwaHlfbnApCi17Ci0JcmV0dXJuIGRldi0+b2Zfbm9kZSA9PSBw
aHlfbnA7Ci19Ci0KIC8qKgogICogb2ZfcGh5X2ZpbmRfZGV2aWNlIC0gR2l2ZSBhIFBIWSBub2Rl
LCBmaW5kIHRoZSBwaHlfZGV2aWNlCiAgKiBAcGh5X25wOiBQb2ludGVyIHRvIHRoZSBwaHkncyBk
ZXZpY2UgdHJlZSBub2RlCkBAIC0zMDEsNyArMjk1LDcgQEAgc3RydWN0IHBoeV9kZXZpY2UgKm9m
X3BoeV9maW5kX2RldmljZShzdHJ1Y3QgZGV2aWNlX25vZGUgKnBoeV9ucCkKIAlpZiAoIXBoeV9u
cCkKIAkJcmV0dXJuIE5VTEw7CiAKLQlkID0gYnVzX2ZpbmRfZGV2aWNlKCZtZGlvX2J1c190eXBl
LCBOVUxMLCBwaHlfbnAsIG9mX3BoeV9tYXRjaCk7CisJZCA9IGJ1c19maW5kX2RldmljZV9ieV9v
Zl9ub2RlKCZtZGlvX2J1c190eXBlLCBwaHlfbnApOwogCWlmIChkKSB7CiAJCW1kaW9kZXYgPSB0
b19tZGlvX2RldmljZShkKTsKIAkJaWYgKG1kaW9kZXYtPmZsYWdzICYgTURJT19ERVZJQ0VfRkxB
R19QSFkpCmRpZmYgLS1naXQgYS9kcml2ZXJzL29mL3BsYXRmb3JtLmMgYi9kcml2ZXJzL29mL3Bs
YXRmb3JtLmMKaW5kZXggMDA4ZDc5ZS4uZGUxMTkwNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9vZi9w
bGF0Zm9ybS5jCisrKyBiL2RyaXZlcnMvb2YvcGxhdGZvcm0uYwpAQCAtMzcsMTEgKzM3LDYgQEAg
c3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgb2Zfc2tpcHBlZF9ub2RlX3RhYmxlW10g
PSB7CiAJe30gLyogRW1wdHkgdGVybWluYXRlZCBsaXN0ICovCiB9OwogCi1zdGF0aWMgaW50IG9m
X2Rldl9ub2RlX21hdGNoKHN0cnVjdCBkZXZpY2UgKmRldiwgY29uc3Qgdm9pZCAqZGF0YSkKLXsK
LQlyZXR1cm4gZGV2LT5vZl9ub2RlID09IGRhdGE7Ci19Ci0KIC8qKgogICogb2ZfZmluZF9kZXZp
Y2VfYnlfbm9kZSAtIEZpbmQgdGhlIHBsYXRmb3JtX2RldmljZSBhc3NvY2lhdGVkIHdpdGggYSBu
b2RlCiAgKiBAbnA6IFBvaW50ZXIgdG8gZGV2aWNlIHRyZWUgbm9kZQpAQCAtNTUsNyArNTAsNyBA
QCBzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpvZl9maW5kX2RldmljZV9ieV9ub2RlKHN0cnVjdCBk
ZXZpY2Vfbm9kZSAqbnApCiB7CiAJc3RydWN0IGRldmljZSAqZGV2OwogCi0JZGV2ID0gYnVzX2Zp
bmRfZGV2aWNlKCZwbGF0Zm9ybV9idXNfdHlwZSwgTlVMTCwgbnAsIG9mX2Rldl9ub2RlX21hdGNo
KTsKKwlkZXYgPSBidXNfZmluZF9kZXZpY2VfYnlfb2Zfbm9kZSgmcGxhdGZvcm1fYnVzX3R5cGUs
IG5wKTsKIAlyZXR1cm4gZGV2ID8gdG9fcGxhdGZvcm1fZGV2aWNlKGRldikgOiBOVUxMOwogfQog
RVhQT1JUX1NZTUJPTChvZl9maW5kX2RldmljZV9ieV9ub2RlKTsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvc3BpL3NwaS5jIGIvZHJpdmVycy9zcGkvc3BpLmMKaW5kZXggYTI1NmJlNS4uY2M0ZDgzZSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9zcGkvc3BpLmMKKysrIGIvZHJpdmVycy9zcGkvc3BpLmMKQEAg
LTM1MzgsMTYgKzM1MzgsMTEgQEAgRVhQT1JUX1NZTUJPTF9HUEwoc3BpX3dyaXRlX3RoZW5fcmVh
ZCk7CiAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwogCiAjaWYgSVNfRU5BQkxFRChDT05GSUdfT0YpCi1z
dGF0aWMgaW50IF9fc3BpX29mX2RldmljZV9tYXRjaChzdHJ1Y3QgZGV2aWNlICpkZXYsIGNvbnN0
IHZvaWQgKmRhdGEpCi17Ci0JcmV0dXJuIGRldi0+b2Zfbm9kZSA9PSBkYXRhOwotfQotCiAvKiBt
dXN0IGNhbGwgcHV0X2RldmljZSgpIHdoZW4gZG9uZSB3aXRoIHJldHVybmVkIHNwaV9kZXZpY2Ug
ZGV2aWNlICovCiBzdHJ1Y3Qgc3BpX2RldmljZSAqb2ZfZmluZF9zcGlfZGV2aWNlX2J5X25vZGUo
c3RydWN0IGRldmljZV9ub2RlICpub2RlKQogewotCXN0cnVjdCBkZXZpY2UgKmRldiA9IGJ1c19m
aW5kX2RldmljZSgmc3BpX2J1c190eXBlLCBOVUxMLCBub2RlLAotCQkJCQkJX19zcGlfb2ZfZGV2
aWNlX21hdGNoKTsKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSBidXNfZmluZF9kZXZpY2VfYnlfb2Zf
bm9kZSgmc3BpX2J1c190eXBlLCBub2RlKTsKKwogCXJldHVybiBkZXYgPyB0b19zcGlfZGV2aWNl
KGRldikgOiBOVUxMOwogfQogRVhQT1JUX1NZTUJPTF9HUEwob2ZfZmluZF9zcGlfZGV2aWNlX2J5
X25vZGUpOwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9kZXZpY2UuaCBiL2luY2x1ZGUvbGlu
dXgvZGV2aWNlLmgKaW5kZXggYjFiOGM5MC4uMzVmNTFkNiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9s
aW51eC9kZXZpY2UuaAorKysgYi9pbmNsdWRlL2xpbnV4L2RldmljZS5oCkBAIC0xODksNiArMTg5
LDE4IEBAIHN0YXRpYyBpbmxpbmUgc3RydWN0IGRldmljZSAqYnVzX2ZpbmRfZGV2aWNlX2J5X25h
bWUoc3RydWN0IGJ1c190eXBlICpidXMsCiAJcmV0dXJuIGJ1c19maW5kX2RldmljZShidXMsIHN0
YXJ0LCBuYW1lLCBkZXZpY2VfbWF0Y2hfbmFtZSk7CiB9CiAKKy8qKgorICogYnVzX2ZpbmRfZGV2
aWNlX2J5X29mX25vZGUgOiBkZXZpY2UgaXRlcmF0b3IgZm9yIGxvY2F0aW5nIGEgcGFydGljdWxh
ciBkZXZpY2UKKyAqIG1hdGNoaW5nIHRoZSBvZl9ub2RlLgorICogQGJ1czogYnVzIHR5cGUKKyAq
IEBucDogb2Zfbm9kZSBvZiB0aGUgZGV2aWNlIHRvIG1hdGNoLgorICovCitzdGF0aWMgaW5saW5l
IHN0cnVjdCBkZXZpY2UgKgorYnVzX2ZpbmRfZGV2aWNlX2J5X29mX25vZGUoc3RydWN0IGJ1c190
eXBlICpidXMsIGNvbnN0IHN0cnVjdCBkZXZpY2Vfbm9kZSAqbnApCit7CisJcmV0dXJuIGJ1c19m
aW5kX2RldmljZShidXMsIE5VTEwsIG5wLCBkZXZpY2VfbWF0Y2hfb2Zfbm9kZSk7Cit9CisKIHN0
cnVjdCBkZXZpY2UgKnN1YnN5c19maW5kX2RldmljZV9ieV9pZChzdHJ1Y3QgYnVzX3R5cGUgKmJ1
cywgdW5zaWduZWQgaW50IGlkLAogCQkJCQlzdHJ1Y3QgZGV2aWNlICpoaW50KTsKIGludCBidXNf
Zm9yX2VhY2hfZHJ2KHN0cnVjdCBidXNfdHlwZSAqYnVzLCBzdHJ1Y3QgZGV2aWNlX2RyaXZlciAq
c3RhcnQsCmRpZmYgLS1naXQgYS9zb3VuZC9zb2Mvcm9ja2NoaXAvcmszMzk5X2dydV9zb3VuZC5j
IGIvc291bmQvc29jL3JvY2tjaGlwL3JrMzM5OV9ncnVfc291bmQuYwppbmRleCBjMDRjOWVkLi4y
ZmI3ZjhlIDEwMDY0NAotLS0gYS9zb3VuZC9zb2Mvcm9ja2NoaXAvcmszMzk5X2dydV9zb3VuZC5j
CisrKyBiL3NvdW5kL3NvYy9yb2NrY2hpcC9yazMzOTlfZ3J1X3NvdW5kLmMKQEAgLTQwNSwxMSAr
NDA1LDYgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkYWlsaW5rX21hdGNoX2RhdGEgZGFpbGlua19t
YXRjaFtdID0gewogCX0sCiB9OwogCi1zdGF0aWMgaW50IG9mX2Rldl9ub2RlX21hdGNoKHN0cnVj
dCBkZXZpY2UgKmRldiwgY29uc3Qgdm9pZCAqZGF0YSkKLXsKLQlyZXR1cm4gZGV2LT5vZl9ub2Rl
ID09IGRhdGE7Ci19Ci0KIHN0YXRpYyBpbnQgcm9ja2NoaXBfc291bmRfY29kZWNfbm9kZV9tYXRj
aChzdHJ1Y3QgZGV2aWNlX25vZGUgKm5wX2NvZGVjKQogewogCXN0cnVjdCBkZXZpY2UgKmRldjsK
QEAgLTQyMSw4ICs0MTYsOCBAQCBzdGF0aWMgaW50IHJvY2tjaGlwX3NvdW5kX2NvZGVjX25vZGVf
bWF0Y2goc3RydWN0IGRldmljZV9ub2RlICpucF9jb2RlYykKIAkJCWNvbnRpbnVlOwogCiAJCWlm
IChkYWlsaW5rX21hdGNoW2ldLmJ1c190eXBlKSB7Ci0JCQlkZXYgPSBidXNfZmluZF9kZXZpY2Uo
ZGFpbGlua19tYXRjaFtpXS5idXNfdHlwZSwgTlVMTCwKLQkJCQkJICAgICAgbnBfY29kZWMsIG9m
X2Rldl9ub2RlX21hdGNoKTsKKwkJCWRldiA9IGJ1c19maW5kX2RldmljZV9ieV9vZl9ub2RlKGRh
aWxpbmtfbWF0Y2hbaV0uYnVzX3R5cGUsCisJCQkJCQkJIG5wX2NvZGVjKTsKIAkJCWlmICghZGV2
KQogCQkJCWNvbnRpbnVlOwogCQkJcHV0X2RldmljZShkZXYpOwotLSAKMi43LjQKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
