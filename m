Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9E49F9B90F
	for <lists+dri-devel@lfdr.de>; Sat, 24 Aug 2019 01:48:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5C8D16ED6B;
	Fri, 23 Aug 2019 23:48:13 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x442.google.com (mail-pf1-x442.google.com
 [IPv6:2607:f8b0:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 995006ED6F
 for <dri-devel@lists.freedesktop.org>; Fri, 23 Aug 2019 23:48:03 +0000 (UTC)
Received: by mail-pf1-x442.google.com with SMTP id w16so7520526pfn.7
 for <dri-devel@lists.freedesktop.org>; Fri, 23 Aug 2019 16:48:03 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=NyBUASuAu3Awm8j3/xOM+PgdVeP3B+2DGc7L537MPcY=;
 b=qDbywXg0VAQfrfQVna3vUdmpKbcSpYD444x8v1617pXL/LFwIYJGm4zKz7f3+CJwYs
 M1NOCYoJ6uZ7eIUhWTUv/nTOWN3glzGcP3MifzDxQxtoZLglsJpLwjr1I0EdwhOzdXcv
 V2YuAVa0DO3TF+JWkJN1eJQsaEuQYxBQ8jDozeGxg8kQVjgjOgv5xfW0pi2fo9UL5+/F
 FIEmxm8wlGj7RC4YHJZ/2P2b8pkvZhUlR0mltMB4CTjqxGZ57gjlDmL6XGCpcW1aPZ0+
 +QRjvsWK83rtgN+WxdzNt90dXcnivgvC+NAf43uRDXHzCllqMBGNze4wm7BzBpWRlQrb
 bn2A==
X-Gm-Message-State: APjAAAUnpj4XX6smT2mTXIh7hyhb7mGueCjV0ZT8UzUs5dBUon8OlfV/
 uFPbRRs22K9NUSLtcRvxS5GiTQ==
X-Google-Smtp-Source: APXvYqzlDJoExt/bJZOjfEyBcorwaqj19edjKu+yBH/KVZc0U/XZ2ASdphx1NjaE2hFhkVi2S0Q6Dg==
X-Received: by 2002:a63:6947:: with SMTP id e68mr6206559pgc.60.1566604082752; 
 Fri, 23 Aug 2019 16:48:02 -0700 (PDT)
Received: from localhost.localdomain ([2601:1c2:680:1319:692:26ff:feda:3a81])
 by smtp.gmail.com with ESMTPSA id
 a5sm3185097pjs.31.2019.08.23.16.48.01
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 23 Aug 2019 16:48:02 -0700 (PDT)
From: John Stultz <john.stultz@linaro.org>
To: lkml <linux-kernel@vger.kernel.org>
Subject: [PATCH v8 5/5] kselftests: Add dma-heap test
Date: Fri, 23 Aug 2019 23:47:47 +0000
Message-Id: <20190823234747.106510-6-john.stultz@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190823234747.106510-1-john.stultz@linaro.org>
References: <20190823234747.106510-1-john.stultz@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=NyBUASuAu3Awm8j3/xOM+PgdVeP3B+2DGc7L537MPcY=;
 b=xnglPL57vW+46X8KzuAeN3MtHJx7ljxB1qbutSlLO0mTuwP3RDIXQSlHqSyBvvyf9j
 Md6pjtxbTnyBnGHyFIrjrwO2Z3i9S9uvAAXuVHVcYYVdOCr5GijgLG0PZdgzTZqoT2KX
 fdeFzb7yrCzE8+zMiGvB8zd4gFuExVfX3Q4x/e5HgPpCq544dWmJCO3fOb/r6sMxapI9
 bxCjg2vJZ3rSLLfI4PC9JmZfZ7wzyPwTtbpA8tGlpEvduqWeYpOu4AlAEOb09HzErUfx
 ZdtRVx44dEyuvrmCHYvNo2dA+lvjocTpeS0OmTrKWBkz5/WyhoKS81XQoBoOoJLB53ry
 H9SA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Vincent Donnefort <Vincent.Donnefort@arm.com>,
 Chenbo Feng <fengc@google.com>, Alistair Strachan <astrachan@google.com>,
 Liam Mark <lmark@codeaurora.org>, Christoph Hellwig <hch@infradead.org>,
 dri-devel@lists.freedesktop.org, "Andrew F . Davis" <afd@ti.com>,
 Hridya Valsaraju <hridya@google.com>, Sudipto Paul <Sudipto.Paul@arm.com>,
 Pratik Patel <pratikp@codeaurora.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIHZlcnkgdHJpdmlhbCBhbGxvY2F0aW9uIGFuZCBpbXBvcnQgdGVzdCBmb3IgZG1hLWhlYXBz
LAp1dGlsaXppbmcgdGhlIHZnZW0gZHJpdmVyIGFzIGEgdGVzdCBpbXBvcnRlci4KCkEgZ29vZCBj
aHVuayBvZiB0aGlzIGNvZGUgdGFrZW4gZnJvbToKICB0b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9h
bmRyb2lkL2lvbi9pb25tYXBfdGVzdC5jCiAgT3JpZ2luYWxseSBieSBMYXVyYSBBYmJvdHQgPGxh
YmJvdHRAcmVkaGF0LmNvbT4KCkNjOiBCZW5qYW1pbiBHYWlnbmFyZCA8YmVuamFtaW4uZ2FpZ25h
cmRAbGluYXJvLm9yZz4KQ2M6IFN1bWl0IFNlbXdhbCA8c3VtaXQuc2Vtd2FsQGxpbmFyby5vcmc+
CkNjOiBMaWFtIE1hcmsgPGxtYXJrQGNvZGVhdXJvcmEub3JnPgpDYzogUHJhdGlrIFBhdGVsIDxw
cmF0aWtwQGNvZGVhdXJvcmEub3JnPgpDYzogQnJpYW4gU3RhcmtleSA8QnJpYW4uU3RhcmtleUBh
cm0uY29tPgpDYzogVmluY2VudCBEb25uZWZvcnQgPFZpbmNlbnQuRG9ubmVmb3J0QGFybS5jb20+
CkNjOiBTdWRpcHRvIFBhdWwgPFN1ZGlwdG8uUGF1bEBhcm0uY29tPgpDYzogQW5kcmV3IEYuIERh
dmlzIDxhZmRAdGkuY29tPgpDYzogQ2hyaXN0b3BoIEhlbGx3aWcgPGhjaEBpbmZyYWRlYWQub3Jn
PgpDYzogQ2hlbmJvIEZlbmcgPGZlbmdjQGdvb2dsZS5jb20+CkNjOiBBbGlzdGFpciBTdHJhY2hh
biA8YXN0cmFjaGFuQGdvb2dsZS5jb20+CkNjOiBIcmlkeWEgVmFsc2FyYWp1IDxocmlkeWFAZ29v
Z2xlLmNvbT4KQ2M6IGRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKUmV2aWV3ZWQtYnk6
IEJlbmphbWluIEdhaWduYXJkIDxiZW5qYW1pbi5nYWlnbmFyZEBsaW5hcm8ub3JnPgpTaWduZWQt
b2ZmLWJ5OiBKb2huIFN0dWx0eiA8am9obi5zdHVsdHpAbGluYXJvLm9yZz4KLS0tCnYyOgoqIFN3
aXRjaGVkIHRvIHVzZSByZXdvcmtlZCBkbWEtaGVhcCBhcGlzCnYzOgoqIEFkZCBzaW1wbGUgbW1h
cAoqIFV0aWxpemUgZG1hLWJ1ZiB0ZXN0ZGV2IHRvIHRlc3QgaW1wb3J0aW5nCnY0OgoqIFJld29y
ayB0byB1c2UgdmdlbQoqIFBhc3MgaW4gZmRfZmxhZ3MgdG8gbWF0Y2ggaW50ZXJmYWNlIGNoYW5n
ZXMKKiBTa2lwIC4gYW5kIC4uIGRpcnMKdjY6CiogTnVtYmVyIG9mIHN0eWxlL2NsZWFudXBzIHN1
Z2dlc3RlZCBieSBCcmlhbgp2NzoKKiBXaGl0ZXNwYWNlIGZpeHVwIGZvciBjaGVja3BhdGNoCnY4
OgoqIE1vcmUgY2hlY2twYXRjaCB3aGl0ZXNwYWNlIGZpeHVwcwotLS0KIHRvb2xzL3Rlc3Rpbmcv
c2VsZnRlc3RzL2RtYWJ1Zi1oZWFwcy9NYWtlZmlsZSB8ICAgOSArCiAuLi4vc2VsZnRlc3RzL2Rt
YWJ1Zi1oZWFwcy9kbWFidWYtaGVhcC5jICAgICAgfCAyMzAgKysrKysrKysrKysrKysrKysrCiAy
IGZpbGVzIGNoYW5nZWQsIDIzOSBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgdG9v
bHMvdGVzdGluZy9zZWxmdGVzdHMvZG1hYnVmLWhlYXBzL01ha2VmaWxlCiBjcmVhdGUgbW9kZSAx
MDA2NDQgdG9vbHMvdGVzdGluZy9zZWxmdGVzdHMvZG1hYnVmLWhlYXBzL2RtYWJ1Zi1oZWFwLmMK
CmRpZmYgLS1naXQgYS90b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9kbWFidWYtaGVhcHMvTWFrZWZp
bGUgYi90b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9kbWFidWYtaGVhcHMvTWFrZWZpbGUKbmV3IGZp
bGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi44YzRjMzZlMjk3MmQKLS0tIC9kZXYv
bnVsbAorKysgYi90b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9kbWFidWYtaGVhcHMvTWFrZWZpbGUK
QEAgLTAsMCArMSw5IEBACisjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCitDRkxB
R1MgKz0gLXN0YXRpYyAtTzMgLVdsLC1uby1hcy1uZWVkZWQgLVdhbGwKKyNMRExJQlMgKz0gLWxy
dCAtbHB0aHJlYWQgLWxtCisKKyMgdGhlc2UgYXJlIGFsbCAic2FmZSIgdGVzdHMgdGhhdCBkb24n
dCBtb2RpZnkKKyMgc3lzdGVtIHRpbWUgb3IgcmVxdWlyZSBlc2NhbGF0ZWQgcHJpdmlsZWdlcwor
VEVTVF9HRU5fUFJPR1MgPSBkbWFidWYtaGVhcAorCitpbmNsdWRlIC4uL2xpYi5tawpkaWZmIC0t
Z2l0IGEvdG9vbHMvdGVzdGluZy9zZWxmdGVzdHMvZG1hYnVmLWhlYXBzL2RtYWJ1Zi1oZWFwLmMg
Yi90b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9kbWFidWYtaGVhcHMvZG1hYnVmLWhlYXAuYwpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmU0MzlkNmNmM2Q4MQotLS0gL2Rl
di9udWxsCisrKyBiL3Rvb2xzL3Rlc3Rpbmcvc2VsZnRlc3RzL2RtYWJ1Zi1oZWFwcy9kbWFidWYt
aGVhcC5jCkBAIC0wLDAgKzEsMjMwIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BM
LTIuMAorCisjaW5jbHVkZSA8ZGlyZW50Lmg+CisjaW5jbHVkZSA8ZXJybm8uaD4KKyNpbmNsdWRl
IDxmY250bC5oPgorI2luY2x1ZGUgPHN0ZGlvLmg+CisjaW5jbHVkZSA8c3RkbGliLmg+CisjaW5j
bHVkZSA8c3RkaW50Lmg+CisjaW5jbHVkZSA8c3RyaW5nLmg+CisjaW5jbHVkZSA8dW5pc3RkLmg+
CisjaW5jbHVkZSA8c3lzL2lvY3RsLmg+CisjaW5jbHVkZSA8c3lzL21tYW4uaD4KKyNpbmNsdWRl
IDxzeXMvdHlwZXMuaD4KKworI2luY2x1ZGUgPGxpbnV4L2RtYS1idWYuaD4KKyNpbmNsdWRlIDxk
cm0vZHJtLmg+CisKKyNpbmNsdWRlICIuLi8uLi8uLi8uLi9pbmNsdWRlL3VhcGkvbGludXgvZG1h
LWhlYXAuaCIKKworI2RlZmluZSBERVZQQVRIICIvZGV2L2RtYV9oZWFwIgorCitzdGF0aWMgaW50
IGNoZWNrX3ZnZW0oaW50IGZkKQoreworCWRybV92ZXJzaW9uX3QgdmVyc2lvbiA9IHsgMCB9Owor
CWNoYXIgbmFtZVs1XTsKKwlpbnQgcmV0OworCisJdmVyc2lvbi5uYW1lX2xlbiA9IDQ7CisJdmVy
c2lvbi5uYW1lID0gbmFtZTsKKworCXJldCA9IGlvY3RsKGZkLCBEUk1fSU9DVExfVkVSU0lPTiwg
JnZlcnNpb24pOworCWlmIChyZXQpCisJCXJldHVybiAwOworCisJcmV0dXJuICFzdHJjbXAobmFt
ZSwgInZnZW0iKTsKK30KKworc3RhdGljIGludCBvcGVuX3ZnZW0odm9pZCkKK3sKKwlpbnQgaSwg
ZmQ7CisJY29uc3QgY2hhciAqZHJtc3RyID0gIi9kZXYvZHJpL2NhcmQiOworCisJZmQgPSAtMTsK
Kwlmb3IgKGkgPSAwOyBpIDwgMTY7IGkrKykgeworCQljaGFyIG5hbWVbODBdOworCisJCXNwcmlu
dGYobmFtZSwgIiVzJXUiLCBkcm1zdHIsIGkpOworCisJCWZkID0gb3BlbihuYW1lLCBPX1JEV1Ip
OworCQlpZiAoZmQgPCAwKQorCQkJY29udGludWU7CisKKwkJaWYgKCFjaGVja192Z2VtKGZkKSkg
eworCQkJY2xvc2UoZmQpOworCQkJY29udGludWU7CisJCX0gZWxzZSB7CisJCQlicmVhazsKKwkJ
fQorCX0KKwlyZXR1cm4gZmQ7Cit9CisKK3N0YXRpYyBpbnQgaW1wb3J0X3ZnZW1fZmQoaW50IHZn
ZW1fZmQsIGludCBkbWFfYnVmX2ZkLCB1aW50MzJfdCAqaGFuZGxlKQoreworCXN0cnVjdCBkcm1f
cHJpbWVfaGFuZGxlIGltcG9ydF9oYW5kbGUgPSB7CisJCS5mZCA9IGRtYV9idWZfZmQsCisJCS5m
bGFncyA9IDAsCisJCS5oYW5kbGUgPSAwLAorCSB9OworCWludCByZXQ7CisKKwlyZXQgPSBpb2N0
bCh2Z2VtX2ZkLCBEUk1fSU9DVExfUFJJTUVfRkRfVE9fSEFORExFLCAmaW1wb3J0X2hhbmRsZSk7
CisJaWYgKHJldCA9PSAwKQorCQkqaGFuZGxlID0gaW1wb3J0X2hhbmRsZS5oYW5kbGU7CisJcmV0
dXJuIHJldDsKK30KKworc3RhdGljIHZvaWQgY2xvc2VfaGFuZGxlKGludCB2Z2VtX2ZkLCB1aW50
MzJfdCBoYW5kbGUpCit7CisJc3RydWN0IGRybV9nZW1fY2xvc2UgY2xvc2UgPSB7CisJCS5oYW5k
bGUgPSBoYW5kbGUsCisJfTsKKworCWlvY3RsKHZnZW1fZmQsIERSTV9JT0NUTF9HRU1fQ0xPU0Us
ICZjbG9zZSk7Cit9CisKK3N0YXRpYyBpbnQgZG1hYnVmX2hlYXBfb3BlbihjaGFyICpuYW1lKQor
eworCWludCByZXQsIGZkOworCWNoYXIgYnVmWzI1Nl07CisKKwlyZXQgPSBzcHJpbnRmKGJ1Ziwg
IiVzLyVzIiwgREVWUEFUSCwgbmFtZSk7CisJaWYgKHJldCA8IDApIHsKKwkJcHJpbnRmKCJzcHJp
bnRmIGZhaWxlZCFcbiIpOworCQlyZXR1cm4gcmV0OworCX0KKworCWZkID0gb3BlbihidWYsIE9f
UkRXUik7CisJaWYgKGZkIDwgMCkKKwkJcHJpbnRmKCJvcGVuICVzIGZhaWxlZCFcbiIsIGJ1Zik7
CisJcmV0dXJuIGZkOworfQorCitzdGF0aWMgaW50IGRtYWJ1Zl9oZWFwX2FsbG9jKGludCBmZCwg
c2l6ZV90IGxlbiwgdW5zaWduZWQgaW50IGZsYWdzLAorCQkJICAgICBpbnQgKmRtYWJ1Zl9mZCkK
K3sKKwlzdHJ1Y3QgZG1hX2hlYXBfYWxsb2NhdGlvbl9kYXRhIGRhdGEgPSB7CisJCS5sZW4gPSBs
ZW4sCisJCS5mZF9mbGFncyA9IE9fUkRXUiB8IE9fQ0xPRVhFQywKKwkJLmhlYXBfZmxhZ3MgPSBm
bGFncywKKwl9OworCWludCByZXQ7CisKKwlpZiAoIWRtYWJ1Zl9mZCkKKwkJcmV0dXJuIC1FSU5W
QUw7CisKKwlyZXQgPSBpb2N0bChmZCwgRE1BX0hFQVBfSU9DX0FMTE9DLCAmZGF0YSk7CisJaWYg
KHJldCA8IDApCisJCXJldHVybiByZXQ7CisJKmRtYWJ1Zl9mZCA9IChpbnQpZGF0YS5mZDsKKwly
ZXR1cm4gcmV0OworfQorCitzdGF0aWMgdm9pZCBkbWFidWZfc3luYyhpbnQgZmQsIGludCBzdGFy
dF9zdG9wKQoreworCXN0cnVjdCBkbWFfYnVmX3N5bmMgc3luYyA9IHsKKwkJLmZsYWdzID0gc3Rh
cnRfc3RvcCB8IERNQV9CVUZfU1lOQ19SVywKKwl9OworCWludCByZXQ7CisKKwlyZXQgPSBpb2N0
bChmZCwgRE1BX0JVRl9JT0NUTF9TWU5DLCAmc3luYyk7CisJaWYgKHJldCkKKwkJcHJpbnRmKCJz
eW5jIGZhaWxlZCAlZFxuIiwgZXJybm8pOworfQorCisjZGVmaW5lIE9ORV9NRUcgKDEwMjQgKiAx
MDI0KQorCitzdGF0aWMgdm9pZCBkb190ZXN0KGNoYXIgKmhlYXBfbmFtZSkKK3sKKwlpbnQgaGVh
cF9mZCA9IC0xLCBkbWFidWZfZmQgPSAtMSwgaW1wb3J0ZXJfZmQgPSAtMTsKKwl1aW50MzJfdCBo
YW5kbGUgPSAwOworCXZvaWQgKnAgPSBOVUxMOworCWludCByZXQ7CisKKwlwcmludGYoIlRlc3Rp
bmcgaGVhcDogJXNcbiIsIGhlYXBfbmFtZSk7CisKKwloZWFwX2ZkID0gZG1hYnVmX2hlYXBfb3Bl
bihoZWFwX25hbWUpOworCWlmIChoZWFwX2ZkIDwgMCkKKwkJcmV0dXJuOworCisJcHJpbnRmKCJB
bGxvY2F0aW5nIDEgTUVHXG4iKTsKKwlyZXQgPSBkbWFidWZfaGVhcF9hbGxvYyhoZWFwX2ZkLCBP
TkVfTUVHLCAwLCAmZG1hYnVmX2ZkKTsKKwlpZiAocmV0KSB7CisJCXByaW50ZigiQWxsb2NhdGlv
biBGYWlsZWQhXG4iKTsKKwkJZ290byBvdXQ7CisJfQorCS8qIG1tYXAgYW5kIHdyaXRlIGEgc2lt
cGxlIHBhdHRlcm4gKi8KKwlwID0gbW1hcChOVUxMLAorCQkgT05FX01FRywKKwkJIFBST1RfUkVB
RCB8IFBST1RfV1JJVEUsCisJCSBNQVBfU0hBUkVELAorCQkgZG1hYnVmX2ZkLAorCQkgMCk7CisJ
aWYgKHAgPT0gTUFQX0ZBSUxFRCkgeworCQlwcmludGYoIm1tYXAoKSBmYWlsZWQ6ICVtXG4iKTsK
KwkJZ290byBvdXQ7CisJfQorCXByaW50ZigibW1hcCBwYXNzZWRcbiIpOworCisJZG1hYnVmX3N5
bmMoZG1hYnVmX2ZkLCBETUFfQlVGX1NZTkNfU1RBUlQpOworCisJbWVtc2V0KHAsIDEsIE9ORV9N
RUcgLyAyKTsKKwltZW1zZXQoKGNoYXIgKilwICsgT05FX01FRyAvIDIsIDAsIE9ORV9NRUcgLyAy
KTsKKwlkbWFidWZfc3luYyhkbWFidWZfZmQsIERNQV9CVUZfU1lOQ19FTkQpOworCisJaW1wb3J0
ZXJfZmQgPSBvcGVuX3ZnZW0oKTsKKwlpZiAoaW1wb3J0ZXJfZmQgPCAwKSB7CisJCXJldCA9IGlt
cG9ydGVyX2ZkOworCQlwcmludGYoIkZhaWxlZCB0byBvcGVuIHZnZW1cbiIpOworCQlnb3RvIG91
dDsKKwl9CisKKwlyZXQgPSBpbXBvcnRfdmdlbV9mZChpbXBvcnRlcl9mZCwgZG1hYnVmX2ZkLCAm
aGFuZGxlKTsKKwlpZiAocmV0IDwgMCkgeworCQlwcmludGYoIkZhaWxlZCB0byBpbXBvcnQgYnVm
ZmVyXG4iKTsKKwkJZ290byBvdXQ7CisJfQorCXByaW50ZigiaW1wb3J0IHBhc3NlZFxuIik7CisK
KwlkbWFidWZfc3luYyhkbWFidWZfZmQsIERNQV9CVUZfU1lOQ19TVEFSVCk7CisJbWVtc2V0KHAs
IDB4ZmYsIE9ORV9NRUcpOworCWRtYWJ1Zl9zeW5jKGRtYWJ1Zl9mZCwgRE1BX0JVRl9TWU5DX0VO
RCk7CisJcHJpbnRmKCJzeW5jcyBwYXNzZWRcbiIpOworCisJY2xvc2VfaGFuZGxlKGltcG9ydGVy
X2ZkLCBoYW5kbGUpOworCitvdXQ6CisJaWYgKHApCisJCW11bm1hcChwLCBPTkVfTUVHKTsKKwlp
ZiAoaW1wb3J0ZXJfZmQgPj0gMCkKKwkJY2xvc2UoaW1wb3J0ZXJfZmQpOworCWlmIChkbWFidWZf
ZmQgPj0gMCkKKwkJY2xvc2UoZG1hYnVmX2ZkKTsKKwlpZiAoaGVhcF9mZCA+PSAwKQorCQljbG9z
ZShoZWFwX2ZkKTsKK30KKworaW50IG1haW4odm9pZCkKK3sKKwlESVIgKmQ7CisJc3RydWN0IGRp
cmVudCAqZGlyOworCisJZCA9IG9wZW5kaXIoREVWUEFUSCk7CisJaWYgKCFkKSB7CisJCXByaW50
ZigiTm8gJXMgZGlyZWN0b3J5P1xuIiwgREVWUEFUSCk7CisJCXJldHVybiAtMTsKKwl9CisKKwl3
aGlsZSAoKGRpciA9IHJlYWRkaXIoZCkpICE9IE5VTEwpIHsKKwkJaWYgKCFzdHJuY21wKGRpci0+
ZF9uYW1lLCAiLiIsIDIpKQorCQkJY29udGludWU7CisJCWlmICghc3RybmNtcChkaXItPmRfbmFt
ZSwgIi4uIiwgMykpCisJCQljb250aW51ZTsKKworCQlkb190ZXN0KGRpci0+ZF9uYW1lKTsKKwl9
CisJY2xvc2VkaXIoZCk7CisKKwlyZXR1cm4gMDsKK30KLS0gCjIuMTcuMQoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
