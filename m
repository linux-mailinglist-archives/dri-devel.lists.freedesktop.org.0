Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CB36C10E96B
	for <lists+dri-devel@lfdr.de>; Mon,  2 Dec 2019 12:16:13 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 320926E187;
	Mon,  2 Dec 2019 11:16:07 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 85C3A6E187
 for <dri-devel@lists.freedesktop.org>; Mon,  2 Dec 2019 11:16:04 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id CEE7AB2DF;
 Mon,  2 Dec 2019 11:16:01 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: kraxel@redhat.com, airlied@redhat.com, daniel.vetter@ffwll.ch,
 yc_chen@aspeedtech.com, sam@ravnborg.org
Subject: [PATCH v3 7/7] drm/ast: Store primary-plane format in struct
 ast_crtc_state
Date: Mon,  2 Dec 2019 12:15:57 +0100
Message-Id: <20191202111557.15176-8-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191202111557.15176-1-tzimmermann@suse.de>
References: <20191202111557.15176-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UmVhZGluZyB0aGUgcHJpbWFyeSBwbGFuZSdzIGZyYW1lYnVmZmVyIGZyb20gdGhlIENSVEMncyBh
dG9taWNfZmx1c2goKQpmdW5jdGlvbiBpcyBmcmFnaWxlIGFzIHRoZSBwbGFuZSBzdGF0ZSBvciBm
cmFtZWJ1ZmZlciBjYW4gYmUgTlVMTC4KSW5zdGVhZCwgd2UgbGV0IHRoZSBwbGFuZSdzIGF0b21p
Y19jaGVjaygpIHN0b3JlIHRoZSBmcmFtZWJ1ZmZlciBmb3JtYXQKaW4gdGhlIENSVEMgc3RhdGUu
IFRoZSBDUlRDIGFsd2F5cyByZWNlaXZlcyB0aGUgZnJhbWVidWZmZXIgZm9ybWF0IHRoYXQKaXMg
Y3VycmVudGx5IHByb2dyYW1tZWQsIG9yIE5VTEwgb2YgIG5vIG1vZGUgaGFzIGJlZW4gc2V0IHll
dC4KClNpZ25lZC1vZmYtYnk6IFRob21hcyBaaW1tZXJtYW5uIDx0emltbWVybWFubkBzdXNlLmRl
PgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X2Rydi5oICB8ICAzICsrKwogZHJpdmVycy9n
cHUvZHJtL2FzdC9hc3RfbW9kZS5jIHwgMjYgKysrKysrKysrKysrKysrKystLS0tLS0tLS0KIDIg
ZmlsZXMgY2hhbmdlZCwgMjAgaW5zZXJ0aW9ucygrKSwgOSBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9hc3Qv
YXN0X2Rydi5oCmluZGV4IDcyODgzYjVhZWZhNy4uZjVkODc4MDc3NmFlIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYXN0L2Fz
dF9kcnYuaApAQCAtMjg0LDYgKzI4NCw5IEBAIHN0cnVjdCBhc3RfdmJpb3NfbW9kZV9pbmZvIHsK
IHN0cnVjdCBhc3RfY3J0Y19zdGF0ZSB7CiAJc3RydWN0IGRybV9jcnRjX3N0YXRlIGJhc2U7CiAK
KwkvKiBMYXN0IGtub3duIGZvcm1hdCBvZiBwcmltYXJ5IHBsYW5lICovCisJY29uc3Qgc3RydWN0
IGRybV9mb3JtYXRfaW5mbyAqZm9ybWF0OworCiAJc3RydWN0IGFzdF92Ymlvc19tb2RlX2luZm8g
dmJpb3NfbW9kZV9pbmZvOwogfTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FzdC9h
c3RfbW9kZS5jIGIvZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jCmluZGV4IGU5ODU5ZTlk
OGY0OS4uYjg3OWJkNjY2ZTM1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9t
b2RlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jCkBAIC01MzUsNiArNTM1
LDcgQEAgc3RhdGljIGludCBhc3RfcHJpbWFyeV9wbGFuZV9oZWxwZXJfYXRvbWljX2NoZWNrKHN0
cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAogCQkJCQkJIHN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKnN0
YXRlKQogewogCXN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsKKwlzdHJ1Y3QgYXN0
X2NydGNfc3RhdGUgKmFzdF9jcnRjX3N0YXRlOwogCWludCByZXQ7CiAKIAlpZiAoIXN0YXRlLT5j
cnRjKQpAQCAtNTQ5LDYgKzU1MCwxMyBAQCBzdGF0aWMgaW50IGFzdF9wcmltYXJ5X3BsYW5lX2hl
bHBlcl9hdG9taWNfY2hlY2soc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCiAJaWYgKHJldCkKIAkJ
cmV0dXJuIHJldDsKIAorCWlmICghc3RhdGUtPnZpc2libGUpCisJCXJldHVybiAwOworCisJYXN0
X2NydGNfc3RhdGUgPSB0b19hc3RfY3J0Y19zdGF0ZShjcnRjX3N0YXRlKTsKKworCWFzdF9jcnRj
X3N0YXRlLT5mb3JtYXQgPSBzdGF0ZS0+ZmItPmZvcm1hdDsKKwogCXJldHVybiAwOwogfQogCkBA
IC03ODMsOCArNzkxLDggQEAgc3RhdGljIGludCBhc3RfY3J0Y19oZWxwZXJfYXRvbWljX2NoZWNr
KHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAkJCQkJc3RydWN0IGRybV9jcnRjX3N0YXRlICpzdGF0
ZSkKIHsKIAlzdHJ1Y3QgYXN0X3ByaXZhdGUgKmFzdCA9IGNydGMtPmRldi0+ZGV2X3ByaXZhdGU7
Ci0Jc3RydWN0IGRybV9wbGFuZV9zdGF0ZSAqcGxhbmVfc3RhdGU7CiAJc3RydWN0IGFzdF9jcnRj
X3N0YXRlICphc3Rfc3RhdGU7CisJY29uc3Qgc3RydWN0IGRybV9mb3JtYXRfaW5mbyAqZm9ybWF0
OwogCWJvb2wgc3VjYzsKIAogCWlmIChhc3QtPmNoaXAgPT0gQVNUMTE4MCkgewpAQCAtNzkzLDEy
ICs4MDEsMTIgQEAgc3RhdGljIGludCBhc3RfY3J0Y19oZWxwZXJfYXRvbWljX2NoZWNrKHN0cnVj
dCBkcm1fY3J0YyAqY3J0YywKIAl9CiAKIAlhc3Rfc3RhdGUgPSB0b19hc3RfY3J0Y19zdGF0ZShz
dGF0ZSk7Ci0JcGxhbmVfc3RhdGUgPSBjcnRjLT5wcmltYXJ5LT5zdGF0ZTsKIAotCWlmICghcGxh
bmVfc3RhdGUgfHwgIXBsYW5lX3N0YXRlLT5mYikKKwlmb3JtYXQgPSBhc3Rfc3RhdGUtPmZvcm1h
dDsKKwlpZiAoIWZvcm1hdCkKIAkJcmV0dXJuIDA7CiAKLQlzdWNjID0gYXN0X2dldF92Ymlvc19t
b2RlX2luZm8ocGxhbmVfc3RhdGUtPmZiLT5mb3JtYXQsICZzdGF0ZS0+bW9kZSwKKwlzdWNjID0g
YXN0X2dldF92Ymlvc19tb2RlX2luZm8oZm9ybWF0LCAmc3RhdGUtPm1vZGUsCiAJCQkJICAgICAg
ICZzdGF0ZS0+YWRqdXN0ZWRfbW9kZSwKIAkJCQkgICAgICAgJmFzdF9zdGF0ZS0+dmJpb3NfbW9k
ZV9pbmZvKTsKIAlpZiAoIXN1Y2MpCkBAIC04MjAsNyArODI4LDYgQEAgc3RhdGljIHZvaWQgYXN0
X2NydGNfaGVscGVyX2F0b21pY19mbHVzaChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCiB7CiAJc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtPmRldjsKIAlzdHJ1Y3QgYXN0X3ByaXZhdGUgKmFz
dCA9IGRldi0+ZGV2X3ByaXZhdGU7Ci0JY29uc3Qgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIg
PSBjcnRjLT5wcmltYXJ5LT5zdGF0ZS0+ZmI7CiAJc3RydWN0IGFzdF9jcnRjX3N0YXRlICphc3Rf
c3RhdGU7CiAJY29uc3Qgc3RydWN0IGRybV9mb3JtYXRfaW5mbyAqZm9ybWF0OwogCXN0cnVjdCBh
c3RfdmJpb3NfbW9kZV9pbmZvICp2Ymlvc19tb2RlX2luZm87CkBAIC04MjgsMTIgKzgzNSwxMiBA
QCBzdGF0aWMgdm9pZCBhc3RfY3J0Y19oZWxwZXJfYXRvbWljX2ZsdXNoKHN0cnVjdCBkcm1fY3J0
YyAqY3J0YywKIAogCWNydGMtPnN0YXRlLT5ub192YmxhbmsgPSB0cnVlOwogCi0JaWYgKCFmYikK
LQkJcmV0dXJuOwotCiAJYXN0X3N0YXRlID0gdG9fYXN0X2NydGNfc3RhdGUoY3J0Yy0+c3RhdGUp
OwogCi0JZm9ybWF0ID0gZmItPmZvcm1hdDsKKwlmb3JtYXQgPSBhc3Rfc3RhdGUtPmZvcm1hdDsK
KwlpZiAoIWZvcm1hdCkKKwkJcmV0dXJuOworCiAJdmJpb3NfbW9kZV9pbmZvID0gJmFzdF9zdGF0
ZS0+dmJpb3NfbW9kZV9pbmZvOwogCiAJYXN0X3NldF9jb2xvcl9yZWcoYXN0LCBmb3JtYXQpOwpA
QCAtODk2LDYgKzkwMyw3IEBAIGFzdF9jcnRjX2F0b21pY19kdXBsaWNhdGVfc3RhdGUoc3RydWN0
IGRybV9jcnRjICpjcnRjKQogCiAJYXN0X3N0YXRlID0gdG9fYXN0X2NydGNfc3RhdGUoY3J0Yy0+
c3RhdGUpOwogCisJbmV3X2FzdF9zdGF0ZS0+Zm9ybWF0ID0gYXN0X3N0YXRlLT5mb3JtYXQ7CiAJ
bWVtY3B5KCZuZXdfYXN0X3N0YXRlLT52Ymlvc19tb2RlX2luZm8sICZhc3Rfc3RhdGUtPnZiaW9z
X21vZGVfaW5mbywKIAkgICAgICAgc2l6ZW9mKG5ld19hc3Rfc3RhdGUtPnZiaW9zX21vZGVfaW5m
bykpOwogCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2Ry
aS1kZXZlbA==
