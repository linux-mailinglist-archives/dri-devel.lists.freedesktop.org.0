Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EDDDDCB0B2
	for <lists+dri-devel@lfdr.de>; Thu,  3 Oct 2019 23:01:24 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E7C3C6EA3C;
	Thu,  3 Oct 2019 21:01:20 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 126E46E177;
 Thu,  3 Oct 2019 21:01:18 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18715182-1500050 
 for multiple; Thu, 03 Oct 2019 22:01:04 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: intel-gfx@lists.freedesktop.org
Subject: [PATCH 4/5] drm/mm: Convert drm_mm_node booleans to bitops
Date: Thu,  3 Oct 2019 22:00:59 +0100
Message-Id: <20191003210100.22250-4-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191003210100.22250-1-chris@chris-wilson.co.uk>
References: <20191003210100.22250-1-chris@chris-wilson.co.uk>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org, tvrtko.ursulin@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QSBzdHJhaWdodGZvcndhcmQgY29udmVyc2lvbiBvZiBhc3NpZ25tZW50IGFuZCBjaGVja2luZyBv
ZiB0aGUgYm9vbGVhbgpzdGF0ZSBmbGFncyAoYWxsb2NhdGVkLCBzY2FubmVkKSBpbnRvIG5vbi1h
dG9taWMgYml0b3BzLiBUaGUgY2FsbGVyCnJlbWFpbnMgcmVzcG9uc2libGUgZm9yIGFsbCBsb2Nr
aW5nIGFyb3VuZCB0aGUgZHJtX21tIGFuZCBpdHMgbm9kZXMuCgpTaWduZWQtb2ZmLWJ5OiBDaHJp
cyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KLS0tCiBkcml2ZXJzL2dwdS9kcm0v
ZHJtX21tLmMgICAgICAgICAgICAgICAgICAgICAgIHwgMTggKysrKysrKysrLS0tLS0tLS0tCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jIHwgIDIgKy0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMgICAgICAgICAgICAgICAgfCAgNCArKy0tCiBp
bmNsdWRlL2RybS9kcm1fbW0uaCAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDcgKysrKy0t
LQogNCBmaWxlcyBjaGFuZ2VkLCAxNiBpbnNlcnRpb25zKCspLCAxNSBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX21tLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJt
X21tLmMKaW5kZXggOTkzMTJiZGM2MjczLi5hOWNhYjVlNTM3MzEgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9kcm1fbW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX21tLmMKQEAgLTQy
Niw3ICs0MjYsNyBAQCBpbnQgZHJtX21tX3Jlc2VydmVfbm9kZShzdHJ1Y3QgZHJtX21tICptbSwg
c3RydWN0IGRybV9tbV9ub2RlICpub2RlKQogCiAJbGlzdF9hZGQoJm5vZGUtPm5vZGVfbGlzdCwg
JmhvbGUtPm5vZGVfbGlzdCk7CiAJZHJtX21tX2ludGVydmFsX3RyZWVfYWRkX25vZGUoaG9sZSwg
bm9kZSk7Ci0Jbm9kZS0+YWxsb2NhdGVkID0gdHJ1ZTsKKwlfX3NldF9iaXQoRFJNX01NX05PREVf
QUxMT0NBVEVEX0JJVCwgJm5vZGUtPmZsYWdzKTsKIAlub2RlLT5ob2xlX3NpemUgPSAwOwogCiAJ
cm1faG9sZShob2xlKTsKQEAgLTU0NSw3ICs1NDUsNyBAQCBpbnQgZHJtX21tX2luc2VydF9ub2Rl
X2luX3JhbmdlKHN0cnVjdCBkcm1fbW0gKiBjb25zdCBtbSwKIAogCQlsaXN0X2FkZCgmbm9kZS0+
bm9kZV9saXN0LCAmaG9sZS0+bm9kZV9saXN0KTsKIAkJZHJtX21tX2ludGVydmFsX3RyZWVfYWRk
X25vZGUoaG9sZSwgbm9kZSk7Ci0JCW5vZGUtPmFsbG9jYXRlZCA9IHRydWU7CisJCV9fc2V0X2Jp
dChEUk1fTU1fTk9ERV9BTExPQ0FURURfQklULCAmbm9kZS0+ZmxhZ3MpOwogCiAJCXJtX2hvbGUo
aG9sZSk7CiAJCWlmIChhZGpfc3RhcnQgPiBob2xlX3N0YXJ0KQpAQCAtNTYzLDcgKzU2Myw3IEBA
IEVYUE9SVF9TWU1CT0woZHJtX21tX2luc2VydF9ub2RlX2luX3JhbmdlKTsKIAogc3RhdGljIGlu
bGluZSBib29sIGRybV9tbV9ub2RlX3NjYW5uZWRfYmxvY2soY29uc3Qgc3RydWN0IGRybV9tbV9u
b2RlICpub2RlKQogewotCXJldHVybiBub2RlLT5zY2FubmVkX2Jsb2NrOworCXJldHVybiB0ZXN0
X2JpdChEUk1fTU1fTk9ERV9TQ0FOTkVEX0JJVCwgJm5vZGUtPmZsYWdzKTsKIH0KIAogLyoqCkBA
IC01ODksNyArNTg5LDcgQEAgdm9pZCBkcm1fbW1fcmVtb3ZlX25vZGUoc3RydWN0IGRybV9tbV9u
b2RlICpub2RlKQogCiAJZHJtX21tX2ludGVydmFsX3RyZWVfcmVtb3ZlKG5vZGUsICZtbS0+aW50
ZXJ2YWxfdHJlZSk7CiAJbGlzdF9kZWwoJm5vZGUtPm5vZGVfbGlzdCk7Ci0Jbm9kZS0+YWxsb2Nh
dGVkID0gZmFsc2U7CisJX19jbGVhcl9iaXQoRFJNX01NX05PREVfQUxMT0NBVEVEX0JJVCwgJm5v
ZGUtPmZsYWdzKTsKIAogCWlmIChkcm1fbW1faG9sZV9mb2xsb3dzKHByZXZfbm9kZSkpCiAJCXJt
X2hvbGUocHJldl9ub2RlKTsKQEAgLTYyNyw4ICs2MjcsOCBAQCB2b2lkIGRybV9tbV9yZXBsYWNl
X25vZGUoc3RydWN0IGRybV9tbV9ub2RlICpvbGQsIHN0cnVjdCBkcm1fbW1fbm9kZSAqbmV3KQog
CQkJCSZtbS0+aG9sZXNfYWRkcik7CiAJfQogCi0Jb2xkLT5hbGxvY2F0ZWQgPSBmYWxzZTsKLQlu
ZXctPmFsbG9jYXRlZCA9IHRydWU7CisJX19jbGVhcl9iaXQoRFJNX01NX05PREVfQUxMT0NBVEVE
X0JJVCwgJm9sZC0+ZmxhZ3MpOworCV9fc2V0X2JpdChEUk1fTU1fTk9ERV9BTExPQ0FURURfQklU
LCAmbmV3LT5mbGFncyk7CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9tbV9yZXBsYWNlX25vZGUpOwog
CkBAIC03MzgsNyArNzM4LDcgQEAgYm9vbCBkcm1fbW1fc2Nhbl9hZGRfYmxvY2soc3RydWN0IGRy
bV9tbV9zY2FuICpzY2FuLAogCURSTV9NTV9CVUdfT04obm9kZS0+bW0gIT0gbW0pOwogCURSTV9N
TV9CVUdfT04oIWRybV9tbV9ub2RlX2FsbG9jYXRlZChub2RlKSk7CiAJRFJNX01NX0JVR19PTihk
cm1fbW1fbm9kZV9zY2FubmVkX2Jsb2NrKG5vZGUpKTsKLQlub2RlLT5zY2FubmVkX2Jsb2NrID0g
dHJ1ZTsKKwlfX3NldF9iaXQoRFJNX01NX05PREVfU0NBTk5FRF9CSVQsICZub2RlLT5mbGFncyk7
CiAJbW0tPnNjYW5fYWN0aXZlKys7CiAKIAkvKiBSZW1vdmUgdGhpcyBibG9jayBmcm9tIHRoZSBu
b2RlX2xpc3Qgc28gdGhhdCB3ZSBlbmxhcmdlIHRoZSBob2xlCkBAIC04MjQsNyArODI0LDcgQEAg
Ym9vbCBkcm1fbW1fc2Nhbl9yZW1vdmVfYmxvY2soc3RydWN0IGRybV9tbV9zY2FuICpzY2FuLAog
CiAJRFJNX01NX0JVR19PTihub2RlLT5tbSAhPSBzY2FuLT5tbSk7CiAJRFJNX01NX0JVR19PTigh
ZHJtX21tX25vZGVfc2Nhbm5lZF9ibG9jayhub2RlKSk7Ci0Jbm9kZS0+c2Nhbm5lZF9ibG9jayA9
IGZhbHNlOworCV9fY2xlYXJfYml0KERSTV9NTV9OT0RFX1NDQU5ORURfQklULCAmbm9kZS0+Zmxh
Z3MpOwogCiAJRFJNX01NX0JVR19PTighbm9kZS0+bW0tPnNjYW5fYWN0aXZlKTsKIAlub2RlLT5t
bS0+c2Nhbl9hY3RpdmUtLTsKQEAgLTkyMiw3ICs5MjIsNyBAQCB2b2lkIGRybV9tbV9pbml0KHN0
cnVjdCBkcm1fbW0gKm1tLCB1NjQgc3RhcnQsIHU2NCBzaXplKQogCiAJLyogQ2xldmVyIHRyaWNr
IHRvIGF2b2lkIGEgc3BlY2lhbCBjYXNlIGluIHRoZSBmcmVlIGhvbGUgdHJhY2tpbmcuICovCiAJ
SU5JVF9MSVNUX0hFQUQoJm1tLT5oZWFkX25vZGUubm9kZV9saXN0KTsKLQltbS0+aGVhZF9ub2Rl
LmFsbG9jYXRlZCA9IGZhbHNlOworCW1tLT5oZWFkX25vZGUuZmxhZ3MgPSAwOwogCW1tLT5oZWFk
X25vZGUubW0gPSBtbTsKIAltbS0+aGVhZF9ub2RlLnN0YXJ0ID0gc3RhcnQgKyBzaXplOwogCW1t
LT5oZWFkX25vZGUuc2l6ZSA9IC1zaXplOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9leGVjYnVmZmVyLmMKaW5kZXggMjBkOGE2Mjk3OTg1Li5jMDQ5MTk5YTFkZjUgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2V4ZWNidWZmZXIuYwpAQCAt
OTA2LDcgKzkwNiw3IEBAIHN0YXRpYyB2b2lkIHJlbG9jX2NhY2hlX2luaXQoc3RydWN0IHJlbG9j
X2NhY2hlICpjYWNoZSwKIAljYWNoZS0+dXNlXzY0Yml0X3JlbG9jID0gSEFTXzY0QklUX1JFTE9D
KGk5MTUpOwogCWNhY2hlLT5oYXNfZmVuY2UgPSBjYWNoZS0+Z2VuIDwgNDsKIAljYWNoZS0+bmVl
ZHNfdW5mZW5jZWQgPSBJTlRFTF9JTkZPKGk5MTUpLT51bmZlbmNlZF9uZWVkc19hbGlnbm1lbnQ7
Ci0JY2FjaGUtPm5vZGUuYWxsb2NhdGVkID0gZmFsc2U7CisJY2FjaGUtPm5vZGUuZmxhZ3MgPSAw
OwogCWNhY2hlLT5jZSA9IE5VTEw7CiAJY2FjaGUtPnJxID0gTlVMTDsKIAljYWNoZS0+cnFfc2l6
ZSA9IDA7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYwppbmRleCBmYThlMDI4YWMwYjUuLjcwNDYwNjdm
NzBjMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW0uYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCkBAIC0zNTEsNyArMzUxLDcgQEAgaTkxNV9n
ZW1fZ3R0X3ByZWFkKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJCQkJCSAgICAg
ICBQSU5fTk9FVklDVCk7CiAJaWYgKCFJU19FUlIodm1hKSkgewogCQlub2RlLnN0YXJ0ID0gaTkx
NV9nZ3R0X29mZnNldCh2bWEpOwotCQlub2RlLmFsbG9jYXRlZCA9IGZhbHNlOworCQlub2RlLmZs
YWdzID0gMDsKIAl9IGVsc2UgewogCQlyZXQgPSBpbnNlcnRfbWFwcGFibGVfbm9kZShnZ3R0LCAm
bm9kZSwgUEFHRV9TSVpFKTsKIAkJaWYgKHJldCkKQEAgLTU2MSw3ICs1NjEsNyBAQCBpOTE1X2dl
bV9ndHRfcHdyaXRlX2Zhc3Qoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKIAkJCQkJ
ICAgICAgIFBJTl9OT0VWSUNUKTsKIAlpZiAoIUlTX0VSUih2bWEpKSB7CiAJCW5vZGUuc3RhcnQg
PSBpOTE1X2dndHRfb2Zmc2V0KHZtYSk7Ci0JCW5vZGUuYWxsb2NhdGVkID0gZmFsc2U7CisJCW5v
ZGUuZmxhZ3MgPSAwOwogCX0gZWxzZSB7CiAJCXJldCA9IGluc2VydF9tYXBwYWJsZV9ub2RlKGdn
dHQsICZub2RlLCBQQUdFX1NJWkUpOwogCQlpZiAocmV0KQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9k
cm0vZHJtX21tLmggYi9pbmNsdWRlL2RybS9kcm1fbW0uaAppbmRleCAyYzNiYmI0M2M3ZDEuLmQ3
OTM5YzA1NDI1OSAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX21tLmgKKysrIGIvaW5jbHVk
ZS9kcm0vZHJtX21tLmgKQEAgLTE2OCw4ICsxNjgsOSBAQCBzdHJ1Y3QgZHJtX21tX25vZGUgewog
CXN0cnVjdCByYl9ub2RlIHJiX2hvbGVfYWRkcjsKIAl1NjQgX19zdWJ0cmVlX2xhc3Q7CiAJdTY0
IGhvbGVfc2l6ZTsKLQlib29sIGFsbG9jYXRlZCA6IDE7Ci0JYm9vbCBzY2FubmVkX2Jsb2NrIDog
MTsKKwl1bnNpZ25lZCBsb25nIGZsYWdzOworI2RlZmluZSBEUk1fTU1fTk9ERV9BTExPQ0FURURf
QklUCTAKKyNkZWZpbmUgRFJNX01NX05PREVfU0NBTk5FRF9CSVQJCTEKICNpZmRlZiBDT05GSUdf
RFJNX0RFQlVHX01NCiAJZGVwb3Rfc3RhY2tfaGFuZGxlX3Qgc3RhY2s7CiAjZW5kaWYKQEAgLTI1
Myw3ICsyNTQsNyBAQCBzdHJ1Y3QgZHJtX21tX3NjYW4gewogICovCiBzdGF0aWMgaW5saW5lIGJv
b2wgZHJtX21tX25vZGVfYWxsb2NhdGVkKGNvbnN0IHN0cnVjdCBkcm1fbW1fbm9kZSAqbm9kZSkK
IHsKLQlyZXR1cm4gbm9kZS0+YWxsb2NhdGVkOworCXJldHVybiB0ZXN0X2JpdChEUk1fTU1fTk9E
RV9BTExPQ0FURURfQklULCAmbm9kZS0+ZmxhZ3MpOwogfQogCiAvKioKLS0gCjIuMjMuMAoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1h
aWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
