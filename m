Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5E6BB79CA0
	for <lists+dri-devel@lfdr.de>; Tue, 30 Jul 2019 01:12:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 88E03890BA;
	Mon, 29 Jul 2019 23:12:23 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from hqemgate16.nvidia.com (hqemgate16.nvidia.com [216.228.121.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A45A9890BA;
 Mon, 29 Jul 2019 23:12:22 +0000 (UTC)
Received: from hqpgpgate101.nvidia.com (Not Verified[216.228.121.13]) by
 hqemgate16.nvidia.com (using TLS: TLSv1.2, DES-CBC3-SHA)
 id <B5d3f7d4d0000>; Mon, 29 Jul 2019 16:12:13 -0700
Received: from hqmail.nvidia.com ([172.20.161.6])
 by hqpgpgate101.nvidia.com (PGP Universal service);
 Mon, 29 Jul 2019 16:12:22 -0700
X-PGP-Universal: processed;
 by hqpgpgate101.nvidia.com on Mon, 29 Jul 2019 16:12:22 -0700
Received: from rcampbell-dev.nvidia.com (10.124.1.5) by HQMAIL107.nvidia.com
 (172.20.187.13) with Microsoft SMTP Server (TLS) id 15.0.1473.3; Mon, 29 Jul
 2019 23:12:17 +0000
Subject: Re: [PATCH 1/9] mm: turn migrate_vma upside down
To: Christoph Hellwig <hch@lst.de>, =?UTF-8?B?SsOpcsO0bWUgR2xpc3Nl?=
 <jglisse@redhat.com>, Jason Gunthorpe <jgg@mellanox.com>, Ben Skeggs
 <bskeggs@redhat.com>
References: <20190729142843.22320-1-hch@lst.de>
 <20190729142843.22320-2-hch@lst.de>
X-Nvconfidentiality: public
From: Ralph Campbell <rcampbell@nvidia.com>
Message-ID: <95a044c6-8bef-a647-f3c0-71dadd37b386@nvidia.com>
Date: Mon, 29 Jul 2019 16:12:17 -0700
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.0
MIME-Version: 1.0
In-Reply-To: <20190729142843.22320-2-hch@lst.de>
X-Originating-IP: [10.124.1.5]
X-ClientProxiedBy: HQMAIL105.nvidia.com (172.20.187.12) To
 HQMAIL107.nvidia.com (172.20.187.13)
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=nvidia.com; s=n1; 
 t=1564441933; bh=y4VhtL48fzxl5Y5NRytW5rwznKlY/TGqkp6rbIHbD+g=;
 h=X-PGP-Universal:Subject:To:CC:References:X-Nvconfidentiality:From:
 Message-ID:Date:User-Agent:MIME-Version:In-Reply-To:
 X-Originating-IP:X-ClientProxiedBy:Content-Type:Content-Language:
 Content-Transfer-Encoding;
 b=cmfaa8BFyh+qP+WPrv9bW3BMazQqP8OeJNh6CMy2Nylkpx3UL6z6pugKcAfYB7vVI
 Dd48lcn8Q9HpPs5NHq7awtGVP6y9sRK+fdI1Wd8UhohUGeSGRO/hTsm1KJ9pTcrPxU
 qwtX6ThbP2oJIDtoc2TMWUfiAJqFmlZzxWGPg5PzhxIIQo2iXGSWEordKZVKP8D3xD
 ZM3ZFYVUxNJBkh9U2brL8UQvdGD8KNhhDuS6a1yy3v+Tx2a1SfR50TBLUsncNzmihY
 Ite4q/ih2ieXl10oDmexW+oO9hI5pBioyWaaRXQjCEwZvctzluNULjVUvua/UX5usi
 gm++EBLkxtjww==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: nouveau@lists.freedesktop.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, Bharata B Rao <bharata@linux.ibm.com>,
 linux-mm@kvack.org, Andrew Morton <akpm@linux-foundation.org>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Ck9uIDcvMjkvMTkgNzoyOCBBTSwgQ2hyaXN0b3BoIEhlbGx3aWcgd3JvdGU6Cj4gVGhlcmUgaXNu
J3QgYW55IGdvb2QgcmVhc29uIHRvIHBhc3MgY2FsbGJhY2tzIHRvIG1pZ3JhdGVfdm1hLiAgSW5z
dGVhZAo+IHdlIGNhbiBqdXN0IGV4cG9ydCB0aGUgdGhyZWUgc3RlcHMgZG9uZSBieSB0aGlzIGZ1
bmN0aW9uIHRvIGRyaXZlcnMgYW5kCj4gbGV0IHRoZW0gc2VxdWVuY2UgdGhlIG9wZXJhdGlvbiB3
aXRob3V0IGNhbGxiYWNrcy4gIFRoaXMgcmVtb3ZlcyBhIGxvdAo+IG9mIGJvaWxlcnBsYXRlIGNv
ZGUgYXMtaXMsIGFuZCB3aWxsIGFsbG93IHRoZSBkcml2ZXJzIHRvIGRyYXN0aWNhbGx5Cj4gaW1w
cm92ZSBjb2RlIGZsb3cgYW5kIGVycm9yIGhhbmRsaW5nIGZ1cnRoZXIgb24uCj4gCj4gU2lnbmVk
LW9mZi1ieTogQ2hyaXN0b3BoIEhlbGx3aWcgPGhjaEBsc3QuZGU+CgpFeGNlcHQgZm9yIGEgZmV3
IHdoaXRlIHNwYWNlIGVycm9ycyAoPHNwYWNlPjx0YWI+IGFuZCA8c3BhY2U+JCksCmxvb2tzIE9L
LgoKUmV2aWV3ZWQtYnk6IFJhbHBoIENhbXBiZWxsIDxyY2FtcGJlbGxAbnZpZGlhLmNvbT4KCj4g
LS0tCj4gICBEb2N1bWVudGF0aW9uL3ZtL2htbS5yc3QgICAgICAgICAgICAgICB8ICA1NSArLS0t
LS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZG1lbS5jIHwgMTIyICsrKysr
KystLS0tLS0KPiAgIGluY2x1ZGUvbGludXgvbWlncmF0ZS5oICAgICAgICAgICAgICAgIHwgMTE4
ICsrLS0tLS0tLS0tLQo+ICAgbW0vbWlncmF0ZS5jICAgICAgICAgICAgICAgICAgICAgICAgICAg
fCAyNDIgKysrKysrKysrKystLS0tLS0tLS0tLS0tLQo+ICAgNCBmaWxlcyBjaGFuZ2VkLCAxOTMg
aW5zZXJ0aW9ucygrKSwgMzQ0IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9Eb2N1bWVu
dGF0aW9uL3ZtL2htbS5yc3QgYi9Eb2N1bWVudGF0aW9uL3ZtL2htbS5yc3QKPiBpbmRleCBkZGNi
NWNhOGIyOTYuLmFkODgwZTM5OTZiMSAxMDA2NDQKPiAtLS0gYS9Eb2N1bWVudGF0aW9uL3ZtL2ht
bS5yc3QKPiArKysgYi9Eb2N1bWVudGF0aW9uL3ZtL2htbS5yc3QKPiBAQCAtMzM5LDU4ICszMzks
OSBAQCBNaWdyYXRpb24gdG8gYW5kIGZyb20gZGV2aWNlIG1lbW9yeQo+ICAgPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0KPiAgIAo+ICAgQmVjYXVzZSB0aGUgQ1BVIGNhbm5vdCBh
Y2Nlc3MgZGV2aWNlIG1lbW9yeSwgbWlncmF0aW9uIG11c3QgdXNlIHRoZSBkZXZpY2UgRE1BCj4g
LWVuZ2luZSB0byBwZXJmb3JtIGNvcHkgZnJvbSBhbmQgdG8gZGV2aWNlIG1lbW9yeS4gRm9yIHRo
aXMgd2UgbmVlZCBhIG5ldwo+IC1taWdyYXRpb24gaGVscGVyOjoKPiAtCj4gLSBpbnQgbWlncmF0
ZV92bWEoY29uc3Qgc3RydWN0IG1pZ3JhdGVfdm1hX29wcyAqb3BzLAo+IC0gICAgICAgICAgICAg
ICAgIHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hLAo+IC0gICAgICAgICAgICAgICAgIHVuc2ln
bmVkIGxvbmcgbWVudHJpZXMsCj4gLSAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBzdGFy
dCwKPiAtICAgICAgICAgICAgICAgICB1bnNpZ25lZCBsb25nIGVuZCwKPiAtICAgICAgICAgICAg
ICAgICB1bnNpZ25lZCBsb25nICpzcmMsCj4gLSAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9u
ZyAqZHN0LAo+IC0gICAgICAgICAgICAgICAgIHZvaWQgKnByaXZhdGUpOwo+IC0KPiAtVW5saWtl
IG90aGVyIG1pZ3JhdGlvbiBmdW5jdGlvbnMgaXQgd29ya3Mgb24gYSByYW5nZSBvZiB2aXJ0dWFs
IGFkZHJlc3MsIHRoZXJlCj4gLWFyZSB0d28gcmVhc29ucyBmb3IgdGhhdC4gRmlyc3QsIGRldmlj
ZSBETUEgY29weSBoYXMgYSBoaWdoIHNldHVwIG92ZXJoZWFkIGNvc3QKPiAtYW5kIHRodXMgYmF0
Y2hpbmcgbXVsdGlwbGUgcGFnZXMgaXMgbmVlZGVkIGFzIG90aGVyd2lzZSB0aGUgbWlncmF0aW9u
IG92ZXJoZWFkCj4gLW1ha2VzIHRoZSB3aG9sZSBleGVyY2lzZSBwb2ludGxlc3MuIFRoZSBzZWNv
bmQgcmVhc29uIGlzIGJlY2F1c2UgdGhlCj4gLW1pZ3JhdGlvbiBtaWdodCBiZSBmb3IgYSByYW5n
ZSBvZiBhZGRyZXNzZXMgdGhlIGRldmljZSBpcyBhY3RpdmVseSBhY2Nlc3NpbmcuCj4gLQo+IC1U
aGUgbWlncmF0ZV92bWFfb3BzIHN0cnVjdCBkZWZpbmVzIHR3byBjYWxsYmFja3MuIEZpcnN0IG9u
ZSAoYWxsb2NfYW5kX2NvcHkoKSkKPiAtY29udHJvbHMgZGVzdGluYXRpb24gbWVtb3J5IGFsbG9j
YXRpb24gYW5kIGNvcHkgb3BlcmF0aW9uLiBTZWNvbmQgb25lIGlzIHRoZXJlCj4gLXRvIGFsbG93
IHRoZSBkZXZpY2UgZHJpdmVyIHRvIHBlcmZvcm0gY2xlYW51cCBvcGVyYXRpb25zIGFmdGVyIG1p
Z3JhdGlvbjo6Cj4gLQo+IC0gc3RydWN0IG1pZ3JhdGVfdm1hX29wcyB7Cj4gLSAgICAgdm9pZCAo
KmFsbG9jX2FuZF9jb3B5KShzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSwKPiAtICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGNvbnN0IHVuc2lnbmVkIGxvbmcgKnNyYywKPiAtICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgKmRzdCwKPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgc3RhcnQsCj4gLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB1bnNpZ25lZCBsb25nIGVuZCwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHZvaWQgKnByaXZhdGUpOwo+IC0gICAgIHZvaWQgKCpmaW5hbGl6ZV9hbmRfbWFwKShzdHJ1Y3Qg
dm1fYXJlYV9zdHJ1Y3QgKnZtYSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29u
c3QgdW5zaWduZWQgbG9uZyAqc3JjLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
b25zdCB1bnNpZ25lZCBsb25nICpkc3QsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHVuc2lnbmVkIGxvbmcgc3RhcnQsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVu
c2lnbmVkIGxvbmcgZW5kLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkICpw
cml2YXRlKTsKPiAtIH07Cj4gLQo+IC1JdCBpcyBpbXBvcnRhbnQgdG8gc3RyZXNzIHRoYXQgdGhl
c2UgbWlncmF0aW9uIGhlbHBlcnMgYWxsb3cgZm9yIGhvbGVzIGluIHRoZQo+IC12aXJ0dWFsIGFk
ZHJlc3MgcmFuZ2UuIFNvbWUgcGFnZXMgaW4gdGhlIHJhbmdlIG1pZ2h0IG5vdCBiZSBtaWdyYXRl
ZCBmb3IgYWxsCj4gLXRoZSB1c3VhbCByZWFzb25zIChwYWdlIGlzIHBpbm5lZCwgcGFnZSBpcyBs
b2NrZWQsIC4uLikuIFRoaXMgaGVscGVyIGRvZXMgbm90Cj4gLWZhaWwgYnV0IGp1c3Qgc2tpcHMg
b3ZlciB0aG9zZSBwYWdlcy4KPiAtCj4gLVRoZSBhbGxvY19hbmRfY29weSgpIG1pZ2h0IGRlY2lk
ZSB0byBub3QgbWlncmF0ZSBhbGwgcGFnZXMgaW4gdGhlCj4gLXJhbmdlIChmb3IgcmVhc29ucyB1
bmRlciB0aGUgY2FsbGJhY2sgY29udHJvbCkuIEZvciB0aG9zZSwgdGhlIGNhbGxiYWNrIGp1c3QK
PiAtaGFzIHRvIGxlYXZlIHRoZSBjb3JyZXNwb25kaW5nIGRzdCBlbnRyeSBlbXB0eS4KPiAtCj4g
LUZpbmFsbHksIHRoZSBtaWdyYXRpb24gb2YgdGhlIHN0cnVjdCBwYWdlIG1pZ2h0IGZhaWwgKGZv
ciBmaWxlIGJhY2tlZCBwYWdlKSBmb3IKPiAtdmFyaW91cyByZWFzb25zIChmYWlsdXJlIHRvIGZy
ZWV6ZSByZWZlcmVuY2UsIG9yIHVwZGF0ZSBwYWdlIGNhY2hlLCAuLi4pLiBJZgo+IC10aGF0IGhh
cHBlbnMsIHRoZW4gdGhlIGZpbmFsaXplX2FuZF9tYXAoKSBjYW4gY2F0Y2ggYW55IHBhZ2VzIHRo
YXQgd2VyZSBub3QKPiAtbWlncmF0ZWQuIE5vdGUgdGhvc2UgcGFnZXMgd2VyZSBzdGlsbCBjb3Bp
ZWQgdG8gYSBuZXcgcGFnZSBhbmQgdGh1cyB3ZSB3YXN0ZWQKPiAtYmFuZHdpZHRoIGJ1dCB0aGlz
IGlzIGNvbnNpZGVyZWQgYXMgYSByYXJlIGV2ZW50IGFuZCBhIHByaWNlIHRoYXQgd2UgYXJlCj4g
LXdpbGxpbmcgdG8gcGF5IHRvIGtlZXAgYWxsIHRoZSBjb2RlIHNpbXBsZXIuCj4gK2VuZ2luZSB0
byBwZXJmb3JtIGNvcHkgZnJvbSBhbmQgdG8gZGV2aWNlIG1lbW9yeS4gRm9yIHRoaXMgd2UgbmVl
ZCBhIG5ldyB0bwo+ICt1c2UgbWlncmF0ZV92bWFfc2V0dXAoKSwgbWlncmF0ZV92bWFfcGFnZXMo
KSwgYW5kIG1pZ3JhdGVfdm1hX2ZpbmFsaXplKCkKPiAraGVscGVycy4KPiAgIAo+ICAgCj4gICBN
ZW1vcnkgY2dyb3VwIChtZW1jZykgYW5kIHJzcyBhY2NvdW50aW5nCj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZG1lbS5jIGIvZHJpdmVycy9ncHUvZHJtL25v
dXZlYXUvbm91dmVhdV9kbWVtLmMKPiBpbmRleCAzNDVjNjNjYjc1MmEuLjM4NDE2Nzk4YWJkNCAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2RtZW0uYwo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZG1lbS5jCj4gQEAgLTEzMSw5ICsx
MzEsOCBAQCBub3V2ZWF1X2RtZW1fZmF1bHRfYWxsb2NfYW5kX2NvcHkoc3RydWN0IHZtX2FyZWFf
c3RydWN0ICp2bWEsCj4gICAJCQkJICB1bnNpZ25lZCBsb25nICpkc3RfcGZucywKPiAgIAkJCQkg
IHVuc2lnbmVkIGxvbmcgc3RhcnQsCj4gICAJCQkJICB1bnNpZ25lZCBsb25nIGVuZCwKPiAtCQkJ
CSAgdm9pZCAqcHJpdmF0ZSkKPiArCQkJCSAgc3RydWN0IG5vdXZlYXVfZG1lbV9mYXVsdCAqZmF1
bHQpCj4gICB7Cj4gLQlzdHJ1Y3Qgbm91dmVhdV9kbWVtX2ZhdWx0ICpmYXVsdCA9IHByaXZhdGU7
Cj4gICAJc3RydWN0IG5vdXZlYXVfZHJtICpkcm0gPSBmYXVsdC0+ZHJtOwo+ICAgCXN0cnVjdCBk
ZXZpY2UgKmRldiA9IGRybS0+ZGV2LT5kZXY7Cj4gICAJdW5zaWduZWQgbG9uZyBhZGRyLCBpLCBu
cGFnZXMgPSAwOwo+IEBAIC0yMzAsMTQgKzIyOSw5IEBAIG5vdXZlYXVfZG1lbV9mYXVsdF9hbGxv
Y19hbmRfY29weShzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSwKPiAgIAl9Cj4gICB9Cj4gICAK
PiAtdm9pZCBub3V2ZWF1X2RtZW1fZmF1bHRfZmluYWxpemVfYW5kX21hcChzdHJ1Y3Qgdm1fYXJl
YV9zdHJ1Y3QgKnZtYSwKPiAtCQkJCQkgY29uc3QgdW5zaWduZWQgbG9uZyAqc3JjX3BmbnMsCj4g
LQkJCQkJIGNvbnN0IHVuc2lnbmVkIGxvbmcgKmRzdF9wZm5zLAo+IC0JCQkJCSB1bnNpZ25lZCBs
b25nIHN0YXJ0LAo+IC0JCQkJCSB1bnNpZ25lZCBsb25nIGVuZCwKPiAtCQkJCQkgdm9pZCAqcHJp
dmF0ZSkKPiArc3RhdGljIHZvaWQKPiArbm91dmVhdV9kbWVtX2ZhdWx0X2ZpbmFsaXplX2FuZF9t
YXAoc3RydWN0IG5vdXZlYXVfZG1lbV9mYXVsdCAqZmF1bHQpCj4gICB7Cj4gLQlzdHJ1Y3Qgbm91
dmVhdV9kbWVtX2ZhdWx0ICpmYXVsdCA9IHByaXZhdGU7Cj4gICAJc3RydWN0IG5vdXZlYXVfZHJt
ICpkcm0gPSBmYXVsdC0+ZHJtOwo+ICAgCj4gICAJaWYgKGZhdWx0LT5mZW5jZSkgewo+IEBAIC0y
NTcsMjkgKzI1MSwzNSBAQCB2b2lkIG5vdXZlYXVfZG1lbV9mYXVsdF9maW5hbGl6ZV9hbmRfbWFw
KHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hLAo+ICAgCWtmcmVlKGZhdWx0LT5kbWEpOwo+ICAg
fQo+ICAgCj4gLXN0YXRpYyBjb25zdCBzdHJ1Y3QgbWlncmF0ZV92bWFfb3BzIG5vdXZlYXVfZG1l
bV9mYXVsdF9taWdyYXRlX29wcyA9IHsKPiAtCS5hbGxvY19hbmRfY29weQkJPSBub3V2ZWF1X2Rt
ZW1fZmF1bHRfYWxsb2NfYW5kX2NvcHksCj4gLQkuZmluYWxpemVfYW5kX21hcAk9IG5vdXZlYXVf
ZG1lbV9mYXVsdF9maW5hbGl6ZV9hbmRfbWFwLAo+IC19Owo+IC0KPiAgIHN0YXRpYyB2bV9mYXVs
dF90IG5vdXZlYXVfZG1lbV9taWdyYXRlX3RvX3JhbShzdHJ1Y3Qgdm1fZmF1bHQgKnZtZikKPiAg
IHsKPiAgIAlzdHJ1Y3Qgbm91dmVhdV9kbWVtICpkbWVtID0gcGFnZV90b19kbWVtKHZtZi0+cGFn
ZSk7Cj4gICAJdW5zaWduZWQgbG9uZyBzcmNbMV0gPSB7MH0sIGRzdFsxXSA9IHswfTsKPiArCXN0
cnVjdCBtaWdyYXRlX3ZtYSBhcmdzID0gewo+ICsJCS52bWEJCT0gdm1mLT52bWEsCj4gKwkJLnN0
YXJ0CQk9IHZtZi0+YWRkcmVzcywKPiArCQkuZW5kCQk9IHZtZi0+YWRkcmVzcyArIFBBR0VfU0la
RSwKPiArCQkuc3JjCQk9IHNyYywKPiArCQkuZHN0CQk9IGRzdCwKPiArCX07Cj4gICAJc3RydWN0
IG5vdXZlYXVfZG1lbV9mYXVsdCBmYXVsdCA9IHsgLmRybSA9IGRtZW0tPmRybSB9Owo+IC0JaW50
IHJldDsKPiAgIAo+ICAgCS8qCj4gICAJICogRklYTUUgd2hhdCB3ZSByZWFsbHkgd2FudCBpcyB0
byBmaW5kIHNvbWUgaGV1cmlzdGljIHRvIG1pZ3JhdGUgbW9yZQo+ICAgCSAqIHRoYW4ganVzdCBv
bmUgcGFnZSBvbiBDUFUgZmF1bHQuIFdoZW4gc3VjaCBmYXVsdCBoYXBwZW5zIGl0IGlzIHZlcnkK
PiAgIAkgKiBsaWtlbHkgdGhhdCBtb3JlIHN1cnJvdW5kaW5nIHBhZ2Ugd2lsbCBDUFUgZmF1bHQg
dG9vLgo+ICAgCSAqLwo+IC0JcmV0ID0gbWlncmF0ZV92bWEoJm5vdXZlYXVfZG1lbV9mYXVsdF9t
aWdyYXRlX29wcywgdm1mLT52bWEsCj4gLQkJCXZtZi0+YWRkcmVzcywgdm1mLT5hZGRyZXNzICsg
UEFHRV9TSVpFLAo+IC0JCQlzcmMsIGRzdCwgJmZhdWx0KTsKPiAtCWlmIChyZXQpCj4gKwlpZiAo
bWlncmF0ZV92bWFfc2V0dXAoJmFyZ3MpIDwgMCkKPiAgIAkJcmV0dXJuIFZNX0ZBVUxUX1NJR0JV
UzsKPiArCWlmICghYXJncy5jcGFnZXMpCj4gKwkJcmV0dXJuIDA7Cj4gKwo+ICsJbm91dmVhdV9k
bWVtX2ZhdWx0X2FsbG9jX2FuZF9jb3B5KGFyZ3Mudm1hLCBzcmMsIGRzdCwgYXJncy5zdGFydCwK
PiArCQkJYXJncy5lbmQsICZmYXVsdCk7Cj4gKwltaWdyYXRlX3ZtYV9wYWdlcygmYXJncyk7Cj4g
Kwlub3V2ZWF1X2RtZW1fZmF1bHRfZmluYWxpemVfYW5kX21hcCgmZmF1bHQpOwo+ICAgCj4gKwlt
aWdyYXRlX3ZtYV9maW5hbGl6ZSgmYXJncyk7Cj4gICAJaWYgKGRzdFswXSA9PSBNSUdSQVRFX1BG
Tl9FUlJPUikKPiAgIAkJcmV0dXJuIFZNX0ZBVUxUX1NJR0JVUzsKPiAgIAo+IEBAIC02NDgsOSAr
NjQ4LDggQEAgbm91dmVhdV9kbWVtX21pZ3JhdGVfYWxsb2NfYW5kX2NvcHkoc3RydWN0IHZtX2Fy
ZWFfc3RydWN0ICp2bWEsCj4gICAJCQkJICAgIHVuc2lnbmVkIGxvbmcgKmRzdF9wZm5zLAo+ICAg
CQkJCSAgICB1bnNpZ25lZCBsb25nIHN0YXJ0LAo+ICAgCQkJCSAgICB1bnNpZ25lZCBsb25nIGVu
ZCwKPiAtCQkJCSAgICB2b2lkICpwcml2YXRlKQo+ICsJCQkJICAgIHN0cnVjdCBub3V2ZWF1X21p
Z3JhdGUgKm1pZ3JhdGUpCj4gICB7Cj4gLQlzdHJ1Y3Qgbm91dmVhdV9taWdyYXRlICptaWdyYXRl
ID0gcHJpdmF0ZTsKPiAgIAlzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRybSA9IG1pZ3JhdGUtPmRybTsK
PiAgIAlzdHJ1Y3QgZGV2aWNlICpkZXYgPSBkcm0tPmRldi0+ZGV2Owo+ICAgCXVuc2lnbmVkIGxv
bmcgYWRkciwgaSwgbnBhZ2VzID0gMDsKPiBAQCAtNzQ3LDE0ICs3NDYsOSBAQCBub3V2ZWF1X2Rt
ZW1fbWlncmF0ZV9hbGxvY19hbmRfY29weShzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSwKPiAg
IAl9Cj4gICB9Cj4gICAKPiAtdm9pZCBub3V2ZWF1X2RtZW1fbWlncmF0ZV9maW5hbGl6ZV9hbmRf
bWFwKHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hLAo+IC0JCQkJCSAgIGNvbnN0IHVuc2lnbmVk
IGxvbmcgKnNyY19wZm5zLAo+IC0JCQkJCSAgIGNvbnN0IHVuc2lnbmVkIGxvbmcgKmRzdF9wZm5z
LAo+IC0JCQkJCSAgIHVuc2lnbmVkIGxvbmcgc3RhcnQsCj4gLQkJCQkJICAgdW5zaWduZWQgbG9u
ZyBlbmQsCj4gLQkJCQkJICAgdm9pZCAqcHJpdmF0ZSkKPiArc3RhdGljIHZvaWQKPiArbm91dmVh
dV9kbWVtX21pZ3JhdGVfZmluYWxpemVfYW5kX21hcChzdHJ1Y3Qgbm91dmVhdV9taWdyYXRlICpt
aWdyYXRlKQo+ICAgewo+IC0Jc3RydWN0IG5vdXZlYXVfbWlncmF0ZSAqbWlncmF0ZSA9IHByaXZh
dGU7Cj4gICAJc3RydWN0IG5vdXZlYXVfZHJtICpkcm0gPSBtaWdyYXRlLT5kcm07Cj4gICAKPiAg
IAlpZiAobWlncmF0ZS0+ZmVuY2UpIHsKPiBAQCAtNzc5LDEwICs3NzMsMTUgQEAgdm9pZCBub3V2
ZWF1X2RtZW1fbWlncmF0ZV9maW5hbGl6ZV9hbmRfbWFwKHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAq
dm1hLAo+ICAgCSAqLwo+ICAgfQo+ICAgCj4gLXN0YXRpYyBjb25zdCBzdHJ1Y3QgbWlncmF0ZV92
bWFfb3BzIG5vdXZlYXVfZG1lbV9taWdyYXRlX29wcyA9IHsKPiAtCS5hbGxvY19hbmRfY29weQkJ
PSBub3V2ZWF1X2RtZW1fbWlncmF0ZV9hbGxvY19hbmRfY29weSwKPiAtCS5maW5hbGl6ZV9hbmRf
bWFwCT0gbm91dmVhdV9kbWVtX21pZ3JhdGVfZmluYWxpemVfYW5kX21hcCwKPiAtfTsKPiArc3Rh
dGljIHZvaWQgbm91dmVhdV9kbWVtX21pZ3JhdGVfY2h1bmsoc3RydWN0IG1pZ3JhdGVfdm1hICph
cmdzLAo+ICsJCXN0cnVjdCBub3V2ZWF1X21pZ3JhdGUgKm1pZ3JhdGUpCj4gK3sKPiArCW5vdXZl
YXVfZG1lbV9taWdyYXRlX2FsbG9jX2FuZF9jb3B5KGFyZ3MtPnZtYSwgYXJncy0+c3JjLCBhcmdz
LT5kc3QsCj4gKwkJCWFyZ3MtPnN0YXJ0LCBhcmdzLT5lbmQsIG1pZ3JhdGUpOwo+ICsJbWlncmF0
ZV92bWFfcGFnZXMoYXJncyk7Cj4gKwlub3V2ZWF1X2RtZW1fbWlncmF0ZV9maW5hbGl6ZV9hbmRf
bWFwKG1pZ3JhdGUpOwo+ICsJbWlncmF0ZV92bWFfZmluYWxpemUoYXJncyk7Cj4gK30KPiAgIAo+
ICAgaW50Cj4gICBub3V2ZWF1X2RtZW1fbWlncmF0ZV92bWEoc3RydWN0IG5vdXZlYXVfZHJtICpk
cm0sCj4gQEAgLTc5MCw0MCArNzg5LDQ1IEBAIG5vdXZlYXVfZG1lbV9taWdyYXRlX3ZtYShzdHJ1
Y3Qgbm91dmVhdV9kcm0gKmRybSwKPiAgIAkJCSB1bnNpZ25lZCBsb25nIHN0YXJ0LAo+ICAgCQkJ
IHVuc2lnbmVkIGxvbmcgZW5kKQo+ICAgewo+IC0JdW5zaWduZWQgbG9uZyAqc3JjX3BmbnMsICpk
c3RfcGZucywgbnBhZ2VzOwo+IC0Jc3RydWN0IG5vdXZlYXVfbWlncmF0ZSBtaWdyYXRlID0gezB9
Owo+IC0JdW5zaWduZWQgbG9uZyBpLCBjLCBtYXg7Cj4gLQlpbnQgcmV0ID0gMDsKPiAtCj4gLQlu
cGFnZXMgPSAoZW5kIC0gc3RhcnQpID4+IFBBR0VfU0hJRlQ7Cj4gLQltYXggPSBtaW4oU0dfTUFY
X1NJTkdMRV9BTExPQywgbnBhZ2VzKTsKPiAtCXNyY19wZm5zID0ga3phbGxvYyhzaXplb2YobG9u
ZykgKiBtYXgsIEdGUF9LRVJORUwpOwo+IC0JaWYgKHNyY19wZm5zID09IE5VTEwpCj4gLQkJcmV0
dXJuIC1FTk9NRU07Cj4gLQlkc3RfcGZucyA9IGt6YWxsb2Moc2l6ZW9mKGxvbmcpICogbWF4LCBH
RlBfS0VSTkVMKTsKPiAtCWlmIChkc3RfcGZucyA9PSBOVUxMKSB7Cj4gLQkJa2ZyZWUoc3JjX3Bm
bnMpOwo+IC0JCXJldHVybiAtRU5PTUVNOwo+IC0JfQo+ICsJdW5zaWduZWQgbG9uZyBucGFnZXMg
PSAoZW5kIC0gc3RhcnQpID4+IFBBR0VfU0hJRlQ7Cj4gKwl1bnNpZ25lZCBsb25nIG1heCA9IG1p
bihTR19NQVhfU0lOR0xFX0FMTE9DLCBucGFnZXMpOwo+ICsJc3RydWN0IG1pZ3JhdGVfdm1hIGFy
Z3MgPSB7Cj4gKwkJLnZtYQkJPSB2bWEsCj4gKwkJLnN0YXJ0CQk9IHN0YXJ0LAo+ICsJfTsKPiAr
CXN0cnVjdCBub3V2ZWF1X21pZ3JhdGUgbWlncmF0ZSA9IHsKPiArCQkuZHJtCQk9IGRybSwKPiAr
CQkudm1hCQk9IHZtYSwKPiArCQkubnBhZ2VzCQk9IG5wYWdlcywKPiArCX07Cj4gKwl1bnNpZ25l
ZCBsb25nIGMsIGk7Cj4gKwlpbnQgcmV0ID0gLUVOT01FTTsKPiArCj4gKwlhcmdzLnNyYyA9IGt6
YWxsb2Moc2l6ZW9mKGxvbmcpICogbWF4LCBHRlBfS0VSTkVMKTsKPiArCWlmICghYXJncy5zcmMp
Cj4gKwkJZ290byBvdXQ7Cj4gKwlhcmdzLmRzdCA9IGt6YWxsb2Moc2l6ZW9mKGxvbmcpICogbWF4
LCBHRlBfS0VSTkVMKTsKPiArCWlmICghYXJncy5kc3QpCj4gKwkJZ290byBvdXRfZnJlZV9zcmM7
Cj4gICAKPiAtCW1pZ3JhdGUuZHJtID0gZHJtOwo+IC0JbWlncmF0ZS52bWEgPSB2bWE7Cj4gLQlt
aWdyYXRlLm5wYWdlcyA9IG5wYWdlczsKPiAgIAlmb3IgKGkgPSAwOyBpIDwgbnBhZ2VzOyBpICs9
IGMpIHsKPiAtCQl1bnNpZ25lZCBsb25nIG5leHQ7Cj4gLQo+ICAgCQljID0gbWluKFNHX01BWF9T
SU5HTEVfQUxMT0MsIG5wYWdlcyk7Cj4gLQkJbmV4dCA9IHN0YXJ0ICsgKGMgPDwgUEFHRV9TSElG
VCk7Cj4gLQkJcmV0ID0gbWlncmF0ZV92bWEoJm5vdXZlYXVfZG1lbV9taWdyYXRlX29wcywgdm1h
LCBzdGFydCwKPiAtCQkJCSAgbmV4dCwgc3JjX3BmbnMsIGRzdF9wZm5zLCAmbWlncmF0ZSk7Cj4g
KwkJYXJncy5lbmQgPSBzdGFydCArIChjIDw8IFBBR0VfU0hJRlQpOwo+ICsJCXJldCA9IG1pZ3Jh
dGVfdm1hX3NldHVwKCZhcmdzKTsKPiAgIAkJaWYgKHJldCkKPiAtCQkJZ290byBvdXQ7Cj4gLQkJ
c3RhcnQgPSBuZXh0Owo+ICsJCQlnb3RvIG91dF9mcmVlX2RzdDsKPiArCj4gKwkJaWYgKGFyZ3Mu
Y3BhZ2VzKQo+ICsJCQlub3V2ZWF1X2RtZW1fbWlncmF0ZV9jaHVuaygmYXJncywgJm1pZ3JhdGUp
Owo+ICsJCWFyZ3Muc3RhcnQgPSBhcmdzLmVuZDsKPiAgIAl9Cj4gICAKPiArCXJldCA9IDA7Cj4g
K291dF9mcmVlX2RzdDoKPiArCWtmcmVlKGFyZ3MuZHN0KTsKPiArb3V0X2ZyZWVfc3JjOgo+ICsJ
a2ZyZWUoYXJncy5zcmMpOwo+ICAgb3V0Ogo+IC0Ja2ZyZWUoZHN0X3BmbnMpOwo+IC0Ja2ZyZWUo
c3JjX3BmbnMpOwo+ICAgCXJldHVybiByZXQ7Cj4gICB9Cj4gICAKPiBkaWZmIC0tZ2l0IGEvaW5j
bHVkZS9saW51eC9taWdyYXRlLmggYi9pbmNsdWRlL2xpbnV4L21pZ3JhdGUuaAo+IGluZGV4IDdm
MDQ3NTRjN2YyYi4uMDkzZDY3ZmNmNmRkIDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvbGludXgvbWln
cmF0ZS5oCj4gKysrIGIvaW5jbHVkZS9saW51eC9taWdyYXRlLmgKPiBAQCAtMTgyLDEwNyArMTgy
LDI3IEBAIHN0YXRpYyBpbmxpbmUgdW5zaWduZWQgbG9uZyBtaWdyYXRlX3Bmbih1bnNpZ25lZCBs
b25nIHBmbikKPiAgIAlyZXR1cm4gKHBmbiA8PCBNSUdSQVRFX1BGTl9TSElGVCkgfCBNSUdSQVRF
X1BGTl9WQUxJRDsKPiAgIH0KPiAgIAo+IC0vKgo+IC0gKiBzdHJ1Y3QgbWlncmF0ZV92bWFfb3Bz
IC0gbWlncmF0ZSBvcGVyYXRpb24gY2FsbGJhY2sKPiAtICoKPiAtICogQGFsbG9jX2FuZF9jb3B5
OiBhbGxvYyBkZXN0aW5hdGlvbiBtZW1vcnkgYW5kIGNvcHkgc291cmNlIG1lbW9yeSB0byBpdAo+
IC0gKiBAZmluYWxpemVfYW5kX21hcDogYWxsb3cgY2FsbGVyIHRvIG1hcCB0aGUgc3VjY2Vzc2Z1
bGx5IG1pZ3JhdGVkIHBhZ2VzCj4gLSAqCj4gLSAqCj4gLSAqIFRoZSBhbGxvY19hbmRfY29weSgp
IGNhbGxiYWNrIGhhcHBlbnMgb25jZSBhbGwgc291cmNlIHBhZ2VzIGhhdmUgYmVlbiBsb2NrZWQs
Cj4gLSAqIHVubWFwcGVkIGFuZCBjaGVja2VkIChjaGVja2VkIHdoZXRoZXIgcGlubmVkIG9yIG5v
dCkuIEFsbCBwYWdlcyB0aGF0IGNhbiBiZQo+IC0gKiBtaWdyYXRlZCB3aWxsIGhhdmUgYW4gZW50
cnkgaW4gdGhlIHNyYyBhcnJheSBzZXQgd2l0aCB0aGUgcGZuIHZhbHVlIG9mIHRoZQo+IC0gKiBw
YWdlIGFuZCB3aXRoIHRoZSBNSUdSQVRFX1BGTl9WQUxJRCBhbmQgTUlHUkFURV9QRk5fTUlHUkFU
RSBmbGFnIHNldCAob3RoZXIKPiAtICogZmxhZ3MgbWlnaHQgYmUgc2V0IGJ1dCBzaG91bGQgYmUg
aWdub3JlZCBieSB0aGUgY2FsbGJhY2spLgo+IC0gKgo+IC0gKiBUaGUgYWxsb2NfYW5kX2NvcHko
KSBjYWxsYmFjayBjYW4gdGhlbiBhbGxvY2F0ZSBkZXN0aW5hdGlvbiBtZW1vcnkgYW5kIGNvcHkK
PiAtICogc291cmNlIG1lbW9yeSB0byBpdCBmb3IgYWxsIHRob3NlIGVudHJpZXMgKGllIHdpdGgg
TUlHUkFURV9QRk5fVkFMSUQgYW5kCj4gLSAqIE1JR1JBVEVfUEZOX01JR1JBVEUgZmxhZyBzZXQp
LiBPbmNlIHRoZXNlIGFyZSBhbGxvY2F0ZWQgYW5kIGNvcGllZCwgdGhlCj4gLSAqIGNhbGxiYWNr
IG11c3QgdXBkYXRlIGVhY2ggY29ycmVzcG9uZGluZyBlbnRyeSBpbiB0aGUgZHN0IGFycmF5IHdp
dGggdGhlIHBmbgo+IC0gKiB2YWx1ZSBvZiB0aGUgZGVzdGluYXRpb24gcGFnZSBhbmQgd2l0aCB0
aGUgTUlHUkFURV9QRk5fVkFMSUQgYW5kCj4gLSAqIE1JR1JBVEVfUEZOX0xPQ0tFRCBmbGFncyBz
ZXQgKGRlc3RpbmF0aW9uIHBhZ2VzIG11c3QgaGF2ZSB0aGVpciBzdHJ1Y3QgcGFnZXMKPiAtICog
bG9ja2VkLCB2aWEgbG9ja19wYWdlKCkpLgo+IC0gKgo+IC0gKiBBdCB0aGlzIHBvaW50IHRoZSBh
bGxvY19hbmRfY29weSgpIGNhbGxiYWNrIGlzIGRvbmUgYW5kIHJldHVybnMuCj4gLSAqCj4gLSAq
IE5vdGUgdGhhdCB0aGUgY2FsbGJhY2sgZG9lcyBub3QgaGF2ZSB0byBtaWdyYXRlIGFsbCB0aGUg
cGFnZXMgdGhhdCBhcmUKPiAtICogbWFya2VkIHdpdGggTUlHUkFURV9QRk5fTUlHUkFURSBmbGFn
IGluIHNyYyBhcnJheSB1bmxlc3MgdGhpcyBpcyBhIG1pZ3JhdGlvbgo+IC0gKiBmcm9tIGRldmlj
ZSBtZW1vcnkgdG8gc3lzdGVtIG1lbW9yeSAoaWUgdGhlIE1JR1JBVEVfUEZOX0RFVklDRSBmbGFn
IGlzIGFsc28KPiAtICogc2V0IGluIHRoZSBzcmMgYXJyYXkgZW50cnkpLiBJZiB0aGUgZGV2aWNl
IGRyaXZlciBjYW5ub3QgbWlncmF0ZSBhIGRldmljZQo+IC0gKiBwYWdlIGJhY2sgdG8gc3lzdGVt
IG1lbW9yeSwgdGhlbiBpdCBtdXN0IHNldCB0aGUgY29ycmVzcG9uZGluZyBkc3QgYXJyYXkKPiAt
ICogZW50cnkgdG8gTUlHUkFURV9QRk5fRVJST1IuIFRoaXMgd2lsbCB0cmlnZ2VyIGEgU0lHQlVT
IGlmIENQVSB0cmllcyB0bwo+IC0gKiBhY2Nlc3MgYW55IG9mIHRoZSB2aXJ0dWFsIGFkZHJlc3Nl
cyBvcmlnaW5hbGx5IGJhY2tlZCBieSB0aGlzIHBhZ2UuIEJlY2F1c2UKPiAtICogYSBTSUdCVVMg
aXMgc3VjaCBhIHNldmVyZSByZXN1bHQgZm9yIHRoZSB1c2Vyc3BhY2UgcHJvY2VzcywgdGhlIGRl
dmljZQo+IC0gKiBkcml2ZXIgc2hvdWxkIGF2b2lkIHNldHRpbmcgTUlHUkFURV9QRk5fRVJST1Ig
dW5sZXNzIGl0IGlzIHJlYWxseSBpbiBhbgo+IC0gKiB1bnJlY292ZXJhYmxlIHN0YXRlLgo+IC0g
Kgo+IC0gKiBGb3IgZW1wdHkgZW50cnkgaW5zaWRlIENQVSBwYWdlIHRhYmxlIChwdGVfbm9uZSgp
IG9yIHBtZF9ub25lKCkgaXMgdHJ1ZSkgd2UKPiAtICogZG8gc2V0IE1JR1JBVEVfUEZOX01JR1JB
VEUgZmxhZyBpbnNpZGUgdGhlIGNvcnJlc3BvbmRpbmcgc291cmNlIGFycmF5IHRodXMKPiAtICog
YWxsb3dpbmcgZGV2aWNlIGRyaXZlciB0byBhbGxvY2F0ZSBkZXZpY2UgbWVtb3J5IGZvciB0aG9z
ZSB1bmJhY2sgdmlydHVhbAo+IC0gKiBhZGRyZXNzLiBGb3IgdGhpcyB0aGUgZGV2aWNlIGRyaXZl
ciBzaW1wbHkgaGF2ZSB0byBhbGxvY2F0ZSBkZXZpY2UgbWVtb3J5Cj4gLSAqIGFuZCBwcm9wZXJs
eSBzZXQgdGhlIGRlc3RpbmF0aW9uIGVudHJ5IGxpa2UgZm9yIHJlZ3VsYXIgbWlncmF0aW9uLiBO
b3RlIHRoYXQKPiAtICogdGhpcyBjYW4gc3RpbGwgZmFpbHMgYW5kIHRodXMgaW5zaWRlIHRoZSBk
ZXZpY2UgZHJpdmVyIG11c3QgY2hlY2sgaWYgdGhlCj4gLSAqIG1pZ3JhdGlvbiB3YXMgc3VjY2Vz
c2Z1bCBmb3IgdGhvc2UgZW50cnkgaW5zaWRlIHRoZSBmaW5hbGl6ZV9hbmRfbWFwKCkKPiAtICog
Y2FsbGJhY2sganVzdCBsaWtlIGZvciByZWd1bGFyIG1pZ3JhdGlvbi4KPiAtICoKPiAtICogVEhF
IGFsbG9jX2FuZF9jb3B5KCkgQ0FMTEJBQ0sgTVVTVCBOT1QgQ0hBTkdFIEFOWSBPRiBUSEUgU1JD
IEFSUkFZIEVOVFJJRVMKPiAtICogT1IgQkFEIFRISU5HUyBXSUxMIEhBUFBFTiAhCj4gLSAqCj4g
LSAqCj4gLSAqIFRoZSBmaW5hbGl6ZV9hbmRfbWFwKCkgY2FsbGJhY2sgaGFwcGVucyBhZnRlciBz
dHJ1Y3QgcGFnZSBtaWdyYXRpb24gZnJvbQo+IC0gKiBzb3VyY2UgdG8gZGVzdGluYXRpb24gKGRl
c3RpbmF0aW9uIHN0cnVjdCBwYWdlcyBhcmUgdGhlIHN0cnVjdCBwYWdlcyBmb3IgdGhlCj4gLSAq
IG1lbW9yeSBhbGxvY2F0ZWQgYnkgdGhlIGFsbG9jX2FuZF9jb3B5KCkgY2FsbGJhY2spLiAgTWln
cmF0aW9uIGNhbiBmYWlsLCBhbmQKPiAtICogdGh1cyB0aGUgZmluYWxpemVfYW5kX21hcCgpIGFs
bG93cyB0aGUgZHJpdmVyIHRvIGluc3BlY3Qgd2hpY2ggcGFnZXMgd2VyZQo+IC0gKiBzdWNjZXNz
ZnVsbHkgbWlncmF0ZWQsIGFuZCB3aGljaCB3ZXJlIG5vdC4gU3VjY2Vzc2Z1bGx5IG1pZ3JhdGVk
IHBhZ2VzIHdpbGwKPiAtICogaGF2ZSB0aGUgTUlHUkFURV9QRk5fTUlHUkFURSBmbGFnIHNldCBm
b3IgdGhlaXIgc3JjIGFycmF5IGVudHJ5Lgo+IC0gKgo+IC0gKiBJdCBpcyBzYWZlIHRvIHVwZGF0
ZSBkZXZpY2UgcGFnZSB0YWJsZSBmcm9tIHdpdGhpbiB0aGUgZmluYWxpemVfYW5kX21hcCgpCj4g
LSAqIGNhbGxiYWNrIGJlY2F1c2UgYm90aCBkZXN0aW5hdGlvbiBhbmQgc291cmNlIHBhZ2UgYXJl
IHN0aWxsIGxvY2tlZCwgYW5kIHRoZQo+IC0gKiBtbWFwX3NlbSBpcyBoZWxkIGluIHJlYWQgbW9k
ZSAoaGVuY2Ugbm8gb25lIGNhbiB1bm1hcCB0aGUgcmFuZ2UgYmVpbmcKPiAtICogbWlncmF0ZWQp
Lgo+IC0gKgo+IC0gKiBPbmNlIGNhbGxiYWNrIGlzIGRvbmUgY2xlYW5pbmcgdXAgdGhpbmdzIGFu
ZCB1cGRhdGluZyBpdHMgcGFnZSB0YWJsZSAoaWYgaXQKPiAtICogY2hvc2UgdG8gZG8gc28sIHRo
aXMgaXMgbm90IGFuIG9ibGlnYXRpb24pIHRoZW4gaXQgcmV0dXJucy4gQXQgdGhpcyBwb2ludCwK
PiAtICogdGhlIEhNTSBjb3JlIHdpbGwgZmluaXNoIHVwIHRoZSBmaW5hbCBzdGVwcywgYW5kIHRo
ZSBtaWdyYXRpb24gaXMgY29tcGxldGUuCj4gLSAqCj4gLSAqIFRIRSBmaW5hbGl6ZV9hbmRfbWFw
KCkgQ0FMTEJBQ0sgTVVTVCBOT1QgQ0hBTkdFIEFOWSBPRiBUSEUgU1JDIE9SIERTVCBBUlJBWQo+
IC0gKiBFTlRSSUVTIE9SIEJBRCBUSElOR1MgV0lMTCBIQVBQRU4gIQo+IC0gKi8KPiAtc3RydWN0
IG1pZ3JhdGVfdm1hX29wcyB7Cj4gLQl2b2lkICgqYWxsb2NfYW5kX2NvcHkpKHN0cnVjdCB2bV9h
cmVhX3N0cnVjdCAqdm1hLAo+IC0JCQkgICAgICAgY29uc3QgdW5zaWduZWQgbG9uZyAqc3JjLAo+
IC0JCQkgICAgICAgdW5zaWduZWQgbG9uZyAqZHN0LAo+IC0JCQkgICAgICAgdW5zaWduZWQgbG9u
ZyBzdGFydCwKPiAtCQkJICAgICAgIHVuc2lnbmVkIGxvbmcgZW5kLAo+IC0JCQkgICAgICAgdm9p
ZCAqcHJpdmF0ZSk7Cj4gLQl2b2lkICgqZmluYWxpemVfYW5kX21hcCkoc3RydWN0IHZtX2FyZWFf
c3RydWN0ICp2bWEsCj4gLQkJCQkgY29uc3QgdW5zaWduZWQgbG9uZyAqc3JjLAo+IC0JCQkJIGNv
bnN0IHVuc2lnbmVkIGxvbmcgKmRzdCwKPiAtCQkJCSB1bnNpZ25lZCBsb25nIHN0YXJ0LAo+IC0J
CQkJIHVuc2lnbmVkIGxvbmcgZW5kLAo+IC0JCQkJIHZvaWQgKnByaXZhdGUpOwo+ICtzdHJ1Y3Qg
bWlncmF0ZV92bWEgewo+ICsJc3RydWN0IHZtX2FyZWFfc3RydWN0CSp2bWE7Cj4gKyAJLyoKPiAr
CSAqIEJvdGggc3JjIGFuZCBkc3QgYXJyYXkgbXVzdCBiZSBiaWcgZW5vdWdoIGZvcgo+ICsJICog
KGVuZCAtIHN0YXJ0KSA+PiBQQUdFX1NISUZUIGVudHJpZXMuCj4gKwkgKgo+ICsJICogVGhlIHNy
YyBhcnJheSBtdXN0IG5vdCBiZSBtb2RpZmllZCBieSB0aGUgY2FsbGVyIGFmdGVyCj4gKwkgKiBt
aWdyYXRlX3ZtYV9zZXR1cCgpLCBhbmQgbXVzdCBub3QgY2hhbmdlIHRoZSBkc3QgYXJyYXkgYWZ0
ZXIKPiArCSAqIG1pZ3JhdGVfdm1hX3BhZ2VzKCkgcmV0dXJucy4KPiArCSAqLwo+ICsJdW5zaWdu
ZWQgbG9uZwkJKmRzdDsKPiArCXVuc2lnbmVkIGxvbmcJCSpzcmM7Cj4gKwl1bnNpZ25lZCBsb25n
CQljcGFnZXM7Cj4gKwl1bnNpZ25lZCBsb25nCQlucGFnZXM7Cj4gKwl1bnNpZ25lZCBsb25nCQlz
dGFydDsKPiArCXVuc2lnbmVkIGxvbmcJCWVuZDsKPiAgIH07Cj4gICAKPiAtI2lmIGRlZmluZWQo
Q09ORklHX01JR1JBVEVfVk1BX0hFTFBFUikKPiAtaW50IG1pZ3JhdGVfdm1hKGNvbnN0IHN0cnVj
dCBtaWdyYXRlX3ZtYV9vcHMgKm9wcywKPiAtCQlzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSwK
PiAtCQl1bnNpZ25lZCBsb25nIHN0YXJ0LAo+IC0JCXVuc2lnbmVkIGxvbmcgZW5kLAo+IC0JCXVu
c2lnbmVkIGxvbmcgKnNyYywKPiAtCQl1bnNpZ25lZCBsb25nICpkc3QsCj4gLQkJdm9pZCAqcHJp
dmF0ZSk7Cj4gLSNlbHNlCj4gLXN0YXRpYyBpbmxpbmUgaW50IG1pZ3JhdGVfdm1hKGNvbnN0IHN0
cnVjdCBtaWdyYXRlX3ZtYV9vcHMgKm9wcywKPiAtCQkJICAgICAgc3RydWN0IHZtX2FyZWFfc3Ry
dWN0ICp2bWEsCj4gLQkJCSAgICAgIHVuc2lnbmVkIGxvbmcgc3RhcnQsCj4gLQkJCSAgICAgIHVu
c2lnbmVkIGxvbmcgZW5kLAo+IC0JCQkgICAgICB1bnNpZ25lZCBsb25nICpzcmMsCj4gLQkJCSAg
ICAgIHVuc2lnbmVkIGxvbmcgKmRzdCwKPiAtCQkJICAgICAgdm9pZCAqcHJpdmF0ZSkKPiAtewo+
IC0JcmV0dXJuIC1FSU5WQUw7Cj4gLX0KPiAtI2VuZGlmIC8qIElTX0VOQUJMRUQoQ09ORklHX01J
R1JBVEVfVk1BX0hFTFBFUikgKi8KPiAraW50IG1pZ3JhdGVfdm1hX3NldHVwKHN0cnVjdCBtaWdy
YXRlX3ZtYSAqYXJncyk7Cj4gK3ZvaWQgbWlncmF0ZV92bWFfcGFnZXMoc3RydWN0IG1pZ3JhdGVf
dm1hICptaWdyYXRlKTsKPiArdm9pZCBtaWdyYXRlX3ZtYV9maW5hbGl6ZShzdHJ1Y3QgbWlncmF0
ZV92bWEgKm1pZ3JhdGUpOwo+ICAgCj4gICAjZW5kaWYgLyogQ09ORklHX01JR1JBVElPTiAqLwo+
ICAgCj4gZGlmZiAtLWdpdCBhL21tL21pZ3JhdGUuYyBiL21tL21pZ3JhdGUuYwo+IGluZGV4IDg5
OTI3NDFmMTBhYS4uZGM0ZTYwYTQ5NmYyIDEwMDY0NAo+IC0tLSBhL21tL21pZ3JhdGUuYwo+ICsr
KyBiL21tL21pZ3JhdGUuYwo+IEBAIC0yMTE4LDE2ICsyMTE4LDYgQEAgaW50IG1pZ3JhdGVfbWlz
cGxhY2VkX3RyYW5zaHVnZV9wYWdlKHN0cnVjdCBtbV9zdHJ1Y3QgKm1tLAo+ICAgI2VuZGlmIC8q
IENPTkZJR19OVU1BICovCj4gICAKPiAgICNpZiBkZWZpbmVkKENPTkZJR19NSUdSQVRFX1ZNQV9I
RUxQRVIpCj4gLXN0cnVjdCBtaWdyYXRlX3ZtYSB7Cj4gLQlzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QJ
KnZtYTsKPiAtCXVuc2lnbmVkIGxvbmcJCSpkc3Q7Cj4gLQl1bnNpZ25lZCBsb25nCQkqc3JjOwo+
IC0JdW5zaWduZWQgbG9uZwkJY3BhZ2VzOwo+IC0JdW5zaWduZWQgbG9uZwkJbnBhZ2VzOwo+IC0J
dW5zaWduZWQgbG9uZwkJc3RhcnQ7Cj4gLQl1bnNpZ25lZCBsb25nCQllbmQ7Cj4gLX07Cj4gLQo+
ICAgc3RhdGljIGludCBtaWdyYXRlX3ZtYV9jb2xsZWN0X2hvbGUodW5zaWduZWQgbG9uZyBzdGFy
dCwKPiAgIAkJCQkgICAgdW5zaWduZWQgbG9uZyBlbmQsCj4gICAJCQkJICAgIHN0cnVjdCBtbV93
YWxrICp3YWxrKQo+IEBAIC0yNTc4LDYgKzI1NjgsMTA4IEBAIHN0YXRpYyB2b2lkIG1pZ3JhdGVf
dm1hX3VubWFwKHN0cnVjdCBtaWdyYXRlX3ZtYSAqbWlncmF0ZSkKPiAgIAl9Cj4gICB9Cj4gICAK
PiArLyoqCj4gKyAqIG1pZ3JhdGVfdm1hX3NldHVwKCkgLSBwcmVwYXJlIHRvIG1pZ3JhdGUgYSBy
YW5nZSBvZiBtZW1vcnkKPiArICogQGFyZ3M6IGNvbnRhaW5zIHRoZSB2bWEsIHN0YXJ0LCBhbmQg
YW5kIHBmbnMgYXJyYXlzIGZvciB0aGUgbWlncmF0aW9uCj4gKyAqCj4gKyAqIFJldHVybnM6IG5l
Z2F0aXZlIGVycm5vIG9uIGZhaWx1cmVzLCAwIHdoZW4gMCBvciBtb3JlIHBhZ2VzIHdlcmUgbWln
cmF0ZWQKPiArICogd2l0aG91dCBhbiBlcnJvci4KPiArICoKPiArICogUHJlcGFyZSB0byBtaWdy
YXRlIGEgcmFuZ2Ugb2YgbWVtb3J5IHZpcnR1YWwgYWRkcmVzcyByYW5nZSBieSBjb2xsZWN0aW5n
IGFsbAo+ICsgKiB0aGUgcGFnZXMgYmFja2luZyBlYWNoIHZpcnR1YWwgYWRkcmVzcyBpbiB0aGUg
cmFuZ2UsIHNhdmluZyB0aGVtIGluc2lkZSB0aGUKPiArICogc3JjIGFycmF5LiAgVGhlbiBsb2Nr
IHRob3NlIHBhZ2VzIGFuZCB1bm1hcCB0aGVtLiBPbmNlIHRoZSBwYWdlcyBhcmUgbG9ja2VkCj4g
KyAqIGFuZCB1bm1hcHBlZCwgY2hlY2sgd2hldGhlciBlYWNoIHBhZ2UgaXMgcGlubmVkIG9yIG5v
dC4gIFBhZ2VzIHRoYXQgYXJlbid0Cj4gKyAqIHBpbm5lZCBoYXZlIHRoZSBNSUdSQVRFX1BGTl9N
SUdSQVRFIGZsYWcgc2V0IChieSB0aGlzIGZ1bmN0aW9uKSBpbiB0aGUKPiArICogY29ycmVzcG9u
ZGluZyBzcmMgYXJyYXkgZW50cnkuICBUaGVuIHJlc3RvcmVzIGFueSBwYWdlcyB0aGF0IGFyZSBw
aW5uZWQsIGJ5Cj4gKyAqIHJlbWFwcGluZyBhbmQgdW5sb2NraW5nIHRob3NlIHBhZ2VzLgo+ICsg
Kgo+ICsgKiBUaGUgY2FsbGVyIHNob3VsZCB0aGVuIGFsbG9jYXRlIGRlc3RpbmF0aW9uIG1lbW9y
eSBhbmQgY29weSBzb3VyY2UgbWVtb3J5IHRvCj4gKyAqIGl0IGZvciBhbGwgdGhvc2UgZW50cmll
cyAoaWUgd2l0aCBNSUdSQVRFX1BGTl9WQUxJRCBhbmQgTUlHUkFURV9QRk5fTUlHUkFURQo+ICsg
KiBmbGFnIHNldCkuICBPbmNlIHRoZXNlIGFyZSBhbGxvY2F0ZWQgYW5kIGNvcGllZCwgdGhlIGNh
bGxlciBtdXN0IHVwZGF0ZSBlYWNoCj4gKyAqIGNvcnJlc3BvbmRpbmcgZW50cnkgaW4gdGhlIGRz
dCBhcnJheSB3aXRoIHRoZSBwZm4gdmFsdWUgb2YgdGhlIGRlc3RpbmF0aW9uCj4gKyAqIHBhZ2Ug
YW5kIHdpdGggdGhlIE1JR1JBVEVfUEZOX1ZBTElEIGFuZCBNSUdSQVRFX1BGTl9MT0NLRUQgZmxh
Z3Mgc2V0Cj4gKyAqIChkZXN0aW5hdGlvbiBwYWdlcyBtdXN0IGhhdmUgdGhlaXIgc3RydWN0IHBh
Z2VzIGxvY2tlZCwgdmlhIGxvY2tfcGFnZSgpKS4KPiArICoKPiArICogTm90ZSB0aGF0IHRoZSBj
YWxsZXIgZG9lcyBub3QgaGF2ZSB0byBtaWdyYXRlIGFsbCB0aGUgcGFnZXMgdGhhdCBhcmUgbWFy
a2VkCj4gKyAqIHdpdGggTUlHUkFURV9QRk5fTUlHUkFURSBmbGFnIGluIHNyYyBhcnJheSB1bmxl
c3MgdGhpcyBpcyBhIG1pZ3JhdGlvbiBmcm9tCj4gKyAqIGRldmljZSBtZW1vcnkgdG8gc3lzdGVt
IG1lbW9yeS4gIElmIHRoZSBjYWxsZXIgY2Fubm90IG1pZ3JhdGUgYSBkZXZpY2UgcGFnZQo+ICsg
KiBiYWNrIHRvIHN5c3RlbSBtZW1vcnksIHRoZW4gaXQgbXVzdCByZXR1cm4gVk1fRkFVTFRfU0lH
QlVTLCB3aGljaCB3aWxsCj4gKyAqIG1pZ2h0IGhhdmUgc2V2ZXJlIGNvbnNlcXVlbmNlcyBmb3Ig
dGhlIHVzZXJzcGFjZSBwcm9jZXNzLCBzbyBpdCBzaG91bGQgYmVzdAo+ICsgKiBiZSBhdm9pZGVk
IGlmIHBvc3NpYmxlLgo+ICsgKgo+ICsgKiBGb3IgZW1wdHkgZW50cmllcyBpbnNpZGUgQ1BVIHBh
Z2UgdGFibGUgKHB0ZV9ub25lKCkgb3IgcG1kX25vbmUoKSBpcyB0cnVlKSB3ZQo+ICsgKiBkbyBz
ZXQgTUlHUkFURV9QRk5fTUlHUkFURSBmbGFnIGluc2lkZSB0aGUgY29ycmVzcG9uZGluZyBzb3Vy
Y2UgYXJyYXkgdGh1cwo+ICsgKiBhbGxvd2luZyB0aGUgY2FsbGVyIHRvIGFsbG9jYXRlIGRldmlj
ZSBtZW1vcnkgZm9yIHRob3NlIHVuYmFjayB2aXJ0dWFsCj4gKyAqIGFkZHJlc3MuICBGb3IgdGhp
cyB0aGUgY2FsbGVyIHNpbXBseSBoYXZzIHRvIGFsbG9jYXRlIGRldmljZSBtZW1vcnkgYW5kCj4g
KyAqIHByb3Blcmx5IHNldCB0aGUgZGVzdGluYXRpb24gZW50cnkgbGlrZSBmb3IgcmVndWxhciBt
aWdyYXRpb24uICBOb3RlIHRoYXQKPiArICogdGhpcyBjYW4gc3RpbGwgZmFpbHMgYW5kIHRodXMg
aW5zaWRlIHRoZSBkZXZpY2UgZHJpdmVyIG11c3QgY2hlY2sgaWYgdGhlCj4gKyAqIG1pZ3JhdGlv
biB3YXMgc3VjY2Vzc2Z1bCBmb3IgdGhvc2UgZW50cmllcyBhZnRlciBjYWxsaW5nIG1pZ3JhdGVf
dm1hX3BhZ2VzKCkKPiArICoganVzdCBsaWtlIGZvciByZWd1bGFyIG1pZ3JhdGlvbi4KPiArICoK
PiArICogQWZ0ZXIgdGhhdCwgdGhlIGNhbGxlcnMgbXVzdCBjYWxsIG1pZ3JhdGVfdm1hX3BhZ2Vz
KCkgdG8gZ28gb3ZlciBlYWNoIGVudHJ5Cj4gKyAqIGluIHRoZSBzcmMgYXJyYXkgdGhhdCBoYXMg
dGhlIE1JR1JBVEVfUEZOX1ZBTElEIGFuZCBNSUdSQVRFX1BGTl9NSUdSQVRFIGZsYWcKPiArICog
c2V0LiBJZiB0aGUgY29ycmVzcG9uZGluZyBlbnRyeSBpbiBkc3QgYXJyYXkgaGFzIE1JR1JBVEVf
UEZOX1ZBTElEIGZsYWcgc2V0LAo+ICsgKiB0aGVuIG1pZ3JhdGVfdm1hX3BhZ2VzKCkgdG8gbWln
cmF0ZSBzdHJ1Y3QgcGFnZSBpbmZvcm1hdGlvbiBmcm9tIHRoZSBzb3VyY2UKPiArICogc3RydWN0
IHBhZ2UgdG8gdGhlIGRlc3RpbmF0aW9uIHN0cnVjdCBwYWdlLiAgSWYgaXQgZmFpbHMgdG8gbWln
cmF0ZSB0aGUKPiArICogc3RydWN0IHBhZ2UgaW5mb3JtYXRpb24sIHRoZW4gaXQgY2xlYXJzIHRo
ZSBNSUdSQVRFX1BGTl9NSUdSQVRFIGZsYWcgaW4gdGhlCj4gKyAqIHNyYyBhcnJheS4KPiArICoK
PiArICogQXQgdGhpcyBwb2ludCBhbGwgc3VjY2Vzc2Z1bGx5IG1pZ3JhdGVkIHBhZ2VzIGhhdmUg
YW4gZW50cnkgaW4gdGhlIHNyYwo+ICsgKiBhcnJheSB3aXRoIE1JR1JBVEVfUEZOX1ZBTElEIGFu
ZCBNSUdSQVRFX1BGTl9NSUdSQVRFIGZsYWcgc2V0IGFuZCB0aGUgZHN0Cj4gKyAqIGFycmF5IGVu
dHJ5IHdpdGggTUlHUkFURV9QRk5fVkFMSUQgZmxhZyBzZXQuCj4gKyAqCj4gKyAqIE9uY2UgbWln
cmF0ZV92bWFfcGFnZXMoKSByZXR1cm5zIHRoZSBjYWxsZXIgbWF5IGluc3BlY3Qgd2hpY2ggcGFn
ZXMgd2VyZQo+ICsgKiBzdWNjZXNzZnVsbHkgbWlncmF0ZWQsIGFuZCB3aGljaCB3ZXJlIG5vdC4g
IFN1Y2Nlc3NmdWxseSBtaWdyYXRlZCBwYWdlcyB3aWxsCj4gKyAqIGhhdmUgdGhlIE1JR1JBVEVf
UEZOX01JR1JBVEUgZmxhZyBzZXQgZm9yIHRoZWlyIHNyYyBhcnJheSBlbnRyeS4KPiArICoKPiAr
ICogSXQgaXMgc2FmZSB0byB1cGRhdGUgZGV2aWNlIHBhZ2UgdGFibGUgZnJvbSB3aXRoaW4gdGhl
IGZpbmFsaXplX2FuZF9tYXAoKQo+ICsgKiBjYWxsYmFjayBiZWNhdXNlIGJvdGggZGVzdGluYXRp
b24gYW5kIHNvdXJjZSBwYWdlIGFyZSBzdGlsbCBsb2NrZWQsIGFuZCB0aGUKPiArICogbW1hcF9z
ZW0gaXMgaGVsZCBpbiByZWFkIG1vZGUgKGhlbmNlIG5vIG9uZSBjYW4gdW5tYXAgdGhlIHJhbmdl
IGJlaW5nCj4gKyAqIG1pZ3JhdGVkKS4KPiArICoKPiArICogT25jZSB0aGUgY2FsbGVyIGlzIGRv
bmUgY2xlYW5pbmcgdXAgdGhpbmdzIGFuZCB1cGRhdGluZyBpdHMgcGFnZSB0YWJsZSAoaWYgaXQK
PiArICogY2hvc2UgdG8gZG8gc28sIHRoaXMgaXMgbm90IGFuIG9ibGlnYXRpb24pIGl0IGZpbmFs
bHkgY2FsbHMKPiArICogbWlncmF0ZV92bWFfZmluYWxpemUoKSB0byB1cGRhdGUgdGhlIENQVSBw
YWdlIHRhYmxlIHRvIHBvaW50IHRvIG5ldyBwYWdlcwo+ICsgKiBmb3Igc3VjY2Vzc2Z1bGx5IG1p
Z3JhdGVkIHBhZ2VzIG9yIG90aGVyd2lzZSByZXN0b3JlIHRoZSBDUFUgcGFnZSB0YWJsZSB0bwo+
ICsgKiBwb2ludCB0byB0aGUgb3JpZ2luYWwgc291cmNlIHBhZ2VzLgo+ICsgKi8KPiAraW50IG1p
Z3JhdGVfdm1hX3NldHVwKHN0cnVjdCBtaWdyYXRlX3ZtYSAqYXJncykKPiArewo+ICsJbG9uZyBu
cl9wYWdlcyA9IChhcmdzLT5lbmQgLSBhcmdzLT5zdGFydCkgPj4gUEFHRV9TSElGVDsKPiArCj4g
KwlhcmdzLT5zdGFydCAmPSBQQUdFX01BU0s7Cj4gKwlhcmdzLT5lbmQgJj0gUEFHRV9NQVNLOwo+
ICsJaWYgKCFhcmdzLT52bWEgfHwgaXNfdm1faHVnZXRsYl9wYWdlKGFyZ3MtPnZtYSkgfHwKPiAr
CSAgICAoYXJncy0+dm1hLT52bV9mbGFncyAmIFZNX1NQRUNJQUwpIHx8IHZtYV9pc19kYXgoYXJn
cy0+dm1hKSkKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCWlmIChucl9wYWdlcyA8PSAwKQo+ICsJ
CXJldHVybiAtRUlOVkFMOwo+ICsJaWYgKGFyZ3MtPnN0YXJ0IDwgYXJncy0+dm1hLT52bV9zdGFy
dCB8fAo+ICsJICAgIGFyZ3MtPnN0YXJ0ID49IGFyZ3MtPnZtYS0+dm1fZW5kKQo+ICsJCXJldHVy
biAtRUlOVkFMOwo+ICsJaWYgKGFyZ3MtPmVuZCA8PSBhcmdzLT52bWEtPnZtX3N0YXJ0IHx8IGFy
Z3MtPmVuZCA+IGFyZ3MtPnZtYS0+dm1fZW5kKQo+ICsJCXJldHVybiAtRUlOVkFMOwo+ICsJaWYg
KCFhcmdzLT5zcmMgfHwgIWFyZ3MtPmRzdCkKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlt
ZW1zZXQoYXJncy0+c3JjLCAwLCBzaXplb2YoKmFyZ3MtPnNyYykgKiBucl9wYWdlcyk7Cj4gKwo+
ICsJbWlncmF0ZV92bWFfY29sbGVjdChhcmdzKTsKPiArCWlmIChhcmdzLT5jcGFnZXMpCj4gKwkJ
bWlncmF0ZV92bWFfcHJlcGFyZShhcmdzKTsKPiArCWlmIChhcmdzLT5jcGFnZXMpCj4gKwkJbWln
cmF0ZV92bWFfdW5tYXAoYXJncyk7Cj4gKwo+ICsJLyoKPiArCSAqIEF0IHRoaXMgcG9pbnQgcGFn
ZXMgYXJlIGxvY2tlZCBhbmQgdW5tYXBwZWQsIGFuZCB0aHVzIHRoZXkgaGF2ZQo+ICsJICogc3Rh
YmxlIGNvbnRlbnQgYW5kIGNhbiBzYWZlbHkgYmUgY29waWVkIHRvIGRlc3RpbmF0aW9uIG1lbW9y
eSB0aGF0Cj4gKwkgKiBpcyBhbGxvY2F0ZWQgYnkgdGhlIGRyaXZlcnMuCj4gKwkgKi8KPiArCXJl
dHVybiAwOwo+ICsKPiArfQo+ICtFWFBPUlRfU1lNQk9MKG1pZ3JhdGVfdm1hX3NldHVwKTsKPiAr
Cj4gICBzdGF0aWMgdm9pZCBtaWdyYXRlX3ZtYV9pbnNlcnRfcGFnZShzdHJ1Y3QgbWlncmF0ZV92
bWEgKm1pZ3JhdGUsCj4gICAJCQkJICAgIHVuc2lnbmVkIGxvbmcgYWRkciwKPiAgIAkJCQkgICAg
c3RydWN0IHBhZ2UgKnBhZ2UsCj4gQEAgLTI3MDksNyArMjgwMSw3IEBAIHN0YXRpYyB2b2lkIG1p
Z3JhdGVfdm1hX2luc2VydF9wYWdlKHN0cnVjdCBtaWdyYXRlX3ZtYSAqbWlncmF0ZSwKPiAgIAkq
c3JjICY9IH5NSUdSQVRFX1BGTl9NSUdSQVRFOwo+ICAgfQo+ICAgCj4gLS8qCj4gKy8qKgo+ICAg
ICogbWlncmF0ZV92bWFfcGFnZXMoKSAtIG1pZ3JhdGUgbWV0YS1kYXRhIGZyb20gc3JjIHBhZ2Ug
dG8gZHN0IHBhZ2UKPiAgICAqIEBtaWdyYXRlOiBtaWdyYXRlIHN0cnVjdCBjb250YWluaW5nIGFs
bCBtaWdyYXRpb24gaW5mb3JtYXRpb24KPiAgICAqCj4gQEAgLTI3MTcsNyArMjgwOSw3IEBAIHN0
YXRpYyB2b2lkIG1pZ3JhdGVfdm1hX2luc2VydF9wYWdlKHN0cnVjdCBtaWdyYXRlX3ZtYSAqbWln
cmF0ZSwKPiAgICAqIHN0cnVjdCBwYWdlLiBUaGlzIGVmZmVjdGl2ZWx5IGZpbmlzaGVzIHRoZSBt
aWdyYXRpb24gZnJvbSBzb3VyY2UgcGFnZSB0byB0aGUKPiAgICAqIGRlc3RpbmF0aW9uIHBhZ2Uu
Cj4gICAgKi8KPiAtc3RhdGljIHZvaWQgbWlncmF0ZV92bWFfcGFnZXMoc3RydWN0IG1pZ3JhdGVf
dm1hICptaWdyYXRlKQo+ICt2b2lkIG1pZ3JhdGVfdm1hX3BhZ2VzKHN0cnVjdCBtaWdyYXRlX3Zt
YSAqbWlncmF0ZSkKPiAgIHsKPiAgIAljb25zdCB1bnNpZ25lZCBsb25nIG5wYWdlcyA9IG1pZ3Jh
dGUtPm5wYWdlczsKPiAgIAljb25zdCB1bnNpZ25lZCBsb25nIHN0YXJ0ID0gbWlncmF0ZS0+c3Rh
cnQ7Cj4gQEAgLTI3OTEsOCArMjg4Myw5IEBAIHN0YXRpYyB2b2lkIG1pZ3JhdGVfdm1hX3BhZ2Vz
KHN0cnVjdCBtaWdyYXRlX3ZtYSAqbWlncmF0ZSkKPiAgIAlpZiAobm90aWZpZWQpCj4gICAJCW1t
dV9ub3RpZmllcl9pbnZhbGlkYXRlX3JhbmdlX29ubHlfZW5kKCZyYW5nZSk7Cj4gICB9Cj4gK0VY
UE9SVF9TWU1CT0wobWlncmF0ZV92bWFfcGFnZXMpOwo+ICAgCj4gLS8qCj4gKy8qKgo+ICAgICog
bWlncmF0ZV92bWFfZmluYWxpemUoKSAtIHJlc3RvcmUgQ1BVIHBhZ2UgdGFibGUgZW50cnkKPiAg
ICAqIEBtaWdyYXRlOiBtaWdyYXRlIHN0cnVjdCBjb250YWluaW5nIGFsbCBtaWdyYXRpb24gaW5m
b3JtYXRpb24KPiAgICAqCj4gQEAgLTI4MDMsNyArMjg5Niw3IEBAIHN0YXRpYyB2b2lkIG1pZ3Jh
dGVfdm1hX3BhZ2VzKHN0cnVjdCBtaWdyYXRlX3ZtYSAqbWlncmF0ZSkKPiAgICAqIFRoaXMgYWxz
byB1bmxvY2tzIHRoZSBwYWdlcyBhbmQgcHV0cyB0aGVtIGJhY2sgb24gdGhlIGxydSwgb3IgZHJv
cHMgdGhlIGV4dHJhCj4gICAgKiByZWZjb3VudCwgZm9yIGRldmljZSBwYWdlcy4KPiAgICAqLwo+
IC1zdGF0aWMgdm9pZCBtaWdyYXRlX3ZtYV9maW5hbGl6ZShzdHJ1Y3QgbWlncmF0ZV92bWEgKm1p
Z3JhdGUpCj4gK3ZvaWQgbWlncmF0ZV92bWFfZmluYWxpemUoc3RydWN0IG1pZ3JhdGVfdm1hICpt
aWdyYXRlKQo+ICAgewo+ICAgCWNvbnN0IHVuc2lnbmVkIGxvbmcgbnBhZ2VzID0gbWlncmF0ZS0+
bnBhZ2VzOwo+ICAgCXVuc2lnbmVkIGxvbmcgaTsKPiBAQCAtMjg0NiwxMjQgKzI5MzksNSBAQCBz
dGF0aWMgdm9pZCBtaWdyYXRlX3ZtYV9maW5hbGl6ZShzdHJ1Y3QgbWlncmF0ZV92bWEgKm1pZ3Jh
dGUpCj4gICAJCX0KPiAgIAl9Cj4gICB9Cj4gLQo+IC0vKgo+IC0gKiBtaWdyYXRlX3ZtYSgpIC0g
bWlncmF0ZSBhIHJhbmdlIG9mIG1lbW9yeSBpbnNpZGUgdm1hCj4gLSAqCj4gLSAqIEBvcHM6IG1p
Z3JhdGlvbiBjYWxsYmFjayBmb3IgYWxsb2NhdGluZyBkZXN0aW5hdGlvbiBtZW1vcnkgYW5kIGNv
cHlpbmcKPiAtICogQHZtYTogdmlydHVhbCBtZW1vcnkgYXJlYSBjb250YWluaW5nIHRoZSByYW5n
ZSB0byBiZSBtaWdyYXRlZAo+IC0gKiBAc3RhcnQ6IHN0YXJ0IGFkZHJlc3Mgb2YgdGhlIHJhbmdl
IHRvIG1pZ3JhdGUgKGluY2x1c2l2ZSkKPiAtICogQGVuZDogZW5kIGFkZHJlc3Mgb2YgdGhlIHJh
bmdlIHRvIG1pZ3JhdGUgKGV4Y2x1c2l2ZSkKPiAtICogQHNyYzogYXJyYXkgb2YgaG1tX3Bmbl90
IGNvbnRhaW5pbmcgc291cmNlIHBmbnMKPiAtICogQGRzdDogYXJyYXkgb2YgaG1tX3Bmbl90IGNv
bnRhaW5pbmcgZGVzdGluYXRpb24gcGZucwo+IC0gKiBAcHJpdmF0ZTogcG9pbnRlciBwYXNzZWQg
YmFjayB0byBlYWNoIG9mIHRoZSBjYWxsYmFjawo+IC0gKiBSZXR1cm5zOiAwIG9uIHN1Y2Nlc3Ms
IGVycm9yIGNvZGUgb3RoZXJ3aXNlCj4gLSAqCj4gLSAqIFRoaXMgZnVuY3Rpb24gdHJpZXMgdG8g
bWlncmF0ZSBhIHJhbmdlIG9mIG1lbW9yeSB2aXJ0dWFsIGFkZHJlc3MgcmFuZ2UsIHVzaW5nCj4g
LSAqIGNhbGxiYWNrcyB0byBhbGxvY2F0ZSBhbmQgY29weSBtZW1vcnkgZnJvbSBzb3VyY2UgdG8g
ZGVzdGluYXRpb24uIEZpcnN0IGl0Cj4gLSAqIGNvbGxlY3RzIGFsbCB0aGUgcGFnZXMgYmFja2lu
ZyBlYWNoIHZpcnR1YWwgYWRkcmVzcyBpbiB0aGUgcmFuZ2UsIHNhdmluZyB0aGlzCj4gLSAqIGlu
c2lkZSB0aGUgc3JjIGFycmF5LiBUaGVuIGl0IGxvY2tzIHRob3NlIHBhZ2VzIGFuZCB1bm1hcHMg
dGhlbS4gT25jZSB0aGUgcGFnZXMKPiAtICogYXJlIGxvY2tlZCBhbmQgdW5tYXBwZWQsIGl0IGNo
ZWNrcyB3aGV0aGVyIGVhY2ggcGFnZSBpcyBwaW5uZWQgb3Igbm90LiBQYWdlcwo+IC0gKiB0aGF0
IGFyZW4ndCBwaW5uZWQgaGF2ZSB0aGUgTUlHUkFURV9QRk5fTUlHUkFURSBmbGFnIHNldCAoYnkg
dGhpcyBmdW5jdGlvbikKPiAtICogaW4gdGhlIGNvcnJlc3BvbmRpbmcgc3JjIGFycmF5IGVudHJ5
LiBJdCB0aGVuIHJlc3RvcmVzIGFueSBwYWdlcyB0aGF0IGFyZQo+IC0gKiBwaW5uZWQsIGJ5IHJl
bWFwcGluZyBhbmQgdW5sb2NraW5nIHRob3NlIHBhZ2VzLgo+IC0gKgo+IC0gKiBBdCB0aGlzIHBv
aW50IGl0IGNhbGxzIHRoZSBhbGxvY19hbmRfY29weSgpIGNhbGxiYWNrLiBGb3IgZG9jdW1lbnRh
dGlvbiBvbgo+IC0gKiB3aGF0IGlzIGV4cGVjdGVkIGZyb20gdGhhdCBjYWxsYmFjaywgc2VlIHN0
cnVjdCBtaWdyYXRlX3ZtYV9vcHMgY29tbWVudHMgaW4KPiAtICogaW5jbHVkZS9saW51eC9taWdy
YXRlLmgKPiAtICoKPiAtICogQWZ0ZXIgdGhlIGFsbG9jX2FuZF9jb3B5KCkgY2FsbGJhY2ssIHRo
aXMgZnVuY3Rpb24gZ29lcyBvdmVyIGVhY2ggZW50cnkgaW4KPiAtICogdGhlIHNyYyBhcnJheSB0
aGF0IGhhcyB0aGUgTUlHUkFURV9QRk5fVkFMSUQgYW5kIE1JR1JBVEVfUEZOX01JR1JBVEUgZmxh
Zwo+IC0gKiBzZXQuIElmIHRoZSBjb3JyZXNwb25kaW5nIGVudHJ5IGluIGRzdCBhcnJheSBoYXMg
TUlHUkFURV9QRk5fVkFMSUQgZmxhZyBzZXQsCj4gLSAqIHRoZW4gdGhlIGZ1bmN0aW9uIHRyaWVz
IHRvIG1pZ3JhdGUgc3RydWN0IHBhZ2UgaW5mb3JtYXRpb24gZnJvbSB0aGUgc291cmNlCj4gLSAq
IHN0cnVjdCBwYWdlIHRvIHRoZSBkZXN0aW5hdGlvbiBzdHJ1Y3QgcGFnZS4gSWYgaXQgZmFpbHMg
dG8gbWlncmF0ZSB0aGUgc3RydWN0Cj4gLSAqIHBhZ2UgaW5mb3JtYXRpb24sIHRoZW4gaXQgY2xl
YXJzIHRoZSBNSUdSQVRFX1BGTl9NSUdSQVRFIGZsYWcgaW4gdGhlIHNyYwo+IC0gKiBhcnJheS4K
PiAtICoKPiAtICogQXQgdGhpcyBwb2ludCBhbGwgc3VjY2Vzc2Z1bGx5IG1pZ3JhdGVkIHBhZ2Vz
IGhhdmUgYW4gZW50cnkgaW4gdGhlIHNyYwo+IC0gKiBhcnJheSB3aXRoIE1JR1JBVEVfUEZOX1ZB
TElEIGFuZCBNSUdSQVRFX1BGTl9NSUdSQVRFIGZsYWcgc2V0IGFuZCB0aGUgZHN0Cj4gLSAqIGFy
cmF5IGVudHJ5IHdpdGggTUlHUkFURV9QRk5fVkFMSUQgZmxhZyBzZXQuCj4gLSAqCj4gLSAqIEl0
IHRoZW4gY2FsbHMgdGhlIGZpbmFsaXplX2FuZF9tYXAoKSBjYWxsYmFjay4gU2VlIGNvbW1lbnRz
IGZvciAic3RydWN0Cj4gLSAqIG1pZ3JhdGVfdm1hX29wcyIsIGluIGluY2x1ZGUvbGludXgvbWln
cmF0ZS5oIGZvciBkZXRhaWxzIGFib3V0Cj4gLSAqIGZpbmFsaXplX2FuZF9tYXAoKSBiZWhhdmlv
ci4KPiAtICoKPiAtICogQWZ0ZXIgdGhlIGZpbmFsaXplX2FuZF9tYXAoKSBjYWxsYmFjaywgZm9y
IHN1Y2Nlc3NmdWxseSBtaWdyYXRlZCBwYWdlcywgdGhpcwo+IC0gKiBmdW5jdGlvbiB1cGRhdGVz
IHRoZSBDUFUgcGFnZSB0YWJsZSB0byBwb2ludCB0byBuZXcgcGFnZXMsIG90aGVyd2lzZSBpdAo+
IC0gKiByZXN0b3JlcyB0aGUgQ1BVIHBhZ2UgdGFibGUgdG8gcG9pbnQgdG8gdGhlIG9yaWdpbmFs
IHNvdXJjZSBwYWdlcy4KPiAtICoKPiAtICogRnVuY3Rpb24gcmV0dXJucyAwIGFmdGVyIHRoZSBh
Ym92ZSBzdGVwcywgZXZlbiBpZiBubyBwYWdlcyB3ZXJlIG1pZ3JhdGVkCj4gLSAqIChUaGUgZnVu
Y3Rpb24gb25seSByZXR1cm5zIGFuIGVycm9yIGlmIGFueSBvZiB0aGUgYXJndW1lbnRzIGFyZSBp
bnZhbGlkLikKPiAtICoKPiAtICogQm90aCBzcmMgYW5kIGRzdCBhcnJheSBtdXN0IGJlIGJpZyBl
bm91Z2ggZm9yIChlbmQgLSBzdGFydCkgPj4gUEFHRV9TSElGVAo+IC0gKiB1bnNpZ25lZCBsb25n
IGVudHJpZXMuCj4gLSAqLwo+IC1pbnQgbWlncmF0ZV92bWEoY29uc3Qgc3RydWN0IG1pZ3JhdGVf
dm1hX29wcyAqb3BzLAo+IC0JCXN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hLAo+IC0JCXVuc2ln
bmVkIGxvbmcgc3RhcnQsCj4gLQkJdW5zaWduZWQgbG9uZyBlbmQsCj4gLQkJdW5zaWduZWQgbG9u
ZyAqc3JjLAo+IC0JCXVuc2lnbmVkIGxvbmcgKmRzdCwKPiAtCQl2b2lkICpwcml2YXRlKQo+IC17
Cj4gLQlzdHJ1Y3QgbWlncmF0ZV92bWEgbWlncmF0ZTsKPiAtCj4gLQkvKiBTYW5pdHkgY2hlY2sg
dGhlIGFyZ3VtZW50cyAqLwo+IC0Jc3RhcnQgJj0gUEFHRV9NQVNLOwo+IC0JZW5kICY9IFBBR0Vf
TUFTSzsKPiAtCWlmICghdm1hIHx8IGlzX3ZtX2h1Z2V0bGJfcGFnZSh2bWEpIHx8ICh2bWEtPnZt
X2ZsYWdzICYgVk1fU1BFQ0lBTCkgfHwKPiAtCQkJdm1hX2lzX2RheCh2bWEpKQo+IC0JCXJldHVy
biAtRUlOVkFMOwo+IC0JaWYgKHN0YXJ0IDwgdm1hLT52bV9zdGFydCB8fCBzdGFydCA+PSB2bWEt
PnZtX2VuZCkKPiAtCQlyZXR1cm4gLUVJTlZBTDsKPiAtCWlmIChlbmQgPD0gdm1hLT52bV9zdGFy
dCB8fCBlbmQgPiB2bWEtPnZtX2VuZCkKPiAtCQlyZXR1cm4gLUVJTlZBTDsKPiAtCWlmICghb3Bz
IHx8ICFzcmMgfHwgIWRzdCB8fCBzdGFydCA+PSBlbmQpCj4gLQkJcmV0dXJuIC1FSU5WQUw7Cj4g
LQo+IC0JbWVtc2V0KHNyYywgMCwgc2l6ZW9mKCpzcmMpICogKChlbmQgLSBzdGFydCkgPj4gUEFH
RV9TSElGVCkpOwo+IC0JbWlncmF0ZS5zcmMgPSBzcmM7Cj4gLQltaWdyYXRlLmRzdCA9IGRzdDsK
PiAtCW1pZ3JhdGUuc3RhcnQgPSBzdGFydDsKPiAtCW1pZ3JhdGUubnBhZ2VzID0gMDsKPiAtCW1p
Z3JhdGUuY3BhZ2VzID0gMDsKPiAtCW1pZ3JhdGUuZW5kID0gZW5kOwo+IC0JbWlncmF0ZS52bWEg
PSB2bWE7Cj4gLQo+IC0JLyogQ29sbGVjdCwgYW5kIHRyeSB0byB1bm1hcCBzb3VyY2UgcGFnZXMg
Ki8KPiAtCW1pZ3JhdGVfdm1hX2NvbGxlY3QoJm1pZ3JhdGUpOwo+IC0JaWYgKCFtaWdyYXRlLmNw
YWdlcykKPiAtCQlyZXR1cm4gMDsKPiAtCj4gLQkvKiBMb2NrIGFuZCBpc29sYXRlIHBhZ2UgKi8K
PiAtCW1pZ3JhdGVfdm1hX3ByZXBhcmUoJm1pZ3JhdGUpOwo+IC0JaWYgKCFtaWdyYXRlLmNwYWdl
cykKPiAtCQlyZXR1cm4gMDsKPiAtCj4gLQkvKiBVbm1hcCBwYWdlcyAqLwo+IC0JbWlncmF0ZV92
bWFfdW5tYXAoJm1pZ3JhdGUpOwo+IC0JaWYgKCFtaWdyYXRlLmNwYWdlcykKPiAtCQlyZXR1cm4g
MDsKPiAtCj4gLQkvKgo+IC0JICogQXQgdGhpcyBwb2ludCBwYWdlcyBhcmUgbG9ja2VkIGFuZCB1
bm1hcHBlZCwgYW5kIHRodXMgdGhleSBoYXZlCj4gLQkgKiBzdGFibGUgY29udGVudCBhbmQgY2Fu
IHNhZmVseSBiZSBjb3BpZWQgdG8gZGVzdGluYXRpb24gbWVtb3J5IHRoYXQKPiAtCSAqIGlzIGFs
bG9jYXRlZCBieSB0aGUgY2FsbGJhY2suCj4gLQkgKgo+IC0JICogTm90ZSB0aGF0IG1pZ3JhdGlv
biBjYW4gZmFpbCBpbiBtaWdyYXRlX3ZtYV9zdHJ1Y3RfcGFnZSgpIGZvciBlYWNoCj4gLQkgKiBp
bmRpdmlkdWFsIHBhZ2UuCj4gLQkgKi8KPiAtCW9wcy0+YWxsb2NfYW5kX2NvcHkodm1hLCBzcmMs
IGRzdCwgc3RhcnQsIGVuZCwgcHJpdmF0ZSk7Cj4gLQo+IC0JLyogVGhpcyBkb2VzIHRoZSByZWFs
IG1pZ3JhdGlvbiBvZiBzdHJ1Y3QgcGFnZSAqLwo+IC0JbWlncmF0ZV92bWFfcGFnZXMoJm1pZ3Jh
dGUpOwo+IC0KPiAtCW9wcy0+ZmluYWxpemVfYW5kX21hcCh2bWEsIHNyYywgZHN0LCBzdGFydCwg
ZW5kLCBwcml2YXRlKTsKPiAtCj4gLQkvKiBVbmxvY2sgYW5kIHJlbWFwIHBhZ2VzICovCj4gLQlt
aWdyYXRlX3ZtYV9maW5hbGl6ZSgmbWlncmF0ZSk7Cj4gLQo+IC0JcmV0dXJuIDA7Cj4gLX0KPiAt
RVhQT1JUX1NZTUJPTChtaWdyYXRlX3ZtYSk7Cj4gK0VYUE9SVF9TWU1CT0wobWlncmF0ZV92bWFf
ZmluYWxpemUpOwo+ICAgI2VuZGlmIC8qIGRlZmluZWQoTUlHUkFURV9WTUFfSEVMUEVSKSAqLwo+
IApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2
ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
