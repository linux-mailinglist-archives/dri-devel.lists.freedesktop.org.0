Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 2BA9D21E8ED
	for <lists+dri-devel@lfdr.de>; Tue, 14 Jul 2020 09:03:27 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 00C716E908;
	Tue, 14 Jul 2020 07:02:44 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-il1-x143.google.com (mail-il1-x143.google.com
 [IPv6:2607:f8b0:4864:20::143])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C9FA86E082
 for <dri-devel@lists.freedesktop.org>; Fri, 10 Jul 2020 09:46:54 +0000 (UTC)
Received: by mail-il1-x143.google.com with SMTP id i18so4535245ilk.10
 for <dri-devel@lists.freedesktop.org>; Fri, 10 Jul 2020 02:46:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=2PkZ0KMfPN1OA7SrWBVa6yVGQXjrOPg2jq/AQlMASlY=;
 b=ZOfJNQOKwRkLfcD2eXSRyILzui2BO7olC4bpIs6yzqjz2vzJ7mSvdWeG9Luhy159Ia
 kUVwCZoutyaVDYjKFg0zXMcDp5rlLlQqtF8MecsaiLh64L8x0R2Eqi5tE9KDQNVOO++1
 DnhrWLxD81m2SDIiWDDnHjq20UCci/3xBhn9BF+GvNfAILrD5lP0J1QTXTNptZuiPIXT
 w2n/tfODNLwasFelYFtAufY9fRURwzSWs0EMn/Nn1SwMcucpUf1uJByfmjwGuJmyTIOY
 Xj6ooLgSR4i9MKZGYQGIiYp21q+vwhQj8cTBhsbG4jQ/lqJeo88Y9GfJJkOWLG16A5++
 s+xA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=2PkZ0KMfPN1OA7SrWBVa6yVGQXjrOPg2jq/AQlMASlY=;
 b=t3aZV3UjRdHl5gOzbgEqI8jWZKNFz0fd5fPpPbxa2emajoB3bLvT2MCB8bndUxziXX
 5sJ97OrHnVtsV9dOiDf6u6/XPw7ozc2oWiry8RyAcd2D8zEEDH+AFQ7RHsKmxVCN1N7I
 bQruwNrTe0+jUlG6C1iwUGwn+WWm/Dx+oVQ2BO2OFMMiONnL/sjhCQrTUJvkSQRL4mHx
 EkL2n9DYSdQpvYzCQ09rYFntXjfNj/J2NrE8C9TbIxCVwbae8NAkdjukKrrgf4SpOHA3
 milydkDlX0MSMm5mPERXlbUs7QRCArqtpCi5jZnel/+S87ZMsQemr6b1Uv/hloHY8Fom
 5K3Q==
X-Gm-Message-State: AOAM531K/wm6y2sEjqD0b0K4eBDLmytblBvZala7nLFRCw6oFdiLyjwq
 1i14GAIDM2CrTcx/MpdfIFytIzkiPFwR6mzDNVI=
X-Google-Smtp-Source: ABdhPJwcGdIXGchFJo9j3gS5um5v/M6e0fXhjYwH54KU+x8EPpZmCDXIdH3Pn38J7vDe6YaAy4OUikxJ7gVPSmEBQQk=
X-Received: by 2002:a92:4b08:: with SMTP id m8mr48711749ilg.150.1594374413838; 
 Fri, 10 Jul 2020 02:46:53 -0700 (PDT)
MIME-Version: 1.0
References: <20200710092548.316054-1-peron.clem@gmail.com>
 <20200710092548.316054-5-peron.clem@gmail.com>
In-Reply-To: <20200710092548.316054-5-peron.clem@gmail.com>
From: =?UTF-8?B?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
Date: Fri, 10 Jul 2020 11:46:42 +0200
Message-ID: <CAJiuCcf=RnxkHJ=uoZaWL_p50JB6N0FiZSooLLOSy4pmCuEmZA@mail.gmail.com>
Subject: Re: [PATCH v4 04/14] drm/panfrost: introduce panfrost_devfreq struct
To: Rob Herring <robh@kernel.org>, Tomeu Vizoso <tomeu.vizoso@collabora.com>, 
 Steven Price <steven.price@arm.com>,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>, 
 Viresh Kumar <vireshk@kernel.org>, Nishanth Menon <nm@ti.com>,
 Stephen Boyd <sboyd@kernel.org>, 
 Maxime Ripard <mripard@kernel.org>, Chen-Yu Tsai <wens@csie.org>
X-Mailman-Approved-At: Tue, 14 Jul 2020 07:02:08 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-kernel <linux-kernel@vger.kernel.org>,
 dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGksCgpPbiBGcmksIDEwIEp1bCAyMDIwIGF0IDExOjI1LCBDbMOpbWVudCBQw6lyb24gPHBlcm9u
LmNsZW1AZ21haWwuY29tPiB3cm90ZToKPgo+IEludHJvZHVjZSBhIHByb3BlciBwYW5mcm9zdF9k
ZXZmcmVxIHRvIGRlYWwgd2l0aCBkZXZmcmVxIHZhcmlhYmxlcy4KPgo+IFJldmlld2VkLWJ5OiBT
dGV2ZW4gUHJpY2UgPHN0ZXZlbi5wcmljZUBhcm0uY29tPgo+IFJldmlld2VkLWJ5OiBBbHlzc2Eg
Um9zZW56d2VpZyA8YWx5c3NhLnJvc2VuendlaWdAY29sbGFib3JhLmNvbT4KPiBTaWduZWQtb2Zm
LWJ5OiBDbMOpbWVudCBQw6lyb24gPHBlcm9uLmNsZW1AZ21haWwuY29tPgo+IC0tLQo+ICBkcml2
ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2ZnJlcS5jIHwgNzYgKysrKysrKysrKysr
LS0tLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZmcmVxLmgg
fCAyMCArKysrKy0KPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5o
ICB8IDExICstLQo+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMgICAg
IHwgIDQgKy0KPiAgNCBmaWxlcyBjaGFuZ2VkLCA2NSBpbnNlcnRpb25zKCspLCA0NiBkZWxldGlv
bnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rf
ZGV2ZnJlcS5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmZyZXEuYwo+
IGluZGV4IGRmN2I3MWRhOWE4NC4uOTYyNTUwMzYzMzkxIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZmcmVxLmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2ZnJlcS5jCj4gQEAgLTEwLDIzICsxMCwyMyBAQAo+ICAj
aW5jbHVkZSAicGFuZnJvc3RfZGV2aWNlLmgiCj4gICNpbmNsdWRlICJwYW5mcm9zdF9kZXZmcmVx
LmgiCj4KPiAtc3RhdGljIHZvaWQgcGFuZnJvc3RfZGV2ZnJlcV91cGRhdGVfdXRpbGl6YXRpb24o
c3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCj4gK3N0YXRpYyB2b2lkIHBhbmZyb3N0X2Rl
dmZyZXFfdXBkYXRlX3V0aWxpemF0aW9uKHN0cnVjdCBwYW5mcm9zdF9kZXZmcmVxICpwZmRldmZy
ZXEpCj4gIHsKPiAgICAgICAgIGt0aW1lX3Qgbm93Owo+ICAgICAgICAga3RpbWVfdCBsYXN0Owo+
Cj4gLSAgICAgICBpZiAoIXBmZGV2LT5kZXZmcmVxLmRldmZyZXEpCj4gKyAgICAgICBpZiAoIXBm
ZGV2ZnJlcS0+ZGV2ZnJlcSkKPiAgICAgICAgICAgICAgICAgcmV0dXJuOwo+Cj4gICAgICAgICBu
b3cgPSBrdGltZV9nZXQoKTsKPiAtICAgICAgIGxhc3QgPSBwZmRldi0+ZGV2ZnJlcS50aW1lX2xh
c3RfdXBkYXRlOwo+ICsgICAgICAgbGFzdCA9IHBmZGV2ZnJlcS0+dGltZV9sYXN0X3VwZGF0ZTsK
Pgo+IC0gICAgICAgaWYgKGF0b21pY19yZWFkKCZwZmRldi0+ZGV2ZnJlcS5idXN5X2NvdW50KSA+
IDApCj4gLSAgICAgICAgICAgICAgIHBmZGV2LT5kZXZmcmVxLmJ1c3lfdGltZSArPSBrdGltZV9z
dWIobm93LCBsYXN0KTsKPiArICAgICAgIGlmIChhdG9taWNfcmVhZCgmcGZkZXZmcmVxLT5idXN5
X2NvdW50KSA+IDApCj4gKyAgICAgICAgICAgICAgIHBmZGV2ZnJlcS0+YnVzeV90aW1lICs9IGt0
aW1lX3N1Yihub3csIGxhc3QpOwo+ICAgICAgICAgZWxzZQo+IC0gICAgICAgICAgICAgICBwZmRl
di0+ZGV2ZnJlcS5pZGxlX3RpbWUgKz0ga3RpbWVfc3ViKG5vdywgbGFzdCk7Cj4gKyAgICAgICAg
ICAgICAgIHBmZGV2ZnJlcS0+aWRsZV90aW1lICs9IGt0aW1lX3N1Yihub3csIGxhc3QpOwo+Cj4g
LSAgICAgICBwZmRldi0+ZGV2ZnJlcS50aW1lX2xhc3RfdXBkYXRlID0gbm93Owo+ICsgICAgICAg
cGZkZXZmcmVxLT50aW1lX2xhc3RfdXBkYXRlID0gbm93Owo+ICB9Cj4KPiAgc3RhdGljIGludCBw
YW5mcm9zdF9kZXZmcmVxX3RhcmdldChzdHJ1Y3QgZGV2aWNlICpkZXYsIHVuc2lnbmVkIGxvbmcg
KmZyZXEsCj4gQEAgLTQ3LDMwICs0NywzMSBAQCBzdGF0aWMgaW50IHBhbmZyb3N0X2RldmZyZXFf
dGFyZ2V0KHN0cnVjdCBkZXZpY2UgKmRldiwgdW5zaWduZWQgbG9uZyAqZnJlcSwKPiAgICAgICAg
IHJldHVybiAwOwo+ICB9Cj4KPiAtc3RhdGljIHZvaWQgcGFuZnJvc3RfZGV2ZnJlcV9yZXNldChz
dHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldikKPiArc3RhdGljIHZvaWQgcGFuZnJvc3RfZGV2
ZnJlcV9yZXNldChzdHJ1Y3QgcGFuZnJvc3RfZGV2ZnJlcSAqcGZkZXZmcmVxKQo+ICB7Cj4gLSAg
ICAgICBwZmRldi0+ZGV2ZnJlcS5idXN5X3RpbWUgPSAwOwo+IC0gICAgICAgcGZkZXYtPmRldmZy
ZXEuaWRsZV90aW1lID0gMDsKPiAtICAgICAgIHBmZGV2LT5kZXZmcmVxLnRpbWVfbGFzdF91cGRh
dGUgPSBrdGltZV9nZXQoKTsKPiArICAgICAgIHBmZGV2ZnJlcS0+YnVzeV90aW1lID0gMDsKPiAr
ICAgICAgIHBmZGV2ZnJlcS0+aWRsZV90aW1lID0gMDsKPiArICAgICAgIHBmZGV2ZnJlcS0+dGlt
ZV9sYXN0X3VwZGF0ZSA9IGt0aW1lX2dldCgpOwo+ICB9Cj4KPiAgc3RhdGljIGludCBwYW5mcm9z
dF9kZXZmcmVxX2dldF9kZXZfc3RhdHVzKHN0cnVjdCBkZXZpY2UgKmRldiwKPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRldmZyZXFfZGV2X3N0YXR1
cyAqc3RhdHVzKQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiA9
IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwo+ICsgICAgICAgc3RydWN0IHBhbmZyb3N0X2RldmZyZXEg
KnBmZGV2ZnJlcSA9ICZwZmRldi0+cGZkZXZmcmVxOwo+Cj4gLSAgICAgICBwYW5mcm9zdF9kZXZm
cmVxX3VwZGF0ZV91dGlsaXphdGlvbihwZmRldik7Cj4gKyAgICAgICBwYW5mcm9zdF9kZXZmcmVx
X3VwZGF0ZV91dGlsaXphdGlvbihwZmRldmZyZXEpOwo+Cj4gICAgICAgICBzdGF0dXMtPmN1cnJl
bnRfZnJlcXVlbmN5ID0gY2xrX2dldF9yYXRlKHBmZGV2LT5jbG9jayk7Cj4gLSAgICAgICBzdGF0
dXMtPnRvdGFsX3RpbWUgPSBrdGltZV90b19ucyhrdGltZV9hZGQocGZkZXYtPmRldmZyZXEuYnVz
eV90aW1lLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHBmZGV2LT5kZXZmcmVxLmlkbGVfdGltZSkpOwo+ICsgICAgICAgc3RhdHVzLT50b3RhbF90
aW1lID0ga3RpbWVfdG9fbnMoa3RpbWVfYWRkKHBmZGV2ZnJlcS0+YnVzeV90aW1lLAo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBmZGV2ZnJlcS0+
aWRsZV90aW1lKSk7Cj4KPiAtICAgICAgIHN0YXR1cy0+YnVzeV90aW1lID0ga3RpbWVfdG9fbnMo
cGZkZXYtPmRldmZyZXEuYnVzeV90aW1lKTsKPiArICAgICAgIHN0YXR1cy0+YnVzeV90aW1lID0g
a3RpbWVfdG9fbnMocGZkZXZmcmVxLT5idXN5X3RpbWUpOwo+Cj4gLSAgICAgICBwYW5mcm9zdF9k
ZXZmcmVxX3Jlc2V0KHBmZGV2KTsKPiArICAgICAgIHBhbmZyb3N0X2RldmZyZXFfcmVzZXQocGZk
ZXZmcmVxKTsKPgo+IC0gICAgICAgZGV2X2RiZyhwZmRldi0+ZGV2LCAiYnVzeSAlbHUgdG90YWwg
JWx1ICVsdSAlJSBmcmVxICVsdSBNSHpcbiIsIHN0YXR1cy0+YnVzeV90aW1lLAo+IC0gICAgICAg
ICAgICAgICBzdGF0dXMtPnRvdGFsX3RpbWUsCj4gKyAgICAgICBkZXZfZGJnKHBmZGV2LT5kZXYs
ICJidXN5ICVsdSB0b3RhbCAlbHUgJWx1ICUlIGZyZXEgJWx1IE1IelxuIiwKPiArICAgICAgICAg
ICAgICAgc3RhdHVzLT5idXN5X3RpbWUsIHN0YXR1cy0+dG90YWxfdGltZSwKPiAgICAgICAgICAg
ICAgICAgc3RhdHVzLT5idXN5X3RpbWUgLyAoc3RhdHVzLT50b3RhbF90aW1lIC8gMTAwKSwKPiAg
ICAgICAgICAgICAgICAgc3RhdHVzLT5jdXJyZW50X2ZyZXF1ZW5jeSAvIDEwMDAgLyAxMDAwKTsK
Pgo+IEBAIC05MSw2ICs5Miw3IEBAIGludCBwYW5mcm9zdF9kZXZmcmVxX2luaXQoc3RydWN0IHBh
bmZyb3N0X2RldmljZSAqcGZkZXYpCj4gICAgICAgICBzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmcGZk
ZXYtPnBkZXYtPmRldjsKPiAgICAgICAgIHN0cnVjdCBkZXZmcmVxICpkZXZmcmVxOwo+ICAgICAg
ICAgc3RydWN0IHRoZXJtYWxfY29vbGluZ19kZXZpY2UgKmNvb2xpbmc7Cj4gKyAgICAgICBzdHJ1
Y3QgcGFuZnJvc3RfZGV2ZnJlcSAqcGZkZXZmcmVxID0gJnBmZGV2LT5wZmRldmZyZXE7Cj4KPiAg
ICAgICAgIHJldCA9IGRldl9wbV9vcHBfb2ZfYWRkX3RhYmxlKGRldik7Cj4gICAgICAgICBpZiAo
cmV0ID09IC1FTk9ERVYpIC8qIE9wdGlvbmFsLCBjb250aW51ZSB3aXRob3V0IGRldmZyZXEgKi8K
PiBAQCAtOTgsNyArMTAwLDcgQEAgaW50IHBhbmZyb3N0X2RldmZyZXFfaW5pdChzdHJ1Y3QgcGFu
ZnJvc3RfZGV2aWNlICpwZmRldikKPiAgICAgICAgIGVsc2UgaWYgKHJldCkKPiAgICAgICAgICAg
ICAgICAgcmV0dXJuIHJldDsKPgo+IC0gICAgICAgcGFuZnJvc3RfZGV2ZnJlcV9yZXNldChwZmRl
dik7Cj4gKyAgICAgICBwYW5mcm9zdF9kZXZmcmVxX3Jlc2V0KHBmZGV2ZnJlcSk7Cj4KPiAgICAg
ICAgIGN1cl9mcmVxID0gY2xrX2dldF9yYXRlKHBmZGV2LT5jbG9jayk7Cj4KPiBAQCAtMTE2LDUz
ICsxMTgsNTkgQEAgaW50IHBhbmZyb3N0X2RldmZyZXFfaW5pdChzdHJ1Y3QgcGFuZnJvc3RfZGV2
aWNlICpwZmRldikKPiAgICAgICAgICAgICAgICAgZGV2X3BtX29wcF9vZl9yZW1vdmVfdGFibGUo
ZGV2KTsKPiAgICAgICAgICAgICAgICAgcmV0dXJuIFBUUl9FUlIoZGV2ZnJlcSk7Cj4gICAgICAg
ICB9Cj4gLSAgICAgICBwZmRldi0+ZGV2ZnJlcS5kZXZmcmVxID0gZGV2ZnJlcTsKPiArICAgICAg
IHBmZGV2ZnJlcS0+ZGV2ZnJlcSA9IGRldmZyZXE7Cj4KPiAgICAgICAgIGNvb2xpbmcgPSBvZl9k
ZXZmcmVxX2Nvb2xpbmdfcmVnaXN0ZXIoZGV2LT5vZl9ub2RlLCBkZXZmcmVxKTsKPiAgICAgICAg
IGlmIChJU19FUlIoY29vbGluZykpCj4gICAgICAgICAgICAgICAgIERSTV9ERVZfSU5GTyhkZXYs
ICJGYWlsZWQgdG8gcmVnaXN0ZXIgY29vbGluZyBkZXZpY2VcbiIpOwo+ICAgICAgICAgZWxzZQo+
IC0gICAgICAgICAgICAgICBwZmRldi0+ZGV2ZnJlcS5jb29saW5nID0gY29vbGluZzsKPiArICAg
ICAgICAgICAgICAgcGZkZXZmcmVxLT5jb29saW5nID0gY29vbGluZzsKPgo+ICAgICAgICAgcmV0
dXJuIDA7Cj4gIH0KPgo+ICB2b2lkIHBhbmZyb3N0X2RldmZyZXFfZmluaShzdHJ1Y3QgcGFuZnJv
c3RfZGV2aWNlICpwZmRldikKPiAgewo+IC0gICAgICAgaWYgKHBmZGV2LT5kZXZmcmVxLmNvb2xp
bmcpCj4gLSAgICAgICAgICAgICAgIGRldmZyZXFfY29vbGluZ191bnJlZ2lzdGVyKHBmZGV2LT5k
ZXZmcmVxLmNvb2xpbmcpOwo+ICsgICAgICAgc3RydWN0IHBhbmZyb3N0X2RldmZyZXEgKnBmZGV2
ZnJlcSA9ICZwZmRldi0+cGZkZXZmcmVxOwo+ICsKPiArICAgICAgIGlmIChwZmRldmZyZXEtPmNv
b2xpbmcpCj4gKyAgICAgICAgICAgICAgIGRldmZyZXFfY29vbGluZ191bnJlZ2lzdGVyKHBmZGV2
ZnJlcS0+Y29vbGluZyk7Cj4gICAgICAgICBkZXZfcG1fb3BwX29mX3JlbW92ZV90YWJsZSgmcGZk
ZXYtPnBkZXYtPmRldik7Cj4gIH0KPgo+ICB2b2lkIHBhbmZyb3N0X2RldmZyZXFfcmVzdW1lKHN0
cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KQo+ICB7Cj4gLSAgICAgICBpZiAoIXBmZGV2LT5k
ZXZmcmVxLmRldmZyZXEpCj4gKyAgICAgICBzdHJ1Y3QgcGFuZnJvc3RfZGV2ZnJlcSAqcGZkZXZm
cmVxID0gJnBmZGV2LT5wZmRldmZyZXE7Cj4gKwo+ICsgICAgICAgaWYgKCFwZmRldmZyZXEtPmRl
dmZyZXEpCj4gICAgICAgICAgICAgICAgIHJldHVybjsKPgo+IC0gICAgICAgcGFuZnJvc3RfZGV2
ZnJlcV9yZXNldChwZmRldik7Cj4gKyAgICAgICBwYW5mcm9zdF9kZXZmcmVxX3Jlc2V0KHBmZGV2
ZnJlcSk7Cj4KPiAtICAgICAgIGRldmZyZXFfcmVzdW1lX2RldmljZShwZmRldi0+ZGV2ZnJlcS5k
ZXZmcmVxKTsKPiArICAgICAgIGRldmZyZXFfcmVzdW1lX2RldmljZShwZmRldmZyZXEtPmRldmZy
ZXEpOwo+ICB9Cj4KPiAgdm9pZCBwYW5mcm9zdF9kZXZmcmVxX3N1c3BlbmQoc3RydWN0IHBhbmZy
b3N0X2RldmljZSAqcGZkZXYpCj4gIHsKPiAtICAgICAgIGlmICghcGZkZXYtPmRldmZyZXEuZGV2
ZnJlcSkKPiArICAgICAgIHN0cnVjdCBwYW5mcm9zdF9kZXZmcmVxICpwZmRldmZyZXEgPSAmcGZk
ZXYtPnBmZGV2ZnJlcTsKPiArCj4gKyAgICAgICBpZiAoIXBmZGV2ZnJlcS0+ZGV2ZnJlcSkKPiAg
ICAgICAgICAgICAgICAgcmV0dXJuOwo+Cj4gLSAgICAgICBkZXZmcmVxX3N1c3BlbmRfZGV2aWNl
KHBmZGV2LT5kZXZmcmVxLmRldmZyZXEpOwo+ICsgICAgICAgZGV2ZnJlcV9zdXNwZW5kX2Rldmlj
ZShwZmRldmZyZXEtPmRldmZyZXEpOwo+ICB9Cj4KPiAtdm9pZCBwYW5mcm9zdF9kZXZmcmVxX3Jl
Y29yZF9idXN5KHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KQo+ICt2b2lkIHBhbmZyb3N0
X2RldmZyZXFfcmVjb3JkX2J1c3koc3RydWN0IHBhbmZyb3N0X2RldmZyZXEgKnBmZGV2ZnJlcSkK
PiAgewo+IC0gICAgICAgcGFuZnJvc3RfZGV2ZnJlcV91cGRhdGVfdXRpbGl6YXRpb24ocGZkZXYp
Owo+IC0gICAgICAgYXRvbWljX2luYygmcGZkZXYtPmRldmZyZXEuYnVzeV9jb3VudCk7Cj4gKyAg
ICAgICBwYW5mcm9zdF9kZXZmcmVxX3VwZGF0ZV91dGlsaXphdGlvbihwZmRldmZyZXEpOwo+ICsg
ICAgICAgYXRvbWljX2luYygmcGZkZXZmcmVxLT5idXN5X2NvdW50KTsKPiAgfQo+Cj4gLXZvaWQg
cGFuZnJvc3RfZGV2ZnJlcV9yZWNvcmRfaWRsZShzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRl
dikKPiArdm9pZCBwYW5mcm9zdF9kZXZmcmVxX3JlY29yZF9pZGxlKHN0cnVjdCBwYW5mcm9zdF9k
ZXZmcmVxICpwZmRldmZyZXEpCj4gIHsKPiAgICAgICAgIGludCBjb3VudDsKPgo+IC0gICAgICAg
cGFuZnJvc3RfZGV2ZnJlcV91cGRhdGVfdXRpbGl6YXRpb24ocGZkZXYpOwo+IC0gICAgICAgY291
bnQgPSBhdG9taWNfZGVjX2lmX3Bvc2l0aXZlKCZwZmRldi0+ZGV2ZnJlcS5idXN5X2NvdW50KTsK
PiArICAgICAgIHBhbmZyb3N0X2RldmZyZXFfdXBkYXRlX3V0aWxpemF0aW9uKHBmZGV2ZnJlcSk7
Cj4gKyAgICAgICBjb3VudCA9IGF0b21pY19kZWNfaWZfcG9zaXRpdmUoJnBmZGV2ZnJlcS0+YnVz
eV9jb3VudCk7Cj4gICAgICAgICBXQVJOX09OKGNvdW50IDwgMCk7Cj4gIH0KPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmZyZXEuaCBiL2RyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZmcmVxLmgKPiBpbmRleCAwNjExYmVmZmM4ZDAu
LjA2OTdmOGQ1YWEzNCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFu
ZnJvc3RfZGV2ZnJlcS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0
X2RldmZyZXEuaAo+IEBAIC00LDEzICs0LDI5IEBACj4gICNpZm5kZWYgX19QQU5GUk9TVF9ERVZG
UkVRX0hfXwo+ICAjZGVmaW5lIF9fUEFORlJPU1RfREVWRlJFUV9IX18KPgo+ICsjaW5jbHVkZSA8
bGludXgva3RpbWUuaD4KPiArCj4gK3N0cnVjdCBkZXZmcmVxOwo+ICtzdHJ1Y3QgdGhlcm1hbF9j
b29saW5nX2RldmljZTsKPiArCj4gK3N0cnVjdCBwYW5mcm9zdF9kZXZpY2U7Cj4gKwo+ICtzdHJ1
Y3QgcGFuZnJvc3RfZGV2ZnJlcSB7Cj4gKyAgICAgICBzdHJ1Y3QgZGV2ZnJlcSAqZGV2ZnJlcTsK
PiArICAgICAgIHN0cnVjdCB0aGVybWFsX2Nvb2xpbmdfZGV2aWNlICpjb29saW5nOwo+ICsgICAg
ICAga3RpbWVfdCBidXN5X3RpbWU7Cj4gKyAgICAgICBrdGltZV90IGlkbGVfdGltZTsKPiArICAg
ICAgIGt0aW1lX3QgdGltZV9sYXN0X3VwZGF0ZTsKPiArICAgICAgIGF0b21pY190IGJ1c3lfY291
bnQ7Cj4gK307Cj4gKwo+ICBpbnQgcGFuZnJvc3RfZGV2ZnJlcV9pbml0KHN0cnVjdCBwYW5mcm9z
dF9kZXZpY2UgKnBmZGV2KTsKPiAgdm9pZCBwYW5mcm9zdF9kZXZmcmVxX2Zpbmkoc3RydWN0IHBh
bmZyb3N0X2RldmljZSAqcGZkZXYpOwo+Cj4gIHZvaWQgcGFuZnJvc3RfZGV2ZnJlcV9yZXN1bWUo
c3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpOwo+ICB2b2lkIHBhbmZyb3N0X2RldmZyZXFf
c3VzcGVuZChzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldik7Cj4KPiAtdm9pZCBwYW5mcm9z
dF9kZXZmcmVxX3JlY29yZF9idXN5KHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KTsKPiAt
dm9pZCBwYW5mcm9zdF9kZXZmcmVxX3JlY29yZF9pZGxlKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2Ug
KnBmZGV2KTsKPiArdm9pZCBwYW5mcm9zdF9kZXZmcmVxX3JlY29yZF9idXN5KHN0cnVjdCBwYW5m
cm9zdF9kZXZmcmVxICpkZXZmcmVxKTsKPiArdm9pZCBwYW5mcm9zdF9kZXZmcmVxX3JlY29yZF9p
ZGxlKHN0cnVjdCBwYW5mcm9zdF9kZXZmcmVxICpkZXZmcmVxKTsKPgo+ICAjZW5kaWYgLyogX19Q
QU5GUk9TVF9ERVZGUkVRX0hfXyAqLwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFu
ZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmggYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJv
c3RfZGV2aWNlLmgKPiBpbmRleCBjMzBjNzE5YTgwNTkuLjJlZmE1OWM5ZDFjNSAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmgKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmgKPiBAQCAtMTMsNiArMTMs
OCBAQAo+ICAjaW5jbHVkZSA8ZHJtL2RybV9tbS5oPgo+ICAjaW5jbHVkZSA8ZHJtL2dwdV9zY2hl
ZHVsZXIuaD4KPgo+ICsjaW5jbHVkZSAicGFuZnJvc3RfZGV2ZnJlcS5oIgo+ICsKPiAgc3RydWN0
IHBhbmZyb3N0X2RldmljZTsKPiAgc3RydWN0IHBhbmZyb3N0X21tdTsKPiAgc3RydWN0IHBhbmZy
b3N0X2pvYl9zbG90Owo+IEBAIC0xMDcsMTQgKzEwOSw3IEBAIHN0cnVjdCBwYW5mcm9zdF9kZXZp
Y2Ugewo+ICAgICAgICAgc3RydWN0IGxpc3RfaGVhZCBzaHJpbmtlcl9saXN0Owo+ICAgICAgICAg
c3RydWN0IHNocmlua2VyIHNocmlua2VyOwo+Cj4gLSAgICAgICBzdHJ1Y3Qgewo+IC0gICAgICAg
ICAgICAgICBzdHJ1Y3QgZGV2ZnJlcSAqZGV2ZnJlcTsKPiAtICAgICAgICAgICAgICAgc3RydWN0
IHRoZXJtYWxfY29vbGluZ19kZXZpY2UgKmNvb2xpbmc7Cj4gLSAgICAgICAgICAgICAgIGt0aW1l
X3QgYnVzeV90aW1lOwo+IC0gICAgICAgICAgICAgICBrdGltZV90IGlkbGVfdGltZTsKPiAtICAg
ICAgICAgICAgICAga3RpbWVfdCB0aW1lX2xhc3RfdXBkYXRlOwo+IC0gICAgICAgICAgICAgICBh
dG9taWNfdCBidXN5X2NvdW50Owo+IC0gICAgICAgfSBkZXZmcmVxOwo+ICsgICAgICAgc3RydWN0
IHBhbmZyb3N0X2RldmZyZXEgcGZkZXZmcmVxOwo+ICB9Owo+Cj4gIHN0cnVjdCBwYW5mcm9zdF9t
bXUgewo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9i
LmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMKCmRyaXZlcnMvZ3B1
L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9qb2IuYzo0MTM6MzMKSSBtaXNzZWQgb24gcGZkZXYgaW4g
bXkgcmViYXNlIGhlcmUsCgo+IGluZGV4IDRjMTNkYmFlNjhmYi4uNDliMjE1N2Q4NTQ5IDEwMDY0
NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9qb2IuYwo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9qb2IuYwo+IEBAIC0xNDUsNyArMTQ1
LDcgQEAgc3RhdGljIHZvaWQgcGFuZnJvc3Rfam9iX2h3X3N1Ym1pdChzdHJ1Y3QgcGFuZnJvc3Rf
am9iICpqb2IsIGludCBqcykKPiAgICAgICAgIHU2NCBqY19oZWFkID0gam9iLT5qYzsKPiAgICAg
ICAgIGludCByZXQ7Cj4KPiAtICAgICAgIHBhbmZyb3N0X2RldmZyZXFfcmVjb3JkX2J1c3kocGZk
ZXYpOwo+ICsgICAgICAgcGFuZnJvc3RfZGV2ZnJlcV9yZWNvcmRfYnVzeSgmcGZkZXYtPnBmZGV2
ZnJlcSk7Cj4KPiAgICAgICAgIHJldCA9IHBtX3J1bnRpbWVfZ2V0X3N5bmMocGZkZXYtPmRldik7
Cj4gICAgICAgICBpZiAocmV0IDwgMCkKPiBAQCAtNDc4LDcgKzQ3OCw3IEBAIHN0YXRpYyBpcnFy
ZXR1cm5fdCBwYW5mcm9zdF9qb2JfaXJxX2hhbmRsZXIoaW50IGlycSwgdm9pZCAqZGF0YSkKPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBmZGV2LT5qb2JzW2pdID0gTlVMTDsKPgo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuZnJvc3RfbW11X2FzX3B1dChwZmRl
diwgJmpvYi0+ZmlsZV9wcml2LT5tbXUpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgcGFuZnJvc3RfZGV2ZnJlcV9yZWNvcmRfaWRsZShwZmRldik7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBwYW5mcm9zdF9kZXZmcmVxX3JlY29yZF9pZGxlKCZwZmRldi0+cGZk
ZXZmcmVxKTsKPgo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG1hX2ZlbmNlX3Np
Z25hbF9sb2NrZWQoam9iLT5kb25lX2ZlbmNlKTsKPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHBtX3J1bnRpbWVfcHV0X2F1dG9zdXNwZW5kKHBmZGV2LT5kZXYpOwo+IC0tCj4gMi4y
NS4xCj4KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJp
LWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
