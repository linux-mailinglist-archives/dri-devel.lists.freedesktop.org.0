Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id AC43547C62
	for <lists+dri-devel@lfdr.de>; Mon, 17 Jun 2019 10:26:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 260FD8919A;
	Mon, 17 Jun 2019 08:26:57 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qt1-x849.google.com (mail-qt1-x849.google.com
 [IPv6:2607:f8b0:4864:20::849])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7E3E789169
 for <dri-devel@lists.freedesktop.org>; Mon, 17 Jun 2019 08:26:55 +0000 (UTC)
Received: by mail-qt1-x849.google.com with SMTP id p34so8633472qtp.1
 for <dri-devel@lists.freedesktop.org>; Mon, 17 Jun 2019 01:26:55 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=cUnWzVAEdqo7bGTNoMyzrIXrLOc4T43iDGYg6P6lpY4=;
 b=b1MsHCsSNcmLgq8Dp/OqIeywzwH6PmAFMcc1fdrv3eeXM8qFbW45g5pAtZJqDOZL9K
 v9jxi4XGUptlAIg1AqsmU1/0+q2DEKFGvKJ349wQoiVwURjk7CeEESL/RWG7dhwSVfSv
 vikUoOjpaOL9B70DIqjMsJg3k2xbx9ywmORO2BTVhjrPmud76qkqg8SN0X24fqEVurgC
 XXAsuo9noi7O/pWTgD170Qh0lqHwkhR8O1cxijB33yekNIYjzXhxbkZIODcn0FQ2396v
 TBIkx9iBEsS686kOsnDErkPUMeh7bW1jF3VIJDT/5Ny9QRoqVUnPOsH3xw4sgUZFVbZ5
 vqTQ==
X-Gm-Message-State: APjAAAWJLWCMt2Q3IPU/DUeET1l9SkGeymcbsPq7Xa64VzuPiNOrnVyh
 Mum3MMJFNRDa43wICe1Ju4XP1Rg4LkjvpRaUUJe2Dw==
X-Google-Smtp-Source: APXvYqxNXmCWnPByBmN+rCTqVJl6sYyohRlRCxNiROvAb9NP+5L7zbkrbYvqHQOdbMZE8mUlmYnX7lqsX/Z2RH+ZdUY5fw==
X-Received: by 2002:a37:4d82:: with SMTP id a124mr16268821qkb.72.1560760014245; 
 Mon, 17 Jun 2019 01:26:54 -0700 (PDT)
Date: Mon, 17 Jun 2019 01:25:59 -0700
In-Reply-To: <20190617082613.109131-1-brendanhiggins@google.com>
Message-Id: <20190617082613.109131-5-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190617082613.109131-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.22.0.410.gd8fdbe21b5-goog
Subject: [PATCH v5 04/18] kunit: test: add kunit_stream a std::stream like
 logger
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=cUnWzVAEdqo7bGTNoMyzrIXrLOc4T43iDGYg6P6lpY4=;
 b=wQ0RYif4cw/h0o/LGMM2xUdirnSFJ0JsUONqN1ZdxRULIgBX27MlLzTRLpa1oqIzdF
 P6Dwe5eWAU9fP9ddEtwJoCrtZpkdSZERoVGk1KckdNqq6Assl5VfFZQznKjm/HmXuK49
 CZxd6od0b+uFUd3MAZQwjmvIRHcQd30mnhpBn/jyXmtF5xsTA8g3KTVHkrTOecDtulCd
 EvJv96og8ZBKk/WdNNM5z9WjBb4S+PFOuuPD1vg/8OJf+FH4bQdzWs9v+uV0jtmGQvxp
 MkGoRvyb6LtEtcih/MTXiEeu14WrH0rX3zasBargq8yPieKjpn+ACHIjmQaFwaWnmTp/
 USGg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QSBsb3Qgb2YgdGhlIGV4cGVjdGF0aW9uIGFuZCBhc3NlcnRpb24gaW5mcmFzdHJ1Y3R1cmUgcHJp
bnRzIG91dCBmYWlybHkKY29tcGxpY2F0ZWQgdGVzdCBmYWlsdXJlIG1lc3NhZ2VzLCBzbyBhZGQg
YSBDKysgc3R5bGUgbG9nIGxpYnJhcnkgZm9yCmZvciBsb2dnaW5nIHRlc3QgcmVzdWx0cy4KClNp
Z25lZC1vZmYtYnk6IEJyZW5kYW4gSGlnZ2lucyA8YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbT4K
UmV2aWV3ZWQtYnk6IEdyZWcgS3JvYWgtSGFydG1hbiA8Z3JlZ2toQGxpbnV4Zm91bmRhdGlvbi5v
cmc+ClJldmlld2VkLWJ5OiBMb2dhbiBHdW50aG9ycGUgPGxvZ2FuZ0BkZWx0YXRlZS5jb20+Ci0t
LQpDaGFuZ2VzIFNpbmNlIExhc3QgUmV2aXNpb246CiAtIFJlbmFtZWQga3VuaXRfbmV3X3N0cmVh
bSgpIHRvIGFsbG9jX2t1bml0X3N0cmVhbSgpIGFzIHN1Z2dlc3RlZCBieQogICBTdGVwaGVuIEJv
eWQuCiAtIFJlbW92ZWQgdGhlIGFiaWxpdHkgdG8gc2V0IGxvZyBsZXZlbCBhZnRlciBhbGxvY2F0
aW5nIGEgc3RyZWFtLCBhcwogICBzdWdnZXN0ZWQgYnkgU3RlcGhlbiBCb3lkLgogLSBSZW1vdmVk
IGxvY2tpbmcsIGFzIGl0IGlzIG5vdyB1bm5lY2Vzc2FyeSB3aXRoIHRoZSBwcmV2aW91cyBjaGFu
Z2UuCiAtIE1hZGUgYSBudW1iZXIgb2Ygb3RoZXIgc21hbGwgY2hhbmdlcyBsaWtlIHJlbmFtaW5n
IHBhcmFtZXRlcnMgYXMKICAgc3VnZ2VzdGVkIGJ5IFN0ZXBoZW4gQm95ZC4KLS0tCiBpbmNsdWRl
L2t1bml0L2t1bml0LXN0cmVhbS5oIHwgIDgxICsrKysrKysrKysrKysrKysrKysrKysrCiBpbmNs
dWRlL2t1bml0L3Rlc3QuaCAgICAgICAgIHwgICAzICsKIGt1bml0L01ha2VmaWxlICAgICAgICAg
ICAgICAgfCAgIDMgKy0KIGt1bml0L2t1bml0LXN0cmVhbS5jICAgICAgICAgfCAxMjMgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIGt1bml0L3Rlc3QuYyAgICAgICAgICAgICAg
ICAgfCAgIDYgKysKIDUgZmlsZXMgY2hhbmdlZCwgMjE1IGluc2VydGlvbnMoKyksIDEgZGVsZXRp
b24oLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBpbmNsdWRlL2t1bml0L2t1bml0LXN0cmVhbS5oCiBj
cmVhdGUgbW9kZSAxMDA2NDQga3VuaXQva3VuaXQtc3RyZWFtLmMKCmRpZmYgLS1naXQgYS9pbmNs
dWRlL2t1bml0L2t1bml0LXN0cmVhbS5oIGIvaW5jbHVkZS9rdW5pdC9rdW5pdC1zdHJlYW0uaApu
ZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAwLi5hN2I1M2VhYmY2YmU0Ci0t
LSAvZGV2L251bGwKKysrIGIvaW5jbHVkZS9rdW5pdC9rdW5pdC1zdHJlYW0uaApAQCAtMCwwICsx
LDgxIEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCAqLworLyoKKyAqIEMr
KyBzdHJlYW0gc3R5bGUgc3RyaW5nIGZvcm1hdHRlciBhbmQgcHJpbnRlciB1c2VkIGluIEtVbml0
IGZvciBvdXRwdXR0aW5nCisgKiBLVW5pdCBtZXNzYWdlcy4KKyAqCisgKiBDb3B5cmlnaHQgKEMp
IDIwMTksIEdvb2dsZSBMTEMuCisgKiBBdXRob3I6IEJyZW5kYW4gSGlnZ2lucyA8YnJlbmRhbmhp
Z2dpbnNAZ29vZ2xlLmNvbT4KKyAqLworCisjaWZuZGVmIF9LVU5JVF9LVU5JVF9TVFJFQU1fSAor
I2RlZmluZSBfS1VOSVRfS1VOSVRfU1RSRUFNX0gKKworI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+
CisjaW5jbHVkZSA8a3VuaXQvc3RyaW5nLXN0cmVhbS5oPgorCitzdHJ1Y3Qga3VuaXQ7CisKKy8q
KgorICogc3RydWN0IGt1bml0X3N0cmVhbSAtIGEgc3RkOjpzdHJlYW0gc3R5bGUgc3RyaW5nIGJ1
aWxkZXIuCisgKgorICogQSBzdGQ6OnN0cmVhbSBzdHlsZSBzdHJpbmcgYnVpbGRlci4gQWxsb3dz
IG1lc3NhZ2VzIHRvIGJlIGJ1aWx0IHVwIGFuZAorICogcHJpbnRlZCBhbGwgYXQgb25jZS4KKyAq
Lworc3RydWN0IGt1bml0X3N0cmVhbSB7CisJLyogcHJpdmF0ZTogaW50ZXJuYWwgdXNlIG9ubHku
ICovCisJc3RydWN0IGt1bml0ICp0ZXN0OworCWNvbnN0IGNoYXIgKmxldmVsOworCXN0cnVjdCBz
dHJpbmdfc3RyZWFtICppbnRlcm5hbF9zdHJlYW07Cit9OworCisvKioKKyAqIGFsbG9jX2t1bml0
X3N0cmVhbSgpIC0gY29uc3RydWN0cyBhIG5ldyAmc3RydWN0IGt1bml0X3N0cmVhbS4KKyAqIEB0
ZXN0OiBUaGUgdGVzdCBjb250ZXh0IG9iamVjdC4KKyAqIEBsZXZlbDogVGhlIGxvZyBsZXZlbCBh
dCB3aGljaCB0byBwcmludCBvdXQgdGhlIG1lc3NhZ2UuCisgKgorICogQ29uc3RydWN0cyBhIG5l
dyB0ZXN0IG1hbmFnZWQgJnN0cnVjdCBrdW5pdF9zdHJlYW0uCisgKi8KK3N0cnVjdCBrdW5pdF9z
dHJlYW0gKmFsbG9jX2t1bml0X3N0cmVhbShzdHJ1Y3Qga3VuaXQgKnRlc3QsIGNvbnN0IGNoYXIg
KmxldmVsKTsKKworLyoqCisgKiBrdW5pdF9zdHJlYW1fYWRkKCk6IGFkZHMgdGhlIGZvcm1hdHRl
ZCBpbnB1dCB0byB0aGUgaW50ZXJuYWwgYnVmZmVyLgorICogQGtzdHJlYW06IHRoZSBzdHJlYW0g
YmVpbmcgb3BlcmF0ZWQgb24uCisgKiBAZm10OiBwcmludGYgc3R5bGUgZm9ybWF0IHN0cmluZyB0
byBhcHBlbmQgdG8gc3RyZWFtLgorICoKKyAqIEFwcGVuZHMgdGhlIGZvcm1hdHRlZCBzdHJpbmcs
IEBmbXQsIHRvIHRoZSBpbnRlcm5hbCBidWZmZXIuCisgKi8KK3ZvaWQgX19wcmludGYoMiwgMykg
a3VuaXRfc3RyZWFtX2FkZChzdHJ1Y3Qga3VuaXRfc3RyZWFtICprc3RyZWFtLAorCQkJCSAgICAg
Y29uc3QgY2hhciAqZm10LCAuLi4pOworCisvKioKKyAqIGt1bml0X3N0cmVhbV9hcHBlbmQoKTog
YXBwZW5kcyB0aGUgY29udGVudHMgb2YgQG90aGVyIHRvIEBrc3RyZWFtLgorICogQGtzdHJlYW06
IHRoZSBzdHJlYW0gdG8gd2hpY2ggQG90aGVyIGlzIGFwcGVuZGVkLgorICogQG90aGVyOiB0aGUg
c3RyZWFtIHdob3NlIGNvbnRlbnRzIGFyZSBhcHBlbmRlZCB0byBAa3N0cmVhbS4KKyAqCisgKiBB
cHBlbmRzIHRoZSBjb250ZW50cyBvZiBAb3RoZXIgdG8gQGtzdHJlYW0uCisgKi8KK3ZvaWQga3Vu
aXRfc3RyZWFtX2FwcGVuZChzdHJ1Y3Qga3VuaXRfc3RyZWFtICprc3RyZWFtLAorCQkJIHN0cnVj
dCBrdW5pdF9zdHJlYW0gKm90aGVyKTsKKworLyoqCisgKiBrdW5pdF9zdHJlYW1fY29tbWl0KCk6
IHByaW50cyBvdXQgdGhlIGludGVybmFsIGJ1ZmZlciB0byB0aGUgdXNlci4KKyAqIEBrc3RyZWFt
OiB0aGUgc3RyZWFtIGJlaW5nIG9wZXJhdGVkIG9uLgorICoKKyAqIE91dHB1dHMgdGhlIGNvbnRl
bnRzIG9mIHRoZSBpbnRlcm5hbCBidWZmZXIgYXMgYSBrdW5pdF9wcmludGsgZm9ybWF0dGVkCisg
KiBvdXRwdXQuIEtVTklUX1NUUkVBTSBPTkxZIE9VVFBVVFMgSVRTIEJVRkZFUiBUTyBUSEUgVVNF
UiBJRiBDT01NSVQgSVMKKyAqIENBTExFRCEhISBUaGUgcmVhc29uIGZvciB0aGlzIGlzIHRoYXQg
aXQgYWxsb3dzIHVzIHRvIGNvbnN0cnVjdCBhIG1lc3NhZ2UKKyAqIGJlZm9yZSB3ZSBrbm93IHdo
ZXRoZXIgd2Ugd2FudCB0byBwcmludCBpdCBvdXQ7IHRoaXMgY2FuIGJlIGV4dHJlbWVseSBoYW5k
eQorICogaWYgdGhlcmUgaXMgaW5mb3JtYXRpb24geW91IG1pZ2h0IG5lZWQgZm9yIGEgZmFpbHVy
ZSBtZXNzYWdlIHRoYXQgaXMgZWFzaWVzdAorICogdG8gY29sbGVjdCBpbiB0aGUgc3RlcHMgbGVh
ZGluZyB1cCB0byB0aGUgYWN0dWFsIGNoZWNrLgorICovCit2b2lkIGt1bml0X3N0cmVhbV9jb21t
aXQoc3RydWN0IGt1bml0X3N0cmVhbSAqa3N0cmVhbSk7CisKKy8qKgorICoga3VuaXRfc3RyZWFt
X2NsZWFyKCk6IGNsZWFycyB0aGUgaW50ZXJuYWwgYnVmZmVyLgorICogQGtzdHJlYW06IHRoZSBz
dHJlYW0gYmVpbmcgb3BlcmF0ZWQgb24uCisgKgorICogQ2xlYXJzIHRoZSBjb250ZW50cyBvZiB0
aGUgaW50ZXJuYWwgYnVmZmVyLgorICovCit2b2lkIGt1bml0X3N0cmVhbV9jbGVhcihzdHJ1Y3Qg
a3VuaXRfc3RyZWFtICprc3RyZWFtKTsKKworI2VuZGlmIC8qIF9LVU5JVF9LVU5JVF9TVFJFQU1f
SCAqLwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9rdW5pdC90ZXN0LmggYi9pbmNsdWRlL2t1bml0L3Rl
c3QuaAppbmRleCAyN2JkOTViNmI1NTIzLi44M2ZiN2FjZTFiMzIwIDEwMDY0NAotLS0gYS9pbmNs
dWRlL2t1bml0L3Rlc3QuaAorKysgYi9pbmNsdWRlL2t1bml0L3Rlc3QuaApAQCAtMTEsNiArMTEs
NyBAQAogCiAjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4KICNpbmNsdWRlIDxsaW51eC9zbGFiLmg+
CisjaW5jbHVkZSA8a3VuaXQva3VuaXQtc3RyZWFtLmg+CiAKIHN0cnVjdCBrdW5pdF9yZXNvdXJj
ZTsKIApAQCAtMTcyLDYgKzE3Myw4IEBAIHN0cnVjdCBrdW5pdCB7CiAKIHZvaWQga3VuaXRfaW5p
dF90ZXN0KHN0cnVjdCBrdW5pdCAqdGVzdCwgY29uc3QgY2hhciAqbmFtZSk7CiAKK3ZvaWQga3Vu
aXRfZmFpbChzdHJ1Y3Qga3VuaXQgKnRlc3QsIHN0cnVjdCBrdW5pdF9zdHJlYW0gKnN0cmVhbSk7
CisKIGludCBrdW5pdF9ydW5fdGVzdHMoc3RydWN0IGt1bml0X21vZHVsZSAqbW9kdWxlKTsKIAog
LyoqCmRpZmYgLS1naXQgYS9rdW5pdC9NYWtlZmlsZSBiL2t1bml0L01ha2VmaWxlCmluZGV4IDI3
NWI1NjVhMGU4MWYuLjZkZGM2MjJlZTZiMWMgMTAwNjQ0Ci0tLSBhL2t1bml0L01ha2VmaWxlCisr
KyBiL2t1bml0L01ha2VmaWxlCkBAIC0xLDIgKzEsMyBAQAogb2JqLSQoQ09ORklHX0tVTklUKSAr
PQkJCXRlc3QubyBcCi0JCQkJCXN0cmluZy1zdHJlYW0ubworCQkJCQlzdHJpbmctc3RyZWFtLm8g
XAorCQkJCQlrdW5pdC1zdHJlYW0ubwpkaWZmIC0tZ2l0IGEva3VuaXQva3VuaXQtc3RyZWFtLmMg
Yi9rdW5pdC9rdW5pdC1zdHJlYW0uYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAw
MDAwMDAwLi44YmVhMWYyMmVhZmI1Ci0tLSAvZGV2L251bGwKKysrIGIva3VuaXQva3VuaXQtc3Ry
ZWFtLmMKQEAgLTAsMCArMSwxMjMgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwt
Mi4wCisvKgorICogQysrIHN0cmVhbSBzdHlsZSBzdHJpbmcgZm9ybWF0dGVyIGFuZCBwcmludGVy
IHVzZWQgaW4gS1VuaXQgZm9yIG91dHB1dHRpbmcKKyAqIEtVbml0IG1lc3NhZ2VzLgorICoKKyAq
IENvcHlyaWdodCAoQykgMjAxOSwgR29vZ2xlIExMQy4KKyAqIEF1dGhvcjogQnJlbmRhbiBIaWdn
aW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29tPgorICovCisKKyNpbmNsdWRlIDxrdW5pdC90
ZXN0Lmg+CisjaW5jbHVkZSA8a3VuaXQva3VuaXQtc3RyZWFtLmg+CisjaW5jbHVkZSA8a3VuaXQv
c3RyaW5nLXN0cmVhbS5oPgorCit2b2lkIGt1bml0X3N0cmVhbV9hZGQoc3RydWN0IGt1bml0X3N0
cmVhbSAqa3N0cmVhbSwgY29uc3QgY2hhciAqZm10LCAuLi4pCit7CisJdmFfbGlzdCBhcmdzOwor
CXN0cnVjdCBzdHJpbmdfc3RyZWFtICpzdHJlYW0gPSBrc3RyZWFtLT5pbnRlcm5hbF9zdHJlYW07
CisKKwl2YV9zdGFydChhcmdzLCBmbXQpOworCisJaWYgKHN0cmluZ19zdHJlYW1fdmFkZChzdHJl
YW0sIGZtdCwgYXJncykgPCAwKQorCQlrdW5pdF9lcnIoa3N0cmVhbS0+dGVzdCwKKwkJCSAgIkZh
aWxlZCB0byBhbGxvY2F0ZSBmcmFnbWVudDogJXNcbiIsCisJCQkgIGZtdCk7CisKKwl2YV9lbmQo
YXJncyk7Cit9CisKK3ZvaWQga3VuaXRfc3RyZWFtX2FwcGVuZChzdHJ1Y3Qga3VuaXRfc3RyZWFt
ICprc3RyZWFtLAorCQkJCXN0cnVjdCBrdW5pdF9zdHJlYW0gKm90aGVyKQoreworCXN0cnVjdCBz
dHJpbmdfc3RyZWFtICpvdGhlcl9zdHJlYW0gPSBvdGhlci0+aW50ZXJuYWxfc3RyZWFtOworCWNv
bnN0IGNoYXIgKm90aGVyX2NvbnRlbnQ7CisKKwlvdGhlcl9jb250ZW50ID0gc3RyaW5nX3N0cmVh
bV9nZXRfc3RyaW5nKG90aGVyX3N0cmVhbSk7CisKKwlpZiAoIW90aGVyX2NvbnRlbnQpIHsKKwkJ
a3VuaXRfZXJyKGtzdHJlYW0tPnRlc3QsCisJCQkgICJGYWlsZWQgdG8gZ2V0IHN0cmluZyBmcm9t
IHNlY29uZCBhcmd1bWVudCBmb3IgYXBwZW5kaW5nXG4iKTsKKwkJcmV0dXJuOworCX0KKworCWt1
bml0X3N0cmVhbV9hZGQoa3N0cmVhbSwgb3RoZXJfY29udGVudCk7Cit9CisKK3ZvaWQga3VuaXRf
c3RyZWFtX2NsZWFyKHN0cnVjdCBrdW5pdF9zdHJlYW0gKmtzdHJlYW0pCit7CisJc3RyaW5nX3N0
cmVhbV9jbGVhcihrc3RyZWFtLT5pbnRlcm5hbF9zdHJlYW0pOworfQorCit2b2lkIGt1bml0X3N0
cmVhbV9jb21taXQoc3RydWN0IGt1bml0X3N0cmVhbSAqa3N0cmVhbSkKK3sKKwlzdHJ1Y3Qgc3Ry
aW5nX3N0cmVhbSAqc3RyZWFtID0ga3N0cmVhbS0+aW50ZXJuYWxfc3RyZWFtOworCXN0cnVjdCBz
dHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnbWVudDsKKwlzdHJ1Y3Qga3VuaXQgKnRlc3QgPSBr
c3RyZWFtLT50ZXN0OworCWNoYXIgKmJ1ZjsKKworCWJ1ZiA9IHN0cmluZ19zdHJlYW1fZ2V0X3N0
cmluZyhzdHJlYW0pOworCWlmICghYnVmKSB7CisJCWt1bml0X2Vycih0ZXN0LAorCQkJICAiQ291
bGQgbm90IGFsbG9jYXRlIGJ1ZmZlciwgZHVtcGluZyBzdHJlYW06XG4iKTsKKwkJbGlzdF9mb3Jf
ZWFjaF9lbnRyeShmcmFnbWVudCwgJnN0cmVhbS0+ZnJhZ21lbnRzLCBub2RlKSB7CisJCQlrdW5p
dF9lcnIodGVzdCwgZnJhZ21lbnQtPmZyYWdtZW50KTsKKwkJfQorCQlrdW5pdF9lcnIodGVzdCwg
IlxuIik7CisJCWdvdG8gY2xlYW51cDsKKwl9CisKKwlrdW5pdF9wcmludGsoa3N0cmVhbS0+bGV2
ZWwsIHRlc3QsIGJ1Zik7CisJa2ZyZWUoYnVmKTsKKworY2xlYW51cDoKKwlrdW5pdF9zdHJlYW1f
Y2xlYXIoa3N0cmVhbSk7Cit9CisKK3N0YXRpYyBpbnQga3VuaXRfc3RyZWFtX2luaXQoc3RydWN0
IGt1bml0X3Jlc291cmNlICpyZXMsIHZvaWQgKmNvbnRleHQpCit7CisJc3RydWN0IGt1bml0ICp0
ZXN0ID0gY29udGV4dDsKKwlzdHJ1Y3Qga3VuaXRfc3RyZWFtICpzdHJlYW07CisKKwlzdHJlYW0g
PSBremFsbG9jKHNpemVvZigqc3RyZWFtKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFzdHJlYW0pCisJ
CXJldHVybiAtRU5PTUVNOworCisJcmVzLT5hbGxvY2F0aW9uID0gc3RyZWFtOworCXN0cmVhbS0+
dGVzdCA9IHRlc3Q7CisJc3RyZWFtLT5pbnRlcm5hbF9zdHJlYW0gPSBhbGxvY19zdHJpbmdfc3Ry
ZWFtKHRlc3QpOworCisJaWYgKCFzdHJlYW0tPmludGVybmFsX3N0cmVhbSkKKwkJcmV0dXJuIC1F
Tk9NRU07CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQga3VuaXRfc3RyZWFtX2ZyZWUo
c3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMpCit7CisJc3RydWN0IGt1bml0X3N0cmVhbSAqc3Ry
ZWFtID0gcmVzLT5hbGxvY2F0aW9uOworCisJaWYgKCFzdHJpbmdfc3RyZWFtX2lzX2VtcHR5KHN0
cmVhbS0+aW50ZXJuYWxfc3RyZWFtKSkgeworCQlrdW5pdF9lcnIoc3RyZWFtLT50ZXN0LAorCQkJ
ICAiRW5kIG9mIHRlc3QgY2FzZSByZWFjaGVkIHdpdGggdW5jb21taXR0ZWQgc3RyZWFtIGVudHJp
ZXNcbiIpOworCQlrdW5pdF9zdHJlYW1fY29tbWl0KHN0cmVhbSk7CisJfQorfQorCitzdHJ1Y3Qg
a3VuaXRfc3RyZWFtICphbGxvY19rdW5pdF9zdHJlYW0oc3RydWN0IGt1bml0ICp0ZXN0LCBjb25z
dCBjaGFyICpsZXZlbCkKK3sKKwlzdHJ1Y3Qga3VuaXRfc3RyZWFtICprc3RyZWFtOworCXN0cnVj
dCBrdW5pdF9yZXNvdXJjZSAqcmVzOworCisJcmVzID0ga3VuaXRfYWxsb2NfcmVzb3VyY2UodGVz
dCwKKwkJCQkgICBrdW5pdF9zdHJlYW1faW5pdCwKKwkJCQkgICBrdW5pdF9zdHJlYW1fZnJlZSwK
KwkJCQkgICB0ZXN0KTsKKworCWlmICghcmVzKQorCQlyZXR1cm4gTlVMTDsKKworCWtzdHJlYW0g
PSByZXMtPmFsbG9jYXRpb247CisJa3N0cmVhbS0+bGV2ZWwgPSBsZXZlbDsKKworCXJldHVybiBr
c3RyZWFtOworfQpkaWZmIC0tZ2l0IGEva3VuaXQvdGVzdC5jIGIva3VuaXQvdGVzdC5jCmluZGV4
IDUzODM4ZjUzOTQzMDMuLjk0MDRlNGQzNGZhM2YgMTAwNjQ0Ci0tLSBhL2t1bml0L3Rlc3QuYwor
KysgYi9rdW5pdC90ZXN0LmMKQEAgLTEzOSw2ICsxMzksMTIgQEAgc3RhdGljIHZvaWQga3VuaXRf
cHJpbnRfdGVzdF9jYXNlX29rX25vdF9vayhzdHJ1Y3Qga3VuaXRfY2FzZSAqdGVzdF9jYXNlLAog
CQkJICAgICAgdGVzdF9jYXNlLT5uYW1lKTsKIH0KIAordm9pZCBrdW5pdF9mYWlsKHN0cnVjdCBr
dW5pdCAqdGVzdCwgc3RydWN0IGt1bml0X3N0cmVhbSAqc3RyZWFtKQoreworCWt1bml0X3NldF9z
dWNjZXNzKHRlc3QsIGZhbHNlKTsKKwlrdW5pdF9zdHJlYW1fY29tbWl0KHN0cmVhbSk7Cit9CisK
IHZvaWQga3VuaXRfaW5pdF90ZXN0KHN0cnVjdCBrdW5pdCAqdGVzdCwgY29uc3QgY2hhciAqbmFt
ZSkKIHsKIAlzcGluX2xvY2tfaW5pdCgmdGVzdC0+bG9jayk7Ci0tIAoyLjIyLjAuNDEwLmdkOGZk
YmUyMWI1LWdvb2cKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9y
ZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZl
bA==
