Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AC08D73109
	for <lists+dri-devel@lfdr.de>; Wed, 24 Jul 2019 16:06:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D32BC6E5A6;
	Wed, 24 Jul 2019 14:05:57 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 08AAC6E599;
 Wed, 24 Jul 2019 14:05:56 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: andrzej.p) with ESMTPSA id A53A2283CC1
From: Andrzej Pietrasiewicz <andrzej.p@collabora.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v5 22/24] drm/amdgpu: Provide ddc symlink in connector sysfs
 directory
Date: Wed, 24 Jul 2019 15:59:44 +0200
Message-Id: <455a7e8b6a9e1d0c29be2038eaa86f9b8e0d2ed1.1563960855.git.andrzej.p@collabora.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <cover.1563960855.git.andrzej.p@collabora.com>
References: <cover.1563960855.git.andrzej.p@collabora.com>
In-Reply-To: <cover.1563960855.git.andrzej.p@collabora.com>
References: <cover.1563960855.git.andrzej.p@collabora.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Sam Ravnborg <sam@ravnborg.org>, Neil Armstrong <narmstrong@baylibre.com>,
 David Airlie <airlied@linux.ie>, Douglas Anderson <dianders@chromium.org>,
 Thierry Reding <thierry.reding@gmail.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>, kernel@collabora.com,
 linux-samsung-soc@vger.kernel.org, linux-rockchip@lists.infradead.org,
 Oleksandr Andrushchenko <oleksandr_andrushchenko@epam.com>,
 Vincent Abriou <vincent.abriou@st.com>, Krzysztof Kozlowski <krzk@kernel.org>,
 Jonathan Hunter <jonathanh@nvidia.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>,
 Kukjin Kim <kgene@kernel.org>, NXP Linux Team <linux-imx@nxp.com>,
 Dave Airlie <airlied@redhat.com>, intel-gfx@lists.freedesktop.org,
 freedreno@lists.freedesktop.org, linux-tegra@vger.kernel.org,
 Jonas Karlman <jonas@kwiboo.se>, linux-arm-msm@vger.kernel.org,
 Mamta Shukla <mamtashukla555@gmail.com>, linux-mediatek@lists.infradead.org,
 Jyri Sarha <jsarha@ti.com>, Rodrigo Vivi <rodrigo.vivi@intel.com>,
 Matthias Brugger <matthias.bgg@gmail.com>,
 Thomas Gleixner <tglx@linutronix.de>, Sean Paul <sean@poorly.run>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 Allison Randal <allison@lohutok.net>, linux-arm-kernel@lists.infradead.org,
 Jernej Skrabec <jernej.skrabec@siol.net>, amd-gfx@lists.freedesktop.org,
 Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Thomas Zimmermann <tzimmermann@suse.de>,
 Seung-Woo Kim <sw0312.kim@samsung.com>, linux-kernel@vger.kernel.org,
 Todor Tomov <todor.tomov@linaro.org>,
 Kyungmin Park <kyungmin.park@samsung.com>, Huang Rui <ray.huang@amd.com>,
 Alex Deucher <alexander.deucher@amd.com>, Shawn Guo <shawnguo@kernel.org>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Gerd Hoffmann <kraxel@redhat.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VXNlIHRoZSBkZGMgcG9pbnRlciBwcm92aWRlZCBieSB0aGUgZ2VuZXJpYyBjb25uZWN0b3IuCgpT
aWduZWQtb2ZmLWJ5OiBBbmRyemVqIFBpZXRyYXNpZXdpY3ogPGFuZHJ6ZWoucEBjb2xsYWJvcmEu
Y29tPgotLS0KIC4uLi9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Nvbm5lY3RvcnMuYyAgICB8
IDk1ICsrKysrKysrKysrKysrLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA2OSBpbnNlcnRpb25zKCsp
LCAyNiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfY29ubmVjdG9ycy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2Nvbm5lY3RvcnMuYwppbmRleCA3M2IyZWRlNzczZDMuLmUxNmU1NTNlN2YyMSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Nvbm5lY3RvcnMuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY29ubmVjdG9ycy5jCkBAIC0xNTc0LDE3
ICsxNTc0LDIxIEBAIGFtZGdwdV9jb25uZWN0b3JfYWRkKHN0cnVjdCBhbWRncHVfZGV2aWNlICph
ZGV2LAogCQlhbWRncHVfY29ubmVjdG9yLT5jb25fcHJpdiA9IGFtZGdwdV9kaWdfY29ubmVjdG9y
OwogCQlpZiAoaTJjX2J1cy0+dmFsaWQpIHsKIAkJCWFtZGdwdV9jb25uZWN0b3ItPmRkY19idXMg
PSBhbWRncHVfaTJjX2xvb2t1cChhZGV2LCBpMmNfYnVzKTsKLQkJCWlmIChhbWRncHVfY29ubmVj
dG9yLT5kZGNfYnVzKQorCQkJaWYgKGFtZGdwdV9jb25uZWN0b3ItPmRkY19idXMpIHsKIAkJCQlo
YXNfYXV4ID0gdHJ1ZTsKLQkJCWVsc2UKKwkJCQljb25uZWN0b3ItPmRkYyA9ICZhbWRncHVfY29u
bmVjdG9yLT5kZGNfYnVzLT5hZGFwdGVyOworCQkJfSBlbHNlIHsKIAkJCQlEUk1fRVJST1IoIkRQ
OiBGYWlsZWQgdG8gYXNzaWduIGRkYyBidXMhIENoZWNrIGRtZXNnIGZvciBpMmMgZXJyb3JzLlxu
Iik7CisJCQl9CiAJCX0KIAkJc3dpdGNoIChjb25uZWN0b3JfdHlwZSkgewogCQljYXNlIERSTV9N
T0RFX0NPTk5FQ1RPUl9WR0E6CiAJCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0RWSUE6CiAJCWRl
ZmF1bHQ6Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2LCAmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFz
ZSwKLQkJCQkJICAgJmFtZGdwdV9jb25uZWN0b3JfZHBfZnVuY3MsIGNvbm5lY3Rvcl90eXBlKTsK
KwkJCWRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhkZXYsICZhbWRncHVfY29ubmVjdG9yLT5i
YXNlLAorCQkJCQkJICAgICZhbWRncHVfY29ubmVjdG9yX2RwX2Z1bmNzLAorCQkJCQkJICAgIGNv
bm5lY3Rvcl90eXBlLAorCQkJCQkJICAgIGFtZGdwdV9jb25uZWN0b3ItPmJhc2UuZGRjKTsKIAkJ
CWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZSwKIAkJCQkJ
CSAmYW1kZ3B1X2Nvbm5lY3Rvcl9kcF9oZWxwZXJfZnVuY3MpOwogCQkJY29ubmVjdG9yLT5pbnRl
cmxhY2VfYWxsb3dlZCA9IHRydWU7CkBAIC0xNjAyLDggKzE2MDYsMTAgQEAgYW1kZ3B1X2Nvbm5l
Y3Rvcl9hZGQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAJCWNhc2UgRFJNX01PREVfQ09O
TkVDVE9SX0hETUlBOgogCQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9IRE1JQjoKIAkJY2FzZSBE
Uk1fTU9ERV9DT05ORUNUT1JfRGlzcGxheVBvcnQ6Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2
LCAmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZSwKLQkJCQkJICAgJmFtZGdwdV9jb25uZWN0b3JfZHBf
ZnVuY3MsIGNvbm5lY3Rvcl90eXBlKTsKKwkJCWRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhk
ZXYsICZhbWRncHVfY29ubmVjdG9yLT5iYXNlLAorCQkJCQkJICAgICZhbWRncHVfY29ubmVjdG9y
X2RwX2Z1bmNzLAorCQkJCQkJICAgIGNvbm5lY3Rvcl90eXBlLAorCQkJCQkJICAgIGFtZGdwdV9j
b25uZWN0b3ItPmJhc2UuZGRjKTsKIAkJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmYW1kZ3B1
X2Nvbm5lY3Rvci0+YmFzZSwKIAkJCQkJCSAmYW1kZ3B1X2Nvbm5lY3Rvcl9kcF9oZWxwZXJfZnVu
Y3MpOwogCQkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHkoJmFtZGdwdV9jb25uZWN0b3ItPmJh
c2UuYmFzZSwKQEAgLTE2NDQsOCArMTY1MCwxMCBAQCBhbWRncHVfY29ubmVjdG9yX2FkZChzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKIAkJCWJyZWFrOwogCQljYXNlIERSTV9NT0RFX0NPTk5F
Q1RPUl9MVkRTOgogCQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9lRFA6Ci0JCQlkcm1fY29ubmVj
dG9yX2luaXQoZGV2LCAmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZSwKLQkJCQkJICAgJmFtZGdwdV9j
b25uZWN0b3JfZWRwX2Z1bmNzLCBjb25uZWN0b3JfdHlwZSk7CisJCQlkcm1fY29ubmVjdG9yX2lu
aXRfd2l0aF9kZGMoZGV2LCAmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZSwKKwkJCQkJCSAgICAmYW1k
Z3B1X2Nvbm5lY3Rvcl9lZHBfZnVuY3MsCisJCQkJCQkgICAgY29ubmVjdG9yX3R5cGUsCisJCQkJ
CQkgICAgYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZS5kZGMpOwogCQkJZHJtX2Nvbm5lY3Rvcl9oZWxw
ZXJfYWRkKCZhbWRncHVfY29ubmVjdG9yLT5iYXNlLAogCQkJCQkJICZhbWRncHVfY29ubmVjdG9y
X2RwX2hlbHBlcl9mdW5jcyk7CiAJCQlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmYW1kZ3B1
X2Nvbm5lY3Rvci0+YmFzZS5iYXNlLApAQCAtMTY1OSwxMyArMTY2NywxOCBAQCBhbWRncHVfY29u
bmVjdG9yX2FkZChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKIAl9IGVsc2UgewogCQlzd2l0
Y2ggKGNvbm5lY3Rvcl90eXBlKSB7CiAJCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX1ZHQToKLQkJ
CWRybV9jb25uZWN0b3JfaW5pdChkZXYsICZhbWRncHVfY29ubmVjdG9yLT5iYXNlLCAmYW1kZ3B1
X2Nvbm5lY3Rvcl92Z2FfZnVuY3MsIGNvbm5lY3Rvcl90eXBlKTsKLQkJCWRybV9jb25uZWN0b3Jf
aGVscGVyX2FkZCgmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZSwgJmFtZGdwdV9jb25uZWN0b3Jfdmdh
X2hlbHBlcl9mdW5jcyk7CiAJCQlpZiAoaTJjX2J1cy0+dmFsaWQpIHsKIAkJCQlhbWRncHVfY29u
bmVjdG9yLT5kZGNfYnVzID0gYW1kZ3B1X2kyY19sb29rdXAoYWRldiwgaTJjX2J1cyk7CiAJCQkJ
aWYgKCFhbWRncHVfY29ubmVjdG9yLT5kZGNfYnVzKQogCQkJCQlEUk1fRVJST1IoIlZHQTogRmFp
bGVkIHRvIGFzc2lnbiBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOwor
CQkJCWVsc2UKKwkJCQkJY29ubmVjdG9yLT5kZGMgPSAmYW1kZ3B1X2Nvbm5lY3Rvci0+ZGRjX2J1
cy0+YWRhcHRlcjsKIAkJCX0KKwkJCWRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhkZXYsICZh
bWRncHVfY29ubmVjdG9yLT5iYXNlLAorCQkJCQkJICAgICZhbWRncHVfY29ubmVjdG9yX3ZnYV9m
dW5jcywKKwkJCQkJCSAgICBjb25uZWN0b3JfdHlwZSwKKwkJCQkJCSAgICBhbWRncHVfY29ubmVj
dG9yLT5iYXNlLmRkYyk7CisJCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJmFtZGdwdV9jb25u
ZWN0b3ItPmJhc2UsICZhbWRncHVfY29ubmVjdG9yX3ZnYV9oZWxwZXJfZnVuY3MpOwogCQkJYW1k
Z3B1X2Nvbm5lY3Rvci0+ZGFjX2xvYWRfZGV0ZWN0ID0gdHJ1ZTsKIAkJCWRybV9vYmplY3RfYXR0
YWNoX3Byb3BlcnR5KCZhbWRncHVfY29ubmVjdG9yLT5iYXNlLmJhc2UsCiAJCQkJCQkgICAgICBh
ZGV2LT5tb2RlX2luZm8ubG9hZF9kZXRlY3RfcHJvcGVydHksCkBAIC0xNjc5LDEzICsxNjkyLDE4
IEBAIGFtZGdwdV9jb25uZWN0b3JfYWRkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogCQkJ
Y29ubmVjdG9yLT5kb3VibGVzY2FuX2FsbG93ZWQgPSB0cnVlOwogCQkJYnJlYWs7CiAJCWNhc2Ug
RFJNX01PREVfQ09OTkVDVE9SX0RWSUE6Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2LCAmYW1k
Z3B1X2Nvbm5lY3Rvci0+YmFzZSwgJmFtZGdwdV9jb25uZWN0b3JfdmdhX2Z1bmNzLCBjb25uZWN0
b3JfdHlwZSk7Ci0JCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJmFtZGdwdV9jb25uZWN0b3It
PmJhc2UsICZhbWRncHVfY29ubmVjdG9yX3ZnYV9oZWxwZXJfZnVuY3MpOwogCQkJaWYgKGkyY19i
dXMtPnZhbGlkKSB7CiAJCQkJYW1kZ3B1X2Nvbm5lY3Rvci0+ZGRjX2J1cyA9IGFtZGdwdV9pMmNf
bG9va3VwKGFkZXYsIGkyY19idXMpOwogCQkJCWlmICghYW1kZ3B1X2Nvbm5lY3Rvci0+ZGRjX2J1
cykKIAkJCQkJRFJNX0VSUk9SKCJEVklBOiBGYWlsZWQgdG8gYXNzaWduIGRkYyBidXMhIENoZWNr
IGRtZXNnIGZvciBpMmMgZXJyb3JzLlxuIik7CisJCQkJZWxzZQorCQkJCQljb25uZWN0b3ItPmRk
YyA9ICZhbWRncHVfY29ubmVjdG9yLT5kZGNfYnVzLT5hZGFwdGVyOwogCQkJfQorCQkJZHJtX2Nv
bm5lY3Rvcl9pbml0X3dpdGhfZGRjKGRldiwgJmFtZGdwdV9jb25uZWN0b3ItPmJhc2UsCisJCQkJ
CQkgICAgJmFtZGdwdV9jb25uZWN0b3JfdmdhX2Z1bmNzLAorCQkJCQkJICAgIGNvbm5lY3Rvcl90
eXBlLAorCQkJCQkJICAgIGFtZGdwdV9jb25uZWN0b3ItPmJhc2UuZGRjKTsKKwkJCWRybV9jb25u
ZWN0b3JfaGVscGVyX2FkZCgmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZSwgJmFtZGdwdV9jb25uZWN0
b3JfdmdhX2hlbHBlcl9mdW5jcyk7CiAJCQlhbWRncHVfY29ubmVjdG9yLT5kYWNfbG9hZF9kZXRl
Y3QgPSB0cnVlOwogCQkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHkoJmFtZGdwdV9jb25uZWN0
b3ItPmJhc2UuYmFzZSwKIAkJCQkJCSAgICAgIGFkZXYtPm1vZGVfaW5mby5sb2FkX2RldGVjdF9w
cm9wZXJ0eSwKQEAgLTE3MDQsMTMgKzE3MjIsMTggQEAgYW1kZ3B1X2Nvbm5lY3Rvcl9hZGQoc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAJCQlpZiAoIWFtZGdwdV9kaWdfY29ubmVjdG9yKQog
CQkJCWdvdG8gZmFpbGVkOwogCQkJYW1kZ3B1X2Nvbm5lY3Rvci0+Y29uX3ByaXYgPSBhbWRncHVf
ZGlnX2Nvbm5lY3RvcjsKLQkJCWRybV9jb25uZWN0b3JfaW5pdChkZXYsICZhbWRncHVfY29ubmVj
dG9yLT5iYXNlLCAmYW1kZ3B1X2Nvbm5lY3Rvcl9kdmlfZnVuY3MsIGNvbm5lY3Rvcl90eXBlKTsK
LQkJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZSwgJmFt
ZGdwdV9jb25uZWN0b3JfZHZpX2hlbHBlcl9mdW5jcyk7CiAJCQlpZiAoaTJjX2J1cy0+dmFsaWQp
IHsKIAkJCQlhbWRncHVfY29ubmVjdG9yLT5kZGNfYnVzID0gYW1kZ3B1X2kyY19sb29rdXAoYWRl
diwgaTJjX2J1cyk7CiAJCQkJaWYgKCFhbWRncHVfY29ubmVjdG9yLT5kZGNfYnVzKQogCQkJCQlE
Uk1fRVJST1IoIkRWSTogRmFpbGVkIHRvIGFzc2lnbiBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3Ig
aTJjIGVycm9ycy5cbiIpOworCQkJCWVsc2UKKwkJCQkJY29ubmVjdG9yLT5kZGMgPSAmYW1kZ3B1
X2Nvbm5lY3Rvci0+ZGRjX2J1cy0+YWRhcHRlcjsKIAkJCX0KKwkJCWRybV9jb25uZWN0b3JfaW5p
dF93aXRoX2RkYyhkZXYsICZhbWRncHVfY29ubmVjdG9yLT5iYXNlLAorCQkJCQkJICAgICZhbWRn
cHVfY29ubmVjdG9yX2R2aV9mdW5jcywKKwkJCQkJCSAgICBjb25uZWN0b3JfdHlwZSwKKwkJCQkJ
CSAgICBhbWRncHVfY29ubmVjdG9yLT5iYXNlLmRkYyk7CisJCQlkcm1fY29ubmVjdG9yX2hlbHBl
cl9hZGQoJmFtZGdwdV9jb25uZWN0b3ItPmJhc2UsICZhbWRncHVfY29ubmVjdG9yX2R2aV9oZWxw
ZXJfZnVuY3MpOwogCQkJc3VicGl4ZWxfb3JkZXIgPSBTdWJQaXhlbEhvcml6b250YWxSR0I7CiAJ
CQlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZS5iYXNl
LAogCQkJCQkJICAgICAgYWRldi0+bW9kZV9pbmZvLmNvaGVyZW50X21vZGVfcHJvcGVydHksCkBA
IC0xNzU0LDEzICsxNzc3LDE4IEBAIGFtZGdwdV9jb25uZWN0b3JfYWRkKHN0cnVjdCBhbWRncHVf
ZGV2aWNlICphZGV2LAogCQkJaWYgKCFhbWRncHVfZGlnX2Nvbm5lY3RvcikKIAkJCQlnb3RvIGZh
aWxlZDsKIAkJCWFtZGdwdV9jb25uZWN0b3ItPmNvbl9wcml2ID0gYW1kZ3B1X2RpZ19jb25uZWN0
b3I7Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2LCAmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZSwg
JmFtZGdwdV9jb25uZWN0b3JfZHZpX2Z1bmNzLCBjb25uZWN0b3JfdHlwZSk7Ci0JCQlkcm1fY29u
bmVjdG9yX2hlbHBlcl9hZGQoJmFtZGdwdV9jb25uZWN0b3ItPmJhc2UsICZhbWRncHVfY29ubmVj
dG9yX2R2aV9oZWxwZXJfZnVuY3MpOwogCQkJaWYgKGkyY19idXMtPnZhbGlkKSB7CiAJCQkJYW1k
Z3B1X2Nvbm5lY3Rvci0+ZGRjX2J1cyA9IGFtZGdwdV9pMmNfbG9va3VwKGFkZXYsIGkyY19idXMp
OwogCQkJCWlmICghYW1kZ3B1X2Nvbm5lY3Rvci0+ZGRjX2J1cykKIAkJCQkJRFJNX0VSUk9SKCJI
RE1JOiBGYWlsZWQgdG8gYXNzaWduIGRkYyBidXMhIENoZWNrIGRtZXNnIGZvciBpMmMgZXJyb3Jz
LlxuIik7CisJCQkJZWxzZQorCQkJCQljb25uZWN0b3ItPmRkYyA9ICZhbWRncHVfY29ubmVjdG9y
LT5kZGNfYnVzLT5hZGFwdGVyOwogCQkJfQorCQkJZHJtX2Nvbm5lY3Rvcl9pbml0X3dpdGhfZGRj
KGRldiwgJmFtZGdwdV9jb25uZWN0b3ItPmJhc2UsCisJCQkJCQkgICAgJmFtZGdwdV9jb25uZWN0
b3JfZHZpX2Z1bmNzLAorCQkJCQkJICAgIGNvbm5lY3Rvcl90eXBlLAorCQkJCQkJICAgIGFtZGdw
dV9jb25uZWN0b3ItPmJhc2UuZGRjKTsKKwkJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmYW1k
Z3B1X2Nvbm5lY3Rvci0+YmFzZSwgJmFtZGdwdV9jb25uZWN0b3JfZHZpX2hlbHBlcl9mdW5jcyk7
CiAJCQlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZS5i
YXNlLAogCQkJCQkJICAgICAgYWRldi0+bW9kZV9pbmZvLmNvaGVyZW50X21vZGVfcHJvcGVydHks
CiAJCQkJCQkgICAgICAxKTsKQEAgLTE3OTYsMTUgKzE4MjQsMjAgQEAgYW1kZ3B1X2Nvbm5lY3Rv
cl9hZGQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCiAJCQlpZiAoIWFtZGdwdV9kaWdfY29u
bmVjdG9yKQogCQkJCWdvdG8gZmFpbGVkOwogCQkJYW1kZ3B1X2Nvbm5lY3Rvci0+Y29uX3ByaXYg
PSBhbWRncHVfZGlnX2Nvbm5lY3RvcjsKLQkJCWRybV9jb25uZWN0b3JfaW5pdChkZXYsICZhbWRn
cHVfY29ubmVjdG9yLT5iYXNlLCAmYW1kZ3B1X2Nvbm5lY3Rvcl9kcF9mdW5jcywgY29ubmVjdG9y
X3R5cGUpOwotCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZhbWRncHVfY29ubmVjdG9yLT5i
YXNlLCAmYW1kZ3B1X2Nvbm5lY3Rvcl9kcF9oZWxwZXJfZnVuY3MpOwogCQkJaWYgKGkyY19idXMt
PnZhbGlkKSB7CiAJCQkJYW1kZ3B1X2Nvbm5lY3Rvci0+ZGRjX2J1cyA9IGFtZGdwdV9pMmNfbG9v
a3VwKGFkZXYsIGkyY19idXMpOwotCQkJCWlmIChhbWRncHVfY29ubmVjdG9yLT5kZGNfYnVzKQor
CQkJCWlmIChhbWRncHVfY29ubmVjdG9yLT5kZGNfYnVzKSB7CiAJCQkJCWhhc19hdXggPSB0cnVl
OwotCQkJCWVsc2UKKwkJCQkJY29ubmVjdG9yLT5kZGMgPSAmYW1kZ3B1X2Nvbm5lY3Rvci0+ZGRj
X2J1cy0+YWRhcHRlcjsKKwkJCQl9IGVsc2UgewogCQkJCQlEUk1fRVJST1IoIkRQOiBGYWlsZWQg
dG8gYXNzaWduIGRkYyBidXMhIENoZWNrIGRtZXNnIGZvciBpMmMgZXJyb3JzLlxuIik7CisJCQkJ
fQogCQkJfQorCQkJZHJtX2Nvbm5lY3Rvcl9pbml0X3dpdGhfZGRjKGRldiwgJmFtZGdwdV9jb25u
ZWN0b3ItPmJhc2UsCisJCQkJCQkgICAgJmFtZGdwdV9jb25uZWN0b3JfZHBfZnVuY3MsCisJCQkJ
CQkgICAgY29ubmVjdG9yX3R5cGUsCisJCQkJCQkgICAgYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZS5k
ZGMpOworCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZhbWRncHVfY29ubmVjdG9yLT5iYXNl
LCAmYW1kZ3B1X2Nvbm5lY3Rvcl9kcF9oZWxwZXJfZnVuY3MpOwogCQkJc3VicGl4ZWxfb3JkZXIg
PSBTdWJQaXhlbEhvcml6b250YWxSR0I7CiAJCQlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgm
YW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZS5iYXNlLAogCQkJCQkJICAgICAgYWRldi0+bW9kZV9pbmZv
LmNvaGVyZW50X21vZGVfcHJvcGVydHksCkBAIC0xODM4LDE1ICsxODcxLDIwIEBAIGFtZGdwdV9j
b25uZWN0b3JfYWRkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogCQkJaWYgKCFhbWRncHVf
ZGlnX2Nvbm5lY3RvcikKIAkJCQlnb3RvIGZhaWxlZDsKIAkJCWFtZGdwdV9jb25uZWN0b3ItPmNv
bl9wcml2ID0gYW1kZ3B1X2RpZ19jb25uZWN0b3I7Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2
LCAmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZSwgJmFtZGdwdV9jb25uZWN0b3JfZWRwX2Z1bmNzLCBj
b25uZWN0b3JfdHlwZSk7Ci0JCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJmFtZGdwdV9jb25u
ZWN0b3ItPmJhc2UsICZhbWRncHVfY29ubmVjdG9yX2RwX2hlbHBlcl9mdW5jcyk7CiAJCQlpZiAo
aTJjX2J1cy0+dmFsaWQpIHsKIAkJCQlhbWRncHVfY29ubmVjdG9yLT5kZGNfYnVzID0gYW1kZ3B1
X2kyY19sb29rdXAoYWRldiwgaTJjX2J1cyk7Ci0JCQkJaWYgKGFtZGdwdV9jb25uZWN0b3ItPmRk
Y19idXMpCisJCQkJaWYgKGFtZGdwdV9jb25uZWN0b3ItPmRkY19idXMpIHsKIAkJCQkJaGFzX2F1
eCA9IHRydWU7Ci0JCQkJZWxzZQorCQkJCQljb25uZWN0b3ItPmRkYyA9ICZhbWRncHVfY29ubmVj
dG9yLT5kZGNfYnVzLT5hZGFwdGVyOworCQkJCX0gZWxzZSB7CiAJCQkJCURSTV9FUlJPUigiRFA6
IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sgZG1lc2cgZm9yIGkyYyBlcnJvcnMuXG4i
KTsKKwkJCQl9CiAJCQl9CisJCQlkcm1fY29ubmVjdG9yX2luaXRfd2l0aF9kZGMoZGV2LCAmYW1k
Z3B1X2Nvbm5lY3Rvci0+YmFzZSwKKwkJCQkJCSAgICAmYW1kZ3B1X2Nvbm5lY3Rvcl9lZHBfZnVu
Y3MsCisJCQkJCQkgICAgY29ubmVjdG9yX3R5cGUsCisJCQkJCQkgICAgYW1kZ3B1X2Nvbm5lY3Rv
ci0+YmFzZS5kZGMpOworCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZhbWRncHVfY29ubmVj
dG9yLT5iYXNlLCAmYW1kZ3B1X2Nvbm5lY3Rvcl9kcF9oZWxwZXJfZnVuY3MpOwogCQkJZHJtX29i
amVjdF9hdHRhY2hfcHJvcGVydHkoJmFtZGdwdV9jb25uZWN0b3ItPmJhc2UuYmFzZSwKIAkJCQkJ
CSAgICAgIGRldi0+bW9kZV9jb25maWcuc2NhbGluZ19tb2RlX3Byb3BlcnR5LAogCQkJCQkJICAg
ICAgRFJNX01PREVfU0NBTEVfRlVMTFNDUkVFTik7CkBAIC0xODU5LDEzICsxODk3LDE4IEBAIGFt
ZGdwdV9jb25uZWN0b3JfYWRkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAogCQkJaWYgKCFh
bWRncHVfZGlnX2Nvbm5lY3RvcikKIAkJCQlnb3RvIGZhaWxlZDsKIAkJCWFtZGdwdV9jb25uZWN0
b3ItPmNvbl9wcml2ID0gYW1kZ3B1X2RpZ19jb25uZWN0b3I7Ci0JCQlkcm1fY29ubmVjdG9yX2lu
aXQoZGV2LCAmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZSwgJmFtZGdwdV9jb25uZWN0b3JfbHZkc19m
dW5jcywgY29ubmVjdG9yX3R5cGUpOwotCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZhbWRn
cHVfY29ubmVjdG9yLT5iYXNlLCAmYW1kZ3B1X2Nvbm5lY3Rvcl9sdmRzX2hlbHBlcl9mdW5jcyk7
CiAJCQlpZiAoaTJjX2J1cy0+dmFsaWQpIHsKIAkJCQlhbWRncHVfY29ubmVjdG9yLT5kZGNfYnVz
ID0gYW1kZ3B1X2kyY19sb29rdXAoYWRldiwgaTJjX2J1cyk7CiAJCQkJaWYgKCFhbWRncHVfY29u
bmVjdG9yLT5kZGNfYnVzKQogCQkJCQlEUk1fRVJST1IoIkxWRFM6IEZhaWxlZCB0byBhc3NpZ24g
ZGRjIGJ1cyEgQ2hlY2sgZG1lc2cgZm9yIGkyYyBlcnJvcnMuXG4iKTsKKwkJCQllbHNlCisJCQkJ
CWNvbm5lY3Rvci0+ZGRjID0gJmFtZGdwdV9jb25uZWN0b3ItPmRkY19idXMtPmFkYXB0ZXI7CiAJ
CQl9CisJCQlkcm1fY29ubmVjdG9yX2luaXRfd2l0aF9kZGMoZGV2LCAmYW1kZ3B1X2Nvbm5lY3Rv
ci0+YmFzZSwKKwkJCQkJCSAgICAmYW1kZ3B1X2Nvbm5lY3Rvcl9sdmRzX2Z1bmNzLAorCQkJCQkJ
ICAgIGNvbm5lY3Rvcl90eXBlLAorCQkJCQkJICAgIGFtZGdwdV9jb25uZWN0b3ItPmJhc2UuZGRj
KTsKKwkJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmYW1kZ3B1X2Nvbm5lY3Rvci0+YmFzZSwg
JmFtZGdwdV9jb25uZWN0b3JfbHZkc19oZWxwZXJfZnVuY3MpOwogCQkJZHJtX29iamVjdF9hdHRh
Y2hfcHJvcGVydHkoJmFtZGdwdV9jb25uZWN0b3ItPmJhc2UuYmFzZSwKIAkJCQkJCSAgICAgIGRl
di0+bW9kZV9jb25maWcuc2NhbGluZ19tb2RlX3Byb3BlcnR5LAogCQkJCQkJICAgICAgRFJNX01P
REVfU0NBTEVfRlVMTFNDUkVFTik7Ci0tIAoyLjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
