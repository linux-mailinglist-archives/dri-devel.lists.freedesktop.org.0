Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B10C761601
	for <lists+dri-devel@lfdr.de>; Sun,  7 Jul 2019 20:35:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 80ABF89BC2;
	Sun,  7 Jul 2019 18:35:49 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6642C89BC2
 for <dri-devel@lists.freedesktop.org>; Sun,  7 Jul 2019 18:35:48 +0000 (UTC)
Received: from pendragon.nordic-sky.finnair.com (unknown [38.98.37.142])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 984D3334;
 Sun,  7 Jul 2019 20:35:31 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 43/60] drm/omap: Create connector for bridges
Date: Sun,  7 Jul 2019 21:19:20 +0300
Message-Id: <20190707181937.6250-40-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190707181937.6250-1-laurent.pinchart@ideasonboard.com>
References: <20190707180852.5512-1-laurent.pinchart@ideasonboard.com>
 <20190707181937.6250-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1562524547;
 bh=wPH35v1wpTtlALOqGzNzhICoqCV++K0ZgXNZUxr5xyM=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=Y6b7rBWEtjmaF+YVraiR29dq2ZfA8BspbvbQWoi3z5Ill9nBTdNLwIkCSryTBBjMN
 L/cjibQnBCy9DI1MW730InaIYncRkgBbZXj0zzxqcSOfs/ZOMWqQKZtQ7BYtQlxS4X
 AHaWb4ENLIcIB6DxJ0YC9zUoTtHVFvRIZWdIFzR8=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sean Paul <sean@poorly.run>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VXNlIHRoZSBkcm1fYnJpZGdlX2Nvbm5lY3RvciBoZWxwZXIgdG8gY3JlYXRlIGEgY29ubmVjdG9y
IGZvciBwaXBlbGluZXMKdGhhdCB1c2UgZHJtX2JyaWRnZS4gVGhpcyBhbGxvd3Mgc3BsaXR0aW5n
IGNvbm5lY3RvciBvcGVyYXRpb25zIGFjcm9zcwptdWx0aXBsZSBicmlkZ2VzIHdoZW4gbmVjZXNz
YXJ5LCBpbnN0ZWFkIG9mIGhhdmluZyB0aGUgbGFzdCBicmlkZ2UgaW4KdGhlIGNoYWluIGNyZWF0
aW5nIHRoZSBjb25uZWN0b3IgYW5kIGhhbmRsaW5nIGFsbCBjb25uZWN0b3Igb3BlcmF0aW9ucwpp
bnRlcm5hbGx5LgoKU2lnbmVkLW9mZi1ieTogTGF1cmVudCBQaW5jaGFydCA8bGF1cmVudC5waW5j
aGFydEBpZGVhc29uYm9hcmQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBf
ZHJ2LmMgfCA1NyArKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0KIDEgZmlsZSBjaGFuZ2Vk
LCA1MCBpbnNlcnRpb25zKCspLCA3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9vbWFwZHJtL29tYXBfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFw
X2Rydi5jCmluZGV4IDc5MGEyYjVhMTU5MS4uODhmOTMyOGVkYTcyIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFw
ZHJtL29tYXBfZHJ2LmMKQEAgLTIxLDcgKzIxLDkgQEAKIAogI2luY2x1ZGUgPGRybS9kcm1fYXRv
bWljLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfaGVscGVyLmg+CisjaW5jbHVkZSA8ZHJt
L2RybV9icmlkZ2VfY29ubmVjdG9yLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9mYl9oZWxwZXIuaD4K
KyNpbmNsdWRlIDxkcm0vZHJtX3BhbmVsLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9wcm9iZV9oZWxw
ZXIuaD4KIAogI2luY2x1ZGUgIm9tYXBfZG1tX3RpbGVyLmgiCkBAIC0yOTYsOSArMjk4LDEzIEBA
IHN0YXRpYyBpbnQgb21hcF9tb2Rlc2V0X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldikKIAkJ
aWYgKHBpcGUtPm91dHB1dC0+YnJpZGdlKSB7CiAJCQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChw
aXBlLT5lbmNvZGVyLAogCQkJCQkJcGlwZS0+b3V0cHV0LT5icmlkZ2UsIE5VTEwsCi0JCQkJCQl0
cnVlKTsKLQkJCWlmIChyZXQgPCAwKQorCQkJCQkJZmFsc2UpOworCQkJaWYgKHJldCA8IDApIHsK
KwkJCQlkZXZfZXJyKHByaXYtPmRldiwKKwkJCQkJInVuYWJsZSB0byBhdHRhY2ggYnJpZGdlICVw
T0ZcbiIsCisJCQkJCXBpcGUtPm91dHB1dC0+YnJpZGdlLT5vZl9ub2RlKTsKIAkJCQlyZXR1cm4g
cmV0OworCQkJfQogCQl9CiAKIAkJaWQgPSBvbWFwX2Rpc3BsYXlfaWQocGlwZS0+b3V0cHV0KTsK
QEAgLTMzNCw4ICszNDAsMzEgQEAgc3RhdGljIGludCBvbWFwX21vZGVzZXRfaW5pdChzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2KQogCQkJCQkJCSAgICAgIGVuY29kZXIpOwogCQkJaWYgKCFwaXBlLT5j
b25uZWN0b3IpCiAJCQkJcmV0dXJuIC1FTk9NRU07CisJCX0gZWxzZSB7CisJCQlzdHJ1Y3QgZHJt
X2JyaWRnZSAqYnJpZGdlID0gcGlwZS0+b3V0cHV0LT5icmlkZ2U7CiAKLQkJCWRybV9jb25uZWN0
b3JfYXR0YWNoX2VuY29kZXIocGlwZS0+Y29ubmVjdG9yLCBlbmNvZGVyKTsKKwkJCXBpcGUtPmNv
bm5lY3RvciA9IGRybV9icmlkZ2VfY29ubmVjdG9yX2luaXQoZGV2LAorCQkJCQkJCQkgICAgYnJp
ZGdlKTsKKwkJCWlmIChJU19FUlIocGlwZS0+Y29ubmVjdG9yKSkgeworCQkJCWRldl9lcnIocHJp
di0+ZGV2LAorCQkJCQkidW5hYmxlIHRvIGNyZWF0ZSBicmlkZ2UgY29ubmVjdG9yIGZvciAlcE9G
XG4iLAorCQkJCQlicmlkZ2UtPm9mX25vZGUpOworCQkJCXJldHVybiBQVFJfRVJSKHBpcGUtPmNv
bm5lY3Rvcik7CisJCQl9CisJCX0KKworCQlkcm1fY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVyKHBp
cGUtPmNvbm5lY3RvciwgZW5jb2Rlcik7CisKKwkJLyoKKwkJICogRklYTUU6IGRybV9wYW5lbCBz
aG91bGQgbm90IHN0b3JlIHRoZSBkcm1fY29ubmVjdG9yIHBvaW50ZXIKKwkJICogaW50ZXJuYWxs
eSBidXQgc2hvdWxkIHJlY2VpdmUgaXQgaW4gaXRzIC5nZXRfbW9kZXMoKQorCQkgKiBvcGVyYXRp
b24uCisJCSAqLworCQlpZiAocGlwZS0+b3V0cHV0LT5wYW5lbCkgeworCQkJcmV0ID0gZHJtX3Bh
bmVsX2F0dGFjaChwaXBlLT5vdXRwdXQtPnBhbmVsLAorCQkJCQkgICAgICAgcGlwZS0+Y29ubmVj
dG9yKTsKKwkJCWlmIChyZXQgPCAwKQorCQkJCXJldHVybiByZXQ7CiAJCX0KIAogCQljcnRjID0g
b21hcF9jcnRjX2luaXQoZGV2LCBwaXBlLCBwcml2LT5wbGFuZXNbaV0pOwpAQCAtNDAwLDggKzQy
OSwxNSBAQCBzdGF0aWMgdm9pZCBvbWFwX21vZGVzZXRfZW5hYmxlX2V4dGVybmFsX2hwZChzdHJ1
Y3QgZHJtX2RldmljZSAqZGRldikKIAl1bnNpZ25lZCBpbnQgaTsKIAogCWZvciAoaSA9IDA7IGkg
PCBwcml2LT5udW1fcGlwZXM7IGkrKykgewotCQlpZiAocHJpdi0+cGlwZXNbaV0uY29ubmVjdG9y
KQotCQkJb21hcF9jb25uZWN0b3JfZW5hYmxlX2hwZChwcml2LT5waXBlc1tpXS5jb25uZWN0b3Ip
OworCQlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yID0gcHJpdi0+cGlwZXNbaV0uY29u
bmVjdG9yOworCisJCWlmICghY29ubmVjdG9yKQorCQkJY29udGludWU7CisKKwkJaWYgKHByaXYt
PnBpcGVzW2ldLm91dHB1dC0+bmV4dCkKKwkJCW9tYXBfY29ubmVjdG9yX2VuYWJsZV9ocGQoY29u
bmVjdG9yKTsKKwkJZWxzZQorCQkJZHJtX2JyaWRnZV9jb25uZWN0b3JfZW5hYmxlX2hwZChjb25u
ZWN0b3IpOwogCX0KIH0KIApAQCAtNDE0LDggKzQ1MCwxNSBAQCBzdGF0aWMgdm9pZCBvbWFwX21v
ZGVzZXRfZGlzYWJsZV9leHRlcm5hbF9ocGQoc3RydWN0IGRybV9kZXZpY2UgKmRkZXYpCiAJdW5z
aWduZWQgaW50IGk7CiAKIAlmb3IgKGkgPSAwOyBpIDwgcHJpdi0+bnVtX3BpcGVzOyBpKyspIHsK
LQkJaWYgKHByaXYtPnBpcGVzW2ldLmNvbm5lY3RvcikKLQkJCW9tYXBfY29ubmVjdG9yX2Rpc2Fi
bGVfaHBkKHByaXYtPnBpcGVzW2ldLmNvbm5lY3Rvcik7CisJCXN0cnVjdCBkcm1fY29ubmVjdG9y
ICpjb25uZWN0b3IgPSBwcml2LT5waXBlc1tpXS5jb25uZWN0b3I7CisKKwkJaWYgKCFjb25uZWN0
b3IpCisJCQljb250aW51ZTsKKworCQlpZiAocHJpdi0+cGlwZXNbaV0ub3V0cHV0LT5uZXh0KQor
CQkJb21hcF9jb25uZWN0b3JfZGlzYWJsZV9ocGQoY29ubmVjdG9yKTsKKwkJZWxzZQorCQkJZHJt
X2JyaWRnZV9jb25uZWN0b3JfZGlzYWJsZV9ocGQoY29ubmVjdG9yKTsKIAl9CiB9CiAKLS0gClJl
Z2FyZHMsCgpMYXVyZW50IFBpbmNoYXJ0CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
