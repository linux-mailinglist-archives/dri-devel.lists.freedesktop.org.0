Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6447BDC4A9
	for <lists+dri-devel@lfdr.de>; Fri, 18 Oct 2019 14:24:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E43246E0EA;
	Fri, 18 Oct 2019 12:23:57 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 089E66E123
 for <dri-devel@lists.freedesktop.org>; Fri, 18 Oct 2019 12:23:57 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx02.intmail.prod.int.phx2.redhat.com
 [10.5.11.12])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 47EAA307C656;
 Fri, 18 Oct 2019 12:23:56 +0000 (UTC)
Received: from sirius.home.kraxel.org (ovpn-116-43.ams2.redhat.com
 [10.36.116.43])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 6200060BF1;
 Fri, 18 Oct 2019 12:23:53 +0000 (UTC)
Received: by sirius.home.kraxel.org (Postfix, from userid 1000)
 id 5739616E08; Fri, 18 Oct 2019 14:23:52 +0200 (CEST)
From: Gerd Hoffmann <kraxel@redhat.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH] drm/virtio: move byteorder handling into
 virtio_gpu_cmd_transfer_to_host_2d function
Date: Fri, 18 Oct 2019 14:23:52 +0200
Message-Id: <20191018122352.17019-1-kraxel@redhat.com>
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.12
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.42]); Fri, 18 Oct 2019 12:23:56 +0000 (UTC)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, open list <linux-kernel@vger.kernel.org>,
 Gerd Hoffmann <kraxel@redhat.com>,
 "open list:VIRTIO GPU DRIVER" <virtualization@lists.linux-foundation.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QmUgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSBjb2RlIGJhc2UuCgpTaWduZWQtb2Zm
LWJ5OiBHZXJkIEhvZmZtYW5uIDxrcmF4ZWxAcmVkaGF0LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9k
cm0vdmlydGlvL3ZpcnRncHVfZHJ2LmggICB8ICA0ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS92aXJ0
aW8vdmlydGdwdV9wbGFuZS5jIHwgMTIgKysrKysrLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vdmly
dGlvL3ZpcnRncHVfdnEuYyAgICB8IDEyICsrKysrKy0tLS0tLQogMyBmaWxlcyBjaGFuZ2VkLCAx
NCBpbnNlcnRpb25zKCspLCAxNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vdmlydGlvL3ZpcnRncHVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRn
cHVfZHJ2LmgKaW5kZXggMzE0ZTAyZjk0ZDljLi4wYjU2YmEwMDVlMjUgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
dmlydGlvL3ZpcnRncHVfZHJ2LmgKQEAgLTI2Nyw4ICsyNjcsOCBAQCB2b2lkIHZpcnRpb19ncHVf
Y21kX3VucmVmX3Jlc291cmNlKHN0cnVjdCB2aXJ0aW9fZ3B1X2RldmljZSAqdmdkZXYsCiAJCQkJ
ICAgdWludDMyX3QgcmVzb3VyY2VfaWQpOwogdm9pZCB2aXJ0aW9fZ3B1X2NtZF90cmFuc2Zlcl90
b19ob3N0XzJkKHN0cnVjdCB2aXJ0aW9fZ3B1X2RldmljZSAqdmdkZXYsCiAJCQkJCXVpbnQ2NF90
IG9mZnNldCwKLQkJCQkJX19sZTMyIHdpZHRoLCBfX2xlMzIgaGVpZ2h0LAotCQkJCQlfX2xlMzIg
eCwgX19sZTMyIHksCisJCQkJCXVpbnQzMl90IHdpZHRoLCB1aW50MzJfdCBoZWlnaHQsCisJCQkJ
CXVpbnQzMl90IHgsIHVpbnQzMl90IHksCiAJCQkJCXN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9h
cnJheSAqb2JqcywKIAkJCQkJc3RydWN0IHZpcnRpb19ncHVfZmVuY2UgKmZlbmNlKTsKIHZvaWQg
dmlydGlvX2dwdV9jbWRfcmVzb3VyY2VfZmx1c2goc3RydWN0IHZpcnRpb19ncHVfZGV2aWNlICp2
Z2RldiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9wbGFuZS5j
IGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X3BsYW5lLmMKaW5kZXggZjRiNzM2MDI4
MmNlLi4zOTA1MjQxNDMxMzkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmly
dGdwdV9wbGFuZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9wbGFuZS5j
CkBAIC0xMzIsMTAgKzEzMiwxMCBAQCBzdGF0aWMgdm9pZCB2aXJ0aW9fZ3B1X3ByaW1hcnlfcGxh
bmVfdXBkYXRlKHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAogCQkJdmlydGlvX2dwdV9hcnJheV9h
ZGRfb2JqKG9ianMsIHZnZmItPmJhc2Uub2JqWzBdKTsKIAkJCXZpcnRpb19ncHVfY21kX3RyYW5z
ZmVyX3RvX2hvc3RfMmQKIAkJCQkodmdkZXYsIDAsCi0JCQkJIGNwdV90b19sZTMyKHBsYW5lLT5z
dGF0ZS0+c3JjX3cgPj4gMTYpLAotCQkJCSBjcHVfdG9fbGUzMihwbGFuZS0+c3RhdGUtPnNyY19o
ID4+IDE2KSwKLQkJCQkgY3B1X3RvX2xlMzIocGxhbmUtPnN0YXRlLT5zcmNfeCA+PiAxNiksCi0J
CQkJIGNwdV90b19sZTMyKHBsYW5lLT5zdGF0ZS0+c3JjX3kgPj4gMTYpLAorCQkJCSBwbGFuZS0+
c3RhdGUtPnNyY193ID4+IDE2LAorCQkJCSBwbGFuZS0+c3RhdGUtPnNyY19oID4+IDE2LAorCQkJ
CSBwbGFuZS0+c3RhdGUtPnNyY194ID4+IDE2LAorCQkJCSBwbGFuZS0+c3RhdGUtPnNyY195ID4+
IDE2LAogCQkJCSBvYmpzLCBOVUxMKTsKIAkJfQogCX0gZWxzZSB7CkBAIC0yMzQsOCArMjM0LDgg
QEAgc3RhdGljIHZvaWQgdmlydGlvX2dwdV9jdXJzb3JfcGxhbmVfdXBkYXRlKHN0cnVjdCBkcm1f
cGxhbmUgKnBsYW5lLAogCQl2aXJ0aW9fZ3B1X2FycmF5X2FkZF9vYmoob2JqcywgdmdmYi0+YmFz
ZS5vYmpbMF0pOwogCQl2aXJ0aW9fZ3B1X2NtZF90cmFuc2Zlcl90b19ob3N0XzJkCiAJCQkodmdk
ZXYsIDAsCi0JCQkgY3B1X3RvX2xlMzIocGxhbmUtPnN0YXRlLT5jcnRjX3cpLAotCQkJIGNwdV90
b19sZTMyKHBsYW5lLT5zdGF0ZS0+Y3J0Y19oKSwKKwkJCSBwbGFuZS0+c3RhdGUtPmNydGNfdywK
KwkJCSBwbGFuZS0+c3RhdGUtPmNydGNfaCwKIAkJCSAwLCAwLCBvYmpzLCB2Z2ZiLT5mZW5jZSk7
CiAJCWRtYV9mZW5jZV93YWl0KCZ2Z2ZiLT5mZW5jZS0+ZiwgdHJ1ZSk7CiAJCWRtYV9mZW5jZV9w
dXQoJnZnZmItPmZlbmNlLT5mKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8v
dmlydGdwdV92cS5jIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X3ZxLmMKaW5kZXgg
ODAxNzZmMzc5YWQ1Li43NGFkM2JjM2ViZTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92
aXJ0aW8vdmlydGdwdV92cS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV92
cS5jCkBAIC01NDksOCArNTQ5LDggQEAgdm9pZCB2aXJ0aW9fZ3B1X2NtZF9yZXNvdXJjZV9mbHVz
aChzdHJ1Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2LAogCiB2b2lkIHZpcnRpb19ncHVfY21k
X3RyYW5zZmVyX3RvX2hvc3RfMmQoc3RydWN0IHZpcnRpb19ncHVfZGV2aWNlICp2Z2RldiwKIAkJ
CQkJdWludDY0X3Qgb2Zmc2V0LAotCQkJCQlfX2xlMzIgd2lkdGgsIF9fbGUzMiBoZWlnaHQsCi0J
CQkJCV9fbGUzMiB4LCBfX2xlMzIgeSwKKwkJCQkJdWludDMyX3Qgd2lkdGgsIHVpbnQzMl90IGhl
aWdodCwKKwkJCQkJdWludDMyX3QgeCwgdWludDMyX3QgeSwKIAkJCQkJc3RydWN0IHZpcnRpb19n
cHVfb2JqZWN0X2FycmF5ICpvYmpzLAogCQkJCQlzdHJ1Y3QgdmlydGlvX2dwdV9mZW5jZSAqZmVu
Y2UpCiB7CkBAIC01NzEsMTAgKzU3MSwxMCBAQCB2b2lkIHZpcnRpb19ncHVfY21kX3RyYW5zZmVy
X3RvX2hvc3RfMmQoc3RydWN0IHZpcnRpb19ncHVfZGV2aWNlICp2Z2RldiwKIAljbWRfcC0+aGRy
LnR5cGUgPSBjcHVfdG9fbGUzMihWSVJUSU9fR1BVX0NNRF9UUkFOU0ZFUl9UT19IT1NUXzJEKTsK
IAljbWRfcC0+cmVzb3VyY2VfaWQgPSBjcHVfdG9fbGUzMihiby0+aHdfcmVzX2hhbmRsZSk7CiAJ
Y21kX3AtPm9mZnNldCA9IGNwdV90b19sZTY0KG9mZnNldCk7Ci0JY21kX3AtPnIud2lkdGggPSB3
aWR0aDsKLQljbWRfcC0+ci5oZWlnaHQgPSBoZWlnaHQ7Ci0JY21kX3AtPnIueCA9IHg7Ci0JY21k
X3AtPnIueSA9IHk7CisJY21kX3AtPnIud2lkdGggPSBjcHVfdG9fbGUzMih3aWR0aCk7CisJY21k
X3AtPnIuaGVpZ2h0ID0gY3B1X3RvX2xlMzIoaGVpZ2h0KTsKKwljbWRfcC0+ci54ID0gY3B1X3Rv
X2xlMzIoeCk7CisJY21kX3AtPnIueSA9IGNwdV90b19sZTMyKHkpOwogCiAJdmlydGlvX2dwdV9x
dWV1ZV9mZW5jZWRfY3RybF9idWZmZXIodmdkZXYsIHZidWYsICZjbWRfcC0+aGRyLCBmZW5jZSk7
CiB9Ci0tIAoyLjE4LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1k
ZXZlbA==
