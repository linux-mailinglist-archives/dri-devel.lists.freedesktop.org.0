Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 670159C6C3
	for <lists+dri-devel@lfdr.de>; Mon, 26 Aug 2019 02:20:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 610D889948;
	Mon, 26 Aug 2019 00:19:53 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from onstation.org (onstation.org [52.200.56.107])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8DCE86EC80;
 Fri, 23 Aug 2019 12:16:57 +0000 (UTC)
Received: from localhost.localdomain (wsip-184-191-162-253.sd.sd.cox.net
 [184.191.162.253])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: masneyb)
 by onstation.org (Postfix) with ESMTPSA id B1A4E3E955;
 Fri, 23 Aug 2019 12:16:55 +0000 (UTC)
From: Brian Masney <masneyb@onstation.org>
To: agross@kernel.org, robdclark@gmail.com, sean@poorly.run,
 robh+dt@kernel.org, bjorn.andersson@linaro.org
Subject: [PATCH v7 4/7] firmware: qcom: scm: add support to restore secure
 config to qcm_scm-32
Date: Fri, 23 Aug 2019 05:16:34 -0700
Message-Id: <20190823121637.5861-5-masneyb@onstation.org>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190823121637.5861-1-masneyb@onstation.org>
References: <20190823121637.5861-1-masneyb@onstation.org>
MIME-Version: 1.0
X-Mailman-Approved-At: Mon, 26 Aug 2019 00:18:56 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=onstation.org; s=default; t=1566562616;
 bh=kZ2rAe9w2QMG4oBRAiy9qz9K2mga6Cg66vxAWqEIUko=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=jc4xXJ5a0NV6Q186fdFX5kxywnqWh10cY/h3bdCgpE4iMDVk6dhva+2t00UQRvJdu
 rLshj8X17ClW7NbxHt+2C1lYbjf85xtxpaDZ+BPuzyE2tdEixwIXMpz4aXLAP5iTWV
 Grxp6A19w8WtiESAsPMRJGjeI4ZAZ3jWU8XT7JOI=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org, jonathan@marek.ca,
 airlied@linux.ie, linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, freedreno@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9iIENsYXJrIDxyb2JkY2xhcmtAZ21haWwuY29tPgoKQWRkIHN1cHBvcnQgdG8gcmVz
dG9yZSB0aGUgc2VjdXJlIGNvbmZpZ3VyYXRpb24gZm9yIHFjbV9zY20tMzIuYy4gVGhpcwppcyBu
ZWVkZWQgYnkgdGhlIE9uIENoaXAgTUVNb3J5IChPQ01FTSkgdGhhdCBpcyBwcmVzZW50IG9uIHNv
bWUKU25hcGRyYWdvbiBkZXZpY2VzLgoKU2lnbmVkLW9mZi1ieTogUm9iIENsYXJrIDxyb2JkY2xh
cmtAZ21haWwuY29tPgpbbWFzbmV5YkBvbnN0YXRpb24ub3JnOiBwb3J0ZWQgdG8gbGF0ZXN0IGtl
cm5lbDsgc2V0IGN0eF9iYW5rX251bSB0bwogc3BhcmUgcGFyYW1ldGVyLl0KU2lnbmVkLW9mZi1i
eTogQnJpYW4gTWFzbmV5IDxtYXNuZXliQG9uc3RhdGlvbi5vcmc+ClJldmlld2VkLWJ5OiBCam9y
biBBbmRlcnNzb24gPGJqb3JuLmFuZGVyc3NvbkBsaW5hcm8ub3JnPgotLS0KQ2hhbmdlcyBzaW5j
ZSB2NjoKLSBOb25lCgpDaGFuZ2VzIHNpbmNlIHY1OgotIE5vbmUKCkNoYW5nZXMgc2luY2UgdjQ6
Ci0gTm9uZQoKQ2hhbmdlcyBzaW5jZSB2MzoKLSBOb25lCgpDaGFuZ2VzIHNpbmNlIHYyOgotIE5v
bmUKCkNoYW5nZXMgc2luY2UgdjE6Ci0gVXNlIGV4aXN0aW5nIF9fcWNvbV9zY21fcmVzdG9yZV9z
ZWNfY2ZnKCkgZnVuY3Rpb24gc3R1YiBpbgogIHFjb21fc2NtLTMyLmMgdGhhdCB3YXMgdW5pbXBs
ZW1lbnRlZAotIFNldCB0aGUgY2ZnLmN0eF9iYW5rX251bSB0byB0aGUgc3BhcmUgZnVuY3Rpb24g
cGFyYW1ldGVyLiBJdCB3YXMKICBwcmV2aW91c2x5IHNldCB0byB0aGUgZGV2aWNlX2lkLgoKIGRy
aXZlcnMvZmlybXdhcmUvcWNvbV9zY20tMzIuYyB8IDE3ICsrKysrKysrKysrKysrKystCiBkcml2
ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMgICAgfCAxMyArKysrKysrKysrKysrCiBpbmNsdWRlL2xp
bnV4L3Fjb21fc2NtLmggICAgICAgfCAxMSArKysrKysrKysrKwogMyBmaWxlcyBjaGFuZ2VkLCA0
MCBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9maXJt
d2FyZS9xY29tX3NjbS0zMi5jIGIvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS0zMi5jCmluZGV4
IDRjMjUxNGU1ZTI0OS4uNWQ5MGI3ZjVhYjVhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2Zpcm13YXJl
L3Fjb21fc2NtLTMyLmMKKysrIGIvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS0zMi5jCkBAIC02
MTcsNyArNjE3LDIyIEBAIGludCBfX3Fjb21fc2NtX2Fzc2lnbl9tZW0oc3RydWN0IGRldmljZSAq
ZGV2LCBwaHlzX2FkZHJfdCBtZW1fcmVnaW9uLAogaW50IF9fcWNvbV9zY21fcmVzdG9yZV9zZWNf
Y2ZnKHN0cnVjdCBkZXZpY2UgKmRldiwgdTMyIGRldmljZV9pZCwKIAkJCSAgICAgICB1MzIgc3Bh
cmUpCiB7Ci0JcmV0dXJuIC1FTk9ERVY7CisJc3RydWN0IG1zbV9zY21fc2VjX2NmZyB7CisJCV9f
bGUzMiBpZDsKKwkJX19sZTMyIGN0eF9iYW5rX251bTsKKwl9IGNmZzsKKwlpbnQgcmV0LCBzY21f
cmV0ID0gMDsKKworCWNmZy5pZCA9IGNwdV90b19sZTMyKGRldmljZV9pZCk7CisJY2ZnLmN0eF9i
YW5rX251bSA9IGNwdV90b19sZTMyKHNwYXJlKTsKKworCXJldCA9IHFjb21fc2NtX2NhbGwoZGV2
LCBRQ09NX1NDTV9TVkNfTVAsIFFDT01fU0NNX1JFU1RPUkVfU0VDX0NGRywKKwkJCSAgICAmY2Zn
LCBzaXplb2YoY2ZnKSwgJnNjbV9yZXQsIHNpemVvZihzY21fcmV0KSk7CisKKwlpZiAocmV0IHx8
IHNjbV9yZXQpCisJCXJldHVybiByZXQgPyByZXQgOiAtRUlOVkFMOworCisJcmV0dXJuIDA7CiB9
CiAKIGludCBfX3Fjb21fc2NtX2lvbW11X3NlY3VyZV9wdGJsX3NpemUoc3RydWN0IGRldmljZSAq
ZGV2LCB1MzIgc3BhcmUsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMg
Yi9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMKaW5kZXggN2UyODVmZjM5NjFkLi4yN2MxZDk4
YTM0ZTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20uYworKysgYi9kcml2
ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMKQEAgLTM2Nyw2ICszNjcsMTkgQEAgc3RhdGljIGNvbnN0
IHN0cnVjdCByZXNldF9jb250cm9sX29wcyBxY29tX3NjbV9wYXNfcmVzZXRfb3BzID0gewogCS5k
ZWFzc2VydCA9IHFjb21fc2NtX3Bhc19yZXNldF9kZWFzc2VydCwKIH07CiAKKy8qKgorICogcWNv
bV9zY21fcmVzdG9yZV9zZWNfY2ZnX2F2YWlsYWJsZSgpIC0gQ2hlY2sgaWYgc2VjdXJlIGVudmly
b25tZW50CisgKiBzdXBwb3J0cyByZXN0b3JlIHNlY3VyaXR5IGNvbmZpZyBpbnRlcmZhY2UuCisg
KgorICogUmV0dXJuIHRydWUgaWYgcmVzdG9yZS1jZmcgaW50ZXJmYWNlIGlzIHN1cHBvcnRlZCwg
ZmFsc2UgaWYgbm90LgorICovCitib29sIHFjb21fc2NtX3Jlc3RvcmVfc2VjX2NmZ19hdmFpbGFi
bGUodm9pZCkKK3sKKwlyZXR1cm4gX19xY29tX3NjbV9pc19jYWxsX2F2YWlsYWJsZShfX3NjbS0+
ZGV2LCBRQ09NX1NDTV9TVkNfTVAsCisJCQkJCSAgICBRQ09NX1NDTV9SRVNUT1JFX1NFQ19DRkcp
OworfQorRVhQT1JUX1NZTUJPTChxY29tX3NjbV9yZXN0b3JlX3NlY19jZmdfYXZhaWxhYmxlKTsK
KwogaW50IHFjb21fc2NtX3Jlc3RvcmVfc2VjX2NmZyh1MzIgZGV2aWNlX2lkLCB1MzIgc3BhcmUp
CiB7CiAJcmV0dXJuIF9fcWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnKF9fc2NtLT5kZXYsIGRldmlj
ZV9pZCwgc3BhcmUpOwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9xY29tX3NjbS5oIGIvaW5j
bHVkZS9saW51eC9xY29tX3NjbS5oCmluZGV4IGI0OWI3MzRkNjYyYy4uMDQzODJlMTc5OGU0IDEw
MDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4L3Fjb21fc2NtLmgKKysrIGIvaW5jbHVkZS9saW51eC9x
Y29tX3NjbS5oCkBAIC0zNCw2ICszNCwxNiBAQCBlbnVtIHFjb21fc2NtX29jbWVtX2NsaWVudCB7
CiAJUUNPTV9TQ01fT0NNRU1fREVCVUdfSUQsCiB9OwogCitlbnVtIHFjb21fc2NtX3NlY19kZXZf
aWQgeworCVFDT01fU0NNX01EU1NfREVWX0lEICAgID0gMSwKKwlRQ09NX1NDTV9PQ01FTV9ERVZf
SUQgICA9IDUsCisJUUNPTV9TQ01fUENJRTBfREVWX0lEICAgPSAxMSwKKwlRQ09NX1NDTV9QQ0lF
MV9ERVZfSUQgICA9IDEyLAorCVFDT01fU0NNX0dGWF9ERVZfSUQgICAgID0gMTgsCisJUUNPTV9T
Q01fVUZTX0RFVl9JRCAgICAgPSAxOSwKKwlRQ09NX1NDTV9JQ0VfREVWX0lEICAgICA9IDIwLAor
fTsKKwogI2RlZmluZSBRQ09NX1NDTV9WTUlEX0hMT1MgICAgICAgMHgzCiAjZGVmaW5lIFFDT01f
U0NNX1ZNSURfTVNTX01TQSAgICAweEYKICNkZWZpbmUgUUNPTV9TQ01fVk1JRF9XTEFOICAgICAg
IDB4MTgKQEAgLTcwLDYgKzgwLDcgQEAgZXh0ZXJuIGludCBxY29tX3NjbV9hc3NpZ25fbWVtKHBo
eXNfYWRkcl90IG1lbV9hZGRyLCBzaXplX3QgbWVtX3N6LAogZXh0ZXJuIHZvaWQgcWNvbV9zY21f
Y3B1X3Bvd2VyX2Rvd24odTMyIGZsYWdzKTsKIGV4dGVybiB1MzIgcWNvbV9zY21fZ2V0X3ZlcnNp
b24odm9pZCk7CiBleHRlcm4gaW50IHFjb21fc2NtX3NldF9yZW1vdGVfc3RhdGUodTMyIHN0YXRl
LCB1MzIgaWQpOworZXh0ZXJuIGJvb2wgcWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnX2F2YWlsYWJs
ZSh2b2lkKTsKIGV4dGVybiBpbnQgcWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnKHUzMiBkZXZpY2Vf
aWQsIHUzMiBzcGFyZSk7CiBleHRlcm4gaW50IHFjb21fc2NtX2lvbW11X3NlY3VyZV9wdGJsX3Np
emUodTMyIHNwYXJlLCBzaXplX3QgKnNpemUpOwogZXh0ZXJuIGludCBxY29tX3NjbV9pb21tdV9z
ZWN1cmVfcHRibF9pbml0KHU2NCBhZGRyLCB1MzIgc2l6ZSwgdTMyIHNwYXJlKTsKLS0gCjIuMjEu
MAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRl
dmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
