Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2822B72EA4
	for <lists+dri-devel@lfdr.de>; Wed, 24 Jul 2019 14:21:00 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DA0626E4D6;
	Wed, 24 Jul 2019 12:20:47 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd42.google.com (mail-io1-xd42.google.com
 [IPv6:2607:f8b0:4864:20::d42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 75ABF89FD9
 for <dri-devel@lists.freedesktop.org>; Wed, 24 Jul 2019 09:59:34 +0000 (UTC)
Received: by mail-io1-xd42.google.com with SMTP id m24so88350950ioo.2
 for <dri-devel@lists.freedesktop.org>; Wed, 24 Jul 2019 02:59:34 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=dVYaoBPqlKUhxllRn3ei8bCvScMlLdKVTkxfBLFkDN4=;
 b=Tivgglst3pX4dVTH+pRf+G6CWcJybC5gLtk6FW4wrP8yLjy/gNuM/6xG3oRM97iCg4
 p4y0F199wdPQ5OASUtF/nPcIXO25Pi3zMWt/RqgocHGy8nFM8MYrsRQ9Itn7YwWj4NLB
 Td7d1HtIVVEo2yfbW+k5rnEVSs6PEXs+0q/1T+R4QDMqTQYxDxr/M+vz5hBLV+kqegRA
 Efv9UWnLO524Vt6hYsLza7zPga35I9UdDUNx2cC1I35fAJtxEdEirvZhs61+iP4gBKWE
 fH4kjre8jPpfX97rovM5VHysAeu83L/gMWK8OoV0XVUrSz6zmtdz4PIIVEdSrIHShREH
 SNrA==
X-Gm-Message-State: APjAAAU5Fx8HKhciiVep+xyJ+58c261fSpMS/zdrqnfYCjCtNGa2mM4/
 w7iCJXr+prTvuCjfu5pzqbzkUmqWXm6EBFwtezOVxw==
X-Google-Smtp-Source: APXvYqzQNpC90SVOqihvRr3heJAJXheST8iwqv8aQr1+tvn2hL2yHhHkvlqsghUtClMCm1IQedqR0FP+4ZKbvuZi6BM=
X-Received: by 2002:a05:6638:303:: with SMTP id
 w3mr30078738jap.103.1563962373340; 
 Wed, 24 Jul 2019 02:59:33 -0700 (PDT)
MIME-Version: 1.0
References: <000000000000b68e04058e6a3421@google.com>
In-Reply-To: <000000000000b68e04058e6a3421@google.com>
From: Dmitry Vyukov <dvyukov@google.com>
Date: Wed, 24 Jul 2019 11:59:22 +0200
Message-ID: <CACT4Y+ZJpqR9HtDXfEv-nGM_pP4_hSRu1odRX3LBdNq+_Dp=tw@mail.gmail.com>
Subject: Re: memory leak in dma_buf_ioctl
To: syzbot <syzbot+b2098bc44728a4efb3e9@syzkaller.appspotmail.com>, 
 Sumit Semwal <sumit.semwal@linaro.org>, linux-media@vger.kernel.org, 
 DRI <dri-devel@lists.freedesktop.org>, linaro-mm-sig@lists.linaro.org
X-Mailman-Approved-At: Wed, 24 Jul 2019 12:20:46 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=dVYaoBPqlKUhxllRn3ei8bCvScMlLdKVTkxfBLFkDN4=;
 b=rNFp80JGiZF3aHM81XjqStXEZ7MWlub8Oyl5NIDpGiATZHdiNrbNjoFmV+mV02XD2D
 pR3HloKLhIie016OdZKCo3d+4wlcM+rTIp/YbS0J7smhaP0BAwDcuxnR8KQ3UcBR+3tw
 H7jsSnNa/iL3YyzEPmRULDEqwJJQ13JjBoCfAcrPVctVU+roaGPkYP7fSZ+mvKbzq+7l
 JDZd3dwu6quLF3T1ouADFFkqAGF2BN1/Zi06PGuq+uN3umHYegmnnB0/ymel8kiy4QEQ
 WLzbQ4Ch5FlzBl2D7tJnMRfV24RndmzmmXvup1TL7ScvxtHwwhCPXZvnuqDBAlN2Xavs
 343w==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: syzkaller-bugs <syzkaller-bugs@googlegroups.com>,
 LKML <linux-kernel@vger.kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBKdWwgMjQsIDIwMTkgYXQgMTE6NDggQU0gc3l6Ym90CjxzeXpib3QrYjIwOThiYzQ0
NzI4YTRlZmIzZTlAc3l6a2FsbGVyLmFwcHNwb3RtYWlsLmNvbT4gd3JvdGU6Cj4KPiBIZWxsbywK
Pgo+IHN5emJvdCBmb3VuZCB0aGUgZm9sbG93aW5nIGNyYXNoIG9uOgo+Cj4gSEVBRCBjb21taXQ6
ICAgIGFiZGZkNTJhIE1lcmdlIHRhZyAnYXJtc29jLWRlZmNvbmZpZycgb2YgZ2l0Oi8vZ2l0Lmtl
cm5lbC4uLgo+IGdpdCB0cmVlOiAgICAgICB1cHN0cmVhbQo+IGNvbnNvbGUgb3V0cHV0OiBodHRw
czovL3N5emthbGxlci5hcHBzcG90LmNvbS94L2xvZy50eHQ/eD0xMzE0NDFkMDYwMDAwMAo+IGtl
cm5lbCBjb25maWc6ICBodHRwczovL3N5emthbGxlci5hcHBzcG90LmNvbS94Ly5jb25maWc/eD1k
MzFkZTNkODgwNTliN2ZhCj4gZGFzaGJvYXJkIGxpbms6IGh0dHBzOi8vc3l6a2FsbGVyLmFwcHNw
b3QuY29tL2J1Zz9leHRpZD1iMjA5OGJjNDQ3MjhhNGVmYjNlOQo+IGNvbXBpbGVyOiAgICAgICBn
Y2MgKEdDQykgOS4wLjAgMjAxODEyMzEgKGV4cGVyaW1lbnRhbCkKPiBzeXogcmVwcm86ICAgICAg
aHR0cHM6Ly9zeXprYWxsZXIuYXBwc3BvdC5jb20veC9yZXByby5zeXo/eD0xMjUyNmU1ODYwMDAw
MAo+IEMgcmVwcm9kdWNlcjogICBodHRwczovL3N5emthbGxlci5hcHBzcG90LmNvbS94L3JlcHJv
LmM/eD0xNjE3ODRmMDYwMDAwMAoKK2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMgbWFpbnRhaW5l
cnMKCj4gSU1QT1JUQU5UOiBpZiB5b3UgZml4IHRoZSBidWcsIHBsZWFzZSBhZGQgdGhlIGZvbGxv
d2luZyB0YWcgdG8gdGhlIGNvbW1pdDoKPiBSZXBvcnRlZC1ieTogc3l6Ym90K2IyMDk4YmM0NDcy
OGE0ZWZiM2U5QHN5emthbGxlci5hcHBzcG90bWFpbC5jb20KPgo+IGV4ZWN1dGluZyBwcm9ncmFt
Cj4gZXhlY3V0aW5nIHByb2dyYW0KPiBleGVjdXRpbmcgcHJvZ3JhbQo+IGV4ZWN1dGluZyBwcm9n
cmFtCj4gZXhlY3V0aW5nIHByb2dyYW0KPiBCVUc6IG1lbW9yeSBsZWFrCj4gdW5yZWZlcmVuY2Vk
IG9iamVjdCAweGZmZmY4ODgxMTQwMzQ2ODAgKHNpemUgMzIpOgo+ICAgIGNvbW0gInN5ei1leGVj
dXRvcjExMCIsIHBpZCA2ODk0LCBqaWZmaWVzIDQyOTQ5NDcxMzYgKGFnZSAxMy41ODBzKQo+ICAg
IGhleCBkdW1wIChmaXJzdCAzMiBieXRlcyk6Cj4gICAgICAwMCA2NCA2ZCA2MSA2MiA3NSA2NiAz
YSAwMCAwMCAwMCAwMCAwMCAwMCAwMCAwMCAgLmRtYWJ1ZjouLi4uLi4uLgo+ICAgICAgMDAgMDAg
MDAgMDAgMDAgMDAgMDAgMDAgMDAgMDAgMDAgMDAgMDAgMDAgMDAgMDAgIC4uLi4uLi4uLi4uLi4u
Li4KPiAgICBiYWNrdHJhY2U6Cj4gICAgICBbPDAwMDAwMDAwZDI1OTgzNGI+XSBrbWVtbGVha19h
bGxvY19yZWN1cnNpdmUKPiAvLi9pbmNsdWRlL2xpbnV4L2ttZW1sZWFrLmg6NDMgW2lubGluZV0K
PiAgICAgIFs8MDAwMDAwMDBkMjU5ODM0Yj5dIHNsYWJfcG9zdF9hbGxvY19ob29rIC9tbS9zbGFi
Lmg6NTIyIFtpbmxpbmVdCj4gICAgICBbPDAwMDAwMDAwZDI1OTgzNGI+XSBzbGFiX2FsbG9jIC9t
bS9zbGFiLmM6MzMxOSBbaW5saW5lXQo+ICAgICAgWzwwMDAwMDAwMGQyNTk4MzRiPl0gX19kb19r
bWFsbG9jIC9tbS9zbGFiLmM6MzY1MyBbaW5saW5lXQo+ICAgICAgWzwwMDAwMDAwMGQyNTk4MzRi
Pl0gX19rbWFsbG9jX3RyYWNrX2NhbGxlcisweDE2NS8weDMwMCAvbW0vc2xhYi5jOjM2NzAKPiAg
ICAgIFs8MDAwMDAwMDBhYjIwN2VjMT5dIG1lbWR1cF91c2VyKzB4MjYvMHhhMCAvbW0vdXRpbC5j
OjE2NQo+ICAgICAgWzwwMDAwMDAwMGMwOTA5ZDM2Pl0gc3RybmR1cF91c2VyKzB4NjIvMHg4MCAv
bW0vdXRpbC5jOjIyNAo+ICAgICAgWzwwMDAwMDAwMGEzNGEyZDI1Pl0gZG1hX2J1Zl9zZXRfbmFt
ZSAvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYzozMzEKPiBbaW5saW5lXQo+ICAgICAgWzwwMDAw
MDAwMGEzNGEyZDI1Pl0gZG1hX2J1Zl9pb2N0bCsweDYwLzB4MWIwCj4gL2RyaXZlcnMvZG1hLWJ1
Zi9kbWEtYnVmLmM6MzkxCj4gICAgICBbPDAwMDAwMDAwZDc4MTc2NjI+XSB2ZnNfaW9jdGwgL2Zz
L2lvY3RsLmM6NDYgW2lubGluZV0KPiAgICAgIFs8MDAwMDAwMDBkNzgxNzY2Mj5dIGZpbGVfaW9j
dGwgL2ZzL2lvY3RsLmM6NTA5IFtpbmxpbmVdCj4gICAgICBbPDAwMDAwMDAwZDc4MTc2NjI+XSBk
b192ZnNfaW9jdGwrMHg2MmEvMHg4MTAgL2ZzL2lvY3RsLmM6Njk2Cj4gICAgICBbPDAwMDAwMDAw
ZDI0YTY3MWE+XSBrc3lzX2lvY3RsKzB4ODYvMHhiMCAvZnMvaW9jdGwuYzo3MTMKPiAgICAgIFs8
MDAwMDAwMDBiZDgxMGY1ZD5dIF9fZG9fc3lzX2lvY3RsIC9mcy9pb2N0bC5jOjcyMCBbaW5saW5l
XQo+ICAgICAgWzwwMDAwMDAwMGJkODEwZjVkPl0gX19zZV9zeXNfaW9jdGwgL2ZzL2lvY3RsLmM6
NzE4IFtpbmxpbmVdCj4gICAgICBbPDAwMDAwMDAwYmQ4MTBmNWQ+XSBfX3g2NF9zeXNfaW9jdGwr
MHgxZS8weDMwIC9mcy9pb2N0bC5jOjcxOAo+ICAgICAgWzwwMDAwMDAwMDVhOGU4NmQ1Pl0gZG9f
c3lzY2FsbF82NCsweDc2LzB4MWEwCj4gL2FyY2gveDg2L2VudHJ5L2NvbW1vbi5jOjI5Ngo+ICAg
ICAgWzwwMDAwMDAwMDdkODM1MjlmPl0gZW50cnlfU1lTQ0FMTF82NF9hZnRlcl9od2ZyYW1lKzB4
NDQvMHhhOQo+Cj4gQlVHOiBtZW1vcnkgbGVhawo+IHVucmVmZXJlbmNlZCBvYmplY3QgMHhmZmZm
ODg4MTEzYjA0NGEwIChzaXplIDMyKToKPiAgICBjb21tICJzeXotZXhlY3V0b3IxMTAiLCBwaWQg
Njg5NSwgamlmZmllcyA0Mjk0OTQ3NzI4IChhZ2UgNy42NjBzKQo+ICAgIGhleCBkdW1wIChmaXJz
dCAzMiBieXRlcyk6Cj4gICAgICAwMCA2NCA2ZCA2MSA2MiA3NSA2NiAzYSAwMCAwMCAwMCAwMCAw
MCAwMCAwMCAwMCAgLmRtYWJ1ZjouLi4uLi4uLgo+ICAgICAgMDAgMDAgMDAgMDAgMDAgMDAgMDAg
MDAgMDAgMDAgMDAgMDAgMDAgMDAgMDAgMDAgIC4uLi4uLi4uLi4uLi4uLi4KPiAgICBiYWNrdHJh
Y2U6Cj4gICAgICBbPDAwMDAwMDAwZDI1OTgzNGI+XSBrbWVtbGVha19hbGxvY19yZWN1cnNpdmUK
PiAvLi9pbmNsdWRlL2xpbnV4L2ttZW1sZWFrLmg6NDMgW2lubGluZV0KPiAgICAgIFs8MDAwMDAw
MDBkMjU5ODM0Yj5dIHNsYWJfcG9zdF9hbGxvY19ob29rIC9tbS9zbGFiLmg6NTIyIFtpbmxpbmVd
Cj4gICAgICBbPDAwMDAwMDAwZDI1OTgzNGI+XSBzbGFiX2FsbG9jIC9tbS9zbGFiLmM6MzMxOSBb
aW5saW5lXQo+ICAgICAgWzwwMDAwMDAwMGQyNTk4MzRiPl0gX19kb19rbWFsbG9jIC9tbS9zbGFi
LmM6MzY1MyBbaW5saW5lXQo+ICAgICAgWzwwMDAwMDAwMGQyNTk4MzRiPl0gX19rbWFsbG9jX3Ry
YWNrX2NhbGxlcisweDE2NS8weDMwMCAvbW0vc2xhYi5jOjM2NzAKPiAgICAgIFs8MDAwMDAwMDBh
YjIwN2VjMT5dIG1lbWR1cF91c2VyKzB4MjYvMHhhMCAvbW0vdXRpbC5jOjE2NQo+ICAgICAgWzww
MDAwMDAwMGMwOTA5ZDM2Pl0gc3RybmR1cF91c2VyKzB4NjIvMHg4MCAvbW0vdXRpbC5jOjIyNAo+
ICAgICAgWzwwMDAwMDAwMGEzNGEyZDI1Pl0gZG1hX2J1Zl9zZXRfbmFtZSAvZHJpdmVycy9kbWEt
YnVmL2RtYS1idWYuYzozMzEKPiBbaW5saW5lXQo+ICAgICAgWzwwMDAwMDAwMGEzNGEyZDI1Pl0g
ZG1hX2J1Zl9pb2N0bCsweDYwLzB4MWIwCj4gL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmM6Mzkx
Cj4gICAgICBbPDAwMDAwMDAwZDc4MTc2NjI+XSB2ZnNfaW9jdGwgL2ZzL2lvY3RsLmM6NDYgW2lu
bGluZV0KPiAgICAgIFs8MDAwMDAwMDBkNzgxNzY2Mj5dIGZpbGVfaW9jdGwgL2ZzL2lvY3RsLmM6
NTA5IFtpbmxpbmVdCj4gICAgICBbPDAwMDAwMDAwZDc4MTc2NjI+XSBkb192ZnNfaW9jdGwrMHg2
MmEvMHg4MTAgL2ZzL2lvY3RsLmM6Njk2Cj4gICAgICBbPDAwMDAwMDAwZDI0YTY3MWE+XSBrc3lz
X2lvY3RsKzB4ODYvMHhiMCAvZnMvaW9jdGwuYzo3MTMKPiAgICAgIFs8MDAwMDAwMDBiZDgxMGY1
ZD5dIF9fZG9fc3lzX2lvY3RsIC9mcy9pb2N0bC5jOjcyMCBbaW5saW5lXQo+ICAgICAgWzwwMDAw
MDAwMGJkODEwZjVkPl0gX19zZV9zeXNfaW9jdGwgL2ZzL2lvY3RsLmM6NzE4IFtpbmxpbmVdCj4g
ICAgICBbPDAwMDAwMDAwYmQ4MTBmNWQ+XSBfX3g2NF9zeXNfaW9jdGwrMHgxZS8weDMwIC9mcy9p
b2N0bC5jOjcxOAo+ICAgICAgWzwwMDAwMDAwMDVhOGU4NmQ1Pl0gZG9fc3lzY2FsbF82NCsweDc2
LzB4MWEwCj4gL2FyY2gveDg2L2VudHJ5L2NvbW1vbi5jOjI5Ngo+ICAgICAgWzwwMDAwMDAwMDdk
ODM1MjlmPl0gZW50cnlfU1lTQ0FMTF82NF9hZnRlcl9od2ZyYW1lKzB4NDQvMHhhOQo+Cj4KPgo+
IC0tLQo+IFRoaXMgYnVnIGlzIGdlbmVyYXRlZCBieSBhIGJvdC4gSXQgbWF5IGNvbnRhaW4gZXJy
b3JzLgo+IFNlZSBodHRwczovL2dvby5nbC90cHNtRUogZm9yIG1vcmUgaW5mb3JtYXRpb24gYWJv
dXQgc3l6Ym90Lgo+IHN5emJvdCBlbmdpbmVlcnMgY2FuIGJlIHJlYWNoZWQgYXQgc3l6a2FsbGVy
QGdvb2dsZWdyb3Vwcy5jb20uCj4KPiBzeXpib3Qgd2lsbCBrZWVwIHRyYWNrIG9mIHRoaXMgYnVn
IHJlcG9ydC4gU2VlOgo+IGh0dHBzOi8vZ29vLmdsL3Rwc21FSiNzdGF0dXMgZm9yIGhvdyB0byBj
b21tdW5pY2F0ZSB3aXRoIHN5emJvdC4KPiBzeXpib3QgY2FuIHRlc3QgcGF0Y2hlcyBmb3IgdGhp
cyBidWcsIGZvciBkZXRhaWxzIHNlZToKPiBodHRwczovL2dvby5nbC90cHNtRUojdGVzdGluZy1w
YXRjaGVzCj4KPiAtLQo+IFlvdSByZWNlaXZlZCB0aGlzIG1lc3NhZ2UgYmVjYXVzZSB5b3UgYXJl
IHN1YnNjcmliZWQgdG8gdGhlIEdvb2dsZSBHcm91cHMgInN5emthbGxlci1idWdzIiBncm91cC4K
PiBUbyB1bnN1YnNjcmliZSBmcm9tIHRoaXMgZ3JvdXAgYW5kIHN0b3AgcmVjZWl2aW5nIGVtYWls
cyBmcm9tIGl0LCBzZW5kIGFuIGVtYWlsIHRvIHN5emthbGxlci1idWdzK3Vuc3Vic2NyaWJlQGdv
b2dsZWdyb3Vwcy5jb20uCj4gVG8gdmlldyB0aGlzIGRpc2N1c3Npb24gb24gdGhlIHdlYiB2aXNp
dCBodHRwczovL2dyb3Vwcy5nb29nbGUuY29tL2QvbXNnaWQvc3l6a2FsbGVyLWJ1Z3MvMDAwMDAw
MDAwMDAwYjY4ZTA0MDU4ZTZhMzQyMSU0MGdvb2dsZS5jb20uCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
