Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6B31F6BC05
	for <lists+dri-devel@lfdr.de>; Wed, 17 Jul 2019 13:58:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C94BB6E13B;
	Wed, 17 Jul 2019 11:58:43 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.domeneshop.no (smtp.domeneshop.no
 [IPv6:2a01:5b40:0:3005::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 838496E122
 for <dri-devel@lists.freedesktop.org>; Wed, 17 Jul 2019 11:58:32 +0000 (UTC)
Received: from 211.81-166-168.customer.lyse.net ([81.166.168.211]:54758
 helo=localhost.localdomain)
 by smtp.domeneshop.no with esmtpsa (TLS1.2:ECDHE_RSA_AES_128_CBC_SHA1:128)
 (Exim 4.84_2) (envelope-from <noralf@tronnes.org>)
 id 1hniZq-0007Eh-JR; Wed, 17 Jul 2019 13:58:30 +0200
From: =?UTF-8?q?Noralf=20Tr=C3=B8nnes?= <noralf@tronnes.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 06/10] drm/tinydrm: Move tinydrm_spi_transfer()
Date: Wed, 17 Jul 2019 13:58:13 +0200
Message-Id: <20190717115817.30110-7-noralf@tronnes.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190717115817.30110-1-noralf@tronnes.org>
References: <20190717115817.30110-1-noralf@tronnes.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; d=tronnes.org; s=ds201810; 
 h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From;
 bh=Byroj9SQ3ywcz293X7FdZPE2quKv50xMhdMQiFZcjhU=; 
 b=oycA8+gKNnL6BQ7F98VmyzXRx9nDK562Di/O5LKMkaC4j5WMC1+rIRRz1dNZQfF++7Ucbn4e1r/lml16fzTpHeU4w44jwL7O47KbWZyijK+NKM0GT7dU6/W23inymDds3LWBFVdZNO3kdg9GtHx4KujxcDMDjcCCEdENi6JHvTeJX2ku204lR5TW0NJT2/r1KmjVdHPZvkw4yz04jql7Co7gefnqp5q/FtgrCuFb7vTYiH9+ekvqxuBUI5+ECzsitTClNyJHXtxLE+eSigzjaGGhttGF+7HpoEXCvDc+1lZaKBP/aOtk9WJgN/mo2W7lsFFrGCbD2OoQNAJ7RnnVPw==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: david@lechnology.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBpcyBvbmx5IHVzZWQgYnkgbWlwaS1kYmkgZHJpdmVycyBzbyBtb3ZlIGl0IHRoZXJlLgoK
VGhlIHJlYXNvbiB0aGlzIGlzbid0IG1vdmVkIHRvIHRoZSBTUEkgc3Vic3lzdGVtIGlzIHRoYXQg
aXQgd2lsbCBpbiBhCmxhdGVyIHBhdGNoIHBhc3MgYSBkdW1teSByeCBidWZmZXIgZm9yIFNQSSBj
b250cm9sbGVycyB0aGF0IG5lZWQgdGhpcy4KTG93IG1lbW9yeSBib2FyZHMgKDY0TUIpIGNhbiBy
dW4gaW50byBhIHByb2JsZW0gYWxsb2NhdGluZyBzdWNoIGEgImxhcmdlIgpjb250aWd1b3VzIGJ1
ZmZlciBvbiBldmVyeSB0cmFuc2ZlciBhZnRlciBhIGxvbmcgdXAgdGltZS4KVGhpcyBsZWF2ZXMg
YSB2ZXJ5IHNwZWNpZmljIHVzZSBjYXNlLCBzbyB3ZSdsbCBrZWVwIHRoZSBmdW5jdGlvbiBoZXJl
LgptaXBpLWRiaSB3aWxsIGZpcnN0IGdvIHRocm91Z2ggYSByZWZhY3RvcmluZyB0aG91Z2gsIGJl
Zm9yZSB0aGlzIHdpbGwKYmUgZG9uZS4KClJlbW92ZSBTUEkgdG9kbyBlbnRyeSBub3cgdGhhdCB3
ZSdyZSBkb25lIHdpdGggdGhlIHRpbnlkcm0ua28gU1BJIGNvZGUuCgpBZGRpdGlvbmFsbHkgbW92
ZSB0aGUgbWlwaV9kYmlfc3BpX2luaXQoKSBkZWNsYXJhdGlvbiB0byB0aGUgb3RoZXIgU1BJCmZ1
bmN0aW9ucy4KCkNjOiBEYXZpZCBMZWNobmVyIDxkYXZpZEBsZWNobm9sb2d5LmNvbT4KU2lnbmVk
LW9mZi1ieTogTm9yYWxmIFRyw7hubmVzIDxub3JhbGZAdHJvbm5lcy5vcmc+Ci0tLQogRG9jdW1l
bnRhdGlvbi9ncHUvdGlueWRybS5yc3QgICAgICAgICAgICAgICAgIHwgIDMgLQogRG9jdW1lbnRh
dGlvbi9ncHUvdG9kby5yc3QgICAgICAgICAgICAgICAgICAgIHwgIDMgLQogZHJpdmVycy9ncHUv
ZHJtL3Rpbnlkcm0vY29yZS9NYWtlZmlsZSAgICAgICAgIHwgIDIgKy0KIC4uLi9ncHUvZHJtL3Rp
bnlkcm0vY29yZS90aW55ZHJtLWhlbHBlcnMuYyAgICB8IDcwIC0tLS0tLS0tLS0tLS0tLS0tLS0K
IGRyaXZlcnMvZ3B1L2RybS90aW55ZHJtL2NvcmUvdGlueWRybS1waXBlLmMgICB8ICA0ICsrCiBk
cml2ZXJzL2dwdS9kcm0vdGlueWRybS9pbGk5MjI1LmMgICAgICAgICAgICAgfCAgNSArLQogZHJp
dmVycy9ncHUvZHJtL3Rpbnlkcm0vbWlwaS1kYmkuYyAgICAgICAgICAgIHwgNDkgKysrKysrKysr
KysrLQogaW5jbHVkZS9kcm0vdGlueWRybS9taXBpLWRiaS5oICAgICAgICAgICAgICAgIHwgIDcg
Ky0KIGluY2x1ZGUvZHJtL3Rpbnlkcm0vdGlueWRybS1oZWxwZXJzLmggICAgICAgICB8ICA1IC0t
CiA5IGZpbGVzIGNoYW5nZWQsIDU5IGluc2VydGlvbnMoKyksIDg5IGRlbGV0aW9ucygtKQogZGVs
ZXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS90aW55ZHJtL2NvcmUvdGlueWRybS1oZWxw
ZXJzLmMKCmRpZmYgLS1naXQgYS9Eb2N1bWVudGF0aW9uL2dwdS90aW55ZHJtLnJzdCBiL0RvY3Vt
ZW50YXRpb24vZ3B1L3Rpbnlkcm0ucnN0CmluZGV4IDMzYTQxNTQ0ZjY1OS4uMmMyODYwZmExNTEw
IDEwMDY0NAotLS0gYS9Eb2N1bWVudGF0aW9uL2dwdS90aW55ZHJtLnJzdAorKysgYi9Eb2N1bWVu
dGF0aW9uL2dwdS90aW55ZHJtLnJzdApAQCAtMTEsOSArMTEsNiBAQCBIZWxwZXJzCiAuLiBrZXJu
ZWwtZG9jOjogaW5jbHVkZS9kcm0vdGlueWRybS90aW55ZHJtLWhlbHBlcnMuaAogICAgOmludGVy
bmFsOgogCi0uLiBrZXJuZWwtZG9jOjogZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0vY29yZS90aW55
ZHJtLWhlbHBlcnMuYwotICAgOmV4cG9ydDoKLQogLi4ga2VybmVsLWRvYzo6IGRyaXZlcnMvZ3B1
L2RybS90aW55ZHJtL2NvcmUvdGlueWRybS1waXBlLmMKICAgIDpleHBvcnQ6CiAKZGlmZiAtLWdp
dCBhL0RvY3VtZW50YXRpb24vZ3B1L3RvZG8ucnN0IGIvRG9jdW1lbnRhdGlvbi9ncHUvdG9kby5y
c3QKaW5kZXggM2Y2ZWNmODQ2MjYzLi4zODQxOTkzMjUzMDQgMTAwNjQ0Ci0tLSBhL0RvY3VtZW50
YXRpb24vZ3B1L3RvZG8ucnN0CisrKyBiL0RvY3VtZW50YXRpb24vZ3B1L3RvZG8ucnN0CkBAIC00
NTYsOSArNDU2LDYgQEAgdGlueWRybQogVGlueWRybSBpcyB0aGUgaGVscGVyIGRyaXZlciBmb3Ig
cmVhbGx5IHNpbXBsZSBmYiBkcml2ZXJzLiBUaGUgZ29hbCBpcyB0byBtYWtlCiB0aG9zZSBkcml2
ZXJzIGFzIHNpbXBsZSBhcyBwb3NzaWJsZSwgc28gbG90cyBvZiByb29tIGZvciByZWZhY3Rvcmlu
ZzoKIAotLSBzcGkgaGVscGVycywgcHJvYmFibHkgYmVzdCBwdXQgaW50byBzcGkgY29yZS9oZWxw
ZXIgY29kZS4gVGhpZXJyeSBzYWlkCi0gIHRoZSBzcGkgbWFpbnRhaW5lciBpcyBmYXN0JnJlYWN0
aXZlLCBzbyBzaG91bGRuJ3QgYmUgYSBiaWcgaXNzdWUuCi0KIC0gZXh0cmFjdCB0aGUgbWlwaS1k
YmkgaGVscGVyICh3ZWxsLCB0aGUgbm9uLXRpbnlkcm0gc3BlY2lmaWMgcGFydHMgYXQKICAgbGVh
c3QpIGludG8gYSBzZXBhcmF0ZSBoZWxwZXIsIGxpa2Ugd2UgaGF2ZSBmb3IgbWlwaS1kc2kgYWxy
ZWFkeS4gT3IgZm9sbG93CiAgIG9uZSBvZiB0aGUgaWRlYXMgZm9yIGhhdmluZyBhIHNoYXJlZCBk
c2kvZGJpIGhlbHBlciwgYWJzdHJhY3RpbmcgYXdheSB0aGUKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS90aW55ZHJtL2NvcmUvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vdGlueWRybS9j
b3JlL01ha2VmaWxlCmluZGV4IDAxMDY1ZTkyMGFlYS4uNzhlMTc5MTI3ZTU1IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vdGlueWRybS9jb3JlL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS90aW55ZHJtL2NvcmUvTWFrZWZpbGUKQEAgLTEsNCArMSw0IEBACiAjIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkKLXRpbnlkcm0teSA6PSB0aW55ZHJtLXBpcGUubyB0
aW55ZHJtLWhlbHBlcnMubwordGlueWRybS15IDo9IHRpbnlkcm0tcGlwZS5vCiAKIG9iai0kKENP
TkZJR19EUk1fVElOWURSTSkgKz0gdGlueWRybS5vCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vdGlueWRybS9jb3JlL3Rpbnlkcm0taGVscGVycy5jIGIvZHJpdmVycy9ncHUvZHJtL3Rpbnlk
cm0vY29yZS90aW55ZHJtLWhlbHBlcnMuYwpkZWxldGVkIGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
ZDk1ZWI1MGZhOWQ0Li4wMDAwMDAwMDAwMDAKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0v
Y29yZS90aW55ZHJtLWhlbHBlcnMuYworKysgL2Rldi9udWxsCkBAIC0xLDcwICswLDAgQEAKLS8v
IFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCi0vKgotICogQ29weXJp
Z2h0IChDKSAyMDE2IE5vcmFsZiBUcsO4bm5lcwotICovCi0KLSNpbmNsdWRlIDxsaW51eC9iYWNr
bGlnaHQuaD4KLSNpbmNsdWRlIDxsaW51eC9kbWEtYnVmLmg+Ci0jaW5jbHVkZSA8bGludXgvbW9k
dWxlLmg+Ci0jaW5jbHVkZSA8bGludXgvcG0uaD4KLSNpbmNsdWRlIDxsaW51eC9zcGkvc3BpLmg+
Ci0jaW5jbHVkZSA8bGludXgvc3dhYi5oPgotCi0jaW5jbHVkZSA8ZHJtL2RybV9kZXZpY2UuaD4K
LSNpbmNsdWRlIDxkcm0vZHJtX2Rydi5oPgotI2luY2x1ZGUgPGRybS9kcm1fZm91cmNjLmg+Ci0j
aW5jbHVkZSA8ZHJtL2RybV9mcmFtZWJ1ZmZlci5oPgotI2luY2x1ZGUgPGRybS9kcm1fcHJpbnQu
aD4KLSNpbmNsdWRlIDxkcm0vZHJtX3JlY3QuaD4KLSNpbmNsdWRlIDxkcm0vdGlueWRybS90aW55
ZHJtLWhlbHBlcnMuaD4KLQotI2lmIElTX0VOQUJMRUQoQ09ORklHX1NQSSkKLQotLyoqCi0gKiB0
aW55ZHJtX3NwaV90cmFuc2ZlciAtIFNQSSB0cmFuc2ZlciBoZWxwZXIKLSAqIEBzcGk6IFNQSSBk
ZXZpY2UKLSAqIEBzcGVlZF9oejogT3ZlcnJpZGUgc3BlZWQgKG9wdGlvbmFsKQotICogQGJwdzog
Qml0cyBwZXIgd29yZAotICogQGJ1ZjogQnVmZmVyIHRvIHRyYW5zZmVyCi0gKiBAbGVuOiBCdWZm
ZXIgbGVuZ3RoCi0gKgotICogVGhpcyBTUEkgdHJhbnNmZXIgaGVscGVyIGJyZWFrcyB1cCB0aGUg
dHJhbnNmZXIgb2YgQGJ1ZiBpbnRvIGNodW5rcyB3aGljaAotICogdGhlIFNQSSBjb250cm9sbGVy
IGRyaXZlciBjYW4gaGFuZGxlLgotICoKLSAqIFJldHVybnM6Ci0gKiBaZXJvIG9uIHN1Y2Nlc3Ms
IG5lZ2F0aXZlIGVycm9yIGNvZGUgb24gZmFpbHVyZS4KLSAqLwotaW50IHRpbnlkcm1fc3BpX3Ry
YW5zZmVyKHN0cnVjdCBzcGlfZGV2aWNlICpzcGksIHUzMiBzcGVlZF9oeiwKLQkJCSB1OCBicHcs
IGNvbnN0IHZvaWQgKmJ1Ziwgc2l6ZV90IGxlbikKLXsKLQlzaXplX3QgbWF4X2NodW5rID0gc3Bp
X21heF90cmFuc2Zlcl9zaXplKHNwaSk7Ci0Jc3RydWN0IHNwaV90cmFuc2ZlciB0ciA9IHsKLQkJ
LmJpdHNfcGVyX3dvcmQgPSBicHcsCi0JCS5zcGVlZF9oeiA9IHNwZWVkX2h6LAotCX07Ci0Jc3Ry
dWN0IHNwaV9tZXNzYWdlIG07Ci0Jc2l6ZV90IGNodW5rOwotCWludCByZXQ7Ci0KLQlzcGlfbWVz
c2FnZV9pbml0X3dpdGhfdHJhbnNmZXJzKCZtLCAmdHIsIDEpOwotCi0Jd2hpbGUgKGxlbikgewot
CQljaHVuayA9IG1pbihsZW4sIG1heF9jaHVuayk7Ci0KLQkJdHIudHhfYnVmID0gYnVmOwotCQl0
ci5sZW4gPSBjaHVuazsKLQkJYnVmICs9IGNodW5rOwotCQlsZW4gLT0gY2h1bms7Ci0KLQkJcmV0
ID0gc3BpX3N5bmMoc3BpLCAmbSk7Ci0JCWlmIChyZXQpCi0JCQlyZXR1cm4gcmV0OwotCX0KLQot
CXJldHVybiAwOwotfQotRVhQT1JUX1NZTUJPTCh0aW55ZHJtX3NwaV90cmFuc2Zlcik7Ci0KLSNl
bmRpZiAvKiBDT05GSUdfU1BJICovCi0KLU1PRFVMRV9MSUNFTlNFKCJHUEwiKTsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL2NvcmUvdGlueWRybS1waXBlLmMgYi9kcml2ZXJz
L2dwdS9kcm0vdGlueWRybS9jb3JlL3Rpbnlkcm0tcGlwZS5jCmluZGV4IGVkNzk4ZmQ5NTE1Mi4u
YTYyZDFkZmU4N2Y4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGlueWRybS9jb3JlL3Rp
bnlkcm0tcGlwZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL2NvcmUvdGlueWRybS1w
aXBlLmMKQEAgLTMsNiArMyw4IEBACiAgKiBDb3B5cmlnaHQgKEMpIDIwMTYgTm9yYWxmIFRyw7hu
bmVzCiAgKi8KIAorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorCiAjaW5jbHVkZSA8ZHJtL2Ry
bV9hdG9taWNfaGVscGVyLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9kcnYuaD4KICNpbmNsdWRlIDxk
cm0vZHJtX2dlbV9mcmFtZWJ1ZmZlcl9oZWxwZXIuaD4KQEAgLTE3NywzICsxNzksNSBAQCBpbnQg
dGlueWRybV9kaXNwbGF5X3BpcGVfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZHJtLAogCQkJCQkg
ICAgZm9ybWF0X2NvdW50LCBtb2RpZmllcnMsIGNvbm5lY3Rvcik7CiB9CiBFWFBPUlRfU1lNQk9M
KHRpbnlkcm1fZGlzcGxheV9waXBlX2luaXQpOworCitNT0RVTEVfTElDRU5TRSgiR1BMIik7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdGlueWRybS9pbGk5MjI1LmMgYi9kcml2ZXJzL2dw
dS9kcm0vdGlueWRybS9pbGk5MjI1LmMKaW5kZXggMjE2NzdlM2VkMzhiLi42MmYyOWIyZmFmNzQg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL2lsaTkyMjUuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vdGlueWRybS9pbGk5MjI1LmMKQEAgLTI3LDcgKzI3LDYgQEAKICNpbmNsdWRl
IDxkcm0vZHJtX3JlY3QuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3ZibGFuay5oPgogI2luY2x1ZGUg
PGRybS90aW55ZHJtL21pcGktZGJpLmg+Ci0jaW5jbHVkZSA8ZHJtL3Rpbnlkcm0vdGlueWRybS1o
ZWxwZXJzLmg+CiAKICNkZWZpbmUgSUxJOTIyNV9EUklWRVJfUkVBRF9DT0RFCTB4MDAKICNkZWZp
bmUgSUxJOTIyNV9EUklWRVJfT1VUUFVUX0NPTlRST0wJMHgwMQpAQCAtMzIzLDcgKzMyMiw3IEBA
IHN0YXRpYyBpbnQgaWxpOTIyNV9kYmlfY29tbWFuZChzdHJ1Y3QgbWlwaV9kYmkgKm1pcGksIHU4
ICpjbWQsIHU4ICpwYXIsCiAKIAlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAobWlwaS0+ZGMsIDAp
OwogCXNwZWVkX2h6ID0gbWlwaV9kYmlfc3BpX2NtZF9tYXhfc3BlZWQoc3BpLCAxKTsKLQlyZXQg
PSB0aW55ZHJtX3NwaV90cmFuc2ZlcihzcGksIHNwZWVkX2h6LCA4LCBjbWQsIDEpOworCXJldCA9
IG1pcGlfZGJpX3NwaV90cmFuc2ZlcihzcGksIHNwZWVkX2h6LCA4LCBjbWQsIDEpOwogCWlmIChy
ZXQgfHwgIW51bSkKIAkJcmV0dXJuIHJldDsKIApAQCAtMzMzLDcgKzMzMiw3IEBAIHN0YXRpYyBp
bnQgaWxpOTIyNV9kYmlfY29tbWFuZChzdHJ1Y3QgbWlwaV9kYmkgKm1pcGksIHU4ICpjbWQsIHU4
ICpwYXIsCiAJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKG1pcGktPmRjLCAxKTsKIAlzcGVlZF9o
eiA9IG1pcGlfZGJpX3NwaV9jbWRfbWF4X3NwZWVkKHNwaSwgbnVtKTsKIAotCXJldHVybiB0aW55
ZHJtX3NwaV90cmFuc2ZlcihzcGksIHNwZWVkX2h6LCBicHcsIHBhciwgbnVtKTsKKwlyZXR1cm4g
bWlwaV9kYmlfc3BpX3RyYW5zZmVyKHNwaSwgc3BlZWRfaHosIGJwdywgcGFyLCBudW0pOwogfQog
CiBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9zaW1wbGVfZGlzcGxheV9waXBlX2Z1bmNzIGlsaTky
MjVfcGlwZV9mdW5jcyA9IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL21p
cGktZGJpLmMgYi9kcml2ZXJzL2dwdS9kcm0vdGlueWRybS9taXBpLWRiaS5jCmluZGV4IDhmYjZj
ZTRjYTZmYy4uNmE4ZjJkNjYzNzdmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGlueWRy
bS9taXBpLWRiaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL21pcGktZGJpLmMKQEAg
LTkyNiw3ICs5MjYsNyBAQCBzdGF0aWMgaW50IG1pcGlfZGJpX3R5cGVjM19jb21tYW5kKHN0cnVj
dCBtaXBpX2RiaSAqbWlwaSwgdTggKmNtZCwKIAogCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcCht
aXBpLT5kYywgMCk7CiAJc3BlZWRfaHogPSBtaXBpX2RiaV9zcGlfY21kX21heF9zcGVlZChzcGks
IDEpOwotCXJldCA9IHRpbnlkcm1fc3BpX3RyYW5zZmVyKHNwaSwgc3BlZWRfaHosIDgsIGNtZCwg
MSk7CisJcmV0ID0gbWlwaV9kYmlfc3BpX3RyYW5zZmVyKHNwaSwgc3BlZWRfaHosIDgsIGNtZCwg
MSk7CiAJaWYgKHJldCB8fCAhbnVtKQogCQlyZXR1cm4gcmV0OwogCkBAIC05MzYsNyArOTM2LDcg
QEAgc3RhdGljIGludCBtaXBpX2RiaV90eXBlYzNfY29tbWFuZChzdHJ1Y3QgbWlwaV9kYmkgKm1p
cGksIHU4ICpjbWQsCiAJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKG1pcGktPmRjLCAxKTsKIAlz
cGVlZF9oeiA9IG1pcGlfZGJpX3NwaV9jbWRfbWF4X3NwZWVkKHNwaSwgbnVtKTsKIAotCXJldHVy
biB0aW55ZHJtX3NwaV90cmFuc2ZlcihzcGksIHNwZWVkX2h6LCBicHcsIHBhciwgbnVtKTsKKwly
ZXR1cm4gbWlwaV9kYmlfc3BpX3RyYW5zZmVyKHNwaSwgc3BlZWRfaHosIGJwdywgcGFyLCBudW0p
OwogfQogCiAvKioKQEAgLTEwMDcsNiArMTAwNyw1MSBAQCBpbnQgbWlwaV9kYmlfc3BpX2luaXQo
c3RydWN0IHNwaV9kZXZpY2UgKnNwaSwgc3RydWN0IG1pcGlfZGJpICptaXBpLAogfQogRVhQT1JU
X1NZTUJPTChtaXBpX2RiaV9zcGlfaW5pdCk7CiAKKy8qKgorICogbWlwaV9kYmlfc3BpX3RyYW5z
ZmVyIC0gU1BJIHRyYW5zZmVyIGhlbHBlcgorICogQHNwaTogU1BJIGRldmljZQorICogQHNwZWVk
X2h6OiBPdmVycmlkZSBzcGVlZCAob3B0aW9uYWwpCisgKiBAYnB3OiBCaXRzIHBlciB3b3JkCisg
KiBAYnVmOiBCdWZmZXIgdG8gdHJhbnNmZXIKKyAqIEBsZW46IEJ1ZmZlciBsZW5ndGgKKyAqCisg
KiBUaGlzIFNQSSB0cmFuc2ZlciBoZWxwZXIgYnJlYWtzIHVwIHRoZSB0cmFuc2ZlciBvZiBAYnVm
IGludG8gY2h1bmtzIHdoaWNoCisgKiB0aGUgU1BJIGNvbnRyb2xsZXIgZHJpdmVyIGNhbiBoYW5k
bGUuCisgKgorICogUmV0dXJuczoKKyAqIFplcm8gb24gc3VjY2VzcywgbmVnYXRpdmUgZXJyb3Ig
Y29kZSBvbiBmYWlsdXJlLgorICovCitpbnQgbWlwaV9kYmlfc3BpX3RyYW5zZmVyKHN0cnVjdCBz
cGlfZGV2aWNlICpzcGksIHUzMiBzcGVlZF9oeiwKKwkJCSAgdTggYnB3LCBjb25zdCB2b2lkICpi
dWYsIHNpemVfdCBsZW4pCit7CisJc2l6ZV90IG1heF9jaHVuayA9IHNwaV9tYXhfdHJhbnNmZXJf
c2l6ZShzcGkpOworCXN0cnVjdCBzcGlfdHJhbnNmZXIgdHIgPSB7CisJCS5iaXRzX3Blcl93b3Jk
ID0gYnB3LAorCQkuc3BlZWRfaHogPSBzcGVlZF9oeiwKKwl9OworCXN0cnVjdCBzcGlfbWVzc2Fn
ZSBtOworCXNpemVfdCBjaHVuazsKKwlpbnQgcmV0OworCisJc3BpX21lc3NhZ2VfaW5pdF93aXRo
X3RyYW5zZmVycygmbSwgJnRyLCAxKTsKKworCXdoaWxlIChsZW4pIHsKKwkJY2h1bmsgPSBtaW4o
bGVuLCBtYXhfY2h1bmspOworCisJCXRyLnR4X2J1ZiA9IGJ1ZjsKKwkJdHIubGVuID0gY2h1bms7
CisJCWJ1ZiArPSBjaHVuazsKKwkJbGVuIC09IGNodW5rOworCisJCXJldCA9IHNwaV9zeW5jKHNw
aSwgJm0pOworCQlpZiAocmV0KQorCQkJcmV0dXJuIHJldDsKKwl9CisKKwlyZXR1cm4gMDsKK30K
K0VYUE9SVF9TWU1CT0wobWlwaV9kYmlfc3BpX3RyYW5zZmVyKTsKKwogI2VuZGlmIC8qIENPTkZJ
R19TUEkgKi8KIAogI2lmZGVmIENPTkZJR19ERUJVR19GUwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9k
cm0vdGlueWRybS9taXBpLWRiaS5oIGIvaW5jbHVkZS9kcm0vdGlueWRybS9taXBpLWRiaS5oCmlu
ZGV4IDUxZmM2NjdiZWVmNy4uNTc2ZTlhNzM0OWFiIDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS90
aW55ZHJtL21pcGktZGJpLmgKKysrIGIvaW5jbHVkZS9kcm0vdGlueWRybS9taXBpLWRiaS5oCkBA
IC02Nyw4ICs2Nyw2IEBAIHN0YXRpYyBpbmxpbmUgc3RydWN0IG1pcGlfZGJpICpkcm1fdG9fbWlw
aV9kYmkoc3RydWN0IGRybV9kZXZpY2UgKmRybSkKIAlyZXR1cm4gY29udGFpbmVyX29mKGRybSwg
c3RydWN0IG1pcGlfZGJpLCBkcm0pOwogfQogCi1pbnQgbWlwaV9kYmlfc3BpX2luaXQoc3RydWN0
IHNwaV9kZXZpY2UgKnNwaSwgc3RydWN0IG1pcGlfZGJpICptaXBpLAotCQkgICAgICBzdHJ1Y3Qg
Z3Bpb19kZXNjICpkYyk7CiBpbnQgbWlwaV9kYmlfaW5pdChzdHJ1Y3QgbWlwaV9kYmkgKm1pcGks
CiAJCSAgY29uc3Qgc3RydWN0IGRybV9zaW1wbGVfZGlzcGxheV9waXBlX2Z1bmNzICpmdW5jcywK
IAkJICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwgdW5zaWduZWQgaW50IHJv
dGF0aW9uKTsKQEAgLTgzLDcgKzgxLDEyIEBAIHZvaWQgbWlwaV9kYmlfaHdfcmVzZXQoc3RydWN0
IG1pcGlfZGJpICptaXBpKTsKIGJvb2wgbWlwaV9kYmlfZGlzcGxheV9pc19vbihzdHJ1Y3QgbWlw
aV9kYmkgKm1pcGkpOwogaW50IG1pcGlfZGJpX3Bvd2Vyb25fcmVzZXQoc3RydWN0IG1pcGlfZGJp
ICptaXBpKTsKIGludCBtaXBpX2RiaV9wb3dlcm9uX2NvbmRpdGlvbmFsX3Jlc2V0KHN0cnVjdCBt
aXBpX2RiaSAqbWlwaSk7CisKIHUzMiBtaXBpX2RiaV9zcGlfY21kX21heF9zcGVlZChzdHJ1Y3Qg
c3BpX2RldmljZSAqc3BpLCBzaXplX3QgbGVuKTsKK2ludCBtaXBpX2RiaV9zcGlfaW5pdChzdHJ1
Y3Qgc3BpX2RldmljZSAqc3BpLCBzdHJ1Y3QgbWlwaV9kYmkgKm1pcGksCisJCSAgICAgIHN0cnVj
dCBncGlvX2Rlc2MgKmRjKTsKK2ludCBtaXBpX2RiaV9zcGlfdHJhbnNmZXIoc3RydWN0IHNwaV9k
ZXZpY2UgKnNwaSwgdTMyIHNwZWVkX2h6LAorCQkJICB1OCBicHcsIGNvbnN0IHZvaWQgKmJ1Ziwg
c2l6ZV90IGxlbik7CiAKIGludCBtaXBpX2RiaV9jb21tYW5kX3JlYWQoc3RydWN0IG1pcGlfZGJp
ICptaXBpLCB1OCBjbWQsIHU4ICp2YWwpOwogaW50IG1pcGlfZGJpX2NvbW1hbmRfYnVmKHN0cnVj
dCBtaXBpX2RiaSAqbWlwaSwgdTggY21kLCB1OCAqZGF0YSwgc2l6ZV90IGxlbik7CmRpZmYgLS1n
aXQgYS9pbmNsdWRlL2RybS90aW55ZHJtL3Rpbnlkcm0taGVscGVycy5oIGIvaW5jbHVkZS9kcm0v
dGlueWRybS90aW55ZHJtLWhlbHBlcnMuaAppbmRleCA3MDhjNWE3ZDUxZTAuLjhjNWQyMGVmZWFh
MSAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vdGlueWRybS90aW55ZHJtLWhlbHBlcnMuaAorKysg
Yi9pbmNsdWRlL2RybS90aW55ZHJtL3Rpbnlkcm0taGVscGVycy5oCkBAIC0xMyw4ICsxMyw2IEBA
IHN0cnVjdCBkcm1fZnJhbWVidWZmZXI7CiBzdHJ1Y3QgZHJtX3JlY3Q7CiBzdHJ1Y3QgZHJtX3Np
bXBsZV9kaXNwbGF5X3BpcGU7CiBzdHJ1Y3QgZHJtX3NpbXBsZV9kaXNwbGF5X3BpcGVfZnVuY3M7
Ci1zdHJ1Y3Qgc3BpX3RyYW5zZmVyOwotc3RydWN0IHNwaV9kZXZpY2U7CiBzdHJ1Y3QgZGV2aWNl
OwogCiAvKioKQEAgLTQxLDcgKzM5LDQgQEAgaW50IHRpbnlkcm1fZGlzcGxheV9waXBlX2luaXQo
c3RydWN0IGRybV9kZXZpY2UgKmRybSwKIAkJCSAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxh
eV9tb2RlICptb2RlLAogCQkJICAgICAgdW5zaWduZWQgaW50IHJvdGF0aW9uKTsKIAotaW50IHRp
bnlkcm1fc3BpX3RyYW5zZmVyKHN0cnVjdCBzcGlfZGV2aWNlICpzcGksIHUzMiBzcGVlZF9oeiwK
LQkJCSB1OCBicHcsIGNvbnN0IHZvaWQgKmJ1Ziwgc2l6ZV90IGxlbik7Ci0KICNlbmRpZiAvKiBf
X0xJTlVYX1RJTllEUk1fSEVMUEVSU19IICovCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJp
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
