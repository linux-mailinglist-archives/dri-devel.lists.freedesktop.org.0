Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7E27FEC845
	for <lists+dri-devel@lfdr.de>; Fri,  1 Nov 2019 19:09:36 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7F4856E29E;
	Fri,  1 Nov 2019 18:09:33 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x442.google.com (mail-pf1-x442.google.com
 [IPv6:2607:f8b0:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 010CC6E29E
 for <dri-devel@lists.freedesktop.org>; Fri,  1 Nov 2019 18:09:31 +0000 (UTC)
Received: by mail-pf1-x442.google.com with SMTP id x195so4098657pfd.1
 for <dri-devel@lists.freedesktop.org>; Fri, 01 Nov 2019 11:09:31 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=YeTpB1Wx1lpy3awpQLYzDRRtlZuKfiLn87LhRSvje50=;
 b=J/CSd30JXkYxFKOol/yW7J0ijy+VinQORLntD+U0WHYDVihvF5YG6LgNHbqWMw36r3
 U6RL0ztyD83E9Wmp5FYMToupiZzEV+QDUItHPQg4kWZiNFNaXyPtFR/D0PAhvM4RomdB
 EEYEsjiW7tGx857kDRtd1Cf/s8wwxfTCdN1nDiHTb+/UMibk4/hPpxwdvYDvNbbTV5TT
 MDlkxP3lNCAxKaZyiEBqhrog6q8jgMSz6xoVBKppTb2j/FkRvQ3ehqMHXQ25nBNJ15/V
 AxQ9fihZY2EH/l7LdMfFlHSUxtV2dzJzX9PpPDeBAM0pxJjV11UzcyfVn2LsQX+kSAAY
 ky5Q==
X-Gm-Message-State: APjAAAU/d4il+Ps+dfQ2OChF1pGHx7SvPjJucz4N5Q+HVS45d/VsfDzw
 ZJNGdbom3eLrCpdH2YXWNYBsO9WKRJw=
X-Google-Smtp-Source: APXvYqyGp7XRZmRiIlwGHykCJbawjeXomnH4aaKmoylErPEGGbORyqTyQ0wtAogksfMUB+aXofXNwQ==
X-Received: by 2002:a63:f919:: with SMTP id h25mr6789478pgi.85.1572631771170; 
 Fri, 01 Nov 2019 11:09:31 -0700 (PDT)
Received: from localhost ([100.118.89.209])
 by smtp.gmail.com with ESMTPSA id 16sm9364172pgd.0.2019.11.01.11.09.30
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 01 Nov 2019 11:09:30 -0700 (PDT)
From: Rob Clark <robdclark@gmail.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 1/2] drm/atomic: fix self-refresh helpers crtc state
 dereference
Date: Fri,  1 Nov 2019 11:07:12 -0700
Message-Id: <20191101180713.5470-1-robdclark@gmail.com>
X-Mailer: git-send-email 2.21.0
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=YeTpB1Wx1lpy3awpQLYzDRRtlZuKfiLn87LhRSvje50=;
 b=MEejXdvJ/xWDM7BvqOG6PxfoSYB1nWSgMQfn97OEzsbkg/GVwzIsbSUvmV1wsqV0Qs
 WIvpo+Z97RKj57DiBqRQ9AjJKfgkiH4umbmx1ElHdLveGg2pwZdKIuDU9PLSdWrvuvw4
 uyxc+lD9UbDSxHAjICjQ3u49KgPDQQo91XCvY1kEv0uJ/6EYQKUzPEhiDG3iZ3NFM/e2
 RL5Lo8JL0VlxAi+HXAiTTYkQVfY5L4ahPLsGyHsPtgF6UZl26yTQ/9RBeQ0XcCFfnWKc
 LI+sgSsbOjbhVKVez+ayoElCg9uvUjX2lOj4Cu0gDBVl5HuxyEe9HLh+1iDpOFrfB8Q1
 PUsw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rob Clark <robdclark@chromium.org>, David Airlie <airlied@linux.ie>,
 open list <linux-kernel@vger.kernel.org>, Sean Paul <seanpaul@chromium.org>,
 Sean Paul <sean@poorly.run>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9iIENsYXJrIDxyb2JkY2xhcmtAY2hyb21pdW0ub3JnPgoKZHJtX3NlbGZfcmVmcmVz
aF9oZWxwZXJfdXBkYXRlX2F2Z190aW1lcygpIHdhcyBpbmNvcnJlY3RseSBhY2Nlc3NpbmcgdGhl
Cm5ldyBpbmNvbWluZyBzdGF0ZSBhZnRlciBkcm1fYXRvbWljX2hlbHBlcl9jb21taXRfaHdfZG9u
ZSgpLiAgQnV0IHRoaXMKc3RhdGUgbWlnaHQgaGF2ZSBhbHJlYWR5IGJlZW4gc3VwZXJjZWVkZWQg
YnkgYW4gIW5vbmJsb2NrIGF0b21pYyB1cGRhdGUKcmVzdWx0aW5nIGluIGRlcmVmZXJlbmNpbmcg
YW4gYWxyZWFkeSBmcmVlJ2QgY3J0Y19zdGF0ZS4KCkZpeGVzOiBkNGRhNGUzMzM0MWMgKCJkcm06
IE1lYXN1cmUgU2VsZiBSZWZyZXNoIEVudHJ5L0V4aXQgdGltZXMgdG8gYXZvaWQgdGhyYXNoaW5n
IikKQ2M6IFNlYW4gUGF1bCA8c2VhbnBhdWxAY2hyb21pdW0ub3JnPgpTaWduZWQtb2ZmLWJ5OiBS
b2IgQ2xhcmsgPHJvYmRjbGFya0BjaHJvbWl1bS5vcmc+Ci0tLQpUT0RPIEkgKnRoaW5rKiB0aGlz
IHdpbGwgbW9yZSBvciBsZXNzIGRvIHRoZSByaWdodCB0aGluZy4uIGFsdGhvdWdodCBJJ20Kbm90
IDEwMCUgc3VyZSBpZiwgZm9yIGV4YW1wbGUsIHdlIGVudGVyIHBzciBpbiBhIG5vbmJsb2NrIGNv
bW1pdCwgYW5kCnRoZW4gbGVhdmUgcHNyIGluIGEgIW5vbmJsb2NrIGNvbW1pdCB0aGF0IG92ZXJ0
YWtlcyB0aGUgY29tcGxldGlvbiBvZgp0aGUgbm9uYmxvY2sgY29tbWl0LiAgTm90IHN1cmUgaWYg
dGhpcyBzb3J0IG9mIHNjZW5hcmlvIGNhbiBoYXBwZW4gaW4KcHJhY3RpY2UuICBCdXQgbm90IGNy
YXNoaW5nIGlzIGJldHRlciB0aGFuIGNyYXNoaW5nLCBzbyBJIGd1ZXNzIHdlCnNob3VsZCBlaXRo
ZXIgdGFrZSB0aGlzIHBhdGNoIG9yIHJldmVyIHRoZSBzZWxmLXJlZnJlc2ggaGVscGVycyB1bnRp
bApTZWFuIGNhbiBmaWd1cmUgb3V0IGEgYmV0dGVyIHNvbHV0aW9uLgoKIGRyaXZlcnMvZ3B1L2Ry
bS9kcm1fYXRvbWljX2hlbHBlci5jICAgICAgIHwgIDIgKysKIGRyaXZlcnMvZ3B1L2RybS9kcm1f
c2VsZl9yZWZyZXNoX2hlbHBlci5jIHwgMTEgKysrKysrLS0tLS0KIGluY2x1ZGUvZHJtL2RybV9h
dG9taWMuaCAgICAgICAgICAgICAgICAgIHwgIDggKysrKysrKysKIDMgZmlsZXMgY2hhbmdlZCwg
MTYgaW5zZXJ0aW9ucygrKSwgNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vZHJtX2F0b21pY19oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX2hl
bHBlci5jCmluZGV4IDNlZjJhYzUyY2U5NC4uNzMyYmQwY2U5MjQxIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19oZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJt
X2F0b21pY19oZWxwZXIuYwpAQCAtMjI0MCw2ICsyMjQwLDggQEAgdm9pZCBkcm1fYXRvbWljX2hl
bHBlcl9jb21taXRfaHdfZG9uZShzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX3N0YXRlKQog
CWludCBpOwogCiAJZm9yX2VhY2hfb2xkbmV3X2NydGNfaW5fc3RhdGUob2xkX3N0YXRlLCBjcnRj
LCBvbGRfY3J0Y19zdGF0ZSwgbmV3X2NydGNfc3RhdGUsIGkpIHsKKwkJb2xkX3N0YXRlLT5jcnRj
c1tpXS5uZXdfc2VsZl9yZWZyZXNoX2FjdGl2ZSA9IG5ld19jcnRjX3N0YXRlLT5zZWxmX3JlZnJl
c2hfYWN0aXZlOworCiAJCWNvbW1pdCA9IG5ld19jcnRjX3N0YXRlLT5jb21taXQ7CiAJCWlmICgh
Y29tbWl0KQogCQkJY29udGludWU7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX3Nl
bGZfcmVmcmVzaF9oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fc2VsZl9yZWZyZXNoX2hl
bHBlci5jCmluZGV4IDY4ZjQ3NjVhNTg5Ni4uNzdiOTA3OWZhNTc4IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vZHJtX3NlbGZfcmVmcmVzaF9oZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vZHJtX3NlbGZfcmVmcmVzaF9oZWxwZXIuYwpAQCAtMTQzLDE5ICsxNDMsMjAgQEAgdm9pZCBk
cm1fc2VsZl9yZWZyZXNoX2hlbHBlcl91cGRhdGVfYXZnX3RpbWVzKHN0cnVjdCBkcm1fYXRvbWlj
X3N0YXRlICpzdGF0ZSwKIAkJCQkJICAgICAgdW5zaWduZWQgaW50IGNvbW1pdF90aW1lX21zKQog
ewogCXN0cnVjdCBkcm1fY3J0YyAqY3J0YzsKLQlzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKm9sZF9j
cnRjX3N0YXRlLCAqbmV3X2NydGNfc3RhdGU7CisJc3RydWN0IGRybV9jcnRjX3N0YXRlICpvbGRf
Y3J0Y19zdGF0ZTsKIAlpbnQgaTsKIAotCWZvcl9lYWNoX29sZG5ld19jcnRjX2luX3N0YXRlKHN0
YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0ZSwKLQkJCQkgICAgICBuZXdfY3J0Y19zdGF0ZSwgaSkg
eworCWZvcl9lYWNoX29sZF9jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0Y19zdGF0
ZSwgaSkgeworCQlib29sIG5ld19zZWxmX3JlZnJlc2hfYWN0aXZlID0KKwkJCQlzdGF0ZS0+Y3J0
Y3NbaV0ubmV3X3NlbGZfcmVmcmVzaF9hY3RpdmU7CiAJCXN0cnVjdCBkcm1fc2VsZl9yZWZyZXNo
X2RhdGEgKnNyX2RhdGEgPSBjcnRjLT5zZWxmX3JlZnJlc2hfZGF0YTsKIAkJc3RydWN0IGV3bWFf
cHNyX3RpbWUgKnRpbWU7CiAKIAkJaWYgKG9sZF9jcnRjX3N0YXRlLT5zZWxmX3JlZnJlc2hfYWN0
aXZlID09Ci0JCSAgICBuZXdfY3J0Y19zdGF0ZS0+c2VsZl9yZWZyZXNoX2FjdGl2ZSkKKwkJICAg
IG5ld19zZWxmX3JlZnJlc2hfYWN0aXZlKQogCQkJY29udGludWU7CiAKLQkJaWYgKG5ld19jcnRj
X3N0YXRlLT5zZWxmX3JlZnJlc2hfYWN0aXZlKQorCQlpZiAobmV3X3NlbGZfcmVmcmVzaF9hY3Rp
dmUpCiAJCQl0aW1lID0gJnNyX2RhdGEtPmVudHJ5X2F2Z19tczsKIAkJZWxzZQogCQkJdGltZSA9
ICZzcl9kYXRhLT5leGl0X2F2Z19tczsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9hdG9t
aWMuaCBiL2luY2x1ZGUvZHJtL2RybV9hdG9taWMuaAppbmRleCA5MjdlMTIwNWQ3YWEuLjg2YmFm
MmIzOGJiMyAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2F0b21pYy5oCisrKyBiL2luY2x1
ZGUvZHJtL2RybV9hdG9taWMuaApAQCAtMTU1LDYgKzE1NSwxNCBAQCBzdHJ1Y3QgX19kcm1fY3J0
Y3Nfc3RhdGUgewogCXN0cnVjdCBkcm1fY3J0YyAqcHRyOwogCXN0cnVjdCBkcm1fY3J0Y19zdGF0
ZSAqc3RhdGUsICpvbGRfc3RhdGUsICpuZXdfc3RhdGU7CiAKKwkvKioKKwkgKiBAbmV3X3NlbGZf
cmVmcmVzaF9hY3RpdmU6CisJICoKKwkgKiBkcm1fYXRvbWljX2hlbHBlcl9jb21taXRfaHdfZG9u
ZSgpIHN0YXNoZXMgbmV3X2NydGNfc3RhdGUtPnNlbGZfcmVmcmVzaF9hY3RpdmUKKwkgKiBzbyB0
aGF0IGl0IGNhbiBiZSBhY2Nlc3NlZCBsYXRlIGluIGRybV9zZWxmX3JlZnJlc2hfaGVscGVyX3Vw
ZGF0ZV9hdmdfdGltZXMoKS4KKwkgKi8KKwlib29sIG5ld19zZWxmX3JlZnJlc2hfYWN0aXZlOwor
CiAJLyoqCiAJICogQGNvbW1pdDoKIAkgKgotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1k
ZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
