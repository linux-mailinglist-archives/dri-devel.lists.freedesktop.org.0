Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D49C42CE957
	for <lists+dri-devel@lfdr.de>; Fri,  4 Dec 2020 09:17:06 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 132E26E138;
	Fri,  4 Dec 2020 08:17:01 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from NAM10-DM6-obe.outbound.protection.outlook.com
 (mail-dm6nam10on2077.outbound.protection.outlook.com [40.107.93.77])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EFEA76E138;
 Fri,  4 Dec 2020 08:16:59 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=TtOQrLrSi75t0hb9i+yK0oTWVF7Pkizzyipg36ljv90cGHHc7+LxVf8idFQHGfWSIdH6VXX3Fe9D2cpNCdcCT79ec4b13/BHFwpaiKJ8oZhwBA1LOvbY5JPrV1vAtX71NGXCz3XMNt86wogDGfvOyLIw6GfwuEq31KqWKlEwDgivehpG1t6U67PaP+bhb8gnhHUxHfdiLP9+HGhBl0oEvE8rv1WhMqv57DUpm4ZEJhyPVwWSpeBF3bZVOgcYEjbF75KlcEMlnZoRlCWwVPz1s5Y6P3vIM1OYycohGs2RHnpXLk4/v6pQwEcbkuWADayQQjDiDBGa4DPjW+diP4Yldw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=DQ+7Hqg5eTtjTih1gS5tDqHhs01uUx66THOCy6Ng7AY=;
 b=Ty5kSGilNjy1VJNJwTOARWg/va4ssy7/+sA2AISIn7Tx1a4UQNFwU8tr3ljGw4zOLoeNOqdELquqfGwuR+FzzeGNy7NgO7n0L0iGU8JBwCmt0rT87o2kf4gJ5BudE5qA/cvCXaX2cLYsBolngAy7OVYWESC+K+xhLjg3ilxW1dKXpzsuyZIURv7+SeM9nfFWsBG8QDut5tiEnhsTyOHFagvVQ3zmY2vr+GhGYsS4QHa5x6rZ/r6mAFs2/Di71WdXZzaQSic2mdCAlYH+JUjpiX3r8B34E1nOtuTZpbH6Kjvcbjjwm8VcxRrVEoyzM7tDnpl8KG13z3UW1EpF5cSZyw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=DQ+7Hqg5eTtjTih1gS5tDqHhs01uUx66THOCy6Ng7AY=;
 b=0lMhw/xxqDTLO1HJL/BfJYn70BYIitePv9UhPQOejp6CD4w8Wt0vGKJ/z57szCwcS//th6XOZ6BHMCGtZ5moHrUvQMXcXMzOux3WIAKWPdgMOqOnTODQNMjfDoP1wMKzpfCo5CCBsvmKueYdMrD9j6t2z8HfgZq3PvJQFHDeFyY=
Authentication-Results: anholt.net; dkim=none (message not signed)
 header.d=none;anholt.net; dmarc=none action=none header.from=amd.com;
Received: from MN2PR12MB3775.namprd12.prod.outlook.com (2603:10b6:208:159::19)
 by BL0PR12MB4689.namprd12.prod.outlook.com (2603:10b6:208:8f::20)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.3632.17; Fri, 4 Dec
 2020 08:16:57 +0000
Received: from MN2PR12MB3775.namprd12.prod.outlook.com
 ([fe80::1ccc:8a9a:45d3:dd31]) by MN2PR12MB3775.namprd12.prod.outlook.com
 ([fe80::1ccc:8a9a:45d3:dd31%7]) with mapi id 15.20.3611.035; Fri, 4 Dec 2020
 08:16:57 +0000
Subject: Re: [PATCH 5/5] drm/sched: Make use of a "done" list (v2)
To: Luben Tuikov <luben.tuikov@amd.com>, amd-gfx@lists.freedesktop.org,
 dri-devel@lists.freedesktop.org
References: <20201204031722.24040-1-luben.tuikov@amd.com>
 <20201204031722.24040-6-luben.tuikov@amd.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <christian.koenig@amd.com>
Message-ID: <65fd6863-4a45-d34b-4b58-ec402940c0d0@amd.com>
Date: Fri, 4 Dec 2020 09:16:50 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.10.0
In-Reply-To: <20201204031722.24040-6-luben.tuikov@amd.com>
Content-Language: en-US
X-Originating-IP: [2a02:908:1252:fb60:be8a:bd56:1f94:86e7]
X-ClientProxiedBy: AM4P190CA0016.EURP190.PROD.OUTLOOK.COM
 (2603:10a6:200:56::26) To MN2PR12MB3775.namprd12.prod.outlook.com
 (2603:10b6:208:159::19)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from [IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7]
 (2a02:908:1252:fb60:be8a:bd56:1f94:86e7) by
 AM4P190CA0016.EURP190.PROD.OUTLOOK.COM (2603:10a6:200:56::26) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.3632.17 via Frontend Transport; Fri, 4 Dec 2020 08:16:55 +0000
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: b6d7ce89-04ac-4ae0-3997-08d8982cf754
X-MS-TrafficTypeDiagnostic: BL0PR12MB4689:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <BL0PR12MB468999256444376676D485B883F10@BL0PR12MB4689.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:773;
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: 80kjjgNvVxjV40zgdYATOhFLeOQiEQUmiQb/E166w23/IE/iRHwwKWK/PpvDWtnecxZddNUov7UEucrMvwtzjJSuq3UexSFzuHQ3MVG47p10PjXjjEEL8nWsWosj0uFDoAqUJKJCCcFgeEEqjEjbHxbCuzPOMSbV6UC2OCbK1om+VRP5kVWgQN9ZVrzAGDUne3dKtZ7yLfv/yRzhqotogkPncsY4T2xtamrBGdsxgEUfbuAY4EWxz2pN8ygpQwz/rJardKItrWvy/YXqB6Iio2nCiiXb4G9zfiqpXFZvvqHf2o8VWv8MyD6Yg7uZiSdDX1g14FmSlp48PpRjpVHGICydXyAESOpQPs2J5rffQ1FH2To5k38WFnDY2MINmIrr3HoWxdzI4D0+GhTlaNmr3gV6apNQhQ5a0cTNVvCNArw=
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:MN2PR12MB3775.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(136003)(396003)(39860400002)(366004)(376002)(346002)(316002)(2616005)(186003)(86362001)(54906003)(31696002)(6666004)(16526019)(478600001)(52116002)(8676002)(7416002)(36756003)(6486002)(4326008)(83380400001)(66476007)(31686004)(8936002)(2906002)(66556008)(5660300002)(66946007)(66574015)(30864003)(43740500002)(45980500001);
 DIR:OUT; SFP:1101; 
X-MS-Exchange-AntiSpam-MessageData: =?utf-8?B?bnpmdmo5aFJFTHF5WnBxYldub1hlZ2VMRkpaODE3SFhLOWd0YnhUQjlkby8y?=
 =?utf-8?B?WHp2QW1JZDZQM0J1eU04SkFPeU5rYXl4aWROZ3VxN0s0OGZvSEhGTUVzVnBT?=
 =?utf-8?B?NDZUYmRMbkV5TE5PVC9wQllyV0o2SUV4Y2s1NUtHWm9Sblo3NXJwZ3JoeElM?=
 =?utf-8?B?Q2I3TUxJNE9YeUk5OXVoOTlYOVl0ekFlWFlQcmNxK0JhSmUzdGVXc3BpU3dH?=
 =?utf-8?B?MmtTazcwNGVkMm5XbnNnVTNSdXVJSWFUdlYxbUsxalMrK3dBR2picFlDUko2?=
 =?utf-8?B?WWMzMTFnYVhib05OU24vTzBaS3BydDlVczZpUnFEVkkveXdGNDR5V0s3eGQr?=
 =?utf-8?B?aG9YQ3RBUDcrdU05WktuZXNnZ2wrWUV3bTVyOGE5a2dLUE9FenV2OXF6dDNj?=
 =?utf-8?B?YUk3YlpST0FaV1NwbnZ0aTNzUXlUakVDU2xEUGF2My85Zk5XMHFkcHRoNWtR?=
 =?utf-8?B?eVJRakxOWXJqbVRjektnZE1jd25Ta0dlMGo1NUluVlRka0xRbnc2cXBzYi81?=
 =?utf-8?B?MEZmQXBoN21nNHFyamFyS1l1QVc1WGVVTEkrbFRXLzNkcFlXVzNWSS9BK1Fj?=
 =?utf-8?B?bUdvUW9JSzNNSjRWWHIxOTZwK3NJNnZwVVhUdzRJM243Y2x4L2V4cHg0ZnFF?=
 =?utf-8?B?WWhveGVTZkQyTkd4U3JwTDU1U2g2aERqaFpiTDNoQklFeEd1VWhPalZqVVBC?=
 =?utf-8?B?WWVPVmpvUG5rdFoyM3l5akVwSHdtV3J5OUdNTUp1Q1lBbTZKelp0dTdNNVFG?=
 =?utf-8?B?cHZYWHI0eDM1QldPVXV3S0l4eGhvcnNIZ1JxLytSa3hXQUlwQnNicWxwS0dB?=
 =?utf-8?B?Tms2eTUzbHAxU29ubnBJdC81c0tLVWNOam9TUXF4Y1F6djNxMkt5MDAyZWtu?=
 =?utf-8?B?aFBMeWJTSVVkSGE2aW9NVDZlMTJQYVlEL3owR0V0c2hpVXFmMXFycGJ3cXFl?=
 =?utf-8?B?SVMvV3IxUStRQVk1UDZXaG5Uc3h4R0Zaa1VReUhLZGdUeVVEU2NkeDIvbWI3?=
 =?utf-8?B?aUYwaURNTm1hU0trc2FwWlpxeXdiTkNraVlxdFd1YXY0emVnQ1ozcldFaTBj?=
 =?utf-8?B?d2NybmVQOHF4cytYeEsrdjFnZXpuenhLc3RhN3FyUG5XY2ZiTEU0SlpUS0pC?=
 =?utf-8?B?MldKdnpOOEUzSVcyRWVwY1pWajh3L2VhVWpUdzZyNjV5Ulp3NHRLcUJBcU1E?=
 =?utf-8?B?UXo2QjFVOHY1QWFIR2l1SjA0eG42aVhIZndXa05SWW5xWFVnZEtnRFVJeGlj?=
 =?utf-8?B?TG5rSTI4OVZKUUM3VFJWbEJmMmNJaG5NcThyYnZqQzg0Rys2eVdXeDg5TVVS?=
 =?utf-8?B?NDNuTndtV0U4QklrZEErZjI0a0FQNStYOWZxU0pER1N1QVpHYVIzL3VtZjJC?=
 =?utf-8?B?N3hia0Q0SUZBVUJVU1FJbEkzNkR6Y3JSWktDcDdWaUh4UHA2QkFvS1NqTEVw?=
 =?utf-8?Q?jvYbhYF2?=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: b6d7ce89-04ac-4ae0-3997-08d8982cf754
X-MS-Exchange-CrossTenant-AuthSource: MN2PR12MB3775.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 04 Dec 2020 08:16:57.1148 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: gbEHO9oM8GVC/T04LTw4OwcJYznqHhye3D8l4GfYEqgLizE10vHNrOdAKR5fo6wF
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BL0PR12MB4689
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Tomeu Vizoso <tomeu.vizoso@collabora.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>,
 Steven Price <steven.price@arm.com>, Qiang Yu <yuq825@gmail.com>,
 Russell King <linux+etnaviv@armlinux.org.uk>,
 Alexander Deucher <Alexander.Deucher@amd.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QW0gMDQuMTIuMjAgdW0gMDQ6MTcgc2NocmllYiBMdWJlbiBUdWlrb3Y6Cj4gVGhlIGRybV9zY2hl
ZF9qb2JfZG9uZSgpIGNhbGxiYWNrIG5vdyBtb3ZlcyBkb25lCj4gam9icyBmcm9tIHRoZSBwZW5k
aW5nIGxpc3QgdG8gYSAiZG9uZSIgbGlzdC4KPgo+IEluIGRybV9zY2hlZF9qb2JfdGltZW91dCwg
bWFrZSB1c2Ugb2YgdGhlIHN0YXR1cwo+IHJldHVybmVkIGJ5IGEgR1BVIGRyaXZlciBqb2IgdGlt
ZW91dCBoYW5kbGVyIHRvCj4gZGVjaWRlIHdoZXRoZXIgdG8gbGVhdmUgdGhlIG9sZGVzdCBqb2Ig
aW4gdGhlCj4gcGVuZGluZyBsaXN0LCBvciB0byBzZW5kIGl0IG9mZiB0byB0aGUgZG9uZSBsaXN0
Lgo+IElmIGEgZHJpdmVyJ3Mgam9iIHRpbWVvdXQgY2FsbGJhY2sgcmV0dXJucyBhCj4gc3RhdHVz
IHRoYXQgdGhhdCBqb2IgaXMgZG9uZSwgaXQgaXMgYWRkZWQgdG8gdGhlCj4gZG9uZSBsaXN0IGFu
ZCB0aGUgZG9uZSB0aHJlYWQgd29rZW4gdXAuIElmIHRoYXQKPiBqb2IgbmVlZHMgbW9yZSB0aW1l
LCBpdCBpcyBsZWZ0IG9uIHRoZSBwZW5kaW5nCj4gbGlzdCBhbmQgdGhlIHRpbWVvdXQgdGltZXIg
cmVzdGFydGVkLgo+Cj4gVGhlIGlkZWEgaXMgdGhhdCBhIEdQVSBkcml2ZXIgY2FuIGNoZWNrIHRo
ZSBJUCB0bwo+IHdoaWNoIHRoZSBwYXNzZWQtaW4gam9iIGJlbG9uZ3MgdG8gYW5kIGRldGVybWlu
ZQo+IHdoZXRoZXIgdGhlIElQIGlzIGFsaXZlIGFuZCB3ZWxsLCBvciBpZiBpdCBuZWVkcwo+IG1v
cmUgdGltZSB0byBjb21wbGV0ZSB0aGlzIGpvYiBhbmQgcGVyaGFwcyBvdGhlcnMKPiBhbHNvIGV4
ZWN1dGluZyBvbiBpdC4KPgo+IEluIGRybV9zY2hlZF9qb2JfdGltZW91dCgpLCB0aGUgbWFpbiBz
Y2hlZHVsZXIKPiB0aHJlYWQgaXMgbm93IHBhcmtlZCwgYmVmb3JlIGNhbGxpbmcgYSBkcml2ZXIn
cwo+IHRpbWVvdXRfam9iIGNhbGxiYWNrLCBzbyBhcyB0byBub3QgY29tcGV0ZSBwdXNoaW5nCj4g
am9icyBkb3duIHRvIHRoZSBHUFUgd2hpbGUgdGhlIHJlY292ZXJ5IG1ldGhvZCBpcwo+IHRha2lu
ZyBwbGFjZS4KPgo+IEVsaW1pbmF0ZSB0aGUgcG9sbGluZyBtZWNoYW5pc20gb2YgcGlja2luZyBv
dXQgZG9uZQo+IGpvYnMgZnJvbSB0aGUgcGVuZGluZyBsaXN0LCBpLmUuIGVsaW1pbmF0ZQo+IGRy
bV9zY2hlZF9nZXRfY2xlYW51cF9qb2IoKS4KPgo+IFRoaXMgYWxzbyBlbGltaW5hdGVzIHRoZSBl
bGRlc3Qgam9iIGRpc2FwcGVhcmluZwo+IGZyb20gdGhlIHBlbmRpbmcgbGlzdCwgd2hpbGUgdGhl
IGRyaXZlciB0aW1lb3V0Cj4gaGFuZGxlciBpcyBjYWxsZWQuCj4KPiBWYXJpb3VzIG90aGVyIG9w
dGltaXphdGlvbnMgdG8gdGhlIEdQVSBzY2hlZHVsZXIKPiBhbmQgam9iIHJlY292ZXJ5IGFyZSBw
b3NzaWJsZSB3aXRoIHRoaXMgZm9ybWF0Lgo+Cj4gU2lnbmVkLW9mZi1ieTogTHViZW4gVHVpa292
IDxsdWJlbi50dWlrb3ZAYW1kLmNvbT4KPgo+IENjOiBBbGV4YW5kZXIgRGV1Y2hlciA8QWxleGFu
ZGVyLkRldWNoZXJAYW1kLmNvbT4KPiBDYzogQW5kcmV5IEdyb2R6b3Zza3kgPEFuZHJleS5Hcm9k
em92c2t5QGFtZC5jb20+Cj4gQ2M6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdA
YW1kLmNvbT4KPiBDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBmZndsbC5jaD4KPiBD
YzogTHVjYXMgU3RhY2ggPGwuc3RhY2hAcGVuZ3V0cm9uaXguZGU+Cj4gQ2M6IFJ1c3NlbGwgS2lu
ZyA8bGludXgrZXRuYXZpdkBhcm1saW51eC5vcmcudWs+Cj4gQ2M6IENocmlzdGlhbiBHbWVpbmVy
IDxjaHJpc3RpYW4uZ21laW5lckBnbWFpbC5jb20+Cj4gQ2M6IFFpYW5nIFl1IDx5dXE4MjVAZ21h
aWwuY29tPgo+IENjOiBSb2IgSGVycmluZyA8cm9iaEBrZXJuZWwub3JnPgo+IENjOiBUb21ldSBW
aXpvc28gPHRvbWV1LnZpem9zb0Bjb2xsYWJvcmEuY29tPgo+IENjOiBTdGV2ZW4gUHJpY2UgPHN0
ZXZlbi5wcmljZUBhcm0uY29tPgo+IENjOiBBbHlzc2EgUm9zZW56d2VpZyA8YWx5c3NhLnJvc2Vu
endlaWdAY29sbGFib3JhLmNvbT4KPiBDYzogRXJpYyBBbmhvbHQgPGVyaWNAYW5ob2x0Lm5ldD4K
Pgo+IHYyOiBEaXNwZWxsIHVzaW5nIGEgZG9uZSB0aHJlYWQsIHNvIGFzIHRvIGtlZXAKPiAgICAg
IHRoZSBjYWNoZSBob3Qgb24gdGhlIHNhbWUgcHJvY2Vzc29yLgo+IC0tLQo+ICAgZHJpdmVycy9n
cHUvZHJtL3NjaGVkdWxlci9zY2hlZF9tYWluLmMgfCAyNDcgKysrKysrKysrKysrKy0tLS0tLS0t
LS0tLQo+ICAgaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oICAgICAgICAgICAgfCAgIDQgKwo+
ICAgMiBmaWxlcyBjaGFuZ2VkLCAxMzQgaW5zZXJ0aW9ucygrKSwgMTE3IGRlbGV0aW9ucygtKQo+
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2NoZWRfbWFpbi5jIGIv
ZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9tYWluLmMKPiBpbmRleCBiOTg3NmNhZDk0
ZjIuLmQ3NzE4MGI0NDk5OCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVy
L3NjaGVkX21haW4uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2NoZWRfbWFp
bi5jCj4gQEAgLTE2NCw3ICsxNjQsOSBAQCBkcm1fc2NoZWRfcnFfc2VsZWN0X2VudGl0eShzdHJ1
Y3QgZHJtX3NjaGVkX3JxICpycSkKPiAgICAqIGRybV9zY2hlZF9qb2JfZG9uZSAtIGNvbXBsZXRl
IGEgam9iCj4gICAgKiBAc19qb2I6IHBvaW50ZXIgdG8gdGhlIGpvYiB3aGljaCBpcyBkb25lCj4g
ICAgKgo+IC0gKiBGaW5pc2ggdGhlIGpvYidzIGZlbmNlIGFuZCB3YWtlIHVwIHRoZSB3b3JrZXIg
dGhyZWFkLgo+ICsgKiBNb3ZlIHRoZSBjb21wbGV0ZWQgdGFzayB0byB0aGUgZG9uZSBsaXN0LAo+
ICsgKiBzaWduYWwgdGhlIGl0cyBmZW5jZSB0byBtYXJrIGl0IGZpbmlzaGVkLAo+ICsgKiBhbmQg
d2FrZSB1cCB0aGUgd29ya2VyIHRocmVhZC4KPiAgICAqLwo+ICAgc3RhdGljIHZvaWQgZHJtX3Nj
aGVkX2pvYl9kb25lKHN0cnVjdCBkcm1fc2NoZWRfam9iICpzX2pvYikKPiAgIHsKPiBAQCAtMTc2
LDkgKzE3OCwxNCBAQCBzdGF0aWMgdm9pZCBkcm1fc2NoZWRfam9iX2RvbmUoc3RydWN0IGRybV9z
Y2hlZF9qb2IgKnNfam9iKQo+ICAgCj4gICAJdHJhY2VfZHJtX3NjaGVkX3Byb2Nlc3Nfam9iKHNf
ZmVuY2UpOwo+ICAgCj4gKwlzcGluX2xvY2soJnNjaGVkLT5qb2JfbGlzdF9sb2NrKTsKPiArCWxp
c3RfbW92ZSgmc19qb2ItPmxpc3QsICZzY2hlZC0+ZG9uZV9saXN0KTsKPiArCXNwaW5fdW5sb2Nr
KCZzY2hlZC0+am9iX2xpc3RfbG9jayk7Cj4gKwoKVGhhdCBpcyByYWN5LCBhcyBzb29uIGFzIHRo
ZSBzcGlubG9jayBpcyBkcm9wcGVkIHRoZSBqb2IgYW5kIHdpdGggaXQgdGhlIApzX2ZlbmNlIG1p
Z2h0IGhhdmVuIGJlZW4gZGVzdHJveWVkLgoKPiAgIAlkbWFfZmVuY2VfZ2V0KCZzX2ZlbmNlLT5m
aW5pc2hlZCk7Cj4gICAJZHJtX3NjaGVkX2ZlbmNlX2ZpbmlzaGVkKHNfZmVuY2UpOwo+ICAgCWRt
YV9mZW5jZV9wdXQoJnNfZmVuY2UtPmZpbmlzaGVkKTsKCkluIG90aGVyIHdvcmRzIHRoaXMgaGVy
ZSBuZWVkcyB0byBjb21lIGZpcnN0LgoKUmVnYXJkcywKQ2hyaXN0aWFuLgoKPiArCj4gICAJd2Fr
ZV91cF9pbnRlcnJ1cHRpYmxlKCZzY2hlZC0+d2FrZV91cF93b3JrZXIpOwo+ICAgfQo+ICAgCj4g
QEAgLTMwOSw2ICszMTYsMzcgQEAgc3RhdGljIHZvaWQgZHJtX3NjaGVkX2pvYl9iZWdpbihzdHJ1
Y3QgZHJtX3NjaGVkX2pvYiAqc19qb2IpCj4gICAJc3Bpbl91bmxvY2soJnNjaGVkLT5qb2JfbGlz
dF9sb2NrKTsKPiAgIH0KPiAgIAo+ICsvKiogZHJtX3NjaGVkX2pvYl90aW1lb3V0IC0tIGEgdGlt
ZXIgdGltZW91dCBvY2N1cnJlZAo+ICsgKiBAd29yazogcG9pbnRlciB0byB3b3JrX3N0cnVjdAo+
ICsgKgo+ICsgKiBGaXJzdCwgcGFyayB0aGUgc2NoZWR1bGVyIHRocmVhZCB3aG9zZSBJUCB0aW1l
ZCBvdXQsCj4gKyAqIHNvIHRoYXQgd2UgZG9uJ3QgcmFjZSB3aXRoIHRoZSBzY2hlZHVsZXIgdGhy
ZWFkIHB1c2hpbmcKPiArICogam9icyBkb3duIHRoZSBJUCBhcyB3ZSB0cnkgdG8gaW52ZXN0aWdh
dGUgd2hhdAo+ICsgKiBoYXBwZW5lZCBhbmQgZ2l2ZSBkcml2ZXJzIGEgY2hhbmNlIHRvIHJlY292
ZXIuCj4gKyAqCj4gKyAqIFNlY29uZCwgdGFrZSB0aGUgZmlzdCBqb2IgaW4gdGhlIHBlbmRpbmcg
bGlzdAo+ICsgKiAob2xkZXN0KSwgbGVhdmUgaXQgaW4gdGhlIHBlbmRpbmcgbGlzdCBhbmQgY2Fs
bCB0aGUKPiArICogZHJpdmVyJ3MgdGltZXIgdGltZW91dCBjYWxsYmFjayB0byBmaW5kIG91dCB3
aGF0Cj4gKyAqIGhhcHBlbmVkLCBwYXNzaW5nIHRoaXMgam9iIGFzIHRoZSBzdXNwZWN0IG9uZS4K
PiArICoKPiArICogVGhlIGRyaXZlciBtYXkgcmV0dXJuIERSTV9UQVNLX1NUQVRVUyBDT01QTEVU
RSwKPiArICogd2hpY2ggbWVhbnMgdGhlIHRhc2sgaXMgbm90IGluIHRoZSBJUCgqKSBhbmQgd2Ug
bW92ZQo+ICsgKiBpdCB0byB0aGUgZG9uZSBsaXN0IHRvIGZyZWUgaXQuCj4gKyAqCj4gKyAqICgq
KSBBIHJlYXNvbiBmb3IgdGhpcyB3b3VsZCBiZSwgc2F5LCB0aGF0IHRoZSBqb2IKPiArICogY29t
cGxldGVkIGluIGR1ZSB0aW1lLCBvciB0aGUgZHJpdmVyIGhhcyBhYm9ydGVkCj4gKyAqIHRoaXMg
am9iIHVzaW5nIGRyaXZlciBzcGVjaWZpYyBtZXRob2RzIGluIHRoZQo+ICsgKiB0aW1lZG91dF9q
b2IgY2FsbGJhY2sgYW5kIGhhcyBub3cgcmVtb3ZlZCBpdCBmcm9tCj4gKyAqIHRoZSBoYXJkd2Fy
ZS4KPiArICoKPiArICogT3IsIHRoZSBkcml2ZXIgbWF5IHJldHVybiBEUk1fVEFTS19TVEFUVVNf
QUxJVkUsIHRvCj4gKyAqIGluZGljYXRlIHRoYXQgaXQgaGFkIGlucXVpcmVkIGFib3V0IHRoaXMg
am9iLCBhbmQgaXQKPiArICogaGFzIHZlcmlmaWVkIHRoYXQgdGhpcyBqb2IgaXMgYWxpdmUgYW5k
IHdlbGwsIGFuZAo+ICsgKiB0aGF0IHRoZSBEUk0gbGF5ZXIgc2hvdWxkIGdpdmUgdGhpcyB0YXNr
IG1vcmUgdGltZQo+ICsgKiB0byBjb21wbGV0ZS4gSW4gdGhpcyBjYXNlLCB3ZSByZXN0YXJ0IHRo
ZSB0aW1lb3V0IHRpbWVyLgo+ICsgKgo+ICsgKiBMYXN0bHksIHdlIHVucGFyayB0aGUgc2NoZWR1
bGVyIHRocmVhZC4KPiArICovCj4gICBzdGF0aWMgdm9pZCBkcm1fc2NoZWRfam9iX3RpbWVkb3V0
KHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKPiAgIHsKPiAgIAlzdHJ1Y3QgZHJtX2dwdV9zY2hl
ZHVsZXIgKnNjaGVkOwo+IEBAIC0zMTYsMzcgKzM1NCwzMiBAQCBzdGF0aWMgdm9pZCBkcm1fc2No
ZWRfam9iX3RpbWVkb3V0KHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKPiAgIAo+ICAgCXNjaGVk
ID0gY29udGFpbmVyX29mKHdvcmssIHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciwgd29ya190ZHIu
d29yayk7Cj4gICAKPiAtCS8qIFByb3RlY3RzIGFnYWluc3QgY29uY3VycmVudCBkZWxldGlvbiBp
biBkcm1fc2NoZWRfZ2V0X2NsZWFudXBfam9iICovCj4gKwlrdGhyZWFkX3Bhcmsoc2NoZWQtPnRo
cmVhZCk7Cj4gKwo+ICAgCXNwaW5fbG9jaygmc2NoZWQtPmpvYl9saXN0X2xvY2spOwo+ICAgCWpv
YiA9IGxpc3RfZmlyc3RfZW50cnlfb3JfbnVsbCgmc2NoZWQtPnBlbmRpbmdfbGlzdCwKPiAgIAkJ
CQkgICAgICAgc3RydWN0IGRybV9zY2hlZF9qb2IsIGxpc3QpOwo+ICsJc3Bpbl91bmxvY2soJnNj
aGVkLT5qb2JfbGlzdF9sb2NrKTsKPiAgIAo+ICAgCWlmIChqb2IpIHsKPiAtCQkvKgo+IC0JCSAq
IFJlbW92ZSB0aGUgYmFkIGpvYiBzbyBpdCBjYW5ub3QgYmUgZnJlZWQgYnkgY29uY3VycmVudAo+
IC0JCSAqIGRybV9zY2hlZF9jbGVhbnVwX2pvYnMuIEl0IHdpbGwgYmUgcmVpbnNlcnRlZCBiYWNr
IGFmdGVyIHNjaGVkLT50aHJlYWQKPiAtCQkgKiBpcyBwYXJrZWQgYXQgd2hpY2ggcG9pbnQgaXQn
cyBzYWZlLgo+IC0JCSAqLwo+IC0JCWxpc3RfZGVsX2luaXQoJmpvYi0+bGlzdCk7Cj4gLQkJc3Bp
bl91bmxvY2soJnNjaGVkLT5qb2JfbGlzdF9sb2NrKTsKPiAtCj4gLQkJam9iLT5zY2hlZC0+b3Bz
LT50aW1lZG91dF9qb2Ioam9iKTsKPiArCQlpbnQgcmVzOwo+ICAgCj4gLQkJLyoKPiAtCQkgKiBH
dWlsdHkgam9iIGRpZCBjb21wbGV0ZSBhbmQgaGVuY2UgbmVlZHMgdG8gYmUgbWFudWFsbHkgcmVt
b3ZlZAo+IC0JCSAqIFNlZSBkcm1fc2NoZWRfc3RvcCBkb2MuCj4gLQkJICovCj4gLQkJaWYgKHNj
aGVkLT5mcmVlX2d1aWx0eSkgewo+IC0JCQlqb2ItPnNjaGVkLT5vcHMtPmZyZWVfam9iKGpvYik7
Cj4gLQkJCXNjaGVkLT5mcmVlX2d1aWx0eSA9IGZhbHNlOwo+ICsJCXJlcyA9IGpvYi0+c2NoZWQt
Pm9wcy0+dGltZWRvdXRfam9iKGpvYik7Cj4gKwkJaWYgKHJlcyA9PSBEUk1fVEFTS19TVEFUVVNf
Q09NUExFVEUpIHsKPiArCQkJLyogVGhlIGpvYiBpcyBvdXQgb2YgdGhlIGRldmljZS4KPiArCQkJ
ICovCj4gKwkJCXNwaW5fbG9jaygmc2NoZWQtPmpvYl9saXN0X2xvY2spOwo+ICsJCQlsaXN0X21v
dmUoJmpvYi0+bGlzdCwgJnNjaGVkLT5kb25lX2xpc3QpOwo+ICsJCQlzcGluX3VubG9jaygmc2No
ZWQtPmpvYl9saXN0X2xvY2spOwo+ICsJCQl3YWtlX3VwX2ludGVycnVwdGlibGUoJnNjaGVkLT53
YWtlX3VwX3dvcmtlcik7Cj4gKwkJfSBlbHNlIHsKPiArCQkJLyogVGhlIGpvYiBuZWVkcyBtb3Jl
IHRpbWUuCj4gKwkJCSAqLwo+ICsJCQlkcm1fc2NoZWRfc3RhcnRfdGltZW91dChzY2hlZCk7Cj4g
ICAJCX0KPiAtCX0gZWxzZSB7Cj4gLQkJc3Bpbl91bmxvY2soJnNjaGVkLT5qb2JfbGlzdF9sb2Nr
KTsKPiAgIAl9Cj4gICAKPiAtCXNwaW5fbG9jaygmc2NoZWQtPmpvYl9saXN0X2xvY2spOwo+IC0J
ZHJtX3NjaGVkX3N0YXJ0X3RpbWVvdXQoc2NoZWQpOwo+IC0Jc3Bpbl91bmxvY2soJnNjaGVkLT5q
b2JfbGlzdF9sb2NrKTsKPiArCWt0aHJlYWRfdW5wYXJrKHNjaGVkLT50aHJlYWQpOwo+ICAgfQo+
ICAgCj4gICAgLyoqCj4gQEAgLTQxMywyNCArNDQ2LDEzIEBAIHZvaWQgZHJtX3NjaGVkX3N0b3Ao
c3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCwgc3RydWN0IGRybV9zY2hlZF9qb2IgKmJh
ZCkKPiAgIAlrdGhyZWFkX3Bhcmsoc2NoZWQtPnRocmVhZCk7Cj4gICAKPiAgIAkvKgo+IC0JICog
UmVpbnNlcnQgYmFjayB0aGUgYmFkIGpvYiBoZXJlIC0gbm93IGl0J3Mgc2FmZSBhcwo+IC0JICog
ZHJtX3NjaGVkX2dldF9jbGVhbnVwX2pvYiBjYW5ub3QgcmFjZSBhZ2FpbnN0IHVzIGFuZCByZWxl
YXNlIHRoZQo+IC0JICogYmFkIGpvYiBhdCB0aGlzIHBvaW50IC0gd2UgcGFya2VkICh3YWl0ZWQg
Zm9yKSBhbnkgaW4gcHJvZ3Jlc3MKPiAtCSAqIChlYXJsaWVyKSBjbGVhbnVwcyBhbmQgZHJtX3Nj
aGVkX2dldF9jbGVhbnVwX2pvYiB3aWxsIG5vdCBiZSBjYWxsZWQKPiAtCSAqIG5vdyB1bnRpbCB0
aGUgc2NoZWR1bGVyIHRocmVhZCBpcyB1bnBhcmtlZC4KPiAtCSAqLwo+IC0JaWYgKGJhZCAmJiBi
YWQtPnNjaGVkID09IHNjaGVkKQo+IC0JCS8qCj4gLQkJICogQWRkIGF0IHRoZSBoZWFkIG9mIHRo
ZSBxdWV1ZSB0byByZWZsZWN0IGl0IHdhcyB0aGUgZWFybGllc3QKPiAtCQkgKiBqb2IgZXh0cmFj
dGVkLgo+IC0JCSAqLwo+IC0JCWxpc3RfYWRkKCZiYWQtPmxpc3QsICZzY2hlZC0+cGVuZGluZ19s
aXN0KTsKPiAtCj4gLQkvKgo+IC0JICogSXRlcmF0ZSB0aGUgam9iIGxpc3QgZnJvbSBsYXRlciB0
byAgZWFybGllciBvbmUgYW5kIGVpdGhlciBkZWFjdGl2ZQo+IC0JICogdGhlaXIgSFcgY2FsbGJh
Y2tzIG9yIHJlbW92ZSB0aGVtIGZyb20gcGVuZGluZyBsaXN0IGlmIHRoZXkgYWxyZWFkeQo+IC0J
ICogc2lnbmFsZWQuCj4gLQkgKiBUaGlzIGl0ZXJhdGlvbiBpcyB0aHJlYWQgc2FmZSBhcyBzY2hl
ZCB0aHJlYWQgaXMgc3RvcHBlZC4KPiArCSAqIEl0ZXJhdGUgdGhlIHBlbmRpbmcgbGlzdCBpbiBy
ZXZlcnNlIG9yZGVyLAo+ICsJICogZnJvbSBtb3N0IHJlY2VudGx5IHN1Ym1pdHRlZCB0byBvbGRl
c3QKPiArCSAqIHRhc2tzLiBUYXNrcyB3aGljaCBoYXZlbid0IGNvbXBsZXRlZCwgbGVhdmUKPiAr
CSAqIHRoZW0gaW4gdGhlIHBlbmRpbmcgbGlzdCwgYnV0IGRlY3JlbWVudAo+ICsJICogdGhlaXIg
aGFyZHdhcmUgcnVuIHF1ZXVlIGNvdW50Lgo+ICsJICogRWxzZSwgdGhlIGZlbmNlIG11c3QndmUg
c2lnbmFsbGVkLCBhbmQgdGhlIGpvYgo+ICsJICogaXMgaW4gdGhlIGRvbmUgbGlzdC4KPiAgIAkg
Ki8KPiAgIAlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmVfcmV2ZXJzZShzX2pvYiwgdG1wLCAmc2No
ZWQtPnBlbmRpbmdfbGlzdCwKPiAgIAkJCQkJIGxpc3QpIHsKPiBAQCAtNDM5LDM2ICs0NjEsNTIg
QEAgdm9pZCBkcm1fc2NoZWRfc3RvcChzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKnNjaGVkLCBz
dHJ1Y3QgZHJtX3NjaGVkX2pvYiAqYmFkKQo+ICAgCQkJCQkgICAgICAmc19qb2ItPmNiKSkgewo+
ICAgCQkJYXRvbWljX2RlYygmc2NoZWQtPmh3X3JxX2NvdW50KTsKPiAgIAkJfSBlbHNlIHsKPiAt
CQkJLyoKPiAtCQkJICogcmVtb3ZlIGpvYiBmcm9tIHBlbmRpbmdfbGlzdC4KPiAtCQkJICogTG9j
a2luZyBoZXJlIGlzIGZvciBjb25jdXJyZW50IHJlc3VtZSB0aW1lb3V0Cj4gLQkJCSAqLwo+IC0J
CQlzcGluX2xvY2soJnNjaGVkLT5qb2JfbGlzdF9sb2NrKTsKPiAtCQkJbGlzdF9kZWxfaW5pdCgm
c19qb2ItPmxpc3QpOwo+IC0JCQlzcGluX3VubG9jaygmc2NoZWQtPmpvYl9saXN0X2xvY2spOwo+
IC0KPiAtCQkJLyoKPiAtCQkJICogV2FpdCBmb3Igam9iJ3MgSFcgZmVuY2UgY2FsbGJhY2sgdG8g
ZmluaXNoIHVzaW5nIHNfam9iCj4gLQkJCSAqIGJlZm9yZSByZWxlYXNpbmcgaXQuCj4gLQkJCSAq
Cj4gLQkJCSAqIEpvYiBpcyBzdGlsbCBhbGl2ZSBzbyBmZW5jZSByZWZjb3VudCBhdCBsZWFzdCAx
Cj4gLQkJCSAqLwo+IC0JCQlkbWFfZmVuY2Vfd2FpdCgmc19qb2ItPnNfZmVuY2UtPmZpbmlzaGVk
LCBmYWxzZSk7Cj4gLQo+IC0JCQkvKgo+IC0JCQkgKiBXZSBtdXN0IGtlZXAgYmFkIGpvYiBhbGl2
ZSBmb3IgbGF0ZXIgdXNlIGR1cmluZwo+IC0JCQkgKiByZWNvdmVyeSBieSBzb21lIG9mIHRoZSBk
cml2ZXJzIGJ1dCBsZWF2ZSBhIGhpbnQKPiAtCQkJICogdGhhdCB0aGUgZ3VpbHR5IGpvYiBtdXN0
IGJlIHJlbGVhc2VkLgo+IC0JCQkgKi8KPiAtCQkJaWYgKGJhZCAhPSBzX2pvYikKPiAtCQkJCXNj
aGVkLT5vcHMtPmZyZWVfam9iKHNfam9iKTsKPiAtCQkJZWxzZQo+IC0JCQkJc2NoZWQtPmZyZWVf
Z3VpbHR5ID0gdHJ1ZTsKPiArCQkJaWYgKGJhZCA9PSBzX2pvYikgewo+ICsJCQkJLyogVGhpcyBp
cyB0aGUgb2xkZXN0IGpvYiBvbiB0aGUgcGVuZGluZyBsaXN0Cj4gKwkJCQkgKiB3aG9zZSBJUCB0
aW1lZCBvdXQuIFRoZQo+ICsJCQkJICogZHJtX3NjaGVkX2pvYl90aW1lb3V0KCkgZnVuY3Rpb24g
Y2FsbHMgdGhlCj4gKwkJCQkgKiBkcml2ZXIncyB0aW1lZG91dF9qb2IgY2FsbGJhY2sgcGFzc2lu
ZyBAYmFkLAo+ICsJCQkJICogd2hvIHRoZW4gY2FsbHMgdGhpcyBmdW5jdGlvbiBoZXJlLS1hcyBz
dWNoCj4gKwkJCQkgKiB3ZSBzaG91bGRuJ3QgbW92ZSBAYmFkIG9yIGZyZWUgaXQuIFRoaXMgd2ls
bAo+ICsJCQkJICogYmUgZGVjaWRlZCBieSBkcm1fc2NoZWRfam9iX3RpbWVvdXQoKSB3aGVuCj4g
KwkJCQkgKiB0aGlzIGZ1bmN0aW9uIGhlcmUgcmV0dXJucyBiYWNrIHRvIHRoZSBjYWxsZXIKPiAr
CQkJCSAqICh0aGUgZHJpdmVyKSBhbmQgdGhlIGRyaXZlcidzIHRpbWVkb3V0X2pvYgo+ICsJCQkJ
ICogY2FsbGJhY2sgcmV0dXJucyBhIHJlc3VsdCB0bwo+ICsJCQkJICogZHJtX3NjaGVkX2pvYl90
aW1lb3V0KCkuCj4gKwkJCQkgKi8KPiArCQkJCTsKPiArCQkJfSBlbHNlIHsKPiArCQkJCWludCBy
ZXM7Cj4gKwo+ICsJCQkJLyogVGhpcyBqb2IgaXMgbm90IHRoZSBAYmFkIGpvYiBwYXNzZWQgYWJv
dmUuCj4gKwkJCQkgKiBOb3RlIHRoYXQgcGVyaGFwcyBpdCB3YXMgKnRoaXMqIGpvYiB3aGljaAo+
ICsJCQkJICogdGltZWQgb3V0LiBUaGUgd2FpdCBiZWxvdyBpcyBzdXNwZWN0LiBTaW5jZSwKPiAr
CQkJCSAqIGl0IHdhaXRzIHdpdGggbWF4aW11bSB0aW1lb3V0IGFuZCAiaW50ciIgc2V0Cj4gKwkJ
CQkgKiB0byBmYWxzZSwgaXQgd2lsbCBlaXRoZXIgcmV0dXJuIDAgaW5kaWNhdGluZwo+ICsJCQkJ
ICogdGhhdCB0aGUgZmVuY2UgaGFzIHNpZ25hbGxlZCwgb3IgbmVnYXRpdmUgb24KPiArCQkJCSAq
IGVycm9yLiBXaGF0IGlmLCB0aGUgd2hvbGUgSVAgaXMgc3R1Y2sgYW5kCj4gKwkJCQkgKiB0aGlz
IGVuZHMgdXAgd2FpdGluZyBmb3JldmVyPwo+ICsJCQkJICoKPiArCQkJCSAqIFdhaXQgZm9yIGpv
YidzIEhXIGZlbmNlIGNhbGxiYWNrIHRvIGZpbmlzaAo+ICsJCQkJICogdXNpbmcgc19qb2IgYmVm
b3JlIHJlbGVhc2luZyBpdC4KPiArCQkJCSAqCj4gKwkJCQkgKiBKb2IgaXMgc3RpbGwgYWxpdmUg
c28gZmVuY2UKPiArCQkJCSAqIHJlZmNvdW50IGF0IGxlYXN0IDEKPiArCQkJCSAqLwo+ICsJCQkJ
cmVzID0gZG1hX2ZlbmNlX3dhaXQoJnNfam9iLT5zX2ZlbmNlLT5maW5pc2hlZCwKPiArCQkJCQkJ
ICAgICBmYWxzZSk7Cj4gKwo+ICsJCQkJaWYgKHJlcyA9PSAwKQo+ICsJCQkJCXNjaGVkLT5vcHMt
PmZyZWVfam9iKHNfam9iKTsKPiArCQkJCWVsc2UKPiArCQkJCQlwcl9lcnJfb25jZSgiJXM6IGRt
YV9mZW5jZV93YWl0OiAlZFxuIiwKPiArCQkJCQkJICAgIHNjaGVkLT5uYW1lLCByZXMpOwo+ICsJ
CQl9Cj4gICAJCX0KPiAgIAl9Cj4gICAKPiAgIAkvKgo+IC0JICogU3RvcCBwZW5kaW5nIHRpbWVy
IGluIGZsaWdodCBhcyB3ZSByZWFybSBpdCBpbiAgZHJtX3NjaGVkX3N0YXJ0LiBUaGlzCj4gKwkg
KiBTdG9wIHBlbmRpbmcgdGltZXIgaW4gZmxpZ2h0IGFzIHdlIHJlYXJtIGl0IGluIGRybV9zY2hl
ZF9zdGFydC4gVGhpcwo+ICAgCSAqIGF2b2lkcyB0aGUgcGVuZGluZyB0aW1lb3V0IHdvcmsgaW4g
cHJvZ3Jlc3MgdG8gZmlyZSByaWdodCBhd2F5IGFmdGVyCj4gICAJICogdGhpcyBURFIgZmluaXNo
ZWQgYW5kIGJlZm9yZSB0aGUgbmV3bHkgcmVzdGFydGVkIGpvYnMgaGFkIGEKPiAgIAkgKiBjaGFu
Y2UgdG8gY29tcGxldGUuCj4gQEAgLTUxMSw4ICs1NDksOSBAQCB2b2lkIGRybV9zY2hlZF9zdGFy
dChzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKnNjaGVkLCBib29sIGZ1bGxfcmVjb3ZlcnkpCj4g
ICAJCQllbHNlIGlmIChyKQo+ICAgCQkJCURSTV9FUlJPUigiZmVuY2UgYWRkIGNhbGxiYWNrIGZh
aWxlZCAoJWQpXG4iLAo+ICAgCQkJCQkgIHIpOwo+IC0JCX0gZWxzZQo+ICsJCX0gZWxzZSB7Cj4g
ICAJCQlkcm1fc2NoZWRfam9iX2RvbmUoc19qb2IpOwo+ICsJCX0KPiAgIAl9Cj4gICAKPiAgIAlp
ZiAoZnVsbF9yZWNvdmVyeSkgewo+IEBAIC02NjUsNDcgKzcwNCw2IEBAIGRybV9zY2hlZF9zZWxl
Y3RfZW50aXR5KHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQpCj4gICAJcmV0dXJuIGVu
dGl0eTsKPiAgIH0KPiAgIAo+IC0vKioKPiAtICogZHJtX3NjaGVkX2dldF9jbGVhbnVwX2pvYiAt
IGZldGNoIHRoZSBuZXh0IGZpbmlzaGVkIGpvYiB0byBiZSBkZXN0cm95ZWQKPiAtICoKPiAtICog
QHNjaGVkOiBzY2hlZHVsZXIgaW5zdGFuY2UKPiAtICoKPiAtICogUmV0dXJucyB0aGUgbmV4dCBm
aW5pc2hlZCBqb2IgZnJvbSB0aGUgcGVuZGluZyBsaXN0IChpZiB0aGVyZSBpcyBvbmUpCj4gLSAq
IHJlYWR5IGZvciBpdCB0byBiZSBkZXN0cm95ZWQuCj4gLSAqLwo+IC1zdGF0aWMgc3RydWN0IGRy
bV9zY2hlZF9qb2IgKgo+IC1kcm1fc2NoZWRfZ2V0X2NsZWFudXBfam9iKHN0cnVjdCBkcm1fZ3B1
X3NjaGVkdWxlciAqc2NoZWQpCj4gLXsKPiAtCXN0cnVjdCBkcm1fc2NoZWRfam9iICpqb2I7Cj4g
LQo+IC0JLyoKPiAtCSAqIERvbid0IGRlc3Ryb3kgam9icyB3aGlsZSB0aGUgdGltZW91dCB3b3Jr
ZXIgaXMgcnVubmluZyAgT1IgdGhyZWFkCj4gLQkgKiBpcyBiZWluZyBwYXJrZWQgYW5kIGhlbmNl
IGFzc3VtZWQgdG8gbm90IHRvdWNoIHBlbmRpbmdfbGlzdAo+IC0JICovCj4gLQlpZiAoKHNjaGVk
LT50aW1lb3V0ICE9IE1BWF9TQ0hFRFVMRV9USU1FT1VUICYmCj4gLQkgICAgIWNhbmNlbF9kZWxh
eWVkX3dvcmsoJnNjaGVkLT53b3JrX3RkcikpIHx8Cj4gLQkgICAga3RocmVhZF9zaG91bGRfcGFy
aygpKQo+IC0JCXJldHVybiBOVUxMOwo+IC0KPiAtCXNwaW5fbG9jaygmc2NoZWQtPmpvYl9saXN0
X2xvY2spOwo+IC0KPiAtCWpvYiA9IGxpc3RfZmlyc3RfZW50cnlfb3JfbnVsbCgmc2NoZWQtPnBl
bmRpbmdfbGlzdCwKPiAtCQkJCSAgICAgICBzdHJ1Y3QgZHJtX3NjaGVkX2pvYiwgbGlzdCk7Cj4g
LQo+IC0JaWYgKGpvYiAmJiBkbWFfZmVuY2VfaXNfc2lnbmFsZWQoJmpvYi0+c19mZW5jZS0+Zmlu
aXNoZWQpKSB7Cj4gLQkJLyogcmVtb3ZlIGpvYiBmcm9tIHBlbmRpbmdfbGlzdCAqLwo+IC0JCWxp
c3RfZGVsX2luaXQoJmpvYi0+bGlzdCk7Cj4gLQl9IGVsc2Ugewo+IC0JCWpvYiA9IE5VTEw7Cj4g
LQkJLyogcXVldWUgdGltZW91dCBmb3IgbmV4dCBqb2IgKi8KPiAtCQlkcm1fc2NoZWRfc3RhcnRf
dGltZW91dChzY2hlZCk7Cj4gLQl9Cj4gLQo+IC0Jc3Bpbl91bmxvY2soJnNjaGVkLT5qb2JfbGlz
dF9sb2NrKTsKPiAtCj4gLQlyZXR1cm4gam9iOwo+IC19Cj4gLQo+ICAgLyoqCj4gICAgKiBkcm1f
c2NoZWRfcGlja19iZXN0IC0gR2V0IGEgZHJtIHNjaGVkIGZyb20gYSBzY2hlZF9saXN0IHdpdGgg
dGhlIGxlYXN0IGxvYWQKPiAgICAqIEBzY2hlZF9saXN0OiBsaXN0IG9mIGRybV9ncHVfc2NoZWR1
bGVycwo+IEBAIC03NTksNiArNzU3LDI1IEBAIHN0YXRpYyBib29sIGRybV9zY2hlZF9ibG9ja2Vk
KHN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQpCj4gICAJcmV0dXJuIGZhbHNlOwo+ICAg
fQo+ICAgCj4gK3N0YXRpYyB2b2lkIGRybV9zY2hlZF9mcmVlX2RvbmUoc3RydWN0IGRybV9ncHVf
c2NoZWR1bGVyICpzY2hlZCkKPiArewo+ICsJTElTVF9IRUFEKGRvbmVfcSk7Cj4gKwo+ICsJc3Bp
bl9sb2NrKCZzY2hlZC0+am9iX2xpc3RfbG9jayk7Cj4gKwlsaXN0X3NwbGljZV9pbml0KCZzY2hl
ZC0+ZG9uZV9saXN0LCAmZG9uZV9xKTsKPiArCXNwaW5fdW5sb2NrKCZzY2hlZC0+am9iX2xpc3Rf
bG9jayk7Cj4gKwo+ICsJd2hpbGUgKCFsaXN0X2VtcHR5KCZkb25lX3EpKSB7Cj4gKwkJc3RydWN0
IGRybV9zY2hlZF9qb2IgKmpvYjsKPiArCj4gKwkJam9iID0gbGlzdF9maXJzdF9lbnRyeSgmZG9u
ZV9xLAo+ICsJCQkJICAgICAgIHN0cnVjdCBkcm1fc2NoZWRfam9iLAo+ICsJCQkJICAgICAgIGxp
c3QpOwo+ICsJCWxpc3RfZGVsX2luaXQoJmpvYi0+bGlzdCk7Cj4gKwkJc2NoZWQtPm9wcy0+ZnJl
ZV9qb2Ioam9iKTsKPiArCX0KPiArfQo+ICsKPiAgIC8qKgo+ICAgICogZHJtX3NjaGVkX21haW4g
LSBtYWluIHNjaGVkdWxlciB0aHJlYWQKPiAgICAqCj4gQEAgLTc2OCw3ICs3ODUsNyBAQCBzdGF0
aWMgYm9vbCBkcm1fc2NoZWRfYmxvY2tlZChzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKnNjaGVk
KQo+ICAgICovCj4gICBzdGF0aWMgaW50IGRybV9zY2hlZF9tYWluKHZvaWQgKnBhcmFtKQo+ICAg
ewo+IC0Jc3RydWN0IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCA9IChzdHJ1Y3QgZHJtX2dwdV9z
Y2hlZHVsZXIgKilwYXJhbTsKPiArCXN0cnVjdCBkcm1fZ3B1X3NjaGVkdWxlciAqc2NoZWQgPSBw
YXJhbTsKPiAgIAlpbnQgcjsKPiAgIAo+ICAgCXNjaGVkX3NldF9maWZvX2xvdyhjdXJyZW50KTsK
PiBAQCAtNzc4LDE5ICs3OTUsMTQgQEAgc3RhdGljIGludCBkcm1fc2NoZWRfbWFpbih2b2lkICpw
YXJhbSkKPiAgIAkJc3RydWN0IGRybV9zY2hlZF9mZW5jZSAqc19mZW5jZTsKPiAgIAkJc3RydWN0
IGRybV9zY2hlZF9qb2IgKnNjaGVkX2pvYjsKPiAgIAkJc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7
Cj4gLQkJc3RydWN0IGRybV9zY2hlZF9qb2IgKmNsZWFudXBfam9iID0gTlVMTDsKPiAgIAo+ICAg
CQl3YWl0X2V2ZW50X2ludGVycnVwdGlibGUoc2NoZWQtPndha2VfdXBfd29ya2VyLAo+IC0JCQkJ
CSAoY2xlYW51cF9qb2IgPSBkcm1fc2NoZWRfZ2V0X2NsZWFudXBfam9iKHNjaGVkKSkgfHwKPiAr
CQkJCQkgKCFsaXN0X2VtcHR5KCZzY2hlZC0+ZG9uZV9saXN0KSkgfHwKPiAgIAkJCQkJICghZHJt
X3NjaGVkX2Jsb2NrZWQoc2NoZWQpICYmCj4gICAJCQkJCSAgKGVudGl0eSA9IGRybV9zY2hlZF9z
ZWxlY3RfZW50aXR5KHNjaGVkKSkpIHx8Cj4gICAJCQkJCSBrdGhyZWFkX3Nob3VsZF9zdG9wKCkp
Owo+ICAgCj4gLQkJaWYgKGNsZWFudXBfam9iKSB7Cj4gLQkJCXNjaGVkLT5vcHMtPmZyZWVfam9i
KGNsZWFudXBfam9iKTsKPiAtCQkJLyogcXVldWUgdGltZW91dCBmb3IgbmV4dCBqb2IgKi8KPiAt
CQkJZHJtX3NjaGVkX3N0YXJ0X3RpbWVvdXQoc2NoZWQpOwo+IC0JCX0KPiArCQlkcm1fc2NoZWRf
ZnJlZV9kb25lKHNjaGVkKTsKPiAgIAo+ICAgCQlpZiAoIWVudGl0eSkKPiAgIAkJCWNvbnRpbnVl
Owo+IEBAIC04NjQsNiArODc2LDcgQEAgaW50IGRybV9zY2hlZF9pbml0KHN0cnVjdCBkcm1fZ3B1
X3NjaGVkdWxlciAqc2NoZWQsCj4gICAJaW5pdF93YWl0cXVldWVfaGVhZCgmc2NoZWQtPndha2Vf
dXBfd29ya2VyKTsKPiAgIAlpbml0X3dhaXRxdWV1ZV9oZWFkKCZzY2hlZC0+am9iX3NjaGVkdWxl
ZCk7Cj4gICAJSU5JVF9MSVNUX0hFQUQoJnNjaGVkLT5wZW5kaW5nX2xpc3QpOwo+ICsJSU5JVF9M
SVNUX0hFQUQoJnNjaGVkLT5kb25lX2xpc3QpOwo+ICAgCXNwaW5fbG9ja19pbml0KCZzY2hlZC0+
am9iX2xpc3RfbG9jayk7Cj4gICAJYXRvbWljX3NldCgmc2NoZWQtPmh3X3JxX2NvdW50LCAwKTsK
PiAgIAlJTklUX0RFTEFZRURfV09SSygmc2NoZWQtPndvcmtfdGRyLCBkcm1fc2NoZWRfam9iX3Rp
bWVkb3V0KTsKPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oIGIvaW5j
bHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oCj4gaW5kZXggY2VkZmM1Mzk0ZTUyLi4xMTI3ODY5NWZl
ZDAgMTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oCj4gKysrIGIvaW5j
bHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oCj4gQEAgLTI4OSw2ICsyODksNyBAQCBzdHJ1Y3QgZHJt
X2dwdV9zY2hlZHVsZXIgewo+ICAgCXVpbnQzMl90CQkJaHdfc3VibWlzc2lvbl9saW1pdDsKPiAg
IAlsb25nCQkJCXRpbWVvdXQ7Cj4gICAJY29uc3QgY2hhcgkJCSpuYW1lOwo+ICsKPiAgIAlzdHJ1
Y3QgZHJtX3NjaGVkX3JxCQlzY2hlZF9ycVtEUk1fU0NIRURfUFJJT1JJVFlfQ09VTlRdOwo+ICAg
CXdhaXRfcXVldWVfaGVhZF90CQl3YWtlX3VwX3dvcmtlcjsKPiAgIAl3YWl0X3F1ZXVlX2hlYWRf
dAkJam9iX3NjaGVkdWxlZDsKPiBAQCAtMjk2LDggKzI5NywxMSBAQCBzdHJ1Y3QgZHJtX2dwdV9z
Y2hlZHVsZXIgewo+ICAgCWF0b21pYzY0X3QJCQlqb2JfaWRfY291bnQ7Cj4gICAJc3RydWN0IGRl
bGF5ZWRfd29yawkJd29ya190ZHI7Cj4gICAJc3RydWN0IHRhc2tfc3RydWN0CQkqdGhyZWFkOwo+
ICsKPiAgIAlzdHJ1Y3QgbGlzdF9oZWFkCQlwZW5kaW5nX2xpc3Q7Cj4gKwlzdHJ1Y3QgbGlzdF9o
ZWFkICAgICAgICAgICAgICAgIGRvbmVfbGlzdDsKPiAgIAlzcGlubG9ja190CQkJam9iX2xpc3Rf
bG9jazsKPiArCj4gICAJaW50CQkJCWhhbmdfbGltaXQ7Cj4gICAJYXRvbWljX3QgICAgICAgICAg
ICAgICAgICAgICAgICBzY29yZTsKPiAgIAlib29sCQkJCXJlYWR5OwoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApk
cmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
