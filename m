Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C6A28DAD6E
	for <lists+dri-devel@lfdr.de>; Thu, 17 Oct 2019 14:53:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6F2C96EA6D;
	Thu, 17 Oct 2019 12:53:16 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd41.google.com (mail-io1-xd41.google.com
 [IPv6:2607:f8b0:4864:20::d41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 649AB6E4AE
 for <dri-devel@lists.freedesktop.org>; Thu, 17 Oct 2019 12:53:15 +0000 (UTC)
Received: by mail-io1-xd41.google.com with SMTP id n26so2802750ioj.8
 for <dri-devel@lists.freedesktop.org>; Thu, 17 Oct 2019 05:53:15 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=iD0TSDo0VJnLTbxUIdw+lbShlZzAkEVAgX8nV9jMFNk=;
 b=NOH+/r0rT+WfIuW0CdEKwHLDLBo2ejWVO/VJY4qMqGnV4YfhlGUzhk8VnA3XRaHZkp
 cxwniVh3IiSlTdnZ9PbRd1pRjJ+/aO2d6ycqE7nQ1uCj1vDR3lyk/+9q8f/aLpRroKnx
 MB+P9hMkDPIZ4A0oFv5Gsm+2xVvyoeYl35sfaO/+ko/ao03zeFCjNnnHtloie3wTSS0Q
 w/MrODAyQs9V5sq4s17/qHyjSCCtIAeeI8sC5zj1jSnf0kwzV8vUefWsRyIHjRdpV1Q9
 qc7GgtBqa72bDgrtCiPJeMUspQBsDTtPnoai8ZL7M3/GEFOGQKOGlzy5IxzejRi8F1D3
 TEHQ==
X-Gm-Message-State: APjAAAWEOaptBiHZlnSTn3UsmC8XYgSCezAsic4z2ECTuhX86x5ZiRWf
 PsioUGrdL8G/meadu/J/pKeWjQBui/zLipFXvR4=
X-Google-Smtp-Source: APXvYqyQQSnBGHr42YDTYT5E4fdrGnYai4qHMDD2FaHfCah1M4pZMR64OCOEHxcKxa+aYMfsY+fkqncuLWGLpLGRC6o=
X-Received: by 2002:a6b:ab03:: with SMTP id u3mr2646271ioe.158.1571316794346; 
 Thu, 17 Oct 2019 05:53:14 -0700 (PDT)
MIME-Version: 1.0
References: <20191017081059.31761-1-u.kleine-koenig@pengutronix.de>
In-Reply-To: <20191017081059.31761-1-u.kleine-koenig@pengutronix.de>
From: Adam Ford <aford173@gmail.com>
Date: Thu, 17 Oct 2019 07:53:02 -0500
Message-ID: <CAHCN7x+myMedaPjsH-bV1_Maq58AuS_8y4dZG0M7hyLdAhzZWQ@mail.gmail.com>
Subject: Re: [PATCH] backlight: pwm_bl: configure pwm only once per backlight
 toggle
To: =?UTF-8?Q?Uwe_Kleine=2DK=C3=B6nig?= <u.kleine-koenig@pengutronix.de>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=iD0TSDo0VJnLTbxUIdw+lbShlZzAkEVAgX8nV9jMFNk=;
 b=LLDNj+GfbYVBaJGnVyfvbFGbiPCqxDDTw3O+VWIN2Oqmd5dySBSl83J5lH6g8i5DKO
 f9f5OburrzL/pxtYENydeYOkkdRFHoxaf+r9xTWn2PssmJOKwSuLbXAkAzlAmc8XTcPo
 92e6cYfh2EJ28SN5557X6IKhGIn5XAD/1+rZaM/M7L0rz3R2zv3M9w1QGFnyuuVcUBiy
 n+JC3lhYnd6UsdIJrwrGkpGTPYXCcZMw8fZmiQyIXRxOGII0rnNT0FpQmNewHgOKwJoO
 vHyIssby+9pNdrYg2LE4wbs38VA66JKm3tJW2l1pS/8/qWptD5rpO/qDOgpeAaOqOjPB
 qC4Q==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-pwm@vger.kernel.org, Daniel Thompson <daniel.thompson@linaro.org>,
 Jingoo Han <jingoohan1@gmail.com>, linux-fbdev@vger.kernel.org,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Thierry Reding <thierry.reding@gmail.com>,
 Sascha Hauer <kernel@pengutronix.de>,
 Enric Balletbo i Serra <enric.balletbo@collabora.com>,
 Lee Jones <lee.jones@linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBPY3QgMTcsIDIwMTkgYXQgMzoxMSBBTSBVd2UgS2xlaW5lLUvDtm5pZwo8dS5rbGVp
bmUta29lbmlnQHBlbmd1dHJvbml4LmRlPiB3cm90ZToKPgo+IEEgcHJldmlvdXMgY2hhbmdlIGlu
IHRoZSBwd20gY29yZSAobmFtZWx5IDAxY2NmOTAzZWRkNiAoInB3bTogTGV0Cj4gcHdtX2dldF9z
dGF0ZSgpIHJldHVybiB0aGUgbGFzdCBpbXBsZW1lbnRlZCBzdGF0ZSIpKSBjaGFuZ2VkIHRoZQo+
IHNlbWFudGljIG9mIHB3bV9nZXRfc3RhdGUoKSBhbmQgZGlzY2xvc2VkIGFuIChhcyBpdCBzZWVt
cykgY29tbW9uCj4gcHJvYmxlbSBpbiBsb3dsZXZlbCBQV00gZHJpdmVycy4gQnkgbm90IHJlbHlp
bmcgb24gdGhlIHBlcmlvZCBhbmQgZHV0eQo+IGN5Y2xlIGJlaW5nIHJldHJpZXZhYmxlIGZyb20g
YSBkaXNhYmxlZCBQV00gdGhpcyB0eXBlIG9mIHByb2JsZW0gaXMKPiB3b3JrZWQgYXJvdW5kLgo+
Cj4gQXBhcnQgZnJvbSB0aGlzIGlzc3VlIG9ubHkgY2FsbGluZyB0aGUgcHdtX2dldF9zdGF0ZS9w
d21fYXBwbHlfc3RhdGUKPiBjb21ibyBvbmNlIGlzIGFsc28gbW9yZSBlZmZlY3RpdmUuCj4KPiBT
aWduZWQtb2ZmLWJ5OiBVd2UgS2xlaW5lLUvDtm5pZyA8dS5rbGVpbmUta29lbmlnQHBlbmd1dHJv
bml4LmRlPgo+IC0tLQo+IEhlbGxvLAo+Cj4gVGhlcmUgYXJlIG5vdyB0d28gcmVwb3J0cyBhYm91
dCAwMWNjZjkwM2VkZDYgYnJlYWtpbmcgYSBiYWNrbGlnaHQuIEFzCj4gZmFyIGFzIEkgdW5kZXJz
dGFuZCB0aGUgcHJvYmxlbSB0aGlzIGlzIGEgY29tYmluYXRpb24gb2YgdGhlIGJhY2tlbmQgcHdt
Cj4gZHJpdmVyIHlpZWxkaW5nIHN1cnByaXNpbmcgcmVzdWx0cyBhbmQgdGhlIHB3bS1ibCBkcml2
ZXIgZG9pbmcgdGhpbmdzCj4gbW9yZSBjb21wbGljYXRlZCB0aGFuIG5lY2Vzc2FyeS4KPgo+IFNv
IEkgZ3Vlc3MgdGhpcyBwYXRjaCB3b3JrcyBhcm91bmQgdGhlc2UgcHJvYmxlbXMuIFN0aWxsIGl0
IHdvdWxkIGJlCj4gaW50ZXJlc3RpbmcgdG8gZmluZCBvdXQgdGhlIGRldGFpbHMgaW4gdGhlIGlt
eCBkcml2ZXIgdGhhdCB0cmlnZ2VycyB0aGUKPiBwcm9ibGVtLiBTbyBBZGFtLCBjYW4geW91IHBs
ZWFzZSBpbnN0cnVtZW50IHRoZSBwd20taW14MjcgZHJpdmVyIHRvCj4gcHJpbnQgKnN0YXRlIGF0
IHRoZSBiZWdpbm5pbmcgb2YgcHdtX2lteDI3X2FwcGx5KCkgYW5kIHRoZSBlbmQgb2YKPiBwd21f
aW14MjdfZ2V0X3N0YXRlKCkgYW5kIHByb3ZpZGUgdGhlIHJlc3VsdHM/Cj4KPiBOb3RlIEkgb25s
eSBjb21waWxlIHRlc3RlZCB0aGlzIGNoYW5nZS4KPgo+IEJlc3QgcmVnYXJkcwo+IFV3ZQo+Cj4g
IGRyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L3B3bV9ibC5jIHwgMzQgKysrKysrKysrKystLS0tLS0t
LS0tLS0tLS0tLS0tLS0KPiAgMSBmaWxlIGNoYW5nZWQsIDEyIGluc2VydGlvbnMoKyksIDIyIGRl
bGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L3B3bV9i
bC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvcHdtX2JsLmMKPiBpbmRleCA3NDZlZWJjNDEx
ZGYuLmRkZWJkNjJiMzk3OCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9w
d21fYmwuYwo+ICsrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L3B3bV9ibC5jCj4gQEAgLTQy
LDEwICs0Miw4IEBAIHN0cnVjdCBwd21fYmxfZGF0YSB7Cj4KPiAgc3RhdGljIHZvaWQgcHdtX2Jh
Y2tsaWdodF9wb3dlcl9vbihzdHJ1Y3QgcHdtX2JsX2RhdGEgKnBiKQo+ICB7Cj4gLSAgICAgICBz
dHJ1Y3QgcHdtX3N0YXRlIHN0YXRlOwo+ICAgICAgICAgaW50IGVycjsKPgo+IC0gICAgICAgcHdt
X2dldF9zdGF0ZShwYi0+cHdtLCAmc3RhdGUpOwo+ICAgICAgICAgaWYgKHBiLT5lbmFibGVkKQo+
ICAgICAgICAgICAgICAgICByZXR1cm47Cj4KPiBAQCAtNTMsOSArNTEsNiBAQCBzdGF0aWMgdm9p
ZCBwd21fYmFja2xpZ2h0X3Bvd2VyX29uKHN0cnVjdCBwd21fYmxfZGF0YSAqcGIpCj4gICAgICAg
ICBpZiAoZXJyIDwgMCkKPiAgICAgICAgICAgICAgICAgZGV2X2VycihwYi0+ZGV2LCAiZmFpbGVk
IHRvIGVuYWJsZSBwb3dlciBzdXBwbHlcbiIpOwo+Cj4gLSAgICAgICBzdGF0ZS5lbmFibGVkID0g
dHJ1ZTsKPiAtICAgICAgIHB3bV9hcHBseV9zdGF0ZShwYi0+cHdtLCAmc3RhdGUpOwo+IC0KPiAg
ICAgICAgIGlmIChwYi0+cG9zdF9wd21fb25fZGVsYXkpCj4gICAgICAgICAgICAgICAgIG1zbGVl
cChwYi0+cG9zdF9wd21fb25fZGVsYXkpOwo+Cj4gQEAgLTY3LDQwICs2MiwyNyBAQCBzdGF0aWMg
dm9pZCBwd21fYmFja2xpZ2h0X3Bvd2VyX29uKHN0cnVjdCBwd21fYmxfZGF0YSAqcGIpCj4KPiAg
c3RhdGljIHZvaWQgcHdtX2JhY2tsaWdodF9wb3dlcl9vZmYoc3RydWN0IHB3bV9ibF9kYXRhICpw
YikKPiAgewo+IC0gICAgICAgc3RydWN0IHB3bV9zdGF0ZSBzdGF0ZTsKPiAtCj4gLSAgICAgICBw
d21fZ2V0X3N0YXRlKHBiLT5wd20sICZzdGF0ZSk7Cj4gLSAgICAgICBpZiAoIXBiLT5lbmFibGVk
KQo+IC0gICAgICAgICAgICAgICByZXR1cm47Cj4gLQo+ICAgICAgICAgaWYgKHBiLT5lbmFibGVf
Z3BpbykKPiAgICAgICAgICAgICAgICAgZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKHBiLT5lbmFi
bGVfZ3BpbywgMCk7Cj4KPiAgICAgICAgIGlmIChwYi0+cHdtX29mZl9kZWxheSkKPiAgICAgICAg
ICAgICAgICAgbXNsZWVwKHBiLT5wd21fb2ZmX2RlbGF5KTsKPgo+IC0gICAgICAgc3RhdGUuZW5h
YmxlZCA9IGZhbHNlOwo+IC0gICAgICAgc3RhdGUuZHV0eV9jeWNsZSA9IDA7Cj4gLSAgICAgICBw
d21fYXBwbHlfc3RhdGUocGItPnB3bSwgJnN0YXRlKTsKPiAtCj4gICAgICAgICByZWd1bGF0b3Jf
ZGlzYWJsZShwYi0+cG93ZXJfc3VwcGx5KTsKPiAgICAgICAgIHBiLT5lbmFibGVkID0gZmFsc2U7
Cj4gIH0KPgo+IC1zdGF0aWMgaW50IGNvbXB1dGVfZHV0eV9jeWNsZShzdHJ1Y3QgcHdtX2JsX2Rh
dGEgKnBiLCBpbnQgYnJpZ2h0bmVzcykKPiArc3RhdGljIGludCBjb21wdXRlX2R1dHlfY3ljbGUo
c3RydWN0IHB3bV9ibF9kYXRhICpwYiwgaW50IGJyaWdodG5lc3MsIHN0cnVjdCBwd21fc3RhdGUg
KnN0YXRlKQo+ICB7Cj4gICAgICAgICB1bnNpZ25lZCBpbnQgbHRoID0gcGItPmx0aF9icmlnaHRu
ZXNzOwo+IC0gICAgICAgc3RydWN0IHB3bV9zdGF0ZSBzdGF0ZTsKPiAgICAgICAgIHU2NCBkdXR5
X2N5Y2xlOwo+Cj4gLSAgICAgICBwd21fZ2V0X3N0YXRlKHBiLT5wd20sICZzdGF0ZSk7Cj4gLQo+
ICAgICAgICAgaWYgKHBiLT5sZXZlbHMpCj4gICAgICAgICAgICAgICAgIGR1dHlfY3ljbGUgPSBw
Yi0+bGV2ZWxzW2JyaWdodG5lc3NdOwo+ICAgICAgICAgZWxzZQo+ICAgICAgICAgICAgICAgICBk
dXR5X2N5Y2xlID0gYnJpZ2h0bmVzczsKPgo+IC0gICAgICAgZHV0eV9jeWNsZSAqPSBzdGF0ZS5w
ZXJpb2QgLSBsdGg7Cj4gKyAgICAgICBkdXR5X2N5Y2xlICo9IHN0YXRlLT5wZXJpb2QgLSBsdGg7
Cj4gICAgICAgICBkb19kaXYoZHV0eV9jeWNsZSwgcGItPnNjYWxlKTsKPgo+ICAgICAgICAgcmV0
dXJuIGR1dHlfY3ljbGUgKyBsdGg7Cj4gQEAgLTEyMiwxMiArMTA0LDIwIEBAIHN0YXRpYyBpbnQg
cHdtX2JhY2tsaWdodF91cGRhdGVfc3RhdHVzKHN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpibCkK
Pgo+ICAgICAgICAgaWYgKGJyaWdodG5lc3MgPiAwKSB7Cj4gICAgICAgICAgICAgICAgIHB3bV9n
ZXRfc3RhdGUocGItPnB3bSwgJnN0YXRlKTsKPiAtICAgICAgICAgICAgICAgc3RhdGUuZHV0eV9j
eWNsZSA9IGNvbXB1dGVfZHV0eV9jeWNsZShwYiwgYnJpZ2h0bmVzcyk7Cj4gKyAgICAgICAgICAg
ICAgIHN0YXRlLmR1dHlfY3ljbGUgPSBjb21wdXRlX2R1dHlfY3ljbGUocGIsIGJyaWdodG5lc3Ms
ICZzdGF0ZSk7Cj4gKyAgICAgICAgICAgICAgIHN0YXRlLmVuYWJsZWQgPSB0cnVlOwo+ICAgICAg
ICAgICAgICAgICBwd21fYXBwbHlfc3RhdGUocGItPnB3bSwgJnN0YXRlKTsKPiArCj4gICAgICAg
ICAgICAgICAgIHB3bV9iYWNrbGlnaHRfcG93ZXJfb24ocGIpOwo+IC0gICAgICAgfSBlbHNlCj4g
KyAgICAgICB9IGVsc2Ugewo+ICAgICAgICAgICAgICAgICBwd21fYmFja2xpZ2h0X3Bvd2VyX29m
ZihwYik7Cj4KPiArICAgICAgICAgICAgICAgcHdtX2dldF9zdGF0ZShwYi0+cHdtLCAmc3RhdGUp
Owo+ICsgICAgICAgICAgICAgICBzdGF0ZS5lbmFibGVkID0gZmFsc2U7Cj4gKyAgICAgICAgICAg
ICAgIHN0YXRlLmR1dHlfY3ljbGUgPSAwOwo+ICsgICAgICAgICAgICAgICBwd21fYXBwbHlfc3Rh
dGUocGItPnB3bSwgJnN0YXRlKTsKCkJvdGggY2FzZXMgd2hlcmUgKGJyaWdodG5lc3MgPiAwKSBh
bmQgJ2Vsc2UnIGNvbnRhaW4gdGhlCnB3bV9hcHBseV9zdGF0ZSgpIGNhbGwgd2l0aCB0aGUgc2Ft
ZSBwYXJhbWV0ZXJzLiAgQ2FuIHRoaXMgYmUgbW92ZWQKb3V0c2lkZSBvZiB0aGUgaWYgc3RhdGVt
ZW50cz8KPiArICAgICAgIH0KPiArCj4gICAgICAgICBpZiAocGItPm5vdGlmeV9hZnRlcikKPiAg
ICAgICAgICAgICAgICAgcGItPm5vdGlmeV9hZnRlcihwYi0+ZGV2LCBicmlnaHRuZXNzKTsKPgo+
IC0tCj4gMi4yMy4wCj4KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
