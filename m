Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3C1FD7EEF5
	for <lists+dri-devel@lfdr.de>; Fri,  2 Aug 2019 10:21:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0D05D6ED29;
	Fri,  2 Aug 2019 08:19:46 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x643.google.com (mail-pl1-x643.google.com
 [IPv6:2607:f8b0:4864:20::643])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C0C046E842
 for <dri-devel@lists.freedesktop.org>; Thu,  1 Aug 2019 23:47:41 +0000 (UTC)
Received: by mail-pl1-x643.google.com with SMTP id w24so32875420plp.2
 for <dri-devel@lists.freedesktop.org>; Thu, 01 Aug 2019 16:47:41 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=jtSqljpSDE/qLhKuzfPgyz4WtxgB0XXEpPKPdjuFDcw=;
 b=LwfyKb305Kc2X8CO2AUjIGl25buWW4elhH9yDv+67fn12SdgeawR/gt0uwICxJSjw8
 T2eyVTdewDLCAPYlrglz1mA+M8HB7E9b7L1YDkcPEYdx/qvUj65TGcQO5X/x/k5iQLuZ
 SSgdvLIP6Y+TEYwhHr8htqHknq1JeHpR4iHCFE3TLHzD8yBkV57b1dDFRLxJvegN1eIk
 tXWUrhpcJxjNJRSOaAJitiUI8/nv51LkPDAckVC04sF4VAR9VRgynqTtcpocMgMVp2fQ
 0in96/Ln28uZWimNZrVR7mvaQf+IATrmnbDn2vBP+XWOOP0h/JnJPxqdPd2vgOtWs9et
 4MGg==
X-Gm-Message-State: APjAAAVvx56XEw3e4dzeb3HsnKPSdLHfWYoAd/Srt+i1yKXow470NtfA
 q3LBIwsUYhHiv2+ZTzkDwds=
X-Google-Smtp-Source: APXvYqz+KyNY8t4He+m9ZIeh73c4EAv2ceSDT/5SMG+Ut83JlVFgma+Y3h7gKqByFTAVKILRxOvnUw==
X-Received: by 2002:a17:902:7687:: with SMTP id
 m7mr75178521pll.310.1564703261386; 
 Thu, 01 Aug 2019 16:47:41 -0700 (PDT)
Received: from blueforge.nvidia.com (searspoint.nvidia.com. [216.228.112.21])
 by smtp.gmail.com with ESMTPSA id
 q7sm79090792pff.2.2019.08.01.16.47.39
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Thu, 01 Aug 2019 16:47:40 -0700 (PDT)
From: john.hubbard@gmail.com
X-Google-Original-From: jhubbard@nvidia.com
To: Andrew Morton <akpm@linux-foundation.org>
Subject: [PATCH v5 1/3] mm/gup: add make_dirty arg to
 put_user_pages_dirty_lock()
Date: Thu,  1 Aug 2019 16:47:33 -0700
Message-Id: <20190801234735.2149-2-jhubbard@nvidia.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20190801234735.2149-1-jhubbard@nvidia.com>
References: <20190801234735.2149-1-jhubbard@nvidia.com>
MIME-Version: 1.0
X-NVConfidentiality: public
X-Mailman-Approved-At: Fri, 02 Aug 2019 08:19:03 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=jtSqljpSDE/qLhKuzfPgyz4WtxgB0XXEpPKPdjuFDcw=;
 b=XY0tvLDmjuPVZVxwS5b4b7INHJjdW0uUQgZFBh9SEnLMraZJI0OQ0Jg23pRx6E0Y4G
 SRLXCdTX2Yau8Ux//pZOUJCkdyJkrobDIFvANiT0dOVo0Bg5617xVN+rzgfYWkWRL1+r
 662Ju3FcWrwP1QjrGkKVjURieTDkgRo8Jx9Lstr7Vqn48EPdkgzvOauLByW4C4NXhcKG
 FNm6V1p6sijxvm84S+kkoLXRqoaX8C+a6wHUl1jc0LsVF9pQLmVMaQoW/aV8UupTEbWt
 WbQhp279E+nit3bEKcVYsUGacLDc93ygc9uGS6T8HgtyXYQnspaSYaOZ/nBKxLpLzMP9
 Bzbw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Boaz Harrosh <boaz@plexistor.com>, Jan Kara <jack@suse.cz>,
 David Airlie <airlied@linux.ie>, Dave Chinner <david@fromorbit.com>,
 dri-devel@lists.freedesktop.org, linux-mm@kvack.org,
 Ira Weiny <ira.weiny@intel.com>, Christoph Hellwig <hch@lst.de>,
 Sage Weil <sage@redhat.com>, Miklos Szeredi <miklos@szeredi.hu>,
 linux-rdma@vger.kernel.org, Matthew Wilcox <willy@infradead.org>,
 Jason Gunthorpe <jgg@ziepe.ca>, Johannes Thumshirn <jthumshirn@suse.de>,
 Ilya Dryomov <idryomov@gmail.com>,
 =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@intel.com>,
 John Hubbard <jhubbard@nvidia.com>,
 Santosh Shilimkar <santosh.shilimkar@oracle.com>,
 Ming Lei <ming.lei@redhat.com>,
 =?UTF-8?q?J=C3=A9r=C3=B4me=20Glisse?= <jglisse@redhat.com>,
 Alexander Viro <viro@zeniv.linux.org.uk>,
 Dan Williams <dan.j.williams@intel.com>,
 Magnus Karlsson <magnus.karlsson@intel.com>, Jens Axboe <axboe@kernel.dk>,
 netdev@vger.kernel.org, LKML <linux-kernel@vger.kernel.org>,
 Yan Zheng <zyan@redhat.com>, bpf@vger.kernel.org,
 "David S . Miller" <davem@davemloft.net>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogSm9obiBIdWJiYXJkIDxqaHViYmFyZEBudmlkaWEuY29tPgoKUHJvdmlkZSBtb3JlIGNh
cGFibGUgdmFyaWF0aW9uIG9mIHB1dF91c2VyX3BhZ2VzX2RpcnR5X2xvY2soKSwKYW5kIGRlbGV0
ZSBwdXRfdXNlcl9wYWdlc19kaXJ0eSgpLiBUaGlzIGlzIGJhc2VkIG9uIHRoZQpmb2xsb3dpbmc6
CgoxLiBMb3RzIG9mIGNhbGwgc2l0ZXMgYmVjb21lIHNpbXBsZXIgaWYgYSBib29sIGlzIHBhc3Nl
ZAppbnRvIHB1dF91c2VyX3BhZ2UqKCksIGluc3RlYWQgb2YgbWFraW5nIHRoZSBjYWxsIHNpdGUK
Y2hvb3NlIHdoaWNoIHB1dF91c2VyX3BhZ2UqKCkgdmFyaWFudCB0byBjYWxsLgoKMi4gQ2hyaXN0
b3BoIEhlbGx3aWcncyBvYnNlcnZhdGlvbiB0aGF0IHNldF9wYWdlX2RpcnR5X2xvY2soKQppcyB1
c3VhbGx5IGNvcnJlY3QsIGFuZCBzZXRfcGFnZV9kaXJ0eSgpIGlzIHVzdWFsbHkgYQpidWcsIG9y
IGF0IGxlYXN0IHF1ZXN0aW9uYWJsZSwgd2l0aGluIGEgcHV0X3VzZXJfcGFnZSooKQpjYWxsaW5n
IGNoYWluLgoKVGhpcyBsZWFkcyB0byB0aGUgZm9sbG93aW5nIEFQSSBjaG9pY2VzOgoKICAgICog
cHV0X3VzZXJfcGFnZXNfZGlydHlfbG9jayhwYWdlLCBucGFnZXMsIG1ha2VfZGlydHkpCgogICAg
KiBUaGVyZSBpcyBubyBwdXRfdXNlcl9wYWdlc19kaXJ0eSgpLiBZb3UgaGF2ZSB0bwogICAgICBo
YW5kIGNvZGUgdGhhdCwgaW4gdGhlIHJhcmUgY2FzZSB0aGF0IGl0J3MKICAgICAgcmVxdWlyZWQu
CgpSZXZpZXdlZC1ieTogQ2hyaXN0b3BoIEhlbGx3aWcgPGhjaEBsc3QuZGU+CkNjOiBNYXR0aGV3
IFdpbGNveCA8d2lsbHlAaW5mcmFkZWFkLm9yZz4KQ2M6IEphbiBLYXJhIDxqYWNrQHN1c2UuY3o+
CkNjOiBJcmEgV2VpbnkgPGlyYS53ZWlueUBpbnRlbC5jb20+CkNjOiBKYXNvbiBHdW50aG9ycGUg
PGpnZ0B6aWVwZS5jYT4KU2lnbmVkLW9mZi1ieTogSm9obiBIdWJiYXJkIDxqaHViYmFyZEBudmlk
aWEuY29tPgotLS0KIGRyaXZlcnMvaW5maW5pYmFuZC9jb3JlL3VtZW0uYyAgICAgICAgICAgICB8
ICAgNSArLQogZHJpdmVycy9pbmZpbmliYW5kL2h3L2hmaTEvdXNlcl9wYWdlcy5jICAgIHwgICA1
ICstCiBkcml2ZXJzL2luZmluaWJhbmQvaHcvcWliL3FpYl91c2VyX3BhZ2VzLmMgfCAgMTMgKy0t
CiBkcml2ZXJzL2luZmluaWJhbmQvaHcvdXNuaWMvdXNuaWNfdWlvbS5jICAgfCAgIDUgKy0KIGRy
aXZlcnMvaW5maW5pYmFuZC9zdy9zaXcvc2l3X21lbS5jICAgICAgICB8ICAxOCArLS0tCiBpbmNs
dWRlL2xpbnV4L21tLmggICAgICAgICAgICAgICAgICAgICAgICAgfCAgIDUgKy0KIG1tL2d1cC5j
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDExNSArKysrKysrKystLS0tLS0t
LS0tLS0KIDcgZmlsZXMgY2hhbmdlZCwgNjAgaW5zZXJ0aW9ucygrKSwgMTA2IGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvaW5maW5pYmFuZC9jb3JlL3VtZW0uYyBiL2RyaXZlcnMv
aW5maW5pYmFuZC9jb3JlL3VtZW0uYwppbmRleCAwOGRhODQwZWQ3ZWUuLjk2NWNmOWRlYTcxYSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9pbmZpbmliYW5kL2NvcmUvdW1lbS5jCisrKyBiL2RyaXZlcnMv
aW5maW5pYmFuZC9jb3JlL3VtZW0uYwpAQCAtNTQsMTAgKzU0LDcgQEAgc3RhdGljIHZvaWQgX19p
Yl91bWVtX3JlbGVhc2Uoc3RydWN0IGliX2RldmljZSAqZGV2LCBzdHJ1Y3QgaWJfdW1lbSAqdW1l
bSwgaW50IGQKIAogCWZvcl9lYWNoX3NnX3BhZ2UodW1lbS0+c2dfaGVhZC5zZ2wsICZzZ19pdGVy
LCB1bWVtLT5zZ19uZW50cywgMCkgewogCQlwYWdlID0gc2dfcGFnZV9pdGVyX3BhZ2UoJnNnX2l0
ZXIpOwotCQlpZiAodW1lbS0+d3JpdGFibGUgJiYgZGlydHkpCi0JCQlwdXRfdXNlcl9wYWdlc19k
aXJ0eV9sb2NrKCZwYWdlLCAxKTsKLQkJZWxzZQotCQkJcHV0X3VzZXJfcGFnZShwYWdlKTsKKwkJ
cHV0X3VzZXJfcGFnZXNfZGlydHlfbG9jaygmcGFnZSwgMSwgdW1lbS0+d3JpdGFibGUgJiYgZGly
dHkpOwogCX0KIAogCXNnX2ZyZWVfdGFibGUoJnVtZW0tPnNnX2hlYWQpOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9pbmZpbmliYW5kL2h3L2hmaTEvdXNlcl9wYWdlcy5jIGIvZHJpdmVycy9pbmZpbmli
YW5kL2h3L2hmaTEvdXNlcl9wYWdlcy5jCmluZGV4IGI4OWE5YjlhZWY3YS4uNDY5YWNiOTYxZmJk
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2luZmluaWJhbmQvaHcvaGZpMS91c2VyX3BhZ2VzLmMKKysr
IGIvZHJpdmVycy9pbmZpbmliYW5kL2h3L2hmaTEvdXNlcl9wYWdlcy5jCkBAIC0xMTgsMTAgKzEx
OCw3IEBAIGludCBoZmkxX2FjcXVpcmVfdXNlcl9wYWdlcyhzdHJ1Y3QgbW1fc3RydWN0ICptbSwg
dW5zaWduZWQgbG9uZyB2YWRkciwgc2l6ZV90IG5wCiB2b2lkIGhmaTFfcmVsZWFzZV91c2VyX3Bh
Z2VzKHN0cnVjdCBtbV9zdHJ1Y3QgKm1tLCBzdHJ1Y3QgcGFnZSAqKnAsCiAJCQkgICAgIHNpemVf
dCBucGFnZXMsIGJvb2wgZGlydHkpCiB7Ci0JaWYgKGRpcnR5KQotCQlwdXRfdXNlcl9wYWdlc19k
aXJ0eV9sb2NrKHAsIG5wYWdlcyk7Ci0JZWxzZQotCQlwdXRfdXNlcl9wYWdlcyhwLCBucGFnZXMp
OworCXB1dF91c2VyX3BhZ2VzX2RpcnR5X2xvY2socCwgbnBhZ2VzLCBkaXJ0eSk7CiAKIAlpZiAo
bW0pIHsgLyogZHVyaW5nIGNsb3NlIGFmdGVyIHNpZ25hbCwgbW0gY2FuIGJlIE5VTEwgKi8KIAkJ
YXRvbWljNjRfc3ViKG5wYWdlcywgJm1tLT5waW5uZWRfdm0pOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9pbmZpbmliYW5kL2h3L3FpYi9xaWJfdXNlcl9wYWdlcy5jIGIvZHJpdmVycy9pbmZpbmliYW5k
L2h3L3FpYi9xaWJfdXNlcl9wYWdlcy5jCmluZGV4IGJmYmZiYjdlMGZmNC4uMjZjMWZiOGQ0NWNj
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2luZmluaWJhbmQvaHcvcWliL3FpYl91c2VyX3BhZ2VzLmMK
KysrIGIvZHJpdmVycy9pbmZpbmliYW5kL2h3L3FpYi9xaWJfdXNlcl9wYWdlcy5jCkBAIC0zNywx
NSArMzcsNiBAQAogCiAjaW5jbHVkZSAicWliLmgiCiAKLXN0YXRpYyB2b2lkIF9fcWliX3JlbGVh
c2VfdXNlcl9wYWdlcyhzdHJ1Y3QgcGFnZSAqKnAsIHNpemVfdCBudW1fcGFnZXMsCi0JCQkJICAg
ICBpbnQgZGlydHkpCi17Ci0JaWYgKGRpcnR5KQotCQlwdXRfdXNlcl9wYWdlc19kaXJ0eV9sb2Nr
KHAsIG51bV9wYWdlcyk7Ci0JZWxzZQotCQlwdXRfdXNlcl9wYWdlcyhwLCBudW1fcGFnZXMpOwot
fQotCiAvKioKICAqIHFpYl9tYXBfcGFnZSAtIGEgc2FmZXR5IHdyYXBwZXIgYXJvdW5kIHBjaV9t
YXBfcGFnZSgpCiAgKgpAQCAtMTI0LDcgKzExNSw3IEBAIGludCBxaWJfZ2V0X3VzZXJfcGFnZXMo
dW5zaWduZWQgbG9uZyBzdGFydF9wYWdlLCBzaXplX3QgbnVtX3BhZ2VzLAogCiAJcmV0dXJuIDA7
CiBiYWlsX3JlbGVhc2U6Ci0JX19xaWJfcmVsZWFzZV91c2VyX3BhZ2VzKHAsIGdvdCwgMCk7CisJ
cHV0X3VzZXJfcGFnZXNfZGlydHlfbG9jayhwLCBnb3QsIGZhbHNlKTsKIGJhaWw6CiAJYXRvbWlj
NjRfc3ViKG51bV9wYWdlcywgJmN1cnJlbnQtPm1tLT5waW5uZWRfdm0pOwogCXJldHVybiByZXQ7
CkBAIC0xMzIsNyArMTIzLDcgQEAgaW50IHFpYl9nZXRfdXNlcl9wYWdlcyh1bnNpZ25lZCBsb25n
IHN0YXJ0X3BhZ2UsIHNpemVfdCBudW1fcGFnZXMsCiAKIHZvaWQgcWliX3JlbGVhc2VfdXNlcl9w
YWdlcyhzdHJ1Y3QgcGFnZSAqKnAsIHNpemVfdCBudW1fcGFnZXMpCiB7Ci0JX19xaWJfcmVsZWFz
ZV91c2VyX3BhZ2VzKHAsIG51bV9wYWdlcywgMSk7CisJcHV0X3VzZXJfcGFnZXNfZGlydHlfbG9j
ayhwLCBudW1fcGFnZXMsIHRydWUpOwogCiAJLyogZHVyaW5nIGNsb3NlIGFmdGVyIHNpZ25hbCwg
bW0gY2FuIGJlIE5VTEwgKi8KIAlpZiAoY3VycmVudC0+bW0pCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2luZmluaWJhbmQvaHcvdXNuaWMvdXNuaWNfdWlvbS5jIGIvZHJpdmVycy9pbmZpbmliYW5kL2h3
L3VzbmljL3VzbmljX3Vpb20uYwppbmRleCAwYjAyMzdkNDE2MTMuLjYyZTZmZmE5YWQ3OCAxMDA2
NDQKLS0tIGEvZHJpdmVycy9pbmZpbmliYW5kL2h3L3VzbmljL3VzbmljX3Vpb20uYworKysgYi9k
cml2ZXJzL2luZmluaWJhbmQvaHcvdXNuaWMvdXNuaWNfdWlvbS5jCkBAIC03NSwxMCArNzUsNyBA
QCBzdGF0aWMgdm9pZCB1c25pY191aW9tX3B1dF9wYWdlcyhzdHJ1Y3QgbGlzdF9oZWFkICpjaHVu
a19saXN0LCBpbnQgZGlydHkpCiAJCWZvcl9lYWNoX3NnKGNodW5rLT5wYWdlX2xpc3QsIHNnLCBj
aHVuay0+bmVudHMsIGkpIHsKIAkJCXBhZ2UgPSBzZ19wYWdlKHNnKTsKIAkJCXBhID0gc2dfcGh5
cyhzZyk7Ci0JCQlpZiAoZGlydHkpCi0JCQkJcHV0X3VzZXJfcGFnZXNfZGlydHlfbG9jaygmcGFn
ZSwgMSk7Ci0JCQllbHNlCi0JCQkJcHV0X3VzZXJfcGFnZShwYWdlKTsKKwkJCXB1dF91c2VyX3Bh
Z2VzX2RpcnR5X2xvY2soJnBhZ2UsIDEsIGRpcnR5KTsKIAkJCXVzbmljX2RiZygicGE6ICVwYVxu
IiwgJnBhKTsKIAkJfQogCQlrZnJlZShjaHVuayk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2luZmlu
aWJhbmQvc3cvc2l3L3Npd19tZW0uYyBiL2RyaXZlcnMvaW5maW5pYmFuZC9zdy9zaXcvc2l3X21l
bS5jCmluZGV4IDY3MTcxYzgyYjBjNC4uMjI4NDk2NmU0NDk5IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2luZmluaWJhbmQvc3cvc2l3L3Npd19tZW0uYworKysgYi9kcml2ZXJzL2luZmluaWJhbmQvc3cv
c2l3L3Npd19tZW0uYwpAQCAtNjAsMjAgKzYwLDYgQEAgc3RydWN0IHNpd19tZW0gKnNpd19tZW1f
aWQyb2JqKHN0cnVjdCBzaXdfZGV2aWNlICpzZGV2LCBpbnQgc3RhZ19pbmRleCkKIAlyZXR1cm4g
TlVMTDsKIH0KIAotc3RhdGljIHZvaWQgc2l3X2ZyZWVfcGxpc3Qoc3RydWN0IHNpd19wYWdlX2No
dW5rICpjaHVuaywgaW50IG51bV9wYWdlcywKLQkJCSAgIGJvb2wgZGlydHkpCi17Ci0Jc3RydWN0
IHBhZ2UgKipwID0gY2h1bmstPnBsaXN0OwotCi0Jd2hpbGUgKG51bV9wYWdlcy0tKSB7Ci0JCWlm
ICghUGFnZURpcnR5KCpwKSAmJiBkaXJ0eSkKLQkJCXB1dF91c2VyX3BhZ2VzX2RpcnR5X2xvY2so
cCwgMSk7Ci0JCWVsc2UKLQkJCXB1dF91c2VyX3BhZ2UoKnApOwotCQlwKys7Ci0JfQotfQotCiB2
b2lkIHNpd191bWVtX3JlbGVhc2Uoc3RydWN0IHNpd191bWVtICp1bWVtLCBib29sIGRpcnR5KQog
ewogCXN0cnVjdCBtbV9zdHJ1Y3QgKm1tX3MgPSB1bWVtLT5vd25pbmdfbW07CkBAIC04Miw4ICs2
OCw4IEBAIHZvaWQgc2l3X3VtZW1fcmVsZWFzZShzdHJ1Y3Qgc2l3X3VtZW0gKnVtZW0sIGJvb2wg
ZGlydHkpCiAJZm9yIChpID0gMDsgbnVtX3BhZ2VzOyBpKyspIHsKIAkJaW50IHRvX2ZyZWUgPSBt
aW5fdChpbnQsIFBBR0VTX1BFUl9DSFVOSywgbnVtX3BhZ2VzKTsKIAotCQlzaXdfZnJlZV9wbGlz
dCgmdW1lbS0+cGFnZV9jaHVua1tpXSwgdG9fZnJlZSwKLQkJCSAgICAgICB1bWVtLT53cml0YWJs
ZSAmJiBkaXJ0eSk7CisJCXB1dF91c2VyX3BhZ2VzX2RpcnR5X2xvY2soJnVtZW0tPnBhZ2VfY2h1
bmtbaV0sIHRvX2ZyZWUsCisJCQkJCSAgdW1lbS0+d3JpdGFibGUgJiYgZGlydHkpOwogCQlrZnJl
ZSh1bWVtLT5wYWdlX2NodW5rW2ldLnBsaXN0KTsKIAkJbnVtX3BhZ2VzIC09IHRvX2ZyZWU7CiAJ
fQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9tbS5oIGIvaW5jbHVkZS9saW51eC9tbS5oCmlu
ZGV4IDAzMzRjYTk3YzU4NC4uOTc1OWI2YTI0NDIwIDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4
L21tLmgKKysrIGIvaW5jbHVkZS9saW51eC9tbS5oCkBAIC0xMDU3LDggKzEwNTcsOSBAQCBzdGF0
aWMgaW5saW5lIHZvaWQgcHV0X3VzZXJfcGFnZShzdHJ1Y3QgcGFnZSAqcGFnZSkKIAlwdXRfcGFn
ZShwYWdlKTsKIH0KIAotdm9pZCBwdXRfdXNlcl9wYWdlc19kaXJ0eShzdHJ1Y3QgcGFnZSAqKnBh
Z2VzLCB1bnNpZ25lZCBsb25nIG5wYWdlcyk7Ci12b2lkIHB1dF91c2VyX3BhZ2VzX2RpcnR5X2xv
Y2soc3RydWN0IHBhZ2UgKipwYWdlcywgdW5zaWduZWQgbG9uZyBucGFnZXMpOwordm9pZCBwdXRf
dXNlcl9wYWdlc19kaXJ0eV9sb2NrKHN0cnVjdCBwYWdlICoqcGFnZXMsIHVuc2lnbmVkIGxvbmcg
bnBhZ2VzLAorCQkJICAgICAgIGJvb2wgbWFrZV9kaXJ0eSk7CisKIHZvaWQgcHV0X3VzZXJfcGFn
ZXMoc3RydWN0IHBhZ2UgKipwYWdlcywgdW5zaWduZWQgbG9uZyBucGFnZXMpOwogCiAjaWYgZGVm
aW5lZChDT05GSUdfU1BBUlNFTUVNKSAmJiAhZGVmaW5lZChDT05GSUdfU1BBUlNFTUVNX1ZNRU1N
QVApCmRpZmYgLS1naXQgYS9tbS9ndXAuYyBiL21tL2d1cC5jCmluZGV4IDk4ZjEzYWIzN2JhYy4u
N2ZlZmQ3YWIwMmM0IDEwMDY0NAotLS0gYS9tbS9ndXAuYworKysgYi9tbS9ndXAuYwpAQCAtMjks
ODUgKzI5LDcwIEBAIHN0cnVjdCBmb2xsb3dfcGFnZV9jb250ZXh0IHsKIAl1bnNpZ25lZCBpbnQg
cGFnZV9tYXNrOwogfTsKIAotdHlwZWRlZiBpbnQgKCpzZXRfZGlydHlfZnVuY190KShzdHJ1Y3Qg
cGFnZSAqcGFnZSk7Ci0KLXN0YXRpYyB2b2lkIF9fcHV0X3VzZXJfcGFnZXNfZGlydHkoc3RydWN0
IHBhZ2UgKipwYWdlcywKLQkJCQkgICB1bnNpZ25lZCBsb25nIG5wYWdlcywKLQkJCQkgICBzZXRf
ZGlydHlfZnVuY190IHNkZikKLXsKLQl1bnNpZ25lZCBsb25nIGluZGV4OwotCi0JZm9yIChpbmRl
eCA9IDA7IGluZGV4IDwgbnBhZ2VzOyBpbmRleCsrKSB7Ci0JCXN0cnVjdCBwYWdlICpwYWdlID0g
Y29tcG91bmRfaGVhZChwYWdlc1tpbmRleF0pOwotCi0JCS8qCi0JCSAqIENoZWNraW5nIFBhZ2VE
aXJ0eSBhdCB0aGlzIHBvaW50IG1heSByYWNlIHdpdGgKLQkJICogY2xlYXJfcGFnZV9kaXJ0eV9m
b3JfaW8oKSwgYnV0IHRoYXQncyBPSy4gVHdvIGtleSBjYXNlczoKLQkJICoKLQkJICogMSkgVGhp
cyBjb2RlIHNlZXMgdGhlIHBhZ2UgYXMgYWxyZWFkeSBkaXJ0eSwgc28gaXQgc2tpcHMKLQkJICog
dGhlIGNhbGwgdG8gc2RmKCkuIFRoYXQgY291bGQgaGFwcGVuIGJlY2F1c2UKLQkJICogY2xlYXJf
cGFnZV9kaXJ0eV9mb3JfaW8oKSBjYWxsZWQgcGFnZV9ta2NsZWFuKCksCi0JCSAqIGZvbGxvd2Vk
IGJ5IHNldF9wYWdlX2RpcnR5KCkuIEhvd2V2ZXIsIG5vdyB0aGUgcGFnZSBpcwotCQkgKiBnb2lu
ZyB0byBnZXQgd3JpdHRlbiBiYWNrLCB3aGljaCBtZWV0cyB0aGUgb3JpZ2luYWwKLQkJICogaW50
ZW50aW9uIG9mIHNldHRpbmcgaXQgZGlydHksIHNvIGFsbCBpcyB3ZWxsOgotCQkgKiBjbGVhcl9w
YWdlX2RpcnR5X2Zvcl9pbygpIGdvZXMgb24gdG8gY2FsbAotCQkgKiBUZXN0Q2xlYXJQYWdlRGly
dHkoKSwgYW5kIHdyaXRlIHRoZSBwYWdlIGJhY2suCi0JCSAqCi0JCSAqIDIpIFRoaXMgY29kZSBz
ZWVzIHRoZSBwYWdlIGFzIGNsZWFuLCBzbyBpdCBjYWxscyBzZGYoKS4KLQkJICogVGhlIHBhZ2Ug
c3RheXMgZGlydHksIGRlc3BpdGUgYmVpbmcgd3JpdHRlbiBiYWNrLCBzbyBpdAotCQkgKiBnZXRz
IHdyaXR0ZW4gYmFjayBhZ2FpbiBpbiB0aGUgbmV4dCB3cml0ZWJhY2sgY3ljbGUuCi0JCSAqIFRo
aXMgaXMgaGFybWxlc3MuCi0JCSAqLwotCQlpZiAoIVBhZ2VEaXJ0eShwYWdlKSkKLQkJCXNkZihw
YWdlKTsKLQotCQlwdXRfdXNlcl9wYWdlKHBhZ2UpOwotCX0KLX0KLQogLyoqCi0gKiBwdXRfdXNl
cl9wYWdlc19kaXJ0eSgpIC0gcmVsZWFzZSBhbmQgZGlydHkgYW4gYXJyYXkgb2YgZ3VwLXBpbm5l
ZCBwYWdlcwotICogQHBhZ2VzOiAgYXJyYXkgb2YgcGFnZXMgdG8gYmUgbWFya2VkIGRpcnR5IGFu
ZCByZWxlYXNlZC4KKyAqIHB1dF91c2VyX3BhZ2VzX2RpcnR5X2xvY2soKSAtIHJlbGVhc2UgYW5k
IG9wdGlvbmFsbHkgZGlydHkgZ3VwLXBpbm5lZCBwYWdlcworICogQHBhZ2VzOiAgYXJyYXkgb2Yg
cGFnZXMgdG8gYmUgbWF5YmUgbWFya2VkIGRpcnR5LCBhbmQgZGVmaW5pdGVseSByZWxlYXNlZC4K
ICAqIEBucGFnZXM6IG51bWJlciBvZiBwYWdlcyBpbiB0aGUgQHBhZ2VzIGFycmF5LgorICogQG1h
a2VfZGlydHk6IHdoZXRoZXIgdG8gbWFyayB0aGUgcGFnZXMgZGlydHkKICAqCiAgKiAiZ3VwLXBp
bm5lZCBwYWdlIiByZWZlcnMgdG8gYSBwYWdlIHRoYXQgaGFzIGhhZCBvbmUgb2YgdGhlIGdldF91
c2VyX3BhZ2VzKCkKICAqIHZhcmlhbnRzIGNhbGxlZCBvbiB0aGF0IHBhZ2UuCiAgKgogICogRm9y
IGVhY2ggcGFnZSBpbiB0aGUgQHBhZ2VzIGFycmF5LCBtYWtlIHRoYXQgcGFnZSAob3IgaXRzIGhl
YWQgcGFnZSwgaWYgYQotICogY29tcG91bmQgcGFnZSkgZGlydHksIGlmIGl0IHdhcyBwcmV2aW91
c2x5IGxpc3RlZCBhcyBjbGVhbi4gVGhlbiwgcmVsZWFzZQotICogdGhlIHBhZ2UgdXNpbmcgcHV0
X3VzZXJfcGFnZSgpLgorICogY29tcG91bmQgcGFnZSkgZGlydHksIGlmIEBtYWtlX2RpcnR5IGlz
IHRydWUsIGFuZCBpZiB0aGUgcGFnZSB3YXMgcHJldmlvdXNseQorICogbGlzdGVkIGFzIGNsZWFu
LiBJbiBhbnkgY2FzZSwgcmVsZWFzZXMgYWxsIHBhZ2VzIHVzaW5nIHB1dF91c2VyX3BhZ2UoKSwK
KyAqIHBvc3NpYmx5IHZpYSBwdXRfdXNlcl9wYWdlcygpLCBmb3IgdGhlIG5vbi1kaXJ0eSBjYXNl
LgogICoKICAqIFBsZWFzZSBzZWUgdGhlIHB1dF91c2VyX3BhZ2UoKSBkb2N1bWVudGF0aW9uIGZv
ciBkZXRhaWxzLgogICoKLSAqIHNldF9wYWdlX2RpcnR5KCksIHdoaWNoIGRvZXMgbm90IGxvY2sg
dGhlIHBhZ2UsIGlzIHVzZWQgaGVyZS4KLSAqIFRoZXJlZm9yZSwgaXQgaXMgdGhlIGNhbGxlcidz
IHJlc3BvbnNpYmlsaXR5IHRvIGVuc3VyZSB0aGF0IHRoaXMgaXMKLSAqIHNhZmUuIElmIG5vdCwg
dGhlbiBwdXRfdXNlcl9wYWdlc19kaXJ0eV9sb2NrKCkgc2hvdWxkIGJlIGNhbGxlZCBpbnN0ZWFk
LgorICogc2V0X3BhZ2VfZGlydHlfbG9jaygpIGlzIHVzZWQgaW50ZXJuYWxseS4gSWYgaW5zdGVh
ZCwgc2V0X3BhZ2VfZGlydHkoKSBpcworICogcmVxdWlyZWQsIHRoZW4gdGhlIGNhbGxlciBzaG91
bGQgYSkgdmVyaWZ5IHRoYXQgdGhpcyBpcyByZWFsbHkgY29ycmVjdCwKKyAqIGJlY2F1c2UgX2xv
Y2soKSBpcyB1c3VhbGx5IHJlcXVpcmVkLCBhbmQgYikgaGFuZCBjb2RlIGl0OgorICogc2V0X3Bh
Z2VfZGlydHlfbG9jaygpLCBwdXRfdXNlcl9wYWdlKCkuCiAgKgogICovCi12b2lkIHB1dF91c2Vy
X3BhZ2VzX2RpcnR5KHN0cnVjdCBwYWdlICoqcGFnZXMsIHVuc2lnbmVkIGxvbmcgbnBhZ2VzKQor
dm9pZCBwdXRfdXNlcl9wYWdlc19kaXJ0eV9sb2NrKHN0cnVjdCBwYWdlICoqcGFnZXMsIHVuc2ln
bmVkIGxvbmcgbnBhZ2VzLAorCQkJICAgICAgIGJvb2wgbWFrZV9kaXJ0eSkKIHsKLQlfX3B1dF91
c2VyX3BhZ2VzX2RpcnR5KHBhZ2VzLCBucGFnZXMsIHNldF9wYWdlX2RpcnR5KTsKLX0KLUVYUE9S
VF9TWU1CT0wocHV0X3VzZXJfcGFnZXNfZGlydHkpOworCXVuc2lnbmVkIGxvbmcgaW5kZXg7CiAK
LS8qKgotICogcHV0X3VzZXJfcGFnZXNfZGlydHlfbG9jaygpIC0gcmVsZWFzZSBhbmQgZGlydHkg
YW4gYXJyYXkgb2YgZ3VwLXBpbm5lZCBwYWdlcwotICogQHBhZ2VzOiAgYXJyYXkgb2YgcGFnZXMg
dG8gYmUgbWFya2VkIGRpcnR5IGFuZCByZWxlYXNlZC4KLSAqIEBucGFnZXM6IG51bWJlciBvZiBw
YWdlcyBpbiB0aGUgQHBhZ2VzIGFycmF5LgotICoKLSAqIEZvciBlYWNoIHBhZ2UgaW4gdGhlIEBw
YWdlcyBhcnJheSwgbWFrZSB0aGF0IHBhZ2UgKG9yIGl0cyBoZWFkIHBhZ2UsIGlmIGEKLSAqIGNv
bXBvdW5kIHBhZ2UpIGRpcnR5LCBpZiBpdCB3YXMgcHJldmlvdXNseSBsaXN0ZWQgYXMgY2xlYW4u
IFRoZW4sIHJlbGVhc2UKLSAqIHRoZSBwYWdlIHVzaW5nIHB1dF91c2VyX3BhZ2UoKS4KLSAqCi0g
KiBQbGVhc2Ugc2VlIHRoZSBwdXRfdXNlcl9wYWdlKCkgZG9jdW1lbnRhdGlvbiBmb3IgZGV0YWls
cy4KLSAqCi0gKiBUaGlzIGlzIGp1c3QgbGlrZSBwdXRfdXNlcl9wYWdlc19kaXJ0eSgpLCBleGNl
cHQgdGhhdCBpdCBpbnZva2VzCi0gKiBzZXRfcGFnZV9kaXJ0eV9sb2NrKCksIGluc3RlYWQgb2Yg
c2V0X3BhZ2VfZGlydHkoKS4KLSAqCi0gKi8KLXZvaWQgcHV0X3VzZXJfcGFnZXNfZGlydHlfbG9j
ayhzdHJ1Y3QgcGFnZSAqKnBhZ2VzLCB1bnNpZ25lZCBsb25nIG5wYWdlcykKLXsKLQlfX3B1dF91
c2VyX3BhZ2VzX2RpcnR5KHBhZ2VzLCBucGFnZXMsIHNldF9wYWdlX2RpcnR5X2xvY2spOworCS8q
CisJICogVE9ETzogdGhpcyBjYW4gYmUgb3B0aW1pemVkIGZvciBodWdlIHBhZ2VzOiBpZiBhIHNl
cmllcyBvZiBwYWdlcyBpcworCSAqIHBoeXNpY2FsbHkgY29udGlndW91cyBhbmQgcGFydCBvZiB0
aGUgc2FtZSBjb21wb3VuZCBwYWdlLCB0aGVuIGEKKwkgKiBzaW5nbGUgb3BlcmF0aW9uIHRvIHRo
ZSBoZWFkIHBhZ2Ugc2hvdWxkIHN1ZmZpY2UuCisJICovCisKKwlpZiAoIW1ha2VfZGlydHkpIHsK
KwkJcHV0X3VzZXJfcGFnZXMocGFnZXMsIG5wYWdlcyk7CisJCXJldHVybjsKKwl9CisKKwlmb3Ig
KGluZGV4ID0gMDsgaW5kZXggPCBucGFnZXM7IGluZGV4KyspIHsKKwkJc3RydWN0IHBhZ2UgKnBh
Z2UgPSBjb21wb3VuZF9oZWFkKHBhZ2VzW2luZGV4XSk7CisJCS8qCisJCSAqIENoZWNraW5nIFBh
Z2VEaXJ0eSBhdCB0aGlzIHBvaW50IG1heSByYWNlIHdpdGgKKwkJICogY2xlYXJfcGFnZV9kaXJ0
eV9mb3JfaW8oKSwgYnV0IHRoYXQncyBPSy4gVHdvIGtleQorCQkgKiBjYXNlczoKKwkJICoKKwkJ
ICogMSkgVGhpcyBjb2RlIHNlZXMgdGhlIHBhZ2UgYXMgYWxyZWFkeSBkaXJ0eSwgc28gaXQKKwkJ
ICogc2tpcHMgdGhlIGNhbGwgdG8gc2V0X3BhZ2VfZGlydHkoKS4gVGhhdCBjb3VsZCBoYXBwZW4K
KwkJICogYmVjYXVzZSBjbGVhcl9wYWdlX2RpcnR5X2Zvcl9pbygpIGNhbGxlZAorCQkgKiBwYWdl
X21rY2xlYW4oKSwgZm9sbG93ZWQgYnkgc2V0X3BhZ2VfZGlydHkoKS4KKwkJICogSG93ZXZlciwg
bm93IHRoZSBwYWdlIGlzIGdvaW5nIHRvIGdldCB3cml0dGVuIGJhY2ssCisJCSAqIHdoaWNoIG1l
ZXRzIHRoZSBvcmlnaW5hbCBpbnRlbnRpb24gb2Ygc2V0dGluZyBpdAorCQkgKiBkaXJ0eSwgc28g
YWxsIGlzIHdlbGw6IGNsZWFyX3BhZ2VfZGlydHlfZm9yX2lvKCkgZ29lcworCQkgKiBvbiB0byBj
YWxsIFRlc3RDbGVhclBhZ2VEaXJ0eSgpLCBhbmQgd3JpdGUgdGhlIHBhZ2UKKwkJICogYmFjay4K
KwkJICoKKwkJICogMikgVGhpcyBjb2RlIHNlZXMgdGhlIHBhZ2UgYXMgY2xlYW4sIHNvIGl0IGNh
bGxzCisJCSAqIHNldF9wYWdlX2RpcnR5KCkuIFRoZSBwYWdlIHN0YXlzIGRpcnR5LCBkZXNwaXRl
IGJlaW5nCisJCSAqIHdyaXR0ZW4gYmFjaywgc28gaXQgZ2V0cyB3cml0dGVuIGJhY2sgYWdhaW4g
aW4gdGhlCisJCSAqIG5leHQgd3JpdGViYWNrIGN5Y2xlLiBUaGlzIGlzIGhhcm1sZXNzLgorCQkg
Ki8KKwkJaWYgKCFQYWdlRGlydHkocGFnZSkpCisJCQlzZXRfcGFnZV9kaXJ0eV9sb2NrKHBhZ2Up
OworCQlwdXRfdXNlcl9wYWdlKHBhZ2UpOworCX0KIH0KIEVYUE9SVF9TWU1CT0wocHV0X3VzZXJf
cGFnZXNfZGlydHlfbG9jayk7CiAKLS0gCjIuMjIuMAoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vZHJpLWRldmVs
