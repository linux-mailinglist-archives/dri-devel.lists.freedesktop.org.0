Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E7D37BDD7A
	for <lists+dri-devel@lfdr.de>; Wed, 25 Sep 2019 13:56:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A2D3289708;
	Wed, 25 Sep 2019 11:56:24 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from pio-pvt-msa1.bahnhof.se (pio-pvt-msa1.bahnhof.se [79.136.2.40])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2F88789708
 for <dri-devel@lists.freedesktop.org>; Wed, 25 Sep 2019 11:56:23 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by pio-pvt-msa1.bahnhof.se (Postfix) with ESMTP id 6102A3F715;
 Wed, 25 Sep 2019 13:56:21 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at bahnhof.se
X-Spam-Flag: NO
X-Spam-Score: -2.099
X-Spam-Level: 
X-Spam-Status: No, score=-2.099 tagged_above=-999 required=6.31
 tests=[BAYES_00=-1.9, DKIM_SIGNED=0.1, DKIM_VALID=-0.1,
 DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1, URIBL_BLOCKED=0.001]
 autolearn=ham autolearn_force=no
Received: from pio-pvt-msa1.bahnhof.se ([127.0.0.1])
 by localhost (pio-pvt-msa1.bahnhof.se [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 1enIqYpSZ4Y8; Wed, 25 Sep 2019 13:56:20 +0200 (CEST)
Received: from mail1.shipmail.org (h-205-35.A357.priv.bahnhof.se
 [155.4.205.35]) (Authenticated sender: mb878879)
 by pio-pvt-msa1.bahnhof.se (Postfix) with ESMTPA id AD7093F675;
 Wed, 25 Sep 2019 13:56:19 +0200 (CEST)
Received: from localhost.localdomain (h-205-35.A357.priv.bahnhof.se
 [155.4.205.35])
 by mail1.shipmail.org (Postfix) with ESMTPSA id 588EB360020;
 Wed, 25 Sep 2019 13:56:19 +0200 (CEST)
Subject: Re: [PATCH 3/3] drm/ttm: remove pointers to globals
To: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>,
 kraxel@redhat.com, daniel@ffwll.ch, dri-devel@lists.freedesktop.org
References: <20190925105530.2261-1-christian.koenig@amd.com>
 <20190925105530.2261-3-christian.koenig@amd.com>
From: =?UTF-8?Q?Thomas_Hellstr=c3=b6m_=28VMware=29?= <thomas_os@shipmail.org>
Organization: VMware Inc.
Message-ID: <10310c82-fe7c-0a15-d037-245cf1fd6756@shipmail.org>
Date: Wed, 25 Sep 2019 13:56:19 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <20190925105530.2261-3-christian.koenig@amd.com>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=shipmail.org; s=mail; 
 t=1569412579; bh=NWd5lukM5Eb7WIQnwY0Epcfhk92ThH62ak+CQnARufE=;
 h=Subject:To:References:From:Date:In-Reply-To:From;
 b=UoX0B/uFGBNBLAHR5M6X7cYR/hu6LJc6reL4JGqRfJIzaK3J/eX1YPrUItcva3RPF
 2vqi2Y9VCeibF+iL+RbUmzQGudHLuV1Oc+3KW3b/7w7RIoJjruUg2h4mP/pQatOmY+
 cdAQta9n1WuLeGiVVLRqbdtCUN/gfCHnXcHhr7hI=
X-Mailman-Original-Authentication-Results: pio-pvt-msa1.bahnhof.se;
 dkim=pass (1024-bit key;
 unprotected) header.d=shipmail.org header.i=@shipmail.org header.b="UoX0B/uF";
 dkim-atps=neutral
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gOS8yNS8xOSAxMjo1NSBQTSwgQ2hyaXN0aWFuIEvDtm5pZyB3cm90ZToKPiBBcyB0aGUgbmFt
ZSBzYXlzIGdsb2JhbCBtZW1vcnkgYW5kIGJvIGFjY291bnRpbmcgaXMgZ2xvYmFsLiBTbyBpdCBk
b2Vzbid0Cj4gbWFrZSB0byBtdWNoIHNlbnNlIGhhdmluZyBwb2ludGVycyB0byBnbG9iYWwgc3Ry
dWN0dXJlcyBhbGwgYXJvdW5kIHRoZSBjb2RlLgo+Cj4gU2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFu
IEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPgo+IC0tLQo+ICAgZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dhcnQuYyB8ICAyICstCj4gICBkcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdm0uYyAgIHwgIDkgKystLQo+ICAgZHJpdmVycy9ncHUvZHJtL2Ry
bV9nZW1fdnJhbV9oZWxwZXIuYyAgICB8ICA1ICstCj4gICBkcml2ZXJzL2dwdS9kcm0vcXhsL3F4
bF9yZWxlYXNlLmMgICAgICAgIHwgIDcgKy0tCj4gICBkcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF90
dG0uYyAgICAgICAgICAgIHwgIDcgKy0tCj4gICBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9hZ3Bf
YmFja2VuZC5jICAgIHwgIDIgKy0KPiAgIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMgICAg
ICAgICAgICAgfCA2NSArKysrKysrKysrKy0tLS0tLS0tLS0tLS0KPiAgIGRyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2JvX3V0aWwuYyAgICAgICAgfCAgMiArLQo+ICAgZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fYm9fdm0uYyAgICAgICAgICB8ICA0ICstCj4gICBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0
bV9leGVjYnVmX3V0aWwuYyAgIHwgMjUgKysrLS0tLS0tCj4gICBkcml2ZXJzL2dwdS9kcm0vdHRt
L3R0bV9tZW1vcnkuYyAgICAgICAgIHwgIDIgKy0KPiAgIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRt
X3BhZ2VfYWxsb2MuYyAgICAgfCAgNCArLQo+ICAgZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fcGFn
ZV9hbGxvY19kbWEuYyB8ICA0ICstCj4gICBpbmNsdWRlL2RybS90dG0vdHRtX2JvX2RyaXZlci5o
ICAgICAgICAgIHwgIDYgKy0tCj4gICBpbmNsdWRlL2RybS90dG0vdHRtX21lbW9yeS5oICAgICAg
ICAgICAgIHwgIDEgLQo+ICAgMTUgZmlsZXMgY2hhbmdlZCwgNTcgaW5zZXJ0aW9ucygrKSwgODgg
ZGVsZXRpb25zKC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2dhcnQuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nYXJ0LmMK
PiBpbmRleCBkNzlhYjFkYTllMDcuLmMzOTJmNzY3MmUwNiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ2FydC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X2dhcnQuYwo+IEBAIC03MSw3ICs3MSw3IEBACj4gICAgKi8KPiAg
IHN0YXRpYyBpbnQgYW1kZ3B1X2dhcnRfZHVtbXlfcGFnZV9pbml0KHN0cnVjdCBhbWRncHVfZGV2
aWNlICphZGV2KQo+ICAgewo+IC0Jc3RydWN0IHBhZ2UgKmR1bW15X3BhZ2UgPSBhZGV2LT5tbWFu
LmJkZXYuZ2xvYi0+ZHVtbXlfcmVhZF9wYWdlOwo+ICsJc3RydWN0IHBhZ2UgKmR1bW15X3BhZ2Ug
PSB0dG1fYm9fZ2xvYi5kdW1teV9yZWFkX3BhZ2U7Cj4gICAKPiAgIAlpZiAoYWRldi0+ZHVtbXlf
cGFnZV9hZGRyKQo+ICAgCQlyZXR1cm4gMDsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfdm0uYwo+IGluZGV4IGY1NTU4NDNkYWVmMC4uY2NhMTg4NzQ2NWE0IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMKPiBAQCAtNjAwLDIxICs2MDAsMjAgQEAgdm9p
ZCBhbWRncHVfdm1fZGVsX2Zyb21fbHJ1X25vdGlmeShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3Qg
KmJvKQo+ICAgdm9pZCBhbWRncHVfdm1fbW92ZV90b19scnVfdGFpbChzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldiwKPiAgIAkJCQlzdHJ1Y3QgYW1kZ3B1X3ZtICp2bSkKPiAgIHsKPiAtCXN0cnVj
dCB0dG1fYm9fZ2xvYmFsICpnbG9iID0gYWRldi0+bW1hbi5iZGV2Lmdsb2I7Cj4gICAJc3RydWN0
IGFtZGdwdV92bV9ib19iYXNlICpib19iYXNlOwo+ICAgCj4gICAjaWYgMAo+ICAgCWlmICh2bS0+
YnVsa19tb3ZlYWJsZSkgewo+IC0JCXNwaW5fbG9jaygmZ2xvYi0+bHJ1X2xvY2spOwo+ICsJCXNw
aW5fbG9jaygmdHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCQl0dG1fYm9fYnVsa19tb3ZlX2xy
dV90YWlsKCZ2bS0+bHJ1X2J1bGtfbW92ZSk7Cj4gLQkJc3Bpbl91bmxvY2soJmdsb2ItPmxydV9s
b2NrKTsKPiArCQlzcGluX3VubG9jaygmdHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCQlyZXR1
cm47Cj4gICAJfQo+ICAgI2VuZGlmCj4gICAKPiAgIAltZW1zZXQoJnZtLT5scnVfYnVsa19tb3Zl
LCAwLCBzaXplb2Yodm0tPmxydV9idWxrX21vdmUpKTsKPiAgIAo+IC0Jc3Bpbl9sb2NrKCZnbG9i
LT5scnVfbG9jayk7Cj4gKwlzcGluX2xvY2soJnR0bV9ib19nbG9iLmxydV9sb2NrKTsKPiAgIAls
aXN0X2Zvcl9lYWNoX2VudHJ5KGJvX2Jhc2UsICZ2bS0+aWRsZSwgdm1fc3RhdHVzKSB7Cj4gICAJ
CXN0cnVjdCBhbWRncHVfYm8gKmJvID0gYm9fYmFzZS0+Ym87Cj4gICAKPiBAQCAtNjI2LDcgKzYy
NSw3IEBAIHZvaWQgYW1kZ3B1X3ZtX21vdmVfdG9fbHJ1X3RhaWwoc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYsCj4gICAJCQl0dG1fYm9fbW92ZV90b19scnVfdGFpbCgmYm8tPnNoYWRvdy0+dGJv
LAo+ICAgCQkJCQkJJnZtLT5scnVfYnVsa19tb3ZlKTsKPiAgIAl9Cj4gLQlzcGluX3VubG9jaygm
Z2xvYi0+bHJ1X2xvY2spOwo+ICsJc3Bpbl91bmxvY2soJnR0bV9ib19nbG9iLmxydV9sb2NrKTsK
PiAgIAo+ICAgCXZtLT5idWxrX21vdmVhYmxlID0gdHJ1ZTsKPiAgIH0KPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9k
cm1fZ2VtX3ZyYW1faGVscGVyLmMKPiBpbmRleCA0OTU4OGRlODg5NTkuLjM2OTUxNjgyMDZiNSAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5jCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYwo+IEBAIC04OTYsMTIgKzg5
NiwxMSBAQCBzdGF0aWMgaW50IGRybV92cmFtX21tX2RlYnVnZnMoc3RydWN0IHNlcV9maWxlICpt
LCB2b2lkICpkYXRhKQo+ICAgCXN0cnVjdCBkcm1faW5mb19ub2RlICpub2RlID0gKHN0cnVjdCBk
cm1faW5mb19ub2RlICopIG0tPnByaXZhdGU7Cj4gICAJc3RydWN0IGRybV92cmFtX21tICp2bW0g
PSBub2RlLT5taW5vci0+ZGV2LT52cmFtX21tOwo+ICAgCXN0cnVjdCBkcm1fbW0gKm1tID0gdm1t
LT5iZGV2Lm1hbltUVE1fUExfVlJBTV0ucHJpdjsKPiAtCXN0cnVjdCB0dG1fYm9fZ2xvYmFsICpn
bG9iID0gdm1tLT5iZGV2Lmdsb2I7Cj4gICAJc3RydWN0IGRybV9wcmludGVyIHAgPSBkcm1fc2Vx
X2ZpbGVfcHJpbnRlcihtKTsKPiAgIAo+IC0Jc3Bpbl9sb2NrKCZnbG9iLT5scnVfbG9jayk7Cj4g
KwlzcGluX2xvY2soJnR0bV9ib19nbG9iLmxydV9sb2NrKTsKPiAgIAlkcm1fbW1fcHJpbnQobW0s
ICZwKTsKPiAtCXNwaW5fdW5sb2NrKCZnbG9iLT5scnVfbG9jayk7Cj4gKwlzcGluX3VubG9jaygm
dHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCXJldHVybiAwOwo+ICAgfQo+ICAgCj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3JlbGVhc2UuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9xeGwvcXhsX3JlbGVhc2UuYwo+IGluZGV4IDcxZjFiNTFhMTM1MC4uYTBkMzg4YjdiNTNiIDEw
MDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3JlbGVhc2UuYwo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9xeGwvcXhsX3JlbGVhc2UuYwo+IEBAIC00MjksNyArNDI5LDYgQEAgdm9p
ZCBxeGxfcmVsZWFzZV91bm1hcChzdHJ1Y3QgcXhsX2RldmljZSAqcWRldiwKPiAgIHZvaWQgcXhs
X3JlbGVhc2VfZmVuY2VfYnVmZmVyX29iamVjdHMoc3RydWN0IHF4bF9yZWxlYXNlICpyZWxlYXNl
KQo+ICAgewo+ICAgCXN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm87Cj4gLQlzdHJ1Y3QgdHRt
X2JvX2dsb2JhbCAqZ2xvYjsKPiAgIAlzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldjsKPiAgIAlz
dHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZlciAqZW50cnk7Cj4gICAJc3RydWN0IHF4bF9kZXZpY2Ug
KnFkZXY7Cj4gQEAgLTQ1MSw5ICs0NTAsNyBAQCB2b2lkIHF4bF9yZWxlYXNlX2ZlbmNlX2J1ZmZl
cl9vYmplY3RzKHN0cnVjdCBxeGxfcmVsZWFzZSAqcmVsZWFzZSkKPiAgIAkJICAgICAgIHJlbGVh
c2UtPmlkIHwgMHhmMDAwMDAwMCwgcmVsZWFzZS0+YmFzZS5zZXFubyk7Cj4gICAJdHJhY2VfZG1h
X2ZlbmNlX2VtaXQoJnJlbGVhc2UtPmJhc2UpOwo+ICAgCj4gLQlnbG9iID0gYmRldi0+Z2xvYjsK
PiAtCj4gLQlzcGluX2xvY2soJmdsb2ItPmxydV9sb2NrKTsKPiArCXNwaW5fbG9jaygmdHRtX2Jv
X2dsb2IubHJ1X2xvY2spOwo+ICAgCj4gICAJbGlzdF9mb3JfZWFjaF9lbnRyeShlbnRyeSwgJnJl
bGVhc2UtPmJvcywgaGVhZCkgewo+ICAgCQlibyA9IGVudHJ5LT5ibzsKPiBAQCAtNDYyLDcgKzQ1
OSw3IEBAIHZvaWQgcXhsX3JlbGVhc2VfZmVuY2VfYnVmZmVyX29iamVjdHMoc3RydWN0IHF4bF9y
ZWxlYXNlICpyZWxlYXNlKQo+ICAgCQl0dG1fYm9fbW92ZV90b19scnVfdGFpbChibywgTlVMTCk7
Cj4gICAJCWRtYV9yZXN2X3VubG9jayhiby0+YmFzZS5yZXN2KTsKPiAgIAl9Cj4gLQlzcGluX3Vu
bG9jaygmZ2xvYi0+bHJ1X2xvY2spOwo+ICsJc3Bpbl91bmxvY2soJnR0bV9ib19nbG9iLmxydV9s
b2NrKTsKPiAgIAlkbWFfcmVzdl9jdHhfZmluaSgmcmVsZWFzZS0+dGlja2V0KTsKPiAgIH0KPiAg
IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF90dG0uYyBiL2RyaXZlcnMv
Z3B1L2RybS9xeGwvcXhsX3R0bS5jCj4gaW5kZXggY2JjNmMyYmE4NjMwLi44ZDc3OWNhMjY4MmEg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfdHRtLmMKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vcXhsL3F4bF90dG0uYwo+IEBAIC0zNjksMTQgKzM2OSwxMSBAQCBzdGF0aWMg
aW50IHF4bF9tbV9kdW1wX3RhYmxlKHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqZGF0YSkKPiAg
IHsKPiAgIAlzdHJ1Y3QgZHJtX2luZm9fbm9kZSAqbm9kZSA9IChzdHJ1Y3QgZHJtX2luZm9fbm9k
ZSAqKW0tPnByaXZhdGU7Cj4gICAJc3RydWN0IGRybV9tbSAqbW0gPSAoc3RydWN0IGRybV9tbSAq
KW5vZGUtPmluZm9fZW50LT5kYXRhOwo+IC0Jc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IG5vZGUt
Pm1pbm9yLT5kZXY7Cj4gLQlzdHJ1Y3QgcXhsX2RldmljZSAqcmRldiA9IGRldi0+ZGV2X3ByaXZh
dGU7Cj4gLQlzdHJ1Y3QgdHRtX2JvX2dsb2JhbCAqZ2xvYiA9IHJkZXYtPm1tYW4uYmRldi5nbG9i
Owo+ICAgCXN0cnVjdCBkcm1fcHJpbnRlciBwID0gZHJtX3NlcV9maWxlX3ByaW50ZXIobSk7Cj4g
ICAKPiAtCXNwaW5fbG9jaygmZ2xvYi0+bHJ1X2xvY2spOwo+ICsJc3Bpbl9sb2NrKCZ0dG1fYm9f
Z2xvYi5scnVfbG9jayk7Cj4gICAJZHJtX21tX3ByaW50KG1tLCAmcCk7Cj4gLQlzcGluX3VubG9j
aygmZ2xvYi0+bHJ1X2xvY2spOwo+ICsJc3Bpbl91bmxvY2soJnR0bV9ib19nbG9iLmxydV9sb2Nr
KTsKPiAgIAlyZXR1cm4gMDsKPiAgIH0KPiAgICNlbmRpZgo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vdHRtL3R0bV9hZ3BfYmFja2VuZC5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1f
YWdwX2JhY2tlbmQuYwo+IGluZGV4IGVhNGQ1OWViODk2Ni4uNjA1MGRjODQ2ODk0IDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2FncF9iYWNrZW5kLmMKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vdHRtL3R0bV9hZ3BfYmFja2VuZC5jCj4gQEAgLTUxLDcgKzUxLDcgQEAgc3Ry
dWN0IHR0bV9hZ3BfYmFja2VuZCB7Cj4gICBzdGF0aWMgaW50IHR0bV9hZ3BfYmluZChzdHJ1Y3Qg
dHRtX3R0ICp0dG0sIHN0cnVjdCB0dG1fbWVtX3JlZyAqYm9fbWVtKQo+ICAgewo+ICAgCXN0cnVj
dCB0dG1fYWdwX2JhY2tlbmQgKmFncF9iZSA9IGNvbnRhaW5lcl9vZih0dG0sIHN0cnVjdCB0dG1f
YWdwX2JhY2tlbmQsIHR0bSk7Cj4gLQlzdHJ1Y3QgcGFnZSAqZHVtbXlfcmVhZF9wYWdlID0gdHRt
LT5iZGV2LT5nbG9iLT5kdW1teV9yZWFkX3BhZ2U7Cj4gKwlzdHJ1Y3QgcGFnZSAqZHVtbXlfcmVh
ZF9wYWdlID0gdHRtX2JvX2dsb2IuZHVtbXlfcmVhZF9wYWdlOwo+ICAgCXN0cnVjdCBkcm1fbW1f
bm9kZSAqbm9kZSA9IGJvX21lbS0+bW1fbm9kZTsKPiAgIAlzdHJ1Y3QgYWdwX21lbW9yeSAqbWVt
Owo+ICAgCWludCByZXQsIGNhY2hlZCA9IChib19tZW0tPnBsYWNlbWVudCAmIFRUTV9QTF9GTEFH
X0NBQ0hFRCk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMgYi9k
cml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCj4gaW5kZXggYWI5OTY3Yjg0ZTBiLi41N2NiNzc4
MTFkZDUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYwo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKPiBAQCAtNTEsNiArNTEsNyBAQCBzdGF0aWMg
dm9pZCB0dG1fYm9fZ2xvYmFsX2tvYmpfcmVsZWFzZShzdHJ1Y3Qga29iamVjdCAqa29iaik7Cj4g
ICBERUZJTkVfTVVURVgodHRtX2dsb2JhbF9tdXRleCk7Cj4gICB1bnNpZ25lZCB0dG1fYm9fZ2xv
Yl91c2VfY291bnQ7Cj4gICBzdHJ1Y3QgdHRtX2JvX2dsb2JhbCB0dG1fYm9fZ2xvYjsKPiArRVhQ
T1JUX1NZTUJPTCh0dG1fYm9fZ2xvYik7Cj4gICAKPiAgIHN0YXRpYyBzdHJ1Y3QgYXR0cmlidXRl
IHR0bV9ib19jb3VudCA9IHsKPiAgIAkubmFtZSA9ICJib19jb3VudCIsCj4gQEAgLTE0OCw3ICsx
NDksNiBAQCBzdGF0aWMgdm9pZCB0dG1fYm9fcmVsZWFzZV9saXN0KHN0cnVjdCBrcmVmICpsaXN0
X2tyZWYpCj4gICB7Cj4gICAJc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibyA9Cj4gICAJICAg
IGNvbnRhaW5lcl9vZihsaXN0X2tyZWYsIHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCwgbGlzdF9r
cmVmKTsKPiAtCXN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2ID0gYm8tPmJkZXY7Cj4gICAJc2l6
ZV90IGFjY19zaXplID0gYm8tPmFjY19zaXplOwo+ICAgCj4gICAJQlVHX09OKGtyZWZfcmVhZCgm
Ym8tPmxpc3Rfa3JlZikpOwo+IEBAIC0xNTgsMTMgKzE1OCwxMyBAQCBzdGF0aWMgdm9pZCB0dG1f
Ym9fcmVsZWFzZV9saXN0KHN0cnVjdCBrcmVmICpsaXN0X2tyZWYpCj4gICAJQlVHX09OKCFsaXN0
X2VtcHR5KCZiby0+bHJ1KSk7Cj4gICAJQlVHX09OKCFsaXN0X2VtcHR5KCZiby0+ZGRlc3Ryb3kp
KTsKPiAgIAl0dG1fdHRfZGVzdHJveShiby0+dHRtKTsKPiAtCWF0b21pY19kZWMoJmJvLT5iZGV2
LT5nbG9iLT5ib19jb3VudCk7Cj4gKwlhdG9taWNfZGVjKCZ0dG1fYm9fZ2xvYi5ib19jb3VudCk7
Cj4gICAJZG1hX2ZlbmNlX3B1dChiby0+bW92aW5nKTsKPiAgIAlpZiAoIXR0bV9ib191c2VzX2Vt
YmVkZGVkX2dlbV9vYmplY3QoYm8pKQo+ICAgCQlkbWFfcmVzdl9maW5pKCZiby0+YmFzZS5fcmVz
dik7Cj4gICAJbXV0ZXhfZGVzdHJveSgmYm8tPnd1X211dGV4KTsKPiAgIAliby0+ZGVzdHJveShi
byk7Cj4gLQl0dG1fbWVtX2dsb2JhbF9mcmVlKGJkZXYtPmdsb2ItPm1lbV9nbG9iLCBhY2Nfc2l6
ZSk7Cj4gKwl0dG1fbWVtX2dsb2JhbF9mcmVlKCZ0dG1fbWVtX2dsb2IsIGFjY19zaXplKTsKPiAg
IH0KPiAgIAo+ICAgc3RhdGljIHZvaWQgdHRtX2JvX2FkZF9tZW1fdG9fbHJ1KHN0cnVjdCB0dG1f
YnVmZmVyX29iamVjdCAqYm8sCj4gQEAgLTE4Nyw3ICsxODcsNyBAQCBzdGF0aWMgdm9pZCB0dG1f
Ym9fYWRkX21lbV90b19scnUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKPiAgIAo+ICAg
CWlmIChiby0+dHRtICYmICEoYm8tPnR0bS0+cGFnZV9mbGFncyAmCj4gICAJCQkgKFRUTV9QQUdF
X0ZMQUdfU0cgfCBUVE1fUEFHRV9GTEFHX1NXQVBQRUQpKSkgewo+IC0JCWxpc3RfYWRkX3RhaWwo
JmJvLT5zd2FwLCAmYmRldi0+Z2xvYi0+c3dhcF9scnVbYm8tPnByaW9yaXR5XSk7Cj4gKwkJbGlz
dF9hZGRfdGFpbCgmYm8tPnN3YXAsICZ0dG1fYm9fZ2xvYi5zd2FwX2xydVtiby0+cHJpb3JpdHld
KTsKPiAgIAkJa3JlZl9nZXQoJmJvLT5saXN0X2tyZWYpOwo+ICAgCX0KPiAgIH0KPiBAQCAtMjk0
LDcgKzI5NCw3IEBAIHZvaWQgdHRtX2JvX2J1bGtfbW92ZV9scnVfdGFpbChzdHJ1Y3QgdHRtX2xy
dV9idWxrX21vdmUgKmJ1bGspCj4gICAJCWRtYV9yZXN2X2Fzc2VydF9oZWxkKHBvcy0+Zmlyc3Qt
PmJhc2UucmVzdik7Cj4gICAJCWRtYV9yZXN2X2Fzc2VydF9oZWxkKHBvcy0+bGFzdC0+YmFzZS5y
ZXN2KTsKPiAgIAo+IC0JCWxydSA9ICZwb3MtPmZpcnN0LT5iZGV2LT5nbG9iLT5zd2FwX2xydVtp
XTsKPiArCQlscnUgPSAmdHRtX2JvX2dsb2Iuc3dhcF9scnVbaV07Cj4gICAJCWxpc3RfYnVsa19t
b3ZlX3RhaWwobHJ1LCAmcG9zLT5maXJzdC0+c3dhcCwgJnBvcy0+bGFzdC0+c3dhcCk7Cj4gICAJ
fQo+ICAgfQo+IEBAIC00NTgsNyArNDU4LDYgQEAgc3RhdGljIHZvaWQgdHRtX2JvX2ZsdXNoX2Fs
bF9mZW5jZXMoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibykKPiAgIHN0YXRpYyB2b2lkIHR0
bV9ib19jbGVhbnVwX3JlZnNfb3JfcXVldWUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibykK
PiAgIHsKPiAgIAlzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldiA9IGJvLT5iZGV2Owo+IC0Jc3Ry
dWN0IHR0bV9ib19nbG9iYWwgKmdsb2IgPSBiZGV2LT5nbG9iOwo+ICAgCWludCByZXQ7Cj4gICAK
PiAgIAlyZXQgPSB0dG1fYm9faW5kaXZpZHVhbGl6ZV9yZXN2KGJvKTsKPiBAQCAtNDY4LDE2ICs0
NjcsMTYgQEAgc3RhdGljIHZvaWQgdHRtX2JvX2NsZWFudXBfcmVmc19vcl9xdWV1ZShzdHJ1Y3Qg
dHRtX2J1ZmZlcl9vYmplY3QgKmJvKQo+ICAgCQkgKi8KPiAgIAkJZG1hX3Jlc3Zfd2FpdF90aW1l
b3V0X3JjdShiby0+YmFzZS5yZXN2LCB0cnVlLCBmYWxzZSwKPiAgIAkJCQkJCSAgICAzMCAqIEha
KTsKPiAtCQlzcGluX2xvY2soJmdsb2ItPmxydV9sb2NrKTsKPiArCQlzcGluX2xvY2soJnR0bV9i
b19nbG9iLmxydV9sb2NrKTsKPiAgIAkJZ290byBlcnJvcjsKPiAgIAl9Cj4gICAKPiAtCXNwaW5f
bG9jaygmZ2xvYi0+bHJ1X2xvY2spOwo+ICsJc3Bpbl9sb2NrKCZ0dG1fYm9fZ2xvYi5scnVfbG9j
ayk7Cj4gICAJcmV0ID0gZG1hX3Jlc3ZfdHJ5bG9jayhiby0+YmFzZS5yZXN2KSA/IDAgOiAtRUJV
U1k7Cj4gICAJaWYgKCFyZXQpIHsKPiAgIAkJaWYgKGRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWRfcmN1
KCZiby0+YmFzZS5fcmVzdiwgdHJ1ZSkpIHsKPiAgIAkJCXR0bV9ib19kZWxfZnJvbV9scnUoYm8p
Owo+IC0JCQlzcGluX3VubG9jaygmZ2xvYi0+bHJ1X2xvY2spOwo+ICsJCQlzcGluX3VubG9jaygm
dHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCQkJaWYgKGJvLT5iYXNlLnJlc3YgIT0gJmJvLT5i
YXNlLl9yZXN2KQo+ICAgCQkJCWRtYV9yZXN2X3VubG9jaygmYm8tPmJhc2UuX3Jlc3YpOwo+ICAg
Cj4gQEAgLTUwNiw3ICs1MDUsNyBAQCBzdGF0aWMgdm9pZCB0dG1fYm9fY2xlYW51cF9yZWZzX29y
X3F1ZXVlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8pCj4gICBlcnJvcjoKPiAgIAlrcmVm
X2dldCgmYm8tPmxpc3Rfa3JlZik7Cj4gICAJbGlzdF9hZGRfdGFpbCgmYm8tPmRkZXN0cm95LCAm
YmRldi0+ZGRlc3Ryb3kpOwo+IC0Jc3Bpbl91bmxvY2soJmdsb2ItPmxydV9sb2NrKTsKPiArCXNw
aW5fdW5sb2NrKCZ0dG1fYm9fZ2xvYi5scnVfbG9jayk7Cj4gICAKPiAgIAlzY2hlZHVsZV9kZWxh
eWVkX3dvcmsoJmJkZXYtPndxLAo+ICAgCQkJICAgICAgKChIWiAvIDEwMCkgPCAxKSA/IDEgOiBI
WiAvIDEwMCk7Cj4gQEAgLTUyOSw3ICs1MjgsNiBAQCBzdGF0aWMgaW50IHR0bV9ib19jbGVhbnVw
X3JlZnMoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKPiAgIAkJCSAgICAgICBib29sIGlu
dGVycnVwdGlibGUsIGJvb2wgbm9fd2FpdF9ncHUsCj4gICAJCQkgICAgICAgYm9vbCB1bmxvY2tf
cmVzdikKPiAgIHsKPiAtCXN0cnVjdCB0dG1fYm9fZ2xvYmFsICpnbG9iID0gYm8tPmJkZXYtPmds
b2I7Cj4gICAJc3RydWN0IGRtYV9yZXN2ICpyZXN2Owo+ICAgCWludCByZXQ7Cj4gICAKPiBAQCAt
NTQ4LDcgKzU0Niw3IEBAIHN0YXRpYyBpbnQgdHRtX2JvX2NsZWFudXBfcmVmcyhzdHJ1Y3QgdHRt
X2J1ZmZlcl9vYmplY3QgKmJvLAo+ICAgCj4gICAJCWlmICh1bmxvY2tfcmVzdikKPiAgIAkJCWRt
YV9yZXN2X3VubG9jayhiby0+YmFzZS5yZXN2KTsKPiAtCQlzcGluX3VubG9jaygmZ2xvYi0+bHJ1
X2xvY2spOwo+ICsJCXNwaW5fdW5sb2NrKCZ0dG1fYm9fZ2xvYi5scnVfbG9jayk7Cj4gICAKPiAg
IAkJbHJldCA9IGRtYV9yZXN2X3dhaXRfdGltZW91dF9yY3UocmVzdiwgdHJ1ZSwKPiAgIAkJCQkJ
CQkgICBpbnRlcnJ1cHRpYmxlLAo+IEBAIC01NTksNyArNTU3LDcgQEAgc3RhdGljIGludCB0dG1f
Ym9fY2xlYW51cF9yZWZzKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCj4gICAJCWVsc2Ug
aWYgKGxyZXQgPT0gMCkKPiAgIAkJCXJldHVybiAtRUJVU1k7Cj4gICAKPiAtCQlzcGluX2xvY2so
Jmdsb2ItPmxydV9sb2NrKTsKPiArCQlzcGluX2xvY2soJnR0bV9ib19nbG9iLmxydV9sb2NrKTsK
PiAgIAkJaWYgKHVubG9ja19yZXN2ICYmICFkbWFfcmVzdl90cnlsb2NrKGJvLT5iYXNlLnJlc3Yp
KSB7Cj4gICAJCQkvKgo+ICAgCQkJICogV2UgcmFjZWQsIGFuZCBsb3N0LCBzb21lb25lIGVsc2Ug
aG9sZHMgdGhlIHJlc2VydmF0aW9uIG5vdywKPiBAQCAtNTY5LDcgKzU2Nyw3IEBAIHN0YXRpYyBp
bnQgdHRtX2JvX2NsZWFudXBfcmVmcyhzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+ICAg
CQkJICogZGVsYXllZCBkZXN0cnVjdGlvbiB3b3VsZCBzdWNjZWVkLCBzbyBqdXN0IHJldHVybiBz
dWNjZXNzCj4gICAJCQkgKiBoZXJlLgo+ICAgCQkJICovCj4gLQkJCXNwaW5fdW5sb2NrKCZnbG9i
LT5scnVfbG9jayk7Cj4gKwkJCXNwaW5fdW5sb2NrKCZ0dG1fYm9fZ2xvYi5scnVfbG9jayk7Cj4g
ICAJCQlyZXR1cm4gMDsKPiAgIAkJfQo+ICAgCQlyZXQgPSAwOwo+IEBAIC01NzgsNyArNTc2LDcg
QEAgc3RhdGljIGludCB0dG1fYm9fY2xlYW51cF9yZWZzKHN0cnVjdCB0dG1fYnVmZmVyX29iamVj
dCAqYm8sCj4gICAJaWYgKHJldCB8fCB1bmxpa2VseShsaXN0X2VtcHR5KCZiby0+ZGRlc3Ryb3kp
KSkgewo+ICAgCQlpZiAodW5sb2NrX3Jlc3YpCj4gICAJCQlkbWFfcmVzdl91bmxvY2soYm8tPmJh
c2UucmVzdik7Cj4gLQkJc3Bpbl91bmxvY2soJmdsb2ItPmxydV9sb2NrKTsKPiArCQlzcGluX3Vu
bG9jaygmdHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCQlyZXR1cm4gcmV0Owo+ICAgCX0KPiAg
IAo+IEBAIC01ODYsNyArNTg0LDcgQEAgc3RhdGljIGludCB0dG1fYm9fY2xlYW51cF9yZWZzKHN0
cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCj4gICAJbGlzdF9kZWxfaW5pdCgmYm8tPmRkZXN0
cm95KTsKPiAgIAlrcmVmX3B1dCgmYm8tPmxpc3Rfa3JlZiwgdHRtX2JvX3JlZl9idWcpOwo+ICAg
Cj4gLQlzcGluX3VubG9jaygmZ2xvYi0+bHJ1X2xvY2spOwo+ICsJc3Bpbl91bmxvY2soJnR0bV9i
b19nbG9iLmxydV9sb2NrKTsKPiAgIAl0dG1fYm9fY2xlYW51cF9tZW10eXBlX3VzZShibyk7Cj4g
ICAKPiAgIAlpZiAodW5sb2NrX3Jlc3YpCj4gQEAgLTYwMSw3ICs1OTksNyBAQCBzdGF0aWMgaW50
IHR0bV9ib19jbGVhbnVwX3JlZnMoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKPiAgICAq
Lwo+ICAgc3RhdGljIGJvb2wgdHRtX2JvX2RlbGF5ZWRfZGVsZXRlKHN0cnVjdCB0dG1fYm9fZGV2
aWNlICpiZGV2LCBib29sIHJlbW92ZV9hbGwpCj4gICB7Cj4gLQlzdHJ1Y3QgdHRtX2JvX2dsb2Jh
bCAqZ2xvYiA9IGJkZXYtPmdsb2I7Cj4gKwlzdHJ1Y3QgdHRtX2JvX2dsb2JhbCAqZ2xvYiA9ICZ0
dG1fYm9fZ2xvYjsKPiAgIAlzdHJ1Y3QgbGlzdF9oZWFkIHJlbW92ZWQ7Cj4gICAJYm9vbCBlbXB0
eTsKPiAgIAo+IEBAIC04MjIsMTMgKzgyMCwxMiBAQCBzdGF0aWMgaW50IHR0bV9tZW1fZXZpY3Rf
Zmlyc3Qoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCj4gICAJCQkgICAgICAgc3RydWN0IHd3
X2FjcXVpcmVfY3R4ICp0aWNrZXQpCj4gICB7Cj4gICAJc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0
ICpibyA9IE5VTEwsICpidXN5X2JvID0gTlVMTDsKPiAtCXN0cnVjdCB0dG1fYm9fZ2xvYmFsICpn
bG9iID0gYmRldi0+Z2xvYjsKPiAgIAlzdHJ1Y3QgdHRtX21lbV90eXBlX21hbmFnZXIgKm1hbiA9
ICZiZGV2LT5tYW5bbWVtX3R5cGVdOwo+ICAgCWJvb2wgbG9ja2VkID0gZmFsc2U7Cj4gICAJdW5z
aWduZWQgaTsKPiAgIAlpbnQgcmV0Owo+ICAgCj4gLQlzcGluX2xvY2soJmdsb2ItPmxydV9sb2Nr
KTsKPiArCXNwaW5fbG9jaygmdHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCWZvciAoaSA9IDA7
IGkgPCBUVE1fTUFYX0JPX1BSSU9SSVRZOyArK2kpIHsKPiAgIAkJbGlzdF9mb3JfZWFjaF9lbnRy
eShibywgJm1hbi0+bHJ1W2ldLCBscnUpIHsKPiAgIAkJCWJvb2wgYnVzeTsKPiBAQCAtODYwLDcg
Kzg1Nyw3IEBAIHN0YXRpYyBpbnQgdHRtX21lbV9ldmljdF9maXJzdChzdHJ1Y3QgdHRtX2JvX2Rl
dmljZSAqYmRldiwKPiAgIAlpZiAoIWJvKSB7Cj4gICAJCWlmIChidXN5X2JvKQo+ICAgCQkJa3Jl
Zl9nZXQoJmJ1c3lfYm8tPmxpc3Rfa3JlZik7Cj4gLQkJc3Bpbl91bmxvY2soJmdsb2ItPmxydV9s
b2NrKTsKPiArCQlzcGluX3VubG9jaygmdHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCQlyZXQg
PSB0dG1fbWVtX2V2aWN0X3dhaXRfYnVzeShidXN5X2JvLCBjdHgsIHRpY2tldCk7Cj4gICAJCWlm
IChidXN5X2JvKQo+ICAgCQkJa3JlZl9wdXQoJmJ1c3lfYm8tPmxpc3Rfa3JlZiwgdHRtX2JvX3Jl
bGVhc2VfbGlzdCk7Cj4gQEAgLTg3Niw3ICs4NzMsNyBAQCBzdGF0aWMgaW50IHR0bV9tZW1fZXZp
Y3RfZmlyc3Qoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCj4gICAJCXJldHVybiByZXQ7Cj4g
ICAJfQo+ICAgCj4gLQlzcGluX3VubG9jaygmZ2xvYi0+bHJ1X2xvY2spOwo+ICsJc3Bpbl91bmxv
Y2soJnR0bV9ib19nbG9iLmxydV9sb2NrKTsKPiAgIAo+ICAgCXJldCA9IHR0bV9ib19ldmljdChi
bywgY3R4KTsKPiAgIAlpZiAobG9ja2VkKQo+IEBAIC0xMDQyLDEwICsxMDM5LDEwIEBAIHN0YXRp
YyBpbnQgdHRtX2JvX21lbV9wbGFjZW1lbnQoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywK
PiAgIAltZW0tPm1lbV90eXBlID0gbWVtX3R5cGU7Cj4gICAJbWVtLT5wbGFjZW1lbnQgPSBjdXJf
ZmxhZ3M7Cj4gICAKPiAtCXNwaW5fbG9jaygmYm8tPmJkZXYtPmdsb2ItPmxydV9sb2NrKTsKPiAr
CXNwaW5fbG9jaygmdHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCXR0bV9ib19kZWxfZnJvbV9s
cnUoYm8pOwo+ICAgCXR0bV9ib19hZGRfbWVtX3RvX2xydShibywgbWVtKTsKPiAtCXNwaW5fdW5s
b2NrKCZiby0+YmRldi0+Z2xvYi0+bHJ1X2xvY2spOwo+ICsJc3Bpbl91bmxvY2soJnR0bV9ib19n
bG9iLmxydV9sb2NrKTsKPiAgIAo+ICAgCXJldHVybiAwOwo+ICAgfQo+IEBAIC0xMTMyLDkgKzEx
MjksOSBAQCBpbnQgdHRtX2JvX21lbV9zcGFjZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJv
LAo+ICAgCj4gICBlcnJvcjoKPiAgIAlpZiAoYm8tPm1lbS5tZW1fdHlwZSA9PSBUVE1fUExfU1lT
VEVNICYmICFsaXN0X2VtcHR5KCZiby0+bHJ1KSkgewo+IC0JCXNwaW5fbG9jaygmYm8tPmJkZXYt
Pmdsb2ItPmxydV9sb2NrKTsKPiArCQlzcGluX2xvY2soJnR0bV9ib19nbG9iLmxydV9sb2NrKTsK
PiAgIAkJdHRtX2JvX21vdmVfdG9fbHJ1X3RhaWwoYm8sIE5VTEwpOwo+IC0JCXNwaW5fdW5sb2Nr
KCZiby0+YmRldi0+Z2xvYi0+bHJ1X2xvY2spOwo+ICsJCXNwaW5fdW5sb2NrKCZ0dG1fYm9fZ2xv
Yi5scnVfbG9jayk7Cj4gICAJfQo+ICAgCj4gICAJcmV0dXJuIHJldDsKPiBAQCAtMTI1OCw5ICsx
MjU1LDkgQEAgaW50IHR0bV9ib19pbml0X3Jlc2VydmVkKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpi
ZGV2LAo+ICAgCQkJIHN0cnVjdCBkbWFfcmVzdiAqcmVzdiwKPiAgIAkJCSB2b2lkICgqZGVzdHJv
eSkgKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqKSkKPiAgIHsKPiArCXN0cnVjdCB0dG1fbWVt
X2dsb2JhbCAqbWVtX2dsb2IgPSAmdHRtX21lbV9nbG9iOwo+ICAgCWludCByZXQgPSAwOwo+ICAg
CXVuc2lnbmVkIGxvbmcgbnVtX3BhZ2VzOwo+IC0Jc3RydWN0IHR0bV9tZW1fZ2xvYmFsICptZW1f
Z2xvYiA9IGJkZXYtPmdsb2ItPm1lbV9nbG9iOwo+ICAgCWJvb2wgbG9ja2VkOwo+ICAgCj4gICAJ
cmV0ID0gdHRtX21lbV9nbG9iYWxfYWxsb2MobWVtX2dsb2IsIGFjY19zaXplLCBjdHgpOwo+IEBA
IC0xMzIxLDcgKzEzMTgsNyBAQCBpbnQgdHRtX2JvX2luaXRfcmVzZXJ2ZWQoc3RydWN0IHR0bV9i
b19kZXZpY2UgKmJkZXYsCj4gICAJCWRtYV9yZXN2X2luaXQoJmJvLT5iYXNlLl9yZXN2KTsKPiAg
IAkJZHJtX3ZtYV9ub2RlX3Jlc2V0KCZiby0+YmFzZS52bWFfbm9kZSk7Cj4gICAJfQo+IC0JYXRv
bWljX2luYygmYm8tPmJkZXYtPmdsb2ItPmJvX2NvdW50KTsKPiArCWF0b21pY19pbmMoJnR0bV9i
b19nbG9iLmJvX2NvdW50KTsKPiAgIAo+ICAgCS8qCj4gICAJICogRm9yIHR0bV9ib190eXBlX2Rl
dmljZSBidWZmZXJzLCBhbGxvY2F0ZQo+IEBAIC0xMzUxLDkgKzEzNDgsOSBAQCBpbnQgdHRtX2Jv
X2luaXRfcmVzZXJ2ZWQoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCj4gICAJCXJldHVybiBy
ZXQ7Cj4gICAJfQo+ICAgCj4gLQlzcGluX2xvY2soJmJkZXYtPmdsb2ItPmxydV9sb2NrKTsKPiAr
CXNwaW5fbG9jaygmdHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCXR0bV9ib19tb3ZlX3RvX2xy
dV90YWlsKGJvLCBOVUxMKTsKPiAtCXNwaW5fdW5sb2NrKCZiZGV2LT5nbG9iLT5scnVfbG9jayk7
Cj4gKwlzcGluX3VubG9jaygmdHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCj4gICAJcmV0dXJu
IHJldDsKPiAgIH0KPiBAQCAtMTQ1MSw3ICsxNDQ4LDcgQEAgc3RhdGljIGludCB0dG1fYm9fZm9y
Y2VfbGlzdF9jbGVhbihzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldiwKPiAgIAkJLmZsYWdzID0g
VFRNX09QVF9GTEFHX0ZPUkNFX0FMTE9DCj4gICAJfTsKPiAgIAlzdHJ1Y3QgdHRtX21lbV90eXBl
X21hbmFnZXIgKm1hbiA9ICZiZGV2LT5tYW5bbWVtX3R5cGVdOwo+IC0Jc3RydWN0IHR0bV9ib19n
bG9iYWwgKmdsb2IgPSBiZGV2LT5nbG9iOwo+ICsJc3RydWN0IHR0bV9ib19nbG9iYWwgKmdsb2Ig
PSAmdHRtX2JvX2dsb2I7Cj4gICAJc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7Cj4gICAJaW50IHJl
dDsKPiAgIAl1bnNpZ25lZCBpOwo+IEBAIC0xNjIwLDggKzE2MTcsNiBAQCBzdGF0aWMgaW50IHR0
bV9ib19nbG9iYWxfaW5pdCh2b2lkKQo+ICAgCQlnb3RvIG91dDsKPiAgIAo+ICAgCXNwaW5fbG9j
a19pbml0KCZnbG9iLT5scnVfbG9jayk7Cj4gLQlnbG9iLT5tZW1fZ2xvYiA9ICZ0dG1fbWVtX2ds
b2I7Cj4gLQlnbG9iLT5tZW1fZ2xvYi0+Ym9fZ2xvYiA9IGdsb2I7Cj4gICAJZ2xvYi0+ZHVtbXlf
cmVhZF9wYWdlID0gYWxsb2NfcGFnZShfX0dGUF9aRVJPIHwgR0ZQX0RNQTMyKTsKPiAgIAo+ICAg
CWlmICh1bmxpa2VseShnbG9iLT5kdW1teV9yZWFkX3BhZ2UgPT0gTlVMTCkpIHsKPiBAQCAtMTY0
NSwxMCArMTY0MCwxMCBAQCBzdGF0aWMgaW50IHR0bV9ib19nbG9iYWxfaW5pdCh2b2lkKQo+ICAg
Cj4gICBpbnQgdHRtX2JvX2RldmljZV9yZWxlYXNlKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2
KQo+ICAgewo+ICsJc3RydWN0IHR0bV9ib19nbG9iYWwgKmdsb2IgPSAmdHRtX2JvX2dsb2I7Cj4g
ICAJaW50IHJldCA9IDA7Cj4gICAJdW5zaWduZWQgaSA9IFRUTV9OVU1fTUVNX1RZUEVTOwo+ICAg
CXN0cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdlciAqbWFuOwo+IC0Jc3RydWN0IHR0bV9ib19nbG9i
YWwgKmdsb2IgPSBiZGV2LT5nbG9iOwo+ICAgCj4gICAJd2hpbGUgKGktLSkgewo+ICAgCQltYW4g
PSAmYmRldi0+bWFuW2ldOwo+IEBAIC0xNzE3LDcgKzE3MTIsNiBAQCBpbnQgdHRtX2JvX2Rldmlj
ZV9pbml0KHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LAo+ICAgCUlOSVRfREVMQVlFRF9XT1JL
KCZiZGV2LT53cSwgdHRtX2JvX2RlbGF5ZWRfd29ya3F1ZXVlKTsKPiAgIAlJTklUX0xJU1RfSEVB
RCgmYmRldi0+ZGRlc3Ryb3kpOwo+ICAgCWJkZXYtPmRldl9tYXBwaW5nID0gbWFwcGluZzsKPiAt
CWJkZXYtPmdsb2IgPSBnbG9iOwo+ICAgCWJkZXYtPm5lZWRfZG1hMzIgPSBuZWVkX2RtYTMyOwo+
ICAgCW11dGV4X2xvY2soJnR0bV9nbG9iYWxfbXV0ZXgpOwo+ICAgCWxpc3RfYWRkX3RhaWwoJmJk
ZXYtPmRldmljZV9saXN0LCAmZ2xvYi0+ZGV2aWNlX2xpc3QpOwo+IEBAIC0xOTIxLDggKzE5MTUs
NyBAQCB2b2lkIHR0bV9ib19zd2Fwb3V0X2FsbChzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldikK
PiAgIAkJLm5vX3dhaXRfZ3B1ID0gZmFsc2UKPiAgIAl9Owo+ICAgCj4gLQl3aGlsZSAodHRtX2Jv
X3N3YXBvdXQoYmRldi0+Z2xvYiwgJmN0eCkgPT0gMCkKPiAtCQk7Cj4gKwl3aGlsZSAodHRtX2Jv
X3N3YXBvdXQoJnR0bV9ib19nbG9iLCAmY3R4KSA9PSAwKTsKPiAgIH0KPiAgIEVYUE9SVF9TWU1C
T0wodHRtX2JvX3N3YXBvdXRfYWxsKTsKPiAgIAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vdHRtL3R0bV9ib191dGlsLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMK
PiBpbmRleCBmZTgxYzU2NWU3ZWYuLjM5NDBhZmE2ZjNhZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0
bV9ib191dGlsLmMKPiBAQCAtNTAzLDcgKzUwMyw3IEBAIHN0YXRpYyBpbnQgdHRtX2J1ZmZlcl9v
YmplY3RfdHJhbnNmZXIoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKPiAgIAkgKiBUT0RP
OiBFeHBsaWNpdCBtZW1iZXIgY29weSB3b3VsZCBwcm9iYWJseSBiZSBiZXR0ZXIgaGVyZS4KPiAg
IAkgKi8KPiAgIAo+IC0JYXRvbWljX2luYygmYm8tPmJkZXYtPmdsb2ItPmJvX2NvdW50KTsKPiAr
CWF0b21pY19pbmMoJnR0bV9ib19nbG9iLmJvX2NvdW50KTsKPiAgIAlJTklUX0xJU1RfSEVBRCgm
ZmJvLT5iYXNlLmRkZXN0cm95KTsKPiAgIAlJTklUX0xJU1RfSEVBRCgmZmJvLT5iYXNlLmxydSk7
Cj4gICAJSU5JVF9MSVNUX0hFQUQoJmZiby0+YmFzZS5zd2FwKTsKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdm0uYyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2Jv
X3ZtLmMKPiBpbmRleCA0YWEwMDdlZGZmYjAuLjI2M2Y0YzMzMDc5YSAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fYm9fdm0uYwo+IEBAIC0xNzcsOSArMTc3LDkgQEAgc3RhdGljIHZtX2ZhdWx0X3QgdHRt
X2JvX3ZtX2ZhdWx0KHN0cnVjdCB2bV9mYXVsdCAqdm1mKQo+ICAgCQl9Cj4gICAKPiAgIAkJaWYg
KGJvLT5tb3ZpbmcgIT0gbW92aW5nKSB7Cj4gLQkJCXNwaW5fbG9jaygmYmRldi0+Z2xvYi0+bHJ1
X2xvY2spOwo+ICsJCQlzcGluX2xvY2soJnR0bV9ib19nbG9iLmxydV9sb2NrKTsKPiAgIAkJCXR0
bV9ib19tb3ZlX3RvX2xydV90YWlsKGJvLCBOVUxMKTsKPiAtCQkJc3Bpbl91bmxvY2soJmJkZXYt
Pmdsb2ItPmxydV9sb2NrKTsKPiArCQkJc3Bpbl91bmxvY2soJnR0bV9ib19nbG9iLmxydV9sb2Nr
KTsKPiAgIAkJfQo+ICAgCQlkbWFfZmVuY2VfcHV0KG1vdmluZyk7Cj4gICAJfQo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9leGVjYnVmX3V0aWwuYyBiL2RyaXZlcnMvZ3B1
L2RybS90dG0vdHRtX2V4ZWNidWZfdXRpbC5jCj4gaW5kZXggYjA5YzJjOGNhZjEzLi44ZjFkY2Rk
MGMzZjUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fZXhlY2J1Zl91dGls
LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9leGVjYnVmX3V0aWwuYwo+IEBAIC0z
NywxNSArMzcsMTEgQEAgdm9pZCB0dG1fZXVfYmFja29mZl9yZXNlcnZhdGlvbihzdHJ1Y3QgZG1h
X3Jlc3ZfY3R4ICp0aWNrZXQsCj4gICAJCQkJc3RydWN0IGxpc3RfaGVhZCAqbGlzdCkKPiAgIHsK
PiAgIAlzdHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZlciAqZW50cnk7Cj4gLQlzdHJ1Y3QgdHRtX2Jv
X2dsb2JhbCAqZ2xvYjsKPiAgIAo+ICAgCWlmIChsaXN0X2VtcHR5KGxpc3QpKQo+ICAgCQlyZXR1
cm47Cj4gICAKPiAtCWVudHJ5ID0gbGlzdF9maXJzdF9lbnRyeShsaXN0LCBzdHJ1Y3QgdHRtX3Zh
bGlkYXRlX2J1ZmZlciwgaGVhZCk7Cj4gLQlnbG9iID0gZW50cnktPmJvLT5iZGV2LT5nbG9iOwo+
IC0KPiAtCXNwaW5fbG9jaygmZ2xvYi0+bHJ1X2xvY2spOwo+ICsJc3Bpbl9sb2NrKCZ0dG1fYm9f
Z2xvYi5scnVfbG9jayk7Cj4gICAJbGlzdF9mb3JfZWFjaF9lbnRyeShlbnRyeSwgbGlzdCwgaGVh
ZCkgewo+ICAgCQlzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvID0gZW50cnktPmJvOwo+ICAg
Cj4gQEAgLTUzLDcgKzQ5LDcgQEAgdm9pZCB0dG1fZXVfYmFja29mZl9yZXNlcnZhdGlvbihzdHJ1
Y3QgZG1hX3Jlc3ZfY3R4ICp0aWNrZXQsCj4gICAJCWlmICghdGlja2V0KQo+ICAgCQkJZG1hX3Jl
c3ZfdW5sb2NrKGJvLT5iYXNlLnJlc3YpOwo+ICAgCX0KPiAtCXNwaW5fdW5sb2NrKCZnbG9iLT5s
cnVfbG9jayk7Cj4gKwlzcGluX3VubG9jaygmdHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCj4g
ICAJaWYgKHRpY2tldCkgewo+ICAgCQlkbWFfcmVzdl9jdHhfdW5sb2NrX2FsbCh0aWNrZXQpOwo+
IEBAIC03OSwxNSArNzUsMTEgQEAgaW50IHR0bV9ldV9yZXNlcnZlX2J1ZmZlcnMoc3RydWN0IGRt
YV9yZXN2X2N0eCAqdGlja2V0LAo+ICAgCQkJICAgc3RydWN0IGxpc3RfaGVhZCAqZHVwcykKPiAg
IHsKPiAgIAlzdHJ1Y3QgdHRtX3ZhbGlkYXRlX2J1ZmZlciAqZW50cnk7Cj4gLQlzdHJ1Y3QgdHRt
X2JvX2dsb2JhbCAqZ2xvYjsKPiAgIAlpbnQgcmV0Owo+ICAgCj4gICAJaWYgKGxpc3RfZW1wdHko
bGlzdCkpCj4gICAJCXJldHVybiAwOwo+ICAgCj4gLQllbnRyeSA9IGxpc3RfZmlyc3RfZW50cnko
bGlzdCwgc3RydWN0IHR0bV92YWxpZGF0ZV9idWZmZXIsIGhlYWQpOwo+IC0JZ2xvYiA9IGVudHJ5
LT5iby0+YmRldi0+Z2xvYjsKPiAtCj4gICAJaWYgKHRpY2tldCkKPiAgIAkJZG1hX3Jlc3ZfY3R4
X2luaXQodGlja2V0KTsKPiAgIAo+IEBAIC0xNTMsMTkgKzE0NSwxNCBAQCB2b2lkIHR0bV9ldV9m
ZW5jZV9idWZmZXJfb2JqZWN0cyhzdHJ1Y3QgZG1hX3Jlc3ZfY3R4ICp0aWNrZXQsCj4gICAJCQkJ
IHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQo+ICAgewo+ICAgCXN0cnVjdCB0dG1fdmFsaWRhdGVf
YnVmZmVyICplbnRyeTsKPiAtCXN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm87Cj4gLQlzdHJ1
Y3QgdHRtX2JvX2dsb2JhbCAqZ2xvYjsKPiAgIAo+ICAgCWlmIChsaXN0X2VtcHR5KGxpc3QpKQo+
ICAgCQlyZXR1cm47Cj4gICAKPiAtCWJvID0gbGlzdF9maXJzdF9lbnRyeShsaXN0LCBzdHJ1Y3Qg
dHRtX3ZhbGlkYXRlX2J1ZmZlciwgaGVhZCktPmJvOwo+IC0JZ2xvYiA9IGJvLT5iZGV2LT5nbG9i
Owo+IC0KPiAtCXNwaW5fbG9jaygmZ2xvYi0+bHJ1X2xvY2spOwo+IC0KPiArCXNwaW5fbG9jaygm
dHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ICAgCWxpc3RfZm9yX2VhY2hfZW50cnkoZW50cnksIGxp
c3QsIGhlYWQpIHsKPiAtCQlibyA9IGVudHJ5LT5ibzsKPiArCQlzdHJ1Y3QgdHRtX2J1ZmZlcl9v
YmplY3QgKmJvID0gZW50cnktPmJvOwo+ICsKPiAgIAkJaWYgKGVudHJ5LT5udW1fc2hhcmVkKQo+
ICAgCQkJZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZShiby0+YmFzZS5yZXN2LCBmZW5jZSk7Cj4g
ICAJCWVsc2UKPiBAQCAtMTc0LDcgKzE2MSw3IEBAIHZvaWQgdHRtX2V1X2ZlbmNlX2J1ZmZlcl9v
YmplY3RzKHN0cnVjdCBkbWFfcmVzdl9jdHggKnRpY2tldCwKPiAgIAkJaWYgKCF0aWNrZXQpCj4g
ICAJCQlkbWFfcmVzdl91bmxvY2soYm8tPmJhc2UucmVzdik7Cj4gICAJfQo+IC0Jc3Bpbl91bmxv
Y2soJmdsb2ItPmxydV9sb2NrKTsKPiArCXNwaW5fdW5sb2NrKCZ0dG1fYm9fZ2xvYi5scnVfbG9j
ayk7Cj4gICAJaWYgKHRpY2tldCkgewo+ICAgCQlkbWFfcmVzdl9jdHhfdW5sb2NrX2FsbCh0aWNr
ZXQpOwo+ICAgCQlkbWFfcmVzdl9jdHhfZmluaSh0aWNrZXQpOwo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vdHRtL3R0bV9tZW1vcnkuYyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX21l
bW9yeS5jCj4gaW5kZXggODYxNzk1OGI3YWU2Li5hY2Q2M2I3MGQ4MTQgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fbWVtb3J5LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV9tZW1vcnkuYwo+IEBAIC0yNzUsNyArMjc1LDcgQEAgc3RhdGljIHZvaWQgdHRtX3No
cmluayhzdHJ1Y3QgdHRtX21lbV9nbG9iYWwgKmdsb2IsIGJvb2wgZnJvbV93cSwKPiAgIAo+ICAg
CXdoaWxlICh0dG1fem9uZXNfYWJvdmVfc3dhcF90YXJnZXQoZ2xvYiwgZnJvbV93cSwgZXh0cmEp
KSB7Cj4gICAJCXNwaW5fdW5sb2NrKCZnbG9iLT5sb2NrKTsKPiAtCQlyZXQgPSB0dG1fYm9fc3dh
cG91dChnbG9iLT5ib19nbG9iLCBjdHgpOwo+ICsJCXJldCA9IHR0bV9ib19zd2Fwb3V0KCZ0dG1f
Ym9fZ2xvYiwgY3R4KTsKPiAgIAkJc3Bpbl9sb2NrKCZnbG9iLT5sb2NrKTsKPiAgIAkJaWYgKHVu
bGlrZWx5KHJldCAhPSAwKSkKPiAgIAkJCWJyZWFrOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vdHRtL3R0bV9wYWdlX2FsbG9jLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9wYWdl
X2FsbG9jLmMKPiBpbmRleCA2MjdmOGRjOTFkMGUuLmI0MGE0Njc4YzI5NiAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9wYWdlX2FsbG9jLmMKPiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vdHRtL3R0bV9wYWdlX2FsbG9jLmMKPiBAQCAtMTAyOCw3ICsxMDI4LDcgQEAgdm9pZCB0
dG1fcGFnZV9hbGxvY19maW5pKHZvaWQpCj4gICBzdGF0aWMgdm9pZAo+ICAgdHRtX3Bvb2xfdW5w
b3B1bGF0ZV9oZWxwZXIoc3RydWN0IHR0bV90dCAqdHRtLCB1bnNpZ25lZCBtZW1fY291bnRfdXBk
YXRlKQo+ICAgewo+IC0Jc3RydWN0IHR0bV9tZW1fZ2xvYmFsICptZW1fZ2xvYiA9IHR0bS0+YmRl
di0+Z2xvYi0+bWVtX2dsb2I7Cj4gKwlzdHJ1Y3QgdHRtX21lbV9nbG9iYWwgKm1lbV9nbG9iID0g
JnR0bV9tZW1fZ2xvYjsKPiAgIAl1bnNpZ25lZCBpOwo+ICAgCj4gICAJaWYgKG1lbV9jb3VudF91
cGRhdGUgPT0gMCkKPiBAQCAtMTA0OSw3ICsxMDQ5LDcgQEAgdHRtX3Bvb2xfdW5wb3B1bGF0ZV9o
ZWxwZXIoc3RydWN0IHR0bV90dCAqdHRtLCB1bnNpZ25lZCBtZW1fY291bnRfdXBkYXRlKQo+ICAg
Cj4gICBpbnQgdHRtX3Bvb2xfcG9wdWxhdGUoc3RydWN0IHR0bV90dCAqdHRtLCBzdHJ1Y3QgdHRt
X29wZXJhdGlvbl9jdHggKmN0eCkKPiAgIHsKPiAtCXN0cnVjdCB0dG1fbWVtX2dsb2JhbCAqbWVt
X2dsb2IgPSB0dG0tPmJkZXYtPmdsb2ItPm1lbV9nbG9iOwo+ICsJc3RydWN0IHR0bV9tZW1fZ2xv
YmFsICptZW1fZ2xvYiA9ICZ0dG1fbWVtX2dsb2I7Cj4gICAJdW5zaWduZWQgaTsKPiAgIAlpbnQg
cmV0Owo+ICAgCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX3BhZ2VfYWxs
b2NfZG1hLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9wYWdlX2FsbG9jX2RtYS5jCj4gaW5k
ZXggZDU5NGY3NTIwYjdiLi45Y2I1ODhhOTNkNDMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL3R0bS90dG1fcGFnZV9hbGxvY19kbWEuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0v
dHRtX3BhZ2VfYWxsb2NfZG1hLmMKPiBAQCAtODgyLDggKzg4Miw4IEBAIHN0YXRpYyBnZnBfdCB0
dG1fZG1hX3Bvb2xfZ2ZwX2ZsYWdzKHN0cnVjdCB0dG1fZG1hX3R0ICp0dG1fZG1hLCBib29sIGh1
Z2UpCj4gICBpbnQgdHRtX2RtYV9wb3B1bGF0ZShzdHJ1Y3QgdHRtX2RtYV90dCAqdHRtX2RtYSwg
c3RydWN0IGRldmljZSAqZGV2LAo+ICAgCQkJc3RydWN0IHR0bV9vcGVyYXRpb25fY3R4ICpjdHgp
Cj4gICB7Cj4gKwlzdHJ1Y3QgdHRtX21lbV9nbG9iYWwgKm1lbV9nbG9iID0gJnR0bV9tZW1fZ2xv
YjsKPiAgIAlzdHJ1Y3QgdHRtX3R0ICp0dG0gPSAmdHRtX2RtYS0+dHRtOwo+IC0Jc3RydWN0IHR0
bV9tZW1fZ2xvYmFsICptZW1fZ2xvYiA9IHR0bS0+YmRldi0+Z2xvYi0+bWVtX2dsb2I7Cj4gICAJ
dW5zaWduZWQgbG9uZyBudW1fcGFnZXMgPSB0dG0tPm51bV9wYWdlczsKPiAgIAlzdHJ1Y3QgZG1h
X3Bvb2wgKnBvb2w7Cj4gICAJc3RydWN0IGRtYV9wYWdlICpkX3BhZ2U7Cj4gQEAgLTk4Nyw4ICs5
ODcsOCBAQCBFWFBPUlRfU1lNQk9MX0dQTCh0dG1fZG1hX3BvcHVsYXRlKTsKPiAgIC8qIFB1dCBh
bGwgcGFnZXMgaW4gcGFnZXMgbGlzdCB0byBjb3JyZWN0IHBvb2wgdG8gd2FpdCBmb3IgcmV1c2Ug
Ki8KPiAgIHZvaWQgdHRtX2RtYV91bnBvcHVsYXRlKHN0cnVjdCB0dG1fZG1hX3R0ICp0dG1fZG1h
LCBzdHJ1Y3QgZGV2aWNlICpkZXYpCj4gICB7Cj4gKwlzdHJ1Y3QgdHRtX21lbV9nbG9iYWwgKm1l
bV9nbG9iID0gJnR0bV9tZW1fZ2xvYjsKPiAgIAlzdHJ1Y3QgdHRtX3R0ICp0dG0gPSAmdHRtX2Rt
YS0+dHRtOwo+IC0Jc3RydWN0IHR0bV9tZW1fZ2xvYmFsICptZW1fZ2xvYiA9IHR0bS0+YmRldi0+
Z2xvYi0+bWVtX2dsb2I7Cj4gICAJc3RydWN0IGRtYV9wb29sICpwb29sOwo+ICAgCXN0cnVjdCBk
bWFfcGFnZSAqZF9wYWdlLCAqbmV4dDsKPiAgIAllbnVtIHBvb2xfdHlwZSB0eXBlOwo+IGRpZmYg
LS1naXQgYS9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2RyaXZlci5oIGIvaW5jbHVkZS9kcm0vdHRt
L3R0bV9ib19kcml2ZXIuaAo+IGluZGV4IDQzMzJjYzAzNjQ4My4uMzgxOTYxOTc5MzAyIDEwMDY0
NAo+IC0tLSBhL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJpdmVyLmgKPiArKysgYi9pbmNsdWRl
L2RybS90dG0vdHRtX2JvX2RyaXZlci5oCj4gQEAgLTQxMyw3ICs0MTMsNiBAQCBleHRlcm4gc3Ry
dWN0IHR0bV9ib19nbG9iYWwgewo+ICAgCSAqLwo+ICAgCj4gICAJc3RydWN0IGtvYmplY3Qga29i
ajsKPiAtCXN0cnVjdCB0dG1fbWVtX2dsb2JhbCAqbWVtX2dsb2I7Cj4gICAJc3RydWN0IHBhZ2Ug
KmR1bW15X3JlYWRfcGFnZTsKPiAgIAlzcGlubG9ja190IGxydV9sb2NrOwo+ICAgCj4gQEAgLTQ1
Nyw3ICs0NTYsNiBAQCBzdHJ1Y3QgdHRtX2JvX2RldmljZSB7Cj4gICAJICogQ29uc3RhbnQgYWZ0
ZXIgYm8gZGV2aWNlIGluaXQgLyBhdG9taWMuCj4gICAJICovCj4gICAJc3RydWN0IGxpc3RfaGVh
ZCBkZXZpY2VfbGlzdDsKPiAtCXN0cnVjdCB0dG1fYm9fZ2xvYmFsICpnbG9iOwo+ICAgCXN0cnVj
dCB0dG1fYm9fZHJpdmVyICpkcml2ZXI7Cj4gICAJc3RydWN0IHR0bV9tZW1fdHlwZV9tYW5hZ2Vy
IG1hbltUVE1fTlVNX01FTV9UWVBFU107Cj4gICAKPiBAQCAtNzU4LDkgKzc1Niw5IEBAIHN0YXRp
YyBpbmxpbmUgaW50IHR0bV9ib19yZXNlcnZlX3Nsb3dwYXRoKHN0cnVjdCB0dG1fYnVmZmVyX29i
amVjdCAqYm8sCj4gICAgKi8KPiAgIHN0YXRpYyBpbmxpbmUgdm9pZCB0dG1fYm9fdW5yZXNlcnZl
KHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8pCj4gICB7Cj4gLQlzcGluX2xvY2soJmJvLT5i
ZGV2LT5nbG9iLT5scnVfbG9jayk7Cj4gKwlzcGluX2xvY2soJnR0bV9ib19nbG9iLmxydV9sb2Nr
KTsKPiAgIAl0dG1fYm9fbW92ZV90b19scnVfdGFpbChibywgTlVMTCk7Cj4gLQlzcGluX3VubG9j
aygmYm8tPmJkZXYtPmdsb2ItPmxydV9sb2NrKTsKPiArCXNwaW5fdW5sb2NrKCZ0dG1fYm9fZ2xv
Yi5scnVfbG9jayk7Cj4gICAJZG1hX3Jlc3ZfdW5sb2NrKGJvLT5iYXNlLnJlc3YpOwo+ICAgfQo+
ICAgCj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL3R0bS90dG1fbWVtb3J5LmggYi9pbmNsdWRl
L2RybS90dG0vdHRtX21lbW9yeS5oCj4gaW5kZXggM2ZmNDhhMGEyZDdiLi5jNzhlYTk5YzQyY2Yg
MTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9kcm0vdHRtL3R0bV9tZW1vcnkuaAo+ICsrKyBiL2luY2x1
ZGUvZHJtL3R0bS90dG1fbWVtb3J5LmgKPiBAQCAtNjUsNyArNjUsNiBAQAo+ICAgc3RydWN0IHR0
bV9tZW1fem9uZTsKPiAgIGV4dGVybiBzdHJ1Y3QgdHRtX21lbV9nbG9iYWwgewo+ICAgCXN0cnVj
dCBrb2JqZWN0IGtvYmo7Cj4gLQlzdHJ1Y3QgdHRtX2JvX2dsb2JhbCAqYm9fZ2xvYjsKPiAgIAlz
dHJ1Y3Qgd29ya3F1ZXVlX3N0cnVjdCAqc3dhcF9xdWV1ZTsKPiAgIAlzdHJ1Y3Qgd29ya19zdHJ1
Y3Qgd29yazsKPiAgIAlzcGlubG9ja190IGxvY2s7CgpsZ3RtLgoKUmV2aWV3ZWQtYnk6IFRob21h
cyBIZWxsc3Ryw7ZtIDx0aGVsbHN0cm9tQHZtd2FyZS5jb20+CgoKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmkt
ZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
