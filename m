Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4851E98391
	for <lists+dri-devel@lfdr.de>; Wed, 21 Aug 2019 20:50:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1E4B36E340;
	Wed, 21 Aug 2019 18:50:20 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F34876E340
 for <dri-devel@lists.freedesktop.org>; Wed, 21 Aug 2019 18:50:18 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id EC0739C7;
 Wed, 21 Aug 2019 20:50:15 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH/RFC 4/5] drm/edid: Honour connector->force in drm_do_get_edid()
Date: Wed, 21 Aug 2019 21:50:04 +0300
Message-Id: <20190821185005.9789-5-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190821185005.9789-1-laurent.pinchart@ideasonboard.com>
References: <20190821185005.9789-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1566413416;
 bh=o5kGa+zlGAdWe+Bkew6TTV5smqz9GBUXcyyZAXyjxeI=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=L6xXNuTsmE7BlfLmh7F6NluEeMpcPWFthH87ETqB7Wx7Qm++QaDwsPmeexiHbtAWY
 UlHMM9a6PdVkGZiSK9Zbw2nvRsKX1tNuTrb9lIHxGIkL2Y0HyGb8blsx95uSWr+/BQ
 VrfHrSiaMpuxEtX0Zl6AMGHdAPXdykJbAcYgNOSI=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Tomi Valkeinen <tomi.valkeinen@ti.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGRybV9nZXRfZWRpZCgpIGZ1bmN0aW9uIHNraXBzIEVESUQgcmVhZCB3aGVuIHRoZSBjb25u
ZWN0b3IgaXMKZGlzYWJsZWQgdGhyb3VnaCBjb25uZWN0b3ItPmZvcmNlLiBkcm1fZG9fZ2V0X2Vk
aWQoKSwgd2hpY2ggaXMgc3VwcG9zZWQKdG8gYmUgdXNlZCBpbnN0ZWFkIG9mIGRybV9nZXRfZWRp
ZCgpIGZvciBkcml2ZXJzIHRoYXQgbmVlZCB0byBwcm92aWRlIGEKY3VzdG9tIEREQyByZWFkIG1l
dGhvZCwgaXMgbWlzc2luZyB0aGUgY29ubmVjdG9yIGZvcmNlIGNoZWNrcy4gVGhpcwpicmVha3Mg
dGhlIGNvbm5lY3RvciBzeXNmcyBvciBjb21tYW5kIGxpbmUgZm9yY2UgYXR0cmlidXRlLgoKRml4
IHRoaXMgYnkgbW92aW5nIHRoZSB0aGUgY29ubmVjdG9yIGNoZWNrcyB0byBkcm1fZG9fZ2V0X2Vk
aWQoKS4gRm9yCmNvbnZlbmllbmNlLCB0aGUgZXhpc3RpbmcgZHJtX2RvX2dldF9lZGlkKCkgZnVu
Y3Rpb24gaXMgcmVuYW1lZCB0bwpfX2RybV9kb19nZXRfZWRpZCgpIGFuZCB1c2VkIGluIGRybV9k
b19nZXRfZWRpZCgpLgoKV2hpbGUgYXQgaXQsIHJlbW92ZSB0aGUgaW5jb3JyZWN0IHN0YXRlbWVu
dCBmcm9tIHRoZSBkcm1fZ2V0X2VkaWQoKQpkb2N1bWVudGF0aW9uIHJlbGF0ZWQgdG8gYXR0YWNo
aW5nIHRoZSByZWFkIEVESUQgdG8gdGhlIGNvbm5lY3Rvci4KClNpZ25lZC1vZmYtYnk6IExhdXJl
bnQgUGluY2hhcnQgPGxhdXJlbnQucGluY2hhcnRAaWRlYXNvbmJvYXJkLmNvbT4KLS0tCiBkcml2
ZXJzL2dwdS9kcm0vZHJtX2VkaWQuYyB8IDgwICsrKysrKysrKysrKysrKysrKysrKysrLS0tLS0t
LS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgNDggaW5zZXJ0aW9ucygrKSwgMzIgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9lZGlkLmMgYi9kcml2ZXJzL2dw
dS9kcm0vZHJtX2VkaWQuYwppbmRleCA1NDFlNTBiODU4ZTMuLjRiMjg2MzVmMTA1MCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9lZGlkLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ry
bV9lZGlkLmMKQEAgLTUxOTEsMjcgKzUxOTEsMTcgQEAgaW50IGRybV9hZGRfb3ZlcnJpZGVfZWRp
ZF9tb2RlcyhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogfQogRVhQT1JUX1NZTUJP
TChkcm1fYWRkX292ZXJyaWRlX2VkaWRfbW9kZXMpOwogCi0vKioKLSAqIGRybV9kb19nZXRfZWRp
ZCAtIGdldCBFRElEIGRhdGEgdXNpbmcgYSBjdXN0b20gRURJRCBibG9jayByZWFkIGZ1bmN0aW9u
Ci0gKiBAY29ubmVjdG9yOiBjb25uZWN0b3Igd2UncmUgcHJvYmluZwotICogQGdldF9lZGlkX2Js
b2NrOiBFRElEIGJsb2NrIHJlYWQgZnVuY3Rpb24KLSAqIEBkYXRhOiBwcml2YXRlIGRhdGEgcGFz
c2VkIHRvIHRoZSBibG9jayByZWFkIGZ1bmN0aW9uCi0gKgotICogV2hlbiB0aGUgSTJDIGFkYXB0
ZXIgY29ubmVjdGVkIHRvIHRoZSBEREMgYnVzIGlzIGhpZGRlbiBiZWhpbmQgYSBkZXZpY2UgdGhh
dAotICogZXhwb3NlcyBhIGRpZmZlcmVudCBpbnRlcmZhY2UgdG8gcmVhZCBFRElEIGJsb2NrcyB0
aGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkCi0gKiB0byBnZXQgRURJRCBkYXRhIHVzaW5nIGEgY3Vz
dG9tIGJsb2NrIHJlYWQgZnVuY3Rpb24uCi0gKgotICogQXMgaW4gdGhlIGdlbmVyYWwgY2FzZSB0
aGUgRERDIGJ1cyBpcyBhY2Nlc3NpYmxlIGJ5IHRoZSBrZXJuZWwgYXQgdGhlIEkyQwotICogbGV2
ZWwsIGRyaXZlcnMgbXVzdCBtYWtlIGFsbCByZWFzb25hYmxlIGVmZm9ydHMgdG8gZXhwb3NlIGl0
IGFzIGFuIEkyQwotICogYWRhcHRlciBhbmQgdXNlIGRybV9nZXRfZWRpZCgpIGluc3RlYWQgb2Yg
YWJ1c2luZyB0aGlzIGZ1bmN0aW9uLgotICoKLSAqIFRoZSBFRElEIG1heSBiZSBvdmVycmlkZGVu
IHVzaW5nIGRlYnVnZnMgb3ZlcnJpZGVfZWRpZCBvciBmaXJtd2FyZSBFRElECi0gKiAoZHJtX2xv
YWRfZWRpZF9maXJtd2FyZSgpIGFuZCBkcm0uZWRpZF9maXJtd2FyZSBwYXJhbWV0ZXIpLCBpbiB0
aGlzIHByaW9yaXR5Ci0gKiBvcmRlci4gSGF2aW5nIGVpdGhlciBvZiB0aGVtIGJ5cGFzc2VzIGFj
dHVhbCBFRElEIHJlYWRzLgotICoKLSAqIFJldHVybjogUG9pbnRlciB0byB2YWxpZCBFRElEIG9y
IE5VTEwgaWYgd2UgY291bGRuJ3QgZmluZCBhbnkuCi0gKi8KLXN0cnVjdCBlZGlkICpkcm1fZG9f
Z2V0X2VkaWQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKK3N0YXRpYyBib29sIF9f
ZHJtX3Byb2JlX2RkYyhpbnQgKCpnZXRfZWRpZF9ibG9jaykodm9pZCAqZGF0YSwgdTggKmJ1ZiwK
KwkJCQkJCSAgdW5zaWduZWQgaW50IGJsb2NrLAorCQkJCQkJICBzaXplX3QgbGVuKSwKKwkJCSAg
ICB2b2lkICpkYXRhKQoreworCXVuc2lnbmVkIGNoYXIgb3V0OworCisJcmV0dXJuIChnZXRfZWRp
ZF9ibG9jayhkYXRhLCAmb3V0LCAwLCAxKSA9PSAwKTsKK30KKworc3RhdGljIHN0cnVjdCBlZGlk
ICpfX2RybV9kb19nZXRfZWRpZChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCWlu
dCAoKmdldF9lZGlkX2Jsb2NrKSh2b2lkICpkYXRhLCB1OCAqYnVmLCB1bnNpZ25lZCBpbnQgYmxv
Y2ssCiAJCQkgICAgICBzaXplX3QgbGVuKSwKIAl2b2lkICpkYXRhKQpAQCAtNTMwMiw2ICs1Mjky
LDQxIEBAIHN0cnVjdCBlZGlkICpkcm1fZG9fZ2V0X2VkaWQoc3RydWN0IGRybV9jb25uZWN0b3Ig
KmNvbm5lY3RvciwKIAlrZnJlZShlZGlkKTsKIAlyZXR1cm4gTlVMTDsKIH0KKworLyoqCisgKiBk
cm1fZG9fZ2V0X2VkaWQgLSBnZXQgRURJRCBkYXRhIHVzaW5nIGEgY3VzdG9tIEVESUQgYmxvY2sg
cmVhZCBmdW5jdGlvbgorICogQGNvbm5lY3RvcjogY29ubmVjdG9yIHdlJ3JlIHByb2JpbmcKKyAq
IEBnZXRfZWRpZF9ibG9jazogRURJRCBibG9jayByZWFkIGZ1bmN0aW9uCisgKiBAZGF0YTogcHJp
dmF0ZSBkYXRhIHBhc3NlZCB0byB0aGUgYmxvY2sgcmVhZCBmdW5jdGlvbgorICoKKyAqIFdoZW4g
dGhlIEkyQyBhZGFwdGVyIGNvbm5lY3RlZCB0byB0aGUgRERDIGJ1cyBpcyBoaWRkZW4gYmVoaW5k
IGEgZGV2aWNlIHRoYXQKKyAqIGV4cG9zZXMgYSBkaWZmZXJlbnQgaW50ZXJmYWNlIHRvIHJlYWQg
RURJRCBibG9ja3MgdGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZAorICogdG8gZ2V0IEVESUQgZGF0
YSB1c2luZyBhIGN1c3RvbSBibG9jayByZWFkIGZ1bmN0aW9uLgorICoKKyAqIEFzIGluIHRoZSBn
ZW5lcmFsIGNhc2UgdGhlIEREQyBidXMgaXMgYWNjZXNzaWJsZSBieSB0aGUga2VybmVsIGF0IHRo
ZSBJMkMKKyAqIGxldmVsLCBkcml2ZXJzIG11c3QgbWFrZSBhbGwgcmVhc29uYWJsZSBlZmZvcnRz
IHRvIGV4cG9zZSBpdCBhcyBhbiBJMkMKKyAqIGFkYXB0ZXIgYW5kIHVzZSBkcm1fZ2V0X2VkaWQo
KSBpbnN0ZWFkIG9mIGFidXNpbmcgdGhpcyBmdW5jdGlvbi4KKyAqCisgKiBUaGUgRURJRCBtYXkg
YmUgb3ZlcnJpZGRlbiB1c2luZyBkZWJ1Z2ZzIG92ZXJyaWRlX2VkaWQgb3IgZmlybXdhcmUgRURJ
RAorICogKGRybV9sb2FkX2VkaWRfZmlybXdhcmUoKSBhbmQgZHJtLmVkaWRfZmlybXdhcmUgcGFy
YW1ldGVyKSwgaW4gdGhpcyBwcmlvcml0eQorICogb3JkZXIuIEhhdmluZyBlaXRoZXIgb2YgdGhl
bSBieXBhc3NlcyBhY3R1YWwgRURJRCByZWFkcy4KKyAqCisgKiBSZXR1cm46IFBvaW50ZXIgdG8g
dmFsaWQgRURJRCBvciBOVUxMIGlmIHdlIGNvdWxkbid0IGZpbmQgYW55LgorICovCitzdHJ1Y3Qg
ZWRpZCAqZHJtX2RvX2dldF9lZGlkKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCisJ
aW50ICgqZ2V0X2VkaWRfYmxvY2spKHZvaWQgKmRhdGEsIHU4ICpidWYsIHVuc2lnbmVkIGludCBi
bG9jaywKKwkJCSAgICAgIHNpemVfdCBsZW4pLAorCXZvaWQgKmRhdGEpCit7CisJaWYgKGNvbm5l
Y3Rvci0+Zm9yY2UgPT0gRFJNX0ZPUkNFX09GRikKKwkJcmV0dXJuIE5VTEw7CisKKwlpZiAoY29u
bmVjdG9yLT5mb3JjZSA9PSBEUk1fRk9SQ0VfVU5TUEVDSUZJRUQgJiYKKwkgICAgIV9fZHJtX3By
b2JlX2RkYyhnZXRfZWRpZF9ibG9jaywgZGF0YSkpCisJCXJldHVybiBOVUxMOworCisJcmV0dXJu
IF9fZHJtX2RvX2dldF9lZGlkKGNvbm5lY3RvciwgZ2V0X2VkaWRfYmxvY2ssIGRhdGEpOworfQog
RVhQT1JUX1NZTUJPTF9HUEwoZHJtX2RvX2dldF9lZGlkKTsKIAogLyoqCkBAIC01MzEzLDkgKzUz
MzgsNyBAQCBFWFBPUlRfU1lNQk9MX0dQTChkcm1fZG9fZ2V0X2VkaWQpOwogYm9vbAogZHJtX3By
b2JlX2RkYyhzdHJ1Y3QgaTJjX2FkYXB0ZXIgKmFkYXB0ZXIpCiB7Ci0JdW5zaWduZWQgY2hhciBv
dXQ7Ci0KLQlyZXR1cm4gKGRybV9kb19wcm9iZV9kZGNfZWRpZChhZGFwdGVyLCAmb3V0LCAwLCAx
KSA9PSAwKTsKKwlyZXR1cm4gX19kcm1fcHJvYmVfZGRjKGRybV9kb19wcm9iZV9kZGNfZWRpZCwg
YWRhcHRlcik7CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9wcm9iZV9kZGMpOwogCkBAIC01MzI0LDIw
ICs1MzQ3LDEzIEBAIEVYUE9SVF9TWU1CT0woZHJtX3Byb2JlX2RkYyk7CiAgKiBAY29ubmVjdG9y
OiBjb25uZWN0b3Igd2UncmUgcHJvYmluZwogICogQGFkYXB0ZXI6IEkyQyBhZGFwdGVyIHRvIHVz
ZSBmb3IgRERDCiAgKgotICogUG9rZSB0aGUgZ2l2ZW4gSTJDIGNoYW5uZWwgdG8gZ3JhYiBFRElE
IGRhdGEgaWYgcG9zc2libGUuICBJZiBmb3VuZCwKLSAqIGF0dGFjaCBpdCB0byB0aGUgY29ubmVj
dG9yLgorICogUG9rZSB0aGUgZ2l2ZW4gSTJDIGNoYW5uZWwgdG8gZ3JhYiBFRElEIGRhdGEgaWYg
cG9zc2libGUuCiAgKgogICogUmV0dXJuOiBQb2ludGVyIHRvIHZhbGlkIEVESUQgb3IgTlVMTCBp
ZiB3ZSBjb3VsZG4ndCBmaW5kIGFueS4KICAqLwogc3RydWN0IGVkaWQgKmRybV9nZXRfZWRpZChz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQkJICBzdHJ1Y3QgaTJjX2FkYXB0ZXIg
KmFkYXB0ZXIpCiB7Ci0JaWYgKGNvbm5lY3Rvci0+Zm9yY2UgPT0gRFJNX0ZPUkNFX09GRikKLQkJ
cmV0dXJuIE5VTEw7Ci0KLQlpZiAoY29ubmVjdG9yLT5mb3JjZSA9PSBEUk1fRk9SQ0VfVU5TUEVD
SUZJRUQgJiYgIWRybV9wcm9iZV9kZGMoYWRhcHRlcikpCi0JCXJldHVybiBOVUxMOwotCiAJcmV0
dXJuIGRybV9kb19nZXRfZWRpZChjb25uZWN0b3IsIGRybV9kb19wcm9iZV9kZGNfZWRpZCwgYWRh
cHRlcik7CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9nZXRfZWRpZCk7Ci0tIApSZWdhcmRzLAoKTGF1
cmVudCBQaW5jaGFydAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
