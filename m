Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0FE37615CE
	for <lists+dri-devel@lfdr.de>; Sun,  7 Jul 2019 20:11:14 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 10CC289904;
	Sun,  7 Jul 2019 18:11:12 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E7C9089904
 for <dri-devel@lists.freedesktop.org>; Sun,  7 Jul 2019 18:11:09 +0000 (UTC)
Received: from pendragon.nordic-sky.finnair.com (unknown [38.98.37.142])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 30E79CC;
 Sun,  7 Jul 2019 20:10:49 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 03/60] drm/bridge: dumb-vga-dac: Rename internal symbols to
 simple-bridge
Date: Sun,  7 Jul 2019 21:07:55 +0300
Message-Id: <20190707180852.5512-4-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190707180852.5512-1-laurent.pinchart@ideasonboard.com>
References: <20190707180852.5512-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1562523068;
 bh=paIorR406+8qldTQAZ1yzRIgMQsVgh6nLpEHiNxq3r0=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=mWEFfkVIS4g9haYkMM9RRkedRyNtul2QaPdK/PMlJd+YR4I1GkjQ76DXCDd9tIvzn
 YG2AW5ImOSLYNIEAnSJJUcF41PxNOhLVLEP8WMCf2PlY6wFSbQhhoyoxiFJag/y27z
 wVbtPNfJouQhaVuNUb09WQNbpxD3uU/baSYLjpEE=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sean Paul <sean@poorly.run>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGR1bWItdmdhLWRhYyBkcml2ZXIgaXMgYSBzaW1wbGUgRFJNIGJyaWRnZSBkcml2ZXIgZm9y
IHNpbXBsZSBWR0EKREFDcyB0aGF0IGRvbid0IHJlcXVpcmUgY29uZmlndXJhdGlvbi4gT3RoZXIg
bm9uLVZHQSBicmlkZ2VzIGZhbGwgaW4gYQpzaW1pbGFyIGNhdGVnb3J5LCBhbmQgd291bGQgYmVu
ZWZpdCBmcm9tIGEgY29tbW9uIGRyaXZlci4gUHJlcGFyZSBmb3IKdGhpcyBieSByZW5hbWluZyB0
aGUgaW50ZXJuYWwgc3ltYm9scyBmcm9tIGR1bWItdmdhLWRhYyB0bwpzaW1wbGUtYnJpZGdlLgoK
U2lnbmVkLW9mZi1ieTogTGF1cmVudCBQaW5jaGFydCA8bGF1cmVudC5waW5jaGFydEBpZGVhc29u
Ym9hcmQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvZHVtYi12Z2EtZGFjLmMgfCAx
NDkgKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA3NSBpbnNlcnRp
b25zKCspLCA3NCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJp
ZGdlL2R1bWItdmdhLWRhYy5jIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9kdW1iLXZnYS1kYWMu
YwppbmRleCBkMzI4ODViOTA2YWUuLmQ0NmU0NjFhZTAzOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2JyaWRnZS9kdW1iLXZnYS1kYWMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdl
L2R1bWItdmdhLWRhYy5jCkBAIC0xNiw3ICsxNiw3IEBACiAjaW5jbHVkZSA8ZHJtL2RybV9wcmlu
dC5oPgogI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+CiAKLXN0cnVjdCBkdW1iX3Zn
YSB7CitzdHJ1Y3Qgc2ltcGxlX2JyaWRnZSB7CiAJc3RydWN0IGRybV9icmlkZ2UJYnJpZGdlOwog
CXN0cnVjdCBkcm1fY29ubmVjdG9yCWNvbm5lY3RvcjsKIApAQCAtMjQsMjggKzI0LDI4IEBAIHN0
cnVjdCBkdW1iX3ZnYSB7CiAJc3RydWN0IHJlZ3VsYXRvcgkqdmRkOwogfTsKIAotc3RhdGljIGlu
bGluZSBzdHJ1Y3QgZHVtYl92Z2EgKgotZHJtX2JyaWRnZV90b19kdW1iX3ZnYShzdHJ1Y3QgZHJt
X2JyaWRnZSAqYnJpZGdlKQorc3RhdGljIGlubGluZSBzdHJ1Y3Qgc2ltcGxlX2JyaWRnZSAqCitk
cm1fYnJpZGdlX3RvX3NpbXBsZV9icmlkZ2Uoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIHsK
LQlyZXR1cm4gY29udGFpbmVyX29mKGJyaWRnZSwgc3RydWN0IGR1bWJfdmdhLCBicmlkZ2UpOwor
CXJldHVybiBjb250YWluZXJfb2YoYnJpZGdlLCBzdHJ1Y3Qgc2ltcGxlX2JyaWRnZSwgYnJpZGdl
KTsKIH0KIAotc3RhdGljIGlubGluZSBzdHJ1Y3QgZHVtYl92Z2EgKgotZHJtX2Nvbm5lY3Rvcl90
b19kdW1iX3ZnYShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQorc3RhdGljIGlubGlu
ZSBzdHJ1Y3Qgc2ltcGxlX2JyaWRnZSAqCitkcm1fY29ubmVjdG9yX3RvX3NpbXBsZV9icmlkZ2Uo
c3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKIHsKLQlyZXR1cm4gY29udGFpbmVyX29m
KGNvbm5lY3Rvciwgc3RydWN0IGR1bWJfdmdhLCBjb25uZWN0b3IpOworCXJldHVybiBjb250YWlu
ZXJfb2YoY29ubmVjdG9yLCBzdHJ1Y3Qgc2ltcGxlX2JyaWRnZSwgY29ubmVjdG9yKTsKIH0KIAot
c3RhdGljIGludCBkdW1iX3ZnYV9nZXRfbW9kZXMoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5l
Y3RvcikKK3N0YXRpYyBpbnQgc2ltcGxlX2JyaWRnZV9nZXRfbW9kZXMoc3RydWN0IGRybV9jb25u
ZWN0b3IgKmNvbm5lY3RvcikKIHsKLQlzdHJ1Y3QgZHVtYl92Z2EgKnZnYSA9IGRybV9jb25uZWN0
b3JfdG9fZHVtYl92Z2EoY29ubmVjdG9yKTsKKwlzdHJ1Y3Qgc2ltcGxlX2JyaWRnZSAqc2JyaWRn
ZSA9IGRybV9jb25uZWN0b3JfdG9fc2ltcGxlX2JyaWRnZShjb25uZWN0b3IpOwogCXN0cnVjdCBl
ZGlkICplZGlkOwogCWludCByZXQ7CiAKLQlpZiAoSVNfRVJSKHZnYS0+ZGRjKSkKKwlpZiAoSVNf
RVJSKHNicmlkZ2UtPmRkYykpCiAJCWdvdG8gZmFsbGJhY2s7CiAKLQllZGlkID0gZHJtX2dldF9l
ZGlkKGNvbm5lY3RvciwgdmdhLT5kZGMpOworCWVkaWQgPSBkcm1fZ2V0X2VkaWQoY29ubmVjdG9y
LCBzYnJpZGdlLT5kZGMpOwogCWlmICghZWRpZCkgewogCQlEUk1fSU5GTygiRURJRCByZWFkb3V0
IGZhaWxlZCwgZmFsbGluZyBiYWNrIHRvIHN0YW5kYXJkIG1vZGVzXG4iKTsKIAkJZ290byBmYWxs
YmFjazsKQEAgLTY5LDE0ICs2OSwxNCBAQCBzdGF0aWMgaW50IGR1bWJfdmdhX2dldF9tb2Rlcyhz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogCXJldHVybiByZXQ7CiB9CiAKLXN0YXRp
YyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MgZHVtYl92Z2FfY29uX2hl
bHBlcl9mdW5jcyA9IHsKLQkuZ2V0X21vZGVzCT0gZHVtYl92Z2FfZ2V0X21vZGVzLAorc3RhdGlj
IGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2hlbHBlcl9mdW5jcyBzaW1wbGVfYnJpZGdlX2Nv
bl9oZWxwZXJfZnVuY3MgPSB7CisJLmdldF9tb2Rlcwk9IHNpbXBsZV9icmlkZ2VfZ2V0X21vZGVz
LAogfTsKIAogc3RhdGljIGVudW0gZHJtX2Nvbm5lY3Rvcl9zdGF0dXMKLWR1bWJfdmdhX2Nvbm5l
Y3Rvcl9kZXRlY3Qoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwgYm9vbCBmb3JjZSkK
K3NpbXBsZV9icmlkZ2VfY29ubmVjdG9yX2RldGVjdChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29u
bmVjdG9yLCBib29sIGZvcmNlKQogewotCXN0cnVjdCBkdW1iX3ZnYSAqdmdhID0gZHJtX2Nvbm5l
Y3Rvcl90b19kdW1iX3ZnYShjb25uZWN0b3IpOworCXN0cnVjdCBzaW1wbGVfYnJpZGdlICpzYnJp
ZGdlID0gZHJtX2Nvbm5lY3Rvcl90b19zaW1wbGVfYnJpZGdlKGNvbm5lY3Rvcik7CiAKIAkvKgog
CSAqIEV2ZW4gaWYgd2UgaGF2ZSBhbiBJMkMgYnVzLCB3ZSBjYW4ndCBhc3N1bWUgdGhhdCB0aGUg
Y2FibGUKQEAgLTg0LDE0ICs4NCwxNCBAQCBkdW1iX3ZnYV9jb25uZWN0b3JfZGV0ZWN0KHN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsIGJvb2wgZm9yY2UpCiAJICogd2lyZSB0aGUgRERD
IHBpbnMsIG9yIHRoZSBJMkMgYnVzIG1pZ2h0IG5vdCBiZSB3b3JraW5nIGF0CiAJICogYWxsLgog
CSAqLwotCWlmICghSVNfRVJSKHZnYS0+ZGRjKSAmJiBkcm1fcHJvYmVfZGRjKHZnYS0+ZGRjKSkK
KwlpZiAoIUlTX0VSUihzYnJpZGdlLT5kZGMpICYmIGRybV9wcm9iZV9kZGMoc2JyaWRnZS0+ZGRj
KSkKIAkJcmV0dXJuIGNvbm5lY3Rvcl9zdGF0dXNfY29ubmVjdGVkOwogCiAJcmV0dXJuIGNvbm5l
Y3Rvcl9zdGF0dXNfdW5rbm93bjsKIH0KIAotc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVj
dG9yX2Z1bmNzIGR1bWJfdmdhX2Nvbl9mdW5jcyA9IHsKLQkuZGV0ZWN0CQkJPSBkdW1iX3ZnYV9j
b25uZWN0b3JfZGV0ZWN0LAorc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNz
IHNpbXBsZV9icmlkZ2VfY29uX2Z1bmNzID0geworCS5kZXRlY3QJCQk9IHNpbXBsZV9icmlkZ2Vf
Y29ubmVjdG9yX2RldGVjdCwKIAkuZmlsbF9tb2RlcwkJPSBkcm1faGVscGVyX3Byb2JlX3Npbmds
ZV9jb25uZWN0b3JfbW9kZXMsCiAJLmRlc3Ryb3kJCT0gZHJtX2Nvbm5lY3Rvcl9jbGVhbnVwLAog
CS5yZXNldAkJCT0gZHJtX2F0b21pY19oZWxwZXJfY29ubmVjdG9yX3Jlc2V0LApAQCAtOTksOSAr
OTksOSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfZnVuY3MgZHVtYl92Z2Ff
Y29uX2Z1bmNzID0gewogCS5hdG9taWNfZGVzdHJveV9zdGF0ZQk9IGRybV9hdG9taWNfaGVscGVy
X2Nvbm5lY3Rvcl9kZXN0cm95X3N0YXRlLAogfTsKIAotc3RhdGljIGludCBkdW1iX3ZnYV9hdHRh
Y2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3N0YXRpYyBpbnQgc2ltcGxlX2JyaWRnZV9h
dHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIHsKLQlzdHJ1Y3QgZHVtYl92Z2EgKnZn
YSA9IGRybV9icmlkZ2VfdG9fZHVtYl92Z2EoYnJpZGdlKTsKKwlzdHJ1Y3Qgc2ltcGxlX2JyaWRn
ZSAqc2JyaWRnZSA9IGRybV9icmlkZ2VfdG9fc2ltcGxlX2JyaWRnZShicmlkZ2UpOwogCWludCBy
ZXQ7CiAKIAlpZiAoIWJyaWRnZS0+ZW5jb2RlcikgewpAQCAtMTA5LDQ4ICsxMDksNDkgQEAgc3Rh
dGljIGludCBkdW1iX3ZnYV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIAkJcmV0
dXJuIC1FTk9ERVY7CiAJfQogCi0JZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZ2Z2EtPmNvbm5l
Y3RvciwKLQkJCQkgJmR1bWJfdmdhX2Nvbl9oZWxwZXJfZnVuY3MpOwotCXJldCA9IGRybV9jb25u
ZWN0b3JfaW5pdChicmlkZ2UtPmRldiwgJnZnYS0+Y29ubmVjdG9yLAotCQkJCSAmZHVtYl92Z2Ff
Y29uX2Z1bmNzLCBEUk1fTU9ERV9DT05ORUNUT1JfVkdBKTsKKwlkcm1fY29ubmVjdG9yX2hlbHBl
cl9hZGQoJnNicmlkZ2UtPmNvbm5lY3RvciwKKwkJCQkgJnNpbXBsZV9icmlkZ2VfY29uX2hlbHBl
cl9mdW5jcyk7CisJcmV0ID0gZHJtX2Nvbm5lY3Rvcl9pbml0KGJyaWRnZS0+ZGV2LCAmc2JyaWRn
ZS0+Y29ubmVjdG9yLAorCQkJCSAmc2ltcGxlX2JyaWRnZV9jb25fZnVuY3MsCisJCQkJIERSTV9N
T0RFX0NPTk5FQ1RPUl9WR0EpOwogCWlmIChyZXQpIHsKIAkJRFJNX0VSUk9SKCJGYWlsZWQgdG8g
aW5pdGlhbGl6ZSBjb25uZWN0b3JcbiIpOwogCQlyZXR1cm4gcmV0OwogCX0KIAotCWRybV9jb25u
ZWN0b3JfYXR0YWNoX2VuY29kZXIoJnZnYS0+Y29ubmVjdG9yLAorCWRybV9jb25uZWN0b3JfYXR0
YWNoX2VuY29kZXIoJnNicmlkZ2UtPmNvbm5lY3RvciwKIAkJCQkJICBicmlkZ2UtPmVuY29kZXIp
OwogCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyB2b2lkIGR1bWJfdmdhX2VuYWJsZShzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlKQorc3RhdGljIHZvaWQgc2ltcGxlX2JyaWRnZV9lbmFibGUoc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIHsKLQlzdHJ1Y3QgZHVtYl92Z2EgKnZnYSA9IGRybV9i
cmlkZ2VfdG9fZHVtYl92Z2EoYnJpZGdlKTsKKwlzdHJ1Y3Qgc2ltcGxlX2JyaWRnZSAqc2JyaWRn
ZSA9IGRybV9icmlkZ2VfdG9fc2ltcGxlX2JyaWRnZShicmlkZ2UpOwogCWludCByZXQgPSAwOwog
Ci0JaWYgKHZnYS0+dmRkKQotCQlyZXQgPSByZWd1bGF0b3JfZW5hYmxlKHZnYS0+dmRkKTsKKwlp
ZiAoc2JyaWRnZS0+dmRkKQorCQlyZXQgPSByZWd1bGF0b3JfZW5hYmxlKHNicmlkZ2UtPnZkZCk7
CiAKIAlpZiAocmV0KQogCQlEUk1fRVJST1IoIkZhaWxlZCB0byBlbmFibGUgdmRkIHJlZ3VsYXRv
cjogJWRcbiIsIHJldCk7CiB9CiAKLXN0YXRpYyB2b2lkIGR1bWJfdmdhX2Rpc2FibGUoc3RydWN0
IGRybV9icmlkZ2UgKmJyaWRnZSkKK3N0YXRpYyB2b2lkIHNpbXBsZV9icmlkZ2VfZGlzYWJsZShz
dHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogewotCXN0cnVjdCBkdW1iX3ZnYSAqdmdhID0gZHJt
X2JyaWRnZV90b19kdW1iX3ZnYShicmlkZ2UpOworCXN0cnVjdCBzaW1wbGVfYnJpZGdlICpzYnJp
ZGdlID0gZHJtX2JyaWRnZV90b19zaW1wbGVfYnJpZGdlKGJyaWRnZSk7CiAKLQlpZiAodmdhLT52
ZGQpCi0JCXJlZ3VsYXRvcl9kaXNhYmxlKHZnYS0+dmRkKTsKKwlpZiAoc2JyaWRnZS0+dmRkKQor
CQlyZWd1bGF0b3JfZGlzYWJsZShzYnJpZGdlLT52ZGQpOwogfQogCi1zdGF0aWMgY29uc3Qgc3Ry
dWN0IGRybV9icmlkZ2VfZnVuY3MgZHVtYl92Z2FfYnJpZGdlX2Z1bmNzID0gewotCS5hdHRhY2gJ
CT0gZHVtYl92Z2FfYXR0YWNoLAotCS5lbmFibGUJCT0gZHVtYl92Z2FfZW5hYmxlLAotCS5kaXNh
YmxlCT0gZHVtYl92Z2FfZGlzYWJsZSwKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV9m
dW5jcyBzaW1wbGVfYnJpZGdlX2JyaWRnZV9mdW5jcyA9IHsKKwkuYXR0YWNoCQk9IHNpbXBsZV9i
cmlkZ2VfYXR0YWNoLAorCS5lbmFibGUJCT0gc2ltcGxlX2JyaWRnZV9lbmFibGUsCisJLmRpc2Fi
bGUJPSBzaW1wbGVfYnJpZGdlX2Rpc2FibGUsCiB9OwogCi1zdGF0aWMgc3RydWN0IGkyY19hZGFw
dGVyICpkdW1iX3ZnYV9yZXRyaWV2ZV9kZGMoc3RydWN0IGRldmljZSAqZGV2KQorc3RhdGljIHN0
cnVjdCBpMmNfYWRhcHRlciAqc2ltcGxlX2JyaWRnZV9yZXRyaWV2ZV9kZGMoc3RydWN0IGRldmlj
ZSAqZGV2KQogewogCXN0cnVjdCBkZXZpY2Vfbm9kZSAqcGhhbmRsZSwgKnJlbW90ZTsKIAlzdHJ1
Y3QgaTJjX2FkYXB0ZXIgKmRkYzsKQEAgLTE3Miw1MiArMTczLDUyIEBAIHN0YXRpYyBzdHJ1Y3Qg
aTJjX2FkYXB0ZXIgKmR1bWJfdmdhX3JldHJpZXZlX2RkYyhzdHJ1Y3QgZGV2aWNlICpkZXYpCiAJ
cmV0dXJuIGRkYzsKIH0KIAotc3RhdGljIGludCBkdW1iX3ZnYV9wcm9iZShzdHJ1Y3QgcGxhdGZv
cm1fZGV2aWNlICpwZGV2KQorc3RhdGljIGludCBzaW1wbGVfYnJpZGdlX3Byb2JlKHN0cnVjdCBw
bGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiB7Ci0Jc3RydWN0IGR1bWJfdmdhICp2Z2E7CisJc3RydWN0
IHNpbXBsZV9icmlkZ2UgKnNicmlkZ2U7CiAKLQl2Z2EgPSBkZXZtX2t6YWxsb2MoJnBkZXYtPmRl
diwgc2l6ZW9mKCp2Z2EpLCBHRlBfS0VSTkVMKTsKLQlpZiAoIXZnYSkKKwlzYnJpZGdlID0gZGV2
bV9remFsbG9jKCZwZGV2LT5kZXYsIHNpemVvZigqc2JyaWRnZSksIEdGUF9LRVJORUwpOworCWlm
ICghc2JyaWRnZSkKIAkJcmV0dXJuIC1FTk9NRU07Ci0JcGxhdGZvcm1fc2V0X2RydmRhdGEocGRl
diwgdmdhKTsKKwlwbGF0Zm9ybV9zZXRfZHJ2ZGF0YShwZGV2LCBzYnJpZGdlKTsKIAotCXZnYS0+
dmRkID0gZGV2bV9yZWd1bGF0b3JfZ2V0X29wdGlvbmFsKCZwZGV2LT5kZXYsICJ2ZGQiKTsKLQlp
ZiAoSVNfRVJSKHZnYS0+dmRkKSkgewotCQlpbnQgcmV0ID0gUFRSX0VSUih2Z2EtPnZkZCk7CisJ
c2JyaWRnZS0+dmRkID0gZGV2bV9yZWd1bGF0b3JfZ2V0X29wdGlvbmFsKCZwZGV2LT5kZXYsICJ2
ZGQiKTsKKwlpZiAoSVNfRVJSKHNicmlkZ2UtPnZkZCkpIHsKKwkJaW50IHJldCA9IFBUUl9FUlIo
c2JyaWRnZS0+dmRkKTsKIAkJaWYgKHJldCA9PSAtRVBST0JFX0RFRkVSKQogCQkJcmV0dXJuIC1F
UFJPQkVfREVGRVI7Ci0JCXZnYS0+dmRkID0gTlVMTDsKKwkJc2JyaWRnZS0+dmRkID0gTlVMTDsK
IAkJZGV2X2RiZygmcGRldi0+ZGV2LCAiTm8gdmRkIHJlZ3VsYXRvciBmb3VuZDogJWRcbiIsIHJl
dCk7CiAJfQogCi0JdmdhLT5kZGMgPSBkdW1iX3ZnYV9yZXRyaWV2ZV9kZGMoJnBkZXYtPmRldik7
Ci0JaWYgKElTX0VSUih2Z2EtPmRkYykpIHsKLQkJaWYgKFBUUl9FUlIodmdhLT5kZGMpID09IC1F
Tk9ERVYpIHsKKwlzYnJpZGdlLT5kZGMgPSBzaW1wbGVfYnJpZGdlX3JldHJpZXZlX2RkYygmcGRl
di0+ZGV2KTsKKwlpZiAoSVNfRVJSKHNicmlkZ2UtPmRkYykpIHsKKwkJaWYgKFBUUl9FUlIoc2Jy
aWRnZS0+ZGRjKSA9PSAtRU5PREVWKSB7CiAJCQlkZXZfZGJnKCZwZGV2LT5kZXYsCiAJCQkJIk5v
IGkyYyBidXMgc3BlY2lmaWVkLiBEaXNhYmxpbmcgRURJRCByZWFkb3V0XG4iKTsKIAkJfSBlbHNl
IHsKIAkJCWRldl9lcnIoJnBkZXYtPmRldiwgIkNvdWxkbid0IHJldHJpZXZlIGkyYyBidXNcbiIp
OwotCQkJcmV0dXJuIFBUUl9FUlIodmdhLT5kZGMpOworCQkJcmV0dXJuIFBUUl9FUlIoc2JyaWRn
ZS0+ZGRjKTsKIAkJfQogCX0KIAotCXZnYS0+YnJpZGdlLmZ1bmNzID0gJmR1bWJfdmdhX2JyaWRn
ZV9mdW5jczsKLQl2Z2EtPmJyaWRnZS5vZl9ub2RlID0gcGRldi0+ZGV2Lm9mX25vZGU7Ci0Jdmdh
LT5icmlkZ2UudGltaW5ncyA9IG9mX2RldmljZV9nZXRfbWF0Y2hfZGF0YSgmcGRldi0+ZGV2KTsK
KwlzYnJpZGdlLT5icmlkZ2UuZnVuY3MgPSAmc2ltcGxlX2JyaWRnZV9icmlkZ2VfZnVuY3M7CisJ
c2JyaWRnZS0+YnJpZGdlLm9mX25vZGUgPSBwZGV2LT5kZXYub2Zfbm9kZTsKKwlzYnJpZGdlLT5i
cmlkZ2UudGltaW5ncyA9IG9mX2RldmljZV9nZXRfbWF0Y2hfZGF0YSgmcGRldi0+ZGV2KTsKIAot
CWRybV9icmlkZ2VfYWRkKCZ2Z2EtPmJyaWRnZSk7CisJZHJtX2JyaWRnZV9hZGQoJnNicmlkZ2Ut
PmJyaWRnZSk7CiAKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIGludCBkdW1iX3ZnYV9yZW1vdmUo
c3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKK3N0YXRpYyBpbnQgc2ltcGxlX2JyaWRnZV9y
ZW1vdmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIHsKLQlzdHJ1Y3QgZHVtYl92Z2Eg
KnZnYSA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOworCXN0cnVjdCBzaW1wbGVfYnJpZGdl
ICpzYnJpZGdlID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7CiAKLQlkcm1fYnJpZGdlX3Jl
bW92ZSgmdmdhLT5icmlkZ2UpOworCWRybV9icmlkZ2VfcmVtb3ZlKCZzYnJpZGdlLT5icmlkZ2Up
OwogCi0JaWYgKCFJU19FUlIodmdhLT5kZGMpKQotCQlpMmNfcHV0X2FkYXB0ZXIodmdhLT5kZGMp
OworCWlmICghSVNfRVJSKHNicmlkZ2UtPmRkYykpCisJCWkyY19wdXRfYWRhcHRlcihzYnJpZGdl
LT5kZGMpOwogCiAJcmV0dXJuIDA7CiB9CkBAIC0yMjgsNyArMjI5LDcgQEAgc3RhdGljIGludCBk
dW1iX3ZnYV9yZW1vdmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKICAqIE5PVEU6IHRo
ZSBBRFY3MTIzRVAgc2VlbXMgdG8gaGF2ZSBvdGhlciB0aW1pbmdzIGFuZCBuZWVkIGEgbmV3IHRp
bWluZ3MKICAqIHNldCBpZiB1c2VkLgogICovCi1zdGF0aWMgY29uc3Qgc3RydWN0IGRybV9icmlk
Z2VfdGltaW5ncyBkZWZhdWx0X2RhY190aW1pbmdzID0geworc3RhdGljIGNvbnN0IHN0cnVjdCBk
cm1fYnJpZGdlX3RpbWluZ3MgZGVmYXVsdF9icmlkZ2VfdGltaW5ncyA9IHsKIAkvKiBUaW1pbmcg
c3BlY2lmaWNhdGlvbnMsIGRhdGFzaGVldCBwYWdlIDcgKi8KIAkuaW5wdXRfYnVzX2ZsYWdzID0g
RFJNX0JVU19GTEFHX1BJWERBVEFfU0FNUExFX1BPU0VER0UsCiAJLnNldHVwX3RpbWVfcHMgPSA1
MDAsCkBAIC0yMzksNyArMjQwLDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fYnJpZGdlX3Rp
bWluZ3MgZGVmYXVsdF9kYWNfdGltaW5ncyA9IHsKICAqIEluZm9ybWF0aW9uIHRha2VuIGZyb20g
dGhlIFRIUzgxMzQsIFRIUzgxMzRBLCBUSFM4MTM0QiBkYXRhc2hlZXQgbmFtZWQKICAqICJTTFZT
MjA1RCIsIGRhdGVkIE1heSAxOTkwLCByZXZpc2VkIE1hcmNoIDIwMDAuCiAgKi8KLXN0YXRpYyBj
b25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV90aW1pbmdzIHRpX3RoczgxMzRfZGFjX3RpbWluZ3MgPSB7
CitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9icmlkZ2VfdGltaW5ncyB0aV90aHM4MTM0X2JyaWRn
ZV90aW1pbmdzID0gewogCS8qIEZyb20gdGltaW5nIGRpYWdyYW0sIGRhdGFzaGVldCBwYWdlIDkg
Ki8KIAkuaW5wdXRfYnVzX2ZsYWdzID0gRFJNX0JVU19GTEFHX1BJWERBVEFfU0FNUExFX1BPU0VE
R0UsCiAJLyogRnJvbSBkYXRhc2hlZXQsIHBhZ2UgMTIgKi8KQEAgLTI1Miw3ICsyNTMsNyBAQCBz
dGF0aWMgY29uc3Qgc3RydWN0IGRybV9icmlkZ2VfdGltaW5ncyB0aV90aHM4MTM0X2RhY190aW1p
bmdzID0gewogICogSW5mb3JtYXRpb24gdGFrZW4gZnJvbSB0aGUgVEhTODEzNSBkYXRhc2hlZXQg
bmFtZWQgIlNMQVMzNDNCIiwgZGF0ZWQKICAqIE1heSAyMDAxLCByZXZpc2VkIEFwcmlsIDIwMTMu
CiAgKi8KLXN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV90aW1pbmdzIHRpX3RoczgxMzVf
ZGFjX3RpbWluZ3MgPSB7CitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9icmlkZ2VfdGltaW5ncyB0
aV90aHM4MTM1X2JyaWRnZV90aW1pbmdzID0gewogCS8qIEZyb20gdGltaW5nIGRpYWdyYW0sIGRh
dGFzaGVldCBwYWdlIDE0ICovCiAJLmlucHV0X2J1c19mbGFncyA9IERSTV9CVVNfRkxBR19QSVhE
QVRBX1NBTVBMRV9QT1NFREdFLAogCS8qIEZyb20gZGF0YXNoZWV0LCBwYWdlIDE2ICovCkBAIC0y
NjAsMzcgKzI2MSwzNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9icmlkZ2VfdGltaW5ncyB0
aV90aHM4MTM1X2RhY190aW1pbmdzID0gewogCS5ob2xkX3RpbWVfcHMgPSA1MDAsCiB9OwogCi1z
dGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBkdW1iX3ZnYV9tYXRjaFtdID0geworc3Rh
dGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgc2ltcGxlX2JyaWRnZV9tYXRjaFtdID0gewog
CXsKIAkJLmNvbXBhdGlibGUgPSAiZHVtYi12Z2EtZGFjIiwKIAkJLmRhdGEgPSBOVUxMLAogCX0s
CiAJewogCQkuY29tcGF0aWJsZSA9ICJhZGksYWR2NzEyMyIsCi0JCS5kYXRhID0gJmRlZmF1bHRf
ZGFjX3RpbWluZ3MsCisJCS5kYXRhID0gJmRlZmF1bHRfYnJpZGdlX3RpbWluZ3MsCiAJfSwKIAl7
CiAJCS5jb21wYXRpYmxlID0gInRpLHRoczgxMzUiLAotCQkuZGF0YSA9ICZ0aV90aHM4MTM1X2Rh
Y190aW1pbmdzLAorCQkuZGF0YSA9ICZ0aV90aHM4MTM1X2JyaWRnZV90aW1pbmdzLAogCX0sCiAJ
ewogCQkuY29tcGF0aWJsZSA9ICJ0aSx0aHM4MTM0IiwKLQkJLmRhdGEgPSAmdGlfdGhzODEzNF9k
YWNfdGltaW5ncywKKwkJLmRhdGEgPSAmdGlfdGhzODEzNF9icmlkZ2VfdGltaW5ncywKIAl9LAog
CXt9LAogfTsKLU1PRFVMRV9ERVZJQ0VfVEFCTEUob2YsIGR1bWJfdmdhX21hdGNoKTsKK01PRFVM
RV9ERVZJQ0VfVEFCTEUob2YsIHNpbXBsZV9icmlkZ2VfbWF0Y2gpOwogCi1zdGF0aWMgc3RydWN0
IHBsYXRmb3JtX2RyaXZlciBkdW1iX3ZnYV9kcml2ZXIgPSB7Ci0JLnByb2JlCT0gZHVtYl92Z2Ff
cHJvYmUsCi0JLnJlbW92ZQk9IGR1bWJfdmdhX3JlbW92ZSwKK3N0YXRpYyBzdHJ1Y3QgcGxhdGZv
cm1fZHJpdmVyIHNpbXBsZV9icmlkZ2VfZHJpdmVyID0geworCS5wcm9iZQk9IHNpbXBsZV9icmlk
Z2VfcHJvYmUsCisJLnJlbW92ZQk9IHNpbXBsZV9icmlkZ2VfcmVtb3ZlLAogCS5kcml2ZXIJCT0g
ewogCQkubmFtZQkJPSAiZHVtYi12Z2EtZGFjIiwKLQkJLm9mX21hdGNoX3RhYmxlCT0gZHVtYl92
Z2FfbWF0Y2gsCisJCS5vZl9tYXRjaF90YWJsZQk9IHNpbXBsZV9icmlkZ2VfbWF0Y2gsCiAJfSwK
IH07Ci1tb2R1bGVfcGxhdGZvcm1fZHJpdmVyKGR1bWJfdmdhX2RyaXZlcik7Cittb2R1bGVfcGxh
dGZvcm1fZHJpdmVyKHNpbXBsZV9icmlkZ2VfZHJpdmVyKTsKIAogTU9EVUxFX0FVVEhPUigiTWF4
aW1lIFJpcGFyZCA8bWF4aW1lLnJpcGFyZEBmcmVlLWVsZWN0cm9ucy5jb20+Iik7Ci1NT0RVTEVf
REVTQ1JJUFRJT04oIkR1bWIgVkdBIERBQyBicmlkZ2UgZHJpdmVyIik7CitNT0RVTEVfREVTQ1JJ
UFRJT04oIlNpbXBsZSBEUk0gYnJpZGdlIGRyaXZlciIpOwogTU9EVUxFX0xJQ0VOU0UoIkdQTCIp
OwotLSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hhcnQKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
