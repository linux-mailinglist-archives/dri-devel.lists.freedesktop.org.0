Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DD2E06A53D
	for <lists+dri-devel@lfdr.de>; Tue, 16 Jul 2019 11:43:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1EEB96E105;
	Tue, 16 Jul 2019 09:43:47 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x449.google.com (mail-pf1-x449.google.com
 [IPv6:2607:f8b0:4864:20::449])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 605C86E102
 for <dri-devel@lists.freedesktop.org>; Tue, 16 Jul 2019 09:43:43 +0000 (UTC)
Received: by mail-pf1-x449.google.com with SMTP id d190so12043515pfa.0
 for <dri-devel@lists.freedesktop.org>; Tue, 16 Jul 2019 02:43:43 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=VNU/7iG3+u1QwiGu5J7HIELK8MLGBiKgkjqEeLb8ouY=;
 b=j2jEeBogCpaFdvL1brfAIGyILPC7033fAJBQayHl4xiJnDKg1V/RkRcw0guayDRWrX
 Vn31ANgF9pidBhmUiNYTVcDKHcksGU2O+9YJ6mt7eknzHO4YKRJ9Z2na2CKfW7zY2BQM
 2qjVPghA+M5uv0fEiNTUi9DBB1ZLswCCLZCE78lx0mXKU2W4mGTZZRR1Odf+nYjWnCui
 uT1yNWD2LBtmhJlIl4VfN9hIfwvGi7pSyr2zPE8Fl4XGJVMe86exJOkRGHkutZgX04Eb
 wZP47vw2UiFpNqVJEmBhAPLKNCogQhzzoM27X8vWfcMz8DfH06fA38bHcFqzXY8gLN+Y
 Ze/A==
X-Gm-Message-State: APjAAAV0TR3UBisZa6JRMjgJKKs4WgrQ9cd6ATRdrGIs0df0kl4HZ4IH
 awXgmlRr+gytqwYA6FulLyGng50TVgvOcW74sMBdsw==
X-Google-Smtp-Source: APXvYqzRv95sBsJd1wkxnIs164ynQfXdEm2QoPjoEWsa7jTr0YvbDJQ1lNHwaUJE294KN3i5njAt6frMNdAmBc5IT8pRyQ==
X-Received: by 2002:a63:505a:: with SMTP id q26mr31469275pgl.18.1563270222295; 
 Tue, 16 Jul 2019 02:43:42 -0700 (PDT)
Date: Tue, 16 Jul 2019 02:42:56 -0700
In-Reply-To: <20190716094302.180360-1-brendanhiggins@google.com>
Message-Id: <20190716094302.180360-13-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190716094302.180360-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.22.0.510.g264f2c817a-goog
Subject: [PATCH v10 12/18] kunit: test: add tests for KUnit managed resources
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=VNU/7iG3+u1QwiGu5J7HIELK8MLGBiKgkjqEeLb8ouY=;
 b=YNnurK4pvwWbTg0WVeiNnQ0x1mtoxrPjkvu0u+/9rb8uIZyBwT7mjIV9yrXCxgI4gW
 i7TresF4BAIfHRs4SH05yli3T+y9BcUCfFjD2sAYraY6CCvo1fudMc+rpCzEIWjlL1e7
 XpMgZ6nkkEZRkF5hFaqF/Gbx4x5oP4CL2pbhZeNE46WvCZFl5woEiSDxrZ1rIpTikZ4p
 0vYsPh6Sn2xJXDg+pzXVdUrJcBN685I9VueNepGeiYhDbYFepgn/xpCmAD0j8xD5vCL0
 7uI3xTKEadEQizpxw+/7TLHdFT1v8Sn3Zf/rKn5dhZ/Wga657coBHyz2fC+VQn3qagFf
 qatg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com,
 Avinash Kondareddy <akndr41@gmail.com>, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogQXZpbmFzaCBLb25kYXJlZGR5IDxha25kcjQxQGdtYWlsLmNvbT4KCkFkZCB1bml0IHRl
c3RzIGZvciBLVW5pdCBtYW5hZ2VkIHJlc291cmNlcy4gS1VuaXQgbWFuYWdlZCByZXNvdXJjZXMK
KHN0cnVjdCBrdW5pdF9yZXNvdXJjZSkgYXJlIHJlc291cmNlcyB0aGF0IGFyZSBhdXRvbWF0aWNh
bGx5IGNsZWFuZWQgdXAKYXQgdGhlIGVuZCBvZiBhIEtVbml0IHRlc3QsIHNpbWlsYXIgdG8gdGhl
IGNvbmNlcHQgb2YgZGV2bV8qIG1hbmFnZWQKcmVzb3VyY2VzLgoKU2lnbmVkLW9mZi1ieTogQXZp
bmFzaCBLb25kYXJlZGR5IDxha25kcjQxQGdtYWlsLmNvbT4KU2lnbmVkLW9mZi1ieTogQnJlbmRh
biBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29tPgpSZXZpZXdlZC1ieTogR3JlZyBL
cm9haC1IYXJ0bWFuIDxncmVna2hAbGludXhmb3VuZGF0aW9uLm9yZz4KUmV2aWV3ZWQtYnk6IExv
Z2FuIEd1bnRob3JwZSA8bG9nYW5nQGRlbHRhdGVlLmNvbT4KLS0tCiBrdW5pdC90ZXN0LXRlc3Qu
YyB8IDIyNSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAx
IGZpbGUgY2hhbmdlZCwgMjI1IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9rdW5pdC90ZXN0
LXRlc3QuYyBiL2t1bml0L3Rlc3QtdGVzdC5jCmluZGV4IDA1OGYzZmIzNzQ1OGEuLjcyNWYxNDg2
Mzc2ZmEgMTAwNjQ0Ci0tLSBhL2t1bml0L3Rlc3QtdGVzdC5jCisrKyBiL2t1bml0L3Rlc3QtdGVz
dC5jCkBAIC0xMDEsMyArMTAxLDIyOCBAQCBzdGF0aWMgc3RydWN0IGt1bml0X3N1aXRlIGt1bml0
X3RyeV9jYXRjaF90ZXN0X3N1aXRlID0gewogCS50ZXN0X2Nhc2VzID0ga3VuaXRfdHJ5X2NhdGNo
X3Rlc3RfY2FzZXMsCiB9Owoga3VuaXRfdGVzdF9zdWl0ZShrdW5pdF90cnlfY2F0Y2hfdGVzdF9z
dWl0ZSk7CisKKy8qCisgKiBDb250ZXh0IGZvciB0ZXN0aW5nIHRlc3QgbWFuYWdlZCByZXNvdXJj
ZXMKKyAqIGlzX3Jlc291cmNlX2luaXRpYWxpemVkIGlzIHVzZWQgdG8gdGVzdCBhcmJpdHJhcnkg
cmVzb3VyY2VzCisgKi8KK3N0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRleHQgeworCXN0
cnVjdCBrdW5pdCB0ZXN0OworCWJvb2wgaXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQ7CisJaW50IGFs
bG9jYXRlX29yZGVyWzJdOworCWludCBmcmVlX29yZGVyWzJdOworfTsKKworc3RhdGljIGludCBm
YWtlX3Jlc291cmNlX2luaXQoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMsIHZvaWQgKmNvbnRl
eHQpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gY29udGV4
dDsKKworCXJlcy0+YWxsb2NhdGlvbiA9ICZjdHgtPmlzX3Jlc291cmNlX2luaXRpYWxpemVkOwor
CWN0eC0+aXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQgPSB0cnVlOworCXJldHVybiAwOworfQorCitz
dGF0aWMgdm9pZCBmYWtlX3Jlc291cmNlX2ZyZWUoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMp
Cit7CisJYm9vbCAqaXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQgPSByZXMtPmFsbG9jYXRpb247CisK
KwkqaXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQgPSBmYWxzZTsKK30KKworc3RhdGljIHZvaWQga3Vu
aXRfcmVzb3VyY2VfdGVzdF9pbml0X3Jlc291cmNlcyhzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJ
c3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsKKwor
CWt1bml0X2luaXRfdGVzdCgmY3R4LT50ZXN0LCAidGVzdGluZ190ZXN0X2luaXRfdGVzdCIpOwor
CisJS1VOSVRfRVhQRUNUX1RSVUUodGVzdCwgbGlzdF9lbXB0eSgmY3R4LT50ZXN0LnJlc291cmNl
cykpOworfQorCitzdGF0aWMgdm9pZCBrdW5pdF9yZXNvdXJjZV90ZXN0X2FsbG9jX3Jlc291cmNl
KHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250
ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzOworCWt1
bml0X3Jlc291cmNlX2ZyZWVfdCBmcmVlID0gZmFrZV9yZXNvdXJjZV9mcmVlOworCisJcmVzID0g
a3VuaXRfYWxsb2NfYW5kX2dldF9yZXNvdXJjZSgmY3R4LT50ZXN0LAorCQkJCQkgICBmYWtlX3Jl
c291cmNlX2luaXQsCisJCQkJCSAgIGZha2VfcmVzb3VyY2VfZnJlZSwKKwkJCQkJICAgR0ZQX0tF
Uk5FTCwKKwkJCQkJICAgY3R4KTsKKworCUtVTklUX0FTU0VSVF9OT1RfRVJSX09SX05VTEwodGVz
dCwgcmVzKTsKKwlLVU5JVF9FWFBFQ1RfUFRSX0VRKHRlc3QsCisJCQkgICAgJmN0eC0+aXNfcmVz
b3VyY2VfaW5pdGlhbGl6ZWQsCisJCQkgICAgKGJvb2wgKikgcmVzLT5hbGxvY2F0aW9uKTsKKwlL
VU5JVF9FWFBFQ1RfVFJVRSh0ZXN0LCBsaXN0X2lzX2xhc3QoJnJlcy0+bm9kZSwgJmN0eC0+dGVz
dC5yZXNvdXJjZXMpKTsKKwlLVU5JVF9FWFBFQ1RfUFRSX0VRKHRlc3QsIGZyZWUsIHJlcy0+ZnJl
ZSk7Cit9CisKK3N0YXRpYyB2b2lkIGt1bml0X3Jlc291cmNlX3Rlc3RfZnJlZV9yZXNvdXJjZShz
dHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4
dCAqY3R4ID0gdGVzdC0+cHJpdjsKKwlzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlcyA9IGt1bml0
X2FsbG9jX2FuZF9nZXRfcmVzb3VyY2UoCisJCQkmY3R4LT50ZXN0LAorCQkJZmFrZV9yZXNvdXJj
ZV9pbml0LAorCQkJZmFrZV9yZXNvdXJjZV9mcmVlLAorCQkJR0ZQX0tFUk5FTCwKKwkJCWN0eCk7
CisKKwlrdW5pdF9mcmVlX3Jlc291cmNlKCZjdHgtPnRlc3QsIHJlcyk7CisKKwlLVU5JVF9FWFBF
Q1RfRkFMU0UodGVzdCwgY3R4LT5pc19yZXNvdXJjZV9pbml0aWFsaXplZCk7CisJS1VOSVRfRVhQ
RUNUX1RSVUUodGVzdCwgbGlzdF9lbXB0eSgmY3R4LT50ZXN0LnJlc291cmNlcykpOworfQorCitz
dGF0aWMgdm9pZCBrdW5pdF9yZXNvdXJjZV90ZXN0X2NsZWFudXBfcmVzb3VyY2VzKHN0cnVjdCBr
dW5pdCAqdGVzdCkKK3sKKwlpbnQgaTsKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250
ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzb3VyY2Vz
WzVdOworCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUocmVzb3VyY2VzKTsgaSsrKSB7CisJ
CXJlc291cmNlc1tpXSA9IGt1bml0X2FsbG9jX2FuZF9nZXRfcmVzb3VyY2UoJmN0eC0+dGVzdCwK
KwkJCQkJCQkgICAgZmFrZV9yZXNvdXJjZV9pbml0LAorCQkJCQkJCSAgICBmYWtlX3Jlc291cmNl
X2ZyZWUsCisJCQkJCQkJICAgIEdGUF9LRVJORUwsCisJCQkJCQkJICAgIGN0eCk7CisJfQorCisJ
a3VuaXRfY2xlYW51cCgmY3R4LT50ZXN0KTsKKworCUtVTklUX0VYUEVDVF9UUlVFKHRlc3QsIGxp
c3RfZW1wdHkoJmN0eC0+dGVzdC5yZXNvdXJjZXMpKTsKK30KKworc3RhdGljIHZvaWQga3VuaXRf
cmVzb3VyY2VfdGVzdF9tYXJrX29yZGVyKGludCBvcmRlcl9hcnJheVtdLAorCQkJCQkgICBzaXpl
X3Qgb3JkZXJfc2l6ZSwKKwkJCQkJICAgaW50IGtleSkKK3sKKwlpbnQgaTsKKworCWZvciAoaSA9
IDA7IGkgPCBvcmRlcl9zaXplICYmIG9yZGVyX2FycmF5W2ldOyBpKyspCisJCTsKKworCW9yZGVy
X2FycmF5W2ldID0ga2V5OworfQorCisjZGVmaW5lIEtVTklUX1JFU09VUkNFX1RFU1RfTUFSS19P
UkRFUihjdHgsIG9yZGVyX2ZpZWxkLCBrZXkpCQkgICAgICAgXAorCQlrdW5pdF9yZXNvdXJjZV90
ZXN0X21hcmtfb3JkZXIoY3R4LT5vcmRlcl9maWVsZCwJICAgICAgIFwKKwkJCQkJICAgICAgIEFS
UkFZX1NJWkUoY3R4LT5vcmRlcl9maWVsZCksICAgXAorCQkJCQkgICAgICAga2V5KQorCitzdGF0
aWMgaW50IGZha2VfcmVzb3VyY2VfMl9pbml0KHN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzLCB2
b2lkICpjb250ZXh0KQoreworCXN0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRleHQgKmN0
eCA9IGNvbnRleHQ7CisKKwlLVU5JVF9SRVNPVVJDRV9URVNUX01BUktfT1JERVIoY3R4LCBhbGxv
Y2F0ZV9vcmRlciwgMik7CisKKwlyZXMtPmFsbG9jYXRpb24gPSBjdHg7CisKKwlyZXR1cm4gMDsK
K30KKworc3RhdGljIHZvaWQgZmFrZV9yZXNvdXJjZV8yX2ZyZWUoc3RydWN0IGt1bml0X3Jlc291
cmNlICpyZXMpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0g
cmVzLT5hbGxvY2F0aW9uOworCisJS1VOSVRfUkVTT1VSQ0VfVEVTVF9NQVJLX09SREVSKGN0eCwg
ZnJlZV9vcmRlciwgMik7Cit9CisKK3N0YXRpYyBpbnQgZmFrZV9yZXNvdXJjZV8xX2luaXQoc3Ry
dWN0IGt1bml0X3Jlc291cmNlICpyZXMsIHZvaWQgKmNvbnRleHQpCit7CisJc3RydWN0IGt1bml0
X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gY29udGV4dDsKKworCWt1bml0X2FsbG9jX2Fu
ZF9nZXRfcmVzb3VyY2UoJmN0eC0+dGVzdCwKKwkJCQkgICAgIGZha2VfcmVzb3VyY2VfMl9pbml0
LAorCQkJCSAgICAgZmFrZV9yZXNvdXJjZV8yX2ZyZWUsCisJCQkJICAgICBHRlBfS0VSTkVMLAor
CQkJCSAgICAgY3R4KTsKKworCUtVTklUX1JFU09VUkNFX1RFU1RfTUFSS19PUkRFUihjdHgsIGFs
bG9jYXRlX29yZGVyLCAxKTsKKworCXJlcy0+YWxsb2NhdGlvbiA9IGN0eDsKKworCXJldHVybiAw
OworfQorCitzdGF0aWMgdm9pZCBmYWtlX3Jlc291cmNlXzFfZnJlZShzdHJ1Y3Qga3VuaXRfcmVz
b3VyY2UgKnJlcykKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0ICpjdHgg
PSByZXMtPmFsbG9jYXRpb247CisKKwlLVU5JVF9SRVNPVVJDRV9URVNUX01BUktfT1JERVIoY3R4
LCBmcmVlX29yZGVyLCAxKTsKK30KKworLyoKKyAqIFRPRE8oYnJlbmRhbmhpZ2dpbnNAZ29vZ2xl
LmNvbSk6IHJlcGxhY2UgdGhlIGFycmF5cyB0aGF0IGtlZXAgdHJhY2sgb2YgdGhlCisgKiBvcmRl
ciBvZiBhbGxvY2F0aW9uIGFuZCBmcmVlaW5nIHdpdGggc3RyaWN0IG1vY2tzIHVzaW5nIHRoZSBJ
Tl9TRVFVRU5DRSBtYWNybworICogdG8gYXNzZXJ0IGFsbG9jYXRpb24gYW5kIGZyZWVpbmcgb3Jk
ZXIgd2hlbiB0aGUgZmVhdHVyZSBiZWNvbWVzIGF2YWlsYWJsZS4KKyAqLworc3RhdGljIHZvaWQg
a3VuaXRfcmVzb3VyY2VfdGVzdF9wcm9wZXJfZnJlZV9vcmRlcmluZyhzdHJ1Y3Qga3VuaXQgKnRl
c3QpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gdGVzdC0+
cHJpdjsKKworCS8qIGZha2VfcmVzb3VyY2VfMSBhbGxvY2F0ZXMgYSBmYWtlX3Jlc291cmNlXzIg
aW4gaXRzIGluaXQuICovCisJa3VuaXRfYWxsb2NfYW5kX2dldF9yZXNvdXJjZSgmY3R4LT50ZXN0
LAorCQkJCSAgICAgZmFrZV9yZXNvdXJjZV8xX2luaXQsCisJCQkJICAgICBmYWtlX3Jlc291cmNl
XzFfZnJlZSwKKwkJCQkgICAgIEdGUF9LRVJORUwsCisJCQkJICAgICBjdHgpOworCisJLyoKKwkg
KiBTaW5jZSBmYWtlX3Jlc291cmNlXzJfaW5pdCBjYWxscyBLVU5JVF9SRVNPVVJDRV9URVNUX01B
UktfT1JERVIKKwkgKiBiZWZvcmUgcmV0dXJuaW5nIHRvIGZha2VfcmVzb3VyY2VfMV9pbml0LCBp
dCBzaG91bGQgYmUgdGhlIGZpcnN0IHRvCisJICogcHV0IGl0cyBrZXkgaW4gdGhlIGFsbG9jYXRl
X29yZGVyIGFycmF5LgorCSAqLworCUtVTklUX0VYUEVDVF9FUSh0ZXN0LCBjdHgtPmFsbG9jYXRl
X29yZGVyWzBdLCAyKTsKKwlLVU5JVF9FWFBFQ1RfRVEodGVzdCwgY3R4LT5hbGxvY2F0ZV9vcmRl
clsxXSwgMSk7CisKKwlrdW5pdF9jbGVhbnVwKCZjdHgtPnRlc3QpOworCisJLyoKKwkgKiBCZWNh
dXNlIGZha2VfcmVzb3VyY2VfMiBmaW5pc2hlcyBhbGxvY2F0aW9uIGJlZm9yZSBmYWtlX3Jlc291
cmNlXzEsCisJICogZmFrZV9yZXNvdXJjZV8xIHNob3VsZCBiZSBmcmVlZCBmaXJzdCBzaW5jZSBp
dCBjb3VsZCBkZXBlbmQgb24KKwkgKiBmYWtlX3Jlc291cmNlXzIuCisJICovCisJS1VOSVRfRVhQ
RUNUX0VRKHRlc3QsIGN0eC0+ZnJlZV9vcmRlclswXSwgMSk7CisJS1VOSVRfRVhQRUNUX0VRKHRl
c3QsIGN0eC0+ZnJlZV9vcmRlclsxXSwgMik7Cit9CisKK3N0YXRpYyBpbnQga3VuaXRfcmVzb3Vy
Y2VfdGVzdF9pbml0KHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9y
ZXNvdXJjZV9jb250ZXh0ICpjdHggPQorCQkJa3phbGxvYyhzaXplb2YoKmN0eCksIEdGUF9LRVJO
RUwpOworCisJaWYgKCFjdHgpCisJCXJldHVybiAtRU5PTUVNOworCisJdGVzdC0+cHJpdiA9IGN0
eDsKKworCWt1bml0X2luaXRfdGVzdCgmY3R4LT50ZXN0LCAidGVzdF90ZXN0X2NvbnRleHQiKTsK
KworCXJldHVybiAwOworfQorCitzdGF0aWMgdm9pZCBrdW5pdF9yZXNvdXJjZV90ZXN0X2V4aXQo
c3RydWN0IGt1bml0ICp0ZXN0KQoreworCXN0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRl
eHQgKmN0eCA9IHRlc3QtPnByaXY7CisKKwlrdW5pdF9jbGVhbnVwKCZjdHgtPnRlc3QpOworCWtm
cmVlKGN0eCk7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qga3VuaXRfY2FzZSBrdW5pdF9yZXNvdXJjZV90
ZXN0X2Nhc2VzW10gPSB7CisJS1VOSVRfQ0FTRShrdW5pdF9yZXNvdXJjZV90ZXN0X2luaXRfcmVz
b3VyY2VzKSwKKwlLVU5JVF9DQVNFKGt1bml0X3Jlc291cmNlX3Rlc3RfYWxsb2NfcmVzb3VyY2Up
LAorCUtVTklUX0NBU0Uoa3VuaXRfcmVzb3VyY2VfdGVzdF9mcmVlX3Jlc291cmNlKSwKKwlLVU5J
VF9DQVNFKGt1bml0X3Jlc291cmNlX3Rlc3RfY2xlYW51cF9yZXNvdXJjZXMpLAorCUtVTklUX0NB
U0Uoa3VuaXRfcmVzb3VyY2VfdGVzdF9wcm9wZXJfZnJlZV9vcmRlcmluZyksCisJe30KK307CisK
K3N0YXRpYyBzdHJ1Y3Qga3VuaXRfc3VpdGUga3VuaXRfcmVzb3VyY2VfdGVzdF9zdWl0ZSA9IHsK
KwkubmFtZSA9ICJrdW5pdC1yZXNvdXJjZS10ZXN0IiwKKwkuaW5pdCA9IGt1bml0X3Jlc291cmNl
X3Rlc3RfaW5pdCwKKwkuZXhpdCA9IGt1bml0X3Jlc291cmNlX3Rlc3RfZXhpdCwKKwkudGVzdF9j
YXNlcyA9IGt1bml0X3Jlc291cmNlX3Rlc3RfY2FzZXMsCit9Owora3VuaXRfdGVzdF9zdWl0ZShr
dW5pdF9yZXNvdXJjZV90ZXN0X3N1aXRlKTsKLS0gCjIuMjIuMC41MTAuZzI2NGYyYzgxN2EtZ29v
ZwoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRl
dmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
