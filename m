Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B415CE4549
	for <lists+dri-devel@lfdr.de>; Fri, 25 Oct 2019 10:11:54 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A193B6E8DB;
	Fri, 25 Oct 2019 08:11:51 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lf1-x143.google.com (mail-lf1-x143.google.com
 [IPv6:2a00:1450:4864:20::143])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 75B536E451
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 15:57:42 +0000 (UTC)
Received: by mail-lf1-x143.google.com with SMTP id 21so10634253lft.10
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 08:57:42 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-language
 :content-transfer-encoding;
 bh=9C7qWbQUfHweD+lnp7y/kXROlB8PIYgY0QOAcJ9wfTQ=;
 b=an/S0qvHK5nTCR8CFvoZTGohlQwDDl//I0jCDETDOGUXGcIQVE+GJ78r5nOiIa68qo
 esPknczcAZUJ/yefRztLazjUPoO676r9cKWElYJIoWJTSVRwnZa0i3EFuEwZWGonnaDb
 WI1SRYVHnfCOgWEolEppWZjc5o1U447o5sjJtQsu5rS7SCniojxsAHHlWUhUplmWy4yW
 6dc01xxcMX6tUNqp39H2BpcypfNxZxCCNJwQqyvYqUOqUldXTgfbnv5iH8wJPZvfRZO3
 hc3P6yFsuupMTYwmjAIBNEDOvlAyUpMYcsGWX9e1RdOXXmT3eHbekqw5TnEHPvT0GZ+X
 THbg==
X-Gm-Message-State: APjAAAU6j0f9DSpPdFOFIDtQuBI2RhGvS/0o7TOloEocvFERbiPYheCC
 GU9gQu3FfFHClBBijmwH9U0n7FJ6
X-Google-Smtp-Source: APXvYqzVAvxGU7Y90W6C9RuUQfNK5Mr3+sPbPW02XbgSIEGqNKD9sbUUmllizQrK9XIWJNZNy23FQw==
X-Received: by 2002:a19:957:: with SMTP id 84mr3098136lfj.123.1571932660794;
 Thu, 24 Oct 2019 08:57:40 -0700 (PDT)
Received: from [192.168.2.145] (94-29-10-250.dynamic.spd-mgts.ru.
 [94.29.10.250])
 by smtp.googlemail.com with ESMTPSA id g3sm12049496lja.61.2019.10.24.08.57.40
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Thu, 24 Oct 2019 08:57:40 -0700 (PDT)
Subject: Re: [PATCH v1 2/3] drm/tegra: Fix 2d and 3d clients detaching from
 IOMMU domain
To: Thierry Reding <thierry.reding@gmail.com>
References: <20190623173743.24088-1-digetx@gmail.com>
 <20190623173743.24088-2-digetx@gmail.com> <20191024115804.GB2924027@ulmo>
 <45926d95-3e7a-c56b-402a-2b2c6475c5db@gmail.com>
 <20191024135018.GD2924027@ulmo>
 <38a67df0-2ede-e7fe-8eca-6c4491cdcc7b@gmail.com>
 <20191024155620.GG2924027@ulmo>
From: Dmitry Osipenko <digetx@gmail.com>
Message-ID: <bfc6c17d-f2df-32d0-67d6-2f763c81d7fc@gmail.com>
Date: Thu, 24 Oct 2019 18:57:39 +0300
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.1.1
MIME-Version: 1.0
In-Reply-To: <20191024155620.GG2924027@ulmo>
Content-Language: en-US
X-Mailman-Approved-At: Fri, 25 Oct 2019 08:11:50 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=subject:to:cc:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-language:content-transfer-encoding;
 bh=9C7qWbQUfHweD+lnp7y/kXROlB8PIYgY0QOAcJ9wfTQ=;
 b=uziN4zNCsPWLF4/6Vno9WykuGcESJ3Wst+AFioqRiiCKYNv2KjZToOnVVX1XNVVOq6
 U0scwUQCwHLGYGOc90jg5AC+M4HGD3b6BnmckYXQL7vMWkD149Q6UEMfa/6v6m38Ryh7
 3suq+KNGwo0vumQjsSJjxfQcjR39siUS2Bith0hB6UUUUnZIxy1FViRU2/kDy02kRjGl
 QY/iVqsEalBi3t55aonJ0yHZTwoHz18Pd4CiCkwAvtgEsy8JVyhYCfQYjo9O7lXEIrHY
 TBnrrStZbdrYDbHNPmJtQc2pxoNzRgM0rt2XgvX9x4KiMa7fAN4O5s5LJ1oelsI1Gwhx
 lxHw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-tegra@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

MjQuMTAuMjAxOSAxODo1NiwgVGhpZXJyeSBSZWRpbmcg0L/QuNGI0LXRgjoKPiBPbiBUaHUsIE9j
dCAyNCwgMjAxOSBhdCAwNjo0NzoyM1BNICswMzAwLCBEbWl0cnkgT3NpcGVua28gd3JvdGU6Cj4+
IDI0LjEwLjIwMTkgMTY6NTAsIFRoaWVycnkgUmVkaW5nINC/0LjRiNC10YI6Cj4+PiBPbiBUaHUs
IE9jdCAyNCwgMjAxOSBhdCAwNDoyODo0MVBNICswMzAwLCBEbWl0cnkgT3NpcGVua28gd3JvdGU6
Cj4+Pj4gMjQuMTAuMjAxOSAxNDo1OCwgVGhpZXJyeSBSZWRpbmcg0L/QuNGI0LXRgjoKPj4+Pj4g
T24gU3VuLCBKdW4gMjMsIDIwMTkgYXQgMDg6Mzc6NDJQTSArMDMwMCwgRG1pdHJ5IE9zaXBlbmtv
IHdyb3RlOgo+Pj4+Pj4gVGhpcyBzaG91bGQgc2hvdWxkIGZpcmUgdXAgb24gdGhlIERSTSdzIGRy
aXZlciBtb2R1bGUgcmUtbG9hZGVyIGJlY2F1c2UKPj4+Pj4+IHRoZXJlIHdvbid0IGJlIGVub3Vn
aCBhdmFpbGFibGUgZG9tYWlucyBvbiBvbGRlciBUZWdyYSBTb0NzLgo+Pj4+Pj4KPj4+Pj4+IENj
OiBzdGFibGUgPHN0YWJsZUB2Z2VyLmtlcm5lbC5vcmc+Cj4+Pj4+PiBGaXhlczogMGM0MDdkZTVl
ZDFhICgiZHJtL3RlZ3JhOiBSZWZhY3RvciBJT01NVSBhdHRhY2gvZGV0YWNoIikKPj4+Pj4+IFNp
Z25lZC1vZmYtYnk6IERtaXRyeSBPc2lwZW5rbyA8ZGlnZXR4QGdtYWlsLmNvbT4KPj4+Pj4+IC0t
LQo+Pj4+Pj4gIGRyaXZlcnMvZ3B1L2RybS90ZWdyYS9kYy5jICAgfCA0ICsrLS0KPj4+Pj4+ICBk
cml2ZXJzL2dwdS9kcm0vdGVncmEvZHJtLmMgIHwgOSArKysrKystLS0KPj4+Pj4+ICBkcml2ZXJz
L2dwdS9kcm0vdGVncmEvZHJtLmggIHwgMyArKy0KPj4+Pj4+ICBkcml2ZXJzL2dwdS9kcm0vdGVn
cmEvZ3IyZC5jIHwgNCArKy0tCj4+Pj4+PiAgZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2dyM2QuYyB8
IDQgKystLQo+Pj4+Pj4gIDUgZmlsZXMgY2hhbmdlZCwgMTQgaW5zZXJ0aW9ucygrKSwgMTAgZGVs
ZXRpb25zKC0pCj4+Pj4+Cj4+Pj4+IEkgdGhpbmsgSSB1bmRlcnN0YW5kIHdoYXQgdGhpcyBpcyB0
cnlpbmcgdG8gZG8sIGJ1dCB0aGUgY29tbWl0IG1lc3NhZ2UKPj4+Pj4gZG9lcyBub3QgaGVscCBh
dCBhbGwuIFNvIHdoYXQncyByZWFsbHkgZ29pbmcgb24gaGVyZSBpcyB0aGF0IHdlIG5lZWQgdG8K
Pj4+Pj4gZGV0YWNoIHRoZSBkZXZpY2UgZnJvbSB0aGUgZ3JvdXAgcmVnYXJkbGVzcyBvZiB3aGV0
aGVyIHdlJ3JlIHNoYXJpbmcgdGhlCj4+Pj4+IGdyb3VwIG9yIG5vdCwganVzdCBsaWtlIHdlIGF0
dGFjaCBncm91cHMgdG8gdGhlIHNoYXJlZCBkb21haW4gd2hldGhlcgo+Pj4+PiB0aGV5IHNoYXJl
IHRoZSBzYW1lIGdyb3VwIG9yIG5vdC4KPj4+Pgo+Pj4+IFllcywgdGhlIGNvbW1pdCdzIG1lc3Nh
Z2UgY291bGQgYmUgaW1wcm92ZWQuCj4+Pj4KPj4+Pj4gQnV0IGluIHRoYXQgY2FzZSwgSSB3b25k
ZXIgaWYgaXQncyBldmVuIHdvcnRoIHNwbGl0dGluZyBncm91cHMgdGhlIHdheQo+Pj4+PiB3ZSBh
cmUgcmlnaHQgbm93LiBXb3VsZG4ndCBpdCBiZSBiZXR0ZXIgdG8ganVzdCBwdXQgYWxsIHRoZSBk
ZXZpY2VzIGludG8KPj4+Pj4gdGhlIHNhbWUgZ3JvdXAgYW5kIGJlIGRvbmUgd2l0aCBpdD8KPj4+
Pj4KPj4+Pj4gVGhlIGN1cnJlbnQgY29kZSBnaXZlcyBtZSBoZWFkYWNoZXMgZXZlcnkgdGltZSBJ
IHJlYWQgaXQsIHNvIGlmIHdlIGNhbgo+Pj4+PiBqdXN0IG1ha2UgaXQgc28gdGhhdCBhbGwgdGhl
IGRldmljZXMgdW5kZXIgdGhlIERSTSBkZXZpY2Ugc2hhcmUgdGhlIHNhbWUKPj4+Pj4gZ3JvdXAs
IHRoaXMgd291bGQgYmVjb21lIGEgbG90IGVhc2llciB0byBkZWFsIHdpdGguIEknbSBub3QgcmVh
bGx5Cj4+Pj4+IGNvbnZpbmNlZCB0aGF0IGl0IG1ha2VzIG11Y2ggc2Vuc2UgdG8ga2VlcCB0aGVt
IG9uIHNlcGFyYXRlIGRvbWFpbnMsCj4+Pj4+IGVzcGVjaWFsbHkgZ2l2ZW4gdGhlIGNvbnN0cmFp
bnRzIG9uIHRoZSBudW1iZXIgb2YgZG9tYWlucyBhdmFpbGFibGUgb24KPj4+Pj4gZWFybGllciBU
ZWdyYSBkZXZpY2VzLgo+Pj4+Pgo+Pj4+PiBOb3RlIHRoYXQgc2hhcmluZyBhIGdyb3VwIHdpbGwg
YWxzbyBtYWtlIGl0IG11Y2ggZWFzaWVyIGZvciB0aGVzZSB0byB1c2UKPj4+Pj4gdGhlIERNQSBB
UEkgaWYgaXQgaXMgYmFja2VkIGJ5IGFuIElPTU1VLgo+Pj4+Cj4+Pj4gUHJvYmFibHkgSSdtIGJs
YW5raW5nIG9uIGV2ZXJ5dGhpbmcgYWJvdXQgSU9NTVUgbm93Li4gY291bGQgeW91IHBsZWFzZQo+
Pj4+IHJlbWluZCBtZSB3aGF0ICJJT01NVSBncm91cCIgaXM/Cj4+Pj4KPj4+PiBJc24ndCBpdCB0
aGF0IGVhY2ggSU9NTVUgZ3JvdXAgcmVsYXRlcyB0byB0aGUgSFcgSUQgKFNXR1JPVVApPyBCdXQg
dGhlbgo+Pj4+IGVhY2ggZGlzcGxheSBjb250cm9sbGVyIGhhcyBpdHMgb3duIFNXR1JPVVAuLiBh
bmQgdGh1cyB0aGF0IHNoYXJpbmcganVzdAo+Pj4+IGRvZXNuJ3QgbWFrZSBhbnkgc2Vuc2UsIGht
Lgo+Pj4KPj4+IElPTU1VIGdyb3VwcyBhcmUgbm90IGRpcmVjdGx5IHJlbGF0ZWQgdG8gU1dHUk9V
UHMuIEJ1dCBieSBkZWZhdWx0IHRoZQo+Pj4gSU9NTVUgZnJhbWV3b3JrIHdpbGwgc2hhcmUgYSBk
b21haW4gYmV0d2VlbiBtZW1iZXJzIG9mIHRoZSBzYW1lIElPTU1VCj4+PiBncm91cC4KPj4KPj4g
QWgsIEkgcmUtZmlndXJlZCBvdXQgdGhhdCBhZ2Fpbi4gVGhlIG1lbW9yeSBjb250cm9sbGVyIGRy
aXZlcnMgYXJlCj4+IGRlZmluaW5nIGEgc2luZ2xlICJJT01NVSBncm91cCIgZm9yIGJvdGggb2Yg
dGhlIGRpc3BsYXkgY29udHJvbGxlcnMuCj4+Cj4+PiBTZWVtcyBsaWtlIHRoYXQncyByZWFsbHkg
d2hhdCB3ZSB3YW50IGhlcmUsIHNvIHRoYXQgd2hlbiB3ZSBkbwo+Pj4gdXNlIHRoZSBETUEgQVBJ
LCBhbGwgdGhlIGRldmljZXMgcGFydCBvZiB0aGUgRFJNIGRldmljZSBnZXQgYXR0YWNoZWQgdG8K
Pj4+IHRoZSBzYW1lIElPTU1VIGRvbWFpbiwgeWV0IGlmIHdlIGRvbid0IHdhbnQgdG8gdXNlIHRo
ZSBETUEgQVBJIHdlIG9ubHkKPj4+IG5lZWQgdG8gZGV0YWNoIHRoZSBvbmUgZ3JvdXAgZnJvbSB0
aGUgYmFja2luZy4KPj4KPj4gWWVzLCBpdCBzaG91bGQgYmUgb2theSB0byBwdXQgYWxsIERSTSBk
ZXZpY2VzIGludG8gdGhlIHNhbWUgZ3JvdXAsIGxpa2UKPj4gaXQgaXMgZG9uZSBub3cgZm9yIHRo
ZSBkaXNwbGF5cy4gSXQgYWxzbyBzaG91bGQgcmVzb2x2ZSBwcm9ibGVtIHdpdGggdGhlCj4+IGRv
bWFpbnMgc2hvcnRhZ2Ugb24gVDMwIHNpbmNlIG5vdyB0aGVyZSBhcmUgbWF4aW11bSAzIGRvbWFp
bnMgaW4gdXNlOgo+PiBob3N0MXgsIGRybSBhbmQgdmRlLgo+Pgo+PiBJIGFjdHVhbGx5IGp1c3Qg
Y2hlY2tlZCB0aGF0IHRoZSBvcmlnaW5hbCBwcm9ibGVtIHN0aWxsIGV4aXN0cwo+PiBhbmQgdGhp
cyBjaGFuZ2Ugc29sdmVzIGl0IGFzIHdlbGw6Cj4+Cj4+IC0tLQo+PiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9tZW1vcnkvdGVncmEvdGVncmEzMC5jIGIvZHJpdmVycy9tZW1vcnkvdGVncmEvdGVncmEz
MC5jCj4+IGluZGV4IDVhMGY2ZTBhMTY0My4uZTcxMDk2NDk4NDM2IDEwMDY0NAo+PiAtLS0gYS9k
cml2ZXJzL21lbW9yeS90ZWdyYS90ZWdyYTMwLmMKPj4gKysrIGIvZHJpdmVycy9tZW1vcnkvdGVn
cmEvdGVncmEzMC5jCj4+IEBAIC0xMDIxLDYgKzEwMjEsOSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0
IHRlZ3JhX3NtbXVfc3dncm91cAo+PiB0ZWdyYTMwX3N3Z3JvdXBzW10gPSB7Cj4+ICBzdGF0aWMg
Y29uc3QgdW5zaWduZWQgaW50IHRlZ3JhMzBfZ3JvdXBfZGlzcGxheVtdID0gewo+PiAgCVRFR1JB
X1NXR1JPVVBfREMsCj4+ICAJVEVHUkFfU1dHUk9VUF9EQ0IsCj4+ICsJVEVHUkFfU1dHUk9VUF9H
MiwKPj4gKwlURUdSQV9TV0dST1VQX05WLAo+PiArCVRFR1JBX1NXR1JPVVBfTlYyLAo+PiAgfTsK
Pj4KPj4gIHN0YXRpYyBjb25zdCBzdHJ1Y3QgdGVncmFfc21tdV9ncm91cF9zb2MgdGVncmEzMF9n
cm91cHNbXSA9IHsKPj4gLS0tCj4+Cj4+IFBsZWFzZSBsZXQgbWUga25vdyB3aGV0aGVyIHlvdSdy
ZSBnb2luZyB0byBtYWtlIGEgcGF0Y2ggb3IgaWYgSSBzaG91bGQKPj4gZG8gaXQuCj4gCj4gSSd2
ZSBiZWVuIHRlc3Rpbmcgd2l0aCBhIHNpbWlsYXIgY2hhbmdlIGFuZCBjb3VsZG4ndCBmaW5kIGFu
eQo+IHJlZ3Jlc3Npb25zLiBJJ3ZlIGFsc28gbWFkZSB0aGUgc2FtZSBtb2RpZmljYXRpb25zIGZv
ciBUZWdyYTExNCBhbmQKPiBUZWdyYTEyNC4KPiAKPiBBcmUgeW91IHNheWluZyB0aGF0IG5vbmUg
b2YgdGhlc2UgcGF0Y2hlcyBhcmUgbmVlZGVkIGFueW1vcmU/IE9yIGRvIHdlCj4gc3RpbGwgbmVl
ZCBhIHBhdGNoIHRvIGZpeCBkZXRhY2hpbmc/IEknbSB0aGlua2luZyB0aGF0IG1heWJlIHdlIGNh
bgo+IGRyYXN0cmljYWxseSBzaW1wbGlmeSB0aGUgZGV0YWNobWVudCBub3cgYnkgZHJvcHBpbmcg
dGhlIHNoYXJlZAo+IHBhcmFtZXRlciBhbHRvZ2V0aGVyLgo+IAo+IExldCBtZSBkcmFmdCBhIHBh
dGNoIGFuZCBzZW5kIG91dCB0aGUgd2hvbGUgc2V0IGZvciB0ZXN0aW5nLgoKU2VlbXMgaXQncyBz
dGlsbCBub3QgaWRlYWwgYmVjYXVzZSBJIG5vdGljZWQgdGhpcyBpbiBLTVNHOgoKWyAgICAwLjcw
MzE4NV0gRmFpbGVkIHRvIGF0dGFjaGVkIGRldmljZSA1NDIwMDAwMC5kYyB0byBJT01NVV9tYXBw
aW5nClsgICAgMC43MTA0MDRdIEZhaWxlZCB0byBhdHRhY2hlZCBkZXZpY2UgNTQyNDAwMDAuZGMg
dG8gSU9NTVVfbWFwcGluZwpbICAgIDAuNzE5MzQ3XSBGYWlsZWQgdG8gYXR0YWNoZWQgZGV2aWNl
IDU0MTQwMDAwLmdyMmQgdG8gSU9NTVVfbWFwcGluZwpbICAgIDAuNzE5NTY5XSBGYWlsZWQgdG8g
YXR0YWNoZWQgZGV2aWNlIDU0MTgwMDAwLmdyM2QgdG8gSU9NTVVfbWFwcGluZwoKd2hpY2ggY29t
ZXMgZnJvbSB0aGUgaW1wbGljaXQgSU9NTVUgYmFja2luZy4KX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2
ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
