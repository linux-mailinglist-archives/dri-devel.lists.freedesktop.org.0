Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EF98157CD0
	for <lists+dri-devel@lfdr.de>; Thu, 27 Jun 2019 09:11:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6D2E06E5C3;
	Thu, 27 Jun 2019 07:11:27 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from inva021.nxp.com (inva021.nxp.com [92.121.34.21])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1E0206E366
 for <dri-devel@lists.freedesktop.org>; Wed, 26 Jun 2019 10:20:50 +0000 (UTC)
Received: from inva021.nxp.com (localhost [127.0.0.1])
 by inva021.eu-rdc02.nxp.com (Postfix) with ESMTP id D184B200F4E;
 Wed, 26 Jun 2019 12:20:48 +0200 (CEST)
Received: from inva024.eu-rdc02.nxp.com (inva024.eu-rdc02.nxp.com
 [134.27.226.22])
 by inva021.eu-rdc02.nxp.com (Postfix) with ESMTP id C22B520094D;
 Wed, 26 Jun 2019 12:20:48 +0200 (CEST)
Received: from fsr-ub1664-120.ea.freescale.net
 (fsr-ub1664-120.ea.freescale.net [10.171.82.81])
 by inva024.eu-rdc02.nxp.com (Postfix) with ESMTP id 4B86D205DB;
 Wed, 26 Jun 2019 12:20:48 +0200 (CEST)
From: Robert Chiras <robert.chiras@nxp.com>
To: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>,
 David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>
Subject: [PATCH v5 2/2] drm/panel: Add support for Raydium RM67191 panel driver
Date: Wed, 26 Jun 2019 13:20:20 +0300
Message-Id: <1561544420-15572-3-git-send-email-robert.chiras@nxp.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1561544420-15572-1-git-send-email-robert.chiras@nxp.com>
References: <1561544420-15572-1-git-send-email-robert.chiras@nxp.com>
X-Virus-Scanned: ClamAV using ClamSMTP
X-Mailman-Approved-At: Thu, 27 Jun 2019 07:11:26 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Robert Chiras <robert.chiras@nxp.com>, devicetree@vger.kernel.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 linux-imx@nxp.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBhZGRzIFJheWRpdW0gUk02NzE5MSBURlQgTENEIHBhbmVsIGRyaXZlciAoTUlQ
SS1EU0kKcHJvdG9jb2wpLgoKU2lnbmVkLW9mZi1ieTogUm9iZXJ0IENoaXJhcyA8cm9iZXJ0LmNo
aXJhc0BueHAuY29tPgpSZXZpZXdlZC1ieTogU2FtIFJhdm5ib3JnIDxzYW1AcmF2bmJvcmcub3Jn
PgotLS0KIE1BSU5UQUlORVJTICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAg
NiArCiBkcml2ZXJzL2dwdS9kcm0vcGFuZWwvS2NvbmZpZyAgICAgICAgICAgICAgICAgfCAgIDkg
KwogZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlICAgICAgICAgICAgICAgIHwgICAxICsK
IGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1yYXlkaXVtLXJtNjcxOTEuYyB8IDY3MCArKysr
KysrKysrKysrKysrKysrKysrKysrKwogNCBmaWxlcyBjaGFuZ2VkLCA2ODYgaW5zZXJ0aW9ucygr
KQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1yYXlkaXVt
LXJtNjcxOTEuYwoKZGlmZiAtLWdpdCBhL01BSU5UQUlORVJTIGIvTUFJTlRBSU5FUlMKaW5kZXgg
N2EyZjQ4Ny4uY2Q5MzAzMGUgMTAwNjQ0Ci0tLSBhL01BSU5UQUlORVJTCisrKyBiL01BSU5UQUlO
RVJTCkBAIC01MDg5LDYgKzUwODksMTIgQEAgUzoJTWFpbnRhaW5lZAogRjoJZHJpdmVycy9ncHUv
ZHJtL3F4bC8KIEY6CWluY2x1ZGUvdWFwaS9kcm0vcXhsX2RybS5oCiAKK0RSTSBEUklWRVIgRk9S
IFJBWURJVU0gUk02NzE5MSBQQU5FTFMKK006CVJvYmVydCBDaGlyYXMgPHJvYmVydC5jaGlyYXNA
bnhwLmNvbT4KK1M6CU1haW50YWluZWQKK0Y6CWRyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1y
YXlkaXVtLXJtNjcxOTEuYworRjoJRG9jdW1lbnRhdGlvbi9kZXZpY2V0cmVlL2JpbmRpbmdzL2Rp
c3BsYXkvcGFuZWwvcmF5ZGl1bSxybTY3MTkxLnR4dAorCiBEUk0gRFJJVkVSIEZPUiBSQUdFIDEy
OCBWSURFTyBDQVJEUwogUzoJT3JwaGFuIC8gT2Jzb2xldGUKIEY6CWRyaXZlcnMvZ3B1L2RybS9y
MTI4LwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcgYi9kcml2ZXJz
L2dwdS9kcm0vcGFuZWwvS2NvbmZpZwppbmRleCBkOWQ5MzFhLi44YmUxYWMxIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvS2NvbmZpZworKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFu
ZWwvS2NvbmZpZwpAQCAtMTU5LDYgKzE1OSwxNSBAQCBjb25maWcgRFJNX1BBTkVMX1JBU1BCRVJS
WVBJX1RPVUNIU0NSRUVOCiAJICBQaSA3IiBUb3VjaHNjcmVlbi4gIFRvIGNvbXBpbGUgdGhpcyBk
cml2ZXIgYXMgYSBtb2R1bGUsCiAJICBjaG9vc2UgTSBoZXJlLgogCitjb25maWcgRFJNX1BBTkVM
X1JBWURJVU1fUk02NzE5MQorCXRyaXN0YXRlICJSYXlkaXVtIFJNNjcxOTEgRkhEIDEwODB4MTky
MCBEU0kgdmlkZW8gbW9kZSBwYW5lbCIKKwlkZXBlbmRzIG9uIE9GCisJZGVwZW5kcyBvbiBEUk1f
TUlQSV9EU0kKKwlkZXBlbmRzIG9uIEJBQ0tMSUdIVF9DTEFTU19ERVZJQ0UKKwloZWxwCisJICBT
YXkgWSBoZXJlIGlmIHlvdSB3YW50IHRvIGVuYWJsZSBzdXBwb3J0IGZvciBSYXlkaXVtIFJNNjcx
OTEgRkhECisJICAoMTA4MHgxOTIwKSBEU0kgcGFuZWwuCisKIGNvbmZpZyBEUk1fUEFORUxfUkFZ
RElVTV9STTY4MjAwCiAJdHJpc3RhdGUgIlJheWRpdW0gUk02ODIwMCA3MjB4MTI4MCBEU0kgdmlk
ZW8gbW9kZSBwYW5lbCIKIAlkZXBlbmRzIG9uIE9GCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vcGFuZWwvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKaW5kZXgg
ZmIwY2IzYS4uMWZjMGY2OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2Vm
aWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQpAQCAtMTQsNiArMTQsNyBA
QCBvYmotJChDT05GSUdfRFJNX1BBTkVMX09SSVNFVEVDSF9PVE04MDA5QSkgKz0gcGFuZWwtb3Jp
c2V0ZWNoLW90bTgwMDlhLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfT1NEX09TRDEwMVQyNTg3
XzUzVFMpICs9IHBhbmVsLW9zZC1vc2QxMDF0MjU4Ny01M3RzLm8KIG9iai0kKENPTkZJR19EUk1f
UEFORUxfUEFOQVNPTklDX1ZWWDEwRjAzNE4wMCkgKz0gcGFuZWwtcGFuYXNvbmljLXZ2eDEwZjAz
NG4wMC5vCiBvYmotJChDT05GSUdfRFJNX1BBTkVMX1JBU1BCRVJSWVBJX1RPVUNIU0NSRUVOKSAr
PSBwYW5lbC1yYXNwYmVycnlwaS10b3VjaHNjcmVlbi5vCitvYmotJChDT05GSUdfRFJNX1BBTkVM
X1JBWURJVU1fUk02NzE5MSkgKz0gcGFuZWwtcmF5ZGl1bS1ybTY3MTkxLm8KIG9iai0kKENPTkZJ
R19EUk1fUEFORUxfUkFZRElVTV9STTY4MjAwKSArPSBwYW5lbC1yYXlkaXVtLXJtNjgyMDAubwog
b2JqLSQoQ09ORklHX0RSTV9QQU5FTF9ST0NLVEVDSF9KSDA1N04wMDkwMCkgKz0gcGFuZWwtcm9j
a3RlY2gtamgwNTduMDA5MDAubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9ST05CT19SQjA3MEQz
MCkgKz0gcGFuZWwtcm9uYm8tcmIwNzBkMzAubwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3BhbmVsL3BhbmVsLXJheWRpdW0tcm02NzE5MS5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3Bh
bmVsLXJheWRpdW0tcm02NzE5MS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
LjA3NzMwMDIKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwt
cmF5ZGl1bS1ybTY3MTkxLmMKQEAgLTAsMCArMSw2NzAgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVu
dGlmaWVyOiBHUEwtMi4wCisvKgorICogUmF5ZGl1bSBSTTY3MTkxIE1JUEktRFNJIHBhbmVsIGRy
aXZlcgorICoKKyAqIENvcHlyaWdodCAyMDE5IE5YUAorICovCisKKyNpbmNsdWRlIDxsaW51eC9i
YWNrbGlnaHQuaD4KKyNpbmNsdWRlIDxsaW51eC9kZWxheS5oPgorI2luY2x1ZGUgPGxpbnV4L2dw
aW8vY29uc3VtZXIuaD4KKyNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KKyNpbmNsdWRlIDxsaW51
eC9vZi5oPgorI2luY2x1ZGUgPGxpbnV4L3JlZ3VsYXRvci9jb25zdW1lci5oPgorCisjaW5jbHVk
ZSA8dmlkZW8vbWlwaV9kaXNwbGF5Lmg+CisjaW5jbHVkZSA8dmlkZW8vb2ZfdmlkZW9tb2RlLmg+
CisjaW5jbHVkZSA8dmlkZW8vdmlkZW9tb2RlLmg+CisKKyNpbmNsdWRlIDxkcm0vZHJtX2NydGMu
aD4KKyNpbmNsdWRlIDxkcm0vZHJtX21pcGlfZHNpLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9wYW5l
bC5oPgorI2luY2x1ZGUgPGRybS9kcm1fcHJpbnQuaD4KKworLyogUGFuZWwgc3BlY2lmaWMgY29s
b3ItZm9ybWF0IGJpdHMgKi8KKyNkZWZpbmUgQ09MX0ZNVF8xNkJQUCAweDU1CisjZGVmaW5lIENP
TF9GTVRfMThCUFAgMHg2NgorI2RlZmluZSBDT0xfRk1UXzI0QlBQIDB4NzcKKworLyogV3JpdGUg
TWFudWZhY3R1cmUgQ29tbWFuZCBTZXQgQ29udHJvbCAqLworI2RlZmluZSBXUk1BVUNDVFIgMHhG
RQorCisvKiBNYW51ZmFjdHVyZXIgQ29tbWFuZCBTZXQgcGFnZXMgKENNRDIpICovCitzdHJ1Y3Qg
Y21kX3NldF9lbnRyeSB7CisJdTggY21kOworCXU4IHBhcmFtOworfTsKKworLyoKKyAqIFRoZXJl
IGlzIG5vIGRlc2NyaXB0aW9uIGluIHRoZSBSZWZlcmVuY2UgTWFudWFsIGFib3V0IHRoZXNlIGNv
bW1hbmRzLgorICogV2UgcmVjZWl2ZWQgdGhlbSBmcm9tIHZlbmRvciwgc28ganVzdCB1c2UgdGhl
bSBhcyBpcy4KKyAqLworc3RhdGljIGNvbnN0IHN0cnVjdCBjbWRfc2V0X2VudHJ5IG1hbnVmYWN0
dXJlcl9jbWRfc2V0W10gPSB7CisJezB4RkUsIDB4MEJ9LAorCXsweDI4LCAweDQwfSwKKwl7MHgy
OSwgMHg0Rn0sCisJezB4RkUsIDB4MEV9LAorCXsweDRCLCAweDAwfSwKKwl7MHg0QywgMHgwRn0s
CisJezB4NEQsIDB4MjB9LAorCXsweDRFLCAweDQwfSwKKwl7MHg0RiwgMHg2MH0sCisJezB4NTAs
IDB4QTB9LAorCXsweDUxLCAweEMwfSwKKwl7MHg1MiwgMHhFMH0sCisJezB4NTMsIDB4RkZ9LAor
CXsweEZFLCAweDBEfSwKKwl7MHgxOCwgMHgwOH0sCisJezB4NDIsIDB4MDB9LAorCXsweDA4LCAw
eDQxfSwKKwl7MHg0NiwgMHgwMn0sCisJezB4NzIsIDB4MDl9LAorCXsweEZFLCAweDBBfSwKKwl7
MHgyNCwgMHgxN30sCisJezB4MDQsIDB4MDd9LAorCXsweDFBLCAweDBDfSwKKwl7MHgwRiwgMHg0
NH0sCisJezB4RkUsIDB4MDR9LAorCXsweDAwLCAweDBDfSwKKwl7MHgwNSwgMHgwOH0sCisJezB4
MDYsIDB4MDh9LAorCXsweDA4LCAweDA4fSwKKwl7MHgwOSwgMHgwOH0sCisJezB4MEEsIDB4RTZ9
LAorCXsweDBCLCAweDhDfSwKKwl7MHgxQSwgMHgxMn0sCisJezB4MUUsIDB4RTB9LAorCXsweDI5
LCAweDkzfSwKKwl7MHgyQSwgMHg5M30sCisJezB4MkYsIDB4MDJ9LAorCXsweDMxLCAweDAyfSwK
Kwl7MHgzMywgMHgwNX0sCisJezB4MzcsIDB4MkR9LAorCXsweDM4LCAweDJEfSwKKwl7MHgzQSwg
MHgxRX0sCisJezB4M0IsIDB4MUV9LAorCXsweDNELCAweDI3fSwKKwl7MHgzRiwgMHg4MH0sCisJ
ezB4NDAsIDB4NDB9LAorCXsweDQxLCAweEUwfSwKKwl7MHg0RiwgMHgyRn0sCisJezB4NTAsIDB4
MUV9LAorCXsweEZFLCAweDA2fSwKKwl7MHgwMCwgMHhDQ30sCisJezB4MDUsIDB4MDV9LAorCXsw
eDA3LCAweEEyfSwKKwl7MHgwOCwgMHhDQ30sCisJezB4MEQsIDB4MDN9LAorCXsweDBGLCAweEEy
fSwKKwl7MHgzMiwgMHhDQ30sCisJezB4MzcsIDB4MDV9LAorCXsweDM5LCAweDgzfSwKKwl7MHgz
QSwgMHhDQ30sCisJezB4NDEsIDB4MDR9LAorCXsweDQzLCAweDgzfSwKKwl7MHg0NCwgMHhDQ30s
CisJezB4NDksIDB4MDV9LAorCXsweDRCLCAweEEyfSwKKwl7MHg0QywgMHhDQ30sCisJezB4NTEs
IDB4MDN9LAorCXsweDUzLCAweEEyfSwKKwl7MHg3NSwgMHhDQ30sCisJezB4N0EsIDB4MDN9LAor
CXsweDdDLCAweDgzfSwKKwl7MHg3RCwgMHhDQ30sCisJezB4ODIsIDB4MDJ9LAorCXsweDg0LCAw
eDgzfSwKKwl7MHg4NSwgMHhFQ30sCisJezB4ODYsIDB4MEZ9LAorCXsweDg3LCAweEZGfSwKKwl7
MHg4OCwgMHgwMH0sCisJezB4OEEsIDB4MDJ9LAorCXsweDhDLCAweEEyfSwKKwl7MHg4RCwgMHhF
QX0sCisJezB4OEUsIDB4MDF9LAorCXsweDhGLCAweEU4fSwKKwl7MHhGRSwgMHgwNn0sCisJezB4
OTAsIDB4MEF9LAorCXsweDkyLCAweDA2fSwKKwl7MHg5MywgMHhBMH0sCisJezB4OTQsIDB4QTh9
LAorCXsweDk1LCAweEVDfSwKKwl7MHg5NiwgMHgwRn0sCisJezB4OTcsIDB4RkZ9LAorCXsweDk4
LCAweDAwfSwKKwl7MHg5QSwgMHgwMn0sCisJezB4OUMsIDB4QTJ9LAorCXsweEFDLCAweDA0fSwK
Kwl7MHhGRSwgMHgwNn0sCisJezB4QjEsIDB4MTJ9LAorCXsweEIyLCAweDE3fSwKKwl7MHhCMywg
MHgxN30sCisJezB4QjQsIDB4MTd9LAorCXsweEI1LCAweDE3fSwKKwl7MHhCNiwgMHgxMX0sCisJ
ezB4QjcsIDB4MDh9LAorCXsweEI4LCAweDA5fSwKKwl7MHhCOSwgMHgwNn0sCisJezB4QkEsIDB4
MDd9LAorCXsweEJCLCAweDE3fSwKKwl7MHhCQywgMHgxN30sCisJezB4QkQsIDB4MTd9LAorCXsw
eEJFLCAweDE3fSwKKwl7MHhCRiwgMHgxN30sCisJezB4QzAsIDB4MTd9LAorCXsweEMxLCAweDE3
fSwKKwl7MHhDMiwgMHgxN30sCisJezB4QzMsIDB4MTd9LAorCXsweEM0LCAweDBGfSwKKwl7MHhD
NSwgMHgwRX0sCisJezB4QzYsIDB4MDB9LAorCXsweEM3LCAweDAxfSwKKwl7MHhDOCwgMHgxMH0s
CisJezB4RkUsIDB4MDZ9LAorCXsweDk1LCAweEVDfSwKKwl7MHg4RCwgMHhFRX0sCisJezB4NDQs
IDB4RUN9LAorCXsweDRDLCAweEVDfSwKKwl7MHgzMiwgMHhFQ30sCisJezB4M0EsIDB4RUN9LAor
CXsweDdELCAweEVDfSwKKwl7MHg3NSwgMHhFQ30sCisJezB4MDAsIDB4RUN9LAorCXsweDA4LCAw
eEVDfSwKKwl7MHg4NSwgMHhFQ30sCisJezB4QTYsIDB4MjF9LAorCXsweEE3LCAweDA1fSwKKwl7
MHhBOSwgMHgwNn0sCisJezB4ODIsIDB4MDZ9LAorCXsweDQxLCAweDA2fSwKKwl7MHg3QSwgMHgw
N30sCisJezB4MzcsIDB4MDd9LAorCXsweDA1LCAweDA2fSwKKwl7MHg0OSwgMHgwNn0sCisJezB4
MEQsIDB4MDR9LAorCXsweDUxLCAweDA0fSwKK307CisKK3N0YXRpYyBjb25zdCB1MzIgcmFkX2J1
c19mb3JtYXRzW10gPSB7CisJTUVESUFfQlVTX0ZNVF9SR0I4ODhfMVgyNCwKKwlNRURJQV9CVVNf
Rk1UX1JHQjY2Nl8xWDE4LAorCU1FRElBX0JVU19GTVRfUkdCNTY1XzFYMTYsCit9OworCitzdGF0
aWMgY29uc3QgdTMyIHJhZF9idXNfZmxhZ3MgPSBEUk1fQlVTX0ZMQUdfREVfTE9XIHwKKwkJCQkg
RFJNX0JVU19GTEFHX1BJWERBVEFfTkVHRURHRTsKKworc3RydWN0IHJhZF9wYW5lbCB7CisJc3Ry
dWN0IGRybV9wYW5lbCBwYW5lbDsKKwlzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2k7CisKKwlz
dHJ1Y3QgZ3Bpb19kZXNjICpyZXNldDsKKwlzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmFja2xp
Z2h0OworCisJc3RydWN0IHJlZ3VsYXRvcl9idWxrX2RhdGEgKnN1cHBsaWVzOworCXVuc2lnbmVk
IGludCBudW1fc3VwcGxpZXM7CisKKwlib29sIHByZXBhcmVkOworCWJvb2wgZW5hYmxlZDsKK307
CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSBkZWZhdWx0X21vZGUgPSB7
CisJLmNsb2NrID0gMTMyMDAwLAorCS5oZGlzcGxheSA9IDEwODAsCisJLmhzeW5jX3N0YXJ0ID0g
MTA4MCArIDIwLAorCS5oc3luY19lbmQgPSAxMDgwICsgMjAgKyAyLAorCS5odG90YWwgPSAxMDgw
ICsgMjAgKyAyICsgMzQsCisJLnZkaXNwbGF5ID0gMTkyMCwKKwkudnN5bmNfc3RhcnQgPSAxOTIw
ICsgMTAsCisJLnZzeW5jX2VuZCA9IDE5MjAgKyAxMCArIDIsCisJLnZ0b3RhbCA9IDE5MjAgKyAx
MCArIDIgKyA0LAorCS52cmVmcmVzaCA9IDYwLAorCS53aWR0aF9tbSA9IDY4LAorCS5oZWlnaHRf
bW0gPSAxMjEsCisJLmZsYWdzID0gRFJNX01PREVfRkxBR19OSFNZTkMgfAorCQkgRFJNX01PREVf
RkxBR19OVlNZTkMsCit9OworCitzdGF0aWMgaW5saW5lIHN0cnVjdCByYWRfcGFuZWwgKnRvX3Jh
ZF9wYW5lbChzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlyZXR1cm4gY29udGFpbmVyX29m
KHBhbmVsLCBzdHJ1Y3QgcmFkX3BhbmVsLCBwYW5lbCk7Cit9CisKK3N0YXRpYyBpbnQgcmFkX3Bh
bmVsX3B1c2hfY21kX2xpc3Qoc3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpKQoreworCXNpemVf
dCBpOworCXNpemVfdCBjb3VudCA9IEFSUkFZX1NJWkUobWFudWZhY3R1cmVyX2NtZF9zZXQpOwor
CWludCByZXQgPSAwOworCisJZm9yIChpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKKwkJY29uc3Qg
c3RydWN0IGNtZF9zZXRfZW50cnkgKmVudHJ5ID0gJm1hbnVmYWN0dXJlcl9jbWRfc2V0W2ldOwor
CQl1OCBidWZmZXJbMl0gPSB7IGVudHJ5LT5jbWQsIGVudHJ5LT5wYXJhbSB9OworCisJCXJldCA9
IG1pcGlfZHNpX2dlbmVyaWNfd3JpdGUoZHNpLCAmYnVmZmVyLCBzaXplb2YoYnVmZmVyKSk7CisJ
CWlmIChyZXQgPCAwKQorCQkJcmV0dXJuIHJldDsKKwl9CisKKwlyZXR1cm4gcmV0OworfTsKKwor
c3RhdGljIGludCBjb2xvcl9mb3JtYXRfZnJvbV9kc2lfZm9ybWF0KGVudW0gbWlwaV9kc2lfcGl4
ZWxfZm9ybWF0IGZvcm1hdCkKK3sKKwlzd2l0Y2ggKGZvcm1hdCkgeworCWNhc2UgTUlQSV9EU0lf
Rk1UX1JHQjU2NToKKwkJcmV0dXJuIENPTF9GTVRfMTZCUFA7CisJY2FzZSBNSVBJX0RTSV9GTVRf
UkdCNjY2OgorCWNhc2UgTUlQSV9EU0lfRk1UX1JHQjY2Nl9QQUNLRUQ6CisJCXJldHVybiBDT0xf
Rk1UXzE4QlBQOworCWNhc2UgTUlQSV9EU0lfRk1UX1JHQjg4ODoKKwkJcmV0dXJuIENPTF9GTVRf
MjRCUFA7CisJZGVmYXVsdDoKKwkJcmV0dXJuIENPTF9GTVRfMjRCUFA7IC8qIGZvciBiYWNrd2Fy
ZCBjb21wYXRpYmlsaXR5ICovCisJfQorfTsKKworc3RhdGljIGludCByYWRfcGFuZWxfcHJlcGFy
ZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgcmFkX3BhbmVsICpyYWQgPSB0
b19yYWRfcGFuZWwocGFuZWwpOworCWludCByZXQ7CisKKwlpZiAocmFkLT5wcmVwYXJlZCkKKwkJ
cmV0dXJuIDA7CisKKwlyZXQgPSByZWd1bGF0b3JfYnVsa19lbmFibGUocmFkLT5udW1fc3VwcGxp
ZXMsIHJhZC0+c3VwcGxpZXMpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwlpZiAocmFk
LT5yZXNldCkgeworCQlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAocmFkLT5yZXNldCwgMSk7CisJ
CXVzbGVlcF9yYW5nZSgzMDAwLCA1MDAwKTsKKwkJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKHJh
ZC0+cmVzZXQsIDApOworCQl1c2xlZXBfcmFuZ2UoMTgwMDAsIDIwMDAwKTsKKwl9CisKKwlyYWQt
PnByZXBhcmVkID0gdHJ1ZTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHJhZF9wYW5l
bF91bnByZXBhcmUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJc3RydWN0IHJhZF9wYW5l
bCAqcmFkID0gdG9fcmFkX3BhbmVsKHBhbmVsKTsKKwlpbnQgcmV0OworCisJaWYgKCFyYWQtPnBy
ZXBhcmVkKQorCQlyZXR1cm4gMDsKKworCS8qCisJICogUmlnaHQgYWZ0ZXIgYXNzZXJ0aW5nIHRo
ZSByZXNldCwgd2UgbmVlZCB0byByZWxlYXNlIGl0LCBzbyB0aGF0IHRoZQorCSAqIHRvdWNoIGRy
aXZlciBjYW4gaGF2ZSBhbiBhY3RpdmUgY29ubmVjdGlvbiB3aXRoIHRoZSB0b3VjaCBjb250cm9s
bGVyCisJICogZXZlbiBhZnRlciB0aGUgZGlzcGxheSBpcyB0dXJuZWQgb2ZmLgorCSAqLworCWlm
IChyYWQtPnJlc2V0KSB7CisJCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChyYWQtPnJlc2V0LCAx
KTsKKwkJdXNsZWVwX3JhbmdlKDE1MDAwLCAxNzAwMCk7CisJCWdwaW9kX3NldF92YWx1ZV9jYW5z
bGVlcChyYWQtPnJlc2V0LCAwKTsKKwl9CisKKwlyZXQgPSByZWd1bGF0b3JfYnVsa19kaXNhYmxl
KHJhZC0+bnVtX3N1cHBsaWVzLCByYWQtPnN1cHBsaWVzKTsKKwlpZiAocmV0KQorCQlyZXR1cm4g
cmV0OworCisJcmFkLT5wcmVwYXJlZCA9IGZhbHNlOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRp
YyBpbnQgcmFkX3BhbmVsX2VuYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1
Y3QgcmFkX3BhbmVsICpyYWQgPSB0b19yYWRfcGFuZWwocGFuZWwpOworCXN0cnVjdCBtaXBpX2Rz
aV9kZXZpY2UgKmRzaSA9IHJhZC0+ZHNpOworCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZkc2ktPmRl
djsKKwlpbnQgY29sb3JfZm9ybWF0ID0gY29sb3JfZm9ybWF0X2Zyb21fZHNpX2Zvcm1hdChkc2kt
PmZvcm1hdCk7CisJaW50IHJldDsKKworCWlmIChyYWQtPmVuYWJsZWQpCisJCXJldHVybiAwOwor
CisJZHNpLT5tb2RlX2ZsYWdzIHw9IE1JUElfRFNJX01PREVfTFBNOworCisJcmV0ID0gcmFkX3Bh
bmVsX3B1c2hfY21kX2xpc3QoZHNpKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9S
KGRldiwgIkZhaWxlZCB0byBzZW5kIE1DUyAoJWQpXG4iLCByZXQpOworCQlnb3RvIGZhaWw7CisJ
fQorCisJLyogU2VsZWN0IFVzZXIgQ29tbWFuZCBTZXQgdGFibGUgKENNRDEpICovCisJcmV0ID0g
bWlwaV9kc2lfZ2VuZXJpY193cml0ZShkc2ksICh1OFtdKXsgV1JNQVVDQ1RSLCAweDAwIH0sIDIp
OworCWlmIChyZXQgPCAwKQorCQlnb3RvIGZhaWw7CisKKwkvKiBTb2Z0d2FyZSByZXNldCAqLwor
CXJldCA9IG1pcGlfZHNpX2Rjc19zb2Z0X3Jlc2V0KGRzaSk7CisJaWYgKHJldCA8IDApIHsKKwkJ
RFJNX0RFVl9FUlJPUihkZXYsICJGYWlsZWQgdG8gZG8gU29mdHdhcmUgUmVzZXQgKCVkKVxuIiwg
cmV0KTsKKwkJZ290byBmYWlsOworCX0KKworCXVzbGVlcF9yYW5nZSgxNTAwMCwgMTcwMDApOwor
CisJLyogU2V0IERTSSBtb2RlICovCisJcmV0ID0gbWlwaV9kc2lfZ2VuZXJpY193cml0ZShkc2ks
ICh1OFtdKXsgMHhDMiwgMHgwQiB9LCAyKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VS
Uk9SKGRldiwgIkZhaWxlZCB0byBzZXQgRFNJIG1vZGUgKCVkKVxuIiwgcmV0KTsKKwkJZ290byBm
YWlsOworCX0KKwkvKiBTZXQgdGVhciBPTiAqLworCXJldCA9IG1pcGlfZHNpX2Rjc19zZXRfdGVh
cl9vbihkc2ksIE1JUElfRFNJX0RDU19URUFSX01PREVfVkJMQU5LKTsKKwlpZiAocmV0IDwgMCkg
eworCQlEUk1fREVWX0VSUk9SKGRldiwgIkZhaWxlZCB0byBzZXQgdGVhciBPTiAoJWQpXG4iLCBy
ZXQpOworCQlnb3RvIGZhaWw7CisJfQorCS8qIFNldCB0ZWFyIHNjYW5saW5lICovCisJcmV0ID0g
bWlwaV9kc2lfZGNzX3NldF90ZWFyX3NjYW5saW5lKGRzaSwgMHgzODApOworCWlmIChyZXQgPCAw
KSB7CisJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFpbGVkIHRvIHNldCB0ZWFyIHNjYW5saW5lICgl
ZClcbiIsIHJldCk7CisJCWdvdG8gZmFpbDsKKwl9CisJLyogU2V0IHBpeGVsIGZvcm1hdCAqLwor
CXJldCA9IG1pcGlfZHNpX2Rjc19zZXRfcGl4ZWxfZm9ybWF0KGRzaSwgY29sb3JfZm9ybWF0KTsK
KwlEUk1fREVWX0RFQlVHX0RSSVZFUihkZXYsICJJbnRlcmZhY2UgY29sb3IgZm9ybWF0IHNldCB0
byAweCV4XG4iLAorCQkJICAgICBjb2xvcl9mb3JtYXQpOworCWlmIChyZXQgPCAwKSB7CisJCURS
TV9ERVZfRVJST1IoZGV2LCAiRmFpbGVkIHRvIHNldCBwaXhlbCBmb3JtYXQgKCVkKVxuIiwgcmV0
KTsKKwkJZ290byBmYWlsOworCX0KKwkvKiBFeGl0IHNsZWVwIG1vZGUgKi8KKwlyZXQgPSBtaXBp
X2RzaV9kY3NfZXhpdF9zbGVlcF9tb2RlKGRzaSk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RF
Vl9FUlJPUihkZXYsICJGYWlsZWQgdG8gZXhpdCBzbGVlcCBtb2RlICglZClcbiIsIHJldCk7CisJ
CWdvdG8gZmFpbDsKKwl9CisKKwl1c2xlZXBfcmFuZ2UoNTAwMCwgNzAwMCk7CisKKwlyZXQgPSBt
aXBpX2RzaV9kY3Nfc2V0X2Rpc3BsYXlfb24oZHNpKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1f
REVWX0VSUk9SKGRldiwgIkZhaWxlZCB0byBzZXQgZGlzcGxheSBPTiAoJWQpXG4iLCByZXQpOwor
CQlnb3RvIGZhaWw7CisJfQorCisJYmFja2xpZ2h0X2VuYWJsZShyYWQtPmJhY2tsaWdodCk7CisK
KwlyYWQtPmVuYWJsZWQgPSB0cnVlOworCisJcmV0dXJuIDA7CisKK2ZhaWw6CisJZ3Bpb2Rfc2V0
X3ZhbHVlX2NhbnNsZWVwKHJhZC0+cmVzZXQsIDEpOworCisJcmV0dXJuIHJldDsKK30KKworc3Rh
dGljIGludCByYWRfcGFuZWxfZGlzYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlz
dHJ1Y3QgcmFkX3BhbmVsICpyYWQgPSB0b19yYWRfcGFuZWwocGFuZWwpOworCXN0cnVjdCBtaXBp
X2RzaV9kZXZpY2UgKmRzaSA9IHJhZC0+ZHNpOworCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZkc2kt
PmRldjsKKwlpbnQgcmV0OworCisJaWYgKCFyYWQtPmVuYWJsZWQpCisJCXJldHVybiAwOworCisJ
ZHNpLT5tb2RlX2ZsYWdzIHw9IE1JUElfRFNJX01PREVfTFBNOworCisJYmFja2xpZ2h0X2Rpc2Fi
bGUocmFkLT5iYWNrbGlnaHQpOworCisJdXNsZWVwX3JhbmdlKDEwMDAwLCAxMjAwMCk7CisKKwly
ZXQgPSBtaXBpX2RzaV9kY3Nfc2V0X2Rpc3BsYXlfb2ZmKGRzaSk7CisJaWYgKHJldCA8IDApIHsK
KwkJRFJNX0RFVl9FUlJPUihkZXYsICJGYWlsZWQgdG8gc2V0IGRpc3BsYXkgT0ZGICglZClcbiIs
IHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJdXNsZWVwX3JhbmdlKDUwMDAsIDEwMDAwKTsK
KworCXJldCA9IG1pcGlfZHNpX2Rjc19lbnRlcl9zbGVlcF9tb2RlKGRzaSk7CisJaWYgKHJldCA8
IDApIHsKKwkJRFJNX0RFVl9FUlJPUihkZXYsICJGYWlsZWQgdG8gZW50ZXIgc2xlZXAgbW9kZSAo
JWQpXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKworCXJhZC0+ZW5hYmxlZCA9IGZhbHNl
OworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgcmFkX3BhbmVsX2dldF9tb2RlcyhzdHJ1
Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9y
ID0gcGFuZWwtPmNvbm5lY3RvcjsKKwlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZTsKKwor
CW1vZGUgPSBkcm1fbW9kZV9kdXBsaWNhdGUocGFuZWwtPmRybSwgJmRlZmF1bHRfbW9kZSk7CisJ
aWYgKCFtb2RlKSB7CisJCURSTV9ERVZfRVJST1IocGFuZWwtPmRldiwgImZhaWxlZCB0byBhZGQg
bW9kZSAldXgldXhAJXVcbiIsCisJCQkgIGRlZmF1bHRfbW9kZS5oZGlzcGxheSwgZGVmYXVsdF9t
b2RlLnZkaXNwbGF5LAorCQkJICBkZWZhdWx0X21vZGUudnJlZnJlc2gpOworCQlyZXR1cm4gLUVO
T01FTTsKKwl9CisKKwlkcm1fbW9kZV9zZXRfbmFtZShtb2RlKTsKKwltb2RlLT50eXBlID0gRFJN
X01PREVfVFlQRV9EUklWRVIgfCBEUk1fTU9ERV9UWVBFX1BSRUZFUlJFRDsKKwlkcm1fbW9kZV9w
cm9iZWRfYWRkKHBhbmVsLT5jb25uZWN0b3IsIG1vZGUpOworCisJY29ubmVjdG9yLT5kaXNwbGF5
X2luZm8ud2lkdGhfbW0gPSBtb2RlLT53aWR0aF9tbTsKKwljb25uZWN0b3ItPmRpc3BsYXlfaW5m
by5oZWlnaHRfbW0gPSBtb2RlLT5oZWlnaHRfbW07CisJY29ubmVjdG9yLT5kaXNwbGF5X2luZm8u
YnVzX2ZsYWdzID0gcmFkX2J1c19mbGFnczsKKworCWRybV9kaXNwbGF5X2luZm9fc2V0X2J1c19m
b3JtYXRzKCZjb25uZWN0b3ItPmRpc3BsYXlfaW5mbywKKwkJCQkJIHJhZF9idXNfZm9ybWF0cywK
KwkJCQkJIEFSUkFZX1NJWkUocmFkX2J1c19mb3JtYXRzKSk7CisJcmV0dXJuIDE7Cit9CisKK3N0
YXRpYyBpbnQgcmFkX2JsX2dldF9icmlnaHRuZXNzKHN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpi
bCkKK3sKKwlzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kgPSBibF9nZXRfZGF0YShibCk7CisJ
c3RydWN0IHJhZF9wYW5lbCAqcmFkID0gbWlwaV9kc2lfZ2V0X2RydmRhdGEoZHNpKTsKKwlzdHJ1
Y3QgZGV2aWNlICpkZXYgPSAmZHNpLT5kZXY7CisJdTE2IGJyaWdodG5lc3M7CisJaW50IHJldDsK
KworCWlmICghcmFkLT5wcmVwYXJlZCkKKwkJcmV0dXJuIDA7CisKKwlkc2ktPm1vZGVfZmxhZ3Mg
Jj0gfk1JUElfRFNJX01PREVfTFBNOworCisJcmV0ID0gbWlwaV9kc2lfZGNzX2dldF9kaXNwbGF5
X2JyaWdodG5lc3MoZHNpLCAmYnJpZ2h0bmVzcyk7CisJaWYgKHJldCA8IDApCisJCXJldHVybiBy
ZXQ7CisKKwlibC0+cHJvcHMuYnJpZ2h0bmVzcyA9IGJyaWdodG5lc3M7CisKKwlyZXR1cm4gYnJp
Z2h0bmVzcyAmIDB4ZmY7Cit9CisKK3N0YXRpYyBpbnQgcmFkX2JsX3VwZGF0ZV9zdGF0dXMoc3Ry
dWN0IGJhY2tsaWdodF9kZXZpY2UgKmJsKQoreworCXN0cnVjdCBtaXBpX2RzaV9kZXZpY2UgKmRz
aSA9IGJsX2dldF9kYXRhKGJsKTsKKwlzdHJ1Y3QgcmFkX3BhbmVsICpyYWQgPSBtaXBpX2RzaV9n
ZXRfZHJ2ZGF0YShkc2kpOworCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZkc2ktPmRldjsKKwlpbnQg
cmV0ID0gMDsKKworCWlmICghcmFkLT5wcmVwYXJlZCkKKwkJcmV0dXJuIDA7CisKKwlkc2ktPm1v
ZGVfZmxhZ3MgJj0gfk1JUElfRFNJX01PREVfTFBNOworCisJcmV0ID0gbWlwaV9kc2lfZGNzX3Nl
dF9kaXNwbGF5X2JyaWdodG5lc3MoZHNpLCBibC0+cHJvcHMuYnJpZ2h0bmVzcyk7CisJaWYgKHJl
dCA8IDApCisJCXJldHVybiByZXQ7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGNvbnN0IHN0
cnVjdCBiYWNrbGlnaHRfb3BzIHJhZF9ibF9vcHMgPSB7CisJLnVwZGF0ZV9zdGF0dXMgPSByYWRf
YmxfdXBkYXRlX3N0YXR1cywKKwkuZ2V0X2JyaWdodG5lc3MgPSByYWRfYmxfZ2V0X2JyaWdodG5l
c3MsCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9wYW5lbF9mdW5jcyByYWRfcGFuZWxf
ZnVuY3MgPSB7CisJLnByZXBhcmUgPSByYWRfcGFuZWxfcHJlcGFyZSwKKwkudW5wcmVwYXJlID0g
cmFkX3BhbmVsX3VucHJlcGFyZSwKKwkuZW5hYmxlID0gcmFkX3BhbmVsX2VuYWJsZSwKKwkuZGlz
YWJsZSA9IHJhZF9wYW5lbF9kaXNhYmxlLAorCS5nZXRfbW9kZXMgPSByYWRfcGFuZWxfZ2V0X21v
ZGVzLAorfTsKKworc3RhdGljIGNvbnN0IGNoYXIgKiBjb25zdCByYWRfc3VwcGx5X25hbWVzW10g
PSB7CisJInYzcDMiLAorCSJ2MXA4IiwKK307CisKK3N0YXRpYyBpbnQgcmFkX2luaXRfcmVndWxh
dG9ycyhzdHJ1Y3QgcmFkX3BhbmVsICpyYWQpCit7CisJc3RydWN0IGRldmljZSAqZGV2ID0gJnJh
ZC0+ZHNpLT5kZXY7CisJaW50IGk7CisKKwlyYWQtPm51bV9zdXBwbGllcyA9IEFSUkFZX1NJWkUo
cmFkX3N1cHBseV9uYW1lcyk7CisJcmFkLT5zdXBwbGllcyA9IGRldm1fa2NhbGxvYyhkZXYsIHJh
ZC0+bnVtX3N1cHBsaWVzLAorCQkJCSAgICAgc2l6ZW9mKCpyYWQtPnN1cHBsaWVzKSwgR0ZQX0tF
Uk5FTCk7CisJaWYgKCFyYWQtPnN1cHBsaWVzKQorCQlyZXR1cm4gLUVOT01FTTsKKworCWZvciAo
aSA9IDA7IGkgPCByYWQtPm51bV9zdXBwbGllczsgaSsrKQorCQlyYWQtPnN1cHBsaWVzW2ldLnN1
cHBseSA9IHJhZF9zdXBwbHlfbmFtZXNbaV07CisKKwlyZXR1cm4gZGV2bV9yZWd1bGF0b3JfYnVs
a19nZXQoZGV2LCByYWQtPm51bV9zdXBwbGllcywgcmFkLT5zdXBwbGllcyk7Cit9OworCitzdGF0
aWMgaW50IHJhZF9wYW5lbF9wcm9iZShzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCit7CisJ
c3RydWN0IGRldmljZSAqZGV2ID0gJmRzaS0+ZGV2OworCXN0cnVjdCBkZXZpY2Vfbm9kZSAqbnAg
PSBkZXYtPm9mX25vZGU7CisJc3RydWN0IHJhZF9wYW5lbCAqcGFuZWw7CisJc3RydWN0IGJhY2ts
aWdodF9wcm9wZXJ0aWVzIGJsX3Byb3BzOworCWludCByZXQ7CisJdTMyIHZpZGVvX21vZGU7CisK
KwlwYW5lbCA9IGRldm1fa3phbGxvYygmZHNpLT5kZXYsIHNpemVvZigqcGFuZWwpLCBHRlBfS0VS
TkVMKTsKKwlpZiAoIXBhbmVsKQorCQlyZXR1cm4gLUVOT01FTTsKKworCW1pcGlfZHNpX3NldF9k
cnZkYXRhKGRzaSwgcGFuZWwpOworCisJcGFuZWwtPmRzaSA9IGRzaTsKKworCWRzaS0+Zm9ybWF0
ID0gTUlQSV9EU0lfRk1UX1JHQjg4ODsKKwlkc2ktPm1vZGVfZmxhZ3MgPSAgTUlQSV9EU0lfTU9E
RV9WSURFT19IU0UgfCBNSVBJX0RTSV9NT0RFX1ZJREVPIHwKKwkJCSAgIE1JUElfRFNJX0NMT0NL
X05PTl9DT05USU5VT1VTOworCisJcmV0ID0gb2ZfcHJvcGVydHlfcmVhZF91MzIobnAsICJ2aWRl
by1tb2RlIiwgJnZpZGVvX21vZGUpOworCWlmICghcmV0KSB7CisJCXN3aXRjaCAodmlkZW9fbW9k
ZSkgeworCQljYXNlIDA6CisJCQkvKiBidXJzdCBtb2RlICovCisJCQlkc2ktPm1vZGVfZmxhZ3Mg
fD0gTUlQSV9EU0lfTU9ERV9WSURFT19CVVJTVDsKKwkJCWJyZWFrOworCQljYXNlIDE6CisJCQkv
KiBub24tYnVyc3QgbW9kZSB3aXRoIHN5bmMgZXZlbnQgKi8KKwkJCWJyZWFrOworCQljYXNlIDI6
CisJCQkvKiBub24tYnVyc3QgbW9kZSB3aXRoIHN5bmMgcHVsc2UgKi8KKwkJCWRzaS0+bW9kZV9m
bGFncyB8PSBNSVBJX0RTSV9NT0RFX1ZJREVPX1NZTkNfUFVMU0U7CisJCQlicmVhazsKKwkJZGVm
YXVsdDoKKwkJCWRldl93YXJuKGRldiwgImludmFsaWQgdmlkZW8gbW9kZSAlZFxuIiwgdmlkZW9f
bW9kZSk7CisJCQlicmVhazsKKwkJfQorCX0KKworCXJldCA9IG9mX3Byb3BlcnR5X3JlYWRfdTMy
KG5wLCAiZHNpLWxhbmVzIiwgJmRzaS0+bGFuZXMpOworCWlmIChyZXQpIHsKKwkJZGV2X2Vycihk
ZXYsICJGYWlsZWQgdG8gZ2V0IGRzaS1sYW5lcyBwcm9wZXJ0eSAoJWQpXG4iLCByZXQpOworCQly
ZXR1cm4gcmV0OworCX0KKworCXBhbmVsLT5yZXNldCA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlvbmFs
KGRldiwgInJlc2V0IiwgR1BJT0RfT1VUX0xPVyk7CisJaWYgKElTX0VSUihwYW5lbC0+cmVzZXQp
KQorCQlyZXR1cm4gUFRSX0VSUihwYW5lbC0+cmVzZXQpOworCisJbWVtc2V0KCZibF9wcm9wcywg
MCwgc2l6ZW9mKGJsX3Byb3BzKSk7CisJYmxfcHJvcHMudHlwZSA9IEJBQ0tMSUdIVF9SQVc7CisJ
YmxfcHJvcHMuYnJpZ2h0bmVzcyA9IDI1NTsKKwlibF9wcm9wcy5tYXhfYnJpZ2h0bmVzcyA9IDI1
NTsKKworCXBhbmVsLT5iYWNrbGlnaHQgPSBkZXZtX2JhY2tsaWdodF9kZXZpY2VfcmVnaXN0ZXIo
ZGV2LCBkZXZfbmFtZShkZXYpLAorCQkJCQkJCSAgZGV2LCBkc2ksICZyYWRfYmxfb3BzLAorCQkJ
CQkJCSAgJmJsX3Byb3BzKTsKKwlpZiAoSVNfRVJSKHBhbmVsLT5iYWNrbGlnaHQpKSB7CisJCXJl
dCA9IFBUUl9FUlIocGFuZWwtPmJhY2tsaWdodCk7CisJCWRldl9lcnIoZGV2LCAiRmFpbGVkIHRv
IHJlZ2lzdGVyIGJhY2tsaWdodCAoJWQpXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwor
CXJldCA9IHJhZF9pbml0X3JlZ3VsYXRvcnMocGFuZWwpOworCWlmIChyZXQpCisJCXJldHVybiBy
ZXQ7CisKKwlkcm1fcGFuZWxfaW5pdCgmcGFuZWwtPnBhbmVsKTsKKwlwYW5lbC0+cGFuZWwuZnVu
Y3MgPSAmcmFkX3BhbmVsX2Z1bmNzOworCXBhbmVsLT5wYW5lbC5kZXYgPSBkZXY7CisJZGV2X3Nl
dF9kcnZkYXRhKGRldiwgcGFuZWwpOworCisJcmV0ID0gZHJtX3BhbmVsX2FkZCgmcGFuZWwtPnBh
bmVsKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJcmV0ID0gbWlwaV9kc2lfYXR0YWNo
KGRzaSk7CisJaWYgKHJldCkKKwkJZHJtX3BhbmVsX3JlbW92ZSgmcGFuZWwtPnBhbmVsKTsKKwor
CXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyBpbnQgcmFkX3BhbmVsX3JlbW92ZShzdHJ1Y3QgbWlw
aV9kc2lfZGV2aWNlICpkc2kpCit7CisJc3RydWN0IHJhZF9wYW5lbCAqcmFkID0gbWlwaV9kc2lf
Z2V0X2RydmRhdGEoZHNpKTsKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmZHNpLT5kZXY7CisJaW50
IHJldDsKKworCXJldCA9IG1pcGlfZHNpX2RldGFjaChkc2kpOworCWlmIChyZXQpCisJCURSTV9E
RVZfRVJST1IoZGV2LCAiRmFpbGVkIHRvIGRldGFjaCBmcm9tIGhvc3QgKCVkKVxuIiwKKwkJCSAg
ICAgIHJldCk7CisKKwlkcm1fcGFuZWxfcmVtb3ZlKCZyYWQtPnBhbmVsKTsKKworCXJldHVybiAw
OworfQorCitzdGF0aWMgdm9pZCByYWRfcGFuZWxfc2h1dGRvd24oc3RydWN0IG1pcGlfZHNpX2Rl
dmljZSAqZHNpKQoreworCXN0cnVjdCByYWRfcGFuZWwgKnJhZCA9IG1pcGlfZHNpX2dldF9kcnZk
YXRhKGRzaSk7CisKKwlyYWRfcGFuZWxfZGlzYWJsZSgmcmFkLT5wYW5lbCk7CisJcmFkX3BhbmVs
X3VucHJlcGFyZSgmcmFkLT5wYW5lbCk7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2
aWNlX2lkIHJhZF9vZl9tYXRjaFtdID0geworCXsgLmNvbXBhdGlibGUgPSAicmF5ZGl1bSxybTY3
MTkxIiwgfSwKKwl7IC8qIHNlbnRpbmVsICovIH0KK307CitNT0RVTEVfREVWSUNFX1RBQkxFKG9m
LCByYWRfb2ZfbWF0Y2gpOworCitzdGF0aWMgc3RydWN0IG1pcGlfZHNpX2RyaXZlciByYWRfcGFu
ZWxfZHJpdmVyID0geworCS5kcml2ZXIgPSB7CisJCS5uYW1lID0gInBhbmVsLXJheWRpdW0tcm02
NzE5MSIsCisJCS5vZl9tYXRjaF90YWJsZSA9IHJhZF9vZl9tYXRjaCwKKwl9LAorCS5wcm9iZSA9
IHJhZF9wYW5lbF9wcm9iZSwKKwkucmVtb3ZlID0gcmFkX3BhbmVsX3JlbW92ZSwKKwkuc2h1dGRv
d24gPSByYWRfcGFuZWxfc2h1dGRvd24sCit9OworbW9kdWxlX21pcGlfZHNpX2RyaXZlcihyYWRf
cGFuZWxfZHJpdmVyKTsKKworTU9EVUxFX0FVVEhPUigiUm9iZXJ0IENoaXJhcyA8cm9iZXJ0LmNo
aXJhc0BueHAuY29tPiIpOworTU9EVUxFX0RFU0NSSVBUSU9OKCJEUk0gRHJpdmVyIGZvciBSYXlk
aXVtIFJNNjcxOTEgTUlQSSBEU0kgcGFuZWwiKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsK
LS0gCjIuNy40CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
