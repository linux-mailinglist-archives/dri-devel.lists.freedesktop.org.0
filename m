Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E3A45A6E2B
	for <lists+dri-devel@lfdr.de>; Tue,  3 Sep 2019 18:25:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AF923896A3;
	Tue,  3 Sep 2019 16:25:13 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4A34B895C1;
 Tue,  3 Sep 2019 16:25:11 +0000 (UTC)
Received: from sasha-vm.mshome.net (c-73-47-72-35.hsd1.nh.comcast.net
 [73.47.72.35])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 3490A2343A;
 Tue,  3 Sep 2019 16:25:10 +0000 (UTC)
From: Sasha Levin <sashal@kernel.org>
To: linux-kernel@vger.kernel.org,
	stable@vger.kernel.org
Subject: [PATCH AUTOSEL 5.2 20/23] drm/i915: Support whitelist workarounds on
 all engines
Date: Tue,  3 Sep 2019 12:24:21 -0400
Message-Id: <20190903162424.6877-20-sashal@kernel.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190903162424.6877-1-sashal@kernel.org>
References: <20190903162424.6877-1-sashal@kernel.org>
MIME-Version: 1.0
X-stable: review
X-Patchwork-Hint: Ignore
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=kernel.org; s=default; t=1567527911;
 bh=ZnpwUH/bPiEE4wslv4yPlhf2ZtPaAnT2HGWxhurSN98=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=1+a3l8pYptK6lnQ+XfHUf+FPXUpOmv0zmCRn8M60zeClwUOwfj2ZdqUXaxvxEtpO1
 km0lM/t5bUg80YDXDGk7QQWzlz8rBrtHf3rCYc4C5QEdJCR7/k3/Mx2jzgLmnmDNGh
 9df/qUrFX7r4osWDGDUMS3TMBaP7h6Mi/+wkc4jI=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Sasha Levin <sashal@kernel.org>, Tvrtko Ursulin <tvrtko.ursulin@intel.com>,
 "Robert M . Fosha" <robert.m.fosha@intel.com>, intel-gfx@lists.freedesktop.org,
 dri-devel@lists.freedesktop.org, John Harrison <John.C.Harrison@Intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogSm9obiBIYXJyaXNvbiA8Sm9obi5DLkhhcnJpc29uQEludGVsLmNvbT4KClsgVXBzdHJl
YW0gY29tbWl0IGViZDJkZTQ3YTE5ZjFjMTdhZTQ3ZjgzMzFhYWUzY2Q0MzY3NjY2NjMgXQoKTmV3
ZXIgaGFyZHdhcmUgcmVxdWlyZXMgc2V0dGluZyB1cCB3aGl0ZWxpc3RzIG9uIGVuZ2luZXMgb3Ro
ZXIgdGhhbgpyZW5kZXIuIFNvLCBleHRlbmQgdGhlIHdoaXRlbGlzdCBjb2RlIHRvIHN1cHBvcnQg
YWxsIGVuZ2luZXMuCgpTaWduZWQtb2ZmLWJ5OiBKb2huIEhhcnJpc29uIDxKb2huLkMuSGFycmlz
b25ASW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBSb2JlcnQgTS4gRm9zaGEgPHJvYmVydC5tLmZv
c2hhQGludGVsLmNvbT4KQ2M6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5j
b20+CkNjOiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4KUmV2aWV3ZWQt
Ynk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+ClNpZ25lZC1vZmYt
Ynk6IFR2cnRrbyBVcnN1bGluIDx0dnJ0a28udXJzdWxpbkBpbnRlbC5jb20+Ckxpbms6IGh0dHBz
Oi8vcGF0Y2h3b3JrLmZyZWVkZXNrdG9wLm9yZy9wYXRjaC9tc2dpZC8yMDE5MDYxODAxMDEwOC4y
NzQ5OS0zLUpvaG4uQy5IYXJyaXNvbkBJbnRlbC5jb20KU2lnbmVkLW9mZi1ieTogU2FzaGEgTGV2
aW4gPHNhc2hhbEBrZXJuZWwub3JnPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3dv
cmthcm91bmRzLmMgfCA2NSArKysrKysrKysrKysrKysrKy0tLS0tLS0KIDEgZmlsZSBjaGFuZ2Vk
LCA0NyBpbnNlcnRpb25zKCspLCAxOCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF93b3JrYXJvdW5kcy5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
aW50ZWxfd29ya2Fyb3VuZHMuYwppbmRleCAxZGI4MjZiMTI3NzRlLi4wYjgwZmRlOTI3ODk5IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF93b3JrYXJvdW5kcy5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3dvcmthcm91bmRzLmMKQEAgLTEwMTIsNDggKzEw
MTIsNzkgQEAgc3RhdGljIHZvaWQgZ2VuOV93aGl0ZWxpc3RfYnVpbGQoc3RydWN0IGk5MTVfd2Ff
bGlzdCAqdykKIAl3aGl0ZWxpc3RfcmVnKHcsIEdFTjhfSERDX0NISUNLRU4xKTsKIH0KIAotc3Rh
dGljIHZvaWQgc2tsX3doaXRlbGlzdF9idWlsZChzdHJ1Y3QgaTkxNV93YV9saXN0ICp3KQorc3Rh
dGljIHZvaWQgc2tsX3doaXRlbGlzdF9idWlsZChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdp
bmUpCiB7CisJc3RydWN0IGk5MTVfd2FfbGlzdCAqdyA9ICZlbmdpbmUtPndoaXRlbGlzdDsKKwor
CWlmIChlbmdpbmUtPmNsYXNzICE9IFJFTkRFUl9DTEFTUykKKwkJcmV0dXJuOworCiAJZ2VuOV93
aGl0ZWxpc3RfYnVpbGQodyk7CiAKIAkvKiBXYURpc2FibGVMU1FDUk9QRVJGZm9yT0NMOnNrbCAq
LwogCXdoaXRlbGlzdF9yZWcodywgR0VOOF9MM1NRQ1JFRzQpOwogfQogCi1zdGF0aWMgdm9pZCBi
eHRfd2hpdGVsaXN0X2J1aWxkKHN0cnVjdCBpOTE1X3dhX2xpc3QgKncpCitzdGF0aWMgdm9pZCBi
eHRfd2hpdGVsaXN0X2J1aWxkKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIHsKLQln
ZW45X3doaXRlbGlzdF9idWlsZCh3KTsKKwlpZiAoZW5naW5lLT5jbGFzcyAhPSBSRU5ERVJfQ0xB
U1MpCisJCXJldHVybjsKKworCWdlbjlfd2hpdGVsaXN0X2J1aWxkKCZlbmdpbmUtPndoaXRlbGlz
dCk7CiB9CiAKLXN0YXRpYyB2b2lkIGtibF93aGl0ZWxpc3RfYnVpbGQoc3RydWN0IGk5MTVfd2Ff
bGlzdCAqdykKK3N0YXRpYyB2b2lkIGtibF93aGl0ZWxpc3RfYnVpbGQoc3RydWN0IGludGVsX2Vu
Z2luZV9jcyAqZW5naW5lKQogeworCXN0cnVjdCBpOTE1X3dhX2xpc3QgKncgPSAmZW5naW5lLT53
aGl0ZWxpc3Q7CisKKwlpZiAoZW5naW5lLT5jbGFzcyAhPSBSRU5ERVJfQ0xBU1MpCisJCXJldHVy
bjsKKwogCWdlbjlfd2hpdGVsaXN0X2J1aWxkKHcpOwogCiAJLyogV2FEaXNhYmxlTFNRQ1JPUEVS
RmZvck9DTDprYmwgKi8KIAl3aGl0ZWxpc3RfcmVnKHcsIEdFTjhfTDNTUUNSRUc0KTsKIH0KIAot
c3RhdGljIHZvaWQgZ2xrX3doaXRlbGlzdF9idWlsZChzdHJ1Y3QgaTkxNV93YV9saXN0ICp3KQor
c3RhdGljIHZvaWQgZ2xrX3doaXRlbGlzdF9idWlsZChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICpl
bmdpbmUpCiB7CisJc3RydWN0IGk5MTVfd2FfbGlzdCAqdyA9ICZlbmdpbmUtPndoaXRlbGlzdDsK
KworCWlmIChlbmdpbmUtPmNsYXNzICE9IFJFTkRFUl9DTEFTUykKKwkJcmV0dXJuOworCiAJZ2Vu
OV93aGl0ZWxpc3RfYnVpbGQodyk7CiAKIAkvKiBXQSAjMDg2MjogVXNlcnNwYWNlIGhhcyB0byBz
ZXQgIkJhcnJpZXIgTW9kZSIgdG8gYXZvaWQgaGFuZ3MuICovCiAJd2hpdGVsaXN0X3JlZyh3LCBH
RU45X1NMSUNFX0NPTU1PTl9FQ09fQ0hJQ0tFTjEpOwogfQogCi1zdGF0aWMgdm9pZCBjZmxfd2hp
dGVsaXN0X2J1aWxkKHN0cnVjdCBpOTE1X3dhX2xpc3QgKncpCitzdGF0aWMgdm9pZCBjZmxfd2hp
dGVsaXN0X2J1aWxkKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKmVuZ2luZSkKIHsKLQlnZW45X3do
aXRlbGlzdF9idWlsZCh3KTsKKwlpZiAoZW5naW5lLT5jbGFzcyAhPSBSRU5ERVJfQ0xBU1MpCisJ
CXJldHVybjsKKworCWdlbjlfd2hpdGVsaXN0X2J1aWxkKCZlbmdpbmUtPndoaXRlbGlzdCk7CiB9
CiAKLXN0YXRpYyB2b2lkIGNubF93aGl0ZWxpc3RfYnVpbGQoc3RydWN0IGk5MTVfd2FfbGlzdCAq
dykKK3N0YXRpYyB2b2lkIGNubF93aGl0ZWxpc3RfYnVpbGQoc3RydWN0IGludGVsX2VuZ2luZV9j
cyAqZW5naW5lKQogeworCXN0cnVjdCBpOTE1X3dhX2xpc3QgKncgPSAmZW5naW5lLT53aGl0ZWxp
c3Q7CisKKwlpZiAoZW5naW5lLT5jbGFzcyAhPSBSRU5ERVJfQ0xBU1MpCisJCXJldHVybjsKKwog
CS8qIFdhRW5hYmxlUHJlZW1wdGlvbkdyYW51bGFyaXR5Q29udHJvbEJ5VU1EOmNubCAqLwogCXdo
aXRlbGlzdF9yZWcodywgR0VOOF9DU19DSElDS0VOMSk7CiB9CiAKLXN0YXRpYyB2b2lkIGljbF93
aGl0ZWxpc3RfYnVpbGQoc3RydWN0IGk5MTVfd2FfbGlzdCAqdykKK3N0YXRpYyB2b2lkIGljbF93
aGl0ZWxpc3RfYnVpbGQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQogeworCXN0cnVj
dCBpOTE1X3dhX2xpc3QgKncgPSAmZW5naW5lLT53aGl0ZWxpc3Q7CisKKwlpZiAoZW5naW5lLT5j
bGFzcyAhPSBSRU5ERVJfQ0xBU1MpCisJCXJldHVybjsKKwogCS8qIFdhQWxsb3dVTURUb01vZGlm
eUhhbGZTbGljZUNoaWNrZW43OmljbCAqLwogCXdoaXRlbGlzdF9yZWcodywgR0VOOV9IQUxGX1NM
SUNFX0NISUNLRU43KTsKIApAQCAtMTA2OSwyNCArMTEwMCwyMiBAQCB2b2lkIGludGVsX2VuZ2lu
ZV9pbml0X3doaXRlbGlzdChzdHJ1Y3QgaW50ZWxfZW5naW5lX2NzICplbmdpbmUpCiAJc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUgPSBlbmdpbmUtPmk5MTU7CiAJc3RydWN0IGk5MTVfd2Ff
bGlzdCAqdyA9ICZlbmdpbmUtPndoaXRlbGlzdDsKIAotCUdFTV9CVUdfT04oZW5naW5lLT5pZCAh
PSBSQ1MwKTsKLQogCXdhX2luaXRfc3RhcnQodywgIndoaXRlbGlzdCIpOwogCiAJaWYgKElTX0dF
TihpOTE1LCAxMSkpCi0JCWljbF93aGl0ZWxpc3RfYnVpbGQodyk7CisJCWljbF93aGl0ZWxpc3Rf
YnVpbGQoZW5naW5lKTsKIAllbHNlIGlmIChJU19DQU5OT05MQUtFKGk5MTUpKQotCQljbmxfd2hp
dGVsaXN0X2J1aWxkKHcpOworCQljbmxfd2hpdGVsaXN0X2J1aWxkKGVuZ2luZSk7CiAJZWxzZSBp
ZiAoSVNfQ09GRkVFTEFLRShpOTE1KSkKLQkJY2ZsX3doaXRlbGlzdF9idWlsZCh3KTsKKwkJY2Zs
X3doaXRlbGlzdF9idWlsZChlbmdpbmUpOwogCWVsc2UgaWYgKElTX0dFTUlOSUxBS0UoaTkxNSkp
Ci0JCWdsa193aGl0ZWxpc3RfYnVpbGQodyk7CisJCWdsa193aGl0ZWxpc3RfYnVpbGQoZW5naW5l
KTsKIAllbHNlIGlmIChJU19LQUJZTEFLRShpOTE1KSkKLQkJa2JsX3doaXRlbGlzdF9idWlsZCh3
KTsKKwkJa2JsX3doaXRlbGlzdF9idWlsZChlbmdpbmUpOwogCWVsc2UgaWYgKElTX0JST1hUT04o
aTkxNSkpCi0JCWJ4dF93aGl0ZWxpc3RfYnVpbGQodyk7CisJCWJ4dF93aGl0ZWxpc3RfYnVpbGQo
ZW5naW5lKTsKIAllbHNlIGlmIChJU19TS1lMQUtFKGk5MTUpKQotCQlza2xfd2hpdGVsaXN0X2J1
aWxkKHcpOworCQlza2xfd2hpdGVsaXN0X2J1aWxkKGVuZ2luZSk7CiAJZWxzZSBpZiAoSU5URUxf
R0VOKGk5MTUpIDw9IDgpCiAJCXJldHVybjsKIAllbHNlCi0tIAoyLjIwLjEKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
