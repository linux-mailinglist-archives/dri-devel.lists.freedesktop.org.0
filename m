Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 29B5F4559F
	for <lists+dri-devel@lfdr.de>; Fri, 14 Jun 2019 09:21:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0D20A8940F;
	Fri, 14 Jun 2019 07:21:26 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from pandora.armlinux.org.uk (pandora.armlinux.org.uk
 [IPv6:2001:4d48:ad52:3201:214:fdff:fe10:1be6])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6744B89AEE
 for <dri-devel@lists.freedesktop.org>; Thu, 13 Jun 2019 15:03:34 +0000 (UTC)
Received: from e0022681537dd.dyn.armlinux.org.uk
 ([2002:4e20:1eda:1:222:68ff:fe15:37dd]:44864 helo=rmk-PC.armlinux.org.uk)
 by pandora.armlinux.org.uk with esmtpsa
 (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128) (Exim 4.90_1)
 (envelope-from <rmk@armlinux.org.uk>)
 id 1hbRFo-0003l0-Py; Thu, 13 Jun 2019 16:03:05 +0100
Received: from rmk by rmk-PC.armlinux.org.uk with local (Exim
 4.82_1-5b7a7c0-XX) (envelope-from <rmk@armlinux.org.uk>)
 id 1hbRFj-00008h-AX; Thu, 13 Jun 2019 16:02:59 +0100
In-Reply-To: <20190613150114.xqkyb7j7w4ve4yvr@shell.armlinux.org.uk>
References: <20190613150114.xqkyb7j7w4ve4yvr@shell.armlinux.org.uk>
From: Russell King <rmk+kernel@armlinux.org.uk>
To: dri-devel@lists.freedesktop.org, linux-arm-kernel@lists.infradead.org
Subject: [PATCH 15/18] drm/armada: redo CRTC debugfs files
MIME-Version: 1.0
Content-Disposition: inline
Message-Id: <E1hbRFj-00008h-AX@rmk-PC.armlinux.org.uk>
Date: Thu, 13 Jun 2019 16:02:59 +0100
X-Mailman-Approved-At: Fri, 14 Jun 2019 07:21:24 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; 
 d=armlinux.org.uk; s=pandora-2019; h=Date:Sender:Message-Id:Content-Type:
 Content-Transfer-Encoding:MIME-Version:Subject:Cc:To:From:References:
 In-Reply-To:Reply-To:Content-ID:Content-Description:Resent-Date:Resent-From:
 Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:
 List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=XytI0YLr/dQ8VTX+rCcoTxXlowwMTA/pwMydxgoNl9w=; b=Jkb3ht7T53Uk4oOkconmvJYZgt
 3vtqYoMX2QODN9S1Y3IQsob6/Be+mmwCA+KDUG4tAXCq7ZAmlKH4lKFNHEFdEbcmcEirdkh5uxoz+
 41tQPGM+hSU/dj68coFrLYXX3MYHkV3JexqekuqU9+i4H+NIn4XvXnDma2y7r7Z09/iQwwkXgoxJq
 Oq9WreFNxmipgVAEc9vEB7tIHC4zC8iQPWoKanZCoxWSI9xM39uC+9lvMYIuCBZ5tEoVhMa0qLPuV
 dg/whg30pWZVLI7Wp1cp/HFiSYvgHFaE2+Nmfj508DFlFPu7kA5lcJFEntV1soFkwWVY5pEQF0YaE
 Itjp7npw==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TW92ZSB0aGUgQ1JUQyBkZWJ1Z2ZzIGZpbGVzIGludG8gdGhlIENSVEMgc3BlY2lmaWMgZGlyZWN0
b3J5LgoKU2lnbmVkLW9mZi1ieTogUnVzc2VsbCBLaW5nIDxybWsra2VybmVsQGFybWxpbnV4Lm9y
Zy51az4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vYXJtYWRhL2FybWFkYV9jcnRjLmMgICAgfCAgNyAr
KysKIGRyaXZlcnMvZ3B1L2RybS9hcm1hZGEvYXJtYWRhX2RlYnVnZnMuYyB8IDk4ICsrKysrKysr
KysrKystLS0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2FybWFkYS9hcm1hZGFf
ZHJtLmggICAgIHwgIDEgKwogMyBmaWxlcyBjaGFuZ2VkLCA0NiBpbnNlcnRpb25zKCspLCA2MCBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYXJtYWRhL2FybWFkYV9j
cnRjLmMgYi9kcml2ZXJzL2dwdS9kcm0vYXJtYWRhL2FybWFkYV9jcnRjLmMKaW5kZXggZWNjZTdl
ZmIyNzFkLi5iZWE3OGYzOTc4NWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hcm1hZGEv
YXJtYWRhX2NydGMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYXJtYWRhL2FybWFkYV9jcnRjLmMK
QEAgLTc3NCw2ICs3NzQsMTIgQEAgc3RhdGljIHZvaWQgYXJtYWRhX2RybV9jcnRjX2Rlc3Ryb3ko
c3RydWN0IGRybV9jcnRjICpjcnRjKQogCWtmcmVlKGRjcnRjKTsKIH0KIAorc3RhdGljIGludCBh
cm1hZGFfZHJtX2NydGNfbGF0ZV9yZWdpc3RlcihzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCit7CisJ
YXJtYWRhX2RybV9jcnRjX2RlYnVnZnNfaW5pdChkcm1fdG9fYXJtYWRhX2NydGMoY3J0YykpOwor
CXJldHVybiAwOworfQorCiAvKiBUaGVzZSBhcmUgY2FsbGVkIHVuZGVyIHRoZSB2YmxfbG9jay4g
Ki8KIHN0YXRpYyBpbnQgYXJtYWRhX2RybV9jcnRjX2VuYWJsZV92Ymxhbmsoc3RydWN0IGRybV9j
cnRjICpjcnRjKQogewpAQCAtODA2LDYgKzgxMiw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJt
X2NydGNfZnVuY3MgYXJtYWRhX2NydGNfZnVuY3MgPSB7CiAJLnBhZ2VfZmxpcAk9IGRybV9hdG9t
aWNfaGVscGVyX3BhZ2VfZmxpcCwKIAkuYXRvbWljX2R1cGxpY2F0ZV9zdGF0ZSA9IGRybV9hdG9t
aWNfaGVscGVyX2NydGNfZHVwbGljYXRlX3N0YXRlLAogCS5hdG9taWNfZGVzdHJveV9zdGF0ZSA9
IGRybV9hdG9taWNfaGVscGVyX2NydGNfZGVzdHJveV9zdGF0ZSwKKwkubGF0ZV9yZWdpc3Rlcgk9
IGFybWFkYV9kcm1fY3J0Y19sYXRlX3JlZ2lzdGVyLAogCS5lbmFibGVfdmJsYW5rCT0gYXJtYWRh
X2RybV9jcnRjX2VuYWJsZV92YmxhbmssCiAJLmRpc2FibGVfdmJsYW5rCT0gYXJtYWRhX2RybV9j
cnRjX2Rpc2FibGVfdmJsYW5rLAogfTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hcm1h
ZGEvYXJtYWRhX2RlYnVnZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hcm1hZGEvYXJtYWRhX2RlYnVn
ZnMuYwppbmRleCA2NzU4YzNhODNkZTIuLjRkY2NlMDAyZWEyYSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2FybWFkYS9hcm1hZGFfZGVidWdmcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
cm1hZGEvYXJtYWRhX2RlYnVnZnMuYwpAQCAtMjgsNTAgKzI4LDMzIEBAIHN0YXRpYyBpbnQgYXJt
YWRhX2RlYnVnZnNfZ2VtX2xpbmVhcl9zaG93KHN0cnVjdCBzZXFfZmlsZSAqbSwgdm9pZCAqZGF0
YSkKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIGludCBhcm1hZGFfZGVidWdmc19yZWdfc2hvdyhz
dHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpCitzdGF0aWMgaW50IGFybWFkYV9kZWJ1Z2Zz
X2NydGNfcmVnX3Nob3coc3RydWN0IHNlcV9maWxlICptLCB2b2lkICpkYXRhKQogewotCXN0cnVj
dCBkcm1fZGV2aWNlICpkZXYgPSBtLT5wcml2YXRlOwotCXN0cnVjdCBhcm1hZGFfcHJpdmF0ZSAq
cHJpdiA9IGRldi0+ZGV2X3ByaXZhdGU7Ci0JaW50IG4sIGk7Ci0KLQlpZiAocHJpdikgewotCQlm
b3IgKG4gPSAwOyBuIDwgQVJSQVlfU0laRShwcml2LT5kY3J0Yyk7IG4rKykgewotCQkJc3RydWN0
IGFybWFkYV9jcnRjICpkY3J0YyA9IHByaXYtPmRjcnRjW25dOwotCQkJaWYgKCFkY3J0YykKLQkJ
CQljb250aW51ZTsKLQotCQkJZm9yIChpID0gMHg4NDsgaSA8PSAweDFjNDsgaSArPSA0KSB7Ci0J
CQkJdWludDMyX3QgdiA9IHJlYWRsX3JlbGF4ZWQoZGNydGMtPmJhc2UgKyBpKTsKLQkJCQlzZXFf
cHJpbnRmKG0sICIldTogMHglMDR4OiAweCUwOHhcbiIsIG4sIGksIHYpOwotCQkJfQotCQl9CisJ
c3RydWN0IGFybWFkYV9jcnRjICpkY3J0YyA9IG0tPnByaXZhdGU7CisJaW50IGk7CisKKwlmb3Ig
KGkgPSAweDg0OyBpIDw9IDB4MWM0OyBpICs9IDQpIHsKKwkJdTMyIHYgPSByZWFkbF9yZWxheGVk
KGRjcnRjLT5iYXNlICsgaSk7CisJCXNlcV9wcmludGYobSwgIjB4JTA0eDogMHglMDh4XG4iLCBp
LCB2KTsKIAl9CiAKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIGludCBhcm1hZGFfZGVidWdmc19y
ZWdfcl9vcGVuKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBmaWxlICpmaWxlKQorc3RhdGlj
IGludCBhcm1hZGFfZGVidWdmc19jcnRjX3JlZ19vcGVuKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0
cnVjdCBmaWxlICpmaWxlKQogewotCXJldHVybiBzaW5nbGVfb3BlbihmaWxlLCBhcm1hZGFfZGVi
dWdmc19yZWdfc2hvdywgaW5vZGUtPmlfcHJpdmF0ZSk7CisJcmV0dXJuIHNpbmdsZV9vcGVuKGZp
bGUsIGFybWFkYV9kZWJ1Z2ZzX2NydGNfcmVnX3Nob3csCisJCQkgICBpbm9kZS0+aV9wcml2YXRl
KTsKIH0KIAotc3RhdGljIGNvbnN0IHN0cnVjdCBmaWxlX29wZXJhdGlvbnMgZm9wc19yZWdfciA9
IHsKLQkub3duZXIgPSBUSElTX01PRFVMRSwKLQkub3BlbiA9IGFybWFkYV9kZWJ1Z2ZzX3JlZ19y
X29wZW4sCi0JLnJlYWQgPSBzZXFfcmVhZCwKLQkubGxzZWVrID0gc2VxX2xzZWVrLAotCS5yZWxl
YXNlID0gc2luZ2xlX3JlbGVhc2UsCi19OwotCi1zdGF0aWMgaW50IGFybWFkYV9kZWJ1Z2ZzX3dy
aXRlKHN0cnVjdCBmaWxlICpmaWxlLCBjb25zdCBjaGFyIF9fdXNlciAqcHRyLAotCXNpemVfdCBs
ZW4sIGxvZmZfdCAqb2ZmKQorc3RhdGljIGludCBhcm1hZGFfZGVidWdmc19jcnRjX3JlZ193cml0
ZShzdHJ1Y3QgZmlsZSAqZmlsZSwKKwljb25zdCBjaGFyIF9fdXNlciAqcHRyLCBzaXplX3QgbGVu
LCBsb2ZmX3QgKm9mZikKIHsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gZmlsZS0+cHJpdmF0
ZV9kYXRhOwotCXN0cnVjdCBhcm1hZGFfcHJpdmF0ZSAqcHJpdiA9IGRldi0+ZGV2X3ByaXZhdGU7
Ci0Jc3RydWN0IGFybWFkYV9jcnRjICpkY3J0YyA9IHByaXYtPmRjcnRjWzBdOwotCWNoYXIgYnVm
WzMyXSwgKnA7Ci0JdWludDMyX3QgcmVnLCB2YWw7CisJc3RydWN0IGFybWFkYV9jcnRjICpkY3J0
YzsKKwl1bnNpZ25lZCBsb25nIHJlZywgbWFzaywgdmFsOworCWNoYXIgYnVmWzMyXTsKIAlpbnQg
cmV0OworCXUzMiB2OwogCiAJaWYgKCpvZmYgIT0gMCkKIAkJcmV0dXJuIDA7CkBAIC04NCwyNCAr
NjcsMzUgQEAgc3RhdGljIGludCBhcm1hZGFfZGVidWdmc193cml0ZShzdHJ1Y3QgZmlsZSAqZmls
ZSwgY29uc3QgY2hhciBfX3VzZXIgKnB0ciwKIAkJcmV0dXJuIHJldDsKIAlidWZbbGVuXSA9ICdc
MCc7CiAKLQlyZWcgPSBzaW1wbGVfc3RydG91bChidWYsICZwLCAxNik7Ci0JaWYgKCFpc3NwYWNl
KCpwKSkKKwlpZiAoc3NjYW5mKGJ1ZiwgIiVseCAlbHggJWx4IiwgJnJlZywgJm1hc2ssICZ2YWwp
ICE9IDMpCiAJCXJldHVybiAtRUlOVkFMOwotCXZhbCA9IHNpbXBsZV9zdHJ0b3VsKHAgKyAxLCBO
VUxMLCAxNik7CisJaWYgKHJlZyA8IDB4ODQgfHwgcmVnID4gMHgxYzQgfHwgcmVnICYgMykKKwkJ
cmV0dXJuIC1FUkFOR0U7CiAKLQlpZiAocmVnID49IDB4ODQgJiYgcmVnIDw9IDB4MWM0KQotCQl3
cml0ZWwodmFsLCBkY3J0Yy0+YmFzZSArIHJlZyk7CisJZGNydGMgPSAoKHN0cnVjdCBzZXFfZmls
ZSAqKWZpbGUtPnByaXZhdGVfZGF0YSktPnByaXZhdGU7CisJdiA9IHJlYWRsKGRjcnRjLT5iYXNl
ICsgcmVnKTsKKwl2ICY9IH5tYXNrOworCXYgfD0gdmFsICYgbWFzazsKKwl3cml0ZWwodiwgZGNy
dGMtPmJhc2UgKyByZWcpOwogCiAJcmV0dXJuIGxlbjsKIH0KIAotc3RhdGljIGNvbnN0IHN0cnVj
dCBmaWxlX29wZXJhdGlvbnMgZm9wc19yZWdfdyA9IHsKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZmls
ZV9vcGVyYXRpb25zIGFybWFkYV9kZWJ1Z2ZzX2NydGNfcmVnX2ZvcHMgPSB7CiAJLm93bmVyID0g
VEhJU19NT0RVTEUsCi0JLm9wZW4gPSBzaW1wbGVfb3BlbiwKLQkud3JpdGUgPSBhcm1hZGFfZGVi
dWdmc193cml0ZSwKLQkubGxzZWVrID0gbm9vcF9sbHNlZWssCisJLm9wZW4gPSBhcm1hZGFfZGVi
dWdmc19jcnRjX3JlZ19vcGVuLAorCS5yZWFkID0gc2VxX3JlYWQsCisJLndyaXRlID0gYXJtYWRh
X2RlYnVnZnNfY3J0Y19yZWdfd3JpdGUsCisJLmxsc2VlayA9IHNlcV9sc2VlaywKKwkucmVsZWFz
ZSA9IHNpbmdsZV9yZWxlYXNlLAogfTsKIAordm9pZCBhcm1hZGFfZHJtX2NydGNfZGVidWdmc19p
bml0KHN0cnVjdCBhcm1hZGFfY3J0YyAqZGNydGMpCit7CisJZGVidWdmc19jcmVhdGVfZmlsZSgi
YXJtYWRhLXJlZ3MiLCAwNjAwLCBkY3J0Yy0+Y3J0Yy5kZWJ1Z2ZzX2VudHJ5LAorCQkJICAgIGRj
cnRjLCAmYXJtYWRhX2RlYnVnZnNfY3J0Y19yZWdfZm9wcyk7Cit9CisKIHN0YXRpYyBzdHJ1Y3Qg
ZHJtX2luZm9fbGlzdCBhcm1hZGFfZGVidWdmc19saXN0W10gPSB7CiAJeyAiZ2VtX2xpbmVhciIs
IGFybWFkYV9kZWJ1Z2ZzX2dlbV9saW5lYXJfc2hvdywgMCB9LAogfTsKQEAgLTEwOSwyNCArMTAz
LDggQEAgc3RhdGljIHN0cnVjdCBkcm1faW5mb19saXN0IGFybWFkYV9kZWJ1Z2ZzX2xpc3RbXSA9
IHsKIAogaW50IGFybWFkYV9kcm1fZGVidWdmc19pbml0KHN0cnVjdCBkcm1fbWlub3IgKm1pbm9y
KQogewotCXN0cnVjdCBkZW50cnkgKmRlOwotCWludCByZXQ7Ci0KLQlyZXQgPSBkcm1fZGVidWdm
c19jcmVhdGVfZmlsZXMoYXJtYWRhX2RlYnVnZnNfbGlzdCwKLQkJCQkgICAgICAgQVJNQURBX0RF
QlVHRlNfRU5UUklFUywKLQkJCQkgICAgICAgbWlub3ItPmRlYnVnZnNfcm9vdCwgbWlub3IpOwot
CWlmIChyZXQpCi0JCXJldHVybiByZXQ7Ci0KLQlkZSA9IGRlYnVnZnNfY3JlYXRlX2ZpbGUoInJl
ZyIsIFNfSUZSRUcgfCBTX0lSVVNSLAotCQkJCSBtaW5vci0+ZGVidWdmc19yb290LCBtaW5vci0+
ZGV2LCAmZm9wc19yZWdfcik7Ci0JaWYgKCFkZSkKLQkJcmV0dXJuIC1FTk9NRU07Ci0KLQlkZSA9
IGRlYnVnZnNfY3JlYXRlX2ZpbGUoInJlZ193ciIsIFNfSUZSRUcgfCBTX0lXVVNSLAotCQkJCSBt
aW5vci0+ZGVidWdmc19yb290LCBtaW5vci0+ZGV2LCAmZm9wc19yZWdfdyk7Ci0JaWYgKCFkZSkK
LQkJcmV0dXJuIC1FTk9NRU07CisJZHJtX2RlYnVnZnNfY3JlYXRlX2ZpbGVzKGFybWFkYV9kZWJ1
Z2ZzX2xpc3QsIEFSTUFEQV9ERUJVR0ZTX0VOVFJJRVMsCisJCQkJIG1pbm9yLT5kZWJ1Z2ZzX3Jv
b3QsIG1pbm9yKTsKIAogCXJldHVybiAwOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FybWFkYS9hcm1hZGFfZHJtLmggYi9kcml2ZXJzL2dwdS9kcm0vYXJtYWRhL2FybWFkYV9kcm0u
aAppbmRleCBmMDkwODNmZjE1ZDMuLmI2MzA3MjM1ZjMyMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FybWFkYS9hcm1hZGFfZHJtLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FybWFkYS9h
cm1hZGFfZHJtLmgKQEAgLTc4LDYgKzc4LDcgQEAgdm9pZCBhcm1hZGFfZmJkZXZfZmluaShzdHJ1
Y3QgZHJtX2RldmljZSAqKTsKIAogaW50IGFybWFkYV9vdmVybGF5X3BsYW5lX2NyZWF0ZShzdHJ1
Y3QgZHJtX2RldmljZSAqLCB1bnNpZ25lZCBsb25nKTsKIAordm9pZCBhcm1hZGFfZHJtX2NydGNf
ZGVidWdmc19pbml0KHN0cnVjdCBhcm1hZGFfY3J0YyAqZGNydGMpOwogaW50IGFybWFkYV9kcm1f
ZGVidWdmc19pbml0KHN0cnVjdCBkcm1fbWlub3IgKik7CiAKICNlbmRpZgotLSAKMi43LjQKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBt
YWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
