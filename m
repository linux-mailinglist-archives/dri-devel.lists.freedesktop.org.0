Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 35B9960257
	for <lists+dri-devel@lfdr.de>; Fri,  5 Jul 2019 10:41:29 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B6ED16E427;
	Fri,  5 Jul 2019 08:41:21 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x542.google.com (mail-pg1-x542.google.com
 [IPv6:2607:f8b0:4864:20::542])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2313C6E402
 for <dri-devel@lists.freedesktop.org>; Fri,  5 Jul 2019 04:26:51 +0000 (UTC)
Received: by mail-pg1-x542.google.com with SMTP id z75so3697297pgz.5
 for <dri-devel@lists.freedesktop.org>; Thu, 04 Jul 2019 21:26:51 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=FfAso7efMu/aA+eHOC+kWuha2DdRu+sIyUVZpYri0wk=;
 b=KLKuQrqTITSOaUdTI2pIJWic1gC58YzYqDFgSKN0tpIDBUsYEsAxtXaKi5NjZ2+IT/
 xYRrgygqHhxHLCUySDy2dNUSwD0y3tPOP4Kj0rLAJP8MLAWEV7DsuRb4IfWf5ieC0mTL
 NIO862sucBF2oWmntQGCQRpLBKJl1GvJa7Hj5/52bNdnaP59SCVoe1YZALlGI275273V
 PKeOlXlYwyzpRL05TAWAN/PIpGP6kwz4pDJceYHkhb55GMyYSsHDT7LmSo/RraFDhGeh
 wSyIvslnCHlnjcdc0Mx5ucBh1cX7G+oOJq0n7ten4YGDlaF8OuASxNQV8cjCs5NCrpPp
 Lbcw==
X-Gm-Message-State: APjAAAV63Q8QJnmfrguG3h499nUVFUQbq+3E02uQEeLgaHHAV/UxXbDM
 47y+GCVpbf/p6fekHDtzuY77Gg==
X-Google-Smtp-Source: APXvYqwZbL+s761iX960bRQQcsfHBESYYHX6caI+DhUbiPV9OOsTfm5vhRVAxh6UChQM0IMk+bwDTw==
X-Received: by 2002:a63:24c1:: with SMTP id k184mr2425512pgk.120.1562300810605; 
 Thu, 04 Jul 2019 21:26:50 -0700 (PDT)
Received: from localhost ([2401:fa00:1:b:e688:dfd2:a1a7:2956])
 by smtp.gmail.com with ESMTPSA id h2sm6126547pgs.17.2019.07.04.21.26.47
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Thu, 04 Jul 2019 21:26:50 -0700 (PDT)
From: Cheng-Yi Chiang <cychiang@chromium.org>
To: linux-kernel@vger.kernel.org
Subject: [PATCH 2/4] drm: bridge: dw-hdmi: Report connector status using
 callback
Date: Fri,  5 Jul 2019 12:26:21 +0800
Message-Id: <20190705042623.129541-3-cychiang@chromium.org>
X-Mailer: git-send-email 2.22.0.410.gd8fdbe21b5-goog
In-Reply-To: <20190705042623.129541-1-cychiang@chromium.org>
References: <20190705042623.129541-1-cychiang@chromium.org>
MIME-Version: 1.0
X-Mailman-Approved-At: Fri, 05 Jul 2019 08:41:20 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=chromium.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=FfAso7efMu/aA+eHOC+kWuha2DdRu+sIyUVZpYri0wk=;
 b=NQaaID67Y+LZwPST2LvJBza5Z0GadFPix/sAuAKZfbGHz2qYjWAokPh73WmpEZVBX+
 ovAj5OC9r9vmp+giPJWm6aGtvcx9wCAxNasdbMQrs46bEhkDxQItAQ/gc7xQSOMGIiwi
 y1c+dcnmFLnIFj+8Cj21PpTCMX3HNEnakazQg=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: alsa-devel@alsa-project.org, dianders@chromium.org,
 linux-rockchip@lists.infradead.org, David Airlie <airlied@linux.ie>,
 dri-devel@lists.freedesktop.org, Takashi Iwai <tiwai@suse.com>,
 Liam Girdwood <lgirdwood@gmail.com>, tzungbi@chromium.org,
 Jaroslav Kysela <perex@perex.cz>, Hans Verkuil <hverkuil@xs4all.nl>,
 Russell King <rmk+kernel@armlinux.org.uk>, Mark Brown <broonie@kernel.org>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>, dgreid@chromium.org,
 linux-arm-kernel@lists.infradead.org, Cheng-Yi Chiang <cychiang@chromium.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWxsb3cgY29kZWMgZHJpdmVyIHJlZ2lzdGVyIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciBwbHVnIGV2
ZW50LgoKVGhlIGNhbGxiYWNrIHJlZ2lzdHJhdGlvbiBmbG93Ogpkdy1oZG1pIDwtLS0gaHctaGRt
aS1pMnMtYXVkaW8gPC0tLSBoZG1pLWNvZGVjCgpkdy1oZG1pLWkycy1hdWRpbyBpbXBsZW1lbnRz
IGhvb2tfcGx1Z2dlZF9jYiBvcApzbyBjb2RlYyBkcml2ZXIgY2FuIHJlZ2lzdGVyIHRoZSBjYWxs
YmFjay4KCmR3LWhkbWkgaW1wbGVtZW50cyBzZXRfcGx1Z2dlZF9jYiBvcCBzbyBwbGF0Zm9ybSBk
ZXZpY2UgY2FuIHJlZ2lzdGVyIHRoZQpjYWxsYmFjay4KCldoZW4gY29ubmVjdG9yIHBsdWcvdW5w
bHVnIGV2ZW50IGhhcHBlbnMsIHJlcG9ydCB0aGlzIGV2ZW50IHVzaW5nIHRoZQpjYWxsYmFjay4K
Ck1ha2Ugc3VyZSB0aGF0IGF1ZGlvIGFuZCBkcm0gYXJlIHVzaW5nIHRoZSBzaW5nbGUgc291cmNl
IG9mIHRydXRoIGZvcgpjb25uZWN0b3Igc3RhdHVzLgoKU2lnbmVkLW9mZi1ieTogQ2hlbmctWWkg
Q2hpYW5nIDxjeWNoaWFuZ0BjaHJvbWl1bS5vcmc+Ci0tLQogLi4uL2dwdS9kcm0vYnJpZGdlL3N5
bm9wc3lzL2R3LWhkbWktYXVkaW8uaCAgIHwgIDMgKysKIC4uLi9kcm0vYnJpZGdlL3N5bm9wc3lz
L2R3LWhkbWktaTJzLWF1ZGlvLmMgICB8IDEwICsrKysrKwogZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9zeW5vcHN5cy9kdy1oZG1pLmMgICAgIHwgMzQgKysrKysrKysrKysrKysrKysrLQogMyBmaWxl
cyBjaGFuZ2VkLCA0NiBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLWF1ZGlvLmggYi9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LWhkbWktYXVkaW8uaAppbmRleCA2M2I1NzU2ZjQ2
M2IuLmY1MjNjNTkwOTg0ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5v
cHN5cy9kdy1oZG1pLWF1ZGlvLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5
cy9kdy1oZG1pLWF1ZGlvLmgKQEAgLTIsNiArMiw4IEBACiAjaWZuZGVmIERXX0hETUlfQVVESU9f
SAogI2RlZmluZSBEV19IRE1JX0FVRElPX0gKIAorI2luY2x1ZGUgPHNvdW5kL2hkbWktY29kZWMu
aD4KKwogc3RydWN0IGR3X2hkbWk7CiAKIHN0cnVjdCBkd19oZG1pX2F1ZGlvX2RhdGEgewpAQCAt
MTcsNiArMTksNyBAQCBzdHJ1Y3QgZHdfaGRtaV9pMnNfYXVkaW9fZGF0YSB7CiAKIAl2b2lkICgq
d3JpdGUpKHN0cnVjdCBkd19oZG1pICpoZG1pLCB1OCB2YWwsIGludCBvZmZzZXQpOwogCXU4ICgq
cmVhZCkoc3RydWN0IGR3X2hkbWkgKmhkbWksIGludCBvZmZzZXQpOworCWludCAoKnNldF9wbHVn
Z2VkX2NiKShzdHJ1Y3QgZHdfaGRtaSAqaGRtaSwgaGRtaV9jb2RlY19wbHVnZ2VkX2NiIGZuKTsK
IH07CiAKICNlbmRpZgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5
cy9kdy1oZG1pLWkycy1hdWRpby5jIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9k
dy1oZG1pLWkycy1hdWRpby5jCmluZGV4IDVjYmI3MWE4NjZkNS4uN2I5M2NmMDVjOTg1IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LWhkbWktaTJzLWF1ZGlv
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLWkycy1hdWRp
by5jCkBAIC0xMDQsMTAgKzEwNCwyMCBAQCBzdGF0aWMgaW50IGR3X2hkbWlfaTJzX2dldF9kYWlf
aWQoc3RydWN0IHNuZF9zb2NfY29tcG9uZW50ICpjb21wb25lbnQsCiAJcmV0dXJuIC1FSU5WQUw7
CiB9CiAKK3N0YXRpYyBpbnQgZHdfaGRtaV9pMnNfaG9va19wbHVnZ2VkX2NiKHN0cnVjdCBkZXZp
Y2UgKmRldiwgdm9pZCAqZGF0YSwKKwkJCQkgICAgICAgaGRtaV9jb2RlY19wbHVnZ2VkX2NiIGZu
KQoreworCXN0cnVjdCBkd19oZG1pX2kyc19hdWRpb19kYXRhICphdWRpbyA9IGRhdGE7CisJc3Ry
dWN0IGR3X2hkbWkgKmhkbWkgPSBhdWRpby0+aGRtaTsKKworCXJldHVybiBhdWRpby0+c2V0X3Bs
dWdnZWRfY2IoaGRtaSwgZm4pOworfQorCiBzdGF0aWMgc3RydWN0IGhkbWlfY29kZWNfb3BzIGR3
X2hkbWlfaTJzX29wcyA9IHsKIAkuaHdfcGFyYW1zCT0gZHdfaGRtaV9pMnNfaHdfcGFyYW1zLAog
CS5hdWRpb19zaHV0ZG93bgk9IGR3X2hkbWlfaTJzX2F1ZGlvX3NodXRkb3duLAogCS5nZXRfZGFp
X2lkCT0gZHdfaGRtaV9pMnNfZ2V0X2RhaV9pZCwKKwkuaG9va19wbHVnZ2VkX2NiID0gZHdfaGRt
aV9pMnNfaG9va19wbHVnZ2VkX2NiLAogfTsKIAogc3RhdGljIGludCBzbmRfZHdfaGRtaV9wcm9i
ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5
bm9wc3lzL2R3LWhkbWkuYwppbmRleCAwNDViMWIxM2ZkMGUuLmM2OWEzOTlmYzdjYSAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMKQEAgLTI2LDYgKzI2LDggQEAK
ICNpbmNsdWRlIDxkcm0vZHJtX3Byb2JlX2hlbHBlci5oPgogI2luY2x1ZGUgPGRybS9icmlkZ2Uv
ZHdfaGRtaS5oPgogCisjaW5jbHVkZSA8c291bmQvaGRtaS1jb2RlYy5oPgorCiAjaW5jbHVkZSA8
dWFwaS9saW51eC9tZWRpYS1idXMtZm9ybWF0Lmg+CiAjaW5jbHVkZSA8dWFwaS9saW51eC92aWRl
b2RldjIuaD4KIApAQCAtMTg1LDYgKzE4Nyw5IEBAIHN0cnVjdCBkd19oZG1pIHsKIAl2b2lkICgq
ZGlzYWJsZV9hdWRpbykoc3RydWN0IGR3X2hkbWkgKmhkbWkpOwogCiAJc3RydWN0IGNlY19ub3Rp
ZmllciAqY2VjX25vdGlmaWVyOworCisJaGRtaV9jb2RlY19wbHVnZ2VkX2NiIHBsdWdnZWRfY2I7
CisJZW51bSBkcm1fY29ubmVjdG9yX3N0YXR1cyBsYXN0X2Nvbm5lY3Rvcl9yZXN1bHQ7CiB9Owog
CiAjZGVmaW5lIEhETUlfSUhfUEhZX1NUQVQwX1JYX1NFTlNFIFwKQEAgLTIwOSw2ICsyMTQsMTcg
QEAgc3RhdGljIGlubGluZSB1OCBoZG1pX3JlYWRiKHN0cnVjdCBkd19oZG1pICpoZG1pLCBpbnQg
b2Zmc2V0KQogCXJldHVybiB2YWw7CiB9CiAKK3N0YXRpYyBpbnQgaGRtaV9zZXRfcGx1Z2dlZF9j
YihzdHJ1Y3QgZHdfaGRtaSAqaGRtaSwgaGRtaV9jb2RlY19wbHVnZ2VkX2NiIGZuKQoreworCW11
dGV4X2xvY2soJmhkbWktPm11dGV4KTsKKwloZG1pLT5wbHVnZ2VkX2NiID0gZm47CisJaWYgKGhk
bWktPmF1ZGlvICYmICFJU19FUlIoaGRtaS0+YXVkaW8pKQorCQlmbihoZG1pLT5hdWRpbywKKwkJ
ICAgaGRtaS0+bGFzdF9jb25uZWN0b3JfcmVzdWx0ID09IGNvbm5lY3Rvcl9zdGF0dXNfY29ubmVj
dGVkKTsKKwltdXRleF91bmxvY2soJmhkbWktPm11dGV4KTsKKwlyZXR1cm4gMDsKK30KKwogc3Rh
dGljIHZvaWQgaGRtaV9tb2RiKHN0cnVjdCBkd19oZG1pICpoZG1pLCB1OCBkYXRhLCB1OCBtYXNr
LCB1bnNpZ25lZCByZWcpCiB7CiAJcmVnbWFwX3VwZGF0ZV9iaXRzKGhkbWktPnJlZ20sIHJlZyA8
PCBoZG1pLT5yZWdfc2hpZnQsIG1hc2ssIGRhdGEpOwpAQCAtMjA0NCw2ICsyMDYwLDcgQEAgZHdf
aGRtaV9jb25uZWN0b3JfZGV0ZWN0KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsIGJv
b2wgZm9yY2UpCiB7CiAJc3RydWN0IGR3X2hkbWkgKmhkbWkgPSBjb250YWluZXJfb2YoY29ubmVj
dG9yLCBzdHJ1Y3QgZHdfaGRtaSwKIAkJCQkJICAgICBjb25uZWN0b3IpOworCWVudW0gZHJtX2Nv
bm5lY3Rvcl9zdGF0dXMgcmVzdWx0OwogCiAJbXV0ZXhfbG9jaygmaGRtaS0+bXV0ZXgpOwogCWhk
bWktPmZvcmNlID0gRFJNX0ZPUkNFX1VOU1BFQ0lGSUVEOwpAQCAtMjA1MSw3ICsyMDY4LDIwIEBA
IGR3X2hkbWlfY29ubmVjdG9yX2RldGVjdChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9y
LCBib29sIGZvcmNlKQogCWR3X2hkbWlfdXBkYXRlX3BoeV9tYXNrKGhkbWkpOwogCW11dGV4X3Vu
bG9jaygmaGRtaS0+bXV0ZXgpOwogCi0JcmV0dXJuIGhkbWktPnBoeS5vcHMtPnJlYWRfaHBkKGhk
bWksIGhkbWktPnBoeS5kYXRhKTsKKwlyZXN1bHQgPSBoZG1pLT5waHkub3BzLT5yZWFkX2hwZCho
ZG1pLCBoZG1pLT5waHkuZGF0YSk7CisKKwltdXRleF9sb2NrKCZoZG1pLT5tdXRleCk7CisJaWYg
KHJlc3VsdCAhPSBoZG1pLT5sYXN0X2Nvbm5lY3Rvcl9yZXN1bHQpIHsKKwkJZGV2X2RiZyhoZG1p
LT5kZXYsICJyZWFkX2hwZCByZXN1bHQ6ICVkIiwgcmVzdWx0KTsKKwkJaWYgKGhkbWktPnBsdWdn
ZWRfY2IgJiYgaGRtaS0+YXVkaW8gJiYgIUlTX0VSUihoZG1pLT5hdWRpbykpIHsKKwkJCWhkbWkt
PnBsdWdnZWRfY2IoaGRtaS0+YXVkaW8sCisJCQkJCSByZXN1bHQgPT0gY29ubmVjdG9yX3N0YXR1
c19jb25uZWN0ZWQpOworCQkJaGRtaS0+bGFzdF9jb25uZWN0b3JfcmVzdWx0ID0gcmVzdWx0Owor
CQl9CisJfQorCW11dGV4X3VubG9jaygmaGRtaS0+bXV0ZXgpOworCisJcmV0dXJuIHJlc3VsdDsK
IH0KIAogc3RhdGljIGludCBkd19oZG1pX2Nvbm5lY3Rvcl9nZXRfbW9kZXMoc3RydWN0IGRybV9j
b25uZWN0b3IgKmNvbm5lY3RvcikKQEAgLTI0NjAsNiArMjQ5MCw3IEBAIF9fZHdfaGRtaV9wcm9i
ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2LAogCWhkbWktPnJ4c2Vuc2UgPSB0cnVlOwog
CWhkbWktPnBoeV9tYXNrID0gKHU4KX4oSERNSV9QSFlfSFBEIHwgSERNSV9QSFlfUlhfU0VOU0Up
OwogCWhkbWktPm1jX2Nsa2RpcyA9IDB4N2Y7CisJaGRtaS0+bGFzdF9jb25uZWN0b3JfcmVzdWx0
ID0gY29ubmVjdG9yX3N0YXR1c19kaXNjb25uZWN0ZWQ7CiAKIAltdXRleF9pbml0KCZoZG1pLT5t
dXRleCk7CiAJbXV0ZXhfaW5pdCgmaGRtaS0+YXVkaW9fbXV0ZXgpOwpAQCAtMjY1Myw2ICsyNjg0
LDcgQEAgX19kd19oZG1pX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYsCiAJCWF1
ZGlvLmhkbWkJPSBoZG1pOwogCQlhdWRpby53cml0ZQk9IGhkbWlfd3JpdGViOwogCQlhdWRpby5y
ZWFkCT0gaGRtaV9yZWFkYjsKKwkJYXVkaW8uc2V0X3BsdWdnZWRfY2IgPSBoZG1pX3NldF9wbHVn
Z2VkX2NiOwogCQloZG1pLT5lbmFibGVfYXVkaW8gPSBkd19oZG1pX2kyc19hdWRpb19lbmFibGU7
CiAJCWhkbWktPmRpc2FibGVfYXVkaW8gPSBkd19oZG1pX2kyc19hdWRpb19kaXNhYmxlOwogCi0t
IAoyLjIyLjAuNDEwLmdkOGZkYmUyMWI1LWdvb2cKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2RyaS1kZXZlbA==
