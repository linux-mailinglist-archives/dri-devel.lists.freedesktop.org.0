Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6341B88EC6
	for <lists+dri-devel@lfdr.de>; Sun, 11 Aug 2019 01:11:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 36A316E28A;
	Sat, 10 Aug 2019 23:11:12 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AA56E6E184
 for <dri-devel@lists.freedesktop.org>; Sat, 10 Aug 2019 23:11:04 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 3B92167;
 Sun, 11 Aug 2019 01:11:00 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 8/9] drm/panel: Add driver for the Toppoly TD028TTEC1 panel
Date: Sun, 11 Aug 2019 02:10:47 +0300
Message-Id: <20190810231048.1921-9-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190810231048.1921-1-laurent.pinchart@ideasonboard.com>
References: <20190810231048.1921-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1565478660;
 bh=WUypdW2K9XW6dyWaJsktJpDVGEaiSgerxy/nhIMheHo=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=GZB4LnLS7nRh+M2jVuZehD92ZwQ6BmJmZsISSN24EF49zJfqa0HgqVQ182MPr6vjr
 BnDi90kRs1qcFtItdvvZHPs+0u2fHsk7R47BR7ernqmYZv6taHLboGOSI1/SUsJiS9
 yNqAZqRWC/U1YwyYcXtSzAyiH9GFTvBGEceflJCo=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYW5lbCBpcyB1c2VkIG9uIHRoZSBPcGVuTW9rbyBOZW8gRnJlZVJ1bm5lciBhbmQgTmVv
IDE5NzMuCgpUaGUgY29kZSBpcyBiYXNlZCBvbiB0aGUgb21hcGRybS1zcGVjaWZpYyBwYW5lbC10
cG8tdGQwMjh0dGVjMSBkcml2ZXIuCgpTaWduZWQtb2ZmLWJ5OiBMYXVyZW50IFBpbmNoYXJ0IDxs
YXVyZW50LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+Ci0tLQpDaGFuZ2VzIHNpbmNlIHYxOgoK
LSBNZW50aW9uIGJvYXJkcyB1c2luZyB0aGUgcGFuZWwgaW4gS2NvbmZpZwotIFJlbmFtZWQgdGQw
Mjh0dGVjMV9kZXZpY2UgdG8gdGQwMjh0dGVjMV9wYW5lbAotIENvbW1lbnRzIHVwZGF0ZXMKLSBS
ZW1vdmVkIHVubmVlZGVkIHJldCBjaGVjawotIFN0b3JlIHdpZHRoX21tIGFuZCBoZWlnaHRfbW0g
aW4gZHJtX2Rpc3BsYXlfbW9kZQotIFVzZSBkcm1fcGFuZWxfZGlzYWJsZSgpIGluIC5yZW1vdmUo
KSBoYW5kbGVyCi0tLQogZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcgICAgICAgICAgICAg
ICAgfCAgIDggKwogZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlICAgICAgICAgICAgICAg
fCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLXRwby10ZDAyOHR0ZWMxLmMgfCAz
ODEgKysrKysrKysrKysrKysrKysrKwogMyBmaWxlcyBjaGFuZ2VkLCAzOTAgaW5zZXJ0aW9ucygr
KQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC10cG8tdGQw
Mjh0dGVjMS5jCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcgYi9k
cml2ZXJzL2dwdS9kcm0vcGFuZWwvS2NvbmZpZwppbmRleCBiMDU2NDliMzExOGEuLmMyNjg5NDIw
ZDJkZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcKKysrIGIvZHJp
dmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcKQEAgLTMyNCw2ICszMjQsMTQgQEAgY29uZmlnIERS
TV9QQU5FTF9TT05ZX0FDWDU2NUFLTQogCSAgU2F5IFkgaGVyZSBpZiB5b3Ugd2FudCB0byBlbmFi
bGUgc3VwcG9ydCBmb3IgdGhlIFNvbnkgQUNYNTY1QUtNCiAJICA4MDB4NjAwIDMuNSIgcGFuZWwg
KGZvdW5kIG9uIHRoZSBOb2tpYSBOOTAwKS4KIAorY29uZmlnIERSTV9QQU5FTF9UUE9fVEQwMjhU
VEVDMQorCXRyaXN0YXRlICJUb3Bwb2x5IChUUE8pIFREMDI4VFRFQzEgcGFuZWwgZHJpdmVyIgor
CWRlcGVuZHMgb24gT0YgJiYgU1BJCisJZGVwZW5kcyBvbiBCQUNLTElHSFRfQ0xBU1NfREVWSUNF
CisJaGVscAorCSAgU2F5IFkgaGVyZSBpZiB5b3Ugd2FudCB0byBlbmFibGUgc3VwcG9ydCBmb3Ig
VFBPIFREMDI4VFRFQzEgNDgweDY0MAorCSAgMi44IiBwYW5lbCAoZm91bmQgb24gdGhlIE9wZW5N
b2tvIE5lbyBGcmVlUnVubmVyIGFuZCBOZW8gMTk3MykuCisKIGNvbmZpZyBEUk1fUEFORUxfVFBP
X1RQRzExMAogCXRyaXN0YXRlICJUUE8gVFBHIDgwMHg0MDAgcGFuZWwiCiAJZGVwZW5kcyBvbiBP
RiAmJiBTUEkgJiYgR1BJT0xJQgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL01h
a2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlCmluZGV4IDI4Y2YyMzMyZmQw
Ni4uMjdiNzc2NzM3YWQzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZp
bGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlCkBAIC0zNCw1ICszNCw2IEBA
IG9iai0kKENPTkZJR19EUk1fUEFORUxfU0hBUlBfTFMwNDNUMUxFMDEpICs9IHBhbmVsLXNoYXJw
LWxzMDQzdDFsZTAxLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfU0lUUk9OSVhfU1Q3NzAxKSAr
PSBwYW5lbC1zaXRyb25peC1zdDc3MDEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9TSVRST05J
WF9TVDc3ODlWKSArPSBwYW5lbC1zaXRyb25peC1zdDc3ODl2Lm8KIG9iai0kKENPTkZJR19EUk1f
UEFORUxfU09OWV9BQ1g1NjVBS00pICs9IHBhbmVsLXNvbnktYWN4NTY1YWttLm8KK29iai0kKENP
TkZJR19EUk1fUEFORUxfVFBPX1REMDI4VFRFQzEpICs9IHBhbmVsLXRwby10ZDAyOHR0ZWMxLm8K
IG9iai0kKENPTkZJR19EUk1fUEFORUxfVFBPX1RQRzExMCkgKz0gcGFuZWwtdHBvLXRwZzExMC5v
CiBvYmotJChDT05GSUdfRFJNX1BBTkVMX1RSVUxZX05UMzU1OTdfV1FYR0EpICs9IHBhbmVsLXRy
dWx5LW50MzU1OTcubwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLXRw
by10ZDAyOHR0ZWMxLmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtdHBvLXRkMDI4dHRl
YzEuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjcxOTQ0ZGRmMjEz
YQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC10cG8tdGQw
Mjh0dGVjMS5jCkBAIC0wLDAgKzEsMzgxIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjog
R1BMLTIuMAorLyoKKyAqIFRvcHBvbHkgVEQwMjhUVEVDMSBQYW5lbCBEcml2ZXIKKyAqCisgKiBD
b3B5cmlnaHQgKEMpIDIwMTkgVGV4YXMgSW5zdHJ1bWVudHMgSW5jb3Jwb3JhdGVkCisgKgorICog
QmFzZWQgb24gdGhlIG9tYXBkcm0tc3BlY2lmaWMgcGFuZWwtdHBvLXRkMDI4dHRlYzEgZHJpdmVy
CisgKgorICogQ29weXJpZ2h0IChDKSAyMDA4IE5va2lhIENvcnBvcmF0aW9uCisgKiBBdXRob3I6
IFRvbWkgVmFsa2VpbmVuIDx0b21pLnZhbGtlaW5lbkB0aS5jb20+CisgKgorICogTmVvIDE5NzMg
Y29kZSAoamJ0Nms3NC5jKToKKyAqIENvcHlyaWdodCAoQykgMjAwNi0yMDA3IE9wZW5Nb2tvLCBJ
bmMuCisgKiBBdXRob3I6IEhhcmFsZCBXZWx0ZSA8bGFmb3JnZUBvcGVubW9rby5vcmc+CisgKgor
ICogUG9ydGVkIGFuZCBhZGFwdGVkIGZyb20gTmVvIDE5NzMgVS1Cb290IGJ5OgorICogSC4gTmlr
b2xhdXMgU2NoYWxsZXIgPGhuc0Bnb2xkZWxpY28uY29tPgorICovCisKKyNpbmNsdWRlIDxsaW51
eC9iYWNrbGlnaHQuaD4KKyNpbmNsdWRlIDxsaW51eC9kZWxheS5oPgorI2luY2x1ZGUgPGxpbnV4
L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L3NwaS9zcGkuaD4KKworI2luY2x1ZGUgPGRybS9k
cm1fY29ubmVjdG9yLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9tb2Rlcy5oPgorI2luY2x1ZGUgPGRy
bS9kcm1fcGFuZWwuaD4KKworI2RlZmluZSBKQlRfQ09NTUFORAkJCTB4MDAwCisjZGVmaW5lIEpC
VF9EQVRBCQkJMHgxMDAKKworI2RlZmluZSBKQlRfUkVHX1NMRUVQX0lOCQkweDEwCisjZGVmaW5l
IEpCVF9SRUdfU0xFRVBfT1VUCQkweDExCisKKyNkZWZpbmUgSkJUX1JFR19ESVNQTEFZX09GRgkJ
MHgyOAorI2RlZmluZSBKQlRfUkVHX0RJU1BMQVlfT04JCTB4MjkKKworI2RlZmluZSBKQlRfUkVH
X1JHQl9GT1JNQVQJCTB4M2EKKyNkZWZpbmUgSkJUX1JFR19RVUFEX1JBVEUJCTB4M2IKKworI2Rl
ZmluZSBKQlRfUkVHX1BPV0VSX09OX09GRgkJMHhiMAorI2RlZmluZSBKQlRfUkVHX0JPT1NURVJf
T1AJCTB4YjEKKyNkZWZpbmUgSkJUX1JFR19CT09TVEVSX01PREUJCTB4YjIKKyNkZWZpbmUgSkJU
X1JFR19CT09TVEVSX0ZSRVEJCTB4YjMKKyNkZWZpbmUgSkJUX1JFR19PUEFNUF9TWVNDTEsJCTB4
YjQKKyNkZWZpbmUgSkJUX1JFR19WU0NfVk9MVEFHRQkJMHhiNQorI2RlZmluZSBKQlRfUkVHX1ZD
T01fVk9MVEFHRQkJMHhiNgorI2RlZmluZSBKQlRfUkVHX0VYVF9ESVNQTAkJMHhiNworI2RlZmlu
ZSBKQlRfUkVHX09VVFBVVF9DT05UUk9MCQkweGI4CisjZGVmaW5lIEpCVF9SRUdfRENDTEtfRENF
VgkJMHhiOQorI2RlZmluZSBKQlRfUkVHX0RJU1BMQVlfTU9ERTEJCTB4YmEKKyNkZWZpbmUgSkJU
X1JFR19ESVNQTEFZX01PREUyCQkweGJiCisjZGVmaW5lIEpCVF9SRUdfRElTUExBWV9NT0RFCQkw
eGJjCisjZGVmaW5lIEpCVF9SRUdfQVNXX1NMRVcJCTB4YmQKKyNkZWZpbmUgSkJUX1JFR19EVU1N
WV9ESVNQTEFZCQkweGJlCisjZGVmaW5lIEpCVF9SRUdfRFJJVkVfU1lTVEVNCQkweGJmCisKKyNk
ZWZpbmUgSkJUX1JFR19TTEVFUF9PVVRfRlJfQQkJMHhjMAorI2RlZmluZSBKQlRfUkVHX1NMRUVQ
X09VVF9GUl9CCQkweGMxCisjZGVmaW5lIEpCVF9SRUdfU0xFRVBfT1VUX0ZSX0MJCTB4YzIKKyNk
ZWZpbmUgSkJUX1JFR19TTEVFUF9JTl9MQ0NOVF9ECTB4YzMKKyNkZWZpbmUgSkJUX1JFR19TTEVF
UF9JTl9MQ0NOVF9FCTB4YzQKKyNkZWZpbmUgSkJUX1JFR19TTEVFUF9JTl9MQ0NOVF9GCTB4YzUK
KyNkZWZpbmUgSkJUX1JFR19TTEVFUF9JTl9MQ0NOVF9HCTB4YzYKKworI2RlZmluZSBKQlRfUkVH
X0dBTU1BMV9GSU5FXzEJCTB4YzcKKyNkZWZpbmUgSkJUX1JFR19HQU1NQTFfRklORV8yCQkweGM4
CisjZGVmaW5lIEpCVF9SRUdfR0FNTUExX0lOQ0xJTkFUSU9OCTB4YzkKKyNkZWZpbmUgSkJUX1JF
R19HQU1NQTFfQkxVRV9PRkZTRVQJMHhjYQorCisjZGVmaW5lIEpCVF9SRUdfQkxBTktfQ09OVFJP
TAkJMHhjZgorI2RlZmluZSBKQlRfUkVHX0JMQU5LX1RIX1RWCQkweGQwCisjZGVmaW5lIEpCVF9S
RUdfQ0tWX09OX09GRgkJMHhkMQorI2RlZmluZSBKQlRfUkVHX0NLVl8xXzIJCQkweGQyCisjZGVm
aW5lIEpCVF9SRUdfT0VWX1RJTUlORwkJMHhkMworI2RlZmluZSBKQlRfUkVHX0FTV19USU1JTkdf
MQkJMHhkNAorI2RlZmluZSBKQlRfUkVHX0FTV19USU1JTkdfMgkJMHhkNQorCisjZGVmaW5lIEpC
VF9SRUdfSENMT0NLX1ZHQQkJMHhlYworI2RlZmluZSBKQlRfUkVHX0hDTE9DS19RVkdBCQkweGVk
CisKK3N0cnVjdCB0ZDAyOHR0ZWMxX3BhbmVsIHsKKwlzdHJ1Y3QgZHJtX3BhbmVsIHBhbmVsOwor
CisJc3RydWN0IHNwaV9kZXZpY2UgKnNwaTsKKwlzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmFj
a2xpZ2h0OworfTsKKworI2RlZmluZSB0b190ZDAyOHR0ZWMxX2RldmljZShwKSBjb250YWluZXJf
b2YocCwgc3RydWN0IHRkMDI4dHRlYzFfcGFuZWwsIHBhbmVsKQorCitzdGF0aWMgaW50IGpidF9y
ZXRfd3JpdGVfMChzdHJ1Y3QgdGQwMjh0dGVjMV9wYW5lbCAqbGNkLCB1OCByZWcsIGludCAqZXJy
KQoreworCXN0cnVjdCBzcGlfZGV2aWNlICpzcGkgPSBsY2QtPnNwaTsKKwl1MTYgdHhfYnVmID0g
SkJUX0NPTU1BTkQgfCByZWc7CisJaW50IHJldDsKKworCWlmIChlcnIgJiYgKmVycikKKwkJcmV0
dXJuICplcnI7CisKKwlyZXQgPSBzcGlfd3JpdGUoc3BpLCAodTggKikmdHhfYnVmLCBzaXplb2Yo
dHhfYnVmKSk7CisJaWYgKHJldCA8IDApIHsKKwkJZGV2X2Vycigmc3BpLT5kZXYsICIlczogU1BJ
IHdyaXRlIGZhaWxlZDogJWRcbiIsIF9fZnVuY19fLCByZXQpOworCQlpZiAoZXJyKQorCQkJKmVy
ciA9IHJldDsKKwl9CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IGpidF9yZWdfd3Jp
dGVfMShzdHJ1Y3QgdGQwMjh0dGVjMV9wYW5lbCAqbGNkLAorCQkJICAgdTggcmVnLCB1OCBkYXRh
LCBpbnQgKmVycikKK3sKKwlzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpID0gbGNkLT5zcGk7CisJdTE2
IHR4X2J1ZlsyXTsKKwlpbnQgcmV0OworCisJaWYgKGVyciAmJiAqZXJyKQorCQlyZXR1cm4gKmVy
cjsKKworCXR4X2J1ZlswXSA9IEpCVF9DT01NQU5EIHwgcmVnOworCXR4X2J1ZlsxXSA9IEpCVF9E
QVRBIHwgZGF0YTsKKworCXJldCA9IHNwaV93cml0ZShzcGksICh1OCAqKXR4X2J1Ziwgc2l6ZW9m
KHR4X2J1ZikpOworCWlmIChyZXQgPCAwKSB7CisJCWRldl9lcnIoJnNwaS0+ZGV2LCAiJXM6IFNQ
SSB3cml0ZSBmYWlsZWQ6ICVkXG4iLCBfX2Z1bmNfXywgcmV0KTsKKwkJaWYgKGVycikKKwkJCSpl
cnIgPSByZXQ7CisJfQorCisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCBqYnRfcmVnX3dy
aXRlXzIoc3RydWN0IHRkMDI4dHRlYzFfcGFuZWwgKmxjZCwKKwkJCSAgIHU4IHJlZywgdTE2IGRh
dGEsIGludCAqZXJyKQoreworCXN0cnVjdCBzcGlfZGV2aWNlICpzcGkgPSBsY2QtPnNwaTsKKwl1
MTYgdHhfYnVmWzNdOworCWludCByZXQ7CisKKwlpZiAoZXJyICYmICplcnIpCisJCXJldHVybiAq
ZXJyOworCisJdHhfYnVmWzBdID0gSkJUX0NPTU1BTkQgfCByZWc7CisJdHhfYnVmWzFdID0gSkJU
X0RBVEEgfCAoZGF0YSA+PiA4KTsKKwl0eF9idWZbMl0gPSBKQlRfREFUQSB8IChkYXRhICYgMHhm
Zik7CisKKwlyZXQgPSBzcGlfd3JpdGUoc3BpLCAodTggKil0eF9idWYsIHNpemVvZih0eF9idWYp
KTsKKwlpZiAocmV0IDwgMCkgeworCQlkZXZfZXJyKCZzcGktPmRldiwgIiVzOiBTUEkgd3JpdGUg
ZmFpbGVkOiAlZFxuIiwgX19mdW5jX18sIHJldCk7CisJCWlmIChlcnIpCisJCQkqZXJyID0gcmV0
OworCX0KKworCXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyBpbnQgdGQwMjh0dGVjMV9kaXNhYmxl
KHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCB0ZDAyOHR0ZWMxX3BhbmVsICps
Y2QgPSB0b190ZDAyOHR0ZWMxX2RldmljZShwYW5lbCk7CisKKwliYWNrbGlnaHRfZGlzYWJsZShs
Y2QtPmJhY2tsaWdodCk7CisKKwlqYnRfcmV0X3dyaXRlXzAobGNkLCBKQlRfUkVHX0RJU1BMQVlf
T0ZGLCBOVUxMKTsKKwlqYnRfcmVnX3dyaXRlXzIobGNkLCBKQlRfUkVHX09VVFBVVF9DT05UUk9M
LCAweDgwMDIsIE5VTEwpOworCWpidF9yZXRfd3JpdGVfMChsY2QsIEpCVF9SRUdfU0xFRVBfSU4s
IE5VTEwpOworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpCVF9SRUdfUE9XRVJfT05fT0ZGLCAweDAw
LCBOVUxMKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHRkMDI4dHRlYzFfZW5hYmxl
KHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCB0ZDAyOHR0ZWMxX3BhbmVsICps
Y2QgPSB0b190ZDAyOHR0ZWMxX2RldmljZShwYW5lbCk7CisJdW5zaWduZWQgaW50IGk7CisJaW50
IHJldCA9IDA7CisKKwkvKiBUaHJlZSB0aW1lcyBjb21tYW5kIHplcm8gKi8KKwlmb3IgKGkgPSAw
OyBpIDwgMzsgKytpKSB7CisJCWpidF9yZXRfd3JpdGVfMChsY2QsIDB4MDAsICZyZXQpOworCQl1
c2xlZXBfcmFuZ2UoMTAwMCwgMjAwMCk7CisJfQorCisJLyogZGVlcCBzdGFuZGJ5IG91dCAqLwor
CWpidF9yZWdfd3JpdGVfMShsY2QsIEpCVF9SRUdfUE9XRVJfT05fT0ZGLCAweDE3LCAmcmV0KTsK
KworCS8qIFJHQiBJL0Ygb24sIFJBTSB3cml0ZSBvZmYsIFFWR0EgdGhyb3VnaCwgU0lHQ09OIGVu
YWJsZSAqLworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpCVF9SRUdfRElTUExBWV9NT0RFLCAweDgw
LCAmcmV0KTsKKworCS8qIFF1YWQgbW9kZSBvZmYgKi8KKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBK
QlRfUkVHX1FVQURfUkFURSwgMHgwMCwgJnJldCk7CisKKwkvKiBBVkREIG9uLCBYVkREIG9uICov
CisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJUX1JFR19QT1dFUl9PTl9PRkYsIDB4MTYsICZyZXQp
OworCisJLyogT3V0cHV0IGNvbnRyb2wgKi8KKwlqYnRfcmVnX3dyaXRlXzIobGNkLCBKQlRfUkVH
X09VVFBVVF9DT05UUk9MLCAweGZmZjksICZyZXQpOworCisJLyogU2xlZXAgbW9kZSBvZmYgKi8K
KwlqYnRfcmV0X3dyaXRlXzAobGNkLCBKQlRfUkVHX1NMRUVQX09VVCwgJnJldCk7CisKKwkvKiBh
dCB0aGlzIHBvaW50IHdlIGhhdmUgbGlrZSA1MCUgZ3JleSAqLworCisJLyogaW5pdGlhbGl6ZSBy
ZWdpc3RlciBzZXQgKi8KKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX0RJU1BMQVlfTU9E
RTEsIDB4MDEsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpCVF9SRUdfRElTUExBWV9N
T0RFMiwgMHgwMCwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJUX1JFR19SR0JfRk9S
TUFULCAweDYwLCAmcmV0KTsKKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX0RSSVZFX1NZ
U1RFTSwgMHgxMCwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJUX1JFR19CT09TVEVS
X09QLCAweDU2LCAmcmV0KTsKKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX0JPT1NURVJf
TU9ERSwgMHgzMywgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJUX1JFR19CT09TVEVS
X0ZSRVEsIDB4MTEsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpCVF9SRUdfQk9PU1RF
Ul9GUkVRLCAweDExLCAmcmV0KTsKKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX09QQU1Q
X1NZU0NMSywgMHgwMiwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJUX1JFR19WU0Nf
Vk9MVEFHRSwgMHgyYiwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJUX1JFR19WQ09N
X1ZPTFRBR0UsIDB4NDAsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpCVF9SRUdfRVhU
X0RJU1BMLCAweDAzLCAmcmV0KTsKKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX0RDQ0xL
X0RDRVYsIDB4MDQsICZyZXQpOworCS8qCisJICogZGVmYXVsdCBvZiAweDAyIGluIEpCVF9SRUdf
QVNXX1NMRVcgcmVzcG9uc2libGUgZm9yIDcySHogcmVxdWlyZW1lbnQKKwkgKiB0byBhdm9pZCBy
ZWQgLyBibHVlIGZsaWNrZXIKKwkgKi8KKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX0FT
V19TTEVXLCAweDA0LCAmcmV0KTsKKwlqYnRfcmVnX3dyaXRlXzEobGNkLCBKQlRfUkVHX0RVTU1Z
X0RJU1BMQVksIDB4MDAsICZyZXQpOworCisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJUX1JFR19T
TEVFUF9PVVRfRlJfQSwgMHgxMSwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJUX1JF
R19TTEVFUF9PVVRfRlJfQiwgMHgxMSwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJU
X1JFR19TTEVFUF9PVVRfRlJfQywgMHgxMSwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8yKGxjZCwg
SkJUX1JFR19TTEVFUF9JTl9MQ0NOVF9ELCAweDIwNDAsICZyZXQpOworCWpidF9yZWdfd3JpdGVf
MihsY2QsIEpCVF9SRUdfU0xFRVBfSU5fTENDTlRfRSwgMHg2MGMwLCAmcmV0KTsKKwlqYnRfcmVn
X3dyaXRlXzIobGNkLCBKQlRfUkVHX1NMRUVQX0lOX0xDQ05UX0YsIDB4MTAyMCwgJnJldCk7CisJ
amJ0X3JlZ193cml0ZV8yKGxjZCwgSkJUX1JFR19TTEVFUF9JTl9MQ0NOVF9HLCAweDYwYzAsICZy
ZXQpOworCisJamJ0X3JlZ193cml0ZV8yKGxjZCwgSkJUX1JFR19HQU1NQTFfRklORV8xLCAweDU1
MzMsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpCVF9SRUdfR0FNTUExX0ZJTkVfMiwg
MHgwMCwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8xKGxjZCwgSkJUX1JFR19HQU1NQTFfSU5DTElO
QVRJT04sIDB4MDAsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpCVF9SRUdfR0FNTUEx
X0JMVUVfT0ZGU0VULCAweDAwLCAmcmV0KTsKKworCWpidF9yZWdfd3JpdGVfMihsY2QsIEpCVF9S
RUdfSENMT0NLX1ZHQSwgMHgxZjAsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShsY2QsIEpCVF9S
RUdfQkxBTktfQ09OVFJPTCwgMHgwMiwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8yKGxjZCwgSkJU
X1JFR19CTEFOS19USF9UViwgMHgwODA0LCAmcmV0KTsKKworCWpidF9yZWdfd3JpdGVfMShsY2Qs
IEpCVF9SRUdfQ0tWX09OX09GRiwgMHgwMSwgJnJldCk7CisJamJ0X3JlZ193cml0ZV8yKGxjZCwg
SkJUX1JFR19DS1ZfMV8yLCAweDAwMDAsICZyZXQpOworCisJamJ0X3JlZ193cml0ZV8yKGxjZCwg
SkJUX1JFR19PRVZfVElNSU5HLCAweDBkMGUsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMihsY2Qs
IEpCVF9SRUdfQVNXX1RJTUlOR18xLCAweDExYTQsICZyZXQpOworCWpidF9yZWdfd3JpdGVfMShs
Y2QsIEpCVF9SRUdfQVNXX1RJTUlOR18yLCAweDBlLCAmcmV0KTsKKworCWpidF9yZXRfd3JpdGVf
MChsY2QsIEpCVF9SRUdfRElTUExBWV9PTiwgJnJldCk7CisKKwlpZiAocmV0KQorCQlyZXR1cm4g
cmV0OworCisJYmFja2xpZ2h0X2VuYWJsZShsY2QtPmJhY2tsaWdodCk7CisKKwlyZXR1cm4gMDsK
K30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlIHRkMDI4dHRlYzFfbW9k
ZSA9IHsKKwkuY2xvY2sgPSAyMjE1MywKKwkuaGRpc3BsYXkgPSA0ODAsCisJLmhzeW5jX3N0YXJ0
ID0gNDgwICsgMjQsCisJLmhzeW5jX2VuZCA9IDQ4MCArIDI0ICsgOCwKKwkuaHRvdGFsID0gNDgw
ICsgMjQgKyA4ICsgOCwKKwkudmRpc3BsYXkgPSA2NDAsCisJLnZzeW5jX3N0YXJ0ID0gNjQwICsg
NCwKKwkudnN5bmNfZW5kID0gNjQwICsgNCArIDIsCisJLnZ0b3RhbCA9IDY0MCArIDQgKyAyICsg
MiwKKwkudnJlZnJlc2ggPSA2NiwKKwkudHlwZSA9IERSTV9NT0RFX1RZUEVfRFJJVkVSIHwgRFJN
X01PREVfVFlQRV9QUkVGRVJSRUQsCisJLmZsYWdzID0gRFJNX01PREVfRkxBR19OSFNZTkMgfCBE
Uk1fTU9ERV9GTEFHX05WU1lOQywKKwkud2lkdGhfbW0gPSA0MywKKwkuaGVpZ2h0X21tID0gNTgs
Cit9OworCitzdGF0aWMgaW50IHRkMDI4dHRlYzFfZ2V0X21vZGVzKHN0cnVjdCBkcm1fcGFuZWwg
KnBhbmVsKQoreworCXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IgPSBwYW5lbC0+Y29u
bmVjdG9yOworCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlOworCisJbW9kZSA9IGRybV9t
b2RlX2R1cGxpY2F0ZShwYW5lbC0+ZHJtLCAmdGQwMjh0dGVjMV9tb2RlKTsKKwlpZiAoIW1vZGUp
CisJCXJldHVybiAtRU5PTUVNOworCisJZHJtX21vZGVfc2V0X25hbWUobW9kZSk7CisJZHJtX21v
ZGVfcHJvYmVkX2FkZChjb25uZWN0b3IsIG1vZGUpOworCisJY29ubmVjdG9yLT5kaXNwbGF5X2lu
Zm8ud2lkdGhfbW0gPSB0ZDAyOHR0ZWMxX21vZGUud2lkdGhfbW07CisJY29ubmVjdG9yLT5kaXNw
bGF5X2luZm8uaGVpZ2h0X21tID0gdGQwMjh0dGVjMV9tb2RlLmhlaWdodF9tbTsKKwkvKgorCSAq
IEZJWE1FOiBBY2NvcmRpbmcgdG8gdGhlIGRhdGFzaGVldCBzeW5jIHNpZ25hbHMgYXJlIHNhbXBs
ZWQgb24gdGhlCisJICogcmlzaW5nIGVkZ2Ugb2YgdGhlIGNsb2NrLCBidXQgdGhlIGNvZGUgcnVu
bmluZyBvbiB0aGUgT3Blbk1va28gTmVvCisJICogRnJlZVJ1bm5lciBhbmQgTmVvIDE5NzMgaW5k
aWNhdGVzIHNhbXBsaW5nIG9uIHRoZSBmYWxsaW5nIGVkZ2UuIFRoaXMKKwkgKiBzaG91bGQgYmUg
dGVzdGVkIG9uIGEgcmVhbCBkZXZpY2UuCisJICovCisJY29ubmVjdG9yLT5kaXNwbGF5X2luZm8u
YnVzX2ZsYWdzID0gRFJNX0JVU19GTEFHX0RFX0hJR0gKKwkJCQkJICB8IERSTV9CVVNfRkxBR19T
WU5DX1NBTVBMRV9ORUdFREdFCisJCQkJCSAgfCBEUk1fQlVTX0ZMQUdfUElYREFUQV9TQU1QTEVf
UE9TRURHRTsKKworCXJldHVybiAxOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9wYW5l
bF9mdW5jcyB0ZDAyOHR0ZWMxX2Z1bmNzID0geworCS5kaXNhYmxlID0gdGQwMjh0dGVjMV9kaXNh
YmxlLAorCS5lbmFibGUgPSB0ZDAyOHR0ZWMxX2VuYWJsZSwKKwkuZ2V0X21vZGVzID0gdGQwMjh0
dGVjMV9nZXRfbW9kZXMsCit9OworCitzdGF0aWMgaW50IHRkMDI4dHRlYzFfcHJvYmUoc3RydWN0
IHNwaV9kZXZpY2UgKnNwaSkKK3sKKwlzdHJ1Y3QgdGQwMjh0dGVjMV9wYW5lbCAqbGNkOworCWlu
dCByZXQ7CisKKwlsY2QgPSBkZXZtX2t6YWxsb2MoJnNwaS0+ZGV2LCBzaXplb2YoKmxjZCksIEdG
UF9LRVJORUwpOworCWlmIChsY2QgPT0gTlVMTCkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlzcGlf
c2V0X2RydmRhdGEoc3BpLCBsY2QpOworCWxjZC0+c3BpID0gc3BpOworCisJbGNkLT5iYWNrbGln
aHQgPSBkZXZtX29mX2ZpbmRfYmFja2xpZ2h0KCZzcGktPmRldik7CisJaWYgKElTX0VSUihsY2Qt
PmJhY2tsaWdodCkpCisJCXJldHVybiBQVFJfRVJSKGxjZC0+YmFja2xpZ2h0KTsKKworCXNwaS0+
bW9kZSA9IFNQSV9NT0RFXzM7CisJc3BpLT5iaXRzX3Blcl93b3JkID0gOTsKKworCXJldCA9IHNw
aV9zZXR1cChzcGkpOworCWlmIChyZXQgPCAwKSB7CisJCWRldl9lcnIoJnNwaS0+ZGV2LCAiZmFp
bGVkIHRvIHNldHVwIFNQSTogJWRcbiIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJZHJt
X3BhbmVsX2luaXQoJmxjZC0+cGFuZWwpOworCWxjZC0+cGFuZWwuZGV2ID0gJmxjZC0+c3BpLT5k
ZXY7CisJbGNkLT5wYW5lbC5mdW5jcyA9ICZ0ZDAyOHR0ZWMxX2Z1bmNzOworCisJcmV0dXJuIGRy
bV9wYW5lbF9hZGQoJmxjZC0+cGFuZWwpOworfQorCitzdGF0aWMgaW50IHRkMDI4dHRlYzFfcmVt
b3ZlKHN0cnVjdCBzcGlfZGV2aWNlICpzcGkpCit7CisJc3RydWN0IHRkMDI4dHRlYzFfcGFuZWwg
KmxjZCA9IHNwaV9nZXRfZHJ2ZGF0YShzcGkpOworCisJZHJtX3BhbmVsX3JlbW92ZSgmbGNkLT5w
YW5lbCk7CisJZHJtX3BhbmVsX2Rpc2FibGUoJmxjZC0+cGFuZWwpOworCisJcmV0dXJuIDA7Cit9
CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIHRkMDI4dHRlYzFfb2ZfbWF0Y2hb
XSA9IHsKKwl7IC5jb21wYXRpYmxlID0gInRwbyx0ZDAyOHR0ZWMxIiwgfSwKKwkvKiBEVCBiYWNr
d2FyZCBjb21wYXRpYmlsaXR5LiAqLworCXsgLmNvbXBhdGlibGUgPSAidG9wcG9seSx0ZDAyOHR0
ZWMxIiwgfSwKKwl7IC8qIHNlbnRpbmVsICovIH0sCit9OworCitNT0RVTEVfREVWSUNFX1RBQkxF
KG9mLCB0ZDAyOHR0ZWMxX29mX21hdGNoKTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBzcGlfZGV2
aWNlX2lkIHRkMDI4dHRlYzFfaWRzW10gPSB7CisJeyAidHBvLHRkMDI4dHRlYzEiLCAwfSwKKwl7
ICJ0b3Bwb2x5LHRkMDI4dHRlYzEiLCAwIH0sCisJeyAvKiBzZW50aW5lbCAqLyB9Cit9OworCitN
T0RVTEVfREVWSUNFX1RBQkxFKHNwaSwgdGQwMjh0dGVjMV9pZHMpOworCitzdGF0aWMgc3RydWN0
IHNwaV9kcml2ZXIgdGQwMjh0dGVjMV9kcml2ZXIgPSB7CisJLnByb2JlCQk9IHRkMDI4dHRlYzFf
cHJvYmUsCisJLnJlbW92ZQkJPSB0ZDAyOHR0ZWMxX3JlbW92ZSwKKwkuaWRfdGFibGUJPSB0ZDAy
OHR0ZWMxX2lkcywKKwkuZHJpdmVyCQk9IHsKKwkJLm5hbWUgICA9ICJwYW5lbC10cG8tdGQwMjh0
dGVjMSIsCisJCS5vZl9tYXRjaF90YWJsZSA9IHRkMDI4dHRlYzFfb2ZfbWF0Y2gsCisJfSwKK307
CisKK21vZHVsZV9zcGlfZHJpdmVyKHRkMDI4dHRlYzFfZHJpdmVyKTsKKworTU9EVUxFX0FVVEhP
UigiSC4gTmlrb2xhdXMgU2NoYWxsZXIgPGhuc0Bnb2xkZWxpY28uY29tPiIpOworTU9EVUxFX0RF
U0NSSVBUSU9OKCJUb3Bwb2x5IFREMDI4VFRFQzEgcGFuZWwgZHJpdmVyIik7CitNT0RVTEVfTElD
RU5TRSgiR1BMIik7Ci0tIApSZWdhcmRzLAoKTGF1cmVudCBQaW5jaGFydAoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
