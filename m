Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 659741B344
	for <lists+dri-devel@lfdr.de>; Mon, 13 May 2019 11:53:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9A4D589B61;
	Mon, 13 May 2019 09:53:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from NAM04-BN3-obe.outbound.protection.outlook.com
 (mail-eopbgr680050.outbound.protection.outlook.com [40.107.68.50])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 36B4089B4D;
 Mon, 13 May 2019 09:53:27 +0000 (UTC)
Received: from MWHPR12CA0034.namprd12.prod.outlook.com (2603:10b6:301:2::20)
 by MWHPR12MB1277.namprd12.prod.outlook.com (2603:10b6:300:f::16) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.1878.22; Mon, 13 May
 2019 09:53:24 +0000
Received: from CO1NAM03FT049.eop-NAM03.prod.protection.outlook.com
 (2a01:111:f400:7e48::201) by MWHPR12CA0034.outlook.office365.com
 (2603:10b6:301:2::20) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id 15.20.1878.21 via Frontend
 Transport; Mon, 13 May 2019 09:53:24 +0000
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
Received: from SATLEXCHOV02.amd.com (165.204.84.17) by
 CO1NAM03FT049.mail.protection.outlook.com (10.152.81.161) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.1856.11 via Frontend Transport; Mon, 13 May 2019 09:53:24 +0000
Received: from zhoucm1.amd.com (10.34.1.3) by SATLEXCHOV02.amd.com
 (10.181.40.72) with Microsoft SMTP Server id 14.3.389.1; Mon, 13 May 2019
 04:53:22 -0500
From: Chunming Zhou <david1.zhou@amd.com>
To: <dri-devel@lists.freedesktop.org>, <amd-gfx@lists.freedesktop.org>
Subject: [PATCH libdrm 5/7] expose timeline signal/export/import interfaces v2
Date: Mon, 13 May 2019 17:53:03 +0800
Message-ID: <20190513095305.14110-5-david1.zhou@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190513095305.14110-1-david1.zhou@amd.com>
References: <20190513095305.14110-1-david1.zhou@amd.com>
MIME-Version: 1.0
X-EOPAttributedMessage: 0
X-MS-Office365-Filtering-HT: Tenant
X-Forefront-Antispam-Report: CIP:165.204.84.17; IPV:NLI; CTRY:US; EFV:NLI;
 SFV:NSPM;
 SFS:(10009020)(136003)(39860400002)(376002)(396003)(346002)(2980300002)(428003)(189003)(199004)(305945005)(23676004)(7696005)(50466002)(2906002)(70586007)(316002)(1076003)(70206006)(446003)(11346002)(2870700001)(36756003)(54906003)(426003)(110136005)(47776003)(76176011)(68736007)(356004)(6666004)(336012)(53416004)(476003)(77096007)(26005)(5820100001)(86362001)(50226002)(478600001)(72206003)(126002)(5660300002)(186003)(4326008)(53936002)(8936002)(8676002)(2616005)(81156014)(81166006)(486006);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MWHPR12MB1277; H:SATLEXCHOV02.amd.com; FPR:;
 SPF:None; LANG:en; PTR:InfoDomainNonexistent; MX:1; A:1; 
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 40de9e51-72b1-4a1e-b851-08d6d788d715
X-Microsoft-Antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600141)(711020)(4605104)(2017052603328);
 SRVR:MWHPR12MB1277; 
X-MS-TrafficTypeDiagnostic: MWHPR12MB1277:
X-Microsoft-Antispam-PRVS: <MWHPR12MB1277C5F02CFD657329EE09A3B40F0@MWHPR12MB1277.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:4502;
X-Forefront-PRVS: 0036736630
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam-Message-Info: sv9el7iNHPxPOYXsMALwyOT26zbQJq4/th7mOXsCKEMaAAoSMDtmaNA6Ft5zlcpizWnep4eZxJSquBKiFMc7/2XsR0bkvpB6OJ2y5BWlMbJyAhoMAE/QzFLI/TGQDkqbzJH/Z45+Vzc0csQUVvsk26lm3TnJG1XQDG7NEGfS+tTWDmCtflzgAY709cxL6N7TWOWUQjfFBqZneblpKxUz6dMf6wh1sUNVJNjwjIRRN4j+N2uScrr6gm5xNQk9Ld9aDfGLwT3A+FOXxcwdHEmciRf3yKC5wUSONDMPGoZU6sF7anxn5ofURuyhyUiUCTH6JRjVhpZEjtJ0jcjW4QX2wQMPfbyngu+/0MIoO7FvQjZkyX6x79x2MwmuSmB/SZQlK11RIoznXhKMJsscjQRO5tJWhpAI2xW3KtMsIXP1/GQ=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 13 May 2019 09:53:24.1334 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: 40de9e51-72b1-4a1e-b851-08d6d788d715
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=3dd8961f-e488-4e60-8e11-a82d994e183d; Ip=[165.204.84.17];
 Helo=[SATLEXCHOV02.amd.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MWHPR12MB1277
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector1-amd-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=27ENHeIO8azIaIDe6ZeR4SWC1PTjRiQi//P2iKEIJf8=;
 b=JbXEf4fdJHSIT1FkrHhrow5CePmvN+Sbl/jfALbmwrik/+vAard37oYWdtCYRjFSNSTa4GWeNVyDB51o7WpCppxKjqXB5z0mDJwIy6pakXeMcPQ8nYXcC6Vk6VTAzVtwqS8ezQei1Ng9fxtmb0u6+6LC+jcIuZvNfiyqsCsKfy4=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is
 165.204.84.17)
 smtp.mailfrom=amd.com; intel.com; dkim=none (message not signed)
 header.d=none;intel.com; dmarc=permerror action=none header.from=amd.com;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Christian.Koenig@amd.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

djI6IGFkYXB0IHRvIG5ldyBvbmUgdHJhbnNmZXIgaW9jdGwKClNpZ25lZC1vZmYtYnk6IENodW5t
aW5nIFpob3UgPGRhdmlkMS56aG91QGFtZC5jb20+CkFja2VkLWJ5OiBDaHJpc3RpYW4gS8O2bmln
IDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Ci0tLQogYW1kZ3B1L2FtZGdwdS1zeW1ib2wtY2hl
Y2sgfCAgMyArKwogYW1kZ3B1L2FtZGdwdS5oICAgICAgICAgICAgfCA1MSArKysrKysrKysrKysr
KysrKysrKysrKysrKysrCiBhbWRncHUvYW1kZ3B1X2NzLmMgICAgICAgICB8IDY4ICsrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAzIGZpbGVzIGNoYW5nZWQsIDEyMiBpbnNl
cnRpb25zKCspCgpkaWZmIC0tZ2l0IGEvYW1kZ3B1L2FtZGdwdS1zeW1ib2wtY2hlY2sgYi9hbWRn
cHUvYW1kZ3B1LXN5bWJvbC1jaGVjawppbmRleCBkM2M1YmI4OS4uMjc0YjRjNmQgMTAwNzU1Ci0t
LSBhL2FtZGdwdS9hbWRncHUtc3ltYm9sLWNoZWNrCisrKyBiL2FtZGdwdS9hbWRncHUtc3ltYm9s
LWNoZWNrCkBAIC01MiwxMCArNTIsMTMgQEAgYW1kZ3B1X2NzX3N1Ym1pdAogYW1kZ3B1X2NzX3N1
Ym1pdF9yYXcKIGFtZGdwdV9jc19zdWJtaXRfcmF3MgogYW1kZ3B1X2NzX3N5bmNvYmpfZXhwb3J0
X3N5bmNfZmlsZQorYW1kZ3B1X2NzX3N5bmNvYmpfZXhwb3J0X3N5bmNfZmlsZTIKIGFtZGdwdV9j
c19zeW5jb2JqX2ltcG9ydF9zeW5jX2ZpbGUKK2FtZGdwdV9jc19zeW5jb2JqX2ltcG9ydF9zeW5j
X2ZpbGUyCiBhbWRncHVfY3Nfc3luY29ial9xdWVyeQogYW1kZ3B1X2NzX3N5bmNvYmpfcmVzZXQK
IGFtZGdwdV9jc19zeW5jb2JqX3NpZ25hbAorYW1kZ3B1X2NzX3N5bmNvYmpfdGltZWxpbmVfc2ln
bmFsCiBhbWRncHVfY3Nfc3luY29ial90aW1lbGluZV93YWl0CiBhbWRncHVfY3Nfc3luY29ial93
YWl0CiBhbWRncHVfY3Nfd2FpdF9mZW5jZXMKZGlmZiAtLWdpdCBhL2FtZGdwdS9hbWRncHUuaCBi
L2FtZGdwdS9hbWRncHUuaAppbmRleCA1ZWJmZTFlMy4uZDI0ODBkYmUgMTAwNjQ0Ci0tLSBhL2Ft
ZGdwdS9hbWRncHUuaAorKysgYi9hbWRncHUvYW1kZ3B1LmgKQEAgLTE1MTYsNiArMTUxNiwyMyBA
QCBpbnQgYW1kZ3B1X2NzX3N5bmNvYmpfcmVzZXQoYW1kZ3B1X2RldmljZV9oYW5kbGUgZGV2LAog
aW50IGFtZGdwdV9jc19zeW5jb2JqX3NpZ25hbChhbWRncHVfZGV2aWNlX2hhbmRsZSBkZXYsCiAJ
CQkgICAgIGNvbnN0IHVpbnQzMl90ICpzeW5jb2JqcywgdWludDMyX3Qgc3luY29ial9jb3VudCk7
CiAKKy8qKgorICogU2lnbmFsIGtlcm5lbCB0aW1lbGluZSBzeW5jIG9iamVjdHMuCisgKgorICog
XHBhcmFtIGRldiAgICAgICAgICAgLSBcYyBbaW5dIGRldmljZSBoYW5kbGUKKyAqIFxwYXJhbSBz
eW5jb2JqcyAgICAgIC0gXGMgW2luXSBhcnJheSBvZiBzeW5jIG9iamVjdCBoYW5kbGVzCisgKiBc
cGFyYW0gcG9pbnRzCS0gXGMgW2luXSBhcnJheSBvZiB0aW1lbGluZSBwb2ludHMKKyAqIFxwYXJh
bSBzeW5jb2JqX2NvdW50IC0gXGMgW2luXSBudW1iZXIgb2YgaGFuZGxlcyBpbiBzeW5jb2Jqcwor
ICoKKyAqIFxyZXR1cm4gICAwIG9uIHN1Y2Nlc3NcbgorICogICAgICAgICAgPDAgLSBOZWdhdGl2
ZSBQT1NJWCBFcnJvciBjb2RlCisgKgorKi8KK2ludCBhbWRncHVfY3Nfc3luY29ial90aW1lbGlu
ZV9zaWduYWwoYW1kZ3B1X2RldmljZV9oYW5kbGUgZGV2LAorCQkJCSAgICAgIGNvbnN0IHVpbnQz
Ml90ICpzeW5jb2JqcywKKwkJCQkgICAgICB1aW50NjRfdCAqcG9pbnRzLAorCQkJCSAgICAgIHVp
bnQzMl90IHN5bmNvYmpfY291bnQpOworCiAvKioKICAqICBXYWl0IGZvciBvbmUgb3IgYWxsIHN5
bmMgb2JqZWN0cyB0byBzaWduYWwuCiAgKgpAQCAtMTYzMyw3ICsxNjUwLDQxIEBAIGludCBhbWRn
cHVfY3Nfc3luY29ial9leHBvcnRfc3luY19maWxlKGFtZGdwdV9kZXZpY2VfaGFuZGxlIGRldiwK
IGludCBhbWRncHVfY3Nfc3luY29ial9pbXBvcnRfc3luY19maWxlKGFtZGdwdV9kZXZpY2VfaGFu
ZGxlIGRldiwKIAkJCQkgICAgICAgdWludDMyX3Qgc3luY29iaiwKIAkJCQkgICAgICAgaW50IHN5
bmNfZmlsZV9mZCk7CisvKioKKyAqICBFeHBvcnQga2VybmVsIHRpbWVsaW5lIHN5bmMgb2JqZWN0
IHRvIGEgc3luY19maWxlLgorICoKKyAqIFxwYXJhbSAgIGRldgkJLSBcYyBbaW5dIGRldmljZSBo
YW5kbGUKKyAqIFxwYXJhbSAgIHN5bmNvYmoJLSBcYyBbaW5dIHN5bmMgb2JqZWN0IGhhbmRsZQor
ICogXHBhcmFtICAgcG9pbnQJLSBcYyBbaW5dIHRpbWVsaW5lIHBvaW50CisgKiBccGFyYW0gICBm
bGFncwktIFxjIFtpbl0gZmxhZ3MKKyAqIFxwYXJhbSAgIHN5bmNfZmlsZV9mZCAtIFxjIFtvdXRd
IHN5bmNfZmlsZSBmaWxlIGRlc2NyaXB0b3IuCisgKgorICogXHJldHVybiAgIDAgb24gc3VjY2Vz
c1xuCisgKiAgICAgICAgICA8MCAtIE5lZ2F0aXZlIFBPU0lYIEVycm9yIGNvZGUKKyAqCisgKi8K
K2ludCBhbWRncHVfY3Nfc3luY29ial9leHBvcnRfc3luY19maWxlMihhbWRncHVfZGV2aWNlX2hh
bmRsZSBkZXYsCisJCQkJCXVpbnQzMl90IHN5bmNvYmosCisJCQkJCXVpbnQ2NF90IHBvaW50LAor
CQkJCQl1aW50MzJfdCBmbGFncywKKwkJCQkJaW50ICpzeW5jX2ZpbGVfZmQpOwogCisvKioKKyAq
ICBJbXBvcnQga2VybmVsIHRpbWVsaW5lIHN5bmMgb2JqZWN0IGZyb20gYSBzeW5jX2ZpbGUuCisg
KgorICogXHBhcmFtICAgZGV2CQktIFxjIFtpbl0gZGV2aWNlIGhhbmRsZQorICogXHBhcmFtICAg
c3luY29iagktIFxjIFtpbl0gc3luYyBvYmplY3QgaGFuZGxlCisgKiBccGFyYW0gICBwb2ludAkt
IFxjIFtpbl0gdGltZWxpbmUgcG9pbnQKKyAqIFxwYXJhbSAgIHN5bmNfZmlsZV9mZCAtIFxjIFtp
bl0gc3luY19maWxlIGZpbGUgZGVzY3JpcHRvci4KKyAqCisgKiBccmV0dXJuICAgMCBvbiBzdWNj
ZXNzXG4KKyAqICAgICAgICAgIDwwIC0gTmVnYXRpdmUgUE9TSVggRXJyb3IgY29kZQorICoKKyAq
LworaW50IGFtZGdwdV9jc19zeW5jb2JqX2ltcG9ydF9zeW5jX2ZpbGUyKGFtZGdwdV9kZXZpY2Vf
aGFuZGxlIGRldiwKKwkJCQkJdWludDMyX3Qgc3luY29iaiwKKwkJCQkJdWludDY0X3QgcG9pbnQs
CisJCQkJCWludCBzeW5jX2ZpbGVfZmQpOwogLyoqCiAgKiBFeHBvcnQgYW4gYW1kZ3B1IGZlbmNl
IGFzIGEgaGFuZGxlIChzeW5jb2JqIG9yIGZkKS4KICAqCmRpZmYgLS1naXQgYS9hbWRncHUvYW1k
Z3B1X2NzLmMgYi9hbWRncHUvYW1kZ3B1X2NzLmMKaW5kZXggOWZjYWYyYzQuLmRhY2E0NDIxIDEw
MDY0NAotLS0gYS9hbWRncHUvYW1kZ3B1X2NzLmMKKysrIGIvYW1kZ3B1L2FtZGdwdV9jcy5jCkBA
IC02NzQsNiArNjc0LDE4IEBAIGRybV9wdWJsaWMgaW50IGFtZGdwdV9jc19zeW5jb2JqX3NpZ25h
bChhbWRncHVfZGV2aWNlX2hhbmRsZSBkZXYsCiAJcmV0dXJuIGRybVN5bmNvYmpTaWduYWwoZGV2
LT5mZCwgc3luY29ianMsIHN5bmNvYmpfY291bnQpOwogfQogCitkcm1fcHVibGljIGludCBhbWRn
cHVfY3Nfc3luY29ial90aW1lbGluZV9zaWduYWwoYW1kZ3B1X2RldmljZV9oYW5kbGUgZGV2LAor
CQkJCQkJIGNvbnN0IHVpbnQzMl90ICpzeW5jb2JqcywKKwkJCQkJCSB1aW50NjRfdCAqcG9pbnRz
LAorCQkJCQkJIHVpbnQzMl90IHN5bmNvYmpfY291bnQpCit7CisJaWYgKE5VTEwgPT0gZGV2KQor
CQlyZXR1cm4gLUVJTlZBTDsKKworCXJldHVybiBkcm1TeW5jb2JqVGltZWxpbmVTaWduYWwoZGV2
LT5mZCwgc3luY29ianMsCisJCQkJCXBvaW50cywgc3luY29ial9jb3VudCk7Cit9CisKIGRybV9w
dWJsaWMgaW50IGFtZGdwdV9jc19zeW5jb2JqX3dhaXQoYW1kZ3B1X2RldmljZV9oYW5kbGUgZGV2
LAogCQkJCSAgICAgIHVpbnQzMl90ICpoYW5kbGVzLCB1bnNpZ25lZCBudW1faGFuZGxlcywKIAkJ
CQkgICAgICBpbnQ2NF90IHRpbWVvdXRfbnNlYywgdW5zaWduZWQgZmxhZ3MsCkBAIC03NDksNiAr
NzYxLDYyIEBAIGRybV9wdWJsaWMgaW50IGFtZGdwdV9jc19zeW5jb2JqX2ltcG9ydF9zeW5jX2Zp
bGUoYW1kZ3B1X2RldmljZV9oYW5kbGUgZGV2LAogCXJldHVybiBkcm1TeW5jb2JqSW1wb3J0U3lu
Y0ZpbGUoZGV2LT5mZCwgc3luY29iaiwgc3luY19maWxlX2ZkKTsKIH0KIAorZHJtX3B1YmxpYyBp
bnQgYW1kZ3B1X2NzX3N5bmNvYmpfZXhwb3J0X3N5bmNfZmlsZTIoYW1kZ3B1X2RldmljZV9oYW5k
bGUgZGV2LAorCQkJCQkJICAgdWludDMyX3Qgc3luY29iaiwKKwkJCQkJCSAgIHVpbnQ2NF90IHBv
aW50LAorCQkJCQkJICAgdWludDMyX3QgZmxhZ3MsCisJCQkJCQkgICBpbnQgKnN5bmNfZmlsZV9m
ZCkKK3sKKwl1aW50MzJfdCBiaW5hcnlfaGFuZGxlOworCWludCByZXQ7CisKKwlpZiAoTlVMTCA9
PSBkZXYpCisJCXJldHVybiAtRUlOVkFMOworCisJaWYgKCFwb2ludCkKKwkJcmV0dXJuIGRybVN5
bmNvYmpFeHBvcnRTeW5jRmlsZShkZXYtPmZkLCBzeW5jb2JqLCBzeW5jX2ZpbGVfZmQpOworCisJ
cmV0ID0gZHJtU3luY29iakNyZWF0ZShkZXYtPmZkLCAwLCAmYmluYXJ5X2hhbmRsZSk7CisJaWYg
KHJldCkKKwkJcmV0dXJuIHJldDsKKworCXJldCA9IGRybVN5bmNvYmpUcmFuc2ZlcihkZXYtPmZk
LCBiaW5hcnlfaGFuZGxlLCAwLAorCQkJCSBzeW5jb2JqLCBwb2ludCwgZmxhZ3MpOworCWlmIChy
ZXQpCisJCWdvdG8gb3V0OworCXJldCA9IGRybVN5bmNvYmpFeHBvcnRTeW5jRmlsZShkZXYtPmZk
LCBiaW5hcnlfaGFuZGxlLCBzeW5jX2ZpbGVfZmQpOworb3V0OgorCWRybVN5bmNvYmpEZXN0cm95
KGRldi0+ZmQsIGJpbmFyeV9oYW5kbGUpOworCXJldHVybiByZXQ7Cit9CisKK2RybV9wdWJsaWMg
aW50IGFtZGdwdV9jc19zeW5jb2JqX2ltcG9ydF9zeW5jX2ZpbGUyKGFtZGdwdV9kZXZpY2VfaGFu
ZGxlIGRldiwKKwkJCQkJCSAgIHVpbnQzMl90IHN5bmNvYmosCisJCQkJCQkgICB1aW50NjRfdCBw
b2ludCwKKwkJCQkJCSAgIGludCBzeW5jX2ZpbGVfZmQpCit7CisJdWludDMyX3QgYmluYXJ5X2hh
bmRsZTsKKwlpbnQgcmV0OworCisJaWYgKE5VTEwgPT0gZGV2KQorCQlyZXR1cm4gLUVJTlZBTDsK
KworCWlmICghcG9pbnQpCisJCXJldHVybiBkcm1TeW5jb2JqSW1wb3J0U3luY0ZpbGUoZGV2LT5m
ZCwgc3luY29iaiwgc3luY19maWxlX2ZkKTsKKworCXJldCA9IGRybVN5bmNvYmpDcmVhdGUoZGV2
LT5mZCwgMCwgJmJpbmFyeV9oYW5kbGUpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisJcmV0
ID0gZHJtU3luY29iakltcG9ydFN5bmNGaWxlKGRldi0+ZmQsIGJpbmFyeV9oYW5kbGUsIHN5bmNf
ZmlsZV9mZCk7CisJaWYgKHJldCkKKwkJZ290byBvdXQ7CisJcmV0ID0gZHJtU3luY29ialRyYW5z
ZmVyKGRldi0+ZmQsIHN5bmNvYmosIHBvaW50LAorCQkJCSBiaW5hcnlfaGFuZGxlLCAwLCAwKTsK
K291dDoKKwlkcm1TeW5jb2JqRGVzdHJveShkZXYtPmZkLCBiaW5hcnlfaGFuZGxlKTsKKwlyZXR1
cm4gcmV0OworfQorCiBkcm1fcHVibGljIGludCBhbWRncHVfY3Nfc3VibWl0X3JhdyhhbWRncHVf
ZGV2aWNlX2hhbmRsZSBkZXYsCiAJCQkJICAgIGFtZGdwdV9jb250ZXh0X2hhbmRsZSBjb250ZXh0
LAogCQkJCSAgICBhbWRncHVfYm9fbGlzdF9oYW5kbGUgYm9fbGlzdF9oYW5kbGUsCi0tIAoyLjE3
LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1k
ZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
