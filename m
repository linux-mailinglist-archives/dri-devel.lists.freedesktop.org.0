Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8E8AEA375E
	for <lists+dri-devel@lfdr.de>; Fri, 30 Aug 2019 14:58:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3945D6E338;
	Fri, 30 Aug 2019 12:58:35 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from honk.sigxcpu.org (honk.sigxcpu.org [24.134.29.49])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EA4556E330
 for <dri-devel@lists.freedesktop.org>; Fri, 30 Aug 2019 12:58:32 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by honk.sigxcpu.org (Postfix) with ESMTP id 7CCF2FB04;
 Fri, 30 Aug 2019 14:58:31 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at honk.sigxcpu.org
Received: from honk.sigxcpu.org ([127.0.0.1])
 by localhost (honk.sigxcpu.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id DVxN5vGp7sWT; Fri, 30 Aug 2019 14:58:23 +0200 (CEST)
Received: by bogon.sigxcpu.org (Postfix, from userid 1000)
 id 142C241420; Fri, 30 Aug 2019 14:58:23 +0200 (CEST)
From: =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>
To: "To : David Airlie" <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Shawn Guo <shawnguo@kernel.org>, Sascha Hauer <s.hauer@pengutronix.de>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 Fabio Estevam <festevam@gmail.com>, NXP Linux Team <linux-imx@nxp.com>,
 Andrzej Hajda <a.hajda@samsung.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Jonas Karlman <jonas@kwiboo.se>, Jernej Skrabec <jernej.skrabec@siol.net>,
 Lee Jones <lee.jones@linaro.org>,
 =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>,
 dri-devel@lists.freedesktop.org, devicetree@vger.kernel.org,
 linux-arm-kernel@lists.infradead.org, linux-kernel@vger.kernel.org,
 Robert Chiras <robert.chiras@nxp.com>, Sam Ravnborg <sam@ravnborg.org>,
 Arnd Bergmann <arnd@arndb.de>
Subject: [PATCH v4 2/2] drm/bridge: Add NWL MIPI DSI host controller support
Date: Fri, 30 Aug 2019 14:58:22 +0200
Message-Id: <6ed2760e24e5b007b77a61a547155a38492525f3.1567169464.git.agx@sigxcpu.org>
X-Mailer: git-send-email 2.23.0.rc1
In-Reply-To: <cover.1567169464.git.agx@sigxcpu.org>
References: <cover.1567169464.git.agx@sigxcpu.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBhZGRzIGluaXRpYWwgc3VwcG9ydCBmb3IgdGhlIE5XTCBNSVBJIERTSSBIb3N0IGNvbnRy
b2xsZXIgZm91bmQgb24KaS5NWDggU29Dcy4KCkl0IGFkZHMgc3VwcG9ydCBmb3IgdGhlIGkuTVg4
TVEgYnV0IHRoZSBzYW1lIElQIGNhbiBiZSBmb3VuZCBvbgplLmcuIHRoZSBpLk1YOFFYUC4KCkl0
IGhhcyBiZWVuIHRlc3RlZCBvbiB0aGUgTGlicmVtIDUgZGV2a2l0IHVzaW5nIG14c2ZiLgoKU2ln
bmVkLW9mZi1ieTogR3VpZG8gR8O8bnRoZXIgPGFneEBzaWd4Y3B1Lm9yZz4KQ28tZGV2ZWxvcGVk
LWJ5OiBSb2JlcnQgQ2hpcmFzIDxyb2JlcnQuY2hpcmFzQG54cC5jb20+ClNpZ25lZC1vZmYtYnk6
IFJvYmVydCBDaGlyYXMgPHJvYmVydC5jaGlyYXNAbnhwLmNvbT4KVGVzdGVkLWJ5OiBSb2JlcnQg
Q2hpcmFzIDxyb2JlcnQuY2hpcmFzQG54cC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9LY29uZmlnICAgICAgICAgICB8ICAgMiArCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL01ha2Vm
aWxlICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS9LY29u
ZmlnICAgfCAgMTYgKwogZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpL01ha2VmaWxlICB8
ICAgNCArCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kvbndsLWRydi5jIHwgNDk5ICsr
KysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS9ud2wtZHJ2Lmgg
fCAgNjUgKysrCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kvbndsLWRzaS5jIHwgNjk5
ICsrKysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kv
bndsLWRzaS5oIHwgMTEyICsrKysKIDggZmlsZXMgY2hhbmdlZCwgMTM5OCBpbnNlcnRpb25zKCsp
CiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpL0tjb25m
aWcKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kvTWFr
ZWZpbGUKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kv
bndsLWRydi5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wt
ZHNpL253bC1kcnYuaAogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9icmlkZ2Uv
bndsLWRzaS9ud2wtZHNpLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vYnJp
ZGdlL253bC1kc2kvbndsLWRzaS5oCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9LY29uZmlnCmluZGV4IDFjYzlmNTAy
YzFmMi4uNzk4MGI1YzIxNTZmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL0tj
b25maWcKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9LY29uZmlnCkBAIC0xNTQsNiArMTU0
LDggQEAgc291cmNlICJkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2FuYWxvZ2l4L0tjb25maWciCiAK
IHNvdXJjZSAiZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9hZHY3NTExL0tjb25maWciCiAKK3NvdXJj
ZSAiZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpL0tjb25maWciCisKIHNvdXJjZSAiZHJp
dmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9LY29uZmlnIgogCiBlbmRtZW51CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2Jy
aWRnZS9NYWtlZmlsZQppbmRleCA0OTM0ZmNmNWE2ZjguLmQ5ZjZjMGY3NzU5MiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9NYWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0v
YnJpZGdlL01ha2VmaWxlCkBAIC0xNiw0ICsxNiw1IEBAIG9iai0kKENPTkZJR19EUk1fQU5BTE9H
SVhfRFApICs9IGFuYWxvZ2l4Lwogb2JqLSQoQ09ORklHX0RSTV9JMkNfQURWNzUxMSkgKz0gYWR2
NzUxMS8KIG9iai0kKENPTkZJR19EUk1fVElfU042NURTSTg2KSArPSB0aS1zbjY1ZHNpODYubwog
b2JqLSQoQ09ORklHX0RSTV9USV9URlA0MTApICs9IHRpLXRmcDQxMC5vCitvYmotJChDT05GSUdf
RFJNX05XTF9NSVBJX0RTSSkgKz0gbndsLWRzaS8KIG9iai15ICs9IHN5bm9wc3lzLwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpL0tjb25maWcgYi9kcml2ZXJzL2dw
dS9kcm0vYnJpZGdlL253bC1kc2kvS2NvbmZpZwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAw
MDAwMDAwMDAwMDAuLjNiMTU3YTlmMjIyOQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9icmlkZ2UvbndsLWRzaS9LY29uZmlnCkBAIC0wLDAgKzEsMTYgQEAKK2NvbmZpZyBEUk1f
TldMX01JUElfRFNJCisJdHJpc3RhdGUgIlN1cHBvcnQgZm9yIE5vcnRod2VzdCBMb2dpYyBNSVBJ
IERTSSBIb3N0IGNvbnRyb2xsZXIiCisJZGVwZW5kcyBvbiBEUk0KKwlkZXBlbmRzIG9uIENPTU1P
Tl9DTEsKKwlkZXBlbmRzIG9uIE9GICYmIEhBU19JT01FTQorCXNlbGVjdCBEUk1fS01TX0hFTFBF
UgorCXNlbGVjdCBEUk1fTUlQSV9EU0kKKwlzZWxlY3QgRFJNX1BBTkVMX0JSSURHRQorCXNlbGVj
dCBHRU5FUklDX1BIWV9NSVBJX0RQSFkKKwlzZWxlY3QgTUZEX1NZU0NPTgorCXNlbGVjdCBNVUxU
SVBMRVhFUgorCXNlbGVjdCBSRUdNQVBfTU1JTworCWhlbHAKKwkgIFRoaXMgZW5hYmxlcyB0aGUg
Tm9ydGh3ZXN0IExvZ2ljIE1JUEkgRFNJIEhvc3QgY29udHJvbGxlciBhcworCSAgZm9yIGV4YW1w
bGUgZm91bmQgb24gTlhQJ3MgaS5NWDggUHJvY2Vzc29ycy4KKwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpL01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9ud2wtZHNpL01ha2VmaWxlCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAw
MC4uODA0YmFmMmYxOTE2Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9ud2wtZHNpL01ha2VmaWxlCkBAIC0wLDAgKzEsNCBAQAorIyBTUERYLUxpY2Vuc2UtSWRlbnRp
ZmllcjogR1BMLTIuMAorbndsLW1pcGktZHNpLXkgOj0gbndsLWRydi5vIG53bC1kc2kubworb2Jq
LSQoQ09ORklHX0RSTV9OV0xfTUlQSV9EU0kpICs9IG53bC1taXBpLWRzaS5vCitoZWFkZXItdGVz
dC15ICs9IG53bC1kcnYuaCBud2wtZHNpLmgKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9i
cmlkZ2UvbndsLWRzaS9ud2wtZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kv
bndsLWRydi5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uOWZmNDNk
MmRlMTI3Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNp
L253bC1kcnYuYwpAQCAtMCwwICsxLDQ5OSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6
IEdQTC0yLjArCisvKgorICogaS5NWDggTldMIE1JUEkgRFNJIGhvc3QgZHJpdmVyCisgKgorICog
Q29weXJpZ2h0IChDKSAyMDE3IE5YUAorICogQ29weXJpZ2h0IChDKSAyMDE5IFB1cmlzbSBTUEMK
KyAqLworCisjaW5jbHVkZSA8bGludXgvY2xrLmg+CisjaW5jbHVkZSA8bGludXgvaXJxLmg+Cisj
aW5jbHVkZSA8bGludXgvbWZkL3N5c2Nvbi5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgor
I2luY2x1ZGUgPGxpbnV4L211eC9jb25zdW1lci5oPgorI2luY2x1ZGUgPGxpbnV4L29mLmg+Cisj
aW5jbHVkZSA8bGludXgvb2ZfcGxhdGZvcm0uaD4KKyNpbmNsdWRlIDxsaW51eC9waHkvcGh5Lmg+
CisjaW5jbHVkZSA8bGludXgvcmVzZXQuaD4KKyNpbmNsdWRlIDxsaW51eC9yZWdtYXAuaD4KKyNp
bmNsdWRlIDxsaW51eC9zeXNfc29jLmg+CisKKyNpbmNsdWRlIDxkcm0vZHJtX2F0b21pY19oZWxw
ZXIuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX29mLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9wcmludC5o
PgorI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+CisKKyNpbmNsdWRlICJud2wtZHJ2
LmgiCisjaW5jbHVkZSAibndsLWRzaS5oIgorCisjZGVmaW5lIERSVl9OQU1FICJud2wtZHNpIgor
CisvKiBQb3NzaWJsZSBwbGF0Zm9ybSBzcGVjaWZpYyBjbG9ja3MgKi8KKyNkZWZpbmUgTldMX0RT
SV9DTEtfQ09SRQkiY29yZSIKKworc3RhdGljIGNvbnN0IHN0cnVjdCByZWdtYXBfY29uZmlnIG53
bF9kc2lfcmVnbWFwX2NvbmZpZyA9IHsKKwkucmVnX2JpdHMgPSAxNiwKKwkudmFsX2JpdHMgPSAz
MiwKKwkucmVnX3N0cmlkZSA9IDQsCisJLm1heF9yZWdpc3RlciA9IE5XTF9EU0lfSVJRX01BU0sy
LAorCS5uYW1lID0gRFJWX05BTUUsCit9OworCitzdHJ1Y3QgbndsX2RzaV9wbGF0Zm9ybV9kYXRh
IHsKKwlpbnQgKCpwb3dlcm9uKShzdHJ1Y3QgbndsX2RzaSAqZHNpKTsKKwlpbnQgKCpwb3dlcm9m
Zikoc3RydWN0IG53bF9kc2kgKmRzaSk7CisJaW50ICgqc2VsZWN0X2lucHV0KShzdHJ1Y3Qgbnds
X2RzaSAqZHNpKTsKKwlpbnQgKCpkZXNlbGVjdF9pbnB1dCkoc3RydWN0IG53bF9kc2kgKmRzaSk7
CisJc3RydWN0IG53bF9kc2lfcGxhdF9jbGtfY29uZmlnIGNsa19jb25maWdbTldMX0RTSV9NQVhf
UExBVEZPUk1fQ0xPQ0tTXTsKK307CisKK3N0YXRpYyBpbmxpbmUgc3RydWN0IG53bF9kc2kgKmJy
aWRnZV90b19kc2koc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3sKKwlyZXR1cm4gY29udGFp
bmVyX29mKGJyaWRnZSwgc3RydWN0IG53bF9kc2ksIGJyaWRnZSk7Cit9CisKK3N0YXRpYyBpbnQg
bndsX2RzaV9zZXRfcGxhdGZvcm1fY2xvY2tzKHN0cnVjdCBud2xfZHNpICpkc2ksIGJvb2wgZW5h
YmxlKQoreworCXN0cnVjdCBkZXZpY2UgKmRldiA9IGRzaS0+ZGV2OworCWNvbnN0IGNoYXIgKmlk
OworCXN0cnVjdCBjbGsgKmNsazsKKwlzaXplX3QgaTsKKwl1bnNpZ25lZCBsb25nIHJhdGU7CisJ
aW50IHJldCwgcmVzdWx0ID0gMDsKKworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRldiwgIiVzIHBs
YXRmb3JtIGNsb2Nrc1xuIiwKKwkJCSAgICAgZW5hYmxlID8gImVuYWJsaW5nIiA6ICJkaXNhYmxp
bmciKTsKKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShkc2ktPnBkYXRhLT5jbGtfY29uZmln
KTsgaSsrKSB7CisJCWlmICghZHNpLT5jbGtfY29uZmlnW2ldLnByZXNlbnQpCisJCQljb250aW51
ZTsKKwkJaWQgPSBkc2ktPmNsa19jb25maWdbaV0uaWQ7CisJCWNsayA9IGRzaS0+Y2xrX2NvbmZp
Z1tpXS5jbGs7CisKKwkJaWYgKGVuYWJsZSkgeworCQkJcmV0ID0gY2xrX3ByZXBhcmVfZW5hYmxl
KGNsayk7CisJCQlpZiAocmV0IDwgMCkgeworCQkJCURSTV9ERVZfRVJST1IoZGV2LAorCQkJCQkg
ICAgICAiRmFpbGVkIHRvIGVuYWJsZSAlcyBjbGs6ICVkXG4iLAorCQkJCQkgICAgICBpZCwgcmV0
KTsKKwkJCQlyZXN1bHQgPSByZXN1bHQgPzogcmV0OworCQkJfQorCQkJcmF0ZSA9IGNsa19nZXRf
cmF0ZShjbGspOworCQkJRFJNX0RFVl9ERUJVR19EUklWRVIoZGV2LCAiRW5hYmxlZCAlcyBjbGsg
QCVsdSBIelxuIiwKKwkJCQkJICAgICBpZCwgcmF0ZSk7CisJCX0gZWxzZSB7CisJCQljbGtfZGlz
YWJsZV91bnByZXBhcmUoY2xrKTsKKwkJCURSTV9ERVZfREVCVUdfRFJJVkVSKGRldiwgIkRpc2Fi
bGVkICVzIGNsa1xuIiwgaWQpOworCQl9CisJfQorCisJcmV0dXJuIHJlc3VsdDsKK30KKworc3Rh
dGljIGludCBud2xfZHNpX3BsYXRfZW5hYmxlKHN0cnVjdCBud2xfZHNpICpkc2kpCit7CisJc3Ry
dWN0IGRldmljZSAqZGV2ID0gZHNpLT5kZXY7CisJaW50IHJldDsKKworCWlmIChkc2ktPnBkYXRh
LT5zZWxlY3RfaW5wdXQpCisJCWRzaS0+cGRhdGEtPnNlbGVjdF9pbnB1dChkc2kpOworCisJcmV0
ID0gbndsX2RzaV9zZXRfcGxhdGZvcm1fY2xvY2tzKGRzaSwgdHJ1ZSk7CisJaWYgKHJldCA8IDAp
CisJCXJldHVybiByZXQ7CisKKwlyZXQgPSBkc2ktPnBkYXRhLT5wb3dlcm9uKGRzaSk7CisJaWYg
KHJldCA8IDApCisJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFpbGVkIHRvIHBvd2VyIG9uIERTSTog
JWRcbiIsIHJldCk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZvaWQgbndsX2RzaV9wbGF0
X2Rpc2FibGUoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlkc2ktPnBkYXRhLT5wb3dlcm9mZihk
c2kpOworCW53bF9kc2lfc2V0X3BsYXRmb3JtX2Nsb2Nrcyhkc2ksIGZhbHNlKTsKKwlpZiAoZHNp
LT5wZGF0YS0+ZGVzZWxlY3RfaW5wdXQpCisJCWRzaS0+cGRhdGEtPmRlc2VsZWN0X2lucHV0KGRz
aSk7Cit9CisKK3N0YXRpYyB2b2lkIG53bF9kc2lfYnJpZGdlX2Rpc2FibGUoc3RydWN0IGRybV9i
cmlkZ2UgKmJyaWRnZSkKK3sKKwlzdHJ1Y3QgbndsX2RzaSAqZHNpID0gYnJpZGdlX3RvX2RzaShi
cmlkZ2UpOworCisJbndsX2RzaV9kaXNhYmxlKGRzaSk7CisJbndsX2RzaV9wbGF0X2Rpc2FibGUo
ZHNpKTsKKwlwbV9ydW50aW1lX3B1dChkc2ktPmRldik7Cit9CisKK3N0YXRpYyBpbnQgbndsX2Rz
aV9nZXRfZHBoeV9wYXJhbXMoc3RydWN0IG53bF9kc2kgKmRzaSwKKwkJCQkgICBjb25zdCBzdHJ1
Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwKKwkJCQkgICB1bmlvbiBwaHlfY29uZmlndXJlX29w
dHMgKnBoeV9vcHRzKQoreworCXVuc2lnbmVkIGxvbmcgcmF0ZTsKKwlpbnQgcmV0OworCisJaWYg
KGRzaS0+bGFuZXMgPCAxIHx8IGRzaS0+bGFuZXMgPiA0KQorCQlyZXR1cm4gLUVJTlZBTDsKKwor
CS8qCisJICogU28gZmFyIHRoZSBEUEhZIHNwZWMgbWluaW1hbCB0aW1pbmdzIHdvcmsgZm9yIGJv
dGggbWl4ZWwKKwkgKiBkcGh5IGFuZCBud2wgZHNpIGhvc3QKKwkgKi8KKwlyZXQgPSBwaHlfbWlw
aV9kcGh5X2dldF9kZWZhdWx0X2NvbmZpZygKKwkJbW9kZS0+Y3J0Y19jbG9jayAqIDEwMDAsCisJ
CW1pcGlfZHNpX3BpeGVsX2Zvcm1hdF90b19icHAoZHNpLT5mb3JtYXQpLCBkc2ktPmxhbmVzLAor
CQkmcGh5X29wdHMtPm1pcGlfZHBoeSk7CisJaWYgKHJldCA8IDApCisJCXJldHVybiByZXQ7CisK
KwlyYXRlID0gY2xrX2dldF9yYXRlKGRzaS0+dHhfZXNjX2Nsayk7CisJRFJNX0RFVl9ERUJVR19E
UklWRVIoZHNpLT5kZXYsICJMUCBjbGsgaXMgQCVsdSBIelxuIiwgcmF0ZSk7CisJcGh5X29wdHMt
Pm1pcGlfZHBoeS5scF9jbGtfcmF0ZSA9IHJhdGU7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGlj
IGJvb2wgbndsX2RzaV9icmlkZ2VfbW9kZV9maXh1cChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdl
LAorCQkJCSAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAorCQkJCSAg
ICAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlKQoreworCS8qIEF0IGxl
YXN0IExDRElGICsgTldMIG5lZWRzIGFjdGl2ZSBoaWdoIHN5bmMgKi8KKwlhZGp1c3RlZF9tb2Rl
LT5mbGFncyB8PSAoRFJNX01PREVfRkxBR19QSFNZTkMgfCBEUk1fTU9ERV9GTEFHX1BWU1lOQyk7
CisJYWRqdXN0ZWRfbW9kZS0+ZmxhZ3MgJj0gfihEUk1fTU9ERV9GTEFHX05IU1lOQyB8IERSTV9N
T0RFX0ZMQUdfTlZTWU5DKTsKKworCXJldHVybiB0cnVlOworfQorCitzdGF0aWMgZW51bSBkcm1f
bW9kZV9zdGF0dXMKK253bF9kc2lfYnJpZGdlX21vZGVfdmFsaWQoc3RydWN0IGRybV9icmlkZ2Ug
KmJyaWRnZSwKKwkJCSAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCit7CisJ
c3RydWN0IG53bF9kc2kgKmRzaSA9IGJyaWRnZV90b19kc2koYnJpZGdlKTsKKwlpbnQgYnBwID0g
bWlwaV9kc2lfcGl4ZWxfZm9ybWF0X3RvX2JwcChkc2ktPmZvcm1hdCk7CisKKwlpZiAobW9kZS0+
Y2xvY2sgKiBicHAgPiAxNTAwMDAwMCAqIGRzaS0+bGFuZXMpCisJCXJldHVybiBNT0RFX0NMT0NL
X0hJR0g7CisKKwlpZiAobW9kZS0+Y2xvY2sgKiBicHAgPCA4MDAwMCAqIGRzaS0+bGFuZXMpCisJ
CXJldHVybiBNT0RFX0NMT0NLX0xPVzsKKworCXJldHVybiBNT0RFX09LOworfQorCitzdGF0aWMg
dm9pZAorbndsX2RzaV9icmlkZ2VfbW9kZV9zZXQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwK
KwkJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAorCQkJY29uc3Qgc3RydWN0
IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpCit7CisJc3RydWN0IG53bF9kc2kgKmRz
aSA9IGJyaWRnZV90b19kc2koYnJpZGdlKTsKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSBkc2ktPmRl
djsKKwl1bmlvbiBwaHlfY29uZmlndXJlX29wdHMgbmV3X2NmZzsKKwl1bnNpZ25lZCBsb25nIHBo
eV9yZWZfcmF0ZTsKKwlpbnQgcmV0OworCisJcmV0ID0gbndsX2RzaV9nZXRfZHBoeV9wYXJhbXMo
ZHNpLCBhZGp1c3RlZF9tb2RlLCAmbmV3X2NmZyk7CisJaWYgKHJldCA8IDApCisJCXJldHVybjsK
KworCS8qCisJICogSWYgaHMgY2xvY2sgaXMgdW5jaGFuZ2VkLCB3ZSdyZSBhbGwgZ29vZCAtIGFs
bCBwYXJhbWV0ZXJzIGFyZQorCSAqIGRlcml2ZWQgZnJvbSBpdCBhdG0uCisJICovCisJaWYgKG5l
d19jZmcubWlwaV9kcGh5LmhzX2Nsa19yYXRlID09IGRzaS0+cGh5X2NmZy5taXBpX2RwaHkuaHNf
Y2xrX3JhdGUpCisJCXJldHVybjsKKworCXBoeV9yZWZfcmF0ZSA9IGNsa19nZXRfcmF0ZShkc2kt
PnBoeV9yZWZfY2xrKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkZXYsICJQSFkgYXQgcmVmIHJh
dGU6ICVsdVxuIiwgcGh5X3JlZl9yYXRlKTsKKwkvKiBTYXZlIHRoZSBuZXcgZGVzaXJlZCBwaHkg
Y29uZmlnICovCisJbWVtY3B5KCZkc2ktPnBoeV9jZmcsICZuZXdfY2ZnLCBzaXplb2YobmV3X2Nm
ZykpOworCisJbWVtY3B5KCZkc2ktPm1vZGUsIGFkanVzdGVkX21vZGUsIHNpemVvZihkc2ktPm1v
ZGUpKTsKKwlkcm1fbW9kZV9kZWJ1Z19wcmludG1vZGVsaW5lKGFkanVzdGVkX21vZGUpOworfQor
CitzdGF0aWMgdm9pZCBud2xfZHNpX2JyaWRnZV9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdl
ICpicmlkZ2UpCit7CisJc3RydWN0IG53bF9kc2kgKmRzaSA9IGJyaWRnZV90b19kc2koYnJpZGdl
KTsKKworCXBtX3J1bnRpbWVfZ2V0X3N5bmMoZHNpLT5kZXYpOworCW53bF9kc2lfcGxhdF9lbmFi
bGUoZHNpKTsKKwlud2xfZHNpX2VuYWJsZShkc2kpOworfQorCitzdGF0aWMgaW50IG53bF9kc2lf
YnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQoreworCXN0cnVjdCBud2xf
ZHNpICpkc2kgPSBicmlkZ2UtPmRyaXZlcl9wcml2YXRlOworCisJcmV0dXJuIGRybV9icmlkZ2Vf
YXR0YWNoKGJyaWRnZS0+ZW5jb2RlciwgZHNpLT5wYW5lbF9icmlkZ2UsIGJyaWRnZSk7Cit9CisK
K3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV9mdW5jcyBud2xfZHNpX2JyaWRnZV9mdW5j
cyA9IHsKKwkucHJlX2VuYWJsZSA9IG53bF9kc2lfYnJpZGdlX3ByZV9lbmFibGUsCisJLmRpc2Fi
bGUgICAgPSBud2xfZHNpX2JyaWRnZV9kaXNhYmxlLAorCS5tb2RlX2ZpeHVwID0gbndsX2RzaV9i
cmlkZ2VfbW9kZV9maXh1cCwKKwkubW9kZV9zZXQgICA9IG53bF9kc2lfYnJpZGdlX21vZGVfc2V0
LAorCS5tb2RlX3ZhbGlkID0gbndsX2RzaV9icmlkZ2VfbW9kZV92YWxpZCwKKwkuYXR0YWNoCSAg
ICA9IG53bF9kc2lfYnJpZGdlX2F0dGFjaCwKK307CisKK3N0YXRpYyBpbnQgbndsX2RzaV9wYXJz
ZV9kdChzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBk
ZXYgPSB0b19wbGF0Zm9ybV9kZXZpY2UoZHNpLT5kZXYpOworCXN0cnVjdCBjbGsgKmNsazsKKwlj
b25zdCBjaGFyICpjbGtfaWQ7CisJdm9pZCBfX2lvbWVtICpiYXNlOworCWludCBpLCByZXQ7CisK
Kwlkc2ktPnBoeSA9IGRldm1fcGh5X2dldChkc2ktPmRldiwgImRwaHkiKTsKKwlpZiAoSVNfRVJS
KGRzaS0+cGh5KSkgeworCQlyZXQgPSBQVFJfRVJSKGRzaS0+cGh5KTsKKwkJaWYgKHJldCAhPSAt
RVBST0JFX0RFRkVSKQorCQkJRFJNX0RFVl9FUlJPUihkc2ktPmRldiwgIkNvdWxkIG5vdCBnZXQg
UEhZOiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwkvKiBQbGF0Zm9ybSBkZXBl
bmRlbnQgY2xvY2tzICovCisJbWVtY3B5KGRzaS0+Y2xrX2NvbmZpZywgZHNpLT5wZGF0YS0+Y2xr
X2NvbmZpZywKKwkgICAgICAgc2l6ZW9mKGRzaS0+cGRhdGEtPmNsa19jb25maWcpKTsKKworCWZv
ciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGRzaS0+cGRhdGEtPmNsa19jb25maWcpOyBpKyspIHsK
KwkJaWYgKCFkc2ktPmNsa19jb25maWdbaV0ucHJlc2VudCkKKwkJCWNvbnRpbnVlOworCisJCWNs
a19pZCA9IGRzaS0+Y2xrX2NvbmZpZ1tpXS5pZDsKKwkJY2xrID0gZGV2bV9jbGtfZ2V0KGRzaS0+
ZGV2LCBjbGtfaWQpOworCQlpZiAoSVNfRVJSKGNsaykpIHsKKwkJCXJldCA9IFBUUl9FUlIoY2xr
KTsKKwkJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gZ2V0ICVzIGNsb2NrOiAl
ZFxuIiwKKwkJCQkgICAgICBjbGtfaWQsIHJldCk7CisJCQlyZXR1cm4gcmV0OworCQl9CisJCURS
TV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiU2V0dXAgY2xrICVzIChyYXRlOiAlbHUpXG4i
LAorCQkJCSAgICAgY2xrX2lkLCBjbGtfZ2V0X3JhdGUoY2xrKSk7CisJCWRzaS0+Y2xrX2NvbmZp
Z1tpXS5jbGsgPSBjbGs7CisJfQorCisJLyogRFNJIGNsb2NrcyAqLworCWNsayA9IGRldm1fY2xr
X2dldChkc2ktPmRldiwgInBoeV9yZWYiKTsKKwlpZiAoSVNfRVJSKGNsaykpIHsKKwkJcmV0ID0g
UFRSX0VSUihjbGspOworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGdldCBw
aHlfcmVmIGNsb2NrOiAlZFxuIiwKKwkJCSAgICAgIHJldCk7CisJCXJldHVybiByZXQ7CisJfQor
CWRzaS0+cGh5X3JlZl9jbGsgPSBjbGs7CisKKwljbGsgPSBkZXZtX2Nsa19nZXQoZHNpLT5kZXYs
ICJyeF9lc2MiKTsKKwlpZiAoSVNfRVJSKGNsaykpIHsKKwkJcmV0ID0gUFRSX0VSUihjbGspOwor
CQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGdldCByeF9lc2MgY2xvY2s6ICVk
XG4iLAorCQkJICAgICAgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisJZHNpLT5yeF9lc2NfY2xr
ID0gY2xrOworCisJY2xrID0gZGV2bV9jbGtfZ2V0KGRzaS0+ZGV2LCAidHhfZXNjIik7CisJaWYg
KElTX0VSUihjbGspKSB7CisJCXJldCA9IFBUUl9FUlIoY2xrKTsKKwkJRFJNX0RFVl9FUlJPUihk
c2ktPmRldiwgIkZhaWxlZCB0byBnZXQgdHhfZXNjIGNsb2NrOiAlZFxuIiwKKwkJCSAgICAgIHJl
dCk7CisJCXJldHVybiByZXQ7CisJfQorCWRzaS0+dHhfZXNjX2NsayA9IGNsazsKKworCWRzaS0+
bXV4ID0gZGV2bV9tdXhfY29udHJvbF9nZXQoZHNpLT5kZXYsIE5VTEwpOworCWlmIChJU19FUlIo
ZHNpLT5tdXgpKSB7CisJCXJldCA9IFBUUl9FUlIoZHNpLT5tdXgpOworCQlpZiAocmV0ICE9IC1F
UFJPQkVfREVGRVIpCisJCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGdldCBt
dXg6ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKworCWJhc2UgPSBkZXZtX3BsYXRm
b3JtX2lvcmVtYXBfcmVzb3VyY2UocGRldiwgMCk7CisJaWYgKElTX0VSUihiYXNlKSkKKwkJcmV0
dXJuIFBUUl9FUlIoYmFzZSk7CisKKwlkc2ktPnJlZ21hcCA9CisJCWRldm1fcmVnbWFwX2luaXRf
bW1pbyhkc2ktPmRldiwgYmFzZSwgJm53bF9kc2lfcmVnbWFwX2NvbmZpZyk7CisJaWYgKElTX0VS
Uihkc2ktPnJlZ21hcCkpIHsKKwkJcmV0ID0gUFRSX0VSUihkc2ktPnJlZ21hcCk7CisJCURSTV9E
RVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gY3JlYXRlIE5XTCBEU0kgcmVnbWFwOiAlZFxu
IiwKKwkJCSAgICAgIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJZHNpLT5pcnEgPSBwbGF0
Zm9ybV9nZXRfaXJxKHBkZXYsIDApOworCWlmIChkc2ktPmlycSA8IDApIHsKKwkJRFJNX0RFVl9F
UlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byBnZXQgZGV2aWNlIElSUTogJWRcbiIsCisJCQkgICAg
ICBkc2ktPmlycSk7CisJCXJldHVybiBkc2ktPmlycTsKKwl9CisKKwlkc2ktPnJzdGMgPSBkZXZt
X3Jlc2V0X2NvbnRyb2xfYXJyYXlfZ2V0KGRzaS0+ZGV2LCBmYWxzZSwgdHJ1ZSk7CisJaWYgKElT
X0VSUihkc2ktPnJzdGMpKSB7CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8g
Z2V0IHJlc2V0czogJWxkXG4iLAorCQkJICAgICAgUFRSX0VSUihkc2ktPnJzdGMpKTsKKwkJcmV0
dXJuIFBUUl9FUlIoZHNpLT5yc3RjKTsKKwl9CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGlu
dCBpbXg4bXFfZHNpX3NlbGVjdF9pbnB1dChzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXN0cnVj
dCBkZXZpY2Vfbm9kZSAqcmVtb3RlOworCXUzMiB1c2VfZGNzcyA9IDE7CisJaW50IHJldDsKKwor
CXJlbW90ZSA9IG9mX2dyYXBoX2dldF9yZW1vdGVfbm9kZShkc2ktPmRldi0+b2Zfbm9kZSwgMCwg
MCk7CisJaWYgKHN0cmNtcChyZW1vdGUtPm5hbWUsICJsY2RpZiIpID09IDApCisJCXVzZV9kY3Nz
ID0gMDsKKworCURSTV9ERVZfSU5GTyhkc2ktPmRldiwgIlVzaW5nICVzIGFzIGlucHV0IHNvdXJj
ZVxuIiwKKwkJICAgICAodXNlX2Rjc3MpID8gIkRDU1MiIDogIkxDRElGIik7CisKKwlyZXQgPSBt
dXhfY29udHJvbF90cnlfc2VsZWN0KGRzaS0+bXV4LCB1c2VfZGNzcyk7CisJaWYgKHJldCA8IDAp
CisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gc2VsZWN0IGlucHV0OiAlZFxu
IiwgcmV0KTsKKworCW9mX25vZGVfcHV0KHJlbW90ZSk7CisJcmV0dXJuIHJldDsKK30KKworCitz
dGF0aWMgaW50IGlteDhtcV9kc2lfZGVzZWxlY3RfaW5wdXQoc3RydWN0IG53bF9kc2kgKmRzaSkK
K3sKKwlpbnQgcmV0OworCisJcmV0ID0gbXV4X2NvbnRyb2xfZGVzZWxlY3QoZHNpLT5tdXgpOwor
CWlmIChyZXQgPCAwKQorCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGRlc2Vs
ZWN0IGlucHV0OiAlZFxuIiwgcmV0KTsKKworCXJldHVybiByZXQ7Cit9CisKKworc3RhdGljIGlu
dCBpbXg4bXFfZHNpX3Bvd2Vyb24oc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlpbnQgcmV0ID0g
MDsKKworCS8qIG90aGVyd2lzZSB0aGUgZGlzcGxheSBzdGF5cyBibGFuayAqLworCXVzbGVlcF9y
YW5nZSgyMDAsIDMwMCk7CisKKwlpZiAoZHNpLT5yc3RjKQorCQlyZXQgPSByZXNldF9jb250cm9s
X2RlYXNzZXJ0KGRzaS0+cnN0Yyk7CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IGlt
eDhtcV9kc2lfcG93ZXJvZmYoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlpbnQgcmV0ID0gMDsK
KworCWlmIChkc2ktPnF1aXJrcyAmIFNSQ19SRVNFVF9RVUlSSykKKwkJcmV0dXJuIDA7CisKKwlp
ZiAoZHNpLT5yc3RjKQorCQlyZXQgPSByZXNldF9jb250cm9sX2Fzc2VydChkc2ktPnJzdGMpOwor
CXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV90aW1pbmdz
IG53bF9kc2lfdGltaW5ncyA9IHsKKwkuaW5wdXRfYnVzX2ZsYWdzID0gRFJNX0JVU19GTEFHX0RF
X0xPVywKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgbndsX2RzaV9wbGF0Zm9ybV9kYXRhIGlt
eDhtcV9kZXYgPSB7CisJLnBvd2Vyb24gPSAmaW14OG1xX2RzaV9wb3dlcm9uLAorCS5wb3dlcm9m
ZiA9ICZpbXg4bXFfZHNpX3Bvd2Vyb2ZmLAorCS5zZWxlY3RfaW5wdXQgPSAmaW14OG1xX2RzaV9z
ZWxlY3RfaW5wdXQsCisJLmRlc2VsZWN0X2lucHV0ID0gJmlteDhtcV9kc2lfZGVzZWxlY3RfaW5w
dXQsCisJLmNsa19jb25maWcgPSB7CisJCXsgLmlkID0gTldMX0RTSV9DTEtfQ09SRSwgLnByZXNl
bnQgPSB0cnVlIH0sCisJfSwKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lk
IG53bF9kc2lfZHRfaWRzW10gPSB7CisJeyAuY29tcGF0aWJsZSA9ICJmc2wsaW14OG1xLW53bC1k
c2kiLCAuZGF0YSA9ICZpbXg4bXFfZGV2LCB9LAorCXsgLyogc2VudGluZWwgKi8gfQorfTsKK01P
RFVMRV9ERVZJQ0VfVEFCTEUob2YsIG53bF9kc2lfZHRfaWRzKTsKKworc3RhdGljIGNvbnN0IHN0
cnVjdCBzb2NfZGV2aWNlX2F0dHJpYnV0ZSBud2xfZHNpX3F1aXJrc19tYXRjaFtdID0geworCXsg
LnNvY19pZCA9ICJpLk1YOE1RIiwgLnJldmlzaW9uID0gIjIuMCIsCisJICAuZGF0YSA9ICh2b2lk
ICopKEUxMTQxOF9IU19NT0RFX1FVSVJLIHwgU1JDX1JFU0VUX1FVSVJLKSB9LAorCXsgLyogc2Vu
dGluZWwuICovIH0sCit9OworCitzdGF0aWMgaW50IG53bF9kc2lfcHJvYmUoc3RydWN0IHBsYXRm
b3JtX2RldmljZSAqcGRldikKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmcGRldi0+ZGV2Owor
CWNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgKm9mX2lkID0gb2ZfbWF0Y2hfZGV2aWNlKG53bF9k
c2lfZHRfaWRzLCBkZXYpOworCWNvbnN0IHN0cnVjdCBud2xfZHNpX3BsYXRmb3JtX2RhdGEgKnBk
YXRhID0gb2ZfaWQtPmRhdGE7CisJY29uc3Qgc3RydWN0IHNvY19kZXZpY2VfYXR0cmlidXRlICph
dHRyOworCXN0cnVjdCBud2xfZHNpICpkc2k7CisJaW50IHJldDsKKworCWRzaSA9IGRldm1fa3ph
bGxvYyhkZXYsIHNpemVvZigqZHNpKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFkc2kpCisJCXJldHVy
biAtRU5PTUVNOworCisJZHNpLT5kZXYgPSBkZXY7CisJZHNpLT5wZGF0YSA9IHBkYXRhOworCisJ
cmV0ID0gbndsX2RzaV9wYXJzZV9kdChkc2kpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisK
KwlyZXQgPSBkZXZtX3JlcXVlc3RfaXJxKGRldiwgZHNpLT5pcnEsIG53bF9kc2lfaXJxX2hhbmRs
ZXIsIDAsCisJCQkgICAgICAgZGV2X25hbWUoZGV2KSwgZHNpKTsKKwlpZiAocmV0IDwgMCkgewor
CQlEUk1fREVWX0VSUk9SKGRldiwgIkZhaWxlZCB0byByZXF1ZXN0IElSUSAlZDogJWRcbiIsIGRz
aS0+aXJxLAorCQkJICAgICAgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlkc2ktPmRzaV9o
b3N0Lm9wcyA9ICZud2xfZHNpX2hvc3Rfb3BzOworCWRzaS0+ZHNpX2hvc3QuZGV2ID0gZGV2Owor
CXJldCA9IG1pcGlfZHNpX2hvc3RfcmVnaXN0ZXIoJmRzaS0+ZHNpX2hvc3QpOworCWlmIChyZXQp
IHsKKwkJRFJNX0RFVl9FUlJPUihkZXYsICJGYWlsZWQgdG8gcmVnaXN0ZXIgTUlQSSBob3N0OiAl
ZFxuIiwgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlhdHRyID0gc29jX2RldmljZV9tYXRj
aChud2xfZHNpX3F1aXJrc19tYXRjaCk7CisJaWYgKGF0dHIpCisJCWRzaS0+cXVpcmtzID0gKHVp
bnRwdHJfdClhdHRyLT5kYXRhOworCisJZHNpLT5icmlkZ2UuZHJpdmVyX3ByaXZhdGUgPSBkc2k7
CisJZHNpLT5icmlkZ2UuZnVuY3MgPSAmbndsX2RzaV9icmlkZ2VfZnVuY3M7CisJZHNpLT5icmlk
Z2Uub2Zfbm9kZSA9IGRldi0+b2Zfbm9kZTsKKwlkc2ktPmJyaWRnZS50aW1pbmdzID0gJm53bF9k
c2lfdGltaW5nczsKKworCWRldl9zZXRfZHJ2ZGF0YShkZXYsIGRzaSk7CisJcG1fcnVudGltZV9l
bmFibGUoZGV2KTsKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBud2xfZHNpX3JlbW92ZShz
dHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQoreworCXN0cnVjdCBud2xfZHNpICpkc2kgPSBw
bGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKKworCW1pcGlfZHNpX2hvc3RfdW5yZWdpc3Rlcigm
ZHNpLT5kc2lfaG9zdCk7CisJcG1fcnVudGltZV9kaXNhYmxlKCZwZGV2LT5kZXYpOworCXJldHVy
biAwOworfQorCitzdGF0aWMgc3RydWN0IHBsYXRmb3JtX2RyaXZlciBud2xfZHNpX2RyaXZlciA9
IHsKKwkucHJvYmUJCT0gbndsX2RzaV9wcm9iZSwKKwkucmVtb3ZlCQk9IG53bF9kc2lfcmVtb3Zl
LAorCS5kcml2ZXIJCT0geworCQkub2ZfbWF0Y2hfdGFibGUgPSBud2xfZHNpX2R0X2lkcywKKwkJ
Lm5hbWUJPSBEUlZfTkFNRSwKKwl9LAorfTsKKworbW9kdWxlX3BsYXRmb3JtX2RyaXZlcihud2xf
ZHNpX2RyaXZlcik7CisKK01PRFVMRV9BVVRIT1IoIk5YUCBTZW1pY29uZHVjdG9yIik7CitNT0RV
TEVfQVVUSE9SKCJQdXJpc20gU1BDIik7CitNT0RVTEVfREVTQ1JJUFRJT04oIk5vcnRod2VzdCBM
b2dpYyBNSVBJLURTSSBkcml2ZXIiKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwiKTsgLyogR1BMdjIg
b3IgbGF0ZXIgKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS9u
d2wtZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kvbndsLWRydi5oCm5ldyBm
aWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uMWU3MmE5MjIxNDAxCi0tLSAvZGV2
L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpL253bC1kcnYuaApAQCAt
MCwwICsxLDY1IEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCsgKi8KKy8q
CisgKiBOV0wgTUlQSSBEU0kgaG9zdCBkcml2ZXIKKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMTcg
TlhQCisgKiBDb3B5cmlnaHQgKEMpIDIwMTkgUHVyaXNtIFNQQworICovCisKKyNpZm5kZWYgX19O
V0xfRFJWX0hfXworI2RlZmluZSBfX05XTF9EUlZfSF9fCisKKyNpbmNsdWRlIDxsaW51eC9tdXgv
Y29uc3VtZXIuaD4KKyNpbmNsdWRlIDxsaW51eC9waHkvcGh5Lmg+CisKKyNpbmNsdWRlIDxkcm0v
ZHJtX2JyaWRnZS5oPgorI2luY2x1ZGUgPGRybS9kcm1fbWlwaV9kc2kuaD4KKworc3RydWN0IG53
bF9kc2lfcGxhdGZvcm1fZGF0YTsKKworLyogaS5NWDggTldMIHF1aXJrcyAqLworLyogaS5NWDhN
USBlcnJhdGEgRTExNDE4ICovCisjZGVmaW5lIEUxMTQxOF9IU19NT0RFX1FVSVJLCSAgICBCSVQo
MCkKKy8qIFNraXAgRFNJIGJpdHMgaW4gU1JDIG9uIGRpc2FibGUgdG8gYXZvaWQgYmxhbmsgZGlz
cGxheSBvbiBlbmFibGUgKi8KKyNkZWZpbmUgU1JDX1JFU0VUX1FVSVJLCQkgICAgQklUKDEpCisK
KyNkZWZpbmUgTldMX0RTSV9NQVhfUExBVEZPUk1fQ0xPQ0tTIDEKK3N0cnVjdCBud2xfZHNpX3Bs
YXRfY2xrX2NvbmZpZyB7CisJY29uc3QgY2hhciAqaWQ7CisJc3RydWN0IGNsayAqY2xrOworCWJv
b2wgcHJlc2VudDsKK307CisKK3N0cnVjdCBud2xfZHNpIHsKKwlzdHJ1Y3QgZHJtX2JyaWRnZSBi
cmlkZ2U7CisJc3RydWN0IG1pcGlfZHNpX2hvc3QgZHNpX2hvc3Q7CisJc3RydWN0IGRybV9icmlk
Z2UgKnBhbmVsX2JyaWRnZTsKKwlzdHJ1Y3QgZGV2aWNlICpkZXY7CisJc3RydWN0IHBoeSAqcGh5
OworCXVuaW9uIHBoeV9jb25maWd1cmVfb3B0cyBwaHlfY2ZnOworCXVuc2lnbmVkIGludCBxdWly
a3M7CisKKwlzdHJ1Y3QgcmVnbWFwICpyZWdtYXA7CisJaW50IGlycTsKKwlzdHJ1Y3QgcmVzZXRf
Y29udHJvbCAqcnN0YzsKKwlzdHJ1Y3QgbXV4X2NvbnRyb2wgKm11eDsKKworCS8qIERTSSBjbG9j
a3MgKi8KKwlzdHJ1Y3QgY2xrICpwaHlfcmVmX2NsazsKKwlzdHJ1Y3QgY2xrICpyeF9lc2NfY2xr
OworCXN0cnVjdCBjbGsgKnR4X2VzY19jbGs7CisJLyogUGxhdGZvcm0gZGVwZW5kZW50IGNsb2Nr
cyAqLworCXN0cnVjdCBud2xfZHNpX3BsYXRfY2xrX2NvbmZpZyBjbGtfY29uZmlnW05XTF9EU0lf
TUFYX1BMQVRGT1JNX0NMT0NLU107CisKKwkvKiBkc2kgbGFuZXMgKi8KKwl1MzIgbGFuZXM7CisJ
ZW51bSBtaXBpX2RzaV9waXhlbF9mb3JtYXQgZm9ybWF0OworCXN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlIG1vZGU7CisJdW5zaWduZWQgbG9uZyBkc2lfbW9kZV9mbGFnczsKKworCXN0cnVjdCBud2xf
ZHNpX3RyYW5zZmVyICp4ZmVyOworCisJY29uc3Qgc3RydWN0IG53bF9kc2lfcGxhdGZvcm1fZGF0
YSAqcGRhdGE7Cit9OworCisjZW5kaWYgLyogX19OV0xfRFJWX0hfXyAqLwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpL253bC1kc2kuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9icmlkZ2UvbndsLWRzaS9ud2wtZHNpLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAw
MDAwMDAwMDAwLi4zYjVhNTE2M2UxMDcKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vYnJpZGdlL253bC1kc2kvbndsLWRzaS5jCkBAIC0wLDAgKzEsNjk5IEBACisvLyBTUERYLUxp
Y2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCsKKy8qCisgKiBOV0wgTUlQSSBEU0kgaG9zdCBkcml2
ZXIKKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMTcgTlhQCisgKiBDb3B5cmlnaHQgKEMpIDIwMTkg
UHVyaXNtIFNQQworICovCisKKyNpbmNsdWRlIDxsaW51eC9iaXRmaWVsZC5oPgorI2luY2x1ZGUg
PGxpbnV4L2Nsay5oPgorI2luY2x1ZGUgPGxpbnV4L2lycS5oPgorI2luY2x1ZGUgPGxpbnV4L3Jl
Z21hcC5oPgorI2luY2x1ZGUgPGxpbnV4L3RpbWU2NC5oPgorCisjaW5jbHVkZSA8dmlkZW8vbWlw
aV9kaXNwbGF5Lmg+CisjaW5jbHVkZSA8dmlkZW8vdmlkZW9tb2RlLmg+CisKKyNpbmNsdWRlIDxk
cm0vZHJtX2F0b21pY19oZWxwZXIuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2NydGNfaGVscGVyLmg+
CisjaW5jbHVkZSA8ZHJtL2RybV9vZi5oPgorI2luY2x1ZGUgPGRybS9kcm1fcGFuZWwuaD4KKyNp
bmNsdWRlIDxkcm0vZHJtX3ByaW50Lmg+CisKKyNpbmNsdWRlICJud2wtZHJ2LmgiCisjaW5jbHVk
ZSAibndsLWRzaS5oIgorCisjZGVmaW5lIE5XTF9EU0lfTUlQSV9GSUZPX1RJTUVPVVQgbXNlY3Nf
dG9famlmZmllcyg1MDApCisKKy8qCisgKiBQS1RfQ09OVFJPTCBmb3JtYXQ6CisgKiBbMTU6IDBd
IC0gd29yZCBjb3VudAorICogWzE3OjE2XSAtIHZpcnR1YWwgY2hhbm5lbAorICogWzIzOjE4XSAt
IGRhdGEgdHlwZQorICogWzI0XQkgICAtIExQIG9yIEhTIHNlbGVjdCAoMCAtIExQLCAxIC0gSFMp
CisgKiBbMjVdCSAgIC0gcGVyZm9ybSBCVEEgYWZ0ZXIgcGFja2V0IGlzIHNlbnQKKyAqIFsyNl0J
ICAgLSBwZXJmb3JtIEJUQSBvbmx5LCBubyBwYWNrZXQgdHgKKyAqLworI2RlZmluZSBOV0xfRFNJ
X1dDKHgpCQlGSUVMRF9QUkVQKEdFTk1BU0soMTUsIDApLCAoeCkpCisjZGVmaW5lIE5XTF9EU0lf
VFhfVkMoeCkJRklFTERfUFJFUChHRU5NQVNLKDE3LCAxNiksICh4KSkKKyNkZWZpbmUgTldMX0RT
SV9UWF9EVCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjMsIDE4KSwgKHgpKQorI2RlZmluZSBOV0xf
RFNJX0hTX1NFTCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjQsIDI0KSwgKHgpKQorI2RlZmluZSBO
V0xfRFNJX0JUQV9UWCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjUsIDI1KSwgKHgpKQorI2RlZmlu
ZSBOV0xfRFNJX0JUQV9OT19UWCh4KQlGSUVMRF9QUkVQKEdFTk1BU0soMjYsIDI2KSwgKHgpKQor
CisvKgorICogUlhfUEtUX0hFQURFUiBmb3JtYXQ6CisgKiBbMTU6IDBdIC0gd29yZCBjb3VudAor
ICogWzIxOjE2XSAtIGRhdGEgdHlwZQorICogWzIzOjIyXSAtIHZpcnR1YWwgY2hhbm5lbAorICov
CisjZGVmaW5lIE5XTF9EU0lfUlhfRFQoeCkJRklFTERfR0VUKEdFTk1BU0soMjEsIDE2KSwgKHgp
KQorI2RlZmluZSBOV0xfRFNJX1JYX1ZDKHgpCUZJRUxEX0dFVChHRU5NQVNLKDIzLCAyMiksICh4
KSkKKworLyogRFNJIFZpZGVvIG1vZGUgKi8KKyNkZWZpbmUgTldMX0RTSV9WTV9CVVJTVF9NT0RF
X1dJVEhfU1lOQ19QVUxTRVMJCTAKKyNkZWZpbmUgTldMX0RTSV9WTV9OT05fQlVSU1RfTU9ERV9X
SVRIX1NZTkNfRVZFTlRTCUJJVCgwKQorI2RlZmluZSBOV0xfRFNJX1ZNX0JVUlNUX01PREUJCQkJ
QklUKDEpCisKKy8qICogRFBJIGNvbG9yIGNvZGluZyAqLworI2RlZmluZSBOV0xfRFNJX0RQSV8x
Nl9CSVRfNTY1X1BBQ0tFRAkwCisjZGVmaW5lIE5XTF9EU0lfRFBJXzE2X0JJVF81NjVfQUxJR05F
RAkxCisjZGVmaW5lIE5XTF9EU0lfRFBJXzE2X0JJVF81NjVfU0hJRlRFRAkyCisjZGVmaW5lIE5X
TF9EU0lfRFBJXzE4X0JJVF9QQUNLRUQJMworI2RlZmluZSBOV0xfRFNJX0RQSV8xOF9CSVRfQUxJ
R05FRAk0CisjZGVmaW5lIE5XTF9EU0lfRFBJXzI0X0JJVAkJNQorCisvKiAqIERQSSBQaXhlbCBm
b3JtYXQgKi8KKyNkZWZpbmUgTldMX0RTSV9QSVhFTF9GT1JNQVRfMTYgIDAKKyNkZWZpbmUgTldM
X0RTSV9QSVhFTF9GT1JNQVRfMTggIEJJVCgwKQorI2RlZmluZSBOV0xfRFNJX1BJWEVMX0ZPUk1B
VF8xOEwgQklUKDEpCisjZGVmaW5lIE5XTF9EU0lfUElYRUxfRk9STUFUXzI0ICAoQklUKDApIHwg
QklUKDEpKQorCitlbnVtIHRyYW5zZmVyX2RpcmVjdGlvbiB7CisJRFNJX1BBQ0tFVF9TRU5ELAor
CURTSV9QQUNLRVRfUkVDRUlWRSwKK307CisKK3N0cnVjdCBud2xfZHNpX3RyYW5zZmVyIHsKKwlj
b25zdCBzdHJ1Y3QgbWlwaV9kc2lfbXNnICptc2c7CisJc3RydWN0IG1pcGlfZHNpX3BhY2tldCBw
YWNrZXQ7CisJc3RydWN0IGNvbXBsZXRpb24gY29tcGxldGVkOworCisJaW50IHN0YXR1czsgLyog
c3RhdHVzIG9mIHRyYW5zbWlzc2lvbiAqLworCWVudW0gdHJhbnNmZXJfZGlyZWN0aW9uIGRpcmVj
dGlvbjsKKwlib29sIG5lZWRfYnRhOworCXU4IGNtZDsKKwl1MTYgcnhfd29yZF9jb3VudDsKKwlz
aXplX3QgdHhfbGVuOyAvKiBpbiBieXRlcyAqLworCXNpemVfdCByeF9sZW47IC8qIGluIGJ5dGVz
ICovCit9OworCitzdGF0aWMgaW50IG53bF9kc2lfd3JpdGUoc3RydWN0IG53bF9kc2kgKmRzaSwg
dW5zaWduZWQgaW50IHJlZywgdTMyIHZhbCkKK3sKKwlpbnQgcmV0OworCisJcmV0ID0gcmVnbWFw
X3dyaXRlKGRzaS0+cmVnbWFwLCByZWcsIHZhbCk7CisJaWYgKHJldCA8IDApCisJCURSTV9ERVZf
RVJST1IoZHNpLT5kZXYsCisJCQkgICAgICAiRmFpbGVkIHRvIHdyaXRlIE5XTCBEU0kgcmVnIDB4
JXg6ICVkXG4iLCByZWcsCisJCQkgICAgICByZXQpOworCXJldHVybiByZXQ7Cit9CisKK3N0YXRp
YyB1MzIgbndsX2RzaV9yZWFkKHN0cnVjdCBud2xfZHNpICpkc2ksIHUzMiByZWcpCit7CisJdW5z
aWduZWQgaW50IHZhbDsKKwlpbnQgcmV0OworCisJcmV0ID0gcmVnbWFwX3JlYWQoZHNpLT5yZWdt
YXAsIHJlZywgJnZhbCk7CisJaWYgKHJldCA8IDApCisJCURSTV9ERVZfRVJST1IoZHNpLT5kZXYs
ICJGYWlsZWQgdG8gcmVhZCBOV0wgRFNJIHJlZyAweCV4OiAlZFxuIiwKKwkJCSAgICAgIHJlZywg
cmV0KTsKKworCXJldHVybiB2YWw7Cit9CisKK3N0YXRpYyB1MzIgbndsX2RzaV9nZXRfZHBpX3Bp
eGVsX2Zvcm1hdChlbnVtIG1pcGlfZHNpX3BpeGVsX2Zvcm1hdCBmb3JtYXQpCit7CisJc3dpdGNo
IChmb3JtYXQpIHsKKwljYXNlIE1JUElfRFNJX0ZNVF9SR0I1NjU6CisJCXJldHVybiBOV0xfRFNJ
X1BJWEVMX0ZPUk1BVF8xNjsKKwljYXNlIE1JUElfRFNJX0ZNVF9SR0I2NjY6CisJCXJldHVybiBO
V0xfRFNJX1BJWEVMX0ZPUk1BVF8xOEw7CisJY2FzZSBNSVBJX0RTSV9GTVRfUkdCNjY2X1BBQ0tF
RDoKKwkJcmV0dXJuIE5XTF9EU0lfUElYRUxfRk9STUFUXzE4OworCWNhc2UgTUlQSV9EU0lfRk1U
X1JHQjg4ODoKKwkJcmV0dXJuIE5XTF9EU0lfUElYRUxfRk9STUFUXzI0OworCWRlZmF1bHQ6CisJ
CXJldHVybiAtRUlOVkFMOworCX0KK30KKworI2RlZmluZSBQU0VDX1BFUl9TRUMgMTAwMDAwMDAw
MDAwMExMCisvKgorICogcHMyYmMgLSBQaWNvc2Vjb25kcyB0byBieXRlIGNsb2NrIGN5Y2xlcwor
ICovCitzdGF0aWMgdTMyIHBzMmJjKHN0cnVjdCBud2xfZHNpICpkc2ksIHVuc2lnbmVkIGxvbmcg
bG9uZyBwcykKK3sKKwlpbnQgYnBwID0gbWlwaV9kc2lfcGl4ZWxfZm9ybWF0X3RvX2JwcChkc2kt
PmZvcm1hdCk7CisKKwlyZXR1cm4gRElWX1JPVU5EX1VQKHBzICogZHNpLT5tb2RlLmNsb2NrICog
MTAwMCAqIGJwcCwKKwkJCSAgICBkc2ktPmxhbmVzICogOCAqIFBTRUNfUEVSX1NFQyk7Cit9CisK
Ky8qCisgKiB1aTJiYyAtIFVJIHRpbWUgcGVyaW9kcyB0byBieXRlIGNsb2NrIGN5Y2xlcworICov
CitzdGF0aWMgdTMyIHVpMmJjKHN0cnVjdCBud2xfZHNpICpkc2ksIHVuc2lnbmVkIGxvbmcgbG9u
ZyB1aSkKK3sKKwlpbnQgYnBwID0gbWlwaV9kc2lfcGl4ZWxfZm9ybWF0X3RvX2JwcChkc2ktPmZv
cm1hdCk7CisKKwlyZXR1cm4gRElWX1JPVU5EX1VQKHVpICogZHNpLT5sYW5lcywgZHNpLT5tb2Rl
LmNsb2NrICogMTAwMCAqIGJwcCk7Cit9CisKKy8qCisgKiB1czJiYyAtIG1pY3JvIHNlY29uZHMg
dG8gbHAgY2xvY2sgY3ljbGVzCisgKi8KK3N0YXRpYyB1MzIgdXMybHAodTMyIGxwX2Nsa19yYXRl
LCB1bnNpZ25lZCBsb25nIHVzKQoreworCXJldHVybiBESVZfUk9VTkRfVVAodXMgKiBscF9jbGtf
cmF0ZSwgVVNFQ19QRVJfU0VDKTsKK30KKworc3RhdGljIGludCBud2xfZHNpX2NvbmZpZ19ob3N0
KHN0cnVjdCBud2xfZHNpICpkc2kpCit7CisJdTMyIGN5Y2xlczsKKwlzdHJ1Y3QgcGh5X2NvbmZp
Z3VyZV9vcHRzX21pcGlfZHBoeSAqY2ZnID0gJmRzaS0+cGh5X2NmZy5taXBpX2RwaHk7CisKKwlp
ZiAoZHNpLT5sYW5lcyA8IDEgfHwgZHNpLT5sYW5lcyA+IDQpCisJCXJldHVybiAtRUlOVkFMOwor
CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJEU0kgTGFuZXMgJWRcbiIsIGRzaS0+
bGFuZXMpOworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NGR19OVU1fTEFORVMsIGRzaS0+
bGFuZXMgLSAxKTsKKworCWlmIChkc2ktPmRzaV9tb2RlX2ZsYWdzICYgTUlQSV9EU0lfQ0xPQ0tf
Tk9OX0NPTlRJTlVPVVMpIHsKKwkJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfQ0ZHX05PTkNP
TlRJTlVPVVNfQ0xLLCAweDAxKTsKKwkJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfQ0ZHX0FV
VE9JTlNFUlRfRU9UUCwgMHgwMSk7CisJfSBlbHNlIHsKKwkJbndsX2RzaV93cml0ZShkc2ksIE5X
TF9EU0lfQ0ZHX05PTkNPTlRJTlVPVVNfQ0xLLCAweDAwKTsKKwkJbndsX2RzaV93cml0ZShkc2ks
IE5XTF9EU0lfQ0ZHX0FVVE9JTlNFUlRfRU9UUCwgMHgwMCk7CisJfQorCisJLyogdmFsdWVzIGlu
IGJ5dGUgY2xvY2sgY3ljbGVzICovCisJY3ljbGVzID0gdWkyYmMoZHNpLCBjZmctPmNsa19wcmUp
OworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiY2ZnX3RfcHJlOiAweCV4XG4iLCBj
eWNsZXMpOworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NGR19UX1BSRSwgY3ljbGVzKTsK
KwljeWNsZXMgPSBwczJiYyhkc2ksIGNmZy0+bHB4ICsgY2ZnLT5jbGtfcHJlcGFyZSArIGNmZy0+
Y2xrX3plcm8pOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiY2ZnX3R4X2dhcCAo
cHJlKTogMHgleFxuIiwgY3ljbGVzKTsKKwljeWNsZXMgKz0gdWkyYmMoZHNpLCBjZmctPmNsa19w
cmUpOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAiY2ZnX3R4X2dhcDogMHgleFxu
IiwgY3ljbGVzKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfVF9QT1NULCBjeWNs
ZXMpOworCWN5Y2xlcyA9IHBzMmJjKGRzaSwgY2ZnLT5oc19leGl0KTsKKwlEUk1fREVWX0RFQlVH
X0RSSVZFUihkc2ktPmRldiwgImNmZ190eF9nYXA6IDB4JXhcbiIsIGN5Y2xlcyk7CisJbndsX2Rz
aV93cml0ZShkc2ksIE5XTF9EU0lfQ0ZHX1RYX0dBUCwgY3ljbGVzKTsKKworCW53bF9kc2lfd3Jp
dGUoZHNpLCBOV0xfRFNJX0NGR19FWFRSQV9DTURTX0FGVEVSX0VPVFAsIDB4MDEpOworCW53bF9k
c2lfd3JpdGUoZHNpLCBOV0xfRFNJX0NGR19IVFhfVE9fQ09VTlQsIDB4MDApOworCW53bF9kc2lf
d3JpdGUoZHNpLCBOV0xfRFNJX0NGR19MUlhfSF9UT19DT1VOVCwgMHgwMCk7CisJbndsX2RzaV93
cml0ZShkc2ksIE5XTF9EU0lfQ0ZHX0JUQV9IX1RPX0NPVU5ULCAweDAwKTsKKwkvKiBJbiBMUCBj
bG9jayBjeWNsZXMgKi8KKwljeWNsZXMgPSB1czJscChjZmctPmxwX2Nsa19yYXRlLCBjZmctPndh
a2V1cCk7CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJjZmdfdHdha2V1cDogMHgl
eFxuIiwgY3ljbGVzKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9DRkdfVFdBS0VVUCwg
Y3ljbGVzKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IG53bF9kc2lfY29uZmlnX2Rw
aShzdHJ1Y3QgbndsX2RzaSAqZHNpKQoreworCXUzMiBjb2xvcl9mb3JtYXQsIG1vZGU7CisJYm9v
bCBidXJzdF9tb2RlOworCWludCBoZnJvbnRfcG9yY2gsIGhiYWNrX3BvcmNoLCB2ZnJvbnRfcG9y
Y2gsIHZiYWNrX3BvcmNoOworCWludCBoc3luY19sZW4sIHZzeW5jX2xlbjsKKworCWhmcm9udF9w
b3JjaCA9IGRzaS0+bW9kZS5oc3luY19zdGFydCAtIGRzaS0+bW9kZS5oZGlzcGxheTsKKwloc3lu
Y19sZW4gPSBkc2ktPm1vZGUuaHN5bmNfZW5kIC0gZHNpLT5tb2RlLmhzeW5jX3N0YXJ0OworCWhi
YWNrX3BvcmNoID0gZHNpLT5tb2RlLmh0b3RhbCAtIGRzaS0+bW9kZS5oc3luY19lbmQ7CisKKwl2
ZnJvbnRfcG9yY2ggPSBkc2ktPm1vZGUudnN5bmNfc3RhcnQgLSBkc2ktPm1vZGUudmRpc3BsYXk7
CisJdnN5bmNfbGVuID0gZHNpLT5tb2RlLnZzeW5jX2VuZCAtIGRzaS0+bW9kZS52c3luY19zdGFy
dDsKKwl2YmFja19wb3JjaCA9IGRzaS0+bW9kZS52dG90YWwgLSBkc2ktPm1vZGUudnN5bmNfZW5k
OworCisJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNpLT5kZXYsICJoZnJvbnRfcG9yY2ggPSAlZFxu
IiwgaGZyb250X3BvcmNoKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgImhiYWNr
X3BvcmNoID0gJWRcbiIsIGhiYWNrX3BvcmNoKTsKKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2kt
PmRldiwgImhzeW5jX2xlbiA9ICVkXG4iLCBoc3luY19sZW4pOworCURSTV9ERVZfREVCVUdfRFJJ
VkVSKGRzaS0+ZGV2LCAiaGRpc3BsYXkgPSAlZFxuIiwgZHNpLT5tb2RlLmhkaXNwbGF5KTsKKwlE
Uk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgInZmcm9udF9wb3JjaCA9ICVkXG4iLCB2ZnJv
bnRfcG9yY2gpOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAidmJhY2tfcG9yY2gg
PSAlZFxuIiwgdmJhY2tfcG9yY2gpOworCURSTV9ERVZfREVCVUdfRFJJVkVSKGRzaS0+ZGV2LCAi
dnN5bmNfbGVuID0gJWRcbiIsIHZzeW5jX2xlbik7CisJRFJNX0RFVl9ERUJVR19EUklWRVIoZHNp
LT5kZXYsICJ2YWN0aXZlID0gJWRcbiIsIGRzaS0+bW9kZS52ZGlzcGxheSk7CisJRFJNX0RFVl9E
RUJVR19EUklWRVIoZHNpLT5kZXYsICJjbG9jayA9ICVkIGtIelxuIiwgZHNpLT5tb2RlLmNsb2Nr
KTsKKworCWNvbG9yX2Zvcm1hdCA9IG53bF9kc2lfZ2V0X2RwaV9waXhlbF9mb3JtYXQoZHNpLT5m
b3JtYXQpOworCWlmIChjb2xvcl9mb3JtYXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZHNpLT5k
ZXYsICJJbnZhbGlkIGNvbG9yIGZvcm1hdCAweCV4XG4iLAorCQkJICAgICAgZHNpLT5mb3JtYXQp
OworCQlyZXR1cm4gY29sb3JfZm9ybWF0OworCX0KKwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2kt
PmRldiwgInBpeGVsIGZtdCA9ICVkXG4iLCBkc2ktPmZvcm1hdCk7CisKKwlud2xfZHNpX3dyaXRl
KGRzaSwgTldMX0RTSV9JTlRFUkZBQ0VfQ09MT1JfQ09ESU5HLCBOV0xfRFNJX0RQSV8yNF9CSVQp
OworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1BJWEVMX0ZPUk1BVCwgY29sb3JfZm9ybWF0
KTsKKwkvKgorCSAqIEFkanVzdGluZyBpbnB1dCBwb2xhcml0eSBiYXNlZCBvbiB0aGUgdmlkZW8g
bW9kZSByZXN1bHRzIGluCisJICogYSBibGFjayBzY3JlZW4gc28gYWx3YXlzIHBpY2sgYWN0aXZl
IGxvdzoKKwkgKi8KKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9WU1lOQ19QT0xBUklUWSwK
KwkJICAgICAgTldMX0RTSV9WU1lOQ19QT0xBUklUWV9BQ1RJVkVfTE9XKTsKKwlud2xfZHNpX3dy
aXRlKGRzaSwgTldMX0RTSV9IU1lOQ19QT0xBUklUWSwKKwkJICAgICAgTldMX0RTSV9IU1lOQ19Q
T0xBUklUWV9BQ1RJVkVfTE9XKTsKKworCWJ1cnN0X21vZGUgPSAoZHNpLT5kc2lfbW9kZV9mbGFn
cyAmIE1JUElfRFNJX01PREVfVklERU9fQlVSU1QpICYmCisJCSAgICAgIShkc2ktPmRzaV9tb2Rl
X2ZsYWdzICYgTUlQSV9EU0lfTU9ERV9WSURFT19TWU5DX1BVTFNFKTsKKworCWlmIChidXJzdF9t
b2RlKSB7CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1ZJREVPX01PREUsIE5XTF9EU0lf
Vk1fQlVSU1RfTU9ERSk7CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1BJWEVMX0ZJRk9f
U0VORF9MRVZFTCwgMjU2KTsKKwl9IGVsc2UgeworCQltb2RlID0gKChkc2ktPmRzaV9tb2RlX2Zs
YWdzICYgTUlQSV9EU0lfTU9ERV9WSURFT19TWU5DX1BVTFNFKSA/CisJCQkJTldMX0RTSV9WTV9C
VVJTVF9NT0RFX1dJVEhfU1lOQ19QVUxTRVMgOgorCQkJCU5XTF9EU0lfVk1fTk9OX0JVUlNUX01P
REVfV0lUSF9TWU5DX0VWRU5UUyk7CisJCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX1ZJREVP
X01PREUsIG1vZGUpOworCQlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9QSVhFTF9GSUZPX1NF
TkRfTEVWRUwsCisJCQkgICAgICBkc2ktPm1vZGUuaGRpc3BsYXkpOworCX0KKworCW53bF9kc2lf
d3JpdGUoZHNpLCBOV0xfRFNJX0hGUCwgaGZyb250X3BvcmNoKTsKKwlud2xfZHNpX3dyaXRlKGRz
aSwgTldMX0RTSV9IQlAsIGhiYWNrX3BvcmNoKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RT
SV9IU0EsIGhzeW5jX2xlbik7CisKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9FTkFCTEVf
TVVMVF9QS1RTLCAweDApOworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0JMTFBfTU9ERSwg
MHgxKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9VU0VfTlVMTF9QS1RfQkxMUCwgMHgw
KTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9WQywgMHgwKTsKKworCW53bF9kc2lfd3Jp
dGUoZHNpLCBOV0xfRFNJX1BJWEVMX1BBWUxPQURfU0laRSwgZHNpLT5tb2RlLmhkaXNwbGF5KTsK
Kwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9WQUNUSVZFLCBkc2ktPm1vZGUudmRpc3BsYXkg
LSAxKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9WQlAsIHZiYWNrX3BvcmNoKTsKKwlu
d2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9WRlAsIHZmcm9udF9wb3JjaCk7CisKKwlyZXR1cm4g
MDsKK30KKworc3RhdGljIHZvaWQgbndsX2RzaV9pbml0X2ludGVycnVwdHMoc3RydWN0IG53bF9k
c2kgKmRzaSkKK3sKKwl1MzIgaXJxX2VuYWJsZTsKKworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xf
RFNJX0lSUV9NQVNLLCAweGZmZmZmZmZmKTsKKwlud2xfZHNpX3dyaXRlKGRzaSwgTldMX0RTSV9J
UlFfTUFTSzIsIDB4Nyk7CisKKwlpcnFfZW5hYmxlID0gfih1MzIpKE5XTF9EU0lfVFhfUEtUX0RP
TkVfTUFTSyB8CisJCQkgICAgTldMX0RTSV9SWF9QS1RfSERSX1JDVkRfTUFTSyB8CisJCQkgICAg
TldMX0RTSV9UWF9GSUZPX09WRkxXX01BU0sgfAorCQkJICAgIE5XTF9EU0lfSFNfVFhfVElNRU9V
VF9NQVNLKTsKKworCW53bF9kc2lfd3JpdGUoZHNpLCBOV0xfRFNJX0lSUV9NQVNLLCBpcnFfZW5h
YmxlKTsKK30KKworc3RhdGljIGludCBud2xfZHNpX2hvc3RfYXR0YWNoKHN0cnVjdCBtaXBpX2Rz
aV9ob3N0ICpkc2lfaG9zdCwKKwkJCSAgICAgICBzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpkZXZp
Y2UpCit7CisJc3RydWN0IG53bF9kc2kgKmRzaSA9IGNvbnRhaW5lcl9vZihkc2lfaG9zdCwgc3Ry
dWN0IG53bF9kc2ksIGRzaV9ob3N0KTsKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSBkc2ktPmRldjsK
KwlzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlOworCXN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsOwor
CWludCByZXQ7CisKKwlEUk1fREVWX0lORk8oZGV2LCAibGFuZXM9JXUsIGZvcm1hdD0weCV4IGZs
YWdzPTB4JWx4XG4iLCBkZXZpY2UtPmxhbmVzLAorCQkgICAgIGRldmljZS0+Zm9ybWF0LCBkZXZp
Y2UtPm1vZGVfZmxhZ3MpOworCisJaWYgKGRldmljZS0+bGFuZXMgPCAxIHx8IGRldmljZS0+bGFu
ZXMgPiA0KQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWRzaS0+bGFuZXMgPSBkZXZpY2UtPmxhbmVz
OworCWRzaS0+Zm9ybWF0ID0gZGV2aWNlLT5mb3JtYXQ7CisJZHNpLT5kc2lfbW9kZV9mbGFncyA9
IGRldmljZS0+bW9kZV9mbGFnczsKKworCXJldCA9IGRybV9vZl9maW5kX3BhbmVsX29yX2JyaWRn
ZShkc2ktPmRldi0+b2Zfbm9kZSwgMSwgMCwgJnBhbmVsLAorCQkJCQkgICZicmlkZ2UpOworCWlm
IChyZXQpCisJCXJldHVybiByZXQ7CisKKwlpZiAocGFuZWwpIHsKKwkJYnJpZGdlID0gZHJtX3Bh
bmVsX2JyaWRnZV9hZGQocGFuZWwsIERSTV9NT0RFX0NPTk5FQ1RPUl9EU0kpOworCQlpZiAoSVNf
RVJSKGJyaWRnZSkpCisJCQlyZXR1cm4gUFRSX0VSUihicmlkZ2UpOworCX0KKworCWRzaS0+cGFu
ZWxfYnJpZGdlID0gYnJpZGdlOworCWRybV9icmlkZ2VfYWRkKCZkc2ktPmJyaWRnZSk7CisKKwly
ZXR1cm4gMDsKK30KKworc3RhdGljIGludCBud2xfZHNpX2hvc3RfZGV0YWNoKHN0cnVjdCBtaXBp
X2RzaV9ob3N0ICpkc2lfaG9zdCwKKwkJCSAgICAgICBzdHJ1Y3QgbWlwaV9kc2lfZGV2aWNlICpk
ZXZpY2UpCit7CisJc3RydWN0IG53bF9kc2kgKmRzaSA9IGNvbnRhaW5lcl9vZihkc2lfaG9zdCwg
c3RydWN0IG53bF9kc2ksIGRzaV9ob3N0KTsKKworCWRybV9vZl9wYW5lbF9icmlkZ2VfcmVtb3Zl
KGRzaS0+ZGV2LT5vZl9ub2RlLCAxLCAwKTsKKwlkcm1fYnJpZGdlX3JlbW92ZSgmZHNpLT5icmlk
Z2UpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBib29sIG53bF9kc2lfcmVhZF9wYWNrZXQo
c3RydWN0IG53bF9kc2kgKmRzaSwgdTMyIHN0YXR1cykKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYg
PSBkc2ktPmRldjsKKwlzdHJ1Y3QgbndsX2RzaV90cmFuc2ZlciAqeGZlciA9IGRzaS0+eGZlcjsK
Kwl1OCAqcGF5bG9hZCA9IHhmZXItPm1zZy0+cnhfYnVmOworCXUzMiB2YWw7CisJdTE2IHdvcmRf
Y291bnQ7CisJdTggY2hhbm5lbDsKKwl1OCBkYXRhX3R5cGU7CisKKwl4ZmVyLT5zdGF0dXMgPSAw
OworCisJaWYgKHhmZXItPnJ4X3dvcmRfY291bnQgPT0gMCkgeworCQlpZiAoIShzdGF0dXMgJiBO
V0xfRFNJX1JYX1BLVF9IRFJfUkNWRCkpCisJCQlyZXR1cm4gZmFsc2U7CisJCS8qIEdldCB0aGUg
UlggaGVhZGVyIGFuZCBwYXJzZSBpdCAqLworCQl2YWwgPSBud2xfZHNpX3JlYWQoZHNpLCBOV0xf
RFNJX1JYX1BLVF9IRUFERVIpOworCQl3b3JkX2NvdW50ID0gTldMX0RTSV9XQyh2YWwpOworCQlj
aGFubmVsID0gTldMX0RTSV9SWF9WQyh2YWwpOworCQlkYXRhX3R5cGUgPSBOV0xfRFNJX1JYX0RU
KHZhbCk7CisKKwkJaWYgKGNoYW5uZWwgIT0geGZlci0+bXNnLT5jaGFubmVsKSB7CisJCQlEUk1f
REVWX0VSUk9SKGRldiwKKwkJCQkgICAgICAiWyUwMlhdIENoYW5uZWwgbWlzbWF0Y2ggKCV1ICE9
ICV1KVxuIiwKKwkJCQkgICAgICB4ZmVyLT5jbWQsIGNoYW5uZWwsIHhmZXItPm1zZy0+Y2hhbm5l
bCk7CisJCQlyZXR1cm4gdHJ1ZTsKKwkJfQorCisJCXN3aXRjaCAoZGF0YV90eXBlKSB7CisJCWNh
c2UgTUlQSV9EU0lfUlhfR0VORVJJQ19TSE9SVF9SRUFEX1JFU1BPTlNFXzJCWVRFOgorCQkJLyog
RmFsbCB0aHJvdWdoICovCisJCWNhc2UgTUlQSV9EU0lfUlhfRENTX1NIT1JUX1JFQURfUkVTUE9O
U0VfMkJZVEU6CisJCQlpZiAoeGZlci0+bXNnLT5yeF9sZW4gPiAxKSB7CisJCQkJLyogcmVhZCBz
ZWNvbmQgYnl0ZSAqLworCQkJCXBheWxvYWRbMV0gPSB3b3JkX2NvdW50ID4+IDg7CisJCQkJKyt4
ZmVyLT5yeF9sZW47CisJCQl9CisJCQkvKiBGYWxsIHRocm91Z2ggKi8KKwkJY2FzZSBNSVBJX0RT
SV9SWF9HRU5FUklDX1NIT1JUX1JFQURfUkVTUE9OU0VfMUJZVEU6CisJCQkvKiBGYWxsIHRocm91
Z2ggKi8KKwkJY2FzZSBNSVBJX0RTSV9SWF9EQ1NfU0hPUlRfUkVBRF9SRVNQT05TRV8xQllURToK
KwkJCWlmICh4ZmVyLT5tc2ctPnJ4X2xlbiA+IDApIHsKKwkJCQkvKiByZWFkIGZpcnN0IGJ5dGUg
Ki8KKwkJCQlwYXlsb2FkWzBdID0gd29yZF9jb3VudCAmIDB4ZmY7CisJCQkJKyt4ZmVyLT5yeF9s
ZW47CisJCQl9CisJCQl4ZmVyLT5zdGF0dXMgPSB4ZmVyLT5yeF9sZW47CisJCQlyZXR1cm4gdHJ1
ZTsKKwkJY2FzZSBNSVBJX0RTSV9SWF9BQ0tOT1dMRURHRV9BTkRfRVJST1JfUkVQT1JUOgorCQkJ
d29yZF9jb3VudCAmPSAweGZmOworCQkJRFJNX0RFVl9FUlJPUihkZXYsICJbJTAyWF0gRFNJIGVy
cm9yIHJlcG9ydDogMHglMDJ4XG4iLAorCQkJCSAgICAgIHhmZXItPmNtZCwgd29yZF9jb3VudCk7
CisJCQl4ZmVyLT5zdGF0dXMgPSAtRVBST1RPOworCQkJcmV0dXJuIHRydWU7CisJCX0KKworCQlp
ZiAod29yZF9jb3VudCA+IHhmZXItPm1zZy0+cnhfbGVuKSB7CisJCQlEUk1fREVWX0VSUk9SKAor
CQkJCWRldiwKKwkJCQkiWyUwMlhdIFJlY2VpdmUgYnVmZmVyIHRvbyBzbWFsbDogJWx1ICg8ICV1
KVxuIiwKKwkJCQl4ZmVyLT5jbWQsIHhmZXItPm1zZy0+cnhfbGVuLCB3b3JkX2NvdW50KTsKKwkJ
CXJldHVybiB0cnVlOworCQl9CisKKwkJeGZlci0+cnhfd29yZF9jb3VudCA9IHdvcmRfY291bnQ7
CisJfSBlbHNlIHsKKwkJLyogU2V0IHdvcmRfY291bnQgZnJvbSBwcmV2aW91cyBoZWFkZXIgcmVh
ZCAqLworCQl3b3JkX2NvdW50ID0geGZlci0+cnhfd29yZF9jb3VudDsKKwl9CisKKwkvKiBJZiBS
WCBwYXlsb2FkIGlzIG5vdCB5ZXQgcmVjZWl2ZWQsIHdhaXQgZm9yIGl0ICovCisJaWYgKCEoc3Rh
dHVzICYgTldMX0RTSV9SWF9QS1RfUEFZTE9BRF9EQVRBX1JDVkQpKQorCQlyZXR1cm4gZmFsc2U7
CisKKwkvKiBSZWFkIHRoZSBSWCBwYXlsb2FkICovCisJd2hpbGUgKHdvcmRfY291bnQgPj0gNCkg
eworCQl2YWwgPSBud2xfZHNpX3JlYWQoZHNpLCBOV0xfRFNJX1JYX1BBWUxPQUQpOworCQlwYXls
b2FkWzBdID0gKHZhbCA+PiAwKSAmIDB4ZmY7CisJCXBheWxvYWRbMV0gPSAodmFsID4+IDgpICYg
MHhmZjsKKwkJcGF5bG9hZFsyXSA9ICh2YWwgPj4gMTYpICYgMHhmZjsKKwkJcGF5bG9hZFszXSA9
ICh2YWwgPj4gMjQpICYgMHhmZjsKKwkJcGF5bG9hZCArPSA0OworCQl4ZmVyLT5yeF9sZW4gKz0g
NDsKKwkJd29yZF9jb3VudCAtPSA0OworCX0KKworCWlmICh3b3JkX2NvdW50ID4gMCkgeworCQl2
YWwgPSBud2xfZHNpX3JlYWQoZHNpLCBOV0xfRFNJX1JYX1BBWUxPQUQpOworCQlzd2l0Y2ggKHdv
cmRfY291bnQpIHsKKwkJY2FzZSAzOgorCQkJcGF5bG9hZFsyXSA9ICh2YWwgPj4gMTYpICYgMHhm
ZjsKKwkJCSsreGZlci0+cnhfbGVuOworCQkJLyogRmFsbCB0aHJvdWdoICovCisJCWNhc2UgMjoK
KwkJCXBheWxvYWRbMV0gPSAodmFsID4+IDgpICYgMHhmZjsKKwkJCSsreGZlci0+cnhfbGVuOwor
CQkJLyogRmFsbCB0aHJvdWdoICovCisJCWNhc2UgMToKKwkJCXBheWxvYWRbMF0gPSAodmFsID4+
IDApICYgMHhmZjsKKwkJCSsreGZlci0+cnhfbGVuOworCQkJYnJlYWs7CisJCX0KKwl9CisKKwl4
ZmVyLT5zdGF0dXMgPSB4ZmVyLT5yeF9sZW47CisKKwlyZXR1cm4gdHJ1ZTsKK30KKworc3RhdGlj
IHZvaWQgbndsX2RzaV9maW5pc2hfdHJhbnNtaXNzaW9uKHN0cnVjdCBud2xfZHNpICpkc2ksIHUz
MiBzdGF0dXMpCit7CisJc3RydWN0IG53bF9kc2lfdHJhbnNmZXIgKnhmZXIgPSBkc2ktPnhmZXI7
CisJYm9vbCBlbmRfcGFja2V0ID0gZmFsc2U7CisKKwlpZiAoIXhmZXIpCisJCXJldHVybjsKKwor
CWlmIChzdGF0dXMgJiBOV0xfRFNJX1RYX0ZJRk9fT1ZGTFcpIHsKKwkJRFJNX0RFVl9FUlJPUl9S
QVRFTElNSVRFRChkc2ktPmRldiwgInR4IGZpZm8gb3ZlcmZsb3dcbiIpOworCQlyZXR1cm47CisJ
fQorCisJaWYgKHN0YXR1cyAmIE5XTF9EU0lfSFNfVFhfVElNRU9VVCkgeworCQlEUk1fREVWX0VS
Uk9SX1JBVEVMSU1JVEVEKGRzaS0+ZGV2LCAiSFMgdHggdGltZW91dFxuIik7CisJCXJldHVybjsK
Kwl9CisKKwlpZiAoeGZlci0+ZGlyZWN0aW9uID09IERTSV9QQUNLRVRfU0VORCAmJgorCSAgICBz
dGF0dXMgJiBOV0xfRFNJX1RYX1BLVF9ET05FKSB7CisJCXhmZXItPnN0YXR1cyA9IHhmZXItPnR4
X2xlbjsKKwkJZW5kX3BhY2tldCA9IHRydWU7CisJfSBlbHNlIGlmIChzdGF0dXMgJiBOV0xfRFNJ
X0RQSFlfRElSRUNUSU9OICYmCisJCSAgICgoc3RhdHVzICYgKE5XTF9EU0lfUlhfUEtUX0hEUl9S
Q1ZEIHwKKwkJCSAgICAgICBOV0xfRFNJX1JYX1BLVF9QQVlMT0FEX0RBVEFfUkNWRCkpKSkgewor
CQllbmRfcGFja2V0ID0gbndsX2RzaV9yZWFkX3BhY2tldChkc2ksIHN0YXR1cyk7CisJfQorCisJ
aWYgKGVuZF9wYWNrZXQpCisJCWNvbXBsZXRlKCZ4ZmVyLT5jb21wbGV0ZWQpOworfQorCitzdGF0
aWMgdm9pZCBud2xfZHNpX2JlZ2luX3RyYW5zbWlzc2lvbihzdHJ1Y3QgbndsX2RzaSAqZHNpKQor
eworCXN0cnVjdCBud2xfZHNpX3RyYW5zZmVyICp4ZmVyID0gZHNpLT54ZmVyOworCXN0cnVjdCBt
aXBpX2RzaV9wYWNrZXQgKnBrdCA9ICZ4ZmVyLT5wYWNrZXQ7CisJY29uc3QgdTggKnBheWxvYWQ7
CisJc2l6ZV90IGxlbmd0aDsKKwl1MTYgd29yZF9jb3VudDsKKwl1OCBoc19tb2RlOworCXUzMiB2
YWw7CisJdTMyIGhzX3dvcmthcm91bmQgPSAwOworCisJLyogU2VuZCB0aGUgcGF5bG9hZCwgaWYg
YW55ICovCisJbGVuZ3RoID0gcGt0LT5wYXlsb2FkX2xlbmd0aDsKKwlwYXlsb2FkID0gcGt0LT5w
YXlsb2FkOworCisJd2hpbGUgKGxlbmd0aCA+PSA0KSB7CisJCXZhbCA9ICoodTMyICopcGF5bG9h
ZDsKKwkJaHNfd29ya2Fyb3VuZCB8PSAhKHZhbCAmIDB4RkZGRjAwKTsKKwkJbndsX2RzaV93cml0
ZShkc2ksIE5XTF9EU0lfVFhfUEFZTE9BRCwgdmFsKTsKKwkJcGF5bG9hZCArPSA0OworCQlsZW5n
dGggLT0gNDsKKwl9CisJLyogU2VuZCB0aGUgcmVzdCBvZiB0aGUgcGF5bG9hZCAqLworCXZhbCA9
IDA7CisJc3dpdGNoIChsZW5ndGgpIHsKKwljYXNlIDM6CisJCXZhbCB8PSBwYXlsb2FkWzJdIDw8
IDE2OworCQkvKiBGYWxsIHRocm91Z2ggKi8KKwljYXNlIDI6CisJCXZhbCB8PSBwYXlsb2FkWzFd
IDw8IDg7CisJCWhzX3dvcmthcm91bmQgfD0gISh2YWwgJiAweEZGRkYwMCk7CisJCS8qIEZhbGwg
dGhyb3VnaCAqLworCWNhc2UgMToKKwkJdmFsIHw9IHBheWxvYWRbMF07CisJCW53bF9kc2lfd3Jp
dGUoZHNpLCBOV0xfRFNJX1RYX1BBWUxPQUQsIHZhbCk7CisJCWJyZWFrOworCX0KKwl4ZmVyLT50
eF9sZW4gPSBwa3QtPnBheWxvYWRfbGVuZ3RoOworCisJLyoKKwkgKiBTZW5kIHRoZSBoZWFkZXIK
KwkgKiBoZWFkZXJbMF0gPSBWaXJ0dWFsIENoYW5uZWwgKyBEYXRhIFR5cGUKKwkgKiBoZWFkZXJb
MV0gPSBXb3JkIENvdW50IExTQiAoTFApIG9yIGZpcnN0IHBhcmFtIChTUCkKKwkgKiBoZWFkZXJb
Ml0gPSBXb3JkIENvdW50IE1TQiAoTFApIG9yIHNlY29uZCBwYXJhbSAoU1ApCisJICovCisJd29y
ZF9jb3VudCA9IHBrdC0+aGVhZGVyWzFdIHwgKHBrdC0+aGVhZGVyWzJdIDw8IDgpOworCWlmICho
c193b3JrYXJvdW5kICYmIChkc2ktPnF1aXJrcyAmIEUxMTQxOF9IU19NT0RFX1FVSVJLKSkgewor
CQlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwKKwkJCQkgICAgICJVc2luZyBocyBtb2Rl
IHdvcmthcm91bmQgZm9yIGNtZCAweCV4XG4iLAorCQkJCSAgICAgeGZlci0+Y21kKTsKKwkJaHNf
bW9kZSA9IDE7CisJfSBlbHNlIHsKKwkJaHNfbW9kZSA9ICh4ZmVyLT5tc2ctPmZsYWdzICYgTUlQ
SV9EU0lfTVNHX1VTRV9MUE0pID8gMCA6IDE7CisJfQorCXZhbCA9IE5XTF9EU0lfV0Mod29yZF9j
b3VudCkgfCBOV0xfRFNJX1RYX1ZDKHhmZXItPm1zZy0+Y2hhbm5lbCkgfAorCSAgICAgIE5XTF9E
U0lfVFhfRFQoeGZlci0+bXNnLT50eXBlKSB8IE5XTF9EU0lfSFNfU0VMKGhzX21vZGUpIHwKKwkg
ICAgICBOV0xfRFNJX0JUQV9UWCh4ZmVyLT5uZWVkX2J0YSk7CisJbndsX2RzaV93cml0ZShkc2ks
IE5XTF9EU0lfUEtUX0NPTlRST0wsIHZhbCk7CisKKwkvKiBTZW5kIHBhY2tldCBjb21tYW5kICov
CisJbndsX2RzaV93cml0ZShkc2ksIE5XTF9EU0lfU0VORF9QQUNLRVQsIDB4MSk7Cit9CisKK3N0
YXRpYyBzc2l6ZV90IG53bF9kc2lfaG9zdF90cmFuc2ZlcihzdHJ1Y3QgbWlwaV9kc2lfaG9zdCAq
ZHNpX2hvc3QsCisJCQkJICAgICBjb25zdCBzdHJ1Y3QgbWlwaV9kc2lfbXNnICptc2cpCit7CisJ
c3RydWN0IG53bF9kc2kgKmRzaSA9IGNvbnRhaW5lcl9vZihkc2lfaG9zdCwgc3RydWN0IG53bF9k
c2ksIGRzaV9ob3N0KTsKKwlzdHJ1Y3QgbndsX2RzaV90cmFuc2ZlciB4ZmVyOworCXNzaXplX3Qg
cmV0ID0gMDsKKworCS8qIENyZWF0ZSBwYWNrZXQgdG8gYmUgc2VudCAqLworCWRzaS0+eGZlciA9
ICZ4ZmVyOworCXJldCA9IG1pcGlfZHNpX2NyZWF0ZV9wYWNrZXQoJnhmZXIucGFja2V0LCBtc2cp
OworCWlmIChyZXQgPCAwKSB7CisJCWRzaS0+eGZlciA9IE5VTEw7CisJCXJldHVybiByZXQ7CisJ
fQorCisJaWYgKChtc2ctPnR5cGUgJiBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8wX1BB
UkFNIHx8CisJICAgICBtc2ctPnR5cGUgJiBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8x
X1BBUkFNIHx8CisJICAgICBtc2ctPnR5cGUgJiBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVT
VF8yX1BBUkFNIHx8CisJICAgICBtc2ctPnR5cGUgJiBNSVBJX0RTSV9EQ1NfUkVBRCkgJiYKKwkg
ICAgbXNnLT5yeF9sZW4gPiAwICYmIG1zZy0+cnhfYnVmICE9IE5VTEwpCisJCXhmZXIuZGlyZWN0
aW9uID0gRFNJX1BBQ0tFVF9SRUNFSVZFOworCWVsc2UKKwkJeGZlci5kaXJlY3Rpb24gPSBEU0lf
UEFDS0VUX1NFTkQ7CisKKwl4ZmVyLm5lZWRfYnRhID0gKHhmZXIuZGlyZWN0aW9uID09IERTSV9Q
QUNLRVRfUkVDRUlWRSk7CisJeGZlci5uZWVkX2J0YSB8PSAobXNnLT5mbGFncyAmIE1JUElfRFNJ
X01TR19SRVFfQUNLKSA/IDEgOiAwOworCXhmZXIubXNnID0gbXNnOworCXhmZXIuc3RhdHVzID0g
LUVUSU1FRE9VVDsKKwl4ZmVyLnJ4X3dvcmRfY291bnQgPSAwOworCXhmZXIucnhfbGVuID0gMDsK
Kwl4ZmVyLmNtZCA9IDB4MDA7CisJaWYgKG1zZy0+dHhfbGVuID4gMCkKKwkJeGZlci5jbWQgPSAo
KHU4ICopKG1zZy0+dHhfYnVmKSlbMF07CisJaW5pdF9jb21wbGV0aW9uKCZ4ZmVyLmNvbXBsZXRl
ZCk7CisKKwlyZXQgPSBjbGtfcHJlcGFyZV9lbmFibGUoZHNpLT5yeF9lc2NfY2xrKTsKKwlpZiAo
cmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIGVuYWJsZSBy
eF9lc2MgY2xrOiAlemRcbiIsCisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwlE
Uk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgIkVuYWJsZWQgcnhfZXNjIGNsayBAJWx1IEh6
XG4iLAorCQkJICAgICBjbGtfZ2V0X3JhdGUoZHNpLT5yeF9lc2NfY2xrKSk7CisKKwkvKiBJbml0
aWF0ZSB0aGUgRFNJIHBhY2tldCB0cmFuc21pc2lvbiAqLworCW53bF9kc2lfYmVnaW5fdHJhbnNt
aXNzaW9uKGRzaSk7CisKKwlpZiAoIXdhaXRfZm9yX2NvbXBsZXRpb25fdGltZW91dCgmeGZlci5j
b21wbGV0ZWQsCisJCQkJCSBOV0xfRFNJX01JUElfRklGT19USU1FT1VUKSkgeworCQlEUk1fREVW
X0VSUk9SKGRzaV9ob3N0LT5kZXYsICJbJTAyWF0gRFNJIHRyYW5zZmVyIHRpbWVkIG91dFxuIiwK
KwkJCSAgICAgIHhmZXIuY21kKTsKKwkJcmV0ID0gLUVUSU1FRE9VVDsKKwl9IGVsc2UgeworCQly
ZXQgPSB4ZmVyLnN0YXR1czsKKwl9CisKKwljbGtfZGlzYWJsZV91bnByZXBhcmUoZHNpLT5yeF9l
c2NfY2xrKTsKKworCXJldHVybiByZXQ7Cit9CisKK2NvbnN0IHN0cnVjdCBtaXBpX2RzaV9ob3N0
X29wcyBud2xfZHNpX2hvc3Rfb3BzID0geworCS5hdHRhY2ggPSBud2xfZHNpX2hvc3RfYXR0YWNo
LAorCS5kZXRhY2ggPSBud2xfZHNpX2hvc3RfZGV0YWNoLAorCS50cmFuc2ZlciA9IG53bF9kc2lf
aG9zdF90cmFuc2ZlciwKK307CisKK2lycXJldHVybl90IG53bF9kc2lfaXJxX2hhbmRsZXIoaW50
IGlycSwgdm9pZCAqZGF0YSkKK3sKKwl1MzIgaXJxX3N0YXR1czsKKwlzdHJ1Y3QgbndsX2RzaSAq
ZHNpID0gZGF0YTsKKworCWlycV9zdGF0dXMgPSBud2xfZHNpX3JlYWQoZHNpLCBOV0xfRFNJX0lS
UV9TVEFUVVMpOworCisJaWYgKGlycV9zdGF0dXMgJiBOV0xfRFNJX1RYX1BLVF9ET05FIHx8CisJ
ICAgIGlycV9zdGF0dXMgJiBOV0xfRFNJX1JYX1BLVF9IRFJfUkNWRCB8fAorCSAgICBpcnFfc3Rh
dHVzICYgTldMX0RTSV9SWF9QS1RfUEFZTE9BRF9EQVRBX1JDVkQpCisJCW53bF9kc2lfZmluaXNo
X3RyYW5zbWlzc2lvbihkc2ksIGlycV9zdGF0dXMpOworCisJcmV0dXJuIElSUV9IQU5ETEVEOwor
fQorCitpbnQgbndsX2RzaV9lbmFibGUoc3RydWN0IG53bF9kc2kgKmRzaSkKK3sKKwlzdHJ1Y3Qg
ZGV2aWNlICpkZXYgPSBkc2ktPmRldjsKKwl1bmlvbiBwaHlfY29uZmlndXJlX29wdHMgKnBoeV9j
ZmcgPSAmZHNpLT5waHlfY2ZnOworCWludCByZXQ7CisKKwlpZiAoIWRzaS0+bGFuZXMpIHsKKwkJ
RFJNX0RFVl9FUlJPUihkZXYsICJOZWVkIERTSSBsYW5lczogJWRcbiIsIGRzaS0+bGFuZXMpOwor
CQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwlyZXQgPSBwaHlfaW5pdChkc2ktPnBoeSk7CisJaWYg
KHJldCA8IDApIHsKKwkJRFJNX0RFVl9FUlJPUihkZXYsICJGYWlsZWQgdG8gaW5pdCBEU0kgcGh5
OiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlyZXQgPSBwaHlfY29uZmlndXJl
KGRzaS0+cGh5LCBwaHlfY2ZnKTsKKwlpZiAocmV0IDwgMCkgeworCQlEUk1fREVWX0VSUk9SKGRl
diwgIkZhaWxlZCB0byBjb25maWd1cmUgRFNJIHBoeTogJWRcbiIsIHJldCk7CisJCXJldHVybiBy
ZXQ7CisJfQorCisJcmV0ID0gY2xrX3ByZXBhcmVfZW5hYmxlKGRzaS0+dHhfZXNjX2Nsayk7CisJ
aWYgKHJldCA8IDApIHsKKwkJRFJNX0RFVl9FUlJPUihkc2ktPmRldiwgIkZhaWxlZCB0byBlbmFi
bGUgdHhfZXNjIGNsazogJWRcbiIsCisJCQkgICAgICByZXQpOworCQlyZXR1cm4gcmV0OworCX0K
KwlEUk1fREVWX0RFQlVHX0RSSVZFUihkc2ktPmRldiwgIkVuYWJsZWQgdHhfZXNjIGNsayBAJWx1
IEh6XG4iLAorCQkJICAgICBjbGtfZ2V0X3JhdGUoZHNpLT50eF9lc2NfY2xrKSk7CisKKwlyZXQg
PSBud2xfZHNpX2NvbmZpZ19ob3N0KGRzaSk7CisJaWYgKHJldCA8IDApIHsKKwkJRFJNX0RFVl9F
UlJPUihkZXYsICJGYWlsZWQgdG8gc2V0IHVwIERTSTogJWQiLCByZXQpOworCQlyZXR1cm4gcmV0
OworCX0KKworCXJldCA9IG53bF9kc2lfY29uZmlnX2RwaShkc2kpOworCWlmIChyZXQgPCAwKSB7
CisJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFpbGVkIHRvIHNldCB1cCBEUEk6ICVkIiwgcmV0KTsK
KwkJcmV0dXJuIHJldDsKKwl9CisKKwlyZXQgPSBwaHlfcG93ZXJfb24oZHNpLT5waHkpOworCWlm
IChyZXQgPCAwKSB7CisJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFpbGVkIHRvIHBvd2VyIG9uIERQ
SFkgKCVkKVxuIiwgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlud2xfZHNpX2luaXRfaW50
ZXJydXB0cyhkc2kpOworCisJcmV0dXJuIDA7Cit9CisKK2ludCBud2xfZHNpX2Rpc2FibGUoc3Ry
dWN0IG53bF9kc2kgKmRzaSkKK3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSBkc2ktPmRldjsKKwor
CURSTV9ERVZfREVCVUdfRFJJVkVSKGRldiwgIkRpc2FibGluZyBjbG9ja3MgYW5kIHBoeVxuIik7
CisKKwlwaHlfcG93ZXJfb2ZmKGRzaS0+cGh5KTsKKwlwaHlfZXhpdChkc2ktPnBoeSk7CisKKwkv
KiBEaXNhYmxpbmcgdGhlIGNsb2NrIGJlZm9yZSB0aGUgcGh5IGJyZWFrcyBlbmFibGluZyBkc2kg
YWdhaW4gKi8KKwljbGtfZGlzYWJsZV91bnByZXBhcmUoZHNpLT50eF9lc2NfY2xrKTsKKworCXJl
dHVybiAwOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpL253
bC1kc2kuaCBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS9ud2wtZHNpLmgKbmV3IGZp
bGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi41NzliMzY2ZGU2NTIKLS0tIC9kZXYv
bnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kvbndsLWRzaS5oCkBAIC0w
LDAgKzEsMTEyIEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCsgKi8KKy8q
CisgKiBOV0wgTUlQSSBEU0kgaG9zdCBkcml2ZXIKKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMTcg
TlhQCisgKiBDb3B5cmlnaHQgKEMpIDIwMTkgUHVyaXNtIFNQQworICovCisjaWZuZGVmIF9fTldM
X0RTSV9IX18KKyNkZWZpbmUgX19OV0xfRFNJX0hfXworCisjaW5jbHVkZSA8bGludXgvaXJxcmV0
dXJuLmg+CisKKyNpbmNsdWRlIDxkcm0vZHJtX21pcGlfZHNpLmg+CisKKyNpbmNsdWRlICJud2wt
ZHJ2LmgiCisKKy8qIERTSSBIT1NUIHJlZ2lzdGVycyAqLworI2RlZmluZSBOV0xfRFNJX0NGR19O
VU1fTEFORVMJCQkweDAKKyNkZWZpbmUgTldMX0RTSV9DRkdfTk9OQ09OVElOVU9VU19DTEsJCTB4
NAorI2RlZmluZSBOV0xfRFNJX0NGR19UX1BSRQkJCTB4OAorI2RlZmluZSBOV0xfRFNJX0NGR19U
X1BPU1QJCQkweGMKKyNkZWZpbmUgTldMX0RTSV9DRkdfVFhfR0FQCQkJMHgxMAorI2RlZmluZSBO
V0xfRFNJX0NGR19BVVRPSU5TRVJUX0VPVFAJCTB4MTQKKyNkZWZpbmUgTldMX0RTSV9DRkdfRVhU
UkFfQ01EU19BRlRFUl9FT1RQCTB4MTgKKyNkZWZpbmUgTldMX0RTSV9DRkdfSFRYX1RPX0NPVU5U
CQkweDFjCisjZGVmaW5lIE5XTF9EU0lfQ0ZHX0xSWF9IX1RPX0NPVU5UCQkweDIwCisjZGVmaW5l
IE5XTF9EU0lfQ0ZHX0JUQV9IX1RPX0NPVU5UCQkweDI0CisjZGVmaW5lIE5XTF9EU0lfQ0ZHX1RX
QUtFVVAJCQkweDI4CisjZGVmaW5lIE5XTF9EU0lfQ0ZHX1NUQVRVU19PVVQJCQkweDJjCisjZGVm
aW5lIE5XTF9EU0lfUlhfRVJST1JfU1RBVFVTCQkJMHgzMAorCisvKiBEU0kgRFBJIHJlZ2lzdGVy
cyAqLworI2RlZmluZSBOV0xfRFNJX1BJWEVMX1BBWUxPQURfU0laRQkJMHgyMDAKKyNkZWZpbmUg
TldMX0RTSV9QSVhFTF9GSUZPX1NFTkRfTEVWRUwJCTB4MjA0CisjZGVmaW5lIE5XTF9EU0lfSU5U
RVJGQUNFX0NPTE9SX0NPRElORwkJMHgyMDgKKyNkZWZpbmUgTldMX0RTSV9QSVhFTF9GT1JNQVQJ
CQkweDIwYworI2RlZmluZSBOV0xfRFNJX1ZTWU5DX1BPTEFSSVRZCQkJMHgyMTAKKyNkZWZpbmUg
TldMX0RTSV9WU1lOQ19QT0xBUklUWV9BQ1RJVkVfTE9XCTAKKyNkZWZpbmUgTldMX0RTSV9WU1lO
Q19QT0xBUklUWV9BQ1RJVkVfSElHSAlCSVQoMSkKKworI2RlZmluZSBOV0xfRFNJX0hTWU5DX1BP
TEFSSVRZCQkJMHgyMTQKKyNkZWZpbmUgTldMX0RTSV9IU1lOQ19QT0xBUklUWV9BQ1RJVkVfTE9X
CTAKKyNkZWZpbmUgTldMX0RTSV9IU1lOQ19QT0xBUklUWV9BQ1RJVkVfSElHSAlCSVQoMSkKKwor
I2RlZmluZSBOV0xfRFNJX1ZJREVPX01PREUJCQkweDIxOAorI2RlZmluZSBOV0xfRFNJX0hGUAkJ
CQkweDIxYworI2RlZmluZSBOV0xfRFNJX0hCUAkJCQkweDIyMAorI2RlZmluZSBOV0xfRFNJX0hT
QQkJCQkweDIyNAorI2RlZmluZSBOV0xfRFNJX0VOQUJMRV9NVUxUX1BLVFMJCTB4MjI4CisjZGVm
aW5lIE5XTF9EU0lfVkJQCQkJCTB4MjJjCisjZGVmaW5lIE5XTF9EU0lfVkZQCQkJCTB4MjMwCisj
ZGVmaW5lIE5XTF9EU0lfQkxMUF9NT0RFCQkJMHgyMzQKKyNkZWZpbmUgTldMX0RTSV9VU0VfTlVM
TF9QS1RfQkxMUAkJMHgyMzgKKyNkZWZpbmUgTldMX0RTSV9WQUNUSVZFCQkJCTB4MjNjCisjZGVm
aW5lIE5XTF9EU0lfVkMJCQkJMHgyNDAKKworLyogRFNJIEFQQiBQS1QgY29udHJvbCAqLworI2Rl
ZmluZSBOV0xfRFNJX1RYX1BBWUxPQUQJCQkweDI4MAorI2RlZmluZSBOV0xfRFNJX1BLVF9DT05U
Uk9MCQkJMHgyODQKKyNkZWZpbmUgTldMX0RTSV9TRU5EX1BBQ0tFVAkJCTB4Mjg4CisjZGVmaW5l
IE5XTF9EU0lfUEtUX1NUQVRVUwkJCTB4MjhjCisjZGVmaW5lIE5XTF9EU0lfUEtUX0ZJRk9fV1Jf
TEVWRUwJCTB4MjkwCisjZGVmaW5lIE5XTF9EU0lfUEtUX0ZJRk9fUkRfTEVWRUwJCTB4Mjk0Cisj
ZGVmaW5lIE5XTF9EU0lfUlhfUEFZTE9BRAkJCTB4Mjk4CisjZGVmaW5lIE5XTF9EU0lfUlhfUEtU
X0hFQURFUgkJCTB4MjljCisKKy8qIERTSSBJUlEgaGFuZGxpbmcgKi8KKyNkZWZpbmUgTldMX0RT
SV9JUlFfU1RBVFVTCQkJMHgyYTAKKyNkZWZpbmUgTldMX0RTSV9TTV9OT1RfSURMRQkJCUJJVCgw
KQorI2RlZmluZSBOV0xfRFNJX1RYX1BLVF9ET05FCQkJQklUKDEpCisjZGVmaW5lIE5XTF9EU0lf
RFBIWV9ESVJFQ1RJT04JCQlCSVQoMikKKyNkZWZpbmUgTldMX0RTSV9UWF9GSUZPX09WRkxXCQkJ
QklUKDMpCisjZGVmaW5lIE5XTF9EU0lfVFhfRklGT19VREZMVwkJCUJJVCg0KQorI2RlZmluZSBO
V0xfRFNJX1JYX0ZJRk9fT1ZGTFcJCQlCSVQoNSkKKyNkZWZpbmUgTldMX0RTSV9SWF9GSUZPX1VE
RkxXCQkJQklUKDYpCisjZGVmaW5lIE5XTF9EU0lfUlhfUEtUX0hEUl9SQ1ZECQkJQklUKDcpCisj
ZGVmaW5lIE5XTF9EU0lfUlhfUEtUX1BBWUxPQURfREFUQV9SQ1ZECUJJVCg4KQorI2RlZmluZSBO
V0xfRFNJX0JUQV9USU1FT1VUCQkJQklUKDI5KQorI2RlZmluZSBOV0xfRFNJX0xQX1JYX1RJTUVP
VVQJCQlCSVQoMzApCisjZGVmaW5lIE5XTF9EU0lfSFNfVFhfVElNRU9VVAkJCUJJVCgzMSkKKwor
I2RlZmluZSBOV0xfRFNJX0lSUV9TVEFUVVMyCQkJMHgyYTQKKyNkZWZpbmUgTldMX0RTSV9TSU5H
TEVfQklUX0VDQ19FUlIJCUJJVCgwKQorI2RlZmluZSBOV0xfRFNJX01VTFRJX0JJVF9FQ0NfRVJS
CQlCSVQoMSkKKyNkZWZpbmUgTldMX0RTSV9DUkNfRVJSCQkJCUJJVCgyKQorCisjZGVmaW5lIE5X
TF9EU0lfSVJRX01BU0sJCQkweDJhOAorI2RlZmluZSBOV0xfRFNJX1NNX05PVF9JRExFX01BU0sJ
CUJJVCgwKQorI2RlZmluZSBOV0xfRFNJX1RYX1BLVF9ET05FX01BU0sJCUJJVCgxKQorI2RlZmlu
ZSBOV0xfRFNJX0RQSFlfRElSRUNUSU9OX01BU0sJCUJJVCgyKQorI2RlZmluZSBOV0xfRFNJX1RY
X0ZJRk9fT1ZGTFdfTUFTSwkJQklUKDMpCisjZGVmaW5lIE5XTF9EU0lfVFhfRklGT19VREZMV19N
QVNLCQlCSVQoNCkKKyNkZWZpbmUgTldMX0RTSV9SWF9GSUZPX09WRkxXX01BU0sJCUJJVCg1KQor
I2RlZmluZSBOV0xfRFNJX1JYX0ZJRk9fVURGTFdfTUFTSwkJQklUKDYpCisjZGVmaW5lIE5XTF9E
U0lfUlhfUEtUX0hEUl9SQ1ZEX01BU0sJCUJJVCg3KQorI2RlZmluZSBOV0xfRFNJX1JYX1BLVF9Q
QVlMT0FEX0RBVEFfUkNWRF9NQVNLCUJJVCg4KQorI2RlZmluZSBOV0xfRFNJX0JUQV9USU1FT1VU
X01BU0sJCUJJVCgyOSkKKyNkZWZpbmUgTldMX0RTSV9MUF9SWF9USU1FT1VUX01BU0sJCUJJVCgz
MCkKKyNkZWZpbmUgTldMX0RTSV9IU19UWF9USU1FT1VUX01BU0sJCUJJVCgzMSkKKworI2RlZmlu
ZSBOV0xfRFNJX0lSUV9NQVNLMgkJCTB4MmFjCisjZGVmaW5lIE5XTF9EU0lfU0lOR0xFX0JJVF9F
Q0NfRVJSX01BU0sJCUJJVCgwKQorI2RlZmluZSBOV0xfRFNJX01VTFRJX0JJVF9FQ0NfRVJSX01B
U0sJCUJJVCgxKQorI2RlZmluZSBOV0xfRFNJX0NSQ19FUlJfTUFTSwkJCUJJVCgyKQorCitleHRl
cm4gY29uc3Qgc3RydWN0IG1pcGlfZHNpX2hvc3Rfb3BzIG53bF9kc2lfaG9zdF9vcHM7CisKK2ly
cXJldHVybl90IG53bF9kc2lfaXJxX2hhbmRsZXIoaW50IGlycSwgdm9pZCAqZGF0YSk7CitpbnQg
bndsX2RzaV9lbmFibGUoc3RydWN0IG53bF9kc2kgKmRzaSk7CitpbnQgbndsX2RzaV9kaXNhYmxl
KHN0cnVjdCBud2xfZHNpICpkc2kpOworCisjZW5kaWYgLyogX19OV0xfRFNJX0hfXyAqLwotLSAK
Mi4yMy4wLnJjMQoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9y
ZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZl
bA==
