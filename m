Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8DCA510ED96
	for <lists+dri-devel@lfdr.de>; Mon,  2 Dec 2019 17:57:59 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2E73E89760;
	Mon,  2 Dec 2019 16:57:57 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9007089760
 for <dri-devel@lists.freedesktop.org>; Mon,  2 Dec 2019 16:57:55 +0000 (UTC)
Received: from pendragon.ideasonboard.com (81-175-216-236.bb.dnainternet.fi
 [81.175.216.236])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 9A55A309;
 Mon,  2 Dec 2019 17:57:53 +0100 (CET)
Date: Mon, 2 Dec 2019 18:57:46 +0200
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Boris Brezillon <boris.brezillon@collabora.com>
Subject: Re: [PATCH v3 11/21] drm/bridge: Patch atomic hooks to take a
 drm_bridge_state
Message-ID: <20191202165746.GO4929@pendragon.ideasonboard.com>
References: <20191023154512.9762-1-boris.brezillon@collabora.com>
 <20191023154512.9762-12-boris.brezillon@collabora.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191023154512.9762-12-boris.brezillon@collabora.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1575305873;
 bh=9ZBhzPFh9PdFLZYVOFctDBN3vz1dVxuF8XY/q27hZ+k=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=sszidPWorI5LxhTmcZl0AdGDuv7nwFED1awmecVo5aOh33a/SzkH+IGYl1ZYsHOz8
 gJVIewmiSovzX+NSx6rz0vKuuAHSI1sf0AkQEfqlrOrU5eGeZoQWN8VCsIz0C0AhNu
 mFM5xj2PtGu+BAJxcVZCj/1bMrfHbCuVyw/TKJNw=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Mark Rutland <mark.rutland@arm.com>,
 Neil Armstrong <narmstrong@baylibre.com>, dri-devel@lists.freedesktop.org,
 Thierry Reding <thierry.reding@gmail.com>, kernel@collabora.com,
 Sam Ravnborg <sam@ravnborg.org>,
 Nikita Yushchenko <nikita.yoush@cogentembedded.com>,
 Andrey Smirnov <andrew.smirnov@gmail.com>,
 Kyungmin Park <kyungmin.park@samsung.com>, Chris Healy <cphealy@gmail.com>,
 devicetree@vger.kernel.org, Jonas Karlman <jonas@kwiboo.se>,
 Rob Herring <robh+dt@kernel.org>, Jernej Skrabec <jernej.skrabec@siol.net>,
 Seung-Woo Kim <sw0312.kim@samsung.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgQm9yaXMsCgpUaGFuayB5b3UgZm9yIHRoZSBwYXRjaC4KCk9uIFdlZCwgT2N0IDIzLCAyMDE5
IGF0IDA1OjQ1OjAyUE0gKzAyMDAsIEJvcmlzIEJyZXppbGxvbiB3cm90ZToKPiBUaGlzIHdheSB0
aGUgZHJtX2JyaWRnZV9mdW5jcyBpbnRlcmZhY2UgaXMgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0
IG9mCj4gdGhlIHN1YnN5c3RlbS4KPiAKPiBUaGUgb25seSBkcml2ZXIgaW1wbGVtZW50aW5nIHRo
b3NlIGhvb2tzIChhbmFsb2dpeCBEUCkgaXMgcGF0Y2hlZCB0b28uCj4gCj4gU2lnbmVkLW9mZi1i
eTogQm9yaXMgQnJlemlsbG9uIDxib3Jpcy5icmV6aWxsb25AY29sbGFib3JhLmNvbT4KPiAtLS0K
PiBDaGFuZ2VzIGluIHYzOgo+ICogT2xkIHN0YXRlIGNsYXJpZmljYXRpb24gbW92ZWQgdG8gYSBz
ZXBhcmF0ZSBwYXRjaAo+IAo+IENoYW5nZXMgaW4gdjI6Cj4gKiBQYXNzIHRoZSBvbGQgYnJpZGdl
IHN0YXRlCj4gLS0tCj4gIC4uLi9kcm0vYnJpZGdlL2FuYWxvZ2l4L2FuYWxvZ2l4X2RwX2NvcmUu
YyAgICB8IDEyICsrLS0KPiAgZHJpdmVycy9ncHUvZHJtL2RybV9icmlkZ2UuYyAgICAgICAgICAg
ICAgICAgIHwgNjEgKysrKysrKysrKysrKysrLS0tLQo+ICBpbmNsdWRlL2RybS9kcm1fYnJpZGdl
LmggICAgICAgICAgICAgICAgICAgICAgfCAyNCArKysrLS0tLQo+ICAzIGZpbGVzIGNoYW5nZWQs
IDY5IGluc2VydGlvbnMoKyksIDI4IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vYnJpZGdlL2FuYWxvZ2l4L2FuYWxvZ2l4X2RwX2NvcmUuYyBiL2RyaXZlcnMv
Z3B1L2RybS9icmlkZ2UvYW5hbG9naXgvYW5hbG9naXhfZHBfY29yZS5jCj4gaW5kZXggYmI0MTFm
ZTUyYWU4Li5lNDM4ZTc1N2YyY2UgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9hbmFsb2dpeC9hbmFsb2dpeF9kcF9jb3JlLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJp
ZGdlL2FuYWxvZ2l4L2FuYWxvZ2l4X2RwX2NvcmUuYwo+IEBAIC0xMjkwLDggKzEyOTAsOSBAQCBz
dHJ1Y3QgZHJtX2NydGMgKmFuYWxvZ2l4X2RwX2dldF9uZXdfY3J0YyhzdHJ1Y3QgYW5hbG9naXhf
ZHBfZGV2aWNlICpkcCwKPiAgfQo+ICAKPiAgc3RhdGljIHZvaWQgYW5hbG9naXhfZHBfYnJpZGdl
X2F0b21pY19wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCj4gLQkJCQkJCSBz
dHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gKwkJCQkJCSBzdHJ1Y3QgZHJtX2JyaWRn
ZV9zdGF0ZSAqYnN0YXRlKQoKU2hvdWxkIHdlIG5hbWUgdGhlIHBhcmFtZXRlciBvbGRfc3RhdGUg
PyBTYW1lIGNvbW1lbnQgYmVsb3cuCgpXaXRoIHRoaXMgYWRkcmVzc2VkLAoKUmV2aWV3ZWQtYnk6
IExhdXJlbnQgUGluY2hhcnQgPGxhdXJlbnQucGluY2hhcnRAaWRlYXNvbmJvYXJkLmNvbT4KCj4g
IHsKPiArCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSA9IGJzdGF0ZS0+YmFzZS5zdGF0
ZTsKPiAgCXN0cnVjdCBhbmFsb2dpeF9kcF9kZXZpY2UgKmRwID0gYnJpZGdlLT5kcml2ZXJfcHJp
dmF0ZTsKPiAgCXN0cnVjdCBkcm1fY3J0YyAqY3J0YzsKPiAgCXN0cnVjdCBkcm1fY3J0Y19zdGF0
ZSAqb2xkX2NydGNfc3RhdGU7Cj4gQEAgLTEzNjcsOCArMTM2OCw5IEBAIHN0YXRpYyBpbnQgYW5h
bG9naXhfZHBfc2V0X2JyaWRnZShzdHJ1Y3QgYW5hbG9naXhfZHBfZGV2aWNlICpkcCkKPiAgfQo+
ICAKPiAgc3RhdGljIHZvaWQgYW5hbG9naXhfZHBfYnJpZGdlX2F0b21pY19lbmFibGUoc3RydWN0
IGRybV9icmlkZ2UgKmJyaWRnZSwKPiAtCQkJCQkgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRl
ICpzdGF0ZSkKPiArCQkJCQkgICAgIHN0cnVjdCBkcm1fYnJpZGdlX3N0YXRlICpic3RhdGUpCj4g
IHsKPiArCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSA9IGJzdGF0ZS0+YmFzZS5zdGF0
ZTsKPiAgCXN0cnVjdCBhbmFsb2dpeF9kcF9kZXZpY2UgKmRwID0gYnJpZGdlLT5kcml2ZXJfcHJp
dmF0ZTsKPiAgCXN0cnVjdCBkcm1fY3J0YyAqY3J0YzsKPiAgCXN0cnVjdCBkcm1fY3J0Y19zdGF0
ZSAqb2xkX2NydGNfc3RhdGU7Cj4gQEAgLTE0NDEsOCArMTQ0Myw5IEBAIHN0YXRpYyB2b2lkIGFu
YWxvZ2l4X2RwX2JyaWRnZV9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCj4gIH0K
PiAgCj4gIHN0YXRpYyB2b2lkIGFuYWxvZ2l4X2RwX2JyaWRnZV9hdG9taWNfZGlzYWJsZShzdHJ1
Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAo+IC0JCQkJCSAgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0
YXRlICpzdGF0ZSkKPiArCQkJCQkgICAgICBzdHJ1Y3QgZHJtX2JyaWRnZV9zdGF0ZSAqYnN0YXRl
KQo+ICB7Cj4gKwlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUgPSBic3RhdGUtPmJhc2Uu
c3RhdGU7Cj4gIAlzdHJ1Y3QgYW5hbG9naXhfZHBfZGV2aWNlICpkcCA9IGJyaWRnZS0+ZHJpdmVy
X3ByaXZhdGU7Cj4gIAlzdHJ1Y3QgZHJtX2NydGMgKmNydGM7Cj4gIAlzdHJ1Y3QgZHJtX2NydGNf
c3RhdGUgKm5ld19jcnRjX3N0YXRlID0gTlVMTDsKPiBAQCAtMTQ2NSw4ICsxNDY4LDkgQEAgc3Rh
dGljIHZvaWQgYW5hbG9naXhfZHBfYnJpZGdlX2F0b21pY19kaXNhYmxlKHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UsCj4gIAo+ICBzdGF0aWMKPiAgdm9pZCBhbmFsb2dpeF9kcF9icmlkZ2VfYXRv
bWljX3Bvc3RfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAo+IC0JCQkJCSAgICBz
dHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gKwkJCQkJICAgIHN0cnVjdCBkcm1fYnJp
ZGdlX3N0YXRlICpic3RhdGUpCj4gIHsKPiArCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0
ZSA9IGJzdGF0ZS0+YmFzZS5zdGF0ZTsKPiAgCXN0cnVjdCBhbmFsb2dpeF9kcF9kZXZpY2UgKmRw
ID0gYnJpZGdlLT5kcml2ZXJfcHJpdmF0ZTsKPiAgCXN0cnVjdCBkcm1fY3J0YyAqY3J0YzsKPiAg
CXN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqbmV3X2NydGNfc3RhdGU7Cj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9kcm1fYnJpZGdlLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2JyaWRnZS5j
Cj4gaW5kZXggY2E3NGJmZTAyOGM5Li4zNzc4NjZlMzIxNGYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2RybV9icmlkZ2UuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYnJpZGdl
LmMKPiBAQCAtNDY4LDEwICs0NjgsMTkgQEAgdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9k
aXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCj4gIAllbmNvZGVyID0gYnJpZGdlLT5l
bmNvZGVyOwo+ICAJbGlzdF9mb3JfZWFjaF9lbnRyeV9yZXZlcnNlKGl0ZXIsICZlbmNvZGVyLT5i
cmlkZ2VfY2hhaW4sCj4gIAkJCQkgICAgY2hhaW5fbm9kZSkgewo+IC0JCWlmIChpdGVyLT5mdW5j
cy0+YXRvbWljX2Rpc2FibGUpCj4gLQkJCWl0ZXItPmZ1bmNzLT5hdG9taWNfZGlzYWJsZShpdGVy
LCBvbGRfc3RhdGUpOwo+IC0JCWVsc2UgaWYgKGl0ZXItPmZ1bmNzLT5kaXNhYmxlKQo+ICsJCWlm
IChpdGVyLT5mdW5jcy0+YXRvbWljX2Rpc2FibGUpIHsKPiArCQkJc3RydWN0IGRybV9icmlkZ2Vf
c3RhdGUgKm9sZF9icmlkZ2Vfc3RhdGU7Cj4gKwo+ICsJCQlvbGRfYnJpZGdlX3N0YXRlID0KPiAr
CQkJCWRybV9hdG9taWNfZ2V0X29sZF9icmlkZ2Vfc3RhdGUob2xkX3N0YXRlLAo+ICsJCQkJCQkJ
CWl0ZXIpOwo+ICsJCQlpZiAoV0FSTl9PTighb2xkX2JyaWRnZV9zdGF0ZSkpCj4gKwkJCQlyZXR1
cm47Cj4gKwo+ICsJCQlpdGVyLT5mdW5jcy0+YXRvbWljX2Rpc2FibGUoaXRlciwgb2xkX2JyaWRn
ZV9zdGF0ZSk7Cj4gKwkJfSBlbHNlIGlmIChpdGVyLT5mdW5jcy0+ZGlzYWJsZSkgewo+ICAJCQlp
dGVyLT5mdW5jcy0+ZGlzYWJsZShpdGVyKTsKPiArCQl9Cj4gIAo+ICAJCWlmIChpdGVyID09IGJy
aWRnZSkKPiAgCQkJYnJlYWs7Cj4gQEAgLTUwMywxMCArNTEyLDIwIEBAIHZvaWQgZHJtX2F0b21p
Y19icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCj4g
IAllbmNvZGVyID0gYnJpZGdlLT5lbmNvZGVyOwo+ICAJbGlzdF9mb3JfZWFjaF9lbnRyeV9mcm9t
KGJyaWRnZSwgJmVuY29kZXItPmJyaWRnZV9jaGFpbiwKPiAgCQkJCSBjaGFpbl9ub2RlKSB7Cj4g
LQkJaWYgKGJyaWRnZS0+ZnVuY3MtPmF0b21pY19wb3N0X2Rpc2FibGUpCj4gLQkJCWJyaWRnZS0+
ZnVuY3MtPmF0b21pY19wb3N0X2Rpc2FibGUoYnJpZGdlLCBvbGRfc3RhdGUpOwo+IC0JCWVsc2Ug
aWYgKGJyaWRnZS0+ZnVuY3MtPnBvc3RfZGlzYWJsZSkKPiArCQlpZiAoYnJpZGdlLT5mdW5jcy0+
YXRvbWljX3Bvc3RfZGlzYWJsZSkgewo+ICsJCQlzdHJ1Y3QgZHJtX2JyaWRnZV9zdGF0ZSAqb2xk
X2JyaWRnZV9zdGF0ZTsKPiArCj4gKwkJCW9sZF9icmlkZ2Vfc3RhdGUgPQo+ICsJCQkJZHJtX2F0
b21pY19nZXRfb2xkX2JyaWRnZV9zdGF0ZShvbGRfc3RhdGUsCj4gKwkJCQkJCQkJYnJpZGdlKTsK
PiArCQkJaWYgKFdBUk5fT04oIW9sZF9icmlkZ2Vfc3RhdGUpKQo+ICsJCQkJcmV0dXJuOwo+ICsK
PiArCQkJYnJpZGdlLT5mdW5jcy0+YXRvbWljX3Bvc3RfZGlzYWJsZShicmlkZ2UsCj4gKwkJCQkJ
CQkgICBvbGRfYnJpZGdlX3N0YXRlKTsKPiArCQl9IGVsc2UgaWYgKGJyaWRnZS0+ZnVuY3MtPnBv
c3RfZGlzYWJsZSkgewo+ICAJCQlicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rpc2FibGUoYnJpZGdlKTsK
PiArCQl9Cj4gIAl9Cj4gIH0KPiAgRVhQT1JUX1NZTUJPTChkcm1fYXRvbWljX2JyaWRnZV9jaGFp
bl9wb3N0X2Rpc2FibGUpOwo+IEBAIC01MzYsMTAgKzU1NSwxOSBAQCB2b2lkIGRybV9hdG9taWNf
YnJpZGdlX2NoYWluX3ByZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKPiAgCWVu
Y29kZXIgPSBicmlkZ2UtPmVuY29kZXI7Cj4gIAlsaXN0X2Zvcl9lYWNoX2VudHJ5X3JldmVyc2Uo
aXRlciwgJmJyaWRnZS0+ZW5jb2Rlci0+YnJpZGdlX2NoYWluLAo+ICAJCQkJICAgIGNoYWluX25v
ZGUpIHsKPiAtCQlpZiAoaXRlci0+ZnVuY3MtPmF0b21pY19wcmVfZW5hYmxlKQo+IC0JCQlpdGVy
LT5mdW5jcy0+YXRvbWljX3ByZV9lbmFibGUoaXRlciwgb2xkX3N0YXRlKTsKPiAtCQllbHNlIGlm
IChpdGVyLT5mdW5jcy0+cHJlX2VuYWJsZSkKPiArCQlpZiAoaXRlci0+ZnVuY3MtPmF0b21pY19w
cmVfZW5hYmxlKSB7Cj4gKwkJCXN0cnVjdCBkcm1fYnJpZGdlX3N0YXRlICpvbGRfYnJpZGdlX3N0
YXRlOwo+ICsKPiArCQkJb2xkX2JyaWRnZV9zdGF0ZSA9Cj4gKwkJCQlkcm1fYXRvbWljX2dldF9v
bGRfYnJpZGdlX3N0YXRlKG9sZF9zdGF0ZSwKPiArCQkJCQkJCQlpdGVyKTsKPiArCQkJaWYgKFdB
Uk5fT04oIW9sZF9icmlkZ2Vfc3RhdGUpKQo+ICsJCQkJcmV0dXJuOwo+ICsKPiArCQkJaXRlci0+
ZnVuY3MtPmF0b21pY19wcmVfZW5hYmxlKGl0ZXIsIG9sZF9icmlkZ2Vfc3RhdGUpOwo+ICsJCX0g
ZWxzZSBpZiAoaXRlci0+ZnVuY3MtPnByZV9lbmFibGUpIHsKPiAgCQkJaXRlci0+ZnVuY3MtPnBy
ZV9lbmFibGUoaXRlcik7Cj4gKwkJfQo+ICAKPiAgCQlpZiAoaXRlciA9PSBicmlkZ2UpCj4gIAkJ
CWJyZWFrOwo+IEBAIC01NzAsMTAgKzU5OCwxOSBAQCB2b2lkIGRybV9hdG9taWNfYnJpZGdlX2No
YWluX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAo+ICAJZW5jb2RlciA9IGJyaWRn
ZS0+ZW5jb2RlcjsKPiAgCWxpc3RfZm9yX2VhY2hfZW50cnlfZnJvbShicmlkZ2UsICZicmlkZ2Ut
PmVuY29kZXItPmJyaWRnZV9jaGFpbiwKPiAgCQkJCSBjaGFpbl9ub2RlKSB7Cj4gLQkJaWYgKGJy
aWRnZS0+ZnVuY3MtPmF0b21pY19lbmFibGUpCj4gLQkJCWJyaWRnZS0+ZnVuY3MtPmF0b21pY19l
bmFibGUoYnJpZGdlLCBvbGRfc3RhdGUpOwo+IC0JCWVsc2UgaWYgKGJyaWRnZS0+ZnVuY3MtPmVu
YWJsZSkKPiArCQlpZiAoYnJpZGdlLT5mdW5jcy0+YXRvbWljX2VuYWJsZSkgewo+ICsJCQlzdHJ1
Y3QgZHJtX2JyaWRnZV9zdGF0ZSAqb2xkX2JyaWRnZV9zdGF0ZTsKPiArCj4gKwkJCW9sZF9icmlk
Z2Vfc3RhdGUgPQo+ICsJCQkJZHJtX2F0b21pY19nZXRfb2xkX2JyaWRnZV9zdGF0ZShvbGRfc3Rh
dGUsCj4gKwkJCQkJCQkJYnJpZGdlKTsKPiArCQkJaWYgKFdBUk5fT04oIW9sZF9icmlkZ2Vfc3Rh
dGUpKQo+ICsJCQkJcmV0dXJuOwo+ICsKPiArCQkJYnJpZGdlLT5mdW5jcy0+YXRvbWljX2VuYWJs
ZShicmlkZ2UsIG9sZF9icmlkZ2Vfc3RhdGUpOwo+ICsJCX0gZWxzZSBpZiAoYnJpZGdlLT5mdW5j
cy0+ZW5hYmxlKSB7Cj4gIAkJCWJyaWRnZS0+ZnVuY3MtPmVuYWJsZShicmlkZ2UpOwo+ICsJCX0K
PiAgCX0KPiAgfQo+ICBFWFBPUlRfU1lNQk9MKGRybV9hdG9taWNfYnJpZGdlX2NoYWluX2VuYWJs
ZSk7Cj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9icmlkZ2UuaCBiL2luY2x1ZGUvZHJt
L2RybV9icmlkZ2UuaAo+IGluZGV4IGU4MTRlNmQ2ZTdjMi4uYjFmNTU3ZDhkYmE5IDEwMDY0NAo+
IC0tLSBhL2luY2x1ZGUvZHJtL2RybV9icmlkZ2UuaAo+ICsrKyBiL2luY2x1ZGUvZHJtL2RybV9i
cmlkZ2UuaAo+IEBAIC0yNjYsOCArMjY2LDggQEAgc3RydWN0IGRybV9icmlkZ2VfZnVuY3Mgewo+
ICAJICogYnJpZGdlJ3MgQGF0b21pY19wcmVfZW5hYmxlIG9yIEBwcmVfZW5hYmxlIGZ1bmN0aW9u
LiBJZiB0aGUgcHJlY2VkaW5nCj4gIAkgKiBlbGVtZW50IGlzIGEgJmRybV9lbmNvZGVyIGl0J3Mg
Y2FsbGVkIHJpZ2h0IGJlZm9yZSB0aGUgZW5jb2RlcidzCj4gIAkgKiAmZHJtX2VuY29kZXJfaGVs
cGVyX2Z1bmNzLmF0b21pY19lbmFibGUgaG9vay4KPiAtCSAqIFRoaXMgaG9vayBpcyBwYXNzZWQg
dGhlIG9sZCBhdG9taWMgc3RhdGUgKGF0b21pYyBzdGF0ZSBhZnRlciBuZXcvb2xkCj4gLQkgKiBz
dGF0ZXMgaGF2ZSBiZWVuIHN3YXBwZWQpLgo+ICsJICogVGhpcyBob29rIGlzIHBhc3NlZCB0aGUg
b2xkIGJyaWRnZSBzdGF0ZSAodGhlIG5ldyBvbmUgY2FuIGJlCj4gKwkgKiByZXRyaWV2ZWQgZnJv
bSBicmlkZ2UtPnN0YXRlKS4KPiAgCSAqCj4gIAkgKiBUaGUgZGlzcGxheSBwaXBlIChpLmUuIGNs
b2NrcyBhbmQgdGltaW5nIHNpZ25hbHMpIGZlZWRpbmcgdGhpcyBicmlkZ2UKPiAgCSAqIHdpbGwg
bm90IHlldCBiZSBydW5uaW5nIHdoZW4gdGhpcyBjYWxsYmFjayBpcyBjYWxsZWQuIFRoZSBicmlk
Z2UgbXVzdAo+IEBAIC0yODMsNyArMjgzLDcgQEAgc3RydWN0IGRybV9icmlkZ2VfZnVuY3Mgewo+
ICAJICogVGhlIEBhdG9taWNfcHJlX2VuYWJsZSBjYWxsYmFjayBpcyBvcHRpb25hbC4KPiAgCSAq
Lwo+ICAJdm9pZCAoKmF0b21pY19wcmVfZW5hYmxlKShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdl
LAo+IC0JCQkJICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX3N0YXRlKTsKPiArCQkJCSAg
c3RydWN0IGRybV9icmlkZ2Vfc3RhdGUgKm9sZF9icmlkZ2Vfc3RhdGUpOwo+ICAKPiAgCS8qKgo+
ICAJICogQGF0b21pY19lbmFibGU6Cj4gQEAgLTI5NCw4ICsyOTQsOCBAQCBzdHJ1Y3QgZHJtX2Jy
aWRnZV9mdW5jcyB7Cj4gIAkgKiBicmlkZ2UncyBAYXRvbWljX2VuYWJsZSBvciBAZW5hYmxlIGZ1
bmN0aW9uLiBJZiB0aGUgcHJlY2VkaW5nIGVsZW1lbnQKPiAgCSAqIGlzIGEgJmRybV9lbmNvZGVy
IGl0J3MgY2FsbGVkIHJpZ2h0IGFmdGVyIHRoZSBlbmNvZGVyJ3MKPiAgCSAqICZkcm1fZW5jb2Rl
cl9oZWxwZXJfZnVuY3MuYXRvbWljX2VuYWJsZSBob29rLgo+IC0JICogVGhpcyBob29rIGlzIHBh
c3NlZCB0aGUgb2xkIGF0b21pYyBzdGF0ZSAoYXRvbWljIHN0YXRlIGFmdGVyIG5ldy9vbGQKPiAt
CSAqIHN0YXRlcyBoYXZlIGJlZW4gc3dhcHBlZCkuCj4gKwkgKiBUaGlzIGhvb2sgaXMgcGFzc2Vk
IHRoZSBvbGQgYnJpZGdlIHN0YXRlICh0aGUgbmV3IG9uZSBjYW4gYmUKPiArCSAqIHJldHJpZXZl
ZCBmcm9tIGJyaWRnZS0+c3RhdGUpLgo+ICAJICoKPiAgCSAqIFRoZSBicmlkZ2UgY2FuIGFzc3Vt
ZSB0aGF0IHRoZSBkaXNwbGF5IHBpcGUgKGkuZS4gY2xvY2tzIGFuZCB0aW1pbmcKPiAgCSAqIHNp
Z25hbHMpIGZlZWRpbmcgaXQgaXMgcnVubmluZyB3aGVuIHRoaXMgY2FsbGJhY2sgaXMgY2FsbGVk
LiBUaGlzCj4gQEAgLTMxMCw3ICszMTAsNyBAQCBzdHJ1Y3QgZHJtX2JyaWRnZV9mdW5jcyB7Cj4g
IAkgKiBUaGUgQGF0b21pY19lbmFibGUgY2FsbGJhY2sgaXMgb3B0aW9uYWwuCj4gIAkgKi8KPiAg
CXZvaWQgKCphdG9taWNfZW5hYmxlKShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAo+IC0JCQkg
ICAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX3N0YXRlKTsKPiArCQkJICAgICAgc3Ry
dWN0IGRybV9icmlkZ2Vfc3RhdGUgKm9sZF9icmlkZ2Vfc3RhdGUpOwo+ICAJLyoqCj4gIAkgKiBA
YXRvbWljX2Rpc2FibGU6Cj4gIAkgKgo+IEBAIC0zMjAsOCArMzIwLDggQEAgc3RydWN0IGRybV9i
cmlkZ2VfZnVuY3Mgewo+ICAJICogYnJpZGdlJ3MgQGF0b21pY19kaXNhYmxlIG9yIEBkaXNhYmxl
IHZmdW5jLiBJZiB0aGUgcHJlY2VkaW5nIGVsZW1lbnQKPiAgCSAqIGlzIGEgJmRybV9lbmNvZGVy
IGl0J3MgY2FsbGVkIHJpZ2h0IGJlZm9yZSB0aGUKPiAgCSAqICZkcm1fZW5jb2Rlcl9oZWxwZXJf
ZnVuY3MuYXRvbWljX2Rpc2FibGUgaG9vay4KPiAtCSAqIFRoaXMgaG9vayBpcyBwYXNzZWQgdGhl
IG9sZCBhdG9taWMgc3RhdGUgKGF0b21pYyBzdGF0ZSBhZnRlciBuZXcvb2xkCj4gLQkgKiBzdGF0
ZXMgaGF2ZSBiZWVuIHN3YXBwZWQpLgo+ICsJICogVGhpcyBob29rIGlzIHBhc3NlZCB0aGUgb2xk
IGJyaWRnZSBzdGF0ZSAodGhlIG5ldyBvbmUgY2FuIGJlCj4gKwkgKiByZXRyaWV2ZWQgZnJvbSBi
cmlkZ2UtPnN0YXRlKS4KPiAgCSAqCj4gIAkgKiBUaGUgYnJpZGdlIGNhbiBhc3N1bWUgdGhhdCB0
aGUgZGlzcGxheSBwaXBlIChpLmUuIGNsb2NrcyBhbmQgdGltaW5nCj4gIAkgKiBzaWduYWxzKSBm
ZWVkaW5nIGl0IGlzIHN0aWxsIHJ1bm5pbmcgd2hlbiB0aGlzIGNhbGxiYWNrIGlzIGNhbGxlZC4K
PiBAQCAtMzM1LDcgKzMzNSw3IEBAIHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIHsKPiAgCSAqIFRo
ZSBAYXRvbWljX2Rpc2FibGUgY2FsbGJhY2sgaXMgb3B0aW9uYWwuCj4gIAkgKi8KPiAgCXZvaWQg
KCphdG9taWNfZGlzYWJsZSkoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKPiAtCQkJICAgICAg
IHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpOwo+ICsJCQkgICAgICAgc3RydWN0
IGRybV9icmlkZ2Vfc3RhdGUgKm9sZF9icmlkZ2Vfc3RhdGUpOwo+ICAKPiAgCS8qKgo+ICAJICog
QGF0b21pY19wb3N0X2Rpc2FibGU6Cj4gQEAgLTM0Niw4ICszNDYsOCBAQCBzdHJ1Y3QgZHJtX2Jy
aWRnZV9mdW5jcyB7Cj4gIAkgKiBAYXRvbWljX3Bvc3RfZGlzYWJsZSBvciBAcG9zdF9kaXNhYmxl
IGZ1bmN0aW9uLiBJZiB0aGUgcHJlY2VkaW5nCj4gIAkgKiBlbGVtZW50IGlzIGEgJmRybV9lbmNv
ZGVyIGl0J3MgY2FsbGVkIHJpZ2h0IGFmdGVyIHRoZSBlbmNvZGVyJ3MKPiAgCSAqICZkcm1fZW5j
b2Rlcl9oZWxwZXJfZnVuY3MuYXRvbWljX2Rpc2FibGUgaG9vay4KPiAtCSAqIFRoaXMgaG9vayBp
cyBwYXNzZWQgdGhlIG9sZCBhdG9taWMgc3RhdGUgKGF0b21pYyBzdGF0ZSBhZnRlciBuZXcvb2xk
Cj4gLQkgKiBzdGF0ZXMgaGF2ZSBiZWVuIHN3YXBwZWQpLgo+ICsJICogVGhpcyBob29rIGlzIHBh
c3NlZCB0aGUgb2xkIGJyaWRnZSBzdGF0ZSAodGhlIG5ldyBvbmUgY2FuIGJlCj4gKwkgKiByZXRy
aWV2ZWQgZnJvbSBicmlkZ2UtPnN0YXRlKS4KPiAgCSAqCj4gIAkgKiBUaGUgYnJpZGdlIG11c3Qg
YXNzdW1lIHRoYXQgdGhlIGRpc3BsYXkgcGlwZSAoaS5lLiBjbG9ja3MgYW5kIHRpbWluZwo+ICAJ
ICogc2lnbmFscykgZmVlZGluZyBpdCBpcyBubyBsb25nZXIgcnVubmluZyB3aGVuIHRoaXMgY2Fs
bGJhY2sgaXMKPiBAQCAtMzYzLDcgKzM2Myw3IEBAIHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIHsK
PiAgCSAqIFRoZSBAYXRvbWljX3Bvc3RfZGlzYWJsZSBjYWxsYmFjayBpcyBvcHRpb25hbC4KPiAg
CSAqLwo+ICAJdm9pZCAoKmF0b21pY19wb3N0X2Rpc2FibGUpKHN0cnVjdCBkcm1fYnJpZGdlICpi
cmlkZ2UsCj4gLQkJCQkgICAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKm9sZF9zdGF0ZSk7Cj4g
KwkJCQkgICAgc3RydWN0IGRybV9icmlkZ2Vfc3RhdGUgKm9sZF9icmlkZ2Vfc3RhdGUpOwo+ICAK
PiAgCS8qKgo+ICAJICogQGF0b21pY19kdXBsaWNhdGVfc3RhdGU6CgotLSAKUmVnYXJkcywKCkxh
dXJlbnQgUGluY2hhcnQKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
