Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 73B716EF63
	for <lists+dri-devel@lfdr.de>; Sat, 20 Jul 2019 14:51:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 501B96E89E;
	Sat, 20 Jul 2019 12:51:45 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from foss.arm.com (foss.arm.com [217.140.110.172])
 by gabe.freedesktop.org (Postfix) with ESMTP id 64F716E84E
 for <dri-devel@lists.freedesktop.org>; Fri, 19 Jul 2019 14:45:24 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 11F5B344;
 Fri, 19 Jul 2019 07:45:24 -0700 (PDT)
Received: from [10.1.196.133] (e112269-lin.cambridge.arm.com [10.1.196.133])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 3F5173F59C;
 Fri, 19 Jul 2019 07:45:23 -0700 (PDT)
Subject: Re: [PATCH 4/5] drm/panfrost: Add support for GPU heap allocations
To: Rob Herring <robh@kernel.org>
References: <20190717183352.22519-1-robh@kernel.org>
 <20190717183352.22519-4-robh@kernel.org>
 <0605b17e-4a6b-df9d-6684-38952ce5a09d@arm.com>
 <CAL_JsqK54bV7GQs+=Q0Ye6owwegPXZxj0UHDe-mQmoXJ_mDfnQ@mail.gmail.com>
From: Steven Price <steven.price@arm.com>
Message-ID: <604cb426-6034-1e92-f653-9ee5a3d4c180@arm.com>
Date: Fri, 19 Jul 2019 15:45:21 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <CAL_JsqK54bV7GQs+=Q0Ye6owwegPXZxj0UHDe-mQmoXJ_mDfnQ@mail.gmail.com>
Content-Language: en-GB
X-Mailman-Approved-At: Sat, 20 Jul 2019 12:51:44 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel <dri-devel@lists.freedesktop.org>,
 Boris Brezillon <boris.brezillon@collabora.com>,
 Robin Murphy <robin.murphy@arm.com>, Alyssa Rosenzweig <alyssa@rosenzweig.io>,
 Tomeu Vizoso <tomeu.vizoso@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gMTkvMDcvMjAxOSAxNToyNywgUm9iIEhlcnJpbmcgd3JvdGU6Cj4gT24gVGh1LCBKdWwgMTgs
IDIwMTkgYXQgOTowMyBBTSBTdGV2ZW4gUHJpY2UgPHN0ZXZlbi5wcmljZUBhcm0uY29tPiB3cm90
ZToKPj4KPj4gT24gMTcvMDcvMjAxOSAxOTozMywgUm9iIEhlcnJpbmcgd3JvdGU6Cj4+PiBUaGUg
bWlkZ2FyZC9iaWZyb3N0IEdQVXMgbmVlZCB0byBhbGxvY2F0ZSBHUFUgaGVhcCBtZW1vcnkgd2hp
Y2ggaXMKPj4+IGFsbG9jYXRlZCBvbiBHUFUgcGFnZSBmYXVsdHMgYW5kIG5vdCBwaW5uZWQgaW4g
bWVtb3J5LiBUaGUgdmVuZG9yIGRyaXZlcgo+Pj4gY2FsbHMgdGhpcyBmdW5jdGlvbmFsaXR5IEdS
T1dfT05fR1BGLgo+Pj4KPj4+IFRoaXMgaW1wbGVtZW50YXRpb24gYXNzdW1lcyB0aGF0IEJPcyBh
bGxvY2F0ZWQgd2l0aCB0aGUKPj4+IFBBTkZST1NUX0JPX05PRVhFQyBmbGFnIGFyZSBuZXZlciBt
bWFwcGVkIG9yIGV4cG9ydGVkLiBCb3RoIG9mIHRob3NlIG1heQo+Pj4gYWN0dWFsbHkgd29yaywg
YnV0IEknbSB1bnN1cmUgaWYgdGhlcmUncyBzb21lIGludGVyYWN0aW9uIHRoZXJlLiBJdAo+Pj4g
d291bGQgY2F1c2UgdGhlIHdob2xlIG9iamVjdCB0byBiZSBwaW5uZWQgaW4gbWVtb3J5IHdoaWNo
IHdvdWxkIGRlZmVhdAo+Pj4gdGhlIHBvaW50IG9mIHRoaXMuCj4+Pgo+Pj4gT24gZmF1bHRzLCB3
ZSBtYXAgaW4gMk1CIGF0IGEgdGltZSBpbiBvcmRlciB0byB1dGlsaXplIGh1Z2UgcGFnZXMgKGlm
Cj4+PiBlbmFibGVkKS4gQ3VycmVudGx5LCBvbmNlIHdlJ3ZlIG1hcHBlZCBwYWdlcyBpbiwgdGhl
eSBhcmUgb25seSB1bm1hcHBlZAo+Pj4gaWYgdGhlIEJPIGlzIGZyZWVkLiBPbmNlIHdlIGFkZCBz
aHJpbmtlciBzdXBwb3J0LCB3ZSBjYW4gdW5tYXAgcGFnZXMKPj4+IHdpdGggdGhlIHNocmlua2Vy
Lgo+Pj4KPj4+IENjOiBUb21ldSBWaXpvc28gPHRvbWV1LnZpem9zb0Bjb2xsYWJvcmEuY29tPgo+
Pj4gQ2M6IEJvcmlzIEJyZXppbGxvbiA8Ym9yaXMuYnJlemlsbG9uQGNvbGxhYm9yYS5jb20+Cj4+
PiBDYzogUm9iaW4gTXVycGh5IDxyb2Jpbi5tdXJwaHlAYXJtLmNvbT4KPj4+IENjOiBTdGV2ZW4g
UHJpY2UgPHN0ZXZlbi5wcmljZUBhcm0uY29tPgo+Pj4gQ2M6IEFseXNzYSBSb3Nlbnp3ZWlnIDxh
bHlzc2FAcm9zZW56d2VpZy5pbz4KPj4+IFNpZ25lZC1vZmYtYnk6IFJvYiBIZXJyaW5nIDxyb2Jo
QGtlcm5lbC5vcmc+Cj4+PiAtLS0KPj4+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvVE9ETyAg
ICAgICAgICAgfCAgIDIgLQo+Pj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9k
cnYuYyB8ICAgMiArLQo+Pj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0u
YyB8ICAxNCArKy0KPj4+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ2VtLmgg
fCAgIDggKysKPj4+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfbW11LmMgfCAx
MTQgKysrKysrKysrKysrKysrKysrKysrLS0tCj4+PiAgaW5jbHVkZS91YXBpL2RybS9wYW5mcm9z
dF9kcm0uaCAgICAgICAgIHwgICAxICsKPj4+ICA2IGZpbGVzIGNoYW5nZWQsIDEyNSBpbnNlcnRp
b25zKCspLCAxNiBkZWxldGlvbnMoLSkKPj4+Cj4+PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3BhbmZyb3N0L1RPRE8gYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvVE9ETwo+Pj4gaW5k
ZXggYzJlNDRhZGQzN2Q4Li42NDEyOWJmNzM5MzMgMTAwNjQ0Cj4+PiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vcGFuZnJvc3QvVE9ETwo+Pj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L1RP
RE8KPj4+IEBAIC0xNCw4ICsxNCw2IEBACj4+PiAgICBUaGUgaGFyZCBwYXJ0IGlzIGhhbmRsaW5n
IHdoZW4gbW9yZSBhZGRyZXNzIHNwYWNlcyBhcmUgbmVlZGVkIHRoYW4gd2hhdAo+Pj4gICAgdGhl
IGgvdyBwcm92aWRlcy4KPj4+Cj4+PiAtLSBTdXBwb3J0IHBpbm5pbmcgcGFnZXMgb24gZGVtYW5k
IChHUFUgcGFnZSBmYXVsdHMpLgo+Pj4gLQo+Pj4gIC0gU3VwcG9ydCB1c2Vyc3BhY2UgY29udHJv
bGxlZCBHUFUgdmlydHVhbCBhZGRyZXNzZXMuIE5lZWRlZCBmb3IgVnVsa2FuLiAoVG9tZXUpCj4+
Pgo+Pj4gIC0gU3VwcG9ydCBmb3IgbWFkdmlzZSBhbmQgYSBzaHJpbmtlci4KPj4+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZHJ2LmMgYi9kcml2ZXJzL2dw
dS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZHJ2LmMKPj4+IGluZGV4IGI5MWU5OTFiYzZhMy4uOWU4
N2QwMDYwMjAyIDEwMDY0NAo+Pj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZy
b3N0X2Rydi5jCj4+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZHJ2
LmMKPj4+IEBAIC01MCw3ICs1MCw3IEBAIHN0YXRpYyBpbnQgcGFuZnJvc3RfaW9jdGxfY3JlYXRl
X2JvKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCj4+PiAgICAgICBzdHJ1Y3Qg
ZHJtX3BhbmZyb3N0X2NyZWF0ZV9ibyAqYXJncyA9IGRhdGE7Cj4+Pgo+Pj4gICAgICAgaWYgKCFh
cmdzLT5zaXplIHx8IGFyZ3MtPnBhZCB8fAo+Pj4gLSAgICAgICAgIChhcmdzLT5mbGFncyAmIH5Q
QU5GUk9TVF9CT19OT0VYRUMpKQo+Pj4gKyAgICAgICAgIChhcmdzLT5mbGFncyAmIH4oUEFORlJP
U1RfQk9fTk9FWEVDIHwgUEFORlJPU1RfQk9fSEVBUCkpKQo+Pj4gICAgICAgICAgICAgICByZXR1
cm4gLUVJTlZBTDsKPj4+Cj4+PiAgICAgICBibyA9IHBhbmZyb3N0X2dlbV9jcmVhdGVfd2l0aF9o
YW5kbGUoZmlsZSwgZGV2LCBhcmdzLT5zaXplLCBhcmdzLT5mbGFncywKPj4+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ2VtLmMgYi9kcml2ZXJzL2dwdS9k
cm0vcGFuZnJvc3QvcGFuZnJvc3RfZ2VtLmMKPj4+IGluZGV4IDM3ZmZlYzgzOTFkYS4uNTI4Mzk2
MDAwMDM4IDEwMDY0NAo+Pj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0
X2dlbS5jCj4+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ2VtLmMK
Pj4+IEBAIC04Nyw3ICs4NywxMCBAQCBzdGF0aWMgaW50IHBhbmZyb3N0X2dlbV9tYXAoc3RydWN0
IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIHN0cnVjdCBwYW5mcm9zdF9nZW1fbwo+Pj4gICAgICAg
aWYgKHJldCkKPj4+ICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPj4+Cj4+PiAtICAgICByZXR1
cm4gcGFuZnJvc3RfbW11X21hcChibyk7Cj4+PiArICAgICBpZiAoIWJvLT5pc19oZWFwKQo+Pj4g
KyAgICAgICAgICAgICByZXQgPSBwYW5mcm9zdF9tbXVfbWFwKGJvKTsKPj4+ICsKPj4+ICsgICAg
IHJldHVybiByZXQ7Cj4+PiAgfQo+Pj4KPj4+ICBzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAq
Cj4+PiBAQCAtMTAxLDcgKzEwNCwxMSBAQCBwYW5mcm9zdF9nZW1fY3JlYXRlX3dpdGhfaGFuZGxl
KHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2LAo+Pj4gICAgICAgc3RydWN0IGRybV9nZW1fc2ht
ZW1fb2JqZWN0ICpzaG1lbTsKPj4+ICAgICAgIHN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0ICpi
bzsKPj4+Cj4+PiAtICAgICBzaXplID0gcm91bmR1cChzaXplLCBQQUdFX1NJWkUpOwo+Pj4gKyAg
ICAgLyogUm91bmQgdXAgaGVhcCBhbGxvY2F0aW9ucyB0byAyTUIgdG8ga2VlcCBmYXVsdCBoYW5k
bGluZyBzaW1wbGUgKi8KPj4+ICsgICAgIGlmIChmbGFncyAmIFBBTkZST1NUX0JPX0hFQVApCj4+
PiArICAgICAgICAgICAgIHNpemUgPSByb3VuZHVwKHNpemUsIFNaXzJNKTsKPj4+ICsgICAgIGVs
c2UKPj4+ICsgICAgICAgICAgICAgc2l6ZSA9IHJvdW5kdXAoc2l6ZSwgUEFHRV9TSVpFKTsKPj4+
Cj4+PiAgICAgICBzaG1lbSA9IGRybV9nZW1fc2htZW1fY3JlYXRlX3dpdGhfaGFuZGxlKGZpbGVf
cHJpdiwgZGV2LCBzaXplLCBoYW5kbGUpOwo+Pj4gICAgICAgaWYgKElTX0VSUihzaG1lbSkpCj4+
PiBAQCAtMTA5LDYgKzExNiw5IEBAIHBhbmZyb3N0X2dlbV9jcmVhdGVfd2l0aF9oYW5kbGUoc3Ry
dWN0IGRybV9maWxlICpmaWxlX3ByaXYsCj4+Pgo+Pj4gICAgICAgYm8gPSB0b19wYW5mcm9zdF9i
bygmc2htZW0tPmJhc2UpOwo+Pj4gICAgICAgYm8tPm5vZXhlYyA9ICEhKGZsYWdzICYgUEFORlJP
U1RfQk9fTk9FWEVDKTsKPj4+ICsgICAgIGJvLT5pc19oZWFwID0gISEoZmxhZ3MgJiBQQU5GUk9T
VF9CT19IRUFQKTsKPj4+ICsgICAgIGlmIChiby0+aXNfaGVhcCkKPj4+ICsgICAgICAgICAgICAg
Ym8tPm5vZXhlYyA9IHRydWU7Cj4+Cj4+IFdoaWxlIEkgYWdyZWUgYW4gZXhlY3V0YWJsZSBoZWFw
IGlzIHByZXR0eSB3ZWlyZCwgSSdkIHByZWZlciBtYWtpbmcgdGhpcwo+PiBleHBsaWNpdCAtIGku
ZS4gZmFpbGluZyB0aGUgYWxsb2NhdGlvbiBpZiB0aGUgZmxhZ3MgZG9uJ3QgbWFrZSBzZW5zZS4K
PiAKPiBTZWVtcyBhIGJpdCBzdHJhbmdlIHRvbyB0byBhbHdheXMgaGF2ZSB0byBzZXQgTk9FWEVD
IHdoZW4gSEVBUCBpcyBzZXQuCj4gVGhlcmUncyBub3QgcmVhbGx5IGFueSByZWFzb24gdG8gcmVq
ZWN0IHNldHRpbmcganVzdCBIRUFQLgoKUGVyc29uYWxseSBJIHByZWZlciBhbiBleHBsaWNpdCBB
UEksIHNvIHlvdSBnZXQgZXhhY3RseSB3aGF0IHlvdQpyZXF1ZXN0ZWQgKG5vIGV4dHJhIHByb3Bl
cnRpZXMgYWRkZWQgb24pLiBCdXQgSSdtIG5vdCB0b28gYm90aGVyZWQKYmVjYXVzZSBJIGNhbid0
IGFjdHVhbGx5IHNlZSB3aHkgSEVBUCB3b3VsZCBldmVyIGJlIHVzZWQgd2l0aG91dCBOT0VYRUMu
Cgo+IFsuLi5dCj4gCj4+PiAraW50IHBhbmZyb3N0X21tdV9tYXBfZmF1bHRfYWRkcihzdHJ1Y3Qg
cGFuZnJvc3RfZGV2aWNlICpwZmRldiwgaW50IGFzLCB1NjQgYWRkcikKPj4+ICt7Cj4+PiArICAg
ICBpbnQgcmV0LCBpOwo+Pj4gKyAgICAgc3RydWN0IGRybV9tbV9ub2RlICpub2RlOwo+Pj4gKyAg
ICAgc3RydWN0IHBhbmZyb3N0X2dlbV9vYmplY3QgKmJvOwo+Pj4gKyAgICAgc3RydWN0IGFkZHJl
c3Nfc3BhY2UgKm1hcHBpbmc7Cj4+PiArICAgICBwZ29mZl90IHBhZ2Vfb2Zmc2V0Owo+Pj4gKyAg
ICAgc3RydWN0IHNnX3RhYmxlIHNndCA9IHt9Owo+Pj4gKyAgICAgc3RydWN0IHBhZ2UgKipwYWdl
czsKPj4+ICsKPj4+ICsgICAgIG5vZGUgPSBhZGRyX3RvX2RybV9tbV9ub2RlKHBmZGV2LCBhcywg
YWRkcik7Cj4+PiArICAgICBpZiAoIW5vZGUpCj4+PiArICAgICAgICAgICAgIHJldHVybiAtRU5P
RU5UOwo+Pj4gKwo+Pj4gKyAgICAgYm8gPSBkcm1fbW1fbm9kZV90b19wYW5mcm9zdF9ibyhub2Rl
KTsKPj4+ICsgICAgIGlmICghYm8tPmlzX2hlYXApIHsKPj4+ICsgICAgICAgICAgICAgZGV2X1dB
Uk4ocGZkZXYtPmRldiwgIm1hdGNoaW5nIEJPIGlzIG5vdCBoZWFwIHR5cGUgKEdQVSBWQSA9ICVs
bHgpIiwKPj4+ICsgICAgICAgICAgICAgICAgICAgICAgbm9kZS0+c3RhcnQgPDwgUEFHRV9TSElG
VCk7Cj4+PiArICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+Pj4gKyAgICAgfQo+Pj4gKyAg
ICAgLyogQXNzdW1lIDJNQiBhbGlnbm1lbnQgYW5kIHNpemUgbXVsdGlwbGUgKi8KPj4+ICsgICAg
IGFkZHIgJj0gfigodTY0KVNaXzJNIC0gMSk7Cj4+PiArICAgICBwYWdlX29mZnNldCA9IGFkZHIg
Pj4gUEFHRV9TSElGVDsKPj4+ICsgICAgIHBhZ2Vfb2Zmc2V0IC09IG5vZGUtPnN0YXJ0Owo+Pj4g
Kwo+Pj4gKyAgICAgcGFnZXMgPSBrdm1hbGxvY19hcnJheShOVU1fRkFVTFRfUEFHRVMsIHNpemVv
ZihzdHJ1Y3QgcGFnZSAqKSwgR0ZQX0tFUk5FTCk7Cj4+PiArICAgICBpZiAoIXBhZ2VzKQo+Pj4g
KyAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPj4+ICsKPj4+ICsgICAgIG1hcHBpbmcgPSBi
by0+YmFzZS5iYXNlLmZpbHAtPmZfbWFwcGluZzsKPj4+ICsgICAgIG1hcHBpbmdfc2V0X3VuZXZp
Y3RhYmxlKG1hcHBpbmcpOwo+Pj4gKwo+Pj4gKyAgICAgZm9yIChpID0gMDsgaSA8IE5VTV9GQVVM
VF9QQUdFUzsgaSsrKSB7Cj4+PiArICAgICAgICAgICAgIHBhZ2VzW2ldID0gc2htZW1fcmVhZF9t
YXBwaW5nX3BhZ2UobWFwcGluZywgcGFnZV9vZmZzZXQgKyBpKTsKPj4+ICsgICAgICAgICAgICAg
aWYgKElTX0VSUihwYWdlc1tpXSkpIHsKPj4+ICsgICAgICAgICAgICAgICAgICAgICByZXQgPSBQ
VFJfRVJSKHBhZ2VzW2ldKTsKPj4+ICsgICAgICAgICAgICAgICAgICAgICBnb3RvIGVycl9wYWdl
czsKPj4+ICsgICAgICAgICAgICAgfQo+Pj4gKyAgICAgfQo+Pj4gKwo+Pj4gKyAgICAgcmV0ID0g
c2dfYWxsb2NfdGFibGVfZnJvbV9wYWdlcygmc2d0LCBwYWdlcywgTlVNX0ZBVUxUX1BBR0VTLCAw
LAo+Pj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTWl8yTSwgR0ZQX0tF
Uk5FTCk7Cj4+PiArICAgICBpZiAocmV0KQo+Pj4gKyAgICAgICAgICAgICBnb3RvIGVycl9wYWdl
czsKPj4+ICsKPj4+ICsgICAgIGlmIChkbWFfbWFwX3NnKHBmZGV2LT5kZXYsIHNndC5zZ2wsIHNn
dC5uZW50cywgRE1BX0JJRElSRUNUSU9OQUwpID09IDApIHsKPj4+ICsgICAgICAgICAgICAgcmV0
ID0gLUVJTlZBTDsKPj4+ICsgICAgICAgICAgICAgZ290byBlcnJfbWFwOwo+Pj4gKyAgICAgfQo+
Pj4gKwo+Pj4gKyAgICAgbW11X21hcF9zZyhwZmRldiwgYWRkciwgSU9NTVVfV1JJVEUgfCBJT01N
VV9SRUFEIHwgSU9NTVVfTk9FWEVDLCAmc2d0KTsKPj4+ICsKPj4+ICsgICAgIG1tdV93cml0ZShw
ZmRldiwgTU1VX0lOVF9DTEVBUiwgQklUKGFzKSk7Cj4+PiArICAgICBiby0+aXNfbWFwcGVkID0g
dHJ1ZTsKPj4+ICsKPj4+ICsgICAgIGRldl9kYmcocGZkZXYtPmRldiwgIm1hcHBlZCBwYWdlIGZh
dWx0IEAgJWxseCIsIGFkZHIpOwo+Pj4gKwo+Pj4gKyAgICAgcmV0dXJuIDA7Cj4+Cj4+IFlvdSBz
dGlsbCBuZWVkIHRvIGZyZWUgc2d0IGFuZCBwYWdlcyAtIHNvIHRoaXMgc2hvdWxkIGJlOgo+Pgo+
PiByZXQgPSAwOwo+Pgo+PiB0byBmYWxsIHRocm91Z2ggdG8gdGhlIGNsZWFuIHVwIGJlbG93Ogo+
IAo+IEkgdGhpbmsgSSBoYWQgdGhhdCB0aGVuIHRob3VnaHQgSSBmb3Jnb3QgdGhlIHJldHVybi4u
LgoKTWlnaHQgYmUgYW4gaWRlYSB0byByZW5hbWUgdGhlIGxhYmVscyB0byAib3V0X3h4eCIgdG8g
bWFrZSBpdCBsb29rIGxlc3MKbGlrZSB0aGUgcmV0dXJuIGlzIG1pc3Npbmc/IDopCgo+Pgo+Pj4g
Kwo+Pj4gK2Vycl9tYXA6Cj4+PiArICAgICBzZ19mcmVlX3RhYmxlKCZzZ3QpOwo+Pj4gK2Vycl9w
YWdlczoKPj4+ICsgICAgIGt2ZnJlZShwYWdlcyk7Cj4+PiArICAgICByZXR1cm4gcmV0Owo+Pj4g
K30KPj4+ICsKPj4KPj4gQnV0IGFjdHVhbGx5LCB5b3UgbmVlZCB0byBzdG9yZSB0aGUgcGFnZXMg
YWxsb2NhdGVkIGluIHRoZSBidWZmZXIgb2JqZWN0Cj4+IHNvIHRoYXQgdGhleSBjYW4gYmUgZnJl
ZWQgbGF0ZXIuIEF0IHRoZSBtb21lbnQgeW91IGhhdmUgYSBiaWcgbWVtb3J5IGxlYWsuCj4gCj4g
QWggeWVzLCBub3cgSSBzZWUgdGhlIG1lbW9yeSBlbmRzIHVwIGluICdVbmV2aWN0YWJsZScgYnVj
a2V0LiBJJ2QgYmVlbgo+IGxvb2tpbmcgYXQgdGhlIHNobWVtIGNvdW50cyBhbmQgaXQgc2VlbWVk
IGZpbmUuIEkgaGF2ZSBpdCB3b3JraW5nIG5vdywKPiBidXQgc3RpbGwgbmVlZCB0byBmaWd1cmUg
b3V0IGhvdyB0byBkbyBhIGRtYV91bm1hcC4KCkkgd2FzIHB1cmVseSBsb29raW5nIGF0IHRoZSBt
ZW1vcnkgdXNhZ2UgaW4gJ3RvcCcuIEkgd2FzIGhvcGluZyBpdCB3b3VsZApiZSBsb3dlciB1c2lu
ZyBIRUFQLCBidXQgaW5zdGVhZCBJIHNhdyB0aGUgbGVhay4gSSdtIGFmcmFpZCBJIGdhdmUgdXAK
dHJ5aW5nIHRvIGZpZ3VyZSBvdXQgdGhlIGJlc3Qgd2F5IG9mIGltcGxlbWVudGluZyB0aGUgZG1h
X3VubWFwIC0gc28KZ29vZCBsdWNrISA6KQoKPj4+ICBzdGF0aWMgY29uc3QgY2hhciAqYWNjZXNz
X3R5cGVfbmFtZShzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwKPj4+ICAgICAgICAgICAg
ICAgdTMyIGZhdWx0X3N0YXR1cykKPj4+ICB7Cj4+PiBAQCAtMzIzLDEzICs0MDUsMTEgQEAgc3Rh
dGljIGlycXJldHVybl90IHBhbmZyb3N0X21tdV9pcnFfaGFuZGxlcihpbnQgaXJxLCB2b2lkICpk
YXRhKQo+Pj4gIHsKPj4+ICAgICAgIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gZGF0
YTsKPj4+ICAgICAgIHUzMiBzdGF0dXMgPSBtbXVfcmVhZChwZmRldiwgTU1VX0lOVF9TVEFUKTsK
Pj4+IC0gICAgIGludCBpOwo+Pj4gKyAgICAgaW50IGksIHJldDsKPj4+Cj4+PiAgICAgICBpZiAo
IXN0YXR1cykKPj4+ICAgICAgICAgICAgICAgcmV0dXJuIElSUV9OT05FOwo+Pj4KPj4+IC0gICAg
IGRldl9lcnIocGZkZXYtPmRldiwgIm1tdSBpcnEgc3RhdHVzPSV4XG4iLCBzdGF0dXMpOwo+Pj4g
LQo+Pj4gICAgICAgZm9yIChpID0gMDsgc3RhdHVzOyBpKyspIHsKPj4+ICAgICAgICAgICAgICAg
dTMyIG1hc2sgPSBCSVQoaSkgfCBCSVQoaSArIDE2KTsKPj4+ICAgICAgICAgICAgICAgdTY0IGFk
ZHI7Cj4+PiBAQCAtMzUwLDYgKzQzMCwxNyBAQCBzdGF0aWMgaXJxcmV0dXJuX3QgcGFuZnJvc3Rf
bW11X2lycV9oYW5kbGVyKGludCBpcnEsIHZvaWQgKmRhdGEpCj4+PiAgICAgICAgICAgICAgIGFj
Y2Vzc190eXBlID0gKGZhdWx0X3N0YXR1cyA+PiA4KSAmIDB4MzsKPj4+ICAgICAgICAgICAgICAg
c291cmNlX2lkID0gKGZhdWx0X3N0YXR1cyA+PiAxNik7Cj4+Pgo+Pj4gKyAgICAgICAgICAgICAv
KiBQYWdlIGZhdWx0IG9ubHkgKi8KPj4+ICsgICAgICAgICAgICAgaWYgKChzdGF0dXMgJiBtYXNr
KSA9PSBCSVQoaSkpIHsKPj4+ICsgICAgICAgICAgICAgICAgICAgICBXQVJOX09OKGV4Y2VwdGlv
bl90eXBlIDwgMHhDMSB8fCBleGNlcHRpb25fdHlwZSA+IDB4QzQpOwo+Pj4gKwo+Pj4gKyAgICAg
ICAgICAgICAgICAgICAgIHJldCA9IHBhbmZyb3N0X21tdV9tYXBfZmF1bHRfYWRkcihwZmRldiwg
aSwgYWRkcik7Cj4+PiArICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXQpIHsKPj4+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyAmPSB+bWFzazsKPj4+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwo+Pgo+PiBJbiB0aGlzIGNhc2UgdGhlIElSUSBp
c24ndCBoYW5kbGVkIGFuZCB3aWxsIHJlbWFpbiBhc3NlcnRlZCwgd2hpY2gKPj4gcHJvYmFibHkg
aXNuJ3QgZ29pbmcgdG8gZW5kIHBhcnRpY3VsYXJseSB3ZWxsLgo+IAo+IFRoaXMgaXMgdGhlIHN1
Y2Nlc3MgY29uZGl0aW9uLiBXZSd2ZSBhbHJlYWR5IGNsZWFyZWQgdGhlIGludGVycnVwdCBpbgo+
IHBhbmZyb3N0X21tdV9tYXBfZmF1bHRfYWRkci4gT24gZmFpbHVyZSwgd2UgZmFsbCB0aHJ1IHBy
aW50aW5nIG91dCB0aGUKPiBuZXh0IG1lc3NhZ2UgYW5kIGNsZWFyIHRoZSBpbnRlcnJ1cHQuIE1h
eWJlIGl0IHdvdWxkIGJlIGJldHRlciB0bwo+IGNsZWFyIHRoZSBpbnRlcnJ1cHQgaW4gMSBwbGFj
ZS4uLgoKWW91J3JlIGFic29sdXRlbHkgcmlnaHQgLSBzb3JyeSBmb3IgdGhlIG5vaXNlLiBJIHRo
aW5rIEkgbXVzdCBoYXZlCm1pc3JlYWQgYW5kIGFzc3VtZWQgdGhpcyB3YXMgdGhlIGZhaWx1cmUg
Y29uZGl0aW9uLiBMaWtlIHlvdSBzYXkgdGhvdWdoCml0IG1pZ2h0IGJlIGNsZWFuZXIgdG8gb25s
eSBoYXZlIHRoZSBvbmUgcGxhY2UgdGhhdCB0aGUgaW50ZXJydXB0IGlzCmNsZWFyZWQuCgo+Pgo+
PiBJZGVhbGx5IHlvdSB3b3VsZCBzd2l0Y2ggdGhlIGFkZHJlc3Mgc3BhY2UgdG8gVU5NQVBQRUQg
dG8ga2lsbCBvZmYgdGhlCj4+IGpvYiwgYnV0IGF0IHRoZSB2ZXJ5IGxlYXN0IHdlIHNob3VsZCBh
Y2tub3dsZWRnZSB0aGUgaW50ZXJydXB0IGFuZCBsZXQKPj4gdGhlIEdQVSB0aW1lb3V0IHJlc2V0
IHRoZSBHUFUgdG8gcmVjb3ZlciAod2hpY2ggaXMgZXF1aXZhbGVudCB3aGlsZSB3ZQo+PiBzdGls
bCBvbmx5IHVzZSB0aGUgb25lIEFTIG9uIHRoZSBHUFUpLgo+IAo+IEknbGwgaG9wZWZ1bGx5IHJl
bWVtYmVyIHRoaXMgZGV0YWlsIHdoZW4gZG9pbmcgbXVsdGlwbGUgQVMuCgpBIGZhaXIgYml0IG9m
IHRoZSBjb21wbGV4aXR5IG9mIGtiYXNlIGNvbWVzIGZyb20gdHJ5aW5nIHRvIGF2b2lkIHRoZQpw
b3NzaWJpbGl0eSBvZiBvbmUgcHJvY2VzcyBEb1NpbmcgYW5vdGhlciBieSBzdWJtaXR0aW5nIG1h
bGljaW91cyBqb2JzLgpUaGUgTU1VIGluIHBhcnRpY3VsYXIgd2lsbCBiYXNpY2FsbHkganVzdCBw
YXVzZSB1bnRpbCBpdCBpcyBraWNrZWQgd2hlbgphIHBhZ2UgZmF1bHQgaGFwcGVucywgc28gVU5N
QVBQRUQgaXMgbmVlZGVkIHRvIHRyaWdnZXIgYSBmYWlsdXJlIGJhY2sKaW50byB0aGUgZXhlY3V0
aW9uIHVuaXRzIHRvIGFsbG93IHRoZSB0aHJlYWRzIHRvIHByb2dyZXNzIGFuZCByZXBvcnQKZmFp
bHVyZSAtIHdoaWNoIGlzIGltcG9ydGFudCBpZiB0aGVyZSdzIGFub3RoZXIgam9iIGNvbXBldGlu
ZyBmb3IgdGhlCnNhbWUgZXhlY3V0aW9uIHVuaXRzLgoKU3RldmUKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmkt
ZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
