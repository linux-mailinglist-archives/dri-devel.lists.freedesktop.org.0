Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C7ABA48666
	for <lists+dri-devel@lfdr.de>; Mon, 17 Jun 2019 17:02:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AA48A892E7;
	Mon, 17 Jun 2019 15:02:33 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x342.google.com (mail-wm1-x342.google.com
 [IPv6:2a00:1450:4864:20::342])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6C319892D5;
 Mon, 17 Jun 2019 15:02:32 +0000 (UTC)
Received: by mail-wm1-x342.google.com with SMTP id c6so9497687wml.0;
 Mon, 17 Jun 2019 08:02:32 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=DmHkxGavMTauI3qZzTGg9rhjrZkVmngbpoajc3r4ls8=;
 b=GSD0pHzriYpsSGyfqhX0u7LzwyD6GMb5fJSIQ8PjnGmvqJQz5nKBGJb0wzEci7svDR
 VDcGbA+uF7w0jZGlJ9IEB020ZQhRre4+ozR9wTy8GG/gDd9MhO4YIFH8x0ni1OgdVc8C
 jSB2QpswbLHIo34/vUw+tDQY5kF3lhVFWRM8onFhlgKMysd5tlGtd2wteKffD6ZM3zcn
 DEkk7FzST/YE3V9sh7dmiZTryw2GX/PUjFfImPOhbXGPDbFAvTf3zKLDpQV+5nbc4HIs
 bMVqFAe6CD6XpQhRuMbqUkNcQHep4viWjAUN0KsIVFIMSGqWYkGgvg47Yw15G4Kjcg1h
 1zvg==
X-Gm-Message-State: APjAAAVqnJK4r7a/I2WtVgYro7ChAR16wQpTgOkEt6EiusYsTMrLM/LG
 peRVAlEOUxNpe0omA1gmhTTEJW5b/YaKkORPVfE=
X-Google-Smtp-Source: APXvYqx7ZPkaUVBa6UQhD3BC90IpJUz4r9Xiw6YHDkWNZmD1Os0nIU+UcBeWVijbrxHoyJGZMJzpbglpEmnAm8R2avQ=
X-Received: by 2002:a05:600c:2149:: with SMTP id
 v9mr18974590wml.141.1560783750304; 
 Mon, 17 Jun 2019 08:02:30 -0700 (PDT)
MIME-Version: 1.0
References: <20190617125216.1439481-1-arnd@arndb.de>
In-Reply-To: <20190617125216.1439481-1-arnd@arndb.de>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Mon, 17 Jun 2019 11:02:18 -0400
Message-ID: <CADnq5_MLH9TW76Cji=pAOtpNd7UiB5w=J=3rT_6UYzgCvsS2pg@mail.gmail.com>
Subject: Re: [PATCH] drm/amdgpu: fix error handling in df_v3_6_pmc_start
To: Arnd Bergmann <arnd@arndb.de>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=DmHkxGavMTauI3qZzTGg9rhjrZkVmngbpoajc3r4ls8=;
 b=iQHtP8e8TmQLxOQJWVuM17S3FcmTJ/6Xulg9OvgS2LSHqn/ERZIiCBHr1+zr0a/Jx5
 lBkCIu2WLNZSx3EWsi/o6cD2CZsbhf0tr4bcO6rH6pbYeVgMhHYXrT3V0YejqKqZJK3I
 qtfLJ9wRvxDBl2qvwv+vU7D7MMGIBd4hKqojlm4nHN4n0m91tSGvuCA6wsW44hWhSDSJ
 j+RhLiBNOdDXbnnpGxT5d4W+8XQCjpFIYdE6lV6h0X07d5a9H1aCIorG4HhRzlChv4xB
 9Ed0hLbXYY0DlaPkKWOp0tzaYbkr9yODNokBz+qanK6E8VK2WY/hYgKBHUccb37ufD7q
 ilcA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jonathan Kim <jonathan.kim@amd.com>, David Airlie <airlied@linux.ie>,
 LKML <linux-kernel@vger.kernel.org>,
 amd-gfx list <amd-gfx@lists.freedesktop.org>,
 Maling list - DRI developers <dri-devel@lists.freedesktop.org>,
 Alex Deucher <alexander.deucher@amd.com>,
 Colin Ian King <colin.king@canonical.com>, Evan Quan <evan.quan@amd.com>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gTW9uLCBKdW4gMTcsIDIwMTkgYXQgODo1NyBBTSBBcm5kIEJlcmdtYW5uIDxhcm5kQGFybmRi
LmRlPiB3cm90ZToKPgo+IFdoZW4gZGZfdjNfNl9wbWNfZ2V0X2N0cmxfc2V0dGluZ3MoKSBmYWls
cyBmb3Igc29tZSByZWFzb24sIHdlCj4gc3RvcmUgdW5pbml0aWFsaXplZCBkYXRhIGluIGEgcmVn
aXN0ZXIsIGFzIGdjYyBwb2ludHMgb3V0Ogo+Cj4gZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
ZGZfdjNfNi5jOiBJbiBmdW5jdGlvbiAnZGZfdjNfNl9wbWNfc3RhcnQnOgo+IGRyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdS5oOjEwMTI6Mjk6IGVycm9yOiAnbG9fdmFsJyBtYXkgYmUg
dXNlZCB1bmluaXRpYWxpemVkIGluIHRoaXMgZnVuY3Rpb24gWy1XZXJyb3I9bWF5YmUtdW5pbml0
aWFsaXplZF0KPiAgI2RlZmluZSBXUkVHMzJfUENJRShyZWcsIHYpIGFkZXYtPnBjaWVfd3JlZyhh
ZGV2LCAocmVnKSwgKHYpKQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXn5+fgo+IGRy
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3YzXzYuYzozMzQ6Mzk6IG5vdGU6ICdsb192YWwn
IHdhcyBkZWNsYXJlZCBoZXJlCj4gICB1aW50MzJfdCBsb19iYXNlX2FkZHIsIGhpX2Jhc2VfYWRk
ciwgbG9fdmFsLCBoaV92YWw7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgXn5+fn5+Cj4KPiBNYWtlIGl0IHJldHVybiBhIHByb3BlciBlcnJvciBjb2RlIHRoYXQgd2Ug
Y2FuIGNhdGNoIGluIHRoZSBjYWxsZXIuCj4KPiBGaXhlczogOTkyYWY5NDJhNmNmICgiZHJtL2Ft
ZGdwdTogYWRkIGRmIHBlcmZtb24gcmVncyBhbmQgZnVuY3MgZm9yIHhnbWkiKQo+IFNpZ25lZC1v
ZmYtYnk6IEFybmQgQmVyZ21hbm4gPGFybmRAYXJuZGIuZGU+CgpBcHBsaWVkLiAgdGhhbmtzIQoK
QWxleAoKPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGZfdjNfNi5jIHwgMTMg
KysrKysrKysrLS0tLQo+ICAxIGZpbGUgY2hhbmdlZCwgOSBpbnNlcnRpb25zKCspLCA0IGRlbGV0
aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3Yz
XzYuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3YzXzYuYwo+IGluZGV4IDhjMDli
Zjk5NGFjZC4uZTA3OWVlMDY2ZDg3IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2RmX3YzXzYuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RmX3Yz
XzYuYwo+IEBAIC0xNzcsNyArMTc3LDcgQEAgc3RhdGljIHZvaWQgZGZfdjNfNl9wbWNfZ2V0X3Jl
YWRfc2V0dGluZ3Moc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4gIH0KPgo+ICAvKiBnZXQg
Y29udHJvbCBjb3VudGVyIHNldHRpbmdzIGkuZS4gYWRkcmVzcyBhbmQgdmFsdWVzIHRvIHNldCAq
Lwo+IC1zdGF0aWMgdm9pZCBkZl92M182X3BtY19nZXRfY3RybF9zZXR0aW5ncyhzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldiwKPiArc3RhdGljIGludCBkZl92M182X3BtY19nZXRfY3RybF9zZXR0
aW5ncyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB1aW50NjRfdCBjb25maWcsCj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgKmxvX2Jhc2VfYWRkciwKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCAqaGlfYmFzZV9hZGRy
LAo+IEBAIC0xOTEsMTIgKzE5MSwxMiBAQCBzdGF0aWMgdm9pZCBkZl92M182X3BtY19nZXRfY3Ry
bF9zZXR0aW5ncyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwKPiAgICAgICAgIGRmX3YzXzZf
cG1jX2dldF9hZGRyKGFkZXYsIGNvbmZpZywgMSwgbG9fYmFzZV9hZGRyLCBoaV9iYXNlX2FkZHIp
Owo+Cj4gICAgICAgICBpZiAobG9fdmFsID09IE5VTEwgfHwgaGlfdmFsID09IE5VTEwpCj4gLSAg
ICAgICAgICAgICAgIHJldHVybjsKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4K
PiAgICAgICAgIGlmICgoKmxvX2Jhc2VfYWRkciA9PSAwKSB8fCAoKmhpX2Jhc2VfYWRkciA9PSAw
KSkgewo+ICAgICAgICAgICAgICAgICBEUk1fRVJST1IoIkRGIFBNQyBhZGRyZXNzaW5nIG5vdCBy
ZXRyaWV2ZWQhIExvOiAleCwgSGk6ICV4IiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICpsb19iYXNlX2FkZHIsICpoaV9iYXNlX2FkZHIpOwo+IC0gICAgICAgICAgICAgICByZXR1
cm47Cj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRU5YSU87Cj4gICAgICAgICB9Cj4KPiAgICAg
ICAgIGV2ZW50c2VsID0gR0VUX0VWRU5UKGNvbmZpZyk7Cj4gQEAgLTIxMSw2ICsyMTEsOCBAQCBz
dGF0aWMgdm9pZCBkZl92M182X3BtY19nZXRfY3RybF9zZXR0aW5ncyhzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSAqYWRldiwKPiAgICAgICAgIGVzXzdfMCA9IGVzXzEzXzAgJiAweDBGRlVMOwo+ICAgICAg
ICAgKmxvX3ZhbCA9IChlc183XzAgJiAweEZGVUwpIHwgKCh1bml0bWFzayAmIDB4MEZVTCkgPDwg
OCk7Cj4gICAgICAgICAqaGlfdmFsID0gKGVzXzExXzggfCAoKGVzXzEzXzEyKTw8KDI5KSkpOwo+
ICsKPiArICAgICAgIHJldHVybiAwOwo+ICB9Cj4KPiAgLyogYXNzaWduIGRmIHBlcmZvcm1hbmNl
IGNvdW50ZXJzIGZvciByZWFkICovCj4gQEAgLTM0NSwxMyArMzQ3LDE2IEBAIHN0YXRpYyBpbnQg
ZGZfdjNfNl9hZGRfeGdtaV9saW5rX2NudHIoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsCj4g
ICAgICAgICBpZiAocmV0IHx8IGlzX2Fzc2lnbmVkKQo+ICAgICAgICAgICAgICAgICByZXR1cm4g
cmV0Owo+Cj4gLSAgICAgICBkZl92M182X3BtY19nZXRfY3RybF9zZXR0aW5ncyhhZGV2LAo+ICsg
ICAgICAgcmV0ID0gZGZfdjNfNl9wbWNfZ2V0X2N0cmxfc2V0dGluZ3MoYWRldiwKPiAgICAgICAg
ICAgICAgICAgICAgICAgICBjb25maWcsCj4gICAgICAgICAgICAgICAgICAgICAgICAgJmxvX2Jh
c2VfYWRkciwKPiAgICAgICAgICAgICAgICAgICAgICAgICAmaGlfYmFzZV9hZGRyLAo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICZsb192YWwsCj4gICAgICAgICAgICAgICAgICAgICAgICAgJmhp
X3ZhbCk7Cj4KPiArICAgICAgIGlmIChyZXQpCj4gKyAgICAgICAgICAgICAgIHJldHVybiByZXQ7
Cj4gKwo+ICAgICAgICAgV1JFRzMyX1BDSUUobG9fYmFzZV9hZGRyLCBsb192YWwpOwo+ICAgICAg
ICAgV1JFRzMyX1BDSUUoaGlfYmFzZV9hZGRyLCBoaV92YWwpOwo+Cj4gLS0KPiAyLjIwLjAKPgo+
IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCj4gZHJpLWRl
dmVsIG1haWxpbmcgbGlzdAo+IGRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbApfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFp
bGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
