Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CFC4046AE6
	for <lists+dri-devel@lfdr.de>; Fri, 14 Jun 2019 22:39:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 921628989C;
	Fri, 14 Jun 2019 20:37:32 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x544.google.com (mail-ed1-x544.google.com
 [IPv6:2a00:1450:4864:20::544])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 33A3B89838
 for <dri-devel@lists.freedesktop.org>; Fri, 14 Jun 2019 20:37:24 +0000 (UTC)
Received: by mail-ed1-x544.google.com with SMTP id k8so5229742eds.7
 for <dri-devel@lists.freedesktop.org>; Fri, 14 Jun 2019 13:37:24 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=vWZfr7ISqOyco6qNaCIPedeBWFUOnZ0cxqOqxgRLM1c=;
 b=YQl9dwXmLSi09+qLdZ57cBwufA2oMMNgByOXVHfjaM8C/45h/MS66PSHSHQ3RKZ4mZ
 X24Lw51ifGEaFr3m1pt7RfwW3VldiSkXb00k9UjDSyEem2SvXiEaoz5iEC2/S7IiXZsI
 nTguKHWPIZ4F412IGlp4OXXJ154xE8OsxrwTjLYr1AjIfAT2vpnBb2H/e6kPxXYByhDZ
 nYx6P9+QOQGrGl8yo8H7860S3MRD3XVOUhkmu9jEjWDWtu+AyNc337h38LaabpehQqSg
 hVPjDcfw8FcNY45jYW/vHqcBv80pD+fTW3YQyrvRbdyvKxhrZZ64xflfzKwO/Fut5MbK
 79ug==
X-Gm-Message-State: APjAAAXC8u9jkIVGkL2cI00O072vDAzwpA8iIdDncdcYGfL+KuXMwGWq
 RzBoHblvf5ib7odxFJamUXg3wQ+Z7u0=
X-Google-Smtp-Source: APXvYqxXisqjXAGwJYNYQFGPAnSwdHNq8sqM4urZEAZvheKiO7AhJJMJfR+SMYwbKK1SNED/AkO0FA==
X-Received: by 2002:a05:6402:78c:: with SMTP id
 d12mr43020119edy.160.1560544641469; 
 Fri, 14 Jun 2019 13:37:21 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id n15sm1166672edd.49.2019.06.14.13.37.20
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 14 Jun 2019 13:37:20 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: DRI Development <dri-devel@lists.freedesktop.org>
Subject: [PATCH 52/59] drm/nouveau: Fill out gem_object->resv
Date: Fri, 14 Jun 2019 22:36:08 +0200
Message-Id: <20190614203615.12639-53-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190614203615.12639-1-daniel.vetter@ffwll.ch>
References: <20190614203615.12639-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=vWZfr7ISqOyco6qNaCIPedeBWFUOnZ0cxqOqxgRLM1c=;
 b=Qrb+VSRzlRZ2oXsBsEE1LUi96MXc8Vn65XYVQ8Klpnx8wthebGTwxUhN0oQPU7LiK5
 /ncXlylhp5U4662Eje2eGtBiaBiExCA792Vlvi3EmJoyDoeoCS8OLz5j/WXnqteLZICY
 wedESWhOjg3HKaUCT9THJF4TUAMmeVnDrR2Ss=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: nouveau@lists.freedesktop.org, Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Ben Skeggs <bskeggs@redhat.com>, Daniel Vetter <daniel.vetter@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhhdCB3YXkgd2UgY2FuIGRpdGNoIG91ciBnZW1fcHJpbWVfcmVzX29iaiBpbXBsZW1lbnRhdGlv
bi4gU2luY2UgdHRtCmFic29sdXRlbHkgbmVlZHMgdGhlIHJpZ2h0IHJlc2VydmF0aW9uIG9iamVj
dCBhbGwgdGhlIGJvaWxlcnBsYXRlIGlzCmFscmVhZHkgdGhlcmUgYW5kIHdlIGp1c3QgaGF2ZSB0
byB3aXJlIGl0IHVwIGNvcnJlY3RseS4KCk5vdGUgdGhhdCBnZW0vcHJpbWUgZG9lc24ndCBjYXJl
IHdoZW4gd2UgZG8gdGhpcywgYXMgbG9uZyBhcyB3ZSBkbyBpdApiZWZvcmUgdGhlIGJvIGlzIHJl
Z2lzdGVyZWQgYW5kIHNvbWVvbmUgY2FuIGNhbGwgdGhlIGhhbmRsZTJmZCBpb2N0bApvbiBpdC4K
CkFzaWRlOiB0dG1fYnVmZmVyX29iamVjdC50dG1fcmVzdiBjb3VsZCBwcm9iYWJseSBiZSBkaXRj
aGVkIGluIGZhdm91cgpvZiBhbHdheXMgcGFzc2luZyBhIG5vbi1OVUxMIHJlc3YgdG8gdHRtX2Jv
X2luaXQoKS4gQXQgbGVhc3QgZm9yIGdlbQpkcml2ZXJzIHRoYXQgd291bGQgYXZvaWQgaGF2aW5n
IHR3byBvZiB0aGVzZSwgb24gaW4gdHRtX2J1ZmZlcl9vYmplY3QKYW5kIHRoZSBvdGhlciBpbiBk
cm1fZ2VtX29iamVjdCwgb25lIGp1c3QgdGhlcmUgZm9yIGNvbmZ1c2lvbi4KClNpZ25lZC1vZmYt
Ynk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAaW50ZWwuY29tPgpDYzogQmVuIFNrZWdn
cyA8YnNrZWdnc0ByZWRoYXQuY29tPgpDYzogbm91dmVhdUBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
LS0tCiBkcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMgICAgfCAyICsrCiBkcml2
ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2RybS5jICAgfCAxIC0KIGRyaXZlcnMvZ3B1L2Ry
bS9ub3V2ZWF1L25vdXZlYXVfZ2VtLmggICB8IDEgLQogZHJpdmVycy9ncHUvZHJtL25vdXZlYXUv
bm91dmVhdV9wcmltZS5jIHwgNyAtLS0tLS0tCiA0IGZpbGVzIGNoYW5nZWQsIDIgaW5zZXJ0aW9u
cygrKSwgOSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVh
dS9ub3V2ZWF1X2JvLmMgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMKaW5k
ZXggMzRhOTk4MDEyYmY2Li42ZjEyMTdiM2U2YjkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9ub3V2ZWF1L25vdXZlYXVfYm8uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2
ZWF1X2JvLmMKQEAgLTI5OSw2ICsyOTksOCBAQCBub3V2ZWF1X2JvX25ldyhzdHJ1Y3Qgbm91dmVh
dV9jbGkgKmNsaSwgdTY0IHNpemUsIGludCBhbGlnbiwKIAkJCSAgdHlwZSwgJm52Ym8tPnBsYWNl
bWVudCwKIAkJCSAgYWxpZ24gPj4gUEFHRV9TSElGVCwgZmFsc2UsIGFjY19zaXplLCBzZywKIAkJ
CSAgcm9iaiwgbm91dmVhdV9ib19kZWxfdHRtKTsKKwludmJvLT5nZW0ucmVzdiA9IG52Ym8tPmJv
LnJlc3Y7CisKIAlpZiAocmV0KSB7CiAJCS8qIHR0bSB3aWxsIGNhbGwgbm91dmVhdV9ib19kZWxf
dHRtIGlmIGl0IGZhaWxzLi4gKi8KIAkJcmV0dXJuIHJldDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZHJtLmMgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9u
b3V2ZWF1X2RybS5jCmluZGV4IDQzNzdiODM2MjY1Zi4uMmMzNjMxOWMxNThmIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2RybS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9ub3V2ZWF1L25vdXZlYXVfZHJtLmMKQEAgLTExMzEsNyArMTEzMSw2IEBAIGRyaXZlcl9z
dHViID0gewogCS5wcmltZV9oYW5kbGVfdG9fZmQgPSBkcm1fZ2VtX3ByaW1lX2hhbmRsZV90b19m
ZCwKIAkucHJpbWVfZmRfdG9faGFuZGxlID0gZHJtX2dlbV9wcmltZV9mZF90b19oYW5kbGUsCiAJ
LmdlbV9wcmltZV9waW4gPSBub3V2ZWF1X2dlbV9wcmltZV9waW4sCi0JLmdlbV9wcmltZV9yZXNf
b2JqID0gbm91dmVhdV9nZW1fcHJpbWVfcmVzX29iaiwKIAkuZ2VtX3ByaW1lX3VucGluID0gbm91
dmVhdV9nZW1fcHJpbWVfdW5waW4sCiAJLmdlbV9wcmltZV9nZXRfc2dfdGFibGUgPSBub3V2ZWF1
X2dlbV9wcmltZV9nZXRfc2dfdGFibGUsCiAJLmdlbV9wcmltZV9pbXBvcnRfc2dfdGFibGUgPSBu
b3V2ZWF1X2dlbV9wcmltZV9pbXBvcnRfc2dfdGFibGUsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vbm91dmVhdS9ub3V2ZWF1X2dlbS5oIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91
dmVhdV9nZW0uaAppbmRleCBmZTM5OTk4ZjY1Y2MuLjlkZWEwMTUzODdmZCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9nZW0uaAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vbm91dmVhdS9ub3V2ZWF1X2dlbS5oCkBAIC0zMyw3ICszMyw2IEBAIGV4dGVybiBpbnQgbm91
dmVhdV9nZW1faW9jdGxfaW5mbyhzdHJ1Y3QgZHJtX2RldmljZSAqLCB2b2lkICosCiAJCQkJICBz
dHJ1Y3QgZHJtX2ZpbGUgKik7CiAKIGV4dGVybiBpbnQgbm91dmVhdV9nZW1fcHJpbWVfcGluKHN0
cnVjdCBkcm1fZ2VtX29iamVjdCAqKTsKLXN0cnVjdCByZXNlcnZhdGlvbl9vYmplY3QgKm5vdXZl
YXVfZ2VtX3ByaW1lX3Jlc19vYmooc3RydWN0IGRybV9nZW1fb2JqZWN0ICopOwogZXh0ZXJuIHZv
aWQgbm91dmVhdV9nZW1fcHJpbWVfdW5waW4oc3RydWN0IGRybV9nZW1fb2JqZWN0ICopOwogZXh0
ZXJuIHN0cnVjdCBzZ190YWJsZSAqbm91dmVhdV9nZW1fcHJpbWVfZ2V0X3NnX3RhYmxlKHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqKTsKIGV4dGVybiBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm5vdXZl
YXVfZ2VtX3ByaW1lX2ltcG9ydF9zZ190YWJsZSgKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9ub3V2ZWF1L25vdXZlYXVfcHJpbWUuYyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZl
YXVfcHJpbWUuYwppbmRleCAxZmVmYzkzYWYxZDcuLmVjNTAwMTc2OTJkNCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9wcmltZS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9ub3V2ZWF1L25vdXZlYXVfcHJpbWUuYwpAQCAtMTA3LDEwICsxMDcsMyBAQCB2b2lkIG5v
dXZlYXVfZ2VtX3ByaW1lX3VucGluKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKQogCiAJbm91
dmVhdV9ib191bnBpbihudmJvKTsKIH0KLQotc3RydWN0IHJlc2VydmF0aW9uX29iamVjdCAqbm91
dmVhdV9nZW1fcHJpbWVfcmVzX29iaihzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKLXsKLQlz
dHJ1Y3Qgbm91dmVhdV9ibyAqbnZibyA9IG5vdXZlYXVfZ2VtX29iamVjdChvYmopOwotCi0JcmV0
dXJuIG52Ym8tPmJvLnJlc3Y7Ci19Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
