Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 14FA72B50EF
	for <lists+dri-devel@lfdr.de>; Mon, 16 Nov 2020 20:23:11 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 63F1F6EA1E;
	Mon, 16 Nov 2020 19:23:07 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A308A6EA1E
 for <dri-devel@lists.freedesktop.org>; Mon, 16 Nov 2020 19:23:06 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id p8so20036598wrx.5
 for <dri-devel@lists.freedesktop.org>; Mon, 16 Nov 2020 11:23:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=lGJlxAHJ0Hc3kG4B/OrlWI96WbVM9kSbMnDUmVXiaow=;
 b=VqcbiNF0URnRGgNAMkz11DkCINTcTmHFjbayTeFb8v++VCN9/RY6AlC7rHJK+PkmVe
 yEN3Lv06N5ZOVZtxoVUtRXpdaxuDfoCVttclkCdhZ+EdH+wciZALdI5ha5owHgILKBfu
 RRG2Gdzumcn5vvRfeASkjwNIXUT7KRoEJO9nIS6zpXB3kViiw6VyDFhO6p+L0y9vmelb
 933bS48AJuKrMmHmw/Cv3XyEaW4cKDNwCoCvdnFvRzAUQPRz4ZEv4U/WzSdoJxk7YTyA
 jdB2uEpRHOoxOMgH3DlQw1KQfzAMq93Hiw0jTpCIvJQy7Wd8p4klvVyMwE48N2GXl+Gt
 pJXA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=lGJlxAHJ0Hc3kG4B/OrlWI96WbVM9kSbMnDUmVXiaow=;
 b=ty75K4cFd84ACeUIrqUlq9vIm3KqLpmbAHN1wHlBg5yqGxF318SQjl8WQ+NeV4KZoM
 tGSxteB8VONClg+EifXk1EBIId3EG1w6HsNewYmloYiR+p9uZUJ99CQ/L23IJBdzRJdw
 a6z5s1rPuZXNg6H9i8qp1hAV0HUfh22Q5Xi9+3y5CVLMqAkNUIa7bs2AsfZDvkwV8Tqk
 CvCBgAjuKsZDnNDLwfsvcFwbOnF4mCaghWRMwpbdweeKaV5p+Q6GlIJM2pMfc3LMcMxS
 rbFgLDY3Z4ZJEmRYXjtwP0Qwh3asG2Pqabv7Ufh6Kp1EMr3cXFZO5DAet0nWMjKykaed
 nLyg==
X-Gm-Message-State: AOAM532x5mEJRXwkWRSliKraJy6/DeauHPfHwGGix9lk8Mx7zyRyOioe
 Yj3FlyYsD29TmcT9StBg/V3a1kdTTo3tz7kPzB0=
X-Google-Smtp-Source: ABdhPJzVi0bPUAsLjRKaYVk1ODynoQf/J8G/u780Z/DpYvCzUYJSKT6u2w7fQAn3xGcfVPRSyXxszWCDfXkJ3zSXXsk=
X-Received: by 2002:a5d:6992:: with SMTP id g18mr20852784wru.362.1605554585330; 
 Mon, 16 Nov 2020 11:23:05 -0800 (PST)
MIME-Version: 1.0
References: <20201116191429.1636-1-christian.koenig@amd.com>
In-Reply-To: <20201116191429.1636-1-christian.koenig@amd.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Mon, 16 Nov 2020 14:22:54 -0500
Message-ID: <CADnq5_PmH9VhQnGMXtOENgoeTPxpQaiGaMSLmzjHgLpLeMo5WQ@mail.gmail.com>
Subject: Re: [PATCH] drm/amdgpu: fix check oder in amdgpu_bo_move
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <ckoenig.leichtzumerken@gmail.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maling list - DRI developers <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gTW9uLCBOb3YgMTYsIDIwMjAgYXQgMjoxNCBQTSBDaHJpc3RpYW4gS8O2bmlnCjxja29lbmln
LmxlaWNodHp1bWVya2VuQGdtYWlsLmNvbT4gd3JvdGU6Cj4KPiBSZW9yZGVyIHRoZSBjb2RlIHRv
IGZpeCBjaGVja2luZyBpZiBibGl0dGluZyBpcyBhdmFpbGFibGUuCj4KPiBTaWduZWQtb2ZmLWJ5
OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Cj4gRml4ZXM6IGY1
YTg5YTVjYWU4MSBkcm0vYW1kZ3B1L3R0bTogdXNlIG11bHRpaG9wCgpUeXBvIGluIHRoZSBzdWJq
ZWN0IChvZGVyIC0+IG9yZGVyKS4gIFdpdGggdGhhdCBmaXhlcyB0aGUgcGF0Y2ggaXM6CkFja2Vk
LWJ5OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Cgo+IC0tLQo+ICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgfCA1MyArKysrKysrKysrKy0t
LS0tLS0tLS0tLS0tCj4gIDEgZmlsZSBjaGFuZ2VkLCAyMyBpbnNlcnRpb25zKCspLCAzMCBkZWxl
dGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKPiBpbmRl
eCA2NzZmYjUyMGUwNDQuLmM0MzhkMjkwYTZkYiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfdHRtLmMKPiBAQCAtNTUxLDI1ICs1NTEsMTIgQEAgc3RhdGljIGludCBhbWRn
cHVfYm9fbW92ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBib29sIGV2aWN0LAo+ICAg
ICAgICAgc3RydWN0IHR0bV9yZXNvdXJjZSAqb2xkX21lbSA9ICZiby0+bWVtOwo+ICAgICAgICAg
aW50IHI7Cj4KPiAtICAgICAgIGlmICgob2xkX21lbS0+bWVtX3R5cGUgPT0gVFRNX1BMX1NZU1RF
TSAmJgo+IC0gICAgICAgICAgICBuZXdfbWVtLT5tZW1fdHlwZSA9PSBUVE1fUExfVlJBTSkgfHwK
PiAtICAgICAgICAgICAob2xkX21lbS0+bWVtX3R5cGUgPT0gVFRNX1BMX1ZSQU0gJiYKPiAtICAg
ICAgICAgICAgbmV3X21lbS0+bWVtX3R5cGUgPT0gVFRNX1BMX1NZU1RFTSkpIHsKPiAtICAgICAg
ICAgICAgICAgaG9wLT5mcGZuID0gMDsKPiAtICAgICAgICAgICAgICAgaG9wLT5scGZuID0gMDsK
PiAtICAgICAgICAgICAgICAgaG9wLT5tZW1fdHlwZSA9IFRUTV9QTF9UVDsKPiAtICAgICAgICAg
ICAgICAgaG9wLT5mbGFncyA9IDA7Cj4gLSAgICAgICAgICAgICAgIHJldHVybiAtRU1VTFRJSE9Q
Owo+IC0gICAgICAgfQo+IC0KPiAgICAgICAgIGlmIChuZXdfbWVtLT5tZW1fdHlwZSA9PSBUVE1f
UExfVFQpIHsKPiAgICAgICAgICAgICAgICAgciA9IGFtZGdwdV90dG1fYmFja2VuZF9iaW5kKGJv
LT5iZGV2LCBiby0+dHRtLCBuZXdfbWVtKTsKPiAgICAgICAgICAgICAgICAgaWYgKHIpCj4gICAg
ICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7Cj4gICAgICAgICB9Cj4KPiAtICAgICAgIGFt
ZGdwdV9ib19tb3ZlX25vdGlmeShibywgZXZpY3QsIG5ld19tZW0pOwo+IC0KPiAgICAgICAgIC8q
IENhbid0IG1vdmUgYSBwaW5uZWQgQk8gKi8KPiAgICAgICAgIGFibyA9IHR0bV90b19hbWRncHVf
Ym8oYm8pOwo+ICAgICAgICAgaWYgKFdBUk5fT05fT05DRShhYm8tPnRiby5waW5fY291bnQgPiAw
KSkKPiBAQCAtNTc5LDI0ICs1NjYsMjMgQEAgc3RhdGljIGludCBhbWRncHVfYm9fbW92ZShzdHJ1
Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBib29sIGV2aWN0LAo+Cj4gICAgICAgICBpZiAob2xk
X21lbS0+bWVtX3R5cGUgPT0gVFRNX1BMX1NZU1RFTSAmJiBiby0+dHRtID09IE5VTEwpIHsKPiAg
ICAgICAgICAgICAgICAgdHRtX2JvX21vdmVfbnVsbChibywgbmV3X21lbSk7Cj4gLSAgICAgICAg
ICAgICAgIHJldHVybiAwOwo+ICsgICAgICAgICAgICAgICBnb3RvIG91dDsKPiAgICAgICAgIH0K
PiAgICAgICAgIGlmIChvbGRfbWVtLT5tZW1fdHlwZSA9PSBUVE1fUExfU1lTVEVNICYmCj4gICAg
ICAgICAgICAgbmV3X21lbS0+bWVtX3R5cGUgPT0gVFRNX1BMX1RUKSB7Cj4gICAgICAgICAgICAg
ICAgIHR0bV9ib19tb3ZlX251bGwoYm8sIG5ld19tZW0pOwo+IC0gICAgICAgICAgICAgICByZXR1
cm4gMDsKPiArICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4gICAgICAgICB9Cj4gLQo+ICAgICAg
ICAgaWYgKG9sZF9tZW0tPm1lbV90eXBlID09IFRUTV9QTF9UVCAmJgo+ICAgICAgICAgICAgIG5l
d19tZW0tPm1lbV90eXBlID09IFRUTV9QTF9TWVNURU0pIHsKPiAgICAgICAgICAgICAgICAgciA9
IHR0bV9ib193YWl0X2N0eChibywgY3R4KTsKPiAgICAgICAgICAgICAgICAgaWYgKHIpCj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgZ290byBmYWlsOwo+ICsgICAgICAgICAgICAgICAgICAgICAg
IHJldHVybiByOwo+Cj4gICAgICAgICAgICAgICAgIGFtZGdwdV90dG1fYmFja2VuZF91bmJpbmQo
Ym8tPmJkZXYsIGJvLT50dG0pOwo+ICAgICAgICAgICAgICAgICB0dG1fcmVzb3VyY2VfZnJlZShi
bywgJmJvLT5tZW0pOwo+ICAgICAgICAgICAgICAgICB0dG1fYm9fYXNzaWduX21lbShibywgbmV3
X21lbSk7Cj4gLSAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICsgICAgICAgICAgICAgICBnb3Rv
IG91dDsKPiAgICAgICAgIH0KPgo+ICAgICAgICAgaWYgKG9sZF9tZW0tPm1lbV90eXBlID09IEFN
REdQVV9QTF9HRFMgfHwKPiBAQCAtNjA3LDI3ICs1OTMsMzcgQEAgc3RhdGljIGludCBhbWRncHVf
Ym9fbW92ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBib29sIGV2aWN0LAo+ICAgICAg
ICAgICAgIG5ld19tZW0tPm1lbV90eXBlID09IEFNREdQVV9QTF9PQSkgewo+ICAgICAgICAgICAg
ICAgICAvKiBOb3RoaW5nIHRvIHNhdmUgaGVyZSAqLwo+ICAgICAgICAgICAgICAgICB0dG1fYm9f
bW92ZV9udWxsKGJvLCBuZXdfbWVtKTsKPiAtICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4gKyAg
ICAgICAgICAgICAgIGdvdG8gb3V0Owo+ICAgICAgICAgfQo+Cj4gLSAgICAgICBpZiAoIWFkZXYt
Pm1tYW4uYnVmZmVyX2Z1bmNzX2VuYWJsZWQpIHsKPiArICAgICAgIGlmIChhZGV2LT5tbWFuLmJ1
ZmZlcl9mdW5jc19lbmFibGVkKSB7Cj4gKyAgICAgICAgICAgICAgIGlmICgoKG9sZF9tZW0tPm1l
bV90eXBlID09IFRUTV9QTF9TWVNURU0gJiYKPiArICAgICAgICAgICAgICAgICAgICAgbmV3X21l
bS0+bWVtX3R5cGUgPT0gVFRNX1BMX1ZSQU0pIHx8Cj4gKyAgICAgICAgICAgICAgICAgICAgKG9s
ZF9tZW0tPm1lbV90eXBlID09IFRUTV9QTF9WUkFNICYmCj4gKyAgICAgICAgICAgICAgICAgICAg
IG5ld19tZW0tPm1lbV90eXBlID09IFRUTV9QTF9TWVNURU0pKSkgewo+ICsgICAgICAgICAgICAg
ICAgICAgICAgIGhvcC0+ZnBmbiA9IDA7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaG9wLT5s
cGZuID0gMDsKPiArICAgICAgICAgICAgICAgICAgICAgICBob3AtPm1lbV90eXBlID0gVFRNX1BM
X1RUOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGhvcC0+ZmxhZ3MgPSAwOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIHJldHVybiAtRU1VTFRJSE9QOwo+ICsgICAgICAgICAgICAgICB9Cj4g
Kwo+ICsgICAgICAgICAgICAgICByID0gYW1kZ3B1X21vdmVfYmxpdChibywgZXZpY3QsIG5ld19t
ZW0sIG9sZF9tZW0pOwo+ICsgICAgICAgfSBlbHNlIHsKPiAgICAgICAgICAgICAgICAgciA9IC1F
Tk9ERVY7Cj4gLSAgICAgICAgICAgICAgIGdvdG8gbWVtY3B5Owo+ICAgICAgICAgfQo+Cj4gLSAg
ICAgICByID0gYW1kZ3B1X21vdmVfYmxpdChibywgZXZpY3QsIG5ld19tZW0sIG9sZF9tZW0pOwo+
ICAgICAgICAgaWYgKHIpIHsKPiAtbWVtY3B5Ogo+ICAgICAgICAgICAgICAgICAvKiBDaGVjayB0
aGF0IGFsbCBtZW1vcnkgaXMgQ1BVIGFjY2Vzc2libGUgKi8KPiAgICAgICAgICAgICAgICAgaWYg
KCFhbWRncHVfbWVtX3Zpc2libGUoYWRldiwgb2xkX21lbSkgfHwKPiAgICAgICAgICAgICAgICAg
ICAgICFhbWRncHVfbWVtX3Zpc2libGUoYWRldiwgbmV3X21lbSkpIHsKPiAgICAgICAgICAgICAg
ICAgICAgICAgICBwcl9lcnIoIk1vdmUgYnVmZmVyIGZhbGxiYWNrIHRvIG1lbWNweSB1bmF2YWls
YWJsZVxuIik7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgZ290byBmYWlsOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIHJldHVybiByOwo+ICAgICAgICAgICAgICAgICB9Cj4KPiAgICAgICAg
ICAgICAgICAgciA9IHR0bV9ib19tb3ZlX21lbWNweShibywgY3R4LCBuZXdfbWVtKTsKPiAgICAg
ICAgICAgICAgICAgaWYgKHIpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgZ290byBmYWlsOwo+
ICsgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByOwo+ICAgICAgICAgfQo+Cj4gICAgICAg
ICBpZiAoYm8tPnR5cGUgPT0gdHRtX2JvX3R5cGVfZGV2aWNlICYmCj4gQEAgLTYzOSwxNCArNjM1
LDExIEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2JvX21vdmUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0
ICpibywgYm9vbCBldmljdCwKPiAgICAgICAgICAgICAgICAgYWJvLT5mbGFncyAmPSB+QU1ER1BV
X0dFTV9DUkVBVEVfQ1BVX0FDQ0VTU19SRVFVSVJFRDsKPiAgICAgICAgIH0KPgo+ICtvdXQ6Cj4g
ICAgICAgICAvKiB1cGRhdGUgc3RhdGlzdGljcyAqLwo+ICAgICAgICAgYXRvbWljNjRfYWRkKCh1
NjQpYm8tPm51bV9wYWdlcyA8PCBQQUdFX1NISUZULCAmYWRldi0+bnVtX2J5dGVzX21vdmVkKTsK
PiArICAgICAgIGFtZGdwdV9ib19tb3ZlX25vdGlmeShibywgZXZpY3QsIG5ld19tZW0pOwo+ICAg
ICAgICAgcmV0dXJuIDA7Cj4gLWZhaWw6Cj4gLSAgICAgICBzd2FwKCpuZXdfbWVtLCBiby0+bWVt
KTsKPiAtICAgICAgIGFtZGdwdV9ib19tb3ZlX25vdGlmeShibywgZmFsc2UsIG5ld19tZW0pOwo+
IC0gICAgICAgc3dhcCgqbmV3X21lbSwgYm8tPm1lbSk7Cj4gLSAgICAgICByZXR1cm4gcjsKPiAg
fQo+Cj4gIC8qKgo+IC0tCj4gMi4yNS4xCj4KPiBfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwo+IGRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKPiBkcmktZGV2ZWxA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9kcmktZGV2ZWwKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZHJpLWRldmVsCg==
