Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3F4D287D1D
	for <lists+dri-devel@lfdr.de>; Fri,  9 Aug 2019 16:46:54 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 42D586EE18;
	Fri,  9 Aug 2019 14:46:51 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 07C616EE18
 for <dri-devel@lists.freedesktop.org>; Fri,  9 Aug 2019 14:46:50 +0000 (UTC)
Received: from mail-qk1-f170.google.com (mail-qk1-f170.google.com
 [209.85.222.170])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 7450B208C4
 for <dri-devel@lists.freedesktop.org>; Fri,  9 Aug 2019 14:46:49 +0000 (UTC)
Received: by mail-qk1-f170.google.com with SMTP id u190so8158695qkh.5
 for <dri-devel@lists.freedesktop.org>; Fri, 09 Aug 2019 07:46:49 -0700 (PDT)
X-Gm-Message-State: APjAAAWLsg8UD+0Xoy7gyrpUke+lbmsblOeXaNz9YCqtorYGcHxcKTrD
 lkfwDwXyIEL46lMZbdnhjt6gofpk4LN830tvEA==
X-Google-Smtp-Source: APXvYqy4wvQN9xrb8GS9n+sWFWhxBB3+X82VruIpLStrRc6d0fAXNf9FU0gEbRrk9OwmBcIwLo1xr4t1ShdQOXcGdzY=
X-Received: by 2002:a37:6944:: with SMTP id e65mr17203340qkc.119.1565362008518; 
 Fri, 09 Aug 2019 07:46:48 -0700 (PDT)
MIME-Version: 1.0
References: <20190808222918.15153-1-robh@kernel.org>
 <2ee6ef1f-7b73-3361-cfdd-6c021b7fe1b0@arm.com>
In-Reply-To: <2ee6ef1f-7b73-3361-cfdd-6c021b7fe1b0@arm.com>
From: Rob Herring <robh@kernel.org>
Date: Fri, 9 Aug 2019 08:46:36 -0600
X-Gmail-Original-Message-ID: <CAL_JsqKRrm9gTZK+irs4K+x85aC8nOu_PRb6uLzCWHARwbk0VA@mail.gmail.com>
Message-ID: <CAL_JsqKRrm9gTZK+irs4K+x85aC8nOu_PRb6uLzCWHARwbk0VA@mail.gmail.com>
Subject: Re: [PATCH] drm/panfrost: Implement per FD address spaces
To: Steven Price <steven.price@arm.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=kernel.org; s=default; t=1565362009;
 bh=FG79/sWnZ0zJpwjiFFPFs33E/Q0fs/iZMtA6Smh7Gzw=;
 h=References:In-Reply-To:From:Date:Subject:To:Cc:From;
 b=ruDJoxG16uaQUSavbE2GTSm8yTetYRh65gjMX5PP8E1dE3ak79ycdzm4rwwSkDizF
 HMHsAUqeL7Qd2UVVcvd2ShyEtHIM6hf07ouySZA8xX60VTyaP0gIfrcTa/rs27iYiI
 EHWqiYItXzk5ZLM/AsT65vIAMRVKWkySuWl/6BTw=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, Robin Murphy <robin.murphy@arm.com>,
 Tomeu Vizoso <tomeu.vizoso@collabora.com>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

IGNPbiBGcmksIEF1ZyA5LCAyMDE5IGF0IDY6MzYgQU0gU3RldmVuIFByaWNlIDxzdGV2ZW4ucHJp
Y2VAYXJtLmNvbT4gd3JvdGU6Cj4KPiBPbiAwOC8wOC8yMDE5IDIzOjI5LCBSb2IgSGVycmluZyB3
cm90ZToKPiA+IFVwIHVudGlsIG5vdywgYSBzaW5nbGUgc2hhcmVkIEdQVSBhZGRyZXNzIHNwYWNl
IHdhcyB1c2VkLiBUaGlzIGlzIG5vdAo+ID4gaWRlYWwgYXMgdGhlcmUncyBubyBwcm90ZWN0aW9u
IGJldHdlZW4gcHJvY2Vzc2VzIGFuZCBkb2Vzbid0IHdvcmsgZm9yCj4gPiBzdXBwb3J0aW5nIHRo
ZSBzYW1lIEdQVS9DUFUgVkEgZmVhdHVyZS4gTW9zdCBpbXBvcnRhbnRseSwgdGhpcyB3aWxsCj4g
PiBob3BlZnVsbHkgbWl0aWdhdGUgQWx5c3NhJ3MgZmVhciBvZiBXZWJHTCwgd2hhdGV2ZXIgdGhh
dCBpcy4KPiA+Cj4gPiBNb3N0IG9mIHRoZSBjaGFuZ2VzIGhlcmUgYXJlIG1vdmluZyBzdHJ1Y3Qg
ZHJtX21tIGFuZCBzdHJ1Y3QKPiA+IHBhbmZyb3N0X21tdSBvYmplY3RzIGZyb20gdGhlIHBlciBk
ZXZpY2Ugc3RydWN0IHRvIHRoZSBwZXIgRkQgc3RydWN0Lgo+ID4gVGhlIGNyaXRpY2FsIGZ1bmN0
aW9uIGlzIHBhbmZyb3N0X21tdV9hc19nZXQoKSB3aGljaCBoYW5kbGVzIGFsbG9jYXRpbmcKPiA+
IGFuZCBzd2l0Y2hpbmcgdGhlIGgvdyBhZGRyZXNzIHNwYWNlcy4KPiA+Cj4gPiBDYzogVG9tZXUg
Vml6b3NvIDx0b21ldS52aXpvc29AY29sbGFib3JhLmNvbT4KPiA+IENjOiBEYXZpZCBBaXJsaWUg
PGFpcmxpZWRAbGludXguaWU+Cj4gPiBDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xsLmNo
Pgo+ID4gQ2M6IFJvYmluIE11cnBoeSA8cm9iaW4ubXVycGh5QGFybS5jb20+Cj4gPiBDYzogU3Rl
dmVuIFByaWNlIDxzdGV2ZW4ucHJpY2VAYXJtLmNvbT4KPiA+IENjOiBBbHlzc2EgUm9zZW56d2Vp
ZyA8YWx5c3NhLnJvc2VuendlaWdAY29sbGFib3JhLmNvbT4KPiA+IFNpZ25lZC1vZmYtYnk6IFJv
YiBIZXJyaW5nIDxyb2JoQGtlcm5lbC5vcmc+Cj4gPiAtLS0KPiA+IFRoaXMgZGVwZW5kcyBvbiBt
YWR2aXNlIHN1cHBvcnQgKG5vdyBpbiBkcm0tbWlzYykgYW5kIHRoZSBoZWFwL25vLWV4ZWMKPiA+
IHNlcmllcyAoanVzdCB0aGUgcmV3b3JrKS4gU2VlZW1zIHRvIGJlIHdvcmtpbmcgcHJldHR5IHdl
bGwgZm9yIG1lLCBidXQKPiA+IG1vcmUgdGVzdGluZyB3b3VsZCBiZSBoZWxwZnVsLiBJJ3ZlIHJ1
biBtdWx0aXBsZSAnZ2xtYXJrMi1lczItZHJtCj4gPiAtLW9mZi1zY3JlZW4nIGluc3RhbmNlcyBh
bmQgR25vbWUgU2hlbGwuIFJ1bm5pbmcgbW9yZSB0aGFuIDggY2xpZW50cyAoYXQKPiA+IGxlYXN0
IGZvciBUODYwKSB3aWxsIGhpdCB0aGUgYWRkcmVzcyBzcGFjZSBzd2l0Y2ggY29kZSBwYXRocy4K
PiA+Cj4gPiBSb2IKPiA+Cj4gPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L1RPRE8gICAgICAg
ICAgICAgIHwgICA0IC0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2
aWNlLmMgfCAgIDIgKwo+ID4gIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZp
Y2UuaCB8ICAyNCArKy0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZHJ2
LmMgICAgfCAgMzEgKystCj4gPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dl
bS5jICAgIHwgIDE1ICstCj4gPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dl
bS5oICAgIHwgICAzICsKPiA+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9i
LmMgICAgfCAgMTIgKy0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfbW11
LmMgICAgfCAyMjAgKysrKysrKysrKysrKysrLS0tLS0tCj4gPiAgZHJpdmVycy9ncHUvZHJtL3Bh
bmZyb3N0L3BhbmZyb3N0X21tdS5oICAgIHwgICA4ICsKPiA+ICA5IGZpbGVzIGNoYW5nZWQsIDIz
OSBpbnNlcnRpb25zKCspLCA4MCBkZWxldGlvbnMoLSkKPiA+Cj4gPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L1RPRE8gYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvVE9E
Two+ID4gaW5kZXggZTc3MjdiMjkyMzU1Li41MzZhMGQ0ZjhkMjkgMTAwNjQ0Cj4gPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvVE9ETwo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmZyb3N0L1RPRE8KPiA+IEBAIC02LDEwICs2LDYgQEAKPiA+ICAgIC0gQmlmcm9zdCBzcGVjaWZp
YyBmZWF0dXJlIGFuZCBpc3N1ZSBoYW5kbGluZwo+ID4gICAgLSBDb2hlcmVudCBETUEgc3VwcG9y
dAo+ID4KPiA+IC0tIFBlciBGRCBhZGRyZXNzIHNwYWNlIHN1cHBvcnQuIFRoZSBoL3cgc3VwcG9y
dHMgbXVsdGlwbGUgYWRkcmVzc2VzIHNwYWNlcy4KPiA+IC0gIFRoZSBoYXJkIHBhcnQgaXMgaGFu
ZGxpbmcgd2hlbiBtb3JlIGFkZHJlc3Mgc3BhY2VzIGFyZSBuZWVkZWQgdGhhbiB3aGF0Cj4gPiAt
ICB0aGUgaC93IHByb3ZpZGVzLgo+ID4gLQo+ID4gIC0gU3VwcG9ydCB1c2Vyc3BhY2UgY29udHJv
bGxlZCBHUFUgdmlydHVhbCBhZGRyZXNzZXMuIE5lZWRlZCBmb3IgVnVsa2FuLiAoVG9tZXUpCj4g
Pgo+ID4gIC0gQ29tcHV0ZSBqb2Igc3VwcG9ydC4gU28gY2FsbGVkICdjb21wdXRlIG9ubHknIGpv
YnMgbmVlZCB0byBiZSBwbHVtYmVkIHVwIHRvCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0
L3BhbmZyb3N0X2RldmljZS5jCj4gPiBpbmRleCA5ODE0ZjRjY2JkMjYuLjRkYTcxYmI1NmMyMCAx
MDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2Uu
Ywo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5jCj4g
PiBAQCAtMTIzLDggKzEyMywxMCBAQCBpbnQgcGFuZnJvc3RfZGV2aWNlX2luaXQoc3RydWN0IHBh
bmZyb3N0X2RldmljZSAqcGZkZXYpCj4gPiAgICAgICBtdXRleF9pbml0KCZwZmRldi0+c2NoZWRf
bG9jayk7Cj4gPiAgICAgICBtdXRleF9pbml0KCZwZmRldi0+cmVzZXRfbG9jayk7Cj4gPiAgICAg
ICBJTklUX0xJU1RfSEVBRCgmcGZkZXYtPnNjaGVkdWxlZF9qb2JzKTsKPiA+ICsgICAgIElOSVRf
TElTVF9IRUFEKCZwZmRldi0+YXNfbHJ1X2xpc3QpOwo+ID4KPiA+ICAgICAgIHNwaW5fbG9ja19p
bml0KCZwZmRldi0+aHdhY2Nlc3NfbG9jayk7Cj4gPiArICAgICBzcGluX2xvY2tfaW5pdCgmcGZk
ZXYtPmFzX2xvY2spOwo+ID4KPiA+ICAgICAgIGVyciA9IHBhbmZyb3N0X2Nsa19pbml0KHBmZGV2
KTsKPiA+ICAgICAgIGlmIChlcnIpIHsKPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
cGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmggYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFu
ZnJvc3RfZGV2aWNlLmgKPiA+IGluZGV4IDRlNTY0MWRiOWM3ZS4uZjUwM2M1NjZlOTlmIDEwMDY0
NAo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5oCj4g
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmgKPiA+IEBA
IC01LDYgKzUsOCBAQAo+ID4gICNpZm5kZWYgX19QQU5GUk9TVF9ERVZJQ0VfSF9fCj4gPiAgI2Rl
ZmluZSBfX1BBTkZST1NUX0RFVklDRV9IX18KPiA+Cj4gPiArI2luY2x1ZGUgPGxpbnV4L2F0b21p
Yy5oPgo+ID4gKyNpbmNsdWRlIDxsaW51eC9pby1wZ3RhYmxlLmg+Cj4gPiAgI2luY2x1ZGUgPGxp
bnV4L3NwaW5sb2NrLmg+Cj4gPiAgI2luY2x1ZGUgPGRybS9kcm1fZGV2aWNlLmg+Cj4gPiAgI2lu
Y2x1ZGUgPGRybS9kcm1fbW0uaD4KPiA+IEBAIC02Myw5ICs2NSw2IEBAIHN0cnVjdCBwYW5mcm9z
dF9kZXZpY2Ugewo+ID4KPiA+ICAgICAgIHNwaW5sb2NrX3QgaHdhY2Nlc3NfbG9jazsKPiA+Cj4g
PiAtICAgICBzdHJ1Y3QgZHJtX21tIG1tOwo+ID4gLSAgICAgc3BpbmxvY2tfdCBtbV9sb2NrOwo+
ID4gLQo+ID4gICAgICAgdm9pZCBfX2lvbWVtICppb21lbTsKPiA+ICAgICAgIHN0cnVjdCBjbGsg
KmNsb2NrOwo+ID4gICAgICAgc3RydWN0IGNsayAqYnVzX2Nsb2NrOwo+ID4gQEAgLTc0LDcgKzcz
LDExIEBAIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2Ugewo+ID4KPiA+ICAgICAgIHN0cnVjdCBwYW5m
cm9zdF9mZWF0dXJlcyBmZWF0dXJlczsKPiA+Cj4gPiAtICAgICBzdHJ1Y3QgcGFuZnJvc3RfbW11
ICptbXU7Cj4gPiArICAgICBzcGlubG9ja190IGFzX2xvY2s7Cj4gPiArICAgICB1bnNpZ25lZCBs
b25nIGFzX2luX3VzZV9tYXNrOwo+ID4gKyAgICAgdW5zaWduZWQgbG9uZyBhc19hbGxvY19tYXNr
Owo+ID4gKyAgICAgc3RydWN0IGxpc3RfaGVhZCBhc19scnVfbGlzdDsKPiA+ICsKPiA+ICAgICAg
IHN0cnVjdCBwYW5mcm9zdF9qb2Jfc2xvdCAqanM7Cj4gPgo+ID4gICAgICAgc3RydWN0IHBhbmZy
b3N0X2pvYiAqam9ic1tOVU1fSk9CX1NMT1RTXTsKPiA+IEBAIC05OCwxMCArMTAxLDIzIEBAIHN0
cnVjdCBwYW5mcm9zdF9kZXZpY2Ugewo+ID4gICAgICAgfSBkZXZmcmVxOwo+ID4gIH07Cj4gPgo+
ID4gK3N0cnVjdCBwYW5mcm9zdF9tbXUgewo+ID4gKyAgICAgc3RydWN0IGlvX3BndGFibGVfY2Zn
IHBndGJsX2NmZzsKPiA+ICsgICAgIHN0cnVjdCBpb19wZ3RhYmxlX29wcyAqcGd0Ymxfb3BzOwo+
ID4gKyAgICAgc3RydWN0IG11dGV4IGxvY2s7Cj4gPiArICAgICBpbnQgYXM7Cj4gPiArICAgICBh
dG9taWNfdCBhc19jb3VudDsKPiA+ICsgICAgIHN0cnVjdCBsaXN0X2hlYWQgbGlzdDsKPiA+ICt9
Owo+ID4gKwo+ID4gIHN0cnVjdCBwYW5mcm9zdF9maWxlX3ByaXYgewo+ID4gICAgICAgc3RydWN0
IHBhbmZyb3N0X2RldmljZSAqcGZkZXY7Cj4gPgo+ID4gICAgICAgc3RydWN0IGRybV9zY2hlZF9l
bnRpdHkgc2NoZWRfZW50aXR5W05VTV9KT0JfU0xPVFNdOwo+ID4gKwo+ID4gKyAgICAgc3RydWN0
IHBhbmZyb3N0X21tdSBtbXU7Cj4gPiArICAgICBzdHJ1Y3QgZHJtX21tIG1tOwo+ID4gKyAgICAg
c3BpbmxvY2tfdCBtbV9sb2NrOwo+ID4gIH07Cj4gPgo+ID4gIHN0YXRpYyBpbmxpbmUgc3RydWN0
IHBhbmZyb3N0X2RldmljZSAqdG9fcGFuZnJvc3RfZGV2aWNlKHN0cnVjdCBkcm1fZGV2aWNlICpk
ZGV2KQo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9k
cnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kcnYuYwo+ID4gaW5kZXgg
YTEzNTI3NTA5ODRjLi43YzhhYTFhODA1NGYgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vcGFuZnJvc3QvcGFuZnJvc3RfZHJ2LmMKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5m
cm9zdC9wYW5mcm9zdF9kcnYuYwo+ID4gQEAgLTQwMyw2ICs0MDMsNyBAQCBzdGF0aWMgdm9pZCBw
YW5mcm9zdF9kcm1fbW1fY29sb3JfYWRqdXN0KGNvbnN0IHN0cnVjdCBkcm1fbW1fbm9kZSAqbm9k
ZSwKPiA+ICBzdGF0aWMgaW50Cj4gPiAgcGFuZnJvc3Rfb3BlbihzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCj4gPiAgewo+ID4gKyAgICAgaW50IHJldDsKPiA+
ICAgICAgIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsK
PiA+ICAgICAgIHN0cnVjdCBwYW5mcm9zdF9maWxlX3ByaXYgKnBhbmZyb3N0X3ByaXY7Cj4gPgo+
ID4gQEAgLTQxMyw3ICs0MTQsMjggQEAgcGFuZnJvc3Rfb3BlbihzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpCj4gPiAgICAgICBwYW5mcm9zdF9wcml2LT5wZmRl
diA9IHBmZGV2Owo+ID4gICAgICAgZmlsZS0+ZHJpdmVyX3ByaXYgPSBwYW5mcm9zdF9wcml2Owo+
ID4KPiA+IC0gICAgIHJldHVybiBwYW5mcm9zdF9qb2Jfb3BlbihwYW5mcm9zdF9wcml2KTsKPiA+
ICsgICAgIHNwaW5fbG9ja19pbml0KCZwYW5mcm9zdF9wcml2LT5tbV9sb2NrKTsKPiA+ICsKPiA+
ICsgICAgIC8qIDRHIGVub3VnaCBmb3Igbm93LiBjYW4gYmUgNDgtYml0ICovCj4gPiArICAgICBw
YW5mcm9zdF9wcml2LT5tbS5jb2xvcl9hZGp1c3QgPSBwYW5mcm9zdF9kcm1fbW1fY29sb3JfYWRq
dXN0Owo+ID4gKyAgICAgZHJtX21tX2luaXQoJnBhbmZyb3N0X3ByaXYtPm1tLCBTWl8zMk0gPj4g
UEFHRV9TSElGVCwgKFNaXzRHIC0gU1pfMzJNKSA+PiBQQUdFX1NISUZUKTsKPiA+ICsKPiA+ICsg
ICAgIHJldCA9IHBhbmZyb3N0X21tdV9wZ3RhYmxlX2FsbG9jKHBhbmZyb3N0X3ByaXYpOwo+ID4g
KyAgICAgaWYgKHJldCkKPiA+ICsgICAgICAgICAgICAgZ290byBlcnJfcGd0YWJsZTsKPiA+ICsK
PiA+ICsgICAgIHJldCA9IHBhbmZyb3N0X2pvYl9vcGVuKHBhbmZyb3N0X3ByaXYpOwo+ID4gKyAg
ICAgaWYgKHJldCkKPiA+ICsgICAgICAgICAgICAgZ290byBlcnJfam9iOwo+ID4gKwo+ID4gKyAg
ICAgcmV0dXJuIDA7Cj4gPiArCj4gPiArZXJyX2pvYjoKPiA+ICsgICAgIHBhbmZyb3N0X21tdV9w
Z3RhYmxlX2ZyZWUocGFuZnJvc3RfcHJpdik7Cj4gPiArZXJyX3BndGFibGU6Cj4gPiArICAgICBk
cm1fbW1fdGFrZWRvd24oJnBhbmZyb3N0X3ByaXYtPm1tKTsKPiA+ICsgICAgIGtmcmVlKHBhbmZy
b3N0X3ByaXYpOwo+Cj4gTG9va3MgbGlrZSB0aGlzIGtmcmVlIHdhcyBtaXNzaW5nIGJlZm9yZS4u
LiA6KQoKWWVzLCBpZiBwYW5mcm9zdF9qb2Jfb3BlbigpIGNhbiBmYWlsLiBQcm9iYWJseSB3YXJy
YW50cyBpdHMgb3duIChzdGFibGUpIHBhdGNoLgoKPgo+ID4gKyAgICAgcmV0dXJuIHJldDsKPiA+
ICB9Cj4gPgo+ID4gIHN0YXRpYyB2b2lkCj4gPiBAQCAtNDI0LDYgKzQ0Niw4IEBAIHBhbmZyb3N0
X3Bvc3RjbG9zZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUp
Cj4gPiAgICAgICBwYW5mcm9zdF9wZXJmY250X2Nsb3NlKHBhbmZyb3N0X3ByaXYpOwo+ID4gICAg
ICAgcGFuZnJvc3Rfam9iX2Nsb3NlKHBhbmZyb3N0X3ByaXYpOwo+ID4KPiA+ICsgICAgIHBhbmZy
b3N0X21tdV9wZ3RhYmxlX2ZyZWUocGFuZnJvc3RfcHJpdik7Cj4gPiArICAgICBkcm1fbW1fdGFr
ZWRvd24oJnBhbmZyb3N0X3ByaXYtPm1tKTsKPiA+ICAgICAgIGtmcmVlKHBhbmZyb3N0X3ByaXYp
Owo+ID4gIH0KPiA+Cj4gPiBAQCAtNDk2LDE0ICs1MjAsOSBAQCBzdGF0aWMgaW50IHBhbmZyb3N0
X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gPiAgICAgICBkZGV2LT5kZXZf
cHJpdmF0ZSA9IHBmZGV2Owo+ID4gICAgICAgcGZkZXYtPmRkZXYgPSBkZGV2Owo+ID4KPiA+IC0g
ICAgIHNwaW5fbG9ja19pbml0KCZwZmRldi0+bW1fbG9jayk7Cj4gPiAgICAgICBtdXRleF9pbml0
KCZwZmRldi0+c2hyaW5rZXJfbG9jayk7Cj4gPiAgICAgICBJTklUX0xJU1RfSEVBRCgmcGZkZXYt
PnNocmlua2VyX2xpc3QpOwo+ID4KPiA+IC0gICAgIC8qIDRHIGVub3VnaCBmb3Igbm93LiBjYW4g
YmUgNDgtYml0ICovCj4gPiAtICAgICBkcm1fbW1faW5pdCgmcGZkZXYtPm1tLCBTWl8zMk0gPj4g
UEFHRV9TSElGVCwgKFNaXzRHIC0gU1pfMzJNKSA+PiBQQUdFX1NISUZUKTsKPiA+IC0gICAgIHBm
ZGV2LT5tbS5jb2xvcl9hZGp1c3QgPSBwYW5mcm9zdF9kcm1fbW1fY29sb3JfYWRqdXN0Owo+ID4g
LQo+ID4gICAgICAgcG1fcnVudGltZV91c2VfYXV0b3N1c3BlbmQocGZkZXYtPmRldik7Cj4gPiAg
ICAgICBwbV9ydW50aW1lX3NldF9hdXRvc3VzcGVuZF9kZWxheShwZmRldi0+ZGV2LCA1MCk7IC8q
IH4zIGZyYW1lcyAqLwo+ID4gICAgICAgcG1fcnVudGltZV9lbmFibGUocGZkZXYtPmRldik7Cj4g
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbS5jIGIv
ZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbS5jCj4gPiBpbmRleCAzN2EzYTZl
ZDQ2MTcuLjkzMjA0YjQ0ZWY5MCAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5m
cm9zdC9wYW5mcm9zdF9nZW0uYwo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3Bh
bmZyb3N0X2dlbS5jCj4gPiBAQCAtNDcsOCArNDcsOCBAQCBzdGF0aWMgaW50IHBhbmZyb3N0X2dl
bV9vcGVuKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVf
cAo+ID4gICAgICAgc2l6ZV90IHNpemUgPSBvYmotPnNpemU7Cj4gPiAgICAgICB1NjQgYWxpZ247
Cj4gPiAgICAgICBzdHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm8gPSB0b19wYW5mcm9zdF9i
byhvYmopOwo+ID4gLSAgICAgc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYgPSBvYmotPmRl
di0+ZGV2X3ByaXZhdGU7Cj4gPiAgICAgICB1bnNpZ25lZCBsb25nIGNvbG9yID0gYm8tPm5vZXhl
YyA/IFBBTkZST1NUX0JPX05PRVhFQyA6IDA7Cj4gPiArICAgICBzdHJ1Y3QgcGFuZnJvc3RfZmls
ZV9wcml2ICpwcml2ID0gZmlsZV9wcml2LT5kcml2ZXJfcHJpdjsKPiA+Cj4gPiAgICAgICAvKgo+
ID4gICAgICAgICogRXhlY3V0YWJsZSBidWZmZXJzIGNhbm5vdCBjcm9zcyBhIDE2TUIgYm91bmRh
cnkgYXMgdGhlIHByb2dyYW0KPiA+IEBAIC02MSw4ICs2MSw5IEBAIHN0YXRpYyBpbnQgcGFuZnJv
c3RfZ2VtX29wZW4oc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIHN0cnVjdCBkcm1fZmlsZSAq
ZmlsZV9wCj4gPiAgICAgICBlbHNlCj4gPiAgICAgICAgICAgICAgIGFsaWduID0gc2l6ZSA+PSBT
Wl8yTSA/IFNaXzJNID4+IFBBR0VfU0hJRlQgOiAwOwo+ID4KPiA+IC0gICAgIHNwaW5fbG9jaygm
cGZkZXYtPm1tX2xvY2spOwo+ID4gLSAgICAgcmV0ID0gZHJtX21tX2luc2VydF9ub2RlX2dlbmVy
aWMoJnBmZGV2LT5tbSwgJmJvLT5ub2RlLAo+ID4gKyAgICAgYm8tPm1tdSA9ICZwcml2LT5tbXU7
Cj4gPiArICAgICBzcGluX2xvY2soJnByaXYtPm1tX2xvY2spOwo+ID4gKyAgICAgcmV0ID0gZHJt
X21tX2luc2VydF9ub2RlX2dlbmVyaWMoJnByaXYtPm1tLCAmYm8tPm5vZGUsCj4gPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplID4+IFBBR0VfU0hJRlQsIGFsaWdu
LCBjb2xvciwgMCk7Cj4gPiAgICAgICBpZiAocmV0KQo+ID4gICAgICAgICAgICAgICBnb3RvIG91
dDsKPiA+IEBAIC03MywyMiArNzQsMjIgQEAgc3RhdGljIGludCBwYW5mcm9zdF9nZW1fb3Blbihz
dHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgc3RydWN0IGRybV9maWxlICpmaWxlX3AKPiA+ICAg
ICAgICAgICAgICAgICAgICAgICBkcm1fbW1fcmVtb3ZlX25vZGUoJmJvLT5ub2RlKTsKPiA+ICAg
ICAgIH0KPiA+ICBvdXQ6Cj4gPiAtICAgICBzcGluX3VubG9jaygmcGZkZXYtPm1tX2xvY2spOwo+
ID4gKyAgICAgc3Bpbl91bmxvY2soJnByaXYtPm1tX2xvY2spOwo+ID4gICAgICAgcmV0dXJuIHJl
dDsKPiA+ICB9Cj4gPgo+ID4gIHN0YXRpYyB2b2lkIHBhbmZyb3N0X2dlbV9jbG9zZShzdHJ1Y3Qg
ZHJtX2dlbV9vYmplY3QgKm9iaiwgc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYpCj4gPiAgewo+
ID4gICAgICAgc3RydWN0IHBhbmZyb3N0X2dlbV9vYmplY3QgKmJvID0gdG9fcGFuZnJvc3RfYm8o
b2JqKTsKPiA+IC0gICAgIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gb2JqLT5kZXYt
PmRldl9wcml2YXRlOwo+ID4gKyAgICAgc3RydWN0IHBhbmZyb3N0X2ZpbGVfcHJpdiAqcHJpdiA9
IGZpbGVfcHJpdi0+ZHJpdmVyX3ByaXY7Cj4gPgo+ID4gICAgICAgaWYgKGJvLT5pc19tYXBwZWQp
Cj4gPiAgICAgICAgICAgICAgIHBhbmZyb3N0X21tdV91bm1hcChibyk7Cj4gPgo+ID4gLSAgICAg
c3Bpbl9sb2NrKCZwZmRldi0+bW1fbG9jayk7Cj4gPiArICAgICBzcGluX2xvY2soJnByaXYtPm1t
X2xvY2spOwo+ID4gICAgICAgaWYgKGRybV9tbV9ub2RlX2FsbG9jYXRlZCgmYm8tPm5vZGUpKQo+
ID4gICAgICAgICAgICAgICBkcm1fbW1fcmVtb3ZlX25vZGUoJmJvLT5ub2RlKTsKPiA+IC0gICAg
IHNwaW5fdW5sb2NrKCZwZmRldi0+bW1fbG9jayk7Cj4gPiArICAgICBzcGluX3VubG9jaygmcHJp
di0+bW1fbG9jayk7Cj4gPiAgfQo+ID4KPiA+ICBzdGF0aWMgaW50IHBhbmZyb3N0X2dlbV9waW4o
c3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbS5oIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3Bh
bmZyb3N0X2dlbS5oCj4gPiBpbmRleCBlMTBmNTgzMTY5MTUuLjUwOTIwODE5Y2MxNiAxMDA2NDQK
PiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9nZW0uaAo+ID4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dlbS5oCj4gPiBAQCAtNywxMCAr
NywxMyBAQAo+ID4gICNpbmNsdWRlIDxkcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIuaD4KPiA+ICAj
aW5jbHVkZSA8ZHJtL2RybV9tbS5oPgo+ID4KPiA+ICtzdHJ1Y3QgcGFuZnJvc3RfbW11Owo+ID4g
Kwo+ID4gIHN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0IHsKPiA+ICAgICAgIHN0cnVjdCBkcm1f
Z2VtX3NobWVtX29iamVjdCBiYXNlOwo+ID4gICAgICAgc3RydWN0IHNnX3RhYmxlICpzZ3RzOwo+
ID4KPiA+ICsgICAgIHN0cnVjdCBwYW5mcm9zdF9tbXUgKm1tdTsKPiA+ICAgICAgIHN0cnVjdCBk
cm1fbW1fbm9kZSBub2RlOwo+ID4gICAgICAgYm9vbCBpc19tYXBwZWQgICAgICAgICAgOjE7Cj4g
PiAgICAgICBib29sIG5vZXhlYyAgICAgICAgICAgICA6MTsKPiA+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFu
ZnJvc3QvcGFuZnJvc3Rfam9iLmMKPiA+IGluZGV4IGQ1NjdjZTk4NDk0Yy4uYWVhODQ2MTBiOGNk
IDEwMDY0NAo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5j
Cj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMKPiA+IEBA
IC0xNTMsNiArMTUzLDggQEAgc3RhdGljIHZvaWQgcGFuZnJvc3Rfam9iX2h3X3N1Ym1pdChzdHJ1
Y3QgcGFuZnJvc3Rfam9iICpqb2IsIGludCBqcykKPiA+ICAgICAgIGlmIChXQVJOX09OKGpvYl9y
ZWFkKHBmZGV2LCBKU19DT01NQU5EX05FWFQoanMpKSkpCj4gPiAgICAgICAgICAgICAgIGdvdG8g
ZW5kOwo+ID4KPiA+ICsgICAgIGNmZyA9IHBhbmZyb3N0X21tdV9hc19nZXQocGZkZXYsICZqb2It
PmZpbGVfcHJpdi0+bW11KTsKPiA+ICsKPiA+ICAgICAgIHBhbmZyb3N0X2RldmZyZXFfcmVjb3Jk
X3RyYW5zaXRpb24ocGZkZXYsIGpzKTsKPiA+ICAgICAgIHNwaW5fbG9ja19pcnFzYXZlKCZwZmRl
di0+aHdhY2Nlc3NfbG9jaywgZmxhZ3MpOwo+ID4KPiA+IEBAIC0xNjMsOCArMTY1LDcgQEAgc3Rh
dGljIHZvaWQgcGFuZnJvc3Rfam9iX2h3X3N1Ym1pdChzdHJ1Y3QgcGFuZnJvc3Rfam9iICpqb2Is
IGludCBqcykKPiA+Cj4gPiAgICAgICAvKiBzdGFydCBNTVUsIG1lZGl1bSBwcmlvcml0eSwgY2Fj
aGUgY2xlYW4vZmx1c2ggb24gZW5kLCBjbGVhbi9mbHVzaCBvbgo+ID4gICAgICAgICogc3RhcnQg
Ki8KPiA+IC0gICAgIC8qIFRPRE86IGRpZmZlcmVudCBhZGRyZXNzIHNwYWNlcyAqLwo+ID4gLSAg
ICAgY2ZnID0gSlNfQ09ORklHX1RIUkVBRF9QUkkoOCkgfAo+ID4gKyAgICAgY2ZnIHw9IEpTX0NP
TkZJR19USFJFQURfUFJJKDgpIHwKPiA+ICAgICAgICAgICAgICAgSlNfQ09ORklHX1NUQVJUX0ZM
VVNIX0NMRUFOX0lOVkFMSURBVEUgfAo+ID4gICAgICAgICAgICAgICBKU19DT05GSUdfRU5EX0ZM
VVNIX0NMRUFOX0lOVkFMSURBVEU7Cj4gPgo+ID4gQEAgLTI4MCw2ICsyODEsOSBAQCBzdGF0aWMg
dm9pZCBwYW5mcm9zdF9qb2JfY2xlYW51cChzdHJ1Y3Qga3JlZiAqcmVmKQo+ID4gICAgICAgICAg
ICAgICBrdmZyZWUoam9iLT5ib3MpOwo+ID4gICAgICAgfQo+ID4KPiA+ICsgICAgIGZvciAoaSA9
IDA7IGkgPCBOVU1fSk9CX1NMT1RTOyBpKyspCj4gPiArICAgICAgICAgICAgIGlmIChqb2IgPT0g
am9iLT5wZmRldi0+am9ic1tpXSkKPiA+ICsgICAgICAgICAgICAgICAgICAgICBqb2ItPnBmZGV2
LT5qb2JzW2ldID0gTlVMTDsKPgo+IEknbSBhIGJpdCB3b3JyaWVkIGFib3V0IHRoaXMuIEFzIGZh
ciBhcyBJIGNhbiBzZWUgcHJldmlvdXNseSB0aGUgam9icwo+IGFycmF5IHdvdWxkIGp1c3QgY29u
dGFpbiBkYW5nbGluZyBwb2ludGVycyAtIHdoaWNoIGFkbWl0dGVkbHkgd2Fzbid0Cj4gaWRlYWwu
IEhvd2V2ZXIgZG8gd2UgaGF2ZSBzdWZmaWNpZW50IGxvY2tzIGhlcmUgdG8gZW5zdXJlIHRoYXQg
dGhpcwo+IGNvdWxkIGJlIHJhY2luZyB3aXRoIGEgcGFuZnJvc3Rfam9iX3J1bigpIG9uIHRoZSBz
YW1lIHNsb3Q/IEknbSB3b3JyaWVkCj4gdGhhdCBiZXR3ZWVuIHRoZSBjaGVjayBhbmQgdGhlIGFz
c2lnbm1lbnQgdG8gTlVMTCBpdCBpcyBwb3NzaWJsZQo+IChhZG1pdHRlZGx5IHZlcnkgdW5saWtl
bHkpIGZvciBwYW5mcm9zdF9qb2JfcnVuKCkgdG8gYXNzaWduIGEgbmV3Cj4gcG9pbnRlciB3aGlj
aCB3b3VsZCB0aGVuIGJlIGNsb2JiZXJlZC4KClllYWgsIGl0J3MgdWdseS4gVGhlIG9ubHkgcGxh
Y2Ugd2UgbmVlZCB0aGlzIGlzIHRoZSBqb2IgSVNSLiBMb29raW5nCmF0IGl0IGFnYWluLCBJIGNv
dWxkIGp1c3QgY2xlYXIgdGhpcyBwb2ludGVyIGluIHRoZSBJU1IgaW5zdGVhZCBiZWZvcmUKdGhl
IGRvbmVfZmVuY2UuIEkgdGhpbmsgdGhlIGZlbmNlIHNob3VsZCBiZSBlbm91Z2ggdG8gcHJldmVu
dCBhbnkKcmFjZXMuCgpXZSBzaG91bGQgcHJvYmFibHkgYWxzbyBjbGVhciB0aGUgYXJyYXkgaW4g
dGhlIHRpbWVvdXQvcmVzZXQgaGFuZGxpbmcsCmJ1dCBJIGd1ZXNzIGl0IGRvZXNuJ3QgcmVhbGx5
IG1hdHRlciBnaXZlbiBhbiBJU1Igc2hvdWxkIG5vdCBoYXBwZW4KYmVmb3JlIGEgam9iIHJ1bi4K
Cj4KPiA+ICAgICAgIGtmcmVlKGpvYik7Cj4gPiAgfQo+ID4KPiA+IEBAIC0zNzcsOCArMzgxLDkg
QEAgc3RhdGljIHZvaWQgcGFuZnJvc3Rfam9iX3RpbWVkb3V0KHN0cnVjdCBkcm1fc2NoZWRfam9i
ICpzY2hlZF9qb2IpCj4gPiAgICAgICBpZiAoZG1hX2ZlbmNlX2lzX3NpZ25hbGVkKGpvYi0+ZG9u
ZV9mZW5jZSkpCj4gPiAgICAgICAgICAgICAgIHJldHVybjsKPiA+Cj4gPiAtICAgICBkZXZfZXJy
KHBmZGV2LT5kZXYsICJncHUgc2NoZWQgdGltZW91dCwganM9JWQsIHN0YXR1cz0weCV4LCBoZWFk
PTB4JXgsIHRhaWw9MHgleCwgc2NoZWRfam9iPSVwIiwKPiA+ICsgICAgIGRldl9lcnIocGZkZXYt
PmRldiwgImdwdSBzY2hlZCB0aW1lb3V0LCBqcz0lZCwgY29uZmlnPTB4JXgsIHN0YXR1cz0weCV4
LCBoZWFkPTB4JXgsIHRhaWw9MHgleCwgc2NoZWRfam9iPSVwIiwKPiA+ICAgICAgICAgICAgICAg
anMsCj4gPiArICAgICAgICAgICAgIGpvYl9yZWFkKHBmZGV2LCBKU19DT05GSUcoanMpKSwKPiA+
ICAgICAgICAgICAgICAgam9iX3JlYWQocGZkZXYsIEpTX1NUQVRVUyhqcykpLAo+ID4gICAgICAg
ICAgICAgICBqb2JfcmVhZChwZmRldiwgSlNfSEVBRF9MTyhqcykpLAo+ID4gICAgICAgICAgICAg
ICBqb2JfcmVhZChwZmRldiwgSlNfVEFJTF9MTyhqcykpLAo+ID4gQEAgLTQ0OCw2ICs0NTMsNyBA
QCBzdGF0aWMgaXJxcmV0dXJuX3QgcGFuZnJvc3Rfam9iX2lycV9oYW5kbGVyKGludCBpcnEsIHZv
aWQgKmRhdGEpCj4gPiAgICAgICAgICAgICAgIH0KPiA+Cj4gPiAgICAgICAgICAgICAgIGlmIChz
dGF0dXMgJiBKT0JfSU5UX01BU0tfRE9ORShqKSkgewo+ID4gKyAgICAgICAgICAgICAgICAgICAg
IHBhbmZyb3N0X21tdV9hc19wdXQocGZkZXYsICZwZmRldi0+am9ic1tqXS0+ZmlsZV9wcml2LT5t
bXUpOwo+ID4gICAgICAgICAgICAgICAgICAgICAgIHBhbmZyb3N0X2RldmZyZXFfcmVjb3JkX3Ry
YW5zaXRpb24ocGZkZXYsIGopOwo+ID4gICAgICAgICAgICAgICAgICAgICAgIGRtYV9mZW5jZV9z
aWduYWwocGZkZXYtPmpvYnNbal0tPmRvbmVfZmVuY2UpOwo+ID4gICAgICAgICAgICAgICB9Cj4g
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5jIGIv
ZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5jCj4gPiBpbmRleCAyZWQ0MTFm
MDlkODAuLmY4ZGE3NTU3ZDFiZSAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5m
cm9zdC9wYW5mcm9zdF9tbXUuYwo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3Bh
bmZyb3N0X21tdS5jCj4gPiBAQCAtMSw1ICsxLDYgQEAKPiA+ICAvLyBTUERYLUxpY2Vuc2UtSWRl
bnRpZmllcjogIEdQTC0yLjAKPiA+ICAvKiBDb3B5cmlnaHQgMjAxOSBMaW5hcm8sIEx0ZCwgUm9i
IEhlcnJpbmcgPHJvYmhAa2VybmVsLm9yZz4gKi8KPiA+ICsjaW5jbHVkZSA8bGludXgvYXRvbWlj
Lmg+Cj4gPiAgI2luY2x1ZGUgPGxpbnV4L2JpdGZpZWxkLmg+Cj4gPiAgI2luY2x1ZGUgPGxpbnV4
L2RlbGF5Lmg+Cj4gPiAgI2luY2x1ZGUgPGxpbnV4L2RtYS1tYXBwaW5nLmg+Cj4gPiBAQCAtMjIs
MTIgKzIzLDYgQEAKPiA+ICAjZGVmaW5lIG1tdV93cml0ZShkZXYsIHJlZywgZGF0YSkgd3JpdGVs
KGRhdGEsIGRldi0+aW9tZW0gKyByZWcpCj4gPiAgI2RlZmluZSBtbXVfcmVhZChkZXYsIHJlZykg
cmVhZGwoZGV2LT5pb21lbSArIHJlZykKPiA+Cj4gPiAtc3RydWN0IHBhbmZyb3N0X21tdSB7Cj4g
PiAtICAgICBzdHJ1Y3QgaW9fcGd0YWJsZV9jZmcgcGd0YmxfY2ZnOwo+ID4gLSAgICAgc3RydWN0
IGlvX3BndGFibGVfb3BzICpwZ3RibF9vcHM7Cj4gPiAtICAgICBzdHJ1Y3QgbXV0ZXggbG9jazsK
PiA+IC19Owo+ID4gLQo+ID4gIHN0YXRpYyBpbnQgd2FpdF9yZWFkeShzdHJ1Y3QgcGFuZnJvc3Rf
ZGV2aWNlICpwZmRldiwgdTMyIGFzX25yKQo+ID4gIHsKPiA+ICAgICAgIGludCByZXQ7Cj4gPiBA
QCAtOTEsNiArODYsOSBAQCBzdGF0aWMgaW50IG1tdV9od19kb19vcGVyYXRpb24oc3RydWN0IHBh
bmZyb3N0X2RldmljZSAqcGZkZXYsIHUzMiBhc19uciwKPiA+ICAgICAgIHVuc2lnbmVkIGxvbmcg
ZmxhZ3M7Cj4gPiAgICAgICBpbnQgcmV0Owo+ID4KPiA+ICsgICAgIGlmIChhc19uciA8IDApCj4g
PiArICAgICAgICAgICAgIHJldHVybiAwOwo+ID4gKwo+Cj4gRG8gd2UgbmVlZCBhbnkgc3luY2hy
b25pc2F0aW9uIHdpdGggcGFuZnJvc3RfbW11X2FzX2dldCgpIGZvciB0aGlzIHRvIGJlCj4gcmVs
aWFibGU/IEFzIGZhciBhcyBJIGNhbiBzZWUgdGhpcyBjaGVjayBjYW4gcmFjZSB3aXRoIHRoZSBh
c3NpZ25tZW50IG9mCj4gYW4gYWRkcmVzcyBzcGFjZS4gUGVyaGFwcyBwYW5mcm9zdF9tbXVfYXNf
Z2V0KCkgKG9yIG1heWJlCj4gcGFuZnJvc3RfbW11X2VuYWJsZSkgc2hvdWxkIGhvbGQgbW11LT5s
b2NrPwoKWWVzLCBJIHRoaW5rIHlvdSBhcmUgcmlnaHQuCgo+Cj4gPiAgICAgICBzcGluX2xvY2tf
aXJxc2F2ZSgmcGZkZXYtPmh3YWNjZXNzX2xvY2ssIGZsYWdzKTsKPiA+Cj4gPiAgICAgICBpZiAo
b3AgIT0gQVNfQ09NTUFORF9VTkxPQ0spCj4gPiBAQCAtMTA3LDkgKzEwNSwxMCBAQCBzdGF0aWMg
aW50IG1tdV9od19kb19vcGVyYXRpb24oc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIHUz
MiBhc19uciwKPiA+ICAgICAgIHJldHVybiByZXQ7Cj4gPiAgfQo+ID4KPiA+IC1zdGF0aWMgdm9p
ZCBwYW5mcm9zdF9tbXVfZW5hYmxlKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LCB1MzIg
YXNfbnIpCj4gPiArc3RhdGljIHZvaWQgcGFuZnJvc3RfbW11X2VuYWJsZShzdHJ1Y3QgcGFuZnJv
c3RfZGV2aWNlICpwZmRldiwgc3RydWN0IHBhbmZyb3N0X21tdSAqbW11KQo+ID4gIHsKPiA+IC0g
ICAgIHN0cnVjdCBpb19wZ3RhYmxlX2NmZyAqY2ZnID0gJnBmZGV2LT5tbXUtPnBndGJsX2NmZzsK
PiA+ICsgICAgIGludCBhc19uciA9IG1tdS0+YXM7Cj4gPiArICAgICBzdHJ1Y3QgaW9fcGd0YWJs
ZV9jZmcgKmNmZyA9ICZtbXUtPnBndGJsX2NmZzsKPiA+ICAgICAgIHU2NCB0cmFuc3RhYiA9IGNm
Zy0+YXJtX21hbGlfbHBhZV9jZmcudHJhbnN0YWI7Cj4gPiAgICAgICB1NjQgbWVtYXR0ciA9IGNm
Zy0+YXJtX21hbGlfbHBhZV9jZmcubWVtYXR0cjsKPiA+Cj4gPiBAQCAtMTM2LDkgKzEzNSw4NyBA
QCBzdGF0aWMgdm9pZCBtbXVfZGlzYWJsZShzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwg
dTMyIGFzX25yKQo+ID4gICAgICAgd3JpdGVfY21kKHBmZGV2LCBhc19uciwgQVNfQ09NTUFORF9V
UERBVEUpOwo+ID4gIH0KPiA+Cj4gPiArdTMyIHBhbmZyb3N0X21tdV9hc19nZXQoc3RydWN0IHBh
bmZyb3N0X2RldmljZSAqcGZkZXYsIHN0cnVjdCBwYW5mcm9zdF9tbXUgKm1tdSkKPiA+ICt7Cj4g
PiArICAgICBpbnQgYXMgPSBtbXUtPmFzOwo+ID4gKwo+ID4gKyAgICAgc3Bpbl9sb2NrKCZwZmRl
di0+YXNfbG9jayk7Cj4gPiArCj4gPiArICAgICBhcyA9IG1tdS0+YXM7Cj4gPiArICAgICBpZiAo
YXMgPj0gMCkgewo+ID4gKyAgICAgICAgICAgICBpbnQgZW4gPSBhdG9taWNfZmV0Y2hfaW5jKCZt
bXUtPmFzX2NvdW50KTsKPiA+ICsgICAgICAgICAgICAgV0FSTl9PTihlbiA+IDIpOwo+ID4gKwo+
ID4gKyAgICAgICAgICAgICBsaXN0X21vdmUoJm1tdS0+bGlzdCwgJnBmZGV2LT5hc19scnVfbGlz
dCk7Cj4gPiArICAgICAgICAgICAgIHNwaW5fdW5sb2NrKCZwZmRldi0+YXNfbG9jayk7Cj4gPiAr
ICAgICAgICAgICAgIGlmICghZW4pCj4gPiArICAgICAgICAgICAgICAgICAgICAgcGFuZnJvc3Rf
bW11X2VuYWJsZShwZmRldiwgbW11KTsKPgo+IEkgZG9uJ3Qgc2VlIHdoeSB3ZSBuZWVkIHRvIHJl
LWVuYWJsZSBoZXJlIC0gaWYgKGFzID49IDApIHRoZW4gdGhlIEFTCj4gc2hvdWxkIGJlIHByZXNl
bnQgb24gdGhlIEdQVSBhbmQgbW11X2h3X2RvX29wZXJhdGlvbigpIHdpbGwgaGF2ZSBiZWVuCj4g
ZG9pbmcgYW55IG5lY2Vzc2FyeSBNTVUgY29tbWFuZHMuCgpJIG1heSBiZSBhYmxlIHRvIGRyb3Ag
aXQuIEkgbmVlZGVkIGl0IGF0IG9uZSBwb2ludCB3aGVuIEdQVSByZXNldApvY2N1cnJlZCwgYnV0
IGFmdGVyIEkgcmV3b3JrZWQgdGhhdCwgSSB0aGluayBpdCBpcyBubyBsb25nZXIgbmVlZGVkLgoK
Pgo+ID4gKyAgICAgICAgICAgICByZXR1cm4gYXM7Cj4gPiArICAgICB9Cj4gPiArCj4gPiArICAg
ICAvKiBDaGVjayBmb3IgYSBmcmVlIEFTICovCj4gPiArICAgICBhcyA9IGZmeihwZmRldi0+YXNf
YWxsb2NfbWFzayk7Cj4gPiArICAgICBpZiAoIShCSVQoYXMpICYgcGZkZXYtPmZlYXR1cmVzLmFz
X3ByZXNlbnQpKSB7Cj4gPiArICAgICAgICAgICAgIHN0cnVjdCBwYW5mcm9zdF9tbXUgKmxydV9t
bXU7Cj4gPiArCj4gPiArICAgICAgICAgICAgIGxpc3RfZm9yX2VhY2hfZW50cnlfcmV2ZXJzZShs
cnVfbW11LCAmcGZkZXYtPmFzX2xydV9saXN0LCBsaXN0KSB7Cj4gPiArICAgICAgICAgICAgICAg
ICAgICAgaWYgKCFhdG9taWNfcmVhZCgmbHJ1X21tdS0+YXNfY291bnQpKQo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gPiArICAgICAgICAgICAgIH0KPiA+ICsgICAg
ICAgICAgICAgV0FSTl9PTighbHJ1X21tdSk7Cj4gPiArCj4gPiArICAgICAgICAgICAgIGxpc3Rf
ZGVsX2luaXQoJmxydV9tbXUtPmxpc3QpOwo+ID4gKyAgICAgICAgICAgICBhcyA9IGxydV9tbXUt
PmFzOwo+ID4gKwo+ID4gKyAgICAgICAgICAgICBXQVJOX09OKGFzIDwgMCk7Cj4gPiArICAgICAg
ICAgICAgIGxydV9tbXUtPmFzID0gLTE7Cj4KPiBUaGlzIHNob3VsZCBiZSBob2xkaW5nIGEgbG9j
ayB0byBzeW5jaHJvbmlzZSB3aXRoIHRoZSBtbXVfaHdfZG9fb3BlcmF0aW9uKCkuCgpBdCBsZWFz
dCBmb3IgdGhlIG9sZCBBUyBhc3NpZ25lZSwgSSB0aGluayBpdCBzaG91bGRuJ3QgbWF0dGVyLiBX
aGV0aGVyCndlIGRvIGZsdXNoIG9wZXJhdGlvbnMgb3Igbm90IHdvbid0IG1hdHRlciBiZWNhdXNl
IGl0IHdpbGwgYWxsIGdldApzeW5jJ2VkIHdoZW4gdGhlIGxydV9tbXUgZ2V0cyBhIG5ldyBBUyBh
bmQgdGhpcyBBUyBnZXQgYXNzaWduZWQgbmV3CnBhZ2UgdGFibGVzLgoKSSB0aGluayBpdCdzIG1v
cmUgd2hlbiB3ZSBnZXQgdG8gdGhlIHBhbmZyb3N0X21tdV9lbmFibGUgY2FsbCB0aGF0CmRvaW5n
IGZsdXNoZXMgZm9yIGxydV9tbXUgY291bGQgYmUgcHJvYmxlbWF0aWMgKHRob3VnaCBkbyB3ZSBk
byBhbnkgb3AKdGhhdCdzIGhhcm1mdWw/KS4KCkluIGFueSBjYXNlLCBJIHRoaW5rIGl0IHdpbGwg
YmUgYmV0dGVyIHRvIGFkZCBhIGxvY2sgcmF0aGVyIHRoYW4gdGhpbmsKdGhydSB3aGV0aGVyIHdl
J2xsIGJlIG9rYXkuCgo+Cj4gPiArICAgICB9Cj4gPiArCj4gPiArICAgICAvKiBBc3NpZ24gdGhl
IGZyZWUgb3IgcmVjbGFpbWVkIEFTIHRvIHRoZSAgKi8KPiA+ICsgICAgIG1tdS0+YXMgPSBhczsK
PiA+ICsgICAgIHNldF9iaXQoYXMsICZwZmRldi0+YXNfYWxsb2NfbWFzayk7Cj4gPiArICAgICBh
dG9taWNfc2V0KCZtbXUtPmFzX2NvdW50LCAxKTsKPiA+ICsgICAgIGxpc3RfYWRkKCZtbXUtPmxp
c3QsICZwZmRldi0+YXNfbHJ1X2xpc3QpOwo+ID4gKwo+ID4gKyAgICAgZGV2X2RiZyhwZmRldi0+
ZGV2LCAiQXNzaWduZWQgQVMlZCB0byBtbXUgJXAsIGFsbG9jX21hc2s9JWx4IiwgYXMsIG1tdSwg
cGZkZXYtPmFzX2FsbG9jX21hc2spOwo+ID4gKwo+ID4gKyAgICAgc3Bpbl91bmxvY2soJnBmZGV2
LT5hc19sb2NrKTsKPiA+ICsKPiA+ICsgICAgIHBhbmZyb3N0X21tdV9lbmFibGUocGZkZXYsIG1t
dSk7Cj4gPiArICAgICByZXR1cm4gYXM7Cj4gPiArfQo+ID4gKwo+ID4gK3ZvaWQgcGFuZnJvc3Rf
bW11X2FzX3B1dChzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwgc3RydWN0IHBhbmZyb3N0
X21tdSAqbW11KQo+ID4gK3sKPiA+ICsgICAgIGF0b21pY19kZWMoJm1tdS0+YXNfY291bnQpOwo+
ID4gKyAgICAgV0FSTl9PTihhdG9taWNfcmVhZCgmbW11LT5hc19jb3VudCkgPCAwKTsKPiA+ICt9
Cj4gPiArCj4gPiArc3RhdGljIHZvaWQgcGFuZnJvc3RfbW11X2FzX3Jlc2V0KHN0cnVjdCBwYW5m
cm9zdF9kZXZpY2UgKnBmZGV2LCBzdHJ1Y3QgcGFuZnJvc3RfbW11ICptbXUpCj4gPiArewo+ID4g
KyAgICAgc3Bpbl9sb2NrKCZwZmRldi0+YXNfbG9jayk7Cj4gPiArCj4gPiArICAgICBhdG9taWNf
c2V0KCZtbXUtPmFzX2NvdW50LCAwKTsKPiA+ICsgICAgIGlmIChtbXUtPmFzID49IDApIHsKPiA+
ICsgICAgICAgICAgICAgY2xlYXJfYml0KG1tdS0+YXMsICZwZmRldi0+YXNfYWxsb2NfbWFzayk7
Cj4gPiArICAgICAgICAgICAgIGxpc3RfZGVsX2luaXQoJm1tdS0+bGlzdCk7Cj4gPiArICAgICAg
ICAgICAgIG1tdS0+YXMgPSAtMTsKPiA+ICsgICAgIH0KPiA+ICsKPiA+ICsgICAgIHNwaW5fdW5s
b2NrKCZwZmRldi0+YXNfbG9jayk7Cj4gPiArfQo+ID4gKwo+ID4gIHZvaWQgcGFuZnJvc3RfbW11
X3Jlc2V0KHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KQo+ID4gIHsKPiA+IC0gICAgIHBh
bmZyb3N0X21tdV9lbmFibGUocGZkZXYsIDApOwo+ID4gKyAgICAgc3RydWN0IGRybV9maWxlICpm
aWxlOwo+ID4gKwo+ID4gKyAgICAgbXV0ZXhfbG9jaygmcGZkZXYtPmRkZXYtPmZpbGVsaXN0X211
dGV4KTsKPiA+ICsgICAgIGxpc3RfZm9yX2VhY2hfZW50cnkoZmlsZSwgJnBmZGV2LT5kZGV2LT5m
aWxlbGlzdCwgbGhlYWQpIHsKPiA+ICsgICAgICAgICAgICAgc3RydWN0IHBhbmZyb3N0X2ZpbGVf
cHJpdiAqcHJpdiA9IGZpbGUtPmRyaXZlcl9wcml2Owo+ID4gKwo+ID4gKyAgICAgICAgICAgICBw
YW5mcm9zdF9tbXVfYXNfcmVzZXQocGZkZXYsICZwcml2LT5tbXUpOwo+ID4gKyAgICAgfQo+ID4g
KyAgICAgbXV0ZXhfdW5sb2NrKCZwZmRldi0+ZGRldi0+ZmlsZWxpc3RfbXV0ZXgpOwo+ID4KPiA+
ICAgICAgIG1tdV93cml0ZShwZmRldiwgTU1VX0lOVF9DTEVBUiwgfjApOwo+ID4gICAgICAgbW11
X3dyaXRlKHBmZGV2LCBNTVVfSU5UX01BU0ssIH4wKTsKPiA+IEBAIC0xNTIsMjEgKzIyOSwyMSBA
QCBzdGF0aWMgc2l6ZV90IGdldF9wZ3NpemUodTY0IGFkZHIsIHNpemVfdCBzaXplKQo+ID4gICAg
ICAgcmV0dXJuIFNaXzJNOwo+ID4gIH0KPiA+Cj4gPiAtc3RhdGljIGludCBtbXVfbWFwX3NnKHN0
cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LCB1NjQgaW92YSwKPiA+IC0gICAgICAgICAgICAg
ICAgICAgaW50IHByb3QsIHN0cnVjdCBzZ190YWJsZSAqc2d0KQo+ID4gK3N0YXRpYyBpbnQgbW11
X21hcF9zZyhzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiwgc3RydWN0IHBhbmZyb3N0X21t
dSAqbW11LAo+ID4gKyAgICAgICAgICAgICAgICAgICB1NjQgaW92YSwgaW50IHByb3QsIHN0cnVj
dCBzZ190YWJsZSAqc2d0KQo+ID4gIHsKPiA+ICAgICAgIHVuc2lnbmVkIGludCBjb3VudDsKPiA+
ICAgICAgIHN0cnVjdCBzY2F0dGVybGlzdCAqc2dsOwo+ID4gLSAgICAgc3RydWN0IGlvX3BndGFi
bGVfb3BzICpvcHMgPSBwZmRldi0+bW11LT5wZ3RibF9vcHM7Cj4gPiArICAgICBzdHJ1Y3QgaW9f
cGd0YWJsZV9vcHMgKm9wcyA9IG1tdS0+cGd0Ymxfb3BzOwo+ID4gICAgICAgdTY0IHN0YXJ0X2lv
dmEgPSBpb3ZhOwo+ID4KPiA+IC0gICAgIG11dGV4X2xvY2soJnBmZGV2LT5tbXUtPmxvY2spOwo+
ID4gKyAgICAgbXV0ZXhfbG9jaygmbW11LT5sb2NrKTsKPiA+Cj4gPiAgICAgICBmb3JfZWFjaF9z
ZyhzZ3QtPnNnbCwgc2dsLCBzZ3QtPm5lbnRzLCBjb3VudCkgewo+ID4gICAgICAgICAgICAgICB1
bnNpZ25lZCBsb25nIHBhZGRyID0gc2dfZG1hX2FkZHJlc3Moc2dsKTsKPiA+ICAgICAgICAgICAg
ICAgc2l6ZV90IGxlbiA9IHNnX2RtYV9sZW4oc2dsKTsKPiA+Cj4gPiAtICAgICAgICAgICAgIGRl
dl9kYmcocGZkZXYtPmRldiwgIm1hcDogaW92YT0lbGx4LCBwYWRkcj0lbHgsIGxlbj0lengiLCBp
b3ZhLCBwYWRkciwgbGVuKTsKPiA+ICsgICAgICAgICAgICAgZGV2X2RiZyhwZmRldi0+ZGV2LCAi
bWFwOiBhcz0lZCwgaW92YT0lbGx4LCBwYWRkcj0lbHgsIGxlbj0lengiLCBtbXUtPmFzLCBpb3Zh
LCBwYWRkciwgbGVuKTsKPiA+Cj4gPiAgICAgICAgICAgICAgIHdoaWxlIChsZW4pIHsKPiA+ICAg
ICAgICAgICAgICAgICAgICAgICBzaXplX3QgcGdzaXplID0gZ2V0X3Bnc2l6ZShpb3ZhIHwgcGFk
ZHIsIGxlbik7Cj4gPiBAQCAtMTc4LDEwICsyNTUsMTAgQEAgc3RhdGljIGludCBtbXVfbWFwX3Nn
KHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LCB1NjQgaW92YSwKPiA+ICAgICAgICAgICAg
ICAgfQo+ID4gICAgICAgfQo+ID4KPiA+IC0gICAgIG1tdV9od19kb19vcGVyYXRpb24ocGZkZXYs
IDAsIHN0YXJ0X2lvdmEsIGlvdmEgLSBzdGFydF9pb3ZhLAo+ID4gKyAgICAgbW11X2h3X2RvX29w
ZXJhdGlvbihwZmRldiwgbW11LT5hcywgc3RhcnRfaW92YSwgaW92YSAtIHN0YXJ0X2lvdmEsCj4g
PiAgICAgICAgICAgICAgICAgICAgICAgICAgIEFTX0NPTU1BTkRfRkxVU0hfUFQpOwo+ID4KPiA+
IC0gICAgIG11dGV4X3VubG9jaygmcGZkZXYtPm1tdS0+bG9jayk7Cj4gPiArICAgICBtdXRleF91
bmxvY2soJm1tdS0+bG9jayk7Cj4gPgo+ID4gICAgICAgcmV0dXJuIDA7Cj4gPiAgfQo+ID4gQEAg
LTIwOCw3ICsyODUsNyBAQCBpbnQgcGFuZnJvc3RfbW11X21hcChzdHJ1Y3QgcGFuZnJvc3RfZ2Vt
X29iamVjdCAqYm8pCj4gPiAgICAgICBpZiAocmV0IDwgMCkKPiA+ICAgICAgICAgICAgICAgcmV0
dXJuIHJldDsKPiA+Cj4gPiAtICAgICBtbXVfbWFwX3NnKHBmZGV2LCBiby0+bm9kZS5zdGFydCA8
PCBQQUdFX1NISUZULCBwcm90LCBzZ3QpOwo+ID4gKyAgICAgbW11X21hcF9zZyhwZmRldiwgYm8t
Pm1tdSwgYm8tPm5vZGUuc3RhcnQgPDwgUEFHRV9TSElGVCwgcHJvdCwgc2d0KTsKPiA+Cj4gPiAg
ICAgICBwbV9ydW50aW1lX21hcmtfbGFzdF9idXN5KHBmZGV2LT5kZXYpOwo+ID4gICAgICAgcG1f
cnVudGltZV9wdXRfYXV0b3N1c3BlbmQocGZkZXYtPmRldik7Cj4gPiBAQCAtMjIxLDcgKzI5OCw3
IEBAIHZvaWQgcGFuZnJvc3RfbW11X3VubWFwKHN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0ICpi
bykKPiA+ICB7Cj4gPiAgICAgICBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiA9ICZiby0+YmFz
ZS5iYXNlOwo+ID4gICAgICAgc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYgPSB0b19wYW5m
cm9zdF9kZXZpY2Uob2JqLT5kZXYpOwo+ID4gLSAgICAgc3RydWN0IGlvX3BndGFibGVfb3BzICpv
cHMgPSBwZmRldi0+bW11LT5wZ3RibF9vcHM7Cj4gPiArICAgICBzdHJ1Y3QgaW9fcGd0YWJsZV9v
cHMgKm9wcyA9IGJvLT5tbXUtPnBndGJsX29wczsKPiA+ICAgICAgIHU2NCBpb3ZhID0gYm8tPm5v
ZGUuc3RhcnQgPDwgUEFHRV9TSElGVDsKPiA+ICAgICAgIHNpemVfdCBsZW4gPSBiby0+bm9kZS5z
aXplIDw8IFBBR0VfU0hJRlQ7Cj4gPiAgICAgICBzaXplX3QgdW5tYXBwZWRfbGVuID0gMDsKPiA+
IEBAIC0yMzAsMTMgKzMwNywxMyBAQCB2b2lkIHBhbmZyb3N0X21tdV91bm1hcChzdHJ1Y3QgcGFu
ZnJvc3RfZ2VtX29iamVjdCAqYm8pCj4gPiAgICAgICBpZiAoV0FSTl9PTighYm8tPmlzX21hcHBl
ZCkpCj4gPiAgICAgICAgICAgICAgIHJldHVybjsKPiA+Cj4gPiAtICAgICBkZXZfZGJnKHBmZGV2
LT5kZXYsICJ1bm1hcDogaW92YT0lbGx4LCBsZW49JXp4IiwgaW92YSwgbGVuKTsKPiA+ICsgICAg
IGRldl9kYmcocGZkZXYtPmRldiwgInVubWFwOiBhcz0lZCwgaW92YT0lbGx4LCBsZW49JXp4Iiwg
Ym8tPm1tdS0+YXMsIGlvdmEsIGxlbik7Cj4gPgo+ID4gICAgICAgcmV0ID0gcG1fcnVudGltZV9n
ZXRfc3luYyhwZmRldi0+ZGV2KTsKPiA+ICAgICAgIGlmIChyZXQgPCAwKQo+ID4gICAgICAgICAg
ICAgICByZXR1cm47Cj4gPgo+ID4gLSAgICAgbXV0ZXhfbG9jaygmcGZkZXYtPm1tdS0+bG9jayk7
Cj4gPiArICAgICBtdXRleF9sb2NrKCZiby0+bW11LT5sb2NrKTsKPiA+Cj4gPiAgICAgICB3aGls
ZSAodW5tYXBwZWRfbGVuIDwgbGVuKSB7Cj4gPiAgICAgICAgICAgICAgIHNpemVfdCB1bm1hcHBl
ZF9wYWdlOwo+ID4gQEAgLTI1MCwxMCArMzI3LDEwIEBAIHZvaWQgcGFuZnJvc3RfbW11X3VubWFw
KHN0cnVjdCBwYW5mcm9zdF9nZW1fb2JqZWN0ICpibykKPiA+ICAgICAgICAgICAgICAgdW5tYXBw
ZWRfbGVuICs9IHBnc2l6ZTsKPiA+ICAgICAgIH0KPiA+Cj4gPiAtICAgICBtbXVfaHdfZG9fb3Bl
cmF0aW9uKHBmZGV2LCAwLCBiby0+bm9kZS5zdGFydCA8PCBQQUdFX1NISUZULAo+ID4gKyAgICAg
bW11X2h3X2RvX29wZXJhdGlvbihwZmRldiwgYm8tPm1tdS0+YXMsIGJvLT5ub2RlLnN0YXJ0IDw8
IFBBR0VfU0hJRlQsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvLT5ub2RlLnNpemUg
PDwgUEFHRV9TSElGVCwgQVNfQ09NTUFORF9GTFVTSF9QVCk7Cj4gPgo+ID4gLSAgICAgbXV0ZXhf
dW5sb2NrKCZwZmRldi0+bW11LT5sb2NrKTsKPiA+ICsgICAgIG11dGV4X3VubG9jaygmYm8tPm1t
dS0+bG9jayk7Cj4gPgo+ID4gICAgICAgcG1fcnVudGltZV9tYXJrX2xhc3RfYnVzeShwZmRldi0+
ZGV2KTsKPiA+ICAgICAgIHBtX3J1bnRpbWVfcHV0X2F1dG9zdXNwZW5kKHBmZGV2LT5kZXYpOwo+
ID4gQEAgLTI2Miw5ICszMzksMTAgQEAgdm9pZCBwYW5mcm9zdF9tbXVfdW5tYXAoc3RydWN0IHBh
bmZyb3N0X2dlbV9vYmplY3QgKmJvKQo+ID4KPiA+ICBzdGF0aWMgdm9pZCBtbXVfdGxiX2ludl9j
b250ZXh0X3MxKHZvaWQgKmNvb2tpZSkKPiA+ICB7Cj4gPiAtICAgICBzdHJ1Y3QgcGFuZnJvc3Rf
ZGV2aWNlICpwZmRldiA9IGNvb2tpZTsKPiA+ICsgICAgIHN0cnVjdCBwYW5mcm9zdF9maWxlX3By
aXYgKnByaXYgPSBjb29raWU7Cj4gPgo+ID4gLSAgICAgbW11X2h3X2RvX29wZXJhdGlvbihwZmRl
diwgMCwgMCwgfjBVTCwgQVNfQ09NTUFORF9GTFVTSF9NRU0pOwo+ID4gKyAgICAgLyogT25seSBm
bHVzaCBpZiB3ZSBoYXZlIGFuIGFzc2lnbmVkIEFTICovCj4KPiBJJ20gbm90IHN1cmUgaWYgdGhp
cyBjb21tZW50IG1ha2VzIHNlbnNlIGhlcmUgLSBzZWVtcyBsaWtlIGl0IGJlbG9uZ3MgaW4KPiBt
bXVfaHdfZG9fb3BlcmF0aW9uKCkKCkxlZnQgb3ZlciBmcm9tIHdoZW4gSSBoYWQgdGhlIGNoZWNr
IGhlcmUuLi4KCj4KPiA+ICsgICAgIG1tdV9od19kb19vcGVyYXRpb24ocHJpdi0+cGZkZXYsIHBy
aXYtPm1tdS5hcywgMCwgfjBVTCwgQVNfQ09NTUFORF9GTFVTSF9NRU0pOwo+ID4gIH0KPiA+Cj4g
PiAgc3RhdGljIHZvaWQgbW11X3RsYl9pbnZfcmFuZ2Vfbm9zeW5jKHVuc2lnbmVkIGxvbmcgaW92
YSwgc2l6ZV90IHNpemUsCj4gPiBAQCAtMjgzLDE2ICszNjEsNjkgQEAgc3RhdGljIGNvbnN0IHN0
cnVjdCBpb21tdV9nYXRoZXJfb3BzIG1tdV90bGJfb3BzID0gewo+ID4gICAgICAgLnRsYl9zeW5j
ICAgICAgID0gbW11X3RsYl9zeW5jX2NvbnRleHQsCj4gPiAgfTsKPiA+Cj4gPiAraW50IHBhbmZy
b3N0X21tdV9wZ3RhYmxlX2FsbG9jKHN0cnVjdCBwYW5mcm9zdF9maWxlX3ByaXYgKnByaXYpCj4g
PiArewo+ID4gKyAgICAgc3RydWN0IHBhbmZyb3N0X21tdSAqbW11ID0gJnByaXYtPm1tdTsKPiA+
ICsgICAgIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gcHJpdi0+cGZkZXY7Cj4gPiAr
Cj4gPiArICAgICBtdXRleF9pbml0KCZtbXUtPmxvY2spOwo+ID4gKyAgICAgSU5JVF9MSVNUX0hF
QUQoJm1tdS0+bGlzdCk7Cj4gPiArICAgICBtbXUtPmFzID0gLTE7Cj4gPiArCj4gPiArICAgICBt
bXUtPnBndGJsX2NmZyA9IChzdHJ1Y3QgaW9fcGd0YWJsZV9jZmcpIHsKPiA+ICsgICAgICAgICAg
ICAgLnBnc2l6ZV9iaXRtYXAgID0gU1pfNEsgfCBTWl8yTSwKPiA+ICsgICAgICAgICAgICAgLmlh
cyAgICAgICAgICAgID0gRklFTERfR0VUKDB4ZmYsIHBmZGV2LT5mZWF0dXJlcy5tbXVfZmVhdHVy
ZXMpLAo+ID4gKyAgICAgICAgICAgICAub2FzICAgICAgICAgICAgPSBGSUVMRF9HRVQoMHhmZjAw
LCBwZmRldi0+ZmVhdHVyZXMubW11X2ZlYXR1cmVzKSwKPiA+ICsgICAgICAgICAgICAgLnRsYiAg
ICAgICAgICAgID0gJm1tdV90bGJfb3BzLAo+ID4gKyAgICAgICAgICAgICAuaW9tbXVfZGV2ICAg
ICAgPSBwZmRldi0+ZGV2LAo+ID4gKyAgICAgfTsKPiA+ICsKPiA+ICsgICAgIG1tdS0+cGd0Ymxf
b3BzID0gYWxsb2NfaW9fcGd0YWJsZV9vcHMoQVJNX01BTElfTFBBRSwgJm1tdS0+cGd0YmxfY2Zn
LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcml2KTsK
PiA+ICsgICAgIGlmICghbW11LT5wZ3RibF9vcHMpCj4gPiArICAgICAgICAgICAgIHJldHVybiAt
RUlOVkFMOwo+ID4gKwo+ID4gKyAgICAgcmV0dXJuIDA7Cj4gPiArfQo+ID4gKwo+ID4gK3ZvaWQg
cGFuZnJvc3RfbW11X3BndGFibGVfZnJlZShzdHJ1Y3QgcGFuZnJvc3RfZmlsZV9wcml2ICpwcml2
KQo+ID4gK3sKPiA+ICsgICAgIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gcHJpdi0+
cGZkZXY7Cj4gPiArICAgICBzdHJ1Y3QgcGFuZnJvc3RfbW11ICptbXUgPSAmcHJpdi0+bW11Owo+
ID4gKwo+ID4gKyAgICAgc3Bpbl9sb2NrKCZwZmRldi0+YXNfbG9jayk7Cj4gPiArICAgICBpZiAo
bW11LT5hcyA+PSAwKSB7Cj4gPiArICAgICAgICAgICAgIGNsZWFyX2JpdChtbXUtPmFzLCAmcGZk
ZXYtPmFzX2FsbG9jX21hc2spOwo+ID4gKyAgICAgICAgICAgICBjbGVhcl9iaXQobW11LT5hcywg
JnBmZGV2LT5hc19pbl91c2VfbWFzayk7Cj4gPiArICAgICAgICAgICAgIGxpc3RfZGVsKCZtbXUt
Pmxpc3QpOwo+ID4gKyAgICAgfQo+ID4gKyAgICAgc3Bpbl91bmxvY2soJnBmZGV2LT5hc19sb2Nr
KTsKPiA+ICsKPiA+ICsgICAgIGZyZWVfaW9fcGd0YWJsZV9vcHMobW11LT5wZ3RibF9vcHMpOwo+
ID4gK30KPiA+ICsKPiA+ICBzdGF0aWMgc3RydWN0IGRybV9tbV9ub2RlICphZGRyX3RvX2RybV9t
bV9ub2RlKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LCBpbnQgYXMsIHU2NCBhZGRyKQo+
ID4gIHsKPiA+IC0gICAgIHN0cnVjdCBkcm1fbW1fbm9kZSAqbm9kZTsKPiA+ICsgICAgIHN0cnVj
dCBkcm1fbW1fbm9kZSAqbm9kZSA9IE5VTEw7Cj4gPiAgICAgICB1NjQgb2Zmc2V0ID0gYWRkciA+
PiBQQUdFX1NISUZUOwo+ID4gKyAgICAgc3RydWN0IGRybV9maWxlICpmaWxlOwo+ID4KPiA+IC0g
ICAgIGRybV9tbV9mb3JfZWFjaF9ub2RlKG5vZGUsICZwZmRldi0+bW0pIHsKPiA+IC0gICAgICAg
ICAgICAgaWYgKG9mZnNldCA+PSBub2RlLT5zdGFydCAmJiBvZmZzZXQgPCAobm9kZS0+c3RhcnQg
KyBub2RlLT5zaXplKSkKPiA+IC0gICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTsKPiA+
ICsgICAgIG11dGV4X2xvY2soJnBmZGV2LT5kZGV2LT5maWxlbGlzdF9tdXRleCk7Cj4gPiArICAg
ICBsaXN0X2Zvcl9lYWNoX2VudHJ5KGZpbGUsICZwZmRldi0+ZGRldi0+ZmlsZWxpc3QsIGxoZWFk
KSB7Cj4KPiBZb3UgY291bGQgd2FsayBhc19scnVfbGlzdCByYXRoZXIgdGhhbiBldmVyeSBmaWxl
IGFzIHlvdSBrbm93IHlvdSBhcmUKPiBsb29raW5nIGZvciBhIGZkIHdoaWNoIGlzIGFzc2lnbmVk
IGFuIGFkZHJlc3Mgc3BhY2UuCgpZZXMsIGdvb2QgcG9pbnQuCgpUaGFua3MgZm9yIHRoZSByZXZp
ZXcsClJvYgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpk
cmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
