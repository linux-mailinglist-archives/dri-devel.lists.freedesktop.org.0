Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0F312968DA
	for <lists+dri-devel@lfdr.de>; Tue, 20 Aug 2019 21:05:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A1BE46E84C;
	Tue, 20 Aug 2019 19:05:15 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1E9786E84C
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 19:05:14 +0000 (UTC)
Received: from pendragon.ideasonboard.com
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id F0D7F33D;
 Tue, 20 Aug 2019 21:05:11 +0200 (CEST)
Date: Tue, 20 Aug 2019 22:05:05 +0300
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Boris Brezillon <boris.brezillon@collabora.com>
Subject: Re: [PATCH RFC 02/19] drm: Support custom encoder/bridge
 enable/disable sequences officially
Message-ID: <20190820190505.GP10820@pendragon.ideasonboard.com>
References: <20190808151150.16336-1-boris.brezillon@collabora.com>
 <20190808151150.16336-3-boris.brezillon@collabora.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190808151150.16336-3-boris.brezillon@collabora.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1566327912;
 bh=hhYM+SeeT6sVGhCtNyQsjc5DXmTvBooqN3SIfCUOZBc=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=tDaK8Nuw+M3XJNKpGpO1P0FFNMY0sF3TxCtQGAz1j0YwME5s1kFskuhrXxQ/C9eBg
 u8wN73KVXSzRskGJXptWzjlZJ4PgVKKETdeG37p3sPv/X1ySgU2ay0mDaU6ELzf5Yi
 ariWq0ywhHUEmQG+fdANV+1fX8UnvgnQuSsNPzOA=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jernej Skrabec <jernej.skrabec@siol.net>,
 Neil Armstrong <narmstrong@baylibre.com>, Jonas Karlman <jonas@kwiboo.se>,
 Seung-Woo Kim <sw0312.kim@samsung.com>, dri-devel@lists.freedesktop.org,
 Kyungmin Park <kyungmin.park@samsung.com>,
 Thierry Reding <thierry.reding@gmail.com>, Chris Healy <Chris.Healy@zii.aero>,
 kernel@collabora.com, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgQm9yaXMsCgpUaGFuayB5b3UgZm9yIHRoZSBwYXRjaC4KCk9uIFRodSwgQXVnIDA4LCAyMDE5
IGF0IDA1OjExOjMzUE0gKzAyMDAsIEJvcmlzIEJyZXppbGxvbiB3cm90ZToKPiBUaGUgVkM0IGFu
ZCBFeHlub3MgRFNJIGVuY29kZXIgZHJpdmVycyBuZWVkIGEgY3VzdG9tIGVuYWJsZS9kaXNhYmxl
Cj4gc2VxdWVuY2UgYW5kIG1hbnVhbGx5IHNldCBlbmNvZGVyLT5icmlkZ2UgdG8gTlVMTCB0byBw
cmV2ZW50IHRoZSBjb3JlCj4gZnJvbSBjYWxsaW5nIHRoZSBicmlkZ2UgaG9va3MuCj4gCj4gTGV0
J3MgcHJvdmlkZSBhIG1vcmUgb2ZmaWNpYWwgd2F5IHRvIHN1cHBvcnQgY3VzdG9tIGJyaWRnZS9l
bmNvZGVyCj4gZW5hYmxlL2Rpc2FibGUgc2VxdWVuY2VzLgoKU28sIHdoaWxlIEknbSBub3Qgb3Bw
b3NlZCB0byB0aGlzLCBJIHRoaW5rIGl0J3MgYSBiaXQgb2YgYSBoYWNrLCBhbmQgSSdkCmxpa2Ug
dG8gc2hhcmUgbXkgdmlzaW9uIG9mIGhvdyBJJ2QgbGlrZSB0byBzZWUgdGhpcyBiZWluZyBpbXBs
ZW1lbnRlZCBpbgp0aGUgbW9yZSBkaXN0YW50IGZ1dHVyZSAoYW5kIHRodXMgcG9zc2libHkgb24g
dG9wIG9mIHRoaXMgY2hhbmdlKS4KCkl0IGhhcyBiZWVuIGVzdGFibGlzaGVkIGZvciBxdWl0ZSBz
b21lIHRpbWUgbm93IHRoYXQgZXhwb3NpbmcKZHJtX2VuY29kZXIgdG8gdXNlcnNwYWNlIHdhcyBs
aWtlbHkgYSBtaXN0YWtlLCBhbmQgdGhhdCBpdCBzaG91bGQgaGF2ZQpzdGF5ZWQgYSBrZXJuZWwt
b25seSBvYmplY3QuIFdpdGggdGhlIGdlbmVyYWxpc2VkIHVzYWdlIG9mIGRybV9icmlkZ2UsIEkK
d291bGQgZ28gb25lIHN0ZXAgZnVydGhlcjogZHJtX2VuY29kZXIgc2hvdWxkbid0IG1hdHRlciBm
b3IgRFJNL0tNUwpkcml2ZXJzIGF0IGFsbC4KCmRybV9icmlkZ2UgaGFzIGJlZW4gaW50cm9kdWNl
ZCB0byBtb2RlbCBjaGFpbmVkIGVuY29kZXJzLCB3aGVyZSB0aGUKc2Vjb25kIChhbmQgc3Vic2Vx
dWVudCkgZW5jb2RlcnMgY291bGRuJ3QgZWFzaWx5IGJlIHN1cHBvcnRlZCBpbiBhCnN0YW5kYXJk
IGFuZCByZXVzYWJsZSB3YXkgd2l0aCBqdXN0IGRybV9lbmNvZGVyLiBBIGJyaWRnZSAod2l0aCB0
aGUKZXhjZXB0aW9uIG9mIHRoZSBwYW5lbCBicmlkZ2UpIGlzIGp1c3QgYW4gZW5jb2Rlci4gSXQg
c2hvdWxkbid0IG1hdHRlcgp3aGV0aGVyIGVuY29kZXJzIGFyZSBpbnRlcm5hbCB0byB0aGUgZGlz
cGxheSBjb250cm9sbGVyLCBzZXBhcmF0ZSBJUHMgaW4KdGhlIFNvQyBvciBleHRlcm5hbCBjb21w
b25lbnRzLCB0aGV5IGNvdWxkIGFsbCBiZSBtb2RlbGxlZCBhcyBicmlkZ2VzLgpXZSBkbyBoYXZl
IGJyaWRnZXMgZm9yIERTSSBlbmNvZGVyIElQcywgYW5kIERTSSAoYW5kIG90aGVyKSBicmlkZ2Vz
CnBvdGVudGlhbGx5IG5lZWQgc2ltaWxhciBjdXN0b20gZW5hYmxlL2Rpc2FibGUgc2VxdWVuY2Vz
LiBJIHdvdWxkIHRodXMKaWRlYWxseSBsaWtlIHRvIHNlZSB0aGUgVkM0IGFuZCBFeHlub3MgRFNJ
IGVuY29kZXJzIGJlaW5nIGltcGxlbWVudGVkIGFzCmJyaWRnZXMsIHdpdGggc3VwcG9ydCBmb3Ig
Y3VzdG9tIGVuYWJsZS9kaXNhYmxlIHNlcXVlbmNlcyBpbiBicmlkZ2VzLAphbmQgZHJvcCBzdXBw
b3J0IGZvciBjdXN0b20gZW5hYmxlL2Rpc2FibGUgc2VxdWVuY2VzIGluIGRybV9lbmNvZGVyLgoK
RG9lcyB0aGlzIG1ha2Ugc2Vuc2UgdG8geW91ID8gV2hpbGUgSSB3b3VsZCBsb3ZlIHRvIHNlZSB0
aGlzIGJlaW5nCmltcGxlbWVudGVkIHJpZ2h0IGF3YXksIGl0IG1heSBiZSB0b28gbXVjaCB3b3Jr
IGFzIGEgcHJlcmVxdWlzaXRlIGZvcgp0aGlzIGJ1cyBmb3JtYXQgbmVnb3RpYXRpb24gc2VyaWVz
LCBzbyBJIGRvbid0IHdhbnQgdG8gcmVqZWN0IHRoaXMKcGF0Y2guIEkgd291bGQgaG93ZXZlciBs
aWtlIHRvIGFscmVhZHkgbWFrZSBzdXJlIHdlIGFncmVlIG9uIHRoZSB3YXkKZm9yd2FyZCBmb3Ig
dGhlIG5leHQgc3RlcHMuCgo+IFNpZ25lZC1vZmYtYnk6IEJvcmlzIEJyZXppbGxvbiA8Ym9yaXMu
YnJlemlsbG9uQGNvbGxhYm9yYS5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9kcm1fYXRv
bWljX2hlbHBlci5jIHwgMTMgKysrKysrKy0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vZHJtX2NydGNf
aGVscGVyLmMgICB8IDM4ICsrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tCj4gIGluY2x1ZGUv
ZHJtL2RybV9lbmNvZGVyLmggICAgICAgICAgIHwgIDkgKysrKysrKwo+ICAzIGZpbGVzIGNoYW5n
ZWQsIDQyIGluc2VydGlvbnMoKyksIDE4IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1f
YXRvbWljX2hlbHBlci5jCj4gaW5kZXggNDcwNjQzOWZiNDkwLi4xNWVhNjE4NzcxMjIgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfaGVscGVyLmMKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19oZWxwZXIuYwo+IEBAIC0xMDMwLDcgKzEwMzAsOCBAQCBk
aXNhYmxlX291dHB1dHMoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRybV9hdG9taWNf
c3RhdGUgKm9sZF9zdGF0ZSkKPiAgCQkgKiBFYWNoIGVuY29kZXIgaGFzIGF0IG1vc3Qgb25lIGNv
bm5lY3RvciAoc2luY2Ugd2UgYWx3YXlzIHN0ZWFsCj4gIAkJICogaXQgYXdheSksIHNvIHdlIHdv
bid0IGNhbGwgZGlzYWJsZSBob29rcyB0d2ljZS4KPiAgCQkgKi8KPiAtCQlkcm1fYXRvbWljX2Jy
aWRnZV9kaXNhYmxlKGVuY29kZXItPmJyaWRnZSwgb2xkX3N0YXRlKTsKPiArCQlpZiAoIWVuY29k
ZXItPmN1c3RvbV9icmlkZ2VfZW5hYmxlX2Rpc2FibGVfc2VxKQo+ICsJCQlkcm1fYXRvbWljX2Jy
aWRnZV9kaXNhYmxlKGVuY29kZXItPmJyaWRnZSwgb2xkX3N0YXRlKTsKPiAgCj4gIAkJLyogUmln
aHQgZnVuY3Rpb24gZGVwZW5kcyB1cG9uIHRhcmdldCBzdGF0ZS4gKi8KPiAgCQlpZiAoZnVuY3Mp
IHsKPiBAQCAtMTA0NCw3ICsxMDQ1LDkgQEAgZGlzYWJsZV9vdXRwdXRzKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpCj4gIAkJCQlmdW5j
cy0+ZHBtcyhlbmNvZGVyLCBEUk1fTU9ERV9EUE1TX09GRik7Cj4gIAkJfQo+ICAKPiAtCQlkcm1f
YXRvbWljX2JyaWRnZV9wb3N0X2Rpc2FibGUoZW5jb2Rlci0+YnJpZGdlLCBvbGRfc3RhdGUpOwo+
ICsJCWlmICghZW5jb2Rlci0+Y3VzdG9tX2JyaWRnZV9lbmFibGVfZGlzYWJsZV9zZXEpCj4gKwkJ
CWRybV9hdG9taWNfYnJpZGdlX3Bvc3RfZGlzYWJsZShlbmNvZGVyLT5icmlkZ2UsCj4gKwkJCQkJ
CSAgICAgICBvbGRfc3RhdGUpOwo+ICAJfQo+ICAKPiAgCWZvcl9lYWNoX29sZG5ld19jcnRjX2lu
X3N0YXRlKG9sZF9zdGF0ZSwgY3J0Yywgb2xkX2NydGNfc3RhdGUsIG5ld19jcnRjX3N0YXRlLCBp
KSB7Cj4gQEAgLTEzNDIsNyArMTM0NSw4IEBAIHZvaWQgZHJtX2F0b21pY19oZWxwZXJfY29tbWl0
X21vZGVzZXRfZW5hYmxlcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAJCSAqIEVhY2ggZW5j
b2RlciBoYXMgYXQgbW9zdCBvbmUgY29ubmVjdG9yIChzaW5jZSB3ZSBhbHdheXMgc3RlYWwKPiAg
CQkgKiBpdCBhd2F5KSwgc28gd2Ugd29uJ3QgY2FsbCBlbmFibGUgaG9va3MgdHdpY2UuCj4gIAkJ
ICovCj4gLQkJZHJtX2F0b21pY19icmlkZ2VfcHJlX2VuYWJsZShlbmNvZGVyLT5icmlkZ2UsIG9s
ZF9zdGF0ZSk7Cj4gKwkJaWYgKCFlbmNvZGVyLT5jdXN0b21fYnJpZGdlX2VuYWJsZV9kaXNhYmxl
X3NlcSkKPiArCQkJZHJtX2F0b21pY19icmlkZ2VfcHJlX2VuYWJsZShlbmNvZGVyLT5icmlkZ2Us
IG9sZF9zdGF0ZSk7Cj4gIAo+ICAJCWlmIChmdW5jcykgewo+ICAJCQlpZiAoZnVuY3MtPmF0b21p
Y19lbmFibGUpCj4gQEAgLTEzNTMsNyArMTM1Nyw4IEBAIHZvaWQgZHJtX2F0b21pY19oZWxwZXJf
Y29tbWl0X21vZGVzZXRfZW5hYmxlcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAJCQkJZnVu
Y3MtPmNvbW1pdChlbmNvZGVyKTsKPiAgCQl9Cj4gIAo+IC0JCWRybV9hdG9taWNfYnJpZGdlX2Vu
YWJsZShlbmNvZGVyLT5icmlkZ2UsIG9sZF9zdGF0ZSk7Cj4gKwkJaWYgKCFlbmNvZGVyLT5jdXN0
b21fYnJpZGdlX2VuYWJsZV9kaXNhYmxlX3NlcSkKPiArCQkJZHJtX2F0b21pY19icmlkZ2VfZW5h
YmxlKGVuY29kZXItPmJyaWRnZSwgb2xkX3N0YXRlKTsKPiAgCX0KPiAgCj4gIAlkcm1fYXRvbWlj
X2hlbHBlcl9jb21taXRfd3JpdGViYWNrcyhkZXYsIG9sZF9zdGF0ZSk7Cj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9kcm1fY3J0Y19oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1f
Y3J0Y19oZWxwZXIuYwo+IGluZGV4IGZhMzY5NDgzNmMyMi4uODdkYWUzN2ZlYzEyIDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fY3J0Y19oZWxwZXIuYwo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9kcm1fY3J0Y19oZWxwZXIuYwo+IEBAIC0xNjAsMTQgKzE2MCwxNiBAQCBkcm1fZW5j
b2Rlcl9kaXNhYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKPiAgCWlmICghZW5jb2Rl
cl9mdW5jcykKPiAgCQlyZXR1cm47Cj4gIAo+IC0JZHJtX2JyaWRnZV9kaXNhYmxlKGVuY29kZXIt
PmJyaWRnZSk7Cj4gKwlpZiAoIWVuY29kZXItPmN1c3RvbV9icmlkZ2VfZW5hYmxlX2Rpc2FibGVf
c2VxKQo+ICsJCWRybV9icmlkZ2VfZGlzYWJsZShlbmNvZGVyLT5icmlkZ2UpOwo+ICAKPiAgCWlm
IChlbmNvZGVyX2Z1bmNzLT5kaXNhYmxlKQo+ICAJCSgqZW5jb2Rlcl9mdW5jcy0+ZGlzYWJsZSko
ZW5jb2Rlcik7Cj4gIAllbHNlIGlmIChlbmNvZGVyX2Z1bmNzLT5kcG1zKQo+ICAJCSgqZW5jb2Rl
cl9mdW5jcy0+ZHBtcykoZW5jb2RlciwgRFJNX01PREVfRFBNU19PRkYpOwo+ICAKPiAtCWRybV9i
cmlkZ2VfcG9zdF9kaXNhYmxlKGVuY29kZXItPmJyaWRnZSk7Cj4gKwlpZiAoIWVuY29kZXItPmN1
c3RvbV9icmlkZ2VfZW5hYmxlX2Rpc2FibGVfc2VxKQo+ICsJCWRybV9icmlkZ2VfcG9zdF9kaXNh
YmxlKGVuY29kZXItPmJyaWRnZSk7Cj4gIH0KPiAgCj4gIHN0YXRpYyB2b2lkIF9fZHJtX2hlbHBl
cl9kaXNhYmxlX3VudXNlZF9mdW5jdGlvbnMoc3RydWN0IGRybV9kZXZpY2UgKmRldikKPiBAQCAt
MzY1LDEzICszNjcsMTUgQEAgYm9vbCBkcm1fY3J0Y19oZWxwZXJfc2V0X21vZGUoc3RydWN0IGRy
bV9jcnRjICpjcnRjLAo+ICAJCWlmICghZW5jb2Rlcl9mdW5jcykKPiAgCQkJY29udGludWU7Cj4g
IAo+IC0JCWRybV9icmlkZ2VfZGlzYWJsZShlbmNvZGVyLT5icmlkZ2UpOwo+ICsJCWlmICghZW5j
b2Rlci0+Y3VzdG9tX2JyaWRnZV9lbmFibGVfZGlzYWJsZV9zZXEpCj4gKwkJCWRybV9icmlkZ2Vf
ZGlzYWJsZShlbmNvZGVyLT5icmlkZ2UpOwo+ICAKPiAgCQkvKiBEaXNhYmxlIHRoZSBlbmNvZGVy
cyBhcyB0aGUgZmlyc3QgdGhpbmcgd2UgZG8uICovCj4gIAkJaWYgKGVuY29kZXJfZnVuY3MtPnBy
ZXBhcmUpCj4gIAkJCWVuY29kZXJfZnVuY3MtPnByZXBhcmUoZW5jb2Rlcik7Cj4gIAo+IC0JCWRy
bV9icmlkZ2VfcG9zdF9kaXNhYmxlKGVuY29kZXItPmJyaWRnZSk7Cj4gKwkJaWYgKCFlbmNvZGVy
LT5jdXN0b21fYnJpZGdlX2VuYWJsZV9kaXNhYmxlX3NlcSkKPiArCQkJZHJtX2JyaWRnZV9wb3N0
X2Rpc2FibGUoZW5jb2Rlci0+YnJpZGdlKTsKPiAgCX0KPiAgCj4gIAlkcm1fY3J0Y19wcmVwYXJl
X2VuY29kZXJzKGRldik7Cj4gQEAgLTQxNCwxMiArNDE4LDE0IEBAIGJvb2wgZHJtX2NydGNfaGVs
cGVyX3NldF9tb2RlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKPiAgCQlpZiAoIWVuY29kZXJfZnVu
Y3MpCj4gIAkJCWNvbnRpbnVlOwo+ICAKPiAtCQlkcm1fYnJpZGdlX3ByZV9lbmFibGUoZW5jb2Rl
ci0+YnJpZGdlKTsKPiArCQlpZiAoIWVuY29kZXItPmN1c3RvbV9icmlkZ2VfZW5hYmxlX2Rpc2Fi
bGVfc2VxKQo+ICsJCQlkcm1fYnJpZGdlX3ByZV9lbmFibGUoZW5jb2Rlci0+YnJpZGdlKTsKPiAg
Cj4gIAkJaWYgKGVuY29kZXJfZnVuY3MtPmNvbW1pdCkKPiAgCQkJZW5jb2Rlcl9mdW5jcy0+Y29t
bWl0KGVuY29kZXIpOwo+ICAKPiAtCQlkcm1fYnJpZGdlX2VuYWJsZShlbmNvZGVyLT5icmlkZ2Up
Owo+ICsJCWlmICghZW5jb2Rlci0+Y3VzdG9tX2JyaWRnZV9lbmFibGVfZGlzYWJsZV9zZXEpCj4g
KwkJCWRybV9icmlkZ2VfZW5hYmxlKGVuY29kZXItPmJyaWRnZSk7Cj4gIAl9Cj4gIAo+ICAJLyog
Q2FsY3VsYXRlIGFuZCBzdG9yZSB2YXJpb3VzIGNvbnN0YW50cyB3aGljaAo+IEBAIC04MjUsMTgg
KzgzMSwyMiBAQCBzdGF0aWMgdm9pZCBkcm1faGVscGVyX2VuY29kZXJfZHBtcyhzdHJ1Y3QgZHJt
X2VuY29kZXIgKmVuY29kZXIsIGludCBtb2RlKQo+ICAJaWYgKCFlbmNvZGVyX2Z1bmNzKQo+ICAJ
CXJldHVybjsKPiAgCj4gLQlpZiAobW9kZSA9PSBEUk1fTU9ERV9EUE1TX09OKQo+IC0JCWRybV9i
cmlkZ2VfcHJlX2VuYWJsZShicmlkZ2UpOwo+IC0JZWxzZQo+IC0JCWRybV9icmlkZ2VfZGlzYWJs
ZShicmlkZ2UpOwo+ICsJaWYgKCFlbmNvZGVyLT5jdXN0b21fYnJpZGdlX2VuYWJsZV9kaXNhYmxl
X3NlcSkgewo+ICsJCWlmIChtb2RlID09IERSTV9NT0RFX0RQTVNfT04pCj4gKwkJCWRybV9icmlk
Z2VfcHJlX2VuYWJsZShicmlkZ2UpOwo+ICsJCWVsc2UKPiArCQkJZHJtX2JyaWRnZV9kaXNhYmxl
KGJyaWRnZSk7Cj4gKwl9Cj4gIAo+ICAJaWYgKGVuY29kZXJfZnVuY3MtPmRwbXMpCj4gIAkJZW5j
b2Rlcl9mdW5jcy0+ZHBtcyhlbmNvZGVyLCBtb2RlKTsKPiAgCj4gLQlpZiAobW9kZSA9PSBEUk1f
TU9ERV9EUE1TX09OKQo+IC0JCWRybV9icmlkZ2VfZW5hYmxlKGJyaWRnZSk7Cj4gLQllbHNlCj4g
LQkJZHJtX2JyaWRnZV9wb3N0X2Rpc2FibGUoYnJpZGdlKTsKPiArCWlmICghZW5jb2Rlci0+Y3Vz
dG9tX2JyaWRnZV9lbmFibGVfZGlzYWJsZV9zZXEpIHsKPiArCQlpZiAobW9kZSA9PSBEUk1fTU9E
RV9EUE1TX09OKQo+ICsJCQlkcm1fYnJpZGdlX2VuYWJsZShicmlkZ2UpOwo+ICsJCWVsc2UKPiAr
CQkJZHJtX2JyaWRnZV9wb3N0X2Rpc2FibGUoYnJpZGdlKTsKPiArCX0KPiAgfQo+ICAKPiAgc3Rh
dGljIGludCBkcm1faGVscGVyX2Nob29zZV9jcnRjX2RwbXMoc3RydWN0IGRybV9jcnRjICpjcnRj
KQo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fZW5jb2Rlci5oIGIvaW5jbHVkZS9kcm0v
ZHJtX2VuY29kZXIuaAo+IGluZGV4IDcwY2ZjYTAzZDgxMi4uZDk4NmZmMTE5N2NlIDEwMDY0NAo+
IC0tLSBhL2luY2x1ZGUvZHJtL2RybV9lbmNvZGVyLmgKPiArKysgYi9pbmNsdWRlL2RybS9kcm1f
ZW5jb2Rlci5oCj4gQEAgLTE3NSw2ICsxNzUsMTUgQEAgc3RydWN0IGRybV9lbmNvZGVyIHsKPiAg
CXN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2U7Cj4gIAljb25zdCBzdHJ1Y3QgZHJtX2VuY29kZXJf
ZnVuY3MgKmZ1bmNzOwo+ICAJY29uc3Qgc3RydWN0IGRybV9lbmNvZGVyX2hlbHBlcl9mdW5jcyAq
aGVscGVyX3ByaXZhdGU7Cj4gKwo+ICsJLyoqCj4gKwkgKiBAY3VzdG9tX2JyaWRnZV9lbmFibGVf
ZGlzYWJsZV9zZXE6IFNldCB0byB0cnVlIGlmIHRoZSBlbmNvZGVyIG5lZWRzCj4gKwkgKiBhIGN1
c3RvbSBicmlkZ2UvZW5jb2RlciBlbmFibGUvZGlzYWJsZSBzZXF1ZW5jZS4gSW4gdGhhdCBjYXNl
IHRoZQo+ICsJICogZHJpdmVyIGlzIHJlc3BvbnNpYmxlIGZvciBjYWxsaW5nIHRoZQo+ICsJICog
ZHJtW19hdG9taWNdX2JyaWRnZV97cHJlX2VuYWJsZSxlbmFibGUsZGlzYWJsZSxwb3N0X2Rpc2Fi
bGV9KCkKPiArCSAqIGZ1bmN0aW9ucyBhcyBwYXJ0IG9mIGl0cyBlbmNvZGVyIGVuYWJsZS9kaXNh
YmxlIGhhbmRsaW5nLgo+ICsJICovCj4gKwl1aW50MzJfdCBjdXN0b21fYnJpZGdlX2VuYWJsZV9k
aXNhYmxlX3NlcSA6IDE7Cj4gIH07Cj4gIAo+ICAjZGVmaW5lIG9ial90b19lbmNvZGVyKHgpIGNv
bnRhaW5lcl9vZih4LCBzdHJ1Y3QgZHJtX2VuY29kZXIsIGJhc2UpCgotLSAKUmVnYXJkcywKCkxh
dXJlbnQgUGluY2hhcnQKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
