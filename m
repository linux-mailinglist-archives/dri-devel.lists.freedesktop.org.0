Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9D947FF930
	for <lists+dri-devel@lfdr.de>; Sun, 17 Nov 2019 12:46:54 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CAEA66E46D;
	Sun, 17 Nov 2019 11:45:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk [46.235.227.227])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A761B6E25F
 for <dri-devel@lists.freedesktop.org>; Sun, 17 Nov 2019 07:11:03 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1]) (Authenticated sender: sre)
 with ESMTPSA id 5820D28FCAF
Received: by earth.universe (Postfix, from userid 1000)
 id 0FCCD3C0CA3; Sun, 17 Nov 2019 03:41:40 +0100 (CET)
From: Sebastian Reichel <sebastian.reichel@collabora.com>
To: Sebastian Reichel <sre@kernel.org>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>
Subject: [RFCv1 23/42] drm/omap: dsi: lp/hs switching support for transfer()
Date: Sun, 17 Nov 2019 03:40:09 +0100
Message-Id: <20191117024028.2233-24-sebastian.reichel@collabora.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191117024028.2233-1-sebastian.reichel@collabora.com>
References: <20191117024028.2233-1-sebastian.reichel@collabora.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Sun, 17 Nov 2019 11:44:18 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: kernel@collabora.com, Tony Lindgren <tony@atomide.com>,
 "H. Nikolaus Schaller" <hns@goldelico.com>, Merlijn Wajer <merlijn@wizzup.org>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 dri-devel@lists.freedesktop.org, linux-omap@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW50ZWdyYXRlIGxvdy1wb3dlciAvIGhpZ2gtc3BlZWQgYnVzIHN3aXRjaGluZyBpbnRvIHRyYW5z
ZmVyCmZ1bmN0aW9uIGFuZCBkcm9wIHRoZSBvbWFwZHJtIHNwZWNpZmljIGVuYWJsZV9ocygpIGNh
bGxiYWNrLgoKU2lnbmVkLW9mZi1ieTogU2ViYXN0aWFuIFJlaWNoZWwgPHNlYmFzdGlhbi5yZWlj
aGVsQGNvbGxhYm9yYS5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMv
cGFuZWwtZHNpLWNtLmMgfCAgNiArKystLS0KIGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9k
c2kuYyAgICAgICAgICAgICAgIHwgMTMgKysrKysrKysrKystLQogZHJpdmVycy9ncHUvZHJtL29t
YXBkcm0vZHNzL29tYXBkc3MuaCAgICAgICAgICAgfCAgMiAtLQogMyBmaWxlcyBjaGFuZ2VkLCAx
NCBpbnNlcnRpb25zKCspLCA3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9vbWFwZHJtL2Rpc3BsYXlzL3BhbmVsLWRzaS1jbS5jIGIvZHJpdmVycy9ncHUvZHJtL29t
YXBkcm0vZGlzcGxheXMvcGFuZWwtZHNpLWNtLmMKaW5kZXggMTcwY2JjNzhmYmVmLi41NjAzZGFl
MGZkMGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL3BhbmVs
LWRzaS1jbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL3BhbmVsLWRz
aS1jbS5jCkBAIC0yNjksNyArMjY5LDcgQEAgc3RhdGljIGludCBkc2ljbV9leGl0X3VscHMoc3Ry
dWN0IHBhbmVsX2Rydl9kYXRhICpkZGF0YSkKIAkJcmV0dXJuIDA7CiAKIAlzcmMtPm9wcy0+ZW5h
YmxlKHNyYyk7Ci0Jc3JjLT5vcHMtPmRzaS5lbmFibGVfaHMoc3JjLCBkZGF0YS0+ZHNpLT5jaGFu
bmVsLCB0cnVlKTsKKwlkZGF0YS0+ZHNpLT5tb2RlX2ZsYWdzICY9IH5NSVBJX0RTSV9NT0RFX0xQ
TTsKIAogCXIgPSBfZHNpY21fZW5hYmxlX3RlKGRkYXRhLCB0cnVlKTsKIAlpZiAocikgewpAQCAt
NTc0LDcgKzU3NCw3IEBAIHN0YXRpYyBpbnQgZHNpY21fcG93ZXJfb24oc3RydWN0IHBhbmVsX2Ry
dl9kYXRhICpkZGF0YSkKIAogCWRzaWNtX2h3X3Jlc2V0KGRkYXRhKTsKIAotCXNyYy0+b3BzLT5k
c2kuZW5hYmxlX2hzKHNyYywgZGRhdGEtPmRzaS0+Y2hhbm5lbCwgZmFsc2UpOworCWRkYXRhLT5k
c2ktPm1vZGVfZmxhZ3MgfD0gTUlQSV9EU0lfTU9ERV9MUE07CiAKIAlyID0gZHNpY21fc2xlZXBf
b3V0KGRkYXRhKTsKIAlpZiAocikKQEAgLTYxNyw3ICs2MTcsNyBAQCBzdGF0aWMgaW50IGRzaWNt
X3Bvd2VyX29uKHN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEpCiAJCWRkYXRhLT5pbnRyb19w
cmludGVkID0gdHJ1ZTsKIAl9CiAKLQlzcmMtPm9wcy0+ZHNpLmVuYWJsZV9ocyhzcmMsIGRkYXRh
LT5kc2ktPmNoYW5uZWwsIHRydWUpOworCWRkYXRhLT5kc2ktPm1vZGVfZmxhZ3MgJj0gfk1JUElf
RFNJX01PREVfTFBNOwogCiAJcmV0dXJuIDA7CiBlcnI6CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vb21hcGRybS9kc3MvZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvZHNp
LmMKaW5kZXggMzIyNzE4NzBlNzRjLi44ZWIzMjNhZGIzMGEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9vbWFwZHJtL2Rzcy9kc2kuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9k
c3MvZHNpLmMKQEAgLTQ1LDYgKzQ1LDkgQEAgc3RydWN0IGRzaV9yZWcgeyB1MTYgbW9kdWxlOyB1
MTYgaWR4OyB9OwogCiAjZGVmaW5lIERTSV9SRUcobW9kLCBpZHgpCQkoKGNvbnN0IHN0cnVjdCBk
c2lfcmVnKSB7IG1vZCwgaWR4IH0pCiAKKy8qIHJldHVybnMgdHJ1ZSBpZmYgYm90aCBhcmd1bWVu
dHMgbG9naWNhbGx5IGRpZmZlcnMgKi8KKyNkZWZpbmUgTkVRVihhLCBiKSAoIShhKSBeICEoYikp
CisKIC8qIERTSSBQcm90b2NvbCBFbmdpbmUgKi8KIAogI2RlZmluZSBEU0lfUFJPVE8JCQkwCkBA
IC0zMjksNiArMzMyLDcgQEAgc3RydWN0IGRzaV9kYXRhIHsKIAlpbnQgaXJxOwogCiAJYm9vbCBp
c19lbmFibGVkOworCWJvb2wgaW5fbHBfbW9kZTsKIAogCXN0cnVjdCBjbGsgKmRzc19jbGs7CiAJ
c3RydWN0IHJlZ21hcCAqc3lzY29uOwpAQCAtMjQzMSw2ICsyNDM1LDggQEAgc3RhdGljIHZvaWQg
ZHNpX3ZjX2VuYWJsZV9ocyhzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsIGludCBjaGFu
bmVsLAogCS8qIHN0YXJ0IHRoZSBERFIgY2xvY2sgYnkgc2VuZGluZyBhIE5VTEwgcGFja2V0ICov
CiAJaWYgKGRzaS0+dm1fdGltaW5ncy5kZHJfY2xrX2Fsd2F5c19vbiAmJiBlbmFibGUpCiAJCWRz
aV92Y19zZW5kX251bGwoZHNpLCBjaGFubmVsKTsKKworCWRzaS0+aW5fbHBfbW9kZSA9ICFlbmFi
bGU7CiB9CiAKIHN0YXRpYyB2b2lkIGRzaV92Y19mbHVzaF9sb25nX2RhdGEoc3RydWN0IGRzaV9k
YXRhICpkc2ksIGludCBjaGFubmVsKQpAQCAtNDY5Nyw2ICs0NzAzLDExIEBAIHN0YXRpYyBzc2l6
ZV90IG9tYXBfZHNpX2hvc3RfdHJhbnNmZXIoc3RydWN0IG1pcGlfZHNpX2hvc3QgKmhvc3QsCiAJ
c3RydWN0IGRzaV9kYXRhICpkc2kgPSBob3N0X3RvX29tYXAoaG9zdCk7CiAJc3RydWN0IG9tYXBf
ZHNzX2RldmljZSAqZHNzZGV2ID0gJmRzaS0+b3V0cHV0OwogCisJaWYgKE5FUVYobXNnLT5mbGFn
cyAmIE1JUElfRFNJX01TR19VU0VfTFBNLCBkc2ktPmluX2xwX21vZGUpKSB7CisJCWRzaV92Y19l
bmFibGVfaHMoZHNzZGV2LCBtc2ctPmNoYW5uZWwsCisJCQkJICEobXNnLT5mbGFncyAmIE1JUElf
RFNJX01TR19VU0VfTFBNKSk7CisJfQorCiAJc3dpdGNoIChtc2ctPnR5cGUpIHsKIAljYXNlIE1J
UElfRFNJX0dFTkVSSUNfU0hPUlRfV1JJVEVfMF9QQVJBTToKIAljYXNlIE1JUElfRFNJX0dFTkVS
SUNfU0hPUlRfV1JJVEVfMV9QQVJBTToKQEAgLTQ3NTcsOCArNDc2OCw2IEBAIHN0YXRpYyBjb25z
dCBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlX29wcyBkc2lfb3BzID0gewogCiAJCS5kaXNhYmxlID0g
ZHNpX2Rpc3BsYXlfZGlzYWJsZSwKIAotCQkuZW5hYmxlX2hzID0gZHNpX3ZjX2VuYWJsZV9ocywK
LQogCQkuc2V0X2NvbmZpZyA9IGRzaV9zZXRfY29uZmlnLAogCiAJCS5lbmFibGVfdmlkZW9fb3V0
cHV0ID0gZHNpX2VuYWJsZV92aWRlb19vdXRwdXQsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vb21hcGRybS9kc3Mvb21hcGRzcy5oIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL29t
YXBkc3MuaAppbmRleCBjZDk3Njk3MTFiNTguLjViY2MxNGQ5ZjczNyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL29tYXBkc3MuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
b21hcGRybS9kc3Mvb21hcGRzcy5oCkBAIC0yOTQsOCArMjk0LDYgQEAgc3RydWN0IG9tYXBkc3Nf
ZHNpX29wcyB7CiAJaW50ICgqc2V0X2NvbmZpZykoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNz
ZGV2LAogCQkJY29uc3Qgc3RydWN0IG9tYXBfZHNzX2RzaV9jb25maWcgKmNmZyk7CiAKLQl2b2lk
ICgqZW5hYmxlX2hzKShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsIGludCBjaGFubmVs
LAotCQkJYm9vbCBlbmFibGUpOwogCWludCAoKmVuYWJsZV90ZSkoc3RydWN0IG9tYXBfZHNzX2Rl
dmljZSAqZHNzZGV2LCBib29sIGVuYWJsZSk7CiAKIAlpbnQgKCp1cGRhdGUpKHN0cnVjdCBvbWFw
X2Rzc19kZXZpY2UgKmRzc2RldiwgaW50IGNoYW5uZWwsCi0tIAoyLjI0LjAKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
