Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 2261E62841
	for <lists+dri-devel@lfdr.de>; Mon,  8 Jul 2019 20:20:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 637CE898BE;
	Mon,  8 Jul 2019 18:20:13 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1D1E46E036;
 Mon,  8 Jul 2019 18:20:09 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 08 Jul 2019 11:20:09 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,466,1557212400"; d="scan'208";a="176240727"
Received: from ramaling-i9x.iind.intel.com ([10.99.66.154])
 by orsmga002.jf.intel.com with ESMTP; 08 Jul 2019 11:20:07 -0700
From: Ramalingam C <ramalingam.c@intel.com>
To: intel-gfx <intel-gfx@lists.freedesktop.org>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Daniel Vetter <daniel@ffwll.ch>
Subject: [PATCH v9 1/6] drm: Add Content protection type property
Date: Mon,  8 Jul 2019 16:51:11 +0530
Message-Id: <20190708112116.1780-2-ramalingam.c@intel.com>
X-Mailer: git-send-email 2.19.1
In-Reply-To: <20190708112116.1780-1-ramalingam.c@intel.com>
References: <20190708112116.1780-1-ramalingam.c@intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBhZGRzIGEgRFJNIEVOVU0gcHJvcGVydHkgdG8gdGhlIHNlbGVjdGVkIGNvbm5l
Y3RvcnMuClRoaXMgcHJvcGVydHkgaXMgdXNlZCBmb3IgbWVudGlvbmluZyB0aGUgcHJvdGVjdGVk
IGNvbnRlbnQncyB0eXBlCmZyb20gdXNlcnNwYWNlIHRvIGtlcm5lbCBIRENQIGF1dGhlbnRpY2F0
aW9uLgoKVHlwZSBvZiB0aGUgc3RyZWFtIGlzIGRlY2lkZWQgYnkgdGhlIHByb3RlY3RlZCBjb250
ZW50IHByb3ZpZGVycy4KVHlwZSAwIGNvbnRlbnQgY2FuIGJlIHJlbmRlcmVkIG9uIGFueSBIRENQ
IHByb3RlY3RlZCBkaXNwbGF5IHdpcmVzLgpCdXQgVHlwZSAxIGNvbnRlbnQgY2FuIGJlIHJlbmRl
cmVkIG9ubHkgb24gSERDUDIuMiBwcm90ZWN0ZWQgcGF0aHMuCgpTbyB3aGVuIGEgdXNlcnNwYWNl
IHNldHMgdGhpcyBwcm9wZXJ0eSB0byBUeXBlIDEgYW5kIHN0YXJ0cyB0aGUgSERDUAplbmFibGUs
IGtlcm5lbCB3aWxsIGhvbm91ciBpdCBvbmx5IGlmIEhEQ1AyLjIgYXV0aGVudGljYXRpb24gaXMg
dGhyb3VnaApmb3IgdHlwZSAxLiBFbHNlIEhEQ1AgZW5hYmxlIHdpbGwgYmUgZmFpbGVkLgoKTmVl
ZCBBQ0sgZm9yIHRoaXMgbmV3IGNvbmVuY3RvciBwcm9wZXJ0eSBmcm9tIHVzZXJzcGFjZSBjb25z
dW1lci4KCnYyOgogIGNwX2NvbnRlbnRfdHlwZSBpcyByZXBsYWNlZCB3aXRoIGNvbnRlbnRfcHJv
dGVjdGlvbl90eXBlIFtkYW5pZWxdCiAgY2hlY2sgYXQgYXRvbWljX3NldF9wcm9wZXJ0eSBpcyBy
ZW1vdmVkIFtNYWFydGVuXQp2MzoKICAlcy9jb250ZW50X3Byb3RlY3Rpb25fdHlwZS9oZGNwX2Nv
bnRlbnRfdHlwZSBbUGVra2FdCnY0OgogIHByb3BlcnR5IGlzIGNyZWF0ZWQgZm9yIHRoZSBmaXJz
dCByZXF1ZXN0ZWQgY29ubmVjdG9yIGFuZCB0aGVuIHJldXNlZC4KCVtEYW52ZXRdCnY1OgogIGtl
cm5lbCBkb2Mgbml0cyBhZGRyZXNzZWQgW0RhbmllbF0KICBSZWJhc2VkIGFzIHBhcnQgb2YgcGF0
Y2ggcmVvcmRlcmluZy4KdjY6CiAgS2VybmVsIGRvY3MgYXJlIG1vZGlmaWVkIFtwZWtrYV0Kdjc6
CiAgTW9yZSBkZXRhaWxzIGluIEtlcm5lbCBkb2NzLiBbcGVra2FdCgpTaWduZWQtb2ZmLWJ5OiBS
YW1hbGluZ2FtIEMgPHJhbWFsaW5nYW0uY0BpbnRlbC5jb20+ClJldmlld2VkLWJ5OiBEYW5pZWwg
VmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1f
YXRvbWljX3VhcGkuYyAgICAgICAgIHwgIDQgKysrCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2Nvbm5l
Y3Rvci5jICAgICAgICAgICB8IDM5ICsrKysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dw
dS9kcm0vZHJtX2hkY3AuYyAgICAgICAgICAgICAgICB8IDM2ICsrKysrKysrKysrKysrKysrKysr
LQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9oZGNwLmMgfCAgNCArKy0KIGlu
Y2x1ZGUvZHJtL2RybV9jb25uZWN0b3IuaCAgICAgICAgICAgICAgIHwgIDcgKysrKwogaW5jbHVk
ZS9kcm0vZHJtX2hkY3AuaCAgICAgICAgICAgICAgICAgICAgfCAgMiArLQogaW5jbHVkZS9kcm0v
ZHJtX21vZGVfY29uZmlnLmggICAgICAgICAgICAgfCAgNiArKysrCiBpbmNsdWRlL3VhcGkvZHJt
L2RybV9tb2RlLmggICAgICAgICAgICAgICB8ICA0ICsrKwogOCBmaWxlcyBjaGFuZ2VkLCA5OSBp
bnNlcnRpb25zKCspLCAzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9kcm1fYXRvbWljX3VhcGkuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX3VhcGkuYwpp
bmRleCBhYmUzOGJkZjg1YWUuLjE5YWUxMTlmMWE1ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2RybV9hdG9taWNfdWFwaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX3Vh
cGkuYwpAQCAtNzQ3LDYgKzc0Nyw4IEBAIHN0YXRpYyBpbnQgZHJtX2F0b21pY19jb25uZWN0b3Jf
c2V0X3Byb3BlcnR5KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCiAJCQlyZXR1cm4g
LUVJTlZBTDsKIAkJfQogCQlzdGF0ZS0+Y29udGVudF9wcm90ZWN0aW9uID0gdmFsOworCX0gZWxz
ZSBpZiAocHJvcGVydHkgPT0gY29uZmlnLT5oZGNwX2NvbnRlbnRfdHlwZV9wcm9wZXJ0eSkgewor
CQlzdGF0ZS0+aGRjcF9jb250ZW50X3R5cGUgPSB2YWw7CiAJfSBlbHNlIGlmIChwcm9wZXJ0eSA9
PSBjb25uZWN0b3ItPmNvbG9yc3BhY2VfcHJvcGVydHkpIHsKIAkJc3RhdGUtPmNvbG9yc3BhY2Ug
PSB2YWw7CiAJfSBlbHNlIGlmIChwcm9wZXJ0eSA9PSBjb25maWctPndyaXRlYmFja19mYl9pZF9w
cm9wZXJ0eSkgewpAQCAtODMxLDYgKzgzMyw4IEBAIGRybV9hdG9taWNfY29ubmVjdG9yX2dldF9w
cm9wZXJ0eShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQkJc3RhdGUtPmhkcl9v
dXRwdXRfbWV0YWRhdGEtPmJhc2UuaWQgOiAwOwogCX0gZWxzZSBpZiAocHJvcGVydHkgPT0gY29u
ZmlnLT5jb250ZW50X3Byb3RlY3Rpb25fcHJvcGVydHkpIHsKIAkJKnZhbCA9IHN0YXRlLT5jb250
ZW50X3Byb3RlY3Rpb247CisJfSBlbHNlIGlmIChwcm9wZXJ0eSA9PSBjb25maWctPmhkY3BfY29u
dGVudF90eXBlX3Byb3BlcnR5KSB7CisJCSp2YWwgPSBzdGF0ZS0+aGRjcF9jb250ZW50X3R5cGU7
CiAJfSBlbHNlIGlmIChwcm9wZXJ0eSA9PSBjb25maWctPndyaXRlYmFja19mYl9pZF9wcm9wZXJ0
eSkgewogCQkvKiBXcml0ZWJhY2sgZnJhbWVidWZmZXIgaXMgb25lLXNob3QsIHdyaXRlIGFuZCBm
b3JnZXQgKi8KIAkJKnZhbCA9IDA7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2Nv
bm5lY3Rvci5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYwppbmRleCAwNjhkNGIw
NWYxYmUuLjczMmY2NjQ1NjQzZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9jb25u
ZWN0b3IuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2Nvbm5lY3Rvci5jCkBAIC05NTIsNiAr
OTUyLDQ1IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3Byb3BfZW51bV9saXN0IGhkbWlfY29s
b3JzcGFjZXNbXSA9IHsKICAqCSAgaXMgbm8gbG9uZ2VyIHByb3RlY3RlZCBhbmQgdXNlcnNwYWNl
IHNob3VsZCB0YWtlIGFwcHJvcHJpYXRlIGFjdGlvbgogICoJICAod2hhdGV2ZXIgdGhhdCBtaWdo
dCBiZSkuCiAgKgorICogSERDUCBDb250ZW50IFR5cGU6CisgKglUaGlzIEVudW0gcHJvcGVydHkg
aXMgdXNlZCBieSB0aGUgdXNlcnNwYWNlIHRvIGRlY2xhcmUgdGhlIGNvbnRlbnQgdHlwZQorICoJ
b2YgdGhlIGRpc3BsYXkgc3RyZWFtLCB0byBrZXJuZWwuIEhlcmUgZGlzcGxheSBzdHJlYW0gc3Rh
bmRzIGZvciBhbnkKKyAqCWRpc3BsYXkgY29udGVudCB0aGF0IHVzZXJzcGFjZSBpbnRlbmRlZCB0
byByZW5kZXIgd2l0aCBIRENQIGVuY3J5cHRpb24uCisgKgorICoJQ29udGVudCBUeXBlIG9mIGEg
c3RyZWFtIGlzIGRlY2lkZWQgYnkgdGhlIG93bmVyIG9mIHRoZSBzdHJlYW0sIGFzCisgKgkiSERD
UCBUeXBlMCIgb3IgIkhEQ1AgVHlwZTEiLgorICoKKyAqCVRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVy
dHkgY2FuIGJlIG9uZSB0aGUgYmVsb3c6CisgKgkgIC0gIkhEQ1AgVHlwZTAiOiBEUk1fTU9ERV9I
RENQX0NPTlRFTlRfVFlQRTAgPSAwCisgKgkgIC0gIkhEQ1AgVHlwZTEiOiBEUk1fTU9ERV9IRENQ
X0NPTlRFTlRfVFlQRTEgPSAxCisgKgorICoJV2hlbiBrZXJuZWwgc3RhcnRzIHRoZSBIRENQIGF1
dGhlbnRpY2F0aW9uIHVwb24gdGhlICJERVNJUkVEIiBzdGF0ZSBvZgorICoJdGhlICJDb250ZW50
IFByb3RlY3Rpb24iLCBpdCByZWZlcnMgdGhlICJIRENQIENvbnRlbnQgVHlwZSIgcHJvcGVydHkK
KyAqCXN0YXRlLiBBbmQgcGVyZm9ybSB0aGUgSERDUCBhdXRoZW50aWNhdGlvbiB3aXRoIHRoZSBk
aXNwbGF5IHNpbmsgZm9yCisgKgl0aGUgY29udGVudCB0eXBlIG1lbnRpb25lZCBieSAiSERDUCBD
b250ZW50IFR5cGUiLgorICoKKyAqCVN0cmVhbSBjbGFzc2lmaWVkIGFzIEhEQ1AgVHlwZTAgY2Fu
IGJlIHRyYW5zbWl0dGVkIG9uIGEgbGluayB3aGljaCBpcworICoJZW5jcnlwdGVkIHdpdGggSERD
UCAxLjQgb3IgaGlnaGVyIHZlcnNpb25zIG9mIEhEQ1AoaS5lIEhEQ1AyLjIKKyAqCWFuZCBtb3Jl
KS4KKyAqCisgKglTdHJlYW1zIGNsYXNzaWZpZWQgYXMgSERDUCBUeXBlMSBjYW4gYmUgdHJhbnNt
aXR0ZWQgb24gYSBsaW5rIHdoaWNoIGlzCisgKgllbmNyeXB0ZWQgb25seSB3aXRoIEhEQ1AgMi4y
LiBJbiBmdXR1cmUsIEhEQ1AgdmVyc2lvbnMgPjIuMiBhbHNvIG1pZ2h0CisgKglzdXBwb3J0IFR5
cGUxIGJhc2VkIG9uIHRoZWlyIHNwZWMuCisgKgorICoJSERDUDIuMiBhdXRoZW50aWNhdGlvbiBw
cm90b2NvbCBpdHNlbGYgdGFrZXMgdGhlICJDb250ZW50IFR5cGUiIGFzIGEKKyAqCXBhcmFtZXRl
ciwgd2hpY2ggaXMgYSBpbnB1dCBmb3IgdGhlIERQIEhEQ1AyLjIgZW5jcnlwdGlvbiBhbGdvLgor
ICoKKyAqCU5vdGUgdGhhdCB0aGUgSERDUCBDb250ZW50IFR5cGUgcHJvcGVydHkgaXMgaW50cm9k
dWNlZCBhdCBIRENQIDIuMiwgYW5kCisgKglkZWZhdWx0cyB0byB0eXBlIDAuIEl0IGlzIG9ubHkg
ZXhwb3NlZCBieSBkcml2ZXJzIHN1cHBvcnRpbmcgSERDUCAyLjIuCisgKglCYXNlZCBvbiBob3cg
bmV4dCB2ZXJzaW9ucyBvZiBIRENQIHNwZWNzIGFyZSBkZWZpbmVkIGNvbnRlbnQgVHlwZSBjb3Vs
ZAorICoJYmUgdXNlZCBmb3IgaGlnaGVyIHZlcnNpb25zIHRvby4KKyAqCisgKglJZiBjb250ZW50
IHR5cGUgaXMgY2hhbmdlZCB3aGVuICJDb250ZW50IFByb3RlY3Rpb24iIGlzIG5vdCBVTkRFU0lS
RUQsCisgKgl0aGVuIGtlcm5lbCB3aWxsIGRpc2FibGUgdGhlIEhEQ1AgYW5kIHJlLWVuYWJsZSB3
aXRoIG5ldyB0eXBlIGluIHRoZQorICoJc2FtZSBhdG9taWMgY29tbWl0LiBBbmQgd2hlbiAiQ29u
dGVudCBQcm90ZWN0aW9uIiBpcyBFTkFCTEVELCBpdCBtZWFucworICoJdGhhdCBsaW5rIGlzIEhE
Q1AgYXV0aGVudGljYXRlZCBhbmQgZW5jcnlwdGVkLCBmb3IgdGhlIHRyYW5zbWlzc2lvbiBvZgor
ICoJdGhlIFR5cGUgb2Ygc3RyZWFtIG1lbnRpb25lZCBhdCAiSERDUCBDb250ZW50IFR5cGUiLgor
ICoKICAqIEhEUl9PVVRQVVRfTUVUQURBVEE6CiAgKglDb25uZWN0b3IgcHJvcGVydHkgdG8gZW5h
YmxlIHVzZXJzcGFjZSB0byBzZW5kIEhEUiBNZXRhZGF0YSB0bwogICoJZHJpdmVyLiBUaGlzIG1l
dGFkYXRhIGlzIGJhc2VkIG9uIHRoZSBjb21wb3NpdGlvbiBhbmQgYmxlbmRpbmcKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1faGRjcC5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9oZGNw
LmMKaW5kZXggY2Q4MzdiZDQwOWY3Li5jZTIzNWZkMWM4NDQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9kcm1faGRjcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1faGRjcC5jCkBAIC0z
NDQsMjMgKzM0NCw0MSBAQCBzdGF0aWMgc3RydWN0IGRybV9wcm9wX2VudW1fbGlzdCBkcm1fY3Bf
ZW51bV9saXN0W10gPSB7CiB9OwogRFJNX0VOVU1fTkFNRV9GTihkcm1fZ2V0X2NvbnRlbnRfcHJv
dGVjdGlvbl9uYW1lLCBkcm1fY3BfZW51bV9saXN0KQogCitzdGF0aWMgc3RydWN0IGRybV9wcm9w
X2VudW1fbGlzdCBkcm1faGRjcF9jb250ZW50X3R5cGVfZW51bV9saXN0W10gPSB7CisJeyBEUk1f
TU9ERV9IRENQX0NPTlRFTlRfVFlQRTAsICJIRENQIFR5cGUwIiB9LAorCXsgRFJNX01PREVfSERD
UF9DT05URU5UX1RZUEUxLCAiSERDUCBUeXBlMSIgfSwKK307CitEUk1fRU5VTV9OQU1FX0ZOKGRy
bV9nZXRfaGRjcF9jb250ZW50X3R5cGVfbmFtZSwKKwkJIGRybV9oZGNwX2NvbnRlbnRfdHlwZV9l
bnVtX2xpc3QpCisKIC8qKgogICogZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfY29udGVudF9wcm90ZWN0
aW9uX3Byb3BlcnR5IC0gYXR0YWNoIGNvbnRlbnQgcHJvdGVjdGlvbgogICogcHJvcGVydHkKICAq
CiAgKiBAY29ubmVjdG9yOiBjb25uZWN0b3IgdG8gYXR0YWNoIENQIHByb3BlcnR5IG9uLgorICog
QGhkY3BfY29udGVudF90eXBlOiBpcyBIRENQIENvbnRlbnQgVHlwZSBwcm9wZXJ0eSBuZWVkZWQg
Zm9yIGNvbm5lY3RvcgogICoKICAqIFRoaXMgaXMgdXNlZCB0byBhZGQgc3VwcG9ydCBmb3IgY29u
dGVudCBwcm90ZWN0aW9uIG9uIHNlbGVjdCBjb25uZWN0b3JzLgogICogQ29udGVudCBQcm90ZWN0
aW9uIGlzIGludGVudGlvbmFsbHkgdmFndWUgdG8gYWxsb3cgZm9yIGRpZmZlcmVudCB1bmRlcmx5
aW5nCiAgKiB0ZWNobm9sb2dpZXMsIGhvd2V2ZXIgaXQgaXMgbW9zdCBpbXBsZW1lbnRlZCBieSBI
RENQLgogICoKKyAqIFdoZW4gaGRjcF9jb250ZW50X3R5cGUgaXMgdHJ1ZSBlbnVtIHByb3BlcnR5
IGNhbGxlZCBIRENQIENvbnRlbnQgVHlwZSBpcworICogY3JlYXRlZCAoaWYgaXQgaXMgbm90IGFs
cmVhZHkpIGFuZCBhdHRhY2hlZCB0byB0aGUgY29ubmVjdG9yLgorICoKKyAqIFRoaXMgcHJvcGVy
dHkgaXMgdXNlZCBmb3Igc2VuZGluZyB0aGUgcHJvdGVjdGVkIGNvbnRlbnQncyBzdHJlYW0gdHlw
ZQorICogZnJvbSB1c2Vyc3BhY2UgdG8ga2VybmVsIG9uIHNlbGVjdGVkIGNvbm5lY3RvcnMuIFBy
b3RlY3RlZCBjb250ZW50IHByb3ZpZGVyCisgKiB3aWxsIGRlY2lkZSB0aGVpciB0eXBlIG9mIHRo
ZWlyIGNvbnRlbnQgYW5kIGRlY2xhcmUgdGhlIHNhbWUgdG8ga2VybmVsLgorICoKKyAqIENvbnRl
bnQgdHlwZSB3aWxsIGJlIHVzZWQgZHVyaW5nIHRoZSBIRENQIDIuMiBhdXRoZW50aWNhdGlvbi4K
KyAqIENvbnRlbnQgdHlwZSB3aWxsIGJlIHNldCB0byAmZHJtX2Nvbm5lY3Rvcl9zdGF0ZS5oZGNw
X2NvbnRlbnRfdHlwZS4KKyAqCiAgKiBUaGUgY29udGVudCBwcm90ZWN0aW9uIHdpbGwgYmUgc2V0
IHRvICZkcm1fY29ubmVjdG9yX3N0YXRlLmNvbnRlbnRfcHJvdGVjdGlvbgogICoKICAqIFJldHVy
bnM6CiAgKiBaZXJvIG9uIHN1Y2Nlc3MsIG5lZ2F0aXZlIGVycm5vIG9uIGZhaWx1cmUuCiAgKi8K
IGludCBkcm1fY29ubmVjdG9yX2F0dGFjaF9jb250ZW50X3Byb3RlY3Rpb25fcHJvcGVydHkoCi0J
CXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCisJCXN0cnVjdCBkcm1fY29ubmVjdG9y
ICpjb25uZWN0b3IsIGJvb2wgaGRjcF9jb250ZW50X3R5cGUpCiB7CiAJc3RydWN0IGRybV9kZXZp
Y2UgKmRldiA9IGNvbm5lY3Rvci0+ZGV2OwogCXN0cnVjdCBkcm1fcHJvcGVydHkgKnByb3AgPQpA
QCAtMzc3LDYgKzM5NSwyMiBAQCBpbnQgZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfY29udGVudF9wcm90
ZWN0aW9uX3Byb3BlcnR5KAogCQkJCSAgIERSTV9NT0RFX0NPTlRFTlRfUFJPVEVDVElPTl9VTkRF
U0lSRUQpOwogCWRldi0+bW9kZV9jb25maWcuY29udGVudF9wcm90ZWN0aW9uX3Byb3BlcnR5ID0g
cHJvcDsKIAorCWlmICghaGRjcF9jb250ZW50X3R5cGUpCisJCXJldHVybiAwOworCisJcHJvcCA9
IGRldi0+bW9kZV9jb25maWcuaGRjcF9jb250ZW50X3R5cGVfcHJvcGVydHk7CisJaWYgKCFwcm9w
KQorCQlwcm9wID0gZHJtX3Byb3BlcnR5X2NyZWF0ZV9lbnVtKGRldiwgMCwgIkhEQ1AgQ29udGVu
dCBUeXBlIiwKKwkJCQkJZHJtX2hkY3BfY29udGVudF90eXBlX2VudW1fbGlzdCwKKwkJCQkJQVJS
QVlfU0laRSgKKwkJCQkJZHJtX2hkY3BfY29udGVudF90eXBlX2VudW1fbGlzdCkpOworCWlmICgh
cHJvcCkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgm
Y29ubmVjdG9yLT5iYXNlLCBwcm9wLAorCQkJCSAgIERSTV9NT0RFX0hEQ1BfQ09OVEVOVF9UWVBF
MCk7CisJZGV2LT5tb2RlX2NvbmZpZy5oZGNwX2NvbnRlbnRfdHlwZV9wcm9wZXJ0eSA9IHByb3A7
CisKIAlyZXR1cm4gMDsKIH0KIEVYUE9SVF9TWU1CT0woZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfY29u
dGVudF9wcm90ZWN0aW9uX3Byb3BlcnR5KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9oZGNwLmMKaW5kZXggYmMzYTk0ZDQ5MWM0Li4yYTRkMTA5NTJiNzQgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jCkBAIC0xODI5LDcgKzE4MjksOSBAQCBp
bnQgaW50ZWxfaGRjcF9pbml0KHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvciwKIAlp
ZiAoIXNoaW0pCiAJCXJldHVybiAtRUlOVkFMOwogCi0JcmV0ID0gZHJtX2Nvbm5lY3Rvcl9hdHRh
Y2hfY29udGVudF9wcm90ZWN0aW9uX3Byb3BlcnR5KCZjb25uZWN0b3ItPmJhc2UpOworCXJldCA9
CisJZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfY29udGVudF9wcm90ZWN0aW9uX3Byb3BlcnR5KCZjb25u
ZWN0b3ItPmJhc2UsCisJCQkJCQkJIGZhbHNlKTsKIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0Owog
CmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fY29ubmVjdG9yLmggYi9pbmNsdWRlL2RybS9k
cm1fY29ubmVjdG9yLmgKaW5kZXggNGMzMGQ3NTE0ODdhLi5kNjQzMjk2N2EyYTkgMTAwNjQ0Ci0t
LSBhL2luY2x1ZGUvZHJtL2RybV9jb25uZWN0b3IuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fY29u
bmVjdG9yLmgKQEAgLTYwMSw2ICs2MDEsMTIgQEAgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUg
ewogCSAqLwogCXVuc2lnbmVkIGludCBjb250ZW50X3R5cGU7CiAKKwkvKioKKwkgKiBAaGRjcF9j
b250ZW50X3R5cGU6IENvbm5lY3RvciBwcm9wZXJ0eSB0byBwYXNzIHRoZSB0eXBlIG9mCisJICog
cHJvdGVjdGVkIGNvbnRlbnQuIFRoaXMgaXMgbW9zdCBjb21tb25seSB1c2VkIGZvciBIRENQLgor
CSAqLworCXVuc2lnbmVkIGludCBoZGNwX2NvbnRlbnRfdHlwZTsKKwogCS8qKgogCSAqIEBzY2Fs
aW5nX21vZGU6IENvbm5lY3RvciBwcm9wZXJ0eSB0byBjb250cm9sIHRoZQogCSAqIHVwc2NhbGlu
ZywgbW9zdGx5IHVzZWQgZm9yIGJ1aWx0LWluIHBhbmVscy4KQEAgLTE0ODQsNiArMTQ5MCw3IEBA
IGNvbnN0IGNoYXIgKmRybV9nZXRfZHZpX2lfc2VsZWN0X25hbWUoaW50IHZhbCk7CiBjb25zdCBj
aGFyICpkcm1fZ2V0X3R2X3N1YmNvbm5lY3Rvcl9uYW1lKGludCB2YWwpOwogY29uc3QgY2hhciAq
ZHJtX2dldF90dl9zZWxlY3RfbmFtZShpbnQgdmFsKTsKIGNvbnN0IGNoYXIgKmRybV9nZXRfY29u
dGVudF9wcm90ZWN0aW9uX25hbWUoaW50IHZhbCk7Citjb25zdCBjaGFyICpkcm1fZ2V0X2hkY3Bf
Y29udGVudF90eXBlX25hbWUoaW50IHZhbCk7CiAKIGludCBkcm1fbW9kZV9jcmVhdGVfZHZpX2lf
cHJvcGVydGllcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKIGludCBkcm1fbW9kZV9jcmVhdGVf
dHZfbWFyZ2luX3Byb3BlcnRpZXMoc3RydWN0IGRybV9kZXZpY2UgKmRldik7CmRpZmYgLS1naXQg
YS9pbmNsdWRlL2RybS9kcm1faGRjcC5oIGIvaW5jbHVkZS9kcm0vZHJtX2hkY3AuaAppbmRleCAx
Mzc3MWE0OTZlMmIuLjI5NzBhYmRmYWYxMiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2hk
Y3AuaAorKysgYi9pbmNsdWRlL2RybS9kcm1faGRjcC5oCkBAIC0yOTEsNSArMjkxLDUgQEAgc3Ry
dWN0IGRybV9jb25uZWN0b3I7CiBib29sIGRybV9oZGNwX2NoZWNrX2tzdnNfcmV2b2tlZChzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCSB1OCAqa3N2cywgdTMyIGtzdl9jb3VudCk7CiBpbnQg
ZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfY29udGVudF9wcm90ZWN0aW9uX3Byb3BlcnR5KAotCQlzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKTsKKwkJc3RydWN0IGRybV9jb25uZWN0b3IgKmNv
bm5lY3RvciwgYm9vbCBoZGNwX2NvbnRlbnRfdHlwZSk7CiAjZW5kaWYKZGlmZiAtLWdpdCBhL2lu
Y2x1ZGUvZHJtL2RybV9tb2RlX2NvbmZpZy5oIGIvaW5jbHVkZS9kcm0vZHJtX21vZGVfY29uZmln
LmgKaW5kZXggNzU5ZDQ2MmQwMjhiLi42YzRiNWJjODU5NTEgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUv
ZHJtL2RybV9tb2RlX2NvbmZpZy5oCisrKyBiL2luY2x1ZGUvZHJtL2RybV9tb2RlX2NvbmZpZy5o
CkBAIC04NDksNiArODQ5LDEyIEBAIHN0cnVjdCBkcm1fbW9kZV9jb25maWcgewogCSAqLwogCXN0
cnVjdCBkcm1fcHJvcGVydHkgKmNvbnRlbnRfcHJvdGVjdGlvbl9wcm9wZXJ0eTsKIAorCS8qKgor
CSAqIEBoZGNwX2NvbnRlbnRfdHlwZV9wcm9wZXJ0eTogRFJNIEVOVU0gcHJvcGVydHkgZm9yIHR5
cGUgb2YKKwkgKiBQcm90ZWN0ZWQgQ29udGVudC4KKwkgKi8KKwlzdHJ1Y3QgZHJtX3Byb3BlcnR5
ICpoZGNwX2NvbnRlbnRfdHlwZV9wcm9wZXJ0eTsKKwogCS8qIGR1bWIgaW9jdGwgcGFyYW1ldGVy
cyAqLwogCXVpbnQzMl90IHByZWZlcnJlZF9kZXB0aCwgcHJlZmVyX3NoYWRvdzsKIApkaWZmIC0t
Z2l0IGEvaW5jbHVkZS91YXBpL2RybS9kcm1fbW9kZS5oIGIvaW5jbHVkZS91YXBpL2RybS9kcm1f
bW9kZS5oCmluZGV4IDVhYjMzMWU1ZGMyMy4uNWM5NTQzOTQwOTNmIDEwMDY0NAotLS0gYS9pbmNs
dWRlL3VhcGkvZHJtL2RybV9tb2RlLmgKKysrIGIvaW5jbHVkZS91YXBpL2RybS9kcm1fbW9kZS5o
CkBAIC0yMTgsNiArMjE4LDEwIEBAIGV4dGVybiAiQyIgewogI2RlZmluZSBEUk1fTU9ERV9DT05U
RU5UX1BST1RFQ1RJT05fREVTSVJFRCAgICAgMQogI2RlZmluZSBEUk1fTU9ERV9DT05URU5UX1BS
T1RFQ1RJT05fRU5BQkxFRCAgICAgMgogCisvKiBDb250ZW50IFR5cGUgY2xhc3NpZmljYXRpb24g
Zm9yIEhEQ1AyLjIgdnMgb3RoZXJzICovCisjZGVmaW5lIERSTV9NT0RFX0hEQ1BfQ09OVEVOVF9U
WVBFMAkJMAorI2RlZmluZSBEUk1fTU9ERV9IRENQX0NPTlRFTlRfVFlQRTEJCTEKKwogc3RydWN0
IGRybV9tb2RlX21vZGVpbmZvIHsKIAlfX3UzMiBjbG9jazsKIAlfX3UxNiBoZGlzcGxheTsKLS0g
CjIuMTkuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
ZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
