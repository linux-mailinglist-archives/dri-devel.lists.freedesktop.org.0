Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B322E425AE
	for <lists+dri-devel@lfdr.de>; Wed, 12 Jun 2019 14:27:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0BC198925E;
	Wed, 12 Jun 2019 12:27:15 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from pio-pvt-msa1.bahnhof.se (pio-pvt-msa1.bahnhof.se [79.136.2.40])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B777E8925E
 for <dri-devel@lists.freedesktop.org>; Wed, 12 Jun 2019 12:27:13 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by pio-pvt-msa1.bahnhof.se (Postfix) with ESMTP id 949F83F773;
 Wed, 12 Jun 2019 14:27:01 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at bahnhof.se
X-Spam-Flag: NO
X-Spam-Score: -3.099
X-Spam-Level: 
X-Spam-Status: No, score=-3.099 tagged_above=-999 required=6.31
 tests=[ALL_TRUSTED=-1, BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1,
 URIBL_RED=0.001] autolearn=ham autolearn_force=no
Received: from pio-pvt-msa1.bahnhof.se ([127.0.0.1])
 by localhost (pio-pvt-msa1.bahnhof.se [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id VQ4Rb09IF_rR; Wed, 12 Jun 2019 14:26:47 +0200 (CEST)
Received: from mail1.shipmail.org (h-205-35.A357.priv.bahnhof.se
 [155.4.205.35]) (Authenticated sender: mb878879)
 by pio-pvt-msa1.bahnhof.se (Postfix) with ESMTPA id 0FA363F6C5;
 Wed, 12 Jun 2019 14:26:45 +0200 (CEST)
Received: from localhost.localdomain (h-205-35.A357.priv.bahnhof.se
 [155.4.205.35])
 by mail1.shipmail.org (Postfix) with ESMTPSA id 8059D3619A3;
 Wed, 12 Jun 2019 14:26:45 +0200 (CEST)
Subject: Re: [PATCH v5 2/9] mm: Add an apply_to_pfn_range interface
To: Christoph Hellwig <hch@infradead.org>
References: <20190612064243.55340-1-thellstrom@vmwopensource.org>
 <20190612064243.55340-3-thellstrom@vmwopensource.org>
 <20190612121604.GB719@infradead.org>
From: =?UTF-8?Q?Thomas_Hellstr=c3=b6m_=28VMware=29?=
 <thellstrom@vmwopensource.org>
Organization: VMware Inc.
Message-ID: <8f5a5b25-e21f-43f2-a4dd-a50debfd1287@vmwopensource.org>
Date: Wed, 12 Jun 2019 14:26:45 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <20190612121604.GB719@infradead.org>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=vmwopensource.org; s=mail; t=1560342405;
 bh=+5GVyhTYo8FM9oLssS/tZIxqS+/3NprZW4Ed/jkf8Xk=;
 h=Subject:To:Cc:References:From:Date:In-Reply-To:From;
 b=gYw3bH5a+sDW1srtGfX3oOPFaJmEUYHu9j4KFVytZjIqhibon/ppKhfZlZctk7Fvk
 PhtyC1kk+A7lKxnjH/LHqYqw4477BqdjT1VhKZxTyHp8At7IPmCVDZ2TCBVaLPYrAt
 K3B4Xpn4RuRjJN/syumfKiMEUG6emAiU6sRskopY=
X-Mailman-Original-Authentication-Results: pio-pvt-msa1.bahnhof.se;
 dkim=pass (1024-bit key;
 unprotected) header.d=vmwopensource.org header.i=@vmwopensource.org
 header.b=gYw3bH5a; 
 dkim-atps=neutral
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Ralph Campbell <rcampbell@nvidia.com>,
 Thomas Hellstrom <thellstrom@vmware.com>, Michal Hocko <mhocko@suse.com>,
 Rik van Riel <riel@surriel.com>, pv-drivers@vmware.com,
 Minchan Kim <minchan@kernel.org>, Will Deacon <will.deacon@arm.com>,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 linux-mm@kvack.org, Peter Zijlstra <peterz@infradead.org>,
 =?UTF-8?B?SsOpcsO0bWUgR2xpc3Nl?= <jglisse@redhat.com>,
 linux-graphics-maintainer@vmware.com, Matthew Wilcox <willy@infradead.org>,
 Huang Ying <ying.huang@intel.com>, Andrew Morton <akpm@linux-foundation.org>,
 nadav.amit@gmail.com, Souptick Joarder <jrdr.linux@gmail.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gNi8xMi8xOSAyOjE2IFBNLCBDaHJpc3RvcGggSGVsbHdpZyB3cm90ZToKPiBPbiBXZWQsIEp1
biAxMiwgMjAxOSBhdCAwODo0MjozNkFNICswMjAwLCBUaG9tYXMgSGVsbHN0csO2bSAoVk13YXJl
KSB3cm90ZToKPj4gRnJvbTogVGhvbWFzIEhlbGxzdHJvbSA8dGhlbGxzdHJvbUB2bXdhcmUuY29t
Pgo+Pgo+PiBUaGlzIGlzIGJhc2ljYWxseSBhcHBseV90b19wYWdlX3JhbmdlIHdpdGggYWRkZWQg
ZnVuY3Rpb25hbGl0eToKPj4gQWxsb2NhdGluZyBtaXNzaW5nIHBhcnRzIG9mIHRoZSBwYWdlIHRh
YmxlIGJlY29tZXMgb3B0aW9uYWwsIHdoaWNoCj4+IG1lYW5zIHRoYXQgdGhlIGZ1bmN0aW9uIGNh
biBiZSBndWFyYW50ZWVkIG5vdCB0byBlcnJvciBpZiBhbGxvY2F0aW9uCj4+IGlzIGRpc2FibGVk
LiBBbHNvIHBhc3Npbmcgb2YgdGhlIGNsb3N1cmUgc3RydWN0IGFuZCBjYWxsYmFjayBmdW5jdGlv
bgo+PiBiZWNvbWVzIGRpZmZlcmVudCBhbmQgbW9yZSBpbiBsaW5lIHdpdGggaG93IHRoaW5ncyBh
cmUgZG9uZSBlbHNld2hlcmUuCj4+Cj4+IEZpbmFsbHkgd2Uga2VlcCBhcHBseV90b19wYWdlX3Jh
bmdlIGFzIGEgd3JhcHBlciBhcm91bmQgYXBwbHlfdG9fcGZuX3JhbmdlCj4+Cj4+IFRoZSByZWFz
b24gZm9yIG5vdCB1c2luZyB0aGUgcGFnZS13YWxrIGNvZGUgaXMgdGhhdCB3ZSB3YW50IHRvIHBl
cmZvcm0KPj4gdGhlIHBhZ2Utd2FsayBvbiB2bWFzIHBvaW50aW5nIHRvIGFuIGFkZHJlc3Mgc3Bh
Y2Ugd2l0aG91dCByZXF1aXJpbmcgdGhlCj4+IG1tYXBfc2VtIHRvIGJlIGhlbGQgcmF0aGVyIHRo
YW4gb24gdm1hcyBiZWxvbmdpbmcgdG8gYSBwcm9jZXNzIHdpdGggdGhlCj4+IG1tYXBfc2VtIGhl
bGQuCj4+Cj4+IE5vdGFibGUgY2hhbmdlcyBzaW5jZSBSRkM6Cj4+IERvbid0IGV4cG9ydCBhcHBs
eV90b19wZm4gcmFuZ2UuCj4+Cj4+IENjOiBBbmRyZXcgTW9ydG9uIDxha3BtQGxpbnV4LWZvdW5k
YXRpb24ub3JnPgo+PiBDYzogTWF0dGhldyBXaWxjb3ggPHdpbGx5QGluZnJhZGVhZC5vcmc+Cj4+
IENjOiBXaWxsIERlYWNvbiA8d2lsbC5kZWFjb25AYXJtLmNvbT4KPj4gQ2M6IFBldGVyIFppamxz
dHJhIDxwZXRlcnpAaW5mcmFkZWFkLm9yZz4KPj4gQ2M6IFJpayB2YW4gUmllbCA8cmllbEBzdXJy
aWVsLmNvbT4KPj4gQ2M6IE1pbmNoYW4gS2ltIDxtaW5jaGFuQGtlcm5lbC5vcmc+Cj4+IENjOiBN
aWNoYWwgSG9ja28gPG1ob2Nrb0BzdXNlLmNvbT4KPj4gQ2M6IEh1YW5nIFlpbmcgPHlpbmcuaHVh
bmdAaW50ZWwuY29tPgo+PiBDYzogU291cHRpY2sgSm9hcmRlciA8anJkci5saW51eEBnbWFpbC5j
b20+Cj4+IENjOiAiSsOpcsO0bWUgR2xpc3NlIiA8amdsaXNzZUByZWRoYXQuY29tPgo+PiBDYzog
bGludXgtbW1Aa3ZhY2sub3JnCj4+IENjOiBsaW51eC1rZXJuZWxAdmdlci5rZXJuZWwub3JnCj4+
Cj4+IFNpZ25lZC1vZmYtYnk6IFRob21hcyBIZWxsc3Ryb20gPHRoZWxsc3Ryb21Adm13YXJlLmNv
bT4KPj4gUmV2aWV3ZWQtYnk6IFJhbHBoIENhbXBiZWxsIDxyY2FtcGJlbGxAbnZpZGlhLmNvbT4g
I3YxCj4+IC0tLQo+PiAgIGluY2x1ZGUvbGludXgvbW0uaCB8ICAxMCArKysrCj4+ICAgbW0vbWVt
b3J5LmMgICAgICAgIHwgMTM1ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0t
LS0tLS0tLQo+PiAgIDIgZmlsZXMgY2hhbmdlZCwgMTEzIGluc2VydGlvbnMoKyksIDMyIGRlbGV0
aW9ucygtKQo+Pgo+PiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9tbS5oIGIvaW5jbHVkZS9s
aW51eC9tbS5oCj4+IGluZGV4IDBlODgzNGFjMzJiNy4uM2QwNmNlMmE2NGFmIDEwMDY0NAo+PiAt
LS0gYS9pbmNsdWRlL2xpbnV4L21tLmgKPj4gKysrIGIvaW5jbHVkZS9saW51eC9tbS5oCj4+IEBA
IC0yNjc1LDYgKzI2NzUsMTYgQEAgdHlwZWRlZiBpbnQgKCpwdGVfZm5fdCkocHRlX3QgKnB0ZSwg
cGd0YWJsZV90IHRva2VuLCB1bnNpZ25lZCBsb25nIGFkZHIsCj4+ICAgZXh0ZXJuIGludCBhcHBs
eV90b19wYWdlX3JhbmdlKHN0cnVjdCBtbV9zdHJ1Y3QgKm1tLCB1bnNpZ25lZCBsb25nIGFkZHJl
c3MsCj4+ICAgCQkJICAgICAgIHVuc2lnbmVkIGxvbmcgc2l6ZSwgcHRlX2ZuX3QgZm4sIHZvaWQg
KmRhdGEpOwo+PiAgIAo+PiArc3RydWN0IHBmbl9yYW5nZV9hcHBseTsKPj4gK3R5cGVkZWYgaW50
ICgqcHRlcl9mbl90KShwdGVfdCAqcHRlLCBwZ3RhYmxlX3QgdG9rZW4sIHVuc2lnbmVkIGxvbmcg
YWRkciwKPj4gKwkJCSBzdHJ1Y3QgcGZuX3JhbmdlX2FwcGx5ICpjbG9zdXJlKTsKPj4gK3N0cnVj
dCBwZm5fcmFuZ2VfYXBwbHkgewo+PiArCXN0cnVjdCBtbV9zdHJ1Y3QgKm1tOwo+PiArCXB0ZXJf
Zm5fdCBwdGVmbjsKPj4gKwl1bnNpZ25lZCBpbnQgYWxsb2M7Cj4+ICt9Owo+PiArZXh0ZXJuIGlu
dCBhcHBseV90b19wZm5fcmFuZ2Uoc3RydWN0IHBmbl9yYW5nZV9hcHBseSAqY2xvc3VyZSwKPj4g
KwkJCSAgICAgIHVuc2lnbmVkIGxvbmcgYWRkcmVzcywgdW5zaWduZWQgbG9uZyBzaXplKTsKPj4g
ICAKPj4gICAjaWZkZWYgQ09ORklHX1BBR0VfUE9JU09OSU5HCj4+ICAgZXh0ZXJuIGJvb2wgcGFn
ZV9wb2lzb25pbmdfZW5hYmxlZCh2b2lkKTsKPj4gZGlmZiAtLWdpdCBhL21tL21lbW9yeS5jIGIv
bW0vbWVtb3J5LmMKPj4gaW5kZXggMTY4ZjU0NmFmMWFkLi40NjJhYTQ3Zjg4NzggMTAwNjQ0Cj4+
IC0tLSBhL21tL21lbW9yeS5jCj4+ICsrKyBiL21tL21lbW9yeS5jCj4+IEBAIC0yMDMyLDE4ICsy
MDMyLDE3IEBAIGludCB2bV9pb21hcF9tZW1vcnkoc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEs
IHBoeXNfYWRkcl90IHN0YXJ0LCB1bnNpZ25lZCBsb25nCj4+ICAgfQo+PiAgIEVYUE9SVF9TWU1C
T0wodm1faW9tYXBfbWVtb3J5KTsKPj4gICAKPj4gLXN0YXRpYyBpbnQgYXBwbHlfdG9fcHRlX3Jh
bmdlKHN0cnVjdCBtbV9zdHJ1Y3QgKm1tLCBwbWRfdCAqcG1kLAo+PiAtCQkJCSAgICAgdW5zaWdu
ZWQgbG9uZyBhZGRyLCB1bnNpZ25lZCBsb25nIGVuZCwKPj4gLQkJCQkgICAgIHB0ZV9mbl90IGZu
LCB2b2lkICpkYXRhKQo+PiArc3RhdGljIGludCBhcHBseV90b19wdGVfcmFuZ2Uoc3RydWN0IHBm
bl9yYW5nZV9hcHBseSAqY2xvc3VyZSwgcG1kX3QgKnBtZCwKPj4gKwkJCSAgICAgIHVuc2lnbmVk
IGxvbmcgYWRkciwgdW5zaWduZWQgbG9uZyBlbmQpCj4+ICAgewo+PiAgIAlwdGVfdCAqcHRlOwo+
PiAgIAlpbnQgZXJyOwo+PiAgIAlwZ3RhYmxlX3QgdG9rZW47Cj4+ICAgCXNwaW5sb2NrX3QgKnVu
aW5pdGlhbGl6ZWRfdmFyKHB0bCk7Cj4+ICAgCj4+IC0JcHRlID0gKG1tID09ICZpbml0X21tKSA/
Cj4+ICsJcHRlID0gKGNsb3N1cmUtPm1tID09ICZpbml0X21tKSA/Cj4+ICAgCQlwdGVfYWxsb2Nf
a2VybmVsKHBtZCwgYWRkcikgOgo+PiAtCQlwdGVfYWxsb2NfbWFwX2xvY2sobW0sIHBtZCwgYWRk
ciwgJnB0bCk7Cj4+ICsJCXB0ZV9hbGxvY19tYXBfbG9jayhjbG9zdXJlLT5tbSwgcG1kLCBhZGRy
LCAmcHRsKTsKPj4gICAJaWYgKCFwdGUpCj4+ICAgCQlyZXR1cm4gLUVOT01FTTsKPj4gICAKPj4g
QEAgLTIwNTQsODYgKzIwNTMsMTA5IEBAIHN0YXRpYyBpbnQgYXBwbHlfdG9fcHRlX3JhbmdlKHN0
cnVjdCBtbV9zdHJ1Y3QgKm1tLCBwbWRfdCAqcG1kLAo+PiAgIAl0b2tlbiA9IHBtZF9wZ3RhYmxl
KCpwbWQpOwo+PiAgIAo+PiAgIAlkbyB7Cj4+IC0JCWVyciA9IGZuKHB0ZSsrLCB0b2tlbiwgYWRk
ciwgZGF0YSk7Cj4+ICsJCWVyciA9IGNsb3N1cmUtPnB0ZWZuKHB0ZSsrLCB0b2tlbiwgYWRkciwg
Y2xvc3VyZSk7Cj4+ICAgCQlpZiAoZXJyKQo+PiAgIAkJCWJyZWFrOwo+PiAgIAl9IHdoaWxlIChh
ZGRyICs9IFBBR0VfU0laRSwgYWRkciAhPSBlbmQpOwo+PiAgIAo+PiAgIAlhcmNoX2xlYXZlX2xh
enlfbW11X21vZGUoKTsKPj4gICAKPj4gLQlpZiAobW0gIT0gJmluaXRfbW0pCj4+ICsJaWYgKGNs
b3N1cmUtPm1tICE9ICZpbml0X21tKQo+PiAgIAkJcHRlX3VubWFwX3VubG9jayhwdGUtMSwgcHRs
KTsKPj4gICAJcmV0dXJuIGVycjsKPj4gICB9Cj4+ICAgCj4+IC1zdGF0aWMgaW50IGFwcGx5X3Rv
X3BtZF9yYW5nZShzdHJ1Y3QgbW1fc3RydWN0ICptbSwgcHVkX3QgKnB1ZCwKPj4gLQkJCQkgICAg
IHVuc2lnbmVkIGxvbmcgYWRkciwgdW5zaWduZWQgbG9uZyBlbmQsCj4+IC0JCQkJICAgICBwdGVf
Zm5fdCBmbiwgdm9pZCAqZGF0YSkKPj4gK3N0YXRpYyBpbnQgYXBwbHlfdG9fcG1kX3JhbmdlKHN0
cnVjdCBwZm5fcmFuZ2VfYXBwbHkgKmNsb3N1cmUsIHB1ZF90ICpwdWQsCj4+ICsJCQkgICAgICB1
bnNpZ25lZCBsb25nIGFkZHIsIHVuc2lnbmVkIGxvbmcgZW5kKQo+PiAgIHsKPj4gICAJcG1kX3Qg
KnBtZDsKPj4gICAJdW5zaWduZWQgbG9uZyBuZXh0Owo+PiAtCWludCBlcnI7Cj4+ICsJaW50IGVy
ciA9IDA7Cj4+ICAgCj4+ICAgCUJVR19PTihwdWRfaHVnZSgqcHVkKSk7Cj4+ICAgCj4+IC0JcG1k
ID0gcG1kX2FsbG9jKG1tLCBwdWQsIGFkZHIpOwo+PiArCXBtZCA9IHBtZF9hbGxvYyhjbG9zdXJl
LT5tbSwgcHVkLCBhZGRyKTsKPj4gICAJaWYgKCFwbWQpCj4+ICAgCQlyZXR1cm4gLUVOT01FTTsK
Pj4gKwo+PiAgIAlkbyB7Cj4+ICAgCQluZXh0ID0gcG1kX2FkZHJfZW5kKGFkZHIsIGVuZCk7Cj4+
IC0JCWVyciA9IGFwcGx5X3RvX3B0ZV9yYW5nZShtbSwgcG1kLCBhZGRyLCBuZXh0LCBmbiwgZGF0
YSk7Cj4+ICsJCWlmICghY2xvc3VyZS0+YWxsb2MgJiYgcG1kX25vbmVfb3JfY2xlYXJfYmFkKHBt
ZCkpCj4+ICsJCQljb250aW51ZTsKPj4gKwkJZXJyID0gYXBwbHlfdG9fcHRlX3JhbmdlKGNsb3N1
cmUsIHBtZCwgYWRkciwgbmV4dCk7Cj4+ICAgCQlpZiAoZXJyKQo+PiAgIAkJCWJyZWFrOwo+PiAg
IAl9IHdoaWxlIChwbWQrKywgYWRkciA9IG5leHQsIGFkZHIgIT0gZW5kKTsKPj4gICAJcmV0dXJu
IGVycjsKPj4gICB9Cj4+ICAgCj4+IC1zdGF0aWMgaW50IGFwcGx5X3RvX3B1ZF9yYW5nZShzdHJ1
Y3QgbW1fc3RydWN0ICptbSwgcDRkX3QgKnA0ZCwKPj4gLQkJCQkgICAgIHVuc2lnbmVkIGxvbmcg
YWRkciwgdW5zaWduZWQgbG9uZyBlbmQsCj4+IC0JCQkJICAgICBwdGVfZm5fdCBmbiwgdm9pZCAq
ZGF0YSkKPj4gK3N0YXRpYyBpbnQgYXBwbHlfdG9fcHVkX3JhbmdlKHN0cnVjdCBwZm5fcmFuZ2Vf
YXBwbHkgKmNsb3N1cmUsIHA0ZF90ICpwNGQsCj4+ICsJCQkgICAgICB1bnNpZ25lZCBsb25nIGFk
ZHIsIHVuc2lnbmVkIGxvbmcgZW5kKQo+PiAgIHsKPj4gICAJcHVkX3QgKnB1ZDsKPj4gICAJdW5z
aWduZWQgbG9uZyBuZXh0Owo+PiAtCWludCBlcnI7Cj4+ICsJaW50IGVyciA9IDA7Cj4+ICAgCj4+
IC0JcHVkID0gcHVkX2FsbG9jKG1tLCBwNGQsIGFkZHIpOwo+PiArCXB1ZCA9IHB1ZF9hbGxvYyhj
bG9zdXJlLT5tbSwgcDRkLCBhZGRyKTsKPj4gICAJaWYgKCFwdWQpCj4+ICAgCQlyZXR1cm4gLUVO
T01FTTsKPj4gKwo+PiAgIAlkbyB7Cj4+ICAgCQluZXh0ID0gcHVkX2FkZHJfZW5kKGFkZHIsIGVu
ZCk7Cj4+IC0JCWVyciA9IGFwcGx5X3RvX3BtZF9yYW5nZShtbSwgcHVkLCBhZGRyLCBuZXh0LCBm
biwgZGF0YSk7Cj4+ICsJCWlmICghY2xvc3VyZS0+YWxsb2MgJiYgcHVkX25vbmVfb3JfY2xlYXJf
YmFkKHB1ZCkpCj4+ICsJCQljb250aW51ZTsKPj4gKwkJZXJyID0gYXBwbHlfdG9fcG1kX3Jhbmdl
KGNsb3N1cmUsIHB1ZCwgYWRkciwgbmV4dCk7Cj4+ICAgCQlpZiAoZXJyKQo+PiAgIAkJCWJyZWFr
Owo+PiAgIAl9IHdoaWxlIChwdWQrKywgYWRkciA9IG5leHQsIGFkZHIgIT0gZW5kKTsKPj4gICAJ
cmV0dXJuIGVycjsKPj4gICB9Cj4+ICAgCj4+IC1zdGF0aWMgaW50IGFwcGx5X3RvX3A0ZF9yYW5n
ZShzdHJ1Y3QgbW1fc3RydWN0ICptbSwgcGdkX3QgKnBnZCwKPj4gLQkJCQkgICAgIHVuc2lnbmVk
IGxvbmcgYWRkciwgdW5zaWduZWQgbG9uZyBlbmQsCj4+IC0JCQkJICAgICBwdGVfZm5fdCBmbiwg
dm9pZCAqZGF0YSkKPj4gK3N0YXRpYyBpbnQgYXBwbHlfdG9fcDRkX3JhbmdlKHN0cnVjdCBwZm5f
cmFuZ2VfYXBwbHkgKmNsb3N1cmUsIHBnZF90ICpwZ2QsCj4+ICsJCQkgICAgICB1bnNpZ25lZCBs
b25nIGFkZHIsIHVuc2lnbmVkIGxvbmcgZW5kKQo+PiAgIHsKPj4gICAJcDRkX3QgKnA0ZDsKPj4g
ICAJdW5zaWduZWQgbG9uZyBuZXh0Owo+PiAtCWludCBlcnI7Cj4+ICsJaW50IGVyciA9IDA7Cj4+
ICAgCj4+IC0JcDRkID0gcDRkX2FsbG9jKG1tLCBwZ2QsIGFkZHIpOwo+PiArCXA0ZCA9IHA0ZF9h
bGxvYyhjbG9zdXJlLT5tbSwgcGdkLCBhZGRyKTsKPj4gICAJaWYgKCFwNGQpCj4+ICAgCQlyZXR1
cm4gLUVOT01FTTsKPj4gKwo+PiAgIAlkbyB7Cj4+ICAgCQluZXh0ID0gcDRkX2FkZHJfZW5kKGFk
ZHIsIGVuZCk7Cj4+IC0JCWVyciA9IGFwcGx5X3RvX3B1ZF9yYW5nZShtbSwgcDRkLCBhZGRyLCBu
ZXh0LCBmbiwgZGF0YSk7Cj4+ICsJCWlmICghY2xvc3VyZS0+YWxsb2MgJiYgcDRkX25vbmVfb3Jf
Y2xlYXJfYmFkKHA0ZCkpCj4+ICsJCQljb250aW51ZTsKPj4gKwkJZXJyID0gYXBwbHlfdG9fcHVk
X3JhbmdlKGNsb3N1cmUsIHA0ZCwgYWRkciwgbmV4dCk7Cj4+ICAgCQlpZiAoZXJyKQo+PiAgIAkJ
CWJyZWFrOwo+PiAgIAl9IHdoaWxlIChwNGQrKywgYWRkciA9IG5leHQsIGFkZHIgIT0gZW5kKTsK
Pj4gICAJcmV0dXJuIGVycjsKPj4gICB9Cj4+ICAgCj4+IC0vKgo+PiAtICogU2NhbiBhIHJlZ2lv
biBvZiB2aXJ0dWFsIG1lbW9yeSwgZmlsbGluZyBpbiBwYWdlIHRhYmxlcyBhcyBuZWNlc3NhcnkK
Pj4gLSAqIGFuZCBjYWxsaW5nIGEgcHJvdmlkZWQgZnVuY3Rpb24gb24gZWFjaCBsZWFmIHBhZ2Ug
dGFibGUuCj4+ICsvKioKPj4gKyAqIGFwcGx5X3RvX3Bmbl9yYW5nZSAtIFNjYW4gYSByZWdpb24g
b2YgdmlydHVhbCBtZW1vcnksIGNhbGxpbmcgYSBwcm92aWRlZAo+PiArICogZnVuY3Rpb24gb24g
ZWFjaCBsZWFmIHBhZ2UgdGFibGUgZW50cnkKPj4gKyAqIEBjbG9zdXJlOiBEZXRhaWxzIGFib3V0
IGhvdyB0byBzY2FuIGFuZCB3aGF0IGZ1bmN0aW9uIHRvIGFwcGx5Cj4+ICsgKiBAYWRkcjogU3Rh
cnQgdmlydHVhbCBhZGRyZXNzCj4+ICsgKiBAc2l6ZTogU2l6ZSBvZiB0aGUgcmVnaW9uCj4+ICsg
Kgo+PiArICogSWYgQGNsb3N1cmUtPmFsbG9jIGlzIHNldCB0byAxLCB0aGUgZnVuY3Rpb24gd2ls
bCBmaWxsIGluIHRoZSBwYWdlIHRhYmxlCj4+ICsgKiBhcyBuZWNlc3NhcnkuIE90aGVyd2lzZSBp
dCB3aWxsIHNraXAgbm9uLXByZXNlbnQgcGFydHMuCj4+ICsgKiBOb3RlOiBUaGUgY2FsbGVyIG11
c3QgZW5zdXJlIHRoYXQgdGhlIHJhbmdlIGRvZXMgbm90IGNvbnRhaW4gaHVnZSBwYWdlcy4KPj4g
KyAqIFRoZSBjYWxsZXIgbXVzdCBhbHNvIGFzc3VyZSB0aGF0IHRoZSBwcm9wZXIgbW11X25vdGlm
aWVyIGZ1bmN0aW9ucyBhcmUKPj4gKyAqIGNhbGxlZCBiZWZvcmUgYW5kIGFmdGVyIHRoZSBjYWxs
IHRvIGFwcGx5X3RvX3Bmbl9yYW5nZS4KPj4gKyAqCj4+ICsgKiBXQVJOSU5HOiBEbyBub3QgdXNl
IHRoaXMgZnVuY3Rpb24gdW5sZXNzIHlvdSBrbm93IGV4YWN0bHkgd2hhdCB5b3UgYXJlCj4+ICsg
KiBkb2luZy4gSXQgaXMgbGFja2luZyBzdXBwb3J0IGZvciBodWdlIHBhZ2VzIGFuZCB0cmFuc3Bh
cmVudCBodWdlIHBhZ2VzLgo+PiArICoKPj4gKyAqIFJldHVybjogWmVybyBvbiBzdWNjZXNzLiBJ
ZiB0aGUgcHJvdmlkZWQgZnVuY3Rpb24gcmV0dXJucyBhIG5vbi16ZXJvIHN0YXR1cywKPj4gKyAq
IHRoZSBwYWdlIHRhYmxlIHdhbGsgd2lsbCB0ZXJtaW5hdGUgYW5kIHRoYXQgc3RhdHVzIHdpbGwg
YmUgcmV0dXJuZWQuCj4+ICsgKiBJZiBAY2xvc3VyZS0+YWxsb2MgaXMgc2V0IHRvIDEsIHRoZW4g
dGhpcyBmdW5jdGlvbiBtYXkgYWxzbyByZXR1cm4gbWVtb3J5Cj4+ICsgKiBhbGxvY2F0aW9uIGVy
cm9ycyBhcmlzaW5nIGZyb20gYWxsb2NhdGluZyBwYWdlIHRhYmxlIG1lbW9yeS4KPj4gICAgKi8K
Pj4gLWludCBhcHBseV90b19wYWdlX3JhbmdlKHN0cnVjdCBtbV9zdHJ1Y3QgKm1tLCB1bnNpZ25l
ZCBsb25nIGFkZHIsCj4+IC0JCQl1bnNpZ25lZCBsb25nIHNpemUsIHB0ZV9mbl90IGZuLCB2b2lk
ICpkYXRhKQo+PiAraW50IGFwcGx5X3RvX3Bmbl9yYW5nZShzdHJ1Y3QgcGZuX3JhbmdlX2FwcGx5
ICpjbG9zdXJlLAo+PiArCQkgICAgICAgdW5zaWduZWQgbG9uZyBhZGRyLCB1bnNpZ25lZCBsb25n
IHNpemUpCj4+ICAgewo+PiAgIAlwZ2RfdCAqcGdkOwo+PiAgIAl1bnNpZ25lZCBsb25nIG5leHQ7
Cj4+IEBAIC0yMTQzLDE2ICsyMTY1LDY1IEBAIGludCBhcHBseV90b19wYWdlX3JhbmdlKHN0cnVj
dCBtbV9zdHJ1Y3QgKm1tLCB1bnNpZ25lZCBsb25nIGFkZHIsCj4+ICAgCWlmIChXQVJOX09OKGFk
ZHIgPj0gZW5kKSkKPj4gICAJCXJldHVybiAtRUlOVkFMOwo+PiAgIAo+PiAtCXBnZCA9IHBnZF9v
ZmZzZXQobW0sIGFkZHIpOwo+PiArCXBnZCA9IHBnZF9vZmZzZXQoY2xvc3VyZS0+bW0sIGFkZHIp
Owo+PiAgIAlkbyB7Cj4+ICAgCQluZXh0ID0gcGdkX2FkZHJfZW5kKGFkZHIsIGVuZCk7Cj4+IC0J
CWVyciA9IGFwcGx5X3RvX3A0ZF9yYW5nZShtbSwgcGdkLCBhZGRyLCBuZXh0LCBmbiwgZGF0YSk7
Cj4+ICsJCWlmICghY2xvc3VyZS0+YWxsb2MgJiYgcGdkX25vbmVfb3JfY2xlYXJfYmFkKHBnZCkp
Cj4+ICsJCQljb250aW51ZTsKPj4gKwkJZXJyID0gYXBwbHlfdG9fcDRkX3JhbmdlKGNsb3N1cmUs
IHBnZCwgYWRkciwgbmV4dCk7Cj4+ICAgCQlpZiAoZXJyKQo+PiAgIAkJCWJyZWFrOwo+PiAgIAl9
IHdoaWxlIChwZ2QrKywgYWRkciA9IG5leHQsIGFkZHIgIT0gZW5kKTsKPj4gICAKPj4gICAJcmV0
dXJuIGVycjsKPj4gICB9Cj4+ICsKPj4gKy8qKgo+PiArICogc3RydWN0IHBhZ2VfcmFuZ2VfYXBw
bHkgLSBDbG9zdXJlIHN0cnVjdHVyZSBmb3IgYXBwbHlfdG9fcGFnZV9yYW5nZSgpCj4+ICsgKiBA
cHRlcjogVGhlIGJhc2UgY2xvc3VyZSBzdHJ1Y3R1cmUgd2UgZGVyaXZlIGZyb20KPj4gKyAqIEBm
bjogVGhlIGxlYWYgcHRlIGZ1bmN0aW9uIHRvIGNhbGwKPj4gKyAqIEBkYXRhOiBUaGUgbGVhZiBw
dGUgZnVuY3Rpb24gY2xvc3VyZQo+PiArICovCj4+ICtzdHJ1Y3QgcGFnZV9yYW5nZV9hcHBseSB7
Cj4+ICsJc3RydWN0IHBmbl9yYW5nZV9hcHBseSBwdGVyOwo+PiArCXB0ZV9mbl90IGZuOwo+PiAr
CXZvaWQgKmRhdGE7Cj4+ICt9Owo+PiArCj4+ICsvKgo+PiArICogQ2FsbGJhY2sgd3JhcHBlciB0
byBlbmFibGUgdXNlIG9mIGFwcGx5X3RvX3Bmbl9yYW5nZSBmb3IKPj4gKyAqIHRoZSBhcHBseV90
b19wYWdlX3JhbmdlIGludGVyZmFjZQo+PiArICovCj4+ICtzdGF0aWMgaW50IGFwcGx5X3RvX3Bh
Z2VfcmFuZ2Vfd3JhcHBlcihwdGVfdCAqcHRlLCBwZ3RhYmxlX3QgdG9rZW4sCj4+ICsJCQkJICAg
ICAgIHVuc2lnbmVkIGxvbmcgYWRkciwKPj4gKwkJCQkgICAgICAgc3RydWN0IHBmbl9yYW5nZV9h
cHBseSAqcHRlcikKPj4gK3sKPj4gKwlzdHJ1Y3QgcGFnZV9yYW5nZV9hcHBseSAqcHJhID0KPj4g
KwkJY29udGFpbmVyX29mKHB0ZXIsIHR5cGVvZigqcHJhKSwgcHRlcik7Cj4+ICsKPj4gKwlyZXR1
cm4gcHJhLT5mbihwdGUsIHRva2VuLCBhZGRyLCBwcmEtPmRhdGEpOwo+PiArfQo+PiArCj4+ICsv
Kgo+PiArICogU2NhbiBhIHJlZ2lvbiBvZiB2aXJ0dWFsIG1lbW9yeSwgZmlsbGluZyBpbiBwYWdl
IHRhYmxlcyBhcyBuZWNlc3NhcnkKPj4gKyAqIGFuZCBjYWxsaW5nIGEgcHJvdmlkZWQgZnVuY3Rp
b24gb24gZWFjaCBsZWFmIHBhZ2UgdGFibGUuCj4+ICsgKgo+PiArICogV0FSTklORzogRG8gbm90
IHVzZSB0aGlzIGZ1bmN0aW9uIHVubGVzcyB5b3Uga25vdyBleGFjdGx5IHdoYXQgeW91IGFyZQo+
PiArICogZG9pbmcuIEl0IGlzIGxhY2tpbmcgc3VwcG9ydCBmb3IgaHVnZSBwYWdlcyBhbmQgdHJh
bnNwYXJlbnQgaHVnZSBwYWdlcy4KPj4gKyAqLwo+PiAraW50IGFwcGx5X3RvX3BhZ2VfcmFuZ2Uo
c3RydWN0IG1tX3N0cnVjdCAqbW0sIHVuc2lnbmVkIGxvbmcgYWRkciwKPj4gKwkJCXVuc2lnbmVk
IGxvbmcgc2l6ZSwgcHRlX2ZuX3QgZm4sIHZvaWQgKmRhdGEpCj4+ICt7Cj4+ICsJc3RydWN0IHBh
Z2VfcmFuZ2VfYXBwbHkgcHJhID0gewo+PiArCQkucHRlciA9IHsubW0gPSBtbSwKPj4gKwkJCSAu
YWxsb2MgPSAxLAo+PiArCQkJIC5wdGVmbiA9IGFwcGx5X3RvX3BhZ2VfcmFuZ2Vfd3JhcHBlciB9
LAo+PiArCQkuZm4gPSBmbiwKPj4gKwkJLmRhdGEgPSBkYXRhCj4+ICsJfTsKPj4gKwo+PiArCXJl
dHVybiBhcHBseV90b19wZm5fcmFuZ2UoJnByYS5wdGVyLCBhZGRyLCBzaXplKTsKPj4gK30KPj4g
ICAKPj4gICBFWFBPUlRfU1lNQk9MX0dQTChhcHBseV90b19wYWdlX3JhbmdlKTsKPiBBY3R1YWxs
eSAtIGRpZCB5b3UgbG9vayBpbnRvIGNvbnZlcnRpbmcgb3VyIHR3byBoYW5kIGZ1bGwgb2YKPiBh
cHBseV90b19wYWdlX3JhbmdlIGNhbGxlcnMgdG8geW91ciBuZXcgc2NoZW1lPyAgSXQgc2VlbXMg
bGlrZSB0aGF0Cj4gbWlnaHQgYWN0dWFsbHkgbm90IGJlIHRvIGJhZCBhbmQgYXZvaWQgdmFyaW91
cyBsYXllcnMgb2Ygd3JhcHBlcnMuCgpZZXMsIEkgaGFkIHRoYXQgaW4gbWluZCBvbmNlIHRoaXMg
bGFuZGVkIGFuZCBnb3Qgc29tZSBzZXJpb3VzIHRlc3RpbmcuCgovVGhvbWFzCgoKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
