Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B75A7116B12
	for <lists+dri-devel@lfdr.de>; Mon,  9 Dec 2019 11:32:44 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BF5E189DE6;
	Mon,  9 Dec 2019 10:32:41 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lf1-x144.google.com (mail-lf1-x144.google.com
 [IPv6:2a00:1450:4864:20::144])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AE6A689DE1
 for <dri-devel@lists.freedesktop.org>; Mon,  9 Dec 2019 10:32:39 +0000 (UTC)
Received: by mail-lf1-x144.google.com with SMTP id b15so10274402lfc.4
 for <dri-devel@lists.freedesktop.org>; Mon, 09 Dec 2019 02:32:39 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=G7UwTWAWkp2oqrD4j/k1LpRCneB2ziZ2/97MpbiTXlA=;
 b=CtL7lb9GO02XtpVxXPN3SAMVqeerFpJWf8H2Qk1S2wrs0oASHAcqCeHo2ZUM5zDJlb
 P0ztAofBNDbKfomKc0teGiGk1jEqaUpRRfSvZTCTZBdJymM30W2Uw/HdiHh7FtnG7SEp
 Gu6kkoHY6Xk9rgjVXPy9/ErP1EVL5oSynknGXZ1GStZJiyp/DE8SGKh2yegFDgYThtPO
 BBl92tMQqDNV7MrBb89N7l7qJB8SCem0Kb1zTVz/de7cYTKWVB4cEpQeCyJWW5QQF7XS
 xCTaSB0ausOPl3cbyqxdCjNQMVbGBJtwG69XAuAyK4itUQacHTSGpqLD6u1dGfq7p4xr
 l2WA==
X-Gm-Message-State: APjAAAW6bzH2df8cUMfviFSujLk2HRDntMK1fgOf7zlW+cUGucZChL6N
 KgGx33BOwSPiEHzca9K1LTps/iJYfgVf/qVUHgY=
X-Google-Smtp-Source: APXvYqz7qxUDMmqGnDMBklsrYshcU1ypEFlO0Z7OZGVzgSh8afaeGYOtXuFfEEMV+GlIilkiQu27vo5w3eqkLumG3E4=
X-Received: by 2002:ac2:5a09:: with SMTP id q9mr5464042lfn.71.1575887557890;
 Mon, 09 Dec 2019 02:32:37 -0800 (PST)
MIME-Version: 1.0
References: <20191206094301.76368-1-linus.walleij@linaro.org>
In-Reply-To: <20191206094301.76368-1-linus.walleij@linaro.org>
From: Patrik Jakobsson <patrik.r.jakobsson@gmail.com>
Date: Mon, 9 Dec 2019 11:32:27 +0100
Message-ID: <CAMeQTsZSNpREsP5e+_UFc6nfQ7CqAHOYP+ivsEzX_iMKa0YzVw@mail.gmail.com>
Subject: Re: [PATCH] drm/gma500: Pass GPIO for Intel MID using descriptors
To: Linus Walleij <linus.walleij@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=G7UwTWAWkp2oqrD4j/k1LpRCneB2ziZ2/97MpbiTXlA=;
 b=k31vb2KYMFCqD2VAdfcvlnWbJl9ZUE1EKh50PYV8VPnIzdsz2JIYLkLKxZvSRF1SGb
 sClsMgufEiJW1c78xwNyKM3A+DzKardVG4Z8BENTwibsyNgasIEIVnElNtOykb/MboVn
 9auzFBnvwgPOygLpOh95c0YfMzt/Qs4uOPmNbqXa09b0mUnxFrL2+gV4PdQKCYQY0h74
 Gvx17Xjxc0+/f4tNVBa8HriA3a658E8qoMVK1iXahYsUzfyV7FDEn7Zy+JcA0WLO7XUY
 HgP0maApyCAKJhD/fqjMPYxd1DlO2nrm4vZ9XmIWSMJ0tKYZhWisKpHFRyBzUeJ6HWfZ
 eLTw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Stone <daniels@collabora.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Andy Shevchenko <andriy.shevchenko@linux.intel.com>,
 Sean Paul <sean@poorly.run>, linux-arm-kernel@lists.infradead.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBEZWMgNiwgMjAxOSBhdCAxMDo0MyBBTSBMaW51cyBXYWxsZWlqIDxsaW51cy53YWxs
ZWlqQGxpbmFyby5vcmc+IHdyb3RlOgo+Cj4gVGhlIEdNQTUwMCBkcml2ZXIgaXMgdXNpbmcgdGhl
IGxlZ2FjeSBHUElPIEFQSSB0byBmZXRjaAo+IHRocmVlIG9wdGlvbmFsIGRpc3BsYXkgY29udHJv
bCBHUElPIGxpbmVzIGZyb20gdGhlIFNGSQo+IGRlc2NyaXB0aW9uIHVzZWQgYnkgdGhlIE1lZGZp
ZWxkIHBsYXRmb3JtLgo+Cj4gU3dpdGNoIHRoaXMgb3ZlciB0byB1c2UgR1BJTyBkZXNjcmlwdG9y
cyBhbmQgZGVsZXRlIHRoZQo+IGN1c3RvbSBwbGF0Zm9ybSBkYXRhLgo+Cj4gV2UgY3JlYXRlIHRo
cmVlIG5ldyBzdGF0aWMgbG9jYWxzIGluIHRoZSB0YzM1ODc2eCBicmlkZ2UKPiBjb2RlIGJ1dCBp
dCBpcyBoYXJkbHkgYW55IHdvcnNlIHRoYW4gdGhlIEkyQyBjbGllbnQgc3RhdGljCj4gbG9jYWwg
YWxyZWFkeSB0aGVyZTogSSB0cmllZCBmaXJzdCB0byBtb3ZlIGl0IHRvIHRoZSBEUk0KPiBkcml2
ZXIgc3RhdGUgY29udGFpbmVyIGJ1dCB0aGVyZSBhcmUgd29ya2Fyb3VuZHMgZm9yCj4gcHJvYmUg
b3JkZXIgaW4gdGhlIGNvZGUgc28gSSBqdXN0IHN0YXllZCBvZmYgaXQsIGFzIHRoZQo+IHJlc3Vs
dCBpcyB1bnByZWRpY3RhYmxlLgo+Cj4gUGVvcGxlIHdhbnRpbmcgdG8gZG8gYSBtb3JlIHRocm9y
dWdoIGFuZCBwcm9wZXIgY2xlYW51cAo+IG9mIHRoZSBHTUE1MDAgZHJpdmVyIGNhbiB3b3JrIG9u
IHRvcCBvZiB0aGlzLCBJIGNhbid0Cj4gc29sdmUgbXVjaCBtb3JlIHNpbmNlIEkgZG9uJ3QgaGF2
ZSBhY2Nlc3MgdG8gdGhlIGhhcmR3YXJlLAo+IEkgY2FuIG9ubHkgYXR0ZW1wdCB0byB0aWR5IHVw
IG15IEdQSU8gY29ybmVyLgo+Cj4gQ2M6IFBhdHJpayBKYWtvYnNzb24gPHBhdHJpay5yLmpha29i
c3NvbkBnbWFpbC5jb20+Cj4gQ2M6IERhbmllbCBTdG9uZSA8ZGFuaWVsc0Bjb2xsYWJvcmEuY29t
Pgo+IENjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgo+IENjOiBBbmR5
IFNoZXZjaGVua28gPGFuZHJpeS5zaGV2Y2hlbmtvQGxpbnV4LmludGVsLmNvbT4KPiBTaWduZWQt
b2ZmLWJ5OiBMaW51cyBXYWxsZWlqIDxsaW51cy53YWxsZWlqQGxpbmFyby5vcmc+Cj4gLS0tCj4g
SWYgc29tZW9uZSBjYW4gdGVzdCB0aGlzIG9uIHRoZSB0YXJnZXQgcGxhdGZvcm0gSSdkIGJlCj4g
aGFwcHkuCgpIaSBMaW51cywgc29ycnkgZG9uJ3QgaGF2ZSBoYXJkd2FyZSB0byB0ZXN0IHdpdGgu
IE1lZGZpZWxkcyBhcmUgdmVyeQpyYXJlIChvciBleHRpbmN0KS4KClRoaXMgbG9va3Mgb2suIEkn
bGwgbGV0IHlvdSBhcHBseSB0aGlzLiBUaGFua3MgZm9yIHRoZSBjbGVhbnVwLgoKQWNrZWQtYnk6
IFBhdHJpayBKYWtvYnNzb24gPHBhdHJpay5yLmpha29ic3NvbkBnbWFpbC5jb20+Cgo+IC0tLQo+
ICAuLi4vaW50ZWwtbWlkL2RldmljZV9saWJzL3BsYXRmb3JtX3RjMzU4NzZ4LmMgfCAyNiArKysr
LS0KPiAgZHJpdmVycy9ncHUvZHJtL2dtYTUwMC90YzM1ODc2eC1kc2ktbHZkcy5jICAgIHwgODgg
KysrKysrKy0tLS0tLS0tLS0tLQo+ICBpbmNsdWRlL2xpbnV4L3BsYXRmb3JtX2RhdGEvdGMzNTg3
NnguaCAgICAgICAgfCAxMSAtLS0KPiAgMyBmaWxlcyBjaGFuZ2VkLCA1MSBpbnNlcnRpb25zKCsp
LCA3NCBkZWxldGlvbnMoLSkKPiAgZGVsZXRlIG1vZGUgMTAwNjQ0IGluY2x1ZGUvbGludXgvcGxh
dGZvcm1fZGF0YS90YzM1ODc2eC5oCj4KPiBkaWZmIC0tZ2l0IGEvYXJjaC94ODYvcGxhdGZvcm0v
aW50ZWwtbWlkL2RldmljZV9saWJzL3BsYXRmb3JtX3RjMzU4NzZ4LmMgYi9hcmNoL3g4Ni9wbGF0
Zm9ybS9pbnRlbC1taWQvZGV2aWNlX2xpYnMvcGxhdGZvcm1fdGMzNTg3NnguYwo+IGluZGV4IDQ0
ZDFmODg0YzNkMy4uMTM5NzM4YmJkZDM2IDEwMDY0NAo+IC0tLSBhL2FyY2gveDg2L3BsYXRmb3Jt
L2ludGVsLW1pZC9kZXZpY2VfbGlicy9wbGF0Zm9ybV90YzM1ODc2eC5jCj4gKysrIGIvYXJjaC94
ODYvcGxhdGZvcm0vaW50ZWwtbWlkL2RldmljZV9saWJzL3BsYXRmb3JtX3RjMzU4NzZ4LmMKPiBA
QCAtNiwyMSArNiwzMSBAQAo+ICAgKiBBdXRob3I6IFNhdGh5YW5hcmF5YW5hbiBLdXBwdXN3YW15
IDxzYXRoeWFuYXJheWFuYW4ua3VwcHVzd2FteUBpbnRlbC5jb20+Cj4gICAqLwo+Cj4gLSNpbmNs
dWRlIDxsaW51eC9ncGlvLmg+Cj4gLSNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kYXRhL3RjMzU4
NzZ4Lmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9ncGlvL21hY2hpbmUuaD4KPiAgI2luY2x1ZGUgPGFz
bS9pbnRlbC1taWQuaD4KPgo+ICtzdGF0aWMgc3RydWN0IGdwaW9kX2xvb2t1cF90YWJsZSB0YzM1
ODc2eF9ncGlvX3RhYmxlID0gewo+ICsgICAgICAgLmRldl9pZCA9ICJpMmNfZGlzcF9icmlnIiwK
PiArICAgICAgIC50YWJsZSAgPSB7Cj4gKyAgICAgICAgICAgICAgIEdQSU9fTE9PS1VQKCIwMDAw
OjAwOjBjLjAiLCAtMSwgImJyaWRnZS1yZXNldCIsIEdQSU9fQUNUSVZFX0hJR0gpLAo+ICsgICAg
ICAgICAgICAgICBHUElPX0xPT0tVUCgiMDAwMDowMDowYy4wIiwgLTEsICJibC1lbiIsIEdQSU9f
QUNUSVZFX0hJR0gpLAo+ICsgICAgICAgICAgICAgICBHUElPX0xPT0tVUCgiMDAwMDowMDowYy4w
IiwgLTEsICJ2YWRkIiwgR1BJT19BQ1RJVkVfSElHSCksCj4gKyAgICAgICAgICAgICAgIHsgfSwK
PiArICAgICAgIH0sCj4gK307Cj4gKwo+ICAvKnRjMzU4NzZ4IERTSV9MVkRTIGJyaWRnZSBjaGlw
IGFuZCBwYW5lbCBwbGF0Zm9ybSBkYXRhKi8KPiAgc3RhdGljIHZvaWQgKnRjMzU4NzZ4X3BsYXRm
b3JtX2RhdGEodm9pZCAqZGF0YSkKPiAgewo+IC0gICAgICAgc3RhdGljIHN0cnVjdCB0YzM1ODc2
eF9wbGF0Zm9ybV9kYXRhIHBkYXRhOwo+ICsgICAgICAgc3RydWN0IGdwaW9kX2xvb2t1cF90YWJs
ZSAqdGFibGUgPSAmdGMzNTg3NnhfZ3Bpb190YWJsZTsKPiArICAgICAgIHN0cnVjdCBncGlvZF9s
b29rdXAgKmxvb2t1cCA9IHRhYmxlLT50YWJsZTsKPgo+IC0gICAgICAgLyogZ3BpbyBwaW5zIHNl
dCB0byAtMSB3aWxsIG5vdCBiZSB1c2VkIGJ5IHRoZSBkcml2ZXIgKi8KPiAtICAgICAgIHBkYXRh
LmdwaW9fYnJpZGdlX3Jlc2V0ID0gZ2V0X2dwaW9fYnlfbmFtZSgiTENNQl9SWEVOIik7Cj4gLSAg
ICAgICBwZGF0YS5ncGlvX3BhbmVsX2JsX2VuID0gZ2V0X2dwaW9fYnlfbmFtZSgiNlM2UF9CTF9F
TiIpOwo+IC0gICAgICAgcGRhdGEuZ3Bpb19wYW5lbF92YWRkID0gZ2V0X2dwaW9fYnlfbmFtZSgi
RU5fVlJFR19MQ0RfVjNQMyIpOwo+ICsgICAgICAgbG9va3VwWzBdLmNoaXBfaHdudW0gPSBnZXRf
Z3Bpb19ieV9uYW1lKCJMQ01CX1JYRU4iKTsKPiArICAgICAgIGxvb2t1cFsxXS5jaGlwX2h3bnVt
ID0gZ2V0X2dwaW9fYnlfbmFtZSgiNlM2UF9CTF9FTiIpOwo+ICsgICAgICAgbG9va3VwWzJdLmNo
aXBfaHdudW0gPSBnZXRfZ3Bpb19ieV9uYW1lKCJFTl9WUkVHX0xDRF9WM1AzIik7Cj4gKyAgICAg
ICBncGlvZF9hZGRfbG9va3VwX3RhYmxlKHRhYmxlKTsKPgo+IC0gICAgICAgcmV0dXJuICZwZGF0
YTsKPiArICAgICAgIHJldHVybiBOVUxMOwo+ICB9Cj4KPiAgc3RhdGljIGNvbnN0IHN0cnVjdCBk
ZXZzX2lkIHRjMzU4NzZ4X2Rldl9pZCBfX2luaXRjb25zdCA9IHsKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2dtYTUwMC90YzM1ODc2eC1kc2ktbHZkcy5jIGIvZHJpdmVycy9ncHUvZHJt
L2dtYTUwMC90YzM1ODc2eC1kc2ktbHZkcy5jCj4gaW5kZXggN2RlM2NlNjM3YzdmLi45ZTgyMjQ0
NTZlYTIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC90YzM1ODc2eC1kc2kt
bHZkcy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC90YzM1ODc2eC1kc2ktbHZkcy5j
Cj4gQEAgLTI1LDcgKzI1LDcgQEAKPiAgI2luY2x1ZGUgPGxpbnV4L2RlbGF5Lmg+Cj4gICNpbmNs
dWRlIDxsaW51eC9rZXJuZWwuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgo+IC0jaW5j
bHVkZSA8bGludXgvcGxhdGZvcm1fZGF0YS90YzM1ODc2eC5oPgo+ICsjaW5jbHVkZSA8bGludXgv
Z3Bpby9jb25zdW1lci5oPgo+Cj4gICNpbmNsdWRlIDxhc20vaW50ZWxfc2N1X2lwYy5oPgo+Cj4g
QEAgLTM2LDYgKzM2LDExIEBACj4KPiAgc3RhdGljIHN0cnVjdCBpMmNfY2xpZW50ICp0YzM1ODc2
eF9jbGllbnQ7Cj4gIHN0YXRpYyBzdHJ1Y3QgaTJjX2NsaWVudCAqY21pX2xjZF9pMmNfY2xpZW50
Owo+ICsvKiBQYW5lbCBHUElPcyAqLwo+ICtzdGF0aWMgc3RydWN0IGdwaW9fZGVzYyAqYnJpZGdl
X3Jlc2V0Owo+ICtzdGF0aWMgc3RydWN0IGdwaW9fZGVzYyAqYnJpZGdlX2JsX2VuYWJsZTsKPiAr
c3RhdGljIHN0cnVjdCBncGlvX2Rlc2MgKmJhY2tsaWdodF92b2x0YWdlOwo+ICsKPgo+ICAjZGVm
aW5lIEZMRF9NQVNLKHN0YXJ0LCBlbmQpICAgKCgoMSA8PCAoKHN0YXJ0KSAtIChlbmQpICsgMSkp
IC0gMSkgPDwgKGVuZCkpCj4gICNkZWZpbmUgRkxEX1ZBTCh2YWwsIHN0YXJ0LCBlbmQpICgoKHZh
bCkgPDwgKGVuZCkpICYgRkxEX01BU0soc3RhcnQsIGVuZCkpCj4gQEAgLTMxNiwyNyArMzIxLDIz
IEBAIHN0YXRpYyBpbnQgdGMzNTg3NnhfcmVncihzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50LCB1
MTYgcmVnLCB1MzIgKnZhbHVlKQo+Cj4gIHZvaWQgdGMzNTg3Nnhfc2V0X2JyaWRnZV9yZXNldF9z
dGF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBpbnQgc3RhdGUpCj4gIHsKPiAtICAgICAgIHN0
cnVjdCB0YzM1ODc2eF9wbGF0Zm9ybV9kYXRhICpwZGF0YTsKPiAtCj4gICAgICAgICBpZiAoV0FS
TighdGMzNTg3NnhfY2xpZW50LCAiJXMgY2FsbGVkIGJlZm9yZSBwcm9iZSIsIF9fZnVuY19fKSkK
PiAgICAgICAgICAgICAgICAgcmV0dXJuOwo+Cj4gICAgICAgICBkZXZfZGJnKCZ0YzM1ODc2eF9j
bGllbnQtPmRldiwgIiVzOiBzdGF0ZSAlZFxuIiwgX19mdW5jX18sIHN0YXRlKTsKPgo+IC0gICAg
ICAgcGRhdGEgPSBkZXZfZ2V0X3BsYXRkYXRhKCZ0YzM1ODc2eF9jbGllbnQtPmRldik7Cj4gLQo+
IC0gICAgICAgaWYgKHBkYXRhLT5ncGlvX2JyaWRnZV9yZXNldCA9PSAtMSkKPiArICAgICAgIGlm
ICghYnJpZGdlX3Jlc2V0KQo+ICAgICAgICAgICAgICAgICByZXR1cm47Cj4KPiAgICAgICAgIGlm
IChzdGF0ZSkgewo+IC0gICAgICAgICAgICAgICBncGlvX3NldF92YWx1ZV9jYW5zbGVlcChwZGF0
YS0+Z3Bpb19icmlkZ2VfcmVzZXQsIDApOwo+ICsgICAgICAgICAgICAgICBncGlvZF9zZXRfdmFs
dWVfY2Fuc2xlZXAoYnJpZGdlX3Jlc2V0LCAwKTsKPiAgICAgICAgICAgICAgICAgbWRlbGF5KDEw
KTsKPiAgICAgICAgIH0gZWxzZSB7Cj4gICAgICAgICAgICAgICAgIC8qIFB1bGwgTUlQSSBCcmlk
Z2UgcmVzZXQgcGluIHRvIExvdyAqLwo+IC0gICAgICAgICAgICAgICBncGlvX3NldF92YWx1ZV9j
YW5zbGVlcChwZGF0YS0+Z3Bpb19icmlkZ2VfcmVzZXQsIDApOwo+ICsgICAgICAgICAgICAgICBn
cGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAoYnJpZGdlX3Jlc2V0LCAwKTsKPiAgICAgICAgICAgICAg
ICAgbWRlbGF5KDIwKTsKPiAgICAgICAgICAgICAgICAgLyogUHVsbCBNSVBJIEJyaWRnZSByZXNl
dCBwaW4gdG8gSGlnaCAqLwo+IC0gICAgICAgICAgICAgICBncGlvX3NldF92YWx1ZV9jYW5zbGVl
cChwZGF0YS0+Z3Bpb19icmlkZ2VfcmVzZXQsIDEpOwo+ICsgICAgICAgICAgICAgICBncGlvZF9z
ZXRfdmFsdWVfY2Fuc2xlZXAoYnJpZGdlX3Jlc2V0LCAxKTsKPiAgICAgICAgICAgICAgICAgbWRl
bGF5KDQwKTsKPiAgICAgICAgIH0KPiAgfQo+IEBAIC01MTAsMjUgKzUxMSwyMCBAQCB2b2lkIHRj
MzU4NzZ4X2JyaWdodG5lc3NfY29udHJvbChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBpbnQgbGV2
ZWwpCj4KPiAgdm9pZCB0YzM1ODc2eF90b3NoaWJhX2JyaWRnZV9wYW5lbF9vZmYoc3RydWN0IGRy
bV9kZXZpY2UgKmRldikKPiAgewo+IC0gICAgICAgc3RydWN0IHRjMzU4NzZ4X3BsYXRmb3JtX2Rh
dGEgKnBkYXRhOwo+IC0KPiAgICAgICAgIGlmIChXQVJOKCF0YzM1ODc2eF9jbGllbnQsICIlcyBj
YWxsZWQgYmVmb3JlIHByb2JlIiwgX19mdW5jX18pKQo+ICAgICAgICAgICAgICAgICByZXR1cm47
Cj4KPiAgICAgICAgIGRldl9kYmcoJnRjMzU4NzZ4X2NsaWVudC0+ZGV2LCAiJXNcbiIsIF9fZnVu
Y19fKTsKPgo+IC0gICAgICAgcGRhdGEgPSBkZXZfZ2V0X3BsYXRkYXRhKCZ0YzM1ODc2eF9jbGll
bnQtPmRldik7Cj4gLQo+IC0gICAgICAgaWYgKHBkYXRhLT5ncGlvX3BhbmVsX2JsX2VuICE9IC0x
KQo+IC0gICAgICAgICAgICAgICBncGlvX3NldF92YWx1ZV9jYW5zbGVlcChwZGF0YS0+Z3Bpb19w
YW5lbF9ibF9lbiwgMCk7Cj4gKyAgICAgICBpZiAoYnJpZGdlX2JsX2VuYWJsZSkKPiArICAgICAg
ICAgICAgICAgZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGJyaWRnZV9ibF9lbmFibGUsIDApOwo+
Cj4gLSAgICAgICBpZiAocGRhdGEtPmdwaW9fcGFuZWxfdmFkZCAhPSAtMSkKPiAtICAgICAgICAg
ICAgICAgZ3Bpb19zZXRfdmFsdWVfY2Fuc2xlZXAocGRhdGEtPmdwaW9fcGFuZWxfdmFkZCwgMCk7
Cj4gKyAgICAgICBpZiAoYmFja2xpZ2h0X3ZvbHRhZ2UpCj4gKyAgICAgICAgICAgICAgIGdwaW9k
X3NldF92YWx1ZV9jYW5zbGVlcChiYWNrbGlnaHRfdm9sdGFnZSwgMCk7Cj4gIH0KPgo+ICB2b2lk
IHRjMzU4NzZ4X3Rvc2hpYmFfYnJpZGdlX3BhbmVsX29uKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYp
Cj4gIHsKPiAtICAgICAgIHN0cnVjdCB0YzM1ODc2eF9wbGF0Zm9ybV9kYXRhICpwZGF0YTsKPiAg
ICAgICAgIHN0cnVjdCBkcm1fcHNiX3ByaXZhdGUgKmRldl9wcml2ID0gZGV2LT5kZXZfcHJpdmF0
ZTsKPgo+ICAgICAgICAgaWYgKFdBUk4oIXRjMzU4NzZ4X2NsaWVudCwgIiVzIGNhbGxlZCBiZWZv
cmUgcHJvYmUiLCBfX2Z1bmNfXykpCj4gQEAgLTUzNiwxMCArNTMyLDggQEAgdm9pZCB0YzM1ODc2
eF90b3NoaWJhX2JyaWRnZV9wYW5lbF9vbihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQo+Cj4gICAg
ICAgICBkZXZfZGJnKCZ0YzM1ODc2eF9jbGllbnQtPmRldiwgIiVzXG4iLCBfX2Z1bmNfXyk7Cj4K
PiAtICAgICAgIHBkYXRhID0gZGV2X2dldF9wbGF0ZGF0YSgmdGMzNTg3NnhfY2xpZW50LT5kZXYp
Owo+IC0KPiAtICAgICAgIGlmIChwZGF0YS0+Z3Bpb19wYW5lbF92YWRkICE9IC0xKSB7Cj4gLSAg
ICAgICAgICAgICAgIGdwaW9fc2V0X3ZhbHVlX2NhbnNsZWVwKHBkYXRhLT5ncGlvX3BhbmVsX3Zh
ZGQsIDEpOwo+ICsgICAgICAgaWYgKGJhY2tsaWdodF92b2x0YWdlKSB7Cj4gKyAgICAgICAgICAg
ICAgIGdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChiYWNrbGlnaHRfdm9sdGFnZSwgMSk7Cj4gICAg
ICAgICAgICAgICAgIG1zbGVlcCgyNjApOwo+ICAgICAgICAgfQo+Cj4gQEAgLTU3MSw4ICs1NjUs
OCBAQCB2b2lkIHRjMzU4NzZ4X3Rvc2hpYmFfYnJpZGdlX3BhbmVsX29uKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYpCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaTJjIHdyaXRlIGZh
aWxlZCAoJWQpXG4iLCByZXQpOwo+ICAgICAgICAgfQo+Cj4gLSAgICAgICBpZiAocGRhdGEtPmdw
aW9fcGFuZWxfYmxfZW4gIT0gLTEpCj4gLSAgICAgICAgICAgICAgIGdwaW9fc2V0X3ZhbHVlX2Nh
bnNsZWVwKHBkYXRhLT5ncGlvX3BhbmVsX2JsX2VuLCAxKTsKPiArICAgICAgIGlmIChicmlkZ2Vf
YmxfZW5hYmxlKQo+ICsgICAgICAgICAgICAgICBncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAoYnJp
ZGdlX2JsX2VuYWJsZSwgMSk7Cj4KPiAgICAgICAgIHRjMzU4NzZ4X2JyaWdodG5lc3NfY29udHJv
bChkZXYsIGRldl9wcml2LT5icmlnaHRuZXNzX2FkanVzdGVkKTsKPiAgfQo+IEBAIC02MzUsOCAr
NjI5LDYgQEAgc3RhdGljIGludCB0YzM1ODc2eF9nZXRfcGFuZWxfaW5mbyhzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2LCBpbnQgcGlwZSwKPiAgc3RhdGljIGludCB0YzM1ODc2eF9icmlkZ2VfcHJvYmUo
c3RydWN0IGkyY19jbGllbnQgKmNsaWVudCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGNvbnN0IHN0cnVjdCBpMmNfZGV2aWNlX2lkICppZCkKPiAgewo+IC0gICAgICAgc3RydWN0
IHRjMzU4NzZ4X3BsYXRmb3JtX2RhdGEgKnBkYXRhOwo+IC0KPiAgICAgICAgIGRldl9pbmZvKCZj
bGllbnQtPmRldiwgIiVzXG4iLCBfX2Z1bmNfXyk7Cj4KPiAgICAgICAgIGlmICghaTJjX2NoZWNr
X2Z1bmN0aW9uYWxpdHkoY2xpZW50LT5hZGFwdGVyLCBJMkNfRlVOQ19JMkMpKSB7Cj4gQEAgLTY0
NSwyNiArNjM3LDIzIEBAIHN0YXRpYyBpbnQgdGMzNTg3NnhfYnJpZGdlX3Byb2JlKHN0cnVjdCBp
MmNfY2xpZW50ICpjbGllbnQsCj4gICAgICAgICAgICAgICAgIHJldHVybiAtRU5PREVWOwo+ICAg
ICAgICAgfQo+Cj4gLSAgICAgICBwZGF0YSA9IGRldl9nZXRfcGxhdGRhdGEoJmNsaWVudC0+ZGV2
KTsKPiAtICAgICAgIGlmICghcGRhdGEpIHsKPiAtICAgICAgICAgICAgICAgZGV2X2VycigmY2xp
ZW50LT5kZXYsICIlczogbm8gcGxhdGZvcm0gZGF0YVxuIiwgX19mdW5jX18pOwo+IC0gICAgICAg
ICAgICAgICByZXR1cm4gLUVOT0RFVjsKPiAtICAgICAgIH0KPiArICAgICAgIGJyaWRnZV9yZXNl
dCA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlvbmFsKCZjbGllbnQtPmRldiwgImJyaWRnZS1yZXNldCIs
IEdQSU9EX09VVF9MT1cpOwo+ICsgICAgICAgaWYgKElTX0VSUihicmlkZ2VfcmVzZXQpKQo+ICsg
ICAgICAgICAgICAgICByZXR1cm4gUFRSX0VSUihicmlkZ2VfcmVzZXQpOwo+ICsgICAgICAgaWYg
KGJyaWRnZV9yZXNldCkKPiArICAgICAgICAgICAgICAgZ3Bpb2Rfc2V0X2NvbnN1bWVyX25hbWUo
YnJpZGdlX3Jlc2V0LCAidGMzNTg3NnggYnJpZGdlIHJlc2V0Iik7Cj4KPiAtICAgICAgIGlmIChw
ZGF0YS0+Z3Bpb19icmlkZ2VfcmVzZXQgIT0gLTEpIHsKPiAtICAgICAgICAgICAgICAgZ3Bpb19y
ZXF1ZXN0KHBkYXRhLT5ncGlvX2JyaWRnZV9yZXNldCwgInRjMzU4NzZ4IGJyaWRnZSByZXNldCIp
Owo+IC0gICAgICAgICAgICAgICBncGlvX2RpcmVjdGlvbl9vdXRwdXQocGRhdGEtPmdwaW9fYnJp
ZGdlX3Jlc2V0LCAwKTsKPiAtICAgICAgIH0KPiAtCj4gLSAgICAgICBpZiAocGRhdGEtPmdwaW9f
cGFuZWxfYmxfZW4gIT0gLTEpIHsKPiAtICAgICAgICAgICAgICAgZ3Bpb19yZXF1ZXN0KHBkYXRh
LT5ncGlvX3BhbmVsX2JsX2VuLCAidGMzNTg3NnggcGFuZWwgYmwgZW4iKTsKPiAtICAgICAgICAg
ICAgICAgZ3Bpb19kaXJlY3Rpb25fb3V0cHV0KHBkYXRhLT5ncGlvX3BhbmVsX2JsX2VuLCAwKTsK
PiAtICAgICAgIH0KPiArICAgICAgIGJyaWRnZV9ibF9lbmFibGUgPSBkZXZtX2dwaW9kX2dldF9v
cHRpb25hbCgmY2xpZW50LT5kZXYsICJibC1lbiIsIEdQSU9EX09VVF9MT1cpOwo+ICsgICAgICAg
aWYgKElTX0VSUihicmlkZ2VfYmxfZW5hYmxlKSkKPiArICAgICAgICAgICAgICAgcmV0dXJuIFBU
Ul9FUlIoYnJpZGdlX2JsX2VuYWJsZSk7Cj4gKyAgICAgICBpZiAoYnJpZGdlX2JsX2VuYWJsZSkK
PiArICAgICAgICAgICAgICAgZ3Bpb2Rfc2V0X2NvbnN1bWVyX25hbWUoYnJpZGdlX2JsX2VuYWJs
ZSwgInRjMzU4NzZ4IHBhbmVsIGJsIGVuIik7Cj4KPiAtICAgICAgIGlmIChwZGF0YS0+Z3Bpb19w
YW5lbF92YWRkICE9IC0xKSB7Cj4gLSAgICAgICAgICAgICAgIGdwaW9fcmVxdWVzdChwZGF0YS0+
Z3Bpb19wYW5lbF92YWRkLCAidGMzNTg3NnggcGFuZWwgdmFkZCIpOwo+IC0gICAgICAgICAgICAg
ICBncGlvX2RpcmVjdGlvbl9vdXRwdXQocGRhdGEtPmdwaW9fcGFuZWxfdmFkZCwgMCk7Cj4gLSAg
ICAgICB9Cj4gKyAgICAgICBiYWNrbGlnaHRfdm9sdGFnZSA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlv
bmFsKCZjbGllbnQtPmRldiwgInZhZGQiLCBHUElPRF9PVVRfTE9XKTsKPiArICAgICAgIGlmIChJ
U19FUlIoYmFja2xpZ2h0X3ZvbHRhZ2UpKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gUFRSX0VS
UihiYWNrbGlnaHRfdm9sdGFnZSk7Cj4gKyAgICAgICBpZiAoYmFja2xpZ2h0X3ZvbHRhZ2UpCj4g
KyAgICAgICAgICAgICAgIGdwaW9kX3NldF9jb25zdW1lcl9uYW1lKGJhY2tsaWdodF92b2x0YWdl
LCAidGMzNTg3NnggcGFuZWwgdmFkZCIpOwo+Cj4gICAgICAgICB0YzM1ODc2eF9jbGllbnQgPSBj
bGllbnQ7Cj4KPiBAQCAtNjczLDE5ICs2NjIsOCBAQCBzdGF0aWMgaW50IHRjMzU4NzZ4X2JyaWRn
ZV9wcm9iZShzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50LAo+Cj4gIHN0YXRpYyBpbnQgdGMzNTg3
NnhfYnJpZGdlX3JlbW92ZShzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50KQo+ICB7Cj4gLSAgICAg
ICBzdHJ1Y3QgdGMzNTg3NnhfcGxhdGZvcm1fZGF0YSAqcGRhdGEgPSBkZXZfZ2V0X3BsYXRkYXRh
KCZjbGllbnQtPmRldik7Cj4gLQo+ICAgICAgICAgZGV2X2RiZygmY2xpZW50LT5kZXYsICIlc1xu
IiwgX19mdW5jX18pOwo+Cj4gLSAgICAgICBpZiAocGRhdGEtPmdwaW9fYnJpZGdlX3Jlc2V0ICE9
IC0xKQo+IC0gICAgICAgICAgICAgICBncGlvX2ZyZWUocGRhdGEtPmdwaW9fYnJpZGdlX3Jlc2V0
KTsKPiAtCj4gLSAgICAgICBpZiAocGRhdGEtPmdwaW9fcGFuZWxfYmxfZW4gIT0gLTEpCj4gLSAg
ICAgICAgICAgICAgIGdwaW9fZnJlZShwZGF0YS0+Z3Bpb19wYW5lbF9ibF9lbik7Cj4gLQo+IC0g
ICAgICAgaWYgKHBkYXRhLT5ncGlvX3BhbmVsX3ZhZGQgIT0gLTEpCj4gLSAgICAgICAgICAgICAg
IGdwaW9fZnJlZShwZGF0YS0+Z3Bpb19wYW5lbF92YWRkKTsKPiAtCj4gICAgICAgICB0YzM1ODc2
eF9jbGllbnQgPSBOVUxMOwo+Cj4gICAgICAgICByZXR1cm4gMDsKPiBkaWZmIC0tZ2l0IGEvaW5j
bHVkZS9saW51eC9wbGF0Zm9ybV9kYXRhL3RjMzU4NzZ4LmggYi9pbmNsdWRlL2xpbnV4L3BsYXRm
b3JtX2RhdGEvdGMzNTg3NnguaAo+IGRlbGV0ZWQgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IGNk
NmE1MWM3MWU3ZS4uMDAwMDAwMDAwMDAwCj4gLS0tIGEvaW5jbHVkZS9saW51eC9wbGF0Zm9ybV9k
YXRhL3RjMzU4NzZ4LmgKPiArKysgL2Rldi9udWxsCj4gQEAgLTEsMTEgKzAsMCBAQAo+IC0KPiAt
I2lmbmRlZiBfVEMzNTg3NlhfSAo+IC0jZGVmaW5lIF9UQzM1ODc2WF9ICj4gLQo+IC1zdHJ1Y3Qg
dGMzNTg3NnhfcGxhdGZvcm1fZGF0YSB7Cj4gLSAgICAgICBpbnQgZ3Bpb19icmlkZ2VfcmVzZXQ7
Cj4gLSAgICAgICBpbnQgZ3Bpb19wYW5lbF9ibF9lbjsKPiAtICAgICAgIGludCBncGlvX3BhbmVs
X3ZhZGQ7Cj4gLX07Cj4gLQo+IC0jZW5kaWYgLyogX1RDMzU4NzZYX0ggKi8KPiAtLQo+IDIuMjMu
MAo+Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1k
ZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
