Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E36BD9FBBB
	for <lists+dri-devel@lfdr.de>; Wed, 28 Aug 2019 09:29:27 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CA10789C55;
	Wed, 28 Aug 2019 07:29:18 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F36FC89C55;
 Wed, 28 Aug 2019 07:29:15 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 28 Aug 2019 00:29:15 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,440,1559545200"; d="scan'208";a="192499970"
Received: from ramaling-i9x.iind.intel.com ([10.99.66.154])
 by orsmga002.jf.intel.com with ESMTP; 28 Aug 2019 00:29:13 -0700
From: Ramalingam C <ramalingam.c@intel.com>
To: intel-gfx <intel-gfx@lists.freedesktop.org>,
 dri-devel <dri-devel@lists.freedesktop.org>
Subject: [PATCH v11 5/6] drm/i915/hdcp: update current transcoder into
 intel_hdcp
Date: Wed, 28 Aug 2019 12:58:22 +0530
Message-Id: <20190828072823.4832-6-ramalingam.c@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190828072823.4832-1-ramalingam.c@intel.com>
References: <20190828072823.4832-1-ramalingam.c@intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jani Nikula <jani.nikula@intel.com>, tomas.winkler@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gZ2VuMTIrIHBsYXRmb3JtcywgSERDUCBIVyBpcyBhc3NvY2lhdGVkIHRvIHRoZSB0cmFuc2Nv
ZGVyLgpIZW5jZSBvbiBldmVyeSBtb2Rlc2V0IHVwZGF0ZSBhc3NvY2lhdGVkIHRyYW5zY29kZXIg
aW50byB0aGUKaW50ZWxfaGRjcCBvZiB0aGUgcG9ydC4KCnYyOgogIHMvdHJhbnMvY3B1X3RyYW5z
Y29kZXIgW0phbmldCnYzOgogIGNvbW1lbnQgaXMgYWRkZWQgZm9yIGZ3X2RkaSBpbml0IGZvciBn
ZW4xMisgW1NoYXNoYW5rXQogIG9ubHkgaGRjcCBjYXBhYmxlIHRyYW5zY29kZXIgaXMgdHJhbnNs
YXRlZCBpbnRvIGZ3X3RjIFtTaGFzaGFua10KdjQ6CiAgZndfdGMgaW5pdGlhbGl6YXRpb24gaXMg
a2VwdCBmb3IgbW9kZXNldC4gW1RvbWFzXQogIGZldyBleHRyYSBkb2MgaXMgYWRkZWQgYXQgcG9y
dF9kYXRhIGluaXQgW1RvbWFzXQoKU2lnbmVkLW9mZi1ieTogUmFtYWxpbmdhbSBDIDxyYW1hbGlu
Z2FtLmNAaW50ZWwuY29tPgpBY2tlZC1ieTogSmFuaSBOaWt1bGEgPGphbmkubmlrdWxhQGludGVs
LmNvbT4KLS0tCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmggICAg
fCAgNyArKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYyAgICAgICB8
ICAzICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkY3AuYyAgICAgfCA0
OCArKysrKysrKysrKysrKysrKystCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVs
X2hkY3AuaCAgICAgfCAgMyArKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9o
ZG1pLmMgICAgIHwgIDMgKysKIDUgZmlsZXMgY2hhbmdlZCwgNjMgaW5zZXJ0aW9ucygrKSwgMSBk
ZWxldGlvbigtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheV90eXBlcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9k
aXNwbGF5X3R5cGVzLmgKaW5kZXggOTY1MTRkY2M3ODEyLi42MTI3N2E4N2RiZTcgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCkBA
IC0zODgsNiArMzg4LDEzIEBAIHN0cnVjdCBpbnRlbF9oZGNwIHsKIAl3YWl0X3F1ZXVlX2hlYWRf
dCBjcF9pcnFfcXVldWU7CiAJYXRvbWljX3QgY3BfaXJxX2NvdW50OwogCWludCBjcF9pcnFfY291
bnRfY2FjaGVkOworCisJLyoKKwkgKiBIRENQIHJlZ2lzdGVyIGFjY2VzcyBmb3IgZ2VuMTIrIG5l
ZWQgdGhlIHRyYW5zY29kZXIgYXNzb2NpYXRlZC4KKwkgKiBUcmFuc2NvZGVyIGF0dGFjaGVkIHRv
IHRoZSBjb25uZWN0b3IgY291bGQgYmUgY2hhbmdlZCBhdCBtb2Rlc2V0LgorCSAqIEhlbmNlIGNh
Y2hpbmcgdGhlIHRyYW5zY29kZXIgaGVyZS4KKwkgKi8KKwllbnVtIHRyYW5zY29kZXIgY3B1X3Ry
YW5zY29kZXI7CiB9OwogCiBzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yIHsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZHAuYwppbmRleCAyMzkwOGRhMWNkNWQuLmU4NDcxNjg5Zjc4NSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYwpAQCAtMjI0OCw2ICsyMjQ4
LDkgQEAgaW50ZWxfZHBfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29kZXIgKmVuY29k
ZXIsCiAKIAlpbnRlbF9wc3JfY29tcHV0ZV9jb25maWcoaW50ZWxfZHAsIHBpcGVfY29uZmlnKTsK
IAorCWludGVsX2hkY3BfdHJhbnNjb2Rlcl9jb25maWcoaW50ZWxfY29ubmVjdG9yLAorCQkJCSAg
ICAgcGlwZV9jb25maWctPmNwdV90cmFuc2NvZGVyKTsKKwogCXJldHVybiAwOwogfQogCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkY3AuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jCmluZGV4IGU4YjA0Y2M4ZmNiMS4u
OTg4ZDY3NWY5ZjY5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2hkY3AuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkY3Au
YwpAQCAtMTc2NCwxMyArMTc2NCw1OSBAQCBlbnVtIG1laV9md19kZGkgaW50ZWxfZ2V0X21laV9m
d19kZGlfaW5kZXgoZW51bSBwb3J0IHBvcnQpCiAJfQogfQogCitzdGF0aWMgaW5saW5lCitlbnVt
IG1laV9md190YyBpbnRlbF9nZXRfbWVpX2Z3X3RjKGVudW0gdHJhbnNjb2RlciBjcHVfdHJhbnNj
b2RlcikKK3sKKwlzd2l0Y2ggKGNwdV90cmFuc2NvZGVyKSB7CisJY2FzZSBUUkFOU0NPREVSX0Eg
Li4uIFRSQU5TQ09ERVJfRDoKKwkJcmV0dXJuIChlbnVtIG1laV9md190YykoY3B1X3RyYW5zY29k
ZXIgfCAweDEwKTsKKwlkZWZhdWx0OiAvKiBlRFAsIERTSSBUUkFOU0NPREVSUyBhcmUgbm9uIEhE
Q1AgY2FwYWJsZSAqLworCQlyZXR1cm4gTUVJX0lOVkFMSURfVFJBTlNDT0RFUjsKKwl9Cit9CisK
K3ZvaWQgaW50ZWxfaGRjcF90cmFuc2NvZGVyX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfY29ubmVjdG9y
ICpjb25uZWN0b3IsCisJCQkJICBlbnVtIHRyYW5zY29kZXIgY3B1X3RyYW5zY29kZXIpCit7CisJ
c3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShjb25uZWN0b3ItPmJh
c2UuZGV2KTsKKwlzdHJ1Y3QgaW50ZWxfaGRjcCAqaGRjcCA9ICZjb25uZWN0b3ItPmhkY3A7CisK
KwlpZiAoIWhkY3AtPnNoaW0pCisJCXJldHVybjsKKworCWlmIChJTlRFTF9HRU4oZGV2X3ByaXYp
ID49IDEyKSB7CisJCW11dGV4X2xvY2soJmhkY3AtPm11dGV4KTsKKwkJaGRjcC0+Y3B1X3RyYW5z
Y29kZXIgPSBjcHVfdHJhbnNjb2RlcjsKKwkJaGRjcC0+cG9ydF9kYXRhLmZ3X3RjID0gaW50ZWxf
Z2V0X21laV9md190YyhjcHVfdHJhbnNjb2Rlcik7CisJCW11dGV4X3VubG9jaygmaGRjcC0+bXV0
ZXgpOworCX0KK30KKwogc3RhdGljIGlubGluZSBpbnQgaW5pdGlhbGl6ZV9oZGNwX3BvcnRfZGF0
YShzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IsCiAJCQkJCSAgICBjb25zdCBzdHJ1
Y3QgaW50ZWxfaGRjcF9zaGltICpzaGltKQogeworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiA9IHRvX2k5MTUoY29ubmVjdG9yLT5iYXNlLmRldik7CiAJc3RydWN0IGludGVsX2hk
Y3AgKmhkY3AgPSAmY29ubmVjdG9yLT5oZGNwOwogCXN0cnVjdCBoZGNwX3BvcnRfZGF0YSAqZGF0
YSA9ICZoZGNwLT5wb3J0X2RhdGE7CiAKLQlkYXRhLT5md19kZGkgPSBpbnRlbF9nZXRfbWVpX2Z3
X2RkaV9pbmRleChjb25uZWN0b3ItPmVuY29kZXItPnBvcnQpOworCWlmIChJTlRFTF9HRU4oZGV2
X3ByaXYpIDwgMTIpIHsKKwkJZGF0YS0+ZndfZGRpID0KKwkJCWludGVsX2dldF9tZWlfZndfZGRp
X2luZGV4KGNvbm5lY3Rvci0+ZW5jb2Rlci0+cG9ydCk7CisJfSBlbHNlIHsKKworCQkvKgorCQkg
KiBBcyBwZXIgTUUgRlcgQVBJIGV4cGVjdGF0aW9uLCBmb3IgR0VOIDEyKywgZndfZGRpIGlzIGZp
bGxlZAorCQkgKiB3aXRoIElOVkFMSUQgUE9SVCBpbmRleC4KKwkJICovCisJCWRhdGEtPmZ3X2Rk
aSA9IE1FSV9ERElfSU5WQUxJRF9QT1JUOworCX0KKworCS8qCisJICogQXMgYXNzb2NpYXRlZCB0
cmFuc2NvZGVyIGlzIHNldCBhbmQgbW9kaWZpZWQgYXQgbW9kZXNldCwgaGVyZSBmd190YworCSAq
IGlzIGluaXRpYWxpemVkIHRvIGludmFsaWQgaW5kZXguCisJICovCisJZGF0YS0+ZndfdGMgPSBN
RUlfSU5WQUxJRF9UUkFOU0NPREVSOworCiAJZGF0YS0+cG9ydF90eXBlID0gKHU4KUhEQ1BfUE9S
VF9UWVBFX0lOVEVHUkFURUQ7CiAJZGF0YS0+cHJvdG9jb2wgPSAodTgpc2hpbS0+cHJvdG9jb2w7
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5o
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9oZGNwLmgKaW5kZXggNTlhMmI0
MDQwNWNjLi40MWMxMDUzZDllMzggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfaGRjcC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfaGRjcC5oCkBAIC0xNiwxMCArMTYsMTMgQEAgc3RydWN0IGRybV9pOTE1X3ByaXZhdGU7CiBz
dHJ1Y3QgaW50ZWxfY29ubmVjdG9yOwogc3RydWN0IGludGVsX2hkY3Bfc2hpbTsKIGVudW0gcG9y
dDsKK2VudW0gdHJhbnNjb2RlcjsKIAogdm9pZCBpbnRlbF9oZGNwX2F0b21pY19jaGVjayhzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQkJICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3Rv
cl9zdGF0ZSAqb2xkX3N0YXRlLAogCQkJICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAq
bmV3X3N0YXRlKTsKK3ZvaWQgaW50ZWxfaGRjcF90cmFuc2NvZGVyX2NvbmZpZyhzdHJ1Y3QgaW50
ZWxfY29ubmVjdG9yICpjb25uZWN0b3IsCisJCQkJICBlbnVtIHRyYW5zY29kZXIgY3B1X3RyYW5z
Y29kZXIpOwogaW50IGludGVsX2hkY3BfaW5pdChzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25u
ZWN0b3IsCiAJCSAgICBjb25zdCBzdHJ1Y3QgaW50ZWxfaGRjcF9zaGltICpoZGNwX3NoaW0pOwog
aW50IGludGVsX2hkY3BfZW5hYmxlKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3Rvciwg
dTggY29udGVudF90eXBlKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfaGRtaS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9oZG1p
LmMKaW5kZXggZTAyZjBmYWVjZjAyLi42ZTliYjZiZDFlZTIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfaGRtaS5jCkBAIC0yNDMxLDYgKzI0MzEsOSBAQCBpbnQgaW50ZWxf
aGRtaV9jb21wdXRlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciwKIAkJcmV0
dXJuIC1FSU5WQUw7CiAJfQogCisJaW50ZWxfaGRjcF90cmFuc2NvZGVyX2NvbmZpZyhpbnRlbF9o
ZG1pLT5hdHRhY2hlZF9jb25uZWN0b3IsCisJCQkJICAgICBwaXBlX2NvbmZpZy0+Y3B1X3RyYW5z
Y29kZXIpOworCiAJcmV0dXJuIDA7CiB9CiAKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmkt
ZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
