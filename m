Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B127145D0E
	for <lists+dri-devel@lfdr.de>; Fri, 14 Jun 2019 14:41:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E23CC8935A;
	Fri, 14 Jun 2019 12:41:33 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 01D4B89622;
 Fri, 14 Jun 2019 12:41:29 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id c2so2373275wrm.8;
 Fri, 14 Jun 2019 05:41:29 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=ydRvlr8GrTeHWJG9VkVQSxp2WSHz7znDNO6P33s8ZXY=;
 b=X9emyMpmubhwVi9gIhkOlFUYI6GSsqYhzvBSTYRWqP3TbH3AD71X+CSE4JLJsJMcuX
 AJwFxUi27ZjeT+4Da8TAEU4oDOrXF5y+JaOnEaaH8bU6hiH1yLducoJi/SdNx59JddTj
 JSpXcg1mbPKDrp8uxYPSK+9szM/nIZmPgZxPST+u3vE7OplQyO7E849y41kT0mpULptw
 r5PnuIV4CZMdPjr4yjR+ruKU2bcPLZSDlIKqksuZfvh0qMvd1OH/5EDvk1YmL4jJS8pb
 UCvbgSq0K3SDp80M9KJrlqHHhvnJeI80/pWWD3WYzr8QfkQZVjjNUJ6UQjxe5UjrOjEi
 4CJA==
X-Gm-Message-State: APjAAAW0cTMp5RhsrqalLLLVvTIQ0Q8D7prWkHq+7cpgzRxEA4DW2qKy
 mvYyUdadz+BSNIrmhALNDlw=
X-Google-Smtp-Source: APXvYqxemwoMWkSm1jSN79GD079pyYew4LokB4mGKgAC5BALG1haYBR1QzGpWEjJCSHvxOAHbuLLzw==
X-Received: by 2002:adf:df10:: with SMTP id y16mr5861671wrl.302.1560516088657; 
 Fri, 14 Jun 2019 05:41:28 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:e0eb:ed4e:b781:3e9f])
 by smtp.gmail.com with ESMTPSA id n1sm2648209wrx.39.2019.06.14.05.41.27
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Fri, 14 Jun 2019 05:41:28 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: daniel@ffwll.ch, l.stach@pengutronix.de, linux+etnaviv@armlinux.org.uk,
 christian.gmeiner@gmail.com, yuq825@gmail.com, eric@anholt.net,
 peterz@infradead.org, thellstrom@vmware.com,
 dri-devel@lists.freedesktop.org, linux-kernel@vger.kernel.org,
 etnaviv@lists.freedesktop.org, lima@lists.freedesktop.org
Subject: [PATCH 1/6] locking: add ww_mutex_(un)lock_for_each helpers
Date: Fri, 14 Jun 2019 14:41:20 +0200
Message-Id: <20190614124125.124181-2-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190614124125.124181-1-christian.koenig@amd.com>
References: <20190614124125.124181-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=ydRvlr8GrTeHWJG9VkVQSxp2WSHz7znDNO6P33s8ZXY=;
 b=pQOCCGqAMDd6pBzhOwghY/3foEwLP4s4c1Wc1dGov2C4zJBl+VjVFjKY+zhxqdq1Lf
 zIBsPKYcMbzfB9ZiDJ0x0+Mb04T3GDUtHp/dKTOynwDMMiDcETM16YHXm/T4Z/uZZEcB
 fOmRqgpEBT0WQ6nV+dK10V64uDR41sjO2GLZrH5RLG3ERGj/gIzpj1fbF5OQryA8w/6X
 TjYDsXg3Echybd6tIIYKs0U/miL0HLlMPWxnV9FpRHYaVKZC4xj9zYYqBuqvMNj5uQyY
 /a/w/cw13oDHALmSZU78tClcu7pqqVpeVR0OZQnT+hEDzYnpwZAf7sYhYLKCVHw8n///
 S0Dw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIHd3X211dGV4IGltcGxlbWVudGF0aW9uIGFsbG93cyBmb3IgZGV0ZWN0aW9uIGRlYWRsb2Nr
cyB3aGVuIG11bHRpcGxlCnRocmVhZHMgdHJ5IHRvIGFjcXVpcmUgdGhlIHNhbWUgc2V0IG9mIGxv
Y2tzIGluIGRpZmZlcmVudCBvcmRlci4KClRoZSBwcm9ibGVtIGlzIHRoYXQgaGFuZGxpbmcgdGhv
c2UgZGVhZGxvY2tzIHdhcyB0aGUgYnVyZGVuIG9mIHRoZSB1c2VyIG9mCnRoZSB3d19tdXRleCBp
bXBsZW1lbnRhdGlvbiBhbmQgYXQgbGVhc3Qgc29tZSB1c2VycyBkaWRuJ3QgZ290IHRoYXQgcmln
aHQKb24gdGhlIGZpcnN0IHRyeS4KCkknbSBub3QgYSBiaWcgZmFuIG9mIG1hY3JvcywgYnV0IGl0
IHN0aWxsIGJldHRlciB0aGVuIGltcGxlbWVudGluZyB0aGUgc2FtZQpsb2dpYyBhdCBsZWFzdCBo
YWx2ZSBhIGRvemVuIHRpbWVzLiBTbyB0aGlzIHBhdGNoIGFkZHMgdHdvIG1hY3JvcyB0byBsb2Nr
CmFuZCB1bmxvY2sgbXVsdGlwbGUgd3dfbXV0ZXggaW5zdGFuY2VzIHdpdGggdGhlIG5lY2Vzc2Fy
eSBkZWFkbG9jayBoYW5kbGluZy4KClNpZ25lZC1vZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNo
cmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KLS0tCiBpbmNsdWRlL2xpbnV4L3d3X211dGV4LmggfCA3
NSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAxIGZpbGUgY2hhbmdl
ZCwgNzUgaW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvd3dfbXV0ZXgu
aCBiL2luY2x1ZGUvbGludXgvd3dfbXV0ZXguaAppbmRleCAzYWY3YzBlMDNiZTUuLmEwZDg5M2I1
YjExNCAxMDA2NDQKLS0tIGEvaW5jbHVkZS9saW51eC93d19tdXRleC5oCisrKyBiL2luY2x1ZGUv
bGludXgvd3dfbXV0ZXguaApAQCAtMzY5LDQgKzM2OSw3OSBAQCBzdGF0aWMgaW5saW5lIGJvb2wg
d3dfbXV0ZXhfaXNfbG9ja2VkKHN0cnVjdCB3d19tdXRleCAqbG9jaykKIAlyZXR1cm4gbXV0ZXhf
aXNfbG9ja2VkKCZsb2NrLT5iYXNlKTsKIH0KIAorLyoqCisgKiB3d19tdXRleF91bmxvY2tfZm9y
X2VhY2ggLSBjbGVhbnVwIGFmdGVyIGVycm9yIG9yIGNvbnRlbnRpb24KKyAqIEBsb29wOiBmb3Ig
bG9vcCBjb2RlIGZyYWdtZW50IGl0ZXJhdGluZyBvdmVyIGFsbCB0aGUgbG9ja3MKKyAqIEBwb3M6
IGNvZGUgZnJhZ21lbnQgcmV0dXJuaW5nIHRoZSBjdXJyZW50bHkgaGFuZGxlZCBsb2NrCisgKiBA
Y29udGVuZGVkOiB0aGUgbGFzdCBjb250ZW5kZWQgd3dfbXV0ZXggb3IgTlVMTCBvciBFUlJfUFRS
CisgKgorICogSGVscGVyIHRvIG1ha2UgY2xlYW51cCBhZnRlciBlcnJvciBvciBsb2NrIGNvbnRl
bnRpb24gZWFzaWVyLgorICogRmlyc3QgdW5sb2NrIHRoZSBsYXN0IGNvbnRlbmRlZCBsb2NrIGFu
ZCB0aGVuIGFsbCBvdGhlciBsb2NrZWQgb25lcy4KKyAqLworI2RlZmluZSB3d19tdXRleF91bmxv
Y2tfZm9yX2VhY2gobG9vcCwgcG9zLCBjb250ZW5kZWQpCVwKKwlpZiAoIUlTX0VSUihjb250ZW5k
ZWQpKSB7CQkJXAorCQlpZiAoY29udGVuZGVkKQkJCQlcCisJCQl3d19tdXRleF91bmxvY2soY29u
dGVuZGVkKTsJXAorCQljb250ZW5kZWQgPSAocG9zKTsJCQlcCisJCWxvb3AgewkJCQkJXAorCQkJ
aWYgKGNvbnRlbmRlZCA9PSAocG9zKSkJCVwKKwkJCQlicmVhazsJCQlcCisJCQl3d19tdXRleF91
bmxvY2socG9zKTsJCVwKKwkJfQkJCQkJXAorCX0KKworLyoqCisgKiB3d19tdXRleF9sb2NrX2Zv
cl9lYWNoIC0gaW1wbGVtZW50IHd3X211dGV4IGRlYWRsb2NrIGhhbmRsaW5nCisgKiBAbG9vcDog
Zm9yIGxvb3AgY29kZSBmcmFnbWVudCBpdGVyYXRpbmcgb3ZlciBhbGwgdGhlIGxvY2tzCisgKiBA
cG9zOiBjb2RlIGZyYWdtZW50IHJldHVybmluZyB0aGUgY3VycmVudGx5IGhhbmRsZWQgbG9jawor
ICogQGNvbnRlbmRlZDogd3dfbXV0ZXggcG9pbnRlciB2YXJpYWJsZSBmb3Igc3RhdGUgaGFuZGxp
bmcKKyAqIEByZXQ6IGludCB2YXJpYWJsZSB0byBzdG9yZSB0aGUgcmV0dXJuIHZhbHVlIG9mIHd3
X211dGV4X2xvY2soKQorICogQGludHI6IElmIHRydWUgd3dfbXV0ZXhfbG9ja19pbnRlcnJ1cHRp
YmxlKCkgaXMgdXNlZAorICogQGN0eDogd3dfYWNxdWlyZV9jdHggcG9pbnRlciBmb3IgdGhlIGxv
Y2tpbmcKKyAqCisgKiBUaGlzIG1hY3JvIGltcGxlbWVudHMgdGhlIG5lY2Vzc2FyeSBsb2dpYyB0
byBsb2NrIG11bHRpcGxlIHd3X211dGV4CisgKiBpbnN0YW5jZXMuIExvY2sgY29udGVudGlvbiB3
aXRoIGJhY2tvZmYgYW5kIHJlLWxvY2tpbmcgaXMgaGFuZGxlZCBieSB0aGUKKyAqIG1hY3JvIHNv
IHRoYXQgdGhlIGxvb3AgYm9keSBvbmx5IG5lZWQgdG8gaGFuZGxlIG90aGVyIGVycm9ycyBhbmQK
KyAqIHN1Y2Nlc3NmdWxseSBhY3F1aXJlZCBsb2Nrcy4KKyAqCisgKiBXaXRoIHRoZSBAbG9vcCBh
bmQgQHBvcyBjb2RlIGZyYWdtZW50IGl0IGlzIHBvc3NpYmxlIHRvIGFwcGx5IHRoaXMgbG9naWMK
KyAqIHRvIGFsbCBraW5kIG9mIGNvbnRhaW5lcnMgKGFycmF5LCBsaXN0LCB0cmVlLCBldGMuLi4p
IGhvbGRpbmcgbXVsdGlwbGUKKyAqIHd3X211dGV4IGluc3RhbmNlcy4KKyAqCisgKiBAY29udGVu
ZGVkIGlzIHVzZWQgdG8gaG9sZCB0aGUgY3VycmVudCBzdGF0ZSB3ZSBhcmUgaW4uIC1FTk9FTlQg
aXMgdXNlZCB0bworICogc2lnbmFsIHRoYXQgd2UgYXJlIGp1c3Qgc3RhcnRpbmcgdGhlIGhhbmRs
aW5nLiAtRURFQURMSyBtZWFucyB0aGF0IHRoZQorICogY3VycmVudCBwb3NpdGlvbiBpcyBjb250
ZW5kZWQgYW5kIHdlIG5lZWQgdG8gcmVzdGFydCB0aGUgbG9vcCBhZnRlciBsb2NraW5nCisgKiBp
dC4gTlVMTCBtZWFucyB0aGF0IHRoZXJlIGlzIG5vIGNvbnRlbnRpb24gdG8gYmUgaGFuZGxlZC4g
QW55IG90aGVyIHZhbHVlIGlzCisgKiB0aGUgbGFzdCBjb250ZW5kZWQgd3dfbXV0ZXguCisgKi8K
KyNkZWZpbmUgd3dfbXV0ZXhfbG9ja19mb3JfZWFjaChsb29wLCBwb3MsIGNvbnRlbmRlZCwgcmV0
LCBpbnRyLCBjdHgpCVwKKwlmb3IgKGNvbnRlbmRlZCA9IEVSUl9QVFIoLUVOT0VOVCk7ICh7CQkJ
CVwKKwkJX19sYWJlbF9fIHJlbG9jaywgbmV4dDsJCQkJCVwKKwkJcmV0ID0gLUVOT0VOVDsJCQkJ
CQlcCisJCWlmIChjb250ZW5kZWQgPT0gRVJSX1BUUigtRU5PRU5UKSkJCQlcCisJCQljb250ZW5k
ZWQgPSBOVUxMOwkJCQlcCisJCWVsc2UgaWYgKGNvbnRlbmRlZCA9PSBFUlJfUFRSKC1FREVBRExL
KSkJCVwKKwkJCWNvbnRlbmRlZCA9IChwb3MpOwkJCQlcCisJCWVsc2UJCQkJCQkJXAorCQkJZ290
byBuZXh0OwkJCQkJXAorCQlsb29wIHsJCQkJCQkJXAorCQkJaWYgKGNvbnRlbmRlZCA9PSAocG9z
KSkJewkJCVwKKwkJCQljb250ZW5kZWQgPSBOVUxMOwkJCVwKKwkJCQljb250aW51ZTsJCQkJXAor
CQkJfQkJCQkJCVwKK3JlbG9jazoJCQkJCQkJCQlcCisJCQlyZXQgPSAhKGludHIpID8gd3dfbXV0
ZXhfbG9jayhwb3MsIGN0eCkgOglcCisJCQkJd3dfbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKHBv
cywgY3R4KTsJXAorCQkJaWYgKHJldCA9PSAtRURFQURMSykgewkJCQlcCisJCQkJd3dfbXV0ZXhf
dW5sb2NrX2Zvcl9lYWNoKGxvb3AsIHBvcywJXAorCQkJCQkJCSBjb250ZW5kZWQpOwlcCisJCQkJ
Y29udGVuZGVkID0gRVJSX1BUUigtRURFQURMSyk7CQlcCisJCQkJZ290byByZWxvY2s7CQkJCVwK
KwkJCX0JCQkJCQlcCisJCQlicmVhazsJCQkJCQlcCituZXh0OgkJCQkJCQkJCVwKKwkJCWNvbnRp
bnVlOwkJCQkJXAorCQl9CQkJCQkJCVwKKwl9KSwgcmV0ICE9IC1FTk9FTlQ7KQorCiAjZW5kaWYK
LS0gCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
