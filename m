Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id AF59A9C6AD
	for <lists+dri-devel@lfdr.de>; Mon, 26 Aug 2019 02:19:28 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BAD206E154;
	Mon, 26 Aug 2019 00:19:05 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from onstation.org (onstation.org [52.200.56.107])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8178F6EC80;
 Fri, 23 Aug 2019 12:17:00 +0000 (UTC)
Received: from localhost.localdomain (wsip-184-191-162-253.sd.sd.cox.net
 [184.191.162.253])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: masneyb)
 by onstation.org (Postfix) with ESMTPSA id A68DE3E83A;
 Fri, 23 Aug 2019 12:16:58 +0000 (UTC)
From: Brian Masney <masneyb@onstation.org>
To: agross@kernel.org, robdclark@gmail.com, sean@poorly.run,
 robh+dt@kernel.org, bjorn.andersson@linaro.org
Subject: [PATCH v7 6/7] drm/msm/gpu: add ocmem init/cleanup functions
Date: Fri, 23 Aug 2019 05:16:36 -0700
Message-Id: <20190823121637.5861-7-masneyb@onstation.org>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190823121637.5861-1-masneyb@onstation.org>
References: <20190823121637.5861-1-masneyb@onstation.org>
MIME-Version: 1.0
X-Mailman-Approved-At: Mon, 26 Aug 2019 00:18:56 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=onstation.org; s=default; t=1566562619;
 bh=CJX8LFadZm5cNeTACSmQxnUG8/hXOV2JUJat/Sn2OKs=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=RbIEnMITtZCMBVKYY0gAp7PTo2xnAZrO1RuOtAjNqPVf3bAE4+YbBX3KkHO08lDYr
 NhMEoHBOIFV/pWwnbseP1McwDbRlE59DwAd/0av2mo5Z2Hk6apfY7QHZHtlBYlCx50
 Sro1qlGEZsjJK5Co7xwHwssVCI/5iGLqw+8iTF8U=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org, jonathan@marek.ca,
 airlied@linux.ie, linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, freedreno@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGZpbGVzIGEzeHhfZ3B1LmMgYW5kIGE0eHhfZ3B1LmMgaGF2ZSBpZmRlZnMgZm9yIHRoZSBP
Q01FTSBzdXBwb3J0CnRoYXQgd2FzIG1pc3NpbmcgdXBzdHJlYW0uIEFkZCB0d28gbmV3IGZ1bmN0
aW9ucyAoYWRyZW5vX2dwdV9vY21lbV9pbml0CmFuZCBhZHJlbm9fZ3B1X29jbWVtX2NsZWFudXAp
IHRoYXQgcmVtb3ZlcyBzb21lIGR1cGxpY2F0ZWQgY29kZS4KClNpZ25lZC1vZmYtYnk6IEJyaWFu
IE1hc25leSA8bWFzbmV5YkBvbnN0YXRpb24ub3JnPgotLS0KQ2hhbmdlcyBzaW5jZSB2NjoKLSBO
b25lCgpDaGFuZ2VzIHNpbmNlIHY1OgotIE5vbmUKCkNoYW5nZXMgc2luY2UgdjQ6Ci0gTm9uZQoK
Q2hhbmdlcyBzaW5jZSB2MzoKLSBOb25lCgpDaGFuZ2VzIHNpbmNlIHYyOgotIENoZWNrIGZvciAt
RU5PREVWIGVycm9yIG9mX2dldF9vY21lbSgpCi0gcmVtb3ZlIGZhaWxfY2xlYW51cF9vY21lbSBs
YWJlbCBpbiBhWzM0XXh4X2dwdV9pbml0CgpDaGFuZ2VzIHNpbmNlIHYxOgotIHJlbW92ZSBDT05G
SUdfUUNPTV9PQ01FTSAjaWZkZWZzCi0gdXNlIHVuc2lnbmVkIGxvbmcgZm9yIG1lbW9yeSBhZGRy
ZXNzZXMgaW5zdGVhZCBvZiB1aW50MzJfdAotIGFkZCAnZGVwZW5kcyBvbiBRQ09NX09DTUVNIHx8
IFFDT01fT0NNRU09bicgdG8gS2NvbmZpZwoKIGRyaXZlcnMvZ3B1L2RybS9tc20vS2NvbmZpZyAg
ICAgICAgICAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2EzeHhfZ3B1LmMg
ICB8IDI4ICsrKysrLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hM3h4
X2dwdS5oICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTR4eF9ncHUuYyAg
IHwgMjUgKysrKy0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTR4eF9n
cHUuaCAgIHwgIDMgKy0KIGRyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUuYyB8
IDQwICsrKysrKysrKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5v
L2FkcmVub19ncHUuaCB8IDEwICsrKysrKysKIDcgZmlsZXMgY2hhbmdlZCwgNjYgaW5zZXJ0aW9u
cygrKSwgNDQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9L
Y29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL21zbS9LY29uZmlnCmluZGV4IDljMzdlNGRlNTg5Ni4u
YjNkM2IyMTcyNjU5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL0tjb25maWcKKysr
IGIvZHJpdmVycy9ncHUvZHJtL21zbS9LY29uZmlnCkBAIC03LDYgKzcsNyBAQCBjb25maWcgRFJN
X01TTQogCWRlcGVuZHMgb24gT0YgJiYgQ09NTU9OX0NMSwogCWRlcGVuZHMgb24gTU1VCiAJZGVw
ZW5kcyBvbiBJTlRFUkNPTk5FQ1QgfHwgIUlOVEVSQ09OTkVDVAorCWRlcGVuZHMgb24gUUNPTV9P
Q01FTSB8fCBRQ09NX09DTUVNPW4KIAlzZWxlY3QgUUNPTV9NRFRfTE9BREVSIGlmIEFSQ0hfUUNP
TQogCXNlbGVjdCBSRUdVTEFUT1IKIAlzZWxlY3QgRFJNX0tNU19IRUxQRVIKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2EzeHhfZ3B1LmMgYi9kcml2ZXJzL2dwdS9kcm0v
bXNtL2FkcmVuby9hM3h4X2dwdS5jCmluZGV4IDVmN2U5ODAyOGVhZi4uN2FkMTQ5MzdmY2RmIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hM3h4X2dwdS5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2EzeHhfZ3B1LmMKQEAgLTYsMTAgKzYsNiBAQAogICog
Q29weXJpZ2h0IChjKSAyMDE0IFRoZSBMaW51eCBGb3VuZGF0aW9uLiBBbGwgcmlnaHRzIHJlc2Vy
dmVkLgogICovCiAKLSNpZmRlZiBDT05GSUdfTVNNX09DTUVNCi0jICBpbmNsdWRlIDxtYWNoL29j
bWVtLmg+Ci0jZW5kaWYKLQogI2luY2x1ZGUgImEzeHhfZ3B1LmgiCiAKICNkZWZpbmUgQTNYWF9J
TlQwX01BU0sgXApAQCAtMTk1LDkgKzE5MSw5IEBAIHN0YXRpYyBpbnQgYTN4eF9od19pbml0KHN0
cnVjdCBtc21fZ3B1ICpncHUpCiAJCWdwdV93cml0ZShncHUsIFJFR19BM1hYX1JCQk1fR1BSMF9D
VEwsIDB4MDAwMDAwMDApOwogCiAJLyogU2V0IHRoZSBPQ01FTSBiYXNlIGFkZHJlc3MgZm9yIEEz
MzAsIGV0YyAqLwotCWlmIChhM3h4X2dwdS0+b2NtZW1faGRsKSB7CisJaWYgKGEzeHhfZ3B1LT5v
Y21lbS5oZGwpIHsKIAkJZ3B1X3dyaXRlKGdwdSwgUkVHX0EzWFhfUkJfR01FTV9CQVNFX0FERFIs
Ci0JCQkodW5zaWduZWQgaW50KShhM3h4X2dwdS0+b2NtZW1fYmFzZSA+PiAxNCkpOworCQkJKHVu
c2lnbmVkIGludCkoYTN4eF9ncHUtPm9jbWVtLmJhc2UgPj4gMTQpKTsKIAl9CiAKIAkvKiBUdXJu
IG9uIHBlcmZvcm1hbmNlIGNvdW50ZXJzOiAqLwpAQCAtMzE4LDEwICszMTQsNyBAQCBzdGF0aWMg
dm9pZCBhM3h4X2Rlc3Ryb3koc3RydWN0IG1zbV9ncHUgKmdwdSkKIAogCWFkcmVub19ncHVfY2xl
YW51cChhZHJlbm9fZ3B1KTsKIAotI2lmZGVmIENPTkZJR19NU01fT0NNRU0KLQlpZiAoYTN4eF9n
cHUtPm9jbWVtX2Jhc2UpCi0JCW9jbWVtX2ZyZWUoT0NNRU1fR1JBUEhJQ1MsIGEzeHhfZ3B1LT5v
Y21lbV9oZGwpOwotI2VuZGlmCisJYWRyZW5vX2dwdV9vY21lbV9jbGVhbnVwKCZhM3h4X2dwdS0+
b2NtZW0pOwogCiAJa2ZyZWUoYTN4eF9ncHUpOwogfQpAQCAtNDk0LDE3ICs0ODcsMTAgQEAgc3Ry
dWN0IG1zbV9ncHUgKmEzeHhfZ3B1X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldikKIAogCS8q
IGlmIG5lZWRlZCwgYWxsb2NhdGUgZ21lbTogKi8KIAlpZiAoYWRyZW5vX2lzX2EzMzAoYWRyZW5v
X2dwdSkpIHsKLSNpZmRlZiBDT05GSUdfTVNNX09DTUVNCi0JCS8qIFRPRE8gdGhpcyBpcyBkaWZm
ZXJlbnQvbWlzc2luZyB1cHN0cmVhbTogKi8KLQkJc3RydWN0IG9jbWVtX2J1ZiAqb2NtZW1faGRs
ID0KLQkJCQlvY21lbV9hbGxvY2F0ZShPQ01FTV9HUkFQSElDUywgYWRyZW5vX2dwdS0+Z21lbSk7
Ci0KLQkJYTN4eF9ncHUtPm9jbWVtX2hkbCA9IG9jbWVtX2hkbDsKLQkJYTN4eF9ncHUtPm9jbWVt
X2Jhc2UgPSBvY21lbV9oZGwtPmFkZHI7Ci0JCWFkcmVub19ncHUtPmdtZW0gPSBvY21lbV9oZGwt
PmxlbjsKLQkJREJHKCJ1c2luZyAlZEsgb2YgT0NNRU0gYXQgMHglMDh4IiwgYWRyZW5vX2dwdS0+
Z21lbSAvIDEwMjQsCi0JCQkJYTN4eF9ncHUtPm9jbWVtX2Jhc2UpOwotI2VuZGlmCisJCXJldCA9
IGFkcmVub19ncHVfb2NtZW1faW5pdCgmYWRyZW5vX2dwdS0+YmFzZS5wZGV2LT5kZXYsCisJCQkJ
CSAgICBhZHJlbm9fZ3B1LCAmYTN4eF9ncHUtPm9jbWVtKTsKKwkJaWYgKHJldCkKKwkJCWdvdG8g
ZmFpbDsKIAl9CiAKIAlpZiAoIWdwdS0+YXNwYWNlKSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vbXNtL2FkcmVuby9hM3h4X2dwdS5oIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8v
YTN4eF9ncHUuaAppbmRleCA1ZGMzM2U1ZWE1M2IuLmM1NTVmYjEzZTBkNyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTN4eF9ncHUuaAorKysgYi9kcml2ZXJzL2dwdS9k
cm0vbXNtL2FkcmVuby9hM3h4X2dwdS5oCkBAIC0xOSw4ICsxOSw3IEBAIHN0cnVjdCBhM3h4X2dw
dSB7CiAJc3RydWN0IGFkcmVub19ncHUgYmFzZTsKIAogCS8qIGlmIE9DTUVNIGlzIHVzZWQgZm9y
IEdNRU06ICovCi0JdWludDMyX3Qgb2NtZW1fYmFzZTsKLQl2b2lkICpvY21lbV9oZGw7CisJc3Ry
dWN0IGFkcmVub19vY21lbSBvY21lbTsKIH07CiAjZGVmaW5lIHRvX2EzeHhfZ3B1KHgpIGNvbnRh
aW5lcl9vZih4LCBzdHJ1Y3QgYTN4eF9ncHUsIGJhc2UpCiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9tc20vYWRyZW5vL2E0eHhfZ3B1LmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVu
by9hNHh4X2dwdS5jCmluZGV4IGFiMmI3NTI1NjZkOC4uYjAxMzg4YTllODllIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNHh4X2dwdS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9tc20vYWRyZW5vL2E0eHhfZ3B1LmMKQEAgLTIsOSArMiw2IEBACiAvKiBDb3B5cmlnaHQg
KGMpIDIwMTQgVGhlIExpbnV4IEZvdW5kYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAgKi8K
ICNpbmNsdWRlICJhNHh4X2dwdS5oIgotI2lmZGVmIENPTkZJR19NU01fT0NNRU0KLSMgIGluY2x1
ZGUgPHNvYy9xY29tL29jbWVtLmg+Ci0jZW5kaWYKIAogI2RlZmluZSBBNFhYX0lOVDBfTUFTSyBc
CiAJKEE0WFhfSU5UMF9SQkJNX0FIQl9FUlJPUiB8ICAgICAgICBcCkBAIC0xODgsNyArMTg1LDcg
QEAgc3RhdGljIGludCBhNHh4X2h3X2luaXQoc3RydWN0IG1zbV9ncHUgKmdwdSkKIAkJCSgxIDw8
IDMwKSB8IDB4RkZGRik7CiAKIAlncHVfd3JpdGUoZ3B1LCBSRUdfQTRYWF9SQl9HTUVNX0JBU0Vf
QUREUiwKLQkJCSh1bnNpZ25lZCBpbnQpKGE0eHhfZ3B1LT5vY21lbV9iYXNlID4+IDE0KSk7CisJ
CQkodW5zaWduZWQgaW50KShhNHh4X2dwdS0+b2NtZW0uYmFzZSA+PiAxNCkpOwogCiAJLyogVHVy
biBvbiBwZXJmb3JtYW5jZSBjb3VudGVyczogKi8KIAlncHVfd3JpdGUoZ3B1LCBSRUdfQTRYWF9S
QkJNX1BFUkZDVFJfQ1RMLCAweDAxKTsKQEAgLTMxOCwxMCArMzE1LDcgQEAgc3RhdGljIHZvaWQg
YTR4eF9kZXN0cm95KHN0cnVjdCBtc21fZ3B1ICpncHUpCiAKIAlhZHJlbm9fZ3B1X2NsZWFudXAo
YWRyZW5vX2dwdSk7CiAKLSNpZmRlZiBDT05GSUdfTVNNX09DTUVNCi0JaWYgKGE0eHhfZ3B1LT5v
Y21lbV9iYXNlKQotCQlvY21lbV9mcmVlKE9DTUVNX0dSQVBISUNTLCBhNHh4X2dwdS0+b2NtZW1f
aGRsKTsKLSNlbmRpZgorCWFkcmVub19ncHVfb2NtZW1fY2xlYW51cCgmYTR4eF9ncHUtPm9jbWVt
KTsKIAogCWtmcmVlKGE0eHhfZ3B1KTsKIH0KQEAgLTU3OCwxNyArNTcyLDEwIEBAIHN0cnVjdCBt
c21fZ3B1ICphNHh4X2dwdV9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiAKIAkvKiBpZiBu
ZWVkZWQsIGFsbG9jYXRlIGdtZW06ICovCiAJaWYgKGFkcmVub19pc19hNHh4KGFkcmVub19ncHUp
KSB7Ci0jaWZkZWYgQ09ORklHX01TTV9PQ01FTQotCQkvKiBUT0RPIHRoaXMgaXMgZGlmZmVyZW50
L21pc3NpbmcgdXBzdHJlYW06ICovCi0JCXN0cnVjdCBvY21lbV9idWYgKm9jbWVtX2hkbCA9Ci0J
CQkJb2NtZW1fYWxsb2NhdGUoT0NNRU1fR1JBUEhJQ1MsIGFkcmVub19ncHUtPmdtZW0pOwotCi0J
CWE0eHhfZ3B1LT5vY21lbV9oZGwgPSBvY21lbV9oZGw7Ci0JCWE0eHhfZ3B1LT5vY21lbV9iYXNl
ID0gb2NtZW1faGRsLT5hZGRyOwotCQlhZHJlbm9fZ3B1LT5nbWVtID0gb2NtZW1faGRsLT5sZW47
Ci0JCURCRygidXNpbmcgJWRLIG9mIE9DTUVNIGF0IDB4JTA4eCIsIGFkcmVub19ncHUtPmdtZW0g
LyAxMDI0LAotCQkJCWE0eHhfZ3B1LT5vY21lbV9iYXNlKTsKLSNlbmRpZgorCQlyZXQgPSBhZHJl
bm9fZ3B1X29jbWVtX2luaXQoZGV2LT5kZXYsIGFkcmVub19ncHUsCisJCQkJCSAgICAmYTR4eF9n
cHUtPm9jbWVtKTsKKwkJaWYgKHJldCkKKwkJCWdvdG8gZmFpbDsKIAl9CiAKIAlpZiAoIWdwdS0+
YXNwYWNlKSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNHh4X2dw
dS5oIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTR4eF9ncHUuaAppbmRleCBkNTA2MzEx
ZWUyNDAuLmEwMTQ0OGNiYTJlYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJl
bm8vYTR4eF9ncHUuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNHh4X2dwdS5o
CkBAIC0xNiw4ICsxNiw3IEBAIHN0cnVjdCBhNHh4X2dwdSB7CiAJc3RydWN0IGFkcmVub19ncHUg
YmFzZTsKIAogCS8qIGlmIE9DTUVNIGlzIHVzZWQgZm9yIEdNRU06ICovCi0JdWludDMyX3Qgb2Nt
ZW1fYmFzZTsKLQl2b2lkICpvY21lbV9oZGw7CisJc3RydWN0IGFkcmVub19vY21lbSBvY21lbTsK
IH07CiAjZGVmaW5lIHRvX2E0eHhfZ3B1KHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3QgYTR4eF9n
cHUsIGJhc2UpCiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVu
b19ncHUuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUuYwppbmRleCAw
NDhjOGJlNDI2ZjMuLjA3ODNlNGI1NDg2YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21z
bS9hZHJlbm8vYWRyZW5vX2dwdS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2Fk
cmVub19ncHUuYwpAQCAtMTQsNiArMTQsNyBAQAogI2luY2x1ZGUgPGxpbnV4L3BtX29wcC5oPgog
I2luY2x1ZGUgPGxpbnV4L3NsYWIuaD4KICNpbmNsdWRlIDxsaW51eC9zb2MvcWNvbS9tZHRfbG9h
ZGVyLmg+CisjaW5jbHVkZSA8c29jL3Fjb20vb2NtZW0uaD4KICNpbmNsdWRlICJhZHJlbm9fZ3B1
LmgiCiAjaW5jbHVkZSAibXNtX2dlbS5oIgogI2luY2x1ZGUgIm1zbV9tbXUuaCIKQEAgLTg5Myw2
ICs4OTQsNDUgQEAgc3RhdGljIGludCBhZHJlbm9fZ2V0X3B3cmxldmVscyhzdHJ1Y3QgZGV2aWNl
ICpkZXYsCiAJcmV0dXJuIDA7CiB9CiAKK2ludCBhZHJlbm9fZ3B1X29jbWVtX2luaXQoc3RydWN0
IGRldmljZSAqZGV2LCBzdHJ1Y3QgYWRyZW5vX2dwdSAqYWRyZW5vX2dwdSwKKwkJCSAgc3RydWN0
IGFkcmVub19vY21lbSAqYWRyZW5vX29jbWVtKQoreworCXN0cnVjdCBvY21lbV9idWYgKm9jbWVt
X2hkbDsKKwlzdHJ1Y3Qgb2NtZW0gKm9jbWVtOworCisJb2NtZW0gPSBvZl9nZXRfb2NtZW0oZGV2
KTsKKwlpZiAoSVNfRVJSKG9jbWVtKSkgeworCQlpZiAoUFRSX0VSUihvY21lbSkgPT0gLUVOT0RF
VikgeworCQkJLyoKKwkJCSAqIFJldHVybiBzdWNjZXNzIHNpbmNlIGVpdGhlciB0aGUgb2NtZW0g
cHJvcGVydHkgd2FzCisJCQkgKiBub3Qgc3BlY2lmaWVkIGluIGRldmljZSB0cmVlLCBvciBvY21l
bSBzdXBwb3J0IGlzCisJCQkgKiBub3QgY29tcGlsZWQgaW50byB0aGUga2VybmVsLgorCQkJICov
CisJCQlyZXR1cm4gMDsKKwkJfQorCisJCXJldHVybiBQVFJfRVJSKG9jbWVtKTsKKwl9CisKKwlv
Y21lbV9oZGwgPSBvY21lbV9hbGxvY2F0ZShvY21lbSwgT0NNRU1fR1JBUEhJQ1MsIGFkcmVub19n
cHUtPmdtZW0pOworCWlmIChJU19FUlIob2NtZW1faGRsKSkKKwkJcmV0dXJuIFBUUl9FUlIob2Nt
ZW1faGRsKTsKKworCWFkcmVub19vY21lbS0+b2NtZW0gPSBvY21lbTsKKwlhZHJlbm9fb2NtZW0t
PmJhc2UgPSBvY21lbV9oZGwtPmFkZHI7CisJYWRyZW5vX29jbWVtLT5oZGwgPSBvY21lbV9oZGw7
CisJYWRyZW5vX2dwdS0+Z21lbSA9IG9jbWVtX2hkbC0+bGVuOworCisJcmV0dXJuIDA7Cit9CisK
K3ZvaWQgYWRyZW5vX2dwdV9vY21lbV9jbGVhbnVwKHN0cnVjdCBhZHJlbm9fb2NtZW0gKmFkcmVu
b19vY21lbSkKK3sKKwlpZiAoYWRyZW5vX29jbWVtICYmIGFkcmVub19vY21lbS0+YmFzZSkKKwkJ
b2NtZW1fZnJlZShhZHJlbm9fb2NtZW0tPm9jbWVtLCBPQ01FTV9HUkFQSElDUywKKwkJCSAgIGFk
cmVub19vY21lbS0+aGRsKTsKK30KKwogaW50IGFkcmVub19ncHVfaW5pdChzdHJ1Y3QgZHJtX2Rl
dmljZSAqZHJtLCBzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2LAogCQlzdHJ1Y3QgYWRyZW5v
X2dwdSAqYWRyZW5vX2dwdSwKIAkJY29uc3Qgc3RydWN0IGFkcmVub19ncHVfZnVuY3MgKmZ1bmNz
LCBpbnQgbnJfcmluZ3MpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9h
ZHJlbm9fZ3B1LmggYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hZHJlbm9fZ3B1LmgKaW5k
ZXggYzc0NDFmYjgzMTNlLi5kMjI1YThhOTJlNTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9tc20vYWRyZW5vL2FkcmVub19ncHUuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVu
by9hZHJlbm9fZ3B1LmgKQEAgLTEyNiw2ICsxMjYsMTIgQEAgc3RydWN0IGFkcmVub19ncHUgewog
fTsKICNkZWZpbmUgdG9fYWRyZW5vX2dwdSh4KSBjb250YWluZXJfb2YoeCwgc3RydWN0IGFkcmVu
b19ncHUsIGJhc2UpCiAKK3N0cnVjdCBhZHJlbm9fb2NtZW0geworCXN0cnVjdCBvY21lbSAqb2Nt
ZW07CisJdW5zaWduZWQgbG9uZyBiYXNlOworCXZvaWQgKmhkbDsKK307CisKIC8qIHBsYXRmb3Jt
IGNvbmZpZyBkYXRhIChpZS4gZnJvbSBEVCwgb3IgcGRhdGEpICovCiBzdHJ1Y3QgYWRyZW5vX3Bs
YXRmb3JtX2NvbmZpZyB7CiAJc3RydWN0IGFkcmVub19yZXYgcmV2OwpAQCAtMjM2LDYgKzI0Miwx
MCBAQCB2b2lkIGFkcmVub19kdW1wKHN0cnVjdCBtc21fZ3B1ICpncHUpOwogdm9pZCBhZHJlbm9f
d2FpdF9yaW5nKHN0cnVjdCBtc21fcmluZ2J1ZmZlciAqcmluZywgdWludDMyX3QgbmR3b3Jkcyk7
CiBzdHJ1Y3QgbXNtX3JpbmdidWZmZXIgKmFkcmVub19hY3RpdmVfcmluZyhzdHJ1Y3QgbXNtX2dw
dSAqZ3B1KTsKIAoraW50IGFkcmVub19ncHVfb2NtZW1faW5pdChzdHJ1Y3QgZGV2aWNlICpkZXYs
IHN0cnVjdCBhZHJlbm9fZ3B1ICphZHJlbm9fZ3B1LAorCQkJICBzdHJ1Y3QgYWRyZW5vX29jbWVt
ICpvY21lbSk7Cit2b2lkIGFkcmVub19ncHVfb2NtZW1fY2xlYW51cChzdHJ1Y3QgYWRyZW5vX29j
bWVtICpvY21lbSk7CisKIGludCBhZHJlbm9fZ3B1X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRy
bSwgc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiwKIAkJc3RydWN0IGFkcmVub19ncHUgKmdw
dSwgY29uc3Qgc3RydWN0IGFkcmVub19ncHVfZnVuY3MgKmZ1bmNzLAogCQlpbnQgbnJfcmluZ3Mp
OwotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2
ZWw=
