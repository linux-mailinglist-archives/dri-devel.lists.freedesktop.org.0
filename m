Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D8831B14EF
	for <lists+dri-devel@lfdr.de>; Thu, 12 Sep 2019 21:51:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1AF2F6EE13;
	Thu, 12 Sep 2019 19:51:40 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id ABE6F6EE10;
 Thu, 12 Sep 2019 19:51:38 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 12 Sep 2019 12:51:37 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,492,1559545200"; d="scan'208";a="179465482"
Received: from josouza-mobl.jf.intel.com (HELO josouza-MOBL.intel.com)
 ([10.24.9.135])
 by orsmga008.jf.intel.com with ESMTP; 12 Sep 2019 12:51:37 -0700
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org,
	dri-devel@lists.freedesktop.org
Subject: [PATCH 1/2] drm/connector: Share with non-atomic drivers the function
 to get the single encoder
Date: Thu, 12 Sep 2019 12:51:31 -0700
Message-Id: <20190912195132.62574-1-jose.souza@intel.com>
X-Mailer: git-send-email 2.23.0
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyAzIG5vbi1hdG9taWMgZHJpdmVycyBhbGwgaGF2ZSB0aGUgc2FtZSBmdW5jdGlvbiBnZXR0
aW5nIHRoZQpvbmx5IGVuY29kZXIgYXZhaWxhYmxlIGluIHRoZSBjb25uZWN0b3IsIGFsc28gYXRv
bWljIGRyaXZlcnMgaGF2ZQp0aGlzIGZhbGxiYWNrLiBTbyBtb3ZpbmcgaXQgYSBjb21tb24gcGxh
Y2UgYW5kIHNoYXJpbmcgYmV0d2VlbiBhdG9taWMKYW5kIG5vbi1hdG9taWMgZHJpdmVycy4KCldo
aWxlIGF0IGl0IEkgYWxzbyByZW1vdmVkIHRoZSBtZW50aW9uIG9mCmRybV9hdG9taWNfaGVscGVy
X2Jlc3RfZW5jb2RlcigpIHRoYXQgd2FzIHJlbmFtZWQgaW4KY29tbWl0IDI5N2UzMGI1ZDliNiAo
ImRybS9hdG9taWMtaGVscGVyOiBVbmV4cG9ydApkcm1fYXRvbWljX2hlbHBlcl9iZXN0X2VuY29k
ZXIiKS4KCnYzOiBtb3ZpbmcgZHJtX2Nvbm5lY3Rvcl9nZXRfc2luZ2xlX2VuY29kZXIgdG8gZHJt
X2ttc19oZWxwZXIgbW9kdWxlCgpTdWdnZXN0ZWQtYnk6IFZpbGxlIFN5cmrDpGzDpCA8dmlsbGUu
c3lyamFsYUBsaW51eC5pbnRlbC5jb20+CkNjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmph
bGFAbGludXguaW50ZWwuY29tPgpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBmZnds
bC5jaD4KQ2M6IExhdXJlbnQgUGluY2hhcnQgPGxhdXJlbnQucGluY2hhcnRAaWRlYXNvbmJvYXJk
LmNvbT4KQ2M6IGRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKQ2M6IGludGVsLWdmeEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKU2lnbmVkLW9mZi1ieTogSm9zw6kgUm9iZXJ0byBkZSBTb3V6
YSA8am9zZS5zb3V6YUBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbW9k
ZS5jICAgICAgICAgICAgIHwgMTIgLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2F0
b21pY19oZWxwZXIuYyAgICAgICAgfCAxNSArKy0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9kcm1fY3J0Y19oZWxwZXIuYyAgICAgICAgICB8IDE3ICsrKysrKysrKysrKysrKystCiBkcml2
ZXJzL2dwdS9kcm0vZHJtX2NydGNfaGVscGVyX2ludGVybmFsLmggfCAgMyArKysKIGRyaXZlcnMv
Z3B1L2RybS9tZ2FnMjAwL21nYWcyMDBfbW9kZS5jICAgICB8IDExIC0tLS0tLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vdWRsL3VkbF9jb25uZWN0b3IuYyAgICAgICAgfCAgOCAtLS0tLS0tLQogaW5j
bHVkZS9kcm0vZHJtX21vZGVzZXRfaGVscGVyX3Z0YWJsZXMuaCAgIHwgIDYgKysrLS0tCiA3IGZp
bGVzIGNoYW5nZWQsIDI0IGluc2VydGlvbnMoKyksIDQ4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hc3QvYXN0X21vZGUuYyBiL2RyaXZlcnMvZ3B1L2RybS9hc3Qv
YXN0X21vZGUuYwppbmRleCBkMzQ5YzcyMTUwMWMuLmVlZjk1ZTFhZjA2YiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hc3Qv
YXN0X21vZGUuYwpAQCAtNjg3LDE3ICs2ODcsNiBAQCBzdGF0aWMgdm9pZCBhc3RfZW5jb2Rlcl9k
ZXN0cm95KHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKIAlrZnJlZShlbmNvZGVyKTsKIH0K
IAotCi1zdGF0aWMgc3RydWN0IGRybV9lbmNvZGVyICphc3RfYmVzdF9zaW5nbGVfZW5jb2Rlcihz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQotewotCWludCBlbmNfaWQgPSBjb25uZWN0
b3ItPmVuY29kZXJfaWRzWzBdOwotCS8qIHBpY2sgdGhlIGVuY29kZXIgaWRzICovCi0JaWYgKGVu
Y19pZCkKLQkJcmV0dXJuIGRybV9lbmNvZGVyX2ZpbmQoY29ubmVjdG9yLT5kZXYsIE5VTEwsIGVu
Y19pZCk7Ci0JcmV0dXJuIE5VTEw7Ci19Ci0KLQogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZW5j
b2Rlcl9mdW5jcyBhc3RfZW5jX2Z1bmNzID0gewogCS5kZXN0cm95ID0gYXN0X2VuY29kZXJfZGVz
dHJveSwKIH07CkBAIC04NDcsNyArODM2LDYgQEAgc3RhdGljIHZvaWQgYXN0X2Nvbm5lY3Rvcl9k
ZXN0cm95KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCiBzdGF0aWMgY29uc3Qgc3Ry
dWN0IGRybV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzIGFzdF9jb25uZWN0b3JfaGVscGVyX2Z1bmNz
ID0gewogCS5tb2RlX3ZhbGlkID0gYXN0X21vZGVfdmFsaWQsCiAJLmdldF9tb2RlcyA9IGFzdF9n
ZXRfbW9kZXMsCi0JLmJlc3RfZW5jb2RlciA9IGFzdF9iZXN0X3NpbmdsZV9lbmNvZGVyLAogfTsK
IAogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIGFzdF9jb25uZWN0b3Jf
ZnVuY3MgPSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19oZWxwZXIu
YyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX2hlbHBlci5jCmluZGV4IDQ3MDY0MzlmYjQ5
MC4uOWQ3ZTRkYTZjMjkyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19o
ZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19oZWxwZXIuYwpAQCAtOTcs
MTcgKzk3LDYgQEAgZHJtX2F0b21pY19oZWxwZXJfcGxhbmVfY2hhbmdlZChzdHJ1Y3QgZHJtX2F0
b21pY19zdGF0ZSAqc3RhdGUsCiAJfQogfQogCi0vKgotICogRm9yIGNvbm5lY3RvcnMgdGhhdCBz
dXBwb3J0IG11bHRpcGxlIGVuY29kZXJzLCBlaXRoZXIgdGhlCi0gKiAuYXRvbWljX2Jlc3RfZW5j
b2RlcigpIG9yIC5iZXN0X2VuY29kZXIoKSBvcGVyYXRpb24gbXVzdCBiZSBpbXBsZW1lbnRlZC4K
LSAqLwotc3RhdGljIHN0cnVjdCBkcm1fZW5jb2RlciAqCi1waWNrX3NpbmdsZV9lbmNvZGVyX2Zv
cl9jb25uZWN0b3Ioc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKLXsKLQlXQVJOX09O
KGNvbm5lY3Rvci0+ZW5jb2Rlcl9pZHNbMV0pOwotCXJldHVybiBkcm1fZW5jb2Rlcl9maW5kKGNv
bm5lY3Rvci0+ZGV2LCBOVUxMLCBjb25uZWN0b3ItPmVuY29kZXJfaWRzWzBdKTsKLX0KLQogc3Rh
dGljIGludCBoYW5kbGVfY29uZmxpY3RpbmdfZW5jb2RlcnMoc3RydWN0IGRybV9hdG9taWNfc3Rh
dGUgKnN0YXRlLAogCQkJCSAgICAgICBib29sIGRpc2FibGVfY29uZmxpY3RpbmdfZW5jb2RlcnMp
CiB7CkBAIC0xMzUsNyArMTI0LDcgQEAgc3RhdGljIGludCBoYW5kbGVfY29uZmxpY3RpbmdfZW5j
b2RlcnMoc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlLAogCQllbHNlIGlmIChmdW5jcy0+
YmVzdF9lbmNvZGVyKQogCQkJbmV3X2VuY29kZXIgPSBmdW5jcy0+YmVzdF9lbmNvZGVyKGNvbm5l
Y3Rvcik7CiAJCWVsc2UKLQkJCW5ld19lbmNvZGVyID0gcGlja19zaW5nbGVfZW5jb2Rlcl9mb3Jf
Y29ubmVjdG9yKGNvbm5lY3Rvcik7CisJCQluZXdfZW5jb2RlciA9IGRybV9jb25uZWN0b3JfZ2V0
X3NpbmdsZV9lbmNvZGVyKGNvbm5lY3Rvcik7CiAKIAkJaWYgKG5ld19lbmNvZGVyKSB7CiAJCQlp
ZiAoZW5jb2Rlcl9tYXNrICYgZHJtX2VuY29kZXJfbWFzayhuZXdfZW5jb2RlcikpIHsKQEAgLTM1
OSw3ICszNDgsNyBAQCB1cGRhdGVfY29ubmVjdG9yX3JvdXRpbmcoc3RydWN0IGRybV9hdG9taWNf
c3RhdGUgKnN0YXRlLAogCWVsc2UgaWYgKGZ1bmNzLT5iZXN0X2VuY29kZXIpCiAJCW5ld19lbmNv
ZGVyID0gZnVuY3MtPmJlc3RfZW5jb2Rlcihjb25uZWN0b3IpOwogCWVsc2UKLQkJbmV3X2VuY29k
ZXIgPSBwaWNrX3NpbmdsZV9lbmNvZGVyX2Zvcl9jb25uZWN0b3IoY29ubmVjdG9yKTsKKwkJbmV3
X2VuY29kZXIgPSBkcm1fY29ubmVjdG9yX2dldF9zaW5nbGVfZW5jb2Rlcihjb25uZWN0b3IpOwog
CiAJaWYgKCFuZXdfZW5jb2RlcikgewogCQlEUk1fREVCVUdfQVRPTUlDKCJObyBzdWl0YWJsZSBl
bmNvZGVyIGZvdW5kIGZvciBbQ09OTkVDVE9SOiVkOiVzXVxuIiwKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9kcm1fY3J0Y19oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fY3J0Y19o
ZWxwZXIuYwppbmRleCBhNTE4MjRhN2U3YzEuLjRhNzQ0N2E1M2NlYSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2RybV9jcnRjX2hlbHBlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1f
Y3J0Y19oZWxwZXIuYwpAQCAtNDYwLDYgKzQ2MCwxNyBAQCBkcm1fY3J0Y19oZWxwZXJfZGlzYWJs
ZShzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCiAJX19kcm1faGVscGVyX2Rpc2FibGVfdW51c2VkX2Z1
bmN0aW9ucyhkZXYpOwogfQogCisvKgorICogRm9yIGNvbm5lY3RvcnMgdGhhdCBzdXBwb3J0IG11
bHRpcGxlIGVuY29kZXJzLCBlaXRoZXIgdGhlCisgKiAuYXRvbWljX2Jlc3RfZW5jb2RlcigpIG9y
IC5iZXN0X2VuY29kZXIoKSBvcGVyYXRpb24gbXVzdCBiZSBpbXBsZW1lbnRlZC4KKyAqLworc3Ry
dWN0IGRybV9lbmNvZGVyICoKK2RybV9jb25uZWN0b3JfZ2V0X3NpbmdsZV9lbmNvZGVyKHN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCit7CisJV0FSTl9PTihjb25uZWN0b3ItPmVuY29k
ZXJfaWRzWzFdKTsKKwlyZXR1cm4gZHJtX2VuY29kZXJfZmluZChjb25uZWN0b3ItPmRldiwgTlVM
TCwgY29ubmVjdG9yLT5lbmNvZGVyX2lkc1swXSk7Cit9CisKIC8qKgogICogZHJtX2NydGNfaGVs
cGVyX3NldF9jb25maWcgLSBzZXQgYSBuZXcgY29uZmlnIGZyb20gdXNlcnNwYWNlCiAgKiBAc2V0
OiBtb2RlIHNldCBjb25maWd1cmF0aW9uCkBAIC02MjUsNyArNjM2LDExIEBAIGludCBkcm1fY3J0
Y19oZWxwZXJfc2V0X2NvbmZpZyhzdHJ1Y3QgZHJtX21vZGVfc2V0ICpzZXQsCiAJCW5ld19lbmNv
ZGVyID0gY29ubmVjdG9yLT5lbmNvZGVyOwogCQlmb3IgKHJvID0gMDsgcm8gPCBzZXQtPm51bV9j
b25uZWN0b3JzOyBybysrKSB7CiAJCQlpZiAoc2V0LT5jb25uZWN0b3JzW3JvXSA9PSBjb25uZWN0
b3IpIHsKLQkJCQluZXdfZW5jb2RlciA9IGNvbm5lY3Rvcl9mdW5jcy0+YmVzdF9lbmNvZGVyKGNv
bm5lY3Rvcik7CisJCQkJaWYgKGNvbm5lY3Rvcl9mdW5jcy0+YmVzdF9lbmNvZGVyKQorCQkJCQlu
ZXdfZW5jb2RlciA9IGNvbm5lY3Rvcl9mdW5jcy0+YmVzdF9lbmNvZGVyKGNvbm5lY3Rvcik7CisJ
CQkJZWxzZQorCQkJCQluZXdfZW5jb2RlciA9IGRybV9jb25uZWN0b3JfZ2V0X3NpbmdsZV9lbmNv
ZGVyKGNvbm5lY3Rvcik7CisKIAkJCQkvKiBpZiB3ZSBjYW4ndCBnZXQgYW4gZW5jb2RlciBmb3Ig
YSBjb25uZWN0b3IKIAkJCQkgICB3ZSBhcmUgc2V0dGluZyBub3cgLSB0aGVuIGZhaWwgKi8KIAkJ
CQlpZiAobmV3X2VuY29kZXIgPT0gTlVMTCkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9k
cm1fY3J0Y19oZWxwZXJfaW50ZXJuYWwuaCBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fY3J0Y19oZWxw
ZXJfaW50ZXJuYWwuaAppbmRleCBiNWFjMTU4MWU2MjMuLmYwYTY2ZWY0N2U1YSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2RybV9jcnRjX2hlbHBlcl9pbnRlcm5hbC5oCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9kcm1fY3J0Y19oZWxwZXJfaW50ZXJuYWwuaApAQCAtNzUsMyArNzUsNiBAQCBl
bnVtIGRybV9tb2RlX3N0YXR1cyBkcm1fZW5jb2Rlcl9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fZW5j
b2RlciAqZW5jb2RlciwKIAkJCQkJICAgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICpt
b2RlKTsKIGVudW0gZHJtX21vZGVfc3RhdHVzIGRybV9jb25uZWN0b3JfbW9kZV92YWxpZChzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQkJCQkgICAgICBzdHJ1Y3QgZHJtX2Rpc3Bs
YXlfbW9kZSAqbW9kZSk7CisKK3N0cnVjdCBkcm1fZW5jb2RlciAqCitkcm1fY29ubmVjdG9yX2dl
dF9zaW5nbGVfZW5jb2RlcihzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKTsKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL21nYWcyMDBfbW9kZS5jIGIvZHJpdmVycy9n
cHUvZHJtL21nYWcyMDAvbWdhZzIwMF9tb2RlLmMKaW5kZXggNWU3NzhiNWYxYTEwLi42ODIyNjU1
NjA0NGIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL21nYWcyMDBfbW9kZS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL21nYWcyMDBfbW9kZS5jCkBAIC0xNjM4LDE2
ICsxNjM4LDYgQEAgc3RhdGljIGVudW0gZHJtX21vZGVfc3RhdHVzIG1nYV92Z2FfbW9kZV92YWxp
ZChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCXJldHVybiBNT0RFX09LOwogfQog
Ci1zdGF0aWMgc3RydWN0IGRybV9lbmNvZGVyICptZ2FfY29ubmVjdG9yX2Jlc3RfZW5jb2Rlcihz
dHJ1Y3QgZHJtX2Nvbm5lY3RvcgotCQkJCQkJICAqY29ubmVjdG9yKQotewotCWludCBlbmNfaWQg
PSBjb25uZWN0b3ItPmVuY29kZXJfaWRzWzBdOwotCS8qIHBpY2sgdGhlIGVuY29kZXIgaWRzICov
Ci0JaWYgKGVuY19pZCkKLQkJcmV0dXJuIGRybV9lbmNvZGVyX2ZpbmQoY29ubmVjdG9yLT5kZXYs
IE5VTEwsIGVuY19pZCk7Ci0JcmV0dXJuIE5VTEw7Ci19Ci0KIHN0YXRpYyB2b2lkIG1nYV9jb25u
ZWN0b3JfZGVzdHJveShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogewogCXN0cnVj
dCBtZ2FfY29ubmVjdG9yICptZ2FfY29ubmVjdG9yID0gdG9fbWdhX2Nvbm5lY3Rvcihjb25uZWN0
b3IpOwpAQCAtMTY1OSw3ICsxNjQ5LDYgQEAgc3RhdGljIHZvaWQgbWdhX2Nvbm5lY3Rvcl9kZXN0
cm95KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCiBzdGF0aWMgY29uc3Qgc3RydWN0
IGRybV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzIG1nYV92Z2FfY29ubmVjdG9yX2hlbHBlcl9mdW5j
cyA9IHsKIAkuZ2V0X21vZGVzID0gbWdhX3ZnYV9nZXRfbW9kZXMsCiAJLm1vZGVfdmFsaWQgPSBt
Z2FfdmdhX21vZGVfdmFsaWQsCi0JLmJlc3RfZW5jb2RlciA9IG1nYV9jb25uZWN0b3JfYmVzdF9l
bmNvZGVyLAogfTsKIAogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIG1n
YV92Z2FfY29ubmVjdG9yX2Z1bmNzID0gewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Vk
bC91ZGxfY29ubmVjdG9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vdWRsL3VkbF9jb25uZWN0b3IuYwpp
bmRleCBkZGI2MWE2MGM2MTAuLmI0YWUzZTg5YTdiNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL3VkbC91ZGxfY29ubmVjdG9yLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfY29u
bmVjdG9yLmMKQEAgLTkwLDEzICs5MCw2IEBAIHVkbF9kZXRlY3Qoc3RydWN0IGRybV9jb25uZWN0
b3IgKmNvbm5lY3RvciwgYm9vbCBmb3JjZSkKIAlyZXR1cm4gY29ubmVjdG9yX3N0YXR1c19jb25u
ZWN0ZWQ7CiB9CiAKLXN0YXRpYyBzdHJ1Y3QgZHJtX2VuY29kZXIqCi11ZGxfYmVzdF9zaW5nbGVf
ZW5jb2RlcihzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQotewotCWludCBlbmNfaWQg
PSBjb25uZWN0b3ItPmVuY29kZXJfaWRzWzBdOwotCXJldHVybiBkcm1fZW5jb2Rlcl9maW5kKGNv
bm5lY3Rvci0+ZGV2LCBOVUxMLCBlbmNfaWQpOwotfQotCiBzdGF0aWMgaW50IHVkbF9jb25uZWN0
b3Jfc2V0X3Byb3BlcnR5KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCiAJCQkJICAg
ICAgc3RydWN0IGRybV9wcm9wZXJ0eSAqcHJvcGVydHksCiAJCQkJICAgICAgdWludDY0X3QgdmFs
KQpAQCAtMTIwLDcgKzExMyw2IEBAIHN0YXRpYyB2b2lkIHVkbF9jb25uZWN0b3JfZGVzdHJveShz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1f
Y29ubmVjdG9yX2hlbHBlcl9mdW5jcyB1ZGxfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyA9IHsKIAku
Z2V0X21vZGVzID0gdWRsX2dldF9tb2RlcywKIAkubW9kZV92YWxpZCA9IHVkbF9tb2RlX3ZhbGlk
LAotCS5iZXN0X2VuY29kZXIgPSB1ZGxfYmVzdF9zaW5nbGVfZW5jb2RlciwKIH07CiAKIHN0YXRp
YyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9mdW5jcyB1ZGxfY29ubmVjdG9yX2Z1bmNzID0g
ewpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX21vZGVzZXRfaGVscGVyX3Z0YWJsZXMuaCBi
L2luY2x1ZGUvZHJtL2RybV9tb2Rlc2V0X2hlbHBlcl92dGFibGVzLmgKaW5kZXggNmIxOGM4YWRm
ZTlkLi5iNTU0MTJjNmNlM2EgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL2RybV9tb2Rlc2V0X2hl
bHBlcl92dGFibGVzLmgKKysrIGIvaW5jbHVkZS9kcm0vZHJtX21vZGVzZXRfaGVscGVyX3Z0YWJs
ZXMuaApAQCAtOTU1LDggKzk1NSw4IEBAIHN0cnVjdCBkcm1fY29ubmVjdG9yX2hlbHBlcl9mdW5j
cyB7CiAJICogQGF0b21pY19iZXN0X2VuY29kZXIuCiAJICoKIAkgKiBZb3UgY2FuIGxlYXZlIHRo
aXMgZnVuY3Rpb24gdG8gTlVMTCBpZiB0aGUgY29ubmVjdG9yIGlzIG9ubHkKLQkgKiBhdHRhY2hl
ZCB0byBhIHNpbmdsZSBlbmNvZGVyIGFuZCB5b3UgYXJlIHVzaW5nIHRoZSBhdG9taWMgaGVscGVy
cy4KLQkgKiBJbiB0aGlzIGNhc2UsIHRoZSBjb3JlIHdpbGwgY2FsbCBkcm1fYXRvbWljX2hlbHBl
cl9iZXN0X2VuY29kZXIoKQorCSAqIGF0dGFjaGVkIHRvIGEgc2luZ2xlIGVuY29kZXIuCisJICog
SW4gdGhpcyBjYXNlLCB0aGUgY29yZSB3aWxsIGNhbGwgZHJtX2Nvbm5lY3Rvcl9nZXRfc2luZ2xl
X2VuY29kZXIoKQogCSAqIGZvciB5b3UuCiAJICoKIAkgKiBSRVRVUk5TOgpAQCAtOTc3LDcgKzk3
Nyw3IEBAIHN0cnVjdCBkcm1fY29ubmVjdG9yX2hlbHBlcl9mdW5jcyB7CiAJICoKIAkgKiBUaGlz
IGZ1bmN0aW9uIGlzIHVzZWQgYnkgZHJtX2F0b21pY19oZWxwZXJfY2hlY2tfbW9kZXNldCgpLgog
CSAqIElmIGl0IGlzIG5vdCBpbXBsZW1lbnRlZCwgdGhlIGNvcmUgd2lsbCBmYWxsYmFjayB0byBA
YmVzdF9lbmNvZGVyCi0JICogKG9yIGRybV9hdG9taWNfaGVscGVyX2Jlc3RfZW5jb2RlcigpIGlm
IEBiZXN0X2VuY29kZXIgaXMgTlVMTCkuCisJICogKG9yIGRybV9jb25uZWN0b3JfZ2V0X3Npbmds
ZV9lbmNvZGVyKCkgaWYgQGJlc3RfZW5jb2RlciBpcyBOVUxMKS4KIAkgKgogCSAqIE5PVEU6CiAJ
ICoKLS0gCjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
