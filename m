Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1E110DB07B
	for <lists+dri-devel@lfdr.de>; Thu, 17 Oct 2019 16:52:14 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2F0A76EAB3;
	Thu, 17 Oct 2019 14:52:11 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd41.google.com (mail-io1-xd41.google.com
 [IPv6:2607:f8b0:4864:20::d41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5EC9B6EAB3
 for <dri-devel@lists.freedesktop.org>; Thu, 17 Oct 2019 14:52:09 +0000 (UTC)
Received: by mail-io1-xd41.google.com with SMTP id v2so3309033iob.10
 for <dri-devel@lists.freedesktop.org>; Thu, 17 Oct 2019 07:52:09 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=W5rIB1/t8sIUdGpNtAI739ICdxaYf3wjiycVoir8Jro=;
 b=SQBd5FWFfLynqxq9juMj/QJC7cLi6s++4iIIyvpL3RmY1Wlwr36QDMKT8ktHCGLV1Q
 5asElnYJYbmUsBwEChOBvYtRI6eZgrJFBeklammrxX/rO1WbwhF59LglJgnOpS3bekk4
 C4IzZxBJJC6mJ8dXLFNPuFD5xuoa9IytvG0Ok2GSXdg0Sde9Ntp0uubqmfsEll2vSMnk
 8onPlN7QPO2JspHlNOAsjni5iYm2p0ljXnWfh5bFikKnK/JNDTLq0ufqc76XnEN7kTkR
 7J7sJGHQ4w9ymVfsFN+95EZSiiQSq1H+mGHwn/4Ev5WjDTdvuHr/fhjMZ3n4hIPuf+D1
 mftg==
X-Gm-Message-State: APjAAAV0U9LAL4Von4/KliJaaifm8lA3gattT1o7bPneuRcnno9tUS2k
 LgSFhz74alM75/nZYSK5ycMTFfw9PNRfcAXuqhE=
X-Google-Smtp-Source: APXvYqxTq7E9uML16r9kKJF8ASS9oY+BwfWyajRYBmilJaGQnynoqeYFs9pN5c6kQd3pP+DgCnyhbUeReC9/dEiHSG0=
X-Received: by 2002:a5d:9952:: with SMTP id v18mr3218550ios.58.1571323928466; 
 Thu, 17 Oct 2019 07:52:08 -0700 (PDT)
MIME-Version: 1.0
References: <20191017081059.31761-1-u.kleine-koenig@pengutronix.de>
In-Reply-To: <20191017081059.31761-1-u.kleine-koenig@pengutronix.de>
From: Adam Ford <aford173@gmail.com>
Date: Thu, 17 Oct 2019 09:51:57 -0500
Message-ID: <CAHCN7x+HpUyu93RNi_HbK7jc5jsbW5HKdNtxg8oLv25m-ak-rA@mail.gmail.com>
Subject: Re: [PATCH] backlight: pwm_bl: configure pwm only once per backlight
 toggle
To: =?UTF-8?Q?Uwe_Kleine=2DK=C3=B6nig?= <u.kleine-koenig@pengutronix.de>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=W5rIB1/t8sIUdGpNtAI739ICdxaYf3wjiycVoir8Jro=;
 b=RTMTA8GOIBI91VVgXfZfHh7lhT0JPGsV5B5ZaFwe6PIW1IqhixNjzqYULFch2h6lSL
 xyVvuGGtkETW+AuDqp5hbaRKRKJTJCqT1BS+YP6KqPODYanBwLY2eo+8PEbWYOEVMdyt
 UO4fHXSkBCNySrjvQePmVO3hQIXAb6DxUCYT7r961ARqY1B4Bjh/U7iBshjus7KwKJRT
 BxbkV3jRcCChMm7JENRXPEKSJ9yGnKPbF6EmOkI8hXVjZKAYXJznhQA+2n5jk29OpDdA
 UtD3wss/1d1+pPpDDsyqIAGI0Wjt8qrI1lFbS4PKMDJRXtp3f9Rf1+U/82Raog+VWrbM
 bAgA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-pwm@vger.kernel.org, Daniel Thompson <daniel.thompson@linaro.org>,
 Jingoo Han <jingoohan1@gmail.com>, linux-fbdev@vger.kernel.org,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Thierry Reding <thierry.reding@gmail.com>,
 Sascha Hauer <kernel@pengutronix.de>,
 Enric Balletbo i Serra <enric.balletbo@collabora.com>,
 Lee Jones <lee.jones@linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBPY3QgMTcsIDIwMTkgYXQgMzoxMSBBTSBVd2UgS2xlaW5lLUvDtm5pZwo8dS5rbGVp
bmUta29lbmlnQHBlbmd1dHJvbml4LmRlPiB3cm90ZToKPgo+IEEgcHJldmlvdXMgY2hhbmdlIGlu
IHRoZSBwd20gY29yZSAobmFtZWx5IDAxY2NmOTAzZWRkNiAoInB3bTogTGV0Cj4gcHdtX2dldF9z
dGF0ZSgpIHJldHVybiB0aGUgbGFzdCBpbXBsZW1lbnRlZCBzdGF0ZSIpKSBjaGFuZ2VkIHRoZQo+
IHNlbWFudGljIG9mIHB3bV9nZXRfc3RhdGUoKSBhbmQgZGlzY2xvc2VkIGFuIChhcyBpdCBzZWVt
cykgY29tbW9uCj4gcHJvYmxlbSBpbiBsb3dsZXZlbCBQV00gZHJpdmVycy4gQnkgbm90IHJlbHlp
bmcgb24gdGhlIHBlcmlvZCBhbmQgZHV0eQo+IGN5Y2xlIGJlaW5nIHJldHJpZXZhYmxlIGZyb20g
YSBkaXNhYmxlZCBQV00gdGhpcyB0eXBlIG9mIHByb2JsZW0gaXMKPiB3b3JrZWQgYXJvdW5kLgo+
Cj4gQXBhcnQgZnJvbSB0aGlzIGlzc3VlIG9ubHkgY2FsbGluZyB0aGUgcHdtX2dldF9zdGF0ZS9w
d21fYXBwbHlfc3RhdGUKPiBjb21ibyBvbmNlIGlzIGFsc28gbW9yZSBlZmZlY3RpdmUuCgpMb29r
aW5nIGF0IHRoZSBwd20gY29yZSBmaWxlIGluIGxpbnVueC9tYXN0ZXIsIGl0IGxvb2tzIGxpa2Ug
d2UncmUKY2hlY2tpbmcgdG8gc2VlIGlmIGFsbCBpdGVtcyBhcmUgdGhlIHNhbWUuICBJZiB0aGV5
IGFyZSwgd2UgcmV0dXJuIDAuClRoaXMgbWFrZSBzZW5zZSBiZWNhdXNlIHdlJ3JlIG5vdCBjaGFu
Z2luZyBhbnl0aGluZy4KCklmIGFueXRoaW5nIGlzIGRpZmZlcmVudCwgd2UncmUgdXNpbmcgdGhl
IGNhY2hlZCB2YWx1ZSBiZWNhdXNlIHdlJ3JlCm5vdCBjaGVja2luZyBpZi93aGF0IGhhcyBjaGFu
Z2VkLiAgSWYgd2Ugd2FudCB0byBjaGFuZ2UgdGhlIHBvbGFyaXR5Cm9yIHRoZSBkdXR5IGN5Y2xl
LCB0aGlzIGFwcGVhcnMgdG8gbWUgbGlrZSBpdCB3b3VsZCBub3QgY2hhbmdlIGJlY2F1c2UKaXQg
anVzdCB1c2VzIHRoZSBjYWNoZWQgdmFsdWUuICBTb21laG93IGl0IHNlZW1zIHRvIG1lIGxpa2Ug
d2Ugc2hvdWxkCmp1c3QgYmxpbmRseSB1cGRhdGUgdGhlIHN0YXRlIHRvIHdoYXQgd2Ugd2FudCBh
bmQgbGV0IHRoZSBsb3dlci1sZXZlbApmdW5jdGlvbnMgY2FjaGUgd2hhdCB0aGV5IG5lZWQgdG8g
cHJldmVudCB0aGUgcmVjYWxjdWxhdGlvbiwgYnV0IGlmCndlJ3JlIGNoYW5naW5nIGR1dHkgY3lj
bGUgb3IgcG9sYXJpdHksIEkgYW0gbm90IHNlZWluZyBob3cgdGhhdCB3aWxsCmJlIHVwZGF0ZWQu
CgpCb3RoIG9mIHRob3NlIGFwcGVhciB0byBiZSBicm9rZW4gZGVwZW5kaW5nIG9uIHdoaWNoIGJv
YXJkIGlzIGhhdmluZyBhbiBpc3N1ZS4KCmFkYW0KCgoKPgo+IFNpZ25lZC1vZmYtYnk6IFV3ZSBL
bGVpbmUtS8O2bmlnIDx1LmtsZWluZS1rb2VuaWdAcGVuZ3V0cm9uaXguZGU+Cj4gLS0tCj4gSGVs
bG8sCj4KPiBUaGVyZSBhcmUgbm93IHR3byByZXBvcnRzIGFib3V0IDAxY2NmOTAzZWRkNiBicmVh
a2luZyBhIGJhY2tsaWdodC4gQXMKPiBmYXIgYXMgSSB1bmRlcnN0YW5kIHRoZSBwcm9ibGVtIHRo
aXMgaXMgYSBjb21iaW5hdGlvbiBvZiB0aGUgYmFja2VuZCBwd20KPiBkcml2ZXIgeWllbGRpbmcg
c3VycHJpc2luZyByZXN1bHRzIGFuZCB0aGUgcHdtLWJsIGRyaXZlciBkb2luZyB0aGluZ3MKPiBt
b3JlIGNvbXBsaWNhdGVkIHRoYW4gbmVjZXNzYXJ5Lgo+Cj4gU28gSSBndWVzcyB0aGlzIHBhdGNo
IHdvcmtzIGFyb3VuZCB0aGVzZSBwcm9ibGVtcy4gU3RpbGwgaXQgd291bGQgYmUKPiBpbnRlcmVz
dGluZyB0byBmaW5kIG91dCB0aGUgZGV0YWlscyBpbiB0aGUgaW14IGRyaXZlciB0aGF0IHRyaWdn
ZXJzIHRoZQo+IHByb2JsZW0uIFNvIEFkYW0sIGNhbiB5b3UgcGxlYXNlIGluc3RydW1lbnQgdGhl
IHB3bS1pbXgyNyBkcml2ZXIgdG8KPiBwcmludCAqc3RhdGUgYXQgdGhlIGJlZ2lubmluZyBvZiBw
d21faW14MjdfYXBwbHkoKSBhbmQgdGhlIGVuZCBvZgo+IHB3bV9pbXgyN19nZXRfc3RhdGUoKSBh
bmQgcHJvdmlkZSB0aGUgcmVzdWx0cz8KPgo+IE5vdGUgSSBvbmx5IGNvbXBpbGUgdGVzdGVkIHRo
aXMgY2hhbmdlLgo+Cj4gQmVzdCByZWdhcmRzCj4gVXdlCj4KPiAgZHJpdmVycy92aWRlby9iYWNr
bGlnaHQvcHdtX2JsLmMgfCAzNCArKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ICAx
IGZpbGUgY2hhbmdlZCwgMTIgaW5zZXJ0aW9ucygrKSwgMjIgZGVsZXRpb25zKC0pCj4KPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvcHdtX2JsLmMgYi9kcml2ZXJzL3ZpZGVv
L2JhY2tsaWdodC9wd21fYmwuYwo+IGluZGV4IDc0NmVlYmM0MTFkZi4uZGRlYmQ2MmIzOTc4IDEw
MDY0NAo+IC0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L3B3bV9ibC5jCj4gKysrIGIvZHJp
dmVycy92aWRlby9iYWNrbGlnaHQvcHdtX2JsLmMKPiBAQCAtNDIsMTAgKzQyLDggQEAgc3RydWN0
IHB3bV9ibF9kYXRhIHsKPgo+ICBzdGF0aWMgdm9pZCBwd21fYmFja2xpZ2h0X3Bvd2VyX29uKHN0
cnVjdCBwd21fYmxfZGF0YSAqcGIpCj4gIHsKPiAtICAgICAgIHN0cnVjdCBwd21fc3RhdGUgc3Rh
dGU7Cj4gICAgICAgICBpbnQgZXJyOwo+Cj4gLSAgICAgICBwd21fZ2V0X3N0YXRlKHBiLT5wd20s
ICZzdGF0ZSk7Cj4gICAgICAgICBpZiAocGItPmVuYWJsZWQpCj4gICAgICAgICAgICAgICAgIHJl
dHVybjsKPgo+IEBAIC01Myw5ICs1MSw2IEBAIHN0YXRpYyB2b2lkIHB3bV9iYWNrbGlnaHRfcG93
ZXJfb24oc3RydWN0IHB3bV9ibF9kYXRhICpwYikKPiAgICAgICAgIGlmIChlcnIgPCAwKQo+ICAg
ICAgICAgICAgICAgICBkZXZfZXJyKHBiLT5kZXYsICJmYWlsZWQgdG8gZW5hYmxlIHBvd2VyIHN1
cHBseVxuIik7Cj4KPiAtICAgICAgIHN0YXRlLmVuYWJsZWQgPSB0cnVlOwo+IC0gICAgICAgcHdt
X2FwcGx5X3N0YXRlKHBiLT5wd20sICZzdGF0ZSk7Cj4gLQo+ICAgICAgICAgaWYgKHBiLT5wb3N0
X3B3bV9vbl9kZWxheSkKPiAgICAgICAgICAgICAgICAgbXNsZWVwKHBiLT5wb3N0X3B3bV9vbl9k
ZWxheSk7Cj4KPiBAQCAtNjcsNDAgKzYyLDI3IEBAIHN0YXRpYyB2b2lkIHB3bV9iYWNrbGlnaHRf
cG93ZXJfb24oc3RydWN0IHB3bV9ibF9kYXRhICpwYikKPgo+ICBzdGF0aWMgdm9pZCBwd21fYmFj
a2xpZ2h0X3Bvd2VyX29mZihzdHJ1Y3QgcHdtX2JsX2RhdGEgKnBiKQo+ICB7Cj4gLSAgICAgICBz
dHJ1Y3QgcHdtX3N0YXRlIHN0YXRlOwo+IC0KPiAtICAgICAgIHB3bV9nZXRfc3RhdGUocGItPnB3
bSwgJnN0YXRlKTsKPiAtICAgICAgIGlmICghcGItPmVuYWJsZWQpCj4gLSAgICAgICAgICAgICAg
IHJldHVybjsKPiAtCj4gICAgICAgICBpZiAocGItPmVuYWJsZV9ncGlvKQo+ICAgICAgICAgICAg
ICAgICBncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAocGItPmVuYWJsZV9ncGlvLCAwKTsKPgo+ICAg
ICAgICAgaWYgKHBiLT5wd21fb2ZmX2RlbGF5KQo+ICAgICAgICAgICAgICAgICBtc2xlZXAocGIt
PnB3bV9vZmZfZGVsYXkpOwo+Cj4gLSAgICAgICBzdGF0ZS5lbmFibGVkID0gZmFsc2U7Cj4gLSAg
ICAgICBzdGF0ZS5kdXR5X2N5Y2xlID0gMDsKPiAtICAgICAgIHB3bV9hcHBseV9zdGF0ZShwYi0+
cHdtLCAmc3RhdGUpOwo+IC0KPiAgICAgICAgIHJlZ3VsYXRvcl9kaXNhYmxlKHBiLT5wb3dlcl9z
dXBwbHkpOwo+ICAgICAgICAgcGItPmVuYWJsZWQgPSBmYWxzZTsKPiAgfQo+Cj4gLXN0YXRpYyBp
bnQgY29tcHV0ZV9kdXR5X2N5Y2xlKHN0cnVjdCBwd21fYmxfZGF0YSAqcGIsIGludCBicmlnaHRu
ZXNzKQo+ICtzdGF0aWMgaW50IGNvbXB1dGVfZHV0eV9jeWNsZShzdHJ1Y3QgcHdtX2JsX2RhdGEg
KnBiLCBpbnQgYnJpZ2h0bmVzcywgc3RydWN0IHB3bV9zdGF0ZSAqc3RhdGUpCj4gIHsKPiAgICAg
ICAgIHVuc2lnbmVkIGludCBsdGggPSBwYi0+bHRoX2JyaWdodG5lc3M7Cj4gLSAgICAgICBzdHJ1
Y3QgcHdtX3N0YXRlIHN0YXRlOwo+ICAgICAgICAgdTY0IGR1dHlfY3ljbGU7Cj4KPiAtICAgICAg
IHB3bV9nZXRfc3RhdGUocGItPnB3bSwgJnN0YXRlKTsKPiAtCj4gICAgICAgICBpZiAocGItPmxl
dmVscykKPiAgICAgICAgICAgICAgICAgZHV0eV9jeWNsZSA9IHBiLT5sZXZlbHNbYnJpZ2h0bmVz
c107Cj4gICAgICAgICBlbHNlCj4gICAgICAgICAgICAgICAgIGR1dHlfY3ljbGUgPSBicmlnaHRu
ZXNzOwo+Cj4gLSAgICAgICBkdXR5X2N5Y2xlICo9IHN0YXRlLnBlcmlvZCAtIGx0aDsKPiArICAg
ICAgIGR1dHlfY3ljbGUgKj0gc3RhdGUtPnBlcmlvZCAtIGx0aDsKPiAgICAgICAgIGRvX2Rpdihk
dXR5X2N5Y2xlLCBwYi0+c2NhbGUpOwo+Cj4gICAgICAgICByZXR1cm4gZHV0eV9jeWNsZSArIGx0
aDsKPiBAQCAtMTIyLDEyICsxMDQsMjAgQEAgc3RhdGljIGludCBwd21fYmFja2xpZ2h0X3VwZGF0
ZV9zdGF0dXMoc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJsKQo+Cj4gICAgICAgICBpZiAoYnJp
Z2h0bmVzcyA+IDApIHsKPiAgICAgICAgICAgICAgICAgcHdtX2dldF9zdGF0ZShwYi0+cHdtLCAm
c3RhdGUpOwo+IC0gICAgICAgICAgICAgICBzdGF0ZS5kdXR5X2N5Y2xlID0gY29tcHV0ZV9kdXR5
X2N5Y2xlKHBiLCBicmlnaHRuZXNzKTsKPiArICAgICAgICAgICAgICAgc3RhdGUuZHV0eV9jeWNs
ZSA9IGNvbXB1dGVfZHV0eV9jeWNsZShwYiwgYnJpZ2h0bmVzcywgJnN0YXRlKTsKPiArICAgICAg
ICAgICAgICAgc3RhdGUuZW5hYmxlZCA9IHRydWU7Cj4gICAgICAgICAgICAgICAgIHB3bV9hcHBs
eV9zdGF0ZShwYi0+cHdtLCAmc3RhdGUpOwo+ICsKPiAgICAgICAgICAgICAgICAgcHdtX2JhY2ts
aWdodF9wb3dlcl9vbihwYik7Cj4gLSAgICAgICB9IGVsc2UKPiArICAgICAgIH0gZWxzZSB7Cj4g
ICAgICAgICAgICAgICAgIHB3bV9iYWNrbGlnaHRfcG93ZXJfb2ZmKHBiKTsKPgo+ICsgICAgICAg
ICAgICAgICBwd21fZ2V0X3N0YXRlKHBiLT5wd20sICZzdGF0ZSk7Cj4gKyAgICAgICAgICAgICAg
IHN0YXRlLmVuYWJsZWQgPSBmYWxzZTsKPiArICAgICAgICAgICAgICAgc3RhdGUuZHV0eV9jeWNs
ZSA9IDA7Cj4gKyAgICAgICAgICAgICAgIHB3bV9hcHBseV9zdGF0ZShwYi0+cHdtLCAmc3RhdGUp
Owo+ICsgICAgICAgfQo+ICsKPiAgICAgICAgIGlmIChwYi0+bm90aWZ5X2FmdGVyKQo+ICAgICAg
ICAgICAgICAgICBwYi0+bm90aWZ5X2FmdGVyKHBiLT5kZXYsIGJyaWdodG5lc3MpOwo+Cj4gLS0K
PiAyLjIzLjAKPgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
