Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 158BC9533A
	for <lists+dri-devel@lfdr.de>; Tue, 20 Aug 2019 03:19:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1C7076E59B;
	Tue, 20 Aug 2019 01:18:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6427C6E579
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 01:18:04 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 73CBA219F;
 Tue, 20 Aug 2019 03:17:57 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 36/50] drm/omap: Remove HPD,
 detect and EDID omapdss operations
Date: Tue, 20 Aug 2019 04:17:07 +0300
Message-Id: <20190820011721.30136-37-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
References: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1566263878;
 bh=w3yNeJaYGse6HvjSN+ZfAvUofZM80dyG3ex14WEg/lk=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=M9NcqTWfbgIY/27HBIJAVmh8+0Zq8VInDb/6i+z8cP8m/Mu0jERsOJSX7gK2QhUVa
 K7udLVA5IaSvUd2ULg6V3ifUjPTzCmwBr8lWZTEl91DMntUIJH6FXwaDTOVD13x8oE
 Rl7M8+A208BjsKkxhsJmJ9knLOvCOpU2MZX+AKsM=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sean Paul <sean@poorly.run>,
 Sebastian Reichel <sebastian.reichel@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RHVlIHRvIHRoZSByZW1vdmFsIG9mIHNldmVyYWwgb21hcGRybSBkaXNwbGF5IGRyaXZlcnMsIHRo
ZSBvbWFwZHNzIEhQRCwKZGV0ZWN0ZWQgYW5kIEVESUQgb3BlcmF0aW9ucyBhcmUgbm90IHVzZWQg
YW55bW9yZS4gUmVtb3ZlIHRoZW0gYW5kIGFsbApyZWxhdGVkIGNvZGUuCgpTaWduZWQtb2ZmLWJ5
OiBMYXVyZW50IFBpbmNoYXJ0IDxsYXVyZW50LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+Ci0t
LQogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2hkbWk0LmMgICAgICB8ICA2MSAtLS0tLS0t
LQogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2hkbWk1LmMgICAgICB8ICA0NiAtLS0tLS0K
IGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLmggICAgfCAgMjUgKy0tCiBkcml2
ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2Nvbm5lY3Rvci5jIHwgMTkwICsrKy0tLS0tLS0tLS0t
LS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2Nvbm5lY3Rvci5oIHwgICAy
IC0KIGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBfZHJ2LmMgICAgICAgfCAgIDggKy0KIDYg
ZmlsZXMgY2hhbmdlZCwgMjIgaW5zZXJ0aW9ucygrKSwgMzEwIGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNC5jIGIvZHJpdmVycy9ncHUv
ZHJtL29tYXBkcm0vZHNzL2hkbWk0LmMKaW5kZXggNWQ2YWRiYjFkNTQ3Li42ZTBiNTM4NDc0NmIg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNC5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNC5jCkBAIC0zMjAsNDcgKzMyMCw2IEBAIHN0
YXRpYyB2b2lkIGhkbWlfZGlzY29ubmVjdChzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpzcmMsCiAJ
b21hcGRzc19kZXZpY2VfZGlzY29ubmVjdChkc3QsIGRzdC0+bmV4dCk7CiB9CiAKLSNkZWZpbmUg
TUFYX0VESUQJNTEyCi0KLXN0YXRpYyBzdHJ1Y3QgZWRpZCAqaGRtaV9yZWFkX2VkaWRfZGF0YShz
dHJ1Y3Qgb21hcF9oZG1pICpoZG1pLAotCQkJCQlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVj
dG9yKQotewotCXU4ICplZGlkOwotCWludCByOwotCi0JZWRpZCA9IGt6YWxsb2MoTUFYX0VESUQs
IEdGUF9LRVJORUwpOwotCWlmICghZWRpZCkKLQkJcmV0dXJuIE5VTEw7Ci0KLQlyID0gaGRtaTRf
Y29yZV9kZGNfcmVhZCgmaGRtaS0+Y29yZSwgZWRpZCwgMCwgRURJRF9MRU5HVEgpOwotCWlmIChy
KQotCQlnb3RvIGVycm9yOwotCi0JaWYgKGVkaWRbMHg3ZV0gPiAwKSB7Ci0JCWNoYXIgY2hlY2tz
dW0gPSAwOwotCQl1bnNpZ25lZCBpbnQgaTsKLQotCQlyID0gaGRtaTRfY29yZV9kZGNfcmVhZCgm
aGRtaS0+Y29yZSwgZWRpZCArIEVESURfTEVOR1RILCAxLAotCQkJCQlFRElEX0xFTkdUSCk7Ci0J
CWlmIChyKQotCQkJZ290byBlcnJvcjsKLQotCQlmb3IgKGkgPSAwOyBpIDwgRURJRF9MRU5HVEg7
ICsraSkKLQkJCWNoZWNrc3VtICs9IGVkaWRbRURJRF9MRU5HVEggKyBpXTsKLQotCQlpZiAoY2hl
Y2tzdW0gIT0gMCkgewotCQkJRFNTRVJSKCJFLUVESUQgY2hlY2tzdW0gZmFpbGVkISFcbiIpOwot
CQkJZ290byBlcnJvcjsKLQkJfQotCX0KLQotCXJldHVybiAoc3RydWN0IGVkaWQgKillZGlkOwot
Ci1lcnJvcjoKLQlrZnJlZShlZGlkKTsKLQlyZXR1cm4gTlVMTDsKLX0KLQogc3RhdGljIHN0cnVj
dCBlZGlkICoKIGhkbWlfZG9fcmVhZF9lZGlkKHN0cnVjdCBvbWFwX2hkbWkgKmhkbWksCiAJCSAg
c3RydWN0IGVkaWQgKigqcmVhZCkoc3RydWN0IG9tYXBfaGRtaSAqaGRtaSwKQEAgLTQxMCwyOCAr
MzY5LDkgQEAgaGRtaV9kb19yZWFkX2VkaWQoc3RydWN0IG9tYXBfaGRtaSAqaGRtaSwKIAlyZXR1
cm4gZWRpZDsKIH0KIAotc3RhdGljIHN0cnVjdCBlZGlkICpoZG1pX3JlYWRfZWRpZChzdHJ1Y3Qg
b21hcF9kc3NfZGV2aWNlICpkc3NkZXYpCi17Ci0JcmV0dXJuIGhkbWlfZG9fcmVhZF9lZGlkKGRz
c2Rldl90b19oZG1pKGRzc2RldiksIGhkbWlfcmVhZF9lZGlkX2RhdGEsCi0JCQkJIE5VTEwpOwot
fQotCi1zdGF0aWMgdm9pZCBoZG1pX2xvc3RfaG90cGx1ZyhzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNl
ICpkc3NkZXYpCi17Ci0Jc3RydWN0IG9tYXBfaGRtaSAqaGRtaSA9IGRzc2Rldl90b19oZG1pKGRz
c2Rldik7Ci0KLQloZG1pNF9jZWNfc2V0X3BoeXNfYWRkcigmaGRtaS0+Y29yZSwgQ0VDX1BIWVNf
QUREUl9JTlZBTElEKTsKLX0KLQogc3RhdGljIGNvbnN0IHN0cnVjdCBvbWFwX2Rzc19kZXZpY2Vf
b3BzIGhkbWlfb3BzID0gewogCS5jb25uZWN0CQk9IGhkbWlfY29ubmVjdCwKIAkuZGlzY29ubmVj
dAkJPSBoZG1pX2Rpc2Nvbm5lY3QsCi0KLQkucmVhZF9lZGlkCQk9IGhkbWlfcmVhZF9lZGlkLAot
Ci0JLmhkbWkgPSB7Ci0JCS5sb3N0X2hvdHBsdWcJCT0gaGRtaV9sb3N0X2hvdHBsdWcsCi0JfSwK
IH07CiAKIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCkBAIC03OTksNyArNzM5LDYgQEAgc3RhdGlj
IGludCBoZG1pNF9pbml0X291dHB1dChzdHJ1Y3Qgb21hcF9oZG1pICpoZG1pKQogCW91dC0+b3Bz
ID0gJmhkbWlfb3BzOwogCW91dC0+b3duZXIgPSBUSElTX01PRFVMRTsKIAlvdXQtPm9mX3BvcnQg
PSAwOwotCW91dC0+b3BzX2ZsYWdzID0gT01BUF9EU1NfREVWSUNFX09QX0VESUQ7CiAKIAlyID0g
b21hcGRzc19kZXZpY2VfaW5pdF9vdXRwdXQob3V0LCAmaGRtaS0+YnJpZGdlKTsKIAlpZiAociA8
IDApCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvaGRtaTUuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNS5jCmluZGV4IDc0MzAwZmVhODZjYy4uN2Mx
NTBkNjQxNDU4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvaGRtaTUu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvaGRtaTUuYwpAQCAtMzE4LDQzICsz
MTgsNiBAQCBzdGF0aWMgdm9pZCBoZG1pX2Rpc2Nvbm5lY3Qoc3RydWN0IG9tYXBfZHNzX2Rldmlj
ZSAqc3JjLAogCW9tYXBkc3NfZGV2aWNlX2Rpc2Nvbm5lY3QoZHN0LCBkc3QtPm5leHQpOwogfQog
Ci0jZGVmaW5lIE1BWF9FRElECTUxMgotCi1zdGF0aWMgc3RydWN0IGVkaWQgKmhkbWlfcmVhZF9l
ZGlkX2RhdGEoc3RydWN0IG9tYXBfaGRtaSAqaGRtaSwKLQkJCQkJc3RydWN0IGRybV9jb25uZWN0
b3IgKmNvbm5lY3RvcikKLXsKLQlzdHJ1Y3QgaGRtaV9jb3JlX2RhdGEgKmNvcmUgPSAmaGRtaS0+
Y29yZTsKLQlpbnQgbWF4X2V4dF9ibG9ja3MgPSAzOwotCWludCByLCBuLCBpOwotCXU4ICplZGlk
OwotCi0JZWRpZCA9IGt6YWxsb2MoTUFYX0VESUQsIEdGUF9LRVJORUwpOwotCWlmICghZWRpZCkK
LQkJcmV0dXJuIE5VTEw7Ci0KLQlyID0gaGRtaTVfY29yZV9kZGNfcmVhZChjb3JlLCBlZGlkLCAw
LCBFRElEX0xFTkdUSCk7Ci0JaWYgKHIpCi0JCWdvdG8gZXJyb3I7Ci0KLQluID0gZWRpZFsweDdl
XTsKLQotCWlmIChuID4gbWF4X2V4dF9ibG9ja3MpCi0JCW4gPSBtYXhfZXh0X2Jsb2NrczsKLQot
CWZvciAoaSA9IDE7IGkgPD0gbjsgaSsrKSB7Ci0JCXIgPSBoZG1pNV9jb3JlX2RkY19yZWFkKGNv
cmUsIGVkaWQgKyBpICogRURJRF9MRU5HVEgsIGksCi0JCQkJCUVESURfTEVOR1RIKTsKLQkJaWYg
KHIpCi0JCQlnb3RvIGVycm9yOwotCX0KLQotCXJldHVybiAoc3RydWN0IGVkaWQgKillZGlkOwot
Ci1lcnJvcjoKLQlrZnJlZShlZGlkKTsKLQlyZXR1cm4gTlVMTDsKLX0KLQogc3RhdGljIHN0cnVj
dCBlZGlkICoKIGhkbWlfZG9fcmVhZF9lZGlkKHN0cnVjdCBvbWFwX2hkbWkgKmhkbWksCiAJCSAg
c3RydWN0IGVkaWQgKigqcmVhZCkoc3RydWN0IG9tYXBfaGRtaSAqaGRtaSwKQEAgLTM5OSwxNyAr
MzYyLDkgQEAgaGRtaV9kb19yZWFkX2VkaWQoc3RydWN0IG9tYXBfaGRtaSAqaGRtaSwKIAlyZXR1
cm4gKHN0cnVjdCBlZGlkICopZWRpZDsKIH0KIAotc3RhdGljIHN0cnVjdCBlZGlkICpoZG1pX3Jl
YWRfZWRpZChzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYpCi17Ci0JcmV0dXJuIGhkbWlf
ZG9fcmVhZF9lZGlkKGRzc2Rldl90b19oZG1pKGRzc2RldiksIGhkbWlfcmVhZF9lZGlkX2RhdGEs
Ci0JCQkJIE5VTEwpOwotfQotCiBzdGF0aWMgY29uc3Qgc3RydWN0IG9tYXBfZHNzX2RldmljZV9v
cHMgaGRtaV9vcHMgPSB7CiAJLmNvbm5lY3QJCT0gaGRtaV9jb25uZWN0LAogCS5kaXNjb25uZWN0
CQk9IGhkbWlfZGlzY29ubmVjdCwKLQotCS5yZWFkX2VkaWQJCT0gaGRtaV9yZWFkX2VkaWQsCiB9
OwogCiAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpAQCAtNzU4LDcgKzcxMyw2IEBAIHN0YXRpYyBp
bnQgaGRtaTVfaW5pdF9vdXRwdXQoc3RydWN0IG9tYXBfaGRtaSAqaGRtaSkKIAlvdXQtPm9wcyA9
ICZoZG1pX29wczsKIAlvdXQtPm93bmVyID0gVEhJU19NT0RVTEU7CiAJb3V0LT5vZl9wb3J0ID0g
MDsKLQlvdXQtPm9wc19mbGFncyA9IE9NQVBfRFNTX0RFVklDRV9PUF9FRElEOwogCiAJciA9IG9t
YXBkc3NfZGV2aWNlX2luaXRfb3V0cHV0KG91dCwgJmhkbWktPmJyaWRnZSk7CiAJaWYgKHIgPCAw
KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL29tYXBkc3MuaCBiL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLmgKaW5kZXggMzBhMTJjZjkxY2JiLi5j
Yjc5ZTA1YzkwMmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFw
ZHNzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL29tYXBkc3MuaApAQCAtMjg1
LDEwICsyODUsNiBAQCBzdHJ1Y3Qgb21hcF9kc3Nfd3JpdGViYWNrX2luZm8gewogCXU4IHByZV9t
dWx0X2FscGhhOwogfTsKIAotc3RydWN0IG9tYXBkc3NfaGRtaV9vcHMgewotCXZvaWQgKCpsb3N0
X2hvdHBsdWcpKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2Rldik7Ci19OwotCiBzdHJ1Y3Qg
b21hcGRzc19kc2lfb3BzIHsKIAl2b2lkICgqZGlzYWJsZSkoc3RydWN0IG9tYXBfZHNzX2Rldmlj
ZSAqZHNzZGV2LCBib29sIGRpc2Nvbm5lY3RfbGFuZXMsCiAJCQlib29sIGVudGVyX3VscHMpOwpA
QCAtMzU2LDM2ICszNTIsMTcgQEAgc3RydWN0IG9tYXBfZHNzX2RldmljZV9vcHMgewogCXZvaWQg
KCpzZXRfdGltaW5ncykoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LAogCQkJICAgIGNv
bnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKTsKIAotCWJvb2wgKCpkZXRlY3QpKHN0
cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2Rldik7Ci0KLQl2b2lkICgqcmVnaXN0ZXJfaHBkX2Ni
KShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsCi0JCQkJdm9pZCAoKmNiKSh2b2lkICpj
Yl9kYXRhLAotCQkJCQkgIGVudW0gZHJtX2Nvbm5lY3Rvcl9zdGF0dXMgc3RhdHVzKSwKLQkJCQl2
b2lkICpjYl9kYXRhKTsKLQl2b2lkICgqdW5yZWdpc3Rlcl9ocGRfY2IpKHN0cnVjdCBvbWFwX2Rz
c19kZXZpY2UgKmRzc2Rldik7Ci0KLQlzdHJ1Y3QgZWRpZCAqKCpyZWFkX2VkaWQpKHN0cnVjdCBv
bWFwX2Rzc19kZXZpY2UgKmRzc2Rldik7Ci0KIAlpbnQgKCpnZXRfbW9kZXMpKHN0cnVjdCBvbWFw
X2Rzc19kZXZpY2UgKmRzc2RldiwKIAkJCSBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9y
KTsKIAotCXVuaW9uIHsKLQkJY29uc3Qgc3RydWN0IG9tYXBkc3NfaGRtaV9vcHMgaGRtaTsKLQkJ
Y29uc3Qgc3RydWN0IG9tYXBkc3NfZHNpX29wcyBkc2k7Ci0JfTsKKwljb25zdCBzdHJ1Y3Qgb21h
cGRzc19kc2lfb3BzIGRzaTsKIH07CiAKIC8qKgogICogZW51bSBvbWFwX2Rzc19kZXZpY2Vfb3Bz
X2ZsYWcgLSBJbmRpY2F0ZXMgd2hpY2ggZGV2aWNlIG9wcyBhcmUgc3VwcG9ydGVkCi0gKiBAT01B
UF9EU1NfREVWSUNFX09QX0RFVEVDVDogVGhlIGRldmljZSBzdXBwb3J0cyBvdXRwdXQgY29ubmVj
dGlvbiBkZXRlY3Rpb24KLSAqIEBPTUFQX0RTU19ERVZJQ0VfT1BfSFBEOiBUaGUgZGV2aWNlIHN1
cHBvcnRzIGFsbCBob3QtcGx1Zy1yZWxhdGVkIG9wZXJhdGlvbnMKLSAqIEBPTUFQX0RTU19ERVZJ
Q0VfT1BfRURJRDogVGhlIGRldmljZSBzdXBwb3J0cyByZWFkaW5nIEVESUQKICAqIEBPTUFQX0RT
U19ERVZJQ0VfT1BfTU9ERVM6IFRoZSBkZXZpY2Ugc3VwcG9ydHMgcmVhZGluZyBtb2RlcwogICov
CiBlbnVtIG9tYXBfZHNzX2RldmljZV9vcHNfZmxhZyB7Ci0JT01BUF9EU1NfREVWSUNFX09QX0RF
VEVDVCA9IEJJVCgwKSwKLQlPTUFQX0RTU19ERVZJQ0VfT1BfSFBEID0gQklUKDEpLAotCU9NQVBf
RFNTX0RFVklDRV9PUF9FRElEID0gQklUKDIpLAogCU9NQVBfRFNTX0RFVklDRV9PUF9NT0RFUyA9
IEJJVCgzKSwKIH07CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBf
Y29ubmVjdG9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2Nvbm5lY3Rvci5jCmlu
ZGV4IGM2MzZhZTIyODEzMC4uYmFhMzFlZDFmOTkzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vb21hcGRybS9vbWFwX2Nvbm5lY3Rvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJt
L29tYXBfY29ubmVjdG9yLmMKQEAgLTE5LDExMSArMTksMjIgQEAKIHN0cnVjdCBvbWFwX2Nvbm5l
Y3RvciB7CiAJc3RydWN0IGRybV9jb25uZWN0b3IgYmFzZTsKIAlzdHJ1Y3Qgb21hcF9kc3NfZGV2
aWNlICpvdXRwdXQ7Ci0Jc3RydWN0IG9tYXBfZHNzX2RldmljZSAqaHBkOwogfTsKIAotc3RhdGlj
IHZvaWQgb21hcF9jb25uZWN0b3JfaHBkX25vdGlmeShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29u
bmVjdG9yLAotCQkJCSAgICAgIGVudW0gZHJtX2Nvbm5lY3Rvcl9zdGF0dXMgc3RhdHVzKQotewot
CXN0cnVjdCBvbWFwX2Nvbm5lY3RvciAqb21hcF9jb25uZWN0b3IgPSB0b19vbWFwX2Nvbm5lY3Rv
cihjb25uZWN0b3IpOwotCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldjsKLQotCWlmIChz
dGF0dXMgIT0gY29ubmVjdG9yX3N0YXR1c19kaXNjb25uZWN0ZWQpCi0JCXJldHVybjsKLQotCS8q
Ci0JICogTm90aWZ5IGFsbCBkZXZpY3MgaW4gdGhlIHBpcGVsaW5lIG9mIGRpc2Nvbm5lY3Rpb24u
IFRoaXMgaXMgcmVxdWlyZWQKLQkgKiB0byBsZXQgdGhlIEhETUkgZW5jb2RlcnMgcmVzZXQgdGhl
aXIgaW50ZXJuYWwgc3RhdGUgcmVsYXRlZCB0bwotCSAqIGNvbm5lY3Rpb24gc3RhdHVzLCBzdWNo
IGFzIHRoZSBDRUMgYWRkcmVzcy4KLQkgKi8KLQlmb3IgKGRzc2RldiA9IG9tYXBfY29ubmVjdG9y
LT5vdXRwdXQ7IGRzc2RldjsgZHNzZGV2ID0gZHNzZGV2LT5uZXh0KSB7Ci0JCWlmIChkc3NkZXYt
Pm9wcyAmJiBkc3NkZXYtPm9wcy0+aGRtaS5sb3N0X2hvdHBsdWcpCi0JCQlkc3NkZXYtPm9wcy0+
aGRtaS5sb3N0X2hvdHBsdWcoZHNzZGV2KTsKLQl9Ci19Ci0KLXN0YXRpYyB2b2lkIG9tYXBfY29u
bmVjdG9yX2hwZF9jYih2b2lkICpjYl9kYXRhLAotCQkJCSAgZW51bSBkcm1fY29ubmVjdG9yX3N0
YXR1cyBzdGF0dXMpCi17Ci0Jc3RydWN0IG9tYXBfY29ubmVjdG9yICpvbWFwX2Nvbm5lY3RvciA9
IGNiX2RhdGE7Ci0Jc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciA9ICZvbWFwX2Nvbm5l
Y3Rvci0+YmFzZTsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gY29ubmVjdG9yLT5kZXY7Ci0J
ZW51bSBkcm1fY29ubmVjdG9yX3N0YXR1cyBvbGRfc3RhdHVzOwotCi0JbXV0ZXhfbG9jaygmZGV2
LT5tb2RlX2NvbmZpZy5tdXRleCk7Ci0Jb2xkX3N0YXR1cyA9IGNvbm5lY3Rvci0+c3RhdHVzOwot
CWNvbm5lY3Rvci0+c3RhdHVzID0gc3RhdHVzOwotCW11dGV4X3VubG9jaygmZGV2LT5tb2RlX2Nv
bmZpZy5tdXRleCk7Ci0KLQlpZiAob2xkX3N0YXR1cyA9PSBzdGF0dXMpCi0JCXJldHVybjsKLQot
CW9tYXBfY29ubmVjdG9yX2hwZF9ub3RpZnkoY29ubmVjdG9yLCBzdGF0dXMpOwotCi0JZHJtX2tt
c19oZWxwZXJfaG90cGx1Z19ldmVudChkZXYpOwotfQotCi12b2lkIG9tYXBfY29ubmVjdG9yX2Vu
YWJsZV9ocGQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKLXsKLQlzdHJ1Y3Qgb21h
cF9jb25uZWN0b3IgKm9tYXBfY29ubmVjdG9yID0gdG9fb21hcF9jb25uZWN0b3IoY29ubmVjdG9y
KTsKLQlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpocGQgPSBvbWFwX2Nvbm5lY3Rvci0+aHBkOwot
Ci0JaWYgKGhwZCkKLQkJaHBkLT5vcHMtPnJlZ2lzdGVyX2hwZF9jYihocGQsIG9tYXBfY29ubmVj
dG9yX2hwZF9jYiwKLQkJCQkJICBvbWFwX2Nvbm5lY3Rvcik7Ci19Ci0KLXZvaWQgb21hcF9jb25u
ZWN0b3JfZGlzYWJsZV9ocGQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKLXsKLQlz
dHJ1Y3Qgb21hcF9jb25uZWN0b3IgKm9tYXBfY29ubmVjdG9yID0gdG9fb21hcF9jb25uZWN0b3Io
Y29ubmVjdG9yKTsKLQlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpocGQgPSBvbWFwX2Nvbm5lY3Rv
ci0+aHBkOwotCi0JaWYgKGhwZCkKLQkJaHBkLT5vcHMtPnVucmVnaXN0ZXJfaHBkX2NiKGhwZCk7
Ci19Ci0KLXN0YXRpYyBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICoKLW9tYXBfY29ubmVjdG9yX2Zp
bmRfZGV2aWNlKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCi0JCQkgICBlbnVtIG9t
YXBfZHNzX2RldmljZV9vcHNfZmxhZyBvcCkKLXsKLQlzdHJ1Y3Qgb21hcF9jb25uZWN0b3IgKm9t
YXBfY29ubmVjdG9yID0gdG9fb21hcF9jb25uZWN0b3IoY29ubmVjdG9yKTsKLQlzdHJ1Y3Qgb21h
cF9kc3NfZGV2aWNlICpkc3NkZXYgPSBOVUxMOwotCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmQ7
Ci0KLQlmb3IgKGQgPSBvbWFwX2Nvbm5lY3Rvci0+b3V0cHV0OyBkOyBkID0gZC0+bmV4dCkgewot
CQlpZiAoZC0+b3BzX2ZsYWdzICYgb3ApCi0JCQlkc3NkZXYgPSBkOwotCX0KLQotCXJldHVybiBk
c3NkZXY7Ci19Ci0KIHN0YXRpYyBlbnVtIGRybV9jb25uZWN0b3Jfc3RhdHVzIG9tYXBfY29ubmVj
dG9yX2RldGVjdCgKIAkJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwgYm9vbCBmb3Jj
ZSkKIHsKLQlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXY7CiAJZW51bSBkcm1fY29ubmVj
dG9yX3N0YXR1cyBzdGF0dXM7CiAKLQlkc3NkZXYgPSBvbWFwX2Nvbm5lY3Rvcl9maW5kX2Rldmlj
ZShjb25uZWN0b3IsCi0JCQkJCSAgICBPTUFQX0RTU19ERVZJQ0VfT1BfREVURUNUKTsKLQotCWlm
IChkc3NkZXYpIHsKLQkJc3RhdHVzID0gZHNzZGV2LT5vcHMtPmRldGVjdChkc3NkZXYpCi0JCSAg
ICAgICA/IGNvbm5lY3Rvcl9zdGF0dXNfY29ubmVjdGVkCi0JCSAgICAgICA6IGNvbm5lY3Rvcl9z
dGF0dXNfZGlzY29ubmVjdGVkOwotCi0JCW9tYXBfY29ubmVjdG9yX2hwZF9ub3RpZnkoY29ubmVj
dG9yLCBzdGF0dXMpOwotCX0gZWxzZSB7Ci0JCXN3aXRjaCAoY29ubmVjdG9yLT5jb25uZWN0b3Jf
dHlwZSkgewotCQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9EUEk6Ci0JCWNhc2UgRFJNX01PREVf
Q09OTkVDVE9SX0xWRFM6Ci0JCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0RTSToKLQkJCXN0YXR1
cyA9IGNvbm5lY3Rvcl9zdGF0dXNfY29ubmVjdGVkOwotCQkJYnJlYWs7Ci0JCWRlZmF1bHQ6Ci0J
CQlzdGF0dXMgPSBjb25uZWN0b3Jfc3RhdHVzX3Vua25vd247Ci0JCQlicmVhazsKLQkJfQorCXN3
aXRjaCAoY29ubmVjdG9yLT5jb25uZWN0b3JfdHlwZSkgeworCWNhc2UgRFJNX01PREVfQ09OTkVD
VE9SX0RQSToKKwljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9MVkRTOgorCWNhc2UgRFJNX01PREVf
Q09OTkVDVE9SX0RTSToKKwkJc3RhdHVzID0gY29ubmVjdG9yX3N0YXR1c19jb25uZWN0ZWQ7CisJ
CWJyZWFrOworCWRlZmF1bHQ6CisJCXN0YXR1cyA9IGNvbm5lY3Rvcl9zdGF0dXNfdW5rbm93bjsK
KwkJYnJlYWs7CiAJfQogCiAJVkVSQigiJXM6ICVkIChmb3JjZT0lZCkiLCBjb25uZWN0b3ItPm5h
bWUsIHN0YXR1cywgZm9yY2UpOwpAQCAtMTM3LDE0ICs0OCw2IEBAIHN0YXRpYyB2b2lkIG9tYXBf
Y29ubmVjdG9yX2Rlc3Ryb3koc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAogCURC
RygiJXMiLCBjb25uZWN0b3ItPm5hbWUpOwogCi0JaWYgKG9tYXBfY29ubmVjdG9yLT5ocGQpIHsK
LQkJc3RydWN0IG9tYXBfZHNzX2RldmljZSAqaHBkID0gb21hcF9jb25uZWN0b3ItPmhwZDsKLQot
CQlocGQtPm9wcy0+dW5yZWdpc3Rlcl9ocGRfY2IoaHBkKTsKLQkJb21hcGRzc19kZXZpY2VfcHV0
KGhwZCk7Ci0JCW9tYXBfY29ubmVjdG9yLT5ocGQgPSBOVUxMOwotCX0KLQogCWRybV9jb25uZWN0
b3JfdW5yZWdpc3Rlcihjb25uZWN0b3IpOwogCWRybV9jb25uZWN0b3JfY2xlYW51cChjb25uZWN0
b3IpOwogCkBAIC0xNTMsNjMgKzU2LDI3IEBAIHN0YXRpYyB2b2lkIG9tYXBfY29ubmVjdG9yX2Rl
c3Ryb3koc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAlrZnJlZShvbWFwX2Nvbm5l
Y3Rvcik7CiB9CiAKLXN0YXRpYyBpbnQgb21hcF9jb25uZWN0b3JfZ2V0X21vZGVzX2VkaWQoc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKLQkJCQkJIHN0cnVjdCBvbWFwX2Rzc19kZXZp
Y2UgKmRzc2RldikKLXsKLQllbnVtIGRybV9jb25uZWN0b3Jfc3RhdHVzIHN0YXR1czsKLQlzdHJ1
Y3QgZWRpZCAqZWRpZDsKLQlpbnQgbjsKLQotCXN0YXR1cyA9IG9tYXBfY29ubmVjdG9yX2RldGVj
dChjb25uZWN0b3IsIGZhbHNlKTsKLQlpZiAoc3RhdHVzICE9IGNvbm5lY3Rvcl9zdGF0dXNfY29u
bmVjdGVkKQotCQlnb3RvIG5vX2VkaWQ7Ci0KLQllZGlkID0gZHNzZGV2LT5vcHMtPnJlYWRfZWRp
ZChkc3NkZXYpOwotCWlmICghZWRpZCB8fCAhZHJtX2VkaWRfaXNfdmFsaWQoZWRpZCkpIHsKLQkJ
a2ZyZWUoZWRpZCk7Ci0JCWdvdG8gbm9fZWRpZDsKLQl9Ci0KLQlkcm1fY29ubmVjdG9yX3VwZGF0
ZV9lZGlkX3Byb3BlcnR5KGNvbm5lY3RvciwgZWRpZCk7Ci0JbiA9IGRybV9hZGRfZWRpZF9tb2Rl
cyhjb25uZWN0b3IsIGVkaWQpOwotCi0Ja2ZyZWUoZWRpZCk7Ci0JcmV0dXJuIG47Ci0KLW5vX2Vk
aWQ6Ci0JZHJtX2Nvbm5lY3Rvcl91cGRhdGVfZWRpZF9wcm9wZXJ0eShjb25uZWN0b3IsIE5VTEwp
OwotCXJldHVybiAwOwotfQotCiBzdGF0aWMgaW50IG9tYXBfY29ubmVjdG9yX2dldF9tb2Rlcyhz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogewotCXN0cnVjdCBvbWFwX2Rzc19kZXZp
Y2UgKmRzc2RldjsKKwlzdHJ1Y3Qgb21hcF9jb25uZWN0b3IgKm9tYXBfY29ubmVjdG9yID0gdG9f
b21hcF9jb25uZWN0b3IoY29ubmVjdG9yKTsKKwlzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3Nk
ZXYgPSBOVUxMOworCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmQ7CiAKIAlEQkcoIiVzIiwgY29u
bmVjdG9yLT5uYW1lKTsKIAogCS8qCi0JICogSWYgZGlzcGxheSBleHBvc2VzIEVESUQsIHRoZW4g
d2UgcGFyc2UgdGhhdCBpbiB0aGUgbm9ybWFsIHdheSB0bwotCSAqIGJ1aWxkIHRhYmxlIG9mIHN1
cHBvcnRlZCBtb2Rlcy4KKwkgKiBJZiB0aGUgZGlzcGxheSBwaXBlbGluZSByZXBvcnRzIG1vZGVz
IChlLmcuIHdpdGggYSBmaXhlZCByZXNvbHV0aW9uCisJICogcGFuZWwgb3IgYW4gYW5hbG9nIFRW
IG91dHB1dCksIHF1ZXJ5IGl0LgogCSAqLwotCWRzc2RldiA9IG9tYXBfY29ubmVjdG9yX2ZpbmRf
ZGV2aWNlKGNvbm5lY3RvciwKLQkJCQkJICAgIE9NQVBfRFNTX0RFVklDRV9PUF9FRElEKTsKLQlp
ZiAoZHNzZGV2KQotCQlyZXR1cm4gb21hcF9jb25uZWN0b3JfZ2V0X21vZGVzX2VkaWQoY29ubmVj
dG9yLCBkc3NkZXYpOworCWZvciAoZCA9IG9tYXBfY29ubmVjdG9yLT5vdXRwdXQ7IGQ7IGQgPSBk
LT5uZXh0KSB7CisJCWlmIChkLT5vcHNfZmxhZ3MgJiBPTUFQX0RTU19ERVZJQ0VfT1BfTU9ERVMp
CisJCQlkc3NkZXYgPSBkOworCX0KIAotCS8qCi0JICogT3RoZXJ3aXNlIGlmIHRoZSBkaXNwbGF5
IHBpcGVsaW5lIHJlcG9ydHMgbW9kZXMgKGUuZy4gd2l0aCBhIGZpeGVkCi0JICogcmVzb2x1dGlv
biBwYW5lbCBvciBhbiBhbmFsb2cgVFYgb3V0cHV0KSwgcXVlcnkgaXQuCi0JICovCi0JZHNzZGV2
ID0gb21hcF9jb25uZWN0b3JfZmluZF9kZXZpY2UoY29ubmVjdG9yLAotCQkJCQkgICAgT01BUF9E
U1NfREVWSUNFX09QX01PREVTKTsKIAlpZiAoZHNzZGV2KQogCQlyZXR1cm4gZHNzZGV2LT5vcHMt
PmdldF9tb2Rlcyhkc3NkZXYsIGNvbm5lY3Rvcik7CiAKLQkvKgotCSAqIFdlIGNhbid0IHJldHJp
ZXZlIG1vZGVzLCB3aGljaCBjYW4gaGFwcGVuIGZvciBpbnN0YW5jZSBmb3IgYSBEVkkgb3IKLQkg
KiBWR0Egb3V0cHV0IHdpdGggdGhlIEREQyBidXMgdW5jb25uZWN0ZWQuIFRoZSBLTVMgY29yZSB3
aWxsIGFkZCB0aGUKLQkgKiBkZWZhdWx0IG1vZGVzLgotCSAqLworCS8qIFdlIGNhbid0IHJldHJp
ZXZlIG1vZGVzLiBUaGUgS01TIGNvcmUgd2lsbCBhZGQgdGhlIGRlZmF1bHQgbW9kZXMuICovCiAJ
cmV0dXJuIDA7CiB9CiAKQEAgLTI5MCw3ICsxNTcsNiBAQCBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAq
b21hcF9jb25uZWN0b3JfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogewogCXN0cnVjdCBk
cm1fY29ubmVjdG9yICpjb25uZWN0b3IgPSBOVUxMOwogCXN0cnVjdCBvbWFwX2Nvbm5lY3RvciAq
b21hcF9jb25uZWN0b3I7Ci0Jc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2OwogCiAJREJH
KCIlcyIsIG91dHB1dC0+bmFtZSk7CiAKQEAgLTMwOCwyNCArMTc0LDYgQEAgc3RydWN0IGRybV9j
b25uZWN0b3IgKm9tYXBfY29ubmVjdG9yX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJ
CSAgIG9tYXBfY29ubmVjdG9yX2dldF90eXBlKG91dHB1dCkpOwogCWRybV9jb25uZWN0b3JfaGVs
cGVyX2FkZChjb25uZWN0b3IsICZvbWFwX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCi0JLyoK
LQkgKiBJbml0aWFsaXplIGNvbm5lY3RvciBzdGF0dXMgaGFuZGxpbmcuIEZpcnN0IHRyeSB0byBm
aW5kIGEgZGV2aWNlIHRoYXQKLQkgKiBzdXBwb3J0cyBob3QtcGx1ZyByZXBvcnRpbmcuIElmIGl0
IGZhaWxzLCBmYWxsIGJhY2sgdG8gYSBkZXZpY2UgdGhhdAotCSAqIHN1cHBvcnQgcG9sbGluZy4g
SWYgdGhhdCBmYWlscyB0b28sIHdlIGRvbid0IHN1cHBvcnQgaG90LXBsdWcKLQkgKiBkZXRlY3Rp
b24gYXQgYWxsLgotCSAqLwotCWRzc2RldiA9IG9tYXBfY29ubmVjdG9yX2ZpbmRfZGV2aWNlKGNv
bm5lY3RvciwgT01BUF9EU1NfREVWSUNFX09QX0hQRCk7Ci0JaWYgKGRzc2RldikgewotCQlvbWFw
X2Nvbm5lY3Rvci0+aHBkID0gb21hcGRzc19kZXZpY2VfZ2V0KGRzc2Rldik7Ci0JCWNvbm5lY3Rv
ci0+cG9sbGVkID0gRFJNX0NPTk5FQ1RPUl9QT0xMX0hQRDsKLQl9IGVsc2UgewotCQlkc3NkZXYg
PSBvbWFwX2Nvbm5lY3Rvcl9maW5kX2RldmljZShjb25uZWN0b3IsCi0JCQkJCQkgICAgT01BUF9E
U1NfREVWSUNFX09QX0RFVEVDVCk7Ci0JCWlmIChkc3NkZXYpCi0JCQljb25uZWN0b3ItPnBvbGxl
ZCA9IERSTV9DT05ORUNUT1JfUE9MTF9DT05ORUNUIHwKLQkJCQkJICAgIERSTV9DT05ORUNUT1Jf
UE9MTF9ESVNDT05ORUNUOwotCX0KLQogCXJldHVybiBjb25uZWN0b3I7CiAKIGZhaWw6CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2Nvbm5lY3Rvci5oIGIvZHJpdmVy
cy9ncHUvZHJtL29tYXBkcm0vb21hcF9jb25uZWN0b3IuaAppbmRleCA0YWE1NjA4ZjRiYmUuLjBl
Y2Q0ZjE2NTViNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9jb25u
ZWN0b3IuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2Nvbm5lY3Rvci5oCkBA
IC0yMSw4ICsyMSw2IEBAIHN0cnVjdCBvbWFwX2Rzc19kZXZpY2U7CiBzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqb21hcF9jb25uZWN0b3JfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCQkg
IHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKm91dHB1dCwKIAkJCQkJICBzdHJ1Y3QgZHJtX2VuY29k
ZXIgKmVuY29kZXIpOwotdm9pZCBvbWFwX2Nvbm5lY3Rvcl9lbmFibGVfaHBkKHN0cnVjdCBkcm1f
Y29ubmVjdG9yICpjb25uZWN0b3IpOwotdm9pZCBvbWFwX2Nvbm5lY3Rvcl9kaXNhYmxlX2hwZChz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKTsKIGVudW0gZHJtX21vZGVfc3RhdHVzIG9t
YXBfY29ubmVjdG9yX21vZGVfZml4dXAoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LAog
CQkJCQljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwKIAkJCQkJc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL29tYXBkcm0vb21hcF9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBfZHJ2
LmMKaW5kZXggZjM4ZDk1Y2IzMWJhLi5mNGE3NTcyZTQ3MzcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9vbWFwZHJtL29tYXBfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0v
b21hcF9kcnYuYwpAQCAtNDI5LDkgKzQyOSw3IEBAIHN0YXRpYyB2b2lkIG9tYXBfbW9kZXNldF9l
bmFibGVfZXh0ZXJuYWxfaHBkKHN0cnVjdCBkcm1fZGV2aWNlICpkZGV2KQogCQlpZiAoIWNvbm5l
Y3RvcikKIAkJCWNvbnRpbnVlOwogCi0JCWlmIChwcml2LT5waXBlc1tpXS5vdXRwdXQtPm5leHQp
Ci0JCQlvbWFwX2Nvbm5lY3Rvcl9lbmFibGVfaHBkKGNvbm5lY3Rvcik7Ci0JCWVsc2UKKwkJaWYg
KHByaXYtPnBpcGVzW2ldLm91dHB1dC0+YnJpZGdlKQogCQkJZHJtX2JyaWRnZV9jb25uZWN0b3Jf
ZW5hYmxlX2hwZChjb25uZWN0b3IpOwogCX0KIH0KQEAgLTQ1MCw5ICs0NDgsNyBAQCBzdGF0aWMg
dm9pZCBvbWFwX21vZGVzZXRfZGlzYWJsZV9leHRlcm5hbF9ocGQoc3RydWN0IGRybV9kZXZpY2Ug
KmRkZXYpCiAJCWlmICghY29ubmVjdG9yKQogCQkJY29udGludWU7CiAKLQkJaWYgKHByaXYtPnBp
cGVzW2ldLm91dHB1dC0+bmV4dCkKLQkJCW9tYXBfY29ubmVjdG9yX2Rpc2FibGVfaHBkKGNvbm5l
Y3Rvcik7Ci0JCWVsc2UKKwkJaWYgKHByaXYtPnBpcGVzW2ldLm91dHB1dC0+YnJpZGdlKQogCQkJ
ZHJtX2JyaWRnZV9jb25uZWN0b3JfZGlzYWJsZV9ocGQoY29ubmVjdG9yKTsKIAl9CiB9Ci0tIApS
ZWdhcmRzLAoKTGF1cmVudCBQaW5jaGFydAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlz
dGluZm8vZHJpLWRldmVs
