Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C6FB322E7D
	for <lists+dri-devel@lfdr.de>; Mon, 20 May 2019 10:23:41 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3F6F9892B9;
	Mon, 20 May 2019 08:22:53 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x543.google.com (mail-ed1-x543.google.com
 [IPv6:2a00:1450:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5B6AB892BD
 for <dri-devel@lists.freedesktop.org>; Mon, 20 May 2019 08:22:50 +0000 (UTC)
Received: by mail-ed1-x543.google.com with SMTP id w33so22505511edb.10
 for <dri-devel@lists.freedesktop.org>; Mon, 20 May 2019 01:22:50 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=xHfqkSV74jmIRSkBNAdVICfQlDsa5PIgoLr5Sx0NTyI=;
 b=s6UqU0K/8u70JFuJOdWxEslDyzJlGxdE/Rjv5MYkzQ0ApLeDQTsrymijyZR3VcnBqZ
 1qnuTkPw0bZZLLMci3SwB95+3AcvbeKUkeBLEeaNCb3Nsrb/oDhhQyh4bqzMRTuiWIrV
 HsCkgklVpCFXjIDP/fl9WHg1LiLDWovncBqOPD/zkB07FG3Ug8Kmu7IE2rumZNs5HFJk
 rIlXxyu5x7fab1MLlvBVNOg/rV6bWz+nA0MDt18SIgyiSWPw1FccGd7jMDJPMR1NtDfB
 YgUp5wdSos3y8/ToPBcVyIML5xQyqWnzDbGpCdZEi9xkPkCFP7Etx/SQjuYrMXeWC9LB
 3Lhw==
X-Gm-Message-State: APjAAAWM4VvXMocIlWwfuvbQfdUbWwhsv/i0FuupcPtswOS8jjlVzSHP
 1PD26f9IFiHz1QhcSQD8Q1JJtOJdJKk=
X-Google-Smtp-Source: APXvYqyC4hgRFqMJjkLnrlCAxP5rwYBOqkxrAyo7Wm9sEbgxexRmYhyqXMj7Bluqo1bGD4K990cx6A==
X-Received: by 2002:a17:906:958:: with SMTP id
 j24mr48334946ejd.160.1558340567057; 
 Mon, 20 May 2019 01:22:47 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id t25sm3021263ejx.8.2019.05.20.01.22.45
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Mon, 20 May 2019 01:22:46 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: DRI Development <dri-devel@lists.freedesktop.org>
Subject: [PATCH 21/33] fbdev: directly call fbcon_suspended/resumed
Date: Mon, 20 May 2019 10:22:04 +0200
Message-Id: <20190520082216.26273-22-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190520082216.26273-1-daniel.vetter@ffwll.ch>
References: <20190520082216.26273-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=xHfqkSV74jmIRSkBNAdVICfQlDsa5PIgoLr5Sx0NTyI=;
 b=jTQ7n8zNXJkvtFvmjdnfvm+jTh+NJ3kuVNVQZLIh37weY1S4NSxehEZWjhQFxjVOuz
 SyqveHXtNf8X0+enQ+5vT2dIfEBzdl6QnpzwvOMKi++BqG4ybd68ehLeh+5O14CZHo46
 oKwRz7mJpW1jWDJB5souIVZzSVJbeUwejz63k=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Prarit Bhargava <prarit@redhat.com>, linux-fbdev@vger.kernel.org,
 Kees Cook <keescook@chromium.org>,
 Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 LKML <linux-kernel@vger.kernel.org>,
 =?UTF-8?q?Micha=C5=82=20Miros=C5=82aw?= <mirq-linux@rere.qmqm.pl>,
 Yisheng Xie <ysxie@foxmail.com>, Hans de Goede <hdegoede@redhat.com>,
 Mikulas Patocka <mpatocka@redhat.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Daniel Vetter <daniel.vetter@intel.com>, Peter Rosin <peda@axentia.se>,
 Konstantin Khorenko <khorenko@virtuozzo.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V2l0aCB0aGUgc2hfbW9iaWxlIG5vdGlmaWVyIHJlbW92ZWQgd2UgY2FuIGp1c3QgZGlyZWN0bHkg
Y2FsbCB0aGUKZmJjb24gY29kZSBoZXJlLgoKdjI6IFJlbW92ZSBub3cgdW51c2VkIGxvY2FsIHZh
cmlhYmxlLgoKU2lnbmVkLW9mZi1ieTogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBpbnRl
bC5jb20+CkNjOiBCYXJ0bG9taWVqIFpvbG5pZXJraWV3aWN6IDxiLnpvbG5pZXJraWVAc2Ftc3Vu
Zy5jb20+CkNjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgpDYzogSGFu
cyBkZSBHb2VkZSA8aGRlZ29lZGVAcmVkaGF0LmNvbT4KQ2M6IEdyZWcgS3JvYWgtSGFydG1hbiA8
Z3JlZ2toQGxpbnV4Zm91bmRhdGlvbi5vcmc+CkNjOiBQcmFyaXQgQmhhcmdhdmEgPHByYXJpdEBy
ZWRoYXQuY29tPgpDYzogS2VlcyBDb29rIDxrZWVzY29va0BjaHJvbWl1bS5vcmc+CkNjOiBLb25z
dGFudGluIEtob3JlbmtvIDxraG9yZW5rb0B2aXJ0dW96em8uY29tPgpDYzogWWlzaGVuZyBYaWUg
PHlzeGllQGZveG1haWwuY29tPgpDYzogIk1pY2hhxYIgTWlyb3PFgmF3IiA8bWlycS1saW51eEBy
ZXJlLnFtcW0ucGw+CkNjOiBQZXRlciBSb3NpbiA8cGVkYUBheGVudGlhLnNlPgpDYzogTWlrdWxh
cyBQYXRvY2thIDxtcGF0b2NrYUByZWRoYXQuY29tPgpDYzogbGludXgtZmJkZXZAdmdlci5rZXJu
ZWwub3JnCi0tLQogZHJpdmVycy92aWRlby9mYmRldi9jb3JlL2ZiY29uLmMgfCAxMCArKy0tLS0t
LS0tCiBkcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJtZW0uYyB8ICA3ICsrLS0tLS0KIGluY2x1
ZGUvbGludXgvZmIuaCAgICAgICAgICAgICAgIHwgIDggLS0tLS0tLS0KIGluY2x1ZGUvbGludXgv
ZmJjb24uaCAgICAgICAgICAgIHwgIDQgKysrKwogNCBmaWxlcyBjaGFuZ2VkLCA4IGluc2VydGlv
bnMoKyksIDIxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vZmJkZXYv
Y29yZS9mYmNvbi5jIGIvZHJpdmVycy92aWRlby9mYmRldi9jb3JlL2ZiY29uLmMKaW5kZXggYThk
MTI5MTRiNTU5Li5iMDU2ZDExOTA3ODggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8vZmJkZXYv
Y29yZS9mYmNvbi5jCisrKyBiL2RyaXZlcnMvdmlkZW8vZmJkZXYvY29yZS9mYmNvbi5jCkBAIC0y
OTE1LDcgKzI5MTUsNyBAQCBzdGF0aWMgaW50IGZiY29uX3NldF9vcmlnaW4oc3RydWN0IHZjX2Rh
dGEgKnZjKQogCXJldHVybiAwOwogfQogCi1zdGF0aWMgdm9pZCBmYmNvbl9zdXNwZW5kZWQoc3Ry
dWN0IGZiX2luZm8gKmluZm8pCit2b2lkIGZiY29uX3N1c3BlbmRlZChzdHJ1Y3QgZmJfaW5mbyAq
aW5mbykKIHsKIAlzdHJ1Y3QgdmNfZGF0YSAqdmMgPSBOVUxMOwogCXN0cnVjdCBmYmNvbl9vcHMg
Km9wcyA9IGluZm8tPmZiY29uX3BhcjsKQEAgLTI5MjgsNyArMjkyOCw3IEBAIHN0YXRpYyB2b2lk
IGZiY29uX3N1c3BlbmRlZChzdHJ1Y3QgZmJfaW5mbyAqaW5mbykKIAlmYmNvbl9jdXJzb3IodmMs
IENNX0VSQVNFKTsKIH0KIAotc3RhdGljIHZvaWQgZmJjb25fcmVzdW1lZChzdHJ1Y3QgZmJfaW5m
byAqaW5mbykKK3ZvaWQgZmJjb25fcmVzdW1lZChzdHJ1Y3QgZmJfaW5mbyAqaW5mbykKIHsKIAlz
dHJ1Y3QgdmNfZGF0YSAqdmM7CiAJc3RydWN0IGZiY29uX29wcyAqb3BzID0gaW5mby0+ZmJjb25f
cGFyOwpAQCAtMzMyNiwxMiArMzMyNiw2IEBAIHN0YXRpYyBpbnQgZmJjb25fZXZlbnRfbm90aWZ5
KHN0cnVjdCBub3RpZmllcl9ibG9jayAqc2VsZiwKIAlpbnQgaWR4LCByZXQgPSAwOwogCiAJc3dp
dGNoKGFjdGlvbikgewotCWNhc2UgRkJfRVZFTlRfU1VTUEVORDoKLQkJZmJjb25fc3VzcGVuZGVk
KGluZm8pOwotCQlicmVhazsKLQljYXNlIEZCX0VWRU5UX1JFU1VNRToKLQkJZmJjb25fcmVzdW1l
ZChpbmZvKTsKLQkJYnJlYWs7CiAJY2FzZSBGQl9FVkVOVF9NT0RFX0NIQU5HRToKIAkJZmJjb25f
bW9kZWNoYW5nZWQoaW5mbyk7CiAJCWJyZWFrOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9m
YmRldi9jb3JlL2ZibWVtLmMgYi9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJtZW0uYwppbmRl
eCBmMDU5YjBiMWEwMzAuLjdjNTU4NDZlZTVmYyAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9m
YmRldi9jb3JlL2ZibWVtLmMKKysrIGIvZHJpdmVycy92aWRlby9mYmRldi9jb3JlL2ZibWVtLmMK
QEAgLTE4ODEsMTcgKzE4ODEsMTQgQEAgRVhQT1JUX1NZTUJPTCh1bnJlZ2lzdGVyX2ZyYW1lYnVm
ZmVyKTsKICAqLwogdm9pZCBmYl9zZXRfc3VzcGVuZChzdHJ1Y3QgZmJfaW5mbyAqaW5mbywgaW50
IHN0YXRlKQogewotCXN0cnVjdCBmYl9ldmVudCBldmVudDsKLQogCVdBUk5fQ09OU09MRV9VTkxP
Q0tFRCgpOwogCi0JZXZlbnQuaW5mbyA9IGluZm87CiAJaWYgKHN0YXRlKSB7Ci0JCWZiX25vdGlm
aWVyX2NhbGxfY2hhaW4oRkJfRVZFTlRfU1VTUEVORCwgJmV2ZW50KTsKKwkJZmJjb25fc3VzcGVu
ZGVkKGluZm8pOwogCQlpbmZvLT5zdGF0ZSA9IEZCSU5GT19TVEFURV9TVVNQRU5ERUQ7CiAJfSBl
bHNlIHsKIAkJaW5mby0+c3RhdGUgPSBGQklORk9fU1RBVEVfUlVOTklORzsKLQkJZmJfbm90aWZp
ZXJfY2FsbF9jaGFpbihGQl9FVkVOVF9SRVNVTUUsICZldmVudCk7CisJCWZiY29uX3Jlc3VtZWQo
aW5mbyk7CiAJfQogfQogRVhQT1JUX1NZTUJPTChmYl9zZXRfc3VzcGVuZCk7CmRpZmYgLS1naXQg
YS9pbmNsdWRlL2xpbnV4L2ZiLmggYi9pbmNsdWRlL2xpbnV4L2ZiLmgKaW5kZXggNDQwMjFlNTVi
MTVjLi5hNzhiYmQzNzJjZmQgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvZmIuaAorKysgYi9p
bmNsdWRlL2xpbnV4L2ZiLmgKQEAgLTEyNiwxNCArMTI2LDYgQEAgc3RydWN0IGZiX2N1cnNvcl91
c2VyIHsKIAogLyoJVGhlIHJlc29sdXRpb24gb2YgdGhlIHBhc3NlZCBpbiBmYl9pbmZvIGFib3V0
IHRvIGNoYW5nZSAqLyAKICNkZWZpbmUgRkJfRVZFTlRfTU9ERV9DSEFOR0UJCTB4MDEKLS8qCVRo
ZSBkaXNwbGF5IG9uIHRoaXMgZmJfaW5mbyBpcyBiZWluZyBzdXNwZW5kZWQsIG5vIGFjY2VzcyB0
byB0aGUKLSAqCWZyYW1lYnVmZmVyIGlzIGFsbG93ZWQgYW55IG1vcmUgYWZ0ZXIgdGhhdCBjYWxs
IHJldHVybnMKLSAqLwotI2RlZmluZSBGQl9FVkVOVF9TVVNQRU5ECQkweDAyCi0vKglUaGUgZGlz
cGxheSBvbiB0aGlzIGZiX2luZm8gd2FzIHJlc3VtZWQsIHlvdSBjYW4gcmVzdG9yZSB0aGUgZGlz
cGxheQotICoJaWYgeW91IG93biBpdAotICovCi0jZGVmaW5lIEZCX0VWRU5UX1JFU1VNRQkJCTB4
MDMKIC8qICAgICAgQW4gZW50cnkgZnJvbSB0aGUgbW9kZWxpc3Qgd2FzIHJlbW92ZWQgKi8KICNk
ZWZpbmUgRkJfRVZFTlRfTU9ERV9ERUxFVEUgICAgICAgICAgICAweDA0CiAvKiAgICAgIENPTlNP
TEUtU1BFQ0lGSUM6IGdldCBjb25zb2xlIHRvIGZyYW1lYnVmZmVyIG1hcHBpbmcgKi8KZGlmZiAt
LWdpdCBhL2luY2x1ZGUvbGludXgvZmJjb24uaCBiL2luY2x1ZGUvbGludXgvZmJjb24uaAppbmRl
eCAzOGQ0NGZkYjZkMTQuLjYxYTIyZTZjMGM2NCAxMDA2NDQKLS0tIGEvaW5jbHVkZS9saW51eC9m
YmNvbi5oCisrKyBiL2luY2x1ZGUvbGludXgvZmJjb24uaApAQCAtNywxMiArNywxNiBAQCB2b2lk
IF9fZXhpdCBmYl9jb25zb2xlX2V4aXQodm9pZCk7CiBpbnQgZmJjb25fZmJfcmVnaXN0ZXJlZChz
dHJ1Y3QgZmJfaW5mbyAqaW5mbyk7CiB2b2lkIGZiY29uX2ZiX3VucmVnaXN0ZXJlZChzdHJ1Y3Qg
ZmJfaW5mbyAqaW5mbyk7CiB2b2lkIGZiY29uX2ZiX3VuYmluZChzdHJ1Y3QgZmJfaW5mbyAqaW5m
byk7Cit2b2lkIGZiY29uX3N1c3BlbmRlZChzdHJ1Y3QgZmJfaW5mbyAqaW5mbyk7Cit2b2lkIGZi
Y29uX3Jlc3VtZWQoc3RydWN0IGZiX2luZm8gKmluZm8pOwogI2Vsc2UKIHN0YXRpYyBpbmxpbmUg
dm9pZCBmYl9jb25zb2xlX2luaXQodm9pZCkge30KIHN0YXRpYyBpbmxpbmUgdm9pZCBmYl9jb25z
b2xlX2V4aXQodm9pZCkge30KIHN0YXRpYyBpbmxpbmUgaW50IGZiY29uX2ZiX3JlZ2lzdGVyZWQo
c3RydWN0IGZiX2luZm8gKmluZm8pIHsgcmV0dXJuIDA7IH0KIHN0YXRpYyBpbmxpbmUgdm9pZCBm
YmNvbl9mYl91bnJlZ2lzdGVyZWQoc3RydWN0IGZiX2luZm8gKmluZm8pIHt9CiBzdGF0aWMgaW5s
aW5lIHZvaWQgZmJjb25fZmJfdW5iaW5kKHN0cnVjdCBmYl9pbmZvICppbmZvKSB7fQorc3RhdGlj
IGlubGluZSB2b2lkIGZiY29uX3N1c3BlbmRlZCh2b2lkKSB7fQorc3RhdGljIGlubGluZSB2b2lk
IGZiY29uX3Jlc3VtZWQodm9pZCkge30KICNlbmRpZgogCiAjZW5kaWYgLyogX0xJTlVYX0ZCQ09O
X0ggKi8KLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0
b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJp
LWRldmVs
