Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8CF6DFA81E
	for <lists+dri-devel@lfdr.de>; Wed, 13 Nov 2019 05:27:52 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 652F86EC72;
	Wed, 13 Nov 2019 04:27:44 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from hqemgate14.nvidia.com (hqemgate14.nvidia.com [216.228.121.143])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C8FCF6EC6C
 for <dri-devel@lists.freedesktop.org>; Wed, 13 Nov 2019 04:27:14 +0000 (UTC)
Received: from hqpgpgate102.nvidia.com (Not Verified[216.228.121.13]) by
 hqemgate14.nvidia.com (using TLS: TLSv1.2, DES-CBC3-SHA)
 id <B5dcb86240003>; Tue, 12 Nov 2019 20:27:16 -0800
Received: from hqmail.nvidia.com ([172.20.161.6])
 by hqpgpgate102.nvidia.com (PGP Universal service);
 Tue, 12 Nov 2019 20:27:13 -0800
X-PGP-Universal: processed;
 by hqpgpgate102.nvidia.com on Tue, 12 Nov 2019 20:27:13 -0800
Received: from HQMAIL111.nvidia.com (172.20.187.18) by HQMAIL111.nvidia.com
 (172.20.187.18) with Microsoft SMTP Server (TLS) id 15.0.1473.3; Wed, 13 Nov
 2019 04:27:12 +0000
Received: from hqnvemgw03.nvidia.com (10.124.88.68) by HQMAIL111.nvidia.com
 (172.20.187.18) with Microsoft SMTP Server (TLS) id 15.0.1473.3 via Frontend
 Transport; Wed, 13 Nov 2019 04:27:12 +0000
Received: from blueforge.nvidia.com (Not Verified[10.110.48.28]) by
 hqnvemgw03.nvidia.com with Trustwave SEG (v7, 5, 8, 10121)
 id <B5dcb86200007>; Tue, 12 Nov 2019 20:27:12 -0800
From: John Hubbard <jhubbard@nvidia.com>
To: Andrew Morton <akpm@linux-foundation.org>
Subject: [PATCH v4 11/23] IB/{core, hw, umem}: set FOLL_PIN,
 FOLL_LONGTERM via pin_longterm_pages*()
Date: Tue, 12 Nov 2019 20:26:58 -0800
Message-ID: <20191113042710.3997854-12-jhubbard@nvidia.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191113042710.3997854-1-jhubbard@nvidia.com>
References: <20191113042710.3997854-1-jhubbard@nvidia.com>
MIME-Version: 1.0
X-NVConfidentiality: public
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=nvidia.com; s=n1; 
 t=1573619236; bh=O/BZyUjQ4JoBMKr0NTdwbOXD2j2Z0e5tPjXaDY+CsoA=;
 h=X-PGP-Universal:From:To:CC:Subject:Date:Message-ID:X-Mailer:
 In-Reply-To:References:MIME-Version:X-NVConfidentiality:
 Content-Transfer-Encoding:Content-Type;
 b=It2q4p+3ojmvAhLpehqX7Ql9Qnyld2TCf/UUfoRHeyzmbaOuqkJW3aG2hQ+wmNGM0
 WRE7YVMiJitDpcHIp55i9KLmfr6hznixGg6hkvziShvb3zQ9vtnahxHmF1rbE14qxv
 q7IATctdqgDz8UPq7hm9Lm94rtAkpcNuaTwZ6JUK/unx24XQ6DnwdcQOTdUPwLKRK3
 8dDB8hr8DV93PLrGlo6p644lx7irmp2biJ1H0NiabWAz4RVZiKoeRh6IJrQ9LvgZRB
 lJMRX/GdBxcP/u8jpwGGM6HZuyRx4BNw2016eZCqA2dQ6CAT+bJYhLJ5TUiVBtkrdU
 Rvrb71ZMj1sIg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Michal Hocko <mhocko@suse.com>, Jan Kara <jack@suse.cz>,
 kvm@vger.kernel.org, linux-doc@vger.kernel.org,
 David Airlie <airlied@linux.ie>, Dave Chinner <david@fromorbit.com>,
 dri-devel@lists.freedesktop.org, LKML <linux-kernel@vger.kernel.org>,
 linux-mm@kvack.org, Paul Mackerras <paulus@samba.org>,
 linux-kselftest@vger.kernel.org, Ira Weiny <ira.weiny@intel.com>,
 Jonathan Corbet <corbet@lwn.net>, linux-rdma@vger.kernel.org,
 Michael Ellerman <mpe@ellerman.id.au>, Christoph Hellwig <hch@infradead.org>,
 Jason Gunthorpe <jgg@ziepe.ca>, Vlastimil Babka <vbabka@suse.cz>,
 =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@intel.com>,
 linux-media@vger.kernel.org, Shuah Khan <shuah@kernel.org>,
 John Hubbard <jhubbard@nvidia.com>, linux-block@vger.kernel.org,
 =?UTF-8?q?J=C3=A9r=C3=B4me=20Glisse?= <jglisse@redhat.com>,
 Al Viro <viro@zeniv.linux.org.uk>, Dan Williams <dan.j.williams@intel.com>,
 Mauro Carvalho Chehab <mchehab@kernel.org>,
 Magnus Karlsson <magnus.karlsson@intel.com>, Jens Axboe <axboe@kernel.dk>,
 netdev@vger.kernel.org, Alex Williamson <alex.williamson@redhat.com>,
 linux-fsdevel@vger.kernel.org, bpf@vger.kernel.org,
 linuxppc-dev@lists.ozlabs.org, "David S . Miller" <davem@davemloft.net>,
 Mike Kravetz <mike.kravetz@oracle.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q29udmVydCBpbmZpbmliYW5kIHRvIHVzZSB0aGUgbmV3IHdyYXBwZXIgY2FsbHMsIGFuZCBzdG9w
CmV4cGxpY2l0bHkgc2V0dGluZyBGT0xMX0xPTkdURVJNIGF0IHRoZSBjYWxsIHNpdGVzLgoKVGhl
IG5ldyBwaW5fbG9uZ3Rlcm1fKigpIGNhbGxzIHJlcGxhY2UgZ2V0X3VzZXJfcGFnZXMqKCkKY2Fs
bHMsIGFuZCBzZXQgYm90aCBGT0xMX0xPTkdURVJNIGFuZCBhIG5ldyBGT0xMX1BJTgpmbGFnLiBU
aGUgRk9MTF9QSU4gZmxhZyByZXF1aXJlcyB0aGF0IHRoZSBjYWxsZXIgbXVzdApyZXR1cm4gdGhl
IHBhZ2VzIHZpYSBwdXRfdXNlcl9wYWdlKigpIGNhbGxzLCBidXQKaW5maW5pYmFuZCB3YXMgYWxy
ZWFkeSBkb2luZyB0aGF0IGFzIHBhcnQgb2YgYW4gZWFybGllcgpjb21taXQuCgpSZXZpZXdlZC1i
eTogSXJhIFdlaW55IDxpcmEud2VpbnlAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBKb2huIEh1
YmJhcmQgPGpodWJiYXJkQG52aWRpYS5jb20+Ci0tLQogZHJpdmVycy9pbmZpbmliYW5kL2NvcmUv
dW1lbS5jICAgICAgICAgICAgICB8IDEwICsrKysrLS0tLS0KIGRyaXZlcnMvaW5maW5pYmFuZC9j
b3JlL3VtZW1fb2RwLmMgICAgICAgICAgfCAxMyArKysrKystLS0tLS0tCiBkcml2ZXJzL2luZmlu
aWJhbmQvaHcvaGZpMS91c2VyX3BhZ2VzLmMgICAgIHwgIDQgKystLQogZHJpdmVycy9pbmZpbmli
YW5kL2h3L210aGNhL210aGNhX21lbWZyZWUuYyB8ICAzICstLQogZHJpdmVycy9pbmZpbmliYW5k
L2h3L3FpYi9xaWJfdXNlcl9wYWdlcy5jICB8ICA4ICsrKystLS0tCiBkcml2ZXJzL2luZmluaWJh
bmQvaHcvcWliL3FpYl91c2VyX3NkbWEuYyAgIHwgIDIgKy0KIGRyaXZlcnMvaW5maW5pYmFuZC9o
dy91c25pYy91c25pY191aW9tLmMgICAgfCAgOSArKysrLS0tLS0KIGRyaXZlcnMvaW5maW5pYmFu
ZC9zdy9zaXcvc2l3X21lbS5jICAgICAgICAgfCAgNSArKy0tLQogOCBmaWxlcyBjaGFuZ2VkLCAy
NSBpbnNlcnRpb25zKCspLCAyOSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2lu
ZmluaWJhbmQvY29yZS91bWVtLmMgYi9kcml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVtLmMKaW5k
ZXggM2Q2NjRhMjUzOWViLi43ZjAzZjcyZTZkY2UgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvaW5maW5p
YmFuZC9jb3JlL3VtZW0uYworKysgYi9kcml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVtLmMKQEAg
LTI3MSwxMSArMjcxLDExIEBAIHN0cnVjdCBpYl91bWVtICppYl91bWVtX2dldChzdHJ1Y3QgaWJf
dWRhdGEgKnVkYXRhLCB1bnNpZ25lZCBsb25nIGFkZHIsCiAJc2cgPSB1bWVtLT5zZ19oZWFkLnNn
bDsKIAogCXdoaWxlIChucGFnZXMpIHsKLQkJcmV0ID0gZ2V0X3VzZXJfcGFnZXNfZmFzdChjdXJf
YmFzZSwKLQkJCQkJICBtaW5fdCh1bnNpZ25lZCBsb25nLCBucGFnZXMsCi0JCQkJCQlQQUdFX1NJ
WkUgLwotCQkJCQkJc2l6ZW9mKHN0cnVjdCBwYWdlICopKSwKLQkJCQkJICBndXBfZmxhZ3MgfCBG
T0xMX0xPTkdURVJNLCBwYWdlX2xpc3QpOworCQlyZXQgPSBwaW5fbG9uZ3Rlcm1fcGFnZXNfZmFz
dChjdXJfYmFzZSwKKwkJCQkJICAgICAgbWluX3QodW5zaWduZWQgbG9uZywgbnBhZ2VzLAorCQkJ
CQkJICAgIFBBR0VfU0laRSAvCisJCQkJCQkgICAgc2l6ZW9mKHN0cnVjdCBwYWdlICopKSwKKwkJ
CQkJICAgICAgZ3VwX2ZsYWdzLCBwYWdlX2xpc3QpOwogCQlpZiAocmV0IDwgMCkKIAkJCWdvdG8g
dW1lbV9yZWxlYXNlOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVt
X29kcC5jIGIvZHJpdmVycy9pbmZpbmliYW5kL2NvcmUvdW1lbV9vZHAuYwppbmRleCAxNjNmZjdi
YTkyYjcuLjExMjQ5NDA2MTQ4YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9pbmZpbmliYW5kL2NvcmUv
dW1lbV9vZHAuYworKysgYi9kcml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVtX29kcC5jCkBAIC00
OTUsOSArNDk1LDggQEAgRVhQT1JUX1NZTUJPTChpYl91bWVtX29kcF9yZWxlYXNlKTsKICAqIFRo
ZSBmdW5jdGlvbiByZXR1cm5zIC1FRkFVTFQgaWYgdGhlIERNQSBtYXBwaW5nIG9wZXJhdGlvbiBm
YWlscy4gSXQgcmV0dXJucwogICogLUVBR0FJTiBpZiBhIGNvbmN1cnJlbnQgaW52YWxpZGF0aW9u
IHByZXZlbnRzIHVzIGZyb20gdXBkYXRpbmcgdGhlIHBhZ2UuCiAgKgotICogVGhlIHBhZ2UgaXMg
cmVsZWFzZWQgdmlhIHB1dF91c2VyX3BhZ2UgZXZlbiBpZiB0aGUgb3BlcmF0aW9uIGZhaWxlZC4g
Rm9yCi0gKiBvbi1kZW1hbmQgcGlubmluZywgdGhlIHBhZ2UgaXMgcmVsZWFzZWQgd2hlbmV2ZXIg
aXQgaXNuJ3Qgc3RvcmVkIGluIHRoZQotICogdW1lbS4KKyAqIFRoZSBwYWdlIGlzIHJlbGVhc2Vk
IHZpYSBwdXRfcGFnZSBldmVuIGlmIHRoZSBvcGVyYXRpb24gZmFpbGVkLiBGb3Igb24tZGVtYW5k
CisgKiBwaW5uaW5nLCB0aGUgcGFnZSBpcyByZWxlYXNlZCB3aGVuZXZlciBpdCBpc24ndCBzdG9y
ZWQgaW4gdGhlIHVtZW0uCiAgKi8KIHN0YXRpYyBpbnQgaWJfdW1lbV9vZHBfbWFwX2RtYV9zaW5n
bGVfcGFnZSgKIAkJc3RydWN0IGliX3VtZW1fb2RwICp1bWVtX29kcCwKQEAgLTU0Miw3ICs1NDEs
NyBAQCBzdGF0aWMgaW50IGliX3VtZW1fb2RwX21hcF9kbWFfc2luZ2xlX3BhZ2UoCiAJfQogCiBv
dXQ6Ci0JcHV0X3VzZXJfcGFnZShwYWdlKTsKKwlwdXRfcGFnZShwYWdlKTsKIAogCWlmIChyZW1v
dmVfZXhpc3RpbmdfbWFwcGluZykgewogCQlpYl91bWVtX25vdGlmaWVyX3N0YXJ0X2FjY291bnQo
dW1lbV9vZHApOwpAQCAtNjY1LDcgKzY2NCw3IEBAIGludCBpYl91bWVtX29kcF9tYXBfZG1hX3Bh
Z2VzKHN0cnVjdCBpYl91bWVtX29kcCAqdW1lbV9vZHAsIHU2NCB1c2VyX3ZpcnQsCiAJCQkJCXJl
dCA9IC1FRkFVTFQ7CiAJCQkJCWJyZWFrOwogCQkJCX0KLQkJCQlwdXRfdXNlcl9wYWdlKGxvY2Fs
X3BhZ2VfbGlzdFtqXSk7CisJCQkJcHV0X3BhZ2UobG9jYWxfcGFnZV9saXN0W2pdKTsKIAkJCQlj
b250aW51ZTsKIAkJCX0KIApAQCAtNjkyLDggKzY5MSw4IEBAIGludCBpYl91bWVtX29kcF9tYXBf
ZG1hX3BhZ2VzKHN0cnVjdCBpYl91bWVtX29kcCAqdW1lbV9vZHAsIHU2NCB1c2VyX3ZpcnQsCiAJ
CQkgKiBpYl91bWVtX29kcF9tYXBfZG1hX3NpbmdsZV9wYWdlKCkuCiAJCQkgKi8KIAkJCWlmIChu
cGFnZXMgLSAoaiArIDEpID4gMCkKLQkJCQlwdXRfdXNlcl9wYWdlcygmbG9jYWxfcGFnZV9saXN0
W2orMV0sCi0JCQkJCSAgICAgICBucGFnZXMgLSAoaiArIDEpKTsKKwkJCQlyZWxlYXNlX3BhZ2Vz
KCZsb2NhbF9wYWdlX2xpc3RbaisxXSwKKwkJCQkJICAgICAgbnBhZ2VzIC0gKGogKyAxKSk7CiAJ
CQlicmVhazsKIAkJfQogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvaW5maW5pYmFuZC9ody9oZmkx
L3VzZXJfcGFnZXMuYyBiL2RyaXZlcnMvaW5maW5pYmFuZC9ody9oZmkxL3VzZXJfcGFnZXMuYwpp
bmRleCA0NjlhY2I5NjFmYmQuLjliNTViMGE3M2UyOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9pbmZp
bmliYW5kL2h3L2hmaTEvdXNlcl9wYWdlcy5jCisrKyBiL2RyaXZlcnMvaW5maW5pYmFuZC9ody9o
ZmkxL3VzZXJfcGFnZXMuYwpAQCAtMTA0LDkgKzEwNCw5IEBAIGludCBoZmkxX2FjcXVpcmVfdXNl
cl9wYWdlcyhzdHJ1Y3QgbW1fc3RydWN0ICptbSwgdW5zaWduZWQgbG9uZyB2YWRkciwgc2l6ZV90
IG5wCiAJCQkgICAgYm9vbCB3cml0YWJsZSwgc3RydWN0IHBhZ2UgKipwYWdlcykKIHsKIAlpbnQg
cmV0OwotCXVuc2lnbmVkIGludCBndXBfZmxhZ3MgPSBGT0xMX0xPTkdURVJNIHwgKHdyaXRhYmxl
ID8gRk9MTF9XUklURSA6IDApOworCXVuc2lnbmVkIGludCBndXBfZmxhZ3MgPSAod3JpdGFibGUg
PyBGT0xMX1dSSVRFIDogMCk7CiAKLQlyZXQgPSBnZXRfdXNlcl9wYWdlc19mYXN0KHZhZGRyLCBu
cGFnZXMsIGd1cF9mbGFncywgcGFnZXMpOworCXJldCA9IHBpbl9sb25ndGVybV9wYWdlc19mYXN0
KHZhZGRyLCBucGFnZXMsIGd1cF9mbGFncywgcGFnZXMpOwogCWlmIChyZXQgPCAwKQogCQlyZXR1
cm4gcmV0OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2luZmluaWJhbmQvaHcvbXRoY2EvbXRoY2Ff
bWVtZnJlZS5jIGIvZHJpdmVycy9pbmZpbmliYW5kL2h3L210aGNhL210aGNhX21lbWZyZWUuYwpp
bmRleCBlZGNjZmQ2ZTE3OGYuLmJlZWM3ZTRiOGE5NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9pbmZp
bmliYW5kL2h3L210aGNhL210aGNhX21lbWZyZWUuYworKysgYi9kcml2ZXJzL2luZmluaWJhbmQv
aHcvbXRoY2EvbXRoY2FfbWVtZnJlZS5jCkBAIC00NzIsOCArNDcyLDcgQEAgaW50IG10aGNhX21h
cF91c2VyX2RiKHN0cnVjdCBtdGhjYV9kZXYgKmRldiwgc3RydWN0IG10aGNhX3VhciAqdWFyLAog
CQlnb3RvIG91dDsKIAl9CiAKLQlyZXQgPSBnZXRfdXNlcl9wYWdlc19mYXN0KHVhZGRyICYgUEFH
RV9NQVNLLCAxLAotCQkJCSAgRk9MTF9XUklURSB8IEZPTExfTE9OR1RFUk0sIHBhZ2VzKTsKKwly
ZXQgPSBwaW5fbG9uZ3Rlcm1fcGFnZXNfZmFzdCh1YWRkciAmIFBBR0VfTUFTSywgMSwgRk9MTF9X
UklURSwgcGFnZXMpOwogCWlmIChyZXQgPCAwKQogCQlnb3RvIG91dDsKIApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9pbmZpbmliYW5kL2h3L3FpYi9xaWJfdXNlcl9wYWdlcy5jIGIvZHJpdmVycy9pbmZp
bmliYW5kL2h3L3FpYi9xaWJfdXNlcl9wYWdlcy5jCmluZGV4IDZiZjc2NGU0MTg5MS4uNjg0YTE0
ZTE0ZDliIDEwMDY0NAotLS0gYS9kcml2ZXJzL2luZmluaWJhbmQvaHcvcWliL3FpYl91c2VyX3Bh
Z2VzLmMKKysrIGIvZHJpdmVycy9pbmZpbmliYW5kL2h3L3FpYi9xaWJfdXNlcl9wYWdlcy5jCkBA
IC0xMDgsMTAgKzEwOCwxMCBAQCBpbnQgcWliX2dldF91c2VyX3BhZ2VzKHVuc2lnbmVkIGxvbmcg
c3RhcnRfcGFnZSwgc2l6ZV90IG51bV9wYWdlcywKIAogCWRvd25fcmVhZCgmY3VycmVudC0+bW0t
Pm1tYXBfc2VtKTsKIAlmb3IgKGdvdCA9IDA7IGdvdCA8IG51bV9wYWdlczsgZ290ICs9IHJldCkg
ewotCQlyZXQgPSBnZXRfdXNlcl9wYWdlcyhzdGFydF9wYWdlICsgZ290ICogUEFHRV9TSVpFLAot
CQkJCSAgICAgbnVtX3BhZ2VzIC0gZ290LAotCQkJCSAgICAgRk9MTF9MT05HVEVSTSB8IEZPTExf
V1JJVEUgfCBGT0xMX0ZPUkNFLAotCQkJCSAgICAgcCArIGdvdCwgTlVMTCk7CisJCXJldCA9IHBp
bl9sb25ndGVybV9wYWdlcyhzdGFydF9wYWdlICsgZ290ICogUEFHRV9TSVpFLAorCQkJCQkgbnVt
X3BhZ2VzIC0gZ290LAorCQkJCQkgRk9MTF9XUklURSB8IEZPTExfRk9SQ0UsCisJCQkJCSBwICsg
Z290LCBOVUxMKTsKIAkJaWYgKHJldCA8IDApIHsKIAkJCXVwX3JlYWQoJmN1cnJlbnQtPm1tLT5t
bWFwX3NlbSk7CiAJCQlnb3RvIGJhaWxfcmVsZWFzZTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvaW5m
aW5pYmFuZC9ody9xaWIvcWliX3VzZXJfc2RtYS5jIGIvZHJpdmVycy9pbmZpbmliYW5kL2h3L3Fp
Yi9xaWJfdXNlcl9zZG1hLmMKaW5kZXggMDUxOTBlZGMyNjExLi5mZDg2YTlkMTkzNzAgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvaW5maW5pYmFuZC9ody9xaWIvcWliX3VzZXJfc2RtYS5jCisrKyBiL2Ry
aXZlcnMvaW5maW5pYmFuZC9ody9xaWIvcWliX3VzZXJfc2RtYS5jCkBAIC02NzAsNyArNjcwLDcg
QEAgc3RhdGljIGludCBxaWJfdXNlcl9zZG1hX3Bpbl9wYWdlcyhjb25zdCBzdHJ1Y3QgcWliX2Rl
dmRhdGEgKmRkLAogCQllbHNlCiAJCQlqID0gbnBhZ2VzOwogCi0JCXJldCA9IGdldF91c2VyX3Bh
Z2VzX2Zhc3QoYWRkciwgaiwgRk9MTF9MT05HVEVSTSwgcGFnZXMpOworCQlyZXQgPSBwaW5fbG9u
Z3Rlcm1fcGFnZXNfZmFzdChhZGRyLCBqLCAwLCBwYWdlcyk7CiAJCWlmIChyZXQgIT0gaikgewog
CQkJaSA9IDA7CiAJCQlqID0gcmV0OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9pbmZpbmliYW5kL2h3
L3VzbmljL3VzbmljX3Vpb20uYyBiL2RyaXZlcnMvaW5maW5pYmFuZC9ody91c25pYy91c25pY191
aW9tLmMKaW5kZXggNjJlNmZmYTlhZDc4Li42YjkwY2ExYzM3NzEgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvaW5maW5pYmFuZC9ody91c25pYy91c25pY191aW9tLmMKKysrIGIvZHJpdmVycy9pbmZpbmli
YW5kL2h3L3VzbmljL3VzbmljX3Vpb20uYwpAQCAtMTQxLDExICsxNDEsMTAgQEAgc3RhdGljIGlu
dCB1c25pY191aW9tX2dldF9wYWdlcyh1bnNpZ25lZCBsb25nIGFkZHIsIHNpemVfdCBzaXplLCBp
bnQgd3JpdGFibGUsCiAJcmV0ID0gMDsKIAogCXdoaWxlIChucGFnZXMpIHsKLQkJcmV0ID0gZ2V0
X3VzZXJfcGFnZXMoY3VyX2Jhc2UsCi0JCQkJICAgICBtaW5fdCh1bnNpZ25lZCBsb25nLCBucGFn
ZXMsCi0JCQkJICAgICBQQUdFX1NJWkUgLyBzaXplb2Yoc3RydWN0IHBhZ2UgKikpLAotCQkJCSAg
ICAgZ3VwX2ZsYWdzIHwgRk9MTF9MT05HVEVSTSwKLQkJCQkgICAgIHBhZ2VfbGlzdCwgTlVMTCk7
CisJCXJldCA9IHBpbl9sb25ndGVybV9wYWdlcyhjdXJfYmFzZSwKKwkJCQkJIG1pbl90KHVuc2ln
bmVkIGxvbmcsIG5wYWdlcywKKwkJCQkJICAgICBQQUdFX1NJWkUgLyBzaXplb2Yoc3RydWN0IHBh
Z2UgKikpLAorCQkJCQkgZ3VwX2ZsYWdzLCBwYWdlX2xpc3QsIE5VTEwpOwogCiAJCWlmIChyZXQg
PCAwKQogCQkJZ290byBvdXQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2luZmluaWJhbmQvc3cvc2l3
L3Npd19tZW0uYyBiL2RyaXZlcnMvaW5maW5pYmFuZC9zdy9zaXcvc2l3X21lbS5jCmluZGV4IGU5
OTk4M2YwNzY2My4uMjBlNjYzZDdhZGE4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2luZmluaWJhbmQv
c3cvc2l3L3Npd19tZW0uYworKysgYi9kcml2ZXJzL2luZmluaWJhbmQvc3cvc2l3L3Npd19tZW0u
YwpAQCAtNDI2LDkgKzQyNiw4IEBAIHN0cnVjdCBzaXdfdW1lbSAqc2l3X3VtZW1fZ2V0KHU2NCBz
dGFydCwgdTY0IGxlbiwgYm9vbCB3cml0YWJsZSkKIAkJd2hpbGUgKG5lbnRzKSB7CiAJCQlzdHJ1
Y3QgcGFnZSAqKnBsaXN0ID0gJnVtZW0tPnBhZ2VfY2h1bmtbaV0ucGxpc3RbZ290XTsKIAotCQkJ
cnYgPSBnZXRfdXNlcl9wYWdlcyhmaXJzdF9wYWdlX3ZhLCBuZW50cywKLQkJCQkJICAgIGZvbGxf
ZmxhZ3MgfCBGT0xMX0xPTkdURVJNLAotCQkJCQkgICAgcGxpc3QsIE5VTEwpOworCQkJcnYgPSBw
aW5fbG9uZ3Rlcm1fcGFnZXMoZmlyc3RfcGFnZV92YSwgbmVudHMsCisJCQkJCQlmb2xsX2ZsYWdz
LCBwbGlzdCwgTlVMTCk7CiAJCQlpZiAocnYgPCAwKQogCQkJCWdvdG8gb3V0X3NlbV91cDsKIAot
LSAKMi4yNC4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
