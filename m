Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8CBF7F2B03
	for <lists+dri-devel@lfdr.de>; Thu,  7 Nov 2019 10:43:20 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8C52F6F3D3;
	Thu,  7 Nov 2019 09:43:13 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 43D596F3D2
 for <dri-devel@lists.freedesktop.org>; Thu,  7 Nov 2019 09:43:12 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id B7534B1D5;
 Thu,  7 Nov 2019 09:43:10 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: airlied@redhat.com, sean@poorly.run, daniel@ffwll.ch, noralf@tronnes.org,
 sam@ravnborg.org, emil.velikov@collabora.com, kraxel@redhat.com
Subject: [PATCH v3 2/4] drm/udl: Allocate GEM object via struct
 drm_driver.gem_create_object
Date: Thu,  7 Nov 2019 10:43:05 +0100
Message-Id: <20191107094307.19870-3-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191107094307.19870-1-tzimmermann@suse.de>
References: <20191107094307.19870-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW4gcHJlcGFyYXRpb24gb2YgYSBzd2l0Y2ggdG8gU0hNRU0sIHVkbCBub3cgYWxsb2NhdGVzIGl0
cyBHRU0Kb2JqZWN0cyB2aWEgc3RydWN0IGRybV9kcml2ZXIuZ2VtX2NyZWF0ZV9vYmplY3QuIE5v
IGZ1bmN0aW9uYWwKY2hhbmdlcyBhcmUgbWFkZS4KCkZvciBTSE1FTSBHRU0gb2JqZWN0cywgdWRs
IHdpbGwgcmVxdWlyZSB0aGUgdXNlIG9mIGEgc3BlY2lhbCBtbWFwCmZ1bmN0aW9uLCB3aGljaCB3
ZSBzZXQgdGhvdWdoIHRoZSBjcmVhdGUtb2JqZWN0IGZ1bmN0aW9uLgoKU2lnbmVkLW9mZi1ieTog
VGhvbWFzIFppbW1lcm1hbm4gPHR6aW1tZXJtYW5uQHN1c2UuZGU+CkFja2VkLWJ5OiBHZXJkIEhv
ZmZtYW5uIDxrcmF4ZWxAcmVkaGF0LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vdWRsL3VkbF9k
cnYuYyB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2Rydi5oIHwgIDIgKysKIGRyaXZl
cnMvZ3B1L2RybS91ZGwvdWRsX2dlbS5jIHwgMjUgKysrKysrKysrKysrKysrKysrKysrLS0tLQog
MyBmaWxlcyBjaGFuZ2VkLCAyNCBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL3Vk
bC91ZGxfZHJ2LmMKaW5kZXggODQyNjY2OTQzM2U0Li43NzhhMGI2NTJmNjQgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS91ZGwv
dWRsX2Rydi5jCkBAIC02NCw2ICs2NCw3IEBAIHN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBkcml2
ZXIgPSB7CiAKIAkvKiBnZW0gaG9va3MgKi8KIAkuZ2VtX2ZyZWVfb2JqZWN0X3VubG9ja2VkID0g
dWRsX2dlbV9mcmVlX29iamVjdCwKKwkuZ2VtX2NyZWF0ZV9vYmplY3QgPSB1ZGxfZHJpdmVyX2dl
bV9jcmVhdGVfb2JqZWN0LAogCS5nZW1fdm1fb3BzID0gJnVkbF9nZW1fdm1fb3BzLAogCiAJLmR1
bWJfY3JlYXRlID0gdWRsX2R1bWJfY3JlYXRlLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3VkbC91ZGxfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vdWRsL3VkbF9kcnYuaAppbmRleCBlMTMw
NmE1MTkwM2MuLmZjMzEyZTc5MWQxOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3VkbC91
ZGxfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfZHJ2LmgKQEAgLTEyNSw2ICsx
MjUsOCBAQCBpbnQgdWRsX2R1bWJfY3JlYXRlKHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2LAog
aW50IHVkbF9nZW1fbW1hcChzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwgc3RydWN0IGRybV9k
ZXZpY2UgKmRldiwKIAkJIHVpbnQzMl90IGhhbmRsZSwgdWludDY0X3QgKm9mZnNldCk7CiAKK3N0
cnVjdCBkcm1fZ2VtX29iamVjdCAqdWRsX2RyaXZlcl9nZW1fY3JlYXRlX29iamVjdChzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2LAorCQkJCQkJICAgIHNpemVfdCBzaXplKTsKIHZvaWQgdWRsX2dlbV9m
cmVlX29iamVjdChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdlbV9vYmopOwogc3RydWN0IHVkbF9n
ZW1fb2JqZWN0ICp1ZGxfZ2VtX2FsbG9jX29iamVjdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAog
CQkJCQkgICAgc2l6ZV90IHNpemUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3VkbC91
ZGxfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vdWRsL3VkbF9nZW0uYwppbmRleCA3ZDNjMWI3M2Vh
MDIuLjYyODc0OWNjMTE0MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfZ2Vt
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfZ2VtLmMKQEAgLTYsMjYgKzYsNDMgQEAK
ICNpbmNsdWRlIDxsaW51eC9kbWEtYnVmLmg+CiAjaW5jbHVkZSA8bGludXgvdm1hbGxvYy5oPgog
CisjaW5jbHVkZSA8ZHJtL2RybV9kcnYuaD4KICNpbmNsdWRlIDxkcm0vZHJtX21vZGUuaD4KICNp
bmNsdWRlIDxkcm0vZHJtX3ByaW1lLmg+CiAKICNpbmNsdWRlICJ1ZGxfZHJ2LmgiCiAKLXN0cnVj
dCB1ZGxfZ2VtX29iamVjdCAqdWRsX2dlbV9hbGxvY19vYmplY3Qoc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwKLQkJCQkJICAgIHNpemVfdCBzaXplKQorLyoKKyAqIEhlbHBlcnMgZm9yIHN0cnVjdCBk
cm1fZHJpdmVyCisgKi8KKworc3RydWN0IGRybV9nZW1fb2JqZWN0ICp1ZGxfZHJpdmVyX2dlbV9j
cmVhdGVfb2JqZWN0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCisJCQkJCQkgICAgc2l6ZV90IHNp
emUpCiB7CiAJc3RydWN0IHVkbF9nZW1fb2JqZWN0ICpvYmo7CiAKIAlvYmogPSBremFsbG9jKHNp
emVvZigqb2JqKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFvYmopCisJCXJldHVybiBOVUxMOworCisJ
cmV0dXJuICZvYmotPmJhc2U7Cit9CisKK3N0cnVjdCB1ZGxfZ2VtX29iamVjdCAqdWRsX2dlbV9h
bGxvY19vYmplY3Qoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKKwkJCQkJICAgIHNpemVfdCBzaXpl
KQoreworCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqOworCisJb2JqID0gZGV2LT5kcml2ZXIt
PmdlbV9jcmVhdGVfb2JqZWN0KGRldiwgc2l6ZSk7CiAJaWYgKG9iaiA9PSBOVUxMKQogCQlyZXR1
cm4gTlVMTDsKIAotCWlmIChkcm1fZ2VtX29iamVjdF9pbml0KGRldiwgJm9iai0+YmFzZSwgc2l6
ZSkgIT0gMCkgeworCWlmIChkcm1fZ2VtX29iamVjdF9pbml0KGRldiwgb2JqLCBzaXplKSAhPSAw
KSB7CiAJCWtmcmVlKG9iaik7CiAJCXJldHVybiBOVUxMOwogCX0KIAotCXJldHVybiBvYmo7CisJ
cmV0dXJuIHRvX3VkbF9ibyhvYmopOwogfQogCiBzdGF0aWMgaW50Ci0tIAoyLjIzLjAKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
