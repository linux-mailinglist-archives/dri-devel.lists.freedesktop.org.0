Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3D45944AF7
	for <lists+dri-devel@lfdr.de>; Thu, 13 Jun 2019 20:43:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2FD29897F3;
	Thu, 13 Jun 2019 18:43:50 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6A397897F0;
 Thu, 13 Jun 2019 18:43:47 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga007.jf.intel.com ([10.7.209.58])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 13 Jun 2019 11:43:46 -0700
X-ExtLoop1: 1
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga007.jf.intel.com with SMTP; 13 Jun 2019 11:43:43 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Thu, 13 Jun 2019 21:43:43 +0300
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: dri-devel@lists.freedesktop.org
Subject: [RFC][PATCH 2/2] drm/i915: Populate PATH prop for every connector
Date: Thu, 13 Jun 2019 21:43:35 +0300
Message-Id: <20190613184335.7970-3-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190613184335.7970-1-ville.syrjala@linux.intel.com>
References: <20190613184335.7970-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClVz
ZXJzcGFjZSBtYXkgd2FudCBzdGFibGUgaWRlbnRpZmllcnMgZm9yIGNvbm5lY3RvcnMuIExldCdz
IHRyeSB0bwpwcm92aWRlIHRoYXQgdmlhIHRoZSBQQVRIIHByb3AuIEkgdHJpZWQgdG8gbWFrZSB0
aGVzZSBzb21ld2hhdCBhYnN0cmFjdApieSB1c2luZyBqdXN0ICJwb3J0X3R5cGU6aW5kZXgiIHR5
cGUgb2YgYXBwcm9hY2gsIHdoZXJlIHdlIGRlcml2ZSB0aGUKaW5kZXggZnJvbSB0aGUgcGh5c2lj
YWwgaW5zdGFuY2Ugb2YgdGhhdCBodyBibG9jaywgc28gaXQgc2hvdWxkIHJlbWFpbgpzdGFibGUg
ZXZlbiBpZiB3ZSByZW9yZGVyIHRoaW5ncyBpbiB0aGUgZHJpdmVyLgoKQ2M6IERhbmllbCBWZXR0
ZXIgPGRhbmllbEBmZndsbC5jaD4KQ2M6IFBla2thIFBhYWxhbmVuIDxwcGFhbGFuZW5AZ21haWwu
Y29tPgpDYzogSWxpYSBNaXJraW4gPGltaXJraW5AYWx1bS5taXQuZWR1PgpTaWduZWQtb2ZmLWJ5
OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2ljbF9kc2kuYyAgICAgICAgIHwgIDMgKysrCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9jb25uZWN0b3IuYyB8IDIwICsrKysrKysrKysrKysrKwogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfY29ubmVjdG9yLmggfCAgMyArKysKIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2ludGVsX2NydC5jICAgICAgIHwgIDIgKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2lu
dGVsX2RwLmMgICAgICAgIHwgIDYgKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rw
X21zdC5jICAgIHwgIDMgKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kdm8uYyAgICAg
ICB8ICAzICsrKwogZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfaGRtaS5jICAgICAgfCAgNCAr
KysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2x2ZHMuYyAgICAgIHwgIDIgKysKIGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2ludGVsX3Nkdm8uYyAgICAgIHwgMzUgKysrKysrKysrKysrKysrKysr
LS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3R2LmMgICAgICAgIHwgIDIgKysK
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L3Zsdl9kc2kuYyAgICAgICAgIHwgIDMgKysrCiAxMiBmaWxl
cyBjaGFuZ2VkLCA3MiBpbnNlcnRpb25zKCspLCAxNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pY2xfZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
Y2xfZHNpLmMKaW5kZXggNzQ0NDhlNmJmNzQ5Li41NGNjYzY5YWE2MGEgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ljbF9kc2kuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
Y2xfZHNpLmMKQEAgLTE1NDQsNiArMTU0NCw5IEBAIHZvaWQgaWNsX2RzaV9pbml0KHN0cnVjdCBk
cm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAkvKiBhdHRhY2ggY29ubmVjdG9yIHRvIGVuY29k
ZXIgKi8KIAlpbnRlbF9jb25uZWN0b3JfYXR0YWNoX2VuY29kZXIoaW50ZWxfY29ubmVjdG9yLCBl
bmNvZGVyKTsKIAorCWludGVsX2Nvbm5lY3Rvcl9zZXRfcGF0aF9wcm9wZXJ0eShjb25uZWN0b3Is
ICJkc2k6JWQiLAorCQkJCQkgIHBvcnQgLSBQT1JUX0EpOworCiAJbXV0ZXhfbG9jaygmZGV2LT5t
b2RlX2NvbmZpZy5tdXRleCk7CiAJZml4ZWRfbW9kZSA9IGludGVsX3BhbmVsX3ZidF9maXhlZF9t
b2RlKGludGVsX2Nvbm5lY3Rvcik7CiAJbXV0ZXhfdW5sb2NrKCZkZXYtPm1vZGVfY29uZmlnLm11
dGV4KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Nvbm5lY3Rvci5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfY29ubmVjdG9yLmMKaW5kZXggMDczYjZjM2Fi
N2NjLi42YzFiMDI3ZmRiMTEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X2Nvbm5lY3Rvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Nvbm5lY3Rvci5j
CkBAIC0yODAsMyArMjgwLDIzIEBAIGludGVsX2F0dGFjaF9jb2xvcnNwYWNlX3Byb3BlcnR5KHN0
cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCiAJCWRybV9vYmplY3RfYXR0YWNoX3Byb3Bl
cnR5KCZjb25uZWN0b3ItPmJhc2UsCiAJCQkJCSAgIGNvbm5lY3Rvci0+Y29sb3JzcGFjZV9wcm9w
ZXJ0eSwgMCk7CiB9CisKK2ludCBpbnRlbF9jb25uZWN0b3Jfc2V0X3BhdGhfcHJvcGVydHkoc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKKwkJCQkgICAgICBjb25zdCBjaGFyICpmbXQs
IC4uLikKK3sKKwljaGFyIHBhdGhbNjRdOworCXZhX2xpc3QgYXA7CisJaW50IHJldDsKKworCXZh
X3N0YXJ0KGFwLCBmbXQpOworCXJldCA9IHZzbnByaW50ZihwYXRoLCBzaXplb2YocGF0aCksIGZt
dCwgYXApOworCXZhX2VuZChhcCk7CisKKwlpZiAoV0FSTl9PTihyZXQgPj0gc2l6ZW9mKHBhdGgp
KSkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmY29u
bmVjdG9yLT5iYXNlLAorCQkJCSAgIGNvbm5lY3Rvci0+ZGV2LT5tb2RlX2NvbmZpZy5wYXRoX3By
b3BlcnR5LCAwKTsKKworCXJldHVybiBkcm1fY29ubmVjdG9yX3NldF9wYXRoX3Byb3BlcnR5KGNv
bm5lY3RvciwgcGF0aCk7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF9jb25uZWN0b3IuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Nvbm5lY3Rvci5oCmlu
ZGV4IDkzYTczNzVjODE5Ni4uMTA4Nzc3YmM5NTQ1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pbnRlbF9jb25uZWN0b3IuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF9jb25uZWN0b3IuaApAQCAtMzEsNSArMzEsOCBAQCB2b2lkIGludGVsX2F0dGFjaF9mb3JjZV9h
dWRpb19wcm9wZXJ0eShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKTsKIHZvaWQgaW50
ZWxfYXR0YWNoX2Jyb2FkY2FzdF9yZ2JfcHJvcGVydHkoc3RydWN0IGRybV9jb25uZWN0b3IgKmNv
bm5lY3Rvcik7CiB2b2lkIGludGVsX2F0dGFjaF9hc3BlY3RfcmF0aW9fcHJvcGVydHkoc3RydWN0
IGRybV9jb25uZWN0b3IgKmNvbm5lY3Rvcik7CiB2b2lkIGludGVsX2F0dGFjaF9jb2xvcnNwYWNl
X3Byb3BlcnR5KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpOworX19wcmludGYoMiwg
MykKK2ludCBpbnRlbF9jb25uZWN0b3Jfc2V0X3BhdGhfcHJvcGVydHkoc3RydWN0IGRybV9jb25u
ZWN0b3IgKmNvbm5lY3RvciwKKwkJCQkgICAgICBjb25zdCBjaGFyICpmbXQsIC4uLik7CiAKICNl
bmRpZiAvKiBfX0lOVEVMX0NPTk5FQ1RPUl9IX18gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX2NydC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfY3J0LmMK
aW5kZXggM2ZjZjJmODRiY2NlLi4xMzgzZGI2NDY5ODYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2ludGVsX2NydC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Ny
dC5jCkBAIC0xMDQ4LDYgKzEwNDgsOCBAQCB2b2lkIGludGVsX2NydF9pbml0KHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAlpZiAoIUk5MTVfSEFTX0hPVFBMVUcoZGV2X3ByaXYp
KQogCQlpbnRlbF9jb25uZWN0b3ItPnBvbGxlZCA9IERSTV9DT05ORUNUT1JfUE9MTF9DT05ORUNU
OwogCisJaW50ZWxfY29ubmVjdG9yX3NldF9wYXRoX3Byb3BlcnR5KGNvbm5lY3RvciwgImNydDow
Iik7CisKIAkvKgogCSAqIENvbmZpZ3VyZSB0aGUgYXV0b21hdGljIGhvdHBsdWcgZGV0ZWN0aW9u
IHN0dWZmCiAJICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcC5j
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHAuYwppbmRleCA0MzM2ZGY0NmZlNzguLmM5
MDcxZDI1YmQzNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHAuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcC5jCkBAIC02NTI3LDcgKzY1MjcsMTEg
QEAgc3RhdGljIHZvaWQKIGludGVsX2RwX2FkZF9wcm9wZXJ0aWVzKHN0cnVjdCBpbnRlbF9kcCAq
aW50ZWxfZHAsIHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCiB7CiAJc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShjb25uZWN0b3ItPmRldik7Ci0JZW51
bSBwb3J0IHBvcnQgPSBkcF90b19kaWdfcG9ydChpbnRlbF9kcCktPmJhc2UucG9ydDsKKwlzdHJ1
Y3QgaW50ZWxfZW5jb2RlciAqZW5jb2RlciA9ICZkcF90b19kaWdfcG9ydChpbnRlbF9kcCktPmJh
c2U7CisJZW51bSBwb3J0IHBvcnQgPSBlbmNvZGVyLT5wb3J0OworCisJaW50ZWxfY29ubmVjdG9y
X3NldF9wYXRoX3Byb3BlcnR5KGNvbm5lY3RvciwgImRkaTolZFxuIiwKKwkJCQkJICBwb3J0IC0g
UE9SVF9BKTsKIAogCWlmICghSVNfRzRYKGRldl9wcml2KSAmJiBwb3J0ICE9IFBPUlRfQSkKIAkJ
aW50ZWxfYXR0YWNoX2ZvcmNlX2F1ZGlvX3Byb3BlcnR5KGNvbm5lY3Rvcik7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcF9tc3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2ludGVsX2RwX21zdC5jCmluZGV4IDBjYWY2NDVmYmJiOC4uM2JjMGRlMmZmNWFmIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcF9tc3QuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9pbnRlbF9kcF9tc3QuYwpAQCAtNTI5LDEwICs1MjksOSBAQCBzdGF0aWMg
c3RydWN0IGRybV9jb25uZWN0b3IgKmludGVsX2RwX2FkZF9tc3RfY29ubmVjdG9yKHN0cnVjdCBk
cm1fZHBfbXN0X3RvcG9sbwogCQkJZ290byBlcnI7CiAJfQogCi0JZHJtX29iamVjdF9hdHRhY2hf
cHJvcGVydHkoJmNvbm5lY3Rvci0+YmFzZSwgZGV2LT5tb2RlX2NvbmZpZy5wYXRoX3Byb3BlcnR5
LCAwKTsKIAlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmY29ubmVjdG9yLT5iYXNlLCBkZXYt
Pm1vZGVfY29uZmlnLnRpbGVfcHJvcGVydHksIDApOwogCi0JcmV0ID0gZHJtX2Nvbm5lY3Rvcl9z
ZXRfcGF0aF9wcm9wZXJ0eShjb25uZWN0b3IsIHBhdGhwcm9wKTsKKwlyZXQgPSBpbnRlbF9jb25u
ZWN0b3Jfc2V0X3BhdGhfcHJvcGVydHkoY29ubmVjdG9yLCAiJXMiLCBwYXRocHJvcCk7CiAJaWYg
KHJldCkKIAkJZ290byBlcnI7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2lu
dGVsX2R2by5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHZvLmMKaW5kZXggMjI2NjZk
MjhmNGFhLi40ZTdlYTBmNGM1ZDUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2lu
dGVsX2R2by5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2R2by5jCkBAIC01MzEs
NiArNTMxLDkgQEAgdm9pZCBpbnRlbF9kdm9faW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAq
ZGV2X3ByaXYpCiAJCWNvbm5lY3Rvci0+aW50ZXJsYWNlX2FsbG93ZWQgPSBmYWxzZTsKIAkJY29u
bmVjdG9yLT5kb3VibGVzY2FuX2FsbG93ZWQgPSBmYWxzZTsKIAorCQlpbnRlbF9jb25uZWN0b3Jf
c2V0X3BhdGhfcHJvcGVydHkoY29ubmVjdG9yLCAiZHZvOiVkIiwKKwkJCQkJCSAgcG9ydCAtIFBP
UlRfQSk7CisKIAkJaW50ZWxfY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVyKGludGVsX2Nvbm5lY3Rv
ciwgaW50ZWxfZW5jb2Rlcik7CiAJCWlmIChkdm8tPnR5cGUgPT0gSU5URUxfRFZPX0NISVBfTFZE
UykgewogCQkJLyoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2hkbWku
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2hkbWkuYwppbmRleCAxODdhMmI4MjhiOTcu
LjM4YTBlNDIzNDIwYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfaGRt
aS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2hkbWkuYwpAQCAtMjc5NCw2ICsy
Nzk0LDEwIEBAIGludGVsX2hkbWlfYWRkX3Byb3BlcnRpZXMoc3RydWN0IGludGVsX2hkbWkgKmlu
dGVsX2hkbWksIHN0cnVjdCBkcm1fY29ubmVjdG9yICpjCiAJc3RydWN0IGRybV9pOTE1X3ByaXZh
dGUgKmRldl9wcml2ID0gdG9faTkxNShjb25uZWN0b3ItPmRldik7CiAJc3RydWN0IGludGVsX2Rp
Z2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQgPQogCQkJCWhkbWlfdG9fZGlnX3BvcnQoaW50ZWxf
aGRtaSk7CisJZW51bSBwb3J0IHBvcnQgPSBpbnRlbF9kaWdfcG9ydC0+YmFzZS5wb3J0OworCisJ
aW50ZWxfY29ubmVjdG9yX3NldF9wYXRoX3Byb3BlcnR5KGNvbm5lY3RvciwgImRkaTolZCIsCisJ
CQkJCSAgcG9ydCAtIFBPUlRfQSk7CiAKIAlpbnRlbF9hdHRhY2hfZm9yY2VfYXVkaW9fcHJvcGVy
dHkoY29ubmVjdG9yKTsKIAlpbnRlbF9hdHRhY2hfYnJvYWRjYXN0X3JnYl9wcm9wZXJ0eShjb25u
ZWN0b3IpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfbHZkcy5jIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfbHZkcy5jCmluZGV4IGVmZWZlZDYyYTdmOC4uNDYz
NjY1ZjBlY2JkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9sdmRzLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfbHZkcy5jCkBAIC05MTUsNiArOTE1LDgg
QEAgdm9pZCBpbnRlbF9sdmRzX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2
KQogCiAJbHZkc19lbmNvZGVyLT5yZWcgPSBsdmRzX3JlZzsKIAorCWludGVsX2Nvbm5lY3Rvcl9z
ZXRfcGF0aF9wcm9wZXJ0eShjb25uZWN0b3IsICJsdmRzOjAiKTsKKwogCS8qIGNyZWF0ZSB0aGUg
c2NhbGluZyBtb2RlIHByb3BlcnR5ICovCiAJYWxsb3dlZF9zY2FsZXJzID0gQklUKERSTV9NT0RF
X1NDQUxFX0FTUEVDVCk7CiAJYWxsb3dlZF9zY2FsZXJzIHw9IEJJVChEUk1fTU9ERV9TQ0FMRV9G
VUxMU0NSRUVOKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3Nkdm8u
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3Nkdm8uYwppbmRleCAwODYwYWUzNmJiODcu
LmMxNmNkZGU4NDljYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfc2R2
by5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3Nkdm8uYwpAQCAtMjY1MCw5ICsy
NjUwLDggQEAgc3RhdGljIHN0cnVjdCBpbnRlbF9zZHZvX2Nvbm5lY3RvciAqaW50ZWxfc2R2b19j
b25uZWN0b3JfYWxsb2Modm9pZCkKIHN0YXRpYyBib29sCiBpbnRlbF9zZHZvX2R2aV9pbml0KHN0
cnVjdCBpbnRlbF9zZHZvICppbnRlbF9zZHZvLCBpbnQgZGV2aWNlKQogewotCXN0cnVjdCBkcm1f
ZW5jb2RlciAqZW5jb2RlciA9ICZpbnRlbF9zZHZvLT5iYXNlLmJhc2U7CisJc3RydWN0IGludGVs
X2VuY29kZXIgKmVuY29kZXIgPSAmaW50ZWxfc2R2by0+YmFzZTsKIAlzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubmVjdG9yOwotCXN0cnVjdCBpbnRlbF9lbmNvZGVyICppbnRlbF9lbmNvZGVyID0g
dG9faW50ZWxfZW5jb2RlcihlbmNvZGVyKTsKIAlzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICppbnRl
bF9jb25uZWN0b3I7CiAJc3RydWN0IGludGVsX3Nkdm9fY29ubmVjdG9yICppbnRlbF9zZHZvX2Nv
bm5lY3RvcjsKIApAQCAtMjY3OSwxMiArMjY3OCwxMiBAQCBpbnRlbF9zZHZvX2R2aV9pbml0KHN0
cnVjdCBpbnRlbF9zZHZvICppbnRlbF9zZHZvLCBpbnQgZGV2aWNlKQogCQkgKiBTb21lIFNEVk8g
ZGV2aWNlcyBoYXZlIG9uZS1zaG90IGhvdHBsdWcgaW50ZXJydXB0cy4KIAkJICogRW5zdXJlIHRo
YXQgdGhleSBnZXQgcmUtZW5hYmxlZCB3aGVuIGFuIGludGVycnVwdCBoYXBwZW5zLgogCQkgKi8K
LQkJaW50ZWxfZW5jb2Rlci0+aG90cGx1ZyA9IGludGVsX3Nkdm9faG90cGx1ZzsKLQkJaW50ZWxf
c2R2b19lbmFibGVfaG90cGx1ZyhpbnRlbF9lbmNvZGVyKTsKKwkJZW5jb2Rlci0+aG90cGx1ZyA9
IGludGVsX3Nkdm9faG90cGx1ZzsKKwkJaW50ZWxfc2R2b19lbmFibGVfaG90cGx1ZyhlbmNvZGVy
KTsKIAl9IGVsc2UgewogCQlpbnRlbF9jb25uZWN0b3ItPnBvbGxlZCA9IERSTV9DT05ORUNUT1Jf
UE9MTF9DT05ORUNUIHwgRFJNX0NPTk5FQ1RPUl9QT0xMX0RJU0NPTk5FQ1Q7CiAJfQotCWVuY29k
ZXItPmVuY29kZXJfdHlwZSA9IERSTV9NT0RFX0VOQ09ERVJfVE1EUzsKKwllbmNvZGVyLT5iYXNl
LmVuY29kZXJfdHlwZSA9IERSTV9NT0RFX0VOQ09ERVJfVE1EUzsKIAljb25uZWN0b3ItPmNvbm5l
Y3Rvcl90eXBlID0gRFJNX01PREVfQ09OTkVDVE9SX0RWSUQ7CiAKIAlpZiAoaW50ZWxfc2R2b19p
c19oZG1pX2Nvbm5lY3RvcihpbnRlbF9zZHZvLCBkZXZpY2UpKSB7CkBAIC0yNzAwLDEzICsyNjk5
LDE4IEBAIGludGVsX3Nkdm9fZHZpX2luaXQoc3RydWN0IGludGVsX3Nkdm8gKmludGVsX3Nkdm8s
IGludCBkZXZpY2UpCiAJaWYgKGludGVsX3Nkdm9fY29ubmVjdG9yLT5pc19oZG1pKQogCQlpbnRl
bF9zZHZvX2FkZF9oZG1pX3Byb3BlcnRpZXMoaW50ZWxfc2R2bywgaW50ZWxfc2R2b19jb25uZWN0
b3IpOwogCisJaW50ZWxfY29ubmVjdG9yX3NldF9wYXRoX3Byb3BlcnR5KGNvbm5lY3RvciwgInNk
dm86JWQ6JXM6JWQiLAorCQkJCQkgIGVuY29kZXItPnBvcnQgLSBQT1JUX0EsCisJCQkJCSAgaW50
ZWxfc2R2b19jb25uZWN0b3ItPmlzX2hkbWkgPworCQkJCQkgICJoZG1pIiA6ICJkdmkiLCBkZXZp
Y2UpOworCiAJcmV0dXJuIHRydWU7CiB9CiAKIHN0YXRpYyBib29sCiBpbnRlbF9zZHZvX3R2X2lu
aXQoc3RydWN0IGludGVsX3Nkdm8gKmludGVsX3Nkdm8sIGludCB0eXBlKQogewotCXN0cnVjdCBk
cm1fZW5jb2RlciAqZW5jb2RlciA9ICZpbnRlbF9zZHZvLT5iYXNlLmJhc2U7CisJc3RydWN0IGlu
dGVsX2VuY29kZXIgKmVuY29kZXIgPSAmaW50ZWxfc2R2by0+YmFzZTsKIAlzdHJ1Y3QgZHJtX2Nv
bm5lY3RvciAqY29ubmVjdG9yOwogCXN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmludGVsX2Nvbm5l
Y3RvcjsKIAlzdHJ1Y3QgaW50ZWxfc2R2b19jb25uZWN0b3IgKmludGVsX3Nkdm9fY29ubmVjdG9y
OwpAQCAtMjcxOSw3ICsyNzIzLDcgQEAgaW50ZWxfc2R2b190dl9pbml0KHN0cnVjdCBpbnRlbF9z
ZHZvICppbnRlbF9zZHZvLCBpbnQgdHlwZSkKIAogCWludGVsX2Nvbm5lY3RvciA9ICZpbnRlbF9z
ZHZvX2Nvbm5lY3Rvci0+YmFzZTsKIAljb25uZWN0b3IgPSAmaW50ZWxfY29ubmVjdG9yLT5iYXNl
OwotCWVuY29kZXItPmVuY29kZXJfdHlwZSA9IERSTV9NT0RFX0VOQ09ERVJfVFZEQUM7CisJZW5j
b2Rlci0+YmFzZS5lbmNvZGVyX3R5cGUgPSBEUk1fTU9ERV9FTkNPREVSX1RWREFDOwogCWNvbm5l
Y3Rvci0+Y29ubmVjdG9yX3R5cGUgPSBEUk1fTU9ERV9DT05ORUNUT1JfU1ZJREVPOwogCiAJaW50
ZWxfc2R2by0+Y29udHJvbGxlZF9vdXRwdXQgfD0gdHlwZTsKQEAgLTI3MzYsNiArMjc0MCw5IEBA
IGludGVsX3Nkdm9fdHZfaW5pdChzdHJ1Y3QgaW50ZWxfc2R2byAqaW50ZWxfc2R2bywgaW50IHR5
cGUpCiAJaWYgKCFpbnRlbF9zZHZvX2NyZWF0ZV9lbmhhbmNlX3Byb3BlcnR5KGludGVsX3Nkdm8s
IGludGVsX3Nkdm9fY29ubmVjdG9yKSkKIAkJZ290byBlcnI7CiAKKwlpbnRlbF9jb25uZWN0b3Jf
c2V0X3BhdGhfcHJvcGVydHkoY29ubmVjdG9yLCAic2R2bzolZDp0djolZCIsCisJCQkJCSAgZW5j
b2Rlci0+cG9ydCAtIFBPUlRfQSwgdHlwZSk7CisKIAlyZXR1cm4gdHJ1ZTsKIAogZXJyOgpAQCAt
Mjc0Niw3ICsyNzUzLDcgQEAgaW50ZWxfc2R2b190dl9pbml0KHN0cnVjdCBpbnRlbF9zZHZvICpp
bnRlbF9zZHZvLCBpbnQgdHlwZSkKIHN0YXRpYyBib29sCiBpbnRlbF9zZHZvX2FuYWxvZ19pbml0
KHN0cnVjdCBpbnRlbF9zZHZvICppbnRlbF9zZHZvLCBpbnQgZGV2aWNlKQogewotCXN0cnVjdCBk
cm1fZW5jb2RlciAqZW5jb2RlciA9ICZpbnRlbF9zZHZvLT5iYXNlLmJhc2U7CisJc3RydWN0IGlu
dGVsX2VuY29kZXIgKmVuY29kZXIgPSAmaW50ZWxfc2R2by0+YmFzZTsKIAlzdHJ1Y3QgZHJtX2Nv
bm5lY3RvciAqY29ubmVjdG9yOwogCXN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmludGVsX2Nvbm5l
Y3RvcjsKIAlzdHJ1Y3QgaW50ZWxfc2R2b19jb25uZWN0b3IgKmludGVsX3Nkdm9fY29ubmVjdG9y
OwpAQCAtMjc2MCw3ICsyNzY3LDcgQEAgaW50ZWxfc2R2b19hbmFsb2dfaW5pdChzdHJ1Y3QgaW50
ZWxfc2R2byAqaW50ZWxfc2R2bywgaW50IGRldmljZSkKIAlpbnRlbF9jb25uZWN0b3IgPSAmaW50
ZWxfc2R2b19jb25uZWN0b3ItPmJhc2U7CiAJY29ubmVjdG9yID0gJmludGVsX2Nvbm5lY3Rvci0+
YmFzZTsKIAlpbnRlbF9jb25uZWN0b3ItPnBvbGxlZCA9IERSTV9DT05ORUNUT1JfUE9MTF9DT05O
RUNUOwotCWVuY29kZXItPmVuY29kZXJfdHlwZSA9IERSTV9NT0RFX0VOQ09ERVJfREFDOworCWVu
Y29kZXItPmJhc2UuZW5jb2Rlcl90eXBlID0gRFJNX01PREVfRU5DT0RFUl9EQUM7CiAJY29ubmVj
dG9yLT5jb25uZWN0b3JfdHlwZSA9IERSTV9NT0RFX0NPTk5FQ1RPUl9WR0E7CiAKIAlpZiAoZGV2
aWNlID09IDApIHsKQEAgLTI3NzYsMTMgKzI3ODMsMTYgQEAgaW50ZWxfc2R2b19hbmFsb2dfaW5p
dChzdHJ1Y3QgaW50ZWxfc2R2byAqaW50ZWxfc2R2bywgaW50IGRldmljZSkKIAkJcmV0dXJuIGZh
bHNlOwogCX0KIAorCWludGVsX2Nvbm5lY3Rvcl9zZXRfcGF0aF9wcm9wZXJ0eShjb25uZWN0b3Is
ICJzZHZvOiVkOmNydDolZCIsCisJCQkJCSAgZW5jb2Rlci0+cG9ydCAtIFBPUlRfQSwgZGV2aWNl
KTsKKwogCXJldHVybiB0cnVlOwogfQogCiBzdGF0aWMgYm9vbAogaW50ZWxfc2R2b19sdmRzX2lu
aXQoc3RydWN0IGludGVsX3Nkdm8gKmludGVsX3Nkdm8sIGludCBkZXZpY2UpCiB7Ci0Jc3RydWN0
IGRybV9lbmNvZGVyICplbmNvZGVyID0gJmludGVsX3Nkdm8tPmJhc2UuYmFzZTsKKwlzdHJ1Y3Qg
aW50ZWxfZW5jb2RlciAqZW5jb2RlciA9ICZpbnRlbF9zZHZvLT5iYXNlOwogCXN0cnVjdCBkcm1f
Y29ubmVjdG9yICpjb25uZWN0b3I7CiAJc3RydWN0IGludGVsX2Nvbm5lY3RvciAqaW50ZWxfY29u
bmVjdG9yOwogCXN0cnVjdCBpbnRlbF9zZHZvX2Nvbm5lY3RvciAqaW50ZWxfc2R2b19jb25uZWN0
b3I7CkBAIC0yNzk2LDcgKzI4MDYsNyBAQCBpbnRlbF9zZHZvX2x2ZHNfaW5pdChzdHJ1Y3QgaW50
ZWxfc2R2byAqaW50ZWxfc2R2bywgaW50IGRldmljZSkKIAogCWludGVsX2Nvbm5lY3RvciA9ICZp
bnRlbF9zZHZvX2Nvbm5lY3Rvci0+YmFzZTsKIAljb25uZWN0b3IgPSAmaW50ZWxfY29ubmVjdG9y
LT5iYXNlOwotCWVuY29kZXItPmVuY29kZXJfdHlwZSA9IERSTV9NT0RFX0VOQ09ERVJfTFZEUzsK
KwllbmNvZGVyLT5iYXNlLmVuY29kZXJfdHlwZSA9IERSTV9NT0RFX0VOQ09ERVJfTFZEUzsKIAlj
b25uZWN0b3ItPmNvbm5lY3Rvcl90eXBlID0gRFJNX01PREVfQ09OTkVDVE9SX0xWRFM7CiAKIAlp
ZiAoZGV2aWNlID09IDApIHsKQEAgLTI4MzEsNiArMjg0MSw5IEBAIGludGVsX3Nkdm9fbHZkc19p
bml0KHN0cnVjdCBpbnRlbF9zZHZvICppbnRlbF9zZHZvLCBpbnQgZGV2aWNlKQogCWlmICghaW50
ZWxfY29ubmVjdG9yLT5wYW5lbC5maXhlZF9tb2RlKQogCQlnb3RvIGVycjsKIAorCWludGVsX2Nv
bm5lY3Rvcl9zZXRfcGF0aF9wcm9wZXJ0eShjb25uZWN0b3IsICJzZHZvOiVkOmx2ZHM6JWQiLAor
CQkJCQkgIGVuY29kZXItPnBvcnQgLSBQT1JUX0EsIGRldmljZSk7CisKIAlyZXR1cm4gdHJ1ZTsK
IAogZXJyOgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdHYuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3R2LmMKaW5kZXggNWRjNTk0ZWFmYWYyLi5mOTQ4MTQw
NGY2NDIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3R2LmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdHYuYwpAQCAtMTk4OCw0ICsxOTg4LDYgQEAgaW50
ZWxfdHZfaW5pdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpCiAJZHJtX29iamVj
dF9hdHRhY2hfcHJvcGVydHkoJmNvbm5lY3Rvci0+YmFzZSwKIAkJCQkgICBkZXYtPm1vZGVfY29u
ZmlnLnR2X2JvdHRvbV9tYXJnaW5fcHJvcGVydHksCiAJCQkJICAgc3RhdGUtPnR2Lm1hcmdpbnMu
Ym90dG9tKTsKKworCWludGVsX2Nvbm5lY3Rvcl9zZXRfcGF0aF9wcm9wZXJ0eShjb25uZWN0b3Is
ICJ0djowIik7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS92bHZfZHNpLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS92bHZfZHNpLmMKaW5kZXggZTI3MmQ4MjYyMTBhLi5lOTdl
Njg5YzYwMjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3Zsdl9kc2kuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS92bHZfZHNpLmMKQEAgLTE5ODUsNiArMTk4NSw5IEBAIHZv
aWQgdmx2X2RzaV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKIAogCWlu
dGVsX2RzaV9hZGRfcHJvcGVydGllcyhpbnRlbF9jb25uZWN0b3IpOwogCisJaW50ZWxfY29ubmVj
dG9yX3NldF9wYXRoX3Byb3BlcnR5KGNvbm5lY3RvciwgImRzaTolZCIsCisJCQkJCSAgcG9ydCAt
IFBPUlRfQSk7CisKIAlyZXR1cm47CiAKIGVycl9jbGVhbnVwX2Nvbm5lY3RvcjoKLS0gCjIuMjEu
MAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRl
dmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
