Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DA72455DB0
	for <lists+dri-devel@lfdr.de>; Wed, 26 Jun 2019 03:36:28 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D4E4E6E1BB;
	Wed, 26 Jun 2019 01:36:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qt1-x841.google.com (mail-qt1-x841.google.com
 [IPv6:2607:f8b0:4864:20::841])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 179736E1BB
 for <dri-devel@lists.freedesktop.org>; Wed, 26 Jun 2019 01:36:24 +0000 (UTC)
Received: by mail-qt1-x841.google.com with SMTP id x47so627988qtk.11
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 18:36:24 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=Z5NrdX7NWwAoR74sTDNwhmRnjPJuMOFlYOfia6fSoF0=;
 b=fvmUOQqMtgqHXiJOQW562/tS66vU2tnpBWWPokDwFYCAfUp5SB/i9BZHYMdstwArKD
 M2Vvy+OE3m2AFOsl+VVdT89S9luPMFB6qrAHpThkhiuNv8xvFQPOEDSH8vLHmCeb9xBq
 3xuEhURjOrBW4Dvi+ZU6FszaqrpkiTf/ILi+6LkDBwjnnEwSFBj0SRA9zuO40HULonnV
 Om3sBy98rRm+zvsQTBk9Z3OVUM9tvw8qkhuKBX7NYvCMQTusH1/JgEsvhP1TCQ5IdVkd
 5soaY/PGsirirzQrcDrijQg1971TfVdZoCmokpfHKfDru9uidz3NtlDVwiLXWPE1KJiF
 RR0Q==
X-Gm-Message-State: APjAAAVLYYN8zEz3Jk996qlR/w7Hk+mXllOBxzQyLMUM4XBnAp+joxMj
 qkwckGTbcJboQRUHJVztM44=
X-Google-Smtp-Source: APXvYqwGsxCL242iIdEU4rNVTpJKxMlXP+fmKwcNueML+N/BprK0zHQHzHQ6gOhAYyCUgth2h/NuJQ==
X-Received: by 2002:ac8:17e6:: with SMTP id r35mr1292524qtk.215.1561512983200; 
 Tue, 25 Jun 2019 18:36:23 -0700 (PDT)
Received: from smtp.gmail.com ([187.121.151.146])
 by smtp.gmail.com with ESMTPSA id c5sm8641883qkb.41.2019.06.25.18.36.20
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Tue, 25 Jun 2019 18:36:22 -0700 (PDT)
Date: Tue, 25 Jun 2019 22:36:18 -0300
From: Rodrigo Siqueira <rodrigosiqueiramelo@gmail.com>
To: Brian Starkey <brian.starkey@arm.com>,
 Liviu Dudau <liviu.dudau@arm.com>, Daniel Vetter <daniel@ffwll.ch>,
 Haneen Mohammed <hamohammed.sa@gmail.com>, Simon Ser <contact@emersion.fr>
Subject: [PATCH V3 1/5] drm/vkms: Avoid assigning 0 for possible_crtc
Message-ID: <d67849c62a8d8ace1a0af455998b588798a4c45f.1561491964.git.rodrigosiqueiramelo@gmail.com>
References: <cover.1561491964.git.rodrigosiqueiramelo@gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <cover.1561491964.git.rodrigosiqueiramelo@gmail.com>
User-Agent: NeoMutt/20180716
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=Z5NrdX7NWwAoR74sTDNwhmRnjPJuMOFlYOfia6fSoF0=;
 b=AEfuWP65YYdqezhUt9Nl1emQyjaECK5qQwk7hrbZkP9cB8u9dyggDWOVgkQXMVEXlM
 i4Gb7BFWNZcCoTnlzijHQ0Bu7OagWa9qJH55mozGBqrfw6Uo3nOS6SikMx9mKy2OtFNp
 GMXsPpGvML02cMESF1OGC1ruB1sosAsriTZQv2/wXhGx+QjUsNGd1neSDKMa4BvsKxFk
 1j+q+w5HnMc+PqnHVDpmvw1p6ul83sF0/gMzkVTQ6IZMrN257C5bDNSfEW0ZHy4fGELX
 NthS+POR7/9jtHo5OnTmhRpbqyys0Cl+RoS4IpXLscaWKk/RfOmlpxWquli5yxMXSKA1
 Yl3w==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V2hlbiB2a21zIGludm9rZSBkcm1fdW5pdmVyc2FsX3BsYW5lX2luaXQoKSwgaXQgc2V0cyAwIGZv
cgpwb3NzaWJsZV9jcnRjcyBwYXJhbWV0ZXIgd2hpY2ggbWVhbnMgdGhhdCBwbGFuZXMgY2FuJ3Qg
YmUgYXR0YWNoZWQgdG8KYW55IENSVEMuIEl0IGN1cnJlbnRseSB3b3JrcyBkdWUgdG8gc29tZSBz
YWZlZ3VhcmQgaW4gdGhlIGRybV9jcnRjIGZpbGU7Cmhvd2V2ZXIsIGl0IGlzIHBvc3NpYmxlIHRv
IGlkZW50aWZ5IHRoZSBwcm9ibGVtIGJ5IHRyeWluZyB0byBhcHBlbmQgYQpzZWNvbmQgY29ubmVj
dG9yLiBUaGlzIHBhdGNoIGZpeGVzIHRoaXMgaXNzdWUgYnkgbW9kaWZ5aW5nCnZrbXNfcGxhbmVf
aW5pdCgpIHRvIGFjY2VwdCBhbiBpbmRleCBwYXJhbWV0ZXIgd2hpY2ggbWFrZXMgdGhlIGNvZGUg
YQpsaXR0bGUgYml0IG1vcmUgZmxleGlibGUgYW5kIGF2b2lkIHNldCB6ZXJvIHRvIHBvc3NpYmxl
X2NydGNzLgoKU2lnbmVkLW9mZi1ieTogUm9kcmlnbyBTaXF1ZWlyYSA8cm9kcmlnb3NpcXVlaXJh
bWVsb0BnbWFpbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuYyAgICB8
IDIgKy0KIGRyaXZlcnMvZ3B1L2RybS92a21zL3ZrbXNfZHJ2LmggICAgfCA0ICsrLS0KIGRyaXZl
cnMvZ3B1L2RybS92a21zL3ZrbXNfb3V0cHV0LmMgfCA2ICsrKy0tLQogZHJpdmVycy9ncHUvZHJt
L3ZrbXMvdmttc19wbGFuZS5jICB8IDQgKystLQogNCBmaWxlcyBjaGFuZ2VkLCA4IGluc2VydGlv
bnMoKyksIDggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZrbXMv
dmttc19kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS92a21zL3ZrbXNfZHJ2LmMKaW5kZXggY2M1M2Vm
ODhhMzMxLi45NjZiM2Q2NTMxODkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92a21zL3Zr
bXNfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuYwpAQCAtMTI3LDcg
KzEyNyw3IEBAIHN0YXRpYyBpbnQgdmttc19tb2Rlc2V0X2luaXQoc3RydWN0IHZrbXNfZGV2aWNl
ICp2a21zZGV2KQogCWRldi0+bW9kZV9jb25maWcucHJlZmVycmVkX2RlcHRoID0gMjQ7CiAJZGV2
LT5tb2RlX2NvbmZpZy5oZWxwZXJfcHJpdmF0ZSA9ICZ2a21zX21vZGVfY29uZmlnX2hlbHBlcnM7
CiAKLQlyZXR1cm4gdmttc19vdXRwdXRfaW5pdCh2a21zZGV2KTsKKwlyZXR1cm4gdmttc19vdXRw
dXRfaW5pdCh2a21zZGV2LCAwKTsKIH0KIAogc3RhdGljIGludCBfX2luaXQgdmttc19pbml0KHZv
aWQpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2Rydi5oIGIvZHJpdmVy
cy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuaAppbmRleCAxMmI0ZGI3YWM2NDEuLmUyZDFhYTA4OWRl
YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuaAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vdmttcy92a21zX2Rydi5oCkBAIC0xMTUsMTAgKzExNSwxMCBAQCBib29sIHZr
bXNfZ2V0X3ZibGFua190aW1lc3RhbXAoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdW5zaWduZWQg
aW50IHBpcGUsCiAJCQkgICAgICAgaW50ICptYXhfZXJyb3IsIGt0aW1lX3QgKnZibGFua190aW1l
LAogCQkJICAgICAgIGJvb2wgaW5fdmJsYW5rX2lycSk7CiAKLWludCB2a21zX291dHB1dF9pbml0
KHN0cnVjdCB2a21zX2RldmljZSAqdmttc2Rldik7CitpbnQgdmttc19vdXRwdXRfaW5pdChzdHJ1
Y3Qgdmttc19kZXZpY2UgKnZrbXNkZXYsIGludCBpbmRleCk7CiAKIHN0cnVjdCBkcm1fcGxhbmUg
KnZrbXNfcGxhbmVfaW5pdChzdHJ1Y3Qgdmttc19kZXZpY2UgKnZrbXNkZXYsCi0JCQkJICBlbnVt
IGRybV9wbGFuZV90eXBlIHR5cGUpOworCQkJCSAgZW51bSBkcm1fcGxhbmVfdHlwZSB0eXBlLCBp
bnQgaW5kZXgpOwogCiAvKiBHZW0gc3R1ZmYgKi8KIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqdmtt
c19nZW1fY3JlYXRlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vdmttcy92a21zX291dHB1dC5jIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19v
dXRwdXQuYwppbmRleCA1NmZiNWMyYTIzMTUuLmZiMTk0MWE2NTIyYyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL3ZrbXMvdmttc19vdXRwdXQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdmtt
cy92a21zX291dHB1dC5jCkBAIC0zNSw3ICszNSw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJt
X2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3Mgdmttc19jb25uX2hlbHBlcl9mdW5jcyA9IHsKIAkuZ2V0
X21vZGVzICAgID0gdmttc19jb25uX2dldF9tb2RlcywKIH07CiAKLWludCB2a21zX291dHB1dF9p
bml0KHN0cnVjdCB2a21zX2RldmljZSAqdmttc2RldikKK2ludCB2a21zX291dHB1dF9pbml0KHN0
cnVjdCB2a21zX2RldmljZSAqdmttc2RldiwgaW50IGluZGV4KQogewogCXN0cnVjdCB2a21zX291
dHB1dCAqb3V0cHV0ID0gJnZrbXNkZXYtPm91dHB1dDsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
ID0gJnZrbXNkZXYtPmRybTsKQEAgLTQ1LDEyICs0NSwxMiBAQCBpbnQgdmttc19vdXRwdXRfaW5p
dChzdHJ1Y3Qgdmttc19kZXZpY2UgKnZrbXNkZXYpCiAJc3RydWN0IGRybV9wbGFuZSAqcHJpbWFy
eSwgKmN1cnNvciA9IE5VTEw7CiAJaW50IHJldDsKIAotCXByaW1hcnkgPSB2a21zX3BsYW5lX2lu
aXQodmttc2RldiwgRFJNX1BMQU5FX1RZUEVfUFJJTUFSWSk7CisJcHJpbWFyeSA9IHZrbXNfcGxh
bmVfaW5pdCh2a21zZGV2LCBEUk1fUExBTkVfVFlQRV9QUklNQVJZLCBpbmRleCk7CiAJaWYgKElT
X0VSUihwcmltYXJ5KSkKIAkJcmV0dXJuIFBUUl9FUlIocHJpbWFyeSk7CiAKIAlpZiAoZW5hYmxl
X2N1cnNvcikgewotCQljdXJzb3IgPSB2a21zX3BsYW5lX2luaXQodmttc2RldiwgRFJNX1BMQU5F
X1RZUEVfQ1VSU09SKTsKKwkJY3Vyc29yID0gdmttc19wbGFuZV9pbml0KHZrbXNkZXYsIERSTV9Q
TEFORV9UWVBFX0NVUlNPUiwgaW5kZXgpOwogCQlpZiAoSVNfRVJSKGN1cnNvcikpIHsKIAkJCXJl
dCA9IFBUUl9FUlIoY3Vyc29yKTsKIAkJCWdvdG8gZXJyX2N1cnNvcjsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS92a21zL3ZrbXNfcGxhbmUuYyBiL2RyaXZlcnMvZ3B1L2RybS92a21zL3Zr
bXNfcGxhbmUuYwppbmRleCAwZmNlYjYyNTg0MjIuLjE4YzYzMGNmYzQ4NSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19wbGFuZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92
a21zL3ZrbXNfcGxhbmUuYwpAQCAtMTc2LDcgKzE3Niw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZHJtX3BsYW5lX2hlbHBlcl9mdW5jcyB2a21zX3ByaW1hcnlfaGVscGVyX2Z1bmNzID0gewogfTsK
IAogc3RydWN0IGRybV9wbGFuZSAqdmttc19wbGFuZV9pbml0KHN0cnVjdCB2a21zX2RldmljZSAq
dmttc2RldiwKLQkJCQkgIGVudW0gZHJtX3BsYW5lX3R5cGUgdHlwZSkKKwkJCQkgIGVudW0gZHJt
X3BsYW5lX3R5cGUgdHlwZSwgaW50IGluZGV4KQogewogCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYg
PSAmdmttc2Rldi0+ZHJtOwogCWNvbnN0IHN0cnVjdCBkcm1fcGxhbmVfaGVscGVyX2Z1bmNzICpm
dW5jczsKQEAgLTE5OCw3ICsxOTgsNyBAQCBzdHJ1Y3QgZHJtX3BsYW5lICp2a21zX3BsYW5lX2lu
aXQoc3RydWN0IHZrbXNfZGV2aWNlICp2a21zZGV2LAogCQlmdW5jcyA9ICZ2a21zX3ByaW1hcnlf
aGVscGVyX2Z1bmNzOwogCX0KIAotCXJldCA9IGRybV91bml2ZXJzYWxfcGxhbmVfaW5pdChkZXYs
IHBsYW5lLCAwLAorCXJldCA9IGRybV91bml2ZXJzYWxfcGxhbmVfaW5pdChkZXYsIHBsYW5lLCAx
IDw8IGluZGV4LAogCQkJCSAgICAgICAmdmttc19wbGFuZV9mdW5jcywKIAkJCQkgICAgICAgZm9y
bWF0cywgbmZvcm1hdHMsCiAJCQkJICAgICAgIE5VTEwsIHR5cGUsIE5VTEwpOwotLSAKMi4yMS4w
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZl
bCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
