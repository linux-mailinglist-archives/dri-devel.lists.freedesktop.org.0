Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5265095320
	for <lists+dri-devel@lfdr.de>; Tue, 20 Aug 2019 03:18:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 924A56E571;
	Tue, 20 Aug 2019 01:18:03 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CCCF26E504
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 01:17:50 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 4085CAF9;
 Tue, 20 Aug 2019 03:17:45 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 20/50] drm/omap: Use the drm_panel_bridge API
Date: Tue, 20 Aug 2019 04:16:51 +0300
Message-Id: <20190820011721.30136-21-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
References: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1566263865;
 bh=sssVpt03GfVpjLa1198bIUaCmuHLMoyoLB8WAvThmYs=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=wHt3FxiQSWEadKpGJCzJZuouHrM6uVPpvc3XTh1cMYPrQGZB0cs97N7/PaZiXTrGd
 TnbTatLWLMefyVtfKwXnhGPb882d+cYrMagdNhjDCsgL+gTm+8UTtDbIkdShrIZd26
 BRuybtdSCu/MW3Scxgk+9KalgoxkF+DGhRGihOto=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sean Paul <sean@poorly.run>,
 Sebastian Reichel <sebastian.reichel@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UmVwbGFjZSB0aGUgbWFudWFsIHBhbmVsIGhhbmRsaW5nIGNvZGUgYnkgYSBkcm1fcGFuZWxfYnJp
ZGdlLiBUaGlzCnNpbXBsaWZpZXMgdGhlIGRyaXZlciBhbmQgYWxsb3dzIGFsbCBjb21wb25lbnRz
IGluIHRoZSBkaXNwbGF5IHBpcGVsaW5lCnRvIGJlIHRyZWF0ZWQgYXMgYnJpZGdlcywgcGF2aW5n
IHRoZSB3YXkgdG8gZ2VuZXJpYyBjb25uZWN0b3IgaGFuZGxpbmcuCgpTaWduZWQtb2ZmLWJ5OiBM
YXVyZW50IFBpbmNoYXJ0IDxsYXVyZW50LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+ClJldmll
d2VkLWJ5OiBUb21pIFZhbGtlaW5lbiA8dG9taS52YWxrZWluZW5AdGkuY29tPgotLS0KQ2hhbmdl
cyBzaW5jZSB2MToKCi0gS2VlcCAjaW5jbHVkZSA8ZHJtL2RybV9wYW5lbC5oPgotLS0KIGRyaXZl
cnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9iYXNlLmMgICAgICAgfCAxMiArKysrLS0tLS0KIGRyaXZl
cnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vdXRwdXQuYyAgICAgfCAzMyArKysrKysrKysrKysrKysr
KysrKystLS0KIGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBfY29ubmVjdG9yLmMgfCAgOSAt
LS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2Rydi5jICAgICAgIHwgMTMgLS0t
LS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9lbmNvZGVyLmMgICB8IDEzIC0t
LS0tLS0tLS0KIDUgZmlsZXMgY2hhbmdlZCwgMzQgaW5zZXJ0aW9ucygrKSwgNDYgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2Jhc2UuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9iYXNlLmMKaW5kZXggY2FlNTY4NzgyMmUyLi44MGQ0
ODkzNmQxNzcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9iYXNlLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2Jhc2UuYwpAQCAtMTQ5LDggKzE0OSw3
IEBAIHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKm9tYXBkc3NfZGV2aWNlX25leHRfb3V0cHV0KHN0
cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmZyb20pCiAJCQlnb3RvIGRvbmU7CiAJCX0KIAotCQlpZiAo
ZHNzZGV2LT5pZCAmJgotCQkgICAgKGRzc2Rldi0+bmV4dCB8fCBkc3NkZXYtPmJyaWRnZSB8fCBk
c3NkZXYtPnBhbmVsKSkKKwkJaWYgKGRzc2Rldi0+aWQgJiYgKGRzc2Rldi0+bmV4dCB8fCBkc3Nk
ZXYtPmJyaWRnZSkpCiAJCQlnb3RvIGRvbmU7CiAJfQogCkBAIC0xODUsMTEgKzE4NCwxMCBAQCBp
bnQgb21hcGRzc19kZXZpY2VfY29ubmVjdChzdHJ1Y3QgZHNzX2RldmljZSAqZHNzLAogCWlmICgh
ZHN0KSB7CiAJCS8qCiAJCSAqIFRoZSBkZXN0aW5hdGlvbiBpcyBOVUxMIHdoZW4gdGhlIHNvdXJj
ZSBpcyBjb25uZWN0ZWQgdG8gYQotCQkgKiBicmlkZ2Ugb3IgcGFuZWwgaW5zdGVhZCBvZiBhIERT
UyBkZXZpY2UuIFN0b3AgaGVyZSwgd2Ugd2lsbAotCQkgKiBhdHRhY2ggdGhlIGJyaWRnZSBvciBw
YW5lbCBsYXRlciB3aGVuIHdlIHdpbGwgaGF2ZSBhIERSTQotCQkgKiBlbmNvZGVyLgorCQkgKiBi
cmlkZ2UgaW5zdGVhZCBvZiBhIERTUyBkZXZpY2UuIFN0b3AgaGVyZSwgd2Ugd2lsbCBhdHRhY2gK
KwkJICogdGhlIGJyaWRnZSBsYXRlciB3aGVuIHdlIHdpbGwgaGF2ZSBhIERSTSBlbmNvZGVyLgog
CQkgKi8KLQkJcmV0dXJuIHNyYyAmJiAoc3JjLT5icmlkZ2UgfHwgc3JjLT5wYW5lbCkgPyAwIDog
LUVJTlZBTDsKKwkJcmV0dXJuIHNyYyAmJiBzcmMtPmJyaWRnZSA/IDAgOiAtRUlOVkFMOwogCX0K
IAogCWlmIChvbWFwZHNzX2RldmljZV9pc19jb25uZWN0ZWQoZHN0KSkKQEAgLTIxNyw3ICsyMTUs
NyBAQCB2b2lkIG9tYXBkc3NfZGV2aWNlX2Rpc2Nvbm5lY3Qoc3RydWN0IG9tYXBfZHNzX2Rldmlj
ZSAqc3JjLAogCQlkc3QgPyBkZXZfbmFtZShkc3QtPmRldikgOiAiTlVMTCIpOwogCiAJaWYgKCFk
c3QpIHsKLQkJV0FSTl9PTighc3JjLT5icmlkZ2UgJiYgIXNyYy0+cGFuZWwpOworCQlXQVJOX09O
KCFzcmMtPmJyaWRnZSk7CiAJCXJldHVybjsKIAl9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9vbWFwZHJtL2Rzcy9vdXRwdXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9v
dXRwdXQuYwppbmRleCBkZTBmODgyZjBmN2IuLmNhMDI3MjhhY2MxNSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL291dHB1dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9v
bWFwZHJtL2Rzcy9vdXRwdXQuYwpAQCAtMTksNiArMTksNyBAQAogaW50IG9tYXBkc3NfZGV2aWNl
X2luaXRfb3V0cHV0KHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKm91dCkKIHsKIAlzdHJ1Y3QgZGV2
aWNlX25vZGUgKnJlbW90ZV9ub2RlOworCWludCByZXQ7CiAKIAlyZW1vdGVfbm9kZSA9IG9mX2dy
YXBoX2dldF9yZW1vdGVfbm9kZShvdXQtPmRldi0+b2Zfbm9kZSwgMCwgMCk7CiAJaWYgKCFyZW1v
dGVfbm9kZSkgewpAQCAtMzYsMTcgKzM3LDQxIEBAIGludCBvbWFwZHNzX2RldmljZV9pbml0X291
dHB1dChzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpvdXQpCiAKIAlpZiAob3V0LT5uZXh0ICYmIG91
dC0+dHlwZSAhPSBvdXQtPm5leHQtPnR5cGUpIHsKIAkJZGV2X2VycihvdXQtPmRldiwgIm91dHB1
dCB0eXBlIGFuZCBkaXNwbGF5IHR5cGUgZG9uJ3QgbWF0Y2hcbiIpOwotCQlvbWFwZHNzX2Rldmlj
ZV9wdXQob3V0LT5uZXh0KTsKLQkJb3V0LT5uZXh0ID0gTlVMTDsKLQkJcmV0dXJuIC1FSU5WQUw7
CisJCXJldCA9IC1FSU5WQUw7CisJCWdvdG8gZXJyb3I7CiAJfQogCi0JcmV0dXJuIG91dC0+bmV4
dCB8fCBvdXQtPmJyaWRnZSB8fCBvdXQtPnBhbmVsID8gMCA6IC1FUFJPQkVfREVGRVI7CisJaWYg
KG91dC0+cGFuZWwpIHsKKwkJdW5zaWduZWQgaW50IGNvbm5lY3Rvcl90eXBlOworCQlzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlOworCisJCWNvbm5lY3Rvcl90eXBlID0gb21hcGRzc19kZXZpY2Vf
Y29ubmVjdG9yX3R5cGUob3V0LT50eXBlKTsKKwkJYnJpZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9h
ZGQob3V0LT5wYW5lbCwgY29ubmVjdG9yX3R5cGUpOworCQlpZiAoSVNfRVJSKGJyaWRnZSkpIHsK
KwkJCWRldl9lcnIob3V0LT5kZXYsCisJCQkJInVuYWJsZSB0byBjcmVhdGUgcGFuZWwgYnJpZGdl
ICglbGQpXG4iLAorCQkJCVBUUl9FUlIoYnJpZGdlKSk7CisJCQlyZXQgPSBQVFJfRVJSKGJyaWRn
ZSk7CisJCQlnb3RvIGVycm9yOworCQl9CisKKwkJb3V0LT5icmlkZ2UgPSBicmlkZ2U7CisJfQor
CisJcmV0dXJuIG91dC0+bmV4dCB8fCBvdXQtPmJyaWRnZSA/IDAgOiAtRVBST0JFX0RFRkVSOwor
CitlcnJvcjoKKwlvbWFwZHNzX2RldmljZV9wdXQob3V0LT5uZXh0KTsKKwlvdXQtPm5leHQgPSBO
VUxMOworCXJldHVybiByZXQ7CiB9CiBFWFBPUlRfU1lNQk9MKG9tYXBkc3NfZGV2aWNlX2luaXRf
b3V0cHV0KTsKIAogdm9pZCBvbWFwZHNzX2RldmljZV9jbGVhbnVwX291dHB1dChzdHJ1Y3Qgb21h
cF9kc3NfZGV2aWNlICpvdXQpCiB7CisJaWYgKG91dC0+YnJpZGdlICYmIG91dC0+cGFuZWwpCisJ
CWRybV9wYW5lbF9icmlkZ2VfcmVtb3ZlKG91dC0+YnJpZGdlKTsKKwogCWlmIChvdXQtPm5leHQp
CiAJCW9tYXBkc3NfZGV2aWNlX3B1dChvdXQtPm5leHQpOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL29tYXBkcm0vb21hcF9jb25uZWN0b3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFw
ZHJtL29tYXBfY29ubmVjdG9yLmMKaW5kZXggOGRjNjEzYWZiMWM1Li5iMGNiMmVjYjMwYWIgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBfY29ubmVjdG9yLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9jb25uZWN0b3IuYwpAQCAtNiw3ICs2LDYgQEAK
IAogI2luY2x1ZGUgPGRybS9kcm1fYXRvbWljX2hlbHBlci5oPgogI2luY2x1ZGUgPGRybS9kcm1f
Y3J0Yy5oPgotI2luY2x1ZGUgPGRybS9kcm1fcGFuZWwuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3By
b2JlX2hlbHBlci5oPgogCiAjaW5jbHVkZSAib21hcF9kcnYuaCIKQEAgLTE5MCw3ICsxODksNiBA
QCBzdGF0aWMgaW50IG9tYXBfY29ubmVjdG9yX2dldF9tb2Rlc19lZGlkKHN0cnVjdCBkcm1fY29u
bmVjdG9yICpjb25uZWN0b3IsCiAKIHN0YXRpYyBpbnQgb21hcF9jb25uZWN0b3JfZ2V0X21vZGVz
KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCiB7Ci0Jc3RydWN0IG9tYXBfY29ubmVj
dG9yICpvbWFwX2Nvbm5lY3RvciA9IHRvX29tYXBfY29ubmVjdG9yKGNvbm5lY3Rvcik7CiAJc3Ry
dWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2OwogCiAJREJHKCIlcyIsIGNvbm5lY3Rvci0+bmFt
ZSk7CkBAIC0yMTMsMTMgKzIxMSw2IEBAIHN0YXRpYyBpbnQgb21hcF9jb25uZWN0b3JfZ2V0X21v
ZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCiAJaWYgKGRzc2RldikKIAkJcmV0
dXJuIGRzc2Rldi0+b3BzLT5nZXRfbW9kZXMoZHNzZGV2LCBjb25uZWN0b3IpOwogCi0JLyoKLQkg
KiBPdGhlcndpc2UgaWYgdGhlIGRpc3BsYXkgcGlwZWxpbmUgdXNlcyBhIGRybV9wYW5lbCwgd2Ug
ZGVsZWdhdGUgdGhlCi0JICogb3BlcmF0aW9uIHRvIHRoZSBwYW5lbCBBUEkuCi0JICovCi0JaWYg
KG9tYXBfY29ubmVjdG9yLT5vdXRwdXQtPnBhbmVsKQotCQlyZXR1cm4gZHJtX3BhbmVsX2dldF9t
b2RlcyhvbWFwX2Nvbm5lY3Rvci0+b3V0cHV0LT5wYW5lbCk7Ci0KIAkvKgogCSAqIFdlIGNhbid0
IHJldHJpZXZlIG1vZGVzLCB3aGljaCBjYW4gaGFwcGVuIGZvciBpbnN0YW5jZSBmb3IgYSBEVkkg
b3IKIAkgKiBWR0Egb3V0cHV0IHdpdGggdGhlIEREQyBidXMgdW5jb25uZWN0ZWQuIFRoZSBLTVMg
Y29yZSB3aWxsIGFkZCB0aGUKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29t
YXBfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2Rydi5jCmluZGV4IDI5ODhh
ZjlhZTc0My4uNzI4NzJkZmRiNzNlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRy
bS9vbWFwX2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBfZHJ2LmMKQEAg
LTE1LDcgKzE1LDYgQEAKICNpbmNsdWRlIDxkcm0vZHJtX2ZiX2hlbHBlci5oPgogI2luY2x1ZGUg
PGRybS9kcm1fZmlsZS5oPgogI2luY2x1ZGUgPGRybS9kcm1faW9jdGwuaD4KLSNpbmNsdWRlIDxk
cm0vZHJtX3BhbmVsLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9wcmltZS5oPgogI2luY2x1ZGUgPGRy
bS9kcm1fcHJvYmVfaGVscGVyLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV92YmxhbmsuaD4KQEAgLTEz
Myw5ICsxMzIsNiBAQCBzdGF0aWMgdm9pZCBvbWFwX2Rpc2Nvbm5lY3RfcGlwZWxpbmVzKHN0cnVj
dCBkcm1fZGV2aWNlICpkZGV2KQogCWZvciAoaSA9IDA7IGkgPCBwcml2LT5udW1fcGlwZXM7IGkr
KykgewogCQlzdHJ1Y3Qgb21hcF9kcm1fcGlwZWxpbmUgKnBpcGUgPSAmcHJpdi0+cGlwZXNbaV07
CiAKLQkJaWYgKHBpcGUtPm91dHB1dC0+cGFuZWwpCi0JCQlkcm1fcGFuZWxfZGV0YWNoKHBpcGUt
Pm91dHB1dC0+cGFuZWwpOwotCiAJCW9tYXBkc3NfZGV2aWNlX2Rpc2Nvbm5lY3QoTlVMTCwgcGlw
ZS0+b3V0cHV0KTsKIAogCQlvbWFwZHNzX2RldmljZV9wdXQocGlwZS0+b3V0cHV0KTsKQEAgLTIy
MCw4ICsyMTYsNiBAQCBzdGF0aWMgaW50IG9tYXBfZGlzcGxheV9pZChzdHJ1Y3Qgb21hcF9kc3Nf
ZGV2aWNlICpvdXRwdXQpCiAJCQlicmlkZ2UgPSBicmlkZ2UtPm5leHQ7CiAKIAkJbm9kZSA9IGJy
aWRnZS0+b2Zfbm9kZTsKLQl9IGVsc2UgaWYgKG91dHB1dC0+cGFuZWwpIHsKLQkJbm9kZSA9IG91
dHB1dC0+cGFuZWwtPmRldi0+b2Zfbm9kZTsKIAl9CiAKIAlyZXR1cm4gbm9kZSA/IG9mX2FsaWFz
X2dldF9pZChub2RlLCAiZGlzcGxheSIpIDogLUVOT0RFVjsKQEAgLTMzNiwxMyArMzMwLDYgQEAg
c3RhdGljIGludCBvbWFwX21vZGVzZXRfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCQkJ
CXJldHVybiAtRU5PTUVNOwogCiAJCQlkcm1fY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVyKHBpcGUt
PmNvbm5lY3RvciwgZW5jb2Rlcik7Ci0KLQkJCWlmIChwaXBlLT5vdXRwdXQtPnBhbmVsKSB7Ci0J
CQkJcmV0ID0gZHJtX3BhbmVsX2F0dGFjaChwaXBlLT5vdXRwdXQtPnBhbmVsLAotCQkJCQkJICAg
ICAgIHBpcGUtPmNvbm5lY3Rvcik7Ci0JCQkJaWYgKHJldCA8IDApCi0JCQkJCXJldHVybiByZXQ7
Ci0JCQl9CiAJCX0KIAogCQljcnRjID0gb21hcF9jcnRjX2luaXQoZGV2LCBwaXBlLCBwcml2LT5w
bGFuZXNbaV0pOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9lbmNv
ZGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2VuY29kZXIuYwppbmRleCA0MTVk
MGVhYzFjMGMuLjdmM2Y1ODQ0YzYyYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL29tYXBk
cm0vb21hcF9lbmNvZGVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9lbmNv
ZGVyLmMKQEAgLTksNyArOSw2IEBACiAjaW5jbHVkZSA8ZHJtL2RybV9jcnRjLmg+CiAjaW5jbHVk
ZSA8ZHJtL2RybV9tb2Rlc2V0X2hlbHBlcl92dGFibGVzLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9l
ZGlkLmg+Ci0jaW5jbHVkZSA8ZHJtL2RybV9wYW5lbC5oPgogCiAjaW5jbHVkZSAib21hcF9kcnYu
aCIKIApAQCAtMTU1LDEyICsxNTQsNiBAQCBzdGF0aWMgdm9pZCBvbWFwX2VuY29kZXJfZGlzYWJs
ZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCiAKIAlkZXZfZGJnKGRldi0+ZGV2LCAiZGlz
YWJsZSglcylcbiIsIGRzc2Rldi0+bmFtZSk7CiAKLQkvKiBEaXNhYmxlIHRoZSBwYW5lbCBpZiBw
cmVzZW50LiAqLwotCWlmIChkc3NkZXYtPnBhbmVsKSB7Ci0JCWRybV9wYW5lbF9kaXNhYmxlKGRz
c2Rldi0+cGFuZWwpOwotCQlkcm1fcGFuZWxfdW5wcmVwYXJlKGRzc2Rldi0+cGFuZWwpOwotCX0K
LQogCS8qCiAJICogRGlzYWJsZSB0aGUgY2hhaW4gb2YgZXh0ZXJuYWwgZGV2aWNlcywgc3RhcnRp
bmcgYXQgdGhlIG9uZSBhdCB0aGUKIAkgKiBpbnRlcm5hbCBlbmNvZGVyJ3Mgb3V0cHV0LgpAQCAt
MjEwLDEyICsyMDMsNiBAQCBzdGF0aWMgdm9pZCBvbWFwX2VuY29kZXJfZW5hYmxlKHN0cnVjdCBk
cm1fZW5jb2RlciAqZW5jb2RlcikKIAkgKiBpbnRlcm5hbCBlbmNvZGVyJ3Mgb3V0cHV0LgogCSAq
LwogCW9tYXBkc3NfZGV2aWNlX2VuYWJsZShkc3NkZXYtPm5leHQpOwotCi0JLyogRW5hYmxlIHRo
ZSBwYW5lbCBpZiBwcmVzZW50LiAqLwotCWlmIChkc3NkZXYtPnBhbmVsKSB7Ci0JCWRybV9wYW5l
bF9wcmVwYXJlKGRzc2Rldi0+cGFuZWwpOwotCQlkcm1fcGFuZWxfZW5hYmxlKGRzc2Rldi0+cGFu
ZWwpOwotCX0KIH0KIAogc3RhdGljIGludCBvbWFwX2VuY29kZXJfYXRvbWljX2NoZWNrKHN0cnVj
dCBkcm1fZW5jb2RlciAqZW5jb2RlciwKLS0gClJlZ2FyZHMsCgpMYXVyZW50IFBpbmNoYXJ0Cgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwg
bWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
