Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 811F7FE5DB
	for <lists+dri-devel@lfdr.de>; Fri, 15 Nov 2019 20:42:35 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 909056EA73;
	Fri, 15 Nov 2019 19:42:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3F8BF6EA5D;
 Fri, 15 Nov 2019 19:42:23 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 15 Nov 2019 11:42:23 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,309,1569308400"; d="scan'208";a="203474619"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by fmsmga008.fm.intel.com with SMTP; 15 Nov 2019 11:42:21 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 15 Nov 2019 21:42:20 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 5/7] drm/selftests: Add some selftests for
 drm_atomic_set_mode_for_crtc()
Date: Fri, 15 Nov 2019 21:42:02 +0200
Message-Id: <20191115194204.22244-6-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191115194204.22244-1-ville.syrjala@linux.intel.com>
References: <20191115194204.22244-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KClRl
c3QgdGhlIGJhc2ljcyBvZiBkcm1fYXRvbWljX3NldF9tb2RlX2Zvcl9jcnRjKCksIGFuZCBpbiBw
YXJ0aWN1bGFyCnZlcmlmeSB0aGF0IHRoZSBmdW5jdGlvbiBkb2Vzbid0IHRha2UgdGhlIHNob3J0
Y3V0IGluY29ycmVjdGx5LgoKQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZndsbC5jaD4KU2ln
bmVkLW9mZi1ieTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNv
bT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vc2VsZnRlc3RzL01ha2VmaWxlICAgICAgICAgICAgfCAg
IDMgKy0KIC4uLi9ncHUvZHJtL3NlbGZ0ZXN0cy9kcm1fbW9kZXNldF9zZWxmdGVzdHMuaCB8ICAg
MiArCiAuLi4vZ3B1L2RybS9zZWxmdGVzdHMvdGVzdC1kcm1fYXRvbWljX3VhcGkuYyAgfCAxMTAg
KysrKysrKysrKysrKysrKysrCiAuLi4vZHJtL3NlbGZ0ZXN0cy90ZXN0LWRybV9tb2Rlc2V0X2Nv
bW1vbi5oICAgfCAgIDIgKwogNCBmaWxlcyBjaGFuZ2VkLCAxMTYgaW5zZXJ0aW9ucygrKSwgMSBk
ZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9zZWxmdGVzdHMv
dGVzdC1kcm1fYXRvbWljX3VhcGkuYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9zZWxm
dGVzdHMvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vc2VsZnRlc3RzL01ha2VmaWxlCmluZGV4
IGQyMTM3MzQyYjM3MS4uYTVhZGMyNWJkMzQ1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
c2VsZnRlc3RzL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9zZWxmdGVzdHMvTWFrZWZp
bGUKQEAgLTEsNiArMSw3IEBACiAjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9u
bHkKIHRlc3QtZHJtX21vZGVzZXQteSA6PSB0ZXN0LWRybV9tb2Rlc2V0X2NvbW1vbi5vIHRlc3Qt
ZHJtX3BsYW5lX2hlbHBlci5vIFwKICAgICAgICAgICAgICAgICAgICAgICB0ZXN0LWRybV9mb3Jt
YXQubyB0ZXN0LWRybV9mcmFtZWJ1ZmZlci5vIFwKLQkJICAgICAgdGVzdC1kcm1fZGFtYWdlX2hl
bHBlci5vIHRlc3QtZHJtX2RwX21zdF9oZWxwZXIubworCQkgICAgICB0ZXN0LWRybV9kYW1hZ2Vf
aGVscGVyLm8gdGVzdC1kcm1fZHBfbXN0X2hlbHBlci5vIFwKKwkJICAgICAgdGVzdC1kcm1fYXRv
bWljX3VhcGkubwogCiBvYmotJChDT05GSUdfRFJNX0RFQlVHX1NFTEZURVNUKSArPSB0ZXN0LWRy
bV9tbS5vIHRlc3QtZHJtX21vZGVzZXQubyB0ZXN0LWRybV9jbWRsaW5lX3BhcnNlci5vCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vc2VsZnRlc3RzL2RybV9tb2Rlc2V0X3NlbGZ0ZXN0cy5o
IGIvZHJpdmVycy9ncHUvZHJtL3NlbGZ0ZXN0cy9kcm1fbW9kZXNldF9zZWxmdGVzdHMuaAppbmRl
eCAxODk4ZGUwYjRhNGQuLjJjYzRlMmY0MzI4NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L3NlbGZ0ZXN0cy9kcm1fbW9kZXNldF9zZWxmdGVzdHMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
c2VsZnRlc3RzL2RybV9tb2Rlc2V0X3NlbGZ0ZXN0cy5oCkBAIC02LDYgKzYsOCBAQAogICoKICAq
IFRlc3RzIGFyZSBleGVjdXRlZCBpbiBvcmRlciBieSBpZ3QvZHJtX3NlbGZ0ZXN0c19oZWxwZXIK
ICAqLworc2VsZnRlc3QoYXRvbWljX3NldF9tb2RlX2Zvcl9jcnRjLCBpZ3RfYXRvbWljX3NldF9t
b2RlX2Zvcl9jcnRjKQorc2VsZnRlc3QoYXRvbWljX3NldF96ZXJvZWRfbW9kZV9mb3JfY3J0Yywg
aWd0X2F0b21pY19zZXRfemVyb2VkX21vZGVfZm9yX2NydGMpCiBzZWxmdGVzdChjaGVja19wbGFu
ZV9zdGF0ZSwgaWd0X2NoZWNrX3BsYW5lX3N0YXRlKQogc2VsZnRlc3QoY2hlY2tfZHJtX2Zvcm1h
dF9ibG9ja193aWR0aCwgaWd0X2NoZWNrX2RybV9mb3JtYXRfYmxvY2tfd2lkdGgpCiBzZWxmdGVz
dChjaGVja19kcm1fZm9ybWF0X2Jsb2NrX2hlaWdodCwgaWd0X2NoZWNrX2RybV9mb3JtYXRfYmxv
Y2tfaGVpZ2h0KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3NlbGZ0ZXN0cy90ZXN0LWRy
bV9hdG9taWNfdWFwaS5jIGIvZHJpdmVycy9ncHUvZHJtL3NlbGZ0ZXN0cy90ZXN0LWRybV9hdG9t
aWNfdWFwaS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uMGY5YTRk
MGQyNTQxCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL3NlbGZ0ZXN0cy90ZXN0
LWRybV9hdG9taWNfdWFwaS5jCkBAIC0wLDAgKzEsMTEwIEBACisvLyBTUERYLUxpY2Vuc2UtSWRl
bnRpZmllcjogR1BMLTIuMAorLyoKKyAqIFRlc3QgY2FzZXMgZm9yIHRoZSBkcm1fYXRvbWljX3Vh
cGkgZnVuY3Rpb25zCisgKi8KKworI2RlZmluZSBwcl9mbXQoZm10KSAiZHJtX2F0b21pY191YXBp
OiAiIGZtdAorCisjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfdWFwaS5oPgorI2luY2x1ZGUgPGRy
bS9kcm1fZHJ2Lmg+CisjaW5jbHVkZSA8ZHJtL2RybV9jcnRjLmg+CisjaW5jbHVkZSA8ZHJtL2Ry
bV9tb2Rlcy5oPgorCisjaW5jbHVkZSAidGVzdC1kcm1fbW9kZXNldF9jb21tb24uaCIKKworc3Rh
dGljIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlIHplcm9lZF9tb2RlOworCitzdGF0aWMg
c3RydWN0IGRybV9kcml2ZXIgbW9ja19kcml2ZXI7CitzdGF0aWMgc3RydWN0IGRybV9kZXZpY2Ug
bW9ja19kZXZpY2U7CitzdGF0aWMgc3RydWN0IGRybV9jcnRjIG1vY2tfY3J0YzsKKworc3RhdGlj
IHZvaWQgaW5pdCh2b2lkKQoreworCW1lbXNldCgmbW9ja19kcml2ZXIsIDAsIHNpemVvZihtb2Nr
X2RyaXZlcikpOworCW1lbXNldCgmbW9ja19kZXZpY2UsIDAsIHNpemVvZihtb2NrX2RldmljZSkp
OworCW1lbXNldCgmbW9ja19jcnRjLCAwLCBzaXplb2YobW9ja19jcnRjKSk7CisKKwltb2NrX2Rl
dmljZS5kcml2ZXIgPSAmbW9ja19kcml2ZXI7CisJbW9ja19jcnRjLmRldiA9ICZtb2NrX2Rldmlj
ZTsKKworCWRybV9tb2RlX2NvbmZpZ19pbml0KCZtb2NrX2RldmljZSk7Cit9CisKK3N0YXRpYyB2
b2lkIGNsZWFudXAodm9pZCkKK3sKKwlkcm1fbW9kZV9jb25maWdfY2xlYW51cCgmbW9ja19kZXZp
Y2UpOworfQorCitpbnQgaWd0X2F0b21pY19zZXRfbW9kZV9mb3JfY3J0Yyh2b2lkICppZ25vcmVk
KQoreworCXN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSBtb2RlMSA9IHsKKwkJ
RFJNX01PREUoIjY0MHg0ODAiLCBEUk1fTU9ERV9UWVBFX0RSSVZFUiwgMjUxNzUsCisJCQkgNjQw
LCA2NTYsIDc1MiwgODAwLCAwLCA0ODAsIDQ5MCwgNDkyLCA1MjUsIDAsCisJCQkgRFJNX01PREVf
RkxBR19OSFNZTkMgfCBEUk1fTU9ERV9GTEFHX05WU1lOQykKKwl9OworCXN0YXRpYyBjb25zdCBz
dHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSBtb2RlMiA9IHsKKwkJRFJNX01PREUoIjEwMjR4NzY4Iiwg
RFJNX01PREVfVFlQRV9EUklWRVIsIDY1MDAwLAorCQkJIDEwMjQsIDEwNDgsIDExODQsIDEzNDQs
IDAsIDc2OCwgNzcxLCA3NzcsIDgwNiwgMCwKKwkJCSBEUk1fTU9ERV9GTEFHX05IU1lOQyB8IERS
TV9NT0RFX0ZMQUdfTlZTWU5DKQorCX07CisJc3RydWN0IGRybV9jcnRjX3N0YXRlIGNydGNfc3Rh
dGUgPSB7CisJCS5jcnRjID0gJm1vY2tfY3J0YywKKwl9OworCWludCByZXQ7CisKKwlpbml0KCk7
CisKKwkvKgorCSAqIE1ha2UJc3VyZSBkcm1fYXRvbWljX3NldF9tb2RlX2Zvcl9jcnRjKCkKKwkg
KiB1cGRhdGVzIHRoZSBjcnRjIHN0YXRlIGNvcnJlY3RseS4KKwkgKi8KKwlyZXQgPSBkcm1fYXRv
bWljX3NldF9tb2RlX2Zvcl9jcnRjKCZjcnRjX3N0YXRlLCAmbW9kZTEpOworCUZBSUwocmV0IDwg
MCwgIlVuYWJsZSB0byBzZXQgbW9kZSBvbiBjcnRjXG4iKTsKKwlGQUlMX09OKCFjcnRjX3N0YXRl
LmVuYWJsZSk7CisJRkFJTF9PTihtZW1jbXAoJmNydGNfc3RhdGUubW9kZSwgJm1vZGUxLCBzaXpl
b2YobW9kZTEpKSk7CisKKwlyZXQgPSBkcm1fYXRvbWljX3NldF9tb2RlX2Zvcl9jcnRjKCZjcnRj
X3N0YXRlLCAmbW9kZTIpOworCUZBSUwocmV0IDwgMCwgIlVuYWJsZSB0byBzZXQgbW9kZSBvbiBj
cnRjXG4iKTsKKwlGQUlMX09OKCFjcnRjX3N0YXRlLmVuYWJsZSk7CisJRkFJTF9PTihtZW1jbXAo
JmNydGNfc3RhdGUubW9kZSwgJm1vZGUyLCBzaXplb2YobW9kZTIpKSk7CisKKwlyZXQgPSBkcm1f
YXRvbWljX3NldF9tb2RlX2Zvcl9jcnRjKCZjcnRjX3N0YXRlLCBOVUxMKTsKKwlGQUlMKHJldCA8
IDAsICJVbmFibGUgdG8gdW5zZXQgbW9kZSBvbiBjcnRjXG4iKTsKKwlGQUlMX09OKGNydGNfc3Rh
dGUuZW5hYmxlKTsKKwlGQUlMX09OKG1lbWNtcCgmY3J0Y19zdGF0ZS5tb2RlLCAmemVyb2VkX21v
ZGUsIHNpemVvZih6ZXJvZWRfbW9kZSkpKTsKKworCWNsZWFudXAoKTsKKworCXJldHVybiAwOwor
fQorCitpbnQgaWd0X2F0b21pY19zZXRfemVyb2VkX21vZGVfZm9yX2NydGModm9pZCAqaWdub3Jl
ZCkKK3sKKwlzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgY3J0Y19zdGF0ZSA9IHsKKwkJLmNydGMgPSAm
bW9ja19jcnRjLAorCX07CisJaW50IHJldDsKKworCWluaXQoKTsKKworCS8qCisJICogTWFrZSBz
dXJlIGRybV9hdG9taWNfc2V0X21vZGVfZm9yX2NydGMoKSBkb2Vzbid0CisJICogdGFrZSB0aGUg
c2hvcnRjdXQgYW5kIGZhaWwgdG8gdXBkYXRlIGNydGNfc3RhdGUuZW5hYmxlCisJICogd2hlbiBw
YXNzZWQgYSB6ZXJvZWQgbW9kZSAod2hpY2ggaXMgdGVjaG5pY2FsbHkgbm90CisJICogdmFsaWQs
IGJ1dCBhcyBkcm1fYXRvbWljX3NldF9tb2RlX2Zvcl9jcnRjKCkgZG9lcyBubworCSAqIG1vZGUg
dmFsaWRhdGlvbiBpdCBzaG91bGQgc3RpbGwgd29yaykuCisJICovCisJcmV0ID0gZHJtX2F0b21p
Y19zZXRfbW9kZV9mb3JfY3J0YygmY3J0Y19zdGF0ZSwgJnplcm9lZF9tb2RlKTsKKwlGQUlMKHJl
dCA8IDAsICJVbmFibGUgdG8gc2V0IG1vZGUgb24gY3J0Y1xuIik7CisJRkFJTF9PTighY3J0Y19z
dGF0ZS5lbmFibGUpOworCUZBSUxfT04obWVtY21wKCZjcnRjX3N0YXRlLm1vZGUsICZ6ZXJvZWRf
bW9kZSwgc2l6ZW9mKHplcm9lZF9tb2RlKSkpOworCisJcmV0ID0gZHJtX2F0b21pY19zZXRfbW9k
ZV9mb3JfY3J0YygmY3J0Y19zdGF0ZSwgTlVMTCk7CisJRkFJTChyZXQgPCAwLCAiVW5hYmxlIHRv
IHVuc2V0IG1vZGUgb24gY3J0Y1xuIik7CisJRkFJTF9PTihjcnRjX3N0YXRlLmVuYWJsZSk7CisJ
RkFJTF9PTihtZW1jbXAoJmNydGNfc3RhdGUubW9kZSwgJnplcm9lZF9tb2RlLCBzaXplb2YoemVy
b2VkX21vZGUpKSk7CisKKwljbGVhbnVwKCk7CisKKwlyZXR1cm4gMDsKK30KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9zZWxmdGVzdHMvdGVzdC1kcm1fbW9kZXNldF9jb21tb24uaCBiL2Ry
aXZlcnMvZ3B1L2RybS9zZWxmdGVzdHMvdGVzdC1kcm1fbW9kZXNldF9jb21tb24uaAppbmRleCAw
ZmNiOGJiYzZhMWIuLmExMjQ4YWJmODZmOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Nl
bGZ0ZXN0cy90ZXN0LWRybV9tb2Rlc2V0X2NvbW1vbi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9z
ZWxmdGVzdHMvdGVzdC1kcm1fbW9kZXNldF9jb21tb24uaApAQCAtMTMsNiArMTMsOCBAQAogCiAj
ZGVmaW5lIEZBSUxfT04oeCkgRkFJTCgoeCksICIlcyIsICJGQUlMX09OKCIgX19zdHJpbmdpZnko
eCkgIilcbiIpCiAKK2ludCBpZ3RfYXRvbWljX3NldF9tb2RlX2Zvcl9jcnRjKHZvaWQgKmlnbm9y
ZWQpOworaW50IGlndF9hdG9taWNfc2V0X3plcm9lZF9tb2RlX2Zvcl9jcnRjKHZvaWQgKmlnbm9y
ZWQpOwogaW50IGlndF9jaGVja19wbGFuZV9zdGF0ZSh2b2lkICppZ25vcmVkKTsKIGludCBpZ3Rf
Y2hlY2tfZHJtX2Zvcm1hdF9ibG9ja193aWR0aCh2b2lkICppZ25vcmVkKTsKIGludCBpZ3RfY2hl
Y2tfZHJtX2Zvcm1hdF9ibG9ja19oZWlnaHQodm9pZCAqaWdub3JlZCk7Ci0tIAoyLjIzLjAKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBt
YWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
