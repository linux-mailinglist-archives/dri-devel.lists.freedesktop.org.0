Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 43A4242995
	for <lists+dri-devel@lfdr.de>; Wed, 12 Jun 2019 16:42:47 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0367E891F2;
	Wed, 12 Jun 2019 14:42:45 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1FE43891F2
 for <dri-devel@lists.freedesktop.org>; Wed, 12 Jun 2019 14:42:43 +0000 (UTC)
Received: from pendragon.ideasonboard.com (81-175-216-236.bb.dnainternet.fi
 [81.175.216.236])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 26F3C9B1;
 Wed, 12 Jun 2019 16:42:41 +0200 (CEST)
Date: Wed, 12 Jun 2019 17:42:25 +0300
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Kieran Bingham <kieran.bingham+renesas@ideasonboard.com>
Subject: Re: [PATCH 1/3] media: vsp1: drm: Split vsp1_du_setup_lif()
Message-ID: <20190612144225.GN5035@pendragon.ideasonboard.com>
References: <20190517223143.26251-1-kieran.bingham+renesas@ideasonboard.com>
 <20190517223143.26251-2-kieran.bingham+renesas@ideasonboard.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190517223143.26251-2-kieran.bingham+renesas@ideasonboard.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1560350561;
 bh=bbqf2pr9mGOVwu7kluY+31Fdz3yMgdiaC91VAV226KM=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=kok14rW9MXNNU8ZhmzW9G6qfO3O40vP7Zw9OMke10mis5+Hazk61CIF5VoxtFmZDc
 jcR3DvynAVsF+DgjMLpbgDxJBSamqJ3lhhUBtwUQAnjHXQl0xRtlX3BYzumm9wMSbS
 IFkhHMDmk/hnZ5l2bGuc0fNAcw4OFRmY1QAGRiJg=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-renesas-soc@vger.kernel.org,
 Mauro Carvalho Chehab <mchehab@kernel.org>,
 open list <linux-kernel@vger.kernel.org>, dri-devel@lists.freedesktop.org,
 linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgS2llcmFuLAoKVGhhbmsgeW91IGZvciB0aGUgcGF0Y2guCgpPbiBGcmksIE1heSAxNywgMjAx
OSBhdCAxMTozMTo0MVBNICswMTAwLCBLaWVyYW4gQmluZ2hhbSB3cm90ZToKPiBCcmVhayB2c3Ax
X2R1X3NldHVwX2xpZigpIGludG8gY29tcG9uZW50cyBtb3JlIHN1aXRlZCB0byB0aGUgRFJNIEF0
b21pYwo+IEFQSS4gVGhlIGV4aXN0aW5nIHZzcDFfZHVfc2V0dXBfbGlmKCkgQVBJIGNhbGwgaXMg
bWFpbnRhaW5lZCBhcyBpdCBpcwo+IHN0aWxsIHVzZWQgZnJvbSB0aGUgRFUuCj4gCj4gU2lnbmVk
LW9mZi1ieTogS2llcmFuIEJpbmdoYW0gPGtpZXJhbi5iaW5naGFtK3JlbmVzYXNAaWRlYXNvbmJv
YXJkLmNvbT4KPiAtLS0KPiAgZHJpdmVycy9tZWRpYS9wbGF0Zm9ybS92c3AxL3ZzcDFfZHJtLmMg
fCAyMzMgKysrKysrKysrKysrKysrKysrLS0tLS0tLQo+ICBpbmNsdWRlL21lZGlhL3ZzcDEuaCAg
ICAgICAgICAgICAgICAgICB8ICAzMiArKystCj4gIDIgZmlsZXMgY2hhbmdlZCwgMTk5IGluc2Vy
dGlvbnMoKyksIDY2IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL21lZGlh
L3BsYXRmb3JtL3ZzcDEvdnNwMV9kcm0uYyBiL2RyaXZlcnMvbWVkaWEvcGxhdGZvcm0vdnNwMS92
c3AxX2RybS5jCj4gaW5kZXggYTRhNDVkNjhhNmVmLi5jZTVjMDc4MDY4MGYgMTAwNjQ0Cj4gLS0t
IGEvZHJpdmVycy9tZWRpYS9wbGF0Zm9ybS92c3AxL3ZzcDFfZHJtLmMKPiArKysgYi9kcml2ZXJz
L21lZGlhL3BsYXRmb3JtL3ZzcDEvdnNwMV9kcm0uYwo+IEBAIC02MTYsMTggKzYxNiwxNSBAQCBp
bnQgdnNwMV9kdV9pbml0KHN0cnVjdCBkZXZpY2UgKmRldikKPiAgRVhQT1JUX1NZTUJPTF9HUEwo
dnNwMV9kdV9pbml0KTsKPiAgCj4gIC8qKgo+IC0gKiB2c3AxX2R1X3NldHVwX2xpZiAtIFNldHVw
IHRoZSBvdXRwdXQgcGFydCBvZiB0aGUgVlNQIHBpcGVsaW5lCj4gKyAqIHZzcDFfZHVfYXRvbWlj
X21vZGVzZXQgLSBDb25maWd1cmUgdGhlIG1vZGUgYXMgcGFydCBvZiBhbiBhdG9taWMgdXBkYXRl
Cj4gICAqIEBkZXY6IHRoZSBWU1AgZGV2aWNlCj4gICAqIEBwaXBlX2luZGV4OiB0aGUgRFJNIHBp
cGVsaW5lIGluZGV4Cj4gLSAqIEBjZmc6IHRoZSBMSUYgY29uZmlndXJhdGlvbgo+ICsgKiBAY2Zn
OiB0aGUgbW9kZSBjb25maWd1cmF0aW9uCj4gICAqCj4gICAqIENvbmZpZ3VyZSB0aGUgb3V0cHV0
IHBhcnQgb2YgVlNQIERSTSBwaXBlbGluZSBmb3IgdGhlIGdpdmVuIGZyYW1lIEBjZmcud2lkdGgK
PiAgICogYW5kIEBjZmcuaGVpZ2h0LiBUaGlzIHNldHMgdXAgZm9ybWF0cyBvbiB0aGUgQlJ4IHNv
dXJjZSBwYWQsIHRoZSBXUEYgc2luayBhbmQKPiAgICogc291cmNlIHBhZHMsIGFuZCB0aGUgTElG
IHNpbmsgcGFkLgo+ICAgKgo+IC0gKiBUaGUgQHBpcGVfaW5kZXggYXJndW1lbnQgc2VsZWN0cyB3
aGljaCBEUk0gcGlwZWxpbmUgdG8gc2V0dXAuIFRoZSBudW1iZXIgb2YKPiAtICogYXZhaWxhYmxl
IHBpcGVsaW5lcyBkZXBlbmQgb24gdGhlIFZTUCBpbnN0YW5jZS4KPiAtICoKClNob3VsZG4ndCB0
aGlzIHBhcmFncmFwaCBiZSBwcmVzZXJ2ZWQsIGFzIHRoZSBmdW5jdGlvbiBrZWVwcyBpdHMKcGlw
ZV9pbmRleCBhcmd1bWVudCA/Cgo+ICAgKiBBcyB0aGUgbWVkaWEgYnVzIGNvZGUgb24gdGhlIGJs
ZW5kIHVuaXQgc291cmNlIHBhZCBpcyBjb25kaXRpb25lZCBieSB0aGUKPiAgICogY29uZmlndXJh
dGlvbiBvZiBpdHMgc2luayAwIHBhZCwgd2UgYWxzbyBzZXQgdXAgdGhlIGZvcm1hdHMgb24gYWxs
IGJsZW5kIHVuaXQKPiAgICogc2lua3MsIGV2ZW4gaWYgdGhlIGNvbmZpZ3VyYXRpb24gd2lsbCBi
ZSBvdmVyd3JpdHRlbiBsYXRlciBieQo+IEBAIC02MzUsMTUgKzYzMiwxNCBAQCBFWFBPUlRfU1lN
Qk9MX0dQTCh2c3AxX2R1X2luaXQpOwo+ICAgKiBhIHdlbGwgZGVmaW5lZCBzdGF0ZS4KPiAgICoK
PiAgICogUmV0dXJuIDAgb24gc3VjY2VzcyBvciBhIG5lZ2F0aXZlIGVycm9yIGNvZGUgb24gZmFp
bHVyZS4KPiArICoKCk5vdCBuZWVkZWQuCgo+ICAgKi8KPiAtaW50IHZzcDFfZHVfc2V0dXBfbGlm
KHN0cnVjdCBkZXZpY2UgKmRldiwgdW5zaWduZWQgaW50IHBpcGVfaW5kZXgsCj4gLQkJICAgICAg
Y29uc3Qgc3RydWN0IHZzcDFfZHVfbGlmX2NvbmZpZyAqY2ZnKQo+ICtpbnQgdnNwMV9kdV9hdG9t
aWNfbW9kZXNldChzdHJ1Y3QgZGV2aWNlICpkZXYsIHVuc2lnbmVkIGludCBwaXBlX2luZGV4LAo+
ICsJCQkgICBjb25zdCBzdHJ1Y3QgdnNwMV9kdV9tb2Rlc2V0X2NvbmZpZyAqY2ZnKQo+ICB7Cj4g
IAlzdHJ1Y3QgdnNwMV9kZXZpY2UgKnZzcDEgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiAgCXN0
cnVjdCB2c3AxX2RybV9waXBlbGluZSAqZHJtX3BpcGU7Cj4gIAlzdHJ1Y3QgdnNwMV9waXBlbGlu
ZSAqcGlwZTsKPiAtCXVuc2lnbmVkIGxvbmcgZmxhZ3M7Cj4gLQl1bnNpZ25lZCBpbnQgaTsKPiAg
CWludCByZXQ7Cj4gIAo+ICAJaWYgKHBpcGVfaW5kZXggPj0gdnNwMS0+aW5mby0+bGlmX2NvdW50
KQo+IEBAIC02NTIsNjAgKzY0OCw2IEBAIGludCB2c3AxX2R1X3NldHVwX2xpZihzdHJ1Y3QgZGV2
aWNlICpkZXYsIHVuc2lnbmVkIGludCBwaXBlX2luZGV4LAo+ICAJZHJtX3BpcGUgPSAmdnNwMS0+
ZHJtLT5waXBlW3BpcGVfaW5kZXhdOwo+ICAJcGlwZSA9ICZkcm1fcGlwZS0+cGlwZTsKPiAgCj4g
LQlpZiAoIWNmZykgewo+IC0JCXN0cnVjdCB2c3AxX2JyeCAqYnJ4Owo+IC0KPiAtCQltdXRleF9s
b2NrKCZ2c3AxLT5kcm0tPmxvY2spOwo+IC0KPiAtCQlicnggPSB0b19icngoJnBpcGUtPmJyeC0+
c3ViZGV2KTsKPiAtCj4gLQkJLyoKPiAtCQkgKiBOVUxMIGNvbmZpZ3VyYXRpb24gbWVhbnMgdGhl
IENSVEMgaXMgYmVpbmcgZGlzYWJsZWQsIHN0b3AKPiAtCQkgKiB0aGUgcGlwZWxpbmUgYW5kIHR1
cm4gdGhlIGxpZ2h0IG9mZi4KPiAtCQkgKi8KPiAtCQlyZXQgPSB2c3AxX3BpcGVsaW5lX3N0b3Ao
cGlwZSk7Cj4gLQkJaWYgKHJldCA9PSAtRVRJTUVET1VUKQo+IC0JCQlkZXZfZXJyKHZzcDEtPmRl
diwgIkRSTSBwaXBlbGluZSBzdG9wIHRpbWVvdXRcbiIpOwo+IC0KPiAtCQlmb3IgKGkgPSAwOyBp
IDwgQVJSQVlfU0laRShwaXBlLT5pbnB1dHMpOyArK2kpIHsKPiAtCQkJc3RydWN0IHZzcDFfcndw
ZiAqcnBmID0gcGlwZS0+aW5wdXRzW2ldOwo+IC0KPiAtCQkJaWYgKCFycGYpCj4gLQkJCQljb250
aW51ZTsKPiAtCj4gLQkJCS8qCj4gLQkJCSAqIFJlbW92ZSB0aGUgUlBGIGZyb20gdGhlIHBpcGUg
YW5kIHRoZSBsaXN0IG9mIEJSeAo+IC0JCQkgKiBpbnB1dHMuCj4gLQkJCSAqLwo+IC0JCQlXQVJO
X09OKCFycGYtPmVudGl0eS5waXBlKTsKPiAtCQkJcnBmLT5lbnRpdHkucGlwZSA9IE5VTEw7Cj4g
LQkJCWxpc3RfZGVsKCZycGYtPmVudGl0eS5saXN0X3BpcGUpOwo+IC0JCQlwaXBlLT5pbnB1dHNb
aV0gPSBOVUxMOwo+IC0KPiAtCQkJYnJ4LT5pbnB1dHNbcnBmLT5icnhfaW5wdXRdLnJwZiA9IE5V
TEw7Cj4gLQkJfQo+IC0KPiAtCQlkcm1fcGlwZS0+ZHVfY29tcGxldGUgPSBOVUxMOwo+IC0JCXBp
cGUtPm51bV9pbnB1dHMgPSAwOwo+IC0KPiAtCQlkZXZfZGJnKHZzcDEtPmRldiwgIiVzOiBwaXBl
ICV1OiByZWxlYXNpbmcgJXNcbiIsCj4gLQkJCV9fZnVuY19fLCBwaXBlLT5saWYtPmluZGV4LAo+
IC0JCQlCUlhfTkFNRShwaXBlLT5icngpKTsKPiAtCj4gLQkJbGlzdF9kZWwoJnBpcGUtPmJyeC0+
bGlzdF9waXBlKTsKPiAtCQlwaXBlLT5icngtPnBpcGUgPSBOVUxMOwo+IC0JCXBpcGUtPmJyeCA9
IE5VTEw7Cj4gLQo+IC0JCW11dGV4X3VubG9jaygmdnNwMS0+ZHJtLT5sb2NrKTsKPiAtCj4gLQkJ
dnNwMV9kbG1fcmVzZXQocGlwZS0+b3V0cHV0LT5kbG0pOwo+IC0JCXZzcDFfZGV2aWNlX3B1dCh2
c3AxKTsKPiAtCj4gLQkJZGV2X2RiZyh2c3AxLT5kZXYsICIlczogcGlwZWxpbmUgZGlzYWJsZWRc
biIsIF9fZnVuY19fKTsKPiAtCj4gLQkJcmV0dXJuIDA7Cj4gLQl9Cj4gLQo+ICAJZHJtX3BpcGUt
PndpZHRoID0gY2ZnLT53aWR0aDsKPiAgCWRybV9waXBlLT5oZWlnaHQgPSBjZmctPmhlaWdodDsK
PiAgCXBpcGUtPmludGVybGFjZWQgPSBjZmctPmludGVybGFjZWQ7Cj4gQEAgLTcyMiw4ICs2NjQs
NDMgQEAgaW50IHZzcDFfZHVfc2V0dXBfbGlmKHN0cnVjdCBkZXZpY2UgKmRldiwgdW5zaWduZWQg
aW50IHBpcGVfaW5kZXgsCj4gIAkJZ290byB1bmxvY2s7Cj4gIAo+ICAJcmV0ID0gdnNwMV9kdV9w
aXBlbGluZV9zZXR1cF9vdXRwdXQodnNwMSwgcGlwZSk7Cj4gLQlpZiAocmV0IDwgMCkKPiAtCQln
b3RvIHVubG9jazsKPiArCj4gK3VubG9jazoKPiArCW11dGV4X3VubG9jaygmdnNwMS0+ZHJtLT5s
b2NrKTsKPiArCj4gKwlyZXR1cm4gcmV0Owo+ICt9Cj4gKwo+ICsvKioKPiArICogdnNwMV9kdV9h
dG9taWNfZW5hYmxlIC0gRW5hYmxlIGFuZCBzdGFydCBhIERVIHBpcGVsaW5lCj4gKyAqIEBkZXY6
IHRoZSBWU1AgZGV2aWNlCj4gKyAqIEBwaXBlX2luZGV4OiB0aGUgRFJNIHBpcGVsaW5lIGluZGV4
Cj4gKyAqIEBjZmc6IHRoZSBlbmFibGVtZW50IGNvbmZpZ3VyYXRpb24KCk5vdCBhIGJpZyBmYW4g
b2YgdGhpcyBkZXNjcmlwdGlvbiBvciBvZiB0aGUgdnNwMV9kdV9lbmFibGVfY29uZmlnIG5hbWUs
CmJ1dCBJIGNhbid0IHJlYWxseSB0aGluayBvZiBhIGJldHRlciBhbHRlcm5hdGl2ZS4gdnNwMV9k
dV9jYWxsYmFjayB3b3VsZApiZSBhbiBvcHRpb24sIGJ1dCBpdCB3b3VsZCBwcmV2ZW50IHVzIGZy
b20gYWRkaW5nIG5ldyBmaWVsZHMgbm90IHJlbGF0ZWQKdG8gdGhlIGNhbGxiYWNrLgoKPiArICoK
PiArICogVGhlIEBwaXBlX2luZGV4IGFyZ3VtZW50IHNlbGVjdHMgd2hpY2ggRFJNIHBpcGVsaW5l
IHRvIGVuYWJsZS4gVGhlIG51bWJlciBvZgo+ICsgKiBhdmFpbGFibGUgcGlwZWxpbmVzIGRlcGVu
ZCBvbiB0aGUgVlNQIGluc3RhbmNlLgo+ICsgKgo+ICsgKiBUaGUgY29uZmlndXJhdGlvbiBwYXNz
ZXMgYSBjYWxsYmFjayBmdW5jdGlvbiB0byByZWdpc3RlciBub3RpZmljYXRpb24gb2YKPiArICog
ZnJhbWUgY29tcGxldGlvbiBldmVudHMuCj4gKyAqCj4gKyAqIFJldHVybiAwIG9uIHN1Y2Nlc3Mg
b3IgYSBuZWdhdGl2ZSBlcnJvciBjb2RlIG9uIGZhaWx1cmUuCj4gKyAqLwo+ICtpbnQgdnNwMV9k
dV9hdG9taWNfZW5hYmxlKHN0cnVjdCBkZXZpY2UgKmRldiwgdW5zaWduZWQgaW50IHBpcGVfaW5k
ZXgsCj4gKwkJCSAgY29uc3Qgc3RydWN0IHZzcDFfZHVfZW5hYmxlX2NvbmZpZyAqY2ZnKQo+ICt7
Cj4gKwlzdHJ1Y3QgdnNwMV9kZXZpY2UgKnZzcDEgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiAr
CXN0cnVjdCB2c3AxX2RybV9waXBlbGluZSAqZHJtX3BpcGU7Cj4gKwlzdHJ1Y3QgdnNwMV9waXBl
bGluZSAqcGlwZTsKPiArCXVuc2lnbmVkIGxvbmcgZmxhZ3M7Cj4gKwlpbnQgcmV0Owo+ICsKPiAr
CWlmIChwaXBlX2luZGV4ID49IHZzcDEtPmluZm8tPmxpZl9jb3VudCkKPiArCQlyZXR1cm4gLUVJ
TlZBTDsKPiArCj4gKwlkcm1fcGlwZSA9ICZ2c3AxLT5kcm0tPnBpcGVbcGlwZV9pbmRleF07Cj4g
KwlwaXBlID0gJmRybV9waXBlLT5waXBlOwo+ICsKPiArCW11dGV4X2xvY2soJnZzcDEtPmRybS0+
bG9jayk7Cj4gIAo+ICAJLyogRW5hYmxlIHRoZSBWU1AxLiAqLwo+ICAJcmV0ID0gdnNwMV9kZXZp
Y2VfZ2V0KHZzcDEpOwo+IEBAIC03NTgsNiArNzM1LDEzMiBAQCBpbnQgdnNwMV9kdV9zZXR1cF9s
aWYoc3RydWN0IGRldmljZSAqZGV2LCB1bnNpZ25lZCBpbnQgcGlwZV9pbmRleCwKPiAgCWRldl9k
YmcodnNwMS0+ZGV2LCAiJXM6IHBpcGVsaW5lIGVuYWJsZWRcbiIsIF9fZnVuY19fKTsKPiAgCj4g
IAlyZXR1cm4gMDsKPiArCj4gK30KPiArRVhQT1JUX1NZTUJPTF9HUEwodnNwMV9kdV9hdG9taWNf
ZW5hYmxlKTsKPiArCj4gKwoKRXh0cmEgYmxhbmsgbGluZS4KCj4gKy8qKgo+ICsgKiB2c3AxX2R1
X2F0b21pY19kaXNhYmxlIC0gRGlzYWJsZSBhbmQgc3RvcCBhIERVIHBpcGVsaW5lCj4gKyAqIEBk
ZXY6IHRoZSBWU1AgZGV2aWNlCj4gKyAqIEBwaXBlX2luZGV4OiB0aGUgRFJNIHBpcGVsaW5lIGlu
ZGV4Cj4gKyAqCj4gKyAqIFRoZSBAcGlwZV9pbmRleCBhcmd1bWVudCBzZWxlY3RzIHdoaWNoIERS
TSBwaXBlbGluZSB0byBkaXNhYmxlLiBUaGUgbnVtYmVyCj4gKyAqIG9mIGF2YWlsYWJsZSBwaXBl
bGluZXMgZGVwZW5kIG9uIHRoZSBWU1AgaW5zdGFuY2UuCj4gKyAqCj4gKyAqIFJldHVybiAwIG9u
IHN1Y2Nlc3Mgb3IgYSBuZWdhdGl2ZSBlcnJvciBjb2RlIG9uIGZhaWx1cmUuCj4gKyAqLwo+ICtp
bnQgdnNwMV9kdV9hdG9taWNfZGlzYWJsZShzdHJ1Y3QgZGV2aWNlICpkZXYsIHVuc2lnbmVkIGlu
dCBwaXBlX2luZGV4KQo+ICt7Cj4gKwlzdHJ1Y3QgdnNwMV9kZXZpY2UgKnZzcDEgPSBkZXZfZ2V0
X2RydmRhdGEoZGV2KTsKPiArCXN0cnVjdCB2c3AxX2RybV9waXBlbGluZSAqZHJtX3BpcGU7Cj4g
KwlzdHJ1Y3QgdnNwMV9waXBlbGluZSAqcGlwZTsKPiArCXN0cnVjdCB2c3AxX2JyeCAqYnJ4Owo+
ICsJdW5zaWduZWQgaW50IGk7Cj4gKwlpbnQgcmV0Owo+ICsKPiArCWlmIChwaXBlX2luZGV4ID49
IHZzcDEtPmluZm8tPmxpZl9jb3VudCkKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlkcm1f
cGlwZSA9ICZ2c3AxLT5kcm0tPnBpcGVbcGlwZV9pbmRleF07Cj4gKwlwaXBlID0gJmRybV9waXBl
LT5waXBlOwo+ICsKPiArCW11dGV4X2xvY2soJnZzcDEtPmRybS0+bG9jayk7Cj4gKwo+ICsJYnJ4
ID0gdG9fYnJ4KCZwaXBlLT5icngtPnN1YmRldik7Cj4gKwo+ICsJLyoKPiArCSAqIE5VTEwgY29u
ZmlndXJhdGlvbiBtZWFucyB0aGUgQ1JUQyBpcyBiZWluZyBkaXNhYmxlZCwgc3RvcAo+ICsJICog
dGhlIHBpcGVsaW5lIGFuZCB0dXJuIHRoZSBsaWdodCBvZmYuCj4gKwkgKi8KCkkgdGhpbmsgeW91
IGNhbiBub3cgZHJvcCB0aGlzIGNvbW1lbnQsIG9yIGF0IGxlYXN0IHRoZSBmaXJzdCBwYXJ0IG9m
IHRoZQpzZW50ZW5jZS4KCj4gKwlyZXQgPSB2c3AxX3BpcGVsaW5lX3N0b3AocGlwZSk7Cj4gKwlp
ZiAocmV0ID09IC1FVElNRURPVVQpCj4gKwkJZGV2X2Vycih2c3AxLT5kZXYsICJEUk0gcGlwZWxp
bmUgc3RvcCB0aW1lb3V0XG4iKTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShw
aXBlLT5pbnB1dHMpOyArK2kpIHsKPiArCQlzdHJ1Y3QgdnNwMV9yd3BmICpycGYgPSBwaXBlLT5p
bnB1dHNbaV07Cj4gKwo+ICsJCWlmICghcnBmKQo+ICsJCQljb250aW51ZTsKPiArCj4gKwkJLyoK
PiArCQkgKiBSZW1vdmUgdGhlIFJQRiBmcm9tIHRoZSBwaXBlIGFuZCB0aGUgbGlzdCBvZiBCUngK
PiArCQkgKiBpbnB1dHMuCj4gKwkJICovCgpUaGlzIG5vdyBob2xkcyBvbiBhIHNpbmdsZSBsaW5l
LgoKPiArCQlXQVJOX09OKCFycGYtPmVudGl0eS5waXBlKTsKPiArCQlycGYtPmVudGl0eS5waXBl
ID0gTlVMTDsKPiArCQlsaXN0X2RlbCgmcnBmLT5lbnRpdHkubGlzdF9waXBlKTsKPiArCQlwaXBl
LT5pbnB1dHNbaV0gPSBOVUxMOwo+ICsKPiArCQlicngtPmlucHV0c1tycGYtPmJyeF9pbnB1dF0u
cnBmID0gTlVMTDsKPiArCX0KPiArCj4gKwlkcm1fcGlwZS0+ZHVfY29tcGxldGUgPSBOVUxMOwo+
ICsJcGlwZS0+bnVtX2lucHV0cyA9IDA7Cj4gKwo+ICsJZGV2X2RiZyh2c3AxLT5kZXYsICIlczog
cGlwZSAldTogcmVsZWFzaW5nICVzXG4iLAo+ICsJCV9fZnVuY19fLCBwaXBlLT5saWYtPmluZGV4
LAo+ICsJCUJSWF9OQU1FKHBpcGUtPmJyeCkpOwoKQW5kIHRoaXMgY2FuIGhvbGQgb24gdHdvIGxp
bmVzLgoKPiArCj4gKwlsaXN0X2RlbCgmcGlwZS0+YnJ4LT5saXN0X3BpcGUpOwo+ICsJcGlwZS0+
YnJ4LT5waXBlID0gTlVMTDsKPiArCXBpcGUtPmJyeCA9IE5VTEw7Cj4gKwo+ICsJbXV0ZXhfdW5s
b2NrKCZ2c3AxLT5kcm0tPmxvY2spOwo+ICsKPiArCXZzcDFfZGxtX3Jlc2V0KHBpcGUtPm91dHB1
dC0+ZGxtKTsKPiArCXZzcDFfZGV2aWNlX3B1dCh2c3AxKTsKPiArCj4gKwlkZXZfZGJnKHZzcDEt
PmRldiwgIiVzOiBwaXBlbGluZSBkaXNhYmxlZFxuIiwgX19mdW5jX18pOwo+ICsKPiArCXJldHVy
biAwOwo+ICt9Cj4gK0VYUE9SVF9TWU1CT0xfR1BMKHZzcDFfZHVfYXRvbWljX2Rpc2FibGUpOwo+
ICsKPiArLyoqCj4gKyAqIHZzcDFfZHVfc2V0dXBfbGlmIC0gU2V0dXAgdGhlIG91dHB1dCBwYXJ0
IG9mIHRoZSBWU1AgcGlwZWxpbmUKPiArICogQGRldjogdGhlIFZTUCBkZXZpY2UKPiArICogQHBp
cGVfaW5kZXg6IHRoZSBEUk0gcGlwZWxpbmUgaW5kZXgKPiArICogQGNmZzogdGhlIExJRiBjb25m
aWd1cmF0aW9uCj4gKyAqCj4gKyAqIENvbmZpZ3VyZSB0aGUgb3V0cHV0IHBhcnQgb2YgVlNQIERS
TSBwaXBlbGluZSBmb3IgdGhlIGdpdmVuIGZyYW1lIEBjZmcud2lkdGgKPiArICogYW5kIEBjZmcu
aGVpZ2h0LiBUaGlzIHNldHMgdXAgZm9ybWF0cyBvbiB0aGUgQlJ4IHNvdXJjZSBwYWQsIHRoZSBX
UEYgc2luayBhbmQKPiArICogc291cmNlIHBhZHMsIGFuZCB0aGUgTElGIHNpbmsgcGFkLgo+ICsg
Kgo+ICsgKiBUaGUgQHBpcGVfaW5kZXggYXJndW1lbnQgc2VsZWN0cyB3aGljaCBEUk0gcGlwZWxp
bmUgdG8gc2V0dXAuIFRoZSBudW1iZXIgb2YKPiArICogYXZhaWxhYmxlIHBpcGVsaW5lcyBkZXBl
bmQgb24gdGhlIFZTUCBpbnN0YW5jZS4KPiArICoKPiArICogQXMgdGhlIG1lZGlhIGJ1cyBjb2Rl
IG9uIHRoZSBibGVuZCB1bml0IHNvdXJjZSBwYWQgaXMgY29uZGl0aW9uZWQgYnkgdGhlCj4gKyAq
IGNvbmZpZ3VyYXRpb24gb2YgaXRzIHNpbmsgMCBwYWQsIHdlIGFsc28gc2V0IHVwIHRoZSBmb3Jt
YXRzIG9uIGFsbCBibGVuZCB1bml0Cj4gKyAqIHNpbmtzLCBldmVuIGlmIHRoZSBjb25maWd1cmF0
aW9uIHdpbGwgYmUgb3ZlcndyaXR0ZW4gbGF0ZXIgYnkKPiArICogdnNwMV9kdV9zZXR1cF9ycGYo
KS4gVGhpcyBlbnN1cmVzIHRoYXQgdGhlIGJsZW5kIHVuaXQgY29uZmlndXJhdGlvbiBpcyBzZXQg
dG8KPiArICogYSB3ZWxsIGRlZmluZWQgc3RhdGUuCj4gKyAqCj4gKyAqIFJldHVybiAwIG9uIHN1
Y2Nlc3Mgb3IgYSBuZWdhdGl2ZSBlcnJvciBjb2RlIG9uIGZhaWx1cmUuCj4gKyAqLwo+ICtpbnQg
dnNwMV9kdV9zZXR1cF9saWYoc3RydWN0IGRldmljZSAqZGV2LCB1bnNpZ25lZCBpbnQgcGlwZV9p
bmRleCwKPiArCQkgICAgICBjb25zdCBzdHJ1Y3QgdnNwMV9kdV9saWZfY29uZmlnICpjZmcpCj4g
K3sKPiArCWludCByZXQ7Cj4gKwo+ICsJc3RydWN0IHZzcDFfZHVfbW9kZXNldF9jb25maWcgbW9k
ZXMgPSB7Cj4gKwkJLndpZHRoID0gY2ZnLT53aWR0aCwKPiArCQkuaGVpZ2h0ID0gY2ZnLT5oZWln
aHQsCj4gKwkJLmludGVybGFjZWQgPSBjZmctPmludGVybGFjZWQsCj4gKwl9Owo+ICsJc3RydWN0
IHZzcDFfZHVfZW5hYmxlX2NvbmZpZyBlbmFibGUgPSB7Cj4gKwkJLmNhbGxiYWNrID0gY2ZnLT5j
YWxsYmFjaywKPiArCQkuY2FsbGJhY2tfZGF0YSA9IGNmZy0+Y2FsbGJhY2tfZGF0YSwKPiArCX07
Cj4gKwo+ICsJaWYgKCFjZmcpCj4gKwkJcmV0dXJuIHZzcDFfZHVfYXRvbWljX2Rpc2FibGUoZGV2
LCBwaXBlX2luZGV4KTsKPiArCj4gKwlyZXQgPSB2c3AxX2R1X2F0b21pY19tb2Rlc2V0KGRldiwg
cGlwZV9pbmRleCwgJm1vZGVzKTsKPiArCWlmIChyZXQpCj4gKwkJcmV0dXJuIHJldDsKPiArCj4g
KwlyZXR1cm4gdnNwMV9kdV9hdG9taWNfZW5hYmxlKGRldiwgcGlwZV9pbmRleCwgJmVuYWJsZSk7
Cj4gIH0KPiAgRVhQT1JUX1NZTUJPTF9HUEwodnNwMV9kdV9zZXR1cF9saWYpOwo+ICAKPiBkaWZm
IC0tZ2l0IGEvaW5jbHVkZS9tZWRpYS92c3AxLmggYi9pbmNsdWRlL21lZGlhL3ZzcDEuaAo+IGlu
ZGV4IGNjMWIwZDQyY2U5NS4uMTNmNWExYzRkNDVhIDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvbWVk
aWEvdnNwMS5oCj4gKysrIGIvaW5jbHVkZS9tZWRpYS92c3AxLmgKPiBAQCAtMjEsNyArMjEsNyBA
QCBpbnQgdnNwMV9kdV9pbml0KHN0cnVjdCBkZXZpY2UgKmRldik7Cj4gICNkZWZpbmUgVlNQMV9E
VV9TVEFUVVNfV1JJVEVCQUNLCUJJVCgxKQo+ICAKPiAgLyoqCj4gLSAqIHN0cnVjdCB2c3AxX2R1
X2xpZl9jb25maWcgLSBWU1AgTElGIGNvbmZpZ3VyYXRpb24KPiArICogc3RydWN0IHZzcDFfZHVf
bGlmX2NvbmZpZyAtIFZTUCBMSUYgY29uZmlndXJhdGlvbiAtIERlcHJlY2F0ZWQKPiAgICogQHdp
ZHRoOiBvdXRwdXQgZnJhbWUgd2lkdGgKPiAgICogQGhlaWdodDogb3V0cHV0IGZyYW1lIGhlaWdo
dAo+ICAgKiBAaW50ZXJsYWNlZDogdHJ1ZSBmb3IgaW50ZXJsYWNlZCBwaXBlbGluZXMKPiBAQCAt
NDIsNiArNDIsMzAgQEAgc3RydWN0IHZzcDFfZHVfbGlmX2NvbmZpZyB7Cj4gIGludCB2c3AxX2R1
X3NldHVwX2xpZihzdHJ1Y3QgZGV2aWNlICpkZXYsIHVuc2lnbmVkIGludCBwaXBlX2luZGV4LAo+
ICAJCSAgICAgIGNvbnN0IHN0cnVjdCB2c3AxX2R1X2xpZl9jb25maWcgKmNmZyk7Cj4gIAo+ICsv
KioKPiArICogc3RydWN0IHZzcDFfZHVfbW9kZXNldF9jb25maWcgLSBWU1AgTElGIE1vZGUgY29u
ZmlndXJhdGlvbgoKTWF5YmUgIlZTUCBkaXNwbGF5IG1vZGUgY29uZmlndXJhdGlvbiIgYXMgaXQn
cyBub3QgcmVzdHJpY3RlZCB0byB0aGUgTElGCj8KCj4gKyAqIEB3aWR0aDogb3V0cHV0IGZyYW1l
IHdpZHRoCj4gKyAqIEBoZWlnaHQ6IG91dHB1dCBmcmFtZSBoZWlnaHQKPiArICogQGludGVybGFj
ZWQ6IHRydWUgZm9yIGludGVybGFjZWQgcGlwZWxpbmVzCj4gKyAqLwo+ICtzdHJ1Y3QgdnNwMV9k
dV9tb2Rlc2V0X2NvbmZpZyB7Cj4gKwl1bnNpZ25lZCBpbnQgd2lkdGg7Cj4gKwl1bnNpZ25lZCBp
bnQgaGVpZ2h0Owo+ICsJYm9vbCBpbnRlcmxhY2VkOwo+ICt9Owo+ICsKPiArLyoqCj4gKyAqIHN0
cnVjdCB2c3AxX2R1X2VuYWJsZV9jb25maWcgLSBWU1AgZW5hYmxlIGNvbmZpZ3VyYXRpb24KPiAr
ICogQGNhbGxiYWNrOiBmcmFtZSBjb21wbGV0aW9uIGNhbGxiYWNrIGZ1bmN0aW9uIChvcHRpb25h
bCkuIFdoZW4gYSBjYWxsYmFjawo+ICsgKgkgICAgICBpcyBwcm92aWRlZCwgdGhlIFZTUCBkcml2
ZXIgZ3VhcmFudGVlcyB0aGF0IGl0IHdpbGwgYmUgY2FsbGVkIG9uY2UKPiArICoJICAgICAgYW5k
IG9ubHkgb25jZSBmb3IgZWFjaCB2c3AxX2R1X2F0b21pY19mbHVzaCgpIGNhbGwuCj4gKyAqIEBj
YWxsYmFja19kYXRhOiBkYXRhIHRvIGJlIHBhc3NlZCB0byB0aGUgZnJhbWUgY29tcGxldGlvbiBj
YWxsYmFjawo+ICsgKi8KPiArc3RydWN0IHZzcDFfZHVfZW5hYmxlX2NvbmZpZyB7Cj4gKwl2b2lk
ICgqY2FsbGJhY2spKHZvaWQgKmRhdGEsIHVuc2lnbmVkIGludCBzdGF0dXMsIHUzMiBjcmMpOwo+
ICsJdm9pZCAqY2FsbGJhY2tfZGF0YTsKPiArfTsKPiArCj4gIC8qKgo+ICAgKiBzdHJ1Y3QgdnNw
MV9kdV9hdG9taWNfY29uZmlnIC0gVlNQIGF0b21pYyBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMK
PiAgICogQHBpeGVsZm9ybWF0OiBwbGFuZSBwaXhlbCBmb3JtYXQgKFY0TDIgNENDKQo+IEBAIC0x
MDYsNiArMTMwLDEyIEBAIHN0cnVjdCB2c3AxX2R1X2F0b21pY19waXBlX2NvbmZpZyB7Cj4gIAlz
dHJ1Y3QgdnNwMV9kdV93cml0ZWJhY2tfY29uZmlnIHdyaXRlYmFjazsKPiAgfTsKPiAgCj4gKwo+
ICtpbnQgdnNwMV9kdV9hdG9taWNfbW9kZXNldChzdHJ1Y3QgZGV2aWNlICpkZXYsIHVuc2lnbmVk
IGludCBwaXBlX2luZGV4LAo+ICsJCSAgICBjb25zdCBzdHJ1Y3QgdnNwMV9kdV9tb2Rlc2V0X2Nv
bmZpZyAqY2ZnKTsKPiAraW50IHZzcDFfZHVfYXRvbWljX2VuYWJsZShzdHJ1Y3QgZGV2aWNlICpk
ZXYsIHVuc2lnbmVkIGludCBwaXBlX2luZGV4LAo+ICsJCSAgIGNvbnN0IHN0cnVjdCB2c3AxX2R1
X2VuYWJsZV9jb25maWcgKmNmZyk7Cj4gK2ludCB2c3AxX2R1X2F0b21pY19kaXNhYmxlKHN0cnVj
dCBkZXZpY2UgKmRldiwgdW5zaWduZWQgaW50IHBpcGVfaW5kZXgpOwo+ICB2b2lkIHZzcDFfZHVf
YXRvbWljX2JlZ2luKHN0cnVjdCBkZXZpY2UgKmRldiwgdW5zaWduZWQgaW50IHBpcGVfaW5kZXgp
Owo+ICBpbnQgdnNwMV9kdV9hdG9taWNfdXBkYXRlKHN0cnVjdCBkZXZpY2UgKmRldiwgdW5zaWdu
ZWQgaW50IHBpcGVfaW5kZXgsCj4gIAkJCSAgdW5zaWduZWQgaW50IHJwZiwKCi0tIApSZWdhcmRz
LAoKTGF1cmVudCBQaW5jaGFydApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9k
cmktZGV2ZWw=
