Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EC5FD96D17
	for <lists+dri-devel@lfdr.de>; Wed, 21 Aug 2019 01:21:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 573306E8D7;
	Tue, 20 Aug 2019 23:21:10 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x54a.google.com (mail-pg1-x54a.google.com
 [IPv6:2607:f8b0:4864:20::54a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 894616E8D4
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 23:21:02 +0000 (UTC)
Received: by mail-pg1-x54a.google.com with SMTP id b18so188345pgg.8
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 16:21:02 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=sVeA8L/KUpTjbrbvHFL5SD4r2cDNgOFAgb1d2fdBnck=;
 b=Xt8O06NgtjedzevwA3+vHdlGoxJ5FirEtkQTEh/73UqVCfdnN6AyajfUG2yrC+Rcwn
 CmjO9cB3MpWVZx27yY7foobU+9XEEt7FFtv+R6XJ8Rum+cduX/sJicKDMHta8g2DUVfA
 1VVZ5eJZsFgZVll54QZblVYQnMF8n8ncWqHebSwg52PeMTEmNjmJVHKqsUZjjF91o56r
 YvRlWTLICSjndi7VCPu7e/d7X1SAGWFtPjB7W/qYAefTdseLYrNUp28z2Izu+2mkORgb
 hGjEmV7u7PAlCo+yowf6TenrXNh8L9Qo7RAoGRTiHElxr1IwMrvuASscAl9irMRURfYX
 XfjQ==
X-Gm-Message-State: APjAAAXGDhTeYQzhmqentlup1S2NLtQ+/Zyh3HU5bcOIADm0+kUiDDtK
 4B9RcQTdIHG/6glHvzmn5kPJ0EymyHbp+ANNahibMQ==
X-Google-Smtp-Source: APXvYqxK1baU5Eu/3knCCz57PQGzajmPiWL2dCS3GwX23bB/U8wqRFpE15GO8X83KOnYTyeRsITiJQS0OCfFOXRWNr437Q==
X-Received: by 2002:a63:de4f:: with SMTP id y15mr27668745pgi.239.1566343261172; 
 Tue, 20 Aug 2019 16:21:01 -0700 (PDT)
Date: Tue, 20 Aug 2019 16:20:31 -0700
In-Reply-To: <20190820232046.50175-1-brendanhiggins@google.com>
Message-Id: <20190820232046.50175-4-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190820232046.50175-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.23.0.rc1.153.gdeed80330f-goog
Subject: [PATCH v14 03/18] kunit: test: add string_stream a std::stream like
 string builder
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=sVeA8L/KUpTjbrbvHFL5SD4r2cDNgOFAgb1d2fdBnck=;
 b=gh5iJBewaUVttUf92Qw3efpHVid6M9nSx2WRFAAxTHkWQqsZVNexpJeKo9OZr2JNSb
 eesle+q9mwc9z/BpJpK3qPJbdbZswJENpW/9IrKfNVuLNCMh+QV5NZFSbNrmeXH1+Kzr
 UB/TGIW4FRM1n7Zy52gPhnlYgmM0FPH/p52nISt6Z5ZzEC5lNXgEbtuNUagmNQqLu1EN
 2jOWw+Po497DrhwzHoZtTccCmXs4qPveSRi4iuBwBIfl4V8ZaWQsta9Lsf/+Nv89p5Iy
 F88Rh7cAziU83uhZEgCaYsVm2HPlodk+CaZ/loxjfOUzKVhS5wqgdyzn/DbfZLHAinJM
 Evag==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, Stephen Boyd <swboyd@chromium.org>, julia.lawall@lip6.fr,
 kunit-dev@googlegroups.com, richard@nod.at, rdunlap@infradead.org,
 linux-kernel@vger.kernel.org, mpe@ellerman.id.au,
 linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QSBudW1iZXIgb2YgdGVzdCBmZWF0dXJlcyBuZWVkIHRvIGRvIHByZXR0eSBjb21wbGljYXRlZCBz
dHJpbmcgcHJpbnRpbmcKd2hlcmUgaXQgbWF5IG5vdCBiZSBwb3NzaWJsZSB0byByZWx5IG9uIGEg
c2luZ2xlIHByZWFsbG9jYXRlZCBzdHJpbmcKd2l0aCBwYXJhbWV0ZXJzLgoKU28gcHJvdmlkZSBh
IGxpYnJhcnkgZm9yIGNvbnN0cnVjdGluZyB0aGUgc3RyaW5nIGFzIHlvdSBnbyBzaW1pbGFyIHRv
CkMrKydzIHN0ZDo6c3RyaW5nLiBzdHJpbmdfc3RyZWFtIGlzIHJlYWxseSBqdXN0IGEgc3RyaW5n
IGJ1aWxkZXIsCm5vdGhpbmcgbW9yZS4KClNpZ25lZC1vZmYtYnk6IEJyZW5kYW4gSGlnZ2lucyA8
YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbT4KUmV2aWV3ZWQtYnk6IEdyZWcgS3JvYWgtSGFydG1h
biA8Z3JlZ2toQGxpbnV4Zm91bmRhdGlvbi5vcmc+ClJldmlld2VkLWJ5OiBMb2dhbiBHdW50aG9y
cGUgPGxvZ2FuZ0BkZWx0YXRlZS5jb20+ClJldmlld2VkLWJ5OiBTdGVwaGVuIEJveWQgPHN3Ym95
ZEBjaHJvbWl1bS5vcmc+Ci0tLQogaW5jbHVkZS9rdW5pdC9zdHJpbmctc3RyZWFtLmggfCAgNTEg
KysrKysrKysKIGt1bml0L01ha2VmaWxlICAgICAgICAgICAgICAgIHwgICAzICstCiBrdW5pdC9z
dHJpbmctc3RyZWFtLmMgICAgICAgICB8IDIxNyArKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrCiAzIGZpbGVzIGNoYW5nZWQsIDI3MCBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0p
CiBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS9rdW5pdC9zdHJpbmctc3RyZWFtLmgKIGNyZWF0
ZSBtb2RlIDEwMDY0NCBrdW5pdC9zdHJpbmctc3RyZWFtLmMKCmRpZmYgLS1naXQgYS9pbmNsdWRl
L2t1bml0L3N0cmluZy1zdHJlYW0uaCBiL2luY2x1ZGUva3VuaXQvc3RyaW5nLXN0cmVhbS5oCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMDAuLmZlOThhMDBiNzVhOWMKLS0t
IC9kZXYvbnVsbAorKysgYi9pbmNsdWRlL2t1bml0L3N0cmluZy1zdHJlYW0uaApAQCAtMCwwICsx
LDUxIEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCAqLworLyoKKyAqIEMr
KyBzdHJlYW0gc3R5bGUgc3RyaW5nIGJ1aWxkZXIgdXNlZCBpbiBLVW5pdCBmb3IgYnVpbGRpbmcg
bWVzc2FnZXMuCisgKgorICogQ29weXJpZ2h0IChDKSAyMDE5LCBHb29nbGUgTExDLgorICogQXV0
aG9yOiBCcmVuZGFuIEhpZ2dpbnMgPGJyZW5kYW5oaWdnaW5zQGdvb2dsZS5jb20+CisgKi8KKwor
I2lmbmRlZiBfS1VOSVRfU1RSSU5HX1NUUkVBTV9ICisjZGVmaW5lIF9LVU5JVF9TVFJJTkdfU1RS
RUFNX0gKKworI2luY2x1ZGUgPGxpbnV4L3NwaW5sb2NrLmg+CisjaW5jbHVkZSA8bGludXgvdHlw
ZXMuaD4KKyNpbmNsdWRlIDxzdGRhcmcuaD4KKworc3RydWN0IHN0cmluZ19zdHJlYW1fZnJhZ21l
bnQgeworCXN0cnVjdCBrdW5pdCAqdGVzdDsKKwlzdHJ1Y3QgbGlzdF9oZWFkIG5vZGU7CisJY2hh
ciAqZnJhZ21lbnQ7Cit9OworCitzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSB7CisJc2l6ZV90IGxlbmd0
aDsKKwlzdHJ1Y3QgbGlzdF9oZWFkIGZyYWdtZW50czsKKwkvKiBsZW5ndGggYW5kIGZyYWdtZW50
cyBhcmUgcHJvdGVjdGVkIGJ5IHRoaXMgbG9jayAqLworCXNwaW5sb2NrX3QgbG9jazsKKwlzdHJ1
Y3Qga3VuaXQgKnRlc3Q7CisJZ2ZwX3QgZ2ZwOworfTsKKworc3RydWN0IGt1bml0OworCitzdHJ1
Y3Qgc3RyaW5nX3N0cmVhbSAqYWxsb2Nfc3RyaW5nX3N0cmVhbShzdHJ1Y3Qga3VuaXQgKnRlc3Qs
IGdmcF90IGdmcCk7CisKK2ludCBfX3ByaW50ZigyLCAzKSBzdHJpbmdfc3RyZWFtX2FkZChzdHJ1
Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtLAorCQkJCSAgICAgY29uc3QgY2hhciAqZm10LCAuLi4p
OworCitpbnQgc3RyaW5nX3N0cmVhbV92YWRkKHN0cnVjdCBzdHJpbmdfc3RyZWFtICpzdHJlYW0s
CisJCSAgICAgICBjb25zdCBjaGFyICpmbXQsCisJCSAgICAgICB2YV9saXN0IGFyZ3MpOworCitj
aGFyICpzdHJpbmdfc3RyZWFtX2dldF9zdHJpbmcoc3RydWN0IHN0cmluZ19zdHJlYW0gKnN0cmVh
bSk7CisKK2ludCBzdHJpbmdfc3RyZWFtX2FwcGVuZChzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3Ry
ZWFtLAorCQkJIHN0cnVjdCBzdHJpbmdfc3RyZWFtICpvdGhlcik7CisKK2Jvb2wgc3RyaW5nX3N0
cmVhbV9pc19lbXB0eShzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtKTsKKworaW50IHN0cmlu
Z19zdHJlYW1fZGVzdHJveShzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtKTsKKworI2VuZGlm
IC8qIF9LVU5JVF9TVFJJTkdfU1RSRUFNX0ggKi8KZGlmZiAtLWdpdCBhL2t1bml0L01ha2VmaWxl
IGIva3VuaXQvTWFrZWZpbGUKaW5kZXggNWVmZGM0ZGVhMmMwOC4uMjc1YjU2NWEwZTgxZiAxMDA2
NDQKLS0tIGEva3VuaXQvTWFrZWZpbGUKKysrIGIva3VuaXQvTWFrZWZpbGUKQEAgLTEgKzEsMiBA
QAotb2JqLSQoQ09ORklHX0tVTklUKSArPQkJCXRlc3Qubworb2JqLSQoQ09ORklHX0tVTklUKSAr
PQkJCXRlc3QubyBcCisJCQkJCXN0cmluZy1zdHJlYW0ubwpkaWZmIC0tZ2l0IGEva3VuaXQvc3Ry
aW5nLXN0cmVhbS5jIGIva3VuaXQvc3RyaW5nLXN0cmVhbS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAwMDAwMDAuLmU2ZDE3YWFjY2EzMGQKLS0tIC9kZXYvbnVsbAorKysgYi9r
dW5pdC9zdHJpbmctc3RyZWFtLmMKQEAgLTAsMCArMSwyMTcgQEAKKy8vIFNQRFgtTGljZW5zZS1J
ZGVudGlmaWVyOiBHUEwtMi4wCisvKgorICogQysrIHN0cmVhbSBzdHlsZSBzdHJpbmcgYnVpbGRl
ciB1c2VkIGluIEtVbml0IGZvciBidWlsZGluZyBtZXNzYWdlcy4KKyAqCisgKiBDb3B5cmlnaHQg
KEMpIDIwMTksIEdvb2dsZSBMTEMuCisgKiBBdXRob3I6IEJyZW5kYW4gSGlnZ2lucyA8YnJlbmRh
bmhpZ2dpbnNAZ29vZ2xlLmNvbT4KKyAqLworCisjaW5jbHVkZSA8a3VuaXQvc3RyaW5nLXN0cmVh
bS5oPgorI2luY2x1ZGUgPGt1bml0L3Rlc3QuaD4KKyNpbmNsdWRlIDxsaW51eC9saXN0Lmg+Cisj
aW5jbHVkZSA8bGludXgvc2xhYi5oPgorCitzdHJ1Y3Qgc3RyaW5nX3N0cmVhbV9mcmFnbWVudF9h
bGxvY19jb250ZXh0IHsKKwlzdHJ1Y3Qga3VuaXQgKnRlc3Q7CisJaW50IGxlbjsKKwlnZnBfdCBn
ZnA7Cit9OworCitzdGF0aWMgaW50IHN0cmluZ19zdHJlYW1fZnJhZ21lbnRfaW5pdChzdHJ1Y3Qg
a3VuaXRfcmVzb3VyY2UgKnJlcywKKwkJCQkgICAgICAgdm9pZCAqY29udGV4dCkKK3sKKwlzdHJ1
Y3Qgc3RyaW5nX3N0cmVhbV9mcmFnbWVudF9hbGxvY19jb250ZXh0ICpjdHggPSBjb250ZXh0Owor
CXN0cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnOworCisJZnJhZyA9IGt1bml0X2t6
YWxsb2MoY3R4LT50ZXN0LCBzaXplb2YoKmZyYWcpLCBjdHgtPmdmcCk7CisJaWYgKCFmcmFnKQor
CQlyZXR1cm4gLUVOT01FTTsKKworCWZyYWctPnRlc3QgPSBjdHgtPnRlc3Q7CisJZnJhZy0+ZnJh
Z21lbnQgPSBrdW5pdF9rbWFsbG9jKGN0eC0+dGVzdCwgY3R4LT5sZW4sIGN0eC0+Z2ZwKTsKKwlp
ZiAoIWZyYWctPmZyYWdtZW50KQorCQlyZXR1cm4gLUVOT01FTTsKKworCXJlcy0+YWxsb2NhdGlv
biA9IGZyYWc7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgc3RyaW5nX3N0cmVhbV9m
cmFnbWVudF9mcmVlKHN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzKQoreworCXN0cnVjdCBzdHJp
bmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnID0gcmVzLT5hbGxvY2F0aW9uOworCisJbGlzdF9kZWwo
JmZyYWctPm5vZGUpOworCWt1bml0X2tmcmVlKGZyYWctPnRlc3QsIGZyYWctPmZyYWdtZW50KTsK
KwlrdW5pdF9rZnJlZShmcmFnLT50ZXN0LCBmcmFnKTsKK30KKworc3RhdGljIHN0cnVjdCBzdHJp
bmdfc3RyZWFtX2ZyYWdtZW50ICphbGxvY19zdHJpbmdfc3RyZWFtX2ZyYWdtZW50KAorCQlzdHJ1
Y3Qga3VuaXQgKnRlc3QsIGludCBsZW4sIGdmcF90IGdmcCkKK3sKKwlzdHJ1Y3Qgc3RyaW5nX3N0
cmVhbV9mcmFnbWVudF9hbGxvY19jb250ZXh0IGNvbnRleHQgPSB7CisJCS50ZXN0ID0gdGVzdCwK
KwkJLmxlbiA9IGxlbiwKKwkJLmdmcCA9IGdmcAorCX07CisKKwlyZXR1cm4ga3VuaXRfYWxsb2Nf
cmVzb3VyY2UodGVzdCwKKwkJCQkgICAgc3RyaW5nX3N0cmVhbV9mcmFnbWVudF9pbml0LAorCQkJ
CSAgICBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50X2ZyZWUsCisJCQkJICAgIGdmcCwKKwkJCQkgICAg
JmNvbnRleHQpOworfQorCitzdGF0aWMgaW50IHN0cmluZ19zdHJlYW1fZnJhZ21lbnRfZGVzdHJv
eShzdHJ1Y3Qgc3RyaW5nX3N0cmVhbV9mcmFnbWVudCAqZnJhZykKK3sKKwlyZXR1cm4ga3VuaXRf
cmVzb3VyY2VfZGVzdHJveShmcmFnLT50ZXN0LAorCQkJCSAgICAgIGt1bml0X3Jlc291cmNlX2lu
c3RhbmNlX21hdGNoLAorCQkJCSAgICAgIHN0cmluZ19zdHJlYW1fZnJhZ21lbnRfZnJlZSwKKwkJ
CQkgICAgICBmcmFnKTsKK30KKworaW50IHN0cmluZ19zdHJlYW1fdmFkZChzdHJ1Y3Qgc3RyaW5n
X3N0cmVhbSAqc3RyZWFtLAorCQkgICAgICAgY29uc3QgY2hhciAqZm10LAorCQkgICAgICAgdmFf
bGlzdCBhcmdzKQoreworCXN0cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnX2NvbnRh
aW5lcjsKKwlpbnQgbGVuOworCXZhX2xpc3QgYXJnc19mb3JfY291bnRpbmc7CisKKwkvKiBNYWtl
IGEgY29weSBiZWNhdXNlIGB2c25wcmludGZgIGNvdWxkIGNoYW5nZSBpdCAqLworCXZhX2NvcHko
YXJnc19mb3JfY291bnRpbmcsIGFyZ3MpOworCisJLyogTmVlZCBzcGFjZSBmb3IgbnVsbCBieXRl
LiAqLworCWxlbiA9IHZzbnByaW50ZihOVUxMLCAwLCBmbXQsIGFyZ3NfZm9yX2NvdW50aW5nKSAr
IDE7CisKKwl2YV9lbmQoYXJnc19mb3JfY291bnRpbmcpOworCisJZnJhZ19jb250YWluZXIgPSBh
bGxvY19zdHJpbmdfc3RyZWFtX2ZyYWdtZW50KHN0cmVhbS0+dGVzdCwKKwkJCQkJCSAgICAgIGxl
biwKKwkJCQkJCSAgICAgIHN0cmVhbS0+Z2ZwKTsKKwlpZiAoIWZyYWdfY29udGFpbmVyKQorCQly
ZXR1cm4gLUVOT01FTTsKKworCWxlbiA9IHZzbnByaW50ZihmcmFnX2NvbnRhaW5lci0+ZnJhZ21l
bnQsIGxlbiwgZm10LCBhcmdzKTsKKwlzcGluX2xvY2soJnN0cmVhbS0+bG9jayk7CisJc3RyZWFt
LT5sZW5ndGggKz0gbGVuOworCWxpc3RfYWRkX3RhaWwoJmZyYWdfY29udGFpbmVyLT5ub2RlLCAm
c3RyZWFtLT5mcmFnbWVudHMpOworCXNwaW5fdW5sb2NrKCZzdHJlYW0tPmxvY2spOworCisJcmV0
dXJuIDA7Cit9CisKK2ludCBzdHJpbmdfc3RyZWFtX2FkZChzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAq
c3RyZWFtLCBjb25zdCBjaGFyICpmbXQsIC4uLikKK3sKKwl2YV9saXN0IGFyZ3M7CisJaW50IHJl
c3VsdDsKKworCXZhX3N0YXJ0KGFyZ3MsIGZtdCk7CisJcmVzdWx0ID0gc3RyaW5nX3N0cmVhbV92
YWRkKHN0cmVhbSwgZm10LCBhcmdzKTsKKwl2YV9lbmQoYXJncyk7CisKKwlyZXR1cm4gcmVzdWx0
OworfQorCitzdGF0aWMgdm9pZCBzdHJpbmdfc3RyZWFtX2NsZWFyKHN0cnVjdCBzdHJpbmdfc3Ry
ZWFtICpzdHJlYW0pCit7CisJc3RydWN0IHN0cmluZ19zdHJlYW1fZnJhZ21lbnQgKmZyYWdfY29u
dGFpbmVyLCAqZnJhZ19jb250YWluZXJfc2FmZTsKKworCXNwaW5fbG9jaygmc3RyZWFtLT5sb2Nr
KTsKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUoZnJhZ19jb250YWluZXIsCisJCQkJIGZyYWdf
Y29udGFpbmVyX3NhZmUsCisJCQkJICZzdHJlYW0tPmZyYWdtZW50cywKKwkJCQkgbm9kZSkgewor
CQlzdHJpbmdfc3RyZWFtX2ZyYWdtZW50X2Rlc3Ryb3koZnJhZ19jb250YWluZXIpOworCX0KKwlz
dHJlYW0tPmxlbmd0aCA9IDA7CisJc3Bpbl91bmxvY2soJnN0cmVhbS0+bG9jayk7Cit9CisKK2No
YXIgKnN0cmluZ19zdHJlYW1fZ2V0X3N0cmluZyhzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFt
KQoreworCXN0cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnX2NvbnRhaW5lcjsKKwlz
aXplX3QgYnVmX2xlbiA9IHN0cmVhbS0+bGVuZ3RoICsgMTsgLyogKzEgZm9yIG51bGwgYnl0ZS4g
Ki8KKwljaGFyICpidWY7CisKKwlidWYgPSBrdW5pdF9remFsbG9jKHN0cmVhbS0+dGVzdCwgYnVm
X2xlbiwgc3RyZWFtLT5nZnApOworCWlmICghYnVmKQorCQlyZXR1cm4gTlVMTDsKKworCXNwaW5f
bG9jaygmc3RyZWFtLT5sb2NrKTsKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5KGZyYWdfY29udGFpbmVy
LCAmc3RyZWFtLT5mcmFnbWVudHMsIG5vZGUpCisJCXN0cmxjYXQoYnVmLCBmcmFnX2NvbnRhaW5l
ci0+ZnJhZ21lbnQsIGJ1Zl9sZW4pOworCXNwaW5fdW5sb2NrKCZzdHJlYW0tPmxvY2spOworCisJ
cmV0dXJuIGJ1ZjsKK30KKworaW50IHN0cmluZ19zdHJlYW1fYXBwZW5kKHN0cnVjdCBzdHJpbmdf
c3RyZWFtICpzdHJlYW0sCisJCQkgc3RydWN0IHN0cmluZ19zdHJlYW0gKm90aGVyKQoreworCWNv
bnN0IGNoYXIgKm90aGVyX2NvbnRlbnQ7CisKKwlvdGhlcl9jb250ZW50ID0gc3RyaW5nX3N0cmVh
bV9nZXRfc3RyaW5nKG90aGVyKTsKKworCWlmICghb3RoZXJfY29udGVudCkKKwkJcmV0dXJuIC1F
Tk9NRU07CisKKwlyZXR1cm4gc3RyaW5nX3N0cmVhbV9hZGQoc3RyZWFtLCBvdGhlcl9jb250ZW50
KTsKK30KKworYm9vbCBzdHJpbmdfc3RyZWFtX2lzX2VtcHR5KHN0cnVjdCBzdHJpbmdfc3RyZWFt
ICpzdHJlYW0pCit7CisJcmV0dXJuIGxpc3RfZW1wdHkoJnN0cmVhbS0+ZnJhZ21lbnRzKTsKK30K
Kworc3RydWN0IHN0cmluZ19zdHJlYW1fYWxsb2NfY29udGV4dCB7CisJc3RydWN0IGt1bml0ICp0
ZXN0OworCWdmcF90IGdmcDsKK307CisKK3N0YXRpYyBpbnQgc3RyaW5nX3N0cmVhbV9pbml0KHN0
cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzLCB2b2lkICpjb250ZXh0KQoreworCXN0cnVjdCBzdHJp
bmdfc3RyZWFtICpzdHJlYW07CisJc3RydWN0IHN0cmluZ19zdHJlYW1fYWxsb2NfY29udGV4dCAq
Y3R4ID0gY29udGV4dDsKKworCXN0cmVhbSA9IGt1bml0X2t6YWxsb2MoY3R4LT50ZXN0LCBzaXpl
b2YoKnN0cmVhbSksIGN0eC0+Z2ZwKTsKKwlpZiAoIXN0cmVhbSkKKwkJcmV0dXJuIC1FTk9NRU07
CisKKwlyZXMtPmFsbG9jYXRpb24gPSBzdHJlYW07CisJc3RyZWFtLT5nZnAgPSBjdHgtPmdmcDsK
KwlzdHJlYW0tPnRlc3QgPSBjdHgtPnRlc3Q7CisJSU5JVF9MSVNUX0hFQUQoJnN0cmVhbS0+ZnJh
Z21lbnRzKTsKKwlzcGluX2xvY2tfaW5pdCgmc3RyZWFtLT5sb2NrKTsKKworCXJldHVybiAwOwor
fQorCitzdGF0aWMgdm9pZCBzdHJpbmdfc3RyZWFtX2ZyZWUoc3RydWN0IGt1bml0X3Jlc291cmNl
ICpyZXMpCit7CisJc3RydWN0IHN0cmluZ19zdHJlYW0gKnN0cmVhbSA9IHJlcy0+YWxsb2NhdGlv
bjsKKworCXN0cmluZ19zdHJlYW1fY2xlYXIoc3RyZWFtKTsKK30KKworc3RydWN0IHN0cmluZ19z
dHJlYW0gKmFsbG9jX3N0cmluZ19zdHJlYW0oc3RydWN0IGt1bml0ICp0ZXN0LCBnZnBfdCBnZnAp
Cit7CisJc3RydWN0IHN0cmluZ19zdHJlYW1fYWxsb2NfY29udGV4dCBjb250ZXh0ID0geworCQku
dGVzdCA9IHRlc3QsCisJCS5nZnAgPSBnZnAKKwl9OworCisJcmV0dXJuIGt1bml0X2FsbG9jX3Jl
c291cmNlKHRlc3QsCisJCQkJICAgIHN0cmluZ19zdHJlYW1faW5pdCwKKwkJCQkgICAgc3RyaW5n
X3N0cmVhbV9mcmVlLAorCQkJCSAgICBnZnAsCisJCQkJICAgICZjb250ZXh0KTsKK30KKworaW50
IHN0cmluZ19zdHJlYW1fZGVzdHJveShzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtKQorewor
CXJldHVybiBrdW5pdF9yZXNvdXJjZV9kZXN0cm95KHN0cmVhbS0+dGVzdCwKKwkJCQkgICAgICBr
dW5pdF9yZXNvdXJjZV9pbnN0YW5jZV9tYXRjaCwKKwkJCQkgICAgICBzdHJpbmdfc3RyZWFtX2Zy
ZWUsCisJCQkJICAgICAgc3RyZWFtKTsKK30KLS0gCjIuMjMuMC5yYzEuMTUzLmdkZWVkODAzMzBm
LWdvb2cKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRy
aS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
