Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0B5EFFC1A8
	for <lists+dri-devel@lfdr.de>; Thu, 14 Nov 2019 09:37:50 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 486A36E402;
	Thu, 14 Nov 2019 08:37:47 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from EUR04-DB3-obe.outbound.protection.outlook.com
 (mail-eopbgr60084.outbound.protection.outlook.com [40.107.6.84])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BEDDF6E402
 for <dri-devel@lists.freedesktop.org>; Thu, 14 Nov 2019 08:37:45 +0000 (UTC)
Received: from VI1PR08CA0226.eurprd08.prod.outlook.com (2603:10a6:802:15::35)
 by VI1PR0801MB2062.eurprd08.prod.outlook.com (2603:10a6:800:83::22)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2451.23; Thu, 14 Nov
 2019 08:37:42 +0000
Received: from AM5EUR03FT042.eop-EUR03.prod.protection.outlook.com
 (2a01:111:f400:7e08::200) by VI1PR08CA0226.outlook.office365.com
 (2603:10a6:802:15::35) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.2451.23 via Frontend
 Transport; Thu, 14 Nov 2019 08:37:42 +0000
Received-SPF: Fail (protection.outlook.com: domain of arm.com does not
 designate 63.35.35.123 as permitted sender) receiver=protection.outlook.com;
 client-ip=63.35.35.123; helo=64aa7808-outbound-1.mta.getcheckrecipient.com;
Received: from 64aa7808-outbound-1.mta.getcheckrecipient.com (63.35.35.123) by
 AM5EUR03FT042.mail.protection.outlook.com (10.152.17.168) with
 Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2451.23 via Frontend Transport; Thu, 14 Nov 2019 08:37:42 +0000
Received: ("Tessian outbound 851a1162fca7:v33");
 Thu, 14 Nov 2019 08:37:40 +0000
X-CheckRecipientChecked: true
X-CR-MTA-CID: f5177b4959325318
X-CR-MTA-TID: 64aa7808
Received: from 8070f748806f.2 (cr-mta-lb-1.cr-mta-net [104.47.10.54])
 by 64aa7808-outbound-1.mta.getcheckrecipient.com id
 406F1985-65D6-4018-92A5-055851AC78B8.1; 
 Thu, 14 Nov 2019 08:37:35 +0000
Received: from EUR03-DB5-obe.outbound.protection.outlook.com
 (mail-db5eur03lp2054.outbound.protection.outlook.com [104.47.10.54])
 by 64aa7808-outbound-1.mta.getcheckrecipient.com with ESMTPS id 8070f748806f.2
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384);
 Thu, 14 Nov 2019 08:37:35 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=AczfD67exZWKdOPNUrUwO4/oB92Y6mFzuUf43DzAquaKROmZL7VAHeHSJFDWZ2g4MDpYfCmgeY9q1ZqrSx8A/4GKYLV57Wx6k+AtRNWwNA/ZfKExjCBO0o21lcKgV6NWHImfdSmKg2UXKtYga76EhGrOqGEC5qa9evqEDhiV/RpPtMfmhrxc9jbWsufPIgeSMo3sSHi3dMZX97ZlaQ9ErBdtDCNJZ0a8vmSMkrQcPv9B5PNSend5mqp411Ydonl63J2of5ZiTad7DzUu37phOMAG7tOCDb3RhxHinqPycHUNTKhkP2HQwz1FJB2iaZOj32oVDuYzmY9Yzbc/fOMiag==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=zXaZQA7UF04Za11ENfBrPY7rcZqwyDjhxx+VWI/tpIc=;
 b=gLfy6m8ymXoGkQAo//NNZw5Tvu13kZfeOUkFo30eJAgV3bfkoVr/YTz0/bYEP2NPVwOHMSeOZvLpOVUYFCVYJ8/h4bGoOaSvhbCbPKLG6eJbz5yHLcZ3f1ZWT1p3tzKUr0wcxPqhUJyskW6pHTUO2tWlR1jkrQ+KYKYezl2o7ADSSFjSOcqtcZieVDJ4W37XwUcxLEV7IAm1891ceHzQQ+pUlS5d4pnLT7Nk07wI2zZSL67Y1NEy107Nhgv/b3UYluByp3vCk7DyuQwuY11eBz2F0zGXfNF9os1SdduBaQYlwN7x7DkXpntRBU7xQCidKXesXzJNwWaJq7xVgCYvWA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=arm.com; dmarc=pass action=none header.from=arm.com; dkim=pass
 header.d=arm.com; arc=none
Received: from VE1PR08MB5006.eurprd08.prod.outlook.com (10.255.159.31) by
 VE1PR08MB4768.eurprd08.prod.outlook.com (10.255.114.150) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2451.27; Thu, 14 Nov 2019 08:37:31 +0000
Received: from VE1PR08MB5006.eurprd08.prod.outlook.com
 ([fe80::a809:417a:faf3:61a7]) by VE1PR08MB5006.eurprd08.prod.outlook.com
 ([fe80::a809:417a:faf3:61a7%6]) with mapi id 15.20.2451.023; Thu, 14 Nov 2019
 08:37:31 +0000
From: "james qian wang (Arm Technology China)" <james.qian.wang@arm.com>
To: Liviu Dudau <Liviu.Dudau@arm.com>, "airlied@linux.ie" <airlied@linux.ie>, 
 Brian Starkey <Brian.Starkey@arm.com>, "maarten.lankhorst@linux.intel.com"
 <maarten.lankhorst@linux.intel.com>, "sean@poorly.run" <sean@poorly.run>, 
 Mihail Atanassov <Mihail.Atanassov@arm.com>
Subject: [PATCH v3 2/6] drm/komeda: Add side by side plane_state split
Thread-Topic: [PATCH v3 2/6] drm/komeda: Add side by side plane_state split
Thread-Index: AQHVmsbB0qq5bjF9AkuUGZwZ2Z2ZNw==
Date: Thu, 14 Nov 2019 08:37:31 +0000
Message-ID: <20191114083658.27237-3-james.qian.wang@arm.com>
References: <20191114083658.27237-1-james.qian.wang@arm.com>
In-Reply-To: <20191114083658.27237-1-james.qian.wang@arm.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [113.29.88.7]
x-clientproxiedby: HK0PR01CA0038.apcprd01.prod.exchangelabs.com
 (2603:1096:203:3e::26) To VE1PR08MB5006.eurprd08.prod.outlook.com
 (2603:10a6:803:113::31)
Authentication-Results-Original: spf=none (sender IP is )
 smtp.mailfrom=james.qian.wang@arm.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.20.1
x-ms-publictraffictype: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: e9db9e7c-c0b4-44d8-f52a-08d768ddea1f
X-MS-TrafficTypeDiagnostic: VE1PR08MB4768:|VE1PR08MB4768:|VI1PR0801MB2062:
x-ms-exchange-transport-forked: True
X-Microsoft-Antispam-PRVS: <VI1PR0801MB206254C79E6A091C7389062BB3710@VI1PR0801MB2062.eurprd08.prod.outlook.com>
x-checkrecipientrouted: true
x-ms-oob-tlc-oobclassifiers: OLM:4502;OLM:4502;
x-forefront-prvs: 02213C82F8
X-Forefront-Antispam-Report-Untrusted: SFV:NSPM;
 SFS:(10009020)(979002)(4636009)(366004)(376002)(346002)(396003)(136003)(39850400004)(189003)(199004)(71200400001)(71190400001)(36756003)(305945005)(2906002)(7736002)(110136005)(54906003)(6116002)(316002)(3846002)(99286004)(103116003)(446003)(11346002)(30864003)(6486002)(8936002)(2616005)(476003)(6436002)(66476007)(66556008)(64756008)(66446008)(66946007)(478600001)(6512007)(50226002)(66066001)(486006)(14454004)(2501003)(5660300002)(76176011)(52116002)(256004)(386003)(55236004)(25786009)(6636002)(102836004)(6506007)(8676002)(4326008)(26005)(81156014)(81166006)(1076003)(186003)(2201001)(86362001)(969003)(989001)(999001)(1009001)(1019001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:VE1PR08MB4768;
 H:VE1PR08MB5006.eurprd08.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: arm.com does not designate
 permitted sender hosts)
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam-Untrusted: BCL:0;
X-Microsoft-Antispam-Message-Info-Original: Z2UwdOGojHSTDCvTrwp1qcy7dVgiuMy2E5Xn4ei4byl7h5pqh3P96T1/FbWhc5QSbauUyamwJJrUdyTxWyyy0QmnCnweQZlRLl0KBv051s9dpel15frWxe3hiFuDuELNsOvcqGi95xvaNfAeCk9hk7l/kh24jbJpgZO2wPEN/M53WvTyzEr2FppakikI4CwgML1Xjuh1gdUq5EVbBmclqQ2C1k25q/jRVMIo+ofE+xTCnYgCrhfDZSseSExCrJco/w0QtxKyFDPxSixsABp3YkZ8XcUy0iAcUIFBkvkL0Q+MkKsVbgqk0sZ0FqSF+bfUSy5WUfBe/TEgI4+il7mxeY85ok7guN8DPmlEJ2XDZBqLLNNWRq4ZXnzeQdHblvZkivfCswSMf5iEiAx3B2l5lLvQP2wg8TzSl9QhJeCae/YPggjmd/l5nlo3PaBm3h8e
MIME-Version: 1.0
X-MS-Exchange-Transport-CrossTenantHeadersStamped: VE1PR08MB4768
Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=james.qian.wang@arm.com; 
X-EOPAttributedMessage: 0
X-MS-Exchange-Transport-CrossTenantHeadersStripped: AM5EUR03FT042.eop-EUR03.prod.protection.outlook.com
X-Forefront-Antispam-Report: CIP:63.35.35.123; IPV:CAL; SCL:-1; CTRY:IE;
 EFV:NLI; SFV:NSPM;
 SFS:(10009020)(979002)(4636009)(136003)(39850400004)(346002)(376002)(396003)(1110001)(339900001)(189003)(199004)(14454004)(26826003)(478600001)(105606002)(50466002)(2906002)(186003)(3846002)(2616005)(6116002)(446003)(486006)(11346002)(76176011)(26005)(126002)(476003)(336012)(386003)(6506007)(102836004)(2501003)(66066001)(4326008)(86362001)(2201001)(47776003)(356004)(30864003)(6486002)(1076003)(76130400001)(25786009)(70586007)(70206006)(5660300002)(6512007)(36756003)(22756006)(110136005)(8936002)(54906003)(8746002)(50226002)(99286004)(316002)(81166006)(7736002)(305945005)(36906005)(81156014)(23756003)(103116003)(6636002)(8676002)(969003)(989001)(999001)(1009001)(1019001);
 DIR:OUT; SFP:1101; SCL:1; SRVR:VI1PR0801MB2062;
 H:64aa7808-outbound-1.mta.getcheckrecipient.com; FPR:; SPF:Fail; LANG:en;
 PTR:ec2-63-35-35-123.eu-west-1.compute.amazonaws.com; MX:1; A:1; 
X-MS-Office365-Filtering-Correlation-Id-Prvs: 914ebf95-08d9-4411-4c53-08d768dde3b7
NoDisclaimer: True
X-Forefront-PRVS: 02213C82F8
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: wJLcMc2lw1n1gKIvGQZMfm+gvXb0baNUxUI9YW7G6WXHClc2jhh3puYVWXlbBtTH0J/b0yQHA1llyFj7oCEiwEa+Lb+RCBC2hOQzx09T8ROy5+2nQ3GmZkg7RQsAQPv3ERuoBxW5g00WUIIYgIkbrvPPgNNw+8M7plWeo6KFOQUZDbWUhJgfbSbo5ICR3lpYXOHMmEu4G6GcecA5fc20VBmKrTaPfu/aQJm0i4/Zrlg/sa7AYXThrw1RtpUa3OfMRUUa136FGA3RcWjYlpsSd5RqR3mSl6hRQrA6ybsYlNv0niYY8WdXrKJEyqOAxINJKINYY8EI/yVgYY3QWqbQSk0x+N04ufUBLD2bkZRQbElD0Rmu55bkgM6EOP1GlXzEyQEk8AGFBm27T9kwSBN+g5Fn2TbtzkctNtXSu1bnEGN4Ho0Wwi/j3/IKm09EtVaF
X-OriginatorOrg: arm.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 14 Nov 2019 08:37:42.0377 (UTC)
X-MS-Exchange-CrossTenant-Network-Message-Id: e9db9e7c-c0b4-44d8-f52a-08d768ddea1f
X-MS-Exchange-CrossTenant-Id: f34e5979-57d9-4aaa-ad4d-b122a662184d
X-MS-Exchange-CrossTenant-OriginalAttributedTenantConnectingIp: TenantId=f34e5979-57d9-4aaa-ad4d-b122a662184d; Ip=[63.35.35.123];
 Helo=[64aa7808-outbound-1.mta.getcheckrecipient.com]
X-MS-Exchange-CrossTenant-FromEntityHeader: HybridOnPrem
X-MS-Exchange-Transport-CrossTenantHeadersStamped: VI1PR0801MB2062
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=armh.onmicrosoft.com; 
 s=selector2-armh-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=zXaZQA7UF04Za11ENfBrPY7rcZqwyDjhxx+VWI/tpIc=;
 b=gYULTnweHQemebVjJv7hheJGrTqfS70mKuVwllTVv8e1Y8sJTkSdW02Va0GqhSHzZn6YUqjASQjuOpUUrndjpOWQz3K2Lk0V+v9fTOTToSR/Rk9yRPwM6mxJiq4H3TMw19o6tEDgVZgZZzNwtX6bNcVbfUzIypqkU/5gV8zAH60=
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=armh.onmicrosoft.com; 
 s=selector2-armh-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=zXaZQA7UF04Za11ENfBrPY7rcZqwyDjhxx+VWI/tpIc=;
 b=gYULTnweHQemebVjJv7hheJGrTqfS70mKuVwllTVv8e1Y8sJTkSdW02Va0GqhSHzZn6YUqjASQjuOpUUrndjpOWQz3K2Lk0V+v9fTOTToSR/Rk9yRPwM6mxJiq4H3TMw19o6tEDgVZgZZzNwtX6bNcVbfUzIypqkU/5gV8zAH60=
X-Mailman-Original-Authentication-Results: spf=fail (sender IP is 63.35.35.123)
 smtp.mailfrom=arm.com; lists.freedesktop.org; dkim=pass (signature was
 verified) header.d=armh.onmicrosoft.com;lists.freedesktop.org; dmarc=none
 action=none header.from=arm.com;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: nd <nd@arm.com>, Ayan Halder <Ayan.Halder@arm.com>, "Oscar
 Zhang \(Arm Technology China\)" <Oscar.Zhang@arm.com>, "Tiannan Zhu \(Arm
 Technology China\)" <Tiannan.Zhu@arm.com>,
 "Jonathan Chai \(Arm Technology China\)" <Jonathan.Chai@arm.com>,
 "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
 "dri-devel@lists.freedesktop.org" <dri-devel@lists.freedesktop.org>, "Julien
 Yin \(Arm Technology China\)" <Julien.Yin@arm.com>, "Channing Chen \(Arm
 Technology China\)" <Channing.Chen@arm.com>, "james qian wang \(Arm Technology
 China\)" <james.qian.wang@arm.com>,
 "Yiqi Kang \(Arm Technology China\)" <Yiqi.Kang@arm.com>,
 "Thomas Sun \(Arm Technology China\)" <thomas.Sun@arm.com>,
 "Lowry Li \(Arm Technology China\)" <Lowry.Li@arm.com>,
 Ben Davis <Ben.Davis@arm.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gc2lkZSBieSBzaWRlIG1vZGUsIFRoZSBmdWxsIGRpc3BsYXkgZnJhbWUgd2lsbCBiZSBzcGxp
dCBpbnRvIHR3byBwYXJ0cwooTGVmdC9SaWdodCksIGFuZCBlYWNoIHBhcnQgd2lsbCBiZSBoYW5k
bGVkIGJ5IGEgc2luZ2xlIHBpcGVsaW5lIHNlcGFyYXRlbHkKbWFzdGVyIHBpcGVsaW5lIGZvciBs
ZWZ0IHBhcnQsIHNsYXZlIGZvciByaWdodC4KClRvIHNpbXBsaWZ5IHRoZSB1c2FnZSBhbmQgaW1w
bGVtZW50YXRpb24sIGtvbWVkYSB1c2UgdGhlIGZvbGxvd2luZyBzY2hlbWUKdG8gZG8gdGhlIHNp
ZGUgYnkgc2lkZSBzcGxpdAoxLiBUaGUgcGxhbmVzIGFsc28gaGF2ZSBiZWVuIGdyb3VwZWQgaW50
byB0d28gY2xhc3NlczoKICAgbWFzdGVyLXBsYW5lcyBhbmQgc2xhdmUtcGxhbmVzLgoyLiBUaGUg
bWFzdGVyIHBsYW5lIGNhbiBkaXNwbGF5IGl0cyBpbWFnZSBvbiBhbnkgbG9jYXRpb24gb2YgdGhl
IGZpbmFsL2Z1bGwKICAgZGlzcGxheSBmcmFtZSwga29tZWRhIHdpbGwgaGVscCB0byBzcGxpdCB0
aGUgcGxhbmUgY29uZmlndXJhdGlvbiB0byB0d28KICAgcGFydHMgYW5kIGZlZCB0aGVtIGludG8g
bWFzdGVyIGFuZCBzbGF2ZSBwaXBlbGluZXMuCjMuIFRoZSBzbGF2ZSBwbGFuZSBvbmx5IGNhbiBw
dXQgaXRzIGRpc3BsYXkgcmVjdCBvbiB0aGUgcmlnaHQgcGFydCBvZiB0aGUKICAgZmluYWwgZGlz
cGxheSBmcmFtZSwgYW5kIGl0cyBkYXRhIGlzIG9ubHkgY2FuIGJlIGZlZCBpbnRvIHRoZSBzbGF2
ZQogICBwaXBlbGluZS4KCkZyb20gdGhlIHBlcnNwZWN0aXZlIG9mIHJlc291cmNlIHVzYWdlIGFu
ZCBhc3NpZ25tZW50OgpUaGUgbWFzdGVyIHBsYW5lIGNhbiB1c2UgdGhlIHJlc291cmNlcyBmcm9t
IHRoZSBtYXN0ZXIgcGlwZWxpbmUgYW5kIHNsYXZlCnBpcGVsaW5lIGJvdGgsIGJ1dCBzbGF2ZSBw
bGFuZSBvbmx5IGNhbiB1c2UgdGhlIHNsYXZlIHBpcGVsaW5lIHJlc291cmNlcy4KCldpdGggc3Vj
aCBzY2hlbWUsIHRoZSB1c2FnZSBvZiBtYXN0ZXIgcGxhbmVzIGFyZSBzYW1lIGFzIHRoZSBub25l
CnNpZGVfYnlfc2lkZSBtb2RlLiB1c2VyIGNhbiBlYXNpbHkgc2tpcCB0aGUgc2xhdmUgcGxhbmVz
IGFuZCBubyBuZWVkIHRvCmNvbnNpZGVyIHNpZGVfYnlfc2lkZSBmb3IgdGhlbS4KClNpZ25lZC1v
ZmYtYnk6IEphbWVzIFFpYW4gV2FuZyAoQXJtIFRlY2hub2xvZ3kgQ2hpbmEpIDxqYW1lcy5xaWFu
LndhbmdAYXJtLmNvbT4KLS0tCiAuLi4vZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfcGlw
ZWxpbmUuaCAgfCAgMzMgKystCiAuLi4vZGlzcGxheS9rb21lZGEva29tZWRhX3BpcGVsaW5lX3N0
YXRlLmMgICAgfCAxODggKysrKysrKysrKysrKysrKysrCiAuLi4vZ3B1L2RybS9hcm0vZGlzcGxh
eS9rb21lZGEva29tZWRhX3BsYW5lLmMgfCAgIDcgKy0KIDMgZmlsZXMgY2hhbmdlZCwgMjIwIGlu
c2VydGlvbnMoKyksIDggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfcGlwZWxpbmUuaCBiL2RyaXZlcnMvZ3B1L2RybS9h
cm0vZGlzcGxheS9rb21lZGEva29tZWRhX3BpcGVsaW5lLmgKaW5kZXggMjBhMDc2Y2NlNjM1Li40
YzA5NDZmYmFhYzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxheS9rb21l
ZGEva29tZWRhX3BpcGVsaW5lLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tv
bWVkYS9rb21lZGFfcGlwZWxpbmUuaApAQCAtNTIxLDYgKzUyMSwyMCBAQCBrb21lZGFfY29tcG9u
ZW50X3BpY2t1cF9vdXRwdXQoc3RydWN0IGtvbWVkYV9jb21wb25lbnQgKmMsIHUzMiBhdmFpbF9j
b21wcykKIAlyZXR1cm4ga29tZWRhX3BpcGVsaW5lX2dldF9maXJzdF9jb21wb25lbnQoYy0+cGlw
ZWxpbmUsIGF2YWlsX2lucHV0cyk7CiB9CiAKK3N0YXRpYyBpbmxpbmUgY29uc3QgY2hhciAqCitr
b21lZGFfZGF0YV9mbG93X21zZyhzdHJ1Y3Qga29tZWRhX2RhdGFfZmxvd19jZmcgKmNvbmZpZykK
K3sKKwlzdGF0aWMgY2hhciBzdHJbMTI4XTsKKworCXNucHJpbnRmKHN0ciwgc2l6ZW9mKHN0ciks
CisJCSAicm90OiAleCBzcmNbeC95OiVkLyVkLCB3L2g6JWQvJWRdIGRpc3BbeC95OiVkLyVkLCB3
L2g6JWQvJWRdIiwKKwkJIGNvbmZpZy0+cm90LAorCQkgY29uZmlnLT5pbl94LCBjb25maWctPmlu
X3ksIGNvbmZpZy0+aW5fdywgY29uZmlnLT5pbl9oLAorCQkgY29uZmlnLT5vdXRfeCwgY29uZmln
LT5vdXRfeSwgY29uZmlnLT5vdXRfdywgY29uZmlnLT5vdXRfaCk7CisKKwlyZXR1cm4gc3RyOwor
fQorCiBzdHJ1Y3Qga29tZWRhX3BsYW5lX3N0YXRlOwogc3RydWN0IGtvbWVkYV9jcnRjX3N0YXRl
Owogc3RydWN0IGtvbWVkYV9jcnRjOwpAQCAtNTMyLDIyICs1NDYsMjcgQEAgaW50IGtvbWVkYV9i
dWlsZF9sYXllcl9kYXRhX2Zsb3coc3RydWN0IGtvbWVkYV9sYXllciAqbGF5ZXIsCiAJCQkJIHN0
cnVjdCBrb21lZGFfcGxhbmVfc3RhdGUgKmtwbGFuZV9zdCwKIAkJCQkgc3RydWN0IGtvbWVkYV9j
cnRjX3N0YXRlICprY3J0Y19zdCwKIAkJCQkgc3RydWN0IGtvbWVkYV9kYXRhX2Zsb3dfY2ZnICpk
Zmxvdyk7Ci1pbnQga29tZWRhX2J1aWxkX3diX2RhdGFfZmxvdyhzdHJ1Y3Qga29tZWRhX2xheWVy
ICp3Yl9sYXllciwKLQkJCSAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0
LAotCQkJICAgICAgc3RydWN0IGtvbWVkYV9jcnRjX3N0YXRlICprY3J0Y19zdCwKLQkJCSAgICAg
IHN0cnVjdCBrb21lZGFfZGF0YV9mbG93X2NmZyAqZGZsb3cpOwotaW50IGtvbWVkYV9idWlsZF9k
aXNwbGF5X2RhdGFfZmxvdyhzdHJ1Y3Qga29tZWRhX2NydGMgKmtjcnRjLAotCQkJCSAgIHN0cnVj
dCBrb21lZGFfY3J0Y19zdGF0ZSAqa2NydGNfc3QpOwotCiBpbnQga29tZWRhX2J1aWxkX2xheWVy
X3NwbGl0X2RhdGFfZmxvdyhzdHJ1Y3Qga29tZWRhX2xheWVyICpsZWZ0LAogCQkJCSAgICAgICBz
dHJ1Y3Qga29tZWRhX3BsYW5lX3N0YXRlICprcGxhbmVfc3QsCiAJCQkJICAgICAgIHN0cnVjdCBr
b21lZGFfY3J0Y19zdGF0ZSAqa2NydGNfc3QsCiAJCQkJICAgICAgIHN0cnVjdCBrb21lZGFfZGF0
YV9mbG93X2NmZyAqZGZsb3cpOworaW50IGtvbWVkYV9idWlsZF9sYXllcl9zYnNfZGF0YV9mbG93
KHN0cnVjdCBrb21lZGFfbGF5ZXIgKmxheWVyLAorCQkJCSAgICAgc3RydWN0IGtvbWVkYV9wbGFu
ZV9zdGF0ZSAqa3BsYW5lX3N0LAorCQkJCSAgICAgc3RydWN0IGtvbWVkYV9jcnRjX3N0YXRlICpr
Y3J0Y19zdCwKKwkJCQkgICAgIHN0cnVjdCBrb21lZGFfZGF0YV9mbG93X2NmZyAqZGZsb3cpOwor
CitpbnQga29tZWRhX2J1aWxkX3diX2RhdGFfZmxvdyhzdHJ1Y3Qga29tZWRhX2xheWVyICp3Yl9s
YXllciwKKwkJCSAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0LAorCQkJ
ICAgICAgc3RydWN0IGtvbWVkYV9jcnRjX3N0YXRlICprY3J0Y19zdCwKKwkJCSAgICAgIHN0cnVj
dCBrb21lZGFfZGF0YV9mbG93X2NmZyAqZGZsb3cpOwogaW50IGtvbWVkYV9idWlsZF93Yl9zcGxp
dF9kYXRhX2Zsb3coc3RydWN0IGtvbWVkYV9sYXllciAqd2JfbGF5ZXIsCiAJCQkJICAgIHN0cnVj
dCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0LAogCQkJCSAgICBzdHJ1Y3Qga29tZWRhX2Ny
dGNfc3RhdGUgKmtjcnRjX3N0LAogCQkJCSAgICBzdHJ1Y3Qga29tZWRhX2RhdGFfZmxvd19jZmcg
KmRmbG93KTsKIAoraW50IGtvbWVkYV9idWlsZF9kaXNwbGF5X2RhdGFfZmxvdyhzdHJ1Y3Qga29t
ZWRhX2NydGMgKmtjcnRjLAorCQkJCSAgIHN0cnVjdCBrb21lZGFfY3J0Y19zdGF0ZSAqa2NydGNf
c3QpOworCiBpbnQga29tZWRhX3JlbGVhc2VfdW5jbGFpbWVkX3Jlc291cmNlcyhzdHJ1Y3Qga29t
ZWRhX3BpcGVsaW5lICpwaXBlLAogCQkJCSAgICAgICBzdHJ1Y3Qga29tZWRhX2NydGNfc3RhdGUg
KmtjcnRjX3N0KTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tv
bWVkYS9rb21lZGFfcGlwZWxpbmVfc3RhdGUuYyBiL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxh
eS9rb21lZGEva29tZWRhX3BpcGVsaW5lX3N0YXRlLmMKaW5kZXggMDkzMDIzNGFiYjlkLi41ZGUw
ZDIzMWExYzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEv
a29tZWRhX3BpcGVsaW5lX3N0YXRlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5
L2tvbWVkYS9rb21lZGFfcGlwZWxpbmVfc3RhdGUuYwpAQCAtMTEzMCw2ICsxMTMwLDE5NCBAQCBp
bnQga29tZWRhX2J1aWxkX2xheWVyX3NwbGl0X2RhdGFfZmxvdyhzdHJ1Y3Qga29tZWRhX2xheWVy
ICpsZWZ0LAogCXJldHVybiBlcnI7CiB9CiAKKy8qIHNwbGl0IGZ1bmMgd2lsbCBzcGxpdCBjb25m
aWd1cmF0aW9uIG9mIG1hc3RlciBwbGFuZSB0byB0d28gbGF5ZXIgZGF0YQorICogZmxvd3MsIHdo
aWNoIHdpbGwgYmUgZmVkIGludG8gbWFzdGVyIGFuZCBzbGF2ZSBwaXBlbGluZSB0aGVuLgorICog
Tk9URTogQG1fZGZsb3cgaXMgZmlyc3QgdXNlZCBhcyBpbnB1dCBhcmd1bWVudCB0byBwYXNzIHRo
ZSBjb25maWd1cmF0aW9uIG9mCisgKgkgbWFzdGVyX3BsYW5lLiB3aGVuIHRoZSBzcGxpdCBpcyBk
b25lLCBAKm1fZGZsb3cgQCpzX2RmbG93IGFyZSB0aGUKKyAqCSBvdXRwdXQgZGF0YSBmbG93IGZv
ciBwaXBlbGluZS4KKyAqLworc3RhdGljIGludAora29tZWRhX3NwbGl0X3Nic19tYXN0ZXJfZGF0
YV9mbG93KHN0cnVjdCBrb21lZGFfY3J0Y19zdGF0ZSAqa2NydGNfc3QsCisJCQkJICBzdHJ1Y3Qg
a29tZWRhX2RhdGFfZmxvd19jZmcgKiptX2RmbG93LAorCQkJCSAgc3RydWN0IGtvbWVkYV9kYXRh
X2Zsb3dfY2ZnICoqc19kZmxvdykKK3sKKwlzdHJ1Y3Qga29tZWRhX2RhdGFfZmxvd19jZmcgKm1h
c3RlciA9ICptX2RmbG93OworCXN0cnVjdCBrb21lZGFfZGF0YV9mbG93X2NmZyAqc2xhdmUgPSAq
c19kZmxvdzsKKwl1MzIgZGlzcF9lbmQgPSBtYXN0ZXItPm91dF94ICsgbWFzdGVyLT5vdXRfdzsK
Kwl1MTYgYm91bmRhcnk7CisKKwlwaXBlbGluZV9jb21wb3NpdGlvbl9zaXplKGtjcnRjX3N0LCAm
Ym91bmRhcnksIE5VTEwpOworCisJaWYgKGRpc3BfZW5kIDw9IGJvdW5kYXJ5KSB7CisJCS8qIHRo
ZSBtYXN0ZXIgdmlld3BvcnQgb25seSBsb2NhdGVkIGluIG1hc3RlciBzaWRlLCBubyBuZWVkCisJ
CSAqIHNsYXZlIGFueW1vcmUKKwkJICovCisJCSpzX2RmbG93ID0gTlVMTDsKKwl9IGVsc2UgaWYg
KChtYXN0ZXItPm91dF94IDwgYm91bmRhcnkpICYmIChkaXNwX2VuZCA+IGJvdW5kYXJ5KSkgewor
CQkvKiB0aGUgbWFzdGVyIHZpZXdwb3J0IGFjcm9zcyB0d28gcGlwZWxpbmVzLCBzcGxpdCBpdCAq
LworCQlib29sIGZsaXBfaCA9IGhhc19mbGlwX2gobWFzdGVyLT5yb3QpOworCQlib29sIHI5MCAg
PSBkcm1fcm90YXRpb25fOTBfb3JfMjcwKG1hc3Rlci0+cm90KTsKKwkJdTMyIHNyY194ID0gbWFz
dGVyLT5pbl94OworCQl1MzIgc3JjX3kgPSBtYXN0ZXItPmluX3k7CisJCXUzMiBzcmNfdyA9IG1h
c3Rlci0+aW5fdzsKKwkJdTMyIHNyY19oID0gbWFzdGVyLT5pbl9oOworCisJCWlmIChtYXN0ZXIt
PmVuX3NjYWxpbmcgfHwgbWFzdGVyLT5lbl9pbWdfZW5oYW5jZW1lbnQpIHsKKwkJCURSTV9ERUJV
R19BVE9NSUMoInNicyBkb2Vzbid0IHN1cHBvcnQgdG8gc3BsaXQgYSBzY2FsaW5nIGltYWdlLlxu
Iik7CisJCQlyZXR1cm4gLUVJTlZBTDsKKwkJfQorCisJCW1lbWNweShzbGF2ZSwgbWFzdGVyLCBz
aXplb2YoKm1hc3RlcikpOworCisJCS8qIG1hc3RlciBmb3IgbGVmdCBwYXJ0IG9mIGRpc3BsYXks
IHNsYXZlIGZvciB0aGUgcmlnaHQgcGFydCAqLworCQkvKiBzcGxpdCB0aGUgZGlzcF9yZWN0ICov
CisJCW1hc3Rlci0+b3V0X3cgPSBib3VuZGFyeSAtIG1hc3Rlci0+b3V0X3g7CisJCXNsYXZlLT5v
dXRfdyAgPSBkaXNwX2VuZCAtIGJvdW5kYXJ5OworCQlzbGF2ZS0+b3V0X3ggID0gMDsKKworCQlp
ZiAocjkwKSB7CisJCQltYXN0ZXItPmluX2ggPSBtYXN0ZXItPm91dF93OworCQkJc2xhdmUtPmlu
X2ggPSBzbGF2ZS0+b3V0X3c7CisKKwkJCWlmIChmbGlwX2gpCisJCQkJbWFzdGVyLT5pbl95ID0g
c3JjX3kgKyBzcmNfaCAtIG1hc3Rlci0+aW5faDsKKwkJCWVsc2UKKwkJCQlzbGF2ZS0+aW5feSA9
IHNyY195ICsgc3JjX2ggLSBzbGF2ZS0+aW5faDsKKwkJfSBlbHNlIHsKKwkJCW1hc3Rlci0+aW5f
dyA9IG1hc3Rlci0+b3V0X3c7CisJCQlzbGF2ZS0+aW5fdyA9IHNsYXZlLT5vdXRfdzsKKworCQkJ
Lyogb24gZmxpcF9oLCB0aGUgbGVmdCBkaXNwbGF5IGNvbnRlbnQgZnJvbSB0aGUgcmlnaHQtc291
cmNlICovCisJCQlpZiAoZmxpcF9oKQorCQkJCW1hc3Rlci0+aW5feCA9IHNyY193ICsgc3JjX3gg
LSBtYXN0ZXItPmluX3c7CisJCQllbHNlCisJCQkJc2xhdmUtPmluX3ggPSBzcmNfdyArIHNyY194
IC0gc2xhdmUtPmluX3c7CisJCX0KKwl9IGVsc2UgaWYgKG1hc3Rlci0+b3V0X3ggPj0gYm91bmRh
cnkpIHsKKwkJLyogZGlzcF9yZWN0IG9ubHkgbG9jYXRlIGluIHJpZ2h0IHBhcnQsIG1vdmUgdGhl
IGRmbG93IHRvIHNsYXZlICovCisJCW1hc3Rlci0+b3V0X3ggLT0gYm91bmRhcnk7CisJCSpzX2Rm
bG93ID0gbWFzdGVyOworCQkqbV9kZmxvdyA9IE5VTEw7CisJfQorCisJcmV0dXJuIDA7Cit9CisK
K3N0YXRpYyBpbnQKK2tvbWVkYV9zcGxpdF9zYnNfc2xhdmVfZGF0YV9mbG93KHN0cnVjdCBrb21l
ZGFfY3J0Y19zdGF0ZSAqa2NydGNfc3QsCisJCQkJIHN0cnVjdCBrb21lZGFfZGF0YV9mbG93X2Nm
ZyAqc2xhdmUpCit7CisJdTE2IGJvdW5kYXJ5OworCisJcGlwZWxpbmVfY29tcG9zaXRpb25fc2l6
ZShrY3J0Y19zdCwgJmJvdW5kYXJ5LCBOVUxMKTsKKworCWlmIChzbGF2ZS0+b3V0X3ggPCBib3Vu
ZGFyeSkgeworCQlEUk1fREVCVUdfQVRPTUlDKCJTQlMgU2xhdmUgcGxhbmUgaXMgb25seSBhbGxv
d2VkIHRvIGNvbmZpZ3VyZSB0aGUgcmlnaHQgcGFydCBmcmFtZS5cbiIpOworCQlyZXR1cm4gLUVJ
TlZBTDsKKwl9CisKKwkvKiBzbGF2ZS0+ZGlzcF9yZWN0IGxvY2F0ZSBpbiB0aGUgcmlnaHQgcGFy
dCAqLworCXNsYXZlLT5vdXRfeCAtPSBib3VuZGFyeTsKKworCXJldHVybiAwOworfQorCisvKiBP
biBzaWRlIGJ5IHNpZGUgbW9kZSwgVGhlIGZ1bGwgZGlzcGxheSBmcmFtZSB3aWxsIGJlIHNwbGl0
IHRvIHR3byBwYXJ0cworICogKExlZnQvUmlnaHQpLCBhbmQgZWFjaCBwYXJ0IHdpbGwgYmUgaGFu
ZGxlZCBieSBhIHNpbmdsZSBwaXBlbGluZSBzZXBhcmF0ZWx5LAorICogbWFzdGVyIHBpcGVsaW5l
IGZvciBsZWZ0IHBhcnQsIHNsYXZlIGZvciByaWdodC4KKyAqCisgKiBUbyBzaW1wbGlmeSB0aGUg
dXNhZ2UgYW5kIGltcGxlbWVudGF0aW9uLCBrb21lZGEgdXNlIHRoZSBmb2xsb3dpbmcgc2NoZW1l
CisgKiB0byBkbyB0aGUgc2lkZSBieSBzaWRlIHNwbGl0CisgKiAxLiBUaGUgcGxhbmVzIGFsc28g
aGF2ZSBiZWVuIGdyb3VwZWQgaW50byB0d28gY2xhc3NlczoKKyAqICAgIG1hc3Rlci1wbGFuZXMg
YW5kIHNsYXZlLXBsYW5lcy4KKyAqIDIuIFRoZSBtYXN0ZXIgcGxhbmUgY2FuIGRpc3BsYXkgaXRz
IGltYWdlIG9uIGFueSBsb2NhdGlvbiBvZiB0aGUgZmluYWwvZnVsbAorICogICAgZGlzcGxheSBm
cmFtZSwga29tZWRhIHdpbGwgaGVscCB0byBzcGxpdCB0aGUgcGxhbmUgY29uZmlndXJhdGlvbiB0
byB0d28KKyAqICAgIHBhcnRzIGFuZCBmZWQgdGhlbSBpbnRvIG1hc3RlciBhbmQgc2xhdmUgcGlw
ZWxpbmVzLgorICogMy4gVGhlIHNsYXZlIHBsYW5lIG9ubHkgY2FuIHB1dCBpdHMgZGlzcGxheSBy
ZWN0IG9uIHRoZSByaWdodCBwYXJ0IG9mIHRoZQorICogICAgZmluYWwgZGlzcGxheSBmcmFtZSwg
YW5kIGl0cyBkYXRhIGlzIG9ubHkgY2FuIGJlIGZlZCBpbnRvIHRoZSBzbGF2ZQorICogICAgcGlw
ZWxpbmUuCisgKgorICogRnJvbSB0aGUgcGVyc3BlY3RpdmUgb2YgcmVzb3VyY2UgdXNhZ2UgYW5k
IGFzc2lnbm1lbnQ6CisgKiBUaGUgbWFzdGVyIHBsYW5lIGNhbiB1c2UgdGhlIHJlc291cmNlcyBm
cm9tIHRoZSBtYXN0ZXIgcGlwZWxpbmUgYW5kIHNsYXZlCisgKiBwaXBlbGluZSBib3RoLCBidXQg
c2xhdmUgcGxhbmUgb25seSBjYW4gdXNlIHRoZSBzbGF2ZSBwaXBlbGluZSByZXNvdXJjZXMuCisg
KgorICogV2l0aCBzdWNoIHNjaGVtZSwgdGhlIHVzYWdlIG9mIG1hc3RlciBwbGFuZXMgYXJlIHNh
bWUgYXMgdGhlIG5vbmUKKyAqIHNpZGVfYnlfc2lkZSBtb2RlLiB1c2VyIGNhbiBlYXNpbHkgc2tp
cCB0aGUgc2xhdmUgcGxhbmVzIGFuZCBubyBuZWVkIHRvCisgKiBjb25zaWRlciBzaWRlX2J5X3Np
ZGUgZm9yIHRoZW0uCisgKgorICogTk9URTogc2lkZV9ieV9zaWRlIHNwbGl0IGlzIG9jY3VycmVk
IG9uIHBpcGVsaW5lIGxldmVsIHdoaWNoIHNwbGl0IHRoZSBwbGFuZQorICoJIGRhdGEgZmxvdyBp
bnRvIHBpcGVsaW5lcywgYnV0IHRoZSBsYXllciBzcGxpdCBpcyBhIHBpcGVsaW5lCisgKgkgaW50
ZXJuYWwgc3BsaXQgd2hpY2ggc3BsaXRzIHRoZSBkYXRhIGZsb3cgaW50byBwaXBlbGluZSBsYXll
cnMuCisgKgkgU28ga29tZWRhIHN0aWxsIHN1cHBvcnRzIHRvIGFwcGx5IGEgZnVydGhlciBsYXll
ciBzcGxpdCB0byB0aGUgc2JzCisgKgkgc3BsaXQgZGF0YSBmbG93LgorICovCitpbnQga29tZWRh
X2J1aWxkX2xheWVyX3Nic19kYXRhX2Zsb3coc3RydWN0IGtvbWVkYV9sYXllciAqbGF5ZXIsCisJ
CQkJICAgICBzdHJ1Y3Qga29tZWRhX3BsYW5lX3N0YXRlICprcGxhbmVfc3QsCisJCQkJICAgICBz
dHJ1Y3Qga29tZWRhX2NydGNfc3RhdGUgKmtjcnRjX3N0LAorCQkJCSAgICAgc3RydWN0IGtvbWVk
YV9kYXRhX2Zsb3dfY2ZnICpkZmxvdykKK3sKKwlzdHJ1Y3Qga29tZWRhX2NydGMgKmtjcnRjID0g
dG9fa2NydGMoa2NydGNfc3QtPmJhc2UuY3J0Yyk7CisJc3RydWN0IGRybV9wbGFuZSAqcGxhbmUg
PSBrcGxhbmVfc3QtPmJhc2UucGxhbmU7CisJc3RydWN0IGtvbWVkYV9kYXRhX2Zsb3dfY2ZnIHRl
bXAsICptYXN0ZXJfZGZsb3csICpzbGF2ZV9kZmxvdzsKKwlzdHJ1Y3Qga29tZWRhX2xheWVyICpt
YXN0ZXIsICpzbGF2ZTsKKwlib29sIG1hc3Rlcl9wbGFuZSA9IGxheWVyLT5iYXNlLnBpcGVsaW5l
ID09IGtjcnRjLT5tYXN0ZXI7CisJaW50IGVycjsKKworCURSTV9ERUJVR19BVE9NSUMoIlNCUyBw
cmVwYXJlICVzLVtQTEFORTolZDolc106ICVzLlxuIiwKKwkJCSBtYXN0ZXJfcGxhbmUgPyAiTWFz
dGVyIiA6ICJTbGF2ZSIsCisJCQkgcGxhbmUtPmJhc2UuaWQsIHBsYW5lLT5uYW1lLAorCQkJIGtv
bWVkYV9kYXRhX2Zsb3dfbXNnKGRmbG93KSk7CisKKwlpZiAobWFzdGVyX3BsYW5lKSB7CisJCW1h
c3RlciA9IGxheWVyOworCQlzbGF2ZSA9IGxheWVyLT5zYnNfc2xhdmU7CisJCW1hc3Rlcl9kZmxv
dyA9IGRmbG93OworCQlzbGF2ZV9kZmxvdyAgPSAmdGVtcDsKKwkJZXJyID0ga29tZWRhX3NwbGl0
X3Nic19tYXN0ZXJfZGF0YV9mbG93KGtjcnRjX3N0LAorCQkJCSZtYXN0ZXJfZGZsb3csICZzbGF2
ZV9kZmxvdyk7CisJfSBlbHNlIHsKKwkJbWFzdGVyID0gTlVMTDsKKwkJc2xhdmUgPSBsYXllcjsK
KwkJbWFzdGVyX2RmbG93ID0gTlVMTDsKKwkJc2xhdmVfZGZsb3cgPSBkZmxvdzsKKwkJZXJyID0g
a29tZWRhX3NwbGl0X3Nic19zbGF2ZV9kYXRhX2Zsb3coa2NydGNfc3QsIHNsYXZlX2RmbG93KTsK
Kwl9CisKKwlpZiAoZXJyKQorCQlyZXR1cm4gZXJyOworCisJaWYgKG1hc3Rlcl9kZmxvdykgewor
CQlEUk1fREVCVUdfQVRPTUlDKCJTQlMgTWFzdGVyLSVzIGFzc2lnbmVkOiAlc1xuIiwKKwkJCW1h
c3Rlci0+YmFzZS5uYW1lLCBrb21lZGFfZGF0YV9mbG93X21zZyhtYXN0ZXJfZGZsb3cpKTsKKwor
CQlpZiAobWFzdGVyX2RmbG93LT5lbl9zcGxpdCkKKwkJCWVyciA9IGtvbWVkYV9idWlsZF9sYXll
cl9zcGxpdF9kYXRhX2Zsb3cobWFzdGVyLAorCQkJCQlrcGxhbmVfc3QsIGtjcnRjX3N0LCBtYXN0
ZXJfZGZsb3cpOworCQllbHNlCisJCQllcnIgPSBrb21lZGFfYnVpbGRfbGF5ZXJfZGF0YV9mbG93
KG1hc3RlciwKKwkJCQkJa3BsYW5lX3N0LCBrY3J0Y19zdCwgbWFzdGVyX2RmbG93KTsKKworCQlp
ZiAoZXJyKQorCQkJcmV0dXJuIGVycjsKKwl9CisKKwlpZiAoc2xhdmVfZGZsb3cpIHsKKwkJRFJN
X0RFQlVHX0FUT01JQygiU0JTIFNsYXZlLSVzIGFzc2lnbmVkOiAlc1xuIiwKKwkJCXNsYXZlLT5i
YXNlLm5hbWUsIGtvbWVkYV9kYXRhX2Zsb3dfbXNnKHNsYXZlX2RmbG93KSk7CisKKwkJaWYgKHNs
YXZlX2RmbG93LT5lbl9zcGxpdCkKKwkJCWVyciA9IGtvbWVkYV9idWlsZF9sYXllcl9zcGxpdF9k
YXRhX2Zsb3coc2xhdmUsCisJCQkJCWtwbGFuZV9zdCwga2NydGNfc3QsIHNsYXZlX2RmbG93KTsK
KwkJZWxzZQorCQkJZXJyID0ga29tZWRhX2J1aWxkX2xheWVyX2RhdGFfZmxvdyhzbGF2ZSwKKwkJ
CQkJa3BsYW5lX3N0LCBrY3J0Y19zdCwgc2xhdmVfZGZsb3cpOworCQlpZiAoZXJyKQorCQkJcmV0
dXJuIGVycjsKKwl9CisKKwlyZXR1cm4gMDsKK30KKwogLyogd3JpdGViYWNrIGRhdGEgcGF0aDog
Y29tcGl6IC0+IHNjYWxlciAtPiB3Yl9sYXllciAtPiBtZW1vcnkgKi8KIGludCBrb21lZGFfYnVp
bGRfd2JfZGF0YV9mbG93KHN0cnVjdCBrb21lZGFfbGF5ZXIgKndiX2xheWVyLAogCQkJICAgICAg
c3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3QsCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV9wbGFuZS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfcGxhbmUuYwppbmRleCA5OGU5MTVlMzI1ZGQu
LjI2NDRmMDcyNzU3MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tv
bWVkYS9rb21lZGFfcGxhbmUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYXJtL2Rpc3BsYXkva29t
ZWRhL2tvbWVkYV9wbGFuZS5jCkBAIC03Nyw2ICs3Nyw3IEBAIGtvbWVkYV9wbGFuZV9hdG9taWNf
Y2hlY2soc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCiAJc3RydWN0IGtvbWVkYV9wbGFuZV9zdGF0
ZSAqa3BsYW5lX3N0ID0gdG9fa3BsYW5lX3N0KHN0YXRlKTsKIAlzdHJ1Y3Qga29tZWRhX2xheWVy
ICpsYXllciA9IGtwbGFuZS0+bGF5ZXI7CiAJc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRjX3N0
OworCXN0cnVjdCBrb21lZGFfY3J0YyAqa2NydGM7CiAJc3RydWN0IGtvbWVkYV9jcnRjX3N0YXRl
ICprY3J0Y19zdDsKIAlzdHJ1Y3Qga29tZWRhX2RhdGFfZmxvd19jZmcgZGZsb3c7CiAJaW50IGVy
cjsKQEAgLTk0LDEzICs5NSwxNyBAQCBrb21lZGFfcGxhbmVfYXRvbWljX2NoZWNrKHN0cnVjdCBk
cm1fcGxhbmUgKnBsYW5lLAogCWlmICghY3J0Y19zdC0+YWN0aXZlKQogCQlyZXR1cm4gMDsKIAor
CWtjcnRjID0gdG9fa2NydGMoY3J0Y19zdC0+Y3J0Yyk7CiAJa2NydGNfc3QgPSB0b19rY3J0Y19z
dChjcnRjX3N0KTsKIAogCWVyciA9IGtvbWVkYV9wbGFuZV9pbml0X2RhdGFfZmxvdyhzdGF0ZSwg
a2NydGNfc3QsICZkZmxvdyk7CiAJaWYgKGVycikKIAkJcmV0dXJuIGVycjsKIAotCWlmIChkZmxv
dy5lbl9zcGxpdCkKKwlpZiAoa2NydGMtPnNpZGVfYnlfc2lkZSkKKwkJZXJyID0ga29tZWRhX2J1
aWxkX2xheWVyX3Nic19kYXRhX2Zsb3cobGF5ZXIsCisJCQkJa3BsYW5lX3N0LCBrY3J0Y19zdCwg
JmRmbG93KTsKKwllbHNlIGlmIChkZmxvdy5lbl9zcGxpdCkKIAkJZXJyID0ga29tZWRhX2J1aWxk
X2xheWVyX3NwbGl0X2RhdGFfZmxvdyhsYXllciwKIAkJCQlrcGxhbmVfc3QsIGtjcnRjX3N0LCAm
ZGZsb3cpOwogCWVsc2UKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlz
dGluZm8vZHJpLWRldmVs
