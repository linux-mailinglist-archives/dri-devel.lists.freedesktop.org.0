Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 87F55D78B5
	for <lists+dri-devel@lfdr.de>; Tue, 15 Oct 2019 16:35:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 914C26E82E;
	Tue, 15 Oct 2019 14:35:53 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 203866E82D
 for <dri-devel@lists.freedesktop.org>; Tue, 15 Oct 2019 14:35:49 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id v8so24193460wrt.2
 for <dri-devel@lists.freedesktop.org>; Tue, 15 Oct 2019 07:35:49 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=MYQpoMFUcXu3ABoddvpPyKW+Nw7qkyPAu+f3Ok9rxto=;
 b=CHgAq+k4kpIUE/nR9xdYWPjkTsk2ZUmfXeg8kpQtpQXH2Vx9X9BBr4sT3J6GM7A8qe
 CHU0LRA+KsfJHwEJUyMZRNym8uDNHp8d08hAw//Ik4om57QzgaGtn4rqobfGGwv2CwOW
 8+tUOuUr7u2yAQg8FYz0XOXQ+iHSaomJhYqJuhYn9vNWrJGVfB6Z6anGhyXaUL37Ie4M
 XQ0MtMz+8X/mvmMY//0VY0S7ve6fNjcfHXPoq3AtdQCAa3bEQtUMxQSi8QgC3DSjbnEg
 eGEWryhU5EkM1sUEC1GcFAfnNfJPubrV2nhNChCJo+uzr23PNbhab1KTWBHm/I+EN0ii
 S/QQ==
X-Gm-Message-State: APjAAAVOBSLRwAVjZjuGFGiEH5ddof97W/XryNN6TmHh9fWQCW6FWoeH
 t+wDnvyklW40e+qi0D0jrS+d0b53
X-Google-Smtp-Source: APXvYqwdpJCmx0Cr8YBjWWB9wOZI0f3HQ1zDJ/aI/x9vKJc17LNiBft8f9HuL8IuSCjRHv1G+wxakA==
X-Received: by 2002:a5d:658e:: with SMTP id q14mr33663959wru.380.1571150146500; 
 Tue, 15 Oct 2019 07:35:46 -0700 (PDT)
Received: from localhost (p2E5BE2CE.dip0.t-ipconnect.de. [46.91.226.206])
 by smtp.gmail.com with ESMTPSA id r13sm32550563wrn.0.2019.10.15.07.35.45
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 15 Oct 2019 07:35:45 -0700 (PDT)
From: Thierry Reding <thierry.reding@gmail.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 14/15] drm/rockchip: Avoid drm_dp_link helpers
Date: Tue, 15 Oct 2019 16:35:08 +0200
Message-Id: <20191015143509.1104985-15-thierry.reding@gmail.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191015143509.1104985-1-thierry.reding@gmail.com>
References: <20191015143509.1104985-1-thierry.reding@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=MYQpoMFUcXu3ABoddvpPyKW+Nw7qkyPAu+f3Ok9rxto=;
 b=Y27b7MVusRI0BhySA0KvjtL6vAcHSPIXL813I9ietOXXbsM1GTkzUh+CXV1W7cpdND
 paWbo1EC2prZrMbS9FMbGOUPez3+UmQ1o9jQsDxR2tGQmFaHUAReOLd0tINblwA/oXGQ
 Vg4zO4bQMhcNzAL9yCjMW/W5yNmPB1QvFrVEzXOTzLAN4DBd7UpqOhZuj2HhuRPsvDyQ
 G/RdKKxQDVUvB3WAR3zmANHdK37bLeF+vJQnubQEz0gIxBTH4qnVlzqYC3pk9+iAIGK8
 VSP3iqS+Z2EdQDkWS2bLd5WqZtQw27Bk6Dsn3zIG+2YwvUJjYK29BNbFzXRsYdYz8/fU
 Wbnw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVGhpZXJyeSBSZWRpbmcgPHRyZWRpbmdAbnZpZGlhLmNvbT4KCkR1cmluZyB0aGUgZGlz
Y3Vzc2lvbiBvZiBwYXRjaGVzIHRoYXQgZW5oYW5jZSB0aGUgZHJtX2RwX2xpbmsgaGVscGVycyBp
dAp3YXMgY29uY2x1ZGVkIHRoYXQgdGhlc2UgaGVscGVycyBhcmVuJ3QgdmVyeSB1c2VmdWwgdG8g
YmVnaW4gd2l0aC4gU3RhcnQKcHVzaGluZyB0aGUgZXF1aXZhbGVudCBjb2RlIGludG8gaW5kaXZp
ZHVhbCBkcml2ZXJzIHRvIHVsdGltYXRlbHkgcmVtb3ZlCnRoZW0uCgpTaWduZWQtb2ZmLWJ5OiBU
aGllcnJ5IFJlZGluZyA8dHJlZGluZ0BudmlkaWEuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9y
b2NrY2hpcC9jZG4tZHAtY29yZS5jIHwgMTIgKysrKysrLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0v
cm9ja2NoaXAvY2RuLWRwLWNvcmUuaCB8ICAzICsrLQogZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlw
L2Nkbi1kcC1yZWcuYyAgfCAxOSArKysrKysrKystLS0tLS0tLS0tCiAzIGZpbGVzIGNoYW5nZWQs
IDE3IGluc2VydGlvbnMoKyksIDE3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9yb2NrY2hpcC9jZG4tZHAtY29yZS5jIGIvZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlw
L2Nkbi1kcC1jb3JlLmMKaW5kZXggZDUwNWVhN2Q1Mzg0Li5lZWQ1OTRiZDM4ZDMgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9jZG4tZHAtY29yZS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9yb2NrY2hpcC9jZG4tZHAtY29yZS5jCkBAIC00NzcsOCArNDc3LDggQEAgc3RhdGlj
IGludCBjZG5fZHBfZGlzYWJsZShzdHJ1Y3QgY2RuX2RwX2RldmljZSAqZHApCiAJY2RuX2RwX3Nl
dF9maXJtd2FyZV9hY3RpdmUoZHAsIGZhbHNlKTsKIAljZG5fZHBfY2xrX2Rpc2FibGUoZHApOwog
CWRwLT5hY3RpdmUgPSBmYWxzZTsKLQlkcC0+bGluay5yYXRlID0gMDsKLQlkcC0+bGluay5udW1f
bGFuZXMgPSAwOworCWRwLT5tYXhfbGFuZXMgPSAwOworCWRwLT5tYXhfcmF0ZSA9IDA7CiAJaWYg
KCFkcC0+Y29ubmVjdGVkKSB7CiAJCWtmcmVlKGRwLT5lZGlkKTsKIAkJZHAtPmVkaWQgPSBOVUxM
OwpAQCAtNTcwLDcgKzU3MCw3IEBAIHN0YXRpYyBib29sIGNkbl9kcF9jaGVja19saW5rX3N0YXR1
cyhzdHJ1Y3QgY2RuX2RwX2RldmljZSAqZHApCiAJc3RydWN0IGNkbl9kcF9wb3J0ICpwb3J0ID0g
Y2RuX2RwX2Nvbm5lY3RlZF9wb3J0KGRwKTsKIAl1OCBzaW5rX2xhbmVzID0gZHJtX2RwX21heF9s
YW5lX2NvdW50KGRwLT5kcGNkKTsKIAotCWlmICghcG9ydCB8fCAhZHAtPmxpbmsucmF0ZSB8fCAh
ZHAtPmxpbmsubnVtX2xhbmVzKQorCWlmICghcG9ydCB8fCAhZHAtPm1heF9yYXRlIHx8ICFkcC0+
bWF4X2xhbmVzKQogCQlyZXR1cm4gZmFsc2U7CiAKIAlpZiAoY2RuX2RwX2RwY2RfcmVhZChkcCwg
RFBfTEFORTBfMV9TVEFUVVMsIGxpbmtfc3RhdHVzLApAQCAtOTUyLDggKzk1Miw4IEBAIHN0YXRp
YyB2b2lkIGNkbl9kcF9wZF9ldmVudF93b3JrKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKIAog
CS8qIEVuYWJsZWQgYW5kIGNvbm5lY3RlZCB3aXRoIGEgc2luaywgcmUtdHJhaW4gaWYgcmVxdWVz
dGVkICovCiAJfSBlbHNlIGlmICghY2RuX2RwX2NoZWNrX2xpbmtfc3RhdHVzKGRwKSkgewotCQl1
bnNpZ25lZCBpbnQgcmF0ZSA9IGRwLT5saW5rLnJhdGU7Ci0JCXVuc2lnbmVkIGludCBsYW5lcyA9
IGRwLT5saW5rLm51bV9sYW5lczsKKwkJdW5zaWduZWQgaW50IHJhdGUgPSBkcC0+bWF4X3JhdGU7
CisJCXVuc2lnbmVkIGludCBsYW5lcyA9IGRwLT5tYXhfbGFuZXM7CiAJCXN0cnVjdCBkcm1fZGlz
cGxheV9tb2RlICptb2RlID0gJmRwLT5tb2RlOwogCiAJCURSTV9ERVZfSU5GTyhkcC0+ZGV2LCAi
Q29ubmVjdGVkIHdpdGggc2luay4gUmUtdHJhaW4gbGlua1xuIik7CkBAIC05NjYsNyArOTY2LDcg
QEAgc3RhdGljIHZvaWQgY2RuX2RwX3BkX2V2ZW50X3dvcmsoc3RydWN0IHdvcmtfc3RydWN0ICp3
b3JrKQogCiAJCS8qIElmIHRyYWluaW5nIHJlc3VsdCBpcyBjaGFuZ2VkLCB1cGRhdGUgdGhlIHZp
ZGVvIGNvbmZpZyAqLwogCQlpZiAobW9kZS0+Y2xvY2sgJiYKLQkJICAgIChyYXRlICE9IGRwLT5s
aW5rLnJhdGUgfHwgbGFuZXMgIT0gZHAtPmxpbmsubnVtX2xhbmVzKSkgeworCQkgICAgKHJhdGUg
IT0gZHAtPm1heF9yYXRlIHx8IGxhbmVzICE9IGRwLT5tYXhfbGFuZXMpKSB7CiAJCQlyZXQgPSBj
ZG5fZHBfY29uZmlnX3ZpZGVvKGRwKTsKIAkJCWlmIChyZXQpIHsKIAkJCQlkcC0+Y29ubmVjdGVk
ID0gZmFsc2U7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvY2RuLWRwLWNv
cmUuaCBiL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9jZG4tZHAtY29yZS5oCmluZGV4IGI4NWVh
ODllYjYwYi4uODNjNDU4NjY2NWI0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcm9ja2No
aXAvY2RuLWRwLWNvcmUuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvY2RuLWRwLWNv
cmUuaApAQCAtOTIsOSArOTIsMTAgQEAgc3RydWN0IGNkbl9kcF9kZXZpY2UgewogCXN0cnVjdCBy
ZXNldF9jb250cm9sICpjb3JlX3JzdDsKIAlzdHJ1Y3QgYXVkaW9faW5mbyBhdWRpb19pbmZvOwog
CXN0cnVjdCB2aWRlb19pbmZvIHZpZGVvX2luZm87Ci0Jc3RydWN0IGRybV9kcF9saW5rIGxpbms7
CiAJc3RydWN0IGNkbl9kcF9wb3J0ICpwb3J0W01BWF9QSFldOwogCXU4IHBvcnRzOworCXU4IG1h
eF9sYW5lczsKKwl1OCBtYXhfcmF0ZTsKIAl1OCBsYW5lczsKIAlpbnQgYWN0aXZlX3BvcnQ7CiAK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9jZG4tZHAtcmVnLmMgYi9kcml2
ZXJzL2dwdS9kcm0vcm9ja2NoaXAvY2RuLWRwLXJlZy5jCmluZGV4IDA3N2M4NzAyMTkwOC4uNzM2
MWMwN2NiNGE3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvY2RuLWRwLXJl
Zy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9jZG4tZHAtcmVnLmMKQEAgLTUzNSw4
ICs1MzUsOCBAQCBzdGF0aWMgaW50IGNkbl9kcF9nZXRfdHJhaW5pbmdfc3RhdHVzKHN0cnVjdCBj
ZG5fZHBfZGV2aWNlICpkcCkKIAlpZiAocmV0KQogCQlnb3RvIGVycl9nZXRfdHJhaW5pbmdfc3Rh
dHVzOwogCi0JZHAtPmxpbmsucmF0ZSA9IGRybV9kcF9id19jb2RlX3RvX2xpbmtfcmF0ZShzdGF0
dXNbMF0pOwotCWRwLT5saW5rLm51bV9sYW5lcyA9IHN0YXR1c1sxXTsKKwlkcC0+bWF4X3JhdGUg
PSBkcm1fZHBfYndfY29kZV90b19saW5rX3JhdGUoc3RhdHVzWzBdKTsKKwlkcC0+bWF4X2xhbmVz
ID0gc3RhdHVzWzFdOwogCiBlcnJfZ2V0X3RyYWluaW5nX3N0YXR1czoKIAlpZiAocmV0KQpAQCAt
NTYwLDggKzU2MCw4IEBAIGludCBjZG5fZHBfdHJhaW5fbGluayhzdHJ1Y3QgY2RuX2RwX2Rldmlj
ZSAqZHApCiAJCXJldHVybiByZXQ7CiAJfQogCi0JRFJNX0RFVl9ERUJVR19LTVMoZHAtPmRldiwg
InJhdGU6MHgleCwgbGFuZXM6JWRcbiIsIGRwLT5saW5rLnJhdGUsCi0JCQkgIGRwLT5saW5rLm51
bV9sYW5lcyk7CisJRFJNX0RFVl9ERUJVR19LTVMoZHAtPmRldiwgInJhdGU6MHgleCwgbGFuZXM6
JWRcbiIsIGRwLT5tYXhfcmF0ZSwKKwkJCSAgZHAtPm1heF9sYW5lcyk7CiAJcmV0dXJuIHJldDsK
IH0KIApAQCAtNjM5LDcgKzYzOSw3IEBAIGludCBjZG5fZHBfY29uZmlnX3ZpZGVvKHN0cnVjdCBj
ZG5fZHBfZGV2aWNlICpkcCkKIAliaXRfcGVyX3BpeCA9ICh2aWRlby0+Y29sb3JfZm10ID09IFlD
QkNSXzRfMl8yKSA/CiAJCSAgICAgICh2aWRlby0+Y29sb3JfZGVwdGggKiAyKSA6ICh2aWRlby0+
Y29sb3JfZGVwdGggKiAzKTsKIAotCWxpbmtfcmF0ZSA9IGRwLT5saW5rLnJhdGUgLyAxMDAwOwor
CWxpbmtfcmF0ZSA9IGRwLT5tYXhfcmF0ZSAvIDEwMDA7CiAKIAlyZXQgPSBjZG5fZHBfcmVnX3dy
aXRlKGRwLCBCTkRfSFNZTkMyVlNZTkMsIFZJRl9CWVBBU1NfSU5URVJMQUNFKTsKIAlpZiAocmV0
KQpAQCAtNjU5LDE0ICs2NTksMTMgQEAgaW50IGNkbl9kcF9jb25maWdfdmlkZW8oc3RydWN0IGNk
bl9kcF9kZXZpY2UgKmRwKQogCWRvIHsKIAkJdHVfc2l6ZV9yZWcgKz0gMjsKIAkJc3ltYm9sID0g
dHVfc2l6ZV9yZWcgKiBtb2RlLT5jbG9jayAqIGJpdF9wZXJfcGl4OwotCQlkb19kaXYoc3ltYm9s
LCBkcC0+bGluay5udW1fbGFuZXMgKiBsaW5rX3JhdGUgKiA4KTsKKwkJZG9fZGl2KHN5bWJvbCwg
ZHAtPm1heF9sYW5lcyAqIGxpbmtfcmF0ZSAqIDgpOwogCQlyZW0gPSBkb19kaXYoc3ltYm9sLCAx
MDAwKTsKIAkJaWYgKHR1X3NpemVfcmVnID4gNjQpIHsKIAkJCXJldCA9IC1FSU5WQUw7CiAJCQlE
Uk1fREVWX0VSUk9SKGRwLT5kZXYsCiAJCQkJICAgICAgInR1IGVycm9yLCBjbGs6JWQsIGxhbmVz
OiVkLCByYXRlOiVkXG4iLAotCQkJCSAgICAgIG1vZGUtPmNsb2NrLCBkcC0+bGluay5udW1fbGFu
ZXMsCi0JCQkJICAgICAgbGlua19yYXRlKTsKKwkJCQkgICAgICBtb2RlLT5jbG9jaywgZHAtPm1h
eF9sYW5lcywgbGlua19yYXRlKTsKIAkJCWdvdG8gZXJyX2NvbmZpZ192aWRlbzsKIAkJfQogCX0g
d2hpbGUgKChzeW1ib2wgPD0gMSkgfHwgKHR1X3NpemVfcmVnIC0gc3ltYm9sIDwgNCkgfHwKQEAg
LTY4MCw3ICs2NzksNyBAQCBpbnQgY2RuX2RwX2NvbmZpZ192aWRlbyhzdHJ1Y3QgY2RuX2RwX2Rl
dmljZSAqZHApCiAKIAkvKiBzZXQgdGhlIEZJRk8gQnVmZmVyIHNpemUgKi8KIAl2YWwgPSBkaXZf
dTY0KG1vZGUtPmNsb2NrICogKHN5bWJvbCArIDEpLCAxMDAwKSArIGxpbmtfcmF0ZTsKLQl2YWwg
Lz0gKGRwLT5saW5rLm51bV9sYW5lcyAqIGxpbmtfcmF0ZSk7CisJdmFsIC89IChkcC0+bWF4X2xh
bmVzICogbGlua19yYXRlKTsKIAl2YWwgPSBkaXZfdTY0KDggKiAoc3ltYm9sICsgMSksIGJpdF9w
ZXJfcGl4KSAtIHZhbDsKIAl2YWwgKz0gMjsKIAlyZXQgPSBjZG5fZHBfcmVnX3dyaXRlKGRwLCBE
UF9WQ19UQUJMRSgxNSksIHZhbCk7CkBAIC04MzMsNyArODMyLDcgQEAgc3RhdGljIHZvaWQgY2Ru
X2RwX2F1ZGlvX2NvbmZpZ19pMnMoc3RydWN0IGNkbl9kcF9kZXZpY2UgKmRwLAogCXUzMiB2YWw7
CiAKIAlpZiAoYXVkaW8tPmNoYW5uZWxzID09IDIpIHsKLQkJaWYgKGRwLT5saW5rLm51bV9sYW5l
cyA9PSAxKQorCQlpZiAoZHAtPm1heF9sYW5lcyA9PSAxKQogCQkJc3ViX3Bja3RfbnVtID0gMjsK
IAkJZWxzZQogCQkJc3ViX3Bja3RfbnVtID0gNDsKLS0gCjIuMjMuMAoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApk
cmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
