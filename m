Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 949FB2A0DC0
	for <lists+dri-devel@lfdr.de>; Fri, 30 Oct 2020 19:47:39 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 15FDB6EE00;
	Fri, 30 Oct 2020 18:47:35 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x344.google.com (mail-wm1-x344.google.com
 [IPv6:2a00:1450:4864:20::344])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A423D6E9E8;
 Fri, 30 Oct 2020 18:47:33 +0000 (UTC)
Received: by mail-wm1-x344.google.com with SMTP id w23so3766257wmi.4;
 Fri, 30 Oct 2020 11:47:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=gel/quYpTVCdWOz3HKb9r5wPIVZ0Yf7hfm/3ST2q1Wg=;
 b=sywanlobqVgihYxFRzLNhboQwtZITbERIkN9jN408EGH6aPril5/dzbfA02oFeSMG9
 5gr6gFnFhgOQ2IzRMxX2FlH7qoW6TPVS1zPEMaC5p3LotmOU2ehuN1eIPvopF8fEbTzv
 EN0XvfGOFtg3q17AcMKHRXI3asQ/g7+GZVwKGZ2QKT3a5iXJ+BcU49wfXV2L4vdTR0lQ
 fR2/4YCDUOthX/XuerPjEzzkPD6QE1HITN/RHGAo+7p3enAFssgs8Sy24M4BEUU5dhXD
 ORO98ikZ2Ls4cN/RjQfi6Gv2A7/zwlroWlvqwR/zl4plVQ8EVXLG42rPTNvcvx6YAgat
 374Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=gel/quYpTVCdWOz3HKb9r5wPIVZ0Yf7hfm/3ST2q1Wg=;
 b=S1YFaLcAOZ2wRRADRVcIFx6fMvV2ONnizvNoKe/sWMekjUiID/a08TbJZQ9EiSn/cf
 QYtr6svCxmeueVCzt1pc78DpxWvbYh/Ag6JmzTKO0hlUG+3dExtYkrMVFMrgax2XRbJu
 h/jBDL+kpigK/kGMvkzqV/71aQpGXpH+VpAIwdbz+Umn5i83/VjoiBY118Vd9qkrLSoQ
 YOKL7lNd8JxOXsPgz9ztvt6OSq+err+mpqXW2M+vQ1AkuAdDYwyIFfeGvgPYezmzKzC3
 4ygthepNCJpqwR6K2FngMDsjpLdlbVkfm4OEx3OGmUWZYip+4Z8MRprHaAtSWV/qCsXF
 Je6g==
X-Gm-Message-State: AOAM530kMOyAyo4SHG1rXiOxOEhmJrbKCvr7g79byH2xIbCo3HAUD9Lh
 hY2cI7oE3+MV8NEe0bDGrg5p2XOCDboezzC7jSNUaRKw1/RIGQ==
X-Google-Smtp-Source: ABdhPJzgdw+pHkiK/S0yvAS8nolzJnZWeyev+yMAZEMz6c8r2sa7Hr3AhKOcJ1c8dQjdWLvEbQAHmjRywheag4dpRxk=
X-Received: by 2002:a05:600c:25a:: with SMTP id
 26mr4264872wmj.39.1604083652395; 
 Fri, 30 Oct 2020 11:47:32 -0700 (PDT)
MIME-Version: 1.0
References: <20201030101104.2503-1-daniel.vetter@ffwll.ch>
 <20201030101104.2503-3-daniel.vetter@ffwll.ch>
In-Reply-To: <20201030101104.2503-3-daniel.vetter@ffwll.ch>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Fri, 30 Oct 2020 14:47:21 -0400
Message-ID: <CADnq5_OFVymqfub0mczoaKcEZa=uyaX_WtTYBUgn=K4_a3Fw5Q@mail.gmail.com>
Subject: Re: [PATCH 3/5] drm/amdgpu: Paper over the drm_driver mangling for
 virt
To: Daniel Vetter <daniel.vetter@ffwll.ch>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Evan Quan <evan.quan@amd.com>, chen gong <curry.gong@amd.com>,
 Bokun Zhang <Bokun.Zhang@amd.com>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Wenhui Sheng <Wenhui.Sheng@amd.com>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>,
 Monk Liu <Monk.Liu@amd.com>, Luben Tuikov <luben.tuikov@amd.com>,
 "Stanley.Yang" <Stanley.Yang@amd.com>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 Thomas Zimmermann <tzimmermann@suse.de>,
 Alex Deucher <alexander.deucher@amd.com>,
 Daniel Vetter <daniel.vetter@intel.com>, Yintian Tao <yttao@amd.com>,
 Hawking Zhang <Hawking.Zhang@amd.com>, Felix Kuehling <Felix.Kuehling@amd.com>,
 Dennis Li <Dennis.Li@amd.com>, shaoyunl <shaoyun.liu@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBPY3QgMzAsIDIwMjAgYXQgNjoxMSBBTSBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0
dGVyQGZmd2xsLmNoPiB3cm90ZToKPgo+IFByZXAgd29yayB0byBtYWtlIGRybV9kZXZpY2UtPmRy
aXZlciBjb25zdC4KPgo+IFNpZ25lZC1vZmYtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0
ZXJAZmZ3bGwuY2g+Cj4gQ2M6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJAYW1kLmNv
bT4KPiBDYzogIkNocmlzdGlhbiBLw7ZuaWciIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Cj4g
Q2M6IEV2YW4gUXVhbiA8ZXZhbi5xdWFuQGFtZC5jb20+Cj4gQ2M6IEZlbGl4IEt1ZWhsaW5nIDxG
ZWxpeC5LdWVobGluZ0BhbWQuY29tPgo+IENjOiBIYXdraW5nIFpoYW5nIDxIYXdraW5nLlpoYW5n
QGFtZC5jb20+Cj4gQ2M6IEFuZHJleSBHcm9kem92c2t5IDxhbmRyZXkuZ3JvZHpvdnNreUBhbWQu
Y29tPgo+IENjOiBMdWJlbiBUdWlrb3YgPGx1YmVuLnR1aWtvdkBhbWQuY29tPgo+IENjOiBUaG9t
YXMgWmltbWVybWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4KPiBDYzogTW9uayBMaXUgPE1vbmsu
TGl1QGFtZC5jb20+Cj4gQ2M6IFlpbnRpYW4gVGFvIDx5dHRhb0BhbWQuY29tPgo+IENjOiBEZW5u
aXMgTGkgPERlbm5pcy5MaUBhbWQuY29tPgo+IENjOiBzaGFveXVubCA8c2hhb3l1bi5saXVAYW1k
LmNvbT4KPiBDYzogQm9rdW4gWmhhbmcgPEJva3VuLlpoYW5nQGFtZC5jb20+Cj4gQ2M6ICJTdGFu
bGV5LllhbmciIDxTdGFubGV5LllhbmdAYW1kLmNvbT4KPiBDYzogV2VuaHVpIFNoZW5nIDxXZW5o
dWkuU2hlbmdAYW1kLmNvbT4KPiBDYzogY2hlbiBnb25nIDxjdXJyeS5nb25nQGFtZC5jb20+Cj4g
U2lnbmVkLW9mZi1ieTogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBpbnRlbC5jb20+Cj4g
LS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYyAgfCAgOCArKysr
LS0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmlydC5jIHwgMTIgKysr
KysrKysrKystCj4gIDIgZmlsZXMgY2hhbmdlZCwgMTUgaW5zZXJ0aW9ucygrKSwgNSBkZWxldGlv
bnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
ZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMKPiBpbmRleCAw
MjRjM2I3MGIxYWEuLjNkMzM3ZjEzYWU0ZSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfZHJ2LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfZHJ2LmMKPiBAQCAtMTA5Myw3ICsxMDkzLDcgQEAgc3RhdGljIGNvbnN0IHN0cnVj
dCBwY2lfZGV2aWNlX2lkIHBjaWlkbGlzdFtdID0gewo+Cj4gIE1PRFVMRV9ERVZJQ0VfVEFCTEUo
cGNpLCBwY2lpZGxpc3QpOwo+Cj4gLXN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBrbXNfZHJpdmVy
Owo+ICtzdHJ1Y3QgZHJtX2RyaXZlciBhbWRncHVfa21zX2RyaXZlcjsKPgo+ICBzdGF0aWMgaW50
IGFtZGdwdV9wY2lfcHJvYmUoc3RydWN0IHBjaV9kZXYgKnBkZXYsCj4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBwY2lfZGV2aWNlX2lkICplbnQpCj4gQEAgLTExNjQs
NyArMTE2NCw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3BjaV9wcm9iZShzdHJ1Y3QgcGNpX2RldiAq
cGRldiwKPiAgICAgICAgIGlmIChyZXQpCj4gICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4K
PiAtICAgICAgIGFkZXYgPSBkZXZtX2RybV9kZXZfYWxsb2MoJnBkZXYtPmRldiwgJmttc19kcml2
ZXIsIHR5cGVvZigqYWRldiksIGRkZXYpOwo+ICsgICAgICAgYWRldiA9IGRldm1fZHJtX2Rldl9h
bGxvYygmcGRldi0+ZGV2LCAmYW1kZ3B1X2ttc19kcml2ZXIsIHR5cGVvZigqYWRldiksIGRkZXYp
Owo+ICAgICAgICAgaWYgKElTX0VSUihhZGV2KSkKPiAgICAgICAgICAgICAgICAgcmV0dXJuIFBU
Ul9FUlIoYWRldik7Cj4KPiBAQCAtMTUwOCw3ICsxNTA4LDcgQEAgaW50IGFtZGdwdV9maWxlX3Rv
X2Zwcml2KHN0cnVjdCBmaWxlICpmaWxwLCBzdHJ1Y3QgYW1kZ3B1X2Zwcml2ICoqZnByaXYpCj4g
ICAgICAgICByZXR1cm4gMDsKPiAgfQo+Cj4gLXN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBrbXNf
ZHJpdmVyID0gewo+ICtzdHJ1Y3QgZHJtX2RyaXZlciBhbWRncHVfa21zX2RyaXZlciA9IHsKPiAg
ICAgICAgIC5kcml2ZXJfZmVhdHVyZXMgPQo+ICAgICAgICAgICAgIERSSVZFUl9BVE9NSUMgfAo+
ICAgICAgICAgICAgIERSSVZFUl9HRU0gfAo+IEBAIC0xNTcxLDcgKzE1NzEsNyBAQCBzdGF0aWMg
aW50IF9faW5pdCBhbWRncHVfaW5pdCh2b2lkKQo+ICAgICAgICAgICAgICAgICBnb3RvIGVycm9y
X2ZlbmNlOwo+Cj4gICAgICAgICBEUk1fSU5GTygiYW1kZ3B1IGtlcm5lbCBtb2Rlc2V0dGluZyBl
bmFibGVkLlxuIik7Cj4gLSAgICAgICBrbXNfZHJpdmVyLm51bV9pb2N0bHMgPSBhbWRncHVfbWF4
X2ttc19pb2N0bDsKPiArICAgICAgIGFtZGdwdV9rbXNfZHJpdmVyLm51bV9pb2N0bHMgPSBhbWRn
cHVfbWF4X2ttc19pb2N0bDsKPiAgICAgICAgIGFtZGdwdV9yZWdpc3Rlcl9hdHB4X2hhbmRsZXIo
KTsKPgo+ICAgICAgICAgLyogSWdub3JlIEtGRCBpbml0IGZhaWx1cmVzLiBOb3JtYWwgd2hlbiBD
T05GSUdfSFNBX0FNRCBpcyBub3Qgc2V0LiAqLwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdmlydC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3ZpcnQuYwo+IGluZGV4IGQwYWVhNWUzOTUzMS4uZGRlNGM0NDljMjg0IDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92aXJ0LmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdmlydC5jCj4gQEAgLTQ1LDEzICs0NSwy
MyBAQCBib29sIGFtZGdwdV92aXJ0X21taW9fYmxvY2tlZChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldikKPiAgICAgICAgIHJldHVybiBSUkVHMzJfTk9fS0lRKDB4YzA0MCkgPT0gMHhmZmZmZmZm
ZjsKPiAgfQo+Cj4gK2V4dGVybiBzdHJ1Y3QgZHJtX2RyaXZlciBhbWRncHVfa21zX2RyaXZlcjsK
PiArCj4gIHZvaWQgYW1kZ3B1X3ZpcnRfaW5pdF9zZXR0aW5nKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2KQo+ICB7Cj4gICAgICAgICAvKiBlbmFibGUgdmlydHVhbCBkaXNwbGF5ICovCj4gICAg
ICAgICBpZiAoYWRldi0+bW9kZV9pbmZvLm51bV9jcnRjID09IDApCj4gICAgICAgICAgICAgICAg
IGFkZXYtPm1vZGVfaW5mby5udW1fY3J0YyA9IDE7Cj4gICAgICAgICBhZGV2LT5lbmFibGVfdmly
dHVhbF9kaXNwbGF5ID0gdHJ1ZTsKPiAtICAgICAgIGFkZXZfdG9fZHJtKGFkZXYpLT5kcml2ZXIt
PmRyaXZlcl9mZWF0dXJlcyAmPSB+RFJJVkVSX0FUT01JQzsKPiArCj4gKyAgICAgICAvKgo+ICsg
ICAgICAgICogRklYTUU6IEVpdGhlciBtYWtlIHZpcnQgc3VwcG9ydCBhdG9taWMgb3IgbWFrZSBz
dXJlIHlvdSBoYXZlIHR3bwo+ICsgICAgICAgICogZHJtX2RyaXZlciBzdHJ1Y3RzLCB0aGVzZSBr
aW5kIG9mIHRyaWNrcyBhcmUgb25seSBvayB3aGVuIHRoZXJlJ3MKPiArICAgICAgICAqIGd1YXJh
bnRlZWQgb25seSBhIHNpbmdsZSBkZXZpY2UgcGVyIHN5c3RlbS4gVGhpcyBzaG91bGQgYWxzbyBi
ZSBkb25lCj4gKyAgICAgICAgKiBiZWZvcmUgc3RydWN0IGRybV9kZXZpY2UgaXMgaW5pdGlhbGl6
ZWQuCj4gKyAgICAgICAgKi8KPiArICAgICAgIGFtZGdwdV9rbXNfZHJpdmVyLmRyaXZlcl9mZWF0
dXJlcyAmPSB+RFJJVkVSX0FUT01JQzsKClRoZXJlIGlzIGFkZGl0aW9uYWwgRFJJVkVSX0FUT01J
QyBpbiBhbWRncHVfcGNpX3Byb2JlKCkgZm9yIG9sZGVyCmNoaXBzIHdpdGhvdXQgYXRvbWljIHN1
cHBvcnQuCgpBbGV4Cgo+ICsKPiAgICAgICAgIGFkZXYtPmNnX2ZsYWdzID0gMDsKPiAgICAgICAg
IGFkZXYtPnBnX2ZsYWdzID0gMDsKPiAgfQo+IC0tCj4gMi4yOC4wCj4KPiBfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+IGRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKPiBkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmkt
ZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
