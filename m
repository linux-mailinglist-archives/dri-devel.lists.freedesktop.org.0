Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E916BA132B
	for <lists+dri-devel@lfdr.de>; Thu, 29 Aug 2019 10:01:34 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1CD9489498;
	Thu, 29 Aug 2019 08:01:03 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from relmlie5.idc.renesas.com (relmlor1.renesas.com
 [210.160.252.171])
 by gabe.freedesktop.org (Postfix) with ESMTP id 154F6894DD
 for <dri-devel@lists.freedesktop.org>; Wed, 28 Aug 2019 18:37:08 +0000 (UTC)
X-IronPort-AV: E=Sophos;i="5.64,442,1559487600"; d="scan'208";a="25166341"
Received: from unknown (HELO relmlir5.idc.renesas.com) ([10.200.68.151])
 by relmlie5.idc.renesas.com with ESMTP; 29 Aug 2019 03:37:08 +0900
Received: from fabrizio-dev.ree.adwin.renesas.com (unknown [10.226.36.196])
 by relmlir5.idc.renesas.com (Postfix) with ESMTP id AFEA04004953;
 Thu, 29 Aug 2019 03:37:05 +0900 (JST)
From: Fabrizio Castro <fabrizio.castro@bp.renesas.com>
To: Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>
Subject: [PATCH v3 4/8] drm: rcar-du: lvds: Add dual-LVDS panels support
Date: Wed, 28 Aug 2019 19:36:38 +0100
Message-Id: <1567017402-5895-5-git-send-email-fabrizio.castro@bp.renesas.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1567017402-5895-1-git-send-email-fabrizio.castro@bp.renesas.com>
References: <1567017402-5895-1-git-send-email-fabrizio.castro@bp.renesas.com>
X-Mailman-Approved-At: Thu, 29 Aug 2019 08:01:00 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Fabrizio Castro <fabrizio.castro@bp.renesas.com>,
 Chris Paterson <Chris.Paterson2@renesas.com>,
 Geert Uytterhoeven <geert+renesas@glider.be>,
 Simon Horman <horms@verge.net.au>, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, Biju Das <biju.das@bp.renesas.com>,
 linux-renesas-soc@vger.kernel.org,
 Kieran Bingham <kieran.bingham+renesas@ideasonboard.com>,
 Jacopo Mondi <jacopo+renesas@jmondi.org>, sam@ravnborg.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGRyaXZlciBkb2Vzbid0IHN1cHBvcnQgZHVhbC1saW5rIExWRFMgZGlzcGxheXMsIGFuZCB0
aGUgd2F5Cml0IGlkZW50aWZpZXMgYnJpZGdlcyB3b24ndCBhbGxvdyBmb3IgZHVhbC1MVkRTIGRp
c3BsYXlzIHRvIGJlCmNvbm5lY3RlZC4gQWxzbywgaXQncyBub3QgcG9zc2libGUgdG8gc3dhcCBl
dmVuIGFuZCBvZGQgcGl4ZWxzCmFyb3VuZCBpbiBjYXNlIHRoZSB3aXJpbmcgaXNuJ3QgdGFraW5n
IGFkdmFudGFnZSBvZiB0aGUgZGVmYXVsdApoYXJkd2FyZSBjb25maWd1cmF0aW9uLiBGdXJ0aGVy
IG1vcmUsIHRoZSAibW9kZSIgb2YgdGhlIGNvbXBhbmlvbgplbmNvZGVyIHNob3VsZCBiZSBzYW1l
IGFzIHRoZSBtb2RlIG9mIHRoZSBwcmltYXJ5IGVuY29kZXIuCgpSZXdvcmsgdGhlIGRyaXZlciB0
byBpbXByb3ZlIGFsbCBvZiB0aGUgYWJvdmUsIHNvIHRoYXQgaXQgY2FuCnN1cHBvcnQgZHVhbC1M
VkRTIGRpc3BsYXlzLgoKU2lnbmVkLW9mZi1ieTogRmFicml6aW8gQ2FzdHJvIDxmYWJyaXppby5j
YXN0cm9AYnAucmVuZXNhcy5jb20+CgotLS0KdjItPnYzOgoqIHJld29ya2VkIHRvIHRha2UgYWR2
YW50YW5nZSBvZiB0aGUgbmV3IGR0LWJpbmRpbmdzCiogc3F1YXNoZWQgaW4gdGhlIHBhdGNoZSBm
b3IgZml4aW5nIHRoZSBjb21wYW5pb24ncyBtb2RlCgpMYXVyZW50LAoKdW5mb3J0dW5hdGVseSB0
aGUgYmVzdCB3YXkgdG8gZ2V0IHRoZSBjb21wYW5pb24gZW5jb2RlciB0byB1c2UKdGhlIHNhbWUg
bW9kZSBhcyB0aGUgcHJpbWFyeSBlbmNvZGVyIGlzIHNldHRpbmcgdGhlIG1vZGUgZGlyZWN0bHkK
d2l0aG91dCBjYWxsaW5nIGludG8gcmNhcl9sdmRzX21vZGVfc2V0IGZvciB0aGUgY29tcGFuaW9u
IGVuY29kZXIsCmFzIHRoZSBiZWxvdyB0ZXN0IGZhaWxzIGZvciB0aGUgY29tcGFuaW9uIGVuY29k
ZXIgaW4KcmNhcl9sdmRzX2dldF9sdmRzX21vZGU6CmlmICghaW5mby0+bnVtX2J1c19mb3JtYXRz
IHx8ICFpbmZvLT5idXNfZm9ybWF0cykKCkFueWhvdywgc2V0dGluZyB0aGUgbW9kZSBmb3IgdGhl
IGNvbXBhbmlvbiBlbmNvZGVyIGRvZXNuJ3Qgc2VlbQp0byBiZSBtYW5kYXJ5IGFjY29yZGluZyB0
byB0aGUgZXhwZXJpbWVudHMgSSBoYXZlIGJlZW4gcnVubmluZywKYnV0IHRoZSBIVyBVc2VyJ3Mg
TWFudWFsIGRvZXNuJ3QgcmVhbGx5IHNheSBtdWNoIGFib3V0IHRoaXMsCnRoZXJlZm9yZSBJIHRo
aW5rIHRoZSBzYWZlc3Qgb3B0aW9uIGlzIHN0aWxsIHRvIHNldCB0aGUgbW9kZSBmb3IKdGhlIGNv
bXBhbmlvbiBlbmNvZGVyLgoKVGhhbmtzLApGYWIKLS0tCiBkcml2ZXJzL2dwdS9kcm0vcmNhci1k
dS9yY2FyX2x2ZHMuYyB8IDExMCArKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0K
IDEgZmlsZSBjaGFuZ2VkLCA2NSBpbnNlcnRpb25zKCspLCA0NSBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2x2ZHMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9yY2FyLWR1L3JjYXJfbHZkcy5jCmluZGV4IDNmZTBiODYuLmRmZWM1ZTcgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfbHZkcy5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9yY2FyLWR1L3JjYXJfbHZkcy5jCkBAIC0yMCw2ICsyMCw4IEBACiAjaW5jbHVkZSA8ZHJt
L2RybV9hdG9taWMuaD4KICNpbmNsdWRlIDxkcm0vZHJtX2F0b21pY19oZWxwZXIuaD4KICNpbmNs
dWRlIDxkcm0vZHJtX2JyaWRnZS5oPgorI2luY2x1ZGUgPGRybS9kcm1fYnVzX3RpbWluZ3MuaD4K
KyNpbmNsdWRlIDxkcm0vZHJtX29mLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9wYW5lbC5oPgogI2lu
Y2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+CiAKQEAgLTY5LDYgKzcxLDcgQEAgc3RydWN0
IHJjYXJfbHZkcyB7CiAKIAlzdHJ1Y3QgZHJtX2JyaWRnZSAqY29tcGFuaW9uOwogCWJvb2wgZHVh
bF9saW5rOworCWJvb2wgc3RyaXBlX3N3YXBfZGF0YTsKIH07CiAKICNkZWZpbmUgYnJpZGdlX3Rv
X3JjYXJfbHZkcyhiKSBcCkBAIC00MzksMTIgKzQ0MiwyMCBAQCBzdGF0aWMgdm9pZCByY2FyX2x2
ZHNfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCiAJcmNhcl9sdmRzX3dyaXRlKGx2
ZHMsIExWRENIQ1IsIGx2ZGhjcik7CiAKIAlpZiAobHZkcy0+aW5mby0+cXVpcmtzICYgUkNBUl9M
VkRTX1FVSVJLX0RVQUxfTElOSykgewotCQkvKgotCQkgKiBDb25maWd1cmUgdmVydGljYWwgc3Ry
aXBlIGJhc2VkIG9uIHRoZSBtb2RlIG9mIG9wZXJhdGlvbiBvZgotCQkgKiB0aGUgY29ubmVjdGVk
IGRldmljZS4KLQkJICovCi0JCXJjYXJfbHZkc193cml0ZShsdmRzLCBMVkRTVFJJUEUsCi0JCQkJ
bHZkcy0+ZHVhbF9saW5rID8gTFZEU1RSSVBFX1NUX09OIDogMCk7CisJCXUzMiBsdmRzdHJpcGUg
PSAwOworCisJCWlmIChsdmRzLT5kdWFsX2xpbmspCisJCQkvKgorCQkJICogQ29uZmlndXJlIHZl
cnRpY2FsIHN0cmlwZSBiYXNlZCBvbiB0aGUgbW9kZSBvZgorCQkJICogb3BlcmF0aW9uIG9mIHRo
ZSBjb25uZWN0ZWQgZGV2aWNlLgorCQkJICoKKwkJCSAqIFNUX1NXQVAgZnJvbSBMVkQxU1RSSVBF
IGlzIHJlc2VydmVkLCBkbyBub3Qgc2V0CisJCQkgKiBpbiB0aGUgY29tcGFuaW9uIExWRFMKKwkJ
CSAqLworCQkJbHZkc3RyaXBlID0gTFZEU1RSSVBFX1NUX09OIHwKKwkJCQkobHZkcy0+Y29tcGFu
aW9uICYmIGx2ZHMtPnN0cmlwZV9zd2FwX2RhdGEgPworCQkJCSBMVkRTVFJJUEVfU1RfU1dBUCA6
IDApOworCQlyY2FyX2x2ZHNfd3JpdGUobHZkcywgTFZEU1RSSVBFLCBsdmRzdHJpcGUpOwogCX0K
IAogCS8qCkBAIC02MDMsNiArNjE0LDExIEBAIHN0YXRpYyB2b2lkIHJjYXJfbHZkc19tb2RlX3Nl
dChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCWx2ZHMtPmRpc3BsYXlfbW9kZSA9ICphZGp1
c3RlZF9tb2RlOwogCiAJcmNhcl9sdmRzX2dldF9sdmRzX21vZGUobHZkcyk7CisJaWYgKGx2ZHMt
PmNvbXBhbmlvbikgeworCQlzdHJ1Y3QgcmNhcl9sdmRzICpjb21wYW5pb25fbHZkcyA9IGJyaWRn
ZV90b19yY2FyX2x2ZHMoCisJCQkJCQkJbHZkcy0+Y29tcGFuaW9uKTsKKwkJY29tcGFuaW9uX2x2
ZHMtPm1vZGUgPSBsdmRzLT5tb2RlOworCX0KIH0KIAogc3RhdGljIGludCByY2FyX2x2ZHNfYXR0
YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCkBAIC02NjcsOSArNjgzLDEwIEBAIEVYUE9S
VF9TWU1CT0xfR1BMKHJjYXJfbHZkc19kdWFsX2xpbmspOwogc3RhdGljIGludCByY2FyX2x2ZHNf
cGFyc2VfZHRfY29tcGFuaW9uKHN0cnVjdCByY2FyX2x2ZHMgKmx2ZHMpCiB7CiAJY29uc3Qgc3Ry
dWN0IG9mX2RldmljZV9pZCAqbWF0Y2g7Ci0Jc3RydWN0IGRldmljZV9ub2RlICpjb21wYW5pb247
CisJc3RydWN0IGRldmljZV9ub2RlICpjb21wYW5pb24sICpwMCA9IE5VTEwsICpwMSA9IE5VTEw7
CiAJc3RydWN0IGRldmljZSAqZGV2ID0gbHZkcy0+ZGV2OwotCWludCByZXQgPSAwOworCXN0cnVj
dCByY2FyX2x2ZHMgKmNvbXBhbmlvbl9sdmRzOworCWludCByZXQgPSAwLCBkdWFsX2xpbms7CiAK
IAkvKiBMb2NhdGUgdGhlIGNvbXBhbmlvbiBMVkRTIGVuY29kZXIgZm9yIGR1YWwtbGluayBvcGVy
YXRpb24sIGlmIGFueS4gKi8KIAljb21wYW5pb24gPSBvZl9wYXJzZV9waGFuZGxlKGRldi0+b2Zf
bm9kZSwgInJlbmVzYXMsY29tcGFuaW9uIiwgMCk7CkBAIC02ODcsMTYgKzcwNCw1MCBAQCBzdGF0
aWMgaW50IHJjYXJfbHZkc19wYXJzZV9kdF9jb21wYW5pb24oc3RydWN0IHJjYXJfbHZkcyAqbHZk
cykKIAkJZ290byBkb25lOwogCX0KIAorCS8qCisJICogV2UgbmVlZCB0byB3b3JrIG91dCBpZiB0
aGUgc2luayBpcyBleHBlY3RpbmcgdXMgdG8gZnVuY3Rpb24gaW4KKwkgKiBkdWFsLWxpbmsgbW9k
ZS4gV2UgZG8gdGhpcyBieSBsb29raW5nIGF0IHRoZSBEVCBwb3J0IG5vZGVzIHdlIGFyZQorCSAq
IGNvbm5lY3RlZCB0bywgaWYgdGhleSBhcmUgbWFya2VkIGFzIGV4cGVjdGluZyBldmVuIHBpeGVs
cyBhbmQKKwkgKiBvZGQgcGl4ZWxzIHRoYW4gd2UgbmVlZCB0byBlbmFibGUgdmVydGljYWwgc3Ry
aXBlIG91dHB1dAorCSAqLworCXAwID0gb2ZfZ3JhcGhfZ2V0X3BvcnRfYnlfaWQoZGV2LT5vZl9u
b2RlLCAxKTsKKwlwMSA9IG9mX2dyYXBoX2dldF9wb3J0X2J5X2lkKGNvbXBhbmlvbiwgMSk7CisJ
ZHVhbF9saW5rID0gZHJtX29mX2x2ZHNfZ2V0X2R1YWxfbGlua19jb25maWd1cmF0aW9uKHAwLCBw
MSk7CisJaWYgKGR1YWxfbGluayA+PSBEUk1fTFZEU19EVUFMX0xJTktfRVZFTl9PRERfUElYRUxT
KSB7CisJCWRldl9kYmcoZGV2LCAiRHVhbC1saW5rIGNvbmZpZ3VyYXRpb24gZGV0ZWN0ZWRcbiIp
OworCQlsdmRzLT5kdWFsX2xpbmsgPSB0cnVlOworCX0gZWxzZSB7CisJCS8qIGR1YWwtbGluayBt
b2RlIGlzIG5vdCByZXF1aXJlZCAqLworCQlkZXZfZGJnKGRldiwgIlNpbmdsZS1saW5rIGNvbmZp
Z3VyYXRpb24gZGV0ZWN0ZWRcbiIpOworCQlnb3RvIGRvbmU7CisJfQorCS8qCisJICogV2UgbWF5
IG5lZWQgdG8gc3dhcCBldmVuIGFuZCBvZGQgcGl4ZWxzIGFyb3VuZCBpbiBjYXNlIHRoZSB3aXJp
bmcKKwkgKiBkb2Vzbid0IG1hdGNoIHRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24uCisJICogQnkg
ZGVmYXVsdCB3ZSBnZW5lcmF0ZSBldmVuIHBpeGVscyBmcm9tIHRoaXMgZW5jb2RlciBhbmQgb2Rk
IHBpeGVscworCSAqIGZyb20gdGhlIGNvbXBhbmlvbiBlbmNvZGVyLCBidXQgaWYgcDAgaXMgY29u
bmVjdGVkIHRvIHRoZSBwb3J0CisJICogZXhwZWN0aW5nIG9vZCBwaXhlbHMsIGFuZCBwMSBpcyBj
b25uZWN0ZWQgdG8gdGhlIHBvcnQgZXhwZWN0aW5nIGV2ZW4KKwkgKiBwaXhlbHMsIHRoZW4gd2Ug
bmVlZCB0byBzd2FwIGV2ZW4gYW5kIG9kZCBwaXhlbHMgYXJvdW5kCisJICovCisJaWYgKGR1YWxf
bGluayA9PSBEUk1fTFZEU19EVUFMX0xJTktfT0REX0VWRU5fUElYRUxTKSB7CisJCWRldl9kYmco
ZGV2LCAiRGF0YSBzd2FwcGluZyByZXF1aXJlZFxuIik7CisJCWx2ZHMtPnN0cmlwZV9zd2FwX2Rh
dGEgPSB0cnVlOworCX0KKwogCWx2ZHMtPmNvbXBhbmlvbiA9IG9mX2RybV9maW5kX2JyaWRnZShj
b21wYW5pb24pOwogCWlmICghbHZkcy0+Y29tcGFuaW9uKSB7CiAJCXJldCA9IC1FUFJPQkVfREVG
RVI7CiAJCWdvdG8gZG9uZTsKIAl9CisJY29tcGFuaW9uX2x2ZHMgPSBicmlkZ2VfdG9fcmNhcl9s
dmRzKGx2ZHMtPmNvbXBhbmlvbik7CisJY29tcGFuaW9uX2x2ZHMtPmR1YWxfbGluayA9IGx2ZHMt
PmR1YWxfbGluazsKIAogCWRldl9kYmcoZGV2LCAiRm91bmQgY29tcGFuaW9uIGVuY29kZXIgJXBP
RlxuIiwgY29tcGFuaW9uKTsKIAogZG9uZToKIAlvZl9ub2RlX3B1dChjb21wYW5pb24pOworCW9m
X25vZGVfcHV0KHAwKTsKKwlvZl9ub2RlX3B1dChwMSk7CiAKIAlyZXR1cm4gcmV0OwogfQpAQCAt
NzA0LDEwICs3NTUsNyBAQCBzdGF0aWMgaW50IHJjYXJfbHZkc19wYXJzZV9kdF9jb21wYW5pb24o
c3RydWN0IHJjYXJfbHZkcyAqbHZkcykKIHN0YXRpYyBpbnQgcmNhcl9sdmRzX3BhcnNlX2R0KHN0
cnVjdCByY2FyX2x2ZHMgKmx2ZHMpCiB7CiAJc3RydWN0IGRldmljZV9ub2RlICpsb2NhbF9vdXRw
dXQgPSBOVUxMOwotCXN0cnVjdCBkZXZpY2Vfbm9kZSAqcmVtb3RlX2lucHV0ID0gTlVMTDsKIAlz
dHJ1Y3QgZGV2aWNlX25vZGUgKnJlbW90ZSA9IE5VTEw7Ci0Jc3RydWN0IGRldmljZV9ub2RlICpu
b2RlOwotCWJvb2wgaXNfYnJpZGdlID0gZmFsc2U7CiAJaW50IHJldCA9IDA7CiAKIAlsb2NhbF9v
dXRwdXQgPSBvZl9ncmFwaF9nZXRfZW5kcG9pbnRfYnlfcmVncyhsdmRzLT5kZXYtPm9mX25vZGUs
IDEsIDApOwpAQCAtNzM1LDQ1ICs3ODMsMTcgQEAgc3RhdGljIGludCByY2FyX2x2ZHNfcGFyc2Vf
ZHQoc3RydWN0IHJjYXJfbHZkcyAqbHZkcykKIAkJZ290byBkb25lOwogCX0KIAotCXJlbW90ZV9p
bnB1dCA9IG9mX2dyYXBoX2dldF9yZW1vdGVfZW5kcG9pbnQobG9jYWxfb3V0cHV0KTsKLQotCWZv
cl9lYWNoX2VuZHBvaW50X29mX25vZGUocmVtb3RlLCBub2RlKSB7Ci0JCWlmIChub2RlICE9IHJl
bW90ZV9pbnB1dCkgewotCQkJLyoKLQkJCSAqIFdlJ3ZlIGZvdW5kIG9uZSBlbmRwb2ludCBvdGhl
ciB0aGFuIHRoZSBpbnB1dCwgdGhpcwotCQkJICogbXVzdCBiZSBhIGJyaWRnZS4KLQkJCSAqLwot
CQkJaXNfYnJpZGdlID0gdHJ1ZTsKLQkJCW9mX25vZGVfcHV0KG5vZGUpOwotCQkJYnJlYWs7Ci0J
CX0KLQl9Ci0KLQlpZiAoaXNfYnJpZGdlKSB7Ci0JCWx2ZHMtPm5leHRfYnJpZGdlID0gb2ZfZHJt
X2ZpbmRfYnJpZGdlKHJlbW90ZSk7Ci0JCWlmICghbHZkcy0+bmV4dF9icmlkZ2UpIHsKLQkJCXJl
dCA9IC1FUFJPQkVfREVGRVI7Ci0JCQlnb3RvIGRvbmU7Ci0JCX0KLQotCQlpZiAobHZkcy0+aW5m
by0+cXVpcmtzICYgUkNBUl9MVkRTX1FVSVJLX0RVQUxfTElOSykKLQkJCWx2ZHMtPmR1YWxfbGlu
ayA9IGx2ZHMtPm5leHRfYnJpZGdlLT50aW1pbmdzCi0JCQkJCT8gbHZkcy0+bmV4dF9icmlkZ2Ut
PnRpbWluZ3MtPmR1YWxfbGluawotCQkJCQk6IGZhbHNlOwotCX0gZWxzZSB7Ci0JCWx2ZHMtPnBh
bmVsID0gb2ZfZHJtX2ZpbmRfcGFuZWwocmVtb3RlKTsKLQkJaWYgKElTX0VSUihsdmRzLT5wYW5l
bCkpIHsKLQkJCXJldCA9IFBUUl9FUlIobHZkcy0+cGFuZWwpOwotCQkJZ290byBkb25lOwotCQl9
CisJcmV0ID0gZHJtX29mX2ZpbmRfcGFuZWxfb3JfYnJpZGdlKGx2ZHMtPmRldi0+b2Zfbm9kZSwg
MSwgMCwKKwkJCQkJICAmbHZkcy0+cGFuZWwsICZsdmRzLT5uZXh0X2JyaWRnZSk7CisJaWYgKHJl
dCkgeworCQlyZXQgPSAtRVBST0JFX0RFRkVSOworCQlnb3RvIGRvbmU7CiAJfQotCi0JaWYgKGx2
ZHMtPmR1YWxfbGluaykKKwlpZiAobHZkcy0+aW5mby0+cXVpcmtzICYgUkNBUl9MVkRTX1FVSVJL
X0RVQUxfTElOSykKIAkJcmV0ID0gcmNhcl9sdmRzX3BhcnNlX2R0X2NvbXBhbmlvbihsdmRzKTsK
IAogZG9uZToKIAlvZl9ub2RlX3B1dChsb2NhbF9vdXRwdXQpOwotCW9mX25vZGVfcHV0KHJlbW90
ZV9pbnB1dCk7CiAJb2Zfbm9kZV9wdXQocmVtb3RlKTsKIAogCS8qCi0tIAoyLjcuNAoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxp
bmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
