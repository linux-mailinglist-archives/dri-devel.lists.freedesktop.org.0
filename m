Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6FBB86E84E
	for <lists+dri-devel@lfdr.de>; Fri, 19 Jul 2019 17:59:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8E2A16E852;
	Fri, 19 Jul 2019 15:59:42 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.domeneshop.no (smtp.domeneshop.no
 [IPv6:2a01:5b40:0:3005::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3EA796E850
 for <dri-devel@lists.freedesktop.org>; Fri, 19 Jul 2019 15:59:39 +0000 (UTC)
Received: from 211.81-166-168.customer.lyse.net ([81.166.168.211]:55144
 helo=localhost.localdomain)
 by smtp.domeneshop.no with esmtpsa (TLS1.2:ECDHE_RSA_AES_128_CBC_SHA1:128)
 (Exim 4.84_2) (envelope-from <noralf@tronnes.org>)
 id 1hoVIH-0001bQ-BK; Fri, 19 Jul 2019 17:59:37 +0200
From: =?UTF-8?q?Noralf=20Tr=C3=B8nnes?= <noralf@tronnes.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 05/11] drm/tinydrm: Remove tinydrm_spi_max_transfer_size()
Date: Fri, 19 Jul 2019 17:59:10 +0200
Message-Id: <20190719155916.62465-6-noralf@tronnes.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190719155916.62465-1-noralf@tronnes.org>
References: <20190719155916.62465-1-noralf@tronnes.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; d=tronnes.org; s=ds201810; 
 h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From;
 bh=VONCgGEpgANzaKcjJCqTSuzQRZnkzBQYKmbKDEsOvVM=; 
 b=eoKZsn38kdyy3nj0f7gjIfXWXW5Dn/eB2brg5lv+cd4bBqJP75P0vl5Y85c4T4E0or7+d8XHKypAGD8ht2KzRnE/BVFpz7P4j0kU9bgorD4SLpdH38JqPI7T4xjwUa6jbu/Ac++IG1n/BHFPdNVsVhuKK2hDZmKVVL15M2H5QX3ppMCEYSobkx5qT4dQgy8QT2lz6GG/QIJkirt26Rv+EsXidKoJkqN/lh7VNX6vQ1ADBteTbPykoSQMkVkPGWc+xsqLOEYJurmMsPsE8SZa8Le5sJSJNg//huq8LVNeBlk/o1vt5dTgwr5g1rMUPnAi5X1mgq/yiaiyZDSMUt+Ytw==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: sam@ravnborg.org, david@lechnology.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

c3BpLWJjbTI4MzUgY2FuIGhhbmRsZSA+NjRrQiBidWZmZXJzIG5vdyBzbyB0aGVyZSBpcyBubyBu
ZWVkIHRvIGNoZWNrCi0+bWF4X2RtYV9sZW4uIFRoZSB0aW55ZHJtX3NwaV9tYXhfdHJhbnNmZXJf
c2l6ZSgpIG1heF9sZW4gYXJndW1lbnQgaXMKbm90IHVzZWQgYnkgYW55IGNhbGxlcnMsIHNvIG5v
dCBuZWVkZWQuCgpUaGVuIHdlIGhhdmUgdGhlIHNwaV9tYXggbW9kdWxlIHBhcmFtZXRlci4gSXQg
d2FzIGFkZGVkIGJlY2F1c2UKc3RhZ2luZy9mYnRmdCBoYXMgc3VwcG9ydCBmb3IgaXQgYW5kIHRo
ZXJlIHdhcyBhIHJlcG9ydCB0aGF0IHNvbWVvbmUgdXNlZAppdCB0byBzZXQgYSBzbWFsbCBidWZm
ZXIgc2l6ZSB0byBhdm9pZCBwb3BwaW5nIG9uIGEgVVNCIHNvdW5kY2FyZCBvbiBhClJhc3BiZXJy
eSBQaS4gSW4gaGluZHNpZ2h0IGl0IHNob3VsZG4ndCBoYXZlIGJlZW4gYWRkZWQsIEkgc2hvdWxk
IGhhdmUKd2FpdGVkIGZvciBpdCB0byBiZWNvbWUgYSBwcm9ibGVtIGZpcnN0LiBJIGRvbid0IGtu
b3cgaXQgYW55b25lIGlzCmFjdHVhbGx5IHVzaW5nIGl0LCBidXQgc2luY2UgdGlueWRybV9zcGlf
dHJhbnNmZXIoKSBpcyBiZWluZyBtb3ZlZCB0bwptaXBpLWRiaSwgSSdtIHRha2luZyB0aGUgb3Bw
b3J0dW5pdHkgdG8gcmVtb3ZlIGl0LiBJJ2xsIGFkZCBpdCBiYWNrIHRvCm1pcGktZGJpIGlmIHNv
bWVvbmUgY29tcGxhaW5zLgoKV2l0aCB0aGF0IG91dCBvZiB0aGUgd2F5LCBzcGlfbWF4X3RyYW5z
ZmVyX3NpemUoKSBjYW4gYmUgdXNlZCBpbnN0ZWFkLgoKVGhlIGNob3NlbiAxNmtCIGJ1ZmZlciBz
aXplIGZvciBUeXBlIEMgT3B0aW9uIDEgKDktYml0KSBpbnRlcmZhY2UgaXMKc29tZXdoYXQgYXJi
aXRyYXJ5LCBidXQgYSBiaWdnZXIgYnVmZmVyIHdpbGwgaGF2ZSBhIG1pbmlzY3VsZSBpbXBhY3Qg
b24KdHJhbnNmZXIgc3BlZWQsIHNvIGl0J3MgcHJvYmFibHkgZmluZS4KCkFja2VkLWJ5OiBTYW0g
UmF2bmJvcmcgPHNhbUByYXZuYm9yZy5vcmc+ClNpZ25lZC1vZmYtYnk6IE5vcmFsZiBUcsO4bm5l
cyA8bm9yYWxmQHRyb25uZXMub3JnPgotLS0KIC4uLi9ncHUvZHJtL3Rpbnlkcm0vY29yZS90aW55
ZHJtLWhlbHBlcnMuYyAgICB8IDM3ICstLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2Ry
bS90aW55ZHJtL21pcGktZGJpLmMgICAgICAgICAgICB8IDEwICstLS0tCiBpbmNsdWRlL2RybS90
aW55ZHJtL3Rpbnlkcm0taGVscGVycy5oICAgICAgICAgfCAgMSAtCiAzIGZpbGVzIGNoYW5nZWQs
IDMgaW5zZXJ0aW9ucygrKSwgNDUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3Rpbnlkcm0vY29yZS90aW55ZHJtLWhlbHBlcnMuYyBiL2RyaXZlcnMvZ3B1L2RybS90
aW55ZHJtL2NvcmUvdGlueWRybS1oZWxwZXJzLmMKaW5kZXggMjcyNjE2YTI0NmNkLi5hZjViZWM4
ODYxZGUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL2NvcmUvdGlueWRybS1o
ZWxwZXJzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0vY29yZS90aW55ZHJtLWhlbHBl
cnMuYwpAQCAtMTgsNDEgKzE4LDggQEAKICNpbmNsdWRlIDxkcm0vZHJtX3JlY3QuaD4KICNpbmNs
dWRlIDxkcm0vdGlueWRybS90aW55ZHJtLWhlbHBlcnMuaD4KIAotc3RhdGljIHVuc2lnbmVkIGlu
dCBzcGlfbWF4OwotbW9kdWxlX3BhcmFtKHNwaV9tYXgsIHVpbnQsIDA0MDApOwotTU9EVUxFX1BB
Uk1fREVTQyhzcGlfbWF4LCAiU2V0IGEgbG93ZXIgU1BJIG1heCB0cmFuc2ZlciBzaXplIik7Ci0K
ICNpZiBJU19FTkFCTEVEKENPTkZJR19TUEkpCiAKLS8qKgotICogdGlueWRybV9zcGlfbWF4X3Ry
YW5zZmVyX3NpemUgLSBEZXRlcm1pbmUgbWF4IFNQSSB0cmFuc2ZlciBzaXplCi0gKiBAc3BpOiBT
UEkgZGV2aWNlCi0gKiBAbWF4X2xlbjogTWF4aW11bSBidWZmZXIgc2l6ZSBuZWVkZWQgKG9wdGlv
bmFsKQotICoKLSAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgbWF4aW11bSBzaXplIHRvIHVz
ZSBmb3IgU1BJIHRyYW5zZmVycy4gSXQgY2hlY2tzCi0gKiB0aGUgU1BJIG1hc3RlciwgdGhlIG9w
dGlvbmFsIEBtYXhfbGVuIGFuZCB0aGUgbW9kdWxlIHBhcmFtZXRlciBzcGlfbWF4IGFuZAotICog
cmV0dXJucyB0aGUgc21hbGxlc3QuCi0gKgotICogUmV0dXJuczoKLSAqIE1heGltdW0gc2l6ZSBm
b3IgU1BJIHRyYW5zZmVycwotICovCi1zaXplX3QgdGlueWRybV9zcGlfbWF4X3RyYW5zZmVyX3Np
emUoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSwgc2l6ZV90IG1heF9sZW4pCi17Ci0Jc2l6ZV90IHJl
dDsKLQotCXJldCA9IG1pbihzcGlfbWF4X3RyYW5zZmVyX3NpemUoc3BpKSwgc3BpLT5tYXN0ZXIt
Pm1heF9kbWFfbGVuKTsKLQlpZiAobWF4X2xlbikKLQkJcmV0ID0gbWluKHJldCwgbWF4X2xlbik7
Ci0JaWYgKHNwaV9tYXgpCi0JCXJldCA9IG1pbl90KHNpemVfdCwgcmV0LCBzcGlfbWF4KTsKLQly
ZXQgJj0gfjB4MzsKLQlpZiAocmV0IDwgNCkKLQkJcmV0ID0gNDsKLQotCXJldHVybiByZXQ7Ci19
Ci1FWFBPUlRfU1lNQk9MKHRpbnlkcm1fc3BpX21heF90cmFuc2Zlcl9zaXplKTsKLQogLyoqCiAg
KiB0aW55ZHJtX3NwaV90cmFuc2ZlciAtIFNQSSB0cmFuc2ZlciBoZWxwZXIKICAqIEBzcGk6IFNQ
SSBkZXZpY2UKQEAgLTc1LDIxICs0MiwxOSBAQCBpbnQgdGlueWRybV9zcGlfdHJhbnNmZXIoc3Ry
dWN0IHNwaV9kZXZpY2UgKnNwaSwgdTMyIHNwZWVkX2h6LAogCQkJIHN0cnVjdCBzcGlfdHJhbnNm
ZXIgKmhlYWRlciwgdTggYnB3LCBjb25zdCB2b2lkICpidWYsCiAJCQkgc2l6ZV90IGxlbikKIHsK
KwlzaXplX3QgbWF4X2NodW5rID0gc3BpX21heF90cmFuc2Zlcl9zaXplKHNwaSk7CiAJc3RydWN0
IHNwaV90cmFuc2ZlciB0ciA9IHsKIAkJLmJpdHNfcGVyX3dvcmQgPSBicHcsCiAJCS5zcGVlZF9o
eiA9IHNwZWVkX2h6LAogCX07CiAJc3RydWN0IHNwaV9tZXNzYWdlIG07CiAJdTE2ICpzd2FwX2J1
ZiA9IE5VTEw7Ci0Jc2l6ZV90IG1heF9jaHVuazsKIAlzaXplX3QgY2h1bms7CiAJaW50IHJldCA9
IDA7CiAKIAlpZiAoV0FSTl9PTl9PTkNFKGJwdyAhPSA4ICYmIGJwdyAhPSAxNikpCiAJCXJldHVy
biAtRUlOVkFMOwogCi0JbWF4X2NodW5rID0gdGlueWRybV9zcGlfbWF4X3RyYW5zZmVyX3NpemUo
c3BpLCAwKTsKLQogCWlmIChicHcgPT0gMTYgJiYgIXNwaV9pc19icHdfc3VwcG9ydGVkKHNwaSwg
MTYpKSB7CiAJCXRyLmJpdHNfcGVyX3dvcmQgPSA4OwogCQlpZiAodGlueWRybV9tYWNoaW5lX2xp
dHRsZV9lbmRpYW4oKSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0vbWlw
aS1kYmkuYyBiL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL21pcGktZGJpLmMKaW5kZXggOTk1MDlk
MTZiMDM3Li5hZTMxYTVjOWFhMWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJt
L21pcGktZGJpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0vbWlwaS1kYmkuYwpAQCAt
OTY0LDE1ICs5NjQsOSBAQCBzdGF0aWMgaW50IG1pcGlfZGJpX3R5cGVjM19jb21tYW5kKHN0cnVj
dCBtaXBpX2RiaSAqbWlwaSwgdTggKmNtZCwKIGludCBtaXBpX2RiaV9zcGlfaW5pdChzdHJ1Y3Qg
c3BpX2RldmljZSAqc3BpLCBzdHJ1Y3QgbWlwaV9kYmkgKm1pcGksCiAJCSAgICAgIHN0cnVjdCBn
cGlvX2Rlc2MgKmRjKQogewotCXNpemVfdCB0eF9zaXplID0gdGlueWRybV9zcGlfbWF4X3RyYW5z
ZmVyX3NpemUoc3BpLCAwKTsKIAlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmc3BpLT5kZXY7CiAJaW50
IHJldDsKIAotCWlmICh0eF9zaXplIDwgMTYpIHsKLQkJRFJNX0VSUk9SKCJTUEkgdHJhbnNtaXQg
YnVmZmVyIHRvbyBzbWFsbDogJXp1XG4iLCB0eF9zaXplKTsKLQkJcmV0dXJuIC1FSU5WQUw7Ci0J
fQotCiAJLyoKIAkgKiBFdmVuIHRob3VnaCBpdCdzIG5vdCB0aGUgU1BJIGRldmljZSB0aGF0IGRv
ZXMgRE1BICh0aGUgbWFzdGVyIGRvZXMpLAogCSAqIHRoZSBkbWEgbWFzayBpcyBuZWNlc3Nhcnkg
Zm9yIHRoZSBkbWFfYWxsb2Nfd2MoKSBpbgpAQCAtMTAwMSw4ICs5OTUsOCBAQCBpbnQgbWlwaV9k
Ymlfc3BpX2luaXQoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSwgc3RydWN0IG1pcGlfZGJpICptaXBp
LAogCQkJbWlwaS0+c3dhcF9ieXRlcyA9IHRydWU7CiAJfSBlbHNlIHsKIAkJbWlwaS0+Y29tbWFu
ZCA9IG1pcGlfZGJpX3R5cGVjMV9jb21tYW5kOwotCQltaXBpLT50eF9idWY5X2xlbiA9IHR4X3Np
emU7Ci0JCW1pcGktPnR4X2J1ZjkgPSBkZXZtX2ttYWxsb2MoZGV2LCB0eF9zaXplLCBHRlBfS0VS
TkVMKTsKKwkJbWlwaS0+dHhfYnVmOV9sZW4gPSBTWl8xNks7CisJCW1pcGktPnR4X2J1ZjkgPSBk
ZXZtX2ttYWxsb2MoZGV2LCBtaXBpLT50eF9idWY5X2xlbiwgR0ZQX0tFUk5FTCk7CiAJCWlmICgh
bWlwaS0+dHhfYnVmOSkKIAkJCXJldHVybiAtRU5PTUVNOwogCX0KZGlmZiAtLWdpdCBhL2luY2x1
ZGUvZHJtL3Rpbnlkcm0vdGlueWRybS1oZWxwZXJzLmggYi9pbmNsdWRlL2RybS90aW55ZHJtL3Rp
bnlkcm0taGVscGVycy5oCmluZGV4IGRjYTc1ZGUzYTM1OS4uMTBiMzUzNzVhMDA5IDEwMDY0NAot
LS0gYS9pbmNsdWRlL2RybS90aW55ZHJtL3Rpbnlkcm0taGVscGVycy5oCisrKyBiL2luY2x1ZGUv
ZHJtL3Rpbnlkcm0vdGlueWRybS1oZWxwZXJzLmgKQEAgLTQxLDcgKzQxLDYgQEAgaW50IHRpbnlk
cm1fZGlzcGxheV9waXBlX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRybSwKIAkJCSAgICAgIGNv
bnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAogCQkJICAgICAgdW5zaWduZWQgaW50
IHJvdGF0aW9uKTsKIAotc2l6ZV90IHRpbnlkcm1fc3BpX21heF90cmFuc2Zlcl9zaXplKHN0cnVj
dCBzcGlfZGV2aWNlICpzcGksIHNpemVfdCBtYXhfbGVuKTsKIGludCB0aW55ZHJtX3NwaV90cmFu
c2ZlcihzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpLCB1MzIgc3BlZWRfaHosCiAJCQkgc3RydWN0IHNw
aV90cmFuc2ZlciAqaGVhZGVyLCB1OCBicHcsIGNvbnN0IHZvaWQgKmJ1ZiwKIAkJCSBzaXplX3Qg
bGVuKTsKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0
b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJp
LWRldmVs
