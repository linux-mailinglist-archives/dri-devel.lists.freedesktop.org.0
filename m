Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8398919FCC
	for <lists+dri-devel@lfdr.de>; Fri, 10 May 2019 17:05:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1AE2089B55;
	Fri, 10 May 2019 15:05:44 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd41.google.com (mail-io1-xd41.google.com
 [IPv6:2607:f8b0:4864:20::d41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 540C289B55
 for <dri-devel@lists.freedesktop.org>; Fri, 10 May 2019 15:05:42 +0000 (UTC)
Received: by mail-io1-xd41.google.com with SMTP id s20so4738438ioj.7
 for <dri-devel@lists.freedesktop.org>; Fri, 10 May 2019 08:05:42 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=NuznlxC7GEgYokZCrm7IN/tj/NbTxvoE1lpbLD+P6FM=;
 b=tcAmAL2d0A8TsEFsktB8kZAgr7yHAhbTZzj2inbQ4Q1S3we4OUhTrSzE1qKTeVtPI2
 /o6x21YU6msSX7eJjTB42yfhh6UVLVxsoUStuw85i9rMftbJsAhmPemYmIpqOb/vbOJQ
 7B6tpuYA+G4n0+9/25S8tgvcRgw/pTu0aRgeSRDu6pwPBxKtFGfT9q/4iD3yPsf5utIG
 JEXCSs/DA2NkCowC+Xn8gkBLakOrpl3/WCnx1fTWcuXkPrqbgf6+FfhTPwX8Tsy43u1F
 A5yfG1ZA+ffXWAdmpmFr4v9eE3LIML2qHrs3L1XHKB43+kdi7AlZEz6kXVoTWKymsQ2r
 bg1A==
X-Gm-Message-State: APjAAAUvH8AN2HzJ6kMa6lEjzO278jBroPcwq36MohJm3/AuGwPW4USd
 DqV3sVnDVwyweHiwk97kzAUEsi2ur8WhcZ7V+S9bmQ==
X-Google-Smtp-Source: APXvYqwxgeizLdvyfN+m8ikpEhXLZD1a3NmQ19FUU+pj3MwBauIM70TcpKnQaZZGOg/jgLFS0r+D94herHx1aPVIh0Q=
X-Received: by 2002:a6b:9306:: with SMTP id v6mr7274576iod.278.1557500741598; 
 Fri, 10 May 2019 08:05:41 -0700 (PDT)
MIME-Version: 1.0
References: <20190509120903.28939-1-daniel.vetter@ffwll.ch>
 <20190509145620.2pjqko7copbxuzth@pathway.suse.cz>
 <CAKMK7uFTsr1F8nFExTvC7nWFQMcZ7ejh+k_X6E8EcMUaP3e29A@mail.gmail.com>
 <20190510091537.44e3aeb7gcrcob76@pathway.suse.cz>
In-Reply-To: <20190510091537.44e3aeb7gcrcob76@pathway.suse.cz>
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Fri, 10 May 2019 17:05:30 +0200
Message-ID: <CAKMK7uEqnDATnEUVLjHdv2YkTcfXOJ8Fsg2K9VWYG4nnJX_SAg@mail.gmail.com>
Subject: Re: [PATCH] RFC: console: hack up console_lock more v3
To: Petr Mladek <pmladek@suse.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=NuznlxC7GEgYokZCrm7IN/tj/NbTxvoE1lpbLD+P6FM=;
 b=Y7TbJMNHX/xLGrt6Ey5Ga60Br3W/GGMSwc4WapRpMZPFn+rsnXTCRXWgm2noVfXHwr
 IPfC7a5tOe75zipivGvl92RxMtCNfoX7shKuz5CZ1H+2uQyjxDPXfPr1BTGUm9UrHLEC
 i1rf+aEPM9dqjAqNOK5Y0RgZx7YkxWS6hQo10=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: John Ogness <john.ogness@linutronix.de>,
 Peter Zijlstra <peterz@infradead.org>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Will Deacon <will.deacon@arm.com>,
 Linux Kernel Mailing List <linux-kernel@vger.kernel.org>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 Sergey Senozhatsky <sergey.senozhatsky@gmail.com>,
 Ingo Molnar <mingo@redhat.com>, Steven Rostedt <rostedt@goodmis.org>,
 Daniel Vetter <daniel.vetter@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBNYXkgMTAsIDIwMTkgYXQgMTE6MTUgQU0gUGV0ciBNbGFkZWsgPHBtbGFkZWtAc3Vz
ZS5jb20+IHdyb3RlOgo+IE9uIFRodSAyMDE5LTA1LTA5IDE4OjQzOjEyLCBEYW5pZWwgVmV0dGVy
IHdyb3RlOgo+ID4gT25lIHRoaW5nIHRvIGtlZXAgaW4gbWluZCBpcyB0aGF0IHRoZSBrZXJuZWwg
aXMgYWxyZWFkeSBkeWluZywgYW5kCj4gPiB0aGluZ3Mgd2lsbCBjb21lIGNyYXNoaW5nIGRvd24g
bGF0ZXIgb24KPgo+IFRoaXMgaXMgaW1wb3J0YW50IGluZm9ybWF0aW9uLiBJIGhhdm4ndCBzZWVu
IGl0IG1lbnRpb25lZCBlYXJsaWVyLgoKSSB0aG91Z2h0IEkgZXhwbGFpbmVkIHRoYXQsIHNvcnJ5
IGlmIHRoaXMgd2Fzbid0IGNsZWFyLgoKPiA+IChJJ3ZlIHNlZW4gdGhpcyBvbmx5IGluIGRtZXNn
Cj4gPiB0YWlscyBjYXB0dXJlIGluIHBzdG9yZSBpbiBvdXIgQ0ksIGkuZS4gdGhlIGJveCBkaWVk
IGZvciBnb29kKS4gSSBqdXN0Cj4gPiB3YW50IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSB1c2VmdWwg
aW5mb3JtYXRpb24gaXNuJ3Qgb3ZlcndyaXR0ZW4gYnkKPiA+IG1vcmUgZG1lc2cgc3BsYXRzIHRo
YXQgaGFwcGVuIGFzIGEgY29uc2VxdWVuY2Ugb2YgdXMgc29tZWhvdyB0cnlpbmcgdG8KPiA+IHJ1
biB0aGluZ3Mgb24gYW4gb2ZmbGluZSBjcHUuIE9uY2UgY29uc29sZV91bmxvY2sgaGFzIGNvbXBs
ZXRlZCBpbgo+ID4geW91ciBhYm92ZSBiYWNrdHJhY2UgYW5kIHRoZSBpbXBvcnRhbnQgc3R1ZmYg
aGFzIGdvbmUgb3V0IEknbSB0b3RhbGx5Cj4gPiBmaW5lIHdpdGggdGhlIGtlcm5lbCBqdXN0IGR5
aW5nLiBQdWxsaW5nIHRoZSB3YWtlX3VwX3Byb2Nlc3Mgb3V0IGZyb20KPiA+IHVuZGVyIHRoZSBz
ZW1hcGhvcmUubG9jayBpcyBlbm91Z2ggdG8gcHJldmVudCBsb2NrZGVwIGZyb20gZHVtcGluZwo+
ID4gbW9yZSBzdHVmZiB3aGlsZSB3ZSdyZSB0cnlpbmcgdG8gcHJpbnQgdGhlIGltcG9ydGFudCB0
aGluZ3MsCj4KPiBXaXRoIHRoZSBtb3JlIHN0dWZmIHlvdSBtZWFuIHRoZSBsb2NrZGVwIHNwbGF0
PyBJZiB5ZXMsIGl0IG1pZ2h0Cj4gbWFrZSBzZW5zZSB0byBjYWxsIGRlYnVnX2xvY2tzX29mZigp
IGVhcmxpZXIgaW4gcGFuaWMoKS4KCkknbSBub3Qgc3VyZSB0aGlzIG9ubHkgaGFwcGVucyBpbiBw
YW5pY3MgKEknbSBob25lc3RseSBub3Qgc3VyZSBhdCBhbGwKd2h5IHdlJ3JlIGNvbXBsYWluaW5n
IGFib3V0IG9mZmxpbmUgY3B1cykuIEJ1dCBpbiBnZW5lcmFsIEkndmUgc2VlbgpwaWxlcyBvZiBk
eWluZyBzeXN0ZW1zIHRoYXQgZHVtcCBXQVJOSU5HUyBhbmQgdGhlbiBldmVudHVhbGx5IHBhbmlj
LgpTdGlsbCB3b3VsZCBiZSBnb29kIHRvIG5vdCBoYXZlIGEgcG9pbnRsZXNzIGxvY2tkZXAgc3Bs
YXQgaW4gYmV0d2Vlbi4KCj4gPiBhbmQgSSB0aGluayB0aGUgdW50YW5nbGluZyBvZiB0aGUgbG9j
a2luZyBoaWFyYXJjaHkgaXMgdXNlZnVsIGlycmVzcGVjdGl2ZQo+ID4gb2YgdGhpcyBsb2NrZGVw
IHNwbGF0LiBQbHVzIFBldGVyIGRvZXNuJ3Qgc291bmQgbGlrZSBoZSBsaWtlcyB0byByb2xsCj4g
PiBvdXQgbW9yZSBwcmludGtfZGVmZXJyZWQga2luZCBvZiB0aGluZ3MuCj4gPgo+ID4gQnV0IGlm
IHlvdSB0aGluayBJIHNob3VsZCBkbyB0aGUgcHJpbnRrX2RlZmVycmVkIHRoaW5nIHRvbyBJIGNh
biBsb29rCj4gPiBpbnRvIHRoYXQuIEp1c3Qgbm90IHF1aXRlIHN1cmUgd2hhdCB0aGF0J3Mgc3Vw
cG9zZWQgdG8gbG9vayBsaWtlIG5vdy4KPgo+IFlvdXIgcGF0Y2ggbWlnaHQgcmVtb3ZlIHRoZSBw
YXJ0aWN1bGFyIGxvY2tkZXAgc3BsYXQuIEl0IG1pZ2h0IGJlCj4gd29ydGggaXQgKFBldGVyIG1l
bnRpb25lZCBhbHNvIGFuIG9wdGltaXphdGlvbiBlZmZlY3QpLiBBbnl3YXkKPiBpdCB3aWxsIG5v
dCBwcmV2ZW50IHRoZSBkZWFkbG9jay4KPgo+IFRoZSBvbmx5IHdheSB0byBhdm9pZCB0aGUgZGVh
ZGxvY2sgaXMgdG8gdXNlIHByaW50a19kZWZlcnJlZCgpCj4gd2l0aCB0aGUgY3VycmVudCBwcmlu
dGsoKSBjb2RlLgo+Cj4KPiBGaW5hbGx5LCBJIGhhdmUgcmVjZW50bHkgd29ya2VkIG9uIHNpbWls
YXIgcHJvYmxlbSB3aXRoIGR5aW5nIHN5c3RlbS4KPiBJIHNlbnQgdGhlIGZvbGxvd2luZyBwYXRj
aCBmb3IgdGVzdGluZy4gSSB3b25kZXIgaWYgaXQgbWlnaHQgYmUKPiBhY2NlcHRhYmxlIHVwc3Ry
ZWFtOgo+Cj4KPiBGcm9tOiBQZXRyIE1sYWRlayA8cG1sYWRla0BzdXNlLmNvbT4KPiBTdWJqZWN0
OiBzY2hlZC94ODY6IERvIG5vdCB3YXJuIGFib3V0IG9mZmxpbmUgQ1BVcyB3aGVuIGFsbCBhcmUg
YmVpbmcgc3RvcHBlZAo+IFBhdGNoLW1haW5saW5lOiBObywganVzdCBmb3IgdGVzdGluZwo+IFJl
ZmVyZW5jZXM6IGJzYyMxMTA0NDA2Cj4KPiBUaGUgd2FybmluZyBhYm91dCByZXNjaGVkdWxpbmcg
b2ZmbGluZSBDUFVzIGNhdXNlIGRlYWxvY2sgd2hlbgo+IHRoZSBDUFVzIG5lZWQgdG8gZ2V0IHN0
b3BwZWQgdXNpbmcgTk1JLiBJdCBtaWdodCBoYXBwZW4gd2l0aAo+IGxvZ2J1Zl9sb2NrLCBsb2Nr
cyB1c2VkIGJ5IGNvbnNvbGUgZHJpdmVycywgZXNwZWNpYWxseSB0dHkuCj4gQnV0IGl0IG1pZ2h0
IGFsc28gYmUgY2F1c2VkIGJ5IGEgcmVnaXN0ZXJlZCBrZXJuZWwgbWVzc2FnZQo+IGR1bXBlciwg
Zm9yIGV4YW1wbGUsIHBzdG9yZS4KPgo+IFRoZSB3YXJuaW5nIGlzIHByZXR0eSBjb21tb24gd2hl
biB0aGVyZSBpcyBhIGhpZ2ggbG9hZCBhbmQKPiBDUFVzIGFyZSBiZWluZyBzdG9wcGVkIGJ5IG5h
dGl2ZV9zdG9wX290aGVyX2NwdXMoKS4gQnV0Cj4gdGhleSBhcmUgbm90IHJlYWxseSB1c2VmdWwg
aW4gdGhpcyBjb250ZXh0LiBBbmQgdGhleSBzY3JvbGxzCj4gdGhlIHJlYWxseSBpbXBvcnRhbnQg
bWVzc2FnZXMgb2ZmIHRoZSBzY3JlZW4uCj4KPiBXZSBuZWVkIHRvIGZpeCBwcmludGsoKSBpbiB0
aGUgbG9uZyB0ZXJtLiBCdXQgZGlzYWJsaW5nCj4gdGhlIG1lc3NhZ2UgbG9va3MgcmVhc29uYWJs
ZSBhdCBsZWFzdCBpbiB0aGUgbWVhbnRpbWUuCj4KPiBTaWduZWQtb2ZmLWJ5OiBQZXRyIE1sYWRl
ayA8cG1sYWRla0BzdXNlLmNvbT4KPiAtLS0KPiAgYXJjaC94ODYva2VybmVsL3NtcC5jIHwgICAg
MyArKy0KPiAgMSBmaWxlIGNoYW5nZWQsIDIgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQo+
Cj4gLS0tIGEvYXJjaC94ODYva2VybmVsL3NtcC5jCj4gKysrIGIvYXJjaC94ODYva2VybmVsL3Nt
cC5jCj4gQEAgLTEyNCw3ICsxMjQsOCBAQCBzdGF0aWMgYm9vbCBzbXBfbm9fbm1pX2lwaSA9IGZh
bHNlOwo+ICAgKi8KPiAgc3RhdGljIHZvaWQgbmF0aXZlX3NtcF9zZW5kX3Jlc2NoZWR1bGUoaW50
IGNwdSkKPiAgewo+IC0gICAgICAgaWYgKHVubGlrZWx5KGNwdV9pc19vZmZsaW5lKGNwdSkpKSB7
Cj4gKyAgICAgICBpZiAodW5saWtlbHkoY3B1X2lzX29mZmxpbmUoY3B1KSAmJgo+ICsgICAgICAg
ICAgICAgICAgICAgIGF0b21pY19yZWFkKCZzdG9wcGluZ19jcHUpIDwgMCkpIHsKCkhtIHllYWgg
dGhpcyBzb3VuZHMgbGlrZSBhbm90aGVyIGZpeCB3aGljaCB3b3VsZCBzdG9wIHRoaW5ncyBmcm9t
CmdldHRpbmcgd29yc2Ugd2hlbiB0aGUgbWFjaGluZSBpcyBkeWluZy4gSSBjYW4gdHJ5IGFuZCBz
dHVmZiB0aGlzIChvcgpzb21ldGhpbmcgbGlrZSB0aGlzLCBJIGhvbmVzdGx5IGhhdmUgbm8gaWRl
YSBhYm91dCBjcHUgaGFuZGxpbmcgY29kZQpzbyBubyBpZGVhIHdoYXQncyByZWFzb25hYmxlKSBp
bnRvIG91ciBDSSBhbmQgc2VlIHdoYXQgaGFwcGVucy4KClRoYW5rcywgRGFuaWVsCgo+ICAgICAg
ICAgICAgICAgICBXQVJOKDEsICJzY2hlZDogVW5leHBlY3RlZCByZXNjaGVkdWxlIG9mIG9mZmxp
bmUgQ1BVIyVkIVxuIiwgY3B1KTsKPiAgICAgICAgICAgICAgICAgcmV0dXJuOwo+ICAgICAgICAg
fQoKCgotLSAKRGFuaWVsIFZldHRlcgpTb2Z0d2FyZSBFbmdpbmVlciwgSW50ZWwgQ29ycG9yYXRp
b24KKzQxICgwKSA3OSAzNjUgNTcgNDggLSBodHRwOi8vYmxvZy5mZndsbC5jaApfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBs
aXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
