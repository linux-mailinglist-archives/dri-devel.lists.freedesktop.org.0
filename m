Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 172A95E65B
	for <lists+dri-devel@lfdr.de>; Wed,  3 Jul 2019 16:18:30 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 02B836E14A;
	Wed,  3 Jul 2019 14:18:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x543.google.com (mail-ed1-x543.google.com
 [IPv6:2a00:1450:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 111576E14A
 for <dri-devel@lists.freedesktop.org>; Wed,  3 Jul 2019 14:18:26 +0000 (UTC)
Received: by mail-ed1-x543.google.com with SMTP id k8so2257959eds.7
 for <dri-devel@lists.freedesktop.org>; Wed, 03 Jul 2019 07:18:26 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=8yk0cmMEv+0MRszdLD3dUEUWJ8XlSxTYFd0KIq4hn+w=;
 b=gu5baDPy5Zzc0gRI0EIcNrPwIr+OyhScbtDCtMEZKYaHEkYVm+a8dnh1C0Cq1Rn4cO
 XS8r4BAFXyj23K+YTt35Ra0mKA2JxCSjnJBki0Ii1obX4Zs+Y+HdWrqgOOgo7aaEcw1x
 VWplSAC8cXbU5nUlhUWq6MWKP0oLCaFUMPQBwN9BnJIwTpfh8cql47HETrPWNW7HG4lI
 NHgJYyd3v1DSCVSUGE0m0sPBygnv6Lgg7khQ/6OQccYhZo2Zn6zBRV4vafR9YvFXmmhG
 wg6KVlbN9fE86AUowsexmr9KTQ24dO4nK7sVXP3FuBOOmxXYNMEg0wFNMyU0NlSK4HOd
 NmNQ==
X-Gm-Message-State: APjAAAVclgVGy0H+hPGJM9H5zuyrHWuZNHSlmvYKBKkMXHanhHjXxxpy
 U894XI28diis9WHFiUWMo6kcteH+ivMwYq4BuWM=
X-Google-Smtp-Source: APXvYqx0+oVtdHnixNwuU8fi/y+kTfkvf4ofilsk/qeaDhAQAHX/OpYwYivYh196b63WJsMfSphgpalrxzaAtAr6VTA=
X-Received: by 2002:a50:9468:: with SMTP id q37mr42530358eda.163.1562163505578; 
 Wed, 03 Jul 2019 07:18:25 -0700 (PDT)
MIME-Version: 1.0
References: <20190702202631.32148-1-robdclark@gmail.com>
 <20190702202631.32148-2-robdclark@gmail.com>
 <2d612bbc-2d2d-f718-1499-79d5a55e0d00@arm.com>
In-Reply-To: <2d612bbc-2d2d-f718-1499-79d5a55e0d00@arm.com>
From: Rob Clark <robdclark@gmail.com>
Date: Wed, 3 Jul 2019 07:18:09 -0700
Message-ID: <CAF6AEGvp1yUquP2JnSWuOSpVscj+BXqkuK+7bHmAKuL3LL2ZaQ@mail.gmail.com>
Subject: Re: [PATCH 1/2] iommu: add support for drivers that manage iommu
 explicitly
To: Robin Murphy <robin.murphy@arm.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=8yk0cmMEv+0MRszdLD3dUEUWJ8XlSxTYFd0KIq4hn+w=;
 b=VBVktxWHDr/tcb4xMnf3yUMnjauIkACQ8w4TsjDkKJA0yHi/rKxm04J42qgrHUDJ6m
 2kGNQFeB3/8j0J1I380Caebl4y9dHK7AQfbdoBEmzVtuWOVL67qlrULGwtq8L83HgU23
 0/R+pMDqzoGh71vihJQaxt21fKME6ffuSsFp0FZe8TLhxHM2JqWFJMbua6tAoWhVjVag
 yZqZPY1QZDiQiq9jDz4QQmUa7Qqv6fGCuJMOXA8Myl0lgeEyT7jwxAGisrfHJpwUWFZr
 Dg9jDaQ4l70Wdy+/P83ey9vaYwwF33B+ljifhDqV33Jwe51HrJtZ/Ab5662GBfGHTPnf
 1W8g==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rob Clark <robdclark@chromium.org>, aarch64-laptops@lists.linaro.org,
 Ulf Hansson <ulf.hansson@linaro.org>,
 Heikki Krogerus <heikki.krogerus@linux.intel.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Bartosz Golaszewski <brgl@bgdev.pl>,
 "Rafael J. Wysocki" <rafael.j.wysocki@intel.com>,
 Rasmus Villemoes <linux@rasmusvillemoes.dk>,
 Linux Kernel Mailing List <linux-kernel@vger.kernel.org>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Bjorn Andersson <bjorn.andersson@linaro.org>,
 "list@263.net:IOMMU DRIVERS <iommu@lists.linux-foundation.org>,
 Joerg Roedel <joro@8bytes.org>, " <iommu@lists.linux-foundation.org>,
 Sudeep Holla <sudeep.holla@arm.com>, Joe Perches <joe@perches.com>,
 linux-arm-msm <linux-arm-msm@vger.kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBKdWwgMywgMjAxOSBhdCA1OjQyIEFNIFJvYmluIE11cnBoeSA8cm9iaW4ubXVycGh5
QGFybS5jb20+IHdyb3RlOgo+Cj4gT24gMDIvMDcvMjAxOSAyMToyNiwgUm9iIENsYXJrIHdyb3Rl
Ogo+ID4gRnJvbTogUm9iIENsYXJrIDxyb2JkY2xhcmtAY2hyb21pdW0ub3JnPgo+ID4KPiA+IEF2
b2lkIGF0dGFjaGluZyBhbnkgbm9uLWRyaXZlciBtYW5hZ2VkIGRvbWFpbiBpZiB0aGUgZHJpdmVy
IGluZGljYXRlcwo+ID4gdGhhdCBpdCBtYW5hZ2VzIHRoZSBpb21tdSBkaXJlY3RseS4KPiA+Cj4g
PiBUaGlzIHNvbHZlcyBhIGNvdXBsZSBwcm9ibGVtcyB0aGF0IGRybS9tc20gKyBhcm0tc21tdSBo
YXMgd2l0aCB0aGUgaW9tbXUKPiA+IGZyYW1ld29yazoKPiA+Cj4gPiAxKSBJbiBzb21lIGNhc2Vz
IHRoZSBib290bG9hZGVyIHRha2VzIHRoZSBpb21tdSBvdXQgb2YgYnlwYXNzIGFuZAo+ID4gICAg
IGVuYWJsZXMgdGhlIGRpc3BsYXkuICBUaGlzIGlzIGluIHBhcnRpY3VsYXIgYSBwcm9ibGVtIG9u
IHRoZSBhYXJjaDY0Cj4gPiAgICAgbGFwdG9wcyB0aGF0IGV4aXN0IHRoZXNlIGRheXMsIGFuZCBt
b2Rlcm4gc25hcGRyYWdvbiBhbmRyb2lkIGRldmljZXMuCj4gPiAgICAgKE9sZGVyIGRldmljZXMg
YWxzbyBlbmFibGVkIHRoZSBkaXNwbGF5IGluIGJvb3Rsb2FkZXIgYnV0IGRpZCBub3QKPiA+ICAg
ICB0YWtlIHRoZSBpb21tdSBvdXQgb2YgYnlwYXNzLikgIEF0dGFjaGluZyBhIERNQSBvciBJREVO
VElUWSBkb21haW4KPiA+ICAgICB3aGlsZSBzY2Fub3V0IGlzIGFjdGl2ZSwgYmVmb3JlIHRoZSBk
cml2ZXIgaGFzIGEgY2hhbmNlIHRvIGludGVydmVuZSwKPiA+ICAgICBtYWtlcyB0aGluZ3MgZ28g
KmJvb20qCj4KPiBJbiB0aGUgZ2VuZXJhbCBjYXNlLCB3ZSBoYXZlIHRvIGFzc3VtZSB0aGF0IHRo
aW5ncyBhbHJlYWR5IHdlbnQgYm9vbQo+IGxvbmcgYWdvLCBhcyBzb29uIGFzIHRoZSBJT01NVSBp
dHNlbGYgd2FzIHByb2JlZCBhbmQgcmVzZXQuIEJ5IHRoZSB0aW1lCj4gd2UgZ2V0IHRvIHRoZSBw
b2ludCBvZiBiaW5kaW5nIG9mIGEgY2xpZW50IGRyaXZlciwgYWxzbyBhc3N1bWUgdGhhdCB0aGUK
PiBJT01NVSBpcyBhbHJlYWR5IHBvd2VyZWQgb2ZmIGFuZCBzdG9wcGluZyB0cmFmZmljIGJlY2F1
c2UgdGhlIFJQTSBkZXZpY2UKPiBsaW5rcyBhcmVuJ3QgaW4gcGxhY2UgeWV0IGFuZCBpdCBiZWxp
ZXZlcyBpdHNlbGYgdW51c2VkLgoKeW91IGFyZSBjb3JyZWN0IHRoYXQgdGhpcyBpcyBvbmx5IHBh
cnQgb2Ygd2hhdCBpcyBuZWVkZWQgdG8gZ2V0IHRoaW5ncwp3b3JraW5nLiAgV2UgYWxzbyBuZWVk
IEJqb3JuJ3MgcGF0Y2ggc2V0IHRvIGluaGVyaXQgU01SIGFuZCBDQiBjb25maWcKZHVyaW5nIGlu
aXQ6CgpodHRwczovL3d3dy5zcGluaWNzLm5ldC9saXN0cy9hcm0ta2VybmVsL21zZzczMjI0Ni5o
dG1sCgo+Cj4gPiAyKSBXZSBhcmUgY3VycmVudGx5IGJsb2NrZWQgb24gbGFuZGluZyBzdXBwb3J0
IGZvciBHUFUgcGVyLWNvbnRleHQKPiA+ICAgICBwYWdldGFibGVzIGJlY2F1c2Ugb2YgdGhlIGRv
bWFpbiBhdHRhY2hlZCBiZWZvcmUgZHJpdmVyJ3MgLT5wcm9iZSgpCj4gPiAgICAgaXMgY2FsbGVk
Lgo+Cj4gSSdtIGdldHRpbmcgYSBsaXR0bGUgZmVkIHVwIG9mIGV4cGxhaW5pbmcgdGhhdCB0aGF0
IHByb2JsZW0gaXMgc3BlY2lmaWMKPiB0byB0aGUgY3VycmVudCBiZWhhdmlvdXIgb2Ygb25lIHBh
cnRpY3VsYXIgSU9NTVUgZHJpdmVyIGFuZCB0cnlpbmcgdG8KPiB3b3JrIGFyb3VuZCBpdCBhbnl3
aGVyZSBvdGhlciB0aGFuIGluIHRoYXQgZHJpdmVyIGlzIGF0IGJlc3QgYW4KPiB1bnJlbGlhYmxl
IGhhY2suCgpQZXJoYXBzIHRoZSBHUFUgcGFydCBvZiB0aGUgcHJvYmxlbS4gIFRoZSBkaXNwbGF5
IHBhcnQgaXMgbm90LgpIb3dldmVyIEknbSBmaW5lIHRvIG1vdmUgdGhlICJkb24ndCBhY3R1YWxs
eSBhdHRhY2giIHBhcnQgaW50bwphcm0tc21tdSBpZiB0aGF0IGlzIHByZWZlcnJlZC4gIFRoZSBu
ZXh0IHBlcnNvbiB0byBoaXQgdGhlIHNhbWUKcHJvYmxlbSBvbiBhIGRpZmZlcmVudCBpb21tdSBj
b3VsZCBjZXJ0YWlubHkgbW92ZSB0aGUgY2hlY2sgb3IgY29weSBpdAppbnRvIHRoZWlyIGlvbW11
IGRyaXZlci4KCj4gPiBUaGlzIHNvbHZlcyBib3RoIHByb2JsZW1zLgo+Cj4gRm9yIGEgdmVyeSwg
dmVyeSBzcGVjaWZpYyB2YWx1ZSBvZiAic29sdmUiLi4uIDspCgp3ZWxsLCAic29sdmUiID09ICJp
dCBib290cyBmaW5lIGFuZCBkb2Vzbid0IGV4cGxvZGUiLi4KCkknbSBjZXJ0YWlubHkgaGFwcHkg
dG8gZW50ZXJ0YWluIGFsdGVybmF0aXZlIHN1Z2dlc3Rpb25zLCBidXQgdGhlc2UKYXJlIHJlYWwg
cHJvYmxlbXMgdGhhdCBuZWVkIHNvbHV0aW9ucy4KCkJSLAotUgoKPiA+IFNpZ25lZC1vZmYtYnk6
IFJvYiBDbGFyayA8cm9iZGNsYXJrQGNocm9taXVtLm9yZz4KPiA+IC0tLQo+ID4gICBkcml2ZXJz
L2lvbW11L2lvbW11LmMgIHwgMTEgKysrKysrKysrKysKPiA+ICAgaW5jbHVkZS9saW51eC9kZXZp
Y2UuaCB8ICAzICsrLQo+ID4gICAyIGZpbGVzIGNoYW5nZWQsIDEzIGluc2VydGlvbnMoKyksIDEg
ZGVsZXRpb24oLSkKPiA+Cj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9pb21tdS9pb21tdS5jIGIv
ZHJpdmVycy9pb21tdS9pb21tdS5jCj4gPiBpbmRleCAwYzY3NGQ4MGMzN2YuLmVmYTA5NTdmOTc3
MiAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvaW9tbXUvaW9tbXUuYwo+ID4gKysrIGIvZHJpdmVy
cy9pb21tdS9pb21tdS5jCj4gPiBAQCAtMTU3Myw2ICsxNTczLDE3IEBAIHN0YXRpYyBpbnQgX19p
b21tdV9hdHRhY2hfZGV2aWNlKHN0cnVjdCBpb21tdV9kb21haW4gKmRvbWFpbiwKPiA+ICAgICAg
ICAgICBkb21haW4tPm9wcy0+aXNfYXR0YWNoX2RlZmVycmVkKGRvbWFpbiwgZGV2KSkKPiA+ICAg
ICAgICAgICAgICAgcmV0dXJuIDA7Cj4gPgo+ID4gKyAgICAgLyoKPiA+ICsgICAgICAqIElmIGRy
aXZlciBpcyBnb2luZyB0byBtYW5hZ2UgaW9tbXUgZGlyZWN0bHksIHRoZW4gYXZvaWQKPiA+ICsg
ICAgICAqIGF0dGFjaGluZyBhbnkgbm9uIGRyaXZlciBtYW5hZ2VkIGRvbWFpbi4gIFRoZXJlIGNv
dWxkCj4gPiArICAgICAgKiBiZSBhbHJlYWR5IGFjdGl2ZSBkbWEgdW5kZXJ3YXkgKGllLiBzY2Fu
b3V0IGluIGNhc2Ugb2YKPiA+ICsgICAgICAqIGJvb3Rsb2FkZXIgZW5hYmxlZCBkaXNwbGF5KSwg
YW5kIGludGVyZmVyaW5nIHdpdGggdGhhdAo+ID4gKyAgICAgICogd2lsbCBtYWtlIHRoaW5ncyBn
byAqYm9vbSoKPiA+ICsgICAgICAqLwo+ID4gKyAgICAgaWYgKChkb21haW4tPnR5cGUgIT0gSU9N
TVVfRE9NQUlOX1VOTUFOQUdFRCkgJiYKPiA+ICsgICAgICAgICBkZXYtPmRyaXZlciAmJiBkZXYt
PmRyaXZlci0+ZHJpdmVyX21hbmFnZXNfaW9tbXUpCj4gPiArICAgICAgICAgICAgIHJldHVybiAw
Owo+Cj4gVGhpcyBsZWF2aW5nIHRoaW5ncyBoYWxmLWhhbmdpbmcgaXMgcmVhbGx5IHVnbHksIGJ1
dCBtb3JlIHRoYW4gdGhhdCBpdAo+IGFzc3VtZXMgdGhhdCBhbGxvY2F0aW5nIGEgZGVmYXVsdCBk
b21haW4gaW4gdGhlIGZpcnN0IHBsYWNlIGlzbid0Cj4gZGlzcnVwdGl2ZSAtIEknbSBub3QgMTAw
JSBzdXJlIHRoYXQncyAqYWx3YXlzKiB0aGUgY2FzZSB0b2RheSwgYW5kIGl0J3MKPiBkZWZpbml0
ZWx5IGxpa2VseSB0byBjaGFuZ2UgaW4gZnV0dXJlIGFzIHBhcnQgb2YgaW1wcm92aW5nIHRoZSBj
dXJyZW50Cj4gcmVxdWVzdF9kbV9mb3JfZGV2KCkgbWVjaGFuaXNtLiBBcyBpdCBoYXBwZW5zLCB0
aG9zZSBwcm9wb3NlZCBjaGFuZ2VzCj4gd291bGQgbm90IG9ubHkgYnJlYWsgdGhpcyBpZGVhLCBi
dXQgbWFrZSBpdCByZWR1bmRhbnQsIHNpbmNlIHRoZXkncmUKPiBhYm91dCBmb3JjaW5nIHRoZSBk
ZWZhdWx0IGRvbWFpbiB0eXBlIHRvIHBhc3N0aHJvdWdoIG9uIGEgcGVyLWRldmljZQo+IGJhc2lz
LCB3aGljaCBsZWFkcyB0byBhbiBlcXVpdmFsZW50IGVuZCByZXN1bHQgdG8gdGhpcyBwYXRjaCwg
YnV0IGluIGEKPiBjbGVhbmVyIGFuZCBtb3JlIHJvYnVzdCBtYW5uZXIuCj4KPiBSb2Jpbi4KPgo+
ID4gKwo+ID4gICAgICAgaWYgKHVubGlrZWx5KGRvbWFpbi0+b3BzLT5hdHRhY2hfZGV2ID09IE5V
TEwpKQo+ID4gICAgICAgICAgICAgICByZXR1cm4gLUVOT0RFVjsKPiA+Cj4gPiBkaWZmIC0tZ2l0
IGEvaW5jbHVkZS9saW51eC9kZXZpY2UuaCBiL2luY2x1ZGUvbGludXgvZGV2aWNlLmgKPiA+IGlu
ZGV4IGUxMzhiYWFiZTAxZS4uZDk4YWE0ZDNjOGMzIDEwMDY0NAo+ID4gLS0tIGEvaW5jbHVkZS9s
aW51eC9kZXZpY2UuaAo+ID4gKysrIGIvaW5jbHVkZS9saW51eC9kZXZpY2UuaAo+ID4gQEAgLTI4
Miw3ICsyODIsOCBAQCBzdHJ1Y3QgZGV2aWNlX2RyaXZlciB7Cj4gPiAgICAgICBzdHJ1Y3QgbW9k
dWxlICAgICAgICAgICAqb3duZXI7Cj4gPiAgICAgICBjb25zdCBjaGFyICAgICAgICAgICAgICAq
bW9kX25hbWU7ICAgICAgLyogdXNlZCBmb3IgYnVpbHQtaW4gbW9kdWxlcyAqLwo+ID4KPiA+IC0g
ICAgIGJvb2wgc3VwcHJlc3NfYmluZF9hdHRyczsgICAgICAgLyogZGlzYWJsZXMgYmluZC91bmJp
bmQgdmlhIHN5c2ZzICovCj4gPiArICAgICBib29sIHN1cHByZXNzX2JpbmRfYXR0cnM6MTsgICAg
IC8qIGRpc2FibGVzIGJpbmQvdW5iaW5kIHZpYSBzeXNmcyAqLwo+ID4gKyAgICAgYm9vbCBkcml2
ZXJfbWFuYWdlc19pb21tdToxOyAgICAvKiBkcml2ZXIgbWFuYWdlcyBJT01NVSBleHBsaWNpdGx5
ICovCj4gPiAgICAgICBlbnVtIHByb2JlX3R5cGUgcHJvYmVfdHlwZTsKPiA+Cj4gPiAgICAgICBj
b25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkICAgICAgICpvZl9tYXRjaF90YWJsZTsKPiA+Cl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
