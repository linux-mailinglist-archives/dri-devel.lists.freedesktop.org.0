Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id ED5D39A506
	for <lists+dri-devel@lfdr.de>; Fri, 23 Aug 2019 03:40:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AD6A26EB95;
	Fri, 23 Aug 2019 01:40:56 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id ADFF76EB95
 for <dri-devel@lists.freedesktop.org>; Fri, 23 Aug 2019 01:40:52 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 0256433D;
 Fri, 23 Aug 2019 03:40:48 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 2/2] drm/bridge: panel: Use drm_panel.type instead of explicit
 connector_type
Date: Fri, 23 Aug 2019 04:40:33 +0300
Message-Id: <20190823014033.2971-2-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190823014033.2971-1-laurent.pinchart@ideasonboard.com>
References: <20190823014033.2971-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1566524450;
 bh=DBkbBx2jegueoNN5wPU1fCBTl5IXRaDwB+IxLUPmOJY=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=B4AGBn2F8CibemnufYfvL2dayYVwmkCn6unFQrkPVkuS8DpG5zkdqdAt1yNeHt55i
 FVt2CuSWrw/MelWvFOpNyWIbjI+15+XMqo23qH7oY3tGCxsp/aniXkRRbhhwf7VZtE
 XduXCkF4Y1YnkWPW9PVMAghjIeRi7UGUDlanvwHk=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Alexandre Belloni <alexandre.belloni@bootlin.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>,
 Philippe Cornu <philippe.cornu@st.com>, Paul Cercueil <paul@crapouillou.net>,
 Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Ludovic Desroches <ludovic.desroches@microchip.com>,
 Boris Brezillon <boris.brezillon@collabora.com>,
 Jagan Teki <jagan@amarulasolutions.com>, Robert Chiras <robert.chiras@nxp.com>,
 Alexandre Torgue <alexandre.torgue@st.com>, Jonas Karlman <jonas@kwiboo.se>,
 Jyri Sarha <jsarha@ti.com>, Vincent Abriou <vincent.abriou@st.com>,
 Jernej Skrabec <jernej.skrabec@siol.net>, Purism Kernel Team <kernel@puri.sm>,
 Stefan Mavrodiev <stefan@olimex.com>,
 Nicolas Ferre <nicolas.ferre@microchip.com>,
 Yannick Fertre <yannick.fertre@st.com>,
 Kieran Bingham <kieran.bingham+renesas@ideasonboard.com>,
 Maxime Coquelin <mcoquelin.stm32@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGRybSBwYW5lbCBicmlkZ2UgY3JlYXRlcyBhIGNvbm5lY3RvciB1c2luZyBhIGNvbm5lY3Rv
ciB0eXBlIGV4cGxpY2l0CnBhc3NlZCBieSB0aGUgZGlzcGxheSBjb250cm9sbGVyIG9yIGJyaWRn
ZSBkcml2ZXIgdGhhdCBpbnN0YW50aWF0ZXMgdGhlCnBhbmVsIGJyaWRnZS4gTm93IHRoYXQgZHJt
X3BhbmVsIHJlcG9ydHMgaXRzIGNvbm5lY3RvciB0eXBlLCB1c2UgaXQgYW5kCnJlbW92ZSB0aGUg
Y29ubmVjdG9yX3R5cGUgYXJndW1lbnQgdG8gZHJtX3BhbmVsX2JyaWRnZV9hZGQoKSBhbmQKZGV2
bV9kcm1fcGFuZWxfYnJpZGdlX2FkZCgpLgoKU2lnbmVkLW9mZi1ieTogTGF1cmVudCBQaW5jaGFy
dCA8bGF1cmVudC5waW5jaGFydEBpZGVhc29uYm9hcmQuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9hdG1lbC1obGNkYy9hdG1lbF9obGNkY19vdXRwdXQuYyB8ICAyICstCiBkcml2ZXJzL2dwdS9k
cm0vYnJpZGdlL2NkbnMtZHNpLmMgICAgICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS9sdmRzLWVuY29kZXIuYyAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1
L2RybS9icmlkZ2UvcGFuZWwuYyAgICAgICAgICAgICAgICAgICB8IDE2ICsrKystLS0tLS0tLS0t
LS0KIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctbWlwaS1kc2kuYyAgICB8ICAy
ICstCiBkcml2ZXJzL2dwdS9kcm0vaW5nZW5pYy9pbmdlbmljLWRybS5jICAgICAgICAgICAgfCAg
NiArKy0tLS0KIGRyaXZlcnMvZ3B1L2RybS9tY2RlL21jZGVfZHNpLmMgICAgICAgICAgICAgICAg
ICB8ICAzICstLQogZHJpdmVycy9ncHUvZHJtL3BsMTExL3BsMTExX2Rydi5jICAgICAgICAgICAg
ICAgIHwgIDMgKy0tCiBkcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2VuY29kZXIuYyAg
ICAgICAgfCAgMyArLS0KIGRyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9yZ2IuYyAg
ICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vc3RtL2x0ZGMuYyAgICAgICAgICAgICAg
ICAgICAgICAgfCAgMyArLS0KIGRyaXZlcnMvZ3B1L2RybS90aWxjZGMvdGlsY2RjX2V4dGVybmFs
LmMgICAgICAgICB8ICAzICstLQogZHJpdmVycy9ncHUvZHJtL3R2ZTIwMC90dmUyMDBfZHJ2LmMg
ICAgICAgICAgICAgIHwgIDMgKy0tCiBkcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kcGkuYyAgICAg
ICAgICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfZHNpLmMgICAg
ICAgICAgICAgICAgICAgIHwgIDMgKy0tCiBpbmNsdWRlL2RybS9kcm1fYnJpZGdlLmggICAgICAg
ICAgICAgICAgICAgICAgICAgfCAgNiArKy0tLS0KIDE2IGZpbGVzIGNoYW5nZWQsIDIxIGluc2Vy
dGlvbnMoKyksIDQwIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
dG1lbC1obGNkYy9hdG1lbF9obGNkY19vdXRwdXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9hdG1lbC1o
bGNkYy9hdG1lbF9obGNkY19vdXRwdXQuYwppbmRleCBjMzg4NDk3MzY2Y2EuLjM0Y2UzODIxNzM1
MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2F0bWVsLWhsY2RjL2F0bWVsX2hsY2RjX291
dHB1dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hdG1lbC1obGNkYy9hdG1lbF9obGNkY19vdXRw
dXQuYwpAQCAtMTA3LDcgKzEwNyw3IEBAIHN0YXRpYyBpbnQgYXRtZWxfaGxjZGNfYXR0YWNoX2Vu
ZHBvaW50KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIGludCBlbmRwb2ludCkKIAlvdXRwdXQtPmVu
Y29kZXIucG9zc2libGVfY3J0Y3MgPSAweDE7CiAKIAlpZiAocGFuZWwpIHsKLQkJYnJpZGdlID0g
ZHJtX3BhbmVsX2JyaWRnZV9hZGQocGFuZWwsIERSTV9NT0RFX0NPTk5FQ1RPUl9Vbmtub3duKTsK
KwkJYnJpZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9hZGQocGFuZWwpOwogCQlpZiAoSVNfRVJSKGJy
aWRnZSkpCiAJCQlyZXR1cm4gUFRSX0VSUihicmlkZ2UpOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9icmlkZ2UvY2Rucy1kc2kuYyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvY2Ru
cy1kc2kuYwppbmRleCAyYWY3ZjI1Yzc0MTMuLmFhMTA5YjVkYzQxYyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2JyaWRnZS9jZG5zLWRzaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9icmlk
Z2UvY2Rucy1kc2kuYwpAQCAtOTU4LDcgKzk1OCw3IEBAIHN0YXRpYyBpbnQgY2Ruc19kc2lfYXR0
YWNoKHN0cnVjdCBtaXBpX2RzaV9ob3N0ICpob3N0LAogCiAJcGFuZWwgPSBvZl9kcm1fZmluZF9w
YW5lbChucCk7CiAJaWYgKCFJU19FUlIocGFuZWwpKSB7Ci0JCWJyaWRnZSA9IGRybV9wYW5lbF9i
cmlkZ2VfYWRkKHBhbmVsLCBEUk1fTU9ERV9DT05ORUNUT1JfRFNJKTsKKwkJYnJpZGdlID0gZHJt
X3BhbmVsX2JyaWRnZV9hZGQocGFuZWwpOwogCX0gZWxzZSB7CiAJCWJyaWRnZSA9IG9mX2RybV9m
aW5kX2JyaWRnZShkZXYtPmRldi5vZl9ub2RlKTsKIAkJaWYgKCFicmlkZ2UpCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2x2ZHMtZW5jb2Rlci5jIGIvZHJpdmVycy9ncHUvZHJt
L2JyaWRnZS9sdmRzLWVuY29kZXIuYwppbmRleCA5ZWJjNzUwNDQ5Y2YuLjdiMDNiYTY1NjczZCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9sdmRzLWVuY29kZXIuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vYnJpZGdlL2x2ZHMtZW5jb2Rlci5jCkBAIC0xMDcsNyArMTA3LDcgQEAg
c3RhdGljIGludCBsdmRzX2VuY29kZXJfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRl
dikKIAl9CiAKIAlsdmRzX2VuY29kZXItPnBhbmVsX2JyaWRnZSA9Ci0JCWRldm1fZHJtX3BhbmVs
X2JyaWRnZV9hZGQoZGV2LCBwYW5lbCwgRFJNX01PREVfQ09OTkVDVE9SX0xWRFMpOworCQlkZXZt
X2RybV9wYW5lbF9icmlkZ2VfYWRkKGRldiwgcGFuZWwpOwogCWlmIChJU19FUlIobHZkc19lbmNv
ZGVyLT5wYW5lbF9icmlkZ2UpKQogCQlyZXR1cm4gUFRSX0VSUihsdmRzX2VuY29kZXItPnBhbmVs
X2JyaWRnZSk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvcGFuZWwuYyBi
L2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvcGFuZWwuYwppbmRleCBmNWI4ZTU1MzAxYWMuLjkxMmIw
ZTllY2Q1ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9wYW5lbC5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvcGFuZWwuYwpAQCAtMTYsNyArMTYsNiBAQCBzdHJ1Y3Qg
cGFuZWxfYnJpZGdlIHsKIAlzdHJ1Y3QgZHJtX2JyaWRnZSBicmlkZ2U7CiAJc3RydWN0IGRybV9j
b25uZWN0b3IgY29ubmVjdG9yOwogCXN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsOwotCXUzMiBjb25u
ZWN0b3JfdHlwZTsKIH07CiAKIHN0YXRpYyBpbmxpbmUgc3RydWN0IHBhbmVsX2JyaWRnZSAqCkBA
IC03Miw3ICs3MSw3IEBAIHN0YXRpYyBpbnQgcGFuZWxfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJt
X2JyaWRnZSAqYnJpZGdlLAogCiAJcmV0ID0gZHJtX2Nvbm5lY3Rvcl9pbml0KGJyaWRnZS0+ZGV2
LCBjb25uZWN0b3IsCiAJCQkJICZwYW5lbF9icmlkZ2VfY29ubmVjdG9yX2Z1bmNzLAotCQkJCSBw
YW5lbF9icmlkZ2UtPmNvbm5lY3Rvcl90eXBlKTsKKwkJCQkgcGFuZWxfYnJpZGdlLT5wYW5lbC0+
dHlwZSk7CiAJaWYgKHJldCkgewogCQlEUk1fRVJST1IoIkZhaWxlZCB0byBpbml0aWFsaXplIGNv
bm5lY3RvclxuIik7CiAJCXJldHVybiByZXQ7CkBAIC0xMzcsOCArMTM2LDYgQEAgc3RhdGljIGNv
bnN0IHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIHBhbmVsX2JyaWRnZV9icmlkZ2VfZnVuY3MgPSB7
CiAgKiBqdXN0IGNhbGxzIHRoZSBhcHByb3ByaWF0ZSBmdW5jdGlvbnMgZnJvbSAmZHJtX3BhbmVs
LgogICoKICAqIEBwYW5lbDogVGhlIGRybV9wYW5lbCBiZWluZyB3cmFwcGVkLiAgTXVzdCBiZSBu
b24tTlVMTC4KLSAqIEBjb25uZWN0b3JfdHlwZTogVGhlIERSTV9NT0RFX0NPTk5FQ1RPUl8qIGZv
ciB0aGUgY29ubmVjdG9yIHRvIGJlCi0gKiBjcmVhdGVkLgogICoKICAqIEZvciBkcml2ZXJzIGNv
bnZlcnRpbmcgZnJvbSBkaXJlY3RseSB1c2luZyBkcm1fcGFuZWw6IFRoZSBleHBlY3RlZAogICog
dXNhZ2UgcGF0dGVybiBpcyB0aGF0IGR1cmluZyBlaXRoZXIgZW5jb2RlciBtb2R1bGUgcHJvYmUg
b3IgRFNJCkBAIC0xNTUsOCArMTUyLDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fYnJpZGdl
X2Z1bmNzIHBhbmVsX2JyaWRnZV9icmlkZ2VfZnVuY3MgPSB7CiAgKiBTZWUgZGV2bV9kcm1fcGFu
ZWxfYnJpZGdlX2FkZCgpIGZvciBhbiBhdXRvbWF0aWNhbGx5IG1hbmdlZCB2ZXJzaW9uIG9mIHRo
aXMKICAqIGZ1bmN0aW9uLgogICovCi1zdHJ1Y3QgZHJtX2JyaWRnZSAqZHJtX3BhbmVsX2JyaWRn
ZV9hZGQoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwsCi0JCQkJCXUzMiBjb25uZWN0b3JfdHlwZSkK
K3N0cnVjdCBkcm1fYnJpZGdlICpkcm1fcGFuZWxfYnJpZGdlX2FkZChzdHJ1Y3QgZHJtX3BhbmVs
ICpwYW5lbCkKIHsKIAlzdHJ1Y3QgcGFuZWxfYnJpZGdlICpwYW5lbF9icmlkZ2U7CiAKQEAgLTE2
OCw3ICsxNjQsNiBAQCBzdHJ1Y3QgZHJtX2JyaWRnZSAqZHJtX3BhbmVsX2JyaWRnZV9hZGQoc3Ry
dWN0IGRybV9wYW5lbCAqcGFuZWwsCiAJaWYgKCFwYW5lbF9icmlkZ2UpCiAJCXJldHVybiBFUlJf
UFRSKC1FTk9NRU0pOwogCi0JcGFuZWxfYnJpZGdlLT5jb25uZWN0b3JfdHlwZSA9IGNvbm5lY3Rv
cl90eXBlOwogCXBhbmVsX2JyaWRnZS0+cGFuZWwgPSBwYW5lbDsKIAogCXBhbmVsX2JyaWRnZS0+
YnJpZGdlLmZ1bmNzID0gJnBhbmVsX2JyaWRnZV9icmlkZ2VfZnVuY3M7CkBAIC0yMTcsMTUgKzIx
MiwxMiBAQCBzdGF0aWMgdm9pZCBkZXZtX2RybV9wYW5lbF9icmlkZ2VfcmVsZWFzZShzdHJ1Y3Qg
ZGV2aWNlICpkZXYsIHZvaWQgKnJlcykKICAqIHRoYXQganVzdCBjYWxscyB0aGUgYXBwcm9wcmlh
dGUgZnVuY3Rpb25zIGZyb20gJmRybV9wYW5lbC4KICAqIEBkZXY6IGRldmljZSB0byB0aWUgdGhl
IGJyaWRnZSBsaWZldGltZSB0bwogICogQHBhbmVsOiBUaGUgZHJtX3BhbmVsIGJlaW5nIHdyYXBw
ZWQuICBNdXN0IGJlIG5vbi1OVUxMLgotICogQGNvbm5lY3Rvcl90eXBlOiBUaGUgRFJNX01PREVf
Q09OTkVDVE9SXyogZm9yIHRoZSBjb25uZWN0b3IgdG8gYmUKLSAqIGNyZWF0ZWQuCiAgKgogICog
VGhpcyBpcyB0aGUgbWFuYWdlZCB2ZXJzaW9uIG9mIGRybV9wYW5lbF9icmlkZ2VfYWRkKCkgd2hp
Y2ggYXV0b21hdGljYWxseQogICogY2FsbHMgZHJtX3BhbmVsX2JyaWRnZV9yZW1vdmUoKSB3aGVu
IEBkZXYgaXMgdW5ib3VuZC4KICAqLwogc3RydWN0IGRybV9icmlkZ2UgKmRldm1fZHJtX3BhbmVs
X2JyaWRnZV9hZGQoc3RydWN0IGRldmljZSAqZGV2LAotCQkJCQkgICAgIHN0cnVjdCBkcm1fcGFu
ZWwgKnBhbmVsLAotCQkJCQkgICAgIHUzMiBjb25uZWN0b3JfdHlwZSkKKwkJCQkJICAgICBzdHJ1
Y3QgZHJtX3BhbmVsICpwYW5lbCkKIHsKIAlzdHJ1Y3QgZHJtX2JyaWRnZSAqKnB0ciwgKmJyaWRn
ZTsKIApAQCAtMjM0LDcgKzIyNiw3IEBAIHN0cnVjdCBkcm1fYnJpZGdlICpkZXZtX2RybV9wYW5l
bF9icmlkZ2VfYWRkKHN0cnVjdCBkZXZpY2UgKmRldiwKIAlpZiAoIXB0cikKIAkJcmV0dXJuIEVS
Ul9QVFIoLUVOT01FTSk7CiAKLQlicmlkZ2UgPSBkcm1fcGFuZWxfYnJpZGdlX2FkZChwYW5lbCwg
Y29ubmVjdG9yX3R5cGUpOworCWJyaWRnZSA9IGRybV9wYW5lbF9icmlkZ2VfYWRkKHBhbmVsKTsK
IAlpZiAoIUlTX0VSUihicmlkZ2UpKSB7CiAJCSpwdHIgPSBicmlkZ2U7CiAJCWRldnJlc19hZGQo
ZGV2LCBwdHIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9k
dy1taXBpLWRzaS5jIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1taXBpLWRz
aS5jCmluZGV4IDkyNDVkZGUzMTRhOC4uNWI4N2MzZWJiMzkzIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LW1pcGktZHNpLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1taXBpLWRzaS5jCkBAIC0zMTYsNyArMzE2LDcgQEAgc3Rh
dGljIGludCBkd19taXBpX2RzaV9ob3N0X2F0dGFjaChzdHJ1Y3QgbWlwaV9kc2lfaG9zdCAqaG9z
dCwKIAkJcmV0dXJuIHJldDsKIAogCWlmIChwYW5lbCkgewotCQlicmlkZ2UgPSBkcm1fcGFuZWxf
YnJpZGdlX2FkZChwYW5lbCwgRFJNX01PREVfQ09OTkVDVE9SX0RTSSk7CisJCWJyaWRnZSA9IGRy
bV9wYW5lbF9icmlkZ2VfYWRkKHBhbmVsKTsKIAkJaWYgKElTX0VSUihicmlkZ2UpKQogCQkJcmV0
dXJuIFBUUl9FUlIoYnJpZGdlKTsKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaW5n
ZW5pYy9pbmdlbmljLWRybS5jIGIvZHJpdmVycy9ncHUvZHJtL2luZ2VuaWMvaW5nZW5pYy1kcm0u
YwppbmRleCA2NWViMTAxNzllYTkuLjNkMGJlNDhkYzNjZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2luZ2VuaWMvaW5nZW5pYy1kcm0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaW5nZW5p
Yy9pbmdlbmljLWRybS5jCkBAIC02NzUsMTAgKzY3NSw4IEBAIHN0YXRpYyBpbnQgaW5nZW5pY19k
cm1fcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAkJcmV0dXJuIHJldDsKIAl9
CiAKLQlpZiAocGFuZWwpIHsKLQkJYnJpZGdlID0gZGV2bV9kcm1fcGFuZWxfYnJpZGdlX2FkZChk
ZXYsIHBhbmVsLAotCQkJCQkJICAgRFJNX01PREVfQ09OTkVDVE9SX1Vua25vd24pOwotCX0KKwlp
ZiAocGFuZWwpCisJCWJyaWRnZSA9IGRldm1fZHJtX3BhbmVsX2JyaWRnZV9hZGQoZGV2LCBwYW5l
bCk7CiAKIAlwcml2LT5kbWFfaHdkZXNjID0gZG1hX2FsbG9jX2NvaGVyZW50KGRldiwgc2l6ZW9m
KCpwcml2LT5kbWFfaHdkZXNjKSwKIAkJCQkJICAgICAgJnByaXYtPmRtYV9od2Rlc2NfcGh5cywK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tY2RlL21jZGVfZHNpLmMgYi9kcml2ZXJzL2dw
dS9kcm0vbWNkZS9tY2RlX2RzaS5jCmluZGV4IDhmZWFhMWI4MTQ3My4uYTQ3NDVjZmQ0MDViIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWNkZS9tY2RlX2RzaS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9tY2RlL21jZGVfZHNpLmMKQEAgLTkyNiw4ICs5MjYsNyBAQCBzdGF0aWMgaW50IG1j
ZGVfZHNpX2JpbmQoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlICptYXN0ZXIsCiAJ
CX0KIAl9CiAJaWYgKHBhbmVsKSB7Ci0JCWJyaWRnZSA9IGRybV9wYW5lbF9icmlkZ2VfYWRkKHBh
bmVsLAotCQkJCQkgICAgICBEUk1fTU9ERV9DT05ORUNUT1JfRFNJKTsKKwkJYnJpZGdlID0gZHJt
X3BhbmVsX2JyaWRnZV9hZGQocGFuZWwpOwogCQlpZiAoSVNfRVJSKGJyaWRnZSkpIHsKIAkJCWRl
dl9lcnIoZGV2LCAiZXJyb3IgYWRkaW5nIHBhbmVsIGJyaWRnZVxuIik7CiAJCQlyZXR1cm4gUFRS
X0VSUihicmlkZ2UpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BsMTExL3BsMTExX2Ry
di5jIGIvZHJpdmVycy9ncHUvZHJtL3BsMTExL3BsMTExX2Rydi5jCmluZGV4IDI3NmI1MzQ3M2E4
NC4uZDk0Yzg5NjEyMmViIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGwxMTEvcGwxMTFf
ZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3BsMTExL3BsMTExX2Rydi5jCkBAIC0xNTAsOCAr
MTUwLDcgQEAgc3RhdGljIGludCBwbDExMV9tb2Rlc2V0X2luaXQoc3RydWN0IGRybV9kZXZpY2Ug
KmRldikKIAkJcmV0dXJuIC1FUFJPQkVfREVGRVI7CiAKIAlpZiAocGFuZWwpIHsKLQkJYnJpZGdl
ID0gZHJtX3BhbmVsX2JyaWRnZV9hZGQocGFuZWwsCi0JCQkJCSAgICAgIERSTV9NT0RFX0NPTk5F
Q1RPUl9Vbmtub3duKTsKKwkJYnJpZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9hZGQocGFuZWwpOwog
CQlpZiAoSVNfRVJSKGJyaWRnZSkpIHsKIAkJCXJldCA9IFBUUl9FUlIoYnJpZGdlKTsKIAkJCWdv
dG8gb3V0X2NvbmZpZzsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJf
ZHVfZW5jb2Rlci5jIGIvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9lbmNvZGVyLmMK
aW5kZXggMjY2MDM4NDNjMzE4Li43MDA5MjNhN2M2MDQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9yY2FyLWR1L3JjYXJfZHVfZW5jb2Rlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yY2Fy
LWR1L3JjYXJfZHVfZW5jb2Rlci5jCkBAIC04NCw4ICs4NCw3IEBAIGludCByY2FyX2R1X2VuY29k
ZXJfaW5pdChzdHJ1Y3QgcmNhcl9kdV9kZXZpY2UgKnJjZHUsCiAJCQlnb3RvIGRvbmU7CiAJCX0K
IAotCQlicmlkZ2UgPSBkZXZtX2RybV9wYW5lbF9icmlkZ2VfYWRkKHJjZHUtPmRldiwgcGFuZWws
Ci0JCQkJCQkgICBEUk1fTU9ERV9DT05ORUNUT1JfRFBJKTsKKwkJYnJpZGdlID0gZGV2bV9kcm1f
cGFuZWxfYnJpZGdlX2FkZChyY2R1LT5kZXYsIHBhbmVsKTsKIAkJaWYgKElTX0VSUihicmlkZ2Up
KSB7CiAJCQlyZXQgPSBQVFJfRVJSKGJyaWRnZSk7CiAJCQlnb3RvIGRvbmU7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvcm9ja2NoaXBfcmdiLmMgYi9kcml2ZXJzL2dwdS9k
cm0vcm9ja2NoaXAvcm9ja2NoaXBfcmdiLmMKaW5kZXggZjU4NmUwNmYzZGYyLi5hZDg4NjliY2Nj
MGUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9yZ2IuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvcm9ja2NoaXBfcmdiLmMKQEAgLTEzNSw3ICsx
MzUsNyBAQCBzdHJ1Y3Qgcm9ja2NoaXBfcmdiICpyb2NrY2hpcF9yZ2JfaW5pdChzdHJ1Y3QgZGV2
aWNlICpkZXYsCiAJZHJtX2VuY29kZXJfaGVscGVyX2FkZChlbmNvZGVyLCAmcm9ja2NoaXBfcmdi
X2VuY29kZXJfaGVscGVyX2Z1bmNzKTsKIAogCWlmIChwYW5lbCkgewotCQlicmlkZ2UgPSBkcm1f
cGFuZWxfYnJpZGdlX2FkZChwYW5lbCwgRFJNX01PREVfQ09OTkVDVE9SX0xWRFMpOworCQlicmlk
Z2UgPSBkcm1fcGFuZWxfYnJpZGdlX2FkZChwYW5lbCk7CiAJCWlmIChJU19FUlIoYnJpZGdlKSkK
IAkJCXJldHVybiBFUlJfQ0FTVChicmlkZ2UpOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9zdG0vbHRkYy5jIGIvZHJpdmVycy9ncHUvZHJtL3N0bS9sdGRjLmMKaW5kZXggMTg1NjFk
OTc3ZDg0Li5lMTE3ZDVmZGY0MjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9zdG0vbHRk
Yy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9zdG0vbHRkYy5jCkBAIC0xMjM2LDggKzEyMzYsNyBA
QCBpbnQgbHRkY19sb2FkKHN0cnVjdCBkcm1fZGV2aWNlICpkZGV2KQogCS8qIEFkZCBlbmRwb2lu
dHMgcGFuZWxzIG9yIGJyaWRnZXMgaWYgYW55ICovCiAJZm9yIChpID0gMDsgaSA8IE1BWF9FTkRQ
T0lOVFM7IGkrKykgewogCQlpZiAocGFuZWxbaV0pIHsKLQkJCWJyaWRnZVtpXSA9IGRybV9wYW5l
bF9icmlkZ2VfYWRkKHBhbmVsW2ldLAotCQkJCQkJCURSTV9NT0RFX0NPTk5FQ1RPUl9EUEkpOwor
CQkJYnJpZGdlW2ldID0gZHJtX3BhbmVsX2JyaWRnZV9hZGQocGFuZWxbaV0pOwogCQkJaWYgKElT
X0VSUihicmlkZ2VbaV0pKSB7CiAJCQkJRFJNX0VSUk9SKCJwYW5lbC1icmlkZ2UgZW5kcG9pbnQg
JWRcbiIsIGkpOwogCQkJCXJldCA9IFBUUl9FUlIoYnJpZGdlW2ldKTsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS90aWxjZGMvdGlsY2RjX2V4dGVybmFsLmMgYi9kcml2ZXJzL2dwdS9kcm0v
dGlsY2RjL3RpbGNkY19leHRlcm5hbC5jCmluZGV4IDFlZDc2NWNlOTM0OS4uOWU1MmQ5NzcxMWI2
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGlsY2RjL3RpbGNkY19leHRlcm5hbC5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS90aWxjZGMvdGlsY2RjX2V4dGVybmFsLmMKQEAgLTEzOSw4ICsx
MzksNyBAQCBpbnQgdGlsY2RjX2F0dGFjaF9leHRlcm5hbF9kZXZpY2Uoc3RydWN0IGRybV9kZXZp
Y2UgKmRkZXYpCiAJfQogCiAJaWYgKHBhbmVsKSB7Ci0JCWJyaWRnZSA9IGRldm1fZHJtX3BhbmVs
X2JyaWRnZV9hZGQoZGRldi0+ZGV2LCBwYW5lbCwKLQkJCQkJCSAgIERSTV9NT0RFX0NPTk5FQ1RP
Ul9EUEkpOworCQlicmlkZ2UgPSBkZXZtX2RybV9wYW5lbF9icmlkZ2VfYWRkKGRkZXYtPmRldiwg
cGFuZWwpOwogCQlpZiAoSVNfRVJSKGJyaWRnZSkpIHsKIAkJCXJldCA9IFBUUl9FUlIoYnJpZGdl
KTsKIAkJCWdvdG8gZXJyX2VuY29kZXJfY2xlYW51cDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS90dmUyMDAvdHZlMjAwX2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL3R2ZTIwMC90dmUyMDBf
ZHJ2LmMKaW5kZXggNDE2ZjI0ODIzYzBhLi40YmJiZTYzNWE2MmYgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS90dmUyMDAvdHZlMjAwX2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dmUy
MDAvdHZlMjAwX2Rydi5jCkBAIC04MCw4ICs4MCw3IEBAIHN0YXRpYyBpbnQgdHZlMjAwX21vZGVz
ZXRfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCWlmIChyZXQgJiYgcmV0ICE9IC1FTk9E
RVYpCiAJCXJldHVybiByZXQ7CiAJaWYgKHBhbmVsKSB7Ci0JCWJyaWRnZSA9IGRybV9wYW5lbF9i
cmlkZ2VfYWRkKHBhbmVsLAotCQkJCQkgICAgICBEUk1fTU9ERV9DT05ORUNUT1JfVW5rbm93bik7
CisJCWJyaWRnZSA9IGRybV9wYW5lbF9icmlkZ2VfYWRkKHBhbmVsKTsKIAkJaWYgKElTX0VSUihi
cmlkZ2UpKSB7CiAJCQlyZXQgPSBQVFJfRVJSKGJyaWRnZSk7CiAJCQlnb3RvIG91dF9icmlkZ2U7
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kcGkuYyBiL2RyaXZlcnMvZ3B1
L2RybS92YzQvdmM0X2RwaS5jCmluZGV4IDU5NjYyZDczNTQzMi4uYTEzYjRlNGQ3ODc5IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kcGkuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vdmM0L3ZjNF9kcGkuYwpAQCAtMjQ5LDcgKzI0OSw3IEBAIHN0YXRpYyBpbnQgdmM0X2RwaV9p
bml0X2JyaWRnZShzdHJ1Y3QgdmM0X2RwaSAqZHBpKQogCX0KIAogCWlmIChwYW5lbCkKLQkJYnJp
ZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9hZGQocGFuZWwsIERSTV9NT0RFX0NPTk5FQ1RPUl9EUEkp
OworCQlicmlkZ2UgPSBkcm1fcGFuZWxfYnJpZGdlX2FkZChwYW5lbCk7CiAKIAlyZXR1cm4gZHJt
X2JyaWRnZV9hdHRhY2goZHBpLT5lbmNvZGVyLCBicmlkZ2UsIE5VTEwsIDApOwogfQpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vdmM0
L3ZjNF9kc2kuYwppbmRleCBmNWQ1YjY4Mzc4MzEuLmM2OTJhZjUwNzc4ZiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfZHNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZjNC92
YzRfZHNpLmMKQEAgLTE1NzUsOCArMTU3NSw3IEBAIHN0YXRpYyBpbnQgdmM0X2RzaV9iaW5kKHN0
cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZSAqbWFzdGVyLCB2b2lkICpkYXRhKQogCX0K
IAogCWlmIChwYW5lbCkgewotCQlkc2ktPmJyaWRnZSA9IGRldm1fZHJtX3BhbmVsX2JyaWRnZV9h
ZGQoZGV2LCBwYW5lbCwKLQkJCQkJCQlEUk1fTU9ERV9DT05ORUNUT1JfRFNJKTsKKwkJZHNpLT5i
cmlkZ2UgPSBkZXZtX2RybV9wYW5lbF9icmlkZ2VfYWRkKGRldiwgcGFuZWwpOwogCQlpZiAoSVNf
RVJSKGRzaS0+YnJpZGdlKSkKIAkJCXJldHVybiBQVFJfRVJSKGRzaS0+YnJpZGdlKTsKIAl9CmRp
ZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fYnJpZGdlLmggYi9pbmNsdWRlL2RybS9kcm1fYnJp
ZGdlLmgKaW5kZXggYTI5NjBhNzdmNWNmLi43ZmZmNjc3ZjU5YTUgMTAwNjQ0Ci0tLSBhL2luY2x1
ZGUvZHJtL2RybV9icmlkZ2UuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fYnJpZGdlLmgKQEAgLTYy
NSwxMiArNjI1LDEwIEBAIHZvaWQgZHJtX2JyaWRnZV9ocGRfbm90aWZ5KHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UsCiAJCQkgICBlbnVtIGRybV9jb25uZWN0b3Jfc3RhdHVzIHN0YXR1cyk7CiAK
ICNpZmRlZiBDT05GSUdfRFJNX1BBTkVMX0JSSURHRQotc3RydWN0IGRybV9icmlkZ2UgKmRybV9w
YW5lbF9icmlkZ2VfYWRkKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsLAotCQkJCQl1MzIgY29ubmVj
dG9yX3R5cGUpOworc3RydWN0IGRybV9icmlkZ2UgKmRybV9wYW5lbF9icmlkZ2VfYWRkKHN0cnVj
dCBkcm1fcGFuZWwgKnBhbmVsKTsKIHZvaWQgZHJtX3BhbmVsX2JyaWRnZV9yZW1vdmUoc3RydWN0
IGRybV9icmlkZ2UgKmJyaWRnZSk7CiBzdHJ1Y3QgZHJtX2JyaWRnZSAqZGV2bV9kcm1fcGFuZWxf
YnJpZGdlX2FkZChzdHJ1Y3QgZGV2aWNlICpkZXYsCi0JCQkJCSAgICAgc3RydWN0IGRybV9wYW5l
bCAqcGFuZWwsCi0JCQkJCSAgICAgdTMyIGNvbm5lY3Rvcl90eXBlKTsKKwkJCQkJICAgICBzdHJ1
Y3QgZHJtX3BhbmVsICpwYW5lbCk7CiAjZW5kaWYKIAogI2VuZGlmCi0tIApSZWdhcmRzLAoKTGF1
cmVudCBQaW5jaGFydAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
