Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BC34C104D0E
	for <lists+dri-devel@lfdr.de>; Thu, 21 Nov 2019 09:00:31 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 811B46EB83;
	Thu, 21 Nov 2019 08:00:07 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from alexa-out-blr-02.qualcomm.com (alexa-out-blr-02.qualcomm.com
 [103.229.18.198])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BD9626E264;
 Wed, 20 Nov 2019 11:14:45 +0000 (UTC)
Received: from ironmsg02-blr.qualcomm.com ([10.86.208.131])
 by alexa-out-blr-02.qualcomm.com with ESMTP/TLS/AES256-SHA;
 20 Nov 2019 16:44:10 +0530
IronPort-SDR: pn+R0V5Xz7YUQJm6myK8AB+Q6GrdHvnsam5vCD842OkTeVewAshWlUHlwP//hkd7PnkiyJ3c2B
 igXx7kptD2VFmXBfqPo3bvhWSL7sStxzNt6nPWfyoYoE/6H2Us5me1MPbFeeYzOnN5ZXzU3Jom
 fSyRxvKTXmlg60X3nu+Oqb/CsVgKGqm3hxJF02p+R37H/GEiM5nBgdoiwrs3eEj3BoS0SUcEGq
 HFB1siXgMPks/VV6Q+/wBjImenYwNu91WfxpeMfIQqlHuVCY5ljGe+XXUYtxDphLTX4UEzBrs1
 WC7dRh19EGSQqtCcVZzs+7dm
Received: from kalyant-linux.qualcomm.com ([10.204.66.210])
 by ironmsg02-blr.qualcomm.com with ESMTP; 20 Nov 2019 16:43:43 +0530
Received: by kalyant-linux.qualcomm.com (Postfix, from userid 94428)
 id 66BD94347; Wed, 20 Nov 2019 16:43:42 +0530 (IST)
From: Kalyan Thota <kalyan_t@codeaurora.org>
To: dri-devel@lists.freedesktop.org, linux-arm-msm@vger.kernel.org,
 freedreno@lists.freedesktop.org, devicetree@vger.kernel.org
Subject: [PATCH v2] msm:disp:dpu1: setup display datapath for SC7180 target
Date: Wed, 20 Nov 2019 16:43:38 +0530
Message-Id: <1574248418-20147-1-git-send-email-kalyan_t@codeaurora.org>
X-Mailer: git-send-email 1.9.1
X-Mailman-Approved-At: Thu, 21 Nov 2019 07:59:20 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dhar@codeaurora.org, travitej@codeaurora.org, linux-kernel@vger.kernel.org,
 seanpaul@chromium.org, Kalyan Thota <kalyan_t@codeaurora.org>,
 hoegsberg@chromium.org, chandanu@codeaurora.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIGNoYW5nZXMgdG8gc2V0dXAgZGlzcGxheSBkYXRhcGF0aCBvbiBTQzcxODAgdGFyZ2V0LgoK
Q2hhbmdlcyBpbiB2MToKIC0gQWRkIGNoYW5nZXMgdG8gc3VwcG9ydCBjdGxfYWN0aXZlIG9uIFND
NzE4MCB0YXJnZXQuCiAtIFdoaWxlIHNlbGVjdGluZyB0aGUgbnVtYmVyIG9mIG1peGVycyBpbiB0
aGUgdG9wb2xvZ3kKICAgY29uc2lkZXIgdGhlIGludGVyZmFjZSB3aWR0aC4KCkNoYW5nZXMgaW4g
djI6CiAtIFNwYXduIHRvcG9sb2d5IG1peGVyIHNlbGVjdGlvbiBpbnRvIHNlcGVyYXRlIHBhdGNo
IChSb2IgQ2xhcmspLgogLSBBZGQgY28tZGV2ZWxvcGVkLWJ5IHRhZ3MgaW4gdGhlIGNvbW1pdCBt
c2cgKFN0ZXBoZW4gQm95ZCkuCgpUaGlzIHBhdGNoIGhhcyBkZXBlbmRlbmN5IG9uIHRoZSBiZWxv
dyBzZXJpZXMKCmh0dHBzOi8vcGF0Y2h3b3JrLmtlcm5lbC5vcmcvcGF0Y2gvMTEyNTM1MzkvCgpD
by1kZXZlbG9wZWQtYnk6IFNodWJoYXNocmVlIERoYXIgPGRoYXJAY29kZWF1cm9yYS5vcmc+ClNp
Z25lZC1vZmYtYnk6IFNodWJoYXNocmVlIERoYXIgPGRoYXJAY29kZWF1cm9yYS5vcmc+CkNvLWRl
dmVsb3BlZC1ieTogUmF2aXRlamEgVGFtYXRhbSA8dHJhdml0ZWpAY29kZWF1cm9yYS5vcmc+ClNp
Z25lZC1vZmYtYnk6IFJhdml0ZWphIFRhbWF0YW0gPHRyYXZpdGVqQGNvZGVhdXJvcmEub3JnPgpT
aWduZWQtb2ZmLWJ5OiBLYWx5YW4gVGhvdGEgPGthbHlhbl90QGNvZGVhdXJvcmEub3JnPgotLS0K
IC4uLi9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2VuY29kZXJfcGh5c192aWQuYyAgIHwgMjEg
KysrKystCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfY2F0YWxvZy5jICAg
ICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jdGwuYyAgICAg
ICAgIHwgODQgKysrKysrKysrKysrKysrKysrKysrLQogZHJpdmVycy9ncHUvZHJtL21zbS9kaXNw
L2RwdTEvZHB1X2h3X2N0bC5oICAgICAgICAgfCAyNCArKysrKysrCiBkcml2ZXJzL2dwdS9kcm0v
bXNtL2Rpc3AvZHB1MS9kcHVfaHdfaW50Zi5jICAgICAgICB8IDI4ICsrKysrKysrCiBkcml2ZXJz
L2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfaW50Zi5oICAgICAgICB8ICA2ICsrCiA2IGZp
bGVzIGNoYW5nZWQsIDE1OSBpbnNlcnRpb25zKCspLCA1IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyX3BoeXNfdmlkLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX3ZpZC5jCmlu
ZGV4IGI5Yzg0ZmIuLjhjYzhhZDEyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rp
c3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX3ZpZC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20v
ZGlzcC9kcHUxL2RwdV9lbmNvZGVyX3BoeXNfdmlkLmMKQEAgLTI4MCw2ICsyODAsMTQgQEAgc3Rh
dGljIHZvaWQgZHB1X2VuY29kZXJfcGh5c192aWRfc2V0dXBfdGltaW5nX2VuZ2luZSgKIAlwaHlz
X2VuYy0+aHdfaW50Zi0+b3BzLnNldHVwX3RpbWluZ19nZW4ocGh5c19lbmMtPmh3X2ludGYsCiAJ
CQkmdGltaW5nX3BhcmFtcywgZm10KTsKIAlwaHlzX2VuYy0+aHdfY3RsLT5vcHMuc2V0dXBfaW50
Zl9jZmcocGh5c19lbmMtPmh3X2N0bCwgJmludGZfY2ZnKTsKKworCS8qIHNldHVwIHdoaWNoIHBw
IGJsayB3aWxsIGNvbm5lY3QgdG8gdGhpcyBpbnRmICovCisJaWYgKHBoeXNfZW5jLT5od19pbnRm
LT5vcHMuYmluZF9waW5ncG9uZ19ibGspCisJCXBoeXNfZW5jLT5od19pbnRmLT5vcHMuYmluZF9w
aW5ncG9uZ19ibGsoCisJCQkJcGh5c19lbmMtPmh3X2ludGYsCisJCQkJdHJ1ZSwKKwkJCQlwaHlz
X2VuYy0+aHdfcHAtPmlkeCk7CisKIAlzcGluX3VubG9ja19pcnFyZXN0b3JlKHBoeXNfZW5jLT5l
bmNfc3BpbmxvY2ssIGxvY2tfZmxhZ3MpOwogCiAJcHJvZ3JhbW1hYmxlX2ZldGNoX2NvbmZpZyhw
aHlzX2VuYywgJnRpbWluZ19wYXJhbXMpOwpAQCAtNDM1LDYgKzQ0Myw3IEBAIHN0YXRpYyB2b2lk
IGRwdV9lbmNvZGVyX3BoeXNfdmlkX2VuYWJsZShzdHJ1Y3QgZHB1X2VuY29kZXJfcGh5cyAqcGh5
c19lbmMpCiB7CiAJc3RydWN0IGRwdV9od19jdGwgKmN0bDsKIAl1MzIgZmx1c2hfbWFzayA9IDA7
CisJdTMyIGludGZfZmx1c2hfbWFzayA9IDA7CiAKIAljdGwgPSBwaHlzX2VuYy0+aHdfY3RsOwog
CkBAIC00NTksMTAgKzQ2OCwxOCBAQCBzdGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9waHlzX3ZpZF9l
bmFibGUoc3RydWN0IGRwdV9lbmNvZGVyX3BoeXMgKnBoeXNfZW5jKQogCWN0bC0+b3BzLmdldF9i
aXRtYXNrX2ludGYoY3RsLCAmZmx1c2hfbWFzaywgcGh5c19lbmMtPmh3X2ludGYtPmlkeCk7CiAJ
Y3RsLT5vcHMudXBkYXRlX3BlbmRpbmdfZmx1c2goY3RsLCBmbHVzaF9tYXNrKTsKIAorCWlmIChj
dGwtPm9wcy5nZXRfYml0bWFza19hY3RpdmVfaW50ZikKKwkJY3RsLT5vcHMuZ2V0X2JpdG1hc2tf
YWN0aXZlX2ludGYoY3RsLCAmaW50Zl9mbHVzaF9tYXNrLAorCQkJcGh5c19lbmMtPmh3X2ludGYt
PmlkeCk7CisKKwlpZiAoY3RsLT5vcHMudXBkYXRlX3BlbmRpbmdfaW50Zl9mbHVzaCkKKwkJY3Rs
LT5vcHMudXBkYXRlX3BlbmRpbmdfaW50Zl9mbHVzaChjdGwsIGludGZfZmx1c2hfbWFzayk7CisK
IHNraXBfZmx1c2g6CiAJRFBVX0RFQlVHX1ZJREVOQyhwaHlzX2VuYywKLQkJCSAidXBkYXRlIHBl
bmRpbmcgZmx1c2ggY3RsICVkIGZsdXNoX21hc2sgJXhcbiIsCi0JCQkgY3RsLT5pZHggLSBDVExf
MCwgZmx1c2hfbWFzayk7CisJCSJ1cGRhdGUgcGVuZGluZyBmbHVzaCBjdGwgJWQgZmx1c2hfbWFz
ayAwJXggaW50Zl9tYXNrIDB4JXhcbiIsCisJCWN0bC0+aWR4IC0gQ1RMXzAsIGZsdXNoX21hc2ss
IGludGZfZmx1c2hfbWFzayk7CisKIAogCS8qIGN0bF9mbHVzaCAmIHRpbWluZyBlbmdpbmUgZW5h
YmxlIHdpbGwgYmUgdHJpZ2dlcmVkIGJ5IGZyYW1ld29yayAqLwogCWlmIChwaHlzX2VuYy0+ZW5h
YmxlX3N0YXRlID09IERQVV9FTkNfRElTQUJMRUQpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfY2F0YWxvZy5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9k
aXNwL2RwdTEvZHB1X2h3X2NhdGFsb2cuYwppbmRleCAxY2Y0NTA5Li4wZWUyYjZjIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfY2F0YWxvZy5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jYXRhbG9nLmMKQEAgLTM3NCw2
ICszNzQsNyBAQAogCXtcCiAJLm5hbWUgPSBfbmFtZSwgLmlkID0gX2lkLCBcCiAJLmJhc2UgPSBf
YmFzZSwgLmxlbiA9IDB4MjgwLCBcCisJLmZlYXR1cmVzID0gQklUKERQVV9DVExfQUNUSVZFX0NG
RyksIFwKIAkudHlwZSA9IF90eXBlLCBcCiAJLmNvbnRyb2xsZXJfaWQgPSBfY3RybF9pZCwgXAog
CS5wcm9nX2ZldGNoX2xpbmVzX3dvcnN0X2Nhc2UgPSAyNCBcCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfY3RsLmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNt
L2Rpc3AvZHB1MS9kcHVfaHdfY3RsLmMKaW5kZXggMTc5ZThkNS4uMmNlNGI1YSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2N0bC5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jdGwuYwpAQCAtMjIsMTEgKzIyLDE1IEBA
CiAjZGVmaW5lICAgQ1RMX1BSRVBBUkUgICAgICAgICAgICAgICAgICAgMHgwZDAKICNkZWZpbmUg
ICBDVExfU1dfUkVTRVQgICAgICAgICAgICAgICAgICAweDAzMAogI2RlZmluZSAgIENUTF9MQVlF
Ul9FWFROX09GRlNFVCAgICAgICAgIDB4NDAKKyNkZWZpbmUgICBDVExfSU5URl9BQ1RJVkUgICAg
ICAgICAgICAgICAweDBGNAorI2RlZmluZSAgIENUTF9JTlRGX0ZMVVNIICAgICAgICAgICAgICAg
IDB4MTEwCisjZGVmaW5lICAgQ1RMX0lOVEZfTUFTVEVSICAgICAgICAgICAgICAgMHgxMzQKIAog
I2RlZmluZSBDVExfTUlYRVJfQk9SREVSX09VVCAgICAgICAgICAgIEJJVCgyNCkKICNkZWZpbmUg
Q1RMX0ZMVVNIX01BU0tfQ1RMICAgICAgICAgICAgICBCSVQoMTcpCiAKICNkZWZpbmUgRFBVX1JF
R19SRVNFVF9USU1FT1VUX1VTICAgICAgICAyMDAwCisjZGVmaW5lICBJTlRGX0lEWCAgICAgICAz
MQogCiBzdGF0aWMgc3RydWN0IGRwdV9jdGxfY2ZnICpfY3RsX29mZnNldChlbnVtIGRwdV9jdGwg
Y3RsLAogCQlzdHJ1Y3QgZHB1X21kc3NfY2ZnICptLApAQCAtMTAwLDExICsxMDQsMjcgQEAgc3Rh
dGljIGlubGluZSB2b2lkIGRwdV9od19jdGxfdXBkYXRlX3BlbmRpbmdfZmx1c2goc3RydWN0IGRw
dV9od19jdGwgKmN0eCwKIAljdHgtPnBlbmRpbmdfZmx1c2hfbWFzayB8PSBmbHVzaGJpdHM7CiB9
CiAKK3N0YXRpYyBpbmxpbmUgdm9pZCBkcHVfaHdfY3RsX3VwZGF0ZV9wZW5kaW5nX2ludGZfZmx1
c2goc3RydWN0IGRwdV9od19jdGwgKmN0eCwKKwkJdTMyIGZsdXNoYml0cykKK3sKKwljdHgtPnBl
bmRpbmdfaW50Zl9mbHVzaF9tYXNrIHw9IGZsdXNoYml0czsKK30KKwogc3RhdGljIHUzMiBkcHVf
aHdfY3RsX2dldF9wZW5kaW5nX2ZsdXNoKHN0cnVjdCBkcHVfaHdfY3RsICpjdHgpCiB7CiAJcmV0
dXJuIGN0eC0+cGVuZGluZ19mbHVzaF9tYXNrOwogfQogCitzdGF0aWMgaW5saW5lIHZvaWQgZHB1
X2h3X2N0bF90cmlnZ2VyX2ZsdXNoX3YxKHN0cnVjdCBkcHVfaHdfY3RsICpjdHgpCit7CisKKwlp
ZiAoY3R4LT5wZW5kaW5nX2ZsdXNoX21hc2sgJiBCSVQoSU5URl9JRFgpKQorCQlEUFVfUkVHX1dS
SVRFKCZjdHgtPmh3LCBDVExfSU5URl9GTFVTSCwKKwkJCQljdHgtPnBlbmRpbmdfaW50Zl9mbHVz
aF9tYXNrKTsKKworCURQVV9SRUdfV1JJVEUoJmN0eC0+aHcsIENUTF9GTFVTSCwgY3R4LT5wZW5k
aW5nX2ZsdXNoX21hc2spOworfQorCiBzdGF0aWMgaW5saW5lIHZvaWQgZHB1X2h3X2N0bF90cmln
Z2VyX2ZsdXNoKHN0cnVjdCBkcHVfaHdfY3RsICpjdHgpCiB7CiAJdHJhY2VfZHB1X2h3X2N0bF90
cmlnZ2VyX3BlbmRpbmdfZmx1c2goY3R4LT5wZW5kaW5nX2ZsdXNoX21hc2ssCkBAIC0yMjIsNiAr
MjQyLDM2IEBAIHN0YXRpYyBpbnQgZHB1X2h3X2N0bF9nZXRfYml0bWFza19pbnRmKHN0cnVjdCBk
cHVfaHdfY3RsICpjdHgsCiAJcmV0dXJuIDA7CiB9CiAKK3N0YXRpYyBpbnQgZHB1X2h3X2N0bF9n
ZXRfYml0bWFza19pbnRmX3YxKHN0cnVjdCBkcHVfaHdfY3RsICpjdHgsCisJCXUzMiAqZmx1c2hi
aXRzLCBlbnVtIGRwdV9pbnRmIGludGYpCit7CisJc3dpdGNoIChpbnRmKSB7CisJY2FzZSBJTlRG
XzA6CisJY2FzZSBJTlRGXzE6CisJCSpmbHVzaGJpdHMgfD0gQklUKDMxKTsKKwkJYnJlYWs7CisJ
ZGVmYXVsdDoKKwkJcmV0dXJuIDA7CisJfQorCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IGRw
dV9od19jdGxfYWN0aXZlX2dldF9iaXRtYXNrX2ludGYoc3RydWN0IGRwdV9od19jdGwgKmN0eCwK
KwkJdTMyICpmbHVzaGJpdHMsIGVudW0gZHB1X2ludGYgaW50ZikKK3sKKwlzd2l0Y2ggKGludGYp
IHsKKwljYXNlIElOVEZfMDoKKwkJKmZsdXNoYml0cyB8PSBCSVQoMCk7CisJCWJyZWFrOworCWNh
c2UgSU5URl8xOgorCQkqZmx1c2hiaXRzIHw9IEJJVCgxKTsKKwkJYnJlYWs7CisJZGVmYXVsdDoK
KwkJcmV0dXJuIDA7CisJfQorCXJldHVybiAwOworfQorCiBzdGF0aWMgdTMyIGRwdV9od19jdGxf
cG9sbF9yZXNldF9zdGF0dXMoc3RydWN0IGRwdV9od19jdGwgKmN0eCwgdTMyIHRpbWVvdXRfdXMp
CiB7CiAJc3RydWN0IGRwdV9od19ibGtfcmVnX21hcCAqYyA9ICZjdHgtPmh3OwpAQCAtNDIyLDYg
KzQ3MiwyNCBAQCBzdGF0aWMgdm9pZCBkcHVfaHdfY3RsX3NldHVwX2JsZW5kc3RhZ2Uoc3RydWN0
IGRwdV9od19jdGwgKmN0eCwKIAlEUFVfUkVHX1dSSVRFKGMsIENUTF9MQVlFUl9FWFQzKGxtKSwg
bWl4ZXJjZmdfZXh0Myk7CiB9CiAKKworc3RhdGljIHZvaWQgZHB1X2h3X2N0bF9pbnRmX2NmZ192
MShzdHJ1Y3QgZHB1X2h3X2N0bCAqY3R4LAorCQlzdHJ1Y3QgZHB1X2h3X2ludGZfY2ZnICpjZmcp
Cit7CisJc3RydWN0IGRwdV9od19ibGtfcmVnX21hcCAqYyA9ICZjdHgtPmh3OworCXUzMiBpbnRm
X2FjdGl2ZSA9IDA7CisJdTMyIG1vZGVfc2VsID0gMDsKKworCWlmIChjZmctPmludGZfbW9kZV9z
ZWwgPT0gRFBVX0NUTF9NT0RFX1NFTF9DTUQpCisJCW1vZGVfc2VsIHw9IEJJVCgxNyk7CisKKwlp
bnRmX2FjdGl2ZSA9IERQVV9SRUdfUkVBRChjLCBDVExfSU5URl9BQ1RJVkUpOworCWludGZfYWN0
aXZlIHw9IEJJVChjZmctPmludGYgLSBJTlRGXzApOworCisJRFBVX1JFR19XUklURShjLCBDVExf
VE9QLCBtb2RlX3NlbCk7CisJRFBVX1JFR19XUklURShjLCBDVExfSU5URl9BQ1RJVkUsIGludGZf
YWN0aXZlKTsKK30KKwogc3RhdGljIHZvaWQgZHB1X2h3X2N0bF9pbnRmX2NmZyhzdHJ1Y3QgZHB1
X2h3X2N0bCAqY3R4LAogCQlzdHJ1Y3QgZHB1X2h3X2ludGZfY2ZnICpjZmcpCiB7CkBAIC00NTUs
MjEgKzUyMywzMSBAQCBzdGF0aWMgdm9pZCBkcHVfaHdfY3RsX2ludGZfY2ZnKHN0cnVjdCBkcHVf
aHdfY3RsICpjdHgsCiBzdGF0aWMgdm9pZCBfc2V0dXBfY3RsX29wcyhzdHJ1Y3QgZHB1X2h3X2N0
bF9vcHMgKm9wcywKIAkJdW5zaWduZWQgbG9uZyBjYXApCiB7CisJaWYgKGNhcCAmIEJJVChEUFVf
Q1RMX0FDVElWRV9DRkcpKSB7CisJCW9wcy0+dHJpZ2dlcl9mbHVzaCA9IGRwdV9od19jdGxfdHJp
Z2dlcl9mbHVzaF92MTsKKwkJb3BzLT5zZXR1cF9pbnRmX2NmZyA9IGRwdV9od19jdGxfaW50Zl9j
ZmdfdjE7CisJCW9wcy0+Z2V0X2JpdG1hc2tfaW50ZiA9IGRwdV9od19jdGxfZ2V0X2JpdG1hc2tf
aW50Zl92MTsKKwkJb3BzLT5nZXRfYml0bWFza19hY3RpdmVfaW50ZiA9CisJCQlkcHVfaHdfY3Rs
X2FjdGl2ZV9nZXRfYml0bWFza19pbnRmOworCQlvcHMtPnVwZGF0ZV9wZW5kaW5nX2ludGZfZmx1
c2ggPQorCQkJZHB1X2h3X2N0bF91cGRhdGVfcGVuZGluZ19pbnRmX2ZsdXNoOworCX0gZWxzZSB7
CisJCW9wcy0+dHJpZ2dlcl9mbHVzaCA9IGRwdV9od19jdGxfdHJpZ2dlcl9mbHVzaDsKKwkJb3Bz
LT5zZXR1cF9pbnRmX2NmZyA9IGRwdV9od19jdGxfaW50Zl9jZmc7CisJCW9wcy0+Z2V0X2JpdG1h
c2tfaW50ZiA9IGRwdV9od19jdGxfZ2V0X2JpdG1hc2tfaW50ZjsKKwl9CiAJb3BzLT5jbGVhcl9w
ZW5kaW5nX2ZsdXNoID0gZHB1X2h3X2N0bF9jbGVhcl9wZW5kaW5nX2ZsdXNoOwogCW9wcy0+dXBk
YXRlX3BlbmRpbmdfZmx1c2ggPSBkcHVfaHdfY3RsX3VwZGF0ZV9wZW5kaW5nX2ZsdXNoOwogCW9w
cy0+Z2V0X3BlbmRpbmdfZmx1c2ggPSBkcHVfaHdfY3RsX2dldF9wZW5kaW5nX2ZsdXNoOwotCW9w
cy0+dHJpZ2dlcl9mbHVzaCA9IGRwdV9od19jdGxfdHJpZ2dlcl9mbHVzaDsKIAlvcHMtPmdldF9m
bHVzaF9yZWdpc3RlciA9IGRwdV9od19jdGxfZ2V0X2ZsdXNoX3JlZ2lzdGVyOwogCW9wcy0+dHJp
Z2dlcl9zdGFydCA9IGRwdV9od19jdGxfdHJpZ2dlcl9zdGFydDsKIAlvcHMtPnRyaWdnZXJfcGVu
ZGluZyA9IGRwdV9od19jdGxfdHJpZ2dlcl9wZW5kaW5nOwotCW9wcy0+c2V0dXBfaW50Zl9jZmcg
PSBkcHVfaHdfY3RsX2ludGZfY2ZnOwogCW9wcy0+cmVzZXQgPSBkcHVfaHdfY3RsX3Jlc2V0X2Nv
bnRyb2w7CiAJb3BzLT53YWl0X3Jlc2V0X3N0YXR1cyA9IGRwdV9od19jdGxfd2FpdF9yZXNldF9z
dGF0dXM7CiAJb3BzLT5jbGVhcl9hbGxfYmxlbmRzdGFnZXMgPSBkcHVfaHdfY3RsX2NsZWFyX2Fs
bF9ibGVuZHN0YWdlczsKIAlvcHMtPnNldHVwX2JsZW5kc3RhZ2UgPSBkcHVfaHdfY3RsX3NldHVw
X2JsZW5kc3RhZ2U7CiAJb3BzLT5nZXRfYml0bWFza19zc3BwID0gZHB1X2h3X2N0bF9nZXRfYml0
bWFza19zc3BwOwogCW9wcy0+Z2V0X2JpdG1hc2tfbWl4ZXIgPSBkcHVfaHdfY3RsX2dldF9iaXRt
YXNrX21peGVyOwotCW9wcy0+Z2V0X2JpdG1hc2tfaW50ZiA9IGRwdV9od19jdGxfZ2V0X2JpdG1h
c2tfaW50ZjsKIH07CiAKIHN0YXRpYyBzdHJ1Y3QgZHB1X2h3X2Jsa19vcHMgZHB1X2h3X29wczsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jdGwuaCBi
L2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jdGwuaAppbmRleCBkM2FlOTM5
Li4xZTM5NzNjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVf
aHdfY3RsLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2N0bC5o
CkBAIC05MSw2ICs5MSwxNSBAQCBzdHJ1Y3QgZHB1X2h3X2N0bF9vcHMgewogCQl1MzIgZmx1c2hi
aXRzKTsKIAogCS8qKgorCSAqIE9SIGluIHRoZSBnaXZlbiBmbHVzaGJpdHMgdG8gdGhlIGNhY2hl
ZCBwZW5kaW5nX2ludGZfZmx1c2hfbWFzaworCSAqIE5vIGVmZmVjdCBvbiBoYXJkd2FyZQorCSAq
IEBjdHggICAgICAgOiBjdGwgcGF0aCBjdHggcG9pbnRlcgorCSAqIEBmbHVzaGJpdHMgOiBtb2R1
bGUgZmx1c2htYXNrCisJICovCisJdm9pZCAoKnVwZGF0ZV9wZW5kaW5nX2ludGZfZmx1c2gpKHN0
cnVjdCBkcHVfaHdfY3RsICpjdHgsCisJCXUzMiBmbHVzaGJpdHMpOworCisJLyoqCiAJICogV3Jp
dGUgdGhlIHZhbHVlIG9mIHRoZSBwZW5kaW5nX2ZsdXNoX21hc2sgdG8gaGFyZHdhcmUKIAkgKiBA
Y3R4ICAgICAgIDogY3RsIHBhdGggY3R4IHBvaW50ZXIKIAkgKi8KQEAgLTEzMCwxMSArMTM5LDI0
IEBAIHN0cnVjdCBkcHVfaHdfY3RsX29wcyB7CiAJdWludDMyX3QgKCpnZXRfYml0bWFza19taXhl
cikoc3RydWN0IGRwdV9od19jdGwgKmN0eCwKIAkJZW51bSBkcHVfbG0gYmxrKTsKIAorCS8qKgor
CSAqIFF1ZXJ5IHRoZSB2YWx1ZSBvZiB0aGUgaW50ZiBmbHVzaCBtYXNrCisJICogTm8gZWZmZWN0
IG9uIGhhcmR3YXJlCisJICogQGN0eCAgICAgICA6IGN0bCBwYXRoIGN0eCBwb2ludGVyCisJICov
CiAJaW50ICgqZ2V0X2JpdG1hc2tfaW50Zikoc3RydWN0IGRwdV9od19jdGwgKmN0eCwKIAkJdTMy
ICpmbHVzaGJpdHMsCiAJCWVudW0gZHB1X2ludGYgYmxrKTsKIAogCS8qKgorCSAqIFF1ZXJ5IHRo
ZSB2YWx1ZSBvZiB0aGUgaW50ZiBhY3RpdmUgZmx1c2ggbWFzaworCSAqIE5vIGVmZmVjdCBvbiBo
YXJkd2FyZQorCSAqIEBjdHggICAgICAgOiBjdGwgcGF0aCBjdHggcG9pbnRlcgorCSAqLworCWlu
dCAoKmdldF9iaXRtYXNrX2FjdGl2ZV9pbnRmKShzdHJ1Y3QgZHB1X2h3X2N0bCAqY3R4LAorCQl1
MzIgKmZsdXNoYml0cywgZW51bSBkcHVfaW50ZiBibGspOworCisJLyoqCiAJICogU2V0IGFsbCBi
bGVuZCBzdGFnZXMgdG8gZGlzYWJsZWQKIAkgKiBAY3R4ICAgICAgIDogY3RsIHBhdGggY3R4IHBv
aW50ZXIKIAkgKi8KQEAgLTE1OSw2ICsxODEsNyBAQCBzdHJ1Y3QgZHB1X2h3X2N0bF9vcHMgewog
ICogQG1peGVyX2NvdW50OiBudW1iZXIgb2YgbWl4ZXJzCiAgKiBAbWl4ZXJfaHdfY2FwczogbWl4
ZXIgaGFyZHdhcmUgY2FwYWJpbGl0aWVzCiAgKiBAcGVuZGluZ19mbHVzaF9tYXNrOiBzdG9yYWdl
IGZvciBwZW5kaW5nIGN0bF9mbHVzaCBtYW5hZ2VkIHZpYSBvcHMKKyAqIEBwZW5kaW5nX2ludGZf
Zmx1c2hfbWFzazogcGVuZGluZyBJTlRGIGZsdXNoCiAgKiBAb3BzOiBvcGVyYXRpb24gbGlzdAog
ICovCiBzdHJ1Y3QgZHB1X2h3X2N0bCB7CkBAIC0xNzEsNiArMTk0LDcgQEAgc3RydWN0IGRwdV9o
d19jdGwgewogCWludCBtaXhlcl9jb3VudDsKIAljb25zdCBzdHJ1Y3QgZHB1X2xtX2NmZyAqbWl4
ZXJfaHdfY2FwczsKIAl1MzIgcGVuZGluZ19mbHVzaF9tYXNrOworCXUzMiBwZW5kaW5nX2ludGZf
Zmx1c2hfbWFzazsKIAogCS8qIG9wcyAqLwogCXN0cnVjdCBkcHVfaHdfY3RsX29wcyBvcHM7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfaW50Zi5jIGIv
ZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2ludGYuYwppbmRleCBkY2Q4N2Nk
Li5lZmY1ZTZhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVf
aHdfaW50Zi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19pbnRm
LmMKQEAgLTU2LDYgKzU2LDggQEAKICNkZWZpbmUgICBJTlRGX0ZSQU1FX0NPVU5UICAgICAgICAg
ICAgICAweDBBQwogI2RlZmluZSAgIElOVEZfTElORV9DT1VOVCAgICAgICAgICAgICAgIDB4MEIw
CiAKKyNkZWZpbmUgICBJTlRGX01VWCAgICAgICAgICAgICAgICAgICAgICAweDI1QworCiBzdGF0
aWMgc3RydWN0IGRwdV9pbnRmX2NmZyAqX2ludGZfb2Zmc2V0KGVudW0gZHB1X2ludGYgaW50ZiwK
IAkJc3RydWN0IGRwdV9tZHNzX2NmZyAqbSwKIAkJdm9pZCBfX2lvbWVtICphZGRyLApAQCAtMjE4
LDYgKzIyMCwzMCBAQCBzdGF0aWMgdm9pZCBkcHVfaHdfaW50Zl9zZXR1cF9wcmdfZmV0Y2goCiAJ
RFBVX1JFR19XUklURShjLCBJTlRGX0NPTkZJRywgZmV0Y2hfZW5hYmxlKTsKIH0KIAorc3RhdGlj
IHZvaWQgZHB1X2h3X2ludGZfYmluZF9waW5ncG9uZ19ibGsoCisJCXN0cnVjdCBkcHVfaHdfaW50
ZiAqaW50ZiwKKwkJYm9vbCBlbmFibGUsCisJCWNvbnN0IGVudW0gZHB1X3Bpbmdwb25nIHBwKQor
eworCXN0cnVjdCBkcHVfaHdfYmxrX3JlZ19tYXAgKmM7CisJdTMyIG11eF9jZmc7CisKKwlpZiAo
IWludGYpCisJCXJldHVybjsKKworCWMgPSAmaW50Zi0+aHc7CisKKwltdXhfY2ZnID0gRFBVX1JF
R19SRUFEKGMsIElOVEZfTVVYKTsKKwltdXhfY2ZnICY9IH4weGY7CisKKwlpZiAoZW5hYmxlKQor
CQltdXhfY2ZnIHw9IChwcCAtIFBJTkdQT05HXzApICYgMHg3OworCWVsc2UKKwkJbXV4X2NmZyB8
PSAweGY7CisKKwlEUFVfUkVHX1dSSVRFKGMsIElOVEZfTVVYLCBtdXhfY2ZnKTsKK30KKwogc3Rh
dGljIHZvaWQgZHB1X2h3X2ludGZfZ2V0X3N0YXR1cygKIAkJc3RydWN0IGRwdV9od19pbnRmICpp
bnRmLAogCQlzdHJ1Y3QgaW50Zl9zdGF0dXMgKnMpCkBAIC0yNTQsNiArMjgwLDggQEAgc3RhdGlj
IHZvaWQgX3NldHVwX2ludGZfb3BzKHN0cnVjdCBkcHVfaHdfaW50Zl9vcHMgKm9wcywKIAlvcHMt
PmdldF9zdGF0dXMgPSBkcHVfaHdfaW50Zl9nZXRfc3RhdHVzOwogCW9wcy0+ZW5hYmxlX3RpbWlu
ZyA9IGRwdV9od19pbnRmX2VuYWJsZV90aW1pbmdfZW5naW5lOwogCW9wcy0+Z2V0X2xpbmVfY291
bnQgPSBkcHVfaHdfaW50Zl9nZXRfbGluZV9jb3VudDsKKwlpZiAoY2FwICYgQklUKERQVV9DVExf
QUNUSVZFX0NGRykpCisJCW9wcy0+YmluZF9waW5ncG9uZ19ibGsgPSBkcHVfaHdfaW50Zl9iaW5k
X3Bpbmdwb25nX2JsazsKIH0KIAogc3RhdGljIHN0cnVjdCBkcHVfaHdfYmxrX29wcyBkcHVfaHdf
b3BzOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2lu
dGYuaCBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19pbnRmLmgKaW5kZXgg
YjAzYWNjMi4uYTFlMGVmMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2Rw
dTEvZHB1X2h3X2ludGYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVf
aHdfaW50Zi5oCkBAIC01Miw2ICs1Miw4IEBAIHN0cnVjdCBpbnRmX3N0YXR1cyB7CiAgKiBAIGVu
YWJsZV90aW1pbmc6IGVuYWJsZS9kaXNhYmxlIHRpbWluZyBlbmdpbmUKICAqIEAgZ2V0X3N0YXR1
czogcmV0dXJucyBpZiB0aW1pbmcgZW5naW5lIGlzIGVuYWJsZWQgb3Igbm90CiAgKiBAIGdldF9s
aW5lX2NvdW50OiByZWFkcyBjdXJyZW50IHZlcnRpY2FsIGxpbmUgY291bnRlcgorICogQGJpbmRf
cGluZ3BvbmdfYmxrOiBlbmFibGUvZGlzYWJsZSB0aGUgY29ubmVjdGlvbiB3aXRoIHBpbmdwb25n
IHdoaWNoIHdpbGwKKyAqICAgICAgICAgICAgICAgICAgICAgZmVlZCBwaXhlbHMgdG8gdGhpcyBp
bnRlcmZhY2UKICAqLwogc3RydWN0IGRwdV9od19pbnRmX29wcyB7CiAJdm9pZCAoKnNldHVwX3Rp
bWluZ19nZW4pKHN0cnVjdCBkcHVfaHdfaW50ZiAqaW50ZiwKQEAgLTY4LDYgKzcwLDEwIEBAIHN0
cnVjdCBkcHVfaHdfaW50Zl9vcHMgewogCQkJc3RydWN0IGludGZfc3RhdHVzICpzdGF0dXMpOwog
CiAJdTMyICgqZ2V0X2xpbmVfY291bnQpKHN0cnVjdCBkcHVfaHdfaW50ZiAqaW50Zik7CisKKwl2
b2lkICgqYmluZF9waW5ncG9uZ19ibGspKHN0cnVjdCBkcHVfaHdfaW50ZiAqaW50ZiwKKwkJCWJv
b2wgZW5hYmxlLAorCQkJY29uc3QgZW51bSBkcHVfcGluZ3BvbmcgcHApOwogfTsKIAogc3RydWN0
IGRwdV9od19pbnRmIHsKLS0gCjEuOS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
