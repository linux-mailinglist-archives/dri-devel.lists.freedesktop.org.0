Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D5D15115999
	for <lists+dri-devel@lfdr.de>; Sat,  7 Dec 2019 00:15:11 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 19F7F6FAB2;
	Fri,  6 Dec 2019 23:15:05 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-il1-x143.google.com (mail-il1-x143.google.com
 [IPv6:2607:f8b0:4864:20::143])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D68396FAB0
 for <dri-devel@lists.freedesktop.org>; Fri,  6 Dec 2019 23:15:00 +0000 (UTC)
Received: by mail-il1-x143.google.com with SMTP id f6so7677924ilh.9
 for <dri-devel@lists.freedesktop.org>; Fri, 06 Dec 2019 15:15:00 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=XW/MrhXAVDyeCMiJcKC4crfk3pG/2/JBLuHke3ueDF0=;
 b=b+64G6WBa/0RiSLPal4yCg5mzkYfC3ScmWknuC5G5G6ABH3cFxnmp8XBx/xdkvZFgI
 jXA5JOqi0wIlD9hPyySaO5+xPkEd2C06TDlh5EQicuNiNaHpS9z8qvDz/IektRnvP4UY
 0+0c4XxWaxbd/P0s1Qsw3kjqS0dt2p1vpLmeYKUkE8nf3j59gXefusOEODHN8yeHMyZs
 cDdDpY/Rh3bXPUsHU38gmrcvQbP02QdIN99VLlBg5qDb219LWx1YJwECTd8MdFUtPI6z
 sC5uRcAd+evImUOF7stV+1Rc8NTDQn0hr0VPyLk563XvwB5iyFJBu8d8J6Ehu6dAnNuY
 WR0w==
X-Gm-Message-State: APjAAAXTkVoa2SAxyIdniaIlEajw6h90s+DWTIddJVNTxLDhQDTYSZfW
 xuuJX2xBeClqrZq08+guNOiM3CKJkug=
X-Google-Smtp-Source: APXvYqxeyKh9xU1zUa8Wogw4dKJjWO9bUFq+RdVvi8CMl73qOfllHRjokhKv+ARs4bfVv5DKNEddVQ==
X-Received: by 2002:a92:cc4e:: with SMTP id t14mr17535353ilq.13.1575674099951; 
 Fri, 06 Dec 2019 15:14:59 -0800 (PST)
Received: from ddavenport4.bld.corp.google.com
 ([2620:15c:183:0:92f:a80a:519d:f777])
 by smtp.gmail.com with ESMTPSA id b15sm4317946ilo.37.2019.12.06.15.14.59
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
 Fri, 06 Dec 2019 15:14:59 -0800 (PST)
From: Drew Davenport <ddavenport@chromium.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 6/6] drm/msm/dpu: Remove unnecessary NULL checks
Date: Fri,  6 Dec 2019 16:13:48 -0700
Message-Id: <20191206161137.6.I505289c0ad2bbcbbb8831c2f209f2f4ebee59f28@changeid>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191206161137.1.Ibb7612c1ebcebe3f560b3269150c0e0363f01e44@changeid>
References: <20191206161137.1.Ibb7612c1ebcebe3f560b3269150c0e0363f01e44@changeid>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=chromium.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=XW/MrhXAVDyeCMiJcKC4crfk3pG/2/JBLuHke3ueDF0=;
 b=XoRfNjirtDbrYP3OT2Z5rNxteEyUfaMub2288xDttHO0RhBmtJvscXN/AzINgN+xmb
 u45yo7vI2ekiHAaX5BOnJS6L2IotUS/QzsXKYZzg0qW/rneuXQBbQJ3dib0UNOWOUxDN
 j9kxsuaq5GhKyK2Zfp9o08W2IjveK0F60fzFo=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Bruce Wang <bzwang@chromium.org>, David Airlie <airlied@linux.ie>,
 linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 zhengbin <zhengbin13@huawei.com>, Drew Davenport <ddavenport@chromium.org>,
 freedreno@lists.freedesktop.org, Sean Paul <sean@poorly.run>,
 Thomas Gleixner <tglx@linutronix.de>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGRwdV9lbmNvZGVyX3BoeXMgKiBhcmd1bWVudCBwYXNzZWQgdG8gdGhlc2UgZnVuY3Rpb25z
IHdpbGwgbmV2ZXIgYmUKTlVMTCBzbyBkb24ndCBjaGVjay4KClNpZ25lZC1vZmYtYnk6IERyZXcg
RGF2ZW5wb3J0IDxkZGF2ZW5wb3J0QGNocm9taXVtLm9yZz4KLS0tCgogLi4uL2RybS9tc20vZGlz
cC9kcHUxL2RwdV9lbmNvZGVyX3BoeXNfY21kLmMgIHwgNjkgKysrKy0tLS0tLS0tLS0tLS0tLQog
Li4uL2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyX3BoeXNfdmlkLmMgIHwgNDQgKy0tLS0t
LS0tLS0tCiAyIGZpbGVzIGNoYW5nZWQsIDE3IGluc2VydGlvbnMoKyksIDk2IGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVy
X3BoeXNfY21kLmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9w
aHlzX2NtZC5jCmluZGV4IGNjMmVjZjMyNzU4Mi4uMzllMWUyODBiYTQ0IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX2NtZC5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyX3BoeXNfY21kLmMKQEAg
LTQ1LDggKzQ1LDcgQEAgc3RhdGljIGJvb2wgZHB1X2VuY29kZXJfcGh5c19jbWRfbW9kZV9maXh1
cCgKIAkJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCiAJCXN0cnVjdCBkcm1f
ZGlzcGxheV9tb2RlICphZGpfbW9kZSkKIHsKLQlpZiAocGh5c19lbmMpCi0JCURQVV9ERUJVR19D
TURFTkModG9fZHB1X2VuY29kZXJfcGh5c19jbWQocGh5c19lbmMpLCAiXG4iKTsKKwlEUFVfREVC
VUdfQ01ERU5DKHRvX2RwdV9lbmNvZGVyX3BoeXNfY21kKHBoeXNfZW5jKSwgIlxuIik7CiAJcmV0
dXJuIHRydWU7CiB9CiAKQEAgLTU4LDkgKzU3LDYgQEAgc3RhdGljIHZvaWQgX2RwdV9lbmNvZGVy
X3BoeXNfY21kX3VwZGF0ZV9pbnRmX2NmZygKIAlzdHJ1Y3QgZHB1X2h3X2N0bCAqY3RsOwogCXN0
cnVjdCBkcHVfaHdfaW50Zl9jZmcgaW50Zl9jZmcgPSB7IDAgfTsKIAotCWlmICghcGh5c19lbmMp
Ci0JCXJldHVybjsKLQogCWN0bCA9IHBoeXNfZW5jLT5od19jdGw7CiAJaWYgKCFjdGwtPm9wcy5z
ZXR1cF9pbnRmX2NmZykKIAkJcmV0dXJuOwpAQCAtNzksNyArNzUsNyBAQCBzdGF0aWMgdm9pZCBk
cHVfZW5jb2Rlcl9waHlzX2NtZF9wcF90eF9kb25lX2lycSh2b2lkICphcmcsIGludCBpcnFfaWR4
KQogCWludCBuZXdfY250OwogCXUzMiBldmVudCA9IERQVV9FTkNPREVSX0ZSQU1FX0VWRU5UX0RP
TkU7CiAKLQlpZiAoIXBoeXNfZW5jIHx8ICFwaHlzX2VuYy0+aHdfcHApCisJaWYgKCFwaHlzX2Vu
Yy0+aHdfcHApCiAJCXJldHVybjsKIAogCURQVV9BVFJBQ0VfQkVHSU4oInBwX2RvbmVfaXJxIik7
CkBAIC0xMDYsNyArMTAyLDcgQEAgc3RhdGljIHZvaWQgZHB1X2VuY29kZXJfcGh5c19jbWRfcHBf
cmRfcHRyX2lycSh2b2lkICphcmcsIGludCBpcnFfaWR4KQogCXN0cnVjdCBkcHVfZW5jb2Rlcl9w
aHlzICpwaHlzX2VuYyA9IGFyZzsKIAlzdHJ1Y3QgZHB1X2VuY29kZXJfcGh5c19jbWQgKmNtZF9l
bmM7CiAKLQlpZiAoIXBoeXNfZW5jIHx8ICFwaHlzX2VuYy0+aHdfcHApCisJaWYgKCFwaHlzX2Vu
Yy0+aHdfcHApCiAJCXJldHVybjsKIAogCURQVV9BVFJBQ0VfQkVHSU4oInJkX3B0cl9pcnEiKTsK
QEAgLTEyNSw5ICsxMjEsNiBAQCBzdGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9waHlzX2NtZF9jdGxf
c3RhcnRfaXJxKHZvaWQgKmFyZywgaW50IGlycV9pZHgpCiB7CiAJc3RydWN0IGRwdV9lbmNvZGVy
X3BoeXMgKnBoeXNfZW5jID0gYXJnOwogCi0JaWYgKCFwaHlzX2VuYykKLQkJcmV0dXJuOwotCiAJ
RFBVX0FUUkFDRV9CRUdJTigiY3RsX3N0YXJ0X2lycSIpOwogCiAJYXRvbWljX2FkZF91bmxlc3Mo
JnBoeXNfZW5jLT5wZW5kaW5nX2N0bHN0YXJ0X2NudCwgLTEsIDApOwpAQCAtMTQxLDkgKzEzNCw2
IEBAIHN0YXRpYyB2b2lkIGRwdV9lbmNvZGVyX3BoeXNfY21kX3VuZGVycnVuX2lycSh2b2lkICph
cmcsIGludCBpcnFfaWR4KQogewogCXN0cnVjdCBkcHVfZW5jb2Rlcl9waHlzICpwaHlzX2VuYyA9
IGFyZzsKIAotCWlmICghcGh5c19lbmMpCi0JCXJldHVybjsKLQogCWlmIChwaHlzX2VuYy0+cGFy
ZW50X29wcy0+aGFuZGxlX3VuZGVycnVuX3ZpcnQpCiAJCXBoeXNfZW5jLT5wYXJlbnRfb3BzLT5o
YW5kbGVfdW5kZXJydW5fdmlydChwaHlzX2VuYy0+cGFyZW50LAogCQkJcGh5c19lbmMpOwpAQCAt
MTc5LDcgKzE2OSw3IEBAIHN0YXRpYyB2b2lkIGRwdV9lbmNvZGVyX3BoeXNfY21kX21vZGVfc2V0
KAogCXN0cnVjdCBkcHVfZW5jb2Rlcl9waHlzX2NtZCAqY21kX2VuYyA9CiAJCXRvX2RwdV9lbmNv
ZGVyX3BoeXNfY21kKHBoeXNfZW5jKTsKIAotCWlmICghcGh5c19lbmMgfHwgIW1vZGUgfHwgIWFk
al9tb2RlKSB7CisJaWYgKCFtb2RlIHx8ICFhZGpfbW9kZSkgewogCQlEUFVfRVJST1IoImludmFs
aWQgYXJnc1xuIik7CiAJCXJldHVybjsKIAl9CkBAIC0xOTgsNyArMTg4LDcgQEAgc3RhdGljIGlu
dCBfZHB1X2VuY29kZXJfcGh5c19jbWRfaGFuZGxlX3BwZG9uZV90aW1lb3V0KAogCXUzMiBmcmFt
ZV9ldmVudCA9IERQVV9FTkNPREVSX0ZSQU1FX0VWRU5UX0VSUk9SOwogCWJvb2wgZG9fbG9nID0g
ZmFsc2U7CiAKLQlpZiAoIXBoeXNfZW5jIHx8ICFwaHlzX2VuYy0+aHdfcHApCisJaWYgKCFwaHlz
X2VuYy0+aHdfcHApCiAJCXJldHVybiAtRUlOVkFMOwogCiAJY21kX2VuYy0+cHBfdGltZW91dF9y
ZXBvcnRfY250Kys7CkBAIC0yNDcsMTEgKzIzNyw2IEBAIHN0YXRpYyBpbnQgX2RwdV9lbmNvZGVy
X3BoeXNfY21kX3dhaXRfZm9yX2lkbGUoCiAJc3RydWN0IGRwdV9lbmNvZGVyX3dhaXRfaW5mbyB3
YWl0X2luZm87CiAJaW50IHJldDsKIAotCWlmICghcGh5c19lbmMpIHsKLQkJRFBVX0VSUk9SKCJp
bnZhbGlkIGVuY29kZXJcbiIpOwotCQlyZXR1cm4gLUVJTlZBTDsKLQl9Ci0KIAl3YWl0X2luZm8u
d3EgPSAmcGh5c19lbmMtPnBlbmRpbmdfa2lja29mZl93cTsKIAl3YWl0X2luZm8uYXRvbWljX2Nu
dCA9ICZwaHlzX2VuYy0+cGVuZGluZ19raWNrb2ZmX2NudDsKIAl3YWl0X2luZm8udGltZW91dF9t
cyA9IEtJQ0tPRkZfVElNRU9VVF9NUzsKQEAgLTI3Myw3ICsyNTgsNyBAQCBzdGF0aWMgaW50IGRw
dV9lbmNvZGVyX3BoeXNfY21kX2NvbnRyb2xfdmJsYW5rX2lycSgKIAlpbnQgcmV0ID0gMDsKIAlp
bnQgcmVmY291bnQ7CiAKLQlpZiAoIXBoeXNfZW5jIHx8ICFwaHlzX2VuYy0+aHdfcHApIHsKKwlp
ZiAoIXBoeXNfZW5jLT5od19wcCkgewogCQlEUFVfRVJST1IoImludmFsaWQgZW5jb2RlclxuIik7
CiAJCXJldHVybiAtRUlOVkFMOwogCX0KQEAgLTMxNCw5ICsyOTksNiBAQCBzdGF0aWMgaW50IGRw
dV9lbmNvZGVyX3BoeXNfY21kX2NvbnRyb2xfdmJsYW5rX2lycSgKIHN0YXRpYyB2b2lkIGRwdV9l
bmNvZGVyX3BoeXNfY21kX2lycV9jb250cm9sKHN0cnVjdCBkcHVfZW5jb2Rlcl9waHlzICpwaHlz
X2VuYywKIAkJYm9vbCBlbmFibGUpCiB7Ci0JaWYgKCFwaHlzX2VuYykKLQkJcmV0dXJuOwotCiAJ
dHJhY2VfZHB1X2VuY19waHlzX2NtZF9pcnFfY3RybChEUk1JRChwaHlzX2VuYy0+cGFyZW50KSwK
IAkJCXBoeXNfZW5jLT5od19wcC0+aWR4IC0gUElOR1BPTkdfMCwKIAkJCWVuYWJsZSwgYXRvbWlj
X3JlYWQoJnBoeXNfZW5jLT52YmxhbmtfcmVmY291bnQpKTsKQEAgLTM1MSw3ICszMzMsNyBAQCBz
dGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9waHlzX2NtZF90ZWFyY2hlY2tfY29uZmlnKAogCXUzMiB2
c3luY19oejsKIAlzdHJ1Y3QgZHB1X2ttcyAqZHB1X2ttczsKIAotCWlmICghcGh5c19lbmMgfHwg
IXBoeXNfZW5jLT5od19wcCkgeworCWlmICghcGh5c19lbmMtPmh3X3BwKSB7CiAJCURQVV9FUlJP
UigiaW52YWxpZCBlbmNvZGVyXG4iKTsKIAkJcmV0dXJuOwogCX0KQEAgLTQyOCw4ICs0MTAsNyBA
QCBzdGF0aWMgdm9pZCBfZHB1X2VuY29kZXJfcGh5c19jbWRfcGluZ3BvbmdfY29uZmlnKAogCXN0
cnVjdCBkcHVfZW5jb2Rlcl9waHlzX2NtZCAqY21kX2VuYyA9CiAJCXRvX2RwdV9lbmNvZGVyX3Bo
eXNfY21kKHBoeXNfZW5jKTsKIAotCWlmICghcGh5c19lbmMgfHwgIXBoeXNfZW5jLT5od19wcAot
CQkJfHwgIXBoeXNfZW5jLT5od19jdGwtPm9wcy5zZXR1cF9pbnRmX2NmZykgeworCWlmICghcGh5
c19lbmMtPmh3X3BwIHx8ICFwaHlzX2VuYy0+aHdfY3RsLT5vcHMuc2V0dXBfaW50Zl9jZmcpIHsK
IAkJRFBVX0VSUk9SKCJpbnZhbGlkIGFyZyhzKSwgZW5jICVkXG4iLCBwaHlzX2VuYyAhPSAwKTsK
IAkJcmV0dXJuOwogCX0KQEAgLTQ1OCw3ICs0MzksNyBAQCBzdGF0aWMgdm9pZCBkcHVfZW5jb2Rl
cl9waHlzX2NtZF9lbmFibGVfaGVscGVyKAogCXN0cnVjdCBkcHVfaHdfY3RsICpjdGw7CiAJdTMy
IGZsdXNoX21hc2sgPSAwOwogCi0JaWYgKCFwaHlzX2VuYyB8fCAhcGh5c19lbmMtPmh3X3BwKSB7
CisJaWYgKCFwaHlzX2VuYy0+aHdfcHApIHsKIAkJRFBVX0VSUk9SKCJpbnZhbGlkIGFyZyhzKSwg
ZW5jb2RlciAlZFxuIiwgcGh5c19lbmMgIT0gMCk7CiAJCXJldHVybjsKIAl9CkBAIC00ODAsNyAr
NDYxLDcgQEAgc3RhdGljIHZvaWQgZHB1X2VuY29kZXJfcGh5c19jbWRfZW5hYmxlKHN0cnVjdCBk
cHVfZW5jb2Rlcl9waHlzICpwaHlzX2VuYykKIAlzdHJ1Y3QgZHB1X2VuY29kZXJfcGh5c19jbWQg
KmNtZF9lbmMgPQogCQl0b19kcHVfZW5jb2Rlcl9waHlzX2NtZChwaHlzX2VuYyk7CiAKLQlpZiAo
IXBoeXNfZW5jIHx8ICFwaHlzX2VuYy0+aHdfcHApIHsKKwlpZiAoIXBoeXNfZW5jLT5od19wcCkg
ewogCQlEUFVfRVJST1IoImludmFsaWQgcGh5cyBlbmNvZGVyXG4iKTsKIAkJcmV0dXJuOwogCX0K
QEAgLTQ5OSw4ICs0ODAsNyBAQCBzdGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9waHlzX2NtZF9lbmFi
bGUoc3RydWN0IGRwdV9lbmNvZGVyX3BoeXMgKnBoeXNfZW5jKQogc3RhdGljIHZvaWQgX2RwdV9l
bmNvZGVyX3BoeXNfY21kX2Nvbm5lY3RfdGUoCiAJCXN0cnVjdCBkcHVfZW5jb2Rlcl9waHlzICpw
aHlzX2VuYywgYm9vbCBlbmFibGUpCiB7Ci0JaWYgKCFwaHlzX2VuYyB8fCAhcGh5c19lbmMtPmh3
X3BwIHx8Ci0JCQkhcGh5c19lbmMtPmh3X3BwLT5vcHMuY29ubmVjdF9leHRlcm5hbF90ZSkKKwlp
ZiAoIXBoeXNfZW5jLT5od19wcCB8fCAhcGh5c19lbmMtPmh3X3BwLT5vcHMuY29ubmVjdF9leHRl
cm5hbF90ZSkKIAkJcmV0dXJuOwogCiAJdHJhY2VfZHB1X2VuY19waHlzX2NtZF9jb25uZWN0X3Rl
KERSTUlEKHBoeXNfZW5jLT5wYXJlbnQpLCBlbmFibGUpOwpAQCAtNTE4LDcgKzQ5OCw3IEBAIHN0
YXRpYyBpbnQgZHB1X2VuY29kZXJfcGh5c19jbWRfZ2V0X2xpbmVfY291bnQoCiB7CiAJc3RydWN0
IGRwdV9od19waW5ncG9uZyAqaHdfcHA7CiAKLQlpZiAoIXBoeXNfZW5jIHx8ICFwaHlzX2VuYy0+
aHdfcHApCisJaWYgKCFwaHlzX2VuYy0+aHdfcHApCiAJCXJldHVybiAtRUlOVkFMOwogCiAJaWYg
KCFkcHVfZW5jb2Rlcl9waHlzX2NtZF9pc19tYXN0ZXIocGh5c19lbmMpKQpAQCAtNTM2LDcgKzUx
Niw3IEBAIHN0YXRpYyB2b2lkIGRwdV9lbmNvZGVyX3BoeXNfY21kX2Rpc2FibGUoc3RydWN0IGRw
dV9lbmNvZGVyX3BoeXMgKnBoeXNfZW5jKQogCXN0cnVjdCBkcHVfZW5jb2Rlcl9waHlzX2NtZCAq
Y21kX2VuYyA9CiAJCXRvX2RwdV9lbmNvZGVyX3BoeXNfY21kKHBoeXNfZW5jKTsKIAotCWlmICgh
cGh5c19lbmMgfHwgIXBoeXNfZW5jLT5od19wcCkgeworCWlmICghcGh5c19lbmMtPmh3X3BwKSB7
CiAJCURQVV9FUlJPUigiaW52YWxpZCBlbmNvZGVyXG4iKTsKIAkJcmV0dXJuOwogCX0KQEAgLTU1
OSwxMCArNTM5LDYgQEAgc3RhdGljIHZvaWQgZHB1X2VuY29kZXJfcGh5c19jbWRfZGVzdHJveShz
dHJ1Y3QgZHB1X2VuY29kZXJfcGh5cyAqcGh5c19lbmMpCiAJc3RydWN0IGRwdV9lbmNvZGVyX3Bo
eXNfY21kICpjbWRfZW5jID0KIAkJdG9fZHB1X2VuY29kZXJfcGh5c19jbWQocGh5c19lbmMpOwog
Ci0JaWYgKCFwaHlzX2VuYykgewotCQlEUFVfRVJST1IoImludmFsaWQgZW5jb2RlclxuIik7Ci0J
CXJldHVybjsKLQl9CiAJa2ZyZWUoY21kX2VuYyk7CiB9CiAKQEAgLTU4MCw3ICs1NTYsNyBAQCBz
dGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9waHlzX2NtZF9wcmVwYXJlX2Zvcl9raWNrb2ZmKAogCQkJ
dG9fZHB1X2VuY29kZXJfcGh5c19jbWQocGh5c19lbmMpOwogCWludCByZXQ7CiAKLQlpZiAoIXBo
eXNfZW5jIHx8ICFwaHlzX2VuYy0+aHdfcHApIHsKKwlpZiAoIXBoeXNfZW5jLT5od19wcCkgewog
CQlEUFVfRVJST1IoImludmFsaWQgZW5jb2RlclxuIik7CiAJCXJldHVybjsKIAl9CkBAIC02MTQs
MTEgKzU5MCw2IEBAIHN0YXRpYyBpbnQgX2RwdV9lbmNvZGVyX3BoeXNfY21kX3dhaXRfZm9yX2N0
bF9zdGFydCgKIAlzdHJ1Y3QgZHB1X2VuY29kZXJfd2FpdF9pbmZvIHdhaXRfaW5mbzsKIAlpbnQg
cmV0OwogCi0JaWYgKCFwaHlzX2VuYykgewotCQlEUFVfRVJST1IoImludmFsaWQgYXJndW1lbnQo
cylcbiIpOwotCQlyZXR1cm4gLUVJTlZBTDsKLQl9Ci0KIAl3YWl0X2luZm8ud3EgPSAmcGh5c19l
bmMtPnBlbmRpbmdfa2lja29mZl93cTsKIAl3YWl0X2luZm8uYXRvbWljX2NudCA9ICZwaHlzX2Vu
Yy0+cGVuZGluZ19jdGxzdGFydF9jbnQ7CiAJd2FpdF9pbmZvLnRpbWVvdXRfbXMgPSBLSUNLT0ZG
X1RJTUVPVVRfTVM7CkBAIC02MzksOSArNjEwLDYgQEAgc3RhdGljIGludCBkcHVfZW5jb2Rlcl9w
aHlzX2NtZF93YWl0X2Zvcl90eF9jb21wbGV0ZSgKIHsKIAlpbnQgcmM7CiAKLQlpZiAoIXBoeXNf
ZW5jKQotCQlyZXR1cm4gLUVJTlZBTDsKLQogCXJjID0gX2RwdV9lbmNvZGVyX3BoeXNfY21kX3dh
aXRfZm9yX2lkbGUocGh5c19lbmMpOwogCWlmIChyYykgewogCQlEUk1fRVJST1IoImZhaWxlZCB3
YWl0X2Zvcl9pZGxlOiBpZDoldSByZXQ6JWQgaW50ZjolZFxuIiwKQEAgLTY1OCw5ICs2MjYsNiBA
QCBzdGF0aWMgaW50IGRwdV9lbmNvZGVyX3BoeXNfY21kX3dhaXRfZm9yX2NvbW1pdF9kb25lKAog
CWludCByYyA9IDA7CiAJc3RydWN0IGRwdV9lbmNvZGVyX3BoeXNfY21kICpjbWRfZW5jOwogCi0J
aWYgKCFwaHlzX2VuYykKLQkJcmV0dXJuIC1FSU5WQUw7Ci0KIAljbWRfZW5jID0gdG9fZHB1X2Vu
Y29kZXJfcGh5c19jbWQocGh5c19lbmMpOwogCiAJLyogb25seSByZXF1aXJlZCBmb3IgbWFzdGVy
IGNvbnRyb2xsZXIgKi8KQEAgLTY4MSw5ICs2NDYsNiBAQCBzdGF0aWMgaW50IGRwdV9lbmNvZGVy
X3BoeXNfY21kX3dhaXRfZm9yX3ZibGFuaygKIAlzdHJ1Y3QgZHB1X2VuY29kZXJfcGh5c19jbWQg
KmNtZF9lbmM7CiAJc3RydWN0IGRwdV9lbmNvZGVyX3dhaXRfaW5mbyB3YWl0X2luZm87CiAKLQlp
ZiAoIXBoeXNfZW5jKQotCQlyZXR1cm4gLUVJTlZBTDsKLQogCWNtZF9lbmMgPSB0b19kcHVfZW5j
b2Rlcl9waHlzX2NtZChwaHlzX2VuYyk7CiAKIAkvKiBvbmx5IHJlcXVpcmVkIGZvciBtYXN0ZXIg
Y29udHJvbGxlciAqLwpAQCAtNzE1LDkgKzY3Nyw2IEBAIHN0YXRpYyB2b2lkIGRwdV9lbmNvZGVy
X3BoeXNfY21kX2hhbmRsZV9wb3N0X2tpY2tvZmYoCiBzdGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9w
aHlzX2NtZF90cmlnZ2VyX3N0YXJ0KAogCQlzdHJ1Y3QgZHB1X2VuY29kZXJfcGh5cyAqcGh5c19l
bmMpCiB7Ci0JaWYgKCFwaHlzX2VuYykKLQkJcmV0dXJuOwotCiAJZHB1X2VuY29kZXJfaGVscGVy
X3RyaWdnZXJfc3RhcnQocGh5c19lbmMpOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX3ZpZC5jIGIvZHJpdmVycy9ncHUvZHJt
L21zbS9kaXNwL2RwdTEvZHB1X2VuY29kZXJfcGh5c192aWQuYwppbmRleCAyMjUyNDc1ZGQ4ZGMu
LjExNGEzZThmNmIwYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEv
ZHB1X2VuY29kZXJfcGh5c192aWQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1
MS9kcHVfZW5jb2Rlcl9waHlzX3ZpZC5jCkBAIC0yMjAsOCArMjIwLDcgQEAgc3RhdGljIGJvb2wg
ZHB1X2VuY29kZXJfcGh5c192aWRfbW9kZV9maXh1cCgKIAkJY29uc3Qgc3RydWN0IGRybV9kaXNw
bGF5X21vZGUgKm1vZGUsCiAJCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGpfbW9kZSkKIHsK
LQlpZiAocGh5c19lbmMpCi0JCURQVV9ERUJVR19WSURFTkMocGh5c19lbmMsICJcbiIpOworCURQ
VV9ERUJVR19WSURFTkMocGh5c19lbmMsICJcbiIpOwogCiAJLyoKIAkgKiBNb2RpZnlpbmcgbW9k
ZSBoYXMgY29uc2VxdWVuY2VzIHdoZW4gdGhlIG1vZGUgY29tZXMgYmFjayB0byB1cwpAQCAtMjM5
LDcgKzIzOCw3IEBAIHN0YXRpYyB2b2lkIGRwdV9lbmNvZGVyX3BoeXNfdmlkX3NldHVwX3RpbWlu
Z19lbmdpbmUoCiAJdW5zaWduZWQgbG9uZyBsb2NrX2ZsYWdzOwogCXN0cnVjdCBkcHVfaHdfaW50
Zl9jZmcgaW50Zl9jZmcgPSB7IDAgfTsKIAotCWlmICghcGh5c19lbmMgfHwgIXBoeXNfZW5jLT5o
d19jdGwtPm9wcy5zZXR1cF9pbnRmX2NmZykgeworCWlmICghcGh5c19lbmMtPmh3X2N0bC0+b3Bz
LnNldHVwX2ludGZfY2ZnKSB7CiAJCURQVV9FUlJPUigiaW52YWxpZCBlbmNvZGVyICVkXG4iLCBw
aHlzX2VuYyAhPSAwKTsKIAkJcmV0dXJuOwogCX0KQEAgLTI5Myw5ICsyOTIsNiBAQCBzdGF0aWMg
dm9pZCBkcHVfZW5jb2Rlcl9waHlzX3ZpZF92YmxhbmtfaXJxKHZvaWQgKmFyZywgaW50IGlycV9p
ZHgpCiAJdTMyIGZsdXNoX3JlZ2lzdGVyID0gMDsKIAlpbnQgbmV3X2NudCA9IC0xLCBvbGRfY250
ID0gLTE7CiAKLQlpZiAoIXBoeXNfZW5jKQotCQlyZXR1cm47Ci0KIAlod19jdGwgPSBwaHlzX2Vu
Yy0+aHdfY3RsOwogCiAJRFBVX0FUUkFDRV9CRUdJTigidmJsYW5rX2lycSIpOwpAQCAtMzMzLDkg
KzMyOSw2IEBAIHN0YXRpYyB2b2lkIGRwdV9lbmNvZGVyX3BoeXNfdmlkX3VuZGVycnVuX2lycSh2
b2lkICphcmcsIGludCBpcnFfaWR4KQogewogCXN0cnVjdCBkcHVfZW5jb2Rlcl9waHlzICpwaHlz
X2VuYyA9IGFyZzsKIAotCWlmICghcGh5c19lbmMpCi0JCXJldHVybjsKLQogCWlmIChwaHlzX2Vu
Yy0+cGFyZW50X29wcy0+aGFuZGxlX3VuZGVycnVuX3ZpcnQpCiAJCXBoeXNfZW5jLT5wYXJlbnRf
b3BzLT5oYW5kbGVfdW5kZXJydW5fdmlydChwaHlzX2VuYy0+cGFyZW50LAogCQkJcGh5c19lbmMp
OwpAQCAtMzcyLDExICszNjUsNiBAQCBzdGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9waHlzX3ZpZF9t
b2RlX3NldCgKIAkJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCiAJCXN0cnVjdCBkcm1f
ZGlzcGxheV9tb2RlICphZGpfbW9kZSkKIHsKLQlpZiAoIXBoeXNfZW5jKSB7Ci0JCURQVV9FUlJP
UigiaW52YWxpZCBlbmNvZGVyL2ttc1xuIik7Ci0JCXJldHVybjsKLQl9Ci0KIAlpZiAoYWRqX21v
ZGUpIHsKIAkJcGh5c19lbmMtPmNhY2hlZF9tb2RlID0gKmFkal9tb2RlOwogCQlkcm1fbW9kZV9k
ZWJ1Z19wcmludG1vZGVsaW5lKGFkal9tb2RlKTsKQEAgLTM5MywxMSArMzgxLDYgQEAgc3RhdGlj
IGludCBkcHVfZW5jb2Rlcl9waHlzX3ZpZF9jb250cm9sX3ZibGFua19pcnEoCiAJaW50IHJldCA9
IDA7CiAJaW50IHJlZmNvdW50OwogCi0JaWYgKCFwaHlzX2VuYykgewotCQlEUFVfRVJST1IoImlu
dmFsaWQgZW5jb2RlclxuIik7Ci0JCXJldHVybiAtRUlOVkFMOwotCX0KLQogCXJlZmNvdW50ID0g
YXRvbWljX3JlYWQoJnBoeXNfZW5jLT52YmxhbmtfcmVmY291bnQpOwogCiAJLyogU2xhdmUgZW5j
b2RlcnMgZG9uJ3QgcmVwb3J0IHZibGFuayAqLwpAQCAtNDY5LDExICs0NTIsNiBAQCBzdGF0aWMg
dm9pZCBkcHVfZW5jb2Rlcl9waHlzX3ZpZF9lbmFibGUoc3RydWN0IGRwdV9lbmNvZGVyX3BoeXMg
KnBoeXNfZW5jKQogCiBzdGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9waHlzX3ZpZF9kZXN0cm95KHN0
cnVjdCBkcHVfZW5jb2Rlcl9waHlzICpwaHlzX2VuYykKIHsKLQlpZiAoIXBoeXNfZW5jKSB7Ci0J
CURQVV9FUlJPUigiaW52YWxpZCBlbmNvZGVyXG4iKTsKLQkJcmV0dXJuOwotCX0KLQogCURQVV9E
RUJVR19WSURFTkMocGh5c19lbmMsICJcbiIpOwogCWtmcmVlKHBoeXNfZW5jKTsKIH0KQEAgLTQ5
MSwxMSArNDY5LDYgQEAgc3RhdGljIGludCBkcHVfZW5jb2Rlcl9waHlzX3ZpZF93YWl0X2Zvcl92
YmxhbmsoCiAJc3RydWN0IGRwdV9lbmNvZGVyX3dhaXRfaW5mbyB3YWl0X2luZm87CiAJaW50IHJl
dDsKIAotCWlmICghcGh5c19lbmMpIHsKLQkJcHJfZXJyKCJpbnZhbGlkIGVuY29kZXJcbiIpOwot
CQlyZXR1cm4gLUVJTlZBTDsKLQl9Ci0KIAl3YWl0X2luZm8ud3EgPSAmcGh5c19lbmMtPnBlbmRp
bmdfa2lja29mZl93cTsKIAl3YWl0X2luZm8uYXRvbWljX2NudCA9ICZwaHlzX2VuYy0+cGVuZGlu
Z19raWNrb2ZmX2NudDsKIAl3YWl0X2luZm8udGltZW91dF9tcyA9IEtJQ0tPRkZfVElNRU9VVF9N
UzsKQEAgLTU0MSwxMSArNTE0LDYgQEAgc3RhdGljIHZvaWQgZHB1X2VuY29kZXJfcGh5c192aWRf
cHJlcGFyZV9mb3Jfa2lja29mZigKIAlzdHJ1Y3QgZHB1X2h3X2N0bCAqY3RsOwogCWludCByYzsK
IAotCWlmICghcGh5c19lbmMpIHsKLQkJRFBVX0VSUk9SKCJpbnZhbGlkIGVuY29kZXIvcGFyYW1l
dGVyc1xuIik7Ci0JCXJldHVybjsKLQl9Ci0KIAljdGwgPSBwaHlzX2VuYy0+aHdfY3RsOwogCWlm
ICghY3RsLT5vcHMud2FpdF9yZXNldF9zdGF0dXMpCiAJCXJldHVybjsKQEAgLTU2Nyw3ICs1MzUs
NyBAQCBzdGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9waHlzX3ZpZF9kaXNhYmxlKHN0cnVjdCBkcHVf
ZW5jb2Rlcl9waHlzICpwaHlzX2VuYykKIAl1bnNpZ25lZCBsb25nIGxvY2tfZmxhZ3M7CiAJaW50
IHJldDsKIAotCWlmICghcGh5c19lbmMgfHwgIXBoeXNfZW5jLT5wYXJlbnQgfHwgIXBoeXNfZW5j
LT5wYXJlbnQtPmRldikgeworCWlmICghcGh5c19lbmMtPnBhcmVudCB8fCAhcGh5c19lbmMtPnBh
cmVudC0+ZGV2KSB7CiAJCURQVV9FUlJPUigiaW52YWxpZCBlbmNvZGVyL2RldmljZVxuIik7CiAJ
CXJldHVybjsKIAl9CkBAIC02MzcsOSArNjA1LDYgQEAgc3RhdGljIHZvaWQgZHB1X2VuY29kZXJf
cGh5c192aWRfaXJxX2NvbnRyb2woc3RydWN0IGRwdV9lbmNvZGVyX3BoeXMgKnBoeXNfZW5jLAog
ewogCWludCByZXQ7CiAKLQlpZiAoIXBoeXNfZW5jKQotCQlyZXR1cm47Ci0KIAl0cmFjZV9kcHVf
ZW5jX3BoeXNfdmlkX2lycV9jdHJsKERSTUlEKHBoeXNfZW5jLT5wYXJlbnQpLAogCQkJICAgIHBo
eXNfZW5jLT5od19pbnRmLT5pZHggLSBJTlRGXzAsCiAJCQkgICAgZW5hYmxlLApAQCAtNjYwLDkg
KzYyNSw2IEBAIHN0YXRpYyB2b2lkIGRwdV9lbmNvZGVyX3BoeXNfdmlkX2lycV9jb250cm9sKHN0
cnVjdCBkcHVfZW5jb2Rlcl9waHlzICpwaHlzX2VuYywKIHN0YXRpYyBpbnQgZHB1X2VuY29kZXJf
cGh5c192aWRfZ2V0X2xpbmVfY291bnQoCiAJCXN0cnVjdCBkcHVfZW5jb2Rlcl9waHlzICpwaHlz
X2VuYykKIHsKLQlpZiAoIXBoeXNfZW5jKQotCQlyZXR1cm4gLUVJTlZBTDsKLQogCWlmICghZHB1
X2VuY29kZXJfcGh5c192aWRfaXNfbWFzdGVyKHBoeXNfZW5jKSkKIAkJcmV0dXJuIC1FSU5WQUw7
CiAKLS0gCjIuMjEuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
