Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5641DDFBCE
	for <lists+dri-devel@lfdr.de>; Tue, 22 Oct 2019 04:40:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E66646E347;
	Tue, 22 Oct 2019 02:39:42 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from us-smtp-1.mimecast.com (us-smtp-2.mimecast.com [205.139.110.61])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 93B606E34A
 for <dri-devel@lists.freedesktop.org>; Tue, 22 Oct 2019 02:39:40 +0000 (UTC)
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-14-DuY4PqQ5NwqPr5PTpQygBA-1; Mon, 21 Oct 2019 22:39:35 -0400
Received: from smtp.corp.redhat.com (int-mx01.intmail.prod.int.phx2.redhat.com
 [10.5.11.11])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 1C1D480183E;
 Tue, 22 Oct 2019 02:39:33 +0000 (UTC)
Received: from malachite.redhat.com (ovpn-120-98.rdu2.redhat.com
 [10.10.120.98])
 by smtp.corp.redhat.com (Postfix) with ESMTP id BCC4B60126;
 Tue, 22 Oct 2019 02:39:29 +0000 (UTC)
From: Lyude Paul <lyude@redhat.com>
To: dri-devel@lists.freedesktop.org, amd-gfx@lists.freedesktop.org,
 nouveau@lists.freedesktop.org, intel-gfx@lists.freedesktop.org
Subject: [PATCH v5 05/14] drm/dp_mst: Add probe_lock
Date: Mon, 21 Oct 2019 22:36:00 -0400
Message-Id: <20191022023641.8026-6-lyude@redhat.com>
In-Reply-To: <20191022023641.8026-1-lyude@redhat.com>
References: <20191022023641.8026-1-lyude@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.11
X-MC-Unique: DuY4PqQ5NwqPr5PTpQygBA-1
X-Mimecast-Spam-Score: 0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=redhat.com; 
 s=mimecast20190719; t=1571711978;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=SoC8BThus+lmRGVf3qI752PYilZyM0Pa30gkQ7jCOKI=;
 b=X3pOLUTKV4RhXJgaPT1u2Q4XcdfTeLRO7uhDzCKGxsSiCmPYbTw67KIw+MCQMM9yT3tNuE
 wqXHyEFJrG0fkYYsYsWJVWHSTi2CGTsIi1o6mfFMDqM0oiRwV4uhsMDpv5Rcvi0IslQPZj
 1yd1CcMKl1l63/xBK6AX6muMuscmwl8=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, Daniel Vetter <daniel.vetter@ffwll.ch>,
 linux-kernel@vger.kernel.org, Harry Wentland <hwentlan@amd.com>,
 Juston Li <juston.li@intel.com>, Sean Paul <sean@poorly.run>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q3VycmVudGx5LCBNU1QgbGFja3MgbG9ja2luZyBpbiBhIGxvdCBvZiBwbGFjZXMgdGhhdCByZWFs
bHkgc2hvdWxkIGhhdmUKc29tZSBzb3J0IG9mIGxvY2tpbmcuIEhvdHBsdWdnaW5nIGFuZCBsaW5r
IGFkZHJlc3MgY29kZSBwYXRocyBhcmUgc29tZQpvZiB0aGUgb2ZmZW5kZXJzIGhlcmUsIGFzIHRo
ZXJlIGlzIGFjdHVhbGx5IG5vdGhpbmcgcHJldmVudGluZyB1cyBmcm9tCnJ1bm5pbmcgYSBsaW5r
IGFkZHJlc3MgcHJvYmUgd2hpbGUgYXQgdGhlIHNhbWUgdGltZSBoYW5kbGluZyBhCmNvbm5lY3Rp
b24gc3RhdHVzIHVwZGF0ZSByZXF1ZXN0IC0gc29tZXRoaW5nIHRoYXQncyBsaWtlbHkgYWx3YXlz
IGJlZW4KcG9zc2libGUgYnV0IG5ldmVyIHNlZW4gaW4gdGhlIHdpbGQgYmVjYXVzZSBob3RwbHVn
Z2luZyBoYXMgYmVlbiBicm9rZW4KZm9yIGFnZXMgbm93ICh3aXRoIHRoZSBleGNlcHRpb24gb2Yg
YW1kZ3B1LCBmb3IgcmVhc29ucyBJIGRvbid0IHRoaW5rCmFyZSB3b3J0aCBkaWdnaW5nIGludG8g
dmVyeSBmYXIpLgoKTm90ZTogSSdtIGdvaW5nIHRvIHN0YXJ0IHVzaW5nIHRoZSB0ZXJtICJpbi1t
ZW1vcnkgdG9wb2xvZ3kgbGF5b3V0IiBoZXJlCnRvIHJlZmVyIHRvIGRybV9kcF9tc3RfcG9ydC0+
bXN0YiBhbmQgZHJtX2RwX21zdF9icmFuY2gtPnBvcnRzLgoKTG9ja2luZyBpbiB0aGVzZSBwbGFj
ZXMgaXMgYSBsaXR0bGUgdG91Z2hlciB0aGVuIGl0IGxvb2tzIHRob3VnaC4KR2VuZXJhbGx5IHdl
IHByb3RlY3QgYW55dGhpbmcgaGF2aW5nIHRvIGRvIHdpdGggdGhlIGluLW1lbW9yeSB0b3BvbG9n
eQpsYXlvdXQgdW5kZXIgJm1nci0+bG9jay4gQnV0IHRoaXMgYmVjb21lcyBuZWFybHkgaW1wb3Nz
aWJsZSB0byBkbyBmcm9tCnRoZSBjb250ZXh0IG9mIGxpbmsgYWRkcmVzcyBwcm9iZXMgZHVlIHRv
IHRoZSBmYWN0IHRoYXQgJm1nci0+bG9jayBpcwp1c3VhbGx5IGdyYWJiZWQgdW5kZXIgcmFuZG9t
IHZhcmlvdXMgbW9kZXNldHRpbmcgbG9ja3MsIG1lYW5pbmcgdGhhdAp0aGVyZSdzIG5vIHdheSB3
ZSBjYW4ganVzdCBpbnZlcnQgdGhlICZtZ3ItPmxvY2sgb3JkZXIgYW5kIGtlZXAgaXQKbG9ja2Vk
IHRocm91Z2hvdXQgdGhlIHdob2xlIHByb2Nlc3Mgb2YgdXBkYXRpbmcgdGhlIHRvcG9sb2d5LgoK
THVja2lseSB0aGVyZSBhcmUgb25seSB0d28gd29ya2VycyB3aGljaCBjYW4gbW9kaWZ5IHRoZSBp
bi1tZW1vcnkKdG9wb2xvZ3kgbGF5b3V0OiBkcm1fZHBfbXN0X3VwX3JlcV93b3JrKCkgYW5kCmRy
bV9kcF9tc3RfbGlua19wcm9iZV93b3JrKCksIG1lYW5pbmcgYXMgbG9uZyBhcyB3ZSBwcmV2ZW50
IHRoZXNlIHR3bwp3b3JrZXJzIGZyb20gdHJhdmVsaW5nIHRoZSB0b3BvbG9neSBsYXlvdXQgaW4g
cGFyYWxsZWwgd2l0aCB0aGUgaW50ZW50Cm9mIHVwZGF0aW5nIGl0IHdlIGRvbid0IG5lZWQgdG8g
d29ycnkgYWJvdXQgZ3JhYmJpbmcgJm1nci0+bG9jayBpbiB0aGVzZQp3b3JrZXJzIGZvciByZWFk
cy4gV2Ugb25seSBuZWVkIHRvIGdyYWIgJm1nci0+bG9jayBpbiB0aGVzZSB3b3JrZXJzIGZvcgp3
cml0ZXMsIHNvIHRoYXQgcmVhZGVycyBvdXRzaWRlIHRoZXNlIHR3byB3b3JrZXJzIGFyZSBzdGls
bCBwcm90ZWN0ZWQKZnJvbSB0aGUgdG9wb2xvZ3kgbGF5b3V0IGNoYW5naW5nIGJlbmVhdGggdGhl
bS4KClNvLCBhZGQgdGhlIG5ldyAmbWdyLT5wcm9iZV9sb2NrIGFuZCB1c2UgaXQgaW4gYm90aApk
cm1fZHBfbXN0X2xpbmtfcHJvYmVfd29yaygpIGFuZCBkcm1fZHBfbXN0X3VwX3JlcV93b3JrKCku
IEFkZGl0aW9uYWxseSwKYWRkIHNvbWUgbW9yZSBkZXRhaWxlZCBleHBsYW5hdGlvbnMgZm9yIGhv
dyB0aGlzIGxvY2tpbmcgaXMgaW50ZW5kZWQgdG8Kd29yayB0byBkcm1fZHBfbXN0X3BvcnQtPm1z
dGIgYW5kIGRybV9kcF9tc3RfYnJhbmNoLT5wb3J0cy4KClNpZ25lZC1vZmYtYnk6IEx5dWRlIFBh
dWwgPGx5dWRlQHJlZGhhdC5jb20+CkNjOiBKdXN0b24gTGkgPGp1c3Rvbi5saUBpbnRlbC5jb20+
CkNjOiBJbXJlIERlYWsgPGltcmUuZGVha0BpbnRlbC5jb20+CkNjOiBWaWxsZSBTeXJqw6Rsw6Qg
PHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgpDYzogSGFycnkgV2VudGxhbmQgPGh3ZW50
bGFuQGFtZC5jb20+CkNjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgpD
YzogU2VhbiBQYXVsIDxzZWFuQHBvb3JseS5ydW4+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2RybV9k
cF9tc3RfdG9wb2xvZ3kuYyB8IDI4ICsrKysrKysrKysrKysrLS0tLS0tLS0tCiBpbmNsdWRlL2Ry
bS9kcm1fZHBfbXN0X2hlbHBlci5oICAgICAgIHwgMzIgKysrKysrKysrKysrKysrKysrKysrKyst
LS0tCiAyIGZpbGVzIGNoYW5nZWQsIDQ2IGluc2VydGlvbnMoKyksIDE0IGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZHBfbXN0X3RvcG9sb2d5LmMgYi9kcml2
ZXJzL2dwdS9kcm0vZHJtX2RwX21zdF90b3BvbG9neS5jCmluZGV4IDA4YzMxNmE3MjdkZi4uMTFk
ODQyZjBiZmY1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2RwX21zdF90b3BvbG9n
eS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZHBfbXN0X3RvcG9sb2d5LmMKQEAgLTIxNDcs
MzcgKzIxNDcsNDAgQEAgc3RhdGljIHZvaWQgZHJtX2RwX2NoZWNrX2FuZF9zZW5kX2xpbmtfYWRk
cmVzcyhzdHJ1Y3QgZHJtX2RwX21zdF90b3BvbG9neV9tZ3IgKm0KIAkJCQkJICAgICAgIHN0cnVj
dCBkcm1fZHBfbXN0X2JyYW5jaCAqbXN0YikKIHsKIAlzdHJ1Y3QgZHJtX2RwX21zdF9wb3J0ICpw
b3J0OwotCXN0cnVjdCBkcm1fZHBfbXN0X2JyYW5jaCAqbXN0Yl9jaGlsZDsKKwogCWlmICghbXN0
Yi0+bGlua19hZGRyZXNzX3NlbnQpCiAJCWRybV9kcF9zZW5kX2xpbmtfYWRkcmVzcyhtZ3IsIG1z
dGIpOwogCiAJbGlzdF9mb3JfZWFjaF9lbnRyeShwb3J0LCAmbXN0Yi0+cG9ydHMsIG5leHQpIHsK
LQkJaWYgKHBvcnQtPmlucHV0KQotCQkJY29udGludWU7CisJCXN0cnVjdCBkcm1fZHBfbXN0X2Jy
YW5jaCAqbXN0Yl9jaGlsZCA9IE5VTEw7CiAKLQkJaWYgKCFwb3J0LT5kZHBzKQorCQlpZiAocG9y
dC0+aW5wdXQgfHwgIXBvcnQtPmRkcHMpCiAJCQljb250aW51ZTsKIAogCQlpZiAoIXBvcnQtPmF2
YWlsYWJsZV9wYm4pCiAJCQlkcm1fZHBfc2VuZF9lbnVtX3BhdGhfcmVzb3VyY2VzKG1nciwgbXN0
YiwgcG9ydCk7CiAKLQkJaWYgKHBvcnQtPm1zdGIpIHsKKwkJaWYgKHBvcnQtPm1zdGIpCiAJCQlt
c3RiX2NoaWxkID0gZHJtX2RwX21zdF90b3BvbG9neV9nZXRfbXN0Yl92YWxpZGF0ZWQoCiAJCQkg
ICAgbWdyLCBwb3J0LT5tc3RiKTsKLQkJCWlmIChtc3RiX2NoaWxkKSB7Ci0JCQkJZHJtX2RwX2No
ZWNrX2FuZF9zZW5kX2xpbmtfYWRkcmVzcyhtZ3IsIG1zdGJfY2hpbGQpOwotCQkJCWRybV9kcF9t
c3RfdG9wb2xvZ3lfcHV0X21zdGIobXN0Yl9jaGlsZCk7Ci0JCQl9CisKKwkJaWYgKG1zdGJfY2hp
bGQpIHsKKwkJCWRybV9kcF9jaGVja19hbmRfc2VuZF9saW5rX2FkZHJlc3MobWdyLCBtc3RiX2No
aWxkKTsKKwkJCWRybV9kcF9tc3RfdG9wb2xvZ3lfcHV0X21zdGIobXN0Yl9jaGlsZCk7CiAJCX0K
IAl9CiB9CiAKIHN0YXRpYyB2b2lkIGRybV9kcF9tc3RfbGlua19wcm9iZV93b3JrKHN0cnVjdCB3
b3JrX3N0cnVjdCAqd29yaykKIHsKLQlzdHJ1Y3QgZHJtX2RwX21zdF90b3BvbG9neV9tZ3IgKm1n
ciA9IGNvbnRhaW5lcl9vZih3b3JrLCBzdHJ1Y3QgZHJtX2RwX21zdF90b3BvbG9neV9tZ3IsIHdv
cmspOworCXN0cnVjdCBkcm1fZHBfbXN0X3RvcG9sb2d5X21nciAqbWdyID0KKwkJY29udGFpbmVy
X29mKHdvcmssIHN0cnVjdCBkcm1fZHBfbXN0X3RvcG9sb2d5X21nciwgd29yayk7CisJc3RydWN0
IGRybV9kZXZpY2UgKmRldiA9IG1nci0+ZGV2OwogCXN0cnVjdCBkcm1fZHBfbXN0X2JyYW5jaCAq
bXN0YjsKIAlpbnQgcmV0OwogCisJbXV0ZXhfbG9jaygmbWdyLT5wcm9iZV9sb2NrKTsKKwogCW11
dGV4X2xvY2soJm1nci0+bG9jayk7CiAJbXN0YiA9IG1nci0+bXN0X3ByaW1hcnk7CiAJaWYgKG1z
dGIpIHsKQEAgLTIxOTAsNiArMjE5Myw3IEBAIHN0YXRpYyB2b2lkIGRybV9kcF9tc3RfbGlua19w
cm9iZV93b3JrKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKIAkJZHJtX2RwX2NoZWNrX2FuZF9z
ZW5kX2xpbmtfYWRkcmVzcyhtZ3IsIG1zdGIpOwogCQlkcm1fZHBfbXN0X3RvcG9sb2d5X3B1dF9t
c3RiKG1zdGIpOwogCX0KKwltdXRleF91bmxvY2soJm1nci0+cHJvYmVfbG9jayk7CiB9CiAKIHN0
YXRpYyBib29sIGRybV9kcF92YWxpZGF0ZV9ndWlkKHN0cnVjdCBkcm1fZHBfbXN0X3RvcG9sb2d5
X21nciAqbWdyLApAQCAtMzMxMyw2ICszMzE3LDcgQEAgc3RhdGljIHZvaWQgZHJtX2RwX21zdF91
cF9yZXFfd29yayhzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCiAJCQkgICAgIHVwX3JlcV93b3Jr
KTsKIAlzdHJ1Y3QgZHJtX2RwX3BlbmRpbmdfdXBfcmVxICp1cF9yZXE7CiAKKwltdXRleF9sb2Nr
KCZtZ3ItPnByb2JlX2xvY2spOwogCXdoaWxlICh0cnVlKSB7CiAJCW11dGV4X2xvY2soJm1nci0+
dXBfcmVxX2xvY2spOwogCQl1cF9yZXEgPSBsaXN0X2ZpcnN0X2VudHJ5X29yX251bGwoJm1nci0+
dXBfcmVxX2xpc3QsCkBAIC0zMzI4LDYgKzMzMzMsNyBAQCBzdGF0aWMgdm9pZCBkcm1fZHBfbXN0
X3VwX3JlcV93b3JrKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKIAkJZHJtX2RwX21zdF9wcm9j
ZXNzX3VwX3JlcShtZ3IsIHVwX3JlcSk7CiAJCWtmcmVlKHVwX3JlcSk7CiAJfQorCW11dGV4X3Vu
bG9jaygmbWdyLT5wcm9iZV9sb2NrKTsKIH0KIAogc3RhdGljIGludCBkcm1fZHBfbXN0X2hhbmRs
ZV91cF9yZXEoc3RydWN0IGRybV9kcF9tc3RfdG9wb2xvZ3lfbWdyICptZ3IpCkBAIC00MzQ5LDYg
KzQzNTUsNyBAQCBpbnQgZHJtX2RwX21zdF90b3BvbG9neV9tZ3JfaW5pdChzdHJ1Y3QgZHJtX2Rw
X21zdF90b3BvbG9neV9tZ3IgKm1nciwKIAltdXRleF9pbml0KCZtZ3ItPnBheWxvYWRfbG9jayk7
CiAJbXV0ZXhfaW5pdCgmbWdyLT5kZWxheWVkX2Rlc3Ryb3lfbG9jayk7CiAJbXV0ZXhfaW5pdCgm
bWdyLT51cF9yZXFfbG9jayk7CisJbXV0ZXhfaW5pdCgmbWdyLT5wcm9iZV9sb2NrKTsKIAlJTklU
X0xJU1RfSEVBRCgmbWdyLT50eF9tc2dfZG93bnEpOwogCUlOSVRfTElTVF9IRUFEKCZtZ3ItPmRl
c3Ryb3lfcG9ydF9saXN0KTsKIAlJTklUX0xJU1RfSEVBRCgmbWdyLT5kZXN0cm95X2JyYW5jaF9k
ZXZpY2VfbGlzdCk7CkBAIC00NDE0LDYgKzQ0MjEsNyBAQCB2b2lkIGRybV9kcF9tc3RfdG9wb2xv
Z3lfbWdyX2Rlc3Ryb3koc3RydWN0IGRybV9kcF9tc3RfdG9wb2xvZ3lfbWdyICptZ3IpCiAJbXV0
ZXhfZGVzdHJveSgmbWdyLT5xbG9jayk7CiAJbXV0ZXhfZGVzdHJveSgmbWdyLT5sb2NrKTsKIAlt
dXRleF9kZXN0cm95KCZtZ3ItPnVwX3JlcV9sb2NrKTsKKwltdXRleF9kZXN0cm95KCZtZ3ItPnBy
b2JlX2xvY2spOwogfQogRVhQT1JUX1NZTUJPTChkcm1fZHBfbXN0X3RvcG9sb2d5X21ncl9kZXN0
cm95KTsKIApkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2RwX21zdF9oZWxwZXIuaCBiL2lu
Y2x1ZGUvZHJtL2RybV9kcF9tc3RfaGVscGVyLmgKaW5kZXggN2Q4MGMzOGVlMDBlLi5iY2NiNTUx
NGUwZWYgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL2RybV9kcF9tc3RfaGVscGVyLmgKKysrIGIv
aW5jbHVkZS9kcm0vZHJtX2RwX21zdF9oZWxwZXIuaApAQCAtNTUsOCArNTUsNiBAQCBzdHJ1Y3Qg
ZHJtX2RwX3ZjcGkgewogICogQG51bV9zZHBfc3RyZWFtX3NpbmtzOiBOdW1iZXIgb2Ygc3RyZWFt
IHNpbmtzCiAgKiBAYXZhaWxhYmxlX3BibjogQXZhaWxhYmxlIGJhbmR3aWR0aCBmb3IgdGhpcyBw
b3J0LgogICogQG5leHQ6IGxpbmsgdG8gbmV4dCBwb3J0IG9uIHRoaXMgYnJhbmNoIGRldmljZQot
ICogQG1zdGI6IGJyYW5jaCBkZXZpY2Ugb24gdGhpcyBwb3J0LCBwcm90ZWN0ZWQgYnkKLSAqICZk
cm1fZHBfbXN0X3RvcG9sb2d5X21nci5sb2NrCiAgKiBAYXV4OiBpMmMgYXV4IHRyYW5zcG9ydCB0
byB0YWxrIHRvIGRldmljZSBjb25uZWN0ZWQgdG8gdGhpcyBwb3J0LCBwcm90ZWN0ZWQKICAqIGJ5
ICZkcm1fZHBfbXN0X3RvcG9sb2d5X21nci5sb2NrCiAgKiBAcGFyZW50OiBicmFuY2ggZGV2aWNl
IHBhcmVudCBvZiB0aGlzIHBvcnQKQEAgLTkyLDcgKzkwLDE3IEBAIHN0cnVjdCBkcm1fZHBfbXN0
X3BvcnQgewogCXU4IG51bV9zZHBfc3RyZWFtX3NpbmtzOwogCXVpbnQxNl90IGF2YWlsYWJsZV9w
Ym47CiAJc3RydWN0IGxpc3RfaGVhZCBuZXh0OwotCXN0cnVjdCBkcm1fZHBfbXN0X2JyYW5jaCAq
bXN0YjsgLyogcG9pbnRlciB0byBhbiBtc3RiIGlmIHRoaXMgcG9ydCBoYXMgb25lICovCisJLyoq
CisJICogQG1zdGI6IHRoZSBicmFuY2ggZGV2aWNlIGNvbm5lY3RlZCB0byB0aGlzIHBvcnQsIGlm
IHRoZXJlIGlzIG9uZS4KKwkgKiBUaGlzIHNob3VsZCBiZSBjb25zaWRlcmVkIHByb3RlY3RlZCBm
b3IgcmVhZGluZyBieQorCSAqICZkcm1fZHBfbXN0X3RvcG9sb2d5X21nci5sb2NrLiBUaGVyZSBh
cmUgdHdvIGV4Y2VwdGlvbnMgdG8gdGhpczoKKwkgKiAmZHJtX2RwX21zdF90b3BvbG9neV9tZ3Iu
dXBfcmVxX3dvcmsgYW5kCisJICogJmRybV9kcF9tc3RfdG9wb2xvZ3lfbWdyLndvcmssIHdoaWNo
IGRvIG5vdCBncmFiCisJICogJmRybV9kcF9tc3RfdG9wb2xvZ3lfbWdyLmxvY2sgZHVyaW5nIHJl
YWRzIGJ1dCBhcmUgdGhlIG9ubHkKKwkgKiB1cGRhdGVycyBvZiB0aGlzIGxpc3QgYW5kIGFyZSBw
cm90ZWN0ZWQgZnJvbSB3cml0aW5nIGNvbmN1cnJlbnRseQorCSAqIGJ5ICZkcm1fZHBfbXN0X3Rv
cG9sb2d5X21nci5wcm9iZV9sb2NrLgorCSAqLworCXN0cnVjdCBkcm1fZHBfbXN0X2JyYW5jaCAq
bXN0YjsKIAlzdHJ1Y3QgZHJtX2RwX2F1eCBhdXg7IC8qIGkyYyBidXMgZm9yIHRoaXMgcG9ydD8g
Ki8KIAlzdHJ1Y3QgZHJtX2RwX21zdF9icmFuY2ggKnBhcmVudDsKIApAQCAtMTE4LDcgKzEyNiw2
IEBAIHN0cnVjdCBkcm1fZHBfbXN0X3BvcnQgewogICogQGxjdDogTGluayBjb3VudCB0b3RhbCB0
byB0YWxrIHRvIHRoaXMgYnJhbmNoIGRldmljZS4KICAqIEBudW1fcG9ydHM6IG51bWJlciBvZiBw
b3J0cyBvbiB0aGUgYnJhbmNoLgogICogQG1zZ19zbG90czogb25lIGJpdCBwZXIgdHJhbnNtaXR0
ZWQgbXNnIHNsb3QuCi0gKiBAcG9ydHM6IGxpbmtlZCBsaXN0IG9mIHBvcnRzIG9uIHRoaXMgYnJh
bmNoLgogICogQHBvcnRfcGFyZW50OiBwb2ludGVyIHRvIHRoZSBwb3J0IHBhcmVudCwgTlVMTCBp
ZiB0b3BsZXZlbC4KICAqIEBtZ3I6IHRvcG9sb2d5IG1hbmFnZXIgZm9yIHRoaXMgYnJhbmNoIGRl
dmljZS4KICAqIEB0eF9zbG90czogdHJhbnNtaXNzaW9uIHNsb3RzIGZvciB0aGlzIGRldmljZS4K
QEAgLTE1Niw2ICsxNjMsMTYgQEAgc3RydWN0IGRybV9kcF9tc3RfYnJhbmNoIHsKIAlpbnQgbnVt
X3BvcnRzOwogCiAJaW50IG1zZ19zbG90czsKKwkvKioKKwkgKiBAcG9ydHM6IHRoZSBsaXN0IG9m
IHBvcnRzIG9uIHRoaXMgYnJhbmNoIGRldmljZS4gVGhpcyBzaG91bGQgYmUKKwkgKiBjb25zaWRl
cmVkIHByb3RlY3RlZCBmb3IgcmVhZGluZyBieSAmZHJtX2RwX21zdF90b3BvbG9neV9tZ3IubG9j
ay4KKwkgKiBUaGVyZSBhcmUgdHdvIGV4Y2VwdGlvbnMgdG8gdGhpczoKKwkgKiAmZHJtX2RwX21z
dF90b3BvbG9neV9tZ3IudXBfcmVxX3dvcmsgYW5kCisJICogJmRybV9kcF9tc3RfdG9wb2xvZ3lf
bWdyLndvcmssIHdoaWNoIGRvIG5vdCBncmFiCisJICogJmRybV9kcF9tc3RfdG9wb2xvZ3lfbWdy
LmxvY2sgZHVyaW5nIHJlYWRzIGJ1dCBhcmUgdGhlIG9ubHkKKwkgKiB1cGRhdGVycyBvZiB0aGlz
IGxpc3QgYW5kIGFyZSBwcm90ZWN0ZWQgZnJvbSB1cGRhdGluZyB0aGUgbGlzdAorCSAqIGNvbmN1
cnJlbnRseSBieSBAZHJtX2RwX21zdF90b3BvbG9neV9tZ3IucHJvYmVfbG9jaworCSAqLwogCXN0
cnVjdCBsaXN0X2hlYWQgcG9ydHM7CiAKIAkvKiBsaXN0IG9mIHR4IG9wcyBxdWV1ZSBmb3IgdGhp
cyBwb3J0ICovCkBAIC01MDIsNiArNTE5LDEzIEBAIHN0cnVjdCBkcm1fZHBfbXN0X3RvcG9sb2d5
X21nciB7CiAJICovCiAJc3RydWN0IG11dGV4IGxvY2s7CiAKKwkvKioKKwkgKiBAcHJvYmVfbG9j
azogUHJldmVudHMgQHdvcmsgYW5kIEB1cF9yZXFfd29yaywgdGhlIG9ubHkgd3JpdGVycyBvZgor
CSAqICZkcm1fZHBfbXN0X3BvcnQubXN0YiBhbmQgJmRybV9kcF9tc3RfYnJhbmNoLnBvcnRzLCBm
cm9tIHJhY2luZworCSAqIHdoaWxlIHRoZXkgdXBkYXRlIHRoZSB0b3BvbG9neS4KKwkgKi8KKwlz
dHJ1Y3QgbXV0ZXggcHJvYmVfbG9jazsKKwogCS8qKgogCSAqIEBtc3Rfc3RhdGU6IElmIHRoaXMg
bWFuYWdlciBpcyBlbmFibGVkIGZvciBhbiBNU1QgY2FwYWJsZSBwb3J0LiBGYWxzZQogCSAqIGlm
IG5vIE1TVCBzaW5rL2JyYW5jaCBkZXZpY2VzIGlzIGNvbm5lY3RlZC4KLS0gCjIuMjEuMAoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1h
aWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
