Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8CE86385B0
	for <lists+dri-devel@lfdr.de>; Fri,  7 Jun 2019 09:48:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 40C0389CD9;
	Fri,  7 Jun 2019 07:48:14 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x542.google.com (mail-ed1-x542.google.com
 [IPv6:2a00:1450:4864:20::542])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7836089CD8
 for <dri-devel@lists.freedesktop.org>; Fri,  7 Jun 2019 07:48:12 +0000 (UTC)
Received: by mail-ed1-x542.google.com with SMTP id h9so1704763edr.0
 for <dri-devel@lists.freedesktop.org>; Fri, 07 Jun 2019 00:48:12 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:date:from:to:cc:subject:message-id
 :mail-followup-to:references:mime-version:content-disposition
 :content-transfer-encoding:in-reply-to:user-agent;
 bh=5PJV1CzqqmOUVK6nd+pfSU/dSGazuole6KOmvkAz2lY=;
 b=FD4KWcnZm59HqLAQ1mliZoIbQJgXqiPLl5IlkNGwQawc96ZZn2/Oh698YLka6+irwl
 db7ePpfsGDCN7Z/pIos5ivHw0nkp2ch4Gzqmz68nmEn+t3dk2o1H6HuC8F/0i76M4h5B
 TaN59/+uapQU1/V+30o8cAAwrgX8aZCPiNkAeN+v+7+YOfOe5oD6J9OYImJfoFnvUFeL
 qQdlbp8G0NAmghOAuiHrU1s7HsU3GSWjUoKZkul5H3uZYO90Kr2mWGGeddxG9KzJSI5w
 mscKn+hkhiVqBQzAvCnYJSQ2NvH5lX7Sz1Ul4xJn2D2sR/1CGc5mQWp4cMhN9NEyWyfb
 7rVA==
X-Gm-Message-State: APjAAAVm4Yjn5LL5IlWLUhD5RKqI+0P+zExq/Qsx0OWFJoDP7oaHV4Kr
 zkxWCU68YXYNOXb03NI6xjPxfw==
X-Google-Smtp-Source: APXvYqzDb2DW+0YFQmxX27HhMhg4H6YQrjxy84EkKo6ZT+I7A3mFLd1IauI9EpS2Q+ExNz1JvF4Lyg==
X-Received: by 2002:a17:906:fcb8:: with SMTP id
 qw24mr27508281ejb.239.1559893691060; 
 Fri, 07 Jun 2019 00:48:11 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id d6sm236206ejb.31.2019.06.07.00.48.09
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 00:48:10 -0700 (PDT)
Date: Fri, 7 Jun 2019 09:48:08 +0200
From: Daniel Vetter <daniel@ffwll.ch>
To: Rodrigo Siqueira <rodrigosiqueiramelo@gmail.com>
Subject: Re: [PATCH 2/2] drm/vkms: Add support for writeback
Message-ID: <20190607074808.GC21222@phenom.ffwll.local>
Mail-Followup-To: Rodrigo Siqueira <rodrigosiqueiramelo@gmail.com>,
 Brian Starkey <brian.starkey@arm.com>,
 Liviu Dudau <liviu.dudau@arm.com>,
 Haneen Mohammed <hamohammed.sa@gmail.com>,
 Simon Ser <contact@emersion.fr>, dri-devel@lists.freedesktop.org,
 linux-kernel@vger.kernel.org
References: <cover.1559860606.git.rodrigosiqueiramelo@gmail.com>
 <0acd74232d988970668298be0111c485bc68ec87.1559860606.git.rodrigosiqueiramelo@gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <0acd74232d988970668298be0111c485bc68ec87.1559860606.git.rodrigosiqueiramelo@gmail.com>
X-Operating-System: Linux phenom 4.14.0-3-amd64 
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=sender:date:from:to:cc:subject:message-id:mail-followup-to
 :references:mime-version:content-disposition
 :content-transfer-encoding:in-reply-to:user-agent;
 bh=5PJV1CzqqmOUVK6nd+pfSU/dSGazuole6KOmvkAz2lY=;
 b=GUY1y+e2Z059LjUAdXHS02TTwC4MvPDSGMmK9LfJInIcwttP++ElP3KgqyhlhoXXHF
 tvSY4BEDnyNXfsEEAbUokas5e71dk4Tz0HSxdVIidlxyzszYgN8nYJbXrYX/mBHkfwmF
 +/xsNG8DllUGoXy6wmFzQEojeHgh5H1Q3MZt0=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Haneen Mohammed <hamohammed.sa@gmail.com>, Simon Ser <contact@emersion.fr>,
 Liviu Dudau <liviu.dudau@arm.com>, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBKdW4gMDYsIDIwMTkgYXQgMDc6NDE6MDFQTSAtMDMwMCwgUm9kcmlnbyBTaXF1ZWly
YSB3cm90ZToKPiBUaGlzIHBhdGNoIGltcGxlbWVudHMgdGhlIG5lY2Vzc2FyeSBmdW5jdGlvbnMg
dG8gYWRkIHdyaXRlYmFjayBzdXBwb3J0Cj4gZm9yIHZrbXMuIFRoaXMgZmVhdHVyZSBpcyB1c2Vm
dWwgZm9yIHRlc3RpbmcgY29tcG9zaXRvcnMgaWYgeW91IGRvbuKAmXQKPiBoYXZlIGhhcmR3YXJl
IHdpdGggd3JpdGViYWNrIHN1cHBvcnQuCj4gCj4gU2lnbmVkLW9mZi1ieTogUm9kcmlnbyBTaXF1
ZWlyYSA8cm9kcmlnb3NpcXVlaXJhbWVsb0BnbWFpbC5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1
L2RybS92a21zL01ha2VmaWxlICAgICAgICAgfCAgIDkgKy0KPiAgZHJpdmVycy9ncHUvZHJtL3Zr
bXMvdmttc19jcnRjLmMgICAgICB8ICAgNSArCj4gIGRyaXZlcnMvZ3B1L2RybS92a21zL3ZrbXNf
ZHJ2LmMgICAgICAgfCAgMTAgKysKPiAgZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuaCAg
ICAgICB8ICAxMiArKwo+ICBkcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX291dHB1dC5jICAgIHwg
ICA2ICsKPiAgZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc193cml0ZWJhY2suYyB8IDE2NSArKysr
KysrKysrKysrKysrKysrKysrKysrKwo+ICA2IGZpbGVzIGNoYW5nZWQsIDIwNiBpbnNlcnRpb25z
KCspLCAxIGRlbGV0aW9uKC0pCj4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0v
dmttcy92a21zX3dyaXRlYmFjay5jCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92
a21zL01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvTWFrZWZpbGUKPiBpbmRleCA4OWYw
OWJlYzdiMjMuLjkwZWI3YWNkNjE4ZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmtt
cy9NYWtlZmlsZQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS92a21zL01ha2VmaWxlCj4gQEAgLTEs
NCArMSwxMSBAQAo+ICAjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkKPiAt
dmttcy15IDo9IHZrbXNfZHJ2Lm8gdmttc19wbGFuZS5vIHZrbXNfb3V0cHV0Lm8gdmttc19jcnRj
Lm8gdmttc19nZW0ubyB2a21zX2NyYy5vCj4gK3ZrbXMteSA6PSBcCj4gKwl2a21zX2Rydi5vIFwK
PiArCXZrbXNfcGxhbmUubyBcCj4gKwl2a21zX291dHB1dC5vIFwKPiArCXZrbXNfY3J0Yy5vIFwK
PiArCXZrbXNfZ2VtLm8gXAo+ICsJdmttc19jcmMubyBcCj4gKwl2a21zX3dyaXRlYmFjay5vCj4g
IAo+ICBvYmotJChDT05GSUdfRFJNX1ZLTVMpICs9IHZrbXMubwo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vdmttcy92a21zX2NydGMuYyBiL2RyaXZlcnMvZ3B1L2RybS92a21zL3ZrbXNf
Y3J0Yy5jCj4gaW5kZXggMWJiZTA5OWI3ZGI4Li5jZTc5N2UyNjViMWIgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19jcnRjLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
dmttcy92a21zX2NydGMuYwo+IEBAIC0yMyw2ICsyMywxMSBAQCBzdGF0aWMgZW51bSBocnRpbWVy
X3Jlc3RhcnQgdmttc192Ymxhbmtfc2ltdWxhdGUoc3RydWN0IGhydGltZXIgKnRpbWVyKQo+ICAJ
aWYgKCFyZXQpCj4gIAkJRFJNX0VSUk9SKCJ2a21zIGZhaWx1cmUgb24gaGFuZGxpbmcgdmJsYW5r
Iik7Cj4gIAo+ICsJaWYgKG91dHB1dC0+d3JpdGViYWNrX3N0YXR1cyA9PSBXQl9TVEFSVCkgewo+
ICsJCWRybV93cml0ZWJhY2tfc2lnbmFsX2NvbXBsZXRpb24oJm91dHB1dC0+d2JfY29ubmVjdG9y
LCAwKTsKPiArCQlvdXRwdXQtPndyaXRlYmFja19zdGF0dXMgPSBXQl9TVE9QOwo+ICsJfQo+ICsK
PiAgCWlmIChzdGF0ZSAmJiBvdXRwdXQtPmNyY19lbmFibGVkKSB7Cj4gIAkJdTY0IGZyYW1lID0g
ZHJtX2NydGNfYWNjdXJhdGVfdmJsYW5rX2NvdW50KGNydGMpOwo+ICAKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS92a21zL3Zr
bXNfZHJ2LmMKPiBpbmRleCA5MjI5NmJkOGY2MjMuLmQ1OTE3ZDVhNDVlMyAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2Rydi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L3ZrbXMvdmttc19kcnYuYwo+IEBAIC0yOSw2ICsyOSwxMCBAQCBib29sIGVuYWJsZV9jdXJzb3I7
Cj4gIG1vZHVsZV9wYXJhbV9uYW1lZChlbmFibGVfY3Vyc29yLCBlbmFibGVfY3Vyc29yLCBib29s
LCAwNDQ0KTsKPiAgTU9EVUxFX1BBUk1fREVTQyhlbmFibGVfY3Vyc29yLCAiRW5hYmxlL0Rpc2Fi
bGUgY3Vyc29yIHN1cHBvcnQiKTsKPiAgCj4gK2ludCBlbmFibGVfd3JpdGViYWNrOwo+ICttb2R1
bGVfcGFyYW1fbmFtZWQoZW5hYmxlX3dyaXRlYmFjaywgZW5hYmxlX3dyaXRlYmFjaywgaW50LCAw
NDQ0KTsKPiArTU9EVUxFX1BBUk1fREVTQyhlbmFibGVfd3JpdGViYWNrLCAiRW5hYmxlL0Rpc2Fi
bGUgd3JpdGViYWNrIGNvbm5lY3RvciIpOwo+ICsKPiAgc3RhdGljIGNvbnN0IHN0cnVjdCBmaWxl
X29wZXJhdGlvbnMgdmttc19kcml2ZXJfZm9wcyA9IHsKPiAgCS5vd25lcgkJPSBUSElTX01PRFVM
RSwKPiAgCS5vcGVuCQk9IGRybV9vcGVuLAo+IEBAIC0xMjMsNiArMTI3LDEyIEBAIHN0YXRpYyBp
bnQgX19pbml0IHZrbXNfaW5pdCh2b2lkKQo+ICAJCWdvdG8gb3V0X2Zpbmk7Cj4gIAl9Cj4gIAo+
ICsJdmttc19kZXZpY2UtPm91dHB1dC53cml0ZWJhY2tfc3RhdHVzID0gV0JfRElTQUJMRUQ7Cj4g
KwlpZiAoZW5hYmxlX3dyaXRlYmFjaykgewo+ICsJCXZrbXNfZGV2aWNlLT5vdXRwdXQud3JpdGVi
YWNrX3N0YXR1cyA9IFdCX1NUT1A7Cj4gKwkJRFJNX0lORk8oIldyaXRlYmFjayBjb25uZWN0b3Ig
ZW5hYmxlZCIpOwo+ICsJfQo+ICsKPiAgCXJldCA9IHZrbXNfbW9kZXNldF9pbml0KHZrbXNfZGV2
aWNlKTsKPiAgCWlmIChyZXQpCj4gIAkJZ290byBvdXRfZmluaTsKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS92a21zL3ZrbXNf
ZHJ2LmgKPiBpbmRleCBlODEwNzNkZWExNTQuLmNhMWY5ZWU2M2VjOCAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2Rydi5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3Zr
bXMvdmttc19kcnYuaAo+IEBAIC03LDYgKzcsNyBAQAo+ICAjaW5jbHVkZSA8ZHJtL2RybS5oPgo+
ICAjaW5jbHVkZSA8ZHJtL2RybV9nZW0uaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fZW5jb2Rlci5o
Pgo+ICsjaW5jbHVkZSA8ZHJtL2RybV93cml0ZWJhY2suaD4KPiAgI2luY2x1ZGUgPGxpbnV4L2hy
dGltZXIuaD4KPiAgCj4gICNkZWZpbmUgWFJFU19NSU4gICAgMjAKPiBAQCAtNjAsMTQgKzYxLDIy
IEBAIHN0cnVjdCB2a21zX2NydGNfc3RhdGUgewo+ICAJdTY0IGZyYW1lX2VuZDsKPiAgfTsKPiAg
Cj4gK2VudW0gd2Jfc3RhdHVzIHsKPiArCVdCX0RJU0FCTEVELAo+ICsJV0JfU1RBUlQsCj4gKwlX
Ql9TVE9QLAo+ICt9Owo+ICsKPiAgc3RydWN0IHZrbXNfb3V0cHV0IHsKPiAgCXN0cnVjdCBkcm1f
Y3J0YyBjcnRjOwo+ICAJc3RydWN0IGRybV9lbmNvZGVyIGVuY29kZXI7Cj4gIAlzdHJ1Y3QgZHJt
X2Nvbm5lY3RvciBjb25uZWN0b3I7Cj4gKwlzdHJ1Y3QgZHJtX3dyaXRlYmFja19jb25uZWN0b3Ig
d2JfY29ubmVjdG9yOwo+ICAJc3RydWN0IGhydGltZXIgdmJsYW5rX2hydGltZXI7Cj4gIAlrdGlt
ZV90IHBlcmlvZF9uczsKPiAgCXN0cnVjdCBkcm1fcGVuZGluZ192YmxhbmtfZXZlbnQgKmV2ZW50
Owo+ICAJYm9vbCBjcmNfZW5hYmxlZDsKPiArCWVudW0gd2Jfc3RhdHVzIHdyaXRlYmFja19zdGF0
dXM7Cj4gIAkvKiBvcmRlcmVkIHdxIGZvciBjcmNfd29yayAqLwo+ICAJc3RydWN0IHdvcmtxdWV1
ZV9zdHJ1Y3QgKmNyY193b3JrcTsKPiAgCS8qIHByb3RlY3RzIGNvbmN1cnJlbnQgYWNjZXNzIHRv
IGNyY19kYXRhICovCj4gQEAgLTE0MSw0ICsxNTAsNyBAQCBpbnQgdmttc192ZXJpZnlfY3JjX3Nv
dXJjZShzdHJ1Y3QgZHJtX2NydGMgKmNydGMsIGNvbnN0IGNoYXIgKnNvdXJjZV9uYW1lLAo+ICAJ
CQkgICBzaXplX3QgKnZhbHVlc19jbnQpOwo+ICB2b2lkIHZrbXNfY3JjX3dvcmtfaGFuZGxlKHN0
cnVjdCB3b3JrX3N0cnVjdCAqd29yayk7Cj4gIAo+ICsvKiBXcml0ZWJhY2sgKi8KPiAraW50IGVu
YWJsZV93cml0ZWJhY2tfY29ubmVjdG9yKHN0cnVjdCB2a21zX2RldmljZSAqdmttc2Rldik7Cj4g
Kwo+ICAjZW5kaWYgLyogX1ZLTVNfRFJWX0hfICovCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS92a21zL3ZrbXNfb3V0cHV0LmMgYi9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX291dHB1
dC5jCj4gaW5kZXggMTQ0MmI0NDdjNzA3Li4xZmMxZDRlOTU4NWMgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL3ZrbXMvdmttc19vdXRwdXQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS92
a21zL3ZrbXNfb3V0cHV0LmMKPiBAQCAtOTEsNiArOTEsMTIgQEAgaW50IHZrbXNfb3V0cHV0X2lu
aXQoc3RydWN0IHZrbXNfZGV2aWNlICp2a21zZGV2LCBpbnQgaW5kZXgpCj4gIAkJZ290byBlcnJf
YXR0YWNoOwo+ICAJfQo+ICAKPiArCWlmICh2a21zZGV2LT5vdXRwdXQud3JpdGViYWNrX3N0YXR1
cyAhPSBXQl9ESVNBQkxFRCkgewo+ICsJCXJldCA9IGVuYWJsZV93cml0ZWJhY2tfY29ubmVjdG9y
KHZrbXNkZXYpOwo+ICsJCWlmIChyZXQpCj4gKwkJCURSTV9FUlJPUigiRmFpbGVkIHRvIGluaXQg
d3JpdGViYWNrIGNvbm5lY3RvclxuIik7Cj4gKwl9Cj4gKwo+ICAJZHJtX21vZGVfY29uZmlnX3Jl
c2V0KGRldik7Cj4gIAo+ICAJcmV0dXJuIDA7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS92a21zL3ZrbXNfd3JpdGViYWNrLmMgYi9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX3dyaXRl
YmFjay5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAuLmY3Yjk2
MmFlNTY0Ngo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21z
X3dyaXRlYmFjay5jCj4gQEAgLTAsMCArMSwxNjUgQEAKPiArLy8gU1BEWC1MaWNlbnNlLUlkZW50
aWZpZXI6IEdQTC0yLjArCj4gKwo+ICsjaW5jbHVkZSAidmttc19kcnYuaCIKPiArI2luY2x1ZGUg
PGRybS9kcm1fd3JpdGViYWNrLmg+Cj4gKyNpbmNsdWRlIDxkcm0vZHJtX3Byb2JlX2hlbHBlci5o
Pgo+ICsjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfaGVscGVyLmg+Cj4gKyNpbmNsdWRlIDxkcm0v
ZHJtX2dlbV9mcmFtZWJ1ZmZlcl9oZWxwZXIuaD4KPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZHJtX2Nvbm5lY3Rvcl9mdW5jcyB2a21zX3diX2Nvbm5lY3Rvcl9mdW5jcyA9IHsKPiArCS5maWxs
X21vZGVzID0gZHJtX2hlbHBlcl9wcm9iZV9zaW5nbGVfY29ubmVjdG9yX21vZGVzLAo+ICsJLmRl
c3Ryb3kgPSBkcm1fY29ubmVjdG9yX2NsZWFudXAsCj4gKwkucmVzZXQgPSBkcm1fYXRvbWljX2hl
bHBlcl9jb25uZWN0b3JfcmVzZXQsCj4gKwkuYXRvbWljX2R1cGxpY2F0ZV9zdGF0ZSA9IGRybV9h
dG9taWNfaGVscGVyX2Nvbm5lY3Rvcl9kdXBsaWNhdGVfc3RhdGUsCj4gKwkuYXRvbWljX2Rlc3Ry
b3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jb25uZWN0b3JfZGVzdHJveV9zdGF0ZSwKPiAr
fTsKPiArCj4gK3N0YXRpYyBpbnQgdmttc193Yl9lbmNvZGVyX2F0b21pY19jaGVjayhzdHJ1Y3Qg
ZHJtX2VuY29kZXIgKmVuY29kZXIsCj4gKwkJCQkJc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlLAo+ICsJCQkJCXN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0YXRlKQo+
ICt7Cj4gKwlzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYjsKPiArCWNvbnN0IHN0cnVjdCBkcm1f
ZGlzcGxheV9tb2RlICptb2RlID0gJmNydGNfc3RhdGUtPm1vZGU7Cj4gKwo+ICsJaWYgKCFjb25u
X3N0YXRlLT53cml0ZWJhY2tfam9iIHx8ICFjb25uX3N0YXRlLT53cml0ZWJhY2tfam9iLT5mYikK
PiArCQlyZXR1cm4gMDsKPiArCj4gKwlmYiA9IGNvbm5fc3RhdGUtPndyaXRlYmFja19qb2ItPmZi
Owo+ICsJaWYgKGZiLT53aWR0aCAhPSBtb2RlLT5oZGlzcGxheSB8fCBmYi0+aGVpZ2h0ICE9IG1v
ZGUtPnZkaXNwbGF5KSB7Cj4gKwkJRFJNX0RFQlVHX0tNUygiSW52YWxpZCBmcmFtZWJ1ZmZlciBz
aXplICV1eCV1XG4iLAo+ICsJCQkgICAgICBmYi0+d2lkdGgsIGZiLT5oZWlnaHQpOwo+ICsJCXJl
dHVybiAtRUlOVkFMOwo+ICsJfQo+ICsKPiArCWlmIChmYi0+Zm9ybWF0LT5mb3JtYXQgIT0gRFJN
X0ZPUk1BVF9YUkdCODg4OCkgewo+ICsJCXN0cnVjdCBkcm1fZm9ybWF0X25hbWVfYnVmIGZvcm1h
dF9uYW1lOwo+ICsKPiArCQlEUk1fREVCVUdfS01TKCJJbnZhbGlkIHBpeGVsIGZvcm1hdCAlc1xu
IiwKPiArCQkJICAgICAgZHJtX2dldF9mb3JtYXRfbmFtZShmYi0+Zm9ybWF0LT5mb3JtYXQsCj4g
KwkJCQkJCSAgJmZvcm1hdF9uYW1lKSk7Cj4gKwkJcmV0dXJuIC1FSU5WQUw7Cj4gKwl9Cj4gKwo+
ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2VuY29kZXJf
aGVscGVyX2Z1bmNzIHZrbXNfd2JfZW5jb2Rlcl9oZWxwZXJfZnVuY3MgPSB7Cj4gKwkuYXRvbWlj
X2NoZWNrID0gdmttc193Yl9lbmNvZGVyX2F0b21pY19jaGVjaywKPiArfTsKPiArCj4gK3N0YXRp
YyBpbnQgdmttc193Yl9jb25uZWN0b3JfZ2V0X21vZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpj
b25uZWN0b3IpCj4gK3sKPiArCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBjb25uZWN0b3ItPmRl
djsKPiArCj4gKwlyZXR1cm4gZHJtX2FkZF9tb2Rlc19ub2VkaWQoY29ubmVjdG9yLCBkZXYtPm1v
ZGVfY29uZmlnLm1heF93aWR0aCwKPiArCQkJCSAgICBkZXYtPm1vZGVfY29uZmlnLm1heF9oZWln
aHQpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHZrbXNfd2JfcHJlcGFyZV9qb2Ioc3RydWN0IGRy
bV93cml0ZWJhY2tfY29ubmVjdG9yICp3Yl9jb25uZWN0b3IsCj4gKwkJCSAgICAgICBzdHJ1Y3Qg
ZHJtX3dyaXRlYmFja19qb2IgKmpvYikKPiArewo+ICsJc3RydWN0IHZrbXNfZ2VtX29iamVjdCAq
dmttc19vYmo7Cj4gKwlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdlbV9vYmo7Cj4gKwlpbnQgcmV0
Owo+ICsKPiArCWlmICgham9iLT5mYikKPiArCQlyZXR1cm4gMDsKPiArCj4gKwlnZW1fb2JqID0g
ZHJtX2dlbV9mYl9nZXRfb2JqKGpvYi0+ZmIsIDApOwo+ICsJcmV0ID0gdmttc19nZW1fdm1hcChn
ZW1fb2JqKTsKPiArCWlmIChyZXQpIHsKPiArCQlEUk1fRVJST1IoInZtYXAgZmFpbGVkOiAlZFxu
IiwgcmV0KTsKPiArCQlyZXR1cm4gcmV0Owo+ICsJfQo+ICsKPiArCXZrbXNfb2JqID0gZHJtX2dl
bV90b192a21zX2dlbShnZW1fb2JqKTsKPiArCWpvYi0+cHJpdiA9IHZrbXNfb2JqLT52YWRkcjsK
PiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgdmttc193Yl9jbGVhbnVw
X2pvYihzdHJ1Y3QgZHJtX3dyaXRlYmFja19jb25uZWN0b3IgKmNvbm5lY3RvciwKPiArCQkJCXN0
cnVjdCBkcm1fd3JpdGViYWNrX2pvYiAqam9iKQo+ICt7Cj4gKwlzdHJ1Y3QgZHJtX2dlbV9vYmpl
Y3QgKmdlbV9vYmo7Cj4gKwo+ICsJaWYgKCFqb2ItPmZiKQo+ICsJCXJldHVybjsKPiArCj4gKwln
ZW1fb2JqID0gZHJtX2dlbV9mYl9nZXRfb2JqKGpvYi0+ZmIsIDApOwo+ICsJdmttc19nZW1fdnVu
bWFwKGdlbV9vYmopOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2a21zX3diX2F0b21pY19jb21t
aXQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm4sCj4gKwkJCQkgIHN0cnVjdCBkcm1fY29ubmVj
dG9yX3N0YXRlICpzdGF0ZSkKPiArewo+ICsJc3RydWN0IHZrbXNfZGV2aWNlICp2a21zZGV2ID0g
ZHJtX2RldmljZV90b192a21zX2RldmljZShjb25uLT5kZXYpOwo+ICsJc3RydWN0IHZrbXNfb3V0
cHV0ICpvdXRwdXQgPSAmdmttc2Rldi0+b3V0cHV0Owo+ICsJc3RydWN0IGRybV93cml0ZWJhY2tf
Y29ubmVjdG9yICp3Yl9jb25uID0gJm91dHB1dC0+d2JfY29ubmVjdG9yOwo+ICsJc3RydWN0IGRy
bV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGUgPSB3Yl9jb25uLT5iYXNlLnN0YXRlOwo+ICsJ
dm9pZCAqcHJpdl9kYXRhID0gY29ubl9zdGF0ZS0+d3JpdGViYWNrX2pvYi0+cHJpdjsKPiArCXN0
cnVjdCB2a21zX2NyY19kYXRhICpwcmltYXJ5X2RhdGEgPSBOVUxMOwo+ICsJc3RydWN0IGRybV9m
cmFtZWJ1ZmZlciAqZmIgPSBOVUxMOwo+ICsJc3RydWN0IHZrbXNfZ2VtX29iamVjdCAqdmttc19v
Ymo7Cj4gKwlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdlbV9vYmo7Cj4gKwlzdHJ1Y3QgZHJtX3Bs
YW5lICpwbGFuZTsKPiArCj4gKwlpZiAoIWNvbm5fc3RhdGUpCj4gKwkJcmV0dXJuOwo+ICsKPiAr
CWlmICghY29ubl9zdGF0ZS0+d3JpdGViYWNrX2pvYiB8fCAhY29ubl9zdGF0ZS0+d3JpdGViYWNr
X2pvYi0+ZmIpIHsKPiArCQlvdXRwdXQtPndyaXRlYmFja19zdGF0dXMgPSBXQl9TVE9QOwo+ICsJ
CURSTV9ERUJVR19EUklWRVIoIkRpc2FibGUgd3JpdGViYWNrXG4iKTsKPiArCQlyZXR1cm47Cj4g
Kwl9Cj4gKwo+ICsJZHJtX2Zvcl9lYWNoX3BsYW5lKHBsYW5lLCAmdmttc2Rldi0+ZHJtKSB7Cj4g
KwkJc3RydWN0IHZrbXNfcGxhbmVfc3RhdGUgKnZwbGFuZV9zdGF0ZTsKPiArCQlzdHJ1Y3Qgdmtt
c19jcmNfZGF0YSAqcGxhbmVfZGF0YTsKPiArCj4gKwkJdnBsYW5lX3N0YXRlID0gdG9fdmttc19w
bGFuZV9zdGF0ZShwbGFuZS0+c3RhdGUpOwo+ICsJCXBsYW5lX2RhdGEgPSB2cGxhbmVfc3RhdGUt
PmNyY19kYXRhOwo+ICsKPiArCQlpZiAoZHJtX2ZyYW1lYnVmZmVyX3JlYWRfcmVmY291bnQoJnBs
YW5lX2RhdGEtPmZiKSA9PSAwKQo+ICsJCQljb250aW51ZTsKPiArCj4gKwkJaWYgKHBsYW5lLT50
eXBlID09IERSTV9QTEFORV9UWVBFX1BSSU1BUlkpCj4gKwkJCXByaW1hcnlfZGF0YSA9IHBsYW5l
X2RhdGE7Cj4gKwl9Cj4gKwo+ICsJaWYgKCFwcmltYXJ5X2RhdGEpCj4gKwkJcmV0dXJuOwo+ICsK
PiArCWZiID0gJnByaW1hcnlfZGF0YS0+ZmI7Cj4gKwlnZW1fb2JqID0gZHJtX2dlbV9mYl9nZXRf
b2JqKGZiLCAwKTsKPiArCXZrbXNfb2JqID0gZHJtX2dlbV90b192a21zX2dlbShnZW1fb2JqKTsK
PiArCj4gKwlpZiAoIXZrbXNfb2JqLT52YWRkciB8fCAhcHJpdl9kYXRhKQo+ICsJCXJldHVybjsK
PiArCj4gKwltZW1jcHkocHJpdl9kYXRhLCB2a21zX29iai0+dmFkZHIsIHZrbXNfb2JqLT5nZW0u
c2l6ZSk7Cj4gKwlkcm1fd3JpdGViYWNrX3F1ZXVlX2pvYih3Yl9jb25uLCBzdGF0ZSk7Cj4gKwlv
dXRwdXQtPndyaXRlYmFja19zdGF0dXMgPSBXQl9TVEFSVDsKCkhtLCBpZiB0aGlzIHBhc3NlcyB0
aGUgY3VycmVudCB3cml0ZWJhY2sgdGVzdHMgdGhlbiBJIGd1ZXNzIHRob3NlIHRlc3RzCmFyZSBh
IGJpdCB0b28gc2ltcGxlLiBPciBtYXliZSB0aGUgdGVzdCBjYW4ndCB1c2UgdGhlIGN1cnNvciBw
bGFuZSwgYW5kCnRoYXQncyB3aHkgaXQgZG9lc24ndCBub3RpY2UgdGhhdCB3ZSBvbmx5IHdyaXRl
IGJhY2sgdGhlIHByaW1hcnkgcGxhbmUuCgpXcml0ZWJhY2sgaXMgc3VwcG9zZWQgdG8gd3JpdGUg
YmFjayB0aGUgc2FtZSBpbWFnZSB5b3UnZCBzZWUgb24gdGhlCnNjcmVlbiwgaS5lLiB3aXRoIGN1
cnNvciwgb3RoZXIgcGxhbmVzLCBhbnkgY29sb3IgY29ycmVjdGlvbiBhcHBsaWVkIGFuZAphbnl0
aGluZyBlbHNlIHJlYWxseS4gVGhhdCBtZWFucyB2a21zIHdyaXRlYmFjayBuZWVkcyB0byBiZSBp
bnRlZ3JhdGVkCmludG8gdGhlIGNyYyBjb21wdXRhdGlvbi4gV2UgbmVlZCB0byBydW4gdGhhdCB3
b3JrIGVpdGhlciB3aGVuIHRoZXJlJ3MgYQp3cml0ZWJhY2sgam9iIG9yIHdoZW4gd2UgbmVlZCBh
IGNyYy4gQ3JjIHdvdWxkIGJlIG9ubHkgY29tcHV0ZWQgd2hlbgpuZWVkZWQsIGFuZCBmb3Igd3Jp
dGViYWNrIHdlIG5lZWQgdG8gcHV0IHRoZSBlbnRpcmUgY29tcG9zaXRlZC9ibGVuZGVkCmJ1ZmZl
ciBpbnRvIHRoZSB3cml0ZWJhY2sgYnVmZmVyLgoKVGhhdCdzIHdoeSBJIHNhaWQgeWVzdGVyZGF5
IHRoYXQgeW91ciB3b3JrIHdpbGwgY29uZmxpY3Qgd2l0aCBteSB3b3JrIHRvCnJlb3JnIGNyYyB3
b3JrIGhhbmRsaW5nLCBhc2lkZSBmcm9tIHRoZSBmaW5hbCBzdGVwIGl0IG5lZWRzIHRvIGRvIGFs
bCB0aGUKc2FtZSB0aGluZ3MuCgpJIGd1ZXNzIHdvdWxkIGJlIGdvb2QgdG8gaW1wcm92ZSBpZ3Qg
YW5kIGFkZCBhIGN1cnNvciB0ZXN0Y2FzZSBmb3Igd3JpdGUKKHNpbWlsYXIgdG8gdGhlIGNyYyBj
dXJzb3IgdGVzdHMgd2UgaGF2ZSksIG9yIG1heWJlIGNyZWF0ZSBzdXBwb3J0IGluIGlndAp0byB1
c2Ugd3JpdGViYWNrIGluc3RlYWQgb2YgY3JjLCBzbyB0aGF0IHdlIGNvdWxkIGJldHRlciBjaGVj
ayB0aGlzLgotRGFuaWVsCgo+ICt9Cj4gKwo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25u
ZWN0b3JfaGVscGVyX2Z1bmNzIHZrbXNfd2JfY29ubl9oZWxwZXJfZnVuY3MgPSB7Cj4gKwkuZ2V0
X21vZGVzID0gdmttc193Yl9jb25uZWN0b3JfZ2V0X21vZGVzLAo+ICsJLnByZXBhcmVfd3JpdGVi
YWNrX2pvYiA9IHZrbXNfd2JfcHJlcGFyZV9qb2IsCj4gKwkuY2xlYW51cF93cml0ZWJhY2tfam9i
ID0gdmttc193Yl9jbGVhbnVwX2pvYiwKPiArCS5hdG9taWNfY29tbWl0ID0gdmttc193Yl9hdG9t
aWNfY29tbWl0LAo+ICt9Owo+ICsKPiAraW50IGVuYWJsZV93cml0ZWJhY2tfY29ubmVjdG9yKHN0
cnVjdCB2a21zX2RldmljZSAqdmttc2RldikKPiArewo+ICsJc3RydWN0IGRybV93cml0ZWJhY2tf
Y29ubmVjdG9yICp3YiA9ICZ2a21zZGV2LT5vdXRwdXQud2JfY29ubmVjdG9yOwo+ICsKPiArCXZr
bXNkZXYtPm91dHB1dC53Yl9jb25uZWN0b3IuZW5jb2Rlci5wb3NzaWJsZV9jcnRjcyA9IDE7Cj4g
Kwlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJndiLT5iYXNlLCAmdmttc193Yl9jb25uX2hlbHBl
cl9mdW5jcyk7Cj4gKwo+ICsJcmV0dXJuIGRybV93cml0ZWJhY2tfY29ubmVjdG9yX2luaXQoJnZr
bXNkZXYtPmRybSwgd2IsCj4gKwkJCQkJICAgICZ2a21zX3diX2Nvbm5lY3Rvcl9mdW5jcywKPiAr
CQkJCQkgICAgJnZrbXNfd2JfZW5jb2Rlcl9oZWxwZXJfZnVuY3MsCj4gKwkJCQkJICAgIHZrbXNf
Zm9ybWF0cywKPiArCQkJCQkgICAgQVJSQVlfU0laRSh2a21zX2Zvcm1hdHMpKTsKPiArfQo+ICsK
PiAtLSAKPiAyLjIxLjAKCgoKLS0gCkRhbmllbCBWZXR0ZXIKU29mdHdhcmUgRW5naW5lZXIsIElu
dGVsIENvcnBvcmF0aW9uCmh0dHA6Ly9ibG9nLmZmd2xsLmNoCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
