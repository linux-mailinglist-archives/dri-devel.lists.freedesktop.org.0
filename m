Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5F09CF0DBD
	for <lists+dri-devel@lfdr.de>; Wed,  6 Nov 2019 05:23:07 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 24F1E6EBE9;
	Wed,  6 Nov 2019 04:23:04 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x441.google.com (mail-pf1-x441.google.com
 [IPv6:2607:f8b0:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 005146EBE9
 for <dri-devel@lists.freedesktop.org>; Wed,  6 Nov 2019 04:23:02 +0000 (UTC)
Received: by mail-pf1-x441.google.com with SMTP id 193so16545684pfc.13
 for <dri-devel@lists.freedesktop.org>; Tue, 05 Nov 2019 20:23:02 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=mPEk6u/rAD0pVQMmzHOT/ObmNSNeh4nEdPu74+cMJOI=;
 b=nSQJbRgP81QZ6TkV5gc8uKPUtqFiOycMz1q74K5Vwmdid0tKXGD1UVMA7R6bg97MXo
 T3ysGsFIe1DoOZZUHp+9prhSYk+F9Fj98vRA6pwyA73uZVUiensO2ZBhfkjJnez8lvqk
 krU1ggKy1SUq+DR4seYC1vbBAvECVG3IMVFVcoqtcpOQ4eVEguFd6tC6UZdvSm2vQCIS
 9eYAm4OBzbqEyuooQFaTwPBCa4Rg52f/aLSXhVgoq6zFQBsGkpjgBnng6mN38lZG/mGb
 ar/XVLSnf8nZpONqGCdWOn7BHUknTcpsUba1n+dk4EL7W99l3EH16fexsHzFGhBGUB8a
 pjXg==
X-Gm-Message-State: APjAAAXLzX4lZWW/joKXHxR81z4DbGZNIMXYNDnfoJ+U8ADZog2jN+xN
 X0hyN6K/gz3OAyRcZY355qkFCQ==
X-Google-Smtp-Source: APXvYqw/jXD1eQIoKW6zlfl8ugLmcchuqulsAAWj4whl88gloiLQkHmUYkgo5Ecbsm5dUsCgfXA5Cg==
X-Received: by 2002:a63:d70f:: with SMTP id d15mr509588pgg.424.1573014182232; 
 Tue, 05 Nov 2019 20:23:02 -0800 (PST)
Received: from localhost.localdomain (c-67-170-172-113.hsd1.or.comcast.net.
 [67.170.172.113])
 by smtp.gmail.com with ESMTPSA id n15sm23730289pfq.146.2019.11.05.20.23.00
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 05 Nov 2019 20:23:01 -0800 (PST)
From: John Stultz <john.stultz@linaro.org>
To: lkml <linux-kernel@vger.kernel.org>
Subject: [PATCH v15 1/5] dma-buf: Add dma-buf heaps framework
Date: Wed,  6 Nov 2019 04:22:48 +0000
Message-Id: <20191106042252.72452-2-john.stultz@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20191106042252.72452-1-john.stultz@linaro.org>
References: <20191106042252.72452-1-john.stultz@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=mPEk6u/rAD0pVQMmzHOT/ObmNSNeh4nEdPu74+cMJOI=;
 b=UtBYnvl4RwsIUUSKvmoKtx/kssXKSSSmkqC0jA06GsvQWMhqigTL/krjjq2jrornZz
 +FKJIGd5qizQJEhs8Q/k9DxWYkeS4tsGb1yORsv5o8Qq0ndCUFyq/yyLC/bvYIAzM8q/
 RJYJX+3OadAOiiHM0FYRGf8QTyreYa3Xa99QwCMy06I48RG9IPL5eX4odFIfMLVcBmj7
 bR81uYnwboqoi76wUQbO0AwUE0PPjV7NcQRfWCSHsDTeGLtvAJWJcNlxXxhqYZadJoMk
 mI1IfJrozYLbf/9bVnSwjaBVfmoyQ89akMclN6bGdWBXm2yr/L8rcLUMbgz8VrpfAYLt
 ZTAA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hillf Danton <hdanton@sina.com>, Sandeep Patil <sspatil@google.com>,
 Sudipto Paul <Sudipto.Paul@arm.com>,
 Vincent Donnefort <Vincent.Donnefort@arm.com>, Chenbo Feng <fengc@google.com>,
 Alistair Strachan <astrachan@google.com>, Liam Mark <lmark@codeaurora.org>,
 "Andrew F. Davis" <afd@ti.com>, Christoph Hellwig <hch@infradead.org>,
 dri-devel@lists.freedesktop.org, Hridya Valsaraju <hridya@google.com>,
 Pratik Patel <pratikp@codeaurora.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogIkFuZHJldyBGLiBEYXZpcyIgPGFmZEB0aS5jb20+CgpUaGlzIGZyYW1ld29yayBhbGxv
d3MgYSB1bmlmaWVkIHVzZXJzcGFjZSBpbnRlcmZhY2UgZm9yIGRtYS1idWYKZXhwb3J0ZXJzLCBh
bGxvd2luZyB1c2VybGFuZCB0byBhbGxvY2F0ZSBzcGVjaWZpYyB0eXBlcyBvZiBtZW1vcnkKZm9y
IHVzZSBpbiBkbWEtYnVmIHNoYXJpbmcuCgpFYWNoIGhlYXAgaXMgZ2l2ZW4gaXRzIG93biBkZXZp
Y2Ugbm9kZSwgd2hpY2ggYSB1c2VyIGNhbiBhbGxvY2F0ZQphIGRtYS1idWYgZmQgZnJvbSB1c2lu
ZyB0aGUgRE1BX0hFQVBfSU9DX0FMTE9DLgoKVGhpcyBjb2RlIGlzIGFuIGV2b2x1aXRvbiBvZiB0
aGUgQW5kcm9pZCBJT04gaW1wbGVtZW50YXRpb24sCmFuZCBhIGJpZyB0aGFua3MgaXMgZHVlIHRv
IGl0cyBhdXRob3JzL21haW50YWluZXJzIG92ZXIgdGltZQpmb3IgdGhlaXIgZWZmb3J0OgogIFJl
YmVjY2EgU2NodWx0eiBaYXZpbiwgQ29saW4gQ3Jvc3MsIEJlbmphbWluIEdhaWduYXJkLAogIExh
dXJhIEFiYm90dCwgYW5kIG1hbnkgb3RoZXIgY29udHJpYnV0b3JzIQoKQ2M6IExhdXJhIEFiYm90
dCA8bGFiYm90dEByZWRoYXQuY29tPgpDYzogQmVuamFtaW4gR2FpZ25hcmQgPGJlbmphbWluLmdh
aWduYXJkQGxpbmFyby5vcmc+CkNjOiBTdW1pdCBTZW13YWwgPHN1bWl0LnNlbXdhbEBsaW5hcm8u
b3JnPgpDYzogTGlhbSBNYXJrIDxsbWFya0Bjb2RlYXVyb3JhLm9yZz4KQ2M6IFByYXRpayBQYXRl
bCA8cHJhdGlrcEBjb2RlYXVyb3JhLm9yZz4KQ2M6IEJyaWFuIFN0YXJrZXkgPEJyaWFuLlN0YXJr
ZXlAYXJtLmNvbT4KQ2M6IFZpbmNlbnQgRG9ubmVmb3J0IDxWaW5jZW50LkRvbm5lZm9ydEBhcm0u
Y29tPgpDYzogU3VkaXB0byBQYXVsIDxTdWRpcHRvLlBhdWxAYXJtLmNvbT4KQ2M6IEFuZHJldyBG
LiBEYXZpcyA8YWZkQHRpLmNvbT4KQ2M6IENocmlzdG9waCBIZWxsd2lnIDxoY2hAaW5mcmFkZWFk
Lm9yZz4KQ2M6IENoZW5ibyBGZW5nIDxmZW5nY0Bnb29nbGUuY29tPgpDYzogQWxpc3RhaXIgU3Ry
YWNoYW4gPGFzdHJhY2hhbkBnb29nbGUuY29tPgpDYzogSHJpZHlhIFZhbHNhcmFqdSA8aHJpZHlh
QGdvb2dsZS5jb20+CkNjOiBTYW5kZWVwIFBhdGlsIDxzc3BhdGlsQGdvb2dsZS5jb20+CkNjOiBI
aWxsZiBEYW50b24gPGhkYW50b25Ac2luYS5jb20+CkNjOiBEYXZlIEFpcmxpZSA8YWlybGllZEBn
bWFpbC5jb20+CkNjOiBkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnClJldmlld2VkLWJ5
OiBCcmlhbiBTdGFya2V5IDxicmlhbi5zdGFya2V5QGFybS5jb20+CkFja2VkLWJ5OiBTYW5kZWVw
IFBhdGlsIDxzc3BhdGlsQGFuZHJvaWQuY29tPgpTaWduZWQtb2ZmLWJ5OiBBbmRyZXcgRi4gRGF2
aXMgPGFmZEB0aS5jb20+ClNpZ25lZC1vZmYtYnk6IEpvaG4gU3R1bHR6IDxqb2huLnN0dWx0ekBs
aW5hcm8ub3JnPgotLS0KdjI6CiogRm9sZGVkIGRvd24gZml4ZXMgSSBoYWQgcHJldmlvdXNseSBz
aGFyZWQgaW4gaW1wbGVtZW50aW5nCiAgaGVhcHMKKiBNYWtlIGZsYWdzIGEgdTY0IChTdWdnZXN0
ZWQgYnkgTGF1cmEpCiogQWRkIFBBR0VfQUxJR04oKSBmaXggdG8gdGhlIGNvcmUgYWxsb2MgZnVu
Y2l0b24KKiBJT0NUTCBmaXh1cHMgc3VnZ2VzdGVkIGJ5IEJyaWFuCiogQWRkZWQgZml4ZXMgc3Vn
Z2VzdGVkIGJ5IEJlbmphbWluCiogUmVtb3ZlZCBjb3JlIHN0YXRzIG1nbXQsIGFzIHRoYXQgc2hv
dWxkIGJlIGltcGxlbWVudGVkIGJ5CiAgcGVyLWhlYXAgY29kZQoqIENoYW5nZWQgYWxsb2MgdG8g
cmV0dXJuIGEgZG1hLWJ1ZiBmZCwgcmF0aGVyIHRoYW4gYSBidWZmZXIKICAoYXMgaXQgc2ltcGxp
ZmllcyBlcnJvciBoYW5kbGluZykKdjM6CiogUmVtb3ZlZCBzY2FyZS1xdW90ZXMgaW4gTUFJTlRB
SU5FUlMgZW1haWwgYWRkcmVzcwoqIEdldCByaWQgb2YgLnJlbGVhc2UgZnVuY3Rpb24gYXMgaXQg
ZGlkbid0IGRvIGFueXRoaW5nIChmcm9tCiAgQ2hyaXN0b3BoKQoqIFJlbmFtZWQgZmlscCB0byBm
aWxlIChzdWdnZXN0ZWQgYnkgQ2hyaXN0b3BoKQoqIFNwbGl0IG91dCBpb2N0bCBoYW5kbGluZyB0
byBzZXBhcmF0ZSBmdW5jdGlvbiAoc3VnZ2VzdGVkIGJ5CiAgQ2hyaXN0b3BoKQoqIEFkZCBjb21t
ZW50IGRvY3VtZW50aW5nIFBBR0VfQUxJR04gdXNhZ2UgKHN1Z2dlc3RlZCBieSBCcmlhbikKKiBT
d2l0Y2ggZnJvbSBpZHIgdG8gWGFycmF5IChzdWdnZXN0ZWQgYnkgQnJpYW4pCiogRml4dXAgY2Rl
diBjcmVhdGlvbiAoc3VnZ2VzdGVkIGJ5IEJyaWFuKQoqIEF2b2lkIEVYUE9SVF9TWU1CT0wgdW50
aWwgd2UgZmluYWxpemUgbW9kdWxlcyAoc3VnZ2VzdGVkIGJ5CiAgQnJpYW4pCiogTWFrZSBzdHJ1
Y3QgZG1hX2hlYXAgaW50ZXJuYWwgb25seSAoZm9sZGVkIGluIGZyb20gQW5kcmV3KQoqIFNtYWxs
IGNsZWFudXBzIHN1Z2dlc3RlZCBieSBHcmVnS0gKKiBQcm92aWRlIGNsYXNzLT5kZXZub2RlIGNh
bGxiYWNrIHRvIGdldCBjb25zaXN0ZW50IC9kZXYvCiAgc3ViZGlyZWN0b3J5IG5hbWluZyAoU3Vn
Z2VzdGVkIGJ5IEJqb3JuKQp2NDoKKiBGb2xkZWQgZG93biBkbWEtaGVhcC5oIGNoYW5nZSB0aGF0
IHdhcyBpbiBhIGZvbGxvd2luZyBwYXRjaAoqIEFkZGVkIGZkX2ZsYWdzIGVudHJ5IHRvIGFsbG9j
YXRpb24gc3RydWN0dXJlIGFuZCBwYXNzIGl0CiAgdGhyb3VnaCB0byBoZWFwIGNvZGUgZm9yIHVz
ZSBvbiBkbWEtYnVmIGZkIGNyZWF0aW9uIChzdWdnZXN0ZWQKICBieSBCZW5qYW1pbikKdjU6Ciog
TWlub3IgY2xlYW51cHMKdjY6CiogSW1wcm92ZWQgZXJyb3IgcGF0aCBoYW5kbGluZywgbWlub3Ig
d2hpdGVzcGFjZSBmaXhlcywgYm90aAogIHN1Z2dlc3RlZCBieSBCcmlhbgp2NzoKKiBMb25nZXIg
S2NvbmZpZyBkZXNjcmlwdGlvbiB0byBxdWlldCBjaGVja3BhdGNoIHdhcm5pbmdzCiogUmUtYWRk
IGNvbXBhdF9pb2N0bCBiaXRzIChIcmlkeWEgbm90aWNlZCAzMmJpdCB1c2VybGFuZCB3YXNuJ3QK
ICB3b3JraW5nKQp2ODoKKiBNYWtlIHN0cnVjdCBkbWFfaGVhcF9vcHMgY29uc3RzIChTdWdnZXN0
ZWQgYnkgQ2hyaXN0b3BoKQoqIENoZWNrcGF0Y2ggd2hpdGVzcGFjZSBmaXh1cHMKdjk6CiogTWlu
b3IgY2xlYW51cHMgc3VnZ2VzdGVkIGJ5IEJyaWFuIFN0YXJrZXkKKiBSZW5hbWUgZG1hX2hlYXBf
Z2V0X2RhdGEtPmRtYV9oZWFwX2dldF9kcnZkYXRhIHN1Z2dlc3RlZAogIGJ5IEhpbGYgRGFudG9u
CnYxMToKKiBLY29uZmlnIHRleHQgaW1wcm92ZW1lbnRzIHN1Z2dlc3RlZCBieSBSYW5keSBEdW5s
YXAKdjEyOgoqIEFkZCBsb2dpYyB0byBwcmV2ZW50IGR1cGxpY2F0ZWx5IG5hbWVkIGhlYXBzIGJl
aW5nIGFkZGVkCiogQWRkIHN5bWJvbCBleHBvcnRzIGZvciBoZWFwcyBhcyBtb2R1bGVzCnYxMzoK
KiBSZS1yZW1vdmUgc3ltYm9sIGV4cG9ydHMgcGVyIGRpc2N1c3Npb24gdy8gQnJpYW4uIFdpbGwK
ICByZXN1Ym1pdCBpbiBhIHNlcGFydGUgcGF0Y2ggZm9yIHJldmlldwp2MTQ6CiogUmV3b3JrZWQg
aW9jdGwgaGFuZGxlciB0byB6ZXJvIGZpbGwgYW55IGRpZmZlcmVuY2UgaW4KICBzdHJ1Y3R1cmUg
c2l6ZSwgc2ltaWxhciB0byB3aGF0IHRoZSBEUk0gY29yZSBkb2VzLCBhcwogIHN1Z2dlc3RlZCBi
eSBEYXZlIEFpcmxpZQoqIFJlbW92ZWQgbm93IHVubmVjZXNzYXJ5IHJlc2VydmVkIGJpdHMgaW4g
YWxsb2NhdGVfZGF0YQoqIEFkZGVkIGdldF9mZWF0dXJlcyBpb2N0bCBhcyBzdWdnZXN0ZWQgYnkg
RGF2ZSBBaXJsaWUKKiBSZW1vdmVkIHByX3dhcm5fb25jZSBtZXNzYWdlcyBhcyByZXF1ZXN0ZWQg
YnkgRGF2ZQogIEFpcmxpZQp2MTU6CiogRHJvcHBlZCB0aGUgZ2V0X2ZlYXR1cmVzIGlvY3RsIGFz
IHN1Z2dlc3RlZCBieSBCcmlhbgogIFN0YXJrZXkgYW5kIERhbmllbCBWZXR0ZXIKKiBBZGQgbGlz
dGhlYWQgY29tbWVudCBzdWdnZXN0ZWQgYnkgU2FuZGVlcCBQYXRpbAoqIERyb3BwZWQgbWlub3Ig
dmFsdWUgaW4gc3RydWN0IGRtYV9oZWFwIGFzIHN1Z2dlc3RlZCBieQogIFNhbmRlZXAgUGF0aWwK
KiBGaXggZ3JhbW1hciB0eXBvIGZyb20gQnJpYW4gU3RhcmtleQotLS0KIE1BSU5UQUlORVJTICAg
ICAgICAgICAgICAgICAgIHwgIDE4ICsrKwogZHJpdmVycy9kbWEtYnVmL0tjb25maWcgICAgICAg
fCAgIDkgKysKIGRyaXZlcnMvZG1hLWJ1Zi9NYWtlZmlsZSAgICAgIHwgICAxICsKIGRyaXZlcnMv
ZG1hLWJ1Zi9kbWEtaGVhcC5jICAgIHwgMjk3ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysKIGluY2x1ZGUvbGludXgvZG1hLWhlYXAuaCAgICAgIHwgIDU5ICsrKysrKysKIGluY2x1
ZGUvdWFwaS9saW51eC9kbWEtaGVhcC5oIHwgIDUzICsrKysrKwogNiBmaWxlcyBjaGFuZ2VkLCA0
MzcgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZG1hLWJ1Zi9kbWEt
aGVhcC5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS9saW51eC9kbWEtaGVhcC5oCiBjcmVh
dGUgbW9kZSAxMDA2NDQgaW5jbHVkZS91YXBpL2xpbnV4L2RtYS1oZWFwLmgKCmRpZmYgLS1naXQg
YS9NQUlOVEFJTkVSUyBiL01BSU5UQUlORVJTCmluZGV4IGNiYTEwOTU1NDdmZC4uNTY4Zjk0MTcy
OTA1IDEwMDY0NAotLS0gYS9NQUlOVEFJTkVSUworKysgYi9NQUlOVEFJTkVSUwpAQCAtNDk0MCw2
ICs0OTQwLDI0IEBAIEY6CWluY2x1ZGUvbGludXgvKmZlbmNlLmgKIEY6CURvY3VtZW50YXRpb24v
ZHJpdmVyLWFwaS9kbWEtYnVmLnJzdAogVDoJZ2l0IGdpdDovL2Fub25naXQuZnJlZWRlc2t0b3Au
b3JnL2RybS9kcm0tbWlzYwogCitETUEtQlVGIEhFQVBTIEZSQU1FV09SSworTToJU3VtaXQgU2Vt
d2FsIDxzdW1pdC5zZW13YWxAbGluYXJvLm9yZz4KK1I6CUFuZHJldyBGLiBEYXZpcyA8YWZkQHRp
LmNvbT4KK1I6CUJlbmphbWluIEdhaWduYXJkIDxiZW5qYW1pbi5nYWlnbmFyZEBsaW5hcm8ub3Jn
PgorUjoJTGlhbSBNYXJrIDxsbWFya0Bjb2RlYXVyb3JhLm9yZz4KK1I6CUxhdXJhIEFiYm90dCA8
bGFiYm90dEByZWRoYXQuY29tPgorUjoJQnJpYW4gU3RhcmtleSA8QnJpYW4uU3RhcmtleUBhcm0u
Y29tPgorUjoJSm9obiBTdHVsdHogPGpvaG4uc3R1bHR6QGxpbmFyby5vcmc+CitTOglNYWludGFp
bmVkCitMOglsaW51eC1tZWRpYUB2Z2VyLmtlcm5lbC5vcmcKK0w6CWRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKK0w6CWxpbmFyby1tbS1zaWdAbGlzdHMubGluYXJvLm9yZyAobW9kZXJh
dGVkIGZvciBub24tc3Vic2NyaWJlcnMpCitGOglpbmNsdWRlL3VhcGkvbGludXgvZG1hLWhlYXAu
aAorRjoJaW5jbHVkZS9saW51eC9kbWEtaGVhcC5oCitGOglkcml2ZXJzL2RtYS1idWYvZG1hLWhl
YXAuYworRjoJZHJpdmVycy9kbWEtYnVmL2hlYXBzLyoKK1Q6CWdpdCBnaXQ6Ly9hbm9uZ2l0LmZy
ZWVkZXNrdG9wLm9yZy9kcm0vZHJtLW1pc2MKKwogRE1BIEdFTkVSSUMgT0ZGTE9BRCBFTkdJTkUg
U1VCU1lTVEVNCiBNOglWaW5vZCBLb3VsIDx2a291bEBrZXJuZWwub3JnPgogTDoJZG1hZW5naW5l
QHZnZXIua2VybmVsLm9yZwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVmL0tjb25maWcgYi9k
cml2ZXJzL2RtYS1idWYvS2NvbmZpZwppbmRleCBhMjNiNjc1MmQxMWEuLmJmZmE1OGZjM2U2ZSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9kbWEtYnVmL0tjb25maWcKKysrIGIvZHJpdmVycy9kbWEtYnVm
L0tjb25maWcKQEAgLTQ0LDQgKzQ0LDEzIEBAIGNvbmZpZyBETUFCVUZfU0VMRlRFU1RTCiAJZGVm
YXVsdCBuCiAJZGVwZW5kcyBvbiBETUFfU0hBUkVEX0JVRkZFUgogCittZW51Y29uZmlnIERNQUJV
Rl9IRUFQUworCWJvb2wgIkRNQS1CVUYgVXNlcmxhbmQgTWVtb3J5IEhlYXBzIgorCXNlbGVjdCBE
TUFfU0hBUkVEX0JVRkZFUgorCWhlbHAKKwkgIENob29zZSB0aGlzIG9wdGlvbiB0byBlbmFibGUg
dGhlIERNQS1CVUYgdXNlcmxhbmQgbWVtb3J5IGhlYXBzLgorCSAgVGhpcyBvcHRpb25zIGNyZWF0
ZXMgcGVyIGhlYXAgY2hhcmRldnMgaW4gL2Rldi9kbWFfaGVhcC8gd2hpY2gKKwkgIGFsbG93cyB1
c2Vyc3BhY2UgdG8gYWxsb2NhdGUgZG1hLWJ1ZnMgdGhhdCBjYW4gYmUgc2hhcmVkCisJICBiZXR3
ZWVuIGRyaXZlcnMuCisKIGVuZG1lbnUKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9NYWtl
ZmlsZSBiL2RyaXZlcnMvZG1hLWJ1Zi9NYWtlZmlsZQppbmRleCAwMzQ3OWRhMDY0MjIuLmNhZWU1
ZWIzZDM1MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9kbWEtYnVmL01ha2VmaWxlCisrKyBiL2RyaXZl
cnMvZG1hLWJ1Zi9NYWtlZmlsZQpAQCAtMSw2ICsxLDcgQEAKICMgU1BEWC1MaWNlbnNlLUlkZW50
aWZpZXI6IEdQTC0yLjAtb25seQogb2JqLXkgOj0gZG1hLWJ1Zi5vIGRtYS1mZW5jZS5vIGRtYS1m
ZW5jZS1hcnJheS5vIGRtYS1mZW5jZS1jaGFpbi5vIFwKIAkgZG1hLXJlc3YubyBzZXFuby1mZW5j
ZS5vCitvYmotJChDT05GSUdfRE1BQlVGX0hFQVBTKQkrPSBkbWEtaGVhcC5vCiBvYmotJChDT05G
SUdfU1lOQ19GSUxFKQkJKz0gc3luY19maWxlLm8KIG9iai0kKENPTkZJR19TV19TWU5DKQkJKz0g
c3dfc3luYy5vIHN5bmNfZGVidWcubwogb2JqLSQoQ09ORklHX1VETUFCVUYpCQkrPSB1ZG1hYnVm
Lm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtaGVhcC5jIGIvZHJpdmVycy9kbWEt
YnVmL2RtYS1oZWFwLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi40
ZjA0ZDEwNGFlNjEKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2RtYS1idWYvZG1hLWhlYXAu
YwpAQCAtMCwwICsxLDI5NyBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAK
Ky8qCisgKiBGcmFtZXdvcmsgZm9yIHVzZXJzcGFjZSBETUEtQlVGIGFsbG9jYXRpb25zCisgKgor
ICogQ29weXJpZ2h0IChDKSAyMDExIEdvb2dsZSwgSW5jLgorICogQ29weXJpZ2h0IChDKSAyMDE5
IExpbmFybyBMdGQuCisgKi8KKworI2luY2x1ZGUgPGxpbnV4L2NkZXYuaD4KKyNpbmNsdWRlIDxs
aW51eC9kZWJ1Z2ZzLmg+CisjaW5jbHVkZSA8bGludXgvZGV2aWNlLmg+CisjaW5jbHVkZSA8bGlu
dXgvZG1hLWJ1Zi5oPgorI2luY2x1ZGUgPGxpbnV4L2Vyci5oPgorI2luY2x1ZGUgPGxpbnV4L3hh
cnJheS5oPgorI2luY2x1ZGUgPGxpbnV4L2xpc3QuaD4KKyNpbmNsdWRlIDxsaW51eC9zbGFiLmg+
CisjaW5jbHVkZSA8bGludXgvdWFjY2Vzcy5oPgorI2luY2x1ZGUgPGxpbnV4L3N5c2NhbGxzLmg+
CisjaW5jbHVkZSA8bGludXgvZG1hLWhlYXAuaD4KKyNpbmNsdWRlIDx1YXBpL2xpbnV4L2RtYS1o
ZWFwLmg+CisKKyNkZWZpbmUgREVWTkFNRSAiZG1hX2hlYXAiCisKKyNkZWZpbmUgTlVNX0hFQVBf
TUlOT1JTIDEyOAorCisvKioKKyAqIHN0cnVjdCBkbWFfaGVhcCAtIHJlcHJlc2VudHMgYSBkbWFi
dWYgaGVhcCBpbiB0aGUgc3lzdGVtCisgKiBAbmFtZToJCXVzZWQgZm9yIGRlYnVnZ2luZy9kZXZp
Y2Utbm9kZSBuYW1lCisgKiBAb3BzOgkJb3BzIHN0cnVjdCBmb3IgdGhpcyBoZWFwCisgKiBAaGVh
cF9kZXZ0CQloZWFwIGRldmljZSBub2RlCisgKiBAbGlzdAkJbGlzdCBoZWFkIGNvbm5lY3Rpbmcg
dG8gbGlzdCBvZiBoZWFwcworICogQGhlYXBfY2RldgkJaGVhcCBjaGFyIGRldmljZQorICoKKyAq
IFJlcHJlc2VudHMgYSBoZWFwIG9mIG1lbW9yeSBmcm9tIHdoaWNoIGJ1ZmZlcnMgY2FuIGJlIG1h
ZGUuCisgKi8KK3N0cnVjdCBkbWFfaGVhcCB7CisJY29uc3QgY2hhciAqbmFtZTsKKwljb25zdCBz
dHJ1Y3QgZG1hX2hlYXBfb3BzICpvcHM7CisJdm9pZCAqcHJpdjsKKwlkZXZfdCBoZWFwX2RldnQ7
CisJc3RydWN0IGxpc3RfaGVhZCBsaXN0OworCXN0cnVjdCBjZGV2IGhlYXBfY2RldjsKK307CisK
K3N0YXRpYyBMSVNUX0hFQUQoaGVhcF9saXN0KTsKK3N0YXRpYyBERUZJTkVfTVVURVgoaGVhcF9s
aXN0X2xvY2spOworc3RhdGljIGRldl90IGRtYV9oZWFwX2RldnQ7CitzdGF0aWMgc3RydWN0IGNs
YXNzICpkbWFfaGVhcF9jbGFzczsKK3N0YXRpYyBERUZJTkVfWEFSUkFZX0FMTE9DKGRtYV9oZWFw
X21pbm9ycyk7CisKK3N0YXRpYyBpbnQgZG1hX2hlYXBfYnVmZmVyX2FsbG9jKHN0cnVjdCBkbWFf
aGVhcCAqaGVhcCwgc2l6ZV90IGxlbiwKKwkJCQkgdW5zaWduZWQgaW50IGZkX2ZsYWdzLAorCQkJ
CSB1bnNpZ25lZCBpbnQgaGVhcF9mbGFncykKK3sKKwkvKgorCSAqIEFsbG9jYXRpb25zIGZyb20g
YWxsIGhlYXBzIGhhdmUgdG8gYmVnaW4KKwkgKiBhbmQgZW5kIG9uIHBhZ2UgYm91bmRhcmllcy4K
KwkgKi8KKwlsZW4gPSBQQUdFX0FMSUdOKGxlbik7CisJaWYgKCFsZW4pCisJCXJldHVybiAtRUlO
VkFMOworCisJcmV0dXJuIGhlYXAtPm9wcy0+YWxsb2NhdGUoaGVhcCwgbGVuLCBmZF9mbGFncywg
aGVhcF9mbGFncyk7Cit9CisKK3N0YXRpYyBpbnQgZG1hX2hlYXBfb3BlbihzdHJ1Y3QgaW5vZGUg
Kmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlsZSkKK3sKKwlzdHJ1Y3QgZG1hX2hlYXAgKmhlYXA7CisK
KwloZWFwID0geGFfbG9hZCgmZG1hX2hlYXBfbWlub3JzLCBpbWlub3IoaW5vZGUpKTsKKwlpZiAo
IWhlYXApIHsKKwkJcHJfZXJyKCJkbWFfaGVhcDogbWlub3IgJWQgdW5rbm93bi5cbiIsIGltaW5v
cihpbm9kZSkpOworCQlyZXR1cm4gLUVOT0RFVjsKKwl9CisKKwkvKiBpbnN0YW5jZSBkYXRhIGFz
IGNvbnRleHQgKi8KKwlmaWxlLT5wcml2YXRlX2RhdGEgPSBoZWFwOworCW5vbnNlZWthYmxlX29w
ZW4oaW5vZGUsIGZpbGUpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBsb25nIGRtYV9oZWFw
X2lvY3RsX2FsbG9jYXRlKHN0cnVjdCBmaWxlICpmaWxlLCB2b2lkICpkYXRhKQoreworCXN0cnVj
dCBkbWFfaGVhcF9hbGxvY2F0aW9uX2RhdGEgKmhlYXBfYWxsb2NhdGlvbiA9IGRhdGE7CisJc3Ry
dWN0IGRtYV9oZWFwICpoZWFwID0gZmlsZS0+cHJpdmF0ZV9kYXRhOworCWludCBmZDsKKworCWlm
IChoZWFwX2FsbG9jYXRpb24tPmZkKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWlmIChoZWFwX2Fs
bG9jYXRpb24tPmZkX2ZsYWdzICYgfkRNQV9IRUFQX1ZBTElEX0ZEX0ZMQUdTKQorCQlyZXR1cm4g
LUVJTlZBTDsKKworCWlmIChoZWFwX2FsbG9jYXRpb24tPmhlYXBfZmxhZ3MgJiB+RE1BX0hFQVBf
VkFMSURfSEVBUF9GTEFHUykKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlmZCA9IGRtYV9oZWFwX2J1
ZmZlcl9hbGxvYyhoZWFwLCBoZWFwX2FsbG9jYXRpb24tPmxlbiwKKwkJCQkgICBoZWFwX2FsbG9j
YXRpb24tPmZkX2ZsYWdzLAorCQkJCSAgIGhlYXBfYWxsb2NhdGlvbi0+aGVhcF9mbGFncyk7CisJ
aWYgKGZkIDwgMCkKKwkJcmV0dXJuIGZkOworCisJaGVhcF9hbGxvY2F0aW9uLT5mZCA9IGZkOwor
CisJcmV0dXJuIDA7Cit9CisKK3Vuc2lnbmVkIGludCBkbWFfaGVhcF9pb2N0bF9jbWRzW10gPSB7
CisJRE1BX0hFQVBfSU9DX0FMTE9DLAorfTsKKworc3RhdGljIGxvbmcgZG1hX2hlYXBfaW9jdGwo
c3RydWN0IGZpbGUgKmZpbGUsIHVuc2lnbmVkIGludCB1Y21kLAorCQkJICAgdW5zaWduZWQgbG9u
ZyBhcmcpCit7CisJY2hhciBzdGFja19rZGF0YVsxMjhdOworCWNoYXIgKmtkYXRhID0gc3RhY2tf
a2RhdGE7CisJdW5zaWduZWQgaW50IGtjbWQ7CisJdW5zaWduZWQgaW50IGluX3NpemUsIG91dF9z
aXplLCBkcnZfc2l6ZSwga3NpemU7CisJaW50IG5yID0gX0lPQ19OUih1Y21kKTsKKwlpbnQgcmV0
ID0gMDsKKworCWlmIChuciA+PSBBUlJBWV9TSVpFKGRtYV9oZWFwX2lvY3RsX2NtZHMpKQorCQly
ZXR1cm4gLUVJTlZBTDsKKworCS8qIEdldCB0aGUga2VybmVsIGlvY3RsIGNtZCB0aGF0IG1hdGNo
ZXMgKi8KKwlrY21kID0gZG1hX2hlYXBfaW9jdGxfY21kc1tucl07CisKKwkvKiBGaWd1cmUgb3V0
IHRoZSBkZWx0YSBiZXR3ZWVuIHVzZXIgY21kIHNpemUgYW5kIGtlcm5lbCBjbWQgc2l6ZSAqLwor
CWRydl9zaXplID0gX0lPQ19TSVpFKGtjbWQpOworCW91dF9zaXplID0gX0lPQ19TSVpFKHVjbWQp
OworCWluX3NpemUgPSBvdXRfc2l6ZTsKKwlpZiAoKHVjbWQgJiBrY21kICYgSU9DX0lOKSA9PSAw
KQorCQlpbl9zaXplID0gMDsKKwlpZiAoKHVjbWQgJiBrY21kICYgSU9DX09VVCkgPT0gMCkKKwkJ
b3V0X3NpemUgPSAwOworCWtzaXplID0gbWF4KG1heChpbl9zaXplLCBvdXRfc2l6ZSksIGRydl9z
aXplKTsKKworCS8qIElmIG5lY2Vzc2FyeSwgYWxsb2NhdGUgYnVmZmVyIGZvciBpb2N0bCBhcmd1
bWVudCAqLworCWlmIChrc2l6ZSA+IHNpemVvZihzdGFja19rZGF0YSkpIHsKKwkJa2RhdGEgPSBr
bWFsbG9jKGtzaXplLCBHRlBfS0VSTkVMKTsKKwkJaWYgKCFrZGF0YSkKKwkJCXJldHVybiAtRU5P
TUVNOworCX0KKworCWlmIChjb3B5X2Zyb21fdXNlcihrZGF0YSwgKHZvaWQgX191c2VyICopYXJn
LCBpbl9zaXplKSAhPSAwKSB7CisJCXJldCA9IC1FRkFVTFQ7CisJCWdvdG8gZXJyOworCX0KKwor
CS8qIHplcm8gb3V0IGFueSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIGtlcm5lbC91c2VyIHN0cnVj
dHVyZSBzaXplICovCisJaWYgKGtzaXplID4gaW5fc2l6ZSkKKwkJbWVtc2V0KGtkYXRhICsgaW5f
c2l6ZSwgMCwga3NpemUgLSBpbl9zaXplKTsKKworCXN3aXRjaCAoa2NtZCkgeworCWNhc2UgRE1B
X0hFQVBfSU9DX0FMTE9DOgorCQlyZXQgPSBkbWFfaGVhcF9pb2N0bF9hbGxvY2F0ZShmaWxlLCBr
ZGF0YSk7CisJCWJyZWFrOworCWRlZmF1bHQ6CisJCXJldHVybiAtRU5PVFRZOworCX0KKworCWlm
IChjb3B5X3RvX3VzZXIoKHZvaWQgX191c2VyICopYXJnLCBrZGF0YSwgb3V0X3NpemUpICE9IDAp
CisJCXJldCA9IC1FRkFVTFQ7CitlcnI6CisJaWYgKGtkYXRhICE9IHN0YWNrX2tkYXRhKQorCQlr
ZnJlZShrZGF0YSk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBmaWxl
X29wZXJhdGlvbnMgZG1hX2hlYXBfZm9wcyA9IHsKKwkub3duZXIgICAgICAgICAgPSBUSElTX01P
RFVMRSwKKwkub3BlbgkJPSBkbWFfaGVhcF9vcGVuLAorCS51bmxvY2tlZF9pb2N0bCA9IGRtYV9o
ZWFwX2lvY3RsLAorI2lmZGVmIENPTkZJR19DT01QQVQKKwkuY29tcGF0X2lvY3RsCT0gZG1hX2hl
YXBfaW9jdGwsCisjZW5kaWYKK307CisKKy8qKgorICogZG1hX2hlYXBfZ2V0X2RydmRhdGEoKSAt
IGdldCBwZXItc3ViZHJpdmVyIGRhdGEgZm9yIHRoZSBoZWFwCisgKiBAaGVhcDogRE1BLUhlYXAg
dG8gcmV0cmlldmUgcHJpdmF0ZSBkYXRhIGZvcgorICoKKyAqIFJldHVybnM6CisgKiBUaGUgcGVy
LXN1YmRyaXZlciBkYXRhIGZvciB0aGUgaGVhcC4KKyAqLwordm9pZCAqZG1hX2hlYXBfZ2V0X2Ry
dmRhdGEoc3RydWN0IGRtYV9oZWFwICpoZWFwKQoreworCXJldHVybiBoZWFwLT5wcml2OworfQor
CitzdHJ1Y3QgZG1hX2hlYXAgKmRtYV9oZWFwX2FkZChjb25zdCBzdHJ1Y3QgZG1hX2hlYXBfZXhw
b3J0X2luZm8gKmV4cF9pbmZvKQoreworCXN0cnVjdCBkbWFfaGVhcCAqaGVhcCwgKmgsICplcnJf
cmV0OworCXN0cnVjdCBkZXZpY2UgKmRldl9yZXQ7CisJdW5zaWduZWQgaW50IG1pbm9yOworCWlu
dCByZXQ7CisKKwlpZiAoIWV4cF9pbmZvLT5uYW1lIHx8ICFzdHJjbXAoZXhwX2luZm8tPm5hbWUs
ICIiKSkgeworCQlwcl9lcnIoImRtYV9oZWFwOiBDYW5ub3QgYWRkIGhlYXAgd2l0aG91dCBhIG5h
bWVcbiIpOworCQlyZXR1cm4gRVJSX1BUUigtRUlOVkFMKTsKKwl9CisKKwlpZiAoIWV4cF9pbmZv
LT5vcHMgfHwgIWV4cF9pbmZvLT5vcHMtPmFsbG9jYXRlKSB7CisJCXByX2VycigiZG1hX2hlYXA6
IENhbm5vdCBhZGQgaGVhcCB3aXRoIGludmFsaWQgb3BzIHN0cnVjdFxuIik7CisJCXJldHVybiBF
UlJfUFRSKC1FSU5WQUwpOworCX0KKworCS8qIGNoZWNrIHRoZSBuYW1lIGlzIHVuaXF1ZSAqLwor
CW11dGV4X2xvY2soJmhlYXBfbGlzdF9sb2NrKTsKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5KGgsICZo
ZWFwX2xpc3QsIGxpc3QpIHsKKwkJaWYgKCFzdHJjbXAoaC0+bmFtZSwgZXhwX2luZm8tPm5hbWUp
KSB7CisJCQltdXRleF91bmxvY2soJmhlYXBfbGlzdF9sb2NrKTsKKwkJCXByX2VycigiZG1hX2hl
YXA6IEFscmVhZHkgcmVnaXN0ZXJlZCBoZWFwIG5hbWVkICVzXG4iLAorCQkJICAgICAgIGV4cF9p
bmZvLT5uYW1lKTsKKwkJCXJldHVybiBFUlJfUFRSKC1FSU5WQUwpOworCQl9CisJfQorCW11dGV4
X3VubG9jaygmaGVhcF9saXN0X2xvY2spOworCisJaGVhcCA9IGt6YWxsb2Moc2l6ZW9mKCpoZWFw
KSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFoZWFwKQorCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsK
KworCWhlYXAtPm5hbWUgPSBleHBfaW5mby0+bmFtZTsKKwloZWFwLT5vcHMgPSBleHBfaW5mby0+
b3BzOworCWhlYXAtPnByaXYgPSBleHBfaW5mby0+cHJpdjsKKworCS8qIEZpbmQgdW51c2VkIG1p
bm9yIG51bWJlciAqLworCXJldCA9IHhhX2FsbG9jKCZkbWFfaGVhcF9taW5vcnMsICZtaW5vciwg
aGVhcCwKKwkJICAgICAgIFhBX0xJTUlUKDAsIE5VTV9IRUFQX01JTk9SUyAtIDEpLCBHRlBfS0VS
TkVMKTsKKwlpZiAocmV0IDwgMCkgeworCQlwcl9lcnIoImRtYV9oZWFwOiBVbmFibGUgdG8gZ2V0
IG1pbm9yIG51bWJlciBmb3IgaGVhcFxuIik7CisJCWVycl9yZXQgPSBFUlJfUFRSKHJldCk7CisJ
CWdvdG8gZXJyMDsKKwl9CisKKwkvKiBDcmVhdGUgZGV2aWNlICovCisJaGVhcC0+aGVhcF9kZXZ0
ID0gTUtERVYoTUFKT1IoZG1hX2hlYXBfZGV2dCksIG1pbm9yKTsKKworCWNkZXZfaW5pdCgmaGVh
cC0+aGVhcF9jZGV2LCAmZG1hX2hlYXBfZm9wcyk7CisJcmV0ID0gY2Rldl9hZGQoJmhlYXAtPmhl
YXBfY2RldiwgaGVhcC0+aGVhcF9kZXZ0LCAxKTsKKwlpZiAocmV0IDwgMCkgeworCQlwcl9lcnIo
ImRtYV9oZWFwOiBVbmFibGUgdG8gYWRkIGNoYXIgZGV2aWNlXG4iKTsKKwkJZXJyX3JldCA9IEVS
Ul9QVFIocmV0KTsKKwkJZ290byBlcnIxOworCX0KKworCWRldl9yZXQgPSBkZXZpY2VfY3JlYXRl
KGRtYV9oZWFwX2NsYXNzLAorCQkJCU5VTEwsCisJCQkJaGVhcC0+aGVhcF9kZXZ0LAorCQkJCU5V
TEwsCisJCQkJaGVhcC0+bmFtZSk7CisJaWYgKElTX0VSUihkZXZfcmV0KSkgeworCQlwcl9lcnIo
ImRtYV9oZWFwOiBVbmFibGUgdG8gY3JlYXRlIGRldmljZVxuIik7CisJCWVycl9yZXQgPSBFUlJf
Q0FTVChkZXZfcmV0KTsKKwkJZ290byBlcnIyOworCX0KKwkvKiBBZGQgaGVhcCB0byB0aGUgbGlz
dCAqLworCW11dGV4X2xvY2soJmhlYXBfbGlzdF9sb2NrKTsKKwlsaXN0X2FkZCgmaGVhcC0+bGlz
dCwgJmhlYXBfbGlzdCk7CisJbXV0ZXhfdW5sb2NrKCZoZWFwX2xpc3RfbG9jayk7CisKKwlyZXR1
cm4gaGVhcDsKKworZXJyMjoKKwljZGV2X2RlbCgmaGVhcC0+aGVhcF9jZGV2KTsKK2VycjE6CisJ
eGFfZXJhc2UoJmRtYV9oZWFwX21pbm9ycywgbWlub3IpOworZXJyMDoKKwlrZnJlZShoZWFwKTsK
KwlyZXR1cm4gZXJyX3JldDsKK30KKworc3RhdGljIGNoYXIgKmRtYV9oZWFwX2Rldm5vZGUoc3Ry
dWN0IGRldmljZSAqZGV2LCB1bW9kZV90ICptb2RlKQoreworCXJldHVybiBrYXNwcmludGYoR0ZQ
X0tFUk5FTCwgImRtYV9oZWFwLyVzIiwgZGV2X25hbWUoZGV2KSk7Cit9CisKK3N0YXRpYyBpbnQg
ZG1hX2hlYXBfaW5pdCh2b2lkKQoreworCWludCByZXQ7CisKKwlyZXQgPSBhbGxvY19jaHJkZXZf
cmVnaW9uKCZkbWFfaGVhcF9kZXZ0LCAwLCBOVU1fSEVBUF9NSU5PUlMsIERFVk5BTUUpOworCWlm
IChyZXQpCisJCXJldHVybiByZXQ7CisKKwlkbWFfaGVhcF9jbGFzcyA9IGNsYXNzX2NyZWF0ZShU
SElTX01PRFVMRSwgREVWTkFNRSk7CisJaWYgKElTX0VSUihkbWFfaGVhcF9jbGFzcykpIHsKKwkJ
dW5yZWdpc3Rlcl9jaHJkZXZfcmVnaW9uKGRtYV9oZWFwX2RldnQsIE5VTV9IRUFQX01JTk9SUyk7
CisJCXJldHVybiBQVFJfRVJSKGRtYV9oZWFwX2NsYXNzKTsKKwl9CisJZG1hX2hlYXBfY2xhc3Mt
PmRldm5vZGUgPSBkbWFfaGVhcF9kZXZub2RlOworCisJcmV0dXJuIDA7Cit9CitzdWJzeXNfaW5p
dGNhbGwoZG1hX2hlYXBfaW5pdCk7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2RtYS1oZWFw
LmggYi9pbmNsdWRlL2xpbnV4L2RtYS1oZWFwLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
MDAwMDAwMDAwMDAwLi40NTRlMzU0ZDFmZmIKLS0tIC9kZXYvbnVsbAorKysgYi9pbmNsdWRlL2xp
bnV4L2RtYS1oZWFwLmgKQEAgLTAsMCArMSw1OSBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZp
ZXI6IEdQTC0yLjAgKi8KKy8qCisgKiBETUFCVUYgSGVhcHMgQWxsb2NhdGlvbiBJbmZyYXN0cnVj
dHVyZQorICoKKyAqIENvcHlyaWdodCAoQykgMjAxMSBHb29nbGUsIEluYy4KKyAqIENvcHlyaWdo
dCAoQykgMjAxOSBMaW5hcm8gTHRkLgorICovCisKKyNpZm5kZWYgX0RNQV9IRUFQU19ICisjZGVm
aW5lIF9ETUFfSEVBUFNfSAorCisjaW5jbHVkZSA8bGludXgvY2Rldi5oPgorI2luY2x1ZGUgPGxp
bnV4L3R5cGVzLmg+CisKK3N0cnVjdCBkbWFfaGVhcDsKKworLyoqCisgKiBzdHJ1Y3QgZG1hX2hl
YXBfb3BzIC0gb3BzIHRvIG9wZXJhdGUgb24gYSBnaXZlbiBoZWFwCisgKiBAYWxsb2NhdGU6CQlh
bGxvY2F0ZSBkbWFidWYgYW5kIHJldHVybiBmZAorICoKKyAqIGFsbG9jYXRlIHJldHVybnMgZG1h
YnVmIGZkICBvbiBzdWNjZXNzLCAtZXJybm8gb24gZXJyb3IuCisgKi8KK3N0cnVjdCBkbWFfaGVh
cF9vcHMgeworCWludCAoKmFsbG9jYXRlKShzdHJ1Y3QgZG1hX2hlYXAgKmhlYXAsCisJCQl1bnNp
Z25lZCBsb25nIGxlbiwKKwkJCXVuc2lnbmVkIGxvbmcgZmRfZmxhZ3MsCisJCQl1bnNpZ25lZCBs
b25nIGhlYXBfZmxhZ3MpOworfTsKKworLyoqCisgKiBzdHJ1Y3QgZG1hX2hlYXBfZXhwb3J0X2lu
Zm8gLSBpbmZvcm1hdGlvbiBuZWVkZWQgdG8gZXhwb3J0IGEgbmV3IGRtYWJ1ZiBoZWFwCisgKiBA
bmFtZToJdXNlZCBmb3IgZGVidWdnaW5nL2RldmljZS1ub2RlIG5hbWUKKyAqIEBvcHM6CW9wcyBz
dHJ1Y3QgZm9yIHRoaXMgaGVhcAorICogQHByaXY6CWhlYXAgZXhwb3J0ZXIgcHJpdmF0ZSBkYXRh
CisgKgorICogSW5mb3JtYXRpb24gbmVlZGVkIHRvIGV4cG9ydCBhIG5ldyBkbWFidWYgaGVhcC4K
KyAqLworc3RydWN0IGRtYV9oZWFwX2V4cG9ydF9pbmZvIHsKKwljb25zdCBjaGFyICpuYW1lOwor
CWNvbnN0IHN0cnVjdCBkbWFfaGVhcF9vcHMgKm9wczsKKwl2b2lkICpwcml2OworfTsKKworLyoq
CisgKiBkbWFfaGVhcF9nZXRfZHJ2ZGF0YSgpIC0gZ2V0IHBlci1oZWFwIGRyaXZlciBkYXRhCisg
KiBAaGVhcDogRE1BLUhlYXAgdG8gcmV0cmlldmUgcHJpdmF0ZSBkYXRhIGZvcgorICoKKyAqIFJl
dHVybnM6CisgKiBUaGUgcGVyLWhlYXAgZGF0YSBmb3IgdGhlIGhlYXAuCisgKi8KK3ZvaWQgKmRt
YV9oZWFwX2dldF9kcnZkYXRhKHN0cnVjdCBkbWFfaGVhcCAqaGVhcCk7CisKKy8qKgorICogZG1h
X2hlYXBfYWRkIC0gYWRkcyBhIGhlYXAgdG8gZG1hYnVmIGhlYXBzCisgKiBAZXhwX2luZm86CQlp
bmZvcm1hdGlvbiBuZWVkZWQgdG8gcmVnaXN0ZXIgdGhpcyBoZWFwCisgKi8KK3N0cnVjdCBkbWFf
aGVhcCAqZG1hX2hlYXBfYWRkKGNvbnN0IHN0cnVjdCBkbWFfaGVhcF9leHBvcnRfaW5mbyAqZXhw
X2luZm8pOworCisjZW5kaWYgLyogX0RNQV9IRUFQU19IICovCmRpZmYgLS1naXQgYS9pbmNsdWRl
L3VhcGkvbGludXgvZG1hLWhlYXAuaCBiL2luY2x1ZGUvdWFwaS9saW51eC9kbWEtaGVhcC5oCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uMGRjYjk1Yjg1ODg2Ci0tLSAv
ZGV2L251bGwKKysrIGIvaW5jbHVkZS91YXBpL2xpbnV4L2RtYS1oZWFwLmgKQEAgLTAsMCArMSw1
MyBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAgV0lUSCBMaW51eC1zeXNj
YWxsLW5vdGUgKi8KKy8qCisgKiBETUFCVUYgSGVhcHMgVXNlcnNwYWNlIEFQSQorICoKKyAqIENv
cHlyaWdodCAoQykgMjAxMSBHb29nbGUsIEluYy4KKyAqIENvcHlyaWdodCAoQykgMjAxOSBMaW5h
cm8gTHRkLgorICovCisjaWZuZGVmIF9VQVBJX0xJTlVYX0RNQUJVRl9QT09MX0gKKyNkZWZpbmUg
X1VBUElfTElOVVhfRE1BQlVGX1BPT0xfSAorCisjaW5jbHVkZSA8bGludXgvaW9jdGwuaD4KKyNp
bmNsdWRlIDxsaW51eC90eXBlcy5oPgorCisvKioKKyAqIERPQzogRE1BQlVGIEhlYXBzIFVzZXJz
cGFjZSBBUEkKKyAqLworCisvKiBWYWxpZCBGRF9GTEFHUyBhcmUgT19DTE9FWEVDLCBPX1JET05M
WSwgT19XUk9OTFksIE9fUkRXUiAqLworI2RlZmluZSBETUFfSEVBUF9WQUxJRF9GRF9GTEFHUyAo
T19DTE9FWEVDIHwgT19BQ0NNT0RFKQorCisvKiBDdXJyZW50bHkgbm8gaGVhcCBmbGFncyAqLwor
I2RlZmluZSBETUFfSEVBUF9WQUxJRF9IRUFQX0ZMQUdTICgwKQorCisvKioKKyAqIHN0cnVjdCBk
bWFfaGVhcF9hbGxvY2F0aW9uX2RhdGEgLSBtZXRhZGF0YSBwYXNzZWQgZnJvbSB1c2Vyc3BhY2Ug
Zm9yCisgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGlvbnMK
KyAqIEBsZW46CQlzaXplIG9mIHRoZSBhbGxvY2F0aW9uCisgKiBAZmQ6CQkJd2lsbCBiZSBwb3B1
bGF0ZWQgd2l0aCBhIGZkIHdoaWNoIHByb3ZkZXMgdGhlCisgKgkJCWhhbmRsZSB0byB0aGUgYWxs
b2NhdGVkIGRtYS1idWYKKyAqIEBmZF9mbGFnczoJCWZpbGUgZGVzY3JpcHRvciBmbGFncyB1c2Vk
IHdoZW4gYWxsb2NhdGluZworICogQGhlYXBfZmxhZ3M6CQlmbGFncyBwYXNzZWQgdG8gaGVhcAor
ICoKKyAqIFByb3ZpZGVkIGJ5IHVzZXJzcGFjZSBhcyBhbiBhcmd1bWVudCB0byB0aGUgaW9jdGwK
KyAqLworc3RydWN0IGRtYV9oZWFwX2FsbG9jYXRpb25fZGF0YSB7CisJX191NjQgbGVuOworCV9f
dTMyIGZkOworCV9fdTMyIGZkX2ZsYWdzOworCV9fdTY0IGhlYXBfZmxhZ3M7Cit9OworCisjZGVm
aW5lIERNQV9IRUFQX0lPQ19NQUdJQwkJJ0gnCisKKy8qKgorICogRE9DOiBETUFfSEVBUF9JT0Nf
QUxMT0MgLSBhbGxvY2F0ZSBtZW1vcnkgZnJvbSBwb29sCisgKgorICogVGFrZXMgYSBkbWFfaGVh
cF9hbGxvY2F0aW9uX2RhdGEgc3RydWN0IGFuZCByZXR1cm5zIGl0IHdpdGggdGhlIGZkIGZpZWxk
CisgKiBwb3B1bGF0ZWQgd2l0aCB0aGUgZG1hYnVmIGhhbmRsZSBvZiB0aGUgYWxsb2NhdGlvbi4K
KyAqLworI2RlZmluZSBETUFfSEVBUF9JT0NfQUxMT0MJX0lPV1IoRE1BX0hFQVBfSU9DX01BR0lD
LCAweDAsXAorCQkJCSAgICAgIHN0cnVjdCBkbWFfaGVhcF9hbGxvY2F0aW9uX2RhdGEpCisKKyNl
bmRpZiAvKiBfVUFQSV9MSU5VWF9ETUFCVUZfUE9PTF9IICovCi0tIAoyLjE3LjEKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
