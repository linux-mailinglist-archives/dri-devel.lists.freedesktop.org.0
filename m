Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4560B60311
	for <lists+dri-devel@lfdr.de>; Fri,  5 Jul 2019 11:26:28 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AF3DD6E459;
	Fri,  5 Jul 2019 09:26:22 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8D2D26E457
 for <dri-devel@lists.freedesktop.org>; Fri,  5 Jul 2019 09:26:20 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id E94C1AF96;
 Fri,  5 Jul 2019 09:26:18 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: airlied@redhat.com, daniel@ffwll.ch, kraxel@redhat.com,
 maarten.lankhorst@linux.intel.com, maxime.ripard@bootlin.com,
 sean@poorly.run, noralf@tronnes.org, sam@ravnborg.org,
 yc_chen@aspeedtech.com
Subject: [PATCH v2 6/6] drm/mgag200: Replace struct mga_fbdev with generic
 framebuffer emulation
Date: Fri,  5 Jul 2019 11:26:13 +0200
Message-Id: <20190705092613.7621-7-tzimmermann@suse.de>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190705092613.7621-1-tzimmermann@suse.de>
References: <20190705092613.7621-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org,
 virtualization@lists.linux-foundation.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCByZXBsYWNlcyBtZ2FnMjAwJ3MgZnJhbWVidWZmZXIgY29uc29sZSB3aXRoIERS
TSdzIGdlbmVyaWMKaW1wbGVtZW10YXRpb24uIEFsbCByZXNwZWN0aXZlIGNvZGUgaXMgYmVpbmcg
cmVtb3ZlZCBmcm9tIHRoZSBkcml2ZXIuCgpUaGUgY29uc29sZSBpcyBzZXQgdXAgd2l0aCBhIHNo
YWRvdyBidWZmZXIuIFRoZSBhY3R1YWwgYnVmZmVyIG9iamVjdCBpcwpub3QgcGVybWFuZW50bHkg
cGlubmVkIGluIHZpZGVvIHJhbSwgYnV0IGp1c3QgYW5vdGhlciBidWZmZXIgb2JqZWN0IHRoYXQK
dGhlIGRyaXZlciBtb3ZlcyBpbiBhbmQgb3V0IG9mIHZyYW0gYXMgbmVjZXNzYXJ5LiBUaGUgZHJp
dmVyJ3MgZnVuY3Rpb24KbWdhX2NydGNfZG9fc2V0X2Jhc2UoKSB1c2VkIHRvIGNvbnRhaW4gc3Bl
Y2lhbCBoYW5kbGluZyBmb3IgdGhlIGZyYW1lYnVmZmVyCmNvbnNvbGUuIFdpdGggdGhlIG5ldyBn
ZW5lcmljIGZyYW1lYnVmZmVyLCB0aGUgZHJpdmVyIGRvZXMgbm90IG5lZWQgdGhpcwpjb2RlIGFu
IGxvbmdlci4KCkZvciBjb25zaXN0ZW5jeSwgdGhpcyBwYXRjaCBhbHNvIGNoYW5nZXMgdGhlIHBy
ZWZlcnJlZCBmcmFtZWJ1ZmZlciBkZXB0aC4KVGhlIG9yaWdpbmFsIGNvZGUgdXNlZCAyNCBicHAg
YnkgZGVmYXVsdCBhbmQgMzIgYnBwIGZvciB0aGUgZnJhbWVidWZmZXIuIEFzCjI0IGJwcCBpcyBu
b3Qgd2VsbCBzdXBwb3J0ZWQgYnkgdXNlcnNwYWNlIGFueXdheSwgc2V0dGluZyAzMiBicHAgYXMg
ZGVmYXVsdAptYWtlcyBzZW5zZS4KCnYyOgoJKiByZWx5IG9uIGZiZGV2IGhlbHBlcnMgZXJyb3Ig
bWVzc2FnZXMKCSogZG9jdW1lbnQgY2hhbmdlcyB0byBwcmVmZXJyZWQgZGVwdGgKCSogZGlydHkg
ZnVuY3Rpb24gbm8gbG9uZ2VyIHJlcXVpcmVkCgpTaWduZWQtb2ZmLWJ5OiBUaG9tYXMgWmltbWVy
bWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4KQWNrZWQtYnk6IE5vcmFsZiBUcsO4bm5lcyA8bm9y
YWxmQHRyb25uZXMub3JnPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL01ha2VmaWxlICAg
ICAgIHwgICAyICstCiBkcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX2Rydi5oICB8ICAx
OSAtLQogZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9mYi5jICAgfCAzMDkgLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9tYWlu
LmMgfCAgMzEgKy0tCiBkcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX21vZGUuYyB8ICAy
NyAtLS0KIDUgZmlsZXMgY2hhbmdlZCwgNiBpbnNlcnRpb25zKCspLCAzODIgZGVsZXRpb25zKC0p
CiBkZWxldGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9mYi5j
CgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvTWFrZWZpbGUgYi9kcml2ZXJz
L2dwdS9kcm0vbWdhZzIwMC9NYWtlZmlsZQppbmRleCA5OGQyMDQ0MDhiZDAuLjA0YjI4MWJjZjY1
NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvTWFrZWZpbGUKKysrIGIvZHJp
dmVycy9ncHUvZHJtL21nYWcyMDAvTWFrZWZpbGUKQEAgLTEsNSArMSw1IEBACiAjIFNQRFgtTGlj
ZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkKIG1nYWcyMDAteSAgIDo9IG1nYWcyMDBfbWFp
bi5vIG1nYWcyMDBfbW9kZS5vIG1nYWcyMDBfY3Vyc29yLm8gXAotCW1nYWcyMDBfZHJ2Lm8gbWdh
ZzIwMF9mYi5vIG1nYWcyMDBfaTJjLm8gbWdhZzIwMF90dG0ubworCW1nYWcyMDBfZHJ2Lm8gbWdh
ZzIwMF9pMmMubyBtZ2FnMjAwX3R0bS5vCiAKIG9iai0kKENPTkZJR19EUk1fTUdBRzIwMCkgKz0g
bWdhZzIwMC5vCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX2Ry
di5oIGIvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9kcnYuaAppbmRleCAzYWIyN2Yx
MDUzYzEuLjFjOTNmOGRjMDhjNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAv
bWdhZzIwMF9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX2Rydi5o
CkBAIC05OSwxNCArOTksNiBAQAogI2RlZmluZSB0b19tZ2FfZW5jb2Rlcih4KSBjb250YWluZXJf
b2YoeCwgc3RydWN0IG1nYV9lbmNvZGVyLCBiYXNlKQogI2RlZmluZSB0b19tZ2FfY29ubmVjdG9y
KHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3QgbWdhX2Nvbm5lY3RvciwgYmFzZSkKIAotc3RydWN0
IG1nYV9mYmRldiB7Ci0Jc3RydWN0IGRybV9mYl9oZWxwZXIgaGVscGVyOyAvKiBtdXN0IGJlIGZp
cnN0ICovCi0Jdm9pZCAqc3lzcmFtOwotCWludCBzaXplOwotCWludCB4MSwgeTEsIHgyLCB5Mjsg
LyogZGlydHkgcmVjdCAqLwotCXNwaW5sb2NrX3QgZGlydHlfbG9jazsKLX07Ci0KIHN0cnVjdCBt
Z2FfY3J0YyB7CiAJc3RydWN0IGRybV9jcnRjIGJhc2U7CiAJdTggbHV0X3JbMjU2XSwgbHV0X2db
MjU2XSwgbHV0X2JbMjU2XTsKQEAgLTE4MCw3ICsxNzIsNiBAQCBzdHJ1Y3QgbWdhX2RldmljZSB7
CiAJc3RydWN0IG1nYV9tYwkJCW1jOwogCXN0cnVjdCBtZ2FfbW9kZV9pbmZvCQltb2RlX2luZm87
CiAKLQlzdHJ1Y3QgbWdhX2ZiZGV2ICptZmJkZXY7CiAJc3RydWN0IG1nYV9jdXJzb3IgY3Vyc29y
OwogCiAJYm9vbAkJCQlzdXNwZW5kZWQ7CkBAIC0yMDEsMTkgKzE5Miw5IEBAIHN0cnVjdCBtZ2Ff
ZGV2aWNlIHsKIGludCBtZ2FnMjAwX21vZGVzZXRfaW5pdChzdHJ1Y3QgbWdhX2RldmljZSAqbWRl
dik7CiB2b2lkIG1nYWcyMDBfbW9kZXNldF9maW5pKHN0cnVjdCBtZ2FfZGV2aWNlICptZGV2KTsK
IAotCQkJCS8qIG1nYWcyMDBfZmIuYyAqLwotaW50IG1nYWcyMDBfZmJkZXZfaW5pdChzdHJ1Y3Qg
bWdhX2RldmljZSAqbWRldik7Ci12b2lkIG1nYWcyMDBfZmJkZXZfZmluaShzdHJ1Y3QgbWdhX2Rl
dmljZSAqbWRldik7Ci0KIAkJCQkvKiBtZ2FnMjAwX21haW4uYyAqLwogaW50IG1nYWcyMDBfZHJp
dmVyX2xvYWQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdW5zaWduZWQgbG9uZyBmbGFncyk7CiB2
b2lkIG1nYWcyMDBfZHJpdmVyX3VubG9hZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKLWludCBt
Z2FnMjAwX2dlbV9jcmVhdGUoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKLQkJICAgdTMyIHNpemUs
IGJvb2wgaXNrZXJuZWwsCi0JCSAgICAgICBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKipvYmopOwot
aW50IG1nYWcyMDBfZHVtYl9jcmVhdGUoc3RydWN0IGRybV9maWxlICpmaWxlLAotCQkJc3RydWN0
IGRybV9kZXZpY2UgKmRldiwKLQkJCXN0cnVjdCBkcm1fbW9kZV9jcmVhdGVfZHVtYiAqYXJncyk7
CiAKIAkJCQkvKiBtZ2FnMjAwX2kyYy5jICovCiBzdHJ1Y3QgbWdhX2kyY19jaGFuICptZ2FnMjAw
X2kyY19jcmVhdGUoc3RydWN0IGRybV9kZXZpY2UgKmRldik7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX2ZiLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9t
Z2FnMjAwX2ZiLmMKZGVsZXRlZCBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IGM3N2NmMWIzNGM5OC4u
MDAwMDAwMDAwMDAwCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL21nYWcyMDBfZmIuYwor
KysgL2Rldi9udWxsCkBAIC0xLDMwOSArMCwwIEBACi0vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmll
cjogR1BMLTIuMC1vbmx5Ci0vKgotICogQ29weXJpZ2h0IDIwMTAgTWF0dCBUdXJuZXIuCi0gKiBD
b3B5cmlnaHQgMjAxMiBSZWQgSGF0Ci0gKgotICogQXV0aG9yczogTWF0dGhldyBHYXJyZXR0Ci0g
KiAgICAgICAgICBNYXR0IFR1cm5lcgotICogICAgICAgICAgRGF2ZSBBaXJsaWUKLSAqLwotCi0j
aW5jbHVkZSA8bGludXgvbW9kdWxlLmg+Ci0jaW5jbHVkZSA8bGludXgvdm1hbGxvYy5oPgotCi0j
aW5jbHVkZSA8ZHJtL2RybV9jcnRjX2hlbHBlci5oPgotI2luY2x1ZGUgPGRybS9kcm1fZmJfaGVs
cGVyLmg+Ci0jaW5jbHVkZSA8ZHJtL2RybV9mb3VyY2MuaD4KLSNpbmNsdWRlIDxkcm0vZHJtX2dl
bV9mcmFtZWJ1ZmZlcl9oZWxwZXIuaD4KLSNpbmNsdWRlIDxkcm0vZHJtX3V0aWwuaD4KLQotI2lu
Y2x1ZGUgIm1nYWcyMDBfZHJ2LmgiCi0KLXN0YXRpYyB2b2lkIG1nYV9kaXJ0eV91cGRhdGUoc3Ry
dWN0IG1nYV9mYmRldiAqbWZiZGV2LAotCQkJICAgICBpbnQgeCwgaW50IHksIGludCB3aWR0aCwg
aW50IGhlaWdodCkKLXsKLQlpbnQgaTsKLQlzdHJ1Y3QgZHJtX2dlbV92cmFtX29iamVjdCAqZ2Jv
OwotCWludCBzcmNfb2Zmc2V0LCBkc3Rfb2Zmc2V0OwotCWludCByZXQ7Ci0JdTggKmRzdDsKLQli
b29sIHVubWFwID0gZmFsc2U7Ci0JYm9vbCBzdG9yZV9mb3JfbGF0ZXIgPSBmYWxzZTsKLQlpbnQg
eDIsIHkyOwotCXVuc2lnbmVkIGxvbmcgZmxhZ3M7Ci0Jc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAq
ZmIgPSBtZmJkZXYtPmhlbHBlci5mYjsKLQlpbnQgYnBwID0gZmItPmZvcm1hdC0+Y3BwWzBdOwot
Ci0JZ2JvID0gZHJtX2dlbV92cmFtX29mX2dlbShmYi0+b2JqWzBdKTsKLQotCWlmIChkcm1fY2Fu
X3NsZWVwKCkpIHsKLQkJLyogV2UgcGluIHRoZSBCTyBzbyBpdCB3b24ndCBiZSBtb3ZlZCBkdXJp
bmcgdGhlCi0JCSAqIHVwZGF0ZS4gVGhlIGFjdHVhbCBsb2NhdGlvbiwgdmlkZW8gUkFNIG9yIHN5
c3RlbQotCQkgKiBtZW1vcnksIGlzIG5vdCBpbXBvcnRhbnQuCi0JCSAqLwotCQlyZXQgPSBkcm1f
Z2VtX3ZyYW1fcGluKGdibywgMCk7Ci0JCWlmIChyZXQpIHsKLQkJCWlmIChyZXQgIT0gLUVCVVNZ
KQotCQkJCXJldHVybjsKLQkJCXN0b3JlX2Zvcl9sYXRlciA9IHRydWU7Ci0JCX0KLQl9IGVsc2Ug
ewotCQlzdG9yZV9mb3JfbGF0ZXIgPSB0cnVlOwotCX0KLQotCXgyID0geCArIHdpZHRoIC0gMTsK
LQl5MiA9IHkgKyBoZWlnaHQgLSAxOwotCXNwaW5fbG9ja19pcnFzYXZlKCZtZmJkZXYtPmRpcnR5
X2xvY2ssIGZsYWdzKTsKLQotCWlmIChtZmJkZXYtPnkxIDwgeSkKLQkJeSA9IG1mYmRldi0+eTE7
Ci0JaWYgKG1mYmRldi0+eTIgPiB5MikKLQkJeTIgPSBtZmJkZXYtPnkyOwotCWlmIChtZmJkZXYt
PngxIDwgeCkKLQkJeCA9IG1mYmRldi0+eDE7Ci0JaWYgKG1mYmRldi0+eDIgPiB4MikKLQkJeDIg
PSBtZmJkZXYtPngyOwotCi0JaWYgKHN0b3JlX2Zvcl9sYXRlcikgewotCQltZmJkZXYtPngxID0g
eDsKLQkJbWZiZGV2LT54MiA9IHgyOwotCQltZmJkZXYtPnkxID0geTsKLQkJbWZiZGV2LT55MiA9
IHkyOwotCQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZtZmJkZXYtPmRpcnR5X2xvY2ssIGZsYWdz
KTsKLQkJcmV0dXJuOwotCX0KLQotCW1mYmRldi0+eDEgPSBtZmJkZXYtPnkxID0gSU5UX01BWDsK
LQltZmJkZXYtPngyID0gbWZiZGV2LT55MiA9IDA7Ci0Jc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgm
bWZiZGV2LT5kaXJ0eV9sb2NrLCBmbGFncyk7Ci0KLQlkc3QgPSBkcm1fZ2VtX3ZyYW1fa21hcChn
Ym8sIGZhbHNlLCBOVUxMKTsKLQlpZiAoSVNfRVJSKGRzdCkpIHsKLQkJRFJNX0VSUk9SKCJmYWls
ZWQgdG8ga21hcCBmYiB1cGRhdGVzXG4iKTsKLQkJZ290byBvdXQ7Ci0JfSBlbHNlIGlmICghZHN0
KSB7Ci0JCWRzdCA9IGRybV9nZW1fdnJhbV9rbWFwKGdibywgdHJ1ZSwgTlVMTCk7Ci0JCWlmIChJ
U19FUlIoZHN0KSkgewotCQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8ga21hcCBmYiB1cGRhdGVzXG4i
KTsKLQkJCWdvdG8gb3V0OwotCQl9Ci0JCXVubWFwID0gdHJ1ZTsKLQl9Ci0KLQlmb3IgKGkgPSB5
OyBpIDw9IHkyOyBpKyspIHsKLQkJLyogYXNzdW1lIGVxdWFsIHN0cmlkZSBmb3Igbm93ICovCi0J
CXNyY19vZmZzZXQgPSBkc3Rfb2Zmc2V0ID0gaSAqIGZiLT5waXRjaGVzWzBdICsgKHggKiBicHAp
OwotCQltZW1jcHlfdG9pbyhkc3QgKyBkc3Rfb2Zmc2V0LCBtZmJkZXYtPnN5c3JhbSArIHNyY19v
ZmZzZXQsCi0JCQkgICAgKHgyIC0geCArIDEpICogYnBwKTsKLQl9Ci0KLQlpZiAodW5tYXApCi0J
CWRybV9nZW1fdnJhbV9rdW5tYXAoZ2JvKTsKLQotb3V0OgotCWRybV9nZW1fdnJhbV91bnBpbihn
Ym8pOwotfQotCi1zdGF0aWMgdm9pZCBtZ2FfZmlsbHJlY3Qoc3RydWN0IGZiX2luZm8gKmluZm8s
Ci0JCQkgY29uc3Qgc3RydWN0IGZiX2ZpbGxyZWN0ICpyZWN0KQotewotCXN0cnVjdCBtZ2FfZmJk
ZXYgKm1mYmRldiA9IGluZm8tPnBhcjsKLQlkcm1fZmJfaGVscGVyX3N5c19maWxscmVjdChpbmZv
LCByZWN0KTsKLQltZ2FfZGlydHlfdXBkYXRlKG1mYmRldiwgcmVjdC0+ZHgsIHJlY3QtPmR5LCBy
ZWN0LT53aWR0aCwKLQkJCSByZWN0LT5oZWlnaHQpOwotfQotCi1zdGF0aWMgdm9pZCBtZ2FfY29w
eWFyZWEoc3RydWN0IGZiX2luZm8gKmluZm8sCi0JCQkgY29uc3Qgc3RydWN0IGZiX2NvcHlhcmVh
ICphcmVhKQotewotCXN0cnVjdCBtZ2FfZmJkZXYgKm1mYmRldiA9IGluZm8tPnBhcjsKLQlkcm1f
ZmJfaGVscGVyX3N5c19jb3B5YXJlYShpbmZvLCBhcmVhKTsKLQltZ2FfZGlydHlfdXBkYXRlKG1m
YmRldiwgYXJlYS0+ZHgsIGFyZWEtPmR5LCBhcmVhLT53aWR0aCwKLQkJCSBhcmVhLT5oZWlnaHQp
OwotfQotCi1zdGF0aWMgdm9pZCBtZ2FfaW1hZ2VibGl0KHN0cnVjdCBmYl9pbmZvICppbmZvLAot
CQkJICBjb25zdCBzdHJ1Y3QgZmJfaW1hZ2UgKmltYWdlKQotewotCXN0cnVjdCBtZ2FfZmJkZXYg
Km1mYmRldiA9IGluZm8tPnBhcjsKLQlkcm1fZmJfaGVscGVyX3N5c19pbWFnZWJsaXQoaW5mbywg
aW1hZ2UpOwotCW1nYV9kaXJ0eV91cGRhdGUobWZiZGV2LCBpbWFnZS0+ZHgsIGltYWdlLT5keSwg
aW1hZ2UtPndpZHRoLAotCQkJIGltYWdlLT5oZWlnaHQpOwotfQotCi0KLXN0YXRpYyBzdHJ1Y3Qg
ZmJfb3BzIG1nYWcyMDBmYl9vcHMgPSB7Ci0JLm93bmVyID0gVEhJU19NT0RVTEUsCi0JLmZiX2No
ZWNrX3ZhciA9IGRybV9mYl9oZWxwZXJfY2hlY2tfdmFyLAotCS5mYl9zZXRfcGFyID0gZHJtX2Zi
X2hlbHBlcl9zZXRfcGFyLAotCS5mYl9maWxscmVjdCA9IG1nYV9maWxscmVjdCwKLQkuZmJfY29w
eWFyZWEgPSBtZ2FfY29weWFyZWEsCi0JLmZiX2ltYWdlYmxpdCA9IG1nYV9pbWFnZWJsaXQsCi0J
LmZiX3Bhbl9kaXNwbGF5ID0gZHJtX2ZiX2hlbHBlcl9wYW5fZGlzcGxheSwKLQkuZmJfYmxhbmsg
PSBkcm1fZmJfaGVscGVyX2JsYW5rLAotCS5mYl9zZXRjbWFwID0gZHJtX2ZiX2hlbHBlcl9zZXRj
bWFwLAotfTsKLQotc3RhdGljIGludCBtZ2FnMjAwZmJfY3JlYXRlX29iamVjdChzdHJ1Y3QgbWdh
X2ZiZGV2ICphZmJkZXYsCi0JCQkJICAgY29uc3Qgc3RydWN0IGRybV9tb2RlX2ZiX2NtZDIgKm1v
ZGVfY21kLAotCQkJCSAgIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqKmdvYmpfcCkKLXsKLQlzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2ID0gYWZiZGV2LT5oZWxwZXIuZGV2OwotCXUzMiBzaXplOwotCXN0
cnVjdCBkcm1fZ2VtX29iamVjdCAqZ29iajsKLQlpbnQgcmV0ID0gMDsKLQotCXNpemUgPSBtb2Rl
X2NtZC0+cGl0Y2hlc1swXSAqIG1vZGVfY21kLT5oZWlnaHQ7Ci0JcmV0ID0gbWdhZzIwMF9nZW1f
Y3JlYXRlKGRldiwgc2l6ZSwgdHJ1ZSwgJmdvYmopOwotCWlmIChyZXQpCi0JCXJldHVybiByZXQ7
Ci0KLQkqZ29ial9wID0gZ29iajsKLQlyZXR1cm4gcmV0OwotfQotCi1zdGF0aWMgaW50IG1nYWcy
MDBmYl9jcmVhdGUoc3RydWN0IGRybV9mYl9oZWxwZXIgKmhlbHBlciwKLQkJCSAgIHN0cnVjdCBk
cm1fZmJfaGVscGVyX3N1cmZhY2Vfc2l6ZSAqc2l6ZXMpCi17Ci0Jc3RydWN0IG1nYV9mYmRldiAq
bWZiZGV2ID0KLQkJY29udGFpbmVyX29mKGhlbHBlciwgc3RydWN0IG1nYV9mYmRldiwgaGVscGVy
KTsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gbWZiZGV2LT5oZWxwZXIuZGV2OwotCXN0cnVj
dCBkcm1fbW9kZV9mYl9jbWQyIG1vZGVfY21kOwotCXN0cnVjdCBtZ2FfZGV2aWNlICptZGV2ID0g
ZGV2LT5kZXZfcHJpdmF0ZTsKLQlzdHJ1Y3QgZmJfaW5mbyAqaW5mbzsKLQlzdHJ1Y3QgZHJtX2Zy
YW1lYnVmZmVyICpmYjsKLQlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdvYmogPSBOVUxMOwotCWlu
dCByZXQ7Ci0Jdm9pZCAqc3lzcmFtOwotCWludCBzaXplOwotCi0JbW9kZV9jbWQud2lkdGggPSBz
aXplcy0+c3VyZmFjZV93aWR0aDsKLQltb2RlX2NtZC5oZWlnaHQgPSBzaXplcy0+c3VyZmFjZV9o
ZWlnaHQ7Ci0JbW9kZV9jbWQucGl0Y2hlc1swXSA9IG1vZGVfY21kLndpZHRoICogKChzaXplcy0+
c3VyZmFjZV9icHAgKyA3KSAvIDgpOwotCi0JbW9kZV9jbWQucGl4ZWxfZm9ybWF0ID0gZHJtX21v
ZGVfbGVnYWN5X2ZiX2Zvcm1hdChzaXplcy0+c3VyZmFjZV9icHAsCi0JCQkJCQkJICBzaXplcy0+
c3VyZmFjZV9kZXB0aCk7Ci0Jc2l6ZSA9IG1vZGVfY21kLnBpdGNoZXNbMF0gKiBtb2RlX2NtZC5o
ZWlnaHQ7Ci0KLQlyZXQgPSBtZ2FnMjAwZmJfY3JlYXRlX29iamVjdChtZmJkZXYsICZtb2RlX2Nt
ZCwgJmdvYmopOwotCWlmIChyZXQpIHsKLQkJRFJNX0VSUk9SKCJmYWlsZWQgdG8gY3JlYXRlIGZi
Y29uIGJhY2tpbmcgb2JqZWN0ICVkXG4iLCByZXQpOwotCQlyZXR1cm4gcmV0OwotCX0KLQotCXN5
c3JhbSA9IHZtYWxsb2Moc2l6ZSk7Ci0JaWYgKCFzeXNyYW0pIHsKLQkJcmV0ID0gLUVOT01FTTsK
LQkJZ290byBlcnJfZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkOwotCX0KLQotCWluZm8gPSBk
cm1fZmJfaGVscGVyX2FsbG9jX2ZiaShoZWxwZXIpOwotCWlmIChJU19FUlIoaW5mbykpIHsKLQkJ
cmV0ID0gUFRSX0VSUihpbmZvKTsKLQkJZ290byBlcnJfdmZyZWU7Ci0JfQotCi0JZmIgPSBkcm1f
Z2VtX2ZiZGV2X2ZiX2NyZWF0ZShkZXYsIHNpemVzLCAwLCBnb2JqLCBOVUxMKTsKLQlpZiAoSVNf
RVJSKGZiKSkgewotCQlyZXQgPSBQVFJfRVJSKGZiKTsKLQkJZ290byBlcnJfdmZyZWU7Ci0JfQot
Ci0JbWZiZGV2LT5zeXNyYW0gPSBzeXNyYW07Ci0JbWZiZGV2LT5zaXplID0gc2l6ZTsKLQotCS8q
IHNldHVwIGhlbHBlciAqLwotCW1mYmRldi0+aGVscGVyLmZiID0gZmI7Ci0KLQlpbmZvLT5mYm9w
cyA9ICZtZ2FnMjAwZmJfb3BzOwotCi0JLyogc2V0dXAgYXBlcnR1cmUgYmFzZS9zaXplIGZvciB2
ZXNhZmIgdGFrZW92ZXIgKi8KLQlpbmZvLT5hcGVydHVyZXMtPnJhbmdlc1swXS5iYXNlID0gbWRl
di0+ZGV2LT5tb2RlX2NvbmZpZy5mYl9iYXNlOwotCWluZm8tPmFwZXJ0dXJlcy0+cmFuZ2VzWzBd
LnNpemUgPSBtZGV2LT5tYy52cmFtX3NpemU7Ci0KLQlkcm1fZmJfaGVscGVyX2ZpbGxfaW5mbyhp
bmZvLCAmbWZiZGV2LT5oZWxwZXIsIHNpemVzKTsKLQotCWluZm8tPnNjcmVlbl9iYXNlID0gc3lz
cmFtOwotCWluZm8tPnNjcmVlbl9zaXplID0gc2l6ZTsKLQlpbmZvLT5waXhtYXAuZmxhZ3MgPSBG
Ql9QSVhNQVBfU1lTVEVNOwotCi0JRFJNX0RFQlVHX0tNUygiYWxsb2NhdGVkICVkeCVkXG4iLAot
CQkgICAgICBmYi0+d2lkdGgsIGZiLT5oZWlnaHQpOwotCi0JcmV0dXJuIDA7Ci0KLWVycl92ZnJl
ZToKLQl2ZnJlZShzeXNyYW0pOwotZXJyX2RybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZDoKLQlk
cm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQoZ29iaik7Ci0JcmV0dXJuIHJldDsKLX0KLQotc3Rh
dGljIGludCBtZ2FfZmJkZXZfZGVzdHJveShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAotCQkJCXN0
cnVjdCBtZ2FfZmJkZXYgKm1mYmRldikKLXsKLQlkcm1fZmJfaGVscGVyX3VucmVnaXN0ZXJfZmJp
KCZtZmJkZXYtPmhlbHBlcik7Ci0JZHJtX2ZiX2hlbHBlcl9maW5pKCZtZmJkZXYtPmhlbHBlcik7
Ci0JZHJtX2ZyYW1lYnVmZmVyX3B1dChtZmJkZXYtPmhlbHBlci5mYik7Ci0KLQl2ZnJlZShtZmJk
ZXYtPnN5c3JhbSk7Ci0KLQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1f
ZmJfaGVscGVyX2Z1bmNzIG1nYV9mYl9oZWxwZXJfZnVuY3MgPSB7Ci0JLmZiX3Byb2JlID0gbWdh
ZzIwMGZiX2NyZWF0ZSwKLX07Ci0KLWludCBtZ2FnMjAwX2ZiZGV2X2luaXQoc3RydWN0IG1nYV9k
ZXZpY2UgKm1kZXYpCi17Ci0Jc3RydWN0IG1nYV9mYmRldiAqbWZiZGV2OwotCWludCByZXQ7Ci0J
aW50IGJwcF9zZWwgPSAzMjsKLQotCS8qIHByZWZlciAxNmJwcCBvbiBsb3cgZW5kIGdwdXMgd2l0
aCBsaW1pdGVkIFZSQU0gKi8KLQlpZiAoSVNfRzIwMF9TRShtZGV2KSAmJiBtZGV2LT5tYy52cmFt
X3NpemUgPCAoMjA0OCoxMDI0KSkKLQkJYnBwX3NlbCA9IDE2OwotCi0JbWZiZGV2ID0gZGV2bV9r
emFsbG9jKG1kZXYtPmRldi0+ZGV2LCBzaXplb2Yoc3RydWN0IG1nYV9mYmRldiksIEdGUF9LRVJO
RUwpOwotCWlmICghbWZiZGV2KQotCQlyZXR1cm4gLUVOT01FTTsKLQotCW1kZXYtPm1mYmRldiA9
IG1mYmRldjsKLQlzcGluX2xvY2tfaW5pdCgmbWZiZGV2LT5kaXJ0eV9sb2NrKTsKLQotCWRybV9m
Yl9oZWxwZXJfcHJlcGFyZShtZGV2LT5kZXYsICZtZmJkZXYtPmhlbHBlciwgJm1nYV9mYl9oZWxw
ZXJfZnVuY3MpOwotCi0JcmV0ID0gZHJtX2ZiX2hlbHBlcl9pbml0KG1kZXYtPmRldiwgJm1mYmRl
di0+aGVscGVyLAotCQkJCSBNR0FHMjAwRkJfQ09OTl9MSU1JVCk7Ci0JaWYgKHJldCkKLQkJZ290
byBlcnJfZmJfaGVscGVyOwotCi0JcmV0ID0gZHJtX2ZiX2hlbHBlcl9zaW5nbGVfYWRkX2FsbF9j
b25uZWN0b3JzKCZtZmJkZXYtPmhlbHBlcik7Ci0JaWYgKHJldCkKLQkJZ290byBlcnJfZmJfc2V0
dXA7Ci0KLQkvKiBkaXNhYmxlIGFsbCB0aGUgcG9zc2libGUgb3V0cHV0cy9jcnRjcyBiZWZvcmUg
ZW50ZXJpbmcgS01TIG1vZGUgKi8KLQlkcm1faGVscGVyX2Rpc2FibGVfdW51c2VkX2Z1bmN0aW9u
cyhtZGV2LT5kZXYpOwotCi0JcmV0ID0gZHJtX2ZiX2hlbHBlcl9pbml0aWFsX2NvbmZpZygmbWZi
ZGV2LT5oZWxwZXIsIGJwcF9zZWwpOwotCWlmIChyZXQpCi0JCWdvdG8gZXJyX2ZiX3NldHVwOwot
Ci0JcmV0dXJuIDA7Ci0KLWVycl9mYl9zZXR1cDoKLQlkcm1fZmJfaGVscGVyX2ZpbmkoJm1mYmRl
di0+aGVscGVyKTsKLWVycl9mYl9oZWxwZXI6Ci0JbWRldi0+bWZiZGV2ID0gTlVMTDsKLQotCXJl
dHVybiByZXQ7Ci19Ci0KLXZvaWQgbWdhZzIwMF9mYmRldl9maW5pKHN0cnVjdCBtZ2FfZGV2aWNl
ICptZGV2KQotewotCWlmICghbWRldi0+bWZiZGV2KQotCQlyZXR1cm47Ci0KLQltZ2FfZmJkZXZf
ZGVzdHJveShtZGV2LT5kZXYsIG1kZXYtPm1mYmRldik7Ci19CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX21haW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAw
L21nYWcyMDBfbWFpbi5jCmluZGV4IGIxMGY3MjY1YjVjNC4uYTk3NzMzMzRkZWRmIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX21haW4uYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX21haW4uYwpAQCAtMTYyLDcgKzE2Miw3IEBAIGludCBt
Z2FnMjAwX2RyaXZlcl9sb2FkKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHVuc2lnbmVkIGxvbmcg
ZmxhZ3MpCiAJaWYgKElTX0cyMDBfU0UobWRldikgJiYgbWRldi0+bWMudnJhbV9zaXplIDwgKDIw
NDgqMTAyNCkpCiAJCWRldi0+bW9kZV9jb25maWcucHJlZmVycmVkX2RlcHRoID0gMTY7CiAJZWxz
ZQotCQlkZXYtPm1vZGVfY29uZmlnLnByZWZlcnJlZF9kZXB0aCA9IDI0OworCQlkZXYtPm1vZGVf
Y29uZmlnLnByZWZlcnJlZF9kZXB0aCA9IDMyOwogCWRldi0+bW9kZV9jb25maWcucHJlZmVyX3No
YWRvdyA9IDE7CiAKIAlyID0gbWdhZzIwMF9tb2Rlc2V0X2luaXQobWRldik7CkBAIC0xODYsNiAr
MTg2LDEwIEBAIGludCBtZ2FnMjAwX2RyaXZlcl9sb2FkKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYs
IHVuc2lnbmVkIGxvbmcgZmxhZ3MpCiAJfQogCW1kZXYtPmN1cnNvci5waXhlbHNfY3VycmVudCA9
IE5VTEw7CiAKKwlyID0gZHJtX2ZiZGV2X2dlbmVyaWNfc2V0dXAobWRldi0+ZGV2LCAwKTsKKwlp
ZiAocikKKwkJZ290byBlcnJfbW9kZXNldDsKKwogCXJldHVybiAwOwogCiBlcnJfbW9kZXNldDoK
QEAgLTIwNCwzMiArMjA4LDcgQEAgdm9pZCBtZ2FnMjAwX2RyaXZlcl91bmxvYWQoc3RydWN0IGRy
bV9kZXZpY2UgKmRldikKIAlpZiAobWRldiA9PSBOVUxMKQogCQlyZXR1cm47CiAJbWdhZzIwMF9t
b2Rlc2V0X2ZpbmkobWRldik7Ci0JbWdhZzIwMF9mYmRldl9maW5pKG1kZXYpOwogCWRybV9tb2Rl
X2NvbmZpZ19jbGVhbnVwKGRldik7CiAJbWdhZzIwMF9tbV9maW5pKG1kZXYpOwogCWRldi0+ZGV2
X3ByaXZhdGUgPSBOVUxMOwogfQotCi1pbnQgbWdhZzIwMF9nZW1fY3JlYXRlKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsCi0JCSAgIHUzMiBzaXplLCBib29sIGlza2VybmVsLAotCQkgICBzdHJ1Y3Qg
ZHJtX2dlbV9vYmplY3QgKipvYmopCi17Ci0Jc3RydWN0IGRybV9nZW1fdnJhbV9vYmplY3QgKmdi
bzsKLQlpbnQgcmV0OwotCi0JKm9iaiA9IE5VTEw7Ci0KLQlzaXplID0gcm91bmR1cChzaXplLCBQ
QUdFX1NJWkUpOwotCWlmIChzaXplID09IDApCi0JCXJldHVybiAtRUlOVkFMOwotCi0JZ2JvID0g
ZHJtX2dlbV92cmFtX2NyZWF0ZShkZXYsICZkZXYtPnZyYW1fbW0tPmJkZXYsIHNpemUsIDAsIGZh
bHNlKTsKLQlpZiAoSVNfRVJSKGdibykpIHsKLQkJcmV0ID0gUFRSX0VSUihnYm8pOwotCQlpZiAo
cmV0ICE9IC1FUkVTVEFSVFNZUykKLQkJCURSTV9FUlJPUigiZmFpbGVkIHRvIGFsbG9jYXRlIEdF
TSBvYmplY3RcbiIpOwotCQlyZXR1cm4gcmV0OwotCX0KLQkqb2JqID0gJmdiby0+Z2VtOwotCXJl
dHVybiAwOwotfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9t
b2RlLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX21vZGUuYwppbmRleCBhN2Nl
Zjc4ZDQyNmYuLjgyMmYyYTEzNzQ4ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21nYWcy
MDAvbWdhZzIwMF9tb2RlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9t
b2RlLmMKQEAgLTg2MCwxOCArODYwLDEyIEBAIHN0YXRpYyBpbnQgbWdhX2NydGNfZG9fc2V0X2Jh
c2Uoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCQkJCXN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZi
LAogCQkJCWludCB4LCBpbnQgeSwgaW50IGF0b21pYykKIHsKLQlzdHJ1Y3QgbWdhX2RldmljZSAq
bWRldiA9IGNydGMtPmRldi0+ZGV2X3ByaXZhdGU7CiAJc3RydWN0IGRybV9nZW1fdnJhbV9vYmpl
Y3QgKmdibzsKIAlpbnQgcmV0OwogCXM2NCBncHVfYWRkcjsKLQl2b2lkICpiYXNlOwogCiAJaWYg
KCFhdG9taWMgJiYgZmIpIHsKIAkJZ2JvID0gZHJtX2dlbV92cmFtX29mX2dlbShmYi0+b2JqWzBd
KTsKLQotCQkvKiB1bm1hcCBpZiBjb25zb2xlICovCi0JCWlmIChtZGV2LT5tZmJkZXYtPmhlbHBl
ci5mYiA9PSBmYikKLQkJCWRybV9nZW1fdnJhbV9rdW5tYXAoZ2JvKTsKIAkJZHJtX2dlbV92cmFt
X3VucGluKGdibyk7CiAJfQogCkBAIC04ODYsMTUgKzg4MCw2IEBAIHN0YXRpYyBpbnQgbWdhX2Ny
dGNfZG9fc2V0X2Jhc2Uoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCQlnb3RvIGVycl9kcm1fZ2Vt
X3ZyYW1fdW5waW47CiAJfQogCi0JaWYgKG1kZXYtPm1mYmRldi0+aGVscGVyLmZiID09IGNydGMt
PnByaW1hcnktPmZiKSB7Ci0JCS8qIGlmIHB1c2hpbmcgY29uc29sZSBpbiBrbWFwIGl0ICovCi0J
CWJhc2UgPSBkcm1fZ2VtX3ZyYW1fa21hcChnYm8sIHRydWUsIE5VTEwpOwotCQlpZiAoSVNfRVJS
KGJhc2UpKSB7Ci0JCQlyZXQgPSBQVFJfRVJSKGJhc2UpOwotCQkJRFJNX0VSUk9SKCJmYWlsZWQg
dG8ga21hcCBmYmNvblxuIik7Ci0JCX0KLQl9Ci0KIAltZ2Ffc2V0X3N0YXJ0X2FkZHJlc3MoY3J0
YywgKHUzMilncHVfYWRkcik7CiAKIAlyZXR1cm4gMDsKQEAgLTE0MTgsMTQgKzE0MDMsOSBAQCBz
dGF0aWMgdm9pZCBtZ2FfY3J0Y19kaXNhYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKIAlEUk1f
REVCVUdfS01TKCJcbiIpOwogCW1nYV9jcnRjX2RwbXMoY3J0YywgRFJNX01PREVfRFBNU19PRkYp
OwogCWlmIChjcnRjLT5wcmltYXJ5LT5mYikgewotCQlzdHJ1Y3QgbWdhX2RldmljZSAqbWRldiA9
IGNydGMtPmRldi0+ZGV2X3ByaXZhdGU7CiAJCXN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0g
Y3J0Yy0+cHJpbWFyeS0+ZmI7CiAJCXN0cnVjdCBkcm1fZ2VtX3ZyYW1fb2JqZWN0ICpnYm8gPQog
CQkJZHJtX2dlbV92cmFtX29mX2dlbShmYi0+b2JqWzBdKTsKLQotCQkvKiB1bm1hcCBpZiBjb25z
b2xlICovCi0JCWlmIChtZGV2LT5tZmJkZXYtPmhlbHBlci5mYiA9PSBmYikKLQkJCWRybV9nZW1f
dnJhbV9rdW5tYXAoZ2JvKTsKIAkJZHJtX2dlbV92cmFtX3VucGluKGdibyk7CiAJfQogCWNydGMt
PnByaW1hcnktPmZiID0gTlVMTDsKQEAgLTE3MTgsNyArMTY5OCw2IEBAIGludCBtZ2FnMjAwX21v
ZGVzZXRfaW5pdChzdHJ1Y3QgbWdhX2RldmljZSAqbWRldikKIHsKIAlzdHJ1Y3QgZHJtX2VuY29k
ZXIgKmVuY29kZXI7CiAJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKLQlpbnQgcmV0
OwogCiAJbWRldi0+bW9kZV9pbmZvLm1vZGVfY29uZmlnX2luaXRpYWxpemVkID0gdHJ1ZTsKIApA
QCAtMTc0MywxMiArMTcyMiw2IEBAIGludCBtZ2FnMjAwX21vZGVzZXRfaW5pdChzdHJ1Y3QgbWdh
X2RldmljZSAqbWRldikKIAogCWRybV9jb25uZWN0b3JfYXR0YWNoX2VuY29kZXIoY29ubmVjdG9y
LCBlbmNvZGVyKTsKIAotCXJldCA9IG1nYWcyMDBfZmJkZXZfaW5pdChtZGV2KTsKLQlpZiAocmV0
KSB7Ci0JCURSTV9FUlJPUigibWdhX2ZiZGV2X2luaXQgZmFpbGVkXG4iKTsKLQkJcmV0dXJuIHJl
dDsKLQl9Ci0KIAlyZXR1cm4gMDsKIH0KIAotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1k
ZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
