Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 021741FF81
	for <lists+dri-devel@lfdr.de>; Thu, 16 May 2019 08:26:55 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2CC3F891D5;
	Thu, 16 May 2019 06:26:52 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-it1-x144.google.com (mail-it1-x144.google.com
 [IPv6:2607:f8b0:4864:20::144])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4AEF4891D5
 for <dri-devel@lists.freedesktop.org>; Thu, 16 May 2019 06:26:50 +0000 (UTC)
Received: by mail-it1-x144.google.com with SMTP id q65so4297556itg.2
 for <dri-devel@lists.freedesktop.org>; Wed, 15 May 2019 23:26:50 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=9JCiZ2jUar3AO47ng32oIurDcSNBM7ZKzVA1wsOiTd4=;
 b=U1gdrVgfBoS5awW6EX4RjfgsP3wavKFOTpuuLm9YGJtybzjPmjt+64TXzBszd5mXpy
 i0CSwRI0azR7MVZCrxpzrK1Z6ckOv947h+HpuNeToPPY9y7p+lJSZiphyQOff6vbRXy4
 GTp+EHHLK4t0blHnhi5dakLDw3jmVVgm27o16hZdnqYgmOF03DPuE+t/cBVooQtByjLA
 9QWHb6floLEf8yydsdUvA128RS4UFdp7X4ZY08AAZ29WWCyrNfzXEIOJj0w0Zj3xaw2u
 BNCoX02T7txquhrclxjl9DjpPbq8RFhxLulJ2Rq254dcV80KvraKr7mOgmzF/fu0wm/7
 ssyA==
X-Gm-Message-State: APjAAAUiADERgMNrMhhxFWhIBCbV2hyJ4TR4pWRhWbYZ463oFpZAK7QP
 mjtHocLkdbDlaR11I8GBs9djcriKBvmA/kcUAH7sY1rF
X-Google-Smtp-Source: APXvYqwoL3DVR46wtbY3dEDEzmaDi5shKwzFUvnWeYV70FxbveFSCaXApH9k5qMAdrnkv3rX2+2wTl7RZDAdj3f6q9Y=
X-Received: by 2002:a24:f983:: with SMTP id l125mr12068060ith.62.1557988009519; 
 Wed, 15 May 2019 23:26:49 -0700 (PDT)
MIME-Version: 1.0
References: <20190514140515.35566-1-christian.koenig@amd.com>
 <20190514140515.35566-2-christian.koenig@amd.com>
 <20190515085847.GF17751@phenom.ffwll.local>
 <624442e3-0e67-e153-a73b-bd7e9bd92aef@gmail.com>
In-Reply-To: <624442e3-0e67-e153-a73b-bd7e9bd92aef@gmail.com>
From: Daniel Vetter <daniel@ffwll.ch>
Date: Thu, 16 May 2019 08:26:36 +0200
Message-ID: <CAKMK7uE6qYZVNa0cDAgz5hQwUtzv0dBhsPzUGrsBbFdKqKhQVg@mail.gmail.com>
Subject: Re: [PATCH 1/2] dma-buf: start caching of sg_table objects v2
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=9JCiZ2jUar3AO47ng32oIurDcSNBM7ZKzVA1wsOiTd4=;
 b=P8jQimlOdsG10IFnITMsOIjxxqHGDXPsVuZ1qRRM6UHl0gnv3X4sPW/JgGlddhebGA
 miRYyz/70Ay8sTopPev8S+gu845jskUQpOR//KG1EWbdj+csU8zR39u+VxvXs5SmXFJa
 FrwcyVMH286WLhkQCYP64gfXZdLB/4dioHpac=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBNYXkgMTUsIDIwMTkgYXQgMTE6MjUgQU0gQ2hyaXN0aWFuIEvDtm5pZwo8Y2tvZW5p
Zy5sZWljaHR6dW1lcmtlbkBnbWFpbC5jb20+IHdyb3RlOgo+Cj4gQW0gMTUuMDUuMTkgdW0gMTA6
NTggc2NocmllYiBEYW5pZWwgVmV0dGVyOgo+ID4gT24gVHVlLCBNYXkgMTQsIDIwMTkgYXQgMDQ6
MDU6MTRQTSArMDIwMCwgQ2hyaXN0aWFuIEvDtm5pZyB3cm90ZToKPiA+PiBUbyBhbGxvdyBhIHNt
b290aCB0cmFuc2l0aW9uIGZyb20gcGlubmluZyBidWZmZXIgb2JqZWN0cyB0byBkeW5hbWljCj4g
Pj4gaW52YWxpZGF0aW9uIHdlIGZpcnN0IHN0YXJ0IHRvIGNhY2hlIHRoZSBzZ190YWJsZSBmb3Ig
YW4gYXR0YWNobWVudC4KPiA+Pgo+ID4+IHYyOiBrZWVwIGNsb3NlciB0byB0aGUgRFJNIGltcGxl
bWVudGF0aW9uCj4gPj4KPiA+PiBTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJp
c3RpYW4ua29lbmlnQGFtZC5jb20+Cj4gPiBpOTE1IGRvZXNuJ3QgdXNlIHRoZSBwcmltZSBoZWxw
ZXJzLCBzbyB0aGlzIHdvdWxkIGJlIGEgY2hhbmdlIGZvciB1cy4KPgo+IE5vdCBhIHByb2JsZW0g
YXQgYWxsLCBzZWUgYmVsb3cuIEkndmUgYWRkZWQgYW4gY2FjaGVfc2d0X21hcHBpbmcgbWVtYmVy
Cj4gaW50byB0aGUgZG1hX2J1Zl9vcHMgc3RydWN0dXJlLiBPbmx5IHdoZW4gdGhpcyBtZW1iZXIg
aXMgdHJ1ZSB0aGUKPiBmdW5jdGlvbmFsaXR5IGlzIGVuYWJsZWQuCgpIbSByaWdodCBJIG1pc3Nl
ZCB0aGF0LgoKPiBTbyBJJ20ganVzdCBtb3ZpbmcgY29kZSBhcm91bmQgaW4gdGhvc2UgdHdvIHBh
dGNoZXMgYW5kIG5vIGZ1bmN0aW9uYWwKPiBjaGFuZ2UgYXQgYWxsLgoKU3RpbGwgbm90IHN1cmUu
IEknbGwgbG9vayBhdCB5b3VyIGxhdGVzdCBkbWEtYnVmIHNlcmllcyB0byBzZWUgaG93IGl0CmFs
bCBmaXRzIHRvZ2V0aGVyLgotRGFuaWVsCgo+Cj4gUmVnYXJkcywKPiBDaHJpc3RpYW4uCj4KPiA+
ICAgTm90Cj4gPiBzdXJlIHRoYXQgbWF0dGVycy4gU2luY2Ugd2UgY2FuJ3QgdXNlIHRoaXMgYXMg
YW4gZWFzeSB3YXkgb3V0IG9mIHRoZQo+ID4gbG9ja2luZyBwcm9ibGVtIGFyb3VuZCByZXNlcnZh
dGlvbl9vYmplY3QgSSdtIG5vdCBzdXJlIGhvdyB1c2VmdWwgaXQgaXMgdG8KPiA+IG1vdmUgdGhp
cyBhaGVhZC4gQXQgbGVhc3QgdW50aWwgd2UgaGF2ZSBhIGNsZWFyZXIgcGljdHVyZSBvbiBob3cg
d2UgcGxhbgo+ID4gdG8gcm9sbCBvdXQgdGhlIGR5bmFtaWMgZG1hLWJ1ZiBzdHVmZi4gT25jZSB3
ZSBoYXZlIGEgYml0IG1vcmUgY2xhcml0eQo+ID4gdGhlcmUgSSdtIGFsbCBmb3IgbWVyZ2luZyBw
cmVwIHdvcmssIGJ1dCBhcy1pcyBJJ2QgYmUgY2F1dGlvdXMgLi4uIFRoaXMKPiA+IHN0dWZmIGlz
IGEgbG90IG1vcmUgdHJpY2t5IHRoYW4gaXQgc2VlbXMgYXQgZmlyc3QgOi0vCj4gPiAtRGFuaWVs
Cj4gPj4gLS0tCj4gPj4gICBkcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jIHwgMjcgKysrKysrKysr
KysrKysrKysrKysrKysrKy0tCj4gPj4gICBpbmNsdWRlL2xpbnV4L2RtYS1idWYuaCAgIHwgMTMg
KysrKysrKysrKysrKwo+ID4+ICAgMiBmaWxlcyBjaGFuZ2VkLCAzOCBpbnNlcnRpb25zKCspLCAy
IGRlbGV0aW9ucygtKQo+ID4+Cj4gPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEt
YnVmLmMgYi9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jCj4gPj4gaW5kZXggN2M4NTgwMjBkMTRi
Li5hMmQzNGM2YjgwYTUgMTAwNjQ0Cj4gPj4gLS0tIGEvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYu
Ywo+ID4+ICsrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMKPiA+PiBAQCAtNTczLDYgKzU3
Myw3IEBAIHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmRtYV9idWZfYXR0YWNoKHN0cnVjdCBk
bWFfYnVmICpkbWFidWYsCj4gPj4gICAgICBsaXN0X2FkZCgmYXR0YWNoLT5ub2RlLCAmZG1hYnVm
LT5hdHRhY2htZW50cyk7Cj4gPj4KPiA+PiAgICAgIG11dGV4X3VubG9jaygmZG1hYnVmLT5sb2Nr
KTsKPiA+PiArCj4gPj4gICAgICByZXR1cm4gYXR0YWNoOwo+ID4+Cj4gPj4gICBlcnJfYXR0YWNo
Ogo+ID4+IEBAIC01OTUsNiArNTk2LDkgQEAgdm9pZCBkbWFfYnVmX2RldGFjaChzdHJ1Y3QgZG1h
X2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gpCj4gPj4gICAg
ICBpZiAoV0FSTl9PTighZG1hYnVmIHx8ICFhdHRhY2gpKQo+ID4+ICAgICAgICAgICAgICByZXR1
cm47Cj4gPj4KPiA+PiArICAgIGlmIChhdHRhY2gtPnNndCkKPiA+PiArICAgICAgICAgICAgZG1h
YnVmLT5vcHMtPnVubWFwX2RtYV9idWYoYXR0YWNoLCBhdHRhY2gtPnNndCwgYXR0YWNoLT5kaXIp
Owo+ID4+ICsKPiA+PiAgICAgIG11dGV4X2xvY2soJmRtYWJ1Zi0+bG9jayk7Cj4gPj4gICAgICBs
aXN0X2RlbCgmYXR0YWNoLT5ub2RlKTsKPiA+PiAgICAgIGlmIChkbWFidWYtPm9wcy0+ZGV0YWNo
KQo+ID4+IEBAIC02MzAsMTAgKzYzNCwyNyBAQCBzdHJ1Y3Qgc2dfdGFibGUgKmRtYV9idWZfbWFw
X2F0dGFjaG1lbnQoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNoLAo+ID4+ICAgICAg
aWYgKFdBUk5fT04oIWF0dGFjaCB8fCAhYXR0YWNoLT5kbWFidWYpKQo+ID4+ICAgICAgICAgICAg
ICByZXR1cm4gRVJSX1BUUigtRUlOVkFMKTsKPiA+Pgo+ID4+ICsgICAgaWYgKGF0dGFjaC0+c2d0
KSB7Cj4gPj4gKyAgICAgICAgICAgIC8qCj4gPj4gKyAgICAgICAgICAgICAqIFR3byBtYXBwaW5n
cyB3aXRoIGRpZmZlcmVudCBkaXJlY3Rpb25zIGZvciB0aGUgc2FtZQo+ID4+ICsgICAgICAgICAg
ICAgKiBhdHRhY2htZW50IGFyZSBub3QgYWxsb3dlZC4KPiA+PiArICAgICAgICAgICAgICovCj4g
Pj4gKyAgICAgICAgICAgIGlmIChhdHRhY2gtPmRpciAhPSBkaXJlY3Rpb24gJiYKPiA+PiArICAg
ICAgICAgICAgICAgIGF0dGFjaC0+ZGlyICE9IERNQV9CSURJUkVDVElPTkFMKQo+ID4+ICsgICAg
ICAgICAgICAgICAgICAgIHJldHVybiBFUlJfUFRSKC1FQlVTWSk7Cj4gPj4gKwo+ID4+ICsgICAg
ICAgICAgICByZXR1cm4gYXR0YWNoLT5zZ3Q7Cj4gPj4gKyAgICB9Cj4gPj4gKwo+ID4+ICAgICAg
c2dfdGFibGUgPSBhdHRhY2gtPmRtYWJ1Zi0+b3BzLT5tYXBfZG1hX2J1ZihhdHRhY2gsIGRpcmVj
dGlvbik7Cj4gPj4gICAgICBpZiAoIXNnX3RhYmxlKQo+ID4+ICAgICAgICAgICAgICBzZ190YWJs
ZSA9IEVSUl9QVFIoLUVOT01FTSk7Cj4gPj4KPiA+PiArICAgIGlmICghSVNfRVJSKHNnX3RhYmxl
KSAmJiBhdHRhY2gtPmRtYWJ1Zi0+b3BzLT5jYWNoZV9zZ3RfbWFwcGluZykgewo+ID4+ICsgICAg
ICAgICAgICBhdHRhY2gtPnNndCA9IHNnX3RhYmxlOwo+ID4+ICsgICAgICAgICAgICBhdHRhY2gt
PmRpciA9IGRpcmVjdGlvbjsKPiA+PiArICAgIH0KPiA+PiArCj4gPj4gICAgICByZXR1cm4gc2df
dGFibGU7Cj4gPj4gICB9Cj4gPj4gICBFWFBPUlRfU1lNQk9MX0dQTChkbWFfYnVmX21hcF9hdHRh
Y2htZW50KTsKPiA+PiBAQCAtNjU3LDggKzY3OCwxMCBAQCB2b2lkIGRtYV9idWZfdW5tYXBfYXR0
YWNobWVudChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gsCj4gPj4gICAgICBpZiAo
V0FSTl9PTighYXR0YWNoIHx8ICFhdHRhY2gtPmRtYWJ1ZiB8fCAhc2dfdGFibGUpKQo+ID4+ICAg
ICAgICAgICAgICByZXR1cm47Cj4gPj4KPiA+PiAtICAgIGF0dGFjaC0+ZG1hYnVmLT5vcHMtPnVu
bWFwX2RtYV9idWYoYXR0YWNoLCBzZ190YWJsZSwKPiA+PiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24pOwo+ID4+ICsgICAgaWYgKGF0dGFjaC0+
c2d0ID09IHNnX3RhYmxlKQo+ID4+ICsgICAgICAgICAgICByZXR1cm47Cj4gPj4gKwo+ID4+ICsg
ICAgYXR0YWNoLT5kbWFidWYtPm9wcy0+dW5tYXBfZG1hX2J1ZihhdHRhY2gsIHNnX3RhYmxlLCBk
aXJlY3Rpb24pOwo+ID4+ICAgfQo+ID4+ICAgRVhQT1JUX1NZTUJPTF9HUEwoZG1hX2J1Zl91bm1h
cF9hdHRhY2htZW50KTsKPiA+Pgo+ID4+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2RtYS1i
dWYuaCBiL2luY2x1ZGUvbGludXgvZG1hLWJ1Zi5oCj4gPj4gaW5kZXggNTg3MjVmODkwYjViLi40
NWI5NzY3ZTY3ZWMgMTAwNjQ0Cj4gPj4gLS0tIGEvaW5jbHVkZS9saW51eC9kbWEtYnVmLmgKPiA+
PiArKysgYi9pbmNsdWRlL2xpbnV4L2RtYS1idWYuaAo+ID4+IEBAIC01MSw2ICs1MSwxNSBAQCBz
dHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50Owo+ID4+ICAgICogQHZ1bm1hcDogW29wdGlvbmFsXSB1
bm1hcHMgYSB2bWFwIGZyb20gdGhlIGJ1ZmZlcgo+ID4+ICAgICovCj4gPj4gICBzdHJ1Y3QgZG1h
X2J1Zl9vcHMgewo+ID4+ICsgICAgLyoqCj4gPj4gKyAgICAgICogQGNhY2hlX3NndF9tYXBwaW5n
Ogo+ID4+ICsgICAgICAqCj4gPj4gKyAgICAgICogSWYgdHJ1ZSB0aGUgZnJhbWV3b3JrIHdpbGwg
Y2FjaGUgdGhlIGZpcnN0IG1hcHBpbmcgbWFkZSBmb3IgZWFjaAo+ID4+ICsgICAgICAqIGF0dGFj
aG1lbnQuIFRoaXMgYXZvaWRzIGNyZWF0aW5nIG1hcHBpbmdzIGZvciBhdHRhY2htZW50cyBtdWx0
aXBsZQo+ID4+ICsgICAgICAqIHRpbWVzLgo+ID4+ICsgICAgICAqLwo+ID4+ICsgICAgYm9vbCBj
YWNoZV9zZ3RfbWFwcGluZzsKPiA+PiArCj4gPj4gICAgICAvKioKPiA+PiAgICAgICAqIEBhdHRh
Y2g6Cj4gPj4gICAgICAgKgo+ID4+IEBAIC0zMDcsNiArMzE2LDggQEAgc3RydWN0IGRtYV9idWYg
ewo+ID4+ICAgICogQGRtYWJ1ZjogYnVmZmVyIGZvciB0aGlzIGF0dGFjaG1lbnQuCj4gPj4gICAg
KiBAZGV2OiBkZXZpY2UgYXR0YWNoZWQgdG8gdGhlIGJ1ZmZlci4KPiA+PiAgICAqIEBub2RlOiBs
aXN0IG9mIGRtYV9idWZfYXR0YWNobWVudC4KPiA+PiArICogQHNndDogY2FjaGVkIG1hcHBpbmcu
Cj4gPj4gKyAqIEBkaXI6IGRpcmVjdGlvbiBvZiBjYWNoZWQgbWFwcGluZy4KPiA+PiAgICAqIEBw
cml2OiBleHBvcnRlciBzcGVjaWZpYyBhdHRhY2htZW50IGRhdGEuCj4gPj4gICAgKgo+ID4+ICAg
ICogVGhpcyBzdHJ1Y3R1cmUgaG9sZHMgdGhlIGF0dGFjaG1lbnQgaW5mb3JtYXRpb24gYmV0d2Vl
biB0aGUgZG1hX2J1ZiBidWZmZXIKPiA+PiBAQCAtMzIyLDYgKzMzMyw4IEBAIHN0cnVjdCBkbWFf
YnVmX2F0dGFjaG1lbnQgewo+ID4+ICAgICAgc3RydWN0IGRtYV9idWYgKmRtYWJ1ZjsKPiA+PiAg
ICAgIHN0cnVjdCBkZXZpY2UgKmRldjsKPiA+PiAgICAgIHN0cnVjdCBsaXN0X2hlYWQgbm9kZTsK
PiA+PiArICAgIHN0cnVjdCBzZ190YWJsZSAqc2d0Owo+ID4+ICsgICAgZW51bSBkbWFfZGF0YV9k
aXJlY3Rpb24gZGlyOwo+ID4+ICAgICAgdm9pZCAqcHJpdjsKPiA+PiAgIH07Cj4gPj4KPiA+PiAt
LQo+ID4+IDIuMTcuMQo+ID4+Cj4KCgotLQpEYW5pZWwgVmV0dGVyClNvZnR3YXJlIEVuZ2luZWVy
LCBJbnRlbCBDb3Jwb3JhdGlvbgorNDEgKDApIDc5IDM2NSA1NyA0OCAtIGh0dHA6Ly9ibG9nLmZm
d2xsLmNoCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRy
aS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
