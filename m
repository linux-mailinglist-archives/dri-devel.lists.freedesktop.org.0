Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 913392AFED
	for <lists+dri-devel@lfdr.de>; Mon, 27 May 2019 10:19:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C1D9089831;
	Mon, 27 May 2019 08:19:15 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x342.google.com (mail-wm1-x342.google.com
 [IPv6:2a00:1450:4864:20::342])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DA93289791;
 Mon, 27 May 2019 08:19:14 +0000 (UTC)
Received: by mail-wm1-x342.google.com with SMTP id t5so14877215wmh.3;
 Mon, 27 May 2019 01:19:14 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=4VoQ1zIsBrLpc/Iweg3AnxDqnQQ32BWk7DUxP8iFack=;
 b=ocYwLOIuqu6G3r8pkXEreyMkj0VryS8B526M6dQqpECBvUsmHSzVYivVxRXUbXPHAd
 LJag2r+6WdpJAGkp/NBKl7iGXlS8ewLYFrqrZYlpW+T+qic6RQaWYk8xHRz63q8+HkE7
 Heydzzn/7yRTtX7Q2eu6j3GZvcHxDgm5e9EyKrhCQnj89k0OYI+u9zZu1QRLLH44C7YR
 QyfX1kRuNxKpFJOFW4G9CSJDo6eVHGj3y5y9FHqB8QhHx0q1+sk1U1EAFDUD/c464piL
 8aWvmrrBq1Q1bUucyIqLcIQ8D4up0nNSpw2fy0zOU4FIpkQlLf0uTLA5nLy2SfhsSm/I
 VW1g==
X-Gm-Message-State: APjAAAV6Zj5xy9HhD1W7Z7gPP+fQ6ECeQvWIB5IXX7rzgrd65nSI0SlZ
 SgbPTa7LiVrF8lU54iXowCpQHTYg
X-Google-Smtp-Source: APXvYqxAj7R3cd6JOPhNZoFWxIyP6rneBrfg50I65SKdPfA+ycRMrnHgRK2ei6xXj6siX7OTBxgVqw==
X-Received: by 2002:a1c:9c8c:: with SMTP id f134mr9129478wme.95.1558945153256; 
 Mon, 27 May 2019 01:19:13 -0700 (PDT)
Received: from localhost.localdomain
 (cpc91192-cmbg18-2-0-cust374.5-4.cable.virginm.net. [80.6.113.119])
 by smtp.gmail.com with ESMTPSA id a124sm7511876wmh.3.2019.05.27.01.19.12
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Mon, 27 May 2019 01:19:12 -0700 (PDT)
From: Emil Velikov <emil.l.velikov@gmail.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 01/13] drm/amdgpu: introduce and honour DRM_FORCE_AUTH
 workaround
Date: Mon, 27 May 2019 09:17:29 +0100
Message-Id: <20190527081741.14235-1-emil.l.velikov@gmail.com>
X-Mailer: git-send-email 2.21.0
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=4VoQ1zIsBrLpc/Iweg3AnxDqnQQ32BWk7DUxP8iFack=;
 b=oGvE1p0J0Egq3p74gmZugfdomaGEhOCqtbkZ7yfLSq/8b5oxpu5T+mypYxkQDnHSPR
 kh8tzr+Umo20IkdQhIsqX4M80PKgzR20MWNooOPAkke7YLN5d9BLjpHXb9P8JjafuOsW
 niGM3oDOB4G5HSm70e3zMfzgGrrbNtx+YNKJprB0MvOVERmHuqOWItbWzaADpwK/+aD6
 gYZyF2tMGXFjftn9NtZr9EODhOaqDiYcIUylN7W24zPC8mK/HmRohw4SmkPxS0LMNVGm
 YU3Q5oIQriSVHSceWGC/KVnyPehaHXsZPktXOUO+I4u3L8rHv1WfikylAw7aJ4zh5ka4
 tipw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, emil.l.velikov@gmail.com,
 amd-gfx@lists.freedesktop.org, Alex Deucher <alexander.deucher@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogRW1pbCBWZWxpa292IDxlbWlsLnZlbGlrb3ZAY29sbGFib3JhLmNvbT4KCkN1cnJlbnRs
eSBvbmUgY2FuIGNpcmN1bXZlbnQgRFJNX0FVVEgsIHdoZW4gdGhlIGlvY3RsIGlzIGV4cG9zZWQg
dmlhIHRoZQpyZW5kZXIgbm9kZS4gQSBzZWVtaW5nbHkgZGVsaWJlcmF0ZSBkZXNpZ24gZGVjaXNp
b24uCgpIZW5jZSB3ZSBjYW4gZHJvcCB0aGUgRFJNX0FVVEggYWxsIHRvZ2V0aGVyIChkZXRhaWxz
IGluIGZvbGxvdy11cCBwYXRjaCkKeWV0IG5vdCBhbGwgdXNlcnNwYWNlIGNoZWNrcyBpZiBpdCdz
IGF1dGhlbnRpY2F0ZWQsIGJ1dCBpbnN0ZWFkIHVzZXMKdW5jb21tb24gYXNzdW1wdGlvbnMuCgpB
ZnRlciBkYXlzIG9mIGRpZ2dpbmcgdGhyb3VnaCBnaXQgbG9nIGFuZCB0ZXN0aW5nLCBvbmx5IGEg
c2luZ2xlIChhYil1c2UKd2FzIHNwb3R0ZWQgLSB0aGUgTWVzYSBSQURWIGRyaXZlciwgdXNpbmcg
dGhlIEFNREdQVV9JTkZPIGlvY3RsIGFuZAphc3N1bWluZyB0aGF0IGZhaWx1cmUgaW1wbGllcyBs
YWNrIG9mIGF1dGhlbnRpY2F0aW9uLgoKQWZmZWN0ZWQgdmVyc2lvbnMgYXJlOgogLSB0aGUgd2hv
bGUgMTguMi54IHNlcmllcywgd2hpY2ggaXMgRU9MCiAtIHRoZSB3aG9sZSAxOC4zLnggc2VyaWVz
LCB3aGljaCBpcyBFT0wKIC0gdGhlIDE5LjAueCBzZXJpZXMsIHByaW9yIHRvIDE5LjAuNAoKQWRk
IGEgc3BlY2lhbCBxdWlyayBmb3IgdGhhdCBjYXNlLCB0aHVzIHdlIGNhbiBkcm9wIERSTV9BVVRI
IGJpdHMgYXMKbWVudGlvbmVkIGVhcmxpZXIuCgpTaW5jZSBhbGwgdGhlIGFmZmVjdGVkIHVzZXJz
cGFjZSBpcyBFT0wsIHdlIGFsc28gYWRkIGEga2NvbmZpZyBvcHRpb24KdG8gZGlzYWJsZSB0aGlz
IHF1aXJrLgoKVGhlIHdob2xlIGFwcHJvYWNoIGlzIGluc3BpcmVkIGJ5IERSSVZFUl9LTVNfTEVH
QUNZX0NPTlRFWFQKCkNjOiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+
CkNjOiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+CkNjOiBhbWQt
Z2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpDYzogRGF2aWQgQWlybGllIDxhaXJsaWVkQGxpbnV4
LmllPgpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xsLmNoPgpTaWduZWQtb2ZmLWJ5OiBF
bWlsIFZlbGlrb3YgPGVtaWwudmVsaWtvdkBjb2xsYWJvcmEuY29tPgotLS0KIGRyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L0tjb25maWcgICAgICB8IDE2ICsrKysrKysrKysrKysrKysKIGRyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9rbXMuYyB8IDEyICsrKysrKysrKysrLQogZHJp
dmVycy9ncHUvZHJtL2RybV9pb2N0bC5jICAgICAgICAgICAgIHwgIDUgKysrKysKIGluY2x1ZGUv
ZHJtL2RybV9pb2N0bC5oICAgICAgICAgICAgICAgICB8IDE3ICsrKysrKysrKysrKysrKysrCiA0
IGZpbGVzIGNoYW5nZWQsIDQ5IGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvS2NvbmZpZwppbmRleCA5MjIxZTU0ODkwNjkuLmRhNDE1ZjQ0NTE4NyAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvS2NvbmZpZworKysgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9LY29uZmlnCkBAIC00MCw2ICs0MCwyMiBAQCBjb25maWcgRFJN
X0FNREdQVV9HQVJUX0RFQlVHRlMKIAkgIFNlbGVjdGluZyB0aGlzIG9wdGlvbiBjcmVhdGVzIGEg
ZGVidWdmcyBmaWxlIHRvIGluc3BlY3QgdGhlIG1hcHBlZAogCSAgcGFnZXMuIFVzZXMgbW9yZSBt
ZW1vcnkgZm9yIGhvdXNla2VlcGluZywgZW5hYmxlIG9ubHkgZm9yIGRlYnVnZ2luZy4KIAorY29u
ZmlnIERSTV9BTURHUFVfRk9SQ0VfQVVUSAorCWJvb2wgIkZvcmNlIGF1dGhlbnRpY2F0aW9uIGNo
ZWNrIG9uIEFNREdQVV9JTkZPIGlvY3RsIgorCWRlZmF1bHQgeQorCWhlbHAKKwkgIFRoZXJlIHdl
cmUgc29tZSB2ZXJzaW9uIG9mIHRoZSBNZXNhIFJBRFYgZHJpdmVycywgd2hpY2ggcmVsaWVkIG9u
CisJICB0aGUgaW9jdGwgZmFpbGluZywgaWYgdGhlIGNsaWVudCBpcyBub3QgYXV0aGVudGljYXRl
ZC4KKworCSAgTmFtZWx5LCB0aGUgZm9sbG93aW5nIHZlcnNpb25zIGFyZSBhZmZlY3RlZDoKKwkg
ICAgLSB0aGUgd2hvbGUgMTguMi54IHNlcmllcywgd2hpY2ggaXMgRU9MCisJICAgIC0gdGhlIHdo
b2xlIDE4LjMueCBzZXJpZXMsIHdoaWNoIGlzIEVPTAorCSAgICAtIHRoZSAxOS4wLnggc2VyaWVz
LCBwcmlvciB0byAxOS4wLjQKKworCSAgTW9kZXJuIGRpc3RyaWJ1dGlvbnMsIHNob3VsZCBkaXNh
YmxlIHRoaXMuIFRoYXQgd2lsbCBhbGxvdyB2YXJpb3VzCisJICBvdGhlciBjbGllbnRzIHRvIHdv
cmssIHRoYXQgd291bGQgb3RoZXJ3aXNlIHJlcXVpcmUgcm9vdCBwcml2aWxlZ2VzLgorCisKIHNv
dXJjZSAiZHJpdmVycy9ncHUvZHJtL2FtZC9hY3AvS2NvbmZpZyIKIHNvdXJjZSAiZHJpdmVycy9n
cHUvZHJtL2FtZC9kaXNwbGF5L0tjb25maWciCiBzb3VyY2UgImRyaXZlcnMvZ3B1L2RybS9hbWQv
YW1ka2ZkL0tjb25maWciCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfa21zLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfa21zLmMKaW5k
ZXggYjE3ZDA1NDU3MjhlLi5iODA3NjkyOTQ0MGIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9rbXMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfa21zLmMKQEAgLTEyMTQsNyArMTIxNCwxNyBAQCBjb25zdCBzdHJ1Y3QgZHJtX2lv
Y3RsX2Rlc2MgYW1kZ3B1X2lvY3Rsc19rbXNbXSA9IHsKIAlEUk1fSU9DVExfREVGX0RSVihBTURH
UFVfR0VNX01NQVAsIGFtZGdwdV9nZW1fbW1hcF9pb2N0bCwgRFJNX0FVVEh8RFJNX1JFTkRFUl9B
TExPVyksCiAJRFJNX0lPQ1RMX0RFRl9EUlYoQU1ER1BVX0dFTV9XQUlUX0lETEUsIGFtZGdwdV9n
ZW1fd2FpdF9pZGxlX2lvY3RsLCBEUk1fQVVUSHxEUk1fUkVOREVSX0FMTE9XKSwKIAlEUk1fSU9D
VExfREVGX0RSVihBTURHUFVfQ1MsIGFtZGdwdV9jc19pb2N0bCwgRFJNX0FVVEh8RFJNX1JFTkRF
Ul9BTExPVyksCi0JRFJNX0lPQ1RMX0RFRl9EUlYoQU1ER1BVX0lORk8sIGFtZGdwdV9pbmZvX2lv
Y3RsLCBEUk1fQVVUSHxEUk1fUkVOREVSX0FMTE9XKSwKKwkvKiBUaGUgRFJNX0ZPUkNFX0FVVEgg
aXMgZWZmZWN0aXZlbHkgYSB3b3JrYXJvdW5kIGZvciB0aGUgUkFEViBNZXNhIGRyaXZlci4KKwkg
KiBUaGlzIGlzIHJlcXVpcmVkIGZvciBNZXNhOgorCSAqICAtIHRoZSB3aG9sZSAxOC4yLnggc2Vy
aWVzLCB3aGljaCBpcyBFT0wKKwkgKiAgLSB0aGUgd2hvbGUgMTguMy54IHNlcmllcywgd2hpY2gg
aXMgRU9MCisJICogIC0gdGhlIDE5LjAueCBzZXJpZXMsIHByaW9yIHRvIDE5LjAuNAorCSAqLwor
CURSTV9JT0NUTF9ERUZfRFJWKEFNREdQVV9JTkZPLCBhbWRncHVfaW5mb19pb2N0bCwKKyNpZiBk
ZWZpbmVkKERSTV9BTURHUFVfRk9SQ0VfQVVUSCkKKwkJRFJNX0ZPUkNFX0FVVEh8CisjZW5kaWYK
KwkJRFJNX0FVVEh8RFJNX1JFTkRFUl9BTExPVyksCiAJRFJNX0lPQ1RMX0RFRl9EUlYoQU1ER1BV
X1dBSVRfQ1MsIGFtZGdwdV9jc193YWl0X2lvY3RsLCBEUk1fQVVUSHxEUk1fUkVOREVSX0FMTE9X
KSwKIAlEUk1fSU9DVExfREVGX0RSVihBTURHUFVfV0FJVF9GRU5DRVMsIGFtZGdwdV9jc193YWl0
X2ZlbmNlc19pb2N0bCwgRFJNX0FVVEh8RFJNX1JFTkRFUl9BTExPVyksCiAJRFJNX0lPQ1RMX0RF
Rl9EUlYoQU1ER1BVX0dFTV9NRVRBREFUQSwgYW1kZ3B1X2dlbV9tZXRhZGF0YV9pb2N0bCwgRFJN
X0FVVEh8RFJNX1JFTkRFUl9BTExPVyksCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJt
X2lvY3RsLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2lvY3RsLmMKaW5kZXggMjI2M2UzZGRkODIy
Li45ODQxYzAwNzZmMDIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1faW9jdGwuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2lvY3RsLmMKQEAgLTU0NCw2ICs1NDQsMTEgQEAgaW50
IGRybV9pb2N0bF9wZXJtaXQodTMyIGZsYWdzLCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdikK
IAkJICAgICBkcm1faXNfcmVuZGVyX2NsaWVudChmaWxlX3ByaXYpKSkKIAkJcmV0dXJuIC1FQUND
RVM7CiAKKwkvKiBGT1JDRV9BVVRIIGlzIG9ubHkgZm9yIGF1dGhlbnRpY2F0ZWQgb3IgcmVuZGVy
IGNsaWVudCAqLworCWlmICh1bmxpa2VseSgoZmxhZ3MgJiBEUk1fRk9SQ0VfQVVUSCkgJiYgIWRy
bV9pc19yZW5kZXJfY2xpZW50KGZpbGVfcHJpdikgJiYKKwkJICAgICAhZmlsZV9wcml2LT5hdXRo
ZW50aWNhdGVkKSkKKwkJcmV0dXJuIC1FQUNDRVM7CisKIAlyZXR1cm4gMDsKIH0KIEVYUE9SVF9T
WU1CT0woZHJtX2lvY3RsX3Blcm1pdCk7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1faW9j
dGwuaCBiL2luY2x1ZGUvZHJtL2RybV9pb2N0bC5oCmluZGV4IGZhZmI2ZjU5MmM0Yi4uNjA4NGVl
MzIwNDNkIDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS9kcm1faW9jdGwuaAorKysgYi9pbmNsdWRl
L2RybS9kcm1faW9jdGwuaApAQCAtMTI2LDYgKzEyNiwyMyBAQCBlbnVtIGRybV9pb2N0bF9mbGFn
cyB7CiAJICogbm90IHNldCBEUk1fQVVUSCBiZWNhdXNlIHRoZXkgZG8gbm90IHJlcXVpcmUgYXV0
aGVudGljYXRpb24uCiAJICovCiAJRFJNX1JFTkRFUl9BTExPVwk9IEJJVCg1KSwKKwkvKioKKwkg
KiBARFJNX0ZPUkNFX0FVVEg6CisJICoKKwkgKiBBdXRoZW50aWNhdGlvbiBvZiB0aGUgcHJpbWFy
eSBub2RlIGlzIG1hbmRhdG9yeS4gUmVnYXJkbGVzcyB0aGF0IHRoZQorCSAqIHVzZXIgY2FuIHVz
dWFsbHkgY2lyY3VtdmVudCB0aGF0IGJ5IHVzaW5nIHRoZSByZW5kZXIgbm9kZSB3aXRoIGV4YWN0
CisJICogc2FtZSBpb2N0bC4KKwkgKgorCSAqIE5vdGU6IHRoaXMgaXMgZWZmZWN0aXZlbHkgYSB3
b3JrYXJvdW5kIGZvciBBTURHUFUgQU1ER1BVX0lORk8gaW9jdGwKKwkgKiBhbmQgdGhlIFJBRFYg
TWVzYSBkcml2ZXIuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIE1lc2E6CisJICogIC0gdGhlIHdob2xl
IDE4LjIueCBzZXJpZXMsIHdoaWNoIGlzIEVPTAorCSAqICAtIHRoZSB3aG9sZSAxOC4zLnggc2Vy
aWVzLCB3aGljaCBpcyBFT0wKKwkgKiAgLSB0aGUgMTkuMC54IHNlcmllcywgcHJpb3IgdG8gMTku
MC40CisJICoKKwkgKiBOb3RlOiBsYXRlciBwYXRjaCB3aWxsIGVmZmVjdGl2ZWx5IGRyb3AgdGhl
IERSTV9BVVRIIGZvciBpb2N0bHMKKwkgKiBhbm5vdGF0ZWQgYXMgRFJNX0FVVEggfCBEUk1fUkVO
REVSX0FMTE9XLgorCSAqLworCURSTV9GT1JDRV9BVVRIICAgICAgICAgID0gQklUKDYpLAogfTsK
IAogLyoqCi0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2Ry
aS1kZXZlbA==
