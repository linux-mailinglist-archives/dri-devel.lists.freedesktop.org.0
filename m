Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7E4BF109A06
	for <lists+dri-devel@lfdr.de>; Tue, 26 Nov 2019 09:14:59 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0298C6E22B;
	Tue, 26 Nov 2019 08:14:54 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from alexa-out-blr-02.qualcomm.com (alexa-out-blr-02.qualcomm.com
 [103.229.18.198])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A96AC6E171;
 Mon, 25 Nov 2019 12:00:04 +0000 (UTC)
Received: from ironmsg02-blr.qualcomm.com ([10.86.208.131])
 by alexa-out-blr-02.qualcomm.com with ESMTP/TLS/AES256-SHA;
 25 Nov 2019 17:29:57 +0530
IronPort-SDR: pi22IRXwrAIKIYeKm7iRITqJezZV2qWBi1H+7Ep94IKGx5T2jPBpIx9uKO/zE/A0qFmoVpu8nr
 wnC1+YVJk0QfryPnA3ss+vCHAZduQv/E2ORnrWwUjoS1VsM2c/ohhA+isR7HlXooq/0UWApVbS
 jOvx2UEA9YF34AJORjwcRxfD2lbU3aqvBr1kRP/lX0aANoXd7uLZVkpM9oEmcLgpvGhjW31PTv
 OruwFjx6Z8mFJc+JvUxlmAtTijeU2UCjjZVcXVjWaYKgUSe1EbAxWIBLUO7XC4y1ZwP3vmWO1D
 lYNQvjhwx/81+WrzYbgv/vFd
Received: from kalyant-linux.qualcomm.com ([10.204.66.210])
 by ironmsg02-blr.qualcomm.com with ESMTP; 25 Nov 2019 17:29:41 +0530
Received: by kalyant-linux.qualcomm.com (Postfix, from userid 94428)
 id 139644366; Mon, 25 Nov 2019 17:29:41 +0530 (IST)
From: Kalyan Thota <kalyan_t@codeaurora.org>
To: dri-devel@lists.freedesktop.org, linux-arm-msm@vger.kernel.org,
 freedreno@lists.freedesktop.org, devicetree@vger.kernel.org
Subject: [PATCH 3/4] msm:disp:dpu1: setup display datapath for SC7180 target
Date: Mon, 25 Nov 2019 17:29:28 +0530
Message-Id: <1574683169-19342-4-git-send-email-kalyan_t@codeaurora.org>
X-Mailer: git-send-email 1.9.1
In-Reply-To: <1574683169-19342-1-git-send-email-kalyan_t@codeaurora.org>
References: <1574683169-19342-1-git-send-email-kalyan_t@codeaurora.org>
X-Mailman-Approved-At: Tue, 26 Nov 2019 08:14:07 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dhar@codeaurora.org, travitej@codeaurora.org, linux-kernel@vger.kernel.org,
 seanpaul@chromium.org, Kalyan Thota <kalyan_t@codeaurora.org>,
 hoegsberg@chromium.org, chandanu@codeaurora.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIGNoYW5nZXMgdG8gc2V0dXAgZGlzcGxheSBkYXRhcGF0aCBvbiBTQzcxODAgdGFyZ2V0LgoK
Q2hhbmdlcyBpbiB2MToKIC0gQWRkIGNoYW5nZXMgdG8gc3VwcG9ydCBjdGxfYWN0aXZlIG9uIFND
NzE4MCB0YXJnZXQuCiAtIFdoaWxlIHNlbGVjdGluZyB0aGUgbnVtYmVyIG9mIG1peGVycyBpbiB0
aGUgdG9wb2xvZ3kKICAgY29uc2lkZXIgdGhlIGludGVyZmFjZSB3aWR0aC4KCkNoYW5nZXMgaW4g
djI6CiAtIFNwYXduIHRvcG9sb2d5IG1peGVyIHNlbGVjdGlvbiBpbnRvIHNlcGFyYXRlIHBhdGNo
IChSb2IgQ2xhcmspLgogLSBBZGQgY28tZGV2ZWxvcGVkLWJ5IHRhZ3MgaW4gdGhlIGNvbW1pdCBt
c2cgKFN0ZXBoZW4gQm95ZCkuCgpDaGFuZ2VzIGluIHYzOgogLSBGaXgga2VybmVsIGNoZWNrcGF0
Y2ggZXJyb3JzIGluIHYyLgoKVGhpcyBwYXRjaCBoYXMgZGVwZW5kZW5jeSBvbiB0aGUgYmVsb3cg
c2VyaWVzCgpodHRwczovL3BhdGNod29yay5rZXJuZWwub3JnL3BhdGNoLzExMjUzNzQ3LwoKQ28t
ZGV2ZWxvcGVkLWJ5OiBTaHViaGFzaHJlZSBEaGFyIDxkaGFyQGNvZGVhdXJvcmEub3JnPgpTaWdu
ZWQtb2ZmLWJ5OiBTaHViaGFzaHJlZSBEaGFyIDxkaGFyQGNvZGVhdXJvcmEub3JnPgpDby1kZXZl
bG9wZWQtYnk6IFJhdml0ZWphIFRhbWF0YW0gPHRyYXZpdGVqQGNvZGVhdXJvcmEub3JnPgpTaWdu
ZWQtb2ZmLWJ5OiBSYXZpdGVqYSBUYW1hdGFtIDx0cmF2aXRlakBjb2RlYXVyb3JhLm9yZz4KU2ln
bmVkLW9mZi1ieTogS2FseWFuIFRob3RhIDxrYWx5YW5fdEBjb2RlYXVyb3JhLm9yZz4KLS0tCiAu
Li4vZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyX3BoeXNfdmlkLmMgICB8IDIxICsr
KysrLQogZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2NhdGFsb2cuYyAgICAg
fCAgMSArCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfY3RsLmMgICAgICAg
ICB8IDg0ICsrKysrKysrKysrKysrKysrKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9k
cHUxL2RwdV9od19jdGwuaCAgICAgICAgIHwgMjQgKysrKysrKwogZHJpdmVycy9ncHUvZHJtL21z
bS9kaXNwL2RwdTEvZHB1X2h3X2ludGYuYyAgICAgICAgfCAyOCArKysrKysrKwogZHJpdmVycy9n
cHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2ludGYuaCAgICAgICAgfCAgNiArKwogNiBmaWxl
cyBjaGFuZ2VkLCAxNTkgaW5zZXJ0aW9ucygrKSwgNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX3ZpZC5jIGIv
ZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2VuY29kZXJfcGh5c192aWQuYwppbmRl
eCBiOWM4NGZiLi44Y2M4YWQxMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNw
L2RwdTEvZHB1X2VuY29kZXJfcGh5c192aWQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rp
c3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX3ZpZC5jCkBAIC0yODAsNiArMjgwLDE0IEBAIHN0YXRp
YyB2b2lkIGRwdV9lbmNvZGVyX3BoeXNfdmlkX3NldHVwX3RpbWluZ19lbmdpbmUoCiAJcGh5c19l
bmMtPmh3X2ludGYtPm9wcy5zZXR1cF90aW1pbmdfZ2VuKHBoeXNfZW5jLT5od19pbnRmLAogCQkJ
JnRpbWluZ19wYXJhbXMsIGZtdCk7CiAJcGh5c19lbmMtPmh3X2N0bC0+b3BzLnNldHVwX2ludGZf
Y2ZnKHBoeXNfZW5jLT5od19jdGwsICZpbnRmX2NmZyk7CisKKwkvKiBzZXR1cCB3aGljaCBwcCBi
bGsgd2lsbCBjb25uZWN0IHRvIHRoaXMgaW50ZiAqLworCWlmIChwaHlzX2VuYy0+aHdfaW50Zi0+
b3BzLmJpbmRfcGluZ3BvbmdfYmxrKQorCQlwaHlzX2VuYy0+aHdfaW50Zi0+b3BzLmJpbmRfcGlu
Z3BvbmdfYmxrKAorCQkJCXBoeXNfZW5jLT5od19pbnRmLAorCQkJCXRydWUsCisJCQkJcGh5c19l
bmMtPmh3X3BwLT5pZHgpOworCiAJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZShwaHlzX2VuYy0+ZW5j
X3NwaW5sb2NrLCBsb2NrX2ZsYWdzKTsKIAogCXByb2dyYW1tYWJsZV9mZXRjaF9jb25maWcocGh5
c19lbmMsICZ0aW1pbmdfcGFyYW1zKTsKQEAgLTQzNSw2ICs0NDMsNyBAQCBzdGF0aWMgdm9pZCBk
cHVfZW5jb2Rlcl9waHlzX3ZpZF9lbmFibGUoc3RydWN0IGRwdV9lbmNvZGVyX3BoeXMgKnBoeXNf
ZW5jKQogewogCXN0cnVjdCBkcHVfaHdfY3RsICpjdGw7CiAJdTMyIGZsdXNoX21hc2sgPSAwOwor
CXUzMiBpbnRmX2ZsdXNoX21hc2sgPSAwOwogCiAJY3RsID0gcGh5c19lbmMtPmh3X2N0bDsKIApA
QCAtNDU5LDEwICs0NjgsMTggQEAgc3RhdGljIHZvaWQgZHB1X2VuY29kZXJfcGh5c192aWRfZW5h
YmxlKHN0cnVjdCBkcHVfZW5jb2Rlcl9waHlzICpwaHlzX2VuYykKIAljdGwtPm9wcy5nZXRfYml0
bWFza19pbnRmKGN0bCwgJmZsdXNoX21hc2ssIHBoeXNfZW5jLT5od19pbnRmLT5pZHgpOwogCWN0
bC0+b3BzLnVwZGF0ZV9wZW5kaW5nX2ZsdXNoKGN0bCwgZmx1c2hfbWFzayk7CiAKKwlpZiAoY3Rs
LT5vcHMuZ2V0X2JpdG1hc2tfYWN0aXZlX2ludGYpCisJCWN0bC0+b3BzLmdldF9iaXRtYXNrX2Fj
dGl2ZV9pbnRmKGN0bCwgJmludGZfZmx1c2hfbWFzaywKKwkJCXBoeXNfZW5jLT5od19pbnRmLT5p
ZHgpOworCisJaWYgKGN0bC0+b3BzLnVwZGF0ZV9wZW5kaW5nX2ludGZfZmx1c2gpCisJCWN0bC0+
b3BzLnVwZGF0ZV9wZW5kaW5nX2ludGZfZmx1c2goY3RsLCBpbnRmX2ZsdXNoX21hc2spOworCiBz
a2lwX2ZsdXNoOgogCURQVV9ERUJVR19WSURFTkMocGh5c19lbmMsCi0JCQkgInVwZGF0ZSBwZW5k
aW5nIGZsdXNoIGN0bCAlZCBmbHVzaF9tYXNrICV4XG4iLAotCQkJIGN0bC0+aWR4IC0gQ1RMXzAs
IGZsdXNoX21hc2spOworCQkidXBkYXRlIHBlbmRpbmcgZmx1c2ggY3RsICVkIGZsdXNoX21hc2sg
MCV4IGludGZfbWFzayAweCV4XG4iLAorCQljdGwtPmlkeCAtIENUTF8wLCBmbHVzaF9tYXNrLCBp
bnRmX2ZsdXNoX21hc2spOworCiAKIAkvKiBjdGxfZmx1c2ggJiB0aW1pbmcgZW5naW5lIGVuYWJs
ZSB3aWxsIGJlIHRyaWdnZXJlZCBieSBmcmFtZXdvcmsgKi8KIAlpZiAocGh5c19lbmMtPmVuYWJs
ZV9zdGF0ZSA9PSBEUFVfRU5DX0RJU0FCTEVEKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L21zbS9kaXNwL2RwdTEvZHB1X2h3X2NhdGFsb2cuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlz
cC9kcHUxL2RwdV9od19jYXRhbG9nLmMKaW5kZXggMWNmNDUwOS4uMGVlMmI2YyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2NhdGFsb2cuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfY2F0YWxvZy5jCkBAIC0zNzQsNiAr
Mzc0LDcgQEAKIAl7XAogCS5uYW1lID0gX25hbWUsIC5pZCA9IF9pZCwgXAogCS5iYXNlID0gX2Jh
c2UsIC5sZW4gPSAweDI4MCwgXAorCS5mZWF0dXJlcyA9IEJJVChEUFVfQ1RMX0FDVElWRV9DRkcp
LCBcCiAJLnR5cGUgPSBfdHlwZSwgXAogCS5jb250cm9sbGVyX2lkID0gX2N0cmxfaWQsIFwKIAku
cHJvZ19mZXRjaF9saW5lc193b3JzdF9jYXNlID0gMjQgXApkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2N0bC5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9k
aXNwL2RwdTEvZHB1X2h3X2N0bC5jCmluZGV4IDE3OWU4ZDUuLjJjZTRiNWEgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jdGwuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfY3RsLmMKQEAgLTIyLDExICsyMiwxNSBAQAog
I2RlZmluZSAgIENUTF9QUkVQQVJFICAgICAgICAgICAgICAgICAgIDB4MGQwCiAjZGVmaW5lICAg
Q1RMX1NXX1JFU0VUICAgICAgICAgICAgICAgICAgMHgwMzAKICNkZWZpbmUgICBDVExfTEFZRVJf
RVhUTl9PRkZTRVQgICAgICAgICAweDQwCisjZGVmaW5lICAgQ1RMX0lOVEZfQUNUSVZFICAgICAg
ICAgICAgICAgMHgwRjQKKyNkZWZpbmUgICBDVExfSU5URl9GTFVTSCAgICAgICAgICAgICAgICAw
eDExMAorI2RlZmluZSAgIENUTF9JTlRGX01BU1RFUiAgICAgICAgICAgICAgIDB4MTM0CiAKICNk
ZWZpbmUgQ1RMX01JWEVSX0JPUkRFUl9PVVQgICAgICAgICAgICBCSVQoMjQpCiAjZGVmaW5lIENU
TF9GTFVTSF9NQVNLX0NUTCAgICAgICAgICAgICAgQklUKDE3KQogCiAjZGVmaW5lIERQVV9SRUdf
UkVTRVRfVElNRU9VVF9VUyAgICAgICAgMjAwMAorI2RlZmluZSAgSU5URl9JRFggICAgICAgMzEK
IAogc3RhdGljIHN0cnVjdCBkcHVfY3RsX2NmZyAqX2N0bF9vZmZzZXQoZW51bSBkcHVfY3RsIGN0
bCwKIAkJc3RydWN0IGRwdV9tZHNzX2NmZyAqbSwKQEAgLTEwMCwxMSArMTA0LDI3IEBAIHN0YXRp
YyBpbmxpbmUgdm9pZCBkcHVfaHdfY3RsX3VwZGF0ZV9wZW5kaW5nX2ZsdXNoKHN0cnVjdCBkcHVf
aHdfY3RsICpjdHgsCiAJY3R4LT5wZW5kaW5nX2ZsdXNoX21hc2sgfD0gZmx1c2hiaXRzOwogfQog
CitzdGF0aWMgaW5saW5lIHZvaWQgZHB1X2h3X2N0bF91cGRhdGVfcGVuZGluZ19pbnRmX2ZsdXNo
KHN0cnVjdCBkcHVfaHdfY3RsICpjdHgsCisJCXUzMiBmbHVzaGJpdHMpCit7CisJY3R4LT5wZW5k
aW5nX2ludGZfZmx1c2hfbWFzayB8PSBmbHVzaGJpdHM7Cit9CisKIHN0YXRpYyB1MzIgZHB1X2h3
X2N0bF9nZXRfcGVuZGluZ19mbHVzaChzdHJ1Y3QgZHB1X2h3X2N0bCAqY3R4KQogewogCXJldHVy
biBjdHgtPnBlbmRpbmdfZmx1c2hfbWFzazsKIH0KIAorc3RhdGljIGlubGluZSB2b2lkIGRwdV9o
d19jdGxfdHJpZ2dlcl9mbHVzaF92MShzdHJ1Y3QgZHB1X2h3X2N0bCAqY3R4KQoreworCisJaWYg
KGN0eC0+cGVuZGluZ19mbHVzaF9tYXNrICYgQklUKElOVEZfSURYKSkKKwkJRFBVX1JFR19XUklU
RSgmY3R4LT5odywgQ1RMX0lOVEZfRkxVU0gsCisJCQkJY3R4LT5wZW5kaW5nX2ludGZfZmx1c2hf
bWFzayk7CisKKwlEUFVfUkVHX1dSSVRFKCZjdHgtPmh3LCBDVExfRkxVU0gsIGN0eC0+cGVuZGlu
Z19mbHVzaF9tYXNrKTsKK30KKwogc3RhdGljIGlubGluZSB2b2lkIGRwdV9od19jdGxfdHJpZ2dl
cl9mbHVzaChzdHJ1Y3QgZHB1X2h3X2N0bCAqY3R4KQogewogCXRyYWNlX2RwdV9od19jdGxfdHJp
Z2dlcl9wZW5kaW5nX2ZsdXNoKGN0eC0+cGVuZGluZ19mbHVzaF9tYXNrLApAQCAtMjIyLDYgKzI0
MiwzNiBAQCBzdGF0aWMgaW50IGRwdV9od19jdGxfZ2V0X2JpdG1hc2tfaW50ZihzdHJ1Y3QgZHB1
X2h3X2N0bCAqY3R4LAogCXJldHVybiAwOwogfQogCitzdGF0aWMgaW50IGRwdV9od19jdGxfZ2V0
X2JpdG1hc2tfaW50Zl92MShzdHJ1Y3QgZHB1X2h3X2N0bCAqY3R4LAorCQl1MzIgKmZsdXNoYml0
cywgZW51bSBkcHVfaW50ZiBpbnRmKQoreworCXN3aXRjaCAoaW50ZikgeworCWNhc2UgSU5URl8w
OgorCWNhc2UgSU5URl8xOgorCQkqZmx1c2hiaXRzIHw9IEJJVCgzMSk7CisJCWJyZWFrOworCWRl
ZmF1bHQ6CisJCXJldHVybiAwOworCX0KKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBkcHVf
aHdfY3RsX2FjdGl2ZV9nZXRfYml0bWFza19pbnRmKHN0cnVjdCBkcHVfaHdfY3RsICpjdHgsCisJ
CXUzMiAqZmx1c2hiaXRzLCBlbnVtIGRwdV9pbnRmIGludGYpCit7CisJc3dpdGNoIChpbnRmKSB7
CisJY2FzZSBJTlRGXzA6CisJCSpmbHVzaGJpdHMgfD0gQklUKDApOworCQlicmVhazsKKwljYXNl
IElOVEZfMToKKwkJKmZsdXNoYml0cyB8PSBCSVQoMSk7CisJCWJyZWFrOworCWRlZmF1bHQ6CisJ
CXJldHVybiAwOworCX0KKwlyZXR1cm4gMDsKK30KKwogc3RhdGljIHUzMiBkcHVfaHdfY3RsX3Bv
bGxfcmVzZXRfc3RhdHVzKHN0cnVjdCBkcHVfaHdfY3RsICpjdHgsIHUzMiB0aW1lb3V0X3VzKQog
ewogCXN0cnVjdCBkcHVfaHdfYmxrX3JlZ19tYXAgKmMgPSAmY3R4LT5odzsKQEAgLTQyMiw2ICs0
NzIsMjQgQEAgc3RhdGljIHZvaWQgZHB1X2h3X2N0bF9zZXR1cF9ibGVuZHN0YWdlKHN0cnVjdCBk
cHVfaHdfY3RsICpjdHgsCiAJRFBVX1JFR19XUklURShjLCBDVExfTEFZRVJfRVhUMyhsbSksIG1p
eGVyY2ZnX2V4dDMpOwogfQogCisKK3N0YXRpYyB2b2lkIGRwdV9od19jdGxfaW50Zl9jZmdfdjEo
c3RydWN0IGRwdV9od19jdGwgKmN0eCwKKwkJc3RydWN0IGRwdV9od19pbnRmX2NmZyAqY2ZnKQor
eworCXN0cnVjdCBkcHVfaHdfYmxrX3JlZ19tYXAgKmMgPSAmY3R4LT5odzsKKwl1MzIgaW50Zl9h
Y3RpdmUgPSAwOworCXUzMiBtb2RlX3NlbCA9IDA7CisKKwlpZiAoY2ZnLT5pbnRmX21vZGVfc2Vs
ID09IERQVV9DVExfTU9ERV9TRUxfQ01EKQorCQltb2RlX3NlbCB8PSBCSVQoMTcpOworCisJaW50
Zl9hY3RpdmUgPSBEUFVfUkVHX1JFQUQoYywgQ1RMX0lOVEZfQUNUSVZFKTsKKwlpbnRmX2FjdGl2
ZSB8PSBCSVQoY2ZnLT5pbnRmIC0gSU5URl8wKTsKKworCURQVV9SRUdfV1JJVEUoYywgQ1RMX1RP
UCwgbW9kZV9zZWwpOworCURQVV9SRUdfV1JJVEUoYywgQ1RMX0lOVEZfQUNUSVZFLCBpbnRmX2Fj
dGl2ZSk7Cit9CisKIHN0YXRpYyB2b2lkIGRwdV9od19jdGxfaW50Zl9jZmcoc3RydWN0IGRwdV9o
d19jdGwgKmN0eCwKIAkJc3RydWN0IGRwdV9od19pbnRmX2NmZyAqY2ZnKQogewpAQCAtNDU1LDIx
ICs1MjMsMzEgQEAgc3RhdGljIHZvaWQgZHB1X2h3X2N0bF9pbnRmX2NmZyhzdHJ1Y3QgZHB1X2h3
X2N0bCAqY3R4LAogc3RhdGljIHZvaWQgX3NldHVwX2N0bF9vcHMoc3RydWN0IGRwdV9od19jdGxf
b3BzICpvcHMsCiAJCXVuc2lnbmVkIGxvbmcgY2FwKQogeworCWlmIChjYXAgJiBCSVQoRFBVX0NU
TF9BQ1RJVkVfQ0ZHKSkgeworCQlvcHMtPnRyaWdnZXJfZmx1c2ggPSBkcHVfaHdfY3RsX3RyaWdn
ZXJfZmx1c2hfdjE7CisJCW9wcy0+c2V0dXBfaW50Zl9jZmcgPSBkcHVfaHdfY3RsX2ludGZfY2Zn
X3YxOworCQlvcHMtPmdldF9iaXRtYXNrX2ludGYgPSBkcHVfaHdfY3RsX2dldF9iaXRtYXNrX2lu
dGZfdjE7CisJCW9wcy0+Z2V0X2JpdG1hc2tfYWN0aXZlX2ludGYgPQorCQkJZHB1X2h3X2N0bF9h
Y3RpdmVfZ2V0X2JpdG1hc2tfaW50ZjsKKwkJb3BzLT51cGRhdGVfcGVuZGluZ19pbnRmX2ZsdXNo
ID0KKwkJCWRwdV9od19jdGxfdXBkYXRlX3BlbmRpbmdfaW50Zl9mbHVzaDsKKwl9IGVsc2Ugewor
CQlvcHMtPnRyaWdnZXJfZmx1c2ggPSBkcHVfaHdfY3RsX3RyaWdnZXJfZmx1c2g7CisJCW9wcy0+
c2V0dXBfaW50Zl9jZmcgPSBkcHVfaHdfY3RsX2ludGZfY2ZnOworCQlvcHMtPmdldF9iaXRtYXNr
X2ludGYgPSBkcHVfaHdfY3RsX2dldF9iaXRtYXNrX2ludGY7CisJfQogCW9wcy0+Y2xlYXJfcGVu
ZGluZ19mbHVzaCA9IGRwdV9od19jdGxfY2xlYXJfcGVuZGluZ19mbHVzaDsKIAlvcHMtPnVwZGF0
ZV9wZW5kaW5nX2ZsdXNoID0gZHB1X2h3X2N0bF91cGRhdGVfcGVuZGluZ19mbHVzaDsKIAlvcHMt
PmdldF9wZW5kaW5nX2ZsdXNoID0gZHB1X2h3X2N0bF9nZXRfcGVuZGluZ19mbHVzaDsKLQlvcHMt
PnRyaWdnZXJfZmx1c2ggPSBkcHVfaHdfY3RsX3RyaWdnZXJfZmx1c2g7CiAJb3BzLT5nZXRfZmx1
c2hfcmVnaXN0ZXIgPSBkcHVfaHdfY3RsX2dldF9mbHVzaF9yZWdpc3RlcjsKIAlvcHMtPnRyaWdn
ZXJfc3RhcnQgPSBkcHVfaHdfY3RsX3RyaWdnZXJfc3RhcnQ7CiAJb3BzLT50cmlnZ2VyX3BlbmRp
bmcgPSBkcHVfaHdfY3RsX3RyaWdnZXJfcGVuZGluZzsKLQlvcHMtPnNldHVwX2ludGZfY2ZnID0g
ZHB1X2h3X2N0bF9pbnRmX2NmZzsKIAlvcHMtPnJlc2V0ID0gZHB1X2h3X2N0bF9yZXNldF9jb250
cm9sOwogCW9wcy0+d2FpdF9yZXNldF9zdGF0dXMgPSBkcHVfaHdfY3RsX3dhaXRfcmVzZXRfc3Rh
dHVzOwogCW9wcy0+Y2xlYXJfYWxsX2JsZW5kc3RhZ2VzID0gZHB1X2h3X2N0bF9jbGVhcl9hbGxf
YmxlbmRzdGFnZXM7CiAJb3BzLT5zZXR1cF9ibGVuZHN0YWdlID0gZHB1X2h3X2N0bF9zZXR1cF9i
bGVuZHN0YWdlOwogCW9wcy0+Z2V0X2JpdG1hc2tfc3NwcCA9IGRwdV9od19jdGxfZ2V0X2JpdG1h
c2tfc3NwcDsKIAlvcHMtPmdldF9iaXRtYXNrX21peGVyID0gZHB1X2h3X2N0bF9nZXRfYml0bWFz
a19taXhlcjsKLQlvcHMtPmdldF9iaXRtYXNrX2ludGYgPSBkcHVfaHdfY3RsX2dldF9iaXRtYXNr
X2ludGY7CiB9OwogCiBzdGF0aWMgc3RydWN0IGRwdV9od19ibGtfb3BzIGRwdV9od19vcHM7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfY3RsLmggYi9k
cml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfY3RsLmgKaW5kZXggZDNhZTkzOS4u
MWUzOTczYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3
X2N0bC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jdGwuaApA
QCAtOTEsNiArOTEsMTUgQEAgc3RydWN0IGRwdV9od19jdGxfb3BzIHsKIAkJdTMyIGZsdXNoYml0
cyk7CiAKIAkvKioKKwkgKiBPUiBpbiB0aGUgZ2l2ZW4gZmx1c2hiaXRzIHRvIHRoZSBjYWNoZWQg
cGVuZGluZ19pbnRmX2ZsdXNoX21hc2sKKwkgKiBObyBlZmZlY3Qgb24gaGFyZHdhcmUKKwkgKiBA
Y3R4ICAgICAgIDogY3RsIHBhdGggY3R4IHBvaW50ZXIKKwkgKiBAZmx1c2hiaXRzIDogbW9kdWxl
IGZsdXNobWFzaworCSAqLworCXZvaWQgKCp1cGRhdGVfcGVuZGluZ19pbnRmX2ZsdXNoKShzdHJ1
Y3QgZHB1X2h3X2N0bCAqY3R4LAorCQl1MzIgZmx1c2hiaXRzKTsKKworCS8qKgogCSAqIFdyaXRl
IHRoZSB2YWx1ZSBvZiB0aGUgcGVuZGluZ19mbHVzaF9tYXNrIHRvIGhhcmR3YXJlCiAJICogQGN0
eCAgICAgICA6IGN0bCBwYXRoIGN0eCBwb2ludGVyCiAJICovCkBAIC0xMzAsMTEgKzEzOSwyNCBA
QCBzdHJ1Y3QgZHB1X2h3X2N0bF9vcHMgewogCXVpbnQzMl90ICgqZ2V0X2JpdG1hc2tfbWl4ZXIp
KHN0cnVjdCBkcHVfaHdfY3RsICpjdHgsCiAJCWVudW0gZHB1X2xtIGJsayk7CiAKKwkvKioKKwkg
KiBRdWVyeSB0aGUgdmFsdWUgb2YgdGhlIGludGYgZmx1c2ggbWFzaworCSAqIE5vIGVmZmVjdCBv
biBoYXJkd2FyZQorCSAqIEBjdHggICAgICAgOiBjdGwgcGF0aCBjdHggcG9pbnRlcgorCSAqLwog
CWludCAoKmdldF9iaXRtYXNrX2ludGYpKHN0cnVjdCBkcHVfaHdfY3RsICpjdHgsCiAJCXUzMiAq
Zmx1c2hiaXRzLAogCQllbnVtIGRwdV9pbnRmIGJsayk7CiAKIAkvKioKKwkgKiBRdWVyeSB0aGUg
dmFsdWUgb2YgdGhlIGludGYgYWN0aXZlIGZsdXNoIG1hc2sKKwkgKiBObyBlZmZlY3Qgb24gaGFy
ZHdhcmUKKwkgKiBAY3R4ICAgICAgIDogY3RsIHBhdGggY3R4IHBvaW50ZXIKKwkgKi8KKwlpbnQg
KCpnZXRfYml0bWFza19hY3RpdmVfaW50Zikoc3RydWN0IGRwdV9od19jdGwgKmN0eCwKKwkJdTMy
ICpmbHVzaGJpdHMsIGVudW0gZHB1X2ludGYgYmxrKTsKKworCS8qKgogCSAqIFNldCBhbGwgYmxl
bmQgc3RhZ2VzIHRvIGRpc2FibGVkCiAJICogQGN0eCAgICAgICA6IGN0bCBwYXRoIGN0eCBwb2lu
dGVyCiAJICovCkBAIC0xNTksNiArMTgxLDcgQEAgc3RydWN0IGRwdV9od19jdGxfb3BzIHsKICAq
IEBtaXhlcl9jb3VudDogbnVtYmVyIG9mIG1peGVycwogICogQG1peGVyX2h3X2NhcHM6IG1peGVy
IGhhcmR3YXJlIGNhcGFiaWxpdGllcwogICogQHBlbmRpbmdfZmx1c2hfbWFzazogc3RvcmFnZSBm
b3IgcGVuZGluZyBjdGxfZmx1c2ggbWFuYWdlZCB2aWEgb3BzCisgKiBAcGVuZGluZ19pbnRmX2Zs
dXNoX21hc2s6IHBlbmRpbmcgSU5URiBmbHVzaAogICogQG9wczogb3BlcmF0aW9uIGxpc3QKICAq
Lwogc3RydWN0IGRwdV9od19jdGwgewpAQCAtMTcxLDYgKzE5NCw3IEBAIHN0cnVjdCBkcHVfaHdf
Y3RsIHsKIAlpbnQgbWl4ZXJfY291bnQ7CiAJY29uc3Qgc3RydWN0IGRwdV9sbV9jZmcgKm1peGVy
X2h3X2NhcHM7CiAJdTMyIHBlbmRpbmdfZmx1c2hfbWFzazsKKwl1MzIgcGVuZGluZ19pbnRmX2Zs
dXNoX21hc2s7CiAKIAkvKiBvcHMgKi8KIAlzdHJ1Y3QgZHB1X2h3X2N0bF9vcHMgb3BzOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2ludGYuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19pbnRmLmMKaW5kZXggZGNkODdjZC4u
ZWZmNWU2YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3
X2ludGYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfaW50Zi5j
CkBAIC01Niw2ICs1Niw4IEBACiAjZGVmaW5lICAgSU5URl9GUkFNRV9DT1VOVCAgICAgICAgICAg
ICAgMHgwQUMKICNkZWZpbmUgICBJTlRGX0xJTkVfQ09VTlQgICAgICAgICAgICAgICAweDBCMAog
CisjZGVmaW5lICAgSU5URl9NVVggICAgICAgICAgICAgICAgICAgICAgMHgyNUMKKwogc3RhdGlj
IHN0cnVjdCBkcHVfaW50Zl9jZmcgKl9pbnRmX29mZnNldChlbnVtIGRwdV9pbnRmIGludGYsCiAJ
CXN0cnVjdCBkcHVfbWRzc19jZmcgKm0sCiAJCXZvaWQgX19pb21lbSAqYWRkciwKQEAgLTIxOCw2
ICsyMjAsMzAgQEAgc3RhdGljIHZvaWQgZHB1X2h3X2ludGZfc2V0dXBfcHJnX2ZldGNoKAogCURQ
VV9SRUdfV1JJVEUoYywgSU5URl9DT05GSUcsIGZldGNoX2VuYWJsZSk7CiB9CiAKK3N0YXRpYyB2
b2lkIGRwdV9od19pbnRmX2JpbmRfcGluZ3BvbmdfYmxrKAorCQlzdHJ1Y3QgZHB1X2h3X2ludGYg
KmludGYsCisJCWJvb2wgZW5hYmxlLAorCQljb25zdCBlbnVtIGRwdV9waW5ncG9uZyBwcCkKK3sK
KwlzdHJ1Y3QgZHB1X2h3X2Jsa19yZWdfbWFwICpjOworCXUzMiBtdXhfY2ZnOworCisJaWYgKCFp
bnRmKQorCQlyZXR1cm47CisKKwljID0gJmludGYtPmh3OworCisJbXV4X2NmZyA9IERQVV9SRUdf
UkVBRChjLCBJTlRGX01VWCk7CisJbXV4X2NmZyAmPSB+MHhmOworCisJaWYgKGVuYWJsZSkKKwkJ
bXV4X2NmZyB8PSAocHAgLSBQSU5HUE9OR18wKSAmIDB4NzsKKwllbHNlCisJCW11eF9jZmcgfD0g
MHhmOworCisJRFBVX1JFR19XUklURShjLCBJTlRGX01VWCwgbXV4X2NmZyk7Cit9CisKIHN0YXRp
YyB2b2lkIGRwdV9od19pbnRmX2dldF9zdGF0dXMoCiAJCXN0cnVjdCBkcHVfaHdfaW50ZiAqaW50
ZiwKIAkJc3RydWN0IGludGZfc3RhdHVzICpzKQpAQCAtMjU0LDYgKzI4MCw4IEBAIHN0YXRpYyB2
b2lkIF9zZXR1cF9pbnRmX29wcyhzdHJ1Y3QgZHB1X2h3X2ludGZfb3BzICpvcHMsCiAJb3BzLT5n
ZXRfc3RhdHVzID0gZHB1X2h3X2ludGZfZ2V0X3N0YXR1czsKIAlvcHMtPmVuYWJsZV90aW1pbmcg
PSBkcHVfaHdfaW50Zl9lbmFibGVfdGltaW5nX2VuZ2luZTsKIAlvcHMtPmdldF9saW5lX2NvdW50
ID0gZHB1X2h3X2ludGZfZ2V0X2xpbmVfY291bnQ7CisJaWYgKGNhcCAmIEJJVChEUFVfQ1RMX0FD
VElWRV9DRkcpKQorCQlvcHMtPmJpbmRfcGluZ3BvbmdfYmxrID0gZHB1X2h3X2ludGZfYmluZF9w
aW5ncG9uZ19ibGs7CiB9CiAKIHN0YXRpYyBzdHJ1Y3QgZHB1X2h3X2Jsa19vcHMgZHB1X2h3X29w
czsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19pbnRm
LmggYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfaW50Zi5oCmluZGV4IGIw
M2FjYzIuLmExZTBlZjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUx
L2RwdV9od19pbnRmLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3
X2ludGYuaApAQCAtNTIsNiArNTIsOCBAQCBzdHJ1Y3QgaW50Zl9zdGF0dXMgewogICogQCBlbmFi
bGVfdGltaW5nOiBlbmFibGUvZGlzYWJsZSB0aW1pbmcgZW5naW5lCiAgKiBAIGdldF9zdGF0dXM6
IHJldHVybnMgaWYgdGltaW5nIGVuZ2luZSBpcyBlbmFibGVkIG9yIG5vdAogICogQCBnZXRfbGlu
ZV9jb3VudDogcmVhZHMgY3VycmVudCB2ZXJ0aWNhbCBsaW5lIGNvdW50ZXIKKyAqIEBiaW5kX3Bp
bmdwb25nX2JsazogZW5hYmxlL2Rpc2FibGUgdGhlIGNvbm5lY3Rpb24gd2l0aCBwaW5ncG9uZyB3
aGljaCB3aWxsCisgKiAgICAgICAgICAgICAgICAgICAgIGZlZWQgcGl4ZWxzIHRvIHRoaXMgaW50
ZXJmYWNlCiAgKi8KIHN0cnVjdCBkcHVfaHdfaW50Zl9vcHMgewogCXZvaWQgKCpzZXR1cF90aW1p
bmdfZ2VuKShzdHJ1Y3QgZHB1X2h3X2ludGYgKmludGYsCkBAIC02OCw2ICs3MCwxMCBAQCBzdHJ1
Y3QgZHB1X2h3X2ludGZfb3BzIHsKIAkJCXN0cnVjdCBpbnRmX3N0YXR1cyAqc3RhdHVzKTsKIAog
CXUzMiAoKmdldF9saW5lX2NvdW50KShzdHJ1Y3QgZHB1X2h3X2ludGYgKmludGYpOworCisJdm9p
ZCAoKmJpbmRfcGluZ3BvbmdfYmxrKShzdHJ1Y3QgZHB1X2h3X2ludGYgKmludGYsCisJCQlib29s
IGVuYWJsZSwKKwkJCWNvbnN0IGVudW0gZHB1X3Bpbmdwb25nIHBwKTsKIH07CiAKIHN0cnVjdCBk
cHVfaHdfaW50ZiB7Ci0tIAoxLjkuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZHJpLWRldmVs
