Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BE9BB329D1
	for <lists+dri-devel@lfdr.de>; Mon,  3 Jun 2019 09:40:56 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 02150892BD;
	Mon,  3 Jun 2019 07:40:44 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from crapouillou.net (outils.crapouillou.net [89.234.176.41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8C06E893D1
 for <dri-devel@lists.freedesktop.org>; Sun,  2 Jun 2019 16:48:59 +0000 (UTC)
From: Paul Cercueil <paul@crapouillou.net>
To: Thierry Reding <thierry.reding@gmail.com>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>
Subject: [PATCH 2/2] drm/panel: Add Novatek NT39016 panel support
Date: Sun,  2 Jun 2019 18:48:44 +0200
Message-Id: <20190602164844.15659-2-paul@crapouillou.net>
In-Reply-To: <20190602164844.15659-1-paul@crapouillou.net>
References: <20190602164844.15659-1-paul@crapouillou.net>
MIME-Version: 1.0
X-Mailman-Approved-At: Mon, 03 Jun 2019 07:40:43 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=crapouillou.net; 
 s=mail; t=1559494137; h=from:from:sender:reply-to:subject:subject:date:date:
 message-id:message-id:to:to:cc:cc:mime-version:mime-version:
 content-type:content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=Yoh79A9vOKy8F2QhbB5uW3qHOnplpZ9XXBdJu3msis4=;
 b=TPZAiC74+YgwvHGWstQsM+BTuiDwhTpD1T7KZIRLcFthfY+xXaxganzzsQuFct9Y+3L5q/
 rRQNud34jcf+JV2XEZI5sPJDRCS6jNAFV9LdnubNlUbQpO0JcboJVzlyapvoqcjsx6u86q
 DUij//nI52I6NLQYYuFqoO82okakEtw=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, Paul Cercueil <paul@crapouillou.net>,
 od@zcrc.me, sam@ravnborg.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIHN1cHBvcnQgZm9yIGRpc3BsYXkgcGFuZWxzIGJ1aWx0IGFyb3VuZCB0aGUgTm92YXRlayBO
VDM5MDE2IGRpc3BsYXkKY29udHJvbGxlciwgYXMgZm91bmQgb24gZS5nLiB0aGUgS2luZyBEaXNw
bGF5IEtEMDM1RzYtNTROVCAyNC1iaXQKMzIweDI0MCAzLjUiIExDRCBwYW5lbCB3aGljaCBlcXVp
cHMgdGhlIEdDVyBaZXJvIG9wZW4tc291cmNlIGhhbmRoZWxkCmdhbWluZyBjb25zb2xlLgoKU2ln
bmVkLW9mZi1ieTogUGF1bCBDZXJjdWVpbCA8cGF1bEBjcmFwb3VpbGxvdS5uZXQ+Ci0tLQogZHJp
dmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcgICAgICAgICAgICAgICAgIHwgICA5ICsKIGRyaXZl
cnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZSAgICAgICAgICAgICAgICB8ICAgMSArCiBkcml2ZXJz
L2dwdS9kcm0vcGFuZWwvcGFuZWwtbm92YXRlay1udDM5MDE2LmMgfCAzNjggKysrKysrKysrKysr
KysrKysrCiAzIGZpbGVzIGNoYW5nZWQsIDM3OCBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAx
MDA2NDQgZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLW5vdmF0ZWstbnQzOTAxNi5jCgpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcgYi9kcml2ZXJzL2dwdS9kcm0v
cGFuZWwvS2NvbmZpZwppbmRleCBlMjgxZmM1NDQ3NDIuLjEwYjQxMWI1MDdjYyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcKKysrIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmVsL0tjb25maWcKQEAgLTExMSw2ICsxMTEsMTUgQEAgY29uZmlnIERSTV9QQU5FTF9MR19MRzQ1
NzMKIAkgIFNheSBZIGhlcmUgaWYgeW91IHdhbnQgdG8gZW5hYmxlIHN1cHBvcnQgZm9yIExHNDU3
MyBSR0IgcGFuZWwuCiAJICBUbyBjb21waWxlIHRoaXMgZHJpdmVyIGFzIGEgbW9kdWxlLCBjaG9v
c2UgTSBoZXJlLgogCitjb25maWcgRFJNX1BBTkVMX05PVkFURUtfTlQzOTAxNgorCXRyaXN0YXRl
ICJOb3ZhdGVrIE5UMzkwMTYgUkdCL1NQSSBwYW5lbCIKKwlkZXBlbmRzIG9uIE9GICYmIFNQSQor
CWRlcGVuZHMgb24gQkFDS0xJR0hUX0NMQVNTX0RFVklDRQorCXNlbGVjdCBSRUdNQVBfU1BJCisJ
aGVscAorCSAgU2F5IFkgaGVyZSBpZiB5b3Ugd2FudCB0byBlbmFibGUgc3VwcG9ydCBmb3IgdGhl
IHBhbmVscyBidWlsdAorCSAgYXJvdW5kIHRoZSBOb3ZhdGVrIE5UMzkwMTYgZGlzcGxheSBjb250
cm9sbGVyLgorCiBjb25maWcgRFJNX1BBTkVMX09MSU1FWF9MQ0RfT0xJTlVYSU5PCiAJdHJpc3Rh
dGUgIk9saW1leCBMQ0QtT0xpbnVYaW5vIHBhbmVsIgogCWRlcGVuZHMgb24gT0YKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9wYW5l
bC9NYWtlZmlsZQppbmRleCA3OGUzZGMzNzZiZGQuLmMyYzQ3ZmM5OTM0MyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5l
bC9NYWtlZmlsZQpAQCAtOSw2ICs5LDcgQEAgb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9JTk5PTFVY
X1AwNzlaQ0EpICs9IHBhbmVsLWlubm9sdXgtcDA3OXpjYS5vCiBvYmotJChDT05GSUdfRFJNX1BB
TkVMX0pESV9MVDA3ME1FMDUwMDApICs9IHBhbmVsLWpkaS1sdDA3MG1lMDUwMDAubwogb2JqLSQo
Q09ORklHX0RSTV9QQU5FTF9LSU5HRElTUExBWV9LRDA5N0QwNCkgKz0gcGFuZWwta2luZ2Rpc3Bs
YXkta2QwOTdkMDQubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9MR19MRzQ1NzMpICs9IHBhbmVs
LWxnLWxnNDU3My5vCitvYmotJChDT05GSUdfRFJNX1BBTkVMX05PVkFURUtfTlQzOTAxNikgKz0g
cGFuZWwtbm92YXRlay1udDM5MDE2Lm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfT0xJTUVYX0xD
RF9PTElOVVhJTk8pICs9IHBhbmVsLW9saW1leC1sY2Qtb2xpbnV4aW5vLm8KIG9iai0kKENPTkZJ
R19EUk1fUEFORUxfT1JJU0VURUNIX09UTTgwMDlBKSArPSBwYW5lbC1vcmlzZXRlY2gtb3RtODAw
OWEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9QQU5BU09OSUNfVlZYMTBGMDM0TjAwKSArPSBw
YW5lbC1wYW5hc29uaWMtdnZ4MTBmMDM0bjAwLm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9wYW5lbC9wYW5lbC1ub3ZhdGVrLW50MzkwMTYuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9w
YW5lbC1ub3ZhdGVrLW50MzkwMTYuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAw
MDAwMDAuLjI3MzhkMTQ1ZDQ1MgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9w
YW5lbC9wYW5lbC1ub3ZhdGVrLW50MzkwMTYuYwpAQCAtMCwwICsxLDM2OCBAQAorLy8gU1BEWC1M
aWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKKy8qCisgKiBOb3ZhdGVrIE5UMzkwMTYgVEZUIExD
RCBwYW5lbCBkcml2ZXIKKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMTcsIE1hYXJ0ZW4gdGVyIEh1
dXJuZSA8bWFhcnRlbkB0cmVld2Fsa2VyLm9yZz4KKyAqIENvcHlyaWdodCAoQykgMjAxOSwgUGF1
bCBDZXJjdWVpbCA8cGF1bEBjcmFwb3VpbGxvdS5uZXQ+CisgKi8KKworI2luY2x1ZGUgPGRybS9k
cm1fbW9kZXMuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX3BhbmVsLmg+CisjaW5jbHVkZSA8bGludXgv
YmFja2xpZ2h0Lmg+CisjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KKyNpbmNsdWRlIDxsaW51eC9k
ZXZpY2UuaD4KKyNpbmNsdWRlIDxsaW51eC9ncGlvL2NvbnN1bWVyLmg+CisjaW5jbHVkZSA8bGlu
dXgvbW9kdWxlLmg+CisjaW5jbHVkZSA8bGludXgvb2YuaD4KKyNpbmNsdWRlIDxsaW51eC9vZl9k
ZXZpY2UuaD4KKyNpbmNsdWRlIDxsaW51eC9yZWdtYXAuaD4KKyNpbmNsdWRlIDxsaW51eC9yZWd1
bGF0b3IvY29uc3VtZXIuaD4KKyNpbmNsdWRlIDxsaW51eC9zcGkvc3BpLmg+CisjaW5jbHVkZSA8
dWFwaS9saW51eC9tZWRpYS1idXMtZm9ybWF0Lmg+CisKKworZW51bSBudDM5MDE2X3JlZ3Mgewor
CU5UMzkwMTZfUkVHX1NZU1RFTSwKKwlOVDM5MDE2X1JFR19USU1JTkcsCisJTlQzOTAxNl9SRUdf
T1AsCisJTlQzOTAxNl9SRUdfREFUQV9JTiwKKwlOVDM5MDE2X1JFR19TUkNfVElNSU5HX0RFTEFZ
LAorCU5UMzkwMTZfUkVHX0dBVEVfVElNSU5HX0RFTEFZLAorCU5UMzkwMTZfUkVHX1JFU0VSVkVE
LAorCU5UMzkwMTZfUkVHX0lOSVRJQUxfRlVOQywKKwlOVDM5MDE2X1JFR19DT05UUkFTVCwKKwlO
VDM5MDE2X1JFR19CUklHSFRORVNTLAorCU5UMzkwMTZfUkVHX0hVRV9TQVRVUkFUSU9OLAorCU5U
MzkwMTZfUkVHX1JCX1NVQkNPTlRSQVNULAorCU5UMzkwMTZfUkVHX1JfU1VCQlJJR0hUTkVTUywK
KwlOVDM5MDE2X1JFR19CX1NVQkJSSUdIVE5FU1MsCisJTlQzOTAxNl9SRUdfVkNPTURDLAorCU5U
MzkwMTZfUkVHX1ZDT01BQywKKwlOVDM5MDE2X1JFR19WR0FNMiwKKwlOVDM5MDE2X1JFR19WR0FN
MzQsCisJTlQzOTAxNl9SRUdfVkdBTTU2LAorCU5UMzkwMTZfUkVHX1ZDT01EQ19UUklNID0gMHgx
ZSwKKwlOVDM5MDE2X1JFR19ESVNQTEFZX01PREUgPSAweDIwLAorfTsKKworc3RydWN0IG50Mzkw
MTZfcGFuZWxfaW5mbyB7CisJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgZGlzcGxheV9tb2RlOwor
CXUxNiB3aWR0aF9tbSwgaGVpZ2h0X21tOworCXUzMiBidXNfZm9ybWF0LCBidXNfZmxhZ3M7Cit9
OworCitzdHJ1Y3QgbnQzOTAxNiB7CisJc3RydWN0IGRybV9wYW5lbCBkcm1fcGFuZWw7CisJc3Ry
dWN0IGRldmljZSAqZGV2OworCXN0cnVjdCByZWdtYXAgKm1hcDsKKwlzdHJ1Y3QgcmVndWxhdG9y
ICpzdXBwbHk7CisJY29uc3Qgc3RydWN0IG50MzkwMTZfcGFuZWxfaW5mbyAqcGFuZWxfaW5mbzsK
KworCXN0cnVjdCBncGlvX2Rlc2MgKnJlc2V0X2dwaW87CisKKwlzdHJ1Y3QgYmFja2xpZ2h0X2Rl
dmljZSAqYmFja2xpZ2h0OworfTsKKworc3RhdGljIGlubGluZSBzdHJ1Y3QgbnQzOTAxNiAqdG9f
bnQzOTAxNihzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlyZXR1cm4gY29udGFpbmVyX29m
KHBhbmVsLCBzdHJ1Y3QgbnQzOTAxNiwgZHJtX3BhbmVsKTsKK30KKworI2RlZmluZSBSVihSRUcs
IFZBTCkgeyAucmVnID0gKFJFRyksIC5kZWYgPSAoVkFMKSwgLmRlbGF5X3VzID0gMiB9CitzdGF0
aWMgY29uc3Qgc3RydWN0IHJlZ19zZXF1ZW5jZSBudDM5MDE2X3BhbmVsX3JlZ3NbXSA9IHsKKwlS
VihOVDM5MDE2X1JFR19TWVNURU0sIDB4MDQpLAorCVJWKE5UMzkwMTZfUkVHX1RJTUlORywgMHgw
MCksCisJUlYoTlQzOTAxNl9SRUdfT1AsIDB4MDMpLAorCVJWKE5UMzkwMTZfUkVHX0RBVEFfSU4s
IDB4Q0MpLAorCVJWKE5UMzkwMTZfUkVHX1NSQ19USU1JTkdfREVMQVksIDB4NDYpLAorCVJWKE5U
MzkwMTZfUkVHX0dBVEVfVElNSU5HX0RFTEFZLCAweDA1KSwKKwlSVihOVDM5MDE2X1JFR19SRVNF
UlZFRCwgMHgwMCksCisJUlYoTlQzOTAxNl9SRUdfSU5JVElBTF9GVU5DLCAweDAwKSwKKwlSVihO
VDM5MDE2X1JFR19DT05UUkFTVCwgMHgwOCksCisJUlYoTlQzOTAxNl9SRUdfQlJJR0hUTkVTUywg
MHg0MCksCisJUlYoTlQzOTAxNl9SRUdfSFVFX1NBVFVSQVRJT04sIDB4ODgpLAorCVJWKE5UMzkw
MTZfUkVHX1JCX1NVQkNPTlRSQVNULCAweDg4KSwKKwlSVihOVDM5MDE2X1JFR19SX1NVQkJSSUdI
VE5FU1MsIDB4MjApLAorCVJWKE5UMzkwMTZfUkVHX0JfU1VCQlJJR0hUTkVTUywgMHgyMCksCisJ
UlYoTlQzOTAxNl9SRUdfVkNPTURDLCAweDY3KSwKKwlSVihOVDM5MDE2X1JFR19WQ09NQUMsIDB4
QTQpLAorCVJWKE5UMzkwMTZfUkVHX1ZHQU0yLCAweDA0KSwKKwlSVihOVDM5MDE2X1JFR19WR0FN
MzQsIDB4MjQpLAorCVJWKE5UMzkwMTZfUkVHX1ZHQU01NiwgMHgyNCksCisJUlYoTlQzOTAxNl9S
RUdfRElTUExBWV9NT0RFLCAweDAwKSwKK307CisjdW5kZWYgUlYKKworc3RhdGljIGNvbnN0IHN0
cnVjdCByZWdtYXBfcmFuZ2UgbnQzOTAxNl9yZWdtYXBfbm9fcmFuZ2VzW10gPSB7CisJcmVnbWFw
X3JlZ19yYW5nZSgweDEzLCAweDFEKSwKKwlyZWdtYXBfcmVnX3JhbmdlKDB4MUYsIDB4MUYpLAor
fTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCByZWdtYXBfYWNjZXNzX3RhYmxlIG50MzkwMTZfcmVn
bWFwX2FjY2Vzc190YWJsZSA9IHsKKwkubm9fcmFuZ2VzID0gbnQzOTAxNl9yZWdtYXBfbm9fcmFu
Z2VzLAorCS5uX25vX3JhbmdlcyA9IEFSUkFZX1NJWkUobnQzOTAxNl9yZWdtYXBfbm9fcmFuZ2Vz
KSwKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgcmVnbWFwX2NvbmZpZyBudDM5MDE2X3JlZ21h
cF9jb25maWcgPSB7CisJLnJlZ19iaXRzID0gNiwKKwkucGFkX2JpdHMgPSAyLAorCS52YWxfYml0
cyA9IDgsCisKKwkubWF4X3JlZ2lzdGVyID0gTlQzOTAxNl9SRUdfRElTUExBWV9NT0RFLAorCS53
cl90YWJsZSA9ICZudDM5MDE2X3JlZ21hcF9hY2Nlc3NfdGFibGUsCisJLndyaXRlX2ZsYWdfbWFz
ayA9IDB4MDIsCisKKwkuY2FjaGVfdHlwZSA9IFJFR0NBQ0hFX0ZMQVQsCit9OworCitzdGF0aWMg
aW50IG50MzkwMTZfcHJlcGFyZShzdHJ1Y3QgZHJtX3BhbmVsICpkcm1fcGFuZWwpCit7CisJc3Ry
dWN0IG50MzkwMTYgKnBhbmVsID0gdG9fbnQzOTAxNihkcm1fcGFuZWwpOworCWludCBlcnI7CisK
KwllcnIgPSByZWd1bGF0b3JfZW5hYmxlKHBhbmVsLT5zdXBwbHkpOworCWlmIChlcnIpIHsKKwkJ
ZGV2X2VycihwYW5lbC0+ZGV2LCAiRmFpbGVkIHRvIGVuYWJsZSBwb3dlciBzdXBwbHk6ICVpIiwg
ZXJyKTsKKwkJcmV0dXJuIGVycjsKKwl9CisKKwkvKgorCSAqIFJlc2V0IHRoZSBOVDM5MDE2Lgor
CSAqIFRoZSBkb2N1bWVudGF0aW9uIHNheXMgdGhlIHJlc2V0IHB1bHNlIHNob3VsZCBiZSBhdCBs
ZWFzdCA0MCB1cyB0bworCSAqIHBhc3MgdGhlIGdsaXRjaCBmaWx0ZXIsIGJ1dCB3aGVuIHRlc3Rp
bmcgSSBzZWUgc29tZSByZXNldHMgZmFpbCBhbmQKKwkgKiBzb21lIHN1Y2NlZWQgd2hlbiB1c2lu
ZyBhIDcwIHVzIGRlbGF5LCBzbyB3ZSB1c2UgMTAwIHVzIGluc3RlYWQuCisJICovCisJZ3Bpb2Rf
c2V0X3ZhbHVlX2NhbnNsZWVwKHBhbmVsLT5yZXNldF9ncGlvLCAxKTsKKwl1c2xlZXBfcmFuZ2Uo
MTAwLCAxMDAwKTsKKwlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAocGFuZWwtPnJlc2V0X2dwaW8s
IDApOworCXVkZWxheSgyKTsKKworCS8qIEluaXQgYWxsIHJlZ2lzdGVycy4gKi8KKwllcnIgPSBy
ZWdtYXBfbXVsdGlfcmVnX3dyaXRlKHBhbmVsLT5tYXAsIG50MzkwMTZfcGFuZWxfcmVncywKKwkJ
CQkgICAgIEFSUkFZX1NJWkUobnQzOTAxNl9wYW5lbF9yZWdzKSk7CisJaWYgKGVycikgeworCQlk
ZXZfZXJyKHBhbmVsLT5kZXYsICJGYWlsZWQgdG8gaW5pdCByZWdpc3RlcnM6ICVpIiwgZXJyKTsK
KwkJZ290byBlcnJfZGlzYWJsZV9yZWd1bGF0b3I7CisJfQorCisJcmV0dXJuIDA7CisKK2Vycl9k
aXNhYmxlX3JlZ3VsYXRvcjoKKwlyZWd1bGF0b3JfZGlzYWJsZShwYW5lbC0+c3VwcGx5KTsKKwly
ZXR1cm4gZXJyOworfQorCitzdGF0aWMgaW50IG50MzkwMTZfdW5wcmVwYXJlKHN0cnVjdCBkcm1f
cGFuZWwgKmRybV9wYW5lbCkKK3sKKwlzdHJ1Y3QgbnQzOTAxNiAqcGFuZWwgPSB0b19udDM5MDE2
KGRybV9wYW5lbCk7CisKKwlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAocGFuZWwtPnJlc2V0X2dw
aW8sIDEpOworCisJcmVndWxhdG9yX2Rpc2FibGUocGFuZWwtPnN1cHBseSk7CisKKwlyZXR1cm4g
MDsKK30KKworc3RhdGljIGludCBudDM5MDE2X2VuYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpkcm1f
cGFuZWwpCit7CisJc3RydWN0IG50MzkwMTYgKnBhbmVsID0gdG9fbnQzOTAxNihkcm1fcGFuZWwp
OworCWludCBlcnI7CisKKwllcnIgPSByZWdtYXBfd3JpdGUocGFuZWwtPm1hcCwgTlQzOTAxNl9S
RUdfU1lTVEVNLCAweDA3KTsKKwlpZiAoZXJyKSB7CisJCWRldl9lcnIocGFuZWwtPmRldiwgIlVu
YWJsZSB0byBlbmFibGUgcGFuZWw6ICVpIiwgZXJyKTsKKwkJcmV0dXJuIGVycjsKKwl9CisKKwkv
KiBXYWl0IGZvciB0aGUgcGljdHVyZSB0byBiZSByZWFkeSBiZWZvcmUgZW5hYmxpbmcgYmFja2xp
Z2h0ICovCisJbXNsZWVwKDE1MCk7CisKKwlpZiAocGFuZWwtPmJhY2tsaWdodCkgeworCQlwYW5l
bC0+YmFja2xpZ2h0LT5wcm9wcy5zdGF0ZSAmPSB+QkxfQ09SRV9GQkJMQU5LOworCQlwYW5lbC0+
YmFja2xpZ2h0LT5wcm9wcy5wb3dlciA9IEZCX0JMQU5LX1VOQkxBTks7CisJCWJhY2tsaWdodF91
cGRhdGVfc3RhdHVzKHBhbmVsLT5iYWNrbGlnaHQpOworCX0KKworCXJldHVybiAwOworfQorCitz
dGF0aWMgaW50IG50MzkwMTZfZGlzYWJsZShzdHJ1Y3QgZHJtX3BhbmVsICpkcm1fcGFuZWwpCit7
CisJc3RydWN0IG50MzkwMTYgKnBhbmVsID0gdG9fbnQzOTAxNihkcm1fcGFuZWwpOworCWludCBl
cnI7CisKKwlpZiAocGFuZWwtPmJhY2tsaWdodCkgeworCQlwYW5lbC0+YmFja2xpZ2h0LT5wcm9w
cy5wb3dlciA9IEZCX0JMQU5LX1BPV0VSRE9XTjsKKwkJcGFuZWwtPmJhY2tsaWdodC0+cHJvcHMu
c3RhdGUgfD0gQkxfQ09SRV9GQkJMQU5LOworCQliYWNrbGlnaHRfdXBkYXRlX3N0YXR1cyhwYW5l
bC0+YmFja2xpZ2h0KTsKKwl9CisKKwllcnIgPSByZWdtYXBfd3JpdGUocGFuZWwtPm1hcCwgTlQz
OTAxNl9SRUdfU1lTVEVNLCAweDA1KTsKKwlpZiAoZXJyKSB7CisJCWRldl9lcnIocGFuZWwtPmRl
diwgIlVuYWJsZSB0byBkaXNhYmxlIHBhbmVsOiAlaSIsIGVycik7CisJCXJldHVybiBlcnI7CisJ
fQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbnQzOTAxNl9nZXRfbW9kZXMoc3RydWN0
IGRybV9wYW5lbCAqZHJtX3BhbmVsKQoreworCXN0cnVjdCBudDM5MDE2ICpwYW5lbCA9IHRvX250
MzkwMTYoZHJtX3BhbmVsKTsKKwljb25zdCBzdHJ1Y3QgbnQzOTAxNl9wYW5lbF9pbmZvICpwYW5l
bF9pbmZvID0gcGFuZWwtPnBhbmVsX2luZm87CisJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5l
Y3RvciA9IGRybV9wYW5lbC0+Y29ubmVjdG9yOworCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICpt
b2RlOworCisJbW9kZSA9IGRybV9tb2RlX2R1cGxpY2F0ZShkcm1fcGFuZWwtPmRybSwgJnBhbmVs
X2luZm8tPmRpc3BsYXlfbW9kZSk7CisJaWYgKCFtb2RlKQorCQlyZXR1cm4gLUVOT01FTTsKKwor
CWRybV9tb2RlX3NldF9uYW1lKG1vZGUpOworCisJbW9kZS0+dHlwZSA9IERSTV9NT0RFX1RZUEVf
RFJJVkVSIHwgRFJNX01PREVfVFlQRV9QUkVGRVJSRUQ7CisJZHJtX21vZGVfcHJvYmVkX2FkZChj
b25uZWN0b3IsIG1vZGUpOworCisJY29ubmVjdG9yLT5kaXNwbGF5X2luZm8uYnBjID0gODsKKwlj
b25uZWN0b3ItPmRpc3BsYXlfaW5mby53aWR0aF9tbSA9IHBhbmVsX2luZm8tPndpZHRoX21tOwor
CWNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLmhlaWdodF9tbSA9IHBhbmVsX2luZm8tPmhlaWdodF9t
bTsKKworCWRybV9kaXNwbGF5X2luZm9fc2V0X2J1c19mb3JtYXRzKCZjb25uZWN0b3ItPmRpc3Bs
YXlfaW5mbywKKwkJCQkJICZwYW5lbF9pbmZvLT5idXNfZm9ybWF0LCAxKTsKKwljb25uZWN0b3It
PmRpc3BsYXlfaW5mby5idXNfZmxhZ3MgPSBwYW5lbF9pbmZvLT5idXNfZmxhZ3M7CisKKwlyZXR1
cm4gMTsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcGFuZWxfZnVuY3MgbnQzOTAxNl9m
dW5jcyA9IHsKKwkucHJlcGFyZQk9IG50MzkwMTZfcHJlcGFyZSwKKwkudW5wcmVwYXJlCT0gbnQz
OTAxNl91bnByZXBhcmUsCisJLmVuYWJsZQkJPSBudDM5MDE2X2VuYWJsZSwKKwkuZGlzYWJsZQk9
IG50MzkwMTZfZGlzYWJsZSwKKwkuZ2V0X21vZGVzCT0gbnQzOTAxNl9nZXRfbW9kZXMsCit9Owor
CitzdGF0aWMgaW50IG50MzkwMTZfcHJvYmUoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSkKK3sKKwlz
dHJ1Y3QgZGV2aWNlICpkZXYgPSAmc3BpLT5kZXY7CisJc3RydWN0IG50MzkwMTYgKnBhbmVsOwor
CWludCBlcnI7CisKKwlwYW5lbCA9IGRldm1fa3phbGxvYyhkZXYsIHNpemVvZigqcGFuZWwpLCBH
RlBfS0VSTkVMKTsKKwlpZiAoIXBhbmVsKQorCQlyZXR1cm4gLUVOT01FTTsKKworCXBhbmVsLT5k
ZXYgPSBkZXY7CisJc3BpX3NldF9kcnZkYXRhKHNwaSwgcGFuZWwpOworCisJcGFuZWwtPnBhbmVs
X2luZm8gPSBvZl9kZXZpY2VfZ2V0X21hdGNoX2RhdGEoZGV2KTsKKwlpZiAoIXBhbmVsLT5wYW5l
bF9pbmZvKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCXBhbmVsLT5zdXBwbHkgPSBkZXZtX3JlZ3Vs
YXRvcl9nZXQoZGV2LCAicG93ZXIiKTsKKwlpZiAoSVNfRVJSKHBhbmVsLT5zdXBwbHkpKSB7CisJ
CWRldl9lcnIoZGV2LCAiRmFpbGVkIHRvIGdldCBwb3dlciBzdXBwbHkiKTsKKwkJcmV0dXJuIFBU
Ul9FUlIocGFuZWwtPnN1cHBseSk7CisJfQorCisJcGFuZWwtPnJlc2V0X2dwaW8gPSBkZXZtX2dw
aW9kX2dldChkZXYsICJyZXNldCIsIEdQSU9EX09VVF9ISUdIKTsKKwlpZiAoSVNfRVJSKHBhbmVs
LT5yZXNldF9ncGlvKSkgeworCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0byBnZXQgcmVzZXQgR1BJ
TyIpOworCQlyZXR1cm4gUFRSX0VSUihwYW5lbC0+cmVzZXRfZ3Bpbyk7CisJfQorCisJc3BpLT5i
aXRzX3Blcl93b3JkID0gODsKKwlzcGktPm1vZGUgPSBTUElfTU9ERV8zIHwgU1BJXzNXSVJFOwor
CWVyciA9IHNwaV9zZXR1cChzcGkpOworCWlmIChlcnIpIHsKKwkJZGV2X2VycihkZXYsICJGYWls
ZWQgdG8gc2V0dXAgU1BJIik7CisJCXJldHVybiBlcnI7CisJfQorCisJcGFuZWwtPm1hcCA9IGRl
dm1fcmVnbWFwX2luaXRfc3BpKHNwaSwgJm50MzkwMTZfcmVnbWFwX2NvbmZpZyk7CisJaWYgKElT
X0VSUihwYW5lbC0+bWFwKSkgeworCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0byBpbml0IHJlZ21h
cCIpOworCQlyZXR1cm4gUFRSX0VSUihwYW5lbC0+bWFwKTsKKwl9CisKKwlwYW5lbC0+YmFja2xp
Z2h0ID0gZGV2bV9vZl9maW5kX2JhY2tsaWdodChkZXYpOworCWlmIChJU19FUlIocGFuZWwtPmJh
Y2tsaWdodCkpIHsKKwkJZXJyID0gUFRSX0VSUihwYW5lbC0+YmFja2xpZ2h0KTsKKwkJaWYgKGVy
ciAhPSAtRVBST0JFX0RFRkVSKQorCQkJZGV2X2VycihkZXYsICJGYWlsZWQgdG8gZ2V0IGJhY2ts
aWdodCBoYW5kbGUiKTsKKwkJcmV0dXJuIGVycjsKKwl9CisKKwlkcm1fcGFuZWxfaW5pdCgmcGFu
ZWwtPmRybV9wYW5lbCk7CisJcGFuZWwtPmRybV9wYW5lbC5kZXYgPSBkZXY7CisJcGFuZWwtPmRy
bV9wYW5lbC5mdW5jcyA9ICZudDM5MDE2X2Z1bmNzOworCisJZXJyID0gZHJtX3BhbmVsX2FkZCgm
cGFuZWwtPmRybV9wYW5lbCk7CisJaWYgKGVyciA8IDApIHsKKwkJZGV2X2VycihkZXYsICJGYWls
ZWQgdG8gcmVnaXN0ZXIgcGFuZWwiKTsKKwkJZ290byBlcnJfZnJlZV9iYWNrbGlnaHQ7CisJfQor
CisJcmV0dXJuIDA7CisKK2Vycl9mcmVlX2JhY2tsaWdodDoKKwlpZiAocGFuZWwtPmJhY2tsaWdo
dCkKKwkJcHV0X2RldmljZSgmcGFuZWwtPmJhY2tsaWdodC0+ZGV2KTsKKworCXJldHVybiBlcnI7
Cit9CisKK3N0YXRpYyBpbnQgbnQzOTAxNl9yZW1vdmUoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSkK
K3sKKwlzdHJ1Y3QgbnQzOTAxNiAqcGFuZWwgPSBzcGlfZ2V0X2RydmRhdGEoc3BpKTsKKworCWRy
bV9wYW5lbF9yZW1vdmUoJnBhbmVsLT5kcm1fcGFuZWwpOworCisJbnQzOTAxNl9kaXNhYmxlKCZw
YW5lbC0+ZHJtX3BhbmVsKTsKKwludDM5MDE2X3VucHJlcGFyZSgmcGFuZWwtPmRybV9wYW5lbCk7
CisKKwlpZiAocGFuZWwtPmJhY2tsaWdodCkKKwkJcHV0X2RldmljZSgmcGFuZWwtPmJhY2tsaWdo
dC0+ZGV2KTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IG50MzkwMTZf
cGFuZWxfaW5mbyBrZDAzNWc2X2luZm8gPSB7CisJLmRpc3BsYXlfbW9kZSA9IHsKKwkJLmNsb2Nr
ID0gNjAwMCwKKwkJLmhkaXNwbGF5ID0gMzIwLAorCQkuaHN5bmNfc3RhcnQgPSAzMjAgKyAxMCwK
KwkJLmhzeW5jX2VuZCA9IDMyMCArIDEwICsgNTAsCisJCS5odG90YWwgPSAzMjAgKyAxMCArIDUw
ICsgMjAsCisJCS52ZGlzcGxheSA9IDI0MCwKKwkJLnZzeW5jX3N0YXJ0ID0gMjQwICsgNSwKKwkJ
LnZzeW5jX2VuZCA9IDI0MCArIDUgKyAxLAorCQkudnRvdGFsID0gMjQwICsgNSArIDEgKyA0LAor
CQkudnJlZnJlc2ggPSA2MCwKKwkJLmZsYWdzID0gRFJNX01PREVfRkxBR19OSFNZTkMgfCBEUk1f
TU9ERV9GTEFHX05WU1lOQywKKwl9LAorCS53aWR0aF9tbSA9IDcxLAorCS5oZWlnaHRfbW0gPSA1
MywKKwkuYnVzX2Zvcm1hdCA9IE1FRElBX0JVU19GTVRfUkdCODg4XzFYMjQsCisJLmJ1c19mbGFn
cyA9IERSTV9CVVNfRkxBR19QSVhEQVRBX05FR0VER0UsCit9OworCitzdGF0aWMgY29uc3Qgc3Ry
dWN0IG9mX2RldmljZV9pZCBudDM5MDE2X29mX21hdGNoW10gPSB7CisJeyAuY29tcGF0aWJsZSA9
ICJraW5nZGlzcGxheSxrZDAzNWc2LTU0bnQiLCAuZGF0YSA9ICZrZDAzNWc2X2luZm8gfSwKKwl7
fSwKK307CitNT0RVTEVfREVWSUNFX1RBQkxFKG9mLCBudDM5MDE2X29mX21hdGNoKTsKKworc3Rh
dGljIHN0cnVjdCBzcGlfZHJpdmVyIG50MzkwMTZfZHJpdmVyID0geworCS5kcml2ZXIgPSB7CisJ
CS5uYW1lID0gIm50MzkwMTYiLAorCQkub2ZfbWF0Y2hfdGFibGUgPSBudDM5MDE2X29mX21hdGNo
LAorCX0sCisJLnByb2JlID0gbnQzOTAxNl9wcm9iZSwKKwkucmVtb3ZlID0gbnQzOTAxNl9yZW1v
dmUsCit9OworCittb2R1bGVfc3BpX2RyaXZlcihudDM5MDE2X2RyaXZlcik7CisKK01PRFVMRV9B
VVRIT1IoIk1hYXJ0ZW4gdGVyIEh1dXJuZSA8bWFhcnRlbkB0cmVld2Fsa2VyLm9yZz4iKTsKK01P
RFVMRV9BVVRIT1IoIlBhdWwgQ2VyY3VlaWwgPHBhdWxAY3JhcG91aWxsb3UubmV0PiIpOworTU9E
VUxFX0xJQ0VOU0UoIkdQTCB2MiIpOwotLSAKMi4yMS4wLjU5My5nNTExZWMzNDVlMTgKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
