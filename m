Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1EA5F5C76C
	for <lists+dri-devel@lfdr.de>; Tue,  2 Jul 2019 04:43:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E78E789B70;
	Tue,  2 Jul 2019 02:43:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd43.google.com (mail-io1-xd43.google.com
 [IPv6:2607:f8b0:4864:20::d43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0661489B70
 for <dri-devel@lists.freedesktop.org>; Tue,  2 Jul 2019 02:43:28 +0000 (UTC)
Received: by mail-io1-xd43.google.com with SMTP id e5so33591074iok.4
 for <dri-devel@lists.freedesktop.org>; Mon, 01 Jul 2019 19:43:27 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=3DQluBi16dhj02dqJzw41QpQb+Q7p4Aoeo2J3cQ2aD0=;
 b=PMjA5z68fz/s3gdw/Ky8135vVqoaPxta+wVIkyBOnIO75YjireNE1nqUoMabURtcxx
 BDyFq8JMBmzyYYswSVcNMwAboJ+LDauyCXj6osDz0H7hgzUQECXgUn4OnDEchBH+hsNK
 25N3uAHZnWgAIwILPp6mPSG4jHW97FlTYS856RyLXoA03+TP28fpFYhJ21WruLvKJZXq
 MAlYoLFd8uWCzH4loDybzuCmfPxm7Ve33YC1waS8TJ5naG5iv15efM6CUoABOS5mppt6
 IOvw2lVq1VSCsBdIeXrBSzpvftu+ZN61ymqHhBbYP7RAFQxAWMrSDY59NdZhwAVvAa8T
 Prrw==
X-Gm-Message-State: APjAAAW5fVBzma80YGIKB2RsuUxXDFK5UvwtZVu25NsvHGF81sBMK5BX
 kBJetQPuISyFTH0bDDVDoEiAuzZvMnDaeRvxlXs=
X-Google-Smtp-Source: APXvYqynijCma1XtN4RY/coJX8rHREmxtXybyQ6tcWra3DMFwF6ZdLCZZ6b1jWfdtGWSSfxFCjeJVJdkeKiNl6bhGHs=
X-Received: by 2002:a6b:bbc1:: with SMTP id
 l184mr31414353iof.232.1562035407237; 
 Mon, 01 Jul 2019 19:43:27 -0700 (PDT)
MIME-Version: 1.0
References: <20190628121338.24398-1-kraxel@redhat.com>
 <20190628121338.24398-10-kraxel@redhat.com>
 <CAAfnVBmR2+uN=3O6H488GYoUtwxA2Hh8rbop+MiYm-YFtdecvw@mail.gmail.com>
In-Reply-To: <CAAfnVBmR2+uN=3O6H488GYoUtwxA2Hh8rbop+MiYm-YFtdecvw@mail.gmail.com>
From: Chia-I Wu <olvaffe@gmail.com>
Date: Mon, 1 Jul 2019 19:43:15 -0700
Message-ID: <CAPaKu7RcgrEOcdaF8FM8e69D_0LGJYvWXkhOOnzMKzWjkZ_6YQ@mail.gmail.com>
Subject: Re: [PATCH v5 09/12] drm/virtio: rework virtio_gpu_object_create
 fencing
To: Gurchetan Singh <gurchetansingh@chromium.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=3DQluBi16dhj02dqJzw41QpQb+Q7p4Aoeo2J3cQ2aD0=;
 b=Jj12tYVtIsGTWdlfVHDvcLmTA6DvCO4oDv/Y80VXUdZJfgtLobqrI216tRBitbEkKk
 OOqzmiKZpN+rqzU+IifPKahs0T20lf6dekX6j8bJDCihUHfCrghAkZEXG9SmvnG4YgZo
 +hXXAY8Ip5nDn+gMnsk1IUNzA6aWn66TLmVCBDZk9Y8MWK2nZuHFYHUgYjL6n6fW6pBB
 Lh/ZV5CCjNjTFI85hHoRktg2R43vqExyx9qYHzFa98Aclq/WO23FWCc+6keys5O2JvHJ
 GHP9LfhpegAnldK1cMuaoHEG9/oN05Pr9+ChAABkZD9bJOfgP0tMnDRLCUPP4A+ijSWH
 gQQA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Gerd Hoffmann <kraxel@redhat.com>,
 ML dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gTW9uLCBKdWwgMSwgMjAxOSBhdCAxMTowNCBBTSBHdXJjaGV0YW4gU2luZ2gKPGd1cmNoZXRh
bnNpbmdoQGNocm9taXVtLm9yZz4gd3JvdGU6Cj4KPgo+Cj4gT24gRnJpLCBKdW4gMjgsIDIwMTkg
YXQgNToxNCBBTSBHZXJkIEhvZmZtYW5uIDxrcmF4ZWxAcmVkaGF0LmNvbT4gd3JvdGU6Cj4gPgo+
ID4gVXNlIGdlbSByZXNlcnZhdGlvbiBoZWxwZXJzIGFuZCBkaXJlY3QgcmVzZXJ2YXRpb25fb2Jq
ZWN0XyogY2FsbHMKPiA+IGluc3RlYWQgb2YgdHRtLgo+ID4KPiA+IHY1OiBmaXggZmVuY2luZyAo
Q2hpYS1JIFd1KS4KPiA+IHYzOiBEdWUgdG8gdXNpbmcgdGhlIGdlbSByZXNlcnZhdGlvbiBvYmpl
Y3QgaXQgaXMgaW5pdGlhbGl6ZWQgYW5kIHJlYWR5Cj4gPiBmb3IgdXNlIGJlZm9yZSBjYWxsaW5n
IHR0bV9ib19pbml0LCBzbyB3ZSBjYW4gYWxzbyBkcm9wIHRoZSB0cmlja3kgZmVuY2UKPiA+IGxv
Z2ljIHdoaWNoIGNoZWNrcyB3aGVuZXZlciB0aGUgY29tbWFuZCBpcyBpbiBmbGlnaHQgc3RpbGwu
ICBXZSBjYW4KPiA+IHNpbXBseSBmZW5jZSBvdXIgb2JqZWN0IGJlZm9yZSBzdWJtaXR0aW5nIHRo
ZSB2aXJ0aW8gY29tbWFuZCBhbmQgYmUgZG9uZQo+ID4gd2l0aCBpdC4KPiA+Cj4gPiBTaWduZWQt
b2ZmLWJ5OiBHZXJkIEhvZmZtYW5uIDxrcmF4ZWxAcmVkaGF0LmNvbT4KPiA+IEFja2VkLWJ5OiBE
YW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgo+ID4gLS0tCj4gPiAgZHJpdmVy
cy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oICAgIHwgIDIgKwo+ID4gIGRyaXZlcnMvZ3B1
L2RybS92aXJ0aW8vdmlydGdwdV9vYmplY3QuYyB8IDU1ICsrKysrKysrKystLS0tLS0tLS0tLS0t
LS0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfdnEuYyAgICAgfCAgNCArKwo+
ID4gIDMgZmlsZXMgY2hhbmdlZCwgMjcgaW5zZXJ0aW9ucygrKSwgMzQgZGVsZXRpb25zKC0pCj4g
Pgo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9kcnYuaCBi
L2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9kcnYuaAo+ID4gaW5kZXggMzU2ZDI3MTMy
Mzg4Li5jNGIyNjZiNmY3MzEgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlv
L3ZpcnRncHVfZHJ2LmgKPiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9k
cnYuaAo+ID4gQEAgLTI2Nyw2ICsyNjcsNyBAQCB2b2lkIHZpcnRpb19ncHVfZnJlZV92YnVmcyhz
dHJ1Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2KTsKPiA+ICB2b2lkIHZpcnRpb19ncHVfY21k
X2NyZWF0ZV9yZXNvdXJjZShzdHJ1Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2LAo+ID4gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRpb19ncHVfb2JqZWN0
ICpibywKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0
aW9fZ3B1X29iamVjdF9wYXJhbXMgKnBhcmFtcywKPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqb2JqcywKPiA+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X2ZlbmNl
ICpmZW5jZSk7Cj4gPiAgdm9pZCB2aXJ0aW9fZ3B1X2NtZF91bnJlZl9yZXNvdXJjZShzdHJ1Y3Qg
dmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2LAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB1aW50MzJfdCByZXNvdXJjZV9pZCk7Cj4gPiBAQCAtMzI5LDYgKzMzMCw3IEBAIHZv
aWQKPiA+ICB2aXJ0aW9fZ3B1X2NtZF9yZXNvdXJjZV9jcmVhdGVfM2Qoc3RydWN0IHZpcnRpb19n
cHVfZGV2aWNlICp2Z2RldiwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
dHJ1Y3QgdmlydGlvX2dwdV9vYmplY3QgKmJvLAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9wYXJhbXMgKnBhcmFtcywKPiA+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3Rf
YXJyYXkgKm9ianMsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0
IHZpcnRpb19ncHVfZmVuY2UgKmZlbmNlKTsKPiA+ICB2b2lkIHZpcnRpb19ncHVfY3RybF9hY2so
c3RydWN0IHZpcnRxdWV1ZSAqdnEpOwo+ID4gIHZvaWQgdmlydGlvX2dwdV9jdXJzb3JfYWNrKHN0
cnVjdCB2aXJ0cXVldWUgKnZxKTsKPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmly
dGlvL3ZpcnRncHVfb2JqZWN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfb2Jq
ZWN0LmMKPiA+IGluZGV4IDgyYmZiZjk4M2ZkMi4uZmEwZWEyMmM2OGIwIDEwMDY0NAo+ID4gLS0t
IGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X29iamVjdC5jCj4gPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfb2JqZWN0LmMKPiA+IEBAIC05Nyw3ICs5Nyw5IEBA
IGludCB2aXJ0aW9fZ3B1X29iamVjdF9jcmVhdGUoc3RydWN0IHZpcnRpb19ncHVfZGV2aWNlICp2
Z2RldiwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRpb19ncHVf
b2JqZWN0ICoqYm9fcHRyLAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qg
dmlydGlvX2dwdV9mZW5jZSAqZmVuY2UpCj4gPiAgewo+ID4gKyAgICAgICBzdHJ1Y3QgdmlydGlv
X2dwdV9vYmplY3RfYXJyYXkgKm9ianMgPSBOVUxMOwo+ID4gICAgICAgICBzdHJ1Y3QgdmlydGlv
X2dwdV9vYmplY3QgKmJvOwo+ID4gKyAgICAgICBzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0
Owo+ID4gICAgICAgICBzaXplX3QgYWNjX3NpemU7Cj4gPiAgICAgICAgIGludCByZXQ7Cj4gPgo+
ID4gQEAgLTEyMywxMiArMTI1LDI5IEBAIGludCB2aXJ0aW9fZ3B1X29iamVjdF9jcmVhdGUoc3Ry
dWN0IHZpcnRpb19ncHVfZGV2aWNlICp2Z2RldiwKPiA+ICAgICAgICAgfQo+ID4gICAgICAgICBi
by0+ZHVtYiA9IHBhcmFtcy0+ZHVtYjsKPiA+Cj4gPiArICAgICAgIGlmIChmZW5jZSkgewo+ID4g
KyAgICAgICAgICAgICAgIG9ianMgPSB2aXJ0aW9fZ3B1X2FycmF5X2FsbG9jKDEpOwo+ID4gKyAg
ICAgICAgICAgICAgIG9ianMtPm9ianNbMF0gPSAmYm8tPmdlbV9iYXNlOwo+ID4gKyAgICAgICAg
ICAgICAgIGRybV9nZW1fb2JqZWN0X2dldChvYmpzLT5vYmpzWzBdKTsKPgo+IFNvIHdlIHRha2Ug
YSByZWZlcmVuY2UgZXZlcnktdGltZSBjcmVhdGUvc3VibWl0X2NtZCBhcmUgZmVuY2VkPyAgV2h5
IGRvbid0IHdlIHRha2UgYSByZWZlcmVuY2UgZHVyaW5nIHt2aXJ0aW9fZ3B1X2NtZF90cmFuc2Zl
cl9mcm9tX2hvc3RfM2QsIHZpcnRpb19ncHVfdHJhbnNmZXJfdG9faG9zdF9pb2N0bH0/ClllYWgs
IEkgaGFkIHRoZSBzYW1lIHF1ZXN0aW9uIGluIGFub3RoZXIgdGhyZWFkLgo+Cj4gRG9lcyB0aGUg
R0VNIGNvbW1vbiBjb2RlIHdhaXQgb24gdGhlIHJlc2VydmF0aW9uIG9iamVjdCBiZWZvcmUgY2Fs
bGluZyB2aXJ0aW9fZ3B1X2dlbV9vYmplY3RfY2xvc2U/ICBJZiBub3QsIHdvdWxkIGl0IG1ha2Ug
c2Vuc2UgdG8gd2FpdCBvbiB0aGUgcmVzZXJ2YXRpb24gb2JqZWN0IHdpdGggTUFYX1NDSEVEVUxF
X1RJTUVPVVQgaW4gdmlydGlvX2dwdV9mcmVlX29iamVjdD8KdmlydGlvX2dwdV9nZW1fb2JqZWN0
X2Nsb3NlIGlzIGNhbGxlZCB3aGVuIHRoaXMgcHJvY2VzcyAodGhpcwpkcm1fZmlsZSkgZG9lcyBu
b3QgbmVlZCB0aGUgb2JqZWN0LiAgSXQgaXMgZmluZSBpZiB0aGVyZSBhcmUgc3RpbGwKcGVuZGlu
ZyBvcGVyYXRpb25zLgoKdmlydGlvX2dwdV9mcmVlX29iamVjdCBpcyBjYWxsZWQgd2hlbiB0aGUg
bGFzdCByZWZlcmVuY2UgaXMgZ29uZS4gIEl0CnNob3VsZCBiZSBhIGNyaXRpY2FsIGVycm9yIGlm
IHRoZXJlIGFyZSBzdGlsbCBwZW5kaW5nIG9wZXJhdGlvbnMuCgo+Cj4gPiArCj4gPiArICAgICAg
ICAgICAgICAgcmV0ID0gZHJtX2dlbV9sb2NrX3Jlc2VydmF0aW9ucyhvYmpzLT5vYmpzLCBvYmpz
LT5uZW50cywKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICZ0aWNrZXQpOwo+ID4gKyAgICAgICAgICAgICAgIGlmIChyZXQgPT0gMCkKPiA+ICsgICAg
ICAgICAgICAgICAgICAgICAgIHJlc2VydmF0aW9uX29iamVjdF9hZGRfZXhjbF9mZW5jZShvYmpz
LT5vYmpzWzBdLT5yZXN2LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZmZW5jZS0+Zik7Cj4gPiArICAgICAgIH0KPiA+ICsKPiA+
ICAgICAgICAgaWYgKHBhcmFtcy0+dmlyZ2wpIHsKPiA+IC0gICAgICAgICAgICAgICB2aXJ0aW9f
Z3B1X2NtZF9yZXNvdXJjZV9jcmVhdGVfM2QodmdkZXYsIGJvLCBwYXJhbXMsIGZlbmNlKTsKPiA+
ICsgICAgICAgICAgICAgICB2aXJ0aW9fZ3B1X2NtZF9yZXNvdXJjZV9jcmVhdGVfM2QodmdkZXYs
IGJvLCBwYXJhbXMsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIG9ianMsIGZlbmNlKTsKPiA+ICAgICAgICAgfSBlbHNlIHsKPiA+IC0gICAgICAg
ICAgICAgICB2aXJ0aW9fZ3B1X2NtZF9jcmVhdGVfcmVzb3VyY2UodmdkZXYsIGJvLCBwYXJhbXMs
IGZlbmNlKTsKPiA+ICsgICAgICAgICAgICAgICB2aXJ0aW9fZ3B1X2NtZF9jcmVhdGVfcmVzb3Vy
Y2UodmdkZXYsIGJvLCBwYXJhbXMsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIG9ianMsIGZlbmNlKTsKPiA+ICAgICAgICAgfQo+ID4KPiA+ICsgICAg
ICAgaWYgKGZlbmNlKQo+ID4gKyAgICAgICAgICAgICAgIGRybV9nZW1fdW5sb2NrX3Jlc2VydmF0
aW9ucyhvYmpzLT5vYmpzLCBvYmpzLT5uZW50cywgJnRpY2tldCk7Cj4gPiArCj4gPiAgICAgICAg
IHZpcnRpb19ncHVfaW5pdF90dG1fcGxhY2VtZW50KGJvKTsKPiA+ICAgICAgICAgcmV0ID0gdHRt
X2JvX2luaXQoJnZnZGV2LT5tbWFuLmJkZXYsICZiby0+dGJvLCBwYXJhbXMtPnNpemUsCj4gPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHR0bV9ib190eXBlX2RldmljZSwgJmJvLT5wbGFjZW1l
bnQsIDAsCj4gPiBAQCAtMTM5LDM4ICsxNTgsNiBAQCBpbnQgdmlydGlvX2dwdV9vYmplY3RfY3Jl
YXRlKHN0cnVjdCB2aXJ0aW9fZ3B1X2RldmljZSAqdmdkZXYsCj4gPiAgICAgICAgIGlmIChyZXQg
IT0gMCkKPiA+ICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4KPiA+IC0gICAgICAgaWYg
KGZlbmNlKSB7Cj4gPiAtICAgICAgICAgICAgICAgc3RydWN0IHZpcnRpb19ncHVfZmVuY2VfZHJp
dmVyICpkcnYgPSAmdmdkZXYtPmZlbmNlX2RydjsKPiA+IC0gICAgICAgICAgICAgICBzdHJ1Y3Qg
bGlzdF9oZWFkIHZhbGlkYXRlX2xpc3Q7Cj4gPiAtICAgICAgICAgICAgICAgc3RydWN0IHR0bV92
YWxpZGF0ZV9idWZmZXIgbWFpbmJ1ZjsKPiA+IC0gICAgICAgICAgICAgICBzdHJ1Y3Qgd3dfYWNx
dWlyZV9jdHggdGlja2V0Owo+ID4gLSAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgaXJxX2Zs
YWdzOwo+ID4gLSAgICAgICAgICAgICAgIGJvb2wgc2lnbmFsZWQ7Cj4gPiAtCj4gPiAtICAgICAg
ICAgICAgICAgSU5JVF9MSVNUX0hFQUQoJnZhbGlkYXRlX2xpc3QpOwo+ID4gLSAgICAgICAgICAg
ICAgIG1lbXNldCgmbWFpbmJ1ZiwgMCwgc2l6ZW9mKHN0cnVjdCB0dG1fdmFsaWRhdGVfYnVmZmVy
KSk7Cj4gPiAtCj4gPiAtICAgICAgICAgICAgICAgLyogdXNlIGEgZ2VtIHJlZmVyZW5jZSBzaW5j
ZSB1bnJlZiBsaXN0IHVuZG9lcyB0aGVtICovCj4gPiAtICAgICAgICAgICAgICAgZHJtX2dlbV9v
YmplY3RfZ2V0KCZiby0+Z2VtX2Jhc2UpOwo+ID4gLSAgICAgICAgICAgICAgIG1haW5idWYuYm8g
PSAmYm8tPnRibzsKPiA+IC0gICAgICAgICAgICAgICBsaXN0X2FkZCgmbWFpbmJ1Zi5oZWFkLCAm
dmFsaWRhdGVfbGlzdCk7Cj4gPiAtCj4gPiAtICAgICAgICAgICAgICAgcmV0ID0gdmlydGlvX2dw
dV9vYmplY3RfbGlzdF92YWxpZGF0ZSgmdGlja2V0LCAmdmFsaWRhdGVfbGlzdCk7Cj4gPiAtICAg
ICAgICAgICAgICAgaWYgKHJldCA9PSAwKSB7Cj4gPiAtICAgICAgICAgICAgICAgICAgICAgICBz
cGluX2xvY2tfaXJxc2F2ZSgmZHJ2LT5sb2NrLCBpcnFfZmxhZ3MpOwo+ID4gLSAgICAgICAgICAg
ICAgICAgICAgICAgc2lnbmFsZWQgPSB2aXJ0aW9fZmVuY2Vfc2lnbmFsZWQoJmZlbmNlLT5mKTsK
PiA+IC0gICAgICAgICAgICAgICAgICAgICAgIGlmICghc2lnbmFsZWQpCj4gPiAtICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIC8qIHZpcnRpbyBjcmVhdGUgY29tbWFuZCBzdGlsbCBpbiBm
bGlnaHQgKi8KPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHRtX2V1X2ZlbmNl
X2J1ZmZlcl9vYmplY3RzKCZ0aWNrZXQsICZ2YWxpZGF0ZV9saXN0LAo+ID4gLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmZlbmNlLT5m
KTsKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIHNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmRy
di0+bG9jaywgaXJxX2ZsYWdzKTsKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIGlmIChzaWdu
YWxlZCkKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdmlydGlvIGNyZWF0
ZSBjb21tYW5kIGZpbmlzaGVkICovCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHR0bV9ldV9iYWNrb2ZmX3Jlc2VydmF0aW9uKCZ0aWNrZXQsICZ2YWxpZGF0ZV9saXN0KTsKPiA+
IC0gICAgICAgICAgICAgICB9Cj4gPiAtICAgICAgICAgICAgICAgdmlydGlvX2dwdV91bnJlZl9s
aXN0KCZ2YWxpZGF0ZV9saXN0KTsKPiA+IC0gICAgICAgfQo+ID4gLQo+ID4gICAgICAgICAqYm9f
cHRyID0gYm87Cj4gPiAgICAgICAgIHJldHVybiAwOwo+ID4gIH0KPiA+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfdnEuYyBiL2RyaXZlcnMvZ3B1L2RybS92aXJ0
aW8vdmlydGdwdV92cS5jCj4gPiBpbmRleCAwYzg3YzNlMDg2ZjguLjBhNzM1ZTUxYTgwMyAxMDA2
NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV92cS5jCj4gPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfdnEuYwo+ID4gQEAgLTM5MSw2ICszOTEs
NyBAQCBzdGF0aWMgaW50IHZpcnRpb19ncHVfcXVldWVfY3Vyc29yKHN0cnVjdCB2aXJ0aW9fZ3B1
X2RldmljZSAqdmdkZXYsCj4gPiAgdm9pZCB2aXJ0aW9fZ3B1X2NtZF9jcmVhdGVfcmVzb3VyY2Uo
c3RydWN0IHZpcnRpb19ncHVfZGV2aWNlICp2Z2RldiwKPiA+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdCAqYm8sCj4gPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfcGFy
YW1zICpwYXJhbXMsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1
Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKm9ianMsCj4gPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9mZW5jZSAqZmVuY2UpCj4gPiAgewo+
ID4gICAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9yZXNvdXJjZV9jcmVhdGVfMmQgKmNtZF9wOwo+
ID4gQEAgLTM5OCw2ICszOTksNyBAQCB2b2lkIHZpcnRpb19ncHVfY21kX2NyZWF0ZV9yZXNvdXJj
ZShzdHJ1Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2LAo+ID4KPiA+ICAgICAgICAgY21kX3Ag
PSB2aXJ0aW9fZ3B1X2FsbG9jX2NtZCh2Z2RldiwgJnZidWYsIHNpemVvZigqY21kX3ApKTsKPiA+
ICAgICAgICAgbWVtc2V0KGNtZF9wLCAwLCBzaXplb2YoKmNtZF9wKSk7Cj4gPiArICAgICAgIHZi
dWYtPm9ianMgPSBvYmpzOwo+ID4KPiA+ICAgICAgICAgY21kX3AtPmhkci50eXBlID0gY3B1X3Rv
X2xlMzIoVklSVElPX0dQVV9DTURfUkVTT1VSQ0VfQ1JFQVRFXzJEKTsKPiA+ICAgICAgICAgY21k
X3AtPnJlc291cmNlX2lkID0gY3B1X3RvX2xlMzIoYm8tPmh3X3Jlc19oYW5kbGUpOwo+ID4gQEAg
LTg2NCw2ICs4NjYsNyBAQCB2b2lkCj4gPiAgdmlydGlvX2dwdV9jbWRfcmVzb3VyY2VfY3JlYXRl
XzNkKHN0cnVjdCB2aXJ0aW9fZ3B1X2RldmljZSAqdmdkZXYsCj4gPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRpb19ncHVfb2JqZWN0ICpibywKPiA+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfcGFy
YW1zICpwYXJhbXMsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0
IHZpcnRpb19ncHVfb2JqZWN0X2FycmF5ICpvYmpzLAo+ID4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X2ZlbmNlICpmZW5jZSkKPiA+ICB7Cj4gPiAg
ICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X3Jlc291cmNlX2NyZWF0ZV8zZCAqY21kX3A7Cj4gPiBA
QCAtODcxLDYgKzg3NCw3IEBAIHZpcnRpb19ncHVfY21kX3Jlc291cmNlX2NyZWF0ZV8zZChzdHJ1
Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2LAo+ID4KPiA+ICAgICAgICAgY21kX3AgPSB2aXJ0
aW9fZ3B1X2FsbG9jX2NtZCh2Z2RldiwgJnZidWYsIHNpemVvZigqY21kX3ApKTsKPiA+ICAgICAg
ICAgbWVtc2V0KGNtZF9wLCAwLCBzaXplb2YoKmNtZF9wKSk7Cj4gPiArICAgICAgIHZidWYtPm9i
anMgPSBvYmpzOwo+ID4KPiA+ICAgICAgICAgY21kX3AtPmhkci50eXBlID0gY3B1X3RvX2xlMzIo
VklSVElPX0dQVV9DTURfUkVTT1VSQ0VfQ1JFQVRFXzNEKTsKPiA+ICAgICAgICAgY21kX3AtPnJl
c291cmNlX2lkID0gY3B1X3RvX2xlMzIoYm8tPmh3X3Jlc19oYW5kbGUpOwo+ID4gLS0KPiA+IDIu
MTguMQo+ID4KPiA+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCj4gPiBkcmktZGV2ZWwgbWFpbGluZyBsaXN0Cj4gPiBkcmktZGV2ZWxAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCj4gPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2RyaS1kZXZlbAo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCj4gZHJpLWRldmVsIG1haWxpbmcgbGlzdAo+IGRyaS1kZXZlbEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2RyaS1kZXZlbApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
