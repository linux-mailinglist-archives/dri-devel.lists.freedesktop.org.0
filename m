Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id BC01C8BA58
	for <lists+dri-devel@lfdr.de>; Tue, 13 Aug 2019 15:33:41 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EE1356E14C;
	Tue, 13 Aug 2019 13:33:38 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9A4986E136
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 13:33:23 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id C0775E0D;
 Tue, 13 Aug 2019 15:33:20 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v3 5/9] drm/panel: Add driver for the NEC NL8048HL11 panel
Date: Tue, 13 Aug 2019 16:33:07 +0300
Message-Id: <20190813133311.26441-6-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190813133311.26441-1-laurent.pinchart@ideasonboard.com>
References: <20190813133311.26441-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1565703201;
 bh=0UEfxNx/FrUzZL4D/H2IT4FqnGMb/VeHiV9JtuqwWQc=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=KYWmiGnXyv3pottrXsRGKDkDBBntH9GWw49xWhiXUDRQyxYTK4sEz71VLbXST6tBH
 Dge1ME/h8mSw+LyvAs/epRQe0xFiaT4w4iUEuR1Bbuo1kj/e14gXRXZlzb5mKP4VpC
 bKqE8HwwNh0WxQIgCb4PRnsbeRavwUEiUPOjxMwI=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYW5lbCBpcyB1c2VkIG9uIHRoZSBab29tMi8zLzM2MzAgU0RQIGJvYXJkcy4KClRoZSBj
b2RlIGlzIGJhc2VkIG9uIHRoZSBvbWFwZHJtLXNwZWNpZmljIHBhbmVsLW5lYy1ubDgwNDhobDEx
IGRyaXZlcgoKU2lnbmVkLW9mZi1ieTogTGF1cmVudCBQaW5jaGFydCA8bGF1cmVudC5waW5jaGFy
dEBpZGVhc29uYm9hcmQuY29tPgotLS0KQ2hhbmdlcyBzaW5jZSB2MjoKCi0gQ2FsbCBkcm1fcGFu
ZWxfdW5wcmVwYXJlKCkgaW4gLnJlbW92ZSgpIGhhbmRsZXIKCkNoYW5nZXMgc2luY2UgdjE6Cgot
IE1lbnRpb24gYm9hcmRzIHVzaW5nIHRoZSBwYW5lbCBpbiBLY29uZmlnCi0gUmVuYW1lZCBubDgw
NDhfZGV2aWNlIHRvIG5sODA0OF9wYW5lbAotIENvbW1lbnRzIHVwZGF0ZXMKLSBTdG9yZSB3aWR0
aF9tbSBhbmQgaGVpZ2h0X21tIGluIGRybV9kaXNwbGF5X21vZGUKLSBVc2UgZHJtX3BhbmVsX2Rp
c2FibGUoKSBpbiAucmVtb3ZlKCkgaGFuZGxlcgotLS0KIGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9L
Y29uZmlnICAgICAgICAgICAgICAgIHwgICA4ICsKIGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtl
ZmlsZSAgICAgICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1u
ZWMtbmw4MDQ4aGwxMS5jIHwgMjQ4ICsrKysrKysrKysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdl
ZCwgMjU3IGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0v
cGFuZWwvcGFuZWwtbmVjLW5sODA0OGhsMTEuYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9wYW5lbC9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcKaW5kZXggODdj
ZGMzMzA2NzJiLi5kMjgxMzNjNmFhMGEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5l
bC9LY29uZmlnCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnCkBAIC0xMTksNiAr
MTE5LDE0IEBAIGNvbmZpZyBEUk1fUEFORUxfTEdfTEc0NTczCiAJICBTYXkgWSBoZXJlIGlmIHlv
dSB3YW50IHRvIGVuYWJsZSBzdXBwb3J0IGZvciBMRzQ1NzMgUkdCIHBhbmVsLgogCSAgVG8gY29t
cGlsZSB0aGlzIGRyaXZlciBhcyBhIG1vZHVsZSwgY2hvb3NlIE0gaGVyZS4KIAorY29uZmlnIERS
TV9QQU5FTF9ORUNfTkw4MDQ4SEwxMQorCXRyaXN0YXRlICJORUMgTkw4MDQ4SEwxMSBSR0IgcGFu
ZWwiCisJZGVwZW5kcyBvbiBHUElPTElCICYmIE9GICYmIFNQSQorCWhlbHAKKwkgIFNheSBZIGhl
cmUgaWYgeW91IHdhbnQgdG8gZW5hYmxlIHN1cHBvcnQgZm9yIHRoZSBORUMgTkw4MDQ4SEwxMSBS
R0IKKwkgIHBhbmVsIChmb3VuZCBvbiB0aGUgWm9vbTIvMy8zNjMwIFNEUCBib2FyZHMpLiBUbyBj
b21waWxlIHRoaXMgZHJpdmVyCisJICBhcyBhIG1vZHVsZSwgY2hvb3NlIE0gaGVyZS4KKwogY29u
ZmlnIERSTV9QQU5FTF9OT1ZBVEVLX05UMzkwMTYKIAl0cmlzdGF0ZSAiTm92YXRlayBOVDM5MDE2
IFJHQi9TUEkgcGFuZWwiCiAJZGVwZW5kcyBvbiBPRiAmJiBTUEkKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmls
ZQppbmRleCA5YmM2ZjNjNWJmOTYuLjgwNTJmOWE3YWQ2MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3BhbmVsL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmls
ZQpAQCAtMTAsNiArMTAsNyBAQCBvYmotJChDT05GSUdfRFJNX1BBTkVMX0pESV9MVDA3ME1FMDUw
MDApICs9IHBhbmVsLWpkaS1sdDA3MG1lMDUwMDAubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9L
SU5HRElTUExBWV9LRDA5N0QwNCkgKz0gcGFuZWwta2luZ2Rpc3BsYXkta2QwOTdkMDQubwogb2Jq
LSQoQ09ORklHX0RSTV9QQU5FTF9MR19MQjAzNVEwMikgKz0gcGFuZWwtbGctbGIwMzVxMDIubwog
b2JqLSQoQ09ORklHX0RSTV9QQU5FTF9MR19MRzQ1NzMpICs9IHBhbmVsLWxnLWxnNDU3My5vCitv
YmotJChDT05GSUdfRFJNX1BBTkVMX05FQ19OTDgwNDhITDExKSArPSBwYW5lbC1uZWMtbmw4MDQ4
aGwxMS5vCiBvYmotJChDT05GSUdfRFJNX1BBTkVMX05PVkFURUtfTlQzOTAxNikgKz0gcGFuZWwt
bm92YXRlay1udDM5MDE2Lm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfT0xJTUVYX0xDRF9PTElO
VVhJTk8pICs9IHBhbmVsLW9saW1leC1sY2Qtb2xpbnV4aW5vLm8KIG9iai0kKENPTkZJR19EUk1f
UEFORUxfT1JJU0VURUNIX09UTTgwMDlBKSArPSBwYW5lbC1vcmlzZXRlY2gtb3RtODAwOWEubwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLW5lYy1ubDgwNDhobDExLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtbmVjLW5sODA0OGhsMTEuYwpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjIxYmFlMmQwYTIzYQotLS0gL2Rldi9udWxs
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1uZWMtbmw4MDQ4aGwxMS5jCkBAIC0w
LDAgKzEsMjQ4IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCsKKy8qCisg
KiBORUMgTkw4MDQ4SEwxMSBQYW5lbCBEcml2ZXIKKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMTkg
VGV4YXMgSW5zdHJ1bWVudHMgSW5jb3Jwb3JhdGVkCisgKgorICogQmFzZWQgb24gdGhlIG9tYXBk
cm0tc3BlY2lmaWMgcGFuZWwtbmVjLW5sODA0OGhsMTEgZHJpdmVyCisgKgorICogQ29weXJpZ2h0
IChDKSAyMDEwIFRleGFzIEluc3RydW1lbnRzIEluY29ycG9yYXRlZAorICogQXV0aG9yOiBFcmlr
IEdpbGxpbmcgPGtvbmtlcnNAYW5kcm9pZC5jb20+CisgKi8KKworI2luY2x1ZGUgPGxpbnV4L2Rl
bGF5Lmg+CisjaW5jbHVkZSA8bGludXgvZ3Bpby9jb25zdW1lci5oPgorI2luY2x1ZGUgPGxpbnV4
L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L3BtLmg+CisjaW5jbHVkZSA8bGludXgvc3BpL3Nw
aS5oPgorCisjaW5jbHVkZSA8ZHJtL2RybV9jb25uZWN0b3IuaD4KKyNpbmNsdWRlIDxkcm0vZHJt
X21vZGVzLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9wYW5lbC5oPgorCitzdHJ1Y3Qgbmw4MDQ4X3Bh
bmVsIHsKKwlzdHJ1Y3QgZHJtX3BhbmVsIHBhbmVsOworCisJc3RydWN0IHNwaV9kZXZpY2UgKnNw
aTsKKwlzdHJ1Y3QgZ3Bpb19kZXNjICpyZXNldF9ncGlvOworfTsKKworI2RlZmluZSB0b19ubDgw
NDhfZGV2aWNlKHApIGNvbnRhaW5lcl9vZihwLCBzdHJ1Y3Qgbmw4MDQ4X3BhbmVsLCBwYW5lbCkK
Kworc3RhdGljIGludCBubDgwNDhfd3JpdGUoc3RydWN0IG5sODA0OF9wYW5lbCAqbGNkLCB1bnNp
Z25lZCBjaGFyIGFkZHIsCisJCQl1bnNpZ25lZCBjaGFyIHZhbHVlKQoreworCXU4IGRhdGFbNF0g
PSB7IHZhbHVlLCAweDAxLCBhZGRyLCAweDAwIH07CisJaW50IHJldDsKKworCXJldCA9IHNwaV93
cml0ZShsY2QtPnNwaSwgZGF0YSwgc2l6ZW9mKGRhdGEpKTsKKwlpZiAocmV0KQorCQlkZXZfZXJy
KCZsY2QtPnNwaS0+ZGV2LCAiU1BJIHdyaXRlIHRvICV1IGZhaWxlZDogJWRcbiIsCisJCQlhZGRy
LCByZXQpOworCisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCBubDgwNDhfaW5pdChzdHJ1
Y3Qgbmw4MDQ4X3BhbmVsICpsY2QpCit7CisJc3RhdGljIGNvbnN0IHN0cnVjdCB7CisJCXVuc2ln
bmVkIGNoYXIgYWRkcjsKKwkJdW5zaWduZWQgY2hhciBkYXRhOworCX0gbmw4MDQ4X2luaXRfc2Vx
W10gPSB7CisJCXsgICAzLCAweDAxIH0sIHsgICAwLCAweDAwIH0sIHsgICAxLCAweDAxIH0sIHsg
ICA0LCAweDAwIH0sCisJCXsgICA1LCAweDE0IH0sIHsgICA2LCAweDI0IH0sIHsgIDE2LCAweGQ3
IH0sIHsgIDE3LCAweDAwIH0sCisJCXsgIDE4LCAweDAwIH0sIHsgIDE5LCAweDU1IH0sIHsgIDIw
LCAweDAxIH0sIHsgIDIxLCAweDcwIH0sCisJCXsgIDIyLCAweDFlIH0sIHsgIDIzLCAweDI1IH0s
IHsgIDI0LCAweDI1IH0sIHsgIDI1LCAweDAyIH0sCisJCXsgIDI2LCAweDAyIH0sIHsgIDI3LCAw
eGEwIH0sIHsgIDMyLCAweDJmIH0sIHsgIDMzLCAweDBmIH0sCisJCXsgIDM0LCAweDBmIH0sIHsg
IDM1LCAweDBmIH0sIHsgIDM2LCAweDBmIH0sIHsgIDM3LCAweDBmIH0sCisJCXsgIDM4LCAweDBm
IH0sIHsgIDM5LCAweDAwIH0sIHsgIDQwLCAweDAyIH0sIHsgIDQxLCAweDAyIH0sCisJCXsgIDQy
LCAweDAyIH0sIHsgIDQzLCAweDBmIH0sIHsgIDQ0LCAweDBmIH0sIHsgIDQ1LCAweDBmIH0sCisJ
CXsgIDQ2LCAweDBmIH0sIHsgIDQ3LCAweDBmIH0sIHsgIDQ4LCAweDBmIH0sIHsgIDQ5LCAweDBm
IH0sCisJCXsgIDUwLCAweDAwIH0sIHsgIDUxLCAweDAyIH0sIHsgIDUyLCAweDAyIH0sIHsgIDUz
LCAweDAyIH0sCisJCXsgIDgwLCAweDBjIH0sIHsgIDgzLCAweDQyIH0sIHsgIDg0LCAweDQyIH0s
IHsgIDg1LCAweDQxIH0sCisJCXsgIDg2LCAweDE0IH0sIHsgIDg5LCAweDg4IH0sIHsgIDkwLCAw
eDAxIH0sIHsgIDkxLCAweDAwIH0sCisJCXsgIDkyLCAweDAyIH0sIHsgIDkzLCAweDBjIH0sIHsg
IDk0LCAweDFjIH0sIHsgIDk1LCAweDI3IH0sCisJCXsgIDk4LCAweDQ5IH0sIHsgIDk5LCAweDI3
IH0sIHsgMTAyLCAweDc2IH0sIHsgMTAzLCAweDI3IH0sCisJCXsgMTEyLCAweDAxIH0sIHsgMTEz
LCAweDBlIH0sIHsgMTE0LCAweDAyIH0sIHsgMTE1LCAweDBjIH0sCisJCXsgMTE4LCAweDBjIH0s
IHsgMTIxLCAweDMwIH0sIHsgMTMwLCAweDAwIH0sIHsgMTMxLCAweDAwIH0sCisJCXsgMTMyLCAw
eGZjIH0sIHsgMTM0LCAweDAwIH0sIHsgMTM2LCAweDAwIH0sIHsgMTM4LCAweDAwIH0sCisJCXsg
MTM5LCAweDAwIH0sIHsgMTQwLCAweDAwIH0sIHsgMTQxLCAweGZjIH0sIHsgMTQzLCAweDAwIH0s
CisJCXsgMTQ1LCAweDAwIH0sIHsgMTQ3LCAweDAwIH0sIHsgMTQ4LCAweDAwIH0sIHsgMTQ5LCAw
eDAwIH0sCisJCXsgMTUwLCAweGZjIH0sIHsgMTUyLCAweDAwIH0sIHsgMTU0LCAweDAwIH0sIHsg
MTU2LCAweDAwIH0sCisJCXsgMTU3LCAweDAwIH0sCisJfTsKKworCXVuc2lnbmVkIGludCBpOwor
CWludCByZXQ7CisKKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShubDgwNDhfaW5pdF9zZXEp
OyArK2kpIHsKKwkJcmV0ID0gbmw4MDQ4X3dyaXRlKGxjZCwgbmw4MDQ4X2luaXRfc2VxW2ldLmFk
ZHIsCisJCQkJICAgbmw4MDQ4X2luaXRfc2VxW2ldLmRhdGEpOworCQlpZiAocmV0IDwgMCkKKwkJ
CXJldHVybiByZXQ7CisJfQorCisJdWRlbGF5KDIwKTsKKworCXJldHVybiBubDgwNDhfd3JpdGUo
bGNkLCAyLCAweDAwKTsKK30KKworc3RhdGljIGludCBubDgwNDhfZGlzYWJsZShzdHJ1Y3QgZHJt
X3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3Qgbmw4MDQ4X3BhbmVsICpsY2QgPSB0b19ubDgwNDhf
ZGV2aWNlKHBhbmVsKTsKKworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChsY2QtPnJlc2V0X2dw
aW8sIDApOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbmw4MDQ4X2VuYWJsZShzdHJ1
Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3Qgbmw4MDQ4X3BhbmVsICpsY2QgPSB0b19u
bDgwNDhfZGV2aWNlKHBhbmVsKTsKKworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChsY2QtPnJl
c2V0X2dwaW8sIDEpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJt
X2Rpc3BsYXlfbW9kZSBubDgwNDhfbW9kZSA9IHsKKwkvKiAgTkVDIFBJWCBDbG9jayBSYXRpbmdz
IE1JTjoyMS44TUh6IFRZUDoyMy44TUh6IE1BWDoyNS43TUh6ICovCisJLmNsb2NrCT0gMjM4MDAs
CisJLmhkaXNwbGF5ID0gODAwLAorCS5oc3luY19zdGFydCA9IDgwMCArIDYsCisJLmhzeW5jX2Vu
ZCA9IDgwMCArIDYgKyAxLAorCS5odG90YWwgPSA4MDAgKyA2ICsgMSArIDQsCisJLnZkaXNwbGF5
ID0gNDgwLAorCS52c3luY19zdGFydCA9IDQ4MCArIDMsCisJLnZzeW5jX2VuZCA9IDQ4MCArIDMg
KyAxLAorCS52dG90YWwgPSA0ODAgKyAzICsgMSArIDQsCisJLnZyZWZyZXNoID0gNjAsCisJLnR5
cGUgPSBEUk1fTU9ERV9UWVBFX0RSSVZFUiB8IERSTV9NT0RFX1RZUEVfUFJFRkVSUkVELAorCS5m
bGFncyA9IERSTV9NT0RFX0ZMQUdfTkhTWU5DIHwgRFJNX01PREVfRkxBR19OVlNZTkMsCisJLndp
ZHRoX21tID0gODksCisJLmhlaWdodF9tbSA9IDUzLAorfTsKKworc3RhdGljIGludCBubDgwNDhf
Z2V0X21vZGVzKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCBkcm1fY29ubmVj
dG9yICpjb25uZWN0b3IgPSBwYW5lbC0+Y29ubmVjdG9yOworCXN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlICptb2RlOworCisJbW9kZSA9IGRybV9tb2RlX2R1cGxpY2F0ZShwYW5lbC0+ZHJtLCAmbmw4
MDQ4X21vZGUpOworCWlmICghbW9kZSkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlkcm1fbW9kZV9z
ZXRfbmFtZShtb2RlKTsKKwlkcm1fbW9kZV9wcm9iZWRfYWRkKGNvbm5lY3RvciwgbW9kZSk7CisK
Kwljb25uZWN0b3ItPmRpc3BsYXlfaW5mby53aWR0aF9tbSA9IG5sODA0OF9tb2RlLndpZHRoX21t
OworCWNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLmhlaWdodF9tbSA9IG5sODA0OF9tb2RlLmhlaWdo
dF9tbTsKKwljb25uZWN0b3ItPmRpc3BsYXlfaW5mby5idXNfZmxhZ3MgPSBEUk1fQlVTX0ZMQUdf
REVfSElHSAorCQkJCQkgIHwgRFJNX0JVU19GTEFHX1NZTkNfU0FNUExFX05FR0VER0UKKwkJCQkJ
ICB8IERSTV9CVVNfRkxBR19QSVhEQVRBX1NBTVBMRV9ORUdFREdFOworCisJcmV0dXJuIDE7Cit9
CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3BhbmVsX2Z1bmNzIG5sODA0OF9mdW5jcyA9IHsK
KwkuZGlzYWJsZSA9IG5sODA0OF9kaXNhYmxlLAorCS5lbmFibGUgPSBubDgwNDhfZW5hYmxlLAor
CS5nZXRfbW9kZXMgPSBubDgwNDhfZ2V0X21vZGVzLAorfTsKKworc3RhdGljIGludCBfX21heWJl
X3VudXNlZCBubDgwNDhfc3VzcGVuZChzdHJ1Y3QgZGV2aWNlICpkZXYpCit7CisJc3RydWN0IG5s
ODA0OF9wYW5lbCAqbGNkID0gZGV2X2dldF9kcnZkYXRhKGRldik7CisKKwlubDgwNDhfd3JpdGUo
bGNkLCAyLCAweDAxKTsKKwltc2xlZXAoNDApOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBp
bnQgX19tYXliZV91bnVzZWQgbmw4MDQ4X3Jlc3VtZShzdHJ1Y3QgZGV2aWNlICpkZXYpCit7CisJ
c3RydWN0IG5sODA0OF9wYW5lbCAqbGNkID0gZGV2X2dldF9kcnZkYXRhKGRldik7CisKKwkvKiBS
ZWluaXRpYWxpemUgdGhlIHBhbmVsLiAqLworCXNwaV9zZXR1cChsY2QtPnNwaSk7CisJbmw4MDQ4
X3dyaXRlKGxjZCwgMiwgMHgwMCk7CisJbmw4MDQ4X2luaXQobGNkKTsKKworCXJldHVybiAwOwor
fQorCitzdGF0aWMgU0lNUExFX0RFVl9QTV9PUFMobmw4MDQ4X3BtX29wcywgbmw4MDQ4X3N1c3Bl
bmQsIG5sODA0OF9yZXN1bWUpOworCitzdGF0aWMgaW50IG5sODA0OF9wcm9iZShzdHJ1Y3Qgc3Bp
X2RldmljZSAqc3BpKQoreworCXN0cnVjdCBubDgwNDhfcGFuZWwgKmxjZDsKKwlpbnQgcmV0Owor
CisJbGNkID0gZGV2bV9remFsbG9jKCZzcGktPmRldiwgc2l6ZW9mKCpsY2QpLCBHRlBfS0VSTkVM
KTsKKwlpZiAobGNkID09IE5VTEwpCisJCXJldHVybiAtRU5PTUVNOworCisJc3BpX3NldF9kcnZk
YXRhKHNwaSwgbGNkKTsKKwlsY2QtPnNwaSA9IHNwaTsKKworCWxjZC0+cmVzZXRfZ3BpbyA9IGRl
dm1fZ3Bpb2RfZ2V0KCZzcGktPmRldiwgInJlc2V0IiwgR1BJT0RfT1VUX0xPVyk7CisJaWYgKElT
X0VSUihsY2QtPnJlc2V0X2dwaW8pKSB7CisJCWRldl9lcnIoJnNwaS0+ZGV2LCAiZmFpbGVkIHRv
IHBhcnNlIHJlc2V0IGdwaW9cbiIpOworCQlyZXR1cm4gUFRSX0VSUihsY2QtPnJlc2V0X2dwaW8p
OworCX0KKworCXNwaS0+bW9kZSA9IFNQSV9NT0RFXzA7CisJc3BpLT5iaXRzX3Blcl93b3JkID0g
MzI7CisKKwlyZXQgPSBzcGlfc2V0dXAoc3BpKTsKKwlpZiAocmV0IDwgMCkgeworCQlkZXZfZXJy
KCZzcGktPmRldiwgImZhaWxlZCB0byBzZXR1cCBTUEk6ICVkXG4iLCByZXQpOworCQlyZXR1cm4g
cmV0OworCX0KKworCXJldCA9IG5sODA0OF9pbml0KGxjZCk7CisJaWYgKHJldCA8IDApCisJCXJl
dHVybiByZXQ7CisKKwlkcm1fcGFuZWxfaW5pdCgmbGNkLT5wYW5lbCk7CisJbGNkLT5wYW5lbC5k
ZXYgPSAmbGNkLT5zcGktPmRldjsKKwlsY2QtPnBhbmVsLmZ1bmNzID0gJm5sODA0OF9mdW5jczsK
KworCXJldHVybiBkcm1fcGFuZWxfYWRkKCZsY2QtPnBhbmVsKTsKK30KKworc3RhdGljIGludCBu
bDgwNDhfcmVtb3ZlKHN0cnVjdCBzcGlfZGV2aWNlICpzcGkpCit7CisJc3RydWN0IG5sODA0OF9w
YW5lbCAqbGNkID0gc3BpX2dldF9kcnZkYXRhKHNwaSk7CisKKwlkcm1fcGFuZWxfcmVtb3ZlKCZs
Y2QtPnBhbmVsKTsKKwlkcm1fcGFuZWxfZGlzYWJsZSgmbGNkLT5wYW5lbCk7CisJZHJtX3BhbmVs
X3VucHJlcGFyZSgmbGNkLT5wYW5lbCk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGNvbnN0
IHN0cnVjdCBvZl9kZXZpY2VfaWQgbmw4MDQ4X29mX21hdGNoW10gPSB7CisJeyAuY29tcGF0aWJs
ZSA9ICJuZWMsbmw4MDQ4aGwxMSIsIH0sCisJeyAvKiBzZW50aW5lbCAqLyB9LAorfTsKKworTU9E
VUxFX0RFVklDRV9UQUJMRShvZiwgbmw4MDQ4X29mX21hdGNoKTsKKworc3RhdGljIHN0cnVjdCBz
cGlfZHJpdmVyIG5sODA0OF9kcml2ZXIgPSB7CisJLnByb2JlCQk9IG5sODA0OF9wcm9iZSwKKwku
cmVtb3ZlCQk9IG5sODA0OF9yZW1vdmUsCisJLmRyaXZlcgkJPSB7CisJCS5uYW1lCT0gInBhbmVs
LW5lYy1ubDgwNDhobDExIiwKKwkJLnBtCT0gJm5sODA0OF9wbV9vcHMsCisJCS5vZl9tYXRjaF90
YWJsZSA9IG5sODA0OF9vZl9tYXRjaCwKKwl9LAorfTsKKworbW9kdWxlX3NwaV9kcml2ZXIobmw4
MDQ4X2RyaXZlcik7CisKK01PRFVMRV9BTElBUygic3BpOm5lYyxubDgwNDhobDExIik7CitNT0RV
TEVfQVVUSE9SKCJFcmlrIEdpbGxpbmcgPGtvbmtlcnNAYW5kcm9pZC5jb20+Iik7CitNT0RVTEVf
REVTQ1JJUFRJT04oIk5FQy1OTDgwNDhITDExIERyaXZlciIpOworTU9EVUxFX0xJQ0VOU0UoIkdQ
TCIpOwotLSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hhcnQKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
