Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 588BD117728
	for <lists+dri-devel@lfdr.de>; Mon,  9 Dec 2019 21:14:25 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 50B1D6E526;
	Mon,  9 Dec 2019 20:14:22 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x544.google.com (mail-ed1-x544.google.com
 [IPv6:2a00:1450:4864:20::544])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 157946E51C;
 Mon,  9 Dec 2019 20:14:20 +0000 (UTC)
Received: by mail-ed1-x544.google.com with SMTP id j17so13865666edp.3;
 Mon, 09 Dec 2019 12:14:19 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=ywh/fPF8YzV1CmuZ62hC+sb8SV7PDn0YD92J60m8Z5M=;
 b=Iyi02wsYFKXCxWtFmoFwi02QJHiDv7ImlOCPMAEDly6LcMs9flCzZiwF2XuFCqxbRG
 StkRl30q1/P1MkwXeecNc1u5kQ8MXMEZx4CDk4oNreiATDI598QlfTUqBqG7s7/RiaRZ
 QdDo57lrv3OiuJirRzvGGOQ1FciUW101Q5+1biCwY/55m/Jedh8+Xdn5XTFZtgLn0mEk
 QBFElbslYuFwWjzoCQ57Ay2QQePMakyEapnaaU1gvN3yawbylRDyb0/8XKq3nvJNwRdg
 /1/lLIDqveqgXspelCIgszXcoSM2ZJ+8yEf6WN8dX6tpzSnojlpgmRuHA1HsFtSrQQUl
 A9TQ==
X-Gm-Message-State: APjAAAUYvET2/SgTzuM5La4DJ1AbBVcygyTIRMFRmzFVpT6/Q8EomMte
 7swms4sYzar51+Tvc8kBpY9XnOtjCBY5iN2wJxk=
X-Google-Smtp-Source: APXvYqzgxjpqpYC6B6Zbo5mF6q/AeeF6hOLuvtN36iCGgPkDFJqnxamFeKgiFqz282EOMtXmox2F5xwbxEqK8nJSMaQ=
X-Received: by 2002:a17:906:958e:: with SMTP id
 r14mr32492382ejx.228.1575922458351; 
 Mon, 09 Dec 2019 12:14:18 -0800 (PST)
MIME-Version: 1.0
References: <1574465484-7115-1-git-send-email-jcrouse@codeaurora.org>
 <0101016e95755c16-5ab6f6e7-83bb-4d01-b746-7cc6ea265ad7-000000@us-west-2.amazonses.com>
In-Reply-To: <0101016e95755c16-5ab6f6e7-83bb-4d01-b746-7cc6ea265ad7-000000@us-west-2.amazonses.com>
From: Rob Clark <robdclark@gmail.com>
Date: Mon, 9 Dec 2019 12:14:08 -0800
Message-ID: <CAF6AEGt4G5y0obhhwm==ZWXaajH5fte0nhGQw3RAy6_2GQKkyw@mail.gmail.com>
Subject: Re: [PATCH v2 6/8] drm/msm: Refactor address space initialization
To: Jordan Crouse <jcrouse@codeaurora.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=ywh/fPF8YzV1CmuZ62hC+sb8SV7PDn0YD92J60m8Z5M=;
 b=i+oqJhwOCqolWGBm00Kb49q5F64UWzI4eKGPOYSg82c77Vcdy6MUKcUvq221GTIz+Y
 UNZAZVriHXUTQMby8Ri8wlpb6vsz13OBffGka5hubzb1+7hly/pgr0P8fA+PHuaGqZAH
 oYYGOWx1X4xP91ed1+nvJ8sEaxcec6AWEMcBpZjq9e78oCtTSAC2i6zzL+2hvmq6GVA0
 o0ZOVBJLNkNVhl48ndCk2TWWRzfDGckM7hwbd4fEk1+iWJrZmf/moO0nBEADNffU9oG4
 CUxvRsITqNEf0gHOUb7zGqEj21+5CwCLsIpaL5wVHjwdhH1DD7Kv+EsCSr+4lU/uaHZS
 LFmQ==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jeffrey Hugo <jeffrey.l.hugo@gmail.com>, David Airlie <airlied@linux.ie>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Linux Kernel Mailing List <linux-kernel@vger.kernel.org>,
 AngeloGioacchino Del Regno <kholk11@gmail.com>,
 Sam Ravnborg <sam@ravnborg.org>, Thomas Gleixner <tglx@linutronix.de>,
 Jonathan Marek <jonathan@marek.ca>, Will Deacon <will@kernel.org>,
 Mamta Shukla <mamtashukla555@gmail.com>, Wen Yang <wen.yang99@zte.com.cn>,
 Ben Dooks <ben.dooks@codethink.co.uk>,
 "moderated list:ARM/FREESCALE IMX / MXC ARM ARCHITECTURE"
 <linux-arm-kernel@lists.infradead.org>, Brian Masney <masneyb@onstation.org>,
 freedreno <freedreno@lists.freedesktop.org>,
 linux-arm-msm <linux-arm-msm@vger.kernel.org>,
 Sharat Masetty <smasetty@codeaurora.org>, Bruce Wang <bzwang@chromium.org>,
 Alexios Zavras <alexios.zavras@intel.com>, Sean Paul <sean@poorly.run>,
 Allison Randal <allison@lohutok.net>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Douglas Anderson <dianders@chromium.org>,
 "list@263.net:IOMMU DRIVERS <iommu@lists.linux-foundation.org>,
 Joerg Roedel <joro@8bytes.org>, " <iommu@lists.linux-foundation.org>,
 Drew Davenport <ddavenport@chromium.org>, Robin Murphy <robin.murphy@arm.com>,
 Georgi Djakov <georgi.djakov@linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBOb3YgMjIsIDIwMTkgYXQgMzozMiBQTSBKb3JkYW4gQ3JvdXNlIDxqY3JvdXNlQGNv
ZGVhdXJvcmEub3JnPiB3cm90ZToKPgo+IFJlZmFjdG9yIGhvdyBhZGRyZXNzIHNwYWNlIGluaXRp
YWxpemF0aW9uIHdvcmtzLiBJbnN0ZWFkIG9mIGhhdmluZyB0aGUKPiBhZGRyZXNzIHNwYWNlIGZ1
bmN0aW9uIGNyZWF0ZSB0aGUgTU1VIG9iamVjdCAoYW5kIHRodXMgcmVxdWlyZSBzZXBhcmF0ZSBi
dXQKPiBlcXVhbCBmdW5jdGlvbnMgZm9yIGdwdW1tdSBhbmQgaW9tbXUpIHVzZSBhIHNpbmdsZSBm
dW5jdGlvbiBhbmQgcGFzcyB0aGUKPiBNTVUgc3RydWN0IGluLiBNYWtlIHRoZSBnZW5lcmljIGNv
ZGUgY2xlYW5lciBieSB1c2luZyB0YXJnZXQgc3BlY2lmaWMKPiBmdW5jdGlvbnMgdG8gY3JlYXRl
IHRoZSBhZGRyZXNzIHNwYWNlIHNvIGEyeHggY2FuIGRvIGl0cyBvd24gdGhpbmcgaW4gaXRzCj4g
b3duIHNwYWNlLiAgRm9yIGFsbCB0aGUgb3RoZXIgdGFyZ2V0cyB1c2UgYSBnZW5lcmljIGhlbHBl
ciB0byBpbml0aWFsaXplCj4gSU9NTVUgYnV0IGxlYXZlIHRoZSBkb29yIG9wZW4gZm9yIG5ld2Vy
IHRhcmdldHMgdG8gdXNlIGN1c3RvbWl6YXRpb24KPiBpZiB0aGV5IG5lZWQgaXQuCj4KPiBTaWdu
ZWQtb2ZmLWJ5OiBKb3JkYW4gQ3JvdXNlIDxqY3JvdXNlQGNvZGVhdXJvcmEub3JnPgoKUmV2aWV3
ZWQtYnk6IFJvYiBDbGFyayA8cm9iZGNsYXJrQGdtYWlsLmNvbT4KCj4gLS0tCj4KPiAgZHJpdmVy
cy9ncHUvZHJtL21zbS9hZHJlbm8vYTJ4eF9ncHUuYyAgICB8IDE2ICsrKysrKysrKysKPiAgZHJp
dmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTN4eF9ncHUuYyAgICB8ICAxICsKPiAgZHJpdmVycy9n
cHUvZHJtL21zbS9hZHJlbm8vYTR4eF9ncHUuYyAgICB8ICAxICsKPiAgZHJpdmVycy9ncHUvZHJt
L21zbS9hZHJlbm8vYTV4eF9ncHUuYyAgICB8ICAxICsKPiAgZHJpdmVycy9ncHUvZHJtL21zbS9h
ZHJlbm8vYTZ4eF9ncHUuYyAgICB8ICAxICsKPiAgZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8v
YWRyZW5vX2dwdS5jICB8IDIzICsrKysrKysrKystLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9tc20v
YWRyZW5vL2FkcmVub19ncHUuaCAgfCAgOCArKysrKwo+ICBkcml2ZXJzL2dwdS9kcm0vbXNtL2Rp
c3AvZHB1MS9kcHVfa21zLmMgIHwgMTAgKysrLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9tc20vZGlz
cC9tZHA0L21kcDRfa21zLmMgfCAxNCArKysrKy0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL21zbS9k
aXNwL21kcDUvbWRwNV9jZmcuYyB8ICA0IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3Av
bWRwNS9tZHA1X2ttcy5jIHwgMTEgKysrKystLQo+ICBkcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9k
cnYuaCAgICAgICAgICAgIHwgIDggKystLS0KPiAgZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2Vt
X3ZtYS5jICAgICAgICB8IDUyICsrKysrLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gIGRy
aXZlcnMvZ3B1L2RybS9tc20vbXNtX2dwdS5jICAgICAgICAgICAgfCA0MCArKy0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ3B1LmggICAgICAgICAgICB8
ICA0ICstLQo+ICBkcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9pb21tdS5jICAgICAgICAgIHwgIDMg
KysKPiAgMTYgZmlsZXMgY2hhbmdlZCwgODMgaW5zZXJ0aW9ucygrKSwgMTE0IGRlbGV0aW9ucygt
KQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2EyeHhfZ3B1LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hMnh4X2dwdS5jCj4gaW5kZXggMWY4M2JjMS4u
NjBmNjQ3MiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hMnh4X2dw
dS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTJ4eF9ncHUuYwo+IEBAIC00
MDEsNiArNDAxLDIxIEBAIHN0YXRpYyBzdHJ1Y3QgbXNtX2dwdV9zdGF0ZSAqYTJ4eF9ncHVfc3Rh
dGVfZ2V0KHN0cnVjdCBtc21fZ3B1ICpncHUpCj4gICAgICAgICByZXR1cm4gc3RhdGU7Cj4gIH0K
Pgo+ICtzdGF0aWMgc3RydWN0IG1zbV9nZW1fYWRkcmVzc19zcGFjZSAqCj4gK2EyeHhfY3JlYXRl
X2FkZHJlc3Nfc3BhY2Uoc3RydWN0IG1zbV9ncHUgKmdwdSwgc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqcGRldikKPiArewo+ICsgICAgICAgc3RydWN0IG1zbV9tbXUgKm1tdSA9IG1zbV9ncHVtbXVf
bmV3KCZwZGV2LT5kZXYsIGdwdSk7Cj4gKyAgICAgICBzdHJ1Y3QgbXNtX2dlbV9hZGRyZXNzX3Nw
YWNlICphc3BhY2U7Cj4gKwo+ICsgICAgICAgYXNwYWNlID0gbXNtX2dlbV9hZGRyZXNzX3NwYWNl
X2NyZWF0ZShtbXUsICJncHUiLCBTWl8xNk0sCj4gKyAgICAgICAgICAgICAgIFNaXzE2TSArIDB4
ZmZmICogU1pfNjRLKTsKPiArCj4gKyAgICAgICBpZiAoSVNfRVJSKGFzcGFjZSkgJiYgIUlTX0VS
UihtbXUpKQo+ICsgICAgICAgICAgICAgICBtbXUtPmZ1bmNzLT5kZXN0cm95KG1tdSk7Cj4gKwo+
ICsgICAgICAgcmV0dXJuIGFzcGFjZTsKPiArfQo+ICsKPiAgLyogUmVnaXN0ZXIgb2Zmc2V0IGRl
ZmluZXMgZm9yIEEyWFggLSBjb3B5IG9mIEEzWFggKi8KPiAgc3RhdGljIGNvbnN0IHVuc2lnbmVk
IGludCBhMnh4X3JlZ2lzdGVyX29mZnNldHNbUkVHX0FEUkVOT19SRUdJU1RFUl9NQVhdID0gewo+
ICAgICAgICAgUkVHX0FEUkVOT19ERUZJTkUoUkVHX0FEUkVOT19DUF9SQl9CQVNFLCBSRUdfQVhY
WF9DUF9SQl9CQVNFKSwKPiBAQCAtNDI5LDYgKzQ0NCw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qg
YWRyZW5vX2dwdV9mdW5jcyBmdW5jcyA9IHsKPiAgI2VuZGlmCj4gICAgICAgICAgICAgICAgIC5n
cHVfc3RhdGVfZ2V0ID0gYTJ4eF9ncHVfc3RhdGVfZ2V0LAo+ICAgICAgICAgICAgICAgICAuZ3B1
X3N0YXRlX3B1dCA9IGFkcmVub19ncHVfc3RhdGVfcHV0LAo+ICsgICAgICAgICAgICAgICAuY3Jl
YXRlX2FkZHJlc3Nfc3BhY2UgPSBhMnh4X2NyZWF0ZV9hZGRyZXNzX3NwYWNlLAo+ICAgICAgICAg
fSwKPiAgfTsKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hM3h4
X2dwdS5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTN4eF9ncHUuYwo+IGluZGV4IDdh
ZDE0OTMuLjQxZTUxZTAgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8v
YTN4eF9ncHUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2EzeHhfZ3B1LmMK
PiBAQCAtNDQxLDYgKzQ0MSw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgYWRyZW5vX2dwdV9mdW5j
cyBmdW5jcyA9IHsKPiAgI2VuZGlmCj4gICAgICAgICAgICAgICAgIC5ncHVfc3RhdGVfZ2V0ID0g
YTN4eF9ncHVfc3RhdGVfZ2V0LAo+ICAgICAgICAgICAgICAgICAuZ3B1X3N0YXRlX3B1dCA9IGFk
cmVub19ncHVfc3RhdGVfcHV0LAo+ICsgICAgICAgICAgICAgICAuY3JlYXRlX2FkZHJlc3Nfc3Bh
Y2UgPSBhZHJlbm9faW9tbXVfY3JlYXRlX2FkZHJlc3Nfc3BhY2UsCj4gICAgICAgICB9LAo+ICB9
Owo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E0eHhfZ3B1LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNHh4X2dwdS5jCj4gaW5kZXggYjAxMzg4YS4u
MzY1NTQ0MCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNHh4X2dw
dS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTR4eF9ncHUuYwo+IEBAIC01
MzIsNiArNTMyLDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBhZHJlbm9fZ3B1X2Z1bmNzIGZ1bmNz
ID0gewo+ICAjZW5kaWYKPiAgICAgICAgICAgICAgICAgLmdwdV9zdGF0ZV9nZXQgPSBhNHh4X2dw
dV9zdGF0ZV9nZXQsCj4gICAgICAgICAgICAgICAgIC5ncHVfc3RhdGVfcHV0ID0gYWRyZW5vX2dw
dV9zdGF0ZV9wdXQsCj4gKyAgICAgICAgICAgICAgIC5jcmVhdGVfYWRkcmVzc19zcGFjZSA9IGFk
cmVub19pb21tdV9jcmVhdGVfYWRkcmVzc19zcGFjZSwKPiAgICAgICAgIH0sCj4gICAgICAgICAu
Z2V0X3RpbWVzdGFtcCA9IGE0eHhfZ2V0X3RpbWVzdGFtcCwKPiAgfTsKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTV4eF9ncHUuYyBiL2RyaXZlcnMvZ3B1L2RybS9t
c20vYWRyZW5vL2E1eHhfZ3B1LmMKPiBpbmRleCBiMDJlMjA0Li4wZjVkYjcyIDEwMDY0NAo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E1eHhfZ3B1LmMKPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vbXNtL2FkcmVuby9hNXh4X2dwdS5jCj4gQEAgLTE0MzIsNiArMTQzMiw3IEBAIHN0
YXRpYyBjb25zdCBzdHJ1Y3QgYWRyZW5vX2dwdV9mdW5jcyBmdW5jcyA9IHsKPiAgICAgICAgICAg
ICAgICAgLmdwdV9idXN5ID0gYTV4eF9ncHVfYnVzeSwKPiAgICAgICAgICAgICAgICAgLmdwdV9z
dGF0ZV9nZXQgPSBhNXh4X2dwdV9zdGF0ZV9nZXQsCj4gICAgICAgICAgICAgICAgIC5ncHVfc3Rh
dGVfcHV0ID0gYTV4eF9ncHVfc3RhdGVfcHV0LAo+ICsgICAgICAgICAgICAgICAuY3JlYXRlX2Fk
ZHJlc3Nfc3BhY2UgPSBhZHJlbm9faW9tbXVfY3JlYXRlX2FkZHJlc3Nfc3BhY2UsCj4gICAgICAg
ICB9LAo+ICAgICAgICAgLmdldF90aW1lc3RhbXAgPSBhNXh4X2dldF90aW1lc3RhbXAsCj4gIH07
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E2eHhfZ3B1LmMgYi9k
cml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNnh4X2dwdS5jCj4gaW5kZXggZGM4ZWMyYy4uNWRj
MGIyYyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNnh4X2dwdS5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTZ4eF9ncHUuYwo+IEBAIC04MzIs
NiArODMyLDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBhZHJlbm9fZ3B1X2Z1bmNzIGZ1bmNzID0g
ewo+ICAjaWYgZGVmaW5lZChDT05GSUdfRFJNX01TTV9HUFVfU1RBVEUpCj4gICAgICAgICAgICAg
ICAgIC5ncHVfc3RhdGVfZ2V0ID0gYTZ4eF9ncHVfc3RhdGVfZ2V0LAo+ICAgICAgICAgICAgICAg
ICAuZ3B1X3N0YXRlX3B1dCA9IGE2eHhfZ3B1X3N0YXRlX3B1dCwKPiArICAgICAgICAgICAgICAg
LmNyZWF0ZV9hZGRyZXNzX3NwYWNlID0gYWRyZW5vX2lvbW11X2NyZWF0ZV9hZGRyZXNzX3NwYWNl
LAo+ICAjZW5kaWYKPiAgICAgICAgIH0sCj4gICAgICAgICAuZ2V0X3RpbWVzdGFtcCA9IGE2eHhf
Z2V0X3RpbWVzdGFtcCwKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8v
YWRyZW5vX2dwdS5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2dwdS5jCj4g
aW5kZXggMDc4M2U0Yi4uMDljNTc4OTEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL21z
bS9hZHJlbm8vYWRyZW5vX2dwdS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8v
YWRyZW5vX2dwdS5jCj4gQEAgLTE1Nyw2ICsxNTcsMjMgQEAgaW50IGFkcmVub196YXBfc2hhZGVy
X2xvYWQoc3RydWN0IG1zbV9ncHUgKmdwdSwgdTMyIHBhc2lkKQo+ICAgICAgICAgcmV0dXJuIHph
cF9zaGFkZXJfbG9hZF9tZHQoZ3B1LCBhZHJlbm9fZ3B1LT5pbmZvLT56YXBmdywgcGFzaWQpOwo+
ICB9Cj4KPiArc3RydWN0IG1zbV9nZW1fYWRkcmVzc19zcGFjZSAqCj4gK2FkcmVub19pb21tdV9j
cmVhdGVfYWRkcmVzc19zcGFjZShzdHJ1Y3QgbXNtX2dwdSAqZ3B1LAo+ICsgICAgICAgICAgICAg
ICBzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgaW9t
bXVfZG9tYWluICppb21tdSA9IGlvbW11X2RvbWFpbl9hbGxvYygmcGxhdGZvcm1fYnVzX3R5cGUp
Owo+ICsgICAgICAgc3RydWN0IG1zbV9tbXUgKm1tdSA9IG1zbV9pb21tdV9uZXcoJnBkZXYtPmRl
diwgaW9tbXUpOwo+ICsgICAgICAgc3RydWN0IG1zbV9nZW1fYWRkcmVzc19zcGFjZSAqYXNwYWNl
Owo+ICsKPiArICAgICAgIGFzcGFjZSA9IG1zbV9nZW1fYWRkcmVzc19zcGFjZV9jcmVhdGUobW11
LCAiZ3B1IiwgU1pfMTZNLAo+ICsgICAgICAgICAgICAgICAweGZmZmZmZmYpOwo+ICsKPiArICAg
ICAgIGlmIChJU19FUlIoYXNwYWNlKSAmJiAhSVNfRVJSKG1tdSkpCj4gKyAgICAgICAgICAgICAg
IG1tdS0+ZnVuY3MtPmRlc3Ryb3kobW11KTsKPiArCj4gKyAgICAgICByZXR1cm4gYXNwYWNlOwo+
ICt9Cj4gKwo+ICBpbnQgYWRyZW5vX2dldF9wYXJhbShzdHJ1Y3QgbXNtX2dwdSAqZ3B1LCB1aW50
MzJfdCBwYXJhbSwgdWludDY0X3QgKnZhbHVlKQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgYWRyZW5v
X2dwdSAqYWRyZW5vX2dwdSA9IHRvX2FkcmVub19ncHUoZ3B1KTsKPiBAQCAtOTQ5LDEyICs5NjYs
NiBAQCBpbnQgYWRyZW5vX2dwdV9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkcm0sIHN0cnVjdCBw
bGF0Zm9ybV9kZXZpY2UgKnBkZXYsCj4KPiAgICAgICAgIGFkcmVub19ncHVfY29uZmlnLmlvbmFt
ZSA9ICJrZ3NsXzNkMF9yZWdfbWVtb3J5IjsKPgo+IC0gICAgICAgYWRyZW5vX2dwdV9jb25maWcu
dmFfc3RhcnQgPSBTWl8xNk07Cj4gLSAgICAgICBhZHJlbm9fZ3B1X2NvbmZpZy52YV9lbmQgPSAw
eGZmZmZmZmZmOwo+IC0gICAgICAgLyogbWF4aW11bSByYW5nZSBvZiBhMnh4IG1tdSAqLwo+IC0g
ICAgICAgaWYgKGFkcmVub19pc19hMnh4KGFkcmVub19ncHUpKQo+IC0gICAgICAgICAgICAgICBh
ZHJlbm9fZ3B1X2NvbmZpZy52YV9lbmQgPSBTWl8xNk0gKyAweGZmZiAqIFNaXzY0SzsKPiAtCj4g
ICAgICAgICBhZHJlbm9fZ3B1X2NvbmZpZy5ucl9yaW5ncyA9IG5yX3JpbmdzOwo+Cj4gICAgICAg
ICBhZHJlbm9fZ2V0X3B3cmxldmVscygmcGRldi0+ZGV2LCBncHUpOwo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hZHJlbm9fZ3B1LmggYi9kcml2ZXJzL2dwdS9kcm0v
bXNtL2FkcmVuby9hZHJlbm9fZ3B1LmgKPiBpbmRleCBlNzFhNzU3Li41YzFhYTEyIDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUuaAo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUuaAo+IEBAIC0yNjMsNiArMjYzLDE0
IEBAIGludCBhZHJlbm9fZ3B1X3N0YXRlX2dldChzdHJ1Y3QgbXNtX2dwdSAqZ3B1LCBzdHJ1Y3Qg
bXNtX2dwdV9zdGF0ZSAqc3RhdGUpOwo+ICBpbnQgYWRyZW5vX2dwdV9zdGF0ZV9wdXQoc3RydWN0
IG1zbV9ncHVfc3RhdGUgKnN0YXRlKTsKPgo+ICAvKgo+ICsgKiBDb21tb24gaGVscGVyIGZ1bmN0
aW9uIHRvIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgYWRkcmVzcyBzcGFjZSBmb3IgYXJtLXNtbXUK
PiArICogYXR0YWNoZWQgdGFyZ2V0cwo+ICsgKi8KPiArc3RydWN0IG1zbV9nZW1fYWRkcmVzc19z
cGFjZSAqCj4gK2FkcmVub19pb21tdV9jcmVhdGVfYWRkcmVzc19zcGFjZShzdHJ1Y3QgbXNtX2dw
dSAqZ3B1LAo+ICsgICAgICAgICAgICAgICBzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KTsK
PiArCj4gKy8qCj4gICAqIEZvciBhNXh4IGFuZCBhNnh4IHRhcmdldHMgbG9hZCB0aGUgemFwIHNo
YWRlciB0aGF0IGlzIHVzZWQgdG8gcHVsbCB0aGUgR1BVCj4gICAqIG91dCBvZiBzZWN1cmUgbW9k
ZQo+ICAgKi8KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1
X2ttcy5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2ttcy5jCj4gaW5kZXgg
YjA4MmIyMy4uNGU2ZWJiZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3Av
ZHB1MS9kcHVfa21zLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVf
a21zLmMKPiBAQCAtNzA0LDE4ICs3MDQsMTggQEAgc3RhdGljIGludCBfZHB1X2ttc19tbXVfaW5p
dChzdHJ1Y3QgZHB1X2ttcyAqZHB1X2ttcykKPiAgewo+ICAgICAgICAgc3RydWN0IGlvbW11X2Rv
bWFpbiAqZG9tYWluOwo+ICAgICAgICAgc3RydWN0IG1zbV9nZW1fYWRkcmVzc19zcGFjZSAqYXNw
YWNlOwo+ICsgICAgICAgc3RydWN0IG1zbV9tbXUgKm1tdTsKPgo+ICAgICAgICAgZG9tYWluID0g
aW9tbXVfZG9tYWluX2FsbG9jKCZwbGF0Zm9ybV9idXNfdHlwZSk7Cj4gICAgICAgICBpZiAoIWRv
bWFpbikKPiAgICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4KPiAtICAgICAgIGRvbWFpbi0+Z2Vv
bWV0cnkuYXBlcnR1cmVfc3RhcnQgPSAweDEwMDA7Cj4gLSAgICAgICBkb21haW4tPmdlb21ldHJ5
LmFwZXJ0dXJlX2VuZCA9IDB4ZmZmZmZmZmY7Cj4gKyAgICAgICBtbXUgPSBtc21faW9tbXVfbmV3
KGRwdV9rbXMtPmRldi0+ZGV2LCBkb21haW4pOwo+ICsgICAgICAgYXNwYWNlID0gbXNtX2dlbV9h
ZGRyZXNzX3NwYWNlX2NyZWF0ZShtbXUsICJkcHUxIiwKPiArICAgICAgICAgICAgICAgMHgxMDAw
LCAweGZmZmZmZmYpOwo+Cj4gLSAgICAgICBhc3BhY2UgPSBtc21fZ2VtX2FkZHJlc3Nfc3BhY2Vf
Y3JlYXRlKGRwdV9rbXMtPmRldi0+ZGV2LAo+IC0gICAgICAgICAgICAgICAgICAgICAgIGRvbWFp
biwgImRwdTEiKTsKPiAgICAgICAgIGlmIChJU19FUlIoYXNwYWNlKSkgewo+IC0gICAgICAgICAg
ICAgICBpb21tdV9kb21haW5fZnJlZShkb21haW4pOwo+ICsgICAgICAgICAgICAgICBtbXUtPmZ1
bmNzLT5kZXN0cm95KG1tdSk7Cj4gICAgICAgICAgICAgICAgIHJldHVybiBQVFJfRVJSKGFzcGFj
ZSk7Cj4gICAgICAgICB9Cj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNw
L21kcDQvbWRwNF9rbXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9tZHA0L21kcDRfa21z
LmMKPiBpbmRleCA5ZGJhMzdjLi4wODg5NzE4IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9tc20vZGlzcC9tZHA0L21kcDRfa21zLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rp
c3AvbWRwNC9tZHA0X2ttcy5jCj4gQEAgLTUxMCw5ICs1MTAsMTUgQEAgc3RydWN0IG1zbV9rbXMg
Km1kcDRfa21zX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldikKPiAgICAgICAgIG1kZWxheSgx
Nik7Cj4KPiAgICAgICAgIGlmIChjb25maWctPmlvbW11KSB7Cj4gLSAgICAgICAgICAgICAgIGFz
cGFjZSA9IG1zbV9nZW1fYWRkcmVzc19zcGFjZV9jcmVhdGUoJnBkZXYtPmRldiwKPiAtICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy0+aW9tbXUsICJtZHA0Iik7Cj4gKyAgICAg
ICAgICAgICAgIHN0cnVjdCBtc21fbW11ICptbXUgPSBtc21faW9tbXVfbmV3KCZwZGV2LT5kZXYs
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLT5pb21tdSk7Cj4gKwo+ICsgICAgICAg
ICAgICAgICBhc3BhY2UgID0gbXNtX2dlbV9hZGRyZXNzX3NwYWNlX2NyZWF0ZShtbXUsCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgIm1kcDQiLCAweDEwMDAsIDB4ZmZmZmZmZmYpOwo+ICsKPiAg
ICAgICAgICAgICAgICAgaWYgKElTX0VSUihhc3BhY2UpKSB7Cj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgaWYgKCFJU19FUlIobW11KSkKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IG1tdS0+ZnVuY3MtPmRlc3Ryb3kobW11KTsKPiAgICAgICAgICAgICAgICAgICAgICAgICByZXQg
PSBQVFJfRVJSKGFzcGFjZSk7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgZ290byBmYWlsOwo+
ICAgICAgICAgICAgICAgICB9Cj4gQEAgLTU2NSwxMCArNTcxLDYgQEAgc3RhdGljIHN0cnVjdCBt
ZHA0X3BsYXRmb3JtX2NvbmZpZyAqbWRwNF9nZXRfY29uZmlnKHN0cnVjdCBwbGF0Zm9ybV9kZXZp
Y2UgKmRldikKPiAgICAgICAgIC8qIFRPRE86IENoaXBzIHRoYXQgYXJlbid0IGFwcTgwNjQgaGF2
ZSBhIDIwMCBNaHogbWF4X2NsayAqLwo+ICAgICAgICAgY29uZmlnLm1heF9jbGsgPSAyNjY2Njcw
MDA7Cj4gICAgICAgICBjb25maWcuaW9tbXUgPSBpb21tdV9kb21haW5fYWxsb2MoJnBsYXRmb3Jt
X2J1c190eXBlKTsKPiAtICAgICAgIGlmIChjb25maWcuaW9tbXUpIHsKPiAtICAgICAgICAgICAg
ICAgY29uZmlnLmlvbW11LT5nZW9tZXRyeS5hcGVydHVyZV9zdGFydCA9IDB4MTAwMDsKPiAtICAg
ICAgICAgICAgICAgY29uZmlnLmlvbW11LT5nZW9tZXRyeS5hcGVydHVyZV9lbmQgPSAweGZmZmZm
ZmZmOwo+IC0gICAgICAgfQo+Cj4gICAgICAgICByZXR1cm4gJmNvbmZpZzsKPiAgfQo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvbWRwNS9tZHA1X2NmZy5jIGIvZHJpdmVy
cy9ncHUvZHJtL21zbS9kaXNwL21kcDUvbWRwNV9jZmcuYwo+IGluZGV4IDFmNDhmNjQuLmViZDY1
MWEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL21kcDUvbWRwNV9jZmcu
Ywo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9tZHA1L21kcDVfY2ZnLmMKPiBAQCAt
OTQxLDEwICs5NDEsNiBAQCBzdGF0aWMgc3RydWN0IG1kcDVfY2ZnX3BsYXRmb3JtICptZHA1X2dl
dF9jb25maWcoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqZGV2KQo+ICAgICAgICAgc3RhdGljIHN0
cnVjdCBtZHA1X2NmZ19wbGF0Zm9ybSBjb25maWcgPSB7fTsKPgo+ICAgICAgICAgY29uZmlnLmlv
bW11ID0gaW9tbXVfZG9tYWluX2FsbG9jKCZwbGF0Zm9ybV9idXNfdHlwZSk7Cj4gLSAgICAgICBp
ZiAoY29uZmlnLmlvbW11KSB7Cj4gLSAgICAgICAgICAgICAgIGNvbmZpZy5pb21tdS0+Z2VvbWV0
cnkuYXBlcnR1cmVfc3RhcnQgPSAweDEwMDA7Cj4gLSAgICAgICAgICAgICAgIGNvbmZpZy5pb21t
dS0+Z2VvbWV0cnkuYXBlcnR1cmVfZW5kID0gMHhmZmZmZmZmZjsKPiAtICAgICAgIH0KPgo+ICAg
ICAgICAgcmV0dXJuICZjb25maWc7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L21zbS9kaXNwL21kcDUvbWRwNV9rbXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9tZHA1
L21kcDVfa21zLmMKPiBpbmRleCA2NTNkYWIyLi4yMGJkZmY5IDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9tc20vZGlzcC9tZHA1L21kcDVfa21zLmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vbXNtL2Rpc3AvbWRwNS9tZHA1X2ttcy5jCj4gQEAgLTcyNCwxMyArNzI0LDIwIEBAIHN0cnVj
dCBtc21fa21zICptZHA1X2ttc19pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCj4gICAgICAg
ICBtZGVsYXkoMTYpOwo+Cj4gICAgICAgICBpZiAoY29uZmlnLT5wbGF0Zm9ybS5pb21tdSkgewo+
ICsgICAgICAgICAgICAgICBzdHJ1Y3QgbXNtX21tdSAqbW11Owo+ICsKPiAgICAgICAgICAgICAg
ICAgaW9tbXVfZGV2ID0gJnBkZXYtPmRldjsKPiAgICAgICAgICAgICAgICAgaWYgKCFpb21tdV9k
ZXYtPmlvbW11X2Z3c3BlYykKPiAgICAgICAgICAgICAgICAgICAgICAgICBpb21tdV9kZXYgPSBp
b21tdV9kZXYtPnBhcmVudDsKPgo+IC0gICAgICAgICAgICAgICBhc3BhY2UgPSBtc21fZ2VtX2Fk
ZHJlc3Nfc3BhY2VfY3JlYXRlKGlvbW11X2RldiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGNvbmZpZy0+cGxhdGZvcm0uaW9tbXUsICJtZHA1Iik7Cj4gKyAgICAgICAgICAgICAg
IG1tdSA9IG1zbV9pb21tdV9uZXcoaW9tbXVfZGV2LCBjb25maWctPnBsYXRmb3JtLmlvbW11KTsK
PiArCj4gKyAgICAgICAgICAgICAgIGFzcGFjZSA9IG1zbV9nZW1fYWRkcmVzc19zcGFjZV9jcmVh
dGUobW11LCAibWRwNSIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgMHgxMDAwLCAweGZmZmZm
ZmZmKTsKPiArCj4gICAgICAgICAgICAgICAgIGlmIChJU19FUlIoYXNwYWNlKSkgewo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIGlmICghSVNfRVJSKG1tdSkpCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBtbXUtPmZ1bmNzLT5kZXN0cm95KG1tdSk7Cj4gICAgICAgICAgICAgICAg
ICAgICAgICAgcmV0ID0gUFRSX0VSUihhc3BhY2UpOwo+ICAgICAgICAgICAgICAgICAgICAgICAg
IGdvdG8gZmFpbDsKPiAgICAgICAgICAgICAgICAgfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vbXNtL21zbV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2Rydi5oCj4gaW5k
ZXggNzE1NDdlNy4uMjIwMzcyOSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL21z
bV9kcnYuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2Rydi5oCj4gQEAgLTI0Nywx
MiArMjQ3LDggQEAgdm9pZCBtc21fZ2VtX2Nsb3NlX3ZtYShzdHJ1Y3QgbXNtX2dlbV9hZGRyZXNz
X3NwYWNlICphc3BhY2UsCj4gIHZvaWQgbXNtX2dlbV9hZGRyZXNzX3NwYWNlX3B1dChzdHJ1Y3Qg
bXNtX2dlbV9hZGRyZXNzX3NwYWNlICphc3BhY2UpOwo+Cj4gIHN0cnVjdCBtc21fZ2VtX2FkZHJl
c3Nfc3BhY2UgKgo+IC1tc21fZ2VtX2FkZHJlc3Nfc3BhY2VfY3JlYXRlKHN0cnVjdCBkZXZpY2Ug
KmRldiwgc3RydWN0IGlvbW11X2RvbWFpbiAqZG9tYWluLAo+IC0gICAgICAgICAgICAgICBjb25z
dCBjaGFyICpuYW1lKTsKPiAtCj4gLXN0cnVjdCBtc21fZ2VtX2FkZHJlc3Nfc3BhY2UgKgo+IC1t
c21fZ2VtX2FkZHJlc3Nfc3BhY2VfY3JlYXRlX2EyeHgoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1
Y3QgbXNtX2dwdSAqZ3B1LAo+IC0gICAgICAgICAgICAgICBjb25zdCBjaGFyICpuYW1lLCB1aW50
NjRfdCB2YV9zdGFydCwgdWludDY0X3QgdmFfZW5kKTsKPiArbXNtX2dlbV9hZGRyZXNzX3NwYWNl
X2NyZWF0ZShzdHJ1Y3QgbXNtX21tdSAqbW11LCBjb25zdCBjaGFyICpuYW1lLAo+ICsgICAgICAg
ICAgICAgICB1NjQgdmFfc3RhcnQsIHU2NCB2YV9lbmQpOwo+Cj4gIGludCBtc21fcmVnaXN0ZXJf
bW11KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBtc21fbW11ICptbXUpOwo+ICB2b2lk
IG1zbV91bnJlZ2lzdGVyX21tdShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgbXNtX21t
dSAqbW11KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2VtX3ZtYS5j
IGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2VtX3ZtYS5jCj4gaW5kZXggOTFkOTkzYS4uMDc1
Y2U1MiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9nZW1fdm1hLmMKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9nZW1fdm1hLmMKPiBAQCAtMTI1LDYzICsxMjUs
MjUgQEAgaW50IG1zbV9nZW1faW5pdF92bWEoc3RydWN0IG1zbV9nZW1fYWRkcmVzc19zcGFjZSAq
YXNwYWNlLAo+ICAgICAgICAgcmV0dXJuIDA7Cj4gIH0KPgo+IC0KPiAgc3RydWN0IG1zbV9nZW1f
YWRkcmVzc19zcGFjZSAqCj4gLW1zbV9nZW1fYWRkcmVzc19zcGFjZV9jcmVhdGUoc3RydWN0IGRl
dmljZSAqZGV2LCBzdHJ1Y3QgaW9tbXVfZG9tYWluICpkb21haW4sCj4gLSAgICAgICAgICAgICAg
IGNvbnN0IGNoYXIgKm5hbWUpCj4gLXsKPiAtICAgICAgIHN0cnVjdCBtc21fZ2VtX2FkZHJlc3Nf
c3BhY2UgKmFzcGFjZTsKPiAtICAgICAgIHU2NCBzdGFydCA9IGRvbWFpbi0+Z2VvbWV0cnkuYXBl
cnR1cmVfc3RhcnQ7Cj4gLSAgICAgICB1NjQgc2l6ZSA9IGRvbWFpbi0+Z2VvbWV0cnkuYXBlcnR1
cmVfZW5kIC0gc3RhcnQ7Cj4gLQo+IC0gICAgICAgYXNwYWNlID0ga3phbGxvYyhzaXplb2YoKmFz
cGFjZSksIEdGUF9LRVJORUwpOwo+IC0gICAgICAgaWYgKCFhc3BhY2UpCj4gLSAgICAgICAgICAg
ICAgIHJldHVybiBFUlJfUFRSKC1FTk9NRU0pOwo+IC0KPiAtICAgICAgIHNwaW5fbG9ja19pbml0
KCZhc3BhY2UtPmxvY2spOwo+IC0gICAgICAgYXNwYWNlLT5uYW1lID0gbmFtZTsKPiAtICAgICAg
IGFzcGFjZS0+bW11ID0gbXNtX2lvbW11X25ldyhkZXYsIGRvbWFpbik7Cj4gLSAgICAgICBpZiAo
SVNfRVJSKGFzcGFjZS0+bW11KSkgewo+IC0gICAgICAgICAgICAgICBpbnQgcmV0ID0gUFRSX0VS
Uihhc3BhY2UtPm1tdSk7Cj4gLQo+IC0gICAgICAgICAgICAgICBrZnJlZShhc3BhY2UpOwo+IC0g
ICAgICAgICAgICAgICByZXR1cm4gRVJSX1BUUihyZXQpOwo+IC0gICAgICAgfQo+IC0KPiAtICAg
ICAgIC8qCj4gLSAgICAgICAgKiBBdHRhY2hpbmcgdGhlIElPTU1VIGRldmljZSBjaGFuZ2VzIHRo
ZSBhcGVydHVyZSB2YWx1ZXMgc28gdXNlIHRoZQo+IC0gICAgICAgICogY2FjaGVkIHZhbHVlcyBp
bnN0ZWFkCj4gLSAgICAgICAgKi8KPiAtICAgICAgIGRybV9tbV9pbml0KCZhc3BhY2UtPm1tLCBz
dGFydCA+PiBQQUdFX1NISUZULCBzaXplID4+IFBBR0VfU0hJRlQpOwo+IC0KPiAtICAgICAgIGty
ZWZfaW5pdCgmYXNwYWNlLT5rcmVmKTsKPiAtCj4gLSAgICAgICByZXR1cm4gYXNwYWNlOwo+IC19
Cj4gLQo+IC1zdHJ1Y3QgbXNtX2dlbV9hZGRyZXNzX3NwYWNlICoKPiAtbXNtX2dlbV9hZGRyZXNz
X3NwYWNlX2NyZWF0ZV9hMnh4KHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IG1zbV9ncHUgKmdw
dSwKPiAtICAgICAgICAgICAgICAgY29uc3QgY2hhciAqbmFtZSwgdWludDY0X3QgdmFfc3RhcnQs
IHVpbnQ2NF90IHZhX2VuZCkKPiArbXNtX2dlbV9hZGRyZXNzX3NwYWNlX2NyZWF0ZShzdHJ1Y3Qg
bXNtX21tdSAqbW11LCBjb25zdCBjaGFyICpuYW1lLAo+ICsgICAgICAgICAgICAgICB1NjQgdmFf
c3RhcnQsIHU2NCB2YV9lbmQpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBtc21fZ2VtX2FkZHJlc3Nf
c3BhY2UgKmFzcGFjZTsKPiAgICAgICAgIHU2NCBzaXplID0gdmFfZW5kIC0gdmFfc3RhcnQ7Cj4K
PiArICAgICAgIGlmIChJU19FUlIobW11KSkKPiArICAgICAgICAgICAgICAgcmV0dXJuIEVSUl9D
QVNUKG1tdSk7Cj4gKwo+ICAgICAgICAgYXNwYWNlID0ga3phbGxvYyhzaXplb2YoKmFzcGFjZSks
IEdGUF9LRVJORUwpOwo+ICAgICAgICAgaWYgKCFhc3BhY2UpCj4gICAgICAgICAgICAgICAgIHJl
dHVybiBFUlJfUFRSKC1FTk9NRU0pOwo+Cj4gICAgICAgICBzcGluX2xvY2tfaW5pdCgmYXNwYWNl
LT5sb2NrKTsKPiAgICAgICAgIGFzcGFjZS0+bmFtZSA9IG5hbWU7Cj4gLSAgICAgICBhc3BhY2Ut
Pm1tdSA9IG1zbV9ncHVtbXVfbmV3KGRldiwgZ3B1KTsKPiAtICAgICAgIGlmIChJU19FUlIoYXNw
YWNlLT5tbXUpKSB7Cj4gLSAgICAgICAgICAgICAgIGludCByZXQgPSBQVFJfRVJSKGFzcGFjZS0+
bW11KTsKPiAtCj4gLSAgICAgICAgICAgICAgIGtmcmVlKGFzcGFjZSk7Cj4gLSAgICAgICAgICAg
ICAgIHJldHVybiBFUlJfUFRSKHJldCk7Cj4gLSAgICAgICB9Cj4gKyAgICAgICBhc3BhY2UtPm1t
dSA9IG1tdTsKPgo+IC0gICAgICAgZHJtX21tX2luaXQoJmFzcGFjZS0+bW0sICh2YV9zdGFydCA+
PiBQQUdFX1NISUZUKSwKPiAtICAgICAgICAgICAgICAgc2l6ZSA+PiBQQUdFX1NISUZUKTsKPiAr
ICAgICAgIGRybV9tbV9pbml0KCZhc3BhY2UtPm1tLCB2YV9zdGFydCA+PiBQQUdFX1NISUZULCBz
aXplID4+IFBBR0VfU0hJRlQpOwo+Cj4gICAgICAgICBrcmVmX2luaXQoJmFzcGFjZS0+a3JlZik7
Cj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ3B1LmMgYi9kcml2ZXJz
L2dwdS9kcm0vbXNtL21zbV9ncHUuYwo+IGluZGV4IGY3YmY4MGUuLmYxMWRmNTMgMTAwNjQ0Cj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ3B1LmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vbXNtL21zbV9ncHUuYwo+IEBAIC04MDMsNDIgKzgwMyw2IEBAIHN0YXRpYyBpbnQgZ2V0X2Ns
b2NrcyhzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2LCBzdHJ1Y3QgbXNtX2dwdSAqZ3B1KQo+
ICAgICAgICAgcmV0dXJuIDA7Cj4gIH0KPgo+IC1zdGF0aWMgc3RydWN0IG1zbV9nZW1fYWRkcmVz
c19zcGFjZSAqCj4gLW1zbV9ncHVfY3JlYXRlX2FkZHJlc3Nfc3BhY2Uoc3RydWN0IG1zbV9ncHUg
KmdwdSwgc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiwKPiAtICAgICAgICAgICAgICAgdWlu
dDY0X3QgdmFfc3RhcnQsIHVpbnQ2NF90IHZhX2VuZCkKPiAtewo+IC0gICAgICAgc3RydWN0IG1z
bV9nZW1fYWRkcmVzc19zcGFjZSAqYXNwYWNlOwo+IC0KPiAtICAgICAgIC8qCj4gLSAgICAgICAg
KiBTZXR1cCBJT01NVS4uIGV2ZW50dWFsbHkgd2Ugd2lsbCAoSSB0aGluaykgZG8gdGhpcyBvbmNl
IHBlciBjb250ZXh0Cj4gLSAgICAgICAgKiBhbmQgaGF2ZSBzZXBhcmF0ZSBwYWdlIHRhYmxlcyBw
ZXIgY29udGV4dC4gIEZvciBub3csIHRvIGtlZXAgdGhpbmdzCj4gLSAgICAgICAgKiBzaW1wbGUg
YW5kIHRvIGdldCBzb21ldGhpbmcgd29ya2luZywganVzdCB1c2UgYSBzaW5nbGUgYWRkcmVzcyBz
cGFjZToKPiAtICAgICAgICAqLwo+IC0gICAgICAgaWYgKCFhZHJlbm9faXNfYTJ4eCh0b19hZHJl
bm9fZ3B1KGdwdSkpKSB7Cj4gLSAgICAgICAgICAgICAgIHN0cnVjdCBpb21tdV9kb21haW4gKmlv
bW11ID0gaW9tbXVfZG9tYWluX2FsbG9jKCZwbGF0Zm9ybV9idXNfdHlwZSk7Cj4gLSAgICAgICAg
ICAgICAgIGlmICghaW9tbXUpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5VTEw7
Cj4gLQo+IC0gICAgICAgICAgICAgICBpb21tdS0+Z2VvbWV0cnkuYXBlcnR1cmVfc3RhcnQgPSB2
YV9zdGFydDsKPiAtICAgICAgICAgICAgICAgaW9tbXUtPmdlb21ldHJ5LmFwZXJ0dXJlX2VuZCA9
IHZhX2VuZDsKPiAtCj4gLSAgICAgICAgICAgICAgIERSTV9ERVZfSU5GTyhncHUtPmRldi0+ZGV2
LCAiJXM6IHVzaW5nIElPTU1VXG4iLCBncHUtPm5hbWUpOwo+IC0KPiAtICAgICAgICAgICAgICAg
YXNwYWNlID0gbXNtX2dlbV9hZGRyZXNzX3NwYWNlX2NyZWF0ZSgmcGRldi0+ZGV2LCBpb21tdSwg
ImdwdSIpOwo+IC0gICAgICAgICAgICAgICBpZiAoSVNfRVJSKGFzcGFjZSkpCj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgaW9tbXVfZG9tYWluX2ZyZWUoaW9tbXUpOwo+IC0gICAgICAgfSBlbHNl
IHsKPiAtICAgICAgICAgICAgICAgYXNwYWNlID0gbXNtX2dlbV9hZGRyZXNzX3NwYWNlX2NyZWF0
ZV9hMnh4KCZwZGV2LT5kZXYsIGdwdSwgImdwdSIsCj4gLSAgICAgICAgICAgICAgICAgICAgICAg
dmFfc3RhcnQsIHZhX2VuZCk7Cj4gLSAgICAgICB9Cj4gLQo+IC0gICAgICAgaWYgKElTX0VSUihh
c3BhY2UpKQo+IC0gICAgICAgICAgICAgICBEUk1fREVWX0VSUk9SKGdwdS0+ZGV2LT5kZXYsICJm
YWlsZWQgdG8gaW5pdCBtbXU6ICVsZFxuIiwKPiAtICAgICAgICAgICAgICAgICAgICAgICBQVFJf
RVJSKGFzcGFjZSkpOwo+IC0KPiAtICAgICAgIHJldHVybiBhc3BhY2U7Cj4gLX0KPiAtCj4gIGlu
dCBtc21fZ3B1X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRybSwgc3RydWN0IHBsYXRmb3JtX2Rl
dmljZSAqcGRldiwKPiAgICAgICAgICAgICAgICAgc3RydWN0IG1zbV9ncHUgKmdwdSwgY29uc3Qg
c3RydWN0IG1zbV9ncHVfZnVuY3MgKmZ1bmNzLAo+ICAgICAgICAgICAgICAgICBjb25zdCBjaGFy
ICpuYW1lLCBzdHJ1Y3QgbXNtX2dwdV9jb25maWcgKmNvbmZpZykKPiBAQCAtOTExLDggKzg3NSw4
IEBAIGludCBtc21fZ3B1X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRybSwgc3RydWN0IHBsYXRm
b3JtX2RldmljZSAqcGRldiwKPgo+ICAgICAgICAgbXNtX2RldmZyZXFfaW5pdChncHUpOwo+Cj4g
LSAgICAgICBncHUtPmFzcGFjZSA9IG1zbV9ncHVfY3JlYXRlX2FkZHJlc3Nfc3BhY2UoZ3B1LCBw
ZGV2LAo+IC0gICAgICAgICAgICAgICBjb25maWctPnZhX3N0YXJ0LCBjb25maWctPnZhX2VuZCk7
Cj4gKwo+ICsgICAgICAgZ3B1LT5hc3BhY2UgPSBncHUtPmZ1bmNzLT5jcmVhdGVfYWRkcmVzc19z
cGFjZShncHUsIHBkZXYpOwo+Cj4gICAgICAgICBpZiAoZ3B1LT5hc3BhY2UgPT0gTlVMTCkKPiAg
ICAgICAgICAgICAgICAgRFJNX0RFVl9JTkZPKGRybS0+ZGV2LCAiJXM6IG5vIElPTU1VLCBmYWxs
YmFjayB0byBWUkFNIGNhcnZlb3V0IVxuIiwgbmFtZSk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9tc20vbXNtX2dwdS5oIGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ3B1LmgKPiBp
bmRleCBhYjhmMGY5Yy4uNDFkODZjMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNt
L21zbV9ncHUuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2dwdS5oCj4gQEAgLTIx
LDggKzIxLDYgQEAgc3RydWN0IG1zbV9ncHVfc3RhdGU7Cj4KPiAgc3RydWN0IG1zbV9ncHVfY29u
ZmlnIHsKPiAgICAgICAgIGNvbnN0IGNoYXIgKmlvbmFtZTsKPiAtICAgICAgIHVpbnQ2NF90IHZh
X3N0YXJ0Owo+IC0gICAgICAgdWludDY0X3QgdmFfZW5kOwo+ICAgICAgICAgdW5zaWduZWQgaW50
IG5yX3JpbmdzOwo+ICB9Owo+Cj4gQEAgLTY0LDYgKzYyLDggQEAgc3RydWN0IG1zbV9ncHVfZnVu
Y3Mgewo+ICAgICAgICAgaW50ICgqZ3B1X3N0YXRlX3B1dCkoc3RydWN0IG1zbV9ncHVfc3RhdGUg
KnN0YXRlKTsKPiAgICAgICAgIHVuc2lnbmVkIGxvbmcgKCpncHVfZ2V0X2ZyZXEpKHN0cnVjdCBt
c21fZ3B1ICpncHUpOwo+ICAgICAgICAgdm9pZCAoKmdwdV9zZXRfZnJlcSkoc3RydWN0IG1zbV9n
cHUgKmdwdSwgdW5zaWduZWQgbG9uZyBmcmVxKTsKPiArICAgICAgIHN0cnVjdCBtc21fZ2VtX2Fk
ZHJlc3Nfc3BhY2UgKigqY3JlYXRlX2FkZHJlc3Nfc3BhY2UpCj4gKyAgICAgICAgICAgICAgIChz
dHJ1Y3QgbXNtX2dwdSAqZ3B1LCBzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KTsKPiAgfTsK
Pgo+ICBzdHJ1Y3QgbXNtX2dwdSB7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20v
bXNtX2lvbW11LmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9pb21tdS5jCj4gaW5kZXggNTQ0
YzUxOS4uZTc3M2VmOCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9pb21t
dS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21faW9tbXUuYwo+IEBAIC03MCw2ICs3
MCw5IEBAIHN0cnVjdCBtc21fbW11ICptc21faW9tbXVfbmV3KHN0cnVjdCBkZXZpY2UgKmRldiwg
c3RydWN0IGlvbW11X2RvbWFpbiAqZG9tYWluKQo+ICAgICAgICAgc3RydWN0IG1zbV9pb21tdSAq
aW9tbXU7Cj4gICAgICAgICBpbnQgcmV0Owo+Cj4gKyAgICAgICBpZiAoIWRvbWFpbikKPiArICAg
ICAgICAgICAgICAgcmV0dXJuIEVSUl9QVFIoLUVOT0RFVik7Cj4gKwo+ICAgICAgICAgaW9tbXUg
PSBremFsbG9jKHNpemVvZigqaW9tbXUpLCBHRlBfS0VSTkVMKTsKPiAgICAgICAgIGlmICghaW9t
bXUpCj4gICAgICAgICAgICAgICAgIHJldHVybiBFUlJfUFRSKC1FTk9NRU0pOwo+IC0tCj4gMi43
LjQKPgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmkt
ZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
