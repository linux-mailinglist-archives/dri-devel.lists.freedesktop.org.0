Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 00D89FA94A
	for <lists+dri-devel@lfdr.de>; Wed, 13 Nov 2019 05:58:49 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BBBFA6E55C;
	Wed, 13 Nov 2019 04:58:45 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from NAM05-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr720052.outbound.protection.outlook.com [40.107.72.52])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 074376E55C
 for <dri-devel@lists.freedesktop.org>; Wed, 13 Nov 2019 04:58:42 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=a3OivaZXC+oBcXiu4YUt3R/0O7TtqPgeNdvslit7tc6Sgk2of42IIwsNpKZUFkSDJXHc3x/T/akuKKNRbaIxzQy/bVbf7Yzlw0C7fS4QqgGHaRUVAuuTyYue9TMOsoxZns6ZGMRb6a0qY4Tp2NMat0iI48uU/kMp09c9ZUhZTdQMl7aTPsEHsUekJdrNXIbv/Abe6URNSuWHZ2F04pI9nw+GXEbmANU6gCnB3L0RR1o9bXhukhxZ6embDdapyd2liH+8UPWyn+zdZkWErlwbjgYbEfON1KuwqjMWeqAbmDF4jMjK+T5AZjjdjZJI3EdgGQccN3ryCSJSVPG9CJYqNw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=TLp58h0eKRTxUAkzRC2XNRQEGu6aW+FI79eT9j0OfXA=;
 b=llQuL78TAFmabt1bqD0W6tEjm5hz0Z7XdMMMUYhpE06SYzE8kjb/aNLZ7imFtPjKP8D2hZ40tzK+hd39E5m3HT6HcfuIJ5DioqUcXgaZsFgc3bvEvlpvHKw1h5trWaIPAVryqp5e1YhN1LMHUiGNEOQZdkqNPY+q27B9/7lUaVXF2AxlyDaKtXCurSr1X6aSYgP6YkrtgLlVofflGSdxb3zPy3PJsEi+OyBIwWds3I1/VQhSvkrGmXistLTAQlj4mtlBS63q45YAdDYxwICRRiZ7hg5koWry1E8rELOYCYGaXslP/iobQIepFLMG8YOtzdYKus/2lj+HcNaQL33o/A==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MN2PR12MB3312.namprd12.prod.outlook.com (20.179.80.215) by
 MN2PR12MB2928.namprd12.prod.outlook.com (20.179.83.91) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2430.24; Wed, 13 Nov 2019 04:58:40 +0000
Received: from MN2PR12MB3312.namprd12.prod.outlook.com
 ([fe80::39b7:e01c:5800:3c00]) by MN2PR12MB3312.namprd12.prod.outlook.com
 ([fe80::39b7:e01c:5800:3c00%6]) with mapi id 15.20.2430.027; Wed, 13 Nov 2019
 04:58:39 +0000
From: Flora Cui <flora.cui@amd.com>
To: brahma_hybrid_dev@amd.com,
	dri-devel@lists.freedesktop.org
Subject: [PATCH libdrm 3/4] tests/amdgpu: add gfx ring draw hang test
Date: Wed, 13 Nov 2019 12:58:11 +0800
Message-Id: <20191113045812.24465-3-flora.cui@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20191113045812.24465-1-flora.cui@amd.com>
References: <20191113045812.24465-1-flora.cui@amd.com>
X-ClientProxiedBy: HK0P153CA0042.APCP153.PROD.OUTLOOK.COM
 (2603:1096:203:17::30) To MN2PR12MB3312.namprd12.prod.outlook.com
 (2603:10b6:208:ab::23)
MIME-Version: 1.0
X-Mailer: git-send-email 2.17.1
X-Originating-IP: [180.167.199.189]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: c6f0698d-851f-427a-4bdb-08d767f6261d
X-MS-TrafficTypeDiagnostic: MN2PR12MB2928:
X-LD-Processed: 3dd8961f-e488-4e60-8e11-a82d994e183d,ExtAddr
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <MN2PR12MB29285E3D7E814D859ED21175FA760@MN2PR12MB2928.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:40;
X-Forefront-PRVS: 0220D4B98D
X-Forefront-Antispam-Report: SFV:NSPM;
 SFS:(10009020)(4636009)(1496009)(39860400002)(376002)(366004)(136003)(346002)(396003)(199004)(189003)(316002)(81156014)(44832011)(51416003)(52116002)(14454004)(186003)(81166006)(25786009)(2906002)(8936002)(305945005)(486006)(50226002)(7736002)(76176011)(1076003)(26005)(5660300002)(8676002)(66066001)(6666004)(36756003)(386003)(6506007)(99286004)(6116002)(14444005)(6486002)(66946007)(446003)(47776003)(11346002)(476003)(6436002)(66556008)(48376002)(3846002)(16586007)(478600001)(4326008)(86362001)(50466002)(66476007)(2616005)(6512007);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB2928;
 H:MN2PR12MB3312.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: q56M2TCCt+HSPYKYZKXchn0rFD3QR+JehqDj5Hb5o93veRcYniFmZdsbQjHVFDsmgy8n1HyHDEPKrhO2Opo/DUPVjM5mqgrlUp8ymUid1mdu3i6VopUepRghAAdADa9sy3ZhDDZF4GQhk9RUymsZac54NvnxQi81EA8otFK4BFFmD4/DAPQTGFPjgMFErrBojK0NTT0a6S//wHDo7o2RKuNgg8hQUkGXOG+Jku6Qdx1lr70bMFdSCMo8drwP91Mx3fm8dZkaUnLH99fMcIs4/XsZTD3f7sKL7DsquN3rZ8LxeuPSOLv2hhy3X6Y5WXFhOeQ+TSH0wgh6vk4HBgOW0yj5NUptRbrgdYS69nrI9ycHxQfBVxcI0wqJj4u3n3sBRzpFtf+mdwRNJoDJYXLpGF3FQIh7DeNUlYMB5jQb2qU4FiT93AbF8UxQXWm2IGq5
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: c6f0698d-851f-427a-4bdb-08d767f6261d
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 13 Nov 2019 04:58:39.9012 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: Kxncw/64lAwdo7wRjBOOPk+TSkwAXRebpGlYfor0KKNnssLlpqmA+t6XSLBuzh47
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB2928
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=TLp58h0eKRTxUAkzRC2XNRQEGu6aW+FI79eT9j0OfXA=;
 b=TflZHXR63c1R8Huia6VF1CKZbpAzUB2P/dRX7EYWPjnFXANW5uy4JzR8ZTLa5RRVq0f/rcrDTr9TgtZuEm1fFS5oLdjrS8pOdonwcxk+hF9mhxXzzf6KNj8eXDU97I0R5PTaw72GbFPByDOjYUHqsoQm1ZRcIfI3wI3y4QnUwtU=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Flora.Cui@amd.com; 
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Flora Cui <flora.cui@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Zm9yIGdmeDkKClNpZ25lZC1vZmYtYnk6IEZsb3JhIEN1aSA8ZmxvcmEuY3VpQGFtZC5jb20+Ci0t
LQogdGVzdHMvYW1kZ3B1L2FtZGdwdV90ZXN0LmMgICAgfCAgNSArKysrKwogdGVzdHMvYW1kZ3B1
L2FtZGdwdV90ZXN0LmggICAgfCAgMyArKy0KIHRlc3RzL2FtZGdwdS9iYXNpY190ZXN0cy5jICAg
IHwgNDEgKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0KIHRlc3RzL2FtZGdwdS9k
ZWFkbG9ja190ZXN0cy5jIHwgMjAgKysrKysrKysrKysrKysrKysKIDQgZmlsZXMgY2hhbmdlZCwg
NTUgaW5zZXJ0aW9ucygrKSwgMTQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvdGVzdHMvYW1k
Z3B1L2FtZGdwdV90ZXN0LmMgYi90ZXN0cy9hbWRncHUvYW1kZ3B1X3Rlc3QuYwppbmRleCBiZmY5
MGVkNi4uNjVmNWMzMDEgMTAwNjQ0Ci0tLSBhL3Rlc3RzL2FtZGdwdS9hbWRncHVfdGVzdC5jCisr
KyBiL3Rlc3RzL2FtZGdwdS9hbWRncHVfdGVzdC5jCkBAIC00ODQsNiArNDg0LDExIEBAIHN0YXRp
YyB2b2lkIGFtZGdwdV9kaXNhYmxlX3N1aXRlcygpCiAJCQkJImNvbXB1dGUgcmluZyBiYWQgc2xv
dyBkaXNwYXRjaCB0ZXN0IChzZXQgYW1kZ3B1LmxvY2t1cF90aW1lb3V0PTUwLDUwKSIsIENVX0ZB
TFNFKSkKIAkJCWZwcmludGYoc3RkZXJyLCAidGVzdCBkZWFjdGl2YXRpb24gZmFpbGVkIC0gJXNc
biIsIENVX2dldF9lcnJvcl9tc2coKSk7CiAKKwkvL2lmIChmYW1pbHlfaWQgPCBBTURHUFVfRkFN
SUxZX0FJIHx8IGZhbWlseV9pZCA+IEFNREdQVV9GQU1JTFlfUlYpCisJCWlmIChhbWRncHVfc2V0
X3Rlc3RfYWN0aXZlKERFQURMT0NLX1RFU1RTX1NUUiwKKwkJCQkiZ2Z4IHJpbmcgYmFkIGRyYXcg
dGVzdCAoc2V0IGFtZGdwdS5sb2NrdXBfdGltZW91dD01MCkiLCBDVV9GQUxTRSkpCisJCQlmcHJp
bnRmKHN0ZGVyciwgInRlc3QgZGVhY3RpdmF0aW9uIGZhaWxlZCAtICVzXG4iLCBDVV9nZXRfZXJy
b3JfbXNnKCkpOworCiAJaWYgKGFtZGdwdV9zZXRfdGVzdF9hY3RpdmUoQk9fVEVTVFNfU1RSLCAi
TWV0YWRhdGEiLCBDVV9GQUxTRSkpCiAJCWZwcmludGYoc3RkZXJyLCAidGVzdCBkZWFjdGl2YXRp
b24gZmFpbGVkIC0gJXNcbiIsIENVX2dldF9lcnJvcl9tc2coKSk7CiAKZGlmZiAtLWdpdCBhL3Rl
c3RzL2FtZGdwdS9hbWRncHVfdGVzdC5oIGIvdGVzdHMvYW1kZ3B1L2FtZGdwdV90ZXN0LmgKaW5k
ZXggNjUxZTRiYWYuLjZjYTU0Yjg2IDEwMDY0NAotLS0gYS90ZXN0cy9hbWRncHUvYW1kZ3B1X3Rl
c3QuaAorKysgYi90ZXN0cy9hbWRncHUvYW1kZ3B1X3Rlc3QuaApAQCAtMjQzLDcgKzI0Myw4IEBA
IGV4dGVybiBDVV9UZXN0SW5mbyBzeW5jb2JqX3RpbWVsaW5lX3Rlc3RzW107CiAKIHZvaWQgYW1k
Z3B1X2Rpc3BhdGNoX2hhbmdfaGVscGVyKGFtZGdwdV9kZXZpY2VfaGFuZGxlIGRldmljZV9oYW5k
bGUsIHVpbnQzMl90IGlwX3R5cGUpOwogdm9pZCBhbWRncHVfZGlzcGF0Y2hfaGFuZ19zbG93X2hl
bHBlcihhbWRncHVfZGV2aWNlX2hhbmRsZSBkZXZpY2VfaGFuZGxlLCB1aW50MzJfdCBpcF90eXBl
KTsKLQordm9pZCBhbWRncHVfbWVtY3B5X2RyYXdfdGVzdChhbWRncHVfZGV2aWNlX2hhbmRsZSBk
ZXZpY2VfaGFuZGxlLCB1aW50MzJfdCByaW5nLAorCQkJICAgICBpbnQgaGFuZyk7CiAvKioKICAq
IEhlbHBlciBmdW5jdGlvbnMKICAqLwpkaWZmIC0tZ2l0IGEvdGVzdHMvYW1kZ3B1L2Jhc2ljX3Rl
c3RzLmMgYi90ZXN0cy9hbWRncHUvYmFzaWNfdGVzdHMuYwppbmRleCAyMGU5NDljYy4uZTU1ZTZl
MTQgMTAwNjQ0Ci0tLSBhL3Rlc3RzL2FtZGdwdS9iYXNpY190ZXN0cy5jCisrKyBiL3Rlc3RzL2Ft
ZGdwdS9iYXNpY190ZXN0cy5jCkBAIC0zNjIsNyArMzYyLDggQEAgc3RhdGljIGNvbnN0IHVpbnQz
Ml90IHByZWFtYmxlY2FjaGVfZ2Z4OVtdID0gewogCiBlbnVtIHBzX3R5cGUgewogCVBTX0NPTlNU
LAotCVBTX1RFWAorCVBTX1RFWCwKKwlQU19IQU5HCiB9OwogCiBzdGF0aWMgY29uc3QgdWludDMy
X3QgcHNfY29uc3Rfc2hhZGVyX2dmeDlbXSA9IHsKQEAgLTI4ODcsNiArMjg4OCwxMiBAQCBzdGF0
aWMgaW50IGFtZGdwdV9kcmF3X2xvYWRfcHNfc2hhZGVyKHVpbnQ4X3QgKnB0ciwgaW50IHBzX3R5
cGUpCiAJCQlwYXRjaGluZm9fY29kZV9zaXplID0gcHNfdGV4X3NoYWRlcl9wYXRjaGluZm9fY29k
ZV9zaXplX2dmeDk7CiAJCQlwYXRjaGNvZGVfb2Zmc2V0ID0gcHNfdGV4X3NoYWRlcl9wYXRjaGlu
Zm9fb2Zmc2V0X2dmeDk7CiAJCQlicmVhazsKKwkJY2FzZSBQU19IQU5HOgorCQkJc2hhZGVyID0g
bWVtY3B5X3BzX2hhbmc7CisJCQlzaGFkZXJfc2l6ZSA9IHNpemVvZihtZW1jcHlfcHNfaGFuZyk7
CisKKwkJCW1lbWNweShwdHIsIHNoYWRlciwgc2hhZGVyX3NpemUpOworCQkJcmV0dXJuIDA7CiAJ
CWRlZmF1bHQ6CiAJCQlyZXR1cm4gLTE7CiAJCQlicmVhazsKQEAgLTMzNDAsNyArMzM0Nyw3IEBA
IHN0YXRpYyB2b2lkIGFtZGdwdV9tZW1jcHlfZHJhdyhhbWRncHVfZGV2aWNlX2hhbmRsZSBkZXZp
Y2VfaGFuZGxlLAogCQkJICAgICAgIGFtZGdwdV9ib19oYW5kbGUgYm9fc2hhZGVyX3ZzLAogCQkJ
ICAgICAgIHVpbnQ2NF90IG1jX2FkZHJlc3Nfc2hhZGVyX3BzLAogCQkJICAgICAgIHVpbnQ2NF90
IG1jX2FkZHJlc3Nfc2hhZGVyX3ZzLAotCQkJICAgICAgIHVpbnQzMl90IHJpbmcpCisJCQkgICAg
ICAgdWludDMyX3QgcmluZywgaW50IGhhbmcpCiB7CiAJYW1kZ3B1X2NvbnRleHRfaGFuZGxlIGNv
bnRleHRfaGFuZGxlOwogCWFtZGdwdV9ib19oYW5kbGUgYm9fZHN0LCBib19zcmMsIGJvX2NtZCwg
cmVzb3VyY2VzWzVdOwpAQCAtMzQ0NSwxNCArMzQ1MiwyMCBAQCBzdGF0aWMgdm9pZCBhbWRncHVf
bWVtY3B5X2RyYXcoYW1kZ3B1X2RldmljZV9oYW5kbGUgZGV2aWNlX2hhbmRsZSwKIAlyID0gYW1k
Z3B1X2NzX3F1ZXJ5X2ZlbmNlX3N0YXR1cygmZmVuY2Vfc3RhdHVzLAogCQkJCQkgQU1ER1BVX1RJ
TUVPVVRfSU5GSU5JVEUsCiAJCQkJCSAwLCAmZXhwaXJlZCk7Ci0JQ1VfQVNTRVJUX0VRVUFMKHIs
IDApOwotCUNVX0FTU0VSVF9FUVVBTChleHBpcmVkLCB0cnVlKTsKKwlpZiAoIWhhbmcpIHsKKwkJ
Q1VfQVNTRVJUX0VRVUFMKHIsIDApOworCQlDVV9BU1NFUlRfRVFVQUwoZXhwaXJlZCwgdHJ1ZSk7
CiAKLQkvKiB2ZXJpZnkgaWYgbWVtY3B5IHRlc3QgcmVzdWx0IG1lZXRzIHdpdGggZXhwZWN0ZWQg
Ki8KLQlpID0gMDsKLQl3aGlsZShpIDwgYm9fc2l6ZSkgewotCQlDVV9BU1NFUlRfRVFVQUwocHRy
X2RzdFtpXSwgcHRyX3NyY1tpXSk7Ci0JCWkrKzsKKwkJLyogdmVyaWZ5IGlmIG1lbWNweSB0ZXN0
IHJlc3VsdCBtZWV0cyB3aXRoIGV4cGVjdGVkICovCisJCWkgPSAwOworCQl3aGlsZShpIDwgYm9f
c2l6ZSkgeworCQkJQ1VfQVNTRVJUX0VRVUFMKHB0cl9kc3RbaV0sIHB0cl9zcmNbaV0pOworCQkJ
aSsrOworCQl9CisJfSBlbHNlIHsKKwkJciA9IGFtZGdwdV9jc19xdWVyeV9yZXNldF9zdGF0ZShj
b250ZXh0X2hhbmRsZSwgJmhhbmdfc3RhdGUsICZoYW5ncyk7CisJCUNVX0FTU0VSVF9FUVVBTChy
LCAwKTsKKwkJQ1VfQVNTRVJUX0VRVUFMKGhhbmdfc3RhdGUsIEFNREdQVV9DVFhfVU5LTk9XTl9S
RVNFVCk7CiAJfQogCiAJciA9IGFtZGdwdV9ib19saXN0X2Rlc3Ryb3koYm9fbGlzdCk7CkBAIC0z
NDcwLDcgKzM0ODMsOCBAQCBzdGF0aWMgdm9pZCBhbWRncHVfbWVtY3B5X2RyYXcoYW1kZ3B1X2Rl
dmljZV9oYW5kbGUgZGV2aWNlX2hhbmRsZSwKIAlDVV9BU1NFUlRfRVFVQUwociwgMCk7CiB9CiAK
LXN0YXRpYyB2b2lkIGFtZGdwdV9tZW1jcHlfZHJhd190ZXN0KGFtZGdwdV9kZXZpY2VfaGFuZGxl
IGRldmljZV9oYW5kbGUsIHVpbnQzMl90IHJpbmcpCit2b2lkIGFtZGdwdV9tZW1jcHlfZHJhd190
ZXN0KGFtZGdwdV9kZXZpY2VfaGFuZGxlIGRldmljZV9oYW5kbGUsIHVpbnQzMl90IHJpbmcsCisJ
CQkgICAgIGludCBoYW5nKQogewogCWFtZGdwdV9ib19oYW5kbGUgYm9fc2hhZGVyX3BzLCBib19z
aGFkZXJfdnM7CiAJdm9pZCAqcHRyX3NoYWRlcl9wczsKQEAgLTM0NzgsNiArMzQ5Miw3IEBAIHN0
YXRpYyB2b2lkIGFtZGdwdV9tZW1jcHlfZHJhd190ZXN0KGFtZGdwdV9kZXZpY2VfaGFuZGxlIGRl
dmljZV9oYW5kbGUsIHVpbnQzMl90CiAJdWludDY0X3QgbWNfYWRkcmVzc19zaGFkZXJfcHMsIG1j
X2FkZHJlc3Nfc2hhZGVyX3ZzOwogCWFtZGdwdV92YV9oYW5kbGUgdmFfc2hhZGVyX3BzLCB2YV9z
aGFkZXJfdnM7CiAJaW50IGJvX3NoYWRlcl9zaXplID0gNDA5NjsKKwllbnVtIHBzX3R5cGUgcHNf
dHlwZSA9IGhhbmcgPyBQU19IQU5HIDogUFNfVEVYOwogCWludCByOwogCiAJciA9IGFtZGdwdV9i
b19hbGxvY19hbmRfbWFwKGRldmljZV9oYW5kbGUsIGJvX3NoYWRlcl9zaXplLCA0MDk2LApAQCAt
MzQ5NCwxNCArMzUwOSwxNCBAQCBzdGF0aWMgdm9pZCBhbWRncHVfbWVtY3B5X2RyYXdfdGVzdChh
bWRncHVfZGV2aWNlX2hhbmRsZSBkZXZpY2VfaGFuZGxlLCB1aW50MzJfdAogCUNVX0FTU0VSVF9F
UVVBTChyLCAwKTsKIAltZW1zZXQocHRyX3NoYWRlcl92cywgMCwgYm9fc2hhZGVyX3NpemUpOwog
Ci0JciA9IGFtZGdwdV9kcmF3X2xvYWRfcHNfc2hhZGVyKHB0cl9zaGFkZXJfcHMsIFBTX1RFWCk7
CisJciA9IGFtZGdwdV9kcmF3X2xvYWRfcHNfc2hhZGVyKHB0cl9zaGFkZXJfcHMsIHBzX3R5cGUp
OwogCUNVX0FTU0VSVF9FUVVBTChyLCAwKTsKIAogCXIgPSBhbWRncHVfZHJhd19sb2FkX3ZzX3No
YWRlcihwdHJfc2hhZGVyX3ZzKTsKIAlDVV9BU1NFUlRfRVFVQUwociwgMCk7CiAKIAlhbWRncHVf
bWVtY3B5X2RyYXcoZGV2aWNlX2hhbmRsZSwgYm9fc2hhZGVyX3BzLCBib19zaGFkZXJfdnMsCi0J
CQltY19hZGRyZXNzX3NoYWRlcl9wcywgbWNfYWRkcmVzc19zaGFkZXJfdnMsIHJpbmcpOworCQkJ
bWNfYWRkcmVzc19zaGFkZXJfcHMsIG1jX2FkZHJlc3Nfc2hhZGVyX3ZzLCByaW5nLCBoYW5nKTsK
IAogCXIgPSBhbWRncHVfYm9fdW5tYXBfYW5kX2ZyZWUoYm9fc2hhZGVyX3BzLCB2YV9zaGFkZXJf
cHMsIG1jX2FkZHJlc3Nfc2hhZGVyX3BzLCBib19zaGFkZXJfc2l6ZSk7CiAJQ1VfQVNTRVJUX0VR
VUFMKHIsIDApOwpAQCAtMzUyMyw3ICszNTM4LDcgQEAgc3RhdGljIHZvaWQgYW1kZ3B1X2RyYXdf
dGVzdCh2b2lkKQogCiAJZm9yIChyaW5nX2lkID0gMDsgKDEgPDwgcmluZ19pZCkgJiBpbmZvLmF2
YWlsYWJsZV9yaW5nczsgcmluZ19pZCsrKSB7CiAJCWFtZGdwdV9tZW1zZXRfZHJhd190ZXN0KGRl
dmljZV9oYW5kbGUsIHJpbmdfaWQpOwotCQlhbWRncHVfbWVtY3B5X2RyYXdfdGVzdChkZXZpY2Vf
aGFuZGxlLCByaW5nX2lkKTsKKwkJYW1kZ3B1X21lbWNweV9kcmF3X3Rlc3QoZGV2aWNlX2hhbmRs
ZSwgcmluZ19pZCwgMCk7CiAJfQogfQogCmRpZmYgLS1naXQgYS90ZXN0cy9hbWRncHUvZGVhZGxv
Y2tfdGVzdHMuYyBiL3Rlc3RzL2FtZGdwdS9kZWFkbG9ja190ZXN0cy5jCmluZGV4IDQ0NGUzNDY2
Li4zNWIxMGI2YSAxMDA2NDQKLS0tIGEvdGVzdHMvYW1kZ3B1L2RlYWRsb2NrX3Rlc3RzLmMKKysr
IGIvdGVzdHMvYW1kZ3B1L2RlYWRsb2NrX3Rlc3RzLmMKQEAgLTExOCw2ICsxMTgsNyBAQCBzdGF0
aWMgdm9pZCBhbWRncHVfZGlzcGF0Y2hfaGFuZ19nZngodm9pZCk7CiBzdGF0aWMgdm9pZCBhbWRn
cHVfZGlzcGF0Y2hfaGFuZ19jb21wdXRlKHZvaWQpOwogc3RhdGljIHZvaWQgYW1kZ3B1X2Rpc3Bh
dGNoX2hhbmdfc2xvd19nZngodm9pZCk7CiBzdGF0aWMgdm9pZCBhbWRncHVfZGlzcGF0Y2hfaGFu
Z19zbG93X2NvbXB1dGUodm9pZCk7CitzdGF0aWMgdm9pZCBhbWRncHVfZHJhd19oYW5nX2dmeCh2
b2lkKTsKIAogQ1VfQk9PTCBzdWl0ZV9kZWFkbG9ja190ZXN0c19lbmFibGUodm9pZCkKIHsKQEAg
LTE5Niw2ICsxOTcsNyBAQCBDVV9UZXN0SW5mbyBkZWFkbG9ja190ZXN0c1tdID0gewogCXsgImNv
bXB1dGUgcmluZyBiYWQgZGlzcGF0Y2ggdGVzdCAoc2V0IGFtZGdwdS5sb2NrdXBfdGltZW91dD01
MCw1MCkiLCBhbWRncHVfZGlzcGF0Y2hfaGFuZ19jb21wdXRlIH0sCiAJeyAiZ2Z4IHJpbmcgYmFk
IHNsb3cgZGlzcGF0Y2ggdGVzdCAoc2V0IGFtZGdwdS5sb2NrdXBfdGltZW91dD01MCkiLCBhbWRn
cHVfZGlzcGF0Y2hfaGFuZ19zbG93X2dmeCB9LAogCXsgImNvbXB1dGUgcmluZyBiYWQgc2xvdyBk
aXNwYXRjaCB0ZXN0IChzZXQgYW1kZ3B1LmxvY2t1cF90aW1lb3V0PTUwLDUwKSIsIGFtZGdwdV9k
aXNwYXRjaF9oYW5nX3Nsb3dfY29tcHV0ZSB9LAorCXsgImdmeCByaW5nIGJhZCBkcmF3IHRlc3Qg
KHNldCBhbWRncHUubG9ja3VwX3RpbWVvdXQ9NTApIiwgYW1kZ3B1X2RyYXdfaGFuZ19nZnggfSwK
IAlDVV9URVNUX0lORk9fTlVMTCwKIH07CiAKQEAgLTUxNiwzICs1MTgsMjEgQEAgc3RhdGljIHZv
aWQgYW1kZ3B1X2Rpc3BhdGNoX2hhbmdfc2xvd19jb21wdXRlKHZvaWQpCiB7CiAJYW1kZ3B1X2Rp
c3BhdGNoX2hhbmdfc2xvd19oZWxwZXIoZGV2aWNlX2hhbmRsZSwgQU1ER1BVX0hXX0lQX0NPTVBV
VEUpOwogfQorCitzdGF0aWMgdm9pZCBhbWRncHVfZHJhd19oYW5nX2dmeCh2b2lkKQoreworCWlu
dCByOworCXN0cnVjdCBkcm1fYW1kZ3B1X2luZm9faHdfaXAgaW5mbzsKKwl1aW50MzJfdCByaW5n
X2lkOworCisJciA9IGFtZGdwdV9xdWVyeV9od19pcF9pbmZvKGRldmljZV9oYW5kbGUsIEFNREdQ
VV9IV19JUF9HRlgsIDAsICZpbmZvKTsKKwlDVV9BU1NFUlRfRVFVQUwociwgMCk7CisJaWYgKCFp
bmZvLmF2YWlsYWJsZV9yaW5ncykKKwkJcHJpbnRmKCJTS0lQIC4uLiBhcyB0aGVyZSdzIG5vIGdy
YXBoaWMgcmluZ1xuIik7CisKKwlmb3IgKHJpbmdfaWQgPSAwOyAoMSA8PCByaW5nX2lkKSAmIGlu
Zm8uYXZhaWxhYmxlX3JpbmdzOyByaW5nX2lkKyspIHsKKwkJYW1kZ3B1X21lbWNweV9kcmF3X3Rl
c3QoZGV2aWNlX2hhbmRsZSwgcmluZ19pZCwgMCk7CisJCWFtZGdwdV9tZW1jcHlfZHJhd190ZXN0
KGRldmljZV9oYW5kbGUsIHJpbmdfaWQsIDEpOworCQlhbWRncHVfbWVtY3B5X2RyYXdfdGVzdChk
ZXZpY2VfaGFuZGxlLCByaW5nX2lkLCAwKTsKKwl9Cit9Ci0tIAoyLjE3LjEKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
