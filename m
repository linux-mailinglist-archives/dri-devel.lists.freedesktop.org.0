Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 721511DB642
	for <lists+dri-devel@lfdr.de>; Wed, 20 May 2020 16:24:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F10C06E187;
	Wed, 20 May 2020 14:24:04 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3B5D86E187
 for <dri-devel@lists.freedesktop.org>; Wed, 20 May 2020 14:24:03 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from build.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 21241935-1500050 
 for multiple; Wed, 20 May 2020 15:23:49 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH] drm: Restore the NULL check for drm_gem_object_put()
Date: Wed, 20 May 2020 15:23:47 +0100
Message-Id: <20200520142347.29060-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <CACvgo51fM1K2Fg=stC2_cz_pnJypi50Lu_OGs0utGH9QEMS3wQ@mail.gmail.com>
References: <CACvgo51fM1K2Fg=stC2_cz_pnJypi50Lu_OGs0utGH9QEMS3wQ@mail.gmail.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Emil Velikov <emil.velikov@collabora.com>, Nirmoy Das <nirmoy.das@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Chris Wilson <chris@chris-wilson.co.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U29tZSB1c2VycyB3YW50IHRvIHBhc3MgTlVMTCB0byBkcm1fZ2VtX29iamVjdF9wdXQoKSwgYnV0
IHRob3NlIHVzaW5nCl9fZHJtX2dlbV9vYmplY3RfcHV0KCkgZGlkIG5vdC4gQ29tcHJvbWlzZSwg
aGF2ZSBib3RoIGFuZCBsZXQgdGhlCmNvbXBpbGVyIHNvcnQgaXQgb3V0LgoKZHJtX2dlbV9mYl9k
ZXN0cm95KCkgY2FsbHMgZHJtX2dlbV9vYmplY3RfcHV0KCkgd2l0aCBOVUxMIG9iaiBjYXVzaW5n
OgpbICAgMTEuNTg0MjA5XSBCVUc6IGtlcm5lbCBOVUxMIHBvaW50ZXIgZGVyZWZlcmVuY2UsIGFk
ZHJlc3M6IDAwMDAwMDAwMDAwMDAwMDAKWyAgIDExLjU4NDIxM10gI1BGOiBzdXBlcnZpc29yIHdy
aXRlIGFjY2VzcyBpbiBrZXJuZWwgbW9kZQpbICAgMTEuNTg0MjE1XSAjUEY6IGVycm9yX2NvZGUo
MHgwMDAyKSAtIG5vdC1wcmVzZW50IHBhZ2UKWyAgIDExLjU4NDIxNl0gUEdEIDAgUDREIDAKWyAg
IDExLjU4NDIyMF0gT29wczogMDAwMiBbIzFdIFNNUCBOT1BUSQpbICAgMTEuNTg0MjIzXSBDUFU6
IDcgUElEOiAxNTcxIENvbW06IGdub21lLXNoZWxsIFRhaW50ZWQ6IEcgICAgICAgICAgICBFICAg
ICA1LjcuMC1yYzEtMS1kZWZhdWx0KyAjMjcKWyAgIDExLjU4NDIyNV0gSGFyZHdhcmUgbmFtZTog
TWljcm8tU3RhciBJbnRlcm5hdGlvbmFsIENvLiwgTHRkLiBNUy03QTMxL1gzNzAgWFBPV0VSIEdB
TUlORyBUSVRBTklVTSAoTVMtN0EzMSksIEJJT1MgMS5NUiAxMi8wMy8yMDE5ClsgICAxMS41ODQy
MzddIFJJUDogMDAxMDpkcm1fZ2VtX2ZiX2Rlc3Ryb3krMHgyOC8weDcwIFtkcm1fa21zX2hlbHBl
cl0KPHNuaXA+ClsgICAxMS41ODQyNTZdIENhbGwgVHJhY2U6ClsgICAxMS41ODQyNzldICBkcm1f
bW9kZV9ybWZiKzB4MTg5LzB4MWMwIFtkcm1dClsgICAxMS41ODQyOTldICA/IGRybV9tb2RlX3Jt
ZmIrMHgxYzAvMHgxYzAgW2RybV0KWyAgIDExLjU4NDMxNF0gIGRybV9pb2N0bF9rZXJuZWwrMHhh
YS8weGYwIFtkcm1dClsgICAxMS41ODQzMjldICBkcm1faW9jdGwrMHgxZmYvMHgzYjAgW2RybV0K
WyAgIDExLjU4NDM0N10gID8gZHJtX21vZGVfcm1mYisweDFjMC8weDFjMCBbZHJtXQpbICAgMTEu
NTg0NDIxXSAgYW1kZ3B1X2RybV9pb2N0bCsweDQ5LzB4ODAgW2FtZGdwdV0KWyAgIDExLjU4NDQy
N10gIGtzeXNfaW9jdGwrMHg4Ny8weGMwClsgICAxMS41ODQ0MzBdICBfX3g2NF9zeXNfaW9jdGwr
MHgxNi8weDIwClsgICAxMS41ODQ0MzRdICBkb19zeXNjYWxsXzY0KzB4NWYvMHgyNDAKWyAgIDEx
LjU4NDQzOF0gIGVudHJ5X1NZU0NBTExfNjRfYWZ0ZXJfaHdmcmFtZSsweDQ0LzB4YTkKWyAgIDEx
LjU4NDQ0MF0gUklQOiAwMDMzOjB4N2YwZWY4MGY3MjI3CgpSZXBvcnRlZC1ieTogTmlybW95IERh
cyA8bmlybW95LmRhc0BhbWQuY29tPgpGaXhlczogYjVkMjUwNzQ0Y2NjICgiZHJtL2dlbTogZm9s
ZCBkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQgYW5kIF9fZHJtX2dlbV9vYmplY3RfcHV0KCki
KQpTaWduZWQtb2ZmLWJ5OiBDaHJpcyBXaWxzb24gPGNocmlzQGNocmlzLXdpbHNvbi5jby51az4K
Q2M6IE5pcm1veSBEYXMgPG5pcm1veS5kYXNAYW1kLmNvbT4KQ2M6IEVtaWwgVmVsaWtvdiA8ZW1p
bC52ZWxpa292QGNvbGxhYm9yYS5jb20+CkNjOiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4u
a29lbmlnQGFtZC5jb20+LgpBY2tlZC1ieTogTmlybW95IERhcyA8bmlybW95LmRhc0BhbWQuY29t
PgotLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuaCB8ICAyICst
CiBpbmNsdWRlL2RybS9kcm1fZ2VtLmggICAgICAgICAgICAgICAgICAgICAgfCAxMCArKysrKysr
KystCiAyIGZpbGVzIGNoYW5nZWQsIDEwIGluc2VydGlvbnMoKyksIDIgZGVsZXRpb25zKC0pCgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oCmluZGV4IGFiYTc1MTdj
MjgzNy4uMmZhYTQ4MWNjMThmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fb2JqZWN0LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X29iamVjdC5oCkBAIC0xMDUsNyArMTA1LDcgQEAgX19hdHRyaWJ1dGVfXygobm9ubnVsbCkpCiBz
dGF0aWMgaW5saW5lIHZvaWQKIGk5MTVfZ2VtX29iamVjdF9wdXQoc3RydWN0IGRybV9pOTE1X2dl
bV9vYmplY3QgKm9iaikKIHsKLQlkcm1fZ2VtX29iamVjdF9wdXQoJm9iai0+YmFzZSk7CisJX19k
cm1fZ2VtX29iamVjdF9wdXQoJm9iai0+YmFzZSk7CiB9CiAKICNkZWZpbmUgYXNzZXJ0X29iamVj
dF9oZWxkKG9iaikgZG1hX3Jlc3ZfYXNzZXJ0X2hlbGQoKG9iaiktPmJhc2UucmVzdikKZGlmZiAt
LWdpdCBhL2luY2x1ZGUvZHJtL2RybV9nZW0uaCBiL2luY2x1ZGUvZHJtL2RybV9nZW0uaAppbmRl
eCA1MjE3M2FiZGY1MDAuLjI0MTBmZjBhOGU4NiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJt
X2dlbS5oCisrKyBiL2luY2x1ZGUvZHJtL2RybV9nZW0uaApAQCAtMzYzLDYgKzM2MywxMyBAQCBz
dGF0aWMgaW5saW5lIHZvaWQgZHJtX2dlbV9vYmplY3RfZ2V0KHN0cnVjdCBkcm1fZ2VtX29iamVj
dCAqb2JqKQogCWtyZWZfZ2V0KCZvYmotPnJlZmNvdW50KTsKIH0KIAorX19hdHRyaWJ1dGVfXygo
bm9ubnVsbCkpCitzdGF0aWMgaW5saW5lIHZvaWQKK19fZHJtX2dlbV9vYmplY3RfcHV0KHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqb2JqKQoreworCWtyZWZfcHV0KCZvYmotPnJlZmNvdW50LCBkcm1f
Z2VtX29iamVjdF9mcmVlKTsKK30KKwogLyoqCiAgKiBkcm1fZ2VtX29iamVjdF9wdXQgLSBkcm9w
IGEgR0VNIGJ1ZmZlciBvYmplY3QgcmVmZXJlbmNlCiAgKiBAb2JqOiBHRU0gYnVmZmVyIG9iamVj
dApAQCAtMzcyLDcgKzM3OSw4IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBkcm1fZ2VtX29iamVjdF9n
ZXQoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCiBzdGF0aWMgaW5saW5lIHZvaWQKIGRybV9n
ZW1fb2JqZWN0X3B1dChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKIHsKLQlrcmVmX3B1dCgm
b2JqLT5yZWZjb3VudCwgZHJtX2dlbV9vYmplY3RfZnJlZSk7CisJaWYgKG9iaikKKwkJX19kcm1f
Z2VtX29iamVjdF9wdXQob2JqKTsKIH0KIAogdm9pZCBkcm1fZ2VtX29iamVjdF9wdXRfbG9ja2Vk
KHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKTsKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApk
cmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
