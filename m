Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id F079C5E5B2
	for <lists+dri-devel@lfdr.de>; Wed,  3 Jul 2019 15:45:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DDA1F6E130;
	Wed,  3 Jul 2019 13:45:46 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 192096E130;
 Wed,  3 Jul 2019 13:45:46 +0000 (UTC)
Received: from mail-qt1-f170.google.com (mail-qt1-f170.google.com
 [209.85.160.170])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 8F3F8218A4;
 Wed,  3 Jul 2019 13:45:45 +0000 (UTC)
Received: by mail-qt1-f170.google.com with SMTP id h18so922945qtm.9;
 Wed, 03 Jul 2019 06:45:45 -0700 (PDT)
X-Gm-Message-State: APjAAAVrKLoJDv9dtbp9/+iWWt5nbu+eDLV8AdGicLbyIHiRSHr/MVNl
 M3W5MNAgrkri/GKmd08xFs528lMmWg6c8tNykQ==
X-Google-Smtp-Source: APXvYqwE71Nf2WUV5lfecFJSZMZOTUxA1tvplns6WKIBwS60Erua6kreXdwtSu7KhDSN2o4RhHJR1dSk2hm7ycT4UDg=
X-Received: by 2002:ac8:368a:: with SMTP id a10mr31020078qtc.143.1562161544774; 
 Wed, 03 Jul 2019 06:45:44 -0700 (PDT)
MIME-Version: 1.0
References: <20190703133357.10217-1-boris.brezillon@collabora.com>
In-Reply-To: <20190703133357.10217-1-boris.brezillon@collabora.com>
From: Rob Herring <robh+dt@kernel.org>
Date: Wed, 3 Jul 2019 07:45:32 -0600
X-Gmail-Original-Message-ID: <CAL_JsqLb3qjzp8+9mj3SA=E_avsF7VnC=vji9YvePHvoiqgNgg@mail.gmail.com>
Message-ID: <CAL_JsqLb3qjzp8+9mj3SA=E_avsF7VnC=vji9YvePHvoiqgNgg@mail.gmail.com>
Subject: Re: [RFC PATCH] mesa: Export BOs in RW mode
To: Boris Brezillon <boris.brezillon@collabora.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=kernel.org; s=default; t=1562161545;
 bh=X7qp/2zCg93Tno8ZBJi6Oax2CdzJdScc5PZlWcn1MeQ=;
 h=References:In-Reply-To:From:Date:Subject:To:Cc:From;
 b=j0E2+HegK1mjzk2SuxjOC0Lw2nSLaCH3k6svBLNiTJzJEBRKSfXGTeTNI1W4P51SC
 Czg2KjhL15kNqG3EDgDnLIzWb107TbMWP6OxEIFpS5zSg+p9BNSh3OCklZ+3FL1Kq+
 Uu3o5PmAETn4U6nicLWO0RL6ki+D+hidn5ljwEPA=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: ML mesa-dev <mesa-dev@lists.freedesktop.org>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>,
 Steven Price <steven.price@arm.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBKdWwgMywgMjAxOSBhdCA3OjM0IEFNIEJvcmlzIEJyZXppbGxvbgo8Ym9yaXMuYnJl
emlsbG9uQGNvbGxhYm9yYS5jb20+IHdyb3RlOgo+Cj4gRXhwb3J0ZWQgQk9zIG1pZ2h0IGJlIGlt
cG9ydGVkIGJhY2ssIHRoZW4gbW1hcCgpLWVkIHRvIGJlIHdyaXR0ZW4KPiB0b28uIE1vc3QgZHJp
dmVycyBoYW5kbGUgdGhhdCBieSBtbWFwKCktaW5nIHRoZSBHRU0gaGFuZGxlIGFmdGVyIGl0J3MK
PiBiZWVuIGltcG9ydGVkLCBidXQsIGFjY29yZGluZyB0byBbMV0sIHRoaXMgaXMgaWxsZWdhbC4K
Ckl0J3Mgbm90IGlsbGVnYWwsIGJ1dCBpcyBzdXBwb3NlZCB0byBnbyB0aHJ1IHRoZSBkbWFidWYg
bW1hcApmdW5jdGlvbnMuIEhvd2V2ZXIsIG5vbmUgb2YgdGhlIGRyaXZlciBJJ3ZlIGxvb2tlZCBh
dCAoZXRuYXZpdiwgbXNtLAp2M2QsIHZnZW0pIGRvIHRoYXQuIEl0IHByb2JhYmx5IHdvcmtzIGJl
Y2F1c2UgaXQncyB0aGUgc2FtZSBkcml2ZXIKZG9pbmcgdGhlIGltcG9ydCBhbmQgZXhwb3J0IG9y
IGJvdGggZHJpdmVycyBoYXZlIGVzc2VudGlhbGx5IHRoZSBzYW1lCmltcGxlbWVudGF0aW9ucy4K
Cj4gVGhlIHBhbmZyb3N0Cj4gZHJpdmVyIGhhcyByZWNlbnRseSBzd2l0Y2hlZCB0byB0aGlzIGdl
bmVyaWMgaGVscGVyICh3aGljaCB3YXMgcmVuYW1lZAo+IGludG8gZHJtX2dlbV9tYXBfb2Zmc2V0
KCkgaW4gdGhlIG1lYW50aW1lKSBbMl0sIGFuZCBtbWFwKCktaW5nCj4gb2YgaW1wb3J0ZWQgQk9z
IG5vdyBmYWlscy4KCkkgdGhpbmsgSSdtIGdvaW5nIHRvIHJldmVydCB0aGlzLgoKPiBOb3cgSSdt
IHdvbmRlcmluZyBob3cgdGhpcyBzaG91bGQgYmUgc29sdmVkLiBJIGd1ZXNzIHRoZSBmaXJzdCBx
dWVzdGlvbgo+IGlzLCBpcyBtbWFwKCktaW5nIG9mIGltcG9ydGVkIEJPcyByZWFsbHkgZm9yYmlk
ZGVuIGZvciBhbGwgQk9zPyBJIGd1ZXNzCj4gY2FsbGluZyBtbWFwKCkgb24gYSBidWZmZXIgdGhh
dCdzIGJlZW4gZXhwb3J0ZWQgYnkgdGhlIERSTSBkcml2ZXIgaXRzZWxmCj4gdGhlbiByZS1pbXBv
cnRlZCBzaG91bGRuJ3QgaHVydCwgc28gbWF5YmUgd2UgY2FuIGNoZWNrIHRoYXQgYmVmb3JlCj4g
ZmFpbGluZy4KPgo+IE5vdywgaWYgd2UgcmVhbGx5IHdhbnQgdG8gZm9yYmlkIG1tYXAoKSBvbiBp
bXBvcnRlZCBCT3MsIHRoYXQgbWVhbnMgd2UKPiBuZWVkIGEgc29sdXRpb24gdG8gbW1hcCgpIHRo
ZSBkbWFidWYgb2JqZWN0IGRpcmVjdGx5LCBhbmQgc29tZXRpbWVzIHRoaXMKPiBtYXBwaW5nIHdp
bGwgcmVxdWVzdCBSVyBwZXJtaXNzaW9ucy4gVGhlIHByb2JsZW0gaXMsIGFsbCBmdW5jdGlvbgo+
IGV4cG9ydGluZyBCT3MgaW4gbWVzYSBhcmUgZXhwb3J0aW5nIHRoZW0gaW4gUk8tbW9kZSAocmVz
dWx0aW5nIEZEIGlzCj4gT19SRUFEKSwgdGh1cyBwcmV2ZW50aW5nIG1tYXAoKXMgaW4gUlcgbW9k
ZS4KPgo+IFRoaXMgcGF0Y2ggbW9kaWZpZXMgYWxsCj4gZHJtUHJpbWVIYW5kbGVUb0ZEKCkvaW9j
dGwoRFJNX0lPQ1RMX1BSSU1FX0hBTkRMRV9UT19GRCkgY2FsbCBzaXRlcwo+IHRvIHBhc3MgdGhl
IERSTV9SRFdSIGZsYWcgc28gdGhhdCB3aGF0J3MgZGVzY3JpYmVkIGFib3ZlIGJlY29tZXMKPiBw
b3NzaWJsZS4KPgo+IEknbSBub3Qgc2F5aW5nIHRoaXMgaXMgd2hhdCB3ZSBzaG91bGQgZG8sIGl0
J3MgbW9yZSBhIHdheSB0byBzdGFydCB0aGUKPiBkaXNjdXNzaW9uLiBGZWVsIGZyZWUgdG8gcHJv
cG9zZSBhbHRlcm5pdmVzIHRvIHRoaXMgc29sdXRpb24uCj4KPiBbMV1odHRwczovL2dpdC5rZXJu
ZWwub3JnL3B1Yi9zY20vbGludXgva2VybmVsL2dpdC90b3J2YWxkcy9saW51eC5naXQvdHJlZS9k
cml2ZXJzL2dwdS9kcm0vZHJtX2dlbS5jP2g9djUuMi1yYzcjbjMxOAo+IFsyXWh0dHBzOi8vY2dp
dC5mcmVlZGVza3RvcC5vcmcvZHJtL2RybS1taXNjL2NvbW1pdC9kcml2ZXJzL2dwdS9kcm0vcGFu
ZnJvc3Q/aWQ9NTgzYmJmNDYxMzNjNzI2YmFlMjc3ZThmNGUzMmJmYmEyYTUyOGM3Zgo+Cj4gU2ln
bmVkLW9mZi1ieTogQm9yaXMgQnJlemlsbG9uIDxib3Jpcy5icmV6aWxsb25AY29sbGFib3JhLmNv
bT4KPiBDYzogPGRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmc+Cj4gQ2M6IDxtZXNhLWRl
dkBsaXN0cy5mcmVlZGVza3RvcC5vcmc+Cj4gQ2M6IFN0ZXZlbiBQcmljZSA8c3RldmVuLnByaWNl
QGFybS5jb20+Cj4gQ2M6IFJvYiBIZXJyaW5nIDxyb2JoQGtlcm5lbC5vcmc+Cj4gLS0tCj4gQ2Mt
aW5nIGRyaS1kZXZlbCBpcyBub3QgYSBtaXN0YWtlLCBJIHJlYWxseSB0byBoYXZlIGZlZWRiYWNr
IGZyb20gdGhlIERSTQo+IG1haW50YWluZXJzLCBzaW5jZSB0aGlzIHN0YXJ0ZWQgd2l0aCBhIGtl
cm5lbC1zaWRlIGNoYW5nZS4KPiAtLS0KPiAgc3JjL2V0bmF2aXYvZHJtL2V0bmF2aXZfYm8uYyAg
ICAgICAgICAgICAgICAgICAgICB8IDQgKystLQo+ICBzcmMvZnJlZWRyZW5vL2RybS9mcmVlZHJl
bm9fYm8uYyAgICAgICAgICAgICAgICAgIHwgNCArKy0tCj4gIHNyYy9mcmVlZHJlbm8vdnVsa2Fu
L3R1X2RybS5jICAgICAgICAgICAgICAgICAgICAgfCAyICstCj4gIHNyYy9nYWxsaXVtL2F1eGls
aWFyeS9yZW5kZXJvbmx5L3JlbmRlcm9ubHkuYyAgICAgfCAyICstCj4gIHNyYy9nYWxsaXVtL2Ry
aXZlcnMvaXJpcy9pcmlzX2J1Zm1nci5jICAgICAgICAgICAgfCAyICstCj4gIHNyYy9nYWxsaXVt
L2RyaXZlcnMvbGltYS9saW1hX2JvLmMgICAgICAgICAgICAgICAgfCAyICstCj4gIHNyYy9nYWxs
aXVtL2RyaXZlcnMvcGFuZnJvc3QvcGFuX2RybS5jICAgICAgICAgICAgfCAyICstCj4gIHNyYy9n
YWxsaXVtL2RyaXZlcnMvdjNkL3YzZF9idWZtZ3IuYyAgICAgICAgICAgICAgfCAyICstCj4gIHNy
Yy9nYWxsaXVtL2RyaXZlcnMvdmM0L3ZjNF9idWZtZ3IuYyAgICAgICAgICAgICAgfCAyICstCj4g
IHNyYy9nYWxsaXVtL3dpbnN5cy9yYWRlb24vZHJtL3JhZGVvbl9kcm1fYm8uYyAgICAgfCAzICsr
LQo+ICBzcmMvZ2FsbGl1bS93aW5zeXMvc3ZnYS9kcm0vdm13X3NjcmVlbl9kcmkuYyAgICAgIHwg
NSArKystLQo+ICBzcmMvZ2FsbGl1bS93aW5zeXMvc3cva21zLWRyaS9rbXNfZHJpX3N3X3dpbnN5
cy5jIHwgMiArLQo+ICBzcmMvZ2FsbGl1bS93aW5zeXMvdmlyZ2wvZHJtL3ZpcmdsX2RybV93aW5z
eXMuYyAgIHwgMyArKy0KPiAgc3JjL2ludGVsL3Z1bGthbi9hbnZfZ2VtLmMgICAgICAgICAgICAg
ICAgICAgICAgICB8IDIgKy0KPiAgc3JjL21lc2EvZHJpdmVycy9kcmkvaTk2NS9icndfYnVmbWdy
LmMgICAgICAgICAgICB8IDIgKy0KPiAgMTUgZmlsZXMgY2hhbmdlZCwgMjEgaW5zZXJ0aW9ucygr
KSwgMTggZGVsZXRpb25zKC0pCj4KPiBkaWZmIC0tZ2l0IGEvc3JjL2V0bmF2aXYvZHJtL2V0bmF2
aXZfYm8uYyBiL3NyYy9ldG5hdml2L2RybS9ldG5hdml2X2JvLmMKPiBpbmRleCA2ZTk1MmZhNDc4
NTguLjkyNjM0MTQxYjU4MCAxMDA2NDQKPiAtLS0gYS9zcmMvZXRuYXZpdi9kcm0vZXRuYXZpdl9i
by5jCj4gKysrIGIvc3JjL2V0bmF2aXYvZHJtL2V0bmF2aXZfYm8uYwo+IEBAIC0yOTQsOCArMjk0
LDggQEAgaW50IGV0bmFfYm9fZG1hYnVmKHN0cnVjdCBldG5hX2JvICpibykKPiAgewo+ICAgICAg
ICAgaW50IHJldCwgcHJpbWVfZmQ7Cj4KPiAtICAgICAgIHJldCA9IGRybVByaW1lSGFuZGxlVG9G
RChiby0+ZGV2LT5mZCwgYm8tPmhhbmRsZSwgRFJNX0NMT0VYRUMsCj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAmcHJpbWVfZmQpOwo+ICsgICAgICAgcmV0ID0gZHJtUHJpbWVIYW5k
bGVUb0ZEKGJvLT5kZXYtPmZkLCBiby0+aGFuZGxlLAo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIERSTV9DTE9FWEVDIHwgRFJNX1JEV1IsICZwcmltZV9mZCk7Cj4gICAgICAgICBp
ZiAocmV0KSB7Cj4gICAgICAgICAgICAgICAgIEVSUk9SX01TRygiZmFpbGVkIHRvIGdldCBkbWFi
dWYgZmQ6ICVkIiwgcmV0KTsKPiAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiBkaWZmIC0t
Z2l0IGEvc3JjL2ZyZWVkcmVuby9kcm0vZnJlZWRyZW5vX2JvLmMgYi9zcmMvZnJlZWRyZW5vL2Ry
bS9mcmVlZHJlbm9fYm8uYwo+IGluZGV4IDc0NDkxNjBmMTM3MS4uYmExOWIwOGQ3YzU0IDEwMDY0
NAo+IC0tLSBhL3NyYy9mcmVlZHJlbm8vZHJtL2ZyZWVkcmVub19iby5jCj4gKysrIGIvc3JjL2Zy
ZWVkcmVuby9kcm0vZnJlZWRyZW5vX2JvLmMKPiBAQCAtMzE4LDggKzMxOCw4IEBAIGludCBmZF9i
b19kbWFidWYoc3RydWN0IGZkX2JvICpibykKPiAgewo+ICAgICAgICAgaW50IHJldCwgcHJpbWVf
ZmQ7Cj4KPiAtICAgICAgIHJldCA9IGRybVByaW1lSGFuZGxlVG9GRChiby0+ZGV2LT5mZCwgYm8t
PmhhbmRsZSwgRFJNX0NMT0VYRUMsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgJnByaW1lX2Zk
KTsKPiArICAgICAgIHJldCA9IGRybVByaW1lSGFuZGxlVG9GRChiby0+ZGV2LT5mZCwgYm8tPmhh
bmRsZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEUk1fQ0xPRVhFQyB8IERS
TV9SRFdSLCAmcHJpbWVfZmQpOwo+ICAgICAgICAgaWYgKHJldCkgewo+ICAgICAgICAgICAgICAg
ICBFUlJPUl9NU0coImZhaWxlZCB0byBnZXQgZG1hYnVmIGZkOiAlZCIsIHJldCk7Cj4gICAgICAg
ICAgICAgICAgIHJldHVybiByZXQ7Cj4gZGlmZiAtLWdpdCBhL3NyYy9mcmVlZHJlbm8vdnVsa2Fu
L3R1X2RybS5jIGIvc3JjL2ZyZWVkcmVuby92dWxrYW4vdHVfZHJtLmMKPiBpbmRleCA5YjJlNmY3
ODg3OWUuLjZiZWYzMDEyZGRiNSAxMDA2NDQKPiAtLS0gYS9zcmMvZnJlZWRyZW5vL3Z1bGthbi90
dV9kcm0uYwo+ICsrKyBiL3NyYy9mcmVlZHJlbm8vdnVsa2FuL3R1X2RybS5jCj4gQEAgLTE0Nyw3
ICsxNDcsNyBAQCB0dV9nZW1fZXhwb3J0X2RtYWJ1Zihjb25zdCBzdHJ1Y3QgdHVfZGV2aWNlICpk
ZXYsIHVpbnQzMl90IGdlbV9oYW5kbGUpCj4gIHsKPiAgICAgaW50IHByaW1lX2ZkOwo+ICAgICBp
bnQgcmV0ID0gZHJtUHJpbWVIYW5kbGVUb0ZEKGRldi0+cGh5c2ljYWxfZGV2aWNlLT5sb2NhbF9m
ZCwgZ2VtX2hhbmRsZSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEUk1fQ0xP
RVhFQywgJnByaW1lX2ZkKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEUk1f
Q0xPRVhFQyB8IERSTV9SRFdSLCAmcHJpbWVfZmQpOwo+Cj4gICAgIHJldHVybiByZXQgPT0gMCA/
IHByaW1lX2ZkIDogLTE7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvc3JjL2dhbGxpdW0vYXV4aWxpYXJ5
L3JlbmRlcm9ubHkvcmVuZGVyb25seS5jIGIvc3JjL2dhbGxpdW0vYXV4aWxpYXJ5L3JlbmRlcm9u
bHkvcmVuZGVyb25seS5jCj4gaW5kZXggZDZhMzQ0MDA5Mzc4Li5jMWNjMzExMTUxMDUgMTAwNjQ0
Cj4gLS0tIGEvc3JjL2dhbGxpdW0vYXV4aWxpYXJ5L3JlbmRlcm9ubHkvcmVuZGVyb25seS5jCj4g
KysrIGIvc3JjL2dhbGxpdW0vYXV4aWxpYXJ5L3JlbmRlcm9ubHkvcmVuZGVyb25seS5jCj4gQEAg
LTEwMSw3ICsxMDEsNyBAQCByZW5kZXJvbmx5X2NyZWF0ZV9rbXNfZHVtYl9idWZmZXJfZm9yX3Jl
c291cmNlKHN0cnVjdCBwaXBlX3Jlc291cmNlICpyc2MsCj4gICAgIG91dF9oYW5kbGUtPnR5cGUg
PSBXSU5TWVNfSEFORExFX1RZUEVfRkQ7Cj4gICAgIG91dF9oYW5kbGUtPnN0cmlkZSA9IGNyZWF0
ZV9kdW1iLnBpdGNoOwo+Cj4gLSAgIGVyciA9IGRybVByaW1lSGFuZGxlVG9GRChyby0+a21zX2Zk
LCBjcmVhdGVfZHVtYi5oYW5kbGUsIE9fQ0xPRVhFQywKPiArICAgZXJyID0gZHJtUHJpbWVIYW5k
bGVUb0ZEKHJvLT5rbXNfZmQsIGNyZWF0ZV9kdW1iLmhhbmRsZSwgT19DTE9FWEVDIHwgT19SRFdS
LAo+ICAgICAgICAgICAoaW50ICopJm91dF9oYW5kbGUtPmhhbmRsZSk7Cj4gICAgIGlmIChlcnIg
PCAwKSB7Cj4gICAgICAgIGZwcmludGYoc3RkZXJyLCAiZmFpbGVkIHRvIGV4cG9ydCBkdW1iIGJ1
ZmZlcjogJXNcbiIsIHN0cmVycm9yKGVycm5vKSk7Cj4gZGlmZiAtLWdpdCBhL3NyYy9nYWxsaXVt
L2RyaXZlcnMvaXJpcy9pcmlzX2J1Zm1nci5jIGIvc3JjL2dhbGxpdW0vZHJpdmVycy9pcmlzL2ly
aXNfYnVmbWdyLmMKPiBpbmRleCBkODA5NDU4MjQwOTguLjY4ZTVkOGE4YmIxMyAxMDA2NDQKPiAt
LS0gYS9zcmMvZ2FsbGl1bS9kcml2ZXJzL2lyaXMvaXJpc19idWZtZ3IuYwo+ICsrKyBiL3NyYy9n
YWxsaXVtL2RyaXZlcnMvaXJpcy9pcmlzX2J1Zm1nci5jCj4gQEAgLTEzNjksNyArMTM2OSw3IEBA
IGlyaXNfYm9fZXhwb3J0X2RtYWJ1ZihzdHJ1Y3QgaXJpc19ibyAqYm8sIGludCAqcHJpbWVfZmQp
Cj4gICAgIGlyaXNfYm9fbWFrZV9leHRlcm5hbChibyk7Cj4KPiAgICAgaWYgKGRybVByaW1lSGFu
ZGxlVG9GRChidWZtZ3ItPmZkLCBiby0+Z2VtX2hhbmRsZSwKPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICBEUk1fQ0xPRVhFQywgcHJpbWVfZmQpICE9IDApCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgRFJNX0NMT0VYRUMgfCBEUk1fUkRXUiwgcHJpbWVfZmQpICE9IDApCj4gICAgICAg
IHJldHVybiAtZXJybm87Cj4KPiAgICAgYm8tPnJldXNhYmxlID0gZmFsc2U7Cj4gZGlmZiAtLWdp
dCBhL3NyYy9nYWxsaXVtL2RyaXZlcnMvbGltYS9saW1hX2JvLmMgYi9zcmMvZ2FsbGl1bS9kcml2
ZXJzL2xpbWEvbGltYV9iby5jCj4gaW5kZXggMWQ2ZGQ3MjA2MDJhLi5kZjAxMTRmYzY3ZWQgMTAw
NjQ0Cj4gLS0tIGEvc3JjL2dhbGxpdW0vZHJpdmVycy9saW1hL2xpbWFfYm8uYwo+ICsrKyBiL3Ny
Yy9nYWxsaXVtL2RyaXZlcnMvbGltYS9saW1hX2JvLmMKPiBAQCAtMjA1LDcgKzIwNSw3IEBAIGJv
b2wgbGltYV9ib19leHBvcnQoc3RydWN0IGxpbWFfYm8gKmJvLCBzdHJ1Y3Qgd2luc3lzX2hhbmRs
ZSAqaGFuZGxlKQo+ICAgICAgICByZXR1cm4gdHJ1ZTsKPgo+ICAgICBjYXNlIFdJTlNZU19IQU5E
TEVfVFlQRV9GRDoKPiAtICAgICAgaWYgKGRybVByaW1lSGFuZGxlVG9GRChzY3JlZW4tPmZkLCBi
by0+aGFuZGxlLCBEUk1fQ0xPRVhFQywKPiArICAgICAgaWYgKGRybVByaW1lSGFuZGxlVG9GRChz
Y3JlZW4tPmZkLCBiby0+aGFuZGxlLCBEUk1fQ0xPRVhFQyB8IERSTV9SRFdSLAo+ICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIChpbnQqKSZoYW5kbGUtPmhhbmRsZSkpCj4gICAgICAgICAg
IHJldHVybiBmYWxzZTsKPgo+IGRpZmYgLS1naXQgYS9zcmMvZ2FsbGl1bS9kcml2ZXJzL3BhbmZy
b3N0L3Bhbl9kcm0uYyBiL3NyYy9nYWxsaXVtL2RyaXZlcnMvcGFuZnJvc3QvcGFuX2RybS5jCj4g
aW5kZXggOGRlNGY0ODM0MzVjLi5hMDg2NTc1YzQ1M2EgMTAwNjQ0Cj4gLS0tIGEvc3JjL2dhbGxp
dW0vZHJpdmVycy9wYW5mcm9zdC9wYW5fZHJtLmMKPiArKysgYi9zcmMvZ2FsbGl1bS9kcml2ZXJz
L3BhbmZyb3N0L3Bhbl9kcm0uYwo+IEBAIC0xODEsNyArMTgxLDcgQEAgcGFuZnJvc3RfZHJtX2V4
cG9ydF9ibyhzdHJ1Y3QgcGFuZnJvc3Rfc2NyZWVuICpzY3JlZW4sIGNvbnN0IHN0cnVjdCBwYW5m
cm9zdF9ibwo+ICB7Cj4gICAgICAgICAgc3RydWN0IGRybV9wcmltZV9oYW5kbGUgYXJncyA9IHsK
PiAgICAgICAgICAgICAgICAgIC5oYW5kbGUgPSBiby0+Z2VtX2hhbmRsZSwKPiAtICAgICAgICAg
ICAgICAgIC5mbGFncyA9IERSTV9DTE9FWEVDLAo+ICsgICAgICAgICAgICAgICAgLmZsYWdzID0g
RFJNX0NMT0VYRUMgfCBEUk1fUkRXUiwKPiAgICAgICAgICB9Owo+Cj4gICAgICAgICAgaW50IHJl
dCA9IGRybUlvY3RsKHNjcmVlbi0+ZmQsIERSTV9JT0NUTF9QUklNRV9IQU5ETEVfVE9fRkQsICZh
cmdzKTsKPiBkaWZmIC0tZ2l0IGEvc3JjL2dhbGxpdW0vZHJpdmVycy92M2QvdjNkX2J1Zm1nci5j
IGIvc3JjL2dhbGxpdW0vZHJpdmVycy92M2QvdjNkX2J1Zm1nci5jCj4gaW5kZXggZjBkZjFiOTgz
NzM3Li4wYzc4OTk0ZDg5OWYgMTAwNjQ0Cj4gLS0tIGEvc3JjL2dhbGxpdW0vZHJpdmVycy92M2Qv
djNkX2J1Zm1nci5jCj4gKysrIGIvc3JjL2dhbGxpdW0vZHJpdmVycy92M2QvdjNkX2J1Zm1nci5j
Cj4gQEAgLTQyNCw3ICs0MjQsNyBAQCB2M2RfYm9fZ2V0X2RtYWJ1ZihzdHJ1Y3QgdjNkX2JvICpi
bykKPiAgewo+ICAgICAgICAgIGludCBmZDsKPiAgICAgICAgICBpbnQgcmV0ID0gZHJtUHJpbWVI
YW5kbGVUb0ZEKGJvLT5zY3JlZW4tPmZkLCBiby0+aGFuZGxlLAo+IC0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgT19DTE9FWEVDLCAmZmQpOwo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgRFJNX0NMT0VYRUMgfCBEUk1fUkRXUiwgJmZkKTsKPiAgICAg
ICAgICBpZiAocmV0ICE9IDApIHsKPiAgICAgICAgICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAi
RmFpbGVkIHRvIGV4cG9ydCBnZW0gYm8gJWQgdG8gZG1hYnVmXG4iLAo+ICAgICAgICAgICAgICAg
ICAgICAgICAgICBiby0+aGFuZGxlKTsKPiBkaWZmIC0tZ2l0IGEvc3JjL2dhbGxpdW0vZHJpdmVy
cy92YzQvdmM0X2J1Zm1nci5jIGIvc3JjL2dhbGxpdW0vZHJpdmVycy92YzQvdmM0X2J1Zm1nci5j
Cj4gaW5kZXggNzE2Y2E1MGVhMDY5Li5jN2U4OWI2YTUxN2UgMTAwNjQ0Cj4gLS0tIGEvc3JjL2dh
bGxpdW0vZHJpdmVycy92YzQvdmM0X2J1Zm1nci5jCj4gKysrIGIvc3JjL2dhbGxpdW0vZHJpdmVy
cy92YzQvdmM0X2J1Zm1nci5jCj4gQEAgLTQ2Miw3ICs0NjIsNyBAQCB2YzRfYm9fZ2V0X2RtYWJ1
ZihzdHJ1Y3QgdmM0X2JvICpibykKPiAgewo+ICAgICAgICAgIGludCBmZDsKPiAgICAgICAgICBp
bnQgcmV0ID0gZHJtUHJpbWVIYW5kbGVUb0ZEKGJvLT5zY3JlZW4tPmZkLCBiby0+aGFuZGxlLAo+
IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT19DTE9FWEVDLCAmZmQpOwo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRFJNX0NMT0VYRUMgfCBEUk1f
UkRXUiwgJmZkKTsKPiAgICAgICAgICBpZiAocmV0ICE9IDApIHsKPiAgICAgICAgICAgICAgICAg
IGZwcmludGYoc3RkZXJyLCAiRmFpbGVkIHRvIGV4cG9ydCBnZW0gYm8gJWQgdG8gZG1hYnVmXG4i
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICBiby0+aGFuZGxlKTsKPiBkaWZmIC0tZ2l0IGEv
c3JjL2dhbGxpdW0vd2luc3lzL3JhZGVvbi9kcm0vcmFkZW9uX2RybV9iby5jIGIvc3JjL2dhbGxp
dW0vd2luc3lzL3JhZGVvbi9kcm0vcmFkZW9uX2RybV9iby5jCj4gaW5kZXggZDFlMmE4Njg1YmE5
Li5hZTc5NThhOGI4OTIgMTAwNjQ0Cj4gLS0tIGEvc3JjL2dhbGxpdW0vd2luc3lzL3JhZGVvbi9k
cm0vcmFkZW9uX2RybV9iby5jCj4gKysrIGIvc3JjL2dhbGxpdW0vd2luc3lzL3JhZGVvbi9kcm0v
cmFkZW9uX2RybV9iby5jCj4gQEAgLTEzMjAsNyArMTMyMCw4IEBAIHN0YXRpYyBib29sIHJhZGVv
bl93aW5zeXNfYm9fZ2V0X2hhbmRsZShzdHJ1Y3QgcGJfYnVmZmVyICpidWZmZXIsCj4gICAgICB9
IGVsc2UgaWYgKHdoYW5kbGUtPnR5cGUgPT0gV0lOU1lTX0hBTkRMRV9UWVBFX0tNUykgewo+ICAg
ICAgICAgIHdoYW5kbGUtPmhhbmRsZSA9IGJvLT5oYW5kbGU7Cj4gICAgICB9IGVsc2UgaWYgKHdo
YW5kbGUtPnR5cGUgPT0gV0lOU1lTX0hBTkRMRV9UWVBFX0ZEKSB7Cj4gLSAgICAgICAgaWYgKGRy
bVByaW1lSGFuZGxlVG9GRCh3cy0+ZmQsIGJvLT5oYW5kbGUsIERSTV9DTE9FWEVDLCAoaW50Kikm
d2hhbmRsZS0+aGFuZGxlKSkKPiArICAgICAgICBpZiAoZHJtUHJpbWVIYW5kbGVUb0ZEKHdzLT5m
ZCwgYm8tPmhhbmRsZSwgRFJNX0NMT0VYRUMgfCBEUk1fUkRXUiwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIChpbnQqKSZ3aGFuZGxlLT5oYW5kbGUpKQo+ICAgICAgICAgICAgICBy
ZXR1cm4gZmFsc2U7Cj4gICAgICB9Cj4KPiBkaWZmIC0tZ2l0IGEvc3JjL2dhbGxpdW0vd2luc3lz
L3N2Z2EvZHJtL3Ztd19zY3JlZW5fZHJpLmMgYi9zcmMvZ2FsbGl1bS93aW5zeXMvc3ZnYS9kcm0v
dm13X3NjcmVlbl9kcmkuYwo+IGluZGV4IGE4NWVlMThlNDViOS4uMjRmNmRkYWMwODkwIDEwMDY0
NAo+IC0tLSBhL3NyYy9nYWxsaXVtL3dpbnN5cy9zdmdhL2RybS92bXdfc2NyZWVuX2RyaS5jCj4g
KysrIGIvc3JjL2dhbGxpdW0vd2luc3lzL3N2Z2EvZHJtL3Ztd19zY3JlZW5fZHJpLmMKPiBAQCAt
MzQ1LDggKzM0NSw5IEBAIHZtd19kcm1fc3VyZmFjZV9nZXRfaGFuZGxlKHN0cnVjdCBzdmdhX3dp
bnN5c19zY3JlZW4gKnN3cywKPiAgICAgICAgIHdoYW5kbGUtPmhhbmRsZSA9IHZzcmYtPnNpZDsK
PiAgICAgICAgIGJyZWFrOwo+ICAgICAgY2FzZSBXSU5TWVNfSEFORExFX1RZUEVfRkQ6Cj4gLSAg
ICAgICByZXQgPSBkcm1QcmltZUhhbmRsZVRvRkQodndzLT5pb2N0bC5kcm1fZmQsIHZzcmYtPnNp
ZCwgRFJNX0NMT0VYRUMsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW50ICop
JndoYW5kbGUtPmhhbmRsZSk7Cj4gKyAgICAgICByZXQgPSBkcm1QcmltZUhhbmRsZVRvRkQodndz
LT5pb2N0bC5kcm1fZmQsIHZzcmYtPnNpZCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBEUk1fQ0xPRVhFQyB8IERSTV9SRFdSLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIChpbnQgKikmd2hhbmRsZS0+aGFuZGxlKTsKPiAgICAgICAgIGlmIChyZXQpIHsKPiAg
ICAgICAgICAgdm13X2Vycm9yKCJGYWlsZWQgdG8gZ2V0IGZpbGUgZGVzY3JpcHRvciBmcm9tIHBy
aW1lLlxuIik7Cj4gICAgICAgICAgIHJldHVybiBGQUxTRTsKPiBkaWZmIC0tZ2l0IGEvc3JjL2dh
bGxpdW0vd2luc3lzL3N3L2ttcy1kcmkva21zX2RyaV9zd193aW5zeXMuYyBiL3NyYy9nYWxsaXVt
L3dpbnN5cy9zdy9rbXMtZHJpL2ttc19kcmlfc3dfd2luc3lzLmMKPiBpbmRleCBkOWI0MTdkYzRk
YWQuLmNlNDdlNjZhYjFlNSAxMDA2NDQKPiAtLS0gYS9zcmMvZ2FsbGl1bS93aW5zeXMvc3cva21z
LWRyaS9rbXNfZHJpX3N3X3dpbnN5cy5jCj4gKysrIGIvc3JjL2dhbGxpdW0vd2luc3lzL3N3L2tt
cy1kcmkva21zX2RyaV9zd193aW5zeXMuYwo+IEBAIC00NDYsNyArNDQ2LDcgQEAga21zX3N3X2Rp
c3BsYXl0YXJnZXRfZ2V0X2hhbmRsZShzdHJ1Y3Qgc3dfd2luc3lzICp3aW5zeXMsCj4gICAgICAg
IHJldHVybiBUUlVFOwo+ICAgICBjYXNlIFdJTlNZU19IQU5ETEVfVFlQRV9GRDoKPiAgICAgICAg
aWYgKCFkcm1QcmltZUhhbmRsZVRvRkQoa21zX3N3LT5mZCwga21zX3N3X2R0LT5oYW5kbGUsCj4g
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRFJNX0NMT0VYRUMsIChpbnQqKSZ3aGFuZGxl
LT5oYW5kbGUpKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRFJNX0NMT0VYRUMg
fCBEUk1fUkRXUiwgKGludCopJndoYW5kbGUtPmhhbmRsZSkpIHsKPiAgICAgICAgICAgd2hhbmRs
ZS0+c3RyaWRlID0gcGxhbmUtPnN0cmlkZTsKPiAgICAgICAgICAgd2hhbmRsZS0+b2Zmc2V0ID0g
cGxhbmUtPm9mZnNldDsKPiAgICAgICAgICAgcmV0dXJuIFRSVUU7Cj4gZGlmZiAtLWdpdCBhL3Ny
Yy9nYWxsaXVtL3dpbnN5cy92aXJnbC9kcm0vdmlyZ2xfZHJtX3dpbnN5cy5jIGIvc3JjL2dhbGxp
dW0vd2luc3lzL3ZpcmdsL2RybS92aXJnbF9kcm1fd2luc3lzLmMKPiBpbmRleCA5ZWVjOTJmNTcz
NjMuLjA3ZmFiMjczNWUyNSAxMDA2NDQKPiAtLS0gYS9zcmMvZ2FsbGl1bS93aW5zeXMvdmlyZ2wv
ZHJtL3ZpcmdsX2RybV93aW5zeXMuYwo+ICsrKyBiL3NyYy9nYWxsaXVtL3dpbnN5cy92aXJnbC9k
cm0vdmlyZ2xfZHJtX3dpbnN5cy5jCj4gQEAgLTQxOCw3ICs0MTgsOCBAQCBzdGF0aWMgYm9vbGVh
biB2aXJnbF9kcm1fd2luc3lzX3Jlc291cmNlX2dldF9oYW5kbGUoc3RydWN0IHZpcmdsX3dpbnN5
cyAqcXdzLAo+ICAgICB9IGVsc2UgaWYgKHdoYW5kbGUtPnR5cGUgPT0gV0lOU1lTX0hBTkRMRV9U
WVBFX0tNUykgewo+ICAgICAgICB3aGFuZGxlLT5oYW5kbGUgPSByZXMtPmJvX2hhbmRsZTsKPiAg
ICAgfSBlbHNlIGlmICh3aGFuZGxlLT50eXBlID09IFdJTlNZU19IQU5ETEVfVFlQRV9GRCkgewo+
IC0gICAgICBpZiAoZHJtUHJpbWVIYW5kbGVUb0ZEKHFkd3MtPmZkLCByZXMtPmJvX2hhbmRsZSwg
RFJNX0NMT0VYRUMsIChpbnQqKSZ3aGFuZGxlLT5oYW5kbGUpKQo+ICsgICAgICBpZiAoZHJtUHJp
bWVIYW5kbGVUb0ZEKHFkd3MtPmZkLCByZXMtPmJvX2hhbmRsZSwgRFJNX0NMT0VYRUMgfCBEUk1f
UkRXUiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW50Kikmd2hhbmRsZS0+aGFu
ZGxlKSkKPiAgICAgICAgICAgICAgcmV0dXJuIEZBTFNFOwo+ICAgICAgICBtdHhfbG9jaygmcWR3
cy0+Ym9faGFuZGxlc19tdXRleCk7Cj4gICAgICAgIHV0aWxfaGFzaF90YWJsZV9zZXQocWR3cy0+
Ym9faGFuZGxlcywgKHZvaWQgKikodWludHB0cl90KXJlcy0+Ym9faGFuZGxlLCByZXMpOwo+IGRp
ZmYgLS1naXQgYS9zcmMvaW50ZWwvdnVsa2FuL2Fudl9nZW0uYyBiL3NyYy9pbnRlbC92dWxrYW4v
YW52X2dlbS5jCj4gaW5kZXggMWJkZjA0MGMxYTM3Li44ZjA3OTI4NjM4Y2UgMTAwNjQ0Cj4gLS0t
IGEvc3JjL2ludGVsL3Z1bGthbi9hbnZfZ2VtLmMKPiArKysgYi9zcmMvaW50ZWwvdnVsa2FuL2Fu
dl9nZW0uYwo+IEBAIC0zOTksNyArMzk5LDcgQEAgYW52X2dlbV9oYW5kbGVfdG9fZmQoc3RydWN0
IGFudl9kZXZpY2UgKmRldmljZSwgdWludDMyX3QgZ2VtX2hhbmRsZSkKPiAgewo+ICAgICBzdHJ1
Y3QgZHJtX3ByaW1lX2hhbmRsZSBhcmdzID0gewo+ICAgICAgICAuaGFuZGxlID0gZ2VtX2hhbmRs
ZSwKPiAtICAgICAgLmZsYWdzID0gRFJNX0NMT0VYRUMsCj4gKyAgICAgIC5mbGFncyA9IERSTV9D
TE9FWEVDIHwgRFJNX1JEV1IsCj4gICAgIH07Cj4KPiAgICAgaW50IHJldCA9IGFudl9pb2N0bChk
ZXZpY2UtPmZkLCBEUk1fSU9DVExfUFJJTUVfSEFORExFX1RPX0ZELCAmYXJncyk7Cj4gZGlmZiAt
LWdpdCBhL3NyYy9tZXNhL2RyaXZlcnMvZHJpL2k5NjUvYnJ3X2J1Zm1nci5jIGIvc3JjL21lc2Ev
ZHJpdmVycy9kcmkvaTk2NS9icndfYnVmbWdyLmMKPiBpbmRleCBhN2M2ODQwNjMxNTguLmVlNjM5
ZDJjZjIzYSAxMDA2NDQKPiAtLS0gYS9zcmMvbWVzYS9kcml2ZXJzL2RyaS9pOTY1L2Jyd19idWZt
Z3IuYwo+ICsrKyBiL3NyYy9tZXNhL2RyaXZlcnMvZHJpL2k5NjUvYnJ3X2J1Zm1nci5jCj4gQEAg
LTE0ODksNyArMTQ4OSw3IEBAIGJyd19ib19nZW1fZXhwb3J0X3RvX3ByaW1lKHN0cnVjdCBicndf
Ym8gKmJvLCBpbnQgKnByaW1lX2ZkKQo+ICAgICBicndfYm9fbWFrZV9leHRlcm5hbChibyk7Cj4K
PiAgICAgaWYgKGRybVByaW1lSGFuZGxlVG9GRChidWZtZ3ItPmZkLCBiby0+Z2VtX2hhbmRsZSwK
PiAtICAgICAgICAgICAgICAgICAgICAgICAgICBEUk1fQ0xPRVhFQywgcHJpbWVfZmQpICE9IDAp
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgRFJNX0NMT0VYRUMgfCBEUk1fUkRXUiwgcHJp
bWVfZmQpICE9IDApCj4gICAgICAgIHJldHVybiAtZXJybm87Cj4KPiAgICAgYm8tPnJldXNhYmxl
ID0gZmFsc2U7Cj4gLS0KPiAyLjIxLjAKPgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
