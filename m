Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2E06E77041
	for <lists+dri-devel@lfdr.de>; Fri, 26 Jul 2019 19:29:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4DC216EE19;
	Fri, 26 Jul 2019 17:29:01 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4B5D26EE0E;
 Fri, 26 Jul 2019 17:28:59 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: andrzej.p) with ESMTPSA id EA76B28C54D
From: Andrzej Pietrasiewicz <andrzej.p@collabora.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v6 23/24] drm/radeon: Provide ddc symlink in connector sysfs
 directory
Date: Fri, 26 Jul 2019 19:23:17 +0200
Message-Id: <0836f34238730afce3f4d6b13f5cf04f832b668a.1564161140.git.andrzej.p@collabora.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <cover.1564161140.git.andrzej.p@collabora.com>
References: <cover.1564161140.git.andrzej.p@collabora.com>
In-Reply-To: <cover.1564161140.git.andrzej.p@collabora.com>
References: <cover.1564161140.git.andrzej.p@collabora.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Sam Ravnborg <sam@ravnborg.org>, Neil Armstrong <narmstrong@baylibre.com>,
 David Airlie <airlied@linux.ie>, Douglas Anderson <dianders@chromium.org>,
 Thierry Reding <thierry.reding@gmail.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>, kernel@collabora.com,
 linux-samsung-soc@vger.kernel.org, Jyri Sarha <jsarha@ti.com>,
 Vincent Abriou <vincent.abriou@st.com>, Krzysztof Kozlowski <krzk@kernel.org>,
 Jonathan Hunter <jonathanh@nvidia.com>, linux-rockchip@lists.infradead.org,
 Chen-Yu Tsai <wens@csie.org>, Kukjin Kim <kgene@kernel.org>,
 NXP Linux Team <linux-imx@nxp.com>, Dave Airlie <airlied@redhat.com>,
 intel-gfx@lists.freedesktop.org, freedreno@lists.freedesktop.org,
 linux-tegra@vger.kernel.org, Jonas Karlman <jonas@kwiboo.se>,
 linux-arm-msm@vger.kernel.org, Mamta Shukla <mamtashukla555@gmail.com>,
 linux-mediatek@lists.infradead.org, Maxime Ripard <mripard@kernel.org>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>,
 Matthias Brugger <matthias.bgg@gmail.com>,
 Thomas Gleixner <tglx@linutronix.de>, Sean Paul <sean@poorly.run>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 Allison Randal <allison@lohutok.net>, linux-arm-kernel@lists.infradead.org,
 Enrico Weigelt <info@metux.net>, Jernej Skrabec <jernej.skrabec@siol.net>,
 amd-gfx@lists.freedesktop.org, Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Thomas Zimmermann <tzimmermann@suse.de>,
 Oleksandr Andrushchenko <oleksandr_andrushchenko@epam.com>,
 Seung-Woo Kim <sw0312.kim@samsung.com>, linux-kernel@vger.kernel.org,
 Todor Tomov <todor.tomov@linaro.org>,
 Kyungmin Park <kyungmin.park@samsung.com>, Huang Rui <ray.huang@amd.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Alex Deucher <alexander.deucher@amd.com>, Shawn Guo <shawnguo@kernel.org>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
 Gerd Hoffmann <kraxel@redhat.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VXNlIHRoZSBkZGMgcG9pbnRlciBwcm92aWRlZCBieSB0aGUgZ2VuZXJpYyBjb25uZWN0b3IuCgpT
aWduZWQtb2ZmLWJ5OiBBbmRyemVqIFBpZXRyYXNpZXdpY3ogPGFuZHJ6ZWoucEBjb2xsYWJvcmEu
Y29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2Nvbm5lY3RvcnMuYyB8IDE0
MiArKysrKysrKysrKysrKystLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAxMDYgaW5zZXJ0aW9ucygr
KSwgMzYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9y
YWRlb25fY29ubmVjdG9ycy5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fY29ubmVj
dG9ycy5jCmluZGV4IGM2MGQxYTQ0ZDIyYS4uYjNhZDhkODkwODAxIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9jb25uZWN0b3JzLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3JhZGVvbi9yYWRlb25fY29ubmVjdG9ycy5jCkBAIC0xODcwLDYgKzE4NzAsNyBAQCByYWRl
b25fYWRkX2F0b21fY29ubmVjdG9yKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJc3RydWN0IHJh
ZGVvbl9jb25uZWN0b3JfYXRvbV9kaWcgKnJhZGVvbl9kaWdfY29ubmVjdG9yOwogCXN0cnVjdCBk
cm1fZW5jb2RlciAqZW5jb2RlcjsKIAlzdHJ1Y3QgcmFkZW9uX2VuY29kZXIgKnJhZGVvbl9lbmNv
ZGVyOworCXN0cnVjdCBpMmNfYWRhcHRlciAqZGRjOwogCXVpbnQzMl90IHN1YnBpeGVsX29yZGVy
ID0gU3ViUGl4ZWxOb25lOwogCWJvb2wgc2hhcmVkX2RkYyA9IGZhbHNlOwogCWJvb2wgaXNfZHBf
YnJpZGdlID0gZmFsc2U7CkBAIC0xOTQ3LDE3ICsxOTQ4LDIxIEBAIHJhZGVvbl9hZGRfYXRvbV9j
b25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJcmFkZW9uX2Nvbm5lY3Rvci0+Y29u
X3ByaXYgPSByYWRlb25fZGlnX2Nvbm5lY3RvcjsKIAkJaWYgKGkyY19idXMtPnZhbGlkKSB7CiAJ
CQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9uX2kyY19sb29rdXAocmRldiwgaTJj
X2J1cyk7Ci0JCQlpZiAocmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cykKKwkJCWlmIChyYWRlb25f
Y29ubmVjdG9yLT5kZGNfYnVzKSB7CiAJCQkJaGFzX2F1eCA9IHRydWU7Ci0JCQllbHNlCisJCQkJ
ZGRjID0gJnJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMtPmFkYXB0ZXI7CisJCQl9IGVsc2Ugewog
CQkJCURSTV9FUlJPUigiRFA6IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sgZG1lc2cg
Zm9yIGkyYyBlcnJvcnMuXG4iKTsKKwkJCX0KIAkJfQogCQlzd2l0Y2ggKGNvbm5lY3Rvcl90eXBl
KSB7CiAJCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX1ZHQToKIAkJY2FzZSBEUk1fTU9ERV9DT05O
RUNUT1JfRFZJQToKIAkJZGVmYXVsdDoKLQkJCWRybV9jb25uZWN0b3JfaW5pdChkZXYsICZyYWRl
b25fY29ubmVjdG9yLT5iYXNlLAotCQkJCQkgICAmcmFkZW9uX2RwX2Nvbm5lY3Rvcl9mdW5jcywg
Y29ubmVjdG9yX3R5cGUpOworCQkJZHJtX2Nvbm5lY3Rvcl9pbml0X3dpdGhfZGRjKGRldiwgJnJh
ZGVvbl9jb25uZWN0b3ItPmJhc2UsCisJCQkJCQkgICAgJnJhZGVvbl9kcF9jb25uZWN0b3JfZnVu
Y3MsCisJCQkJCQkgICAgY29ubmVjdG9yX3R5cGUsCisJCQkJCQkgICAgZGRjKTsKIAkJCWRybV9j
b25uZWN0b3JfaGVscGVyX2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwKIAkJCQkJCSAmcmFk
ZW9uX2RwX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQkJY29ubmVjdG9yLT5pbnRlcmxhY2Vf
YWxsb3dlZCA9IHRydWU7CkBAIC0xOTc5LDggKzE5ODQsMTAgQEAgcmFkZW9uX2FkZF9hdG9tX2Nv
bm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQljYXNlIERSTV9NT0RFX0NPTk5FQ1RP
Ul9IRE1JQToKIAkJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfSERNSUI6CiAJCWNhc2UgRFJNX01P
REVfQ09OTkVDVE9SX0Rpc3BsYXlQb3J0OgotCQkJZHJtX2Nvbm5lY3Rvcl9pbml0KGRldiwgJnJh
ZGVvbl9jb25uZWN0b3ItPmJhc2UsCi0JCQkJCSAgICZyYWRlb25fZHBfY29ubmVjdG9yX2Z1bmNz
LCBjb25uZWN0b3JfdHlwZSk7CisJCQlkcm1fY29ubmVjdG9yX2luaXRfd2l0aF9kZGMoZGV2LCAm
cmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwKKwkJCQkJCSAgICAmcmFkZW9uX2RwX2Nvbm5lY3Rvcl9m
dW5jcywKKwkJCQkJCSAgICBjb25uZWN0b3JfdHlwZSwKKwkJCQkJCSAgICBkZGMpOwogCQkJZHJt
X2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLAogCQkJCQkJICZy
YWRlb25fZHBfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlkcm1fb2JqZWN0X2F0dGFjaF9w
cm9wZXJ0eSgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZS5iYXNlLApAQCAtMjAyNyw4ICsyMDM0LDEw
IEBAIHJhZGVvbl9hZGRfYXRvbV9jb25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJ
CWJyZWFrOwogCQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9MVkRTOgogCQljYXNlIERSTV9NT0RF
X0NPTk5FQ1RPUl9lRFA6Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2LCAmcmFkZW9uX2Nvbm5l
Y3Rvci0+YmFzZSwKLQkJCQkJICAgJnJhZGVvbl9sdmRzX2JyaWRnZV9jb25uZWN0b3JfZnVuY3Ms
IGNvbm5lY3Rvcl90eXBlKTsKKwkJCWRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhkZXYsICZy
YWRlb25fY29ubmVjdG9yLT5iYXNlLAorCQkJCQkJICAgICZyYWRlb25fbHZkc19icmlkZ2VfY29u
bmVjdG9yX2Z1bmNzLAorCQkJCQkJICAgIGNvbm5lY3Rvcl90eXBlLAorCQkJCQkJICAgIGRkYyk7
CiAJCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsCiAJ
CQkJCQkgJnJhZGVvbl9kcF9jb25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJCWRybV9vYmplY3Rf
YXR0YWNoX3Byb3BlcnR5KCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLmJhc2UsCkBAIC0yMDQyLDEz
ICsyMDUxLDE4IEBAIHJhZGVvbl9hZGRfYXRvbV9jb25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwKIAl9IGVsc2UgewogCQlzd2l0Y2ggKGNvbm5lY3Rvcl90eXBlKSB7CiAJCWNhc2UgRFJN
X01PREVfQ09OTkVDVE9SX1ZHQToKLQkJCWRybV9jb25uZWN0b3JfaW5pdChkZXYsICZyYWRlb25f
Y29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX3ZnYV9jb25uZWN0b3JfZnVuY3MsIGNvbm5lY3Rvcl90
eXBlKTsKLQkJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFz
ZSwgJnJhZGVvbl92Z2FfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlpZiAoaTJjX2J1cy0+
dmFsaWQpIHsKIAkJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9uX2kyY19sb29r
dXAocmRldiwgaTJjX2J1cyk7CiAJCQkJaWYgKCFyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzKQog
CQkJCQlEUk1fRVJST1IoIlZHQTogRmFpbGVkIHRvIGFzc2lnbiBkZGMgYnVzISBDaGVjayBkbWVz
ZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJCWVsc2UKKwkJCQkJZGRjID0gJnJhZGVvbl9jb25u
ZWN0b3ItPmRkY19idXMtPmFkYXB0ZXI7CiAJCQl9CisJCQlkcm1fY29ubmVjdG9yX2luaXRfd2l0
aF9kZGMoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwKKwkJCQkJCSAgICAmcmFkZW9uX3Zn
YV9jb25uZWN0b3JfZnVuY3MsCisJCQkJCQkgICAgY29ubmVjdG9yX3R5cGUsCisJCQkJCQkgICAg
ZGRjKTsKKwkJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFz
ZSwgJnJhZGVvbl92Z2FfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlyYWRlb25fY29ubmVj
dG9yLT5kYWNfbG9hZF9kZXRlY3QgPSB0cnVlOwogCQkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVy
dHkoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UuYmFzZSwKIAkJCQkJCSAgICAgIHJkZXYtPm1vZGVf
aW5mby5sb2FkX2RldGVjdF9wcm9wZXJ0eSwKQEAgLTIwNjcsMTMgKzIwODEsMTggQEAgcmFkZW9u
X2FkZF9hdG9tX2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJY29ubmVjdG9y
LT5kb3VibGVzY2FuX2FsbG93ZWQgPSB0cnVlOwogCQkJYnJlYWs7CiAJCWNhc2UgRFJNX01PREVf
Q09OTkVDVE9SX0RWSUE6Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2LCAmcmFkZW9uX2Nvbm5l
Y3Rvci0+YmFzZSwgJnJhZGVvbl92Z2FfY29ubmVjdG9yX2Z1bmNzLCBjb25uZWN0b3JfdHlwZSk7
Ci0JCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZy
YWRlb25fdmdhX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MpOwogCQkJaWYgKGkyY19idXMtPnZhbGlk
KSB7CiAJCQkJcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cyA9IHJhZGVvbl9pMmNfbG9va3VwKHJk
ZXYsIGkyY19idXMpOwogCQkJCWlmICghcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cykKIAkJCQkJ
RFJNX0VSUk9SKCJEVklBOiBGYWlsZWQgdG8gYXNzaWduIGRkYyBidXMhIENoZWNrIGRtZXNnIGZv
ciBpMmMgZXJyb3JzLlxuIik7CisJCQkJZWxzZQorCQkJCQlkZGMgPSAmcmFkZW9uX2Nvbm5lY3Rv
ci0+ZGRjX2J1cy0+YWRhcHRlcjsKIAkJCX0KKwkJCWRybV9jb25uZWN0b3JfaW5pdF93aXRoX2Rk
YyhkZXYsICZyYWRlb25fY29ubmVjdG9yLT5iYXNlLAorCQkJCQkJICAgICZyYWRlb25fdmdhX2Nv
bm5lY3Rvcl9mdW5jcywKKwkJCQkJCSAgICBjb25uZWN0b3JfdHlwZSwKKwkJCQkJCSAgICBkZGMp
OworCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAm
cmFkZW9uX3ZnYV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJCXJhZGVvbl9jb25uZWN0b3It
PmRhY19sb2FkX2RldGVjdCA9IHRydWU7CiAJCQlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgm
cmFkZW9uX2Nvbm5lY3Rvci0+YmFzZS5iYXNlLAogCQkJCQkJICAgICAgcmRldi0+bW9kZV9pbmZv
LmxvYWRfZGV0ZWN0X3Byb3BlcnR5LApAQCAtMjA5OCwxMyArMjExNywxOCBAQCByYWRlb25fYWRk
X2F0b21fY29ubmVjdG9yKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJCQkJZ290byBmYWlsZWQ7
CiAJCQlyYWRlb25fZGlnX2Nvbm5lY3Rvci0+aWdwX2xhbmVfaW5mbyA9IGlncF9sYW5lX2luZm87
CiAJCQlyYWRlb25fY29ubmVjdG9yLT5jb25fcHJpdiA9IHJhZGVvbl9kaWdfY29ubmVjdG9yOwot
CQkJZHJtX2Nvbm5lY3Rvcl9pbml0KGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRl
b25fZHZpX2Nvbm5lY3Rvcl9mdW5jcywgY29ubmVjdG9yX3R5cGUpOwotCQkJZHJtX2Nvbm5lY3Rv
cl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2R2aV9jb25uZWN0
b3JfaGVscGVyX2Z1bmNzKTsKIAkJCWlmIChpMmNfYnVzLT52YWxpZCkgewogCQkJCXJhZGVvbl9j
b25uZWN0b3ItPmRkY19idXMgPSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVzKTsKIAkJ
CQlpZiAoIXJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMpCiAJCQkJCURSTV9FUlJPUigiRFZJOiBG
YWlsZWQgdG8gYXNzaWduIGRkYyBidXMhIENoZWNrIGRtZXNnIGZvciBpMmMgZXJyb3JzLlxuIik7
CisJCQkJZWxzZQorCQkJCQlkZGMgPSAmcmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cy0+YWRhcHRl
cjsKIAkJCX0KKwkJCWRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhkZXYsICZyYWRlb25fY29u
bmVjdG9yLT5iYXNlLAorCQkJCQkJICAgICZyYWRlb25fZHZpX2Nvbm5lY3Rvcl9mdW5jcywKKwkJ
CQkJCSAgICBjb25uZWN0b3JfdHlwZSwKKwkJCQkJCSAgICBkZGMpOworCQkJZHJtX2Nvbm5lY3Rv
cl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2R2aV9jb25uZWN0
b3JfaGVscGVyX2Z1bmNzKTsKIAkJCXN1YnBpeGVsX29yZGVyID0gU3ViUGl4ZWxIb3Jpem9udGFs
UkdCOwogCQkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHkoJnJhZGVvbl9jb25uZWN0b3ItPmJh
c2UuYmFzZSwKIAkJCQkJCSAgICAgIHJkZXYtPm1vZGVfaW5mby5jb2hlcmVudF9tb2RlX3Byb3Bl
cnR5LApAQCAtMjE1NSwxMyArMjE3OSwxOCBAQCByYWRlb25fYWRkX2F0b21fY29ubmVjdG9yKHN0
cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJCQkJZ290byBmYWlsZWQ7CiAJCQlyYWRlb25fZGlnX2Nv
bm5lY3Rvci0+aWdwX2xhbmVfaW5mbyA9IGlncF9sYW5lX2luZm87CiAJCQlyYWRlb25fY29ubmVj
dG9yLT5jb25fcHJpdiA9IHJhZGVvbl9kaWdfY29ubmVjdG9yOwotCQkJZHJtX2Nvbm5lY3Rvcl9p
bml0KGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fZHZpX2Nvbm5lY3Rvcl9m
dW5jcywgY29ubmVjdG9yX3R5cGUpOwotCQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRl
b25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2R2aV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzKTsK
IAkJCWlmIChpMmNfYnVzLT52YWxpZCkgewogCQkJCXJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMg
PSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVzKTsKIAkJCQlpZiAoIXJhZGVvbl9jb25u
ZWN0b3ItPmRkY19idXMpCiAJCQkJCURSTV9FUlJPUigiSERNSTogRmFpbGVkIHRvIGFzc2lnbiBk
ZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJCWVsc2UKKwkJCQkJ
ZGRjID0gJnJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMtPmFkYXB0ZXI7CiAJCQl9CisJCQlkcm1f
Y29ubmVjdG9yX2luaXRfd2l0aF9kZGMoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwKKwkJ
CQkJCSAgICAmcmFkZW9uX2R2aV9jb25uZWN0b3JfZnVuY3MsCisJCQkJCQkgICAgY29ubmVjdG9y
X3R5cGUsCisJCQkJCQkgICAgZGRjKTsKKwkJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmcmFk
ZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9kdmlfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7
CiAJCQlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZS5i
YXNlLAogCQkJCQkJICAgICAgcmRldi0+bW9kZV9pbmZvLmNvaGVyZW50X21vZGVfcHJvcGVydHks
CiAJCQkJCQkgICAgICAxKTsKQEAgLTIyMDUsMTUgKzIyMzQsMjAgQEAgcmFkZW9uX2FkZF9hdG9t
X2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCWdvdG8gZmFpbGVkOwogCQkJ
cmFkZW9uX2RpZ19jb25uZWN0b3ItPmlncF9sYW5lX2luZm8gPSBpZ3BfbGFuZV9pbmZvOwogCQkJ
cmFkZW9uX2Nvbm5lY3Rvci0+Y29uX3ByaXYgPSByYWRlb25fZGlnX2Nvbm5lY3RvcjsKLQkJCWRy
bV9jb25uZWN0b3JfaW5pdChkZXYsICZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2Rw
X2Nvbm5lY3Rvcl9mdW5jcywgY29ubmVjdG9yX3R5cGUpOwotCQkJZHJtX2Nvbm5lY3Rvcl9oZWxw
ZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2RwX2Nvbm5lY3Rvcl9oZWxw
ZXJfZnVuY3MpOwogCQkJaWYgKGkyY19idXMtPnZhbGlkKSB7CiAJCQkJcmFkZW9uX2Nvbm5lY3Rv
ci0+ZGRjX2J1cyA9IHJhZGVvbl9pMmNfbG9va3VwKHJkZXYsIGkyY19idXMpOwotCQkJCWlmIChy
YWRlb25fY29ubmVjdG9yLT5kZGNfYnVzKQorCQkJCWlmIChyYWRlb25fY29ubmVjdG9yLT5kZGNf
YnVzKSB7CiAJCQkJCWhhc19hdXggPSB0cnVlOwotCQkJCWVsc2UKKwkJCQkJZGRjID0gJnJhZGVv
bl9jb25uZWN0b3ItPmRkY19idXMtPmFkYXB0ZXI7CisJCQkJfSBlbHNlIHsKIAkJCQkJRFJNX0VS
Uk9SKCJEUDogRmFpbGVkIHRvIGFzc2lnbiBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVy
cm9ycy5cbiIpOworCQkJCX0KIAkJCX0KKwkJCWRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhk
ZXYsICZyYWRlb25fY29ubmVjdG9yLT5iYXNlLAorCQkJCQkJICAgICZyYWRlb25fZHBfY29ubmVj
dG9yX2Z1bmNzLAorCQkJCQkJICAgIGNvbm5lY3Rvcl90eXBlLAorCQkJCQkJICAgIGRkYyk7CisJ
CQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRl
b25fZHBfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlzdWJwaXhlbF9vcmRlciA9IFN1YlBp
eGVsSG9yaXpvbnRhbFJHQjsKIAkJCWRybV9vYmplY3RfYXR0YWNoX3Byb3BlcnR5KCZyYWRlb25f
Y29ubmVjdG9yLT5iYXNlLmJhc2UsCiAJCQkJCQkgICAgICByZGV2LT5tb2RlX2luZm8uY29oZXJl
bnRfbW9kZV9wcm9wZXJ0eSwKQEAgLTIyNTUsMTUgKzIyODksMjAgQEAgcmFkZW9uX2FkZF9hdG9t
X2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCWdvdG8gZmFpbGVkOwogCQkJ
cmFkZW9uX2RpZ19jb25uZWN0b3ItPmlncF9sYW5lX2luZm8gPSBpZ3BfbGFuZV9pbmZvOwogCQkJ
cmFkZW9uX2Nvbm5lY3Rvci0+Y29uX3ByaXYgPSByYWRlb25fZGlnX2Nvbm5lY3RvcjsKLQkJCWRy
bV9jb25uZWN0b3JfaW5pdChkZXYsICZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2Vk
cF9jb25uZWN0b3JfZnVuY3MsIGNvbm5lY3Rvcl90eXBlKTsKLQkJCWRybV9jb25uZWN0b3JfaGVs
cGVyX2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9kcF9jb25uZWN0b3JfaGVs
cGVyX2Z1bmNzKTsKIAkJCWlmIChpMmNfYnVzLT52YWxpZCkgewogCQkJCXJhZGVvbl9jb25uZWN0
b3ItPmRkY19idXMgPSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVzKTsKLQkJCQlpZiAo
cmFkZW9uX2Nvbm5lY3Rvci0+ZGRjX2J1cykKKwkJCQlpZiAocmFkZW9uX2Nvbm5lY3Rvci0+ZGRj
X2J1cykgewogCQkJCQloYXNfYXV4ID0gdHJ1ZTsKLQkJCQllbHNlCisJCQkJCWRkYyA9ICZyYWRl
b25fY29ubmVjdG9yLT5kZGNfYnVzLT5hZGFwdGVyOworCQkJCX0gZWxzZSB7CiAJCQkJCURSTV9F
UlJPUigiRFA6IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sgZG1lc2cgZm9yIGkyYyBl
cnJvcnMuXG4iKTsKKwkJCQl9CiAJCQl9CisJCQlkcm1fY29ubmVjdG9yX2luaXRfd2l0aF9kZGMo
ZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwKKwkJCQkJCSAgICAmcmFkZW9uX2VkcF9jb25u
ZWN0b3JfZnVuY3MsCisJCQkJCQkgICAgY29ubmVjdG9yX3R5cGUsCisJCQkJCQkgICAgZGRjKTsK
KwkJCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJh
ZGVvbl9kcF9jb25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJCWRybV9vYmplY3RfYXR0YWNoX3By
b3BlcnR5KCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLmJhc2UsCiAJCQkJCQkgICAgICBkZXYtPm1v
ZGVfY29uZmlnLnNjYWxpbmdfbW9kZV9wcm9wZXJ0eSwKIAkJCQkJCSAgICAgIERSTV9NT0RFX1ND
QUxFX0ZVTExTQ1JFRU4pOwpAQCAtMjI3NCw3ICsyMzEzLDEwIEBAIHJhZGVvbl9hZGRfYXRvbV9j
b25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJY2FzZSBEUk1fTU9ERV9DT05ORUNU
T1JfU1ZJREVPOgogCQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9Db21wb3NpdGU6CiAJCWNhc2Ug
RFJNX01PREVfQ09OTkVDVE9SXzlQaW5ESU46Ci0JCQlkcm1fY29ubmVjdG9yX2luaXQoZGV2LCAm
cmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl90dl9jb25uZWN0b3JfZnVuY3MsIGNvbm5l
Y3Rvcl90eXBlKTsKKwkJCWRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhkZXYsICZyYWRlb25f
Y29ubmVjdG9yLT5iYXNlLAorCQkJCQkJICAgICZyYWRlb25fdHZfY29ubmVjdG9yX2Z1bmNzLAor
CQkJCQkJICAgIGNvbm5lY3Rvcl90eXBlLAorCQkJCQkJICAgIGRkYyk7CiAJCQlkcm1fY29ubmVj
dG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fdHZfY29ubmVj
dG9yX2hlbHBlcl9mdW5jcyk7CiAJCQlyYWRlb25fY29ubmVjdG9yLT5kYWNfbG9hZF9kZXRlY3Qg
PSB0cnVlOwogCQkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHkoJnJhZGVvbl9jb25uZWN0b3It
PmJhc2UuYmFzZSwKQEAgLTIyOTQsMTMgKzIzMzYsMTggQEAgcmFkZW9uX2FkZF9hdG9tX2Nvbm5l
Y3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCWdvdG8gZmFpbGVkOwogCQkJcmFkZW9u
X2RpZ19jb25uZWN0b3ItPmlncF9sYW5lX2luZm8gPSBpZ3BfbGFuZV9pbmZvOwogCQkJcmFkZW9u
X2Nvbm5lY3Rvci0+Y29uX3ByaXYgPSByYWRlb25fZGlnX2Nvbm5lY3RvcjsKLQkJCWRybV9jb25u
ZWN0b3JfaW5pdChkZXYsICZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2x2ZHNfY29u
bmVjdG9yX2Z1bmNzLCBjb25uZWN0b3JfdHlwZSk7Ci0JCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9h
ZGQoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fbHZkc19jb25uZWN0b3JfaGVscGVy
X2Z1bmNzKTsKIAkJCWlmIChpMmNfYnVzLT52YWxpZCkgewogCQkJCXJhZGVvbl9jb25uZWN0b3It
PmRkY19idXMgPSByYWRlb25faTJjX2xvb2t1cChyZGV2LCBpMmNfYnVzKTsKIAkJCQlpZiAoIXJh
ZGVvbl9jb25uZWN0b3ItPmRkY19idXMpCiAJCQkJCURSTV9FUlJPUigiTFZEUzogRmFpbGVkIHRv
IGFzc2lnbiBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJCWVs
c2UKKwkJCQkJZGRjID0gJnJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMtPmFkYXB0ZXI7CiAJCQl9
CisJCQlkcm1fY29ubmVjdG9yX2luaXRfd2l0aF9kZGMoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+
YmFzZSwKKwkJCQkJCSAgICAmcmFkZW9uX2x2ZHNfY29ubmVjdG9yX2Z1bmNzLAorCQkJCQkJICAg
IGNvbm5lY3Rvcl90eXBlLAorCQkJCQkJICAgIGRkYyk7CisJCQlkcm1fY29ubmVjdG9yX2hlbHBl
cl9hZGQoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fbHZkc19jb25uZWN0b3JfaGVs
cGVyX2Z1bmNzKTsKIAkJCWRybV9vYmplY3RfYXR0YWNoX3Byb3BlcnR5KCZyYWRlb25fY29ubmVj
dG9yLT5iYXNlLmJhc2UsCiAJCQkJCQkgICAgICBkZXYtPm1vZGVfY29uZmlnLnNjYWxpbmdfbW9k
ZV9wcm9wZXJ0eSwKIAkJCQkJCSAgICAgIERSTV9NT0RFX1NDQUxFX0ZVTExTQ1JFRU4pOwpAQCAt
MjM3OCwxMyArMjQyNSwxOCBAQCByYWRlb25fYWRkX2xlZ2FjeV9jb25uZWN0b3Ioc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwKIAogCXN3aXRjaCAoY29ubmVjdG9yX3R5cGUpIHsKIAljYXNlIERSTV9N
T0RFX0NPTk5FQ1RPUl9WR0E6Ci0JCWRybV9jb25uZWN0b3JfaW5pdChkZXYsICZyYWRlb25fY29u
bmVjdG9yLT5iYXNlLCAmcmFkZW9uX3ZnYV9jb25uZWN0b3JfZnVuY3MsIGNvbm5lY3Rvcl90eXBl
KTsKLQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAm
cmFkZW9uX3ZnYV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJaWYgKGkyY19idXMtPnZhbGlk
KSB7CiAJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9uX2kyY19sb29rdXAocmRl
diwgaTJjX2J1cyk7CiAJCQlpZiAoIXJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMpCiAJCQkJRFJN
X0VSUk9SKCJWR0E6IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sgZG1lc2cgZm9yIGky
YyBlcnJvcnMuXG4iKTsKKwkJCWVsc2UKKwkJCQlkZGMgPSAmcmFkZW9uX2Nvbm5lY3Rvci0+ZGRj
X2J1cy0+YWRhcHRlcjsKIAkJfQorCQlkcm1fY29ubmVjdG9yX2luaXRfd2l0aF9kZGMoZGV2LCAm
cmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwKKwkJCQkJICAgICZyYWRlb25fdmdhX2Nvbm5lY3Rvcl9m
dW5jcywKKwkJCQkJICAgIGNvbm5lY3Rvcl90eXBlLAorCQkJCQkgICAgZGRjKTsKKwkJZHJtX2Nv
bm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX3ZnYV9j
b25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJcmFkZW9uX2Nvbm5lY3Rvci0+ZGFjX2xvYWRfZGV0
ZWN0ID0gdHJ1ZTsKIAkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHkoJnJhZGVvbl9jb25uZWN0
b3ItPmJhc2UuYmFzZSwKIAkJCQkJICAgICAgcmRldi0+bW9kZV9pbmZvLmxvYWRfZGV0ZWN0X3By
b3BlcnR5LApAQCAtMjM5NSwxMyArMjQ0NywxOCBAQCByYWRlb25fYWRkX2xlZ2FjeV9jb25uZWN0
b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJY29ubmVjdG9yLT5kb3VibGVzY2FuX2FsbG93
ZWQgPSB0cnVlOwogCQlicmVhazsKIAljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9EVklBOgotCQlk
cm1fY29ubmVjdG9yX2luaXQoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl92
Z2FfY29ubmVjdG9yX2Z1bmNzLCBjb25uZWN0b3JfdHlwZSk7Ci0JCWRybV9jb25uZWN0b3JfaGVs
cGVyX2FkZCgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl92Z2FfY29ubmVjdG9yX2hl
bHBlcl9mdW5jcyk7CiAJCWlmIChpMmNfYnVzLT52YWxpZCkgewogCQkJcmFkZW9uX2Nvbm5lY3Rv
ci0+ZGRjX2J1cyA9IHJhZGVvbl9pMmNfbG9va3VwKHJkZXYsIGkyY19idXMpOwogCQkJaWYgKCFy
YWRlb25fY29ubmVjdG9yLT5kZGNfYnVzKQogCQkJCURSTV9FUlJPUigiRFZJQTogRmFpbGVkIHRv
IGFzc2lnbiBkZGMgYnVzISBDaGVjayBkbWVzZyBmb3IgaTJjIGVycm9ycy5cbiIpOworCQkJZWxz
ZQorCQkJCWRkYyA9ICZyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzLT5hZGFwdGVyOwogCQl9CisJ
CWRybV9jb25uZWN0b3JfaW5pdF93aXRoX2RkYyhkZXYsICZyYWRlb25fY29ubmVjdG9yLT5iYXNl
LAorCQkJCQkgICAgJnJhZGVvbl92Z2FfY29ubmVjdG9yX2Z1bmNzLAorCQkJCQkgICAgY29ubmVj
dG9yX3R5cGUsCisJCQkJCSAgICBkZGMpOworCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJh
ZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fdmdhX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3Mp
OwogCQlyYWRlb25fY29ubmVjdG9yLT5kYWNfbG9hZF9kZXRlY3QgPSB0cnVlOwogCQlkcm1fb2Jq
ZWN0X2F0dGFjaF9wcm9wZXJ0eSgmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZS5iYXNlLAogCQkJCQkg
ICAgICByZGV2LT5tb2RlX2luZm8ubG9hZF9kZXRlY3RfcHJvcGVydHksCkBAIC0yNDEzLDEzICsy
NDcwLDE4IEBAIHJhZGVvbl9hZGRfbGVnYWN5X2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LAogCQlicmVhazsKIAljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9EVklJOgogCWNhc2UgRFJN
X01PREVfQ09OTkVDVE9SX0RWSUQ6Ci0JCWRybV9jb25uZWN0b3JfaW5pdChkZXYsICZyYWRlb25f
Y29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2R2aV9jb25uZWN0b3JfZnVuY3MsIGNvbm5lY3Rvcl90
eXBlKTsKLQkJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNl
LCAmcmFkZW9uX2R2aV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJaWYgKGkyY19idXMtPnZh
bGlkKSB7CiAJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVzID0gcmFkZW9uX2kyY19sb29rdXAo
cmRldiwgaTJjX2J1cyk7CiAJCQlpZiAoIXJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMpCiAJCQkJ
RFJNX0VSUk9SKCJEVkk6IEZhaWxlZCB0byBhc3NpZ24gZGRjIGJ1cyEgQ2hlY2sgZG1lc2cgZm9y
IGkyYyBlcnJvcnMuXG4iKTsKKwkJCWVsc2UKKwkJCQlkZGMgPSAmcmFkZW9uX2Nvbm5lY3Rvci0+
ZGRjX2J1cy0+YWRhcHRlcjsKIAkJfQorCQlkcm1fY29ubmVjdG9yX2luaXRfd2l0aF9kZGMoZGV2
LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwKKwkJCQkJICAgICZyYWRlb25fZHZpX2Nvbm5lY3Rv
cl9mdW5jcywKKwkJCQkJICAgIGNvbm5lY3Rvcl90eXBlLAorCQkJCQkgICAgZGRjKTsKKwkJZHJt
X2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKCZyYWRlb25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX2R2
aV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJaWYgKGNvbm5lY3Rvcl90eXBlID09IERSTV9N
T0RFX0NPTk5FQ1RPUl9EVklJKSB7CiAJCQlyYWRlb25fY29ubmVjdG9yLT5kYWNfbG9hZF9kZXRl
Y3QgPSB0cnVlOwogCQkJZHJtX29iamVjdF9hdHRhY2hfcHJvcGVydHkoJnJhZGVvbl9jb25uZWN0
b3ItPmJhc2UuYmFzZSwKQEAgLTI0MzYsNyArMjQ5OCwxMCBAQCByYWRlb25fYWRkX2xlZ2FjeV9j
b25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAljYXNlIERSTV9NT0RFX0NPTk5FQ1RP
Ul9TVklERU86CiAJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfQ29tcG9zaXRlOgogCWNhc2UgRFJN
X01PREVfQ09OTkVDVE9SXzlQaW5ESU46Ci0JCWRybV9jb25uZWN0b3JfaW5pdChkZXYsICZyYWRl
b25fY29ubmVjdG9yLT5iYXNlLCAmcmFkZW9uX3R2X2Nvbm5lY3Rvcl9mdW5jcywgY29ubmVjdG9y
X3R5cGUpOworCQlkcm1fY29ubmVjdG9yX2luaXRfd2l0aF9kZGMoZGV2LCAmcmFkZW9uX2Nvbm5l
Y3Rvci0+YmFzZSwKKwkJCQkJICAgICZyYWRlb25fdHZfY29ubmVjdG9yX2Z1bmNzLAorCQkJCQkg
ICAgY29ubmVjdG9yX3R5cGUsCisJCQkJCSAgICBkZGMpOwogCQlkcm1fY29ubmVjdG9yX2hlbHBl
cl9hZGQoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fdHZfY29ubmVjdG9yX2hlbHBl
cl9mdW5jcyk7CiAJCXJhZGVvbl9jb25uZWN0b3ItPmRhY19sb2FkX2RldGVjdCA9IHRydWU7CiAJ
CS8qIFJTNDAwLFJDNDEwLFJTNDgwIGNoaXBzZXQgc2VlbXMgdG8gcmVwb3J0IGEgbG90CkBAIC0y
NDU4LDEzICsyNTIzLDE4IEBAIHJhZGVvbl9hZGRfbGVnYWN5X2Nvbm5lY3RvcihzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LAogCQljb25uZWN0b3ItPmRvdWJsZXNjYW5fYWxsb3dlZCA9IGZhbHNlOwog
CQlicmVhazsKIAljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9MVkRTOgotCQlkcm1fY29ubmVjdG9y
X2luaXQoZGV2LCAmcmFkZW9uX2Nvbm5lY3Rvci0+YmFzZSwgJnJhZGVvbl9sdmRzX2Nvbm5lY3Rv
cl9mdW5jcywgY29ubmVjdG9yX3R5cGUpOwotCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJh
ZGVvbl9jb25uZWN0b3ItPmJhc2UsICZyYWRlb25fbHZkc19jb25uZWN0b3JfaGVscGVyX2Z1bmNz
KTsKIAkJaWYgKGkyY19idXMtPnZhbGlkKSB7CiAJCQlyYWRlb25fY29ubmVjdG9yLT5kZGNfYnVz
ID0gcmFkZW9uX2kyY19sb29rdXAocmRldiwgaTJjX2J1cyk7CiAJCQlpZiAoIXJhZGVvbl9jb25u
ZWN0b3ItPmRkY19idXMpCiAJCQkJRFJNX0VSUk9SKCJMVkRTOiBGYWlsZWQgdG8gYXNzaWduIGRk
YyBidXMhIENoZWNrIGRtZXNnIGZvciBpMmMgZXJyb3JzLlxuIik7CisJCQllbHNlCisJCQkJZGRj
ID0gJnJhZGVvbl9jb25uZWN0b3ItPmRkY19idXMtPmFkYXB0ZXI7CiAJCX0KKwkJZHJtX2Nvbm5l
Y3Rvcl9pbml0X3dpdGhfZGRjKGRldiwgJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UsCisJCQkJCSAg
ICAmcmFkZW9uX2x2ZHNfY29ubmVjdG9yX2Z1bmNzLAorCQkJCQkgICAgY29ubmVjdG9yX3R5cGUs
CisJCQkJCSAgICBkZGMpOworCQlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJnJhZGVvbl9jb25u
ZWN0b3ItPmJhc2UsICZyYWRlb25fbHZkc19jb25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAkJZHJt
X29iamVjdF9hdHRhY2hfcHJvcGVydHkoJnJhZGVvbl9jb25uZWN0b3ItPmJhc2UuYmFzZSwKIAkJ
CQkJICAgICAgZGV2LT5tb2RlX2NvbmZpZy5zY2FsaW5nX21vZGVfcHJvcGVydHksCiAJCQkJCSAg
ICAgIERSTV9NT0RFX1NDQUxFX0ZVTExTQ1JFRU4pOwotLSAKMi4xNy4xCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0
CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
