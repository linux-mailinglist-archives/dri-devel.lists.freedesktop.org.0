Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DF99D6B3A2
	for <lists+dri-devel@lfdr.de>; Wed, 17 Jul 2019 03:56:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 828816E201;
	Wed, 17 Jul 2019 01:56:06 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x649.google.com (mail-pl1-x649.google.com
 [IPv6:2607:f8b0:4864:20::649])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CB0356E201
 for <dri-devel@lists.freedesktop.org>; Wed, 17 Jul 2019 01:56:04 +0000 (UTC)
Received: by mail-pl1-x649.google.com with SMTP id u10so11166449plq.21
 for <dri-devel@lists.freedesktop.org>; Tue, 16 Jul 2019 18:56:04 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=Nz8aHV39st6C14LfpoASArc0NcKx9jRy4dn2kjWwnX8=;
 b=ji9AYEcW3p1BGf1HaeXfyd5SHXhwzHreEICkdLVfQj3EU6bm930XytHgzJkfE2Mz4I
 9VF7mhIbJTftaaaQeAPC8H3T4LS3Gagls/lag8UARNupJXpLXv73b0peBIgAKX38TmS8
 5Ls8xhuaryuuUivVC/ppQ6MvTBm9uwnuJy46tBQIdt1gBVjqFzdUcNPqrNJSzcSfS9iD
 GuaIw1P6MZF1hUipCtu618VXEefW45oDrD4DZvqEAcpAHsbbSRl8Q0Xt87O2Z5xt/Gzt
 01Pxq8OEg6P6ySLk5eWceADWizzt5URBrico9Uc0mt3QFt7MmCmiTgl5z9W9k1g6jAAL
 /rBw==
X-Gm-Message-State: APjAAAVOrQxrtavN06M01UkZ+3kgOtG/tXDnHMeHxfnpEOK0EBOxanCz
 V2lmqnW6HbjByDVbHwn3gXc4U181WED+7Hz5tjBlSg==
X-Google-Smtp-Source: APXvYqz0kOQ0kjtDlOHNl7pfytCE13iMAmvjEs4xHUGo47xOC7cuwiN8PWab0JpIXXH5u0DcT8cEF0Ve3SFX6VxWkHAAiw==
X-Received: by 2002:a63:e907:: with SMTP id i7mr37161686pgh.84.1563328563771; 
 Tue, 16 Jul 2019 18:56:03 -0700 (PDT)
Date: Tue, 16 Jul 2019 18:55:29 -0700
In-Reply-To: <20190717015543.152251-1-brendanhiggins@google.com>
Message-Id: <20190717015543.152251-5-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190717015543.152251-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.22.0.510.g264f2c817a-goog
Subject: [PATCH v11 04/18] kunit: test: add kunit_stream a std::stream like
 logger
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=Nz8aHV39st6C14LfpoASArc0NcKx9jRy4dn2kjWwnX8=;
 b=qQsx0jtc8w1sgJvUe/HBL6sYcJv0mQpi1pE2DODOu7wiK8hBgAw5eKIanqIz+MCPP+
 T42lXg62zCQUHH1HcPy+rdJrTlLvly2oxydW9AA+AjKUYSDQtHbxiyurLQa0sTzRzQts
 fusFLoxwz9RW6IYhqoi3Ao7MDICk3idt/q3hKTTBtnLnA4p1QwXAZjBEWWAe7eJWUlpp
 Z38Ah5SBDsoKrms0G12A/N9VrKF5r3sKdxZ19JzADgdQNWdhpmAFlKCck/2cTkzDpCKI
 dAbG4gSaB9PO3ZSIHlsHXkIEKonQY/W+nK0Hz+7X7ebdQ3z92PNyFoxS94t2MGImlEeh
 0C8Q==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QSBsb3Qgb2YgdGhlIGV4cGVjdGF0aW9uIGFuZCBhc3NlcnRpb24gaW5mcmFzdHJ1Y3R1cmUgcHJp
bnRzIG91dCBmYWlybHkKY29tcGxpY2F0ZWQgdGVzdCBmYWlsdXJlIG1lc3NhZ2VzLCBzbyBhZGQg
YSBDKysgc3R5bGUgbG9nIGxpYnJhcnkgZm9yCmZvciBsb2dnaW5nIHRlc3QgcmVzdWx0cyBjYWxs
ZWQgYHN0cnVjdCBrdW5pdF9zdHJlYW1gLgoKa3VuaXRfc3RyZWFtIGFsbG93cyB1cyB0byBjb25z
dHJ1Y3QgYSBtZXNzYWdlIGJlZm9yZSB3ZSBrbm93IHdoZXRoZXIgd2UKd2FudCB0byBwcmludCBp
dCBvdXQ7IHRoaXMgY2FuIGJlIGV4dHJlbWVseSBoYW5keSBpZiB0aGVyZSBpcwppbmZvcm1hdGlv
biB5b3UgbWlnaHQgbmVlZCBmb3IgYSBmYWlsdXJlIG1lc3NhZ2UgdGhhdCBpcyBlYXNpZXN0IHRv
CmNvbGxlY3QgaW4gdGhlIHN0ZXBzIGxlYWRpbmcgdXAgdG8gdGhlIGFjdHVhbCBjaGVjay4KCk5v
dGUgdGhhdCBrdW5pdF9zdHJlYW0gaXMgZGlzdGluY3QgZnJvbSBzdHJpbmdfc3RyZWFtOiB3aGVy
ZWFzCnN0cmluZ19zdHJlYW0gaXMgcmVhbGx5IGp1c3QgYSBzdHJpbmcgYnVpbGRlciwga3VuaXRf
c3RyZWFtIGlzCnNwZWNpZmljYWxseSB1c2VkIGZvciBjb25zdHJ1Y3RpbmcgZXhwZWN0YXRpb24v
YXNzZXJ0aW9uIChpbnRyb2R1Y2VkCmxhdGVyIGluIHRoaXMgc2VyaWVzKSBtZXNzYWdlcyB0byBh
IHVzZXIgb2YgS1VuaXQuCgpTaWduZWQtb2ZmLWJ5OiBCcmVuZGFuIEhpZ2dpbnMgPGJyZW5kYW5o
aWdnaW5zQGdvb2dsZS5jb20+ClJldmlld2VkLWJ5OiBHcmVnIEtyb2FoLUhhcnRtYW4gPGdyZWdr
aEBsaW51eGZvdW5kYXRpb24ub3JnPgpSZXZpZXdlZC1ieTogTG9nYW4gR3VudGhvcnBlIDxsb2dh
bmdAZGVsdGF0ZWUuY29tPgotLS0KIGluY2x1ZGUva3VuaXQva3VuaXQtc3RyZWFtLmggfCAgOTcg
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIGluY2x1ZGUva3VuaXQvdGVzdC5oICAgICAg
ICAgfCAgIDMgKwoga3VuaXQvTWFrZWZpbGUgICAgICAgICAgICAgICB8ICAgMyArLQoga3VuaXQv
a3VuaXQtc3RyZWFtLmMgICAgICAgICB8IDExNSArKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKwoga3VuaXQvdGVzdC5jICAgICAgICAgICAgICAgICB8ICAgNiArKwogNSBmaWxlcyBj
aGFuZ2VkLCAyMjMgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAw
NjQ0IGluY2x1ZGUva3VuaXQva3VuaXQtc3RyZWFtLmgKIGNyZWF0ZSBtb2RlIDEwMDY0NCBrdW5p
dC9rdW5pdC1zdHJlYW0uYwoKZGlmZiAtLWdpdCBhL2luY2x1ZGUva3VuaXQva3VuaXQtc3RyZWFt
LmggYi9pbmNsdWRlL2t1bml0L2t1bml0LXN0cmVhbS5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAwMDAwMDAuLmJhMGZmNTUzYjgzMDEKLS0tIC9kZXYvbnVsbAorKysgYi9pbmNs
dWRlL2t1bml0L2t1bml0LXN0cmVhbS5oCkBAIC0wLDAgKzEsOTcgQEAKKy8qIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBHUEwtMi4wICovCisvKgorICogQysrIHN0cmVhbSBzdHlsZSBzdHJpbmcg
Zm9ybWF0dGVyIGFuZCBwcmludGVyIHVzZWQgaW4gS1VuaXQgZm9yIG91dHB1dHRpbmcKKyAqIEtV
bml0IG1lc3NhZ2VzLgorICoKKyAqIENvcHlyaWdodCAoQykgMjAxOSwgR29vZ2xlIExMQy4KKyAq
IEF1dGhvcjogQnJlbmRhbiBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29tPgorICov
CisKKyNpZm5kZWYgX0tVTklUX0tVTklUX1NUUkVBTV9ICisjZGVmaW5lIF9LVU5JVF9LVU5JVF9T
VFJFQU1fSAorCisjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4KKyNpbmNsdWRlIDxrdW5pdC9zdHJp
bmctc3RyZWFtLmg+CisKK3N0cnVjdCBrdW5pdDsKKworLyoqCisgKiBzdHJ1Y3Qga3VuaXRfc3Ry
ZWFtIC0gYSBzdGQ6OnN0cmVhbSBzdHlsZSBzdHJpbmcgYnVpbGRlci4KKyAqCisgKiBBIHN0ZDo6
c3RyZWFtIHN0eWxlIHN0cmluZyBidWlsZGVyLiBBbGxvd3MgbWVzc2FnZXMgdG8gYmUgYnVpbHQg
dXAgYW5kCisgKiBwcmludGVkIGFsbCBhdCBvbmNlLiBOb3RlIHRoYXQgdGhlIGludGVudGlvbiBp
cyB0byBvbmx5IHVzZQorICogJnN0cnVjdCBrdW5pdF9zdHJlYW0gdG8gY29tbXVuaWNhdGUgd2l0
aCBhIHVzZXIgb2YgS1VuaXQsIG1vc3Qgb2Z0ZW4gdG8KKyAqIGNvbW11bmljYXRlIHNvbWV0aGlu
ZyBhYm91dCBhbiBleHBlY3RhdGlvbiBvciBhbiBhc3NlcnRpb24gdG8gdGhlIHVzZXIuIElmCisg
KiB5b3Ugd2FudCBhIHNpbWlsYXIgaW50ZXJmYWNlLCBidXQgYXJlbid0IHN1cmUgaWYgdGhpcyBp
cyB0aGUgcmlnaHQgY2xhc3MgZm9yCisgKiB5b3UgdG8gdXNlLCB5b3UgcHJvYmFibHkgd2FudCB0
byB1c2UgdGhlIHJlbGF0ZWQgc3RyaW5nX3N0cmVhbSBjbGFzcywgd2hpY2gKKyAqIGlzIGFsbG93
ZWQgZm9yIGdlbmVyaWMgc3RyaW5nIGNvbnN0cnVjdGlvbiBpbiBhIHNpbWlsYXIgbWFubmVyLiBU
aGlzIGNsYXNzIGlzCisgKiByZWFsbHkgb25seSBmb3IgdGhlIEtVbml0IGxpYnJhcnkgdG8gY29t
bXVuaWNhdGUgY2VydGFpbiBraW5kcyBvZiBpbmZvcm1hdGlvbgorICogdG8gS1VuaXQgdXNlcnMg
YW5kIHNob3VsZCBub3QgYmUgdXNlZCBieSBhbnlvbmUgZWxzZS4KKyAqCisgKiBBIG5vdGUgb24g
JnN0cnVjdCBrdW5pdF9zdHJlYW0ncyB1c2FnZTogYSBrdW5pdF9zdHJlYW0gd2lsbCBnZW5lcmFs
bHkKKyAqIGFjY29tcGFueSAqb25lKiBleHBlY3RhdGlvbiBvciBhc3NlcnRpb24uIE11bHRpcGxl
IGV4cGVjdGF0aW9ucy9hc3NlcnRpb25zCisgKiBtYXkgYmUgdmFsaWRhdGVkIGNvbmN1cnJlbnRs
eSBhdCBhbnkgZ2l2ZW4gdGltZSwgZXZlbiB3aXRoaW4gYSBzaW5nbGUgdGVzdAorICogY2FzZSwg
c28gc2hhcmluZyBhIGt1bml0X3N0cmVhbSBiZXR3ZWVuIGV4cGVjdGF0aW9ucy9hc3NlcnRpb25z
IG1heSByZXN1bHQgaW4KKyAqIHVuaW50ZW5kZWQgY29uc2VxdWVuY2VzLgorICovCitzdHJ1Y3Qg
a3VuaXRfc3RyZWFtIHsKKwkvKiBwcml2YXRlOiBpbnRlcm5hbCB1c2Ugb25seS4gKi8KKwlzdHJ1
Y3Qga3VuaXQgKnRlc3Q7CisJY29uc3QgY2hhciAqbGV2ZWw7CisJc3RydWN0IHN0cmluZ19zdHJl
YW0gKmludGVybmFsX3N0cmVhbTsKK307CisKKy8qKgorICogYWxsb2Nfa3VuaXRfc3RyZWFtKCkg
LSBjb25zdHJ1Y3RzIGEgbmV3ICZzdHJ1Y3Qga3VuaXRfc3RyZWFtLgorICogQHRlc3Q6IFRoZSB0
ZXN0IGNvbnRleHQgb2JqZWN0LgorICogQGxldmVsOiBUaGUgbG9nIGxldmVsIGF0IHdoaWNoIHRv
IHByaW50IG91dCB0aGUgbWVzc2FnZS4KKyAqIEBnZnA6IFRoZSBHRlAgZmxhZ3MgdG8gdXNlIGZv
ciBpbnRlcm5hbCBhbGxvY2F0aW9ucy4KKyAqCisgKiBDb25zdHJ1Y3RzIGEgbmV3IHRlc3QgbWFu
YWdlZCAmc3RydWN0IGt1bml0X3N0cmVhbS4KKyAqLworc3RydWN0IGt1bml0X3N0cmVhbSAqYWxs
b2Nfa3VuaXRfc3RyZWFtKHN0cnVjdCBrdW5pdCAqdGVzdCwKKwkJCQkJY29uc3QgY2hhciAqbGV2
ZWwsCisJCQkJCWdmcF90IGdmcCk7CisKKy8qKgorICoga3VuaXRfc3RyZWFtX2FkZCgpOiBhZGRz
IHRoZSBmb3JtYXR0ZWQgaW5wdXQgdG8gdGhlIGludGVybmFsIGJ1ZmZlci4KKyAqIEBrc3RyZWFt
OiB0aGUgc3RyZWFtIGJlaW5nIG9wZXJhdGVkIG9uLgorICogQGZtdDogcHJpbnRmIHN0eWxlIGZv
cm1hdCBzdHJpbmcgdG8gYXBwZW5kIHRvIHN0cmVhbS4KKyAqCisgKiBBcHBlbmRzIHRoZSBmb3Jt
YXR0ZWQgc3RyaW5nLCBAZm10LCB0byB0aGUgaW50ZXJuYWwgYnVmZmVyLgorICovCit2b2lkIF9f
cHJpbnRmKDIsIDMpIGt1bml0X3N0cmVhbV9hZGQoc3RydWN0IGt1bml0X3N0cmVhbSAqa3N0cmVh
bSwKKwkJCQkgICAgIGNvbnN0IGNoYXIgKmZtdCwgLi4uKTsKKworLyoqCisgKiBrdW5pdF9zdHJl
YW1fYXBwZW5kKCk6IGFwcGVuZHMgdGhlIGNvbnRlbnRzIG9mIEBvdGhlciB0byBAa3N0cmVhbS4K
KyAqIEBrc3RyZWFtOiB0aGUgc3RyZWFtIHRvIHdoaWNoIEBvdGhlciBpcyBhcHBlbmRlZC4KKyAq
IEBvdGhlcjogdGhlIHN0cmVhbSB3aG9zZSBjb250ZW50cyBhcmUgYXBwZW5kZWQgdG8gQGtzdHJl
YW0uCisgKgorICogQXBwZW5kcyB0aGUgY29udGVudHMgb2YgQG90aGVyIHRvIEBrc3RyZWFtLgor
ICovCit2b2lkIGt1bml0X3N0cmVhbV9hcHBlbmQoc3RydWN0IGt1bml0X3N0cmVhbSAqa3N0cmVh
bSwKKwkJCSBzdHJ1Y3Qga3VuaXRfc3RyZWFtICpvdGhlcik7CisKKy8qKgorICoga3VuaXRfc3Ry
ZWFtX2NvbW1pdCgpOiBwcmludHMgb3V0IHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gdGhlIHVzZXIu
CisgKiBAa3N0cmVhbTogdGhlIHN0cmVhbSBiZWluZyBvcGVyYXRlZCBvbi4KKyAqCisgKiBPdXRw
dXRzIHRoZSBjb250ZW50cyBvZiB0aGUgaW50ZXJuYWwgYnVmZmVyIGFzIGEga3VuaXRfcHJpbnRr
IGZvcm1hdHRlZAorICogb3V0cHV0LiBLVU5JVF9TVFJFQU0gT05MWSBPVVRQVVRTIElUUyBCVUZG
RVIgVE8gVEhFIFVTRVIgSUYgQ09NTUlUIElTCisgKiBDQUxMRUQhISEgVGhlIHJlYXNvbiBmb3Ig
dGhpcyBpcyB0aGF0IGl0IGFsbG93cyB1cyB0byBjb25zdHJ1Y3QgYSBtZXNzYWdlCisgKiBiZWZv
cmUgd2Uga25vdyB3aGV0aGVyIHdlIHdhbnQgdG8gcHJpbnQgaXQgb3V0OyB0aGlzIGNhbiBiZSBl
eHRyZW1lbHkgaGFuZHkKKyAqIGlmIHRoZXJlIGlzIGluZm9ybWF0aW9uIHlvdSBtaWdodCBuZWVk
IGZvciBhIGZhaWx1cmUgbWVzc2FnZSB0aGF0IGlzIGVhc2llc3QKKyAqIHRvIGNvbGxlY3QgaW4g
dGhlIHN0ZXBzIGxlYWRpbmcgdXAgdG8gdGhlIGFjdHVhbCBjaGVjay4KKyAqLwordm9pZCBrdW5p
dF9zdHJlYW1fY29tbWl0KHN0cnVjdCBrdW5pdF9zdHJlYW0gKmtzdHJlYW0pOworCisvKioKKyAq
IGt1bml0X3N0cmVhbV9jbGVhcigpOiBjbGVhcnMgdGhlIGludGVybmFsIGJ1ZmZlci4KKyAqIEBr
c3RyZWFtOiB0aGUgc3RyZWFtIGJlaW5nIG9wZXJhdGVkIG9uLgorICoKKyAqIENsZWFycyB0aGUg
Y29udGVudHMgb2YgdGhlIGludGVybmFsIGJ1ZmZlci4KKyAqLwordm9pZCBrdW5pdF9zdHJlYW1f
Y2xlYXIoc3RydWN0IGt1bml0X3N0cmVhbSAqa3N0cmVhbSk7CisKKyNlbmRpZiAvKiBfS1VOSVRf
S1VOSVRfU1RSRUFNX0ggKi8KZGlmZiAtLWdpdCBhL2luY2x1ZGUva3VuaXQvdGVzdC5oIGIvaW5j
bHVkZS9rdW5pdC90ZXN0LmgKaW5kZXggZDBiZjExMjkxMGNhZi4uNGI2ZTdkOTFhZmQzNCAxMDA2
NDQKLS0tIGEvaW5jbHVkZS9rdW5pdC90ZXN0LmgKKysrIGIvaW5jbHVkZS9rdW5pdC90ZXN0LmgK
QEAgLTExLDYgKzExLDcgQEAKIAogI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+CiAjaW5jbHVkZSA8
bGludXgvc2xhYi5oPgorI2luY2x1ZGUgPGt1bml0L2t1bml0LXN0cmVhbS5oPgogCiBzdHJ1Y3Qg
a3VuaXRfcmVzb3VyY2U7CiAKQEAgLTE4NCw2ICsxODUsOCBAQCBzdHJ1Y3Qga3VuaXQgewogCiB2
b2lkIGt1bml0X2luaXRfdGVzdChzdHJ1Y3Qga3VuaXQgKnRlc3QsIGNvbnN0IGNoYXIgKm5hbWUp
OwogCit2b2lkIGt1bml0X2ZhaWwoc3RydWN0IGt1bml0ICp0ZXN0LCBzdHJ1Y3Qga3VuaXRfc3Ry
ZWFtICpzdHJlYW0pOworCiBpbnQga3VuaXRfcnVuX3Rlc3RzKHN0cnVjdCBrdW5pdF9zdWl0ZSAq
c3VpdGUpOwogCiAvKioKZGlmZiAtLWdpdCBhL2t1bml0L01ha2VmaWxlIGIva3VuaXQvTWFrZWZp
bGUKaW5kZXggMjc1YjU2NWEwZTgxZi4uNmRkYzYyMmVlNmIxYyAxMDA2NDQKLS0tIGEva3VuaXQv
TWFrZWZpbGUKKysrIGIva3VuaXQvTWFrZWZpbGUKQEAgLTEsMiArMSwzIEBACiBvYmotJChDT05G
SUdfS1VOSVQpICs9CQkJdGVzdC5vIFwKLQkJCQkJc3RyaW5nLXN0cmVhbS5vCisJCQkJCXN0cmlu
Zy1zdHJlYW0ubyBcCisJCQkJCWt1bml0LXN0cmVhbS5vCmRpZmYgLS1naXQgYS9rdW5pdC9rdW5p
dC1zdHJlYW0uYyBiL2t1bml0L2t1bml0LXN0cmVhbS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAwMDAwMDAuLjQyZmNlZjgxODhiM2EKLS0tIC9kZXYvbnVsbAorKysgYi9rdW5p
dC9rdW5pdC1zdHJlYW0uYwpAQCAtMCwwICsxLDExNSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50
aWZpZXI6IEdQTC0yLjAKKy8qCisgKiBDKysgc3RyZWFtIHN0eWxlIHN0cmluZyBmb3JtYXR0ZXIg
YW5kIHByaW50ZXIgdXNlZCBpbiBLVW5pdCBmb3Igb3V0cHV0dGluZworICogS1VuaXQgbWVzc2Fn
ZXMuCisgKgorICogQ29weXJpZ2h0IChDKSAyMDE5LCBHb29nbGUgTExDLgorICogQXV0aG9yOiBC
cmVuZGFuIEhpZ2dpbnMgPGJyZW5kYW5oaWdnaW5zQGdvb2dsZS5jb20+CisgKi8KKworI2luY2x1
ZGUgPGt1bml0L3Rlc3QuaD4KKyNpbmNsdWRlIDxrdW5pdC9rdW5pdC1zdHJlYW0uaD4KKyNpbmNs
dWRlIDxrdW5pdC9zdHJpbmctc3RyZWFtLmg+CisKK3ZvaWQga3VuaXRfc3RyZWFtX2FkZChzdHJ1
Y3Qga3VuaXRfc3RyZWFtICprc3RyZWFtLCBjb25zdCBjaGFyICpmbXQsIC4uLikKK3sKKwl2YV9s
aXN0IGFyZ3M7CisJc3RydWN0IHN0cmluZ19zdHJlYW0gKnN0cmVhbSA9IGtzdHJlYW0tPmludGVy
bmFsX3N0cmVhbTsKKworCXZhX3N0YXJ0KGFyZ3MsIGZtdCk7CisKKwlpZiAoc3RyaW5nX3N0cmVh
bV92YWRkKHN0cmVhbSwgZm10LCBhcmdzKSkKKwkJa3VuaXRfZXJyKGtzdHJlYW0tPnRlc3QsCisJ
CQkgICJGYWlsZWQgdG8gYWxsb2NhdGUgZnJhZ21lbnQ6ICVzXG4iLAorCQkJICBmbXQpOworCisJ
dmFfZW5kKGFyZ3MpOworfQorCit2b2lkIGt1bml0X3N0cmVhbV9hcHBlbmQoc3RydWN0IGt1bml0
X3N0cmVhbSAqa3N0cmVhbSwKKwkJCSBzdHJ1Y3Qga3VuaXRfc3RyZWFtICpvdGhlcikKK3sKKwlp
bnQgcmV0OworCisJcmV0ID0gc3RyaW5nX3N0cmVhbV9hcHBlbmQoa3N0cmVhbS0+aW50ZXJuYWxf
c3RyZWFtLAorCQkJCSAgIG90aGVyLT5pbnRlcm5hbF9zdHJlYW0pOworCisJaWYgKHJldCkKKwkJ
a3VuaXRfZXJyKGtzdHJlYW0tPnRlc3QsCisJCQkgICJGYWlsZWQgdG8gYXBwZW5kIG90aGVyIHN0
cmVhbTogJWRcbiIsIHJldCk7Cit9CisKK3ZvaWQga3VuaXRfc3RyZWFtX2NsZWFyKHN0cnVjdCBr
dW5pdF9zdHJlYW0gKmtzdHJlYW0pCit7CisJc3RyaW5nX3N0cmVhbV9jbGVhcihrc3RyZWFtLT5p
bnRlcm5hbF9zdHJlYW0pOworfQorCit2b2lkIGt1bml0X3N0cmVhbV9jb21taXQoc3RydWN0IGt1
bml0X3N0cmVhbSAqa3N0cmVhbSkKK3sKKwlzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtID0g
a3N0cmVhbS0+aW50ZXJuYWxfc3RyZWFtOworCXN0cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50
ICpmcmFnbWVudDsKKwlzdHJ1Y3Qga3VuaXQgKnRlc3QgPSBrc3RyZWFtLT50ZXN0OworCWNoYXIg
KmJ1ZjsKKworCWJ1ZiA9IHN0cmluZ19zdHJlYW1fZ2V0X3N0cmluZyhzdHJlYW0pOworCWlmICgh
YnVmKSB7CisJCWt1bml0X2Vycih0ZXN0LAorCQkJICAiQ291bGQgbm90IGFsbG9jYXRlIGJ1ZmZl
ciwgZHVtcGluZyBzdHJlYW06XG4iKTsKKwkJbGlzdF9mb3JfZWFjaF9lbnRyeShmcmFnbWVudCwg
JnN0cmVhbS0+ZnJhZ21lbnRzLCBub2RlKSB7CisJCQlrdW5pdF9lcnIodGVzdCwgZnJhZ21lbnQt
PmZyYWdtZW50KTsKKwkJfQorCQlrdW5pdF9lcnIodGVzdCwgIlxuIik7CisJfSBlbHNlIHsKKwkJ
a3VuaXRfcHJpbnRrKGtzdHJlYW0tPmxldmVsLCB0ZXN0LCBidWYpOworCX0KKworCWt1bml0X3N0
cmVhbV9jbGVhcihrc3RyZWFtKTsKK30KKworc3RydWN0IGt1bml0X3N0cmVhbV9hbGxvY19jb250
ZXh0IHsKKwlzdHJ1Y3Qga3VuaXQgKnRlc3Q7CisJY29uc3QgY2hhciAqbGV2ZWw7CisJZ2ZwX3Qg
Z2ZwOworfTsKKworc3RhdGljIGludCBrdW5pdF9zdHJlYW1faW5pdChzdHJ1Y3Qga3VuaXRfcmVz
b3VyY2UgKnJlcywgdm9pZCAqY29udGV4dCkKK3sKKwlzdHJ1Y3Qga3VuaXRfc3RyZWFtX2FsbG9j
X2NvbnRleHQgKmN0eCA9IGNvbnRleHQ7CisJc3RydWN0IGt1bml0X3N0cmVhbSAqc3RyZWFtOwor
CisJc3RyZWFtID0ga3VuaXRfa3phbGxvYyhjdHgtPnRlc3QsIHNpemVvZigqc3RyZWFtKSwgY3R4
LT5nZnApOworCWlmICghc3RyZWFtKQorCQlyZXR1cm4gLUVOT01FTTsKKworCXJlcy0+YWxsb2Nh
dGlvbiA9IHN0cmVhbTsKKwlzdHJlYW0tPnRlc3QgPSBjdHgtPnRlc3Q7CisJc3RyZWFtLT5sZXZl
bCA9IGN0eC0+bGV2ZWw7CisJc3RyZWFtLT5pbnRlcm5hbF9zdHJlYW0gPSBhbGxvY19zdHJpbmdf
c3RyZWFtKGN0eC0+dGVzdCwgY3R4LT5nZnApOworCisJaWYgKCFzdHJlYW0tPmludGVybmFsX3N0
cmVhbSkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQg
a3VuaXRfc3RyZWFtX2ZyZWUoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMpCit7CisJLyogRG8g
bm90aGluZyBiZWNhdXNlIGNsZWFudXAgaXMgaGFuZGxlZCBieSBLVW5pdCBtYW5hZ2VkIHJlc291
cmNlcyAqLworfQorCitzdHJ1Y3Qga3VuaXRfc3RyZWFtICphbGxvY19rdW5pdF9zdHJlYW0oc3Ry
dWN0IGt1bml0ICp0ZXN0LAorCQkJCQljb25zdCBjaGFyICpsZXZlbCwKKwkJCQkJZ2ZwX3QgZ2Zw
KQoreworCXN0cnVjdCBrdW5pdF9zdHJlYW1fYWxsb2NfY29udGV4dCBjdHggPSB7CisJCS50ZXN0
ID0gdGVzdCwKKwkJLmxldmVsID0gbGV2ZWwsCisJCS5nZnAgPSBnZnAKKwl9OworCisJcmV0dXJu
IGt1bml0X2FsbG9jX3Jlc291cmNlKHRlc3QsCisJCQkJICAgIGt1bml0X3N0cmVhbV9pbml0LAor
CQkJCSAgICBrdW5pdF9zdHJlYW1fZnJlZSwKKwkJCQkgICAgZ2ZwLAorCQkJCSAgICAmY3R4KTsK
K30KZGlmZiAtLWdpdCBhL2t1bml0L3Rlc3QuYyBiL2t1bml0L3Rlc3QuYwppbmRleCA0YzE3OGE4
MTdmMmZlLi5mZGFiMDdiYjBiNTI5IDEwMDY0NAotLS0gYS9rdW5pdC90ZXN0LmMKKysrIGIva3Vu
aXQvdGVzdC5jCkBAIC0xMjAsNiArMTIwLDEyIEBAIHN0YXRpYyB2b2lkIGt1bml0X3ByaW50X3Rl
c3RfY2FzZV9va19ub3Rfb2soc3RydWN0IGt1bml0X2Nhc2UgKnRlc3RfY2FzZSwKIAkJCSAgICAg
IHRlc3RfY2FzZS0+bmFtZSk7CiB9CiAKK3ZvaWQga3VuaXRfZmFpbChzdHJ1Y3Qga3VuaXQgKnRl
c3QsIHN0cnVjdCBrdW5pdF9zdHJlYW0gKnN0cmVhbSkKK3sKKwlrdW5pdF9zZXRfZmFpbHVyZSh0
ZXN0KTsKKwlrdW5pdF9zdHJlYW1fY29tbWl0KHN0cmVhbSk7Cit9CisKIHZvaWQga3VuaXRfaW5p
dF90ZXN0KHN0cnVjdCBrdW5pdCAqdGVzdCwgY29uc3QgY2hhciAqbmFtZSkKIHsKIAlzcGluX2xv
Y2tfaW5pdCgmdGVzdC0+bG9jayk7Ci0tIAoyLjIyLjAuNTEwLmcyNjRmMmM4MTdhLWdvb2cKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBt
YWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
