Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CD20394E82
	for <lists+dri-devel@lfdr.de>; Mon, 19 Aug 2019 21:40:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 00CA86E24B;
	Mon, 19 Aug 2019 19:40:30 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from NAM05-DM3-obe.outbound.protection.outlook.com
 (mail-dm3nam05on061f.outbound.protection.outlook.com
 [IPv6:2a01:111:f400:fe51::61f])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 477E86E24B;
 Mon, 19 Aug 2019 19:40:29 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=gURn8J2lk+xeNa5i3u+Y8Tssq6BtDdCd0XKL9/ZnC3D6Ij0dPhBo2Z6xUcU3lrgV7mo9RCCCyWJlPhFRsRWRSIBzRr1eyqS8Lj7EHTuJe9ErwsOwNr2KA60yx/on93fvYIIFKTvDttKy4PmrrmdFbO5hY909PuGPsvyVmoD5HKqmUBbNH3F4AFvrkim7syVLvbHw2JGNKh5sc6aPPnZ5IM7n1sHqr4bBXLuYnwyeUL3jBa/rd2l3i9r4q/rh0J4oktnxEv7BBIJymMp47BdMG4xSYpPXcinIfd3X5GjcxVA/cUb7f3KWxNJTekXmMRTCEih0jniDftSIvUbrI1bqdQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=7RezIrezk71w/wt1wEO+wnOESSp49Q+0X6mGIVDY7Oc=;
 b=Mr25NqGj1rriaa4zc7L1EHAwOBXmJtf9Wq5r1UlidjiLf6lzx2dWOjUMnDsyOzbaPgbmpsUrPwq83PAif2ckrxFQvwQ09/QwZnP1OXulxEHHlzN9/gT0MFL8yuf2zwYR0lgbWY6/ToolbuztKeT34g1LrJOreaV/UCkeWeF78W01bTGVnZbnB/aq+RfVxJW5PnBii+KNL7rG51JIAWCGMc/6DWNuaNM49RYdqC8mla7ezLM9ECvyyMpJBdCbHYEhWVKAp3rpmZm051/QFXACIij3LzTWOAa/bh4Ad4hYTHYKstv7nTTZ/CK3HmtwBYGncRSgSA2laMboLDfqJjOQUQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from BN8PR12MB3217.namprd12.prod.outlook.com (20.179.67.158) by
 BN8PR12MB3043.namprd12.prod.outlook.com (20.178.209.90) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2178.16; Mon, 19 Aug 2019 19:40:27 +0000
Received: from BN8PR12MB3217.namprd12.prod.outlook.com
 ([fe80::78ee:f1aa:4477:4b77]) by BN8PR12MB3217.namprd12.prod.outlook.com
 ([fe80::78ee:f1aa:4477:4b77%7]) with mapi id 15.20.2178.018; Mon, 19 Aug 2019
 19:40:27 +0000
From: "Francis, David" <David.Francis@amd.com>
To: "Kazlauskas, Nicholas" <Nicholas.Kazlauskas@amd.com>,
 "dri-devel@lists.freedesktop.org" <dri-devel@lists.freedesktop.org>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>
Subject: Re: [PATCH 14/14] drm/amd/display: Trigger modesets on MST DSC
 connectors
Thread-Topic: [PATCH 14/14] drm/amd/display: Trigger modesets on MST DSC
 connectors
Thread-Index: AQHVVqXiCZZqNpsdSEWecz8qlusDOacC3OoAgAAAnz8=
Date: Mon, 19 Aug 2019 19:40:27 +0000
Message-ID: <BN8PR12MB3217EFB89B908BE14A39D7F0EFA80@BN8PR12MB3217.namprd12.prod.outlook.com>
References: <20190819155038.1771-1-David.Francis@amd.com>
 <20190819155038.1771-15-David.Francis@amd.com>,
 <1da62258-0a43-1945-7046-6b9bd58f8524@amd.com>
In-Reply-To: <1da62258-0a43-1945-7046-6b9bd58f8524@amd.com>
Accept-Language: en-CA, en-US
Content-Language: en-CA
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [165.204.55.250]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 1b0e0ab6-618e-40cd-69fe-08d724dd160b
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(4618075)(2017052603328)(7193020);
 SRVR:BN8PR12MB3043; 
x-ms-traffictypediagnostic: BN8PR12MB3043:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <BN8PR12MB3043BB347677C089E89B613CEFA80@BN8PR12MB3043.namprd12.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:9508;
x-forefront-prvs: 0134AD334F
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(346002)(376002)(396003)(136003)(366004)(189003)(199004)(5660300002)(2906002)(26005)(3846002)(6116002)(71200400001)(486006)(76116006)(6436002)(76176011)(7696005)(14454004)(99286004)(316002)(71190400001)(52536014)(66556008)(66476007)(66446008)(64756008)(2501003)(110136005)(446003)(66946007)(81156014)(476003)(8936002)(7736002)(305945005)(9686003)(74316002)(186003)(55016002)(11346002)(53936002)(33656002)(14444005)(256004)(53546011)(5024004)(6506007)(86362001)(2201001)(4326008)(450100002)(6246003)(478600001)(81166006)(66066001)(229853002)(102836004)(8676002)(25786009);
 DIR:OUT; SFP:1101; SCL:1; SRVR:BN8PR12MB3043;
 H:BN8PR12MB3217.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: AzJDbp9FzFNx1iHLaT3JOV2OyivHYOyuyfy4sAdb7ni5//WlF+DI+l/triGNmh7p9Qp+4skuAnAjFyK05v9Oi73PNqJglX5VDhQivmM3wcuAKV7JZhvDrN3lJp+XKS8sxbmRXBF9Jr8cIs/R0YT6gTCBOYSdlC2Zkl0PxV0K4oDcIZlSJEC6O8r4CmOE9rH0u9TOLGB8v1qPo9iXntnH6HV5GLUEo3SR/4j0oG/Mn9UEohJYai21Y5b0oID+rj+reU/oOisL9ilwMiXZ+yxwatm7Gvq9jLTg6kWwdwhTCgSvM5Wae5g6pchfNrTKBAHsj74eX8x0NvtHOhj3WVmSzClZreQJNRkN+XBHO7RK2aUF3EBGEfXK9lF8HjEetJbhKVKggp0dbbeRRbYy5OP2VGk/wklFfoZjXlnGnRUDZD8=
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 1b0e0ab6-618e-40cd-69fe-08d724dd160b
X-MS-Exchange-CrossTenant-originalarrivaltime: 19 Aug 2019 19:40:27.0704 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: 9NZ9uTYEX1dqBBGZII2nhzmVqMJJIBxqmIdtoEmdsuTDky6JljGZYsBcNhO414ED
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BN8PR12MB3043
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=7RezIrezk71w/wt1wEO+wnOESSp49Q+0X6mGIVDY7Oc=;
 b=tr7O7onbFNrRSVjOxTN9Gn9mZWPk589pD1CcOl4A//4XGKmrU41p5GtiGedg0bayTIweOuOr4aqk0eziSauU4Gwm8thVfHnX9SIOp049DMR/4vAfKzzHIW43jCYrYWdsEAkE8c25le7+EIzus+YO1ZjzzcUMu+9zbvt642MmlaI=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=David.Francis@amd.com; 
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: "Li, Sun peng \(Leo\)" <Sunpeng.Li@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Pj4gV2hlbmV2ZXIgYSBjb25uZWN0b3Igb24gYW4gTVNUIG5ldHdvcmsgaXMgYXR0YWNoZWQsIGRl
dGFjaGVkLCBvcgo+PiB1bmRlcmdvZXMgYSBtb2Rlc2V0LCB0aGUgRFNDIGNvbmZpZ3MgZm9yIGVh
Y2ggc3RyZWFtIG9uIHRoYXQKPj4gdG9wb2xvZ3kgd2lsbCBiZSByZWNhbGN1bGF0ZWQuIFRoaXMg
Y2FuIGNoYW5nZSB0aGVpciByZXF1aXJlZAo+PiBiYW5kd2lkdGgsIHJlcXVpcmluZyBhIGZ1bGwg
cmVwcm9ncmFtbWluZywgYXMgdGhvdWdoIGEgbW9kZXNldAo+PiB3YXMgcGVyZm9ybWVkLCBldmVu
IGlmIHRoYXQgc3RyZWFtIGRpZCBub3QgY2hhbmdlIHRpbWluZy4KPj4KPj4gVGhlcmVmb3JlLCB3
aGVuZXZlciBhIGNydGMgaGFzIGRybV9hdG9taWNfY3J0Y19uZWVkc19tb2Rlc2V0LAo+PiBmb3Ig
ZWFjaCBjcnRjIHRoYXQgc2hhcmVzIGEgTVNUIHRvcG9sb2d5IHdpdGggdGhhdCBzdHJlYW0gYW5k
Cj4+IHN1cHBvcnRzIERTQywgYWRkIHRoYXQgY3J0YyAoYW5kIGFsbCBhZmZlY3RlZCBjb25uZWN0
b3JzIGFuZAo+PiBwbGFuZXMpIHRvIHRoZSBhdG9taWMgc3RhdGUgYW5kIHNldCBtb2RlX2NoYW5n
ZWQgb24gaXRzIHN0YXRlCj4+Cj4+IENjOiBMZW8gTGkgPHN1bnBlbmcubGlAYW1kLmNvbT4KPj4g
Q2M6IE5pY2hvbGFzIEthemxhdXNrYXMgPG5pY2hvbGFzLmthemxhdXNrYXNAYW1kLmNvbT4KPj4g
U2lnbmVkLW9mZi1ieTogRGF2aWQgRnJhbmNpcyA8RGF2aWQuRnJhbmNpc0BhbWQuY29tPgo+PiAt
LS0KPj4gICAuLi4vZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtLmMgfCA4
MCArKysrKysrKysrKysrKysrKysrCj4+ICAgMSBmaWxlIGNoYW5nZWQsIDgwIGluc2VydGlvbnMo
KykKPj4KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVf
ZG0vYW1kZ3B1X2RtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2Ft
ZGdwdV9kbS5jCj4+IGluZGV4IDE0NWZkNzMwMjVkYy4uOGQ1MzU3YWVjNWU4IDEwMDY0NAo+PiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jCj4+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtLmMK
Pj4gQEAgLTY0NzUsNyArNjQ3NSw3OCBAQCBzdGF0aWMgaW50IGRvX2FxdWlyZV9nbG9iYWxfbG9j
ayhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+Pgo+PiAgICAgICAgcmV0dXJuIHJldCA8IDAgPyBy
ZXQgOiAwOwo+PiAgIH0KPj4gKyNpZmRlZiBDT05GSUdfRFJNX0FNRF9EQ19EU0NfU1VQUE9SVAo+
PiArc3RhdGljIGludCBhZGRfYWZmZWN0ZWRfbXN0X2RzY19jcnRjcyhzdHJ1Y3QgZHJtX2F0b21p
Y19zdGF0ZSAqc3RhdGUsIHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKPj4gK3sKPj4gKyAgICAgc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKPj4gKyAgICAgc3RydWN0IGRybV9jb25uZWN0
b3Jfc3RhdGUgKmNvbm5fc3RhdGU7Cj4+ICsgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3Rf
aXRlciBjb25uX2l0ZXI7Cj4+ICsgICAgIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqbmV3X2NydGNf
c3RhdGU7Cj4+ICsgICAgIHN0cnVjdCBhbWRncHVfZG1fY29ubmVjdG9yICphY29ubmVjdG9yID0g
TlVMTCwgKmFjb25uZWN0b3JfdG9fYWRkOwo+PiArICAgICBpbnQgaSwgaiwgcmV0Owo+PiArICAg
ICBzdHJ1Y3QgZHJtX2NydGMgKmNydGNzX2FmZmVjdGVkW01BWF9QSVBFU10gPSB7IDAgfTsgPiAr
Cj4+ICsgICAgIGZvcl9lYWNoX25ld19jb25uZWN0b3JfaW5fc3RhdGUoc3RhdGUsIGNvbm5lY3Rv
ciwgY29ubl9zdGF0ZSwgaSkgewo+PiArICAgICAgICAgICAgIGlmIChjb25uX3N0YXRlLT5jcnRj
ICE9IGNydGMpCj4+ICsgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPj4gKwo+PiArICAg
ICAgICAgICAgIGFjb25uZWN0b3IgPSB0b19hbWRncHVfZG1fY29ubmVjdG9yKGNvbm5lY3Rvcik7
Cj4+ICsgICAgICAgICAgICAgaWYgKCFhY29ubmVjdG9yLT5wb3J0KQo+PiArICAgICAgICAgICAg
ICAgICAgICAgYWNvbm5lY3RvciA9IE5VTEw7Cj4+ICsgICAgICAgICAgICAgZWxzZQo+PiArICAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4+ICsgICAgIH0KPj4gKwo+PiArICAgICBpZiAoIWFj
b25uZWN0b3IpCj4+ICsgICAgICAgICAgICAgcmV0dXJuIDA7Cj4+ICsKPj4gKyAgICAgaSA9IDA7
Cj4+ICsgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKHN0YXRlLT5kZXYsICZjb25u
X2l0ZXIpOwo+Cj5JIGRvbid0IGxpa2UgdGhhdCB3ZSdyZSBncmFiYmluZyB0aGUgZ2xvYmFsIGNv
bm5lY3RvciBsb2NrIGV2ZXJ5IHNpbmdsZQo+dGltZSBhbnkgQ1JUQyB1bmRlcmdvZXMgYSBtb2Rl
c2V0IGV2ZW4gZm9yIEFTSUNzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBEU0MuCj4KPldlIGRvIGxvY2sg
ZXZlcnl0aGluZyBiZWxvdyBpbiBhdG9taWMgY2hlY2sgYW55d2F5IGZvciBGVUxMIHVwZGF0ZXMg
YnV0Cj5JJ2QgbGlrZSB0byBhdm9pZCBhZGRpbmcgbW9yZSBjb2RlIHRoYXQgZG9lcyB0aGlzIGlm
IHBvc3NpYmxlLiBNYXliZSBhCj5jaGVjayBhdCB0aGUgc3RhcnQgdGhhdCBvbmx5IGRvZXMgdGhp
cyBpZiB0aGUgQVNJQyBoYXMgRFNDIHN1cHBvcnQgd291bGQKPmJlIE9LLgo+CgpXaWxsIGRvCgo+
PiArICAgICBkcm1fZm9yX2VhY2hfY29ubmVjdG9yX2l0ZXIoY29ubmVjdG9yLCAmY29ubl9pdGVy
KSB7Cj4+ICsgICAgICAgICAgICAgaWYgKCFjb25uZWN0b3ItPnN0YXRlIHx8ICFjb25uZWN0b3It
PnN0YXRlLT5jcnRjKQo+PiArICAgICAgICAgICAgICAgICAgICAgY29udGludWU7Cj4+ICsKPj4g
KyAgICAgICAgICAgICBhY29ubmVjdG9yX3RvX2FkZCA9IHRvX2FtZGdwdV9kbV9jb25uZWN0b3Io
Y29ubmVjdG9yKTsKPj4gKyAgICAgICAgICAgICBpZiAoIWFjb25uZWN0b3JfdG9fYWRkLT5wb3J0
KQo+PiArICAgICAgICAgICAgICAgICAgICAgY29udGludWU7Cj4+ICsKPj4gKyAgICAgICAgICAg
ICBpZiAoYWNvbm5lY3Rvcl90b19hZGQtPnBvcnQtPm1nciAhPSBhY29ubmVjdG9yLT5wb3J0LT5t
Z3IpCj4+ICsgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPj4gKwo+PiArICAgICAgICAg
ICAgIGlmICghYWNvbm5lY3Rvcl90b19hZGQtPmRjX3NpbmspCj4+ICsgICAgICAgICAgICAgICAg
ICAgICBjb250aW51ZTsKPj4gKwo+PiArICAgICAgICAgICAgIGlmICghYWNvbm5lY3Rvcl90b19h
ZGQtPmRjX3NpbmstPnNpbmtfZHNjX2NhcHMuZHNjX2RlY19jYXBzLmlzX2RzY19zdXBwb3J0ZWQp
Cj4+ICsgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPj4KPj4gKyAgICAgICAgICAgICBp
ZiAoaSA+PSBNQVhfUElQRVMpCj4+ICsgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPj4g
Kwo+PiArICAgICAgICAgICAgIGNydGNzX2FmZmVjdGVkW2ldID0gY29ubmVjdG9yLT5zdGF0ZS0+
Y3J0YzsKPgo+RHJvcCB0aGlzIGNydGNzX2FmZmVjdGVkIGFycmF5IGFuZCBqdXN0IHBlcmZvcm0g
dGhlIGxvZ2ljIGJlbG93IHJpZ2h0Cj5oZXJlLiBXZSBkb24ndCByZWFsbHkgbmVlZCB0d28gbG9v
cHMgaGVyZSwgcmVkdW5kYW50IGNhbGxzIHRvCj5kcm1fYXRvbWljX2dldF9jcnRjX3N0YXRlIGFu
ZCB0aGUgb3RoZXIgaGVscGVycyBhcmUgZmluZS4KPgoKVW5mb3J0dW5hdGVseSwgY2FsbGluZyBk
cm1fYXRvbWljX2dldF9jcnRjX3N0YXRlIGluc2lkZQpkcm1fZm9yX2VhY2hfY29ubmVjdG9yX2l0
ZXIgY2F1c2VzIGEgbG9ja2RlcCB3YXJuaW5nCgo+PiArICAgICAgICAgICAgIGkrKzsKPj4gKyAg
ICAgfQo+PiArICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9lbmQoJmNvbm5faXRlcik7Cj4+
ICsKPj4gKyAgICAgZm9yIChqID0gMDsgaiA8IGk7IGorKykgewo+PiArICAgICAgICAgICAgIG5l
d19jcnRjX3N0YXRlID0gZHJtX2F0b21pY19nZXRfY3J0Y19zdGF0ZShzdGF0ZSwgY3J0Y3NfYWZm
ZWN0ZWRbal0pOwo+PiArICAgICAgICAgICAgIGlmIChJU19FUlIobmV3X2NydGNfc3RhdGUpKQo+
PiArICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBUUl9FUlIobmV3X2NydGNfc3RhdGUpOwo+
PiArCj4+ICsgICAgICAgICAgICAgbmV3X2NydGNfc3RhdGUtPm1vZGVfY2hhbmdlZCA9IHRydWU7
Cj4+ICsKPj4gKyAgICAgICAgICAgICByZXQgPSBkcm1fYXRvbWljX2FkZF9hZmZlY3RlZF9jb25u
ZWN0b3JzKHN0YXRlLCBjcnRjc19hZmZlY3RlZFtqXSk7Cj4+ICsgICAgICAgICAgICAgaWYgKHJl
dCkKPj4gKyAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4+ICsKPj4gKyAgICAgICAg
ICAgICByZXQgPSBkcm1fYXRvbWljX2FkZF9hZmZlY3RlZF9wbGFuZXMoc3RhdGUsIGNydGNzX2Fm
ZmVjdGVkW2pdKTsKPj4gKyAgICAgICAgICAgICBpZiAocmV0KQo+PiArICAgICAgICAgICAgICAg
ICAgICAgcmV0dXJuIHJldDsKPj4gKyAgICAgfQo+PiArCj4+ICsgICAgIHJldHVybiAwOwo+PiAr
Cj4+ICt9Cj4+ICsjZW5kaWYKPj4gICBzdGF0aWMgdm9pZCBnZXRfZnJlZXN5bmNfY29uZmlnX2Zv
cl9jcnRjKAo+PiAgICAgICAgc3RydWN0IGRtX2NydGNfc3RhdGUgKm5ld19jcnRjX3N0YXRlLAo+
PiAgICAgICAgc3RydWN0IGRtX2Nvbm5lY3Rvcl9zdGF0ZSAqbmV3X2Nvbl9zdGF0ZSkKPj4gQEAg
LTcxNzgsNiArNzI0OSwxNSBAQCBzdGF0aWMgaW50IGFtZGdwdV9kbV9hdG9taWNfY2hlY2soc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiwKPj4gICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGZhaWw7
Cj4+ICAgICAgICB9Cj4+Cj4+ICsjaWZkZWYgQ09ORklHX0RSTV9BTURfRENfRFNDX1NVUFBPUlQK
Pj4gKyAgICAgZm9yX2VhY2hfb2xkbmV3X2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsIG9sZF9j
cnRjX3N0YXRlLCBuZXdfY3J0Y19zdGF0ZSwgaSkgewo+PiArICAgICAgICAgICAgIGlmIChkcm1f
YXRvbWljX2NydGNfbmVlZHNfbW9kZXNldChuZXdfY3J0Y19zdGF0ZSkpIHsKPj4gKyAgICAgICAg
ICAgICAgICAgICAgIHJldCA9IGFkZF9hZmZlY3RlZF9tc3RfZHNjX2NydGNzKHN0YXRlLCBjcnRj
KTsKPj4gKyAgICAgICAgICAgICAgICAgICAgIGlmIChyZXQpCj4+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGdvdG8gZmFpbDsKPj4gKyAgICAgICAgICAgICB9Cj4+ICsgICAgIH0KPj4g
KyNlbmRpZgo+PiAgICAgICAgLyoKPj4gICAgICAgICAqIEFkZCBhbGwgcHJpbWFyeSBhbmQgb3Zl
cmxheSBwbGFuZXMgb24gdGhlIENSVEMgdG8gdGhlIHN0YXRlCj4+ICAgICAgICAgKiB3aGVuZXZl
ciBhIHBsYW5lIGlzIGVuYWJsZWQgdG8gbWFpbnRhaW4gY29ycmVjdCB6LW9yZGVyaW5nCgpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkZyb206IEthemxhdXNrYXMsIE5p
Y2hvbGFzIDxOaWNob2xhcy5LYXpsYXVza2FzQGFtZC5jb20+ClNlbnQ6IEF1Z3VzdCAxOSwgMjAx
OSAzOjM0IFBNClRvOiBGcmFuY2lzLCBEYXZpZDsgZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZzsgYW1kLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKQ2M6IExpLCBTdW4gcGVuZyAoTGVv
KQpTdWJqZWN0OiBSZTogW1BBVENIIDE0LzE0XSBkcm0vYW1kL2Rpc3BsYXk6IFRyaWdnZXIgbW9k
ZXNldHMgb24gTVNUIERTQyBjb25uZWN0b3JzCgpPbiA4LzE5LzE5IDExOjUwIEFNLCBEYXZpZCBG
cmFuY2lzIHdyb3RlOgo+IFdoZW5ldmVyIGEgY29ubmVjdG9yIG9uIGFuIE1TVCBuZXR3b3JrIGlz
IGF0dGFjaGVkLCBkZXRhY2hlZCwgb3IKPiB1bmRlcmdvZXMgYSBtb2Rlc2V0LCB0aGUgRFNDIGNv
bmZpZ3MgZm9yIGVhY2ggc3RyZWFtIG9uIHRoYXQKPiB0b3BvbG9neSB3aWxsIGJlIHJlY2FsY3Vs
YXRlZC4gVGhpcyBjYW4gY2hhbmdlIHRoZWlyIHJlcXVpcmVkCj4gYmFuZHdpZHRoLCByZXF1aXJp
bmcgYSBmdWxsIHJlcHJvZ3JhbW1pbmcsIGFzIHRob3VnaCBhIG1vZGVzZXQKPiB3YXMgcGVyZm9y
bWVkLCBldmVuIGlmIHRoYXQgc3RyZWFtIGRpZCBub3QgY2hhbmdlIHRpbWluZy4KPgo+IFRoZXJl
Zm9yZSwgd2hlbmV2ZXIgYSBjcnRjIGhhcyBkcm1fYXRvbWljX2NydGNfbmVlZHNfbW9kZXNldCwK
PiBmb3IgZWFjaCBjcnRjIHRoYXQgc2hhcmVzIGEgTVNUIHRvcG9sb2d5IHdpdGggdGhhdCBzdHJl
YW0gYW5kCj4gc3VwcG9ydHMgRFNDLCBhZGQgdGhhdCBjcnRjIChhbmQgYWxsIGFmZmVjdGVkIGNv
bm5lY3RvcnMgYW5kCj4gcGxhbmVzKSB0byB0aGUgYXRvbWljIHN0YXRlIGFuZCBzZXQgbW9kZV9j
aGFuZ2VkIG9uIGl0cyBzdGF0ZQo+Cj4gQ2M6IExlbyBMaSA8c3VucGVuZy5saUBhbWQuY29tPgo+
IENjOiBOaWNob2xhcyBLYXpsYXVza2FzIDxuaWNob2xhcy5rYXpsYXVza2FzQGFtZC5jb20+Cj4g
U2lnbmVkLW9mZi1ieTogRGF2aWQgRnJhbmNpcyA8RGF2aWQuRnJhbmNpc0BhbWQuY29tPgo+IC0t
LQo+ICAgLi4uL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jIHwgODAg
KysrKysrKysrKysrKysrKysrKwo+ICAgMSBmaWxlIGNoYW5nZWQsIDgwIGluc2VydGlvbnMoKykK
Pgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2Ft
ZGdwdV9kbS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVf
ZG0uYwo+IGluZGV4IDE0NWZkNzMwMjVkYy4uOGQ1MzU3YWVjNWU4IDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtLmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jCj4gQEAgLTY0
NzUsNyArNjQ3NSw3OCBAQCBzdGF0aWMgaW50IGRvX2FxdWlyZV9nbG9iYWxfbG9jayhzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2LAo+Cj4gICAgICAgcmV0dXJuIHJldCA8IDAgPyByZXQgOiAwOwo+ICAg
fQo+ICsjaWZkZWYgQ09ORklHX0RSTV9BTURfRENfRFNDX1NVUFBPUlQKPiArc3RhdGljIGludCBh
ZGRfYWZmZWN0ZWRfbXN0X2RzY19jcnRjcyhzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUs
IHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKPiArewo+ICsgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9y
ICpjb25uZWN0b3I7Cj4gKyAgICAgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3Rh
dGU7Cj4gKyAgICAgc3RydWN0IGRybV9jb25uZWN0b3JfbGlzdF9pdGVyIGNvbm5faXRlcjsKPiAr
ICAgICBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKm5ld19jcnRjX3N0YXRlOwo+ICsgICAgIHN0cnVj
dCBhbWRncHVfZG1fY29ubmVjdG9yICphY29ubmVjdG9yID0gTlVMTCwgKmFjb25uZWN0b3JfdG9f
YWRkOwo+ICsgICAgIGludCBpLCBqLCByZXQ7Cj4gKyAgICAgc3RydWN0IGRybV9jcnRjICpjcnRj
c19hZmZlY3RlZFtNQVhfUElQRVNdID0geyAwIH07ID4gKwo+ICsgICAgIGZvcl9lYWNoX25ld19j
b25uZWN0b3JfaW5fc3RhdGUoc3RhdGUsIGNvbm5lY3RvciwgY29ubl9zdGF0ZSwgaSkgewo+ICsg
ICAgICAgICAgICAgaWYgKGNvbm5fc3RhdGUtPmNydGMgIT0gY3J0YykKPiArICAgICAgICAgICAg
ICAgICAgICAgY29udGludWU7Cj4gKwo+ICsgICAgICAgICAgICAgYWNvbm5lY3RvciA9IHRvX2Ft
ZGdwdV9kbV9jb25uZWN0b3IoY29ubmVjdG9yKTsKPiArICAgICAgICAgICAgIGlmICghYWNvbm5l
Y3Rvci0+cG9ydCkKPiArICAgICAgICAgICAgICAgICAgICAgYWNvbm5lY3RvciA9IE5VTEw7Cj4g
KyAgICAgICAgICAgICBlbHNlCj4gKyAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAg
IH0KPiArCj4gKyAgICAgaWYgKCFhY29ubmVjdG9yKQo+ICsgICAgICAgICAgICAgcmV0dXJuIDA7
Cj4gKwo+ICsgICAgIGkgPSAwOwo+ICsgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2lu
KHN0YXRlLT5kZXYsICZjb25uX2l0ZXIpOwoKSSBkb24ndCBsaWtlIHRoYXQgd2UncmUgZ3JhYmJp
bmcgdGhlIGdsb2JhbCBjb25uZWN0b3IgbG9jayBldmVyeSBzaW5nbGUKdGltZSBhbnkgQ1JUQyB1
bmRlcmdvZXMgYSBtb2Rlc2V0IGV2ZW4gZm9yIEFTSUNzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBEU0Mu
CgpXZSBkbyBsb2NrIGV2ZXJ5dGhpbmcgYmVsb3cgaW4gYXRvbWljIGNoZWNrIGFueXdheSBmb3Ig
RlVMTCB1cGRhdGVzIGJ1dApJJ2QgbGlrZSB0byBhdm9pZCBhZGRpbmcgbW9yZSBjb2RlIHRoYXQg
ZG9lcyB0aGlzIGlmIHBvc3NpYmxlLiBNYXliZSBhCmNoZWNrIGF0IHRoZSBzdGFydCB0aGF0IG9u
bHkgZG9lcyB0aGlzIGlmIHRoZSBBU0lDIGhhcyBEU0Mgc3VwcG9ydCB3b3VsZApiZSBPSy4KCj4g
KyAgICAgZHJtX2Zvcl9lYWNoX2Nvbm5lY3Rvcl9pdGVyKGNvbm5lY3RvciwgJmNvbm5faXRlcikg
ewo+ICsgICAgICAgICAgICAgaWYgKCFjb25uZWN0b3ItPnN0YXRlIHx8ICFjb25uZWN0b3ItPnN0
YXRlLT5jcnRjKQo+ICsgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPiArCj4gKyAgICAg
ICAgICAgICBhY29ubmVjdG9yX3RvX2FkZCA9IHRvX2FtZGdwdV9kbV9jb25uZWN0b3IoY29ubmVj
dG9yKTsKPiArICAgICAgICAgICAgIGlmICghYWNvbm5lY3Rvcl90b19hZGQtPnBvcnQpCj4gKyAg
ICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwo+ICsKPiArICAgICAgICAgICAgIGlmIChhY29u
bmVjdG9yX3RvX2FkZC0+cG9ydC0+bWdyICE9IGFjb25uZWN0b3ItPnBvcnQtPm1ncikKPiArICAg
ICAgICAgICAgICAgICAgICAgY29udGludWU7Cj4gKwo+ICsgICAgICAgICAgICAgaWYgKCFhY29u
bmVjdG9yX3RvX2FkZC0+ZGNfc2luaykKPiArICAgICAgICAgICAgICAgICAgICAgY29udGludWU7
Cj4gKwo+ICsgICAgICAgICAgICAgaWYgKCFhY29ubmVjdG9yX3RvX2FkZC0+ZGNfc2luay0+c2lu
a19kc2NfY2Fwcy5kc2NfZGVjX2NhcHMuaXNfZHNjX3N1cHBvcnRlZCkKPiArICAgICAgICAgICAg
ICAgICAgICAgY29udGludWU7Cj4KPiArICAgICAgICAgICAgIGlmIChpID49IE1BWF9QSVBFUykK
PiArICAgICAgICAgICAgICAgICAgICAgY29udGludWU7Cj4gKwo+ICsgICAgICAgICAgICAgY3J0
Y3NfYWZmZWN0ZWRbaV0gPSBjb25uZWN0b3ItPnN0YXRlLT5jcnRjOwoKRHJvcCB0aGlzIGNydGNz
X2FmZmVjdGVkIGFycmF5IGFuZCBqdXN0IHBlcmZvcm0gdGhlIGxvZ2ljIGJlbG93IHJpZ2h0Cmhl
cmUuIFdlIGRvbid0IHJlYWxseSBuZWVkIHR3byBsb29wcyBoZXJlLCByZWR1bmRhbnQgY2FsbHMg
dG8KZHJtX2F0b21pY19nZXRfY3J0Y19zdGF0ZSBhbmQgdGhlIG90aGVyIGhlbHBlcnMgYXJlIGZp
bmUuCgo+ICsgICAgICAgICAgICAgaSsrOwo+ICsgICAgIH0KPiArICAgICBkcm1fY29ubmVjdG9y
X2xpc3RfaXRlcl9lbmQoJmNvbm5faXRlcik7Cj4gKwo+ICsgICAgIGZvciAoaiA9IDA7IGogPCBp
OyBqKyspIHsKPiArICAgICAgICAgICAgIG5ld19jcnRjX3N0YXRlID0gZHJtX2F0b21pY19nZXRf
Y3J0Y19zdGF0ZShzdGF0ZSwgY3J0Y3NfYWZmZWN0ZWRbal0pOwo+ICsgICAgICAgICAgICAgaWYg
KElTX0VSUihuZXdfY3J0Y19zdGF0ZSkpCj4gKyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQ
VFJfRVJSKG5ld19jcnRjX3N0YXRlKTsKPiArCj4gKyAgICAgICAgICAgICBuZXdfY3J0Y19zdGF0
ZS0+bW9kZV9jaGFuZ2VkID0gdHJ1ZTsKPiArCj4gKyAgICAgICAgICAgICByZXQgPSBkcm1fYXRv
bWljX2FkZF9hZmZlY3RlZF9jb25uZWN0b3JzKHN0YXRlLCBjcnRjc19hZmZlY3RlZFtqXSk7Cj4g
KyAgICAgICAgICAgICBpZiAocmV0KQo+ICsgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0
Owo+ICsKPiArICAgICAgICAgICAgIHJldCA9IGRybV9hdG9taWNfYWRkX2FmZmVjdGVkX3BsYW5l
cyhzdGF0ZSwgY3J0Y3NfYWZmZWN0ZWRbal0pOwo+ICsgICAgICAgICAgICAgaWYgKHJldCkKPiAr
ICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiArICAgICB9Cj4gKwo+ICsgICAgIHJl
dHVybiAwOwo+ICsKPiArfQo+ICsjZW5kaWYKPiAgIHN0YXRpYyB2b2lkIGdldF9mcmVlc3luY19j
b25maWdfZm9yX2NydGMoCj4gICAgICAgc3RydWN0IGRtX2NydGNfc3RhdGUgKm5ld19jcnRjX3N0
YXRlLAo+ICAgICAgIHN0cnVjdCBkbV9jb25uZWN0b3Jfc3RhdGUgKm5ld19jb25fc3RhdGUpCj4g
QEAgLTcxNzgsNiArNzI0OSwxNSBAQCBzdGF0aWMgaW50IGFtZGdwdV9kbV9hdG9taWNfY2hlY2so
c3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiAgICAgICAgICAgICAgICAgICAgICAgZ290byBmYWls
Owo+ICAgICAgIH0KPgo+ICsjaWZkZWYgQ09ORklHX0RSTV9BTURfRENfRFNDX1NVUFBPUlQKPiAr
ICAgICBmb3JfZWFjaF9vbGRuZXdfY3J0Y19pbl9zdGF0ZShzdGF0ZSwgY3J0Yywgb2xkX2NydGNf
c3RhdGUsIG5ld19jcnRjX3N0YXRlLCBpKSB7Cj4gKyAgICAgICAgICAgICBpZiAoZHJtX2F0b21p
Y19jcnRjX25lZWRzX21vZGVzZXQobmV3X2NydGNfc3RhdGUpKSB7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgIHJldCA9IGFkZF9hZmZlY3RlZF9tc3RfZHNjX2NydGNzKHN0YXRlLCBjcnRjKTsKPiAr
ICAgICAgICAgICAgICAgICAgICAgaWYgKHJldCkKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBnb3RvIGZhaWw7Cj4gKyAgICAgICAgICAgICB9Cj4gKyAgICAgfQo+ICsjZW5kaWYKPiAg
ICAgICAvKgo+ICAgICAgICAqIEFkZCBhbGwgcHJpbWFyeSBhbmQgb3ZlcmxheSBwbGFuZXMgb24g
dGhlIENSVEMgdG8gdGhlIHN0YXRlCj4gICAgICAgICogd2hlbmV2ZXIgYSBwbGFuZSBpcyBlbmFi
bGVkIHRvIG1haW50YWluIGNvcnJlY3Qgei1vcmRlcmluZwo+CgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1k
ZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
