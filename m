Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 81C0CA56C0
	for <lists+dri-devel@lfdr.de>; Mon,  2 Sep 2019 14:54:55 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 07DA6890B2;
	Mon,  2 Sep 2019 12:54:50 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from fllv0015.ext.ti.com (fllv0015.ext.ti.com [198.47.19.141])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DB677890B2
 for <dri-devel@lists.freedesktop.org>; Mon,  2 Sep 2019 12:54:47 +0000 (UTC)
Received: from lelv0265.itg.ti.com ([10.180.67.224])
 by fllv0015.ext.ti.com (8.15.2/8.15.2) with ESMTP id x82CsjkC000557;
 Mon, 2 Sep 2019 07:54:45 -0500
Received: from DFLE100.ent.ti.com (dfle100.ent.ti.com [10.64.6.21])
 by lelv0265.itg.ti.com (8.15.2/8.15.2) with ESMTPS id x82CsjmJ000933
 (version=TLSv1.2 cipher=AES256-GCM-SHA384 bits=256 verify=FAIL);
 Mon, 2 Sep 2019 07:54:45 -0500
Received: from DFLE106.ent.ti.com (10.64.6.27) by DFLE100.ent.ti.com
 (10.64.6.21) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5; Mon, 2 Sep
 2019 07:54:45 -0500
Received: from fllv0039.itg.ti.com (10.64.41.19) by DFLE106.ent.ti.com
 (10.64.6.27) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5 via
 Frontend Transport; Mon, 2 Sep 2019 07:54:45 -0500
Received: from deskari.lan (ileax41-snat.itg.ti.com [10.172.224.153])
 by fllv0039.itg.ti.com (8.15.2/8.15.2) with ESMTP id x82CsYYN126767;
 Mon, 2 Sep 2019 07:54:43 -0500
From: Tomi Valkeinen <tomi.valkeinen@ti.com>
To: <dri-devel@lists.freedesktop.org>, Laurent Pinchart
 <laurent.pinchart@ideasonboard.com>
Subject: [PATCH 5/7] drm/omap: Enable COLOR_ENCODING and COLOR_RANGE
 properties for planes
Date: Mon, 2 Sep 2019 15:53:57 +0300
Message-ID: <20190902125359.18001-6-tomi.valkeinen@ti.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190902125359.18001-1-tomi.valkeinen@ti.com>
References: <20190902125359.18001-1-tomi.valkeinen@ti.com>
MIME-Version: 1.0
X-EXCLAIMER-MD-CONFIG: e1e8a2fd-e40a-4ac6-ac9b-f7e9cc9ee180
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ti.com; s=ti-com-17Q1; t=1567428885;
 bh=WnrcYdJUhaMF3vAbZlpDiuoeqoUCBGfx4Bv94sNPc/o=;
 h=From:To:CC:Subject:Date:In-Reply-To:References;
 b=sJhHW1nwYp4GALqm9yGJZZ5u8/ZKiHCs2LwFDuiPgNiXLUuB20XsSiuBk6wrAK5Dg
 yvctJpqkCH8q+2yulcx3vo7h6T4lLKDpC8WRotSSBbUDlVWc9p6ddvUaNFvMm33WNL
 YEOdO4VwCHqtxPzZpww/LmmN+g03pgKpXNB7c4kg=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Tomi Valkeinen <tomi.valkeinen@ti.com>, Jyri Sarha <jsarha@ti.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogSnlyaSBTYXJoYSA8anNhcmhhQHRpLmNvbT4KCkFkZHMgc3VwcG9ydCBmb3IgQ09MT1Jf
RU5DT0RJTkcgYW5kIENPTE9SX1JBTkdFIHByb3BlcnRpZXMgdG8Kb21hcF9wbGFuZS5jIGFuZCBk
aXNwYy5jLiBUaGUgc3VwcG9ydGVkIGVuY29kaW5ncyBhbmQgcmFuZ2VzIGFyZToKCkZvciBDT0xP
Ul9FTkNPRElORzoKLSBZQ2JDdCBCVC42MDEgKGRlZmF1bHQpCi0gWUNiQ3QgQlQuNzA5CgpGb3Ig
Q09MT1JfUkFOR0U6Ci0gWUNiQ3QgbGltaXRlZCByYW5nZQotIFlDYkN0IGZ1bGwgcmFuZ2UgKGRl
ZmF1bHQpCgpTaWduZWQtb2ZmLWJ5OiBKeXJpIFNhcmhhIDxqc2FyaGFAdGkuY29tPgpTaWduZWQt
b2ZmLWJ5OiBUb21pIFZhbGtlaW5lbiA8dG9taS52YWxrZWluZW5AdGkuY29tPgotLS0KIGRyaXZl
cnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9kaXNwYy5jICAgfCAxMTkgKysrKysrKysrKysrKysrKysr
KystLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLmggfCAgIDQgKwog
ZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9wbGFuZS5jICB8ICAzMCArKysrKysrCiAzIGZp
bGVzIGNoYW5nZWQsIDEyNyBpbnNlcnRpb25zKCspLCAyNiBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvZGlzcGMuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9vbWFwZHJtL2Rzcy9kaXNwYy5jCmluZGV4IDdkODdkNjBlZGI4MC4uNDBkZGIyOGVlN2FhIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvZGlzcGMuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvZGlzcGMuYwpAQCAtODkyLDMyICs4OTIsOTEgQEAgc3Rh
dGljIHZvaWQgZGlzcGNfd2Jfd3JpdGVfY29sb3JfY29udl9jb2VmKHN0cnVjdCBkaXNwY19kZXZp
Y2UgKmRpc3BjLAogI3VuZGVmIENWQUwKIH0KIAotc3RhdGljIHZvaWQgZGlzcGNfc2V0dXBfY29s
b3JfY29udl9jb2VmKHN0cnVjdCBkaXNwY19kZXZpY2UgKmRpc3BjKQorLyogWVVWIC0+IFJHQiwg
SVRVLVIgQlQuNjAxLCBmdWxsIHJhbmdlICovCitjb25zdCBzdGF0aWMgc3RydWN0IGNzY19jb2Vm
X3l1djJyZ2IgY29lZnNfeXV2MnJnYl9idDYwMV9mdWxsID0geworCTI1NiwgICAwLCAgMzU4LAkJ
LyogcnksIHJjYiwgcmNyIHwxLjAwMCAgMC4wMDAgIDEuNDAyfCovCisJMjU2LCAtODgsIC0xODIs
CQkvKiBneSwgZ2NiLCBnY3IgfDEuMDAwIC0wLjM0NCAtMC43MTR8Ki8KKwkyNTYsIDQ1MiwgICAg
MCwJCS8qIGJ5LCBiY2IsIGJjciB8MS4wMDAgIDEuNzcyICAwLjAwMHwqLworCXRydWUsCQkJLyog
ZnVsbCByYW5nZSAqLworfTsKKworLyogWVVWIC0+IFJHQiwgSVRVLVIgQlQuNjAxLCBsaW1pdGVk
IHJhbmdlICovCitjb25zdCBzdGF0aWMgc3RydWN0IGNzY19jb2VmX3l1djJyZ2IgY29lZnNfeXV2
MnJnYl9idDYwMV9saW0gPSB7CisJMjk4LCAgICAwLCAgNDA5LAkvKiByeSwgcmNiLCByY3IgfDEu
MTY0ICAwLjAwMCAgMS41OTZ8Ki8KKwkyOTgsIC0xMDAsIC0yMDgsCS8qIGd5LCBnY2IsIGdjciB8
MS4xNjQgLTAuMzkyIC0wLjgxM3wqLworCTI5OCwgIDUxNiwgICAgMCwJLyogYnksIGJjYiwgYmNy
IHwxLjE2NCAgMi4wMTcgIDAuMDAwfCovCisJZmFsc2UsCQkJLyogbGltaXRlZCByYW5nZSAqLwor
fTsKKworLyogWVVWIC0+IFJHQiwgSVRVLVIgQlQuNzA5LCBmdWxsIHJhbmdlICovCitjb25zdCBz
dGF0aWMgc3RydWN0IGNzY19jb2VmX3l1djJyZ2IgY29lZnNfeXV2MnJnYl9idDcwOV9mdWxsID0g
eworCTI1NiwgICAgMCwgIDQwMiwgICAgICAgIC8qIHJ5LCByY2IsIHJjciB8MS4wMDAgIDAuMDAw
ICAxLjU3MHwqLworCTI1NiwgIC00OCwgLTEyMCwgICAgICAgIC8qIGd5LCBnY2IsIGdjciB8MS4w
MDAgLTAuMTg3IC0wLjQ2N3wqLworCTI1NiwgIDQ3NSwgICAgMCwgICAgICAgIC8qIGJ5LCBiY2Is
IGJjciB8MS4wMDAgIDEuODU2ICAwLjAwMHwqLworCXRydWUsICAgICAgICAgICAgICAgICAgIC8q
IGZ1bGwgcmFuZ2UgKi8KK307CisKKy8qIFlVViAtPiBSR0IsIElUVS1SIEJULjcwOSwgbGltaXRl
ZCByYW5nZSAqLworY29uc3Qgc3RhdGljIHN0cnVjdCBjc2NfY29lZl95dXYycmdiIGNvZWZzX3l1
djJyZ2JfYnQ3MDlfbGltID0geworCTI5OCwgICAgMCwgIDQ1OSwJLyogcnksIHJjYiwgcmNyIHwx
LjE2NCAgMC4wMDAgIDEuNzkzfCovCisJMjk4LCAgLTU1LCAtMTM2LAkvKiBneSwgZ2NiLCBnY3Ig
fDEuMTY0IC0wLjIxMyAtMC41MzN8Ki8KKwkyOTgsICA1NDEsICAgIDAsCS8qIGJ5LCBiY2IsIGJj
ciB8MS4xNjQgIDIuMTEyICAwLjAwMHwqLworCWZhbHNlLAkJCS8qIGxpbWl0ZWQgcmFuZ2UgKi8K
K307CisKKy8qIFJHQiAtPiBZVVYsIElUVS1SIEJULjYwMSwgbGltaXRlZCByYW5nZSAqLworY29u
c3Qgc3RhdGljIHN0cnVjdCBjc2NfY29lZl9yZ2IyeXV2IGNvZWZzX3JnYjJ5dXZfYnQ2MDFfbGlt
ID0geworCSA2NiwgMTI5LCAgMjUsCQkvKiB5ciwgICB5ZywgIHliIHwgMC4yNTcgIDAuNTA0ICAw
LjA5OHwqLworCS0zOCwgLTc0LCAxMTIsCQkvKiBjYnIsIGNiZywgY2JiIHwtMC4xNDggLTAuMjkx
ICAwLjQzOXwqLworCTExMiwgLTk0LCAtMTgsCQkvKiBjcnIsIGNyZywgY3JiIHwgMC40MzkgLTAu
MzY4IC0wLjA3MXwqLworCWZhbHNlLAkJCS8qIGxpbWl0ZWQgcmFuZ2UgKi8KK307CisKKy8qIFJH
QiAtPiBZVVYsIElUVS1SIEJULjYwMSwgZnVsbCByYW5nZSAqLworY29uc3Qgc3RhdGljIHN0cnVj
dCBjc2NfY29lZl9yZ2IyeXV2IGNvZWZzX3JnYjJ5dXZfYnQ2MDFfZnVsbCA9IHsKKwkgNzcsICAx
NTAsICAyOSwJCS8qIHlyLCAgIHlnLCAgeWIgfCAwLjI5OSAgMC41ODcgIDAuMTE0fCovCisJLTQz
LCAgLTg1LCAxMjgsCQkvKiBjYnIsIGNiZywgY2JiIHwtMC4xNzMgLTAuMzM5ICAwLjUxMXwqLwor
CTEyOCwgLTEwNywgLTIxLAkJLyogY3JyLCBjcmcsIGNyYiB8IDAuNTExIC0wLjQyOCAtMC4wODN8
Ki8KKwl0cnVlLAkJCS8qIGZ1bGwgcmFuZ2UgKi8KK307CisKKy8qIFJHQiAtPiBZVVYsIElUVS1S
IEJULjcwOSwgbGltaXRlZCByYW5nZSAqLworY29uc3Qgc3RhdGljIHN0cnVjdCBjc2NfY29lZl9y
Z2IyeXV2IGNvZWZzX3JnYjJ5dXZfYnQ3MDFfbGltID0geworCSA0NywgIDE1NywgICAxNiwJLyog
eXIsICAgeWcsICB5YiB8IDAuMTgyNiAgMC42MTQyICAwLjA2MjB8Ki8KKwktMjYsICAtODcsICAx
MTIsCS8qIGNiciwgY2JnLCBjYmIgfC0wLjEwMDYgLTAuMzM4NiAgMC40MzkyfCovCisJMTEyLCAt
MTAyLCAgLTEwLAkvKiBjcnIsIGNyZywgY3JiIHwgMC40MzkyIC0wLjM5ODkgLTAuMDQwM3wqLwor
CWZhbHNlLAkJCS8qIGxpbWl0ZWQgcmFuZ2UgKi8KK307CisKK3N0YXRpYyBpbnQgZGlzcGNfb3Zs
X3NldF9jc2Moc3RydWN0IGRpc3BjX2RldmljZSAqZGlzcGMsCisJCQkgICAgIGVudW0gb21hcF9w
bGFuZV9pZCBwbGFuZSwKKwkJCSAgICAgZW51bSBkcm1fY29sb3JfZW5jb2RpbmcgY29sb3JfZW5j
b2RpbmcsCisJCQkgICAgIGVudW0gZHJtX2NvbG9yX3JhbmdlIGNvbG9yX3JhbmdlKQogewotCWlu
dCBpOwotCWludCBudW1fb3ZsID0gZGlzcGNfZ2V0X251bV9vdmxzKGRpc3BjKTsKLQotCS8qIFlV
ViAtPiBSR0IsIElUVS1SIEJULjYwMSwgbGltaXRlZCByYW5nZSAqLwotCWNvbnN0IHN0cnVjdCBj
c2NfY29lZl95dXYycmdiIGNvZWZzX3l1djJyZ2JfYnQ2MDFfbGltID0gewotCQkyOTgsICAgIDAs
ICA0MDksCS8qIHJ5LCByY2IsIHJjciAqLwotCQkyOTgsIC0xMDAsIC0yMDgsCS8qIGd5LCBnY2Is
IGdjciAqLwotCQkyOTgsICA1MTYsICAgIDAsCS8qIGJ5LCBiY2IsIGJjciAqLwotCQlmYWxzZSwJ
CQkvKiBsaW1pdGVkIHJhbmdlICovCi0JfTsKKwljb25zdCBzdHJ1Y3QgY3NjX2NvZWZfeXV2MnJn
YiAqY3NjOwogCi0JLyogUkdCIC0+IFlVViwgSVRVLVIgQlQuNjAxLCBsaW1pdGVkIHJhbmdlICov
Ci0JY29uc3Qgc3RydWN0IGNzY19jb2VmX3JnYjJ5dXYgY29lZnNfcmdiMnl1dl9idDYwMV9saW0g
PSB7Ci0JCSA2NiwgMTI5LCAgMjUsCQkvKiB5ciwgICB5ZywgIHliICovCi0JCS0zOCwgLTc0LCAx
MTIsCQkvKiBjYnIsIGNiZywgY2JiICovCi0JCTExMiwgLTk0LCAtMTgsCQkvKiBjcnIsIGNyZywg
Y3JiICovCi0JCWZhbHNlLAkJCS8qIGxpbWl0ZWQgcmFuZ2UgKi8KLQl9OworCXN3aXRjaCAoY29s
b3JfZW5jb2RpbmcpIHsKKwljYXNlIERSTV9DT0xPUl9ZQ0JDUl9CVDYwMToKKwkJaWYgKGNvbG9y
X3JhbmdlID09IERSTV9DT0xPUl9ZQ0JDUl9GVUxMX1JBTkdFKQorCQkJY3NjID0gJmNvZWZzX3l1
djJyZ2JfYnQ2MDFfZnVsbDsKKwkJZWxzZQorCQkJY3NjID0gJmNvZWZzX3l1djJyZ2JfYnQ2MDFf
bGltOworCQlicmVhazsKKwljYXNlIERSTV9DT0xPUl9ZQ0JDUl9CVDcwOToKKwkJaWYgKGNvbG9y
X3JhbmdlID09IERSTV9DT0xPUl9ZQ0JDUl9GVUxMX1JBTkdFKQorCQkJY3NjID0gJmNvZWZzX3l1
djJyZ2JfYnQ3MDlfZnVsbDsKKwkJZWxzZQorCQkJY3NjID0gJmNvZWZzX3l1djJyZ2JfYnQ3MDlf
bGltOworCQlicmVhazsKKwlkZWZhdWx0OgorCQlEU1NFUlIoIlVuc3VwcG9ydGVkIENTQyBtb2Rl
ICVkIGZvciBwbGFuZSAlZFxuIiwKKwkJICAgICAgIGNvbG9yX2VuY29kaW5nLCBwbGFuZSk7CisJ
CXJldHVybiAtRUlOVkFMOworCX0KIAotCWZvciAoaSA9IDE7IGkgPCBudW1fb3ZsOyBpKyspCi0J
CWRpc3BjX292bF93cml0ZV9jb2xvcl9jb252X2NvZWYoZGlzcGMsIGksICZjb2Vmc195dXYycmdi
X2J0NjAxX2xpbSk7CisJZGlzcGNfb3ZsX3dyaXRlX2NvbG9yX2NvbnZfY29lZihkaXNwYywgcGxh
bmUsIGNzYyk7CiAKLQlpZiAoZGlzcGMtPmZlYXQtPmhhc193cml0ZWJhY2spCi0JCWRpc3BjX3di
X3dyaXRlX2NvbG9yX2NvbnZfY29lZihkaXNwYywgJmNvZWZzX3JnYjJ5dXZfYnQ2MDFfbGltKTsK
KwlyZXR1cm4gMDsKIH0KIAogc3RhdGljIHZvaWQgZGlzcGNfb3ZsX3NldF9iYTAoc3RydWN0IGRp
c3BjX2RldmljZSAqZGlzcGMsCkBAIC0yNTk4LDcgKzI2NTcsOSBAQCBzdGF0aWMgaW50IGRpc3Bj
X292bF9zZXR1cF9jb21tb24oc3RydWN0IGRpc3BjX2RldmljZSAqZGlzcGMsCiAJCQkJICB1OCBw
cmVfbXVsdF9hbHBoYSwgdTggZ2xvYmFsX2FscGhhLAogCQkJCSAgZW51bSBvbWFwX2Rzc19yb3Rh
dGlvbl90eXBlIHJvdGF0aW9uX3R5cGUsCiAJCQkJICBib29sIHJlcGxpY2F0aW9uLCBjb25zdCBz
dHJ1Y3QgdmlkZW9tb2RlICp2bSwKLQkJCQkgIGJvb2wgbWVtX3RvX21lbSkKKwkJCQkgIGJvb2wg
bWVtX3RvX21lbSwKKwkJCQkgIGVudW0gZHJtX2NvbG9yX2VuY29kaW5nIGNvbG9yX2VuY29kaW5n
LAorCQkJCSAgZW51bSBkcm1fY29sb3JfcmFuZ2UgY29sb3JfcmFuZ2UpCiB7CiAJYm9vbCBmaXZl
X3RhcHMgPSB0cnVlOwogCWJvb2wgZmllbGRtb2RlID0gZmFsc2U7CkBAIC0yNzQ3LDYgKzI4MDgs
OSBAQCBzdGF0aWMgaW50IGRpc3BjX292bF9zZXR1cF9jb21tb24oc3RydWN0IGRpc3BjX2Rldmlj
ZSAqZGlzcGMsCiAJCQkJICAgICAgZmllbGRtb2RlLCBmb3VyY2MsIHJvdGF0aW9uKTsKIAkJZGlz
cGNfb3ZsX3NldF9vdXRwdXRfc2l6ZShkaXNwYywgcGxhbmUsIG91dF93aWR0aCwgb3V0X2hlaWdo
dCk7CiAJCWRpc3BjX292bF9zZXRfdmlkX2NvbG9yX2NvbnYoZGlzcGMsIHBsYW5lLCBjY29udik7
CisKKwkJaWYgKHBsYW5lICE9IE9NQVBfRFNTX1dCKQorCQkJZGlzcGNfb3ZsX3NldF9jc2MoZGlz
cGMsIHBsYW5lLCBjb2xvcl9lbmNvZGluZywgY29sb3JfcmFuZ2UpOwogCX0KIAogCWRpc3BjX292
bF9zZXRfcm90YXRpb25fYXR0cnMoZGlzcGMsIHBsYW5lLCByb3RhdGlvbiwgcm90YXRpb25fdHlw
ZSwKQEAgLTI3ODMsNyArMjg0Nyw4IEBAIHN0YXRpYyBpbnQgZGlzcGNfb3ZsX3NldHVwKHN0cnVj
dCBkaXNwY19kZXZpY2UgKmRpc3BjLAogCQlvaS0+c2NyZWVuX3dpZHRoLCBvaS0+cG9zX3gsIG9p
LT5wb3NfeSwgb2ktPndpZHRoLCBvaS0+aGVpZ2h0LAogCQlvaS0+b3V0X3dpZHRoLCBvaS0+b3V0
X2hlaWdodCwgb2ktPmZvdXJjYywgb2ktPnJvdGF0aW9uLAogCQlvaS0+em9yZGVyLCBvaS0+cHJl
X211bHRfYWxwaGEsIG9pLT5nbG9iYWxfYWxwaGEsCi0JCW9pLT5yb3RhdGlvbl90eXBlLCByZXBs
aWNhdGlvbiwgdm0sIG1lbV90b19tZW0pOworCQlvaS0+cm90YXRpb25fdHlwZSwgcmVwbGljYXRp
b24sIHZtLCBtZW1fdG9fbWVtLAorCQlvaS0+Y29sb3JfZW5jb2RpbmcsIG9pLT5jb2xvcl9yYW5n
ZSk7CiAKIAlyZXR1cm4gcjsKIH0KQEAgLTI4MTYsNyArMjg4MSw4IEBAIHN0YXRpYyBpbnQgZGlz
cGNfd2Jfc2V0dXAoc3RydWN0IGRpc3BjX2RldmljZSAqZGlzcGMsCiAJCXdpLT5idWZfd2lkdGgs
IHBvc194LCBwb3NfeSwgaW5fd2lkdGgsIGluX2hlaWdodCwgd2ktPndpZHRoLAogCQl3aS0+aGVp
Z2h0LCB3aS0+Zm91cmNjLCB3aS0+cm90YXRpb24sIHpvcmRlciwKIAkJd2ktPnByZV9tdWx0X2Fs
cGhhLCBnbG9iYWxfYWxwaGEsIHdpLT5yb3RhdGlvbl90eXBlLAotCQlyZXBsaWNhdGlvbiwgdm0s
IG1lbV90b19tZW0pOworCQlyZXBsaWNhdGlvbiwgdm0sIG1lbV90b19tZW0sIERSTV9DT0xPUl9Z
Q0JDUl9CVDYwMSwKKwkJRFJNX0NPTE9SX1lDQkNSX0xJTUlURURfUkFOR0UpOwogCWlmIChyKQog
CQlyZXR1cm4gcjsKIApAQCAtMzk0OCw3ICs0MDE0LDggQEAgc3RhdGljIHZvaWQgX29tYXBfZGlz
cGNfaW5pdGlhbF9jb25maWcoc3RydWN0IGRpc3BjX2RldmljZSAqZGlzcGMpCiAJICAgIGRpc3Bj
LT5mZWF0LT5oYXNfZ2FtbWFfdGFibGUpCiAJCVJFR19GTERfTU9EKGRpc3BjLCBESVNQQ19DT05G
SUcsIDEsIDksIDkpOwogCi0JZGlzcGNfc2V0dXBfY29sb3JfY29udl9jb2VmKGRpc3BjKTsKKwlp
ZiAoZGlzcGMtPmZlYXQtPmhhc193cml0ZWJhY2spCisJCWRpc3BjX3diX3dyaXRlX2NvbG9yX2Nv
bnZfY29lZihkaXNwYywgJmNvZWZzX3JnYjJ5dXZfYnQ2MDFfZnVsbCk7CiAKIAlkaXNwY19zZXRf
bG9hZG1vZGUoZGlzcGMsIE9NQVBfRFNTX0xPQURfRlJBTUVfT05MWSk7CiAKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLmggYi9kcml2ZXJzL2dwdS9kcm0v
b21hcGRybS9kc3Mvb21hcGRzcy5oCmluZGV4IDc5ZjZiMTk1YzdjZi4uMTQzMGNhYjZiODc3IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb21hcGRzcy5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLmgKQEAgLTE0LDYgKzE0LDcgQEAKICNp
bmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kYXRhL29tYXBkc3MuaD4KICNpbmNsdWRlIDx1YXBpL2Ry
bS9kcm1fbW9kZS5oPgogI2luY2x1ZGUgPGRybS9kcm1fY3J0Yy5oPgorI2luY2x1ZGUgPGRybS9k
cm1fY29sb3JfbWdtdC5oPgogCiAjZGVmaW5lIERJU1BDX0lSUV9GUkFNRURPTkUJCSgxIDw8IDAp
CiAjZGVmaW5lIERJU1BDX0lSUV9WU1lOQwkJCSgxIDw8IDEpCkBAIC0yNDMsNiArMjQ0LDkgQEAg
c3RydWN0IG9tYXBfb3ZlcmxheV9pbmZvIHsKIAl1OCBnbG9iYWxfYWxwaGE7CiAJdTggcHJlX211
bHRfYWxwaGE7CiAJdTggem9yZGVyOworCisJZW51bSBkcm1fY29sb3JfZW5jb2RpbmcgY29sb3Jf
ZW5jb2Rpbmc7CisJZW51bSBkcm1fY29sb3JfcmFuZ2UgY29sb3JfcmFuZ2U7CiB9OwogCiBzdHJ1
Y3Qgb21hcF9vdmVybGF5X21hbmFnZXJfaW5mbyB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vb21hcGRybS9vbWFwX3BsYW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX3Bs
YW5lLmMKaW5kZXggNzNlYzk5ODE5YTNkLi5kYjhlOTE3MjYwZGYgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9vbWFwZHJtL29tYXBfcGxhbmUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vb21h
cGRybS9vbWFwX3BsYW5lLmMKQEAgLTU5LDYgKzU5LDggQEAgc3RhdGljIHZvaWQgb21hcF9wbGFu
ZV9hdG9taWNfdXBkYXRlKHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAogCQlpbmZvLnByZV9tdWx0
X2FscGhhID0gMTsKIAllbHNlCiAJCWluZm8ucHJlX211bHRfYWxwaGEgPSAwOworCWluZm8uY29s
b3JfZW5jb2RpbmcgPSBzdGF0ZS0+Y29sb3JfZW5jb2Rpbmc7CisJaW5mby5jb2xvcl9yYW5nZSA9
IHN0YXRlLT5jb2xvcl9yYW5nZTsKIAogCS8qIHVwZGF0ZSBzY2Fub3V0OiAqLwogCW9tYXBfZnJh
bWVidWZmZXJfdXBkYXRlX3NjYW5vdXQoc3RhdGUtPmZiLCBzdGF0ZSwgJmluZm8pOwpAQCAtMTg5
LDYgKzE5MSw4IEBAIHN0YXRpYyB2b2lkIG9tYXBfcGxhbmVfcmVzZXQoc3RydWN0IGRybV9wbGFu
ZSAqcGxhbmUpCiAJICovCiAJcGxhbmUtPnN0YXRlLT56cG9zID0gcGxhbmUtPnR5cGUgPT0gRFJN
X1BMQU5FX1RZUEVfUFJJTUFSWQogCQkJICAgPyAwIDogb21hcF9wbGFuZS0+aWQ7CisJcGxhbmUt
PnN0YXRlLT5jb2xvcl9lbmNvZGluZyA9IERSTV9DT0xPUl9ZQ0JDUl9CVDYwMTsKKwlwbGFuZS0+
c3RhdGUtPmNvbG9yX3JhbmdlID0gRFJNX0NPTE9SX1lDQkNSX0ZVTExfUkFOR0U7CiB9CiAKIHN0
YXRpYyBpbnQgb21hcF9wbGFuZV9hdG9taWNfc2V0X3Byb3BlcnR5KHN0cnVjdCBkcm1fcGxhbmUg
KnBsYW5lLApAQCAtMjMyLDYgKzIzNiwyMyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9wbGFu
ZV9mdW5jcyBvbWFwX3BsYW5lX2Z1bmNzID0gewogCS5hdG9taWNfZ2V0X3Byb3BlcnR5ID0gb21h
cF9wbGFuZV9hdG9taWNfZ2V0X3Byb3BlcnR5LAogfTsKIAorc3RhdGljIGJvb2wgb21hcF9wbGFu
ZV9zdXBwb3J0c195dXYoc3RydWN0IGRybV9wbGFuZSAqcGxhbmUpCit7CisJc3RydWN0IG9tYXBf
ZHJtX3ByaXZhdGUgKnByaXYgPSBwbGFuZS0+ZGV2LT5kZXZfcHJpdmF0ZTsKKwlzdHJ1Y3Qgb21h
cF9wbGFuZSAqb21hcF9wbGFuZSA9IHRvX29tYXBfcGxhbmUocGxhbmUpOworCWNvbnN0IHUzMiAq
Zm9ybWF0cyA9CisJCXByaXYtPmRpc3BjX29wcy0+b3ZsX2dldF9jb2xvcl9tb2Rlcyhwcml2LT5k
aXNwYywgb21hcF9wbGFuZS0+aWQpOworCWludCBpOworCisJZm9yIChpID0gMDsgZm9ybWF0c1tp
XTsgaSsrKQorCQlpZiAoZm9ybWF0c1tpXSA9PSBEUk1fRk9STUFUX1lVWVYgfHwKKwkJICAgIGZv
cm1hdHNbaV0gPT0gRFJNX0ZPUk1BVF9VWVZZIHx8CisJCSAgICBmb3JtYXRzW2ldID09IERSTV9G
T1JNQVRfTlYxMikKKwkJCXJldHVybiB0cnVlOworCisJcmV0dXJuIGZhbHNlOworfQorCiBzdGF0
aWMgY29uc3QgY2hhciAqcGxhbmVfaWRfdG9fbmFtZVtdID0gewogCVtPTUFQX0RTU19HRlhdID0g
ImdmeCIsCiAJW09NQVBfRFNTX1ZJREVPMV0gPSAidmlkMSIsCkBAIC0yOTMsNiArMzE0LDE1IEBA
IHN0cnVjdCBkcm1fcGxhbmUgKm9tYXBfcGxhbmVfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LAogCWRybV9wbGFuZV9jcmVhdGVfYmxlbmRfbW9kZV9wcm9wZXJ0eShwbGFuZSwgQklUKERSTV9N
T0RFX0JMRU5EX1BSRU1VTFRJKSB8CiAJCQkJCSAgICAgQklUKERSTV9NT0RFX0JMRU5EX0NPVkVS
QUdFKSk7CiAKKwlpZiAob21hcF9wbGFuZV9zdXBwb3J0c195dXYocGxhbmUpKQorCQlkcm1fcGxh
bmVfY3JlYXRlX2NvbG9yX3Byb3BlcnRpZXMocGxhbmUsCisJCQkJCUJJVChEUk1fQ09MT1JfWUNC
Q1JfQlQ2MDEpIHwKKwkJCQkJQklUKERSTV9DT0xPUl9ZQ0JDUl9CVDcwOSksCisJCQkJCUJJVChE
Uk1fQ09MT1JfWUNCQ1JfRlVMTF9SQU5HRSkgfAorCQkJCQlCSVQoRFJNX0NPTE9SX1lDQkNSX0xJ
TUlURURfUkFOR0UpLAorCQkJCQlEUk1fQ09MT1JfWUNCQ1JfQlQ2MDEsCisJCQkJCURSTV9DT0xP
Ul9ZQ0JDUl9GVUxMX1JBTkdFKTsKKwogCXJldHVybiBwbGFuZTsKIAogZXJyb3I6Ci0tIApUZXhh
cyBJbnN0cnVtZW50cyBGaW5sYW5kIE95LCBQb3Jra2FsYW5rYXR1IDIyLCAwMDE4MCBIZWxzaW5r
aS4KWS10dW5udXMvQnVzaW5lc3MgSUQ6IDA2MTU1MjEtNC4gS290aXBhaWtrYS9Eb21pY2lsZTog
SGVsc2lua2kKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
