Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D13CB38018C
	for <lists+dri-devel@lfdr.de>; Fri, 14 May 2021 03:50:41 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F1F376E174;
	Fri, 14 May 2021 01:50:39 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from m1346.mail.163.com (m1346.mail.163.com [220.181.13.46])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BFFDE6E174
 for <dri-devel@lists.freedesktop.org>; Fri, 14 May 2021 01:50:37 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=163.com;
 s=s110527; h=Date:From:Subject:MIME-Version:Message-ID; bh=4z6hm
 QnFjO+uYN0DHPBcJmOQ+sUqJoli/kvvy9hNJak=; b=bOYvzm9Uj1XUgkelk+9Gh
 8AZ1MqRIqy01V9kMGwyOXNyffm251P4C5ejL2RnwHTic3KoXrt8rjMDp0ayBDePD
 YKeJPNZBxA5FFsL5gl3Axhb8mP8Yb11PfdHICsS5UEmCpdIyJIrJqoWQhtGEJEU0
 MY+oGU5GhHJF2TKITw3mcw=
Received: from liplay$163.com ( [114.242.206.180] ) by ajax-webmail-wmsvr46
 (Coremail) ; Fri, 14 May 2021 09:35:27 +0800 (CST)
X-Originating-IP: [114.242.206.180]
Date: Fri, 14 May 2021 09:35:27 +0800 (CST)
From: lichenyang <liplay@163.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v8] drm/loongson: Add DRM Driver for Loongson 7A1000 bridge
 chip
X-Priority: 3
X-Mailer: Coremail Webmail Server Version XT5.0.13 build 20210104(ab8c30b6)
 Copyright (c) 2002-2021 www.mailtech.cn 163com
X-CM-CTRLDATA: nW6e1WZvb3Rlcl9odG09MzAyMzY6NTY=
Content-Type: multipart/alternative; 
 boundary="----=_Part_15229_1624407887.1620956127709"
MIME-Version: 1.0
Message-ID: <64f99d64.1067.1796883a1dd.Coremail.liplay@163.com>
X-Coremail-Locale: zh_CN
X-CM-TRANSID: LsGowABHCmXg051girn8AA--.15921W
X-CM-SenderInfo: xolsztr16rljoofrz/xtbBIgGHHF3l-bZtqgACsO
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

------=_Part_15229_1624407887.1620956127709
Content-Type: text/plain; charset=GBK
Content-Transfer-Encoding: base64

RnJvbTogQ2hlbnlhbmcgTGkgPGxpY2hlbnlhbmdAbG9vbmdzb24uY24+CgpUaGlzIHBhdGNoIGFk
ZHMgYW4gaW5pdGlhbCBEUk0gZHJpdmVyIGZvciB0aGUgTG9vbmdzb24gTFM3QTEwMDAKYnJpZGdl
IGNoaXAoTFM3QSkuIFRoZSBMUzdBIGJyaWRnZSBjaGlwIGNvbnRhaW5zIHR3byBkaXNwbGF5CmNv
bnRyb2xsZXJzLCBzdXBwb3J0IGR1YWwgZGlzcGxheSBvdXRwdXQuIFRoZSBtYXhpbXVtIHN1cHBv
cnQgZm9yCmVhY2ggY2hhbm5lbCBkaXNwbGF5IGlzIHRvIDE5MjB4MTA4MEA2MEh6LgpBdCBwcmVz
ZW50LCBEQyBkZXZpY2UgZGV0ZWN0aW9uIGFuZCBEUk0gZHJpdmVyIHJlZ2lzdHJhdGlvbiBhcmUK
Y29tcGxldGVkLCB0aGUgY3J0Yy9wbGFuZS9lbmNvZGVyL2Nvbm5lY3RvciBvYmplY3RzIGhhcyBi
ZWVuCmltcGxlbWVudGVkLgpPbiBMb29uZ3NvbiAzQTQwMDAgQ1BVIGFuZCA3QTEwMDAgc3lzdGVt
LCB3ZSBoYXZlIGFjaGlldmVkIHRoZSB1c2UKb2YgZHVhbCBzY3JlZW4sIGFuZCBzdXBwb3J0IGR1
YWwgc2NyZWVuIGNsb25lIG1vZGUgYW5kIGV4cGFuc2lvbgptb2RlLgoKdjg6Ci0gVXBkYXRlIHRo
ZSBhdG9taWNfdXBkYXRlIGZ1bmN0aW9uIGludGVyZmFjZS4KCnY3OgotIFRoZSBwaXhlbCBjbG9j
ayBpcyBsaW1pdGVkIHRvIGxlc3MgdGhhbiAxNzMwMDAuCgp2NjoKLSBSZW1vdmUgc3Bpbl9sb2Nr
IGluIG1taW8gcmVnIHJlYWQgYW5kIHdyaXRlLgotIFRPX1VOQ0FDIGlzIHJlcGxhYyB3aXRoIGlv
cmVtYXAuCi0gRml4IGVycm9yIGFyZ3VtZW50cyBpbiBjcnRjX2F0b21pY19lbmFibGUvZGlzYWJs
ZS9tb2RlX3ZhbGlkLgoKdjU6Ci0gQ2hhbmdlIHRoZSBuYW1lIG9mIHRoZSBjaGlwIHRvIExTN0Eu
Ci0gQ2hhbmdlIG1hZ2ljIHZhbHVlIGluIGNydGMgdG8gbWFjcm9zLgotIENvcnJlY3QgbWlzdGFr
ZXMgd29yZHMuCi0gQ2hhbmdlIHRoZSByZWdpc3RlciBvcGVyYXRpb24gZnVuY3Rpb24gcHJlZml4
IHRvIGxzN2EuCgp2NDoKLSBNb3ZlIHRoZSBtb2RlX3ZhbGlkIGZ1bmN0aW9uIHRvIHRoZSBjcnRj
LgoKdjM6Ci0gTW92ZSB0aGUgbW9kZV92YWxpZCBmdW5jdGlvbiB0byB0aGUgY29ubmVjdG9yIGFu
ZCBvcHRpbWl6ZSBpdC4KLSBGaXggbnVtX2NydGMgY2FsY3VsYXRpb24gbWV0aG9kLgoKdjI6Ci0g
Q29tcGxldGUgdGhlIGNhc2Ugb2YgMzItYml0IGNvbG9yIGluIENSVEMuCgpTaWduZWQtb2ZmLWJ5
OiBDaGVueWFuZyBMaSA8bGljaGVueWFuZ0Bsb29uZ3Nvbi5jbj4KLS0tCiBkcml2ZXJzL2dwdS9k
cm0vS2NvbmZpZyAgICAgICAgICAgICAgICAgICAgICAgfCAgIDIgKwogZHJpdmVycy9ncHUvZHJt
L01ha2VmaWxlICAgICAgICAgICAgICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9s
b29uZ3Nvbi9LY29uZmlnICAgICAgICAgICAgICB8ICAxNCArCiBkcml2ZXJzL2dwdS9kcm0vbG9v
bmdzb24vTWFrZWZpbGUgICAgICAgICAgICAgfCAgMTQgKwogZHJpdmVycy9ncHUvZHJtL2xvb25n
c29uL2xvb25nc29uX2Nvbm5lY3Rvci5jIHwgIDQ4ICsrKysKIGRyaXZlcnMvZ3B1L2RybS9sb29u
Z3Nvbi9sb29uZ3Nvbl9jcnRjLmMgICAgICB8IDI0MyArKysrKysrKysrKysrKysrCiBkcml2ZXJz
L2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZGV2aWNlLmMgICAgfCAgNDcgKysrCiBkcml2ZXJz
L2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2LmMgICAgICAgfCAyNzAgKysrKysrKysrKysr
KysrKysrCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2LmggICAgICAgfCAx
MzkgKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZW5jb2Rlci5j
ICAgfCAgMzcgKysrCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fcGxhbmUuYyAg
ICAgfCAxMDIgKysrKysrKwogMTEgZmlsZXMgY2hhbmdlZCwgOTE3IGluc2VydGlvbnMoKykKIGNy
ZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZwogY3JlYXRl
IG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9NYWtlZmlsZQogY3JlYXRlIG1v
ZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYwog
Y3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jcnRj
LmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25f
ZGV2aWNlLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9v
bmdzb25fZHJ2LmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24v
bG9vbmdzb25fZHJ2LmgKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdz
b24vbG9vbmdzb25fZW5jb2Rlci5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJt
L2xvb25nc29uL2xvb25nc29uX3BsYW5lLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
S2NvbmZpZyBiL2RyaXZlcnMvZ3B1L2RybS9LY29uZmlnCmluZGV4IDNjMTZiZDFhZmQ4Ny4uYzBj
MjgxNjM1Y2VlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vS2NvbmZpZworKysgYi9kcml2
ZXJzL2dwdS9kcm0vS2NvbmZpZwpAQCAtMzcyLDYgKzM3Miw4IEBAIHNvdXJjZSAiZHJpdmVycy9n
cHUvZHJtL3hlbi9LY29uZmlnIgogCiBzb3VyY2UgImRyaXZlcnMvZ3B1L2RybS92Ym94dmlkZW8v
S2NvbmZpZyIKIAorc291cmNlICJkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZyIKKwog
c291cmNlICJkcml2ZXJzL2dwdS9kcm0vbGltYS9LY29uZmlnIgogCiBzb3VyY2UgImRyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9LY29uZmlnIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL01h
a2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL01ha2VmaWxlCmluZGV4IDUyNzlkYjQzOTJkZi4uNzc5
NzVmZGI0ZDUxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKKysrIGIvZHJp
dmVycy9ncHUvZHJtL01ha2VmaWxlCkBAIC0xMTksNiArMTE5LDcgQEAgb2JqLSQoQ09ORklHX0RS
TV9QTDExMSkgKz0gcGwxMTEvCiBvYmotJChDT05GSUdfRFJNX1RWRTIwMCkgKz0gdHZlMjAwLwog
b2JqLSQoQ09ORklHX0RSTV9YRU4pICs9IHhlbi8KIG9iai0kKENPTkZJR19EUk1fVkJPWFZJREVP
KSArPSB2Ym94dmlkZW8vCitvYmotJChDT05GSUdfRFJNX0xPT05HU09OKSArPSBsb29uZ3Nvbi8K
IG9iai0kKENPTkZJR19EUk1fTElNQSkgICs9IGxpbWEvCiBvYmotJChDT05GSUdfRFJNX1BBTkZS
T1NUKSArPSBwYW5mcm9zdC8KIG9iai0kKENPTkZJR19EUk1fQVNQRUVEX0dGWCkgKz0gYXNwZWVk
LwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL0tjb25maWcgYi9kcml2ZXJz
L2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAw
MDAwMDAwMDAuLjNjZjQyYTRjY2EwOAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9sb29uZ3Nvbi9LY29uZmlnCkBAIC0wLDAgKzEsMTQgQEAKKyMgU1BEWC1MaWNlbnNlLUlkZW50
aWZpZXI6IEdQTC0yLjAtb25seQorCitjb25maWcgRFJNX0xPT05HU09OCisJdHJpc3RhdGUgIkRS
TSBzdXBwb3J0IGZvciBMUzdBIGJyaWRnZSBjaGlwc2V0IgorCWRlcGVuZHMgb24gRFJNICYmIFBD
SQorCWRlcGVuZHMgb24gQ1BVX0xPT05HU09ONjQKKwlzZWxlY3QgRFJNX0tNU19IRUxQRVIKKwlz
ZWxlY3QgRFJNX1ZSQU1fSEVMUEVSCisJc2VsZWN0IERSTV9UVE0KKwlzZWxlY3QgRFJNX1RUTV9I
RUxQRVIKKwlkZWZhdWx0IG4KKwloZWxwCisJICBTdXBwb3J0IHRoZSBkaXNwbGF5IGNvbnRyb2xs
ZXJzIGZvdW5kIG9uIHRoZSBMb29uZ3NvbiBMUzdBCisJICBicmlkZ2UuCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdz
b24vTWFrZWZpbGUKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi4yMmQw
NjM5NTNiNzgKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFr
ZWZpbGUKQEAgLTAsMCArMSwxNCBAQAorIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIu
MC1vbmx5CisjCisjIE1ha2VmaWxlIGZvciBsb29uZ3NvbiBkcm0gZHJpdmVycy4KKyMgVGhpcyBk
cml2ZXIgcHJvdmlkZXMgc3VwcG9ydCBmb3IgdGhlCisjIERpcmVjdCBSZW5kZXJpbmcgSW5mcmFz
dHJ1Y3R1cmUgKERSSSkKKworY2NmbGFncy15IDo9IC1JaW5jbHVkZS9kcm0KK2xvb25nc29uLXkg
Oj0gbG9vbmdzb25fZHJ2Lm8gXAorCWxvb25nc29uX2NydGMubyBcCisJbG9vbmdzb25fcGxhbmUu
byBcCisJbG9vbmdzb25fZGV2aWNlLm8gXAorCWxvb25nc29uX2Nvbm5lY3Rvci5vIFwKKwlsb29u
Z3Nvbl9lbmNvZGVyLm8KK29iai0kKENPTkZJR19EUk1fTE9PTkdTT04pICs9IGxvb25nc29uLm8K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3Iu
YyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYwpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjZiMWYwZmZhMzNiZAotLS0gL2Rldi9u
dWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYwpA
QCAtMCwwICsxLDQ4IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1s
YXRlcgorCisjaW5jbHVkZSAibG9vbmdzb25fZHJ2LmgiCisKK3N0YXRpYyBpbnQgbG9vbmdzb25f
Z2V0X21vZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCit7CisJaW50IGNvdW50
OworCisJY291bnQgPSBkcm1fYWRkX21vZGVzX25vZWRpZChjb25uZWN0b3IsIDE5MjAsIDEwODAp
OworCWRybV9zZXRfcHJlZmVycmVkX21vZGUoY29ubmVjdG9yLCAxMDI0LCA3NjgpOworCisJcmV0
dXJuIGNvdW50OworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfaGVscGVy
X2Z1bmNzIGxvb25nc29uX2Nvbm5lY3Rvcl9oZWxwZXIgPSB7CisJLmdldF9tb2RlcyA9IGxvb25n
c29uX2dldF9tb2RlcywKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9m
dW5jcyBsb29uZ3Nvbl9jb25uZWN0b3JfZnVuY3MgPSB7CisJLmZpbGxfbW9kZXMgPSBkcm1faGVs
cGVyX3Byb2JlX3NpbmdsZV9jb25uZWN0b3JfbW9kZXMsCisJLmRlc3Ryb3kgPSBkcm1fY29ubmVj
dG9yX2NsZWFudXAsCisJLnJlc2V0ID0gZHJtX2F0b21pY19oZWxwZXJfY29ubmVjdG9yX3Jlc2V0
LAorCS5hdG9taWNfZHVwbGljYXRlX3N0YXRlID0gZHJtX2F0b21pY19oZWxwZXJfY29ubmVjdG9y
X2R1cGxpY2F0ZV9zdGF0ZSwKKwkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hl
bHBlcl9jb25uZWN0b3JfZGVzdHJveV9zdGF0ZSwKK307CisKK2ludCBsb29uZ3Nvbl9jb25uZWN0
b3JfaW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpCit7CisJc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKKwlzdHJ1Y3QgbG9vbmdzb25fY29ubmVjdG9y
ICpsY29ubmVjdG9yOworCisJbGNvbm5lY3RvciA9IGt6YWxsb2Moc2l6ZW9mKHN0cnVjdCBsb29u
Z3Nvbl9jb25uZWN0b3IpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIWxjb25uZWN0b3IpIHsKKwkJRFJN
X0lORk8oImxvb25nc29uIGNvbm5lY3RvciBremFsbG9jIGZhaWxlZFxuIik7CisJCXJldHVybiAt
MTsKKwl9CisKKwlsY29ubmVjdG9yLT5sZGV2ID0gbGRldjsKKwlsY29ubmVjdG9yLT5pZCA9IGlu
ZGV4OworCisJbGRldi0+bW9kZV9pbmZvW2luZGV4XS5jb25uZWN0b3IgPSBsY29ubmVjdG9yOwor
CWNvbm5lY3RvciA9ICZsY29ubmVjdG9yLT5iYXNlOworCWRybV9jb25uZWN0b3JfaW5pdChsZGV2
LT5kZXYsIGNvbm5lY3RvciwgJmxvb25nc29uX2Nvbm5lY3Rvcl9mdW5jcywKKwkJCSAgIERSTV9N
T0RFX0NPTk5FQ1RPUl9Vbmtub3duKTsKKwlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoY29ubmVj
dG9yLCAmbG9vbmdzb25fY29ubmVjdG9yX2hlbHBlcik7CisKKwlyZXR1cm4gMDsKK30KZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jcnRjLmMgYi9kcml2ZXJz
L2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0Yy5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAwMDAwMC4uNGNiNjVmYTA4Nzc4Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2NydGMuYwpAQCAtMCwwICsxLDI0MyBAQAorLy8g
U1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKworI2luY2x1ZGUgImxv
b25nc29uX2Rydi5oIgorCitzdGF0aWMgdm9pZCB0cnlfZWFjaF9sb29wYyh1MzIgY2xrLCB1MzIg
cHN0ZGl2LCB1MzIgZnJlZmMsCisJCQkgICBzdHJ1Y3QgcGl4X3BsbCAqcGxsX2NvbmZpZykKK3sK
Kwl1MzIgbG9vcGM7CisJdTMyIGNsa19vdXQ7CisJdTMyIHByZWNpc2lvbjsKKwl1MzIgbWluID0g
MTAwMDsKKwl1MzIgYmFzZV9jbGsgPSAxMDAwMDBMOworCisJZm9yIChsb29wYyA9IExPT1BDX01J
TjsgbG9vcGMgPCBMT09QQ19NQVg7IGxvb3BjKyspIHsKKwkJaWYgKChsb29wYyA8IEZSRV9SRUZf
TUlOICogZnJlZmMpIHx8CisJCSAgICAobG9vcGMgPiBGUkVfUkVGX01BWCAqIGZyZWZjKSkKKwkJ
CWNvbnRpbnVlOworCisJCWNsa19vdXQgPSBiYXNlX2NsayAqIGxvb3BjIC8gZnJlZmM7CisJCXBy
ZWNpc2lvbiA9IChjbGsgPiBjbGtfb3V0KSA/IChjbGsgLSBjbGtfb3V0KSA6IChjbGtfb3V0IC0g
Y2xrKTsKKwkJaWYgKHByZWNpc2lvbiA8IG1pbikgeworCQkJcGxsX2NvbmZpZy0+bDJfZGl2ID0g
cHN0ZGl2OworCQkJcGxsX2NvbmZpZy0+bDFfbG9vcGMgPSBsb29wYzsKKwkJCXBsbF9jb25maWct
PmwxX2ZyZWZjID0gZnJlZmM7CisJCX0KKwl9Cit9CisKK3N0YXRpYyB2b2lkIGNhbF9mcmVxKHUz
MiBwaXhjbG9jaywgc3RydWN0IHBpeF9wbGwgKnBsbF9jb25maWcpCit7CisJdTMyIHBzdGRpdjsK
Kwl1MzIgZnJlZmM7CisJdTMyIGNsazsKKworCWZvciAocHN0ZGl2ID0gMTsgcHN0ZGl2IDwgUFNU
X0RJVl9NQVg7IHBzdGRpdisrKSB7CisJCWNsayA9IHBpeGNsb2NrICogcHN0ZGl2OworCQlmb3Ig
KGZyZWZjID0gRElWX1JFRl9NSU47IGZyZWZjIDw9IERJVl9SRUZfTUFYOyBmcmVmYysrKQorCQkJ
dHJ5X2VhY2hfbG9vcGMoY2xrLCBwc3RkaXYsIGZyZWZjLCBwbGxfY29uZmlnKTsKKwl9Cit9CisK
K3N0YXRpYyB2b2lkIGNvbmZpZ19wbGwoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdW5z
aWduZWQgbG9uZyBwbGxfYmFzZSwKKwkJICAgICAgIHN0cnVjdCBwaXhfcGxsICpwbGxfY2ZnKQor
eworCXUzMiB2YWw7CisJdTMyIGNvdW50ID0gMDsKKworCS8qIGNsZWFyIHNlbF9wbGxfb3V0MCAq
LworCXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCk7CisJdmFsICY9IH4o
MVVMIDw8IDgpOworCWxzN2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKwor
CS8qIHNldCBwbGxfcGQgKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAw
eDQpOworCXZhbCB8PSAoMVVMIDw8IDEzKTsKKwlsczdhX2lvX3dyZWcobGRldiwgcGxsX2Jhc2Ug
KyAweDQsIHZhbCk7CisKKwkvKiBjbGVhciBzZXRfcGxsX3BhcmFtICovCisJdmFsID0gbHM3YV9p
b19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KTsKKwl2YWwgJj0gfigxVUwgPDwgMTEpOworCWxz
N2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKworCS8qIGNsZWFyIG9sZCB2
YWx1ZSAmIGNvbmZpZyBuZXcgdmFsdWUgKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxs
X2Jhc2UgKyAweDQpOworCXZhbCAmPSB+KDB4N2ZVTCA8PCAwKTsKKwl2YWwgfD0gKHBsbF9jZmct
PmwxX2ZyZWZjIDw8IDApOyAvKiByZWZjICovCisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNl
ICsgMHg0LCB2YWwpOworCXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4MCk7
CisJdmFsICY9IH4oMHg3ZlVMIDw8IDApOworCXZhbCB8PSAocGxsX2NmZy0+bDJfZGl2IDw8IDAp
OyAvKiBkaXYgKi8KKwl2YWwgJj0gfigweDFmZlVMIDw8IDIxKTsKKwl2YWwgfD0gKHBsbF9jZmct
PmwxX2xvb3BjIDw8IDIxKTsgLyogbG9vcGMgKi8KKwlsczdhX2lvX3dyZWcobGRldiwgcGxsX2Jh
c2UgKyAweDAsIHZhbCk7CisKKwkvKiBzZXQgc2V0X3BsbF9wYXJhbSAqLworCXZhbCA9IGxzN2Ff
aW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCk7CisJdmFsIHw9ICgxVUwgPDwgMTEpOworCWxz
N2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFsKTsKKwkvKiBjbGVhciBwbGxfcGQg
Ki8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQpOworCXZhbCAmPSB+
KDFVTCA8PCAxMyk7CisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0LCB2YWwpOwor
CisJd2hpbGUgKCEobHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KSAmIDB4ODApKSB7
CisJCWNwdV9yZWxheCgpOworCQljb3VudCsrOworCQlpZiAoY291bnQgPj0gMTAwMCkgeworCQkJ
RFJNX0VSUk9SKCJsb29uZ3Nvbi03QSBQTEwgbG9jayBmYWlsZWRcbiIpOworCQkJYnJlYWs7CisJ
CX0KKwl9CisKKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQpOworCXZh
bCB8PSAoMVVMIDw8IDgpOworCWxzN2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwgdmFs
KTsKK30KKworc3RhdGljIHZvaWQgbG9vbmdzb25fY3J0Y19tb2RlX3NldF9ub2ZiKHN0cnVjdCBk
cm1fY3J0YyAqY3J0YykKK3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gY3J0Yy0+ZGV2Owor
CXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYgPSBkZXYtPmRldl9wcml2YXRlOworCXN0cnVj
dCBsb29uZ3Nvbl9jcnRjICpsY3J0YyA9IHRvX2xvb25nc29uX2NydGMoY3J0Yyk7CisJc3RydWN0
IGRybV9kaXNwbGF5X21vZGUgKm1vZGUgPSAmY3J0Yy0+c3RhdGUtPmFkanVzdGVkX21vZGU7CisJ
Y29uc3Qgc3RydWN0IGRybV9mb3JtYXRfaW5mbyAqZm9ybWF0OworCXN0cnVjdCBwaXhfcGxsIHBs
bF9jZmc7CisJdTMyIGhyLCBoc3MsIGhzZSwgaGZsOworCXUzMiB2ciwgdnNzLCB2c2UsIHZmbDsK
Kwl1MzIgcGl4X2ZyZXE7CisJdTMyIHJlZ19vZmZzZXQ7CisKKwlociA9IG1vZGUtPmhkaXNwbGF5
OworCWhzcyA9IG1vZGUtPmhzeW5jX3N0YXJ0OworCWhzZSA9IG1vZGUtPmhzeW5jX2VuZDsKKwlo
ZmwgPSBtb2RlLT5odG90YWw7CisKKwl2ciA9IG1vZGUtPnZkaXNwbGF5OworCXZzcyA9IG1vZGUt
PnZzeW5jX3N0YXJ0OworCXZzZSA9IG1vZGUtPnZzeW5jX2VuZDsKKwl2ZmwgPSBtb2RlLT52dG90
YWw7CisKKwlwaXhfZnJlcSA9IG1vZGUtPmNsb2NrOworCXJlZ19vZmZzZXQgPSBsY3J0Yy0+cmVn
X29mZnNldDsKKwlmb3JtYXQgPSBjcnRjLT5wcmltYXJ5LT5zdGF0ZS0+ZmItPmZvcm1hdDsKKwor
CWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9ESVRDRkdfUkVHICsgcmVnX29mZnNldCwgMCk7CisJbHM3
YV9tbV93cmVnKGxkZXYsIEZCX0RJVFRBQl9MT19SRUcgKyByZWdfb2Zmc2V0LCAwKTsKKwlsczdh
X21tX3dyZWcobGRldiwgRkJfRElUVEFCX0hJX1JFRyArIHJlZ19vZmZzZXQsIDApOworCWxzN2Ff
bW1fd3JlZyhsZGV2LCBGQl9QQU5DRkdfUkVHICsgcmVnX29mZnNldCwgRkJfUEFOQ0ZHX0RFRik7
CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX1BBTlRJTV9SRUcgKyByZWdfb2Zmc2V0LCAwKTsKKwor
CWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9IRElTUExBWV9SRUcgKyByZWdfb2Zmc2V0LCAoaGZsIDw8
IDE2KSB8IGhyKTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfSFNZTkNfUkVHICsgcmVnX29mZnNl
dCwKKwkJICAgICBGQl9IU1lOQ19QVUxTRSB8IChoc2UgPDwgMTYpIHwgaHNzKTsKKworCWxzN2Ff
bW1fd3JlZyhsZGV2LCBGQl9WRElTUExBWV9SRUcgKyByZWdfb2Zmc2V0LCAodmZsIDw8IDE2KSB8
IHZyKTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfVlNZTkNfUkVHICsgcmVnX29mZnNldCwKKwkJ
ICAgICBGQl9WU1lOQ19QVUxTRSB8ICh2c2UgPDwgMTYpIHwgdnNzKTsKKworCXN3aXRjaCAoZm9y
bWF0LT5mb3JtYXQpIHsKKwljYXNlIERSTV9GT1JNQVRfUkdCNTY1OgorCQlsY3J0Yy0+Y2ZnX3Jl
ZyB8PSAweDM7CisJCWJyZWFrOworCWNhc2UgRFJNX0ZPUk1BVF9SR0I4ODg6CisJY2FzZSBEUk1f
Rk9STUFUX1hSR0I4ODg4OgorCWNhc2UgRFJNX0ZPUk1BVF9BUkdCODg4ODoKKwlkZWZhdWx0Ogor
CQlsY3J0Yy0+Y2ZnX3JlZyB8PSAweDQ7CisJCWJyZWFrOworCX0KKwlsczdhX21tX3dyZWcobGRl
diwgRkJfQ0ZHX1JFRyArIHJlZ19vZmZzZXQsIGxjcnRjLT5jZmdfcmVnKTsKKworCWNhbF9mcmVx
KHBpeF9mcmVxLCAmcGxsX2NmZyk7CisJY29uZmlnX3BsbChsZGV2LCBMUzdBX1BJWF9QTEwgKyBy
ZWdfb2Zmc2V0LCAmcGxsX2NmZyk7Cit9CisKK3N0YXRpYyB2b2lkIGxvb25nc29uX2NydGNfYXRv
bWljX2VuYWJsZShzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCisJCQkJCXN0cnVjdCBkcm1fYXRvbWlj
X3N0YXRlICpvbGRfc3RhdGUpCit7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtPmRl
djsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwlz
dHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGMgPSB0b19sb29uZ3Nvbl9jcnRjKGNydGMpOworCXUz
MiByZWdfb2Zmc2V0ID0gbGNydGMtPnJlZ19vZmZzZXQ7CisKKwlsY3J0Yy0+Y2ZnX3JlZyB8PSBD
RkdfRU5BQkxFOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdfUkVHICsgcmVnX29mZnNldCwg
bGNydGMtPmNmZ19yZWcpOworfQorCitzdGF0aWMgdm9pZCBsb29uZ3Nvbl9jcnRjX2F0b21pY19k
aXNhYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKKwkJCQkJIHN0cnVjdCBkcm1fYXRvbWljX3N0
YXRlICpvbGRfc3RhdGUpCit7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtPmRldjsK
KwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwlzdHJ1
Y3QgbG9vbmdzb25fY3J0YyAqbGNydGMgPSB0b19sb29uZ3Nvbl9jcnRjKGNydGMpOworCXUzMiBy
ZWdfb2Zmc2V0ID0gbGNydGMtPnJlZ19vZmZzZXQ7CisKKwlsY3J0Yy0+Y2ZnX3JlZyAmPSB+Q0ZH
X0VOQUJMRTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfQ0ZHX1JFRyArIHJlZ19vZmZzZXQsIGxj
cnRjLT5jZmdfcmVnKTsKK30KKworc3RhdGljIGVudW0gZHJtX21vZGVfc3RhdHVzIGxvb25nc29u
X21vZGVfdmFsaWQoc3RydWN0IGRybV9jcnRjICpjcnRjLAorCQkJCQkJY29uc3Qgc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKm1vZGUpCit7CisJaWYgKG1vZGUtPmhkaXNwbGF5ID4gMTkyMCkKKwkJ
cmV0dXJuIE1PREVfQkFEOworCWlmIChtb2RlLT52ZGlzcGxheSA+IDEwODApCisJCXJldHVybiBN
T0RFX0JBRDsKKwlpZiAobW9kZS0+aGRpc3BsYXkgJSA2NCkKKwkJcmV0dXJuIE1PREVfQkFEOwor
CWlmIChtb2RlLT5jbG9jayA+PSAxNzMwMDApCisJCXJldHVybiBNT0RFX0NMT0NLX0hJR0g7CisK
KwlyZXR1cm4gTU9ERV9PSzsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY3J0Y19oZWxw
ZXJfZnVuY3MgbG9vbmdzb25fY3J0Y19oZWxwZXJfZnVuY3MgPSB7CisJLm1vZGVfdmFsaWQgPSBs
b29uZ3Nvbl9tb2RlX3ZhbGlkLAorCS5hdG9taWNfZW5hYmxlID0gbG9vbmdzb25fY3J0Y19hdG9t
aWNfZW5hYmxlLAorCS5hdG9taWNfZGlzYWJsZSA9IGxvb25nc29uX2NydGNfYXRvbWljX2Rpc2Fi
bGUsCisJLm1vZGVfc2V0X25vZmIgPSBsb29uZ3Nvbl9jcnRjX21vZGVfc2V0X25vZmIsCit9Owor
CitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jcnRjX2Z1bmNzIGxvb25nc29uX2NydGNfZnVuY3Mg
PSB7CisJLnNldF9jb25maWcgPSBkcm1fYXRvbWljX2hlbHBlcl9zZXRfY29uZmlnLAorCS5wYWdl
X2ZsaXAgPSBkcm1fYXRvbWljX2hlbHBlcl9wYWdlX2ZsaXAsCisJLnJlc2V0ID0gZHJtX2F0b21p
Y19oZWxwZXJfY3J0Y19yZXNldCwKKwkuZGVzdHJveSA9IGRybV9jcnRjX2NsZWFudXAsCisJLmF0
b21pY19kdXBsaWNhdGVfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jcnRjX2R1cGxpY2F0ZV9z
dGF0ZSwKKwkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jcnRjX2Rl
c3Ryb3lfc3RhdGUsCit9OworCitpbnQgbG9vbmdzb25fY3J0Y19pbml0KHN0cnVjdCBsb29uZ3Nv
bl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCkKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNy
dGM7CisJdTMyIHJldDsKKworCWxjcnRjID0ga3phbGxvYyhzaXplb2Yoc3RydWN0IGxvb25nc29u
X2NydGMpLCBHRlBfS0VSTkVMKTsKKwlpZiAobGNydGMgPT0gTlVMTCkKKwkJcmV0dXJuIC0xOwor
CisJbGNydGMtPmxkZXYgPSBsZGV2OworCWxjcnRjLT5yZWdfb2Zmc2V0ID0gaW5kZXggKiBSRUdf
T0ZGU0VUOworCWxjcnRjLT5jZmdfcmVnID0gQ0ZHX1JFU0VUOworCWxjcnRjLT5jcnRjX2lkID0g
aW5kZXg7CisKKwlyZXQgPSBsb29uZ3Nvbl9wbGFuZV9pbml0KGxjcnRjKTsKKwlpZiAocmV0KQor
CQlyZXR1cm4gcmV0OworCisJcmV0ID0gZHJtX2NydGNfaW5pdF93aXRoX3BsYW5lcyhsZGV2LT5k
ZXYsICZsY3J0Yy0+YmFzZSwgbGNydGMtPnBsYW5lLAorCQkJCQlOVUxMLCAmbG9vbmdzb25fY3J0
Y19mdW5jcywgTlVMTCk7CisJaWYgKHJldCkgeworCQlEUk1fRVJST1IoImZhaWxlZCB0byBpbml0
IGNydGMgJWRcbiIsIGluZGV4KTsKKwkJZHJtX3BsYW5lX2NsZWFudXAobGNydGMtPnBsYW5lKTsK
KwkJcmV0dXJuIHJldDsKKwl9CisKKwlkcm1fY3J0Y19oZWxwZXJfYWRkKCZsY3J0Yy0+YmFzZSwg
Jmxvb25nc29uX2NydGNfaGVscGVyX2Z1bmNzKTsKKworCWxkZXYtPm1vZGVfaW5mb1tpbmRleF0u
Y3J0YyA9IGxjcnRjOworCisJcmV0dXJuIDA7Cit9CisKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nv
bi9sb29uZ3Nvbl9kZXZpY2UuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAw
MDAuLmU1M2JkOGRlZDg5YgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29u
Z3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYwpAQCAtMCwwICsxLDQ3IEBACisvLyBTUERYLUxpY2Vuc2Ut
SWRlbnRpZmllcjogR1BMLTIuMC1vci1sYXRlcgorCisjaW5jbHVkZSAibG9vbmdzb25fZHJ2Lmgi
CisKK3UzMiBsb29uZ3Nvbl9ncHVfb2Zmc2V0KHN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKnN0YXRl
KQoreworCXN0cnVjdCBkcm1fZ2VtX3ZyYW1fb2JqZWN0ICpnYm87CisJc3RydWN0IGxvb25nc29u
X2NydGMgKmxjcnRjOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJdTMyIGdwdV9h
ZGRyOworCisJbGNydGMgPSB0b19sb29uZ3Nvbl9jcnRjKHN0YXRlLT5jcnRjKTsKKwlsZGV2ID0g
bGNydGMtPmxkZXY7CisKKwlnYm8gPSBkcm1fZ2VtX3ZyYW1fb2ZfZ2VtKHN0YXRlLT5mYi0+b2Jq
WzBdKTsKKwlncHVfYWRkciA9IGxkZXYtPnZyYW1fc3RhcnQgKyBkcm1fZ2VtX3ZyYW1fb2Zmc2V0
KGdibyk7CisKKwlyZXR1cm4gZ3B1X2FkZHI7Cit9CisKK3UzMiBsczdhX2lvX3JyZWcoc3RydWN0
IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCkKK3sKKwl1MzIgdmFsOworCisJdmFs
ID0gcmVhZGwobGRldi0+aW8gKyBvZmZzZXQpOworCisJcmV0dXJuIHZhbDsKK30KKwordm9pZCBs
czdhX2lvX3dyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCwgdTMy
IHZhbCkKK3sKKwl3cml0ZWwodmFsLCBsZGV2LT5pbyArIG9mZnNldCk7Cit9CisKK3UzMiBsczdh
X21tX3JyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCkKK3sKKwl1
MzIgdmFsOworCisJdmFsID0gcmVhZGwobGRldi0+bW1pbyArIG9mZnNldCk7CisKKwlyZXR1cm4g
dmFsOworfQorCit2b2lkIGxzN2FfbW1fd3JlZyhzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2
LCB1MzIgb2Zmc2V0LCB1MzIgdmFsKQoreworCXdyaXRlbCh2YWwsIGxkZXYtPm1taW8gKyBvZmZz
ZXQpOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Ry
di5jIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5jCm5ldyBmaWxlIG1v
ZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uZTQwNTE5OWEzZGY2Ci0tLSAvZGV2L251bGwK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5jCkBAIC0wLDAgKzEs
MjcwIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1sYXRlcgorLyoK
KyAqIExvb25nc29uIExTN0ExMDAwIGJyaWRnZSBjaGlwc2V0IGRybSBkcml2ZXIKKyAqLworCisj
aW5jbHVkZSA8bGludXgvY29uc29sZS5oPgorI2luY2x1ZGUgPGxpbnV4L3BjaS5oPgorI2luY2x1
ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5oPgorI2luY2x1ZGUg
Imxvb25nc29uX2Rydi5oIgorCisvKiBJbnRlcmZhY2UgaGlzdG9yeToKKyAqIDAuMSAtIG9yaWdp
bmFsLgorICovCisjZGVmaW5lIERSSVZFUl9NQUpPUiAwCisjZGVmaW5lIERSSVZFUl9NSU5PUiAx
CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX21vZGVfY29uZmlnX2Z1bmNzIGxvb25nc29uX21v
ZGVfZnVuY3MgPSB7CisJLmZiX2NyZWF0ZSA9IGRybV9nZW1fZmJfY3JlYXRlLAorCS5hdG9taWNf
Y2hlY2sgPSBkcm1fYXRvbWljX2hlbHBlcl9jaGVjaywKKwkuYXRvbWljX2NvbW1pdCA9IGRybV9h
dG9taWNfaGVscGVyX2NvbW1pdCwKKwkub3V0cHV0X3BvbGxfY2hhbmdlZCA9IGRybV9mYl9oZWxw
ZXJfb3V0cHV0X3BvbGxfY2hhbmdlZCwKKwkubW9kZV92YWxpZCA9IGRybV92cmFtX2hlbHBlcl9t
b2RlX3ZhbGlkCit9OworCitzdGF0aWMgaW50IGxvb25nc29uX2RldmljZV9pbml0KHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsIHVpbnQzMl90IGZsYWdzKQoreworCXN0cnVjdCBsb29uZ3Nvbl9kZXZp
Y2UgKmxkZXYgPSBkZXYtPmRldl9wcml2YXRlOworCXN0cnVjdCBwY2lfZGV2ICpncHVfcGRldjsK
KwlyZXNvdXJjZV9zaXplX3QgYXBlcl9iYXNlOworCXJlc291cmNlX3NpemVfdCBhcGVyX3NpemU7
CisJcmVzb3VyY2Vfc2l6ZV90IG1taW9fYmFzZTsKKwlyZXNvdXJjZV9zaXplX3QgbW1pb19zaXpl
OworCisJLyogR1BVIE1FTSAqLworCS8qIFdlIG5lZWQgZ2V0IDdBLWdwdSBwY2kgZGV2aWNlIGlu
Zm9ybWF0aW9uIGZvciBsZGV2LT5ncHVfcGRldiAqLworCS8qIGRldi0+cGRldiBzYXZlIDdBLWRj
IHBjaSBkZXZpY2UgaW5mb3JtYXRpb24gKi8KKwlncHVfcGRldiA9IHBjaV9nZXRfZGV2aWNlKFBD
SV9WRU5ET1JfSURfTE9PTkdTT04sCisJCQkJICBQQ0lfREVWSUNFX0lEX0xPT05HU09OX0dQVSwg
TlVMTCk7CisJaWYgKElTX0VSUihncHVfcGRldikpCisJCXJldHVybiBQVFJfRVJSKGdwdV9wZGV2
KTsKKworCWxkZXYtPmdwdV9wZGV2ID0gZ3B1X3BkZXY7CisJYXBlcl9iYXNlID0gcGNpX3Jlc291
cmNlX3N0YXJ0KGdwdV9wZGV2LCAyKTsKKwlhcGVyX3NpemUgPSBwY2lfcmVzb3VyY2VfbGVuKGdw
dV9wZGV2LCAyKTsKKwlsZGV2LT52cmFtX3N0YXJ0ID0gKHUzMilhcGVyX2Jhc2U7CisJbGRldi0+
dnJhbV9zaXplID0gKHUzMilhcGVyX3NpemU7CisKKwlpZiAoIWRldm1fcmVxdWVzdF9tZW1fcmVn
aW9uKGxkZXYtPmRldi0+ZGV2LCBsZGV2LT52cmFtX3N0YXJ0LAorCQkJCSAgICAgbGRldi0+dnJh
bV9zaXplLCAibG9vbmdzb25fdnJhbSIpKSB7CisJCURSTV9FUlJPUigiQ2FuJ3QgcmVzZXJ2ZSBW
UkFNXG4iKTsKKwkJcmV0dXJuIC1FTlhJTzsKKwl9CisKKwkvKiBEQyBNRU0gKi8KKwltbWlvX2Jh
c2UgPSBwY2lfcmVzb3VyY2Vfc3RhcnQobGRldi0+ZGV2LT5wZGV2LCAwKTsKKwltbWlvX3NpemUg
PSBwY2lfcmVzb3VyY2VfbGVuKGxkZXYtPmRldi0+cGRldiwgMCk7CisJbGRldi0+bW1pbyA9IGRl
dm1faW9yZW1hcChkZXYtPmRldiwgbW1pb19iYXNlLCBtbWlvX3NpemUpOworCWlmICghbGRldi0+
bW1pbykgeworCQlkcm1fZXJyKGRldiwgIkNhbm5vdCBtYXAgbW1pbyByZWdpb25cbiIpOworCQly
ZXR1cm4gLUVOT01FTTsKKwl9CisKKwlpZiAoIWRldm1fcmVxdWVzdF9tZW1fcmVnaW9uKGxkZXYt
PmRldi0+ZGV2LCBtbWlvX2Jhc2UsCisJCQkJICAgICBtbWlvX3NpemUsICJsb29uZ3Nvbl9tbWlv
IikpIHsKKwkJRFJNX0VSUk9SKCJDYW4ndCByZXNlcnZlIG1taW8gcmVnaXN0ZXJzXG4iKTsKKwkJ
cmV0dXJuIC1FTk9NRU07CisJfQorCisJLyogREMgSU8gKi8KKwlsZGV2LT5pbyA9IGlvcmVtYXAo
TFM3QV9DSElQQ0ZHX1JFR19CQVNFLCAweGYpOworCWlmIChsZGV2LT5pbyA9PSBOVUxMKQorCQly
ZXR1cm4gLUVOT01FTTsKKworCURSTV9JTkZPKCJEQyBtbWlvIGJhc2UgMHglbGx4IHNpemUgMHgl
bGx4IGlvIDB4JWxseFxuIiwKKwkJIG1taW9fYmFzZSwgbW1pb19zaXplLCAqKHU2NCAqKWxkZXYt
PmlvKTsKKwlEUk1fSU5GTygiR1BVIHZyYW0gc3RhcnQgPSAweCV4IHNpemUgPSAweCV4XG4iLAor
CQkgbGRldi0+dnJhbV9zdGFydCwgbGRldi0+dnJhbV9zaXplKTsKKworCXJldHVybiAwOworfQor
CitpbnQgbG9vbmdzb25fbW9kZXNldF9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYp
Cit7CisJc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyOworCXN0cnVjdCBkcm1fY29ubmVjdG9y
ICpjb25uZWN0b3I7CisJaW50IGk7CisJdTMyIHJldDsKKworCWxkZXYtPmRldi0+bW9kZV9jb25m
aWcuYWxsb3dfZmJfbW9kaWZpZXJzID0gdHJ1ZTsKKworCWZvciAoaSA9IDA7IGkgPCAyOyBpKysp
IHsKKwkJcmV0ID0gbG9vbmdzb25fY3J0Y19pbml0KGxkZXYsIGkpOworCQlpZiAocmV0KSB7CisJ
CQlEUk1fV0FSTigibG9vbmdzb24gY3J0YyVkIGluaXQgZmFpbGVkXG4iLCBpKTsKKwkJCWNvbnRp
bnVlOworCQl9CisKKwkJcmV0ID0gbG9vbmdzb25fZW5jb2Rlcl9pbml0KGxkZXYsIGkpOworCQlp
ZiAocmV0KSB7CisJCQlEUk1fRVJST1IoImxvb25nc29uX2VuY29kZXJfaW5pdCBmYWlsZWRcbiIp
OworCQkJcmV0dXJuIC0xOworCQl9CisKKwkJcmV0ID0gbG9vbmdzb25fY29ubmVjdG9yX2luaXQo
bGRldiwgaSk7CisJCWlmIChyZXQpIHsKKwkJCURSTV9FUlJPUigibG9vbmdzb25fY29ubmVjdG9y
X2luaXQgZmFpbGVkXG4iKTsKKwkJCXJldHVybiAtMTsKKwkJfQorCisJCWVuY29kZXIgPSAmbGRl
di0+bW9kZV9pbmZvW2ldLmVuY29kZXItPmJhc2U7CisJCWNvbm5lY3RvciA9ICZsZGV2LT5tb2Rl
X2luZm9baV0uY29ubmVjdG9yLT5iYXNlOworCQlkcm1fY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVy
KGNvbm5lY3RvciwgZW5jb2Rlcik7CisJCWxkZXYtPm51bV9jcnRjKys7CisJfQorCisJcmV0dXJu
IDA7Cit9CisKK3N0YXRpYyBpbnQgbG9vbmdzb25fZHJtX2xvYWQoc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwgdW5zaWduZWQgbG9uZyBmbGFncykKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICps
ZGV2OworCWludCByZXQ7CisKKwlsZGV2ID0gZGV2bV9remFsbG9jKGRldi0+ZGV2LCBzaXplb2Yo
KmxkZXYpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIWxkZXYpCisJCXJldHVybiAtRU5PTUVNOworCisJ
ZGV2LT5kZXZfcHJpdmF0ZSA9IGxkZXY7CisJbGRldi0+ZGV2ID0gZGV2OworCisJcmV0ID0gbG9v
bmdzb25fZGV2aWNlX2luaXQoZGV2LCBmbGFncyk7CisJaWYgKHJldCkKKwkJZ290byBlcnI7CisK
KwlyZXQgPSBkcm1tX3ZyYW1faGVscGVyX2luaXQoZGV2LCBsZGV2LT52cmFtX3N0YXJ0LCBsZGV2
LT52cmFtX3NpemUpOworCWlmIChyZXQpCisJCWdvdG8gZXJyOworCisJZHJtX21vZGVfY29uZmln
X2luaXQoZGV2KTsKKwlkZXYtPm1vZGVfY29uZmlnLmZ1bmNzID0gKHZvaWQgKikmbG9vbmdzb25f
bW9kZV9mdW5jczsKKwlkZXYtPm1vZGVfY29uZmlnLm1pbl93aWR0aCA9IDE7CisJZGV2LT5tb2Rl
X2NvbmZpZy5taW5faGVpZ2h0ID0gMTsKKwlkZXYtPm1vZGVfY29uZmlnLm1heF93aWR0aCA9IDQw
OTY7CisJZGV2LT5tb2RlX2NvbmZpZy5tYXhfaGVpZ2h0ID0gNDA5NjsKKwlkZXYtPm1vZGVfY29u
ZmlnLnByZWZlcnJlZF9kZXB0aCA9IDMyOworCWRldi0+bW9kZV9jb25maWcucHJlZmVyX3NoYWRv
dyA9IDE7CisJZGV2LT5tb2RlX2NvbmZpZy5mYl9iYXNlID0gbGRldi0+dnJhbV9zdGFydDsKKwor
CXBjaV9zZXRfZHJ2ZGF0YShkZXYtPnBkZXYsIGRldik7CisKKwlyZXQgPSBsb29uZ3Nvbl9tb2Rl
c2V0X2luaXQobGRldik7CisJaWYgKHJldCkKKwkJZGV2X2VycihkZXYtPmRldiwgIkZhdGFsIGVy
cm9yIGR1cmluZyBtb2Rlc2V0IGluaXQ6ICVkXG4iLCByZXQpOworCisJZHJtX2ttc19oZWxwZXJf
cG9sbF9pbml0KGRldik7CisJZHJtX21vZGVfY29uZmlnX3Jlc2V0KGRldik7CisKKwlyZXR1cm4g
MDsKKworZXJyOgorCWRybV9lcnIoZGV2LCAiZmFpbGVkIHRvIGluaXRpYWxpemUgZHJtIGRyaXZl
cjogJWRcbiIsIHJldCk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZvaWQgbG9vbmdzb25f
ZHJtX3VubG9hZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQoreworCWRybV92cmFtX2hlbHBlcl9y
ZWxlYXNlX21tKGRldik7CisJZHJtX21vZGVfY29uZmlnX2NsZWFudXAoZGV2KTsKKwlkZXYtPmRl
dl9wcml2YXRlID0gTlVMTDsKKwlkZXZfc2V0X2RydmRhdGEoZGV2LT5kZXYsIE5VTEwpOworfQor
CitERUZJTkVfRFJNX0dFTV9GT1BTKGZvcHMpOworCitzdGF0aWMgc3RydWN0IGRybV9kcml2ZXIg
bG9vbmdzb25fZHJtX2RyaXZlciA9IHsKKwkuZHJpdmVyX2ZlYXR1cmVzID0gRFJJVkVSX01PREVT
RVQgfCBEUklWRVJfR0VNIHwgRFJJVkVSX0FUT01JQywKKwkuZm9wcyA9ICZmb3BzLAorCURSTV9H
RU1fVlJBTV9EUklWRVIsCisKKwkubmFtZSA9IERSSVZFUl9OQU1FLAorCS5kZXNjID0gRFJJVkVS
X0RFU0MsCisJLmRhdGUgPSBEUklWRVJfREFURSwKKwkubWFqb3IgPSBEUklWRVJfTUFKT1IsCisJ
Lm1pbm9yID0gRFJJVkVSX01JTk9SLAorfTsKKworc3RhdGljIGludCBsb29uZ3Nvbl9wY2lfcHJv
YmUoc3RydWN0IHBjaV9kZXYgKnBkZXYsCisJCQkgICAgICBjb25zdCBzdHJ1Y3QgcGNpX2Rldmlj
ZV9pZCAqZW50KQoreworCWludCByZXQ7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldjsKKworCURS
TV9JTkZPKCJTdGFydCBsb29uZ3NvbiBkcm0gcHJvYmVcbiIpOworCWRldiA9IGRybV9kZXZfYWxs
b2MoJmxvb25nc29uX2RybV9kcml2ZXIsICZwZGV2LT5kZXYpOworCWlmIChJU19FUlIoZGV2KSkg
eworCQlEUk1fRVJST1IoImZhaWxlZCB0byBhbGxvY2F0ZSBkcm1fZGV2aWNlXG4iKTsKKwkJcmV0
dXJuIFBUUl9FUlIoZGV2KTsKKwl9CisKKwlkZXYtPnBkZXYgPSBwZGV2OworCXBjaV9zZXRfZHJ2
ZGF0YShwZGV2LCBkZXYpOworCisJcmV0ID0gcGNpX2VuYWJsZV9kZXZpY2UocGRldik7CisJaWYg
KHJldCkgeworCQlkcm1fZXJyKGRldiwgImZhaWxlZCB0byBlbmFibGUgcGNpIGRldmljZTogJWRc
biIsIHJldCk7CisJCWdvdG8gZXJyX2ZyZWU7CisJfQorCisJcmV0ID0gbG9vbmdzb25fZHJtX2xv
YWQoZGV2LCAweDApOworCWlmIChyZXQpIHsKKwkJZHJtX2VycihkZXYsICJmYWlsZWQgdG8gbG9h
ZCBsb29uZ3NvbjogJWRcbiIsIHJldCk7CisJCWdvdG8gZXJyX3BkZXY7CisJfQorCisJcmV0ID0g
ZHJtX2Rldl9yZWdpc3RlcihkZXYsIDApOworCWlmIChyZXQpIHsKKwkJZHJtX2VycihkZXYsICJm
YWlsZWQgdG8gcmVnaXN0ZXIgZHJ2IGZvciB1c2Vyc3BhY2UgYWNjZXNzOiAlZFxuIiwKKwkJCXJl
dCk7CisJCWdvdG8gZXJyX3BkZXY7CisJfQorCisJZHJtX2ZiZGV2X2dlbmVyaWNfc2V0dXAoZGV2
LCBkZXYtPm1vZGVfY29uZmlnLnByZWZlcnJlZF9kZXB0aCk7CisKKwlyZXR1cm4gMDsKKworZXJy
X3BkZXY6CisJcGNpX2Rpc2FibGVfZGV2aWNlKHBkZXYpOworZXJyX2ZyZWU6CisJZHJtX2Rldl9w
dXQoZGV2KTsKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgdm9pZCBsb29uZ3Nvbl9wY2lfcmVt
b3ZlKHN0cnVjdCBwY2lfZGV2ICpwZGV2KQoreworCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBw
Y2lfZ2V0X2RydmRhdGEocGRldik7CisKKwlkcm1fZGV2X3VucmVnaXN0ZXIoZGV2KTsKKwlsb29u
Z3Nvbl9kcm1fdW5sb2FkKGRldik7CisJZHJtX2Rldl9wdXQoZGV2KTsKK30KKworc3RhdGljIHN0
cnVjdCBwY2lfZGV2aWNlX2lkIGxvb25nc29uX3BjaV9kZXZpY2VzW10gPSB7CisJeyBQQ0lfREVW
SUNFKFBDSV9WRU5ET1JfSURfTE9PTkdTT04sIFBDSV9ERVZJQ0VfSURfTE9PTkdTT05fREMpIH0s
CisJezAsfQorfTsKKworc3RhdGljIHN0cnVjdCBwY2lfZHJpdmVyIGxvb25nc29uX2RybV9wY2lf
ZHJpdmVyID0geworCS5uYW1lID0gRFJJVkVSX05BTUUsCisJLmlkX3RhYmxlID0gbG9vbmdzb25f
cGNpX2RldmljZXMsCisJLnByb2JlID0gbG9vbmdzb25fcGNpX3Byb2JlLAorCS5yZW1vdmUgPSBs
b29uZ3Nvbl9wY2lfcmVtb3ZlLAorfTsKKworc3RhdGljIGludCBfX2luaXQgbG9vbmdzb25fZHJt
X2luaXQodm9pZCkKK3sKKwlyZXR1cm4gcGNpX3JlZ2lzdGVyX2RyaXZlcigmbG9vbmdzb25fZHJt
X3BjaV9kcml2ZXIpOworfQorCitzdGF0aWMgdm9pZCBfX2V4aXQgbG9vbmdzb25fZHJtX2V4aXQo
dm9pZCkKK3sKKwlwY2lfdW5yZWdpc3Rlcl9kcml2ZXIoJmxvb25nc29uX2RybV9wY2lfZHJpdmVy
KTsKK30KKworbW9kdWxlX2luaXQobG9vbmdzb25fZHJtX2luaXQpOworbW9kdWxlX2V4aXQobG9v
bmdzb25fZHJtX2V4aXQpOworCitNT0RVTEVfQVVUSE9SKERSSVZFUl9BVVRIT1IpOworTU9EVUxF
X0RFU0NSSVBUSU9OKERSSVZFUl9ERVNDKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaCBiL2RyaXZl
cnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaApuZXcgZmlsZSBtb2RlIDEwMDY0NApp
bmRleCAwMDAwMDAwMDAwMDAuLjQ5OGQxYjA4MmExOQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kcnYuaApAQCAtMCwwICsxLDEzOSBAQAorLyog
U1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb25seSAqLworCisjaWZuZGVmIF9fTE9P
TkdTT05fRFJWX0hfXworI2RlZmluZSBfX0xPT05HU09OX0RSVl9IX18KKworI2luY2x1ZGUgPGRy
bS9kcm1fZHJ2Lmg+CisjaW5jbHVkZSA8ZHJtL2RybV9nZW0uaD4KKyNpbmNsdWRlIDxkcm0vZHJt
X2ZiX2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fZm91cmNjLmg+CisjaW5jbHVkZSA8ZHJt
L2RybV9wcm9iZV9oZWxwZXIuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2F0b21pYy5oPgorI2luY2x1
ZGUgPGRybS9kcm1fYXRvbWljX2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fZ2VtX2ZyYW1l
YnVmZmVyX2hlbHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmg+Cisj
aW5jbHVkZSA8ZHJtL2RybV9wbGFuZS5oPgorI2luY2x1ZGUgPGRybS9kcm1fcGxhbmVfaGVscGVy
Lmg+CisjaW5jbHVkZSA8ZHJtL2RybV9jcnRjLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9jcnRjX2hl
bHBlci5oPgorI2luY2x1ZGUgPGRybS9kcm1fY29ubmVjdG9yLmg+CisjaW5jbHVkZSA8ZHJtL2Ry
bV9lbmNvZGVyLmg+CisKKy8qIEdlbmVyYWwgY3VzdG9taXphdGlvbjoKKyAqLworI2RlZmluZSBE
UklWRVJfQVVUSE9SICJMb29uZ3NvbiBncmFwaGljcyBkcml2ZXIgdGVhbSIKKyNkZWZpbmUgRFJJ
VkVSX05BTUUgImxvb25nc29uLWRybSIKKyNkZWZpbmUgRFJJVkVSX0RFU0MgIkxvb25nc29uIExT
N0EgRFJNIGRyaXZlciIKKyNkZWZpbmUgRFJJVkVSX0RBVEUgIjIwMjAwOTE1IgorCisjZGVmaW5l
IHRvX2xvb25nc29uX2NydGMoeCkgY29udGFpbmVyX29mKHgsIHN0cnVjdCBsb29uZ3Nvbl9jcnRj
LCBiYXNlKQorI2RlZmluZSB0b19sb29uZ3Nvbl9lbmNvZGVyKHgpIGNvbnRhaW5lcl9vZih4LCBz
dHJ1Y3QgbG9vbmdzb25fZW5jb2RlciwgYmFzZSkKKworI2RlZmluZSBMUzdBX0NISVBDRkdfUkVH
X0JBU0UgKDB4MTAwMTAwMDApCisjZGVmaW5lIFBDSV9ERVZJQ0VfSURfTE9PTkdTT05fREMgMHg3
YTA2CisjZGVmaW5lIFBDSV9ERVZJQ0VfSURfTE9PTkdTT05fR1BVIDB4N2ExNQorI2RlZmluZSBM
UzdBX1BJWF9QTEwgKDB4MDRiMCkKKyNkZWZpbmUgUkVHX09GRlNFVCAoMHgxMCkKKyNkZWZpbmUg
RkJfQ0ZHX1JFRyAoMHgxMjQwKQorI2RlZmluZSBGQl9BRERSMF9SRUcgKDB4MTI2MCkKKyNkZWZp
bmUgRkJfQUREUjFfUkVHICgweDE1ODApCisjZGVmaW5lIEZCX1NUUklfUkVHICgweDEyODApCisj
ZGVmaW5lIEZCX0RJVENGR19SRUcgKDB4MTM2MCkKKyNkZWZpbmUgRkJfRElUVEFCX0xPX1JFRyAo
MHgxMzgwKQorI2RlZmluZSBGQl9ESVRUQUJfSElfUkVHICgweDEzYTApCisjZGVmaW5lIEZCX1BB
TkNGR19SRUcgKDB4MTNjMCkKKyNkZWZpbmUgRkJfUEFOVElNX1JFRyAoMHgxM2UwKQorI2RlZmlu
ZSBGQl9IRElTUExBWV9SRUcgKDB4MTQwMCkKKyNkZWZpbmUgRkJfSFNZTkNfUkVHICgweDE0MjAp
CisjZGVmaW5lIEZCX1ZESVNQTEFZX1JFRyAoMHgxNDgwKQorI2RlZmluZSBGQl9WU1lOQ19SRUcg
KDB4MTRhMCkKKworI2RlZmluZSBDRkdfRk1UIEdFTk1BU0soMiwgMCkKKyNkZWZpbmUgQ0ZHX0ZC
U1dJVENIIEJJVCg3KQorI2RlZmluZSBDRkdfRU5BQkxFIEJJVCg4KQorI2RlZmluZSBDRkdfRkJO
VU0gQklUKDExKQorI2RlZmluZSBDRkdfR0FNTUFSIEJJVCgxMikKKyNkZWZpbmUgQ0ZHX1JFU0VU
IEJJVCgyMCkKKworI2RlZmluZSBGQl9QQU5DRkdfREVGIDB4ODAwMDEzMTEKKyNkZWZpbmUgRkJf
SFNZTkNfUFVMU0UgKDEgPDwgMzApCisjZGVmaW5lIEZCX1ZTWU5DX1BVTFNFICgxIDw8IDMwKQor
CisvKiBQSVggUExMICovCisjZGVmaW5lIExPT1BDX01JTiAyNAorI2RlZmluZSBMT09QQ19NQVgg
MTYxCisjZGVmaW5lIEZSRV9SRUZfTUlOIDEyCisjZGVmaW5lIEZSRV9SRUZfTUFYIDMyCisjZGVm
aW5lIERJVl9SRUZfTUlOIDMKKyNkZWZpbmUgRElWX1JFRl9NQVggNQorI2RlZmluZSBQU1RfRElW
X01BWCA2NAorCitzdHJ1Y3QgcGl4X3BsbCB7CisJdTMyIGwyX2RpdjsKKwl1MzIgbDFfbG9vcGM7
CisJdTMyIGwxX2ZyZWZjOworfTsKKworc3RydWN0IGxvb25nc29uX2NydGMgeworCXN0cnVjdCBk
cm1fY3J0YyBiYXNlOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJdTMyIGNydGNf
aWQ7CisJdTMyIHJlZ19vZmZzZXQ7CisJdTMyIGNmZ19yZWc7CisJc3RydWN0IGRybV9wbGFuZSAq
cGxhbmU7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciB7CisJc3RydWN0IGRybV9lbmNv
ZGVyIGJhc2U7CisJc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldjsKKwlzdHJ1Y3QgbG9vbmdz
b25fY3J0YyAqbGNydGM7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fY29ubmVjdG9yIHsKKwlzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciBiYXNlOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJ
dTE2IGlkOworCXUzMiB0eXBlOworfTsKKworc3RydWN0IGxvb25nc29uX21vZGVfaW5mbyB7CisJ
c3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldjsKKwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqY3J0
YzsKKwlzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciAqZW5jb2RlcjsKKwlzdHJ1Y3QgbG9vbmdzb25f
Y29ubmVjdG9yICpjb25uZWN0b3I7Cit9OworCitzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlIHsKKwlz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2OworCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZTsK
KworCXZvaWQgX19pb21lbSAqbW1pbzsKKwl2b2lkIF9faW9tZW0gKmlvOworCXUzMiB2cmFtX3N0
YXJ0OworCXUzMiB2cmFtX3NpemU7CisKKwl1MzIgbnVtX2NydGM7CisJc3RydWN0IGxvb25nc29u
X21vZGVfaW5mbyBtb2RlX2luZm9bMl07CisJc3RydWN0IHBjaV9kZXYgKmdwdV9wZGV2OyAvKiBM
UzdBIGdwdSBkZXZpY2UgaW5mbyAqLworfTsKKworLyogY3J0YyAqLworaW50IGxvb25nc29uX2Ny
dGNfaW5pdChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpOworCisvKiBj
b25uZWN0b3IgKi8KK2ludCBsb29uZ3Nvbl9jb25uZWN0b3JfaW5pdChzdHJ1Y3QgbG9vbmdzb25f
ZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpOworCisvKiBlbmNvZGVyICovCitpbnQgbG9vbmdzb25f
ZW5jb2Rlcl9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCk7CisK
Ky8qIHBsYW5lICovCitpbnQgbG9vbmdzb25fcGxhbmVfaW5pdChzdHJ1Y3QgbG9vbmdzb25fY3J0
YyAqbGNydGMpOworCisvKiBkZXZpY2UgKi8KK3UzMiBsb29uZ3Nvbl9ncHVfb2Zmc2V0KHN0cnVj
dCBkcm1fcGxhbmVfc3RhdGUgKnN0YXRlKTsKK3UzMiBsczdhX21tX3JyZWcoc3RydWN0IGxvb25n
c29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCk7Cit2b2lkIGxzN2FfbW1fd3JlZyhzdHJ1Y3Qg
bG9vbmdzb25fZGV2aWNlICpsZGV2LCB1MzIgb2Zmc2V0LCB1MzIgdmFsKTsKK3UzMiBsczdhX2lv
X3JyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCk7Cit2b2lkIGxz
N2FfaW9fd3JlZyhzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCB1MzIgb2Zmc2V0LCB1MzIg
dmFsKTsKKworI2VuZGlmIC8qIF9fTE9PTkdTT05fRFJWX0hfXyAqLwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2VuY29kZXIuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9sb29uZ3Nvbi9sb29uZ3Nvbl9lbmNvZGVyLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
MDAwMDAwMDAwMDAwLi4yMDAyY2VlMDAzMDMKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZW5jb2Rlci5jCkBAIC0wLDAgKzEsMzcgQEAKKy8vIFNQ
RFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCisKKyNpbmNsdWRlICJsb29u
Z3Nvbl9kcnYuaCIKKworc3RhdGljIHZvaWQgbG9vbmdzb25fZW5jb2Rlcl9kZXN0cm95KHN0cnVj
dCBkcm1fZW5jb2RlciAqZW5jb2RlcikKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciAqbGVu
Y29kZXIgPSB0b19sb29uZ3Nvbl9lbmNvZGVyKGVuY29kZXIpOworCisJZHJtX2VuY29kZXJfY2xl
YW51cChlbmNvZGVyKTsKKwlrZnJlZShsZW5jb2Rlcik7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1
Y3QgZHJtX2VuY29kZXJfZnVuY3MgbG9vbmdzb25fZW5jb2Rlcl9mdW5jcyA9IHsKKwkuZGVzdHJv
eSA9IGxvb25nc29uX2VuY29kZXJfZGVzdHJveSwKK307CisKK2ludCBsb29uZ3Nvbl9lbmNvZGVy
X2luaXQoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgaW50IGluZGV4KQoreworCXN0cnVj
dCBkcm1fZW5jb2RlciAqZW5jb2RlcjsKKwlzdHJ1Y3QgbG9vbmdzb25fZW5jb2RlciAqbGVuY29k
ZXI7CisKKwlsZW5jb2RlciA9IGt6YWxsb2Moc2l6ZW9mKHN0cnVjdCBsb29uZ3Nvbl9lbmNvZGVy
KSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFsZW5jb2RlcikKKwkJcmV0dXJuIC0xOworCisJbGVuY29k
ZXItPmxjcnRjID0gbGRldi0+bW9kZV9pbmZvW2luZGV4XS5jcnRjOworCWxlbmNvZGVyLT5sZGV2
ID0gbGRldjsKKwllbmNvZGVyID0gJmxlbmNvZGVyLT5iYXNlOworCWVuY29kZXItPnBvc3NpYmxl
X2NydGNzID0gMSA8PCBpbmRleDsKKworCWRybV9lbmNvZGVyX2luaXQobGRldi0+ZGV2LCBlbmNv
ZGVyLCAmbG9vbmdzb25fZW5jb2Rlcl9mdW5jcywKKwkJCSBEUk1fTU9ERV9FTkNPREVSX0RBQywg
TlVMTCk7CisKKwlsZGV2LT5tb2RlX2luZm9baW5kZXhdLmVuY29kZXIgPSBsZW5jb2RlcjsKKwor
CXJldHVybiAwOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25n
c29uX3BsYW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fcGxhbmUuYwpu
ZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmI4YzI0N2QxY2UwOQotLS0g
L2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9wbGFuZS5j
CkBAIC0wLDAgKzEsMTAyIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1v
ci1sYXRlcgorCisjaW5jbHVkZSAibG9vbmdzb25fZHJ2LmgiCisKK3N0YXRpYyB2b2lkIGxvb25n
c29uX3BsYW5lX2F0b21pY191cGRhdGUoc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCisJCQkJCSBz
dHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCit7CisJc3RydWN0IGxvb25nc29uX2NydGMg
KmxjcnRjOworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJc3RydWN0IGRybV9wbGFu
ZV9zdGF0ZSAqbHN0YXRlID0gcGxhbmUtPnN0YXRlOworCXUzMiBncHVfYWRkciA9IDA7CisJdTMy
IGZiX2FkZHIgPSAwOworCXUzMiByZWdfdmFsID0gMDsKKwl1MzIgcmVnX29mZnNldDsKKwl1MzIg
cGl0Y2g7CisJdTggZGVwdGg7CisJdTMyIHgsIHk7CisKKwlpZiAoIWxzdGF0ZS0+Y3J0YyB8fCAh
bHN0YXRlLT5mYikKKwkJcmV0dXJuOworCisJcGl0Y2ggPSBsc3RhdGUtPmZiLT5waXRjaGVzWzBd
OworCWxjcnRjID0gdG9fbG9vbmdzb25fY3J0Yyhsc3RhdGUtPmNydGMpOworCWxkZXYgPSBsY3J0
Yy0+bGRldjsKKwlyZWdfb2Zmc2V0ID0gbGNydGMtPnJlZ19vZmZzZXQ7CisJeCA9IGxzdGF0ZS0+
Y3J0Yy0+eDsKKwl5ID0gbHN0YXRlLT5jcnRjLT55OworCWRlcHRoID0gbHN0YXRlLT5mYi0+Zm9y
bWF0LT5jcHBbMF0gPDwgMzsKKworCWdwdV9hZGRyID0gbG9vbmdzb25fZ3B1X29mZnNldChsc3Rh
dGUpOworCXJlZ192YWwgPSAocGl0Y2ggKyAyNTUpICYgfjI1NTsKKwlsczdhX21tX3dyZWcobGRl
diwgRkJfU1RSSV9SRUcgKyByZWdfb2Zmc2V0LCByZWdfdmFsKTsKKworCXN3aXRjaCAoZGVwdGgp
IHsKKwljYXNlIDEyIC4uLiAxNjoKKwkJZmJfYWRkciA9IGdwdV9hZGRyICsgeSAqIHBpdGNoICsg
QUxJR04oeCwgNjQpICogMjsKKwkJYnJlYWs7CisJY2FzZSAyNCAuLi4gMzI6CisJZGVmYXVsdDoK
KwkJZmJfYWRkciA9IGdwdV9hZGRyICsgeSAqIHBpdGNoICsgQUxJR04oeCwgNjQpICogNDsKKwkJ
YnJlYWs7CisJfQorCisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0FERFIwX1JFRyArIHJlZ19vZmZz
ZXQsIGZiX2FkZHIpOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9BRERSMV9SRUcgKyByZWdfb2Zm
c2V0LCBmYl9hZGRyKTsKKwlyZWdfdmFsID0gbGNydGMtPmNmZ19yZWcgfCBDRkdfRU5BQkxFOwor
CWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdfUkVHICsgcmVnX29mZnNldCwgcmVnX3ZhbCk7Cit9
CisKK3N0YXRpYyBjb25zdCB1aW50MzJfdCBsb29uZ3Nvbl9mb3JtYXRzW10gPSB7CisJRFJNX0ZP
Uk1BVF9SR0I1NjUsCisJRFJNX0ZPUk1BVF9SR0I4ODgsCisJRFJNX0ZPUk1BVF9YUkdCODg4OCwK
KwlEUk1fRk9STUFUX0FSR0I4ODg4LAorfTsKKworc3RhdGljIGNvbnN0IHVpbnQ2NF90IGxvb25n
c29uX2Zvcm1hdF9tb2RpZmllcnNbXSA9IHsgRFJNX0ZPUk1BVF9NT0RfTElORUFSLAorCQkJCQkJ
ICAgICAgRFJNX0ZPUk1BVF9NT0RfSU5WQUxJRCB9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9wbGFuZV9mdW5jcyBsb29uZ3Nvbl9wbGFuZV9mdW5jcyA9IHsKKwkuYXRvbWljX2R1cGxpY2F0
ZV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX3BsYW5lX2R1cGxpY2F0ZV9zdGF0ZSwKKwkuYXRv
bWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9wbGFuZV9kZXN0cm95X3N0YXRl
LAorCS5kZXN0cm95ID0gZHJtX3BsYW5lX2NsZWFudXAsCisJLmRpc2FibGVfcGxhbmUgPSBkcm1f
YXRvbWljX2hlbHBlcl9kaXNhYmxlX3BsYW5lLAorCS5yZXNldCA9IGRybV9hdG9taWNfaGVscGVy
X3BsYW5lX3Jlc2V0LAorCS51cGRhdGVfcGxhbmUgPSBkcm1fYXRvbWljX2hlbHBlcl91cGRhdGVf
cGxhbmUsCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9wbGFuZV9oZWxwZXJfZnVuY3Mg
bG9vbmdzb25fcGxhbmVfaGVscGVyX2Z1bmNzID0geworCS5wcmVwYXJlX2ZiCT0gZHJtX2dlbV92
cmFtX3BsYW5lX2hlbHBlcl9wcmVwYXJlX2ZiLAorCS5jbGVhbnVwX2ZiCT0gZHJtX2dlbV92cmFt
X3BsYW5lX2hlbHBlcl9jbGVhbnVwX2ZiLAorCS5hdG9taWNfdXBkYXRlID0gbG9vbmdzb25fcGxh
bmVfYXRvbWljX3VwZGF0ZSwKK307CisKK2ludCBsb29uZ3Nvbl9wbGFuZV9pbml0KHN0cnVjdCBs
b29uZ3Nvbl9jcnRjICpsY3J0YykKK3sKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2Owor
CWludCBjcnRjX2lkOworCWludCByZXQ7CisKKwlsZGV2ID0gbGNydGMtPmxkZXY7CisJY3J0Y19p
ZCA9IGxjcnRjLT5jcnRjX2lkOworCisJbGNydGMtPnBsYW5lID0gZGV2bV9remFsbG9jKGxkZXYt
PmRldi0+ZGV2LCBzaXplb2YoKmxjcnRjLT5wbGFuZSksCisJCQkJICAgIEdGUF9LRVJORUwpOwor
CWlmICghbGNydGMtPnBsYW5lKQorCQlyZXR1cm4gLUVOT01FTTsKKworCXJldCA9IGRybV91bml2
ZXJzYWxfcGxhbmVfaW5pdChsZGV2LT5kZXYsIGxjcnRjLT5wbGFuZSwgQklUKGNydGNfaWQpLAor
CQkJCSAgICAgICAmbG9vbmdzb25fcGxhbmVfZnVuY3MsIGxvb25nc29uX2Zvcm1hdHMsCisJCQkJ
ICAgICAgIEFSUkFZX1NJWkUobG9vbmdzb25fZm9ybWF0cyksCisJCQkJICAgICAgIGxvb25nc29u
X2Zvcm1hdF9tb2RpZmllcnMsCisJCQkJICAgICAgIERSTV9QTEFORV9UWVBFX1BSSU1BUlksIE5V
TEwpOworCWlmIChyZXQpIHsKKwkJRFJNX0VSUk9SKCJmYWlsIHRvIGluaXQgcGxhbmVkIGNydGMg
JWRcbiIsIGNydGNfaWQpOworCQlyZXR1cm4gcmV0OworCX0KKworCWRybV9wbGFuZV9oZWxwZXJf
YWRkKGxjcnRjLT5wbGFuZSwgJmxvb25nc29uX3BsYW5lX2hlbHBlcl9mdW5jcyk7CisKKwlyZXR1
cm4gMDsKK30KLS0gCjIuMzEuMQ==
------=_Part_15229_1624407887.1620956127709
Content-Type: text/html; charset=GBK
Content-Transfer-Encoding: base64

PGRpdiBzdHlsZT0ibGluZS1oZWlnaHQ6MS43O2NvbG9yOiMwMDAwMDA7Zm9udC1zaXplOjE0cHg7
Zm9udC1mYW1pbHk6QXJpYWwiPjxwcmUgd3JhcD0ic29mdCI+RnJvbTogQ2hlbnlhbmcgTGkgJmx0
O2xpY2hlbnlhbmdAbG9vbmdzb24uY24mZ3Q7CgpUaGlzIHBhdGNoIGFkZHMgYW4gaW5pdGlhbCBE
Uk0gZHJpdmVyIGZvciB0aGUgTG9vbmdzb24gTFM3QTEwMDAKYnJpZGdlIGNoaXAoTFM3QSkuIFRo
ZSBMUzdBIGJyaWRnZSBjaGlwIGNvbnRhaW5zIHR3byBkaXNwbGF5CmNvbnRyb2xsZXJzLCBzdXBw
b3J0IGR1YWwgZGlzcGxheSBvdXRwdXQuIFRoZSBtYXhpbXVtIHN1cHBvcnQgZm9yCmVhY2ggY2hh
bm5lbCBkaXNwbGF5IGlzIHRvIDE5MjB4MTA4MEA2MEh6LgpBdCBwcmVzZW50LCBEQyBkZXZpY2Ug
ZGV0ZWN0aW9uIGFuZCBEUk0gZHJpdmVyIHJlZ2lzdHJhdGlvbiBhcmUKY29tcGxldGVkLCB0aGUg
Y3J0Yy9wbGFuZS9lbmNvZGVyL2Nvbm5lY3RvciBvYmplY3RzIGhhcyBiZWVuCmltcGxlbWVudGVk
LgpPbiBMb29uZ3NvbiAzQTQwMDAgQ1BVIGFuZCA3QTEwMDAgc3lzdGVtLCB3ZSBoYXZlIGFjaGll
dmVkIHRoZSB1c2UKb2YgZHVhbCBzY3JlZW4sIGFuZCBzdXBwb3J0IGR1YWwgc2NyZWVuIGNsb25l
IG1vZGUgYW5kIGV4cGFuc2lvbgptb2RlLgoKdjg6Ci0gVXBkYXRlIHRoZSBhdG9taWNfdXBkYXRl
IGZ1bmN0aW9uIGludGVyZmFjZS4KCnY3OgotIFRoZSBwaXhlbCBjbG9jayBpcyBsaW1pdGVkIHRv
IGxlc3MgdGhhbiAxNzMwMDAuCgp2NjoKLSBSZW1vdmUgc3Bpbl9sb2NrIGluIG1taW8gcmVnIHJl
YWQgYW5kIHdyaXRlLgotIFRPX1VOQ0FDIGlzIHJlcGxhYyB3aXRoIGlvcmVtYXAuCi0gRml4IGVy
cm9yIGFyZ3VtZW50cyBpbiBjcnRjX2F0b21pY19lbmFibGUvZGlzYWJsZS9tb2RlX3ZhbGlkLgoK
djU6Ci0gQ2hhbmdlIHRoZSBuYW1lIG9mIHRoZSBjaGlwIHRvIExTN0EuCi0gQ2hhbmdlIG1hZ2lj
IHZhbHVlIGluIGNydGMgdG8gbWFjcm9zLgotIENvcnJlY3QgbWlzdGFrZXMgd29yZHMuCi0gQ2hh
bmdlIHRoZSByZWdpc3RlciBvcGVyYXRpb24gZnVuY3Rpb24gcHJlZml4IHRvIGxzN2EuCgp2NDoK
LSBNb3ZlIHRoZSBtb2RlX3ZhbGlkIGZ1bmN0aW9uIHRvIHRoZSBjcnRjLgoKdjM6Ci0gTW92ZSB0
aGUgbW9kZV92YWxpZCBmdW5jdGlvbiB0byB0aGUgY29ubmVjdG9yIGFuZCBvcHRpbWl6ZSBpdC4K
LSBGaXggbnVtX2NydGMgY2FsY3VsYXRpb24gbWV0aG9kLgoKdjI6Ci0gQ29tcGxldGUgdGhlIGNh
c2Ugb2YgMzItYml0IGNvbG9yIGluIENSVEMuCgpTaWduZWQtb2ZmLWJ5OiBDaGVueWFuZyBMaSAm
bHQ7bGljaGVueWFuZ0Bsb29uZ3Nvbi5jbiZndDsKLS0tCiBkcml2ZXJzL2dwdS9kcm0vS2NvbmZp
ZyAgICAgICAgICAgICAgICAgICAgICAgfCAgIDIgKwogZHJpdmVycy9ncHUvZHJtL01ha2VmaWxl
ICAgICAgICAgICAgICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9L
Y29uZmlnICAgICAgICAgICAgICB8ICAxNCArCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vTWFr
ZWZpbGUgICAgICAgICAgICAgfCAgMTQgKwogZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25n
c29uX2Nvbm5lY3Rvci5jIHwgIDQ4ICsrKysKIGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29u
Z3Nvbl9jcnRjLmMgICAgICB8IDI0MyArKysrKysrKysrKysrKysrCiBkcml2ZXJzL2dwdS9kcm0v
bG9vbmdzb24vbG9vbmdzb25fZGV2aWNlLmMgICAgfCAgNDcgKysrCiBkcml2ZXJzL2dwdS9kcm0v
bG9vbmdzb24vbG9vbmdzb25fZHJ2LmMgICAgICAgfCAyNzAgKysrKysrKysrKysrKysrKysrCiBk
cml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2LmggICAgICAgfCAxMzkgKysrKysr
KysrCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZW5jb2Rlci5jICAgfCAgMzcg
KysrCiBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fcGxhbmUuYyAgICAgfCAxMDIg
KysrKysrKwogMTEgZmlsZXMgY2hhbmdlZCwgOTE3IGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2Rl
IDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZwogY3JlYXRlIG1vZGUgMTAw
NjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9NYWtlZmlsZQogY3JlYXRlIG1vZGUgMTAwNjQ0
IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jb25uZWN0b3IuYwogY3JlYXRlIG1v
ZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jcnRjLmMKIGNyZWF0
ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZGV2aWNlLmMK
IGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fZHJ2
LmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25f
ZHJ2LmgKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdz
b25fZW5jb2Rlci5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2xvb25nc29u
L2xvb25nc29uX3BsYW5lLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vS2NvbmZpZyBi
L2RyaXZlcnMvZ3B1L2RybS9LY29uZmlnCmluZGV4IDNjMTZiZDFhZmQ4Ny4uYzBjMjgxNjM1Y2Vl
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vS2NvbmZpZworKysgYi9kcml2ZXJzL2dwdS9k
cm0vS2NvbmZpZwpAQCAtMzcyLDYgKzM3Miw4IEBAIHNvdXJjZSAiZHJpdmVycy9ncHUvZHJtL3hl
bi9LY29uZmlnIgogCiBzb3VyY2UgImRyaXZlcnMvZ3B1L2RybS92Ym94dmlkZW8vS2NvbmZpZyIK
IAorc291cmNlICJkcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vS2NvbmZpZyIKKwogc291cmNlICJk
cml2ZXJzL2dwdS9kcm0vbGltYS9LY29uZmlnIgogCiBzb3VyY2UgImRyaXZlcnMvZ3B1L2RybS9w
YW5mcm9zdC9LY29uZmlnIgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL01ha2VmaWxlIGIv
ZHJpdmVycy9ncHUvZHJtL01ha2VmaWxlCmluZGV4IDUyNzlkYjQzOTJkZi4uNzc5NzVmZGI0ZDUx
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL01ha2VmaWxlCkBAIC0xMTksNiArMTE5LDcgQEAgb2JqLSQoQ09ORklHX0RSTV9QTDExMSkg
Kz0gcGwxMTEvCiBvYmotJChDT05GSUdfRFJNX1RWRTIwMCkgKz0gdHZlMjAwLwogb2JqLSQoQ09O
RklHX0RSTV9YRU4pICs9IHhlbi8KIG9iai0kKENPTkZJR19EUk1fVkJPWFZJREVPKSArPSB2Ym94
dmlkZW8vCitvYmotJChDT05GSUdfRFJNX0xPT05HU09OKSArPSBsb29uZ3Nvbi8KIG9iai0kKENP
TkZJR19EUk1fTElNQSkgICs9IGxpbWEvCiBvYmotJChDT05GSUdfRFJNX1BBTkZST1NUKSArPSBw
YW5mcm9zdC8KIG9iai0kKENPTkZJR19EUk1fQVNQRUVEX0dGWCkgKz0gYXNwZWVkLwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL0tjb25maWcgYi9kcml2ZXJzL2dwdS9kcm0v
bG9vbmdzb24vS2NvbmZpZwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAu
LjNjZjQyYTRjY2EwOAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nv
bi9LY29uZmlnCkBAIC0wLDAgKzEsMTQgQEAKKyMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQ
TC0yLjAtb25seQorCitjb25maWcgRFJNX0xPT05HU09OCisJdHJpc3RhdGUgIkRSTSBzdXBwb3J0
IGZvciBMUzdBIGJyaWRnZSBjaGlwc2V0IgorCWRlcGVuZHMgb24gRFJNICZhbXA7JmFtcDsgUENJ
CisJZGVwZW5kcyBvbiBDUFVfTE9PTkdTT042NAorCXNlbGVjdCBEUk1fS01TX0hFTFBFUgorCXNl
bGVjdCBEUk1fVlJBTV9IRUxQRVIKKwlzZWxlY3QgRFJNX1RUTQorCXNlbGVjdCBEUk1fVFRNX0hF
TFBFUgorCWRlZmF1bHQgbgorCWhlbHAKKwkgIFN1cHBvcnQgdGhlIGRpc3BsYXkgY29udHJvbGxl
cnMgZm91bmQgb24gdGhlIExvb25nc29uIExTN0EKKwkgIGJyaWRnZS4KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nv
bi9NYWtlZmlsZQpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjIyZDA2
Mzk1M2I3OAotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9NYWtl
ZmlsZQpAQCAtMCwwICsxLDE0IEBACisjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4w
LW9ubHkKKyMKKyMgTWFrZWZpbGUgZm9yIGxvb25nc29uIGRybSBkcml2ZXJzLgorIyBUaGlzIGRy
aXZlciBwcm92aWRlcyBzdXBwb3J0IGZvciB0aGUKKyMgRGlyZWN0IFJlbmRlcmluZyBJbmZyYXN0
cnVjdHVyZSAoRFJJKQorCitjY2ZsYWdzLXkgOj0gLUlpbmNsdWRlL2RybQorbG9vbmdzb24teSA6
PSBsb29uZ3Nvbl9kcnYubyBcCisJbG9vbmdzb25fY3J0Yy5vIFwKKwlsb29uZ3Nvbl9wbGFuZS5v
IFwKKwlsb29uZ3Nvbl9kZXZpY2UubyBcCisJbG9vbmdzb25fY29ubmVjdG9yLm8gXAorCWxvb25n
c29uX2VuY29kZXIubworb2JqLSQoQ09ORklHX0RSTV9MT09OR1NPTikgKz0gbG9vbmdzb24ubwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Nvbm5lY3Rvci5j
IGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Nvbm5lY3Rvci5jCm5ldyBmaWxl
IG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uNmIxZjBmZmEzM2JkCi0tLSAvZGV2L251
bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Nvbm5lY3Rvci5jCkBA
IC0wLDAgKzEsNDggQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxh
dGVyCisKKyNpbmNsdWRlICJsb29uZ3Nvbl9kcnYuaCIKKworc3RhdGljIGludCBsb29uZ3Nvbl9n
ZXRfbW9kZXMoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKK3sKKwlpbnQgY291bnQ7
CisKKwljb3VudCA9IGRybV9hZGRfbW9kZXNfbm9lZGlkKGNvbm5lY3RvciwgMTkyMCwgMTA4MCk7
CisJZHJtX3NldF9wcmVmZXJyZWRfbW9kZShjb25uZWN0b3IsIDEwMjQsIDc2OCk7CisKKwlyZXR1
cm4gY291bnQ7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9oZWxwZXJf
ZnVuY3MgbG9vbmdzb25fY29ubmVjdG9yX2hlbHBlciA9IHsKKwkuZ2V0X21vZGVzID0gbG9vbmdz
b25fZ2V0X21vZGVzLAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1
bmNzIGxvb25nc29uX2Nvbm5lY3Rvcl9mdW5jcyA9IHsKKwkuZmlsbF9tb2RlcyA9IGRybV9oZWxw
ZXJfcHJvYmVfc2luZ2xlX2Nvbm5lY3Rvcl9tb2RlcywKKwkuZGVzdHJveSA9IGRybV9jb25uZWN0
b3JfY2xlYW51cCwKKwkucmVzZXQgPSBkcm1fYXRvbWljX2hlbHBlcl9jb25uZWN0b3JfcmVzZXQs
CisJLmF0b21pY19kdXBsaWNhdGVfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jb25uZWN0b3Jf
ZHVwbGljYXRlX3N0YXRlLAorCS5hdG9taWNfZGVzdHJveV9zdGF0ZSA9IGRybV9hdG9taWNfaGVs
cGVyX2Nvbm5lY3Rvcl9kZXN0cm95X3N0YXRlLAorfTsKKworaW50IGxvb25nc29uX2Nvbm5lY3Rv
cl9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCkKK3sKKwlzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOworCXN0cnVjdCBsb29uZ3Nvbl9jb25uZWN0b3Ig
Kmxjb25uZWN0b3I7CisKKwlsY29ubmVjdG9yID0ga3phbGxvYyhzaXplb2Yoc3RydWN0IGxvb25n
c29uX2Nvbm5lY3RvciksIEdGUF9LRVJORUwpOworCWlmICghbGNvbm5lY3RvcikgeworCQlEUk1f
SU5GTygibG9vbmdzb24gY29ubmVjdG9yIGt6YWxsb2MgZmFpbGVkXG4iKTsKKwkJcmV0dXJuIC0x
OworCX0KKworCWxjb25uZWN0b3ItJmd0O2xkZXYgPSBsZGV2OworCWxjb25uZWN0b3ItJmd0O2lk
ID0gaW5kZXg7CisKKwlsZGV2LSZndDttb2RlX2luZm9baW5kZXhdLmNvbm5lY3RvciA9IGxjb25u
ZWN0b3I7CisJY29ubmVjdG9yID0gJmFtcDtsY29ubmVjdG9yLSZndDtiYXNlOworCWRybV9jb25u
ZWN0b3JfaW5pdChsZGV2LSZndDtkZXYsIGNvbm5lY3RvciwgJmFtcDtsb29uZ3Nvbl9jb25uZWN0
b3JfZnVuY3MsCisJCQkgICBEUk1fTU9ERV9DT05ORUNUT1JfVW5rbm93bik7CisJZHJtX2Nvbm5l
Y3Rvcl9oZWxwZXJfYWRkKGNvbm5lY3RvciwgJmFtcDtsb29uZ3Nvbl9jb25uZWN0b3JfaGVscGVy
KTsKKworCXJldHVybiAwOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29u
L2xvb25nc29uX2NydGMuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9jcnRj
LmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi40Y2I2NWZhMDg3NzgK
LS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9vbmdzb25fY3J0
Yy5jCkBAIC0wLDAgKzEsMjQzIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIu
MC1vci1sYXRlcgorCisjaW5jbHVkZSAibG9vbmdzb25fZHJ2LmgiCisKK3N0YXRpYyB2b2lkIHRy
eV9lYWNoX2xvb3BjKHUzMiBjbGssIHUzMiBwc3RkaXYsIHUzMiBmcmVmYywKKwkJCSAgIHN0cnVj
dCBwaXhfcGxsICpwbGxfY29uZmlnKQoreworCXUzMiBsb29wYzsKKwl1MzIgY2xrX291dDsKKwl1
MzIgcHJlY2lzaW9uOworCXUzMiBtaW4gPSAxMDAwOworCXUzMiBiYXNlX2NsayA9IDEwMDAwMEw7
CisKKwlmb3IgKGxvb3BjID0gTE9PUENfTUlOOyBsb29wYyAmbHQ7IExPT1BDX01BWDsgbG9vcGMr
KykgeworCQlpZiAoKGxvb3BjICZsdDsgRlJFX1JFRl9NSU4gKiBmcmVmYykgfHwKKwkJICAgIChs
b29wYyAmZ3Q7IEZSRV9SRUZfTUFYICogZnJlZmMpKQorCQkJY29udGludWU7CisKKwkJY2xrX291
dCA9IGJhc2VfY2xrICogbG9vcGMgLyBmcmVmYzsKKwkJcHJlY2lzaW9uID0gKGNsayAmZ3Q7IGNs
a19vdXQpID8gKGNsayAtIGNsa19vdXQpIDogKGNsa19vdXQgLSBjbGspOworCQlpZiAocHJlY2lz
aW9uICZsdDsgbWluKSB7CisJCQlwbGxfY29uZmlnLSZndDtsMl9kaXYgPSBwc3RkaXY7CisJCQlw
bGxfY29uZmlnLSZndDtsMV9sb29wYyA9IGxvb3BjOworCQkJcGxsX2NvbmZpZy0mZ3Q7bDFfZnJl
ZmMgPSBmcmVmYzsKKwkJfQorCX0KK30KKworc3RhdGljIHZvaWQgY2FsX2ZyZXEodTMyIHBpeGNs
b2NrLCBzdHJ1Y3QgcGl4X3BsbCAqcGxsX2NvbmZpZykKK3sKKwl1MzIgcHN0ZGl2OworCXUzMiBm
cmVmYzsKKwl1MzIgY2xrOworCisJZm9yIChwc3RkaXYgPSAxOyBwc3RkaXYgJmx0OyBQU1RfRElW
X01BWDsgcHN0ZGl2KyspIHsKKwkJY2xrID0gcGl4Y2xvY2sgKiBwc3RkaXY7CisJCWZvciAoZnJl
ZmMgPSBESVZfUkVGX01JTjsgZnJlZmMgJmx0Oz0gRElWX1JFRl9NQVg7IGZyZWZjKyspCisJCQl0
cnlfZWFjaF9sb29wYyhjbGssIHBzdGRpdiwgZnJlZmMsIHBsbF9jb25maWcpOworCX0KK30KKwor
c3RhdGljIHZvaWQgY29uZmlnX3BsbChzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCB1bnNp
Z25lZCBsb25nIHBsbF9iYXNlLAorCQkgICAgICAgc3RydWN0IHBpeF9wbGwgKnBsbF9jZmcpCit7
CisJdTMyIHZhbDsKKwl1MzIgY291bnQgPSAwOworCisJLyogY2xlYXIgc2VsX3BsbF9vdXQwICov
CisJdmFsID0gbHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KTsKKwl2YWwgJmFtcDs9
IH4oMVVMICZsdDsmbHQ7IDgpOworCWxzN2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCwg
dmFsKTsKKworCS8qIHNldCBwbGxfcGQgKi8KKwl2YWwgPSBsczdhX2lvX3JyZWcobGRldiwgcGxs
X2Jhc2UgKyAweDQpOworCXZhbCB8PSAoMVVMICZsdDsmbHQ7IDEzKTsKKwlsczdhX2lvX3dyZWco
bGRldiwgcGxsX2Jhc2UgKyAweDQsIHZhbCk7CisKKwkvKiBjbGVhciBzZXRfcGxsX3BhcmFtICov
CisJdmFsID0gbHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KTsKKwl2YWwgJmFtcDs9
IH4oMVVMICZsdDsmbHQ7IDExKTsKKwlsczdhX2lvX3dyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQs
IHZhbCk7CisKKwkvKiBjbGVhciBvbGQgdmFsdWUgJmFtcDsgY29uZmlnIG5ldyB2YWx1ZSAqLwor
CXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4NCk7CisJdmFsICZhbXA7PSB+
KDB4N2ZVTCAmbHQ7Jmx0OyAwKTsKKwl2YWwgfD0gKHBsbF9jZmctJmd0O2wxX2ZyZWZjICZsdDsm
bHQ7IDApOyAvKiByZWZjICovCisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0LCB2
YWwpOworCXZhbCA9IGxzN2FfaW9fcnJlZyhsZGV2LCBwbGxfYmFzZSArIDB4MCk7CisJdmFsICZh
bXA7PSB+KDB4N2ZVTCAmbHQ7Jmx0OyAwKTsKKwl2YWwgfD0gKHBsbF9jZmctJmd0O2wyX2RpdiAm
bHQ7Jmx0OyAwKTsgLyogZGl2ICovCisJdmFsICZhbXA7PSB+KDB4MWZmVUwgJmx0OyZsdDsgMjEp
OworCXZhbCB8PSAocGxsX2NmZy0mZ3Q7bDFfbG9vcGMgJmx0OyZsdDsgMjEpOyAvKiBsb29wYyAq
LworCWxzN2FfaW9fd3JlZyhsZGV2LCBwbGxfYmFzZSArIDB4MCwgdmFsKTsKKworCS8qIHNldCBz
ZXRfcGxsX3BhcmFtICovCisJdmFsID0gbHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0
KTsKKwl2YWwgfD0gKDFVTCAmbHQ7Jmx0OyAxMSk7CisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9i
YXNlICsgMHg0LCB2YWwpOworCS8qIGNsZWFyIHBsbF9wZCAqLworCXZhbCA9IGxzN2FfaW9fcnJl
ZyhsZGV2LCBwbGxfYmFzZSArIDB4NCk7CisJdmFsICZhbXA7PSB+KDFVTCAmbHQ7Jmx0OyAxMyk7
CisJbHM3YV9pb193cmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0LCB2YWwpOworCisJd2hpbGUgKCEo
bHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KSAmYW1wOyAweDgwKSkgeworCQljcHVf
cmVsYXgoKTsKKwkJY291bnQrKzsKKwkJaWYgKGNvdW50ICZndDs9IDEwMDApIHsKKwkJCURSTV9F
UlJPUigibG9vbmdzb24tN0EgUExMIGxvY2sgZmFpbGVkXG4iKTsKKwkJCWJyZWFrOworCQl9CisJ
fQorCisJdmFsID0gbHM3YV9pb19ycmVnKGxkZXYsIHBsbF9iYXNlICsgMHg0KTsKKwl2YWwgfD0g
KDFVTCAmbHQ7Jmx0OyA4KTsKKwlsczdhX2lvX3dyZWcobGRldiwgcGxsX2Jhc2UgKyAweDQsIHZh
bCk7Cit9CisKK3N0YXRpYyB2b2lkIGxvb25nc29uX2NydGNfbW9kZV9zZXRfbm9mYihzdHJ1Y3Qg
ZHJtX2NydGMgKmNydGMpCit7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtJmd0O2Rl
djsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2ID0gZGV2LSZndDtkZXZfcHJpdmF0ZTsK
KwlzdHJ1Y3QgbG9vbmdzb25fY3J0YyAqbGNydGMgPSB0b19sb29uZ3Nvbl9jcnRjKGNydGMpOwor
CXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlID0gJmFtcDtjcnRjLSZndDtzdGF0ZS0mZ3Q7
YWRqdXN0ZWRfbW9kZTsKKwljb25zdCBzdHJ1Y3QgZHJtX2Zvcm1hdF9pbmZvICpmb3JtYXQ7CisJ
c3RydWN0IHBpeF9wbGwgcGxsX2NmZzsKKwl1MzIgaHIsIGhzcywgaHNlLCBoZmw7CisJdTMyIHZy
LCB2c3MsIHZzZSwgdmZsOworCXUzMiBwaXhfZnJlcTsKKwl1MzIgcmVnX29mZnNldDsKKworCWhy
ID0gbW9kZS0mZ3Q7aGRpc3BsYXk7CisJaHNzID0gbW9kZS0mZ3Q7aHN5bmNfc3RhcnQ7CisJaHNl
ID0gbW9kZS0mZ3Q7aHN5bmNfZW5kOworCWhmbCA9IG1vZGUtJmd0O2h0b3RhbDsKKworCXZyID0g
bW9kZS0mZ3Q7dmRpc3BsYXk7CisJdnNzID0gbW9kZS0mZ3Q7dnN5bmNfc3RhcnQ7CisJdnNlID0g
bW9kZS0mZ3Q7dnN5bmNfZW5kOworCXZmbCA9IG1vZGUtJmd0O3Z0b3RhbDsKKworCXBpeF9mcmVx
ID0gbW9kZS0mZ3Q7Y2xvY2s7CisJcmVnX29mZnNldCA9IGxjcnRjLSZndDtyZWdfb2Zmc2V0Owor
CWZvcm1hdCA9IGNydGMtJmd0O3ByaW1hcnktJmd0O3N0YXRlLSZndDtmYi0mZ3Q7Zm9ybWF0Owor
CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0RJVENGR19SRUcgKyByZWdfb2Zmc2V0LCAwKTsKKwls
czdhX21tX3dyZWcobGRldiwgRkJfRElUVEFCX0xPX1JFRyArIHJlZ19vZmZzZXQsIDApOworCWxz
N2FfbW1fd3JlZyhsZGV2LCBGQl9ESVRUQUJfSElfUkVHICsgcmVnX29mZnNldCwgMCk7CisJbHM3
YV9tbV93cmVnKGxkZXYsIEZCX1BBTkNGR19SRUcgKyByZWdfb2Zmc2V0LCBGQl9QQU5DRkdfREVG
KTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfUEFOVElNX1JFRyArIHJlZ19vZmZzZXQsIDApOwor
CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0hESVNQTEFZX1JFRyArIHJlZ19vZmZzZXQsIChoZmwg
Jmx0OyZsdDsgMTYpIHwgaHIpOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9IU1lOQ19SRUcgKyBy
ZWdfb2Zmc2V0LAorCQkgICAgIEZCX0hTWU5DX1BVTFNFIHwgKGhzZSAmbHQ7Jmx0OyAxNikgfCBo
c3MpOworCisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX1ZESVNQTEFZX1JFRyArIHJlZ19vZmZzZXQs
ICh2ZmwgJmx0OyZsdDsgMTYpIHwgdnIpOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9WU1lOQ19S
RUcgKyByZWdfb2Zmc2V0LAorCQkgICAgIEZCX1ZTWU5DX1BVTFNFIHwgKHZzZSAmbHQ7Jmx0OyAx
NikgfCB2c3MpOworCisJc3dpdGNoIChmb3JtYXQtJmd0O2Zvcm1hdCkgeworCWNhc2UgRFJNX0ZP
Uk1BVF9SR0I1NjU6CisJCWxjcnRjLSZndDtjZmdfcmVnIHw9IDB4MzsKKwkJYnJlYWs7CisJY2Fz
ZSBEUk1fRk9STUFUX1JHQjg4ODoKKwljYXNlIERSTV9GT1JNQVRfWFJHQjg4ODg6CisJY2FzZSBE
Uk1fRk9STUFUX0FSR0I4ODg4OgorCWRlZmF1bHQ6CisJCWxjcnRjLSZndDtjZmdfcmVnIHw9IDB4
NDsKKwkJYnJlYWs7CisJfQorCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdfUkVHICsgcmVnX29m
ZnNldCwgbGNydGMtJmd0O2NmZ19yZWcpOworCisJY2FsX2ZyZXEocGl4X2ZyZXEsICZhbXA7cGxs
X2NmZyk7CisJY29uZmlnX3BsbChsZGV2LCBMUzdBX1BJWF9QTEwgKyByZWdfb2Zmc2V0LCAmYW1w
O3BsbF9jZmcpOworfQorCitzdGF0aWMgdm9pZCBsb29uZ3Nvbl9jcnRjX2F0b21pY19lbmFibGUo
c3RydWN0IGRybV9jcnRjICpjcnRjLAorCQkJCQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xk
X3N0YXRlKQoreworCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBjcnRjLSZndDtkZXY7CisJc3Ry
dWN0IGxvb25nc29uX2RldmljZSAqbGRldiA9IGRldi0mZ3Q7ZGV2X3ByaXZhdGU7CisJc3RydWN0
IGxvb25nc29uX2NydGMgKmxjcnRjID0gdG9fbG9vbmdzb25fY3J0YyhjcnRjKTsKKwl1MzIgcmVn
X29mZnNldCA9IGxjcnRjLSZndDtyZWdfb2Zmc2V0OworCisJbGNydGMtJmd0O2NmZ19yZWcgfD0g
Q0ZHX0VOQUJMRTsKKwlsczdhX21tX3dyZWcobGRldiwgRkJfQ0ZHX1JFRyArIHJlZ19vZmZzZXQs
IGxjcnRjLSZndDtjZmdfcmVnKTsKK30KKworc3RhdGljIHZvaWQgbG9vbmdzb25fY3J0Y19hdG9t
aWNfZGlzYWJsZShzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCisJCQkJCSBzdHJ1Y3QgZHJtX2F0b21p
Y19zdGF0ZSAqb2xkX3N0YXRlKQoreworCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBjcnRjLSZn
dDtkZXY7CisJc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiA9IGRldi0mZ3Q7ZGV2X3ByaXZh
dGU7CisJc3RydWN0IGxvb25nc29uX2NydGMgKmxjcnRjID0gdG9fbG9vbmdzb25fY3J0YyhjcnRj
KTsKKwl1MzIgcmVnX29mZnNldCA9IGxjcnRjLSZndDtyZWdfb2Zmc2V0OworCisJbGNydGMtJmd0
O2NmZ19yZWcgJmFtcDs9IH5DRkdfRU5BQkxFOworCWxzN2FfbW1fd3JlZyhsZGV2LCBGQl9DRkdf
UkVHICsgcmVnX29mZnNldCwgbGNydGMtJmd0O2NmZ19yZWcpOworfQorCitzdGF0aWMgZW51bSBk
cm1fbW9kZV9zdGF0dXMgbG9vbmdzb25fbW9kZV92YWxpZChzdHJ1Y3QgZHJtX2NydGMgKmNydGMs
CisJCQkJCQljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKK3sKKwlpZiAobW9k
ZS0mZ3Q7aGRpc3BsYXkgJmd0OyAxOTIwKQorCQlyZXR1cm4gTU9ERV9CQUQ7CisJaWYgKG1vZGUt
Jmd0O3ZkaXNwbGF5ICZndDsgMTA4MCkKKwkJcmV0dXJuIE1PREVfQkFEOworCWlmIChtb2RlLSZn
dDtoZGlzcGxheSAlIDY0KQorCQlyZXR1cm4gTU9ERV9CQUQ7CisJaWYgKG1vZGUtJmd0O2Nsb2Nr
ICZndDs9IDE3MzAwMCkKKwkJcmV0dXJuIE1PREVfQ0xPQ0tfSElHSDsKKworCXJldHVybiBNT0RF
X09LOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jcnRjX2hlbHBlcl9mdW5jcyBsb29u
Z3Nvbl9jcnRjX2hlbHBlcl9mdW5jcyA9IHsKKwkubW9kZV92YWxpZCA9IGxvb25nc29uX21vZGVf
dmFsaWQsCisJLmF0b21pY19lbmFibGUgPSBsb29uZ3Nvbl9jcnRjX2F0b21pY19lbmFibGUsCisJ
LmF0b21pY19kaXNhYmxlID0gbG9vbmdzb25fY3J0Y19hdG9taWNfZGlzYWJsZSwKKwkubW9kZV9z
ZXRfbm9mYiA9IGxvb25nc29uX2NydGNfbW9kZV9zZXRfbm9mYiwKK307CisKK3N0YXRpYyBjb25z
dCBzdHJ1Y3QgZHJtX2NydGNfZnVuY3MgbG9vbmdzb25fY3J0Y19mdW5jcyA9IHsKKwkuc2V0X2Nv
bmZpZyA9IGRybV9hdG9taWNfaGVscGVyX3NldF9jb25maWcsCisJLnBhZ2VfZmxpcCA9IGRybV9h
dG9taWNfaGVscGVyX3BhZ2VfZmxpcCwKKwkucmVzZXQgPSBkcm1fYXRvbWljX2hlbHBlcl9jcnRj
X3Jlc2V0LAorCS5kZXN0cm95ID0gZHJtX2NydGNfY2xlYW51cCwKKwkuYXRvbWljX2R1cGxpY2F0
ZV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX2NydGNfZHVwbGljYXRlX3N0YXRlLAorCS5hdG9t
aWNfZGVzdHJveV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX2NydGNfZGVzdHJveV9zdGF0ZSwK
K307CisKK2ludCBsb29uZ3Nvbl9jcnRjX2luaXQoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRl
diwgaW50IGluZGV4KQoreworCXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YzsKKwl1MzIgcmV0
OworCisJbGNydGMgPSBremFsbG9jKHNpemVvZihzdHJ1Y3QgbG9vbmdzb25fY3J0YyksIEdGUF9L
RVJORUwpOworCWlmIChsY3J0YyA9PSBOVUxMKQorCQlyZXR1cm4gLTE7CisKKwlsY3J0Yy0mZ3Q7
bGRldiA9IGxkZXY7CisJbGNydGMtJmd0O3JlZ19vZmZzZXQgPSBpbmRleCAqIFJFR19PRkZTRVQ7
CisJbGNydGMtJmd0O2NmZ19yZWcgPSBDRkdfUkVTRVQ7CisJbGNydGMtJmd0O2NydGNfaWQgPSBp
bmRleDsKKworCXJldCA9IGxvb25nc29uX3BsYW5lX2luaXQobGNydGMpOworCWlmIChyZXQpCisJ
CXJldHVybiByZXQ7CisKKwlyZXQgPSBkcm1fY3J0Y19pbml0X3dpdGhfcGxhbmVzKGxkZXYtJmd0
O2RldiwgJmFtcDtsY3J0Yy0mZ3Q7YmFzZSwgbGNydGMtJmd0O3BsYW5lLAorCQkJCQlOVUxMLCAm
YW1wO2xvb25nc29uX2NydGNfZnVuY3MsIE5VTEwpOworCWlmIChyZXQpIHsKKwkJRFJNX0VSUk9S
KCJmYWlsZWQgdG8gaW5pdCBjcnRjICVkXG4iLCBpbmRleCk7CisJCWRybV9wbGFuZV9jbGVhbnVw
KGxjcnRjLSZndDtwbGFuZSk7CisJCXJldHVybiByZXQ7CisJfQorCisJZHJtX2NydGNfaGVscGVy
X2FkZCgmYW1wO2xjcnRjLSZndDtiYXNlLCAmYW1wO2xvb25nc29uX2NydGNfaGVscGVyX2Z1bmNz
KTsKKworCWxkZXYtJmd0O21vZGVfaW5mb1tpbmRleF0uY3J0YyA9IGxjcnRjOworCisJcmV0dXJu
IDA7Cit9CisKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9k
ZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYwpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmU1M2JkOGRlZDg5YgotLS0gL2Rl
di9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nvbl9kZXZpY2UuYwpA
QCAtMCwwICsxLDQ3IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1s
YXRlcgorCisjaW5jbHVkZSAibG9vbmdzb25fZHJ2LmgiCisKK3UzMiBsb29uZ3Nvbl9ncHVfb2Zm
c2V0KHN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKnN0YXRlKQoreworCXN0cnVjdCBkcm1fZ2VtX3Zy
YW1fb2JqZWN0ICpnYm87CisJc3RydWN0IGxvb25nc29uX2NydGMgKmxjcnRjOworCXN0cnVjdCBs
b29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJdTMyIGdwdV9hZGRyOworCisJbGNydGMgPSB0b19sb29u
Z3Nvbl9jcnRjKHN0YXRlLSZndDtjcnRjKTsKKwlsZGV2ID0gbGNydGMtJmd0O2xkZXY7CisKKwln
Ym8gPSBkcm1fZ2VtX3ZyYW1fb2ZfZ2VtKHN0YXRlLSZndDtmYi0mZ3Q7b2JqWzBdKTsKKwlncHVf
YWRkciA9IGxkZXYtJmd0O3ZyYW1fc3RhcnQgKyBkcm1fZ2VtX3ZyYW1fb2Zmc2V0KGdibyk7CisK
KwlyZXR1cm4gZ3B1X2FkZHI7Cit9CisKK3UzMiBsczdhX2lvX3JyZWcoc3RydWN0IGxvb25nc29u
X2RldmljZSAqbGRldiwgdTMyIG9mZnNldCkKK3sKKwl1MzIgdmFsOworCisJdmFsID0gcmVhZGwo
bGRldi0mZ3Q7aW8gKyBvZmZzZXQpOworCisJcmV0dXJuIHZhbDsKK30KKwordm9pZCBsczdhX2lv
X3dyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCwgdTMyIHZhbCkK
K3sKKwl3cml0ZWwodmFsLCBsZGV2LSZndDtpbyArIG9mZnNldCk7Cit9CisKK3UzMiBsczdhX21t
X3JyZWcoc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldiwgdTMyIG9mZnNldCkKK3sKKwl1MzIg
dmFsOworCisJdmFsID0gcmVhZGwobGRldi0mZ3Q7bW1pbyArIG9mZnNldCk7CisKKwlyZXR1cm4g
dmFsOworfQorCit2b2lkIGxzN2FfbW1fd3JlZyhzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2
LCB1MzIgb2Zmc2V0LCB1MzIgdmFsKQoreworCXdyaXRlbCh2YWwsIGxkZXYtJmd0O21taW8gKyBv
ZmZzZXQpOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29u
X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5jCm5ldyBmaWxl
IG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uZTQwNTE5OWEzZGY2Ci0tLSAvZGV2L251
bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5jCkBAIC0wLDAg
KzEsMjcwIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1sYXRlcgor
LyoKKyAqIExvb25nc29uIExTN0ExMDAwIGJyaWRnZSBjaGlwc2V0IGRybSBkcml2ZXIKKyAqLwor
CisjaW5jbHVkZSAmbHQ7bGludXgvY29uc29sZS5oJmd0OworI2luY2x1ZGUgJmx0O2xpbnV4L3Bj
aS5oJmd0OworI2luY2x1ZGUgJmx0O2xpbnV4L21vZHVsZS5oJmd0OworI2luY2x1ZGUgJmx0O2xp
bnV4L2tlcm5lbC5oJmd0OworI2luY2x1ZGUgImxvb25nc29uX2Rydi5oIgorCisvKiBJbnRlcmZh
Y2UgaGlzdG9yeToKKyAqIDAuMSAtIG9yaWdpbmFsLgorICovCisjZGVmaW5lIERSSVZFUl9NQUpP
UiAwCisjZGVmaW5lIERSSVZFUl9NSU5PUiAxCisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX21v
ZGVfY29uZmlnX2Z1bmNzIGxvb25nc29uX21vZGVfZnVuY3MgPSB7CisJLmZiX2NyZWF0ZSA9IGRy
bV9nZW1fZmJfY3JlYXRlLAorCS5hdG9taWNfY2hlY2sgPSBkcm1fYXRvbWljX2hlbHBlcl9jaGVj
aywKKwkuYXRvbWljX2NvbW1pdCA9IGRybV9hdG9taWNfaGVscGVyX2NvbW1pdCwKKwkub3V0cHV0
X3BvbGxfY2hhbmdlZCA9IGRybV9mYl9oZWxwZXJfb3V0cHV0X3BvbGxfY2hhbmdlZCwKKwkubW9k
ZV92YWxpZCA9IGRybV92cmFtX2hlbHBlcl9tb2RlX3ZhbGlkCit9OworCitzdGF0aWMgaW50IGxv
b25nc29uX2RldmljZV9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHVpbnQzMl90IGZsYWdz
KQoreworCXN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYgPSBkZXYtJmd0O2Rldl9wcml2YXRl
OworCXN0cnVjdCBwY2lfZGV2ICpncHVfcGRldjsKKwlyZXNvdXJjZV9zaXplX3QgYXBlcl9iYXNl
OworCXJlc291cmNlX3NpemVfdCBhcGVyX3NpemU7CisJcmVzb3VyY2Vfc2l6ZV90IG1taW9fYmFz
ZTsKKwlyZXNvdXJjZV9zaXplX3QgbW1pb19zaXplOworCisJLyogR1BVIE1FTSAqLworCS8qIFdl
IG5lZWQgZ2V0IDdBLWdwdSBwY2kgZGV2aWNlIGluZm9ybWF0aW9uIGZvciBsZGV2LSZndDtncHVf
cGRldiAqLworCS8qIGRldi0mZ3Q7cGRldiBzYXZlIDdBLWRjIHBjaSBkZXZpY2UgaW5mb3JtYXRp
b24gKi8KKwlncHVfcGRldiA9IHBjaV9nZXRfZGV2aWNlKFBDSV9WRU5ET1JfSURfTE9PTkdTT04s
CisJCQkJICBQQ0lfREVWSUNFX0lEX0xPT05HU09OX0dQVSwgTlVMTCk7CisJaWYgKElTX0VSUihn
cHVfcGRldikpCisJCXJldHVybiBQVFJfRVJSKGdwdV9wZGV2KTsKKworCWxkZXYtJmd0O2dwdV9w
ZGV2ID0gZ3B1X3BkZXY7CisJYXBlcl9iYXNlID0gcGNpX3Jlc291cmNlX3N0YXJ0KGdwdV9wZGV2
LCAyKTsKKwlhcGVyX3NpemUgPSBwY2lfcmVzb3VyY2VfbGVuKGdwdV9wZGV2LCAyKTsKKwlsZGV2
LSZndDt2cmFtX3N0YXJ0ID0gKHUzMilhcGVyX2Jhc2U7CisJbGRldi0mZ3Q7dnJhbV9zaXplID0g
KHUzMilhcGVyX3NpemU7CisKKwlpZiAoIWRldm1fcmVxdWVzdF9tZW1fcmVnaW9uKGxkZXYtJmd0
O2Rldi0mZ3Q7ZGV2LCBsZGV2LSZndDt2cmFtX3N0YXJ0LAorCQkJCSAgICAgbGRldi0mZ3Q7dnJh
bV9zaXplLCAibG9vbmdzb25fdnJhbSIpKSB7CisJCURSTV9FUlJPUigiQ2FuJ3QgcmVzZXJ2ZSBW
UkFNXG4iKTsKKwkJcmV0dXJuIC1FTlhJTzsKKwl9CisKKwkvKiBEQyBNRU0gKi8KKwltbWlvX2Jh
c2UgPSBwY2lfcmVzb3VyY2Vfc3RhcnQobGRldi0mZ3Q7ZGV2LSZndDtwZGV2LCAwKTsKKwltbWlv
X3NpemUgPSBwY2lfcmVzb3VyY2VfbGVuKGxkZXYtJmd0O2Rldi0mZ3Q7cGRldiwgMCk7CisJbGRl
di0mZ3Q7bW1pbyA9IGRldm1faW9yZW1hcChkZXYtJmd0O2RldiwgbW1pb19iYXNlLCBtbWlvX3Np
emUpOworCWlmICghbGRldi0mZ3Q7bW1pbykgeworCQlkcm1fZXJyKGRldiwgIkNhbm5vdCBtYXAg
bW1pbyByZWdpb25cbiIpOworCQlyZXR1cm4gLUVOT01FTTsKKwl9CisKKwlpZiAoIWRldm1fcmVx
dWVzdF9tZW1fcmVnaW9uKGxkZXYtJmd0O2Rldi0mZ3Q7ZGV2LCBtbWlvX2Jhc2UsCisJCQkJICAg
ICBtbWlvX3NpemUsICJsb29uZ3Nvbl9tbWlvIikpIHsKKwkJRFJNX0VSUk9SKCJDYW4ndCByZXNl
cnZlIG1taW8gcmVnaXN0ZXJzXG4iKTsKKwkJcmV0dXJuIC1FTk9NRU07CisJfQorCisJLyogREMg
SU8gKi8KKwlsZGV2LSZndDtpbyA9IGlvcmVtYXAoTFM3QV9DSElQQ0ZHX1JFR19CQVNFLCAweGYp
OworCWlmIChsZGV2LSZndDtpbyA9PSBOVUxMKQorCQlyZXR1cm4gLUVOT01FTTsKKworCURSTV9J
TkZPKCJEQyBtbWlvIGJhc2UgMHglbGx4IHNpemUgMHglbGx4IGlvIDB4JWxseFxuIiwKKwkJIG1t
aW9fYmFzZSwgbW1pb19zaXplLCAqKHU2NCAqKWxkZXYtJmd0O2lvKTsKKwlEUk1fSU5GTygiR1BV
IHZyYW0gc3RhcnQgPSAweCV4IHNpemUgPSAweCV4XG4iLAorCQkgbGRldi0mZ3Q7dnJhbV9zdGFy
dCwgbGRldi0mZ3Q7dnJhbV9zaXplKTsKKworCXJldHVybiAwOworfQorCitpbnQgbG9vbmdzb25f
bW9kZXNldF9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYpCit7CisJc3RydWN0IGRy
bV9lbmNvZGVyICplbmNvZGVyOworCXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3I7CisJ
aW50IGk7CisJdTMyIHJldDsKKworCWxkZXYtJmd0O2Rldi0mZ3Q7bW9kZV9jb25maWcuYWxsb3df
ZmJfbW9kaWZpZXJzID0gdHJ1ZTsKKworCWZvciAoaSA9IDA7IGkgJmx0OyAyOyBpKyspIHsKKwkJ
cmV0ID0gbG9vbmdzb25fY3J0Y19pbml0KGxkZXYsIGkpOworCQlpZiAocmV0KSB7CisJCQlEUk1f
V0FSTigibG9vbmdzb24gY3J0YyVkIGluaXQgZmFpbGVkXG4iLCBpKTsKKwkJCWNvbnRpbnVlOwor
CQl9CisKKwkJcmV0ID0gbG9vbmdzb25fZW5jb2Rlcl9pbml0KGxkZXYsIGkpOworCQlpZiAocmV0
KSB7CisJCQlEUk1fRVJST1IoImxvb25nc29uX2VuY29kZXJfaW5pdCBmYWlsZWRcbiIpOworCQkJ
cmV0dXJuIC0xOworCQl9CisKKwkJcmV0ID0gbG9vbmdzb25fY29ubmVjdG9yX2luaXQobGRldiwg
aSk7CisJCWlmIChyZXQpIHsKKwkJCURSTV9FUlJPUigibG9vbmdzb25fY29ubmVjdG9yX2luaXQg
ZmFpbGVkXG4iKTsKKwkJCXJldHVybiAtMTsKKwkJfQorCisJCWVuY29kZXIgPSAmYW1wO2xkZXYt
Jmd0O21vZGVfaW5mb1tpXS5lbmNvZGVyLSZndDtiYXNlOworCQljb25uZWN0b3IgPSAmYW1wO2xk
ZXYtJmd0O21vZGVfaW5mb1tpXS5jb25uZWN0b3ItJmd0O2Jhc2U7CisJCWRybV9jb25uZWN0b3Jf
YXR0YWNoX2VuY29kZXIoY29ubmVjdG9yLCBlbmNvZGVyKTsKKwkJbGRldi0mZ3Q7bnVtX2NydGMr
KzsKKwl9CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBsb29uZ3Nvbl9kcm1fbG9hZChz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1bnNpZ25lZCBsb25nIGZsYWdzKQoreworCXN0cnVjdCBs
b29uZ3Nvbl9kZXZpY2UgKmxkZXY7CisJaW50IHJldDsKKworCWxkZXYgPSBkZXZtX2t6YWxsb2Mo
ZGV2LSZndDtkZXYsIHNpemVvZigqbGRldiksIEdGUF9LRVJORUwpOworCWlmICghbGRldikKKwkJ
cmV0dXJuIC1FTk9NRU07CisKKwlkZXYtJmd0O2Rldl9wcml2YXRlID0gbGRldjsKKwlsZGV2LSZn
dDtkZXYgPSBkZXY7CisKKwlyZXQgPSBsb29uZ3Nvbl9kZXZpY2VfaW5pdChkZXYsIGZsYWdzKTsK
KwlpZiAocmV0KQorCQlnb3RvIGVycjsKKworCXJldCA9IGRybW1fdnJhbV9oZWxwZXJfaW5pdChk
ZXYsIGxkZXYtJmd0O3ZyYW1fc3RhcnQsIGxkZXYtJmd0O3ZyYW1fc2l6ZSk7CisJaWYgKHJldCkK
KwkJZ290byBlcnI7CisKKwlkcm1fbW9kZV9jb25maWdfaW5pdChkZXYpOworCWRldi0mZ3Q7bW9k
ZV9jb25maWcuZnVuY3MgPSAodm9pZCAqKSZhbXA7bG9vbmdzb25fbW9kZV9mdW5jczsKKwlkZXYt
Jmd0O21vZGVfY29uZmlnLm1pbl93aWR0aCA9IDE7CisJZGV2LSZndDttb2RlX2NvbmZpZy5taW5f
aGVpZ2h0ID0gMTsKKwlkZXYtJmd0O21vZGVfY29uZmlnLm1heF93aWR0aCA9IDQwOTY7CisJZGV2
LSZndDttb2RlX2NvbmZpZy5tYXhfaGVpZ2h0ID0gNDA5NjsKKwlkZXYtJmd0O21vZGVfY29uZmln
LnByZWZlcnJlZF9kZXB0aCA9IDMyOworCWRldi0mZ3Q7bW9kZV9jb25maWcucHJlZmVyX3NoYWRv
dyA9IDE7CisJZGV2LSZndDttb2RlX2NvbmZpZy5mYl9iYXNlID0gbGRldi0mZ3Q7dnJhbV9zdGFy
dDsKKworCXBjaV9zZXRfZHJ2ZGF0YShkZXYtJmd0O3BkZXYsIGRldik7CisKKwlyZXQgPSBsb29u
Z3Nvbl9tb2Rlc2V0X2luaXQobGRldik7CisJaWYgKHJldCkKKwkJZGV2X2VycihkZXYtJmd0O2Rl
diwgIkZhdGFsIGVycm9yIGR1cmluZyBtb2Rlc2V0IGluaXQ6ICVkXG4iLCByZXQpOworCisJZHJt
X2ttc19oZWxwZXJfcG9sbF9pbml0KGRldik7CisJZHJtX21vZGVfY29uZmlnX3Jlc2V0KGRldik7
CisKKwlyZXR1cm4gMDsKKworZXJyOgorCWRybV9lcnIoZGV2LCAiZmFpbGVkIHRvIGluaXRpYWxp
emUgZHJtIGRyaXZlcjogJWRcbiIsIHJldCk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZv
aWQgbG9vbmdzb25fZHJtX3VubG9hZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQoreworCWRybV92
cmFtX2hlbHBlcl9yZWxlYXNlX21tKGRldik7CisJZHJtX21vZGVfY29uZmlnX2NsZWFudXAoZGV2
KTsKKwlkZXYtJmd0O2Rldl9wcml2YXRlID0gTlVMTDsKKwlkZXZfc2V0X2RydmRhdGEoZGV2LSZn
dDtkZXYsIE5VTEwpOworfQorCitERUZJTkVfRFJNX0dFTV9GT1BTKGZvcHMpOworCitzdGF0aWMg
c3RydWN0IGRybV9kcml2ZXIgbG9vbmdzb25fZHJtX2RyaXZlciA9IHsKKwkuZHJpdmVyX2ZlYXR1
cmVzID0gRFJJVkVSX01PREVTRVQgfCBEUklWRVJfR0VNIHwgRFJJVkVSX0FUT01JQywKKwkuZm9w
cyA9ICZhbXA7Zm9wcywKKwlEUk1fR0VNX1ZSQU1fRFJJVkVSLAorCisJLm5hbWUgPSBEUklWRVJf
TkFNRSwKKwkuZGVzYyA9IERSSVZFUl9ERVNDLAorCS5kYXRlID0gRFJJVkVSX0RBVEUsCisJLm1h
am9yID0gRFJJVkVSX01BSk9SLAorCS5taW5vciA9IERSSVZFUl9NSU5PUiwKK307CisKK3N0YXRp
YyBpbnQgbG9vbmdzb25fcGNpX3Byb2JlKHN0cnVjdCBwY2lfZGV2ICpwZGV2LAorCQkJICAgICAg
Y29uc3Qgc3RydWN0IHBjaV9kZXZpY2VfaWQgKmVudCkKK3sKKwlpbnQgcmV0OworCXN0cnVjdCBk
cm1fZGV2aWNlICpkZXY7CisKKwlEUk1fSU5GTygiU3RhcnQgbG9vbmdzb24gZHJtIHByb2JlXG4i
KTsKKwlkZXYgPSBkcm1fZGV2X2FsbG9jKCZhbXA7bG9vbmdzb25fZHJtX2RyaXZlciwgJmFtcDtw
ZGV2LSZndDtkZXYpOworCWlmIChJU19FUlIoZGV2KSkgeworCQlEUk1fRVJST1IoImZhaWxlZCB0
byBhbGxvY2F0ZSBkcm1fZGV2aWNlXG4iKTsKKwkJcmV0dXJuIFBUUl9FUlIoZGV2KTsKKwl9CisK
KwlkZXYtJmd0O3BkZXYgPSBwZGV2OworCXBjaV9zZXRfZHJ2ZGF0YShwZGV2LCBkZXYpOworCisJ
cmV0ID0gcGNpX2VuYWJsZV9kZXZpY2UocGRldik7CisJaWYgKHJldCkgeworCQlkcm1fZXJyKGRl
diwgImZhaWxlZCB0byBlbmFibGUgcGNpIGRldmljZTogJWRcbiIsIHJldCk7CisJCWdvdG8gZXJy
X2ZyZWU7CisJfQorCisJcmV0ID0gbG9vbmdzb25fZHJtX2xvYWQoZGV2LCAweDApOworCWlmIChy
ZXQpIHsKKwkJZHJtX2VycihkZXYsICJmYWlsZWQgdG8gbG9hZCBsb29uZ3NvbjogJWRcbiIsIHJl
dCk7CisJCWdvdG8gZXJyX3BkZXY7CisJfQorCisJcmV0ID0gZHJtX2Rldl9yZWdpc3RlcihkZXYs
IDApOworCWlmIChyZXQpIHsKKwkJZHJtX2VycihkZXYsICJmYWlsZWQgdG8gcmVnaXN0ZXIgZHJ2
IGZvciB1c2Vyc3BhY2UgYWNjZXNzOiAlZFxuIiwKKwkJCXJldCk7CisJCWdvdG8gZXJyX3BkZXY7
CisJfQorCisJZHJtX2ZiZGV2X2dlbmVyaWNfc2V0dXAoZGV2LCBkZXYtJmd0O21vZGVfY29uZmln
LnByZWZlcnJlZF9kZXB0aCk7CisKKwlyZXR1cm4gMDsKKworZXJyX3BkZXY6CisJcGNpX2Rpc2Fi
bGVfZGV2aWNlKHBkZXYpOworZXJyX2ZyZWU6CisJZHJtX2Rldl9wdXQoZGV2KTsKKwlyZXR1cm4g
cmV0OworfQorCitzdGF0aWMgdm9pZCBsb29uZ3Nvbl9wY2lfcmVtb3ZlKHN0cnVjdCBwY2lfZGV2
ICpwZGV2KQoreworCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBwY2lfZ2V0X2RydmRhdGEocGRl
dik7CisKKwlkcm1fZGV2X3VucmVnaXN0ZXIoZGV2KTsKKwlsb29uZ3Nvbl9kcm1fdW5sb2FkKGRl
dik7CisJZHJtX2Rldl9wdXQoZGV2KTsKK30KKworc3RhdGljIHN0cnVjdCBwY2lfZGV2aWNlX2lk
IGxvb25nc29uX3BjaV9kZXZpY2VzW10gPSB7CisJeyBQQ0lfREVWSUNFKFBDSV9WRU5ET1JfSURf
TE9PTkdTT04sIFBDSV9ERVZJQ0VfSURfTE9PTkdTT05fREMpIH0sCisJezAsfQorfTsKKworc3Rh
dGljIHN0cnVjdCBwY2lfZHJpdmVyIGxvb25nc29uX2RybV9wY2lfZHJpdmVyID0geworCS5uYW1l
ID0gRFJJVkVSX05BTUUsCisJLmlkX3RhYmxlID0gbG9vbmdzb25fcGNpX2RldmljZXMsCisJLnBy
b2JlID0gbG9vbmdzb25fcGNpX3Byb2JlLAorCS5yZW1vdmUgPSBsb29uZ3Nvbl9wY2lfcmVtb3Zl
LAorfTsKKworc3RhdGljIGludCBfX2luaXQgbG9vbmdzb25fZHJtX2luaXQodm9pZCkKK3sKKwly
ZXR1cm4gcGNpX3JlZ2lzdGVyX2RyaXZlcigmYW1wO2xvb25nc29uX2RybV9wY2lfZHJpdmVyKTsK
K30KKworc3RhdGljIHZvaWQgX19leGl0IGxvb25nc29uX2RybV9leGl0KHZvaWQpCit7CisJcGNp
X3VucmVnaXN0ZXJfZHJpdmVyKCZhbXA7bG9vbmdzb25fZHJtX3BjaV9kcml2ZXIpOworfQorCitt
b2R1bGVfaW5pdChsb29uZ3Nvbl9kcm1faW5pdCk7Cittb2R1bGVfZXhpdChsb29uZ3Nvbl9kcm1f
ZXhpdCk7CisKK01PRFVMRV9BVVRIT1IoRFJJVkVSX0FVVEhPUik7CitNT0RVTEVfREVTQ1JJUFRJ
T04oRFJJVkVSX0RFU0MpOworTU9EVUxFX0xJQ0VOU0UoIkdQTCB2MiIpOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Rydi5oIGIvZHJpdmVycy9ncHUvZHJt
L2xvb25nc29uL2xvb25nc29uX2Rydi5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAwMDAwMC4uNDk4ZDFiMDgyYTE5Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2xvb25nc29uL2xvb25nc29uX2Rydi5oCkBAIC0wLDAgKzEsMTM5IEBACisvKiBTUERYLUxpY2Vu
c2UtSWRlbnRpZmllcjogR1BMLTIuMC1vbmx5ICovCisKKyNpZm5kZWYgX19MT09OR1NPTl9EUlZf
SF9fCisjZGVmaW5lIF9fTE9PTkdTT05fRFJWX0hfXworCisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9k
cnYuaCZndDsKKyNpbmNsdWRlICZsdDtkcm0vZHJtX2dlbS5oJmd0OworI2luY2x1ZGUgJmx0O2Ry
bS9kcm1fZmJfaGVscGVyLmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9mb3VyY2MuaCZndDsK
KyNpbmNsdWRlICZsdDtkcm0vZHJtX3Byb2JlX2hlbHBlci5oJmd0OworI2luY2x1ZGUgJmx0O2Ry
bS9kcm1fYXRvbWljLmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9hdG9taWNfaGVscGVyLmgm
Z3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9nZW1fZnJhbWVidWZmZXJfaGVscGVyLmgmZ3Q7Cisj
aW5jbHVkZSAmbHQ7ZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuaCZndDsKKyNpbmNsdWRlICZsdDtk
cm0vZHJtX3BsYW5lLmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9wbGFuZV9oZWxwZXIuaCZn
dDsKKyNpbmNsdWRlICZsdDtkcm0vZHJtX2NydGMuaCZndDsKKyNpbmNsdWRlICZsdDtkcm0vZHJt
X2NydGNfaGVscGVyLmgmZ3Q7CisjaW5jbHVkZSAmbHQ7ZHJtL2RybV9jb25uZWN0b3IuaCZndDsK
KyNpbmNsdWRlICZsdDtkcm0vZHJtX2VuY29kZXIuaCZndDsKKworLyogR2VuZXJhbCBjdXN0b21p
emF0aW9uOgorICovCisjZGVmaW5lIERSSVZFUl9BVVRIT1IgIkxvb25nc29uIGdyYXBoaWNzIGRy
aXZlciB0ZWFtIgorI2RlZmluZSBEUklWRVJfTkFNRSAibG9vbmdzb24tZHJtIgorI2RlZmluZSBE
UklWRVJfREVTQyAiTG9vbmdzb24gTFM3QSBEUk0gZHJpdmVyIgorI2RlZmluZSBEUklWRVJfREFU
RSAiMjAyMDA5MTUiCisKKyNkZWZpbmUgdG9fbG9vbmdzb25fY3J0Yyh4KSBjb250YWluZXJfb2Yo
eCwgc3RydWN0IGxvb25nc29uX2NydGMsIGJhc2UpCisjZGVmaW5lIHRvX2xvb25nc29uX2VuY29k
ZXIoeCkgY29udGFpbmVyX29mKHgsIHN0cnVjdCBsb29uZ3Nvbl9lbmNvZGVyLCBiYXNlKQorCisj
ZGVmaW5lIExTN0FfQ0hJUENGR19SRUdfQkFTRSAoMHgxMDAxMDAwMCkKKyNkZWZpbmUgUENJX0RF
VklDRV9JRF9MT09OR1NPTl9EQyAweDdhMDYKKyNkZWZpbmUgUENJX0RFVklDRV9JRF9MT09OR1NP
Tl9HUFUgMHg3YTE1CisjZGVmaW5lIExTN0FfUElYX1BMTCAoMHgwNGIwKQorI2RlZmluZSBSRUdf
T0ZGU0VUICgweDEwKQorI2RlZmluZSBGQl9DRkdfUkVHICgweDEyNDApCisjZGVmaW5lIEZCX0FE
RFIwX1JFRyAoMHgxMjYwKQorI2RlZmluZSBGQl9BRERSMV9SRUcgKDB4MTU4MCkKKyNkZWZpbmUg
RkJfU1RSSV9SRUcgKDB4MTI4MCkKKyNkZWZpbmUgRkJfRElUQ0ZHX1JFRyAoMHgxMzYwKQorI2Rl
ZmluZSBGQl9ESVRUQUJfTE9fUkVHICgweDEzODApCisjZGVmaW5lIEZCX0RJVFRBQl9ISV9SRUcg
KDB4MTNhMCkKKyNkZWZpbmUgRkJfUEFOQ0ZHX1JFRyAoMHgxM2MwKQorI2RlZmluZSBGQl9QQU5U
SU1fUkVHICgweDEzZTApCisjZGVmaW5lIEZCX0hESVNQTEFZX1JFRyAoMHgxNDAwKQorI2RlZmlu
ZSBGQl9IU1lOQ19SRUcgKDB4MTQyMCkKKyNkZWZpbmUgRkJfVkRJU1BMQVlfUkVHICgweDE0ODAp
CisjZGVmaW5lIEZCX1ZTWU5DX1JFRyAoMHgxNGEwKQorCisjZGVmaW5lIENGR19GTVQgR0VOTUFT
SygyLCAwKQorI2RlZmluZSBDRkdfRkJTV0lUQ0ggQklUKDcpCisjZGVmaW5lIENGR19FTkFCTEUg
QklUKDgpCisjZGVmaW5lIENGR19GQk5VTSBCSVQoMTEpCisjZGVmaW5lIENGR19HQU1NQVIgQklU
KDEyKQorI2RlZmluZSBDRkdfUkVTRVQgQklUKDIwKQorCisjZGVmaW5lIEZCX1BBTkNGR19ERUYg
MHg4MDAwMTMxMQorI2RlZmluZSBGQl9IU1lOQ19QVUxTRSAoMSAmbHQ7Jmx0OyAzMCkKKyNkZWZp
bmUgRkJfVlNZTkNfUFVMU0UgKDEgJmx0OyZsdDsgMzApCisKKy8qIFBJWCBQTEwgKi8KKyNkZWZp
bmUgTE9PUENfTUlOIDI0CisjZGVmaW5lIExPT1BDX01BWCAxNjEKKyNkZWZpbmUgRlJFX1JFRl9N
SU4gMTIKKyNkZWZpbmUgRlJFX1JFRl9NQVggMzIKKyNkZWZpbmUgRElWX1JFRl9NSU4gMworI2Rl
ZmluZSBESVZfUkVGX01BWCA1CisjZGVmaW5lIFBTVF9ESVZfTUFYIDY0CisKK3N0cnVjdCBwaXhf
cGxsIHsKKwl1MzIgbDJfZGl2OworCXUzMiBsMV9sb29wYzsKKwl1MzIgbDFfZnJlZmM7Cit9Owor
CitzdHJ1Y3QgbG9vbmdzb25fY3J0YyB7CisJc3RydWN0IGRybV9jcnRjIGJhc2U7CisJc3RydWN0
IGxvb25nc29uX2RldmljZSAqbGRldjsKKwl1MzIgY3J0Y19pZDsKKwl1MzIgcmVnX29mZnNldDsK
Kwl1MzIgY2ZnX3JlZzsKKwlzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZTsKK307CisKK3N0cnVjdCBs
b29uZ3Nvbl9lbmNvZGVyIHsKKwlzdHJ1Y3QgZHJtX2VuY29kZXIgYmFzZTsKKwlzdHJ1Y3QgbG9v
bmdzb25fZGV2aWNlICpsZGV2OworCXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0YzsKK307CisK
K3N0cnVjdCBsb29uZ3Nvbl9jb25uZWN0b3IgeworCXN0cnVjdCBkcm1fY29ubmVjdG9yIGJhc2U7
CisJc3RydWN0IGxvb25nc29uX2RldmljZSAqbGRldjsKKwl1MTYgaWQ7CisJdTMyIHR5cGU7Cit9
OworCitzdHJ1Y3QgbG9vbmdzb25fbW9kZV9pbmZvIHsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNl
ICpsZGV2OworCXN0cnVjdCBsb29uZ3Nvbl9jcnRjICpjcnRjOworCXN0cnVjdCBsb29uZ3Nvbl9l
bmNvZGVyICplbmNvZGVyOworCXN0cnVjdCBsb29uZ3Nvbl9jb25uZWN0b3IgKmNvbm5lY3RvcjsK
K307CisKK3N0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgeworCXN0cnVjdCBkcm1fZGV2aWNlICpkZXY7
CisJc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlOworCisJdm9pZCBfX2lvbWVtICptbWlv
OworCXZvaWQgX19pb21lbSAqaW87CisJdTMyIHZyYW1fc3RhcnQ7CisJdTMyIHZyYW1fc2l6ZTsK
KworCXUzMiBudW1fY3J0YzsKKwlzdHJ1Y3QgbG9vbmdzb25fbW9kZV9pbmZvIG1vZGVfaW5mb1sy
XTsKKwlzdHJ1Y3QgcGNpX2RldiAqZ3B1X3BkZXY7IC8qIExTN0EgZ3B1IGRldmljZSBpbmZvICov
Cit9OworCisvKiBjcnRjICovCitpbnQgbG9vbmdzb25fY3J0Y19pbml0KHN0cnVjdCBsb29uZ3Nv
bl9kZXZpY2UgKmxkZXYsIGludCBpbmRleCk7CisKKy8qIGNvbm5lY3RvciAqLworaW50IGxvb25n
c29uX2Nvbm5lY3Rvcl9pbml0KHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYsIGludCBpbmRl
eCk7CisKKy8qIGVuY29kZXIgKi8KK2ludCBsb29uZ3Nvbl9lbmNvZGVyX2luaXQoc3RydWN0IGxv
b25nc29uX2RldmljZSAqbGRldiwgaW50IGluZGV4KTsKKworLyogcGxhbmUgKi8KK2ludCBsb29u
Z3Nvbl9wbGFuZV9pbml0KHN0cnVjdCBsb29uZ3Nvbl9jcnRjICpsY3J0Yyk7CisKKy8qIGRldmlj
ZSAqLwordTMyIGxvb25nc29uX2dwdV9vZmZzZXQoc3RydWN0IGRybV9wbGFuZV9zdGF0ZSAqc3Rh
dGUpOwordTMyIGxzN2FfbW1fcnJlZyhzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2LCB1MzIg
b2Zmc2V0KTsKK3ZvaWQgbHM3YV9tbV93cmVnKHN0cnVjdCBsb29uZ3Nvbl9kZXZpY2UgKmxkZXYs
IHUzMiBvZmZzZXQsIHUzMiB2YWwpOwordTMyIGxzN2FfaW9fcnJlZyhzdHJ1Y3QgbG9vbmdzb25f
ZGV2aWNlICpsZGV2LCB1MzIgb2Zmc2V0KTsKK3ZvaWQgbHM3YV9pb193cmVnKHN0cnVjdCBsb29u
Z3Nvbl9kZXZpY2UgKmxkZXYsIHUzMiBvZmZzZXQsIHUzMiB2YWwpOworCisjZW5kaWYgLyogX19M
T09OR1NPTl9EUlZfSF9fICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24v
bG9vbmdzb25fZW5jb2Rlci5jIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25nc29uX2Vu
Y29kZXIuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjIwMDJjZWUw
MDMwMwotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9sb29uZ3Nvbi9sb29uZ3Nv
bl9lbmNvZGVyLmMKQEAgLTAsMCArMSwzNyBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6
IEdQTC0yLjAtb3ItbGF0ZXIKKworI2luY2x1ZGUgImxvb25nc29uX2Rydi5oIgorCitzdGF0aWMg
dm9pZCBsb29uZ3Nvbl9lbmNvZGVyX2Rlc3Ryb3koc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVy
KQoreworCXN0cnVjdCBsb29uZ3Nvbl9lbmNvZGVyICpsZW5jb2RlciA9IHRvX2xvb25nc29uX2Vu
Y29kZXIoZW5jb2Rlcik7CisKKwlkcm1fZW5jb2Rlcl9jbGVhbnVwKGVuY29kZXIpOworCWtmcmVl
KGxlbmNvZGVyKTsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZW5jb2Rlcl9mdW5jcyBs
b29uZ3Nvbl9lbmNvZGVyX2Z1bmNzID0geworCS5kZXN0cm95ID0gbG9vbmdzb25fZW5jb2Rlcl9k
ZXN0cm95LAorfTsKKworaW50IGxvb25nc29uX2VuY29kZXJfaW5pdChzdHJ1Y3QgbG9vbmdzb25f
ZGV2aWNlICpsZGV2LCBpbnQgaW5kZXgpCit7CisJc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVy
OworCXN0cnVjdCBsb29uZ3Nvbl9lbmNvZGVyICpsZW5jb2RlcjsKKworCWxlbmNvZGVyID0ga3ph
bGxvYyhzaXplb2Yoc3RydWN0IGxvb25nc29uX2VuY29kZXIpLCBHRlBfS0VSTkVMKTsKKwlpZiAo
IWxlbmNvZGVyKQorCQlyZXR1cm4gLTE7CisKKwlsZW5jb2Rlci0mZ3Q7bGNydGMgPSBsZGV2LSZn
dDttb2RlX2luZm9baW5kZXhdLmNydGM7CisJbGVuY29kZXItJmd0O2xkZXYgPSBsZGV2OworCWVu
Y29kZXIgPSAmYW1wO2xlbmNvZGVyLSZndDtiYXNlOworCWVuY29kZXItJmd0O3Bvc3NpYmxlX2Ny
dGNzID0gMSAmbHQ7Jmx0OyBpbmRleDsKKworCWRybV9lbmNvZGVyX2luaXQobGRldi0mZ3Q7ZGV2
LCBlbmNvZGVyLCAmYW1wO2xvb25nc29uX2VuY29kZXJfZnVuY3MsCisJCQkgRFJNX01PREVfRU5D
T0RFUl9EQUMsIE5VTEwpOworCisJbGRldi0mZ3Q7bW9kZV9pbmZvW2luZGV4XS5lbmNvZGVyID0g
bGVuY29kZXI7CisKKwlyZXR1cm4gMDsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9s
b29uZ3Nvbi9sb29uZ3Nvbl9wbGFuZS5jIGIvZHJpdmVycy9ncHUvZHJtL2xvb25nc29uL2xvb25n
c29uX3BsYW5lLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5iOGMy
NDdkMWNlMDkKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbG9vbmdzb24vbG9v
bmdzb25fcGxhbmUuYwpAQCAtMCwwICsxLDEwMiBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZp
ZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKworI2luY2x1ZGUgImxvb25nc29uX2Rydi5oIgorCitzdGF0
aWMgdm9pZCBsb29uZ3Nvbl9wbGFuZV9hdG9taWNfdXBkYXRlKHN0cnVjdCBkcm1fcGxhbmUgKnBs
YW5lLAorCQkJCQkgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQoreworCXN0cnVjdCBs
b29uZ3Nvbl9jcnRjICpsY3J0YzsKKwlzdHJ1Y3QgbG9vbmdzb25fZGV2aWNlICpsZGV2OworCXN0
cnVjdCBkcm1fcGxhbmVfc3RhdGUgKmxzdGF0ZSA9IHBsYW5lLSZndDtzdGF0ZTsKKwl1MzIgZ3B1
X2FkZHIgPSAwOworCXUzMiBmYl9hZGRyID0gMDsKKwl1MzIgcmVnX3ZhbCA9IDA7CisJdTMyIHJl
Z19vZmZzZXQ7CisJdTMyIHBpdGNoOworCXU4IGRlcHRoOworCXUzMiB4LCB5OworCisJaWYgKCFs
c3RhdGUtJmd0O2NydGMgfHwgIWxzdGF0ZS0mZ3Q7ZmIpCisJCXJldHVybjsKKworCXBpdGNoID0g
bHN0YXRlLSZndDtmYi0mZ3Q7cGl0Y2hlc1swXTsKKwlsY3J0YyA9IHRvX2xvb25nc29uX2NydGMo
bHN0YXRlLSZndDtjcnRjKTsKKwlsZGV2ID0gbGNydGMtJmd0O2xkZXY7CisJcmVnX29mZnNldCA9
IGxjcnRjLSZndDtyZWdfb2Zmc2V0OworCXggPSBsc3RhdGUtJmd0O2NydGMtJmd0O3g7CisJeSA9
IGxzdGF0ZS0mZ3Q7Y3J0Yy0mZ3Q7eTsKKwlkZXB0aCA9IGxzdGF0ZS0mZ3Q7ZmItJmd0O2Zvcm1h
dC0mZ3Q7Y3BwWzBdICZsdDsmbHQ7IDM7CisKKwlncHVfYWRkciA9IGxvb25nc29uX2dwdV9vZmZz
ZXQobHN0YXRlKTsKKwlyZWdfdmFsID0gKHBpdGNoICsgMjU1KSAmYW1wOyB+MjU1OworCWxzN2Ff
bW1fd3JlZyhsZGV2LCBGQl9TVFJJX1JFRyArIHJlZ19vZmZzZXQsIHJlZ192YWwpOworCisJc3dp
dGNoIChkZXB0aCkgeworCWNhc2UgMTIgLi4uIDE2OgorCQlmYl9hZGRyID0gZ3B1X2FkZHIgKyB5
ICogcGl0Y2ggKyBBTElHTih4LCA2NCkgKiAyOworCQlicmVhazsKKwljYXNlIDI0IC4uLiAzMjoK
KwlkZWZhdWx0OgorCQlmYl9hZGRyID0gZ3B1X2FkZHIgKyB5ICogcGl0Y2ggKyBBTElHTih4LCA2
NCkgKiA0OworCQlicmVhazsKKwl9CisKKwlsczdhX21tX3dyZWcobGRldiwgRkJfQUREUjBfUkVH
ICsgcmVnX29mZnNldCwgZmJfYWRkcik7CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0FERFIxX1JF
RyArIHJlZ19vZmZzZXQsIGZiX2FkZHIpOworCXJlZ192YWwgPSBsY3J0Yy0mZ3Q7Y2ZnX3JlZyB8
IENGR19FTkFCTEU7CisJbHM3YV9tbV93cmVnKGxkZXYsIEZCX0NGR19SRUcgKyByZWdfb2Zmc2V0
LCByZWdfdmFsKTsKK30KKworc3RhdGljIGNvbnN0IHVpbnQzMl90IGxvb25nc29uX2Zvcm1hdHNb
XSA9IHsKKwlEUk1fRk9STUFUX1JHQjU2NSwKKwlEUk1fRk9STUFUX1JHQjg4OCwKKwlEUk1fRk9S
TUFUX1hSR0I4ODg4LAorCURSTV9GT1JNQVRfQVJHQjg4ODgsCit9OworCitzdGF0aWMgY29uc3Qg
dWludDY0X3QgbG9vbmdzb25fZm9ybWF0X21vZGlmaWVyc1tdID0geyBEUk1fRk9STUFUX01PRF9M
SU5FQVIsCisJCQkJCQkgICAgICBEUk1fRk9STUFUX01PRF9JTlZBTElEIH07CisKK3N0YXRpYyBj
b25zdCBzdHJ1Y3QgZHJtX3BsYW5lX2Z1bmNzIGxvb25nc29uX3BsYW5lX2Z1bmNzID0geworCS5h
dG9taWNfZHVwbGljYXRlX3N0YXRlID0gZHJtX2F0b21pY19oZWxwZXJfcGxhbmVfZHVwbGljYXRl
X3N0YXRlLAorCS5hdG9taWNfZGVzdHJveV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX3BsYW5l
X2Rlc3Ryb3lfc3RhdGUsCisJLmRlc3Ryb3kgPSBkcm1fcGxhbmVfY2xlYW51cCwKKwkuZGlzYWJs
ZV9wbGFuZSA9IGRybV9hdG9taWNfaGVscGVyX2Rpc2FibGVfcGxhbmUsCisJLnJlc2V0ID0gZHJt
X2F0b21pY19oZWxwZXJfcGxhbmVfcmVzZXQsCisJLnVwZGF0ZV9wbGFuZSA9IGRybV9hdG9taWNf
aGVscGVyX3VwZGF0ZV9wbGFuZSwKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3BsYW5l
X2hlbHBlcl9mdW5jcyBsb29uZ3Nvbl9wbGFuZV9oZWxwZXJfZnVuY3MgPSB7CisJLnByZXBhcmVf
ZmIJPSBkcm1fZ2VtX3ZyYW1fcGxhbmVfaGVscGVyX3ByZXBhcmVfZmIsCisJLmNsZWFudXBfZmIJ
PSBkcm1fZ2VtX3ZyYW1fcGxhbmVfaGVscGVyX2NsZWFudXBfZmIsCisJLmF0b21pY191cGRhdGUg
PSBsb29uZ3Nvbl9wbGFuZV9hdG9taWNfdXBkYXRlLAorfTsKKworaW50IGxvb25nc29uX3BsYW5l
X2luaXQoc3RydWN0IGxvb25nc29uX2NydGMgKmxjcnRjKQoreworCXN0cnVjdCBsb29uZ3Nvbl9k
ZXZpY2UgKmxkZXY7CisJaW50IGNydGNfaWQ7CisJaW50IHJldDsKKworCWxkZXYgPSBsY3J0Yy0m
Z3Q7bGRldjsKKwljcnRjX2lkID0gbGNydGMtJmd0O2NydGNfaWQ7CisKKwlsY3J0Yy0mZ3Q7cGxh
bmUgPSBkZXZtX2t6YWxsb2MobGRldi0mZ3Q7ZGV2LSZndDtkZXYsIHNpemVvZigqbGNydGMtJmd0
O3BsYW5lKSwKKwkJCQkgICAgR0ZQX0tFUk5FTCk7CisJaWYgKCFsY3J0Yy0mZ3Q7cGxhbmUpCisJ
CXJldHVybiAtRU5PTUVNOworCisJcmV0ID0gZHJtX3VuaXZlcnNhbF9wbGFuZV9pbml0KGxkZXYt
Jmd0O2RldiwgbGNydGMtJmd0O3BsYW5lLCBCSVQoY3J0Y19pZCksCisJCQkJICAgICAgICZhbXA7
bG9vbmdzb25fcGxhbmVfZnVuY3MsIGxvb25nc29uX2Zvcm1hdHMsCisJCQkJICAgICAgIEFSUkFZ
X1NJWkUobG9vbmdzb25fZm9ybWF0cyksCisJCQkJICAgICAgIGxvb25nc29uX2Zvcm1hdF9tb2Rp
ZmllcnMsCisJCQkJICAgICAgIERSTV9QTEFORV9UWVBFX1BSSU1BUlksIE5VTEwpOworCWlmIChy
ZXQpIHsKKwkJRFJNX0VSUk9SKCJmYWlsIHRvIGluaXQgcGxhbmVkIGNydGMgJWRcbiIsIGNydGNf
aWQpOworCQlyZXR1cm4gcmV0OworCX0KKworCWRybV9wbGFuZV9oZWxwZXJfYWRkKGxjcnRjLSZn
dDtwbGFuZSwgJmFtcDtsb29uZ3Nvbl9wbGFuZV9oZWxwZXJfZnVuY3MpOworCisJcmV0dXJuIDA7
Cit9Ci0tIAoyLjMxLjE8L3ByZT48L2Rpdj48YnI+PGJyPjxzcGFuIHRpdGxlPSJuZXRlYXNlZm9v
dGVyIj48cD4mbmJzcDs8L3A+PC9zcGFuPg==
------=_Part_15229_1624407887.1620956127709--

