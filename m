Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0E21EFAEB3
	for <lists+dri-devel@lfdr.de>; Wed, 13 Nov 2019 11:43:18 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 901D76EBB7;
	Wed, 13 Nov 2019 10:43:15 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DEA906EBB7
 for <dri-devel@lists.freedesktop.org>; Wed, 13 Nov 2019 10:43:13 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 8E4ECB2D5;
 Wed, 13 Nov 2019 10:43:11 +0000 (UTC)
Received: by quack2.suse.cz (Postfix, from userid 1000)
 id 7E7151E1498; Wed, 13 Nov 2019 11:43:08 +0100 (CET)
Date: Wed, 13 Nov 2019 11:43:08 +0100
From: Jan Kara <jack@suse.cz>
To: John Hubbard <jhubbard@nvidia.com>
Subject: Re: [PATCH v4 09/23] mm/gup: introduce pin_user_pages*() and FOLL_PIN
Message-ID: <20191113104308.GE6367@quack2.suse.cz>
References: <20191113042710.3997854-1-jhubbard@nvidia.com>
 <20191113042710.3997854-10-jhubbard@nvidia.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191113042710.3997854-10-jhubbard@nvidia.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Michal Hocko <mhocko@suse.com>, Jan Kara <jack@suse.cz>,
 kvm@vger.kernel.org, linux-doc@vger.kernel.org,
 David Airlie <airlied@linux.ie>, Dave Chinner <david@fromorbit.com>,
 dri-devel@lists.freedesktop.org, LKML <linux-kernel@vger.kernel.org>,
 linux-mm@kvack.org, Paul Mackerras <paulus@samba.org>,
 linux-kselftest@vger.kernel.org, Ira Weiny <ira.weiny@intel.com>,
 Jonathan Corbet <corbet@lwn.net>, linux-rdma@vger.kernel.org,
 Michael Ellerman <mpe@ellerman.id.au>, Mike Rapoport <rppt@linux.ibm.com>,
 Christoph Hellwig <hch@infradead.org>, Jason Gunthorpe <jgg@ziepe.ca>,
 Vlastimil Babka <vbabka@suse.cz>,
 =?iso-8859-1?Q?Bj=F6rn_T=F6pel?= <bjorn.topel@intel.com>,
 linux-media@vger.kernel.org, Shuah Khan <shuah@kernel.org>,
 linux-block@vger.kernel.org,
 =?iso-8859-1?B?Suly9G1l?= Glisse <jglisse@redhat.com>,
 Al Viro <viro@zeniv.linux.org.uk>, Dan Williams <dan.j.williams@intel.com>,
 Mauro Carvalho Chehab <mchehab@kernel.org>, bpf@vger.kernel.org,
 Magnus Karlsson <magnus.karlsson@intel.com>, Jens Axboe <axboe@kernel.dk>,
 netdev@vger.kernel.org, Alex Williamson <alex.williamson@redhat.com>,
 linux-fsdevel@vger.kernel.org, Andrew Morton <akpm@linux-foundation.org>,
 linuxppc-dev@lists.ozlabs.org, "David S . Miller" <davem@davemloft.net>,
 Mike Kravetz <mike.kravetz@oracle.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlIDEyLTExLTE5IDIwOjI2OjU2LCBKb2huIEh1YmJhcmQgd3JvdGU6Cj4gSW50cm9kdWNl
IHBpbl91c2VyX3BhZ2VzKigpIHZhcmlhdGlvbnMgb2YgZ2V0X3VzZXJfcGFnZXMqKCkgY2FsbHMs
Cj4gYW5kIGFsc28gcGluX2xvbmd0ZXJtX3BhZ2VzKigpIHZhcmlhdGlvbnMuCj4gCj4gVGhlc2Ug
dmFyaWFudHMgYWxsIHNldCBGT0xMX1BJTiwgd2hpY2ggaXMgYWxzbyBpbnRyb2R1Y2VkLCBhbmQK
PiB0aG9yb3VnaGx5IGRvY3VtZW50ZWQuCj4gCj4gVGhlIHBpbl9sb25ndGVybSooKSB2YXJpYW50
cyBhbHNvIHNldCBGT0xMX0xPTkdURVJNLCBpbiBhZGRpdGlvbgo+IHRvIEZPTExfUElOOgo+IAo+
ICAgICBwaW5fdXNlcl9wYWdlcygpCj4gICAgIHBpbl91c2VyX3BhZ2VzX3JlbW90ZSgpCj4gICAg
IHBpbl91c2VyX3BhZ2VzX2Zhc3QoKQo+IAo+ICAgICBwaW5fbG9uZ3Rlcm1fcGFnZXMoKQo+ICAg
ICBwaW5fbG9uZ3Rlcm1fcGFnZXNfcmVtb3RlKCkKPiAgICAgcGluX2xvbmd0ZXJtX3BhZ2VzX2Zh
c3QoKQo+IAo+IEFsbCBwYWdlcyB0aGF0IGFyZSBwaW5uZWQgdmlhIHRoZSBhYm92ZSBjYWxscywg
bXVzdCBiZSB1bnBpbm5lZCB2aWEKPiBwdXRfdXNlcl9wYWdlKCkuCj4gCj4gVGhlIHVuZGVybHlp
bmcgcnVsZXMgYXJlOgo+IAo+ICogVGhlc2UgYXJlIGd1cC1pbnRlcm5hbCBmbGFncywgc28gdGhl
IGNhbGwgc2l0ZXMgc2hvdWxkIG5vdCBkaXJlY3RseQo+IHNldCBGT0xMX1BJTiBub3IgRk9MTF9M
T05HVEVSTS4gVGhhdCBiZWhhdmlvciBpcyBlbmZvcmNlZCB3aXRoCj4gYXNzZXJ0aW9ucywgZm9y
IHRoZSBuZXcgRk9MTF9QSU4gZmxhZy4gSG93ZXZlciwgZm9yIHRoZSBwcmUtZXhpc3RpbmcKPiBG
T0xMX0xPTkdURVJNIGZsYWcsIHdoaWNoIGhhcyBzb21lIGNhbGwgc2l0ZXMgdGhhdCBzdGlsbCBk
aXJlY3RseQo+IHNldCBGT0xMX0xPTkdURVJNLCB0aGVyZSBpcyBubyBhc3NlcnRpb24geWV0Lgo+
IAo+ICogQ2FsbCBzaXRlcyB0aGF0IHdhbnQgdG8gaW5kaWNhdGUgdGhhdCB0aGV5IGFyZSBnb2lu
ZyB0byBkbyBEaXJlY3RJTwo+ICAgKCJESU8iKSBvciBzb21ldGhpbmcgd2l0aCBzaW1pbGFyIGNo
YXJhY3RlcmlzdGljcywgc2hvdWxkIGNhbGwgYQo+ICAgZ2V0X3VzZXJfcGFnZXMoKS1saWtlIHdy
YXBwZXIgY2FsbCB0aGF0IHNldHMgRk9MTF9QSU4uIFRoZXNlIHdyYXBwZXJzCj4gICB3aWxsOgo+
ICAgICAgICAgKiBTdGFydCB3aXRoICJwaW5fdXNlcl9wYWdlcyIgaW5zdGVhZCBvZiAiZ2V0X3Vz
ZXJfcGFnZXMiLiBUaGF0Cj4gICAgICAgICAgIG1ha2VzIGl0IGVhc3kgdG8gZmluZCBhbmQgYXVk
aXQgdGhlIGNhbGwgc2l0ZXMuCj4gICAgICAgICAqIFNldCBGT0xMX1BJTgo+IAo+ICogRm9yIHBh
Z2VzIHRoYXQgYXJlIHJlY2VpdmVkIHZpYSBGT0xMX1BJTiwgdGhvc2UgcGFnZXMgbXVzdCBiZSBy
ZXR1cm5lZAo+ICAgdmlhIHB1dF91c2VyX3BhZ2UoKS4KPiAKPiBUaGFua3MgdG8gSmFuIEthcmEg
YW5kIFZsYXN0aW1pbCBCYWJrYSBmb3IgZXhwbGFpbmluZyB0aGUgNCBjYXNlcwo+IGluIHRoaXMg
ZG9jdW1lbnRhdGlvbi4gKEkndmUgcmV3b3JkZWQgaXQgYW5kIGV4cGFuZGVkIHVwb24gaXQuKQo+
IAo+IFJldmlld2VkLWJ5OiBNaWtlIFJhcG9wb3J0IDxycHB0QGxpbnV4LmlibS5jb20+ICAjIERv
Y3VtZW50YXRpb24KPiBSZXZpZXdlZC1ieTogSsOpcsO0bWUgR2xpc3NlIDxqZ2xpc3NlQHJlZGhh
dC5jb20+Cj4gQ2M6IEpvbmF0aGFuIENvcmJldCA8Y29yYmV0QGx3bi5uZXQ+Cj4gQ2M6IElyYSBX
ZWlueSA8aXJhLndlaW55QGludGVsLmNvbT4KPiBTaWduZWQtb2ZmLWJ5OiBKb2huIEh1YmJhcmQg
PGpodWJiYXJkQG52aWRpYS5jb20+CgpUaGFua3MgZm9yIHRoZSBkb2N1bWVudGF0aW9uLiBJdCBs
b29rcyBncmVhdCEKCj4gZGlmZiAtLWdpdCBhL21tL2d1cC5jIGIvbW0vZ3VwLmMKPiBpbmRleCA4
MzcwMmIyZTg2YzguLjQ0MDllODRkZmY1MSAxMDA2NDQKPiAtLS0gYS9tbS9ndXAuYwo+ICsrKyBi
L21tL2d1cC5jCj4gQEAgLTIwMSw2ICsyMDEsMTAgQEAgc3RhdGljIHN0cnVjdCBwYWdlICpmb2xs
b3dfcGFnZV9wdGUoc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEsCj4gIAlzcGlubG9ja190ICpw
dGw7Cj4gIAlwdGVfdCAqcHRlcCwgcHRlOwo+ICAKPiArCS8qIEZPTExfR0VUIGFuZCBGT0xMX1BJ
TiBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlLiAqLwo+ICsJaWYgKFdBUk5fT05fT05DRSgoZmxhZ3Mg
JiAoRk9MTF9QSU4gfCBGT0xMX0dFVCkpID09Cj4gKwkJCSAoRk9MTF9QSU4gfCBGT0xMX0dFVCkp
KQo+ICsJCXJldHVybiBFUlJfUFRSKC1FSU5WQUwpOwo+ICByZXRyeToKPiAgCWlmICh1bmxpa2Vs
eShwbWRfYmFkKCpwbWQpKSkKPiAgCQlyZXR1cm4gbm9fcGFnZV90YWJsZSh2bWEsIGZsYWdzKTsK
CkhvdyBkb2VzIEZPTExfUElOIHJlc3VsdCBpbiBncmFiYmluZyAoYXQgbGVhc3Qgbm9ybWFsLCBm
b3Igbm93KSBwYWdlIHJlZmVyZW5jZT8KSSBkaWRuJ3QgZmluZCB0aGF0IGFueXdoZXJlIGluIHRo
aXMgcGF0Y2ggYnV0IGl0IGlzIGEgcHJlcmVxdWlzaXRlIHRvCmNvbnZlcnRpbmcgYW55IHVzZXIg
dG8gcGluX3VzZXJfcGFnZXMoKSBpbnRlcmZhY2UsIHJpZ2h0PwoKPiArLyoqCj4gKyAqIHBpbl91
c2VyX3BhZ2VzX2Zhc3QoKSAtIHBpbiB1c2VyIHBhZ2VzIGluIG1lbW9yeSB3aXRob3V0IHRha2lu
ZyBsb2Nrcwo+ICsgKgo+ICsgKiBOZWFybHkgdGhlIHNhbWUgYXMgZ2V0X3VzZXJfcGFnZXNfZmFz
dCgpLCBleGNlcHQgdGhhdCBGT0xMX1BJTiBpcyBzZXQuIFNlZQo+ICsgKiBnZXRfdXNlcl9wYWdl
c19mYXN0KCkgZm9yIGRvY3VtZW50YXRpb24gb24gdGhlIGZ1bmN0aW9uIGFyZ3VtZW50cywgYmVj
YXVzZQo+ICsgKiB0aGUgYXJndW1lbnRzIGhlcmUgYXJlIGlkZW50aWNhbC4KPiArICoKPiArICog
Rk9MTF9QSU4gbWVhbnMgdGhhdCB0aGUgcGFnZXMgbXVzdCBiZSByZWxlYXNlZCB2aWEgcHV0X3Vz
ZXJfcGFnZSgpLiBQbGVhc2UKPiArICogc2VlIERvY3VtZW50YXRpb24vdm0vcGluX3VzZXJfcGFn
ZXMucnN0IGZvciBmdXJ0aGVyIGRldGFpbHMuCj4gKyAqCj4gKyAqIFRoaXMgaXMgaW50ZW5kZWQg
Zm9yIENhc2UgMSAoRElPKSBpbiBEb2N1bWVudGF0aW9uL3ZtL3Bpbl91c2VyX3BhZ2VzLnJzdC4g
SXQKPiArICogaXMgTk9UIGludGVuZGVkIGZvciBDYXNlIDIgKFJETUE6IGxvbmctdGVybSBwaW5z
KS4KPiArICovCj4gK2ludCBwaW5fdXNlcl9wYWdlc19mYXN0KHVuc2lnbmVkIGxvbmcgc3RhcnQs
IGludCBucl9wYWdlcywKPiArCQkJdW5zaWduZWQgaW50IGd1cF9mbGFncywgc3RydWN0IHBhZ2Ug
KipwYWdlcykKPiArewo+ICsJLyogRk9MTF9HRVQgYW5kIEZPTExfUElOIGFyZSBtdXR1YWxseSBl
eGNsdXNpdmUuICovCj4gKwlpZiAoV0FSTl9PTl9PTkNFKGd1cF9mbGFncyAmIEZPTExfR0VUKSkK
PiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlndXBfZmxhZ3MgfD0gRk9MTF9QSU47Cj4gKwly
ZXR1cm4gaW50ZXJuYWxfZ2V0X3VzZXJfcGFnZXNfZmFzdChzdGFydCwgbnJfcGFnZXMsIGd1cF9m
bGFncywgcGFnZXMpOwo+ICt9Cj4gK0VYUE9SVF9TWU1CT0xfR1BMKHBpbl91c2VyX3BhZ2VzX2Zh
c3QpOwoKSSB3YXMgc29tZXdoYXQgd29uZGVyaW5nIGFib3V0IHRoZSBudW1iZXIgb2YgZnVuY3Rp
b25zIHlvdSBhZGQgaGVyZS4gU28gd2UKaGF2ZToKCnBpbl91c2VyX3BhZ2VzKCkKcGluX3VzZXJf
cGFnZXNfZmFzdCgpCnBpbl91c2VyX3BhZ2VzX3JlbW90ZSgpCgphbmQgdGhlbiBsb25ndGVybSB2
YXJpYW50czoKCnBpbl9sb25ndGVybV9wYWdlcygpCnBpbl9sb25ndGVybV9wYWdlc19mYXN0KCkK
cGluX2xvbmd0ZXJtX3BhZ2VzX3JlbW90ZSgpCgphbmQgb2J2aW91c2x5IHdlIGhhdmUgZ3VwIGxp
a2U6CmdldF91c2VyX3BhZ2VzKCkKZ2V0X3VzZXJfcGFnZXNfZmFzdCgpCmdldF91c2VyX3BhZ2Vz
X3JlbW90ZSgpCi4uLiBhbmQgc29tZSBvdGhlciBndXAgdmFyaWFudHMgLi4uCgpJIHRoaW5rIHdl
IHJlYWxseSBzaG91bGQgaGF2ZSBwaW5fKiB2cyBnZXRfKiB2YXJpYW50cyBhcyB0aGV5IGFyZSB2
ZXJ5CmRpZmZlcmVudCBpbiB0ZXJtcyBvZiBndWFyYW50ZWVzIGFuZCBhZnRlciBjb252ZXJzaW9u
LCBhbnkgdXNlIG9mIGdldF8qCnZhcmlhbnQgaW4gbm9uLW1tIGNvZGUgc2hvdWxkIGJlIGNsb3Nl
bHkgc2NydXRpbml6ZWQuIE9UT0ggcGluX2xvbmd0ZXJtXyoKZG9uJ3QgbG9vayAqdGhhdCogdXNl
ZnVsIHRvIG1lIGFuZCBqdXN0IHVzaW5nIHBpbl8qIGluc3RlYWQgd2l0aApGT0xMX0xPTkdURVJN
IGZsYWcgd291bGQgbG9vayBPSyB0byBtZSBhbmQgc29tZXdoYXQgcmVkdWNlIHRoZSBudW1iZXIg
b2YKZnVuY3Rpb25zIHdoaWNoIGlzIGFscmVhZHkgbGFyZ2UgZW5vdWdoPyBXaGF0IGRvIHBlb3Bs
ZSB0aGluaz8gSSBkb24ndCBmZWVsCnRvbyBzdHJvbmdseSBhYm91dCB0aGlzIGJ1dCB3YW50ZWQg
dG8gYnJpbmcgdGhpcyB1cC4KCgkJCQkJCQkJSG9uemEKCgoKLS0gCkphbiBLYXJhIDxqYWNrQHN1
c2UuY29tPgpTVVNFIExhYnMsIENSCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2RyaS1kZXZlbA==
