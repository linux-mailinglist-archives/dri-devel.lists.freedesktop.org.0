Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A56991645FA
	for <lists+dri-devel@lfdr.de>; Wed, 19 Feb 2020 14:50:22 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BBEB089301;
	Wed, 19 Feb 2020 13:50:18 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BB4C089301;
 Wed, 19 Feb 2020 13:50:16 +0000 (UTC)
Received: from pendragon.ideasonboard.com (81-175-216-236.bb.dnainternet.fi
 [81.175.216.236])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 2F7322F9;
 Wed, 19 Feb 2020 14:50:15 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=ideasonboard.com;
 s=mail; t=1582120215;
 bh=gcmYymOlIh24WxAdclbZEmNpBy9FQf1mn7kBfHS3XYY=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=rAUH0mPJ4XwKRI3CeYmZ7GkjbSg6634J1v0A3qXg99L2FeaGDXC7xwXTCBKg9NJ8z
 QCcAyWcTyst+rmist6+FgZt2VDCDulhMDpzqDwYYtAFaEUw1oMgOn1y3O6Pjvr4xB3
 cAovYSP6U7rKW1i4PaEm/yZeOXbWDAJ5RHFv6F9k=
Date: Wed, 19 Feb 2020 15:49:56 +0200
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Daniel Vetter <daniel.vetter@ffwll.ch>
Subject: Re: [PATCH 27/52] drm: Manage drm_mode_config_init with drmm_
Message-ID: <20200219134956.GG5070@pendragon.ideasonboard.com>
References: <20200219102122.1607365-1-daniel.vetter@ffwll.ch>
 <20200219102122.1607365-28-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20200219102122.1607365-28-daniel.vetter@ffwll.ch>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@intel.com>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Sam Ravnborg <sam@ravnborg.org>, Thomas Zimmermann <tzimmermann@suse.de>,
 DRI Development <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgRGFuaWVsLAoKVGhhbmsgeW91IGZvciB0aGUgcGF0Y2guCgpPbiBXZWQsIEZlYiAxOSwgMjAy
MCBhdCAxMToyMDo1N0FNICswMTAwLCBEYW5pZWwgVmV0dGVyIHdyb3RlOgo+IGRybV9tb2RlX2Nv
bmZpZ19jbGVhbnVwIGlzIGlkZW1wb3RlbnQsIHNvIG5vIGhhcm0gaW4gY2FsbGluZyB0aGlzCj4g
dHdpY2UuIFRoaXMgYWxsb3dzIHVzIHRvIGdyYWR1YWxseSBzd2l0Y2ggZHJpdmVycyBvdmVyIGJ5
IHJlbW92aW5nCj4gZXhwbGljaXQgZHJtX21vZGVfY29uZmlnX2NsZWFudXAgY2FsbHMuCj4gCj4g
V2l0aCB0aGlzIHN0ZXAgaXQncyBub3QgYWxzbyBwb3NzaWJsZSB0aGF0IChhdCBsZWFzdCBmb3Ig
c2ltcGxlCj4gZHJpdmVycykgYXV0b21hdGljIHJlc291cmNlIGNsZWFudXAgY2FuIGJlIGRvbmUg
Y29ycmVjdGx5IHdpdGhvdXQgYQo+IGRybV9kcml2ZXItPnJlbGVhc2UgaG9vay4gVGhlcmVmb3Jl
IGFsbG93IHRoaXMgbm93IGluCj4gZGV2bV9kcm1fZGV2X2luaXQoKS4KPiAKPiBBbHNvIHdpdGgg
ZHJtbV8gZXhwbGljaXQgZHJtX2RyaXZlci0+cmVsZWFzZSBob29rcyBhcmUga2luZGEgbm90IHRo
ZQo+IGJlc3Qgb3B0aW9uLCBzbyBkZXByZWNhdGUgdGhhdCBob29rIHRvIGRpc2NvdXJhZ2UgZnV0
dXJlIHVzZXJzLgo+IAo+IHYyOiBGaXh1cCB0aGUgZXhhbXBsZSBpbiB0aGUga2VybmVsZG9jIHRv
by4KPiAKPiBDYzogIk5vcmFsZiBUcsO4bm5lcyIgPG5vcmFsZkB0cm9ubmVzLm9yZz4KPiBDYzog
U2FtIFJhdm5ib3JnIDxzYW1AcmF2bmJvcmcub3JnPgo+IENjOiBUaG9tYXMgWmltbWVybWFubiA8
dHppbW1lcm1hbm5Ac3VzZS5kZT4KPiBTaWduZWQtb2ZmLWJ5OiBEYW5pZWwgVmV0dGVyIDxkYW5p
ZWwudmV0dGVyQGludGVsLmNvbT4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2RybV9kcnYuYyAg
ICAgICAgIHwgMjEgKysrKystLS0tLS0tLS0tLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9kcm1f
bW9kZV9jb25maWcuYyB8IDEyICsrKysrKysrKysrLQo+ICBpbmNsdWRlL2RybS9kcm1fbW9kZV9j
b25maWcuaCAgICAgfCAgMiArLQo+ICAzIGZpbGVzIGNoYW5nZWQsIDE3IGluc2VydGlvbnMoKyks
IDE4IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2Ry
di5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9kcnYuYwo+IGluZGV4IDNjZjQwODY0ZDRhNi4uNDI4
YzU2OWFhYWYxIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZHJ2LmMKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vZHJtX2Rydi5jCj4gQEAgLTI2Nyw4ICsyNjcsNyBAQCB2b2lkIGRy
bV9taW5vcl9yZWxlYXNlKHN0cnVjdCBkcm1fbWlub3IgKm1pbm9yKQo+ICAgKgo+ICAgKiBUaGUg
Zm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgYSB0eXBpY2FsIHN0cnVjdHVyZSBvZiBhIERSTSBkaXNw
bGF5IGRyaXZlci4KPiAgICogVGhlIGV4YW1wbGUgZm9jdXMgb24gdGhlIHByb2JlKCkgZnVuY3Rp
b24gYW5kIHRoZSBvdGhlciBmdW5jdGlvbnMgdGhhdCBpcwo+IC0gKiBhbG1vc3QgYWx3YXlzIHBy
ZXNlbnQgYW5kIHNlcnZlcyBhcyBhIGRlbW9uc3RyYXRpb24gb2YgZGV2bV9kcm1fZGV2X2luaXQo
KQo+IC0gKiB1c2FnZSB3aXRoIGl0cyBhY2NvbXBhbnlpbmcgZHJtX2RyaXZlci0+cmVsZWFzZSBj
YWxsYmFjay4KPiArICogYWxtb3N0IGFsd2F5cyBwcmVzZW50IGFuZCBzZXJ2ZXMgYXMgYSBkZW1v
bnN0cmF0aW9uIG9mIGRldm1fZHJtX2Rldl9pbml0KCkuCj4gICAqCj4gICAqIC4uIGNvZGUtYmxv
Y2s6OiBjCj4gICAqCj4gQEAgLTI3OCwxNiArMjc3LDggQEAgdm9pZCBkcm1fbWlub3JfcmVsZWFz
ZShzdHJ1Y3QgZHJtX21pbm9yICptaW5vcikKPiAgICoJCXN0cnVjdCBjbGsgKnBjbGs7Cj4gICAq
CX07Cj4gICAqCj4gLSAqCXN0YXRpYyB2b2lkIGRyaXZlcl9kcm1fcmVsZWFzZShzdHJ1Y3QgZHJt
X2RldmljZSAqZHJtKQo+IC0gKgl7Cj4gLSAqCQlzdHJ1Y3QgZHJpdmVyX2RldmljZSAqcHJpdiA9
IGNvbnRhaW5lcl9vZiguLi4pOwo+IC0gKgo+IC0gKgkJZHJtX21vZGVfY29uZmlnX2NsZWFudXAo
ZHJtKTsKPiAtICoJfQo+IC0gKgo+ICAgKglzdGF0aWMgc3RydWN0IGRybV9kcml2ZXIgZHJpdmVy
X2RybV9kcml2ZXIgPSB7Cj4gICAqCQlbLi4uXQo+IC0gKgkJLnJlbGVhc2UgPSBkcml2ZXJfZHJt
X3JlbGVhc2UsCj4gICAqCX07Cj4gICAqCj4gICAqCXN0YXRpYyBpbnQgZHJpdmVyX3Byb2JlKHN0
cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gQEAgLTMxMiw3ICszMDMsOSBAQCB2b2lkIGRy
bV9taW5vcl9yZWxlYXNlKHN0cnVjdCBkcm1fbWlub3IgKm1pbm9yKQo+ICAgKgkJfQo+ICAgKgkJ
ZHJtbV9hZGRfZmluYWxfa2ZyZWUoZHJtLCBwcml2KTsKPiAgICoKPiAtICoJCWRybV9tb2RlX2Nv
bmZpZ19pbml0KGRybSk7Cj4gKyAqCQlyZXQgPSBkcm1fbW9kZV9jb25maWdfaW5pdChkcm0pOwo+
ICsgKgkJaWYgKHJldCkKPiArICoJCQlyZXR1cm4gcmV0Owo+ICAgKgo+ICAgKgkJcHJpdi0+dXNl
cnNwYWNlX2ZhY2luZyA9IGRybW1fa3phbGxvYyguLi4sIEdGUF9LRVJORUwpOwo+ICAgKgkJaWYg
KCFwcml2LT51c2Vyc3BhY2VfZmFjaW5nKQo+IEBAIC03MTAsOCArNzAzLDcgQEAgc3RhdGljIHZv
aWQgZGV2bV9kcm1fZGV2X2luaXRfcmVsZWFzZSh2b2lkICpkYXRhKQo+ICAgKiBAZHJpdmVyOiBE
Uk0gZHJpdmVyCj4gICAqCj4gICAqIE1hbmFnZWQgZHJtX2Rldl9pbml0KCkuIFRoZSBEUk0gZGV2
aWNlIGluaXRpYWxpemVkIHdpdGggdGhpcyBmdW5jdGlvbiBpcwo+IC0gKiBhdXRvbWF0aWNhbGx5
IHB1dCBvbiBkcml2ZXIgZGV0YWNoIHVzaW5nIGRybV9kZXZfcHV0KCkuIFlvdSBtdXN0IHN1cHBs
eSBhCj4gLSAqICZkcm1fZHJpdmVyLnJlbGVhc2UgY2FsbGJhY2sgdG8gY29udHJvbCB0aGUgZmlu
YWxpemF0aW9uIGV4cGxpY2l0bHkuCj4gKyAqIGF1dG9tYXRpY2FsbHkgcHV0IG9uIGRyaXZlciBk
ZXRhY2ggdXNpbmcgZHJtX2Rldl9wdXQoKS4KPiAgICoKPiAgICogUkVUVVJOUzoKPiAgICogMCBv
biBzdWNjZXNzLCBvciBlcnJvciBjb2RlIG9uIGZhaWx1cmUuCj4gQEAgLTcyMiw5ICs3MTQsNiBA
QCBpbnQgZGV2bV9kcm1fZGV2X2luaXQoc3RydWN0IGRldmljZSAqcGFyZW50LAo+ICB7Cj4gIAlp
bnQgcmV0Owo+ICAKPiAtCWlmIChXQVJOX09OKCFkcml2ZXItPnJlbGVhc2UpKQo+IC0JCXJldHVy
biAtRUlOVkFMOwo+IC0KPiAgCXJldCA9IGRybV9kZXZfaW5pdChkZXYsIGRyaXZlciwgcGFyZW50
KTsKPiAgCWlmIChyZXQpCj4gIAkJcmV0dXJuIHJldDsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2RybV9tb2RlX2NvbmZpZy5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9tb2RlX2NvbmZp
Zy5jCj4gaW5kZXggMDhlNmVmZjZhMTc5Li45NTdkYjFlZGJhMGMgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2RybV9tb2RlX2NvbmZpZy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ry
bV9tb2RlX2NvbmZpZy5jCj4gQEAgLTI1LDYgKzI1LDcgQEAKPiAgI2luY2x1ZGUgPGRybS9kcm1f
ZHJ2Lmg+Cj4gICNpbmNsdWRlIDxkcm0vZHJtX2VuY29kZXIuaD4KPiAgI2luY2x1ZGUgPGRybS9k
cm1fZmlsZS5oPgo+ICsjaW5jbHVkZSA8ZHJtL2RybV9tYW5hZ2VkLmg+Cj4gICNpbmNsdWRlIDxk
cm0vZHJtX21vZGVfY29uZmlnLmg+Cj4gICNpbmNsdWRlIDxkcm0vZHJtX3ByaW50Lmg+Cj4gICNp
bmNsdWRlIDxsaW51eC9kbWEtcmVzdi5oPgo+IEBAIC0zNzMsNiArMzc0LDExIEBAIHN0YXRpYyBp
bnQgZHJtX21vZGVfY3JlYXRlX3N0YW5kYXJkX3Byb3BlcnRpZXMoc3RydWN0IGRybV9kZXZpY2Ug
KmRldikKPiAgCXJldHVybiAwOwo+ICB9Cj4gIAo+ICtzdGF0aWMgdm9pZCBkcm1fbW9kZV9jb25m
aWdfaW5pdF9yZWxlYXNlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKnB0cikKPiArewo+
ICsJZHJtX21vZGVfY29uZmlnX2NsZWFudXAoZGV2KTsKPiArfQo+ICsKPiAgLyoqCj4gICAqIGRy
bV9tb2RlX2NvbmZpZ19pbml0IC0gaW5pdGlhbGl6ZSBEUk0gbW9kZV9jb25maWd1cmF0aW9uIHN0
cnVjdHVyZQo+ICAgKiBAZGV2OiBEUk0gZGV2aWNlCj4gQEAgLTM4NCw4ICszOTAsMTAgQEAgc3Rh
dGljIGludCBkcm1fbW9kZV9jcmVhdGVfc3RhbmRhcmRfcHJvcGVydGllcyhzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2KQo+ICAgKiBwcm9ibGVtLCBzaW5jZSB0aGlzIHNob3VsZCBoYXBwZW4gc2luZ2xl
IHRocmVhZGVkIGF0IGluaXQgdGltZS4gSXQgaXMgdGhlCj4gICAqIGRyaXZlcidzIHByb2JsZW0g
dG8gZW5zdXJlIHRoaXMgZ3VhcmFudGVlLgo+ICAgKgo+ICsgKiBDbGVhbnVwIGlzIGF1dG9tYXRp
Y2FsbHkgaGFuZGxlZCB0aHJvdWdoIHJlZ2lzdGVyaW5nIGRybV9tb2RlX2NvbmZpZ19jbGVhbnVw
Cj4gKyAqIHdpdGggZHJtbV9hZGRfYWN0aW9uKCkuCj4gICAqLwo+IC12b2lkIGRybV9tb2RlX2Nv
bmZpZ19pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCj4gK2ludCBkcm1fbW9kZV9jb25maWdf
aW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQo+ICB7Cj4gIAltdXRleF9pbml0KCZkZXYtPm1v
ZGVfY29uZmlnLm11dGV4KTsKPiAgCWRybV9tb2Rlc2V0X2xvY2tfaW5pdCgmZGV2LT5tb2RlX2Nv
bmZpZy5jb25uZWN0aW9uX211dGV4KTsKPiBAQCAtNDQzLDYgKzQ1MSw4IEBAIHZvaWQgZHJtX21v
ZGVfY29uZmlnX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldikKPiAgCQlkcm1fbW9kZXNldF9h
Y3F1aXJlX2ZpbmkoJm1vZGVzZXRfY3R4KTsKPiAgCQlkbWFfcmVzdl9maW5pKCZyZXN2KTsKPiAg
CX0KPiArCj4gKwlyZXR1cm4gZHJtbV9hZGRfYWN0aW9uKGRldiwgZHJtX21vZGVfY29uZmlnX2lu
aXRfcmVsZWFzZSwgTlVMTCk7CgpJZiB0aGlzIGZhaWxzLCBzaG91bGRuJ3QgZHJtX21vZGVfY29u
ZmlnX2NsZWFudXAoKSBiZSBjYWxsZWQgaGVyZSA/Cgo+ICB9Cj4gIEVYUE9SVF9TWU1CT0woZHJt
X21vZGVfY29uZmlnX2luaXQpOwo+ICAKPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX21v
ZGVfY29uZmlnLmggYi9pbmNsdWRlL2RybS9kcm1fbW9kZV9jb25maWcuaAo+IGluZGV4IDNiY2Jl
MzAzMzlmMC4uMTYwYTNlNGI1MWMzIDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvZHJtL2RybV9tb2Rl
X2NvbmZpZy5oCj4gKysrIGIvaW5jbHVkZS9kcm0vZHJtX21vZGVfY29uZmlnLmgKPiBAQCAtOTI5
LDcgKzkyOSw3IEBAIHN0cnVjdCBkcm1fbW9kZV9jb25maWcgewo+ICAJY29uc3Qgc3RydWN0IGRy
bV9tb2RlX2NvbmZpZ19oZWxwZXJfZnVuY3MgKmhlbHBlcl9wcml2YXRlOwo+ICB9Owo+ICAKPiAt
dm9pZCBkcm1fbW9kZV9jb25maWdfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKPiAraW50
IGRybV9tb2RlX2NvbmZpZ19pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOwo+ICB2b2lkIGRy
bV9tb2RlX2NvbmZpZ19yZXNldChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKPiAgdm9pZCBkcm1f
bW9kZV9jb25maWdfY2xlYW51cChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKPiAgCgotLSAKUmVn
YXJkcywKCkxhdXJlbnQgUGluY2hhcnQKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZHJpLWRldmVsCg==
