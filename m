Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3848895321
	for <lists+dri-devel@lfdr.de>; Tue, 20 Aug 2019 03:18:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E379D6E56D;
	Tue, 20 Aug 2019 01:18:03 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AD9936E520
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 01:17:58 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 292EA9C5;
 Tue, 20 Aug 2019 03:17:52 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 29/50] drm/omap: hdmi4: Move mode set,
 enable and disable operations to bridge
Date: Tue, 20 Aug 2019 04:17:00 +0300
Message-Id: <20190820011721.30136-30-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
References: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1566263872;
 bh=wx943xwggQjeMpXSar5BksOK16B88yPCEYf8VS/WAbA=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=k5URE8oU9f6tS8wKub6lSAEOVxRputmqd3BZgjO3YMe4GXJxbgsp1o63BVY5oWcAs
 1VF+5kyVhz+U2gfUOatdEY+L6SZIdwPjvM4GyeJf9rL5rk2dq5FCTFX67AZXeFvAxW
 lw6U/m4faiM/oX3dWkH0+0IQZYm0J9GyZUK8TZcQ=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sean Paul <sean@poorly.run>,
 Sebastian Reichel <sebastian.reichel@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TW92ZSB0aGUgb21hcF9kc3NfZGV2aWNlIC5zZXRfdGltaW5ncygpLCAuZW5hYmxlKCkgYW5kIC5k
aXNhYmxlKCkKb3BlcmF0aW9ucyB0byB0aGUgZHJtX2JyaWRnZSBmdW5jdGlvbnMuIEFzIHRoZSBk
cm1fYnJpZGdlIGZvciB0aGUgSERNSQplbmNvZGVyIGlzIHVuY29uZGl0aW9uYWxseSByZWdpc3Rl
cmVkIGFuZCBhdHRhY2hlZCwgdGhvc2Ugb3BlcmF0aW9ucwp3aWxsIGJlIGNhbGxlZCBhdCB0aGUg
YXBwcm9wcmlhdGUgdGltZS4KClNpZ25lZC1vZmYtYnk6IExhdXJlbnQgUGluY2hhcnQgPGxhdXJl
bnQucGluY2hhcnRAaWRlYXNvbmJvYXJkLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRy
bS9kc3MvaGRtaTQuYyB8IDIwMSArKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tCiAxIGZpbGUg
Y2hhbmdlZCwgMTA2IGluc2VydGlvbnMoKyksIDk1IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNC5jIGIvZHJpdmVycy9ncHUvZHJtL29t
YXBkcm0vZHNzL2hkbWk0LmMKaW5kZXggOGI2ZmNkNzI0ZDY2Li4yMjExYTdhM2RhZDMgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNC5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNC5jCkBAIC0yOCw2ICsyOCw4IEBACiAjaW5jbHVkZSA8
c291bmQvb21hcC1oZG1pLWF1ZGlvLmg+CiAjaW5jbHVkZSA8bWVkaWEvY2VjLmg+CiAKKyNpbmNs
dWRlIDxkcm0vZHJtX2F0b21pYy5oPgorCiAjaW5jbHVkZSAib21hcGRzcy5oIgogI2luY2x1ZGUg
ImhkbWk0X2NvcmUuaCIKICNpbmNsdWRlICJoZG1pNF9jZWMuaCIKQEAgLTIzNywyMCArMjM5LDYg
QEAgc3RhdGljIHZvaWQgaGRtaV9wb3dlcl9vZmZfZnVsbChzdHJ1Y3Qgb21hcF9oZG1pICpoZG1p
KQogCWhkbWlfcG93ZXJfb2ZmX2NvcmUoaGRtaSk7CiB9CiAKLXN0YXRpYyB2b2lkIGhkbWlfZGlz
cGxheV9zZXRfdGltaW5ncyhzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsCi0JCQkJICAg
ICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKLXsKLQlzdHJ1Y3Qgb21hcF9o
ZG1pICpoZG1pID0gZHNzZGV2X3RvX2hkbWkoZHNzZGV2KTsKLQotCW11dGV4X2xvY2soJmhkbWkt
PmxvY2spOwotCi0JZHJtX2Rpc3BsYXlfbW9kZV90b192aWRlb21vZGUobW9kZSwgJmhkbWktPmNm
Zy52bSk7Ci0KLQlkaXNwY19zZXRfdHZfcGNsayhoZG1pLT5kc3MtPmRpc3BjLCBtb2RlLT5jbG9j
ayAqIDEwMDApOwotCi0JbXV0ZXhfdW5sb2NrKCZoZG1pLT5sb2NrKTsKLX0KLQogc3RhdGljIGlu
dCBoZG1pX2R1bXBfcmVncyhzdHJ1Y3Qgc2VxX2ZpbGUgKnMsIHZvaWQgKnApCiB7CiAJc3RydWN0
IG9tYXBfaGRtaSAqaGRtaSA9IHMtPnByaXZhdGU7CkBAIC0yODQsNjIgKzI3Miw2IEBAIHN0YXRp
YyB2b2lkIGhkbWlfc3RvcF9hdWRpb19zdHJlYW0oc3RydWN0IG9tYXBfaGRtaSAqaGQpCiAJaGRt
aV93cF9hdWRpb19lbmFibGUoJmhkLT53cCwgZmFsc2UpOwogfQogCi1zdGF0aWMgdm9pZCBoZG1p
X2Rpc3BsYXlfZW5hYmxlKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldikKLXsKLQlzdHJ1
Y3Qgb21hcF9oZG1pICpoZG1pID0gZHNzZGV2X3RvX2hkbWkoZHNzZGV2KTsKLQl1bnNpZ25lZCBs
b25nIGZsYWdzOwotCWludCByOwotCi0JRFNTREJHKCJFTlRFUiBoZG1pX2Rpc3BsYXlfZW5hYmxl
XG4iKTsKLQotCW11dGV4X2xvY2soJmhkbWktPmxvY2spOwotCi0JciA9IGhkbWlfcG93ZXJfb25f
ZnVsbChoZG1pKTsKLQlpZiAocikgewotCQlEU1NFUlIoImZhaWxlZCB0byBwb3dlciBvbiBkZXZp
Y2VcbiIpOwotCQlnb3RvIGRvbmU7Ci0JfQotCi0JaWYgKGhkbWktPmF1ZGlvX2NvbmZpZ3VyZWQp
IHsKLQkJciA9IGhkbWk0X2F1ZGlvX2NvbmZpZygmaGRtaS0+Y29yZSwgJmhkbWktPndwLAotCQkJ
CSAgICAgICAmaGRtaS0+YXVkaW9fY29uZmlnLAotCQkJCSAgICAgICBoZG1pLT5jZmcudm0ucGl4
ZWxjbG9jayk7Ci0JCWlmIChyKSB7Ci0JCQlEU1NFUlIoIkVycm9yIHJlc3RvcmluZyBhdWRpbyBj
b25maWd1cmF0aW9uOiAlZCIsIHIpOwotCQkJaGRtaS0+YXVkaW9fYWJvcnRfY2IoJmhkbWktPnBk
ZXYtPmRldik7Ci0JCQloZG1pLT5hdWRpb19jb25maWd1cmVkID0gZmFsc2U7Ci0JCX0KLQl9Ci0K
LQlzcGluX2xvY2tfaXJxc2F2ZSgmaGRtaS0+YXVkaW9fcGxheWluZ19sb2NrLCBmbGFncyk7Ci0J
aWYgKGhkbWktPmF1ZGlvX2NvbmZpZ3VyZWQgJiYgaGRtaS0+YXVkaW9fcGxheWluZykKLQkJaGRt
aV9zdGFydF9hdWRpb19zdHJlYW0oaGRtaSk7Ci0JaGRtaS0+ZGlzcGxheV9lbmFibGVkID0gdHJ1
ZTsKLQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZoZG1pLT5hdWRpb19wbGF5aW5nX2xvY2ssIGZs
YWdzKTsKLQotZG9uZToKLQltdXRleF91bmxvY2soJmhkbWktPmxvY2spOwotfQotCi1zdGF0aWMg
dm9pZCBoZG1pX2Rpc3BsYXlfZGlzYWJsZShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYp
Ci17Ci0Jc3RydWN0IG9tYXBfaGRtaSAqaGRtaSA9IGRzc2Rldl90b19oZG1pKGRzc2Rldik7Ci0J
dW5zaWduZWQgbG9uZyBmbGFnczsKLQotCURTU0RCRygiRW50ZXIgaGRtaV9kaXNwbGF5X2Rpc2Fi
bGVcbiIpOwotCi0JbXV0ZXhfbG9jaygmaGRtaS0+bG9jayk7Ci0KLQlzcGluX2xvY2tfaXJxc2F2
ZSgmaGRtaS0+YXVkaW9fcGxheWluZ19sb2NrLCBmbGFncyk7Ci0JaGRtaV9zdG9wX2F1ZGlvX3N0
cmVhbShoZG1pKTsKLQloZG1pLT5kaXNwbGF5X2VuYWJsZWQgPSBmYWxzZTsKLQlzcGluX3VubG9j
a19pcnFyZXN0b3JlKCZoZG1pLT5hdWRpb19wbGF5aW5nX2xvY2ssIGZsYWdzKTsKLQotCWhkbWlf
cG93ZXJfb2ZmX2Z1bGwoaGRtaSk7Ci0KLQltdXRleF91bmxvY2soJmhkbWktPmxvY2spOwotfQot
CiBpbnQgaGRtaTRfY29yZV9lbmFibGUoc3RydWN0IGhkbWlfY29yZV9kYXRhICpjb3JlKQogewog
CXN0cnVjdCBvbWFwX2hkbWkgKmhkbWkgPSBjb250YWluZXJfb2YoY29yZSwgc3RydWN0IG9tYXBf
aGRtaSwgY29yZSk7CkBAIC00OTEsMzkgKzQyMywxNCBAQCBzdGF0aWMgdm9pZCBoZG1pX2xvc3Rf
aG90cGx1ZyhzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYpCiAJaGRtaTRfY2VjX3NldF9w
aHlzX2FkZHIoJmhkbWktPmNvcmUsIENFQ19QSFlTX0FERFJfSU5WQUxJRCk7CiB9CiAKLXN0YXRp
YyBpbnQgaGRtaV9zZXRfaW5mb2ZyYW1lKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwK
LQkJY29uc3Qgc3RydWN0IGhkbWlfYXZpX2luZm9mcmFtZSAqYXZpKQotewotCXN0cnVjdCBvbWFw
X2hkbWkgKmhkbWkgPSBkc3NkZXZfdG9faGRtaShkc3NkZXYpOwotCi0JaGRtaS0+Y2ZnLmluZm9m
cmFtZSA9ICphdmk7Ci0JcmV0dXJuIDA7Ci19Ci0KLXN0YXRpYyBpbnQgaGRtaV9zZXRfaGRtaV9t
b2RlKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwKLQkJYm9vbCBoZG1pX21vZGUpCi17
Ci0Jc3RydWN0IG9tYXBfaGRtaSAqaGRtaSA9IGRzc2Rldl90b19oZG1pKGRzc2Rldik7Ci0KLQlo
ZG1pLT5jZmcuaGRtaV9kdmlfbW9kZSA9IGhkbWlfbW9kZSA/IEhETUlfSERNSSA6IEhETUlfRFZJ
OwotCXJldHVybiAwOwotfQotCiBzdGF0aWMgY29uc3Qgc3RydWN0IG9tYXBfZHNzX2RldmljZV9v
cHMgaGRtaV9vcHMgPSB7CiAJLmNvbm5lY3QJCT0gaGRtaV9jb25uZWN0LAogCS5kaXNjb25uZWN0
CQk9IGhkbWlfZGlzY29ubmVjdCwKIAotCS5lbmFibGUJCQk9IGhkbWlfZGlzcGxheV9lbmFibGUs
Ci0JLmRpc2FibGUJCT0gaGRtaV9kaXNwbGF5X2Rpc2FibGUsCi0KLQkuc2V0X3RpbWluZ3MJCT0g
aGRtaV9kaXNwbGF5X3NldF90aW1pbmdzLAotCiAJLnJlYWRfZWRpZAkJPSBoZG1pX3JlYWRfZWRp
ZCwKIAogCS5oZG1pID0gewogCQkubG9zdF9ob3RwbHVnCQk9IGhkbWlfbG9zdF9ob3RwbHVnLAot
CQkuc2V0X2luZm9mcmFtZQkJPSBoZG1pX3NldF9pbmZvZnJhbWUsCi0JCS5zZXRfaGRtaV9tb2Rl
CQk9IGhkbWlfc2V0X2hkbWlfbW9kZSwKIAl9LAogfTsKIApAQCAtNTQzLDYgKzQ1MCwxMDcgQEAg
c3RhdGljIGludCBoZG1pNF9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2Us
CiAJCQkJIGJyaWRnZSwgZmxhZ3MpOwogfQogCitzdGF0aWMgdm9pZCBoZG1pNF9icmlkZ2VfbW9k
ZV9zZXQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgIGNvbnN0IHN0cnVjdCBkcm1f
ZGlzcGxheV9tb2RlICptb2RlLAorCQkJCSAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUg
KmFkanVzdGVkX21vZGUpCit7CisJc3RydWN0IG9tYXBfaGRtaSAqaGRtaSA9IGRybV9icmlkZ2Vf
dG9faGRtaShicmlkZ2UpOworCisJbXV0ZXhfbG9jaygmaGRtaS0+bG9jayk7CisKKwlkcm1fZGlz
cGxheV9tb2RlX3RvX3ZpZGVvbW9kZShhZGp1c3RlZF9tb2RlLCAmaGRtaS0+Y2ZnLnZtKTsKKwor
CWRpc3BjX3NldF90dl9wY2xrKGhkbWktPmRzcy0+ZGlzcGMsIGFkanVzdGVkX21vZGUtPmNsb2Nr
ICogMTAwMCk7CisKKwltdXRleF91bmxvY2soJmhkbWktPmxvY2spOworfQorCitzdGF0aWMgdm9p
ZCBoZG1pNF9icmlkZ2VfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJc3Ry
dWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQoreworCXN0cnVjdCBvbWFwX2hkbWkgKmhkbWkg
PSBkcm1fYnJpZGdlX3RvX2hkbWkoYnJpZGdlKTsKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0
ZSAqY29ubl9zdGF0ZTsKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOworCXN0cnVj
dCBkcm1fY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsKKwl1bnNpZ25lZCBsb25nIGZsYWdzOworCWlu
dCByZXQ7CisKKwkvKgorCSAqIE5vbmUgb2YgdGhlc2Ugc2hvdWxkIGZhaWwsIGFzIHRoZSBicmlk
Z2UgY2FuJ3QgYmUgZW5hYmxlZCB3aXRob3V0IGEKKwkgKiB2YWxpZCBDUlRDIHRvIGNvbm5lY3Rv
ciBwYXRoIHdpdGggZnVsbHkgcG9wdWxhdGVkIG5ldyBzdGF0ZXMuCisJICovCisJY29ubmVjdG9y
ID0gZHJtX2F0b21pY19nZXRfbmV3X2Nvbm5lY3Rvcl9mb3JfZW5jb2RlcihzdGF0ZSwKKwkJCQkJ
CQkgICAgIGJyaWRnZS0+ZW5jb2Rlcik7CisJaWYgKFdBUk5fT04oIWNvbm5lY3RvcikpCisJCXJl
dHVybjsKKwljb25uX3N0YXRlID0gZHJtX2F0b21pY19nZXRfbmV3X2Nvbm5lY3Rvcl9zdGF0ZShz
dGF0ZSwgY29ubmVjdG9yKTsKKwlpZiAoV0FSTl9PTighY29ubl9zdGF0ZSkpCisJCXJldHVybjsK
KwljcnRjX3N0YXRlID0gZHJtX2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUoc3RhdGUsIGNvbm5f
c3RhdGUtPmNydGMpOworCWlmIChXQVJOX09OKCFjcnRjX3N0YXRlKSkKKwkJcmV0dXJuOworCisJ
aGRtaS0+Y2ZnLmhkbWlfZHZpX21vZGUgPSBjb25uZWN0b3ItPmRpc3BsYXlfaW5mby5pc19oZG1p
CisJCQkJPyBIRE1JX0hETUkgOiBIRE1JX0RWSTsKKworCWlmIChjb25uZWN0b3ItPmRpc3BsYXlf
aW5mby5pc19oZG1pKSB7CisJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlOwor
CQlzdHJ1Y3QgaGRtaV9hdmlfaW5mb2ZyYW1lIGF2aTsKKworCQltb2RlID0gJmNydGNfc3RhdGUt
PmFkanVzdGVkX21vZGU7CisJCXJldCA9IGRybV9oZG1pX2F2aV9pbmZvZnJhbWVfZnJvbV9kaXNw
bGF5X21vZGUoJmF2aSwgY29ubmVjdG9yLAorCQkJCQkJCSAgICAgICBtb2RlKTsKKwkJaWYgKHJl
dCA9PSAwKQorCQkJaGRtaS0+Y2ZnLmluZm9mcmFtZSA9IGF2aTsKKwl9CisKKwltdXRleF9sb2Nr
KCZoZG1pLT5sb2NrKTsKKworCXJldCA9IGhkbWlfcG93ZXJfb25fZnVsbChoZG1pKTsKKwlpZiAo
cmV0KSB7CisJCURTU0VSUigiZmFpbGVkIHRvIHBvd2VyIG9uIGRldmljZVxuIik7CisJCWdvdG8g
ZG9uZTsKKwl9CisKKwlpZiAoaGRtaS0+YXVkaW9fY29uZmlndXJlZCkgeworCQlyZXQgPSBoZG1p
NF9hdWRpb19jb25maWcoJmhkbWktPmNvcmUsICZoZG1pLT53cCwKKwkJCQkJICZoZG1pLT5hdWRp
b19jb25maWcsCisJCQkJCSBoZG1pLT5jZmcudm0ucGl4ZWxjbG9jayk7CisJCWlmIChyZXQpIHsK
KwkJCURTU0VSUigiRXJyb3IgcmVzdG9yaW5nIGF1ZGlvIGNvbmZpZ3VyYXRpb246ICVkIiwgcmV0
KTsKKwkJCWhkbWktPmF1ZGlvX2Fib3J0X2NiKCZoZG1pLT5wZGV2LT5kZXYpOworCQkJaGRtaS0+
YXVkaW9fY29uZmlndXJlZCA9IGZhbHNlOworCQl9CisJfQorCisJc3Bpbl9sb2NrX2lycXNhdmUo
JmhkbWktPmF1ZGlvX3BsYXlpbmdfbG9jaywgZmxhZ3MpOworCWlmIChoZG1pLT5hdWRpb19jb25m
aWd1cmVkICYmIGhkbWktPmF1ZGlvX3BsYXlpbmcpCisJCWhkbWlfc3RhcnRfYXVkaW9fc3RyZWFt
KGhkbWkpOworCWhkbWktPmRpc3BsYXlfZW5hYmxlZCA9IHRydWU7CisJc3Bpbl91bmxvY2tfaXJx
cmVzdG9yZSgmaGRtaS0+YXVkaW9fcGxheWluZ19sb2NrLCBmbGFncyk7CisKK2RvbmU6CisJbXV0
ZXhfdW5sb2NrKCZoZG1pLT5sb2NrKTsKK30KKworc3RhdGljIHZvaWQgaGRtaTRfYnJpZGdlX2Rp
c2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgc3RydWN0IGRybV9hdG9taWNf
c3RhdGUgKnN0YXRlKQoreworCXN0cnVjdCBvbWFwX2hkbWkgKmhkbWkgPSBkcm1fYnJpZGdlX3Rv
X2hkbWkoYnJpZGdlKTsKKwl1bnNpZ25lZCBsb25nIGZsYWdzOworCisJbXV0ZXhfbG9jaygmaGRt
aS0+bG9jayk7CisKKwlzcGluX2xvY2tfaXJxc2F2ZSgmaGRtaS0+YXVkaW9fcGxheWluZ19sb2Nr
LCBmbGFncyk7CisJaGRtaV9zdG9wX2F1ZGlvX3N0cmVhbShoZG1pKTsKKwloZG1pLT5kaXNwbGF5
X2VuYWJsZWQgPSBmYWxzZTsKKwlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZoZG1pLT5hdWRpb19w
bGF5aW5nX2xvY2ssIGZsYWdzKTsKKworCWhkbWlfcG93ZXJfb2ZmX2Z1bGwoaGRtaSk7CisKKwlt
dXRleF91bmxvY2soJmhkbWktPmxvY2spOworfQorCiBzdGF0aWMgc3RydWN0IGVkaWQgKmhkbWk0
X2JyaWRnZV9yZWFkX2VkaWQoc3RydWN0IG9tYXBfaGRtaSAqaGRtaSwKIAkJCQkJICAgc3RydWN0
IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKIHsKQEAgLTU1OSw2ICs1NjcsOSBAQCBzdGF0aWMg
c3RydWN0IGVkaWQgKmhkbWk0X2JyaWRnZV9nZXRfZWRpZChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJp
ZGdlLAogCiBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9icmlkZ2VfZnVuY3MgaGRtaTRfYnJpZGdl
X2Z1bmNzID0gewogCS5hdHRhY2ggPSBoZG1pNF9icmlkZ2VfYXR0YWNoLAorCS5tb2RlX3NldCA9
IGhkbWk0X2JyaWRnZV9tb2RlX3NldCwKKwkuYXRvbWljX2VuYWJsZSA9IGhkbWk0X2JyaWRnZV9l
bmFibGUsCisJLmF0b21pY19kaXNhYmxlID0gaGRtaTRfYnJpZGdlX2Rpc2FibGUsCiAJLmdldF9l
ZGlkID0gaGRtaTRfYnJpZGdlX2dldF9lZGlkLAogfTsKIAotLSAKUmVnYXJkcywKCkxhdXJlbnQg
UGluY2hhcnQKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
