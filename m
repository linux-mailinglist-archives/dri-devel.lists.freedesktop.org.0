Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A3F7F64F33
	for <lists+dri-devel@lfdr.de>; Thu, 11 Jul 2019 01:25:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E1E778957D;
	Wed, 10 Jul 2019 23:25:34 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qt1-f193.google.com (mail-qt1-f193.google.com
 [209.85.160.193])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8242E8957D
 for <dri-devel@lists.freedesktop.org>; Wed, 10 Jul 2019 23:25:33 +0000 (UTC)
Received: by mail-qt1-f193.google.com with SMTP id d17so4376614qtj.8
 for <dri-devel@lists.freedesktop.org>; Wed, 10 Jul 2019 16:25:33 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:message-id:subject:from:reply-to:to:cc:date
 :in-reply-to:references:organization:user-agent:mime-version
 :content-transfer-encoding;
 bh=C0PCRW7OEQbWZsltSAulIXQ7cQ4tDqLlxTgc7ERoFF4=;
 b=PukqCa71xsj5/QXj2q3llmX/Ktdrl7dMlM7TZjQHAx48ow49YqpHrpKJDytcMMuuVl
 E5KPbCjHGt5taZ3zSdBzIb2f0imfsnVh3Zd5Hoy8cQ2AWi+M07C+VJYpG9YqnGKY7eTd
 BPNnXD7KCRf1zZjmRKy296AErCywXqZ8l4b7r7tHqAP7NEjjHAa8wZtcrwZRrXTcqq76
 MYTHAP4DPd4O1LsXHz0Wu3/pWS/w4FTFJKeeOu7tqnuiF2BWRjWK52f+2nH4O+bG5kA6
 8ApSuwZY5F+Rneykl9fr3bZgwQF1H7HhYnOcoFasAknQKX5wGVs5+3kkOC7i5I7wFdy0
 OE7Q==
X-Gm-Message-State: APjAAAUAg/3wWXH6Zey/Wr836Q5pPnKD9zZeaMKBFBw7Ruz2d29S65ZI
 pu6U99soVtTEN6XrWXOUddaGEg==
X-Google-Smtp-Source: APXvYqxtNWozvXzZ1HPwLvES1Q+UzGlMts3BDO/db0bprncVK6ZxINh1PGLhFoHmGwJdZni4X0x+HQ==
X-Received: by 2002:ac8:3f55:: with SMTP id w21mr475413qtk.217.1562801132567; 
 Wed, 10 Jul 2019 16:25:32 -0700 (PDT)
Received: from whitewolf.lyude.net
 (static-173-76-190-23.bstnma.ftas.verizon.net. [173.76.190.23])
 by smtp.gmail.com with ESMTPSA id m27sm158268qtu.31.2019.07.10.16.25.30
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 10 Jul 2019 16:25:31 -0700 (PDT)
Message-ID: <6d8ba3b6c7d0c93052860e098f8f3b9fe66a16eb.camel@redhat.com>
Subject: Re: [PATCH 02/10] drm/dp_mst: Enable registration of AUX devices
 for MST ports (v2)
From: Lyude Paul <lyude@redhat.com>
To: sunpeng.li@amd.com, amd-gfx@lists.freedesktop.org, 
 dri-devel@lists.freedesktop.org
Date: Wed, 10 Jul 2019 19:25:29 -0400
In-Reply-To: <20190704190519.29525-3-sunpeng.li@amd.com>
References: <20190704190519.29525-1-sunpeng.li@amd.com>
 <20190704190519.29525-3-sunpeng.li@amd.com>
Organization: Red Hat
User-Agent: Evolution 3.32.3 (3.32.3-1.fc30) 
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Reply-To: lyude@redhat.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCAyMDE5LTA3LTA0IGF0IDE1OjA1IC0wNDAwLCBzdW5wZW5nLmxpQGFtZC5jb20gd3Jv
dGU6Cj4gRnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNv
bT4KPiAKPiBBbGwgYXZhaWxhYmxlIGRvd25zdHJlYW0gcG9ydHMgLSBwaHlzaWNhbCBhbmQgbG9n
aWNhbCAtIGFyZSBleHBvc2VkIGZvcgo+IGVhY2ggTVNUIGRldmljZS4gVGhleSBhcmUgbGlzdGVk
IGluIC9kZXYvLCBmb2xsb3dpbmcgdGhlIHNhbWUgbmFtaW5nCj4gc2NoZW1lIGFzIFNTVCBkZXZp
Y2VzIGJ5IGFwcGVuZGluZyBhbiBpbmNyZW1lbnRhbCBJRC4KPiAKPiBBbHRob3VnaCBhbGwgZG93
bnN0cmVhbSBwb3J0cyBhcmUgZXhwb3NlZCwgb25seSBzb21lIHdpbGwgd29yayBhcwo+IGV4cGVj
dGVkLiBDb25zaWRlciB0aGUgZm9sbG93aW5nIHRvcG9sb2d5Ogo+IAo+ICAgICAgICAgICAgICAg
ICstLS0tLS0tLS0rCj4gICAgICAgICAgICAgICAgfCAgQVNJQyAgIHwKPiAgICAgICAgICAgICAg
ICArLS0tLS0tLS0tKwo+ICAgICAgICAgICAgICAgQ29ubi0wfAo+ICAgICAgICAgICAgICAgICAg
ICAgfAo+ICAgICAgICAgICAgICAgICstLS0tdi0tLS0rCj4gICAgICAgICAgICstLS0tfCBNU1Qg
SFVCIHwtLS0tKwo+ICAgICAgICAgICB8ICAgICstLS0tLS0tLS0rICAgIHwKPiAgICAgICAgICAg
fCAgICAgICAgICAgICAgICAgICB8Cj4gICAgICAgICAgIHxQb3J0LTEgICAgICAgUG9ydC0yfAo+
ICAgICArLS0tLS12LS0tLS0rICAgICAgICstLS0tLXYtLS0tLSsKPiAgICAgfCAgTVNUICAgICAg
fCAgICAgICB8ICBTU1QgICAgICB8Cj4gICAgIHwgIERpc3BsYXkgIHwgICAgICAgfCAgRGlzcGxh
eSAgfAo+ICAgICArLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLSsKPiAgICAgICAgICAg
fFBvcnQtMQo+ICAgICAgICAgICB4Cj4gCj4gIE1TVCBQYXRoICB8IE1TVCBEZXZpY2UKPiAgLS0t
LS0tLS0tLSstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gIHNzdDowICAgICB8
IE1TVCBIdWIKPiAgbXN0OjAtMSAgIHwgTVNUIERpc3BsYXkKPiAgbXN0OjAtMS0xIHwgTVNUIERp
c3BsYXkncyBkaXNjb25uZWN0ZWQgRFAgb3V0Cj4gIG1zdDowLTEtOCB8IE1TVCBEaXNwbGF5J3Mg
aW50ZXJuYWwgc2luawo+ICBtc3Q6MC0yICAgfCBTU1QgRGlzcGxheQo+IAo+IE9uIGNlcnRhaW4g
TVNUIGRpc3BsYXlzLCB0aGUgdXBzdHJlYW0gcGh5c2ljYWwgcG9ydCB3aWxsIEFDSyBEUENEIHJl
YWRzLgo+IEhvd2V2ZXIsIHJlYWRzIG9uIHRoZSBsb2NhbCBsb2dpY2FsIHBvcnQgdG8gdGhlIGlu
dGVybmFsIHNpbmsgd2lsbAo+ICpOQUsqLiBpLmUuIHJlYWRpbmcgbXN0OjAtMSBBQ0tzLCBidXQg
bXN0OjAtMS04IE5BS3MuCj4gCj4gVGhlcmUgbWF5IGFsc28gYmUgZHVwbGljYXRlcy4gU29tZSBk
aXNwbGF5cyB3aWxsIHJldHVybiB0aGUgc2FtZSBHVUlECj4gd2hlbiByZWFkaW5nIERQQ0QgZnJv
bSBib3RoIG1zdDowLTEgYW5kIG1zdDowLTEtOC4KPiAKPiBUaGVyZSBhcmUgc29tZSBkZXZpY2Ut
ZGVwZW5kZW50IGJlaGF2aW9yIGFzIHdlbGwuIFRoZSBNU1QgaHViIHVzZWQKPiBkdXJpbmcgdGVz
dGluZyB3aWxsIGFjdHVhbGx5ICpBQ0sqIHJlYWQgcmVxdWVzdHMgb24gYSBkaXNjb25uZWN0ZWQK
PiBwaHlzaWNhbCBwb3J0LCB3aGVyZWFzIHRoZSBNU1QgZGlzcGxheXMgd2lsbCBOQUsuCj4gCj4g
SW4gbGlnaHQgb2YgdGhlc2UgZGlzY3JlcGFuY2llcywgaXQncyBzaW1wbGVyIHRvIGV4cG9zZSBh
bGwgZG93bnN0cmVhbQo+IHBvcnRzIC0gYm90aCBwaHlzaWNhbCBhbmQgbG9naWNhbCAtIGFuZCBs
ZXQgdGhlIHVzZXIgZGVjaWRlIHdoYXQgdG8gdXNlLgo+IAo+ICh2MikgY2hhbmdlczoKPiAKPiBN
b3ZlZCByZW1vdGUgYXV4IGRldmljZSAodW4pcmVnaXN0cmF0aW9uIHRvIG5ldyBtc3QgY29ubmVj
dG9yIGxhdGUKPiByZWdpc3RlciBhbmQgZWFybHkgdW5yZWdpc3RlciBoZWxwZXJzLiBEcml2ZXJz
IHNob3VsZCBjYWxsIHRoZXNlIGZyb20KPiB0aGVpciBvd24gbXN0IGNvbm5lY3RvciBmdW5jdGlv
biBob29rcy4KPiAKPiBUaGlzIGlzIHRvIHNvbHZlIGFuIGlzc3VlIGR1cmluZyBkcml2ZXIgdW5s
b2FkLCB3aGVyZSBtc3QgY29ubmVjdG9yCj4gZGV2aWNlcyBhcmUgdW5yZWdpc3RlcmVkIGJlZm9y
ZSB0aGUgcmVtb3RlIGF1eCBkZXZpY2VzIGFyZS4gSW4gYSBzZXR1cAo+IHdoZXJlIGF1eCBkZXZp
Y2VzIGFyZSBjcmVhdGVkIGFzIGNoaWxkcmVuIG9mIGNvbm5lY3RvciBkZXZpY2VzLCB0aGUgYXV4
Cj4gZGV2aWNlIHdvdWxkIGJlIHJlbW92ZWQgdG9vIGVhcmx5LCBhbmQgdW5jbGVhbmx5LiBEb2lu
ZyBzbyBpbgo+IGVhcmx5X3VucmVnaXN0ZXIgc29sdmVzIHRoaXMgaXNzdWUsIGFzIHRoYXQgaXMg
Y2FsbGVkIGJlZm9yZSBjb25uZWN0b3IKPiB1bnJlZ2lzdHJhdGlvbi4KPiAKPiBTaWduZWQtb2Zm
LWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgo+IFNp
Z25lZC1vZmYtYnk6IExlbyBMaSA8c3VucGVuZy5saUBhbWQuY29tPgo+IC0tLQo+ICBkcml2ZXJz
L2dwdS9kcm0vZHJtX2RwX2F1eF9kZXYuYyAgICAgIHwgIDE2ICsrLQo+ICBkcml2ZXJzL2dwdS9k
cm0vZHJtX2RwX21zdF90b3BvbG9neS5jIHwgMTM3ICsrKysrKysrKysrKysrKysrKysrKysrKy0t
Cj4gIGluY2x1ZGUvZHJtL2RybV9kcF9oZWxwZXIuaCAgICAgICAgICAgfCAgIDQgKwo+ICBpbmNs
dWRlL2RybS9kcm1fZHBfbXN0X2hlbHBlci5oICAgICAgIHwgIDExICsrKwo+ICA0IGZpbGVzIGNo
YW5nZWQsIDE1NiBpbnNlcnRpb25zKCspLCAxMiBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2RybV9kcF9hdXhfZGV2LmMKPiBiL2RyaXZlcnMvZ3B1L2RybS9k
cm1fZHBfYXV4X2Rldi5jCj4gaW5kZXggMjZlMzhkYWNmNjU0Li40YWE1ZTQ1NWU4OTQgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9kcF9hdXhfZGV2LmMKPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vZHJtX2RwX2F1eF9kZXYuYwo+IEBAIC0zNyw2ICszNyw3IEBACj4gIAo+ICAjaW5j
bHVkZSA8ZHJtL2RybV9jcnRjLmg+Cj4gICNpbmNsdWRlIDxkcm0vZHJtX2RwX2hlbHBlci5oPgo+
ICsjaW5jbHVkZSA8ZHJtL2RybV9kcF9tc3RfaGVscGVyLmg+Cj4gICNpbmNsdWRlIDxkcm0vZHJt
X3ByaW50Lmg+Cj4gIAo+ICAjaW5jbHVkZSAiZHJtX2NydGNfaGVscGVyX2ludGVybmFsLmgiCj4g
QEAgLTExNiw2ICsxMTcsNyBAQCBzdGF0aWMgc3NpemVfdCBuYW1lX3Nob3coc3RydWN0IGRldmlj
ZSAqZGV2LAo+ICAKPiAgCXJldHVybiByZXM7Cj4gIH0KPiArCj4gIHN0YXRpYyBERVZJQ0VfQVRU
Ul9STyhuYW1lKTsKPiAgCj4gIHN0YXRpYyBzdHJ1Y3QgYXR0cmlidXRlICpkcm1fZHBfYXV4X2F0
dHJzW10gPSB7Cj4gQEAgLTE2Miw3ICsxNjQsMTIgQEAgc3RhdGljIHNzaXplX3QgYXV4ZGV2X3Jl
YWRfaXRlcihzdHJ1Y3Qga2lvY2IgKmlvY2IsCj4gc3RydWN0IGlvdl9pdGVyICp0bykKPiAgCQkJ
YnJlYWs7Cj4gIAkJfQo+ICAKPiAtCQlyZXMgPSBkcm1fZHBfZHBjZF9yZWFkKGF1eF9kZXYtPmF1
eCwgcG9zLCBidWYsIHRvZG8pOwo+ICsJCWlmIChhdXhfZGV2LT5hdXgtPmlzX3JlbW90ZSkKPiAr
CQkJcmVzID0gZHJtX2RwX21zdF9kcGNkX3JlYWQoYXV4X2Rldi0+YXV4LCBwb3MsIGJ1ZiwKPiAr
CQkJCQkJICAgdG9kbyk7Cj4gKwkJZWxzZQo+ICsJCQlyZXMgPSBkcm1fZHBfZHBjZF9yZWFkKGF1
eF9kZXYtPmF1eCwgcG9zLCBidWYsIHRvZG8pOwo+ICsKPiAgCQlpZiAocmVzIDw9IDApCj4gIAkJ
CWJyZWFrOwo+ICAKPiBAQCAtMjA5LDcgKzIxNiwxMiBAQCBzdGF0aWMgc3NpemVfdCBhdXhkZXZf
d3JpdGVfaXRlcihzdHJ1Y3Qga2lvY2IgKmlvY2IsCj4gc3RydWN0IGlvdl9pdGVyICpmcm9tKQo+
ICAJCQlicmVhazsKPiAgCQl9Cj4gIAo+IC0JCXJlcyA9IGRybV9kcF9kcGNkX3dyaXRlKGF1eF9k
ZXYtPmF1eCwgcG9zLCBidWYsIHRvZG8pOwo+ICsJCWlmIChhdXhfZGV2LT5hdXgtPmlzX3JlbW90
ZSkKPiArCQkJcmVzID0gZHJtX2RwX21zdF9kcGNkX3dyaXRlKGF1eF9kZXYtPmF1eCwgcG9zLCBi
dWYsCj4gKwkJCQkJCSAgICB0b2RvKTsKPiArCQllbHNlCj4gKwkJCXJlcyA9IGRybV9kcF9kcGNk
X3dyaXRlKGF1eF9kZXYtPmF1eCwgcG9zLCBidWYsIHRvZG8pOwo+ICsKPiAgCQlpZiAocmVzIDw9
IDApCj4gIAkJCWJyZWFrOwo+ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9k
cF9tc3RfdG9wb2xvZ3kuYwo+IGIvZHJpdmVycy9ncHUvZHJtL2RybV9kcF9tc3RfdG9wb2xvZ3ku
Ywo+IGluZGV4IDA5ODRiOWEzNGQ1NS4uZGRlNzljNDRiNjI1IDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9kcm1fZHBfbXN0X3RvcG9sb2d5LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
ZHJtX2RwX21zdF90b3BvbG9neS5jCj4gQEAgLTM2LDYgKzM2LDggQEAKPiAgI2luY2x1ZGUgPGRy
bS9kcm1fcHJpbnQuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+Cj4gIAo+
ICsjaW5jbHVkZSAiZHJtX2NydGNfaGVscGVyX2ludGVybmFsLmgiCj4gKwo+ICAvKioKPiAgICog
RE9DOiBkcCBtc3QgaGVscGVyCj4gICAqCj4gQEAgLTUzLDYgKzU1LDkgQEAgc3RhdGljIGludCBk
cm1fZHBfZHBjZF93cml0ZV9wYXlsb2FkKHN0cnVjdAo+IGRybV9kcF9tc3RfdG9wb2xvZ3lfbWdy
ICptZ3IsCj4gIAkJCQkgICAgIGludCBpZCwKPiAgCQkJCSAgICAgc3RydWN0IGRybV9kcF9wYXls
b2FkICpwYXlsb2FkKTsKPiAgCj4gK3N0YXRpYyBpbnQgZHJtX2RwX3NlbmRfZHBjZF9yZWFkKHN0
cnVjdCBkcm1fZHBfbXN0X3RvcG9sb2d5X21nciAqbWdyLAo+ICsJCQkJIHN0cnVjdCBkcm1fZHBf
bXN0X3BvcnQgKnBvcnQsCj4gKwkJCQkgaW50IG9mZnNldCwgaW50IHNpemUsIHU4ICpieXRlcyk7
Cj4gIHN0YXRpYyBpbnQgZHJtX2RwX3NlbmRfZHBjZF93cml0ZShzdHJ1Y3QgZHJtX2RwX21zdF90
b3BvbG9neV9tZ3IgKm1nciwKPiAgCQkJCSAgc3RydWN0IGRybV9kcF9tc3RfcG9ydCAqcG9ydCwK
PiAgCQkJCSAgaW50IG9mZnNldCwgaW50IHNpemUsIHU4ICpieXRlcyk7Cj4gQEAgLTEyMzgsNiAr
MTI0Myw5IEBAIHN0YXRpYyB2b2lkIGRybV9kcF9kZXN0cm95X3BvcnQoc3RydWN0IGtyZWYgKmty
ZWYpCj4gIAlzdHJ1Y3QgZHJtX2RwX21zdF90b3BvbG9neV9tZ3IgKm1nciA9IHBvcnQtPm1ncjsK
PiAgCj4gIAlpZiAoIXBvcnQtPmlucHV0KSB7Cj4gKwo+ICsJCXBvcnQtPnZjcGkubnVtX3Nsb3Rz
ID0gMDsKPiArCj4gIAkJa2ZyZWUocG9ydC0+Y2FjaGVkX2VkaWQpOwo+ICAKPiAgCQkvKgo+IEBA
IC0xNDgzLDYgKzE0OTEsNDggQEAgc3RhdGljIGJvb2wgZHJtX2RwX3BvcnRfc2V0dXBfcGR0KHN0
cnVjdAo+IGRybV9kcF9tc3RfcG9ydCAqcG9ydCkKPiAgCXJldHVybiBzZW5kX2xpbms7Cj4gIH0K
PiAgCj4gKy8qKgo+ICsgKiBkcm1fZHBfbXN0X2RwY2RfcmVhZCgpIC0gcmVhZCBhIHNlcmllcyBv
ZiBieXRlcyBmcm9tIHRoZSBEUENEIHZpYSBzaWRlYmFuZAo+ICsgKiBAYXV4OiBGYWtlIHNpZGVi
YW5kIEFVWCBDSAo+ICsgKiBAb2Zmc2V0OiBhZGRyZXNzIG9mIHRoZSAoZmlyc3QpIHJlZ2lzdGVy
IHRvIHJlYWQKPiArICogQGJ1ZmZlcjogYnVmZmVyIHRvIHN0b3JlIHRoZSByZWdpc3RlciB2YWx1
ZXMKPiArICogQHNpemU6IG51bWJlciBvZiBieXRlcyBpbiBAYnVmZmVyCj4gKyAqCj4gKyAqIFBl
cmZvcm1zIHRoZSBzYW1lIGZ1bmN0aW9uYWxpdHkgZm9yIHJlbW90ZSBkZXZpY2VzIHZpYQo+ICsg
KiBzaWRlYmFuZCBtZXNzYWdpbmcgYXMgZHJtX2RwX2RwY2RfcmVhZCgpIGRvZXMgZm9yIGxvY2Fs
Cj4gKyAqIGRldmljZXMgdmlhIGFjdHVhbCBBVVggQ0guCj4gKyAqLwo+ICtzc2l6ZV90IGRybV9k
cF9tc3RfZHBjZF9yZWFkKHN0cnVjdCBkcm1fZHBfYXV4ICphdXgsCj4gKwkJCSAgICAgdW5zaWdu
ZWQgaW50IG9mZnNldCwgdm9pZCAqYnVmZmVyLCBzaXplX3Qgc2l6ZSkKPiArewo+ICsJc3RydWN0
IGRybV9kcF9tc3RfcG9ydCAqcG9ydCA9IGNvbnRhaW5lcl9vZihhdXgsIHN0cnVjdCBkcm1fZHBf
bXN0X3BvcnQsCj4gKwkJCQkJCSAgICBhdXgpOwo+ICsKPiArCXJldHVybiBkcm1fZHBfc2VuZF9k
cGNkX3JlYWQocG9ydC0+bWdyLCBwb3J0LAo+ICsJCQkJICAgICBvZmZzZXQsIHNpemUsIGJ1ZmZl
cik7Cj4gK30KPiArCj4gKy8qKgo+ICsgKiBkcm1fZHBfbXN0X2RwY2Rfd3JpdGUoKSAtIHdyaXRl
IGEgc2VyaWVzIG9mIGJ5dGVzIHRvIHRoZSBEUENEIHZpYSBzaWRlYmFuZAo+ICsgKiBAYXV4OiBG
YWtlIHNpZGViYW5kIEFVWCBDSAo+ICsgKiBAb2Zmc2V0OiBhZGRyZXNzIG9mIHRoZSAoZmlyc3Qp
IHJlZ2lzdGVyIHRvIHdyaXRlCj4gKyAqIEBidWZmZXI6IGJ1ZmZlciBjb250YWluaW5nIHRoZSB2
YWx1ZXMgdG8gd3JpdGUKPiArICogQHNpemU6IG51bWJlciBvZiBieXRlcyBpbiBAYnVmZmVyCj4g
KyAqCj4gKyAqIFBlcmZvcm1zIHRoZSBzYW1lIGZ1bmN0aW9uYWxpdHkgZm9yIHJlbW90ZSBkZXZp
Y2VzIHZpYQo+ICsgKiBzaWRlYmFuZCBtZXNzYWdpbmcgYXMgZHJtX2RwX2RwY2Rfd3JpdGUoKSBk
b2VzIGZvciBsb2NhbAo+ICsgKiBkZXZpY2VzIHZpYSBhY3R1YWwgQVVYIENILgo+ICsgKi8KPiAr
c3NpemVfdCBkcm1fZHBfbXN0X2RwY2Rfd3JpdGUoc3RydWN0IGRybV9kcF9hdXggKmF1eCwKPiAr
CQkJICAgICAgdW5zaWduZWQgaW50IG9mZnNldCwgdm9pZCAqYnVmZmVyLCBzaXplX3Qgc2l6ZSkK
PiArewo+ICsJc3RydWN0IGRybV9kcF9tc3RfcG9ydCAqcG9ydCA9IGNvbnRhaW5lcl9vZihhdXgs
IHN0cnVjdCBkcm1fZHBfbXN0X3BvcnQsCj4gKwkJCQkJCSAgICBhdXgpOwo+ICsKPiArCXJldHVy
biBkcm1fZHBfc2VuZF9kcGNkX3dyaXRlKHBvcnQtPm1nciwgcG9ydCwKPiArCQkJCSAgICAgIG9m
ZnNldCwgc2l6ZSwgYnVmZmVyKTsKPiArfQo+ICsKPiAgc3RhdGljIHZvaWQgZHJtX2RwX2NoZWNr
X21zdGJfZ3VpZChzdHJ1Y3QgZHJtX2RwX21zdF9icmFuY2ggKm1zdGIsIHU4ICpndWlkKQo+ICB7
Cj4gIAlpbnQgcmV0Owo+IEBAIC0xNTI2LDYgKzE1NzYsNDQgQEAgc3RhdGljIHZvaWQgYnVpbGRf
bXN0X3Byb3BfcGF0aChjb25zdCBzdHJ1Y3QKPiBkcm1fZHBfbXN0X2JyYW5jaCAqbXN0YiwKPiAg
CXN0cmxjYXQocHJvcHBhdGgsIHRlbXAsIHByb3BwYXRoX3NpemUpOwo+ICB9Cj4gIAo+ICsvKioK
PiArICogZHJtX2RwX21zdF9jb25uZWN0b3JfbGF0ZV9yZWdpc3RlcigpIC0gTGF0ZSBNU1QgY29u
bmVjdG9yIHJlZ2lzdHJhdGlvbgo+ICsgKiBAZHJtX2Nvbm5lY3RvcjogVGhlIE1TVCBjb25uZWN0
b3IKPiArICogQHBvcnQ6IFRoZSBNU1QgcG9ydCBmb3IgdGhpcyBjb25uZWN0b3IKPiArICoKPiAr
ICogSGVscGVyIHRvIHJlZ2lzdGVyIHRoZSByZW1vdGUgYXV4IGRldmljZSBmb3IgdGhpcyBNU1Qg
cG9ydC4gRHJpdmVycyBzaG91bGQKPiArICogY2FsbCB0aGlzIGZyb20gdGhlaXIgbXN0IGNvbm5l
Y3RvcidzIGxhdGVfcmVnaXN0ZXIgaG9vayB0byBlbmFibGUgTVNUIGF1eAo+ICsgKiBkZXZpY2Vz
Lgo+ICsgKi8KPiAraW50IGRybV9kcF9tc3RfY29ubmVjdG9yX2xhdGVfcmVnaXN0ZXIoc3RydWN0
IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKPiArCQkJCSAgICAgICBzdHJ1Y3QgZHJtX2RwX21z
dF9wb3J0ICpwb3J0KQo+ICt7Cj4gKwlEUk1fREVCVUdfS01TKCJyZWdpc3RlcmluZyAlcyByZW1v
dGUgYnVzIGZvciAlc1xuIiwKPiArCQkgICAgICBwb3J0LT5hdXgubmFtZSwgY29ubmVjdG9yLT5r
ZGV2LT5rb2JqLm5hbWUpOwo+ICsKPiArCXBvcnQtPmF1eC5kZXYgPSBjb25uZWN0b3ItPmtkZXY7
Cj4gKwlyZXR1cm4gZHJtX2RwX2F1eF9yZWdpc3Rlcl9kZXZub2RlKCZwb3J0LT5hdXgpOwo+ICt9
Cj4gK0VYUE9SVF9TWU1CT0woZHJtX2RwX21zdF9jb25uZWN0b3JfbGF0ZV9yZWdpc3Rlcik7Cj4g
Kwo+ICsvKioKPiArICogZHJtX2RwX21zdF9jb25uZWN0b3JfZWFybHlfdW5yZWdpc3RlcigpIC0g
RWFybHkgTVNUIGNvbm5lY3Rvcgo+IHVucmVnaXN0cmF0aW9uCj4gKyAqIEBkcm1fY29ubmVjdG9y
OiBUaGUgTVNUIGNvbm5lY3Rvcgo+ICsgKiBAcG9ydDogVGhlIE1TVCBwb3J0IGZvciB0aGlzIGNv
bm5lY3Rvcgo+ICsgKgo+ICsgKiBIZWxwZXIgdG8gdW5yZWdpc3RlciB0aGUgcmVtb3RlIGF1eCBk
ZXZpY2UgZm9yIHRoaXMgTVNUIHBvcnQsIHJlZ2lzdGVyZWQKPiBieQo+ICsgKiBkcm1fZHBfbXN0
X2Nvbm5lY3Rvcl9sYXRlX3JlZ2lzdGVyKCkuIERyaXZlcnMgc2hvdWxkIGNhbGwgdGhpcyBmcm9t
IHRoZWlyCj4gbXN0Cj4gKyAqIGNvbm5lY3RvcidzIGVhcmx5X3VucmVnaXN0ZXIgaG9vay4KPiAr
ICovCj4gK3ZvaWQgZHJtX2RwX21zdF9jb25uZWN0b3JfZWFybHlfdW5yZWdpc3RlcihzdHJ1Y3Qg
ZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAo+ICsJCQkJCSAgIHN0cnVjdCBkcm1fZHBfbXN0X3Bv
cnQgKnBvcnQpCj4gK3sKPiArCURSTV9ERUJVR19LTVMoInVucmVnaXN0ZXJpbmcgJXMgcmVtb3Rl
IGJ1cyBmb3IgJXNcbiIsCj4gKwkJICAgICAgcG9ydC0+YXV4Lm5hbWUsIGNvbm5lY3Rvci0+a2Rl
di0+a29iai5uYW1lKTsKPiArCWRybV9kcF9hdXhfdW5yZWdpc3Rlcl9kZXZub2RlKCZwb3J0LT5h
dXgpOwo+ICt9Cj4gK0VYUE9SVF9TWU1CT0woZHJtX2RwX21zdF9jb25uZWN0b3JfZWFybHlfdW5y
ZWdpc3Rlcik7Cj4gKwo+ICBzdGF0aWMgdm9pZCBkcm1fZHBfYWRkX3BvcnQoc3RydWN0IGRybV9k
cF9tc3RfYnJhbmNoICptc3RiLAo+ICAJCQkgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiAg
CQkJICAgIHN0cnVjdCBkcm1fZHBfbGlua19hZGRyX3JlcGx5X3BvcnQgKnBvcnRfbXNnKQo+IEBA
IC0xNTQ4LDYgKzE2MzYsNyBAQCBzdGF0aWMgdm9pZCBkcm1fZHBfYWRkX3BvcnQoc3RydWN0IGRy
bV9kcF9tc3RfYnJhbmNoCj4gKm1zdGIsCj4gIAkJcG9ydC0+bWdyID0gbXN0Yi0+bWdyOwo+ICAJ
CXBvcnQtPmF1eC5uYW1lID0gIkRQTVNUIjsKPiAgCQlwb3J0LT5hdXguZGV2ID0gZGV2LT5kZXY7
Cj4gKwkJcG9ydC0+YXV4LmlzX3JlbW90ZSA9IHRydWU7Cj4gIAo+ICAJCS8qCj4gIAkJICogTWFr
ZSBzdXJlIHRoZSBtZW1vcnkgYWxsb2NhdGlvbiBmb3Igb3VyIHBhcmVudCBicmFuY2ggc3RheXMK
PiBAQCAtMTgxNiw3ICsxOTA1LDYgQEAgc3RhdGljIGJvb2wgZHJtX2RwX3ZhbGlkYXRlX2d1aWQo
c3RydWN0Cj4gZHJtX2RwX21zdF90b3BvbG9neV9tZ3IgKm1nciwKPiAgCXJldHVybiBmYWxzZTsK
PiAgfQo+ICAKPiAtI2lmIDAKPiAgc3RhdGljIGludCBidWlsZF9kcGNkX3JlYWQoc3RydWN0IGRy
bV9kcF9zaWRlYmFuZF9tc2dfdHggKm1zZywgdTggcG9ydF9udW0sCj4gdTMyIG9mZnNldCwgdTgg
bnVtX2J5dGVzKQo+ICB7Cj4gIAlzdHJ1Y3QgZHJtX2RwX3NpZGViYW5kX21zZ19yZXFfYm9keSBy
ZXE7Cj4gQEAgLTE4MjksNyArMTkxNyw2IEBAIHN0YXRpYyBpbnQgYnVpbGRfZHBjZF9yZWFkKHN0
cnVjdCBkcm1fZHBfc2lkZWJhbmRfbXNnX3R4Cj4gKm1zZywgdTggcG9ydF9udW0sIHUzMgo+ICAK
PiAgCXJldHVybiAwOwo+ICB9Cj4gLSNlbmRpZgo+ICAKPiAgc3RhdGljIGludCBkcm1fZHBfc2Vu
ZF9zaWRlYmFuZF9tc2coc3RydWN0IGRybV9kcF9tc3RfdG9wb2xvZ3lfbWdyICptZ3IsCj4gIAkJ
CQkgICAgYm9vbCB1cCwgdTggKm1zZywgaW50IGxlbikKPiBAQCAtMjQ0MSwyNiArMjUyOCw1NiBA
QCBpbnQgZHJtX2RwX3VwZGF0ZV9wYXlsb2FkX3BhcnQyKHN0cnVjdAo+IGRybV9kcF9tc3RfdG9w
b2xvZ3lfbWdyICptZ3IpCj4gIH0KPiAgRVhQT1JUX1NZTUJPTChkcm1fZHBfdXBkYXRlX3BheWxv
YWRfcGFydDIpOwo+ICAKPiAtI2lmIDAgLyogdW51c2VkIGFzIG9mIHlldCAqLwo+ICBzdGF0aWMg
aW50IGRybV9kcF9zZW5kX2RwY2RfcmVhZChzdHJ1Y3QgZHJtX2RwX21zdF90b3BvbG9neV9tZ3Ig
Km1nciwKPiAgCQkJCSBzdHJ1Y3QgZHJtX2RwX21zdF9wb3J0ICpwb3J0LAo+IC0JCQkJIGludCBv
ZmZzZXQsIGludCBzaXplKQo+ICsJCQkJIGludCBvZmZzZXQsIGludCBzaXplLCB1OCAqYnl0ZXMp
Cj4gIHsKPiAgCWludCBsZW47Cj4gKwlpbnQgcmV0ID0gMDsKPiAgCXN0cnVjdCBkcm1fZHBfc2lk
ZWJhbmRfbXNnX3R4ICp0eG1zZzsKPiArCXN0cnVjdCBkcm1fZHBfbXN0X2JyYW5jaCAqbXN0YjsK
PiArCj4gKwltc3RiID0gZHJtX2RwX21zdF90b3BvbG9neV9nZXRfbXN0Yl92YWxpZGF0ZWQobWdy
LCBwb3J0LT5wYXJlbnQpOwo+ICsJaWYgKCFtc3RiKQo+ICsJCXJldHVybiAtRUlOVkFMOwo+ICAK
PiAgCXR4bXNnID0ga3phbGxvYyhzaXplb2YoKnR4bXNnKSwgR0ZQX0tFUk5FTCk7Cj4gLQlpZiAo
IXR4bXNnKQo+IC0JCXJldHVybiAtRU5PTUVNOwo+ICsJaWYgKCF0eG1zZykgewo+ICsJCXJldCA9
IC1FTk9NRU07Cj4gKwkJZ290byBmYWlsX3B1dDsKPiArCX0KPiAgCj4gLQlsZW4gPSBidWlsZF9k
cGNkX3JlYWQodHhtc2csIHBvcnQtPnBvcnRfbnVtLCAwLCA4KTsKPiArCWxlbiA9IGJ1aWxkX2Rw
Y2RfcmVhZCh0eG1zZywgcG9ydC0+cG9ydF9udW0sIG9mZnNldCwgc2l6ZSk7Cj4gIAl0eG1zZy0+
ZHN0ID0gcG9ydC0+cGFyZW50Owo+ICAKPiAgCWRybV9kcF9xdWV1ZV9kb3duX3R4KG1nciwgdHht
c2cpOwo+ICAKPiAtCXJldHVybiAwOwo+ICsJcmV0ID0gZHJtX2RwX21zdF93YWl0X3R4X3JlcGx5
KG1zdGIsIHR4bXNnKTsKPiArCWlmIChyZXQgPCAwKQo+ICsJCWdvdG8gZmFpbF9mcmVlOwo+ICsK
PiArCS8qIERQQ0QgcmVhZCBzaG91bGQgbmV2ZXIgYmUgTkFDS2VkICovCj4gKwlpZiAoV0FSTl9P
Tl9PTkNFKHR4bXNnLT5yZXBseS5yZXBseV90eXBlID09IDEpKSB7CgphZ2gtc29ycnksIG9uZSBs
YXN0IG5pdHBpY2s6IEkgdGhpbmsgd2UgbWlnaHQgd2FudCB0byBjaGFuZ2UgdGhpcyBmcm9tIGEK
V0FSTl9PTl9PTkNFKCkgdG8gYSBzaW1wbGUgRFJNX0VSUk9SLiBPbiBteSBsZW5vdm8gUDUwJ3Mg
bGFwdG9wIGRvY2ssIHRyeWluZyB0byAKcmVhZCBmcm9tIG5vbi1uYXRpdmUgRFAgZGV2aWNlcyBh
Y3R1YWxseSByZXN1bHRzIGluIE5BS3MuIE5vIHJlYXNvbiB0byB0YWludApzb21lb25lJ3Mga2Vy
bmVsIGZvciB0aGlzLgoKPiArCQlyZXQgPSAtRUlPOwo+ICsJCWdvdG8gZmFpbF9mcmVlOwo+ICsJ
fQo+ICsKPiArCWlmICh0eG1zZy0+cmVwbHkudS5yZW1vdGVfZHBjZF9yZWFkX2Fjay5udW1fYnl0
ZXMgIT0gc2l6ZSkgewo+ICsJCXJldCA9IC1FUFJPVE87Cj4gKwkJZ290byBmYWlsX2ZyZWU7Cj4g
Kwl9Cj4gKwo+ICsJcmV0ID0gbWluX3Qoc2l6ZV90LCB0eG1zZy0+cmVwbHkudS5yZW1vdGVfZHBj
ZF9yZWFkX2Fjay5udW1fYnl0ZXMsCj4gKwkJICAgIHNpemUpOwo+ICsJbWVtY3B5KGJ5dGVzLCB0
eG1zZy0+cmVwbHkudS5yZW1vdGVfZHBjZF9yZWFkX2Fjay5ieXRlcywgcmV0KTsKPiArCj4gK2Zh
aWxfZnJlZToKPiArCWtmcmVlKHR4bXNnKTsKPiArZmFpbF9wdXQ6Cj4gKwlkcm1fZHBfbXN0X3Rv
cG9sb2d5X3B1dF9tc3RiKG1zdGIpOwo+ICsKPiArCXJldHVybiByZXQ7Cj4gIH0KPiAtI2VuZGlm
Cj4gIAo+ICBzdGF0aWMgaW50IGRybV9kcF9zZW5kX2RwY2Rfd3JpdGUoc3RydWN0IGRybV9kcF9t
c3RfdG9wb2xvZ3lfbWdyICptZ3IsCj4gIAkJCQkgIHN0cnVjdCBkcm1fZHBfbXN0X3BvcnQgKnBv
cnQsCj4gQEAgLTI0ODksNyArMjYwNiw3IEBAIHN0YXRpYyBpbnQgZHJtX2RwX3NlbmRfZHBjZF93
cml0ZShzdHJ1Y3QKPiBkcm1fZHBfbXN0X3RvcG9sb2d5X21nciAqbWdyLAo+ICAJcmV0ID0gZHJt
X2RwX21zdF93YWl0X3R4X3JlcGx5KG1zdGIsIHR4bXNnKTsKPiAgCWlmIChyZXQgPiAwKSB7Cj4g
IAkJaWYgKHR4bXNnLT5yZXBseS5yZXBseV90eXBlID09IERQX1NJREVCQU5EX1JFUExZX05BSykK
PiAtCQkJcmV0ID0gLUVJTlZBTDsKPiArCQkJcmV0ID0gLUVJTzsKPiAgCQllbHNlCj4gIAkJCXJl
dCA9IDA7Cj4gIAl9Cj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9kcF9oZWxwZXIuaCBi
L2luY2x1ZGUvZHJtL2RybV9kcF9oZWxwZXIuaAo+IGluZGV4IDM5Nzg5NmI1YjIxYS4uY2IyZGVm
YWNlOTUwIDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvZHJtL2RybV9kcF9oZWxwZXIuaAo+ICsrKyBi
L2luY2x1ZGUvZHJtL2RybV9kcF9oZWxwZXIuaAo+IEBAIC0xMzA5LDYgKzEzMDksMTAgQEAgc3Ry
dWN0IGRybV9kcF9hdXggewo+ICAJICogQGNlYzogc3RydWN0IGNvbnRhaW5pbmcgZmllbGRzIHVz
ZWQgZm9yIENFQy1UdW5uZWxpbmctb3Zlci1BVVguCj4gIAkgKi8KPiAgCXN0cnVjdCBkcm1fZHBf
YXV4X2NlYyBjZWM7Cj4gKwkvKioKPiArCSAqIEBpc19yZW1vdGU6IElzIHRoaXMgIkFVWCBDSCIg
YWN0dWFsbHkgdXNpbmcgc2lkZWJhbmQgbWVzc2FnaW5nLgo+ICsJICovCj4gKwlib29sIGlzX3Jl
bW90ZTsKPiAgfTsKPiAgCj4gIHNzaXplX3QgZHJtX2RwX2RwY2RfcmVhZChzdHJ1Y3QgZHJtX2Rw
X2F1eCAqYXV4LCB1bnNpZ25lZCBpbnQgb2Zmc2V0LAo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2Ry
bS9kcm1fZHBfbXN0X2hlbHBlci5oIGIvaW5jbHVkZS9kcm0vZHJtX2RwX21zdF9oZWxwZXIuaAo+
IGluZGV4IDhjOTdhNWY5MmM0Ny4uMmJhNjI1M2VhNmQzIDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUv
ZHJtL2RybV9kcF9tc3RfaGVscGVyLmgKPiArKysgYi9pbmNsdWRlL2RybS9kcm1fZHBfbXN0X2hl
bHBlci5oCj4gQEAgLTY0Myw2ICs2NDMsMTcgQEAgdm9pZCBkcm1fZHBfbXN0X2R1bXBfdG9wb2xv
Z3koc3RydWN0IHNlcV9maWxlICptLAo+ICB2b2lkIGRybV9kcF9tc3RfdG9wb2xvZ3lfbWdyX3N1
c3BlbmQoc3RydWN0IGRybV9kcF9tc3RfdG9wb2xvZ3lfbWdyICptZ3IpOwo+ICBpbnQgX19tdXN0
X2NoZWNrCj4gIGRybV9kcF9tc3RfdG9wb2xvZ3lfbWdyX3Jlc3VtZShzdHJ1Y3QgZHJtX2RwX21z
dF90b3BvbG9neV9tZ3IgKm1ncik7Cj4gKwo+ICtzc2l6ZV90IGRybV9kcF9tc3RfZHBjZF9yZWFk
KHN0cnVjdCBkcm1fZHBfYXV4ICphdXgsCj4gKwkJCSAgICAgdW5zaWduZWQgaW50IG9mZnNldCwg
dm9pZCAqYnVmZmVyLCBzaXplX3Qgc2l6ZSk7Cj4gK3NzaXplX3QgZHJtX2RwX21zdF9kcGNkX3dy
aXRlKHN0cnVjdCBkcm1fZHBfYXV4ICphdXgsCj4gKwkJCSAgICAgIHVuc2lnbmVkIGludCBvZmZz
ZXQsIHZvaWQgKmJ1ZmZlciwgc2l6ZV90IHNpemUpOwo+ICsKPiAraW50IGRybV9kcF9tc3RfY29u
bmVjdG9yX2xhdGVfcmVnaXN0ZXIoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKPiAr
CQkJCSAgICAgICBzdHJ1Y3QgZHJtX2RwX21zdF9wb3J0ICpwb3J0KTsKPiArdm9pZCBkcm1fZHBf
bXN0X2Nvbm5lY3Rvcl9lYXJseV91bnJlZ2lzdGVyKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25u
ZWN0b3IsCj4gKwkJCQkJICAgc3RydWN0IGRybV9kcF9tc3RfcG9ydCAqcG9ydCk7Cj4gKwo+ICBz
dHJ1Y3QgZHJtX2RwX21zdF90b3BvbG9neV9zdGF0ZSAqZHJtX2F0b21pY19nZXRfbXN0X3RvcG9s
b2d5X3N0YXRlKHN0cnVjdAo+IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlLAo+ICAJCQkJCQkJCSAg
ICBzdHJ1Y3QKPiBkcm1fZHBfbXN0X3RvcG9sb2d5X21nciAqbWdyKTsKPiAgaW50IF9fbXVzdF9j
aGVjawoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJp
LWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
