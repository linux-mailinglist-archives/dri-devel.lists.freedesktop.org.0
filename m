Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1B3A1A0C5D
	for <lists+dri-devel@lfdr.de>; Wed, 28 Aug 2019 23:28:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4298589EA6;
	Wed, 28 Aug 2019 21:28:05 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd41.google.com (mail-io1-xd41.google.com
 [IPv6:2607:f8b0:4864:20::d41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E10EB89EA6
 for <dri-devel@lists.freedesktop.org>; Wed, 28 Aug 2019 21:28:03 +0000 (UTC)
Received: by mail-io1-xd41.google.com with SMTP id t6so2539481ios.7
 for <dri-devel@lists.freedesktop.org>; Wed, 28 Aug 2019 14:28:03 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=pJSmOOGXQE2jhcsJ3xN49XimOe54yldyhDrabvf9aK8=;
 b=ENWUgGd8u4wy5N23Y6euz+eGo1YpPQmoV3kxdVDIbcUy+lbG0AXCmvyZkBMj0NNEeG
 06KgQ094LI0hGZ3NZKPxWjV4MSA7XoNyflqdYWDX5uc5p/kIW6XGHBTU72p1sK1+AaIp
 mu77ZOFpBIpPWnmAfQremz8KGhu+hcugrpTAFlw/pm8oagNKR1fLDlBGOA7O+x52XYur
 fUklybVdaEA3qKg3UlOn5QMKntL2ipoM4hPVrwNt2bSLbHP8gNPcTBtCKCtHAFGGmwk2
 yu1RGVNqaldiWRmoJJTUEiGpmk4L6m43gxuxCn0Qjb4x651Etn9XJZNqS3X4Nsr51TNy
 MGhg==
X-Gm-Message-State: APjAAAWFRiwETRJj3/hGNustLsG+pLLApDzGIWBflz5uDOpnAQjJokqW
 do8bFud7zVzGSgYeBXQ1gSkhszKvIa8eeHAB39w=
X-Google-Smtp-Source: APXvYqxkKCeT4BaeHP6brbncMHNHe9V9f4UosnXis3x+V0ZD1tdls9NsC/dLZHd1Qosy/ywgq9p4AsGnl/r013yo7p0=
X-Received: by 2002:a6b:6f06:: with SMTP id k6mr1998685ioc.232.1567027683094; 
 Wed, 28 Aug 2019 14:28:03 -0700 (PDT)
MIME-Version: 1.0
References: <20190823095503.2261-1-kraxel@redhat.com>
 <20190823095503.2261-8-kraxel@redhat.com>
In-Reply-To: <20190823095503.2261-8-kraxel@redhat.com>
From: Chia-I Wu <olvaffe@gmail.com>
Date: Wed, 28 Aug 2019 14:27:52 -0700
Message-ID: <CAPaKu7QbPeSMQGm+37hUVcSMyjjgYTs5YPKLZtoTn_J13WCeVQ@mail.gmail.com>
Subject: Re: [PATCH v8 07/18] drm/virtio: add virtio_gpu_object_array & helpers
To: Gerd Hoffmann <kraxel@redhat.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=pJSmOOGXQE2jhcsJ3xN49XimOe54yldyhDrabvf9aK8=;
 b=k/v42AqaHAf/iP3wyYv0z3pbHwt5b1AktZJOvBGpVZzLU5pAf1sRIix5Q9+UZAHhBP
 ec/9luZcCMy4SV8B3JVvtzJaqGHhfVe5lt/BADb1OE5gs1ObEQ7gdUtQTL6gl7QBNP5R
 KDKVhF0Esxkhid2Ru74RVTOeRLHStIpvI2eJXxKzmfnFpAZL++DyY8q2ZAj9RwHk90Q4
 SpsqUyu9e0pKnIpFr4HHCWpUBea7ACexvG0wSyQs5iIEGVfVK9CxWxuMmMIFAIDavMR1
 W5fcsm23La8kSlSWi9s0zeo9y5Snp3kdgKxisPfuDaZjCkAAp7EP1TxgHYuupkg1/915
 cl6w==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, open list <linux-kernel@vger.kernel.org>,
 ML dri-devel <dri-devel@lists.freedesktop.org>,
 "open list:VIRTIO GPU DRIVER" <virtualization@lists.linux-foundation.org>,
 Gurchetan Singh <gurchetansingh@chromium.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBBdWcgMjMsIDIwMTkgYXQgMjo1NSBBTSBHZXJkIEhvZmZtYW5uIDxrcmF4ZWxAcmVk
aGF0LmNvbT4gd3JvdGU6Cj4KPiBTb21lIGhlbHBlciBmdW5jdGlvbnMgdG8gbWFuYWdlIGFuIGFy
cmF5IG9mIGdlbSBvYmplY3RzLgo+Cj4gdjY6Cj4gIC0gYWRkIHRpY2tldCB0byBzdHJ1Y3Qgdmly
dGlvX2dwdV9vYmplY3RfYXJyYXkuCj4gIC0gYWRkIHZpcnRpb19ncHVfYXJyYXlfe2xvY2ssdW5s
b2NrfV9yZXN2IGhlbHBlcnMuCj4gIC0gYWRkIHZpcnRpb19ncHVfYXJyYXlfYWRkX2ZlbmNlIGhl
bHBlci4KPiB2NTogc29tZSBzbWFsbCBvcHRpbWl6YXRpb25zIChDaGlhLUkgV3UpLgo+IHY0OiBt
YWtlIHRoZW0gdmlydGlvLXByaXZhdGUgaW5zdGVhZCBvZiBnZW5lcmljIGhlbHBlcnMuCj4KPiBT
aWduZWQtb2ZmLWJ5OiBHZXJkIEhvZmZtYW5uIDxrcmF4ZWxAcmVkaGF0LmNvbT4KPiAtLS0KPiAg
ZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oIHwgMTcgKysrKysKPiAgZHJpdmVy
cy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2dlbS5jIHwgOTMgKysrKysrKysrKysrKysrKysrKysr
KysrKysrKwo+ICAyIGZpbGVzIGNoYW5nZWQsIDExMCBpbnNlcnRpb25zKCspCj4KPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oIGIvZHJpdmVycy9ncHUv
ZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oCj4gaW5kZXggZGI1N2JiYjM2MjE2Li5iNmJkMmIxMTQx
ZmIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oCj4gQEAgLTg0LDYgKzg0
LDEyIEBAIHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdCB7Cj4gICNkZWZpbmUgZ2VtX3RvX3ZpcnRp
b19ncHVfb2JqKGdvYmopIFwKPiAgICAgICAgIGNvbnRhaW5lcl9vZigoZ29iaiksIHN0cnVjdCB2
aXJ0aW9fZ3B1X29iamVjdCwgZ2VtX2Jhc2UpCj4KPiArc3RydWN0IHZpcnRpb19ncHVfb2JqZWN0
X2FycmF5IHsKPiArICAgICAgIHN0cnVjdCB3d19hY3F1aXJlX2N0eCB0aWNrZXQ7Cj4gKyAgICAg
ICB1MzIgbmVudHMsIHRvdGFsOwo+ICsgICAgICAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmpz
W107Cj4gK307Cj4gKwo+ICBzdHJ1Y3QgdmlydGlvX2dwdV92YnVmZmVyOwo+ICBzdHJ1Y3Qgdmly
dGlvX2dwdV9kZXZpY2U7Cj4KPiBAQCAtMjUxLDYgKzI1NywxNyBAQCBpbnQgdmlydGlvX2dwdV9t
b2RlX2R1bWJfbW1hcChzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwKPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVpbnQzMl90IGhhbmRsZSwgdWludDY0X3QgKm9mZnNldF9wKTsKPgo+
ICtzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKnZpcnRpb19ncHVfYXJyYXlfYWxsb2Mo
dTMyIG5lbnRzKTsKPiArc3RydWN0IHZpcnRpb19ncHVfb2JqZWN0X2FycmF5Kgo+ICt2aXJ0aW9f
Z3B1X2FycmF5X2Zyb21faGFuZGxlcyhzdHJ1Y3QgZHJtX2ZpbGUgKmRybV9maWxlLCB1MzIgKmhh
bmRsZXMsIHUzMiBuZW50cyk7Cj4gK3ZvaWQgdmlydGlvX2dwdV9hcnJheV9hZGRfb2JqKHN0cnVj
dCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqb2JqcywKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaik7Cj4gK2ludCB2aXJ0aW9fZ3B1X2Fy
cmF5X2xvY2tfcmVzdihzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKm9ianMpOwo+ICt2
b2lkIHZpcnRpb19ncHVfYXJyYXlfdW5sb2NrX3Jlc3Yoc3RydWN0IHZpcnRpb19ncHVfb2JqZWN0
X2FycmF5ICpvYmpzKTsKPiArdm9pZCB2aXJ0aW9fZ3B1X2FycmF5X2FkZF9mZW5jZShzdHJ1Y3Qg
dmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKm9ianMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSk7Cj4gK3ZvaWQgdmlydGlvX2dwdV9hcnJh
eV9wdXRfZnJlZShzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKm9ianMpOwo+ICsKPiAg
LyogdmlydGlvIHZnICovCj4gIGludCB2aXJ0aW9fZ3B1X2FsbG9jX3ZidWZzKHN0cnVjdCB2aXJ0
aW9fZ3B1X2RldmljZSAqdmdkZXYpOwo+ICB2b2lkIHZpcnRpb19ncHVfZnJlZV92YnVmcyhzdHJ1
Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3ZpcnRpby92aXJ0Z3B1X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1
X2dlbS5jCj4gaW5kZXggNmZlNmY3MmY2NGQxLi5mMzc5OWYyZTk3Y2IgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2dlbS5jCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3ZpcnRpby92aXJ0Z3B1X2dlbS5jCj4gQEAgLTE3MSwzICsxNzEsOTYgQEAgdm9pZCB2aXJ0
aW9fZ3B1X2dlbV9vYmplY3RfY2xvc2Uoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosCj4gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcW9iai0+aHdfcmVz
X2hhbmRsZSk7Cj4gICAgICAgICB2aXJ0aW9fZ3B1X29iamVjdF91bnJlc2VydmUocW9iaik7Cj4g
IH0KPiArCj4gK3N0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqdmlydGlvX2dwdV9hcnJh
eV9hbGxvYyh1MzIgbmVudHMpCj4gK3sKPiArICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVj
dF9hcnJheSAqb2JqczsKPiArICAgICAgIHNpemVfdCBzaXplID0gc2l6ZW9mKCpvYmpzKSArIHNp
emVvZihvYmpzLT5vYmpzWzBdKSAqIG5lbnRzOwo+ICsKPiArICAgICAgIG9ianMgPSBrbWFsbG9j
KHNpemUsIEdGUF9LRVJORUwpOwo+ICsgICAgICAgaWYgKCFvYmpzKQo+ICsgICAgICAgICAgICAg
ICByZXR1cm4gTlVMTDsKPiArCj4gKyAgICAgICBvYmpzLT5uZW50cyA9IDA7Cj4gKyAgICAgICBv
YmpzLT50b3RhbCA9IG5lbnRzOwo+ICsgICAgICAgcmV0dXJuIG9ianM7Cj4gK30KPiArCj4gK3N0
YXRpYyB2b2lkIHZpcnRpb19ncHVfYXJyYXlfZnJlZShzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3Rf
YXJyYXkgKm9ianMpCj4gK3sKPiArICAgICAgIGtmcmVlKG9ianMpOwo+ICt9Cj4gKwo+ICtzdHJ1
Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkqCj4gK3ZpcnRpb19ncHVfYXJyYXlfZnJvbV9oYW5k
bGVzKHN0cnVjdCBkcm1fZmlsZSAqZHJtX2ZpbGUsIHUzMiAqaGFuZGxlcywgdTMyIG5lbnRzKQo+
ICt7Cj4gKyAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKm9ianM7Cj4gKyAg
ICAgICB1MzIgaTsKPiArCj4gKyAgICAgICBvYmpzID0gdmlydGlvX2dwdV9hcnJheV9hbGxvYyhu
ZW50cyk7Cj4gKyAgICAgICBpZiAoIW9ianMpCj4gKyAgICAgICAgICAgICAgIHJldHVybiBOVUxM
Owo+ICsKPiArICAgICAgIGZvciAoaSA9IDA7IGkgPCBuZW50czsgaSsrKSB7Cj4gKyAgICAgICAg
ICAgICAgIG9ianMtPm9ianNbaV0gPSBkcm1fZ2VtX29iamVjdF9sb29rdXAoZHJtX2ZpbGUsIGhh
bmRsZXNbaV0pOwo+ICsgICAgICAgICAgICAgICBpZiAoIW9ianMtPm9ianNbaV0pIHsKPiArICAg
ICAgICAgICAgICAgICAgICAgICBvYmpzLT5uZW50cyA9IGk7Cj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgdmlydGlvX2dwdV9hcnJheV9wdXRfZnJlZShvYmpzKTsKPiArICAgICAgICAgICAgICAg
ICAgICAgICByZXR1cm4gTlVMTDsKPiArICAgICAgICAgICAgICAgfQo+ICsgICAgICAgfQo+ICsg
ICAgICAgb2Jqcy0+bmVudHMgPSBpOwo+ICsgICAgICAgcmV0dXJuIG9ianM7Cj4gK30KPiArCj4g
K3ZvaWQgdmlydGlvX2dwdV9hcnJheV9hZGRfb2JqKHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9h
cnJheSAqb2JqcywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2dl
bV9vYmplY3QgKm9iaikKPiArewo+ICsgICAgICAgaWYgKFdBUk5fT05fT05DRShvYmpzLT5uZW50
cyA9PSBvYmpzLT50b3RhbCkpCj4gKyAgICAgICAgICAgICAgIHJldHVybjsKPiArCj4gKyAgICAg
ICBkcm1fZ2VtX29iamVjdF9nZXQob2JqKTsKPiArICAgICAgIG9ianMtPm9ianNbb2Jqcy0+bmVu
dHNdID0gb2JqOwo+ICsgICAgICAgb2Jqcy0+bmVudHMrKzsKPiArfQo+ICsKPiAraW50IHZpcnRp
b19ncHVfYXJyYXlfbG9ja19yZXN2KHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqb2Jq
cykKPiArewo+ICsgICAgICAgaW50IHJldDsKPiArCj4gKyAgICAgICBpZiAob2Jqcy0+bmVudHMg
PT0gMSkgewo+ICsgICAgICAgICAgICAgICByZXQgPSBkbWFfcmVzdl9sb2NrKG9ianMtPm9ianNb
MF0tPnJlc3YsIE5VTEwpOwpkbWFfcmVzdl9sb2NrX2ludGVycnVwdGlibGUgdG8gbWF0Y2ggd2hh
dCBkcm1fZ2VtX2xvY2tfcmVzZXJ2YXRpb25zIHVzZXMuCj4gKyAgICAgICB9IGVsc2Ugewo+ICsg
ICAgICAgICAgICAgICByZXQgPSBkcm1fZ2VtX2xvY2tfcmVzZXJ2YXRpb25zKG9ianMtPm9ianMs
IG9ianMtPm5lbnRzLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICZvYmpzLT50aWNrZXQpOwo+ICsgICAgICAgfQo+ICsgICAgICAgcmV0dXJuIHJldDsK
PiArfQo+ICsKPiArdm9pZCB2aXJ0aW9fZ3B1X2FycmF5X3VubG9ja19yZXN2KHN0cnVjdCB2aXJ0
aW9fZ3B1X29iamVjdF9hcnJheSAqb2JqcykKPiArewo+ICsgICAgICAgaWYgKG9ianMtPm5lbnRz
ID09IDEpIHsKPiArICAgICAgICAgICAgICAgZG1hX3Jlc3ZfdW5sb2NrKG9ianMtPm9ianNbMF0t
PnJlc3YpOwo+ICsgICAgICAgfSBlbHNlIHsKPiArICAgICAgICAgICAgICAgZHJtX2dlbV91bmxv
Y2tfcmVzZXJ2YXRpb25zKG9ianMtPm9ianMsIG9ianMtPm5lbnRzLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm9ianMtPnRpY2tldCk7Cj4gKyAgICAgICB9
Cj4gK30KPiArCj4gK3ZvaWQgdmlydGlvX2dwdV9hcnJheV9hZGRfZmVuY2Uoc3RydWN0IHZpcnRp
b19ncHVfb2JqZWN0X2FycmF5ICpvYmpzLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCj4gK3sKPiArICAgICAgIGludCBpOwo+ICsKPiAr
ICAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmpzLT5uZW50czsgaSsrKQo+ICsgICAgICAgICAgICAg
ICBkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZShvYmpzLT5vYmpzW2ldLT5yZXN2LCBmZW5jZSk7Cj4g
K30KPiArCj4gK3ZvaWQgdmlydGlvX2dwdV9hcnJheV9wdXRfZnJlZShzdHJ1Y3QgdmlydGlvX2dw
dV9vYmplY3RfYXJyYXkgKm9ianMpCj4gK3sKPiArICAgICAgIHUzMiBpOwo+ICsKPiArICAgICAg
IGZvciAoaSA9IDA7IGkgPCBvYmpzLT5uZW50czsgaSsrKQo+ICsgICAgICAgICAgICAgICBkcm1f
Z2VtX29iamVjdF9wdXRfdW5sb2NrZWQob2Jqcy0+b2Jqc1tpXSk7Cj4gKyAgICAgICB2aXJ0aW9f
Z3B1X2FycmF5X2ZyZWUob2Jqcyk7Cj4gK30KPiAtLQo+IDIuMTguMQo+Cl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QK
ZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
