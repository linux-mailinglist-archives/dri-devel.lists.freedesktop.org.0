Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4870C10699B
	for <lists+dri-devel@lfdr.de>; Fri, 22 Nov 2019 11:06:04 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3F52D6F51A;
	Fri, 22 Nov 2019 10:05:52 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B05096F50C
 for <dri-devel@lists.freedesktop.org>; Fri, 22 Nov 2019 10:05:50 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 3972EB1A8;
 Fri, 22 Nov 2019 10:05:48 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: patrik.r.jakobsson@gmail.com,
	airlied@linux.ie,
	daniel@ffwll.ch
Subject: [PATCH 5/6] drm/gma500: Store framebuffer in struct drm_fb_helper
Date: Fri, 22 Nov 2019 11:05:44 +0100
Message-Id: <20191122100545.16812-6-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191122100545.16812-1-tzimmermann@suse.de>
References: <20191122100545.16812-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGdtYTUwMCBkcml2ZXIgc3RvcmVzIHRoZSBjb25zb2xlIGZyYW1lYnVmZmVyIGluIHN0cnVj
dCBwc2JfZmJkZXYuCk1vdmluZyBpdCBpbnRvIHN0cnVjdCBkcm1fZmJfaGVscGVyIHdpbGwgYWxs
b3cgZm9yIHJlbW92YWwgb2Ygc3RydWN0CnBzYl9mYmRldi4KClNpZ25lZC1vZmYtYnk6IFRob21h
cyBaaW1tZXJtYW5uIDx0emltbWVybWFubkBzdXNlLmRlPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9n
bWE1MDAvYWNjZWxfMmQuYyAgICB8ICA1ICsrKy0tCiBkcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2Zy
YW1lYnVmZmVyLmMgfCAxNiArKysrKysrKysrLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vZ21hNTAw
L2ZyYW1lYnVmZmVyLmggfCAgMSAtCiAzIGZpbGVzIGNoYW5nZWQsIDEzIGluc2VydGlvbnMoKyks
IDkgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9hY2Nl
bF8yZC5jIGIvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9hY2NlbF8yZC5jCmluZGV4IDNkMWFkMmY4
NTYyOC4uMmE2MGFkZDEwZGJkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2Fj
Y2VsXzJkLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9hY2NlbF8yZC5jCkBAIC0yMjcs
OCArMjI3LDggQEAgc3RhdGljIHZvaWQgcHNiZmJfY29weWFyZWFfYWNjZWwoc3RydWN0IGZiX2lu
Zm8gKmluZm8sCiAJCQkJIGNvbnN0IHN0cnVjdCBmYl9jb3B5YXJlYSAqYSkKIHsKIAlzdHJ1Y3Qg
cHNiX2ZiZGV2ICpmYmRldiA9IGluZm8tPnBhcjsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0g
ZmJkZXYtPmZiLmRldjsKIAlzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiA9IGZiZGV2LT5wc2Jf
ZmJfaGVscGVyLmZiOworCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBmYi0+ZGV2OwogCXN0cnVj
dCBkcm1fcHNiX3ByaXZhdGUgKmRldl9wcml2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKIAl1aW50MzJf
dCBvZmZzZXQ7CiAJdWludDMyX3Qgc3RyaWRlOwpAQCAtMzA5LDcgKzMwOSw4IEBAIHZvaWQgcHNi
ZmJfY29weWFyZWEoc3RydWN0IGZiX2luZm8gKmluZm8sCiBpbnQgcHNiZmJfc3luYyhzdHJ1Y3Qg
ZmJfaW5mbyAqaW5mbykKIHsKIAlzdHJ1Y3QgcHNiX2ZiZGV2ICpmYmRldiA9IGluZm8tPnBhcjsK
LQlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gZmJkZXYtPmZiLmRldjsKKwlzdHJ1Y3QgZHJtX2Zy
YW1lYnVmZmVyICpmYiA9IGZiZGV2LT5wc2JfZmJfaGVscGVyLmZiOworCXN0cnVjdCBkcm1fZGV2
aWNlICpkZXYgPSBmYi0+ZGV2OwogCXN0cnVjdCBkcm1fcHNiX3ByaXZhdGUgKmRldl9wcml2ID0g
ZGV2LT5kZXZfcHJpdmF0ZTsKIAl1bnNpZ25lZCBsb25nIF9lbmQgPSBqaWZmaWVzICsgSFo7CiAJ
aW50IGJ1c3kgPSAwOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9mcmFtZWJ1
ZmZlci5jIGIvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9mcmFtZWJ1ZmZlci5jCmluZGV4IDc2NjE4
MmRhOTdmNi4uMGM0NGJhOGMzYTc5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZ21hNTAw
L2ZyYW1lYnVmZmVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9mcmFtZWJ1ZmZlci5j
CkBAIC03OCw3ICs3OCw3IEBAIHN0YXRpYyBpbnQgcHNiZmJfc2V0Y29scmVnKHVuc2lnbmVkIHJl
Z25vLCB1bnNpZ25lZCByZWQsIHVuc2lnbmVkIGdyZWVuLAogc3RhdGljIGludCBwc2JmYl9wYW4o
c3RydWN0IGZiX3Zhcl9zY3JlZW5pbmZvICp2YXIsIHN0cnVjdCBmYl9pbmZvICppbmZvKQogewog
CXN0cnVjdCBwc2JfZmJkZXYgKmZiZGV2ID0gaW5mby0+cGFyOwotCXN0cnVjdCBkcm1fZnJhbWVi
dWZmZXIgKmZiID0gJmZiZGV2LT5mYjsKKwlzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiA9IGZi
ZGV2LT5wc2JfZmJfaGVscGVyLmZiOwogCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBmYi0+ZGV2
OwogCXN0cnVjdCBndHRfcmFuZ2UgKmd0dCA9IHRvX2d0dF9yYW5nZShmYi0+b2JqWzBdKTsKIApA
QCAtMTQ2LDcgKzE0Niw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qgdm1fb3BlcmF0aW9uc19zdHJ1
Y3QgcHNiZmJfdm1fb3BzID0gewogc3RhdGljIGludCBwc2JmYl9tbWFwKHN0cnVjdCBmYl9pbmZv
ICppbmZvLCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSkKIHsKIAlzdHJ1Y3QgcHNiX2ZiZGV2
ICpmYmRldiA9IGluZm8tPnBhcjsKLQlzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiA9ICZmYmRl
di0+ZmI7CisJc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIgPSBmYmRldi0+cHNiX2ZiX2hlbHBl
ci5mYjsKIAogCWlmICh2bWEtPnZtX3Bnb2ZmICE9IDApCiAJCXJldHVybiAtRUlOVkFMOwpAQCAt
MzA0LDcgKzMwNCw3IEBAIHN0YXRpYyBpbnQgcHNiZmJfY3JlYXRlKHN0cnVjdCBwc2JfZmJkZXYg
KmZiZGV2LAogCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBmYmRldi0+cHNiX2ZiX2hlbHBlci5k
ZXY7CiAJc3RydWN0IGRybV9wc2JfcHJpdmF0ZSAqZGV2X3ByaXYgPSBkZXYtPmRldl9wcml2YXRl
OwogCXN0cnVjdCBmYl9pbmZvICppbmZvOwotCXN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0g
JmZiZGV2LT5mYjsKKwlzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYjsKIAlzdHJ1Y3QgZHJtX21v
ZGVfZmJfY21kMiBtb2RlX2NtZDsKIAlpbnQgc2l6ZTsKIAlpbnQgcmV0OwpAQCAtMzc3LDkgKzM3
NywxMSBAQCBzdGF0aWMgaW50IHBzYmZiX2NyZWF0ZShzdHJ1Y3QgcHNiX2ZiZGV2ICpmYmRldiwK
IAogCW1vZGVfY21kLnBpeGVsX2Zvcm1hdCA9IGRybV9tb2RlX2xlZ2FjeV9mYl9mb3JtYXQoYnBw
LCBkZXB0aCk7CiAKLQlyZXQgPSBwc2JfZnJhbWVidWZmZXJfaW5pdChkZXYsIGZiLCAmbW9kZV9j
bWQsICZiYWNraW5nLT5nZW0pOwotCWlmIChyZXQpCisJZmIgPSBwc2JfZnJhbWVidWZmZXJfY3Jl
YXRlKGRldiwgJm1vZGVfY21kLCAmYmFja2luZy0+Z2VtKTsKKwlpZiAoSVNfRVJSKGZiKSkgewor
CQlyZXQgPSBQVFJfRVJSKGZiKTsKIAkJZ290byBvdXQ7CisJfQogCiAJZmJkZXYtPnBzYl9mYl9o
ZWxwZXIuZmIgPSBmYjsKIApAQCAtNDc3LDcgKzQ3OSw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZHJtX2ZiX2hlbHBlcl9mdW5jcyBwc2JfZmJfaGVscGVyX2Z1bmNzID0gewogCiBzdGF0aWMgaW50
IHBzYl9mYmRldl9kZXN0cm95KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBwc2JfZmJk
ZXYgKmZiZGV2KQogewotCXN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0gJmZiZGV2LT5mYjsK
KwlzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiA9IGZiZGV2LT5wc2JfZmJfaGVscGVyLmZiOwog
CiAJZHJtX2ZiX2hlbHBlcl91bnJlZ2lzdGVyX2ZiaSgmZmJkZXYtPnBzYl9mYl9oZWxwZXIpOwog
CkBAIC00ODcsNiArNDg5LDggQEAgc3RhdGljIGludCBwc2JfZmJkZXZfZGVzdHJveShzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgcHNiX2ZiZGV2ICpmYmRldikKIAogCWlmIChmYi0+b2Jq
WzBdKQogCQlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQoZmItPm9ialswXSk7CisJa2ZyZWUo
ZmIpOworCiAJcmV0dXJuIDA7CiB9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9nbWE1
MDAvZnJhbWVidWZmZXIuaCBiL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvZnJhbWVidWZmZXIuaApp
bmRleCBhZTEyODAxODI5YjIuLmM3NWY0OGM0NDkyMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2dtYTUwMC9mcmFtZWJ1ZmZlci5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvZnJh
bWVidWZmZXIuaApAQCAtMTUsNyArMTUsNiBAQAogCiBzdHJ1Y3QgcHNiX2ZiZGV2IHsKIAlzdHJ1
Y3QgZHJtX2ZiX2hlbHBlciBwc2JfZmJfaGVscGVyOyAvKiBtdXN0IGJlIGZpcnN0ICovCi0Jc3Ry
dWN0IGRybV9mcmFtZWJ1ZmZlciBmYjsKIH07CiAKIGV4dGVybiBpbnQgZ21hX2Nvbm5lY3Rvcl9j
bG9uZXMoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgaW50IHR5cGVfbWFzayk7Ci0tIAoyLjIzLjAK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZl
bCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
