Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6B0181C211
	for <lists+dri-devel@lfdr.de>; Tue, 14 May 2019 07:44:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CEC338926D;
	Tue, 14 May 2019 05:44:03 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x44a.google.com (mail-pf1-x44a.google.com
 [IPv6:2607:f8b0:4864:20::44a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A8A688926C
 for <dri-devel@lists.freedesktop.org>; Tue, 14 May 2019 05:44:02 +0000 (UTC)
Received: by mail-pf1-x44a.google.com with SMTP id e20so11193252pfn.8
 for <dri-devel@lists.freedesktop.org>; Mon, 13 May 2019 22:44:02 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=J7jNxXx2/Tojw9LkQBvkznuAV27E11EoaIcDTsM30ik=;
 b=Ljq+ShE5R/WJzZ+2Trvq2v+ncRJWipyD2CVV5Dq0BEoHVKyLT34dIhOFrjMUiVDDG4
 pEpHYYPTsZefrUVnPJGXKYViFxlgbmoYwroadlG2jbTfkle1uHpDiSV65mDer+P9sS1B
 Lc0l9YJgY19zQ5H8KhhWrU8n5dhzHaDbqgPzCDf7ytyEJGqYHXf1OBz7IWyE31jMYaXA
 5YeakG3mp0Q4wrWt4w+AMfVT2uQZeDMtaozDnCp/qC0m4LXugnji/nAeKGWKVj8BMaAV
 gX/zQztl6mPGFrSKnQCNyyNAX4aXqpAwWu1zvNxq+DwZAn5dO1BfCqKrsgRRPQ0e5wjN
 rQGg==
X-Gm-Message-State: APjAAAXj4tvKS4GjNfk4TvDXXBkxK35FyC+7LNUSHAdu8L/RoM9n+lSa
 Eko87ZIs4FRCUzlM5V7Nnrf5R2dz201oH16/3trZ/w==
X-Google-Smtp-Source: APXvYqwDgWK6D5zh2H9zOeZMl7FTqGXfZom8j6k/qPQTCzWEIs4iUL6yGm+xbdZd25stfXMxSVVYpf0Cp9+yxVzww2vLNg==
X-Received: by 2002:a63:1c4:: with SMTP id 187mr8764328pgb.317.1557812641863; 
 Mon, 13 May 2019 22:44:01 -0700 (PDT)
Date: Mon, 13 May 2019 22:42:37 -0700
In-Reply-To: <20190514054251.186196-1-brendanhiggins@google.com>
Message-Id: <20190514054251.186196-5-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190514054251.186196-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.21.0.1020.gf2820cf01a-goog
Subject: [PATCH v3 04/18] kunit: test: add kunit_stream a std::stream like
 logger
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, keescook@google.com, 
 kieran.bingham@ideasonboard.com, mcgrof@kernel.org, robh@kernel.org, 
 sboyd@kernel.org, shuah@kernel.org, tytso@mit.edu, 
 yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=J7jNxXx2/Tojw9LkQBvkznuAV27E11EoaIcDTsM30ik=;
 b=rBSMRYv6rcgf9//g8xbBS7nj7wXeNN0kUp4Ny4gMt/205NXZuBUEfAGZGUqQ/IIRLJ
 T9q5gjFm+3UV+T+Ba55A5XSzmNTjVsyCWu7g0rjQIhYWvGtM/lKSV0MBPT7+Uu4sj3Ns
 cdhhmUPyS9LpYUrAU9TSmLXVwMsy8Ru0sHQaCkmJQcniNEVVGKyzGisJ5rNE+SySd0Ho
 5bEf+Nlf5wVndA4XF35fHsn5SKA+4SR6UH8eJFEQyxBNdjWzK2fW50vOUx5PIkp8y7FR
 x0rv8s/8/ssOFMyHsqoRkTT4/0V1oZ3eddqPhKnu4A9BAU4StCJclt3AgjNPIBj/4Hmj
 SzLg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, dan.j.williams@intel.com,
 kunit-dev@googlegroups.com, richard@nod.at, rdunlap@infradead.org,
 linux-kernel@vger.kernel.org, mpe@ellerman.id.au,
 linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QSBsb3Qgb2YgdGhlIGV4cGVjdGF0aW9uIGFuZCBhc3NlcnRpb24gaW5mcmFzdHJ1Y3R1cmUgcHJp
bnRzIG91dCBmYWlybHkKY29tcGxpY2F0ZWQgdGVzdCBmYWlsdXJlIG1lc3NhZ2VzLCBzbyBhZGQg
YSBDKysgc3R5bGUgbG9nIGxpYnJhcnkgZm9yCmZvciBsb2dnaW5nIHRlc3QgcmVzdWx0cy4KClNp
Z25lZC1vZmYtYnk6IEJyZW5kYW4gSGlnZ2lucyA8YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbT4K
UmV2aWV3ZWQtYnk6IEdyZWcgS3JvYWgtSGFydG1hbiA8Z3JlZ2toQGxpbnV4Zm91bmRhdGlvbi5v
cmc+ClJldmlld2VkLWJ5OiBMb2dhbiBHdW50aG9ycGUgPGxvZ2FuZ0BkZWx0YXRlZS5jb20+Ci0t
LQpDaGFuZ2VzIFNpbmNlIExhc3QgUmV2aXNpb246CiAtIEdyZWcgYW5kIEZyYW5rIHJlcXVlc3Rl
ZCB0aGF0IEtVbml0IHByaW50cyBvdXQgcmVzdWx0cyBpbiBUQVAgZm9ybWF0OwogICB0aGUgd29y
ayB0byBzdXBwb3J0IHRoaXMgbW9zdGx5IGhhcHBlbmVkIGluIFBBVENIIDAxLzE4LgogLSBga3Vu
aXRfc3RyZWFtX2dldF9sZXZlbGAgd2FzIG1hZGUgc3RhdGljIGFzIHN1Z2dlc3RlZCBieSBrYnVp
bGQgYm90LgotLS0KIGluY2x1ZGUva3VuaXQva3VuaXQtc3RyZWFtLmggfCAgODUgKysrKysrKysr
KysrKysrKysrKysKIGluY2x1ZGUva3VuaXQvdGVzdC5oICAgICAgICAgfCAgIDMgKwoga3VuaXQv
TWFrZWZpbGUgICAgICAgICAgICAgICB8ICAgMyArLQoga3VuaXQva3VuaXQtc3RyZWFtLmMgICAg
ICAgICB8IDE1MiArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwoga3VuaXQvdGVz
dC5jICAgICAgICAgICAgICAgICB8ICAgNyArKwogNSBmaWxlcyBjaGFuZ2VkLCAyNDkgaW5zZXJ0
aW9ucygrKSwgMSBkZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGluY2x1ZGUva3VuaXQv
a3VuaXQtc3RyZWFtLmgKIGNyZWF0ZSBtb2RlIDEwMDY0NCBrdW5pdC9rdW5pdC1zdHJlYW0uYwoK
ZGlmZiAtLWdpdCBhL2luY2x1ZGUva3VuaXQva3VuaXQtc3RyZWFtLmggYi9pbmNsdWRlL2t1bml0
L2t1bml0LXN0cmVhbS5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMDAu
LmQ0NTdhNTRmZTAxMDAKLS0tIC9kZXYvbnVsbAorKysgYi9pbmNsdWRlL2t1bml0L2t1bml0LXN0
cmVhbS5oCkBAIC0wLDAgKzEsODUgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwt
Mi4wICovCisvKgorICogQysrIHN0cmVhbSBzdHlsZSBzdHJpbmcgZm9ybWF0dGVyIGFuZCBwcmlu
dGVyIHVzZWQgaW4gS1VuaXQgZm9yIG91dHB1dHRpbmcKKyAqIEtVbml0IG1lc3NhZ2VzLgorICoK
KyAqIENvcHlyaWdodCAoQykgMjAxOSwgR29vZ2xlIExMQy4KKyAqIEF1dGhvcjogQnJlbmRhbiBI
aWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29tPgorICovCisKKyNpZm5kZWYgX0tVTklU
X0tVTklUX1NUUkVBTV9ICisjZGVmaW5lIF9LVU5JVF9LVU5JVF9TVFJFQU1fSAorCisjaW5jbHVk
ZSA8bGludXgvdHlwZXMuaD4KKyNpbmNsdWRlIDxrdW5pdC9zdHJpbmctc3RyZWFtLmg+CisKK3N0
cnVjdCBrdW5pdDsKKworLyoqCisgKiBzdHJ1Y3Qga3VuaXRfc3RyZWFtIC0gYSBzdGQ6OnN0cmVh
bSBzdHlsZSBzdHJpbmcgYnVpbGRlci4KKyAqCisgKiBBIHN0ZDo6c3RyZWFtIHN0eWxlIHN0cmlu
ZyBidWlsZGVyLiBBbGxvd3MgbWVzc2FnZXMgdG8gYmUgYnVpbHQgdXAgYW5kCisgKiBwcmludGVk
IGFsbCBhdCBvbmNlLgorICovCitzdHJ1Y3Qga3VuaXRfc3RyZWFtIHsKKwkvKiBwcml2YXRlOiBp
bnRlcm5hbCB1c2Ugb25seS4gKi8KKwlzdHJ1Y3Qga3VuaXQgKnRlc3Q7CisJc3BpbmxvY2tfdCBs
b2NrOyAvKiBHdWFyZHMgbGV2ZWwuICovCisJY29uc3QgY2hhciAqbGV2ZWw7CisJc3RydWN0IHN0
cmluZ19zdHJlYW0gKmludGVybmFsX3N0cmVhbTsKK307CisKKy8qKgorICoga3VuaXRfbmV3X3N0
cmVhbSgpIC0gY29uc3RydWN0cyBhIG5ldyAmc3RydWN0IGt1bml0X3N0cmVhbS4KKyAqIEB0ZXN0
OiBUaGUgdGVzdCBjb250ZXh0IG9iamVjdC4KKyAqCisgKiBDb25zdHJ1Y3RzIGEgbmV3IHRlc3Qg
bWFuYWdlZCAmc3RydWN0IGt1bml0X3N0cmVhbS4KKyAqLworc3RydWN0IGt1bml0X3N0cmVhbSAq
a3VuaXRfbmV3X3N0cmVhbShzdHJ1Y3Qga3VuaXQgKnRlc3QpOworCisvKioKKyAqIGt1bml0X3N0
cmVhbV9zZXRfbGV2ZWwoKTogc2V0cyB0aGUgbGV2ZWwgdGhhdCBzdHJpbmcgc2hvdWxkIGJlIHBy
aW50ZWQgYXQuCisgKiBAdGhpczogdGhlIHN0cmVhbSBiZWluZyBvcGVyYXRlZCBvbi4KKyAqIEBs
ZXZlbDogdGhlIHByaW50IGxldmVsIHRoZSBzdHJlYW0gaXMgc2V0IHRvIG91dHB1dCB0by4KKyAq
CisgKiBTZXRzIHRoZSBwcmludCBsZXZlbCBhdCB3aGljaCB0aGUgc3RyZWFtIG91dHB1dHMuCisg
Ki8KK3ZvaWQga3VuaXRfc3RyZWFtX3NldF9sZXZlbChzdHJ1Y3Qga3VuaXRfc3RyZWFtICp0aGlz
LCBjb25zdCBjaGFyICpsZXZlbCk7CisKKy8qKgorICoga3VuaXRfc3RyZWFtX2FkZCgpOiBhZGRz
IHRoZSBmb3JtYXR0ZWQgaW5wdXQgdG8gdGhlIGludGVybmFsIGJ1ZmZlci4KKyAqIEB0aGlzOiB0
aGUgc3RyZWFtIGJlaW5nIG9wZXJhdGVkIG9uLgorICogQGZtdDogcHJpbnRmIHN0eWxlIGZvcm1h
dCBzdHJpbmcgdG8gYXBwZW5kIHRvIHN0cmVhbS4KKyAqCisgKiBBcHBlbmRzIHRoZSBmb3JtYXR0
ZWQgc3RyaW5nLCBAZm10LCB0byB0aGUgaW50ZXJuYWwgYnVmZmVyLgorICovCit2b2lkIF9fcHJp
bnRmKDIsIDMpIGt1bml0X3N0cmVhbV9hZGQoc3RydWN0IGt1bml0X3N0cmVhbSAqdGhpcywKKwkJ
CQkgICAgIGNvbnN0IGNoYXIgKmZtdCwgLi4uKTsKKworLyoqCisgKiBrdW5pdF9zdHJlYW1fYXBw
ZW5kKCk6IGFwcGVuZHMgdGhlIGNvbnRlbnRzIG9mIEBvdGhlciB0byBAdGhpcy4KKyAqIEB0aGlz
OiB0aGUgc3RyZWFtIHRvIHdoaWNoIEBvdGhlciBpcyBhcHBlbmRlZC4KKyAqIEBvdGhlcjogdGhl
IHN0cmVhbSB3aG9zZSBjb250ZW50cyBhcmUgYXBwZW5kZWQgdG8gQHRoaXMuCisgKgorICogQXBw
ZW5kcyB0aGUgY29udGVudHMgb2YgQG90aGVyIHRvIEB0aGlzLgorICovCit2b2lkIGt1bml0X3N0
cmVhbV9hcHBlbmQoc3RydWN0IGt1bml0X3N0cmVhbSAqdGhpcywgc3RydWN0IGt1bml0X3N0cmVh
bSAqb3RoZXIpOworCisvKioKKyAqIGt1bml0X3N0cmVhbV9jb21taXQoKTogcHJpbnRzIG91dCB0
aGUgaW50ZXJuYWwgYnVmZmVyIHRvIHRoZSB1c2VyLgorICogQHRoaXM6IHRoZSBzdHJlYW0gYmVp
bmcgb3BlcmF0ZWQgb24uCisgKgorICogT3V0cHV0cyB0aGUgY29udGVudHMgb2YgdGhlIGludGVy
bmFsIGJ1ZmZlciBhcyBhIGt1bml0X3ByaW50ayBmb3JtYXR0ZWQKKyAqIG91dHB1dC4KKyAqLwor
dm9pZCBrdW5pdF9zdHJlYW1fY29tbWl0KHN0cnVjdCBrdW5pdF9zdHJlYW0gKnRoaXMpOworCisv
KioKKyAqIGt1bml0X3N0cmVhbV9jbGVhcigpOiBjbGVhcnMgdGhlIGludGVybmFsIGJ1ZmZlci4K
KyAqIEB0aGlzOiB0aGUgc3RyZWFtIGJlaW5nIG9wZXJhdGVkIG9uLgorICoKKyAqIENsZWFycyB0
aGUgY29udGVudHMgb2YgdGhlIGludGVybmFsIGJ1ZmZlci4KKyAqLwordm9pZCBrdW5pdF9zdHJl
YW1fY2xlYXIoc3RydWN0IGt1bml0X3N0cmVhbSAqdGhpcyk7CisKKyNlbmRpZiAvKiBfS1VOSVRf
S1VOSVRfU1RSRUFNX0ggKi8KZGlmZiAtLWdpdCBhL2luY2x1ZGUva3VuaXQvdGVzdC5oIGIvaW5j
bHVkZS9rdW5pdC90ZXN0LmgKaW5kZXggNWU4NmQ4OGNkNTMwNS4uNGJjODM5ODg0YTgzYyAxMDA2
NDQKLS0tIGEvaW5jbHVkZS9rdW5pdC90ZXN0LmgKKysrIGIvaW5jbHVkZS9rdW5pdC90ZXN0LmgK
QEAgLTExLDYgKzExLDcgQEAKIAogI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+CiAjaW5jbHVkZSA8
bGludXgvc2xhYi5oPgorI2luY2x1ZGUgPGt1bml0L2t1bml0LXN0cmVhbS5oPgogCiBzdHJ1Y3Qg
a3VuaXRfcmVzb3VyY2U7CiAKQEAgLTE3Miw2ICsxNzMsOCBAQCBzdHJ1Y3Qga3VuaXQgewogCiB2
b2lkIGt1bml0X2luaXRfdGVzdChzdHJ1Y3Qga3VuaXQgKnRlc3QsIGNvbnN0IGNoYXIgKm5hbWUp
OwogCit2b2lkIGt1bml0X2ZhaWwoc3RydWN0IGt1bml0ICp0ZXN0LCBzdHJ1Y3Qga3VuaXRfc3Ry
ZWFtICpzdHJlYW0pOworCiBpbnQga3VuaXRfcnVuX3Rlc3RzKHN0cnVjdCBrdW5pdF9tb2R1bGUg
Km1vZHVsZSk7CiAKIC8qKgpkaWZmIC0tZ2l0IGEva3VuaXQvTWFrZWZpbGUgYi9rdW5pdC9NYWtl
ZmlsZQppbmRleCAyNzViNTY1YTBlODFmLi42ZGRjNjIyZWU2YjFjIDEwMDY0NAotLS0gYS9rdW5p
dC9NYWtlZmlsZQorKysgYi9rdW5pdC9NYWtlZmlsZQpAQCAtMSwyICsxLDMgQEAKIG9iai0kKENP
TkZJR19LVU5JVCkgKz0JCQl0ZXN0Lm8gXAotCQkJCQlzdHJpbmctc3RyZWFtLm8KKwkJCQkJc3Ry
aW5nLXN0cmVhbS5vIFwKKwkJCQkJa3VuaXQtc3RyZWFtLm8KZGlmZiAtLWdpdCBhL2t1bml0L2t1
bml0LXN0cmVhbS5jIGIva3VuaXQva3VuaXQtc3RyZWFtLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMDAwMDAwMC4uMTg4NGYxYjU1MDg4OAotLS0gL2Rldi9udWxsCisrKyBiL2t1
bml0L2t1bml0LXN0cmVhbS5jCkBAIC0wLDAgKzEsMTUyIEBACisvLyBTUERYLUxpY2Vuc2UtSWRl
bnRpZmllcjogR1BMLTIuMAorLyoKKyAqIEMrKyBzdHJlYW0gc3R5bGUgc3RyaW5nIGZvcm1hdHRl
ciBhbmQgcHJpbnRlciB1c2VkIGluIEtVbml0IGZvciBvdXRwdXR0aW5nCisgKiBLVW5pdCBtZXNz
YWdlcy4KKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMTksIEdvb2dsZSBMTEMuCisgKiBBdXRob3I6
IEJyZW5kYW4gSGlnZ2lucyA8YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbT4KKyAqLworCisjaW5j
bHVkZSA8a3VuaXQvdGVzdC5oPgorI2luY2x1ZGUgPGt1bml0L2t1bml0LXN0cmVhbS5oPgorI2lu
Y2x1ZGUgPGt1bml0L3N0cmluZy1zdHJlYW0uaD4KKworc3RhdGljIGNvbnN0IGNoYXIgKmt1bml0
X3N0cmVhbV9nZXRfbGV2ZWwoc3RydWN0IGt1bml0X3N0cmVhbSAqdGhpcykKK3sKKwl1bnNpZ25l
ZCBsb25nIGZsYWdzOworCWNvbnN0IGNoYXIgKmxldmVsOworCisJc3Bpbl9sb2NrX2lycXNhdmUo
JnRoaXMtPmxvY2ssIGZsYWdzKTsKKwlsZXZlbCA9IHRoaXMtPmxldmVsOworCXNwaW5fdW5sb2Nr
X2lycXJlc3RvcmUoJnRoaXMtPmxvY2ssIGZsYWdzKTsKKworCXJldHVybiBsZXZlbDsKK30KKwor
dm9pZCBrdW5pdF9zdHJlYW1fc2V0X2xldmVsKHN0cnVjdCBrdW5pdF9zdHJlYW0gKnRoaXMsIGNv
bnN0IGNoYXIgKmxldmVsKQoreworCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CisKKwlzcGluX2xvY2tf
aXJxc2F2ZSgmdGhpcy0+bG9jaywgZmxhZ3MpOworCXRoaXMtPmxldmVsID0gbGV2ZWw7CisJc3Bp
bl91bmxvY2tfaXJxcmVzdG9yZSgmdGhpcy0+bG9jaywgZmxhZ3MpOworfQorCit2b2lkIGt1bml0
X3N0cmVhbV9hZGQoc3RydWN0IGt1bml0X3N0cmVhbSAqdGhpcywgY29uc3QgY2hhciAqZm10LCAu
Li4pCit7CisJdmFfbGlzdCBhcmdzOworCXN0cnVjdCBzdHJpbmdfc3RyZWFtICpzdHJlYW0gPSB0
aGlzLT5pbnRlcm5hbF9zdHJlYW07CisKKwl2YV9zdGFydChhcmdzLCBmbXQpOworCisJaWYgKHN0
cmluZ19zdHJlYW1fdmFkZChzdHJlYW0sIGZtdCwgYXJncykgPCAwKQorCQlrdW5pdF9lcnIodGhp
cy0+dGVzdCwgIkZhaWxlZCB0byBhbGxvY2F0ZSBmcmFnbWVudDogJXNcbiIsIGZtdCk7CisKKwl2
YV9lbmQoYXJncyk7Cit9CisKK3ZvaWQga3VuaXRfc3RyZWFtX2FwcGVuZChzdHJ1Y3Qga3VuaXRf
c3RyZWFtICp0aGlzLAorCQkJCXN0cnVjdCBrdW5pdF9zdHJlYW0gKm90aGVyKQoreworCXN0cnVj
dCBzdHJpbmdfc3RyZWFtICpvdGhlcl9zdHJlYW0gPSBvdGhlci0+aW50ZXJuYWxfc3RyZWFtOwor
CWNvbnN0IGNoYXIgKm90aGVyX2NvbnRlbnQ7CisKKwlvdGhlcl9jb250ZW50ID0gc3RyaW5nX3N0
cmVhbV9nZXRfc3RyaW5nKG90aGVyX3N0cmVhbSk7CisKKwlpZiAoIW90aGVyX2NvbnRlbnQpIHsK
KwkJa3VuaXRfZXJyKHRoaXMtPnRlc3QsCisJCQkgICJGYWlsZWQgdG8gZ2V0IHN0cmluZyBmcm9t
IHNlY29uZCBhcmd1bWVudCBmb3IgYXBwZW5kaW5nLlxuIik7CisJCXJldHVybjsKKwl9CisKKwlr
dW5pdF9zdHJlYW1fYWRkKHRoaXMsIG90aGVyX2NvbnRlbnQpOworfQorCit2b2lkIGt1bml0X3N0
cmVhbV9jbGVhcihzdHJ1Y3Qga3VuaXRfc3RyZWFtICp0aGlzKQoreworCXN0cmluZ19zdHJlYW1f
Y2xlYXIodGhpcy0+aW50ZXJuYWxfc3RyZWFtKTsKK30KKwordm9pZCBrdW5pdF9zdHJlYW1fY29t
bWl0KHN0cnVjdCBrdW5pdF9zdHJlYW0gKnRoaXMpCit7CisJc3RydWN0IHN0cmluZ19zdHJlYW0g
KnN0cmVhbSA9IHRoaXMtPmludGVybmFsX3N0cmVhbTsKKwlzdHJ1Y3Qgc3RyaW5nX3N0cmVhbV9m
cmFnbWVudCAqZnJhZ21lbnQ7CisJY29uc3QgY2hhciAqbGV2ZWw7CisJY2hhciAqYnVmOworCisJ
bGV2ZWwgPSBrdW5pdF9zdHJlYW1fZ2V0X2xldmVsKHRoaXMpOworCWlmICghbGV2ZWwpIHsKKwkJ
a3VuaXRfZXJyKHRoaXMtPnRlc3QsCisJCQkgICJTdHJlYW0gd2FzIGNvbW1pdHRlZCB3aXRob3V0
IGEgc3BlY2lmaWVkIGxvZyBsZXZlbC5cbiIpOworCQlsZXZlbCA9IEtFUk5fRVJSOworCQlrdW5p
dF9zdHJlYW1fc2V0X2xldmVsKHRoaXMsIGxldmVsKTsKKwl9CisKKwlidWYgPSBzdHJpbmdfc3Ry
ZWFtX2dldF9zdHJpbmcoc3RyZWFtKTsKKwlpZiAoIWJ1ZikgeworCQlrdW5pdF9lcnIodGhpcy0+
dGVzdCwKKwkJCSAiQ291bGQgbm90IGFsbG9jYXRlIGJ1ZmZlciwgZHVtcGluZyBzdHJlYW06XG4i
KTsKKwkJbGlzdF9mb3JfZWFjaF9lbnRyeShmcmFnbWVudCwgJnN0cmVhbS0+ZnJhZ21lbnRzLCBu
b2RlKSB7CisJCQlrdW5pdF9lcnIodGhpcy0+dGVzdCwgZnJhZ21lbnQtPmZyYWdtZW50KTsKKwkJ
fQorCQlrdW5pdF9lcnIodGhpcy0+dGVzdCwgIlxuIik7CisJCWdvdG8gY2xlYW51cDsKKwl9CisK
KwlrdW5pdF9wcmludGsobGV2ZWwsIHRoaXMtPnRlc3QsIGJ1Zik7CisJa2ZyZWUoYnVmKTsKKwor
Y2xlYW51cDoKKwlrdW5pdF9zdHJlYW1fY2xlYXIodGhpcyk7Cit9CisKK3N0YXRpYyBpbnQga3Vu
aXRfc3RyZWFtX2luaXQoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMsIHZvaWQgKmNvbnRleHQp
Cit7CisJc3RydWN0IGt1bml0ICp0ZXN0ID0gY29udGV4dDsKKwlzdHJ1Y3Qga3VuaXRfc3RyZWFt
ICpzdHJlYW07CisKKwlzdHJlYW0gPSBremFsbG9jKHNpemVvZigqc3RyZWFtKSwgR0ZQX0tFUk5F
TCk7CisJaWYgKCFzdHJlYW0pCisJCXJldHVybiAtRU5PTUVNOworCisJcmVzLT5hbGxvY2F0aW9u
ID0gc3RyZWFtOworCXN0cmVhbS0+dGVzdCA9IHRlc3Q7CisJc3Bpbl9sb2NrX2luaXQoJnN0cmVh
bS0+bG9jayk7CisJc3RyZWFtLT5pbnRlcm5hbF9zdHJlYW0gPSBuZXdfc3RyaW5nX3N0cmVhbSgp
OworCisJaWYgKCFzdHJlYW0tPmludGVybmFsX3N0cmVhbSkgeworCQlrZnJlZShzdHJlYW0pOwor
CQlyZXR1cm4gLUVOT01FTTsKKwl9CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQga3Vu
aXRfc3RyZWFtX2ZyZWUoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMpCit7CisJc3RydWN0IGt1
bml0X3N0cmVhbSAqc3RyZWFtID0gcmVzLT5hbGxvY2F0aW9uOworCisJaWYgKCFzdHJpbmdfc3Ry
ZWFtX2lzX2VtcHR5KHN0cmVhbS0+aW50ZXJuYWxfc3RyZWFtKSkgeworCQlrdW5pdF9lcnIoc3Ry
ZWFtLT50ZXN0LAorCQkJICJFbmQgb2YgdGVzdCBjYXNlIHJlYWNoZWQgd2l0aCB1bmNvbW1pdHRl
ZCBzdHJlYW0gZW50cmllcy5cbiIpOworCQlrdW5pdF9zdHJlYW1fY29tbWl0KHN0cmVhbSk7CisJ
fQorCisJZGVzdHJveV9zdHJpbmdfc3RyZWFtKHN0cmVhbS0+aW50ZXJuYWxfc3RyZWFtKTsKKwlr
ZnJlZShzdHJlYW0pOworfQorCitzdHJ1Y3Qga3VuaXRfc3RyZWFtICprdW5pdF9uZXdfc3RyZWFt
KHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlczsKKwor
CXJlcyA9IGt1bml0X2FsbG9jX3Jlc291cmNlKHRlc3QsCisJCQkJICAga3VuaXRfc3RyZWFtX2lu
aXQsCisJCQkJICAga3VuaXRfc3RyZWFtX2ZyZWUsCisJCQkJICAgdGVzdCk7CisKKwlpZiAocmVz
KQorCQlyZXR1cm4gcmVzLT5hbGxvY2F0aW9uOworCWVsc2UKKwkJcmV0dXJuIE5VTEw7Cit9CmRp
ZmYgLS1naXQgYS9rdW5pdC90ZXN0LmMgYi9rdW5pdC90ZXN0LmMKaW5kZXggYTE1ZTZmOGM0MTU4
Mi4uMGJiNmY1M2E3Zjg3ZSAxMDA2NDQKLS0tIGEva3VuaXQvdGVzdC5jCisrKyBiL2t1bml0L3Rl
c3QuYwpAQCAtMTM4LDYgKzEzOCwxMyBAQCBzdGF0aWMgdm9pZCBrdW5pdF9wcmludF90ZXN0X2Nh
c2Vfb2tfbm90X29rKHN0cnVjdCBrdW5pdF9jYXNlICp0ZXN0X2Nhc2UsCiAJCQkgICAgICB0ZXN0
X2Nhc2UtPm5hbWUpOwogfQogCit2b2lkIGt1bml0X2ZhaWwoc3RydWN0IGt1bml0ICp0ZXN0LCBz
dHJ1Y3Qga3VuaXRfc3RyZWFtICpzdHJlYW0pCit7CisJa3VuaXRfc2V0X3N1Y2Nlc3ModGVzdCwg
ZmFsc2UpOworCWt1bml0X3N0cmVhbV9zZXRfbGV2ZWwoc3RyZWFtLCBLRVJOX0VSUik7CisJa3Vu
aXRfc3RyZWFtX2NvbW1pdChzdHJlYW0pOworfQorCiB2b2lkIGt1bml0X2luaXRfdGVzdChzdHJ1
Y3Qga3VuaXQgKnRlc3QsIGNvbnN0IGNoYXIgKm5hbWUpCiB7CiAJc3Bpbl9sb2NrX2luaXQoJnRl
c3QtPmxvY2spOwotLSAKMi4yMS4wLjEwMjAuZ2YyODIwY2YwMWEtZ29vZwoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
