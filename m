Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 25846EA2AB
	for <lists+dri-devel@lfdr.de>; Wed, 30 Oct 2019 18:35:40 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E85276EB05;
	Wed, 30 Oct 2019 17:35:36 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A35B36EAFA;
 Wed, 30 Oct 2019 17:35:35 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 30 Oct 2019 10:35:35 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.68,248,1569308400"; d="scan'208";a="198744581"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by fmsmga008.fm.intel.com with SMTP; 30 Oct 2019 10:35:31 -0700
Received: by stinkbox (sSMTP sendmail emulation);
 Wed, 30 Oct 2019 19:35:30 +0200
Date: Wed, 30 Oct 2019 19:35:30 +0200
From: Ville =?iso-8859-1?Q?Syrj=E4l=E4?= <ville.syrjala@linux.intel.com>
To: Hans de Goede <hdegoede@redhat.com>
Subject: Re: [PATCH] drm/i915: Program LUT before intel_color_commit() if LUT
 was not previously set v2
Message-ID: <20191030173530.GT1208@intel.com>
References: <20191028185851.592922-1-hdegoede@redhat.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191028185851.592922-1-hdegoede@redhat.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx <intel-gfx@lists.freedesktop.org>,
 dri-devel@lists.freedesktop.org, Rodrigo Vivi <rodrigo.vivi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gTW9uLCBPY3QgMjgsIDIwMTkgYXQgMDc6NTg6NTFQTSArMDEwMCwgSGFucyBkZSBHb2VkZSB3
cm90ZToKPiBTaW5jZSBjb21taXQgMDUxYTZkOGQzY2EwICgiZHJtL2k5MTU6IE1vdmUgTFVUIHBy
b2dyYW1taW5nIHRvIGhhcHBlbiBhZnRlcgo+IHZibGFuayB3YWl0cyIpLCBJIGFtIHNlZWluZyBh
biB1Z2x5IGNvbG9yZWQgZmxhc2ggb2YgdGhlIGZpcnN0IGZldyBkaXNwbGF5Cj4gbGluZXMgb24g
MiBDaGVycnkgVHJhaWwgZGV2aWNlcyB3aGVuIHRoZSBnYW1tYSB0YWJsZSBnZXRzIHNldCBmb3Ig
dGhlIGZpcnN0Cj4gdGltZS4gQSBibHVlIGZsYXNoIG9uIGEgR1BEIHdpbiBhbmQgYSB5ZWxsb3cg
Zmxhc2ggb24gYW4gQXN1cyBUMTAwSEEuCj4gCj4gVGhlIHByb2JsZW0gaXMgdGhhdCBzaW5jZSB0
aGlzIGNoYW5nZSwgdGhlIExVVCBpcyBwcm9ncmFtbWVkIGFmdGVyIHRoZQo+IHdyaXRlICphbmQg
bGF0Y2hpbmcqIG9mIHRoZSBkb3VibGUtYnVmZmVyZWQgcmVnaXN0ZXIgd2hpY2ggY2F1c2VzIHRo
ZSBMVVQKPiB0byBiZSB1c2VkIHN0YXJ0aW5nIGF0IHRoZSBuZXh0IGZyYW1lLiBUaGlzIG1lYW5z
IHRoYXQgdGhlIG9sZCBMVVQgaXMgc3RpbGwKPiB1c2VkIGZvciB0aGUgZmlyc3QgY291cGxlIG9m
IGxpbmVzIG9mIHRoZSBkaXNwbGF5LiBJZiBubyBMVVQgd2FzIGluIHVzZQo+IGJlZm9yZSB0aGVu
IHRoZSBMVVQgcmVnaXN0ZXJzIG1heSBjb250YWluIGJvZ3VzIHZhbHVlcy4gVGhpcyBsZWFkcyB0
bwo+IG1lc3NlZCB1cCBjb2xvcnMgdW50aWwgdGhlIG5ldyBMVVQgdmFsdWVzIGFyZSB3cml0dGVu
LiBBdCBsZWFzdCBvbiBDSFQgRFNJCj4gcGFuZWxzIHRoaXMgY2F1c2VzIG1lc3NlZCB1cCBjb2xv
cnMgb24gdGhlIGZpcnN0IGZldyBsaW5lcy4KPiAKPiBUaGlzIGNvbW1pdCBmaXhlcyB0aGlzIGJ5
IGFkZGluZyBhIGxvYWRfbHV0X2JlZm9yZV9jb21taXQgYm9vbGVhbiwKPiBtb2RpZnlpbmcgY29t
bWl0X3BpcGVfY29uZmlnKCkgdG8gbG9hZCB0aGUgbHV0cyBlYXJsaWVyIGlmIHRoaXMgaXMgc2V0
Lgo+IGFuZCBzZXR0aW5nIHRoaXMgZnJvbSBpbnRlbF9jb2xvcl9jaGVjayB3aGVuIGVuYWJsaW5n
IGdhbW1hIChyYXRoZXIgdGhlbgo+IHVwZGF0aW5nIGFuIGV4aXN0aW5nIGdhbW1hIHRhYmxlKS4K
PiAKPiBDaGFuZ2VzIGluIHYyOgo+IC1TaW1wbHkgY2hlY2sgZm9yIHNldHRpbmcgbG9hZF9sdXRf
YmVmb3JlX2NvbW1pdCB0bzoKPiAgaWYgKCFvbGRfY3J0Y19zdGF0ZS0+Z2FtbWFfZW5hYmxlICYm
IG5ld19jcnRjX3N0YXRlLT5nYW1tYV9lbmFibGUpCj4gCj4gRml4ZXM6IDA1MWE2ZDhkM2NhMCAo
ImRybS9pOTE1OiBNb3ZlIExVVCBwcm9ncmFtbWluZyB0byBoYXBwZW4gYWZ0ZXIgdmJsYW5rIHdh
aXRzIikKPiBTaWduZWQtb2ZmLWJ5OiBIYW5zIGRlIEdvZWRlIDxoZGVnb2VkZUByZWRoYXQuY29t
Pgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NvbG9yLmMgICAg
ICAgICB8IDE0ICsrKysrKysrKysrKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkv
aW50ZWxfZGlzcGxheS5jICAgICAgIHwgIDYgKysrKystCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oIHwgIDMgKysrCj4gIDMgZmlsZXMgY2hhbmdl
ZCwgMjIgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NvbG9yLmMgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2NvbG9yLmMKPiBpbmRleCBmYTQ0ZWI3M2QwODguLjk1NGEyMzJj
MTVkMSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Nv
bG9yLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2NvbG9yLmMK
PiBAQCAtMTA2Myw2ICsxMDYzLDggQEAgaW50ZWxfY29sb3JfYWRkX2FmZmVjdGVkX3BsYW5lcyhz
dHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqbmV3X2NydGNfc3RhdGUpCj4gIAkJaW50ZWxfYXRvbWlj
X2dldF9vbGRfY3J0Y19zdGF0ZShzdGF0ZSwgY3J0Yyk7Cj4gIAlzdHJ1Y3QgaW50ZWxfcGxhbmUg
KnBsYW5lOwo+ICAKPiArCW5ld19jcnRjX3N0YXRlLT5sb2FkX2x1dF9iZWZvcmVfY29tbWl0ID0g
ZmFsc2U7Cj4gKwo+ICAJaWYgKCFuZXdfY3J0Y19zdGF0ZS0+YmFzZS5hY3RpdmUgfHwKPiAgCSAg
ICBkcm1fYXRvbWljX2NydGNfbmVlZHNfbW9kZXNldCgmbmV3X2NydGNfc3RhdGUtPmJhc2UpKQo+
ICAJCXJldHVybiAwOwo+IEBAIC0xMDcxLDYgKzEwNzMsMTggQEAgaW50ZWxfY29sb3JfYWRkX2Fm
ZmVjdGVkX3BsYW5lcyhzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSAqbmV3X2NydGNfc3RhdGUpCj4g
IAkgICAgbmV3X2NydGNfc3RhdGUtPmNzY19lbmFibGUgPT0gb2xkX2NydGNfc3RhdGUtPmNzY19l
bmFibGUpCj4gIAkJcmV0dXJuIDA7Cj4gIAo+ICsJLyoKPiArCSAqIE5vcm1hbGx5IHdlIGxvYWQg
dGhlIExVVHMgYWZ0ZXIgdmJsYW5rIC8gYWZ0ZXIgdGhlIGRvdWJsZS1idWZmZXIKPiArCSAqIHJl
Z2lzdGVycyB3cml0dGVuIGJ5IGNvbW1pdCBoYXZlIGJlZW4gbGF0Y2hlZCwgdGhpcyBhdm9pZHMg
YQo+ICsJICogZ2FtbWEgY2hhbmdlIG1pZC13YXkgdGhlIHNjcmVlbi4gVGhpcyBkb2VzIG1lYW4g
dGhhdCB0aGUgZmlyc3QKPiArCSAqIGZldyBsaW5lcyBvZiB0aGUgZGlzcGxheSB3aWxsIChzb21l
dGltZXMpIHN0aWxsIHVzZSB0aGUgb2xkCj4gKwkgKiB0YWJsZS4gVGhpcyBpcyBmaW5lIHdoZW4g
Y2hhbmdpbmcgYW4gZXhpc3RpbmcgTFVULCBidXQgaWYgdGhpcwo+ICsJICogaXMgdGhlIGZpcnN0
IHRpbWUgdGhlIExVVCBnZXRzIGxvYWRlZCwgdGhlbiB0aGUgaHcgbWF5IGNvbnRhaW4KPiArCSAq
IHJhbmRvbSB2YWx1ZXMsIGNhdXNpbmcgdGhlIGZpcnN0IGxpbmVzIHRvIGhhdmUgZnVua3kgY29s
b3JzLgo+ICsJICovCj4gKwlpZiAoIW9sZF9jcnRjX3N0YXRlLT5nYW1tYV9lbmFibGUgJiYgbmV3
X2NydGNfc3RhdGUtPmdhbW1hX2VuYWJsZSkKPiArCQluZXdfY3J0Y19zdGF0ZS0+bG9hZF9sdXRf
YmVmb3JlX2NvbW1pdCA9IHRydWU7CgpVbmZvcnR1bmF0ZWx5IGdhbW1hX2VuYWJsZSBpcyBub3Qg
YWJzdHJhY3QgZW5vdWdoIHRvIGNvdmVyIGFsbApwbGF0Zm9ybXMuCgo+ICsKPiAgCWZvcl9lYWNo
X2ludGVsX3BsYW5lX29uX2NydGMoJmRldl9wcml2LT5kcm0sIGNydGMsIHBsYW5lKSB7Cj4gIAkJ
c3RydWN0IGludGVsX3BsYW5lX3N0YXRlICpwbGFuZV9zdGF0ZTsKPiAgCj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheS5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5LmMKPiBpbmRleCBjYmY5Y2YzMDA1MGMu
LjZiMWRjNWE1YWViMSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX2Rpc3BsYXkuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50
ZWxfZGlzcGxheS5jCj4gQEAgLTE0MTY4LDggKzE0MTY4LDExIEBAIHN0YXRpYyB2b2lkIGNvbW1p
dF9waXBlX2NvbmZpZyhzdHJ1Y3QgaW50ZWxfYXRvbWljX3N0YXRlICpzdGF0ZSwKPiAgCSAqLwo+
ICAJaWYgKCFtb2Rlc2V0KSB7Cj4gIAkJaWYgKG5ld19jcnRjX3N0YXRlLT5iYXNlLmNvbG9yX21n
bXRfY2hhbmdlZCB8fAo+IC0JCSAgICBuZXdfY3J0Y19zdGF0ZS0+dXBkYXRlX3BpcGUpCj4gKwkJ
ICAgIG5ld19jcnRjX3N0YXRlLT51cGRhdGVfcGlwZSkgewo+ICsJCQlpZiAobmV3X2NydGNfc3Rh
dGUtPmxvYWRfbHV0X2JlZm9yZV9jb21taXQpCj4gKwkJCQlpbnRlbF9jb2xvcl9sb2FkX2x1dHMo
bmV3X2NydGNfc3RhdGUpOwoKV2UgZG9uJ3Qgd2FudCB0byBkbyB0aGlzIGZyb20gd2l0aGluIHRo
ZSB2YmxhbmsgZXZhZGUgY3JpdGljYWwKc2VjdGlvbiwgc28gbmVlZHMgdG8gYmUgbW92ZWQgZWFy
bGllci4KCkxlbW1lIHRyeSB0byBjb29rIHVwIHNvbWV0aGluZy4uLgoKPiAgCQkJaW50ZWxfY29s
b3JfY29tbWl0KG5ld19jcnRjX3N0YXRlKTsKPiArCQl9Cj4gIAo+ICAJCWlmIChJTlRFTF9HRU4o
ZGV2X3ByaXYpID49IDkpCj4gIAkJCXNrbF9kZXRhY2hfc2NhbGVycyhuZXdfY3J0Y19zdGF0ZSk7
Cj4gQEAgLTE0NzE3LDYgKzE0NzIwLDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfYXRvbWljX2NvbW1p
dF90YWlsKHN0cnVjdCBpbnRlbF9hdG9taWNfc3RhdGUgKnN0YXRlKQo+ICAJZm9yX2VhY2hfbmV3
X2ludGVsX2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsIG5ld19jcnRjX3N0YXRlLCBpKSB7Cj4g
IAkJaWYgKG5ld19jcnRjX3N0YXRlLT5iYXNlLmFjdGl2ZSAmJgo+ICAJCSAgICAhbmVlZHNfbW9k
ZXNldChuZXdfY3J0Y19zdGF0ZSkgJiYKPiArCQkgICAgIW5ld19jcnRjX3N0YXRlLT5sb2FkX2x1
dF9iZWZvcmVfY29tbWl0ICYmCj4gIAkJICAgIChuZXdfY3J0Y19zdGF0ZS0+YmFzZS5jb2xvcl9t
Z210X2NoYW5nZWQgfHwKPiAgCQkgICAgIG5ld19jcnRjX3N0YXRlLT51cGRhdGVfcGlwZSkpCj4g
IAkJCWludGVsX2NvbG9yX2xvYWRfbHV0cyhuZXdfY3J0Y19zdGF0ZSk7Cj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgKPiBpbmRleCA0
MDE4NGU4MjNjODQuLjZiY2M5OTdiN2VjYiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfZGlzcGxheV90eXBlcy5oCj4gQEAgLTk5MCw2ICs5OTAsOSBA
QCBzdHJ1Y3QgaW50ZWxfY3J0Y19zdGF0ZSB7Cj4gIAkvKiBlbmFibGUgcGlwZSBjc2M/ICovCj4g
IAlib29sIGNzY19lbmFibGU7Cj4gIAo+ICsJLyogbG9hZCBsdXRzIGJlZm9yZSBjb2xvciBzZXR0
aW5ncyBjb21taXQgKi8KPiArCWJvb2wgbG9hZF9sdXRfYmVmb3JlX2NvbW1pdDsKPiArCj4gIAkv
KiBEaXNwbGF5IFN0cmVhbSBjb21wcmVzc2lvbiBzdGF0ZSAqLwo+ICAJc3RydWN0IHsKPiAgCQli
b29sIGNvbXByZXNzaW9uX2VuYWJsZTsKPiAtLSAKPiAyLjIzLjAKCi0tIApWaWxsZSBTeXJqw6Rs
w6QKSW50ZWwKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
ZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
