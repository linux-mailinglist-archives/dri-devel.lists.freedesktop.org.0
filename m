Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D1E39E38C7
	for <lists+dri-devel@lfdr.de>; Thu, 24 Oct 2019 18:47:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8E9356E525;
	Thu, 24 Oct 2019 16:46:53 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x444.google.com (mail-wr1-x444.google.com
 [IPv6:2a00:1450:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CB5D96E532
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 16:46:35 +0000 (UTC)
Received: by mail-wr1-x444.google.com with SMTP id t16so21735393wrr.1
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 09:46:35 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=iMW1mQmGwhfwXdD0TwS083j3m2VDJ4duIHXhlFj6dGs=;
 b=Nd+kd+8CMeGFtm+yMDTzM6+SoKIsbUE2G12vFeVm+FvATIv7zQCGyP3FfNGgo5/XbU
 8oHdPHU0W/oPuK9RuZ2tUKe5AThfTFqVhkcqin99eBt6ryffxLo1Sr5mnhLesIZy32LO
 2na4wl9WEaMYWGnx10pOVEvHweRlvEa9uIpMxKKD0vV/25nY8zIZmSwnLl6jfnHnrddx
 eLWBsa/i/amf6EDfvx+l+DbLSp4g2pVJ2ytd8BbyzPflQIGm7S1XsYS4mVjBy0lmRuzt
 0mKfuP4SXDY4a/WLRp6aLzIAKu7GEIw1qdHrckPbGos/xRJxFjkV+gdLjvaLujNPEgID
 kdKA==
X-Gm-Message-State: APjAAAVA0CoPpYnz9hJtb3etlQp6fNi5ynDyU/Pog/UUgmf/cEyrAhIO
 2ayT7OQUw+0U9GIpjJO0AZQ=
X-Google-Smtp-Source: APXvYqwVw44G8up3OS83sLFxGoT/QcfUFY9wLUHtHn16GMxo2IjKgwdHCVgeXS2Uo/LjEyJZNWzk+A==
X-Received: by 2002:a5d:6787:: with SMTP id v7mr4902264wru.392.1571935593949; 
 Thu, 24 Oct 2019 09:46:33 -0700 (PDT)
Received: from localhost (p2E5BE2CE.dip0.t-ipconnect.de. [46.91.226.206])
 by smtp.gmail.com with ESMTPSA id q18sm82168wmk.39.2019.10.24.09.46.32
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 24 Oct 2019 09:46:32 -0700 (PDT)
From: Thierry Reding <thierry.reding@gmail.com>
To: Thierry Reding <thierry.reding@gmail.com>
Subject: [PATCH 25/32] drm/tegra: sor: Deduplicate connector type detection
 code
Date: Thu, 24 Oct 2019 18:45:27 +0200
Message-Id: <20191024164534.132764-26-thierry.reding@gmail.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191024164534.132764-1-thierry.reding@gmail.com>
References: <20191024164534.132764-1-thierry.reding@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=iMW1mQmGwhfwXdD0TwS083j3m2VDJ4duIHXhlFj6dGs=;
 b=QYhXARciu25ZEWJRn9o+psu9voKzav1JhB48fbUwCZSIaXb/PzD+4Mfx41+4A5yTlu
 mubvTGZQxcPDOinhWLRLxW3lUyXSYCTo86ITUpw+s0aE2GI2HhBGZnA9wzAEvLExmmEi
 AgUEdcdNW4dYkMSxEdgCk0P0cxWu9Xzijfo9lHj7c8/fYmZs8J+VaYYFrEt3rWG3H0i/
 hFH50c/1xVaOsOGUZ/ItpPjM/JrOBTkqFfxpYkZefFtEiFfEtTPINmXPwhvD7eU6Xa6e
 /ftBmcMmesrN8ZuGJ/78rtc/FVNDr/6c1CFGyR5CxnxBJF7KjB5EDs3sK1QtPtlwHR4L
 gYmw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-tegra@vger.kernel.org, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVGhpZXJyeSBSZWRpbmcgPHRyZWRpbmdAbnZpZGlhLmNvbT4KClRoZSBjb25uZWN0b3Ig
dHlwZSBkZXRlY3Rpb24gY29kZSBpcyBkdXBsaWNhdGVkIGluIHR3byBwbGFjZXMuIEtlZXBpbmcK
Ym90aCBwbGFjZXMgaW4gc3luYyBpcyBhbiBleHRyYSBtYWludGVuYW5jZSBidXJkZW4gdGhhdCBj
YW4gYmUgYXZvaWRlZApieSBjb21wYXJpbmcgdGhlIGNvbm5lY3RvciB0eXBlIG9wZXJhdGlvbnMg
dGhhdCBhcmUgc2V0IHVwb24gdGhlIGZpcnN0CmRldGVjdGlvbi4KClNpZ25lZC1vZmYtYnk6IFRo
aWVycnkgUmVkaW5nIDx0cmVkaW5nQG52aWRpYS5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL3Rl
Z3JhL3Nvci5jIHwgMjE4ICsrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLS0tLQogMSBm
aWxlIGNoYW5nZWQsIDEwOSBpbnNlcnRpb25zKCspLCAxMDkgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL3Nvci5jIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3Jh
L3Nvci5jCmluZGV4IDcxYTdlZDU3Y2I0Zi4uYWYyMzRkNWVmYmQ3IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vdGVncmEvc29yLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL3Nvci5j
CkBAIC0zMTM1LDYgKzMxMzUsMTEyIEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2VuY29kZXJf
aGVscGVyX2Z1bmNzIHRlZ3JhX3Nvcl9kcF9oZWxwZXJzID0gewogCS5hdG9taWNfY2hlY2sgPSB0
ZWdyYV9zb3JfZW5jb2Rlcl9hdG9taWNfY2hlY2ssCiB9OwogCitzdGF0aWMgY29uc3Qgc3RydWN0
IHRlZ3JhX3Nvcl9vcHMgdGVncmFfc29yX2VkcF9vcHMgPSB7CisJLm5hbWUgPSAiZURQIiwKK307
CisKK3N0YXRpYyBpbnQgdGVncmFfc29yX2hkbWlfcHJvYmUoc3RydWN0IHRlZ3JhX3NvciAqc29y
KQoreworCWludCBlcnI7CisKKwlzb3ItPmF2ZGRfaW9fc3VwcGx5ID0gZGV2bV9yZWd1bGF0b3Jf
Z2V0KHNvci0+ZGV2LCAiYXZkZC1pbyIpOworCWlmIChJU19FUlIoc29yLT5hdmRkX2lvX3N1cHBs
eSkpIHsKKwkJZGV2X2Vycihzb3ItPmRldiwgImNhbm5vdCBnZXQgQVZERCBJL08gc3VwcGx5OiAl
bGRcbiIsCisJCQlQVFJfRVJSKHNvci0+YXZkZF9pb19zdXBwbHkpKTsKKwkJcmV0dXJuIFBUUl9F
UlIoc29yLT5hdmRkX2lvX3N1cHBseSk7CisJfQorCisJZXJyID0gcmVndWxhdG9yX2VuYWJsZShz
b3ItPmF2ZGRfaW9fc3VwcGx5KTsKKwlpZiAoZXJyIDwgMCkgeworCQlkZXZfZXJyKHNvci0+ZGV2
LCAiZmFpbGVkIHRvIGVuYWJsZSBBVkREIEkvTyBzdXBwbHk6ICVkXG4iLAorCQkJZXJyKTsKKwkJ
cmV0dXJuIGVycjsKKwl9CisKKwlzb3ItPnZkZF9wbGxfc3VwcGx5ID0gZGV2bV9yZWd1bGF0b3Jf
Z2V0KHNvci0+ZGV2LCAidmRkLXBsbCIpOworCWlmIChJU19FUlIoc29yLT52ZGRfcGxsX3N1cHBs
eSkpIHsKKwkJZGV2X2Vycihzb3ItPmRldiwgImNhbm5vdCBnZXQgVkREIFBMTCBzdXBwbHk6ICVs
ZFxuIiwKKwkJCVBUUl9FUlIoc29yLT52ZGRfcGxsX3N1cHBseSkpOworCQlyZXR1cm4gUFRSX0VS
Uihzb3ItPnZkZF9wbGxfc3VwcGx5KTsKKwl9CisKKwllcnIgPSByZWd1bGF0b3JfZW5hYmxlKHNv
ci0+dmRkX3BsbF9zdXBwbHkpOworCWlmIChlcnIgPCAwKSB7CisJCWRldl9lcnIoc29yLT5kZXYs
ICJmYWlsZWQgdG8gZW5hYmxlIFZERCBQTEwgc3VwcGx5OiAlZFxuIiwKKwkJCWVycik7CisJCXJl
dHVybiBlcnI7CisJfQorCisJc29yLT5oZG1pX3N1cHBseSA9IGRldm1fcmVndWxhdG9yX2dldChz
b3ItPmRldiwgImhkbWkiKTsKKwlpZiAoSVNfRVJSKHNvci0+aGRtaV9zdXBwbHkpKSB7CisJCWRl
dl9lcnIoc29yLT5kZXYsICJjYW5ub3QgZ2V0IEhETUkgc3VwcGx5OiAlbGRcbiIsCisJCQlQVFJf
RVJSKHNvci0+aGRtaV9zdXBwbHkpKTsKKwkJcmV0dXJuIFBUUl9FUlIoc29yLT5oZG1pX3N1cHBs
eSk7CisJfQorCisJZXJyID0gcmVndWxhdG9yX2VuYWJsZShzb3ItPmhkbWlfc3VwcGx5KTsKKwlp
ZiAoZXJyIDwgMCkgeworCQlkZXZfZXJyKHNvci0+ZGV2LCAiZmFpbGVkIHRvIGVuYWJsZSBIRE1J
IHN1cHBseTogJWRcbiIsIGVycik7CisJCXJldHVybiBlcnI7CisJfQorCisJSU5JVF9ERUxBWUVE
X1dPUksoJnNvci0+c2NkYywgdGVncmFfc29yX2hkbWlfc2NkY193b3JrKTsKKworCXJldHVybiAw
OworfQorCitzdGF0aWMgaW50IHRlZ3JhX3Nvcl9oZG1pX3JlbW92ZShzdHJ1Y3QgdGVncmFfc29y
ICpzb3IpCit7CisJcmVndWxhdG9yX2Rpc2FibGUoc29yLT5oZG1pX3N1cHBseSk7CisJcmVndWxh
dG9yX2Rpc2FibGUoc29yLT52ZGRfcGxsX3N1cHBseSk7CisJcmVndWxhdG9yX2Rpc2FibGUoc29y
LT5hdmRkX2lvX3N1cHBseSk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVj
dCB0ZWdyYV9zb3Jfb3BzIHRlZ3JhX3Nvcl9oZG1pX29wcyA9IHsKKwkubmFtZSA9ICJIRE1JIiwK
KwkucHJvYmUgPSB0ZWdyYV9zb3JfaGRtaV9wcm9iZSwKKwkucmVtb3ZlID0gdGVncmFfc29yX2hk
bWlfcmVtb3ZlLAorfTsKKworc3RhdGljIGludCB0ZWdyYV9zb3JfZHBfcHJvYmUoc3RydWN0IHRl
Z3JhX3NvciAqc29yKQoreworCWludCBlcnI7CisKKwlzb3ItPmF2ZGRfaW9fc3VwcGx5ID0gZGV2
bV9yZWd1bGF0b3JfZ2V0KHNvci0+ZGV2LCAiYXZkZC1pby1oZG1pLWRwIik7CisJaWYgKElTX0VS
Uihzb3ItPmF2ZGRfaW9fc3VwcGx5KSkKKwkJcmV0dXJuIFBUUl9FUlIoc29yLT5hdmRkX2lvX3N1
cHBseSk7CisKKwllcnIgPSByZWd1bGF0b3JfZW5hYmxlKHNvci0+YXZkZF9pb19zdXBwbHkpOwor
CWlmIChlcnIgPCAwKQorCQlyZXR1cm4gZXJyOworCisJc29yLT52ZGRfcGxsX3N1cHBseSA9IGRl
dm1fcmVndWxhdG9yX2dldChzb3ItPmRldiwgInZkZC1oZG1pLWRwLXBsbCIpOworCWlmIChJU19F
UlIoc29yLT52ZGRfcGxsX3N1cHBseSkpCisJCXJldHVybiBQVFJfRVJSKHNvci0+dmRkX3BsbF9z
dXBwbHkpOworCisJZXJyID0gcmVndWxhdG9yX2VuYWJsZShzb3ItPnZkZF9wbGxfc3VwcGx5KTsK
KwlpZiAoZXJyIDwgMCkKKwkJcmV0dXJuIGVycjsKKworCXJldHVybiAwOworfQorCitzdGF0aWMg
aW50IHRlZ3JhX3Nvcl9kcF9yZW1vdmUoc3RydWN0IHRlZ3JhX3NvciAqc29yKQoreworCXJlZ3Vs
YXRvcl9kaXNhYmxlKHNvci0+dmRkX3BsbF9zdXBwbHkpOworCXJlZ3VsYXRvcl9kaXNhYmxlKHNv
ci0+YXZkZF9pb19zdXBwbHkpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1
Y3QgdGVncmFfc29yX29wcyB0ZWdyYV9zb3JfZHBfb3BzID0geworCS5uYW1lID0gIkRQIiwKKwku
cHJvYmUgPSB0ZWdyYV9zb3JfZHBfcHJvYmUsCisJLnJlbW92ZSA9IHRlZ3JhX3Nvcl9kcF9yZW1v
dmUsCit9OworCiBzdGF0aWMgaW50IHRlZ3JhX3Nvcl9pbml0KHN0cnVjdCBob3N0MXhfY2xpZW50
ICpjbGllbnQpCiB7CiAJc3RydWN0IGRybV9kZXZpY2UgKmRybSA9IGRldl9nZXRfZHJ2ZGF0YShj
bGllbnQtPnBhcmVudCk7CkBAIC0zMTQ1LDcgKzMyNTEsNyBAQCBzdGF0aWMgaW50IHRlZ3JhX3Nv
cl9pbml0KHN0cnVjdCBob3N0MXhfY2xpZW50ICpjbGllbnQpCiAJaW50IGVycjsKIAogCWlmICgh
c29yLT5hdXgpIHsKLQkJaWYgKHNvci0+c29jLT5zdXBwb3J0c19oZG1pKSB7CisJCWlmIChzb3It
Pm9wcyA9PSAmdGVncmFfc29yX2hkbWlfb3BzKSB7CiAJCQljb25uZWN0b3IgPSBEUk1fTU9ERV9D
T05ORUNUT1JfSERNSUE7CiAJCQllbmNvZGVyID0gRFJNX01PREVfRU5DT0RFUl9UTURTOwogCQkJ
aGVscGVycyA9ICZ0ZWdyYV9zb3JfaGRtaV9oZWxwZXJzOwpAQCAtMzE1NCwxMSArMzI2MCwxMSBA
QCBzdGF0aWMgaW50IHRlZ3JhX3Nvcl9pbml0KHN0cnVjdCBob3N0MXhfY2xpZW50ICpjbGllbnQp
CiAJCQllbmNvZGVyID0gRFJNX01PREVfRU5DT0RFUl9MVkRTOwogCQl9CiAJfSBlbHNlIHsKLQkJ
aWYgKHNvci0+c29jLT5zdXBwb3J0c19lZHApIHsKKwkJaWYgKHNvci0+b3BzID09ICZ0ZWdyYV9z
b3JfZWRwX29wcykgewogCQkJY29ubmVjdG9yID0gRFJNX01PREVfQ09OTkVDVE9SX2VEUDsKIAkJ
CWVuY29kZXIgPSBEUk1fTU9ERV9FTkNPREVSX1RNRFM7CiAJCQloZWxwZXJzID0gJnRlZ3JhX3Nv
cl9lZHBfaGVscGVyczsKLQkJfSBlbHNlIGlmIChzb3ItPnNvYy0+c3VwcG9ydHNfZHApIHsKKwkJ
fSBlbHNlIHsKIAkJCWNvbm5lY3RvciA9IERSTV9NT0RFX0NPTk5FQ1RPUl9EaXNwbGF5UG9ydDsK
IAkJCWVuY29kZXIgPSBEUk1fTU9ERV9FTkNPREVSX1RNRFM7CiAJCQloZWxwZXJzID0gJnRlZ3Jh
X3Nvcl9kcF9oZWxwZXJzOwpAQCAtMzI3OCwxMTIgKzMzODQsNiBAQCBzdGF0aWMgY29uc3Qgc3Ry
dWN0IGhvc3QxeF9jbGllbnRfb3BzIHNvcl9jbGllbnRfb3BzID0gewogCS5leGl0ID0gdGVncmFf
c29yX2V4aXQsCiB9OwogCi1zdGF0aWMgY29uc3Qgc3RydWN0IHRlZ3JhX3Nvcl9vcHMgdGVncmFf
c29yX2VkcF9vcHMgPSB7Ci0JLm5hbWUgPSAiZURQIiwKLX07Ci0KLXN0YXRpYyBpbnQgdGVncmFf
c29yX2hkbWlfcHJvYmUoc3RydWN0IHRlZ3JhX3NvciAqc29yKQotewotCWludCBlcnI7Ci0KLQlz
b3ItPmF2ZGRfaW9fc3VwcGx5ID0gZGV2bV9yZWd1bGF0b3JfZ2V0KHNvci0+ZGV2LCAiYXZkZC1p
byIpOwotCWlmIChJU19FUlIoc29yLT5hdmRkX2lvX3N1cHBseSkpIHsKLQkJZGV2X2Vycihzb3It
PmRldiwgImNhbm5vdCBnZXQgQVZERCBJL08gc3VwcGx5OiAlbGRcbiIsCi0JCQlQVFJfRVJSKHNv
ci0+YXZkZF9pb19zdXBwbHkpKTsKLQkJcmV0dXJuIFBUUl9FUlIoc29yLT5hdmRkX2lvX3N1cHBs
eSk7Ci0JfQotCi0JZXJyID0gcmVndWxhdG9yX2VuYWJsZShzb3ItPmF2ZGRfaW9fc3VwcGx5KTsK
LQlpZiAoZXJyIDwgMCkgewotCQlkZXZfZXJyKHNvci0+ZGV2LCAiZmFpbGVkIHRvIGVuYWJsZSBB
VkREIEkvTyBzdXBwbHk6ICVkXG4iLAotCQkJZXJyKTsKLQkJcmV0dXJuIGVycjsKLQl9Ci0KLQlz
b3ItPnZkZF9wbGxfc3VwcGx5ID0gZGV2bV9yZWd1bGF0b3JfZ2V0KHNvci0+ZGV2LCAidmRkLXBs
bCIpOwotCWlmIChJU19FUlIoc29yLT52ZGRfcGxsX3N1cHBseSkpIHsKLQkJZGV2X2Vycihzb3It
PmRldiwgImNhbm5vdCBnZXQgVkREIFBMTCBzdXBwbHk6ICVsZFxuIiwKLQkJCVBUUl9FUlIoc29y
LT52ZGRfcGxsX3N1cHBseSkpOwotCQlyZXR1cm4gUFRSX0VSUihzb3ItPnZkZF9wbGxfc3VwcGx5
KTsKLQl9Ci0KLQllcnIgPSByZWd1bGF0b3JfZW5hYmxlKHNvci0+dmRkX3BsbF9zdXBwbHkpOwot
CWlmIChlcnIgPCAwKSB7Ci0JCWRldl9lcnIoc29yLT5kZXYsICJmYWlsZWQgdG8gZW5hYmxlIFZE
RCBQTEwgc3VwcGx5OiAlZFxuIiwKLQkJCWVycik7Ci0JCXJldHVybiBlcnI7Ci0JfQotCi0Jc29y
LT5oZG1pX3N1cHBseSA9IGRldm1fcmVndWxhdG9yX2dldChzb3ItPmRldiwgImhkbWkiKTsKLQlp
ZiAoSVNfRVJSKHNvci0+aGRtaV9zdXBwbHkpKSB7Ci0JCWRldl9lcnIoc29yLT5kZXYsICJjYW5u
b3QgZ2V0IEhETUkgc3VwcGx5OiAlbGRcbiIsCi0JCQlQVFJfRVJSKHNvci0+aGRtaV9zdXBwbHkp
KTsKLQkJcmV0dXJuIFBUUl9FUlIoc29yLT5oZG1pX3N1cHBseSk7Ci0JfQotCi0JZXJyID0gcmVn
dWxhdG9yX2VuYWJsZShzb3ItPmhkbWlfc3VwcGx5KTsKLQlpZiAoZXJyIDwgMCkgewotCQlkZXZf
ZXJyKHNvci0+ZGV2LCAiZmFpbGVkIHRvIGVuYWJsZSBIRE1JIHN1cHBseTogJWRcbiIsIGVycik7
Ci0JCXJldHVybiBlcnI7Ci0JfQotCi0JSU5JVF9ERUxBWUVEX1dPUksoJnNvci0+c2NkYywgdGVn
cmFfc29yX2hkbWlfc2NkY193b3JrKTsKLQotCXJldHVybiAwOwotfQotCi1zdGF0aWMgaW50IHRl
Z3JhX3Nvcl9oZG1pX3JlbW92ZShzdHJ1Y3QgdGVncmFfc29yICpzb3IpCi17Ci0JcmVndWxhdG9y
X2Rpc2FibGUoc29yLT5oZG1pX3N1cHBseSk7Ci0JcmVndWxhdG9yX2Rpc2FibGUoc29yLT52ZGRf
cGxsX3N1cHBseSk7Ci0JcmVndWxhdG9yX2Rpc2FibGUoc29yLT5hdmRkX2lvX3N1cHBseSk7Ci0K
LQlyZXR1cm4gMDsKLX0KLQotc3RhdGljIGNvbnN0IHN0cnVjdCB0ZWdyYV9zb3Jfb3BzIHRlZ3Jh
X3Nvcl9oZG1pX29wcyA9IHsKLQkubmFtZSA9ICJIRE1JIiwKLQkucHJvYmUgPSB0ZWdyYV9zb3Jf
aGRtaV9wcm9iZSwKLQkucmVtb3ZlID0gdGVncmFfc29yX2hkbWlfcmVtb3ZlLAotfTsKLQotc3Rh
dGljIGludCB0ZWdyYV9zb3JfZHBfcHJvYmUoc3RydWN0IHRlZ3JhX3NvciAqc29yKQotewotCWlu
dCBlcnI7Ci0KLQlzb3ItPmF2ZGRfaW9fc3VwcGx5ID0gZGV2bV9yZWd1bGF0b3JfZ2V0KHNvci0+
ZGV2LCAiYXZkZC1pby1oZG1pLWRwIik7Ci0JaWYgKElTX0VSUihzb3ItPmF2ZGRfaW9fc3VwcGx5
KSkKLQkJcmV0dXJuIFBUUl9FUlIoc29yLT5hdmRkX2lvX3N1cHBseSk7Ci0KLQllcnIgPSByZWd1
bGF0b3JfZW5hYmxlKHNvci0+YXZkZF9pb19zdXBwbHkpOwotCWlmIChlcnIgPCAwKQotCQlyZXR1
cm4gZXJyOwotCi0Jc29yLT52ZGRfcGxsX3N1cHBseSA9IGRldm1fcmVndWxhdG9yX2dldChzb3It
PmRldiwgInZkZC1oZG1pLWRwLXBsbCIpOwotCWlmIChJU19FUlIoc29yLT52ZGRfcGxsX3N1cHBs
eSkpCi0JCXJldHVybiBQVFJfRVJSKHNvci0+dmRkX3BsbF9zdXBwbHkpOwotCi0JZXJyID0gcmVn
dWxhdG9yX2VuYWJsZShzb3ItPnZkZF9wbGxfc3VwcGx5KTsKLQlpZiAoZXJyIDwgMCkKLQkJcmV0
dXJuIGVycjsKLQotCXJldHVybiAwOwotfQotCi1zdGF0aWMgaW50IHRlZ3JhX3Nvcl9kcF9yZW1v
dmUoc3RydWN0IHRlZ3JhX3NvciAqc29yKQotewotCXJlZ3VsYXRvcl9kaXNhYmxlKHNvci0+dmRk
X3BsbF9zdXBwbHkpOwotCXJlZ3VsYXRvcl9kaXNhYmxlKHNvci0+YXZkZF9pb19zdXBwbHkpOwot
Ci0JcmV0dXJuIDA7Ci19Ci0KLXN0YXRpYyBjb25zdCBzdHJ1Y3QgdGVncmFfc29yX29wcyB0ZWdy
YV9zb3JfZHBfb3BzID0gewotCS5uYW1lID0gIkRQIiwKLQkucHJvYmUgPSB0ZWdyYV9zb3JfZHBf
cHJvYmUsCi0JLnJlbW92ZSA9IHRlZ3JhX3Nvcl9kcF9yZW1vdmUsCi19OwotCiBzdGF0aWMgY29u
c3QgdTggdGVncmExMjRfc29yX3hiYXJfY2ZnWzVdID0gewogCTAsIDEsIDIsIDMsIDQKIH07Ci0t
IAoyLjIzLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
