Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A4B83DCE26
	for <lists+dri-devel@lfdr.de>; Fri, 18 Oct 2019 20:38:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 31CFC6EB90;
	Fri, 18 Oct 2019 18:37:48 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.codeaurora.org (smtp.codeaurora.org [198.145.29.96])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9837F89C1C
 for <dri-devel@lists.freedesktop.org>; Fri, 18 Oct 2019 12:34:24 +0000 (UTC)
Received: by smtp.codeaurora.org (Postfix, from userid 1000)
 id 4702261282; Fri, 18 Oct 2019 12:34:19 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on
 pdx-caf-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No, score=-2.7 required=2.0 tests=ALL_TRUSTED,BAYES_00,
 DKIM_INVALID,DKIM_SIGNED,SPF_NONE autolearn=no autolearn_force=no
 version=3.4.0
Received: from kgunda-linux.qualcomm.com
 (blr-c-bdr-fw-01_globalnat_allzones-outside.qualcomm.com [103.229.19.19])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-SHA256 (128/128 bits))
 (No client certificate requested)
 (Authenticated sender: kgunda@smtp.codeaurora.org)
 by smtp.codeaurora.org (Postfix) with ESMTPSA id 6E53660A61;
 Fri, 18 Oct 2019 12:34:10 +0000 (UTC)
DMARC-Filter: OpenDMARC Filter v1.3.2 smtp.codeaurora.org 6E53660A61
From: Kiran Gunda <kgunda@codeaurora.org>
To: bjorn.andersson@linaro.org, jingoohan1@gmail.com, lee.jones@linaro.org,
 b.zolnierkie@samsung.com, dri-devel@lists.freedesktop.org,
 daniel.thompson@linaro.org, jacek.anaszewski@gmail.com, pavel@ucw.cz,
 robh+dt@kernel.org, mark.rutland@arm.com, linux-leds@vger.kernel.org,
 devicetree@vger.kernel.org, linux-kernel@vger.kernel.org,
 Andy Gross <agross@kernel.org>, linux-arm-msm@vger.kernel.org,
 linux-fbdev@vger.kernel.org
Subject: [PATCH V8 4/6] backlight: qcom-wled: Add support for WLED4 peripheral.
Date: Fri, 18 Oct 2019 18:03:27 +0530
Message-Id: <1571402009-8706-5-git-send-email-kgunda@codeaurora.org>
X-Mailer: git-send-email 1.9.1
In-Reply-To: <1571402009-8706-1-git-send-email-kgunda@codeaurora.org>
References: <1571402009-8706-1-git-send-email-kgunda@codeaurora.org>
X-Mailman-Approved-At: Fri, 18 Oct 2019 18:37:46 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=codeaurora.org; s=default; t=1571402064;
 bh=t/BLTf0cERUXVQUVcHyoY8lz5zFk+ZnZaipERLONBCU=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=B4i+DyCo6ixch64BpUpKyRLxmQgNPci7g0ni+lSeYRLvSnFo2qVWoGkEYjcVDs7sS
 ywo/fhtb61jpfRwcOqVT9qDTbczPMrC9ltLOQT/ClFbXOwqMwIsYuAeis37OUGUW2w
 QreLIwg0c8+zMHJ+UkqF73OHcPQ/6UPXn3KFrdDg=
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=codeaurora.org; s=default; t=1571402055;
 bh=t/BLTf0cERUXVQUVcHyoY8lz5zFk+ZnZaipERLONBCU=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=QNralay1tpntRmFDAxks2NiNsKEt+iRVDic+LP19k6YF+2nC2nNqIVkFBaMr4cZgn
 9v9yHeFVjol91NnYGzLqVEXKqO5mNP65JLbAKBgrge2/rpaH96MuS2jwwJE/Bku1Cj
 gKKBzNuqjJOK90eRFzJ4wvw+xVyzO8SzP3s9aI+g=
X-Mailman-Original-Authentication-Results: pdx-caf-mail.web.codeaurora.org;
 dmarc=none (p=none dis=none)
 header.from=codeaurora.org
X-Mailman-Original-Authentication-Results: pdx-caf-mail.web.codeaurora.org;
 spf=none
 smtp.mailfrom=kgunda@codeaurora.org
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Kiran Gunda <kgunda@codeaurora.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V0xFRDQgcGVyaXBoZXJhbCBpcyBwcmVzZW50IG9uIHNvbWUgUE1JQ3MgbGlrZSBwbWk4OTk4IGFu
ZApwbTY2MGwuIEl0IGhhcyBhIGRpZmZlcmVudCByZWdpc3RlciBtYXAgYW5kIGNvbmZpZ3VyYXRp
b25zCmFyZSBhbHNvIGRpZmZlcmVudC4gQWRkIHN1cHBvcnQgZm9yIGl0LgoKU2lnbmVkLW9mZi1i
eTogS2lyYW4gR3VuZGEgPGtndW5kYUBjb2RlYXVyb3JhLm9yZz4KUmV2aWV3ZWQtYnk6IEJqb3Ju
IEFuZGVyc3NvbiA8Ympvcm4uYW5kZXJzc29uQGxpbmFyby5vcmc+Ci0tLQogZHJpdmVycy92aWRl
by9iYWNrbGlnaHQvcWNvbS13bGVkLmMgfCAyNTUgKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKystCiAxIGZpbGUgY2hhbmdlZCwgMjUzIGluc2VydGlvbnMoKyksIDIgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvcWNvbS13bGVkLmMgYi9k
cml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9xY29tLXdsZWQuYwppbmRleCA0NWVlZGE0Li41Mzg2Y2E5
IDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9xY29tLXdsZWQuYworKysgYi9k
cml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9xY29tLXdsZWQuYwpAQCAtMTcsNyArMTcsNyBAQAogCiAj
ZGVmaW5lIFdMRUQzX1NJTktfUkVHX0JSSUdIVF9NQVgJCQkweEZGRgogCi0vKiBXTEVEMyBjb250
cm9sIHJlZ2lzdGVycyAqLworLyogV0xFRDMvV0xFRDQgY29udHJvbCByZWdpc3RlcnMgKi8KICNk
ZWZpbmUgV0xFRDNfQ1RSTF9SRUdfTU9EX0VOCQkJCTB4NDYKICNkZWZpbmUgIFdMRUQzX0NUUkxf
UkVHX01PRF9FTl9NQVNLCQkJQklUKDcpCiAjZGVmaW5lICBXTEVEM19DVFJMX1JFR19NT0RfRU5f
U0hJRlQJCQk3CkBAIC0zMSw3ICszMSw3IEBACiAjZGVmaW5lIFdMRUQzX0NUUkxfUkVHX0lMSU1J
VAkJCQkweDRlCiAjZGVmaW5lICBXTEVEM19DVFJMX1JFR19JTElNSVRfTUFTSwkJCUdFTk1BU0so
MiwgMCkKIAotLyogV0xFRDMgc2luayByZWdpc3RlcnMgKi8KKy8qIFdMRUQzL1dMRUQ0IHNpbmsg
cmVnaXN0ZXJzICovCiAjZGVmaW5lIFdMRUQzX1NJTktfUkVHX1NZTkMJCQkJMHg0NwogI2RlZmlu
ZSAgV0xFRDNfU0lOS19SRUdfU1lOQ19DTEVBUgkJCTB4MDAKIApAQCAtNTYsNiArNTYsMjggQEAK
ICNkZWZpbmUgV0xFRDNfU0lOS19SRUdfU1RSX0NBQkMobikJCQkoMHg2NiArIChuICogMHgxMCkp
CiAjZGVmaW5lICBXTEVEM19TSU5LX1JFR19TVFJfQ0FCQ19NQVNLCQkJQklUKDcpCiAKKy8qIFdM
RUQ0IHNwZWNpZmljIHNpbmsgcmVnaXN0ZXJzICovCisjZGVmaW5lIFdMRUQ0X1NJTktfUkVHX0NV
UlJfU0lOSwkJCTB4NDYKKyNkZWZpbmUgIFdMRUQ0X1NJTktfUkVHX0NVUlJfU0lOS19NQVNLCQkJ
R0VOTUFTSyg3LCA0KQorI2RlZmluZSAgV0xFRDRfU0lOS19SRUdfQ1VSUl9TSU5LX1NIRlQJCQk0
CisKKy8qIFdMRUQ0IHNwZWNpZmljIHBlci0nc3RyaW5nJyByZWdpc3RlcnMgYmVsb3cgKi8KKyNk
ZWZpbmUgV0xFRDRfU0lOS19SRUdfU1RSX01PRF9FTihuKQkJCSgweDUwICsgKG4gKiAweDEwKSkK
KyNkZWZpbmUgIFdMRUQ0X1NJTktfUkVHX1NUUl9NT0RfTUFTSwkJCUJJVCg3KQorCisjZGVmaW5l
IFdMRUQ0X1NJTktfUkVHX1NUUl9GVUxMX1NDQUxFX0NVUlIobikJCSgweDUyICsgKG4gKiAweDEw
KSkKKyNkZWZpbmUgIFdMRUQ0X1NJTktfUkVHX1NUUl9GVUxMX1NDQUxFX0NVUlJfTUFTSwlHRU5N
QVNLKDMsIDApCisKKyNkZWZpbmUgV0xFRDRfU0lOS19SRUdfU1RSX01PRF9TUkMobikJCQkoMHg1
MyArIChuICogMHgxMCkpCisjZGVmaW5lICBXTEVENF9TSU5LX1JFR19TVFJfTU9EX1NSQ19NQVNL
CQlCSVQoMCkKKyNkZWZpbmUgIFdMRUQ0X1NJTktfUkVHX1NUUl9NT0RfU1JDX0lOVAkJCTB4MDAK
KyNkZWZpbmUgIFdMRUQ0X1NJTktfUkVHX1NUUl9NT0RfU1JDX0VYVAkJCTB4MDEKKworI2RlZmlu
ZSBXTEVENF9TSU5LX1JFR19TVFJfQ0FCQyhuKQkJCSgweDU2ICsgKG4gKiAweDEwKSkKKyNkZWZp
bmUgIFdMRUQ0X1NJTktfUkVHX1NUUl9DQUJDX01BU0sJCQlCSVQoNykKKworI2RlZmluZSBXTEVE
NF9TSU5LX1JFR19CUklHSFQobikJCQkoMHg1NyArIChuICogMHgxMCkpCisKIHN0cnVjdCB3bGVk
X3Zhcl9jZmcgewogCWNvbnN0IHUzMiAqdmFsdWVzOwogCXUzMiAoKmZuKSh1MzIpOwpAQCAtOTAs
NiArMTEyLDcgQEAgc3RydWN0IHdsZWQgewogCXN0cnVjdCBkZXZpY2UgKmRldjsKIAlzdHJ1Y3Qg
cmVnbWFwICpyZWdtYXA7CiAJdTE2IGN0cmxfYWRkcjsKKwl1MTYgc2lua19hZGRyOwogCXUxNiBt
YXhfc3RyaW5nX2NvdW50OwogCXUzMiBicmlnaHRuZXNzOwogCXUzMiBtYXhfYnJpZ2h0bmVzczsK
QEAgLTExNiw2ICsxMzksMjkgQEAgc3RhdGljIGludCB3bGVkM19zZXRfYnJpZ2h0bmVzcyhzdHJ1
Y3Qgd2xlZCAqd2xlZCwgdTE2IGJyaWdodG5lc3MpCiAJcmV0dXJuIDA7CiB9CiAKK3N0YXRpYyBp
bnQgd2xlZDRfc2V0X2JyaWdodG5lc3Moc3RydWN0IHdsZWQgKndsZWQsIHUxNiBicmlnaHRuZXNz
KQoreworCWludCByYywgaTsKKwl1MTYgbG93X2xpbWl0ID0gd2xlZC0+bWF4X2JyaWdodG5lc3Mg
KiA0IC8gMTAwMDsKKwl1OCB2WzJdOworCisJLyogV0xFRDQncyBsb3dlciBsaW1pdCBvZiBvcGVy
YXRpb24gaXMgMC40JSAqLworCWlmIChicmlnaHRuZXNzID4gMCAmJiBicmlnaHRuZXNzIDwgbG93
X2xpbWl0KQorCQlicmlnaHRuZXNzID0gbG93X2xpbWl0OworCisJdlswXSA9IGJyaWdodG5lc3Mg
JiAweGZmOworCXZbMV0gPSAoYnJpZ2h0bmVzcyA+PiA4KSAmIDB4ZjsKKworCWZvciAoaSA9IDA7
ICBpIDwgd2xlZC0+Y2ZnLm51bV9zdHJpbmdzOyArK2kpIHsKKwkJcmMgPSByZWdtYXBfYnVsa193
cml0ZSh3bGVkLT5yZWdtYXAsIHdsZWQtPnNpbmtfYWRkciArCisJCQkJICAgICAgIFdMRUQ0X1NJ
TktfUkVHX0JSSUdIVChpKSwgdiwgMik7CisJCWlmIChyYyA8IDApCisJCQlyZXR1cm4gcmM7CisJ
fQorCisJcmV0dXJuIDA7Cit9CisKIHN0YXRpYyBpbnQgd2xlZF9tb2R1bGVfZW5hYmxlKHN0cnVj
dCB3bGVkICp3bGVkLCBpbnQgdmFsKQogewogCWludCByYzsKQEAgLTI2Nyw2ICszMTMsMTIwIEBA
IHN0YXRpYyBpbnQgd2xlZDNfc2V0dXAoc3RydWN0IHdsZWQgKndsZWQpCiAJLmVuYWJsZWRfc3Ry
aW5ncyA9IHswLCAxLCAyLCAzfSwKIH07CiAKK3N0YXRpYyBpbnQgd2xlZDRfc2V0dXAoc3RydWN0
IHdsZWQgKndsZWQpCit7CisJaW50IHJjLCB0ZW1wLCBpLCBqOworCXUxNiBhZGRyOworCXU4IHNp
bmtfZW4gPSAwOworCXUzMiBzaW5rX2NmZyA9IDA7CisKKwlyYyA9IHJlZ21hcF91cGRhdGVfYml0
cyh3bGVkLT5yZWdtYXAsCisJCQkJd2xlZC0+Y3RybF9hZGRyICsgV0xFRDNfQ1RSTF9SRUdfT1ZQ
LAorCQkJCVdMRUQzX0NUUkxfUkVHX09WUF9NQVNLLCB3bGVkLT5jZmcub3ZwKTsKKwlpZiAocmMg
PCAwKQorCQlyZXR1cm4gcmM7CisKKwlyYyA9IHJlZ21hcF91cGRhdGVfYml0cyh3bGVkLT5yZWdt
YXAsCisJCQkJd2xlZC0+Y3RybF9hZGRyICsgV0xFRDNfQ1RSTF9SRUdfSUxJTUlULAorCQkJCVdM
RUQzX0NUUkxfUkVHX0lMSU1JVF9NQVNLLAorCQkJCXdsZWQtPmNmZy5ib29zdF9pX2xpbWl0KTsK
KwlpZiAocmMgPCAwKQorCQlyZXR1cm4gcmM7CisKKwlyYyA9IHJlZ21hcF91cGRhdGVfYml0cyh3
bGVkLT5yZWdtYXAsCisJCQkJd2xlZC0+Y3RybF9hZGRyICsgV0xFRDNfQ1RSTF9SRUdfRlJFUSwK
KwkJCQlXTEVEM19DVFJMX1JFR19GUkVRX01BU0ssCisJCQkJd2xlZC0+Y2ZnLnN3aXRjaF9mcmVx
KTsKKwlpZiAocmMgPCAwKQorCQlyZXR1cm4gcmM7CisKKwlyYyA9IHJlZ21hcF9yZWFkKHdsZWQt
PnJlZ21hcCwgd2xlZC0+c2lua19hZGRyICsKKwkJCSBXTEVENF9TSU5LX1JFR19DVVJSX1NJTkss
ICZzaW5rX2NmZyk7CisJaWYgKHJjIDwgMCkKKwkJcmV0dXJuIHJjOworCisJZm9yIChpID0gMDsg
aSA8IHdsZWQtPmNmZy5udW1fc3RyaW5nczsgaSsrKSB7CisJCWogPSB3bGVkLT5jZmcuZW5hYmxl
ZF9zdHJpbmdzW2ldOworCQl0ZW1wID0gaiArIFdMRUQ0X1NJTktfUkVHX0NVUlJfU0lOS19TSEZU
OworCQlzaW5rX2VuIHw9IDEgPDwgdGVtcDsKKwl9CisKKwlpZiAoc2lua19jZmcgPT0gc2lua19l
bikKKwkJcmV0dXJuIDA7CisKKwlyYyA9IHJlZ21hcF91cGRhdGVfYml0cyh3bGVkLT5yZWdtYXAs
CisJCQkJd2xlZC0+c2lua19hZGRyICsgV0xFRDRfU0lOS19SRUdfQ1VSUl9TSU5LLAorCQkJCVdM
RUQ0X1NJTktfUkVHX0NVUlJfU0lOS19NQVNLLCAwKTsKKwlpZiAocmMgPCAwKQorCQlyZXR1cm4g
cmM7CisKKwlyYyA9IHJlZ21hcF91cGRhdGVfYml0cyh3bGVkLT5yZWdtYXAsIHdsZWQtPmN0cmxf
YWRkciArCisJCQkJV0xFRDNfQ1RSTF9SRUdfTU9EX0VOLAorCQkJCVdMRUQzX0NUUkxfUkVHX01P
RF9FTl9NQVNLLCAwKTsKKwlpZiAocmMgPCAwKQorCQlyZXR1cm4gcmM7CisKKwkvKiBQZXIgc2lu
ay9zdHJpbmcgY29uZmlndXJhdGlvbiAqLworCWZvciAoaSA9IDA7IGkgPCB3bGVkLT5jZmcubnVt
X3N0cmluZ3M7IGkrKykgeworCQlqID0gd2xlZC0+Y2ZnLmVuYWJsZWRfc3RyaW5nc1tpXTsKKwor
CQlhZGRyID0gd2xlZC0+c2lua19hZGRyICsKKwkJCQlXTEVENF9TSU5LX1JFR19TVFJfTU9EX0VO
KGopOworCQlyYyA9IHJlZ21hcF91cGRhdGVfYml0cyh3bGVkLT5yZWdtYXAsIGFkZHIsCisJCQkJ
CVdMRUQ0X1NJTktfUkVHX1NUUl9NT0RfTUFTSywKKwkJCQkJV0xFRDRfU0lOS19SRUdfU1RSX01P
RF9NQVNLKTsKKwkJaWYgKHJjIDwgMCkKKwkJCXJldHVybiByYzsKKworCQlhZGRyID0gd2xlZC0+
c2lua19hZGRyICsKKwkJCQlXTEVENF9TSU5LX1JFR19TVFJfRlVMTF9TQ0FMRV9DVVJSKGopOwor
CQlyYyA9IHJlZ21hcF91cGRhdGVfYml0cyh3bGVkLT5yZWdtYXAsIGFkZHIsCisJCQkJCVdMRUQ0
X1NJTktfUkVHX1NUUl9GVUxMX1NDQUxFX0NVUlJfTUFTSywKKwkJCQkJd2xlZC0+Y2ZnLnN0cmlu
Z19pX2xpbWl0KTsKKwkJaWYgKHJjIDwgMCkKKwkJCXJldHVybiByYzsKKworCQlhZGRyID0gd2xl
ZC0+c2lua19hZGRyICsKKwkJCQlXTEVENF9TSU5LX1JFR19TVFJfQ0FCQyhqKTsKKwkJcmMgPSBy
ZWdtYXBfdXBkYXRlX2JpdHMod2xlZC0+cmVnbWFwLCBhZGRyLAorCQkJCQlXTEVENF9TSU5LX1JF
R19TVFJfQ0FCQ19NQVNLLAorCQkJCQl3bGVkLT5jZmcuY2FiYyA/CisJCQkJCVdMRUQ0X1NJTktf
UkVHX1NUUl9DQUJDX01BU0sgOiAwKTsKKwkJaWYgKHJjIDwgMCkKKwkJCXJldHVybiByYzsKKwl9
CisKKwlyYyA9IHJlZ21hcF91cGRhdGVfYml0cyh3bGVkLT5yZWdtYXAsIHdsZWQtPmN0cmxfYWRk
ciArCisJCQkJV0xFRDNfQ1RSTF9SRUdfTU9EX0VOLAorCQkJCVdMRUQzX0NUUkxfUkVHX01PRF9F
Tl9NQVNLLAorCQkJCVdMRUQzX0NUUkxfUkVHX01PRF9FTl9NQVNLKTsKKwlpZiAocmMgPCAwKQor
CQlyZXR1cm4gcmM7CisKKwlyYyA9IHJlZ21hcF91cGRhdGVfYml0cyh3bGVkLT5yZWdtYXAsCisJ
CQkJd2xlZC0+c2lua19hZGRyICsgV0xFRDRfU0lOS19SRUdfQ1VSUl9TSU5LLAorCQkJCVdMRUQ0
X1NJTktfUkVHX0NVUlJfU0lOS19NQVNLLCBzaW5rX2VuKTsKKwlpZiAocmMgPCAwKQorCQlyZXR1
cm4gcmM7CisKKwlyYyA9IHdsZWRfc3luY190b2dnbGUod2xlZCk7CisJaWYgKHJjIDwgMCkgewor
CQlkZXZfZXJyKHdsZWQtPmRldiwgIkZhaWxlZCB0byB0b2dnbGUgc3luYyByZWcgcmM6JWRcbiIs
IHJjKTsKKwkJcmV0dXJuIHJjOworCX0KKworCXJldHVybiAwOworfQorCitzdGF0aWMgY29uc3Qg
c3RydWN0IHdsZWRfY29uZmlnIHdsZWQ0X2NvbmZpZ19kZWZhdWx0cyA9IHsKKwkuYm9vc3RfaV9s
aW1pdCA9IDQsCisJLnN0cmluZ19pX2xpbWl0ID0gMTAsCisJLm92cCA9IDEsCisJLm51bV9zdHJp
bmdzID0gNCwKKwkuc3dpdGNoX2ZyZXEgPSAxMSwKKwkuY2FiYyA9IGZhbHNlLAorfTsKKwogc3Rh
dGljIGNvbnN0IHUzMiB3bGVkM19ib29zdF9pX2xpbWl0X3ZhbHVlc1tdID0gewogCTEwNSwgMzg1
LCA1MjUsIDgwNSwgOTgwLCAxMjYwLCAxNDAwLCAxNjgwLAogfTsKQEAgLTI3Niw2ICs0MzYsMTUg
QEAgc3RhdGljIGludCB3bGVkM19zZXR1cChzdHJ1Y3Qgd2xlZCAqd2xlZCkKIAkuc2l6ZSA9IEFS
UkFZX1NJWkUod2xlZDNfYm9vc3RfaV9saW1pdF92YWx1ZXMpLAogfTsKIAorc3RhdGljIGNvbnN0
IHUzMiB3bGVkNF9ib29zdF9pX2xpbWl0X3ZhbHVlc1tdID0geworCTEwNSwgMjgwLCA0NTAsIDYy
MCwgOTcwLCAxMTUwLCAxMzAwLCAxNTAwLAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCB3bGVk
X3Zhcl9jZmcgd2xlZDRfYm9vc3RfaV9saW1pdF9jZmcgPSB7CisJLnZhbHVlcyA9IHdsZWQ0X2Jv
b3N0X2lfbGltaXRfdmFsdWVzLAorCS5zaXplID0gQVJSQVlfU0laRSh3bGVkNF9ib29zdF9pX2xp
bWl0X3ZhbHVlcyksCit9OworCiBzdGF0aWMgY29uc3QgdTMyIHdsZWQzX292cF92YWx1ZXNbXSA9
IHsKIAkzNSwgMzIsIDI5LCAyNywKIH07CkBAIC0yODUsNiArNDU0LDE1IEBAIHN0YXRpYyBpbnQg
d2xlZDNfc2V0dXAoc3RydWN0IHdsZWQgKndsZWQpCiAJLnNpemUgPSBBUlJBWV9TSVpFKHdsZWQz
X292cF92YWx1ZXMpLAogfTsKIAorc3RhdGljIGNvbnN0IHUzMiB3bGVkNF9vdnBfdmFsdWVzW10g
PSB7CisJMzExMDAsIDI5NjAwLCAxOTYwMCwgMTgxMDAsCit9OworCitzdGF0aWMgY29uc3Qgc3Ry
dWN0IHdsZWRfdmFyX2NmZyB3bGVkNF9vdnBfY2ZnID0geworCS52YWx1ZXMgPSB3bGVkNF9vdnBf
dmFsdWVzLAorCS5zaXplID0gQVJSQVlfU0laRSh3bGVkNF9vdnBfdmFsdWVzKSwKK307CisKIHN0
YXRpYyB1MzIgd2xlZDNfbnVtX3N0cmluZ3NfdmFsdWVzX2ZuKHUzMiBpZHgpCiB7CiAJcmV0dXJu
IGlkeCArIDE7CkBAIC0yOTUsNiArNDczLDExIEBAIHN0YXRpYyB1MzIgd2xlZDNfbnVtX3N0cmlu
Z3NfdmFsdWVzX2ZuKHUzMiBpZHgpCiAJLnNpemUgPSAzLAogfTsKIAorc3RhdGljIGNvbnN0IHN0
cnVjdCB3bGVkX3Zhcl9jZmcgd2xlZDRfbnVtX3N0cmluZ3NfY2ZnID0geworCS5mbiA9IHdsZWQz
X251bV9zdHJpbmdzX3ZhbHVlc19mbiwKKwkuc2l6ZSA9IDQsCit9OworCiBzdGF0aWMgdTMyIHds
ZWQzX3N3aXRjaF9mcmVxX3ZhbHVlc19mbih1MzIgaWR4KQogewogCXJldHVybiAxOTIwMCAvICgy
ICogKDEgKyBpZHgpKTsKQEAgLTMwOSwxMCArNDkyLDI0IEBAIHN0YXRpYyB1MzIgd2xlZDNfc3dp
dGNoX2ZyZXFfdmFsdWVzX2ZuKHUzMiBpZHgpCiAJLnNpemUgPSAyNiwKIH07CiAKK3N0YXRpYyBj
b25zdCB1MzIgd2xlZDRfc3RyaW5nX2lfbGltaXRfdmFsdWVzW10gPSB7CisJMCwgMjUwMCwgNTAw
MCwgNzUwMCwgMTAwMDAsIDEyNTAwLCAxNTAwMCwgMTc1MDAsIDIwMDAwLAorCTIyNTAwLCAyNTAw
MCwgMjc1MDAsIDMwMDAwLAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCB3bGVkX3Zhcl9jZmcg
d2xlZDRfc3RyaW5nX2lfbGltaXRfY2ZnID0geworCS52YWx1ZXMgPSB3bGVkNF9zdHJpbmdfaV9s
aW1pdF92YWx1ZXMsCisJLnNpemUgPSBBUlJBWV9TSVpFKHdsZWQ0X3N0cmluZ19pX2xpbWl0X3Zh
bHVlcyksCit9OworCiBzdGF0aWMgY29uc3Qgc3RydWN0IHdsZWRfdmFyX2NmZyB3bGVkM19zdHJp
bmdfY2ZnID0gewogCS5zaXplID0gOCwKIH07CiAKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgd2xlZF92
YXJfY2ZnIHdsZWQ0X3N0cmluZ19jZmcgPSB7CisJLnNpemUgPSAxNiwKK307CisKIHN0YXRpYyB1
MzIgd2xlZF92YWx1ZXMoY29uc3Qgc3RydWN0IHdsZWRfdmFyX2NmZyAqY2ZnLCB1MzIgaWR4KQog
ewogCWlmIChpZHggPj0gY2ZnLT5zaXplKQpAQCAtMzYxLDYgKzU1OCwzNCBAQCBzdGF0aWMgaW50
IHdsZWRfY29uZmlndXJlKHN0cnVjdCB3bGVkICp3bGVkLCBpbnQgdmVyc2lvbikKIAkJfSwKIAl9
OwogCisJY29uc3Qgc3RydWN0IHdsZWRfdTMyX29wdHMgd2xlZDRfb3B0c1tdID0geworCQl7CisJ
CQkubmFtZSA9ICJxY29tLGN1cnJlbnQtYm9vc3QtbGltaXQiLAorCQkJLnZhbF9wdHIgPSAmY2Zn
LT5ib29zdF9pX2xpbWl0LAorCQkJLmNmZyA9ICZ3bGVkNF9ib29zdF9pX2xpbWl0X2NmZywKKwkJ
fSwKKwkJeworCQkJLm5hbWUgPSAicWNvbSxjdXJyZW50LWxpbWl0LW1pY3JvYW1wIiwKKwkJCS52
YWxfcHRyID0gJmNmZy0+c3RyaW5nX2lfbGltaXQsCisJCQkuY2ZnID0gJndsZWQ0X3N0cmluZ19p
X2xpbWl0X2NmZywKKwkJfSwKKwkJeworCQkJLm5hbWUgPSAicWNvbSxvdnAtbWlsbGl2b2x0IiwK
KwkJCS52YWxfcHRyID0gJmNmZy0+b3ZwLAorCQkJLmNmZyA9ICZ3bGVkNF9vdnBfY2ZnLAorCQl9
LAorCQl7CisJCQkubmFtZSA9ICJxY29tLHN3aXRjaGluZy1mcmVxIiwKKwkJCS52YWxfcHRyID0g
JmNmZy0+c3dpdGNoX2ZyZXEsCisJCQkuY2ZnID0gJndsZWQzX3N3aXRjaF9mcmVxX2NmZywKKwkJ
fSwKKwkJeworCQkJLm5hbWUgPSAicWNvbSxudW0tc3RyaW5ncyIsCisJCQkudmFsX3B0ciA9ICZj
ZmctPm51bV9zdHJpbmdzLAorCQkJLmNmZyA9ICZ3bGVkNF9udW1fc3RyaW5nc19jZmcsCisJCX0s
CisJfTsKKwogCWNvbnN0IHN0cnVjdCB3bGVkX2Jvb2xfb3B0cyBib29sX29wdHNbXSA9IHsKIAkJ
eyAicWNvbSxjcy1vdXQiLCAmY2ZnLT5jc19vdXRfZW4sIH0sCiAJCXsgInFjb20sZXh0LWdlbiIs
ICZjZmctPmV4dF9nZW4sIH0sCkBAIC0zODUsNiArNjEwLDIyIEBAIHN0YXRpYyBpbnQgd2xlZF9j
b25maWd1cmUoc3RydWN0IHdsZWQgKndsZWQsIGludCB2ZXJzaW9uKQogCQkqY2ZnID0gd2xlZDNf
Y29uZmlnX2RlZmF1bHRzOwogCQl3bGVkLT53bGVkX3NldF9icmlnaHRuZXNzID0gd2xlZDNfc2V0
X2JyaWdodG5lc3M7CiAJCXdsZWQtPm1heF9zdHJpbmdfY291bnQgPSAzOworCQl3bGVkLT5zaW5r
X2FkZHIgPSB3bGVkLT5jdHJsX2FkZHI7CisJCWJyZWFrOworCisJY2FzZSA0OgorCQl1MzJfb3B0
cyA9IHdsZWQ0X29wdHM7CisJCXNpemUgPSBBUlJBWV9TSVpFKHdsZWQ0X29wdHMpOworCQkqY2Zn
ID0gd2xlZDRfY29uZmlnX2RlZmF1bHRzOworCQl3bGVkLT53bGVkX3NldF9icmlnaHRuZXNzID0g
d2xlZDRfc2V0X2JyaWdodG5lc3M7CisJCXdsZWQtPm1heF9zdHJpbmdfY291bnQgPSA0OworCisJ
CXByb3BfYWRkciA9IG9mX2dldF9hZGRyZXNzKGRldi0+b2Zfbm9kZSwgMSwgTlVMTCwgTlVMTCk7
CisJCWlmICghcHJvcF9hZGRyKSB7CisJCQlkZXZfZXJyKHdsZWQtPmRldiwgImludmFsaWQgSU8g
cmVzb3VyY2VzXG4iKTsKKwkJCXJldHVybiAtRUlOVkFMOworCQl9CisJCXdsZWQtPnNpbmtfYWRk
ciA9IGJlMzJfdG9fY3B1KCpwcm9wX2FkZHIpOwogCQlicmVhazsKIAogCWRlZmF1bHQ6CkBAIC00
ODMsNiArNzI0LDE0IEBAIHN0YXRpYyBpbnQgd2xlZF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2
aWNlICpwZGV2KQogCQl9CiAJCWJyZWFrOwogCisJY2FzZSA0OgorCQlyYyA9IHdsZWQ0X3NldHVw
KHdsZWQpOworCQlpZiAocmMpIHsKKwkJCWRldl9lcnIoJnBkZXYtPmRldiwgIndsZWQ0X3NldHVw
IGZhaWxlZFxuIik7CisJCQlyZXR1cm4gcmM7CisJCX0KKwkJYnJlYWs7CisKIAlkZWZhdWx0Ogog
CQlkZXZfZXJyKHdsZWQtPmRldiwgIkludmFsaWQgV0xFRCB2ZXJzaW9uXG4iKTsKIAkJYnJlYWs7
CkBAIC01MDMsNiArNzUyLDggQEAgc3RhdGljIGludCB3bGVkX3Byb2JlKHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYpCiAKIHN0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIHdsZWRf
bWF0Y2hfdGFibGVbXSA9IHsKIAl7IC5jb21wYXRpYmxlID0gInFjb20scG04OTQxLXdsZWQiLCAu
ZGF0YSA9ICh2b2lkICopMyB9LAorCXsgLmNvbXBhdGlibGUgPSAicWNvbSxwbWk4OTk4LXdsZWQi
LCAuZGF0YSA9ICh2b2lkICopNCB9LAorCXsgLmNvbXBhdGlibGUgPSAicWNvbSxwbTY2MGwtd2xl
ZCIsIC5kYXRhID0gKHZvaWQgKik0IH0sCiAJe30KIH07CiBNT0RVTEVfREVWSUNFX1RBQkxFKG9m
LCB3bGVkX21hdGNoX3RhYmxlKTsKLS0gClRoZSBRdWFsY29tbSBJbm5vdmF0aW9uIENlbnRlciwg
SW5jLiBpcyBhIG1lbWJlciBvZiB0aGUgQ29kZSBBdXJvcmEgRm9ydW0sCiBhIExpbnV4IEZvdW5k
YXRpb24gQ29sbGFib3JhdGl2ZSBQcm9qZWN0CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9kcmktZGV2ZWw=
