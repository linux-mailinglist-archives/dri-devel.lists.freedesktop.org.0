Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C0E2F85E9C
	for <lists+dri-devel@lfdr.de>; Thu,  8 Aug 2019 11:37:14 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DC21E6E7FD;
	Thu,  8 Aug 2019 09:37:10 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BEF816E7C1
 for <dri-devel@lists.freedesktop.org>; Thu,  8 Aug 2019 09:37:07 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx06.intmail.prod.int.phx2.redhat.com
 [10.5.11.16])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 441EEC04D293;
 Thu,  8 Aug 2019 09:37:06 +0000 (UTC)
Received: from sirius.home.kraxel.org (ovpn-116-144.ams2.redhat.com
 [10.36.116.144])
 by smtp.corp.redhat.com (Postfix) with ESMTP id F24595C220;
 Thu,  8 Aug 2019 09:37:03 +0000 (UTC)
Received: by sirius.home.kraxel.org (Postfix, from userid 1000)
 id 431829D13; Thu,  8 Aug 2019 11:37:03 +0200 (CEST)
From: Gerd Hoffmann <kraxel@redhat.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v3 4/8] drm/vram: switch vram helpers to the new
 gem_ttm_bo_device_init()
Date: Thu,  8 Aug 2019 11:36:58 +0200
Message-Id: <20190808093702.29512-5-kraxel@redhat.com>
In-Reply-To: <20190808093702.29512-1-kraxel@redhat.com>
References: <20190808093702.29512-1-kraxel@redhat.com>
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.16
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.31]); Thu, 08 Aug 2019 09:37:07 +0000 (UTC)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Chen Feng <puck.chen@hisilicon.com>, open list <linux-kernel@vger.kernel.org>,
 Xinliang Liu <z.liuxinliang@hisilicon.com>, David Airlie <airlied@linux.ie>,
 Xinwei Kong <kong.kongxinwei@hisilicon.com>, Gerd Hoffmann <kraxel@redhat.com>,
 tzimmermann@suse.de, Rongrong Zou <zourongrong@gmail.com>,
 Sean Paul <sean@poorly.run>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U2lnbmVkLW9mZi1ieTogR2VyZCBIb2ZmbWFubiA8a3JheGVsQHJlZGhhdC5jb20+Ci0tLQogaW5j
bHVkZS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5oICAgICAgICAgICAgIHwgIDYgKy0tCiBkcml2
ZXJzL2dwdS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5jICAgICAgICAgfCA0OCAtLS0tLS0tLS0t
LS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX3ZyYW1fbW1faGVscGVyLmMgICAgICAgICAg
fCAgNiArLS0KIC4uLi9ncHUvZHJtL2hpc2lsaWNvbi9oaWJtYy9oaWJtY19kcm1fZHJ2LmMgICB8
ICAxIC0KIGRyaXZlcnMvZ3B1L2RybS9LY29uZmlnICAgICAgICAgICAgICAgICAgICAgICB8ICAx
ICsKIDUgZmlsZXMgY2hhbmdlZCwgNSBpbnNlcnRpb25zKCspLCA1NyBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmggYi9pbmNsdWRlL2Ry
bS9kcm1fZ2VtX3ZyYW1faGVscGVyLmgKaW5kZXggYWMyMTdkNzY4NDU2Li43MDFkMmM0NmE0ZjQg
MTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuaAorKysgYi9pbmNs
dWRlL2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmgKQEAgLTQsNiArNCw3IEBACiAjZGVmaW5lIERS
TV9HRU1fVlJBTV9IRUxQRVJfSAogCiAjaW5jbHVkZSA8ZHJtL2RybV9nZW0uaD4KKyNpbmNsdWRl
IDxkcm0vZHJtX2dlbV90dG1faGVscGVyLmg+CiAjaW5jbHVkZSA8ZHJtL3R0bS90dG1fYm9fYXBp
Lmg+CiAjaW5jbHVkZSA8ZHJtL3R0bS90dG1fcGxhY2VtZW50Lmg+CiAjaW5jbHVkZSA8bGludXgv
a2VybmVsLmg+IC8qIGZvciBjb250YWluZXJfb2YoKSAqLwpAQCAtNzYsNyArNzcsNiBAQCBzdHJ1
Y3QgZHJtX2dlbV92cmFtX29iamVjdCAqZHJtX2dlbV92cmFtX2NyZWF0ZShzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2LAogCQkJCQkJdW5zaWduZWQgbG9uZyBwZ19hbGlnbiwKIAkJCQkJCWJvb2wgaW50
ZXJydXB0aWJsZSk7CiB2b2lkIGRybV9nZW1fdnJhbV9wdXQoc3RydWN0IGRybV9nZW1fdnJhbV9v
YmplY3QgKmdibyk7Ci11NjQgZHJtX2dlbV92cmFtX21tYXBfb2Zmc2V0KHN0cnVjdCBkcm1fZ2Vt
X3ZyYW1fb2JqZWN0ICpnYm8pOwogczY0IGRybV9nZW1fdnJhbV9vZmZzZXQoc3RydWN0IGRybV9n
ZW1fdnJhbV9vYmplY3QgKmdibyk7CiBpbnQgZHJtX2dlbV92cmFtX3BpbihzdHJ1Y3QgZHJtX2dl
bV92cmFtX29iamVjdCAqZ2JvLCB1bnNpZ25lZCBsb25nIHBsX2ZsYWcpOwogaW50IGRybV9nZW1f
dnJhbV91bnBpbihzdHJ1Y3QgZHJtX2dlbV92cmFtX29iamVjdCAqZ2JvKTsKQEAgLTExMCw5ICsx
MTAsNiBAQCBleHRlcm4gY29uc3Qgc3RydWN0IGRybV92cmFtX21tX2Z1bmNzIGRybV9nZW1fdnJh
bV9tbV9mdW5jczsKIGludCBkcm1fZ2VtX3ZyYW1fZHJpdmVyX2R1bWJfY3JlYXRlKHN0cnVjdCBk
cm1fZmlsZSAqZmlsZSwKIAkJCQkgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJCQkgICAg
c3RydWN0IGRybV9tb2RlX2NyZWF0ZV9kdW1iICphcmdzKTsKLWludCBkcm1fZ2VtX3ZyYW1fZHJp
dmVyX2R1bWJfbW1hcF9vZmZzZXQoc3RydWN0IGRybV9maWxlICpmaWxlLAotCQkJCQkgc3RydWN0
IGRybV9kZXZpY2UgKmRldiwKLQkJCQkJIHVpbnQzMl90IGhhbmRsZSwgdWludDY0X3QgKm9mZnNl
dCk7CiAKIC8qKgogICogZGVmaW5lIERSTV9HRU1fVlJBTV9EUklWRVIgLSBkZWZhdWx0IGNhbGxi
YWNrIGZ1bmN0aW9ucyBmb3IgXApAQCAtMTIzLDcgKzEyMCw2IEBAIGludCBkcm1fZ2VtX3ZyYW1f
ZHJpdmVyX2R1bWJfbW1hcF9vZmZzZXQoc3RydWN0IGRybV9maWxlICpmaWxlLAogICovCiAjZGVm
aW5lIERSTV9HRU1fVlJBTV9EUklWRVIgXAogCS5kdW1iX2NyZWF0ZQkJICA9IGRybV9nZW1fdnJh
bV9kcml2ZXJfZHVtYl9jcmVhdGUsIFwKLQkuZHVtYl9tYXBfb2Zmc2V0CSAgPSBkcm1fZ2VtX3Zy
YW1fZHJpdmVyX2R1bWJfbW1hcF9vZmZzZXQsIFwKIAkuZ2VtX3ByaW1lX21tYXAJCSAgPSBkcm1f
Z2VtX3ByaW1lX21tYXAKIAogI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJt
X2dlbV92cmFtX2hlbHBlci5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIu
YwppbmRleCBmZDc1MTA3OGJhZTEuLmI3ODg2NTA1NTk5MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dl
bV92cmFtX2hlbHBlci5jCkBAIC0xNTYsMjIgKzE1Niw2IEBAIHZvaWQgZHJtX2dlbV92cmFtX3B1
dChzdHJ1Y3QgZHJtX2dlbV92cmFtX29iamVjdCAqZ2JvKQogfQogRVhQT1JUX1NZTUJPTChkcm1f
Z2VtX3ZyYW1fcHV0KTsKIAotLyoqCi0gKiBkcm1fZ2VtX3ZyYW1fbW1hcF9vZmZzZXQoKSAtIFJl
dHVybnMgYSBHRU0gVlJBTSBvYmplY3QncyBtbWFwIG9mZnNldAotICogQGdibzoJdGhlIEdFTSBW
UkFNIG9iamVjdAotICoKLSAqIFNlZSBkcm1fdm1hX25vZGVfb2Zmc2V0X2FkZHIoKSBmb3IgbW9y
ZSBpbmZvcm1hdGlvbi4KLSAqCi0gKiBSZXR1cm5zOgotICogVGhlIGJ1ZmZlciBvYmplY3QncyBv
ZmZzZXQgZm9yIHVzZXJzcGFjZSBtYXBwaW5ncyBvbiBzdWNjZXNzLCBvcgotICogMCBpZiBubyBv
ZmZzZXQgaXMgYWxsb2NhdGVkLgotICovCi11NjQgZHJtX2dlbV92cmFtX21tYXBfb2Zmc2V0KHN0
cnVjdCBkcm1fZ2VtX3ZyYW1fb2JqZWN0ICpnYm8pCi17Ci0JcmV0dXJuIGRybV92bWFfbm9kZV9v
ZmZzZXRfYWRkcigmZ2JvLT5iby5iYXNlLnZtYV9ub2RlKTsKLX0KLUVYUE9SVF9TWU1CT0woZHJt
X2dlbV92cmFtX21tYXBfb2Zmc2V0KTsKLQogLyoqCiAgKiBkcm1fZ2VtX3ZyYW1fb2Zmc2V0KCkg
LSBcCiAJUmV0dXJucyBhIEdFTSBWUkFNIG9iamVjdCdzIG9mZnNldCBpbiB2aWRlbyBtZW1vcnkK
QEAgLTUxMSwzOCArNDk1LDYgQEAgaW50IGRybV9nZW1fdnJhbV9kcml2ZXJfZHVtYl9jcmVhdGUo
c3RydWN0IGRybV9maWxlICpmaWxlLAogfQogRVhQT1JUX1NZTUJPTChkcm1fZ2VtX3ZyYW1fZHJp
dmVyX2R1bWJfY3JlYXRlKTsKIAotLyoqCi0gKiBkcm1fZ2VtX3ZyYW1fZHJpdmVyX2R1bWJfbW1h
cF9vZmZzZXQoKSAtIFwKLQlJbXBsZW1lbnRzICZzdHJ1Y3QgZHJtX2RyaXZlci5kdW1iX21tYXBf
b2Zmc2V0Ci0gKiBAZmlsZToJRFJNIGZpbGUgcG9pbnRlci4KLSAqIEBkZXY6CURSTSBkZXZpY2Uu
Ci0gKiBAaGFuZGxlOglHRU0gaGFuZGxlCi0gKiBAb2Zmc2V0OglSZXR1cm5zIHRoZSBtYXBwaW5n
J3MgbWVtb3J5IG9mZnNldCBvbiBzdWNjZXNzCi0gKgotICogUmV0dXJuczoKLSAqIDAgb24gc3Vj
Y2Vzcywgb3IKLSAqIGEgbmVnYXRpdmUgZXJybm8gY29kZSBvdGhlcndpc2UuCi0gKi8KLWludCBk
cm1fZ2VtX3ZyYW1fZHJpdmVyX2R1bWJfbW1hcF9vZmZzZXQoc3RydWN0IGRybV9maWxlICpmaWxl
LAotCQkJCQkgc3RydWN0IGRybV9kZXZpY2UgKmRldiwKLQkJCQkJIHVpbnQzMl90IGhhbmRsZSwg
dWludDY0X3QgKm9mZnNldCkKLXsKLQlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdlbTsKLQlzdHJ1
Y3QgZHJtX2dlbV92cmFtX29iamVjdCAqZ2JvOwotCi0JZ2VtID0gZHJtX2dlbV9vYmplY3RfbG9v
a3VwKGZpbGUsIGhhbmRsZSk7Ci0JaWYgKCFnZW0pCi0JCXJldHVybiAtRU5PRU5UOwotCi0JZ2Jv
ID0gZHJtX2dlbV92cmFtX29mX2dlbShnZW0pOwotCSpvZmZzZXQgPSBkcm1fZ2VtX3ZyYW1fbW1h
cF9vZmZzZXQoZ2JvKTsKLQotCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZChnZW0pOwotCi0J
cmV0dXJuIDA7Ci19Ci1FWFBPUlRfU1lNQk9MKGRybV9nZW1fdnJhbV9kcml2ZXJfZHVtYl9tbWFw
X29mZnNldCk7Ci0KIC8qCiAgKiBQUklNRSBoZWxwZXJzCiAgKi8KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9kcm1fdnJhbV9tbV9oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fdnJh
bV9tbV9oZWxwZXIuYwppbmRleCBjOTExNzgxZDY3MjguLmE2OTNmOWNlMzU2YyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2RybV92cmFtX21tX2hlbHBlci5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9kcm1fdnJhbV9tbV9oZWxwZXIuYwpAQCAtMSw1ICsxLDYgQEAKIC8vIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCiAKKyNpbmNsdWRlIDxkcm0vZHJtX2dlbV90
dG1faGVscGVyLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9kZXZpY2UuaD4KICNpbmNsdWRlIDxkcm0v
ZHJtX2ZpbGUuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3ZyYW1fbW1faGVscGVyLmg+CkBAIC0xNzAs
OSArMTcxLDggQEAgaW50IGRybV92cmFtX21tX2luaXQoc3RydWN0IGRybV92cmFtX21tICp2bW0s
IHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJdm1tLT52cmFtX3NpemUgPSB2cmFtX3NpemU7CiAJ
dm1tLT5mdW5jcyA9IGZ1bmNzOwogCi0JcmV0ID0gdHRtX2JvX2RldmljZV9pbml0KCZ2bW0tPmJk
ZXYsICZib19kcml2ZXIsCi0JCQkJIGRldi0+YW5vbl9pbm9kZS0+aV9tYXBwaW5nLAotCQkJCSB0
cnVlKTsKKwlyZXQgPSBkcm1fZ2VtX3R0bV9ib19kZXZpY2VfaW5pdChkZXYsICZ2bW0tPmJkZXYs
ICZib19kcml2ZXIsCisJCQkJCSB0cnVlKTsKIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaGlzaWxpY29uL2hpYm1jL2hpYm1jX2RybV9kcnYu
YyBiL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24vaGlibWMvaGlibWNfZHJtX2Rydi5jCmluZGV4
IDJhZTUzODgzNTc4MS4uNjM4NmM2N2UwODZiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aGlzaWxpY29uL2hpYm1jL2hpYm1jX2RybV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaGlz
aWxpY29uL2hpYm1jL2hpYm1jX2RybV9kcnYuYwpAQCAtNTksNyArNTksNiBAQCBzdGF0aWMgc3Ry
dWN0IGRybV9kcml2ZXIgaGlibWNfZHJpdmVyID0gewogCS5tYWpvcgkJCT0gMSwKIAkubWlub3IJ
CQk9IDAsCiAJLmR1bWJfY3JlYXRlICAgICAgICAgICAgPSBoaWJtY19kdW1iX2NyZWF0ZSwKLQku
ZHVtYl9tYXBfb2Zmc2V0ICAgICAgICA9IGRybV9nZW1fdnJhbV9kcml2ZXJfZHVtYl9tbWFwX29m
ZnNldCwKIAkuZ2VtX3ByaW1lX21tYXAJCT0gZHJtX2dlbV9wcmltZV9tbWFwLAogCS5pcnFfaGFu
ZGxlcgkJPSBoaWJtY19kcm1faW50ZXJydXB0LAogfTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL0tjb25maWcKaW5kZXggZjdiMjU1MTlmOTVj
Li4xYmU4YWQzMGQ4ZmUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9LY29uZmlnCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9LY29uZmlnCkBAIC0xNjksNiArMTY5LDcgQEAgY29uZmlnIERSTV9W
UkFNX0hFTFBFUgogCXRyaXN0YXRlCiAJZGVwZW5kcyBvbiBEUk0KIAlzZWxlY3QgRFJNX1RUTQor
CXNlbGVjdCBEUk1fVFRNX0hFTFBFUgogCWhlbHAKIAkgIEhlbHBlcnMgZm9yIFZSQU0gbWVtb3J5
IG1hbmFnZW1lbnQKIAotLSAKMi4xOC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
