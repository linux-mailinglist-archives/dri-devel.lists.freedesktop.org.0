Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D637F8D02C
	for <lists+dri-devel@lfdr.de>; Wed, 14 Aug 2019 12:00:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5AE326E4AF;
	Wed, 14 Aug 2019 10:00:16 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from honk.sigxcpu.org (honk.sigxcpu.org [24.134.29.49])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D395A6E4A1;
 Wed, 14 Aug 2019 10:00:14 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by honk.sigxcpu.org (Postfix) with ESMTP id 7C69AFB03;
 Wed, 14 Aug 2019 12:00:13 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at honk.sigxcpu.org
Received: from honk.sigxcpu.org ([127.0.0.1])
 by localhost (honk.sigxcpu.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id ro7JogRL8wWr; Wed, 14 Aug 2019 12:00:05 +0200 (CEST)
Received: by bogon.sigxcpu.org (Postfix, from userid 1000)
 id 34822428E0; Wed, 14 Aug 2019 12:00:05 +0200 (CEST)
Date: Wed, 14 Aug 2019 12:00:05 +0200
From: Guido =?iso-8859-1?Q?G=FCnther?= <agx@sigxcpu.org>
To: Lucas Stach <l.stach@pengutronix.de>
Subject: Re: [PATCH v3 8/8] drm/etnaviv: implement per-process address spaces
 on MMUv2
Message-ID: <20190814100005.GB16514@bogon.m.sigxcpu.org>
References: <20190809120424.32679-1-l.stach@pengutronix.de>
 <20190809120424.32679-8-l.stach@pengutronix.de>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190809120424.32679-8-l.stach@pengutronix.de>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: etnaviv@lists.freedesktop.org, dri-devel@lists.freedesktop.org,
 patchwork-lst@pengutronix.de, kernel@pengutronix.de,
 Russell King <linux+etnaviv@armlinux.org.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGksCk9uIEZyaSwgQXVnIDA5LCAyMDE5IGF0IDAyOjA0OjI0UE0gKzAyMDAsIEx1Y2FzIFN0YWNo
IHdyb3RlOgo+IFRoaXMgYnVpbGRzIG9uIHRvcCBvZiB0aGUgTU1VIGNvbnRleHRzIGludHJvZHVj
ZWQgZWFybGllci4gSW5zdGVhZCBvZiBoYXZpbmcKPiBvbmUgY29udGV4dCBwZXIgR1BVIGNvcmUs
IGVhY2ggR1BVIGNsaWVudCByZWNlaXZlcyBpdHMgb3duIGNvbnRleHQuCj4gCj4gT24gTU1VdjEg
dGhpcyBzdGlsbCBtZWFucyBhIHNpbmdsZSBzaGFyZWQgcGFnZXRhYmxlIHNldCBpcyB1c2VkIGJ5
IGFsbAo+IGNsaWVudHMsIGJ1dCBvbiBNTVV2MiB0aGVyZSBpcyBub3cgYSBkaXN0aW5jdCBzZXQg
b2YgcGFnZXRhYmxlcyBmb3IgZWFjaAo+IGNsaWVudC4gQXMgdGhlIGNvbW1hbmQgZmV0Y2ggaXMg
YWxzbyB0cmFuc2xhdGVkIHZpYSB0aGUgTU1VIG9uIE1NVXYyIHRoZQo+IGtlcm5lbCBjb21tYW5k
IHJpbmdidWZmZXIgaXMgbWFwcGVkIGludG8gZWFjaCBvZiB0aGUgY2xpZW50IHBhZ2V0YWJsZXMu
Cj4gCj4gQXMgdGhlIE1NVSBjb250ZXh0IHN3aXRjaCBpcyBhIGJpdCBvZiBhIGhlYXZ5IG9wZXJh
dGlvbiwgZHVlIHRvIHRoZSBuZWVkZWQKPiBjYWNoZSBhbmQgVExCIGZsdXNoaW5nLCB0aGlzIHBh
dGNoIGltcGxlbWVudHMgYSBsYXp5IHdheSBvZiBzd2l0Y2hpbmcgdGhlCj4gTU1VIGNvbnRleHQu
IFRoZSBrZXJuZWwgZG9lcyBub3QgaGF2ZSBpdHMgb3duIE1NVSBjb250ZXh0LCBidXQgcmV1c2Vz
IHRoZQo+IGxhc3QgY2xpZW50IGNvbnRleHQgZm9yIGFsbCBvZiBpdHMgb3BlcmF0aW9ucy4gVGhp
cyBoYXMgc29tZSB2aXNpYmxlIGltcGFjdCwKPiBhcyB0aGUgR1BVIGNhbiBub3cgb25seSBiZSBz
dGFydGVkIG9uY2UgYSBjbGllbnQgaGFzIHN1Ym1pdHRlZCBzb21lIHdvcmsgYW5kCj4gd2UgZ290
IHRoZSBjbGllbnQgTU1VIGNvbnRleHQgYXNzaWduZWQuIEFsc28gdGhlIE1NVSBjb250ZXh0IGhh
cyBhIGRpZmZlcmVudAo+IGxpZmV0aW1lIHRoYW4gdGhlIGdlbmVyYWwgY2xpZW50IGNvbnRleHQs
IGFzIHRoZSBHUFUgbWlnaHQgc3RpbGwgZXhlY3V0ZSB0aGUKPiBrZXJuZWwgY29tbWFuZCBidWZm
ZXIgaW4gdGhlIGNvbnRleHQgb2YgYSBjbGllbnQgZXZlbiBhZnRlciB0aGUgY2xpZW50IGhhcwo+
IGNvbXBsZXRlZCBhbGwgR1BVIHdvcmsgYW5kIGhhcyBiZWVuIHRlcm1pbmF0ZWQuIE9ubHkgd2hl
biB0aGUgR1BVIGlzIHJ1bnRpbWUKPiBzdXNwZW5kZWQgb3Igc3dpdGNoZXMgdG8gYW5vdGhlciBj
bGllbnRzIE1NVSBjb250ZXh0IGlzIHRoZSBvbGQgY29udGV4dAo+IGZyZWVkIHVwLgo+IAo+IFNp
Z25lZC1vZmYtYnk6IEx1Y2FzIFN0YWNoIDxsLnN0YWNoQHBlbmd1dHJvbml4LmRlPgoKUmV2aWV3
ZWQtYnk6IEd1aWRvIEfDvG50aGVyIDxhZ3hAc2lneGNwdS5vcmc+IAoKPiAtLS0KPiB2MzogRG9u
J3QgY2FsbCBldG5hdml2X2NtZGJ1Zl9zdWJhbGxvY191bm1hcCB3aGVuIG1hcHBpbmcgZmFpbGVk
Lgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2J1ZmZlci5jICAgICB8
ICA2NCArKysrKysrKy0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2Rydi5j
ICAgICAgICB8ICAzOCArKysrKystCj4gIGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZf
ZHJ2LmggICAgICAgIHwgICA2ICstCj4gIGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZf
ZHVtcC5jICAgICAgIHwgICA0ICstCj4gIGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZf
Z2VtLmMgICAgICAgIHwgICA3ICstCj4gIGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZf
Z2VtLmggICAgICAgIHwgICA0ICstCj4gIGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZf
Z2VtX3N1Ym1pdC5jIHwgIDExICstCj4gIGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZf
Z3B1LmMgICAgICAgIHwgMTA1ICsrKysrKysrLS0tLS0tLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJt
L2V0bmF2aXYvZXRuYXZpdl9ncHUuaCAgICAgICAgfCAgIDQgLQo+ICBkcml2ZXJzL2dwdS9kcm0v
ZXRuYXZpdi9ldG5hdml2X2lvbW11LmMgICAgICB8ICAxMCArLQo+ICBkcml2ZXJzL2dwdS9kcm0v
ZXRuYXZpdi9ldG5hdml2X2lvbW11X3YyLmMgICB8ICAxNyArKy0KPiAgZHJpdmVycy9ncHUvZHJt
L2V0bmF2aXYvZXRuYXZpdl9tbXUuYyAgICAgICAgfCAgNDIgKysrKysrLS0KPiAgZHJpdmVycy9n
cHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9tbXUuaCAgICAgICAgfCAgMTEgKy0KPiAgMTMgZmlsZXMg
Y2hhbmdlZCwgMjA4IGluc2VydGlvbnMoKyksIDExNSBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9idWZmZXIuYyBiL2RyaXZlcnMv
Z3B1L2RybS9ldG5hdml2L2V0bmF2aXZfYnVmZmVyLmMKPiBpbmRleCA0MzI0YjA5ODY4OWYuLjg3
NmEwMzVlZTFhMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2
X2J1ZmZlci5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9idWZmZXIu
Ywo+IEBAIC0xMTgsNyArMTE4LDggQEAgc3RhdGljIHZvaWQgZXRuYXZpdl9idWZmZXJfZHVtcChz
dHJ1Y3QgZXRuYXZpdl9ncHUgKmdwdSwKPiAgCXUzMiAqcHRyID0gYnVmLT52YWRkciArIG9mZjsK
PiAgCj4gIAlkZXZfaW5mbyhncHUtPmRldiwgInZpcnQgJXAgcGh5cyAweCUwOHggZnJlZSAweCUw
OHhcbiIsCj4gLQkJCXB0ciwgZXRuYXZpdl9jbWRidWZfZ2V0X3ZhKGJ1ZiwgJmdwdS0+Y21kYnVm
X21hcHBpbmcpICsKPiArCQkJcHRyLCBldG5hdml2X2NtZGJ1Zl9nZXRfdmEoYnVmLAo+ICsJCQkm
Z3B1LT5tbXVfY29udGV4dC0+Y21kYnVmX21hcHBpbmcpICsKPiAgCQkJb2ZmLCBzaXplIC0gbGVu
ICogNCAtIG9mZik7Cj4gIAo+ICAJcHJpbnRfaGV4X2R1bXAoS0VSTl9JTkZPLCAiY21kICIsIERV
TVBfUFJFRklYX09GRlNFVCwgMTYsIDQsCj4gQEAgLTE1Miw3ICsxNTMsOCBAQCBzdGF0aWMgdTMy
IGV0bmF2aXZfYnVmZmVyX3Jlc2VydmUoc3RydWN0IGV0bmF2aXZfZ3B1ICpncHUsCj4gIAlpZiAo
YnVmZmVyLT51c2VyX3NpemUgKyBjbWRfZHdvcmRzICogc2l6ZW9mKHU2NCkgPiBidWZmZXItPnNp
emUpCj4gIAkJYnVmZmVyLT51c2VyX3NpemUgPSAwOwo+ICAKPiAtCXJldHVybiBldG5hdml2X2Nt
ZGJ1Zl9nZXRfdmEoYnVmZmVyLCAmZ3B1LT5jbWRidWZfbWFwcGluZykgKwo+ICsJcmV0dXJuIGV0
bmF2aXZfY21kYnVmX2dldF92YShidWZmZXIsCj4gKwkJCQkgICAgICZncHUtPm1tdV9jb250ZXh0
LT5jbWRidWZfbWFwcGluZykgKwo+ICAJICAgICAgIGJ1ZmZlci0+dXNlcl9zaXplOwo+ICB9Cj4g
IAo+IEBAIC0xNjYsNyArMTY4LDggQEAgdTE2IGV0bmF2aXZfYnVmZmVyX2luaXQoc3RydWN0IGV0
bmF2aXZfZ3B1ICpncHUpCj4gIAlidWZmZXItPnVzZXJfc2l6ZSA9IDA7Cj4gIAo+ICAJQ01EX1dB
SVQoYnVmZmVyKTsKPiAtCUNNRF9MSU5LKGJ1ZmZlciwgMiwgZXRuYXZpdl9jbWRidWZfZ2V0X3Zh
KGJ1ZmZlciwgJmdwdS0+Y21kYnVmX21hcHBpbmcpCj4gKwlDTURfTElOSyhidWZmZXIsIDIsCj4g
KwkJIGV0bmF2aXZfY21kYnVmX2dldF92YShidWZmZXIsICZncHUtPm1tdV9jb250ZXh0LT5jbWRi
dWZfbWFwcGluZykKPiAgCQkgKyBidWZmZXItPnVzZXJfc2l6ZSAtIDQpOwo+ICAKPiAgCXJldHVy
biBidWZmZXItPnVzZXJfc2l6ZSAvIDg7Cj4gQEAgLTI5Myw3ICsyOTYsOCBAQCB2b2lkIGV0bmF2
aXZfc3luY19wb2ludF9xdWV1ZShzdHJ1Y3QgZXRuYXZpdl9ncHUgKmdwdSwgdW5zaWduZWQgaW50
IGV2ZW50KQo+ICAKPiAgCS8qIEFwcGVuZCB3YWl0bGluayAqLwo+ICAJQ01EX1dBSVQoYnVmZmVy
KTsKPiAtCUNNRF9MSU5LKGJ1ZmZlciwgMiwgZXRuYXZpdl9jbWRidWZfZ2V0X3ZhKGJ1ZmZlciwg
JmdwdS0+Y21kYnVmX21hcHBpbmcpCj4gKwlDTURfTElOSyhidWZmZXIsIDIsCj4gKwkJIGV0bmF2
aXZfY21kYnVmX2dldF92YShidWZmZXIsICZncHUtPm1tdV9jb250ZXh0LT5jbWRidWZfbWFwcGlu
ZykKPiAgCQkgKyBidWZmZXItPnVzZXJfc2l6ZSAtIDQpOwo+ICAKPiAgCS8qCj4gQEAgLTMwOCw3
ICszMTIsOCBAQCB2b2lkIGV0bmF2aXZfc3luY19wb2ludF9xdWV1ZShzdHJ1Y3QgZXRuYXZpdl9n
cHUgKmdwdSwgdW5zaWduZWQgaW50IGV2ZW50KQo+ICAKPiAgLyogQXBwZW5kIGEgY29tbWFuZCBi
dWZmZXIgdG8gdGhlIHJpbmcgYnVmZmVyLiAqLwo+ICB2b2lkIGV0bmF2aXZfYnVmZmVyX3F1ZXVl
KHN0cnVjdCBldG5hdml2X2dwdSAqZ3B1LCB1MzIgZXhlY19zdGF0ZSwKPiAtCXVuc2lnbmVkIGlu
dCBldmVudCwgc3RydWN0IGV0bmF2aXZfY21kYnVmICpjbWRidWYpCj4gKwlzdHJ1Y3QgZXRuYXZp
dl9pb21tdV9jb250ZXh0ICptbXVfY29udGV4dCwgdW5zaWduZWQgaW50IGV2ZW50LAo+ICsJc3Ry
dWN0IGV0bmF2aXZfY21kYnVmICpjbWRidWYpCj4gIHsKPiAgCXN0cnVjdCBldG5hdml2X2NtZGJ1
ZiAqYnVmZmVyID0gJmdwdS0+YnVmZmVyOwo+ICAJdW5zaWduZWQgaW50IHdhaXRsaW5rX29mZnNl
dCA9IGJ1ZmZlci0+dXNlcl9zaXplIC0gMTY7Cj4gQEAgLTMxNywxNyArMzIyLDE5IEBAIHZvaWQg
ZXRuYXZpdl9idWZmZXJfcXVldWUoc3RydWN0IGV0bmF2aXZfZ3B1ICpncHUsIHUzMiBleGVjX3N0
YXRlLAo+ICAJYm9vbCBzd2l0Y2hfY29udGV4dCA9IGdwdS0+ZXhlY19zdGF0ZSAhPSBleGVjX3N0
YXRlOwo+ICAJdW5zaWduZWQgaW50IG5ld19mbHVzaF9zZXEgPSBSRUFEX09OQ0UoZ3B1LT5tbXVf
Y29udGV4dC0+Zmx1c2hfc2VxKTsKPiAgCWJvb2wgbmVlZF9mbHVzaCA9IGdwdS0+Zmx1c2hfc2Vx
ICE9IG5ld19mbHVzaF9zZXE7Cj4gKwlib29sIHN3aXRjaF9tbXVfY29udGV4dCA9IGdwdS0+bW11
X2NvbnRleHQgIT0gbW11X2NvbnRleHQ7Cj4gIAo+ICAJbG9ja2RlcF9hc3NlcnRfaGVsZCgmZ3B1
LT5sb2NrKTsKPiAgCj4gIAlpZiAoZHJtX2RlYnVnICYgRFJNX1VUX0RSSVZFUikKPiAgCQlldG5h
dml2X2J1ZmZlcl9kdW1wKGdwdSwgYnVmZmVyLCAwLCAweDUwKTsKPiAgCj4gLQlsaW5rX3Rhcmdl
dCA9IGV0bmF2aXZfY21kYnVmX2dldF92YShjbWRidWYsICZncHUtPmNtZGJ1Zl9tYXBwaW5nKTsK
PiArCWxpbmtfdGFyZ2V0ID0gZXRuYXZpdl9jbWRidWZfZ2V0X3ZhKGNtZGJ1ZiwKPiArCQkJCQkg
ICAgJmdwdS0+bW11X2NvbnRleHQtPmNtZGJ1Zl9tYXBwaW5nKTsKPiAgCWxpbmtfZHdvcmRzID0g
Y21kYnVmLT5zaXplIC8gODsKPiAgCj4gIAkvKgo+IC0JICogSWYgd2UgbmVlZCBtYWludGFuZW5j
ZSBwcmlvciB0byBzdWJtaXR0aW5nIHRoaXMgYnVmZmVyLCB3ZSB3aWxsCj4gKwkgKiBJZiB3ZSBu
ZWVkIG1haW50ZW5hbmNlIHByaW9yIHRvIHN1Ym1pdHRpbmcgdGhpcyBidWZmZXIsIHdlIHdpbGwK
PiAgCSAqIG5lZWQgdG8gYXBwZW5kIGEgbW11IGZsdXNoIGxvYWQgc3RhdGUsIGZvbGxvd2VkIGJ5
IGEgbmV3Cj4gIAkgKiBsaW5rIHRvIHRoaXMgYnVmZmVyIC0gYSB0b3RhbCBvZiBmb3VyIGFkZGl0
aW9uYWwgd29yZHMuCj4gIAkgKi8KPiBAQCAtMzQ5LDcgKzM1NiwyNCBAQCB2b2lkIGV0bmF2aXZf
YnVmZmVyX3F1ZXVlKHN0cnVjdCBldG5hdml2X2dwdSAqZ3B1LCB1MzIgZXhlY19zdGF0ZSwKPiAg
CQlpZiAoc3dpdGNoX2NvbnRleHQpCj4gIAkJCWV4dHJhX2R3b3JkcyArPSA0Owo+ICAKPiArCQkv
KiBQVEEgbG9hZCBjb21tYW5kICovCj4gKwkJaWYgKHN3aXRjaF9tbXVfY29udGV4dCAmJiBncHUt
PnNlY19tb2RlID09IEVUTkFfU0VDX0tFUk5FTCkKPiArCQkJZXh0cmFfZHdvcmRzICs9IDE7Cj4g
Kwo+ICAJCXRhcmdldCA9IGV0bmF2aXZfYnVmZmVyX3Jlc2VydmUoZ3B1LCBidWZmZXIsIGV4dHJh
X2R3b3Jkcyk7Cj4gKwkJLyoKPiArCQkgKiBTd2l0Y2ggTU1VIGNvbnRleHQgaWYgbmVjZXNzYXJ5
LiBNdXN0IGJlIGRvbmUgYWZ0ZXIgdGhlCj4gKwkJICogbGluayB0YXJnZXQgaGFzIGJlZW4gY2Fs
Y3VsYXRlZCwgYXMgdGhlIGp1bXAgZm9yd2FyZCBpbiB0aGUKPiArCQkgKiBrZXJuZWwgcmluZyBz
dGlsbCB1c2VzIHRoZSBsYXN0IGFjdGl2ZSBNTVUgY29udGV4dCBiZWZvcmUKPiArCQkgKiB0aGUg
c3dpdGNoLgo+ICsJCSAqLwo+ICsJCWlmIChzd2l0Y2hfbW11X2NvbnRleHQpIHsKPiArCQkJc3Ry
dWN0IGV0bmF2aXZfaW9tbXVfY29udGV4dCAqb2xkX2NvbnRleHQgPSBncHUtPm1tdV9jb250ZXh0
Owo+ICsKPiArCQkJZXRuYXZpdl9pb21tdV9jb250ZXh0X2dldChtbXVfY29udGV4dCk7Cj4gKwkJ
CWdwdS0+bW11X2NvbnRleHQgPSBtbXVfY29udGV4dDsKPiArCQkJZXRuYXZpdl9pb21tdV9jb250
ZXh0X3B1dChvbGRfY29udGV4dCk7Cj4gKwkJfQo+ICAKPiAgCQlpZiAobmVlZF9mbHVzaCkgewo+
ICAJCQkvKiBBZGQgdGhlIE1NVSBmbHVzaCAqLwo+IEBAIC0zNjEsMTAgKzM4NSwyMyBAQCB2b2lk
IGV0bmF2aXZfYnVmZmVyX3F1ZXVlKHN0cnVjdCBldG5hdml2X2dwdSAqZ3B1LCB1MzIgZXhlY19z
dGF0ZSwKPiAgCQkJCQkgICAgICAgVklWU19HTF9GTFVTSF9NTVVfRkxVU0hfUEVNTVUgfAo+ICAJ
CQkJCSAgICAgICBWSVZTX0dMX0ZMVVNIX01NVV9GTFVTSF9VTks0KTsKPiAgCQkJfSBlbHNlIHsK
PiArCQkJCXUzMiBmbHVzaCA9IFZJVlNfTU1VdjJfQ09ORklHVVJBVElPTl9NT0RFX01BU0sgfAo+
ICsJCQkJCSAgICBWSVZTX01NVXYyX0NPTkZJR1VSQVRJT05fRkxVU0hfRkxVU0g7Cj4gKwo+ICsJ
CQkJaWYgKHN3aXRjaF9tbXVfY29udGV4dCAmJgo+ICsJCQkJICAgIGdwdS0+c2VjX21vZGUgPT0g
RVROQV9TRUNfS0VSTkVMKSB7Cj4gKwkJCQkJdW5zaWduZWQgc2hvcnQgaWQgPQo+ICsJCQkJCQll
dG5hdml2X2lvbW11djJfZ2V0X3B0YV9pZChncHUtPm1tdV9jb250ZXh0KTsKPiArCQkJCQlDTURf
TE9BRF9TVEFURShidWZmZXIsCj4gKwkJCQkJCVZJVlNfTU1VdjJfUFRBX0NPTkZJRywKPiArCQkJ
CQkJVklWU19NTVV2Ml9QVEFfQ09ORklHX0lOREVYKGlkKSk7Cj4gKwkJCQl9Cj4gKwo+ICsJCQkJ
aWYgKGdwdS0+c2VjX21vZGUgPT0gRVROQV9TRUNfTk9ORSkKPiArCQkJCQlmbHVzaCB8PSBldG5h
dml2X2lvbW11djJfZ2V0X210bGJfYWRkcihncHUtPm1tdV9jb250ZXh0KTsKPiArCj4gIAkJCQlD
TURfTE9BRF9TVEFURShidWZmZXIsIFZJVlNfTU1VdjJfQ09ORklHVVJBVElPTiwKPiAtCQkJCQlW
SVZTX01NVXYyX0NPTkZJR1VSQVRJT05fTU9ERV9NQVNLIHwKPiAtCQkJCQlWSVZTX01NVXYyX0NP
TkZJR1VSQVRJT05fQUREUkVTU19NQVNLIHwKPiAtCQkJCQlWSVZTX01NVXYyX0NPTkZJR1VSQVRJ
T05fRkxVU0hfRkxVU0gpOwo+ICsJCQkJCSAgICAgICBmbHVzaCk7Cj4gIAkJCQlDTURfU0VNKGJ1
ZmZlciwgU1lOQ19SRUNJUElFTlRfRkUsCj4gIAkJCQkJU1lOQ19SRUNJUElFTlRfUEUpOwo+ICAJ
CQkJQ01EX1NUQUxMKGJ1ZmZlciwgU1lOQ19SRUNJUElFTlRfRkUsCj4gQEAgLTM4MCw2ICs0MTcs
OCBAQCB2b2lkIGV0bmF2aXZfYnVmZmVyX3F1ZXVlKHN0cnVjdCBldG5hdml2X2dwdSAqZ3B1LCB1
MzIgZXhlY19zdGF0ZSwKPiAgCQl9Cj4gIAo+ICAJCS8qIEFuZCB0aGUgbGluayB0byB0aGUgc3Vi
bWl0dGVkIGJ1ZmZlciAqLwo+ICsJCWxpbmtfdGFyZ2V0ID0gZXRuYXZpdl9jbWRidWZfZ2V0X3Zh
KGNtZGJ1ZiwKPiArCQkJCQkmZ3B1LT5tbXVfY29udGV4dC0+Y21kYnVmX21hcHBpbmcpOwo+ICAJ
CUNNRF9MSU5LKGJ1ZmZlciwgbGlua19kd29yZHMsIGxpbmtfdGFyZ2V0KTsKPiAgCj4gIAkJLyog
VXBkYXRlIHRoZSBsaW5rIHRhcmdldCB0byBwb2ludCB0byBhYm92ZSBpbnN0cnVjdGlvbnMgKi8K
PiBAQCAtNDE2LDEzICs0NTUsMTQgQEAgdm9pZCBldG5hdml2X2J1ZmZlcl9xdWV1ZShzdHJ1Y3Qg
ZXRuYXZpdl9ncHUgKmdwdSwgdTMyIGV4ZWNfc3RhdGUsCj4gIAlDTURfTE9BRF9TVEFURShidWZm
ZXIsIFZJVlNfR0xfRVZFTlQsIFZJVlNfR0xfRVZFTlRfRVZFTlRfSUQoZXZlbnQpIHwKPiAgCQkg
ICAgICAgVklWU19HTF9FVkVOVF9GUk9NX1BFKTsKPiAgCUNNRF9XQUlUKGJ1ZmZlcik7Cj4gLQlD
TURfTElOSyhidWZmZXIsIDIsIGV0bmF2aXZfY21kYnVmX2dldF92YShidWZmZXIsICZncHUtPmNt
ZGJ1Zl9tYXBwaW5nKQo+ICsJQ01EX0xJTksoYnVmZmVyLCAyLAo+ICsJCSBldG5hdml2X2NtZGJ1
Zl9nZXRfdmEoYnVmZmVyLCAmZ3B1LT5tbXVfY29udGV4dC0+Y21kYnVmX21hcHBpbmcpCj4gIAkJ
ICsgYnVmZmVyLT51c2VyX3NpemUgLSA0KTsKPiAgCj4gIAlpZiAoZHJtX2RlYnVnICYgRFJNX1VU
X0RSSVZFUikKPiAgCQlwcl9pbmZvKCJzdHJlYW0gbGluayB0byAweCUwOHggQCAweCUwOHggJXBc
biIsCj4gIAkJCXJldHVybl90YXJnZXQsCj4gLQkJCWV0bmF2aXZfY21kYnVmX2dldF92YShjbWRi
dWYsICZncHUtPmNtZGJ1Zl9tYXBwaW5nKSwKPiArCQkJZXRuYXZpdl9jbWRidWZfZ2V0X3ZhKGNt
ZGJ1ZiwgJmdwdS0+bW11X2NvbnRleHQtPmNtZGJ1Zl9tYXBwaW5nKSwKPiAgCQkJY21kYnVmLT52
YWRkcik7Cj4gIAo+ICAJaWYgKGRybV9kZWJ1ZyAmIERSTV9VVF9EUklWRVIpIHsKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9kcnYuYyBiL2RyaXZlcnMvZ3B1
L2RybS9ldG5hdml2L2V0bmF2aXZfZHJ2LmMKPiBpbmRleCBlYjBjMjNmZTk3OWEuLjgwZjFlZGNi
YmVhMCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2Rydi5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9kcnYuYwo+IEBAIC01MCwx
MiArNTAsMTkgQEAgc3RhdGljIGludCBldG5hdml2X29wZW4oc3RydWN0IGRybV9kZXZpY2UgKmRl
diwgc3RydWN0IGRybV9maWxlICpmaWxlKQo+ICB7Cj4gIAlzdHJ1Y3QgZXRuYXZpdl9kcm1fcHJp
dmF0ZSAqcHJpdiA9IGRldi0+ZGV2X3ByaXZhdGU7Cj4gIAlzdHJ1Y3QgZXRuYXZpdl9maWxlX3By
aXZhdGUgKmN0eDsKPiAtCWludCBpOwo+ICsJaW50IHJldCwgaTsKPiAgCj4gIAljdHggPSBremFs
bG9jKHNpemVvZigqY3R4KSwgR0ZQX0tFUk5FTCk7Cj4gIAlpZiAoIWN0eCkKPiAgCQlyZXR1cm4g
LUVOT01FTTsKPiAgCj4gKwljdHgtPm1tdSA9IGV0bmF2aXZfaW9tbXVfY29udGV4dF9pbml0KHBy
aXYtPm1tdV9nbG9iYWwsCj4gKwkJCQkJICAgICAgcHJpdi0+Y21kYnVmX3N1YmFsbG9jKTsKPiAr
CWlmICghY3R4LT5tbXUpIHsKPiArCQlyZXQgPSAtRU5PTUVNOwo+ICsJCWdvdG8gb3V0X2ZyZWU7
Cj4gKwl9Cj4gKwo+ICAJZm9yIChpID0gMDsgaSA8IEVUTkFfTUFYX1BJUEVTOyBpKyspIHsKPiAg
CQlzdHJ1Y3QgZXRuYXZpdl9ncHUgKmdwdSA9IHByaXYtPmdwdVtpXTsKPiAgCQlzdHJ1Y3QgZHJt
X3NjaGVkX3JxICpycTsKPiBAQCAtNzAsNiArNzcsMTAgQEAgc3RhdGljIGludCBldG5hdml2X29w
ZW4oc3RydWN0IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRybV9maWxlICpmaWxlKQo+ICAJZmls
ZS0+ZHJpdmVyX3ByaXYgPSBjdHg7Cj4gIAo+ICAJcmV0dXJuIDA7Cj4gKwo+ICtvdXRfZnJlZToK
PiArCWtmcmVlKGN0eCk7Cj4gKwlyZXR1cm4gcmV0Owo+ICB9Cj4gIAo+ICBzdGF0aWMgdm9pZCBl
dG5hdml2X3Bvc3RjbG9zZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgZHJtX2ZpbGUg
KmZpbGUpCj4gQEAgLTg1LDYgKzk2LDggQEAgc3RhdGljIHZvaWQgZXRuYXZpdl9wb3N0Y2xvc2Uo
c3RydWN0IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRybV9maWxlICpmaWxlKQo+ICAJCQlkcm1f
c2NoZWRfZW50aXR5X2Rlc3Ryb3koJmN0eC0+c2NoZWRfZW50aXR5W2ldKTsKPiAgCX0KPiAgCj4g
KwlldG5hdml2X2lvbW11X2NvbnRleHRfcHV0KGN0eC0+bW11KTsKPiArCj4gIAlrZnJlZShjdHgp
Owo+ICB9Cj4gIAo+IEBAIC0xMTYsMTIgKzEyOSwyOSBAQCBzdGF0aWMgaW50IGV0bmF2aXZfbW1f
c2hvdyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3Qgc2VxX2ZpbGUgKm0pCj4gIHN0YXRp
YyBpbnQgZXRuYXZpdl9tbXVfc2hvdyhzdHJ1Y3QgZXRuYXZpdl9ncHUgKmdwdSwgc3RydWN0IHNl
cV9maWxlICptKQo+ICB7Cj4gIAlzdHJ1Y3QgZHJtX3ByaW50ZXIgcCA9IGRybV9zZXFfZmlsZV9w
cmludGVyKG0pOwo+ICsJc3RydWN0IGV0bmF2aXZfaW9tbXVfY29udGV4dCAqbW11X2NvbnRleHQ7
Cj4gIAo+ICAJc2VxX3ByaW50ZihtLCAiQWN0aXZlIE9iamVjdHMgKCVzKTpcbiIsIGRldl9uYW1l
KGdwdS0+ZGV2KSk7Cj4gIAo+IC0JbXV0ZXhfbG9jaygmZ3B1LT5tbXVfY29udGV4dC0+bG9jayk7
Cj4gLQlkcm1fbW1fcHJpbnQoJmdwdS0+bW11X2NvbnRleHQtPm1tLCAmcCk7Cj4gLQltdXRleF91
bmxvY2soJmdwdS0+bW11X2NvbnRleHQtPmxvY2spOwo+ICsJLyoKPiArCSAqIExvY2sgdGhlIEdQ
VSB0byBhdm9pZCBhIE1NVSBjb250ZXh0IHN3aXRjaCBqdXN0IG5vdyBhbmQgZWxldmF0ZQo+ICsJ
ICogdGhlIHJlZmNvdW50IG9mIHRoZSBjdXJyZW50IGNvbnRleHQgdG8gYXZvaWQgaXQgZGlzYXBw
ZWFyaW5nIGZyb20KPiArCSAqIHVuZGVyIG91ciBmZWV0Lgo+ICsJICovCj4gKwltdXRleF9sb2Nr
KCZncHUtPmxvY2spOwo+ICsJbW11X2NvbnRleHQgPSBncHUtPm1tdV9jb250ZXh0Owo+ICsJaWYg
KG1tdV9jb250ZXh0KQo+ICsJCWV0bmF2aXZfaW9tbXVfY29udGV4dF9nZXQobW11X2NvbnRleHQp
Owo+ICsJbXV0ZXhfdW5sb2NrKCZncHUtPmxvY2spOwo+ICsKPiArCWlmICghbW11X2NvbnRleHQp
Cj4gKwkJcmV0dXJuIDA7Cj4gKwo+ICsJbXV0ZXhfbG9jaygmbW11X2NvbnRleHQtPmxvY2spOwo+
ICsJZHJtX21tX3ByaW50KCZtbXVfY29udGV4dC0+bW0sICZwKTsKPiArCW11dGV4X3VubG9jaygm
bW11X2NvbnRleHQtPmxvY2spOwo+ICsKPiArCWV0bmF2aXZfaW9tbXVfY29udGV4dF9wdXQobW11
X2NvbnRleHQpOwo+ICAKPiAgCXJldHVybiAwOwo+ICB9Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9l
dG5hdml2X2Rydi5oCj4gaW5kZXggNWY4ZGIwOGYxYzE3Li5hNDg4Y2ZkYjZiYmYgMTAwNjQ0Cj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9kcnYuaAo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZHJ2LmgKPiBAQCAtMjUsMTAgKzI1LDcgQEAgc3Ry
dWN0IGV0bmF2aXZfZ2VtX3N1Ym1pdDsKPiAgc3RydWN0IGV0bmF2aXZfaW9tbXVfZ2xvYmFsOwo+
ICAKPiAgc3RydWN0IGV0bmF2aXZfZmlsZV9wcml2YXRlIHsKPiAtCS8qCj4gLQkgKiBXaGVuIHBl
ci1jb250ZXh0IGFkZHJlc3Mgc3BhY2VzIGFyZSBzdXBwb3J0ZWQgd2UnZCBrZWVwIHRyYWNrIG9m
Cj4gLQkgKiB0aGUgY29udGV4dCdzIHBhZ2UtdGFibGVzIGhlcmUuCj4gLQkgKi8KPiArCXN0cnVj
dCBldG5hdml2X2lvbW11X2NvbnRleHQJKm1tdTsKPiAgCXN0cnVjdCBkcm1fc2NoZWRfZW50aXR5
CQlzY2hlZF9lbnRpdHlbRVROQV9NQVhfUElQRVNdOwo+ICB9Owo+ICAKPiBAQCAtNzUsNiArNzIs
NyBAQCB1MTYgZXRuYXZpdl9idWZmZXJfY29uZmlnX3B0YShzdHJ1Y3QgZXRuYXZpdl9ncHUgKmdw
dSwgdW5zaWduZWQgc2hvcnQgaWQpOwo+ICB2b2lkIGV0bmF2aXZfYnVmZmVyX2VuZChzdHJ1Y3Qg
ZXRuYXZpdl9ncHUgKmdwdSk7Cj4gIHZvaWQgZXRuYXZpdl9zeW5jX3BvaW50X3F1ZXVlKHN0cnVj
dCBldG5hdml2X2dwdSAqZ3B1LCB1bnNpZ25lZCBpbnQgZXZlbnQpOwo+ICB2b2lkIGV0bmF2aXZf
YnVmZmVyX3F1ZXVlKHN0cnVjdCBldG5hdml2X2dwdSAqZ3B1LCB1MzIgZXhlY19zdGF0ZSwKPiAr
CXN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQgKm1tdSwKPiAgCXVuc2lnbmVkIGludCBldmVu
dCwgc3RydWN0IGV0bmF2aXZfY21kYnVmICpjbWRidWYpOwo+ICB2b2lkIGV0bmF2aXZfdmFsaWRh
dGVfaW5pdCh2b2lkKTsKPiAgYm9vbCBldG5hdml2X2NtZF92YWxpZGF0ZV9vbmUoc3RydWN0IGV0
bmF2aXZfZ3B1ICpncHUsCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0
bmF2aXZfZHVtcC5jIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9kdW1wLmMKPiBp
bmRleCA3ZTY3OTE1MTc2OTMuLjY5OGRiNTQwOTcyYyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vZXRuYXZpdi9ldG5hdml2X2R1bXAuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5h
dml2L2V0bmF2aXZfZHVtcC5jCj4gQEAgLTE3MywxMiArMTczLDEyIEBAIHZvaWQgZXRuYXZpdl9j
b3JlX2R1bXAoc3RydWN0IGV0bmF2aXZfZ2VtX3N1Ym1pdCAqc3VibWl0KQo+ICAJZXRuYXZpdl9j
b3JlX2R1bXBfbWVtKCZpdGVyLCBFVERVTVBfQlVGX1JJTkcsIGdwdS0+YnVmZmVyLnZhZGRyLAo+
ICAJCQkgICAgICBncHUtPmJ1ZmZlci5zaXplLAo+ICAJCQkgICAgICBldG5hdml2X2NtZGJ1Zl9n
ZXRfdmEoJmdwdS0+YnVmZmVyLAo+IC0JCQkJCQkgICAgJmdwdS0+Y21kYnVmX21hcHBpbmcpKTsK
PiArCQkJCQkmZ3B1LT5tbXVfY29udGV4dC0+Y21kYnVmX21hcHBpbmcpKTsKPiAgCj4gIAlldG5h
dml2X2NvcmVfZHVtcF9tZW0oJml0ZXIsIEVURFVNUF9CVUZfQ01ELAo+ICAJCQkgICAgICBzdWJt
aXQtPmNtZGJ1Zi52YWRkciwgc3VibWl0LT5jbWRidWYuc2l6ZSwKPiAgCQkJICAgICAgZXRuYXZp
dl9jbWRidWZfZ2V0X3ZhKCZzdWJtaXQtPmNtZGJ1ZiwKPiAtCQkJCQkJICAgICZncHUtPmNtZGJ1
Zl9tYXBwaW5nKSk7Cj4gKwkJCQkJJmdwdS0+bW11X2NvbnRleHQtPmNtZGJ1Zl9tYXBwaW5nKSk7
Cj4gIAo+ICAJLyogUmVzZXJ2ZSBzcGFjZSBmb3IgdGhlIGJvbWFwICovCj4gIAlpZiAobl9ib21h
cF9wYWdlcykgewo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2
X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW0uYwo+IGluZGV4IDA0
YzgxNzBmNzZjZC4uZTc5ZjZlZjM2NTlhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9l
dG5hdml2L2V0bmF2aXZfZ2VtLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5h
dml2X2dlbS5jCj4gQEAgLTI0OCw4ICsyNDgsNyBAQCB2b2lkIGV0bmF2aXZfZ2VtX21hcHBpbmdf
dW5yZWZlcmVuY2Uoc3RydWN0IGV0bmF2aXZfdnJhbV9tYXBwaW5nICptYXBwaW5nKQo+ICB9Cj4g
IAo+ICBzdHJ1Y3QgZXRuYXZpdl92cmFtX21hcHBpbmcgKmV0bmF2aXZfZ2VtX21hcHBpbmdfZ2V0
KAo+IC0Jc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIHN0cnVjdCBldG5hdml2X2dwdSAqZ3B1
LAo+IC0Jc3RydWN0IGV0bmF2aXZfaW9tbXVfY29udGV4dCAqbW11X2NvbnRleHQpCj4gKwlzdHJ1
Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgc3RydWN0IGV0bmF2aXZfaW9tbXVfY29udGV4dCAqbW11
X2NvbnRleHQpCj4gIHsKPiAgCXN0cnVjdCBldG5hdml2X2dlbV9vYmplY3QgKmV0bmF2aXZfb2Jq
ID0gdG9fZXRuYXZpdl9ibyhvYmopOwo+ICAJc3RydWN0IGV0bmF2aXZfdnJhbV9tYXBwaW5nICpt
YXBwaW5nOwo+IEBAIC0zMDgsOCArMzA3LDggQEAgc3RydWN0IGV0bmF2aXZfdnJhbV9tYXBwaW5n
ICpldG5hdml2X2dlbV9tYXBwaW5nX2dldCgKPiAgCW1hcHBpbmctPmNvbnRleHQgPSBtbXVfY29u
dGV4dDsKPiAgCW1hcHBpbmctPnVzZSA9IDE7Cj4gIAo+IC0JcmV0ID0gZXRuYXZpdl9pb21tdV9t
YXBfZ2VtKG1tdV9jb250ZXh0LCBldG5hdml2X29iaiwgZ3B1LT5tZW1vcnlfYmFzZSwKPiAtCQkJ
CSAgICBtYXBwaW5nKTsKPiArCXJldCA9IGV0bmF2aXZfaW9tbXVfbWFwX2dlbShtbXVfY29udGV4
dCwgZXRuYXZpdl9vYmosCj4gKwkJCQkgICAgbW11X2NvbnRleHQtPmdsb2JhbC0+bWVtb3J5X2Jh
c2UsIG1hcHBpbmcpOwo+ICAJaWYgKHJldCA8IDApCj4gIAkJa2ZyZWUobWFwcGluZyk7Cj4gIAll
bHNlCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmgg
Yi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5oCj4gaW5kZXggZjM0MjU2MGI1
OTM4Li4xZTExNjU5YTg4NDIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYv
ZXRuYXZpdl9nZW0uaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2Vt
LmgKPiBAQCAtOTMsNiArOTMsNyBAQCBzdHJ1Y3QgZXRuYXZpdl9nZW1fc3VibWl0IHsKPiAgCXN0
cnVjdCBrcmVmIHJlZmNvdW50Owo+ICAJc3RydWN0IGV0bmF2aXZfZmlsZV9wcml2YXRlICpjdHg7
Cj4gIAlzdHJ1Y3QgZXRuYXZpdl9ncHUgKmdwdTsKPiArCXN0cnVjdCBldG5hdml2X2lvbW11X2Nv
bnRleHQgKm1tdV9jb250ZXh0LCAqcHJldl9tbXVfY29udGV4dDsKPiAgCXN0cnVjdCBkbWFfZmVu
Y2UgKm91dF9mZW5jZSwgKmluX2ZlbmNlOwo+ICAJaW50IG91dF9mZW5jZV9pZDsKPiAgCXN0cnVj
dCBsaXN0X2hlYWQgbm9kZTsgLyogR1BVIGFjdGl2ZSBzdWJtaXQgbGlzdCAqLwo+IEBAIC0xMTks
OCArMTIwLDcgQEAgc3RydWN0IHBhZ2UgKipldG5hdml2X2dlbV9nZXRfcGFnZXMoc3RydWN0IGV0
bmF2aXZfZ2VtX29iamVjdCAqb2JqKTsKPiAgdm9pZCBldG5hdml2X2dlbV9wdXRfcGFnZXMoc3Ry
dWN0IGV0bmF2aXZfZ2VtX29iamVjdCAqb2JqKTsKPiAgCj4gIHN0cnVjdCBldG5hdml2X3ZyYW1f
bWFwcGluZyAqZXRuYXZpdl9nZW1fbWFwcGluZ19nZXQoCj4gLQlzdHJ1Y3QgZHJtX2dlbV9vYmpl
Y3QgKm9iaiwgc3RydWN0IGV0bmF2aXZfZ3B1ICpncHUsCj4gLQlzdHJ1Y3QgZXRuYXZpdl9pb21t
dV9jb250ZXh0ICptbXVfY29udGV4dCk7Cj4gKwlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwg
c3RydWN0IGV0bmF2aXZfaW9tbXVfY29udGV4dCAqbW11X2NvbnRleHQpOwo+ICB2b2lkIGV0bmF2
aXZfZ2VtX21hcHBpbmdfdW5yZWZlcmVuY2Uoc3RydWN0IGV0bmF2aXZfdnJhbV9tYXBwaW5nICpt
YXBwaW5nKTsKPiAgCj4gICNlbmRpZiAvKiBfX0VUTkFWSVZfR0VNX0hfXyAqLwo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9zdWJtaXQuYyBiL2RyaXZl
cnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5jCj4gaW5kZXggNzkyOWQyNThk
YWY4Li4xNmU3ZDM3MWE3ZWYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYv
ZXRuYXZpdl9nZW1fc3VibWl0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5h
dml2X2dlbV9zdWJtaXQuYwo+IEBAIC0yMjQsOCArMjI0LDcgQEAgc3RhdGljIGludCBzdWJtaXRf
cGluX29iamVjdHMoc3RydWN0IGV0bmF2aXZfZ2VtX3N1Ym1pdCAqc3VibWl0KQo+ICAJCXN0cnVj
dCBldG5hdml2X3ZyYW1fbWFwcGluZyAqbWFwcGluZzsKPiAgCj4gIAkJbWFwcGluZyA9IGV0bmF2
aXZfZ2VtX21hcHBpbmdfZ2V0KCZldG5hdml2X29iai0+YmFzZSwKPiAtCQkJCQkJICBzdWJtaXQt
PmdwdSwKPiAtCQkJCQkJICBzdWJtaXQtPmdwdS0+bW11X2NvbnRleHQpOwo+ICsJCQkJCQkgIHN1
Ym1pdC0+bW11X2NvbnRleHQpOwo+ICAJCWlmIChJU19FUlIobWFwcGluZykpIHsKPiAgCQkJcmV0
ID0gUFRSX0VSUihtYXBwaW5nKTsKPiAgCQkJYnJlYWs7Cj4gQEAgLTM2Miw2ICszNjEsMTIgQEAg
c3RhdGljIHZvaWQgc3VibWl0X2NsZWFudXAoc3RydWN0IGtyZWYgKmtyZWYpCj4gIAlpZiAoc3Vi
bWl0LT5jbWRidWYuc3ViYWxsb2MpCj4gIAkJZXRuYXZpdl9jbWRidWZfZnJlZSgmc3VibWl0LT5j
bWRidWYpOwo+ICAKPiArCWlmIChzdWJtaXQtPm1tdV9jb250ZXh0KQo+ICsJCWV0bmF2aXZfaW9t
bXVfY29udGV4dF9wdXQoc3VibWl0LT5tbXVfY29udGV4dCk7Cj4gKwo+ICsJaWYgKHN1Ym1pdC0+
cHJldl9tbXVfY29udGV4dCkKPiArCQlldG5hdml2X2lvbW11X2NvbnRleHRfcHV0KHN1Ym1pdC0+
cHJldl9tbXVfY29udGV4dCk7Cj4gKwo+ICAJZm9yIChpID0gMDsgaSA8IHN1Ym1pdC0+bnJfYm9z
OyBpKyspIHsKPiAgCQlzdHJ1Y3QgZXRuYXZpdl9nZW1fb2JqZWN0ICpldG5hdml2X29iaiA9IHN1
Ym1pdC0+Ym9zW2ldLm9iajsKPiAgCj4gQEAgLTUwMyw2ICs1MDgsOCBAQCBpbnQgZXRuYXZpdl9p
b2N0bF9nZW1fc3VibWl0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCj4gIAkJ
Z290byBlcnJfc3VibWl0X29iamVjdHM7Cj4gIAo+ICAJc3VibWl0LT5jdHggPSBmaWxlLT5kcml2
ZXJfcHJpdjsKPiArCWV0bmF2aXZfaW9tbXVfY29udGV4dF9nZXQoc3VibWl0LT5jdHgtPm1tdSk7
Cj4gKwlzdWJtaXQtPm1tdV9jb250ZXh0ID0gc3VibWl0LT5jdHgtPm1tdTsKPiAgCXN1Ym1pdC0+
ZXhlY19zdGF0ZSA9IGFyZ3MtPmV4ZWNfc3RhdGU7Cj4gIAlzdWJtaXQtPmZsYWdzID0gYXJncy0+
ZmxhZ3M7Cj4gIAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2
X2dwdS5jIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9ncHUuYwo+IGluZGV4IDNh
ZjcyYTQxMjdiMC4uZDhhODNlYmZjZTQ3IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9l
dG5hdml2L2V0bmF2aXZfZ3B1LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5h
dml2X2dwdS5jCj4gQEAgLTYwMiw3ICs2MDIsOCBAQCB2b2lkIGV0bmF2aXZfZ3B1X3N0YXJ0X2Zl
KHN0cnVjdCBldG5hdml2X2dwdSAqZ3B1LCB1MzIgYWRkcmVzcywgdTE2IHByZWZldGNoKQo+ICAK
PiAgc3RhdGljIHZvaWQgZXRuYXZpdl9ncHVfc3RhcnRfZmVfaWRsZWxvb3Aoc3RydWN0IGV0bmF2
aXZfZ3B1ICpncHUpCj4gIHsKPiAtCXUzMiBhZGRyZXNzID0gZXRuYXZpdl9jbWRidWZfZ2V0X3Zh
KCZncHUtPmJ1ZmZlciwgJmdwdS0+Y21kYnVmX21hcHBpbmcpOwo+ICsJdTMyIGFkZHJlc3MgPSBl
dG5hdml2X2NtZGJ1Zl9nZXRfdmEoJmdwdS0+YnVmZmVyLAo+ICsJCQkJJmdwdS0+bW11X2NvbnRl
eHQtPmNtZGJ1Zl9tYXBwaW5nKTsKPiAgCXUxNiBwcmVmZXRjaDsKPiAgCj4gIAkvKiBzZXR1cCB0
aGUgTU1VICovCj4gQEAgLTY5Myw4ICs2OTQsNiBAQCBzdGF0aWMgdm9pZCBldG5hdml2X2dwdV9o
d19pbml0KHN0cnVjdCBldG5hdml2X2dwdSAqZ3B1KQo+ICAJZXRuYXZpdl9ncHVfc2V0dXBfcHVs
c2VfZWF0ZXIoZ3B1KTsKPiAgCj4gIAlncHVfd3JpdGUoZ3B1LCBWSVZTX0hJX0lOVFJfRU5CTCwg
fjBVKTsKPiAtCj4gLQlldG5hdml2X2dwdV9zdGFydF9mZV9pZGxlbG9vcChncHUpOwo+ICB9Cj4g
IAo+ICBpbnQgZXRuYXZpdl9ncHVfaW5pdChzdHJ1Y3QgZXRuYXZpdl9ncHUgKmdwdSkKPiBAQCAt
NzI0LDI4ICs3MjMsNiBAQCBpbnQgZXRuYXZpdl9ncHVfaW5pdChzdHJ1Y3QgZXRuYXZpdl9ncHUg
KmdwdSkKPiAgCQlnb3RvIGZhaWw7Cj4gIAl9Cj4gIAo+IC0JLyoKPiAtCSAqIFNldCB0aGUgR1BV
IGxpbmVhciB3aW5kb3cgdG8gYmUgYXQgdGhlIGVuZCBvZiB0aGUgRE1BIHdpbmRvdywgd2hlcmUK
PiAtCSAqIHRoZSBDTUEgYXJlYSBpcyBsaWtlbHkgdG8gcmVzaWRlLiBUaGlzIGVuc3VyZXMgdGhh
dCB3ZSBhcmUgYWJsZSB0bwo+IC0JICogbWFwIHRoZSBjb21tYW5kIGJ1ZmZlcnMgd2hpbGUgaGF2
aW5nIHRoZSBsaW5lYXIgd2luZG93IG92ZXJsYXAgYXMKPiAtCSAqIG11Y2ggUkFNIGFzIHBvc3Np
YmxlLCBzbyB3ZSBjYW4gb3B0aW1pemUgbWFwcGluZ3MgZm9yIG90aGVyIGJ1ZmZlcnMuCj4gLQkg
Kgo+IC0JICogRm9yIDNEIGNvcmVzIG9ubHkgZG8gdGhpcyBpZiBNQzIuMCBpcyBwcmVzZW50LCBh
cyB3aXRoIE1DMS4wIGl0IGxlYWRzCj4gLQkgKiB0byBkaWZmZXJlbnQgdmlld3Mgb2YgdGhlIG1l
bW9yeSBvbiB0aGUgaW5kaXZpZHVhbCBlbmdpbmVzLgo+IC0JICovCj4gLQlpZiAoIShncHUtPmlk
ZW50aXR5LmZlYXR1cmVzICYgY2hpcEZlYXR1cmVzX1BJUEVfM0QpIHx8Cj4gLQkgICAgKGdwdS0+
aWRlbnRpdHkubWlub3JfZmVhdHVyZXMwICYgY2hpcE1pbm9yRmVhdHVyZXMwX01DMjApKSB7Cj4g
LQkJdTMyIGRtYV9tYXNrID0gKHUzMilkbWFfZ2V0X3JlcXVpcmVkX21hc2soZ3B1LT5kZXYpOwo+
IC0JCWlmIChkbWFfbWFzayA8IFBIWVNfT0ZGU0VUICsgU1pfMkcpCj4gLQkJCWdwdS0+bWVtb3J5
X2Jhc2UgPSBQSFlTX09GRlNFVDsKPiAtCQllbHNlCj4gLQkJCWdwdS0+bWVtb3J5X2Jhc2UgPSBk
bWFfbWFzayAtIFNaXzJHICsgMTsKPiAtCX0gZWxzZSBpZiAoUEhZU19PRkZTRVQgPj0gU1pfMkcp
IHsKPiAtCQlkZXZfaW5mbyhncHUtPmRldiwgIk5lZWQgdG8gbW92ZSBsaW5lYXIgd2luZG93IG9u
IE1DMS4wLCBkaXNhYmxpbmcgVFNcbiIpOwo+IC0JCWdwdS0+bWVtb3J5X2Jhc2UgPSBQSFlTX09G
RlNFVDsKPiAtCQlncHUtPmlkZW50aXR5LmZlYXR1cmVzICY9IH5jaGlwRmVhdHVyZXNfRkFTVF9D
TEVBUjsKPiAtCX0KPiAtCj4gIAkvKgo+ICAJICogT24gY29yZXMgd2l0aCBzZWN1cml0eSBmZWF0
dXJlcyBzdXBwb3J0ZWQsIHdlIGNsYWltIGNvbnRyb2wgb3ZlciB0aGUKPiAgCSAqIHNlY3VyaXR5
IHN0YXRlcy4KPiBAQCAtNzY0LDIwICs3NDEsMjYgQEAgaW50IGV0bmF2aXZfZ3B1X2luaXQoc3Ry
dWN0IGV0bmF2aXZfZ3B1ICpncHUpCj4gIAlpZiAocmV0KQo+ICAJCWdvdG8gZmFpbDsKPiAgCj4g
LQlncHUtPm1tdV9jb250ZXh0ID0gZXRuYXZpdl9pb21tdV9jb250ZXh0X2luaXQocHJpdi0+bW11
X2dsb2JhbCk7Cj4gLQlpZiAoSVNfRVJSKGdwdS0+bW11X2NvbnRleHQpKSB7Cj4gLQkJZGV2X2Vy
cihncHUtPmRldiwgIkZhaWxlZCB0byBpbnN0YW50aWF0ZSBHUFUgSU9NTVVcbiIpOwo+IC0JCXJl
dCA9IFBUUl9FUlIoZ3B1LT5tbXVfY29udGV4dCk7Cj4gLQkJZ290byBpb21tdV9nbG9iYWxfZmlu
aTsKPiAtCX0KPiAtCj4gLQlyZXQgPSBldG5hdml2X2NtZGJ1Zl9zdWJhbGxvY19tYXAocHJpdi0+
Y21kYnVmX3N1YmFsbG9jLAo+IC0JCQkJCSAgZ3B1LT5tbXVfY29udGV4dCwKPiAtCQkJCQkgICZn
cHUtPmNtZGJ1Zl9tYXBwaW5nLAo+IC0JCQkJCSAgZ3B1LT5tZW1vcnlfYmFzZSk7Cj4gLQlpZiAo
cmV0KSB7Cj4gLQkJZGV2X2VycihncHUtPmRldiwgImZhaWxlZCB0byBtYXAgY21kYnVmIHN1YmFs
bG9jXG4iKTsKPiAtCQlnb3RvIGRlc3Ryb3lfaW9tbXU7Cj4gKwkvKgo+ICsJICogU2V0IHRoZSBH
UFUgbGluZWFyIHdpbmRvdyB0byBiZSBhdCB0aGUgZW5kIG9mIHRoZSBETUEgd2luZG93LCB3aGVy
ZQo+ICsJICogdGhlIENNQSBhcmVhIGlzIGxpa2VseSB0byByZXNpZGUuIFRoaXMgZW5zdXJlcyB0
aGF0IHdlIGFyZSBhYmxlIHRvCj4gKwkgKiBtYXAgdGhlIGNvbW1hbmQgYnVmZmVycyB3aGlsZSBo
YXZpbmcgdGhlIGxpbmVhciB3aW5kb3cgb3ZlcmxhcCBhcwo+ICsJICogbXVjaCBSQU0gYXMgcG9z
c2libGUsIHNvIHdlIGNhbiBvcHRpbWl6ZSBtYXBwaW5ncyBmb3Igb3RoZXIgYnVmZmVycy4KPiAr
CSAqCj4gKwkgKiBGb3IgM0QgY29yZXMgb25seSBkbyB0aGlzIGlmIE1DMi4wIGlzIHByZXNlbnQs
IGFzIHdpdGggTUMxLjAgaXQgbGVhZHMKPiArCSAqIHRvIGRpZmZlcmVudCB2aWV3cyBvZiB0aGUg
bWVtb3J5IG9uIHRoZSBpbmRpdmlkdWFsIGVuZ2luZXMuCj4gKwkgKi8KPiArCWlmICghKGdwdS0+
aWRlbnRpdHkuZmVhdHVyZXMgJiBjaGlwRmVhdHVyZXNfUElQRV8zRCkgfHwKPiArCSAgICAoZ3B1
LT5pZGVudGl0eS5taW5vcl9mZWF0dXJlczAgJiBjaGlwTWlub3JGZWF0dXJlczBfTUMyMCkpIHsK
PiArCQl1MzIgZG1hX21hc2sgPSAodTMyKWRtYV9nZXRfcmVxdWlyZWRfbWFzayhncHUtPmRldik7
Cj4gKwkJaWYgKGRtYV9tYXNrIDwgUEhZU19PRkZTRVQgKyBTWl8yRykKPiArCQkJcHJpdi0+bW11
X2dsb2JhbC0+bWVtb3J5X2Jhc2UgPSBQSFlTX09GRlNFVDsKPiArCQllbHNlCj4gKwkJCXByaXYt
Pm1tdV9nbG9iYWwtPm1lbW9yeV9iYXNlID0gZG1hX21hc2sgLSBTWl8yRyArIDE7Cj4gKwl9IGVs
c2UgaWYgKFBIWVNfT0ZGU0VUID49IFNaXzJHKSB7Cj4gKwkJZGV2X2luZm8oZ3B1LT5kZXYsICJO
ZWVkIHRvIG1vdmUgbGluZWFyIHdpbmRvdyBvbiBNQzEuMCwgZGlzYWJsaW5nIFRTXG4iKTsKPiAr
CQlwcml2LT5tbXVfZ2xvYmFsLT5tZW1vcnlfYmFzZSA9IFBIWVNfT0ZGU0VUOwo+ICsJCWdwdS0+
aWRlbnRpdHkuZmVhdHVyZXMgJj0gfmNoaXBGZWF0dXJlc19GQVNUX0NMRUFSOwo+ICAJfQo+ICAK
PiAgCS8qIENyZWF0ZSBidWZmZXI6ICovCj4gQEAgLTc4NSwxNSArNzY4LDcgQEAgaW50IGV0bmF2
aXZfZ3B1X2luaXQoc3RydWN0IGV0bmF2aXZfZ3B1ICpncHUpCj4gIAkJCQkgIFBBR0VfU0laRSk7
Cj4gIAlpZiAocmV0KSB7Cj4gIAkJZGV2X2VycihncHUtPmRldiwgImNvdWxkIG5vdCBjcmVhdGUg
Y29tbWFuZCBidWZmZXJcbiIpOwo+IC0JCWdvdG8gdW5tYXBfc3ViYWxsb2M7Cj4gLQl9Cj4gLQo+
IC0JaWYgKCEoZ3B1LT5pZGVudGl0eS5taW5vcl9mZWF0dXJlczEgJiBjaGlwTWlub3JGZWF0dXJl
czFfTU1VX1ZFUlNJT04pICYmCj4gLQkgICAgZXRuYXZpdl9jbWRidWZfZ2V0X3ZhKCZncHUtPmJ1
ZmZlciwgJmdwdS0+Y21kYnVmX21hcHBpbmcpID4gMHg4MDAwMDAwMCkgewo+IC0JCXJldCA9IC1F
SU5WQUw7Cj4gLQkJZGV2X2VycihncHUtPmRldiwKPiAtCQkJImNvbW1hbmQgYnVmZmVyIG91dHNp
ZGUgdmFsaWQgbWVtb3J5IHdpbmRvd1xuIik7Cj4gLQkJZ290byBmcmVlX2J1ZmZlcjsKPiArCQln
b3RvIGZhaWw7Cj4gIAl9Cj4gIAo+ICAJLyogU2V0dXAgZXZlbnQgbWFuYWdlbWVudCAqLwo+IEBA
IC04MTYsMTQgKzc5MSw2IEBAIGludCBldG5hdml2X2dwdV9pbml0KHN0cnVjdCBldG5hdml2X2dw
dSAqZ3B1KQo+ICAKPiAgCXJldHVybiAwOwo+ICAKPiAtZnJlZV9idWZmZXI6Cj4gLQlldG5hdml2
X2NtZGJ1Zl9mcmVlKCZncHUtPmJ1ZmZlcik7Cj4gLXVubWFwX3N1YmFsbG9jOgo+IC0JZXRuYXZp
dl9jbWRidWZfc3ViYWxsb2NfdW5tYXAoZ3B1LT5tbXVfY29udGV4dCwgJmdwdS0+Y21kYnVmX21h
cHBpbmcpOwo+IC1kZXN0cm95X2lvbW11Ogo+IC0JZXRuYXZpdl9pb21tdV9jb250ZXh0X3B1dChn
cHUtPm1tdV9jb250ZXh0KTsKPiAtaW9tbXVfZ2xvYmFsX2Zpbmk6Cj4gLQlldG5hdml2X2lvbW11
X2dsb2JhbF9maW5pKGdwdSk7Cj4gIGZhaWw6Cj4gIAlwbV9ydW50aW1lX21hcmtfbGFzdF9idXN5
KGdwdS0+ZGV2KTsKPiAgCXBtX3J1bnRpbWVfcHV0X2F1dG9zdXNwZW5kKGdwdS0+ZGV2KTsKPiBA
QCAtMTAxNyw2ICs5ODQsNyBAQCB2b2lkIGV0bmF2aXZfZ3B1X3JlY292ZXJfaGFuZyhzdHJ1Y3Qg
ZXRuYXZpdl9ncHUgKmdwdSkKPiAgCj4gIAlldG5hdml2X2dwdV9od19pbml0KGdwdSk7Cj4gIAln
cHUtPmV4ZWNfc3RhdGUgPSAtMTsKPiArCWdwdS0+bW11X2NvbnRleHQgPSBOVUxMOwo+ICAKPiAg
CW11dGV4X3VubG9jaygmZ3B1LT5sb2NrKTsKPiAgCXBtX3J1bnRpbWVfbWFya19sYXN0X2J1c3ko
Z3B1LT5kZXYpOwo+IEBAIC0xMzIzLDYgKzEyOTEsMTUgQEAgc3RydWN0IGRtYV9mZW5jZSAqZXRu
YXZpdl9ncHVfc3VibWl0KHN0cnVjdCBldG5hdml2X2dlbV9zdWJtaXQgKnN1Ym1pdCkKPiAgCQln
b3RvIG91dF91bmxvY2s7Cj4gIAl9Cj4gIAo+ICsJaWYgKCFncHUtPm1tdV9jb250ZXh0KSB7Cj4g
KwkJZXRuYXZpdl9pb21tdV9jb250ZXh0X2dldChzdWJtaXQtPm1tdV9jb250ZXh0KTsKPiArCQln
cHUtPm1tdV9jb250ZXh0ID0gc3VibWl0LT5tbXVfY29udGV4dDsKPiArCQlldG5hdml2X2dwdV9z
dGFydF9mZV9pZGxlbG9vcChncHUpOwo+ICsJfSBlbHNlIHsKPiArCQlldG5hdml2X2lvbW11X2Nv
bnRleHRfZ2V0KGdwdS0+bW11X2NvbnRleHQpOwo+ICsJCXN1Ym1pdC0+cHJldl9tbXVfY29udGV4
dCA9IGdwdS0+bW11X2NvbnRleHQ7Cj4gKwl9Cj4gKwo+ICAJaWYgKHN1Ym1pdC0+bnJfcG1ycykg
ewo+ICAJCWdwdS0+ZXZlbnRbZXZlbnRbMV1dLnN5bmNfcG9pbnQgPSAmc3luY19wb2ludF9wZXJm
bW9uX3NhbXBsZV9wcmU7Cj4gIAkJa3JlZl9nZXQoJnN1Ym1pdC0+cmVmY291bnQpOwo+IEBAIC0x
MzMyLDggKzEzMDksOCBAQCBzdHJ1Y3QgZG1hX2ZlbmNlICpldG5hdml2X2dwdV9zdWJtaXQoc3Ry
dWN0IGV0bmF2aXZfZ2VtX3N1Ym1pdCAqc3VibWl0KQo+ICAKPiAgCWdwdS0+ZXZlbnRbZXZlbnRb
MF1dLmZlbmNlID0gZ3B1X2ZlbmNlOwo+ICAJc3VibWl0LT5jbWRidWYudXNlcl9zaXplID0gc3Vi
bWl0LT5jbWRidWYuc2l6ZSAtIDg7Cj4gLQlldG5hdml2X2J1ZmZlcl9xdWV1ZShncHUsIHN1Ym1p
dC0+ZXhlY19zdGF0ZSwgZXZlbnRbMF0sCj4gLQkJCSAgICAgJnN1Ym1pdC0+Y21kYnVmKTsKPiAr
CWV0bmF2aXZfYnVmZmVyX3F1ZXVlKGdwdSwgc3VibWl0LT5leGVjX3N0YXRlLCBzdWJtaXQtPm1t
dV9jb250ZXh0LAo+ICsJCQkgICAgIGV2ZW50WzBdLCAmc3VibWl0LT5jbWRidWYpOwo+ICAKPiAg
CWlmIChzdWJtaXQtPm5yX3BtcnMpIHsKPiAgCQlncHUtPmV2ZW50W2V2ZW50WzJdXS5zeW5jX3Bv
aW50ID0gJnN5bmNfcG9pbnRfcGVyZm1vbl9zYW1wbGVfcG9zdDsKPiBAQCAtMTUzNSw3ICsxNTEy
LDcgQEAgaW50IGV0bmF2aXZfZ3B1X3dhaXRfaWRsZShzdHJ1Y3QgZXRuYXZpdl9ncHUgKmdwdSwg
dW5zaWduZWQgaW50IHRpbWVvdXRfbXMpCj4gIAo+ICBzdGF0aWMgaW50IGV0bmF2aXZfZ3B1X2h3
X3N1c3BlbmQoc3RydWN0IGV0bmF2aXZfZ3B1ICpncHUpCj4gIHsKPiAtCWlmIChncHUtPmluaXRp
YWxpemVkKSB7Cj4gKwlpZiAoZ3B1LT5pbml0aWFsaXplZCAmJiBncHUtPm1tdV9jb250ZXh0KSB7
Cj4gIAkJLyogUmVwbGFjZSB0aGUgbGFzdCBXQUlUIHdpdGggRU5EICovCj4gIAkJbXV0ZXhfbG9j
aygmZ3B1LT5sb2NrKTsKPiAgCQlldG5hdml2X2J1ZmZlcl9lbmQoZ3B1KTsKPiBAQCAtMTU0Nyw4
ICsxNTI0LDEzIEBAIHN0YXRpYyBpbnQgZXRuYXZpdl9ncHVfaHdfc3VzcGVuZChzdHJ1Y3QgZXRu
YXZpdl9ncHUgKmdwdSkKPiAgCQkgKiB3ZSBmYWlsLCBqdXN0IHdhcm4gYW5kIGNvbnRpbnVlLgo+
ICAJCSAqLwo+ICAJCWV0bmF2aXZfZ3B1X3dhaXRfaWRsZShncHUsIDEwMCk7Cj4gKwo+ICsJCWV0
bmF2aXZfaW9tbXVfY29udGV4dF9wdXQoZ3B1LT5tbXVfY29udGV4dCk7Cj4gKwkJZ3B1LT5tbXVf
Y29udGV4dCA9IE5VTEw7Cj4gIAl9Cj4gIAo+ICsJZ3B1LT5leGVjX3N0YXRlID0gLTE7Cj4gKwo+
ICAJcmV0dXJuIGV0bmF2aXZfZ3B1X2Nsa19kaXNhYmxlKGdwdSk7Cj4gIH0KPiAgCj4gQEAgLTE1
NjQsOCArMTU0Niw2IEBAIHN0YXRpYyBpbnQgZXRuYXZpdl9ncHVfaHdfcmVzdW1lKHN0cnVjdCBl
dG5hdml2X2dwdSAqZ3B1KQo+ICAJZXRuYXZpdl9ncHVfdXBkYXRlX2Nsb2NrKGdwdSk7Cj4gIAll
dG5hdml2X2dwdV9od19pbml0KGdwdSk7Cj4gIAo+IC0JZ3B1LT5leGVjX3N0YXRlID0gLTE7Cj4g
LQo+ICAJbXV0ZXhfdW5sb2NrKCZncHUtPmxvY2spOwo+ICAKPiAgCXJldHVybiAwOwo+IEBAIC0x
Njk2LDkgKzE2NzYsNiBAQCBzdGF0aWMgdm9pZCBldG5hdml2X2dwdV91bmJpbmQoc3RydWN0IGRl
dmljZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlICptYXN0ZXIsCj4gIAo+ICAJaWYgKGdwdS0+aW5pdGlh
bGl6ZWQpIHsKPiAgCQlldG5hdml2X2NtZGJ1Zl9mcmVlKCZncHUtPmJ1ZmZlcik7Cj4gLQkJZXRu
YXZpdl9jbWRidWZfc3ViYWxsb2NfdW5tYXAoZ3B1LT5tbXVfY29udGV4dCwKPiAtCQkJCQkgICAg
ICAmZ3B1LT5jbWRidWZfbWFwcGluZyk7Cj4gLQkJZXRuYXZpdl9pb21tdV9jb250ZXh0X3B1dChn
cHUtPm1tdV9jb250ZXh0KTsKPiAgCQlldG5hdml2X2lvbW11X2dsb2JhbF9maW5pKGdwdSk7Cj4g
IAkJZ3B1LT5pbml0aWFsaXplZCA9IGZhbHNlOwo+ICAJfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dwdS5oIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYv
ZXRuYXZpdl9ncHUuaAo+IGluZGV4IGMwYmQ2MDE4ZDUzYi4uOGY5YmQ0ZWRjOTZhIDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ3B1LmgKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dwdS5oCj4gQEAgLTEwMywxMyArMTAzLDkgQEAg
c3RydWN0IGV0bmF2aXZfZ3B1IHsKPiAgCWJvb2wgaW5pdGlhbGl6ZWQ7Cj4gIAo+ICAJLyogJ3Jp
bmcnLWJ1ZmZlcjogKi8KPiAtCXN0cnVjdCBldG5hdml2X3ZyYW1fbWFwcGluZyBjbWRidWZfbWFw
cGluZzsKPiAgCXN0cnVjdCBldG5hdml2X2NtZGJ1ZiBidWZmZXI7Cj4gIAlpbnQgZXhlY19zdGF0
ZTsKPiAgCj4gLQkvKiBidXMgYmFzZSBhZGRyZXNzIG9mIG1lbW9yeSAgKi8KPiAtCXUzMiBtZW1v
cnlfYmFzZTsKPiAtCj4gIAkvKiBldmVudCBtYW5hZ2VtZW50OiAqLwo+ICAJREVDTEFSRV9CSVRN
QVAoZXZlbnRfYml0bWFwLCBFVE5BX05SX0VWRU5UUyk7Cj4gIAlzdHJ1Y3QgZXRuYXZpdl9ldmVu
dCBldmVudFtFVE5BX05SX0VWRU5UU107Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9l
dG5hdml2L2V0bmF2aXZfaW9tbXUuYyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZf
aW9tbXUuYwo+IGluZGV4IGEyZjFmZjE1MTgyMi4uYWFjOGRiZjNlYTU2IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfaW9tbXUuYwo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9ldG5hdml2L2V0bmF2aXZfaW9tbXUuYwo+IEBAIC05MywxMSArOTMsMTEgQEAgc3Rh
dGljIHZvaWQgZXRuYXZpdl9pb21tdXYxX3Jlc3RvcmUoc3RydWN0IGV0bmF2aXZfZ3B1ICpncHUs
Cj4gIAl1MzIgcGd0YWJsZTsKPiAgCj4gIAkvKiBzZXQgYmFzZSBhZGRyZXNzZXMgKi8KPiAtCWdw
dV93cml0ZShncHUsIFZJVlNfTUNfTUVNT1JZX0JBU0VfQUREUl9SQSwgZ3B1LT5tZW1vcnlfYmFz
ZSk7Cj4gLQlncHVfd3JpdGUoZ3B1LCBWSVZTX01DX01FTU9SWV9CQVNFX0FERFJfRkUsIGdwdS0+
bWVtb3J5X2Jhc2UpOwo+IC0JZ3B1X3dyaXRlKGdwdSwgVklWU19NQ19NRU1PUllfQkFTRV9BRERS
X1RYLCBncHUtPm1lbW9yeV9iYXNlKTsKPiAtCWdwdV93cml0ZShncHUsIFZJVlNfTUNfTUVNT1JZ
X0JBU0VfQUREUl9QRVosIGdwdS0+bWVtb3J5X2Jhc2UpOwo+IC0JZ3B1X3dyaXRlKGdwdSwgVklW
U19NQ19NRU1PUllfQkFTRV9BRERSX1BFLCBncHUtPm1lbW9yeV9iYXNlKTsKPiArCWdwdV93cml0
ZShncHUsIFZJVlNfTUNfTUVNT1JZX0JBU0VfQUREUl9SQSwgY29udGV4dC0+Z2xvYmFsLT5tZW1v
cnlfYmFzZSk7Cj4gKwlncHVfd3JpdGUoZ3B1LCBWSVZTX01DX01FTU9SWV9CQVNFX0FERFJfRkUs
IGNvbnRleHQtPmdsb2JhbC0+bWVtb3J5X2Jhc2UpOwo+ICsJZ3B1X3dyaXRlKGdwdSwgVklWU19N
Q19NRU1PUllfQkFTRV9BRERSX1RYLCBjb250ZXh0LT5nbG9iYWwtPm1lbW9yeV9iYXNlKTsKPiAr
CWdwdV93cml0ZShncHUsIFZJVlNfTUNfTUVNT1JZX0JBU0VfQUREUl9QRVosIGNvbnRleHQtPmds
b2JhbC0+bWVtb3J5X2Jhc2UpOwo+ICsJZ3B1X3dyaXRlKGdwdSwgVklWU19NQ19NRU1PUllfQkFT
RV9BRERSX1BFLCBjb250ZXh0LT5nbG9iYWwtPm1lbW9yeV9iYXNlKTsKPiAgCj4gIAkvKiBzZXQg
cGFnZSB0YWJsZSBhZGRyZXNzIGluIE1DICovCj4gIAlwZ3RhYmxlID0gKHUzMil2MV9jb250ZXh0
LT5wZ3RhYmxlX2RtYTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRu
YXZpdl9pb21tdV92Mi5jIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9pb21tdV92
Mi5jCj4gaW5kZXggNWNhMjA3N2MxNDhkLi4wNDMxMTFhMWQ2MGMgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9pb21tdV92Mi5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9pb21tdV92Mi5jCj4gQEAgLTIwNiw3ICsyMDYsNyBAQCBz
dGF0aWMgdm9pZCBldG5hdml2X2lvbW11djJfcmVzdG9yZV9zZWMoc3RydWN0IGV0bmF2aXZfZ3B1
ICpncHUsCj4gIAkJICBWSVZTX01NVXYyX1NBRkVfQUREUkVTU19DT05GSUdfU0VDX1NBRkVfQURE
Ul9ISUdIKAo+ICAJCSAgdXBwZXJfMzJfYml0cyhjb250ZXh0LT5nbG9iYWwtPmJhZF9wYWdlX2Rt
YSkpKTsKPiAgCj4gLQljb250ZXh0LT5nbG9iYWwtPnYyLnB0YV9jcHVbMF0gPSB2Ml9jb250ZXh0
LT5tdGxiX2RtYSB8Cj4gKwljb250ZXh0LT5nbG9iYWwtPnYyLnB0YV9jcHVbdjJfY29udGV4dC0+
aWRdID0gdjJfY29udGV4dC0+bXRsYl9kbWEgfAo+ICAJCQkJIAkgVklWU19NTVV2Ml9DT05GSUdV
UkFUSU9OX01PREVfTU9ERTRfSzsKPiAgCj4gIAkvKiB0cmlnZ2VyIGEgUFRBIGxvYWQgdGhyb3Vn
aCB0aGUgRkUgKi8KPiBAQCAtMjE4LDYgKzIxOCwxOSBAQCBzdGF0aWMgdm9pZCBldG5hdml2X2lv
bW11djJfcmVzdG9yZV9zZWMoc3RydWN0IGV0bmF2aXZfZ3B1ICpncHUsCj4gIAlncHVfd3JpdGUo
Z3B1LCBWSVZTX01NVXYyX1NFQ19DT05UUk9MLCBWSVZTX01NVXYyX1NFQ19DT05UUk9MX0VOQUJM
RSk7Cj4gIH0KPiAgCj4gK3UzMiBldG5hdml2X2lvbW11djJfZ2V0X210bGJfYWRkcihzdHJ1Y3Qg
ZXRuYXZpdl9pb21tdV9jb250ZXh0ICpjb250ZXh0KQo+ICt7Cj4gKwlzdHJ1Y3QgZXRuYXZpdl9p
b21tdXYyX2NvbnRleHQgKnYyX2NvbnRleHQgPSB0b192Ml9jb250ZXh0KGNvbnRleHQpOwo+ICsK
PiArCXJldHVybiB2Ml9jb250ZXh0LT5tdGxiX2RtYTsKPiArfQo+ICsKPiArdW5zaWduZWQgc2hv
cnQgZXRuYXZpdl9pb21tdXYyX2dldF9wdGFfaWQoc3RydWN0IGV0bmF2aXZfaW9tbXVfY29udGV4
dCAqY29udGV4dCkKPiArewo+ICsJc3RydWN0IGV0bmF2aXZfaW9tbXV2Ml9jb250ZXh0ICp2Ml9j
b250ZXh0ID0gdG9fdjJfY29udGV4dChjb250ZXh0KTsKPiArCj4gKwlyZXR1cm4gdjJfY29udGV4
dC0+aWQ7Cj4gK30KPiAgc3RhdGljIHZvaWQgZXRuYXZpdl9pb21tdXYyX3Jlc3RvcmUoc3RydWN0
IGV0bmF2aXZfZ3B1ICpncHUsCj4gIAkJCQkgICAgc3RydWN0IGV0bmF2aXZfaW9tbXVfY29udGV4
dCAqY29udGV4dCkKPiAgewo+IEBAIC0yNzIsNiArMjg1LDggQEAgZXRuYXZpdl9pb21tdXYyX2Nv
bnRleHRfYWxsb2Moc3RydWN0IGV0bmF2aXZfaW9tbXVfZ2xvYmFsICpnbG9iYWwpCj4gIAltZW1z
ZXQzMih2Ml9jb250ZXh0LT5tdGxiX2NwdSwgTU1VdjJfUFRFX0VYQ0VQVElPTiwKPiAgCQkgTU1V
djJfTUFYX1NUTEJfRU5UUklFUyk7Cj4gIAo+ICsJZ2xvYmFsLT52Mi5wdGFfY3B1W3YyX2NvbnRl
eHQtPmlkXSA9IHYyX2NvbnRleHQtPm10bGJfZG1hOwo+ICsKPiAgCWNvbnRleHQgPSAmdjJfY29u
dGV4dC0+YmFzZTsKPiAgCWNvbnRleHQtPmdsb2JhbCA9IGdsb2JhbDsKPiAgCWtyZWZfaW5pdCgm
Y29udGV4dC0+cmVmY291bnQpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZp
di9ldG5hdml2X21tdS5jIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9tbXUuYwo+
IGluZGV4IDJmNjRlZWY3NzNlZC4uODI4MjJlMzBiZjMwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9ldG5hdml2L2V0bmF2aXZfbW11LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vZXRu
YXZpdi9ldG5hdml2X21tdS5jCj4gQEAgLTI5MCw2ICsyOTAsOCBAQCBzdGF0aWMgdm9pZCBldG5h
dml2X2lvbW11X2NvbnRleHRfZnJlZShzdHJ1Y3Qga3JlZiAqa3JlZikKPiAgCXN0cnVjdCBldG5h
dml2X2lvbW11X2NvbnRleHQgKmNvbnRleHQgPQo+ICAJCWNvbnRhaW5lcl9vZihrcmVmLCBzdHJ1
Y3QgZXRuYXZpdl9pb21tdV9jb250ZXh0LCByZWZjb3VudCk7Cj4gIAo+ICsJZXRuYXZpdl9jbWRi
dWZfc3ViYWxsb2NfdW5tYXAoY29udGV4dCwgJmNvbnRleHQtPmNtZGJ1Zl9tYXBwaW5nKTsKPiAr
Cj4gIAljb250ZXh0LT5nbG9iYWwtPm9wcy0+ZnJlZShjb250ZXh0KTsKPiAgfQo+ICB2b2lkIGV0
bmF2aXZfaW9tbXVfY29udGV4dF9wdXQoc3RydWN0IGV0bmF2aXZfaW9tbXVfY29udGV4dCAqY29u
dGV4dCkKPiBAQCAtMjk4LDEyICszMDAsMjggQEAgdm9pZCBldG5hdml2X2lvbW11X2NvbnRleHRf
cHV0KHN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQgKmNvbnRleHQpCj4gIH0KPiAgCj4gIHN0
cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQgKgo+IC1ldG5hdml2X2lvbW11X2NvbnRleHRfaW5p
dChzdHJ1Y3QgZXRuYXZpdl9pb21tdV9nbG9iYWwgKmdsb2JhbCkKPiArZXRuYXZpdl9pb21tdV9j
b250ZXh0X2luaXQoc3RydWN0IGV0bmF2aXZfaW9tbXVfZ2xvYmFsICpnbG9iYWwsCj4gKwkJCSAg
IHN0cnVjdCBldG5hdml2X2NtZGJ1Zl9zdWJhbGxvYyAqc3ViYWxsb2MpCj4gIHsKPiArCXN0cnVj
dCBldG5hdml2X2lvbW11X2NvbnRleHQgKmN0eDsKPiArCWludCByZXQ7Cj4gKwo+ICAJaWYgKGds
b2JhbC0+dmVyc2lvbiA9PSBFVE5BVklWX0lPTU1VX1YxKQo+IC0JCXJldHVybiBldG5hdml2X2lv
bW11djFfY29udGV4dF9hbGxvYyhnbG9iYWwpOwo+ICsJCWN0eCA9IGV0bmF2aXZfaW9tbXV2MV9j
b250ZXh0X2FsbG9jKGdsb2JhbCk7Cj4gIAllbHNlCj4gLQkJcmV0dXJuIGV0bmF2aXZfaW9tbXV2
Ml9jb250ZXh0X2FsbG9jKGdsb2JhbCk7Cj4gKwkJY3R4ID0gZXRuYXZpdl9pb21tdXYyX2NvbnRl
eHRfYWxsb2MoZ2xvYmFsKTsKPiArCj4gKwlpZiAoIWN0eCkKPiArCQlyZXR1cm4gTlVMTDsKPiAr
Cj4gKwlyZXQgPSBldG5hdml2X2NtZGJ1Zl9zdWJhbGxvY19tYXAoc3ViYWxsb2MsIGN0eCwgJmN0
eC0+Y21kYnVmX21hcHBpbmcsCj4gKwkJCQkJICBnbG9iYWwtPm1lbW9yeV9iYXNlKTsKPiArCWlm
IChyZXQpIHsKPiArCQlnbG9iYWwtPm9wcy0+ZnJlZShjdHgpOwo+ICsJCXJldHVybiBOVUxMOwo+
ICsJfQo+ICsKPiArCXJldHVybiBjdHg7Cj4gIH0KPiAgCj4gIHZvaWQgZXRuYXZpdl9pb21tdV9y
ZXN0b3JlKHN0cnVjdCBldG5hdml2X2dwdSAqZ3B1LAo+IEBAIC0zMTksNiArMzM3LDEyIEBAIGlu
dCBldG5hdml2X2lvbW11X2dldF9zdWJhbGxvY192YShzdHJ1Y3QgZXRuYXZpdl9pb21tdV9jb250
ZXh0ICpjb250ZXh0LAo+ICB7Cj4gIAltdXRleF9sb2NrKCZjb250ZXh0LT5sb2NrKTsKPiAgCj4g
KwlpZiAobWFwcGluZy0+dXNlID4gMCkgewo+ICsJCW1hcHBpbmctPnVzZSsrOwo+ICsJCW11dGV4
X3VubG9jaygmY29udGV4dC0+bG9jayk7Cj4gKwkJcmV0dXJuIDA7Cj4gKwl9Cj4gKwo+ICAJLyoK
PiAgCSAqIEZvciBNTVV2MSB3ZSBkb24ndCBhZGQgdGhlIHN1YmFsbG9jIHJlZ2lvbiB0byB0aGUg
cGFnZXRhYmxlcywgYXMKPiAgCSAqIHRob3NlIEdQVXMgY2FuIG9ubHkgd29yayB3aXRoIGNtZGJ1
ZnMgYWNjZXNzZWQgdGhyb3VnaCB0aGUgbGluZWFyCj4gQEAgLTM0MCw3ICszNjQsNiBAQCBpbnQg
ZXRuYXZpdl9pb21tdV9nZXRfc3ViYWxsb2NfdmEoc3RydWN0IGV0bmF2aXZfaW9tbXVfY29udGV4
dCAqY29udGV4dCwKPiAgCQltYXBwaW5nLT5pb3ZhID0gbm9kZS0+c3RhcnQ7Cj4gIAkJcmV0ID0g
ZXRuYXZpdl9jb250ZXh0X21hcChjb250ZXh0LCBub2RlLT5zdGFydCwgcGFkZHIsIHNpemUsCj4g
IAkJCQkJICBFVE5BVklWX1BST1RfUkVBRCk7Cj4gLQo+ICAJCWlmIChyZXQgPCAwKSB7Cj4gIAkJ
CWRybV9tbV9yZW1vdmVfbm9kZShub2RlKTsKPiAgCQkJbXV0ZXhfdW5sb2NrKCZjb250ZXh0LT5s
b2NrKTsKPiBAQCAtMzYzLDE1ICszODYsMTQgQEAgdm9pZCBldG5hdml2X2lvbW11X3B1dF9zdWJh
bGxvY192YShzdHJ1Y3QgZXRuYXZpdl9pb21tdV9jb250ZXh0ICpjb250ZXh0LAo+ICB7Cj4gIAlz
dHJ1Y3QgZHJtX21tX25vZGUgKm5vZGUgPSAmbWFwcGluZy0+dnJhbV9ub2RlOwo+ICAKPiAtCWlm
ICghbWFwcGluZy0+dXNlKQo+IC0JCXJldHVybjsKPiAtCj4gLQltYXBwaW5nLT51c2UgPSAwOwo+
ICsJbXV0ZXhfbG9jaygmY29udGV4dC0+bG9jayk7Cj4gKwltYXBwaW5nLT51c2UtLTsKPiAgCj4g
LQlpZiAoY29udGV4dC0+Z2xvYmFsLT52ZXJzaW9uID09IEVUTkFWSVZfSU9NTVVfVjEpCj4gKwlp
ZiAobWFwcGluZy0+dXNlID4gMCB8fCBjb250ZXh0LT5nbG9iYWwtPnZlcnNpb24gPT0gRVROQVZJ
Vl9JT01NVV9WMSkgewo+ICsJCW11dGV4X3VubG9jaygmY29udGV4dC0+bG9jayk7Cj4gIAkJcmV0
dXJuOwo+ICsJfQo+ICAKPiAtCW11dGV4X2xvY2soJmNvbnRleHQtPmxvY2spOwo+ICAJZXRuYXZp
dl9jb250ZXh0X3VubWFwKGNvbnRleHQsIG5vZGUtPnN0YXJ0LCBub2RlLT5zaXplKTsKPiAgCWRy
bV9tbV9yZW1vdmVfbm9kZShub2RlKTsKPiAgCW11dGV4X3VubG9jaygmY29udGV4dC0+bG9jayk7
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfbW11LmggYi9k
cml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X21tdS5oCj4gaW5kZXggNDQzOGQ2NmRiNmFi
Li5jMDE0OTFhNmM0ZDggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRu
YXZpdl9tbXUuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfbW11LmgK
PiBAQCAtNDcsNiArNDcsOCBAQCBzdHJ1Y3QgZXRuYXZpdl9pb21tdV9nbG9iYWwgewo+ICAJdm9p
ZCAqYmFkX3BhZ2VfY3B1Owo+ICAJZG1hX2FkZHJfdCBiYWRfcGFnZV9kbWE7Cj4gIAo+ICsJdTMy
IG1lbW9yeV9iYXNlOwo+ICsKPiAgCS8qCj4gIAkgKiBUaGlzIHVuaW9uIGhvbGRzIG1lbWJlcnMg
bmVlZGVkIGJ5IGVpdGhlciBNTVV2MSBvciBNTVV2Miwgd2hpY2gKPiAgCSAqIGNhbiBub3QgZXhp
c3QgYXQgdGhlIHNhbWUgdGltZS4KPiBAQCAtNzQsNiArNzYsOSBAQCBzdHJ1Y3QgZXRuYXZpdl9p
b21tdV9jb250ZXh0IHsKPiAgCXN0cnVjdCBsaXN0X2hlYWQgbWFwcGluZ3M7Cj4gIAlzdHJ1Y3Qg
ZHJtX21tIG1tOwo+ICAJdW5zaWduZWQgaW50IGZsdXNoX3NlcTsKPiArCj4gKwkvKiBOb3QgcGFy
dCBvZiB0aGUgY29udGV4dCwgYnV0IG5lZWRzIHRvIGhhdmUgdGhlIHNhbWUgbGlmZXRpbWUgKi8K
PiArCXN0cnVjdCBldG5hdml2X3ZyYW1fbWFwcGluZyBjbWRidWZfbWFwcGluZzsKPiAgfTsKPiAg
Cj4gIGludCBldG5hdml2X2lvbW11X2dsb2JhbF9pbml0KHN0cnVjdCBldG5hdml2X2dwdSAqZ3B1
KTsKPiBAQCAtOTgsNyArMTAzLDggQEAgc2l6ZV90IGV0bmF2aXZfaW9tbXVfZHVtcF9zaXplKHN0
cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQgKmN0eCk7Cj4gIHZvaWQgZXRuYXZpdl9pb21tdV9k
dW1wKHN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQgKmN0eCwgdm9pZCAqYnVmKTsKPiAgCj4g
IHN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQgKgo+IC1ldG5hdml2X2lvbW11X2NvbnRleHRf
aW5pdChzdHJ1Y3QgZXRuYXZpdl9pb21tdV9nbG9iYWwgKmdsb2JhbCk7Cj4gK2V0bmF2aXZfaW9t
bXVfY29udGV4dF9pbml0KHN0cnVjdCBldG5hdml2X2lvbW11X2dsb2JhbCAqZ2xvYmFsLAo+ICsJ
CQkgICBzdHJ1Y3QgZXRuYXZpdl9jbWRidWZfc3ViYWxsb2MgKnN1YmFsbG9jKTsKPiAgc3RhdGlj
IGlubGluZSB2b2lkIGV0bmF2aXZfaW9tbXVfY29udGV4dF9nZXQoc3RydWN0IGV0bmF2aXZfaW9t
bXVfY29udGV4dCAqY3R4KQo+ICB7Cj4gIAlrcmVmX2dldCgmY3R4LT5yZWZjb3VudCk7Cj4gQEAg
LTExMiw0ICsxMTgsNyBAQCBldG5hdml2X2lvbW11djFfY29udGV4dF9hbGxvYyhzdHJ1Y3QgZXRu
YXZpdl9pb21tdV9nbG9iYWwgKmdsb2JhbCk7Cj4gIHN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRl
eHQgKgo+ICBldG5hdml2X2lvbW11djJfY29udGV4dF9hbGxvYyhzdHJ1Y3QgZXRuYXZpdl9pb21t
dV9nbG9iYWwgKmdsb2JhbCk7Cj4gIAo+ICt1MzIgZXRuYXZpdl9pb21tdXYyX2dldF9tdGxiX2Fk
ZHIoc3RydWN0IGV0bmF2aXZfaW9tbXVfY29udGV4dCAqY29udGV4dCk7Cj4gK3Vuc2lnbmVkIHNo
b3J0IGV0bmF2aXZfaW9tbXV2Ml9nZXRfcHRhX2lkKHN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRl
eHQgKmNvbnRleHQpOwo+ICsKPiAgI2VuZGlmIC8qIF9fRVROQVZJVl9NTVVfSF9fICovCj4gLS0g
Cj4gMi4yMC4xCj4gCj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KPiBldG5hdml2IG1haWxpbmcgbGlzdAo+IGV0bmF2aXZAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9ldG5h
dml2Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1k
ZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
