Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D36BC2D199E
	for <lists+dri-devel@lfdr.de>; Mon,  7 Dec 2020 20:33:21 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 441AB6E8A8;
	Mon,  7 Dec 2020 19:33:17 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-oi1-x243.google.com (mail-oi1-x243.google.com
 [IPv6:2607:f8b0:4864:20::243])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A075F6E8A8
 for <dri-devel@lists.freedesktop.org>; Mon,  7 Dec 2020 19:33:15 +0000 (UTC)
Received: by mail-oi1-x243.google.com with SMTP id d27so9156352oic.0
 for <dri-devel@lists.freedesktop.org>; Mon, 07 Dec 2020 11:33:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=j3GOnt161GNn00Q3Y/GDhiYDOW7+hkApmJfbzXCPGjc=;
 b=IUHq2BxYq36igrYh/GZExdfO8Y4wvtJMllNzCrGoY2/lsJK/lAePdglUSinHwylBCB
 Z7ax/P05m49Hg8O9CCEDAehaddG/eXLvKomsuV7TO5GMUZpoOLnce37+/BM4SeoYeEgY
 kynLYF0ZHC0dZOatRUmvmtEfegpImYp+o3Gy0=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=j3GOnt161GNn00Q3Y/GDhiYDOW7+hkApmJfbzXCPGjc=;
 b=kdd7KB/VeLsvebGOtVoH3MdMSIKfV/pr0YolZXyDGtu7NLjzgUG4fSkoBxp6RE61Sk
 +stvc4LZL9qmNC04/sYqGiC113BfCDzZkQicDtQldaNSptMNXtw9tmHbS/qd0SSTVAfT
 t5JZ6oAbNkEIxRzWAKL5TYlIfps1nXIHwTK7kb3RvlxIEzqcL4OABSeHcHk9OdUSWxtz
 MAw7C/5oX9LnulksRDFMcRyy4lfz4a+74mnv/yWArMdnYRvFIU/rnlzen0AhgSmhjkB4
 vtK0ZJBtyMpy449jBjiW3quqDNzeoIpQDQ8qOoceanVrhpxppCZmqgz7CymN3WSKooRi
 XIwQ==
X-Gm-Message-State: AOAM5314bVbGfuJXzmXupdNHwQkoXKlzr+E+IGk1VyQ2ymGKPqmRj8z9
 LuK/fqcZZ79G6l1CJaPyDJpLa1CDJQOjI8RxKHS32MAUado=
X-Google-Smtp-Source: ABdhPJxm3Jei7hjwcAtvwxVuACXzAdjWJdrCKTiIo64wtEk5uJJAREIuuywtSYj5ai1eaK8A3NY/SOyNxGvzu3paBoA=
X-Received: by 2002:aca:4d08:: with SMTP id a8mr307818oib.128.1607369594183;
 Mon, 07 Dec 2020 11:33:14 -0800 (PST)
MIME-Version: 1.0
References: <20201207163300.183853-1-christian.koenig@amd.com>
In-Reply-To: <20201207163300.183853-1-christian.koenig@amd.com>
From: Daniel Vetter <daniel@ffwll.ch>
Date: Mon, 7 Dec 2020 20:33:02 +0100
Message-ID: <CAKMK7uGWJ2xc0u+=t6zXPYXcVf9vJis_+kk4Y5Bjz7FT9FPX_A@mail.gmail.com>
Subject: Re: [PATCH] drm/ttm: cleanup BO size handling
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <ckoenig.leichtzumerken@gmail.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Huang Rui <ray.huang@amd.com>, dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gTW9uLCBEZWMgNywgMjAyMCBhdCA1OjMzIFBNIENocmlzdGlhbiBLw7ZuaWcKPGNrb2VuaWcu
bGVpY2h0enVtZXJrZW5AZ21haWwuY29tPiB3cm90ZToKPgo+IEJhc2VkIG9uIGFuIGlkZWEgZnJv
bSBEYXZlLCBidXQgY2xlYW5lZCB1cCBhIGJpdC4KPgo+IFdlIGhhZCBtdWx0aXBsZSBmaWVsZHMg
Zm9yIGVzc2VudGlhbGx5IHRoZSBzYW1lIHRoaW5nLgo+Cj4gTm93IGJvLT5zaXplIGlzIHRoZSBv
cmlnaW5hbCBzaXplIG9mIHRoZSBCTyBpbiBhcmJpdHJhcnkKPiB1bml0cywgdXN1YWxseSBieXRl
cy4KPgo+IGJvLT5tZW0ubnVtX3BhZ2VzIGlzIHRoZSBzaXplIGluIG51bWJlciBvZiBwYWdlcyBp
biB0aGUKPiByZXNvdXJjZSBkb21haW4gb2YgYm8tPm1lbS5tZW1fdHlwZS4KPgo+IFNpZ25lZC1v
ZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KCldlIGFs
c28gaGF2ZSB0dG1fYm8uYmFzZS5zaXplLCBkbyB3ZSB3YW50IHRvIHJldXNlIHRoYXQgb25lIGxp
a2Ugd2UndmUKZG9uZSBmb3IgdGhlIHJlc2VydmF0aW9uIG9iamVjdD8gSSdkIGhhdmUgc2FpZCAi
Zm9sbG93IHVwIHBhdGNoIiBidXQKaXQncyBnb2luZyB0byBiZSBleGFjdGx5IHRoZSBzYW1lIGNo
dXJuIG9uY2UgbW9yZS4KLURhbmllbAoKPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2RtYV9idWYuYyAgIHwgIDIgKy0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2dtYy5jICAgICAgIHwgIDIgKy0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X29iamVjdC5jICAgIHwgIDIgKy0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X29iamVjdC5oICAgIHwgIDQgKy0tCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV90cmFjZS5oICAgICB8ICAyICstCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV90dG0uYyAgICAgICB8ICA2ICsrLS0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvbWVzX3YxMF8xLmMgICAgICAgIHwgIDIgKy0KPiAgZHJpdmVycy9ncHUvZHJtL25vdXZl
YXUvbm91dmVhdV9iby5jICAgICAgICAgIHwgMTAgKysrLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9u
b3V2ZWF1L25vdXZlYXVfZGlzcGxheS5jICAgICB8ICA4ICsrLS0tCj4gIGRyaXZlcnMvZ3B1L2Ry
bS9ub3V2ZWF1L25vdXZlYXVfcHJpbWUuYyAgICAgICB8ICA0ICstLQo+ICBkcml2ZXJzL2dwdS9k
cm0vbm91dmVhdS9udjE3X2ZlbmNlLmMgICAgICAgICAgfCAgMiArLQo+ICBkcml2ZXJzL2dwdS9k
cm0vbm91dmVhdS9udjUwX2ZlbmNlLmMgICAgICAgICAgfCAgMiArLQo+ICBkcml2ZXJzL2dwdS9k
cm0vcXhsL3F4bF9vYmplY3QuaCAgICAgICAgICAgICAgfCAgMiArLQo+ICBkcml2ZXJzL2dwdS9k
cm0vcmFkZW9uL3JhZGVvbl9jcy5jICAgICAgICAgICAgfCAgMyArLQo+ICBkcml2ZXJzL2dwdS9k
cm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuYyAgICAgICAgfCAxMyArKysrLS0tLQo+ICBkcml2ZXJz
L2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuaCAgICAgICAgfCAgNCArLS0KPiAgZHJpdmVy
cy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fcHJpbWUuYyAgICAgICAgIHwgIDQgKy0tCj4gIGRyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3RyYWNlLmggICAgICAgICB8ICAyICstCj4gIGRyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jICAgICAgICAgICB8ICAyICstCj4gIGRyaXZl
cnMvZ3B1L2RybS90dG0vdHRtX2JvLmMgICAgICAgICAgICAgICAgICB8IDMzICsrKysrKy0tLS0t
LS0tLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdXRpbC5jICAgICAgICAgICAg
IHwgMTEgKysrLS0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5jICAgICAgICAg
ICAgICAgfCAgNiArKy0tCj4gIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRtX3R0LmMgICAgICAgICAg
ICAgICAgICB8ICAyICstCj4gIGRyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2JsaXQuYyAg
ICAgICAgICB8ICA0ICstLQo+ICBkcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9iby5jICAg
ICAgICAgICAgfCAgNiArKy0tCj4gIGRyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2NvdGFi
bGUuYyAgICAgICB8ICAyICstCj4gIGRyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2V4ZWNi
dWYuYyAgICAgICB8ICA0ICstLQo+ICBkcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9nbXJp
ZF9tYW5hZ2VyLmMgfCAgNSArKy0KPiAgZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfa21z
LmMgICAgICAgICAgIHwgIDIgKy0KPiAgZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfcGFn
ZV9kaXJ0eS5jICAgIHwgIDggKystLS0KPiAgZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhf
cmVzb3VyY2UuYyAgICAgIHwgIDIgKy0KPiAgZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhf
c2hhZGVyLmMgICAgICAgIHwgIDMgKy0KPiAgZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhf
c3RkdS5jICAgICAgICAgIHwgIDQgKy0tCj4gIGRyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4
X3N1cmZhY2UuYyAgICAgICB8ICA3ICsrLS0KPiAgaW5jbHVkZS9kcm0vdHRtL3R0bV9ib19hcGku
aCAgICAgICAgICAgICAgICAgIHwgIDYgKystLQo+ICBpbmNsdWRlL2RybS90dG0vdHRtX3Jlc291
cmNlLmggICAgICAgICAgICAgICAgfCAgMSAtCj4gIDM2IGZpbGVzIGNoYW5nZWQsIDgyIGluc2Vy
dGlvbnMoKyksIDEwMCBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2RtYV9idWYuYwo+IGluZGV4IGU1OTE5ZWZjYTg3MC4uYzRjOTNmMTlkMjczIDEw
MDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmMK
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5jCj4gQEAg
LTI2OSw3ICsyNjksNyBAQCBzdGF0aWMgc3RydWN0IHNnX3RhYmxlICphbWRncHVfZG1hX2J1Zl9t
YXAoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNoLAo+ICAgICAgICAgY2FzZSBUVE1f
UExfVFQ6Cj4gICAgICAgICAgICAgICAgIHNndCA9IGRybV9wcmltZV9wYWdlc190b19zZyhvYmot
PmRldiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvLT50
Ym8udHRtLT5wYWdlcywKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGJvLT50Ym8ubnVtX3BhZ2VzKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGJvLT50Ym8udHRtLT5udW1fcGFnZXMpOwo+ICAgICAgICAgICAgICAgICBp
ZiAoSVNfRVJSKHNndCkpCj4gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNndDsKPgo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmMKPiBpbmRleCAwNTZjYjg3ZDA5
ZWEuLjUyYmNkMWI1NTgyZiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfZ21jLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
Z21jLmMKPiBAQCAtMTIxLDcgKzEyMSw3IEBAIHVpbnQ2NF90IGFtZGdwdV9nbWNfYWdwX2FkZHIo
c3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibykKPiAgewo+ICAgICAgICAgc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYgPSBhbWRncHVfdHRtX2FkZXYoYm8tPmJkZXYpOwo+Cj4gLSAgICAgICBp
ZiAoYm8tPm51bV9wYWdlcyAhPSAxIHx8IGJvLT50dG0tPmNhY2hpbmcgPT0gdHRtX2NhY2hlZCkK
PiArICAgICAgIGlmIChiby0+dHRtLT5udW1fcGFnZXMgIT0gMSB8fCBiby0+dHRtLT5jYWNoaW5n
ID09IHR0bV9jYWNoZWQpCj4gICAgICAgICAgICAgICAgIHJldHVybiBBTURHUFVfQk9fSU5WQUxJ
RF9PRkZTRVQ7Cj4KPiAgICAgICAgIGlmIChiby0+dHRtLT5kbWFfYWRkcmVzc1swXSArIFBBR0Vf
U0laRSA+PSBhZGV2LT5nbWMuYWdwX3NpemUpCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9vYmplY3QuYwo+IGluZGV4IGM2Yzk3MjNkM2Q4YS4uMzgxZWNjNDc4OGQ1IDEwMDY0
NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYwo+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYwo+IEBAIC03ODcs
NyArNzg3LDcgQEAgaW50IGFtZGdwdV9ib19rbWFwKHN0cnVjdCBhbWRncHVfYm8gKmJvLCB2b2lk
ICoqcHRyKQo+ICAgICAgICAgaWYgKHIgPCAwKQo+ICAgICAgICAgICAgICAgICByZXR1cm4gcjsK
Pgo+IC0gICAgICAgciA9IHR0bV9ib19rbWFwKCZiby0+dGJvLCAwLCBiby0+dGJvLm51bV9wYWdl
cywgJmJvLT5rbWFwKTsKPiArICAgICAgIHIgPSB0dG1fYm9fa21hcCgmYm8tPnRibywgMCwgYm8t
PnRiby5tZW0ubnVtX3BhZ2VzLCAmYm8tPmttYXApOwo+ICAgICAgICAgaWYgKHIpCj4gICAgICAg
ICAgICAgICAgIHJldHVybiByOwo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9vYmplY3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9vYmplY3QuaAo+IGluZGV4IGVkNDdjYmFjNGY3NS4uMTc2ZWQzNjE1MTUxIDEwMDY0NAo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuaAo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuaAo+IEBAIC0xNzQsMTIgKzE3
NCwxMiBAQCBzdGF0aWMgaW5saW5lIHZvaWQgYW1kZ3B1X2JvX3VucmVzZXJ2ZShzdHJ1Y3QgYW1k
Z3B1X2JvICpibykKPgo+ICBzdGF0aWMgaW5saW5lIHVuc2lnbmVkIGxvbmcgYW1kZ3B1X2JvX3Np
emUoc3RydWN0IGFtZGdwdV9ibyAqYm8pCj4gIHsKPiAtICAgICAgIHJldHVybiBiby0+dGJvLm51
bV9wYWdlcyA8PCBQQUdFX1NISUZUOwo+ICsgICAgICAgcmV0dXJuIGJvLT50Ym8uc2l6ZTsKPiAg
fQo+Cj4gIHN0YXRpYyBpbmxpbmUgdW5zaWduZWQgYW1kZ3B1X2JvX25ncHVfcGFnZXMoc3RydWN0
IGFtZGdwdV9ibyAqYm8pCj4gIHsKPiAtICAgICAgIHJldHVybiAoYm8tPnRiby5udW1fcGFnZXMg
PDwgUEFHRV9TSElGVCkgLyBBTURHUFVfR1BVX1BBR0VfU0laRTsKPiArICAgICAgIHJldHVybiBi
by0+dGJvLnNpemUgLyBBTURHUFVfR1BVX1BBR0VfU0laRTsKPiAgfQo+Cj4gIHN0YXRpYyBpbmxp
bmUgdW5zaWduZWQgYW1kZ3B1X2JvX2dwdV9wYWdlX2FsaWdubWVudChzdHJ1Y3QgYW1kZ3B1X2Jv
ICpibykKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3Ry
YWNlLmggYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHJhY2UuaAo+IGluZGV4
IGVlOTQ4MGQxNGNiYy4uMjA3MTVkZGJiNzQ2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV90cmFjZS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X3RyYWNlLmgKPiBAQCAtMTI3LDcgKzEyNyw3IEBAIFRSQUNFX0VWRU5UKGFt
ZGdwdV9ib19jcmVhdGUsCj4KPiAgICAgICAgICAgICBUUF9mYXN0X2Fzc2lnbigKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBfX2VudHJ5LT5ibyA9IGJvOwo+IC0gICAgICAgICAgICAgICAg
ICAgICAgICAgIF9fZW50cnktPnBhZ2VzID0gYm8tPnRiby5udW1fcGFnZXM7Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgX19lbnRyeS0+cGFnZXMgPSBiby0+dGJvLm1lbS5udW1fcGFnZXM7
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX19lbnRyeS0+dHlwZSA9IGJvLT50Ym8ubWVt
Lm1lbV90eXBlOwo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fZW50cnktPnByZWZlciA9
IGJvLT5wcmVmZXJyZWRfZG9tYWluczsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX2Vu
dHJ5LT5hbGxvdyA9IGJvLT5hbGxvd2VkX2RvbWFpbnM7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV90dG0uYwo+IGluZGV4IGVjOTNkNGZkYWJiZC4uZGZiNDEyMmI0ZmYzIDEwMDY0
NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwo+ICsrKyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwo+IEBAIC02MzYsNyArNjM2
LDcgQEAgc3RhdGljIGludCBhbWRncHVfYm9fbW92ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3Qg
KmJvLCBib29sIGV2aWN0LAo+Cj4gIG91dDoKPiAgICAgICAgIC8qIHVwZGF0ZSBzdGF0aXN0aWNz
ICovCj4gLSAgICAgICBhdG9taWM2NF9hZGQoKHU2NCliby0+bnVtX3BhZ2VzIDw8IFBBR0VfU0hJ
RlQsICZhZGV2LT5udW1fYnl0ZXNfbW92ZWQpOwo+ICsgICAgICAgYXRvbWljNjRfYWRkKGJvLT5z
aXplLCAmYWRldi0+bnVtX2J5dGVzX21vdmVkKTsKPiAgICAgICAgIGFtZGdwdV9ib19tb3ZlX25v
dGlmeShibywgZXZpY3QsIG5ld19tZW0pOwo+ICAgICAgICAgcmV0dXJuIDA7Cj4gIH0KPiBAQCAt
MjEzMSw3ICsyMTMxLDcgQEAgaW50IGFtZGdwdV9maWxsX2J1ZmZlcihzdHJ1Y3QgYW1kZ3B1X2Jv
ICpibywKPiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjsKPiAgICAgICAgIH0KPgo+
IC0gICAgICAgbnVtX3BhZ2VzID0gYm8tPnRiby5udW1fcGFnZXM7Cj4gKyAgICAgICBudW1fcGFn
ZXMgPSBiby0+dGJvLm1lbS5udW1fcGFnZXM7Cj4gICAgICAgICBtbV9ub2RlID0gYm8tPnRiby5t
ZW0ubW1fbm9kZTsKPiAgICAgICAgIG51bV9sb29wcyA9IDA7Cj4gICAgICAgICB3aGlsZSAobnVt
X3BhZ2VzKSB7Cj4gQEAgLTIxNjEsNyArMjE2MSw3IEBAIGludCBhbWRncHVfZmlsbF9idWZmZXIo
c3RydWN0IGFtZGdwdV9ibyAqYm8sCj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPgo+
IC0gICAgICAgbnVtX3BhZ2VzID0gYm8tPnRiby5udW1fcGFnZXM7Cj4gKyAgICAgICBudW1fcGFn
ZXMgPSBiby0+dGJvLm1lbS5udW1fcGFnZXM7Cj4gICAgICAgICBtbV9ub2RlID0gYm8tPnRiby5t
ZW0ubW1fbm9kZTsKPgo+ICAgICAgICAgd2hpbGUgKG51bV9wYWdlcykgewo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9tZXNfdjEwXzEuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L21lc192MTBfMS5jCj4gaW5kZXggOTg1ZTQ1NDQ2M2UxLi45YzU5ZjNiMjI5
ZmEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbWVzX3YxMF8xLmMK
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9tZXNfdjEwXzEuYwo+IEBAIC01NTQs
NyArNTU0LDcgQEAgc3RhdGljIGludCBtZXNfdjEwXzFfYWxsb2NhdGVfZW9wX2J1ZihzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldikKPiAgICAgICAgICAgICAgICAgcmV0dXJuIHI7Cj4gICAgICAg
ICB9Cj4KPiAtICAgICAgIG1lbXNldChlb3AsIDAsIGFkZXYtPm1lcy5lb3BfZ3B1X29iai0+dGJv
Lm1lbS5zaXplKTsKPiArICAgICAgIG1lbXNldChlb3AsIDAsIGFkZXYtPm1lcy5lb3BfZ3B1X29i
ai0+dGJvLnNpemUpOwo+Cj4gICAgICAgICBhbWRncHVfYm9fa3VubWFwKGFkZXYtPm1lcy5lb3Bf
Z3B1X29iaik7Cj4gICAgICAgICBhbWRncHVfYm9fdW5yZXNlcnZlKGFkZXYtPm1lcy5lb3BfZ3B1
X29iaik7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8u
YyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYwo+IGluZGV4IGJjNTQyYWM0
YzRiNi4uZjhjNTEyOTFlOWM0IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1
L25vdXZlYXVfYm8uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8u
Ywo+IEBAIC00NzMsMTAgKzQ3MywxMCBAQCBub3V2ZWF1X2JvX3BpbihzdHJ1Y3Qgbm91dmVhdV9i
byAqbnZibywgdWludDMyX3QgZG9tYWluLCBib29sIGNvbnRpZykKPgo+ICAgICAgICAgc3dpdGNo
IChiby0+bWVtLm1lbV90eXBlKSB7Cj4gICAgICAgICBjYXNlIFRUTV9QTF9WUkFNOgo+IC0gICAg
ICAgICAgICAgICBkcm0tPmdlbS52cmFtX2F2YWlsYWJsZSAtPSBiby0+bWVtLnNpemU7Cj4gKyAg
ICAgICAgICAgICAgIGRybS0+Z2VtLnZyYW1fYXZhaWxhYmxlIC09IGJvLT5zaXplOwo+ICAgICAg
ICAgICAgICAgICBicmVhazsKPiAgICAgICAgIGNhc2UgVFRNX1BMX1RUOgo+IC0gICAgICAgICAg
ICAgICBkcm0tPmdlbS5nYXJ0X2F2YWlsYWJsZSAtPSBiby0+bWVtLnNpemU7Cj4gKyAgICAgICAg
ICAgICAgIGRybS0+Z2VtLmdhcnRfYXZhaWxhYmxlIC09IGJvLT5zaXplOwo+ICAgICAgICAgICAg
ICAgICBicmVhazsKPiAgICAgICAgIGRlZmF1bHQ6Cj4gICAgICAgICAgICAgICAgIGJyZWFrOwo+
IEBAIC01MDQsMTAgKzUwNCwxMCBAQCBub3V2ZWF1X2JvX3VucGluKHN0cnVjdCBub3V2ZWF1X2Jv
ICpudmJvKQo+ICAgICAgICAgaWYgKCFudmJvLT5iby5waW5fY291bnQpIHsKPiAgICAgICAgICAg
ICAgICAgc3dpdGNoIChiby0+bWVtLm1lbV90eXBlKSB7Cj4gICAgICAgICAgICAgICAgIGNhc2Ug
VFRNX1BMX1ZSQU06Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgZHJtLT5nZW0udnJhbV9hdmFp
bGFibGUgKz0gYm8tPm1lbS5zaXplOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGRybS0+Z2Vt
LnZyYW1fYXZhaWxhYmxlICs9IGJvLT5zaXplOwo+ICAgICAgICAgICAgICAgICAgICAgICAgIGJy
ZWFrOwo+ICAgICAgICAgICAgICAgICBjYXNlIFRUTV9QTF9UVDoKPiAtICAgICAgICAgICAgICAg
ICAgICAgICBkcm0tPmdlbS5nYXJ0X2F2YWlsYWJsZSArPSBiby0+bWVtLnNpemU7Cj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgZHJtLT5nZW0uZ2FydF9hdmFpbGFibGUgKz0gYm8tPnNpemU7Cj4g
ICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gICAgICAgICAgICAgICAgIGRlZmF1bHQ6
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gQEAgLTkxMyw3ICs5MTMsNyBAQCBu
b3V2ZWF1X2JvX3ZtX2JpbmQoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywgc3RydWN0IHR0
bV9yZXNvdXJjZSAqbmV3X3JlZywKPiAgICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4KPiAgICAg
ICAgIGlmIChkcm0tPmNsaWVudC5kZXZpY2UuaW5mby5mYW1pbHkgPj0gTlZfREVWSUNFX0lORk9f
VjBfQ0VMU0lVUykgewo+IC0gICAgICAgICAgICAgICAqbmV3X3RpbGUgPSBudjEwX2JvX3NldF90
aWxpbmcoZGV2LCBvZmZzZXQsIG5ld19yZWctPnNpemUsCj4gKyAgICAgICAgICAgICAgICpuZXdf
dGlsZSA9IG52MTBfYm9fc2V0X3RpbGluZyhkZXYsIG9mZnNldCwgYm8tPnNpemUsCj4gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudmJvLT5tb2RlLCBudmJv
LT56ZXRhKTsKPiAgICAgICAgIH0KPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91
dmVhdS9ub3V2ZWF1X2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVf
ZGlzcGxheS5jCj4gaW5kZXggYmNlYjQ4YTJkZmNhLi4wZjc4MDQ4MzliNWYgMTAwNjQ0Cj4gLS0t
IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9kaXNwbGF5LmMKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2Rpc3BsYXkuYwo+IEBAIC0yODYsMTEgKzI4Niwx
MSBAQCBub3V2ZWF1X2NoZWNrX2JsX3NpemUoc3RydWN0IG5vdXZlYXVfZHJtICpkcm0sIHN0cnVj
dCBub3V2ZWF1X2JvICpudmJvLAo+Cj4gICAgICAgICBibF9zaXplID0gYncgKiBiaCAqICgxIDw8
IHRpbGVfbW9kZSkgKiBnb2Jfc2l6ZTsKPgo+IC0gICAgICAgRFJNX0RFQlVHX0tNUygib2Zmc2V0
PSV1IHN0cmlkZT0ldSBoPSV1IHRpbGVfbW9kZT0weCUwMnggYnc9JXUgYmg9JXUgZ29iX3NpemU9
JXUgYmxfc2l6ZT0lbGx1IHNpemU9JWx1XG4iLAo+ICsgICAgICAgRFJNX0RFQlVHX0tNUygib2Zm
c2V0PSV1IHN0cmlkZT0ldSBoPSV1IHRpbGVfbW9kZT0weCUwMnggYnc9JXUgYmg9JXUgZ29iX3Np
emU9JXUgYmxfc2l6ZT0lbGx1IHNpemU9JUx1XG4iLAo+ICAgICAgICAgICAgICAgICAgICAgICBv
ZmZzZXQsIHN0cmlkZSwgaCwgdGlsZV9tb2RlLCBidywgYmgsIGdvYl9zaXplLCBibF9zaXplLAo+
IC0gICAgICAgICAgICAgICAgICAgICBudmJvLT5iby5tZW0uc2l6ZSk7Cj4gKyAgICAgICAgICAg
ICAgICAgICAgIG52Ym8tPmJvLnNpemUpOwo+Cj4gLSAgICAgICBpZiAoYmxfc2l6ZSArIG9mZnNl
dCA+IG52Ym8tPmJvLm1lbS5zaXplKQo+ICsgICAgICAgaWYgKGJsX3NpemUgKyBvZmZzZXQgPiBu
dmJvLT5iby5zaXplKQo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVSQU5HRTsKPgo+ICAgICAg
ICAgcmV0dXJuIDA7Cj4gQEAgLTM2Myw3ICszNjMsNyBAQCBub3V2ZWF1X2ZyYW1lYnVmZmVyX25l
dyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAgICAgICAgICAgICAgICB9IGVsc2Ugewo+ICAg
ICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IHNpemUgPSBtb2RlX2NtZC0+cGl0Y2hlc1tp
XSAqIGhlaWdodDsKPgo+IC0gICAgICAgICAgICAgICAgICAgICAgIGlmIChzaXplICsgbW9kZV9j
bWQtPm9mZnNldHNbaV0gPiBudmJvLT5iby5tZW0uc2l6ZSkKPiArICAgICAgICAgICAgICAgICAg
ICAgICBpZiAoc2l6ZSArIG1vZGVfY21kLT5vZmZzZXRzW2ldID4gbnZiby0+Ym8uc2l6ZSkKPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtRVJBTkdFOwo+ICAgICAgICAg
ICAgICAgICB9Cj4gICAgICAgICB9Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2
ZWF1L25vdXZlYXVfcHJpbWUuYyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfcHJp
bWUuYwo+IGluZGV4IDJmMTZiNTI0OTI4My4uMzQ3NDg4Njg1Zjc0IDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfcHJpbWUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9ub3V2ZWF1L25vdXZlYXVfcHJpbWUuYwo+IEBAIC0zMCw5ICszMCw5IEBACj4gIHN0cnVj
dCBzZ190YWJsZSAqbm91dmVhdV9nZW1fcHJpbWVfZ2V0X3NnX3RhYmxlKHN0cnVjdCBkcm1fZ2Vt
X29iamVjdCAqb2JqKQo+ICB7Cj4gICAgICAgICBzdHJ1Y3Qgbm91dmVhdV9ibyAqbnZibyA9IG5v
dXZlYXVfZ2VtX29iamVjdChvYmopOwo+IC0gICAgICAgaW50IG5wYWdlcyA9IG52Ym8tPmJvLm51
bV9wYWdlczsKPgo+IC0gICAgICAgcmV0dXJuIGRybV9wcmltZV9wYWdlc190b19zZyhvYmotPmRl
diwgbnZiby0+Ym8udHRtLT5wYWdlcywgbnBhZ2VzKTsKPiArICAgICAgIHJldHVybiBkcm1fcHJp
bWVfcGFnZXNfdG9fc2cob2JqLT5kZXYsIG52Ym8tPmJvLnR0bS0+cGFnZXMsCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG52Ym8tPmJvLnR0bS0+bnVtX3BhZ2VzKTsKPiAg
fQo+Cj4gIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqbm91dmVhdV9nZW1fcHJpbWVfaW1wb3J0X3Nn
X3RhYmxlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9ub3V2ZWF1L252MTdfZmVuY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L252MTdf
ZmVuY2UuYwo+IGluZGV4IDEyNTNmZGVjNzEyZC4uYmYzMjQ3ZDYyN2IxIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L252MTdfZmVuY2UuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9ub3V2ZWF1L252MTdfZmVuY2UuYwo+IEBAIC04MCw3ICs4MCw3IEBAIG52MTdfZmVuY2Vf
Y29udGV4dF9uZXcoc3RydWN0IG5vdXZlYXVfY2hhbm5lbCAqY2hhbikKPiAgICAgICAgIHN0cnVj
dCBudjEwX2ZlbmNlX2NoYW4gKmZjdHg7Cj4gICAgICAgICBzdHJ1Y3QgdHRtX3Jlc291cmNlICpy
ZWcgPSAmcHJpdi0+Ym8tPmJvLm1lbTsKPiAgICAgICAgIHUzMiBzdGFydCA9IHJlZy0+c3RhcnQg
KiBQQUdFX1NJWkU7Cj4gLSAgICAgICB1MzIgbGltaXQgPSBzdGFydCArIHJlZy0+c2l6ZSAtIDE7
Cj4gKyAgICAgICB1MzIgbGltaXQgPSBzdGFydCArIHByaXYtPmJvLT5iby5zaXplIC0gMTsKPiAg
ICAgICAgIGludCByZXQgPSAwOwo+Cj4gICAgICAgICBmY3R4ID0gY2hhbi0+ZmVuY2UgPSBremFs
bG9jKHNpemVvZigqZmN0eCksIEdGUF9LRVJORUwpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vbm91dmVhdS9udjUwX2ZlbmNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9udjUw
X2ZlbmNlLmMKPiBpbmRleCA0NDcyMzhlM2NiZTcuLjFjODk3MDJmYmJhNSAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9udjUwX2ZlbmNlLmMKPiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vbm91dmVhdS9udjUwX2ZlbmNlLmMKPiBAQCAtMzksNyArMzksNyBAQCBudjUwX2ZlbmNl
X2NvbnRleHRfbmV3KHN0cnVjdCBub3V2ZWF1X2NoYW5uZWwgKmNoYW4pCj4gICAgICAgICBzdHJ1
Y3QgbnYxMF9mZW5jZV9jaGFuICpmY3R4Owo+ICAgICAgICAgc3RydWN0IHR0bV9yZXNvdXJjZSAq
cmVnID0gJnByaXYtPmJvLT5iby5tZW07Cj4gICAgICAgICB1MzIgc3RhcnQgPSByZWctPnN0YXJ0
ICogUEFHRV9TSVpFOwo+IC0gICAgICAgdTMyIGxpbWl0ID0gc3RhcnQgKyByZWctPnNpemUgLSAx
Owo+ICsgICAgICAgdTMyIGxpbWl0ID0gc3RhcnQgKyBwcml2LT5iby0+Ym8uc2l6ZSAtIDE7Cj4g
ICAgICAgICBpbnQgcmV0Owo+Cj4gICAgICAgICBmY3R4ID0gY2hhbi0+ZmVuY2UgPSBremFsbG9j
KHNpemVvZigqZmN0eCksIEdGUF9LRVJORUwpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vcXhsL3F4bF9vYmplY3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX29iamVjdC5oCj4g
aW5kZXggZWJmMjRjOWQyYmYyLi5iZTRkOTVlZDgyOTggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3F4bC9xeGxfb2JqZWN0LmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9v
YmplY3QuaAo+IEBAIC01MCw3ICs1MCw3IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBxeGxfYm9fdW5y
ZXNlcnZlKHN0cnVjdCBxeGxfYm8gKmJvKQo+Cj4gIHN0YXRpYyBpbmxpbmUgdW5zaWduZWQgbG9u
ZyBxeGxfYm9fc2l6ZShzdHJ1Y3QgcXhsX2JvICpibykKPiAgewo+IC0gICAgICAgcmV0dXJuIGJv
LT50Ym8ubnVtX3BhZ2VzIDw8IFBBR0VfU0hJRlQ7Cj4gKyAgICAgICByZXR1cm4gYm8tPnRiby5z
aXplOwo+ICB9Cj4KPiAgc3RhdGljIGlubGluZSB1NjQgcXhsX2JvX21tYXBfb2Zmc2V0KHN0cnVj
dCBxeGxfYm8gKmJvKQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVv
bl9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fY3MuYwo+IGluZGV4IDIxY2Uy
Zjk1MDJjMC4uNGYzNWMzMjk1N2JlIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRl
b24vcmFkZW9uX2NzLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9jcy5j
Cj4gQEAgLTQwMSw3ICs0MDEsOCBAQCBzdGF0aWMgaW50IGNtcF9zaXplX3NtYWxsZXJfZmlyc3Qo
dm9pZCAqcHJpdiwgc3RydWN0IGxpc3RfaGVhZCAqYSwKPiAgICAgICAgIHN0cnVjdCByYWRlb25f
Ym9fbGlzdCAqbGIgPSBsaXN0X2VudHJ5KGIsIHN0cnVjdCByYWRlb25fYm9fbGlzdCwgdHYuaGVh
ZCk7Cj4KPiAgICAgICAgIC8qIFNvcnQgQSBiZWZvcmUgQiBpZiBBIGlzIHNtYWxsZXIuICovCj4g
LSAgICAgICByZXR1cm4gKGludClsYS0+cm9iai0+dGJvLm51bV9wYWdlcyAtIChpbnQpbGItPnJv
YmotPnRiby5udW1fcGFnZXM7Cj4gKyAgICAgICByZXR1cm4gKGludClsYS0+cm9iai0+dGJvLm1l
bS5udW1fcGFnZXMgLQo+ICsgICAgICAgICAgICAgICAoaW50KWxiLT5yb2JqLT50Ym8ubWVtLm51
bV9wYWdlczsKPiAgfQo+Cj4gIC8qKgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFk
ZW9uL3JhZGVvbl9vYmplY3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX29iamVj
dC5jCj4gaW5kZXggYWI4MWUzNWNiMDYwLi43ODUyOTJmYzhjZmYgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuYwo+IEBAIC01NCwyMCArNTQsMTkgQEAgc3RhdGljIHZv
aWQgcmFkZW9uX3VwZGF0ZV9tZW1vcnlfdXNhZ2Uoc3RydWN0IHJhZGVvbl9ibyAqYm8sCj4gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbWVtX3R5cGUsIGlu
dCBzaWduKQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiA9IGJvLT5y
ZGV2Owo+IC0gICAgICAgdTY0IHNpemUgPSAodTY0KWJvLT50Ym8ubnVtX3BhZ2VzIDw8IFBBR0Vf
U0hJRlQ7Cj4KPiAgICAgICAgIHN3aXRjaCAobWVtX3R5cGUpIHsKPiAgICAgICAgIGNhc2UgVFRN
X1BMX1RUOgo+ICAgICAgICAgICAgICAgICBpZiAoc2lnbiA+IDApCj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgYXRvbWljNjRfYWRkKHNpemUsICZyZGV2LT5ndHRfdXNhZ2UpOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIGF0b21pYzY0X2FkZChiby0+dGJvLnNpemUsICZyZGV2LT5ndHRfdXNh
Z2UpOwo+ICAgICAgICAgICAgICAgICBlbHNlCj4gLSAgICAgICAgICAgICAgICAgICAgICAgYXRv
bWljNjRfc3ViKHNpemUsICZyZGV2LT5ndHRfdXNhZ2UpOwo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIGF0b21pYzY0X3N1Yihiby0+dGJvLnNpemUsICZyZGV2LT5ndHRfdXNhZ2UpOwo+ICAgICAg
ICAgICAgICAgICBicmVhazsKPiAgICAgICAgIGNhc2UgVFRNX1BMX1ZSQU06Cj4gICAgICAgICAg
ICAgICAgIGlmIChzaWduID4gMCkKPiAtICAgICAgICAgICAgICAgICAgICAgICBhdG9taWM2NF9h
ZGQoc2l6ZSwgJnJkZXYtPnZyYW1fdXNhZ2UpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGF0
b21pYzY0X2FkZChiby0+dGJvLnNpemUsICZyZGV2LT52cmFtX3VzYWdlKTsKPiAgICAgICAgICAg
ICAgICAgZWxzZQo+IC0gICAgICAgICAgICAgICAgICAgICAgIGF0b21pYzY0X3N1YihzaXplLCAm
cmRldi0+dnJhbV91c2FnZSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgYXRvbWljNjRfc3Vi
KGJvLT50Ym8uc2l6ZSwgJnJkZXYtPnZyYW1fdXNhZ2UpOwo+ICAgICAgICAgICAgICAgICBicmVh
azsKPiAgICAgICAgIH0KPiAgfQo+IEBAIC0yNTYsNyArMjU1LDcgQEAgaW50IHJhZGVvbl9ib19r
bWFwKHN0cnVjdCByYWRlb25fYm8gKmJvLCB2b2lkICoqcHRyKQo+ICAgICAgICAgICAgICAgICB9
Cj4gICAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICAgICAgICAgfQo+IC0gICAgICAgciA9IHR0
bV9ib19rbWFwKCZiby0+dGJvLCAwLCBiby0+dGJvLm51bV9wYWdlcywgJmJvLT5rbWFwKTsKPiAr
ICAgICAgIHIgPSB0dG1fYm9fa21hcCgmYm8tPnRibywgMCwgYm8tPnRiby5tZW0ubnVtX3BhZ2Vz
LCAmYm8tPmttYXApOwo+ICAgICAgICAgaWYgKHIpIHsKPiAgICAgICAgICAgICAgICAgcmV0dXJu
IHI7Cj4gICAgICAgICB9Cj4gQEAgLTYxMCw3ICs2MDksNyBAQCBpbnQgcmFkZW9uX2JvX2dldF9z
dXJmYWNlX3JlZyhzdHJ1Y3QgcmFkZW9uX2JvICpibykKPiAgb3V0Ogo+ICAgICAgICAgcmFkZW9u
X3NldF9zdXJmYWNlX3JlZyhyZGV2LCBpLCBiby0+dGlsaW5nX2ZsYWdzLCBiby0+cGl0Y2gsCj4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvLT50Ym8ubWVtLnN0YXJ0IDw8IFBBR0Vf
U0hJRlQsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvLT50Ym8ubnVtX3BhZ2Vz
IDw8IFBBR0VfU0hJRlQpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiby0+dGJv
LnNpemUpOwo+ICAgICAgICAgcmV0dXJuIDA7Cj4gIH0KPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24v
cmFkZW9uX29iamVjdC5oCj4gaW5kZXggZDYwNmU5YTkzNWUzLi42MzgyMWQyZDJjMDcgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmgKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuaAo+IEBAIC0xMDksMTIgKzEwOSwx
MiBAQCBzdGF0aWMgaW5saW5lIHU2NCByYWRlb25fYm9fZ3B1X29mZnNldChzdHJ1Y3QgcmFkZW9u
X2JvICpibykKPgo+ICBzdGF0aWMgaW5saW5lIHVuc2lnbmVkIGxvbmcgcmFkZW9uX2JvX3NpemUo
c3RydWN0IHJhZGVvbl9ibyAqYm8pCj4gIHsKPiAtICAgICAgIHJldHVybiBiby0+dGJvLm51bV9w
YWdlcyA8PCBQQUdFX1NISUZUOwo+ICsgICAgICAgcmV0dXJuIGJvLT50Ym8uc2l6ZTsKPiAgfQo+
Cj4gIHN0YXRpYyBpbmxpbmUgdW5zaWduZWQgcmFkZW9uX2JvX25ncHVfcGFnZXMoc3RydWN0IHJh
ZGVvbl9ibyAqYm8pCj4gIHsKPiAtICAgICAgIHJldHVybiAoYm8tPnRiby5udW1fcGFnZXMgPDwg
UEFHRV9TSElGVCkgLyBSQURFT05fR1BVX1BBR0VfU0laRTsKPiArICAgICAgIHJldHVybiBiby0+
dGJvLnNpemUgLyBSQURFT05fR1BVX1BBR0VfU0laRTsKPiAgfQo+Cj4gIHN0YXRpYyBpbmxpbmUg
dW5zaWduZWQgcmFkZW9uX2JvX2dwdV9wYWdlX2FsaWdubWVudChzdHJ1Y3QgcmFkZW9uX2JvICpi
bykKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fcHJpbWUuYyBi
L2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3ByaW1lLmMKPiBpbmRleCAwODhkMzlhNTFj
MGQuLjBhMDlkYmFiYTI4OSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3Jh
ZGVvbl9wcmltZS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fcHJpbWUu
Ywo+IEBAIC0zNCw5ICszNCw5IEBACj4gIHN0cnVjdCBzZ190YWJsZSAqcmFkZW9uX2dlbV9wcmlt
ZV9nZXRfc2dfdGFibGUoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCj4gIHsKPiAgICAgICAg
IHN0cnVjdCByYWRlb25fYm8gKmJvID0gZ2VtX3RvX3JhZGVvbl9ibyhvYmopOwo+IC0gICAgICAg
aW50IG5wYWdlcyA9IGJvLT50Ym8ubnVtX3BhZ2VzOwo+Cj4gLSAgICAgICByZXR1cm4gZHJtX3By
aW1lX3BhZ2VzX3RvX3NnKG9iai0+ZGV2LCBiby0+dGJvLnR0bS0+cGFnZXMsIG5wYWdlcyk7Cj4g
KyAgICAgICByZXR1cm4gZHJtX3ByaW1lX3BhZ2VzX3RvX3NnKG9iai0+ZGV2LCBiby0+dGJvLnR0
bS0+cGFnZXMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvLT50Ym8u
dHRtLT5udW1fcGFnZXMpOwo+ICB9Cj4KPiAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICpyYWRlb25f
Z2VtX3ByaW1lX2ltcG9ydF9zZ190YWJsZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90cmFjZS5oIGIvZHJpdmVycy9n
cHUvZHJtL3JhZGVvbi9yYWRlb25fdHJhY2UuaAo+IGluZGV4IGM5M2YzYWIzYzRlMy4uMTcyOWNi
OWE5NWM1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3RyYWNl
LmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90cmFjZS5oCj4gQEAgLTIy
LDcgKzIyLDcgQEAgVFJBQ0VfRVZFTlQocmFkZW9uX2JvX2NyZWF0ZSwKPgo+ICAgICAgICAgICAg
IFRQX2Zhc3RfYXNzaWduKAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fZW50cnktPmJv
ID0gYm87Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgX19lbnRyeS0+cGFnZXMgPSBiby0+
dGJvLm51bV9wYWdlczsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICBfX2VudHJ5LT5wYWdl
cyA9IGJvLT50Ym8ubWVtLm51bV9wYWdlczsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAp
LAo+ICAgICAgICAgICAgIFRQX3ByaW50aygiYm89JXAsIHBhZ2VzPSV1IiwgX19lbnRyeS0+Ym8s
IF9fZW50cnktPnBhZ2VzKQo+ICApOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFk
ZW9uL3JhZGVvbl90dG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jCj4g
aW5kZXggYTM0MzJjNjM0M2JhLi41MWFkNWVjY2Q4NDQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9u
L3JhZGVvbl90dG0uYwo+IEBAIC0yNzQsNyArMjc0LDcgQEAgc3RhdGljIGludCByYWRlb25fYm9f
bW92ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBib29sIGV2aWN0LAo+Cj4gIG91dDoK
PiAgICAgICAgIC8qIHVwZGF0ZSBzdGF0aXN0aWNzICovCj4gLSAgICAgICBhdG9taWM2NF9hZGQo
KHU2NCliby0+bnVtX3BhZ2VzIDw8IFBBR0VfU0hJRlQsICZyZGV2LT5udW1fYnl0ZXNfbW92ZWQp
Owo+ICsgICAgICAgYXRvbWljNjRfYWRkKGJvLT5zaXplLCAmcmRldi0+bnVtX2J5dGVzX21vdmVk
KTsKPiAgICAgICAgIHJhZGVvbl9ib19tb3ZlX25vdGlmeShibywgZXZpY3QsIG5ld19tZW0pOwo+
ICAgICAgICAgcmV0dXJuIDA7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fYm8uYyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKPiBpbmRleCAwMmNjNWQy
NDdjMGQuLjFjYjMyNjA1NmU5MiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0
bV9iby5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYwo+IEBAIC03Miw5ICs3
Miw5IEBAIHN0YXRpYyB2b2lkIHR0bV9ib19tZW1fc3BhY2VfZGVidWcoc3RydWN0IHR0bV9idWZm
ZXJfb2JqZWN0ICpibywKPiAgICAgICAgIHN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAqbWFu
Owo+ICAgICAgICAgaW50IGksIG1lbV90eXBlOwo+Cj4gLSAgICAgICBkcm1fcHJpbnRmKCZwLCAi
Tm8gc3BhY2UgZm9yICVwICglbHUgcGFnZXMsICVsdUssICVsdU0pXG4iLAo+IC0gICAgICAgICAg
ICAgICAgICBibywgYm8tPm1lbS5udW1fcGFnZXMsIGJvLT5tZW0uc2l6ZSA+PiAxMCwKPiAtICAg
ICAgICAgICAgICAgICAgYm8tPm1lbS5zaXplID4+IDIwKTsKPiArICAgICAgIGRybV9wcmludGYo
JnAsICJObyBzcGFjZSBmb3IgJXAgKCVsdSBwYWdlcywgJUx1SywgJUx1TSlcbiIsCj4gKyAgICAg
ICAgICAgICAgICAgIGJvLCBiby0+bWVtLm51bV9wYWdlcywgYm8tPnNpemUgPj4gMTAsCj4gKyAg
ICAgICAgICAgICAgICAgIGJvLT5zaXplID4+IDIwKTsKPiAgICAgICAgIGZvciAoaSA9IDA7IGkg
PCBwbGFjZW1lbnQtPm51bV9wbGFjZW1lbnQ7IGkrKykgewo+ICAgICAgICAgICAgICAgICBtZW1f
dHlwZSA9IHBsYWNlbWVudC0+cGxhY2VtZW50W2ldLm1lbV90eXBlOwo+ICAgICAgICAgICAgICAg
ICBkcm1fcHJpbnRmKCZwLCAiICBwbGFjZW1lbnRbJWRdPTB4JTA4WCAoJWQpXG4iLAo+IEBAIC0y
NjgsNyArMjY4LDcgQEAgc3RhdGljIGludCB0dG1fYm9faGFuZGxlX21vdmVfbWVtKHN0cnVjdCB0
dG1fYnVmZmVyX29iamVjdCAqYm8sCj4gICAgICAgICAgICAgICAgIGdvdG8gb3V0X2VycjsKPiAg
ICAgICAgIH0KPgo+IC0gICAgICAgY3R4LT5ieXRlc19tb3ZlZCArPSBiby0+bnVtX3BhZ2VzIDw8
IFBBR0VfU0hJRlQ7Cj4gKyAgICAgICBjdHgtPmJ5dGVzX21vdmVkICs9IGJvLT5zaXplOwo+ICAg
ICAgICAgcmV0dXJuIDA7Cj4KPiAgb3V0X2VycjoKPiBAQCAtOTg1LDggKzk4NSw3IEBAIHN0YXRp
YyBpbnQgdHRtX2JvX21vdmVfYnVmZmVyKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCj4K
PiAgICAgICAgIG1lbXNldCgmaG9wLCAwLCBzaXplb2YoaG9wKSk7Cj4KPiAtICAgICAgIG1lbS5u
dW1fcGFnZXMgPSBiby0+bnVtX3BhZ2VzOwo+IC0gICAgICAgbWVtLnNpemUgPSBtZW0ubnVtX3Bh
Z2VzIDw8IFBBR0VfU0hJRlQ7Cj4gKyAgICAgICBtZW0ubnVtX3BhZ2VzID0gUEFHRV9BTElHTihi
by0+c2l6ZSkgPj4gUEFHRV9TSElGVDsKPiAgICAgICAgIG1lbS5wYWdlX2FsaWdubWVudCA9IGJv
LT5tZW0ucGFnZV9hbGlnbm1lbnQ7Cj4gICAgICAgICBtZW0uYnVzLm9mZnNldCA9IDA7Cj4gICAg
ICAgICBtZW0uYnVzLmFkZHIgPSBOVUxMOwo+IEBAIC0xMTAyLDcgKzExMDEsNyBAQCBFWFBPUlRf
U1lNQk9MKHR0bV9ib192YWxpZGF0ZSk7Cj4KPiAgaW50IHR0bV9ib19pbml0X3Jlc2VydmVkKHN0
cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1
Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICB1bnNp
Z25lZCBsb25nIHNpemUsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90IHNpemUs
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgIGVudW0gdHRtX2JvX3R5cGUgdHlwZSwKPiAgICAg
ICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHR0bV9wbGFjZW1lbnQgKnBsYWNlbWVudCwKPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgcGFnZV9hbGlnbm1lbnQsCj4gQEAgLTEx
MTMsOSArMTExMiw4IEBAIGludCB0dG1fYm9faW5pdF9yZXNlcnZlZChzdHJ1Y3QgdHRtX2JvX2Rl
dmljZSAqYmRldiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAoKmRlc3Ryb3kpIChz
dHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKikpCj4gIHsKPiAgICAgICAgIHN0cnVjdCB0dG1fbWVt
X2dsb2JhbCAqbWVtX2dsb2IgPSAmdHRtX21lbV9nbG9iOwo+IC0gICAgICAgaW50IHJldCA9IDA7
Cj4gLSAgICAgICB1bnNpZ25lZCBsb25nIG51bV9wYWdlczsKPiAgICAgICAgIGJvb2wgbG9ja2Vk
Owo+ICsgICAgICAgaW50IHJldCA9IDA7Cj4KPiAgICAgICAgIHJldCA9IHR0bV9tZW1fZ2xvYmFs
X2FsbG9jKG1lbV9nbG9iLCBhY2Nfc2l6ZSwgY3R4KTsKPiAgICAgICAgIGlmIChyZXQpIHsKPiBA
QCAtMTEyNywxNiArMTEyNSw2IEBAIGludCB0dG1fYm9faW5pdF9yZXNlcnZlZChzdHJ1Y3QgdHRt
X2JvX2RldmljZSAqYmRldiwKPiAgICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gICAg
ICAgICB9Cj4KPiAtICAgICAgIG51bV9wYWdlcyA9IChzaXplICsgUEFHRV9TSVpFIC0gMSkgPj4g
UEFHRV9TSElGVDsKPiAtICAgICAgIGlmIChudW1fcGFnZXMgPT0gMCkgewo+IC0gICAgICAgICAg
ICAgICBwcl9lcnIoIklsbGVnYWwgYnVmZmVyIG9iamVjdCBzaXplXG4iKTsKPiAtICAgICAgICAg
ICAgICAgaWYgKGRlc3Ryb3kpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgKCpkZXN0cm95KShi
byk7Cj4gLSAgICAgICAgICAgICAgIGVsc2UKPiAtICAgICAgICAgICAgICAgICAgICAgICBrZnJl
ZShibyk7Cj4gLSAgICAgICAgICAgICAgIHR0bV9tZW1fZ2xvYmFsX2ZyZWUobWVtX2dsb2IsIGFj
Y19zaXplKTsKPiAtICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gLSAgICAgICB9Cj4g
ICAgICAgICBiby0+ZGVzdHJveSA9IGRlc3Ryb3kgPyBkZXN0cm95IDogdHRtX2JvX2RlZmF1bHRf
ZGVzdHJveTsKPgo+ICAgICAgICAga3JlZl9pbml0KCZiby0+a3JlZik7Cj4gQEAgLTExNDUsMTAg
KzExMzMsOSBAQCBpbnQgdHRtX2JvX2luaXRfcmVzZXJ2ZWQoc3RydWN0IHR0bV9ib19kZXZpY2Ug
KmJkZXYsCj4gICAgICAgICBJTklUX0xJU1RfSEVBRCgmYm8tPnN3YXApOwo+ICAgICAgICAgYm8t
PmJkZXYgPSBiZGV2Owo+ICAgICAgICAgYm8tPnR5cGUgPSB0eXBlOwo+IC0gICAgICAgYm8tPm51
bV9wYWdlcyA9IG51bV9wYWdlczsKPiAtICAgICAgIGJvLT5tZW0uc2l6ZSA9IG51bV9wYWdlcyA8
PCBQQUdFX1NISUZUOwo+ICsgICAgICAgYm8tPnNpemUgPSBzaXplOwo+ICAgICAgICAgYm8tPm1l
bS5tZW1fdHlwZSA9IFRUTV9QTF9TWVNURU07Cj4gLSAgICAgICBiby0+bWVtLm51bV9wYWdlcyA9
IGJvLT5udW1fcGFnZXM7Cj4gKyAgICAgICBiby0+bWVtLm51bV9wYWdlcyA9IFBBR0VfQUxJR04o
c2l6ZSkgPj4gUEFHRV9TSElGVDsKPiAgICAgICAgIGJvLT5tZW0ubW1fbm9kZSA9IE5VTEw7Cj4g
ICAgICAgICBiby0+bWVtLnBhZ2VfYWxpZ25tZW50ID0gcGFnZV9hbGlnbm1lbnQ7Cj4gICAgICAg
ICBiby0+bWVtLmJ1cy5vZmZzZXQgPSAwOwo+IEBAIC0xMjEwLDcgKzExOTcsNyBAQCBFWFBPUlRf
U1lNQk9MKHR0bV9ib19pbml0X3Jlc2VydmVkKTsKPgo+ICBpbnQgdHRtX2JvX2luaXQoc3RydWN0
IHR0bV9ib19kZXZpY2UgKmJkZXYsCj4gICAgICAgICAgICAgICAgIHN0cnVjdCB0dG1fYnVmZmVy
X29iamVjdCAqYm8sCj4gLSAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgc2l6ZSwKPiArICAg
ICAgICAgICAgICAgdWludDY0X3Qgc2l6ZSwKPiAgICAgICAgICAgICAgICAgZW51bSB0dG1fYm9f
dHlwZSB0eXBlLAo+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX3BsYWNlbWVudCAqcGxhY2Vt
ZW50LAo+ICAgICAgICAgICAgICAgICB1aW50MzJfdCBwYWdlX2FsaWdubWVudCwKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdXRpbC5jIGIvZHJpdmVycy9ncHUvZHJt
L3R0bS90dG1fYm9fdXRpbC5jCj4gaW5kZXggNWJiYzEzMzlkMjhlLi42NzU4ZTUxMTVhZTUgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdXRpbC5jCj4gKysrIGIvZHJp
dmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdXRpbC5jCj4gQEAgLTQzMSw5ICs0MzEsOSBAQCBpbnQg
dHRtX2JvX2ttYXAoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKPgo+ICAgICAgICAgbWFw
LT52aXJ0dWFsID0gTlVMTDsKPiAgICAgICAgIG1hcC0+Ym8gPSBibzsKPiAtICAgICAgIGlmIChu
dW1fcGFnZXMgPiBiby0+bnVtX3BhZ2VzKQo+ICsgICAgICAgaWYgKG51bV9wYWdlcyA+IGJvLT5t
ZW0ubnVtX3BhZ2VzKQo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAtICAgICAg
IGlmIChzdGFydF9wYWdlID4gYm8tPm51bV9wYWdlcykKPiArICAgICAgIGlmICgoc3RhcnRfcGFn
ZSArIG51bV9wYWdlcykgPiBiby0+bWVtLm51bV9wYWdlcykKPiAgICAgICAgICAgICAgICAgcmV0
dXJuIC1FSU5WQUw7Cj4KPiAgICAgICAgIHJldCA9IHR0bV9tZW1faW9fcmVzZXJ2ZShiby0+YmRl
diwgJmJvLT5tZW0pOwo+IEBAIC00ODUsMTQgKzQ4NSwxMyBAQCBpbnQgdHRtX2JvX3ZtYXAoc3Ry
dWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywgc3RydWN0IGRtYV9idWZfbWFwICptYXApCj4KPiAg
ICAgICAgIGlmIChtZW0tPmJ1cy5pc19pb21lbSkgewo+ICAgICAgICAgICAgICAgICB2b2lkIF9f
aW9tZW0gKnZhZGRyX2lvbWVtOwo+IC0gICAgICAgICAgICAgICBzaXplX3Qgc2l6ZSA9IGJvLT5u
dW1fcGFnZXMgPDwgUEFHRV9TSElGVDsKPgo+ICAgICAgICAgICAgICAgICBpZiAobWVtLT5idXMu
YWRkcikKPiAgICAgICAgICAgICAgICAgICAgICAgICB2YWRkcl9pb21lbSA9ICh2b2lkIF9faW9t
ZW0gKiltZW0tPmJ1cy5hZGRyOwo+ICAgICAgICAgICAgICAgICBlbHNlIGlmIChtZW0tPmJ1cy5j
YWNoaW5nID09IHR0bV93cml0ZV9jb21iaW5lZCkKPiAtICAgICAgICAgICAgICAgICAgICAgICB2
YWRkcl9pb21lbSA9IGlvcmVtYXBfd2MobWVtLT5idXMub2Zmc2V0LCBzaXplKTsKPiArICAgICAg
ICAgICAgICAgICAgICAgICB2YWRkcl9pb21lbSA9IGlvcmVtYXBfd2MobWVtLT5idXMub2Zmc2V0
LCBiby0+c2l6ZSk7Cj4gICAgICAgICAgICAgICAgIGVsc2UKPiAtICAgICAgICAgICAgICAgICAg
ICAgICB2YWRkcl9pb21lbSA9IGlvcmVtYXAobWVtLT5idXMub2Zmc2V0LCBzaXplKTsKPiArICAg
ICAgICAgICAgICAgICAgICAgICB2YWRkcl9pb21lbSA9IGlvcmVtYXAobWVtLT5idXMub2Zmc2V0
LCBiby0+c2l6ZSk7Cj4KPiAgICAgICAgICAgICAgICAgaWYgKCF2YWRkcl9pb21lbSkKPiAgICAg
ICAgICAgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiBAQCAtNTE3LDcgKzUxNiw3IEBA
IGludCB0dG1fYm9fdm1hcChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBzdHJ1Y3QgZG1h
X2J1Zl9tYXAgKm1hcCkKPiAgICAgICAgICAgICAgICAgICogb3IgdG8gbWFrZSB0aGUgYnVmZmVy
IG9iamVjdCBsb29rIGNvbnRpZ3VvdXMuCj4gICAgICAgICAgICAgICAgICAqLwo+ICAgICAgICAg
ICAgICAgICBwcm90ID0gdHRtX2lvX3Byb3QoYm8sIG1lbSwgUEFHRV9LRVJORUwpOwo+IC0gICAg
ICAgICAgICAgICB2YWRkciA9IHZtYXAodHRtLT5wYWdlcywgYm8tPm51bV9wYWdlcywgMCwgcHJv
dCk7Cj4gKyAgICAgICAgICAgICAgIHZhZGRyID0gdm1hcCh0dG0tPnBhZ2VzLCB0dG0tPm51bV9w
YWdlcywgMCwgcHJvdCk7Cj4gICAgICAgICAgICAgICAgIGlmICghdmFkZHIpCj4gICAgICAgICAg
ICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3R0bS90dG1fYm9fdm0uYyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX3ZtLmMK
PiBpbmRleCAxNDRhNDk0MGI2YjYuLjZkYzk2Y2Y2Njc0NCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vdHRtL3R0bV9ib192bS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1f
Ym9fdm0uYwo+IEBAIC0xOTgsNyArMTk4LDcgQEAgc3RhdGljIHZtX2ZhdWx0X3QgdHRtX2JvX3Zt
X2luc2VydF9odWdlKHN0cnVjdCB2bV9mYXVsdCAqdm1mLAo+Cj4gICAgICAgICAvKiBGYXVsdCBz
aG91bGQgbm90IGNyb3NzIGJvIGJvdW5kYXJ5LiAqLwo+ICAgICAgICAgcGFnZV9vZmZzZXQgJj0g
fihmYXVsdF9wYWdlX3NpemUgLSAxKTsKPiAtICAgICAgIGlmIChwYWdlX29mZnNldCArIGZhdWx0
X3BhZ2Vfc2l6ZSA+IGJvLT5udW1fcGFnZXMpCj4gKyAgICAgICBpZiAocGFnZV9vZmZzZXQgKyBm
YXVsdF9wYWdlX3NpemUgPiBiby0+bWVtLm51bV9wYWdlcykKPiAgICAgICAgICAgICAgICAgZ290
byBvdXRfZmFsbGJhY2s7Cj4KPiAgICAgICAgIGlmIChiby0+bWVtLmJ1cy5pc19pb21lbSkKPiBA
QCAtMzA2LDcgKzMwNiw3IEBAIHZtX2ZhdWx0X3QgdHRtX2JvX3ZtX2ZhdWx0X3Jlc2VydmVkKHN0
cnVjdCB2bV9mYXVsdCAqdm1mLAo+ICAgICAgICAgcGFnZV9sYXN0ID0gdm1hX3BhZ2VzKHZtYSkg
KyB2bWEtPnZtX3Bnb2ZmIC0KPiAgICAgICAgICAgICAgICAgZHJtX3ZtYV9ub2RlX3N0YXJ0KCZi
by0+YmFzZS52bWFfbm9kZSk7Cj4KPiAtICAgICAgIGlmICh1bmxpa2VseShwYWdlX29mZnNldCA+
PSBiby0+bnVtX3BhZ2VzKSkKPiArICAgICAgIGlmICh1bmxpa2VseShwYWdlX29mZnNldCA+PSBi
by0+bWVtLm51bV9wYWdlcykpCj4gICAgICAgICAgICAgICAgIHJldHVybiBWTV9GQVVMVF9TSUdC
VVM7Cj4KPiAgICAgICAgIHByb3QgPSB0dG1faW9fcHJvdChibywgJmJvLT5tZW0sIHByb3QpOwo+
IEBAIC00NjksNyArNDY5LDcgQEAgaW50IHR0bV9ib192bV9hY2Nlc3Moc3RydWN0IHZtX2FyZWFf
c3RydWN0ICp2bWEsIHVuc2lnbmVkIGxvbmcgYWRkciwKPiAgICAgICAgICAgICAgICAgIDw8IFBB
R0VfU0hJRlQpOwo+ICAgICAgICAgaW50IHJldDsKPgo+IC0gICAgICAgaWYgKGxlbiA8IDEgfHwg
KG9mZnNldCArIGxlbikgPj4gUEFHRV9TSElGVCA+IGJvLT5udW1fcGFnZXMpCj4gKyAgICAgICBp
ZiAobGVuIDwgMSB8fCAob2Zmc2V0ICsgbGVuKSA+PiBQQUdFX1NISUZUID4gYm8tPm1lbS5udW1f
cGFnZXMpCj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlPOwo+Cj4gICAgICAgICByZXQgPSB0
dG1fYm9fcmVzZXJ2ZShibywgdHJ1ZSwgZmFsc2UsIE5VTEwpOwo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vdHRtL3R0bV90dC5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fdHQuYwo+
IGluZGV4IDc3YmE3ODQ0MjVkZC4uYzVjOTczZmEwNzM2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS90dG0vdHRtX3R0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90dC5j
Cj4gQEAgLTEyOSw3ICsxMjksNyBAQCBzdGF0aWMgdm9pZCB0dG1fdHRfaW5pdF9maWVsZHMoc3Ry
dWN0IHR0bV90dCAqdHRtLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJf
dCBwYWdlX2ZsYWdzLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtIHR0bV9j
YWNoaW5nIGNhY2hpbmcpCj4gIHsKPiAtICAgICAgIHR0bS0+bnVtX3BhZ2VzID0gYm8tPm51bV9w
YWdlczsKPiArICAgICAgIHR0bS0+bnVtX3BhZ2VzID0gUEFHRV9BTElHTihiby0+c2l6ZSkgPj4g
UEFHRV9TSElGVDsKPiAgICAgICAgIHR0bS0+Y2FjaGluZyA9IHR0bV9jYWNoZWQ7Cj4gICAgICAg
ICB0dG0tPnBhZ2VfZmxhZ3MgPSBwYWdlX2ZsYWdzOwo+ICAgICAgICAgdHRtLT5kbWFfYWRkcmVz
cyA9IE5VTEw7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2Js
aXQuYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2JsaXQuYwo+IGluZGV4IGYyMTg4
MWUwODdkYi4uOWYyNzc5ZGRjZjA4IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS92bXdn
Zngvdm13Z2Z4X2JsaXQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2Js
aXQuYwo+IEBAIC00ODIsOCArNDgyLDggQEAgaW50IHZtd19ib19jcHVfYmxpdChzdHJ1Y3QgdHRt
X2J1ZmZlcl9vYmplY3QgKmRzdCwKPiAgICAgICAgIGQuc3JjX2FkZHIgPSBOVUxMOwo+ICAgICAg
ICAgZC5kc3RfcGFnZXMgPSBkc3QtPnR0bS0+cGFnZXM7Cj4gICAgICAgICBkLnNyY19wYWdlcyA9
IHNyYy0+dHRtLT5wYWdlczsKPiAtICAgICAgIGQuZHN0X251bV9wYWdlcyA9IGRzdC0+bnVtX3Bh
Z2VzOwo+IC0gICAgICAgZC5zcmNfbnVtX3BhZ2VzID0gc3JjLT5udW1fcGFnZXM7Cj4gKyAgICAg
ICBkLmRzdF9udW1fcGFnZXMgPSBkc3QtPm1lbS5udW1fcGFnZXM7Cj4gKyAgICAgICBkLnNyY19u
dW1fcGFnZXMgPSBzcmMtPm1lbS5udW1fcGFnZXM7Cj4gICAgICAgICBkLmRzdF9wcm90ID0gdHRt
X2lvX3Byb3QoZHN0LCAmZHN0LT5tZW0sIFBBR0VfS0VSTkVMKTsKPiAgICAgICAgIGQuc3JjX3By
b3QgPSB0dG1faW9fcHJvdChzcmMsICZzcmMtPm1lbSwgUEFHRV9LRVJORUwpOwo+ICAgICAgICAg
ZC5kaWZmID0gZGlmZjsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdn
ZnhfYm8uYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2JvLmMKPiBpbmRleCAyNjNk
NzZhZTQzZjAuLjYzZGJjNDRlZWJlMCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdm13
Z2Z4L3Ztd2dmeF9iby5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfYm8u
Ywo+IEBAIC0yMjMsNyArMjIzLDcgQEAgaW50IHZtd19ib19waW5faW5fc3RhcnRfb2ZfdnJhbShz
dHJ1Y3Qgdm13X3ByaXZhdGUgKmRldl9wcml2LAo+ICAgICAgICAgdWludDMyX3QgbmV3X2ZsYWdz
Owo+Cj4gICAgICAgICBwbGFjZSA9IHZtd192cmFtX3BsYWNlbWVudC5wbGFjZW1lbnRbMF07Cj4g
LSAgICAgICBwbGFjZS5scGZuID0gYm8tPm51bV9wYWdlczsKPiArICAgICAgIHBsYWNlLmxwZm4g
PSBiby0+bWVtLm51bV9wYWdlczsKPiAgICAgICAgIHBsYWNlbWVudC5udW1fcGxhY2VtZW50ID0g
MTsKPiAgICAgICAgIHBsYWNlbWVudC5wbGFjZW1lbnQgPSAmcGxhY2U7Cj4gICAgICAgICBwbGFj
ZW1lbnQubnVtX2J1c3lfcGxhY2VtZW50ID0gMTsKPiBAQCAtMjQ0LDcgKzI0NCw3IEBAIGludCB2
bXdfYm9fcGluX2luX3N0YXJ0X29mX3ZyYW0oc3RydWN0IHZtd19wcml2YXRlICpkZXZfcHJpdiwK
PiAgICAgICAgICAqIHRoYXQgc2l0dWF0aW9uLgo+ICAgICAgICAgICovCj4gICAgICAgICBpZiAo
Ym8tPm1lbS5tZW1fdHlwZSA9PSBUVE1fUExfVlJBTSAmJgo+IC0gICAgICAgICAgIGJvLT5tZW0u
c3RhcnQgPCBiby0+bnVtX3BhZ2VzICYmCj4gKyAgICAgICAgICAgYm8tPm1lbS5zdGFydCA8IGJv
LT5tZW0ubnVtX3BhZ2VzICYmCj4gICAgICAgICAgICAgYm8tPm1lbS5zdGFydCA+IDAgJiYKPiAg
ICAgICAgICAgICBidWYtPmJhc2UucGluX2NvdW50ID09IDApIHsKPiAgICAgICAgICAgICAgICAg
Y3R4LmludGVycnVwdGlibGUgPSBmYWxzZTsKPiBAQCAtMzkxLDcgKzM5MSw3IEBAIHZvaWQgKnZt
d19ib19tYXBfYW5kX2NhY2hlKHN0cnVjdCB2bXdfYnVmZmVyX29iamVjdCAqdmJvKQo+ICAgICAg
ICAgaWYgKHZpcnR1YWwpCj4gICAgICAgICAgICAgICAgIHJldHVybiB2aXJ0dWFsOwo+Cj4gLSAg
ICAgICByZXQgPSB0dG1fYm9fa21hcChibywgMCwgYm8tPm51bV9wYWdlcywgJnZiby0+bWFwKTsK
PiArICAgICAgIHJldCA9IHR0bV9ib19rbWFwKGJvLCAwLCBiby0+bWVtLm51bV9wYWdlcywgJnZi
by0+bWFwKTsKPiAgICAgICAgIGlmIChyZXQpCj4gICAgICAgICAgICAgICAgIERSTV9FUlJPUigi
QnVmZmVyIG9iamVjdCBtYXAgZmFpbGVkOiAlZC5cbiIsIHJldCk7Cj4KPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfY290YWJsZS5jIGIvZHJpdmVycy9ncHUvZHJt
L3Ztd2dmeC92bXdnZnhfY290YWJsZS5jCj4gaW5kZXggOTg0ZDg4ODQzNTdkLi5hMDc3ZTQyMGQy
ZmYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfY290YWJsZS5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfY290YWJsZS5jCj4gQEAgLTQz
MCw3ICs0MzAsNyBAQCBzdGF0aWMgaW50IHZtd19jb3RhYmxlX3Jlc2l6ZShzdHJ1Y3Qgdm13X3Jl
c291cmNlICpyZXMsIHNpemVfdCBuZXdfc2l6ZSkKPiAgICAgICAgICAqIERvIGEgcGFnZSBieSBw
YWdlIGNvcHkgb2YgQ09UYWJsZXMuIFRoaXMgZWxpbWluYXRlcyBzbG93IHZtYXAoKXMuCj4gICAg
ICAgICAgKiBUaGlzIHNob3VsZCByZWFsbHkgYmUgYSBUVE0gdXRpbGl0eS4KPiAgICAgICAgICAq
Lwo+IC0gICAgICAgZm9yIChpID0gMDsgaSA8IG9sZF9iby0+bnVtX3BhZ2VzOyArK2kpIHsKPiAr
ICAgICAgIGZvciAoaSA9IDA7IGkgPCBvbGRfYm8tPm1lbS5udW1fcGFnZXM7ICsraSkgewo+ICAg
ICAgICAgICAgICAgICBib29sIGR1bW15Owo+Cj4gICAgICAgICAgICAgICAgIHJldCA9IHR0bV9i
b19rbWFwKG9sZF9ibywgaSwgMSwgJm9sZF9tYXApOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vdm13Z2Z4L3Ztd2dmeF9leGVjYnVmLmMgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Zt
d2dmeF9leGVjYnVmLmMKPiBpbmRleCBlNjdlMmU4ZjZlNmYuLjcyYmQ2ZDk0MWQyNCAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9leGVjYnVmLmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9leGVjYnVmLmMKPiBAQCAtMTA0Miw3ICsxMDQy
LDcgQEAgc3RhdGljIGludCB2bXdfcXVlcnlfYm9fc3dpdGNoX3ByZXBhcmUoc3RydWN0IHZtd19w
cml2YXRlICpkZXZfcHJpdiwKPgo+ICAgICAgICAgaWYgKHVubGlrZWx5KG5ld19xdWVyeV9ibyAh
PSBzd19jb250ZXh0LT5jdXJfcXVlcnlfYm8pKSB7Cj4KPiAtICAgICAgICAgICAgICAgaWYgKHVu
bGlrZWx5KG5ld19xdWVyeV9iby0+YmFzZS5udW1fcGFnZXMgPiA0KSkgewo+ICsgICAgICAgICAg
ICAgICBpZiAodW5saWtlbHkobmV3X3F1ZXJ5X2JvLT5iYXNlLm1lbS5udW1fcGFnZXMgPiA0KSkg
ewo+ICAgICAgICAgICAgICAgICAgICAgICAgIFZNV19ERUJVR19VU0VSKCJRdWVyeSBidWZmZXIg
dG9vIGxhcmdlLlxuIik7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7
Cj4gICAgICAgICAgICAgICAgIH0KPiBAQCAtMTU0MSw3ICsxNTQxLDcgQEAgc3RhdGljIGludCB2
bXdfY21kX2RtYShzdHJ1Y3Qgdm13X3ByaXZhdGUgKmRldl9wcml2LAo+ICAgICAgICAgICAgICAg
ICByZXR1cm4gcmV0Owo+Cj4gICAgICAgICAvKiBNYWtlIHN1cmUgRE1BIGRvZXNuJ3QgY3Jvc3Mg
Qk8gYm91bmRhcmllcy4gKi8KPiAtICAgICAgIGJvX3NpemUgPSB2bXdfYm8tPmJhc2UubnVtX3Bh
Z2VzICogUEFHRV9TSVpFOwo+ICsgICAgICAgYm9fc2l6ZSA9IHZtd19iby0+YmFzZS5zaXplOwo+
ICAgICAgICAgaWYgKHVubGlrZWx5KGNtZC0+Ym9keS5ndWVzdC5wdHIub2Zmc2V0ID4gYm9fc2l6
ZSkpIHsKPiAgICAgICAgICAgICAgICAgVk1XX0RFQlVHX1VTRVIoIkludmFsaWQgRE1BIG9mZnNl
dC5cbiIpOwo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfZ21yaWRfbWFuYWdlci5jIGIvZHJpdmVycy9n
cHUvZHJtL3Ztd2dmeC92bXdnZnhfZ21yaWRfbWFuYWdlci5jCj4gaW5kZXggOGZlMjZlMzJmOTIw
Li4xNzc0OTYwZDFiODkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdn
ZnhfZ21yaWRfbWFuYWdlci5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhf
Z21yaWRfbWFuYWdlci5jCj4gQEAgLTY0LDIwICs2NCwxOSBAQCBzdGF0aWMgaW50IHZtd19nbXJp
ZF9tYW5fZ2V0X25vZGUoc3RydWN0IHR0bV9yZXNvdXJjZV9tYW5hZ2VyICptYW4sCj4gICAgICAg
ICBzcGluX2xvY2soJmdtYW4tPmxvY2spOwo+Cj4gICAgICAgICBpZiAoZ21hbi0+bWF4X2dtcl9w
YWdlcyA+IDApIHsKPiAtICAgICAgICAgICAgICAgZ21hbi0+dXNlZF9nbXJfcGFnZXMgKz0gYm8t
Pm51bV9wYWdlczsKPiArICAgICAgICAgICAgICAgZ21hbi0+dXNlZF9nbXJfcGFnZXMgKz0gbWVt
LT5udW1fcGFnZXM7Cj4gICAgICAgICAgICAgICAgIGlmICh1bmxpa2VseShnbWFuLT51c2VkX2dt
cl9wYWdlcyA+IGdtYW4tPm1heF9nbXJfcGFnZXMpKQo+ICAgICAgICAgICAgICAgICAgICAgICAg
IGdvdG8gbm9zcGFjZTsKPiAgICAgICAgIH0KPgo+ICAgICAgICAgbWVtLT5tbV9ub2RlID0gZ21h
bjsKPiAgICAgICAgIG1lbS0+c3RhcnQgPSBpZDsKPiAtICAgICAgIG1lbS0+bnVtX3BhZ2VzID0g
Ym8tPm51bV9wYWdlczsKPgo+ICAgICAgICAgc3Bpbl91bmxvY2soJmdtYW4tPmxvY2spOwo+ICAg
ICAgICAgcmV0dXJuIDA7Cj4KPiAgbm9zcGFjZToKPiAtICAgICAgIGdtYW4tPnVzZWRfZ21yX3Bh
Z2VzIC09IGJvLT5udW1fcGFnZXM7Cj4gKyAgICAgICBnbWFuLT51c2VkX2dtcl9wYWdlcyAtPSBt
ZW0tPm51bV9wYWdlczsKPiAgICAgICAgIHNwaW5fdW5sb2NrKCZnbWFuLT5sb2NrKTsKPiAgICAg
ICAgIGlkYV9mcmVlKCZnbWFuLT5nbXJfaWRhLCBpZCk7Cj4gICAgICAgICByZXR1cm4gLUVOT1NQ
QzsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfa21zLmMgYi9k
cml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9rbXMuYwo+IGluZGV4IGJjNjdmMmI5MzBlMS4u
MzQ3YWZmNjIwMWY2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4
X2ttcy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfa21zLmMKPiBAQCAt
MTIyMCw3ICsxMjIwLDcgQEAgc3RhdGljIGludCB2bXdfa21zX25ld19mcmFtZWJ1ZmZlcl9ibyhz
dHJ1Y3Qgdm13X3ByaXZhdGUgKmRldl9wcml2LAo+ICAgICAgICAgaW50IHJldDsKPgo+ICAgICAg
ICAgcmVxdWVzdGVkX3NpemUgPSBtb2RlX2NtZC0+aGVpZ2h0ICogbW9kZV9jbWQtPnBpdGNoZXNb
MF07Cj4gLSAgICAgICBpZiAodW5saWtlbHkocmVxdWVzdGVkX3NpemUgPiBiby0+YmFzZS5udW1f
cGFnZXMgKiBQQUdFX1NJWkUpKSB7Cj4gKyAgICAgICBpZiAodW5saWtlbHkocmVxdWVzdGVkX3Np
emUgPiBiby0+YmFzZS5zaXplKSkgewo+ICAgICAgICAgICAgICAgICBEUk1fRVJST1IoIlNjcmVl
biBidWZmZXIgb2JqZWN0IHNpemUgaXMgdG9vIHNtYWxsICIKPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICJmb3IgcmVxdWVzdGVkIG1vZGUuXG4iKTsKPiAgICAgICAgICAgICAgICAgcmV0dXJu
IC1FSU5WQUw7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3Bh
Z2VfZGlydHkuYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3BhZ2VfZGlydHkuYwo+
IGluZGV4IDBiNzZiM2QxN2Q0Yy4uMGE5MDBhZmM2NmZmIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS92bXdnZngvdm13Z2Z4X3BhZ2VfZGlydHkuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS92bXdnZngvdm13Z2Z4X3BhZ2VfZGlydHkuYwo+IEBAIC0yMzIsNyArMjMyLDcgQEAgdm9pZCB2
bXdfYm9fZGlydHlfdW5tYXAoc3RydWN0IHZtd19idWZmZXJfb2JqZWN0ICp2Ym8sCj4gIGludCB2
bXdfYm9fZGlydHlfYWRkKHN0cnVjdCB2bXdfYnVmZmVyX29iamVjdCAqdmJvKQo+ICB7Cj4gICAg
ICAgICBzdHJ1Y3Qgdm13X2JvX2RpcnR5ICpkaXJ0eSA9IHZiby0+ZGlydHk7Cj4gLSAgICAgICBw
Z29mZl90IG51bV9wYWdlcyA9IHZiby0+YmFzZS5udW1fcGFnZXM7Cj4gKyAgICAgICBwZ29mZl90
IG51bV9wYWdlcyA9IHZiby0+YmFzZS5tZW0ubnVtX3BhZ2VzOwo+ICAgICAgICAgc2l6ZV90IHNp
emUsIGFjY19zaXplOwo+ICAgICAgICAgaW50IHJldDsKPiAgICAgICAgIHN0YXRpYyBzdHJ1Y3Qg
dHRtX29wZXJhdGlvbl9jdHggY3R4ID0gewo+IEBAIC00MTMsNyArNDEzLDcgQEAgdm1fZmF1bHRf
dCB2bXdfYm9fdm1fbWt3cml0ZShzdHJ1Y3Qgdm1fZmF1bHQgKnZtZikKPiAgICAgICAgICAgICAg
ICAgcmV0dXJuIHJldDsKPgo+ICAgICAgICAgcGFnZV9vZmZzZXQgPSB2bWYtPnBnb2ZmIC0gZHJt
X3ZtYV9ub2RlX3N0YXJ0KCZiby0+YmFzZS52bWFfbm9kZSk7Cj4gLSAgICAgICBpZiAodW5saWtl
bHkocGFnZV9vZmZzZXQgPj0gYm8tPm51bV9wYWdlcykpIHsKPiArICAgICAgIGlmICh1bmxpa2Vs
eShwYWdlX29mZnNldCA+PSBiby0+bWVtLm51bV9wYWdlcykpIHsKPiAgICAgICAgICAgICAgICAg
cmV0ID0gVk1fRkFVTFRfU0lHQlVTOwo+ICAgICAgICAgICAgICAgICBnb3RvIG91dF91bmxvY2s7
Cj4gICAgICAgICB9Cj4gQEAgLTQ1Niw3ICs0NTYsNyBAQCB2bV9mYXVsdF90IHZtd19ib192bV9m
YXVsdChzdHJ1Y3Qgdm1fZmF1bHQgKnZtZikKPgo+ICAgICAgICAgICAgICAgICBwYWdlX29mZnNl
dCA9IHZtZi0+cGdvZmYgLQo+ICAgICAgICAgICAgICAgICAgICAgICAgIGRybV92bWFfbm9kZV9z
dGFydCgmYm8tPmJhc2Uudm1hX25vZGUpOwo+IC0gICAgICAgICAgICAgICBpZiAocGFnZV9vZmZz
ZXQgPj0gYm8tPm51bV9wYWdlcyB8fAo+ICsgICAgICAgICAgICAgICBpZiAocGFnZV9vZmZzZXQg
Pj0gYm8tPm1lbS5udW1fcGFnZXMgfHwKPiAgICAgICAgICAgICAgICAgICAgIHZtd19yZXNvdXJj
ZXNfY2xlYW4odmJvLCBwYWdlX29mZnNldCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcGFnZV9vZmZzZXQgKyBQQUdFX1NJWkUsCj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZhbGxvd2VkX3ByZWZhdWx0KSkgewo+IEBAIC01MzEsNyAr
NTMxLDcgQEAgdm1fZmF1bHRfdCB2bXdfYm9fdm1faHVnZV9mYXVsdChzdHJ1Y3Qgdm1fZmF1bHQg
KnZtZiwKPgo+ICAgICAgICAgICAgICAgICBwYWdlX29mZnNldCA9IHZtZi0+cGdvZmYgLQo+ICAg
ICAgICAgICAgICAgICAgICAgICAgIGRybV92bWFfbm9kZV9zdGFydCgmYm8tPmJhc2Uudm1hX25v
ZGUpOwo+IC0gICAgICAgICAgICAgICBpZiAocGFnZV9vZmZzZXQgPj0gYm8tPm51bV9wYWdlcyB8
fAo+ICsgICAgICAgICAgICAgICBpZiAocGFnZV9vZmZzZXQgPj0gYm8tPm1lbS5udW1fcGFnZXMg
fHwKPiAgICAgICAgICAgICAgICAgICAgIHZtd19yZXNvdXJjZXNfY2xlYW4odmJvLCBwYWdlX29m
ZnNldCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZV9vZmZz
ZXQgKyBQQUdFX1NJWkUsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICZhbGxvd2VkX3ByZWZhdWx0KSkgewo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdm13
Z2Z4L3Ztd2dmeF9yZXNvdXJjZS5jIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfcmVz
b3VyY2UuYwo+IGluZGV4IDAwYjUzNTgzMWE3YS4uODRlZDgzNzZjZDgxIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3Jlc291cmNlLmMKPiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9yZXNvdXJjZS5jCj4gQEAgLTM2MCw3ICszNjAsNyBAQCBz
dGF0aWMgaW50IHZtd19yZXNvdXJjZV9idWZfYWxsb2Moc3RydWN0IHZtd19yZXNvdXJjZSAqcmVz
LAo+ICAgICAgICAgaW50IHJldDsKPgo+ICAgICAgICAgaWYgKGxpa2VseShyZXMtPmJhY2t1cCkp
IHsKPiAtICAgICAgICAgICAgICAgQlVHX09OKHJlcy0+YmFja3VwLT5iYXNlLm51bV9wYWdlcyAq
IFBBR0VfU0laRSA8IHNpemUpOwo+ICsgICAgICAgICAgICAgICBCVUdfT04ocmVzLT5iYWNrdXAt
PmJhc2Uuc2l6ZSA8IHNpemUpOwo+ICAgICAgICAgICAgICAgICByZXR1cm4gMDsKPiAgICAgICAg
IH0KPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9zaGFkZXIu
YyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3NoYWRlci5jCj4gaW5kZXggZjMyOGFh
NTgzOWEyLi5jNzIyMGE3NzBiYzUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dm
eC92bXdnZnhfc2hhZGVyLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9z
aGFkZXIuYwo+IEBAIC04NTYsOCArODU2LDcgQEAgc3RhdGljIGludCB2bXdfc2hhZGVyX2RlZmlu
ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwKPiAg
ICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ICAgICAgICAgICAgICAgICB9Cj4K
PiAtICAgICAgICAgICAgICAgaWYgKCh1NjQpYnVmZmVyLT5iYXNlLm51bV9wYWdlcyAqIFBBR0Vf
U0laRSA8Cj4gLSAgICAgICAgICAgICAgICAgICAodTY0KXNpemUgKyAodTY0KW9mZnNldCkgewo+
ICsgICAgICAgICAgICAgICBpZiAoKHU2NClidWZmZXItPmJhc2Uuc2l6ZSA8ICh1NjQpc2l6ZSAr
ICh1NjQpb2Zmc2V0KSB7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgVk1XX0RFQlVHX1VTRVIo
IklsbGVnYWwgYnVmZmVyLSBvciBzaGFkZXIgc2l6ZS5cbiIpOwo+ICAgICAgICAgICAgICAgICAg
ICAgICAgIHJldCA9IC1FSU5WQUw7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgZ290byBvdXRf
YmFkX2FyZzsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfc3Rk
dS5jIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfc3RkdS5jCj4gaW5kZXggNWIwNGVj
MDQ3ZWYzLi4zNjJhMTI3YjI0YmIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dm
eC92bXdnZnhfc3RkdS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfc3Rk
dS5jCj4gQEAgLTUxMiw3ICs1MTIsNyBAQCBzdGF0aWMgdm9pZCB2bXdfc3RkdV9ib19maWZvX2Nv
bW1pdChzdHJ1Y3Qgdm13X2ttc19kaXJ0eSAqZGlydHkpCj4gICAgICAgICBjbWQtPmJvZHkuaG9z
dC5taXBtYXAgPSAwOwo+ICAgICAgICAgY21kLT5ib2R5LnRyYW5zZmVyID0gZGRpcnR5LT50cmFu
c2ZlcjsKPiAgICAgICAgIHN1ZmZpeC0+c3VmZml4U2l6ZSA9IHNpemVvZigqc3VmZml4KTsKPiAt
ICAgICAgIHN1ZmZpeC0+bWF4aW11bU9mZnNldCA9IGRkaXJ0eS0+YnVmLT5iYXNlLm51bV9wYWdl
cyAqIFBBR0VfU0laRTsKPiArICAgICAgIHN1ZmZpeC0+bWF4aW11bU9mZnNldCA9IGRkaXJ0eS0+
YnVmLT5iYXNlLnNpemU7Cj4KPiAgICAgICAgIGlmIChkZGlydHktPnRyYW5zZmVyID09IFNWR0Ez
RF9XUklURV9IT1NUX1ZSQU0pIHsKPiAgICAgICAgICAgICAgICAgYmxpdF9zaXplICs9IHNpemVv
ZihzdHJ1Y3Qgdm13X3N0ZHVfdXBkYXRlKTsKPiBAQCAtMTIzOCw3ICsxMjM4LDcgQEAgc3RhdGlj
IHVpbnQzMl90IHZtd19zdGR1X2JvX3BvcHVsYXRlX3VwZGF0ZShzdHJ1Y3Qgdm13X2R1X3VwZGF0
ZV9wbGFuZSAgKnVwZGF0ZSwKPiAgICAgICAgIHZmYmJvID0gY29udGFpbmVyX29mKHVwZGF0ZS0+
dmZiLCB0eXBlb2YoKnZmYmJvKSwgYmFzZSk7Cj4KPiAgICAgICAgIHN1ZmZpeC0+c3VmZml4U2l6
ZSA9IHNpemVvZigqc3VmZml4KTsKPiAtICAgICAgIHN1ZmZpeC0+bWF4aW11bU9mZnNldCA9IHZm
YmJvLT5idWZmZXItPmJhc2UubnVtX3BhZ2VzICogUEFHRV9TSVpFOwo+ICsgICAgICAgc3VmZml4
LT5tYXhpbXVtT2Zmc2V0ID0gdmZiYm8tPmJ1ZmZlci0+YmFzZS5zaXplOwo+Cj4gICAgICAgICB2
bXdfc3RkdV9wb3B1bGF0ZV91cGRhdGUoJnN1ZmZpeFsxXSwgc3RkdS0+YmFzZS51bml0LCBiYi0+
eDEsIGJiLT54MiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYi0+eTEsIGJi
LT55Mik7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3N1cmZh
Y2UuYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3N1cmZhY2UuYwo+IGluZGV4IDM5
MTRiZmVlMDUzMy4uNmEwMmJhZDg0MTZiIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS92
bXdnZngvdm13Z2Z4X3N1cmZhY2UuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13
Z2Z4X3N1cmZhY2UuYwo+IEBAIC0xNTUwLDggKzE1NTAsNyBAQCB2bXdfZ2Jfc3VyZmFjZV9kZWZp
bmVfaW50ZXJuYWwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZyZXMtPmJhY2t1cCwKPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZ1c2VyX3NyZi0+YmFja3VwX2Jhc2UpOwo+ICAgICAgICAg
ICAgICAgICBpZiAocmV0ID09IDApIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVz
LT5iYWNrdXAtPmJhc2UubnVtX3BhZ2VzICogUEFHRV9TSVpFIDwKPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcmVzLT5iYWNrdXBfc2l6ZSkgewo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGlmIChyZXMtPmJhY2t1cC0+YmFzZS5zaXplIDwgcmVzLT5iYWNrdXBfc2l6ZSkgewo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgVk1XX0RFQlVHX1VTRVIoIlN1cmZhY2UgYmFja3Vw
IGJ1ZmZlciB0b28gc21hbGwuXG4iKTsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHZtd19ib191bnJlZmVyZW5jZSgmcmVzLT5iYWNrdXApOwo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcmV0ID0gLUVJTlZBTDsKPiBAQCAtMTYxNCw3ICsxNjEzLDcgQEAgdm13X2di
X3N1cmZhY2VfZGVmaW5lX2ludGVybmFsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gICAgICAg
ICBpZiAocmVzLT5iYWNrdXApIHsKPiAgICAgICAgICAgICAgICAgcmVwLT5idWZmZXJfbWFwX2hh
bmRsZSA9Cj4gICAgICAgICAgICAgICAgICAgICAgICAgZHJtX3ZtYV9ub2RlX29mZnNldF9hZGRy
KCZyZXMtPmJhY2t1cC0+YmFzZS5iYXNlLnZtYV9ub2RlKTsKPiAtICAgICAgICAgICAgICAgcmVw
LT5idWZmZXJfc2l6ZSA9IHJlcy0+YmFja3VwLT5iYXNlLm51bV9wYWdlcyAqIFBBR0VfU0laRTsK
PiArICAgICAgICAgICAgICAgcmVwLT5idWZmZXJfc2l6ZSA9IHJlcy0+YmFja3VwLT5iYXNlLnNp
emU7Cj4gICAgICAgICAgICAgICAgIHJlcC0+YnVmZmVyX2hhbmRsZSA9IGJhY2t1cF9oYW5kbGU7
Cj4gICAgICAgICB9IGVsc2Ugewo+ICAgICAgICAgICAgICAgICByZXAtPmJ1ZmZlcl9tYXBfaGFu
ZGxlID0gMDsKPiBAQCAtMTY5Miw3ICsxNjkxLDcgQEAgdm13X2diX3N1cmZhY2VfcmVmZXJlbmNl
X2ludGVybmFsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gICAgICAgICByZXAtPmNyZXAuYnVm
ZmVyX2hhbmRsZSA9IGJhY2t1cF9oYW5kbGU7Cj4gICAgICAgICByZXAtPmNyZXAuYnVmZmVyX21h
cF9oYW5kbGUgPQo+ICAgICAgICAgICAgICAgICBkcm1fdm1hX25vZGVfb2Zmc2V0X2FkZHIoJnNy
Zi0+cmVzLmJhY2t1cC0+YmFzZS5iYXNlLnZtYV9ub2RlKTsKPiAtICAgICAgIHJlcC0+Y3JlcC5i
dWZmZXJfc2l6ZSA9IHNyZi0+cmVzLmJhY2t1cC0+YmFzZS5udW1fcGFnZXMgKiBQQUdFX1NJWkU7
Cj4gKyAgICAgICByZXAtPmNyZXAuYnVmZmVyX3NpemUgPSBzcmYtPnJlcy5iYWNrdXAtPmJhc2Uu
c2l6ZTsKPgo+ICAgICAgICAgcmVwLT5jcmVxLnZlcnNpb24gPSBkcm1fdm13X2diX3N1cmZhY2Vf
djE7Cj4gICAgICAgICByZXAtPmNyZXEuc3ZnYTNkX2ZsYWdzX3VwcGVyXzMyX2JpdHMgPQo+IGRp
ZmYgLS1naXQgYS9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2FwaS5oIGIvaW5jbHVkZS9kcm0vdHRt
L3R0bV9ib19hcGkuaAo+IGluZGV4IDc5YjkzNjdlMGZmZC4uMDM2NzVjZTdhYjNjIDEwMDY0NAo+
IC0tLSBhL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fYXBpLmgKPiArKysgYi9pbmNsdWRlL2RybS90
dG0vdHRtX2JvX2FwaS5oCj4gQEAgLTEyNSw3ICsxMjUsNyBAQCBzdHJ1Y3QgdHRtX2J1ZmZlcl9v
YmplY3Qgewo+ICAgICAgICAgc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXY7Cj4gICAgICAgICBl
bnVtIHR0bV9ib190eXBlIHR5cGU7Cj4gICAgICAgICB2b2lkICgqZGVzdHJveSkgKHN0cnVjdCB0
dG1fYnVmZmVyX29iamVjdCAqKTsKPiAtICAgICAgIHVuc2lnbmVkIGxvbmcgbnVtX3BhZ2VzOwo+
ICsgICAgICAgdWludDY0X3Qgc2l6ZTsKPiAgICAgICAgIHNpemVfdCBhY2Nfc2l6ZTsKPgo+ICAg
ICAgICAgLyoqCj4gQEAgLTM5Nyw3ICszOTcsNyBAQCBzaXplX3QgdHRtX2JvX2RtYV9hY2Nfc2l6
ZShzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldiwKPgo+ICBpbnQgdHRtX2JvX2luaXRfcmVzZXJ2
ZWQoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
IHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCj4gLSAgICAgICAgICAgICAgICAgICAgICAg
IHVuc2lnbmVkIGxvbmcgc2l6ZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgdWludDY0X3Qg
c2l6ZSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bSB0dG1fYm9fdHlwZSB0eXBlLAo+
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX3BsYWNlbWVudCAqcGxhY2VtZW50
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCBwYWdlX2FsaWdubWVudCwKPiBA
QCAtNDQ1LDcgKzQ0NSw3IEBAIGludCB0dG1fYm9faW5pdF9yZXNlcnZlZChzdHJ1Y3QgdHRtX2Jv
X2RldmljZSAqYmRldiwKPiAgICogLUVSRVNUQVJUU1lTOiBJbnRlcnJ1cHRlZCBieSBzaWduYWwg
d2hpbGUgc2xlZXBpbmcgd2FpdGluZyBmb3IgcmVzb3VyY2VzLgo+ICAgKi8KPiAgaW50IHR0bV9i
b19pbml0KHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LCBzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmpl
Y3QgKmJvLAo+IC0gICAgICAgICAgICAgICB1bnNpZ25lZCBsb25nIHNpemUsIGVudW0gdHRtX2Jv
X3R5cGUgdHlwZSwKPiArICAgICAgICAgICAgICAgdWludDY0X3Qgc2l6ZSwgZW51bSB0dG1fYm9f
dHlwZSB0eXBlLAo+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX3BsYWNlbWVudCAqcGxhY2Vt
ZW50LAo+ICAgICAgICAgICAgICAgICB1aW50MzJfdCBwYWdlX2FsaWdubWVudCwgYm9vbCBpbnRl
cnJ1YnRpYmxlLCBzaXplX3QgYWNjX3NpemUsCj4gICAgICAgICAgICAgICAgIHN0cnVjdCBzZ190
YWJsZSAqc2csIHN0cnVjdCBkbWFfcmVzdiAqcmVzdiwKPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9k
cm0vdHRtL3R0bV9yZXNvdXJjZS5oIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV9yZXNvdXJjZS5oCj4g
aW5kZXggZjQ4YTcwZDM5YWM1Li5hZDZkYTk5NzcwZTkgMTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9k
cm0vdHRtL3R0bV9yZXNvdXJjZS5oCj4gKysrIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV9yZXNvdXJj
ZS5oCj4gQEAgLTE3MSw3ICsxNzEsNiBAQCBzdHJ1Y3QgdHRtX2J1c19wbGFjZW1lbnQgewo+ICBz
dHJ1Y3QgdHRtX3Jlc291cmNlIHsKPiAgICAgICAgIHZvaWQgKm1tX25vZGU7Cj4gICAgICAgICB1
bnNpZ25lZCBsb25nIHN0YXJ0Owo+IC0gICAgICAgdW5zaWduZWQgbG9uZyBzaXplOwo+ICAgICAg
ICAgdW5zaWduZWQgbG9uZyBudW1fcGFnZXM7Cj4gICAgICAgICB1aW50MzJfdCBwYWdlX2FsaWdu
bWVudDsKPiAgICAgICAgIHVpbnQzMl90IG1lbV90eXBlOwo+IC0tCj4gMi4yNS4xCj4KPiBfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+IGRyaS1kZXZlbCBt
YWlsaW5nIGxpc3QKPiBkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwKCgoKLS0gCkRh
bmllbCBWZXR0ZXIKU29mdHdhcmUgRW5naW5lZXIsIEludGVsIENvcnBvcmF0aW9uCmh0dHA6Ly9i
bG9nLmZmd2xsLmNoCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9y
ZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZl
bAo=
