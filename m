Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 230D8FF905
	for <lists+dri-devel@lfdr.de>; Sun, 17 Nov 2019 12:45:08 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 289066E2C8;
	Sun, 17 Nov 2019 11:44:32 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7630B6E1D7
 for <dri-devel@lists.freedesktop.org>; Sun, 17 Nov 2019 02:41:51 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1]) (Authenticated sender: sre)
 with ESMTPSA id 040BF28F7A6
Received: by earth.universe (Postfix, from userid 1000)
 id D55523C0C87; Sun, 17 Nov 2019 03:41:39 +0100 (CET)
From: Sebastian Reichel <sebastian.reichel@collabora.com>
To: Sebastian Reichel <sre@kernel.org>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>
Subject: [RFCv1 15/42] drm/omap: panel-dsi-cm: drop hardcoded VC
Date: Sun, 17 Nov 2019 03:40:01 +0100
Message-Id: <20191117024028.2233-16-sebastian.reichel@collabora.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191117024028.2233-1-sebastian.reichel@collabora.com>
References: <20191117024028.2233-1-sebastian.reichel@collabora.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Sun, 17 Nov 2019 11:44:18 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: kernel@collabora.com, Tony Lindgren <tony@atomide.com>,
 "H. Nikolaus Schaller" <hns@goldelico.com>, Merlijn Wajer <merlijn@wizzup.org>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 dri-devel@lists.freedesktop.org, linux-omap@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VXNlIGRzaS0+Y2hhbm5lbCBldmVyeXdoZXJlLCB3aGljaCBvcmlnaW5hdGVzIGZyb20gRFQuCgpT
aWduZWQtb2ZmLWJ5OiBTZWJhc3RpYW4gUmVpY2hlbCA8c3JlQGtlcm5lbC5vcmc+Ci0tLQogLi4u
L2dwdS9kcm0vb21hcGRybS9kaXNwbGF5cy9wYW5lbC1kc2ktY20uYyAgIHwgMjAgKysrKysrKy0t
LS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDcgaW5zZXJ0aW9ucygrKSwgMTMgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZGlzcGxheXMvcGFuZWwt
ZHNpLWNtLmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kaXNwbGF5cy9wYW5lbC1kc2ktY20u
YwppbmRleCBkZGM2ZGQ2NzFjZDAuLjQyNmM2NjBhZjI2NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL29tYXBkcm0vZGlzcGxheXMvcGFuZWwtZHNpLWNtLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL29tYXBkcm0vZGlzcGxheXMvcGFuZWwtZHNpLWNtLmMKQEAgLTI3LDkgKzI3LDYgQEAKIAog
I2luY2x1ZGUgIi4uL2Rzcy9vbWFwZHNzLmgiCiAKLS8qIERTSSBWaXJ0dWFsIGNoYW5uZWwuIEhh
cmRjb2RlZCBmb3Igbm93LiAqLwotI2RlZmluZSBUQ0ggMAotCiAjZGVmaW5lIERDU19SRUFEX05V
TV9FUlJPUlMJMHgwNQogI2RlZmluZSBEQ1NfQlJJR0hUTkVTUwkJMHg1MQogI2RlZmluZSBEQ1Nf
Q1RSTF9ESVNQTEFZCTB4NTMKQEAgLTczLDcgKzcwLDYgQEAgc3RydWN0IHBhbmVsX2Rydl9kYXRh
IHsKIAlib29sIHRlX2VuYWJsZWQ7CiAKIAlhdG9taWNfdCBkb191cGRhdGU7Ci0JaW50IGNoYW5u
ZWw7CiAKIAlzdHJ1Y3QgZGVsYXllZF93b3JrIHRlX3RpbWVvdXRfd29yazsKIApAQCAtMjc0LDcg
KzI3MCw3IEBAIHN0YXRpYyBpbnQgZHNpY21fZXhpdF91bHBzKHN0cnVjdCBwYW5lbF9kcnZfZGF0
YSAqZGRhdGEpCiAJCXJldHVybiAwOwogCiAJc3JjLT5vcHMtPmVuYWJsZShzcmMpOwotCXNyYy0+
b3BzLT5kc2kuZW5hYmxlX2hzKHNyYywgZGRhdGEtPmNoYW5uZWwsIHRydWUpOworCXNyYy0+b3Bz
LT5kc2kuZW5hYmxlX2hzKHNyYywgZGRhdGEtPmRzaS0+Y2hhbm5lbCwgdHJ1ZSk7CiAKIAlyID0g
X2RzaWNtX2VuYWJsZV90ZShkZGF0YSwgdHJ1ZSk7CiAJaWYgKHIpIHsKQEAgLTU5MSw3ICs1ODcs
NyBAQCBzdGF0aWMgaW50IGRzaWNtX3Bvd2VyX29uKHN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRh
dGEpCiAKIAlkc2ljbV9od19yZXNldChkZGF0YSk7CiAKLQlzcmMtPm9wcy0+ZHNpLmVuYWJsZV9o
cyhzcmMsIGRkYXRhLT5jaGFubmVsLCBmYWxzZSk7CisJc3JjLT5vcHMtPmRzaS5lbmFibGVfaHMo
c3JjLCBkZGF0YS0+ZHNpLT5jaGFubmVsLCBmYWxzZSk7CiAKIAlyID0gZHNpY21fc2xlZXBfb3V0
KGRkYXRhKTsKIAlpZiAocikKQEAgLTYyMiw3ICs2MTgsNyBAQCBzdGF0aWMgaW50IGRzaWNtX3Bv
d2VyX29uKHN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEpCiAJaWYgKHIpCiAJCWdvdG8gZXJy
OwogCi0JciA9IHNyYy0+b3BzLT5kc2kuZW5hYmxlX3ZpZGVvX291dHB1dChzcmMsIGRkYXRhLT5j
aGFubmVsKTsKKwlyID0gc3JjLT5vcHMtPmRzaS5lbmFibGVfdmlkZW9fb3V0cHV0KHNyYywgZGRh
dGEtPmRzaS0+Y2hhbm5lbCk7CiAJaWYgKHIpCiAJCWdvdG8gZXJyOwogCkBAIC02MzQsNyArNjMw
LDcgQEAgc3RhdGljIGludCBkc2ljbV9wb3dlcl9vbihzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEgKmRk
YXRhKQogCQlkZGF0YS0+aW50cm9fcHJpbnRlZCA9IHRydWU7CiAJfQogCi0Jc3JjLT5vcHMtPmRz
aS5lbmFibGVfaHMoc3JjLCBkZGF0YS0+Y2hhbm5lbCwgdHJ1ZSk7CisJc3JjLT5vcHMtPmRzaS5l
bmFibGVfaHMoc3JjLCBkZGF0YS0+ZHNpLT5jaGFubmVsLCB0cnVlKTsKIAogCXJldHVybiAwOwog
ZXJyOgpAQCAtNjU4LDcgKzY1NCw3IEBAIHN0YXRpYyB2b2lkIGRzaWNtX3Bvd2VyX29mZihzdHJ1
Y3QgcGFuZWxfZHJ2X2RhdGEgKmRkYXRhKQogCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKnNyYyA9
IGRkYXRhLT5zcmM7CiAJaW50IHI7CiAKLQlzcmMtPm9wcy0+ZHNpLmRpc2FibGVfdmlkZW9fb3V0
cHV0KHNyYywgZGRhdGEtPmNoYW5uZWwpOworCXNyYy0+b3BzLT5kc2kuZGlzYWJsZV92aWRlb19v
dXRwdXQoc3JjLCBkZGF0YS0+ZHNpLT5jaGFubmVsKTsKIAogCXIgPSBtaXBpX2RzaV9kY3Nfc2V0
X2Rpc3BsYXlfb2ZmKGRkYXRhLT5kc2kpOwogCWlmICghcikKQEAgLTc3Nyw3ICs3NzMsNyBAQCBz
dGF0aWMgaXJxcmV0dXJuX3QgZHNpY21fdGVfaXNyKGludCBpcnEsIHZvaWQgKmRhdGEpCiAJaWYg
KG9sZCkgewogCQljYW5jZWxfZGVsYXllZF93b3JrKCZkZGF0YS0+dGVfdGltZW91dF93b3JrKTsK
IAotCQlyID0gc3JjLT5vcHMtPmRzaS51cGRhdGUoc3JjLCBkZGF0YS0+Y2hhbm5lbCwgZHNpY21f
ZnJhbWVkb25lX2NiLAorCQlyID0gc3JjLT5vcHMtPmRzaS51cGRhdGUoc3JjLCBkZGF0YS0+ZHNp
LT5jaGFubmVsLCBkc2ljbV9mcmFtZWRvbmVfY2IsCiAJCQkJZGRhdGEpOwogCQlpZiAocikKIAkJ
CWdvdG8gZXJyOwpAQCAtODM0LDcgKzgzMCw3IEBAIHN0YXRpYyBpbnQgZHNpY21fdXBkYXRlKHN0
cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwKIAkJCQltc2Vjc190b19qaWZmaWVzKDI1MCkp
OwogCQlhdG9taWNfc2V0KCZkZGF0YS0+ZG9fdXBkYXRlLCAxKTsKIAl9IGVsc2UgewotCQlyID0g
c3JjLT5vcHMtPmRzaS51cGRhdGUoc3JjLCBkZGF0YS0+Y2hhbm5lbCwgZHNpY21fZnJhbWVkb25l
X2NiLAorCQlyID0gc3JjLT5vcHMtPmRzaS51cGRhdGUoc3JjLCBkZGF0YS0+ZHNpLT5jaGFubmVs
LCBkc2ljbV9mcmFtZWRvbmVfY2IsCiAJCQkJZGRhdGEpOwogCQlpZiAocikKIAkJCWdvdG8gZXJy
OwpAQCAtMTExMCw4ICsxMTA2LDYgQEAgc3RhdGljIGludCBkc2ljbV9wcm9iZV9vZihzdHJ1Y3Qg
bWlwaV9kc2lfZGV2aWNlICpkc2kpCiAJc3RydWN0IGRpc3BsYXlfdGltaW5nIHRpbWluZzsKIAlp
bnQgZXJyOwogCi0JZGRhdGEtPmNoYW5uZWwgPSBUQ0g7Ci0KIAlkZGF0YS0+cmVzZXRfZ3BpbyA9
IGRldm1fZ3Bpb2RfZ2V0KCZkc2ktPmRldiwgInJlc2V0IiwgR1BJT0RfT1VUX0xPVyk7CiAJaWYg
KElTX0VSUihkZGF0YS0+cmVzZXRfZ3BpbykpIHsKIAkJZXJyID0gUFRSX0VSUihkZGF0YS0+cmVz
ZXRfZ3Bpbyk7Ci0tIAoyLjI0LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2RyaS1kZXZlbA==
