Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id F05FFEF1F9
	for <lists+dri-devel@lfdr.de>; Tue,  5 Nov 2019 01:30:58 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 464A56E8CA;
	Tue,  5 Nov 2019 00:30:56 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from us-smtp-delivery-1.mimecast.com (us-smtp-1.mimecast.com
 [205.139.110.61])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 99B4A6E8C8
 for <dri-devel@lists.freedesktop.org>; Tue,  5 Nov 2019 00:30:54 +0000 (UTC)
Received: from mail-qk1-f200.google.com (mail-qk1-f200.google.com
 [209.85.222.200]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-224-TIhL1dj7NoupZ8MNLRnqgQ-1; Mon, 04 Nov 2019 19:30:51 -0500
Received: by mail-qk1-f200.google.com with SMTP id s3so19530542qkd.6
 for <dri-devel@lists.freedesktop.org>; Mon, 04 Nov 2019 16:30:51 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:message-id:subject:from:to:cc:date:in-reply-to
 :references:organization:user-agent:mime-version
 :content-transfer-encoding;
 bh=I376zFxBFUUFc1PgCMQpG6UwMe+ztPn9VKI7TgxoYRY=;
 b=lQh9VygvCDjIc/Rr3uIkiC7hBRZKhEpCmVy0QkpvnWMFos0+W0LWKQ7rCtEMpHLMOM
 D8Z6EzQvy3E80NXnywcTdCzqDiWdtrBsVhvG0iZYsPoU6UARa5C+QLDxrVvJ8ypB62xZ
 S1IqVGYzg0hkscjd/xJZb/Yjz6FhDKdB5xdwC8BHI7K6psGWzg8WkUCxAI71wR/8LJJH
 Fy1spzR3R5suCn1Djgk8Y08t//4umNbeezavuwN3tukDe6pYh3p6v4WDRjeB4cdOwaxc
 YDRSImQaQHbOr03uqsPwXbTQSFe6jMMUajPvoRkSV1AtfLmaoylCjHW0mqCE8U0Fl0z7
 Uwag==
X-Gm-Message-State: APjAAAXJgdVFu1a7cCs5jJVR11+7MnSRtqSx4ra41qkeRgNtlNM9ltO5
 ssNiXbEDo3Pkhwic10ZWKbhFPugDtN9LaaZo9wxeW1Z5SDvPGZiVi8/zB0VFHormWM0g4Sw+ck+
 pIxZ6lv6NR3JuvW4O2yfgEti7YfhK
X-Received: by 2002:ac8:2fba:: with SMTP id l55mr15569989qta.167.1572913851058; 
 Mon, 04 Nov 2019 16:30:51 -0800 (PST)
X-Google-Smtp-Source: APXvYqwZhsH2x4fFTIUjgtHSfxDSzszHSXjrVDSgfmoPWMnxufnPdXIVYyz8sPds4ZXOF3/j+UMEXg==
X-Received: by 2002:ac8:2fba:: with SMTP id l55mr15569948qta.167.1572913850624; 
 Mon, 04 Nov 2019 16:30:50 -0800 (PST)
Received: from dhcp-10-20-1-11.bss.redhat.com ([144.121.20.162])
 by smtp.gmail.com with ESMTPSA id o3sm12436532qta.3.2019.11.04.16.30.49
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 04 Nov 2019 16:30:49 -0800 (PST)
Message-ID: <e63d0c9cf8d3b10cf37b4bd672499f5380c48b64.camel@redhat.com>
Subject: Re: [PATCH 11/13] drm/amd/display: MST DSC compute fair share
From: Lyude Paul <lyude@redhat.com>
To: mikita.lipski@amd.com, amd-gfx@lists.freedesktop.org
Date: Mon, 04 Nov 2019 19:30:48 -0500
In-Reply-To: <20191030192431.5798-12-mikita.lipski@amd.com>
References: <20191030192431.5798-1-mikita.lipski@amd.com>
 <20191030192431.5798-12-mikita.lipski@amd.com>
Organization: Red Hat
User-Agent: Evolution 3.32.4 (3.32.4-1.fc30)
MIME-Version: 1.0
X-MC-Unique: TIhL1dj7NoupZ8MNLRnqgQ-1
X-Mimecast-Spam-Score: 0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=redhat.com; 
 s=mimecast20190719; t=1572913853;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=B+gu4aPlkUcnSGLrHDWlCvLafWb7ManJAul9SdFb0d0=;
 b=RxhgKCbxNUnRMW0hrhM97ev5rL3070QKU1G6iyFregWtYERTW6PShP8+8V4kqzWWnnOO4a
 dkmzAaY07zALQMDOzkueGgh7Y6KoUCEckrEBGx4p8wt1FuW+CMOUJnbB1eHuOv4B0w0vZ2
 f2czNKiiWC3bgaF0B4TIEs4CZT+MKUg=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Francis <David.Francis@amd.com>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U286IG9uZSBjb21tZW50IGRvd24gYmVsb3c6CgpPbiBXZWQsIDIwMTktMTAtMzAgYXQgMTU6MjQg
LTA0MDAsIG1pa2l0YS5saXBza2lAYW1kLmNvbSB3cm90ZToKPiBGcm9tOiBEYXZpZCBGcmFuY2lz
IDxEYXZpZC5GcmFuY2lzQGFtZC5jb20+Cj4gCj4gSWYgdGhlcmUgaXMgbGltaXRlZCBsaW5rIGJh
bmR3aWR0aCBvbiBhIE1TVCBuZXR3b3JrLAo+IGl0IG11c3QgYmUgZGl2aWRlZCBmYWlybHkgYmV0
d2VlbiB0aGUgc3RyZWFtcyBvbiB0aGF0IG5ldHdvcmsKPiAKPiBJbXBsZW1lbnQgYW4gYWxnb3Jp
dGhtIHRvIGRldGVybWluZSB0aGUgY29ycmVjdCBEU0MgY29uZmlnCj4gZm9yIGVhY2ggc3RyZWFt
Cj4gCj4gVGhlIGFsZ29yaXRobToKPiBUaGlzCj4gICAgICBbICAgICAgICAgICAgICAgICAgIF0g
ICAgICAgICAgKCApCj4gcmVwcmVzZW50cyB0aGUgcmFuZ2Ugb2YgYmFuZHdpZHRocyBwb3NzaWJs
ZSBmb3IgYSBnaXZlbiBzdHJlYW0uCj4gVGhlIFtdIGFyZWEgcmVwcmVzZW50cyB0aGUgcmFuZ2Ug
b2YgRFNDIGNvbmZpZ3MsIGFuZCB0aGUgKCkKPiByZXByZXNlbnRzIG5vIERTQy4gVGhlIGJhbmR3
aWR0aCB1c2VkIGluY3JlYXNlcyBmcm9tIGxlZnQgdG8gcmlnaHQuCj4gCj4gRmlyc3QsIHRyeSBk
aXNhYmxpbmcgRFNDIG9uIGFsbCBzdHJlYW1zCj4gICAgICBbICAgICAgICAgICAgICAgICAgXSAg
ICAgICAgICAofCkKPiAgICAgIFsgICAgICAgICAgICAgICAgICAgICBdICAgICAgICAgICAgKHwp
Cj4gQ2hlY2sgdGhpcyBhZ2FpbnN0IHRoZSBiYW5kd2lkdGggbGltaXRzIG9mIHRoZSBsaW5rIGFu
ZCBlYWNoIGJyYW5jaAo+IChpbmNsdWRpbmcgZWFjaCBlbmRwb2ludCkuIElmIGl0IHBhc3Nlcywg
dGhlIGpvYiBpcyBkb25lCj4gCj4gU2Vjb25kLCB0cnkgbWF4aW11bSBEU0MgY29tcHJlc3Npb24g
b24gYWxsIHN0cmVhbXMKPiB0aGF0IHN1cHBvcnQgRFNDCj4gICAgICBbfCAgICAgICAgIF0gICAg
ICAgICggKQo+ICAgICAgW3wgICAgICAgICAgICAgICAgXSAgICAgICAgICggKQo+IElmIHRoaXMg
ZG9lcyBub3QgcGFzcywgdGhlbiBlbmFibGluZyB0aGlzIGNvbWJpbmF0aW9uIG9mIHN0cmVhbXMK
PiBpcyBpbXBvc3NpYmxlCj4gCj4gT3RoZXJ3aXNlLCBkaXZpZGUgdGhlIHJlbWFpbmluZyBiYW5k
d2lkdGggZXZlbmx5IGFtb25nc3QgdGhlIHN0cmVhbXMKPiAgICAgIFsgICAgICAgIHwgIF0gICAg
ICAgICAoICkKPiAgICAgIFsgICAgICAgIHwgICAgICBdICAgICAgICAoICkKPiAKPiBJZiBvbmUg
b3IgbW9yZSBvZiB0aGUgc3RyZWFtcyByZWFjaCBtaW5pbXVtIGNvbXByZXNzaW9uLCBldmVubHkK
PiBkaXZpZGUgdGhlIHJlYW1pbmluZyBiYW5kd2lkdGggYW1vbmdzdCB0aGUgcmVtYWluaW5nIHN0
cmVhbXMKPiAgICAgIFsgICAgfF0gKCApCj4gICAgICBbICAgICAgIHxdICAgKCApCj4gICAgICBb
ICAgICAgICAgICAgICAgICB8ICAgXSAgICAgICAgICAgICAgICggKQo+ICAgICAgWyAgICAgICAg
ICAgICAgICAgfCAgICAgIF0gICAgICAgICAgICAgICAgICAoICkKPiAKPiBJZiBhbGwgc3RyZWFt
cyBjYW4gcmVhY2ggbWluaW11bSBjb21wcmVzc2lvbiwgZGlzYWJsZSBjb21wcmVzc2lvbgo+IGdy
ZWVkaWx5Cj4gICAgICBbICAgICAgfF0gICggKQo+ICAgICAgWyAgICAgICAgfF0gICAgKCApCj4g
ICAgICBbICAgICAgICAgICAgICAgICBdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAo
fCkKPiAKPiBQZXJmb3JtIHRoaXMgYWxnb3JpdGhtIG9uIGVhY2ggZnVsbCB1cGRhdGUsIG9uIGVh
Y2ggTVNUIGxpbmsKPiB3aXRoIGF0IGxlYXN0IG9uZSBEU0Mgc3RyZWFtIG9uIGl0Cj4gCj4gQWZ0
ZXIgdGhlIGNvbmZpZ3MgYXJlIGNvbXB1dGVkLCBjYWxsCj4gZGNuMjBfYWRkX2RzY190b19zdHJl
YW1fcmVzb3VyY2Ugb24gZWFjaCBzdHJlYW0gd2l0aCBEU0MgZW5hYmxlZC4KPiBJdCBpcyBvbmx5
IGFmdGVyIGFsbCBzdHJlYW1zIGFyZSBjcmVhdGVkIHRoYXQgd2UgY2FuIGtub3cgd2hpY2gKPiBv
ZiB0aGVtIHdpbGwgbmVlZCBEU0MuCj4gCj4gRG8gYWxsIG9mIHRoaXMgYXQgdGhlIGVuZCBvZiBh
bWRncHUgYXRvbWljIGNoZWNrLiAgSWYgaXQgZmFpbHMsCj4gZmFpbCBjaGVjazsgVGhpcyBjb21i
aW5hdGlvbiBvZiB0aW1pbmdzIGNhbm5vdCBiZSBzdXBwb3J0ZWQuCj4gCj4gUmV2aWV3ZWQtYnk6
IFdlbmppbmcgTGl1IDxXZW5qaW5nLkxpdUBhbWQuY29tPgo+IFNpZ25lZC1vZmYtYnk6IERhdmlk
IEZyYW5jaXMgPERhdmlkLkZyYW5jaXNAYW1kLmNvbT4KPiAtLS0KPiAgLi4uL2dwdS9kcm0vYW1k
L2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jIHwgICA0ICsKPiAgLi4uL2Rpc3BsYXkvYW1k
Z3B1X2RtL2FtZGdwdV9kbV9tc3RfdHlwZXMuYyAgIHwgMzg2ICsrKysrKysrKysrKysrKysrKwo+
ICAuLi4vZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtX21zdF90eXBlcy5oICAgfCAgIDQgKwo+
ICAuLi4vZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIwL2RjbjIwX3Jlc291cmNlLmMgfCAgIDcgKy0K
PiAgLi4uL2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9yZXNvdXJjZS5oIHwgICAxICsK
PiAgNSBmaWxlcyBjaGFuZ2VkLCA0MDAgaW5zZXJ0aW9ucygrKSwgMiBkZWxldGlvbnMoLSkKPiAK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRn
cHVfZG0uYwo+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVf
ZG0uYwo+IGluZGV4IDEzMDllOWNmZGVhMy4uMWJiZGYyOWYzYzdkIDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtLmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jCj4gQEAgLTc3
ODAsNiArNzc4MCwxMCBAQCBzdGF0aWMgaW50IGFtZGdwdV9kbV9hdG9taWNfY2hlY2soc3RydWN0
IGRybV9kZXZpY2UKPiAqZGV2LAo+ICAJCWlmIChyZXQpCj4gIAkJCWdvdG8gZmFpbDsKPiAgCj4g
KyNpZmRlZiBDT05GSUdfRFJNX0FNRF9EQ19EU0NfU1VQUE9SVAo+ICsJCWlmICghY29tcHV0ZV9t
c3RfZHNjX2NvbmZpZ3NfZm9yX3N0YXRlKGRtX3N0YXRlLT5jb250ZXh0KSkKPiArCQkJZ290byBm
YWlsOwo+ICsjZW5kaWYKPiAgCQlpZiAoZGNfdmFsaWRhdGVfZ2xvYmFsX3N0YXRlKGRjLCBkbV9z
dGF0ZS0+Y29udGV4dCwgZmFsc2UpICE9Cj4gRENfT0spIHsKPiAgCQkJcmV0ID0gLUVJTlZBTDsK
PiAgCQkJZ290byBmYWlsOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3Bs
YXkvYW1kZ3B1X2RtL2FtZGdwdV9kbV9tc3RfdHlwZXMuYwo+IGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1fbXN0X3R5cGVzLmMKPiBpbmRleCA4MDRhMDAw
ODJiZWUuLmM1OGNmNDFmMzA4NiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rp
c3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbV9tc3RfdHlwZXMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtX21zdF90eXBlcy5jCj4gQEAgLTM4
LDYgKzM4LDggQEAKPiAgCj4gICNpbmNsdWRlICJpMmNhdXhfaW50ZXJmYWNlLmgiCj4gIAo+ICsj
aW5jbHVkZSAiZGMvZGNuMjAvZGNuMjBfcmVzb3VyY2UuaCIKPiArCj4gIC8qICNkZWZpbmUgVFJB
Q0VfRFBDRCAqLwo+ICAKPiAgI2lmZGVmIFRSQUNFX0RQQ0QKPiBAQCAtNDkxLDMgKzQ5MywzODcg
QEAgdm9pZCBhbWRncHVfZG1faW5pdGlhbGl6ZV9kcF9jb25uZWN0b3Ioc3RydWN0Cj4gYW1kZ3B1
X2Rpc3BsYXlfbWFuYWdlciAqZG0sCj4gIAkJYWNvbm5lY3Rvci0+Y29ubmVjdG9yX2lkKTsKPiAg
fQo+ICAKPiArI2lmZGVmIENPTkZJR19EUk1fQU1EX0RDX0RTQ19TVVBQT1JUCj4gK3N0cnVjdCBk
c2NfbXN0X2ZhaXJuZXNzX3BhcmFtcyB7Cj4gKwlzdHJ1Y3QgZGNfY3J0Y190aW1pbmcgKnRpbWlu
ZzsKPiArCXN0cnVjdCBkY19zaW5rICpzaW5rOwo+ICsJc3RydWN0IGRjX2RzY19id19yYW5nZSBi
d19yYW5nZTsKPiArCWJvb2wgY29tcHJlc3Npb25fcG9zc2libGU7Cj4gKwlzdHJ1Y3QgZHJtX2Rw
X21zdF9wb3J0ICpwb3J0Owo+ICt9Owo+ICsKPiArc3RydWN0IGRzY19tc3RfZmFpcm5lc3NfdmFy
cyB7Cj4gKwlpbnQgcGJuOwo+ICsJYm9vbCBkc2NfZW5hYmxlZDsKPiArCWludCBicHBfeDE2Owo+
ICt9Owo+ICsKPiArc3RhdGljIGJvb2wgcG9ydF9kb3duc3RyZWFtX29mX2JyYW5jaChzdHJ1Y3Qg
ZHJtX2RwX21zdF9wb3J0ICpwb3J0LAo+ICsJCXN0cnVjdCBkcm1fZHBfbXN0X2JyYW5jaCAqYnJh
bmNoKQo+ICt7Cj4gKwl3aGlsZSAocG9ydC0+cGFyZW50KSB7Cj4gKwkJaWYgKHBvcnQtPnBhcmVu
dCA9PSBicmFuY2gpCj4gKwkJCXJldHVybiB0cnVlOwo+ICsKPiArCQlpZiAocG9ydC0+cGFyZW50
LT5wb3J0X3BhcmVudCkKPiArCQkJcG9ydCA9IHBvcnQtPnBhcmVudC0+cG9ydF9wYXJlbnQ7Cj4g
KwkJZWxzZQo+ICsJCQlicmVhazsKPiArCX0KPiArCXJldHVybiBmYWxzZTsKPiArfQo+ICsKPiAr
c3RhdGljIGJvb2wgY2hlY2tfcGJuX2xpbWl0X29uX2JyYW5jaChzdHJ1Y3QgZHJtX2RwX21zdF9i
cmFuY2ggKmJyYW5jaCwKPiArCQlzdHJ1Y3QgZHNjX21zdF9mYWlybmVzc19wYXJhbXMgKnBhcmFt
cywKPiArCQlzdHJ1Y3QgZHNjX21zdF9mYWlybmVzc192YXJzICp2YXJzLCBpbnQgY291bnQpCj4g
K3sKPiArCXN0cnVjdCBkcm1fZHBfbXN0X3BvcnQgKnBvcnQ7Cj4gKwlpbnQgaTsKPiArCWludCBw
Ym5fbGltaXQgPSAwOwo+ICsJaW50IHBibl91c2VkID0gMDsKPiArCj4gKwlsaXN0X2Zvcl9lYWNo
X2VudHJ5KHBvcnQsICZicmFuY2gtPnBvcnRzLCBuZXh0KSB7Cj4gKwkJaWYgKHBvcnQtPm1zdGIp
Cj4gKwkJCWlmICghY2hlY2tfcGJuX2xpbWl0X29uX2JyYW5jaChwb3J0LT5tc3RiLCBwYXJhbXMs
Cj4gdmFycywgY291bnQpKQo+ICsJCQkJcmV0dXJuIGZhbHNlOwo+ICsKPiArCQlpZiAocG9ydC0+
YXZhaWxhYmxlX3BibiA+IDApCj4gKwkJCXBibl9saW1pdCA9IHBvcnQtPmF2YWlsYWJsZV9wYm47
Cj4gKwl9Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKPiArCQlpZiAocG9y
dF9kb3duc3RyZWFtX29mX2JyYW5jaChwYXJhbXNbaV0ucG9ydCwgYnJhbmNoKSkKPiArCQkJcGJu
X3VzZWQgKz0gdmFyc1tpXS5wYm47Cj4gKwl9Cj4gKwo+ICsJaWYgKHBibl91c2VkID4gcGJuX2xp
bWl0KQo+ICsJCXJldHVybiBmYWxzZTsKPiArCj4gKwlyZXR1cm4gdHJ1ZTsKPiArfQo+ICsKClRo
ZSByZXN0IG9mIHRoaXMgbG9va3MgZmluZSwgYnV0IHRoaXMgZnVuY3Rpb24gXiBzaG91bGQgZGVm
aW5pdGVseSBiZSBtb3ZlZAppbnRvIHRoZSBNU1QgaGVscGVycyBhcyB3ZWxsIGVzcGVjaWFsbHkg
c2luY2UgdmVyaWZ5aW5nIFBCTiB2YWx1ZXMgaXMKc29tZXRoaW5nIHdlIG5lZWQgdG8gYWRkIHRv
IHRoZSBNU1QgaGVscGVycyBhbnl3YXkuIFRoZW4gdGhlIGFsZ29yaXRobSBmb3IKY29tcHV0aW5n
ICJmYWlyIHNoYXJlIiBhcyB5b3UgY2FsbCBpdCB3b3VsZCBqdXN0IGxvb2sgbGlrZSB0aGlzIGZy
b20gYSBoaWdoCmxldmVsOgoKY29tcHV0ZV9jb25maWdfd2l0aG91dF9jb21wcmVzc2lvbigpOwpy
ZXQgPSBkcm1fZHBfbXN0X2F0b21pY19jaGVjaygpOwppZiAoIXJldCkKCXJldHVybiByZXQ7Cgpj
b21wdXRlX2NvbmZpZ193aXRoX21heF9jb21wcmVzc2lvbigpOwpyZXQgPSBkcm1fZHBfbXN0X2F0
b21pY19jaGVjaygpOwppZiAocmV0KQoJcmV0dXJuIHJldDsKCm9wdGltaXplX2NvbmZpZygpOwoK
SG93IGRvZXMgdGhhdCBzb3VuZD8KCj4gK3N0YXRpYyBib29sIGNoZWNrX2JhbmR3aWR0aF9saW1p
dHMoc3RydWN0IGRjX2xpbmsgKmRjX2xpbmssCj4gKwkJc3RydWN0IGRzY19tc3RfZmFpcm5lc3Nf
cGFyYW1zICpwYXJhbXMsCj4gKwkJc3RydWN0IGRzY19tc3RfZmFpcm5lc3NfdmFycyAqdmFycywK
PiArCQlpbnQgY291bnQpCj4gK3sKPiArCWludCBsaW5rX3RpbWVzbG90X2xpbWl0ID0gNjM7Cj4g
KwlpbnQgbGlua190aW1lc2xvdHNfdXNlZCA9IDA7Cj4gKwlpbnQgcGJuX3Blcl90aW1lc2xvdDsK
PiArCWludCBpOwo+ICsJc3RydWN0IGRybV9kcF9tc3RfdG9wb2xvZ3lfbWdyICptc3RfbWdyOwo+
ICsKPiArCS8qIGtiaXRzIHRvIHBibiwgZGl2aWRpbmcgYnkgNjQgKi8KPiArCXBibl9wZXJfdGlt
ZXNsb3QgPSBkY19saW5rX2JhbmR3aWR0aF9rYnBzKGRjX2xpbmssCj4gKwkJCWRjX2xpbmtfZ2V0
X2xpbmtfY2FwKGRjX2xpbmspKSAvICg4ICogMTAwMCAqIDU0KTsKPiArCj4gKwkvKiBDaGVjayBs
aW5rIGJhbmR3aWR0aCBsaW1pdCAqLwo+ICsJZm9yIChpID0gMDsgaSA8IGNvdW50OyBpKyspCj4g
KwkJbGlua190aW1lc2xvdHNfdXNlZCArPSBESVZfUk9VTkRfVVAodmFyc1tpXS5wYm4sCj4gcGJu
X3Blcl90aW1lc2xvdCk7Cj4gKwo+ICsJaWYgKGxpbmtfdGltZXNsb3RzX3VzZWQgPiBsaW5rX3Rp
bWVzbG90X2xpbWl0KQo+ICsJCXJldHVybiBmYWxzZTsKPiArCj4gKwkvKiBDaGVjayBicmFuY2gg
YmFuZHdpZHRoIGxpbWl0IGZvciBlYWNoIHBvcnQgb24gZWFjaCBicmFuY2ggKi8KPiArCW1zdF9t
Z3IgPSBwYXJhbXNbMF0ucG9ydC0+bWdyOwo+ICsJaWYgKCFjaGVja19wYm5fbGltaXRfb25fYnJh
bmNoKG1zdF9tZ3ItPm1zdF9wcmltYXJ5LCBwYXJhbXMsIHZhcnMsCj4gY291bnQpKQo+ICsJCXJl
dHVybiBmYWxzZTsKPiArCj4gKwlyZXR1cm4gdHJ1ZTsKPiArfQo+ICsKPiArc3RhdGljIGludCBr
YnBzX3RvX3BlYWtfcGJuKGludCBrYnBzKQo+ICt7Cj4gKwl1NjQgcGVha19rYnBzID0ga2JwczsK
PiArCj4gKwlwZWFrX2ticHMgKj0gMTAwNjsKPiArCXBlYWtfa2JwcyAvPSAxMDAwOwo+ICsJcmV0
dXJuIChpbnQpIERJVl9ST1VORF9VUChwZWFrX2ticHMgKiA2NCwgKDU0ICogOCAqIDEwMDApKTsK
PiArfQo+ICsKPiArc3RhdGljIHZvaWQgc2V0X2RzY19jb25maWdzX2Zyb21fZmFpcm5lc3NfdmFy
cyhzdHJ1Y3QKPiBkc2NfbXN0X2ZhaXJuZXNzX3BhcmFtcyAqcGFyYW1zLAo+ICsJCXN0cnVjdCBk
c2NfbXN0X2ZhaXJuZXNzX3ZhcnMgKnZhcnMsCj4gKwkJaW50IGNvdW50KQo+ICt7Cj4gKwlpbnQg
aTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgY291bnQ7IGkrKykgewo+ICsJCW1lbXNldCgmcGFy
YW1zW2ldLnRpbWluZy0+ZHNjX2NmZywgMCwgc2l6ZW9mKHBhcmFtc1tpXS50aW1pbmctCj4gPmRz
Y19jZmcpKTsKPiArCQlpZiAodmFyc1tpXS5kc2NfZW5hYmxlZCAmJiBkY19kc2NfY29tcHV0ZV9j
b25maWcoCj4gKwkJCQkJcGFyYW1zW2ldLnNpbmstPmN0eC0+ZGMtPnJlc19wb29sLQo+ID5kc2Nz
WzBdLAo+ICsJCQkJCSZwYXJhbXNbaV0uc2luay0KPiA+c2lua19kc2NfY2Fwcy5kc2NfZGVjX2Nh
cHMsCj4gKwkJCQkJcGFyYW1zW2ldLnNpbmstPmN0eC0+ZGMtCj4gPmRlYnVnLmRzY19taW5fc2xp
Y2VfaGVpZ2h0X292ZXJyaWRlLAo+ICsJCQkJCTAsCj4gKwkJCQkJcGFyYW1zW2ldLnRpbWluZywK
PiArCQkJCQkmcGFyYW1zW2ldLnRpbWluZy0+ZHNjX2NmZykpIHsKPiArCQkJcGFyYW1zW2ldLnRp
bWluZy0+ZmxhZ3MuRFNDID0gMTsKPiArCQkJcGFyYW1zW2ldLnRpbWluZy0+ZHNjX2NmZy5iaXRz
X3Blcl9waXhlbCA9Cj4gdmFyc1tpXS5icHBfeDE2Owo+ICsJCX0gZWxzZSB7Cj4gKwkJCXBhcmFt
c1tpXS50aW1pbmctPmZsYWdzLkRTQyA9IDA7Cj4gKwkJfQo+ICsKPiArCX0KPiArCj4gK30KPiAr
Cj4gK3N0YXRpYyBpbnQgYnBwX3gxNl9mcm9tX3BibihzdHJ1Y3QgZHNjX21zdF9mYWlybmVzc19w
YXJhbXMgcGFyYW0sIGludCBwYm4pCj4gK3sKPiArCXN0cnVjdCBkY19kc2NfY29uZmlnIGRzY19j
b25maWc7Cj4gKwl1NjQga2JwczsKPiArCj4gKwlrYnBzID0gKHU2NClwYm4gKiA5OTQgKiA4ICog
NTQgLyA2NDsKPiArCWRjX2RzY19jb21wdXRlX2NvbmZpZygKPiArCQkJcGFyYW0uc2luay0+Y3R4
LT5kYy0+cmVzX3Bvb2wtPmRzY3NbMF0sCj4gKwkJCSZwYXJhbS5zaW5rLT5zaW5rX2RzY19jYXBz
LmRzY19kZWNfY2FwcywKPiArCQkJcGFyYW0uc2luay0+Y3R4LT5kYy0KPiA+ZGVidWcuZHNjX21p
bl9zbGljZV9oZWlnaHRfb3ZlcnJpZGUsCj4gKwkJCShpbnQpIGticHMsIHBhcmFtLnRpbWluZywg
JmRzY19jb25maWcpOwo+ICsKPiArCXJldHVybiBkc2NfY29uZmlnLmJpdHNfcGVyX3BpeGVsOwo+
ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBpbmNyZWFzZV9kc2NfYnBwKHN0cnVjdCBkY19saW5rICpk
Y19saW5rLAo+ICsJCXN0cnVjdCBkc2NfbXN0X2ZhaXJuZXNzX3BhcmFtcyAqcGFyYW1zLAo+ICsJ
CXN0cnVjdCBkc2NfbXN0X2ZhaXJuZXNzX3ZhcnMgKnZhcnMsCj4gKwkJaW50IGNvdW50KQo+ICt7
Cj4gKwlpbnQgaTsKPiArCWJvb2wgYnBwX2luY3JlYXNlZFtNQVhfUElQRVNdOwo+ICsJaW50IGlu
aXRpYWxfc2xhY2tbTUFYX1BJUEVTXTsKPiArCWludCBtaW5faW5pdGlhbF9zbGFjazsKPiArCWlu
dCBuZXh0X2luZGV4Owo+ICsJaW50IHJlbWFpbmluZ190b19pbmNyZWFzZSA9IDA7Cj4gKwlpbnQg
cGJuX3Blcl90aW1lc2xvdDsKPiArCWludCBsaW5rX3RpbWVzbG90c191c2VkOwo+ICsJaW50IGZh
aXJfcGJuX2FsbG9jOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7Cj4gKwkJ
aWYgKHZhcnNbaV0uZHNjX2VuYWJsZWQpIHsKPiArCQkJaW5pdGlhbF9zbGFja1tpXSA9Cj4ga2Jw
c190b19wZWFrX3BibihwYXJhbXNbaV0uYndfcmFuZ2UubWF4X2ticHMpIC0gdmFyc1tpXS5wYm47
Cj4gKwkJCWJwcF9pbmNyZWFzZWRbaV0gPSBmYWxzZTsKPiArCQkJcmVtYWluaW5nX3RvX2luY3Jl
YXNlICs9IDE7Cj4gKwkJfSBlbHNlIHsKPiArCQkJaW5pdGlhbF9zbGFja1tpXSA9IDA7Cj4gKwkJ
CWJwcF9pbmNyZWFzZWRbaV0gPSB0cnVlOwo+ICsJCX0KPiArCX0KPiArCj4gKwlwYm5fcGVyX3Rp
bWVzbG90ID0gZGNfbGlua19iYW5kd2lkdGhfa2JwcyhkY19saW5rLAo+ICsJCQlkY19saW5rX2dl
dF9saW5rX2NhcChkY19saW5rKSkgLyAoOCAqIDEwMDAgKiA1NCk7Cj4gKwo+ICsJd2hpbGUgKHJl
bWFpbmluZ190b19pbmNyZWFzZSkgewo+ICsJCW5leHRfaW5kZXggPSAtMTsKPiArCQltaW5faW5p
dGlhbF9zbGFjayA9IC0xOwo+ICsJCWZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7Cj4gKwkJ
CWlmICghYnBwX2luY3JlYXNlZFtpXSkgewo+ICsJCQkJaWYgKG1pbl9pbml0aWFsX3NsYWNrID09
IC0xIHx8Cj4gbWluX2luaXRpYWxfc2xhY2sgPiBpbml0aWFsX3NsYWNrW2ldKSB7Cj4gKwkJCQkJ
bWluX2luaXRpYWxfc2xhY2sgPSBpbml0aWFsX3NsYWNrW2ldOwo+ICsJCQkJCW5leHRfaW5kZXgg
PSBpOwo+ICsJCQkJfQo+ICsJCQl9Cj4gKwkJfQo+ICsKPiArCQlpZiAobmV4dF9pbmRleCA9PSAt
MSkKPiArCQkJYnJlYWs7Cj4gKwo+ICsJCWxpbmtfdGltZXNsb3RzX3VzZWQgPSAwOwo+ICsKPiAr
CQlmb3IgKGkgPSAwOyBpIDwgY291bnQ7IGkrKykKPiArCQkJbGlua190aW1lc2xvdHNfdXNlZCAr
PSBESVZfUk9VTkRfVVAodmFyc1tpXS5wYm4sCj4gcGJuX3Blcl90aW1lc2xvdCk7Cj4gKwo+ICsJ
CWZhaXJfcGJuX2FsbG9jID0gKDYzIC0gbGlua190aW1lc2xvdHNfdXNlZCkgLwo+IHJlbWFpbmlu
Z190b19pbmNyZWFzZSAqIHBibl9wZXJfdGltZXNsb3Q7Cj4gKwo+ICsJCWlmIChpbml0aWFsX3Ns
YWNrW25leHRfaW5kZXhdID4gZmFpcl9wYm5fYWxsb2MpIHsKPiArCQkJdmFyc1tuZXh0X2luZGV4
XS5wYm4gKz0gZmFpcl9wYm5fYWxsb2M7Cj4gKwkJCWlmIChjaGVja19iYW5kd2lkdGhfbGltaXRz
KGRjX2xpbmssIHBhcmFtcywgdmFycywKPiBjb3VudCkpCj4gKwkJCQl2YXJzW25leHRfaW5kZXhd
LmJwcF94MTYgPQo+IGJwcF94MTZfZnJvbV9wYm4ocGFyYW1zW25leHRfaW5kZXhdLCB2YXJzW25l
eHRfaW5kZXhdLnBibik7Cj4gKwkJCWVsc2UKPiArCQkJCXZhcnNbbmV4dF9pbmRleF0ucGJuIC09
IGZhaXJfcGJuX2FsbG9jOwo+ICsJCX0gZWxzZSB7Cj4gKwkJCXZhcnNbbmV4dF9pbmRleF0ucGJu
ICs9IGluaXRpYWxfc2xhY2tbbmV4dF9pbmRleF07Cj4gKwkJCWlmIChjaGVja19iYW5kd2lkdGhf
bGltaXRzKGRjX2xpbmssIHBhcmFtcywgdmFycywKPiBjb3VudCkpCj4gKwkJCQl2YXJzW25leHRf
aW5kZXhdLmJwcF94MTYgPQo+IHBhcmFtc1tuZXh0X2luZGV4XS5id19yYW5nZS5tYXhfdGFyZ2V0
X2JwcF94MTY7Cj4gKwkJCWVsc2UKPiArCQkJCXZhcnNbbmV4dF9pbmRleF0ucGJuIC09Cj4gaW5p
dGlhbF9zbGFja1tuZXh0X2luZGV4XTsKPiArCQl9Cj4gKwo+ICsJCWJwcF9pbmNyZWFzZWRbbmV4
dF9pbmRleF0gPSB0cnVlOwo+ICsJCXJlbWFpbmluZ190b19pbmNyZWFzZS0tOwo+ICsJfQo+ICt9
Cj4gKwo+ICtzdGF0aWMgdm9pZCB0cnlfZGlzYWJsZV9kc2Moc3RydWN0IGRjX2xpbmsgKmRjX2xp
bmssCj4gKwkJc3RydWN0IGRzY19tc3RfZmFpcm5lc3NfcGFyYW1zICpwYXJhbXMsCj4gKwkJc3Ry
dWN0IGRzY19tc3RfZmFpcm5lc3NfdmFycyAqdmFycywKPiArCQlpbnQgY291bnQpCj4gK3sKPiAr
CWludCBpOwo+ICsJYm9vbCB0cmllZFtNQVhfUElQRVNdOwo+ICsJaW50IGticHNfaW5jcmVhc2Vb
TUFYX1BJUEVTXTsKPiArCWludCBtYXhfa2Jwc19pbmNyZWFzZTsKPiArCWludCBuZXh0X2luZGV4
Owo+ICsJaW50IHJlbWFpbmluZ190b190cnkgPSAwOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBj
b3VudDsgaSsrKSB7Cj4gKwkJaWYgKHZhcnNbaV0uZHNjX2VuYWJsZWQgJiYgdmFyc1tpXS5icHBf
eDE2ID09Cj4gcGFyYW1zW2ldLmJ3X3JhbmdlLm1heF90YXJnZXRfYnBwX3gxNikgewo+ICsJCQlr
YnBzX2luY3JlYXNlW2ldID0gcGFyYW1zW2ldLmJ3X3JhbmdlLnN0cmVhbV9rYnBzIC0KPiBwYXJh
bXNbaV0uYndfcmFuZ2UubWF4X2ticHM7Cj4gKwkJCXRyaWVkW2ldID0gZmFsc2U7Cj4gKwkJCXJl
bWFpbmluZ190b190cnkgKz0gMTsKPiArCQl9IGVsc2Ugewo+ICsJCQlrYnBzX2luY3JlYXNlW2ld
ID0gMDsKPiArCQkJdHJpZWRbaV0gPSB0cnVlOwo+ICsJCX0KPiArCX0KPiArCj4gKwl3aGlsZSAo
cmVtYWluaW5nX3RvX3RyeSkgewo+ICsJCW5leHRfaW5kZXggPSAtMTsKPiArCQltYXhfa2Jwc19p
bmNyZWFzZSA9IC0xOwo+ICsJCWZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7Cj4gKwkJCWlm
ICghdHJpZWRbaV0pIHsKPiArCQkJCWlmIChtYXhfa2Jwc19pbmNyZWFzZSA9PSAtMSB8fAo+IG1h
eF9rYnBzX2luY3JlYXNlIDwga2Jwc19pbmNyZWFzZVtpXSkgewo+ICsJCQkJCW1heF9rYnBzX2lu
Y3JlYXNlID0ga2Jwc19pbmNyZWFzZVtpXTsKPiArCQkJCQluZXh0X2luZGV4ID0gaTsKPiArCQkJ
CX0KPiArCQkJfQo+ICsJCX0KPiArCj4gKwkJaWYgKG5leHRfaW5kZXggPT0gLTEpCj4gKwkJCWJy
ZWFrOwo+ICsKPiArCQl2YXJzW25leHRfaW5kZXhdLnBibiA9Cj4ga2Jwc190b19wZWFrX3Bibihw
YXJhbXNbbmV4dF9pbmRleF0uYndfcmFuZ2Uuc3RyZWFtX2ticHMpOwo+ICsKPiArCQlpZiAoY2hl
Y2tfYmFuZHdpZHRoX2xpbWl0cyhkY19saW5rLCBwYXJhbXMsIHZhcnMsIGNvdW50KSkgewo+ICsJ
CQl2YXJzW25leHRfaW5kZXhdLmRzY19lbmFibGVkID0gZmFsc2U7Cj4gKwkJCXZhcnNbbmV4dF9p
bmRleF0uYnBwX3gxNiA9IDA7Cj4gKwkJfSBlbHNlIHsKPiArCQkJdmFyc1tuZXh0X2luZGV4XS5w
Ym4gPQo+IGticHNfdG9fcGVha19wYm4ocGFyYW1zW25leHRfaW5kZXhdLmJ3X3JhbmdlLm1heF9r
YnBzKTsKPiArCQl9Cj4gKwo+ICsJCXRyaWVkW25leHRfaW5kZXhdID0gdHJ1ZTsKPiArCQlyZW1h
aW5pbmdfdG9fdHJ5LS07Cj4gKwl9Cj4gK30KPiArCj4gK3N0YXRpYyBib29sIGNvbXB1dGVfbXN0
X2RzY19jb25maWdzX2Zvcl9saW5rKHN0cnVjdCBkY19zdGF0ZSAqZGNfc3RhdGUsCj4gc3RydWN0
IGRjX2xpbmsgKmRjX2xpbmspCj4gK3sKPiArCWludCBpOwo+ICsJc3RydWN0IGRjX3N0cmVhbV9z
dGF0ZSAqc3RyZWFtOwo+ICsJc3RydWN0IGRzY19tc3RfZmFpcm5lc3NfcGFyYW1zIHBhcmFtc1tN
QVhfUElQRVNdOwo+ICsJc3RydWN0IGRzY19tc3RfZmFpcm5lc3NfdmFycyB2YXJzW01BWF9QSVBF
U107Cj4gKwlzdHJ1Y3QgYW1kZ3B1X2RtX2Nvbm5lY3RvciAqYWNvbm5lY3RvcjsKPiArCWludCBj
b3VudCA9IDA7Cj4gKwo+ICsJbWVtc2V0KHBhcmFtcywgMCwgc2l6ZW9mKHBhcmFtcykpOwo+ICsK
PiArCS8qIFNldCB1cCBwYXJhbXMgKi8KPiArCWZvciAoaSA9IDA7IGkgPCBkY19zdGF0ZS0+c3Ry
ZWFtX2NvdW50OyBpKyspIHsKPiArCQlzdHJlYW0gPSBkY19zdGF0ZS0+c3RyZWFtc1tpXTsKPiAr
Cj4gKwkJaWYgKHN0cmVhbS0+bGluayAhPSBkY19saW5rKQo+ICsJCQljb250aW51ZTsKPiArCj4g
KwkJc3RyZWFtLT50aW1pbmcuZmxhZ3MuRFNDID0gMDsKPiArCj4gKwkJcGFyYW1zW2NvdW50XS50
aW1pbmcgPSAmc3RyZWFtLT50aW1pbmc7Cj4gKwkJcGFyYW1zW2NvdW50XS5zaW5rID0gc3RyZWFt
LT5zaW5rOwo+ICsJCWFjb25uZWN0b3IgPSAoc3RydWN0IGFtZGdwdV9kbV9jb25uZWN0b3IgKilz
dHJlYW0tCj4gPmRtX3N0cmVhbV9jb250ZXh0Owo+ICsJCXBhcmFtc1tjb3VudF0ucG9ydCA9IGFj
b25uZWN0b3ItPnBvcnQ7Cj4gKwkJcGFyYW1zW2NvdW50XS5jb21wcmVzc2lvbl9wb3NzaWJsZSA9
IHN0cmVhbS0+c2luay0KPiA+c2lua19kc2NfY2Fwcy5kc2NfZGVjX2NhcHMuaXNfZHNjX3N1cHBv
cnRlZDsKPiArCQlpZiAoIWRjX2RzY19jb21wdXRlX2JhbmR3aWR0aF9yYW5nZSgKPiArCQkJCXN0
cmVhbS0+c2luay0+Y3R4LT5kYy0+cmVzX3Bvb2wtPmRzY3NbMF0sCj4gKwkJCQlzdHJlYW0tPnNp
bmstPmN0eC0+ZGMtCj4gPmRlYnVnLmRzY19taW5fc2xpY2VfaGVpZ2h0X292ZXJyaWRlLAo+ICsJ
CQkJOCwgMTYsCj4gKwkJCQkmc3RyZWFtLT5zaW5rLT5zaW5rX2RzY19jYXBzLmRzY19kZWNfY2Fw
cywKPiArCQkJCSZzdHJlYW0tPnRpbWluZywgJnBhcmFtc1tjb3VudF0uYndfcmFuZ2UpKQo+ICsJ
CQlwYXJhbXNbY291bnRdLmJ3X3JhbmdlLnN0cmVhbV9rYnBzID0KPiBkY19iYW5kd2lkdGhfaW5f
a2Jwc19mcm9tX3RpbWluZygmc3RyZWFtLT50aW1pbmcpOwo+ICsKPiArCQljb3VudCsrOwo+ICsJ
fQo+ICsKPiArCS8qIFRyeSBubyBjb21wcmVzc2lvbiAqLwo+ICsJZm9yIChpID0gMDsgaSA8IGNv
dW50OyBpKyspIHsKPiArCQl2YXJzW2ldLnBibiA9Cj4ga2Jwc190b19wZWFrX3BibihwYXJhbXNb
aV0uYndfcmFuZ2Uuc3RyZWFtX2ticHMpOwo+ICsJCXZhcnNbaV0uZHNjX2VuYWJsZWQgPSBmYWxz
ZTsKPiArCQl2YXJzW2ldLmJwcF94MTYgPSAwOwo+ICsJfQo+ICsKPiArCWlmIChjaGVja19iYW5k
d2lkdGhfbGltaXRzKGRjX2xpbmssIHBhcmFtcywgdmFycywgY291bnQpKSB7Cj4gKwkJc2V0X2Rz
Y19jb25maWdzX2Zyb21fZmFpcm5lc3NfdmFycyhwYXJhbXMsIHZhcnMsIGNvdW50KTsKPiArCQly
ZXR1cm4gdHJ1ZTsKPiArCX0KPiArCj4gKwkvKiBUcnkgbWF4IGNvbXByZXNzaW9uICovCj4gKwlm
b3IgKGkgPSAwOyBpIDwgY291bnQ7IGkrKykgewo+ICsJCWlmIChwYXJhbXNbaV0uY29tcHJlc3Np
b25fcG9zc2libGUpIHsKPiArCQkJdmFyc1tpXS5wYm4gPQo+IGticHNfdG9fcGVha19wYm4ocGFy
YW1zW2ldLmJ3X3JhbmdlLm1pbl9rYnBzKTsKPiArCQkJdmFyc1tpXS5kc2NfZW5hYmxlZCA9IHRy
dWU7Cj4gKwkJCXZhcnNbaV0uYnBwX3gxNiA9Cj4gcGFyYW1zW2ldLmJ3X3JhbmdlLm1pbl90YXJn
ZXRfYnBwX3gxNjsKPiArCQl9IGVsc2Ugewo+ICsJCQl2YXJzW2ldLnBibiA9Cj4ga2Jwc190b19w
ZWFrX3BibihwYXJhbXNbaV0uYndfcmFuZ2Uuc3RyZWFtX2ticHMpOwo+ICsJCQl2YXJzW2ldLmRz
Y19lbmFibGVkID0gZmFsc2U7Cj4gKwkJCXZhcnNbaV0uYnBwX3gxNiA9IDA7Cj4gKwkJfQo+ICsJ
fQo+ICsKPiArCWlmICghY2hlY2tfYmFuZHdpZHRoX2xpbWl0cyhkY19saW5rLCBwYXJhbXMsIHZh
cnMsIGNvdW50KSkKPiArCQlyZXR1cm4gZmFsc2U7Cj4gKwo+ICsJLyogT3B0aW1pemUgZGVncmVl
IG9mIGNvbXByZXNzaW9uICovCj4gKwlpbmNyZWFzZV9kc2NfYnBwKGRjX2xpbmssIHBhcmFtcywg
dmFycywgY291bnQpOwo+ICsKPiArCXRyeV9kaXNhYmxlX2RzYyhkY19saW5rLCBwYXJhbXMsIHZh
cnMsIGNvdW50KTsKPiArCj4gKwlzZXRfZHNjX2NvbmZpZ3NfZnJvbV9mYWlybmVzc192YXJzKHBh
cmFtcywgdmFycywgY291bnQpOwo+ICsKPiArCXJldHVybiB0cnVlOwo+ICt9Cj4gKwo+ICtib29s
IGNvbXB1dGVfbXN0X2RzY19jb25maWdzX2Zvcl9zdGF0ZShzdHJ1Y3QgZGNfc3RhdGUgKmRjX3N0
YXRlKQo+ICt7Cj4gKwlpbnQgaSwgajsKPiArCXN0cnVjdCBkY19zdHJlYW1fc3RhdGUgKnN0cmVh
bTsKPiArCWJvb2wgY29tcHV0ZWRfc3RyZWFtc1tNQVhfUElQRVNdOwo+ICsJc3RydWN0IGFtZGdw
dV9kbV9jb25uZWN0b3IgKmFjb25uZWN0b3I7Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IGRjX3N0
YXRlLT5zdHJlYW1fY291bnQ7IGkrKykKPiArCQljb21wdXRlZF9zdHJlYW1zW2ldID0gZmFsc2U7
Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IGRjX3N0YXRlLT5zdHJlYW1fY291bnQ7IGkrKykgewo+
ICsJCXN0cmVhbSA9IGRjX3N0YXRlLT5zdHJlYW1zW2ldOwo+ICsKPiArCQlpZiAoc3RyZWFtLT5z
aWduYWwgIT0gU0lHTkFMX1RZUEVfRElTUExBWV9QT1JUX01TVCkKPiArCQkJY29udGludWU7Cj4g
Kwo+ICsJCWFjb25uZWN0b3IgPSAoc3RydWN0IGFtZGdwdV9kbV9jb25uZWN0b3IgKilzdHJlYW0t
Cj4gPmRtX3N0cmVhbV9jb250ZXh0Owo+ICsKPiArCQlpZiAoIWFjb25uZWN0b3IgfHwgIWFjb25u
ZWN0b3ItPmRjX3NpbmspCj4gKwkJCWNvbnRpbnVlOwo+ICsKPiArCQlpZiAoIWFjb25uZWN0b3It
PmRjX3NpbmstCj4gPnNpbmtfZHNjX2NhcHMuZHNjX2RlY19jYXBzLmlzX2RzY19zdXBwb3J0ZWQp
Cj4gKwkJCWNvbnRpbnVlOwo+ICsKPiArCQlpZiAoY29tcHV0ZWRfc3RyZWFtc1tpXSkKPiArCQkJ
Y29udGludWU7Cj4gKwo+ICsJCW11dGV4X2xvY2soJmFjb25uZWN0b3ItPm1zdF9tZ3IubG9jayk7
Cj4gKwkJaWYgKCFjb21wdXRlX21zdF9kc2NfY29uZmlnc19mb3JfbGluayhkY19zdGF0ZSwgc3Ry
ZWFtLT5saW5rKSkgCj4gewo+ICsJCQltdXRleF91bmxvY2soJmFjb25uZWN0b3ItPm1zdF9tZ3Iu
bG9jayk7Cj4gKwkJCXJldHVybiBmYWxzZTsKPiArCQl9Cj4gKwkJbXV0ZXhfdW5sb2NrKCZhY29u
bmVjdG9yLT5tc3RfbWdyLmxvY2spOwo+ICsKPiArCQlmb3IgKGogPSAwOyBqIDwgZGNfc3RhdGUt
PnN0cmVhbV9jb3VudDsgaisrKSB7Cj4gKwkJCWlmIChkY19zdGF0ZS0+c3RyZWFtc1tqXS0+bGlu
ayA9PSBzdHJlYW0tPmxpbmspCj4gKwkJCQljb21wdXRlZF9zdHJlYW1zW2pdID0gdHJ1ZTsKPiAr
CQl9Cj4gKwl9Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IGRjX3N0YXRlLT5zdHJlYW1fY291bnQ7
IGkrKykgewo+ICsJCXN0cmVhbSA9IGRjX3N0YXRlLT5zdHJlYW1zW2ldOwo+ICsKPiArCQlpZiAo
c3RyZWFtLT50aW1pbmcuZmxhZ3MuRFNDID09IDEpCj4gKwkJCWRjbjIwX2FkZF9kc2NfdG9fc3Ry
ZWFtX3Jlc291cmNlKHN0cmVhbS0+Y3R4LT5kYywKPiBkY19zdGF0ZSwgc3RyZWFtKTsKPiArCX0K
PiArCj4gKwlyZXR1cm4gdHJ1ZTsKPiArfQo+ICsjZW5kaWYKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1fbXN0X3R5cGVzLmgKPiBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtX21zdF90eXBl
cy5oCj4gaW5kZXggMmRhODUxYjQwMDQyLi5kYTk1NzYxMTIxNGEgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1fbXN0X3R5cGVzLmgK
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbV9t
c3RfdHlwZXMuaAo+IEBAIC0zMiw0ICszMiw4IEBAIHN0cnVjdCBhbWRncHVfZG1fY29ubmVjdG9y
Owo+ICB2b2lkIGFtZGdwdV9kbV9pbml0aWFsaXplX2RwX2Nvbm5lY3RvcihzdHJ1Y3QgYW1kZ3B1
X2Rpc3BsYXlfbWFuYWdlciAqZG0sCj4gIAkJCQkgICAgICAgc3RydWN0IGFtZGdwdV9kbV9jb25u
ZWN0b3IKPiAqYWNvbm5lY3Rvcik7Cj4gIAo+ICsKPiArI2lmZGVmIENPTkZJR19EUk1fQU1EX0RD
X0RTQ19TVVBQT1JUCj4gK2Jvb2wgY29tcHV0ZV9tc3RfZHNjX2NvbmZpZ3NfZm9yX3N0YXRlKHN0
cnVjdCBkY19zdGF0ZSAqZGNfc3RhdGUpOwo+ICsjZW5kaWYKPiAgI2VuZGlmCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9yZXNvdXJjZS5j
Cj4gYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfcmVzb3VyY2Uu
Ywo+IGluZGV4IDkyNGMyZTMwMzU4OC4uNTVjMzU2MTA5Y2I5IDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9yZXNvdXJjZS5jCj4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIwL2RjbjIwX3Jlc291cmNlLmMKPiBA
QCAtMTQ5NSw3ICsxNDk1LDcgQEAgc3RhdGljIHZvaWQgcmVsZWFzZV9kc2Moc3RydWN0IHJlc291
cmNlX2NvbnRleHQKPiAqcmVzX2N0eCwKPiAgCj4gIAo+ICAjaWZkZWYgQ09ORklHX0RSTV9BTURf
RENfRFNDX1NVUFBPUlQKPiAtc3RhdGljIGVudW0gZGNfc3RhdHVzIGFkZF9kc2NfdG9fc3RyZWFt
X3Jlc291cmNlKHN0cnVjdCBkYyAqZGMsCj4gK2VudW0gZGNfc3RhdHVzIGRjbjIwX2FkZF9kc2Nf
dG9fc3RyZWFtX3Jlc291cmNlKHN0cnVjdCBkYyAqZGMsCj4gIAkJc3RydWN0IGRjX3N0YXRlICpk
Y19jdHgsCj4gIAkJc3RydWN0IGRjX3N0cmVhbV9zdGF0ZSAqZGNfc3RyZWFtKQo+ICB7Cj4gQEAg
LTE1MTAsNiArMTUxMCw5IEBAIHN0YXRpYyBlbnVtIGRjX3N0YXR1cwo+IGFkZF9kc2NfdG9fc3Ry
ZWFtX3Jlc291cmNlKHN0cnVjdCBkYyAqZGMsCj4gIAkJaWYgKHBpcGVfY3R4LT5zdHJlYW0gIT0g
ZGNfc3RyZWFtKQo+ICAJCQljb250aW51ZTsKPiAgCj4gKwkJaWYgKHBpcGVfY3R4LT5zdHJlYW1f
cmVzLmRzYykKPiArCQkJY29udGludWU7Cj4gKwo+ICAJCWFjcXVpcmVfZHNjKCZkY19jdHgtPnJl
c19jdHgsIHBvb2wsICZwaXBlX2N0eC0KPiA+c3RyZWFtX3Jlcy5kc2MpOwo+ICAKPiAgCQkvKiBU
aGUgbnVtYmVyIG9mIERTQ3MgY2FuIGJlIGxlc3MgdGhhbiB0aGUgbnVtYmVyIG9mIHBpcGVzICov
Cj4gQEAgLTE1NjEsNyArMTU2NCw3IEBAIGVudW0gZGNfc3RhdHVzIGRjbjIwX2FkZF9zdHJlYW1f
dG9fY3R4KHN0cnVjdCBkYyAqZGMsCj4gc3RydWN0IGRjX3N0YXRlICpuZXdfY3R4LAo+ICAjaWZk
ZWYgQ09ORklHX0RSTV9BTURfRENfRFNDX1NVUFBPUlQKPiAgCS8qIEdldCBhIERTQyBpZiByZXF1
aXJlZCBhbmQgYXZhaWxhYmxlICovCj4gIAlpZiAocmVzdWx0ID09IERDX09LICYmIGRjX3N0cmVh
bS0+dGltaW5nLmZsYWdzLkRTQykKPiAtCQlyZXN1bHQgPSBhZGRfZHNjX3RvX3N0cmVhbV9yZXNv
dXJjZShkYywgbmV3X2N0eCwgZGNfc3RyZWFtKTsKPiArCQlyZXN1bHQgPSBkY24yMF9hZGRfZHNj
X3RvX3N0cmVhbV9yZXNvdXJjZShkYywgbmV3X2N0eCwKPiBkY19zdHJlYW0pOwo+ICAjZW5kaWYK
PiAgCj4gIAlpZiAocmVzdWx0ID09IERDX09LKQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2Rpc3BsYXkvZGMvZGNuMjAvZGNuMjBfcmVzb3VyY2UuaAo+IGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9kaXNwbGF5L2RjL2RjbjIwL2RjbjIwX3Jlc291cmNlLmgKPiBpbmRleCBmZWY0NzNk
NjhhNGEuLjg2NWY2ODRhNTAwYSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rp
c3BsYXkvZGMvZGNuMjAvZGNuMjBfcmVzb3VyY2UuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvZGlzcGxheS9kYy9kY24yMC9kY24yMF9yZXNvdXJjZS5oCj4gQEAgLTE1OSw2ICsxNTksNyBA
QCB2b2lkIGRjbjIwX2NhbGN1bGF0ZV9kbGdfcGFyYW1zKAo+ICAKPiAgZW51bSBkY19zdGF0dXMg
ZGNuMjBfYnVpbGRfbWFwcGVkX3Jlc291cmNlKGNvbnN0IHN0cnVjdCBkYyAqZGMsIHN0cnVjdAo+
IGRjX3N0YXRlICpjb250ZXh0LCBzdHJ1Y3QgZGNfc3RyZWFtX3N0YXRlICpzdHJlYW0pOwo+ICBl
bnVtIGRjX3N0YXR1cyBkY24yMF9hZGRfc3RyZWFtX3RvX2N0eChzdHJ1Y3QgZGMgKmRjLCBzdHJ1
Y3QgZGNfc3RhdGUKPiAqbmV3X2N0eCwgc3RydWN0IGRjX3N0cmVhbV9zdGF0ZSAqZGNfc3RyZWFt
KTsKPiArZW51bSBkY19zdGF0dXMgZGNuMjBfYWRkX2RzY190b19zdHJlYW1fcmVzb3VyY2Uoc3Ry
dWN0IGRjICpkYywgc3RydWN0Cj4gZGNfc3RhdGUgKmRjX2N0eCwgc3RydWN0IGRjX3N0cmVhbV9z
dGF0ZSAqZGNfc3RyZWFtKTsKPiAgZW51bSBkY19zdGF0dXMgZGNuMjBfcmVtb3ZlX3N0cmVhbV9m
cm9tX2N0eChzdHJ1Y3QgZGMgKmRjLCBzdHJ1Y3QgZGNfc3RhdGUKPiAqbmV3X2N0eCwgc3RydWN0
IGRjX3N0cmVhbV9zdGF0ZSAqZGNfc3RyZWFtKTsKPiAgZW51bSBkY19zdGF0dXMgZGNuMjBfZ2V0
X2RlZmF1bHRfc3dpenpsZV9tb2RlKHN0cnVjdCBkY19wbGFuZV9zdGF0ZQo+ICpwbGFuZV9zdGF0
ZSk7Cj4gIAotLSAKQ2hlZXJzLAoJTHl1ZGUgUGF1bAoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vZHJpLWRldmVs
