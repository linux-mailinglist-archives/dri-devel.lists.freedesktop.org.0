Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1CFD78CAF3
	for <lists+dri-devel@lfdr.de>; Wed, 14 Aug 2019 07:52:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id ADF256E25D;
	Wed, 14 Aug 2019 05:52:47 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x449.google.com (mail-pf1-x449.google.com
 [IPv6:2607:f8b0:4864:20::449])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 87C6E6E25D
 for <dri-devel@lists.freedesktop.org>; Wed, 14 Aug 2019 05:52:43 +0000 (UTC)
Received: by mail-pf1-x449.google.com with SMTP id i2so69894998pfe.1
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 22:52:43 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=hVHemi5cB36MHGmjih6ZT8Lo62d2jFATYynX7NwcqfM=;
 b=eglKg5t/xZt01WxjSExHnL2n+iW+zm1BQ4ZsmzvDEpoC+XoVLVSFutgil1TwMEFfWp
 ZpauzZKTTAu5HSu6O9igurHw4bRxe2HUgtg5Vp/DLzFraYna4ke7rfcuS0paMdCUOSrj
 Y+VoEHSU+vLqyMp42v25yQ7OK64LAYBWJHNfsR2kn7o6lwFfHt8kTXUf4yQiufBmSUwk
 wB9ygHnebY28cVdgOA2xUkRnLit4My+cV1aCu1O/yZLsHClCs1uebzHYYN0orZCKVgg+
 BKH2tvef6deb3nFjPIdA1YJv37rh5q5VgC/RqXP7544HsIzpzBGWhqzW2/H+1hVpr9Jv
 63vw==
X-Gm-Message-State: APjAAAXmnyQLLeOgyjHCNKcxR5aW0kumBcvU0CvmQRd5N9YwkAaxWOWk
 XA6z7TQgRYIqNTCCI/EE8rKoukjkZI1GHLmWcRcJ5w==
X-Google-Smtp-Source: APXvYqwEoR4eJCiI4GOiSBy+ENSN0eKJQoqcbooeWQknOu3BqjEggJHdPmrMWR4Y43E7W6CGtDHKX2w5gRGrorTu6zIk1g==
X-Received: by 2002:a65:6846:: with SMTP id q6mr37858759pgt.150.1565761962072; 
 Tue, 13 Aug 2019 22:52:42 -0700 (PDT)
Date: Tue, 13 Aug 2019 22:51:02 -0700
In-Reply-To: <20190814055108.214253-1-brendanhiggins@google.com>
Message-Id: <20190814055108.214253-13-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190814055108.214253-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.23.0.rc1.153.gdeed80330f-goog
Subject: [PATCH v13 12/18] kunit: test: add tests for KUnit managed resources
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=hVHemi5cB36MHGmjih6ZT8Lo62d2jFATYynX7NwcqfM=;
 b=vSYMPqf9HPf9kM9fVH9Bpp9VY32e3teKLoX4Blw1mFJWjVG0yhNEAO9RmR0wg79Veq
 yrcdU716Ass47qxLtaSCG76kRNpN7/1umwf8Etggil7hw9nbTO4JBk/KgcVBNIOxqeMU
 zyVhpcEWUSi5PZvLivYbZ+4sCqRJbbnGfeDepe86bnS9D4yTrrSB9JzVJq5igpXr8oxY
 UqNvgJuJbLWQdxP5QQqibgkbC01+AGRNRP+CsjH8K4QkGeDCaqaPA2FM277k7X9C3T1/
 1RX+EXRGVvzsVDREqaVnqZ7R4GB16Bfrkgi7nMldrY2rN53Pp975t0vsmuxtgmKyx0vv
 NClg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com,
 Avinash Kondareddy <akndr41@gmail.com>, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogQXZpbmFzaCBLb25kYXJlZGR5IDxha25kcjQxQGdtYWlsLmNvbT4KCkFkZCB1bml0IHRl
c3RzIGZvciBLVW5pdCBtYW5hZ2VkIHJlc291cmNlcy4gS1VuaXQgbWFuYWdlZCByZXNvdXJjZXMK
KHN0cnVjdCBrdW5pdF9yZXNvdXJjZSkgYXJlIHJlc291cmNlcyB0aGF0IGFyZSBhdXRvbWF0aWNh
bGx5IGNsZWFuZWQgdXAKYXQgdGhlIGVuZCBvZiBhIEtVbml0IHRlc3QsIHNpbWlsYXIgdG8gdGhl
IGNvbmNlcHQgb2YgZGV2bV8qIG1hbmFnZWQKcmVzb3VyY2VzLgoKU2lnbmVkLW9mZi1ieTogQXZp
bmFzaCBLb25kYXJlZGR5IDxha25kcjQxQGdtYWlsLmNvbT4KU2lnbmVkLW9mZi1ieTogQnJlbmRh
biBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29tPgpSZXZpZXdlZC1ieTogR3JlZyBL
cm9haC1IYXJ0bWFuIDxncmVna2hAbGludXhmb3VuZGF0aW9uLm9yZz4KUmV2aWV3ZWQtYnk6IExv
Z2FuIEd1bnRob3JwZSA8bG9nYW5nQGRlbHRhdGVlLmNvbT4KLS0tCiBrdW5pdC90ZXN0LXRlc3Qu
YyB8IDIyOCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAx
IGZpbGUgY2hhbmdlZCwgMjI4IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9rdW5pdC90ZXN0
LXRlc3QuYyBiL2t1bml0L3Rlc3QtdGVzdC5jCmluZGV4IGUwYWI0YmQ1NDZlYWMuLjVlYmUwNTlk
MTZlMjUgMTAwNjQ0Ci0tLSBhL2t1bml0L3Rlc3QtdGVzdC5jCisrKyBiL2t1bml0L3Rlc3QtdGVz
dC5jCkBAIC0xMDEsMyArMTAxLDIzMSBAQCBzdGF0aWMgc3RydWN0IGt1bml0X3N1aXRlIGt1bml0
X3RyeV9jYXRjaF90ZXN0X3N1aXRlID0gewogCS50ZXN0X2Nhc2VzID0ga3VuaXRfdHJ5X2NhdGNo
X3Rlc3RfY2FzZXMsCiB9Owoga3VuaXRfdGVzdF9zdWl0ZShrdW5pdF90cnlfY2F0Y2hfdGVzdF9z
dWl0ZSk7CisKKy8qCisgKiBDb250ZXh0IGZvciB0ZXN0aW5nIHRlc3QgbWFuYWdlZCByZXNvdXJj
ZXMKKyAqIGlzX3Jlc291cmNlX2luaXRpYWxpemVkIGlzIHVzZWQgdG8gdGVzdCBhcmJpdHJhcnkg
cmVzb3VyY2VzCisgKi8KK3N0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRleHQgeworCXN0
cnVjdCBrdW5pdCB0ZXN0OworCWJvb2wgaXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQ7CisJaW50IGFs
bG9jYXRlX29yZGVyWzJdOworCWludCBmcmVlX29yZGVyWzJdOworfTsKKworc3RhdGljIGludCBm
YWtlX3Jlc291cmNlX2luaXQoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMsIHZvaWQgKmNvbnRl
eHQpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gY29udGV4
dDsKKworCXJlcy0+YWxsb2NhdGlvbiA9ICZjdHgtPmlzX3Jlc291cmNlX2luaXRpYWxpemVkOwor
CWN0eC0+aXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQgPSB0cnVlOworCXJldHVybiAwOworfQorCitz
dGF0aWMgdm9pZCBmYWtlX3Jlc291cmNlX2ZyZWUoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMp
Cit7CisJYm9vbCAqaXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQgPSByZXMtPmFsbG9jYXRpb247CisK
KwkqaXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQgPSBmYWxzZTsKK30KKworc3RhdGljIHZvaWQga3Vu
aXRfcmVzb3VyY2VfdGVzdF9pbml0X3Jlc291cmNlcyhzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJ
c3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsKKwor
CWt1bml0X2luaXRfdGVzdCgmY3R4LT50ZXN0LCAidGVzdGluZ190ZXN0X2luaXRfdGVzdCIpOwor
CisJS1VOSVRfRVhQRUNUX1RSVUUodGVzdCwgbGlzdF9lbXB0eSgmY3R4LT50ZXN0LnJlc291cmNl
cykpOworfQorCitzdGF0aWMgdm9pZCBrdW5pdF9yZXNvdXJjZV90ZXN0X2FsbG9jX3Jlc291cmNl
KHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250
ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzOworCWt1
bml0X3Jlc291cmNlX2ZyZWVfdCBmcmVlID0gZmFrZV9yZXNvdXJjZV9mcmVlOworCisJcmVzID0g
a3VuaXRfYWxsb2NfYW5kX2dldF9yZXNvdXJjZSgmY3R4LT50ZXN0LAorCQkJCQkgICBmYWtlX3Jl
c291cmNlX2luaXQsCisJCQkJCSAgIGZha2VfcmVzb3VyY2VfZnJlZSwKKwkJCQkJICAgR0ZQX0tF
Uk5FTCwKKwkJCQkJICAgY3R4KTsKKworCUtVTklUX0FTU0VSVF9OT1RfRVJSX09SX05VTEwodGVz
dCwgcmVzKTsKKwlLVU5JVF9FWFBFQ1RfUFRSX0VRKHRlc3QsCisJCQkgICAgJmN0eC0+aXNfcmVz
b3VyY2VfaW5pdGlhbGl6ZWQsCisJCQkgICAgKGJvb2wgKikgcmVzLT5hbGxvY2F0aW9uKTsKKwlL
VU5JVF9FWFBFQ1RfVFJVRSh0ZXN0LCBsaXN0X2lzX2xhc3QoJnJlcy0+bm9kZSwgJmN0eC0+dGVz
dC5yZXNvdXJjZXMpKTsKKwlLVU5JVF9FWFBFQ1RfUFRSX0VRKHRlc3QsIGZyZWUsIHJlcy0+ZnJl
ZSk7Cit9CisKK3N0YXRpYyB2b2lkIGt1bml0X3Jlc291cmNlX3Rlc3RfZGVzdHJveV9yZXNvdXJj
ZShzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29u
dGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsKKwlzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlcyA9IGt1
bml0X2FsbG9jX2FuZF9nZXRfcmVzb3VyY2UoCisJCQkmY3R4LT50ZXN0LAorCQkJZmFrZV9yZXNv
dXJjZV9pbml0LAorCQkJZmFrZV9yZXNvdXJjZV9mcmVlLAorCQkJR0ZQX0tFUk5FTCwKKwkJCWN0
eCk7CisKKwlLVU5JVF9BU1NFUlRfRkFMU0UodGVzdCwKKwkJCSAgIGt1bml0X3Jlc291cmNlX2Rl
c3Ryb3koJmN0eC0+dGVzdCwKKwkJCQkJCSAga3VuaXRfcmVzb3VyY2VfaW5zdGFuY2VfbWF0Y2gs
CisJCQkJCQkgIHJlcy0+ZnJlZSwKKwkJCQkJCSAgcmVzLT5hbGxvY2F0aW9uKSk7CisKKwlLVU5J
VF9FWFBFQ1RfRkFMU0UodGVzdCwgY3R4LT5pc19yZXNvdXJjZV9pbml0aWFsaXplZCk7CisJS1VO
SVRfRVhQRUNUX1RSVUUodGVzdCwgbGlzdF9lbXB0eSgmY3R4LT50ZXN0LnJlc291cmNlcykpOwor
fQorCitzdGF0aWMgdm9pZCBrdW5pdF9yZXNvdXJjZV90ZXN0X2NsZWFudXBfcmVzb3VyY2VzKHN0
cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlpbnQgaTsKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJj
ZV9jb250ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVz
b3VyY2VzWzVdOworCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUocmVzb3VyY2VzKTsgaSsr
KSB7CisJCXJlc291cmNlc1tpXSA9IGt1bml0X2FsbG9jX2FuZF9nZXRfcmVzb3VyY2UoJmN0eC0+
dGVzdCwKKwkJCQkJCQkgICAgZmFrZV9yZXNvdXJjZV9pbml0LAorCQkJCQkJCSAgICBmYWtlX3Jl
c291cmNlX2ZyZWUsCisJCQkJCQkJICAgIEdGUF9LRVJORUwsCisJCQkJCQkJICAgIGN0eCk7CisJ
fQorCisJa3VuaXRfY2xlYW51cCgmY3R4LT50ZXN0KTsKKworCUtVTklUX0VYUEVDVF9UUlVFKHRl
c3QsIGxpc3RfZW1wdHkoJmN0eC0+dGVzdC5yZXNvdXJjZXMpKTsKK30KKworc3RhdGljIHZvaWQg
a3VuaXRfcmVzb3VyY2VfdGVzdF9tYXJrX29yZGVyKGludCBvcmRlcl9hcnJheVtdLAorCQkJCQkg
ICBzaXplX3Qgb3JkZXJfc2l6ZSwKKwkJCQkJICAgaW50IGtleSkKK3sKKwlpbnQgaTsKKworCWZv
ciAoaSA9IDA7IGkgPCBvcmRlcl9zaXplICYmIG9yZGVyX2FycmF5W2ldOyBpKyspCisJCTsKKwor
CW9yZGVyX2FycmF5W2ldID0ga2V5OworfQorCisjZGVmaW5lIEtVTklUX1JFU09VUkNFX1RFU1Rf
TUFSS19PUkRFUihjdHgsIG9yZGVyX2ZpZWxkLCBrZXkpCQkgICAgICAgXAorCQlrdW5pdF9yZXNv
dXJjZV90ZXN0X21hcmtfb3JkZXIoY3R4LT5vcmRlcl9maWVsZCwJICAgICAgIFwKKwkJCQkJICAg
ICAgIEFSUkFZX1NJWkUoY3R4LT5vcmRlcl9maWVsZCksICAgXAorCQkJCQkgICAgICAga2V5KQor
CitzdGF0aWMgaW50IGZha2VfcmVzb3VyY2VfMl9pbml0KHN0cnVjdCBrdW5pdF9yZXNvdXJjZSAq
cmVzLCB2b2lkICpjb250ZXh0KQoreworCXN0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRl
eHQgKmN0eCA9IGNvbnRleHQ7CisKKwlLVU5JVF9SRVNPVVJDRV9URVNUX01BUktfT1JERVIoY3R4
LCBhbGxvY2F0ZV9vcmRlciwgMik7CisKKwlyZXMtPmFsbG9jYXRpb24gPSBjdHg7CisKKwlyZXR1
cm4gMDsKK30KKworc3RhdGljIHZvaWQgZmFrZV9yZXNvdXJjZV8yX2ZyZWUoc3RydWN0IGt1bml0
X3Jlc291cmNlICpyZXMpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAq
Y3R4ID0gcmVzLT5hbGxvY2F0aW9uOworCisJS1VOSVRfUkVTT1VSQ0VfVEVTVF9NQVJLX09SREVS
KGN0eCwgZnJlZV9vcmRlciwgMik7Cit9CisKK3N0YXRpYyBpbnQgZmFrZV9yZXNvdXJjZV8xX2lu
aXQoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMsIHZvaWQgKmNvbnRleHQpCit7CisJc3RydWN0
IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gY29udGV4dDsKKworCWt1bml0X2Fs
bG9jX2FuZF9nZXRfcmVzb3VyY2UoJmN0eC0+dGVzdCwKKwkJCQkgICAgIGZha2VfcmVzb3VyY2Vf
Ml9pbml0LAorCQkJCSAgICAgZmFrZV9yZXNvdXJjZV8yX2ZyZWUsCisJCQkJICAgICBHRlBfS0VS
TkVMLAorCQkJCSAgICAgY3R4KTsKKworCUtVTklUX1JFU09VUkNFX1RFU1RfTUFSS19PUkRFUihj
dHgsIGFsbG9jYXRlX29yZGVyLCAxKTsKKworCXJlcy0+YWxsb2NhdGlvbiA9IGN0eDsKKworCXJl
dHVybiAwOworfQorCitzdGF0aWMgdm9pZCBmYWtlX3Jlc291cmNlXzFfZnJlZShzdHJ1Y3Qga3Vu
aXRfcmVzb3VyY2UgKnJlcykKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0
ICpjdHggPSByZXMtPmFsbG9jYXRpb247CisKKwlLVU5JVF9SRVNPVVJDRV9URVNUX01BUktfT1JE
RVIoY3R4LCBmcmVlX29yZGVyLCAxKTsKK30KKworLyoKKyAqIFRPRE8oYnJlbmRhbmhpZ2dpbnNA
Z29vZ2xlLmNvbSk6IHJlcGxhY2UgdGhlIGFycmF5cyB0aGF0IGtlZXAgdHJhY2sgb2YgdGhlCisg
KiBvcmRlciBvZiBhbGxvY2F0aW9uIGFuZCBmcmVlaW5nIHdpdGggc3RyaWN0IG1vY2tzIHVzaW5n
IHRoZSBJTl9TRVFVRU5DRSBtYWNybworICogdG8gYXNzZXJ0IGFsbG9jYXRpb24gYW5kIGZyZWVp
bmcgb3JkZXIgd2hlbiB0aGUgZmVhdHVyZSBiZWNvbWVzIGF2YWlsYWJsZS4KKyAqLworc3RhdGlj
IHZvaWQga3VuaXRfcmVzb3VyY2VfdGVzdF9wcm9wZXJfZnJlZV9vcmRlcmluZyhzdHJ1Y3Qga3Vu
aXQgKnRlc3QpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0g
dGVzdC0+cHJpdjsKKworCS8qIGZha2VfcmVzb3VyY2VfMSBhbGxvY2F0ZXMgYSBmYWtlX3Jlc291
cmNlXzIgaW4gaXRzIGluaXQuICovCisJa3VuaXRfYWxsb2NfYW5kX2dldF9yZXNvdXJjZSgmY3R4
LT50ZXN0LAorCQkJCSAgICAgZmFrZV9yZXNvdXJjZV8xX2luaXQsCisJCQkJICAgICBmYWtlX3Jl
c291cmNlXzFfZnJlZSwKKwkJCQkgICAgIEdGUF9LRVJORUwsCisJCQkJICAgICBjdHgpOworCisJ
LyoKKwkgKiBTaW5jZSBmYWtlX3Jlc291cmNlXzJfaW5pdCBjYWxscyBLVU5JVF9SRVNPVVJDRV9U
RVNUX01BUktfT1JERVIKKwkgKiBiZWZvcmUgcmV0dXJuaW5nIHRvIGZha2VfcmVzb3VyY2VfMV9p
bml0LCBpdCBzaG91bGQgYmUgdGhlIGZpcnN0IHRvCisJICogcHV0IGl0cyBrZXkgaW4gdGhlIGFs
bG9jYXRlX29yZGVyIGFycmF5LgorCSAqLworCUtVTklUX0VYUEVDVF9FUSh0ZXN0LCBjdHgtPmFs
bG9jYXRlX29yZGVyWzBdLCAyKTsKKwlLVU5JVF9FWFBFQ1RfRVEodGVzdCwgY3R4LT5hbGxvY2F0
ZV9vcmRlclsxXSwgMSk7CisKKwlrdW5pdF9jbGVhbnVwKCZjdHgtPnRlc3QpOworCisJLyoKKwkg
KiBCZWNhdXNlIGZha2VfcmVzb3VyY2VfMiBmaW5pc2hlcyBhbGxvY2F0aW9uIGJlZm9yZSBmYWtl
X3Jlc291cmNlXzEsCisJICogZmFrZV9yZXNvdXJjZV8xIHNob3VsZCBiZSBmcmVlZCBmaXJzdCBz
aW5jZSBpdCBjb3VsZCBkZXBlbmQgb24KKwkgKiBmYWtlX3Jlc291cmNlXzIuCisJICovCisJS1VO
SVRfRVhQRUNUX0VRKHRlc3QsIGN0eC0+ZnJlZV9vcmRlclswXSwgMSk7CisJS1VOSVRfRVhQRUNU
X0VRKHRlc3QsIGN0eC0+ZnJlZV9vcmRlclsxXSwgMik7Cit9CisKK3N0YXRpYyBpbnQga3VuaXRf
cmVzb3VyY2VfdGVzdF9pbml0KHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRf
dGVzdF9yZXNvdXJjZV9jb250ZXh0ICpjdHggPQorCQkJa3phbGxvYyhzaXplb2YoKmN0eCksIEdG
UF9LRVJORUwpOworCisJS1VOSVRfQVNTRVJUX05PVF9FUlJfT1JfTlVMTCh0ZXN0LCBjdHgpOwor
CisJdGVzdC0+cHJpdiA9IGN0eDsKKworCWt1bml0X2luaXRfdGVzdCgmY3R4LT50ZXN0LCAidGVz
dF90ZXN0X2NvbnRleHQiKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgdm9pZCBrdW5pdF9y
ZXNvdXJjZV90ZXN0X2V4aXQoc3RydWN0IGt1bml0ICp0ZXN0KQoreworCXN0cnVjdCBrdW5pdF90
ZXN0X3Jlc291cmNlX2NvbnRleHQgKmN0eCA9IHRlc3QtPnByaXY7CisKKwlrdW5pdF9jbGVhbnVw
KCZjdHgtPnRlc3QpOworCWtmcmVlKGN0eCk7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qga3VuaXRfY2Fz
ZSBrdW5pdF9yZXNvdXJjZV90ZXN0X2Nhc2VzW10gPSB7CisJS1VOSVRfQ0FTRShrdW5pdF9yZXNv
dXJjZV90ZXN0X2luaXRfcmVzb3VyY2VzKSwKKwlLVU5JVF9DQVNFKGt1bml0X3Jlc291cmNlX3Rl
c3RfYWxsb2NfcmVzb3VyY2UpLAorCUtVTklUX0NBU0Uoa3VuaXRfcmVzb3VyY2VfdGVzdF9kZXN0
cm95X3Jlc291cmNlKSwKKwlLVU5JVF9DQVNFKGt1bml0X3Jlc291cmNlX3Rlc3RfY2xlYW51cF9y
ZXNvdXJjZXMpLAorCUtVTklUX0NBU0Uoa3VuaXRfcmVzb3VyY2VfdGVzdF9wcm9wZXJfZnJlZV9v
cmRlcmluZyksCisJe30KK307CisKK3N0YXRpYyBzdHJ1Y3Qga3VuaXRfc3VpdGUga3VuaXRfcmVz
b3VyY2VfdGVzdF9zdWl0ZSA9IHsKKwkubmFtZSA9ICJrdW5pdC1yZXNvdXJjZS10ZXN0IiwKKwku
aW5pdCA9IGt1bml0X3Jlc291cmNlX3Rlc3RfaW5pdCwKKwkuZXhpdCA9IGt1bml0X3Jlc291cmNl
X3Rlc3RfZXhpdCwKKwkudGVzdF9jYXNlcyA9IGt1bml0X3Jlc291cmNlX3Rlc3RfY2FzZXMsCit9
Owora3VuaXRfdGVzdF9zdWl0ZShrdW5pdF9yZXNvdXJjZV90ZXN0X3N1aXRlKTsKLS0gCjIuMjMu
MC5yYzEuMTUzLmdkZWVkODAzMzBmLWdvb2cKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2RyaS1kZXZlbA==
