Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 42CA0114DDD
	for <lists+dri-devel@lfdr.de>; Fri,  6 Dec 2019 10:00:19 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 899716F97E;
	Fri,  6 Dec 2019 09:00:04 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BA61A6E190
 for <dri-devel@lists.freedesktop.org>; Fri,  6 Dec 2019 08:59:59 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 47FCCB18B;
 Fri,  6 Dec 2019 08:59:58 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: airlied@redhat.com, daniel@ffwll.ch, sam@ravnborg.org, kraxel@redhat.com,
 emil.velikov@collabora.com, noralf@tronnes.org, zboszor@pr.hu
Subject: [PATCH v2 4/7] drm/udl: Move clip-rectangle code out of
 udl_handle_damage()
Date: Fri,  6 Dec 2019 09:59:51 +0100
Message-Id: <20191206085954.9697-5-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191206085954.9697-1-tzimmermann@suse.de>
References: <20191206085954.9697-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q29tcHV0aW5nIHRoZSBjbGlwIHJlY3RhYmxlIGluIGEgc2VwYXJhdGUgaGVscGVyIGZ1bmN0aW9u
IG1ha2VzIHRoZQpkYW1hZ2UtaGFuZGxlciBjb2RlIG1vcmUgcmVhZGFibGUuCgpTaWduZWQtb2Zm
LWJ5OiBUaG9tYXMgWmltbWVybWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4KUmV2aWV3ZWQtYnk6
IEVtaWwgVmVsaWtvdiA8ZW1pbC52ZWxpa292QGNvbGxhYm9yYS5jb20+CkFja2VkLWJ5OiBHZXJk
IEhvZmZtYW5uIDxrcmF4ZWxAcmVkaGF0LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vdWRsL3Vk
bF9mYi5jIHwgNDggKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tCiAxIGZpbGUg
Y2hhbmdlZCwgMzIgaW5zZXJ0aW9ucygrKSwgMTYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfZmIuYyBiL2RyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2Zi
LmMKaW5kZXggZGQ3YmE3ZjYzMjE0Li5jYzJhMDlhOTk1YjggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS91ZGwvdWRsX2ZiLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfZmIuYwpA
QCAtMjAsOSArMjAsNiBAQAogCiAjaW5jbHVkZSAidWRsX2Rydi5oIgogCi0jZGVmaW5lIERMX0FM
SUdOX1VQKHgsIGEpIEFMSUdOKHgsIGEpCi0jZGVmaW5lIERMX0FMSUdOX0RPV04oeCwgYSkgQUxJ
R05fRE9XTih4LCBhKQotCiAvKiogUmVhZCB0aGUgcmVkIGNvbXBvbmVudCAoMC4uMjU1KSBvZiBh
IDMyIGJwcCBjb2xvdXIuICovCiAjZGVmaW5lIERMT19SR0JfR0VUUkVEKGNvbCkgKHVpbnQ4X3Qp
KChjb2wpICYgMHhGRikKIApAQCAtNjEsNiArNTgsMjggQEAgc3RhdGljIHVpbnQxNl90IHJnYjE2
KHVpbnQzMl90IGNvbCkKIH0KICNlbmRpZgogCitzdGF0aWMgaW50IHVkbF9hbGlnbmVkX2RhbWFn
ZV9jbGlwKHN0cnVjdCBkcm1fcmVjdCAqY2xpcCwgaW50IHgsIGludCB5LAorCQkJCSAgIGludCB3
aWR0aCwgaW50IGhlaWdodCkKK3sKKwlpbnQgeDEsIHgyOworCisJaWYgKFdBUk5fT05fT05DRSh4
IDwgMCkgfHwKKwkgICAgV0FSTl9PTl9PTkNFKHkgPCAwKSB8fAorCSAgICBXQVJOX09OX09OQ0Uo
d2lkdGggPCAwKSB8fAorCSAgICBXQVJOX09OX09OQ0UoaGVpZ2h0IDwgMCkpCisJCXJldHVybiAt
RUlOVkFMOworCisJeDEgPSBBTElHTl9ET1dOKHgsIHNpemVvZih1bnNpZ25lZCBsb25nKSk7CisJ
eDIgPSBBTElHTih3aWR0aCArICh4IC0geDEpLCBzaXplb2YodW5zaWduZWQgbG9uZykpICsgeDE7
CisKKwljbGlwLT54MSA9IHgxOworCWNsaXAtPnkxID0geTsKKwljbGlwLT54MiA9IHgyOworCWNs
aXAtPnkyID0geSArIGhlaWdodDsKKworCXJldHVybiAwOworfQorCiBpbnQgdWRsX2hhbmRsZV9k
YW1hZ2Uoc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsIGludCB4LCBpbnQgeSwKIAkJICAgICAg
aW50IHdpZHRoLCBpbnQgaGVpZ2h0KQogewpAQCAtNjksNyArODgsNyBAQCBpbnQgdWRsX2hhbmRs
ZV9kYW1hZ2Uoc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsIGludCB4LCBpbnQgeSwKIAlpbnQg
aSwgcmV0OwogCWNoYXIgKmNtZDsKIAlzdHJ1Y3QgdXJiICp1cmI7Ci0JaW50IGFsaWduZWRfeDsK
KwlzdHJ1Y3QgZHJtX3JlY3QgY2xpcDsKIAlpbnQgbG9nX2JwcDsKIAl2b2lkICp2YWRkcjsKIApA
QCAtODUsMTUgKzEwNCwxMSBAQCBpbnQgdWRsX2hhbmRsZV9kYW1hZ2Uoc3RydWN0IGRybV9mcmFt
ZWJ1ZmZlciAqZmIsIGludCB4LCBpbnQgeSwKIAl9CiAJc3Bpbl91bmxvY2soJnVkbC0+YWN0aXZl
X2ZiXzE2X2xvY2spOwogCi0JYWxpZ25lZF94ID0gRExfQUxJR05fRE9XTih4LCBzaXplb2YodW5z
aWduZWQgbG9uZykpOwotCXdpZHRoID0gRExfQUxJR05fVVAod2lkdGggKyAoeC1hbGlnbmVkX3gp
LCBzaXplb2YodW5zaWduZWQgbG9uZykpOwotCXggPSBhbGlnbmVkX3g7Ci0KLQlpZiAoKHdpZHRo
IDw9IDApIHx8Ci0JICAgICh4ICsgd2lkdGggPiBmYi0+d2lkdGgpIHx8Ci0JICAgICh5ICsgaGVp
Z2h0ID4gZmItPmhlaWdodCkpIHsKKwlyZXQgPSB1ZGxfYWxpZ25lZF9kYW1hZ2VfY2xpcCgmY2xp
cCwgeCwgeSwgd2lkdGgsIGhlaWdodCk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKwllbHNl
IGlmICgoY2xpcC54MiA+IGZiLT53aWR0aCkgfHwgKGNsaXAueTIgPiBmYi0+aGVpZ2h0KSkKIAkJ
cmV0dXJuIC1FSU5WQUw7Ci0JfQogCiAJdmFkZHIgPSBkcm1fZ2VtX3NobWVtX3ZtYXAoZmItPm9i
alswXSk7CiAJaWYgKElTX0VSUih2YWRkcikpIHsKQEAgLTEwNiwxMyArMTIxLDE0IEBAIGludCB1
ZGxfaGFuZGxlX2RhbWFnZShzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiwgaW50IHgsIGludCB5
LAogCQlnb3RvIG91dDsKIAljbWQgPSB1cmItPnRyYW5zZmVyX2J1ZmZlcjsKIAotCWZvciAoaSA9
IHk7IGkgPCB5ICsgaGVpZ2h0IDsgaSsrKSB7CisJZm9yIChpID0gY2xpcC55MTsgaSA8IGNsaXAu
eTI7IGkrKykgewogCQljb25zdCBpbnQgbGluZV9vZmZzZXQgPSBmYi0+cGl0Y2hlc1swXSAqIGk7
Ci0JCWNvbnN0IGludCBieXRlX29mZnNldCA9IGxpbmVfb2Zmc2V0ICsgKHggPDwgbG9nX2JwcCk7
Ci0JCWNvbnN0IGludCBkZXZfYnl0ZV9vZmZzZXQgPSAoZmItPndpZHRoICogaSArIHgpIDw8IGxv
Z19icHA7CisJCWNvbnN0IGludCBieXRlX29mZnNldCA9IGxpbmVfb2Zmc2V0ICsgKGNsaXAueDEg
PDwgbG9nX2JwcCk7CisJCWNvbnN0IGludCBkZXZfYnl0ZV9vZmZzZXQgPSAoZmItPndpZHRoICog
aSArIGNsaXAueDEpIDw8IGxvZ19icHA7CisJCWNvbnN0IGludCBieXRlX3dpZHRoID0gKGNsaXAu
eDIgLSBjbGlwLngxKSA8PCBsb2dfYnBwOwogCQlpZiAodWRsX3JlbmRlcl9obGluZShkZXYsIGxv
Z19icHAsICZ1cmIsIChjaGFyICopdmFkZHIsCiAJCQkJICAgICAmY21kLCBieXRlX29mZnNldCwg
ZGV2X2J5dGVfb2Zmc2V0LAotCQkJCSAgICAgd2lkdGggPDwgbG9nX2JwcCkpCisJCQkJICAgICBi
eXRlX3dpZHRoKSkKIAkJCWdvdG8gb3V0OwogCX0KIAotLSAKMi4yMy4wCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0
CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
