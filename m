Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 322F4F122C
	for <lists+dri-devel@lfdr.de>; Wed,  6 Nov 2019 10:31:38 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5F7D76EC77;
	Wed,  6 Nov 2019 09:31:29 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F198C6EC79
 for <dri-devel@lists.freedesktop.org>; Wed,  6 Nov 2019 09:31:26 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 74C8DB3AC;
 Wed,  6 Nov 2019 09:31:25 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: daniel@ffwll.ch,
	christian.koenig@amd.com,
	noralf@tronnes.org
Subject: [PATCH 4/8] drm/gem: Return I/O-memory flag from drm_gem_vram()
Date: Wed,  6 Nov 2019 10:31:17 +0100
Message-Id: <20191106093121.21762-5-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191106093121.21762-1-tzimmermann@suse.de>
References: <20191106093121.21762-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V2l0aCB0aGlzIHBhdGNoLCBkcm1fZ2VtX3ZtYXAoKSBmb3J3YXJkcyB0aGUgaW9fbWVtIHBhcmFt
ZXRlcgpmcm9tIHRoZSB2bWFwIGltcGxlbWVudGF0aW9uIHRvIGl0cyBjYWxsZXIuIEJ5IGRlZmF1
bHQsIGlzX2lvbWVtCmlzIGFzc3VtZWQgdG8gYmUgZmFsc2UuIFRoaXMgbWF0Y2hlcyB0aGUgcmV0
dXJuIHR5cGUgYW5kIHRoZQpvbGQgYmVoYXZpb3VyLgoKU2lnbmVkLW9mZi1ieTogVGhvbWFzIFpp
bW1lcm1hbm4gPHR6aW1tZXJtYW5uQHN1c2UuZGU+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2RybV9j
bGllbnQuYyAgIHwgMiArLQogZHJpdmVycy9ncHUvZHJtL2RybV9nZW0uYyAgICAgIHwgOSArKysr
KystLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1faW50ZXJuYWwuaCB8IDIgKy0KIGRyaXZlcnMvZ3B1
L2RybS9kcm1fcHJpbWUuYyAgICB8IDIgKy0KIDQgZmlsZXMgY2hhbmdlZCwgOSBpbnNlcnRpb25z
KCspLCA2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fY2xp
ZW50LmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2NsaWVudC5jCmluZGV4IGQ5YTJlMzY5NTUyNS4u
MGVjYjU4ODc3OGM1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2NsaWVudC5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fY2xpZW50LmMKQEAgLTMxNyw3ICszMTcsNyBAQCB2b2lk
ICpkcm1fY2xpZW50X2J1ZmZlcl92bWFwKHN0cnVjdCBkcm1fY2xpZW50X2J1ZmZlciAqYnVmZmVy
KQogCSAqIGZkX2luc3RhbGwgc3RlcCBvdXQgb2YgdGhlIGRyaXZlciBiYWNrZW5kIGhvb2tzLCB0
byBtYWtlIHRoYXQKIAkgKiBmaW5hbCBzdGVwIG9wdGlvbmFsIGZvciBpbnRlcm5hbCB1c2Vycy4K
IAkgKi8KLQl2YWRkciA9IGRybV9nZW1fdm1hcChidWZmZXItPmdlbSk7CisJdmFkZHIgPSBkcm1f
Z2VtX3ZtYXAoYnVmZmVyLT5nZW0sIE5VTEwpOwogCWlmIChJU19FUlIodmFkZHIpKQogCQlyZXR1
cm4gdmFkZHI7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtLmMgYi9kcml2
ZXJzL2dwdS9kcm0vZHJtX2dlbS5jCmluZGV4IDBhY2ZiZDEzNGUwNC4uNmIxYWU0ODJkZmE5IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9kcm1fZ2VtLmMKQEAgLTEyNDYsMTQgKzEyNDYsMTcgQEAgdm9pZCBkcm1fZ2VtX3VucGluKHN0
cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKQogCQlvYmotPmRldi0+ZHJpdmVyLT5nZW1fcHJpbWVf
dW5waW4ob2JqKTsKIH0KIAotdm9pZCAqZHJtX2dlbV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVj
dCAqb2JqKQordm9pZCAqZHJtX2dlbV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBi
b29sICppc19pb21lbSkKIHsKIAl2b2lkICp2YWRkcjsKIAorCWlmIChpc19pb21lbSkKKwkJKmlz
X2lvbWVtID0gZmFsc2U7IC8qIGRlZmF1bHQgdmFsdWUgbWF0Y2hlcyByZXR1cm4gdHlwZSAqLwor
CiAJaWYgKG9iai0+ZnVuY3MgJiYgb2JqLT5mdW5jcy0+dm1hcCkKLQkJdmFkZHIgPSBvYmotPmZ1
bmNzLT52bWFwKG9iaiwgTlVMTCk7CisJCXZhZGRyID0gb2JqLT5mdW5jcy0+dm1hcChvYmosIGlz
X2lvbWVtKTsKIAllbHNlIGlmIChvYmotPmRldi0+ZHJpdmVyLT5nZW1fcHJpbWVfdm1hcCkKLQkJ
dmFkZHIgPSBvYmotPmRldi0+ZHJpdmVyLT5nZW1fcHJpbWVfdm1hcChvYmosIE5VTEwpOworCQl2
YWRkciA9IG9iai0+ZGV2LT5kcml2ZXItPmdlbV9wcmltZV92bWFwKG9iaiwgaXNfaW9tZW0pOwog
CWVsc2UKIAkJdmFkZHIgPSBFUlJfUFRSKC1FT1BOT1RTVVBQKTsKIApkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2RybV9pbnRlcm5hbC5oIGIvZHJpdmVycy9ncHUvZHJtL2RybV9pbnRlcm5h
bC5oCmluZGV4IDUxYTIwNTVjOGYxOC4uNzg1NzhlNmUxMTk3IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vZHJtX2ludGVybmFsLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9pbnRlcm5h
bC5oCkBAIC0xMzUsNyArMTM1LDcgQEAgdm9pZCBkcm1fZ2VtX3ByaW50X2luZm8oc3RydWN0IGRy
bV9wcmludGVyICpwLCB1bnNpZ25lZCBpbnQgaW5kZW50LAogCiBpbnQgZHJtX2dlbV9waW4oc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpvYmopOwogdm9pZCBkcm1fZ2VtX3VucGluKHN0cnVjdCBkcm1f
Z2VtX29iamVjdCAqb2JqKTsKLXZvaWQgKmRybV9nZW1fdm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmpl
Y3QgKm9iaik7Cit2b2lkICpkcm1fZ2VtX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmos
IGJvb2wgKmlzX2lvbWVtKTsKIHZvaWQgZHJtX2dlbV92dW5tYXAoc3RydWN0IGRybV9nZW1fb2Jq
ZWN0ICpvYmosIHZvaWQgKnZhZGRyKTsKIAogLyogZHJtX2RlYnVnZnMuYyBkcm1fZGVidWdmc19j
cmMuYyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9wcmltZS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2RybV9wcmltZS5jCmluZGV4IDA4MTQyMTFiMGYzZi4uNjg0OTJjYTQxOGVjIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW1lLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2RybV9wcmltZS5jCkBAIC02NzEsNyArNjcxLDcgQEAgdm9pZCAqZHJtX2dlbV9kbWFidWZf
dm1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1ZikKIAlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9i
aiA9IGRtYV9idWYtPnByaXY7CiAJdm9pZCAqdmFkZHI7CiAKLQl2YWRkciA9IGRybV9nZW1fdm1h
cChvYmopOworCXZhZGRyID0gZHJtX2dlbV92bWFwKG9iaiwgTlVMTCk7CiAJaWYgKElTX0VSUih2
YWRkcikpCiAJCXZhZGRyID0gTlVMTDsKIAotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1k
ZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
