Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 53BA895317
	for <lists+dri-devel@lfdr.de>; Tue, 20 Aug 2019 03:18:00 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 79B8E6E519;
	Tue, 20 Aug 2019 01:17:51 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A1E656E4D0
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 01:17:37 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 20FDFB83;
 Tue, 20 Aug 2019 03:17:35 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 05/50] drm/bridge: Extend bridge API to disable connector
 creation
Date: Tue, 20 Aug 2019 04:16:36 +0300
Message-Id: <20190820011721.30136-6-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
References: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1566263855;
 bh=l/WhE8Xy5lU/XB5tIKu94POhiLDQVgR82glaLc/ibsU=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=paedU5caf2EztRgtrbggPZ8b5yUGRunvRO2FpmNyDBc/++E9PqlwuQD9zVRTu8q9Y
 uE768vCOYzGQwKfCaYEXBbmkWyJM90NNiR5WTw8P1tbrav6WowZPI5ees6pMU9bkSG
 n5fsTh0zN9c2sQdzdp/DZOUlrupIAaTth4aKbTcA=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sean Paul <sean@poorly.run>,
 Sebastian Reichel <sebastian.reichel@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TW9zdCBicmlkZ2UgZHJpdmVycyBjcmVhdGUgYSBEUk0gY29ubmVjdG9yIHRvIG1vZGVsIHRoZSBj
b25uZWN0b3IgYXQgdGhlCm91dHB1dCBvZiB0aGUgYnJpZGdlLiBUaGlzIG1vZGVsIGlzIGhpc3Rv
cmljYWwgYW5kIGhhcyB3b3JrZWQgcHJldHR5CndlbGwgc28gZmFyLCBidXQgY2F1c2VzIHNldmVy
YWwgaXNzdWVzOgoKLSBJdCBwcmV2ZW50cyBzdXBwb3J0aW5nIG1vcmUgY29tcGxleCBkaXNwbGF5
IHBpcGVsaW5lcyB3aGVyZSBEUk0KY29ubmVjdG9yIG9wZXJhdGlvbnMgYXJlIHNwbGl0IG92ZXIg
bXVsdGlwbGUgY29tcG9uZW50cy4gRm9yIGluc3RhbmNlIGEKcGlwZWxpbmUgd2l0aCBhIGJyaWRn
ZSBjb25uZWN0ZWQgdG8gdGhlIEREQyBzaWduYWxzIHRvIHJlYWQgRURJRCBkYXRhLAphbmQgYW5v
dGhlciBvbmUgY29ubmVjdGVkIHRvIHRoZSBIUEQgc2lnbmFsIHRvIGRldGVjdCBjb25uZWN0aW9u
IGFuZApkaXNjb25uZWN0aW9uLCB3aWxsIG5vdCBiZSBwb3NzaWJsZSB0byBzdXBwb3J0IHRocm91
Z2ggdGhpcyBtb2RlbC4KCi0gSXQgcmVxdWlyZXMgZXZlcnkgYnJpZGdlIGRyaXZlciB0byBpbXBs
ZW1lbnQgc2ltaWxhciBjb25uZWN0b3IKaGFuZGxpbmcgY29kZSwgcmVzdWx0aW5nIGluIGNvZGUg
ZHVwbGljYXRpb24uCgotIEl0IGFzc3VtZXMgdGhhdCBhIGJyaWRnZSB3aWxsIGVpdGhlciBiZSB3
aXJlZCB0byBhIGNvbm5lY3RvciBvciB0bwphbm90aGVyIGJyaWRnZSwgYnV0IGRvZXNuJ3Qgc3Vw
cG9ydCBicmlkZ2VzIHRoYXQgY2FuIGJlIHVzZWQgaW4gYm90aApwb3NpdGlvbnMgdmVyeSB3ZWxs
IChhbHRob3VnaCB0aGVyZSBpcyBzb21lIGFkLWhvYyBzdXBwb3J0IGZvciB0aGlzIGluCnRoZSBh
bmFsb2dpeF9kcCBicmlkZ2UgZHJpdmVyKS4KCkluIG9yZGVyIHRvIHNvbHZlIHRoZXNlIGlzc3Vl
cywgb3duZXJzaGlwIG9mIHRoZSBjb25uZWN0b3Igc2hvdWxkIGJlCm1vdmVkIHRvIHRoZSBkaXNw
bGF5IGNvbnRyb2xsZXIgZHJpdmVyICh3aGVyZSBpdCBjYW4gYmUgaW1wbGVtZW50ZWQKdXNpbmcg
aGVscGVycyBwcm92aWRlZCBieSB0aGUgY29yZSkuCgpFeHRlbmQgdGhlIGJyaWRnZSBBUEkgdG8g
YWxsb3cgZGlzYWJsaW5nIGNvbm5lY3RvciBjcmVhdGlvbiBpbiBicmlkZ2UKZHJpdmVycyBhcyBh
IGZpcnN0IHN0ZXAgdG93YXJkcyB0aGUgbmV3IG1vZGVsLiBUaGUgbmV3IGNyZWF0ZV9jb25uZWN0
b3IKYXJndW1lbnQgdG8gdGhlIGJyaWRnZSAuYXR0YWNoKCkgb3BlcmF0aW9uIHRlbGxzIHRoZSBi
cmlkZ2UgZHJpdmVyCndoZXRoZXIgdG8gY3JlYXRlIGEgY29ubmVjdG9yLiBTZXQgdGhlIGFyZ3Vt
ZW50IHRvIHRydWUgdW5jb25kaXRpb25hbGx5LAphbmQgbW9kaWZ5IGFsbCBleGlzdGluZyBicmlk
Z2UgZHJpdmVycyB0byByZXR1cm4gYW4gZXJyb3Igd2hlbiBjb25uZWN0b3IKY3JlYXRpb24gaXMg
bm90IHJlcXVlc3RlZCBhcyB0aGV5IGRvbid0IHN1cHBvcnQgdGhpcyBmZWF0dXJlIHlldC4KClRo
ZSBjaGFuZ2UgaXMgYmFzZWQgb24gdGhlIGZvbGxvd2luZyBzZW1hbnRpYyBwYXRjaCwgd2l0aCBt
YW51YWwgcmV2aWV3CmFuZCBlZGl0cy4KCkAgcnVsZTEgQAppZGVudGlmaWVyIGZ1bmNzOwppZGVu
dGlmaWVyIGZuOwpAQAogc3RydWN0IGRybV9icmlkZ2VfZnVuY3MgZnVuY3MgPSB7CiAJLi4uLAog
CS5hdHRhY2ggPSBmbgogfTsKCkAgZGVwZW5kcyBvbiBydWxlMSBACmlkZW50aWZpZXIgcnVsZTEu
Zm47CmlkZW50aWZpZXIgYnJpZGdlOwpzdGF0ZW1lbnQgUywgUzE7CkBACiBpbnQgZm4oCiAJc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZQorCSwgZW51bSBkcm1fYnJpZGdlX2F0dGFjaF9mbGFncyBm
bGFncwogKQogewogCS4uLiB3aGVuICE9IFMKKwlpZiAoZmxhZ3MgJiBEUk1fQlJJREdFX0FUVEFD
SF9OT19DT05ORUNUT1IpCisJCXJldHVybiAtRUlOVkFMOworCiAJUzEKIAkuLi4KIH0KCkBACmV4
cHJlc3Npb24gRTEsIEUyLCBFMzsKQEAKIGRybV9icmlkZ2VfYXR0YWNoKEUxLCBFMiwgRTMKKwks
IDAKICkKClNpZ25lZC1vZmYtYnk6IExhdXJlbnQgUGluY2hhcnQgPGxhdXJlbnQucGluY2hhcnRA
aWRlYXNvbmJvYXJkLmNvbT4KLS0tCkNoYW5nZXMgc2luY2UgdjE6CgotIFJlcGxhY2UgdGhlIGNy
ZWF0ZV9jb25uZWN0b3IgYm9vbGVhbiB3aXRoIGEgZmxhZ3MgYml0bWFzawotIFVwZGF0ZSBpbmdl
bmljIGRyaXZlcgotIEFkZCBzZW1hbnRpYyBwYXRjaCB0byBjb21taXQgbWVzc2FnZQotLS0KIGRy
aXZlcnMvZ3B1L2RybS9hcmMvYXJjcGd1X2hkbWkuYyAgICAgICAgICAgICB8ICAyICstCiAuLi4v
Z3B1L2RybS9hdG1lbC1obGNkYy9hdG1lbF9obGNkY19vdXRwdXQuYyAgfCAgMiArLQogZHJpdmVy
cy9ncHUvZHJtL2JyaWRnZS9hZHY3NTExL2Fkdjc1MTFfZHJ2LmMgIHwgIDYgKysrKystCiBkcml2
ZXJzL2dwdS9kcm0vYnJpZGdlL2FuYWxvZ2l4LWFueDc4eHguYyAgICAgfCAgNiArKysrKy0KIC4u
Li9kcm0vYnJpZGdlL2FuYWxvZ2l4L2FuYWxvZ2l4X2RwX2NvcmUuYyAgICB8ICA4ICsrKysrKy0t
CiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2NkbnMtZHNpLmMgICAgICAgICAgICAgfCAgNiArKysr
LS0KIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvZHVtYi12Z2EtZGFjLmMgICAgICAgICB8ICA2ICsr
KysrLQogZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9sdmRzLWVuY29kZXIuYyAgICAgICAgIHwgIDUg
KysrLS0KIC4uLi9icmlkZ2UvbWVnYWNoaXBzLXN0ZHB4eHh4LWdlLWI4NTB2My1mdy5jICB8ICA2
ICsrKysrLQogZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ueHAtcHRuMzQ2MC5jICAgICAgICAgIHwg
IDYgKysrKystCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3BhbmVsLmMgICAgICAgICAgICAgICAg
fCAgNiArKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvcGFyYWRlLXBzODYyMi5jICAgICAg
ICB8ICA2ICsrKysrLQogZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zaWk5MDJ4LmMgICAgICAgICAg
ICAgIHwgIDYgKysrKystCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3NpbC1zaWk4NjIwLmMgICAg
ICAgICAgfCAgMyArKy0KIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctaGRtaS5j
ICAgICB8ICA4ICsrKysrKy0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LW1p
cGktZHNpLmMgfCAgOCArKysrKy0tLQogZHJpdmVycy9ncHUvZHJtL2JyaWRnZS90YzM1ODc2NC5j
ICAgICAgICAgICAgIHwgIDYgKysrKystCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY3
LmMgICAgICAgICAgICAgfCAgNiArKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGhjNjNs
dmQxMDI0LmMgICAgICAgICB8ICA1ICsrKy0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RpLXNu
NjVkc2k4Ni5jICAgICAgICAgfCAgNiArKysrKy0KIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGkt
dGZwNDEwLmMgICAgICAgICAgICB8ICA2ICsrKysrLQogZHJpdmVycy9ncHUvZHJtL2RybV9icmlk
Z2UuYyAgICAgICAgICAgICAgICAgIHwgIDYgKysrKy0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX3Np
bXBsZV9rbXNfaGVscGVyLmMgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2V4eW5vcy9l
eHlub3NfZHAuYyAgICAgICAgICAgIHwgIDMgKystCiBkcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4
eW5vc19kcm1fZHNpLmMgICAgICAgfCAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4
eW5vc19oZG1pLmMgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2ZzbC1kY3UvZnNs
X2RjdV9kcm1fcmdiLmMgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2ly
aW4vZHdfZHJtX2RzaS5jICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTJjL3RkYTk5OHhfZHJ2
LmMgICAgICAgICAgICAgfCAgOCArKysrKystLQogZHJpdmVycy9ncHUvZHJtL2lteC9pbXgtbGRi
LmMgICAgICAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pbXgvcGFyYWxsZWwt
ZGlzcGxheS5jICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaW5nZW5pYy9pbmdlbmlj
LWRybS5jICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL21jZGUvbWNkZV9kc2kuYyAg
ICAgICAgICAgICAgIHwgIDggKysrKysrLS0KIGRyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtf
ZHBpLmMgICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2Rz
aS5jICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19oZG1p
LmMgICAgICAgICAgIHwgIDggKysrKysrLS0KIGRyaXZlcnMvZ3B1L2RybS9tc20vZHNpL2RzaV9t
YW5hZ2VyLmMgICAgICAgICB8ICA0ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9tc20vZWRwL2VkcF9i
cmlkZ2UuYyAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2hkbWkvaGRtaV9i
cmlkZ2UuYyAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9kcnYu
YyAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfZHVfZW5j
b2Rlci5jICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2x2ZHMuYyAg
ICAgICAgICAgfCAgOCArKysrKystLQogZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlw
X2x2ZHMuYyAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9y
Z2IuYyAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vc3RpL3N0aV9kdm8uYyAgICAgICAg
ICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL3N0aS9zdGlfaGRhLmMgICAgICAgICAg
ICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9zdGkvc3RpX2hkbWkuYyAgICAgICAgICAg
ICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vc3RtL2x0ZGMuYyAgICAgICAgICAgICAgICAg
ICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL3N1bjRpL3N1bjRpX2x2ZHMuYyAgICAgICAgICAg
IHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9zdW40aS9zdW40aV9yZ2IuYyAgICAgICAgICAgICB8
ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vdGlsY2RjL3RpbGNkY19leHRlcm5hbC5jICAgICAgfCAg
MiArLQogZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfZHBpLmMgICAgICAgICAgICAgICAgIHwgIDIg
Ky0KIGRyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2RzaS5jICAgICAgICAgICAgICAgICB8ICAyICst
CiBpbmNsdWRlL2RybS9kcm1fYnJpZGdlLmggICAgICAgICAgICAgICAgICAgICAgfCAyMCArKysr
KysrKysrKysrKysrLS0tCiA1NCBmaWxlcyBjaGFuZ2VkLCAxNjYgaW5zZXJ0aW9ucygrKSwgNzAg
ZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FyYy9hcmNwZ3VfaGRt
aS5jIGIvZHJpdmVycy9ncHUvZHJtL2FyYy9hcmNwZ3VfaGRtaS5jCmluZGV4IDk4YWFjNzQzY2My
Ni4uYWIwMjNlMDcwNTI5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYXJjL2FyY3BndV9o
ZG1pLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FyYy9hcmNwZ3VfaGRtaS5jCkBAIC0zOSw3ICsz
OSw3IEBAIGludCBhcmNwZ3VfZHJtX2hkbWlfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZHJtLCBz
dHJ1Y3QgZGV2aWNlX25vZGUgKm5wKQogCQlyZXR1cm4gcmV0OwogCiAJLyogTGluayBkcm1fYnJp
ZGdlIHRvIGVuY29kZXIgKi8KLQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChlbmNvZGVyLCBicmlk
Z2UsIE5VTEwpOworCXJldCA9IGRybV9icmlkZ2VfYXR0YWNoKGVuY29kZXIsIGJyaWRnZSwgTlVM
TCwgMCk7CiAJaWYgKHJldCkKIAkJZHJtX2VuY29kZXJfY2xlYW51cChlbmNvZGVyKTsKIApkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2F0bWVsLWhsY2RjL2F0bWVsX2hsY2RjX291dHB1dC5j
IGIvZHJpdmVycy9ncHUvZHJtL2F0bWVsLWhsY2RjL2F0bWVsX2hsY2RjX291dHB1dC5jCmluZGV4
IDM3NWZhODRjNTQ4Yi4uYzM4ODQ5NzM2NmNhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YXRtZWwtaGxjZGMvYXRtZWxfaGxjZGNfb3V0cHV0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2F0
bWVsLWhsY2RjL2F0bWVsX2hsY2RjX291dHB1dC5jCkBAIC0xMTMsNyArMTEzLDcgQEAgc3RhdGlj
IGludCBhdG1lbF9obGNkY19hdHRhY2hfZW5kcG9pbnQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwg
aW50IGVuZHBvaW50KQogCX0KIAogCWlmIChicmlkZ2UpIHsKLQkJcmV0ID0gZHJtX2JyaWRnZV9h
dHRhY2goJm91dHB1dC0+ZW5jb2RlciwgYnJpZGdlLCBOVUxMKTsKKwkJcmV0ID0gZHJtX2JyaWRn
ZV9hdHRhY2goJm91dHB1dC0+ZW5jb2RlciwgYnJpZGdlLCBOVUxMLCAwKTsKIAkJaWYgKCFyZXQp
CiAJCQlyZXR1cm4gMDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9hZHY3
NTExL2Fkdjc1MTFfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2Fkdjc1MTEvYWR2NzUx
MV9kcnYuYwppbmRleCA5OGJjY2FjZThjMWMuLjZlNDJkNWUwNWQwNyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2JyaWRnZS9hZHY3NTExL2Fkdjc1MTFfZHJ2LmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2JyaWRnZS9hZHY3NTExL2Fkdjc1MTFfZHJ2LmMKQEAgLTg0NywxMSArODQ3LDE1IEBA
IHN0YXRpYyB2b2lkIGFkdjc1MTFfYnJpZGdlX21vZGVfc2V0KHN0cnVjdCBkcm1fYnJpZGdlICpi
cmlkZ2UsCiAJYWR2NzUxMV9tb2RlX3NldChhZHYsIG1vZGUsIGFkal9tb2RlKTsKIH0KIAotc3Rh
dGljIGludCBhZHY3NTExX2JyaWRnZV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkK
K3N0YXRpYyBpbnQgYWR2NzUxMV9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlk
Z2UsCisJCQkJIGVudW0gZHJtX2JyaWRnZV9hdHRhY2hfZmxhZ3MgZmxhZ3MpCiB7CiAJc3RydWN0
IGFkdjc1MTEgKmFkdiA9IGJyaWRnZV90b19hZHY3NTExKGJyaWRnZSk7CiAJaW50IHJldDsKIAor
CWlmIChmbGFncyAmIERSTV9CUklER0VfQVRUQUNIX05PX0NPTk5FQ1RPUikKKwkJcmV0dXJuIC1F
SU5WQUw7CisKIAlpZiAoIWJyaWRnZS0+ZW5jb2RlcikgewogCQlEUk1fRVJST1IoIlBhcmVudCBl
bmNvZGVyIG9iamVjdCBub3QgZm91bmQiKTsKIAkJcmV0dXJuIC1FTk9ERVY7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2FuYWxvZ2l4LWFueDc4eHguYyBiL2RyaXZlcnMvZ3B1
L2RybS9icmlkZ2UvYW5hbG9naXgtYW54Nzh4eC5jCmluZGV4IDNjN2NjNWFmNzM1Yy4uOTk1YTU0
NTQ3ZmJlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2FuYWxvZ2l4LWFueDc4
eHguYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2FuYWxvZ2l4LWFueDc4eHguYwpAQCAt
OTk4LDExICs5OTgsMTUgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNz
IGFueDc4eHhfY29ubmVjdG9yX2Z1bmNzID0gewogCS5hdG9taWNfZGVzdHJveV9zdGF0ZSA9IGRy
bV9hdG9taWNfaGVscGVyX2Nvbm5lY3Rvcl9kZXN0cm95X3N0YXRlLAogfTsKIAotc3RhdGljIGlu
dCBhbng3OHh4X2JyaWRnZV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3N0YXRp
YyBpbnQgYW54Nzh4eF9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJ
CQkJIGVudW0gZHJtX2JyaWRnZV9hdHRhY2hfZmxhZ3MgZmxhZ3MpCiB7CiAJc3RydWN0IGFueDc4
eHggKmFueDc4eHggPSBicmlkZ2VfdG9fYW54Nzh4eChicmlkZ2UpOwogCWludCBlcnI7CiAKKwlp
ZiAoZmxhZ3MgJiBEUk1fQlJJREdFX0FUVEFDSF9OT19DT05ORUNUT1IpCisJCXJldHVybiAtRUlO
VkFMOworCiAJaWYgKCFicmlkZ2UtPmVuY29kZXIpIHsKIAkJRFJNX0VSUk9SKCJQYXJlbnQgZW5j
b2RlciBvYmplY3Qgbm90IGZvdW5kIik7CiAJCXJldHVybiAtRU5PREVWOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9hbmFsb2dpeC9hbmFsb2dpeF9kcF9jb3JlLmMgYi9kcml2
ZXJzL2dwdS9kcm0vYnJpZGdlL2FuYWxvZ2l4L2FuYWxvZ2l4X2RwX2NvcmUuYwppbmRleCAyMjg4
NWRjZWFhMTcuLmQ5MDNlZWQzNjhlMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9hbmFsb2dpeC9hbmFsb2dpeF9kcF9jb3JlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRn
ZS9hbmFsb2dpeC9hbmFsb2dpeF9kcF9jb3JlLmMKQEAgLTEyMTUsMTMgKzEyMTUsMTcgQEAgc3Rh
dGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIGFuYWxvZ2l4X2RwX2Nvbm5lY3Rv
cl9mdW5jcyA9IHsKIAkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9j
b25uZWN0b3JfZGVzdHJveV9zdGF0ZSwKIH07CiAKLXN0YXRpYyBpbnQgYW5hbG9naXhfZHBfYnJp
ZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQorc3RhdGljIGludCBhbmFsb2dp
eF9kcF9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJICAgICBl
bnVtIGRybV9icmlkZ2VfYXR0YWNoX2ZsYWdzIGZsYWdzKQogewogCXN0cnVjdCBhbmFsb2dpeF9k
cF9kZXZpY2UgKmRwID0gYnJpZGdlLT5kcml2ZXJfcHJpdmF0ZTsKIAlzdHJ1Y3QgZHJtX2VuY29k
ZXIgKmVuY29kZXIgPSBkcC0+ZW5jb2RlcjsKIAlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVj
dG9yID0gTlVMTDsKIAlpbnQgcmV0ID0gMDsKIAorCWlmIChmbGFncyAmIERSTV9CUklER0VfQVRU
QUNIX05PX0NPTk5FQ1RPUikKKwkJcmV0dXJuIC1FSU5WQUw7CisKIAlpZiAoIWJyaWRnZS0+ZW5j
b2RlcikgewogCQlEUk1fRVJST1IoIlBhcmVudCBlbmNvZGVyIG9iamVjdCBub3QgZm91bmQiKTsK
IAkJcmV0dXJuIC1FTk9ERVY7CkBAIC0xNTg3LDcgKzE1OTEsNyBAQCBzdGF0aWMgaW50IGFuYWxv
Z2l4X2RwX2NyZWF0ZV9icmlkZ2Uoc3RydWN0IGRybV9kZXZpY2UgKmRybV9kZXYsCiAJYnJpZGdl
LT5kcml2ZXJfcHJpdmF0ZSA9IGRwOwogCWJyaWRnZS0+ZnVuY3MgPSAmYW5hbG9naXhfZHBfYnJp
ZGdlX2Z1bmNzOwogCi0JcmV0ID0gZHJtX2JyaWRnZV9hdHRhY2goZHAtPmVuY29kZXIsIGJyaWRn
ZSwgTlVMTCk7CisJcmV0ID0gZHJtX2JyaWRnZV9hdHRhY2goZHAtPmVuY29kZXIsIGJyaWRnZSwg
TlVMTCwgMCk7CiAJaWYgKHJldCkgewogCQlEUk1fRVJST1IoImZhaWxlZCB0byBhdHRhY2ggZHJt
IGJyaWRnZVxuIik7CiAJCXJldHVybiAtRUlOVkFMOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS9jZG5zLWRzaS5jIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9jZG5zLWRzaS5j
CmluZGV4IDYxNjZkY2E2YmU4MS4uMmFmN2YyNWM3NDEzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vYnJpZGdlL2NkbnMtZHNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9jZG5z
LWRzaS5jCkBAIC02NDUsNyArNjQ1LDggQEAgc3RhdGljIGludCBjZG5zX2RzaV9jaGVja19jb25m
KHN0cnVjdCBjZG5zX2RzaSAqZHNpLAogCXJldHVybiAwOwogfQogCi1zdGF0aWMgaW50IGNkbnNf
ZHNpX2JyaWRnZV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3N0YXRpYyBpbnQg
Y2Ruc19kc2lfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCSAg
ZW51bSBkcm1fYnJpZGdlX2F0dGFjaF9mbGFncyBmbGFncykKIHsKIAlzdHJ1Y3QgY2Ruc19kc2lf
aW5wdXQgKmlucHV0ID0gYnJpZGdlX3RvX2NkbnNfZHNpX2lucHV0KGJyaWRnZSk7CiAJc3RydWN0
IGNkbnNfZHNpICpkc2kgPSBpbnB1dF90b19kc2koaW5wdXQpOwpAQCAtNjU3LDcgKzY1OCw4IEBA
IHN0YXRpYyBpbnQgY2Ruc19kc2lfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJp
ZGdlKQogCQlyZXR1cm4gLUVOT1RTVVBQOwogCX0KIAotCXJldHVybiBkcm1fYnJpZGdlX2F0dGFj
aChicmlkZ2UtPmVuY29kZXIsIG91dHB1dC0+YnJpZGdlLCBicmlkZ2UpOworCXJldHVybiBkcm1f
YnJpZGdlX2F0dGFjaChicmlkZ2UtPmVuY29kZXIsIG91dHB1dC0+YnJpZGdlLCBicmlkZ2UsCisJ
CQkJIGZsYWdzKTsKIH0KIAogc3RhdGljIGVudW0gZHJtX21vZGVfc3RhdHVzCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2R1bWItdmdhLWRhYy5jIGIvZHJpdmVycy9ncHUvZHJt
L2JyaWRnZS9kdW1iLXZnYS1kYWMuYwppbmRleCA3YWE3ODljMzU4ODIuLjc0ZWJjYTU4ZWIxZiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9kdW1iLXZnYS1kYWMuYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vYnJpZGdlL2R1bWItdmdhLWRhYy5jCkBAIC05OSwxMSArOTksMTUgQEAg
c3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIGR1bWJfdmdhX2Nvbl9mdW5j
cyA9IHsKIAkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUJPSBkcm1fYXRvbWljX2hlbHBlcl9jb25uZWN0
b3JfZGVzdHJveV9zdGF0ZSwKIH07CiAKLXN0YXRpYyBpbnQgZHVtYl92Z2FfYXR0YWNoKHN0cnVj
dCBkcm1fYnJpZGdlICpicmlkZ2UpCitzdGF0aWMgaW50IGR1bWJfdmdhX2F0dGFjaChzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJICAgZW51bSBkcm1fYnJpZGdlX2F0dGFjaF9mbGFncyBm
bGFncykKIHsKIAlzdHJ1Y3QgZHVtYl92Z2EgKnZnYSA9IGRybV9icmlkZ2VfdG9fZHVtYl92Z2Eo
YnJpZGdlKTsKIAlpbnQgcmV0OwogCisJaWYgKGZsYWdzICYgRFJNX0JSSURHRV9BVFRBQ0hfTk9f
Q09OTkVDVE9SKQorCQlyZXR1cm4gLUVJTlZBTDsKKwogCWlmICghYnJpZGdlLT5lbmNvZGVyKSB7
CiAJCURSTV9FUlJPUigiTWlzc2luZyBlbmNvZGVyXG4iKTsKIAkJcmV0dXJuIC1FTk9ERVY7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2x2ZHMtZW5jb2Rlci5jIGIvZHJpdmVy
cy9ncHUvZHJtL2JyaWRnZS9sdmRzLWVuY29kZXIuYwppbmRleCAyYWIyYzIzNGYyNmMuLjllYmM3
NTA0NDljZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9sdmRzLWVuY29kZXIu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2x2ZHMtZW5jb2Rlci5jCkBAIC0xOCwxNCAr
MTgsMTUgQEAgc3RydWN0IGx2ZHNfZW5jb2RlciB7CiAJc3RydWN0IGdwaW9fZGVzYyAqcG93ZXJk
b3duX2dwaW87CiB9OwogCi1zdGF0aWMgaW50IGx2ZHNfZW5jb2Rlcl9hdHRhY2goc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSkKK3N0YXRpYyBpbnQgbHZkc19lbmNvZGVyX2F0dGFjaChzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJICAgICAgIGVudW0gZHJtX2JyaWRnZV9hdHRhY2hfZmxh
Z3MgZmxhZ3MpCiB7CiAJc3RydWN0IGx2ZHNfZW5jb2RlciAqbHZkc19lbmNvZGVyID0gY29udGFp
bmVyX29mKGJyaWRnZSwKIAkJCQkJCQkgc3RydWN0IGx2ZHNfZW5jb2RlciwKIAkJCQkJCQkgYnJp
ZGdlKTsKIAogCXJldHVybiBkcm1fYnJpZGdlX2F0dGFjaChicmlkZ2UtPmVuY29kZXIsIGx2ZHNf
ZW5jb2Rlci0+cGFuZWxfYnJpZGdlLAotCQkJCSBicmlkZ2UpOworCQkJCSBicmlkZ2UsIGZsYWdz
KTsKIH0KIAogc3RhdGljIHZvaWQgbHZkc19lbmNvZGVyX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRn
ZSAqYnJpZGdlKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9tZWdhY2hpcHMt
c3RkcHh4eHgtZ2UtYjg1MHYzLWZ3LmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL21lZ2FjaGlw
cy1zdGRweHh4eC1nZS1iODUwdjMtZncuYwppbmRleCA2ZTgxZTVkYjU3ZjIuLjEzODAyOTFmNjY3
MiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9tZWdhY2hpcHMtc3RkcHh4eHgt
Z2UtYjg1MHYzLWZ3LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9tZWdhY2hpcHMtc3Rk
cHh4eHgtZ2UtYjg1MHYzLWZ3LmMKQEAgLTIwNSwxMyArMjA1LDE3IEBAIHN0YXRpYyBpcnFyZXR1
cm5fdCBnZV9iODUwdjNfbHZkc19pcnFfaGFuZGxlcihpbnQgaXJxLCB2b2lkICpkZXZfaWQpCiAJ
cmV0dXJuIElSUV9IQU5ETEVEOwogfQogCi1zdGF0aWMgaW50IGdlX2I4NTB2M19sdmRzX2F0dGFj
aChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQorc3RhdGljIGludCBnZV9iODUwdjNfbHZkc19h
dHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgZW51bSBkcm1fYnJpZGdlX2F0
dGFjaF9mbGFncyBmbGFncykKIHsKIAlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yID0g
JmdlX2I4NTB2M19sdmRzX3B0ci0+Y29ubmVjdG9yOwogCXN0cnVjdCBpMmNfY2xpZW50ICpzdGRw
NDAyOF9pMmMKIAkJCT0gZ2VfYjg1MHYzX2x2ZHNfcHRyLT5zdGRwNDAyOF9pMmM7CiAJaW50IHJl
dDsKIAorCWlmIChmbGFncyAmIERSTV9CUklER0VfQVRUQUNIX05PX0NPTk5FQ1RPUikKKwkJcmV0
dXJuIC1FSU5WQUw7CisKIAlpZiAoIWJyaWRnZS0+ZW5jb2RlcikgewogCQlEUk1fRVJST1IoIlBh
cmVudCBlbmNvZGVyIG9iamVjdCBub3QgZm91bmQiKTsKIAkJcmV0dXJuIC1FTk9ERVY7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL254cC1wdG4zNDYwLmMgYi9kcml2ZXJzL2dw
dS9kcm0vYnJpZGdlL254cC1wdG4zNDYwLmMKaW5kZXggZDRhMWNjNTA1MmMzLi40MmM2OWU5ZDBk
NzAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbnhwLXB0bjM0NjAuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL254cC1wdG4zNDYwLmMKQEAgLTIzNSwxMSArMjM1LDE1
IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9mdW5jcyBwdG4zNDYwX2Nvbm5l
Y3Rvcl9mdW5jcyA9IHsKIAkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBl
cl9jb25uZWN0b3JfZGVzdHJveV9zdGF0ZSwKIH07CiAKLXN0YXRpYyBpbnQgcHRuMzQ2MF9icmlk
Z2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCitzdGF0aWMgaW50IHB0bjM0NjBf
YnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCSBlbnVtIGRybV9i
cmlkZ2VfYXR0YWNoX2ZsYWdzIGZsYWdzKQogewogCXN0cnVjdCBwdG4zNDYwX2JyaWRnZSAqcHRu
X2JyaWRnZSA9IGJyaWRnZV90b19wdG4zNDYwKGJyaWRnZSk7CiAJaW50IHJldDsKIAorCWlmIChm
bGFncyAmIERSTV9CUklER0VfQVRUQUNIX05PX0NPTk5FQ1RPUikKKwkJcmV0dXJuIC1FSU5WQUw7
CisKIAlpZiAoIWJyaWRnZS0+ZW5jb2RlcikgewogCQlEUk1fRVJST1IoIlBhcmVudCBlbmNvZGVy
IG9iamVjdCBub3QgZm91bmQiKTsKIAkJcmV0dXJuIC1FTk9ERVY7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vYnJpZGdlL3BhbmVsLmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3BhbmVs
LmMKaW5kZXggYjEyYWUzYTRjNWYxLi5mNWI4ZTU1MzAxYWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9icmlkZ2UvcGFuZWwuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3BhbmVs
LmMKQEAgLTUyLDEyICs1MiwxNiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3Jf
ZnVuY3MgcGFuZWxfYnJpZGdlX2Nvbm5lY3Rvcl9mdW5jcyA9IHsKIAkuYXRvbWljX2Rlc3Ryb3lf
c3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9jb25uZWN0b3JfZGVzdHJveV9zdGF0ZSwKIH07CiAK
LXN0YXRpYyBpbnQgcGFuZWxfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdl
KQorc3RhdGljIGludCBwYW5lbF9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlk
Z2UsCisJCQkgICAgICAgZW51bSBkcm1fYnJpZGdlX2F0dGFjaF9mbGFncyBmbGFncykKIHsKIAlz
dHJ1Y3QgcGFuZWxfYnJpZGdlICpwYW5lbF9icmlkZ2UgPSBkcm1fYnJpZGdlX3RvX3BhbmVsX2Jy
aWRnZShicmlkZ2UpOwogCXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IgPSAmcGFuZWxf
YnJpZGdlLT5jb25uZWN0b3I7CiAJaW50IHJldDsKIAorCWlmIChmbGFncyAmIERSTV9CUklER0Vf
QVRUQUNIX05PX0NPTk5FQ1RPUikKKwkJcmV0dXJuIC1FSU5WQUw7CisKIAlpZiAoIWJyaWRnZS0+
ZW5jb2RlcikgewogCQlEUk1fRVJST1IoIk1pc3NpbmcgZW5jb2RlclxuIik7CiAJCXJldHVybiAt
RU5PREVWOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9wYXJhZGUtcHM4NjIy
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3BhcmFkZS1wczg2MjIuYwppbmRleCA5M2M2OGUy
ZTk0ODQuLjgxNjQ4MmRmMjdhOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9w
YXJhZGUtcHM4NjIyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9wYXJhZGUtcHM4NjIy
LmMKQEAgLTQ3NSwxMSArNDc1LDE1IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rv
cl9mdW5jcyBwczg2MjJfY29ubmVjdG9yX2Z1bmNzID0gewogCS5hdG9taWNfZGVzdHJveV9zdGF0
ZSA9IGRybV9hdG9taWNfaGVscGVyX2Nvbm5lY3Rvcl9kZXN0cm95X3N0YXRlLAogfTsKIAotc3Rh
dGljIGludCBwczg2MjJfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCitzdGF0aWMg
aW50IHBzODYyMl9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCSBlbnVtIGRy
bV9icmlkZ2VfYXR0YWNoX2ZsYWdzIGZsYWdzKQogewogCXN0cnVjdCBwczg2MjJfYnJpZGdlICpw
czg2MjIgPSBicmlkZ2VfdG9fcHM4NjIyKGJyaWRnZSk7CiAJaW50IHJldDsKIAorCWlmIChmbGFn
cyAmIERSTV9CUklER0VfQVRUQUNIX05PX0NPTk5FQ1RPUikKKwkJcmV0dXJuIC1FSU5WQUw7CisK
IAlpZiAoIWJyaWRnZS0+ZW5jb2RlcikgewogCQlEUk1fRVJST1IoIlBhcmVudCBlbmNvZGVyIG9i
amVjdCBub3QgZm91bmQiKTsKIAkJcmV0dXJuIC1FTk9ERVY7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL3NpaTkwMnguYyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc2lpOTAy
eC5jCmluZGV4IDM4Zjc1YWM1ODBkZi4uNTFmNWQ3ZThlMzYwIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL3NpaTkwMnguYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3Np
aTkwMnguYwpAQCAtMzk4LDEyICszOTgsMTYgQEAgc3RhdGljIHZvaWQgc2lpOTAyeF9icmlkZ2Vf
bW9kZV9zZXQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKIAltdXRleF91bmxvY2soJnNpaTkw
MngtPm11dGV4KTsKIH0KIAotc3RhdGljIGludCBzaWk5MDJ4X2JyaWRnZV9hdHRhY2goc3RydWN0
IGRybV9icmlkZ2UgKmJyaWRnZSkKK3N0YXRpYyBpbnQgc2lpOTAyeF9icmlkZ2VfYXR0YWNoKHN0
cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJIGVudW0gZHJtX2JyaWRnZV9hdHRhY2hfZmxh
Z3MgZmxhZ3MpCiB7CiAJc3RydWN0IHNpaTkwMnggKnNpaTkwMnggPSBicmlkZ2VfdG9fc2lpOTAy
eChicmlkZ2UpOwogCXN0cnVjdCBkcm1fZGV2aWNlICpkcm0gPSBicmlkZ2UtPmRldjsKIAlpbnQg
cmV0OwogCisJaWYgKGZsYWdzICYgRFJNX0JSSURHRV9BVFRBQ0hfTk9fQ09OTkVDVE9SKQorCQly
ZXR1cm4gLUVJTlZBTDsKKwogCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZCgmc2lpOTAyeC0+Y29u
bmVjdG9yLAogCQkJCSAmc2lpOTAyeF9jb25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zaWwtc2lpODYyMC5jIGIvZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS9zaWwtc2lpODYyMC5jCmluZGV4IGJkMzE2NWVlNTM1NC4uNDYxYmRlYjMyNTY4
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3NpbC1zaWk4NjIwLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zaWwtc2lpODYyMC5jCkBAIC0yMjAwLDcgKzIyMDAsOCBA
QCBzdGF0aWMgaW5saW5lIHN0cnVjdCBzaWk4NjIwICpicmlkZ2VfdG9fc2lpODYyMChzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlKQogCXJldHVybiBjb250YWluZXJfb2YoYnJpZGdlLCBzdHJ1Y3Qg
c2lpODYyMCwgYnJpZGdlKTsKIH0KIAotc3RhdGljIGludCBzaWk4NjIwX2F0dGFjaChzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlKQorc3RhdGljIGludCBzaWk4NjIwX2F0dGFjaChzdHJ1Y3QgZHJt
X2JyaWRnZSAqYnJpZGdlLAorCQkJICBlbnVtIGRybV9icmlkZ2VfYXR0YWNoX2ZsYWdzIGZsYWdz
KQogewogCXN0cnVjdCBzaWk4NjIwICpjdHggPSBicmlkZ2VfdG9fc2lpODYyMChicmlkZ2UpOwog
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LWhkbWkuYyBi
L2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctaGRtaS5jCmluZGV4IDQwNDQwNzEw
OTBjNC4uY2I4NmM0NzA1Y2U4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5
bm9wc3lzL2R3LWhkbWkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3
LWhkbWkuYwpAQCAtMjIyNSwxMiArMjIyNSwxNiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9j
b25uZWN0b3JfaGVscGVyX2Z1bmNzIGR3X2hkbWlfY29ubmVjdG9yX2hlbHBlcl9mdW5jcyA9CiAJ
LmdldF9tb2RlcyA9IGR3X2hkbWlfY29ubmVjdG9yX2dldF9tb2RlcywKIH07CiAKLXN0YXRpYyBp
bnQgZHdfaGRtaV9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCitzdGF0
aWMgaW50IGR3X2hkbWlfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAor
CQkJCSBlbnVtIGRybV9icmlkZ2VfYXR0YWNoX2ZsYWdzIGZsYWdzKQogewogCXN0cnVjdCBkd19o
ZG1pICpoZG1pID0gYnJpZGdlLT5kcml2ZXJfcHJpdmF0ZTsKIAlzdHJ1Y3QgZHJtX2VuY29kZXIg
KmVuY29kZXIgPSBicmlkZ2UtPmVuY29kZXI7CiAJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5l
Y3RvciA9ICZoZG1pLT5jb25uZWN0b3I7CiAKKwlpZiAoZmxhZ3MgJiBEUk1fQlJJREdFX0FUVEFD
SF9OT19DT05ORUNUT1IpCisJCXJldHVybiAtRUlOVkFMOworCiAJY29ubmVjdG9yLT5pbnRlcmxh
Y2VfYWxsb3dlZCA9IDE7CiAJY29ubmVjdG9yLT5wb2xsZWQgPSBEUk1fQ09OTkVDVE9SX1BPTExf
SFBEOwogCkBAIC0yOTExLDcgKzI5MTUsNyBAQCBzdHJ1Y3QgZHdfaGRtaSAqZHdfaGRtaV9iaW5k
KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYsCiAJaWYgKElTX0VSUihoZG1pKSkKIAkJcmV0
dXJuIGhkbWk7CiAKLQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChlbmNvZGVyLCAmaGRtaS0+YnJp
ZGdlLCBOVUxMKTsKKwlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChlbmNvZGVyLCAmaGRtaS0+YnJp
ZGdlLCBOVUxMLCAwKTsKIAlpZiAocmV0KSB7CiAJCWR3X2hkbWlfcmVtb3ZlKGhkbWkpOwogCQlE
Uk1fRVJST1IoIkZhaWxlZCB0byBpbml0aWFsaXplIGJyaWRnZSB3aXRoIGRybVxuIik7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LW1pcGktZHNpLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LW1pcGktZHNpLmMKaW5kZXggNjc1NDQy
YmZjMWJkLi45MjQ1ZGRlMzE0YTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uv
c3lub3BzeXMvZHctbWlwaS1kc2kuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9w
c3lzL2R3LW1pcGktZHNpLmMKQEAgLTkyMyw3ICs5MjMsOCBAQCBkd19taXBpX2RzaV9icmlkZ2Vf
bW9kZV92YWxpZChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCXJldHVybiBtb2RlX3N0YXR1
czsKIH0KIAotc3RhdGljIGludCBkd19taXBpX2RzaV9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1f
YnJpZGdlICpicmlkZ2UpCitzdGF0aWMgaW50IGR3X21pcGlfZHNpX2JyaWRnZV9hdHRhY2goc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgICAgIGVudW0gZHJtX2JyaWRnZV9hdHRhY2hf
ZmxhZ3MgZmxhZ3MpCiB7CiAJc3RydWN0IGR3X21pcGlfZHNpICpkc2kgPSBicmlkZ2VfdG9fZHNp
KGJyaWRnZSk7CiAKQEAgLTkzNiw3ICs5MzcsOCBAQCBzdGF0aWMgaW50IGR3X21pcGlfZHNpX2Jy
aWRnZV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIAlicmlkZ2UtPmVuY29kZXIt
PmVuY29kZXJfdHlwZSA9IERSTV9NT0RFX0VOQ09ERVJfRFNJOwogCiAJLyogQXR0YWNoIHRoZSBw
YW5lbC1icmlkZ2UgdG8gdGhlIGRzaSBicmlkZ2UgKi8KLQlyZXR1cm4gZHJtX2JyaWRnZV9hdHRh
Y2goYnJpZGdlLT5lbmNvZGVyLCBkc2ktPnBhbmVsX2JyaWRnZSwgYnJpZGdlKTsKKwlyZXR1cm4g
ZHJtX2JyaWRnZV9hdHRhY2goYnJpZGdlLT5lbmNvZGVyLCBkc2ktPnBhbmVsX2JyaWRnZSwgYnJp
ZGdlLAorCQkJCSBmbGFncyk7CiB9CiAKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV9m
dW5jcyBkd19taXBpX2RzaV9icmlkZ2VfZnVuY3MgPSB7CkBAIC0xMTExLDcgKzExMTMsNyBAQCBp
bnQgZHdfbWlwaV9kc2lfYmluZChzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwgc3RydWN0IGRybV9l
bmNvZGVyICplbmNvZGVyKQogewogCWludCByZXQ7CiAKLQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFj
aChlbmNvZGVyLCAmZHNpLT5icmlkZ2UsIE5VTEwpOworCXJldCA9IGRybV9icmlkZ2VfYXR0YWNo
KGVuY29kZXIsICZkc2ktPmJyaWRnZSwgTlVMTCwgdHJ1ZSk7CiAJaWYgKHJldCkgewogCQlEUk1f
RVJST1IoIkZhaWxlZCB0byBpbml0aWFsaXplIGJyaWRnZSB3aXRoIGRybVxuIik7CiAJCXJldHVy
biByZXQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY0LmMgYi9k
cml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY0LmMKaW5kZXggMTcwZjE2MmZmYTU1Li5lYTc2
OGQyYjgwYmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGMzNTg3NjQuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY0LmMKQEAgLTM0OCwxMiArMzQ4LDE2
IEBAIHN0YXRpYyB2b2lkIHRjMzU4NzY0X2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdl
KQogCQlkZXZfZXJyKGN0eC0+ZGV2LCAiZXJyb3IgZW5hYmxpbmcgcGFuZWwgKCVkKVxuIiwgcmV0
KTsKIH0KIAotc3RhdGljIGludCB0YzM1ODc2NF9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJy
aWRnZSkKK3N0YXRpYyBpbnQgdGMzNTg3NjRfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlk
Z2UsCisJCQkgICBlbnVtIGRybV9icmlkZ2VfYXR0YWNoX2ZsYWdzIGZsYWdzKQogewogCXN0cnVj
dCB0YzM1ODc2NCAqY3R4ID0gYnJpZGdlX3RvX3RjMzU4NzY0KGJyaWRnZSk7CiAJc3RydWN0IGRy
bV9kZXZpY2UgKmRybSA9IGJyaWRnZS0+ZGV2OwogCWludCByZXQ7CiAKKwlpZiAoZmxhZ3MgJiBE
Uk1fQlJJREdFX0FUVEFDSF9OT19DT05ORUNUT1IpCisJCXJldHVybiAtRUlOVkFMOworCiAJY3R4
LT5jb25uZWN0b3IucG9sbGVkID0gRFJNX0NPTk5FQ1RPUl9QT0xMX0hQRDsKIAlyZXQgPSBkcm1f
Y29ubmVjdG9yX2luaXQoZHJtLCAmY3R4LT5jb25uZWN0b3IsCiAJCQkJICZ0YzM1ODc2NF9jb25u
ZWN0b3JfZnVuY3MsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY3
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY3LmMKaW5kZXggY2ViYzhlNjIwODIw
Li5mOTBkNzJhODUxNjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGMzNTg3
NjcuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY3LmMKQEAgLTEzNzgsMTMg
KzEzNzgsMTcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIHRjX2Nv
bm5lY3Rvcl9mdW5jcyA9IHsKIAkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hl
bHBlcl9jb25uZWN0b3JfZGVzdHJveV9zdGF0ZSwKIH07CiAKLXN0YXRpYyBpbnQgdGNfYnJpZGdl
X2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQorc3RhdGljIGludCB0Y19icmlkZ2Vf
YXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkgICAgZW51bSBkcm1fYnJpZGdl
X2F0dGFjaF9mbGFncyBmbGFncykKIHsKIAl1MzIgYnVzX2Zvcm1hdCA9IE1FRElBX0JVU19GTVRf
UkdCODg4XzFYMjQ7CiAJc3RydWN0IHRjX2RhdGEgKnRjID0gYnJpZGdlX3RvX3RjKGJyaWRnZSk7
CiAJc3RydWN0IGRybV9kZXZpY2UgKmRybSA9IGJyaWRnZS0+ZGV2OwogCWludCByZXQ7CiAKKwlp
ZiAoZmxhZ3MgJiBEUk1fQlJJREdFX0FUVEFDSF9OT19DT05ORUNUT1IpCisJCXJldHVybiAtRUlO
VkFMOworCiAJLyogQ3JlYXRlIERQL2VEUCBjb25uZWN0b3IgKi8KIAlkcm1fY29ubmVjdG9yX2hl
bHBlcl9hZGQoJnRjLT5jb25uZWN0b3IsICZ0Y19jb25uZWN0b3JfaGVscGVyX2Z1bmNzKTsKIAly
ZXQgPSBkcm1fY29ubmVjdG9yX2luaXQoZHJtLCAmdGMtPmNvbm5lY3RvciwgJnRjX2Nvbm5lY3Rv
cl9mdW5jcywKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGhjNjNsdmQxMDI0
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RoYzYzbHZkMTAyNC5jCmluZGV4IDNkNzQxMjli
Mjk5NS4uOTdkODEyOTc2MGU5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3Ro
YzYzbHZkMTAyNC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvdGhjNjNsdmQxMDI0LmMK
QEAgLTQyLDExICs0MiwxMiBAQCBzdGF0aWMgaW5saW5lIHN0cnVjdCB0aGM2M19kZXYgKnRvX3Ro
YzYzKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCiAJcmV0dXJuIGNvbnRhaW5lcl9vZihicmlk
Z2UsIHN0cnVjdCB0aGM2M19kZXYsIGJyaWRnZSk7CiB9CiAKLXN0YXRpYyBpbnQgdGhjNjNfYXR0
YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCitzdGF0aWMgaW50IHRoYzYzX2F0dGFjaChz
dHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJZW51bSBkcm1fYnJpZGdlX2F0dGFjaF9mbGFn
cyBmbGFncykKIHsKIAlzdHJ1Y3QgdGhjNjNfZGV2ICp0aGM2MyA9IHRvX3RoYzYzKGJyaWRnZSk7
CiAKLQlyZXR1cm4gZHJtX2JyaWRnZV9hdHRhY2goYnJpZGdlLT5lbmNvZGVyLCB0aGM2My0+bmV4
dCwgYnJpZGdlKTsKKwlyZXR1cm4gZHJtX2JyaWRnZV9hdHRhY2goYnJpZGdlLT5lbmNvZGVyLCB0
aGM2My0+bmV4dCwgYnJpZGdlLCBmbGFncyk7CiB9CiAKIHN0YXRpYyBlbnVtIGRybV9tb2RlX3N0
YXR1cyB0aGM2M19tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RpLXNuNjVkc2k4Ni5jIGIvZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS90aS1zbjY1ZHNpODYuYwppbmRleCAwYTU4MDk1N2M4Y2YuLmU5NzBkM2ZiYzIw
YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS90aS1zbjY1ZHNpODYuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RpLXNuNjVkc2k4Ni5jCkBAIC0yNjMsNyArMjYzLDgg
QEAgc3RhdGljIGludCB0aV9zbl9icmlkZ2VfcGFyc2VfcmVndWxhdG9ycyhzdHJ1Y3QgdGlfc25f
YnJpZGdlICpwZGF0YSkKIAkJCQkgICAgICAgcGRhdGEtPnN1cHBsaWVzKTsKIH0KIAotc3RhdGlj
IGludCB0aV9zbl9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCitzdGF0
aWMgaW50IHRpX3NuX2JyaWRnZV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJ
CSAgICAgICBlbnVtIGRybV9icmlkZ2VfYXR0YWNoX2ZsYWdzIGZsYWdzKQogewogCWludCByZXQs
IHZhbDsKIAlzdHJ1Y3QgdGlfc25fYnJpZGdlICpwZGF0YSA9IGJyaWRnZV90b190aV9zbl9icmlk
Z2UoYnJpZGdlKTsKQEAgLTI3NCw2ICsyNzUsOSBAQCBzdGF0aWMgaW50IHRpX3NuX2JyaWRnZV9h
dHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIAkJCQkJCSAgIC5ub2RlID0gTlVMTCwK
IAkJCQkJCSB9OwogCisJaWYgKGZsYWdzICYgRFJNX0JSSURHRV9BVFRBQ0hfTk9fQ09OTkVDVE9S
KQorCQlyZXR1cm4gLUVJTlZBTDsKKwogCXJldCA9IGRybV9jb25uZWN0b3JfaW5pdChicmlkZ2Ut
PmRldiwgJnBkYXRhLT5jb25uZWN0b3IsCiAJCQkJICZ0aV9zbl9icmlkZ2VfY29ubmVjdG9yX2Z1
bmNzLAogCQkJCSBEUk1fTU9ERV9DT05ORUNUT1JfZURQKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9icmlkZ2UvdGktdGZwNDEwLmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RpLXRm
cDQxMC5jCmluZGV4IDYxY2MyMzU0ZWYxYi4uYTkzNTkwMzhmN2RjIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYnJpZGdlL3RpLXRmcDQxMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9icmlk
Z2UvdGktdGZwNDEwLmMKQEAgLTExNywxMSArMTE3LDE1IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZHJtX2Nvbm5lY3Rvcl9mdW5jcyB0ZnA0MTBfY29uX2Z1bmNzID0gewogCS5hdG9taWNfZGVzdHJv
eV9zdGF0ZQk9IGRybV9hdG9taWNfaGVscGVyX2Nvbm5lY3Rvcl9kZXN0cm95X3N0YXRlLAogfTsK
IAotc3RhdGljIGludCB0ZnA0MTBfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCitz
dGF0aWMgaW50IHRmcDQxMF9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCSBl
bnVtIGRybV9icmlkZ2VfYXR0YWNoX2ZsYWdzIGZsYWdzKQogewogCXN0cnVjdCB0ZnA0MTAgKmR2
aSA9IGRybV9icmlkZ2VfdG9fdGZwNDEwKGJyaWRnZSk7CiAJaW50IHJldDsKIAorCWlmIChmbGFn
cyAmIERSTV9CUklER0VfQVRUQUNIX05PX0NPTk5FQ1RPUikKKwkJcmV0dXJuIC1FSU5WQUw7CisK
IAlpZiAoIWJyaWRnZS0+ZW5jb2RlcikgewogCQlkZXZfZXJyKGR2aS0+ZGV2LCAiTWlzc2luZyBl
bmNvZGVyXG4iKTsKIAkJcmV0dXJuIC1FTk9ERVY7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vZHJtX2JyaWRnZS5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9icmlkZ2UuYwppbmRleCBjZjFm
YmVkODg0MTAuLjgxNDAyN2E5OGZjYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9i
cmlkZ2UuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2JyaWRnZS5jCkBAIC05OSw2ICs5OSw3
IEBAIEVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9yZW1vdmUpOwogICogQGVuY29kZXI6IERSTSBl
bmNvZGVyCiAgKiBAYnJpZGdlOiBicmlkZ2UgdG8gYXR0YWNoCiAgKiBAcHJldmlvdXM6IHByZXZp
b3VzIGJyaWRnZSBpbiB0aGUgY2hhaW4gKG9wdGlvbmFsKQorICogQGZsYWdzOiBEUk1fQlJJREdF
X0FUVEFDSF8qIGZsYWdzCiAgKgogICogQ2FsbGVkIGJ5IGEga21zIGRyaXZlciB0byBsaW5rIHRo
ZSBicmlkZ2UgdG8gYW4gZW5jb2RlcidzIGNoYWluLiBUaGUgcHJldmlvdXMKICAqIGFyZ3VtZW50
IHNwZWNpZmllcyB0aGUgcHJldmlvdXMgYnJpZGdlIGluIHRoZSBjaGFpbi4gSWYgTlVMTCwgdGhl
IGJyaWRnZSBpcwpAQCAtMTE2LDcgKzExNyw4IEBAIEVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9y
ZW1vdmUpOwogICogWmVybyBvbiBzdWNjZXNzLCBlcnJvciBjb2RlIG9uIGZhaWx1cmUKICAqLwog
aW50IGRybV9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2Rlciwgc3RydWN0
IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJICAgICAgc3RydWN0IGRybV9icmlkZ2UgKnByZXZpb3Vz
KQorCQkgICAgICBzdHJ1Y3QgZHJtX2JyaWRnZSAqcHJldmlvdXMsCisJCSAgICAgIGVudW0gZHJt
X2JyaWRnZV9hdHRhY2hfZmxhZ3MgZmxhZ3MpCiB7CiAJaW50IHJldDsKIApAQCAtMTMzLDcgKzEz
NSw3IEBAIGludCBkcm1fYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIs
IHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJYnJpZGdlLT5lbmNvZGVyID0gZW5jb2RlcjsK
IAogCWlmIChicmlkZ2UtPmZ1bmNzLT5hdHRhY2gpIHsKLQkJcmV0ID0gYnJpZGdlLT5mdW5jcy0+
YXR0YWNoKGJyaWRnZSk7CisJCXJldCA9IGJyaWRnZS0+ZnVuY3MtPmF0dGFjaChicmlkZ2UsIGZs
YWdzKTsKIAkJaWYgKHJldCA8IDApIHsKIAkJCWJyaWRnZS0+ZGV2ID0gTlVMTDsKIAkJCWJyaWRn
ZS0+ZW5jb2RlciA9IE5VTEw7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX3NpbXBs
ZV9rbXNfaGVscGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3NpbXBsZV9rbXNfaGVscGVyLmMK
aW5kZXggYjExOTEwZjE0YzQ2Li5lYTEwNWQxMzcwNjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9kcm1fc2ltcGxlX2ttc19oZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3Np
bXBsZV9rbXNfaGVscGVyLmMKQEAgLTIyOCw3ICsyMjgsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0
IGRybV9wbGFuZV9mdW5jcyBkcm1fc2ltcGxlX2ttc19wbGFuZV9mdW5jcyA9IHsKIGludCBkcm1f
c2ltcGxlX2Rpc3BsYXlfcGlwZV9hdHRhY2hfYnJpZGdlKHN0cnVjdCBkcm1fc2ltcGxlX2Rpc3Bs
YXlfcGlwZSAqcGlwZSwKIAkJCQkJICBzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogewotCXJl
dHVybiBkcm1fYnJpZGdlX2F0dGFjaCgmcGlwZS0+ZW5jb2RlciwgYnJpZGdlLCBOVUxMKTsKKwly
ZXR1cm4gZHJtX2JyaWRnZV9hdHRhY2goJnBpcGUtPmVuY29kZXIsIGJyaWRnZSwgTlVMTCwgMCk7
CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9zaW1wbGVfZGlzcGxheV9waXBlX2F0dGFjaF9icmlkZ2Up
OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4eW5vc19kcC5jIGIvZHJp
dmVycy9ncHUvZHJtL2V4eW5vcy9leHlub3NfZHAuYwppbmRleCAzYTBmMGJhOGM2M2EuLjNmNzlj
ODE1MWFhZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2V4eW5vcy9leHlub3NfZHAuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4eW5vc19kcC5jCkBAIC0xMDUsNyArMTA1LDgg
QEAgc3RhdGljIGludCBleHlub3NfZHBfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgYW5hbG9naXhfZHBf
cGxhdF9kYXRhICpwbGF0X2RhdGEsCiAKIAkvKiBQcmUtZW1wdCBEUCBjb25uZWN0b3IgY3JlYXRp
b24gaWYgdGhlcmUncyBhIGJyaWRnZSAqLwogCWlmIChkcC0+cHRuX2JyaWRnZSkgewotCQlyZXQg
PSBkcm1fYnJpZGdlX2F0dGFjaCgmZHAtPmVuY29kZXIsIGRwLT5wdG5fYnJpZGdlLCBicmlkZ2Up
OworCQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaCgmZHAtPmVuY29kZXIsIGRwLT5wdG5fYnJpZGdl
LCBicmlkZ2UsCisJCQkJCTApOwogCQlpZiAocmV0KSB7CiAJCQlEUk1fREVWX0VSUk9SKGRwLT5k
ZXYsCiAJCQkJICAgICAgIkZhaWxlZCB0byBhdHRhY2ggYnJpZGdlIHRvIGRybVxuIik7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4eW5vc19kcm1fZHNpLmMgYi9kcml2ZXJz
L2dwdS9kcm0vZXh5bm9zL2V4eW5vc19kcm1fZHNpLmMKaW5kZXggNjkyNmNlZTkxYjM2Li5hODRh
MTk3OWUzMjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9k
c2kuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4eW5vc19kcm1fZHNpLmMKQEAgLTE1
MTksNyArMTUxOSw3IEBAIHN0YXRpYyBpbnQgZXh5bm9zX2RzaV9ob3N0X2F0dGFjaChzdHJ1Y3Qg
bWlwaV9kc2lfaG9zdCAqaG9zdCwKIAogCW91dF9icmlkZ2UgID0gb2ZfZHJtX2ZpbmRfYnJpZGdl
KGRldmljZS0+ZGV2Lm9mX25vZGUpOwogCWlmIChvdXRfYnJpZGdlKSB7Ci0JCWRybV9icmlkZ2Vf
YXR0YWNoKGVuY29kZXIsIG91dF9icmlkZ2UsIE5VTEwpOworCQlkcm1fYnJpZGdlX2F0dGFjaChl
bmNvZGVyLCBvdXRfYnJpZGdlLCBOVUxMLCAwKTsKIAkJZHNpLT5vdXRfYnJpZGdlID0gb3V0X2Jy
aWRnZTsKIAkJZW5jb2Rlci0+YnJpZGdlID0gTlVMTDsKIAl9IGVsc2UgewpAQCAtMTY5NSw3ICsx
Njk1LDcgQEAgc3RhdGljIGludCBleHlub3NfZHNpX2JpbmQoc3RydWN0IGRldmljZSAqZGV2LCBz
dHJ1Y3QgZGV2aWNlICptYXN0ZXIsCiAJaWYgKGRzaS0+aW5fYnJpZGdlX25vZGUpIHsKIAkJaW5f
YnJpZGdlID0gb2ZfZHJtX2ZpbmRfYnJpZGdlKGRzaS0+aW5fYnJpZGdlX25vZGUpOwogCQlpZiAo
aW5fYnJpZGdlKQotCQkJZHJtX2JyaWRnZV9hdHRhY2goZW5jb2RlciwgaW5fYnJpZGdlLCBOVUxM
KTsKKwkJCWRybV9icmlkZ2VfYXR0YWNoKGVuY29kZXIsIGluX2JyaWRnZSwgTlVMTCwgMCk7CiAJ
fQogCiAJcmV0dXJuIG1pcGlfZHNpX2hvc3RfcmVnaXN0ZXIoJmRzaS0+ZHNpX2hvc3QpOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2V4eW5vcy9leHlub3NfaGRtaS5jIGIvZHJpdmVycy9n
cHUvZHJtL2V4eW5vcy9leHlub3NfaGRtaS5jCmluZGV4IGJjMTU2NWYxODIyYS4uOTk3ODc0M2Vl
MDU4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4eW5vc19oZG1pLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2V4eW5vcy9leHlub3NfaGRtaS5jCkBAIC05NTIsNyArOTUyLDcg
QEAgc3RhdGljIGludCBoZG1pX2NyZWF0ZV9jb25uZWN0b3Ioc3RydWN0IGRybV9lbmNvZGVyICpl
bmNvZGVyKQogCWRybV9jb25uZWN0b3JfYXR0YWNoX2VuY29kZXIoY29ubmVjdG9yLCBlbmNvZGVy
KTsKIAogCWlmIChoZGF0YS0+YnJpZGdlKSB7Ci0JCXJldCA9IGRybV9icmlkZ2VfYXR0YWNoKGVu
Y29kZXIsIGhkYXRhLT5icmlkZ2UsIE5VTEwpOworCQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChl
bmNvZGVyLCBoZGF0YS0+YnJpZGdlLCBOVUxMLCAwKTsKIAkJaWYgKHJldCkKIAkJCURSTV9ERVZf
RVJST1IoaGRhdGEtPmRldiwgIkZhaWxlZCB0byBhdHRhY2ggYnJpZGdlXG4iKTsKIAl9CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZnNsLWRjdS9mc2xfZGN1X2RybV9yZ2IuYyBiL2RyaXZl
cnMvZ3B1L2RybS9mc2wtZGN1L2ZzbF9kY3VfZHJtX3JnYi5jCmluZGV4IGE5MmZkNmM3MGIwOS4u
OTAwYTMzZTFkMmZiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZnNsLWRjdS9mc2xfZGN1
X2RybV9yZ2IuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZnNsLWRjdS9mc2xfZGN1X2RybV9yZ2Iu
YwpAQCAtMTUwLDUgKzE1MCw1IEBAIGludCBmc2xfZGN1X2NyZWF0ZV9vdXRwdXRzKHN0cnVjdCBm
c2xfZGN1X2RybV9kZXZpY2UgKmZzbF9kZXYpCiAJCXJldHVybiBmc2xfZGN1X2F0dGFjaF9wYW5l
bChmc2xfZGV2LCBwYW5lbCk7CiAJfQogCi0JcmV0dXJuIGRybV9icmlkZ2VfYXR0YWNoKCZmc2xf
ZGV2LT5lbmNvZGVyLCBicmlkZ2UsIE5VTEwpOworCXJldHVybiBkcm1fYnJpZGdlX2F0dGFjaCgm
ZnNsX2Rldi0+ZW5jb2RlciwgYnJpZGdlLCBOVUxMLCAwKTsKIH0KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4vZHdfZHJtX2RzaS5jIGIvZHJpdmVycy9ncHUvZHJt
L2hpc2lsaWNvbi9raXJpbi9kd19kcm1fZHNpLmMKaW5kZXggNWJmODEzODk0MWRlLi40MzU0M2Ew
ODc3YTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4vZHdfZHJt
X2RzaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4vZHdfZHJtX2RzaS5j
CkBAIC03NzYsNyArNzc2LDcgQEAgc3RhdGljIGludCBkc2lfYnJpZGdlX2luaXQoc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwgc3RydWN0IGR3X2RzaSAqZHNpKQogCWludCByZXQ7CiAKIAkvKiBhc3Nv
Y2lhdGUgdGhlIGJyaWRnZSB0byBkc2kgZW5jb2RlciAqLwotCXJldCA9IGRybV9icmlkZ2VfYXR0
YWNoKGVuY29kZXIsIGJyaWRnZSwgTlVMTCk7CisJcmV0ID0gZHJtX2JyaWRnZV9hdHRhY2goZW5j
b2RlciwgYnJpZGdlLCBOVUxMLCAwKTsKIAlpZiAocmV0KSB7CiAJCURSTV9FUlJPUigiZmFpbGVk
IHRvIGF0dGFjaCBleHRlcm5hbCBicmlkZ2VcbiIpOwogCQlyZXR1cm4gcmV0OwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2kyYy90ZGE5OTh4X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL2ky
Yy90ZGE5OTh4X2Rydi5jCmluZGV4IDg0YzZkNGM5MWM2NS4uM2Y5YTNkNWRiZGViIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTJjL3RkYTk5OHhfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2kyYy90ZGE5OTh4X2Rydi5jCkBAIC0xMzU1LDEwICsxMzU1LDE0IEBAIHN0YXRpYyBpbnQg
dGRhOTk4eF9jb25uZWN0b3JfaW5pdChzdHJ1Y3QgdGRhOTk4eF9wcml2ICpwcml2LAogCiAvKiBE
Uk0gYnJpZGdlIGZ1bmN0aW9ucyAqLwogCi1zdGF0aWMgaW50IHRkYTk5OHhfYnJpZGdlX2F0dGFj
aChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQorc3RhdGljIGludCB0ZGE5OTh4X2JyaWRnZV9h
dHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgZW51bSBkcm1fYnJpZGdlX2F0
dGFjaF9mbGFncyBmbGFncykKIHsKIAlzdHJ1Y3QgdGRhOTk4eF9wcml2ICpwcml2ID0gYnJpZGdl
X3RvX3RkYTk5OHhfcHJpdihicmlkZ2UpOwogCisJaWYgKGZsYWdzICYgRFJNX0JSSURHRV9BVFRB
Q0hfTk9fQ09OTkVDVE9SKQorCQlyZXR1cm4gLUVJTlZBTDsKKwogCXJldHVybiB0ZGE5OTh4X2Nv
bm5lY3Rvcl9pbml0KHByaXYsIGJyaWRnZS0+ZGV2KTsKIH0KIApAQCAtMjAyMiw3ICsyMDI2LDcg
QEAgc3RhdGljIGludCB0ZGE5OTh4X2VuY29kZXJfaW5pdChzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0
cnVjdCBkcm1fZGV2aWNlICpkcm0pCiAJaWYgKHJldCkKIAkJZ290byBlcnJfZW5jb2RlcjsKIAot
CXJldCA9IGRybV9icmlkZ2VfYXR0YWNoKCZwcml2LT5lbmNvZGVyLCAmcHJpdi0+YnJpZGdlLCBO
VUxMKTsKKwlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaCgmcHJpdi0+ZW5jb2RlciwgJnByaXYtPmJy
aWRnZSwgTlVMTCwgMCk7CiAJaWYgKHJldCkKIAkJZ290byBlcnJfYnJpZGdlOwogCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaW14L2lteC1sZGIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pbXgv
aW14LWxkYi5jCmluZGV4IDY5NWYzMDdmMzZiMi4uNjM1OGU5NzMzMzk4IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaW14L2lteC1sZGIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaW14L2lt
eC1sZGIuYwpAQCAtNDQ1LDcgKzQ0NSw3IEBAIHN0YXRpYyBpbnQgaW14X2xkYl9yZWdpc3Rlcihz
dHJ1Y3QgZHJtX2RldmljZSAqZHJtLAogCiAJaWYgKGlteF9sZGJfY2gtPmJyaWRnZSkgewogCQly
ZXQgPSBkcm1fYnJpZGdlX2F0dGFjaCgmaW14X2xkYl9jaC0+ZW5jb2RlciwKLQkJCQkJaW14X2xk
Yl9jaC0+YnJpZGdlLCBOVUxMKTsKKwkJCQkJaW14X2xkYl9jaC0+YnJpZGdlLCBOVUxMLCAwKTsK
IAkJaWYgKHJldCkgewogCQkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBicmlkZ2Ug
d2l0aCBkcm1cbiIpOwogCQkJcmV0dXJuIHJldDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pbXgvcGFyYWxsZWwtZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL2lteC9wYXJhbGxlbC1k
aXNwbGF5LmMKaW5kZXggZTdjZTE3NTAzYWUxLi5lMzg1Y2U1ZGViOTAgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9pbXgvcGFyYWxsZWwtZGlzcGxheS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pbXgvcGFyYWxsZWwtZGlzcGxheS5jCkBAIC0xODEsNyArMTgxLDcgQEAgc3RhdGljIGludCBp
bXhfcGRfcmVnaXN0ZXIoc3RydWN0IGRybV9kZXZpY2UgKmRybSwKIAkJZHJtX3BhbmVsX2F0dGFj
aChpbXhwZC0+cGFuZWwsICZpbXhwZC0+Y29ubmVjdG9yKTsKIAogCWlmIChpbXhwZC0+YnJpZGdl
KSB7Ci0JCXJldCA9IGRybV9icmlkZ2VfYXR0YWNoKGVuY29kZXIsIGlteHBkLT5icmlkZ2UsIE5V
TEwpOworCQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChlbmNvZGVyLCBpbXhwZC0+YnJpZGdlLCBO
VUxMLCAwKTsKIAkJaWYgKHJldCA8IDApIHsKIAkJCWRldl9lcnIoaW14cGQtPmRldiwgImZhaWxl
ZCB0byBhdHRhY2ggYnJpZGdlOiAlZFxuIiwKIAkJCQlyZXQpOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2luZ2VuaWMvaW5nZW5pYy1kcm0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pbmdlbmlj
L2luZ2VuaWMtZHJtLmMKaW5kZXggY2UxZmFlM2E3OGE5Li42NWViMTAxNzllYTkgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pbmdlbmljL2luZ2VuaWMtZHJtLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL2luZ2VuaWMvaW5nZW5pYy1kcm0uYwpAQCAtNzI2LDcgKzcyNiw3IEBAIHN0YXRpYyBp
bnQgaW5nZW5pY19kcm1fcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAkJcmV0
dXJuIHJldDsKIAl9CiAKLQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaCgmcHJpdi0+ZW5jb2Rlciwg
YnJpZGdlLCBOVUxMKTsKKwlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaCgmcHJpdi0+ZW5jb2Rlciwg
YnJpZGdlLCBOVUxMLCAwKTsKIAlpZiAocmV0KSB7CiAJCWRldl9lcnIoZGV2LCAiVW5hYmxlIHRv
IGF0dGFjaCBicmlkZ2UiKTsKIAkJcmV0dXJuIHJldDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9tY2RlL21jZGVfZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWNkZS9tY2RlX2RzaS5jCmlu
ZGV4IDA3ZjcwOTBkMDhiMy4uOGZlYWExYjgxNDczIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vbWNkZS9tY2RlX2RzaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tY2RlL21jZGVfZHNpLmMK
QEAgLTgxNywxMiArODE3LDE2IEBAIG1jZGVfZHNpX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MgPSB7
CiAJLmdldF9tb2RlcyA9IG1jZGVfZHNpX2dldF9tb2RlcywKIH07CiAKLXN0YXRpYyBpbnQgbWNk
ZV9kc2lfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQorc3RhdGljIGlu
dCBtY2RlX2RzaV9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJ
ICBlbnVtIGRybV9icmlkZ2VfYXR0YWNoX2ZsYWdzIGZsYWdzKQogewogCXN0cnVjdCBtY2RlX2Rz
aSAqZCA9IGJyaWRnZV90b19tY2RlX2RzaShicmlkZ2UpOwogCXN0cnVjdCBkcm1fZGV2aWNlICpk
cm0gPSBicmlkZ2UtPmRldjsKIAlpbnQgcmV0OwogCisJaWYgKGZsYWdzICYgRFJNX0JSSURHRV9B
VFRBQ0hfTk9fQ09OTkVDVE9SKQorCQlyZXR1cm4gLUVJTlZBTDsKKwogCWRybV9jb25uZWN0b3Jf
aGVscGVyX2FkZCgmZC0+Y29ubmVjdG9yLAogCQkJCSAmbWNkZV9kc2lfY29ubmVjdG9yX2hlbHBl
cl9mdW5jcyk7CiAKQEAgLTg0Miw3ICs4NDYsNyBAQCBzdGF0aWMgaW50IG1jZGVfZHNpX2JyaWRn
ZV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIAkvKiBUaGUgZW5jb2RlciBpbiB0
aGUgYnJpZGdlIGF0dGFjaGVkIHRvIHRoZSBEU0kgYnJpZGdlICovCiAJZHJtX2Nvbm5lY3Rvcl9h
dHRhY2hfZW5jb2RlcigmZC0+Y29ubmVjdG9yLCBicmlkZ2UtPmVuY29kZXIpOwogCS8qIFRoZW4g
d2UgYXR0YWNoIHRoZSBEU0kgYnJpZGdlIHRvIHRoZSBvdXRwdXQgKHBhbmVsIGV0YykgYnJpZGdl
ICovCi0JcmV0ID0gZHJtX2JyaWRnZV9hdHRhY2goYnJpZGdlLT5lbmNvZGVyLCBkLT5icmlkZ2Vf
b3V0LCBicmlkZ2UpOworCXJldCA9IGRybV9icmlkZ2VfYXR0YWNoKGJyaWRnZS0+ZW5jb2Rlciwg
ZC0+YnJpZGdlX291dCwgYnJpZGdlLCBmbGFncyk7CiAJaWYgKHJldCkgewogCQlkZXZfZXJyKGQt
PmRldiwgImZhaWxlZCB0byBhdHRhY2ggdGhlIERTSSBicmlkZ2VcbiIpOwogCQlyZXR1cm4gcmV0
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcGkuYyBiL2RyaXZl
cnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHBpLmMKaW5kZXggYmU2ZDk1YzVmZjI1Li5jZmI0N2Iw
NTRkMjAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHBpLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcGkuYwpAQCAtNjA2LDcgKzYwNiw3IEBA
IHN0YXRpYyBpbnQgbXRrX2RwaV9iaW5kKHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmlj
ZSAqbWFzdGVyLCB2b2lkICpkYXRhKQogCS8qIEN1cnJlbnRseSBEUEkwIGlzIGZpeGVkIHRvIGJl
IGRyaXZlbiBieSBPVkwxICovCiAJZHBpLT5lbmNvZGVyLnBvc3NpYmxlX2NydGNzID0gQklUKDEp
OwogCi0JcmV0ID0gZHJtX2JyaWRnZV9hdHRhY2goJmRwaS0+ZW5jb2RlciwgZHBpLT5icmlkZ2Us
IE5VTEwpOworCXJldCA9IGRybV9icmlkZ2VfYXR0YWNoKCZkcGktPmVuY29kZXIsIGRwaS0+YnJp
ZGdlLCBOVUxMLCAwKTsKIAlpZiAocmV0KSB7CiAJCWRldl9lcnIoZGV2LCAiRmFpbGVkIHRvIGF0
dGFjaCBicmlkZ2U6ICVkXG4iLCByZXQpOwogCQlnb3RvIGVycl9jbGVhbnVwOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kc2kuYyBiL2RyaXZlcnMvZ3B1L2RybS9t
ZWRpYXRlay9tdGtfZHNpLmMKaW5kZXggMjI0YWZiNjY2ODgxLi5kMTEyOWQ0MDc3YTkgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHNpLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL21lZGlhdGVrL210a19kc2kuYwpAQCAtODIxLDcgKzgyMSw3IEBAIHN0YXRpYyBpbnQg
bXRrX2RzaV9jcmVhdGVfY29ubl9lbmMoc3RydWN0IGRybV9kZXZpY2UgKmRybSwgc3RydWN0IG10
a19kc2kgKmRzaSkKIAogCS8qIElmIHRoZXJlJ3MgYSBicmlkZ2UsIGF0dGFjaCB0byBpdCBhbmQg
bGV0IGl0IGNyZWF0ZSB0aGUgY29ubmVjdG9yICovCiAJaWYgKGRzaS0+YnJpZGdlKSB7Ci0JCXJl
dCA9IGRybV9icmlkZ2VfYXR0YWNoKCZkc2ktPmVuY29kZXIsIGRzaS0+YnJpZGdlLCBOVUxMKTsK
KwkJcmV0ID0gZHJtX2JyaWRnZV9hdHRhY2goJmRzaS0+ZW5jb2RlciwgZHNpLT5icmlkZ2UsIE5V
TEwsIDApOwogCQlpZiAocmV0KSB7CiAJCQlEUk1fRVJST1IoIkZhaWxlZCB0byBhdHRhY2ggYnJp
ZGdlIHRvIGRybVxuIik7CiAJCQlnb3RvIGVycl9lbmNvZGVyX2NsZWFudXA7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2hkbWkuYyBiL2RyaXZlcnMvZ3B1L2RybS9t
ZWRpYXRlay9tdGtfaGRtaS5jCmluZGV4IGNlOTFiNjEzNjRlYi4uZjBlNTVmMjE5NzcyIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2hkbWkuYworKysgYi9kcml2ZXJz
L2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2hkbWkuYwpAQCAtMTI5NCwxMSArMTI5NCwxNSBAQCBzdGF0
aWMgdm9pZCBtdGtfaGRtaV9ocGRfZXZlbnQoYm9vbCBocGQsIHN0cnVjdCBkZXZpY2UgKmRldikK
ICAqIEJyaWRnZSBjYWxsYmFja3MKICAqLwogCi1zdGF0aWMgaW50IG10a19oZG1pX2JyaWRnZV9h
dHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3N0YXRpYyBpbnQgbXRrX2hkbWlfYnJp
ZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCSAgZW51bSBkcm1fYnJp
ZGdlX2F0dGFjaF9mbGFncyBmbGFncykKIHsKIAlzdHJ1Y3QgbXRrX2hkbWkgKmhkbWkgPSBoZG1p
X2N0eF9mcm9tX2JyaWRnZShicmlkZ2UpOwogCWludCByZXQ7CiAKKwlpZiAoZmxhZ3MgJiBEUk1f
QlJJREdFX0FUVEFDSF9OT19DT05ORUNUT1IpCisJCXJldHVybiAtRUlOVkFMOworCiAJcmV0ID0g
ZHJtX2Nvbm5lY3Rvcl9pbml0KGJyaWRnZS0+ZW5jb2Rlci0+ZGV2LCAmaGRtaS0+Y29ubiwKIAkJ
CQkgJm10a19oZG1pX2Nvbm5lY3Rvcl9mdW5jcywKIAkJCQkgRFJNX01PREVfQ09OTkVDVE9SX0hE
TUlBKTsKQEAgLTEzMjIsNyArMTMyNiw3IEBAIHN0YXRpYyBpbnQgbXRrX2hkbWlfYnJpZGdlX2F0
dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogCiAJaWYgKGhkbWktPm5leHRfYnJpZGdl
KSB7CiAJCXJldCA9IGRybV9icmlkZ2VfYXR0YWNoKGJyaWRnZS0+ZW5jb2RlciwgaGRtaS0+bmV4
dF9icmlkZ2UsCi0JCQkJCWJyaWRnZSk7CisJCQkJCWJyaWRnZSwgZmxhZ3MpOwogCQlpZiAocmV0
KSB7CiAJCQlkZXZfZXJyKGhkbWktPmRldiwKIAkJCQkiRmFpbGVkIHRvIGF0dGFjaCBleHRlcm5h
bCBicmlkZ2U6ICVkXG4iLCByZXQpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9k
c2kvZHNpX21hbmFnZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZHNpL2RzaV9tYW5hZ2VyLmMK
aW5kZXggMjcxYWE3YmJjYTkyLi41MGI5YmRkZjkyYjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9tc20vZHNpL2RzaV9tYW5hZ2VyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kc2kv
ZHNpX21hbmFnZXIuYwpAQCAtNjY0LDcgKzY2NCw3IEBAIHN0cnVjdCBkcm1fYnJpZGdlICptc21f
ZHNpX21hbmFnZXJfYnJpZGdlX2luaXQodTggaWQpCiAJYnJpZGdlID0gJmRzaV9icmlkZ2UtPmJh
c2U7CiAJYnJpZGdlLT5mdW5jcyA9ICZkc2lfbWdyX2JyaWRnZV9mdW5jczsKIAotCXJldCA9IGRy
bV9icmlkZ2VfYXR0YWNoKGVuY29kZXIsIGJyaWRnZSwgTlVMTCk7CisJcmV0ID0gZHJtX2JyaWRn
ZV9hdHRhY2goZW5jb2RlciwgYnJpZGdlLCBOVUxMLCAwKTsKIAlpZiAocmV0KQogCQlnb3RvIGZh
aWw7CiAKQEAgLTY5Myw3ICs2OTMsNyBAQCBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqbXNtX2RzaV9t
YW5hZ2VyX2V4dF9icmlkZ2VfaW5pdCh1OCBpZCkKIAllbmNvZGVyID0gbXNtX2RzaS0+ZW5jb2Rl
cjsKIAogCS8qIGxpbmsgdGhlIGludGVybmFsIGRzaSBicmlkZ2UgdG8gdGhlIGV4dGVybmFsIGJy
aWRnZSAqLwotCWRybV9icmlkZ2VfYXR0YWNoKGVuY29kZXIsIGV4dF9icmlkZ2UsIGludF9icmlk
Z2UpOworCWRybV9icmlkZ2VfYXR0YWNoKGVuY29kZXIsIGV4dF9icmlkZ2UsIGludF9icmlkZ2Us
IDApOwogCiAJLyoKIAkgKiB3ZSBuZWVkIHRoZSBkcm1fY29ubmVjdG9yIGNyZWF0ZWQgYnkgdGhl
IGV4dGVybmFsIGJyaWRnZQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9lZHAvZWRw
X2JyaWRnZS5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9lZHAvZWRwX2JyaWRnZS5jCmluZGV4IDI5
NTBiYmE0YWNhOS4uYjU5NDUxZDk3MTJjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNt
L2VkcC9lZHBfYnJpZGdlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9lZHAvZWRwX2JyaWRn
ZS5jCkBAIC05MSw3ICs5MSw3IEBAIHN0cnVjdCBkcm1fYnJpZGdlICptc21fZWRwX2JyaWRnZV9p
bml0KHN0cnVjdCBtc21fZWRwICplZHApCiAJYnJpZGdlID0gJmVkcF9icmlkZ2UtPmJhc2U7CiAJ
YnJpZGdlLT5mdW5jcyA9ICZlZHBfYnJpZGdlX2Z1bmNzOwogCi0JcmV0ID0gZHJtX2JyaWRnZV9h
dHRhY2goZWRwLT5lbmNvZGVyLCBicmlkZ2UsIE5VTEwpOworCXJldCA9IGRybV9icmlkZ2VfYXR0
YWNoKGVkcC0+ZW5jb2RlciwgYnJpZGdlLCBOVUxMLCAwKTsKIAlpZiAocmV0KQogCQlnb3RvIGZh
aWw7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vaGRtaS9oZG1pX2JyaWRnZS5j
IGIvZHJpdmVycy9ncHUvZHJtL21zbS9oZG1pL2hkbWlfYnJpZGdlLmMKaW5kZXggYzhkYmQ4Mjg1
NGMyLi43YTY4NWYwZWRkODggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vaGRtaS9o
ZG1pX2JyaWRnZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vaGRtaS9oZG1pX2JyaWRnZS5j
CkBAIC0yODUsNyArMjg1LDcgQEAgc3RydWN0IGRybV9icmlkZ2UgKm1zbV9oZG1pX2JyaWRnZV9p
bml0KHN0cnVjdCBoZG1pICpoZG1pKQogCWJyaWRnZSA9ICZoZG1pX2JyaWRnZS0+YmFzZTsKIAli
cmlkZ2UtPmZ1bmNzID0gJm1zbV9oZG1pX2JyaWRnZV9mdW5jczsKIAotCXJldCA9IGRybV9icmlk
Z2VfYXR0YWNoKGhkbWktPmVuY29kZXIsIGJyaWRnZSwgTlVMTCk7CisJcmV0ID0gZHJtX2JyaWRn
ZV9hdHRhY2goaGRtaS0+ZW5jb2RlciwgYnJpZGdlLCBOVUxMLCAwKTsKIAlpZiAocmV0KQogCQln
b3RvIGZhaWw7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBfZHJ2
LmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2Rydi5jCmluZGV4IDlmNjUyZDJlN2Fm
MS4uMjk4OGFmOWFlNzQzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFw
X2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBfZHJ2LmMKQEAgLTI5Niw3
ICsyOTYsNyBAQCBzdGF0aWMgaW50IG9tYXBfbW9kZXNldF9pbml0KHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYpCiAKIAkJaWYgKHBpcGUtPm91dHB1dC0+YnJpZGdlKSB7CiAJCQlyZXQgPSBkcm1fYnJp
ZGdlX2F0dGFjaChwaXBlLT5lbmNvZGVyLAotCQkJCQkJcGlwZS0+b3V0cHV0LT5icmlkZ2UsIE5V
TEwpOworCQkJCQkJcGlwZS0+b3V0cHV0LT5icmlkZ2UsIE5VTEwsIDApOwogCQkJaWYgKHJldCA8
IDApCiAJCQkJcmV0dXJuIHJldDsKIAkJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Jj
YXItZHUvcmNhcl9kdV9lbmNvZGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1
X2VuY29kZXIuYwppbmRleCAwZjAwYmRmZTIzNjYuLjI2NjAzODQzYzMxOCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9lbmNvZGVyLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL3JjYXItZHUvcmNhcl9kdV9lbmNvZGVyLmMKQEAgLTEyMCw3ICsxMjAsNyBAQCBpbnQg
cmNhcl9kdV9lbmNvZGVyX2luaXQoc3RydWN0IHJjYXJfZHVfZGV2aWNlICpyY2R1LAogCSAqIEF0
dGFjaCB0aGUgYnJpZGdlIHRvIHRoZSBlbmNvZGVyLiBUaGUgYnJpZGdlIHdpbGwgY3JlYXRlIHRo
ZQogCSAqIGNvbm5lY3Rvci4KIAkgKi8KLQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChlbmNvZGVy
LCBicmlkZ2UsIE5VTEwpOworCXJldCA9IGRybV9icmlkZ2VfYXR0YWNoKGVuY29kZXIsIGJyaWRn
ZSwgTlVMTCwgMCk7CiAJaWYgKHJldCkgewogCQlkcm1fZW5jb2Rlcl9jbGVhbnVwKGVuY29kZXIp
OwogCQlyZXR1cm4gcmV0OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNh
cl9sdmRzLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2x2ZHMuYwppbmRleCAxYzYy
NTc4NTkwZjQuLjdlOTc2NzIzYzliMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JjYXIt
ZHUvcmNhcl9sdmRzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9sdmRzLmMK
QEAgLTYwNSw3ICs2MDUsOCBAQCBzdGF0aWMgdm9pZCByY2FyX2x2ZHNfbW9kZV9zZXQoc3RydWN0
IGRybV9icmlkZ2UgKmJyaWRnZSwKIAlyY2FyX2x2ZHNfZ2V0X2x2ZHNfbW9kZShsdmRzKTsKIH0K
IAotc3RhdGljIGludCByY2FyX2x2ZHNfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2Up
CitzdGF0aWMgaW50IHJjYXJfbHZkc19hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwK
KwkJCSAgICBlbnVtIGRybV9icmlkZ2VfYXR0YWNoX2ZsYWdzIGZsYWdzKQogewogCXN0cnVjdCBy
Y2FyX2x2ZHMgKmx2ZHMgPSBicmlkZ2VfdG9fcmNhcl9sdmRzKGJyaWRnZSk7CiAJc3RydWN0IGRy
bV9jb25uZWN0b3IgKmNvbm5lY3RvciA9ICZsdmRzLT5jb25uZWN0b3I7CkBAIC02MTUsNyArNjE2
LDEwIEBAIHN0YXRpYyBpbnQgcmNhcl9sdmRzX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJp
ZGdlKQogCS8qIElmIHdlIGhhdmUgYSBuZXh0IGJyaWRnZSBqdXN0IGF0dGFjaCBpdC4gKi8KIAlp
ZiAobHZkcy0+bmV4dF9icmlkZ2UpCiAJCXJldHVybiBkcm1fYnJpZGdlX2F0dGFjaChicmlkZ2Ut
PmVuY29kZXIsIGx2ZHMtPm5leHRfYnJpZGdlLAotCQkJCQkgYnJpZGdlKTsKKwkJCQkJIGJyaWRn
ZSwgZmxhZ3MpOworCisJaWYgKGZsYWdzICYgRFJNX0JSSURHRV9BVFRBQ0hfTk9fQ09OTkVDVE9S
KQorCQlyZXR1cm4gLUVJTlZBTDsKIAogCS8qIE90aGVyd2lzZSBpZiB3ZSBoYXZlIGEgcGFuZWws
IGNyZWF0ZSBhIGNvbm5lY3Rvci4gKi8KIAlpZiAoIWx2ZHMtPnBhbmVsKQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX2x2ZHMuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9yb2NrY2hpcC9yb2NrY2hpcF9sdmRzLmMKaW5kZXggNjRhZWZhODU2ODk2Li5hZGRmNTYyMDlm
NDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9sdmRzLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX2x2ZHMuYwpAQCAtNDQwLDcg
KzQ0MCw3IEBAIHN0YXRpYyBpbnQgcm9ja2NoaXBfbHZkc19iaW5kKHN0cnVjdCBkZXZpY2UgKmRl
diwgc3RydWN0IGRldmljZSAqbWFzdGVyLAogCQkJZ290byBlcnJfZnJlZV9jb25uZWN0b3I7CiAJ
CX0KIAl9IGVsc2UgewotCQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChlbmNvZGVyLCBsdmRzLT5i
cmlkZ2UsIE5VTEwpOworCQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChlbmNvZGVyLCBsdmRzLT5i
cmlkZ2UsIE5VTEwsIDApOwogCQlpZiAocmV0KSB7CiAJCQlEUk1fREVWX0VSUk9SKGRybV9kZXYt
PmRldiwKIAkJCQkgICAgICAiZmFpbGVkIHRvIGF0dGFjaCBicmlkZ2U6ICVkXG4iLCByZXQpOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX3JnYi5jIGIvZHJp
dmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX3JnYi5jCmluZGV4IDg5ZTBiYjBmZTBhYi4u
ZjU4NmUwNmYzZGYyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcm9ja2NoaXAvcm9ja2No
aXBfcmdiLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX3JnYi5jCkBA
IC0xNDIsNyArMTQyLDcgQEAgc3RydWN0IHJvY2tjaGlwX3JnYiAqcm9ja2NoaXBfcmdiX2luaXQo
c3RydWN0IGRldmljZSAqZGV2LAogCiAJcmdiLT5icmlkZ2UgPSBicmlkZ2U7CiAKLQlyZXQgPSBk
cm1fYnJpZGdlX2F0dGFjaChlbmNvZGVyLCByZ2ItPmJyaWRnZSwgTlVMTCk7CisJcmV0ID0gZHJt
X2JyaWRnZV9hdHRhY2goZW5jb2RlciwgcmdiLT5icmlkZ2UsIE5VTEwsIDApOwogCWlmIChyZXQp
IHsKIAkJRFJNX0RFVl9FUlJPUihkcm1fZGV2LT5kZXYsCiAJCQkgICAgICAiZmFpbGVkIHRvIGF0
dGFjaCBicmlkZ2U6ICVkXG4iLCByZXQpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3N0
aS9zdGlfZHZvLmMgYi9kcml2ZXJzL2dwdS9kcm0vc3RpL3N0aV9kdm8uYwppbmRleCBlNTU4NzAx
OTBiZjUuLjBiYWNhNjM2OGMzNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3N0aS9zdGlf
ZHZvLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3N0aS9zdGlfZHZvLmMKQEAgLTQ2Niw3ICs0NjYs
NyBAQCBzdGF0aWMgaW50IHN0aV9kdm9fYmluZChzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBk
ZXZpY2UgKm1hc3Rlciwgdm9pZCAqZGF0YSkKIAlicmlkZ2UtPm9mX25vZGUgPSBkdm8tPmRldi5v
Zl9ub2RlOwogCWRybV9icmlkZ2VfYWRkKGJyaWRnZSk7CiAKLQllcnIgPSBkcm1fYnJpZGdlX2F0
dGFjaChlbmNvZGVyLCBicmlkZ2UsIE5VTEwpOworCWVyciA9IGRybV9icmlkZ2VfYXR0YWNoKGVu
Y29kZXIsIGJyaWRnZSwgTlVMTCwgMCk7CiAJaWYgKGVycikgewogCQlEUk1fRVJST1IoIkZhaWxl
ZCB0byBhdHRhY2ggYnJpZGdlXG4iKTsKIAkJcmV0dXJuIGVycjsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9zdGkvc3RpX2hkYS5jIGIvZHJpdmVycy9ncHUvZHJtL3N0aS9zdGlfaGRhLmMK
aW5kZXggOTRlNDA0ZjEzMjM0Li42YTNkOGI4MDA5NTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9zdGkvc3RpX2hkYS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9zdGkvc3RpX2hkYS5jCkBA
IC03MDAsNyArNzAwLDcgQEAgc3RhdGljIGludCBzdGlfaGRhX2JpbmQoc3RydWN0IGRldmljZSAq
ZGV2LCBzdHJ1Y3QgZGV2aWNlICptYXN0ZXIsIHZvaWQgKmRhdGEpCiAKIAlicmlkZ2UtPmRyaXZl
cl9wcml2YXRlID0gaGRhOwogCWJyaWRnZS0+ZnVuY3MgPSAmc3RpX2hkYV9icmlkZ2VfZnVuY3M7
Ci0JZHJtX2JyaWRnZV9hdHRhY2goZW5jb2RlciwgYnJpZGdlLCBOVUxMKTsKKwlkcm1fYnJpZGdl
X2F0dGFjaChlbmNvZGVyLCBicmlkZ2UsIE5VTEwsIDApOwogCiAJY29ubmVjdG9yLT5lbmNvZGVy
ID0gZW5jb2RlcjsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3N0aS9zdGlfaGRtaS5j
IGIvZHJpdmVycy9ncHUvZHJtL3N0aS9zdGlfaGRtaS5jCmluZGV4IDk4NjJjMzIyZjBjNC4uMmQw
ODBhNjA0MGQ5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vc3RpL3N0aV9oZG1pLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL3N0aS9zdGlfaGRtaS5jCkBAIC0xMjc5LDcgKzEyNzksNyBAQCBz
dGF0aWMgaW50IHN0aV9oZG1pX2JpbmQoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgZGV2aWNl
ICptYXN0ZXIsIHZvaWQgKmRhdGEpCiAKIAlicmlkZ2UtPmRyaXZlcl9wcml2YXRlID0gaGRtaTsK
IAlicmlkZ2UtPmZ1bmNzID0gJnN0aV9oZG1pX2JyaWRnZV9mdW5jczsKLQlkcm1fYnJpZGdlX2F0
dGFjaChlbmNvZGVyLCBicmlkZ2UsIE5VTEwpOworCWRybV9icmlkZ2VfYXR0YWNoKGVuY29kZXIs
IGJyaWRnZSwgTlVMTCwgMCk7CiAKIAljb25uZWN0b3ItPmVuY29kZXIgPSBlbmNvZGVyOwogCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vc3RtL2x0ZGMuYyBiL2RyaXZlcnMvZ3B1L2RybS9z
dG0vbHRkYy5jCmluZGV4IDNhYjRmYmY4ZWIwZC4uMTg1NjFkOTc3ZDg0IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vc3RtL2x0ZGMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vc3RtL2x0ZGMu
YwpAQCAtMTA1NSw3ICsxMDU1LDcgQEAgc3RhdGljIGludCBsdGRjX2VuY29kZXJfaW5pdChzdHJ1
Y3QgZHJtX2RldmljZSAqZGRldiwgc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIAlkcm1fZW5j
b2Rlcl9pbml0KGRkZXYsIGVuY29kZXIsICZsdGRjX2VuY29kZXJfZnVuY3MsCiAJCQkgRFJNX01P
REVfRU5DT0RFUl9EUEksIE5VTEwpOwogCi0JcmV0ID0gZHJtX2JyaWRnZV9hdHRhY2goZW5jb2Rl
ciwgYnJpZGdlLCBOVUxMKTsKKwlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChlbmNvZGVyLCBicmlk
Z2UsIE5VTEwsIDApOwogCWlmIChyZXQpIHsKIAkJZHJtX2VuY29kZXJfY2xlYW51cChlbmNvZGVy
KTsKIAkJcmV0dXJuIC1FSU5WQUw7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vc3VuNGkv
c3VuNGlfbHZkcy5jIGIvZHJpdmVycy9ncHUvZHJtL3N1bjRpL3N1bjRpX2x2ZHMuYwppbmRleCA3
ZmJmNDI1YWNiNTUuLjY5MzE2M2M3MGVlZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3N1
bjRpL3N1bjRpX2x2ZHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vc3VuNGkvc3VuNGlfbHZkcy5j
CkBAIC0xNTUsNyArMTU1LDcgQEAgaW50IHN1bjRpX2x2ZHNfaW5pdChzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZHJtLCBzdHJ1Y3Qgc3VuNGlfdGNvbiAqdGNvbikKIAl9CiAKIAlpZiAoYnJpZGdlKSB7Ci0J
CXJldCA9IGRybV9icmlkZ2VfYXR0YWNoKGVuY29kZXIsIGJyaWRnZSwgTlVMTCk7CisJCXJldCA9
IGRybV9icmlkZ2VfYXR0YWNoKGVuY29kZXIsIGJyaWRnZSwgTlVMTCwgMCk7CiAJCWlmIChyZXQp
IHsKIAkJCWRldl9lcnIoZHJtLT5kZXYsICJDb3VsZG4ndCBhdHRhY2ggb3VyIGJyaWRnZVxuIik7
CiAJCQlnb3RvIGVycl9jbGVhbnVwX2Nvbm5lY3RvcjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9zdW40aS9zdW40aV9yZ2IuYyBiL2RyaXZlcnMvZ3B1L2RybS9zdW40aS9zdW40aV9yZ2Iu
YwppbmRleCBhYWM1Njk4M2YyMDguLjIyNDYzZjUzMDJjNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3N1bjRpL3N1bjRpX3JnYi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9zdW40aS9zdW40
aV9yZ2IuYwpAQCAtMjUyLDcgKzI1Miw3IEBAIGludCBzdW40aV9yZ2JfaW5pdChzdHJ1Y3QgZHJt
X2RldmljZSAqZHJtLCBzdHJ1Y3Qgc3VuNGlfdGNvbiAqdGNvbikKIAl9CiAKIAlpZiAocmdiLT5i
cmlkZ2UpIHsKLQkJcmV0ID0gZHJtX2JyaWRnZV9hdHRhY2goZW5jb2RlciwgcmdiLT5icmlkZ2Us
IE5VTEwpOworCQlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChlbmNvZGVyLCByZ2ItPmJyaWRnZSwg
TlVMTCwgMCk7CiAJCWlmIChyZXQpIHsKIAkJCWRldl9lcnIoZHJtLT5kZXYsICJDb3VsZG4ndCBh
dHRhY2ggb3VyIGJyaWRnZVxuIik7CiAJCQlnb3RvIGVycl9jbGVhbnVwX2Nvbm5lY3RvcjsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90aWxjZGMvdGlsY2RjX2V4dGVybmFsLmMgYi9kcml2
ZXJzL2dwdS9kcm0vdGlsY2RjL3RpbGNkY19leHRlcm5hbC5jCmluZGV4IDQzZDc1NmI3ODEwZS4u
MWVkNzY1Y2U5MzQ5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGlsY2RjL3RpbGNkY19l
eHRlcm5hbC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90aWxjZGMvdGlsY2RjX2V4dGVybmFsLmMK
QEAgLTk0LDcgKzk0LDcgQEAgaW50IHRpbGNkY19hdHRhY2hfYnJpZGdlKHN0cnVjdCBkcm1fZGV2
aWNlICpkZGV2LCBzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogCiAJcHJpdi0+ZXh0ZXJuYWxf
ZW5jb2Rlci0+cG9zc2libGVfY3J0Y3MgPSBCSVQoMCk7CiAKLQlyZXQgPSBkcm1fYnJpZGdlX2F0
dGFjaChwcml2LT5leHRlcm5hbF9lbmNvZGVyLCBicmlkZ2UsIE5VTEwpOworCXJldCA9IGRybV9i
cmlkZ2VfYXR0YWNoKHByaXYtPmV4dGVybmFsX2VuY29kZXIsIGJyaWRnZSwgTlVMTCwgMCk7CiAJ
aWYgKHJldCkgewogCQlkZXZfZXJyKGRkZXYtPmRldiwgImRybV9icmlkZ2VfYXR0YWNoKCkgZmFp
bGVkICVkXG4iLCByZXQpOwogCQlyZXR1cm4gcmV0OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3ZjNC92YzRfZHBpLmMgYi9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kcGkuYwppbmRleCA4
YTI3YTZhY2VlNjEuLjU5NjYyZDczNTQzMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Zj
NC92YzRfZHBpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfZHBpLmMKQEAgLTI1MSw3
ICsyNTEsNyBAQCBzdGF0aWMgaW50IHZjNF9kcGlfaW5pdF9icmlkZ2Uoc3RydWN0IHZjNF9kcGkg
KmRwaSkKIAlpZiAocGFuZWwpCiAJCWJyaWRnZSA9IGRybV9wYW5lbF9icmlkZ2VfYWRkKHBhbmVs
LCBEUk1fTU9ERV9DT05ORUNUT1JfRFBJKTsKIAotCXJldHVybiBkcm1fYnJpZGdlX2F0dGFjaChk
cGktPmVuY29kZXIsIGJyaWRnZSwgTlVMTCk7CisJcmV0dXJuIGRybV9icmlkZ2VfYXR0YWNoKGRw
aS0+ZW5jb2RlciwgYnJpZGdlLCBOVUxMLCAwKTsKIH0KIAogc3RhdGljIGludCB2YzRfZHBpX2Jp
bmQoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlICptYXN0ZXIsIHZvaWQgKmRhdGEp
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kc2kuYyBiL2RyaXZlcnMvZ3B1
L2RybS92YzQvdmM0X2RzaS5jCmluZGV4IGM3OGZhODE0NDc3Ni4uZjVkNWI2ODM3ODMxIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kc2kuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vdmM0L3ZjNF9kc2kuYwpAQCAtMTU5OSw3ICsxNTk5LDcgQEAgc3RhdGljIGludCB2YzRfZHNp
X2JpbmQoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlICptYXN0ZXIsIHZvaWQgKmRh
dGEpCiAJCQkgRFJNX01PREVfRU5DT0RFUl9EU0ksIE5VTEwpOwogCWRybV9lbmNvZGVyX2hlbHBl
cl9hZGQoZHNpLT5lbmNvZGVyLCAmdmM0X2RzaV9lbmNvZGVyX2hlbHBlcl9mdW5jcyk7CiAKLQly
ZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChkc2ktPmVuY29kZXIsIGRzaS0+YnJpZGdlLCBOVUxMKTsK
KwlyZXQgPSBkcm1fYnJpZGdlX2F0dGFjaChkc2ktPmVuY29kZXIsIGRzaS0+YnJpZGdlLCBOVUxM
LCAwKTsKIAlpZiAocmV0KSB7CiAJCWRldl9lcnIoZGV2LCAiYnJpZGdlIGF0dGFjaCBmYWlsZWQ6
ICVkXG4iLCByZXQpOwogCQlyZXR1cm4gcmV0OwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJt
X2JyaWRnZS5oIGIvaW5jbHVkZS9kcm0vZHJtX2JyaWRnZS5oCmluZGV4IDdkYjZjYTBmZDc1ZC4u
OTI4ZDA0NmFkOTlkIDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS9kcm1fYnJpZGdlLmgKKysrIGIv
aW5jbHVkZS9kcm0vZHJtX2JyaWRnZS5oCkBAIC0zNCw2ICszNCwxNyBAQCBzdHJ1Y3QgZHJtX2Jy
aWRnZV90aW1pbmdzOwogc3RydWN0IGRybV9wYW5lbDsKIHN0cnVjdCBpMmNfYWRhcHRlcjsKIAor
LyoqCisgKiBlbnVtIGRybV9icmlkZ2VfYXR0YWNoX2ZsYWdzIC0gRmxhZ3MgZm9yICZkcm1fYnJp
ZGdlX2Z1bmNzLmF0dGFjaAorICovCitlbnVtIGRybV9icmlkZ2VfYXR0YWNoX2ZsYWdzIHsKKwkv
KioKKwkgKiBARFJNX0JSSURHRV9BVFRBQ0hfTk9fQ09OTkVDVE9SOiBXaGVuIHRoaXMgZmxhZyBp
cyBzZXQgdGhlIGJyaWRnZQorCSAqIHNoYWxsIG5vdCBjcmVhdGUgYSBkcm1fY29ubmVjdG9yLgor
CSAqLworCURSTV9CUklER0VfQVRUQUNIX05PX0NPTk5FQ1RPUiA9IEJJVCgwKSwKK307CisKIC8q
KgogICogc3RydWN0IGRybV9icmlkZ2VfZnVuY3MgLSBkcm1fYnJpZGdlIGNvbnRyb2wgZnVuY3Rp
b25zCiAgKi8KQEAgLTQyLDcgKzUzLDggQEAgc3RydWN0IGRybV9icmlkZ2VfZnVuY3MgewogCSAq
IEBhdHRhY2g6CiAJICoKIAkgKiBUaGlzIGNhbGxiYWNrIGlzIGludm9rZWQgd2hlbmV2ZXIgb3Vy
IGJyaWRnZSBpcyBiZWluZyBhdHRhY2hlZCB0byBhCi0JICogJmRybV9lbmNvZGVyLgorCSAqICZk
cm1fZW5jb2Rlci4gVGhlIGZsYWdzIGFyZ3VtZW50IHR1bmVzIHRoZSBiZWhhdmlvdXIgb2YgdGhl
IGF0dGFjaAorCSAqIG9wZXJhdGlvbiAoc2VlIERSTV9CUklER0VfQVRUQUNIXyopLgogCSAqCiAJ
ICogVGhlIGF0dGFjaCBjYWxsYmFjayBpcyBvcHRpb25hbC4KIAkgKgpAQCAtNTAsNyArNjIsOCBA
QCBzdHJ1Y3QgZHJtX2JyaWRnZV9mdW5jcyB7CiAJICoKIAkgKiBaZXJvIG9uIHN1Y2Nlc3MsIGVy
cm9yIGNvZGUgb24gZmFpbHVyZS4KIAkgKi8KLQlpbnQgKCphdHRhY2gpKHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UpOworCWludCAoKmF0dGFjaCkoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwK
KwkJICAgICAgZW51bSBkcm1fYnJpZGdlX2F0dGFjaF9mbGFncyBmbGFncyk7CiAKIAkvKioKIAkg
KiBAZGV0YWNoOgpAQCAtNTcxLDcgKzU4NCw4IEBAIHZvaWQgZHJtX2JyaWRnZV9hZGQoc3RydWN0
IGRybV9icmlkZ2UgKmJyaWRnZSk7CiB2b2lkIGRybV9icmlkZ2VfcmVtb3ZlKHN0cnVjdCBkcm1f
YnJpZGdlICpicmlkZ2UpOwogc3RydWN0IGRybV9icmlkZ2UgKm9mX2RybV9maW5kX2JyaWRnZShz
dHJ1Y3QgZGV2aWNlX25vZGUgKm5wKTsKIGludCBkcm1fYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJt
X2VuY29kZXIgKmVuY29kZXIsIHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCi0JCSAgICAgIHN0
cnVjdCBkcm1fYnJpZGdlICpwcmV2aW91cyk7CisJCSAgICAgIHN0cnVjdCBkcm1fYnJpZGdlICpw
cmV2aW91cywKKwkJICAgICAgZW51bSBkcm1fYnJpZGdlX2F0dGFjaF9mbGFncyBmbGFncyk7CiAK
IGJvb2wgZHJtX2JyaWRnZV9tb2RlX2ZpeHVwKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJ
CQkgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwKLS0gClJlZ2FyZHMsCgpM
YXVyZW50IFBpbmNoYXJ0CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmkt
ZGV2ZWw=
