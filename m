Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 88786B743F
	for <lists+dri-devel@lfdr.de>; Thu, 19 Sep 2019 09:36:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D4E196FA06;
	Thu, 19 Sep 2019 07:36:16 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x444.google.com (mail-pf1-x444.google.com
 [IPv6:2607:f8b0:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4A6206F4C1
 for <dri-devel@lists.freedesktop.org>; Thu, 19 Sep 2019 06:18:06 +0000 (UTC)
Received: by mail-pf1-x444.google.com with SMTP id a2so1551793pfo.10
 for <dri-devel@lists.freedesktop.org>; Wed, 18 Sep 2019 23:18:06 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id;
 bh=Wmra3D4k8sZP/qUNRpF/ORrBhqBJghcta0BMujN5Qok=;
 b=iSPuQNgBomGUYHeiS0T/qHe3ZF6cIC/Vm5a5XBHO5hZ0n4MYerlXCLI0w/Q831lvwW
 swp9nXPfYCXbKkZmIyfQsxhZH5sADrW8xQ47SW/8Ccy4j9wdHt0b8ImbQwT3yL43oCSL
 rr4HN4KPYRy02ay72CMn+gLoSf0S6uGgjifKKAFb9a3KFkqLbLzC3c/B4PpNH6sBwJlM
 +2Bc4fi+4hsDVrOaisjoP/YznFoCNJ6CrUeepMYvc2XTHSTkrPnddCq6nmIjXh/tr9m6
 kuNVWYX+xo4NX23Roz4dkTrARbkdnoZIR0n7/VaQs2jeYNK+1XqM/LFeQs/7d/QTlkud
 XWxw==
X-Gm-Message-State: APjAAAXbEJQechnR3tbSt+Tt8g9AqAkTR3NM5VuF0Twg+j1U5XPbiAuF
 OMK8R8Eailsup822qC8Qx0VIirmhH0A=
X-Google-Smtp-Source: APXvYqzS35NEfTS7IrDn0F+kUSoeg69BcBAawnoePMLWcrGFect8hHuIU0F3J+XOBEmCV0xzsavVaw==
X-Received: by 2002:a63:3c08:: with SMTP id j8mr7397344pga.72.1568873885537;
 Wed, 18 Sep 2019 23:18:05 -0700 (PDT)
Received: from super-sugar.huaqin.com ([101.78.151.194])
 by smtp.gmail.com with ESMTPSA id z13sm10161787pfg.172.2019.09.18.23.18.03
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 18 Sep 2019 23:18:05 -0700 (PDT)
From: Jerry Han <jerry.han.hq@gmail.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 6/9] [v10,
 6/9] drm/panel: Add Boe Himax8279d MIPI-DSI LCD panel
Date: Thu, 19 Sep 2019 14:17:59 +0800
Message-Id: <20190919061759.2777-1-jerry.han.hq@gmail.com>
X-Mailer: git-send-email 2.17.1
X-Mailman-Approved-At: Thu, 19 Sep 2019 07:35:45 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id;
 bh=Wmra3D4k8sZP/qUNRpF/ORrBhqBJghcta0BMujN5Qok=;
 b=Ijdq24lz/lXNNzzzr8xM5Zm9Hf4PZRrETPSr9KbfkfGme1I79WopS/vIY0dexw5iqT
 tOOC3PYEWNjbE0FgdZfJepvLVmcg0iAkR0WMn16nzXleSZ/l2H2C6vvt63NGbPMn5SMn
 KX7BybOCtTNM8jGGVNmv9BeS8DhFmEQmQ8b7SDq6Fh0qzRv/3U87e91N5wDH8+7v9+Ha
 NoY3aWN6A8KvRDEphSsS4442jv/BC+AXpxQbIFOBWOM44T3x02BZsCzobRuWCpEFp0Hr
 nL4eNV3VmABHtDga1EFZxtqoRTpt6TcX6rRDyMqkqLU0RBq29CgeYxv8JxQa6jF/8dnr
 mBkQ==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jerry Han <jerry.han.hq@gmail.com>, Jitao Shi <jitao.shi@mediatek.com>,
 Jerry Han <hanxu5@huaqin.corp-partner.google.com>,
 Rock wang <rock_wang@himax.com.cn>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U3VwcG9ydCBCb2UgSGltYXg4Mjc5ZCA4LjAiIDEyMDB4MTkyMCBURlQgTENEIHBhbmVsLCBpdCBp
cyBhIE1JUEkgRFNJCnBhbmVsLgoKVjY6Ci0gQWRkIHRoZSBpbmZvcm1hdGlvbiBvZiB0aGUgcmV2
aWV3ZXIKLSBSZW1vdmUgdW5uZWNlc3NhcnkgZGVsYXlzLCBUaGUgdWRlbGF5X3JhbmdlIGNvZGUg
Z3JhY2VmdWxseSByZXR1cm5zCiAgICB3aXRob3V0IGhpdHRpbmcgdGhlIHNjaGVkdWxlciBvbiBh
IGRlbGF5IG9mIDAuIChEZXJlaykKLSBNZXJnZSB0aGUgc2FtZSBkYXRhIHN0cnVjdHVyZXMsIGxp
a2UgZGlzcGxheV9tb2RlIGFuZCBvZmZfY21kcyAoRGVyZWspCi0gT3B0aW1pemUgdGhlIHByb2Nl
c3Npbmcgb2YgcmVzdWx0cyByZXR1cm5lZCBieQogICAgZGV2bV9ncGlvZF9nZXRfb3B0aW9uYWwg
KERlcmVrKQoKVjU6Ci0gQWRkIHRoZSBpbmZvcm1hdGlvbiBvZiB0aGUgcmV2aWV3ZXIgKFNhbSkK
LSBEZWxldGUgdW5uZWNlc3NhcnkgaGVhZGVyIGZpbGVzICNpbmNsdWRlIDxsaW51eC9mYi5oPiAo
U2FtKQotIFRoZSBjb25maWcgRFJNX1BBTkVMX0JPRV9ISU1BWDgyNzlEIGFwcGVhcnMgdHdpY2Uu
IERyb3Agb25lIG9mIHRoZW0gKFNhbSkKLSBBREQgc3RhdGljLCBzZXRfZ3Bpb3MgZnVuY3Rpb24g
aXMgbm90IHVzZWQgb3V0c2lkZSB0aGlzIG1vZHVsZSAoU2FtKQoKVjQ6Ci0gRnJlZml4IGFsbCBm
dW5jdGlvbiBtYWVzIHdpdGggYm9lXyAoU2FtKQotIEZzZWQgImVuYWJsZV9ncGlvIiByZXBsYWNl
ICJyZXNldF9ncGlvIiwgTWFrZSBpdCBsb29rIGNsZWFyZXIgKFNhbSkKLSBTb3J0IGluY2x1ZGUg
bGluZXMgYWxwaGFiZXRpY2FsbHkgKFNhbSkKLSBGaXhlZCBlbnRyaWVzIGluIHRoZSBtYWtlZmls
ZSBtdXN0IGJlIHNvcnRlZCBhbHBoYWJldGljYWxseSAoU2FtKQotIEFkZCBzZW5kX21pcGlfY21k
cyBmdW5jdGlvbiB0byBhdm9pZCBkdXBsaWNhdGluZyB0aGUgY29kZSAoU2FtKQotIEFkZCB0aGUg
bmVjZXNzYXJ5IGRlbGF5KHJlc2V0X2RlbGF5X3Q1KSBiZXR3ZWVuIHJlc2V0IGFuZCBzZW5kaW5n
CiAgICB0aGUgaW5pdGlhbGl6YXRpb24gY29tbWFuZCAoUm9jayB3YW5nKQoKVjM6Ci0gUmVtb3Zl
IHVubmVjZXNzYXJ5IGRlbGF5cyBpbiBzZW5kaW5nIGluaXRpYWxpemF0aW9uIGNvbW1hbmRzIChK
aXRhbyBTaGkpCgpWMjoKLSBVc2UgU1BEWCBpZGVudGlmaWVyIChTYW0pCi0gVXNlIG5lY2Vzc2Fy
eSBoZWFkZXIgZmlsZXMgcmVwbGFjZSBkcm1QLmggKFNhbSkKLSBEZWxldGUgdW5uZWNlc3Nhcnkg
aGVhZGVyIGZpbGVzICNpbmNsdWRlIDxsaW51eC9lcnIuaD4gKFNhbSkKLSBTcGVjaWZpZXMgYSBH
UElPcyBhcnJheSB0byBjb250cm9sIHRoZSByZXNldCB0aW1pbmcsCiAgICBpbnN0ZWFkIG9mIHJl
YWRpbmcgImRzaS1yZXNldC1zZXF1ZW5jZSIgZGF0YSBmcm9tIERUUyAoU2FtKQotIERlbGV0ZSBi
YWNrbGlnaHRfZGlzYWJsZSgpIGZ1bmN0aW9uIHdoZW4gYWxyZWFkeSBkaXNhYmxlZCAoU2FtKQot
IFVzZSBkZXZtX29mX2ZpbmRfYmFja2xpZ2h0KCkgcmVwbGFjZSBvZl9maW5kX2JhY2tsaWdodF9i
eV9ub2RlKCkgKFNhbSkKLSBNb3ZlIHRoZSBuZWNlc3NhcnkgZGF0YSBpbiB0aGUgRFRTIHRvIHRo
ZSBjdXJyZW50IGZpbGUsCiAgICBsaWtlIHBvcmNoLCBkaXNwbGF5X21vZGUgYW5kIEluaXQgY29k
ZSBldGMuIChTYW0pCi0gQWRkIGNvbXBhdGlibGUgZGV2aWNlICJib2UsaGltYXg4Mjc5ZDEwcCIg
KFNhbSkKClYxOgotIFN1cHBvcnQgQm9lIEhpbWF4ODI3OWQgOC4wIiAxMjAweDE5MjAgVEZUIExD
RCBwYW5lbCwgaXQgaXMgYSBNSVBJIERTSQogICAgcGFuZWwuCgpTaWduZWQtb2ZmLWJ5OiBKZXJy
eSBIYW4gPGhhbnh1NUBodWFxaW4uY29ycC1wYXJ0bmVyLmdvb2dsZS5jb20+ClJldmlld2VkLWJ5
OiBTYW0gUmF2bmJvcmcgPHNhbUByYXZuYm9yZy5vcmc+ClJldmlld2VkLWJ5OiBEZXJlayBCYXNl
aG9yZSA8ZGJhc2Vob3JlQGNocm9taXVtLm9yZz4KQ2M6IEppdGFvIFNoaSA8aml0YW8uc2hpQG1l
ZGlhdGVrLmNvbT4KQ2M6IFJvY2sgd2FuZyA8cm9ja193YW5nQGhpbWF4LmNvbS5jbj4KLS0tCiBk
cml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtYm9lLWhpbWF4ODI3OWQuYyB8IDEwOSArKysrKysr
Ky0tLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgNDUgaW5zZXJ0aW9ucygrKSwgNjQgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWJvZS1oaW1h
eDgyNzlkLmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtYm9lLWhpbWF4ODI3OWQuYwpp
bmRleCBjMDUwYTQ4NDg3YTIuLmZmNWE4OWUzOGZkNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL3BhbmVsL3BhbmVsLWJvZS1oaW1heDgyNzlkLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmVsL3BhbmVsLWJvZS1oaW1heDgyNzlkLmMKQEAgLTEzMCw5ICsxMzAsOCBAQCBzdGF0aWMgaW50
IGJvZV9wYW5lbF91bnByZXBhcmUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCiAJLyogc2VuZCBv
ZmYgY29kZSAqLwogCWVyciA9IHNlbmRfbWlwaV9jbWRzKHBhbmVsLCBwaW5mby0+ZGVzYy0+b2Zm
X2NtZHMpOwogCWlmIChlcnIgPCAwKSB7Ci0JCWRldl9lcnIocGFuZWwtPmRldiwKLQkJCSJmYWls
ZWQgdG8gc2VuZCBEQ1MgT2ZmIENvZGU6ICVkXG4iLAotCQkJZXJyKTsKKwkJRFJNX0RFVl9FUlJP
UihwYW5lbC0+ZGV2LAorCQkJCSJmYWlsZWQgdG8gc2VuZCBEQ1MgT2ZmIENvZGU6ICVkXG4iLCBl
cnIpOwogCQlnb3RvIHBvd2Vyb2ZmOwogCX0KIApAQCAtMTY0LDI0ICsxNjMsMjAgQEAgc3RhdGlj
IGludCBib2VfcGFuZWxfcHJlcGFyZShzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKIAkvKiByZXNl
dCBzZXF1ZW5jZSAqLwogCXVzbGVlcF9yYW5nZShkZXNjLT5yZXNldF9kZWxheV90MiwgMTAwMCAr
IGRlc2MtPnJlc2V0X2RlbGF5X3QyKTsKIAotCWlmIChkZXNjLT5yZXNldF9kZWxheV90Mykgewot
CQlncGlvZF9zZXRfdmFsdWUocGluZm8tPmVuYWJsZV9ncGlvLCAxKTsKLQkJdXNsZWVwX3Jhbmdl
KGRlc2MtPnJlc2V0X2RlbGF5X3QzLCAxMDAwICsgZGVzYy0+cmVzZXRfZGVsYXlfdDMpOwotCQln
cGlvZF9zZXRfdmFsdWUocGluZm8tPmVuYWJsZV9ncGlvLCAwKTsKLQl9CisJZ3Bpb2Rfc2V0X3Zh
bHVlKHBpbmZvLT5lbmFibGVfZ3BpbywgMSk7CisJdXNsZWVwX3JhbmdlKGRlc2MtPnJlc2V0X2Rl
bGF5X3QzLCAxMDAwICsgZGVzYy0+cmVzZXRfZGVsYXlfdDMpOworCWdwaW9kX3NldF92YWx1ZShw
aW5mby0+ZW5hYmxlX2dwaW8sIDApOwogCiAJdXNsZWVwX3JhbmdlKGRlc2MtPnJlc2V0X2RlbGF5
X3Q0LCAxMDAwICsgZGVzYy0+cmVzZXRfZGVsYXlfdDQpOwogCWdwaW9kX3NldF92YWx1ZShwaW5m
by0+ZW5hYmxlX2dwaW8sIDEpOwogCi0JaWYgKGRlc2MtPnJlc2V0X2RlbGF5X3Q1KQotCQl1c2xl
ZXBfcmFuZ2UoZGVzYy0+cmVzZXRfZGVsYXlfdDUsIDEwMDAgKyBkZXNjLT5yZXNldF9kZWxheV90
NSk7CisJdXNsZWVwX3JhbmdlKGRlc2MtPnJlc2V0X2RlbGF5X3Q1LCAxMDAwICsgZGVzYy0+cmVz
ZXRfZGVsYXlfdDUpOwogCiAJLyogc2VuZCBpbml0IGNvZGUgKi8KIAllcnIgPSBzZW5kX21pcGlf
Y21kcyhwYW5lbCwgcGluZm8tPmRlc2MtPm9uX2NtZHMpOwogCWlmIChlcnIgPCAwKSB7Ci0JCWRl
dl9lcnIocGFuZWwtPmRldiwKLQkJCSJmYWlsZWQgdG8gc2VuZCBEQ1MgSW5pdCBDb2RlOiAlZFxu
IiwKLQkJCWVycik7CisJCURSTV9ERVZfRVJST1IocGFuZWwtPmRldiwKKwkJCQkiZmFpbGVkIHRv
IHNlbmQgRENTIEluaXQgQ29kZTogJWRcbiIsIGVycik7CiAJCWdvdG8gcG93ZXJvZmY7CiAJfQog
CkBAIC0yNDYsOCArMjQxLDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcGFuZWxfZnVuY3Mg
cGFuZWxfZnVuY3MgPSB7CiAJLmdldF9tb2RlcyA9IGJvZV9wYW5lbF9nZXRfbW9kZXMsCiB9Owog
Ci0vKiA4IGluY2ggKi8KLXN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSBib2Vf
aGltYXg4Mjc5ZDhwX2Rpc3BsYXlfbW9kZSA9IHsKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Rp
c3BsYXlfbW9kZSBkZWZhdWx0X2Rpc3BsYXlfbW9kZSA9IHsKIAkuY2xvY2sgPSAxNTk0MjAsCiAJ
LmhkaXNwbGF5ID0gMTIwMCwKIAkuaHN5bmNfc3RhcnQgPSAxMjAwICsgODAsCkBAIC0yNjAsNiAr
MjU0LDE0IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSBib2VfaGltYXg4
Mjc5ZDhwX2Rpc3BsYXlfbW9kZSA9IHsKIAkudnJlZnJlc2ggPSA2MCwKIH07CiAKK3N0YXRpYyBj
b25zdCBzdHJ1Y3QgcGFuZWxfY21kIGRlZmF1bHRfb2ZmX2NtZHNbXSA9IHsKKwlfSU5JVF9DTUQo
MHgwMCwgMHgyOCksCisJX0lOSVRfQ01EKDB4MDEsIDB4MTApLAorCisJe30sCit9OworCisvKiA4
IGluY2ggKi8KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcGFuZWxfY21kIGJvZV9oaW1heDgyNzlkOHBf
b25fY21kc1tdID0gewogCV9JTklUX0NNRCgweDIyLCAweDEwKSwKIAlfSU5JVF9DTUQoMHgwMCwg
MHhCMCwgMHgwNSksCkBAIC01NjcsMTUgKzU2OSw4IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcGFu
ZWxfY21kIGJvZV9oaW1heDgyNzlkOHBfb25fY21kc1tdID0gewogCXt9LAogfTsKIAotc3RhdGlj
IGNvbnN0IHN0cnVjdCBwYW5lbF9jbWQgYm9lX2hpbWF4ODI3OWQ4cF9vZmZfY21kc1tdID0gewot
CV9JTklUX0NNRCgweDAwLCAweDI4KSwKLQlfSU5JVF9DTUQoMHgwMSwgMHgxMCksCi0KLQl7fSwK
LX07Ci0KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcGFuZWxfZGVzYyBib2VfaGltYXg4Mjc5ZDhwX3Bh
bmVsX2Rlc2MgPSB7Ci0JLmRpc3BsYXlfbW9kZSA9ICZib2VfaGltYXg4Mjc5ZDhwX2Rpc3BsYXlf
bW9kZSwKKwkuZGlzcGxheV9tb2RlID0gJmRlZmF1bHRfZGlzcGxheV9tb2RlLAogCS5icGMgPSA4
LAogCS53aWR0aF9tbSA9IDEwNywKIAkuaGVpZ2h0X21tID0gMTcyLApAQCAtNTg5LDIzICs1ODQs
MTAgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwYW5lbF9kZXNjIGJvZV9oaW1heDgyNzlkOHBfcGFu
ZWxfZGVzYyA9IHsKIAkuZm9ybWF0ID0gTUlQSV9EU0lfRk1UX1JHQjg4OCwKIAkubGFuZXMgPSA0
LAogCS5vbl9jbWRzID0gYm9lX2hpbWF4ODI3OWQ4cF9vbl9jbWRzLAotCS5vZmZfY21kcyA9IGJv
ZV9oaW1heDgyNzlkOHBfb2ZmX2NtZHMsCisJLm9mZl9jbWRzID0gZGVmYXVsdF9vZmZfY21kcywK
IH07CiAKIC8qIDEwIGluY2ggKi8KLXN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9k
ZSBib2VfaGltYXg4Mjc5ZDEwcF9kaXNwbGF5X21vZGUgPSB7Ci0JLmNsb2NrID0gMTU5NDIwLAot
CS5oZGlzcGxheSA9IDEyMDAsCi0JLmhzeW5jX3N0YXJ0ID0gMTIwMCArIDgwLAotCS5oc3luY19l
bmQgPSAxMjAwICsgODAgKyA2MCwKLQkuaHRvdGFsID0gMTIwMCArIDgwICsgNjAgKyAyNCwKLQku
dmRpc3BsYXkgPSAxOTIwLAotCS52c3luY19zdGFydCA9IDE5MjAgKyAxMCwKLQkudnN5bmNfZW5k
ID0gMTkyMCArIDEwICsgMTQsCi0JLnZ0b3RhbCA9IDE5MjAgKyAxMCArIDE0ICsgNCwKLQkudnJl
ZnJlc2ggPSA2MCwKLX07Ci0KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcGFuZWxfY21kIGJvZV9oaW1h
eDgyNzlkMTBwX29uX2NtZHNbXSA9IHsKIAlfSU5JVF9DTUQoMHgwMCwgMHhCMCwgMHgwNSksCiAJ
X0lOSVRfQ01EKDB4MDAsIDB4QjEsIDB4RTUpLApAQCAtOTEwLDE1ICs4OTIsOCBAQCBzdGF0aWMg
Y29uc3Qgc3RydWN0IHBhbmVsX2NtZCBib2VfaGltYXg4Mjc5ZDEwcF9vbl9jbWRzW10gPSB7CiAJ
e30sCiB9OwogCi1zdGF0aWMgY29uc3Qgc3RydWN0IHBhbmVsX2NtZCBib2VfaGltYXg4Mjc5ZDEw
cF9vZmZfY21kc1tdID0gewotCV9JTklUX0NNRCgweDAwLCAweDI4KSwKLQlfSU5JVF9DTUQoMHgw
MSwgMHgxMCksCi0KLQl7fSwKLX07Ci0KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgcGFuZWxfZGVzYyBi
b2VfaGltYXg4Mjc5ZDEwcF9wYW5lbF9kZXNjID0gewotCS5kaXNwbGF5X21vZGUgPSAmYm9lX2hp
bWF4ODI3OWQxMHBfZGlzcGxheV9tb2RlLAorCS5kaXNwbGF5X21vZGUgPSAmZGVmYXVsdF9kaXNw
bGF5X21vZGUsCiAJLmJwYyA9IDgsCiAJLndpZHRoX21tID0gMTM1LAogCS5oZWlnaHRfbW0gPSAy
MTYsCkBAIC05MzIsNyArOTA3LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBwYW5lbF9kZXNjIGJv
ZV9oaW1heDgyNzlkMTBwX3BhbmVsX2Rlc2MgPSB7CiAJLmZvcm1hdCA9IE1JUElfRFNJX0ZNVF9S
R0I4ODgsCiAJLmxhbmVzID0gNCwKIAkub25fY21kcyA9IGJvZV9oaW1heDgyNzlkMTBwX29uX2Nt
ZHMsCi0JLm9mZl9jbWRzID0gYm9lX2hpbWF4ODI3OWQxMHBfb2ZmX2NtZHMsCisJLm9mZl9jbWRz
ID0gZGVmYXVsdF9vZmZfY21kcywKIH07CiAKIHN0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNl
X2lkIHBhbmVsX29mX21hdGNoW10gPSB7CkBAIC05NDksMjggKzkyNCwzNCBAQCBNT0RVTEVfREVW
SUNFX1RBQkxFKG9mLCBwYW5lbF9vZl9tYXRjaCk7CiBzdGF0aWMgaW50IHBhbmVsX2FkZChzdHJ1
Y3QgcGFuZWxfaW5mbyAqcGluZm8pCiB7CiAJc3RydWN0IGRldmljZSAqZGV2ID0gJnBpbmZvLT5s
aW5rLT5kZXY7Ci0JaW50IGVycjsKKwlpbnQgcmV0OwogCi0JcGluZm8tPnBwMThfZ3BpbyA9IGRl
dm1fZ3Bpb2RfZ2V0X29wdGlvbmFsKGRldiwgInBwMTgiLCBHUElPRF9PVVRfTE9XKTsKKwlwaW5m
by0+cHAxOF9ncGlvID0gZGV2bV9ncGlvZF9nZXRfb3B0aW9uYWwoZGV2LCAicHAxOCIsIEdQSU9E
X09VVF9ISUdIKTsKIAlpZiAoSVNfRVJSKHBpbmZvLT5wcDE4X2dwaW8pKSB7Ci0JCWVyciA9IFBU
Ul9FUlIocGluZm8tPnBwMThfZ3Bpbyk7Ci0JCWRldl9lcnIoZGV2LCAiZmFpbGVkIHRvIGdldCBw
cDE4IGdwaW86ICVkXG4iLCBlcnIpOwotCQlwaW5mby0+cHAxOF9ncGlvID0gTlVMTDsKKwkJcmV0
ID0gUFRSX0VSUihwaW5mby0+cHAxOF9ncGlvKTsKKwkJaWYgKHJldCAhPSAtRVBST0JFX0RFRkVS
KQorCQkJRFJNX0RFVl9FUlJPUihkZXYsICJmYWlsZWQgdG8gZ2V0IHBwMTggZ3BpbzogJWRcbiIs
CisJCQkJCXJldCk7CisJCXJldHVybiByZXQ7CiAJfQogCi0JcGluZm8tPnBwMzNfZ3BpbyA9IGRl
dm1fZ3Bpb2RfZ2V0X29wdGlvbmFsKGRldiwgInBwMzMiLCBHUElPRF9PVVRfTE9XKTsKKwlwaW5m
by0+cHAzM19ncGlvID0gZGV2bV9ncGlvZF9nZXRfb3B0aW9uYWwoZGV2LCAicHAzMyIsIEdQSU9E
X09VVF9ISUdIKTsKIAlpZiAoSVNfRVJSKHBpbmZvLT5wcDMzX2dwaW8pKSB7Ci0JCWVyciA9IFBU
Ul9FUlIocGluZm8tPnBwMzNfZ3Bpbyk7Ci0JCWRldl9lcnIoZGV2LCAiZmFpbGVkIHRvIGdldCBw
cDMzIGdwaW86ICVkXG4iLCBlcnIpOwotCQlwaW5mby0+cHAzM19ncGlvID0gTlVMTDsKKwkJcmV0
ID0gUFRSX0VSUihwaW5mby0+cHAzM19ncGlvKTsKKwkJaWYgKHJldCAhPSAtRVBST0JFX0RFRkVS
KQorCQkJRFJNX0RFVl9FUlJPUihkZXYsICJmYWlsZWQgdG8gZ2V0IHBwMzMgZ3BpbzogJWRcbiIs
CisJCQkJCXJldCk7CisJCXJldHVybiByZXQ7CiAJfQogCiAJcGluZm8tPmVuYWJsZV9ncGlvID0g
ZGV2bV9ncGlvZF9nZXRfb3B0aW9uYWwoZGV2LCAiZW5hYmxlIiwKLQkJCQkJCSAgICBHUElPRF9P
VVRfTE9XKTsKKwkJCQkJCQlHUElPRF9PVVRfSElHSCk7CiAJaWYgKElTX0VSUihwaW5mby0+ZW5h
YmxlX2dwaW8pKSB7Ci0JCWVyciA9IFBUUl9FUlIocGluZm8tPmVuYWJsZV9ncGlvKTsKLQkJZGV2
X2VycihkZXYsICJmYWlsZWQgdG8gZ2V0IGVuYWJsZSBncGlvOiAlZFxuIiwgZXJyKTsKLQkJcGlu
Zm8tPmVuYWJsZV9ncGlvID0gTlVMTDsKKwkJcmV0ID0gUFRSX0VSUihwaW5mby0+ZW5hYmxlX2dw
aW8pOworCQlpZiAocmV0ICE9IC1FUFJPQkVfREVGRVIpCisJCQlEUk1fREVWX0VSUk9SKGRldiwg
ImZhaWxlZCB0byBnZXQgZW5hYmxlIGdwaW86ICVkXG4iLAorCQkJCQlyZXQpOworCQlyZXR1cm4g
cmV0OwogCX0KIAogCXBpbmZvLT5iYWNrbGlnaHQgPSBkZXZtX29mX2ZpbmRfYmFja2xpZ2h0KGRl
dik7CkBAIC05ODEsOSArOTYyLDkgQEAgc3RhdGljIGludCBwYW5lbF9hZGQoc3RydWN0IHBhbmVs
X2luZm8gKnBpbmZvKQogCXBpbmZvLT5iYXNlLmZ1bmNzID0gJnBhbmVsX2Z1bmNzOwogCXBpbmZv
LT5iYXNlLmRldiA9ICZwaW5mby0+bGluay0+ZGV2OwogCi0JZXJyID0gZHJtX3BhbmVsX2FkZCgm
cGluZm8tPmJhc2UpOwotCWlmIChlcnIgPCAwKQotCQlyZXR1cm4gZXJyOworCXJldCA9IGRybV9w
YW5lbF9hZGQoJnBpbmZvLT5iYXNlKTsKKwlpZiAocmV0IDwgMCkKKwkJcmV0dXJuIHJldDsKIAog
CXJldHVybiAwOwogfQpAQCAtMTAyOCw3ICsxMDA5LDcgQEAgc3RhdGljIGludCBwYW5lbF9yZW1v
dmUoc3RydWN0IG1pcGlfZHNpX2RldmljZSAqZHNpKQogCWVyciA9IGJvZV9wYW5lbF91bnByZXBh
cmUoJnBpbmZvLT5iYXNlKTsKIAlpZiAoZXJyIDwgMCkKIAkJRFJNX0RFVl9FUlJPUigmZHNpLT5k
ZXYsICJmYWlsZWQgdG8gdW5wcmVwYXJlIHBhbmVsOiAlZFxuIiwKLQkJCQkJCWVycik7CisJCQkJ
ZXJyKTsKIAogCWVyciA9IGJvZV9wYW5lbF9kaXNhYmxlKCZwaW5mby0+YmFzZSk7CiAJaWYgKGVy
ciA8IDApCkBAIC0xMDM3LDcgKzEwMTgsNyBAQCBzdGF0aWMgaW50IHBhbmVsX3JlbW92ZShzdHJ1
Y3QgbWlwaV9kc2lfZGV2aWNlICpkc2kpCiAJZXJyID0gbWlwaV9kc2lfZGV0YWNoKGRzaSk7CiAJ
aWYgKGVyciA8IDApCiAJCURSTV9ERVZfRVJST1IoJmRzaS0+ZGV2LCAiZmFpbGVkIHRvIGRldGFj
aCBmcm9tIERTSSBob3N0OiAlZFxuIiwKLQkJCQkJICBlcnIpOworCQkJCWVycik7CiAKIAlkcm1f
cGFuZWxfZGV0YWNoKCZwaW5mby0+YmFzZSk7CiAJcGFuZWxfZGVsKHBpbmZvKTsKLS0gCjIuMTcu
MQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRl
dmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
