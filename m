Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 79E308E6BB
	for <lists+dri-devel@lfdr.de>; Thu, 15 Aug 2019 10:36:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DA5556E906;
	Thu, 15 Aug 2019 08:35:03 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from lb2-smtp-cloud8.xs4all.net (lb2-smtp-cloud8.xs4all.net
 [194.109.24.25])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2EF216E0EF
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 11:02:31 +0000 (UTC)
Received: from [IPv6:2001:420:44c1:2579:155e:93d7:78eb:5531]
 ([IPv6:2001:420:44c1:2579:155e:93d7:78eb:5531])
 by smtp-cloud8.xs4all.net with ESMTPA
 id xUZChKjc0qTdhxUZFh9FtA; Tue, 13 Aug 2019 13:02:29 +0200
Subject: Re: [PATCH v2] i2c: replace i2c_new_secondary_device with an ERR_PTR
 variant
To: Wolfram Sang <wsa+renesas@sang-engineering.com>, linux-i2c@vger.kernel.org
References: <20190809154047.9897-1-wsa+renesas@sang-engineering.com>
From: Hans Verkuil <hverkuil-cisco@xs4all.nl>
Message-ID: <32426f9d-1e83-d965-72e9-941fda3296b2@xs4all.nl>
Date: Tue, 13 Aug 2019 13:02:14 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.5.1
MIME-Version: 1.0
In-Reply-To: <20190809154047.9897-1-wsa+renesas@sang-engineering.com>
Content-Language: en-US
X-CMAE-Envelope: MS4wfDC1aA6PyMwUuGK2Lt4ZMenWL5zprTbe6e0KsIiTe3yVAMA3RXmwoV0LafInYu59ntKfDeDScbJrS5uaP0M0qy9K/EieqsoQ91/Ze55plEOKWyDZHLZd
 751axdqfngl3nGyEVL+bhLTyFmLWBiqooy7YRkCofo4lT+zofIdKhezPat1avKiut+b2pfUwYOdm+Eor79M/X2hd9ZN+cNsOiASePmUGCkkBwVWHsv1QETEh
 IOOwkbKXtziEe1umtdGK/G0ifZrgaPDZAVI7O421Xvi2VAQf+fIOQt9hEkn1rHQHC7Z/uK0QYvMUS1zObj5xbqdFpVjkdjc8WxRphXz/ZkBjzkoULnNugpz7
 VEJAuTEF27pPtZuexK1lfC7TorUulG8EhSBvLVhicIObIjdlnvBbgXqjCzeIR/2x+ufTu5YvI9FyYNI5lUbj1nrnsyrM9XJu4OUtdk261BvD1MPcdoZC1ZJY
 Z08Dg5FRALBAUREokGGiua8DYK/tsUO8CzVohDjyN4ZvZecI+v3Xn5N3Cb+YRTs+YtS78bIcM1c5N76Ht8uNEQJJR0udDurBDIA0XaGZBOg2JE3Ojfb2LZri
 Dz1KX8S8HCzcGG4k/jrGqoTd0SiVlXhC3PsQ9KBhL90A+pFLcz31pCEqbB1TyhAmTNKRougWq3PFa5hByvbv2iWFMQBO/wu7GgQ/36QyhIGqzDYdlqES22mN
 e5jLH2R4YqYdrWuiCOLTBWnB/JEEOMB4aS4FnPnSTttSmAr3zM1OZA==
X-Mailman-Approved-At: Thu, 15 Aug 2019 08:34:55 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Wolfram Sang <wsa@the-dreams.de>, David Airlie <airlied@linux.ie>,
 Kieran Bingham <kieran.bingham@ideasonboard.com>,
 dri-devel@lists.freedesktop.org, linux-kernel@vger.kernel.org,
 Kieran Bingham <kieran.bingham+renesas@ideasonboard.com>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Mauro Carvalho Chehab <mchehab@kernel.org>, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gOC85LzE5IDU6NDAgUE0sIFdvbGZyYW0gU2FuZyB3cm90ZToKPiBJbiB0aGUgZ2VuZXJhbCBt
b3ZlIHRvIGhhdmUgaTJjX25ld18qX2RldmljZSBmdW5jdGlvbnMgd2hpY2ggcmV0dXJuCj4gRVJS
X1BUUiBpbnN0ZWFkIG9mIE5VTEwsIHRoaXMgcGF0Y2ggY29udmVydHMgaTJjX25ld19zZWNvbmRh
cnlfZGV2aWNlKCkuCj4gCj4gVGhlcmUgYXJlIG9ubHkgZmV3IHVzZXJzLCBzbyB0aGlzIHBhdGNo
IGNvbnZlcnRzIHRoZSBJMkMgY29yZSBhbmQgYWxsCj4gdXNlcnMgaW4gb25lIGdvLiBUaGUgZnVu
Y3Rpb24gZ2V0cyByZW5hbWVkIHRvIGkyY19uZXdfYW5jaWxsYXJ5X2RldmljZSgpCj4gc28gb3V0
LW9mLXRyZWUgdXNlcnMgd2lsbCBnZXQgYSBidWlsZCBmYWlsdXJlIHRvIHVuZGVyc3RhbmQgdGhl
eSBuZWVkIHRvCj4gYWRhcHQgdGhlaXIgZXJyb3IgY2hlY2tpbmcgY29kZS4KPiAKPiBTaWduZWQt
b2ZmLWJ5OiBXb2xmcmFtIFNhbmcgPHdzYStyZW5lc2FzQHNhbmctZW5naW5lZXJpbmcuY29tPgo+
IFJldmlld2VkLWJ5OiBLaWVyYW4gQmluZ2hhbSA8a2llcmFuLmJpbmdoYW0rcmVuZXNhc0BpZGVh
c29uYm9hcmQuY29tPiAjIGFkdjc0OHgKPiBSZXZpZXdlZC1ieTogTGF1cmVudCBQaW5jaGFydCA8
bGF1cmVudC5waW5jaGFydEBpZGVhc29uYm9hcmQuY29tPiAjIGFkdjc1MTEKCkZvciBhZHY3NjA0
OgoKUmV2aWV3ZWQtYnk6IEhhbnMgVmVya3VpbCA8aHZlcmt1aWwtY2lzY29AeHM0YWxsLm5sPgoK
VGhhbmtzIQoKCUhhbnMKCj4gLS0tCj4gCj4gQ2hhbmdlcyBzaW5jZSB2MToKPiAKPiAqIGFkdjc2
MDQ6IHVzZSBhIGxvY2FsIHZhcmlhYmxlIGZvciBlcnJvciBoYW5kbGluZwo+ICogYWR2NzYwNDog
c2ltcGxpZnkgdW5yZWdpc3RlcmluZyBkdW1teSBjbGllbnRzIGJlY2F1c2UgSTJDIGNvcmUgaGVs
cGVyCj4gICAgICAgICAgICBpcyBOVUxMIHB0ciBhd2FyZQo+ICogYWRkZWQgdGFncyBmb3IgYWR2
NzQ4eCBhbmQgYWR2NzUxMQo+IAo+IFRoYW5rcyBLaWVyYW4gYW5kIExhdXJlbnQhCj4gCj4gCj4g
IGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvYWR2NzUxMS9hZHY3NTExX2Rydi5jIHwgMTggKysrKysr
KystLS0tLS0tLQo+ICBkcml2ZXJzL2kyYy9pMmMtY29yZS1iYXNlLmMgICAgICAgICAgICAgICAg
ICB8IDEwICsrKystLS0tLQo+ICBkcml2ZXJzL21lZGlhL2kyYy9hZHY3NDh4L2Fkdjc0OHgtY29y
ZS5jICAgICB8ICA2ICsrKy0tLQo+ICBkcml2ZXJzL21lZGlhL2kyYy9hZHY3NjA0LmMgICAgICAg
ICAgICAgICAgICB8IDIyICsrKysrKysrKysrLS0tLS0tLS0tCj4gIGluY2x1ZGUvbGludXgvaTJj
LmggICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDIgKy0KPiAgNSBmaWxlcyBjaGFuZ2VkLCAz
MCBpbnNlcnRpb25zKCspLCAyOCBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2JyaWRnZS9hZHY3NTExL2Fkdjc1MTFfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0v
YnJpZGdlL2Fkdjc1MTEvYWR2NzUxMV9kcnYuYwo+IGluZGV4IGY2ZDI2ODFmNjkyNy4uOWUxM2U0
NjZlNzJjIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvYWR2NzUxMS9hZHY3
NTExX2Rydi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9hZHY3NTExL2Fkdjc1MTFf
ZHJ2LmMKPiBAQCAtOTgxLDEwICs5ODEsMTAgQEAgc3RhdGljIGludCBhZHY3NTExX2luaXRfY2Vj
X3JlZ21hcChzdHJ1Y3QgYWR2NzUxMSAqYWR2KQo+ICB7Cj4gIAlpbnQgcmV0Owo+ICAKPiAtCWFk
di0+aTJjX2NlYyA9IGkyY19uZXdfc2Vjb25kYXJ5X2RldmljZShhZHYtPmkyY19tYWluLCAiY2Vj
IiwKPiArCWFkdi0+aTJjX2NlYyA9IGkyY19uZXdfYW5jaWxsYXJ5X2RldmljZShhZHYtPmkyY19t
YWluLCAiY2VjIiwKPiAgCQkJCQkJQURWNzUxMV9DRUNfSTJDX0FERFJfREVGQVVMVCk7Cj4gLQlp
ZiAoIWFkdi0+aTJjX2NlYykKPiAtCQlyZXR1cm4gLUVJTlZBTDsKPiArCWlmIChJU19FUlIoYWR2
LT5pMmNfY2VjKSkKPiArCQlyZXR1cm4gUFRSX0VSUihhZHYtPmkyY19jZWMpOwo+ICAJaTJjX3Nl
dF9jbGllbnRkYXRhKGFkdi0+aTJjX2NlYywgYWR2KTsKPiAgCj4gIAlhZHYtPnJlZ21hcF9jZWMg
PSBkZXZtX3JlZ21hcF9pbml0X2kyYyhhZHYtPmkyY19jZWMsCj4gQEAgLTExNjUsMjAgKzExNjUs
MjAgQEAgc3RhdGljIGludCBhZHY3NTExX3Byb2JlKHN0cnVjdCBpMmNfY2xpZW50ICppMmMsIGNv
bnN0IHN0cnVjdCBpMmNfZGV2aWNlX2lkICppZCkKPiAgCj4gIAlhZHY3NTExX3BhY2tldF9kaXNh
YmxlKGFkdjc1MTEsIDB4ZmZmZik7Cj4gIAo+IC0JYWR2NzUxMS0+aTJjX2VkaWQgPSBpMmNfbmV3
X3NlY29uZGFyeV9kZXZpY2UoaTJjLCAiZWRpZCIsCj4gKwlhZHY3NTExLT5pMmNfZWRpZCA9IGky
Y19uZXdfYW5jaWxsYXJ5X2RldmljZShpMmMsICJlZGlkIiwKPiAgCQkJCQlBRFY3NTExX0VESURf
STJDX0FERFJfREVGQVVMVCk7Cj4gLQlpZiAoIWFkdjc1MTEtPmkyY19lZGlkKSB7Cj4gLQkJcmV0
ID0gLUVJTlZBTDsKPiArCWlmIChJU19FUlIoYWR2NzUxMS0+aTJjX2VkaWQpKSB7Cj4gKwkJcmV0
ID0gUFRSX0VSUihhZHY3NTExLT5pMmNfZWRpZCk7Cj4gIAkJZ290byB1bmluaXRfcmVndWxhdG9y
czsKPiAgCX0KPiAgCj4gIAlyZWdtYXBfd3JpdGUoYWR2NzUxMS0+cmVnbWFwLCBBRFY3NTExX1JF
R19FRElEX0kyQ19BRERSLAo+ICAJCSAgICAgYWR2NzUxMS0+aTJjX2VkaWQtPmFkZHIgPDwgMSk7
Cj4gIAo+IC0JYWR2NzUxMS0+aTJjX3BhY2tldCA9IGkyY19uZXdfc2Vjb25kYXJ5X2RldmljZShp
MmMsICJwYWNrZXQiLAo+ICsJYWR2NzUxMS0+aTJjX3BhY2tldCA9IGkyY19uZXdfYW5jaWxsYXJ5
X2RldmljZShpMmMsICJwYWNrZXQiLAo+ICAJCQkJCUFEVjc1MTFfUEFDS0VUX0kyQ19BRERSX0RF
RkFVTFQpOwo+IC0JaWYgKCFhZHY3NTExLT5pMmNfcGFja2V0KSB7Cj4gLQkJcmV0ID0gLUVJTlZB
TDsKPiArCWlmIChJU19FUlIoYWR2NzUxMS0+aTJjX3BhY2tldCkpIHsKPiArCQlyZXQgPSBQVFJf
RVJSKGFkdjc1MTEtPmkyY19wYWNrZXQpOwo+ICAJCWdvdG8gZXJyX2kyY191bnJlZ2lzdGVyX2Vk
aWQ7Cj4gIAl9Cj4gIAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2kyYy9pMmMtY29yZS1iYXNlLmMg
Yi9kcml2ZXJzL2kyYy9pMmMtY29yZS1iYXNlLmMKPiBpbmRleCBmMjZlZDQ5NWQzODQuLjc2Y2I5
MWUwNjRiOCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2kyYy9pMmMtY29yZS1iYXNlLmMKPiArKysg
Yi9kcml2ZXJzL2kyYy9pMmMtY29yZS1iYXNlLmMKPiBAQCAtOTY2LDcgKzk2Niw3IEBAIHN0cnVj
dCBpMmNfY2xpZW50ICpkZXZtX2kyY19uZXdfZHVtbXlfZGV2aWNlKHN0cnVjdCBkZXZpY2UgKmRl
diwKPiAgRVhQT1JUX1NZTUJPTF9HUEwoZGV2bV9pMmNfbmV3X2R1bW15X2RldmljZSk7Cj4gIAo+
ICAvKioKPiAtICogaTJjX25ld19zZWNvbmRhcnlfZGV2aWNlIC0gSGVscGVyIHRvIGdldCB0aGUg
aW5zdGFudGlhdGVkIHNlY29uZGFyeSBhZGRyZXNzCj4gKyAqIGkyY19uZXdfYW5jaWxsYXJ5X2Rl
dmljZSAtIEhlbHBlciB0byBnZXQgdGhlIGluc3RhbnRpYXRlZCBzZWNvbmRhcnkgYWRkcmVzcwo+
ICAgKiBhbmQgY3JlYXRlIHRoZSBhc3NvY2lhdGVkIGRldmljZQo+ICAgKiBAY2xpZW50OiBIYW5k
bGUgdG8gdGhlIHByaW1hcnkgY2xpZW50Cj4gICAqIEBuYW1lOiBIYW5kbGUgdG8gc3BlY2lmeSB3
aGljaCBzZWNvbmRhcnkgYWRkcmVzcyB0byBnZXQKPiBAQCAtOTg1LDkgKzk4NSw5IEBAIEVYUE9S
VF9TWU1CT0xfR1BMKGRldm1faTJjX25ld19kdW1teV9kZXZpY2UpOwo+ICAgKiBjZWxsIHdob3Nl
ICJyZWctbmFtZXMiIHZhbHVlIG1hdGNoZXMgdGhlIHNsYXZlIG5hbWUuCj4gICAqCj4gICAqIFRo
aXMgcmV0dXJucyB0aGUgbmV3IGkyYyBjbGllbnQsIHdoaWNoIHNob3VsZCBiZSBzYXZlZCBmb3Ig
bGF0ZXIgdXNlIHdpdGgKPiAtICogaTJjX3VucmVnaXN0ZXJfZGV2aWNlKCk7IG9yIE5VTEwgdG8g
aW5kaWNhdGUgYW4gZXJyb3IuCj4gKyAqIGkyY191bnJlZ2lzdGVyX2RldmljZSgpOyBvciBhbiBF
UlJfUFRSIHRvIGRlc2NyaWJlIHRoZSBlcnJvci4KPiAgICovCj4gLXN0cnVjdCBpMmNfY2xpZW50
ICppMmNfbmV3X3NlY29uZGFyeV9kZXZpY2Uoc3RydWN0IGkyY19jbGllbnQgKmNsaWVudCwKPiAr
c3RydWN0IGkyY19jbGllbnQgKmkyY19uZXdfYW5jaWxsYXJ5X2RldmljZShzdHJ1Y3QgaTJjX2Ns
aWVudCAqY2xpZW50LAo+ICAJCQkJCQljb25zdCBjaGFyICpuYW1lLAo+ICAJCQkJCQl1MTYgZGVm
YXVsdF9hZGRyKQo+ICB7Cj4gQEAgLTEwMDIsOSArMTAwMiw5IEBAIHN0cnVjdCBpMmNfY2xpZW50
ICppMmNfbmV3X3NlY29uZGFyeV9kZXZpY2Uoc3RydWN0IGkyY19jbGllbnQgKmNsaWVudCwKPiAg
CX0KPiAgCj4gIAlkZXZfZGJnKCZjbGllbnQtPmFkYXB0ZXItPmRldiwgIkFkZHJlc3MgZm9yICVz
IDogMHgleFxuIiwgbmFtZSwgYWRkcik7Cj4gLQlyZXR1cm4gaTJjX25ld19kdW1teShjbGllbnQt
PmFkYXB0ZXIsIGFkZHIpOwo+ICsJcmV0dXJuIGkyY19uZXdfZHVtbXlfZGV2aWNlKGNsaWVudC0+
YWRhcHRlciwgYWRkcik7Cj4gIH0KPiAtRVhQT1JUX1NZTUJPTF9HUEwoaTJjX25ld19zZWNvbmRh
cnlfZGV2aWNlKTsKPiArRVhQT1JUX1NZTUJPTF9HUEwoaTJjX25ld19hbmNpbGxhcnlfZGV2aWNl
KTsKPiAgCj4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KPiAgCj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvbWVkaWEvaTJjL2Fkdjc0OHgvYWR2NzQ4eC1jb3JlLmMgYi9kcml2ZXJzL21lZGlhL2kyYy9h
ZHY3NDh4L2Fkdjc0OHgtY29yZS5jCj4gaW5kZXggZjU3Y2Q3N2EzMmZhLi4yNTY3ZGUyYjAwMzcg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9tZWRpYS9pMmMvYWR2NzQ4eC9hZHY3NDh4LWNvcmUuYwo+
ICsrKyBiL2RyaXZlcnMvbWVkaWEvaTJjL2Fkdjc0OHgvYWR2NzQ4eC1jb3JlLmMKPiBAQCAtMTgz
LDE0ICsxODMsMTQgQEAgc3RhdGljIGludCBhZHY3NDh4X2luaXRpYWxpc2VfY2xpZW50cyhzdHJ1
Y3QgYWR2NzQ4eF9zdGF0ZSAqc3RhdGUpCj4gIAlpbnQgcmV0Owo+ICAKPiAgCWZvciAoaSA9IEFE
Vjc0OFhfUEFHRV9EUExMOyBpIDwgQURWNzQ4WF9QQUdFX01BWDsgKytpKSB7Cj4gLQkJc3RhdGUt
PmkyY19jbGllbnRzW2ldID0gaTJjX25ld19zZWNvbmRhcnlfZGV2aWNlKAo+ICsJCXN0YXRlLT5p
MmNfY2xpZW50c1tpXSA9IGkyY19uZXdfYW5jaWxsYXJ5X2RldmljZSgKPiAgCQkJCXN0YXRlLT5j
bGllbnQsCj4gIAkJCQlhZHY3NDh4X2RlZmF1bHRfYWRkcmVzc2VzW2ldLm5hbWUsCj4gIAkJCQlh
ZHY3NDh4X2RlZmF1bHRfYWRkcmVzc2VzW2ldLmRlZmF1bHRfYWRkcik7Cj4gIAo+IC0JCWlmIChz
dGF0ZS0+aTJjX2NsaWVudHNbaV0gPT0gTlVMTCkgewo+ICsJCWlmIChJU19FUlIoc3RhdGUtPmky
Y19jbGllbnRzW2ldKSkgewo+ICAJCQlhZHZfZXJyKHN0YXRlLCAiZmFpbGVkIHRvIGNyZWF0ZSBp
MmMgY2xpZW50ICV1XG4iLCBpKTsKPiAtCQkJcmV0dXJuIC1FTk9NRU07Cj4gKwkJCXJldHVybiBQ
VFJfRVJSKHN0YXRlLT5pMmNfY2xpZW50c1tpXSk7Cj4gIAkJfQo+ICAKPiAgCQlyZXQgPSBhZHY3
NDh4X2NvbmZpZ3VyZV9yZWdtYXAoc3RhdGUsIGkpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL21l
ZGlhL2kyYy9hZHY3NjA0LmMgYi9kcml2ZXJzL21lZGlhL2kyYy9hZHY3NjA0LmMKPiBpbmRleCAy
OGE4NGJmOWY4YTkuLjJkZWRkNmViYjIzNiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL21lZGlhL2ky
Yy9hZHY3NjA0LmMKPiArKysgYi9kcml2ZXJzL21lZGlhL2kyYy9hZHY3NjA0LmMKPiBAQCAtMjg2
MiwxMCArMjg2Miw4IEBAIHN0YXRpYyB2b2lkIGFkdjc2eHhfdW5yZWdpc3Rlcl9jbGllbnRzKHN0
cnVjdCBhZHY3Nnh4X3N0YXRlICpzdGF0ZSkKPiAgewo+ICAJdW5zaWduZWQgaW50IGk7Cj4gIAo+
IC0JZm9yIChpID0gMTsgaSA8IEFSUkFZX1NJWkUoc3RhdGUtPmkyY19jbGllbnRzKTsgKytpKSB7
Cj4gLQkJaWYgKHN0YXRlLT5pMmNfY2xpZW50c1tpXSkKPiAtCQkJaTJjX3VucmVnaXN0ZXJfZGV2
aWNlKHN0YXRlLT5pMmNfY2xpZW50c1tpXSk7Cj4gLQl9Cj4gKwlmb3IgKGkgPSAxOyBpIDwgQVJS
QVlfU0laRShzdGF0ZS0+aTJjX2NsaWVudHMpOyArK2kpCj4gKwkJaTJjX3VucmVnaXN0ZXJfZGV2
aWNlKHN0YXRlLT5pMmNfY2xpZW50c1tpXSk7Cj4gIH0KPiAgCj4gIHN0YXRpYyBzdHJ1Y3QgaTJj
X2NsaWVudCAqYWR2NzZ4eF9kdW1teV9jbGllbnQoc3RydWN0IHY0bDJfc3ViZGV2ICpzZCwKPiBA
QCAtMjg3OCwxNCArMjg3NiwxNCBAQCBzdGF0aWMgc3RydWN0IGkyY19jbGllbnQgKmFkdjc2eHhf
ZHVtbXlfY2xpZW50KHN0cnVjdCB2NGwyX3N1YmRldiAqc2QsCj4gIAlzdHJ1Y3QgaTJjX2NsaWVu
dCAqbmV3X2NsaWVudDsKPiAgCj4gIAlpZiAocGRhdGEgJiYgcGRhdGEtPmkyY19hZGRyZXNzZXNb
cGFnZV0pCj4gLQkJbmV3X2NsaWVudCA9IGkyY19uZXdfZHVtbXkoY2xpZW50LT5hZGFwdGVyLAo+
ICsJCW5ld19jbGllbnQgPSBpMmNfbmV3X2R1bW15X2RldmljZShjbGllbnQtPmFkYXB0ZXIsCj4g
IAkJCQkJICAgcGRhdGEtPmkyY19hZGRyZXNzZXNbcGFnZV0pOwo+ICAJZWxzZQo+IC0JCW5ld19j
bGllbnQgPSBpMmNfbmV3X3NlY29uZGFyeV9kZXZpY2UoY2xpZW50LAo+ICsJCW5ld19jbGllbnQg
PSBpMmNfbmV3X2FuY2lsbGFyeV9kZXZpY2UoY2xpZW50LAo+ICAJCQkJYWR2NzZ4eF9kZWZhdWx0
X2FkZHJlc3Nlc1twYWdlXS5uYW1lLAo+ICAJCQkJYWR2NzZ4eF9kZWZhdWx0X2FkZHJlc3Nlc1tw
YWdlXS5kZWZhdWx0X2FkZHIpOwo+ICAKPiAtCWlmIChuZXdfY2xpZW50KQo+ICsJaWYgKCFJU19F
UlIobmV3X2NsaWVudCkpCj4gIAkJaW9fd3JpdGUoc2QsIGlvX3JlZywgbmV3X2NsaWVudC0+YWRk
ciA8PCAxKTsKPiAgCj4gIAlyZXR1cm4gbmV3X2NsaWVudDsKPiBAQCAtMzUxNiwxNSArMzUxNCwx
OSBAQCBzdGF0aWMgaW50IGFkdjc2eHhfcHJvYmUoc3RydWN0IGkyY19jbGllbnQgKmNsaWVudCwK
PiAgCX0KPiAgCj4gIAlmb3IgKGkgPSAxOyBpIDwgQURWNzZYWF9QQUdFX01BWDsgKytpKSB7Cj4g
KwkJc3RydWN0IGkyY19jbGllbnQgKmR1bW15X2NsaWVudDsKPiArCj4gIAkJaWYgKCEoQklUKGkp
ICYgc3RhdGUtPmluZm8tPnBhZ2VfbWFzaykpCj4gIAkJCWNvbnRpbnVlOwo+ICAKPiAtCQlzdGF0
ZS0+aTJjX2NsaWVudHNbaV0gPSBhZHY3Nnh4X2R1bW15X2NsaWVudChzZCwgaSk7Cj4gLQkJaWYg
KCFzdGF0ZS0+aTJjX2NsaWVudHNbaV0pIHsKPiAtCQkJZXJyID0gLUVJTlZBTDsKPiArCQlkdW1t
eV9jbGllbnQgPSBhZHY3Nnh4X2R1bW15X2NsaWVudChzZCwgaSk7Cj4gKwkJaWYgKElTX0VSUihk
dW1teV9jbGllbnQpKSB7Cj4gKwkJCWVyciA9IFBUUl9FUlIoZHVtbXlfY2xpZW50KTsKPiAgCQkJ
djRsMl9lcnIoc2QsICJmYWlsZWQgdG8gY3JlYXRlIGkyYyBjbGllbnQgJXVcbiIsIGkpOwo+ICAJ
CQlnb3RvIGVycl9pMmM7Cj4gIAkJfQo+ICsKPiArCQlzdGF0ZS0+aTJjX2NsaWVudHNbaV0gPSBk
dW1teV9jbGllbnQ7Cj4gIAl9Cj4gIAo+ICAJSU5JVF9ERUxBWUVEX1dPUksoJnN0YXRlLT5kZWxh
eWVkX3dvcmtfZW5hYmxlX2hvdHBsdWcsCj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvaTJj
LmggYi9pbmNsdWRlL2xpbnV4L2kyYy5oCj4gaW5kZXggZmE1NTUyYzIzMDdiLi5lYmJlMDI0ZGQ5
ZTAgMTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9saW51eC9pMmMuaAo+ICsrKyBiL2luY2x1ZGUvbGlu
dXgvaTJjLmgKPiBAQCAtNDczLDcgKzQ3Myw3IEBAIGV4dGVybiBzdHJ1Y3QgaTJjX2NsaWVudCAq
Cj4gIGRldm1faTJjX25ld19kdW1teV9kZXZpY2Uoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3Qg
aTJjX2FkYXB0ZXIgKmFkYXAsIHUxNiBhZGRyZXNzKTsKPiAgCj4gIGV4dGVybiBzdHJ1Y3QgaTJj
X2NsaWVudCAqCj4gLWkyY19uZXdfc2Vjb25kYXJ5X2RldmljZShzdHJ1Y3QgaTJjX2NsaWVudCAq
Y2xpZW50LAo+ICtpMmNfbmV3X2FuY2lsbGFyeV9kZXZpY2Uoc3RydWN0IGkyY19jbGllbnQgKmNs
aWVudCwKPiAgCQkJCWNvbnN0IGNoYXIgKm5hbWUsCj4gIAkJCQl1MTYgZGVmYXVsdF9hZGRyKTsK
PiAgCj4gCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpk
cmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
