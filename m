Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 2B13B1BD49
	for <lists+dri-devel@lfdr.de>; Mon, 13 May 2019 20:37:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 472D589203;
	Mon, 13 May 2019 18:37:43 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x644.google.com (mail-pl1-x644.google.com
 [IPv6:2607:f8b0:4864:20::644])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B34E289203
 for <dri-devel@lists.freedesktop.org>; Mon, 13 May 2019 18:37:41 +0000 (UTC)
Received: by mail-pl1-x644.google.com with SMTP id g9so6902016plm.6
 for <dri-devel@lists.freedesktop.org>; Mon, 13 May 2019 11:37:41 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=/zim2Zm14+hBiIdxL75uGuTurREwAY5pGO4hNSy8kOU=;
 b=oy5IeAXukSFrHW/MYOzq/rxVXvXvHjAkGBkPxvNBo9V1EcTKg8xCl7f/IqiFYQn6lq
 TlkEfpCw7/t/I5BQV6KR9SZLJej4pvhIA+B6B9urElIQ4lc2muU5DdJmyX7i8ggihYSg
 bzksqt2sHEAqqnnoVdDlnVSlSaYRGAAYX2+Ce5Yt7V36qU9N+67chD0fiXKi43iNWKae
 6OS3xk/RYctKcHVGYaJyu1DyF6/KKcpeueMqPosVfPizI5FcNhpPPdUkvmHu0KbhDp/h
 gJHptigBhyKl1sKzvZ+Ofix373AWi264cNHarQuIX/X06BN+X2Dd3TRDzEp16vMGXIGQ
 FV5w==
X-Gm-Message-State: APjAAAWgXSdYyXmdmlgTC0xH6ShmAxCajxJHXZ+FxKQymxHFYuiMK2tT
 zoAnmxrj22QWgWrOw7Y4MXNsqg==
X-Google-Smtp-Source: APXvYqzxoXKnO8Jn6I130pIuxValQorz5yIdcNwQh2uoItv6U68ZPWg+EDsOQkiBs/emAkxoC5yCtw==
X-Received: by 2002:a17:902:9686:: with SMTP id
 n6mr33409737plp.282.1557772660650; 
 Mon, 13 May 2019 11:37:40 -0700 (PDT)
Received: from localhost.localdomain ([2601:1c2:680:1319:4e72:b9ff:fe99:466a])
 by smtp.gmail.com with ESMTPSA id
 u11sm17334881pfh.130.2019.05.13.11.37.38
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Mon, 13 May 2019 11:37:39 -0700 (PDT)
From: John Stultz <john.stultz@linaro.org>
To: lkml <linux-kernel@vger.kernel.org>
Subject: [RFC][PATCH 5/5 v4] kselftests: Add dma-heap test
Date: Mon, 13 May 2019 11:37:27 -0700
Message-Id: <20190513183727.15755-6-john.stultz@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190513183727.15755-1-john.stultz@linaro.org>
References: <20190513183727.15755-1-john.stultz@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=/zim2Zm14+hBiIdxL75uGuTurREwAY5pGO4hNSy8kOU=;
 b=Wy4Sdb7lEAPIbI9riYm3F9C/D9V7wExE00i+HqgMm7jpieylFRvMwAKbXSHuMGh6by
 g7+3gSOm8aK5viBmpfvDCpE2ErcAX5sRCjZ+cb0RloBmNmMVMHNdGjNh1g1dYSs9/ZLc
 QBlpTLlJgBt3iaqgKJ5pp0zF3EleIyieNdPbPmmuH+LUFfinQ4vymvdxDv5H8B/76Dqi
 LO0GxIM+Sjg87c7vHSuUFz7jMLByZ4AtM7SGC7s7Rd0nj6b05PvDaCqKd0NZk2Nzx2OE
 6Tvlw7nfVoM6c/kWbChF9zZ/oDZGO8/dpawuCPxhxxY2aydmXLOkIltBeqPeEca6cQI1
 RRVw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Yudongbin <yudongbin@hisilicon.com>, Xu YiPing <xuyiping@hisilicon.com>,
 Vincent Donnefort <Vincent.Donnefort@arm.com>,
 "Chenfeng \(puck\)" <puck.chen@hisilicon.com>, dri-devel@lists.freedesktop.org,
 Chenbo Feng <fengc@google.com>, Alistair Strachan <astrachan@google.com>,
 Liam Mark <lmark@codeaurora.org>, Christoph Hellwig <hch@infradead.org>,
 "Xiaqing \(A\)" <saberlily.xia@hisilicon.com>, "Andrew F . Davis" <afd@ti.com>,
 Sudipto Paul <Sudipto.Paul@arm.com>, Pratik Patel <pratikp@codeaurora.org>,
 butao <butao@hisilicon.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIHZlcnkgdHJpdmlhbCBhbGxvY2F0aW9uIGFuZCBpbXBvcnQgdGVzdCBmb3IgZG1hLWhlYXBz
LAp1dGlsaXppbmcgdGhlIHZnZW0gZHJpdmVyIGFzIGEgdGVzdCBpbXBvcnRlci4KCkEgZ29vZCBj
aHVuayBvZiB0aGlzIGNvZGUgdGFrZW4gZnJvbToKICB0b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9h
bmRyb2lkL2lvbi9pb25tYXBfdGVzdC5jCiAgT3JpZ2luYWxseSBieSBMYXVyYSBBYmJvdHQgPGxh
YmJvdHRAcmVkaGF0LmNvbT4KCkNjOiBCZW5qYW1pbiBHYWlnbmFyZCA8YmVuamFtaW4uZ2FpZ25h
cmRAbGluYXJvLm9yZz4KQ2M6IFN1bWl0IFNlbXdhbCA8c3VtaXQuc2Vtd2FsQGxpbmFyby5vcmc+
CkNjOiBMaWFtIE1hcmsgPGxtYXJrQGNvZGVhdXJvcmEub3JnPgpDYzogUHJhdGlrIFBhdGVsIDxw
cmF0aWtwQGNvZGVhdXJvcmEub3JnPgpDYzogQnJpYW4gU3RhcmtleSA8QnJpYW4uU3RhcmtleUBh
cm0uY29tPgpDYzogVmluY2VudCBEb25uZWZvcnQgPFZpbmNlbnQuRG9ubmVmb3J0QGFybS5jb20+
CkNjOiBTdWRpcHRvIFBhdWwgPFN1ZGlwdG8uUGF1bEBhcm0uY29tPgpDYzogQW5kcmV3IEYuIERh
dmlzIDxhZmRAdGkuY29tPgpDYzogWHUgWWlQaW5nIDx4dXlpcGluZ0BoaXNpbGljb24uY29tPgpD
YzogIkNoZW5mZW5nIChwdWNrKSIgPHB1Y2suY2hlbkBoaXNpbGljb24uY29tPgpDYzogYnV0YW8g
PGJ1dGFvQGhpc2lsaWNvbi5jb20+CkNjOiAiWGlhcWluZyAoQSkiIDxzYWJlcmxpbHkueGlhQGhp
c2lsaWNvbi5jb20+CkNjOiBZdWRvbmdiaW4gPHl1ZG9uZ2JpbkBoaXNpbGljb24uY29tPgpDYzog
Q2hyaXN0b3BoIEhlbGx3aWcgPGhjaEBpbmZyYWRlYWQub3JnPgpDYzogQ2hlbmJvIEZlbmcgPGZl
bmdjQGdvb2dsZS5jb20+CkNjOiBBbGlzdGFpciBTdHJhY2hhbiA8YXN0cmFjaGFuQGdvb2dsZS5j
b20+CkNjOiBkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnClNpZ25lZC1vZmYtYnk6IEpv
aG4gU3R1bHR6IDxqb2huLnN0dWx0ekBsaW5hcm8ub3JnPgotLS0KdjI6CiogU3dpdGNoZWQgdG8g
dXNlIHJld29ya2VkIGRtYS1oZWFwIGFwaXMKdjM6CiogQWRkIHNpbXBsZSBtbWFwCiogVXRpbGl6
ZSBkbWEtYnVmIHRlc3RkZXYgdG8gdGVzdCBpbXBvcnRpbmcKdjQ6CiogUmV3b3JrIHRvIHVzZSB2
Z2VtCiogUGFzcyBpbiBmZF9mbGFncyB0byBtYXRjaCBpbnRlcmZhY2UgY2hhbmdlcwoqIFNraXAg
LiBhbmQgLi4gZGlycwotLS0KIHRvb2xzL3Rlc3Rpbmcvc2VsZnRlc3RzL2RtYWJ1Zi1oZWFwcy9N
YWtlZmlsZSB8ICAxMSArCiAuLi4vc2VsZnRlc3RzL2RtYWJ1Zi1oZWFwcy9kbWFidWYtaGVhcC5j
ICAgICAgfCAyMzIgKysrKysrKysrKysrKysrKysrCiAyIGZpbGVzIGNoYW5nZWQsIDI0MyBpbnNl
cnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgdG9vbHMvdGVzdGluZy9zZWxmdGVzdHMvZG1h
YnVmLWhlYXBzL01ha2VmaWxlCiBjcmVhdGUgbW9kZSAxMDA2NDQgdG9vbHMvdGVzdGluZy9zZWxm
dGVzdHMvZG1hYnVmLWhlYXBzL2RtYWJ1Zi1oZWFwLmMKCmRpZmYgLS1naXQgYS90b29scy90ZXN0
aW5nL3NlbGZ0ZXN0cy9kbWFidWYtaGVhcHMvTWFrZWZpbGUgYi90b29scy90ZXN0aW5nL3NlbGZ0
ZXN0cy9kbWFidWYtaGVhcHMvTWFrZWZpbGUKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAw
MDAwMDAwMDAwLi5jNDE0YWQzNmI0YmYKLS0tIC9kZXYvbnVsbAorKysgYi90b29scy90ZXN0aW5n
L3NlbGZ0ZXN0cy9kbWFidWYtaGVhcHMvTWFrZWZpbGUKQEAgLTAsMCArMSwxMSBAQAorIyBTUERY
LUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMAorQ0ZMQUdTICs9IC1zdGF0aWMgLU8zIC1XbCwt
bm8tYXMtbmVlZGVkIC1XYWxsCisjTERMSUJTICs9IC1scnQgLWxwdGhyZWFkIC1sbQorCisjIHRo
ZXNlIGFyZSBhbGwgInNhZmUiIHRlc3RzIHRoYXQgZG9uJ3QgbW9kaWZ5CisjIHN5c3RlbSB0aW1l
IG9yIHJlcXVpcmUgZXNjYWxhdGVkIHByaXZpbGVnZXMKK1RFU1RfR0VOX1BST0dTID0gZG1hYnVm
LWhlYXAKKworCitpbmNsdWRlIC4uL2xpYi5taworCmRpZmYgLS1naXQgYS90b29scy90ZXN0aW5n
L3NlbGZ0ZXN0cy9kbWFidWYtaGVhcHMvZG1hYnVmLWhlYXAuYyBiL3Rvb2xzL3Rlc3Rpbmcvc2Vs
ZnRlc3RzL2RtYWJ1Zi1oZWFwcy9kbWFidWYtaGVhcC5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAwMDAwMC4uMzNkNGIxMDVjNjczCi0tLSAvZGV2L251bGwKKysrIGIvdG9vbHMv
dGVzdGluZy9zZWxmdGVzdHMvZG1hYnVmLWhlYXBzL2RtYWJ1Zi1oZWFwLmMKQEAgLTAsMCArMSwy
MzIgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCisKKyNpbmNsdWRlIDxk
aXJlbnQuaD4KKyNpbmNsdWRlIDxlcnJuby5oPgorI2luY2x1ZGUgPGZjbnRsLmg+CisjaW5jbHVk
ZSA8c3RkaW8uaD4KKyNpbmNsdWRlIDxzdGRsaWIuaD4KKyNpbmNsdWRlIDxzdGRpbnQuaD4KKyNp
bmNsdWRlIDxzdHJpbmcuaD4KKyNpbmNsdWRlIDx1bmlzdGQuaD4KKyNpbmNsdWRlIDxzeXMvaW9j
dGwuaD4KKyNpbmNsdWRlIDxzeXMvbW1hbi5oPgorI2luY2x1ZGUgPHN5cy90eXBlcy5oPgorCisj
aW5jbHVkZSA8bGludXgvZG1hLWJ1Zi5oPgorI2luY2x1ZGUgPGRybS9kcm0uaD4KKworCisjaW5j
bHVkZSAiLi4vLi4vLi4vLi4vaW5jbHVkZS91YXBpL2xpbnV4L2RtYS1oZWFwLmgiCisKKyNkZWZp
bmUgREVWUEFUSCAiL2Rldi9kbWFfaGVhcCIKKworaW50IGNoZWNrX3ZnZW0oaW50IGZkKQorewor
CWRybV92ZXJzaW9uX3QgdmVyc2lvbiA9IHsgMCB9OworCWNoYXIgbmFtZVs1XTsKKwlpbnQgcmV0
OworCisJdmVyc2lvbi5uYW1lX2xlbiA9IDQ7CisJdmVyc2lvbi5uYW1lID0gbmFtZTsKKworCXJl
dCA9IGlvY3RsKGZkLCBEUk1fSU9DVExfVkVSU0lPTiwgJnZlcnNpb24pOworCWlmIChyZXQpCisJ
CXJldHVybiAxOworCisJcmV0dXJuIHN0cmNtcChuYW1lLCAidmdlbSIpOworfQorCitpbnQgb3Bl
bl92Z2VtKHZvaWQpCit7CisJaW50IGksIGZkOworCWNvbnN0IGNoYXIgKmRybXN0ciA9ICIvZGV2
L2RyaS9jYXJkIjsKKworCWZkID0gLTE7CisJZm9yIChpID0gMDsgaSA8IDE2OyBpKyspIHsKKwkJ
Y2hhciBuYW1lWzgwXTsKKworCQlzcHJpbnRmKG5hbWUsICIlcyV1IiwgZHJtc3RyLCBpKTsKKwor
CQlmZCA9IG9wZW4obmFtZSwgT19SRFdSKTsKKwkJaWYgKGZkIDwgMCkKKwkJCWNvbnRpbnVlOwor
CisJCWlmIChjaGVja192Z2VtKGZkKSkgeworCQkJY2xvc2UoZmQpOworCQkJY29udGludWU7CisJ
CX0gZWxzZSB7CisJCQlicmVhazsKKwkJfQorCisJfQorCXJldHVybiBmZDsKK30KKworaW50IGlt
cG9ydF92Z2VtX2ZkKGludCB2Z2VtX2ZkLCBpbnQgZG1hX2J1Zl9mZCwgdWludDMyX3QgKmhhbmRs
ZSkKK3sKKwlzdHJ1Y3QgZHJtX3ByaW1lX2hhbmRsZSBpbXBvcnRfaGFuZGxlID0geyAwIH07CisJ
aW50IHJldDsKKworCWltcG9ydF9oYW5kbGUuZmQgPSBkbWFfYnVmX2ZkOworCWltcG9ydF9oYW5k
bGUuZmxhZ3MgPSAwOworCWltcG9ydF9oYW5kbGUuaGFuZGxlID0gMDsKKworCXJldCA9IGlvY3Rs
KHZnZW1fZmQsIERSTV9JT0NUTF9QUklNRV9GRF9UT19IQU5ETEUsICZpbXBvcnRfaGFuZGxlKTsK
KwlpZiAocmV0ID09IDApCisJCSpoYW5kbGUgPSBpbXBvcnRfaGFuZGxlLmhhbmRsZTsKKwlyZXR1
cm4gcmV0OworfQorCit2b2lkIGNsb3NlX2hhbmRsZShpbnQgdmdlbV9mZCwgdWludDMyX3QgaGFu
ZGxlKQoreworCXN0cnVjdCBkcm1fZ2VtX2Nsb3NlIGNsb3NlID0geyAwIH07CisKKwljbG9zZS5o
YW5kbGUgPSBoYW5kbGU7CisJaW9jdGwodmdlbV9mZCwgRFJNX0lPQ1RMX0dFTV9DTE9TRSwgJmNs
b3NlKTsKK30KKworCitpbnQgZG1hYnVmX2hlYXBfb3BlbihjaGFyICpuYW1lKQoreworCWludCBy
ZXQsIGZkOworCWNoYXIgYnVmWzI1Nl07CisKKwlyZXQgPSBzcHJpbnRmKGJ1ZiwgIiVzLyVzIiwg
REVWUEFUSCwgbmFtZSk7CisJaWYgKHJldCA8IDApIHsKKwkJcHJpbnRmKCJzcHJpbnRmIGZhaWxl
ZCFcbiIpOworCQlyZXR1cm4gcmV0OworCX0KKworCWZkID0gb3BlbihidWYsIE9fUkRXUik7CisJ
aWYgKGZkIDwgMCkKKwkJcHJpbnRmKCJvcGVuICVzIGZhaWxlZCFcbiIsIGJ1Zik7CisJcmV0dXJu
IGZkOworfQorCitpbnQgZG1hYnVmX2hlYXBfYWxsb2MoaW50IGZkLCBzaXplX3QgbGVuLCB1bnNp
Z25lZCBpbnQgZmxhZ3MsIGludCAqZG1hYnVmX2ZkKQoreworCXN0cnVjdCBkbWFfaGVhcF9hbGxv
Y2F0aW9uX2RhdGEgZGF0YSA9IHsKKwkJLmxlbiA9IGxlbiwKKwkJLmZkX2ZsYWdzID0gT19SRFdS
IHwgT19DTE9FWEVDLAorCQkuaGVhcF9mbGFncyA9IGZsYWdzLAorCX07CisJaW50IHJldDsKKwor
CWlmIChkbWFidWZfZmQgPT0gTlVMTCkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlyZXQgPSBpb2N0
bChmZCwgRE1BX0hFQVBfSU9DX0FMTE9DLCAmZGF0YSk7CisJaWYgKHJldCA8IDApCisJCXJldHVy
biByZXQ7CisJKmRtYWJ1Zl9mZCA9IChpbnQpZGF0YS5mZDsKKwlyZXR1cm4gcmV0OworfQorCit2
b2lkIGRtYWJ1Zl9zeW5jKGludCBmZCwgaW50IHN0YXJ0X3N0b3ApCit7CisJc3RydWN0IGRtYV9i
dWZfc3luYyBzeW5jID0geyAwIH07CisJaW50IHJldDsKKworCXN5bmMuZmxhZ3MgPSBzdGFydF9z
dG9wIHwgRE1BX0JVRl9TWU5DX1JXOworCXJldCA9IGlvY3RsKGZkLCBETUFfQlVGX0lPQ1RMX1NZ
TkMsICZzeW5jKTsKKwlpZiAocmV0KQorCQlwcmludGYoInN5bmMgZmFpbGVkICVkXG4iLCBlcnJu
byk7CisKK30KKworI2RlZmluZSBPTkVfTUVHICgxMDI0KjEwMjQpCisKK3ZvaWQgZG9fdGVzdChj
aGFyICpoZWFwX25hbWUpCit7CisJaW50IGhlYXBfZmQgPSAtMSwgZG1hYnVmX2ZkID0gLTEsIGlt
cG9ydGVyX2ZkID0gLTE7CisJdWludDMyX3QgaGFuZGxlID0gMDsKKwl2b2lkICpwID0gTlVMTDsK
KwlpbnQgcmV0OworCisJcHJpbnRmKCJUZXN0aW5nIGhlYXA6ICVzXG4iLCBoZWFwX25hbWUpOwor
CisJaGVhcF9mZCA9IGRtYWJ1Zl9oZWFwX29wZW4oaGVhcF9uYW1lKTsKKwlpZiAoaGVhcF9mZCA8
IDApCisJCXJldHVybjsKKworCXByaW50ZigiQWxsb2NhdGluZyAxIE1FR1xuIik7CisJcmV0ID0g
ZG1hYnVmX2hlYXBfYWxsb2MoaGVhcF9mZCwgT05FX01FRywgMCwgJmRtYWJ1Zl9mZCk7CisJaWYg
KHJldCkKKwkJZ290byBvdXQ7CisKKwkvKiBtbWFwIGFuZCB3cml0ZSBhIHNpbXBsZSBwYXR0ZXJu
ICovCisJcCA9IG1tYXAoTlVMTCwKKwkJIE9ORV9NRUcsCisJCSBQUk9UX1JFQUQgfCBQUk9UX1dS
SVRFLAorCQkgTUFQX1NIQVJFRCwKKwkJIGRtYWJ1Zl9mZCwKKwkJIDApOworCWlmIChwID09IE1B
UF9GQUlMRUQpIHsKKwkJcHJpbnRmKCJtbWFwKCkgZmFpbGVkOiAlbVxuIik7CisJCWdvdG8gb3V0
OworCX0KKwlwcmludGYoIm1tYXAgcGFzc2VkXG4iKTsKKworCisJZG1hYnVmX3N5bmMoZG1hYnVm
X2ZkLCBETUFfQlVGX1NZTkNfU1RBUlQpOworCisJbWVtc2V0KHAsIDEsIE9ORV9NRUcvMik7CisJ
bWVtc2V0KChjaGFyICopcCtPTkVfTUVHLzIsIDAsIE9ORV9NRUcvMik7CisJZG1hYnVmX3N5bmMo
ZG1hYnVmX2ZkLCBETUFfQlVGX1NZTkNfRU5EKTsKKworCWltcG9ydGVyX2ZkID0gb3Blbl92Z2Vt
KCk7CisJaWYgKGltcG9ydGVyX2ZkIDwgMCkgeworCQlyZXQgPSBpbXBvcnRlcl9mZDsKKwkJcHJp
bnRmKCJGYWlsZWQgdG8gb3BlbiB2Z2VtXG4iKTsKKwkJZ290byBvdXQ7CisJfQorCisJcmV0ID0g
aW1wb3J0X3ZnZW1fZmQoaW1wb3J0ZXJfZmQsIGRtYWJ1Zl9mZCwgJmhhbmRsZSk7CisJaWYgKHJl
dCA8IDApIHsKKwkJcHJpbnRmKCJGYWlsZWQgdG8gaW1wb3J0IGJ1ZmZlclxuIik7CisJCWdvdG8g
b3V0OworCX0KKwlwcmludGYoImltcG9ydCBwYXNzZWRcbiIpOworCisJZG1hYnVmX3N5bmMoZG1h
YnVmX2ZkLCBETUFfQlVGX1NZTkNfU1RBUlQpOworCW1lbXNldChwLCAweGZmLCBPTkVfTUVHKTsK
KwlkbWFidWZfc3luYyhkbWFidWZfZmQsIERNQV9CVUZfU1lOQ19FTkQpOworCXByaW50Zigic3lu
Y3MgcGFzc2VkXG4iKTsKKworCWNsb3NlX2hhbmRsZShpbXBvcnRlcl9mZCwgaGFuZGxlKTsKKwly
ZXQgPSAwOworCitvdXQ6CisJaWYgKHApCisJCW11bm1hcChwLCBPTkVfTUVHKTsKKwlpZiAoaW1w
b3J0ZXJfZmQgPj0gMCkKKwkJY2xvc2UoaW1wb3J0ZXJfZmQpOworCWlmIChkbWFidWZfZmQgPj0g
MCkKKwkJY2xvc2UoZG1hYnVmX2ZkKTsKKwlpZiAoaGVhcF9mZCA+PSAwKQorCQljbG9zZShoZWFw
X2ZkKTsKK30KKworCitpbnQgbWFpbih2b2lkKQoreworCURJUiAqZDsKKwlzdHJ1Y3QgZGlyZW50
ICpkaXI7CisKKwlkID0gb3BlbmRpcihERVZQQVRIKTsKKwlpZiAoIWQpIHsKKwkJcHJpbnRmKCJO
byAlcyBkaXJlY3Rvcnk/XG4iLCBERVZQQVRIKTsKKwkJcmV0dXJuIC0xOworCX0KKworCXdoaWxl
ICgoZGlyID0gcmVhZGRpcihkKSkgIT0gTlVMTCkgeworCQlpZiAoIXN0cm5jbXAoZGlyLT5kX25h
bWUsICIuIiwgMikpCisJCQljb250aW51ZTsKKwkJaWYgKCFzdHJuY21wKGRpci0+ZF9uYW1lLCAi
Li4iLCAzKSkKKwkJCWNvbnRpbnVlOworCisJCWRvX3Rlc3QoZGlyLT5kX25hbWUpOworCX0KKwor
CXJldHVybiAwOworfQotLSAKMi4xNy4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
