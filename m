Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CBD02FF8F5
	for <lists+dri-devel@lfdr.de>; Sun, 17 Nov 2019 12:44:27 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 983BD6E293;
	Sun, 17 Nov 2019 11:44:18 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk [46.235.227.227])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 37D536E1F1
 for <dri-devel@lists.freedesktop.org>; Sun, 17 Nov 2019 02:41:44 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1]) (Authenticated sender: sre)
 with ESMTPSA id DF07F28F73B
Received: by earth.universe (Postfix, from userid 1000)
 id 960CE3C0C7B; Sun, 17 Nov 2019 03:41:39 +0100 (CET)
From: Sebastian Reichel <sebastian.reichel@collabora.com>
To: Sebastian Reichel <sre@kernel.org>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>
Subject: [RFCv1 03/42] drm/omap: constify write buffers
Date: Sun, 17 Nov 2019 03:39:49 +0100
Message-Id: <20191117024028.2233-4-sebastian.reichel@collabora.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191117024028.2233-1-sebastian.reichel@collabora.com>
References: <20191117024028.2233-1-sebastian.reichel@collabora.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Sun, 17 Nov 2019 11:44:17 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: kernel@collabora.com, Tony Lindgren <tony@atomide.com>,
 "H. Nikolaus Schaller" <hns@goldelico.com>, Merlijn Wajer <merlijn@wizzup.org>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 dri-devel@lists.freedesktop.org, linux-omap@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIHdyaXRlIGJ1ZmZlcnMgYXJlIG5vdCBtb2RpZmllZCwgc28gdGhleSBjYW4gYmUgY29uc3Rh
bnQuCgpTaWduZWQtb2ZmLWJ5OiBTZWJhc3RpYW4gUmVpY2hlbCA8c2ViYXN0aWFuLnJlaWNoZWxA
Y29sbGFib3JhLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvZHNpLmMgICAg
IHwgMjQgKysrKysrKysrKysrLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9k
c3Mvb21hcGRzcy5oIHwgMTAgKysrKystLS0tLQogMiBmaWxlcyBjaGFuZ2VkLCAxNyBpbnNlcnRp
b25zKCspLCAxNyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vb21h
cGRybS9kc3MvZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvZHNpLmMKaW5kZXgg
ZmE4MWZiZjM0NDJlLi5iZjYxMzFlNWZhMTQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9v
bWFwZHJtL2Rzcy9kc2kuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvZHNpLmMK
QEAgLTI2MDEsMTEgKzI2MDEsMTEgQEAgc3RhdGljIGlubGluZSB2b2lkIGRzaV92Y193cml0ZV9s
b25nX3BheWxvYWQoc3RydWN0IGRzaV9kYXRhICpkc2ksIGludCBjaGFubmVsLAogfQogCiBzdGF0
aWMgaW50IGRzaV92Y19zZW5kX2xvbmcoc3RydWN0IGRzaV9kYXRhICpkc2ksIGludCBjaGFubmVs
LCB1OCBkYXRhX3R5cGUsCi0JCQkgICAgdTggKmRhdGEsIHUxNiBsZW4sIHU4IGVjYykKKwkJCSAg
ICBjb25zdCB1OCAqZGF0YSwgdTE2IGxlbiwgdTggZWNjKQogewogCS8qdTMyIHZhbDsgKi8KIAlp
bnQgaTsKLQl1OCAqcDsKKwljb25zdCB1OCAqcDsKIAlpbnQgciA9IDA7CiAJdTggYjEsIGIyLCBi
MywgYjQ7CiAKQEAgLTI2OTgsNyArMjY5OCw3IEBAIHN0YXRpYyBpbnQgZHNpX3ZjX3NlbmRfbnVs
bChzdHJ1Y3QgZHNpX2RhdGEgKmRzaSwgaW50IGNoYW5uZWwpCiB9CiAKIHN0YXRpYyBpbnQgZHNp
X3ZjX3dyaXRlX25vc3luY19jb21tb24oc3RydWN0IGRzaV9kYXRhICpkc2ksIGludCBjaGFubmVs
LAotCQkJCSAgICAgIHU4ICpkYXRhLCBpbnQgbGVuLAorCQkJCSAgICAgIGNvbnN0IHU4ICpkYXRh
LCBpbnQgbGVuLAogCQkJCSAgICAgIGVudW0gZHNzX2RzaV9jb250ZW50X3R5cGUgdHlwZSkKIHsK
IAlpbnQgcjsKQEAgLTI3MjksNyArMjcyOSw3IEBAIHN0YXRpYyBpbnQgZHNpX3ZjX3dyaXRlX25v
c3luY19jb21tb24oc3RydWN0IGRzaV9kYXRhICpkc2ksIGludCBjaGFubmVsLAogfQogCiBzdGF0
aWMgaW50IGRzaV92Y19kY3Nfd3JpdGVfbm9zeW5jKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRz
c2RldiwgaW50IGNoYW5uZWwsCi0JCXU4ICpkYXRhLCBpbnQgbGVuKQorCQljb25zdCB1OCAqZGF0
YSwgaW50IGxlbikKIHsKIAlzdHJ1Y3QgZHNpX2RhdGEgKmRzaSA9IHRvX2RzaV9kYXRhKGRzc2Rl
dik7CiAKQEAgLTI3MzgsNyArMjczOCw3IEBAIHN0YXRpYyBpbnQgZHNpX3ZjX2Rjc193cml0ZV9u
b3N5bmMoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCwKIH0KIAog
c3RhdGljIGludCBkc2lfdmNfZ2VuZXJpY193cml0ZV9ub3N5bmMoc3RydWN0IG9tYXBfZHNzX2Rl
dmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCwKLQkJdTggKmRhdGEsIGludCBsZW4pCisJCWNvbnN0
IHU4ICpkYXRhLCBpbnQgbGVuKQogewogCXN0cnVjdCBkc2lfZGF0YSAqZHNpID0gdG9fZHNpX2Rh
dGEoZHNzZGV2KTsKIApAQCAtMjc0Nyw3ICsyNzQ3LDcgQEAgc3RhdGljIGludCBkc2lfdmNfZ2Vu
ZXJpY193cml0ZV9ub3N5bmMoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hh
bm4KIH0KIAogc3RhdGljIGludCBkc2lfdmNfd3JpdGVfY29tbW9uKHN0cnVjdCBvbWFwX2Rzc19k
ZXZpY2UgKmRzc2RldiwKLQkJCSAgICAgICBpbnQgY2hhbm5lbCwgdTggKmRhdGEsIGludCBsZW4s
CisJCQkgICAgICAgaW50IGNoYW5uZWwsIGNvbnN0IHU4ICpkYXRhLCBpbnQgbGVuLAogCQkJICAg
ICAgIGVudW0gZHNzX2RzaV9jb250ZW50X3R5cGUgdHlwZSkKIHsKIAlzdHJ1Y3QgZHNpX2RhdGEg
KmRzaSA9IHRvX2RzaV9kYXRhKGRzc2Rldik7CkBAIC0yNzc2LDE1ICsyNzc2LDE1IEBAIHN0YXRp
YyBpbnQgZHNpX3ZjX3dyaXRlX2NvbW1vbihzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYs
CiAJcmV0dXJuIHI7CiB9CiAKLXN0YXRpYyBpbnQgZHNpX3ZjX2Rjc193cml0ZShzdHJ1Y3Qgb21h
cF9kc3NfZGV2aWNlICpkc3NkZXYsIGludCBjaGFubmVsLCB1OCAqZGF0YSwKLQkJaW50IGxlbikK
K3N0YXRpYyBpbnQgZHNpX3ZjX2Rjc193cml0ZShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3Nk
ZXYsIGludCBjaGFubmVsLAorCQljb25zdCB1OCAqZGF0YSwgaW50IGxlbikKIHsKIAlyZXR1cm4g
ZHNpX3ZjX3dyaXRlX2NvbW1vbihkc3NkZXYsIGNoYW5uZWwsIGRhdGEsIGxlbiwKIAkJCURTU19E
U0lfQ09OVEVOVF9EQ1MpOwogfQogCi1zdGF0aWMgaW50IGRzaV92Y19nZW5lcmljX3dyaXRlKHN0
cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwgaW50IGNoYW5uZWwsIHU4ICpkYXRhLAotCQlp
bnQgbGVuKQorc3RhdGljIGludCBkc2lfdmNfZ2VuZXJpY193cml0ZShzdHJ1Y3Qgb21hcF9kc3Nf
ZGV2aWNlICpkc3NkZXYsIGludCBjaGFubmVsLAorCQljb25zdCB1OCAqZGF0YSwgaW50IGxlbikK
IHsKIAlyZXR1cm4gZHNpX3ZjX3dyaXRlX2NvbW1vbihkc3NkZXYsIGNoYW5uZWwsIGRhdGEsIGxl
biwKIAkJCURTU19EU0lfQ09OVEVOVF9HRU5FUklDKTsKQEAgLTI4MTAsNyArMjgxMCw3IEBAIHN0
YXRpYyBpbnQgZHNpX3ZjX2Rjc19zZW5kX3JlYWRfcmVxdWVzdChzdHJ1Y3QgZHNpX2RhdGEgKmRz
aSwgaW50IGNoYW5uZWwsCiB9CiAKIHN0YXRpYyBpbnQgZHNpX3ZjX2dlbmVyaWNfc2VuZF9yZWFk
X3JlcXVlc3Qoc3RydWN0IGRzaV9kYXRhICpkc2ksIGludCBjaGFubmVsLAotCQkJCQkgICAgdTgg
KnJlcWRhdGEsIGludCByZXFsZW4pCisJCQkJCSAgICBjb25zdCB1OCAqcmVxZGF0YSwgaW50IHJl
cWxlbikKIHsKIAl1MTYgZGF0YTsKIAl1OCBkYXRhX3R5cGU7CkBAIC0yOTgzLDcgKzI5ODMsNyBA
QCBzdGF0aWMgaW50IGRzaV92Y19kY3NfcmVhZChzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3Nk
ZXYsIGludCBjaGFubmVsLCB1OCBkY3NfYwogfQogCiBzdGF0aWMgaW50IGRzaV92Y19nZW5lcmlj
X3JlYWQoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCwKLQkJdTgg
KnJlcWRhdGEsIGludCByZXFsZW4sIHU4ICpidWYsIGludCBidWZsZW4pCisJCWNvbnN0IHU4ICpy
ZXFkYXRhLCBpbnQgcmVxbGVuLCB1OCAqYnVmLCBpbnQgYnVmbGVuKQogewogCXN0cnVjdCBkc2lf
ZGF0YSAqZHNpID0gdG9fZHNpX2RhdGEoZHNzZGV2KTsKIAlpbnQgcjsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLmggYi9kcml2ZXJzL2dwdS9kcm0vb21h
cGRybS9kc3Mvb21hcGRzcy5oCmluZGV4IDZkZDA4ZDA5NmVlZC4uYWUxYTQ2MDBkYWIyIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvb21hcGRzcy5oCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9vbWFwZHNzLmgKQEAgLTMxNSwxOCArMzE1LDE4IEBAIHN0
cnVjdCBvbWFwZHNzX2RzaV9vcHMgewogCiAJLyogZGF0YSB0cmFuc2ZlciAqLwogCWludCAoKmRj
c193cml0ZSkoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCwKLQkJ
CXU4ICpkYXRhLCBpbnQgbGVuKTsKKwkJCWNvbnN0IHU4ICpkYXRhLCBpbnQgbGVuKTsKIAlpbnQg
KCpkY3Nfd3JpdGVfbm9zeW5jKShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsIGludCBj
aGFubmVsLAotCQkJdTggKmRhdGEsIGludCBsZW4pOworCQkJY29uc3QgdTggKmRhdGEsIGludCBs
ZW4pOwogCWludCAoKmRjc19yZWFkKShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsIGlu
dCBjaGFubmVsLCB1OCBkY3NfY21kLAogCQkJdTggKmRhdGEsIGludCBsZW4pOwogCiAJaW50ICgq
Z2VuX3dyaXRlKShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsIGludCBjaGFubmVsLAot
CQkJdTggKmRhdGEsIGludCBsZW4pOworCQkJY29uc3QgdTggKmRhdGEsIGludCBsZW4pOwogCWlu
dCAoKmdlbl93cml0ZV9ub3N5bmMpKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwgaW50
IGNoYW5uZWwsCi0JCQl1OCAqZGF0YSwgaW50IGxlbik7CisJCQljb25zdCB1OCAqZGF0YSwgaW50
IGxlbik7CiAJaW50ICgqZ2VuX3JlYWQpKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2Rldiwg
aW50IGNoYW5uZWwsCi0JCQl1OCAqcmVxZGF0YSwgaW50IHJlcWxlbiwKKwkJCWNvbnN0IHU4ICpy
ZXFkYXRhLCBpbnQgcmVxbGVuLAogCQkJdTggKmRhdGEsIGludCBsZW4pOwogCiAJaW50ICgqYnRh
X3N5bmMpKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwgaW50IGNoYW5uZWwpOwotLSAK
Mi4yNC4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpk
cmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
