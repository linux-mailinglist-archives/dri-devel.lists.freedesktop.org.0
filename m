Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id F3FF1849C9
	for <lists+dri-devel@lfdr.de>; Wed,  7 Aug 2019 12:39:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 008466E6B0;
	Wed,  7 Aug 2019 10:38:57 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7C8036E6AC
 for <dri-devel@lists.freedesktop.org>; Wed,  7 Aug 2019 10:38:53 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx04.intmail.prod.int.phx2.redhat.com
 [10.5.11.14])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 0BA0830A9231;
 Wed,  7 Aug 2019 10:38:53 +0000 (UTC)
Received: from sirius.home.kraxel.org (ovpn-116-144.ams2.redhat.com
 [10.36.116.144])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 8D2275DA60;
 Wed,  7 Aug 2019 10:38:50 +0000 (UTC)
Received: by sirius.home.kraxel.org (Postfix, from userid 1000)
 id A8A2A9D11; Wed,  7 Aug 2019 12:38:49 +0200 (CEST)
From: Gerd Hoffmann <kraxel@redhat.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 2/3] drm/vram: switch vram helpers to use the new ttm
 helpers.
Date: Wed,  7 Aug 2019 12:38:48 +0200
Message-Id: <20190807103849.7289-3-kraxel@redhat.com>
In-Reply-To: <20190807103849.7289-1-kraxel@redhat.com>
References: <20190807103849.7289-1-kraxel@redhat.com>
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.14
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.44]); Wed, 07 Aug 2019 10:38:53 +0000 (UTC)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Chen Feng <puck.chen@hisilicon.com>, open list <linux-kernel@vger.kernel.org>,
 Xinliang Liu <z.liuxinliang@hisilicon.com>, David Airlie <airlied@linux.ie>,
 Xinwei Kong <kong.kongxinwei@hisilicon.com>, Gerd Hoffmann <kraxel@redhat.com>,
 tzimmermann@suse.de, Rongrong Zou <zourongrong@gmail.com>,
 Sean Paul <sean@poorly.run>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U2lnbmVkLW9mZi1ieTogR2VyZCBIb2ZmbWFubiA8a3JheGVsQHJlZGhhdC5jb20+Ci0tLQogaW5j
bHVkZS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5oICAgICAgICAgICAgIHwgIDcgKy0tCiBkcml2
ZXJzL2dwdS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5jICAgICAgICAgfCA0OCAtLS0tLS0tLS0t
LS0tLS0tLS0tCiAuLi4vZ3B1L2RybS9oaXNpbGljb24vaGlibWMvaGlibWNfZHJtX2Rydi5jICAg
fCAgMiArLQogZHJpdmVycy9ncHUvZHJtL0tjb25maWcgICAgICAgICAgICAgICAgICAgICAgIHwg
IDEgKwogNCBmaWxlcyBjaGFuZ2VkLCA0IGluc2VydGlvbnMoKyksIDU0IGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuaCBiL2luY2x1ZGUv
ZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuaAppbmRleCBhYzIxN2Q3Njg0NTYuLmZlNGExZDVhMzVk
ZSAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5oCisrKyBiL2lu
Y2x1ZGUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuaApAQCAtNCw2ICs0LDcgQEAKICNkZWZpbmUg
RFJNX0dFTV9WUkFNX0hFTFBFUl9ICiAKICNpbmNsdWRlIDxkcm0vZHJtX2dlbS5oPgorI2luY2x1
ZGUgPGRybS9kcm1fZ2VtX3R0bV9oZWxwZXIuaD4KICNpbmNsdWRlIDxkcm0vdHRtL3R0bV9ib19h
cGkuaD4KICNpbmNsdWRlIDxkcm0vdHRtL3R0bV9wbGFjZW1lbnQuaD4KICNpbmNsdWRlIDxsaW51
eC9rZXJuZWwuaD4gLyogZm9yIGNvbnRhaW5lcl9vZigpICovCkBAIC03Niw3ICs3Nyw2IEBAIHN0
cnVjdCBkcm1fZ2VtX3ZyYW1fb2JqZWN0ICpkcm1fZ2VtX3ZyYW1fY3JlYXRlKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsCiAJCQkJCQl1bnNpZ25lZCBsb25nIHBnX2FsaWduLAogCQkJCQkJYm9vbCBp
bnRlcnJ1cHRpYmxlKTsKIHZvaWQgZHJtX2dlbV92cmFtX3B1dChzdHJ1Y3QgZHJtX2dlbV92cmFt
X29iamVjdCAqZ2JvKTsKLXU2NCBkcm1fZ2VtX3ZyYW1fbW1hcF9vZmZzZXQoc3RydWN0IGRybV9n
ZW1fdnJhbV9vYmplY3QgKmdibyk7CiBzNjQgZHJtX2dlbV92cmFtX29mZnNldChzdHJ1Y3QgZHJt
X2dlbV92cmFtX29iamVjdCAqZ2JvKTsKIGludCBkcm1fZ2VtX3ZyYW1fcGluKHN0cnVjdCBkcm1f
Z2VtX3ZyYW1fb2JqZWN0ICpnYm8sIHVuc2lnbmVkIGxvbmcgcGxfZmxhZyk7CiBpbnQgZHJtX2dl
bV92cmFtX3VucGluKHN0cnVjdCBkcm1fZ2VtX3ZyYW1fb2JqZWN0ICpnYm8pOwpAQCAtMTEwLDkg
KzExMCw2IEBAIGV4dGVybiBjb25zdCBzdHJ1Y3QgZHJtX3ZyYW1fbW1fZnVuY3MgZHJtX2dlbV92
cmFtX21tX2Z1bmNzOwogaW50IGRybV9nZW1fdnJhbV9kcml2ZXJfZHVtYl9jcmVhdGUoc3RydWN0
IGRybV9maWxlICpmaWxlLAogCQkJCSAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCSAg
ICBzdHJ1Y3QgZHJtX21vZGVfY3JlYXRlX2R1bWIgKmFyZ3MpOwotaW50IGRybV9nZW1fdnJhbV9k
cml2ZXJfZHVtYl9tbWFwX29mZnNldChzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUsCi0JCQkJCSBzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2LAotCQkJCQkgdWludDMyX3QgaGFuZGxlLCB1aW50NjRfdCAqb2Zm
c2V0KTsKIAogLyoqCiAgKiBkZWZpbmUgRFJNX0dFTV9WUkFNX0RSSVZFUiAtIGRlZmF1bHQgY2Fs
bGJhY2sgZnVuY3Rpb25zIGZvciBcCkBAIC0xMjMsNyArMTIwLDcgQEAgaW50IGRybV9nZW1fdnJh
bV9kcml2ZXJfZHVtYl9tbWFwX29mZnNldChzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUsCiAgKi8KICNk
ZWZpbmUgRFJNX0dFTV9WUkFNX0RSSVZFUiBcCiAJLmR1bWJfY3JlYXRlCQkgID0gZHJtX2dlbV92
cmFtX2RyaXZlcl9kdW1iX2NyZWF0ZSwgXAotCS5kdW1iX21hcF9vZmZzZXQJICA9IGRybV9nZW1f
dnJhbV9kcml2ZXJfZHVtYl9tbWFwX29mZnNldCwgXAorCS5kdW1iX21hcF9vZmZzZXQJICA9IGRy
bV9nZW1fdHRtX2RyaXZlcl9kdW1iX21tYXBfb2Zmc2V0LCBcCiAJLmdlbV9wcmltZV9tbWFwCQkg
ID0gZHJtX2dlbV9wcmltZV9tbWFwCiAKICNlbmRpZgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3ZyYW1f
aGVscGVyLmMKaW5kZXggZmQ3NTEwNzhiYWUxLi5iNzg4NjUwNTU5OTAgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2RybV9nZW1fdnJhbV9oZWxwZXIuYwpAQCAtMTU2LDIyICsxNTYsNiBAQCB2b2lkIGRybV9nZW1f
dnJhbV9wdXQoc3RydWN0IGRybV9nZW1fdnJhbV9vYmplY3QgKmdibykKIH0KIEVYUE9SVF9TWU1C
T0woZHJtX2dlbV92cmFtX3B1dCk7CiAKLS8qKgotICogZHJtX2dlbV92cmFtX21tYXBfb2Zmc2V0
KCkgLSBSZXR1cm5zIGEgR0VNIFZSQU0gb2JqZWN0J3MgbW1hcCBvZmZzZXQKLSAqIEBnYm86CXRo
ZSBHRU0gVlJBTSBvYmplY3QKLSAqCi0gKiBTZWUgZHJtX3ZtYV9ub2RlX29mZnNldF9hZGRyKCkg
Zm9yIG1vcmUgaW5mb3JtYXRpb24uCi0gKgotICogUmV0dXJuczoKLSAqIFRoZSBidWZmZXIgb2Jq
ZWN0J3Mgb2Zmc2V0IGZvciB1c2Vyc3BhY2UgbWFwcGluZ3Mgb24gc3VjY2Vzcywgb3IKLSAqIDAg
aWYgbm8gb2Zmc2V0IGlzIGFsbG9jYXRlZC4KLSAqLwotdTY0IGRybV9nZW1fdnJhbV9tbWFwX29m
ZnNldChzdHJ1Y3QgZHJtX2dlbV92cmFtX29iamVjdCAqZ2JvKQotewotCXJldHVybiBkcm1fdm1h
X25vZGVfb2Zmc2V0X2FkZHIoJmdiby0+Ym8uYmFzZS52bWFfbm9kZSk7Ci19Ci1FWFBPUlRfU1lN
Qk9MKGRybV9nZW1fdnJhbV9tbWFwX29mZnNldCk7Ci0KIC8qKgogICogZHJtX2dlbV92cmFtX29m
ZnNldCgpIC0gXAogCVJldHVybnMgYSBHRU0gVlJBTSBvYmplY3QncyBvZmZzZXQgaW4gdmlkZW8g
bWVtb3J5CkBAIC01MTEsMzggKzQ5NSw2IEBAIGludCBkcm1fZ2VtX3ZyYW1fZHJpdmVyX2R1bWJf
Y3JlYXRlKHN0cnVjdCBkcm1fZmlsZSAqZmlsZSwKIH0KIEVYUE9SVF9TWU1CT0woZHJtX2dlbV92
cmFtX2RyaXZlcl9kdW1iX2NyZWF0ZSk7CiAKLS8qKgotICogZHJtX2dlbV92cmFtX2RyaXZlcl9k
dW1iX21tYXBfb2Zmc2V0KCkgLSBcCi0JSW1wbGVtZW50cyAmc3RydWN0IGRybV9kcml2ZXIuZHVt
Yl9tbWFwX29mZnNldAotICogQGZpbGU6CURSTSBmaWxlIHBvaW50ZXIuCi0gKiBAZGV2OglEUk0g
ZGV2aWNlLgotICogQGhhbmRsZToJR0VNIGhhbmRsZQotICogQG9mZnNldDoJUmV0dXJucyB0aGUg
bWFwcGluZydzIG1lbW9yeSBvZmZzZXQgb24gc3VjY2VzcwotICoKLSAqIFJldHVybnM6Ci0gKiAw
IG9uIHN1Y2Nlc3MsIG9yCi0gKiBhIG5lZ2F0aXZlIGVycm5vIGNvZGUgb3RoZXJ3aXNlLgotICov
Ci1pbnQgZHJtX2dlbV92cmFtX2RyaXZlcl9kdW1iX21tYXBfb2Zmc2V0KHN0cnVjdCBkcm1fZmls
ZSAqZmlsZSwKLQkJCQkJIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCi0JCQkJCSB1aW50MzJfdCBo
YW5kbGUsIHVpbnQ2NF90ICpvZmZzZXQpCi17Ci0Jc3RydWN0IGRybV9nZW1fb2JqZWN0ICpnZW07
Ci0Jc3RydWN0IGRybV9nZW1fdnJhbV9vYmplY3QgKmdibzsKLQotCWdlbSA9IGRybV9nZW1fb2Jq
ZWN0X2xvb2t1cChmaWxlLCBoYW5kbGUpOwotCWlmICghZ2VtKQotCQlyZXR1cm4gLUVOT0VOVDsK
LQotCWdibyA9IGRybV9nZW1fdnJhbV9vZl9nZW0oZ2VtKTsKLQkqb2Zmc2V0ID0gZHJtX2dlbV92
cmFtX21tYXBfb2Zmc2V0KGdibyk7Ci0KLQlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQoZ2Vt
KTsKLQotCXJldHVybiAwOwotfQotRVhQT1JUX1NZTUJPTChkcm1fZ2VtX3ZyYW1fZHJpdmVyX2R1
bWJfbW1hcF9vZmZzZXQpOwotCiAvKgogICogUFJJTUUgaGVscGVycwogICovCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaGlzaWxpY29uL2hpYm1jL2hpYm1jX2RybV9kcnYuYyBiL2RyaXZl
cnMvZ3B1L2RybS9oaXNpbGljb24vaGlibWMvaGlibWNfZHJtX2Rydi5jCmluZGV4IDJhZTUzODgz
NTc4MS4uMTZmYjEwYmU0MjUxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaGlzaWxpY29u
L2hpYm1jL2hpYm1jX2RybV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaGlzaWxpY29uL2hp
Ym1jL2hpYm1jX2RybV9kcnYuYwpAQCAtNTksNyArNTksNyBAQCBzdGF0aWMgc3RydWN0IGRybV9k
cml2ZXIgaGlibWNfZHJpdmVyID0gewogCS5tYWpvcgkJCT0gMSwKIAkubWlub3IJCQk9IDAsCiAJ
LmR1bWJfY3JlYXRlICAgICAgICAgICAgPSBoaWJtY19kdW1iX2NyZWF0ZSwKLQkuZHVtYl9tYXBf
b2Zmc2V0ICAgICAgICA9IGRybV9nZW1fdnJhbV9kcml2ZXJfZHVtYl9tbWFwX29mZnNldCwKKwku
ZHVtYl9tYXBfb2Zmc2V0ICAgICAgICA9IGRybV9nZW1fdHRtX2RyaXZlcl9kdW1iX21tYXBfb2Zm
c2V0LAogCS5nZW1fcHJpbWVfbW1hcAkJPSBkcm1fZ2VtX3ByaW1lX21tYXAsCiAJLmlycV9oYW5k
bGVyCQk9IGhpYm1jX2RybV9pbnRlcnJ1cHQsCiB9OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL0tjb25maWcgYi9kcml2ZXJzL2dwdS9kcm0vS2NvbmZpZwppbmRleCBmN2IyNTUxOWY5NWMu
LjFiZThhZDMwZDhmZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL0tjb25maWcKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL0tjb25maWcKQEAgLTE2OSw2ICsxNjksNyBAQCBjb25maWcgRFJNX1ZS
QU1fSEVMUEVSCiAJdHJpc3RhdGUKIAlkZXBlbmRzIG9uIERSTQogCXNlbGVjdCBEUk1fVFRNCisJ
c2VsZWN0IERSTV9UVE1fSEVMUEVSCiAJaGVscAogCSAgSGVscGVycyBmb3IgVlJBTSBtZW1vcnkg
bWFuYWdlbWVudAogCi0tIAoyLjE4LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2RyaS1kZXZlbA==
