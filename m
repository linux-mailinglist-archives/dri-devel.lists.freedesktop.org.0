Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A312F524AA
	for <lists+dri-devel@lfdr.de>; Tue, 25 Jun 2019 09:29:49 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8AF516E02F;
	Tue, 25 Jun 2019 07:28:04 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from lb3-smtp-cloud7.xs4all.net (lb3-smtp-cloud7.xs4all.net
 [194.109.24.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 74D3089CE0
 for <dri-devel@lists.freedesktop.org>; Mon, 24 Jun 2019 16:10:47 +0000 (UTC)
Received: from tschai.fritz.box ([46.9.252.75])
 by smtp-cloud7.xs4all.net with ESMTPA
 id fRRKhHRxHF85OfRRRhZaaO; Mon, 24 Jun 2019 18:03:37 +0200
From: Hans Verkuil <hverkuil-cisco@xs4all.nl>
To: linux-media@vger.kernel.org
Subject: [PATCHv8 03/13] cec: add new notifier functions
Date: Mon, 24 Jun 2019 18:03:20 +0200
Message-Id: <20190624160330.38048-4-hverkuil-cisco@xs4all.nl>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190624160330.38048-1-hverkuil-cisco@xs4all.nl>
References: <20190624160330.38048-1-hverkuil-cisco@xs4all.nl>
MIME-Version: 1.0
X-CMAE-Envelope: MS4wfJPtxEILZeyd+1hNNapPJTUzULx9a7NHOdTyj2m18gP87rd/mmxdyMQ8FWKPReSZu2PhQGFPr5jEyOckfq5Kdxy48pKA3FrrG22rMHJtAn0YtJbbeSAv
 PCnI/TzWTMFlcxjljSbYg2HJ7mAsT/ZahZKUd98hr69uz09ADn8pp5HZcGlpaOM2CsglFciI74P57QQYTAnvNOH8k/24tACJRenT1jCHGJn76DV35bR6XR4r
 ZaAZqsobnXxYWbbLyHZdacWBRVM80BAXhghXnTN4evGUZqdz6N+1f0yLsjkkJw2K2q/3awIKwVO8oXgZagG25XadOo7KtxMaYhmYEFc97xA=
X-Mailman-Approved-At: Tue, 25 Jun 2019 07:27:07 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hans Verkuil <hverkuil-cisco@xs4all.nl>,
 Dariusz Marcinkiewicz <darekm@google.com>, dri-devel@lists.freedesktop.org,
 Cheng-yi Chiang <cychiang@chromium.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW4gb3JkZXIgdG8gc3VwcG9ydCBtdWx0aXBsZSBDRUMgZGV2aWNlcyBmb3IgYW4gSERNSSBjb25u
ZWN0b3IsCmFuZCB0byBzdXBwb3J0IGNlY19jb25uZWN0b3JfaW5mbywgZHJpdmVycyBzaG91bGQg
dXNlIGVpdGhlciBhCmNlY19ub3RpZmllcl9jb25uXyh1bilyZWdpc3RlciBwYWlyIG9mIGZ1bmN0
aW9ucyAoSERNSSBkcml2ZXJzKQpvciBhIGNlY19ub3RpZmllcl9jZWNfYWRhcF8odW4pcmVnaXN0
ZXIgcGFpciAoQ0VDIGFkYXB0ZXIgZHJpdmVycykuCgpUaGlzIHJlcGxhY2VzIGNlY19ub3RpZmll
cl9nZXRfY29ubi9jZWNfbm90aWZpZXJfcHV0LgoKRm9yIENFQyBhZGFwdGVycyBpdCBpcyBhbHNv
IG5vIGxvbmdlciBuZWVkZWQgdG8gY2FsbCBjZWNfbm90aWZpZXJfcmVnaXN0ZXIsCmNlY19yZWdp
c3Rlcl9jZWNfbm90aWZpZXIgYW5kIGNlY19ub3RpZmllcl91bnJlZ2lzdGVyLiBUaGlzIGlzIG5v
dwphbGwgaGFuZGxlZCBpbnRlcm5hbGx5IGJ5IHRoZSBuZXcgZnVuY3Rpb25zLgoKVGhlIGNhbGxl
ZF9jZWNfbm90aWZpZXJfcmVnaXN0ZXIgYm9vbCBpcyBuZWVkZWQgdG8gaGFuZGxlIHRoZSBjYXNl
IHdoZXJlCmEgQ0VDIGFkYXB0ZXIgZHJpdmVyIGNhbGxlZCB0aGUgb2xkIGNlY19ub3RpZmllcl9y
ZWdpc3RlcigpIGZ1bmN0aW9uCmluc3RlYWQgb2YgY2VjX25vdGlmaWVyX2NlY19hZGFwX3VucmVn
aXN0ZXIoKS4KCk9uY2UgdGhvc2Ugb2xkIGZ1bmN0aW9ucyBhcmUgcmVtb3ZlZCBpbiB0aGUgZnV0
dXJlLCB0aGF0IGJvb2wgY2FuIGFsc28KYmUgcmVtb3ZlZC4KClNpZ25lZC1vZmYtYnk6IEhhbnMg
VmVya3VpbCA8aHZlcmt1aWwtY2lzY29AeHM0YWxsLm5sPgotLS0KIGRyaXZlcnMvbWVkaWEvY2Vj
L2NlYy1ub3RpZmllci5jIHwgODkgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIGlu
Y2x1ZGUvbWVkaWEvY2VjLW5vdGlmaWVyLmggICAgIHwgNzggKysrKysrKysrKysrKysrKysrKysr
KysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCAxNjcgaW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvbWVkaWEvY2VjL2NlYy1ub3RpZmllci5jIGIvZHJpdmVycy9tZWRpYS9jZWMvY2Vj
LW5vdGlmaWVyLmMKaW5kZXggY2UxMGRmZDQwMGJiLi40OWQ2ZWMxOThkMzggMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvbWVkaWEvY2VjL2NlYy1ub3RpZmllci5jCisrKyBiL2RyaXZlcnMvbWVkaWEvY2Vj
L2NlYy1ub3RpZmllci5jCkBAIC0yMiw5ICsyMiwxMSBAQCBzdHJ1Y3QgY2VjX25vdGlmaWVyIHsK
IAlzdHJ1Y3QgbGlzdF9oZWFkIGhlYWQ7CiAJc3RydWN0IGtyZWYga3JlZjsKIAlzdHJ1Y3QgZGV2
aWNlICpoZG1pX2RldjsKKwlzdHJ1Y3QgY2VjX2Nvbm5lY3Rvcl9pbmZvIGNvbm5faW5mbzsKIAlj
b25zdCBjaGFyICpjb25uX25hbWU7CiAJc3RydWN0IGNlY19hZGFwdGVyICpjZWNfYWRhcDsKIAl2
b2lkICgqY2FsbGJhY2spKHN0cnVjdCBjZWNfYWRhcHRlciAqYWRhcCwgdTE2IHBhKTsKKwlib29s
IGNhbGxlZF9jZWNfbm90aWZpZXJfcmVnaXN0ZXI7CiAKIAl1MTYgcGh5c19hZGRyOwogfTsKQEAg
LTg3LDYgKzg5LDg1IEBAIHZvaWQgY2VjX25vdGlmaWVyX3B1dChzdHJ1Y3QgY2VjX25vdGlmaWVy
ICpuKQogfQogRVhQT1JUX1NZTUJPTF9HUEwoY2VjX25vdGlmaWVyX3B1dCk7CiAKK3N0cnVjdCBj
ZWNfbm90aWZpZXIgKgorY2VjX25vdGlmaWVyX2Nvbm5fcmVnaXN0ZXIoc3RydWN0IGRldmljZSAq
aGRtaV9kZXYsIGNvbnN0IGNoYXIgKmNvbm5fbmFtZSwKKwkJCSAgIGNvbnN0IHN0cnVjdCBjZWNf
Y29ubmVjdG9yX2luZm8gKmNvbm5faW5mbykKK3sKKwlzdHJ1Y3QgY2VjX25vdGlmaWVyICpuID0g
Y2VjX25vdGlmaWVyX2dldF9jb25uKGhkbWlfZGV2LCBjb25uX25hbWUpOworCisJaWYgKCFuKQor
CQlyZXR1cm4gbjsKKworCW11dGV4X2xvY2soJm4tPmxvY2spOworCW4tPnBoeXNfYWRkciA9IENF
Q19QSFlTX0FERFJfSU5WQUxJRDsKKwlpZiAoY29ubl9pbmZvKQorCQluLT5jb25uX2luZm8gPSAq
Y29ubl9pbmZvOworCWVsc2UKKwkJbWVtc2V0KCZuLT5jb25uX2luZm8sIDAsIHNpemVvZihuLT5j
b25uX2luZm8pKTsKKwlpZiAobi0+Y2VjX2FkYXApIHsKKwkJY2VjX3BoeXNfYWRkcl9pbnZhbGlk
YXRlKG4tPmNlY19hZGFwKTsKKwkJY2VjX3NfY29ubl9pbmZvKG4tPmNlY19hZGFwLCBjb25uX2lu
Zm8pOworCX0KKwltdXRleF91bmxvY2soJm4tPmxvY2spOworCXJldHVybiBuOworfQorRVhQT1JU
X1NZTUJPTF9HUEwoY2VjX25vdGlmaWVyX2Nvbm5fcmVnaXN0ZXIpOworCit2b2lkIGNlY19ub3Rp
Zmllcl9jb25uX3VucmVnaXN0ZXIoc3RydWN0IGNlY19ub3RpZmllciAqbikKK3sKKwlpZiAoIW4p
CisJCXJldHVybjsKKworCW11dGV4X2xvY2soJm4tPmxvY2spOworCW1lbXNldCgmbi0+Y29ubl9p
bmZvLCAwLCBzaXplb2Yobi0+Y29ubl9pbmZvKSk7CisJbi0+cGh5c19hZGRyID0gQ0VDX1BIWVNf
QUREUl9JTlZBTElEOworCWlmIChuLT5jZWNfYWRhcCkgeworCQljZWNfcGh5c19hZGRyX2ludmFs
aWRhdGUobi0+Y2VjX2FkYXApOworCQljZWNfc19jb25uX2luZm8obi0+Y2VjX2FkYXAsIE5VTEwp
OworCX0KKwltdXRleF91bmxvY2soJm4tPmxvY2spOworCWNlY19ub3RpZmllcl9wdXQobik7Cit9
CitFWFBPUlRfU1lNQk9MX0dQTChjZWNfbm90aWZpZXJfY29ubl91bnJlZ2lzdGVyKTsKKworc3Ry
dWN0IGNlY19ub3RpZmllciAqCitjZWNfbm90aWZpZXJfY2VjX2FkYXBfcmVnaXN0ZXIoc3RydWN0
IGRldmljZSAqaGRtaV9kZXYsIGNvbnN0IGNoYXIgKmNvbm5fbmFtZSwKKwkJCSAgICAgICBzdHJ1
Y3QgY2VjX2FkYXB0ZXIgKmFkYXApCit7CisJc3RydWN0IGNlY19ub3RpZmllciAqbjsKKworCWlm
IChXQVJOX09OKCFhZGFwKSkKKwkJcmV0dXJuIE5VTEw7CisKKwluID0gY2VjX25vdGlmaWVyX2dl
dF9jb25uKGhkbWlfZGV2LCBjb25uX25hbWUpOworCWlmICghbikKKwkJcmV0dXJuIG47CisKKwlt
dXRleF9sb2NrKCZuLT5sb2NrKTsKKwluLT5jZWNfYWRhcCA9IGFkYXA7CisJYWRhcC0+Y29ubl9p
bmZvID0gbi0+Y29ubl9pbmZvOworCWFkYXAtPm5vdGlmaWVyID0gbjsKKwljZWNfc19waHlzX2Fk
ZHIoYWRhcCwgbi0+cGh5c19hZGRyLCBmYWxzZSk7CisJbXV0ZXhfdW5sb2NrKCZuLT5sb2NrKTsK
KwlyZXR1cm4gbjsKK30KK0VYUE9SVF9TWU1CT0xfR1BMKGNlY19ub3RpZmllcl9jZWNfYWRhcF9y
ZWdpc3Rlcik7CisKK3ZvaWQgY2VjX25vdGlmaWVyX2NlY19hZGFwX3VucmVnaXN0ZXIoc3RydWN0
IGNlY19ub3RpZmllciAqbikKK3sKKwlpZiAoIW4pCisJCXJldHVybjsKKworCW11dGV4X2xvY2so
Jm4tPmxvY2spOworCW1lbXNldCgmbi0+Y2VjX2FkYXAtPmNvbm5faW5mbywgMCwgc2l6ZW9mKG4t
PmNlY19hZGFwLT5jb25uX2luZm8pKTsKKwluLT5jZWNfYWRhcC0+bm90aWZpZXIgPSBOVUxMOwor
CW4tPmNlY19hZGFwID0gTlVMTDsKKwluLT5jYWxsYmFjayA9IE5VTEw7CisJbXV0ZXhfdW5sb2Nr
KCZuLT5sb2NrKTsKKwljZWNfbm90aWZpZXJfcHV0KG4pOworfQorRVhQT1JUX1NZTUJPTF9HUEwo
Y2VjX25vdGlmaWVyX2NlY19hZGFwX3VucmVnaXN0ZXIpOworCiB2b2lkIGNlY19ub3RpZmllcl9z
ZXRfcGh5c19hZGRyKHN0cnVjdCBjZWNfbm90aWZpZXIgKm4sIHUxNiBwYSkKIHsKIAlpZiAobiA9
PSBOVUxMKQpAQCAtOTYsNiArMTc3LDggQEAgdm9pZCBjZWNfbm90aWZpZXJfc2V0X3BoeXNfYWRk
cihzdHJ1Y3QgY2VjX25vdGlmaWVyICpuLCB1MTYgcGEpCiAJbi0+cGh5c19hZGRyID0gcGE7CiAJ
aWYgKG4tPmNhbGxiYWNrKQogCQluLT5jYWxsYmFjayhuLT5jZWNfYWRhcCwgbi0+cGh5c19hZGRy
KTsKKwllbHNlIGlmIChuLT5jZWNfYWRhcCkKKwkJY2VjX3NfcGh5c19hZGRyKG4tPmNlY19hZGFw
LCBuLT5waHlzX2FkZHIsIGZhbHNlKTsKIAltdXRleF91bmxvY2soJm4tPmxvY2spOwogfQogRVhQ
T1JUX1NZTUJPTF9HUEwoY2VjX25vdGlmaWVyX3NldF9waHlzX2FkZHIpOwpAQCAtMTIxLDYgKzIw
NCw3IEBAIHZvaWQgY2VjX25vdGlmaWVyX3JlZ2lzdGVyKHN0cnVjdCBjZWNfbm90aWZpZXIgKm4s
CiB7CiAJa3JlZl9nZXQoJm4tPmtyZWYpOwogCW11dGV4X2xvY2soJm4tPmxvY2spOworCW4tPmNh
bGxlZF9jZWNfbm90aWZpZXJfcmVnaXN0ZXIgPSB0cnVlOwogCW4tPmNlY19hZGFwID0gYWRhcDsK
IAluLT5jYWxsYmFjayA9IGNhbGxiYWNrOwogCW4tPmNhbGxiYWNrKGFkYXAsIG4tPnBoeXNfYWRk
cik7CkBAIC0xMzAsOCArMjE0LDEzIEBAIEVYUE9SVF9TWU1CT0xfR1BMKGNlY19ub3RpZmllcl9y
ZWdpc3Rlcik7CiAKIHZvaWQgY2VjX25vdGlmaWVyX3VucmVnaXN0ZXIoc3RydWN0IGNlY19ub3Rp
ZmllciAqbikKIHsKKwkvKiBEbyBub3RoaW5nIHVubGVzcyBjZWNfbm90aWZpZXJfcmVnaXN0ZXIg
d2FzIGNhbGxlZCBmaXJzdCAqLworCWlmICghbi0+Y2FsbGVkX2NlY19ub3RpZmllcl9yZWdpc3Rl
cikKKwkJcmV0dXJuOworCiAJbXV0ZXhfbG9jaygmbi0+bG9jayk7CiAJbi0+Y2FsbGJhY2sgPSBO
VUxMOworCW4tPmNhbGxlZF9jZWNfbm90aWZpZXJfcmVnaXN0ZXIgPSBmYWxzZTsKIAltdXRleF91
bmxvY2soJm4tPmxvY2spOwogCWNlY19ub3RpZmllcl9wdXQobik7CiB9CmRpZmYgLS1naXQgYS9p
bmNsdWRlL21lZGlhL2NlYy1ub3RpZmllci5oIGIvaW5jbHVkZS9tZWRpYS9jZWMtbm90aWZpZXIu
aAppbmRleCA1N2IzYTlmNmVhMWQuLjMxM2I2OTA1YzIwMyAxMDA2NDQKLS0tIGEvaW5jbHVkZS9t
ZWRpYS9jZWMtbm90aWZpZXIuaAorKysgYi9pbmNsdWRlL21lZGlhL2NlYy1ub3RpZmllci5oCkBA
IC00Miw2ICs0Miw2MCBAQCBzdHJ1Y3QgY2VjX25vdGlmaWVyICpjZWNfbm90aWZpZXJfZ2V0X2Nv
bm4oc3RydWN0IGRldmljZSAqZGV2LAogICovCiB2b2lkIGNlY19ub3RpZmllcl9wdXQoc3RydWN0
IGNlY19ub3RpZmllciAqbik7CiAKKy8qKgorICogY2VjX25vdGlmaWVyX2Nvbm5fcmVnaXN0ZXIg
LSBmaW5kIG9yIGNyZWF0ZSBhIG5ldyBjZWNfbm90aWZpZXIgZm9yIHRoZSBnaXZlbgorICogSERN
SSBkZXZpY2UgYW5kIGNvbm5lY3RvciB0dXBsZS4KKyAqIEBoZG1pX2RldjogSERNSSBkZXZpY2Ug
dGhhdCBzZW5kcyB0aGUgZXZlbnRzLgorICogQGNvbm5fbmFtZTogdGhlIGNvbm5lY3RvciBuYW1l
IGZyb20gd2hpY2ggdGhlIGV2ZW50IG9jY3Vycy4gTWF5IGJlIE5VTEwKKyAqIGlmIHRoZXJlIGlz
IGFsd2F5cyBvbmx5IG9uZSBIRE1JIGNvbm5lY3RvciBjcmVhdGVkIGJ5IHRoZSBIRE1JIGRldmlj
ZS4KKyAqIEBjb25uX2luZm86IHRoZSBjb25uZWN0b3IgaW5mbyBmcm9tIHdoaWNoIHRoZSBldmVu
dCBvY2N1cnMgKG1heSBiZSBOVUxMKQorICoKKyAqIElmIGEgbm90aWZpZXIgZm9yIGRldmljZSBA
ZGV2IGFuZCBjb25uZWN0b3IgQGNvbm5fbmFtZSBhbHJlYWR5IGV4aXN0cywgdGhlbgorICogaW5j
cmVhc2UgdGhlIHJlZmNvdW50IGFuZCByZXR1cm4gdGhhdCBub3RpZmllci4KKyAqCisgKiBJZiBp
dCBkb2Vzbid0IGV4aXN0LCB0aGVuIGFsbG9jYXRlIGEgbmV3IG5vdGlmaWVyIHN0cnVjdCBhbmQg
cmV0dXJuIGEKKyAqIHBvaW50ZXIgdG8gdGhhdCBuZXcgc3RydWN0LgorICoKKyAqIFJldHVybiBO
VUxMIGlmIHRoZSBtZW1vcnkgY291bGQgbm90IGJlIGFsbG9jYXRlZC4KKyAqLworc3RydWN0IGNl
Y19ub3RpZmllciAqCitjZWNfbm90aWZpZXJfY29ubl9yZWdpc3RlcihzdHJ1Y3QgZGV2aWNlICpo
ZG1pX2RldiwgY29uc3QgY2hhciAqY29ubl9uYW1lLAorCQkJICAgY29uc3Qgc3RydWN0IGNlY19j
b25uZWN0b3JfaW5mbyAqY29ubl9pbmZvKTsKKworLyoqCisgKiBjZWNfbm90aWZpZXJfY29ubl91
bnJlZ2lzdGVyIC0gZGVjcmVhc2UgcmVmY291bnQgYW5kIGRlbGV0ZSB3aGVuIHRoZQorICogcmVm
Y291bnQgcmVhY2hlcyAwLgorICogQG46IG5vdGlmaWVyCisgKi8KK3ZvaWQgY2VjX25vdGlmaWVy
X2Nvbm5fdW5yZWdpc3RlcihzdHJ1Y3QgY2VjX25vdGlmaWVyICpuKTsKKworLyoqCisgKiBjZWNf
bm90aWZpZXJfY2VjX2FkYXBfcmVnaXN0ZXIgLSBmaW5kIG9yIGNyZWF0ZSBhIG5ldyBjZWNfbm90
aWZpZXIgZm9yIHRoZQorICogZ2l2ZW4gZGV2aWNlLgorICogQGhkbWlfZGV2OiBIRE1JIGRldmlj
ZSB0aGF0IHNlbmRzIHRoZSBldmVudHMuCisgKiBAY29ubl9uYW1lOiB0aGUgY29ubmVjdG9yIG5h
bWUgZnJvbSB3aGljaCB0aGUgZXZlbnQgb2NjdXJzLiBNYXkgYmUgTlVMTAorICogaWYgdGhlcmUg
aXMgYWx3YXlzIG9ubHkgb25lIEhETUkgY29ubmVjdG9yIGNyZWF0ZWQgYnkgdGhlIEhETUkgZGV2
aWNlLgorICogQGFkYXA6IHRoZSBjZWMgYWRhcHRlciB0aGF0IHJlZ2lzdGVyZWQgdGhpcyBub3Rp
Zmllci4KKyAqCisgKiBJZiBhIG5vdGlmaWVyIGZvciBkZXZpY2UgQGRldiBhbmQgY29ubmVjdG9y
IEBjb25uX25hbWUgYWxyZWFkeSBleGlzdHMsIHRoZW4KKyAqIGluY3JlYXNlIHRoZSByZWZjb3Vu
dCBhbmQgcmV0dXJuIHRoYXQgbm90aWZpZXIuCisgKgorICogSWYgaXQgZG9lc24ndCBleGlzdCwg
dGhlbiBhbGxvY2F0ZSBhIG5ldyBub3RpZmllciBzdHJ1Y3QgYW5kIHJldHVybiBhCisgKiBwb2lu
dGVyIHRvIHRoYXQgbmV3IHN0cnVjdC4KKyAqCisgKiBSZXR1cm4gTlVMTCBpZiB0aGUgbWVtb3J5
IGNvdWxkIG5vdCBiZSBhbGxvY2F0ZWQuCisgKi8KK3N0cnVjdCBjZWNfbm90aWZpZXIgKgorY2Vj
X25vdGlmaWVyX2NlY19hZGFwX3JlZ2lzdGVyKHN0cnVjdCBkZXZpY2UgKmhkbWlfZGV2LCBjb25z
dCBjaGFyICpjb25uX25hbWUsCisJCQkgICAgICAgc3RydWN0IGNlY19hZGFwdGVyICphZGFwKTsK
KworLyoqCisgKiBjZWNfbm90aWZpZXJfY2VjX2FkYXBfdW5yZWdpc3RlciAtIGRlY3JlYXNlIHJl
ZmNvdW50IGFuZCBkZWxldGUgd2hlbiB0aGUKKyAqIHJlZmNvdW50IHJlYWNoZXMgMC4KKyAqIEBu
OiBub3RpZmllcgorICovCit2b2lkIGNlY19ub3RpZmllcl9jZWNfYWRhcF91bnJlZ2lzdGVyKHN0
cnVjdCBjZWNfbm90aWZpZXIgKm4pOworCiAvKioKICAqIGNlY19ub3RpZmllcl9zZXRfcGh5c19h
ZGRyIC0gc2V0IGEgbmV3IHBoeXNpY2FsIGFkZHJlc3MuCiAgKiBAbjogdGhlIENFQyBub3RpZmll
cgpAQCAtMTEwLDYgKzE2NCwzMCBAQCBzdGF0aWMgaW5saW5lIHZvaWQgY2VjX25vdGlmaWVyX3B1
dChzdHJ1Y3QgY2VjX25vdGlmaWVyICpuKQogewogfQogCitzdGF0aWMgaW5saW5lIHN0cnVjdCBj
ZWNfbm90aWZpZXIgKgorY2VjX25vdGlmaWVyX2Nvbm5fcmVnaXN0ZXIoc3RydWN0IGRldmljZSAq
aGRtaV9kZXYsIGNvbnN0IGNoYXIgKmNvbm5fbmFtZSwKKwkJCSAgIGNvbnN0IHN0cnVjdCBjZWNf
Y29ubmVjdG9yX2luZm8gKmNvbm5faW5mbykKK3sKKwkvKiBBIG5vbi1OVUxMIHBvaW50ZXIgaXMg
ZXhwZWN0ZWQgb24gc3VjY2VzcyAqLworCXJldHVybiAoc3RydWN0IGNlY19ub3RpZmllciAqKTB4
ZGVhZGZlZWQ7Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9pZCBjZWNfbm90aWZpZXJfY29ubl91bnJl
Z2lzdGVyKHN0cnVjdCBjZWNfbm90aWZpZXIgKm4pCit7Cit9CisKK3N0YXRpYyBpbmxpbmUgc3Ry
dWN0IGNlY19ub3RpZmllciAqCitjZWNfbm90aWZpZXJfY2VjX2FkYXBfcmVnaXN0ZXIoc3RydWN0
IGRldmljZSAqaGRtaV9kZXYsIGNvbnN0IGNoYXIgKmNvbm5fbmFtZSwKKwkJCSAgICAgICBzdHJ1
Y3QgY2VjX2FkYXB0ZXIgKmFkYXApCit7CisJLyogQSBub24tTlVMTCBwb2ludGVyIGlzIGV4cGVj
dGVkIG9uIHN1Y2Nlc3MgKi8KKwlyZXR1cm4gKHN0cnVjdCBjZWNfbm90aWZpZXIgKikweGRlYWRm
ZWVkOworfQorCitzdGF0aWMgaW5saW5lIHZvaWQgY2VjX25vdGlmaWVyX2NlY19hZGFwX3VucmVn
aXN0ZXIoc3RydWN0IGNlY19ub3RpZmllciAqbikKK3sKK30KKwogc3RhdGljIGlubGluZSB2b2lk
IGNlY19ub3RpZmllcl9zZXRfcGh5c19hZGRyKHN0cnVjdCBjZWNfbm90aWZpZXIgKm4sIHUxNiBw
YSkKIHsKIH0KLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
ZHJpLWRldmVs
