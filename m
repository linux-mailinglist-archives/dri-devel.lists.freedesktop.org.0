Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 7703E232F12
	for <lists+dri-devel@lfdr.de>; Thu, 30 Jul 2020 11:00:30 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5EAD16E02F;
	Thu, 30 Jul 2020 09:00:27 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x544.google.com (mail-ed1-x544.google.com
 [IPv6:2a00:1450:4864:20::544])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4B9906E02F
 for <dri-devel@lists.freedesktop.org>; Thu, 30 Jul 2020 09:00:24 +0000 (UTC)
Received: by mail-ed1-x544.google.com with SMTP id di22so12199780edb.12
 for <dri-devel@lists.freedesktop.org>; Thu, 30 Jul 2020 02:00:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=6cJXgh33+s2ipvp5jsFZaEk6ghysmzw8e340DvfhIx8=;
 b=jl6sbu+L369kkFnrkNsHFgtmHqIBou5ISwJlvxZ+k6KPzoY/JSGeK2oFB1a+to6mDE
 40Z2J/HOXPHDUjnZzvL56nzVpOlHZXAD0XSGCclDXPQX9CGDXLZI2zravpweCn411hGh
 /vAPUar/vCLYdOgicieNwSb81FeNBaX092wl9W3/vwWxpJcgX2y1O4RmbDSjqKkj2MC2
 lkPrv1gUP55KIPchcb0AzAoYz6GJdvxaORX16UXMaqNBo9Mg1YU3r2q/don5agJg6B7X
 YTKy+ToHTM+elFCD7ccfPtqnaR1YbV3DYCSPw87JUiuGCdu1vVo/JU9JYUhA9n+5Fhrl
 cAjA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=6cJXgh33+s2ipvp5jsFZaEk6ghysmzw8e340DvfhIx8=;
 b=oR5qjzu61P3yjkGg3InUEtYXMllcZLTBEEMHzXMDzwthG1zFyV2g6GeV4GfC+wDMD/
 34LjeUXU/NEGqFYTJwpTCQtnjz8PwQ3WJU6edGU9BbQi2eV4w/9AxfXqd73l4v6p4YYT
 Nfz5h4O20oxXm7BiDa1wUj0egPocOkAydXwYGnaFtyp5rNcjfH1XRwMDwujDraCOGr8D
 SmRw+9EkLBTBxSI8Yu7KkdLpFKhRzLRFInUWqXLGj/dNPtyhETSKp2V0lIAFqGsw0kbc
 5RYbzDb870HFVkBE42DwdZIJ6RGkoLWg60eSK5+h/ZBQLxz+8MfpQIt42/sr1hCeS6ah
 0gCQ==
X-Gm-Message-State: AOAM530U+U9UknlT6vpx2QMHUHarhB00pdno2VCm/tcFRYJqOkHKeOTH
 Um0k22B3aLXVwPhdeahqUD2ThcGD
X-Google-Smtp-Source: ABdhPJwQmQWR7xCA9+XaTF1othmtfH2EVD3OacmSy7uTR/OcL0FWLl3Sg+ZSpPCvkLX6xnGDAcINBg==
X-Received: by 2002:a50:8749:: with SMTP id 9mr1679096edv.80.1596099621493;
 Thu, 30 Jul 2020 02:00:21 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:cb71:127d:d8c4:4acb])
 by smtp.gmail.com with ESMTPSA id j24sm4968238ejv.32.2020.07.30.02.00.20
 for <dri-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 30 Jul 2020 02:00:21 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 2/9] drm/ttm: remove TTM_MEMTYPE_FLAG_FIXED v2
Date: Thu, 30 Jul 2020 11:00:08 +0200
Message-Id: <20200730090015.17295-2-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200730090015.17295-1-christian.koenig@amd.com>
References: <20200730090015.17295-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW5zdGVhZCB1c2UgYSBib29sZWFuIGZpZWxkIGluIHRoZSBtZW1vcnkgbWFuYWdlciBzdHJ1Y3R1
cmUuCgpBbHNvIGludmVydCB0aGUgbWVhbmluZyBvZiB0aGUgZmllbGQgc2luY2UgdGhlIHVzZSBv
ZiBhIFRUCnN0cnVjdHVyZSBpcyB0aGUgc3BlY2lhbCBjYXNlIGhlcmUuCgp2MjogY2xlYW51cCB6
ZXJvIGluaXQuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29l
bmlnQGFtZC5jb20+ClJldmlld2VkLWJ5OiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZm
d2xsLmNoPgpSZXZpZXdlZC1ieTogVGhvbWFzIFppbW1lcm1hbm4gPHR6aW1tZXJtYW5uQHN1c2Uu
ZGU+ClJldmlld2VkLWJ5OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jICAgIHwgIDQgKy0t
LQogZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYyAgICAgIHwgIDEgLQogZHJp
dmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jICAgICAgIHwgIDQgKy0tLQogZHJpdmVy
cy9ncHUvZHJtL3F4bC9xeGxfdHRtLmMgICAgICAgICAgICAgIHwgIDEgLQogZHJpdmVycy9ncHUv
ZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMgICAgICAgIHwgIDMgKy0tCiBkcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV9iby5jICAgICAgICAgICAgICAgfCAxOSArKysrKysrKysrLS0tLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMgICAgICAgICAgfCAxMiArKysrKystLS0tLS0K
IGRyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3R0bV9idWZmZXIuYyB8ICAzICsrLQogaW5j
bHVkZS9kcm0vdHRtL3R0bV9ib19kcml2ZXIuaCAgICAgICAgICAgIHwgIDQgKy0tLQogOSBmaWxl
cyBjaGFuZ2VkLCAyMiBpbnNlcnRpb25zKCspLCAyOSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKaW5kZXggZTU3YzQ5YTkxYjczLi40MDZiY2IwM2Rm
NDggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKQEAgLTg3LDE1ICs4
NywxNCBAQCBzdGF0aWMgaW50IGFtZGdwdV9pbml0X21lbV90eXBlKHN0cnVjdCB0dG1fYm9fZGV2
aWNlICpiZGV2LCB1aW50MzJfdCB0eXBlLAogCQlicmVhazsKIAljYXNlIFRUTV9QTF9UVDoKIAkJ
LyogR1RUIG1lbW9yeSAgKi8KKwkJbWFuLT51c2VfdHQgPSB0cnVlOwogCQltYW4tPmZ1bmMgPSAm
YW1kZ3B1X2d0dF9tZ3JfZnVuYzsKIAkJbWFuLT5hdmFpbGFibGVfY2FjaGluZyA9IFRUTV9QTF9N
QVNLX0NBQ0hJTkc7CiAJCW1hbi0+ZGVmYXVsdF9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfQ0FDSEVE
OwotCQltYW4tPmZsYWdzID0gMDsKIAkJYnJlYWs7CiAJY2FzZSBUVE1fUExfVlJBTToKIAkJLyog
Ik9uLWNhcmQiIHZpZGVvIHJhbSAqLwogCQltYW4tPmZ1bmMgPSAmYW1kZ3B1X3ZyYW1fbWdyX2Z1
bmM7Ci0JCW1hbi0+ZmxhZ3MgPSBUVE1fTUVNVFlQRV9GTEFHX0ZJWEVEOwogCQltYW4tPmF2YWls
YWJsZV9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQgfCBUVE1fUExfRkxBR19XQzsKIAkJ
bWFuLT5kZWZhdWx0X2NhY2hpbmcgPSBUVE1fUExfRkxBR19XQzsKIAkJYnJlYWs7CkBAIC0xMDQs
NyArMTAzLDYgQEAgc3RhdGljIGludCBhbWRncHVfaW5pdF9tZW1fdHlwZShzdHJ1Y3QgdHRtX2Jv
X2RldmljZSAqYmRldiwgdWludDMyX3QgdHlwZSwKIAljYXNlIEFNREdQVV9QTF9PQToKIAkJLyog
T24tY2hpcCBHRFMgbWVtb3J5Ki8KIAkJbWFuLT5mdW5jID0gJnR0bV9ib19tYW5hZ2VyX2Z1bmM7
Ci0JCW1hbi0+ZmxhZ3MgPSBUVE1fTUVNVFlQRV9GTEFHX0ZJWEVEOwogCQltYW4tPmF2YWlsYWJs
ZV9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQ7CiAJCW1hbi0+ZGVmYXVsdF9jYWNoaW5n
ID0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQ7CiAJCWJyZWFrOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3Zy
YW1faGVscGVyLmMKaW5kZXggYmUxNzdhZmRlYjlhLi44MDFhMTRjNmU5ZTAgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYwpAQCAtMTAxMiw3ICsxMDEyLDYgQEAgc3RhdGljIGlu
dCBib19kcml2ZXJfaW5pdF9tZW1fdHlwZShzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldiwgdWlu
dDMyX3QgdHlwZSwKIAkJYnJlYWs7CiAJY2FzZSBUVE1fUExfVlJBTToKIAkJbWFuLT5mdW5jID0g
JnR0bV9ib19tYW5hZ2VyX2Z1bmM7Ci0JCW1hbi0+ZmxhZ3MgPSBUVE1fTUVNVFlQRV9GTEFHX0ZJ
WEVEOwogCQltYW4tPmF2YWlsYWJsZV9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQgfAog
CQkJCQkgVFRNX1BMX0ZMQUdfV0M7CiAJCW1hbi0+ZGVmYXVsdF9jYWNoaW5nID0gVFRNX1BMX0ZM
QUdfV0M7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMKaW5kZXggNTNhZjI1MDIwYmIy
Li5hM2FkNjZhZDM4MTcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZl
YXVfYm8uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMKQEAgLTY1
Nyw3ICs2NTcsNiBAQCBub3V2ZWF1X2JvX2luaXRfbWVtX3R5cGUoc3RydWN0IHR0bV9ib19kZXZp
Y2UgKmJkZXYsIHVpbnQzMl90IHR5cGUsCiAJY2FzZSBUVE1fUExfU1lTVEVNOgogCQlicmVhazsK
IAljYXNlIFRUTV9QTF9WUkFNOgotCQltYW4tPmZsYWdzID0gVFRNX01FTVRZUEVfRkxBR19GSVhF
RDsKIAkJbWFuLT5hdmFpbGFibGVfY2FjaGluZyA9IFRUTV9QTF9GTEFHX1VOQ0FDSEVEIHwKIAkJ
CQkJIFRUTV9QTF9GTEFHX1dDOwogCQltYW4tPmRlZmF1bHRfY2FjaGluZyA9IFRUTV9QTF9GTEFH
X1dDOwpAQCAtNjg1LDEzICs2ODQsMTIgQEAgbm91dmVhdV9ib19pbml0X21lbV90eXBlKHN0cnVj
dCB0dG1fYm9fZGV2aWNlICpiZGV2LCB1aW50MzJfdCB0eXBlLAogCQllbHNlCiAJCQltYW4tPmZ1
bmMgPSAmdHRtX2JvX21hbmFnZXJfZnVuYzsKIAorCQltYW4tPnVzZV90dCA9IHRydWU7CiAJCWlm
IChkcm0tPmFncC5icmlkZ2UpIHsKLQkJCW1hbi0+ZmxhZ3MgPSAwOwogCQkJbWFuLT5hdmFpbGFi
bGVfY2FjaGluZyA9IFRUTV9QTF9GTEFHX1VOQ0FDSEVEIHwKIAkJCQlUVE1fUExfRkxBR19XQzsK
IAkJCW1hbi0+ZGVmYXVsdF9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfV0M7CiAJCX0gZWxzZSB7Ci0J
CQltYW4tPmZsYWdzID0gMDsKIAkJCW1hbi0+YXZhaWxhYmxlX2NhY2hpbmcgPSBUVE1fUExfTUFT
S19DQUNISU5HOwogCQkJbWFuLT5kZWZhdWx0X2NhY2hpbmcgPSBUVE1fUExfRkxBR19DQUNIRUQ7
CiAJCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3R0bS5jIGIvZHJpdmVy
cy9ncHUvZHJtL3F4bC9xeGxfdHRtLmMKaW5kZXggZTliOGM5MjFjMWYwLi5hYmI5ZmE0ZDgwY2Yg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3R0bS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9xeGwvcXhsX3R0bS5jCkBAIC01OSw3ICs1OSw2IEBAIHN0YXRpYyBpbnQgcXhsX2lu
aXRfbWVtX3R5cGUoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsIHVpbnQzMl90IHR5cGUsCiAJ
Y2FzZSBUVE1fUExfUFJJVjoKIAkJLyogIk9uLWNhcmQiIHZpZGVvIHJhbSAqLwogCQltYW4tPmZ1
bmMgPSAmdHRtX2JvX21hbmFnZXJfZnVuYzsKLQkJbWFuLT5mbGFncyA9IFRUTV9NRU1UWVBFX0ZM
QUdfRklYRUQ7CiAJCW1hbi0+YXZhaWxhYmxlX2NhY2hpbmcgPSBUVE1fUExfTUFTS19DQUNISU5H
OwogCQltYW4tPmRlZmF1bHRfY2FjaGluZyA9IFRUTV9QTF9GTEFHX0NBQ0hFRDsKIAkJYnJlYWs7
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90dG0uYyBiL2RyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jCmluZGV4IGI0Y2I3NTM2MTU3Ny4uOWFiYTE4
YTE0M2U3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90dG0uYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90dG0uYwpAQCAtODEsNyArODEsNyBA
QCBzdGF0aWMgaW50IHJhZGVvbl9pbml0X21lbV90eXBlKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpi
ZGV2LCB1aW50MzJfdCB0eXBlLAogCQltYW4tPmZ1bmMgPSAmdHRtX2JvX21hbmFnZXJfZnVuYzsK
IAkJbWFuLT5hdmFpbGFibGVfY2FjaGluZyA9IFRUTV9QTF9NQVNLX0NBQ0hJTkc7CiAJCW1hbi0+
ZGVmYXVsdF9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfQ0FDSEVEOwotCQltYW4tPmZsYWdzID0gMDsK
KwkJbWFuLT51c2VfdHQgPSB0cnVlOwogI2lmIElTX0VOQUJMRUQoQ09ORklHX0FHUCkKIAkJaWYg
KHJkZXYtPmZsYWdzICYgUkFERU9OX0lTX0FHUCkgewogCQkJaWYgKCFyZGV2LT5kZGV2LT5hZ3Ap
IHsKQEAgLTk4LDcgKzk4LDYgQEAgc3RhdGljIGludCByYWRlb25faW5pdF9tZW1fdHlwZShzdHJ1
Y3QgdHRtX2JvX2RldmljZSAqYmRldiwgdWludDMyX3QgdHlwZSwKIAljYXNlIFRUTV9QTF9WUkFN
OgogCQkvKiAiT24tY2FyZCIgdmlkZW8gcmFtICovCiAJCW1hbi0+ZnVuYyA9ICZ0dG1fYm9fbWFu
YWdlcl9mdW5jOwotCQltYW4tPmZsYWdzID0gVFRNX01FTVRZUEVfRkxBR19GSVhFRDsKIAkJbWFu
LT5hdmFpbGFibGVfY2FjaGluZyA9IFRUTV9QTF9GTEFHX1VOQ0FDSEVEIHwgVFRNX1BMX0ZMQUdf
V0M7CiAJCW1hbi0+ZGVmYXVsdF9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfV0M7CiAJCWJyZWFrOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2JvLmMKaW5kZXggYjU2MDhhMDA4N2E5Li45ZDMxNmYzM2U2YTYgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fYm8uYwpAQCAtODQsNyArODQsNyBAQCBzdGF0aWMgdm9pZCB0dG1fbWVtX3R5cGVfZGVi
dWcoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsIHN0cnVjdCBkcm1fcHJpbnRlciAqcAogCiAJ
ZHJtX3ByaW50ZihwLCAiICAgIGhhc190eXBlOiAlZFxuIiwgbWFuLT5oYXNfdHlwZSk7CiAJZHJt
X3ByaW50ZihwLCAiICAgIHVzZV90eXBlOiAlZFxuIiwgbWFuLT51c2VfdHlwZSk7Ci0JZHJtX3By
aW50ZihwLCAiICAgIGZsYWdzOiAweCUwOFhcbiIsIG1hbi0+ZmxhZ3MpOworCWRybV9wcmludGYo
cCwgIiAgICB1c2VfdHQ6ICVkXG4iLCBtYW4tPnVzZV90dCk7CiAJZHJtX3ByaW50ZihwLCAiICAg
IHNpemU6ICVsbHVcbiIsIG1hbi0+c2l6ZSk7CiAJZHJtX3ByaW50ZihwLCAiICAgIGF2YWlsYWJs
ZV9jYWNoaW5nOiAweCUwOFhcbiIsIG1hbi0+YXZhaWxhYmxlX2NhY2hpbmcpOwogCWRybV9wcmlu
dGYocCwgIiAgICBkZWZhdWx0X2NhY2hpbmc6IDB4JTA4WFxuIiwgbWFuLT5kZWZhdWx0X2NhY2hp
bmcpOwpAQCAtMTU5LDcgKzE1OSw3IEBAIHN0YXRpYyB2b2lkIHR0bV9ib19hZGRfbWVtX3RvX2xy
dShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAogCW1hbiA9ICZiZGV2LT5tYW5bbWVtLT5t
ZW1fdHlwZV07CiAJbGlzdF9hZGRfdGFpbCgmYm8tPmxydSwgJm1hbi0+bHJ1W2JvLT5wcmlvcml0
eV0pOwogCi0JaWYgKCEobWFuLT5mbGFncyAmIFRUTV9NRU1UWVBFX0ZMQUdfRklYRUQpICYmIGJv
LT50dG0gJiYKKwlpZiAobWFuLT51c2VfdHQgJiYgYm8tPnR0bSAmJgogCSAgICAhKGJvLT50dG0t
PnBhZ2VfZmxhZ3MgJiAoVFRNX1BBR0VfRkxBR19TRyB8CiAJCQkJICAgICBUVE1fUEFHRV9GTEFH
X1NXQVBQRUQpKSkgewogCQlsaXN0X2FkZF90YWlsKCZiby0+c3dhcCwgJnR0bV9ib19nbG9iLnN3
YXBfbHJ1W2JvLT5wcmlvcml0eV0pOwpAQCAtMjg2LDEwICsyODYsMTEgQEAgc3RhdGljIGludCB0
dG1fYm9faGFuZGxlX21vdmVfbWVtKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJICog
Q3JlYXRlIGFuZCBiaW5kIGEgdHRtIGlmIHJlcXVpcmVkLgogCSAqLwogCi0JaWYgKCEobmV3X21h
bi0+ZmxhZ3MgJiBUVE1fTUVNVFlQRV9GTEFHX0ZJWEVEKSkgewotCQlib29sIHplcm8gPSAhKG9s
ZF9tYW4tPmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19GSVhFRCk7Ci0KLQkJcmV0ID0gdHRtX3R0
X2NyZWF0ZShibywgemVybyk7CisJaWYgKG5ld19tYW4tPnVzZV90dCkgeworCQkvKiBaZXJvIGlu
aXQgdGhlIG5ldyBUVE0gc3RydWN0dXJlIGlmIHRoZSBvbGQgbG9jYXRpb24gc2hvdWxkCisJCSAq
IGhhdmUgdXNlZCBvbmUgYXMgd2VsbC4KKwkJICovCisJCXJldCA9IHR0bV90dF9jcmVhdGUoYm8s
IG9sZF9tYW4tPnVzZV90dCk7CiAJCWlmIChyZXQpCiAJCQlnb3RvIG91dF9lcnI7CiAKQEAgLTMx
NCw4ICszMTUsNyBAQCBzdGF0aWMgaW50IHR0bV9ib19oYW5kbGVfbW92ZV9tZW0oc3RydWN0IHR0
bV9idWZmZXJfb2JqZWN0ICpibywKIAlpZiAoYmRldi0+ZHJpdmVyLT5tb3ZlX25vdGlmeSkKIAkJ
YmRldi0+ZHJpdmVyLT5tb3ZlX25vdGlmeShibywgZXZpY3QsIG1lbSk7CiAKLQlpZiAoIShvbGRf
bWFuLT5mbGFncyAmIFRUTV9NRU1UWVBFX0ZMQUdfRklYRUQpICYmCi0JICAgICEobmV3X21hbi0+
ZmxhZ3MgJiBUVE1fTUVNVFlQRV9GTEFHX0ZJWEVEKSkKKwlpZiAob2xkX21hbi0+dXNlX3R0ICYm
IG5ld19tYW4tPnVzZV90dCkKIAkJcmV0ID0gdHRtX2JvX21vdmVfdHRtKGJvLCBjdHgsIG1lbSk7
CiAJZWxzZSBpZiAoYmRldi0+ZHJpdmVyLT5tb3ZlKQogCQlyZXQgPSBiZGV2LT5kcml2ZXItPm1v
dmUoYm8sIGV2aWN0LCBjdHgsIG1lbSk7CkBAIC0zNDAsNyArMzQwLDcgQEAgc3RhdGljIGludCB0
dG1fYm9faGFuZGxlX21vdmVfbWVtKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAKIG91
dF9lcnI6CiAJbmV3X21hbiA9ICZiZGV2LT5tYW5bYm8tPm1lbS5tZW1fdHlwZV07Ci0JaWYgKG5l
d19tYW4tPmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19GSVhFRCkgeworCWlmICghbmV3X21hbi0+
dXNlX3R0KSB7CiAJCXR0bV90dF9kZXN0cm95KGJvLT50dG0pOwogCQliby0+dHRtID0gTlVMTDsK
IAl9CkBAIC0xNjczLDYgKzE2NzMsNyBAQCBpbnQgdHRtX2JvX2RldmljZV9pbml0KHN0cnVjdCB0
dG1fYm9fZGV2aWNlICpiZGV2LAogCSAqIEluaXRpYWxpemUgdGhlIHN5c3RlbSBtZW1vcnkgYnVm
ZmVyIHR5cGUuCiAJICogT3RoZXIgdHlwZXMgbmVlZCB0byBiZSBkcml2ZXIgLyBJT0NUTCBpbml0
aWFsaXplZC4KIAkgKi8KKwliZGV2LT5tYW5bVFRNX1BMX1NZU1RFTV0udXNlX3R0ID0gdHJ1ZTsK
IAliZGV2LT5tYW5bVFRNX1BMX1NZU1RFTV0uYXZhaWxhYmxlX2NhY2hpbmcgPSBUVE1fUExfTUFT
S19DQUNISU5HOwogCWJkZXYtPm1hbltUVE1fUExfU1lTVEVNXS5kZWZhdWx0X2NhY2hpbmcgPSBU
VE1fUExfRkxBR19DQUNIRUQ7CiAJcmV0ID0gdHRtX2JvX2luaXRfbW0oYmRldiwgVFRNX1BMX1NZ
U1RFTSwgMCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMKaW5kZXggN2ZiM2UwYmNiYWI0Li4x
ZjUwMmJlMGI2NDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX3V0aWwu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMKQEAgLTM4NCw3ICszODQs
NyBAQCBpbnQgdHRtX2JvX21vdmVfbWVtY3B5KHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8s
CiAJKm9sZF9tZW0gPSAqbmV3X21lbTsKIAluZXdfbWVtLT5tbV9ub2RlID0gTlVMTDsKIAotCWlm
IChtYW4tPmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19GSVhFRCkgeworCWlmICghbWFuLT51c2Vf
dHQpIHsKIAkJdHRtX3R0X2Rlc3Ryb3kodHRtKTsKIAkJYm8tPnR0bSA9IE5VTEw7CiAJfQpAQCAt
NjQ1LDcgKzY0NSw3IEBAIGludCB0dG1fYm9fbW92ZV9hY2NlbF9jbGVhbnVwKHN0cnVjdCB0dG1f
YnVmZmVyX29iamVjdCAqYm8sCiAJCWlmIChyZXQpCiAJCQlyZXR1cm4gcmV0OwogCi0JCWlmICht
YW4tPmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19GSVhFRCkgeworCQlpZiAoIW1hbi0+dXNlX3R0
KSB7CiAJCQl0dG1fdHRfZGVzdHJveShiby0+dHRtKTsKIAkJCWJvLT50dG0gPSBOVUxMOwogCQl9
CkBAIC02NzQsNyArNjc0LDcgQEAgaW50IHR0bV9ib19tb3ZlX2FjY2VsX2NsZWFudXAoc3RydWN0
IHR0bV9idWZmZXJfb2JqZWN0ICpibywKIAkJICogYm8gdG8gYmUgdW5ib3VuZCBhbmQgZGVzdHJv
eWVkLgogCQkgKi8KIAotCQlpZiAoIShtYW4tPmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19GSVhF
RCkpCisJCWlmIChtYW4tPnVzZV90dCkKIAkJCWdob3N0X29iai0+dHRtID0gTlVMTDsKIAkJZWxz
ZQogCQkJYm8tPnR0bSA9IE5VTEw7CkBAIC03MzAsNyArNzMwLDcgQEAgaW50IHR0bV9ib19waXBl
bGluZV9tb3ZlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJCSAqIGJvIHRvIGJlIHVu
Ym91bmQgYW5kIGRlc3Ryb3llZC4KIAkJICovCiAKLQkJaWYgKCEodG8tPmZsYWdzICYgVFRNX01F
TVRZUEVfRkxBR19GSVhFRCkpCisJCWlmICh0by0+dXNlX3R0KQogCQkJZ2hvc3Rfb2JqLT50dG0g
PSBOVUxMOwogCQllbHNlCiAJCQliby0+dHRtID0gTlVMTDsKQEAgLTczOCw3ICs3MzgsNyBAQCBp
bnQgdHRtX2JvX3BpcGVsaW5lX21vdmUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKIAkJ
ZG1hX3Jlc3ZfdW5sb2NrKCZnaG9zdF9vYmotPmJhc2UuX3Jlc3YpOwogCQl0dG1fYm9fcHV0KGdo
b3N0X29iaik7CiAKLQl9IGVsc2UgaWYgKGZyb20tPmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19G
SVhFRCkgeworCX0gZWxzZSBpZiAoIWZyb20tPnVzZV90dCkgewogCiAJCS8qKgogCQkgKiBCTyBk
b2Vzbid0IGhhdmUgYSBUVE0gd2UgbmVlZCB0byBiaW5kL3VuYmluZC4gSnVzdCByZW1lbWJlcgpA
QCAtNzY4LDcgKzc2OCw3IEBAIGludCB0dG1fYm9fcGlwZWxpbmVfbW92ZShzdHJ1Y3QgdHRtX2J1
ZmZlcl9vYmplY3QgKmJvLAogCQlpZiAocmV0KQogCQkJcmV0dXJuIHJldDsKIAotCQlpZiAodG8t
PmZsYWdzICYgVFRNX01FTVRZUEVfRkxBR19GSVhFRCkgeworCQlpZiAoIXRvLT51c2VfdHQpIHsK
IAkJCXR0bV90dF9kZXN0cm95KGJvLT50dG0pOwogCQkJYm8tPnR0bSA9IE5VTEw7CiAJCX0KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3R0bV9idWZmZXIuYyBiL2Ry
aXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3R0bV9idWZmZXIuYwppbmRleCBiMjc2MWE0YjQ5
OTIuLmQwMDc0OGVjYWYyMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdn
ZnhfdHRtX2J1ZmZlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3R0bV9i
dWZmZXIuYwpAQCAtNzQ3LDcgKzc0Nyw2IEBAIHN0YXRpYyBpbnQgdm13X2luaXRfbWVtX3R5cGUo
c3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsIHVpbnQzMl90IHR5cGUsCiAJY2FzZSBUVE1fUExf
VlJBTToKIAkJLyogIk9uLWNhcmQiIHZpZGVvIHJhbSAqLwogCQltYW4tPmZ1bmMgPSAmdm13X3Ro
cF9mdW5jOwotCQltYW4tPmZsYWdzID0gVFRNX01FTVRZUEVfRkxBR19GSVhFRDsKIAkJbWFuLT5h
dmFpbGFibGVfY2FjaGluZyA9IFRUTV9QTF9GTEFHX0NBQ0hFRDsKIAkJbWFuLT5kZWZhdWx0X2Nh
Y2hpbmcgPSBUVE1fUExfRkxBR19DQUNIRUQ7CiAJCWJyZWFrOwpAQCAtNzYxLDYgKzc2MCw4IEBA
IHN0YXRpYyBpbnQgdm13X2luaXRfbWVtX3R5cGUoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYs
IHVpbnQzMl90IHR5cGUsCiAJCW1hbi0+ZnVuYyA9ICZ2bXdfZ21yaWRfbWFuYWdlcl9mdW5jOwog
CQltYW4tPmF2YWlsYWJsZV9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfQ0FDSEVEOwogCQltYW4tPmRl
ZmF1bHRfY2FjaGluZyA9IFRUTV9QTF9GTEFHX0NBQ0hFRDsKKwkJLyogVE9ETzogVGhpcyBpcyBt
b3N0IGxpa2VseSBub3QgY29ycmVjdCAqLworCQltYW4tPnVzZV90dCA9IHRydWU7CiAJCWJyZWFr
OwogCWRlZmF1bHQ6CiAJCURSTV9FUlJPUigiVW5zdXBwb3J0ZWQgbWVtb3J5IHR5cGUgJXVcbiIs
ICh1bnNpZ25lZCl0eXBlKTsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJp
dmVyLmggYi9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2RyaXZlci5oCmluZGV4IDliMjUxODUzYWZl
Mi4uYWRhYzRjZDBiYTIzIDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2RyaXZl
ci5oCisrKyBiL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJpdmVyLmgKQEAgLTQ1LDggKzQ1LDYg
QEAKIAogI2RlZmluZSBUVE1fTUFYX0JPX1BSSU9SSVRZCTRVCiAKLSNkZWZpbmUgVFRNX01FTVRZ
UEVfRkxBR19GSVhFRCAgICAgICAgICgxIDw8IDApCS8qIEZpeGVkIChvbi1jYXJkKSBQQ0kgbWVt
b3J5ICovCi0KIHN0cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdlcjsKIAogc3RydWN0IHR0bV9tZW1f
dHlwZV9tYW5hZ2VyX2Z1bmMgewpAQCAtMTczLDcgKzE3MSw3IEBAIHN0cnVjdCB0dG1fbWVtX3R5
cGVfbWFuYWdlciB7CiAKIAlib29sIGhhc190eXBlOwogCWJvb2wgdXNlX3R5cGU7Ci0JdWludDMy
X3QgZmxhZ3M7CisJYm9vbCB1c2VfdHQ7CiAJdWludDY0X3Qgc2l6ZTsKIAl1aW50MzJfdCBhdmFp
bGFibGVfY2FjaGluZzsKIAl1aW50MzJfdCBkZWZhdWx0X2NhY2hpbmc7Ci0tIAoyLjE3LjEKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBt
YWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
