Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 71D201C93FC
	for <lists+dri-devel@lfdr.de>; Thu,  7 May 2020 17:11:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 293F66EA04;
	Thu,  7 May 2020 15:11:14 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x342.google.com (mail-wm1-x342.google.com
 [IPv6:2a00:1450:4864:20::342])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 219036EA00
 for <dri-devel@lists.freedesktop.org>; Thu,  7 May 2020 15:11:10 +0000 (UTC)
Received: by mail-wm1-x342.google.com with SMTP id x4so6961741wmj.1
 for <dri-devel@lists.freedesktop.org>; Thu, 07 May 2020 08:11:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=EBgUsUDVZKzVoCnSJqrIJzSDc1kKfs/5qcm4OZ0AEYA=;
 b=SB7HolKKIdnsG+632B3SsdN9qOYkemU1gfj6XNm8rTIWgPdpk3xn9HUw3emuR1ewt2
 41rsZKxo4gPP6MXCPUYk4P5cDl4ySRpyIYgg4vwpMdCX2Qcdmny+O2Z/U+U0omG05ak4
 X2/1KbfHH5dmNiHGFIMAO0j5856VtlJux8DoSlZZbAdyWK7Oi73nsF6X68+J7V/+pas/
 Jj1JknL5jL9PcjSjsXk4hmFmYOiLJJ4QVa4CRDBWEppHg8n92YVNr1en2iC8jca99Fyw
 AnDMj9UVypVGy7Oev5GPnT4xNQNXxUBPp9uMV3Sej8TgZ85fFHOgAYAkohRDy4g1mBTu
 g5xw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=EBgUsUDVZKzVoCnSJqrIJzSDc1kKfs/5qcm4OZ0AEYA=;
 b=SyioZLJwrA93hxX3tv/QeEqgK93miL+DdNe1dFkhGXOI0f+nNjpVrCyBuLQYOTzqFg
 BFHjwT0rYpbmVomShNbsRbuh7ULQuGhMyP6sr0hy8RPKZ1NyGPzAgIjp2euvKafGAkOV
 fmTf3s7gi4W+Qebs2peHFkZS/JxrnjPuAkhcysFJPkvIvXKl5jXjDGWcZ/XFxCosHOdS
 AGNXt7InS44k7zG2vl03m9XvEtxlOh90OvheuX0TsQ9ge6f9RXJze/YZGpPX8+gKXcUh
 7zip7a6hXYL8F6Hj0SpIdBRp5vzerZiUZ151CA1ZJJBqayv9K50D62upOLBUi5ST1ARe
 eYrg==
X-Gm-Message-State: AGi0PuZl9zNf6HmTDIioy5sHmHwyWnlJWgwcNU6CfUd/xA9I/M3DWIky
 bDK43YGACDzgVPT+ZMQ/HojKBQgp
X-Google-Smtp-Source: APiQypJIR9jYGtAl7nifsmV7rUuP7SqVOc44pxttv/rux6wJ5OGDiReKm2SqSeFa3X6SkgPoV3ph1Q==
X-Received: by 2002:a1c:bd89:: with SMTP id n131mr10647776wmf.3.1588864268277; 
 Thu, 07 May 2020 08:11:08 -0700 (PDT)
Received: from arch-x1c3.cbg.collabora.co.uk
 ([2a00:5f00:102:0:9665:9cff:feee:aa4d])
 by smtp.gmail.com with ESMTPSA id b66sm8704247wmh.12.2020.05.07.08.11.06
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 07 May 2020 08:11:07 -0700 (PDT)
From: Emil Velikov <emil.l.velikov@gmail.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 12/36] drm/amd: remove _unlocked suffix in
 drm_object_put_unlocked
Date: Thu,  7 May 2020 16:07:58 +0100
Message-Id: <20200507150822.114464-13-emil.l.velikov@gmail.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20200507150822.114464-1-emil.l.velikov@gmail.com>
References: <20200507150822.114464-1-emil.l.velikov@gmail.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Alex Deucher <alexander.deucher@amd.com>, emil.l.velikov@gmail.com,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogRW1pbCBWZWxpa292IDxlbWlsLnZlbGlrb3ZAY29sbGFib3JhLmNvbT4KClNwZWxsaW5n
IG91dCBfdW5sb2NrZWQgZm9yIGVhY2ggYW5kIGV2ZXJ5IGRyaXZlciBpcyBhIGFubm95aW5nLgpF
c3BlY2lhbGx5IGlmIHdlIGNvbnNpZGVyIGhvdyBtYW55IGRyaXZlcnMsIGRvIG5vdCBrbm93IChv
ciBuZWVkIHRvKQphYm91dCB0aGUgaG9ycm9yIHN0b3JpZXMgaW52b2x2aW5nIHN0cnVjdF9tdXRl
eC4KCkp1c3QgZHJvcCB0aGUgc3VmZml4LiBJdCBtYWtlcyB0aGUgQVBJIGNsZWFuZXIuCgpEb25l
IHZpYSB0aGUgZm9sbG93aW5nIHNjcmlwdDoKCl9fZnJvbT1kcm1fZ2VtX29iamVjdF9wdXRfdW5s
b2NrZWQKX190bz1kcm1fZ2VtX29iamVjdF9wdXQKZm9yIF9fZmlsZSBpbiAkKGdpdCBncmVwIC0t
bmFtZS1vbmx5ICRfX2Zyb20pOyBkbwogIHNlZCAtaSAgInMvJF9fZnJvbS8kX190by9nIiAkX19m
aWxlOwpkb25lCgpDYzogQWxleCBEZXVjaGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgpD
YzogIkNocmlzdGlhbiBLw7ZuaWciIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+CkNjOiAiRGF2
aWQgKENodW5NaW5nKSBaaG91IiA8RGF2aWQxLlpob3VAYW1kLmNvbT4KU2lnbmVkLW9mZi1ieTog
RW1pbCBWZWxpa292IDxlbWlsLnZlbGlrb3ZAY29sbGFib3JhLmNvbT4KLS0tCiBkcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYm9fbGlzdC5jIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5jICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2Rpc3BsYXkuYyB8ICA0ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmMgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2ZiLmMgICAgICB8ICA0ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9nZW0uYyAgICAgfCAyMCArKysrKysrKysrLS0tLS0tLS0tLQogZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvZGNlX3YxMF8wLmMgICAgICB8ICA2ICsrKy0tLQogZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvZGNlX3YxMV8wLmMgICAgICB8ICA2ICsrKy0tLQogZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvZGNlX3Y2XzAuYyAgICAgICB8ICA2ICsrKy0tLQogZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvZGNlX3Y4XzAuYyAgICAgICB8ICA2ICsrKy0tLQogMTAgZmlsZXMgY2hh
bmdlZCwgMjkgaW5zZXJ0aW9ucygrKSwgMjkgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2JvX2xpc3QuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9ib19saXN0LmMKaW5kZXggODViMDUxNWMwZmRjLi40MDUzNTk3
YjNhZjIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9ib19s
aXN0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2JvX2xpc3QuYwpA
QCAtMTAyLDcgKzEwMiw3IEBAIGludCBhbWRncHVfYm9fbGlzdF9jcmVhdGUoc3RydWN0IGFtZGdw
dV9kZXZpY2UgKmFkZXYsIHN0cnVjdCBkcm1fZmlsZSAqZmlscCwKIAkJfQogCiAJCWJvID0gYW1k
Z3B1X2JvX3JlZihnZW1fdG9fYW1kZ3B1X2JvKGdvYmopKTsKLQkJZHJtX2dlbV9vYmplY3RfcHV0
X3VubG9ja2VkKGdvYmopOworCQlkcm1fZ2VtX29iamVjdF9wdXQoZ29iaik7CiAKIAkJdXNlcm1t
ID0gYW1kZ3B1X3R0bV90dF9nZXRfdXNlcm1tKGJvLT50Ym8udHRtKTsKIAkJaWYgKHVzZXJtbSkg
ewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2NzLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYwppbmRleCBhZjkxNjI3YjE5YjAu
Ljc2ZWEyNDVmMjEwNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2NzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2NzLmMKQEAg
LTU3LDcgKzU3LDcgQEAgc3RhdGljIGludCBhbWRncHVfY3NfdXNlcl9mZW5jZV9jaHVuayhzdHJ1
Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCwKIAkvKiBPbmUgZm9yIFRUTSBhbmQgb25lIGZvciB0aGUg
Q1Mgam9iICovCiAJcC0+dWZfZW50cnkudHYubnVtX3NoYXJlZCA9IDI7CiAKLQlkcm1fZ2VtX29i
amVjdF9wdXRfdW5sb2NrZWQoZ29iaik7CisJZHJtX2dlbV9vYmplY3RfcHV0KGdvYmopOwogCiAJ
c2l6ZSA9IGFtZGdwdV9ib19zaXplKGJvKTsKIAlpZiAoc2l6ZSAhPSBQQUdFX1NJWkUgfHwgKGRh
dGEtPm9mZnNldCArIDgpID4gc2l6ZSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2Rpc3BsYXkuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9kaXNwbGF5LmMKaW5kZXggODRjZWUyN2NkN2VmLi5kZTliNjJlMjgwMGEgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kaXNwbGF5LmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rpc3BsYXkuYwpAQCAtNTc1LDE0ICs1NzUs
MTQgQEAgYW1kZ3B1X2Rpc3BsYXlfdXNlcl9mcmFtZWJ1ZmZlcl9jcmVhdGUoc3RydWN0IGRybV9k
ZXZpY2UgKmRldiwKIAogCWFtZGdwdV9mYiA9IGt6YWxsb2Moc2l6ZW9mKCphbWRncHVfZmIpLCBH
RlBfS0VSTkVMKTsKIAlpZiAoYW1kZ3B1X2ZiID09IE5VTEwpIHsKLQkJZHJtX2dlbV9vYmplY3Rf
cHV0X3VubG9ja2VkKG9iaik7CisJCWRybV9nZW1fb2JqZWN0X3B1dChvYmopOwogCQlyZXR1cm4g
RVJSX1BUUigtRU5PTUVNKTsKIAl9CiAKIAlyZXQgPSBhbWRncHVfZGlzcGxheV9mcmFtZWJ1ZmZl
cl9pbml0KGRldiwgYW1kZ3B1X2ZiLCBtb2RlX2NtZCwgb2JqKTsKIAlpZiAocmV0KSB7CiAJCWtm
cmVlKGFtZGdwdV9mYik7Ci0JCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZChvYmopOworCQlk
cm1fZ2VtX29iamVjdF9wdXQob2JqKTsKIAkJcmV0dXJuIEVSUl9QVFIocmV0KTsKIAl9CiAKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5jCmluZGV4IDY1MmM1N2Ez
Yjg0Ny4uNDNkOGVkN2RiZDAwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfZG1hX2J1Zi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9kbWFfYnVmLmMKQEAgLTU4Nyw3ICs1ODcsNyBAQCBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmFt
ZGdwdV9nZW1fcHJpbWVfaW1wb3J0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJYXR0YWNoID0g
ZG1hX2J1Zl9keW5hbWljX2F0dGFjaChkbWFfYnVmLCBkZXYtPmRldiwKIAkJCQkJJmFtZGdwdV9k
bWFfYnVmX2F0dGFjaF9vcHMsIG9iaik7CiAJaWYgKElTX0VSUihhdHRhY2gpKSB7Ci0JCWRybV9n
ZW1fb2JqZWN0X3B1dF91bmxvY2tlZChvYmopOworCQlkcm1fZ2VtX29iamVjdF9wdXQob2JqKTsK
IAkJcmV0dXJuIEVSUl9DQVNUKGF0dGFjaCk7CiAJfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmIuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9mYi5jCmluZGV4IDlhZTdiNjFmNjk2YS4uY2E1ZGRlNGVjNDdkIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmIuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmIuYwpAQCAtMTE0LDcgKzExNCw3IEBAIHN0YXRpYyB2
b2lkIGFtZGdwdWZiX2Rlc3Ryb3lfcGlubmVkX29iamVjdChzdHJ1Y3QgZHJtX2dlbV9vYmplY3Qg
KmdvYmopCiAJCWFtZGdwdV9ib191bnBpbihhYm8pOwogCQlhbWRncHVfYm9fdW5yZXNlcnZlKGFi
byk7CiAJfQotCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZChnb2JqKTsKKwlkcm1fZ2VtX29i
amVjdF9wdXQoZ29iaik7CiB9CiAKIHN0YXRpYyBpbnQgYW1kZ3B1ZmJfY3JlYXRlX3Bpbm5lZF9v
YmplY3Qoc3RydWN0IGFtZGdwdV9mYmRldiAqcmZiZGV2LApAQCAtMjc5LDcgKzI3OSw3IEBAIHN0
YXRpYyBpbnQgYW1kZ3B1ZmJfY3JlYXRlKHN0cnVjdCBkcm1fZmJfaGVscGVyICpoZWxwZXIsCiAK
IAl9CiAJaWYgKGZiICYmIHJldCkgewotCQlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQoZ29i
aik7CisJCWRybV9nZW1fb2JqZWN0X3B1dChnb2JqKTsKIAkJZHJtX2ZyYW1lYnVmZmVyX3VucmVn
aXN0ZXJfcHJpdmF0ZShmYik7CiAJCWRybV9mcmFtZWJ1ZmZlcl9jbGVhbnVwKGZiKTsKIAkJa2Zy
ZWUoZmIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dl
bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dlbS5jCmluZGV4IGU0MjYw
ODExNWM5OS4uOGMwNTk3ZjMwNmVjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfZ2VtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2dlbS5jCkBAIC0xMDYsNyArMTA2LDcgQEAgdm9pZCBhbWRncHVfZ2VtX2ZvcmNlX3JlbGVhc2Uo
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCiAJCXNwaW5fbG9jaygmZmlsZS0+dGFibGVfbG9j
ayk7CiAJCWlkcl9mb3JfZWFjaF9lbnRyeSgmZmlsZS0+b2JqZWN0X2lkciwgZ29iaiwgaGFuZGxl
KSB7CiAJCQlXQVJOX09OQ0UoMSwgIkFuZCBhbHNvIGFjdGl2ZSBhbGxvY2F0aW9ucyFcbiIpOwot
CQkJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKGdvYmopOworCQkJZHJtX2dlbV9vYmplY3Rf
cHV0KGdvYmopOwogCQl9CiAJCWlkcl9kZXN0cm95KCZmaWxlLT5vYmplY3RfaWRyKTsKIAkJc3Bp
bl91bmxvY2soJmZpbGUtPnRhYmxlX2xvY2spOwpAQCAtMjcyLDcgKzI3Miw3IEBAIGludCBhbWRn
cHVfZ2VtX2NyZWF0ZV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAog
CiAJciA9IGRybV9nZW1faGFuZGxlX2NyZWF0ZShmaWxwLCBnb2JqLCAmaGFuZGxlKTsKIAkvKiBk
cm9wIHJlZmVyZW5jZSBmcm9tIGFsbG9jYXRlIC0gaGFuZGxlIGhvbGRzIGl0IG5vdyAqLwotCWRy
bV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZChnb2JqKTsKKwlkcm1fZ2VtX29iamVjdF9wdXQoZ29i
aik7CiAJaWYgKHIpCiAJCXJldHVybiByOwogCkBAIC0zNTYsNyArMzU2LDcgQEAgaW50IGFtZGdw
dV9nZW1fdXNlcnB0cl9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAog
CQlhbWRncHVfdHRtX3R0X2dldF91c2VyX3BhZ2VzX2RvbmUoYm8tPnRiby50dG0pOwogCiByZWxl
YXNlX29iamVjdDoKLQlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQoZ29iaik7CisJZHJtX2dl
bV9vYmplY3RfcHV0KGdvYmopOwogCiAJcmV0dXJuIHI7CiB9CkBAIC0zNzUsMTEgKzM3NSwxMSBA
QCBpbnQgYW1kZ3B1X21vZGVfZHVtYl9tbWFwKHN0cnVjdCBkcm1fZmlsZSAqZmlscCwKIAlyb2Jq
ID0gZ2VtX3RvX2FtZGdwdV9ibyhnb2JqKTsKIAlpZiAoYW1kZ3B1X3R0bV90dF9nZXRfdXNlcm1t
KHJvYmotPnRiby50dG0pIHx8CiAJICAgIChyb2JqLT5mbGFncyAmIEFNREdQVV9HRU1fQ1JFQVRF
X05PX0NQVV9BQ0NFU1MpKSB7Ci0JCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZChnb2JqKTsK
KwkJZHJtX2dlbV9vYmplY3RfcHV0KGdvYmopOwogCQlyZXR1cm4gLUVQRVJNOwogCX0KIAkqb2Zm
c2V0X3AgPSBhbWRncHVfYm9fbW1hcF9vZmZzZXQocm9iaik7Ci0JZHJtX2dlbV9vYmplY3RfcHV0
X3VubG9ja2VkKGdvYmopOworCWRybV9nZW1fb2JqZWN0X3B1dChnb2JqKTsKIAlyZXR1cm4gMDsK
IH0KIApAQCAtNDQ5LDcgKzQ0OSw3IEBAIGludCBhbWRncHVfZ2VtX3dhaXRfaWRsZV9pb2N0bChz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAogCX0gZWxzZQogCQlyID0gcmV0Owog
Ci0JZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKGdvYmopOworCWRybV9nZW1fb2JqZWN0X3B1
dChnb2JqKTsKIAlyZXR1cm4gcjsKIH0KIApAQCAtNDkyLDcgKzQ5Miw3IEBAIGludCBhbWRncHVf
Z2VtX21ldGFkYXRhX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiB1
bnJlc2VydmU6CiAJYW1kZ3B1X2JvX3VucmVzZXJ2ZShyb2JqKTsKIG91dDoKLQlkcm1fZ2VtX29i
amVjdF9wdXRfdW5sb2NrZWQoZ29iaik7CisJZHJtX2dlbV9vYmplY3RfcHV0KGdvYmopOwogCXJl
dHVybiByOwogfQogCkBAIC02OTEsNyArNjkxLDcgQEAgaW50IGFtZGdwdV9nZW1fdmFfaW9jdGwo
c3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKIAl0dG1fZXVfYmFja29mZl9yZXNl
cnZhdGlvbigmdGlja2V0LCAmbGlzdCk7CiAKIGVycm9yX3VucmVmOgotCWRybV9nZW1fb2JqZWN0
X3B1dF91bmxvY2tlZChnb2JqKTsKKwlkcm1fZ2VtX29iamVjdF9wdXQoZ29iaik7CiAJcmV0dXJu
IHI7CiB9CiAKQEAgLTc2Nyw3ICs3NjcsNyBAQCBpbnQgYW1kZ3B1X2dlbV9vcF9pb2N0bChzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAogCX0KIAogb3V0OgotCWRybV9nZW1fb2Jq
ZWN0X3B1dF91bmxvY2tlZChnb2JqKTsKKwlkcm1fZ2VtX29iamVjdF9wdXQoZ29iaik7CiAJcmV0
dXJuIHI7CiB9CiAKQEAgLTgwNCw3ICs4MDQsNyBAQCBpbnQgYW1kZ3B1X21vZGVfZHVtYl9jcmVh
dGUoc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYsCiAKIAlyID0gZHJtX2dlbV9oYW5kbGVfY3Jl
YXRlKGZpbGVfcHJpdiwgZ29iaiwgJmhhbmRsZSk7CiAJLyogZHJvcCByZWZlcmVuY2UgZnJvbSBh
bGxvY2F0ZSAtIGhhbmRsZSBob2xkcyBpdCBub3cgKi8KLQlkcm1fZ2VtX29iamVjdF9wdXRfdW5s
b2NrZWQoZ29iaik7CisJZHJtX2dlbV9vYmplY3RfcHV0KGdvYmopOwogCWlmIChyKSB7CiAJCXJl
dHVybiByOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RjZV92
MTBfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3YxMF8wLmMKaW5kZXggMjUx
MmU3ZWJmZWRmLi40N2E2ZTNkMGFhOTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2RjZV92MTBfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RjZV92
MTBfMC5jCkBAIC0yNDA0LDcgKzI0MDQsNyBAQCBzdGF0aWMgaW50IGRjZV92MTBfMF9jcnRjX2N1
cnNvcl9zZXQyKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAlhb2JqID0gZ2VtX3RvX2FtZGdwdV9i
byhvYmopOwogCXJldCA9IGFtZGdwdV9ib19yZXNlcnZlKGFvYmosIGZhbHNlKTsKIAlpZiAocmV0
ICE9IDApIHsKLQkJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKG9iaik7CisJCWRybV9nZW1f
b2JqZWN0X3B1dChvYmopOwogCQlyZXR1cm4gcmV0OwogCX0KIApAQCAtMjQxMiw3ICsyNDEyLDcg
QEAgc3RhdGljIGludCBkY2VfdjEwXzBfY3J0Y19jdXJzb3Jfc2V0MihzdHJ1Y3QgZHJtX2NydGMg
KmNydGMsCiAJYW1kZ3B1X2JvX3VucmVzZXJ2ZShhb2JqKTsKIAlpZiAocmV0KSB7CiAJCURSTV9F
UlJPUigiRmFpbGVkIHRvIHBpbiBuZXcgY3Vyc29yIEJPICglZClcbiIsIHJldCk7Ci0JCWRybV9n
ZW1fb2JqZWN0X3B1dF91bmxvY2tlZChvYmopOworCQlkcm1fZ2VtX29iamVjdF9wdXQob2JqKTsK
IAkJcmV0dXJuIHJldDsKIAl9CiAJYW1kZ3B1X2NydGMtPmN1cnNvcl9hZGRyID0gYW1kZ3B1X2Jv
X2dwdV9vZmZzZXQoYW9iaik7CkBAIC0yNDQ3LDcgKzI0NDcsNyBAQCBzdGF0aWMgaW50IGRjZV92
MTBfMF9jcnRjX2N1cnNvcl9zZXQyKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAkJCWFtZGdwdV9i
b191bnBpbihhb2JqKTsKIAkJCWFtZGdwdV9ib191bnJlc2VydmUoYW9iaik7CiAJCX0KLQkJZHJt
X2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKGFtZGdwdV9jcnRjLT5jdXJzb3JfYm8pOworCQlkcm1f
Z2VtX29iamVjdF9wdXQoYW1kZ3B1X2NydGMtPmN1cnNvcl9ibyk7CiAJfQogCiAJYW1kZ3B1X2Ny
dGMtPmN1cnNvcl9ibyA9IG9iajsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2RjZV92MTFfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3YxMV8wLmMK
aW5kZXggMGRkZTIyZGI5ODQ4Li43ZDE2ZmI1YTk0ODIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2RjZV92MTFfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2RjZV92MTFfMC5jCkBAIC0yNDgzLDcgKzI0ODMsNyBAQCBzdGF0aWMgaW50IGRjZV92MTFf
MF9jcnRjX2N1cnNvcl9zZXQyKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAlhb2JqID0gZ2VtX3Rv
X2FtZGdwdV9ibyhvYmopOwogCXJldCA9IGFtZGdwdV9ib19yZXNlcnZlKGFvYmosIGZhbHNlKTsK
IAlpZiAocmV0ICE9IDApIHsKLQkJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKG9iaik7CisJ
CWRybV9nZW1fb2JqZWN0X3B1dChvYmopOwogCQlyZXR1cm4gcmV0OwogCX0KIApAQCAtMjQ5MSw3
ICsyNDkxLDcgQEAgc3RhdGljIGludCBkY2VfdjExXzBfY3J0Y19jdXJzb3Jfc2V0MihzdHJ1Y3Qg
ZHJtX2NydGMgKmNydGMsCiAJYW1kZ3B1X2JvX3VucmVzZXJ2ZShhb2JqKTsKIAlpZiAocmV0KSB7
CiAJCURSTV9FUlJPUigiRmFpbGVkIHRvIHBpbiBuZXcgY3Vyc29yIEJPICglZClcbiIsIHJldCk7
Ci0JCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZChvYmopOworCQlkcm1fZ2VtX29iamVjdF9w
dXQob2JqKTsKIAkJcmV0dXJuIHJldDsKIAl9CiAJYW1kZ3B1X2NydGMtPmN1cnNvcl9hZGRyID0g
YW1kZ3B1X2JvX2dwdV9vZmZzZXQoYW9iaik7CkBAIC0yNTI2LDcgKzI1MjYsNyBAQCBzdGF0aWMg
aW50IGRjZV92MTFfMF9jcnRjX2N1cnNvcl9zZXQyKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAkJ
CWFtZGdwdV9ib191bnBpbihhb2JqKTsKIAkJCWFtZGdwdV9ib191bnJlc2VydmUoYW9iaik7CiAJ
CX0KLQkJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKGFtZGdwdV9jcnRjLT5jdXJzb3JfYm8p
OworCQlkcm1fZ2VtX29iamVjdF9wdXQoYW1kZ3B1X2NydGMtPmN1cnNvcl9ibyk7CiAJfQogCiAJ
YW1kZ3B1X2NydGMtPmN1cnNvcl9ibyA9IG9iajsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2RjZV92Nl8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kY2Vf
djZfMC5jCmluZGV4IDg0MjE5NTM0YmQzOC4uMWFiMzNhYTM5ODBlIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kY2VfdjZfMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2RjZV92Nl8wLmMKQEAgLTIyOTksNyArMjI5OSw3IEBAIHN0YXRpYyBpbnQgZGNl
X3Y2XzBfY3J0Y19jdXJzb3Jfc2V0MihzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCiAJYW9iaiA9IGdl
bV90b19hbWRncHVfYm8ob2JqKTsKIAlyZXQgPSBhbWRncHVfYm9fcmVzZXJ2ZShhb2JqLCBmYWxz
ZSk7CiAJaWYgKHJldCAhPSAwKSB7Ci0JCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZChvYmop
OworCQlkcm1fZ2VtX29iamVjdF9wdXQob2JqKTsKIAkJcmV0dXJuIHJldDsKIAl9CiAKQEAgLTIz
MDcsNyArMjMwNyw3IEBAIHN0YXRpYyBpbnQgZGNlX3Y2XzBfY3J0Y19jdXJzb3Jfc2V0MihzdHJ1
Y3QgZHJtX2NydGMgKmNydGMsCiAJYW1kZ3B1X2JvX3VucmVzZXJ2ZShhb2JqKTsKIAlpZiAocmV0
KSB7CiAJCURSTV9FUlJPUigiRmFpbGVkIHRvIHBpbiBuZXcgY3Vyc29yIEJPICglZClcbiIsIHJl
dCk7Ci0JCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZChvYmopOworCQlkcm1fZ2VtX29iamVj
dF9wdXQob2JqKTsKIAkJcmV0dXJuIHJldDsKIAl9CiAJYW1kZ3B1X2NydGMtPmN1cnNvcl9hZGRy
ID0gYW1kZ3B1X2JvX2dwdV9vZmZzZXQoYW9iaik7CkBAIC0yMzQyLDcgKzIzNDIsNyBAQCBzdGF0
aWMgaW50IGRjZV92Nl8wX2NydGNfY3Vyc29yX3NldDIoc3RydWN0IGRybV9jcnRjICpjcnRjLAog
CQkJYW1kZ3B1X2JvX3VucGluKGFvYmopOwogCQkJYW1kZ3B1X2JvX3VucmVzZXJ2ZShhb2JqKTsK
IAkJfQotCQlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQoYW1kZ3B1X2NydGMtPmN1cnNvcl9i
byk7CisJCWRybV9nZW1fb2JqZWN0X3B1dChhbWRncHVfY3J0Yy0+Y3Vyc29yX2JvKTsKIAl9CiAK
IAlhbWRncHVfY3J0Yy0+Y3Vyc29yX2JvID0gb2JqOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvZGNlX3Y4XzAuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Rj
ZV92OF8wLmMKaW5kZXggM2E2NDA3MDJkN2QxLi44YThmMWFhNDkyMTIgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2RjZV92OF8wLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvZGNlX3Y4XzAuYwpAQCAtMjMwNSw3ICsyMzA1LDcgQEAgc3RhdGljIGludCBk
Y2VfdjhfMF9jcnRjX2N1cnNvcl9zZXQyKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAlhb2JqID0g
Z2VtX3RvX2FtZGdwdV9ibyhvYmopOwogCXJldCA9IGFtZGdwdV9ib19yZXNlcnZlKGFvYmosIGZh
bHNlKTsKIAlpZiAocmV0ICE9IDApIHsKLQkJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKG9i
aik7CisJCWRybV9nZW1fb2JqZWN0X3B1dChvYmopOwogCQlyZXR1cm4gcmV0OwogCX0KIApAQCAt
MjMxMyw3ICsyMzEzLDcgQEAgc3RhdGljIGludCBkY2VfdjhfMF9jcnRjX2N1cnNvcl9zZXQyKHN0
cnVjdCBkcm1fY3J0YyAqY3J0YywKIAlhbWRncHVfYm9fdW5yZXNlcnZlKGFvYmopOwogCWlmIChy
ZXQpIHsKIAkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gcGluIG5ldyBjdXJzb3IgQk8gKCVkKVxuIiwg
cmV0KTsKLQkJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKG9iaik7CisJCWRybV9nZW1fb2Jq
ZWN0X3B1dChvYmopOwogCQlyZXR1cm4gcmV0OwogCX0KIAlhbWRncHVfY3J0Yy0+Y3Vyc29yX2Fk
ZHIgPSBhbWRncHVfYm9fZ3B1X29mZnNldChhb2JqKTsKQEAgLTIzNDgsNyArMjM0OCw3IEBAIHN0
YXRpYyBpbnQgZGNlX3Y4XzBfY3J0Y19jdXJzb3Jfc2V0MihzdHJ1Y3QgZHJtX2NydGMgKmNydGMs
CiAJCQlhbWRncHVfYm9fdW5waW4oYW9iaik7CiAJCQlhbWRncHVfYm9fdW5yZXNlcnZlKGFvYmop
OwogCQl9Ci0JCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZChhbWRncHVfY3J0Yy0+Y3Vyc29y
X2JvKTsKKwkJZHJtX2dlbV9vYmplY3RfcHV0KGFtZGdwdV9jcnRjLT5jdXJzb3JfYm8pOwogCX0K
IAogCWFtZGdwdV9jcnRjLT5jdXJzb3JfYm8gPSBvYmo7Ci0tIAoyLjI1LjEKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
