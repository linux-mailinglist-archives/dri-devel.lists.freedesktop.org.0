Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 91C2228113E
	for <lists+dri-devel@lfdr.de>; Fri,  2 Oct 2020 13:31:30 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6A93D6E92F;
	Fri,  2 Oct 2020 11:31:26 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x542.google.com (mail-ed1-x542.google.com
 [IPv6:2a00:1450:4864:20::542])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8F45B6E92F
 for <dri-devel@lists.freedesktop.org>; Fri,  2 Oct 2020 11:31:24 +0000 (UTC)
Received: by mail-ed1-x542.google.com with SMTP id i1so1307195edv.2
 for <dri-devel@lists.freedesktop.org>; Fri, 02 Oct 2020 04:31:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=o9qeLVoxXfCUL+nhJG2YdyKa/elCoZRUPcWSP1xiOII=;
 b=fNYHFzDtjeYWw/AxRwygwS718NPn9e7dSk3wpNhhwPRvRwEiAl39lVhPMMkviVwn5I
 xf6FjnsVl7+K77E540qA3gXyom1saFkSrU0SCUW67+0RycJBGfeLcb6MF0KlgzxOA5Eq
 TEfXUiMNJGvQU5A5Dth1dO0+TyhrwnfLHQKzMts2+2D5UcursYndMt2uUaABtbvbdDHf
 EYB72/MLU4mFT8ofNZghlmW7OzBohEF9UiU56H4IJPtsEjhkQ+KD1QPr80c45pK24Hrx
 RNQgXehLZG9d9EWgrE7F3RSseZdoeh16wfWEA4s5wsw8OI98E4jlIzabo4rRFMjaGAoe
 eUCQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=o9qeLVoxXfCUL+nhJG2YdyKa/elCoZRUPcWSP1xiOII=;
 b=mvRZTNvEqG5g9s+ELsWxNWermCYqVu4JroISaVxEbMLt337xrNgHI4rVvYqebz6o6A
 8F0zYEcNhxYmIRzI8JmjMbcv4Ku1OAT2+7ERVEjXnjWKOBAl9+MxyP2lEnLQwg0b3PfT
 Ids7irJidrtjpDyeLi9AHzb4eakEnypfBoneZrw66qbjnI3Ukmlo75GfVoewc4HPGoGA
 lu/Gmuz9B8psPL9UqWRzBLEn5g5YNAmQuTWa4GItE3PeUYNJ24MLlTeWUJ2pA791Ck21
 FybJ40lwzNE4hzen65FwN/CZSDqDhlrWkrrATawWd4rfQcyDrUirThlX9PuMVgWHbZ4K
 tZnQ==
X-Gm-Message-State: AOAM533RviVI+OfKWrfsSSlimZI8pX9iz9a/vcuSuVP43sMBBVqvgHyp
 SPqhiHKKIdZ09FeYFzcNVfUVin5YjvI=
X-Google-Smtp-Source: ABdhPJzNKpCot10Ze/qtN+1Jh+db5jME54PU0sVUZCIjRCo1D7X9g4BJSKZqAAp387SRMAD9+u6ENQ==
X-Received: by 2002:a50:e40b:: with SMTP id d11mr1807849edm.198.1601638282633; 
 Fri, 02 Oct 2020 04:31:22 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:b0ce:8a95:8e6:b4f4])
 by smtp.gmail.com with ESMTPSA id 59sm971368ede.73.2020.10.02.04.31.21
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 02 Oct 2020 04:31:22 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org, ray.huang@amd.com, airlied@gmail.com,
 daniel@ffwll.ch
Subject: [PATCH 1/2] drm/ttm: remove need_dma32 flag
Date: Fri,  2 Oct 2020 13:31:20 +0200
Message-Id: <20201002113121.47823-1-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RHJpdmVycyBjYW4ganVzdCBzZXQgdGhlIERNQTMyIGZsYWcgaW4gdGhlaXIgVFQgY3JlYXRpb24g
ZnVuY3Rpb24uCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29l
bmlnQGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5j
IHwgNyArKysrKy0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV92cmFtX2hlbHBlci5jICAgfCA0
ICsrLS0KIGRyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYyAgICB8IDYgKysrKyst
CiBkcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3R0bS5jICAgfCAzICstLQogZHJpdmVy
cy9ncHUvZHJtL3F4bC9xeGxfdHRtLmMgICAgICAgICAgIHwgMyArLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9yYWRlb24vcmFkZW9uX3R0bS5jICAgICB8IDcgKysrKystLQogZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fZGV2aWNlLmMgICAgICAgIHwgNCArLS0tCiBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90
dC5jICAgICAgICAgICAgfCAzIC0tLQogZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfZHJ2
LmMgICAgIHwgMyArLS0KIGluY2x1ZGUvZHJtL3R0bS90dG1fZGV2aWNlLmggICAgICAgICAgICB8
IDQgKy0tLQogMTAgZmlsZXMgY2hhbmdlZCwgMjIgaW5zZXJ0aW9ucygrKSwgMjIgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5j
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jCmluZGV4IDA4OGRjZmNl
NmJjYS4uYzVmMmI0OTcxZWY3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9hbWRncHVfdHRtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0
bS5jCkBAIC0xMjg3LDYgKzEyODcsNyBAQCBzdGF0aWMgdm9pZCBhbWRncHVfdHRtX2JhY2tlbmRf
ZGVzdHJveShzdHJ1Y3QgdHRtX2RldmljZSAqYmRldiwKIHN0YXRpYyBzdHJ1Y3QgdHRtX3R0ICph
bWRncHVfdHRtX3R0X2NyZWF0ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAogCQkJCQkg
ICB1aW50MzJfdCBwYWdlX2ZsYWdzKQogeworCXN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0g
YW1kZ3B1X3R0bV9hZGV2KGJvLT5iZGV2KTsKIAlzdHJ1Y3QgYW1kZ3B1X2JvICphYm8gPSB0dG1f
dG9fYW1kZ3B1X2JvKGJvKTsKIAlzdHJ1Y3QgYW1kZ3B1X3R0bV90dCAqZ3R0OwogCWVudW0gdHRt
X2NhY2hpbmcgY2FjaGluZzsKQEAgLTEyOTcsNiArMTI5OCw5IEBAIHN0YXRpYyBzdHJ1Y3QgdHRt
X3R0ICphbWRncHVfdHRtX3R0X2NyZWF0ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAog
CX0KIAlndHQtPmdvYmogPSAmYm8tPmJhc2U7CiAKKwlpZiAoZG1hX2FkZHJlc3NpbmdfbGltaXRl
ZChhZGV2LT5kZXYpKQorCQlwYWdlX2ZsYWdzIHw9IFRUTV9QQUdFX0ZMQUdfRE1BMzI7CisKIAlp
ZiAoYWJvLT5mbGFncyAmIEFNREdQVV9HRU1fQ1JFQVRFX0NQVV9HVFRfVVNXQykKIAkJY2FjaGlu
ZyA9IHR0bV93cml0ZV9jb21iaW5lZDsKIAllbHNlCkBAIC0xODg0LDggKzE4ODgsNyBAQCBpbnQg
YW1kZ3B1X3R0bV9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQogCXIgPSB0dG1fZGV2
aWNlX2luaXQoJmFkZXYtPm1tYW4uYmRldiwKIAkJCSAgICAgICAmYW1kZ3B1X2JvX2RyaXZlciwK
IAkJCSAgICAgICBhZGV2X3RvX2RybShhZGV2KS0+YW5vbl9pbm9kZS0+aV9tYXBwaW5nLAotCQkJ
ICAgICAgIGFkZXZfdG9fZHJtKGFkZXYpLT52bWFfb2Zmc2V0X21hbmFnZXIsCi0JCQkgICAgICAg
ZG1hX2FkZHJlc3NpbmdfbGltaXRlZChhZGV2LT5kZXYpKTsKKwkJCSAgICAgICBhZGV2X3RvX2Ry
bShhZGV2KS0+dm1hX29mZnNldF9tYW5hZ2VyKTsKIAlpZiAocikgewogCQlEUk1fRVJST1IoImZh
aWxlZCBpbml0aWFsaXppbmcgYnVmZmVyIG9iamVjdCBkcml2ZXIoJWQpLlxuIiwgcik7CiAJCXJl
dHVybiByOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIu
YyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmMKaW5kZXggZjdhMDI3MTIz
OTc1Li40YmE5ZjE5ZGFjOTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3Zy
YW1faGVscGVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYwpA
QCAtOTA3LDYgKzkwNyw3IEBAIHN0YXRpYyBzdHJ1Y3QgdHRtX3R0ICpib19kcml2ZXJfdHRtX3R0
X2NyZWF0ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAogCWlmICghdHQpCiAJCXJldHVy
biBOVUxMOwogCisJcGFnZV9mbGFncyB8PSBUVE1fUEFHRV9GTEFHX0RNQTMyOwogCXJldCA9IHR0
bV90dF9pbml0KHR0LCBibywgcGFnZV9mbGFncywgdHRtX2NhY2hlZCk7CiAJaWYgKHJldCA8IDAp
CiAJCWdvdG8gZXJyX3R0bV90dF9pbml0OwpAQCAtMTAxOSw4ICsxMDIwLDcgQEAgc3RhdGljIGlu
dCBkcm1fdnJhbV9tbV9pbml0KHN0cnVjdCBkcm1fdnJhbV9tbSAqdm1tLCBzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2LAogCiAJcmV0ID0gdHRtX2RldmljZV9pbml0KCZ2bW0tPmJkZXYsICZib19kcml2
ZXIsCiAJCQkJIGRldi0+YW5vbl9pbm9kZS0+aV9tYXBwaW5nLAotCQkJCSBkZXYtPnZtYV9vZmZz
ZXRfbWFuYWdlciwKLQkJCQkgdHJ1ZSk7CisJCQkJIGRldi0+dm1hX29mZnNldF9tYW5hZ2VyKTsK
IAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
bm91dmVhdS9ub3V2ZWF1X2JvLmMgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2Jv
LmMKaW5kZXggOTEyYmMzMjA0YzRlLi5iZjEzMTUyZDMyODggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVh
dS9ub3V2ZWF1X2JvLmMKQEAgLTY2Miw5ICs2NjIsMTMgQEAgbm91dmVhdV9ib193cjMyKHN0cnVj
dCBub3V2ZWF1X2JvICpudmJvLCB1bnNpZ25lZCBpbmRleCwgdTMyIHZhbCkKIHN0YXRpYyBzdHJ1
Y3QgdHRtX3R0ICoKIG5vdXZlYXVfdHRtX3R0X2NyZWF0ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmpl
Y3QgKmJvLCB1aW50MzJfdCBwYWdlX2ZsYWdzKQogewotI2lmIElTX0VOQUJMRUQoQ09ORklHX0FH
UCkKIAlzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRybSA9IG5vdXZlYXVfYmRldihiby0+YmRldik7CiAK
KwlpZiAoZHJtLT5jbGllbnQubW11LmRtYWJpdHMgPD0gMzIpCisJCXBhZ2VfZmxhZ3MgfD0gVFRN
X1BBR0VfRkxBR19ETUEzMjsKKworI2lmIElTX0VOQUJMRUQoQ09ORklHX0FHUCkKKwogCWlmIChk
cm0tPmFncC5icmlkZ2UpIHsKIAkJcmV0dXJuIHR0bV9hZ3BfdHRfY3JlYXRlKGJvLCBkcm0tPmFn
cC5icmlkZ2UsIHBhZ2VfZmxhZ3MpOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9u
b3V2ZWF1L25vdXZlYXVfdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3R0
bS5jCmluZGV4IDJmYjEyN2RhMDIwOC4uNTVmMTRjNmE0ZGQ1IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3R0bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2
ZWF1L25vdXZlYXVfdHRtLmMKQEAgLTMxOCw4ICszMTgsNyBAQCBub3V2ZWF1X3R0bV9pbml0KHN0
cnVjdCBub3V2ZWF1X2RybSAqZHJtKQogCXJldCA9IHR0bV9kZXZpY2VfaW5pdCgmZHJtLT50dG0u
YmRldiwKIAkJCQkgICZub3V2ZWF1X2JvX2RyaXZlciwKIAkJCQkgIGRldi0+YW5vbl9pbm9kZS0+
aV9tYXBwaW5nLAotCQkJCSAgZGV2LT52bWFfb2Zmc2V0X21hbmFnZXIsCi0JCQkJICBkcm0tPmNs
aWVudC5tbXUuZG1hYml0cyA8PSAzMiA/IHRydWUgOiBmYWxzZSk7CisJCQkJICBkZXYtPnZtYV9v
ZmZzZXRfbWFuYWdlcik7CiAJaWYgKHJldCkgewogCQlOVl9FUlJPUihkcm0sICJlcnJvciBpbml0
aWFsaXNpbmcgYm8gZHJpdmVyLCAlZFxuIiwgcmV0KTsKIAkJcmV0dXJuIHJldDsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3R0bS5jIGIvZHJpdmVycy9ncHUvZHJtL3F4bC9x
eGxfdHRtLmMKaW5kZXggOWI3MDdhZjdkZmQwLi4yMjAxOTE0MWEwOWEgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9xeGwvcXhsX3R0bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhs
X3R0bS5jCkBAIC0yMTcsOCArMjE3LDcgQEAgaW50IHF4bF90dG1faW5pdChzdHJ1Y3QgcXhsX2Rl
dmljZSAqcWRldikKIAlyID0gdHRtX2RldmljZV9pbml0KCZxZGV2LT5tbWFuLmJkZXYsCiAJCQkg
ICAgICAgJnF4bF9ib19kcml2ZXIsCiAJCQkgICAgICAgcWRldi0+ZGRldi5hbm9uX2lub2RlLT5p
X21hcHBpbmcsCi0JCQkgICAgICAgcWRldi0+ZGRldi52bWFfb2Zmc2V0X21hbmFnZXIsCi0JCQkg
ICAgICAgZmFsc2UpOworCQkJICAgICAgIHFkZXYtPmRkZXYudm1hX29mZnNldF9tYW5hZ2VyKTsK
IAlpZiAocikgewogCQlEUk1fRVJST1IoImZhaWxlZCBpbml0aWFsaXppbmcgYnVmZmVyIG9iamVj
dCBkcml2ZXIoJWQpLlxuIiwgcik7CiAJCXJldHVybiByOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVv
bl90dG0uYwppbmRleCAzODM1Yzk0NTdjMDYuLmY4ZTBiZjc1Y2Q3ZCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3Jh
ZGVvbi9yYWRlb25fdHRtLmMKQEAgLTU4OCw2ICs1ODgsMTAgQEAgc3RhdGljIHN0cnVjdCB0dG1f
dHQgKnJhZGVvbl90dG1fdHRfY3JlYXRlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJ
cmJvID0gY29udGFpbmVyX29mKGJvLCBzdHJ1Y3QgcmFkZW9uX2JvLCB0Ym8pOwogCiAJcmRldiA9
IHJhZGVvbl9nZXRfcmRldihiby0+YmRldik7CisKKwlpZiAoZG1hX2FkZHJlc3NpbmdfbGltaXRl
ZCgmcmRldi0+cGRldi0+ZGV2KSkKKwkJcGFnZV9mbGFncyB8PSBUVE1fUEFHRV9GTEFHX0RNQTMy
OworCiAjaWYgSVNfRU5BQkxFRChDT05GSUdfQUdQKQogCWlmIChyZGV2LT5mbGFncyAmIFJBREVP
Tl9JU19BR1ApIHsKIAkJcmV0dXJuIHR0bV9hZ3BfdHRfY3JlYXRlKGJvLCByZGV2LT5kZGV2LT5h
Z3AtPmJyaWRnZSwKQEAgLTgxOCw4ICs4MjIsNyBAQCBpbnQgcmFkZW9uX3R0bV9pbml0KHN0cnVj
dCByYWRlb25fZGV2aWNlICpyZGV2KQogCXIgPSB0dG1fZGV2aWNlX2luaXQoJnJkZXYtPm1tYW4u
YmRldiwKIAkJCSAgICAgICAmcmFkZW9uX2JvX2RyaXZlciwKIAkJCSAgICAgICByZGV2LT5kZGV2
LT5hbm9uX2lub2RlLT5pX21hcHBpbmcsCi0JCQkgICAgICAgcmRldi0+ZGRldi0+dm1hX29mZnNl
dF9tYW5hZ2VyLAotCQkJICAgICAgIGRtYV9hZGRyZXNzaW5nX2xpbWl0ZWQoJnJkZXYtPnBkZXYt
PmRldikpOworCQkJICAgICAgIHJkZXYtPmRkZXYtPnZtYV9vZmZzZXRfbWFuYWdlcik7CiAJaWYg
KHIpIHsKIAkJRFJNX0VSUk9SKCJmYWlsZWQgaW5pdGlhbGl6aW5nIGJ1ZmZlciBvYmplY3QgZHJp
dmVyKCVkKS5cbiIsIHIpOwogCQlyZXR1cm4gcjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2RldmljZS5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fZGV2aWNlLmMKaW5k
ZXggZmUyZTQwNTJhZmNiLi5mNGVjYjZmMjE3YWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2RldmljZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2RldmljZS5j
CkBAIC0xNTgsOCArMTU4LDcgQEAgc3RhdGljIHZvaWQgdHRtX2RldmljZV9kZWxheWVkX3dvcmtx
dWV1ZShzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCiAKIGludCB0dG1fZGV2aWNlX2luaXQoc3Ry
dWN0IHR0bV9kZXZpY2UgKmJkZXYsIHN0cnVjdCB0dG1fZGV2aWNlX2Z1bmNzICpmdW5jcywKIAkJ
ICAgIHN0cnVjdCBhZGRyZXNzX3NwYWNlICptYXBwaW5nLAotCQkgICAgc3RydWN0IGRybV92bWFf
b2Zmc2V0X21hbmFnZXIgKnZtYV9tYW5hZ2VyLAotCQkgICAgYm9vbCBuZWVkX2RtYTMyKQorCQkg
ICAgc3RydWN0IGRybV92bWFfb2Zmc2V0X21hbmFnZXIgKnZtYV9tYW5hZ2VyKQogewogCXN0cnVj
dCB0dG1fZ2xvYmFsICpnbG9iID0gJnR0bV9nbG9iOwogCWludCByZXQ7CkBAIC0xNzksNyArMTc4
LDYgQEAgaW50IHR0bV9kZXZpY2VfaW5pdChzdHJ1Y3QgdHRtX2RldmljZSAqYmRldiwgc3RydWN0
IHR0bV9kZXZpY2VfZnVuY3MgKmZ1bmNzLAogCUlOSVRfREVMQVlFRF9XT1JLKCZiZGV2LT53cSwg
dHRtX2RldmljZV9kZWxheWVkX3dvcmtxdWV1ZSk7CiAJSU5JVF9MSVNUX0hFQUQoJmJkZXYtPmRk
ZXN0cm95KTsKIAliZGV2LT5kZXZfbWFwcGluZyA9IG1hcHBpbmc7Ci0JYmRldi0+bmVlZF9kbWEz
MiA9IG5lZWRfZG1hMzI7CiAJbXV0ZXhfbG9jaygmdHRtX2dsb2JhbF9tdXRleCk7CiAJbGlzdF9h
ZGRfdGFpbCgmYmRldi0+ZGV2aWNlX2xpc3QsICZnbG9iLT5kZXZpY2VfbGlzdCk7CiAJbXV0ZXhf
dW5sb2NrKCZ0dG1fZ2xvYmFsX211dGV4KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90
dG0vdHRtX3R0LmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90dC5jCmluZGV4IDk1ZGZmZWU4
Mjk5ZC4uZTJiMWU2YzUzYTA0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90
dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX3R0LmMKQEAgLTUyLDkgKzUyLDYgQEAg
aW50IHR0bV90dF9jcmVhdGUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywgYm9vbCB6ZXJv
X2FsbG9jKQogCWlmIChiby0+dHRtKQogCQlyZXR1cm4gMDsKIAotCWlmIChiZGV2LT5uZWVkX2Rt
YTMyKQotCQlwYWdlX2ZsYWdzIHw9IFRUTV9QQUdFX0ZMQUdfRE1BMzI7Ci0KIAlpZiAoYmRldi0+
bm9fcmV0cnkpCiAJCXBhZ2VfZmxhZ3MgfD0gVFRNX1BBR0VfRkxBR19OT19SRVRSWTsKIApkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfZHJ2LmMgYi9kcml2ZXJzL2dw
dS9kcm0vdm13Z2Z4L3Ztd2dmeF9kcnYuYwppbmRleCBkY2JjYjA0ZmYyN2MuLjZjOWQ2N2IwODBl
ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfZHJ2LmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfZHJ2LmMKQEAgLTg3NSw4ICs4NzUsNyBAQCBz
dGF0aWMgaW50IHZtd19kcml2ZXJfbG9hZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1bnNpZ25l
ZCBsb25nIGNoaXBzZXQpCiAJcmV0ID0gdHRtX2RldmljZV9pbml0KCZkZXZfcHJpdi0+YmRldiwK
IAkJCQkgJnZtd19ib19kcml2ZXIsCiAJCQkJIGRldi0+YW5vbl9pbm9kZS0+aV9tYXBwaW5nLAot
CQkJCSAmZGV2X3ByaXYtPnZtYV9tYW5hZ2VyLAotCQkJCSBmYWxzZSk7CisJCQkJICZkZXZfcHJp
di0+dm1hX21hbmFnZXIpOwogCWlmICh1bmxpa2VseShyZXQgIT0gMCkpIHsKIAkJRFJNX0VSUk9S
KCJGYWlsZWQgaW5pdGlhbGl6aW5nIFRUTSBidWZmZXIgb2JqZWN0IGRyaXZlci5cbiIpOwogCQln
b3RvIG91dF9ub19iZGV2OwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vdHRtL3R0bV9kZXZpY2Uu
aCBiL2luY2x1ZGUvZHJtL3R0bS90dG1fZGV2aWNlLmgKaW5kZXggMTM4NDA2OTdkM2JhLi5iZmM2
ZGQ4N2YyZDMgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL3R0bS90dG1fZGV2aWNlLmgKKysrIGIv
aW5jbHVkZS9kcm0vdHRtL3R0bV9kZXZpY2UuaApAQCAtMzI3LDcgKzMyNyw2IEBAIHN0cnVjdCB0
dG1fZGV2aWNlIHsKIAogCXN0cnVjdCBkZWxheWVkX3dvcmsgd3E7CiAKLQlib29sIG5lZWRfZG1h
MzI7CiAJYm9vbCBub19yZXRyeTsKIH07CiAKQEAgLTM1OSw4ICszNTgsNyBAQCB0dG1fc2V0X2Ry
aXZlcl9tYW5hZ2VyKHN0cnVjdCB0dG1fZGV2aWNlICpiZGV2LCBpbnQgdHlwZSwKICAqLwogaW50
IHR0bV9kZXZpY2VfaW5pdChzdHJ1Y3QgdHRtX2RldmljZSAqYmRldiwgc3RydWN0IHR0bV9kZXZp
Y2VfZnVuY3MgKmZ1bmNzLAogCQkgICAgc3RydWN0IGFkZHJlc3Nfc3BhY2UgKm1hcHBpbmcsCi0J
CSAgICBzdHJ1Y3QgZHJtX3ZtYV9vZmZzZXRfbWFuYWdlciAqdm1hX21hbmFnZXIsCi0JCSAgICBi
b29sIG5lZWRfZG1hMzIpOworCQkgICAgc3RydWN0IGRybV92bWFfb2Zmc2V0X21hbmFnZXIgKnZt
YV9tYW5hZ2VyKTsKIGludCB0dG1fZGV2aWNlX3JlbGVhc2Uoc3RydWN0IHR0bV9kZXZpY2UgKmJk
ZXYpOwogCiAvKioKLS0gCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZHJpLWRldmVsCg==
