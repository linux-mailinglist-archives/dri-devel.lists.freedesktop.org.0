Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 53A7E8E699
	for <lists+dri-devel@lfdr.de>; Thu, 15 Aug 2019 10:35:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 942676E8E5;
	Thu, 15 Aug 2019 08:34:58 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-vk1-xa4a.google.com (mail-vk1-xa4a.google.com
 [IPv6:2607:f8b0:4864:20::a4a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 225CC6E0EF
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 11:04:13 +0000 (UTC)
Received: by mail-vk1-xa4a.google.com with SMTP id w185so27600vka.20
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 04:04:13 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=7PGacRYXVFsNBUaK9AFFTq+0n3dK1YSXmAGYlruF6gc=;
 b=aYDRcepPB1DlXrbZQ0PYXIJQm0WjMp3HIuBisAYaZpXET8cocwNNi/lrBMVFkhyShA
 ukCVUNJu2Qg9nX7/zHtWuELHW6cZPVlpS5WpzyutWUVljYqafMZFg5utnBChJ0zRKTMn
 3OzKuNdekjGFMFE98t6i0zFhwdrMlOCK6wiAwm0nVgSZVNDvUZ25wuk4Kt2AZElgPVBj
 7AX0t4/bpNL7g2jVW7YjJ4JAr+b1o71jmxU+AVBXr56My4vYvZz9VWlUmVPyGac3f6Hz
 6/ZD04fM7J7mQZAXaJQkh2yz4ypwcpYf1fxL0pOcxnFhxz+Bv64X1AXmQcv0z81IVwfr
 yguA==
X-Gm-Message-State: APjAAAVA1E5UNAuRiMR+xvP13E1ydiyCnzLFscC2XxsX6kOowNLVO67x
 yE+0JNx9r0Lnh9ICJqjPIquusmke69zJopex+lmSVNkQmcfeMcnRaprFIn68suPL2J6haj6b+bg
 B3pcBwX09mj8BfuN0w0H1EYJCO5VmYkTc8rLzsYwftIBbwuKgIZb3pZN3peN3ekSmNXqRFBzH9A
 ==
X-Google-Smtp-Source: APXvYqyeQaoLuHS4lwvUuncTOZ0+P8t2+0nXHV4RbzHYhLOmVe7Ku4FbTLBE7VGYoUn20Yyj7SW3SjzIXg0=
X-Received: by 2002:a9f:326e:: with SMTP id y43mr1637980uad.4.1565694251963;
 Tue, 13 Aug 2019 04:04:11 -0700 (PDT)
Date: Tue, 13 Aug 2019 13:02:39 +0200
In-Reply-To: <20190813110300.83025-1-darekm@google.com>
Message-Id: <20190813110300.83025-8-darekm@google.com>
Mime-Version: 1.0
References: <20190813110300.83025-1-darekm@google.com>
X-Mailer: git-send-email 2.23.0.rc1.153.gdeed80330f-goog
Subject: [PATCH v6 7/8] drm: dw-hdmi: use cec_notifier_conn_(un)register
From: Dariusz Marcinkiewicz <darekm@google.com>
To: dri-devel@lists.freedesktop.org, linux-media@vger.kernel.org, 
 hverkuil-cisco@xs4all.nl
X-Mailman-Approved-At: Thu, 15 Aug 2019 08:34:55 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=7PGacRYXVFsNBUaK9AFFTq+0n3dK1YSXmAGYlruF6gc=;
 b=kmTjua/WpkiMq8nHLEd+LjG0YWASE8dJy8v8DnjnQqJTFv/ip1x0XgtkDMWpTTy6Vu
 JmjhuBtQZS0wboasCWyAFpMs/HYXk/5ypvK2xWr699mfV4KLxHyTTFpc5NLRaAUy9ZVb
 09xFUN1d6+7JVLTL3TNM61eV33vnagLykDXXqMYp5hZ9kAOIchcfYZrpWsOdlXhDuEQf
 c4h6mkc1dUIB5OGoj6KQwqsRvSIXlTHimed7bvYENAz0v8az7SbA0Cf6TN9dh+X6+99l
 BzUQPyJV3qYFSbIPsuKMoq2LWYrn0SlY+qhBTtKxpUmnPjjPdUEWi6cu5zm7ql1p9oEX
 AwPg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jernej Skrabec <jernej.skrabec@siol.net>, Jonas Karlman <jonas@kwiboo.se>,
 David Airlie <airlied@linux.ie>, Neil Armstrong <narmstrong@baylibre.com>,
 Douglas Anderson <dianders@chromium.org>,
 open list <linux-kernel@vger.kernel.org>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Dariusz Marcinkiewicz <darekm@google.com>, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VXNlIHRoZSBuZXcgY2VjX25vdGlmaWVyX2Nvbm5fKHVuKXJlZ2lzdGVyKCkgZnVuY3Rpb25zIHRv
Cih1bilyZWdpc3RlciB0aGUgbm90aWZpZXIgZm9yIHRoZSBIRE1JIGNvbm5lY3RvciwgYW5kIGZp
bGwgaW4KdGhlIGNlY19jb25uZWN0b3JfaW5mby4KCkNoYW5nZXMgc2luY2UgdjQ6CgktIHR5cG8g
Zml4CkNoYW5nZXMgc2luY2UgdjI6CgktIHJlbW92ZWQgdW5uZWNlc3NhcnkgTlVMTCBjaGVjayBi
ZWZvcmUgYSBjYWxsIHRvCgljZWNfbm90aWZpZXJfY29ubl91bnJlZ2lzdGVyLAoJLSB1c2UgY2Vj
X25vdGlmaWVyX3BoeXNfYWRkcl9pbnZhbGlkYXRlIHRvIGludmFsaWRhdGUgcGh5c2ljYWwKCWFk
ZHJlc3MuCkNoYW5nZXMgc2luY2UgdjE6CglBZGQgbWVtb3J5IGJhcnJpZXIgdG8gbWFrZSBzdXJl
IHRoYXQgdGhlIG5vdGlmaWVyCgliZWNvbWVzIHZpc2libGUgdG8gdGhlIGlycSB0aHJlYWQgb25j
ZSBpdCBpcyBmdWxseQoJY29uc3RydWN0ZWQuCgpTaWduZWQtb2ZmLWJ5OiBEYXJpdXN6IE1hcmNp
bmtpZXdpY3ogPGRhcmVrbUBnb29nbGUuY29tPgpUZXN0ZWQtYnk6IEhhbnMgVmVya3VpbCA8aHZl
cmt1aWwtY2lzY29AeHM0YWxsLm5sPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3Bz
eXMvZHctaGRtaS5jIHwgMzYgKysrKysrKysrKysrKystLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2Vk
LCAyMiBpbnNlcnRpb25zKCspLCAxNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LWhkbWkuYyBiL2RyaXZlcnMvZ3B1L2RybS9icmlk
Z2Uvc3lub3BzeXMvZHctaGRtaS5jCmluZGV4IDgzYjk0YjY2ZTQ2NGUuLmMwMDE4NDcwMGJiOWQg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctaGRtaS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctaGRtaS5jCkBAIC0yMTk0LDYg
KzIxOTQsOCBAQCBzdGF0aWMgaW50IGR3X2hkbWlfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2Jy
aWRnZSAqYnJpZGdlKQogCXN0cnVjdCBkd19oZG1pICpoZG1pID0gYnJpZGdlLT5kcml2ZXJfcHJp
dmF0ZTsKIAlzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIgPSBicmlkZ2UtPmVuY29kZXI7CiAJ
c3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciA9ICZoZG1pLT5jb25uZWN0b3I7CisJc3Ry
dWN0IGNlY19jb25uZWN0b3JfaW5mbyBjb25uX2luZm87CisJc3RydWN0IGNlY19ub3RpZmllciAq
bm90aWZpZXI7CiAKIAljb25uZWN0b3ItPmludGVybGFjZV9hbGxvd2VkID0gMTsKIAljb25uZWN0
b3ItPnBvbGxlZCA9IERSTV9DT05ORUNUT1JfUE9MTF9IUEQ7CkBAIC0yMjA3LDYgKzIyMDksMTgg
QEAgc3RhdGljIGludCBkd19oZG1pX2JyaWRnZV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJy
aWRnZSkKIAogCWRybV9jb25uZWN0b3JfYXR0YWNoX2VuY29kZXIoY29ubmVjdG9yLCBlbmNvZGVy
KTsKIAorCWNlY19maWxsX2Nvbm5faW5mb19mcm9tX2RybSgmY29ubl9pbmZvLCBjb25uZWN0b3Ip
OworCisJbm90aWZpZXIgPSBjZWNfbm90aWZpZXJfY29ubl9yZWdpc3RlcihoZG1pLT5kZXYsIE5V
TEwsICZjb25uX2luZm8pOworCWlmICghbm90aWZpZXIpCisJCXJldHVybiAtRU5PTUVNOworCS8q
CisJICogTWFrZSBzdXJlIHRoYXQgZHdfaGRtaV9pcnEgdGhyZWFkIGRvZXMgc2VlIHRoZSBub3Rp
ZmllcgorCSAqIHdoZW4gaXQgZnVsbHkgY29uc3RydWN0ZWQuCisJICovCisJc21wX3dtYigpOwor
CWhkbWktPmNlY19ub3RpZmllciA9IG5vdGlmaWVyOworCiAJcmV0dXJuIDA7CiB9CiAKQEAgLTIz
NzMsOSArMjM4NywxMyBAQCBzdGF0aWMgaXJxcmV0dXJuX3QgZHdfaGRtaV9pcnEoaW50IGlycSwg
dm9pZCAqZGV2X2lkKQogCQkJCSAgICAgICBwaHlfc3RhdCAmIEhETUlfUEhZX0hQRCwKIAkJCQkg
ICAgICAgcGh5X3N0YXQgJiBIRE1JX1BIWV9SWF9TRU5TRSk7CiAKLQkJaWYgKChwaHlfc3RhdCAm
IChIRE1JX1BIWV9SWF9TRU5TRSB8IEhETUlfUEhZX0hQRCkpID09IDApCi0JCQljZWNfbm90aWZp
ZXJfc2V0X3BoeXNfYWRkcihoZG1pLT5jZWNfbm90aWZpZXIsCi0JCQkJCQkgICBDRUNfUEhZU19B
RERSX0lOVkFMSUQpOworCQlpZiAoKHBoeV9zdGF0ICYgKEhETUlfUEhZX1JYX1NFTlNFIHwgSERN
SV9QSFlfSFBEKSkgPT0gMCkgeworCQkJc3RydWN0IGNlY19ub3RpZmllciAqbm90aWZpZXI7CisK
KwkJCW5vdGlmaWVyID0gUkVBRF9PTkNFKGhkbWktPmNlY19ub3RpZmllcik7CisJCQlpZiAobm90
aWZpZXIpCisJCQkJY2VjX25vdGlmaWVyX3BoeXNfYWRkcl9pbnZhbGlkYXRlKG5vdGlmaWVyKTsK
KwkJfQogCX0KIAogCWlmIChpbnRyX3N0YXQgJiBIRE1JX0lIX1BIWV9TVEFUMF9IUEQpIHsKQEAg
LTI2OTMsMTIgKzI3MTEsNiBAQCBfX2R3X2hkbWlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqcGRldiwKIAlpZiAocmV0KQogCQlnb3RvIGVycl9pYWhiOwogCi0JaGRtaS0+Y2VjX25vdGlm
aWVyID0gY2VjX25vdGlmaWVyX2dldChkZXYpOwotCWlmICghaGRtaS0+Y2VjX25vdGlmaWVyKSB7
Ci0JCXJldCA9IC1FTk9NRU07Ci0JCWdvdG8gZXJyX2lhaGI7Ci0JfQotCiAJLyoKIAkgKiBUbyBw
cmV2ZW50IG92ZXJmbG93cyBpbiBIRE1JX0lIX0ZDX1NUQVQyLCBzZXQgdGhlIGNsayByZWdlbmVy
YXRvcgogCSAqIE4gYW5kIGN0cyB2YWx1ZXMgYmVmb3JlIGVuYWJsaW5nIHBoeQpAQCAtMjc5Niw5
ICsyODA4LDYgQEAgX19kd19oZG1pX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYs
CiAJCWhkbWktPmRkYyA9IE5VTEw7CiAJfQogCi0JaWYgKGhkbWktPmNlY19ub3RpZmllcikKLQkJ
Y2VjX25vdGlmaWVyX3B1dChoZG1pLT5jZWNfbm90aWZpZXIpOwotCiAJY2xrX2Rpc2FibGVfdW5w
cmVwYXJlKGhkbWktPmlhaGJfY2xrKTsKIAlpZiAoaGRtaS0+Y2VjX2NsaykKIAkJY2xrX2Rpc2Fi
bGVfdW5wcmVwYXJlKGhkbWktPmNlY19jbGspOwpAQCAtMjgyMCw4ICsyODI5LDcgQEAgc3RhdGlj
IHZvaWQgX19kd19oZG1pX3JlbW92ZShzdHJ1Y3QgZHdfaGRtaSAqaGRtaSkKIAkvKiBEaXNhYmxl
IGFsbCBpbnRlcnJ1cHRzICovCiAJaGRtaV93cml0ZWIoaGRtaSwgfjAsIEhETUlfSUhfTVVURV9Q
SFlfU1RBVDApOwogCi0JaWYgKGhkbWktPmNlY19ub3RpZmllcikKLQkJY2VjX25vdGlmaWVyX3B1
dChoZG1pLT5jZWNfbm90aWZpZXIpOworCWNlY19ub3RpZmllcl9jb25uX3VucmVnaXN0ZXIoaGRt
aS0+Y2VjX25vdGlmaWVyKTsKIAogCWNsa19kaXNhYmxlX3VucHJlcGFyZShoZG1pLT5pYWhiX2Ns
ayk7CiAJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKGhkbWktPmlzZnJfY2xrKTsKLS0gCjIuMjMuMC5y
YzEuMTUzLmdkZWVkODAzMzBmLWdvb2cKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2RyaS1kZXZlbA==
