Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E6045A1D31
	for <lists+dri-devel@lfdr.de>; Thu, 29 Aug 2019 16:40:28 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BC3856E0CC;
	Thu, 29 Aug 2019 14:39:56 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AB2BE6E0CC;
 Thu, 29 Aug 2019 14:39:55 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id u16so3742930wrr.0;
 Thu, 29 Aug 2019 07:39:55 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=HEEvYqpbIBBSddwe107UXktHEBs4C3oiZ3ZX2qGo/A8=;
 b=cF3uzRyen7hUarjzLDtc6VYGeP3HWOEn7blJJbjQv2tAKnpdD5bO0sdgoHChXXVPXk
 whdR4iMLWcLRspl4xOwlVJGuWHpU9Yrr02vMFy4wbJVJuGZ2dQ9Jo8RlLHMONd5YpQrx
 DuUgxyMk0zLAnC2A+SD169+4UjrhEeuYdUgCptV2gfVtLoFNJnjM9Xqnii5+yxiEjQdn
 JfqySMlTefnLNtuOQFwfTL8mby9l0cdkVzLxdp+SLaGMKsIlHQnuIpd4ax4m64+6Y+Y0
 MG4yP9UHpwZcmqsoe2bHcaBMrXY30kexRtWJlI5QxGJUhGHGzefmwgjkuaXJK80gulwx
 dZoA==
X-Gm-Message-State: APjAAAUfRs+SS2B+6QXQeHT7khClORFg0BLRL+xNQ2hJoKCLgtpIvRXe
 VDsBEpMuzuw+atMd8mftBqdbwTuaDws8Ne7a020=
X-Google-Smtp-Source: APXvYqwX8DAaXygNFPLXMmjCnSxOeUyWISnDC54GKHZZQjOfVnFt/9OwReHp0RkfQ1jv9HwXHm6DVm+gVg1pEE288wc=
X-Received: by 2002:a05:6000:1603:: with SMTP id
 u3mr12215236wrb.286.1567089594064; 
 Thu, 29 Aug 2019 07:39:54 -0700 (PDT)
MIME-Version: 1.0
References: <20190829060533.32315-1-Kenny.Ho@amd.com>
 <20190829060533.32315-14-Kenny.Ho@amd.com>
 <464ad318-48dd-3f78-d82b-83a8e7175ff9@amd.com>
 <CAOWid-dzJiqjH9+=36fFYh87OKOzToMDcJZpepOWdjoXpBSF8A@mail.gmail.com>
 <f6963293-bebe-0dca-b509-799f9096ca91@amd.com>
In-Reply-To: <f6963293-bebe-0dca-b509-799f9096ca91@amd.com>
From: Kenny Ho <y2kenny@gmail.com>
Date: Thu, 29 Aug 2019 10:39:42 -0400
Message-ID: <CAOWid-c0Pbu+akFeBDVkqLuO2Rw-SPPuPDTx829WvjYeCQZygQ@mail.gmail.com>
Subject: Re: [PATCH RFC v4 13/16] drm,
 cgroup: Allow more aggressive memory reclaim
To: "Koenig, Christian" <Christian.Koenig@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=HEEvYqpbIBBSddwe107UXktHEBs4C3oiZ3ZX2qGo/A8=;
 b=O5nCbLYS7HmGZ+Zv3tLy2NewtP1akcw4UZ0fsyS8Fwt1hRcuTChM14zZ8vh857ZhZ6
 LZdKLTHSBg6ia1ZC+e0t0TCEodPoUmaxXQuDChBCTBUW71FizCi00oVZpgqnXSNmKzIv
 oXSsT7wfLa3bMefvo5eKtcksCsG8wSzFWN4q+dRCCrvYO/hRN6o9jl3DrRdmD4eyFIkK
 qEPRAtUoRFcZltMIGLJFJP0SqwrheWSOmRwFIK/NEPlIMLKRWR6NkzNvRkErS0AvJSM1
 Kt13eXzDlmygRcBuSPVFvQb8qnrgCctSjIID9Kx8BDqrk+iy+5F3UULQlat3fRS5GQAt
 A08A==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: "Ho, Kenny" <Kenny.Ho@amd.com>, "Kuehling, Felix" <Felix.Kuehling@amd.com>,
 "jsparks@cray.com" <jsparks@cray.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>,
 "lkaplan@cray.com" <lkaplan@cray.com>, "Deucher,
 Alexander" <Alexander.Deucher@amd.com>,
 "dri-devel@lists.freedesktop.org" <dri-devel@lists.freedesktop.org>,
 "Greathouse, Joseph" <Joseph.Greathouse@amd.com>,
 "tj@kernel.org" <tj@kernel.org>,
 "cgroups@vger.kernel.org" <cgroups@vger.kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

WWVzLCBhbmQgSSB0aGluayBpdCBoYXMgcXVpdGUgYSBsb3Qgb2YgY291cGxpbmcgd2l0aCBtbSdz
IHBhZ2UgYW5kCnByZXNzdXJlIG1lY2hhbmlzbXMuICBNeSBjdXJyZW50IHRob3VnaHQgaXMgdG8g
anVzdCBjb3B5IHRoZSBBUEkgYnV0CmhhdmUgYSBzZXBhcmF0ZSBpbXBsZW1lbnRhdGlvbiBvZiAi
dHRtX3Nocmlua2VyIiBhbmQKInR0bV9zaHJpbmtlcl9jb250cm9sIiBvciBzb21ldGhpbmcgbGlr
ZSB0aGF0LiAgSSBhbSBjZXJ0YWlubHkgaGFwcHkKdG8gbGlzdGVuIHRvIGFkZGl0aW9uYWwgZmVl
ZGJhY2tzIGFuZCBzdWdnZXN0aW9ucy4KClJlZ2FyZHMsCktlbm55CgoKT24gVGh1LCBBdWcgMjks
IDIwMTkgYXQgMTA6MTIgQU0gS29lbmlnLCBDaHJpc3RpYW4KPENocmlzdGlhbi5Lb2VuaWdAYW1k
LmNvbT4gd3JvdGU6Cj4KPiBZZWFoLCB0aGF0J3MgYWxzbyBhIHJlYWxseSBnb29kIGlkZWEgYXMg
d2VsbC4KPgo+IFRoZSBwcm9ibGVtIHdpdGggdGhlIHNocmlua2VyIEFQSSBpcyB0aGF0IGl0IG9u
bHkgYXBwbGllcyB0byBzeXN0ZW0gbWVtb3J5IGN1cnJlbnRseS4KPgo+IFNvIHlvdSB3b24ndCBo
YXZlIGEgZGlzdGluY3Rpb24gd2hpY2ggZG9tYWluIHlvdSBuZWVkIHRvIGV2aWN0IHN0dWZmIGZy
b20uCj4KPiBSZWdhcmRzLAo+IENocmlzdGlhbi4KPgo+IEFtIDI5LjA4LjE5IHVtIDE2OjA3IHNj
aHJpZWIgS2VubnkgSG86Cj4KPiBUaGFua3MgZm9yIHRoZSBmZWVkYmFjayBDaHJpc3RpYW4uICBJ
IGFtIHN0aWxsIGRpZ2dpbmcgaW50byB0aGlzIG9uZS4gIERhbmllbCBzdWdnZXN0ZWQgbGV2ZXJh
Z2luZyB0aGUgU2hyaW5rZXIgQVBJIGZvciB0aGUgZnVuY3Rpb25hbGl0eSBvZiB0aGlzIGNvbW1p
dCBpbiBSRkMgdjMgYnV0IEkgYW0gc3RpbGwgdHJ5aW5nIHRvIGZpZ3VyZSBpdCBvdXQgaG93L2lm
IHR0bSBmaXQgd2l0aCBzaHJpbmtlciAodGhvdWdoIHRoZSBpZGVhIGJlaGluZCB0aGUgc2hyaW5r
ZXIgQVBJIHNlZW1zIGZhaXJseSBzdHJhaWdodGZvcndhcmQgYXMgZmFyIGFzIEkgdW5kZXJzdGFu
ZCBpdCBjdXJyZW50bHkuKQo+Cj4gUmVnYXJkcywKPiBLZW5ueQo+Cj4gT24gVGh1LCBBdWcgMjks
IDIwMTkgYXQgMzowOCBBTSBLb2VuaWcsIENocmlzdGlhbiA8Q2hyaXN0aWFuLktvZW5pZ0BhbWQu
Y29tPiB3cm90ZToKPj4KPj4gQW0gMjkuMDguMTkgdW0gMDg6MDUgc2NocmllYiBLZW5ueSBIbzoK
Pj4gPiBBbGxvdyBEUk0gVFRNIG1lbW9yeSBtYW5hZ2VyIHRvIHJlZ2lzdGVyIGEgd29ya19zdHJ1
Y3QsIHN1Y2ggdGhhdCwgd2hlbgo+PiA+IGEgZHJtY2dycCBpcyB1bmRlciBtZW1vcnkgcHJlc3N1
cmUsIG1lbW9yeSByZWNsYWltaW5nIGNhbiBiZSB0cmlnZ2VyZWQKPj4gPiBpbW1lZGlhdGVseS4K
Pj4gPgo+PiA+IENoYW5nZS1JZDogSTI1YWMwNGUyZGI5YzE5ZmYxMjY1MmI4OGViZmYxOGI0NGIy
NzA2ZDgKPj4gPiBTaWduZWQtb2ZmLWJ5OiBLZW5ueSBIbyA8S2VubnkuSG9AYW1kLmNvbT4KPj4g
PiAtLS0KPj4gPiAgIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMgICAgfCA0OSArKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysKPj4gPiAgIGluY2x1ZGUvZHJtL2RybV9jZ3JvdXAu
aCAgICAgICAgfCAxNiArKysrKysrKysrKwo+PiA+ICAgaW5jbHVkZS9kcm0vdHRtL3R0bV9ib19k
cml2ZXIuaCB8ICAyICsrCj4+ID4gICBrZXJuZWwvY2dyb3VwL2RybS5jICAgICAgICAgICAgIHwg
MzAgKysrKysrKysrKysrKysrKysrKysKPj4gPiAgIDQgZmlsZXMgY2hhbmdlZCwgOTcgaW5zZXJ0
aW9ucygrKQo+PiA+Cj4+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2Jv
LmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCj4+ID4gaW5kZXggZDdlM2QzMTI4ZWJi
Li43MmVmYWU2OTRiN2UgMTAwNjQ0Cj4+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1f
Ym8uYwo+PiA+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKPj4gPiBAQCAtMTU5
MCw2ICsxNTkwLDQ2IEBAIGludCB0dG1fYm9fZXZpY3RfbW0oc3RydWN0IHR0bV9ib19kZXZpY2Ug
KmJkZXYsIHVuc2lnbmVkIG1lbV90eXBlKQo+PiA+ICAgfQo+PiA+ICAgRVhQT1JUX1NZTUJPTCh0
dG1fYm9fZXZpY3RfbW0pOwo+PiA+Cj4+ID4gK3N0YXRpYyB2b2lkIHR0bV9ib19yZWNsYWltX3dx
KHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKPj4gPiArewo+PiA+ICsgICAgIHN0cnVjdCB0dG1f
b3BlcmF0aW9uX2N0eCBjdHggPSB7Cj4+ID4gKyAgICAgICAgICAgICAuaW50ZXJydXB0aWJsZSA9
IGZhbHNlLAo+PiA+ICsgICAgICAgICAgICAgLm5vX3dhaXRfZ3B1ID0gZmFsc2UsCj4+ID4gKyAg
ICAgICAgICAgICAuZmxhZ3MgPSBUVE1fT1BUX0ZMQUdfRk9SQ0VfQUxMT0MKPj4gPiArICAgICB9
Owo+PiA+ICsgICAgIHN0cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdlciAqbWFuID0KPj4gPiArICAg
ICAgICAgY29udGFpbmVyX29mKHdvcmssIHN0cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdlciwgcmVj
bGFpbV93cSk7Cj4+ID4gKyAgICAgc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYgPSBtYW4tPmJk
ZXY7Cj4+ID4gKyAgICAgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7Cj4+ID4gKyAgICAgaW50IG1l
bV90eXBlOwo+PiA+ICsgICAgIGludCByZXQ7Cj4+ID4gKwo+PiA+ICsgICAgIGZvciAobWVtX3R5
cGUgPSAwOyBtZW1fdHlwZSA8IFRUTV9OVU1fTUVNX1RZUEVTOyBtZW1fdHlwZSsrKQo+PiA+ICsg
ICAgICAgICAgICAgaWYgKCZiZGV2LT5tYW5bbWVtX3R5cGVdID09IG1hbikKPj4gPiArICAgICAg
ICAgICAgICAgICAgICAgYnJlYWs7Cj4+ID4gKwo+PiA+ICsgICAgIFdBUk5fT04obWVtX3R5cGUg
Pj0gVFRNX05VTV9NRU1fVFlQRVMpOwo+PiA+ICsgICAgIGlmIChtZW1fdHlwZSA+PSBUVE1fTlVN
X01FTV9UWVBFUykKPj4gPiArICAgICAgICAgICAgIHJldHVybjsKPj4gPiArCj4+ID4gKyAgICAg
aWYgKCFkcm1jZ19tZW1fcHJlc3N1cmVfc2NhbihiZGV2LCBtZW1fdHlwZSkpCj4+ID4gKyAgICAg
ICAgICAgICByZXR1cm47Cj4+ID4gKwo+PiA+ICsgICAgIHJldCA9IHR0bV9tZW1fZXZpY3RfZmly
c3QoYmRldiwgbWVtX3R5cGUsIE5VTEwsICZjdHgsIE5VTEwpOwo+PiA+ICsgICAgIGlmIChyZXQp
Cj4+ID4gKyAgICAgICAgICAgICByZXR1cm47Cj4+ID4gKwo+PiA+ICsgICAgIHNwaW5fbG9jaygm
bWFuLT5tb3ZlX2xvY2spOwo+PiA+ICsgICAgIGZlbmNlID0gZG1hX2ZlbmNlX2dldChtYW4tPm1v
dmUpOwo+PiA+ICsgICAgIHNwaW5fdW5sb2NrKCZtYW4tPm1vdmVfbG9jayk7Cj4+ID4gKwo+PiA+
ICsgICAgIGlmIChmZW5jZSkgewo+PiA+ICsgICAgICAgICAgICAgcmV0ID0gZG1hX2ZlbmNlX3dh
aXQoZmVuY2UsIGZhbHNlKTsKPj4gPiArICAgICAgICAgICAgIGRtYV9mZW5jZV9wdXQoZmVuY2Up
Owo+PiA+ICsgICAgIH0KPj4KPj4gV2h5IGRvIHlvdSB3YW50IHRvIGJsb2NrIGZvciB0aGUgZmVu
Y2UgaGVyZT8gVGhhdCBpcyBhIHJhdGhlciBiYWQgaWRlYQo+PiBhbmQgd291bGQgYnJlYWsgcGlw
ZS1saW5pbmcuCj4+Cj4+IEFwYXJ0IGZyb20gdGhhdCBJIGRvbid0IHRoaW5rIHdlIHNob3VsZCBw
dXQgdGhhdCBpbnRvIFRUTS4KPj4KPj4gSW5zdGVhZCBkcm1jZ19yZWdpc3Rlcl9kZXZpY2VfbW0o
KSBzaG91bGQgZ2V0IGEgZnVuY3Rpb24gcG9pbnRlciB3aGljaAo+PiBpcyBjYWxsZWQgZnJvbSBh
IHdvcmsgaXRlbSB3aGVuIHRoZSBncm91cCBpcyB1bmRlciBwcmVzc3VyZS4KPj4KPj4gVFRNIGNh
biB0aGVuIHByb3ZpZGVzIHRoZSBmdW5jdGlvbiB3aGljaCBjYW4gYmUgY2FsbGVkLCBidXQgdGhl
IGFjdHVhbGx5Cj4+IHJlZ2lzdHJhdGlvbiBpcyBqb2Igb2YgdGhlIGRldmljZSBhbmQgbm90IFRU
TS4KPj4KPj4gUmVnYXJkcywKPj4gQ2hyaXN0aWFuLgo+Pgo+PiA+ICsKPj4gPiArfQo+PiA+ICsK
Pj4gPiAgIGludCB0dG1fYm9faW5pdF9tbShzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldiwgdW5z
aWduZWQgdHlwZSwKPj4gPiAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBwX3Np
emUpCj4+ID4gICB7Cj4+ID4gQEAgLTE2MjQsNiArMTY2NCwxMyBAQCBpbnQgdHRtX2JvX2luaXRf
bW0oc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsIHVuc2lnbmVkIHR5cGUsCj4+ID4gICAgICAg
ICAgICAgICBJTklUX0xJU1RfSEVBRCgmbWFuLT5scnVbaV0pOwo+PiA+ICAgICAgIG1hbi0+bW92
ZSA9IE5VTEw7Cj4+ID4KPj4gPiArICAgICBwcl9lcnIoImRybWNnICVwIHR5cGUgJWRcbiIsIGJk
ZXYtPmRkZXYsIHR5cGUpOwo+PiA+ICsKPj4gPiArICAgICBpZiAodHlwZSA8PSBUVE1fUExfVlJB
TSkgewo+PiA+ICsgICAgICAgICAgICAgSU5JVF9XT1JLKCZtYW4tPnJlY2xhaW1fd3EsIHR0bV9i
b19yZWNsYWltX3dxKTsKPj4gPiArICAgICAgICAgICAgIGRybWNnX3JlZ2lzdGVyX2RldmljZV9t
bShiZGV2LT5kZGV2LCB0eXBlLCAmbWFuLT5yZWNsYWltX3dxKTsKPj4gPiArICAgICB9Cj4+ID4g
Kwo+PiA+ICAgICAgIHJldHVybiAwOwo+PiA+ICAgfQo+PiA+ICAgRVhQT1JUX1NZTUJPTCh0dG1f
Ym9faW5pdF9tbSk7Cj4+ID4gQEAgLTE3MDEsNiArMTc0OCw4IEBAIGludCB0dG1fYm9fZGV2aWNl
X3JlbGVhc2Uoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYpCj4+ID4gICAgICAgICAgICAgICBt
YW4gPSAmYmRldi0+bWFuW2ldOwo+PiA+ICAgICAgICAgICAgICAgaWYgKG1hbi0+aGFzX3R5cGUp
IHsKPj4gPiAgICAgICAgICAgICAgICAgICAgICAgbWFuLT51c2VfdHlwZSA9IGZhbHNlOwo+PiA+
ICsgICAgICAgICAgICAgICAgICAgICBkcm1jZ191bnJlZ2lzdGVyX2RldmljZV9tbShiZGV2LT5k
ZGV2LCBpKTsKPj4gPiArICAgICAgICAgICAgICAgICAgICAgY2FuY2VsX3dvcmtfc3luYygmbWFu
LT5yZWNsYWltX3dxKTsKPj4gPiAgICAgICAgICAgICAgICAgICAgICAgaWYgKChpICE9IFRUTV9Q
TF9TWVNURU0pICYmIHR0bV9ib19jbGVhbl9tbShiZGV2LCBpKSkgewo+PiA+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHJldCA9IC1FQlVTWTsKPj4gPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBwcl9lcnIoIkRSTSBtZW1vcnkgbWFuYWdlciB0eXBlICVkIGlzIG5vdCBjbGVh
blxuIiwKPj4gPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2Nncm91cC5oIGIvaW5jbHVk
ZS9kcm0vZHJtX2Nncm91cC5oCj4+ID4gaW5kZXggYzExZGYzODhmZGYyLi42ZDk3MDdlMWViNzIg
MTAwNjQ0Cj4+ID4gLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2Nncm91cC5oCj4+ID4gKysrIGIvaW5j
bHVkZS9kcm0vZHJtX2Nncm91cC5oCj4+ID4gQEAgLTUsNiArNSw3IEBACj4+ID4gICAjZGVmaW5l
IF9fRFJNX0NHUk9VUF9IX18KPj4gPgo+PiA+ICAgI2luY2x1ZGUgPGxpbnV4L2Nncm91cF9kcm0u
aD4KPj4gPiArI2luY2x1ZGUgPGxpbnV4L3dvcmtxdWV1ZS5oPgo+PiA+ICAgI2luY2x1ZGUgPGRy
bS90dG0vdHRtX2JvX2FwaS5oPgo+PiA+ICAgI2luY2x1ZGUgPGRybS90dG0vdHRtX2JvX2RyaXZl
ci5oPgo+PiA+Cj4+ID4gQEAgLTI1LDEyICsyNiwxNyBAQCBzdHJ1Y3QgZHJtY2dfcHJvcHMgewo+
PiA+ICAgICAgIHM2NCAgICAgICAgICAgICAgICAgICAgIG1lbV9id19hdmdfYnl0ZXNfcGVyX3Vz
X2RlZmF1bHQ7Cj4+ID4KPj4gPiAgICAgICBzNjQgICAgICAgICAgICAgICAgICAgICBtZW1faGln
aHNfZGVmYXVsdFtUVE1fUExfUFJJVisxXTsKPj4gPiArCj4+ID4gKyAgICAgc3RydWN0IHdvcmtf
c3RydWN0ICAgICAgKm1lbV9yZWNsYWltX3dxW1RUTV9QTF9QUklWXTsKPj4gPiAgIH07Cj4+ID4K
Pj4gPiAgICNpZmRlZiBDT05GSUdfQ0dST1VQX0RSTQo+PiA+Cj4+ID4gICB2b2lkIGRybWNnX2Rl
dmljZV91cGRhdGUoc3RydWN0IGRybV9kZXZpY2UgKmRldmljZSk7Cj4+ID4gICB2b2lkIGRybWNn
X2RldmljZV9lYXJseV9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXZpY2UpOwo+PiA+ICt2b2lk
IGRybWNnX3JlZ2lzdGVyX2RldmljZV9tbShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1bnNpZ25l
ZCBpbnQgdHlwZSwKPj4gPiArICAgICAgICAgICAgIHN0cnVjdCB3b3JrX3N0cnVjdCAqd3EpOwo+
PiA+ICt2b2lkIGRybWNnX3VucmVnaXN0ZXJfZGV2aWNlX21tKHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYsIHVuc2lnbmVkIGludCB0eXBlKTsKPj4gPiAgIGJvb2wgZHJtY2dfdHJ5X2NoZ19ib19hbGxv
YyhzdHJ1Y3QgZHJtY2cgKmRybWNnLCBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+PiA+ICAgICAg
ICAgICAgICAgc2l6ZV90IHNpemUpOwo+PiA+ICAgdm9pZCBkcm1jZ191bmNoZ19ib19hbGxvYyhz
dHJ1Y3QgZHJtY2cgKmRybWNnLCBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+PiA+IEBAIC01Myw2
ICs1OSwxNiBAQCBzdGF0aWMgaW5saW5lIHZvaWQgZHJtY2dfZGV2aWNlX2Vhcmx5X2luaXQoc3Ry
dWN0IGRybV9kZXZpY2UgKmRldmljZSkKPj4gPiAgIHsKPj4gPiAgIH0KPj4gPgo+PiA+ICtzdGF0
aWMgaW5saW5lIHZvaWQgZHJtY2dfcmVnaXN0ZXJfZGV2aWNlX21tKHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYsCj4+ID4gKyAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgdHlwZSwgc3RydWN0IHdvcmtf
c3RydWN0ICp3cSkKPj4gPiArewo+PiA+ICt9Cj4+ID4gKwo+PiA+ICtzdGF0aWMgaW5saW5lIHZv
aWQgZHJtY2dfdW5yZWdpc3Rlcl9kZXZpY2VfbW0oc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPj4g
PiArICAgICAgICAgICAgIHVuc2lnbmVkIGludCB0eXBlKQo+PiA+ICt7Cj4+ID4gK30KPj4gPiAr
Cj4+ID4gICBzdGF0aWMgaW5saW5lIHZvaWQgZHJtY2dfdHJ5X2NoZ19ib19hbGxvYyhzdHJ1Y3Qg
ZHJtY2cgKmRybWNnLAo+PiA+ICAgICAgICAgICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiwg
c2l6ZV90IHNpemUpCj4+ID4gICB7Cj4+ID4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL3R0bS90
dG1fYm9fZHJpdmVyLmggYi9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2RyaXZlci5oCj4+ID4gaW5k
ZXggZTFhODA1ZDY1YjgzLi41MjljZWY5MmJjZjYgMTAwNjQ0Cj4+ID4gLS0tIGEvaW5jbHVkZS9k
cm0vdHRtL3R0bV9ib19kcml2ZXIuaAo+PiA+ICsrKyBiL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9f
ZHJpdmVyLmgKPj4gPiBAQCAtMjA1LDYgKzIwNSw4IEBAIHN0cnVjdCB0dG1fbWVtX3R5cGVfbWFu
YWdlciB7Cj4+ID4gICAgICAgICogUHJvdGVjdGVkIGJ5IEBtb3ZlX2xvY2suCj4+ID4gICAgICAg
ICovCj4+ID4gICAgICAgc3RydWN0IGRtYV9mZW5jZSAqbW92ZTsKPj4gPiArCj4+ID4gKyAgICAg
c3RydWN0IHdvcmtfc3RydWN0IHJlY2xhaW1fd3E7Cj4+ID4gICB9Owo+PiA+Cj4+ID4gICAvKioK
Pj4gPiBkaWZmIC0tZ2l0IGEva2VybmVsL2Nncm91cC9kcm0uYyBiL2tlcm5lbC9jZ3JvdXAvZHJt
LmMKPj4gPiBpbmRleCAwNGZiOWEzOTg3NDAuLjBlYTdmMDYxOWUyNSAxMDA2NDQKPj4gPiAtLS0g
YS9rZXJuZWwvY2dyb3VwL2RybS5jCj4+ID4gKysrIGIva2VybmVsL2Nncm91cC9kcm0uYwo+PiA+
IEBAIC04MDQsNiArODA0LDI5IEBAIHZvaWQgZHJtY2dfZGV2aWNlX2Vhcmx5X2luaXQoc3RydWN0
IGRybV9kZXZpY2UgKmRldikKPj4gPiAgIH0KPj4gPiAgIEVYUE9SVF9TWU1CT0woZHJtY2dfZGV2
aWNlX2Vhcmx5X2luaXQpOwo+PiA+Cj4+ID4gK3ZvaWQgZHJtY2dfcmVnaXN0ZXJfZGV2aWNlX21t
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHVuc2lnbmVkIGludCB0eXBlLAo+PiA+ICsgICAgICAg
ICAgICAgc3RydWN0IHdvcmtfc3RydWN0ICp3cSkKPj4gPiArewo+PiA+ICsgICAgIGlmIChkZXYg
PT0gTlVMTCB8fCB0eXBlID49IFRUTV9QTF9QUklWKQo+PiA+ICsgICAgICAgICAgICAgcmV0dXJu
Owo+PiA+ICsKPj4gPiArICAgICBtdXRleF9sb2NrKCZkcm1jZ19tdXRleCk7Cj4+ID4gKyAgICAg
ZGV2LT5kcm1jZ19wcm9wcy5tZW1fcmVjbGFpbV93cVt0eXBlXSA9IHdxOwo+PiA+ICsgICAgIG11
dGV4X3VubG9jaygmZHJtY2dfbXV0ZXgpOwo+PiA+ICt9Cj4+ID4gK0VYUE9SVF9TWU1CT0woZHJt
Y2dfcmVnaXN0ZXJfZGV2aWNlX21tKTsKPj4gPiArCj4+ID4gK3ZvaWQgZHJtY2dfdW5yZWdpc3Rl
cl9kZXZpY2VfbW0oc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdW5zaWduZWQgaW50IHR5cGUpCj4+
ID4gK3sKPj4gPiArICAgICBpZiAoZGV2ID09IE5VTEwgfHwgdHlwZSA+PSBUVE1fUExfUFJJVikK
Pj4gPiArICAgICAgICAgICAgIHJldHVybjsKPj4gPiArCj4+ID4gKyAgICAgbXV0ZXhfbG9jaygm
ZHJtY2dfbXV0ZXgpOwo+PiA+ICsgICAgIGRldi0+ZHJtY2dfcHJvcHMubWVtX3JlY2xhaW1fd3Fb
dHlwZV0gPSBOVUxMOwo+PiA+ICsgICAgIG11dGV4X3VubG9jaygmZHJtY2dfbXV0ZXgpOwo+PiA+
ICt9Cj4+ID4gK0VYUE9SVF9TWU1CT0woZHJtY2dfdW5yZWdpc3Rlcl9kZXZpY2VfbW0pOwo+PiA+
ICsKPj4gPiAgIC8qKgo+PiA+ICAgICogZHJtY2dfdHJ5X2NoZ19ib19hbGxvYyAtIGNoYXJnZSBH
RU0gYnVmZmVyIHVzYWdlIGZvciBhIGRldmljZSBhbmQgY2dyb3VwCj4+ID4gICAgKiBAZHJtY2c6
IHRoZSBEUk0gY2dyb3VwIHRvIGJlIGNoYXJnZWQgdG8KPj4gPiBAQCAtMTAxMyw2ICsxMDM2LDEz
IEBAIHZvaWQgZHJtY2dfbWVtX3RyYWNrX21vdmUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpv
bGRfYm8sIGJvb2wgZXZpY3QsCj4+ID4KPj4gPiAgICAgICAgICAgICAgIGRkci0+bWVtX2J3X3N0
YXRzW0RSTUNHX01FTV9CV19BVFRSX0JZVEVfQ1JFRElUXQo+PiA+ICAgICAgICAgICAgICAgICAg
ICAgICAtPSBtb3ZlX2luX2J5dGVzOwo+PiA+ICsKPj4gPiArICAgICAgICAgICAgIGlmIChkZXYt
PmRybWNnX3Byb3BzLm1lbV9yZWNsYWltX3dxW25ld19tZW1fdHlwZV0KPj4gPiArICAgICAgICAg
ICAgICAgICAgICAgIT0gTlVMTCAmJgo+PiA+ICsgICAgICAgICAgICAgICAgICAgICBkZHItPm1l
bV9zdGF0c1tuZXdfbWVtX3R5cGVdID4KPj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBkZHItPm1lbV9oaWdoc1tuZXdfbWVtX3R5cGVdKQo+PiA+ICsgICAgICAgICAgICAgICAgICAg
ICBzY2hlZHVsZV93b3JrKGRldi0+Cj4+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZHJtY2dfcHJvcHMubWVtX3JlY2xhaW1fd3FbbmV3X21lbV90eXBlXSk7Cj4+ID4gICAgICAgfQo+
PiA+ICAgICAgIG11dGV4X3VubG9jaygmZGV2LT5kcm1jZ19tdXRleCk7Cj4+ID4gICB9Cj4+Cj4K
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVs
IG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
