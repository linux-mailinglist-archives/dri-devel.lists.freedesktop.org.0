Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5E51082C91
	for <lists+dri-devel@lfdr.de>; Tue,  6 Aug 2019 09:25:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AB5D589D99;
	Tue,  6 Aug 2019 07:24:37 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from onstation.org (onstation.org [52.200.56.107])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 07A856E2E0;
 Tue,  6 Aug 2019 00:23:00 +0000 (UTC)
Received: from localhost.localdomain (c-98-239-145-235.hsd1.wv.comcast.net
 [98.239.145.235])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: masneyb)
 by onstation.org (Postfix) with ESMTPSA id 0A78F3E9D1;
 Tue,  6 Aug 2019 00:22:59 +0000 (UTC)
From: Brian Masney <masneyb@onstation.org>
To: agross@kernel.org, robdclark@gmail.com, sean@poorly.run,
 robh+dt@kernel.org, bjorn.andersson@linaro.org
Subject: [PATCH v5 6/7] drm/msm/gpu: add ocmem init/cleanup functions
Date: Mon,  5 Aug 2019 20:22:28 -0400
Message-Id: <20190806002229.8304-7-masneyb@onstation.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190806002229.8304-1-masneyb@onstation.org>
References: <20190806002229.8304-1-masneyb@onstation.org>
X-Mailman-Approved-At: Tue, 06 Aug 2019 07:24:35 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=onstation.org; s=default; t=1565050979;
 bh=TU+aj7iLeGNHlmaWkw+cWAORepretOpPBHO9330hhMI=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=KH9TXUuxgoGoVP7v0oq/w6j3BQVj/ZDNct+PgkqIb8dSODybYPBUl/q3EpcXkpzf1
 iMBhsngJSUHRUUvu8sGjY8w7n3h1ikNg+UZibg+VwT7rdh+a8e9ey5UOATD63TWRIE
 gca/lfhQV5D5y7Rk1SbBbsxR17pi6pSnb2OH46Bs=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org, jonathan@marek.ca,
 airlied@linux.ie, linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, freedreno@lists.freedesktop.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGZpbGVzIGEzeHhfZ3B1LmMgYW5kIGE0eHhfZ3B1LmMgaGF2ZSBpZmRlZnMgZm9yIHRoZSBP
Q01FTSBzdXBwb3J0CnRoYXQgd2FzIG1pc3NpbmcgdXBzdHJlYW0uIEFkZCB0d28gbmV3IGZ1bmN0
aW9ucyAoYWRyZW5vX2dwdV9vY21lbV9pbml0CmFuZCBhZHJlbm9fZ3B1X29jbWVtX2NsZWFudXAp
IHRoYXQgcmVtb3ZlcyBzb21lIGR1cGxpY2F0ZWQgY29kZS4KClNpZ25lZC1vZmYtYnk6IEJyaWFu
IE1hc25leSA8bWFzbmV5YkBvbnN0YXRpb24ub3JnPgotLS0KQ2hhbmdlcyBzaW5jZSB2NDoKLSBO
b25lCgpDaGFuZ2VzIHNpbmNlIHYzOgotIE5vbmUKCkNoYW5nZXMgc2luY2UgdjI6Ci0gQ2hlY2sg
Zm9yIC1FTk9ERVYgZXJyb3Igb2ZfZ2V0X29jbWVtKCkKLSByZW1vdmUgZmFpbF9jbGVhbnVwX29j
bWVtIGxhYmVsIGluIGFbMzRdeHhfZ3B1X2luaXQKCkNoYW5nZXMgc2luY2UgdjE6Ci0gcmVtb3Zl
IENPTkZJR19RQ09NX09DTUVNICNpZmRlZnMKLSB1c2UgdW5zaWduZWQgbG9uZyBmb3IgbWVtb3J5
IGFkZHJlc3NlcyBpbnN0ZWFkIG9mIHVpbnQzMl90Ci0gYWRkICdkZXBlbmRzIG9uIFFDT01fT0NN
RU0gfHwgUUNPTV9PQ01FTT1uJyB0byBLY29uZmlnCgogZHJpdmVycy9ncHUvZHJtL21zbS9LY29u
ZmlnICAgICAgICAgICAgIHwgIDEgKwogZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTN4eF9n
cHUuYyAgIHwgMjggKysrKystLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5v
L2EzeHhfZ3B1LmggICB8ICAzICstCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNHh4X2dw
dS5jICAgfCAyNSArKysrLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9h
NHh4X2dwdS5oICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2dw
dS5jIHwgNDAgKysrKysrKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL21zbS9h
ZHJlbm8vYWRyZW5vX2dwdS5oIHwgMTAgKysrKysrKwogNyBmaWxlcyBjaGFuZ2VkLCA2NiBpbnNl
cnRpb25zKCspLCA0NCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
bXNtL0tjb25maWcgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL0tjb25maWcKaW5kZXggOWMzN2U0ZGU1
ODk2Li5iM2QzYjIxNzI2NTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vS2NvbmZp
ZworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL0tjb25maWcKQEAgLTcsNiArNyw3IEBAIGNvbmZp
ZyBEUk1fTVNNCiAJZGVwZW5kcyBvbiBPRiAmJiBDT01NT05fQ0xLCiAJZGVwZW5kcyBvbiBNTVUK
IAlkZXBlbmRzIG9uIElOVEVSQ09OTkVDVCB8fCAhSU5URVJDT05ORUNUCisJZGVwZW5kcyBvbiBR
Q09NX09DTUVNIHx8IFFDT01fT0NNRU09bgogCXNlbGVjdCBRQ09NX01EVF9MT0FERVIgaWYgQVJD
SF9RQ09NCiAJc2VsZWN0IFJFR1VMQVRPUgogCXNlbGVjdCBEUk1fS01TX0hFTFBFUgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTN4eF9ncHUuYyBiL2RyaXZlcnMvZ3B1
L2RybS9tc20vYWRyZW5vL2EzeHhfZ3B1LmMKaW5kZXggZWM4MmFhYTIxNzM0Li4wN2RkY2M1Mjk1
NzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2EzeHhfZ3B1LmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTN4eF9ncHUuYwpAQCAtNiwxMCArNiw2IEBA
CiAgKiBDb3B5cmlnaHQgKGMpIDIwMTQgVGhlIExpbnV4IEZvdW5kYXRpb24uIEFsbCByaWdodHMg
cmVzZXJ2ZWQuCiAgKi8KIAotI2lmZGVmIENPTkZJR19NU01fT0NNRU0KLSMgIGluY2x1ZGUgPG1h
Y2gvb2NtZW0uaD4KLSNlbmRpZgotCiAjaW5jbHVkZSAiYTN4eF9ncHUuaCIKIAogI2RlZmluZSBB
M1hYX0lOVDBfTUFTSyBcCkBAIC0xOTUsOSArMTkxLDkgQEAgc3RhdGljIGludCBhM3h4X2h3X2lu
aXQoc3RydWN0IG1zbV9ncHUgKmdwdSkKIAkJZ3B1X3dyaXRlKGdwdSwgUkVHX0EzWFhfUkJCTV9H
UFIwX0NUTCwgMHgwMDAwMDAwMCk7CiAKIAkvKiBTZXQgdGhlIE9DTUVNIGJhc2UgYWRkcmVzcyBm
b3IgQTMzMCwgZXRjICovCi0JaWYgKGEzeHhfZ3B1LT5vY21lbV9oZGwpIHsKKwlpZiAoYTN4eF9n
cHUtPm9jbWVtLmhkbCkgewogCQlncHVfd3JpdGUoZ3B1LCBSRUdfQTNYWF9SQl9HTUVNX0JBU0Vf
QUREUiwKLQkJCSh1bnNpZ25lZCBpbnQpKGEzeHhfZ3B1LT5vY21lbV9iYXNlID4+IDE0KSk7CisJ
CQkodW5zaWduZWQgaW50KShhM3h4X2dwdS0+b2NtZW0uYmFzZSA+PiAxNCkpOwogCX0KIAogCS8q
IFR1cm4gb24gcGVyZm9ybWFuY2UgY291bnRlcnM6ICovCkBAIC0zMTgsMTAgKzMxNCw3IEBAIHN0
YXRpYyB2b2lkIGEzeHhfZGVzdHJveShzdHJ1Y3QgbXNtX2dwdSAqZ3B1KQogCiAJYWRyZW5vX2dw
dV9jbGVhbnVwKGFkcmVub19ncHUpOwogCi0jaWZkZWYgQ09ORklHX01TTV9PQ01FTQotCWlmIChh
M3h4X2dwdS0+b2NtZW1fYmFzZSkKLQkJb2NtZW1fZnJlZShPQ01FTV9HUkFQSElDUywgYTN4eF9n
cHUtPm9jbWVtX2hkbCk7Ci0jZW5kaWYKKwlhZHJlbm9fZ3B1X29jbWVtX2NsZWFudXAoJmEzeHhf
Z3B1LT5vY21lbSk7CiAKIAlrZnJlZShhM3h4X2dwdSk7CiB9CkBAIC00OTQsMTcgKzQ4NywxMCBA
QCBzdHJ1Y3QgbXNtX2dwdSAqYTN4eF9ncHVfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQog
CiAJLyogaWYgbmVlZGVkLCBhbGxvY2F0ZSBnbWVtOiAqLwogCWlmIChhZHJlbm9faXNfYTMzMChh
ZHJlbm9fZ3B1KSkgewotI2lmZGVmIENPTkZJR19NU01fT0NNRU0KLQkJLyogVE9ETyB0aGlzIGlz
IGRpZmZlcmVudC9taXNzaW5nIHVwc3RyZWFtOiAqLwotCQlzdHJ1Y3Qgb2NtZW1fYnVmICpvY21l
bV9oZGwgPQotCQkJCW9jbWVtX2FsbG9jYXRlKE9DTUVNX0dSQVBISUNTLCBhZHJlbm9fZ3B1LT5n
bWVtKTsKLQotCQlhM3h4X2dwdS0+b2NtZW1faGRsID0gb2NtZW1faGRsOwotCQlhM3h4X2dwdS0+
b2NtZW1fYmFzZSA9IG9jbWVtX2hkbC0+YWRkcjsKLQkJYWRyZW5vX2dwdS0+Z21lbSA9IG9jbWVt
X2hkbC0+bGVuOwotCQlEQkcoInVzaW5nICVkSyBvZiBPQ01FTSBhdCAweCUwOHgiLCBhZHJlbm9f
Z3B1LT5nbWVtIC8gMTAyNCwKLQkJCQlhM3h4X2dwdS0+b2NtZW1fYmFzZSk7Ci0jZW5kaWYKKwkJ
cmV0ID0gYWRyZW5vX2dwdV9vY21lbV9pbml0KCZhZHJlbm9fZ3B1LT5iYXNlLnBkZXYtPmRldiwK
KwkJCQkJICAgIGFkcmVub19ncHUsICZhM3h4X2dwdS0+b2NtZW0pOworCQlpZiAocmV0KQorCQkJ
Z290byBmYWlsOwogCX0KIAogCWlmICghZ3B1LT5hc3BhY2UpIHsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9tc20vYWRyZW5vL2EzeHhfZ3B1LmggYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Fk
cmVuby9hM3h4X2dwdS5oCmluZGV4IDVkYzMzZTVlYTUzYi4uYzU1NWZiMTNlMGQ3IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hM3h4X2dwdS5oCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9tc20vYWRyZW5vL2EzeHhfZ3B1LmgKQEAgLTE5LDggKzE5LDcgQEAgc3RydWN0IGEz
eHhfZ3B1IHsKIAlzdHJ1Y3QgYWRyZW5vX2dwdSBiYXNlOwogCiAJLyogaWYgT0NNRU0gaXMgdXNl
ZCBmb3IgR01FTTogKi8KLQl1aW50MzJfdCBvY21lbV9iYXNlOwotCXZvaWQgKm9jbWVtX2hkbDsK
KwlzdHJ1Y3QgYWRyZW5vX29jbWVtIG9jbWVtOwogfTsKICNkZWZpbmUgdG9fYTN4eF9ncHUoeCkg
Y29udGFpbmVyX29mKHgsIHN0cnVjdCBhM3h4X2dwdSwgYmFzZSkKIApkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTR4eF9ncHUuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20v
YWRyZW5vL2E0eHhfZ3B1LmMKaW5kZXggYWIyYjc1MjU2NmQ4Li5iMDEzODhhOWU4OWUgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E0eHhfZ3B1LmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL21zbS9hZHJlbm8vYTR4eF9ncHUuYwpAQCAtMiw5ICsyLDYgQEAKIC8qIENvcHly
aWdodCAoYykgMjAxNCBUaGUgTGludXggRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4K
ICAqLwogI2luY2x1ZGUgImE0eHhfZ3B1LmgiCi0jaWZkZWYgQ09ORklHX01TTV9PQ01FTQotIyAg
aW5jbHVkZSA8c29jL3Fjb20vb2NtZW0uaD4KLSNlbmRpZgogCiAjZGVmaW5lIEE0WFhfSU5UMF9N
QVNLIFwKIAkoQTRYWF9JTlQwX1JCQk1fQUhCX0VSUk9SIHwgICAgICAgIFwKQEAgLTE4OCw3ICsx
ODUsNyBAQCBzdGF0aWMgaW50IGE0eHhfaHdfaW5pdChzdHJ1Y3QgbXNtX2dwdSAqZ3B1KQogCQkJ
KDEgPDwgMzApIHwgMHhGRkZGKTsKIAogCWdwdV93cml0ZShncHUsIFJFR19BNFhYX1JCX0dNRU1f
QkFTRV9BRERSLAotCQkJKHVuc2lnbmVkIGludCkoYTR4eF9ncHUtPm9jbWVtX2Jhc2UgPj4gMTQp
KTsKKwkJCSh1bnNpZ25lZCBpbnQpKGE0eHhfZ3B1LT5vY21lbS5iYXNlID4+IDE0KSk7CiAKIAkv
KiBUdXJuIG9uIHBlcmZvcm1hbmNlIGNvdW50ZXJzOiAqLwogCWdwdV93cml0ZShncHUsIFJFR19B
NFhYX1JCQk1fUEVSRkNUUl9DVEwsIDB4MDEpOwpAQCAtMzE4LDEwICszMTUsNyBAQCBzdGF0aWMg
dm9pZCBhNHh4X2Rlc3Ryb3koc3RydWN0IG1zbV9ncHUgKmdwdSkKIAogCWFkcmVub19ncHVfY2xl
YW51cChhZHJlbm9fZ3B1KTsKIAotI2lmZGVmIENPTkZJR19NU01fT0NNRU0KLQlpZiAoYTR4eF9n
cHUtPm9jbWVtX2Jhc2UpCi0JCW9jbWVtX2ZyZWUoT0NNRU1fR1JBUEhJQ1MsIGE0eHhfZ3B1LT5v
Y21lbV9oZGwpOwotI2VuZGlmCisJYWRyZW5vX2dwdV9vY21lbV9jbGVhbnVwKCZhNHh4X2dwdS0+
b2NtZW0pOwogCiAJa2ZyZWUoYTR4eF9ncHUpOwogfQpAQCAtNTc4LDE3ICs1NzIsMTAgQEAgc3Ry
dWN0IG1zbV9ncHUgKmE0eHhfZ3B1X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldikKIAogCS8q
IGlmIG5lZWRlZCwgYWxsb2NhdGUgZ21lbTogKi8KIAlpZiAoYWRyZW5vX2lzX2E0eHgoYWRyZW5v
X2dwdSkpIHsKLSNpZmRlZiBDT05GSUdfTVNNX09DTUVNCi0JCS8qIFRPRE8gdGhpcyBpcyBkaWZm
ZXJlbnQvbWlzc2luZyB1cHN0cmVhbTogKi8KLQkJc3RydWN0IG9jbWVtX2J1ZiAqb2NtZW1faGRs
ID0KLQkJCQlvY21lbV9hbGxvY2F0ZShPQ01FTV9HUkFQSElDUywgYWRyZW5vX2dwdS0+Z21lbSk7
Ci0KLQkJYTR4eF9ncHUtPm9jbWVtX2hkbCA9IG9jbWVtX2hkbDsKLQkJYTR4eF9ncHUtPm9jbWVt
X2Jhc2UgPSBvY21lbV9oZGwtPmFkZHI7Ci0JCWFkcmVub19ncHUtPmdtZW0gPSBvY21lbV9oZGwt
PmxlbjsKLQkJREJHKCJ1c2luZyAlZEsgb2YgT0NNRU0gYXQgMHglMDh4IiwgYWRyZW5vX2dwdS0+
Z21lbSAvIDEwMjQsCi0JCQkJYTR4eF9ncHUtPm9jbWVtX2Jhc2UpOwotI2VuZGlmCisJCXJldCA9
IGFkcmVub19ncHVfb2NtZW1faW5pdChkZXYtPmRldiwgYWRyZW5vX2dwdSwKKwkJCQkJICAgICZh
NHh4X2dwdS0+b2NtZW0pOworCQlpZiAocmV0KQorCQkJZ290byBmYWlsOwogCX0KIAogCWlmICgh
Z3B1LT5hc3BhY2UpIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E0
eHhfZ3B1LmggYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNHh4X2dwdS5oCmluZGV4IGQ1
MDYzMTFlZTI0MC4uYTAxNDQ4Y2JhMmVhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNt
L2FkcmVuby9hNHh4X2dwdS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E0eHhf
Z3B1LmgKQEAgLTE2LDggKzE2LDcgQEAgc3RydWN0IGE0eHhfZ3B1IHsKIAlzdHJ1Y3QgYWRyZW5v
X2dwdSBiYXNlOwogCiAJLyogaWYgT0NNRU0gaXMgdXNlZCBmb3IgR01FTTogKi8KLQl1aW50MzJf
dCBvY21lbV9iYXNlOwotCXZvaWQgKm9jbWVtX2hkbDsKKwlzdHJ1Y3QgYWRyZW5vX29jbWVtIG9j
bWVtOwogfTsKICNkZWZpbmUgdG9fYTR4eF9ncHUoeCkgY29udGFpbmVyX29mKHgsIHN0cnVjdCBh
NHh4X2dwdSwgYmFzZSkKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8v
YWRyZW5vX2dwdS5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2dwdS5jCmlu
ZGV4IDA0OGM4YmU0MjZmMy4uMDc4M2U0YjU0ODZhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vbXNtL2FkcmVuby9hZHJlbm9fZ3B1LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJl
bm8vYWRyZW5vX2dwdS5jCkBAIC0xNCw2ICsxNCw3IEBACiAjaW5jbHVkZSA8bGludXgvcG1fb3Bw
Lmg+CiAjaW5jbHVkZSA8bGludXgvc2xhYi5oPgogI2luY2x1ZGUgPGxpbnV4L3NvYy9xY29tL21k
dF9sb2FkZXIuaD4KKyNpbmNsdWRlIDxzb2MvcWNvbS9vY21lbS5oPgogI2luY2x1ZGUgImFkcmVu
b19ncHUuaCIKICNpbmNsdWRlICJtc21fZ2VtLmgiCiAjaW5jbHVkZSAibXNtX21tdS5oIgpAQCAt
ODkzLDYgKzg5NCw0NSBAQCBzdGF0aWMgaW50IGFkcmVub19nZXRfcHdybGV2ZWxzKHN0cnVjdCBk
ZXZpY2UgKmRldiwKIAlyZXR1cm4gMDsKIH0KIAoraW50IGFkcmVub19ncHVfb2NtZW1faW5pdChz
dHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBhZHJlbm9fZ3B1ICphZHJlbm9fZ3B1LAorCQkJICBz
dHJ1Y3QgYWRyZW5vX29jbWVtICphZHJlbm9fb2NtZW0pCit7CisJc3RydWN0IG9jbWVtX2J1ZiAq
b2NtZW1faGRsOworCXN0cnVjdCBvY21lbSAqb2NtZW07CisKKwlvY21lbSA9IG9mX2dldF9vY21l
bShkZXYpOworCWlmIChJU19FUlIob2NtZW0pKSB7CisJCWlmIChQVFJfRVJSKG9jbWVtKSA9PSAt
RU5PREVWKSB7CisJCQkvKgorCQkJICogUmV0dXJuIHN1Y2Nlc3Mgc2luY2UgZWl0aGVyIHRoZSBv
Y21lbSBwcm9wZXJ0eSB3YXMKKwkJCSAqIG5vdCBzcGVjaWZpZWQgaW4gZGV2aWNlIHRyZWUsIG9y
IG9jbWVtIHN1cHBvcnQgaXMKKwkJCSAqIG5vdCBjb21waWxlZCBpbnRvIHRoZSBrZXJuZWwuCisJ
CQkgKi8KKwkJCXJldHVybiAwOworCQl9CisKKwkJcmV0dXJuIFBUUl9FUlIob2NtZW0pOworCX0K
KworCW9jbWVtX2hkbCA9IG9jbWVtX2FsbG9jYXRlKG9jbWVtLCBPQ01FTV9HUkFQSElDUywgYWRy
ZW5vX2dwdS0+Z21lbSk7CisJaWYgKElTX0VSUihvY21lbV9oZGwpKQorCQlyZXR1cm4gUFRSX0VS
UihvY21lbV9oZGwpOworCisJYWRyZW5vX29jbWVtLT5vY21lbSA9IG9jbWVtOworCWFkcmVub19v
Y21lbS0+YmFzZSA9IG9jbWVtX2hkbC0+YWRkcjsKKwlhZHJlbm9fb2NtZW0tPmhkbCA9IG9jbWVt
X2hkbDsKKwlhZHJlbm9fZ3B1LT5nbWVtID0gb2NtZW1faGRsLT5sZW47CisKKwlyZXR1cm4gMDsK
K30KKwordm9pZCBhZHJlbm9fZ3B1X29jbWVtX2NsZWFudXAoc3RydWN0IGFkcmVub19vY21lbSAq
YWRyZW5vX29jbWVtKQoreworCWlmIChhZHJlbm9fb2NtZW0gJiYgYWRyZW5vX29jbWVtLT5iYXNl
KQorCQlvY21lbV9mcmVlKGFkcmVub19vY21lbS0+b2NtZW0sIE9DTUVNX0dSQVBISUNTLAorCQkJ
ICAgYWRyZW5vX29jbWVtLT5oZGwpOworfQorCiBpbnQgYWRyZW5vX2dwdV9pbml0KHN0cnVjdCBk
cm1fZGV2aWNlICpkcm0sIHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYsCiAJCXN0cnVjdCBh
ZHJlbm9fZ3B1ICphZHJlbm9fZ3B1LAogCQljb25zdCBzdHJ1Y3QgYWRyZW5vX2dwdV9mdW5jcyAq
ZnVuY3MsIGludCBucl9yaW5ncykKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRy
ZW5vL2FkcmVub19ncHUuaCBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19ncHUu
aAppbmRleCBjNzQ0MWZiODMxM2UuLmQyMjVhOGE5MmU1OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2dwdS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20v
YWRyZW5vL2FkcmVub19ncHUuaApAQCAtMTI2LDYgKzEyNiwxMiBAQCBzdHJ1Y3QgYWRyZW5vX2dw
dSB7CiB9OwogI2RlZmluZSB0b19hZHJlbm9fZ3B1KHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3Qg
YWRyZW5vX2dwdSwgYmFzZSkKIAorc3RydWN0IGFkcmVub19vY21lbSB7CisJc3RydWN0IG9jbWVt
ICpvY21lbTsKKwl1bnNpZ25lZCBsb25nIGJhc2U7CisJdm9pZCAqaGRsOworfTsKKwogLyogcGxh
dGZvcm0gY29uZmlnIGRhdGEgKGllLiBmcm9tIERULCBvciBwZGF0YSkgKi8KIHN0cnVjdCBhZHJl
bm9fcGxhdGZvcm1fY29uZmlnIHsKIAlzdHJ1Y3QgYWRyZW5vX3JldiByZXY7CkBAIC0yMzYsNiAr
MjQyLDEwIEBAIHZvaWQgYWRyZW5vX2R1bXAoc3RydWN0IG1zbV9ncHUgKmdwdSk7CiB2b2lkIGFk
cmVub193YWl0X3Jpbmcoc3RydWN0IG1zbV9yaW5nYnVmZmVyICpyaW5nLCB1aW50MzJfdCBuZHdv
cmRzKTsKIHN0cnVjdCBtc21fcmluZ2J1ZmZlciAqYWRyZW5vX2FjdGl2ZV9yaW5nKHN0cnVjdCBt
c21fZ3B1ICpncHUpOwogCitpbnQgYWRyZW5vX2dwdV9vY21lbV9pbml0KHN0cnVjdCBkZXZpY2Ug
KmRldiwgc3RydWN0IGFkcmVub19ncHUgKmFkcmVub19ncHUsCisJCQkgIHN0cnVjdCBhZHJlbm9f
b2NtZW0gKm9jbWVtKTsKK3ZvaWQgYWRyZW5vX2dwdV9vY21lbV9jbGVhbnVwKHN0cnVjdCBhZHJl
bm9fb2NtZW0gKm9jbWVtKTsKKwogaW50IGFkcmVub19ncHVfaW5pdChzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZHJtLCBzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2LAogCQlzdHJ1Y3QgYWRyZW5vX2dw
dSAqZ3B1LCBjb25zdCBzdHJ1Y3QgYWRyZW5vX2dwdV9mdW5jcyAqZnVuY3MsCiAJCWludCBucl9y
aW5ncyk7Ci0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2Ry
aS1kZXZlbA==
