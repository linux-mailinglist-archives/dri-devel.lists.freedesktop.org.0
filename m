Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C6D2C7D3E0
	for <lists+dri-devel@lfdr.de>; Thu,  1 Aug 2019 05:45:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3CE616E357;
	Thu,  1 Aug 2019 03:45:18 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x544.google.com (mail-pg1-x544.google.com
 [IPv6:2607:f8b0:4864:20::544])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 10A4F6E354
 for <dri-devel@lists.freedesktop.org>; Thu,  1 Aug 2019 03:45:16 +0000 (UTC)
Received: by mail-pg1-x544.google.com with SMTP id d1so455158pgp.4
 for <dri-devel@lists.freedesktop.org>; Wed, 31 Jul 2019 20:45:16 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=d3sEljspMlQIAiShTnfM2IjhPeCj5SRiVz8r3dXvpDo=;
 b=cmwEhNl/6wBX9oUfytrxj/zxZvGE0dZpqJU6gwyHa9ZQrCntsYAMdD7U8VBw/Lyoa9
 aynKMy93NkOm2hrvT5F8rZyaVWFAUmSsxeX29Q+itgqHzTuUAoJS0DbeDvtvSAchJ8TA
 bXuB731ycubb0oNYPA90fIA/7yuU1uDO0rVVKepAu+qs+TkUQDv+MgRqBEhE/1h0krKa
 lZJ1bDxeCr0HvfYUHbN+QEik03G6bAq4LUfh2qnsY3fiFDbrTV4RNjRK01SFzHftQr3o
 qZf+z0twVNuwXZTT5HywdYysRIoLSDnM4ZHrFUh3MDPiFQ3toEuaUqTpYyDRxNqruczP
 vcsg==
X-Gm-Message-State: APjAAAX8hmfCr5yMuHVp5y5Wd7Th8qgjaWnpYqtwl73bAyUuKqjqT6YM
 qgOK1Qa1NcK8TKVzYFr+99B+UQ==
X-Google-Smtp-Source: APXvYqyD/YWV+1Wx506fls2aoMsn8TTMxGWQILHtVKrHObaPsnrK/p/p43Zc7qzvH6Z8uzb593UFlw==
X-Received: by 2002:a63:b346:: with SMTP id x6mr117423145pgt.218.1564631115305; 
 Wed, 31 Jul 2019 20:45:15 -0700 (PDT)
Received: from localhost.localdomain ([2601:1c2:680:1319:692:26ff:feda:3a81])
 by smtp.gmail.com with ESMTPSA id
 h70sm64775674pgc.36.2019.07.31.20.45.13
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 31 Jul 2019 20:45:14 -0700 (PDT)
From: John Stultz <john.stultz@linaro.org>
To: lkml <linux-kernel@vger.kernel.org>
Subject: [PATCH v3 19/26] drm: kirin: Move drm driver to driver data
Date: Thu,  1 Aug 2019 03:44:32 +0000
Message-Id: <20190801034439.98227-20-john.stultz@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190801034439.98227-1-john.stultz@linaro.org>
References: <20190801034439.98227-1-john.stultz@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=d3sEljspMlQIAiShTnfM2IjhPeCj5SRiVz8r3dXvpDo=;
 b=BydHUUSiT20SAUk27O+sKiKIquEgQlulyY6dU/gC2UmKgEktIN0Rx/LvVfS7gs2qto
 tmlBJEWvWywWG4tdoS6df9QyBp7bl/llwZW9M4/Wn/dTE7Ljrn6Rhklm1dIW3zEXipH5
 d6OZU6RjSWgQXDLazTgi5fGbQ/PP5dufywgI8jXGgHb3aWWNCh21uxqBnYQ7L4XrVXBB
 s9kIwzzS0LQyLeiI2v1T4RCcucF8GHsAnsIjekCFMJ5oPvFvpgGtePG/7mpYll7pdD18
 UY2xMDZzBjmZPgB+dNvQo2fgyiH5zWeVj/MG6Y1BUGKLkhKL8ieGCWv/Mbs2TL1QI1uD
 1sxQ==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Xu YiPing <xuyiping@hisilicon.com>, David Airlie <airlied@linux.ie>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Rongrong Zou <zourongrong@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogWHUgWWlQaW5nIDx4dXlpcGluZ0BoaXNpbGljb24uY29tPgoKQXMgcGFydCBvZiByZWZh
Y3RvcmluZyB0aGUga2lyaW4gZHJpdmVyIHRvIGJldHRlciBzdXBwb3J0CmRpZmZlcmVudCBoYXJk
d2FyZSByZXZpc2lvbnMsIHRoaXMgcGF0Y2ggbW92ZXMgdGhlIGRybV9kcml2ZXIKc3RydWN0dXJl
IHRvIGJlIHVuZGVyIGRldmljZSBzcGVjaWZpYyBkcml2ZXIgZGF0YS4KClRoaXMgd2lsbCBhbGxv
dyB1cyB0byBtb3JlIGVhc2lseSBhZGQgc3VwcG9ydCBmb3Iga2lyaW45NjAKaGFyZHdhcmUgd2l0
aCBsYXRlciBwYXRjaGVzLgoKQ2M6IFJvbmdyb25nIFpvdSA8em91cm9uZ3JvbmdAZ21haWwuY29t
PgpDYzogRGF2aWQgQWlybGllIDxhaXJsaWVkQGxpbnV4LmllPgpDYzogRGFuaWVsIFZldHRlciA8
ZGFuaWVsQGZmd2xsLmNoPgpDYzogZHJpLWRldmVsIDxkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0
b3Aub3JnPgpDYzogU2FtIFJhdm5ib3JnIDxzYW1AcmF2bmJvcmcub3JnPgpSZXZpZXdlZC1ieTog
U2FtIFJhdm5ib3JnIDxzYW1AcmF2bmJvcmcub3JnPgpTaWduZWQtb2ZmLWJ5OiBYdSBZaVBpbmcg
PHh1eWlwaW5nQGhpc2lsaWNvbi5jb20+Cltqc3R1bHR6OiBSZXdvcmRlZCBjb21taXQgbWVzc2Fn
ZV0KU2lnbmVkLW9mZi1ieTogSm9obiBTdHVsdHogPGpvaG4uc3R1bHR6QGxpbmFyby5vcmc+Ci0t
LQogLi4uL2dwdS9kcm0vaGlzaWxpY29uL2tpcmluL2tpcmluX2RybV9hZGUuYyAgIHwgMjcgKysr
KysrKysrKysrKwogLi4uL2dwdS9kcm0vaGlzaWxpY29uL2tpcmluL2tpcmluX2RybV9kcnYuYyAg
IHwgMzggKy0tLS0tLS0tLS0tLS0tLS0tLQogLi4uL2dwdS9kcm0vaGlzaWxpY29uL2tpcmluL2tp
cmluX2RybV9kcnYuaCAgIHwgIDEgKwogMyBmaWxlcyBjaGFuZ2VkLCAyOSBpbnNlcnRpb25zKCsp
LCAzNyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaGlzaWxpY29u
L2tpcmluL2tpcmluX2RybV9hZGUuYyBiL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4v
a2lyaW5fZHJtX2FkZS5jCmluZGV4IDY4ZWZkNTA4ZDg2Yi4uMGJjMmU1Mzg5MTNiIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaGlzaWxpY29uL2tpcmluL2tpcmluX2RybV9hZGUuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaGlzaWxpY29uL2tpcmluL2tpcmluX2RybV9hZGUuYwpAQCAtMTA0
OSw2ICsxMDQ5LDMyIEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX21vZGVfY29uZmlnX2Z1bmNz
IGFkZV9tb2RlX2NvbmZpZ19mdW5jcyA9IHsKIAogfTsKIAorREVGSU5FX0RSTV9HRU1fQ01BX0ZP
UFMoYWRlX2ZvcHMpOworCitzdGF0aWMgc3RydWN0IGRybV9kcml2ZXIgYWRlX2RyaXZlciA9IHsK
KwkuZHJpdmVyX2ZlYXR1cmVzID0gRFJJVkVSX0dFTSB8IERSSVZFUl9NT0RFU0VUIHwgRFJJVkVS
X1BSSU1FIHwKKwkJCQkgIERSSVZFUl9BVE9NSUMsCisJLmZvcHMgPSAmYWRlX2ZvcHMsCisJLmdl
bV9mcmVlX29iamVjdF91bmxvY2tlZCA9IGRybV9nZW1fY21hX2ZyZWVfb2JqZWN0LAorCS5nZW1f
dm1fb3BzID0gJmRybV9nZW1fY21hX3ZtX29wcywKKwkuZHVtYl9jcmVhdGUgPSBkcm1fZ2VtX2Nt
YV9kdW1iX2NyZWF0ZV9pbnRlcm5hbCwKKwkucHJpbWVfaGFuZGxlX3RvX2ZkCT0gZHJtX2dlbV9w
cmltZV9oYW5kbGVfdG9fZmQsCisJLnByaW1lX2ZkX3RvX2hhbmRsZQk9IGRybV9nZW1fcHJpbWVf
ZmRfdG9faGFuZGxlLAorCS5nZW1fcHJpbWVfZXhwb3J0ID0gZHJtX2dlbV9wcmltZV9leHBvcnQs
CisJLmdlbV9wcmltZV9pbXBvcnQgPSBkcm1fZ2VtX3ByaW1lX2ltcG9ydCwKKwkuZ2VtX3ByaW1l
X2dldF9zZ190YWJsZSA9IGRybV9nZW1fY21hX3ByaW1lX2dldF9zZ190YWJsZSwKKwkuZ2VtX3By
aW1lX2ltcG9ydF9zZ190YWJsZSA9IGRybV9nZW1fY21hX3ByaW1lX2ltcG9ydF9zZ190YWJsZSwK
KwkuZ2VtX3ByaW1lX3ZtYXAgPSBkcm1fZ2VtX2NtYV9wcmltZV92bWFwLAorCS5nZW1fcHJpbWVf
dnVubWFwID0gZHJtX2dlbV9jbWFfcHJpbWVfdnVubWFwLAorCS5nZW1fcHJpbWVfbW1hcCA9IGRy
bV9nZW1fY21hX3ByaW1lX21tYXAsCisKKwkubmFtZSA9ICJraXJpbiIsCisJLmRlc2MgPSAiSGlz
aWxpY29uIEtpcmluNjIwIFNvQyBEUk0gRHJpdmVyIiwKKwkuZGF0ZSA9ICIyMDE1MDcxOCIsCisJ
Lm1ham9yID0gMSwKKwkubWlub3IgPSAwLAorfTsKKwogc3RydWN0IGtpcmluX2RybV9kYXRhIGFk
ZV9kcml2ZXJfZGF0YSA9IHsKIAkubnVtX3BsYW5lcyA9IEFERV9DSF9OVU0sCiAJLnByaW1fcGxh
bmUgPSBBREVfQ0gxLApAQCAtMTA1Niw2ICsxMDgyLDcgQEAgc3RydWN0IGtpcmluX2RybV9kYXRh
IGFkZV9kcml2ZXJfZGF0YSA9IHsKIAkuY2hhbm5lbF9mb3JtYXRzX2NudCA9IEFSUkFZX1NJWkUo
Y2hhbm5lbF9mb3JtYXRzKSwKIAkuY29uZmlnX21heF93aWR0aCA9IDIwNDgsCiAJLmNvbmZpZ19t
YXhfaGVpZ2h0ID0gMjA0OCwKKwkuZHJpdmVyID0gJmFkZV9kcml2ZXIsCiAJLmNydGNfaGVscGVy
X2Z1bmNzID0gJmFkZV9jcnRjX2hlbHBlcl9mdW5jcywKIAkuY3J0Y19mdW5jcyA9ICZhZGVfY3J0
Y19mdW5jcywKIAkucGxhbmVfaGVscGVyX2Z1bmNzID0gJmFkZV9wbGFuZV9oZWxwZXJfZnVuY3Ms
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaGlzaWxpY29uL2tpcmluL2tpcmluX2RybV9k
cnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2Rydi5jCmlu
ZGV4IDc5NTZkNjk4ZDM2OC4uMjk2NjYxYmEzMDBmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaGlzaWxpY29uL2tpcmluL2tpcmluX2RybV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aGlzaWxpY29uL2tpcmluL2tpcmluX2RybV9kcnYuYwpAQCAtOTIsNDEgKzkyLDYgQEAgc3RhdGlj
IGludCBraXJpbl9kcm1fa21zX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldikKIAlyZXR1cm4g
cmV0OwogfQogCi1ERUZJTkVfRFJNX0dFTV9DTUFfRk9QUyhraXJpbl9kcm1fZm9wcyk7Ci0KLXN0
YXRpYyBpbnQga2lyaW5fZ2VtX2NtYV9kdW1iX2NyZWF0ZShzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUs
Ci0JCQkJICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAotCQkJCSAgICAgc3RydWN0IGRybV9t
b2RlX2NyZWF0ZV9kdW1iICphcmdzKQotewotCXJldHVybiBkcm1fZ2VtX2NtYV9kdW1iX2NyZWF0
ZV9pbnRlcm5hbChmaWxlLCBkZXYsIGFyZ3MpOwotfQotCi1zdGF0aWMgc3RydWN0IGRybV9kcml2
ZXIga2lyaW5fZHJtX2RyaXZlciA9IHsKLQkuZHJpdmVyX2ZlYXR1cmVzCT0gRFJJVkVSX0dFTSB8
IERSSVZFUl9NT0RFU0VUIHwgRFJJVkVSX1BSSU1FIHwKLQkJCQkgIERSSVZFUl9BVE9NSUMsCi0J
LmZvcHMJCQk9ICZraXJpbl9kcm1fZm9wcywKLQotCS5nZW1fZnJlZV9vYmplY3RfdW5sb2NrZWQg
PSBkcm1fZ2VtX2NtYV9mcmVlX29iamVjdCwKLQkuZ2VtX3ZtX29wcwkJPSAmZHJtX2dlbV9jbWFf
dm1fb3BzLAotCS5kdW1iX2NyZWF0ZQkJPSBraXJpbl9nZW1fY21hX2R1bWJfY3JlYXRlLAotCi0J
LnByaW1lX2hhbmRsZV90b19mZAk9IGRybV9nZW1fcHJpbWVfaGFuZGxlX3RvX2ZkLAotCS5wcmlt
ZV9mZF90b19oYW5kbGUJPSBkcm1fZ2VtX3ByaW1lX2ZkX3RvX2hhbmRsZSwKLQkuZ2VtX3ByaW1l
X2V4cG9ydAk9IGRybV9nZW1fcHJpbWVfZXhwb3J0LAotCS5nZW1fcHJpbWVfaW1wb3J0CT0gZHJt
X2dlbV9wcmltZV9pbXBvcnQsCi0JLmdlbV9wcmltZV9nZXRfc2dfdGFibGUgPSBkcm1fZ2VtX2Nt
YV9wcmltZV9nZXRfc2dfdGFibGUsCi0JLmdlbV9wcmltZV9pbXBvcnRfc2dfdGFibGUgPSBkcm1f
Z2VtX2NtYV9wcmltZV9pbXBvcnRfc2dfdGFibGUsCi0JLmdlbV9wcmltZV92bWFwCQk9IGRybV9n
ZW1fY21hX3ByaW1lX3ZtYXAsCi0JLmdlbV9wcmltZV92dW5tYXAJPSBkcm1fZ2VtX2NtYV9wcmlt
ZV92dW5tYXAsCi0JLmdlbV9wcmltZV9tbWFwCQk9IGRybV9nZW1fY21hX3ByaW1lX21tYXAsCi0K
LQkubmFtZQkJCT0gImtpcmluIiwKLQkuZGVzYwkJCT0gIkhpc2lsaWNvbiBLaXJpbiBTb0NzJyBE
Uk0gRHJpdmVyIiwKLQkuZGF0ZQkJCT0gIjIwMTUwNzE4IiwKLQkubWFqb3IJCQk9IDEsCi0JLm1p
bm9yCQkJPSAwLAotfTsKLQogc3RhdGljIGludCBjb21wYXJlX29mKHN0cnVjdCBkZXZpY2UgKmRl
diwgdm9pZCAqZGF0YSkKIHsKIAlyZXR1cm4gZGV2LT5vZl9ub2RlID09IGRhdGE7CkBAIC0xMzQs
MTEgKzk5LDEwIEBAIHN0YXRpYyBpbnQgY29tcGFyZV9vZihzdHJ1Y3QgZGV2aWNlICpkZXYsIHZv
aWQgKmRhdGEpCiAKIHN0YXRpYyBpbnQga2lyaW5fZHJtX2JpbmQoc3RydWN0IGRldmljZSAqZGV2
KQogewotCXN0cnVjdCBkcm1fZHJpdmVyICpkcml2ZXIgPSAma2lyaW5fZHJtX2RyaXZlcjsKIAlz
dHJ1Y3QgZHJtX2RldmljZSAqZHJtX2RldjsKIAlpbnQgcmV0OwogCi0JZHJtX2RldiA9IGRybV9k
ZXZfYWxsb2MoZHJpdmVyLCBkZXYpOworCWRybV9kZXYgPSBkcm1fZGV2X2FsbG9jKGRyaXZlcl9k
YXRhLT5kcml2ZXIsIGRldik7CiAJaWYgKElTX0VSUihkcm1fZGV2KSkKIAkJcmV0dXJuIFBUUl9F
UlIoZHJtX2Rldik7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2ly
aW4va2lyaW5fZHJtX2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJp
bl9kcm1fZHJ2LmgKaW5kZXggNDNiZTY1ZjgyYTAzLi5mZGJmYzRhOTBmMjIgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2Rydi5oCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2Rydi5oCkBAIC00Miw2ICs0
Miw3IEBAIHN0cnVjdCBraXJpbl9kcm1fZGF0YSB7CiAJdTMyIG51bV9wbGFuZXM7CiAJdTMyIHBy
aW1fcGxhbmU7CiAKKwlzdHJ1Y3QgZHJtX2RyaXZlciAqZHJpdmVyOwogCWNvbnN0IHN0cnVjdCBk
cm1fY3J0Y19oZWxwZXJfZnVuY3MgKmNydGNfaGVscGVyX2Z1bmNzOwogCWNvbnN0IHN0cnVjdCBk
cm1fY3J0Y19mdW5jcyAqY3J0Y19mdW5jczsKIAljb25zdCBzdHJ1Y3QgZHJtX3BsYW5lX2hlbHBl
cl9mdW5jcyAqcGxhbmVfaGVscGVyX2Z1bmNzOwotLSAKMi4xNy4xCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRy
aS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
