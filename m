Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6C9D2B8BFE
	for <lists+dri-devel@lfdr.de>; Fri, 20 Sep 2019 09:53:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A06056F673;
	Fri, 20 Sep 2019 07:53:07 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x62a.google.com (mail-pl1-x62a.google.com
 [IPv6:2607:f8b0:4864:20::62a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 74A6F6F4E7
 for <dri-devel@lists.freedesktop.org>; Thu, 19 Sep 2019 12:37:25 +0000 (UTC)
Received: by mail-pl1-x62a.google.com with SMTP id f19so1569741plr.3
 for <dri-devel@lists.freedesktop.org>; Thu, 19 Sep 2019 05:37:25 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id;
 bh=6LDBRrb741uRZQWWifLKcAE5mlP2qAYLvuSILAF6V7s=;
 b=AKoOfIHSKL6HszurgdJMsF6bcmnv8huCsR34NWrx2aniQ7gqeA5cjPVehkVqjCPIKR
 /47WnGKpv4cehROsojEk6Z9u0uCzWKnnSvJDvFyrgYcwPROQqydr7UAved7IaYf6dn4b
 tFN2EjC7o5f3Tq1r0sqJXAOYum8lkwwZ4impvBSBhlc7fG/Z+pvUlWxvXya1JXfaSXI5
 k+Sv7G1GFL0CHldYhsPS8uyEtEP0n29O/x5+tvHqHK4W5B0WLLAch/Yb89fi0Qswrs/d
 980aDJi+LjdKVMdfEOOaSidjBatUpyyXLxF9aoTAq+3VruaD3MB/ikeQkN3XgrtCukcv
 lhAg==
X-Gm-Message-State: APjAAAUztr3kxjl21vf4WH/6xRC1IuZD+c08HBkWFbfyrC8vZV47rARP
 0aEjc0Sv0ysRqrUZ2k6VKq/Qj7iwdII=
X-Google-Smtp-Source: APXvYqzAvtQfrx/ahz3Jk+jKLkiNFz6Js60/zOlIiGdj5VyBrqbcy2rX4o0FBuNX09e8cEO1TeD64A==
X-Received: by 2002:a17:902:9888:: with SMTP id
 s8mr8762684plp.25.1568896644871; 
 Thu, 19 Sep 2019 05:37:24 -0700 (PDT)
Received: from virtualhost-PowerEdge-R810.synapse.com ([195.238.92.107])
 by smtp.gmail.com with ESMTPSA id 2sm11029800pfa.43.2019.09.19.05.37.20
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 19 Sep 2019 05:37:24 -0700 (PDT)
From: roman.stratiienko@globallogic.com
To: linux-kernel@vger.kernel.org, mripard@kernel.org,
 dri-devel@lists.freedesktop.org
Subject: [PATCH] drm/sun4i: Use vi plane as primary
Date: Thu, 19 Sep 2019 15:37:03 +0300
Message-Id: <20190919123703.8545-1-roman.stratiienko@globallogic.com>
X-Mailer: git-send-email 2.17.1
X-Mailman-Approved-At: Fri, 20 Sep 2019 07:51:39 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=globallogic.com; s=google;
 h=from:to:cc:subject:date:message-id;
 bh=6LDBRrb741uRZQWWifLKcAE5mlP2qAYLvuSILAF6V7s=;
 b=JbDMEkS/D3wwcWoQzSid2paeiT7H5GTfzuQxa+OukdL4cxsoRD3SSUdxSYCsZ1AHLv
 sUc7gFRS3TwYzmvqgZkQdcf45VCETLiaIstVnhnFuHP9qwPlqfjGklM4Svy8Mi00sPQs
 z9fnIZnPEVnslSuZl32kDfoacPNBDkYuB+UOAYXq8NBSa5uviz83DoG0fyLVu46qaNvl
 OWwjpsyOyBw444XJcpsg7drg70rehkqCVL8q/1kSmZKIOTVZKhLqmS156wMbD1OfcrUv
 KbtqDI+vo14DiROG3r6BotFD4Ri6HOUUwMZtwFMphRIcRjulDwggdumT0EmA1EKzaAX1
 SBnw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Roman Stratiienko <roman.stratiienko@globallogic.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9tYW4gU3RyYXRpaWVua28gPHJvbWFuLnN0cmF0aWllbmtvQGdsb2JhbGxvZ2ljLmNv
bT4KCkRFMi4wIGJsZW5kZXIgZG9lcyBub3QgdGFrZSBpbnRvIHRoZSBhY2NvdW50IGFscGhhIGNo
YW5uZWwgb2YgdmkgbGF5ZXIuClRodXMgbWFrZXMgb3ZlcmxheWluZyBvZiB0aGlzIGxheWVyIHRv
dGFsbHkgb3BhcXVlLgpVc2luZyB2aSBsYXllciBhcyBib3R0b20gc29sdmVzIHRoaXMgaXNzdWUu
CgpUZXN0ZWQgb24gQW5kcm9pZC4KClNpZ25lZC1vZmYtYnk6IFJvbWFuIFN0cmF0aWllbmtvIDxy
b21hbi5zdHJhdGlpZW5rb0BnbG9iYWxsb2dpYy5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL3N1
bjRpL3N1bjhpX3VpX2xheWVyLmMgfCAzMyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVy
cy9ncHUvZHJtL3N1bjRpL3N1bjhpX3ZpX2xheWVyLmMgfCAzNiArKysrKysrKysrKysrKysrKysr
KysrKysrLQogMiBmaWxlcyBjaGFuZ2VkLCAzNSBpbnNlcnRpb25zKCspLCAzNCBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vc3VuNGkvc3VuOGlfdWlfbGF5ZXIuYyBi
L2RyaXZlcnMvZ3B1L2RybS9zdW40aS9zdW44aV91aV9sYXllci5jCmluZGV4IGRkMmExYzg1MTkz
OS4uMjUxODNiYWRjODVmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vc3VuNGkvc3VuOGlf
dWlfbGF5ZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vc3VuNGkvc3VuOGlfdWlfbGF5ZXIuYwpA
QCAtOTksMzYgKzk5LDYgQEAgc3RhdGljIGludCBzdW44aV91aV9sYXllcl91cGRhdGVfY29vcmQo
c3RydWN0IHN1bjhpX21peGVyICptaXhlciwgaW50IGNoYW5uZWwsCiAJaW5zaXplID0gU1VOOElf
TUlYRVJfU0laRShzcmNfdywgc3JjX2gpOwogCW91dHNpemUgPSBTVU44SV9NSVhFUl9TSVpFKGRz
dF93LCBkc3RfaCk7CiAKLQlpZiAocGxhbmUtPnR5cGUgPT0gRFJNX1BMQU5FX1RZUEVfUFJJTUFS
WSkgewotCQlib29sIGludGVybGFjZWQgPSBmYWxzZTsKLQkJdTMyIHZhbDsKLQotCQlEUk1fREVC
VUdfRFJJVkVSKCJQcmltYXJ5IGxheWVyLCB1cGRhdGluZyBnbG9iYWwgc2l6ZSBXOiAldSBIOiAl
dVxuIiwKLQkJCQkgZHN0X3csIGRzdF9oKTsKLQkJcmVnbWFwX3dyaXRlKG1peGVyLT5lbmdpbmUu
cmVncywKLQkJCSAgICAgU1VOOElfTUlYRVJfR0xPQkFMX1NJWkUsCi0JCQkgICAgIG91dHNpemUp
OwotCQlyZWdtYXBfd3JpdGUobWl4ZXItPmVuZ2luZS5yZWdzLAotCQkJICAgICBTVU44SV9NSVhF
Ul9CTEVORF9PVVRTSVpFKGJsZF9iYXNlKSwgb3V0c2l6ZSk7Ci0KLQkJaWYgKHN0YXRlLT5jcnRj
KQotCQkJaW50ZXJsYWNlZCA9IHN0YXRlLT5jcnRjLT5zdGF0ZS0+YWRqdXN0ZWRfbW9kZS5mbGFn
cwotCQkJCSYgRFJNX01PREVfRkxBR19JTlRFUkxBQ0U7Ci0KLQkJaWYgKGludGVybGFjZWQpCi0J
CQl2YWwgPSBTVU44SV9NSVhFUl9CTEVORF9PVVRDVExfSU5URVJMQUNFRDsKLQkJZWxzZQotCQkJ
dmFsID0gMDsKLQotCQlyZWdtYXBfdXBkYXRlX2JpdHMobWl4ZXItPmVuZ2luZS5yZWdzLAotCQkJ
CSAgIFNVTjhJX01JWEVSX0JMRU5EX09VVENUTChibGRfYmFzZSksCi0JCQkJICAgU1VOOElfTUlY
RVJfQkxFTkRfT1VUQ1RMX0lOVEVSTEFDRUQsCi0JCQkJICAgdmFsKTsKLQotCQlEUk1fREVCVUdf
RFJJVkVSKCJTd2l0Y2hpbmcgZGlzcGxheSBtaXhlciBpbnRlcmxhY2VkIG1vZGUgJXNcbiIsCi0J
CQkJIGludGVybGFjZWQgPyAib24iIDogIm9mZiIpOwotCX0KLQogCS8qIFNldCBoZWlnaHQgYW5k
IHdpZHRoICovCiAJRFJNX0RFQlVHX0RSSVZFUigiTGF5ZXIgc291cmNlIG9mZnNldCBYOiAlZCBZ
OiAlZFxuIiwKIAkJCSBzdGF0ZS0+c3JjLngxID4+IDE2LCBzdGF0ZS0+c3JjLnkxID4+IDE2KTsK
QEAgLTM0OSw5ICszMTksNiBAQCBzdHJ1Y3Qgc3VuOGlfdWlfbGF5ZXIgKnN1bjhpX3VpX2xheWVy
X2luaXRfb25lKHN0cnVjdCBkcm1fZGV2aWNlICpkcm0sCiAJaWYgKCFsYXllcikKIAkJcmV0dXJu
IEVSUl9QVFIoLUVOT01FTSk7CiAKLQlpZiAoaW5kZXggPT0gMCkKLQkJdHlwZSA9IERSTV9QTEFO
RV9UWVBFX1BSSU1BUlk7Ci0KIAkvKiBwb3NzaWJsZSBjcnRjcyBhcmUgc2V0IGxhdGVyICovCiAJ
cmV0ID0gZHJtX3VuaXZlcnNhbF9wbGFuZV9pbml0KGRybSwgJmxheWVyLT5wbGFuZSwgMCwKIAkJ
CQkgICAgICAgJnN1bjhpX3VpX2xheWVyX2Z1bmNzLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3N1bjRpL3N1bjhpX3ZpX2xheWVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vc3VuNGkvc3VuOGlf
dmlfbGF5ZXIuYwppbmRleCAwN2MyN2U2YTRiNzcuLjQ5YzQwNzRlMTY0ZiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3N1bjRpL3N1bjhpX3ZpX2xheWVyLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3N1bjRpL3N1bjhpX3ZpX2xheWVyLmMKQEAgLTExNiw2ICsxMTYsMzYgQEAgc3RhdGljIGlu
dCBzdW44aV92aV9sYXllcl91cGRhdGVfY29vcmQoc3RydWN0IHN1bjhpX21peGVyICptaXhlciwg
aW50IGNoYW5uZWwsCiAJaW5zaXplID0gU1VOOElfTUlYRVJfU0laRShzcmNfdywgc3JjX2gpOwog
CW91dHNpemUgPSBTVU44SV9NSVhFUl9TSVpFKGRzdF93LCBkc3RfaCk7CiAKKwlpZiAocGxhbmUt
PnR5cGUgPT0gRFJNX1BMQU5FX1RZUEVfUFJJTUFSWSkgeworCQlib29sIGludGVybGFjZWQgPSBm
YWxzZTsKKwkJdTMyIHZhbDsKKworCQlEUk1fREVCVUdfRFJJVkVSKCJQcmltYXJ5IGxheWVyLCB1
cGRhdGluZyBnbG9iYWwgc2l6ZSBXOiAldSBIOiAldVxuIiwKKwkJCQkgZHN0X3csIGRzdF9oKTsK
KwkJcmVnbWFwX3dyaXRlKG1peGVyLT5lbmdpbmUucmVncywKKwkJCSAgICAgU1VOOElfTUlYRVJf
R0xPQkFMX1NJWkUsCisJCQkgICAgIG91dHNpemUpOworCQlyZWdtYXBfd3JpdGUobWl4ZXItPmVu
Z2luZS5yZWdzLAorCQkJICAgICBTVU44SV9NSVhFUl9CTEVORF9PVVRTSVpFKGJsZF9iYXNlKSwg
b3V0c2l6ZSk7CisKKwkJaWYgKHN0YXRlLT5jcnRjKQorCQkJaW50ZXJsYWNlZCA9IHN0YXRlLT5j
cnRjLT5zdGF0ZS0+YWRqdXN0ZWRfbW9kZS5mbGFncworCQkJCSYgRFJNX01PREVfRkxBR19JTlRF
UkxBQ0U7CisKKwkJaWYgKGludGVybGFjZWQpCisJCQl2YWwgPSBTVU44SV9NSVhFUl9CTEVORF9P
VVRDVExfSU5URVJMQUNFRDsKKwkJZWxzZQorCQkJdmFsID0gMDsKKworCQlyZWdtYXBfdXBkYXRl
X2JpdHMobWl4ZXItPmVuZ2luZS5yZWdzLAorCQkJCSAgIFNVTjhJX01JWEVSX0JMRU5EX09VVENU
TChibGRfYmFzZSksCisJCQkJICAgU1VOOElfTUlYRVJfQkxFTkRfT1VUQ1RMX0lOVEVSTEFDRUQs
CisJCQkJICAgdmFsKTsKKworCQlEUk1fREVCVUdfRFJJVkVSKCJTd2l0Y2hpbmcgZGlzcGxheSBt
aXhlciBpbnRlcmxhY2VkIG1vZGUgJXNcbiIsCisJCQkJIGludGVybGFjZWQgPyAib24iIDogIm9m
ZiIpOworCX0KKwogCS8qIFNldCBoZWlnaHQgYW5kIHdpZHRoICovCiAJRFJNX0RFQlVHX0RSSVZF
UigiTGF5ZXIgc291cmNlIG9mZnNldCBYOiAlZCBZOiAlZFxuIiwKIAkJCSAoc3RhdGUtPnNyYy54
MSA+PiAxNikgJiB+KGZvcm1hdC0+aHN1YiAtIDEpLApAQCAtNDQ1LDYgKzQ3NSw3IEBAIHN0cnVj
dCBzdW44aV92aV9sYXllciAqc3VuOGlfdmlfbGF5ZXJfaW5pdF9vbmUoc3RydWN0IGRybV9kZXZp
Y2UgKmRybSwKIAkJCQkJICAgICAgIHN0cnVjdCBzdW44aV9taXhlciAqbWl4ZXIsCiAJCQkJCSAg
ICAgICBpbnQgaW5kZXgpCiB7CisJZW51bSBkcm1fcGxhbmVfdHlwZSB0eXBlID0gRFJNX1BMQU5F
X1RZUEVfT1ZFUkxBWTsKIAlzdHJ1Y3Qgc3VuOGlfdmlfbGF5ZXIgKmxheWVyOwogCXVuc2lnbmVk
IGludCBwbGFuZV9jbnQ7CiAJaW50IHJldDsKQEAgLTQ1MywxMiArNDg0LDE1IEBAIHN0cnVjdCBz
dW44aV92aV9sYXllciAqc3VuOGlfdmlfbGF5ZXJfaW5pdF9vbmUoc3RydWN0IGRybV9kZXZpY2Ug
KmRybSwKIAlpZiAoIWxheWVyKQogCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsKIAorCWlmIChp
bmRleCA9PSAwKQorCQl0eXBlID0gRFJNX1BMQU5FX1RZUEVfUFJJTUFSWTsKKwogCS8qIHBvc3Np
YmxlIGNydGNzIGFyZSBzZXQgbGF0ZXIgKi8KIAlyZXQgPSBkcm1fdW5pdmVyc2FsX3BsYW5lX2lu
aXQoZHJtLCAmbGF5ZXItPnBsYW5lLCAwLAogCQkJCSAgICAgICAmc3VuOGlfdmlfbGF5ZXJfZnVu
Y3MsCiAJCQkJICAgICAgIHN1bjhpX3ZpX2xheWVyX2Zvcm1hdHMsCiAJCQkJICAgICAgIEFSUkFZ
X1NJWkUoc3VuOGlfdmlfbGF5ZXJfZm9ybWF0cyksCi0JCQkJICAgICAgIE5VTEwsIERSTV9QTEFO
RV9UWVBFX09WRVJMQVksIE5VTEwpOworCQkJCSAgICAgICBOVUxMLCB0eXBlLCBOVUxMKTsKIAlp
ZiAocmV0KSB7CiAJCWRldl9lcnIoZHJtLT5kZXYsICJDb3VsZG4ndCBpbml0aWFsaXplIGxheWVy
XG4iKTsKIAkJcmV0dXJuIEVSUl9QVFIocmV0KTsKLS0gCjIuMTcuMQoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApk
cmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
