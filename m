Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id F0EA615E82
	for <lists+dri-devel@lfdr.de>; Tue,  7 May 2019 09:47:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A703D89EA3;
	Tue,  7 May 2019 07:47:36 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from honk.sigxcpu.org (honk.sigxcpu.org [24.134.29.49])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 67BC289E9E
 for <dri-devel@lists.freedesktop.org>; Tue,  7 May 2019 07:47:34 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by honk.sigxcpu.org (Postfix) with ESMTP id 17BE2FB02;
 Tue,  7 May 2019 09:47:33 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at honk.sigxcpu.org
Received: from honk.sigxcpu.org ([127.0.0.1])
 by localhost (honk.sigxcpu.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id JaPrQsBBGmjh; Tue,  7 May 2019 09:47:29 +0200 (CEST)
Received: by bogon.sigxcpu.org (Postfix, from userid 1000)
 id 200144619C; Tue,  7 May 2019 09:47:27 +0200 (CEST)
From: =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>
To: Kishon Vijay Abraham I <kishon@ti.com>, Rob Herring <robh+dt@kernel.org>,
 Mark Rutland <mark.rutland@arm.com>, Shawn Guo <shawnguo@kernel.org>,
 Sascha Hauer <s.hauer@pengutronix.de>,
 Pengutronix Kernel Team <kernel@pengutronix.de>,
 Fabio Estevam <festevam@gmail.com>, NXP Linux Team <linux-imx@nxp.com>,
 Thierry Reding <treding@nvidia.com>,
 =?UTF-8?q?Andreas=20F=C3=A4rber?= <afaerber@suse.de>,
 Martin Blumenstingl <martin.blumenstingl@googlemail.com>,
 Heiko Stuebner <heiko@sntech.de>, Johan Hovold <johan@kernel.org>,
 Lucas Stach <l.stach@pengutronix.de>, Abel Vesa <abel.vesa@nxp.com>,
 Li Jun <jun.li@nxp.com>, linux-kernel@vger.kernel.org,
 devicetree@vger.kernel.org, linux-arm-kernel@lists.infradead.org,
 dri-devel@lists.freedesktop.org, Robert Chiras <robert.chiras@nxp.com>,
 Sam Ravnborg <sam@ravnborg.org>, Maxime Ripard <maxime.ripard@bootlin.com>
Subject: [PATCH v10 2/2] phy: Add driver for mixel mipi dphy found on NXP's
 i.MX8 SoCs
Date: Tue,  7 May 2019 09:47:26 +0200
Message-Id: <299e28042e0a24c0cde593873bdfb15e18187a92.1557215047.git.agx@sigxcpu.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1557215047.git.agx@sigxcpu.org>
References: <cover.1557215047.git.agx@sigxcpu.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBhZGRzIHN1cHBvcnQgZm9yIHRoZSBNaXhlbCBEUEhZIGFzIGZvdW5kIG9uIGkuTVg4IENQ
VXMgYnV0IHNpbmNlCnRoaXMgaXMgYW4gSVAgY29yZSBpdCB3aWxsIGxpa2VseSBiZSBmb3VuZCBv
biBvdGhlcnMgaW4gdGhlIGZ1dHVyZS4gU28KaW5zdGVhZCBvZiBhZGRpbmcgdGhpcyB0byB0aGUg
bndsIGhvc3QgZHJpdmVyIG1ha2UgaXQgYSBnZW5lcmljIFBIWQpkcml2ZXIuCgpUaGUgZHJpdmVy
IHN1cHBvcnRzIHRoZSBpLk1YOE1RLiBTdXBwb3J0IGZvciBpLk1YOFFNIGFuZCBpLk1YOFFYUCBj
YW4gYmUKYWRkZWQgb25jZSB0aGUgbmVjZXNzYXJ5IHN5c3RlbSBjb250cm9sbGVyIGJpdHMgYXJl
IGluIHZpYQptaXhlbF9kcGh5X2RldmRhdGEuCgpTaWduZWQtb2ZmLWJ5OiBHdWlkbyBHw7xudGhl
ciA8YWd4QHNpZ3hjcHUub3JnPgpDby1kZXZlbG9wZWQtYnk6IFJvYmVydCBDaGlyYXMgPHJvYmVy
dC5jaGlyYXNAbnhwLmNvbT4KU2lnbmVkLW9mZi1ieTogUm9iZXJ0IENoaXJhcyA8cm9iZXJ0LmNo
aXJhc0BueHAuY29tPgotLS0KIGRyaXZlcnMvcGh5L2ZyZWVzY2FsZS9LY29uZmlnICAgICAgICAg
ICAgICAgICB8ICAxMCArCiBkcml2ZXJzL3BoeS9mcmVlc2NhbGUvTWFrZWZpbGUgICAgICAgICAg
ICAgICAgfCAgIDEgKwogLi4uL3BoeS9mcmVlc2NhbGUvcGh5LWZzbC1pbXg4LW1pcGktZHBoeS5j
ICAgIHwgNDk5ICsrKysrKysrKysrKysrKysrKwogMyBmaWxlcyBjaGFuZ2VkLCA1MTAgaW5zZXJ0
aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvcGh5L2ZyZWVzY2FsZS9waHktZnNs
LWlteDgtbWlwaS1kcGh5LmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3BoeS9mcmVlc2NhbGUvS2Nv
bmZpZyBiL2RyaXZlcnMvcGh5L2ZyZWVzY2FsZS9LY29uZmlnCmluZGV4IDgzMjY3MGI0OTUyYi4u
MjQ3YmU2MmQwOTgxIDEwMDY0NAotLS0gYS9kcml2ZXJzL3BoeS9mcmVlc2NhbGUvS2NvbmZpZwor
KysgYi9kcml2ZXJzL3BoeS9mcmVlc2NhbGUvS2NvbmZpZwpAQCAtMywzICszLDEzIEBAIGNvbmZp
ZyBQSFlfRlNMX0lNWDhNUV9VU0IKIAlkZXBlbmRzIG9uIE9GICYmIEhBU19JT01FTQogCXNlbGVj
dCBHRU5FUklDX1BIWQogCWRlZmF1bHQgQVJDSF9NWEMgJiYgQVJNNjQKKworY29uZmlnIFBIWV9N
SVhFTF9NSVBJX0RQSFkKKwl0cmlzdGF0ZSAiTWl4ZWwgTUlQSSBEU0kgUEhZIHN1cHBvcnQiCisJ
ZGVwZW5kcyBvbiBPRiAmJiBIQVNfSU9NRU0KKwlzZWxlY3QgR0VORVJJQ19QSFkKKwlzZWxlY3Qg
R0VORVJJQ19QSFlfTUlQSV9EUEhZCisJc2VsZWN0IFJFR01BUF9NTUlPCisJaGVscAorCSAgRW5h
YmxlIHRoaXMgdG8gYWRkIHN1cHBvcnQgZm9yIHRoZSBNaXhlbCBEU0kgUEhZIGFzIGZvdW5kCisJ
ICBvbiBOWFAncyBpLk1YOCBmYW1pbHkgb2YgU09Dcy4KZGlmZiAtLWdpdCBhL2RyaXZlcnMvcGh5
L2ZyZWVzY2FsZS9NYWtlZmlsZSBiL2RyaXZlcnMvcGh5L2ZyZWVzY2FsZS9NYWtlZmlsZQppbmRl
eCBkYzJiM2YxZjJmODAuLjA3NDkxYzkyNmEyYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9waHkvZnJl
ZXNjYWxlL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvcGh5L2ZyZWVzY2FsZS9NYWtlZmlsZQpAQCAt
MSArMSwyIEBACiBvYmotJChDT05GSUdfUEhZX0ZTTF9JTVg4TVFfVVNCKQkrPSBwaHktZnNsLWlt
eDhtcS11c2Iubworb2JqLSQoQ09ORklHX1BIWV9NSVhFTF9NSVBJX0RQSFkpCSs9IHBoeS1mc2wt
aW14OC1taXBpLWRwaHkubwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9waHkvZnJlZXNjYWxlL3BoeS1m
c2wtaW14OC1taXBpLWRwaHkuYyBiL2RyaXZlcnMvcGh5L2ZyZWVzY2FsZS9waHktZnNsLWlteDgt
bWlwaS1kcGh5LmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi45NWJh
NmI4Nzc4YzAKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL3BoeS9mcmVlc2NhbGUvcGh5LWZz
bC1pbXg4LW1pcGktZHBoeS5jCkBAIC0wLDAgKzEsNDk5IEBACisvLyBTUERYLUxpY2Vuc2UtSWRl
bnRpZmllcjogR1BMLTIuMCsKKy8qCisgKiBDb3B5cmlnaHQgMjAxNywyMDE4IE5YUAorICogQ29w
eXJpZ2h0IDIwMTkgUHVyaXNtIFNQQworICovCisKKyNpbmNsdWRlIDxsaW51eC9jbGsuaD4KKyNp
bmNsdWRlIDxsaW51eC9jbGstcHJvdmlkZXIuaD4KKyNpbmNsdWRlIDxsaW51eC9kZWxheS5oPgor
I2luY2x1ZGUgPGxpbnV4L2lvLmg+CisjaW5jbHVkZSA8bGludXgva2VybmVsLmg+CisjaW5jbHVk
ZSA8bGludXgvbW9kdWxlLmg+CisjaW5jbHVkZSA8bGludXgvb2YuaD4KKyNpbmNsdWRlIDxsaW51
eC9vZl9wbGF0Zm9ybS5oPgorI2luY2x1ZGUgPGxpbnV4L3BoeS9waHkuaD4KKyNpbmNsdWRlIDxs
aW51eC9wbGF0Zm9ybV9kZXZpY2UuaD4KKyNpbmNsdWRlIDxsaW51eC9yZWdtYXAuaD4KKworLyog
RFBIWSByZWdpc3RlcnMgKi8KKyNkZWZpbmUgRFBIWV9QRF9EUEhZCQkJMHgwMAorI2RlZmluZSBE
UEhZX01fUFJHX0hTX1BSRVBBUkUJCTB4MDQKKyNkZWZpbmUgRFBIWV9NQ19QUkdfSFNfUFJFUEFS
RQkJMHgwOAorI2RlZmluZSBEUEhZX01fUFJHX0hTX1pFUk8JCTB4MGMKKyNkZWZpbmUgRFBIWV9N
Q19QUkdfSFNfWkVSTwkJMHgxMAorI2RlZmluZSBEUEhZX01fUFJHX0hTX1RSQUlMCQkweDE0Cisj
ZGVmaW5lIERQSFlfTUNfUFJHX0hTX1RSQUlMCQkweDE4CisjZGVmaW5lIERQSFlfUERfUExMCQkJ
MHgxYworI2RlZmluZSBEUEhZX1RTVAkJCTB4MjAKKyNkZWZpbmUgRFBIWV9DTgkJCQkweDI0Cisj
ZGVmaW5lIERQSFlfQ00JCQkJMHgyOAorI2RlZmluZSBEUEhZX0NPCQkJCTB4MmMKKyNkZWZpbmUg
RFBIWV9MT0NLCQkJMHgzMAorI2RlZmluZSBEUEhZX0xPQ0tfQllQCQkJMHgzNAorI2RlZmluZSBE
UEhZX1JFR19CWVBBU1NfUExMCQkweDRDCisKKyNkZWZpbmUgTUJQUyh4KSAoKHgpICogMTAwMDAw
MCkKKworI2RlZmluZSBEQVRBX1JBVEVfTUFYX1NQRUVEIE1CUFMoMTUwMCkKKyNkZWZpbmUgREFU
QV9SQVRFX01JTl9TUEVFRCBNQlBTKDgwKQorCisjZGVmaW5lIFBMTF9MT0NLX1NMRUVQIDEwCisj
ZGVmaW5lIFBMTF9MT0NLX1RJTUVPVVQgMTAwMAorCisjZGVmaW5lIENOX0JVRgkweGNiN2E4OWMw
CisjZGVmaW5lIENPX0JVRgkweDYzCisjZGVmaW5lIENNKHgpCSgJCQkJXAorCQkoKHgpIDwJMzIp
PzB4ZTB8KCh4KS0xNikgOglcCisJCSgoeCkgPAk2NCk/MHhjMHwoKHgpLTMyKSA6CVwKKwkJKCh4
KSA8IDEyOCk/MHg4MHwoKHgpLTY0KSA6CVwKKwkJKCh4KSAtIDEyOCkpCisjZGVmaW5lIENOKHgp
CSgoKHgpID09IDEpPzB4MWYgOiAoKChDTl9CVUYpPj4oKHgpLTEpKSYweDFmKSkKKyNkZWZpbmUg
Q08oeCkJKChDT19CVUYpPj4oOC0oeCkpJjB4MykKKworLyogUEhZIHBvd2VyIG9uIGlzIGFjdGl2
ZSBsb3cgKi8KKyNkZWZpbmUgUFdSX09OCTAKKyNkZWZpbmUgUFdSX09GRgkxCisKK2VudW0gbWl4
ZWxfZHBoeV9kZXZ0eXBlIHsKKwlNSVhFTF9JTVg4TVEsCit9OworCitzdHJ1Y3QgbWl4ZWxfZHBo
eV9kZXZkYXRhIHsKKwl1OCByZWdfdHhfcmNhbDsKKwl1OCByZWdfYXV0b19wZF9lbjsKKwl1OCBy
ZWdfcnhscHJwOworCXU4IHJlZ19yeGNkcnA7CisJdTggcmVnX3J4aHNfc2V0dGxlOworfTsKKwor
c3RhdGljIGNvbnN0IHN0cnVjdCBtaXhlbF9kcGh5X2RldmRhdGEgbWl4ZWxfZHBoeV9kZXZkYXRh
W10gPSB7CisJW01JWEVMX0lNWDhNUV0gPSB7CisJCS5yZWdfdHhfcmNhbCA9IDB4MzgsCisJCS5y
ZWdfYXV0b19wZF9lbiA9IDB4M2MsCisJCS5yZWdfcnhscHJwID0gMHg0MCwKKwkJLnJlZ19yeGNk
cnAgPSAweDQ0LAorCQkucmVnX3J4aHNfc2V0dGxlID0gMHg0OCwKKwl9LAorfTsKKworc3RydWN0
IG1peGVsX2RwaHlfY2ZnIHsKKwkvKiBEUEhZIFBMTCBwYXJhbWV0ZXJzICovCisJdTMyIGNtOwor
CXUzMiBjbjsKKwl1MzIgY287CisJLyogRFBIWSByZWdpc3RlciB2YWx1ZXMgKi8KKwl1OCBtY19w
cmdfaHNfcHJlcGFyZTsKKwl1OCBtX3ByZ19oc19wcmVwYXJlOworCXU4IG1jX3ByZ19oc196ZXJv
OworCXU4IG1fcHJnX2hzX3plcm87CisJdTggbWNfcHJnX2hzX3RyYWlsOworCXU4IG1fcHJnX2hz
X3RyYWlsOworCXU4IHJ4aHNfc2V0dGxlOworfTsKKworc3RydWN0IG1peGVsX2RwaHlfcHJpdiB7
CisJc3RydWN0IG1peGVsX2RwaHlfY2ZnIGNmZzsKKwlzdHJ1Y3QgcmVnbWFwICpyZWdtYXA7CisJ
c3RydWN0IGNsayAqcGh5X3JlZl9jbGs7CisJY29uc3Qgc3RydWN0IG1peGVsX2RwaHlfZGV2ZGF0
YSAqZGV2ZGF0YTsKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgcmVnbWFwX2NvbmZpZyBtaXhl
bF9kcGh5X3JlZ21hcF9jb25maWcgPSB7CisJLnJlZ19iaXRzID0gOCwKKwkudmFsX2JpdHMgPSAz
MiwKKwkucmVnX3N0cmlkZSA9IDQsCisJLm1heF9yZWdpc3RlciA9IERQSFlfUkVHX0JZUEFTU19Q
TEwsCisJLm5hbWUgPSAibWlwaS1kcGh5IiwKK307CisKK3N0YXRpYyBpbnQgcGh5X3dyaXRlKHN0
cnVjdCBwaHkgKnBoeSwgdTMyIHZhbHVlLCB1bnNpZ25lZCBpbnQgcmVnKQoreworCXN0cnVjdCBt
aXhlbF9kcGh5X3ByaXYgKnByaXYgPSBwaHlfZ2V0X2RydmRhdGEocGh5KTsKKwlpbnQgcmV0Owor
CisJcmV0ID0gcmVnbWFwX3dyaXRlKHByaXYtPnJlZ21hcCwgcmVnLCB2YWx1ZSk7CisJaWYgKHJl
dCA8IDApCisJCWRldl9lcnIoJnBoeS0+ZGV2LCAiRmFpbGVkIHRvIHdyaXRlIERQSFkgcmVnICVk
OiAlZCIsIHJlZywgcmV0KTsKKwlyZXR1cm4gcmV0OworfQorCisvKgorICogRmluZCBhIHJhdGlv
IGNsb3NlIHRvIHRoZSBkZXNpcmVkIG9uZSB1c2luZyBjb250aW51ZWQgZnJhY3Rpb24KKyAqIGFw
cHJveGltYXRpb24gZW5kaW5nIGVpdGhlciBhdCBleGFjdCBtYXRjaCBvciBtYXhpbXVtIGFsbG93
ZWQKKyAqIG5vbWluYXRvciwgZGVub21pbmF0b3IuCisgKi8KK3N0YXRpYyB2b2lkIGdldF9iZXN0
X3JhdGlvKHUzMiAqcG51bSwgdTMyICpwZGVub20sIHUzMiBtYXhfbiwgdTMyIG1heF9kKQorewor
CXUzMiBhID0gKnBudW07CisJdTMyIGIgPSAqcGRlbm9tOworCXUzMiBjOworCXUzMiBuW10gPSB7
MCwgMX07CisJdTMyIGRbXSA9IHsxLCAwfTsKKwl1MzIgd2hvbGU7CisJdW5zaWduZWQgaW50IGkg
PSAxOworCisJd2hpbGUgKGIpIHsKKwkJaSBePSAxOworCQl3aG9sZSA9IGEgLyBiOworCQluW2ld
ICs9IChuW2kgXiAxXSAqIHdob2xlKTsKKwkJZFtpXSArPSAoZFtpIF4gMV0gKiB3aG9sZSk7CisJ
CWlmICgobltpXSA+IG1heF9uKSB8fCAoZFtpXSA+IG1heF9kKSkgeworCQkJaSBePSAxOworCQkJ
YnJlYWs7CisJCX0KKwkJYyA9IGEgLSAoYiAqIHdob2xlKTsKKwkJYSA9IGI7CisJCWIgPSBjOwor
CX0KKwkqcG51bSA9IG5baV07CisJKnBkZW5vbSA9IGRbaV07Cit9CisKK3N0YXRpYyBpbnQgbWl4
ZWxfZHBoeV9jb25maWdfZnJvbV9vcHRzKHN0cnVjdCBwaHkgKnBoeSwKKwkgICAgICAgc3RydWN0
IHBoeV9jb25maWd1cmVfb3B0c19taXBpX2RwaHkgKmRwaHlfb3B0cywKKwkgICAgICAgc3RydWN0
IG1peGVsX2RwaHlfY2ZnICpjZmcpCit7CisJc3RydWN0IG1peGVsX2RwaHlfcHJpdiAqcHJpdiA9
IGRldl9nZXRfZHJ2ZGF0YShwaHktPmRldi5wYXJlbnQpOworCXVuc2lnbmVkIGxvbmcgcmVmX2Ns
ayA9IGNsa19nZXRfcmF0ZShwcml2LT5waHlfcmVmX2Nsayk7CisJdTMyIGxwX3QsIG51bWVyYXRv
ciwgZGVub21pbmF0b3I7CisJdW5zaWduZWQgbG9uZyBsb25nIHRtcDsKKwl1MzIgbjsKKwlpbnQg
aTsKKworCWlmIChkcGh5X29wdHMtPmhzX2Nsa19yYXRlID4gREFUQV9SQVRFX01BWF9TUEVFRCB8
fAorCSAgICBkcGh5X29wdHMtPmhzX2Nsa19yYXRlIDwgREFUQV9SQVRFX01JTl9TUEVFRCkKKwkJ
cmV0dXJuIC1FSU5WQUw7CisKKwludW1lcmF0b3IgPSBkcGh5X29wdHMtPmhzX2Nsa19yYXRlOwor
CWRlbm9taW5hdG9yID0gcmVmX2NsazsKKwlnZXRfYmVzdF9yYXRpbygmbnVtZXJhdG9yLCAmZGVu
b21pbmF0b3IsIDI1NSwgMjU2KTsKKwlpZiAoIW51bWVyYXRvciB8fCAhZGVub21pbmF0b3IpIHsK
KwkJZGV2X2VycigmcGh5LT5kZXYsICJJbnZhbGlkICVkLyVkIGZvciAlbGQvJWxkXG4iLAorCQkJ
bnVtZXJhdG9yLCBkZW5vbWluYXRvciwKKwkJCWRwaHlfb3B0cy0+aHNfY2xrX3JhdGUsIHJlZl9j
bGspOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwl3aGlsZSAoKG51bWVyYXRvciA8IDE2KSAm
JiAoZGVub21pbmF0b3IgPD0gMTI4KSkgeworCQludW1lcmF0b3IgPDw9IDE7CisJCWRlbm9taW5h
dG9yIDw8PSAxOworCX0KKwkvKgorCSAqIENNIHJhbmdlcyBiZXR3ZWVuIDE2IGFuZCAyNTUKKwkg
KiBDTiByYW5nZXMgYmV0d2VlbiAxIGFuZCAzMgorCSAqIENPIGlzIHBvd2VyIG9mIDI6IDEsIDIs
IDQsIDgKKwkgKi8KKwlpID0gX19mZnMoZGVub21pbmF0b3IpOworCWlmIChpID4gMykKKwkJaSA9
IDM7CisJY2ZnLT5jbiA9IGRlbm9taW5hdG9yID4+IGk7CisJY2ZnLT5jbyA9IDEgPDwgaTsKKwlj
ZmctPmNtID0gbnVtZXJhdG9yOworCisJaWYgKGNmZy0+Y20gPCAxNiB8fCBjZmctPmNtID4gMjU1
IHx8CisJICAgIGNmZy0+Y24gPCAxIHx8IGNmZy0+Y24gPiAzMiB8fAorCSAgICBjZmctPmNvIDwg
MSB8fCBjZmctPmNvID4gOCkgeworCQlkZXZfZXJyKCZwaHktPmRldiwgIkludmFsaWQgQ00vQ04v
Q08gdmFsdWVzOiAldS8ldS8ldVxuIiwKKwkJCWNmZy0+Y20sIGNmZy0+Y24sIGNmZy0+Y28pOwor
CQlkZXZfZXJyKCZwaHktPmRldiwgImZvciBoc19jbGsvcmVmX2Nsaz0lbGQvJWxkIH4gJWQvJWRc
biIsCisJCQlkcGh5X29wdHMtPmhzX2Nsa19yYXRlLCByZWZfY2xrLAorCQkJbnVtZXJhdG9yLCBk
ZW5vbWluYXRvcik7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCWRldl9kYmcoJnBoeS0+ZGV2
LCAiaHNfY2xrL3JlZl9jbGs9JWxkLyVsZCDiqbAgJWQvJWRcbiIsCisJCWRwaHlfb3B0cy0+aHNf
Y2xrX3JhdGUsIHJlZl9jbGssIG51bWVyYXRvciwgZGVub21pbmF0b3IpOworCisJLyogTFAgY2xv
Y2sgcGVyaW9kICovCisJdG1wID0gMTAwMDAwMDAwMDAwMExMOworCWRvX2Rpdih0bXAsIGRwaHlf
b3B0cy0+bHBfY2xrX3JhdGUpOyAvKiBwcyAqLworCWlmICh0bXAgPiBVTE9OR19NQVgpCisJCXJl
dHVybiAtRUlOVkFMOworCisJbHBfdCA9IHRtcDsKKwlkZXZfZGJnKCZwaHktPmRldiwgIkxQIGNs
b2NrICVsdSwgcGVyaW9kOiAldSBwc1xuIiwKKwkJZHBoeV9vcHRzLT5scF9jbGtfcmF0ZSwgbHBf
dCk7CisKKwkvKiBoc19wcmVwYXJlOiBpbiBscCBjbG9jayBwZXJpb2RzICovCisJaWYgKDIgKiBk
cGh5X29wdHMtPmhzX3ByZXBhcmUgPiA1ICogbHBfdCkgeworCQlkZXZfZXJyKCZwaHktPmRldiwK
KwkJCSJoc19wcmVwYXJlICgldSkgPiAyLjUgKiBscCBjbG9jayBwZXJpb2QgKCV1KSIsCisJCQlk
cGh5X29wdHMtPmhzX3ByZXBhcmUsIGxwX3QpOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisJLyog
MDA6IGxwX3QsIDAxOiAxLjUgKiBscF90LCAxMDogMiAqIGxwX3QsIDExOiAyLjUgKiBscF90ICov
CisJaWYgKGRwaHlfb3B0cy0+aHNfcHJlcGFyZSA8IGxwX3QpIHsKKwkJbiA9IDA7CisJfSBlbHNl
IHsKKwkJdG1wID0gMiAqIChkcGh5X29wdHMtPmhzX3ByZXBhcmUgLSBscF90KTsKKwkJZG9fZGl2
KHRtcCwgbHBfdCk7CisJCW4gPSB0bXA7CisJfQorCWNmZy0+bV9wcmdfaHNfcHJlcGFyZSA9IG47
CisKKwkvKiBjbGtfcHJlcGFyZTogaW4gbHAgY2xvY2sgcGVyaW9kcyAqLworCWlmICgyICogZHBo
eV9vcHRzLT5jbGtfcHJlcGFyZSA+IDMgKiBscF90KSB7CisJCWRldl9lcnIoJnBoeS0+ZGV2LAor
CQkJImNsa19wcmVwYXJlICgldSkgPiAxLjUgKiBscCBjbG9jayBwZXJpb2QgKCV1KSIsCisJCQlk
cGh5X29wdHMtPmNsa19wcmVwYXJlLCBscF90KTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCS8q
IDAwOiBscF90LCAwMTogMS41ICogbHBfdCAqLworCWNmZy0+bWNfcHJnX2hzX3ByZXBhcmUgPSBk
cGh5X29wdHMtPmNsa19wcmVwYXJlID4gbHBfdCA/IDEgOiAwOworCisJLyogaHNfemVybzogZm9y
bXVsYSBmcm9tIE5YUCBCU1AgKi8KKwluID0gKDE0NCAqIChkcGh5X29wdHMtPmhzX2Nsa19yYXRl
IC8gMTAwMDAwMCkgLSA0NzUwMCkgLyAxMDAwMDsKKwljZmctPm1fcHJnX2hzX3plcm8gPSBuIDwg
MSA/IDEgOiBuOworCisJLyogY2xrX3plcm86IGZvcm11bGEgZnJvbSBOWFAgQlNQICovCisJbiA9
ICgzNCAqIChkcGh5X29wdHMtPmhzX2Nsa19yYXRlIC8gMTAwMDAwMCkgLSAyNTAwKSAvIDEwMDA7
CisJY2ZnLT5tY19wcmdfaHNfemVybyA9IG4gPCAxID8gMSA6IG47CisKKwkvKiBjbGtfdHJhaWws
IGhzX3RyYWlsOiBmb3JtdWxhIGZyb20gTlhQIEJTUCAqLworCW4gPSAoMTAzICogKGRwaHlfb3B0
cy0+aHNfY2xrX3JhdGUgLyAxMDAwMDAwKSArIDEwMDAwKSAvIDEwMDAwOworCWlmIChuID4gMTUp
CisJCW4gPSAxNTsKKwlpZiAobiA8IDEpCisJCW4gPSAxOworCWNmZy0+bV9wcmdfaHNfdHJhaWwg
PSBuOworCWNmZy0+bWNfcHJnX2hzX3RyYWlsID0gbjsKKworCS8qIHJ4aHNfc2V0dGxlOiBmb3Jt
dWxhIGZyb20gTlhQIEJTUCAqLworCWlmIChkcGh5X29wdHMtPmhzX2Nsa19yYXRlIDwgTUJQUyg4
MCkpCisJCWNmZy0+cnhoc19zZXR0bGUgPSAweDBkOworCWVsc2UgaWYgKGRwaHlfb3B0cy0+aHNf
Y2xrX3JhdGUgPCBNQlBTKDkwKSkKKwkJY2ZnLT5yeGhzX3NldHRsZSA9IDB4MGM7CisJZWxzZSBp
ZiAoZHBoeV9vcHRzLT5oc19jbGtfcmF0ZSA8IE1CUFMoMTI1KSkKKwkJY2ZnLT5yeGhzX3NldHRs
ZSA9IDB4MGI7CisJZWxzZSBpZiAoZHBoeV9vcHRzLT5oc19jbGtfcmF0ZSA8IE1CUFMoMTUwKSkK
KwkJY2ZnLT5yeGhzX3NldHRsZSA9IDB4MGE7CisJZWxzZSBpZiAoZHBoeV9vcHRzLT5oc19jbGtf
cmF0ZSA8IE1CUFMoMjI1KSkKKwkJY2ZnLT5yeGhzX3NldHRsZSA9IDB4MDk7CisJZWxzZSBpZiAo
ZHBoeV9vcHRzLT5oc19jbGtfcmF0ZSA8IE1CUFMoNTAwKSkKKwkJY2ZnLT5yeGhzX3NldHRsZSA9
IDB4MDg7CisJZWxzZQorCQljZmctPnJ4aHNfc2V0dGxlID0gMHgwNzsKKworCWRldl9kYmcoJnBo
eS0+ZGV2LCAiaHNfcHJlcGFyZTogJXUsIGNsa19wcmVwYXJlOiAldSwgIgorCQkiaHNfemVybzog
JXUsIGNsa196ZXJvOiAldSwgIgorCQkiaHNfdHJhaWw6ICV1LCBjbGtfdHJhaWw6ICV1LCAiCisJ
CSJyeGhzX3NldHRsZTogJXVcbiIsCisJCWNmZy0+bV9wcmdfaHNfcHJlcGFyZSwgY2ZnLT5tY19w
cmdfaHNfcHJlcGFyZSwKKwkJY2ZnLT5tX3ByZ19oc196ZXJvLCBjZmctPm1jX3ByZ19oc196ZXJv
LAorCQljZmctPm1fcHJnX2hzX3RyYWlsLCBjZmctPm1jX3ByZ19oc190cmFpbCwKKwkJY2ZnLT5y
eGhzX3NldHRsZSk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgbWl4ZWxfcGh5X3Nl
dF9oc190aW1pbmdzKHN0cnVjdCBwaHkgKnBoeSkKK3sKKwlzdHJ1Y3QgbWl4ZWxfZHBoeV9wcml2
ICpwcml2ID0gcGh5X2dldF9kcnZkYXRhKHBoeSk7CisKKwlwaHlfd3JpdGUocGh5LCBwcml2LT5j
ZmcubV9wcmdfaHNfcHJlcGFyZSwgRFBIWV9NX1BSR19IU19QUkVQQVJFKTsKKwlwaHlfd3JpdGUo
cGh5LCBwcml2LT5jZmcubWNfcHJnX2hzX3ByZXBhcmUsIERQSFlfTUNfUFJHX0hTX1BSRVBBUkUp
OworCXBoeV93cml0ZShwaHksIHByaXYtPmNmZy5tX3ByZ19oc196ZXJvLCBEUEhZX01fUFJHX0hT
X1pFUk8pOworCXBoeV93cml0ZShwaHksIHByaXYtPmNmZy5tY19wcmdfaHNfemVybywgRFBIWV9N
Q19QUkdfSFNfWkVSTyk7CisJcGh5X3dyaXRlKHBoeSwgcHJpdi0+Y2ZnLm1fcHJnX2hzX3RyYWls
LCBEUEhZX01fUFJHX0hTX1RSQUlMKTsKKwlwaHlfd3JpdGUocGh5LCBwcml2LT5jZmcubWNfcHJn
X2hzX3RyYWlsLCBEUEhZX01DX1BSR19IU19UUkFJTCk7CisJcGh5X3dyaXRlKHBoeSwgcHJpdi0+
Y2ZnLnJ4aHNfc2V0dGxlLCBwcml2LT5kZXZkYXRhLT5yZWdfcnhoc19zZXR0bGUpOworfQorCitz
dGF0aWMgaW50IG1peGVsX2RwaHlfc2V0X3BsbF9wYXJhbXMoc3RydWN0IHBoeSAqcGh5KQorewor
CXN0cnVjdCBtaXhlbF9kcGh5X3ByaXYgKnByaXYgPSBkZXZfZ2V0X2RydmRhdGEocGh5LT5kZXYu
cGFyZW50KTsKKworCWlmIChwcml2LT5jZmcuY20gPCAxNiB8fCBwcml2LT5jZmcuY20gPiAyNTUg
fHwKKwkgICAgcHJpdi0+Y2ZnLmNuIDwgMSB8fCBwcml2LT5jZmcuY24gPiAzMiB8fAorCSAgICBw
cml2LT5jZmcuY28gPCAxIHx8IHByaXYtPmNmZy5jbyA+IDgpIHsKKwkJZGV2X2VycigmcGh5LT5k
ZXYsICJJbnZhbGlkIENNL0NOL0NPIHZhbHVlcyEgKCV1LyV1LyV1KVxuIiwKKwkJCXByaXYtPmNm
Zy5jbSwgcHJpdi0+Y2ZnLmNuLCBwcml2LT5jZmcuY28pOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9
CisJZGV2X2RiZygmcGh5LT5kZXYsICJVc2luZyBDTToldSBDTjoldSBDTzoldVxuIiwKKwkJcHJp
di0+Y2ZnLmNtLCBwcml2LT5jZmcuY24sIHByaXYtPmNmZy5jbyk7CisJcGh5X3dyaXRlKHBoeSwg
Q00ocHJpdi0+Y2ZnLmNtKSwgRFBIWV9DTSk7CisJcGh5X3dyaXRlKHBoeSwgQ04ocHJpdi0+Y2Zn
LmNuKSwgRFBIWV9DTik7CisJcGh5X3dyaXRlKHBoeSwgQ08ocHJpdi0+Y2ZnLmNvKSwgRFBIWV9D
Tyk7CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbWl4ZWxfZHBoeV9jb25maWd1cmUoc3Ry
dWN0IHBoeSAqcGh5LCB1bmlvbiBwaHlfY29uZmlndXJlX29wdHMgKm9wdHMpCit7CisJc3RydWN0
IG1peGVsX2RwaHlfcHJpdiAqcHJpdiA9IHBoeV9nZXRfZHJ2ZGF0YShwaHkpOworCXN0cnVjdCBt
aXhlbF9kcGh5X2NmZyBjZmcgPSB7IDAgfTsKKwlpbnQgcmV0OworCisJcmV0ID0gbWl4ZWxfZHBo
eV9jb25maWdfZnJvbV9vcHRzKHBoeSwgJm9wdHMtPm1pcGlfZHBoeSwgJmNmZyk7CisJaWYgKHJl
dCkKKwkJcmV0dXJuIHJldDsKKworCS8qIFVwZGF0ZSB0aGUgY29uZmlndXJhdGlvbiAqLworCW1l
bWNweSgmcHJpdi0+Y2ZnLCAmY2ZnLCBzaXplb2Yoc3RydWN0IG1peGVsX2RwaHlfY2ZnKSk7CisK
KwlwaHlfd3JpdGUocGh5LCAweDAwLCBEUEhZX0xPQ0tfQllQKTsKKwlwaHlfd3JpdGUocGh5LCAw
eDAxLCBwcml2LT5kZXZkYXRhLT5yZWdfdHhfcmNhbCk7CisJcGh5X3dyaXRlKHBoeSwgMHgwMCwg
cHJpdi0+ZGV2ZGF0YS0+cmVnX2F1dG9fcGRfZW4pOworCXBoeV93cml0ZShwaHksIDB4MDIsIHBy
aXYtPmRldmRhdGEtPnJlZ19yeGxwcnApOworCXBoeV93cml0ZShwaHksIDB4MDIsIHByaXYtPmRl
dmRhdGEtPnJlZ19yeGNkcnApOworCXBoeV93cml0ZShwaHksIDB4MjUsIERQSFlfVFNUKTsKKwor
CW1peGVsX3BoeV9zZXRfaHNfdGltaW5ncyhwaHkpOworCXJldCA9IG1peGVsX2RwaHlfc2V0X3Bs
bF9wYXJhbXMocGh5KTsKKwlpZiAocmV0IDwgMCkKKwkJcmV0dXJuIHJldDsKKworCXJldHVybiAw
OworfQorCitzdGF0aWMgaW50IG1peGVsX2RwaHlfdmFsaWRhdGUoc3RydWN0IHBoeSAqcGh5LCBl
bnVtIHBoeV9tb2RlIG1vZGUsIGludCBzdWJtb2RlLAorCQkJICAgICAgIHVuaW9uIHBoeV9jb25m
aWd1cmVfb3B0cyAqb3B0cykKK3sKKwlzdHJ1Y3QgbWl4ZWxfZHBoeV9jZmcgY2ZnID0geyAwIH07
CisKKwlpZiAobW9kZSAhPSBQSFlfTU9ERV9NSVBJX0RQSFkpCisJCXJldHVybiAtRUlOVkFMOwor
CisJcmV0dXJuIG1peGVsX2RwaHlfY29uZmlnX2Zyb21fb3B0cyhwaHksICZvcHRzLT5taXBpX2Rw
aHksICZjZmcpOworfQorCitzdGF0aWMgaW50IG1peGVsX2RwaHlfaW5pdChzdHJ1Y3QgcGh5ICpw
aHkpCit7CisJcGh5X3dyaXRlKHBoeSwgUFdSX09GRiwgRFBIWV9QRF9QTEwpOworCXBoeV93cml0
ZShwaHksIFBXUl9PRkYsIERQSFlfUERfRFBIWSk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGlj
IGludCBtaXhlbF9kcGh5X2V4aXQoc3RydWN0IHBoeSAqcGh5KQoreworCXBoeV93cml0ZShwaHks
IDAsIERQSFlfQ00pOworCXBoeV93cml0ZShwaHksIDAsIERQSFlfQ04pOworCXBoeV93cml0ZShw
aHksIDAsIERQSFlfQ08pOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbWl4ZWxfZHBo
eV9wb3dlcl9vbihzdHJ1Y3QgcGh5ICpwaHkpCit7CisJc3RydWN0IG1peGVsX2RwaHlfcHJpdiAq
cHJpdiA9IHBoeV9nZXRfZHJ2ZGF0YShwaHkpOworCXUzMiBsb2NrZWQ7CisJaW50IHJldDsKKwor
CXJldCA9IGNsa19wcmVwYXJlX2VuYWJsZShwcml2LT5waHlfcmVmX2Nsayk7CisJaWYgKHJldCA8
IDApCisJCXJldHVybiByZXQ7CisKKwlwaHlfd3JpdGUocGh5LCBQV1JfT04sIERQSFlfUERfUExM
KTsKKwlyZXQgPSByZWdtYXBfcmVhZF9wb2xsX3RpbWVvdXQocHJpdi0+cmVnbWFwLCBEUEhZX0xP
Q0ssIGxvY2tlZCwKKwkJCQkgICAgICAgbG9ja2VkLCBQTExfTE9DS19TTEVFUCwKKwkJCQkgICAg
ICAgUExMX0xPQ0tfVElNRU9VVCk7CisJaWYgKHJldCA8IDApIHsKKwkJZGV2X2VycigmcGh5LT5k
ZXYsICJDb3VsZCBub3QgZ2V0IERQSFkgbG9jayAoJWQpIVxuIiwgcmV0KTsKKwkJZ290byBjbG9j
a19kaXNhYmxlOworCX0KKwlwaHlfd3JpdGUocGh5LCBQV1JfT04sIERQSFlfUERfRFBIWSk7CisK
KwlyZXR1cm4gMDsKK2Nsb2NrX2Rpc2FibGU6CisJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKHByaXYt
PnBoeV9yZWZfY2xrKTsKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IG1peGVsX2RwaHlf
cG93ZXJfb2ZmKHN0cnVjdCBwaHkgKnBoeSkKK3sKKwlzdHJ1Y3QgbWl4ZWxfZHBoeV9wcml2ICpw
cml2ID0gcGh5X2dldF9kcnZkYXRhKHBoeSk7CisKKwlwaHlfd3JpdGUocGh5LCBQV1JfT0ZGLCBE
UEhZX1BEX1BMTCk7CisJcGh5X3dyaXRlKHBoeSwgUFdSX09GRiwgRFBIWV9QRF9EUEhZKTsKKwor
CWNsa19kaXNhYmxlX3VucHJlcGFyZShwcml2LT5waHlfcmVmX2Nsayk7CisKKwlyZXR1cm4gMDsK
K30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBwaHlfb3BzIG1peGVsX2RwaHlfcGh5X29wcyA9IHsK
KwkuaW5pdCA9IG1peGVsX2RwaHlfaW5pdCwKKwkuZXhpdCA9IG1peGVsX2RwaHlfZXhpdCwKKwku
cG93ZXJfb24gPSBtaXhlbF9kcGh5X3Bvd2VyX29uLAorCS5wb3dlcl9vZmYgPSBtaXhlbF9kcGh5
X3Bvd2VyX29mZiwKKwkuY29uZmlndXJlID0gbWl4ZWxfZHBoeV9jb25maWd1cmUsCisJLnZhbGlk
YXRlID0gbWl4ZWxfZHBoeV92YWxpZGF0ZSwKKwkub3duZXIgPSBUSElTX01PRFVMRSwKK307CisK
K3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIG1peGVsX2RwaHlfb2ZfbWF0Y2hbXSA9
IHsKKwl7IC5jb21wYXRpYmxlID0gImZzbCxpbXg4bXEtbWlwaS1kcGh5IiwKKwkgIC5kYXRhID0g
Jm1peGVsX2RwaHlfZGV2ZGF0YVtNSVhFTF9JTVg4TVFdIH0sCisJeyAvKiBzZW50aW5lbCAqLyB9
LAorfTsKK01PRFVMRV9ERVZJQ0VfVEFCTEUob2YsIG1peGVsX2RwaHlfb2ZfbWF0Y2gpOworCitz
dGF0aWMgaW50IG1peGVsX2RwaHlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikK
K3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmcGRldi0+ZGV2OworCXN0cnVjdCBkZXZpY2Vfbm9k
ZSAqbnAgPSBkZXYtPm9mX25vZGU7CisJc3RydWN0IHBoeV9wcm92aWRlciAqcGh5X3Byb3ZpZGVy
OworCXN0cnVjdCBtaXhlbF9kcGh5X3ByaXYgKnByaXY7CisJc3RydWN0IHJlc291cmNlICpyZXM7
CisJc3RydWN0IHBoeSAqcGh5OworCXZvaWQgX19pb21lbSAqYmFzZTsKKworCWlmICghbnApCisJ
CXJldHVybiAtRU5PREVWOworCisJcHJpdiA9IGRldm1fa3phbGxvYyhkZXYsIHNpemVvZigqcHJp
diksIEdGUF9LRVJORUwpOworCWlmICghcHJpdikKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlwcml2
LT5kZXZkYXRhID0gb2ZfZGV2aWNlX2dldF9tYXRjaF9kYXRhKCZwZGV2LT5kZXYpOworCWlmICgh
cHJpdi0+ZGV2ZGF0YSkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlyZXMgPSBwbGF0Zm9ybV9nZXRf
cmVzb3VyY2UocGRldiwgSU9SRVNPVVJDRV9NRU0sIDApOworCWJhc2UgPSBkZXZtX2lvcmVtYXBf
cmVzb3VyY2UoZGV2LCByZXMpOworCWlmIChJU19FUlIoYmFzZSkpCisJCXJldHVybiBQVFJfRVJS
KGJhc2UpOworCisJcHJpdi0+cmVnbWFwID0gZGV2bV9yZWdtYXBfaW5pdF9tbWlvKCZwZGV2LT5k
ZXYsIGJhc2UsCisJCQkJCSAgICAgJm1peGVsX2RwaHlfcmVnbWFwX2NvbmZpZyk7CisJaWYgKElT
X0VSUihwcml2LT5yZWdtYXApKSB7CisJCWRldl9lcnIoZGV2LCAiQ291bGRuJ3QgY3JlYXRlIHRo
ZSBEUEhZIHJlZ21hcFxuIik7CisJCXJldHVybiBQVFJfRVJSKHByaXYtPnJlZ21hcCk7CisJfQor
CisJcHJpdi0+cGh5X3JlZl9jbGsgPSBkZXZtX2Nsa19nZXQoJnBkZXYtPmRldiwgInBoeV9yZWYi
KTsKKwlpZiAoSVNfRVJSKHByaXYtPnBoeV9yZWZfY2xrKSkgeworCQlkZXZfZXJyKGRldiwgIk5v
IHBoeV9yZWYgY2xvY2sgZm91bmRcbiIpOworCQlyZXR1cm4gUFRSX0VSUihwcml2LT5waHlfcmVm
X2Nsayk7CisJfQorCWRldl9kYmcoZGV2LCAicGh5X3JlZiBjbG9jayByYXRlOiAlbHVcbiIsCisJ
CWNsa19nZXRfcmF0ZShwcml2LT5waHlfcmVmX2NsaykpOworCisJZGV2X3NldF9kcnZkYXRhKGRl
diwgcHJpdik7CisKKwlwaHkgPSBkZXZtX3BoeV9jcmVhdGUoZGV2LCBucCwgJm1peGVsX2RwaHlf
cGh5X29wcyk7CisJaWYgKElTX0VSUihwaHkpKSB7CisJCWRldl9lcnIoZGV2LCAiRmFpbGVkIHRv
IGNyZWF0ZSBwaHkgJWxkXG4iLCBQVFJfRVJSKHBoeSkpOworCQlyZXR1cm4gUFRSX0VSUihwaHkp
OworCX0KKwlwaHlfc2V0X2RydmRhdGEocGh5LCBwcml2KTsKKworCXBoeV9wcm92aWRlciA9IGRl
dm1fb2ZfcGh5X3Byb3ZpZGVyX3JlZ2lzdGVyKGRldiwgb2ZfcGh5X3NpbXBsZV94bGF0ZSk7CisK
KwlyZXR1cm4gUFRSX0VSUl9PUl9aRVJPKHBoeV9wcm92aWRlcik7Cit9CisKK3N0YXRpYyBzdHJ1
Y3QgcGxhdGZvcm1fZHJpdmVyIG1peGVsX2RwaHlfZHJpdmVyID0geworCS5wcm9iZQk9IG1peGVs
X2RwaHlfcHJvYmUsCisJLmRyaXZlciA9IHsKKwkJLm5hbWUgPSAibWl4ZWwtbWlwaS1kcGh5IiwK
KwkJLm9mX21hdGNoX3RhYmxlCT0gbWl4ZWxfZHBoeV9vZl9tYXRjaCwKKwl9Cit9OworbW9kdWxl
X3BsYXRmb3JtX2RyaXZlcihtaXhlbF9kcGh5X2RyaXZlcik7CisKK01PRFVMRV9BVVRIT1IoIk5Y
UCBTZW1pY29uZHVjdG9yIik7CitNT0RVTEVfREVTQ1JJUFRJT04oIk1peGVsIE1JUEktRFNJIFBI
WSBkcml2ZXIiKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwiKTsKLS0gCjIuMjAuMQoKX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcg
bGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRl
c2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
