Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D5789276F93
	for <lists+dri-devel@lfdr.de>; Thu, 24 Sep 2020 13:13:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E671E6E207;
	Thu, 24 Sep 2020 11:13:29 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-oo1-xc44.google.com (mail-oo1-xc44.google.com
 [IPv6:2607:f8b0:4864:20::c44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B3FBA6E201
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Sep 2020 11:13:28 +0000 (UTC)
Received: by mail-oo1-xc44.google.com with SMTP id z1so682089ooj.3
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Sep 2020 04:13:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=pQGt1gyodwAIDja51vqCcilyPCUiAMqoN7lQY5l3I2s=;
 b=NmQVJM0ECkNkkdFmMvPDZ+6KN7P+VsB96i0NOMO6kATS/mKzU7TVXy0rXaLXbZfilM
 PdczTg0BhQUclOBWi0HQJwMVXZYdN5Jp430vX+dWsVwTOiJhMvG406AVdrxuq71aBceb
 aH80cXfjQxaKcKNGCcJ9mlOpnRwqhyNlNIWiY=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=pQGt1gyodwAIDja51vqCcilyPCUiAMqoN7lQY5l3I2s=;
 b=ejmv2gMJm2vdieH6mz+5lfF8FFAPyCGP8A593UVPGfepsfYbSsS3yrCEesfkVqVBlf
 1AC/lZQgOFkZiyFP3AmmyofM9dZMGiOEyAGQ+LZJEMJufic4YWosBwcCOIsTJ40Vwfvq
 /1m8UzgN2R+XCpkcAkp+qgbn1p61/j8x4bAJX2XdV9Gl9UE0n4GuIrZXFyoi70Wd/+Nz
 AzOxjxSXH52xI8o64YAxzn1wG378gKPexs2RtZ3R4i4KbcX9WVn2lYA/aMRXcRx+hOoG
 bRn7CnImeeCsUG0PgUd9nGCLUPibh/ieCS0rpA6lByVQs5MXxbaDqzKzNcu9RddIvTvF
 rpcQ==
X-Gm-Message-State: AOAM530sLCuZFdpbkmZSa4UX9w93Dr9ba1L/T6tyfLrcNwPuJq3hca8o
 ijSpOiAJOoIUD4dWIYrAb4G40jS89JebVEaFzM3ZKFfahd5r8Q==
X-Google-Smtp-Source: ABdhPJyyXxRAyPEZ8f7s5Jn/V8PllWwcIffkh6Io0tnRCtNCRGMrlwvlHJDNEH+w4vwkaxP6LAq3wt2xd4MdmLaHePE=
X-Received: by 2002:a4a:3b44:: with SMTP id s65mr2910920oos.85.1600946008012; 
 Thu, 24 Sep 2020 04:13:28 -0700 (PDT)
MIME-Version: 1.0
References: <20200923105737.2943649-1-daniel.vetter@ffwll.ch>
 <20200923151852.2952812-1-daniel.vetter@ffwll.ch>
 <20200923191724.GA62596@xpredator>
 <CAKMK7uH0WiEPP1H1DZPdE4mJdStTTtnZJQN5rjnkG_6va_1Tdg@mail.gmail.com>
 <20200924104101.63be1c13@eldfell>
 <CAKMK7uHwU0r7Z699qw3Y2HPuvzL3-B12fw3gDbdrxOX1V6iK2w@mail.gmail.com>
 <20200924131056.54beb12e@eldfell> <20200924110135.GJ6112@intel.com>
In-Reply-To: <20200924110135.GJ6112@intel.com>
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Thu, 24 Sep 2020 13:13:17 +0200
Message-ID: <CAKMK7uHvj9r179zgQuAxVOBuGSpj5JtxaWJzZmLEc_wNNsJjrw@mail.gmail.com>
Subject: Re: [PATCH] drm/atomic: document and enforce rules around "spurious"
 EBUSY
To: =?UTF-8?B?VmlsbGUgU3lyasOkbMOk?= <ville.syrjala@linux.intel.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Vetter <daniel.vetter@intel.com>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 Marius Vlad <marius.vlad@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBTZXAgMjQsIDIwMjAgYXQgMTowMSBQTSBWaWxsZSBTeXJqw6Rsw6QKPHZpbGxlLnN5
cmphbGFAbGludXguaW50ZWwuY29tPiB3cm90ZToKPgo+IE9uIFRodSwgU2VwIDI0LCAyMDIwIGF0
IDAxOjEwOjU2UE0gKzAzMDAsIFBla2thIFBhYWxhbmVuIHdyb3RlOgo+ID4gT24gVGh1LCAyNCBT
ZXAgMjAyMCAxMDowNDoxMiArMDIwMAo+ID4gRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBm
ZndsbC5jaD4gd3JvdGU6Cj4gPgo+ID4gPiBPbiBUaHUsIFNlcCAyNCwgMjAyMCBhdCA5OjQxIEFN
IFBla2thIFBhYWxhbmVuIDxwcGFhbGFuZW5AZ21haWwuY29tPiB3cm90ZToKPiA+ID4gPgo+ID4g
PiA+IE9uIFdlZCwgMjMgU2VwIDIwMjAgMjI6MDE6MjUgKzAyMDAKPiA+ID4gPiBEYW5pZWwgVmV0
dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPiB3cm90ZToKPiA+ID4gPgo+ID4gPiA+ID4gT24g
V2VkLCBTZXAgMjMsIDIwMjAgYXQgOToxNyBQTSBNYXJpdXMgVmxhZCA8bWFyaXVzLnZsYWRAY29s
bGFib3JhLmNvbT4gd3JvdGU6Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+IE9uIFdlZCwgU2VwIDIz
LCAyMDIwIGF0IDA1OjE4OjUyUE0gKzAyMDAsIERhbmllbCBWZXR0ZXIgd3JvdGU6Cj4gPiA+ID4g
PiA+ID4gV2hlbiBkb2luZyBhbiBhdG9taWMgbW9kZXNldCB3aXRoIEFMTE9XX01PREVTRVQgZHJp
dmVycyBhcmUgYWxsb3dlZCB0bwo+ID4gPiA+ID4gPiA+IHB1bGwgaW4gYXJiaXRyYXJ5IG90aGVy
IHJlc291cmNlcywgaW5jbHVkaW5nIENSVENzIChlLmcuIHdoZW4KPiA+ID4gPiA+ID4gPiByZWNv
bmZpZ3VyaW5nIGdsb2JhbCByZXNvdXJjZXMpLgo+ID4gPiA+Cj4gPiA+ID4gLi4uCj4gPiA+ID4K
PiA+ID4gPiA+ID4gPiBAQCAtMTMxMyw2ICsxMzIyLDI2IEBAIGludCBkcm1fYXRvbWljX2NoZWNr
X29ubHkoc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQo+ID4gPiA+ID4gPiA+ICAgICAg
ICAgICAgICAgfQo+ID4gPiA+ID4gPiA+ICAgICAgIH0KPiA+ID4gPiA+ID4gPgo+ID4gPiA+ID4g
PiA+ICsgICAgIGZvcl9lYWNoX25ld19jcnRjX2luX3N0YXRlKHN0YXRlLCBjcnRjLCBvbGRfY3J0
Y19zdGF0ZSwgaSkKPiA+ID4gPiA+ID4gPiArICAgICAgICAgICAgIGFmZmVjdGVkX2NydGMgfD0g
ZHJtX2NydGNfbWFzayhjcnRjKTsKPiA+ID4gPiA+ID4gPiArCj4gPiA+ID4gPiA+ID4gKyAgICAg
LyoKPiA+ID4gPiA+ID4gPiArICAgICAgKiBGb3IgY29tbWl0cyB0aGF0IGFsbG93IG1vZGVzZXRz
IGRyaXZlcnMgY2FuIGFkZCBvdGhlciBDUlRDcyB0byB0aGUKPiA+ID4gPiA+ID4gPiArICAgICAg
KiBhdG9taWMgY29tbWl0LCBlLmcuIHdoZW4gdGhleSBuZWVkIHRvIHJlYWxsb2NhdGUgZ2xvYmFs
IHJlc291cmNlcy4KPiA+ID4gPiA+ID4gPiArICAgICAgKiBUaGlzIGNhbiBjYXVzZSBzcHVyaW91
cyBFQlVTWSwgd2hpY2ggcm9icyBjb21wb3NpdG9ycyBvZiBhIHZlcnkKPiA+ID4gPiA+ID4gPiAr
ICAgICAgKiBlZmZlY3RpdmUgc2FuaXR5IGNoZWNrIGZvciB0aGVpciBkcmF3aW5nIGxvb3AuIFRo
ZXJlZm9yIG9ubHkgYWxsb3cKPiA+ID4gPiA+ID4gPiArICAgICAgKiBkcml2ZXJzIHRvIGFkZCB1
bnJlbGF0ZWQgQ1JUQyBzdGF0ZXMgZm9yIG1vZGVzZXQgY29tbWl0cy4KPiA+ID4gPiA+ID4gPiAr
ICAgICAgKgo+ID4gPiA+ID4gPiA+ICsgICAgICAqIEZJWE1FOiBTaG91bGQgYWRkIGFmZmVjdGVk
X2NydGMgbWFzayB0byB0aGUgQVRPTUlDIElPQ1RMIGFzIGFuIG91dHB1dAo+ID4gPiA+ID4gPiA+
ICsgICAgICAqIHNvIGNvbXBvc2l0b3JzIGtub3cgd2hhdCdzIGdvaW5nIG9uLgo+ID4gPiA+ID4g
PiA+ICsgICAgICAqLwo+ID4gPiA+ID4gPiA+ICsgICAgIGlmIChhZmZlY3RlZF9jcnRjICE9IHJl
cXVlc3RlZF9jcnRjKSB7Cj4gPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBEUk1fREVCVUdfQVRP
TUlDKCJkcml2ZXIgYWRkZWQgQ1JUQyB0byBjb21taXQ6IHJlcXVlc3RlZCAweCV4LCBhZmZlY3Rl
ZCAweCUweFxuIiwKPiA+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
cmVxdWVzdGVkX2NydGMsIGFmZmVjdGVkX2NydGMpOwo+ID4gPiA+ID4gPiA+ICsgICAgICAgICAg
ICAgV0FSTighc3RhdGUtPmFsbG93X21vZGVzZXQsICJhZGRpbmcgQ1JUQyBub3QgYWxsb3dlZCB3
aXRob3V0IG1vZGVzZXRzOiByZXF1ZXN0ZWQgMHgleCwgYWZmZWN0ZWQgMHglMHhcbiIsCj4gPiA+
ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZF9jcnRjLCBhZmZlY3RlZF9jcnRj
KTsKPiA+ID4gPiA+ID4gUHJldmlvdXMgcGF0Y2ggaGFkIHRoZSB3YXJuIG9uIHN0YXRlLT5hbGxv
d19tb2Rlc2V0IG5vdyBpcwo+ID4gPiA+ID4gPiAhc3RhdGUtPmFsbG93X21vZGVzZXQuIElzIHRo
YXQgY29ycmVjdD8KPiA+ID4gPiA+Cj4gPiA+ID4gPiBXZSBuZWVkIHRvIGZpcmUgYSB3YXJuaW5n
IHdoZW4gYWxsb3dfbW9kZXNldCBpcyBfbm90XyBzZXQuIEFuIGVhcmxpZXIKPiA+ID4gPiA+IHZl
cnNpb24gZ290IHRoYXQgd3JvbmcsIGFuZCB5ZXMgdGhhdCB3b3VsZCBoYXZlIGNhdXNlZCBhIF90
b25fIG9mCj4gPiA+ID4gPiB3YXJuaW5ncyBvbiBhbnkgZmFpcmx5IG5ldyBpbnRlbCBwbGF0Zm9y
bS4KPiA+ID4gPiA+Cj4gPiA+ID4gPiA+IEkgaGF2ZW4ndCBmb2xsb3dlZCB0aGUgZW50aXJlIHRo
cmVhZCBvbiB0aGlzIG1hdHRlciwgYnV0IEkgZ3Vlc3MgdGhlIGlkZWEKPiA+ID4gPiA+ID4gaXMg
dGhhdCBzb21laG93IHRoZSBrZXJuZWwgd291bGQgcGFzcyB0byB1c2Vyc3BhY2UgYSBDUlRDIG1h
c2sgb2YKPiA+ID4gPiA+ID4gYWZmZWN0ZWRfY3J0YyAoc29tZWhvdywgd2UgZG9uJ3Qga25vdyBo
b3cgYXRtKSBhbmQgd2l0aCBpdCwgdXNlcnNwYWNlCj4gPiA+ID4gPiA+IGNhbiB0aGVuIGlzc3Vl
IGEgbmV3IGNvbW1pdCAodGhpcyBjb21taXQgYmxvY2tpbmcpIHdpdGggdGhvc2U/Cj4gPiA+ID4g
Pgo+ID4gPiA+ID4gRWl0aGVyIHRoYXQsIG9yIGp1c3QgdXNlIHRoYXQgdG8gdHJhY2sgYWxsIHRo
ZSBpbi1mbGlnaHQgZHJtIGV2ZW50cy4KPiA+ID4gPiA+IFVzZXJzcGFjZSB3aWxsIGdldCBldmVu
dHMgZm9yIGFsbCB0aGUgY3J0Yywgbm90IGp1c3QgdGhlIG9uZSBpdCBhc2tlZAo+ID4gPiA+ID4g
dG8gdXBkYXRlLgo+ID4gPiA+Cj4gPiA+ID4gV2FpdCwgZG9lcyB0aGF0IGhhcHBlbiBhbHJlYWR5
PyBHZXR0aW5nIENSVEMgZXZlbnRzIGZvciBDUlRDcyB1c2Vyc3BhY2UKPiA+ID4gPiBkaWRuJ3Qg
aW5jbHVkZSBpbiB0aGUgYXRvbWljIGNvbW1pdD8KPiA+ID4KPiA+ID4gWWVhaCBJJ20gcHJldHR5
IHN1cmUuIFdpdGggdGhlIGFmZmVjdGVkX2NydGMgbWFzayB5b3UgY291bGQgdXBkYXRlCj4gPiA+
IHlvdXIgaW50ZXJuYWwgYm9vay1rZWVwaW5nIHRvIGNhdGNoIHRoZXNlLCB3aGljaCBzaG91bGQg
YWxzbyBwcmV2ZW50Cj4gPiA+IGFsbCB0aGUgc3B1cmlvdXMgRUJVU1kuIEJ1dCBJJ20gbm90IGVu
dGlyZWx5IHN1cmUsIEkganVzdCByZWFkIHRoZQo+ID4gPiBjb2RlLCBoYXZlbid0IHRlc3RlZC4K
PiA+Cj4gPiBJZiB0aGF0IGFjdHVhbGx5IGhhcHBlbnMsIGhvdyBkb2VzIHVzZXJzcGFjZSBrbm93
IHdoZXRoZXIgdGhlCj4gPiB1c2VyZGF0YSBhcmd1bWVudCB3aXRoIHRoZSBldmVudCBpcyB2YWxp
ZCBvciBub3Q/Cj4KPiBBdCBzb21lIHBvaW50IEkgd2FzIHdvcnJpZWQgYWJvdXQgdGhlIGtlcm5l
bCBwb3RlbnRpYWxseSBzZW5kaW5nIHNwdXJpb3VzCj4gZXZlbnRzLCBidXQgSUlSQyBJIG1hbmFn
ZWQgdG8gY29udmluY2UgbXlzZWxmIHRoYXQgaXQgc2hvdWxkbid0IGhhcHBlbi4KPiBJIHRoaW5r
IEkgY2FtZSB0byB0aGUgY29uY2x1c2lvbiB0aGUgZXZlbnRzIHdlcmUgcG9wdWxhdGVkIGJlZm9y
ZSB0aGUKPiBjb3JlIGNhbGxzIGludG8gdGhlIGRyaXZlci4gQnV0IG1heWJlIEkgbWlzYW5hbHl6
ZWQgaXQsIG9yIHNvbWV0aGluZwo+IGhhcyBzaW5jZSBicm9rZW4/CgpIbSByaWdodCB0aGlzIHNo
b3VsZG4ndCBoYXBwZW4sIEkgbWlzcmVhZCB0aGUgY29kZS4gU28gaWYgdXNlcnNwYWNlCndhbnRz
IGV2ZW50cyBmb3IgYWxsIGFmZmVjdGVkIGNydGMsIGl0IG5lZWRzIHRvIGFkZCB0aGVtIGV4cGxp
Y2l0bHkgdG8KdGhlIGF0b21pYyBpb2N0bCAoanVzdCBzZXQgYW4gYXJiaXRyYXJ5IHByb3BlcnR5
IG9uIGVhY2ggY3J0YyB0byBpdHMKY3VycmVudCB2YWx1ZSBvciBzb21ldGhpbmcgbGlrZSB0aGF0
KS4gVGhhdCBhbHNvIG1lYW5zIHRoYXQgdGhlIGJ1ZwpQZWtrYSBwb3N0ZWQgc2hvdWxkbid0IGhh
dmUgYmVlbiBjYXVzZWQgYnkgdGhpcyBzdHVmZiBoZXJlLgoKTm90ZSBmb3IgY29kZSByZWFkZXJz
OiBUaGVyZSdzIGEgcmV0cnkgbG9vcCBmb3Igd3ctbXV0ZXggYmFja29mZiwgYnV0CndlIGRvIGNv
bXBsZXRlbHkgY2xlYXIgYWxsIHN0YXRlcywgc28gY3J0YyBzdGF0ZXMgc2hvdWxkbid0IGJlIGFi
bGUgdG8KcGVyc2lzdCBhbmQgdGhlbiBnZXQgZXZlbnRzIHdoZW4gdXNlcnNwYWNlIGRpZG4ndCBh
c2sgZm9yIHRoZW0uCi1EYW5pZWwKLS0gCkRhbmllbCBWZXR0ZXIKU29mdHdhcmUgRW5naW5lZXIs
IEludGVsIENvcnBvcmF0aW9uCmh0dHA6Ly9ibG9nLmZmd2xsLmNoCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJp
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
