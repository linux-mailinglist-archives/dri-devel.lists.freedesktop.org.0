Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1362610FDAC
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 13:31:53 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0F66C6E492;
	Tue,  3 Dec 2019 12:31:50 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lj1-x242.google.com (mail-lj1-x242.google.com
 [IPv6:2a00:1450:4864:20::242])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 866126E492
 for <dri-devel@lists.freedesktop.org>; Tue,  3 Dec 2019 12:31:48 +0000 (UTC)
Received: by mail-lj1-x242.google.com with SMTP id e28so3562276ljo.9
 for <dri-devel@lists.freedesktop.org>; Tue, 03 Dec 2019 04:31:48 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=ldBzZ1Hnv4Md6ugdhkJ4EQVLrMXepuHxee3+zE9wgo8=;
 b=FvyhBpKiTaQrnclx/vE1Jbf+RJQiwYVXyxWiQlEVKlgN/+L70yQ62DiV7bMcyFixdk
 U6aEf+6sv0arGPTc8idSanv5dUxRhocUWdmTFAdDM2eaDqgQ+3UmI8qBCzzr6Ls6r4km
 VaXwBpGFM94O8g2JJHKCwD+DKKcIzFh4v4KnurgQXl6gYlxvmydJoyOHiZ5ACL3WDDkQ
 2/q2PYEclGfL/wXMRKYK3O2eB533jgl8MUKt4FqFM2bAUiESWnaNuahy38wEoF90XVMe
 nCLZpelz79qPgRkfOXBmcDzE+dWZAHnq1HvQM+vEJPsCN4j33GkrmqZyH9VyHrn/j2Ai
 U6xw==
X-Gm-Message-State: APjAAAXnsEYLKBGy3wWJhAcZfm7ODuo3phtvTY7Zrhn5eERj7IcPLLW9
 LrmNiMGPl7AlHrQF0QDrthJDEQ==
X-Google-Smtp-Source: APXvYqyBAiFYRRSBCSY+bUqKdcdcQMk0Umi54LOzs/O89d8ixHu/De+Zys91V6gkZAo16DfEpaq5Yg==
X-Received: by 2002:a2e:98c4:: with SMTP id s4mr2472681ljj.102.1575376306550; 
 Tue, 03 Dec 2019 04:31:46 -0800 (PST)
Received: from genomnajs.ideon.se ([85.235.10.227])
 by smtp.gmail.com with ESMTPSA id h24sm1252617ljl.80.2019.12.03.04.31.45
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 03 Dec 2019 04:31:45 -0800 (PST)
From: Linus Walleij <linus.walleij@linaro.org>
To: Lee Jones <lee.jones@linaro.org>,
 Daniel Thompson <daniel.thompson@linaro.org>,
 Jingoo Han <jingoohan1@gmail.com>, dri-devel@lists.freedesktop.org
Subject: [PATCH] backlight: corgi: Convert to use GPIO descriptors
Date: Tue,  3 Dec 2019 13:31:43 +0100
Message-Id: <20191203123143.118487-1-linus.walleij@linaro.org>
X-Mailer: git-send-email 2.23.0
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=ldBzZ1Hnv4Md6ugdhkJ4EQVLrMXepuHxee3+zE9wgo8=;
 b=qUh+JQO9W79q51CQ+pqfAWXX0ZhIwLtd78XjBU8vK/FqzbqBmts+LdJRLcJVdaJ/UV
 Qw97ogN/VCJH/T+iANzuQFvc4J+wA7TxOfBQPFk09KRaWbnq3tx+zH+t9omiWrh2sluN
 CkuUWZsLRKbMjoty6AdAY9z2cRMziWC/JOm5deF4mVCfHf4t+10+gJdYPvP+pz6Uvab4
 DdaPdgOCJrJLVFY4EiHEfC7MCSUGki8Hz16T1Rw6H2mwpEE0LkHlskCTVmgjZeVLxqoR
 aX1Ue5Ivz6wYrse926T4o5rKd0p8DEadAv7r+mHRC8y/Cy6QztriUNrgv5GGHVv+QDKI
 sQiw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Robert Jarzmik <robert.jarzmik@free.fr>,
 Andrea Adami <andrea.adami@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGNvZGUgaW4gdGhlIENvcmdpIGJhY2tsaWdodCBkcml2ZXIgY2FuIGJlIGNvbnNpZGVyYWJs
eQpzaW1wbGlmaWVkIGJ5IG1vdmluZyB0byBHUElPIGRlc2NyaXB0b3JzIGFuZCBsb29rdXAgdGFi
bGVzCmZyb20gdGhlIGJvYXJkIGZpbGVzIGluc3RlYWQgb2YgcGFzc2luZyBHUElPIG51bWJlcnMg
dXNpbmcKdGhlIG9sZCBBUEkuCgpNYWtlIHN1cmUgdG8gZW5jb2RlIGludmVyc2lvbiBzZW1hbnRp
Y3MgZm9yIHRoZSBBa2l0YSBhbmQKU3BpdHogcGxhdGZvcm1zIGluc2lkZSB0aGUgR1BJTyBsb29r
dXAgdGFibGUgYW5kIGRyb3AgdGhlCmN1c3RvbSBpbnZlcnNpb24gc2VtYW50aWNzIGZyb20gdGhl
IGRyaXZlci4KCkFsbCBpbi10cmVlIHVzZXJzIGFyZSBjb252ZXJ0ZWQgaW4gdGhpcyBwYXRjaC4K
CkNjOiBBbmRyZWEgQWRhbWkgPGFuZHJlYS5hZGFtaUBnbWFpbC5jb20+CkNjOiBSb2JlcnQgSmFy
em1payA8cm9iZXJ0LmphcnptaWtAZnJlZS5mcj4KU2lnbmVkLW9mZi1ieTogTGludXMgV2FsbGVp
aiA8bGludXMud2FsbGVpakBsaW5hcm8ub3JnPgotLS0KIGFyY2gvYXJtL21hY2gtcHhhL2Nvcmdp
LmMgICAgICAgICAgIHwgMTIgKysrKy0KIGFyY2gvYXJtL21hY2gtcHhhL3NwaXR6LmMgICAgICAg
ICAgIHwgMzQgKysrKysrKysrKystLS0tCiBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9jb3JnaV9s
Y2QuYyB8IDY4ICsrKysrKysrLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiBpbmNsdWRlL2xpbnV4L3Nw
aS9jb3JnaV9sY2QuaCAgICAgICB8ICAzIC0tCiA0IGZpbGVzIGNoYW5nZWQsIDU0IGluc2VydGlv
bnMoKyksIDYzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2FyY2gvYXJtL21hY2gtcHhhL2Nv
cmdpLmMgYi9hcmNoL2FybS9tYWNoLXB4YS9jb3JnaS5jCmluZGV4IGYyZDczMjg5MjMwZi4uYzk2
MjVkY2FlMjdjIDEwMDY0NAotLS0gYS9hcmNoL2FybS9tYWNoLXB4YS9jb3JnaS5jCisrKyBiL2Fy
Y2gvYXJtL21hY2gtcHhhL2NvcmdpLmMKQEAgLTU2MywxMyArNTYzLDIwIEBAIHN0YXRpYyB2b2lk
IGNvcmdpX2JsX2tpY2tfYmF0dGVyeSh2b2lkKQogCX0KIH0KIAorc3RhdGljIHN0cnVjdCBncGlv
ZF9sb29rdXBfdGFibGUgY29yZ2lfbGNkY29uX2dwaW9fdGFibGUgPSB7CisJLmRldl9pZCA9ICJz
cGkwLjEiLAorCS50YWJsZSA9IHsKKwkJR1BJT19MT09LVVAoImdwaW8tcHhhIiwgQ09SR0lfR1BJ
T19CQUNLTElHSFRfQ09OVCwKKwkJCSAgICAiQkxfQ09OVCIsIEdQSU9fQUNUSVZFX0hJR0gpLAor
CQl7IH0sCisJfSwKK307CisKIHN0YXRpYyBzdHJ1Y3QgY29yZ2lfbGNkX3BsYXRmb3JtX2RhdGEg
Y29yZ2lfbGNkY29uX2luZm8gPSB7CiAJLmluaXRfbW9kZQkJPSBDT1JHSV9MQ0RfTU9ERV9WR0Es
CiAJLm1heF9pbnRlbnNpdHkJCT0gMHgyZiwKIAkuZGVmYXVsdF9pbnRlbnNpdHkJPSAweDFmLAog
CS5saW1pdF9tYXNrCQk9IDB4MGIsCi0JLmdwaW9fYmFja2xpZ2h0X2NvbnQJPSBDT1JHSV9HUElP
X0JBQ0tMSUdIVF9DT05ULAotCS5ncGlvX2JhY2tsaWdodF9vbgk9IC0xLAogCS5raWNrX2JhdHRl
cnkJCT0gY29yZ2lfYmxfa2lja19iYXR0ZXJ5LAogfTsKIApAQCAtNjA5LDYgKzYxNiw3IEBAIHN0
YXRpYyBzdHJ1Y3Qgc3BpX2JvYXJkX2luZm8gY29yZ2lfc3BpX2RldmljZXNbXSA9IHsKIHN0YXRp
YyB2b2lkIF9faW5pdCBjb3JnaV9pbml0X3NwaSh2b2lkKQogewogCXB4YTJ4eF9zZXRfc3BpX2lu
Zm8oMSwgJmNvcmdpX3NwaV9pbmZvKTsKKwlncGlvZF9hZGRfbG9va3VwX3RhYmxlKCZjb3JnaV9s
Y2Rjb25fZ3Bpb190YWJsZSk7CiAJc3BpX3JlZ2lzdGVyX2JvYXJkX2luZm8oQVJSQVlfQU5EX1NJ
WkUoY29yZ2lfc3BpX2RldmljZXMpKTsKIH0KICNlbHNlCmRpZmYgLS1naXQgYS9hcmNoL2FybS9t
YWNoLXB4YS9zcGl0ei5jIGIvYXJjaC9hcm0vbWFjaC1weGEvc3BpdHouYwppbmRleCBhNGZkYzM5
OWQxNTIuLjgyZTgwYTI1N2MwZiAxMDA2NDQKLS0tIGEvYXJjaC9hcm0vbWFjaC1weGEvc3BpdHou
YworKysgYi9hcmNoL2FybS9tYWNoLXB4YS9zcGl0ei5jCkBAIC01MjUsMTMgKzUyNSwzMyBAQCBz
dGF0aWMgdm9pZCBzcGl0el9ibF9raWNrX2JhdHRlcnkodm9pZCkKIAl9CiB9CiAKK3N0YXRpYyBz
dHJ1Y3QgZ3Bpb2RfbG9va3VwX3RhYmxlIHNwaXR6X2xjZGNvbl9ncGlvX3RhYmxlID0geworCS5k
ZXZfaWQgPSAic3BpMC4xIiwKKwkudGFibGUgPSB7CisJCUdQSU9fTE9PS1VQKCJncGlvLXB4YSIs
IFNQSVRaX0dQSU9fQkFDS0xJR0hUX0NPTlQsCisJCQkgICAgIkJMX0NPTlQiLCBHUElPX0FDVElW
RV9MT1cpLAorCQlHUElPX0xPT0tVUCgiZ3Bpby1weGEiLCBTUElUWl9HUElPX0JBQ0tMSUdIVF9P
TiwKKwkJCSAgICAiQkxfT04iLCBHUElPX0FDVElWRV9ISUdIKSwKKwkJeyB9LAorCX0sCit9Owor
CitzdGF0aWMgc3RydWN0IGdwaW9kX2xvb2t1cF90YWJsZSBha2l0YV9sY2Rjb25fZ3Bpb190YWJs
ZSA9IHsKKwkuZGV2X2lkID0gInNwaTAuMSIsCisJLnRhYmxlID0geworCQlHUElPX0xPT0tVUCgi
Z3Bpby1weGEiLCBBS0lUQV9HUElPX0JBQ0tMSUdIVF9DT05ULAorCQkJICAgICJCTF9DT05UIiwg
R1BJT19BQ1RJVkVfTE9XKSwKKwkJR1BJT19MT09LVVAoImdwaW8tcHhhIiwgQUtJVEFfR1BJT19C
QUNLTElHSFRfT04sCisJCQkgICAgIkJMX09OIiwgR1BJT19BQ1RJVkVfSElHSCksCisJCXsgfSwK
Kwl9LAorfTsKKwogc3RhdGljIHN0cnVjdCBjb3JnaV9sY2RfcGxhdGZvcm1fZGF0YSBzcGl0el9s
Y2Rjb25faW5mbyA9IHsKIAkuaW5pdF9tb2RlCQk9IENPUkdJX0xDRF9NT0RFX1ZHQSwKIAkubWF4
X2ludGVuc2l0eQkJPSAweDJmLAogCS5kZWZhdWx0X2ludGVuc2l0eQk9IDB4MWYsCiAJLmxpbWl0
X21hc2sJCT0gMHgwYiwKLQkuZ3Bpb19iYWNrbGlnaHRfY29udAk9IFNQSVRaX0dQSU9fQkFDS0xJ
R0hUX0NPTlQsCi0JLmdwaW9fYmFja2xpZ2h0X29uCT0gU1BJVFpfR1BJT19CQUNLTElHSFRfT04s
CiAJLmtpY2tfYmF0dGVyeQkJPSBzcGl0el9ibF9raWNrX2JhdHRlcnksCiB9OwogCkBAIC01NzQs
MTIgKzU5NCwxMCBAQCBzdGF0aWMgc3RydWN0IHB4YTJ4eF9zcGlfY29udHJvbGxlciBzcGl0el9z
cGlfaW5mbyA9IHsKIAogc3RhdGljIHZvaWQgX19pbml0IHNwaXR6X3NwaV9pbml0KHZvaWQpCiB7
Ci0Jc3RydWN0IGNvcmdpX2xjZF9wbGF0Zm9ybV9kYXRhICpsY2RfZGF0YSA9ICZzcGl0el9sY2Rj
b25faW5mbzsKLQotCWlmIChtYWNoaW5lX2lzX2FraXRhKCkpIHsKLQkJbGNkX2RhdGEtPmdwaW9f
YmFja2xpZ2h0X2NvbnQgPSBBS0lUQV9HUElPX0JBQ0tMSUdIVF9DT05UOwotCQlsY2RfZGF0YS0+
Z3Bpb19iYWNrbGlnaHRfb24gPSBBS0lUQV9HUElPX0JBQ0tMSUdIVF9PTjsKLQl9CisJaWYgKG1h
Y2hpbmVfaXNfYWtpdGEoKSkKKwkJZ3Bpb2RfYWRkX2xvb2t1cF90YWJsZSgmYWtpdGFfbGNkY29u
X2dwaW9fdGFibGUpOworCWVsc2UKKwkJZ3Bpb2RfYWRkX2xvb2t1cF90YWJsZSgmc3BpdHpfbGNk
Y29uX2dwaW9fdGFibGUpOwogCiAJcHhhMnh4X3NldF9zcGlfaW5mbygyLCAmc3BpdHpfc3BpX2lu
Zm8pOwogCXNwaV9yZWdpc3Rlcl9ib2FyZF9pbmZvKEFSUkFZX0FORF9TSVpFKHNwaXR6X3NwaV9k
ZXZpY2VzKSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9jb3JnaV9sY2Qu
YyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2NvcmdpX2xjZC5jCmluZGV4IDY4Zjc1OTJjNTA2
MC4uMjVlZjBjYmQ3NTgzIDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9jb3Jn
aV9sY2QuYworKysgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9jb3JnaV9sY2QuYwpAQCAtMTUs
NyArMTUsNyBAQAogI2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5oPgogI2luY2x1ZGUgPGxpbnV4L2lu
aXQuaD4KICNpbmNsdWRlIDxsaW51eC9kZWxheS5oPgotI2luY2x1ZGUgPGxpbnV4L2dwaW8uaD4K
KyNpbmNsdWRlIDxsaW51eC9ncGlvL2NvbnN1bWVyLmg+CiAjaW5jbHVkZSA8bGludXgvZmIuaD4K
ICNpbmNsdWRlIDxsaW51eC9sY2QuaD4KICNpbmNsdWRlIDxsaW51eC9zcGkvc3BpLmg+CkBAIC05
MCw5ICs5MCw4IEBAIHN0cnVjdCBjb3JnaV9sY2QgewogCWludAltb2RlOwogCWNoYXIJYnVmWzJd
OwogCi0JaW50CWdwaW9fYmFja2xpZ2h0X29uOwotCWludAlncGlvX2JhY2tsaWdodF9jb250Owot
CWludAlncGlvX2JhY2tsaWdodF9jb250X2ludmVydGVkOworCXN0cnVjdCBncGlvX2Rlc2MgKmJh
Y2tsaWdodF9vbjsKKwlzdHJ1Y3QgZ3Bpb19kZXNjICpiYWNrbGlnaHRfY29udDsKIAogCXZvaWQg
KCpraWNrX2JhdHRlcnkpKHZvaWQpOwogfTsKQEAgLTQwMywxMyArNDAyLDEzIEBAIHN0YXRpYyBp
bnQgY29yZ2lfYmxfc2V0X2ludGVuc2l0eShzdHJ1Y3QgY29yZ2lfbGNkICpsY2QsIGludCBpbnRl
bnNpdHkpCiAJY29yZ2lfc3NwX2xjZHRnX3NlbmQobGNkLCBEVVRZQ1RSTF9BRFJTLCBpbnRlbnNp
dHkpOwogCiAJLyogQml0IDUgdmlhIEdQSU9fQkFDS0xJR0hUX0NPTlQgKi8KLQljb250ID0gISEo
aW50ZW5zaXR5ICYgMHgyMCkgXiBsY2QtPmdwaW9fYmFja2xpZ2h0X2NvbnRfaW52ZXJ0ZWQ7CisJ
Y29udCA9ICEhKGludGVuc2l0eSAmIDB4MjApOwogCi0JaWYgKGdwaW9faXNfdmFsaWQobGNkLT5n
cGlvX2JhY2tsaWdodF9jb250KSkKLQkJZ3Bpb19zZXRfdmFsdWVfY2Fuc2xlZXAobGNkLT5ncGlv
X2JhY2tsaWdodF9jb250LCBjb250KTsKKwlpZiAobGNkLT5iYWNrbGlnaHRfY29udCkKKwkJZ3Bp
b2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGxjZC0+YmFja2xpZ2h0X2NvbnQsIGNvbnQpOwogCi0JaWYg
KGdwaW9faXNfdmFsaWQobGNkLT5ncGlvX2JhY2tsaWdodF9vbikpCi0JCWdwaW9fc2V0X3ZhbHVl
X2NhbnNsZWVwKGxjZC0+Z3Bpb19iYWNrbGlnaHRfb24sIGludGVuc2l0eSk7CisJaWYgKGxjZC0+
YmFja2xpZ2h0X29uKQorCQlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAobGNkLT5iYWNrbGlnaHRf
b24sIGludGVuc2l0eSk7CiAKIAlpZiAobGNkLT5raWNrX2JhdHRlcnkpCiAJCWxjZC0+a2lja19i
YXR0ZXJ5KCk7CkBAIC00ODIsNDggKzQ4MSwxNyBAQCBzdGF0aWMgaW50IHNldHVwX2dwaW9fYmFj
a2xpZ2h0KHN0cnVjdCBjb3JnaV9sY2QgKmxjZCwKIAkJCQlzdHJ1Y3QgY29yZ2lfbGNkX3BsYXRm
b3JtX2RhdGEgKnBkYXRhKQogewogCXN0cnVjdCBzcGlfZGV2aWNlICpzcGkgPSBsY2QtPnNwaV9k
ZXY7Ci0JaW50IGVycjsKLQotCWxjZC0+Z3Bpb19iYWNrbGlnaHRfb24gPSAtMTsKLQlsY2QtPmdw
aW9fYmFja2xpZ2h0X2NvbnQgPSAtMTsKLQotCWlmIChncGlvX2lzX3ZhbGlkKHBkYXRhLT5ncGlv
X2JhY2tsaWdodF9vbikpIHsKLQkJZXJyID0gZGV2bV9ncGlvX3JlcXVlc3QoJnNwaS0+ZGV2LCBw
ZGF0YS0+Z3Bpb19iYWNrbGlnaHRfb24sCi0JCQkJCSJCTF9PTiIpOwotCQlpZiAoZXJyKSB7Ci0J
CQlkZXZfZXJyKCZzcGktPmRldiwKLQkJCQkiZmFpbGVkIHRvIHJlcXVlc3QgR1BJTyVkIGZvciBi
YWNrbGlnaHRfb25cbiIsCi0JCQkJcGRhdGEtPmdwaW9fYmFja2xpZ2h0X29uKTsKLQkJCXJldHVy
biBlcnI7Ci0JCX0KLQotCQlsY2QtPmdwaW9fYmFja2xpZ2h0X29uID0gcGRhdGEtPmdwaW9fYmFj
a2xpZ2h0X29uOwotCQlncGlvX2RpcmVjdGlvbl9vdXRwdXQobGNkLT5ncGlvX2JhY2tsaWdodF9v
biwgMCk7Ci0JfQogCi0JaWYgKGdwaW9faXNfdmFsaWQocGRhdGEtPmdwaW9fYmFja2xpZ2h0X2Nv
bnQpKSB7Ci0JCWVyciA9IGRldm1fZ3Bpb19yZXF1ZXN0KCZzcGktPmRldiwgcGRhdGEtPmdwaW9f
YmFja2xpZ2h0X2NvbnQsCi0JCQkJCSJCTF9DT05UIik7Ci0JCWlmIChlcnIpIHsKLQkJCWRldl9l
cnIoJnNwaS0+ZGV2LAotCQkJCSJmYWlsZWQgdG8gcmVxdWVzdCBHUElPJWQgZm9yIGJhY2tsaWdo
dF9jb250XG4iLAotCQkJCXBkYXRhLT5ncGlvX2JhY2tsaWdodF9jb250KTsKLQkJCXJldHVybiBl
cnI7Ci0JCX0KLQotCQlsY2QtPmdwaW9fYmFja2xpZ2h0X2NvbnQgPSBwZGF0YS0+Z3Bpb19iYWNr
bGlnaHRfY29udDsKLQotCQkvKiBzcGl0eiBhbmQgYWtpdGEgdXNlIGJvdGggR1BJT3MgZm9yIGJh
Y2tsaWdodCwgYW5kCi0JCSAqIGhhdmUgaW52ZXJ0ZWQgcG9sYXJpdHkgb2YgR1BJT19CQUNLTElH
SFRfQ09OVAotCQkgKi8KLQkJaWYgKGdwaW9faXNfdmFsaWQobGNkLT5ncGlvX2JhY2tsaWdodF9v
bikpIHsKLQkJCWxjZC0+Z3Bpb19iYWNrbGlnaHRfY29udF9pbnZlcnRlZCA9IDE7Ci0JCQlncGlv
X2RpcmVjdGlvbl9vdXRwdXQobGNkLT5ncGlvX2JhY2tsaWdodF9jb250LCAxKTsKLQkJfSBlbHNl
IHsKLQkJCWxjZC0+Z3Bpb19iYWNrbGlnaHRfY29udF9pbnZlcnRlZCA9IDA7Ci0JCQlncGlvX2Rp
cmVjdGlvbl9vdXRwdXQobGNkLT5ncGlvX2JhY2tsaWdodF9jb250LCAwKTsKLQkJfQotCX0KKwls
Y2QtPmJhY2tsaWdodF9vbiA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlvbmFsKCZzcGktPmRldiwKKwkJ
CQkJCSAgICAiQkxfT04iLCBHUElPRF9PVVRfTE9XKTsKKwlpZiAoSVNfRVJSKGxjZC0+YmFja2xp
Z2h0X29uKSkKKwkJcmV0dXJuIFBUUl9FUlIobGNkLT5iYWNrbGlnaHRfb24pOworCisJbGNkLT5i
YWNrbGlnaHRfY29udCA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlvbmFsKCZzcGktPmRldiwgIkJMX0NP
TlQiLAorCQkJCQkJICAgICAgR1BJT0RfT1VUX0xPVyk7CisJaWYgKElTX0VSUihsY2QtPmJhY2ts
aWdodF9jb250KSkKKwkJcmV0dXJuIFBUUl9FUlIobGNkLT5iYWNrbGlnaHRfY29udCk7CisKIAly
ZXR1cm4gMDsKIH0KIApkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9zcGkvY29yZ2lfbGNkLmgg
Yi9pbmNsdWRlL2xpbnV4L3NwaS9jb3JnaV9sY2QuaAppbmRleCBlZGY0YmVjY2RhZGIuLjBiODU3
NjE2OTE5YyAxMDA2NDQKLS0tIGEvaW5jbHVkZS9saW51eC9zcGkvY29yZ2lfbGNkLmgKKysrIGIv
aW5jbHVkZS9saW51eC9zcGkvY29yZ2lfbGNkLmgKQEAgLTExLDkgKzExLDYgQEAgc3RydWN0IGNv
cmdpX2xjZF9wbGF0Zm9ybV9kYXRhIHsKIAlpbnQJZGVmYXVsdF9pbnRlbnNpdHk7CiAJaW50CWxp
bWl0X21hc2s7CiAKLQlpbnQJZ3Bpb19iYWNrbGlnaHRfb247CS8qIC0xIGlmIG4vYSAqLwotCWlu
dAlncGlvX2JhY2tsaWdodF9jb250OwkvKiAtMSBpZiBuL2EgKi8KLQogCXZvaWQgKCpub3RpZnkp
KGludCBpbnRlbnNpdHkpOwogCXZvaWQgKCpraWNrX2JhdHRlcnkpKHZvaWQpOwogfTsKLS0gCjIu
MjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJp
LWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
