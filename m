Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E38C857902
	for <lists+dri-devel@lfdr.de>; Thu, 27 Jun 2019 03:44:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 530F76E438;
	Thu, 27 Jun 2019 01:44:19 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd44.google.com (mail-io1-xd44.google.com
 [IPv6:2607:f8b0:4864:20::d44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3C9646E438
 for <dri-devel@lists.freedesktop.org>; Thu, 27 Jun 2019 01:44:18 +0000 (UTC)
Received: by mail-io1-xd44.google.com with SMTP id w25so1109996ioc.8
 for <dri-devel@lists.freedesktop.org>; Wed, 26 Jun 2019 18:44:18 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=IVLoUld7/lLKRDbgWpz0xiwtJpJGN7k4zpCN89qfViE=;
 b=Cb0qOtbA7osbG2loflG/JSIFmKrXaQK5GvL01f8ioI4UGIyThB+Sk+DUNRvr1FtAsr
 SDvf/qfi1D0gl0bqEsRfEIfuSuqHknt3YEquKBI0OEA33INMijbH4kBDzpOXNr5u6Qjj
 MuSgvel69N51ER+VNIsj/4wtgqD+Gv/tCbF0p4i2uX5Xb2RxpL5isE5xZrou0DiJm6Zl
 NeFR33oyHwZAsGRQ2RTqa7+wme25o8/m3xzF6NRwXi+V4iA02Pna7Cw2TLHl9HhA9XH9
 RYmR4clLlsfLwNWpZ5NznBV3kVuZw9lH+VT3gVKJ/FYC/KSaN5jXojJWUKfgW/dUVLmx
 5CMQ==
X-Gm-Message-State: APjAAAV0JdgbEw52qAeEbvx3HKPgMJTBOr3+S1+BcH9RVp5EDAZUaqqH
 +8EH3mTRVboaY3YM7O5e0T/To5sjBDUCaqw1fwU=
X-Google-Smtp-Source: APXvYqzeyk1++LiQqiw4mTL53VBEsVorrQfeS97UZJfC8Gtih+94j3yl/LbN13G78fr4/xzEelg44+lTDTyYJdx3tnw=
X-Received: by 2002:a5d:8e08:: with SMTP id e8mr1577465iod.139.1561599857443; 
 Wed, 26 Jun 2019 18:44:17 -0700 (PDT)
MIME-Version: 1.0
References: <20190620060726.926-1-kraxel@redhat.com>
 <20190620060726.926-10-kraxel@redhat.com>
In-Reply-To: <20190620060726.926-10-kraxel@redhat.com>
From: Chia-I Wu <olvaffe@gmail.com>
Date: Wed, 26 Jun 2019 18:44:06 -0700
Message-ID: <CAPaKu7R0uwZtpaFTNKytjcAqdy3qSqr=tiL+pYzF443ZMcghcA@mail.gmail.com>
Subject: Re: [PATCH v4 09/12] drm/virtio: rework virtio_gpu_object_create
 fencing
To: Gerd Hoffmann <kraxel@redhat.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=IVLoUld7/lLKRDbgWpz0xiwtJpJGN7k4zpCN89qfViE=;
 b=byaCzKT3UVddOch9VFfpQbxefGQOoI6Z9Axaqzm7YnqZhjK98Tp70vnm+wE6BndkP1
 poXW0TaHsRcTu2zhHnFXuo1H1/AyhtUhodfFc8CKHoSi05OmD/vHm5RLikKe1ju/zud7
 tz6+N3lcXwYoVVJntjMHWfaFpbIkxT1LBETSuJdxbv3P0hGRuJB1k2Z3tHsElCT753pf
 au1kOlJehQvXzJO2EBWOkGvYeJIcC4YXBx8hZD5wvhn+TWd4b+lYu4MsM6qlBrWcxwvH
 Rzu+Q/NsFfltFQsTM+XKVxwZeUQ0w6tf4gaIqsZQBOhogdHBycCZ5ISJF7vLDm+jzXio
 kU+A==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, open list <linux-kernel@vger.kernel.org>,
 ML dri-devel <dri-devel@lists.freedesktop.org>,
 "open list:VIRTIO GPU DRIVER" <virtualization@lists.linux-foundation.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBKdW4gMTksIDIwMTkgYXQgMTE6MDcgUE0gR2VyZCBIb2ZmbWFubiA8a3JheGVsQHJl
ZGhhdC5jb20+IHdyb3RlOgo+Cj4gVXNlIGdlbSByZXNlcnZhdGlvbiBoZWxwZXJzIGFuZCBkaXJl
Y3QgcmVzZXJ2YXRpb25fb2JqZWN0XyogY2FsbHMKPiBpbnN0ZWFkIG9mIHR0bS4KPgo+IHYzOiBE
dWUgdG8gdXNpbmcgdGhlIGdlbSByZXNlcnZhdGlvbiBvYmplY3QgaXQgaXMgaW5pdGlhbGl6ZWQg
YW5kIHJlYWR5Cj4gZm9yIHVzZSBiZWZvcmUgY2FsbGluZyB0dG1fYm9faW5pdCwgc28gd2UgY2Fu
IGFsc28gZHJvcCB0aGUgdHJpY2t5IGZlbmNlCj4gbG9naWMgd2hpY2ggY2hlY2tzIHdoZW5ldmVy
IHRoZSBjb21tYW5kIGlzIGluIGZsaWdodCBzdGlsbC4gIFdlIGNhbgo+IHNpbXBseSBmZW5jZSBv
dXIgb2JqZWN0IGJlZm9yZSBzdWJtaXR0aW5nIHRoZSB2aXJ0aW8gY29tbWFuZCBhbmQgYmUgZG9u
ZQo+IHdpdGggaXQuCj4KPiBTaWduZWQtb2ZmLWJ5OiBHZXJkIEhvZmZtYW5uIDxrcmF4ZWxAcmVk
aGF0LmNvbT4KPiBBY2tlZC1ieTogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBmZndsbC5j
aD4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oICAgIHwgIDYg
KystCj4gIGRyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9vYmplY3QuYyB8IDU0ICsrKysr
KysrKy0tLS0tLS0tLS0tLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X3Zx
LmMgICAgIHwgIDggKysrLQo+ICAzIGZpbGVzIGNoYW5nZWQsIDMwIGluc2VydGlvbnMoKyksIDM4
IGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmly
dGdwdV9kcnYuaCBiL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9kcnYuaAo+IGluZGV4
IDY1ZjVjZTQxYzM0MS4uNTIxM2Q3ZjQ5OWViIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS92aXJ0aW8vdmlydGdwdV9kcnYuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmly
dGdwdV9kcnYuaAo+IEBAIC0yNjcsNyArMjY3LDggQEAgdm9pZCB2aXJ0aW9fZ3B1X2ZyZWVfdmJ1
ZnMoc3RydWN0IHZpcnRpb19ncHVfZGV2aWNlICp2Z2Rldik7Cj4gIHZvaWQgdmlydGlvX2dwdV9j
bWRfY3JlYXRlX3Jlc291cmNlKHN0cnVjdCB2aXJ0aW9fZ3B1X2RldmljZSAqdmdkZXYsCj4gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRpb19ncHVfb2JqZWN0
ICpibywKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydGlv
X2dwdV9vYmplY3RfcGFyYW1zICpwYXJhbXMsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc3RydWN0IHZpcnRpb19ncHVfZmVuY2UgKmZlbmNlKTsKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9mZW5jZSAqZmVuY2UsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRpb19ncHVfb2Jq
ZWN0X2FycmF5ICpvYmpzKTsKTW92ZSBvYmpzIGJlZm9yZSBmZW5jZT8KPiAgdm9pZCB2aXJ0aW9f
Z3B1X2NtZF91bnJlZl9yZXNvdXJjZShzdHJ1Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2LAo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgcmVzb3VyY2VfaWQp
Owo+ICB2b2lkIHZpcnRpb19ncHVfY21kX3RyYW5zZmVyX3RvX2hvc3RfMmQoc3RydWN0IHZpcnRp
b19ncHVfZGV2aWNlICp2Z2RldiwKPiBAQCAtMzI4LDcgKzMyOSw4IEBAIHZvaWQKPiAgdmlydGlv
X2dwdV9jbWRfcmVzb3VyY2VfY3JlYXRlXzNkKHN0cnVjdCB2aXJ0aW9fZ3B1X2RldmljZSAqdmdk
ZXYsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1
X29iamVjdCAqYm8sCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2
aXJ0aW9fZ3B1X29iamVjdF9wYXJhbXMgKnBhcmFtcywKPiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc3RydWN0IHZpcnRpb19ncHVfZmVuY2UgKmZlbmNlKTsKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRpb19ncHVfZmVuY2UgKmZlbmNlLAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9vYmpl
Y3RfYXJyYXkgKm9ianMpOwo+ICB2b2lkIHZpcnRpb19ncHVfY3RybF9hY2soc3RydWN0IHZpcnRx
dWV1ZSAqdnEpOwo+ICB2b2lkIHZpcnRpb19ncHVfY3Vyc29yX2FjayhzdHJ1Y3QgdmlydHF1ZXVl
ICp2cSk7Cj4gIHZvaWQgdmlydGlvX2dwdV9mZW5jZV9hY2soc3RydWN0IHZpcnRxdWV1ZSAqdnEp
Owo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfb2JqZWN0LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfb2JqZWN0LmMKPiBpbmRleCA4MmJmYmY5
ODNmZDIuLjkwNjQyOTA3YWE1YyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlv
L3ZpcnRncHVfb2JqZWN0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVf
b2JqZWN0LmMKPiBAQCAtOTcsNiArOTcsNyBAQCBpbnQgdmlydGlvX2dwdV9vYmplY3RfY3JlYXRl
KHN0cnVjdCB2aXJ0aW9fZ3B1X2RldmljZSAqdmdkZXYsCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3QgKipib19wdHIsCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9mZW5jZSAqZmVuY2UpCj4gIHsKPiAr
ICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqb2JqcyA9IE5VTEw7Cj4gICAg
ICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3QgKmJvOwo+ICAgICAgICAgc2l6ZV90IGFjY19z
aXplOwo+ICAgICAgICAgaW50IHJldDsKPiBAQCAtMTIzLDEwICsxMjQsMjcgQEAgaW50IHZpcnRp
b19ncHVfb2JqZWN0X2NyZWF0ZShzdHJ1Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2LAo+ICAg
ICAgICAgfQo+ICAgICAgICAgYm8tPmR1bWIgPSBwYXJhbXMtPmR1bWI7Cj4KPiArICAgICAgIGlm
IChmZW5jZSkgewo+ICsgICAgICAgICAgICAgICBzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggdGlja2V0
Owo+ICsKPiArICAgICAgICAgICAgICAgb2JqcyA9IHZpcnRpb19ncHVfYXJyYXlfYWxsb2MoMSk7
Cj4gKyAgICAgICAgICAgICAgIG9ianMtPm9ianNbMF0gPSAmYm8tPmdlbV9iYXNlOwo+ICsgICAg
ICAgICAgICAgICBkcm1fZ2VtX29iamVjdF9nZXQob2Jqcy0+b2Jqc1swXSk7Cj4gKwo+ICsgICAg
ICAgICAgICAgICByZXQgPSBkcm1fZ2VtX2xvY2tfcmVzZXJ2YXRpb25zKG9ianMtPm9ianMsIG9i
anMtPm5lbnRzLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICZ0aWNrZXQpOwpXaXRoIG9ubHkgb25lIG9iamVjdCwgd2Ugc2hvdWxkIGJlIGFibGUgdG8g
ZG8gYSBxdWljawpyZXNlcnZhdGlvbl9vYmplY3RfbG9ja19pbnRlcnJ1cHRpYmxlLgo+ICsgICAg
ICAgICAgICAgICBpZiAocmV0ID09IDApCj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmVzZXJ2
YXRpb25fb2JqZWN0X2FkZF9leGNsX2ZlbmNlKG9ianMtPm9ianNbMF0tPnJlc3YsCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZmZW5j
ZS0+Zik7Cj4gKyAgICAgICAgICAgICAgIGRybV9nZW1fdW5sb2NrX3Jlc2VydmF0aW9ucyhvYmpz
LT5vYmpzLCBvYmpzLT5uZW50cywgJnRpY2tldCk7ClRoZXNlIG1heSBuZWVkIHRvIGJlIG1vdmVk
IHRvIGFmdGVyIHZpcnRpb19ncHVfY21kX3Jlc291cmNlX2NyZWF0ZV8zZC4KPiArICAgICAgIH0K
PiArCj4gICAgICAgICBpZiAocGFyYW1zLT52aXJnbCkgewo+IC0gICAgICAgICAgICAgICB2aXJ0
aW9fZ3B1X2NtZF9yZXNvdXJjZV9jcmVhdGVfM2QodmdkZXYsIGJvLCBwYXJhbXMsIGZlbmNlKTsK
PiArICAgICAgICAgICAgICAgdmlydGlvX2dwdV9jbWRfcmVzb3VyY2VfY3JlYXRlXzNkKHZnZGV2
LCBibywgcGFyYW1zLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZmVuY2UsIG9ianMpOwo+ICAgICAgICAgfSBlbHNlIHsKPiAtICAgICAgICAgICAg
ICAgdmlydGlvX2dwdV9jbWRfY3JlYXRlX3Jlc291cmNlKHZnZGV2LCBibywgcGFyYW1zLCBmZW5j
ZSk7Cj4gKyAgICAgICAgICAgICAgIHZpcnRpb19ncHVfY21kX2NyZWF0ZV9yZXNvdXJjZSh2Z2Rl
diwgYm8sIHBhcmFtcywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGZlbmNlLCBvYmpzKTsKPiAgICAgICAgIH0KPgo+ICAgICAgICAgdmlydGlvX2dwdV9p
bml0X3R0bV9wbGFjZW1lbnQoYm8pOwo+IEBAIC0xMzksMzggKzE1Nyw2IEBAIGludCB2aXJ0aW9f
Z3B1X29iamVjdF9jcmVhdGUoc3RydWN0IHZpcnRpb19ncHVfZGV2aWNlICp2Z2RldiwKPiAgICAg
ICAgIGlmIChyZXQgIT0gMCkKPiAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPgo+IC0gICAg
ICAgaWYgKGZlbmNlKSB7Cj4gLSAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X2ZlbmNl
X2RyaXZlciAqZHJ2ID0gJnZnZGV2LT5mZW5jZV9kcnY7Cj4gLSAgICAgICAgICAgICAgIHN0cnVj
dCBsaXN0X2hlYWQgdmFsaWRhdGVfbGlzdDsKPiAtICAgICAgICAgICAgICAgc3RydWN0IHR0bV92
YWxpZGF0ZV9idWZmZXIgbWFpbmJ1ZjsKPiAtICAgICAgICAgICAgICAgc3RydWN0IHd3X2FjcXVp
cmVfY3R4IHRpY2tldDsKPiAtICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBpcnFfZmxhZ3M7
Cj4gLSAgICAgICAgICAgICAgIGJvb2wgc2lnbmFsZWQ7Cj4gLQo+IC0gICAgICAgICAgICAgICBJ
TklUX0xJU1RfSEVBRCgmdmFsaWRhdGVfbGlzdCk7Cj4gLSAgICAgICAgICAgICAgIG1lbXNldCgm
bWFpbmJ1ZiwgMCwgc2l6ZW9mKHN0cnVjdCB0dG1fdmFsaWRhdGVfYnVmZmVyKSk7Cj4gLQo+IC0g
ICAgICAgICAgICAgICAvKiB1c2UgYSBnZW0gcmVmZXJlbmNlIHNpbmNlIHVucmVmIGxpc3QgdW5k
b2VzIHRoZW0gKi8KPiAtICAgICAgICAgICAgICAgZHJtX2dlbV9vYmplY3RfZ2V0KCZiby0+Z2Vt
X2Jhc2UpOwo+IC0gICAgICAgICAgICAgICBtYWluYnVmLmJvID0gJmJvLT50Ym87Cj4gLSAgICAg
ICAgICAgICAgIGxpc3RfYWRkKCZtYWluYnVmLmhlYWQsICZ2YWxpZGF0ZV9saXN0KTsKPiAtCj4g
LSAgICAgICAgICAgICAgIHJldCA9IHZpcnRpb19ncHVfb2JqZWN0X2xpc3RfdmFsaWRhdGUoJnRp
Y2tldCwgJnZhbGlkYXRlX2xpc3QpOwo+IC0gICAgICAgICAgICAgICBpZiAocmV0ID09IDApIHsK
PiAtICAgICAgICAgICAgICAgICAgICAgICBzcGluX2xvY2tfaXJxc2F2ZSgmZHJ2LT5sb2NrLCBp
cnFfZmxhZ3MpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbGVkID0gdmlydGlvX2Zl
bmNlX3NpZ25hbGVkKCZmZW5jZS0+Zik7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFz
aWduYWxlZCkKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHZpcnRpbyBjcmVh
dGUgY29tbWFuZCBzdGlsbCBpbiBmbGlnaHQgKi8KPiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHR0bV9ldV9mZW5jZV9idWZmZXJfb2JqZWN0cygmdGlja2V0LCAmdmFsaWRhdGVfbGlz
dCwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAmZmVuY2UtPmYpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIHNwaW5fdW5sb2Nr
X2lycXJlc3RvcmUoJmRydi0+bG9jaywgaXJxX2ZsYWdzKTsKPiAtICAgICAgICAgICAgICAgICAg
ICAgICBpZiAoc2lnbmFsZWQpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB2
aXJ0aW8gY3JlYXRlIGNvbW1hbmQgZmluaXNoZWQgKi8KPiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHR0bV9ldV9iYWNrb2ZmX3Jlc2VydmF0aW9uKCZ0aWNrZXQsICZ2YWxpZGF0ZV9s
aXN0KTsKPiAtICAgICAgICAgICAgICAgfQo+IC0gICAgICAgICAgICAgICB2aXJ0aW9fZ3B1X3Vu
cmVmX2xpc3QoJnZhbGlkYXRlX2xpc3QpOwo+IC0gICAgICAgfQo+IC0KPiAgICAgICAgICpib19w
dHIgPSBibzsKPiAgICAgICAgIHJldHVybiAwOwo+ICB9Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS92aXJ0aW8vdmlydGdwdV92cS5jIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0
Z3B1X3ZxLmMKPiBpbmRleCBkYzJjMmMwMDMyMDAuLjZlMmIyODdhN2U0YiAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfdnEuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS92aXJ0aW8vdmlydGdwdV92cS5jCj4gQEAgLTM5MSwxMyArMzkxLDE1IEBAIHN0YXRpYyBp
bnQgdmlydGlvX2dwdV9xdWV1ZV9jdXJzb3Ioc3RydWN0IHZpcnRpb19ncHVfZGV2aWNlICp2Z2Rl
diwKPiAgdm9pZCB2aXJ0aW9fZ3B1X2NtZF9jcmVhdGVfcmVzb3VyY2Uoc3RydWN0IHZpcnRpb19n
cHVfZGV2aWNlICp2Z2RldiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
dHJ1Y3QgdmlydGlvX2dwdV9vYmplY3QgKmJvLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9wYXJhbXMgKnBhcmFtcywKPiAtICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9mZW5jZSAq
ZmVuY2UpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRp
b19ncHVfZmVuY2UgKmZlbmNlLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqb2JqcykKPiAgewo+ICAgICAgICAgc3Ry
dWN0IHZpcnRpb19ncHVfcmVzb3VyY2VfY3JlYXRlXzJkICpjbWRfcDsKPiAgICAgICAgIHN0cnVj
dCB2aXJ0aW9fZ3B1X3ZidWZmZXIgKnZidWY7Cj4KPiAgICAgICAgIGNtZF9wID0gdmlydGlvX2dw
dV9hbGxvY19jbWQodmdkZXYsICZ2YnVmLCBzaXplb2YoKmNtZF9wKSk7Cj4gICAgICAgICBtZW1z
ZXQoY21kX3AsIDAsIHNpemVvZigqY21kX3ApKTsKPiArICAgICAgIHZidWYtPm9ianMgPSBvYmpz
Owo+Cj4gICAgICAgICBjbWRfcC0+aGRyLnR5cGUgPSBjcHVfdG9fbGUzMihWSVJUSU9fR1BVX0NN
RF9SRVNPVVJDRV9DUkVBVEVfMkQpOwo+ICAgICAgICAgY21kX3AtPnJlc291cmNlX2lkID0gY3B1
X3RvX2xlMzIoYm8tPmh3X3Jlc19oYW5kbGUpOwo+IEBAIC04NjQsMTMgKzg2NiwxNSBAQCB2b2lk
Cj4gIHZpcnRpb19ncHVfY21kX3Jlc291cmNlX2NyZWF0ZV8zZChzdHJ1Y3QgdmlydGlvX2dwdV9k
ZXZpY2UgKnZnZGV2LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qg
dmlydGlvX2dwdV9vYmplY3QgKmJvLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfcGFyYW1zICpwYXJhbXMsCj4gLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X2ZlbmNlICpmZW5jZSkKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRpb19ncHVfZmVuY2Ug
KmZlbmNlLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydGlv
X2dwdV9vYmplY3RfYXJyYXkgKm9ianMpCj4gIHsKPiAgICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1
X3Jlc291cmNlX2NyZWF0ZV8zZCAqY21kX3A7Cj4gICAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV92
YnVmZmVyICp2YnVmOwo+Cj4gICAgICAgICBjbWRfcCA9IHZpcnRpb19ncHVfYWxsb2NfY21kKHZn
ZGV2LCAmdmJ1Ziwgc2l6ZW9mKCpjbWRfcCkpOwo+ICAgICAgICAgbWVtc2V0KGNtZF9wLCAwLCBz
aXplb2YoKmNtZF9wKSk7Cj4gKyAgICAgICB2YnVmLT5vYmpzID0gb2JqczsKPgo+ICAgICAgICAg
Y21kX3AtPmhkci50eXBlID0gY3B1X3RvX2xlMzIoVklSVElPX0dQVV9DTURfUkVTT1VSQ0VfQ1JF
QVRFXzNEKTsKPiAgICAgICAgIGNtZF9wLT5yZXNvdXJjZV9pZCA9IGNwdV90b19sZTMyKGJvLT5o
d19yZXNfaGFuZGxlKTsKPiAtLQo+IDIuMTguMQo+Cj4gX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KPiBkcmktZGV2ZWwgbWFpbGluZyBsaXN0Cj4gZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2RyaS1kZXZlbA==
