Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D8628119767
	for <lists+dri-devel@lfdr.de>; Tue, 10 Dec 2019 22:33:11 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F2B0F6E995;
	Tue, 10 Dec 2019 21:33:09 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CE6A26E995
 for <dri-devel@lists.freedesktop.org>; Tue, 10 Dec 2019 21:33:08 +0000 (UTC)
Received: from sasha-vm.mshome.net (c-73-47-72-35.hsd1.nh.comcast.net
 [73.47.72.35])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 99D13207FF;
 Tue, 10 Dec 2019 21:33:07 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=default; t=1576013588;
 bh=LBS17/9OocU4+KcWh4j4E05YvgO5fkf8tH6AOnJN0sA=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=kdaFhWem2i2zlkycAPk+Ji+ZFZ5nJs4qwTRGLDQqypT+9vMuu1LpHDI7STncvRX6R
 Ws45bXDzlRjXQ4xGpduCD3ZwnbsSpCqxRIg5HCICaWnLXMxv8tksgoGMcKWWpOXHW9
 plg8ElWU8yZWkmulUk4Bmg9DXPi1AI7D8j6aZH3k=
From: Sasha Levin <sashal@kernel.org>
To: linux-kernel@vger.kernel.org,
	stable@vger.kernel.org
Subject: [PATCH AUTOSEL 4.19 039/177] drm/drm_vblank: Change EINVAL by the
 correct errno
Date: Tue, 10 Dec 2019 16:30:03 -0500
Message-Id: <20191210213221.11921-39-sashal@kernel.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191210213221.11921-1-sashal@kernel.org>
References: <20191210213221.11921-1-sashal@kernel.org>
MIME-Version: 1.0
X-stable: review
X-Patchwork-Hint: Ignore
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Sasha Levin <sashal@kernel.org>, Keith Packard <keithp@keithp.com>,
 Pekka Paalanen <pekka.paalanen@collabora.com>,
 Rodrigo Siqueira <rodrigosiqueiramelo@gmail.com>,
 dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9kcmlnbyBTaXF1ZWlyYSA8cm9kcmlnb3NpcXVlaXJhbWVsb0BnbWFpbC5jb20+Cgpb
IFVwc3RyZWFtIGNvbW1pdCBhZWQ2MTA1YjI4YjEwNjEzZjE2YzBiZmU5NzUyNWZlNWEyMzMzOGRm
IF0KCkZvciBoaXN0b3JpY2FsIHJlYXNvbnMsIHRoZSBmdW5jdGlvbiBkcm1fd2FpdF92Ymxhbmtf
aW9jdGwgYWx3YXlzIHJldHVybgotRUlOVkFMIGlmIHNvbWV0aGluZyBnZXRzIHdyb25nLiBUaGlz
IHNjZW5hcmlvIGxpbWl0cyB0aGUgZmxleGliaWxpdHkKZm9yIHRoZSB1c2Vyc3BhY2UgdG8gbWFr
ZSBkZXRhaWxlZCB2ZXJpZmljYXRpb24gb2YgYW55IHByb2JsZW0gYW5kIHRha2UKc29tZSBhY3Rp
b24uIEluIHBhcnRpY3VsYXIsIHRoZSB2YWxpZGF0aW9uIG9mIOKAnGlmICghZGV2LT5pcnFfZW5h
YmxlZCnigJ0KaW4gdGhlIGRybV93YWl0X3ZibGFua19pb2N0bCBpcyByZXNwb25zaWJsZSBmb3Ig
Y2hlY2tpbmcgaWYgdGhlIGRyaXZlcgpzdXBwb3J0IHZibGFuayBvciBub3QuIElmIHRoZSBkcml2
ZXIgZG9lcyBub3Qgc3VwcG9ydCBWQmxhbmssIHRoZQpmdW5jdGlvbiBkcm1fd2FpdF92Ymxhbmtf
aW9jdGwgcmV0dXJucyBFSU5WQUwsIHdoaWNoIGRvZXMgbm90IHJlcHJlc2VudAp0aGUgcmVhbCBp
c3N1ZTsgdGhpcyBwYXRjaCBjaGFuZ2VzIHRoaXMgYmVoYXZpb3IgYnkgcmV0dXJuIEVPUE5PVFNV
UFAuCkFkZGl0aW9uYWxseSwgZHJtX2NydGNfZ2V0X3NlcXVlbmNlX2lvY3RsIGFuZApkcm1fY3J0
Y19xdWV1ZV9zZXF1ZW5jZV9pb2N0bCwgYWxzbyByZXR1cm5zIEVJTlZBTCBpZiB2YmxhbmsgaXMg
bm90CnN1cHBvcnRlZDsgdGhpcyBwYXRjaCBhbHNvIGNoYW5nZXMgdGhlIHJldHVybiB2YWx1ZSB0
byBFT1BOT1RTVVBQIGluCnRoZXNlIGZ1bmN0aW9ucy4gTGFzdGx5LCB0aGVzZSBmdW5jdGlvbnMg
YXJlIGludm9rZWQgYnkgbGliZHJtLCB3aGljaCBpcwp1c2VkIGJ5IG1hbnkgY29tcG9zaXRvcnM7
IGJlY2F1c2Ugb2YgdGhpcywgaXQgaXMgaW1wb3J0YW50IHRvIGNoZWNrIGlmCnRoaXMgY2hhbmdl
IGJyZWFrcyBhbnkgY29tcG9zaXRvci4gSW4gdGhpcyBzZW5zZSwgdGhlIGZvbGxvd2luZyBwcm9q
ZWN0cwp3ZXJlIGV4YW1pbmVkOgoKKiBEcm0taHdjb21wb3NlcgoqIEt3aW4KKiBTd2F5CiogV2xy
b290cwoqIFdheWxhbmQKKiBXZXN0b24KKiBNdXR0ZXIKKiBYb3JnICg2NyBkaWZmZXJlbnQgZHJp
dmVycykKCkZvciBlYWNoIHJlcG9zaXRvcnkgdGhlIHZlcmlmaWNhdGlvbiBoYXBwZW5lZCBpbiB0
aHJlZSBzdGVwczoKCiogVXBkYXRlIHRoZSBtYWluIGJyYW5jaAoqIExvb2sgZm9yIGFueSBvY2N1
cnJlbmNlIG9mICJkcm1DcnRjUXVldWVTZXF1ZW5jZSIsCiAgImRybUNydGNHZXRTZXF1ZW5jZSIs
IGFuZCAiZHJtV2FpdFZCbGFuayIgd2l0aCB0aGUgY29tbWFuZCBnaXQgZ3JlcCAtbgogICJTVFJJ
TkciLgoqIExvb2sgaW4gdGhlIGdpdCBoaXN0b3J5IG9mIHRoZSBwcm9qZWN0IHdpdGggdGhlIGNv
bW1hbmQKZ2l0IGxvZyAtUzxTVFJJTkc+CgpOb25lIG9mIHRoZSBhYm92ZSBwcm9qZWN0cyB2YWxp
ZGF0ZSB0aGUgdXNlIG9mIEVJTlZBTCB3aGVuIHVzaW5nCmRybVdhaXRWQmxhbmsoKSwgd2hpY2gg
bWFrZSBzYWZlLCBhdCBsZWFzdCBmb3IgdGhlc2UgcHJvamVjdHMsIHRvIGNoYW5nZQp0aGUgcmV0
dXJuIHZhbHVlcy4gT24gdGhlIG90aGVyIGhhbmQsIG1lc2EgYW5kIHhzZXJ2ZXIgcHJvamVjdCB1
c2VzCmRybUNydGNRdWV1ZVNlcXVlbmNlKCkgYW5kIGRybUNydGNHZXRTZXF1ZW5jZSgpOyB0aGlz
IGNoYW5nZSBpcyBoYXJtbGVzcwpmb3IgYm90aCBwcm9qZWN0cy4KCkNoYW5nZSBzaW5jZSBWNSAo
UGVra2EgUGFhbGFuZW4pOgogLSBDaGVjayBpZiB0aGUgY2hhbmdlIGFsc28gYWZmZWN0cyBNdXR0
ZXIKCkNoYW5nZSBzaW5jZSBWNCAoRGFuaWVsKToKIC0gQWxzbyByZXR1cm4gRU9QTk9UU1VQUCBp
biBkcm1fY3J0Y19bZ2V0fHF1ZXVlXV9zZXF1ZW5jZV9pb2N0bAoKQ2hhbmdlIHNpbmNlIFYzOgog
LSBSZXR1cm4gRUlOVkFMIGZvciBfRFJNX1ZCTEFOS19TSUdOQUwgKERhbmllbCkKCkNoYW5nZSBz
aW5jZSBWMjoKIERhbmllbCBWZXR0ZXIgYW5kIENocmlzIFdpbHNvbgogLSBSZXBsYWNlIEVOT1RU
WSBieSBFT1BOT1RTVVBQCiAtIFJldHVybiBFSU5WQUwgaWYgdGhlIHBhcmFtZXRlcnMgYXJlIHdy
b25nCgpDYzogS2VpdGggUGFja2FyZCA8a2VpdGhwQGtlaXRocC5jb20+CkNjOiBNYWFydGVuIExh
bmtob3JzdCA8bWFhcnRlbi5sYW5raG9yc3RAbGludXguaW50ZWwuY29tPgpDYzogVmlsbGUgU3ly
asOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KQ2M6IENocmlzIFdpbHNvbiA8
Y2hyaXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xs
LmNoPgpDYzogUGVra2EgUGFhbGFuZW4gPHBla2thLnBhYWxhbmVuQGNvbGxhYm9yYS5jb20+ClNp
Z25lZC1vZmYtYnk6IFJvZHJpZ28gU2lxdWVpcmEgPHJvZHJpZ29zaXF1ZWlyYW1lbG9AZ21haWwu
Y29tPgpSZXZpZXdlZC1ieTogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xsLmNoPgpBY2tlZC1i
eTogUGVra2EgUGFhbGFuZW4gPHBla2thLnBhYWxhbmVuQGNvbGxhYm9yYS5jb20+Ckxpbms6IGh0
dHBzOi8vcGF0Y2h3b3JrLmZyZWVkZXNrdG9wLm9yZy9wYXRjaC9tc2dpZC8yMDE5MTAwMjE0MDUx
Ni5hZGV5ajNodHlsaW1tbG1nQHNtdHAuZ21haWwuY29tClNpZ25lZC1vZmYtYnk6IFNhc2hhIExl
dmluIDxzYXNoYWxAa2VybmVsLm9yZz4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX3ZibGFuay5j
IHwgNiArKystLS0KIDEgZmlsZSBjaGFuZ2VkLCAzIGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV92YmxhbmsuYyBiL2RyaXZlcnMv
Z3B1L2RybS9kcm1fdmJsYW5rLmMKaW5kZXggZDE4NTliY2M3Y2NiYy4uMzNhNzJhODQzNjFlZiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV92YmxhbmsuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vZHJtX3ZibGFuay5jCkBAIC0xNTcyLDcgKzE1NzIsNyBAQCBpbnQgZHJtX3dhaXRfdmJs
YW5rX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJdW5zaWduZWQg
aW50IGZsYWdzLCBwaXBlLCBoaWdoX3BpcGU7CiAKIAlpZiAoIWRldi0+aXJxX2VuYWJsZWQpCi0J
CXJldHVybiAtRUlOVkFMOworCQlyZXR1cm4gLUVPUE5PVFNVUFA7CiAKIAlpZiAodmJsd2FpdC0+
cmVxdWVzdC50eXBlICYgX0RSTV9WQkxBTktfU0lHTkFMKQogCQlyZXR1cm4gLUVJTlZBTDsKQEAg
LTE4MTMsNyArMTgxMyw3IEBAIGludCBkcm1fY3J0Y19nZXRfc2VxdWVuY2VfaW9jdGwoc3RydWN0
IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKIAkJcmV0dXJuIC1FSU5WQUw7CiAKIAlpZiAo
IWRldi0+aXJxX2VuYWJsZWQpCi0JCXJldHVybiAtRUlOVkFMOworCQlyZXR1cm4gLUVPUE5PVFNV
UFA7CiAKIAljcnRjID0gZHJtX2NydGNfZmluZChkZXYsIGZpbGVfcHJpdiwgZ2V0X3NlcS0+Y3J0
Y19pZCk7CiAJaWYgKCFjcnRjKQpAQCAtMTg3MSw3ICsxODcxLDcgQEAgaW50IGRybV9jcnRjX3F1
ZXVlX3NlcXVlbmNlX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJ
CXJldHVybiAtRUlOVkFMOwogCiAJaWYgKCFkZXYtPmlycV9lbmFibGVkKQotCQlyZXR1cm4gLUVJ
TlZBTDsKKwkJcmV0dXJuIC1FT1BOT1RTVVBQOwogCiAJY3J0YyA9IGRybV9jcnRjX2ZpbmQoZGV2
LCBmaWxlX3ByaXYsIHF1ZXVlX3NlcS0+Y3J0Y19pZCk7CiAJaWYgKCFjcnRjKQotLSAKMi4yMC4x
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2
ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
