Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 23F0B41EDC
	for <lists+dri-devel@lfdr.de>; Wed, 12 Jun 2019 10:17:55 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D6EA08941E;
	Wed, 12 Jun 2019 08:17:52 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4112C8941E
 for <dri-devel@lists.freedesktop.org>; Wed, 12 Jun 2019 08:17:51 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx06.intmail.prod.int.phx2.redhat.com
 [10.5.11.16])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id C4A2C8831F;
 Wed, 12 Jun 2019 08:17:45 +0000 (UTC)
Received: from sirius.home.kraxel.org (ovpn-117-25.ams2.redhat.com
 [10.36.117.25])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 6AC04513EC;
 Wed, 12 Jun 2019 08:17:43 +0000 (UTC)
Received: by sirius.home.kraxel.org (Postfix, from userid 1000)
 id A005216E08; Wed, 12 Jun 2019 10:17:39 +0200 (CEST)
Date: Wed, 12 Jun 2019 10:17:39 +0200
From: Gerd Hoffmann <kraxel@redhat.com>
To: Thomas Zimmermann <tzimmermann@suse.de>
Subject: Re: [PATCH v2 7/9] drm/mgag200: Rewrite cursor handling
Message-ID: <20190612081739.2ns33jpo3c43ht3p@sirius.home.kraxel.org>
References: <20190611130344.18988-1-tzimmermann@suse.de>
 <20190611130344.18988-8-tzimmermann@suse.de>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190611130344.18988-8-tzimmermann@suse.de>
User-Agent: NeoMutt/20180716
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.16
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.28]); Wed, 12 Jun 2019 08:17:50 +0000 (UTC)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: maxime.ripard@bootlin.com, sam@ravnborg.org,
 dri-devel@lists.freedesktop.org, airlied@redhat.com, sean@poorly.run
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBKdW4gMTEsIDIwMTkgYXQgMDM6MDM6NDJQTSArMDIwMCwgVGhvbWFzIFppbW1lcm1h
bm4gd3JvdGU6Cj4gVGhlIGN1cnNvciBoYW5kbGluZyBpbiBtZ2FnMjAwIGlzIGNvbXBsaWNhdGVk
IHRvIHVuZGVyc3RhbmQuIEl0IHRvdWNoZXMgYQo+IG51bWJlciBvZiBkaWZmZXJlbnQgQk9zLCBi
dXQgZG9lc24ndCByZWFsbHkgdXNlIGFsbCBvZiB0aGVtLgo+IAo+IFJld3JpdGluZyB0aGUgY3Vy
c29yIHVwZGF0ZSByZWR1Y2VzIHRoZSBhbW91bnQgb2YgY3Vyc29yIHN0YXRlLiBUaGVyZSBhcmUK
PiB0d28gQk9zIGZvciBkb3VibGUtYnVmZmVyZWQgSFcgdXBkYXRlcy4gVGhlIHNvdXJjZSBCTyB1
cGRhdGVzIHRoZSBvbmUgdGhhdAo+IGlzIGN1cnJlbnRseSBub3QgZGlzcGxheWVkIGFuZCB0aGVu
IHN3aXRjaGVzIGJ1ZmZlcnMuIEV4cGxpY2l0IEJPIGxvY2tpbmcKPiBoYXMgYmVlbiByZW1vdmVk
IGZyb20gdGhlIGNvZGUuIEJPcyBhcmUgc2ltcGx5IHBpbm5lZCBhbmQgdW5waW5uZWQgaW4gdmlk
ZW8KPiBSQU0uCj4gCj4gU2lnbmVkLW9mZi1ieTogVGhvbWFzIFppbW1lcm1hbm4gPHR6aW1tZXJt
YW5uQHN1c2UuZGU+Cj4gQWNrZWQtYnk6IEdlcmQgSG9mZm1hbm4gPGtyYXhlbEByZWRoYXQuY29t
Pgo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX2N1cnNvci5jIHwgMTY1
ICsrKysrKysrKystLS0tLS0tLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL21nYWcy
MDBfZHJ2LmggICAgfCAgIDMgLQo+ICBkcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX21h
aW4uYyAgIHwgICA0ICstCj4gIDMgZmlsZXMgY2hhbmdlZCwgNjkgaW5zZXJ0aW9ucygrKSwgMTAz
IGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9t
Z2FnMjAwX2N1cnNvci5jIGIvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9jdXJzb3Iu
Ywo+IGluZGV4IGRlOTRhNjUwMDc3Yi4uNWEyMmVmODI1NTg4IDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9tZ2FnMjAwL21nYWcyMDBfY3Vyc29yLmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vbWdhZzIwMC9tZ2FnMjAwX2N1cnNvci5jCj4gQEAgLTE5LDEwICsxOSw5IEBAIHN0YXRpYyB2
b2lkIG1nYV9oaWRlX2N1cnNvcihzdHJ1Y3QgbWdhX2RldmljZSAqbWRldikKPiAgewo+ICAJV1JF
RzgoTUdBX0NVUlBPU1hMLCAwKTsKPiAgCVdSRUc4KE1HQV9DVVJQT1NYSCwgMCk7Cj4gLQlpZiAo
bWRldi0+Y3Vyc29yLnBpeGVsc18xLT5waW5fY291bnQpCj4gLQkJZHJtX2dlbV92cmFtX3VucGlu
X2xvY2tlZChtZGV2LT5jdXJzb3IucGl4ZWxzXzEpOwo+IC0JaWYgKG1kZXYtPmN1cnNvci5waXhl
bHNfMi0+cGluX2NvdW50KQo+IC0JCWRybV9nZW1fdnJhbV91bnBpbl9sb2NrZWQobWRldi0+Y3Vy
c29yLnBpeGVsc18yKTsKPiArCWlmIChtZGV2LT5jdXJzb3IucGl4ZWxzX2N1cnJlbnQpCj4gKwkJ
ZHJtX2dlbV92cmFtX3VucGluKG1kZXYtPmN1cnNvci5waXhlbHNfY3VycmVudCk7Cj4gKwltZGV2
LT5jdXJzb3IucGl4ZWxzX2N1cnJlbnQgPSBOVUxMOwo+ICB9Cj4gIAo+ICBpbnQgbWdhX2NydGNf
Y3Vyc29yX3NldChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4gQEAgLTM2LDcgKzM1LDcgQEAgaW50
IG1nYV9jcnRjX2N1cnNvcl9zZXQoc3RydWN0IGRybV9jcnRjICpjcnRjLAo+ICAJc3RydWN0IGRy
bV9nZW1fdnJhbV9vYmplY3QgKnBpeGVsc18xID0gbWRldi0+Y3Vyc29yLnBpeGVsc18xOwo+ICAJ
c3RydWN0IGRybV9nZW1fdnJhbV9vYmplY3QgKnBpeGVsc18yID0gbWRldi0+Y3Vyc29yLnBpeGVs
c18yOwo+ICAJc3RydWN0IGRybV9nZW1fdnJhbV9vYmplY3QgKnBpeGVsc19jdXJyZW50ID0gbWRl
di0+Y3Vyc29yLnBpeGVsc19jdXJyZW50Owo+IC0Jc3RydWN0IGRybV9nZW1fdnJhbV9vYmplY3Qg
KnBpeGVsc19wcmV2ID0gbWRldi0+Y3Vyc29yLnBpeGVsc19wcmV2Owo+ICsJc3RydWN0IGRybV9n
ZW1fdnJhbV9vYmplY3QgKnBpeGVsc19uZXh0Owo+ICAJc3RydWN0IGRybV9nZW1fb2JqZWN0ICpv
Ymo7Cj4gIAlzdHJ1Y3QgZHJtX2dlbV92cmFtX29iamVjdCAqZ2JvID0gTlVMTDsKPiAgCWludCBy
ZXQgPSAwOwo+IEBAIC00OSw2ICs0OCw3IEBAIGludCBtZ2FfY3J0Y19jdXJzb3Jfc2V0KHN0cnVj
dCBkcm1fY3J0YyAqY3J0YywKPiAgCWJvb2wgZm91bmQgPSBmYWxzZTsKPiAgCWludCBjb2xvdXJf
Y291bnQgPSAwOwo+ICAJczY0IGdwdV9hZGRyOwo+ICsJdTY0IGRzdF9ncHU7Cj4gIAl1OCByZWdf
aW5kZXg7Cj4gIAl1OCB0aGlzX3Jvd1s0OF07Cj4gIAo+IEBAIC01OCw4MCArNTgsNjYgQEAgaW50
IG1nYV9jcnRjX2N1cnNvcl9zZXQoc3RydWN0IGRybV9jcnRjICpjcnRjLAo+ICAJCXJldHVybiAt
RU5PVFNVUFA7IC8qIERpZG4ndCBhbGxvY2F0ZSBzcGFjZSBmb3IgY3Vyc29ycyAqLwo+ICAJfQo+
ICAKPiAtCWlmICgod2lkdGggIT0gNjQgfHwgaGVpZ2h0ICE9IDY0KSAmJiBoYW5kbGUpIHsKPiAt
CQlXUkVHOChNR0FfQ1VSUE9TWEwsIDApOwo+IC0JCVdSRUc4KE1HQV9DVVJQT1NYSCwgMCk7Cj4g
LQkJcmV0dXJuIC1FSU5WQUw7Cj4gKwlpZiAoV0FSTl9PTihwaXhlbHNfY3VycmVudCAmJgo+ICsJ
CSAgICBwaXhlbHNfMSAhPSBwaXhlbHNfY3VycmVudCAmJgo+ICsJCSAgICBwaXhlbHNfMiAhPSBw
aXhlbHNfY3VycmVudCkpIHsKPiArCQlyZXR1cm4gLUVOT1RTVVBQOyAvKiBpbmNvbnNpc3RlbnQg
c3RhdGUgKi8KPiAgCX0KPiAgCj4gLQlCVUdfT04ocGl4ZWxzXzEgIT0gcGl4ZWxzX2N1cnJlbnQg
JiYgcGl4ZWxzXzEgIT0gcGl4ZWxzX3ByZXYpOwo+IC0JQlVHX09OKHBpeGVsc18yICE9IHBpeGVs
c19jdXJyZW50ICYmIHBpeGVsc18yICE9IHBpeGVsc19wcmV2KTsKPiAtCUJVR19PTihwaXhlbHNf
Y3VycmVudCA9PSBwaXhlbHNfcHJldik7Cj4gLQo+ICAJaWYgKCFoYW5kbGUgfHwgIWZpbGVfcHJp
dikgewo+ICAJCW1nYV9oaWRlX2N1cnNvcihtZGV2KTsKPiAgCQlyZXR1cm4gMDsKPiAgCX0KPiAg
Cj4gLQlvYmogPSBkcm1fZ2VtX29iamVjdF9sb29rdXAoZmlsZV9wcml2LCBoYW5kbGUpOwo+IC0J
aWYgKCFvYmopCj4gLQkJcmV0dXJuIC1FTk9FTlQ7Cj4gLQo+IC0JcmV0ID0gZHJtX2dlbV92cmFt
X2xvY2socGl4ZWxzXzEsIHRydWUpOwo+IC0JaWYgKHJldCkgewo+ICsJaWYgKHdpZHRoICE9IDY0
IHx8IGhlaWdodCAhPSA2NCkgewo+ICAJCVdSRUc4KE1HQV9DVVJQT1NYTCwgMCk7Cj4gIAkJV1JF
RzgoTUdBX0NVUlBPU1hILCAwKTsKPiAtCQlnb3RvIG91dF91bnJlZjsKPiAtCX0KPiAtCXJldCA9
IGRybV9nZW1fdnJhbV9sb2NrKHBpeGVsc18yLCB0cnVlKTsKPiAtCWlmIChyZXQpIHsKPiAtCQlX
UkVHOChNR0FfQ1VSUE9TWEwsIDApOwo+IC0JCVdSRUc4KE1HQV9DVVJQT1NYSCwgMCk7Cj4gLQkJ
ZHJtX2dlbV92cmFtX3VubG9jayhwaXhlbHNfMSk7Cj4gLQkJZ290byBvdXRfdW5sb2NrMTsKPiAr
CQlyZXR1cm4gLUVJTlZBTDsKPiAgCX0KPiAgCj4gLQkvKiBNb3ZlIGN1cnNvciBidWZmZXJzIGlu
dG8gVlJBTSBpZiB0aGV5IGFyZW4ndCBhbHJlYWR5ICovCj4gLQlpZiAoIXBpeGVsc18xLT5waW5f
Y291bnQpIHsKPiAtCQlyZXQgPSBkcm1fZ2VtX3ZyYW1fcGluX2xvY2tlZChwaXhlbHNfMSwKPiAt
CQkJCQkgICAgICBEUk1fR0VNX1ZSQU1fUExfRkxBR19WUkFNKTsKPiAtCQlpZiAocmV0KQo+IC0J
CQlnb3RvIG91dDE7Cj4gLQkJZ3B1X2FkZHIgPSBkcm1fZ2VtX3ZyYW1fb2Zmc2V0KHBpeGVsc18x
KTsKPiAtCQlpZiAoZ3B1X2FkZHIgPCAwKSB7Cj4gLQkJCWRybV9nZW1fdnJhbV91bnBpbl9sb2Nr
ZWQocGl4ZWxzXzEpOwo+IC0JCQlnb3RvIG91dDE7Cj4gLQkJfQo+IC0JCW1kZXYtPmN1cnNvci5w
aXhlbHNfMV9ncHVfYWRkciA9IGdwdV9hZGRyOwo+IC0JfQo+IC0JaWYgKCFwaXhlbHNfMi0+cGlu
X2NvdW50KSB7Cj4gLQkJcmV0ID0gZHJtX2dlbV92cmFtX3Bpbl9sb2NrZWQocGl4ZWxzXzIsCj4g
LQkJCQkJICAgICAgRFJNX0dFTV9WUkFNX1BMX0ZMQUdfVlJBTSk7Cj4gLQkJaWYgKHJldCkgewo+
IC0JCQlkcm1fZ2VtX3ZyYW1fdW5waW5fbG9ja2VkKHBpeGVsc18xKTsKPiAtCQkJZ290byBvdXQx
Owo+IC0JCX0KPiAtCQlncHVfYWRkciA9IGRybV9nZW1fdnJhbV9vZmZzZXQocGl4ZWxzXzIpOwo+
IC0JCWlmIChncHVfYWRkciA8IDApIHsKPiAtCQkJZHJtX2dlbV92cmFtX3VucGluX2xvY2tlZChw
aXhlbHNfMSk7Cj4gLQkJCWRybV9nZW1fdnJhbV91bnBpbl9sb2NrZWQocGl4ZWxzXzIpOwo+IC0J
CQlnb3RvIG91dDE7Cj4gLQkJfQo+IC0JCW1kZXYtPmN1cnNvci5waXhlbHNfMl9ncHVfYWRkciA9
IGdwdV9hZGRyOwo+IC0JfQo+ICsJaWYgKHBpeGVsc19jdXJyZW50ID09IHBpeGVsc18xKQo+ICsJ
CXBpeGVsc19uZXh0ID0gcGl4ZWxzXzI7Cj4gKwllbHNlCj4gKwkJcGl4ZWxzX25leHQgPSBwaXhl
bHNfMTsKPiAgCj4gKwlvYmogPSBkcm1fZ2VtX29iamVjdF9sb29rdXAoZmlsZV9wcml2LCBoYW5k
bGUpOwo+ICsJaWYgKCFvYmopCj4gKwkJcmV0dXJuIC1FTk9FTlQ7Cj4gIAlnYm8gPSBkcm1fZ2Vt
X3ZyYW1fb2ZfZ2VtKG9iaik7Cj4gLQlyZXQgPSBkcm1fZ2VtX3ZyYW1fbG9jayhnYm8sIHRydWUp
Owo+ICsJcmV0ID0gZHJtX2dlbV92cmFtX3BpbihnYm8sIERSTV9HRU1fVlJBTV9QTF9GTEFHX1NZ
U1RFTSk7CgpwbF9mbGFnID0gMCBzaG91bGQgYmUgZmluZSBoZXJlIHRvby4KCmNoZWVycywKICBH
ZXJkCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmkt
ZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
