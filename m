Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5D2D468093
	for <lists+dri-devel@lfdr.de>; Sun, 14 Jul 2019 19:58:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D331F89870;
	Sun, 14 Jul 2019 17:58:54 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga12.intel.com (mga12.intel.com [192.55.52.136])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 68E3989870;
 Sun, 14 Jul 2019 17:58:54 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by fmsmga106.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 14 Jul 2019 10:58:53 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,491,1557212400"; d="scan'208";a="190346517"
Received: from ramaling-i9x.iind.intel.com ([10.99.66.154])
 by fmsmga004.fm.intel.com with ESMTP; 14 Jul 2019 10:58:51 -0700
From: Ramalingam C <ramalingam.c@intel.com>
To: intel-gfx <intel-gfx@lists.freedesktop.org>,
 dri-devel <dri-devel@lists.freedesktop.org>
Subject: [PATCH v11 1/6] drm: Add Content protection type property
Date: Sun, 14 Jul 2019 16:30:08 +0530
Message-Id: <20190714110008.19647-1-ramalingam.c@intel.com>
X-Mailer: git-send-email 2.19.1
In-Reply-To: <20190712070026.13088-2-ramalingam.c@intel.com>
References: <20190712070026.13088-2-ramalingam.c@intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBhZGRzIGEgRFJNIEVOVU0gcHJvcGVydHkgdG8gdGhlIHNlbGVjdGVkIGNvbm5l
Y3RvcnMuClRoaXMgcHJvcGVydHkgaXMgdXNlZCBmb3IgbWVudGlvbmluZyB0aGUgcHJvdGVjdGVk
IGNvbnRlbnQncyB0eXBlCmZyb20gdXNlcnNwYWNlIHRvIGtlcm5lbCBIRENQIGF1dGhlbnRpY2F0
aW9uLgoKVHlwZSBvZiB0aGUgc3RyZWFtIGlzIGRlY2lkZWQgYnkgdGhlIHByb3RlY3RlZCBjb250
ZW50IHByb3ZpZGVycy4KVHlwZSAwIGNvbnRlbnQgY2FuIGJlIHJlbmRlcmVkIG9uIGFueSBIRENQ
IHByb3RlY3RlZCBkaXNwbGF5IHdpcmVzLgpCdXQgVHlwZSAxIGNvbnRlbnQgY2FuIGJlIHJlbmRl
cmVkIG9ubHkgb24gSERDUDIuMiBwcm90ZWN0ZWQgcGF0aHMuCgpTbyB3aGVuIGEgdXNlcnNwYWNl
IHNldHMgdGhpcyBwcm9wZXJ0eSB0byBUeXBlIDEgYW5kIHN0YXJ0cyB0aGUgSERDUAplbmFibGUs
IGtlcm5lbCB3aWxsIGhvbm91ciBpdCBvbmx5IGlmIEhEQ1AyLjIgYXV0aGVudGljYXRpb24gaXMg
dGhyb3VnaApmb3IgdHlwZSAxLiBFbHNlIEhEQ1AgZW5hYmxlIHdpbGwgYmUgZmFpbGVkLgoKTmVl
ZCBBQ0sgZm9yIHRoaXMgbmV3IGNvbmVuY3RvciBwcm9wZXJ0eSBmcm9tIHVzZXJzcGFjZSBjb25z
dW1lci4KCnYyOgogIGNwX2NvbnRlbnRfdHlwZSBpcyByZXBsYWNlZCB3aXRoIGNvbnRlbnRfcHJv
dGVjdGlvbl90eXBlIFtkYW5pZWxdCiAgY2hlY2sgYXQgYXRvbWljX3NldF9wcm9wZXJ0eSBpcyBy
ZW1vdmVkIFtNYWFydGVuXQp2MzoKICAlcy9jb250ZW50X3Byb3RlY3Rpb25fdHlwZS9oZGNwX2Nv
bnRlbnRfdHlwZSBbUGVra2FdCnY0OgogIHByb3BlcnR5IGlzIGNyZWF0ZWQgZm9yIHRoZSBmaXJz
dCByZXF1ZXN0ZWQgY29ubmVjdG9yIGFuZCB0aGVuIHJldXNlZC4KCVtEYW52ZXRdCnY1OgogIGtl
cm5lbCBkb2Mgbml0cyBhZGRyZXNzZWQgW0RhbmllbF0KICBSZWJhc2VkIGFzIHBhcnQgb2YgcGF0
Y2ggcmVvcmRlcmluZy4KdjY6CiAgS2VybmVsIGRvY3MgYXJlIG1vZGlmaWVkIFtwZWtrYV0Kdjc6
CiAgTW9yZSBkZXRhaWxzIGluIEtlcm5lbCBkb2NzLiBbcGVra2FdCnY4OgogIEZldyBtb3JlIGNs
YXJpZmljYXRpb24gaW50byBrZXJuZWwgZG9jIG9mIGNvbnRlbnQgdHlwZSBbcGVra2FdCnY5Ogog
IFNtYWxsIGZpeGVzIGluIGNvZGluZyBzdHlsZS4KClNpZ25lZC1vZmYtYnk6IFJhbWFsaW5nYW0g
QyA8cmFtYWxpbmdhbS5jQGludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IERhbmllbCBWZXR0ZXIgPGRh
bmllbC52ZXR0ZXJAZmZ3bGwuY2g+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfdWFw
aS5jICAgICAgICAgfCAgNCArKwogZHJpdmVycy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYyAgICAg
ICAgICAgfCA1MSArKysrKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL2RybV9o
ZGNwLmMgICAgICAgICAgICAgICAgfCAzNiArKysrKysrKysrKysrKystCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2hkY3AuYyB8ICA0ICstCiBpbmNsdWRlL2RybS9kcm1fY29u
bmVjdG9yLmggICAgICAgICAgICAgICB8ICA3ICsrKysKIGluY2x1ZGUvZHJtL2RybV9oZGNwLmgg
ICAgICAgICAgICAgICAgICAgIHwgIDIgKy0KIGluY2x1ZGUvZHJtL2RybV9tb2RlX2NvbmZpZy5o
ICAgICAgICAgICAgIHwgIDYgKysrCiBpbmNsdWRlL3VhcGkvZHJtL2RybV9tb2RlLmggICAgICAg
ICAgICAgICB8ICA0ICsrCiA4IGZpbGVzIGNoYW5nZWQsIDExMSBpbnNlcnRpb25zKCspLCAzIGRl
bGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX3VhcGku
YyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX3VhcGkuYwppbmRleCBhYmUzOGJkZjg1YWUu
LjE5YWUxMTlmMWE1ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfdWFw
aS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX3VhcGkuYwpAQCAtNzQ3LDYgKzc0
Nyw4IEBAIHN0YXRpYyBpbnQgZHJtX2F0b21pY19jb25uZWN0b3Jfc2V0X3Byb3BlcnR5KHN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCiAJCQlyZXR1cm4gLUVJTlZBTDsKIAkJfQogCQlz
dGF0ZS0+Y29udGVudF9wcm90ZWN0aW9uID0gdmFsOworCX0gZWxzZSBpZiAocHJvcGVydHkgPT0g
Y29uZmlnLT5oZGNwX2NvbnRlbnRfdHlwZV9wcm9wZXJ0eSkgeworCQlzdGF0ZS0+aGRjcF9jb250
ZW50X3R5cGUgPSB2YWw7CiAJfSBlbHNlIGlmIChwcm9wZXJ0eSA9PSBjb25uZWN0b3ItPmNvbG9y
c3BhY2VfcHJvcGVydHkpIHsKIAkJc3RhdGUtPmNvbG9yc3BhY2UgPSB2YWw7CiAJfSBlbHNlIGlm
IChwcm9wZXJ0eSA9PSBjb25maWctPndyaXRlYmFja19mYl9pZF9wcm9wZXJ0eSkgewpAQCAtODMx
LDYgKzgzMyw4IEBAIGRybV9hdG9taWNfY29ubmVjdG9yX2dldF9wcm9wZXJ0eShzdHJ1Y3QgZHJt
X2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQkJc3RhdGUtPmhkcl9vdXRwdXRfbWV0YWRhdGEtPmJh
c2UuaWQgOiAwOwogCX0gZWxzZSBpZiAocHJvcGVydHkgPT0gY29uZmlnLT5jb250ZW50X3Byb3Rl
Y3Rpb25fcHJvcGVydHkpIHsKIAkJKnZhbCA9IHN0YXRlLT5jb250ZW50X3Byb3RlY3Rpb247CisJ
fSBlbHNlIGlmIChwcm9wZXJ0eSA9PSBjb25maWctPmhkY3BfY29udGVudF90eXBlX3Byb3BlcnR5
KSB7CisJCSp2YWwgPSBzdGF0ZS0+aGRjcF9jb250ZW50X3R5cGU7CiAJfSBlbHNlIGlmIChwcm9w
ZXJ0eSA9PSBjb25maWctPndyaXRlYmFja19mYl9pZF9wcm9wZXJ0eSkgewogCQkvKiBXcml0ZWJh
Y2sgZnJhbWVidWZmZXIgaXMgb25lLXNob3QsIHdyaXRlIGFuZCBmb3JnZXQgKi8KIAkJKnZhbCA9
IDA7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2Nvbm5lY3Rvci5jIGIvZHJpdmVy
cy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYwppbmRleCAwNjhkNGIwNWYxYmUuLjFkZWE5MjNiYWRk
MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9jb25uZWN0b3IuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vZHJtX2Nvbm5lY3Rvci5jCkBAIC05NTIsNiArOTUyLDU3IEBAIHN0YXRpYyBj
b25zdCBzdHJ1Y3QgZHJtX3Byb3BfZW51bV9saXN0IGhkbWlfY29sb3JzcGFjZXNbXSA9IHsKICAq
CSAgaXMgbm8gbG9uZ2VyIHByb3RlY3RlZCBhbmQgdXNlcnNwYWNlIHNob3VsZCB0YWtlIGFwcHJv
cHJpYXRlIGFjdGlvbgogICoJICAod2hhdGV2ZXIgdGhhdCBtaWdodCBiZSkuCiAgKgorICogSERD
UCBDb250ZW50IFR5cGU6CisgKglUaGlzIEVudW0gcHJvcGVydHkgaXMgdXNlZCBieSB0aGUgdXNl
cnNwYWNlIHRvIGRlY2xhcmUgdGhlIGNvbnRlbnQgdHlwZQorICoJb2YgdGhlIGRpc3BsYXkgc3Ry
ZWFtLCB0byBrZXJuZWwuIEhlcmUgZGlzcGxheSBzdHJlYW0gc3RhbmRzIGZvciBhbnkKKyAqCWRp
c3BsYXkgY29udGVudCB0aGF0IHVzZXJzcGFjZSBpbnRlbmRlZCB0byBkaXNwbGF5IHRocm91Z2gg
SERDUAorICoJZW5jcnlwdGlvbi4KKyAqCisgKglDb250ZW50IFR5cGUgb2YgYSBzdHJlYW0gaXMg
ZGVjaWRlZCBieSB0aGUgb3duZXIgb2YgdGhlIHN0cmVhbSwgYXMKKyAqCSJIRENQIFR5cGUwIiBv
ciAiSERDUCBUeXBlMSIuCisgKgorICoJVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSBjYW4gYmUg
b25lIG9mIHRoZSBiZWxvdzoKKyAqCSAgLSAiSERDUCBUeXBlMCI6IERSTV9NT0RFX0hEQ1BfQ09O
VEVOVF9UWVBFMCA9IDAKKyAqCSAgLSAiSERDUCBUeXBlMSI6IERSTV9NT0RFX0hEQ1BfQ09OVEVO
VF9UWVBFMSA9IDEKKyAqCisgKglXaGVuIGtlcm5lbCBzdGFydHMgdGhlIEhEQ1AgYXV0aGVudGlj
YXRpb24gKHNlZSAiQ29udGVudCBQcm90ZWN0aW9uIgorICoJZm9yIGRldGFpbHMpLCBpdCB1c2Vz
IHRoZSBjb250ZW50IHR5cGUgaW4gIkhEQ1AgQ29udGVudCBUeXBlIgorICoJZm9yIHBlcmZvcm1p
bmcgdGhlIEhEQ1AgYXV0aGVudGljYXRpb24gd2l0aCB0aGUgZGlzcGxheSBzaW5rLgorICoKKyAq
CVBsZWFzZSBub3RlIGluIEhEQ1Agc3BlYyB2ZXJzaW9ucywgYSBsaW5rIGNhbiBiZSBhdXRoZW50
aWNhdGVkIHdpdGgKKyAqCUhEQ1AgMi4yIGZvciBDb250ZW50IFR5cGUgMC9Db250ZW50IFR5cGUg
MS4gV2hlcmUgYXMgYSBsaW5rIGNhbiBiZQorICoJYXV0aGVudGljYXRlZCB3aXRoIEhEQ1AxLjQg
b25seSBmb3IgQ29udGVudCBUeXBlIDAodGhvdWdoIGl0IGlzIGltcGxpY2l0CisgKglpbiBuYXR1
cmUuIEFzIHRoZXJlIGlzIG5vIHJlZmVyZW5jZSBmb3IgQ29udGVudCBUeXBlIGluIEhEQ1AxLjQp
LgorICoKKyAqCUhEQ1AyLjIgYXV0aGVudGljYXRpb24gcHJvdG9jb2wgaXRzZWxmIHRha2VzIHRo
ZSAiQ29udGVudCBUeXBlIiBhcyBhCisgKglwYXJhbWV0ZXIsIHdoaWNoIGlzIGEgaW5wdXQgZm9y
IHRoZSBEUCBIRENQMi4yIGVuY3J5cHRpb24gYWxnby4KKyAqCisgKglJbiBjYXNlIG9mIFR5cGUg
MCBjb250ZW50IHByb3RlY3Rpb24gcmVxdWVzdCwga2VybmVsIGRyaXZlciBjYW4gY2hvb3NlCisg
KgllaXRoZXIgb2YgSERDUCBzcGVjIHZlcnNpb25zIDEuNCBhbmQgMi4yLiBXaGVuIEhEQ1AyLjIg
aXMgdXNlZCBmb3IKKyAqCSJIRENQIFR5cGUgMCIsIGEgSERDUCAyLjIgY2FwYWJsZSByZXBlYXRl
ciBpbiB0aGUgZG93bnN0cmVhbSBjYW4gc2VuZAorICoJdGhhdCBjb250ZW50IHRvIGEgSERDUCAx
LjQgYXV0aGVudGljYXRlZCBIRENQIHNpbmsgKFR5cGUwIGxpbmspLgorICoJQnV0IGlmIHRoZSBj
b250ZW50IGlzIGNsYXNzaWZpZWQgYXMgIkhEQ1AgVHlwZSAxIiwgYWJvdmUgbWVudGlvbmVkCisg
KglIRENQIDIuMiByZXBlYXRlciB3b250IHNlbmQgdGhlIGNvbnRlbnQgdG8gdGhlIEhEQ1Agc2lu
ayBhcyBpdCBjYW4ndAorICoJYXV0aGVudGljYXRlIHRoZSBIRENQMS40IGNhcGFibGUgc2luayBm
b3IgIkhEQ1AgVHlwZSAxIi4KKyAqCisgKglQbGVhc2Ugbm90ZSB1c2Vyc3BhY2UgY2FuIGJlIGln
bm9yYW50IG9mIHRoZSBIRENQIHZlcnNpb25zIHVzZWQgYnkgdGhlCisgKglrZXJuZWwgZHJpdmVy
IHRvIGFjaGlldmUgdGhlICJIRENQIENvbnRlbnQgVHlwZSIuCisgKgorICoJQXQgY3VycmVudCBz
Y2VuYXJpbywgY2xhc3NpZnlpbmcgYSBjb250ZW50IGFzIFR5cGUgMSBlbnN1cmVzIHRoYXQgdGhl
CisgKgljb250ZW50IHdpbGwgYmUgZGlzcGxheWVkIG9ubHkgdGhyb3VnaCB0aGUgSERDUDIuMiBl
bmNyeXB0ZWQgbGluay4KKyAqCisgKglOb3RlIHRoYXQgdGhlIEhEQ1AgQ29udGVudCBUeXBlIHBy
b3BlcnR5IGlzIGludHJvZHVjZWQgYXQgSERDUCAyLjIsIGFuZAorICoJZGVmYXVsdHMgdG8gdHlw
ZSAwLiBJdCBpcyBvbmx5IGV4cG9zZWQgYnkgZHJpdmVycyBzdXBwb3J0aW5nIEhEQ1AgMi4yCisg
KgkoaGVuY2Ugc3VwcG9ydGluZyBUeXBlIDAgYW5kIFR5cGUgMSkuIEJhc2VkIG9uIGhvdyBuZXh0
IHZlcnNpb25zIG9mCisgKglIRENQIHNwZWNzIGFyZSBkZWZpbmVkIGNvbnRlbnQgVHlwZSBjb3Vs
ZCBiZSB1c2VkIGZvciBoaWdoZXIgdmVyc2lvbnMKKyAqCXRvby4KKyAqCisgKglJZiBjb250ZW50
IHR5cGUgaXMgY2hhbmdlZCB3aGVuICJDb250ZW50IFByb3RlY3Rpb24iIGlzIG5vdCBVTkRFU0lS
RUQsCisgKgl0aGVuIGtlcm5lbCB3aWxsIGRpc2FibGUgdGhlIEhEQ1AgYW5kIHJlLWVuYWJsZSB3
aXRoIG5ldyB0eXBlIGluIHRoZQorICoJc2FtZSBhdG9taWMgY29tbWl0LiBBbmQgd2hlbiAiQ29u
dGVudCBQcm90ZWN0aW9uIiBpcyBFTkFCTEVELCBpdCBtZWFucworICoJdGhhdCBsaW5rIGlzIEhE
Q1AgYXV0aGVudGljYXRlZCBhbmQgZW5jcnlwdGVkLCBmb3IgdGhlIHRyYW5zbWlzc2lvbiBvZgor
ICoJdGhlIFR5cGUgb2Ygc3RyZWFtIG1lbnRpb25lZCBhdCAiSERDUCBDb250ZW50IFR5cGUiLgor
ICoKICAqIEhEUl9PVVRQVVRfTUVUQURBVEE6CiAgKglDb25uZWN0b3IgcHJvcGVydHkgdG8gZW5h
YmxlIHVzZXJzcGFjZSB0byBzZW5kIEhEUiBNZXRhZGF0YSB0bwogICoJZHJpdmVyLiBUaGlzIG1l
dGFkYXRhIGlzIGJhc2VkIG9uIHRoZSBjb21wb3NpdGlvbiBhbmQgYmxlbmRpbmcKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1faGRjcC5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9oZGNw
LmMKaW5kZXggY2Q4MzdiZDQwOWY3Li5jZTIzNWZkMWM4NDQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9kcm1faGRjcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1faGRjcC5jCkBAIC0z
NDQsMjMgKzM0NCw0MSBAQCBzdGF0aWMgc3RydWN0IGRybV9wcm9wX2VudW1fbGlzdCBkcm1fY3Bf
ZW51bV9saXN0W10gPSB7CiB9OwogRFJNX0VOVU1fTkFNRV9GTihkcm1fZ2V0X2NvbnRlbnRfcHJv
dGVjdGlvbl9uYW1lLCBkcm1fY3BfZW51bV9saXN0KQogCitzdGF0aWMgc3RydWN0IGRybV9wcm9w
X2VudW1fbGlzdCBkcm1faGRjcF9jb250ZW50X3R5cGVfZW51bV9saXN0W10gPSB7CisJeyBEUk1f
TU9ERV9IRENQX0NPTlRFTlRfVFlQRTAsICJIRENQIFR5cGUwIiB9LAorCXsgRFJNX01PREVfSERD
UF9DT05URU5UX1RZUEUxLCAiSERDUCBUeXBlMSIgfSwKK307CitEUk1fRU5VTV9OQU1FX0ZOKGRy
bV9nZXRfaGRjcF9jb250ZW50X3R5cGVfbmFtZSwKKwkJIGRybV9oZGNwX2NvbnRlbnRfdHlwZV9l
bnVtX2xpc3QpCisKIC8qKgogICogZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfY29udGVudF9wcm90ZWN0
aW9uX3Byb3BlcnR5IC0gYXR0YWNoIGNvbnRlbnQgcHJvdGVjdGlvbgogICogcHJvcGVydHkKICAq
CiAgKiBAY29ubmVjdG9yOiBjb25uZWN0b3IgdG8gYXR0YWNoIENQIHByb3BlcnR5IG9uLgorICog
QGhkY3BfY29udGVudF90eXBlOiBpcyBIRENQIENvbnRlbnQgVHlwZSBwcm9wZXJ0eSBuZWVkZWQg
Zm9yIGNvbm5lY3RvcgogICoKICAqIFRoaXMgaXMgdXNlZCB0byBhZGQgc3VwcG9ydCBmb3IgY29u
dGVudCBwcm90ZWN0aW9uIG9uIHNlbGVjdCBjb25uZWN0b3JzLgogICogQ29udGVudCBQcm90ZWN0
aW9uIGlzIGludGVudGlvbmFsbHkgdmFndWUgdG8gYWxsb3cgZm9yIGRpZmZlcmVudCB1bmRlcmx5
aW5nCiAgKiB0ZWNobm9sb2dpZXMsIGhvd2V2ZXIgaXQgaXMgbW9zdCBpbXBsZW1lbnRlZCBieSBI
RENQLgogICoKKyAqIFdoZW4gaGRjcF9jb250ZW50X3R5cGUgaXMgdHJ1ZSBlbnVtIHByb3BlcnR5
IGNhbGxlZCBIRENQIENvbnRlbnQgVHlwZSBpcworICogY3JlYXRlZCAoaWYgaXQgaXMgbm90IGFs
cmVhZHkpIGFuZCBhdHRhY2hlZCB0byB0aGUgY29ubmVjdG9yLgorICoKKyAqIFRoaXMgcHJvcGVy
dHkgaXMgdXNlZCBmb3Igc2VuZGluZyB0aGUgcHJvdGVjdGVkIGNvbnRlbnQncyBzdHJlYW0gdHlw
ZQorICogZnJvbSB1c2Vyc3BhY2UgdG8ga2VybmVsIG9uIHNlbGVjdGVkIGNvbm5lY3RvcnMuIFBy
b3RlY3RlZCBjb250ZW50IHByb3ZpZGVyCisgKiB3aWxsIGRlY2lkZSB0aGVpciB0eXBlIG9mIHRo
ZWlyIGNvbnRlbnQgYW5kIGRlY2xhcmUgdGhlIHNhbWUgdG8ga2VybmVsLgorICoKKyAqIENvbnRl
bnQgdHlwZSB3aWxsIGJlIHVzZWQgZHVyaW5nIHRoZSBIRENQIDIuMiBhdXRoZW50aWNhdGlvbi4K
KyAqIENvbnRlbnQgdHlwZSB3aWxsIGJlIHNldCB0byAmZHJtX2Nvbm5lY3Rvcl9zdGF0ZS5oZGNw
X2NvbnRlbnRfdHlwZS4KKyAqCiAgKiBUaGUgY29udGVudCBwcm90ZWN0aW9uIHdpbGwgYmUgc2V0
IHRvICZkcm1fY29ubmVjdG9yX3N0YXRlLmNvbnRlbnRfcHJvdGVjdGlvbgogICoKICAqIFJldHVy
bnM6CiAgKiBaZXJvIG9uIHN1Y2Nlc3MsIG5lZ2F0aXZlIGVycm5vIG9uIGZhaWx1cmUuCiAgKi8K
IGludCBkcm1fY29ubmVjdG9yX2F0dGFjaF9jb250ZW50X3Byb3RlY3Rpb25fcHJvcGVydHkoCi0J
CXN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCisJCXN0cnVjdCBkcm1fY29ubmVjdG9y
ICpjb25uZWN0b3IsIGJvb2wgaGRjcF9jb250ZW50X3R5cGUpCiB7CiAJc3RydWN0IGRybV9kZXZp
Y2UgKmRldiA9IGNvbm5lY3Rvci0+ZGV2OwogCXN0cnVjdCBkcm1fcHJvcGVydHkgKnByb3AgPQpA
QCAtMzc3LDYgKzM5NSwyMiBAQCBpbnQgZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfY29udGVudF9wcm90
ZWN0aW9uX3Byb3BlcnR5KAogCQkJCSAgIERSTV9NT0RFX0NPTlRFTlRfUFJPVEVDVElPTl9VTkRF
U0lSRUQpOwogCWRldi0+bW9kZV9jb25maWcuY29udGVudF9wcm90ZWN0aW9uX3Byb3BlcnR5ID0g
cHJvcDsKIAorCWlmICghaGRjcF9jb250ZW50X3R5cGUpCisJCXJldHVybiAwOworCisJcHJvcCA9
IGRldi0+bW9kZV9jb25maWcuaGRjcF9jb250ZW50X3R5cGVfcHJvcGVydHk7CisJaWYgKCFwcm9w
KQorCQlwcm9wID0gZHJtX3Byb3BlcnR5X2NyZWF0ZV9lbnVtKGRldiwgMCwgIkhEQ1AgQ29udGVu
dCBUeXBlIiwKKwkJCQkJZHJtX2hkY3BfY29udGVudF90eXBlX2VudW1fbGlzdCwKKwkJCQkJQVJS
QVlfU0laRSgKKwkJCQkJZHJtX2hkY3BfY29udGVudF90eXBlX2VudW1fbGlzdCkpOworCWlmICgh
cHJvcCkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlkcm1fb2JqZWN0X2F0dGFjaF9wcm9wZXJ0eSgm
Y29ubmVjdG9yLT5iYXNlLCBwcm9wLAorCQkJCSAgIERSTV9NT0RFX0hEQ1BfQ09OVEVOVF9UWVBF
MCk7CisJZGV2LT5tb2RlX2NvbmZpZy5oZGNwX2NvbnRlbnRfdHlwZV9wcm9wZXJ0eSA9IHByb3A7
CisKIAlyZXR1cm4gMDsKIH0KIEVYUE9SVF9TWU1CT0woZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfY29u
dGVudF9wcm90ZWN0aW9uX3Byb3BlcnR5KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9oZGNwLmMKaW5kZXggYTc4MTM5ZjllODQ3Li40MGUyMjAwZmY2OTcgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfaGRjcC5jCkBAIC0xODM1LDcgKzE4MzUsOSBAQCBp
bnQgaW50ZWxfaGRjcF9pbml0KHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvciwKIAlp
ZiAoIXNoaW0pCiAJCXJldHVybiAtRUlOVkFMOwogCi0JcmV0ID0gZHJtX2Nvbm5lY3Rvcl9hdHRh
Y2hfY29udGVudF9wcm90ZWN0aW9uX3Byb3BlcnR5KCZjb25uZWN0b3ItPmJhc2UpOworCXJldCA9
CisJZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfY29udGVudF9wcm90ZWN0aW9uX3Byb3BlcnR5KCZjb25u
ZWN0b3ItPmJhc2UsCisJCQkJCQkJIGZhbHNlKTsKIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0Owog
CmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fY29ubmVjdG9yLmggYi9pbmNsdWRlL2RybS9k
cm1fY29ubmVjdG9yLmgKaW5kZXggNGMzMGQ3NTE0ODdhLi5kNjQzMjk2N2EyYTkgMTAwNjQ0Ci0t
LSBhL2luY2x1ZGUvZHJtL2RybV9jb25uZWN0b3IuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fY29u
bmVjdG9yLmgKQEAgLTYwMSw2ICs2MDEsMTIgQEAgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUg
ewogCSAqLwogCXVuc2lnbmVkIGludCBjb250ZW50X3R5cGU7CiAKKwkvKioKKwkgKiBAaGRjcF9j
b250ZW50X3R5cGU6IENvbm5lY3RvciBwcm9wZXJ0eSB0byBwYXNzIHRoZSB0eXBlIG9mCisJICog
cHJvdGVjdGVkIGNvbnRlbnQuIFRoaXMgaXMgbW9zdCBjb21tb25seSB1c2VkIGZvciBIRENQLgor
CSAqLworCXVuc2lnbmVkIGludCBoZGNwX2NvbnRlbnRfdHlwZTsKKwogCS8qKgogCSAqIEBzY2Fs
aW5nX21vZGU6IENvbm5lY3RvciBwcm9wZXJ0eSB0byBjb250cm9sIHRoZQogCSAqIHVwc2NhbGlu
ZywgbW9zdGx5IHVzZWQgZm9yIGJ1aWx0LWluIHBhbmVscy4KQEAgLTE0ODQsNiArMTQ5MCw3IEBA
IGNvbnN0IGNoYXIgKmRybV9nZXRfZHZpX2lfc2VsZWN0X25hbWUoaW50IHZhbCk7CiBjb25zdCBj
aGFyICpkcm1fZ2V0X3R2X3N1YmNvbm5lY3Rvcl9uYW1lKGludCB2YWwpOwogY29uc3QgY2hhciAq
ZHJtX2dldF90dl9zZWxlY3RfbmFtZShpbnQgdmFsKTsKIGNvbnN0IGNoYXIgKmRybV9nZXRfY29u
dGVudF9wcm90ZWN0aW9uX25hbWUoaW50IHZhbCk7Citjb25zdCBjaGFyICpkcm1fZ2V0X2hkY3Bf
Y29udGVudF90eXBlX25hbWUoaW50IHZhbCk7CiAKIGludCBkcm1fbW9kZV9jcmVhdGVfZHZpX2lf
cHJvcGVydGllcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KTsKIGludCBkcm1fbW9kZV9jcmVhdGVf
dHZfbWFyZ2luX3Byb3BlcnRpZXMoc3RydWN0IGRybV9kZXZpY2UgKmRldik7CmRpZmYgLS1naXQg
YS9pbmNsdWRlL2RybS9kcm1faGRjcC5oIGIvaW5jbHVkZS9kcm0vZHJtX2hkY3AuaAppbmRleCAx
Mzc3MWE0OTZlMmIuLjI5NzBhYmRmYWYxMiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2hk
Y3AuaAorKysgYi9pbmNsdWRlL2RybS9kcm1faGRjcC5oCkBAIC0yOTEsNSArMjkxLDUgQEAgc3Ry
dWN0IGRybV9jb25uZWN0b3I7CiBib29sIGRybV9oZGNwX2NoZWNrX2tzdnNfcmV2b2tlZChzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCSB1OCAqa3N2cywgdTMyIGtzdl9jb3VudCk7CiBpbnQg
ZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfY29udGVudF9wcm90ZWN0aW9uX3Byb3BlcnR5KAotCQlzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKTsKKwkJc3RydWN0IGRybV9jb25uZWN0b3IgKmNv
bm5lY3RvciwgYm9vbCBoZGNwX2NvbnRlbnRfdHlwZSk7CiAjZW5kaWYKZGlmZiAtLWdpdCBhL2lu
Y2x1ZGUvZHJtL2RybV9tb2RlX2NvbmZpZy5oIGIvaW5jbHVkZS9kcm0vZHJtX21vZGVfY29uZmln
LmgKaW5kZXggZjU3ZWVhMDQ4MWUwLi4zYmNiZTMwMzM5ZjAgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUv
ZHJtL2RybV9tb2RlX2NvbmZpZy5oCisrKyBiL2luY2x1ZGUvZHJtL2RybV9tb2RlX2NvbmZpZy5o
CkBAIC04NDksNiArODQ5LDEyIEBAIHN0cnVjdCBkcm1fbW9kZV9jb25maWcgewogCSAqLwogCXN0
cnVjdCBkcm1fcHJvcGVydHkgKmNvbnRlbnRfcHJvdGVjdGlvbl9wcm9wZXJ0eTsKIAorCS8qKgor
CSAqIEBoZGNwX2NvbnRlbnRfdHlwZV9wcm9wZXJ0eTogRFJNIEVOVU0gcHJvcGVydHkgZm9yIHR5
cGUgb2YKKwkgKiBQcm90ZWN0ZWQgQ29udGVudC4KKwkgKi8KKwlzdHJ1Y3QgZHJtX3Byb3BlcnR5
ICpoZGNwX2NvbnRlbnRfdHlwZV9wcm9wZXJ0eTsKKwogCS8qIGR1bWIgaW9jdGwgcGFyYW1ldGVy
cyAqLwogCXVpbnQzMl90IHByZWZlcnJlZF9kZXB0aCwgcHJlZmVyX3NoYWRvdzsKIApkaWZmIC0t
Z2l0IGEvaW5jbHVkZS91YXBpL2RybS9kcm1fbW9kZS5oIGIvaW5jbHVkZS91YXBpL2RybS9kcm1f
bW9kZS5oCmluZGV4IDVhYjMzMWU1ZGMyMy4uNWM5NTQzOTQwOTNmIDEwMDY0NAotLS0gYS9pbmNs
dWRlL3VhcGkvZHJtL2RybV9tb2RlLmgKKysrIGIvaW5jbHVkZS91YXBpL2RybS9kcm1fbW9kZS5o
CkBAIC0yMTgsNiArMjE4LDEwIEBAIGV4dGVybiAiQyIgewogI2RlZmluZSBEUk1fTU9ERV9DT05U
RU5UX1BST1RFQ1RJT05fREVTSVJFRCAgICAgMQogI2RlZmluZSBEUk1fTU9ERV9DT05URU5UX1BS
T1RFQ1RJT05fRU5BQkxFRCAgICAgMgogCisvKiBDb250ZW50IFR5cGUgY2xhc3NpZmljYXRpb24g
Zm9yIEhEQ1AyLjIgdnMgb3RoZXJzICovCisjZGVmaW5lIERSTV9NT0RFX0hEQ1BfQ09OVEVOVF9U
WVBFMAkJMAorI2RlZmluZSBEUk1fTU9ERV9IRENQX0NPTlRFTlRfVFlQRTEJCTEKKwogc3RydWN0
IGRybV9tb2RlX21vZGVpbmZvIHsKIAlfX3UzMiBjbG9jazsKIAlfX3UxNiBoZGlzcGxheTsKLS0g
CjIuMTkuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
ZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
