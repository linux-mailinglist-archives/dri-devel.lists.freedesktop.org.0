Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 252561AD14
	for <lists+dri-devel@lfdr.de>; Sun, 12 May 2019 18:41:24 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 10BE28958E;
	Sun, 12 May 2019 16:41:21 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0667989491
 for <dri-devel@lists.freedesktop.org>; Sun, 12 May 2019 16:41:18 +0000 (UTC)
Received: from pendragon.ideasonboard.com
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 167CC2B6;
 Sun, 12 May 2019 18:41:17 +0200 (CEST)
Date: Sun, 12 May 2019 19:41:00 +0300
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Kieran Bingham <kieran.bingham+renesas@ideasonboard.com>
Subject: Re: [PATCH v2 6/6] drm: rcar-du: Add group hooks for atomic-commit
Message-ID: <20190512164100.GG4960@pendragon.ideasonboard.com>
References: <20190315170110.23280-1-kieran.bingham+renesas@ideasonboard.com>
 <20190315170110.23280-7-kieran.bingham+renesas@ideasonboard.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190315170110.23280-7-kieran.bingham+renesas@ideasonboard.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1557679277;
 bh=PrwIXJxT2dZCPmvZZ2l3MenWdQbURw9kGvyuKg22btc=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=d1pxzR9sIM+nbTgYlb0fqNy0vISFD9GYPMXXBOaMbj1Y9uvOzyIa2DvUAFzI/vbs8
 4b+SSTMKEn4N78qcAhVkuEGjKn1CswFKK9qDRp5FCUqjKVyM72nkb0ftmt/TgLehIg
 1wKjeSO4q+9UNSNraX2BWA1/Qo5MV8oAbcH72bnU=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-renesas-soc@vger.kernel.org, David Airlie <airlied@linux.ie>,
 open list <linux-kernel@vger.kernel.org>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgS2llcmFuLAoKVGhhbmsgeW91IGZvciB0aGUgcGF0Y2guCgpPbiBGcmksIE1hciAxNSwgMjAx
OSBhdCAwNTowMToxMFBNICswMDAwLCBLaWVyYW4gQmluZ2hhbSB3cm90ZToKPiBUaGUgZ3JvdXAg
Y2FuIG5vdyBiZSBoYW5kbGVkIGluZGVwZW5kZW50bHkgZnJvbSB0aGUgQ1JUQyB0cmFja2luZyBp
dHMKPiBvd24gc3RhdGUuCj4gCj4gSW50cm9kdWNlIGFuIHJjYXJfZHVfZ3JvdXBfYXRvbWljX2No
ZWNrKCkgY2FsbCB3aGljaCB3aWxsIGl0ZXJhdGUgdGhlCj4gQ1JUQ3MgdG8gZGV0ZXJtaW5lIHRo
ZSBwZXItc3RhdGUgdXNlLWNvdW50IG9mIHRoZSBncm91cC4KPiAKPiBUaGlzIHVzZSBjb3VudCB0
aGVuIGFsbG93cyB1cyB0byBkZXRlcm1pbmUgaWYgdGhlIGdyb3VwIHNob3VsZCBiZQo+IGNvbmZp
Z3VyZWQgb3IgZGlzYWJsZWQgaW4gb3VyIGNvbW1pdCB0YWlsIHRocm91Z2ggdGhlIGludHJvZHVj
dGlvbiBvZgo+IHR3byBuZXcgY2FsbHMgcmNhcl9kdV9ncm91cF9hdG9taWNfe3ByZSxwb3N0fV9j
b21taXQoKS4KPiAKPiBUaGUgZXhpc3RpbmcgcmNhcl9kdV9ncm91cF97Z2V0LHB1dH0oKSBmdW5j
dGlvbnMgYXJlIG5vdyByZWR1bmRhbnQgYW5kCj4gcmVtb3ZlZCBhbG9uZyB3aXRoIHRoZWlyIGlu
dGVyYWN0aW9ucyBpbiB0aGUgQ1JUQyBnZXQvcHV0IGNhbGxzLgo+IAo+IFRoZSBncm91cHMgc2hh
cmUgY2xvY2tpbmcgd2l0aCB0aGUgQ1JUQ3Mgd2l0aGluIHRoZSBncm91cCwgYW5kIHNvIGFyZQo+
IGFjY2Vzc2libGUgb25seSB3aGVuIG9uZSBvZiBpdHMgQ1JUQ3MgaGFzIGJlZW4gcG93ZXJlZCB0
aHJvdWdoCj4gcmNhcl9kdV9jcnRjX2F0b21pY19leGl0X3N0YW5kYnkoKS4KPiAKPiBTaWduZWQt
b2ZmLWJ5OiBLaWVyYW4gQmluZ2hhbSA8a2llcmFuLmJpbmdoYW0rcmVuZXNhc0BpZGVhc29uYm9h
cmQuY29tPgo+IAo+IC0tLQo+IHYyOgo+ICAtIEFsbCByZWdpc3RlciBzZXF1ZW5jZXMgbm93IG1h
aW50YWluZWQuCj4gIC0gQ2xvY2sgbWFuYWdlbWVudCBpcyBubyBsb25nZXIgaGFuZGxlZCBieSB0
aGUgZ3JvdXAKPiAgICAoX2NydGNfe2V4aXQsZW50ZXJ9X3N0YW5kYnkgaGFuZGxlcyB0aGlzIGZv
ciB1cykKPiAKPiAKPiAKPiAgZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9jcnRjLmMg
IHwgICA4IC0tCj4gIGRyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfZHVfZ3JvdXAuYyB8IDEw
MSArKysrKysrKysrKysrKysrLS0tLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNh
cl9kdV9ncm91cC5oIHwgIDE0ICsrKy0KPiAgZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9k
dV9rbXMuYyAgIHwgICA2ICsrCj4gIDQgZmlsZXMgY2hhbmdlZCwgODUgaW5zZXJ0aW9ucygrKSwg
NDQgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1
L3JjYXJfZHVfY3J0Yy5jIGIvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9jcnRjLmMK
PiBpbmRleCAyNjA2ZGU3ODg2ODguLmZjZThiZDFkOWQyNSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2NydGMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9y
Y2FyLWR1L3JjYXJfZHVfY3J0Yy5jCj4gQEAgLTUxMSwxNCArNTExLDggQEAgc3RhdGljIGludCBy
Y2FyX2R1X2NydGNfZW5hYmxlKHN0cnVjdCByY2FyX2R1X2NydGMgKnJjcnRjKQo+ICAJaWYgKHJl
dCA8IDApCj4gIAkJZ290byBlcnJvcl9jbG9jazsKPiAgCj4gLQlyZXQgPSByY2FyX2R1X2dyb3Vw
X2dldChyY3J0Yy0+Z3JvdXApOwo+IC0JaWYgKHJldCA8IDApCj4gLQkJZ290byBlcnJvcl9ncm91
cDsKPiAtCj4gIAlyZXR1cm4gMDsKPiAgCj4gLWVycm9yX2dyb3VwOgo+IC0JY2xrX2Rpc2FibGVf
dW5wcmVwYXJlKHJjcnRjLT5leHRjbG9jayk7Cj4gIGVycm9yX2Nsb2NrOgo+ICAJY2xrX2Rpc2Fi
bGVfdW5wcmVwYXJlKHJjcnRjLT5jbG9jayk7Cj4gIAlyZXR1cm4gcmV0OwoKWW91IGNhbiBzaW1w
bGlmeSB0aGlzIGZ1bmN0aW9uIGZ1cnRoZXIgYnkgaW5saW5pbmcgdGhlCmNsa19kaXNhYmxlX3Vu
cHJlcGFyZSgpIGluIHRoZSBzaW5nbGUgZXJyb3IgcGF0aCBhbmQgcmVtb3ZpbmcgdGhlCmVycm9y
X2Nsb2NrIGxhYmVsLgoKPiBAQCAtNTI2LDggKzUyMCw2IEBAIHN0YXRpYyBpbnQgcmNhcl9kdV9j
cnRjX2VuYWJsZShzdHJ1Y3QgcmNhcl9kdV9jcnRjICpyY3J0YykKPiAgCj4gIHN0YXRpYyB2b2lk
IHJjYXJfZHVfY3J0Y19kaXNhYmxlKHN0cnVjdCByY2FyX2R1X2NydGMgKnJjcnRjKQo+ICB7Cj4g
LQlyY2FyX2R1X2dyb3VwX3B1dChyY3J0Yy0+Z3JvdXApOwo+IC0KPiAgCWNsa19kaXNhYmxlX3Vu
cHJlcGFyZShyY3J0Yy0+ZXh0Y2xvY2spOwo+ICAJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKHJjcnRj
LT5jbG9jayk7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNh
cl9kdV9ncm91cC5jIGIvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9ncm91cC5jCj4g
aW5kZXggOWM4MmQ2NjZmMTcwLi4xZjk1MDRiY2EwZjMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3JjYXItZHUvcmNhcl9kdV9ncm91cC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3Jj
YXItZHUvcmNhcl9kdV9ncm91cC5jCj4gQEAgLTI0LDYgKzI0LDcgQEAKPiAgICovCj4gIAo+ICAj
aW5jbHVkZSA8bGludXgvY2xrLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9lcnIuaD4KPiAgI2luY2x1
ZGUgPGxpbnV4L2lvLmg+Cj4gIAo+ICAjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWMuaD4KPiBAQCAt
MTcyLDM4ICsxNzMsNiBAQCBzdGF0aWMgdm9pZCByY2FyX2R1X2dyb3VwX3NldHVwKHN0cnVjdCBy
Y2FyX2R1X2dyb3VwICpyZ3JwKQo+ICAJbXV0ZXhfdW5sb2NrKCZyZ3JwLT5sb2NrKTsKPiAgfQo+
ICAKPiAtLyoKPiAtICogcmNhcl9kdV9ncm91cF9nZXQgLSBBY3F1aXJlIGEgcmVmZXJlbmNlIHRv
IHRoZSBEVSBjaGFubmVscyBncm91cAo+IC0gKgo+IC0gKiBBY3F1aXJpbmcgdGhlIGZpcnN0IHJl
ZmVyZW5jZSBzZXR1cHMgY29yZSByZWdpc3RlcnMuIEEgcmVmZXJlbmNlIG11c3QgYmUgaGVsZAo+
IC0gKiBiZWZvcmUgYWNjZXNzaW5nIGFueSBoYXJkd2FyZSByZWdpc3RlcnMuCj4gLSAqCj4gLSAq
IFRoaXMgZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgd2l0aCB0aGUgRFJNIG1vZGVfY29uZmlnIGxv
Y2sgaGVsZC4KPiAtICoKPiAtICogUmV0dXJuIDAgaW4gY2FzZSBvZiBzdWNjZXNzIG9yIGEgbmVn
YXRpdmUgZXJyb3IgY29kZSBvdGhlcndpc2UuCj4gLSAqLwo+IC1pbnQgcmNhcl9kdV9ncm91cF9n
ZXQoc3RydWN0IHJjYXJfZHVfZ3JvdXAgKnJncnApCj4gLXsKPiAtCWlmIChyZ3JwLT51c2VfY291
bnQpCj4gLQkJZ290byBkb25lOwo+IC0KPiAtCXJjYXJfZHVfZ3JvdXBfc2V0dXAocmdycCk7Cj4g
LQo+IC1kb25lOgo+IC0JcmdycC0+dXNlX2NvdW50Kys7Cj4gLQlyZXR1cm4gMDsKPiAtfQo+IC0K
PiAtLyoKPiAtICogcmNhcl9kdV9ncm91cF9wdXQgLSBSZWxlYXNlIGEgcmVmZXJlbmNlIHRvIHRo
ZSBEVQo+IC0gKgo+IC0gKiBUaGlzIGZ1bmN0aW9uIG11c3QgYmUgY2FsbGVkIHdpdGggdGhlIERS
TSBtb2RlX2NvbmZpZyBsb2NrIGhlbGQuCj4gLSAqLwo+IC12b2lkIHJjYXJfZHVfZ3JvdXBfcHV0
KHN0cnVjdCByY2FyX2R1X2dyb3VwICpyZ3JwKQo+IC17Cj4gLQktLXJncnAtPnVzZV9jb3VudDsK
PiAtfQo+IC0KPiAgc3RhdGljIHZvaWQgX19yY2FyX2R1X2dyb3VwX3N0YXJ0X3N0b3Aoc3RydWN0
IHJjYXJfZHVfZ3JvdXAgKnJncnAsIGJvb2wgc3RhcnQpCj4gIHsKPiAgCXN0cnVjdCByY2FyX2R1
X2RldmljZSAqcmNkdSA9IHJncnAtPmRldjsKPiBAQCAtMzg0LDYgKzM1Myw3NCBAQCBzdGF0aWMg
Y29uc3Qgc3RydWN0IGRybV9wcml2YXRlX3N0YXRlX2Z1bmNzIHJjYXJfZHVfZ3JvdXBfc3RhdGVf
ZnVuY3MgPSB7Cj4gIAkuYXRvbWljX2Rlc3Ryb3lfc3RhdGUgPSByY2FyX2R1X2dyb3VwX2F0b21p
Y19kZXN0cm95X3N0YXRlLAo+ICB9Owo+ICAKPiArI2RlZmluZSBmb3JfZWFjaF9vbGRuZXdfZ3Jv
dXBfaW5fc3RhdGUoX19zdGF0ZSwgX19vYmosIF9fb2xkX3N0YXRlLCBfX25ld19zdGF0ZSwgX19p
KSBcCj4gKwlmb3JfZWFjaF9vbGRuZXdfcHJpdmF0ZV9vYmpfaW5fc3RhdGUoKF9fc3RhdGUpLCAo
X19vYmopLCAoX19vbGRfc3RhdGUpLCAoX19uZXdfc3RhdGUpLCAoX19pKSkgXAo+ICsJCWZvcl9l
YWNoX2lmKChfX29iaiktPmZ1bmNzID09ICZyY2FyX2R1X2dyb3VwX3N0YXRlX2Z1bmNzKQo+ICsK
PiArc3RhdGljIHN0cnVjdCByY2FyX2R1X2dyb3VwX3N0YXRlICoKPiArcmNhcl9kdV9nZXRfZ3Jv
dXBfc3RhdGUoc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlLAo+ICsJCQlzdHJ1Y3QgcmNh
cl9kdV9ncm91cCAqcmdycCkKPiArewo+ICsJc3RydWN0IGRybV9wcml2YXRlX3N0YXRlICpwc3Rh
dGU7Cj4gKwo+ICsJcHN0YXRlID0gZHJtX2F0b21pY19nZXRfcHJpdmF0ZV9vYmpfc3RhdGUoc3Rh
dGUsICZyZ3JwLT5wcml2YXRlKTsKPiArCWlmIChJU19FUlIocHN0YXRlKSkKPiArCQlyZXR1cm4g
RVJSX0NBU1QocHN0YXRlKTsKPiArCj4gKwlyZXR1cm4gdG9fcmNhcl9ncm91cF9zdGF0ZShwc3Rh
dGUpOwo+ICt9Cj4gKwo+ICtpbnQgcmNhcl9kdV9ncm91cF9hdG9taWNfY2hlY2soc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwKPiArCQkJICAgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0
ZSkKPiArewo+ICsJc3RydWN0IGRybV9jcnRjICpjcnRjOwo+ICsJc3RydWN0IGRybV9jcnRjX3N0
YXRlICpjcnRjX3N0YXRlOwo+ICsJdW5zaWduZWQgaW50IGk7Cj4gKwo+ICsJZm9yX2VhY2hfbmV3
X2NydGNfaW5fc3RhdGUoc3RhdGUsIGNydGMsIGNydGNfc3RhdGUsIGkpIHsKPiArCQlzdHJ1Y3Qg
cmNhcl9kdV9jcnRjICpyY3J0YyA9IHRvX3JjYXJfY3J0YyhjcnRjKTsKPiArCQlzdHJ1Y3QgcmNh
cl9kdV9ncm91cF9zdGF0ZSAqcnN0YXRlOwo+ICsKPiArCQlpZiAoY3J0Y19zdGF0ZS0+YWN0aXZl
X2NoYW5nZWQgfHwgY3J0Y19zdGF0ZS0+bW9kZV9jaGFuZ2VkKSB7Cj4gKwkJCXJzdGF0ZSA9IHJj
YXJfZHVfZ2V0X2dyb3VwX3N0YXRlKHN0YXRlLCByY3J0Yy0+Z3JvdXApOwo+ICsJCQlpZiAoSVNf
RVJSKHJzdGF0ZSkpCj4gKwkJCQlyZXR1cm4gUFRSX0VSUihyc3RhdGUpOwo+ICsKPiArCQkJaWYg
KGNydGNfc3RhdGUtPmFjdGl2ZSkKPiArCQkJCXJzdGF0ZS0+dXNlX2NvdW50Kys7CgpUaGlzIGRv
ZXNuJ3Qgc2VlbSByaWdodCB0byBtZS4gQSBjb21taXQgd2l0aCBqdXN0IGEgcGFnZSBmbGlwIHdp
bGwgaGF2ZQpuZWl0aGVyIGFjdGl2ZV9jaGFuZ2VkIG5vdCBtb2RlX2NoYW5nZWQgc2V0LiBUaGUg
Z3JvdXAgdXNlIGNvdW50IHdpbGwKdGh1cyBiZSAwLiBJZiB0aGUgbmV4dCBjb21taXQgZW5hYmxl
cyB0aGUgc2Vjb25kIENSVEMgaW4gdGhlIGdyb3VwLCB0aGVuCnlvdSB3aWxsIGNhbGwgcmNhcl9k
dV9ncm91cF9zZXR1cCgpIGFnYWluIGluCnJjYXJfZHVfZ3JvdXBfYXRvbWljX3ByZV9jb21taXQo
KS4KCkkgdGhpbmsgeW91IHNob3VsZCBpbmNyZW1lbnQgdXNlX2NvdW50IHdoZW4gY3J0Y19zdGF0
ZS0+YWN0aXZlCnJlZ2FyZGxlc3Mgb2YgYWN0aXZlX2NoYW5nZWQgYW5kIG1vZGVfY2hhbmdlZC4K
Cj4gKwkJfQo+ICsJfQo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtpbnQgcmNhcl9kdV9n
cm91cF9hdG9taWNfcHJlX2NvbW1pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICsJCQkJICAg
IHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSkKPiArewo+ICsJc3RydWN0IGRybV9wcml2
YXRlX3N0YXRlICpvbGRfcHN0YXRlLCAqbmV3X3BzdGF0ZTsKPiArCXN0cnVjdCBkcm1fcHJpdmF0
ZV9vYmogKm9iajsKPiArCXVuc2lnbmVkIGludCBpOwo+ICsKPiArCWZvcl9lYWNoX29sZG5ld19n
cm91cF9pbl9zdGF0ZShzdGF0ZSwgb2JqLCBvbGRfcHN0YXRlLCBuZXdfcHN0YXRlLCBpKSB7Cj4g
KwkJc3RydWN0IHJjYXJfZHVfZ3JvdXAgKnJncnAgPSB0b19yY2FyX2dyb3VwKG9iaik7Cj4gKwkJ
c3RydWN0IHJjYXJfZHVfZ3JvdXBfc3RhdGUgKm9sZF9zdGF0ZSwgKm5ld19zdGF0ZTsKPiArCj4g
KwkJb2xkX3N0YXRlID0gdG9fcmNhcl9ncm91cF9zdGF0ZShvbGRfcHN0YXRlKTsKPiArCQluZXdf
c3RhdGUgPSB0b19yY2FyX2dyb3VwX3N0YXRlKG5ld19wc3RhdGUpOwo+ICsKPiArCQlpZiAoIW9s
ZF9zdGF0ZS0+dXNlX2NvdW50ICYmIG5ld19zdGF0ZS0+dXNlX2NvdW50KQo+ICsJCQlyY2FyX2R1
X2dyb3VwX3NldHVwKHJncnApOwo+ICsJfQo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtp
bnQgcmNhcl9kdV9ncm91cF9hdG9taWNfcG9zdF9jb21taXQoc3RydWN0IGRybV9kZXZpY2UgKmRl
diwKPiArCQkJCSAgICAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQo+ICt7Cj4gKwly
ZXR1cm4gMDsKPiArfQoKQXMgZm9yIHRoZSBzaW1pbGFyIENSVEMgcGF0Y2gsIEkgdGhpbmsgeW91
IGNhbiBkcm9wCnJjYXJfZHVfZ3JvdXBfYXRvbWljX3Bvc3RfY29tbWl0KCksIHR1cm4KcmNhcl9k
dV9ncm91cF9hdG9taWNfcHJlX2NvbW1pdCgpIGludG8gYSB2b2lkIGZ1bmN0aW9uLCBhbmQgcmVu
YW1lIGl0IHRvCnJjYXJfZHVfZ3JvdXBfYXRvbWljX3NldHVwKCkuCgpUaGUgcmVzdCBsb29rcyBn
b29kIHRvIG1lLCBzbyB3aXRoIHRoaXMgZml4ZWQsCgpSZXZpZXdlZC1ieTogTGF1cmVudCBQaW5j
aGFydCA8bGF1cmVudC5waW5jaGFydEBpZGVhc29uYm9hcmQuY29tPgoKPiArCj4gIC8qCj4gICAq
IHJjYXJfZHVfZ3JvdXBfaW5pdCAtIEluaXRpYWxpc2UgYW5kIHJlc2V0IGEgZ3JvdXAgb2JqZWN0
Cj4gICAqCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfZHVfZ3Jv
dXAuaCBiL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfZHVfZ3JvdXAuaAo+IGluZGV4IDRi
ODEyZTE2Nzk4Ny4uMjg4YzA5YTZkN2QwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9y
Y2FyLWR1L3JjYXJfZHVfZ3JvdXAuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3Jj
YXJfZHVfZ3JvdXAuaAo+IEBAIC0yNiw3ICsyNiw2IEBAIHN0cnVjdCByY2FyX2R1X2RldmljZTsK
PiAgICogQGluZGV4OiBncm91cCBpbmRleAo+ICAgKiBAY2hhbm5lbHNfbWFzazogYml0bWFzayBv
ZiBwb3B1bGF0ZWQgRFUgY2hhbm5lbHMgaW4gdGhpcyBncm91cAo+ICAgKiBAbnVtX2NydGNzOiBu
dW1iZXIgb2YgQ1JUQ3MgaW4gdGhpcyBncm91cCAoMSBvciAyKQo+IC0gKiBAdXNlX2NvdW50OiBu
dW1iZXIgb2YgdXNlcnMgb2YgdGhlIGdyb3VwIChyY2FyX2R1X2dyb3VwXyhnZXR8cHV0KSkKPiAg
ICogQHVzZWRfY3J0Y3M6IG51bWJlciBvZiBDUlRDcyBjdXJyZW50bHkgaW4gdXNlCj4gICAqIEBs
b2NrOiBwcm90ZWN0cyB0aGUgZHB0c3JfcGxhbmVzIGZpZWxkIGFuZCB0aGUgRFBUU1IgcmVnaXN0
ZXIKPiAgICogQGRwdHNyX3BsYW5lczogYml0bWFzayBvZiBwbGFuZXMgZHJpdmVuIGJ5IGRvdC1j
bG9jayBhbmQgdGltaW5nIGdlbmVyYXRvciAxCj4gQEAgLTQzLDcgKzQyLDYgQEAgc3RydWN0IHJj
YXJfZHVfZ3JvdXAgewo+ICAKPiAgCXVuc2lnbmVkIGludCBjaGFubmVsc19tYXNrOwo+ICAJdW5z
aWduZWQgaW50IG51bV9jcnRjczsKPiAtCXVuc2lnbmVkIGludCB1c2VfY291bnQ7Cj4gIAl1bnNp
Z25lZCBpbnQgdXNlZF9jcnRjczsKPiAgCj4gIAlzdHJ1Y3QgbXV0ZXggbG9jazsKPiBAQCAtNTks
OSArNTcsMTIgQEAgc3RydWN0IHJjYXJfZHVfZ3JvdXAgewo+ICAvKioKPiAgICogc3RydWN0IHJj
YXJfZHVfZ3JvdXBfc3RhdGUgLSBEcml2ZXItc3BlY2lmaWMgZ3JvdXAgc3RhdGUKPiAgICogQHN0
YXRlOiBiYXNlIERSTSBwcml2YXRlIHN0YXRlCj4gKyAqIEB1c2VfY291bnQ6IG51bWJlciBvZiB1
c2VycyBvZiB0aGUgZ3JvdXAKPiAgICovCj4gIHN0cnVjdCByY2FyX2R1X2dyb3VwX3N0YXRlIHsK
PiAgCXN0cnVjdCBkcm1fcHJpdmF0ZV9zdGF0ZSBzdGF0ZTsKPiArCj4gKwl1bnNpZ25lZCBpbnQg
dXNlX2NvdW50Owo+ICB9Owo+ICAKPiAgI2RlZmluZSB0b19yY2FyX2dyb3VwX3N0YXRlKHMpIFwK
PiBAQCAtNzAsMTQgKzcxLDE5IEBAIHN0cnVjdCByY2FyX2R1X2dyb3VwX3N0YXRlIHsKPiAgdTMy
IHJjYXJfZHVfZ3JvdXBfcmVhZChzdHJ1Y3QgcmNhcl9kdV9ncm91cCAqcmdycCwgdTMyIHJlZyk7
Cj4gIHZvaWQgcmNhcl9kdV9ncm91cF93cml0ZShzdHJ1Y3QgcmNhcl9kdV9ncm91cCAqcmdycCwg
dTMyIHJlZywgdTMyIGRhdGEpOwo+ICAKPiAtaW50IHJjYXJfZHVfZ3JvdXBfZ2V0KHN0cnVjdCBy
Y2FyX2R1X2dyb3VwICpyZ3JwKTsKPiAtdm9pZCByY2FyX2R1X2dyb3VwX3B1dChzdHJ1Y3QgcmNh
cl9kdV9ncm91cCAqcmdycCk7Cj4gIHZvaWQgcmNhcl9kdV9ncm91cF9zdGFydF9zdG9wKHN0cnVj
dCByY2FyX2R1X2dyb3VwICpyZ3JwLCBib29sIHN0YXJ0KTsKPiAgdm9pZCByY2FyX2R1X2dyb3Vw
X3Jlc3RhcnQoc3RydWN0IHJjYXJfZHVfZ3JvdXAgKnJncnApOwo+ICBpbnQgcmNhcl9kdV9ncm91
cF9zZXRfcm91dGluZyhzdHJ1Y3QgcmNhcl9kdV9ncm91cCAqcmdycCk7Cj4gIAo+ICBpbnQgcmNh
cl9kdV9zZXRfZHBhZDBfdnNwMV9yb3V0aW5nKHN0cnVjdCByY2FyX2R1X2RldmljZSAqcmNkdSk7
Cj4gIAo+ICtpbnQgcmNhcl9kdV9ncm91cF9hdG9taWNfY2hlY2soc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwKPiArCQkJICAgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSk7Cj4gK2lu
dCByY2FyX2R1X2dyb3VwX2F0b21pY19wcmVfY29tbWl0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYs
Cj4gKwkJCQkgICAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKTsKPiAraW50IHJjYXJf
ZHVfZ3JvdXBfYXRvbWljX3Bvc3RfY29tbWl0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gKwkJ
CQkgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSk7Cj4gKwo+ICBpbnQgcmNhcl9k
dV9ncm91cF9pbml0KHN0cnVjdCByY2FyX2R1X2RldmljZSAqcmNkdSwgc3RydWN0IHJjYXJfZHVf
Z3JvdXAgKnJncnAsCj4gIAkJICAgICAgIHVuc2lnbmVkIGludCBpbmRleCk7Cj4gIHZvaWQgcmNh
cl9kdV9ncm91cF9jbGVhbnVwKHN0cnVjdCByY2FyX2R1X2dyb3VwICpyZ3JwKTsKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9rbXMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9yY2FyLWR1L3JjYXJfZHVfa21zLmMKPiBpbmRleCBlYjAxYmVhMWFiODMuLjc3ZjBmZjM4
Mjk4YiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2ttcy5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9rbXMuYwo+IEBAIC0yNzEs
NiArMjcxLDEwIEBAIHN0YXRpYyBpbnQgcmNhcl9kdV9hdG9taWNfY2hlY2soc3RydWN0IGRybV9k
ZXZpY2UgKmRldiwKPiAgCWlmIChyZXQpCj4gIAkJcmV0dXJuIHJldDsKPiAgCj4gKwlyZXQgPSBy
Y2FyX2R1X2dyb3VwX2F0b21pY19jaGVjayhkZXYsIHN0YXRlKTsKPiArCWlmIChyZXQpCj4gKwkJ
cmV0dXJuIHJldDsKPiArCj4gIAlpZiAocmNhcl9kdV9oYXMocmNkdSwgUkNBUl9EVV9GRUFUVVJF
X1ZTUDFfU09VUkNFKSkKPiAgCQlyZXR1cm4gMDsKPiAgCj4gQEAgLTMwNSw2ICszMDksNyBAQCBz
dGF0aWMgdm9pZCByY2FyX2R1X2F0b21pY19jb21taXRfdGFpbChzdHJ1Y3QgZHJtX2F0b21pY19z
dGF0ZSAqb2xkX3N0YXRlKQo+ICAKPiAgCS8qIEFwcGx5IHRoZSBhdG9taWMgdXBkYXRlLiAqLwo+
ICAJcmNhcl9kdV9jcnRjX2F0b21pY19leGl0X3N0YW5kYnkoZGV2LCBvbGRfc3RhdGUpOwo+ICsJ
cmNhcl9kdV9ncm91cF9hdG9taWNfcHJlX2NvbW1pdChkZXYsIG9sZF9zdGF0ZSk7Cj4gIAlyY2Fy
X2R1X2NydGNfYXRvbWljX3ByZV9jb21taXQoZGV2LCBvbGRfc3RhdGUpOwo+ICAKPiAgCWRybV9h
dG9taWNfaGVscGVyX2NvbW1pdF9tb2Rlc2V0X2Rpc2FibGVzKGRldiwgb2xkX3N0YXRlKTsKPiBA
QCAtMzEzLDYgKzMxOCw3IEBAIHN0YXRpYyB2b2lkIHJjYXJfZHVfYXRvbWljX2NvbW1pdF90YWls
KHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpCj4gIAlkcm1fYXRvbWljX2hlbHBl
cl9jb21taXRfbW9kZXNldF9lbmFibGVzKGRldiwgb2xkX3N0YXRlKTsKPiAgCj4gIAlyY2FyX2R1
X2NydGNfYXRvbWljX3Bvc3RfY29tbWl0KGRldiwgb2xkX3N0YXRlKTsKPiArCXJjYXJfZHVfZ3Jv
dXBfYXRvbWljX3Bvc3RfY29tbWl0KGRldiwgb2xkX3N0YXRlKTsKPiAgCXJjYXJfZHVfY3J0Y19h
dG9taWNfZW50ZXJfc3RhbmRieShkZXYsIG9sZF9zdGF0ZSk7Cj4gIAo+ICAJZHJtX2F0b21pY19o
ZWxwZXJfY29tbWl0X2h3X2RvbmUob2xkX3N0YXRlKTsKCi0tIApSZWdhcmRzLAoKTGF1cmVudCBQ
aW5jaGFydApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpk
cmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
