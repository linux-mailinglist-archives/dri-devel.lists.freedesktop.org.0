Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BFB42298255
	for <lists+dri-devel@lfdr.de>; Sun, 25 Oct 2020 16:41:31 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F27AD6E9D8;
	Sun, 25 Oct 2020 15:41:15 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ej1-x642.google.com (mail-ej1-x642.google.com
 [IPv6:2a00:1450:4864:20::642])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 193E36E9CE
 for <dri-devel@lists.freedesktop.org>; Sun, 25 Oct 2020 15:41:10 +0000 (UTC)
Received: by mail-ej1-x642.google.com with SMTP id p9so9885202eji.4
 for <dri-devel@lists.freedesktop.org>; Sun, 25 Oct 2020 08:41:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=RemRp6ja2OjhGDyMg/2ejn/fSvKh7RizAIo4oZpUva4=;
 b=XerUxL9cM+333ZSsVoMfeS6b0gWC9YQjIXtImAvB3nB1jzAx3aT6qve4zrm6B6Ym6o
 DHdHx8VRj/gQJ6or4Cxvz2wCK+qjTe+/aNFgBSY3wSO05hqdSEpLL2TEI0LUMeFwckn3
 /6aQB4NgLqRSV5c497A+LZdEdPCgpIw+WJDtZzxKQ9/setVRRKj4Bx4sAarxcbctmoVm
 Q8quLbpbNfh8ZCFap2ng3/cxAU9ysxXxjlajgKnwoi2tUfqWKl8M+zfSA5VmiqvhlCs9
 FKmizK/NUmcNRbjsQs+Fi9L3iMlKUL4vz6NYzGFkzfFONCZKNi/A/V4O0qM5EWdDfieS
 ZubA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=RemRp6ja2OjhGDyMg/2ejn/fSvKh7RizAIo4oZpUva4=;
 b=LqWMQXuz8f+JpEZX2EDIrPpDe85lXevccg6dqF/5OmMgPHUCUfOPXtr4Ubs+kXiCaL
 i8MyxSDcJY/AjXQEfIaUTmta70vQm+G55OpbnklJ3Ue1zj4fFKyS6NUvzEMdQ+5eNBzK
 UEJrbliRDN+tofYVKNLuHdRZMOuMo2GV+JfmCZ6JZbw2GLKelIkMKSXdY/oUzw4hMHWi
 gO7V00spsQ3wauRs8g2P/45nYUKX/XhkO0Sc5TGOnqS56QgH9EJjdxmdS2KF8FcDK41M
 3DKrCUQuqWxI1ovwCA2w0rIDp0Ht0Xj9TIdhK5hflpQ1mVF2UFGkSBPNyIaSIAN5uP35
 zo4w==
X-Gm-Message-State: AOAM530ekPKkc52mp+V/yBqwUhY1nx/y9OL5IGoCvxJXb00Hxkknbb7/
 WqoKiXpCPnO5pnQrAawlnAL3UBZ2DDM=
X-Google-Smtp-Source: ABdhPJzRzI5fTjNaYciPMrxrw6CU2lC2jufQ3nh3y9Fxh/JM36ye+L0EdkKciNsBv4lUvM8N13rlmA==
X-Received: by 2002:a17:906:1f53:: with SMTP id
 d19mr11579079ejk.255.1603640468691; 
 Sun, 25 Oct 2020 08:41:08 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:d13a:1a76:8d61:cf5c])
 by smtp.gmail.com with ESMTPSA id g8sm4141931ejp.73.2020.10.25.08.41.07
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Sun, 25 Oct 2020 08:41:08 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: Madhav.Chauhan@amd.com,
	dri-devel@lists.freedesktop.org
Subject: [PATCH 06/13] drm/ttm: wire up the new pool as default one
Date: Sun, 25 Oct 2020 16:40:53 +0100
Message-Id: <20201025154100.16400-7-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20201025154100.16400-1-christian.koenig@amd.com>
References: <20201025154100.16400-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Ray.Huang@amd.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UHJvdmlkZSB0aGUgbmVjZXNzYXJ5IHBhcmFtZXRlcnMgYnkgYWxsIGRyaXZlcnMgYW5kIHVzZSB0
aGUgbmV3IHBvb2wgYWxsb2MKd2hlbiBubyBkcml2ZXIgc3BlY2lmaWMgZnVuY3Rpb24gaXMgcHJv
dmlkZWQuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmln
QGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jIHwg
IDQgKystLQogZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYyAgIHwgIDQgKyst
LQogZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV90dG0uYyAgIHwgMTQgKysrKysrKysr
LS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3R0bS5jICAgICAgICAgICB8ICA1ICsrLS0t
CiBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90dG0uYyAgICAgfCAgNCArKy0tCiBkcml2
ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jICAgICAgICAgICAgfCAgOCArKysrKystLQogZHJpdmVy
cy9ncHUvZHJtL3R0bS90dG1fdHQuYyAgICAgICAgICAgIHwgIDUgKystLS0KIGRyaXZlcnMvZ3B1
L2RybS92bXdnZngvdm13Z2Z4X2Rydi5jICAgICB8ICA1ICsrKy0tCiBpbmNsdWRlL2RybS90dG0v
dHRtX2JvX2RyaXZlci5oICAgICAgICAgfCAxMSArKysrKysrLS0tLQogOSBmaWxlcyBjaGFuZ2Vk
LCAzNSBpbnNlcnRpb25zKCspLCAyNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfdHRtLmMKaW5kZXggYmVhY2QwMDIyMWQ4Li4zNDk0NDkyNzgzOGUgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKQEAgLTE5MTQsMTAgKzE5MTQsMTAg
QEAgaW50IGFtZGdwdV90dG1faW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKIAltdXRl
eF9pbml0KCZhZGV2LT5tbWFuLmd0dF93aW5kb3dfbG9jayk7CiAKIAkvKiBObyBvdGhlcnMgdXNl
ciBvZiBhZGRyZXNzIHNwYWNlIHNvIHNldCBpdCB0byAwICovCi0JciA9IHR0bV9ib19kZXZpY2Vf
aW5pdCgmYWRldi0+bW1hbi5iZGV2LAotCQkJICAgICAgICZhbWRncHVfYm9fZHJpdmVyLAorCXIg
PSB0dG1fYm9fZGV2aWNlX2luaXQoJmFkZXYtPm1tYW4uYmRldiwgJmFtZGdwdV9ib19kcml2ZXIs
IGFkZXYtPmRldiwKIAkJCSAgICAgICBhZGV2X3RvX2RybShhZGV2KS0+YW5vbl9pbm9kZS0+aV9t
YXBwaW5nLAogCQkJICAgICAgIGFkZXZfdG9fZHJtKGFkZXYpLT52bWFfb2Zmc2V0X21hbmFnZXIs
CisJCQkgICAgICAgYWRldi0+bmVlZF9zd2lvdGxiLAogCQkJICAgICAgIGRtYV9hZGRyZXNzaW5n
X2xpbWl0ZWQoYWRldi0+ZGV2KSk7CiAJaWYgKHIpIHsKIAkJRFJNX0VSUk9SKCJmYWlsZWQgaW5p
dGlhbGl6aW5nIGJ1ZmZlciBvYmplY3QgZHJpdmVyKCVkKS5cbiIsIHIpOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9k
cm1fZ2VtX3ZyYW1faGVscGVyLmMKaW5kZXggOWRhODIzZWIwZWRkLi40NDQyYzljMjNmZjIgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3ZyYW1faGVscGVyLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2RybV9nZW1fdnJhbV9oZWxwZXIuYwpAQCAtMTA0NSwxMCArMTA0NSwxMCBA
QCBzdGF0aWMgaW50IGRybV92cmFtX21tX2luaXQoc3RydWN0IGRybV92cmFtX21tICp2bW0sIHN0
cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJdm1tLT52cmFtX2Jhc2UgPSB2cmFtX2Jhc2U7CiAJdm1t
LT52cmFtX3NpemUgPSB2cmFtX3NpemU7CiAKLQlyZXQgPSB0dG1fYm9fZGV2aWNlX2luaXQoJnZt
bS0+YmRldiwgJmJvX2RyaXZlciwKKwlyZXQgPSB0dG1fYm9fZGV2aWNlX2luaXQoJnZtbS0+YmRl
diwgJmJvX2RyaXZlciwgdm1tLT5kZXYsCiAJCQkJIGRldi0+YW5vbl9pbm9kZS0+aV9tYXBwaW5n
LAogCQkJCSBkZXYtPnZtYV9vZmZzZXRfbWFuYWdlciwKLQkJCQkgdHJ1ZSk7CisJCQkJIGZhbHNl
LCB0cnVlKTsKIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3R0bS5jIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUv
bm91dmVhdV90dG0uYwppbmRleCAwNTkyZWQ2ZWFhZDEuLmQ2OTZkODgyYzllYiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV90dG0uYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vbm91dmVhdS9ub3V2ZWF1X3R0bS5jCkBAIC0yODEsNiArMjgxLDcgQEAgbm91dmVhdV90
dG1faW5pdChzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRybSkKIAlzdHJ1Y3QgbnZrbV9wY2kgKnBjaSA9
IGRldmljZS0+cGNpOwogCXN0cnVjdCBudmlmX21tdSAqbW11ID0gJmRybS0+Y2xpZW50Lm1tdTsK
IAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gZHJtLT5kZXY7CisJYm9vbCBuZWVkX3N3aW90bGIg
PSBmYWxzZTsKIAlpbnQgdHlwZWksIHJldDsKIAogCXJldCA9IG5vdXZlYXVfdHRtX2luaXRfaG9z
dChkcm0sIDApOwpAQCAtMzE1LDExICszMTYsMTQgQEAgbm91dmVhdV90dG1faW5pdChzdHJ1Y3Qg
bm91dmVhdV9kcm0gKmRybSkKIAkJZHJtLT5hZ3AuY21hID0gcGNpLT5hZ3AuY21hOwogCX0KIAot
CXJldCA9IHR0bV9ib19kZXZpY2VfaW5pdCgmZHJtLT50dG0uYmRldiwKLQkJCQkgICZub3V2ZWF1
X2JvX2RyaXZlciwKLQkJCQkgIGRldi0+YW5vbl9pbm9kZS0+aV9tYXBwaW5nLAotCQkJCSAgZGV2
LT52bWFfb2Zmc2V0X21hbmFnZXIsCi0JCQkJICBkcm0tPmNsaWVudC5tbXUuZG1hYml0cyA8PSAz
MiA/IHRydWUgOiBmYWxzZSk7CisjaWYgSVNfRU5BQkxFRChDT05GSUdfU1dJT1RMQikgJiYgSVNf
RU5BQkxFRChDT05GSUdfWDg2KQorCW5lZWRfc3dpb3RsYiA9ICEhc3dpb3RsYl9ucl90YmwoKTsK
KyNlbmRpZgorCisJcmV0ID0gdHRtX2JvX2RldmljZV9pbml0KCZkcm0tPnR0bS5iZGV2LCAmbm91
dmVhdV9ib19kcml2ZXIsCisJCQkJIGRybS0+ZGV2LT5kZXYsIGRldi0+YW5vbl9pbm9kZS0+aV9t
YXBwaW5nLAorCQkJCSBkZXYtPnZtYV9vZmZzZXRfbWFuYWdlciwgbmVlZF9zd2lvdGxiLAorCQkJ
CSBkcm0tPmNsaWVudC5tbXUuZG1hYml0cyA8PSAzMik7CiAJaWYgKHJldCkgewogCQlOVl9FUlJP
Uihkcm0sICJlcnJvciBpbml0aWFsaXNpbmcgYm8gZHJpdmVyLCAlZFxuIiwgcmV0KTsKIAkJcmV0
dXJuIHJldDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3R0bS5jIGIvZHJp
dmVycy9ncHUvZHJtL3F4bC9xeGxfdHRtLmMKaW5kZXggOTYwOWVlYjUyODIxLi5kOGVjZmI4YjMx
OTMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3R0bS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9xeGwvcXhsX3R0bS5jCkBAIC0xOTQsMTEgKzE5NCwxMCBAQCBpbnQgcXhsX3R0
bV9pbml0KHN0cnVjdCBxeGxfZGV2aWNlICpxZGV2KQogCWludCBudW1faW9fcGFnZXM7IC8qICE9
IHJvbS0+bnVtX2lvX3BhZ2VzLCB3ZSBpbmNsdWRlIHN1cmZhY2UwICovCiAKIAkvKiBObyBvdGhl
cnMgdXNlciBvZiBhZGRyZXNzIHNwYWNlIHNvIHNldCBpdCB0byAwICovCi0JciA9IHR0bV9ib19k
ZXZpY2VfaW5pdCgmcWRldi0+bW1hbi5iZGV2LAotCQkJICAgICAgICZxeGxfYm9fZHJpdmVyLAor
CXIgPSB0dG1fYm9fZGV2aWNlX2luaXQoJnFkZXYtPm1tYW4uYmRldiwgJnF4bF9ib19kcml2ZXIs
IE5VTEwsCiAJCQkgICAgICAgcWRldi0+ZGRldi5hbm9uX2lub2RlLT5pX21hcHBpbmcsCiAJCQkg
ICAgICAgcWRldi0+ZGRldi52bWFfb2Zmc2V0X21hbmFnZXIsCi0JCQkgICAgICAgZmFsc2UpOwor
CQkJICAgICAgIGZhbHNlLCBmYWxzZSk7CiAJaWYgKHIpIHsKIAkJRFJNX0VSUk9SKCJmYWlsZWQg
aW5pdGlhbGl6aW5nIGJ1ZmZlciBvYmplY3QgZHJpdmVyKCVkKS5cbiIsIHIpOwogCQlyZXR1cm4g
cjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jIGIvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMKaW5kZXggMGE2ZDdlYTg0N2RiLi4xYWRk
MzkxODUxOWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jCkBAIC04NDYsMTAgKzg0
NiwxMCBAQCBpbnQgcmFkZW9uX3R0bV9pbml0KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2KQog
CWludCByOwogCiAJLyogTm8gb3RoZXJzIHVzZXIgb2YgYWRkcmVzcyBzcGFjZSBzbyBzZXQgaXQg
dG8gMCAqLwotCXIgPSB0dG1fYm9fZGV2aWNlX2luaXQoJnJkZXYtPm1tYW4uYmRldiwKLQkJCSAg
ICAgICAmcmFkZW9uX2JvX2RyaXZlciwKKwlyID0gdHRtX2JvX2RldmljZV9pbml0KCZyZGV2LT5t
bWFuLmJkZXYsICZyYWRlb25fYm9fZHJpdmVyLCByZGV2LT5kZXYsCiAJCQkgICAgICAgcmRldi0+
ZGRldi0+YW5vbl9pbm9kZS0+aV9tYXBwaW5nLAogCQkJICAgICAgIHJkZXYtPmRkZXYtPnZtYV9v
ZmZzZXRfbWFuYWdlciwKKwkJCSAgICAgICByZGV2LT5uZWVkX3N3aW90bGIsCiAJCQkgICAgICAg
ZG1hX2FkZHJlc3NpbmdfbGltaXRlZCgmcmRldi0+cGRldi0+ZGV2KSk7CiAJaWYgKHIpIHsKIAkJ
RFJNX0VSUk9SKCJmYWlsZWQgaW5pdGlhbGl6aW5nIGJ1ZmZlciBvYmplY3QgZHJpdmVyKCVkKS5c
biIsIHIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYyBiL2RyaXZl
cnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKaW5kZXggNDBjNzJhMGY5MzI1Li5lOWY5MWNmY2U1ZTkg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL3R0bS90dG1fYm8uYwpAQCAtMTI4Myw2ICsxMjgzLDggQEAgaW50IHR0bV9ib19kZXZp
Y2VfcmVsZWFzZShzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldikKIAkJCXByX2RlYnVnKCJTd2Fw
IGxpc3QgJWQgd2FzIGNsZWFuXG4iLCBpKTsKIAlzcGluX3VubG9jaygmZ2xvYi0+bHJ1X2xvY2sp
OwogCisJdHRtX3Bvb2xfZmluaSgmYmRldi0+cG9vbCk7CisKIAlpZiAoIXJldCkKIAkJdHRtX2Jv
X2dsb2JhbF9yZWxlYXNlKCk7CiAKQEAgLTEzMDcsOSArMTMwOSwxMCBAQCBzdGF0aWMgdm9pZCB0
dG1fYm9faW5pdF9zeXNtYW4oc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYpCiAKIGludCB0dG1f
Ym9fZGV2aWNlX2luaXQoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCiAJCSAgICAgICBzdHJ1
Y3QgdHRtX2JvX2RyaXZlciAqZHJpdmVyLAorCQkgICAgICAgc3RydWN0IGRldmljZSAqZGV2LAog
CQkgICAgICAgc3RydWN0IGFkZHJlc3Nfc3BhY2UgKm1hcHBpbmcsCiAJCSAgICAgICBzdHJ1Y3Qg
ZHJtX3ZtYV9vZmZzZXRfbWFuYWdlciAqdm1hX21hbmFnZXIsCi0JCSAgICAgICBib29sIG5lZWRf
ZG1hMzIpCisJCSAgICAgICBib29sIHVzZV9kbWFfYWxsb2MsIGJvb2wgdXNlX2RtYTMyKQogewog
CXN0cnVjdCB0dG1fYm9fZ2xvYmFsICpnbG9iID0gJnR0bV9ib19nbG9iOwogCWludCByZXQ7CkBA
IC0xMzI0LDEyICsxMzI3LDEzIEBAIGludCB0dG1fYm9fZGV2aWNlX2luaXQoc3RydWN0IHR0bV9i
b19kZXZpY2UgKmJkZXYsCiAJYmRldi0+ZHJpdmVyID0gZHJpdmVyOwogCiAJdHRtX2JvX2luaXRf
c3lzbWFuKGJkZXYpOworCXR0bV9wb29sX2luaXQoJmJkZXYtPnBvb2wsIGRldiwgdXNlX2RtYV9h
bGxvYywgdXNlX2RtYTMyKTsKIAogCWJkZXYtPnZtYV9tYW5hZ2VyID0gdm1hX21hbmFnZXI7CiAJ
SU5JVF9ERUxBWUVEX1dPUksoJmJkZXYtPndxLCB0dG1fYm9fZGVsYXllZF93b3JrcXVldWUpOwog
CUlOSVRfTElTVF9IRUFEKCZiZGV2LT5kZGVzdHJveSk7CiAJYmRldi0+ZGV2X21hcHBpbmcgPSBt
YXBwaW5nOwotCWJkZXYtPm5lZWRfZG1hMzIgPSBuZWVkX2RtYTMyOworCWJkZXYtPm5lZWRfZG1h
MzIgPSB1c2VfZG1hMzI7CiAJbXV0ZXhfbG9jaygmdHRtX2dsb2JhbF9tdXRleCk7CiAJbGlzdF9h
ZGRfdGFpbCgmYmRldi0+ZGV2aWNlX2xpc3QsICZnbG9iLT5kZXZpY2VfbGlzdCk7CiAJbXV0ZXhf
dW5sb2NrKCZ0dG1fZ2xvYmFsX211dGV4KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90
dG0vdHRtX3R0LmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90dC5jCmluZGV4IDY1YzQyNTRl
ZWE1Yy4uOTAwNTQyODBjZDhmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90
dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX3R0LmMKQEAgLTM3LDcgKzM3LDYgQEAK
ICNpbmNsdWRlIDxsaW51eC9maWxlLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9jYWNoZS5oPgogI2lu
Y2x1ZGUgPGRybS90dG0vdHRtX2JvX2RyaXZlci5oPgotI2luY2x1ZGUgPGRybS90dG0vdHRtX3Bh
Z2VfYWxsb2MuaD4KIAogLyoqCiAgKiBBbGxvY2F0ZXMgYSB0dG0gc3RydWN0dXJlIGZvciB0aGUg
Z2l2ZW4gQk8uCkBAIC0zMjEsNyArMzIwLDcgQEAgaW50IHR0bV90dF9wb3B1bGF0ZShzdHJ1Y3Qg
dHRtX2JvX2RldmljZSAqYmRldiwKIAlpZiAoYmRldi0+ZHJpdmVyLT50dG1fdHRfcG9wdWxhdGUp
CiAJCXJldCA9IGJkZXYtPmRyaXZlci0+dHRtX3R0X3BvcHVsYXRlKGJkZXYsIHR0bSwgY3R4KTsK
IAllbHNlCi0JCXJldCA9IHR0bV9wb29sX3BvcHVsYXRlKHR0bSwgY3R4KTsKKwkJcmV0ID0gdHRt
X3Bvb2xfYWxsb2MoJmJkZXYtPnBvb2wsIHR0bSwgY3R4KTsKIAlpZiAocmV0KQogCQlyZXR1cm4g
cmV0OwogCkBAIC0zNjMsNiArMzYyLDYgQEAgdm9pZCB0dG1fdHRfdW5wb3B1bGF0ZShzdHJ1Y3Qg
dHRtX2JvX2RldmljZSAqYmRldiwKIAlpZiAoYmRldi0+ZHJpdmVyLT50dG1fdHRfdW5wb3B1bGF0
ZSkKIAkJYmRldi0+ZHJpdmVyLT50dG1fdHRfdW5wb3B1bGF0ZShiZGV2LCB0dG0pOwogCWVsc2UK
LQkJdHRtX3Bvb2xfdW5wb3B1bGF0ZSh0dG0pOworCQl0dG1fcG9vbF9mcmVlKCZiZGV2LT5wb29s
LCB0dG0pOwogCXR0bS0+cGFnZV9mbGFncyAmPSB+VFRNX1BBR0VfRkxBR19QUklWX1BPUFVMQVRF
RDsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2Rydi5jIGIv
ZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfZHJ2LmMKaW5kZXggNDg2MDM3MDc0MGUwLi43
YmQxYmUyNmFmZTQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2Ry
di5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2Rydi5jCkBAIC04NzgsMTAg
Kzg3OCwxMSBAQCBzdGF0aWMgaW50IHZtd19kcml2ZXJfbG9hZChzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LCB1bnNpZ25lZCBsb25nIGNoaXBzZXQpCiAJZHJtX3ZtYV9vZmZzZXRfbWFuYWdlcl9pbml0
KCZkZXZfcHJpdi0+dm1hX21hbmFnZXIsCiAJCQkJICAgIERSTV9GSUxFX1BBR0VfT0ZGU0VUX1NU
QVJULAogCQkJCSAgICBEUk1fRklMRV9QQUdFX09GRlNFVF9TSVpFKTsKLQlyZXQgPSB0dG1fYm9f
ZGV2aWNlX2luaXQoJmRldl9wcml2LT5iZGV2LAotCQkJCSAmdm13X2JvX2RyaXZlciwKKwlyZXQg
PSB0dG1fYm9fZGV2aWNlX2luaXQoJmRldl9wcml2LT5iZGV2LCAmdm13X2JvX2RyaXZlciwKKwkJ
CQkgZGV2X3ByaXYtPmRldi0+ZGV2LAogCQkJCSBkZXYtPmFub25faW5vZGUtPmlfbWFwcGluZywK
IAkJCQkgJmRldl9wcml2LT52bWFfbWFuYWdlciwKKwkJCQkgZGV2X3ByaXYtPm1hcF9tb2RlID09
IHZtd19kbWFfYWxsb2NfY29oZXJlbnQsCiAJCQkJIGZhbHNlKTsKIAlpZiAodW5saWtlbHkocmV0
ICE9IDApKSB7CiAJCURSTV9FUlJPUigiRmFpbGVkIGluaXRpYWxpemluZyBUVE0gYnVmZmVyIG9i
amVjdCBkcml2ZXIuXG4iKTsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJp
dmVyLmggYi9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2RyaXZlci5oCmluZGV4IDI5ZjZhMWQxYzg1
My4uNDVhZTg3NjQwOTA5IDEwMDY0NAotLS0gYS9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2RyaXZl
ci5oCisrKyBiL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJpdmVyLmgKQEAgLTQyLDYgKzQyLDcg
QEAKICNpbmNsdWRlICJ0dG1fbW9kdWxlLmgiCiAjaW5jbHVkZSAidHRtX3BsYWNlbWVudC5oIgog
I2luY2x1ZGUgInR0bV90dC5oIgorI2luY2x1ZGUgInR0bV9wb29sLmgiCiAKIC8qKgogICogc3Ry
dWN0IHR0bV9ib19kcml2ZXIKQEAgLTI5NSw2ICsyOTYsNyBAQCBzdHJ1Y3QgdHRtX2JvX2Rldmlj
ZSB7CiAJICogUHJvdGVjdGVkIGJ5IGludGVybmFsIGxvY2tzLgogCSAqLwogCXN0cnVjdCBkcm1f
dm1hX29mZnNldF9tYW5hZ2VyICp2bWFfbWFuYWdlcjsKKwlzdHJ1Y3QgdHRtX3Bvb2wgcG9vbDsK
IAogCS8qCiAJICogUHJvdGVjdGVkIGJ5IHRoZSBnbG9iYWw6bHJ1IGxvY2suCkBAIC0zOTUsMTEg
KzM5NywxMSBAQCBpbnQgdHRtX2JvX2RldmljZV9yZWxlYXNlKHN0cnVjdCB0dG1fYm9fZGV2aWNl
ICpiZGV2KTsKICAqIEBiZGV2OiBBIHBvaW50ZXIgdG8gYSBzdHJ1Y3QgdHRtX2JvX2RldmljZSB0
byBpbml0aWFsaXplLgogICogQGdsb2I6IEEgcG9pbnRlciB0byBhbiBpbml0aWFsaXplZCBzdHJ1
Y3QgdHRtX2JvX2dsb2JhbC4KICAqIEBkcml2ZXI6IEEgcG9pbnRlciB0byBhIHN0cnVjdCB0dG1f
Ym9fZHJpdmVyIHNldCB1cCBieSB0aGUgY2FsbGVyLgorICogQGRldjogVGhlIGNvcmUga2VybmVs
IGRldmljZSBwb2ludGVyIGZvciBETUEgbWFwcGluZ3MgYW5kIGFsbG9jYXRpb25zLgogICogQG1h
cHBpbmc6IFRoZSBhZGRyZXNzIHNwYWNlIHRvIHVzZSBmb3IgdGhpcyBiby4KICAqIEB2bWFfbWFu
YWdlcjogQSBwb2ludGVyIHRvIGEgdm1hIG1hbmFnZXIuCi0gKiBAZmlsZV9wYWdlX29mZnNldDog
T2Zmc2V0IGludG8gdGhlIGRldmljZSBhZGRyZXNzIHNwYWNlIHRoYXQgaXMgYXZhaWxhYmxlCi0g
KiBmb3IgYnVmZmVyIGRhdGEuIFRoaXMgZW5zdXJlcyBjb21wYXRpYmlsaXR5IHdpdGggb3RoZXIg
dXNlcnMgb2YgdGhlCi0gKiBhZGRyZXNzIHNwYWNlLgorICogQHVzZV9kbWFfYWxsb2M6IElmIGNv
aGVyZW50IERNQSBhbGxvY2F0aW9uIEFQSSBzaG91bGQgYmUgdXNlZC4KKyAqIEB1c2VfZG1hMzI6
IElmIHdlIHNob3VsZCB1c2UgR0ZQX0RNQTMyIGZvciBkZXZpY2UgbWVtb3J5IGFsbG9jYXRpb25z
LgogICoKICAqIEluaXRpYWxpemVzIGEgc3RydWN0IHR0bV9ib19kZXZpY2U6CiAgKiBSZXR1cm5z
OgpAQCAtNDA3LDkgKzQwOSwxMCBAQCBpbnQgdHRtX2JvX2RldmljZV9yZWxlYXNlKHN0cnVjdCB0
dG1fYm9fZGV2aWNlICpiZGV2KTsKICAqLwogaW50IHR0bV9ib19kZXZpY2VfaW5pdChzdHJ1Y3Qg
dHRtX2JvX2RldmljZSAqYmRldiwKIAkJICAgICAgIHN0cnVjdCB0dG1fYm9fZHJpdmVyICpkcml2
ZXIsCisJCSAgICAgICBzdHJ1Y3QgZGV2aWNlICpkZXYsCiAJCSAgICAgICBzdHJ1Y3QgYWRkcmVz
c19zcGFjZSAqbWFwcGluZywKIAkJICAgICAgIHN0cnVjdCBkcm1fdm1hX29mZnNldF9tYW5hZ2Vy
ICp2bWFfbWFuYWdlciwKLQkJICAgICAgIGJvb2wgbmVlZF9kbWEzMik7CisJCSAgICAgICBib29s
IHVzZV9kbWFfYWxsb2MsIGJvb2wgdXNlX2RtYTMyKTsKIAogLyoqCiAgKiB0dG1fYm9fdW5tYXBf
dmlydHVhbAotLSAKMi4xNy4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9k
cmktZGV2ZWwK
