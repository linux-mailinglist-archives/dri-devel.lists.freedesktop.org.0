Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9A6326A3BC7
	for <lists+dri-devel@lfdr.de>; Mon, 27 Feb 2023 08:41:07 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0380910E0EF;
	Mon, 27 Feb 2023 07:41:03 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp-out2.suse.de (smtp-out2.suse.de [IPv6:2001:67c:2178:6::1d])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 31AAE10E0EF
 for <dri-devel@lists.freedesktop.org>; Mon, 27 Feb 2023 07:41:01 +0000 (UTC)
Received: from imap2.suse-dmz.suse.de (imap2.suse-dmz.suse.de [192.168.254.74])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
 key-exchange X25519 server-signature ECDSA (P-521) server-digest SHA512)
 (No client certificate requested)
 by smtp-out2.suse.de (Postfix) with ESMTPS id E4E221F8D4;
 Mon, 27 Feb 2023 07:40:59 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=suse.de; s=susede2_rsa;
 t=1677483659; h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 in-reply-to:in-reply-to:references:references;
 bh=jjbK0Gln3oNGWCbOY45r+97hrkzfgcq4YZRBsdNUz+E=;
 b=j88o60kMDmOBFV/93ISjiv5UN9uANWr/Xk649i2YGXwNhn4H1IVqYil++l14rFYWgB4OMS
 dx+OZNpIMH8ySy9SK5539JTbzdxdCEsbr1UmXFqh3L0JGIcxnZ0B2KT9JqORwkEJxZPs/s
 nBLDn06zH0cXdB7yaqPAhqb6hVKXqqU=
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=suse.de;
 s=susede2_ed25519; t=1677483659;
 h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 in-reply-to:in-reply-to:references:references;
 bh=jjbK0Gln3oNGWCbOY45r+97hrkzfgcq4YZRBsdNUz+E=;
 b=bLn3WeFKcemsLsE58jzLZRvVInpvlPoTHjdwmI7Z21mtiSGGQIM09dtW7u+AkYqttxVR7n
 z9B+FjMgv3GYXzCQ==
Received: from imap2.suse-dmz.suse.de (imap2.suse-dmz.suse.de [192.168.254.74])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
 key-exchange X25519 server-signature ECDSA (P-521) server-digest SHA512)
 (No client certificate requested)
 by imap2.suse-dmz.suse.de (Postfix) with ESMTPS id C1DEB13A43;
 Mon, 27 Feb 2023 07:40:59 +0000 (UTC)
Received: from dovecot-director2.suse.de ([192.168.254.65])
 by imap2.suse-dmz.suse.de with ESMTPSA id ZzRlLote/GOPIAAAMHmgww
 (envelope-from <tzimmermann@suse.de>); Mon, 27 Feb 2023 07:40:59 +0000
Message-ID: <3ec277c6-a82b-ef83-ed2e-1c907c63c076@suse.de>
Date: Mon, 27 Feb 2023 08:40:59 +0100
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:102.0) Gecko/20100101
 Thunderbird/102.8.0
Subject: Re: [PATCH 2/7] drm/gma500: Move fbdev code into separate source file
To: Patrik Jakobsson <patrik.r.jakobsson@gmail.com>
References: <20230223121733.12549-1-tzimmermann@suse.de>
 <20230223121733.12549-3-tzimmermann@suse.de>
 <CAMeQTsbagTuPLZe7b6_wmNPp7N+T3k835u20kg6EQtSU0PeR0w@mail.gmail.com>
Content-Language: en-US
From: Thomas Zimmermann <tzimmermann@suse.de>
In-Reply-To: <CAMeQTsbagTuPLZe7b6_wmNPp7N+T3k835u20kg6EQtSU0PeR0w@mail.gmail.com>
Content-Type: multipart/signed; micalg=pgp-sha256;
 protocol="application/pgp-signature";
 boundary="------------8Xc5Tr8iD7MctE5X7xnC6mHI"
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--------------8Xc5Tr8iD7MctE5X7xnC6mHI
Content-Type: multipart/mixed; boundary="------------vAPxGIM7VVW3tcHA3g0iDY8b";
 protected-headers="v1"
From: Thomas Zimmermann <tzimmermann@suse.de>
To: Patrik Jakobsson <patrik.r.jakobsson@gmail.com>
Cc: airlied@gmail.com, daniel@ffwll.ch, dri-devel@lists.freedesktop.org
Message-ID: <3ec277c6-a82b-ef83-ed2e-1c907c63c076@suse.de>
Subject: Re: [PATCH 2/7] drm/gma500: Move fbdev code into separate source file
References: <20230223121733.12549-1-tzimmermann@suse.de>
 <20230223121733.12549-3-tzimmermann@suse.de>
 <CAMeQTsbagTuPLZe7b6_wmNPp7N+T3k835u20kg6EQtSU0PeR0w@mail.gmail.com>
In-Reply-To: <CAMeQTsbagTuPLZe7b6_wmNPp7N+T3k835u20kg6EQtSU0PeR0w@mail.gmail.com>

--------------vAPxGIM7VVW3tcHA3g0iDY8b
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64

SGkNCg0KQW0gMjcuMDIuMjMgdW0gMDg6MTAgc2NocmllYiBQYXRyaWsgSmFrb2Jzc29uOg0K
PiBPbiBUaHUsIEZlYiAyMywgMjAyMyBhdCAxOjE3IFBNIFRob21hcyBaaW1tZXJtYW5uIDx0
emltbWVybWFubkBzdXNlLmRlPiB3cm90ZToNCj4+DQo+PiBNb3ZlIHRoZSBmYmRldiBlbXVs
YXRpb24gZnJvbSBmcmFtZWJ1ZmZlci5jIGludG8gZmJkZXYuYy4gT25seSBidWlsZA0KPj4g
dGhlIHNvdXJjZSBjb2RlIGlmIHRoZSBLY29uZmlnIHN5bWJvbCBoYXMgYmVlbiBzZWxlY3Rl
ZC4gUmVtYWluaW5nIGluDQo+PiBmcmFtZWJ1ZmZlci5jIGlzIGdtYTUwMCdzIGNvZGUgZm9y
IERSTSBmcmFtYnVmZmVycy4gTm8gZnVuY3Rpb25hbA0KPj4gaGFuZ2VzLg0KPj4NCj4+IFNp
Z25lZC1vZmYtYnk6IFRob21hcyBaaW1tZXJtYW5uIDx0emltbWVybWFubkBzdXNlLmRlPg0K
PiANCj4gSGkgVGhvbWFzLCB0aGlzIHBhdGNoIGRvZXNuJ3QgYXBwbHkgdG8gZHJtLW1pc2Mu
IEkgc2VlbSB0byBiZSBtaXNzaW5nDQo+IGRybV9mYl9oZWxwZXJfcHJlcGFyZS91bnByZXBh
cmUoKS4NCg0KQ291bGQgYmUuIEknbSBvbiBkcm0tdGlwIGZvciBkZXZlbG9wbWVudC4gQW5k
IHdlJ3JlIGluIHRoZSBtZXJnZSB3aW5kb3csIA0Kd2hpY2ggaXMgYSBiYWQgdGltZSB0byBz
eW5jLWluZyB0cmVlcy4gTGV0IG1lIHNlZSBpZiBJIGNhbiBlYXNpeWwgDQpiYWNrbWVyZ2Ug
bm93LiBPciBvdGhlcndpc2UgdGhpbmdzIHNob3VsZCBzdGFiaWxpemUgYWZ0ZXIgLXJjMSBo
YXMgYmVlbiANCnRhZ2dlZC4NCg0KQmVzdCByZWdhcmRzDQpUaG9tYXMNCg0KPiANCj4gLVBh
dHJpaw0KPiANCj4+IC0tLQ0KPj4gICBkcml2ZXJzL2dwdS9kcm0vZ21hNTAwL01ha2VmaWxl
ICAgICAgfCAgIDEgKw0KPj4gICBkcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2ZiZGV2LmMgICAg
ICAgfCAzMjUgKysrKysrKysrKysrKysrKysrKysrKysrKysrDQo+PiAgIGRyaXZlcnMvZ3B1
L2RybS9nbWE1MDAvZnJhbWVidWZmZXIuYyB8IDMxOCArLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQ0KPj4gICBkcml2ZXJzL2dwdS9kcm0vZ21hNTAwL3BzYl9kcnYuaCAgICAgfCAgMTcg
KysNCj4+ICAgNCBmaWxlcyBjaGFuZ2VkLCAzNDYgaW5zZXJ0aW9ucygrKSwgMzE1IGRlbGV0
aW9ucygtKQ0KPj4gICBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2dtYTUw
MC9mYmRldi5jDQo+Pg0KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAv
TWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL01ha2VmaWxlDQo+PiBpbmRleCA2
MzAxMmJmMjQ4NWEuLjRmMzAyY2Q1ZTFhNiAxMDA2NDQNCj4+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9nbWE1MDAvTWFrZWZpbGUNCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAv
TWFrZWZpbGUNCj4+IEBAIC0zOCw1ICszOCw2IEBAIGdtYTUwMF9nZngteSArPSBcDQo+PiAg
ICAgICAgICAgIHBzYl9pcnEubw0KPj4NCj4+ICAgZ21hNTAwX2dmeC0kKENPTkZJR19BQ1BJ
KSArPSAgb3ByZWdpb24ubw0KPj4gK2dtYTUwMF9nZngtJChDT05GSUdfRFJNX0ZCREVWX0VN
VUxBVElPTikgKz0gIGZiZGV2Lm8NCj4+DQo+PiAgIG9iai0kKENPTkZJR19EUk1fR01BNTAw
KSArPSBnbWE1MDBfZ2Z4Lm8NCj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZ21h
NTAwL2ZiZGV2LmMgYi9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2ZiZGV2LmMNCj4+IG5ldyBm
aWxlIG1vZGUgMTAwNjQ0DQo+PiBpbmRleCAwMDAwMDAwMDAwMDAuLjljZTc2YjExZDI1Ng0K
Pj4gLS0tIC9kZXYvbnVsbA0KPj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9mYmRl
di5jDQo+PiBAQCAtMCwwICsxLDMyNSBAQA0KPj4gKy8vIFNQRFgtTGljZW5zZS1JZGVudGlm
aWVyOiBHUEwtMi4wLW9ubHkNCj4+ICsvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCj4+ICsgKiBD
b3B5cmlnaHQgKGMpIDIwMDctMjAxMSwgSW50ZWwgQ29ycG9yYXRpb24uDQo+PiArICogQWxs
IFJpZ2h0cyBSZXNlcnZlZC4NCj4+ICsgKg0KPj4gKyAqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8N
Cj4+ICsNCj4+ICsjaW5jbHVkZSA8bGludXgvcGZuX3QuaD4NCj4+ICsNCj4+ICsjaW5jbHVk
ZSA8ZHJtL2RybV9jcnRjX2hlbHBlci5oPg0KPj4gKyNpbmNsdWRlIDxkcm0vZHJtX2ZiX2hl
bHBlci5oPg0KPj4gKyNpbmNsdWRlIDxkcm0vZHJtX2ZyYW1lYnVmZmVyLmg+DQo+PiArDQo+
PiArI2luY2x1ZGUgImdlbS5oIg0KPj4gKyNpbmNsdWRlICJwc2JfZHJ2LmgiDQo+PiArDQo+
PiArLyoNCj4+ICsgKiBWTSBhcmVhIHN0cnVjdA0KPj4gKyAqLw0KPj4gKw0KPj4gK3N0YXRp
YyB2bV9mYXVsdF90IHBzYmZiX3ZtX2ZhdWx0KHN0cnVjdCB2bV9mYXVsdCAqdm1mKQ0KPj4g
K3sNCj4+ICsgICAgICAgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEgPSB2bWYtPnZtYTsN
Cj4+ICsgICAgICAgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIgPSB2bWEtPnZtX3ByaXZh
dGVfZGF0YTsNCj4+ICsgICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGZiLT5kZXY7
DQo+PiArICAgICAgIHN0cnVjdCBkcm1fcHNiX3ByaXZhdGUgKmRldl9wcml2ID0gdG9fZHJt
X3BzYl9wcml2YXRlKGRldik7DQo+PiArICAgICAgIHN0cnVjdCBwc2JfZ2VtX29iamVjdCAq
cG9iaiA9IHRvX3BzYl9nZW1fb2JqZWN0KGZiLT5vYmpbMF0pOw0KPj4gKyAgICAgICBpbnQg
cGFnZV9udW07DQo+PiArICAgICAgIGludCBpOw0KPj4gKyAgICAgICB1bnNpZ25lZCBsb25n
IGFkZHJlc3M7DQo+PiArICAgICAgIHZtX2ZhdWx0X3QgcmV0ID0gVk1fRkFVTFRfU0lHQlVT
Ow0KPj4gKyAgICAgICB1bnNpZ25lZCBsb25nIHBmbjsNCj4+ICsgICAgICAgdW5zaWduZWQg
bG9uZyBwaHlzX2FkZHIgPSAodW5zaWduZWQgbG9uZylkZXZfcHJpdi0+c3RvbGVuX2Jhc2Ug
KyBwb2JqLT5vZmZzZXQ7DQo+PiArDQo+PiArICAgICAgIHBhZ2VfbnVtID0gdm1hX3BhZ2Vz
KHZtYSk7DQo+PiArICAgICAgIGFkZHJlc3MgPSB2bWYtPmFkZHJlc3MgLSAodm1mLT5wZ29m
ZiA8PCBQQUdFX1NISUZUKTsNCj4+ICsNCj4+ICsgICAgICAgdm1hLT52bV9wYWdlX3Byb3Qg
PSBwZ3Byb3Rfbm9uY2FjaGVkKHZtYS0+dm1fcGFnZV9wcm90KTsNCj4+ICsNCj4+ICsgICAg
ICAgZm9yIChpID0gMDsgaSA8IHBhZ2VfbnVtOyBpKyspIHsNCj4+ICsgICAgICAgICAgICAg
ICBwZm4gPSAocGh5c19hZGRyID4+IFBBR0VfU0hJRlQpOw0KPj4gKw0KPj4gKyAgICAgICAg
ICAgICAgIHJldCA9IHZtZl9pbnNlcnRfbWl4ZWQodm1hLCBhZGRyZXNzLCBfX3Bmbl90b19w
Zm5fdChwZm4sIFBGTl9ERVYpKTsNCj4+ICsgICAgICAgICAgICAgICBpZiAodW5saWtlbHko
cmV0ICYgVk1fRkFVTFRfRVJST1IpKQ0KPj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJl
YWs7DQo+PiArICAgICAgICAgICAgICAgYWRkcmVzcyArPSBQQUdFX1NJWkU7DQo+PiArICAg
ICAgICAgICAgICAgcGh5c19hZGRyICs9IFBBR0VfU0laRTsNCj4+ICsgICAgICAgfQ0KPj4g
KyAgICAgICByZXR1cm4gcmV0Ow0KPj4gK30NCj4+ICsNCj4+ICtzdGF0aWMgdm9pZCBwc2Jm
Yl92bV9vcGVuKHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hKQ0KPj4gK3sgfQ0KPj4gKw0K
Pj4gK3N0YXRpYyB2b2lkIHBzYmZiX3ZtX2Nsb3NlKHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAq
dm1hKQ0KPj4gK3sgfQ0KPj4gKw0KPj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgdm1fb3BlcmF0
aW9uc19zdHJ1Y3QgcHNiZmJfdm1fb3BzID0gew0KPj4gKyAgICAgICAuZmF1bHQgID0gcHNi
ZmJfdm1fZmF1bHQsDQo+PiArICAgICAgIC5vcGVuICAgPSBwc2JmYl92bV9vcGVuLA0KPj4g
KyAgICAgICAuY2xvc2UgID0gcHNiZmJfdm1fY2xvc2UNCj4+ICt9Ow0KPj4gKw0KPj4gKy8q
DQo+PiArICogc3RydWN0IGZiX29wcw0KPj4gKyAqLw0KPj4gKw0KPj4gKyNkZWZpbmUgQ01B
UF9UT0hXKF92YWwsIF93aWR0aCkgKCgoKF92YWwpIDw8IChfd2lkdGgpKSArIDB4N0ZGRiAt
IChfdmFsKSkgPj4gMTYpDQo+PiArDQo+PiArc3RhdGljIGludCBwc2JmYl9zZXRjb2xyZWco
dW5zaWduZWQgaW50IHJlZ25vLA0KPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgdW5z
aWduZWQgaW50IHJlZCwgdW5zaWduZWQgaW50IGdyZWVuLA0KPj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgdW5zaWduZWQgaW50IGJsdWUsIHVuc2lnbmVkIGludCB0cmFuc3AsDQo+
PiArICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZmJfaW5mbyAqaW5mbykNCj4+
ICt7DQo+PiArICAgICAgIHN0cnVjdCBkcm1fZmJfaGVscGVyICpmYl9oZWxwZXIgPSBpbmZv
LT5wYXI7DQo+PiArICAgICAgIHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0gZmJfaGVs
cGVyLT5mYjsNCj4+ICsgICAgICAgdWludDMyX3QgdjsNCj4+ICsNCj4+ICsgICAgICAgaWYg
KCFmYikNCj4+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsNCj4+ICsNCj4+ICsg
ICAgICAgaWYgKHJlZ25vID4gMjU1KQ0KPj4gKyAgICAgICAgICAgICAgIHJldHVybiAxOw0K
Pj4gKw0KPj4gKyAgICAgICByZWQgPSBDTUFQX1RPSFcocmVkLCBpbmZvLT52YXIucmVkLmxl
bmd0aCk7DQo+PiArICAgICAgIGJsdWUgPSBDTUFQX1RPSFcoYmx1ZSwgaW5mby0+dmFyLmJs
dWUubGVuZ3RoKTsNCj4+ICsgICAgICAgZ3JlZW4gPSBDTUFQX1RPSFcoZ3JlZW4sIGluZm8t
PnZhci5ncmVlbi5sZW5ndGgpOw0KPj4gKyAgICAgICB0cmFuc3AgPSBDTUFQX1RPSFcodHJh
bnNwLCBpbmZvLT52YXIudHJhbnNwLmxlbmd0aCk7DQo+PiArDQo+PiArICAgICAgIHYgPSAo
cmVkIDw8IGluZm8tPnZhci5yZWQub2Zmc2V0KSB8DQo+PiArICAgICAgICAgICAoZ3JlZW4g
PDwgaW5mby0+dmFyLmdyZWVuLm9mZnNldCkgfA0KPj4gKyAgICAgICAgICAgKGJsdWUgPDwg
aW5mby0+dmFyLmJsdWUub2Zmc2V0KSB8DQo+PiArICAgICAgICAgICAodHJhbnNwIDw8IGlu
Zm8tPnZhci50cmFuc3Aub2Zmc2V0KTsNCj4+ICsNCj4+ICsgICAgICAgaWYgKHJlZ25vIDwg
MTYpIHsNCj4+ICsgICAgICAgICAgICAgICBzd2l0Y2ggKGZiLT5mb3JtYXQtPmNwcFswXSAq
IDgpIHsNCj4+ICsgICAgICAgICAgICAgICBjYXNlIDE2Og0KPj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgKCh1aW50MzJfdCAqKSBpbmZvLT5wc2V1ZG9fcGFsZXR0ZSlbcmVnbm9dID0g
djsNCj4+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KPj4gKyAgICAgICAgICAg
ICAgIGNhc2UgMjQ6DQo+PiArICAgICAgICAgICAgICAgY2FzZSAzMjoNCj4+ICsgICAgICAg
ICAgICAgICAgICAgICAgICgodWludDMyX3QgKikgaW5mby0+cHNldWRvX3BhbGV0dGUpW3Jl
Z25vXSA9IHY7DQo+PiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCj4+ICsgICAg
ICAgICAgICAgICB9DQo+PiArICAgICAgIH0NCj4+ICsNCj4+ICsgICAgICAgcmV0dXJuIDA7
DQo+PiArfQ0KPj4gKw0KPj4gK3N0YXRpYyBpbnQgcHNiZmJfbW1hcChzdHJ1Y3QgZmJfaW5m
byAqaW5mbywgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpDQo+PiArew0KPj4gKyAgICAg
ICBzdHJ1Y3QgZHJtX2ZiX2hlbHBlciAqZmJfaGVscGVyID0gaW5mby0+cGFyOw0KPj4gKyAg
ICAgICBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiA9IGZiX2hlbHBlci0+ZmI7DQo+PiAr
DQo+PiArICAgICAgIGlmICh2bWEtPnZtX3Bnb2ZmICE9IDApDQo+PiArICAgICAgICAgICAg
ICAgcmV0dXJuIC1FSU5WQUw7DQo+PiArICAgICAgIGlmICh2bWEtPnZtX3Bnb2ZmID4gKH4w
VUwgPj4gUEFHRV9TSElGVCkpDQo+PiArICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7
DQo+PiArDQo+PiArICAgICAgIC8qDQo+PiArICAgICAgICAqIElmIHRoaXMgaXMgYSBHRU0g
b2JqZWN0IHRoZW4gaW5mby0+c2NyZWVuX2Jhc2UgaXMgdGhlIHZpcnR1YWwNCj4+ICsgICAg
ICAgICoga2VybmVsIHJlbWFwcGluZyBvZiB0aGUgb2JqZWN0LiBGSVhNRTogUmV2aWV3IGlm
IHRoaXMgaXMNCj4+ICsgICAgICAgICogc3VpdGFibGUgZm9yIG91ciBtbWFwIHdvcmsNCj4+
ICsgICAgICAgICovDQo+PiArICAgICAgIHZtYS0+dm1fb3BzID0gJnBzYmZiX3ZtX29wczsN
Cj4+ICsgICAgICAgdm1hLT52bV9wcml2YXRlX2RhdGEgPSAodm9pZCAqKWZiOw0KPj4gKyAg
ICAgICB2bWEtPnZtX2ZsYWdzIHw9IFZNX0lPIHwgVk1fTUlYRURNQVAgfCBWTV9ET05URVhQ
QU5EIHwgVk1fRE9OVERVTVA7DQo+PiArDQo+PiArICAgICAgIHJldHVybiAwOw0KPj4gK30N
Cj4+ICsNCj4+ICtzdGF0aWMgY29uc3Qgc3RydWN0IGZiX29wcyBwc2JmYl91bmFjY2VsX29w
cyA9IHsNCj4+ICsgICAgICAgLm93bmVyID0gVEhJU19NT0RVTEUsDQo+PiArICAgICAgIERS
TV9GQl9IRUxQRVJfREVGQVVMVF9PUFMsDQo+PiArICAgICAgIC5mYl9zZXRjb2xyZWcgPSBw
c2JmYl9zZXRjb2xyZWcsDQo+PiArICAgICAgIC5mYl9yZWFkID0gZHJtX2ZiX2hlbHBlcl9j
ZmJfcmVhZCwNCj4+ICsgICAgICAgLmZiX3dyaXRlID0gZHJtX2ZiX2hlbHBlcl9jZmJfd3Jp
dGUsDQo+PiArICAgICAgIC5mYl9maWxscmVjdCA9IGRybV9mYl9oZWxwZXJfY2ZiX2ZpbGxy
ZWN0LA0KPj4gKyAgICAgICAuZmJfY29weWFyZWEgPSBkcm1fZmJfaGVscGVyX2NmYl9jb3B5
YXJlYSwNCj4+ICsgICAgICAgLmZiX2ltYWdlYmxpdCA9IGRybV9mYl9oZWxwZXJfY2ZiX2lt
YWdlYmxpdCwNCj4+ICsgICAgICAgLmZiX21tYXAgPSBwc2JmYl9tbWFwLA0KPj4gK307DQo+
PiArDQo+PiArLyoNCj4+ICsgKiBzdHJ1Y3QgZHJtX2ZiX2hlbHBlcl9mdW5jcw0KPj4gKyAq
Lw0KPj4gKw0KPj4gK3N0YXRpYyBpbnQgcHNiZmJfY3JlYXRlKHN0cnVjdCBkcm1fZmJfaGVs
cGVyICpmYl9oZWxwZXIsDQo+PiArICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJt
X2ZiX2hlbHBlcl9zdXJmYWNlX3NpemUgKnNpemVzKQ0KPj4gK3sNCj4+ICsgICAgICAgc3Ry
dWN0IGRybV9kZXZpY2UgKmRldiA9IGZiX2hlbHBlci0+ZGV2Ow0KPj4gKyAgICAgICBzdHJ1
Y3QgZHJtX3BzYl9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2RybV9wc2JfcHJpdmF0ZShkZXYp
Ow0KPj4gKyAgICAgICBzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IHRvX3BjaV9kZXYoZGV2LT5k
ZXYpOw0KPj4gKyAgICAgICBzdHJ1Y3QgZmJfaW5mbyAqaW5mbzsNCj4+ICsgICAgICAgc3Ry
dWN0IGRybV9mcmFtZWJ1ZmZlciAqZmI7DQo+PiArICAgICAgIHN0cnVjdCBkcm1fbW9kZV9m
Yl9jbWQyIG1vZGVfY21kOw0KPj4gKyAgICAgICBpbnQgc2l6ZTsNCj4+ICsgICAgICAgaW50
IHJldDsNCj4+ICsgICAgICAgc3RydWN0IHBzYl9nZW1fb2JqZWN0ICpiYWNraW5nOw0KPj4g
KyAgICAgICBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iajsNCj4+ICsgICAgICAgdTMyIGJw
cCwgZGVwdGg7DQo+PiArDQo+PiArICAgICAgIG1vZGVfY21kLndpZHRoID0gc2l6ZXMtPnN1
cmZhY2Vfd2lkdGg7DQo+PiArICAgICAgIG1vZGVfY21kLmhlaWdodCA9IHNpemVzLT5zdXJm
YWNlX2hlaWdodDsNCj4+ICsgICAgICAgYnBwID0gc2l6ZXMtPnN1cmZhY2VfYnBwOw0KPj4g
KyAgICAgICBkZXB0aCA9IHNpemVzLT5zdXJmYWNlX2RlcHRoOw0KPj4gKw0KPj4gKyAgICAg
ICAvKiBObyAyNGJpdCBwYWNrZWQgKi8NCj4+ICsgICAgICAgaWYgKGJwcCA9PSAyNCkNCj4+
ICsgICAgICAgICAgICAgICBicHAgPSAzMjsNCj4+ICsNCj4+ICsgICAgICAgbW9kZV9jbWQu
cGl0Y2hlc1swXSA9IEFMSUdOKG1vZGVfY21kLndpZHRoICogRElWX1JPVU5EX1VQKGJwcCwg
OCksIDY0KTsNCj4+ICsNCj4+ICsgICAgICAgc2l6ZSA9IG1vZGVfY21kLnBpdGNoZXNbMF0g
KiBtb2RlX2NtZC5oZWlnaHQ7DQo+PiArICAgICAgIHNpemUgPSBBTElHTihzaXplLCBQQUdF
X1NJWkUpOw0KPj4gKw0KPj4gKyAgICAgICAvKiBBbGxvY2F0ZSB0aGUgZnJhbWVidWZmZXIg
aW4gdGhlIEdUVCB3aXRoIHN0b2xlbiBwYWdlIGJhY2tpbmcgKi8NCj4+ICsgICAgICAgYmFj
a2luZyA9IHBzYl9nZW1fY3JlYXRlKGRldiwgc2l6ZSwgImZiIiwgdHJ1ZSwgUEFHRV9TSVpF
KTsNCj4+ICsgICAgICAgaWYgKElTX0VSUihiYWNraW5nKSkNCj4+ICsgICAgICAgICAgICAg
ICByZXR1cm4gUFRSX0VSUihiYWNraW5nKTsNCj4+ICsgICAgICAgb2JqID0gJmJhY2tpbmct
PmJhc2U7DQo+PiArDQo+PiArICAgICAgIG1lbXNldChkZXZfcHJpdi0+dnJhbV9hZGRyICsg
YmFja2luZy0+b2Zmc2V0LCAwLCBzaXplKTsNCj4+ICsNCj4+ICsgICAgICAgaW5mbyA9IGRy
bV9mYl9oZWxwZXJfYWxsb2NfaW5mbyhmYl9oZWxwZXIpOw0KPj4gKyAgICAgICBpZiAoSVNf
RVJSKGluZm8pKSB7DQo+PiArICAgICAgICAgICAgICAgcmV0ID0gUFRSX0VSUihpbmZvKTsN
Cj4+ICsgICAgICAgICAgICAgICBnb3RvIGVycl9kcm1fZ2VtX29iamVjdF9wdXQ7DQo+PiAr
ICAgICAgIH0NCj4+ICsNCj4+ICsgICAgICAgbW9kZV9jbWQucGl4ZWxfZm9ybWF0ID0gZHJt
X21vZGVfbGVnYWN5X2ZiX2Zvcm1hdChicHAsIGRlcHRoKTsNCj4+ICsNCj4+ICsgICAgICAg
ZmIgPSBwc2JfZnJhbWVidWZmZXJfY3JlYXRlKGRldiwgJm1vZGVfY21kLCBvYmopOw0KPj4g
KyAgICAgICBpZiAoSVNfRVJSKGZiKSkgew0KPj4gKyAgICAgICAgICAgICAgIHJldCA9IFBU
Ul9FUlIoZmIpOw0KPj4gKyAgICAgICAgICAgICAgIGdvdG8gZXJyX2RybV9nZW1fb2JqZWN0
X3B1dDsNCj4+ICsgICAgICAgfQ0KPj4gKw0KPj4gKyAgICAgICBmYl9oZWxwZXItPmZiID0g
ZmI7DQo+PiArDQo+PiArICAgICAgIGluZm8tPmZib3BzID0gJnBzYmZiX3VuYWNjZWxfb3Bz
Ow0KPj4gKw0KPj4gKyAgICAgICBpbmZvLT5maXguc21lbV9zdGFydCA9IGRldl9wcml2LT5m
Yl9iYXNlOw0KPj4gKyAgICAgICBpbmZvLT5maXguc21lbV9sZW4gPSBzaXplOw0KPj4gKyAg
ICAgICBpbmZvLT5maXgueXdyYXBzdGVwID0gMDsNCj4+ICsgICAgICAgaW5mby0+Zml4Lnlw
YW5zdGVwID0gMDsNCj4+ICsNCj4+ICsgICAgICAgLyogQWNjZXNzZWQgc3RvbGVuIG1lbW9y
eSBkaXJlY3RseSAqLw0KPj4gKyAgICAgICBpbmZvLT5zY3JlZW5fYmFzZSA9IGRldl9wcml2
LT52cmFtX2FkZHIgKyBiYWNraW5nLT5vZmZzZXQ7DQo+PiArICAgICAgIGluZm8tPnNjcmVl
bl9zaXplID0gc2l6ZTsNCj4+ICsNCj4+ICsgICAgICAgZHJtX2ZiX2hlbHBlcl9maWxsX2lu
Zm8oaW5mbywgZmJfaGVscGVyLCBzaXplcyk7DQo+PiArDQo+PiArICAgICAgIGluZm8tPmZp
eC5tbWlvX3N0YXJ0ID0gcGNpX3Jlc291cmNlX3N0YXJ0KHBkZXYsIDApOw0KPj4gKyAgICAg
ICBpbmZvLT5maXgubW1pb19sZW4gPSBwY2lfcmVzb3VyY2VfbGVuKHBkZXYsIDApOw0KPj4g
Kw0KPj4gKyAgICAgICAvKiBVc2UgZGVmYXVsdCBzY3JhdGNoIHBpeG1hcCAoaW5mby0+cGl4
bWFwLmZsYWdzID0gRkJfUElYTUFQX1NZU1RFTSkgKi8NCj4+ICsNCj4+ICsgICAgICAgZGV2
X2RiZyhkZXYtPmRldiwgImFsbG9jYXRlZCAlZHglZCBmYlxuIiwgZmItPndpZHRoLCBmYi0+
aGVpZ2h0KTsNCj4+ICsNCj4+ICsgICAgICAgcmV0dXJuIDA7DQo+PiArDQo+PiArZXJyX2Ry
bV9nZW1fb2JqZWN0X3B1dDoNCj4+ICsgICAgICAgZHJtX2dlbV9vYmplY3RfcHV0KG9iaik7
DQo+PiArICAgICAgIHJldHVybiByZXQ7DQo+PiArfQ0KPj4gKw0KPj4gK3N0YXRpYyBpbnQg
cHNiZmJfcHJvYmUoc3RydWN0IGRybV9mYl9oZWxwZXIgKmZiX2hlbHBlciwNCj4+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRybV9mYl9oZWxwZXJfc3VyZmFj
ZV9zaXplICpzaXplcykNCj4+ICt7DQo+PiArICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYgPSBmYl9oZWxwZXItPmRldjsNCj4+ICsgICAgICAgc3RydWN0IGRybV9wc2JfcHJpdmF0
ZSAqZGV2X3ByaXYgPSB0b19kcm1fcHNiX3ByaXZhdGUoZGV2KTsNCj4+ICsgICAgICAgdW5z
aWduZWQgaW50IGZiX3NpemU7DQo+PiArICAgICAgIGludCBieXRlc3BwOw0KPj4gKw0KPj4g
KyAgICAgICBieXRlc3BwID0gc2l6ZXMtPnN1cmZhY2VfYnBwIC8gODsNCj4+ICsgICAgICAg
aWYgKGJ5dGVzcHAgPT0gMykgICAgICAgLyogbm8gMjRiaXQgcGFja2VkICovDQo+PiArICAg
ICAgICAgICAgICAgYnl0ZXNwcCA9IDQ7DQo+PiArDQo+PiArICAgICAgIC8qDQo+PiArICAg
ICAgICAqIElmIHRoZSBtb2RlIHdpbGwgbm90IGZpdCBpbiAzMmJpdCB0aGVuIHN3aXRjaCB0
byAxNmJpdCB0byBnZXQNCj4+ICsgICAgICAgICogYSBjb25zb2xlIG9uIGZ1bGwgcmVzb2x1
dGlvbi4gVGhlIFggbW9kZSBzZXR0aW5nIHNlcnZlciB3aWxsDQo+PiArICAgICAgICAqIGFs
bG9jYXRlIGl0cyBvd24gMzJiaXQgR0VNIGZyYW1lYnVmZmVyDQo+PiArICAgICAgICAqLw0K
Pj4gKyAgICAgICBmYl9zaXplID0gQUxJR04oc2l6ZXMtPnN1cmZhY2Vfd2lkdGggKiBieXRl
c3BwLCA2NCkgKg0KPj4gKyAgICAgICAgICAgICAgICAgc2l6ZXMtPnN1cmZhY2VfaGVpZ2h0
Ow0KPj4gKyAgICAgICBmYl9zaXplID0gQUxJR04oZmJfc2l6ZSwgUEFHRV9TSVpFKTsNCj4+
ICsNCj4+ICsgICAgICAgaWYgKGZiX3NpemUgPiBkZXZfcHJpdi0+dnJhbV9zdG9sZW5fc2l6
ZSkgew0KPj4gKyAgICAgICAgICAgICAgIHNpemVzLT5zdXJmYWNlX2JwcCA9IDE2Ow0KPj4g
KyAgICAgICAgICAgICAgIHNpemVzLT5zdXJmYWNlX2RlcHRoID0gMTY7DQo+PiArICAgICAg
IH0NCj4+ICsNCj4+ICsgICAgICAgcmV0dXJuIHBzYmZiX2NyZWF0ZShmYl9oZWxwZXIsIHNp
emVzKTsNCj4+ICt9DQo+PiArDQo+PiArc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZmJfaGVs
cGVyX2Z1bmNzIHBzYl9mYl9oZWxwZXJfZnVuY3MgPSB7DQo+PiArICAgICAgIC5mYl9wcm9i
ZSA9IHBzYmZiX3Byb2JlLA0KPj4gK307DQo+PiArDQo+PiArc3RhdGljIGludCBwc2JfZmJk
ZXZfZGVzdHJveShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LA0KPj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2ZiX2hlbHBlciAqZmJfaGVscGVyKQ0KPj4gK3sN
Cj4+ICsgICAgICAgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIgPSBmYl9oZWxwZXItPmZi
Ow0KPj4gKw0KPj4gKyAgICAgICBkcm1fZmJfaGVscGVyX3VucmVnaXN0ZXJfaW5mbyhmYl9o
ZWxwZXIpOw0KPj4gKw0KPj4gKyAgICAgICBkcm1fZmJfaGVscGVyX2ZpbmkoZmJfaGVscGVy
KTsNCj4+ICsgICAgICAgZHJtX2ZyYW1lYnVmZmVyX3VucmVnaXN0ZXJfcHJpdmF0ZShmYik7
DQo+PiArICAgICAgIGRybV9mcmFtZWJ1ZmZlcl9jbGVhbnVwKGZiKTsNCj4+ICsNCj4+ICsg
ICAgICAgaWYgKGZiLT5vYmpbMF0pDQo+PiArICAgICAgICAgICAgICAgZHJtX2dlbV9vYmpl
Y3RfcHV0KGZiLT5vYmpbMF0pOw0KPj4gKyAgICAgICBrZnJlZShmYik7DQo+PiArDQo+PiAr
ICAgICAgIHJldHVybiAwOw0KPj4gK30NCj4+ICsNCj4+ICtpbnQgcHNiX2ZiZGV2X2luaXQo
c3RydWN0IGRybV9kZXZpY2UgKmRldikNCj4+ICt7DQo+PiArICAgICAgIHN0cnVjdCBkcm1f
ZmJfaGVscGVyICpmYl9oZWxwZXI7DQo+PiArICAgICAgIHN0cnVjdCBkcm1fcHNiX3ByaXZh
dGUgKmRldl9wcml2ID0gdG9fZHJtX3BzYl9wcml2YXRlKGRldik7DQo+PiArICAgICAgIGlu
dCByZXQ7DQo+PiArDQo+PiArICAgICAgIGZiX2hlbHBlciA9IGt6YWxsb2Moc2l6ZW9mKCpm
Yl9oZWxwZXIpLCBHRlBfS0VSTkVMKTsNCj4+ICsgICAgICAgaWYgKCFmYl9oZWxwZXIpDQo+
PiArICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07DQo+PiArDQo+PiArICAgICAgIGRl
dl9wcml2LT5mYl9oZWxwZXIgPSBmYl9oZWxwZXI7DQo+PiArDQo+PiArICAgICAgIGRybV9m
Yl9oZWxwZXJfcHJlcGFyZShkZXYsIGZiX2hlbHBlciwgMzIsICZwc2JfZmJfaGVscGVyX2Z1
bmNzKTsNCj4+ICsNCj4+ICsgICAgICAgcmV0ID0gZHJtX2ZiX2hlbHBlcl9pbml0KGRldiwg
ZmJfaGVscGVyKTsNCj4+ICsgICAgICAgaWYgKHJldCkNCj4+ICsgICAgICAgICAgICAgICBn
b3RvIGZyZWU7DQo+PiArDQo+PiArICAgICAgIC8qIGRpc2FibGUgYWxsIHRoZSBwb3NzaWJs
ZSBvdXRwdXRzL2NydGNzIGJlZm9yZSBlbnRlcmluZyBLTVMgbW9kZSAqLw0KPj4gKyAgICAg
ICBkcm1faGVscGVyX2Rpc2FibGVfdW51c2VkX2Z1bmN0aW9ucyhkZXYpOw0KPj4gKw0KPj4g
KyAgICAgICByZXQgPSBkcm1fZmJfaGVscGVyX2luaXRpYWxfY29uZmlnKGZiX2hlbHBlcik7
DQo+PiArICAgICAgIGlmIChyZXQpDQo+PiArICAgICAgICAgICAgICAgZ290byBmaW5pOw0K
Pj4gKw0KPj4gKyAgICAgICByZXR1cm4gMDsNCj4+ICsNCj4+ICtmaW5pOg0KPj4gKyAgICAg
ICBkcm1fZmJfaGVscGVyX2ZpbmkoZmJfaGVscGVyKTsNCj4+ICtmcmVlOg0KPj4gKyAgICAg
ICBkcm1fZmJfaGVscGVyX3VucHJlcGFyZShmYl9oZWxwZXIpOw0KPj4gKyAgICAgICBrZnJl
ZShmYl9oZWxwZXIpOw0KPj4gKyAgICAgICByZXR1cm4gcmV0Ow0KPj4gK30NCj4+ICsNCj4+
ICt2b2lkIHBzYl9mYmRldl9maW5pKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpDQo+PiArew0K
Pj4gKyAgICAgICBzdHJ1Y3QgZHJtX3BzYl9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2RybV9w
c2JfcHJpdmF0ZShkZXYpOw0KPj4gKw0KPj4gKyAgICAgICBpZiAoIWRldl9wcml2LT5mYl9o
ZWxwZXIpDQo+PiArICAgICAgICAgICAgICAgcmV0dXJuOw0KPj4gKw0KPj4gKyAgICAgICBw
c2JfZmJkZXZfZGVzdHJveShkZXYsIGRldl9wcml2LT5mYl9oZWxwZXIpOw0KPj4gKyAgICAg
ICBkcm1fZmJfaGVscGVyX3VucHJlcGFyZShkZXZfcHJpdi0+ZmJfaGVscGVyKTsNCj4+ICsg
ICAgICAga2ZyZWUoZGV2X3ByaXYtPmZiX2hlbHBlcik7DQo+PiArICAgICAgIGRldl9wcml2
LT5mYl9oZWxwZXIgPSBOVUxMOw0KPj4gK30NCj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vZ21hNTAwL2ZyYW1lYnVmZmVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2Zy
YW1lYnVmZmVyLmMNCj4+IGluZGV4IGRmNGRiYzUwOWY2OC4uNTA2Yjg4MWE3YjI0IDEwMDY0
NA0KPj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2dtYTUwMC9mcmFtZWJ1ZmZlci5jDQo+PiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL2ZyYW1lYnVmZmVyLmMNCj4+IEBAIC01LDE2
ICs1LDEyIEBADQo+PiAgICAqDQo+PiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCj4+DQo+
PiAtI2luY2x1ZGUgPGxpbnV4L3Bmbl90Lmg+DQo+PiAtDQo+PiAtI2luY2x1ZGUgPGRybS9k
cm1fY3J0Y19oZWxwZXIuaD4NCj4+ICAgI2luY2x1ZGUgPGRybS9kcm1fZmJfaGVscGVyLmg+
DQo+PiAgICNpbmNsdWRlIDxkcm0vZHJtX2ZyYW1lYnVmZmVyLmg+DQo+PiAgICNpbmNsdWRl
IDxkcm0vZHJtX2dlbV9mcmFtZWJ1ZmZlcl9oZWxwZXIuaD4NCj4+ICAgI2luY2x1ZGUgPGRy
bS9kcm1fbW9kZXNldF9oZWxwZXIuaD4NCj4+DQo+PiAgICNpbmNsdWRlICJmcmFtZWJ1ZmZl
ci5oIg0KPj4gLSNpbmNsdWRlICJnZW0uaCINCj4+ICAgI2luY2x1ZGUgInBzYl9kcnYuaCIN
Cj4+DQo+PiAgIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyX2Z1bmNzIHBz
Yl9mYl9mdW5jcyA9IHsNCj4+IEBAIC0yMiwxMjYgKzE4LDYgQEAgc3RhdGljIGNvbnN0IHN0
cnVjdCBkcm1fZnJhbWVidWZmZXJfZnVuY3MgcHNiX2ZiX2Z1bmNzID0gew0KPj4gICAgICAg
ICAgLmNyZWF0ZV9oYW5kbGUgPSBkcm1fZ2VtX2ZiX2NyZWF0ZV9oYW5kbGUsDQo+PiAgIH07
DQo+Pg0KPj4gLSNkZWZpbmUgQ01BUF9UT0hXKF92YWwsIF93aWR0aCkgKCgoKF92YWwpIDw8
IChfd2lkdGgpKSArIDB4N0ZGRiAtIChfdmFsKSkgPj4gMTYpDQo+PiAtDQo+PiAtc3RhdGlj
IGludCBwc2JmYl9zZXRjb2xyZWcodW5zaWduZWQgcmVnbm8sIHVuc2lnbmVkIHJlZCwgdW5z
aWduZWQgZ3JlZW4sDQo+PiAtICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBi
bHVlLCB1bnNpZ25lZCB0cmFuc3AsDQo+PiAtICAgICAgICAgICAgICAgICAgICAgICAgICBz
dHJ1Y3QgZmJfaW5mbyAqaW5mbykNCj4+IC17DQo+PiAtICAgICAgIHN0cnVjdCBkcm1fZmJf
aGVscGVyICpmYl9oZWxwZXIgPSBpbmZvLT5wYXI7DQo+PiAtICAgICAgIHN0cnVjdCBkcm1f
ZnJhbWVidWZmZXIgKmZiID0gZmJfaGVscGVyLT5mYjsNCj4+IC0gICAgICAgdWludDMyX3Qg
djsNCj4+IC0NCj4+IC0gICAgICAgaWYgKCFmYikNCj4+IC0gICAgICAgICAgICAgICByZXR1
cm4gLUVOT01FTTsNCj4+IC0NCj4+IC0gICAgICAgaWYgKHJlZ25vID4gMjU1KQ0KPj4gLSAg
ICAgICAgICAgICAgIHJldHVybiAxOw0KPj4gLQ0KPj4gLSAgICAgICByZWQgPSBDTUFQX1RP
SFcocmVkLCBpbmZvLT52YXIucmVkLmxlbmd0aCk7DQo+PiAtICAgICAgIGJsdWUgPSBDTUFQ
X1RPSFcoYmx1ZSwgaW5mby0+dmFyLmJsdWUubGVuZ3RoKTsNCj4+IC0gICAgICAgZ3JlZW4g
PSBDTUFQX1RPSFcoZ3JlZW4sIGluZm8tPnZhci5ncmVlbi5sZW5ndGgpOw0KPj4gLSAgICAg
ICB0cmFuc3AgPSBDTUFQX1RPSFcodHJhbnNwLCBpbmZvLT52YXIudHJhbnNwLmxlbmd0aCk7
DQo+PiAtDQo+PiAtICAgICAgIHYgPSAocmVkIDw8IGluZm8tPnZhci5yZWQub2Zmc2V0KSB8
DQo+PiAtICAgICAgICAgICAoZ3JlZW4gPDwgaW5mby0+dmFyLmdyZWVuLm9mZnNldCkgfA0K
Pj4gLSAgICAgICAgICAgKGJsdWUgPDwgaW5mby0+dmFyLmJsdWUub2Zmc2V0KSB8DQo+PiAt
ICAgICAgICAgICAodHJhbnNwIDw8IGluZm8tPnZhci50cmFuc3Aub2Zmc2V0KTsNCj4+IC0N
Cj4+IC0gICAgICAgaWYgKHJlZ25vIDwgMTYpIHsNCj4+IC0gICAgICAgICAgICAgICBzd2l0
Y2ggKGZiLT5mb3JtYXQtPmNwcFswXSAqIDgpIHsNCj4+IC0gICAgICAgICAgICAgICBjYXNl
IDE2Og0KPj4gLSAgICAgICAgICAgICAgICAgICAgICAgKCh1aW50MzJfdCAqKSBpbmZvLT5w
c2V1ZG9fcGFsZXR0ZSlbcmVnbm9dID0gdjsNCj4+IC0gICAgICAgICAgICAgICAgICAgICAg
IGJyZWFrOw0KPj4gLSAgICAgICAgICAgICAgIGNhc2UgMjQ6DQo+PiAtICAgICAgICAgICAg
ICAgY2FzZSAzMjoNCj4+IC0gICAgICAgICAgICAgICAgICAgICAgICgodWludDMyX3QgKikg
aW5mby0+cHNldWRvX3BhbGV0dGUpW3JlZ25vXSA9IHY7DQo+PiAtICAgICAgICAgICAgICAg
ICAgICAgICBicmVhazsNCj4+IC0gICAgICAgICAgICAgICB9DQo+PiAtICAgICAgIH0NCj4+
IC0NCj4+IC0gICAgICAgcmV0dXJuIDA7DQo+PiAtfQ0KPj4gLQ0KPj4gLXN0YXRpYyB2bV9m
YXVsdF90IHBzYmZiX3ZtX2ZhdWx0KHN0cnVjdCB2bV9mYXVsdCAqdm1mKQ0KPj4gLXsNCj4+
IC0gICAgICAgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEgPSB2bWYtPnZtYTsNCj4+IC0g
ICAgICAgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIgPSB2bWEtPnZtX3ByaXZhdGVfZGF0
YTsNCj4+IC0gICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGZiLT5kZXY7DQo+PiAt
ICAgICAgIHN0cnVjdCBkcm1fcHNiX3ByaXZhdGUgKmRldl9wcml2ID0gdG9fZHJtX3BzYl9w
cml2YXRlKGRldik7DQo+PiAtICAgICAgIHN0cnVjdCBwc2JfZ2VtX29iamVjdCAqcG9iaiA9
IHRvX3BzYl9nZW1fb2JqZWN0KGZiLT5vYmpbMF0pOw0KPj4gLSAgICAgICBpbnQgcGFnZV9u
dW07DQo+PiAtICAgICAgIGludCBpOw0KPj4gLSAgICAgICB1bnNpZ25lZCBsb25nIGFkZHJl
c3M7DQo+PiAtICAgICAgIHZtX2ZhdWx0X3QgcmV0ID0gVk1fRkFVTFRfU0lHQlVTOw0KPj4g
LSAgICAgICB1bnNpZ25lZCBsb25nIHBmbjsNCj4+IC0gICAgICAgdW5zaWduZWQgbG9uZyBw
aHlzX2FkZHIgPSAodW5zaWduZWQgbG9uZylkZXZfcHJpdi0+c3RvbGVuX2Jhc2UgKyBwb2Jq
LT5vZmZzZXQ7DQo+PiAtDQo+PiAtICAgICAgIHBhZ2VfbnVtID0gdm1hX3BhZ2VzKHZtYSk7
DQo+PiAtICAgICAgIGFkZHJlc3MgPSB2bWYtPmFkZHJlc3MgLSAodm1mLT5wZ29mZiA8PCBQ
QUdFX1NISUZUKTsNCj4+IC0NCj4+IC0gICAgICAgdm1hLT52bV9wYWdlX3Byb3QgPSBwZ3By
b3Rfbm9uY2FjaGVkKHZtYS0+dm1fcGFnZV9wcm90KTsNCj4+IC0NCj4+IC0gICAgICAgZm9y
IChpID0gMDsgaSA8IHBhZ2VfbnVtOyBpKyspIHsNCj4+IC0gICAgICAgICAgICAgICBwZm4g
PSAocGh5c19hZGRyID4+IFBBR0VfU0hJRlQpOw0KPj4gLQ0KPj4gLSAgICAgICAgICAgICAg
IHJldCA9IHZtZl9pbnNlcnRfbWl4ZWQodm1hLCBhZGRyZXNzLA0KPj4gLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBfX3Bmbl90b19wZm5fdChwZm4sIFBGTl9ERVYpKTsNCj4+
IC0gICAgICAgICAgICAgICBpZiAodW5saWtlbHkocmV0ICYgVk1fRkFVTFRfRVJST1IpKQ0K
Pj4gLSAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQo+PiAtICAgICAgICAgICAgICAg
YWRkcmVzcyArPSBQQUdFX1NJWkU7DQo+PiAtICAgICAgICAgICAgICAgcGh5c19hZGRyICs9
IFBBR0VfU0laRTsNCj4+IC0gICAgICAgfQ0KPj4gLSAgICAgICByZXR1cm4gcmV0Ow0KPj4g
LX0NCj4+IC0NCj4+IC1zdGF0aWMgdm9pZCBwc2JmYl92bV9vcGVuKHN0cnVjdCB2bV9hcmVh
X3N0cnVjdCAqdm1hKQ0KPj4gLXsNCj4+IC19DQo+PiAtDQo+PiAtc3RhdGljIHZvaWQgcHNi
ZmJfdm1fY2xvc2Uoc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpDQo+PiAtew0KPj4gLX0N
Cj4+IC0NCj4+IC1zdGF0aWMgY29uc3Qgc3RydWN0IHZtX29wZXJhdGlvbnNfc3RydWN0IHBz
YmZiX3ZtX29wcyA9IHsNCj4+IC0gICAgICAgLmZhdWx0ICA9IHBzYmZiX3ZtX2ZhdWx0LA0K
Pj4gLSAgICAgICAub3BlbiAgID0gcHNiZmJfdm1fb3BlbiwNCj4+IC0gICAgICAgLmNsb3Nl
ICA9IHBzYmZiX3ZtX2Nsb3NlDQo+PiAtfTsNCj4+IC0NCj4+IC1zdGF0aWMgaW50IHBzYmZi
X21tYXAoc3RydWN0IGZiX2luZm8gKmluZm8sIHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1h
KQ0KPj4gLXsNCj4+IC0gICAgICAgc3RydWN0IGRybV9mYl9oZWxwZXIgKmZiX2hlbHBlciA9
IGluZm8tPnBhcjsNCj4+IC0gICAgICAgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIgPSBm
Yl9oZWxwZXItPmZiOw0KPj4gLQ0KPj4gLSAgICAgICBpZiAodm1hLT52bV9wZ29mZiAhPSAw
KQ0KPj4gLSAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOw0KPj4gLSAgICAgICBpZiAo
dm1hLT52bV9wZ29mZiA+ICh+MFVMID4+IFBBR0VfU0hJRlQpKQ0KPj4gLSAgICAgICAgICAg
ICAgIHJldHVybiAtRUlOVkFMOw0KPj4gLQ0KPj4gLSAgICAgICAvKg0KPj4gLSAgICAgICAg
KiBJZiB0aGlzIGlzIGEgR0VNIG9iamVjdCB0aGVuIGluZm8tPnNjcmVlbl9iYXNlIGlzIHRo
ZSB2aXJ0dWFsDQo+PiAtICAgICAgICAqIGtlcm5lbCByZW1hcHBpbmcgb2YgdGhlIG9iamVj
dC4gRklYTUU6IFJldmlldyBpZiB0aGlzIGlzDQo+PiAtICAgICAgICAqIHN1aXRhYmxlIGZv
ciBvdXIgbW1hcCB3b3JrDQo+PiAtICAgICAgICAqLw0KPj4gLSAgICAgICB2bWEtPnZtX29w
cyA9ICZwc2JmYl92bV9vcHM7DQo+PiAtICAgICAgIHZtYS0+dm1fcHJpdmF0ZV9kYXRhID0g
KHZvaWQgKilmYjsNCj4+IC0gICAgICAgdm1hLT52bV9mbGFncyB8PSBWTV9JTyB8IFZNX01J
WEVETUFQIHwgVk1fRE9OVEVYUEFORCB8IFZNX0RPTlREVU1QOw0KPj4gLSAgICAgICByZXR1
cm4gMDsNCj4+IC19DQo+PiAtDQo+PiAtc3RhdGljIGNvbnN0IHN0cnVjdCBmYl9vcHMgcHNi
ZmJfdW5hY2NlbF9vcHMgPSB7DQo+PiAtICAgICAgIC5vd25lciA9IFRISVNfTU9EVUxFLA0K
Pj4gLSAgICAgICBEUk1fRkJfSEVMUEVSX0RFRkFVTFRfT1BTLA0KPj4gLSAgICAgICAuZmJf
c2V0Y29scmVnID0gcHNiZmJfc2V0Y29scmVnLA0KPj4gLSAgICAgICAuZmJfcmVhZCA9IGRy
bV9mYl9oZWxwZXJfY2ZiX3JlYWQsDQo+PiAtICAgICAgIC5mYl93cml0ZSA9IGRybV9mYl9o
ZWxwZXJfY2ZiX3dyaXRlLA0KPj4gLSAgICAgICAuZmJfZmlsbHJlY3QgPSBkcm1fZmJfaGVs
cGVyX2NmYl9maWxscmVjdCwNCj4+IC0gICAgICAgLmZiX2NvcHlhcmVhID0gZHJtX2ZiX2hl
bHBlcl9jZmJfY29weWFyZWEsDQo+PiAtICAgICAgIC5mYl9pbWFnZWJsaXQgPSBkcm1fZmJf
aGVscGVyX2NmYl9pbWFnZWJsaXQsDQo+PiAtICAgICAgIC5mYl9tbWFwID0gcHNiZmJfbW1h
cCwNCj4+IC19Ow0KPj4gLQ0KPj4gICAvKioNCj4+ICAgICogICAgIHBzYl9mcmFtZWJ1ZmZl
cl9pbml0ICAgIC0gICAgICAgaW5pdGlhbGl6ZSBhIGZyYW1lYnVmZmVyDQo+PiAgICAqICAg
ICBAZGV2OiBvdXIgRFJNIGRldmljZQ0KPj4gQEAgLTE5MiwxMSArNjgsOSBAQCBzdGF0aWMg
aW50IHBzYl9mcmFtZWJ1ZmZlcl9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsDQo+PiAg
ICAqDQo+PiAgICAqICAgICBUT0RPOiByZXZpZXcgb2JqZWN0IHJlZmVyZW5jZXMNCj4+ICAg
ICovDQo+PiAtDQo+PiAtc3RhdGljIHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKnBzYl9mcmFt
ZWJ1ZmZlcl9jcmVhdGUNCj4+IC0gICAgICAgICAgICAgICAgICAgICAgIChzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LA0KPj4gLSAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVj
dCBkcm1fbW9kZV9mYl9jbWQyICptb2RlX2NtZCwNCj4+IC0gICAgICAgICAgICAgICAgICAg
ICAgICBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikNCj4+ICtzdHJ1Y3QgZHJtX2ZyYW1l
YnVmZmVyICpwc2JfZnJhbWVidWZmZXJfY3JlYXRlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYs
DQo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNv
bnN0IHN0cnVjdCBkcm1fbW9kZV9mYl9jbWQyICptb2RlX2NtZCwNCj4+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRybV9nZW1fb2Jq
ZWN0ICpvYmopDQo+PiAgIHsNCj4+ICAgICAgICAgIHN0cnVjdCBkcm1fZnJhbWVidWZmZXIg
KmZiOw0KPj4gICAgICAgICAgaW50IHJldDsNCj4+IEBAIC0yMTMsOTMgKzg3LDYgQEAgc3Rh
dGljIHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKnBzYl9mcmFtZWJ1ZmZlcl9jcmVhdGUNCj4+
ICAgICAgICAgIHJldHVybiBmYjsNCj4+ICAgfQ0KPj4NCj4+IC0vKioNCj4+IC0gKiAgICAg
cHNiZmJfY3JlYXRlICAgICAgICAgICAgLSAgICAgICBjcmVhdGUgYSBmcmFtZWJ1ZmZlcg0K
Pj4gLSAqICAgICBAZmJfaGVscGVyOiB0aGUgZnJhbWVidWZmZXIgaGVscGVyDQo+PiAtICog
ICAgIEBzaXplczogc3BlY2lmaWNhdGlvbiBvZiB0aGUgbGF5b3V0DQo+PiAtICoNCj4+IC0g
KiAgICAgQ3JlYXRlIGEgZnJhbWVidWZmZXIgdG8gdGhlIHNwZWNpZmljYXRpb25zIHByb3Zp
ZGVkDQo+PiAtICovDQo+PiAtc3RhdGljIGludCBwc2JmYl9jcmVhdGUoc3RydWN0IGRybV9m
Yl9oZWxwZXIgKmZiX2hlbHBlciwNCj4+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc3RydWN0IGRybV9mYl9oZWxwZXJfc3VyZmFjZV9zaXplICpzaXplcykNCj4+IC17DQo+
PiAtICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBmYl9oZWxwZXItPmRldjsNCj4+
IC0gICAgICAgc3RydWN0IGRybV9wc2JfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19kcm1fcHNi
X3ByaXZhdGUoZGV2KTsNCj4+IC0gICAgICAgc3RydWN0IHBjaV9kZXYgKnBkZXYgPSB0b19w
Y2lfZGV2KGRldi0+ZGV2KTsNCj4+IC0gICAgICAgc3RydWN0IGZiX2luZm8gKmluZm87DQo+
PiAtICAgICAgIHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiOw0KPj4gLSAgICAgICBzdHJ1
Y3QgZHJtX21vZGVfZmJfY21kMiBtb2RlX2NtZDsNCj4+IC0gICAgICAgaW50IHNpemU7DQo+
PiAtICAgICAgIGludCByZXQ7DQo+PiAtICAgICAgIHN0cnVjdCBwc2JfZ2VtX29iamVjdCAq
YmFja2luZzsNCj4+IC0gICAgICAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmo7DQo+PiAt
ICAgICAgIHUzMiBicHAsIGRlcHRoOw0KPj4gLQ0KPj4gLSAgICAgICBtb2RlX2NtZC53aWR0
aCA9IHNpemVzLT5zdXJmYWNlX3dpZHRoOw0KPj4gLSAgICAgICBtb2RlX2NtZC5oZWlnaHQg
PSBzaXplcy0+c3VyZmFjZV9oZWlnaHQ7DQo+PiAtICAgICAgIGJwcCA9IHNpemVzLT5zdXJm
YWNlX2JwcDsNCj4+IC0gICAgICAgZGVwdGggPSBzaXplcy0+c3VyZmFjZV9kZXB0aDsNCj4+
IC0NCj4+IC0gICAgICAgLyogTm8gMjRiaXQgcGFja2VkICovDQo+PiAtICAgICAgIGlmIChi
cHAgPT0gMjQpDQo+PiAtICAgICAgICAgICAgICAgYnBwID0gMzI7DQo+PiAtDQo+PiAtICAg
ICAgIG1vZGVfY21kLnBpdGNoZXNbMF0gPSBBTElHTihtb2RlX2NtZC53aWR0aCAqIERJVl9S
T1VORF9VUChicHAsIDgpLCA2NCk7DQo+PiAtDQo+PiAtICAgICAgIHNpemUgPSBtb2RlX2Nt
ZC5waXRjaGVzWzBdICogbW9kZV9jbWQuaGVpZ2h0Ow0KPj4gLSAgICAgICBzaXplID0gQUxJ
R04oc2l6ZSwgUEFHRV9TSVpFKTsNCj4+IC0NCj4+IC0gICAgICAgLyogQWxsb2NhdGUgdGhl
IGZyYW1lYnVmZmVyIGluIHRoZSBHVFQgd2l0aCBzdG9sZW4gcGFnZSBiYWNraW5nICovDQo+
PiAtICAgICAgIGJhY2tpbmcgPSBwc2JfZ2VtX2NyZWF0ZShkZXYsIHNpemUsICJmYiIsIHRy
dWUsIFBBR0VfU0laRSk7DQo+PiAtICAgICAgIGlmIChJU19FUlIoYmFja2luZykpDQo+PiAt
ICAgICAgICAgICAgICAgcmV0dXJuIFBUUl9FUlIoYmFja2luZyk7DQo+PiAtICAgICAgIG9i
aiA9ICZiYWNraW5nLT5iYXNlOw0KPj4gLQ0KPj4gLSAgICAgICBtZW1zZXQoZGV2X3ByaXYt
PnZyYW1fYWRkciArIGJhY2tpbmctPm9mZnNldCwgMCwgc2l6ZSk7DQo+PiAtDQo+PiAtICAg
ICAgIGluZm8gPSBkcm1fZmJfaGVscGVyX2FsbG9jX2luZm8oZmJfaGVscGVyKTsNCj4+IC0g
ICAgICAgaWYgKElTX0VSUihpbmZvKSkgew0KPj4gLSAgICAgICAgICAgICAgIHJldCA9IFBU
Ul9FUlIoaW5mbyk7DQo+PiAtICAgICAgICAgICAgICAgZ290byBlcnJfZHJtX2dlbV9vYmpl
Y3RfcHV0Ow0KPj4gLSAgICAgICB9DQo+PiAtDQo+PiAtICAgICAgIG1vZGVfY21kLnBpeGVs
X2Zvcm1hdCA9IGRybV9tb2RlX2xlZ2FjeV9mYl9mb3JtYXQoYnBwLCBkZXB0aCk7DQo+PiAt
DQo+PiAtICAgICAgIGZiID0gcHNiX2ZyYW1lYnVmZmVyX2NyZWF0ZShkZXYsICZtb2RlX2Nt
ZCwgb2JqKTsNCj4+IC0gICAgICAgaWYgKElTX0VSUihmYikpIHsNCj4+IC0gICAgICAgICAg
ICAgICByZXQgPSBQVFJfRVJSKGZiKTsNCj4+IC0gICAgICAgICAgICAgICBnb3RvIGVycl9k
cm1fZ2VtX29iamVjdF9wdXQ7DQo+PiAtICAgICAgIH0NCj4+IC0NCj4+IC0gICAgICAgZmJf
aGVscGVyLT5mYiA9IGZiOw0KPj4gLQ0KPj4gLSAgICAgICBpbmZvLT5mYm9wcyA9ICZwc2Jm
Yl91bmFjY2VsX29wczsNCj4+IC0NCj4+IC0gICAgICAgaW5mby0+Zml4LnNtZW1fc3RhcnQg
PSBkZXZfcHJpdi0+ZmJfYmFzZTsNCj4+IC0gICAgICAgaW5mby0+Zml4LnNtZW1fbGVuID0g
c2l6ZTsNCj4+IC0gICAgICAgaW5mby0+Zml4Lnl3cmFwc3RlcCA9IDA7DQo+PiAtICAgICAg
IGluZm8tPmZpeC55cGFuc3RlcCA9IDA7DQo+PiAtDQo+PiAtICAgICAgIC8qIEFjY2Vzc2Vk
IHN0b2xlbiBtZW1vcnkgZGlyZWN0bHkgKi8NCj4+IC0gICAgICAgaW5mby0+c2NyZWVuX2Jh
c2UgPSBkZXZfcHJpdi0+dnJhbV9hZGRyICsgYmFja2luZy0+b2Zmc2V0Ow0KPj4gLSAgICAg
ICBpbmZvLT5zY3JlZW5fc2l6ZSA9IHNpemU7DQo+PiAtDQo+PiAtICAgICAgIGRybV9mYl9o
ZWxwZXJfZmlsbF9pbmZvKGluZm8sIGZiX2hlbHBlciwgc2l6ZXMpOw0KPj4gLQ0KPj4gLSAg
ICAgICBpbmZvLT5maXgubW1pb19zdGFydCA9IHBjaV9yZXNvdXJjZV9zdGFydChwZGV2LCAw
KTsNCj4+IC0gICAgICAgaW5mby0+Zml4Lm1taW9fbGVuID0gcGNpX3Jlc291cmNlX2xlbihw
ZGV2LCAwKTsNCj4+IC0NCj4+IC0gICAgICAgLyogVXNlIGRlZmF1bHQgc2NyYXRjaCBwaXht
YXAgKGluZm8tPnBpeG1hcC5mbGFncyA9IEZCX1BJWE1BUF9TWVNURU0pICovDQo+PiAtDQo+
PiAtICAgICAgIGRldl9kYmcoZGV2LT5kZXYsICJhbGxvY2F0ZWQgJWR4JWQgZmJcbiIsIGZi
LT53aWR0aCwgZmItPmhlaWdodCk7DQo+PiAtDQo+PiAtICAgICAgIHJldHVybiAwOw0KPj4g
LQ0KPj4gLWVycl9kcm1fZ2VtX29iamVjdF9wdXQ6DQo+PiAtICAgICAgIGRybV9nZW1fb2Jq
ZWN0X3B1dChvYmopOw0KPj4gLSAgICAgICByZXR1cm4gcmV0Ow0KPj4gLX0NCj4+IC0NCj4+
ICAgLyoqDQo+PiAgICAqICAgICBwc2JfdXNlcl9mcmFtZWJ1ZmZlcl9jcmVhdGUgICAgIC0g
ICAgICAgY3JlYXRlIGZyYW1lYnVmZmVyDQo+PiAgICAqICAgICBAZGV2OiBvdXIgRFJNIGRl
dmljZQ0KPj4gQEAgLTMzMSwxMDUgKzExOCw2IEBAIHN0YXRpYyBzdHJ1Y3QgZHJtX2ZyYW1l
YnVmZmVyICpwc2JfdXNlcl9mcmFtZWJ1ZmZlcl9jcmVhdGUNCj4+ICAgICAgICAgIHJldHVy
biBmYjsNCj4+ICAgfQ0KPj4NCj4+IC1zdGF0aWMgaW50IHBzYmZiX3Byb2JlKHN0cnVjdCBk
cm1fZmJfaGVscGVyICpmYl9oZWxwZXIsDQo+PiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cnVjdCBkcm1fZmJfaGVscGVyX3N1cmZhY2Vfc2l6ZSAqc2l6ZXMpDQo+PiAt
ew0KPj4gLSAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gZmJfaGVscGVyLT5kZXY7
DQo+PiAtICAgICAgIHN0cnVjdCBkcm1fcHNiX3ByaXZhdGUgKmRldl9wcml2ID0gdG9fZHJt
X3BzYl9wcml2YXRlKGRldik7DQo+PiAtICAgICAgIHVuc2lnbmVkIGludCBmYl9zaXplOw0K
Pj4gLSAgICAgICBpbnQgYnl0ZXNwcDsNCj4+IC0NCj4+IC0gICAgICAgYnl0ZXNwcCA9IHNp
emVzLT5zdXJmYWNlX2JwcCAvIDg7DQo+PiAtICAgICAgIGlmIChieXRlc3BwID09IDMpICAg
ICAgIC8qIG5vIDI0Yml0IHBhY2tlZCAqLw0KPj4gLSAgICAgICAgICAgICAgIGJ5dGVzcHAg
PSA0Ow0KPj4gLQ0KPj4gLSAgICAgICAvKiBJZiB0aGUgbW9kZSB3aWxsIG5vdCBmaXQgaW4g
MzJiaXQgdGhlbiBzd2l0Y2ggdG8gMTZiaXQgdG8gZ2V0DQo+PiAtICAgICAgICAgIGEgY29u
c29sZSBvbiBmdWxsIHJlc29sdXRpb24uIFRoZSBYIG1vZGUgc2V0dGluZyBzZXJ2ZXIgd2ls
bA0KPj4gLSAgICAgICAgICBhbGxvY2F0ZSBpdHMgb3duIDMyYml0IEdFTSBmcmFtZWJ1ZmZl
ciAqLw0KPj4gLSAgICAgICBmYl9zaXplID0gQUxJR04oc2l6ZXMtPnN1cmZhY2Vfd2lkdGgg
KiBieXRlc3BwLCA2NCkgKg0KPj4gLSAgICAgICAgICAgICAgICAgc2l6ZXMtPnN1cmZhY2Vf
aGVpZ2h0Ow0KPj4gLSAgICAgICBmYl9zaXplID0gQUxJR04oZmJfc2l6ZSwgUEFHRV9TSVpF
KTsNCj4+IC0NCj4+IC0gICAgICAgaWYgKGZiX3NpemUgPiBkZXZfcHJpdi0+dnJhbV9zdG9s
ZW5fc2l6ZSkgew0KPj4gLSAgICAgICAgICAgICAgICBzaXplcy0+c3VyZmFjZV9icHAgPSAx
NjsNCj4+IC0gICAgICAgICAgICAgICAgc2l6ZXMtPnN1cmZhY2VfZGVwdGggPSAxNjsNCj4+
IC0gICAgICAgIH0NCj4+IC0NCj4+IC0gICAgICAgcmV0dXJuIHBzYmZiX2NyZWF0ZShmYl9o
ZWxwZXIsIHNpemVzKTsNCj4+IC19DQo+PiAtDQo+PiAtc3RhdGljIGNvbnN0IHN0cnVjdCBk
cm1fZmJfaGVscGVyX2Z1bmNzIHBzYl9mYl9oZWxwZXJfZnVuY3MgPSB7DQo+PiAtICAgICAg
IC5mYl9wcm9iZSA9IHBzYmZiX3Byb2JlLA0KPj4gLX07DQo+PiAtDQo+PiAtc3RhdGljIGlu
dCBwc2JfZmJkZXZfZGVzdHJveShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LA0KPj4gLSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2ZiX2hlbHBlciAqZmJfaGVscGVy
KQ0KPj4gLXsNCj4+IC0gICAgICAgc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIgPSBmYl9o
ZWxwZXItPmZiOw0KPj4gLQ0KPj4gLSAgICAgICBkcm1fZmJfaGVscGVyX3VucmVnaXN0ZXJf
aW5mbyhmYl9oZWxwZXIpOw0KPj4gLQ0KPj4gLSAgICAgICBkcm1fZmJfaGVscGVyX2Zpbmko
ZmJfaGVscGVyKTsNCj4+IC0gICAgICAgZHJtX2ZyYW1lYnVmZmVyX3VucmVnaXN0ZXJfcHJp
dmF0ZShmYik7DQo+PiAtICAgICAgIGRybV9mcmFtZWJ1ZmZlcl9jbGVhbnVwKGZiKTsNCj4+
IC0NCj4+IC0gICAgICAgaWYgKGZiLT5vYmpbMF0pDQo+PiAtICAgICAgICAgICAgICAgZHJt
X2dlbV9vYmplY3RfcHV0KGZiLT5vYmpbMF0pOw0KPj4gLSAgICAgICBrZnJlZShmYik7DQo+
PiAtDQo+PiAtICAgICAgIHJldHVybiAwOw0KPj4gLX0NCj4+IC0NCj4+IC1pbnQgcHNiX2Zi
ZGV2X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRldikNCj4+IC17DQo+PiAtICAgICAgIHN0
cnVjdCBkcm1fZmJfaGVscGVyICpmYl9oZWxwZXI7DQo+PiAtICAgICAgIHN0cnVjdCBkcm1f
cHNiX3ByaXZhdGUgKmRldl9wcml2ID0gdG9fZHJtX3BzYl9wcml2YXRlKGRldik7DQo+PiAt
ICAgICAgIGludCByZXQ7DQo+PiAtDQo+PiAtICAgICAgIGZiX2hlbHBlciA9IGt6YWxsb2Mo
c2l6ZW9mKCpmYl9oZWxwZXIpLCBHRlBfS0VSTkVMKTsNCj4+IC0gICAgICAgaWYgKCFmYl9o
ZWxwZXIpIHsNCj4+IC0gICAgICAgICAgICAgICBkZXZfZXJyKGRldi0+ZGV2LCAibm8gbWVt
b3J5XG4iKTsNCj4+IC0gICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsNCj4+IC0gICAg
ICAgfQ0KPj4gLQ0KPj4gLSAgICAgICBkZXZfcHJpdi0+ZmJfaGVscGVyID0gZmJfaGVscGVy
Ow0KPj4gLQ0KPj4gLSAgICAgICBkcm1fZmJfaGVscGVyX3ByZXBhcmUoZGV2LCBmYl9oZWxw
ZXIsIDMyLCAmcHNiX2ZiX2hlbHBlcl9mdW5jcyk7DQo+PiAtDQo+PiAtICAgICAgIHJldCA9
IGRybV9mYl9oZWxwZXJfaW5pdChkZXYsIGZiX2hlbHBlcik7DQo+PiAtICAgICAgIGlmIChy
ZXQpDQo+PiAtICAgICAgICAgICAgICAgZ290byBmcmVlOw0KPj4gLQ0KPj4gLSAgICAgICAv
KiBkaXNhYmxlIGFsbCB0aGUgcG9zc2libGUgb3V0cHV0cy9jcnRjcyBiZWZvcmUgZW50ZXJp
bmcgS01TIG1vZGUgKi8NCj4+IC0gICAgICAgZHJtX2hlbHBlcl9kaXNhYmxlX3VudXNlZF9m
dW5jdGlvbnMoZGV2KTsNCj4+IC0NCj4+IC0gICAgICAgcmV0ID0gZHJtX2ZiX2hlbHBlcl9p
bml0aWFsX2NvbmZpZyhmYl9oZWxwZXIpOw0KPj4gLSAgICAgICBpZiAocmV0KQ0KPj4gLSAg
ICAgICAgICAgICAgIGdvdG8gZmluaTsNCj4+IC0NCj4+IC0gICAgICAgcmV0dXJuIDA7DQo+
PiAtDQo+PiAtZmluaToNCj4+IC0gICAgICAgZHJtX2ZiX2hlbHBlcl9maW5pKGZiX2hlbHBl
cik7DQo+PiAtZnJlZToNCj4+IC0gICAgICAgZHJtX2ZiX2hlbHBlcl91bnByZXBhcmUoZmJf
aGVscGVyKTsNCj4+IC0gICAgICAga2ZyZWUoZmJfaGVscGVyKTsNCj4+IC0gICAgICAgcmV0
dXJuIHJldDsNCj4+IC19DQo+PiAtDQo+PiAtc3RhdGljIHZvaWQgcHNiX2ZiZGV2X2Zpbmko
c3RydWN0IGRybV9kZXZpY2UgKmRldikNCj4+IC17DQo+PiAtICAgICAgIHN0cnVjdCBkcm1f
cHNiX3ByaXZhdGUgKmRldl9wcml2ID0gdG9fZHJtX3BzYl9wcml2YXRlKGRldik7DQo+PiAt
DQo+PiAtICAgICAgIGlmICghZGV2X3ByaXYtPmZiX2hlbHBlcikNCj4+IC0gICAgICAgICAg
ICAgICByZXR1cm47DQo+PiAtDQo+PiAtICAgICAgIHBzYl9mYmRldl9kZXN0cm95KGRldiwg
ZGV2X3ByaXYtPmZiX2hlbHBlcik7DQo+PiAtICAgICAgIGRybV9mYl9oZWxwZXJfdW5wcmVw
YXJlKGRldl9wcml2LT5mYl9oZWxwZXIpOw0KPj4gLSAgICAgICBrZnJlZShkZXZfcHJpdi0+
ZmJfaGVscGVyKTsNCj4+IC0gICAgICAgZGV2X3ByaXYtPmZiX2hlbHBlciA9IE5VTEw7DQo+
PiAtfQ0KPj4gLQ0KPj4gICBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9tb2RlX2NvbmZpZ19m
dW5jcyBwc2JfbW9kZV9mdW5jcyA9IHsNCj4+ICAgICAgICAgIC5mYl9jcmVhdGUgPSBwc2Jf
dXNlcl9mcmFtZWJ1ZmZlcl9jcmVhdGUsDQo+PiAgICAgICAgICAub3V0cHV0X3BvbGxfY2hh
bmdlZCA9IGRybV9mYl9oZWxwZXJfb3V0cHV0X3BvbGxfY2hhbmdlZCwNCj4+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL3BzYl9kcnYuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9nbWE1MDAvcHNiX2Rydi5oDQo+PiBpbmRleCBhNWRmNmQyZjJjYWIuLmNkMGEzMDAxMTU3
MiAxMDA2NDQNCj4+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvcHNiX2Rydi5oDQo+
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vZ21hNTAwL3BzYl9kcnYuaA0KPj4gQEAgLTYxMCw3
ICs2MTAsMjQgQEAgZXh0ZXJuIHZvaWQgcHNiX2xpZF90aW1lcl90YWtlZG93bihzdHJ1Y3Qg
ZHJtX3BzYl9wcml2YXRlICpkZXZfcHJpdik7DQo+PiAgIC8qIG1vZGVzZXR0aW5nICovDQo+
PiAgIGV4dGVybiB2b2lkIHBzYl9tb2Rlc2V0X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRl
dik7DQo+PiAgIGV4dGVybiB2b2lkIHBzYl9tb2Rlc2V0X2NsZWFudXAoc3RydWN0IGRybV9k
ZXZpY2UgKmRldik7DQo+PiArDQo+PiArLyogZnJhbWVidWZmZXIgKi8NCj4+ICtleHRlcm4g
c3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqcHNiX2ZyYW1lYnVmZmVyX2NyZWF0ZShzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2LA0KPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0IGRybV9tb2RlX2ZiX2NtZDIgKm1v
ZGVfY21kLA0KPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopOw0KPj4gKw0KPj4gKy8q
IGZiZGV2ICovDQo+PiArI2lmIGRlZmluZWQoQ09ORklHX0RSTV9GQkRFVl9FTVVMQVRJT04p
DQo+PiAgIGV4dGVybiBpbnQgcHNiX2ZiZGV2X2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRl
dik7DQo+PiArZXh0ZXJuIHZvaWQgcHNiX2ZiZGV2X2Zpbmkoc3RydWN0IGRybV9kZXZpY2Ug
KmRldik7DQo+PiArI2Vsc2UNCj4+ICtpbnQgcHNiX2ZiZGV2X2luaXQoc3RydWN0IGRybV9k
ZXZpY2UgKmRldikNCj4+ICt7DQo+PiArICAgICAgIHJldHVybiAwOw0KPj4gK30NCj4+ICt2
b2lkIHBzYl9mYmRldl9maW5pKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpDQo+PiAreyB9DQo+
PiArI2VuZGlmDQo+Pg0KPj4gICAvKiBiYWNrbGlnaHQuYyAqLw0KPj4gICBpbnQgZ21hX2Jh
Y2tsaWdodF9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpOw0KPj4gLS0NCj4+IDIuMzku
Mg0KPj4NCg0KLS0gDQpUaG9tYXMgWmltbWVybWFubg0KR3JhcGhpY3MgRHJpdmVyIERldmVs
b3Blcg0KU1VTRSBTb2Z0d2FyZSBTb2x1dGlvbnMgR2VybWFueSBHbWJIDQpNYXhmZWxkc3Ry
LiA1LCA5MDQwOSBOw7xybmJlcmcsIEdlcm1hbnkNCihIUkIgMzY4MDksIEFHIE7DvHJuYmVy
ZykNCkdlc2Now6RmdHNmw7xocmVyOiBJdm8gVG90ZXYNCg==

--------------vAPxGIM7VVW3tcHA3g0iDY8b--

--------------8Xc5Tr8iD7MctE5X7xnC6mHI
Content-Type: application/pgp-signature; name="OpenPGP_signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="OpenPGP_signature"

-----BEGIN PGP SIGNATURE-----

wsF5BAABCAAjFiEExndm/fpuMUdwYFFolh/E3EQov+AFAmP8XosFAwAAAAAACgkQlh/E3EQov+B3
FA/+MsRUI8SwUZgqb/XPLEkLwZ29XSkBVFKUGK2qPLIvl8zzGHZ5hVptUDeA4ZGOBphgc7AmP0t1
2DBGjqXBGeh4yCNf5t/AgcBJEweqrCGBVY8dZ1ba3fsevqwfZrYaRoxII7DFcp9+NoXnP6oyU98t
srOBNqrhpPmVf7eZcnX7VMtoY0obO0hr6dWkRNx0sSFEgmdn7bzf70qoH6kHbowJkYL0OQoKckOK
KERpVkPjxHUWuEFD3AINC1gWRjYpfCspSAu0EZGRYumdGL/Ht0PtJNePi/2V11Ec36tPapBYWzT9
l8cL0sWtGguseD/1os8wAWGNs9sA02t+Oau8ZahkPJQq/Z/gX/8NmIlhAuqvX/MpDniF/X/TeO6V
zMQUu48TWZREN065LcvPH40amMXnP4pxS4Clcaz8X90Zc4TayFQ4IXdBB+IxAq5cVE936mtT1HMv
GwkRfA3H2ZmChYU1HhUgS6dy+A2V0Wziue8dcTbGCAxbixJA3G9FJEjOZZ0RNaG7PEyEIEpu8gpm
32mQu8tZMk7Fg7dlwKaEF23WppqAsdVbdbxeDnY7kARzeIkUm/2VOKNED8T2GuDbXIiQdsaZe0C+
Cv3tjX0a9eGH+0MOYA5TfV857KedQ+ndA8TuEegwpv2BOhtbGaZkQhB+dWwAL6QwaOA+SgqSmqq1
BI8=
=CcgI
-----END PGP SIGNATURE-----

--------------8Xc5Tr8iD7MctE5X7xnC6mHI--
