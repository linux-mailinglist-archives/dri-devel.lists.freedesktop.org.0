Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3297D110119
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 16:22:21 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D624E6E9CA;
	Tue,  3 Dec 2019 15:22:18 +0000 (UTC)
X-Original-To: dri-devel@freedesktop.org
Delivered-To: dri-devel@freedesktop.org
X-Greylist: delayed 364 seconds by postgrey-1.36 at gabe;
 Tue, 03 Dec 2019 15:22:18 UTC
Received: from a27-185.smtp-out.us-west-2.amazonses.com
 (a27-185.smtp-out.us-west-2.amazonses.com [54.240.27.185])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 213D96E9CA
 for <dri-devel@freedesktop.org>; Tue,  3 Dec 2019 15:22:18 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on
 aws-us-west-2-caf-mail-1.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No, score=-1.0 required=2.0 tests=ALL_TRUSTED,SPF_NONE
 autolearn=ham autolearn_force=no version=3.4.0
DMARC-Filter: OpenDMARC Filter v1.3.2 smtp.codeaurora.org 5B000C447AD
From: Sharat Masetty <smasetty@codeaurora.org>
To: freedreno@lists.freedesktop.org
Subject: [PATCH 3/5] drm: msm: a6xx: Dump GBIF registers, debugbus in gpu state
Date: Tue, 3 Dec 2019 15:16:13 +0000
Message-ID: <0101016ecc5551c9-0ff83ad1-0377-4788-973a-b48678df4736-000000@us-west-2.amazonses.com>
X-Mailer: git-send-email 1.9.1
In-Reply-To: <1575386150-13299-1-git-send-email-smasetty@codeaurora.org>
References: <1575386150-13299-1-git-send-email-smasetty@codeaurora.org>
X-SES-Outgoing: 2019.12.03-54.240.27.185
Feedback-ID: 1.us-west-2.CZuq2qbDmUIuT3qdvXlRHZZCpfZqZ4GtG9v3VKgRyF0=:AmazonSES
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/simple; 
 s=zsmsymrwgfyinv5wlfyidntwsjeeldzt; d=codeaurora.org; t=1575386174;
 h=From:To:Cc:Subject:Date:Message-Id:In-Reply-To:References;
 bh=w8Tk0Be0UFS5KL979ZqROUbN+JS2WtcdWkU0o4UVDN0=;
 b=KY0ycRxRdbhJlJTDmVdgN2eMkQm955hm9BW+4GnV5fuS963r6MvJYqtFkSCOZ2T+
 d9u4XClHpuitwj9AhuUgH/U9gOSH0O72098uZ5ZyxamJXj82rqwUxIT4oQoJIUUS6b4
 zywlMP5l5zJMcmfxX4ZaR7082hqCcdQQzngLom0Q=
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/simple; 
 s=gdwg2y3kokkkj5a55z2ilkup5wp5hhxx; d=amazonses.com; t=1575386174;
 h=From:To:Cc:Subject:Date:Message-Id:In-Reply-To:References:Feedback-ID;
 bh=w8Tk0Be0UFS5KL979ZqROUbN+JS2WtcdWkU0o4UVDN0=;
 b=CnW4bUaRpSDmUpFdOp5C5ZB1bfIZSg4AS2YEkAWz9vAAL7hwjm8hTiTYAPJEqiNG
 T7x0493Oxtil4KUKzotdycVxdUH6+lEhuvo1gFBAo98p9X4dPVjVM956GFhmnfWQuy2
 rdG3jz26Ms+m5vR9aQFTkS7gpaOzwACbBgMGjM6Y=
X-Mailman-Original-Authentication-Results: aws-us-west-2-caf-mail-1.web.codeaurora.org;
 dmarc=none (p=none dis=none) header.from=codeaurora.org
X-Mailman-Original-Authentication-Results: aws-us-west-2-caf-mail-1.web.codeaurora.org;
 spf=none smtp.mailfrom=smasetty@codeaurora.org
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-arm-msm@vger.kernel.org, Sharat Masetty <smasetty@codeaurora.org>,
 dri-devel@freedesktop.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIHRoZSByZWxldmFudCBHQklGIHJlZ2lzdGVycyBhbmQgdGhlIGRlYnVnIGJ1cyB0byB0aGUg
YTZ4eCBncHUKc3RhdGUuIFRoaXMgY29tZXMgaW4gcHJldHR5IGhhbmR5IHdoZW4gZGVidWdnaW5n
IEdQVSBidXMgcmVsYXRlZAppc3N1ZXMuCgpTaWduZWQtb2ZmLWJ5OiBTaGFyYXQgTWFzZXR0eSA8
c21hc2V0dHlAY29kZWF1cm9yYS5vcmc+Ci0tLQogZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8v
YTZ4eF9ncHVfc3RhdGUuYyB8IDUyICsrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNnh4X2dwdV9zdGF0ZS5oIHwgMTYgKysrKysrKy0tCiAy
IGZpbGVzIGNoYW5nZWQsIDU1IGluc2VydGlvbnMoKyksIDEzIGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E2eHhfZ3B1X3N0YXRlLmMgYi9kcml2
ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNnh4X2dwdV9zdGF0ZS5jCmluZGV4IGU2ODYzMzEuLjk5
YjVhNDEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E2eHhfZ3B1X3N0
YXRlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTZ4eF9ncHVfc3RhdGUuYwpA
QCAtMSw1ICsxLDUgQEAKIC8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCi0vKiBD
b3B5cmlnaHQgKGMpIDIwMTggVGhlIExpbnV4IEZvdW5kYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2
ZWQuICovCisvKiBDb3B5cmlnaHQgKGMpIDIwMTgtMjAxOSBUaGUgTGludXggRm91bmRhdGlvbi4g
QWxsIHJpZ2h0cyByZXNlcnZlZC4gKi8KCiAjaW5jbHVkZSA8bGludXgvYXNjaWk4NS5oPgogI2lu
Y2x1ZGUgIm1zbV9nZW0uaCIKQEAgLTMyMCw2ICszMjAsNyBAQCBzdGF0aWMgdm9pZCBhNnh4X2dl
dF9kZWJ1Z2J1cyhzdHJ1Y3QgbXNtX2dwdSAqZ3B1LAogewogCXN0cnVjdCByZXNvdXJjZSAqcmVz
OwogCXZvaWQgX19pb21lbSAqY3hkYmcgPSBOVUxMOworCWludCBucl9kZWJ1Z2J1c19ibG9ja3M7
CgogCS8qIFNldCB1cCB0aGUgR1ggZGVidWcgYnVzICovCgpAQCAtMzc0LDkgKzM3NSwxMSBAQCBz
dGF0aWMgdm9pZCBhNnh4X2dldF9kZWJ1Z2J1cyhzdHJ1Y3QgbXNtX2dwdSAqZ3B1LAogCQljeGRi
Z193cml0ZShjeGRiZywgUkVHX0E2WFhfREJHQ19DRkdfREJHQlVTX01BU0tMXzMsIDApOwogCX0K
Ci0JYTZ4eF9zdGF0ZS0+ZGVidWdidXMgPSBzdGF0ZV9rY2FsbG9jKGE2eHhfc3RhdGUsCi0JCUFS
UkFZX1NJWkUoYTZ4eF9kZWJ1Z2J1c19ibG9ja3MpLAotCQlzaXplb2YoKmE2eHhfc3RhdGUtPmRl
YnVnYnVzKSk7CisJbnJfZGVidWdidXNfYmxvY2tzID0gQVJSQVlfU0laRShhNnh4X2RlYnVnYnVz
X2Jsb2NrcykgKworCQkoYTZ4eF9oYXNfZ2JpZih0b19hZHJlbm9fZ3B1KGdwdSkpID8gMSA6IDAp
OworCisJYTZ4eF9zdGF0ZS0+ZGVidWdidXMgPSBzdGF0ZV9rY2FsbG9jKGE2eHhfc3RhdGUsIG5y
X2RlYnVnYnVzX2Jsb2NrcywKKwkJCXNpemVvZigqYTZ4eF9zdGF0ZS0+ZGVidWdidXMpKTsKCiAJ
aWYgKGE2eHhfc3RhdGUtPmRlYnVnYnVzKSB7CiAJCWludCBpOwpAQCAtMzg4LDE1ICszOTEsMzEg
QEAgc3RhdGljIHZvaWQgYTZ4eF9nZXRfZGVidWdidXMoc3RydWN0IG1zbV9ncHUgKmdwdSwKIAkJ
CQkmYTZ4eF9zdGF0ZS0+ZGVidWdidXNbaV0pOwoKIAkJYTZ4eF9zdGF0ZS0+bnJfZGVidWdidXMg
PSBBUlJBWV9TSVpFKGE2eHhfZGVidWdidXNfYmxvY2tzKTsKKworCQkvKgorCQkgKiBHQklGIGhh
cyBzYW1lIGRlYnVnYnVzIGFzIG9mIG90aGVyIEdQVSBibG9ja3MsIGZhbGwgYmFjayB0bworCQkg
KiBkZWZhdWx0IHBhdGggaWYgR1BVIHVzZXMgR0JJRiwgYWxzbyBHQklGIHVzZXMgZXhhY3RseSBz
YW1lCisJCSAqIElEIGFzIG9mIFZCSUYuCisJCSAqLworCQlpZiAoYTZ4eF9oYXNfZ2JpZih0b19h
ZHJlbm9fZ3B1KGdwdSkpKSB7CisJCQlhNnh4X2dldF9kZWJ1Z2J1c19ibG9jayhncHUsIGE2eHhf
c3RhdGUsCisJCQkJJmE2eHhfZ2JpZl9kZWJ1Z2J1c19ibG9jaywKKwkJCQkmYTZ4eF9zdGF0ZS0+
ZGVidWdidXNbaV0pOworCisJCQlhNnh4X3N0YXRlLT5ucl9kZWJ1Z2J1cyArPSAxOworCQl9CiAJ
fQoKLQlhNnh4X3N0YXRlLT52YmlmX2RlYnVnYnVzID0KLQkJc3RhdGVfa2NhbGxvYyhhNnh4X3N0
YXRlLCAxLAotCQkJc2l6ZW9mKCphNnh4X3N0YXRlLT52YmlmX2RlYnVnYnVzKSk7CisJLyogIER1
bXAgdGhlIFZCSUYgZGVidWdidXMgb24gYXBwbGljYWJsZSB0YXJnZXRzICovCisJaWYgKCFhNnh4
X2hhc19nYmlmKHRvX2FkcmVub19ncHUoZ3B1KSkpIHsKKwkJYTZ4eF9zdGF0ZS0+dmJpZl9kZWJ1
Z2J1cyA9CisJCQlzdGF0ZV9rY2FsbG9jKGE2eHhfc3RhdGUsIDEsCisJCQkJCXNpemVvZigqYTZ4
eF9zdGF0ZS0+dmJpZl9kZWJ1Z2J1cykpOwoKLQlpZiAoYTZ4eF9zdGF0ZS0+dmJpZl9kZWJ1Z2J1
cykKLQkJYTZ4eF9nZXRfdmJpZl9kZWJ1Z2J1c19ibG9jayhncHUsIGE2eHhfc3RhdGUsCi0JCQlh
Nnh4X3N0YXRlLT52YmlmX2RlYnVnYnVzKTsKKwkJaWYgKGE2eHhfc3RhdGUtPnZiaWZfZGVidWdi
dXMpCisJCQlhNnh4X2dldF92YmlmX2RlYnVnYnVzX2Jsb2NrKGdwdSwgYTZ4eF9zdGF0ZSwKKwkJ
CQkJYTZ4eF9zdGF0ZS0+dmJpZl9kZWJ1Z2J1cyk7CisJfQoKIAlpZiAoY3hkYmcpIHsKIAkJYTZ4
eF9zdGF0ZS0+Y3hfZGVidWdidXMgPQpAQCAtNzcwLDE0ICs3ODksMTYgQEAgc3RhdGljIHZvaWQg
YTZ4eF9nZXRfZ211X3JlZ2lzdGVycyhzdHJ1Y3QgbXNtX2dwdSAqZ3B1LAogCQkmYTZ4eF9zdGF0
ZS0+Z211X3JlZ2lzdGVyc1sxXSk7CiB9CgorI2RlZmluZSBBNlhYX0dCSUZfUkVHTElTVF9TSVpF
ICAgMQogc3RhdGljIHZvaWQgYTZ4eF9nZXRfcmVnaXN0ZXJzKHN0cnVjdCBtc21fZ3B1ICpncHUs
CiAJCXN0cnVjdCBhNnh4X2dwdV9zdGF0ZSAqYTZ4eF9zdGF0ZSwKIAkJc3RydWN0IGE2eHhfY3Jh
c2hkdW1wZXIgKmR1bXBlcikKIHsKIAlpbnQgaSwgY291bnQgPSBBUlJBWV9TSVpFKGE2eHhfYWhi
X3JlZ2xpc3QpICsKIAkJQVJSQVlfU0laRShhNnh4X3JlZ2xpc3QpICsKLQkJQVJSQVlfU0laRShh
Nnh4X2hsc3FfcmVnbGlzdCk7CisJCUFSUkFZX1NJWkUoYTZ4eF9obHNxX3JlZ2xpc3QpICsgQTZY
WF9HQklGX1JFR0xJU1RfU0laRTsKIAlpbnQgaW5kZXggPSAwOworCXN0cnVjdCBhZHJlbm9fZ3B1
ICphZHJlbm9fZ3B1ID0gdG9fYWRyZW5vX2dwdShncHUpOwoKIAlhNnh4X3N0YXRlLT5yZWdpc3Rl
cnMgPSBzdGF0ZV9rY2FsbG9jKGE2eHhfc3RhdGUsCiAJCWNvdW50LCBzaXplb2YoKmE2eHhfc3Rh
dGUtPnJlZ2lzdGVycykpOwpAQCAtNzkyLDYgKzgxMywxNSBAQCBzdGF0aWMgdm9pZCBhNnh4X2dl
dF9yZWdpc3RlcnMoc3RydWN0IG1zbV9ncHUgKmdwdSwKIAkJCWE2eHhfc3RhdGUsICZhNnh4X2Fo
Yl9yZWdsaXN0W2ldLAogCQkJJmE2eHhfc3RhdGUtPnJlZ2lzdGVyc1tpbmRleCsrXSk7CgorCWlm
IChhNnh4X2hhc19nYmlmKGFkcmVub19ncHUpKQorCQlhNnh4X2dldF9haGJfZ3B1X3JlZ2lzdGVy
cyhncHUsCisJCQkJYTZ4eF9zdGF0ZSwgJmE2eHhfZ2JpZl9yZWdsaXN0LAorCQkJCSZhNnh4X3N0
YXRlLT5yZWdpc3RlcnNbaW5kZXgrK10pOworCWVsc2UKKwkJYTZ4eF9nZXRfYWhiX2dwdV9yZWdp
c3RlcnMoZ3B1LAorCQkJCWE2eHhfc3RhdGUsICZhNnh4X3ZiaWZfcmVnbGlzdCwKKwkJCQkmYTZ4
eF9zdGF0ZS0+cmVnaXN0ZXJzW2luZGV4KytdKTsKKwogCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9T
SVpFKGE2eHhfcmVnbGlzdCk7IGkrKykKIAkJYTZ4eF9nZXRfY3Jhc2hkdW1wZXJfcmVnaXN0ZXJz
KGdwdSwKIAkJCWE2eHhfc3RhdGUsICZhNnh4X3JlZ2xpc3RbaV0sCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNnh4X2dwdV9zdGF0ZS5oIGIvZHJpdmVycy9ncHUvZHJt
L21zbS9hZHJlbm8vYTZ4eF9ncHVfc3RhdGUuaAppbmRleCA2OGNjY2ZhLi5lNjdjMjBjIDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNnh4X2dwdV9zdGF0ZS5oCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E2eHhfZ3B1X3N0YXRlLmgKQEAgLTEsNSArMSw1
IEBACiAvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMAotLyogQ29weXJpZ2h0IChj
KSAyMDE4IFRoZSBMaW51eCBGb3VuZGF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLiAqLworLyog
Q29weXJpZ2h0IChjKSAyMDE4LTIwMTkgVGhlIExpbnV4IEZvdW5kYXRpb24uIEFsbCByaWdodHMg
cmVzZXJ2ZWQuICovCgogI2lmbmRlZiBfQTZYWF9DUkFTSF9EVU1QX0hfCiAjZGVmaW5lIF9BNlhY
X0NSQVNIX0RVTVBfSF8KQEAgLTMwNywxMSArMzA3LDIwIEBAIHN0cnVjdCBhNnh4X3JlZ2lzdGVy
cyB7CiAJMHgzNDEwLCAweDM0MTAsIDB4MzgwMCwgMHgzODAxLAogfTsKCitzdGF0aWMgY29uc3Qg
dTMyIGE2eHhfZ2JpZl9yZWdpc3RlcnNbXSA9IHsKKwkweDNDMDAsIDBYM0MwQiwgMFgzQzQwLCAw
WDNDNDcsIDBYM0NDMCwgMFgzQ0QxLCAweEUzQSwgMHhFM0EsCit9OworCiBzdGF0aWMgY29uc3Qg
c3RydWN0IGE2eHhfcmVnaXN0ZXJzIGE2eHhfYWhiX3JlZ2xpc3RbXSA9IHsKIAlSRUdTKGE2eHhf
YWhiX3JlZ2lzdGVycywgMCwgMCksCi0JUkVHUyhhNnh4X3ZiaWZfcmVnaXN0ZXJzLCAwLCAwKSwK
IH07Cgorc3RhdGljIGNvbnN0IHN0cnVjdCBhNnh4X3JlZ2lzdGVycyBhNnh4X3ZiaWZfcmVnbGlz
dCA9CisJCQlSRUdTKGE2eHhfdmJpZl9yZWdpc3RlcnMsIDAsIDApOworCitzdGF0aWMgY29uc3Qg
c3RydWN0IGE2eHhfcmVnaXN0ZXJzIGE2eHhfZ2JpZl9yZWdsaXN0ID0KKwkJCVJFR1MoYTZ4eF9n
YmlmX3JlZ2lzdGVycywgMCwgMCk7CisKIHN0YXRpYyBjb25zdCB1MzIgYTZ4eF9nbXVfZ3hfcmVn
aXN0ZXJzW10gPSB7CiAJLyogR01VIEdYICovCiAJMHgwMDAwLCAweDAwMDAsIDB4MDAxMCwgMHgw
MDEzLCAweDAwMTYsIDB4MDAxNiwgMHgwMDE4LCAweDAwMWIsCkBAIC00MjIsNiArNDMxLDkgQEAg
c3RydWN0IGE2eHhfcmVnaXN0ZXJzIHsKIAlERUJVR0JVUyhBNlhYX0RCR0JVU19UUEwxXzMsIDB4
MTAwKSwKIH07Cgorc3RhdGljIGNvbnN0IHN0cnVjdCBhNnh4X2RlYnVnYnVzX2Jsb2NrIGE2eHhf
Z2JpZl9kZWJ1Z2J1c19ibG9jayA9CisJCQlERUJVR0JVUyhBNlhYX0RCR0JVU19WQklGLCAweDEw
MCk7CisKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgYTZ4eF9kZWJ1Z2J1c19ibG9jayBhNnh4X2N4X2Rl
YnVnYnVzX2Jsb2Nrc1tdID0gewogCURFQlVHQlVTKEE2WFhfREJHQlVTX0dNVV9DWCwgMHgxMDAp
LAogCURFQlVHQlVTKEE2WFhfREJHQlVTX0NYLCAweDEwMCksCi0tCjEuOS4xCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBs
aXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
