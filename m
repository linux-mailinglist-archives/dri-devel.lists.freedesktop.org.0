Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1F0D4E1FAB
	for <lists+dri-devel@lfdr.de>; Wed, 23 Oct 2019 17:43:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DA9726EB13;
	Wed, 23 Oct 2019 15:43:49 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x441.google.com (mail-wr1-x441.google.com
 [IPv6:2a00:1450:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 837896EB13
 for <dri-devel@lists.freedesktop.org>; Wed, 23 Oct 2019 15:43:47 +0000 (UTC)
Received: by mail-wr1-x441.google.com with SMTP id w18so22108146wrt.3
 for <dri-devel@lists.freedesktop.org>; Wed, 23 Oct 2019 08:43:47 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=cp/bKPmOd9wwA4BZhWKOauvWXaeJD/pIcjMd6beaxRQ=;
 b=iQQ6wAoE5KeeUa4e0dQankZtTpv+6qBNzy6ztP8nWFOgBhcDgKRk1aFER80WlFt0rN
 PIALrHLZ4/672aRx5h489cG4zu0TkMYqPjWzbubIn2GQ8Ygo+bRdSjswqPYkB0BIAFJ5
 Z6+RBIuRV4Zyczla+3/zzzQ+SbL5OP6MmrpQJthLeSAsQ8DSl37MIEOMJRjI1hnTDF9h
 FqS+fy8pH/4bzc3hLI6pVFTeelGwLxzDQocOf+sBP6lwx5yKuroYid9rKu8xr2FYRejz
 PvqH8SiqdsXfasmkVIYhzSKONASAYk4Z9LcSwba3QDAA6LUJTs2fOMHtCMurcbIHOnBS
 eodQ==
X-Gm-Message-State: APjAAAW8XgrJUh9yXz93YX7cYkcjJKFEpaQkEFqZ5Wg8uNq6jU7i7tx3
 iIOFXGwkZMS055wLMWXxdOOkybwYTadcsg==
X-Google-Smtp-Source: APXvYqxNW7pX8Ad3lZSxQ/eqvR5t4G3x36lwT8btH4OZn3/Gn7z2W416Q+XgJz+E5urIkkOXRyTYWA==
X-Received: by 2002:adf:e446:: with SMTP id t6mr8980725wrm.7.1571845425844;
 Wed, 23 Oct 2019 08:43:45 -0700 (PDT)
Received: from holly.lan (cpc141214-aztw34-2-0-cust773.18-1.cable.virginm.net.
 [86.9.19.6])
 by smtp.gmail.com with ESMTPSA id 12sm15136004wmk.13.2019.10.23.08.43.44
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 23 Oct 2019 08:43:45 -0700 (PDT)
Date: Wed, 23 Oct 2019 16:43:43 +0100
From: Daniel Thompson <daniel.thompson@linaro.org>
To: Kiran Gunda <kgunda@codeaurora.org>
Subject: Re: [PATCH V9 6/6] backlight: qcom-wled: Add auto string detection
 logic
Message-ID: <20191023154343.p5tc7m5muez3td46@holly.lan>
References: <1571814423-6535-1-git-send-email-kgunda@codeaurora.org>
 <1571814423-6535-7-git-send-email-kgunda@codeaurora.org>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <1571814423-6535-7-git-send-email-kgunda@codeaurora.org>
User-Agent: NeoMutt/20180716
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=cp/bKPmOd9wwA4BZhWKOauvWXaeJD/pIcjMd6beaxRQ=;
 b=le/ggxrtxBY0aOfi5C32/o6JeR/4ennlok4WqnjTgQx7s9X1xDaDNz9CcPys+4Da/u
 +l4GR7jZlPHmDB9FqWPUeXo188cyFjdNJIFXoZAyXtwRdiUbh6XQ9b6GyYun46CHL/o1
 6HRGtILIunUXlhxYtJDuZ0wx05ULasV2hwY0NNkkFkep29gtTTupyBctD/7W0pYsiFF9
 O0vM/7qVhFfVTanPnnMbFg8Y0ia/5MP98XgupTU79vw23VA9+ekx4Imj6+w1aAtvUZZ9
 DYKtEqZzxezcsbEcoQQ9xvaNmOuD9Btk90igjbE8u6deXPO4j/25sSSo79H4wtyo4HbI
 8Rdw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org,
 linux-fbdev@vger.kernel.org, b.zolnierkie@samsung.com, jingoohan1@gmail.com,
 Andy Gross <agross@kernel.org>, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, bjorn.andersson@linaro.org,
 robh+dt@kernel.org, jacek.anaszewski@gmail.com, pavel@ucw.cz,
 linux-arm-msm@vger.kernel.org, lee.jones@linaro.org,
 linux-leds@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBPY3QgMjMsIDIwMTkgYXQgMTI6Mzc6MDNQTSArMDUzMCwgS2lyYW4gR3VuZGEgd3Jv
dGU6Cj4gVGhlIGF1dG8gc3RyaW5nIGRldGVjdGlvbiBhbGdvcml0aG0gY2hlY2tzIGlmIHRoZSBj
dXJyZW50IFdMRUQKPiBzaW5rIGNvbmZpZ3VyYXRpb24gaXMgdmFsaWQuIEl0IHRyaWVzIGVuYWJs
aW5nIGV2ZXJ5IHNpbmsgYW5kCj4gY2hlY2tzIGlmIHRoZSBPVlAgZmF1bHQgaXMgb2JzZXJ2ZWQu
IEJhc2VkIG9uIHRoaXMgaW5mb3JtYXRpb24KPiBpdCBkZXRlY3RzIGFuZCBlbmFibGVzIHRoZSB2
YWxpZCBzaW5rIGNvbmZpZ3VyYXRpb24uCj4gQXV0byBjYWxpYnJhdGlvbiB3aWxsIGJlIHRyaWdn
ZXJlZCB3aGVuIHRoZSBPVlAgZmF1bHQgaW50ZXJydXB0cwo+IGFyZSBzZWVuIGZyZXF1ZW50bHkg
dGhlcmVieSBpdCB0cmllcyB0byBmaXggdGhlIHNpbmsgY29uZmlndXJhdGlvbi4KPiAKPiBUaGUg
YXV0by1kZXRlY3Rpb24gYWxzbyBraWNrcyBpbiB3aGVuIHRoZSBjb25uZWN0ZWQgTEVEIHN0cmlu
Zwo+IG9mIHRoZSBkaXNwbGF5LWJhY2tsaWdodCBtYWxmdW5jdGlvbnMgKGJlY2F1c2Ugb2YgZGFt
YWdlKSBhbmQKPiByZXF1aXJlcyB0aGUgZGFtYWdlZCBzdHJpbmcgdG8gYmUgdHVybmVkIG9mZiB0
byBwcmV2ZW50IHRoZQo+IGNvbXBsZXRlIHBhbmVsIGFuZC9vciBib2FyZCBmcm9tIGJlaW5nIGRh
bWFnZWQuCj4gCj4gU2lnbmVkLW9mZi1ieTogS2lyYW4gR3VuZGEgPGtndW5kYUBjb2RlYXVyb3Jh
Lm9yZz4KClJldmlld2VkLWJ5OiBEYW5pZWwgVGhvbXBzb24gPGRhbmllbC50aG9tcHNvbkBsaW5h
cm8ub3JnPgoKPiAtLS0KPiAgZHJpdmVycy92aWRlby9iYWNrbGlnaHQvcWNvbS13bGVkLmMgfCA0
MDAgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystCj4gIDEgZmlsZSBjaGFuZ2Vk
LCAzOTQgaW5zZXJ0aW9ucygrKSwgNiBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy92aWRlby9iYWNrbGlnaHQvcWNvbS13bGVkLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdo
dC9xY29tLXdsZWQuYwo+IGluZGV4IDY1OGIxZTAuLjMzYjYwMDcgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy92aWRlby9iYWNrbGlnaHQvcWNvbS13bGVkLmMKPiArKysgYi9kcml2ZXJzL3ZpZGVvL2Jh
Y2tsaWdodC9xY29tLXdsZWQuYwo+IEBAIC0xNywxOSArMTcsMjkgQEAKPiAgI2RlZmluZSBXTEVE
X01BWF9TVFJJTkdTCQkJCTQKPiAgCj4gICNkZWZpbmUgV0xFRF9ERUZBVUxUX0JSSUdIVE5FU1MJ
CQkJMjA0OAo+IC0KPiArI2RlZmluZSBXTEVEX1NPRlRfU1RBUlRfRExZX1VTCQkJCTEwMDAwCj4g
ICNkZWZpbmUgV0xFRDNfU0lOS19SRUdfQlJJR0hUX01BWAkJCTB4RkZGCj4gIAo+ICAvKiBXTEVE
My9XTEVENCBjb250cm9sIHJlZ2lzdGVycyAqLwo+ICsjZGVmaW5lIFdMRUQzX0NUUkxfUkVHX0ZB
VUxUX1NUQVRVUwkJCTB4MDgKPiArI2RlZmluZSAgV0xFRDNfQ1RSTF9SRUdfSUxJTV9GQVVMVF9C
SVQJCQlCSVQoMCkKPiArI2RlZmluZSAgV0xFRDNfQ1RSTF9SRUdfT1ZQX0ZBVUxUX0JJVAkJCUJJ
VCgxKQo+ICsjZGVmaW5lICBXTEVENF9DVFJMX1JFR19TQ19GQVVMVF9CSVQJCQlCSVQoMikKPiAr
Cj4gKyNkZWZpbmUgV0xFRDNfQ1RSTF9SRUdfSU5UX1JUX1NUUwkJCTB4MTAKPiArI2RlZmluZSAg
V0xFRDNfQ1RSTF9SRUdfT1ZQX0ZBVUxUX1NUQVRVUwkJQklUKDEpCj4gKwo+ICAjZGVmaW5lIFdM
RUQzX0NUUkxfUkVHX01PRF9FTgkJCQkweDQ2Cj4gICNkZWZpbmUgIFdMRUQzX0NUUkxfUkVHX01P
RF9FTl9NQVNLCQkJQklUKDcpCj4gICNkZWZpbmUgIFdMRUQzX0NUUkxfUkVHX01PRF9FTl9TSElG
VAkJCTcKPiAgCj4gKyNkZWZpbmUgV0xFRDNfQ1RSTF9SRUdfRkVFREJBQ0tfQ09OVFJPTAkJCTB4
NDgKPiArCj4gICNkZWZpbmUgV0xFRDNfQ1RSTF9SRUdfRlJFUQkJCQkweDRjCj4gICNkZWZpbmUg
IFdMRUQzX0NUUkxfUkVHX0ZSRVFfTUFTSwkJCUdFTk1BU0soMywgMCkKPiAgCj4gICNkZWZpbmUg
V0xFRDNfQ1RSTF9SRUdfT1ZQCQkJCTB4NGQKPiAtI2RlZmluZSAgV0xFRDNfQ1RSTF9SRUdfT1ZQ
X01BU0sJCQkJR0VOTUFTSygxLCAwKQo+ICsjZGVmaW5lICBXTEVEM19DVFJMX1JFR19PVlBfTUFT
SwkJCUdFTk1BU0soMSwgMCkKPiAgCj4gICNkZWZpbmUgV0xFRDNfQ1RSTF9SRUdfSUxJTUlUCQkJ
CTB4NGUKPiAgI2RlZmluZSAgV0xFRDNfQ1RSTF9SRUdfSUxJTUlUX01BU0sJCQlHRU5NQVNLKDIs
IDApCj4gQEAgLTExOSw2ICsxMjksNyBAQCBzdHJ1Y3Qgd2xlZF9jb25maWcgewo+ICAJYm9vbCBl
eHRfZ2VuOwo+ICAJYm9vbCBjYWJjOwo+ICAJYm9vbCBleHRlcm5hbF9wZmV0Owo+ICsJYm9vbCBh
dXRvX2RldGVjdGlvbl9lbmFibGVkOwo+ICB9Owo+ICAKPiAgc3RydWN0IHdsZWQgewo+IEBAIC0x
MjcsMTcgKzEzOCwyMiBAQCBzdHJ1Y3Qgd2xlZCB7Cj4gIAlzdHJ1Y3QgcmVnbWFwICpyZWdtYXA7
Cj4gIAlzdHJ1Y3QgbXV0ZXggbG9jazsJLyogTG9jayB0byBhdm9pZCByYWNlIGZyb20gdGhyZWFk
IGlycSBoYW5kbGVyICovCj4gIAlrdGltZV90IGxhc3Rfc2hvcnRfZXZlbnQ7Cj4gKwlrdGltZV90
IHN0YXJ0X292cF9mYXVsdF90aW1lOwo+ICAJdTE2IGN0cmxfYWRkcjsKPiAgCXUxNiBzaW5rX2Fk
ZHI7Cj4gIAl1MTYgbWF4X3N0cmluZ19jb3VudDsKPiArCXUxNiBhdXRvX2RldGVjdGlvbl9vdnBf
Y291bnQ7Cj4gIAl1MzIgYnJpZ2h0bmVzczsKPiAgCXUzMiBtYXhfYnJpZ2h0bmVzczsKPiAgCXUz
MiBzaG9ydF9jb3VudDsKPiArCXUzMiBhdXRvX2RldGVjdF9jb3VudDsKPiAgCWJvb2wgZGlzYWJs
ZWRfYnlfc2hvcnQ7Cj4gIAlib29sIGhhc19zaG9ydF9kZXRlY3Q7Cj4gIAlpbnQgc2hvcnRfaXJx
Owo+ICsJaW50IG92cF9pcnE7Cj4gIAo+ICAJc3RydWN0IHdsZWRfY29uZmlnIGNmZzsKPiArCXN0
cnVjdCBkZWxheWVkX3dvcmsgb3ZwX3dvcms7Cj4gIAlpbnQgKCp3bGVkX3NldF9icmlnaHRuZXNz
KShzdHJ1Y3Qgd2xlZCAqd2xlZCwgdTE2IGJyaWdodG5lc3MpOwo+ICB9Owo+ICAKPiBAQCAtMTgy
LDYgKzE5OCwxMyBAQCBzdGF0aWMgaW50IHdsZWQ0X3NldF9icmlnaHRuZXNzKHN0cnVjdCB3bGVk
ICp3bGVkLCB1MTYgYnJpZ2h0bmVzcykKPiAgCXJldHVybiAwOwo+ICB9Cj4gIAo+ICtzdGF0aWMg
dm9pZCB3bGVkX292cF93b3JrKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKPiArewo+ICsJc3Ry
dWN0IHdsZWQgKndsZWQgPSBjb250YWluZXJfb2Yod29yaywKPiArCQkJCQkgc3RydWN0IHdsZWQs
IG92cF93b3JrLndvcmspOwo+ICsJZW5hYmxlX2lycSh3bGVkLT5vdnBfaXJxKTsKPiArfQo+ICsK
PiAgc3RhdGljIGludCB3bGVkX21vZHVsZV9lbmFibGUoc3RydWN0IHdsZWQgKndsZWQsIGludCB2
YWwpCj4gIHsKPiAgCWludCByYzsKPiBAQCAtMTkzLDcgKzIxNiwyNSBAQCBzdGF0aWMgaW50IHds
ZWRfbW9kdWxlX2VuYWJsZShzdHJ1Y3Qgd2xlZCAqd2xlZCwgaW50IHZhbCkKPiAgCQkJCVdMRUQz
X0NUUkxfUkVHX01PRF9FTiwKPiAgCQkJCVdMRUQzX0NUUkxfUkVHX01PRF9FTl9NQVNLLAo+ICAJ
CQkJdmFsIDw8IFdMRUQzX0NUUkxfUkVHX01PRF9FTl9TSElGVCk7Cj4gLQlyZXR1cm4gcmM7Cj4g
KwlpZiAocmMgPCAwKQo+ICsJCXJldHVybiByYzsKPiArCj4gKwlpZiAod2xlZC0+b3ZwX2lycSA+
IDApIHsKPiArCQlpZiAodmFsKSB7Cj4gKwkJCS8qCj4gKwkJCSAqIFRoZSBoYXJkd2FyZSBnZW5l
cmF0ZXMgYSBzdG9ybSBvZiBzcHVyaW91cyBPVlAKPiArCQkJICogaW50ZXJydXB0cyBkdXJpbmcg
c29mdCBzdGFydCBvcGVyYXRpb25zLiBTbyBkZWZlcgo+ICsJCQkgKiBlbmFibGluZyB0aGUgSVJR
IGZvciAxMG1zIHRvIGVuc3VyZSB0aGF0IHRoZQo+ICsJCQkgKiBzb2Z0IHN0YXJ0IGlzIGNvbXBs
ZXRlLgo+ICsJCQkgKi8KPiArCQkJc2NoZWR1bGVfZGVsYXllZF93b3JrKCZ3bGVkLT5vdnBfd29y
aywgSFogLyAxMDApOwo+ICsJCX0gZWxzZSB7Cj4gKwkJCWlmICghY2FuY2VsX2RlbGF5ZWRfd29y
a19zeW5jKCZ3bGVkLT5vdnBfd29yaykpCj4gKwkJCQlkaXNhYmxlX2lycSh3bGVkLT5vdnBfaXJx
KTsKPiArCQl9Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gIH0KPiAgCj4gIHN0YXRpYyBpbnQg
d2xlZF9zeW5jX3RvZ2dsZShzdHJ1Y3Qgd2xlZCAqd2xlZCkKPiBAQCAtMzAwLDYgKzM0MSwzMDQg
QEAgc3RhdGljIGlycXJldHVybl90IHdsZWRfc2hvcnRfaXJxX2hhbmRsZXIoaW50IGlycSwgdm9p
ZCAqX3dsZWQpCj4gIAlyZXR1cm4gSVJRX0hBTkRMRUQ7Cj4gIH0KPiAgCj4gKyNkZWZpbmUgQVVU
T19ERVRFQ1RfQlJJR0hUTkVTUwkJMjAwCj4gKwo+ICtzdGF0aWMgdm9pZCB3bGVkX2F1dG9fc3Ry
aW5nX2RldGVjdGlvbihzdHJ1Y3Qgd2xlZCAqd2xlZCkKPiArewo+ICsJaW50IHJjID0gMCwgaTsK
PiArCXUzMiBzaW5rX2NvbmZpZyA9IDAsIGludF9zdHM7Cj4gKwl1OCBzaW5rX3Rlc3QgPSAwLCBz
aW5rX3ZhbGlkID0gMCwgdmFsOwo+ICsKPiArCS8qIFJlYWQgY29uZmlndXJlZCBzaW5rIGNvbmZp
Z3VyYXRpb24gKi8KPiArCXJjID0gcmVnbWFwX3JlYWQod2xlZC0+cmVnbWFwLCB3bGVkLT5zaW5r
X2FkZHIgKwo+ICsJCQkgV0xFRDRfU0lOS19SRUdfQ1VSUl9TSU5LLCAmc2lua19jb25maWcpOwo+
ICsJaWYgKHJjIDwgMCkgewo+ICsJCWRldl9lcnIod2xlZC0+ZGV2LCAiRmFpbGVkIHRvIHJlYWQg
U0lOSyBjb25maWd1cmF0aW9uIHJjPSVkXG4iLAo+ICsJCQlyYyk7Cj4gKwkJZ290byBmYWlsZWRf
ZGV0ZWN0Owo+ICsJfQo+ICsKPiArCS8qIERpc2FibGUgdGhlIG1vZHVsZSBiZWZvcmUgc3RhcnRp
bmcgZGV0ZWN0aW9uICovCj4gKwlyYyA9IHJlZ21hcF91cGRhdGVfYml0cyh3bGVkLT5yZWdtYXAs
Cj4gKwkJCQl3bGVkLT5jdHJsX2FkZHIgKyBXTEVEM19DVFJMX1JFR19NT0RfRU4sCj4gKwkJCQlX
TEVEM19DVFJMX1JFR19NT0RfRU5fTUFTSywgMCk7Cj4gKwlpZiAocmMgPCAwKSB7Cj4gKwkJZGV2
X2Vycih3bGVkLT5kZXYsICJGYWlsZWQgdG8gZGlzYWJsZSBXTEVEIG1vZHVsZSByYz0lZFxuIiwg
cmMpOwo+ICsJCWdvdG8gZmFpbGVkX2RldGVjdDsKPiArCX0KPiArCj4gKwkvKiBTZXQgbG93IGJy
aWdodG5lc3MgYWNyb3NzIGFsbCBzaW5rcyAqLwo+ICsJcmMgPSB3bGVkNF9zZXRfYnJpZ2h0bmVz
cyh3bGVkLCBBVVRPX0RFVEVDVF9CUklHSFRORVNTKTsKPiArCWlmIChyYyA8IDApIHsKPiArCQlk
ZXZfZXJyKHdsZWQtPmRldiwgIkZhaWxlZCB0byBzZXQgYnJpZ2h0bmVzcyBmb3IgYXV0byBkZXRl
Y3Rpb24gcmM9JWRcbiIsCj4gKwkJCXJjKTsKPiArCQlnb3RvIGZhaWxlZF9kZXRlY3Q7Cj4gKwl9
Cj4gKwo+ICsJaWYgKHdsZWQtPmNmZy5jYWJjKSB7Cj4gKwkJZm9yIChpID0gMDsgaSA8IHdsZWQt
PmNmZy5udW1fc3RyaW5nczsgaSsrKSB7Cj4gKwkJCXJjID0gcmVnbWFwX3VwZGF0ZV9iaXRzKHds
ZWQtPnJlZ21hcCwgd2xlZC0+c2lua19hZGRyICsKPiArCQkJCQkJV0xFRDRfU0lOS19SRUdfU1RS
X0NBQkMoaSksCj4gKwkJCQkJCVdMRUQ0X1NJTktfUkVHX1NUUl9DQUJDX01BU0ssCj4gKwkJCQkJ
CTApOwo+ICsJCQlpZiAocmMgPCAwKQo+ICsJCQkJZ290byBmYWlsZWRfZGV0ZWN0Owo+ICsJCX0K
PiArCX0KPiArCj4gKwkvKiBEaXNhYmxlIGFsbCBzaW5rcyAqLwo+ICsJcmMgPSByZWdtYXBfd3Jp
dGUod2xlZC0+cmVnbWFwLAo+ICsJCQkgIHdsZWQtPnNpbmtfYWRkciArIFdMRUQ0X1NJTktfUkVH
X0NVUlJfU0lOSywgMCk7Cj4gKwlpZiAocmMgPCAwKSB7Cj4gKwkJZGV2X2Vycih3bGVkLT5kZXYs
ICJGYWlsZWQgdG8gZGlzYWJsZSBhbGwgc2lua3MgcmM9JWRcbiIsIHJjKTsKPiArCQlnb3RvIGZh
aWxlZF9kZXRlY3Q7Cj4gKwl9Cj4gKwo+ICsJLyogSXRlcmF0ZSB0aHJvdWdoIHRoZSBzdHJpbmdz
IG9uZSBieSBvbmUgKi8KPiArCWZvciAoaSA9IDA7IGkgPCB3bGVkLT5jZmcubnVtX3N0cmluZ3M7
IGkrKykgewo+ICsJCXNpbmtfdGVzdCA9IEJJVCgoV0xFRDRfU0lOS19SRUdfQ1VSUl9TSU5LX1NI
RlQgKyBpKSk7Cj4gKwo+ICsJCS8qIEVuYWJsZSBmZWVkYmFjayBjb250cm9sICovCj4gKwkJcmMg
PSByZWdtYXBfd3JpdGUod2xlZC0+cmVnbWFwLCB3bGVkLT5jdHJsX2FkZHIgKwo+ICsJCQkJICBX
TEVEM19DVFJMX1JFR19GRUVEQkFDS19DT05UUk9MLCBpICsgMSk7Cj4gKwkJaWYgKHJjIDwgMCkg
ewo+ICsJCQlkZXZfZXJyKHdsZWQtPmRldiwgIkZhaWxlZCB0byBlbmFibGUgZmVlZGJhY2sgZm9y
IFNJTksgJWQgcmMgPSAlZFxuIiwKPiArCQkJCWkgKyAxLCByYyk7Cj4gKwkJCWdvdG8gZmFpbGVk
X2RldGVjdDsKPiArCQl9Cj4gKwo+ICsJCS8qIEVuYWJsZSB0aGUgc2luayAqLwo+ICsJCXJjID0g
cmVnbWFwX3dyaXRlKHdsZWQtPnJlZ21hcCwgd2xlZC0+c2lua19hZGRyICsKPiArCQkJCSAgV0xF
RDRfU0lOS19SRUdfQ1VSUl9TSU5LLCBzaW5rX3Rlc3QpOwo+ICsJCWlmIChyYyA8IDApIHsKPiAr
CQkJZGV2X2Vycih3bGVkLT5kZXYsICJGYWlsZWQgdG8gY29uZmlndXJlIFNJTksgJWQgcmM9JWRc
biIsCj4gKwkJCQlpICsgMSwgcmMpOwo+ICsJCQlnb3RvIGZhaWxlZF9kZXRlY3Q7Cj4gKwkJfQo+
ICsKPiArCQkvKiBFbmFibGUgdGhlIG1vZHVsZSAqLwo+ICsJCXJjID0gcmVnbWFwX3VwZGF0ZV9i
aXRzKHdsZWQtPnJlZ21hcCwgd2xlZC0+Y3RybF9hZGRyICsKPiArCQkJCQlXTEVEM19DVFJMX1JF
R19NT0RfRU4sCj4gKwkJCQkJV0xFRDNfQ1RSTF9SRUdfTU9EX0VOX01BU0ssCj4gKwkJCQkJV0xF
RDNfQ1RSTF9SRUdfTU9EX0VOX01BU0spOwo+ICsJCWlmIChyYyA8IDApIHsKPiArCQkJZGV2X2Vy
cih3bGVkLT5kZXYsICJGYWlsZWQgdG8gZW5hYmxlIFdMRUQgbW9kdWxlIHJjPSVkXG4iLAo+ICsJ
CQkJcmMpOwo+ICsJCQlnb3RvIGZhaWxlZF9kZXRlY3Q7Cj4gKwkJfQo+ICsKPiArCQl1c2xlZXBf
cmFuZ2UoV0xFRF9TT0ZUX1NUQVJUX0RMWV9VUywKPiArCQkJICAgICBXTEVEX1NPRlRfU1RBUlRf
RExZX1VTICsgMTAwMCk7Cj4gKwo+ICsJCXJjID0gcmVnbWFwX3JlYWQod2xlZC0+cmVnbWFwLCB3
bGVkLT5jdHJsX2FkZHIgKwo+ICsJCQkJIFdMRUQzX0NUUkxfUkVHX0lOVF9SVF9TVFMsICZpbnRf
c3RzKTsKPiArCQlpZiAocmMgPCAwKSB7Cj4gKwkJCWRldl9lcnIod2xlZC0+ZGV2LCAiRXJyb3Ig
aW4gcmVhZGluZyBXTEVEM19DVFJMX0lOVF9SVF9TVFMgcmM9JWRcbiIsCj4gKwkJCQlyYyk7Cj4g
KwkJCWdvdG8gZmFpbGVkX2RldGVjdDsKPiArCQl9Cj4gKwo+ICsJCWlmIChpbnRfc3RzICYgV0xF
RDNfQ1RSTF9SRUdfT1ZQX0ZBVUxUX1NUQVRVUykKPiArCQkJZGV2X2RiZyh3bGVkLT5kZXYsICJX
TEVEIE9WUCBmYXVsdCBkZXRlY3RlZCB3aXRoIFNJTksgJWRcbiIsCj4gKwkJCQlpICsgMSk7Cj4g
KwkJZWxzZQo+ICsJCQlzaW5rX3ZhbGlkIHw9IHNpbmtfdGVzdDsKPiArCj4gKwkJLyogRGlzYWJs
ZSB0aGUgbW9kdWxlICovCj4gKwkJcmMgPSByZWdtYXBfdXBkYXRlX2JpdHMod2xlZC0+cmVnbWFw
LAo+ICsJCQkJCXdsZWQtPmN0cmxfYWRkciArIFdMRUQzX0NUUkxfUkVHX01PRF9FTiwKPiArCQkJ
CQlXTEVEM19DVFJMX1JFR19NT0RfRU5fTUFTSywgMCk7Cj4gKwkJaWYgKHJjIDwgMCkgewo+ICsJ
CQlkZXZfZXJyKHdsZWQtPmRldiwgIkZhaWxlZCB0byBkaXNhYmxlIFdMRUQgbW9kdWxlIHJjPSVk
XG4iLAo+ICsJCQkJcmMpOwo+ICsJCQlnb3RvIGZhaWxlZF9kZXRlY3Q7Cj4gKwkJfQo+ICsJfQo+
ICsKPiArCWlmICghc2lua192YWxpZCkgewo+ICsJCWRldl9lcnIod2xlZC0+ZGV2LCAiTm8gdmFs
aWQgV0xFRCBzaW5rcyBmb3VuZFxuIik7Cj4gKwkJd2xlZC0+ZGlzYWJsZWRfYnlfc2hvcnQgPSB0
cnVlOwo+ICsJCWdvdG8gZmFpbGVkX2RldGVjdDsKPiArCX0KPiArCj4gKwlpZiAoc2lua192YWxp
ZCAhPSBzaW5rX2NvbmZpZykgewo+ICsJCWRldl93YXJuKHdsZWQtPmRldiwgIiV4IGlzIG5vdCBh
IHZhbGlkIHNpbmsgY29uZmlndXJhdGlvbiAtIHVzaW5nICV4IGluc3RlYWRcbiIsCj4gKwkJCSBz
aW5rX2NvbmZpZywgc2lua192YWxpZCk7Cj4gKwkJc2lua19jb25maWcgPSBzaW5rX3ZhbGlkOwo+
ICsJfQo+ICsKPiArCS8qIFdyaXRlIHRoZSBuZXcgc2luayBjb25maWd1cmF0aW9uICovCj4gKwly
YyA9IHJlZ21hcF93cml0ZSh3bGVkLT5yZWdtYXAsCj4gKwkJCSAgd2xlZC0+c2lua19hZGRyICsg
V0xFRDRfU0lOS19SRUdfQ1VSUl9TSU5LLAo+ICsJCQkgIHNpbmtfY29uZmlnKTsKPiArCWlmIChy
YyA8IDApIHsKPiArCQlkZXZfZXJyKHdsZWQtPmRldiwgIkZhaWxlZCB0byByZWNvbmZpZ3VyZSB0
aGUgZGVmYXVsdCBzaW5rIHJjPSVkXG4iLAo+ICsJCQlyYyk7Cj4gKwkJZ290byBmYWlsZWRfZGV0
ZWN0Owo+ICsJfQo+ICsKPiArCS8qIEVuYWJsZSB2YWxpZCBzaW5rcyAqLwo+ICsJZm9yIChpID0g
MDsgaSA8IHdsZWQtPmNmZy5udW1fc3RyaW5nczsgaSsrKSB7Cj4gKwkJaWYgKHdsZWQtPmNmZy5j
YWJjKSB7Cj4gKwkJCXJjID0gcmVnbWFwX3VwZGF0ZV9iaXRzKHdsZWQtPnJlZ21hcCwgd2xlZC0+
c2lua19hZGRyICsKPiArCQkJCQkJV0xFRDRfU0lOS19SRUdfU1RSX0NBQkMoaSksCj4gKwkJCQkJ
CVdMRUQ0X1NJTktfUkVHX1NUUl9DQUJDX01BU0ssCj4gKwkJCQkJCVdMRUQ0X1NJTktfUkVHX1NU
Ul9DQUJDX01BU0spOwo+ICsJCQlpZiAocmMgPCAwKQo+ICsJCQkJZ290byBmYWlsZWRfZGV0ZWN0
Owo+ICsJCX0KPiArCj4gKwkJaWYgKHNpbmtfY29uZmlnICYgQklUKFdMRUQ0X1NJTktfUkVHX0NV
UlJfU0lOS19TSEZUICsgaSkpCj4gKwkJCXZhbCA9IFdMRUQ0X1NJTktfUkVHX1NUUl9NT0RfTUFT
SzsKPiArCQllbHNlCj4gKwkJCXZhbCA9IDB4MDsgLyogRGlzYWJsZSBtb2R1bGF0b3JfZW4gZm9y
IHVudXNlZCBzaW5rICovCj4gKwo+ICsJCXJjID0gcmVnbWFwX3dyaXRlKHdsZWQtPnJlZ21hcCwg
d2xlZC0+c2lua19hZGRyICsKPiArCQkJCSAgV0xFRDRfU0lOS19SRUdfU1RSX01PRF9FTihpKSwg
dmFsKTsKPiArCQlpZiAocmMgPCAwKSB7Cj4gKwkJCWRldl9lcnIod2xlZC0+ZGV2LCAiRmFpbGVk
IHRvIGNvbmZpZ3VyZSBNT0RVTEFUT1JfRU4gcmM9JWRcbiIsCj4gKwkJCQlyYyk7Cj4gKwkJCWdv
dG8gZmFpbGVkX2RldGVjdDsKPiArCQl9Cj4gKwl9Cj4gKwo+ICsJLyogUmVzdG9yZSB0aGUgZmVl
ZGJhY2sgc2V0dGluZyAqLwo+ICsJcmMgPSByZWdtYXBfd3JpdGUod2xlZC0+cmVnbWFwLAo+ICsJ
CQkgIHdsZWQtPmN0cmxfYWRkciArIFdMRUQzX0NUUkxfUkVHX0ZFRURCQUNLX0NPTlRST0wsIDAp
Owo+ICsJaWYgKHJjIDwgMCkgewo+ICsJCWRldl9lcnIod2xlZC0+ZGV2LCAiRmFpbGVkIHRvIHJl
c3RvcmUgZmVlZGJhY2sgc2V0dGluZyByYz0lZFxuIiwKPiArCQkJcmMpOwo+ICsJCWdvdG8gZmFp
bGVkX2RldGVjdDsKPiArCX0KPiArCj4gKwkvKiBSZXN0b3JlIGJyaWdodG5lc3MgKi8KPiArCXJj
ID0gd2xlZDRfc2V0X2JyaWdodG5lc3Mod2xlZCwgd2xlZC0+YnJpZ2h0bmVzcyk7Cj4gKwlpZiAo
cmMgPCAwKSB7Cj4gKwkJZGV2X2Vycih3bGVkLT5kZXYsICJGYWlsZWQgdG8gc2V0IGJyaWdodG5l
c3MgYWZ0ZXIgYXV0byBkZXRlY3Rpb24gcmM9JWRcbiIsCj4gKwkJCXJjKTsKPiArCQlnb3RvIGZh
aWxlZF9kZXRlY3Q7Cj4gKwl9Cj4gKwo+ICsJcmMgPSByZWdtYXBfdXBkYXRlX2JpdHMod2xlZC0+
cmVnbWFwLAo+ICsJCQkJd2xlZC0+Y3RybF9hZGRyICsgV0xFRDNfQ1RSTF9SRUdfTU9EX0VOLAo+
ICsJCQkJV0xFRDNfQ1RSTF9SRUdfTU9EX0VOX01BU0ssCj4gKwkJCQlXTEVEM19DVFJMX1JFR19N
T0RfRU5fTUFTSyk7Cj4gKwlpZiAocmMgPCAwKSB7Cj4gKwkJZGV2X2Vycih3bGVkLT5kZXYsICJG
YWlsZWQgdG8gZW5hYmxlIFdMRUQgbW9kdWxlIHJjPSVkXG4iLCByYyk7Cj4gKwkJZ290byBmYWls
ZWRfZGV0ZWN0Owo+ICsJfQo+ICsKPiArZmFpbGVkX2RldGVjdDoKPiArCXJldHVybjsKPiArfQo+
ICsKPiArI2RlZmluZSBXTEVEX0FVVE9fREVURUNUX09WUF9DT1VOVAkJNQo+ICsjZGVmaW5lIFdM
RURfQVVUT19ERVRFQ1RfQ05UX0RMWV9VUwkJVVNFQ19QRVJfU0VDCj4gK3N0YXRpYyBib29sIHds
ZWRfYXV0b19kZXRlY3Rpb25fcmVxdWlyZWQoc3RydWN0IHdsZWQgKndsZWQpCj4gK3sKPiArCXM2
NCBlbGFwc2VkX3RpbWVfdXM7Cj4gKwo+ICsJaWYgKCF3bGVkLT5jZmcuYXV0b19kZXRlY3Rpb25f
ZW5hYmxlZCkKPiArCQlyZXR1cm4gZmFsc2U7Cj4gKwo+ICsJLyoKPiArCSAqIENoZWNrIGlmIHRo
ZSBPVlAgZmF1bHQgd2FzIGFuIG9jY2FzaW9uYWwgb25lCj4gKwkgKiBvciBpZiBpdCdzIGZpcmlu
ZyBjb250aW51b3VzbHksIHRoZSBsYXR0ZXIgcXVhbGlmaWVzCj4gKwkgKiBmb3IgYW4gYXV0by1k
ZXRlY3Rpb24gY2hlY2suCj4gKwkgKi8KPiArCWlmICghd2xlZC0+YXV0b19kZXRlY3Rpb25fb3Zw
X2NvdW50KSB7Cj4gKwkJd2xlZC0+c3RhcnRfb3ZwX2ZhdWx0X3RpbWUgPSBrdGltZV9nZXQoKTsK
PiArCQl3bGVkLT5hdXRvX2RldGVjdGlvbl9vdnBfY291bnQrKzsKPiArCX0gZWxzZSB7Cj4gKwkJ
ZWxhcHNlZF90aW1lX3VzID0ga3RpbWVfdXNfZGVsdGEoa3RpbWVfZ2V0KCksCj4gKwkJCQkJCSB3
bGVkLT5zdGFydF9vdnBfZmF1bHRfdGltZSk7Cj4gKwkJaWYgKGVsYXBzZWRfdGltZV91cyA+IFdM
RURfQVVUT19ERVRFQ1RfQ05UX0RMWV9VUykKPiArCQkJd2xlZC0+YXV0b19kZXRlY3Rpb25fb3Zw
X2NvdW50ID0gMDsKPiArCQllbHNlCj4gKwkJCXdsZWQtPmF1dG9fZGV0ZWN0aW9uX292cF9jb3Vu
dCsrOwo+ICsKPiArCQlpZiAod2xlZC0+YXV0b19kZXRlY3Rpb25fb3ZwX2NvdW50ID49Cj4gKwkJ
CQlXTEVEX0FVVE9fREVURUNUX09WUF9DT1VOVCkgewo+ICsJCQl3bGVkLT5hdXRvX2RldGVjdGlv
bl9vdnBfY291bnQgPSAwOwo+ICsJCQlyZXR1cm4gdHJ1ZTsKPiArCQl9Cj4gKwl9Cj4gKwo+ICsJ
cmV0dXJuIGZhbHNlOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHdsZWRfYXV0b19kZXRlY3Rpb25f
YXRfaW5pdChzdHJ1Y3Qgd2xlZCAqd2xlZCkKPiArewo+ICsJaW50IHJjOwo+ICsJdTMyIGZhdWx0
X3N0YXR1cywgcnRfc3RhdHVzOwo+ICsKPiArCWlmICghd2xlZC0+Y2ZnLmF1dG9fZGV0ZWN0aW9u
X2VuYWJsZWQpCj4gKwkJcmV0dXJuIDA7Cj4gKwo+ICsJcmMgPSByZWdtYXBfcmVhZCh3bGVkLT5y
ZWdtYXAsCj4gKwkJCSB3bGVkLT5jdHJsX2FkZHIgKyBXTEVEM19DVFJMX1JFR19JTlRfUlRfU1RT
LAo+ICsJCQkgJnJ0X3N0YXR1cyk7Cj4gKwlpZiAocmMgPCAwKSB7Cj4gKwkJZGV2X2Vycih3bGVk
LT5kZXYsICJGYWlsZWQgdG8gcmVhZCBSVCBzdGF0dXMgcmM9JWRcbiIsIHJjKTsKPiArCQlyZXR1
cm4gcmM7Cj4gKwl9Cj4gKwo+ICsJcmMgPSByZWdtYXBfcmVhZCh3bGVkLT5yZWdtYXAsCj4gKwkJ
CSB3bGVkLT5jdHJsX2FkZHIgKyBXTEVEM19DVFJMX1JFR19GQVVMVF9TVEFUVVMsCj4gKwkJCSAm
ZmF1bHRfc3RhdHVzKTsKPiArCWlmIChyYyA8IDApIHsKPiArCQlkZXZfZXJyKHdsZWQtPmRldiwg
IkZhaWxlZCB0byByZWFkIGZhdWx0IHN0YXR1cyByYz0lZFxuIiwgcmMpOwo+ICsJCXJldHVybiBy
YzsKPiArCX0KPiArCj4gKwlpZiAoKHJ0X3N0YXR1cyAmIFdMRUQzX0NUUkxfUkVHX09WUF9GQVVM
VF9TVEFUVVMpIHx8Cj4gKwkgICAgKGZhdWx0X3N0YXR1cyAmIFdMRUQzX0NUUkxfUkVHX09WUF9G
QVVMVF9CSVQpKSB7Cj4gKwkJbXV0ZXhfbG9jaygmd2xlZC0+bG9jayk7Cj4gKwkJd2xlZF9hdXRv
X3N0cmluZ19kZXRlY3Rpb24od2xlZCk7Cj4gKwkJbXV0ZXhfdW5sb2NrKCZ3bGVkLT5sb2NrKTsK
PiArCX0KPiArCj4gKwlyZXR1cm4gcmM7Cj4gK30KPiArCj4gK3N0YXRpYyBpcnFyZXR1cm5fdCB3
bGVkX292cF9pcnFfaGFuZGxlcihpbnQgaXJxLCB2b2lkICpfd2xlZCkKPiArewo+ICsJc3RydWN0
IHdsZWQgKndsZWQgPSBfd2xlZDsKPiArCWludCByYzsKPiArCXUzMiBpbnRfc3RzLCBmYXVsdF9z
dHM7Cj4gKwo+ICsJcmMgPSByZWdtYXBfcmVhZCh3bGVkLT5yZWdtYXAsCj4gKwkJCSB3bGVkLT5j
dHJsX2FkZHIgKyBXTEVEM19DVFJMX1JFR19JTlRfUlRfU1RTLCAmaW50X3N0cyk7Cj4gKwlpZiAo
cmMgPCAwKSB7Cj4gKwkJZGV2X2Vycih3bGVkLT5kZXYsICJFcnJvciBpbiByZWFkaW5nIFdMRUQz
X0lOVF9SVF9TVFMgcmM9JWRcbiIsCj4gKwkJCXJjKTsKPiArCQlyZXR1cm4gSVJRX0hBTkRMRUQ7
Cj4gKwl9Cj4gKwo+ICsJcmMgPSByZWdtYXBfcmVhZCh3bGVkLT5yZWdtYXAsIHdsZWQtPmN0cmxf
YWRkciArCj4gKwkJCSBXTEVEM19DVFJMX1JFR19GQVVMVF9TVEFUVVMsICZmYXVsdF9zdHMpOwo+
ICsJaWYgKHJjIDwgMCkgewo+ICsJCWRldl9lcnIod2xlZC0+ZGV2LCAiRXJyb3IgaW4gcmVhZGlu
ZyBXTEVEX0ZBVUxUX1NUQVRVUyByYz0lZFxuIiwKPiArCQkJcmMpOwo+ICsJCXJldHVybiBJUlFf
SEFORExFRDsKPiArCX0KPiArCj4gKwlpZiAoZmF1bHRfc3RzICYgKFdMRUQzX0NUUkxfUkVHX09W
UF9GQVVMVF9CSVQgfAo+ICsJCVdMRUQzX0NUUkxfUkVHX0lMSU1fRkFVTFRfQklUKSkKPiArCQlk
ZXZfZGJnKHdsZWQtPmRldiwgIldMRUQgT1ZQIGZhdWx0IGRldGVjdGVkLCBpbnRfc3RzPSV4IGZh
dWx0X3N0cz0gJXhcbiIsCj4gKwkJCWludF9zdHMsIGZhdWx0X3N0cyk7Cj4gKwo+ICsJaWYgKGZh
dWx0X3N0cyAmIFdMRUQzX0NUUkxfUkVHX09WUF9GQVVMVF9CSVQpIHsKPiArCQlpZiAod2xlZF9h
dXRvX2RldGVjdGlvbl9yZXF1aXJlZCh3bGVkKSkgewo+ICsJCQltdXRleF9sb2NrKCZ3bGVkLT5s
b2NrKTsKPiArCQkJd2xlZF9hdXRvX3N0cmluZ19kZXRlY3Rpb24od2xlZCk7Cj4gKwkJCW11dGV4
X3VubG9jaygmd2xlZC0+bG9jayk7Cj4gKwkJfQo+ICsJfQo+ICsKPiArCXJldHVybiBJUlFfSEFO
RExFRDsKPiArfQo+ICsKPiAgc3RhdGljIGludCB3bGVkM19zZXR1cChzdHJ1Y3Qgd2xlZCAqd2xl
ZCkKPiAgewo+ICAJdTE2IGFkZHI7Cj4gQEAgLTQzNiw4ICs3NzUsMTAgQEAgc3RhdGljIGludCB3
bGVkNF9zZXR1cChzdHJ1Y3Qgd2xlZCAqd2xlZCkKPiAgCQlzaW5rX2VuIHw9IDEgPDwgdGVtcDsK
PiAgCX0KPiAgCj4gLQlpZiAoc2lua19jZmcgPT0gc2lua19lbikKPiAtCQlyZXR1cm4gMDsKPiAr
CWlmIChzaW5rX2NmZyA9PSBzaW5rX2VuKSB7Cj4gKwkJcmMgPSB3bGVkX2F1dG9fZGV0ZWN0aW9u
X2F0X2luaXQod2xlZCk7Cj4gKwkJcmV0dXJuIHJjOwo+ICsJfQo+ICAKPiAgCXJjID0gcmVnbWFw
X3VwZGF0ZV9iaXRzKHdsZWQtPnJlZ21hcCwKPiAgCQkJCXdsZWQtPnNpbmtfYWRkciArIFdMRUQ0
X1NJTktfUkVHX0NVUlJfU0lOSywKPiBAQCAtNTAwLDcgKzg0MSw5IEBAIHN0YXRpYyBpbnQgd2xl
ZDRfc2V0dXAoc3RydWN0IHdsZWQgKndsZWQpCj4gIAkJcmV0dXJuIHJjOwo+ICAJfQo+ICAKPiAt
CXJldHVybiAwOwo+ICsJcmMgPSB3bGVkX2F1dG9fZGV0ZWN0aW9uX2F0X2luaXQod2xlZCk7Cj4g
Kwo+ICsJcmV0dXJuIHJjOwo+ICB9Cj4gIAo+ICBzdGF0aWMgY29uc3Qgc3RydWN0IHdsZWRfY29u
ZmlnIHdsZWQ0X2NvbmZpZ19kZWZhdWx0cyA9IHsKPiBAQCAtNTExLDYgKzg1NCw3IEBAIHN0YXRp
YyBpbnQgd2xlZDRfc2V0dXAoc3RydWN0IHdsZWQgKndsZWQpCj4gIAkuc3dpdGNoX2ZyZXEgPSAx
MSwKPiAgCS5jYWJjID0gZmFsc2UsCj4gIAkuZXh0ZXJuYWxfcGZldCA9IGZhbHNlLAo+ICsJLmF1
dG9fZGV0ZWN0aW9uX2VuYWJsZWQgPSBmYWxzZSwKPiAgfTsKPiAgCj4gIHN0YXRpYyBjb25zdCB1
MzIgd2xlZDNfYm9vc3RfaV9saW1pdF92YWx1ZXNbXSA9IHsKPiBAQCAtNjc3LDYgKzEwMjEsNyBA
QCBzdGF0aWMgaW50IHdsZWRfY29uZmlndXJlKHN0cnVjdCB3bGVkICp3bGVkLCBpbnQgdmVyc2lv
bikKPiAgCQl7ICJxY29tLGV4dC1nZW4iLCAmY2ZnLT5leHRfZ2VuLCB9LAo+ICAJCXsgInFjb20s
Y2FiYyIsICZjZmctPmNhYmMsIH0sCj4gIAkJeyAicWNvbSxleHRlcm5hbC1wZmV0IiwgJmNmZy0+
ZXh0ZXJuYWxfcGZldCwgfSwKPiArCQl7ICJxY29tLGF1dG8tc3RyaW5nLWRldGVjdGlvbiIsICZj
ZmctPmF1dG9fZGV0ZWN0aW9uX2VuYWJsZWQsIH0sCj4gIAl9Owo+ICAKPiAgCXByb3BfYWRkciA9
IG9mX2dldF9hZGRyZXNzKGRldi0+b2Zfbm9kZSwgMCwgTlVMTCwgTlVMTCk7Cj4gQEAgLTc5Nyw2
ICsxMTQyLDQwIEBAIHN0YXRpYyBpbnQgd2xlZF9jb25maWd1cmVfc2hvcnRfaXJxKHN0cnVjdCB3
bGVkICp3bGVkLAo+ICAJcmV0dXJuIHJjOwo+ICB9Cj4gIAo+ICtzdGF0aWMgaW50IHdsZWRfY29u
ZmlndXJlX292cF9pcnEoc3RydWN0IHdsZWQgKndsZWQsCj4gKwkJCQkgIHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYpCj4gK3sKPiArCWludCByYzsKPiArCXUzMiB2YWw7Cj4gKwo+ICsJd2xl
ZC0+b3ZwX2lycSA9IHBsYXRmb3JtX2dldF9pcnFfYnluYW1lKHBkZXYsICJvdnAiKTsKPiArCWlm
ICh3bGVkLT5vdnBfaXJxIDwgMCkgewo+ICsJCWRldl9kYmcoJnBkZXYtPmRldiwgIk9WUCBJUlEg
bm90IGZvdW5kIC0gZGlzYWJsaW5nIGF1dG9tYXRpYyBzdHJpbmcgZGV0ZWN0aW9uXG4iKTsKPiAr
CQlyZXR1cm4gMDsKPiArCX0KPiArCj4gKwlyYyA9IGRldm1fcmVxdWVzdF90aHJlYWRlZF9pcnEo
d2xlZC0+ZGV2LCB3bGVkLT5vdnBfaXJxLCBOVUxMLAo+ICsJCQkJICAgICAgIHdsZWRfb3ZwX2ly
cV9oYW5kbGVyLCBJUlFGX09ORVNIT1QsCj4gKwkJCQkgICAgICAgIndsZWRfb3ZwX2lycSIsIHds
ZWQpOwo+ICsJaWYgKHJjIDwgMCkgewo+ICsJCWRldl9lcnIod2xlZC0+ZGV2LCAiVW5hYmxlIHRv
IHJlcXVlc3Qgb3ZwX2lycSAoZXJyOiVkKVxuIiwKPiArCQkJcmMpOwo+ICsJCXdsZWQtPm92cF9p
cnEgPSAwOwo+ICsJCXJldHVybiAwOwo+ICsJfQo+ICsKPiArCXJjID0gcmVnbWFwX3JlYWQod2xl
ZC0+cmVnbWFwLCB3bGVkLT5jdHJsX2FkZHIgKwo+ICsJCQkgV0xFRDNfQ1RSTF9SRUdfTU9EX0VO
LCAmdmFsKTsKPiArCWlmIChyYyA8IDApCj4gKwkJcmV0dXJuIHJjOwo+ICsKPiArCS8qIEtlZXAg
T1ZQIGlycSBkaXNhYmxlZCB1bnRpbCBtb2R1bGUgaXMgZW5hYmxlZCAqLwo+ICsJaWYgKCEodmFs
ICYgV0xFRDNfQ1RSTF9SRUdfTU9EX0VOX01BU0spKQo+ICsJCWRpc2FibGVfaXJxKHdsZWQtPm92
cF9pcnEpOwo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICBzdGF0aWMgY29uc3Qgc3RydWN0
IGJhY2tsaWdodF9vcHMgd2xlZF9vcHMgPSB7Cj4gIAkudXBkYXRlX3N0YXR1cyA9IHdsZWRfdXBk
YXRlX3N0YXR1cywKPiAgfTsKPiBAQCAtODM3LDYgKzEyMTYsNyBAQCBzdGF0aWMgaW50IHdsZWRf
cHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKPiAgCj4gIAlzd2l0Y2ggKHZlcnNp
b24pIHsKPiAgCWNhc2UgMzoKPiArCQl3bGVkLT5jZmcuYXV0b19kZXRlY3Rpb25fZW5hYmxlZCA9
IGZhbHNlOwo+ICAJCXJjID0gd2xlZDNfc2V0dXAod2xlZCk7Cj4gIAkJaWYgKHJjKSB7Cj4gIAkJ
CWRldl9lcnIoJnBkZXYtPmRldiwgIndsZWQzX3NldHVwIGZhaWxlZFxuIik7Cj4gQEAgLTg1OCwx
MCArMTIzOCwxNiBAQCBzdGF0aWMgaW50IHdsZWRfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqcGRldikKPiAgCQlicmVhazsKPiAgCX0KPiAgCj4gKwlJTklUX0RFTEFZRURfV09SSygmd2xl
ZC0+b3ZwX3dvcmssIHdsZWRfb3ZwX3dvcmspOwo+ICsKPiAgCXJjID0gd2xlZF9jb25maWd1cmVf
c2hvcnRfaXJxKHdsZWQsIHBkZXYpOwo+ICAJaWYgKHJjIDwgMCkKPiAgCQlyZXR1cm4gcmM7Cj4g
IAo+ICsJcmMgPSB3bGVkX2NvbmZpZ3VyZV9vdnBfaXJxKHdsZWQsIHBkZXYpOwo+ICsJaWYgKHJj
IDwgMCkKPiArCQlyZXR1cm4gcmM7Cj4gKwo+ICAJdmFsID0gV0xFRF9ERUZBVUxUX0JSSUdIVE5F
U1M7Cj4gIAlvZl9wcm9wZXJ0eV9yZWFkX3UzMihwZGV2LT5kZXYub2Zfbm9kZSwgImRlZmF1bHQt
YnJpZ2h0bmVzcyIsICZ2YWwpOwo+ICAKPiBAQCAtODgwLDcgKzEyNjYsOSBAQCBzdGF0aWMgaW50
IHdsZWRfcmVtb3ZlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4gIAlzdHJ1Y3Qgd2xl
ZCAqd2xlZCA9IGRldl9nZXRfZHJ2ZGF0YSgmcGRldi0+ZGV2KTsKPiAgCj4gIAltdXRleF9kZXN0
cm95KCZ3bGVkLT5sb2NrKTsKPiArCWNhbmNlbF9kZWxheWVkX3dvcmtfc3luYygmd2xlZC0+b3Zw
X3dvcmspOwo+ICAJZGlzYWJsZV9pcnEod2xlZC0+c2hvcnRfaXJxKTsKPiArCWRpc2FibGVfaXJx
KHdsZWQtPm92cF9pcnEpOwo+ICAKPiAgCXJldHVybiAwOwo+ICB9Cj4gLS0gCj4gVGhlIFF1YWxj
b21tIElubm92YXRpb24gQ2VudGVyLCBJbmMuIGlzIGEgbWVtYmVyIG9mIHRoZSBDb2RlIEF1cm9y
YSBGb3J1bSwKPiAgYSBMaW51eCBGb3VuZGF0aW9uIENvbGxhYm9yYXRpdmUgUHJvamVjdAo+IApf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwg
bWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
