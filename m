Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5264058FAF
	for <lists+dri-devel@lfdr.de>; Fri, 28 Jun 2019 03:26:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6C5BC6E86D;
	Fri, 28 Jun 2019 01:26:43 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from crapouillou.net (outils.crapouillou.net [89.234.176.41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 978076E373
 for <dri-devel@lists.freedesktop.org>; Thu, 27 Jun 2019 18:21:26 +0000 (UTC)
From: Paul Cercueil <paul@crapouillou.net>
To: David Airlie <airlied@linux.ie>,
	Daniel Vetter <daniel@ffwll.ch>
Subject: [PATCH 2/3] DRM: ingenic: Add support for Sharp panels
Date: Thu, 27 Jun 2019 20:21:13 +0200
Message-Id: <20190627182114.27299-2-paul@crapouillou.net>
In-Reply-To: <20190627182114.27299-1-paul@crapouillou.net>
References: <20190627182114.27299-1-paul@crapouillou.net>
MIME-Version: 1.0
X-Mailman-Approved-At: Fri, 28 Jun 2019 01:25:51 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=crapouillou.net; 
 s=mail; t=1561659684; h=from:from:sender:reply-to:subject:subject:date:date:
 message-id:message-id:to:to:cc:cc:mime-version:mime-version:
 content-type:content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=qCrv3tbrvvRWxIKr3e7PpU42XhOUTA3WgBASRFjc4Eo=;
 b=qGxfcSqN8lH5/Lgil8GmYw4Z5ephVzOX4ZiP0zkJjyW/3tNdU9PL/mXA/kMD1nbQp95P0F
 su5ngoU0a9U5J7ShdxBzMJx23EEL1cwNDglQ/eTT7m44wCN3oNRRhsf7LULOwDuvasSFgQ
 TQfpnTaIBMfuqsS1HpzBXAolaPBh7x8=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Paul Cercueil <paul@crapouillou.net>, od@zcrc.me,
 Sam Ravnborg <sam@ravnborg.org>, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIHN1cHBvcnQgZm9yIHRoZSBMQ0QgcGFuZWxzIHRoYXQgbXVzdCBiZSBkcml2ZW4gd2l0aCB0
aGUKU2hhcnAtc3BlY2lmaWMgc2lnbmFscyBTUEwsIENMUywgUkVWLCBQUy4KCkFuIGV4YW1wbGUg
b2Ygc3VjaCBwYW5lbCBpcyB0aGUgTFMwMjBCMUREMDFEIHN1cHBvcnRlZCBieSB0aGUKcGFuZWwt
c2ltcGxlIERSTSBwYW5lbCBkcml2ZXIuCgpTaWduZWQtb2ZmLWJ5OiBQYXVsIENlcmN1ZWlsIDxw
YXVsQGNyYXBvdWlsbG91Lm5ldD4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaW5nZW5pYy9pbmdlbmlj
LWRybS5jIHwgNjQgKysrKysrKysrKysrKysrKystLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwg
NDEgaW5zZXJ0aW9ucygrKSwgMjMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2luZ2VuaWMvaW5nZW5pYy1kcm0uYyBiL2RyaXZlcnMvZ3B1L2RybS9pbmdlbmljL2lu
Z2VuaWMtZHJtLmMKaW5kZXggMDJjNDc4OGVmMWM3Li5kYTk2NmYzZGMxZjcgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pbmdlbmljL2luZ2VuaWMtZHJtLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2luZ2VuaWMvaW5nZW5pYy1kcm0uYwpAQCAtMTY2LDYgKzE2Niw4IEBAIHN0cnVjdCBpbmdl
bmljX2RybSB7CiAKIAlzdHJ1Y3QgaW5nZW5pY19kbWFfaHdkZXNjICpkbWFfaHdkZXNjOwogCWRt
YV9hZGRyX3QgZG1hX2h3ZGVzY19waHlzOworCisJYm9vbCBwYW5lbF9pc19zaGFycDsKIH07CiAK
IHN0YXRpYyBjb25zdCB1MzIgaW5nZW5pY19kcm1fcHJpbWFyeV9mb3JtYXRzW10gPSB7CkBAIC0y
ODMsNiArMjg1LDEzIEBAIHN0YXRpYyB2b2lkIGluZ2VuaWNfZHJtX2NydGNfdXBkYXRlX3RpbWlu
Z3Moc3RydWN0IGluZ2VuaWNfZHJtICpwcml2LAogCXJlZ21hcF93cml0ZShwcml2LT5tYXAsIEpa
X1JFR19MQ0RfREFWLAogCQkgICAgIHZkcyA8PCBKWl9MQ0RfREFWX1ZEU19PRkZTRVQgfAogCQkg
ICAgIHZkZSA8PCBKWl9MQ0RfREFWX1ZERV9PRkZTRVQpOworCisJaWYgKHByaXYtPnBhbmVsX2lz
X3NoYXJwKSB7CisJCXJlZ21hcF93cml0ZShwcml2LT5tYXAsIEpaX1JFR19MQ0RfUFMsIGhkZSA8
PCAxNiB8IChoZGUgKyAxKSk7CisJCXJlZ21hcF93cml0ZShwcml2LT5tYXAsIEpaX1JFR19MQ0Rf
Q0xTLCBoZGUgPDwgMTYgfCAoaGRlICsgMSkpOworCQlyZWdtYXBfd3JpdGUocHJpdi0+bWFwLCBK
Wl9SRUdfTENEX1NQTCwgaHBlIDw8IDE2IHwgKGhwZSArIDEpKTsKKwkJcmVnbWFwX3dyaXRlKHBy
aXYtPm1hcCwgSlpfUkVHX0xDRF9SRVYsIG1vZGUtPmh0b3RhbCA8PCAxNik7CisJfQogfQogCiBz
dGF0aWMgdm9pZCBpbmdlbmljX2RybV9jcnRjX3VwZGF0ZV9jdHJsKHN0cnVjdCBpbmdlbmljX2Ry
bSAqcHJpdiwKQEAgLTM3OCwxMSArMzg3LDE4IEBAIHN0YXRpYyB2b2lkIGluZ2VuaWNfZHJtX2Vu
Y29kZXJfYXRvbWljX21vZGVfc2V0KHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwKIHsKIAlz
dHJ1Y3QgaW5nZW5pY19kcm0gKnByaXYgPSBkcm1fZW5jb2Rlcl9nZXRfcHJpdihlbmNvZGVyKTsK
IAlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSA9ICZjcnRjX3N0YXRlLT5hZGp1c3RlZF9t
b2RlOwotCXN0cnVjdCBkcm1fZGlzcGxheV9pbmZvICppbmZvID0gJmNvbm5fc3RhdGUtPmNvbm5l
Y3Rvci0+ZGlzcGxheV9pbmZvOwotCXVuc2lnbmVkIGludCBjZmcgPSBKWl9MQ0RfQ0ZHX1BTX0RJ
U0FCTEUKLQkJCSB8IEpaX0xDRF9DRkdfQ0xTX0RJU0FCTEUKLQkJCSB8IEpaX0xDRF9DRkdfU1BM
X0RJU0FCTEUKLQkJCSB8IEpaX0xDRF9DRkdfUkVWX0RJU0FCTEU7CisJc3RydWN0IGRybV9jb25u
ZWN0b3IgKmNvbm4gPSBjb25uX3N0YXRlLT5jb25uZWN0b3I7CisJc3RydWN0IGRybV9kaXNwbGF5
X2luZm8gKmluZm8gPSAmY29ubi0+ZGlzcGxheV9pbmZvOworCXVuc2lnbmVkIGludCBjZmc7CisK
Kwlwcml2LT5wYW5lbF9pc19zaGFycCA9IGluZm8tPmJ1c19mbGFncyAmIERSTV9CVVNfRkxBR19T
SEFSUF9TSUdOQUxTOworCisJaWYgKHByaXYtPnBhbmVsX2lzX3NoYXJwKSB7CisJCWNmZyA9IEpa
X0xDRF9DRkdfTU9ERV9TUEVDSUFMX1RGVF8xIHwgSlpfTENEX0NGR19SRVZfUE9MQVJJVFk7CisJ
fSBlbHNlIHsKKwkJY2ZnID0gSlpfTENEX0NGR19QU19ESVNBQkxFIHwgSlpfTENEX0NGR19DTFNf
RElTQUJMRQorCQkgICAgfCBKWl9MQ0RfQ0ZHX1NQTF9ESVNBQkxFIHwgSlpfTENEX0NGR19SRVZf
RElTQUJMRTsKKwl9CiAKIAlpZiAobW9kZS0+ZmxhZ3MgJiBEUk1fTU9ERV9GTEFHX05IU1lOQykK
IAkJY2ZnIHw9IEpaX0xDRF9DRkdfSFNZTkNfQUNUSVZFX0xPVzsKQEAgLTM5MywyNCArNDA5LDI2
IEBAIHN0YXRpYyB2b2lkIGluZ2VuaWNfZHJtX2VuY29kZXJfYXRvbWljX21vZGVfc2V0KHN0cnVj
dCBkcm1fZW5jb2RlciAqZW5jb2RlciwKIAlpZiAoaW5mby0+YnVzX2ZsYWdzICYgRFJNX0JVU19G
TEFHX1BJWERBVEFfTkVHRURHRSkKIAkJY2ZnIHw9IEpaX0xDRF9DRkdfUENMS19GQUxMSU5HX0VE
R0U7CiAKLQlpZiAoY29ubl9zdGF0ZS0+Y29ubmVjdG9yLT5jb25uZWN0b3JfdHlwZSA9PSBEUk1f
TU9ERV9DT05ORUNUT1JfVFYpIHsKLQkJaWYgKG1vZGUtPmZsYWdzICYgRFJNX01PREVfRkxBR19J
TlRFUkxBQ0UpCi0JCQljZmcgfD0gSlpfTENEX0NGR19NT0RFX1RWX09VVF9JOwotCQllbHNlCi0J
CQljZmcgfD0gSlpfTENEX0NGR19NT0RFX1RWX09VVF9QOwotCX0gZWxzZSB7Ci0JCXN3aXRjaCAo
KmluZm8tPmJ1c19mb3JtYXRzKSB7Ci0JCWNhc2UgTUVESUFfQlVTX0ZNVF9SR0I1NjVfMVgxNjoK
LQkJCWNmZyB8PSBKWl9MQ0RfQ0ZHX01PREVfR0VORVJJQ18xNkJJVDsKLQkJCWJyZWFrOwotCQlj
YXNlIE1FRElBX0JVU19GTVRfUkdCNjY2XzFYMTg6Ci0JCQljZmcgfD0gSlpfTENEX0NGR19NT0RF
X0dFTkVSSUNfMThCSVQ7Ci0JCQlicmVhazsKLQkJY2FzZSBNRURJQV9CVVNfRk1UX1JHQjg4OF8x
WDI0OgotCQkJY2ZnIHw9IEpaX0xDRF9DRkdfTU9ERV9HRU5FUklDXzI0QklUOwotCQkJYnJlYWs7
Ci0JCWRlZmF1bHQ6Ci0JCQlicmVhazsKKwlpZiAoIXByaXYtPnBhbmVsX2lzX3NoYXJwKSB7CisJ
CWlmIChjb25uLT5jb25uZWN0b3JfdHlwZSA9PSBEUk1fTU9ERV9DT05ORUNUT1JfVFYpIHsKKwkJ
CWlmIChtb2RlLT5mbGFncyAmIERSTV9NT0RFX0ZMQUdfSU5URVJMQUNFKQorCQkJCWNmZyB8PSBK
Wl9MQ0RfQ0ZHX01PREVfVFZfT1VUX0k7CisJCQllbHNlCisJCQkJY2ZnIHw9IEpaX0xDRF9DRkdf
TU9ERV9UVl9PVVRfUDsKKwkJfSBlbHNlIHsKKwkJCXN3aXRjaCAoKmluZm8tPmJ1c19mb3JtYXRz
KSB7CisJCQljYXNlIE1FRElBX0JVU19GTVRfUkdCNTY1XzFYMTY6CisJCQkJY2ZnIHw9IEpaX0xD
RF9DRkdfTU9ERV9HRU5FUklDXzE2QklUOworCQkJCWJyZWFrOworCQkJY2FzZSBNRURJQV9CVVNf
Rk1UX1JHQjY2Nl8xWDE4OgorCQkJCWNmZyB8PSBKWl9MQ0RfQ0ZHX01PREVfR0VORVJJQ18xOEJJ
VDsKKwkJCQlicmVhazsKKwkJCWNhc2UgTUVESUFfQlVTX0ZNVF9SR0I4ODhfMVgyNDoKKwkJCQlj
ZmcgfD0gSlpfTENEX0NGR19NT0RFX0dFTkVSSUNfMjRCSVQ7CisJCQkJYnJlYWs7CisJCQlkZWZh
dWx0OgorCQkJCWJyZWFrOworCQkJfQogCQl9CiAJfQogCi0tIAoyLjIxLjAuNTkzLmc1MTFlYzM0
NWUxOAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJp
LWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
