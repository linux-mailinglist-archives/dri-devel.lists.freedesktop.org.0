Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 766ADF39FB
	for <lists+dri-devel@lfdr.de>; Thu,  7 Nov 2019 22:03:28 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A17BC6F7C0;
	Thu,  7 Nov 2019 21:03:24 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yw1-xc42.google.com (mail-yw1-xc42.google.com
 [IPv6:2607:f8b0:4864:20::c42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7DF496F7BB
 for <dri-devel@lists.freedesktop.org>; Thu,  7 Nov 2019 21:03:22 +0000 (UTC)
Received: by mail-yw1-xc42.google.com with SMTP id y64so1132458ywe.3
 for <dri-devel@lists.freedesktop.org>; Thu, 07 Nov 2019 13:03:22 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=KC2BYUStyaQkIOsxmJMEfiQ0fY/TMGO96+PzuKi2DJc=;
 b=K67exyRfdqt+Vj3uBXpaRz6tKrt5C1eZ4MtluswHwXMmhObjE+BJZCWn+EFB1IgUmO
 X3gX+rzEcb1EkSCifPAT/uHktNb0lIcbCWBmkJdRhpyri09G7rjnZHFMdg8GAD+XXvTH
 nLi08WL8SPTtnyKBp95fXBcNz4ZMcWTsaHcgUU6SHr5Lqki2/1ipK0q11p79f6cO+mUe
 QhmkYi6xEALUe1v0x0K7recHKuMCgMR0cRj28185TfNClu1U6sJRlWgQDAmmwD/Sy1kh
 0UxnyktTvJ7BYYgzyhn20v88+bt4Huwi8YxWl7zwzYZjpu6hEOt/0gOhRBIeQWDUY2bD
 vYsg==
X-Gm-Message-State: APjAAAXWmdJNA/zOBoOAhIYS+Z8ucCJTH0ZjjRln10OmWoqZ7A29IQtO
 e7vxwCqBvikg8sVWqZ9k2iaDmS92Tq8=
X-Google-Smtp-Source: APXvYqzfibwXErR/EA/byC5kF15E4MvEvfW1qd1LMC5jKits8K7Thg64+dk8r8vIRPpj56gzvxsgfA==
X-Received: by 2002:a81:5ac6:: with SMTP id o189mr1149824ywb.110.1573160601381; 
 Thu, 07 Nov 2019 13:03:21 -0800 (PST)
Received: from rosewood.cam.corp.google.com
 ([2620:0:1013:11:89c6:2139:5435:371d])
 by smtp.gmail.com with ESMTPSA id r14sm1064196ywl.97.2019.11.07.13.03.20
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 07 Nov 2019 13:03:20 -0800 (PST)
From: Sean Paul <sean@poorly.run>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 2/6] drm: trace: Introduce drm_trace() and trace event classes
Date: Thu,  7 Nov 2019 16:03:01 -0500
Message-Id: <20191107210316.143216-3-sean@poorly.run>
X-Mailer: git-send-email 2.24.0.rc1.363.gb1bccd3e3d-goog
In-Reply-To: <20191107210316.143216-1-sean@poorly.run>
References: <20191107210316.143216-1-sean@poorly.run>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=poorly.run; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=KC2BYUStyaQkIOsxmJMEfiQ0fY/TMGO96+PzuKi2DJc=;
 b=X6pw+z6SxoXc3DzqXjLqzRChFgreSAmqyw1VA/DalFdyvrpzXb23rv3L3QlBtiN8fp
 ii89eqm9cdWh4YK2tkqVkAGz3Dn17QDYL1oWWmZ71TxQf6CJCrA3GGRrs4xtl4xwEn8E
 58XIIiA8EeK3ljen+gkdducb/bqg1LWVxE7V23zmGNxXvsy21F0kRhNAULpaRN/CENXz
 sfAryRet3rwqI15DLJcLhkKHwxoTWEMl4sW0eBBBZkWa1d2qxTT9Dd+4uVcUsyfJlWX3
 FcXqyykQCS8YBCY5Ca+AAIXiWOZS0AmqZ1MwpAJOOiIRQza0KLIrqleP17jX8FTWfo6x
 hCYA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: daniel.vetter@ffwll.ch, Sean Paul <seanpaul@chromium.org>,
 tzimmermann@suse.de
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogU2VhbiBQYXVsIDxzZWFucGF1bEBjaHJvbWl1bS5vcmc+CgpUaGlzIHBhdGNoIGlzIHRo
ZSBmaXJzdCBzdGVwIGluIGV4cGFuZGluZyB0cmFjZSBldmVudHMgaW4gZHJtLiBJdAppbnRyb2R1
Y2VzIGEgbmV3IGVudW0gdXNlZCB0byBjbGFzc2lmeSB0cmFjZSBldmVudHMgYXMgd2VsbCBhcyBh
IGNvdXBsZQpoZWxwZXIgbWFjcm9zIHRvIGlzc3VlIHRyYWNlIGV2ZW50cyBmcm9tIGFyb3VuZCBk
cm0uCgpJdCdzIGEgYml0IG9mIGEgdG95IHJpZ2h0IG5vdyBzaW5jZSB3ZSdyZSBqdXN0IGNvbnZl
cnRpbmcgb25lIGNsYXNzCih2YmxhbmspIGFuZCB0aGVyZSBhcmVuJ3QgYW55IGVycm9yIGV2ZW50
cyBpbiB0aGlzIGNsYXNzLiBIb3dldmVyIGxhdGVyCnBhdGNoZXMgaW4gdGhpcyBzZXJpZXMgd2ls
bCBhZGQgbW9yZSBpbnRlcmVzdGluZyBjbGFzc2VzLgoKU2lnbmVkLW9mZi1ieTogU2VhbiBQYXVs
IDxzZWFucGF1bEBjaHJvbWl1bS5vcmc+Ci0tLQogRG9jdW1lbnRhdGlvbi9ncHUvZHJtLWludGVy
bmFscy5yc3QgfCAgIDkgKysrCiBkcml2ZXJzL2dwdS9kcm0vZHJtX3RyYWNlLmggICAgICAgICB8
IDEwOSArKysrKysrKysrKysrKysrKysrKysrKysrKy0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX3Zi
bGFuay5jICAgICAgICB8ICAgOCArLQogMyBmaWxlcyBjaGFuZ2VkLCAxMTQgaW5zZXJ0aW9ucygr
KSwgMTIgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvRG9jdW1lbnRhdGlvbi9ncHUvZHJtLWlu
dGVybmFscy5yc3QgYi9Eb2N1bWVudGF0aW9uL2dwdS9kcm0taW50ZXJuYWxzLnJzdAppbmRleCA5
NjZiZDJkOWYwY2NkLi5hYzg3YTk0YjcwNTdhIDEwMDY0NAotLS0gYS9Eb2N1bWVudGF0aW9uL2dw
dS9kcm0taW50ZXJuYWxzLnJzdAorKysgYi9Eb2N1bWVudGF0aW9uL2dwdS9kcm0taW50ZXJuYWxz
LnJzdApAQCAtMTc2LDYgKzE3NiwxNSBAQCBQcmludGVyCiAuLiBrZXJuZWwtZG9jOjogZHJpdmVy
cy9ncHUvZHJtL2RybV9wcmludC5jCiAgICA6ZXhwb3J0OgogCitUcmFjaW5nCistLS0tLS0tCisK
Ky4uIGtlcm5lbC1kb2M6OiBkcml2ZXJzL2dwdS9kcm0vZHJtX3RyYWNlLmgKKyAgIDpkb2M6IG92
ZXJ2aWV3CisKKy4uIGtlcm5lbC1kb2M6OiBkcml2ZXJzL2dwdS9kcm0vZHJtX3RyYWNlLmgKKyAg
IDppbnRlcm5hbDoKKwogVXRpbGl0aWVzCiAtLS0tLS0tLS0KIApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2RybV90cmFjZS5oIGIvZHJpdmVycy9ncHUvZHJtL2RybV90cmFjZS5oCmluZGV4
IDQ4N2JjMzQ3OGVmZWMuLjE5ZTVmMDQyMTA1ODYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9kcm1fdHJhY2UuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3RyYWNlLmgKQEAgLTcsMjEg
KzcsMTA5IEBACiAjaW5jbHVkZSA8bGludXgvdHJhY2Vwb2ludC5oPgogCiBzdHJ1Y3QgZHJtX2Zp
bGU7CisvKioKKyAqIERPQzogb3ZlcnZpZXcKKyAqCisgKiBEUk0gdHJhY2UgZXZlbnRzIGNhbiBi
ZSB1c2VkIHRvIHRyYWNlIGltcG9ydGFudCBtb21lbnRzIG9jY3VycmluZyBpbiB0aGUgRFJNCisg
KiBjb3JlIG9yIGhlbHBlcnMgd2l0aG91dCBpbmN1cnJpbmcgYSBzaWduaWZpY2FudCBwZXJmb3Jt
YW5jZSBwZW5hbHR5IChsaWtlIHlvdQorICogd291bGQgd2l0aCBjb25zb2xlIGxvZ2dpbmcpLgor
ICovCisKKyNpZiAhZGVmaW5lZChfRFJNX1RSQUNFX0VWRU5UX0NMQVNTX0VOVU0pCisjZGVmaW5l
IF9EUk1fVFJBQ0VfRVZFTlRfQ0xBU1NfRU5VTQorCisvKioKKyAqIGVudW0gZHJtX3RyYWNlX2V2
ZW50X2NsYXNzIC0gdGhlIHRyYWNlIGNsYXNzIG9mIGFuIGV2ZW50CisgKgorICogVHJhY2UgZXZl
bnRzIGFyZSBicm9rZW4gaW50byBkaWZmZXJlbnQgY2xhc3NlcyAobXVjaCB0aGUgc2FtZSBhcyB3
ZSBkbyBmb3IKKyAqIGNvbnNvbGUgbG9nZ2luZykgdG8gbWFrZSBzaWZ0aW5nIHRocm91Z2ggdGhl
IGxvZ3MgZWFzaWVyLiBJZiB5b3Ugd2FudCB0bworICogaXNvbGF0ZSBvbmUgb3IgbW9yZSBjbGFz
c2VzIChvciBkaXNhYmxlIGEgc3Vic2V0IG9mIGNsYXNzZXMpLCB5b3UgY2FuIHdyaXRlCisgKiBh
biBleHBlc3Npb24gdXNpbmcgdGhlIGV2ZW50X2NsYXNzIGVudHJ5IGZpZWxkIGFzIGEgdHJhY2Vw
b2ludHMgZmlsdGVyLiBUaGUKKyAqIGV2ZW50X2NsYXNzIGZpZWxkIGlzIG5vdCBwcmludGVkIGFz
IHBhcnQgb2YgdGhlIHRyYWNlIGxvZywgaXQncyBqdXN0IHRoZXJlCisgKiBmb3IgZmlsdGVyaW5n
LgorICoKKyAqIFRoZSBjbGFzc2VzIGFyZSBiaXRmaWVsZHMgdG8gbWFrZSBmaWx0ZXJpbmcgZWFz
aWVyLCBidXQgYWxzbyB0byBhbGxvdyB0cmFjZQorICogZXZlbnRzIHRvIGJlIGNsYXNzaWZpZWQg
dW5kZXIgbXVsdGlwbGUgY2xhc3NlcyAoaWU6IGlmIHlvdSdyZSB0cmFjaW5nIGFuCisgKiBlcnJv
ciB0aGF0IG9jY3VycmVkIHdpdGggYSBjcnRjLCB5b3UgY2FuIGVuc3VyZSB0aGF0IHRoZXNlIGV2
ZW50cyBhcmUKKyAqIHN1cmZhY2VkIGZvciBmaWx0ZXJzIGxvb2tpbmcgZm9yIGVpdGhlciBjcnRj
IG9yIGVycm9yIGNsYXNzZXMpLgorICoKKyAqIEFuIGV4YW1wbGUgZmlsdGVyIGlzOgorICoJQXNz
dW1lIHlvdSB3YW50IHRvIHZpZXcgYWxsIHRyYWNlIGV2ZW50cyBpbiBmYWlsdXJlIHBhdGhzLCB5
b3Ugd291bGQKKyAqCXdyaXRlIGEgZmlsdGVyIHdoaWNoIGlzb2xhdGVzIGV2ZW50cyB3aXRoIHRo
ZSBkcm1fdHJhY2VfY2xhc3NfZXJyb3IgYml0CisgKglzZXQgaW4gdGhlaXIgZXZlbnRfY2xhc3Mg
ZmllbGQuIFRoaXMgYWxsb3dzIHlvdSB0byBlbmFibGUgYWxsIHRyYWNlCisgKglldmVudHMgaW4g
dGhlIGRybSB0cmFjZSBzeXN0ZW0gYW5kIG9ubHkgY29uc3VtZSBlcnJvcnMuCisgKgorICoJOyBl
Y2hvICJldmVudF9jbGFzcyAmIDB4MSIgPiAvc3lzL2tlcm5lbC90cmFjaW5nL2V2ZW50cy9kcm0v
ZmlsdGVyCisgKgk7IGVjaG8gMSA+IC9zeXMva2VybmVsL3RyYWNpbmcvZXZlbnRzL2RybS9lbmFi
bGUKKyAqCisgKglTaW1pbGFybHksIHRvIHZpZXcgYWxsIHZibGFuayB0cmFjZXMgcGx1cyBhbnkg
ZXJyb3IgdHJhY2VzLCB5b3Ugc2VsZWN0CisgKglib3RoIGNsYXNzZXMgaW4gdGhlIGZpbHRlci4K
KyAqCisgKgk7IGVjaG8gImV2ZW50X2NsYXNzICYgMHgzIiA+IC9zeXMva2VybmVsL3RyYWNpbmcv
ZXZlbnRzL2RybS9maWx0ZXIKKyAqLworZW51bSBkcm1fdHJhY2VfZXZlbnRfY2xhc3MgeworCS8q
KgorCSAqIEBkcm1fdHJhY2VfY2xhc3NfZXJyb3I6IERlbm90ZXMgdGhhdCB0aGUgdHJhY2UgZXZl
bnQgaXMgY29taW5nIGZyb20KKwkgKiBhbiBlcnJvciBwYXRoLgorCSAqLworCWRybV90cmFjZV9j
bGFzc19lcnJvcgkJPSBCSVQoMCksCisKKwkvKioKKwkgKiBAZHJtX3RyYWNlX2NsYXNzX3ZibGFu
azogVXNlIHRoaXMgdG8gdHJhY2sgdHJhY2UgZXZlbnRzIHRoYXQgdHJhY2sKKwkgKiB2Ymxhbmtz
IGFuZCB2YmxhbmsgZXZlbnRzLgorCSAqLworCWRybV90cmFjZV9jbGFzc192YmxhbmsJCT0gQklU
KDEpLAorfTsKKworLyoqCisgKiBkcm1fdHJhY2UgLSBhZGQgYSBkcm0gdHJhY2UgZXZlbnQKKyAq
IEBfYzogY2xhc3MgbmFtZSAodGhlIHBhcnQgdGhhdCBjb21lcyBhZnRlciBkcm1fdHJhY2VfY2xh
c3NfKQorICogQF9lOiBldmVudCBuYW1lICh0aGUgcGFydCB0aGF0IGNvbWVzIGFmdGVyIGRybV8k
Y2xhc3NfKQorICoKKyAqIFVzZSB0aGlzIG1hY3JvIHRvIHNpbXBsaWZ5IGFkZGluZyBhIHRyYWNl
IGV2ZW50IGZvciBub24tZmFpbHVyZSBwYXRocyBpbgorICogZHJtIGNvZGUuIFRoZSBtYWNybyBz
aW1wbHkgYXNzZW1ibGVzIHRoZSB0cmFjZSBldmVudCBmcm9tIHRoZSBjbGFzcyBhbmQgbmFtZSwK
KyAqIGFuZCBzZXRzIHRoZSBjb3JyZWN0IGV2ZW50X2NvZGUgZm9yIHRoaXMgdHJhY2UuCisgKgor
ICogSXQncyByZWNvbW1lbmRlZCB0aGF0IHRoaXMgbWFjcm8gaXMgbm90IHVzZWQgaW4gZmFpbHVy
ZSBwYXRocy4gRm9yIGZhaWx1cmUKKyAqIHBhdGhzLCB1c2UgZHJtX3RyYWNlX2VycigpLgorICov
CisjZGVmaW5lIGRybV90cmFjZShfYywgX2UsIC4uLikgXAorCXRyYWNlX2RybV8jI19jIyNfIyNf
ZShkcm1fdHJhY2VfY2xhc3NfIyNfYywgX19WQV9BUkdTX18pCisKKy8qKgorICogZHJtX3RyYWNl
X2VyciAtIGFkZCBhIGRybSB0cmFjZSBldmVudCBpbiBhIGZhaWx1cmUgcGF0aAorICogQF9jOiBj
bGFzcyBuYW1lICh0aGUgcGFydCB0aGF0IGNvbWVzIGFmdGVyIGRybV90cmFjZV9jbGFzc18pCisg
KiBAX2U6IGV2ZW50IG5hbWUgKHRoZSBwYXJ0IHRoYXQgY29tZXMgYWZ0ZXIgZHJtXyRjbGFzc18p
CisgKgorICogVGhpcyBpcyB2aXJ0dWFsbHkgdGhlIHNhbWUgYXMgZHJtX3RyYWNlKCksIGhvd2V2
ZXIgaXQgc2V0cyB0aGUgZXJyb3IgY2xhc3Mgb24KKyAqIHRoZSBldmVudCBhcyB3ZWxsLiBUaGlz
IGlzIGJlbmVmaWNpYWwgZm9yIHRob3NlIGZpbHRlcmluZyBldmVudHMgYnkKKyAqIGNsYXNzX2Vy
cm9yLgorICoKKyAqIEZvciBub24tZmFpbHVyZSBwYXRocywgcGxlYXNlIHVzZSBkcm1fdHJhY2Uo
KS4KKyAqLworI2RlZmluZSBkcm1fdHJhY2VfZXJyKF9jLCBfZSwgLi4uKQkJCQkJXAorCXRyYWNl
X2RybV8jI19jIyNfIyNfZShkcm1fdHJhY2VfY2xhc3NfIyNfYyB8IGRybV90cmFjZV9jbGFzc19l
cnJvciwgXAorCQkJICAgICAgX19WQV9BUkdTX18pCisKKyNlbmRpZgogCiAjdW5kZWYgVFJBQ0Vf
U1lTVEVNCiAjZGVmaW5lIFRSQUNFX1NZU1RFTSBkcm0KICNkZWZpbmUgVFJBQ0VfSU5DTFVERV9G
SUxFIGRybV90cmFjZQogCiBUUkFDRV9FVkVOVChkcm1fdmJsYW5rX2V2ZW50LAotCSAgICBUUF9Q
Uk9UTyhpbnQgY3J0YywgdW5zaWduZWQgaW50IHNlcSwga3RpbWVfdCB0aW1lLCBib29sIGhpZ2hf
cHJlYyksCi0JICAgIFRQX0FSR1MoY3J0Yywgc2VxLCB0aW1lLCBoaWdoX3ByZWMpLAorCSAgICBU
UF9QUk9UTyh1bnNpZ25lZCBpbnQgZXZlbnRfY2xhc3MsIGludCBjcnRjLCB1bnNpZ25lZCBpbnQg
c2VxLAorCQkgICAgIGt0aW1lX3QgdGltZSwgYm9vbCBoaWdoX3ByZWMpLAorCSAgICBUUF9BUkdT
KGV2ZW50X2NsYXNzLCBjcnRjLCBzZXEsIHRpbWUsIGhpZ2hfcHJlYyksCiAJICAgIFRQX1NUUlVD
VF9fZW50cnkoCisJCSAgICBfX2ZpZWxkKHVuc2lnbmVkIGludCwgZXZlbnRfY2xhc3MpCiAJCSAg
ICBfX2ZpZWxkKGludCwgY3J0YykKIAkJICAgIF9fZmllbGQodW5zaWduZWQgaW50LCBzZXEpCiAJ
CSAgICBfX2ZpZWxkKGt0aW1lX3QsIHRpbWUpCiAJCSAgICBfX2ZpZWxkKGJvb2wsIGhpZ2hfcHJl
YykKIAkJICAgICksCiAJICAgIFRQX2Zhc3RfYXNzaWduKAorCQkgICAgX19lbnRyeS0+ZXZlbnRf
Y2xhc3MgPSBldmVudF9jbGFzczsKIAkJICAgIF9fZW50cnktPmNydGMgPSBjcnRjOwogCQkgICAg
X19lbnRyeS0+c2VxID0gc2VxOwogCQkgICAgX19lbnRyeS0+dGltZSA9IHRpbWU7CkBAIC0zMywx
NCArMTIxLDE3IEBAIFRSQUNFX0VWRU5UKGRybV92YmxhbmtfZXZlbnQsCiApOwogCiBERUNMQVJF
X0VWRU5UX0NMQVNTKGNsYXNzX2RybV92YmxhbmtfZXZlbnQsCi0JICAgIFRQX1BST1RPKHN0cnVj
dCBkcm1fZmlsZSAqZmlsZSwgaW50IGNydGMsIHVuc2lnbmVkIGludCBzZXEpLAotCSAgICBUUF9B
UkdTKGZpbGUsIGNydGMsIHNlcSksCisJICAgIFRQX1BST1RPKHVuc2lnbmVkIGludCBldmVudF9j
bGFzcywgc3RydWN0IGRybV9maWxlICpmaWxlLAorCQkgICAgIGludCBjcnRjLCB1bnNpZ25lZCBp
bnQgc2VxKSwKKwkgICAgVFBfQVJHUyhldmVudF9jbGFzcywgZmlsZSwgY3J0Yywgc2VxKSwKIAkg
ICAgVFBfU1RSVUNUX19lbnRyeSgKKwkJICAgIF9fZmllbGQodW5zaWduZWQgaW50LCBldmVudF9j
bGFzcykKIAkJICAgIF9fZmllbGQoc3RydWN0IGRybV9maWxlICosIGZpbGUpCiAJCSAgICBfX2Zp
ZWxkKGludCwgY3J0YykKIAkJICAgIF9fZmllbGQodW5zaWduZWQgaW50LCBzZXEpCiAJCSAgICAp
LAogCSAgICBUUF9mYXN0X2Fzc2lnbigKKwkJICAgIF9fZW50cnktPmV2ZW50X2NsYXNzID0gZXZl
bnRfY2xhc3M7CiAJCSAgICBfX2VudHJ5LT5maWxlID0gZmlsZTsKIAkJICAgIF9fZW50cnktPmNy
dGMgPSBjcnRjOwogCQkgICAgX19lbnRyeS0+c2VxID0gc2VxOwpAQCAtNDksMTIgKzE0MCwxNCBA
QCBERUNMQVJFX0VWRU5UX0NMQVNTKGNsYXNzX2RybV92YmxhbmtfZXZlbnQsCiAJCSAgICAgIF9f
ZW50cnktPnNlcSkKICk7CiBERUZJTkVfRVZFTlQoY2xhc3NfZHJtX3ZibGFua19ldmVudCwgZHJt
X3ZibGFua19ldmVudF9xdWV1ZWQsCi0JVFBfUFJPVE8oc3RydWN0IGRybV9maWxlICpmaWxlLCBp
bnQgY3J0YywgdW5zaWduZWQgaW50IHNlcSksCi0JVFBfQVJHUyhmaWxlLCBjcnRjLCBzZXEpCisJ
VFBfUFJPVE8odW5zaWduZWQgaW50IGV2ZW50X2NsYXNzLCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUs
IGludCBjcnRjLAorCQkgdW5zaWduZWQgaW50IHNlcSksCisJVFBfQVJHUyhldmVudF9jbGFzcywg
ZmlsZSwgY3J0Yywgc2VxKQogKTsKIERFRklORV9FVkVOVChjbGFzc19kcm1fdmJsYW5rX2V2ZW50
LCBkcm1fdmJsYW5rX2V2ZW50X2RlbGl2ZXJlZCwKLQlUUF9QUk9UTyhzdHJ1Y3QgZHJtX2ZpbGUg
KmZpbGUsIGludCBjcnRjLCB1bnNpZ25lZCBpbnQgc2VxKSwKLQlUUF9BUkdTKGZpbGUsIGNydGMs
IHNlcSkKKwlUUF9QUk9UTyh1bnNpZ25lZCBpbnQgZXZlbnRfY2xhc3MsIHN0cnVjdCBkcm1fZmls
ZSAqZmlsZSwgaW50IGNydGMsCisJCSB1bnNpZ25lZCBpbnQgc2VxKSwKKwlUUF9BUkdTKGV2ZW50
X2NsYXNzLCBmaWxlLCBjcnRjLCBzZXEpCiApOwogCiAjZW5kaWYgLyogX0RSTV9UUkFDRV9IXyAq
LwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV92YmxhbmsuYyBiL2RyaXZlcnMvZ3B1
L2RybS9kcm1fdmJsYW5rLmMKaW5kZXggMTY1OWIxM2IxNzhjMi4uMTlhNjNhOTQ1ODZhZCAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV92YmxhbmsuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vZHJtX3ZibGFuay5jCkBAIC04ODAsNyArODgwLDcgQEAgc3RhdGljIHZvaWQgc2VuZF92Ymxh
bmtfZXZlbnQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJZS0+ZXZlbnQuc2VxLnRpbWVfbnMg
PSBrdGltZV90b19ucyhub3cpOwogCQlicmVhazsKIAl9Ci0JdHJhY2VfZHJtX3ZibGFua19ldmVu
dF9kZWxpdmVyZWQoZS0+YmFzZS5maWxlX3ByaXYsIGUtPnBpcGUsIHNlcSk7CisJZHJtX3RyYWNl
KHZibGFuaywgZXZlbnRfZGVsaXZlcmVkLCBlLT5iYXNlLmZpbGVfcHJpdiwgZS0+cGlwZSwgc2Vx
KTsKIAlkcm1fc2VuZF9ldmVudF9sb2NrZWQoZGV2LCAmZS0+YmFzZSk7CiB9CiAKQEAgLTE1Mjks
NyArMTUyOSw3IEBAIHN0YXRpYyBpbnQgZHJtX3F1ZXVlX3ZibGFua19ldmVudChzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LCB1bnNpZ25lZCBpbnQgcGlwZSwKIAlEUk1fREVCVUcoImV2ZW50IG9uIHZi
bGFuayBjb3VudCAlbGx1LCBjdXJyZW50ICVsbHUsIGNydGMgJXVcbiIsCiAJCSAgcmVxX3NlcSwg
c2VxLCBwaXBlKTsKIAotCXRyYWNlX2RybV92YmxhbmtfZXZlbnRfcXVldWVkKGZpbGVfcHJpdiwg
cGlwZSwgcmVxX3NlcSk7CisJZHJtX3RyYWNlKHZibGFuaywgZXZlbnRfcXVldWVkLCBmaWxlX3By
aXYsIHBpcGUsIHJlcV9zZXEpOwogCiAJZS0+c2VxdWVuY2UgPSByZXFfc2VxOwogCWlmICh2Ymxh
bmtfcGFzc2VkKHNlcSwgcmVxX3NlcSkpIHsKQEAgLTE3NjAsOCArMTc2MCw4IEBAIHN0YXRpYyB2
b2lkIGRybV9oYW5kbGVfdmJsYW5rX2V2ZW50cyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1bnNp
Z25lZCBpbnQgcGlwZSkKIAkJc2VuZF92YmxhbmtfZXZlbnQoZGV2LCBlLCBzZXEsIG5vdyk7CiAJ
fQogCi0JdHJhY2VfZHJtX3ZibGFua19ldmVudChwaXBlLCBzZXEsIG5vdywKLQkJCWRldi0+ZHJp
dmVyLT5nZXRfdmJsYW5rX3RpbWVzdGFtcCAhPSBOVUxMKTsKKwlkcm1fdHJhY2UodmJsYW5rLCBl
dmVudCwgcGlwZSwgc2VxLCBub3csCisJCSAgZGV2LT5kcml2ZXItPmdldF92YmxhbmtfdGltZXN0
YW1wICE9IE5VTEwpOwogfQogCiAvKioKLS0gClNlYW4gUGF1bCwgU29mdHdhcmUgRW5naW5lZXIs
IEdvb2dsZSAvIENocm9taXVtIE9TCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVl
ZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9kcmktZGV2ZWw=
