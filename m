Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EFAF9CF76F
	for <lists+dri-devel@lfdr.de>; Tue,  8 Oct 2019 12:49:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AC26A6E798;
	Tue,  8 Oct 2019 10:49:56 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x543.google.com (mail-ed1-x543.google.com
 [IPv6:2a00:1450:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4D5D36E791
 for <dri-devel@lists.freedesktop.org>; Tue,  8 Oct 2019 10:49:54 +0000 (UTC)
Received: by mail-ed1-x543.google.com with SMTP id a15so15195557edt.6
 for <dri-devel@lists.freedesktop.org>; Tue, 08 Oct 2019 03:49:54 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=Z3cSnTSGffijIT6vfd/h9PBJ4b/lMd08VLowpFevAu4=;
 b=dcQe79wS98AmClJjtA4q/u/6IUDWWyEQ9YlibZfDla/cxLs7RLQhGCDQjTaXos86Lp
 oIKkaGz318YlCOvxxKDg1YflBtqSGG1dt/5V+lbLxNouNprR2BBFA6n0LUyQvLcUKY27
 bjE6W+ej5UHMvPwcqCDN6zYymUgY33zLMNkSQBVR8jIWV91eNDitU48HvPQXnHpV1Mmn
 11N7b2KXNhjzuyMuUpsUmPOXpxHlCNVYvetO+BxjNQOY2QEVwu0Ahu1nLymMvmVH3vRs
 TfUiRBv6hI8gwUuk4vSjM2fJgHi/hnqEdFBR8c5rmX88uIQJjD7Z35vbzUp3F+iIoDDA
 HPZw==
X-Gm-Message-State: APjAAAXXyOHxIzLilzmI/9xKN9HebRBZYlgOKBaCQABIk0Mqj9IMnfcM
 mEl0O+Mis5habegxiJUpY/P2PcZeJUg6jQ==
X-Google-Smtp-Source: APXvYqwB6F/rt/Xx3FJNYeVmbSacW6rpwS1xLrTGM+Jl+DRMgfk2xakqMAhKWfKOI8vExzriBEi3pw==
X-Received: by 2002:a17:906:1357:: with SMTP id
 x23mr28069278ejb.66.1570531792530; 
 Tue, 08 Oct 2019 03:49:52 -0700 (PDT)
Received: from mail-wm1-f49.google.com (mail-wm1-f49.google.com.
 [209.85.128.49])
 by smtp.gmail.com with ESMTPSA id nq1sm2252167ejb.75.2019.10.08.03.49.51
 for <dri-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Tue, 08 Oct 2019 03:49:52 -0700 (PDT)
Received: by mail-wm1-f49.google.com with SMTP id r19so2628087wmh.2
 for <dri-devel@lists.freedesktop.org>; Tue, 08 Oct 2019 03:49:51 -0700 (PDT)
X-Received: by 2002:a1c:e404:: with SMTP id b4mr3527968wmh.90.1570531791082;
 Tue, 08 Oct 2019 03:49:51 -0700 (PDT)
MIME-Version: 1.0
References: <20190912094121.228435-1-tfiga@chromium.org>
 <20190917132305.GV3958@phenom.ffwll.local>
 <CAAFQd5ADmObo1yVnFGaWDU=DHF+tex3tWJxTZLkxv=EdGNNM7A@mail.gmail.com>
 <20191008100328.GN16989@phenom.ffwll.local>
In-Reply-To: <20191008100328.GN16989@phenom.ffwll.local>
From: Tomasz Figa <tfiga@chromium.org>
Date: Tue, 8 Oct 2019 19:49:39 +0900
X-Gmail-Original-Message-ID: <CAAFQd5CR2YhyNoSv7=nUhPQ7Nap6n36DrtsCfqS+-iWydAqbNA@mail.gmail.com>
Message-ID: <CAAFQd5CR2YhyNoSv7=nUhPQ7Nap6n36DrtsCfqS+-iWydAqbNA@mail.gmail.com>
Subject: Re: [RFC PATCH] drm/virtio: Export resource handles via DMA-buf API
To: Daniel Vetter <daniel@ffwll.ch>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=chromium.org; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=Z3cSnTSGffijIT6vfd/h9PBJ4b/lMd08VLowpFevAu4=;
 b=QRoxTNH8HzlkVmQ672u9tOKBXh7SMaiOCH4YK6w29LIn4LzX5K0l9Au12ZtnVs6ExK
 1Mn+g6XF9uGfCw0lZeJW9TYEsGcCYdcNftwvEjs3SDyT5Tl3aUpkcl3c9/Rwrjx5vZ4W
 oQT+DdHUDVNhlWkkffAh7zVFbh5f+ZDhj9Nxk=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Zach Reizner <zachr@chromium.org>, David Airlie <airlied@linux.ie>,
 Linux Kernel Mailing List <linux-kernel@vger.kernel.org>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 virtualization@lists.linux-foundation.org,
 Keiichi Watanabe <keiichiw@chromium.org>, stevensd@chromium.org,
 =?UTF-8?Q?St=C3=A9phane_Marchesin?= <marcheu@chromium.org>,
 Pawel Osciak <posciak@chromium.org>, Gerd Hoffmann <kraxel@redhat.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBPY3QgOCwgMjAxOSBhdCA3OjAzIFBNIERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZnds
bC5jaD4gd3JvdGU6Cj4KPiBPbiBTYXQsIE9jdCAwNSwgMjAxOSBhdCAwMjo0MTo1NFBNICswOTAw
LCBUb21hc3ogRmlnYSB3cm90ZToKPiA+IEhpIERhbmllbCwgR2VyZCwKPiA+Cj4gPiBPbiBUdWUs
IFNlcCAxNywgMjAxOSBhdCAxMDoyMyBQTSBEYW5pZWwgVmV0dGVyIDxkYW5pZWxAZmZ3bGwuY2g+
IHdyb3RlOgo+ID4gPgo+ID4gPiBPbiBUaHUsIFNlcCAxMiwgMjAxOSBhdCAwNjo0MToyMVBNICsw
OTAwLCBUb21hc3ogRmlnYSB3cm90ZToKPiA+ID4gPiBUaGlzIHBhdGNoIGlzIGFuIGVhcmx5IFJG
QyB0byBqdWRnZSB0aGUgZGlyZWN0aW9uIHdlIGFyZSBmb2xsb3dpbmcgaW4KPiA+ID4gPiBvdXIg
dmlydHVhbGl6YXRpb24gZWZmb3J0cyBpbiBDaHJvbWUgT1MuIFRoZSBwdXJwb3NlIGlzIHRvIHN0
YXJ0IGEKPiA+ID4gPiBkaXNjdXNzaW9uIG9uIGhvdyB0byBoYW5kbGUgYnVmZmVyIHNoYXJpbmcg
YmV0d2VlbiBtdWx0aXBsZSB2aXJ0aW8KPiA+ID4gPiBkZXZpY2VzLgo+ID4gPiA+Cj4gPiA+ID4g
T24gYSBzaWRlIG5vdGUsIHdlIGFyZSBhbHNvIHdvcmtpbmcgb24gYSB2aXJ0aW8gdmlkZW8gZGVj
b2RlciBpbnRlcmZhY2UKPiA+ID4gPiBhbmQgaW1wbGVtZW50YXRpb24sIHdpdGggYSBWNEwyIGRy
aXZlciBmb3IgTGludXguIFRob3NlIHdpbGwgYmUgcG9zdGVkCj4gPiA+ID4gZm9yIHJldmlldyBp
biB0aGUgbmVhciBmdXR1cmUgYXMgd2VsbC4KPiA+ID4gPgo+ID4gPiA+IEFueSBmZWVkYmFjayB3
aWxsIGJlIGFwcHJlY2lhdGVkISBUaGFua3MgaW4gYWR2YW5jZS4KPiA+ID4gPgo+ID4gPiA+ID09
PQo+ID4gPiA+Cj4gPiA+ID4gV2l0aCB0aGUgcmFuZ2Ugb2YgdXNlIGNhc2VzIGZvciB2aXJ0dWFs
aXphdGlvbiBleHBhbmRpbmcsIHRoZXJlIGlzIGdvaW5nCj4gPiA+ID4gdG8gYmUgbW9yZSB2aXJ0
aW8gZGV2aWNlcyBhZGRlZCB0byB0aGUgZWNvc3lzdGVtLiBEZXZpY2VzIHN1Y2ggYXMgdmlkZW8K
PiA+ID4gPiBkZWNvZGVycywgZW5jb2RlcnMsIGNhbWVyYXMsIGV0Yy4gdHlwaWNhbGx5IHdvcmsg
dG9nZXRoZXIgd2l0aCB0aGUKPiA+ID4gPiBkaXNwbGF5IGFuZCBHUFUgaW4gYSBwaXBlbGluZSBt
YW5uZXIsIHdoaWNoIGNhbiBvbmx5IGJlIGltcGxlbWVudGVkCj4gPiA+ID4gZWZmaWNpZW50bHkg
Ynkgc2hhcmluZyB0aGUgYnVmZmVycyBiZXR3ZWVuIHByb2R1Y2VycyBhbmQgY29uc3VtZXJzLgo+
ID4gPiA+Cj4gPiA+ID4gRXhpc3RpbmcgYnVmZmVyIG1hbmFnZW1lbnQgZnJhbWV3b3JrIGluIExp
bnV4LCBzdWNoIGFzIHRoZSB2aWRlb2J1ZjIKPiA+ID4gPiBmcmFtZXdvcmsgaW4gVjRMMiwgaW1w
bGVtZW50cyBhbGwgdGhlIERNQS1idWYgaGFuZGxpbmcgaW5zaWRlIGdlbmVyaWMKPiA+ID4gPiBj
b2RlIGFuZCBkbyBub3QgZXhwb3NlIGFueSBsb3cgbGV2ZWwgaW5mb3JtYXRpb24gYWJvdXQgdGhl
IGJ1ZmZlcnMgdG8KPiA+ID4gPiB0aGUgZHJpdmVycy4KPiA+ID4gPgo+ID4gPiA+IFRvIHNlYW1s
ZXNzbHkgZW5hYmxlIGJ1ZmZlciBzaGFyaW5nIHdpdGggZHJpdmVycyB1c2luZyBzdWNoIGZyYW1l
d29ya3MsCj4gPiA+ID4gbWFrZSB0aGUgdmlydGlvLWdwdSBkcml2ZXIgZXhwb3NlIHRoZSByZXNv
dXJjZSBoYW5kbGUgYXMgdGhlIERNQSBhZGRyZXNzCj4gPiA+ID4gb2YgdGhlIGJ1ZmZlciByZXR1
cm5lZCBmcm9tIHRoZSBETUEtYnVmIG1hcHBpbmcgb3BlcmF0aW9uLiBBcmd1YWJseSwgdGhlCj4g
PiA+ID4gcmVzb3VyY2UgaGFuZGxlIGlzIGEga2luZCBvZiBETUEgYWRkcmVzcyBhbHJlYWR5LCBh
cyBpdCBpcyB0aGUgYnVmZmVyCj4gPiA+ID4gaWRlbnRpZmllciB0aGF0IHRoZSBkZXZpY2UgbmVl
ZHMgdG8gYWNjZXNzIHRoZSBiYWNraW5nIG1lbW9yeSwgd2hpY2ggaXMKPiA+ID4gPiBleGFjdGx5
IHRoZSBzYW1lIHJvbGUgYSBETUEgYWRkcmVzcyBwcm92aWRlcyBmb3IgbmF0aXZlIGRldmljZXMu
Cj4gPiA+ID4KPiA+ID4gPiBBIHZpcnRpbyBkcml2ZXIgdGhhdCBkb2VzIG1lbW9yeSBtYW5hZ2Vt
ZW50IGZ1bGx5IG9uIGl0cyBvd24gd291bGQgaGF2ZQo+ID4gPiA+IGNvZGUgc2ltaWxhciB0byBm
b2xsb3dpbmcuIFRoZSBjb2RlIGlzIGlkZW50aWNhbCB0byB3aGF0IGEgcmVndWxhcgo+ID4gPiA+
IGRyaXZlciBmb3IgcmVhbCBoYXJkd2FyZSB3b3VsZCBkbyB0byBpbXBvcnQgYSBETUEtYnVmLgo+
ID4gPiA+Cj4gPiA+ID4gc3RhdGljIGludCB2aXJ0aW9fZm9vX2dldF9yZXNvdXJjZV9oYW5kbGUo
c3RydWN0IHZpcnRpb19mb28gKmZvbywKPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc3RydWN0IGRtYV9idWYgKmRtYV9idWYsIHUzMiAqaWQpCj4gPiA+ID4g
ewo+ID4gPiA+ICAgICAgIHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaDsKPiA+ID4g
PiAgICAgICBzdHJ1Y3Qgc2dfdGFibGUgKnNndDsKPiA+ID4gPiAgICAgICBpbnQgcmV0ID0gMDsK
PiA+ID4gPgo+ID4gPiA+ICAgICAgIGF0dGFjaCA9IGRtYV9idWZfYXR0YWNoKGRtYV9idWYsIGZv
by0+ZGV2KTsKPiA+ID4gPiAgICAgICBpZiAoSVNfRVJSKGF0dGFjaCkpCj4gPiA+ID4gICAgICAg
ICAgICAgICByZXR1cm4gUFRSX0VSUihhdHRhY2gpOwo+ID4gPiA+Cj4gPiA+ID4gICAgICAgc2d0
ID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudChhdHRhY2gsIERNQV9CSURJUkVDVElPTkFMKTsKPiA+
ID4gPiAgICAgICBpZiAoSVNfRVJSKHNndCkpIHsKPiA+ID4gPiAgICAgICAgICAgICAgIHJldCA9
IFBUUl9FUlIoc2d0KTsKPiA+ID4gPiAgICAgICAgICAgICAgIGdvdG8gZXJyX2RldGFjaDsKPiA+
ID4gPiAgICAgICB9Cj4gPiA+ID4KPiA+ID4gPiAgICAgICBpZiAoc2d0LT5uZW50cyAhPSAxKSB7
Cj4gPiA+ID4gICAgICAgICAgICAgICByZXQgPSAtRUlOVkFMOwo+ID4gPiA+ICAgICAgICAgICAg
ICAgZ290byBlcnJfdW5tYXA7Cj4gPiA+ID4gICAgICAgfQo+ID4gPiA+Cj4gPiA+ID4gICAgICAg
KmlkID0gc2dfZG1hX2FkZHJlc3Moc2d0LT5zZ2wpOwo+ID4gPgo+ID4gPiBJIGFncmVlIHdpdGgg
R2VyZCwgdGhpcyBsb29rcyBwcmV0dHkgaG9ycmlibGUgdG8gbWUuCj4gPiA+Cj4gPiA+IFRoZSB1
c3VhbCB3YXkgd2UndmUgZG9uZSB0aGVzZSBraW5kIG9mIHNwZWNpYWwgZG1hLWJ1ZnMgaXM6Cj4g
PiA+Cj4gPiA+IC0gVGhleSBhbGwgZ2V0IGFsbG9jYXRlZCBhdCB0aGUgc2FtZSBwbGFjZSwgdGhy
b3VnaCBzb21lIGxpYnJhcnkgb3IKPiA+ID4gICB3aGF0ZXZlci4KPiA+ID4KPiA+ID4gLSBZb3Ug
YWRkIGEgZG1hX2J1Zl9pc192aXJ0aW8oZG1hX2J1ZikgZnVuY3Rpb24sIG9yIG1heWJlIHNvbWV0
aGluZyB0aGF0Cj4gPiA+ICAgYWxzbyB1cGNhc3RzIG9yIHJldHVybnMgTlVMTCwgd2hpY2ggY2hl
Y2tzIGZvciBkbWFfYnVmLT5vcHMuCj4gPiA+Cj4gPgo+ID4gVGhhbmtzIGZvciBhIGxvdCBvZiB2
YWx1YWJsZSBmZWVkYmFjayBhbmQgc29ycnkgZm9yIHRoZSBsYXRlIHJlcGx5Lgo+ID4KPiA+IFdo
aWxlIEkgYWdyZWUgdGhhdCBzdHVmZmluZyB0aGUgcmVzb3VyY2UgSUQgaW4gc2dfZG1hX2FkZHJl
c3MoKSBpcwo+ID4gcXVpdGUgdWdseSAoZm9yIGV4YW1wbGUsIHRoZSByZWd1bGFyIGFkZHJlc3Mg
YXJpdGhtZXRpYyBkb2Vzbid0IHdvcmspLAo+ID4gSSBzdGlsbCBiZWxpZXZlIHdlIG5lZWQgdG8g
Y29udmV5IGluZm9ybWF0aW9uIGFib3V0IHRoZXNlIGJ1ZmZlcnMKPiA+IHVzaW5nIHJlZ3VsYXIg
a2VybmVsIGludGVyZmFjZXMuCj4gPgo+ID4gRHJpdmVycyBpbiBzb21lIHN1YnN5c3RlbXMgbGlr
ZSBEUk0gdGVuZCB0byBvcGVuIGNvZGUgYW55IGJ1ZmZlcgo+ID4gbWFuYWdlbWVudCBhbmQgdGhl
biBpdCB3b3VsZG4ndCBiZSBhbnkgcHJvYmxlbSB0byBkbyB3aGF0IHlvdQo+ID4gc3VnZ2VzdGVk
LiBIb3dldmVyLCBvdGhlciBzdWJzeXN0ZW1zIGhhdmUgZ2VuZXJpYyBmcmFtZXdvcmtzIGZvcgo+
ID4gYnVmZmVyIG1hbmFnZW1lbnQsIGxpa2UgdmlkZW9idWYyIGZvciBWNEwyLiBUaG9zZSBhc3N1
bWUgcmVndWxhcgo+ID4gRE1BLWJ1ZnMgdGhhdCBjYW4gYmUgaGFuZGxlZCB3aXRoIHJlZ3VsYXIg
ZG1hX2J1Zl8oKSBBUEkgYW5kIGRlc2NyaWJlZAo+ID4gdXNpbmcgc2d0YWJsZXMgYW5kL29yIHBm
biB2ZWN0b3JzIGFuZC9vciBETUEgYWRkcmVzc2VzLgo+Cj4gIm90aGVyIHN1YnN5c3RlbSBzdWNr
cyIgZG9lc24ndCBzb3VuZCBsaWtlIGEgZ29vZCBkZXNpZ24gcGFyYWRpZ20gdG8gbWUuCj4gRm9y
Y2VkIG1pZGxheWVycyBhcmUgYSBiYWQgZGVzaWduIGRlY2lzaW9uIGlzbid0IHJlYWxseSBuZXcg
YXQgYWxsIC4uLgo+CgpTb3JyeSwgSSBkb24ndCB0aGluayB0aGF0J3MgYW4gYXJndW1lbnQuIFRo
ZXJlIGFyZSB2YXJpb3VzIGRlc2lnbgphc3BlY3RzIGFuZCBmb3IgdGhlIHNjZW5hcmlvcyBmb3Ig
d2hpY2ggVjRMMiB3YXMgZGVzaWduZWQsIHRoZSBvdGhlcgpzdWJzeXN0ZW1zIG1heSBhY3R1YWxs
eSAic3VjayIuIExldCdzIG5vdCBkZXJhaWwgdGhlIGRpc2N1c3Npb24gaW50bwpqdWRnaW5nIHdo
aWNoIHN1YnN5c3RlbXMgYXJlIGJldHRlciBvciB3b3JzZS4KClRob3NlIG1pZCBsYXllcnMgYXJl
IG5vdCBmb3JjZWQsIHlvdSBkb24ndCBoYXZlIHRvIHVzZSB2aWRlb2J1ZjIsIGJ1dAppdCBzYXZl
cyB5b3UgYSBsb3Qgb2Ygb3BlbiBjb2RpbmcsIHBvdGVudGlhbCBzZWN1cml0eSBpc3N1ZXMgYW5k
IHNvCm9uLgoKPiA+ID4gLSBPbmNlIHlvdSd2ZSB1cGNhc3RlZCBhdCBydW50aW1lIGJ5IGNoZWNr
aW5nIGZvciAtPm9wcywgeW91IGNhbiBhZGQKPiA+ID4gICB3aGF0ZXZlciBmYW5jeSBpbnRlcmZh
Y2VzIHlvdSB3YW50LiBJbmNsdWRpbmcgYSByZWFsJnByb3BlciBpbnRlcmZhY2UgdG8KPiA+ID4g
ICBnZXQgYXQgd2hhdGV2ZXIgdW5kZXJseWluZyBpZCB5b3UgbmVlZCB0byBmb3IgcmVhbCBidWZm
ZXIgc2hhcmluZwo+ID4gPiAgIGJldHdlZW4gdmlydGlvIGRldmljZXMuCj4gPiA+Cj4gPiA+IElu
IGEgd2F5IHZpcnRpbyBidWZmZXIvbWVtb3J5IGlkcyBhcmUgYSBraW5kIG9mIHByaXZhdGUgYnVz
LCBlbnRpcmVseQo+ID4gPiBkaXN0aW5jdCBmcm9tIHRoZSBkbWFfYWRkcl90IGJ1cy4gU28gY2Fu
J3QgcmVhbGx5IHN0dWZmIHRoZW0gdW5kZXIgdGhpcwo+ID4gPiBzYW1lIHRoaW5nIGxpa2Ugd2Ug
ZS5nLiBkbyB3aXRoIHBjaSBwZWVyMnBlZXIuCj4gPgo+ID4gQXMgSSBtZW50aW9uZWQgZWFybGll
ciwgdGhlcmUgaXMgbm8gc2luZ2xlICJkbWFfYWRkcl90IGJ1cyIuIEVhY2gKPiA+IGRldmljZSAo
YXMgaW4gc3RydWN0IGRldmljZSkgY2FuIGJlIG9uIGl0cyBvd24gZGlmZmVyZW50IERNQSBidXMs
IHdpdGgKPiA+IGEgZGlmZmVyZW50IERNQSBhZGRyZXNzIHNwYWNlLiBUaGVyZSBpcyBub3QgZXZl
biBhIGd1YXJhbnRlZSB0aGF0IGEKPiA+IERNQSBhZGRyZXNzIG9idGFpbmVkIGZvciBvbmUgUENJ
IGRldmljZSB3aWxsIGJlIHZhbGlkIGZvciBhbm90aGVyIGlmCj4gPiB0aGV5IGFyZSBvbiBkaWZm
ZXJlbnQgYnVzZXMsIHdoaWNoIGNvdWxkIGhhdmUgZGlmZmVyZW50IGFkZHJlc3MKPiA+IG1hcHBp
bmdzLgo+ID4KPiA+IFB1dHRpbmcgdGhhdCBhc2lkZSwgd2UncmUgdGhpbmtpbmcgYWJvdXQgYSBk
aWZmZXJlbnQgYXBwcm9hY2gsIGFzIEdlcmQKPiA+IHN1Z2dlc3RlZCBpbiBhbm90aGVyIHRocmVh
ZCwgdGhlIG9uZSBhYm91dCB0aGUgVmlydGlvIFZpZGVvIERlY29kZXIKPiA+IHByb3RvY29sLiBJ
J20gZ29pbmcgdG8gcmVwbHkgdGhlcmUsIG1ha2luZyBzdXJlIHRvIENDIGV2ZXJ5b25lCj4gPiBp
bnZvbHZlZCBoZXJlLgo+Cj4gb2suCj4gLURhbmllbAo+Cj4gPgo+ID4gQmVzdCByZWdhcmRzLAo+
ID4gVG9tYXN6Cj4gPgo+ID4gPiAtRGFuaWVsCj4gPiA+Cj4gPiA+ID4KPiA+ID4gPiBlcnJfdW5t
YXA6Cj4gPiA+ID4gICAgICAgZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KGF0dGFjaCwgc2d0LCBE
TUFfQklESVJFQ1RJT05BTCk7Cj4gPiA+ID4gZXJyX2RldGFjaDoKPiA+ID4gPiAgICAgICBkbWFf
YnVmX2RldGFjaChkbWFfYnVmLCBhdHRhY2gpOwo+ID4gPiA+Cj4gPiA+ID4gICAgICAgcmV0dXJu
IHJldDsKPiA+ID4gPiB9Cj4gPiA+ID4KPiA+ID4gPiBPbiB0aGUgb3RoZXIgaGFuZCwgYSB2aXJ0
aW8gZHJpdmVyIHRoYXQgdXNlcyBhbiBleGlzdGluZyBrZXJuZWwKPiA+ID4gPiBmcmFtZXdvcmsg
dG8gbWFuYWdlIGJ1ZmZlcnMgd291bGQgbm90IG5lZWQgdG8gZXhwbGljaXRseSBoYW5kbGUgYW55
dGhpbmcKPiA+ID4gPiBhdCBhbGwsIGFzIHRoZSBmcmFtZXdvcmsgcGFydCByZXNwb25zaWJsZSBm
b3IgaW1wb3J0aW5nIERNQS1idWZzIHdvdWxkCj4gPiA+ID4gYWxyZWFkeSBkbyB0aGUgd29yay4g
Rm9yIGV4YW1wbGUsIGEgVjRMMiBkcml2ZXIgdXNpbmcgdGhlIHZpZGVvYnVmMgo+ID4gPiA+IGZy
YW1ld29yayB3b3VsZCBqdXN0IGNhbGwgdGhlZSB2YjJfZG1hX2NvbnRpZ19wbGFuZV9kbWFfYWRk
cigpIGZ1bmN0aW9uCj4gPiA+ID4gdG8gZ2V0IHdoYXQgdGhlIGFib3ZlIG9wZW4tY29kZWQgZnVu
Y3Rpb24gd291bGQgcmV0dXJuLgo+ID4gPiA+Cj4gPiA+ID4gU2lnbmVkLW9mZi1ieTogVG9tYXN6
IEZpZ2EgPHRmaWdhQGNocm9taXVtLm9yZz4KPiA+ID4gPiAtLS0KPiA+ID4gPiAgZHJpdmVycy9n
cHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5jICAgfCAgMiArCj4gPiA+ID4gIGRyaXZlcnMvZ3B1
L2RybS92aXJ0aW8vdmlydGdwdV9kcnYuaCAgIHwgIDQgKysKPiA+ID4gPiAgZHJpdmVycy9ncHUv
ZHJtL3ZpcnRpby92aXJ0Z3B1X3ByaW1lLmMgfCA4MSArKysrKysrKysrKysrKysrKysrKysrKysr
Kwo+ID4gPiA+ICAzIGZpbGVzIGNoYW5nZWQsIDg3IGluc2VydGlvbnMoKykKPiA+ID4gPgo+ID4g
PiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZHJ2LmMgYi9k
cml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZHJ2LmMKPiA+ID4gPiBpbmRleCAwZmMzMmZh
MGIzYzAuLmFjMDk1ZjgxMzEzNCAxMDA2NDQKPiA+ID4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
dmlydGlvL3ZpcnRncHVfZHJ2LmMKPiA+ID4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdmlydGlv
L3ZpcnRncHVfZHJ2LmMKPiA+ID4gPiBAQCAtMjEwLDYgKzIxMCw4IEBAIHN0YXRpYyBzdHJ1Y3Qg
ZHJtX2RyaXZlciBkcml2ZXIgPSB7Cj4gPiA+ID4gICNlbmRpZgo+ID4gPiA+ICAgICAgIC5wcmlt
ZV9oYW5kbGVfdG9fZmQgPSBkcm1fZ2VtX3ByaW1lX2hhbmRsZV90b19mZCwKPiA+ID4gPiAgICAg
ICAucHJpbWVfZmRfdG9faGFuZGxlID0gZHJtX2dlbV9wcmltZV9mZF90b19oYW5kbGUsCj4gPiA+
ID4gKyAgICAgLmdlbV9wcmltZV9leHBvcnQgPSB2aXJ0Z3B1X2dlbV9wcmltZV9leHBvcnQsCj4g
PiA+ID4gKyAgICAgLmdlbV9wcmltZV9pbXBvcnQgPSB2aXJ0Z3B1X2dlbV9wcmltZV9pbXBvcnQs
Cj4gPiA+ID4gICAgICAgLmdlbV9wcmltZV9nZXRfc2dfdGFibGUgPSB2aXJ0Z3B1X2dlbV9wcmlt
ZV9nZXRfc2dfdGFibGUsCj4gPiA+ID4gICAgICAgLmdlbV9wcmltZV9pbXBvcnRfc2dfdGFibGUg
PSB2aXJ0Z3B1X2dlbV9wcmltZV9pbXBvcnRfc2dfdGFibGUsCj4gPiA+ID4gICAgICAgLmdlbV9w
cmltZV92bWFwID0gdmlydGdwdV9nZW1fcHJpbWVfdm1hcCwKPiA+ID4gPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL3Zp
cnRpby92aXJ0Z3B1X2Rydi5oCj4gPiA+ID4gaW5kZXggZTI4ODI5NjYxNzI0Li42ODdjZmNlOTE4
ODUgMTAwNjQ0Cj4gPiA+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Ry
di5oCj4gPiA+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oCj4g
PiA+ID4gQEAgLTM2Nyw2ICszNjcsMTAgQEAgdm9pZCB2aXJ0aW9fZ3B1X29iamVjdF9mcmVlX3Nn
X3RhYmxlKHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdCAqYm8pOwo+ID4gPiA+ICBpbnQgdmlydGlv
X2dwdV9vYmplY3Rfd2FpdChzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3QgKmJvLCBib29sIG5vX3dh
aXQpOwo+ID4gPiA+Cj4gPiA+ID4gIC8qIHZpcnRncHVfcHJpbWUuYyAqLwo+ID4gPiA+ICtzdHJ1
Y3QgZG1hX2J1ZiAqdmlydGdwdV9nZW1fcHJpbWVfZXhwb3J0KHN0cnVjdCBkcm1fZ2VtX29iamVj
dCAqb2JqLAo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlu
dCBmbGFncyk7Cj4gPiA+ID4gK3N0cnVjdCBkcm1fZ2VtX29iamVjdCAqdmlydGdwdV9nZW1fcHJp
bWVfaW1wb3J0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gPiA+ID4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkbWFfYnVmICpidWYpOwo+ID4g
PiA+ICBzdHJ1Y3Qgc2dfdGFibGUgKnZpcnRncHVfZ2VtX3ByaW1lX2dldF9zZ190YWJsZShzdHJ1
Y3QgZHJtX2dlbV9vYmplY3QgKm9iaik7Cj4gPiA+ID4gIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAq
dmlydGdwdV9nZW1fcHJpbWVfaW1wb3J0X3NnX3RhYmxlKAo+ID4gPiA+ICAgICAgIHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwKPiA+ID4g
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X3ByaW1lLmMgYi9k
cml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfcHJpbWUuYwo+ID4gPiA+IGluZGV4IGRjNjQy
YTg4NGI4OC4uNTYyZWIxYTJlZDViIDEwMDY0NAo+ID4gPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS92aXJ0aW8vdmlydGdwdV9wcmltZS5jCj4gPiA+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3Zp
cnRpby92aXJ0Z3B1X3ByaW1lLmMKPiA+ID4gPiBAQCAtMjIsNiArMjIsOSBAQAo+ID4gPiA+ICAg
KiBBdXRob3JzOiBBbmRyZWFzIFBva29ybnkKPiA+ID4gPiAgICovCj4gPiA+ID4KPiA+ID4gPiAr
I2luY2x1ZGUgPGxpbnV4L2RtYS1idWYuaD4KPiA+ID4gPiArI2luY2x1ZGUgPGxpbnV4L2RtYS1k
aXJlY3Rpb24uaD4KPiA+ID4gPiArCj4gPiA+ID4gICNpbmNsdWRlIDxkcm0vZHJtX3ByaW1lLmg+
Cj4gPiA+ID4KPiA+ID4gPiAgI2luY2x1ZGUgInZpcnRncHVfZHJ2LmgiCj4gPiA+ID4gQEAgLTMw
LDYgKzMzLDg0IEBACj4gPiA+ID4gICAqIGRldmljZSB0aGF0IG1pZ2h0IHNoYXJlIGJ1ZmZlcnMg
d2l0aCB2aXJ0Z3B1Cj4gPiA+ID4gICAqLwo+ID4gPiA+Cj4gPiA+ID4gK3N0YXRpYyBzdHJ1Y3Qg
c2dfdGFibGUgKgo+ID4gPiA+ICt2aXJ0Z3B1X2dlbV9tYXBfZG1hX2J1ZihzdHJ1Y3QgZG1hX2J1
Zl9hdHRhY2htZW50ICphdHRhY2gsCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgIGVudW0g
ZG1hX2RhdGFfZGlyZWN0aW9uIGRpcikKPiA+ID4gPiArewo+ID4gPiA+ICsgICAgIHN0cnVjdCBk
cm1fZ2VtX29iamVjdCAqb2JqID0gYXR0YWNoLT5kbWFidWYtPnByaXY7Cj4gPiA+ID4gKyAgICAg
c3RydWN0IHZpcnRpb19ncHVfb2JqZWN0ICpibyA9IGdlbV90b192aXJ0aW9fZ3B1X29iaihvYmop
Owo+ID4gPiA+ICsgICAgIHN0cnVjdCBzZ190YWJsZSAqc2d0Owo+ID4gPiA+ICsgICAgIGludCBy
ZXQ7Cj4gPiA+ID4gKwo+ID4gPiA+ICsgICAgIHNndCA9IGt6YWxsb2Moc2l6ZW9mKCpzZ3QpLCBH
RlBfS0VSTkVMKTsKPiA+ID4gPiArICAgICBpZiAoIXNndCkKPiA+ID4gPiArICAgICAgICAgICAg
IHJldHVybiBFUlJfUFRSKC1FTk9NRU0pOwo+ID4gPiA+ICsKPiA+ID4gPiArICAgICByZXQgPSBz
Z19hbGxvY190YWJsZShzZ3QsIDEsIEdGUF9LRVJORUwpOwo+ID4gPiA+ICsgICAgIGlmIChyZXQp
IHsKPiA+ID4gPiArICAgICAgICAgICAgIGtmcmVlKHNndCk7Cj4gPiA+ID4gKyAgICAgICAgICAg
ICByZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsKPiA+ID4gPiArICAgICB9Cj4gPiA+ID4gKwo+ID4g
PiA+ICsgICAgIHNnX2RtYV9hZGRyZXNzKHNndC0+c2dsKSA9IGJvLT5od19yZXNfaGFuZGxlOwo+
ID4gPiA+ICsgICAgIHNnX2RtYV9sZW4oc2d0LT5zZ2wpID0gb2JqLT5zaXplOwo+ID4gPiA+ICsg
ICAgIHNndC0+bmVudHMgPSAxOwo+ID4gPiA+ICsKPiA+ID4gPiArICAgICByZXR1cm4gc2d0Owo+
ID4gPiA+ICt9Cj4gPiA+ID4gKwo+ID4gPiA+ICtzdGF0aWMgdm9pZCB2aXJ0Z3B1X2dlbV91bm1h
cF9kbWFfYnVmKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwKPiA+ID4gPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qgc2dfdGFibGUgKnNndCwKPiA+
ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtIGRtYV9kYXRhX2Rp
cmVjdGlvbiBkaXIpCj4gPiA+ID4gK3sKPiA+ID4gPiArICAgICBzZ19mcmVlX3RhYmxlKHNndCk7
Cj4gPiA+ID4gKyAgICAga2ZyZWUoc2d0KTsKPiA+ID4gPiArfQo+ID4gPiA+ICsKPiA+ID4gPiAr
c3RhdGljIGNvbnN0IHN0cnVjdCBkbWFfYnVmX29wcyB2aXJ0Z3B1X2RtYWJ1Zl9vcHMgPSAgewo+
ID4gPiA+ICsgICAgIC5jYWNoZV9zZ3RfbWFwcGluZyA9IHRydWUsCj4gPiA+ID4gKyAgICAgLmF0
dGFjaCA9IGRybV9nZW1fbWFwX2F0dGFjaCwKPiA+ID4gPiArICAgICAuZGV0YWNoID0gZHJtX2dl
bV9tYXBfZGV0YWNoLAo+ID4gPiA+ICsgICAgIC5tYXBfZG1hX2J1ZiA9IHZpcnRncHVfZ2VtX21h
cF9kbWFfYnVmLAo+ID4gPiA+ICsgICAgIC51bm1hcF9kbWFfYnVmID0gdmlydGdwdV9nZW1fdW5t
YXBfZG1hX2J1ZiwKPiA+ID4gPiArICAgICAucmVsZWFzZSA9IGRybV9nZW1fZG1hYnVmX3JlbGVh
c2UsCj4gPiA+ID4gKyAgICAgLm1tYXAgPSBkcm1fZ2VtX2RtYWJ1Zl9tbWFwLAo+ID4gPiA+ICsg
ICAgIC52bWFwID0gZHJtX2dlbV9kbWFidWZfdm1hcCwKPiA+ID4gPiArICAgICAudnVubWFwID0g
ZHJtX2dlbV9kbWFidWZfdnVubWFwLAo+ID4gPiA+ICt9Owo+ID4gPiA+ICsKPiA+ID4gPiArc3Ry
dWN0IGRtYV9idWYgKnZpcnRncHVfZ2VtX3ByaW1lX2V4cG9ydChzdHJ1Y3QgZHJtX2dlbV9vYmpl
Y3QgKm9iaiwKPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
bnQgZmxhZ3MpCj4gPiA+ID4gK3sKPiA+ID4gPiArICAgICBzdHJ1Y3QgZG1hX2J1ZiAqYnVmOwo+
ID4gPiA+ICsKPiA+ID4gPiArICAgICBidWYgPSBkcm1fZ2VtX3ByaW1lX2V4cG9ydChvYmosIGZs
YWdzKTsKPiA+ID4gPiArICAgICBpZiAoIUlTX0VSUihidWYpKQo+ID4gPiA+ICsgICAgICAgICAg
ICAgYnVmLT5vcHMgPSAmdmlydGdwdV9kbWFidWZfb3BzOwo+ID4gPiA+ICsKPiA+ID4gPiArICAg
ICByZXR1cm4gYnVmOwo+ID4gPiA+ICt9Cj4gPiA+ID4gKwo+ID4gPiA+ICtzdHJ1Y3QgZHJtX2dl
bV9vYmplY3QgKnZpcnRncHVfZ2VtX3ByaW1lX2ltcG9ydChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LAo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
dHJ1Y3QgZG1hX2J1ZiAqYnVmKQo+ID4gPiA+ICt7Cj4gPiA+ID4gKyAgICAgc3RydWN0IGRybV9n
ZW1fb2JqZWN0ICpvYmo7Cj4gPiA+ID4gKwo+ID4gPiA+ICsgICAgIGlmIChidWYtPm9wcyA9PSAm
dmlydGdwdV9kbWFidWZfb3BzKSB7Cj4gPiA+ID4gKyAgICAgICAgICAgICBvYmogPSBidWYtPnBy
aXY7Cj4gPiA+ID4gKyAgICAgICAgICAgICBpZiAob2JqLT5kZXYgPT0gZGV2KSB7Cj4gPiA+ID4g
KyAgICAgICAgICAgICAgICAgICAgIC8qCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAq
IEltcG9ydGluZyBkbWFidWYgZXhwb3J0ZWQgZnJvbSBvdXIgb3duIGdlbSBpbmNyZWFzZXMKPiA+
ID4gPiArICAgICAgICAgICAgICAgICAgICAgICogcmVmY291bnQgb24gZ2VtIGl0c2VsZiBpbnN0
ZWFkIG9mIGZfY291bnQgb2YgZG1hYnVmLgo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
Ki8KPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgZHJtX2dlbV9vYmplY3RfZ2V0KG9iaik7
Cj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmo7Cj4gPiA+ID4gKyAgICAg
ICAgICAgICB9Cj4gPiA+ID4gKyAgICAgfQo+ID4gPiA+ICsKPiA+ID4gPiArICAgICByZXR1cm4g
ZHJtX2dlbV9wcmltZV9pbXBvcnQoZGV2LCBidWYpOwo+ID4gPiA+ICt9Cj4gPiA+ID4gKwo+ID4g
PiA+ICBzdHJ1Y3Qgc2dfdGFibGUgKnZpcnRncHVfZ2VtX3ByaW1lX2dldF9zZ190YWJsZShzdHJ1
Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikKPiA+ID4gPiAgewo+ID4gPiA+ICAgICAgIHN0cnVjdCB2
aXJ0aW9fZ3B1X29iamVjdCAqYm8gPSBnZW1fdG9fdmlydGlvX2dwdV9vYmoob2JqKTsKPiA+ID4g
PiAtLQo+ID4gPiA+IDIuMjMuMC4yMzcuZ2M2YTRjZTUwYTAtZ29vZwo+ID4gPiA+Cj4gPiA+Cj4g
PiA+IC0tCj4gPiA+IERhbmllbCBWZXR0ZXIKPiA+ID4gU29mdHdhcmUgRW5naW5lZXIsIEludGVs
IENvcnBvcmF0aW9uCj4gPiA+IGh0dHA6Ly9ibG9nLmZmd2xsLmNoCj4KPiAtLQo+IERhbmllbCBW
ZXR0ZXIKPiBTb2Z0d2FyZSBFbmdpbmVlciwgSW50ZWwgQ29ycG9yYXRpb24KPiBodHRwOi8vYmxv
Zy5mZndsbC5jaApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
