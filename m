Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C390610C4F3
	for <lists+dri-devel@lfdr.de>; Thu, 28 Nov 2019 09:23:09 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BCC366E607;
	Thu, 28 Nov 2019 08:22:49 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from NAM03-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr790091.outbound.protection.outlook.com [40.107.79.91])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 661056E46B
 for <dri-devel@lists.freedesktop.org>; Wed, 27 Nov 2019 18:18:05 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=A9d1hlQehm4jYyq8NYRpDQhKXiGQGeFwyWbeLhZ88J2upobTOzPLjCMFkrCrLmiYPm8o3rGMiUAvgTu1zhzNZ6vwkUVSSOIf+pO4T92IdSU5t2A2jwOEYrTgM/v5uTAfFA4cRvD22xjZ6YKifCjAGGiY9gq18B16VEqeBvk/OhB/1+q/uVwzWzt14au55D6m3RNQCk9lkfjsHXZGT8RrbZQQlq7a/+7+5Wjz97p8T0eCOm8eD0GK+dsVwtapXMDnPFT0QodM5EOOawp2fMFEoa/Yl9ORqOrWhiOMZTfp86pu/anXKN5Ls+38ERWqU6ixkOLlO9usogoxliXbZlyn9g==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=DJ82oGZkvsuzeyy8JrOoAgoW7LqvlgXKurMEpl44H54=;
 b=b8BIjxHkZlmUEnaKCLzTAwHWOiMeeDhivViJj+vn4icQIaSFONQcGJflC8fzbVylKbJZ+RzNB53VpDyct3RcXJ+fy4t80g1OM6u7Qx0QBn/P/2xxqYJMeUo00j0zM+NaYnuf+swe8y0b5ausuB59BHdqfa4sZrD3Pm8xd+9LerbKvVld3qjgA3fAc8Zs4HD6nbOoZfON2TbQuF5SRudGoYDb+jO8BAizCiyLlgypO0auvcReDyiXR5KCTwkEMtQk5MKzd5Uspm2CgNWchUe4s//2f5JS8BMSSY7QUlJmFWPhXtEtpFCNgfcOyQBXQOkpB+RuyIh1otAisS7o8DAy8w==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=microsoft.com; dmarc=pass action=none
 header.from=microsoft.com; dkim=pass header.d=microsoft.com; arc=none
Received: from CY4PR21MB0629.namprd21.prod.outlook.com (10.175.115.19) by
 CY4PR21MB0149.namprd21.prod.outlook.com (10.173.189.19) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2495.4; Wed, 27 Nov 2019 18:14:22 +0000
Received: from CY4PR21MB0629.namprd21.prod.outlook.com
 ([fe80::ed94:4b6d:5371:285c]) by CY4PR21MB0629.namprd21.prod.outlook.com
 ([fe80::ed94:4b6d:5371:285c%4]) with mapi id 15.20.2516.003; Wed, 27 Nov 2019
 18:14:22 +0000
From: Michael Kelley <mikelley@microsoft.com>
To: Wei Hu <weh@microsoft.com>, "b.zolnierkie@samsung.com"
 <b.zolnierkie@samsung.com>, KY Srinivasan <kys@microsoft.com>, Haiyang Zhang
 <haiyangz@microsoft.com>, Stephen Hemminger <sthemmin@microsoft.com>,
 "sashal@kernel.org" <sashal@kernel.org>, "hch@lst.de" <hch@lst.de>,
 "m.szyprowski@samsung.com" <m.szyprowski@samsung.com>,
 "mchehab+samsung@kernel.org" <mchehab+samsung@kernel.org>, "sam@ravnborg.org"
 <sam@ravnborg.org>, "gregkh@linuxfoundation.org"
 <gregkh@linuxfoundation.org>, "alexandre.belloni@bootlin.com"
 <alexandre.belloni@bootlin.com>, "info@metux.net" <info@metux.net>,
 "arnd@arndb.de" <arnd@arndb.de>, "dri-devel@lists.freedesktop.org"
 <dri-devel@lists.freedesktop.org>, "linux-fbdev@vger.kernel.org"
 <linux-fbdev@vger.kernel.org>, "linux-kernel@vger.kernel.org"
 <linux-kernel@vger.kernel.org>, "linux-hyperv@vger.kernel.org"
 <linux-hyperv@vger.kernel.org>, Dexuan Cui <decui@microsoft.com>
Subject: RE: [PATCH v2] video: hyperv: hyperv_fb: Use physical memory for fb
 on HyperV Gen 1 VMs.
Thread-Topic: [PATCH v2] video: hyperv: hyperv_fb: Use physical memory for fb
 on HyperV Gen 1 VMs.
Thread-Index: AQHVoQ5PjN4EbiSJUU6r31f3vjqbG6efUlHw
Date: Wed, 27 Nov 2019 18:14:22 +0000
Message-ID: <CY4PR21MB0629A6D880A94949B98A3725D7440@CY4PR21MB0629.namprd21.prod.outlook.com>
References: <20191122082408.3210-1-weh@microsoft.com>
In-Reply-To: <20191122082408.3210-1-weh@microsoft.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
msip_labels: MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_Enabled=True;
 MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_SiteId=72f988bf-86f1-41af-91ab-2d7cd011db47;
 MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_Owner=mikelley@ntdev.microsoft.com;
 MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_SetDate=2019-11-27T18:14:20.7689160Z;
 MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_Name=General;
 MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_Application=Microsoft Azure
 Information Protection;
 MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_ActionId=0d63d08d-8989-4e45-9821-76f933e75210;
 MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_Extended_MSFT_Method=Automatic
x-originating-ip: [24.22.167.197]
x-ms-publictraffictype: Email
x-ms-office365-filtering-ht: Tenant
x-ms-office365-filtering-correlation-id: 6ec69b60-0fbd-4e86-2166-08d77365a109
x-ms-traffictypediagnostic: CY4PR21MB0149:|CY4PR21MB0149:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <CY4PR21MB0149D37AD592B940244C4586D7440@CY4PR21MB0149.namprd21.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:7691;
x-forefront-prvs: 023495660C
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(366004)(199004)(189003)(54094003)(1250700005)(7736002)(110136005)(86362001)(14444005)(2201001)(256004)(71190400001)(3846002)(74316002)(66476007)(66066001)(22452003)(64756008)(66446008)(66556008)(305945005)(71200400001)(2906002)(8676002)(25786009)(6116002)(8990500004)(81166006)(8936002)(76116006)(81156014)(99286004)(52536014)(10290500003)(9686003)(14454004)(498600001)(446003)(11346002)(55016002)(5660300002)(33656002)(1511001)(66946007)(229853002)(2501003)(6246003)(6636002)(26005)(186003)(7416002)(6506007)(10090500001)(7696005)(6436002)(76176011)(102836004)(921003)(1121003);
 DIR:OUT; SFP:1102; SCL:1; SRVR:CY4PR21MB0149;
 H:CY4PR21MB0629.namprd21.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:3; MX:3; 
received-spf: None (protection.outlook.com: microsoft.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: c3ft0+imYvk7HzFAXIJSEjt1ZKqFiooaIjTWlx+v7hMWH7Ps2vv9y9h20Oxl5eP8Rm7g7fk9urI2yvjuzXQXQuiXjhpbd/3IoStHCiAyN41jqzgLHpEXIJDmYrEenBEVfELcSme6lAEyXD2JS+ql7dFYDEARlxLinZdHdVU9Hb44hBJWT+yEQj9xBjHIBFyRBcqIgRhmjG+izszBnuTU3vUxATgbK3tZAIJpgtj9OBJonRWeP5EFFDD9UzT7xHLijG/Zr4jDHEuj/soiaG8Wg0I0ahWJlIwm2MLDcl3agKle9KSn4h/amRtdC+pYKBoKPGDspK9jO+7HrN50twn4eHcqnYWnBuSB+bvDtYB5chn6wapy3jQ9gXrrU9B3JCUMgaY2jzDYo4veXuRruc9ukzIfcKqM8OGWLaHlJfcNVphBit4d9+6Sv/TRNXrbx4lr
MIME-Version: 1.0
X-OriginatorOrg: microsoft.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 6ec69b60-0fbd-4e86-2166-08d77365a109
X-MS-Exchange-CrossTenant-originalarrivaltime: 27 Nov 2019 18:14:22.5466 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 72f988bf-86f1-41af-91ab-2d7cd011db47
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: HwMfejRQP/yCWYPMNaC4zcBDWPvDJjUbrXAQ06j8BN2YjqnSxoPEoLp2Mu9JW33/AI3qjGtZi+IrqlMzZkwAVYxNaE3DPKcCDD8bFliqFZA=
X-MS-Exchange-Transport-CrossTenantHeadersStamped: CY4PR21MB0149
X-Mailman-Approved-At: Thu, 28 Nov 2019 08:22:48 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=microsoft.com; s=selector2;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=DJ82oGZkvsuzeyy8JrOoAgoW7LqvlgXKurMEpl44H54=;
 b=X3Rx7XqZuTpziChpitr2kEOQ86WFpkuYAVFig3z2tRoOKP3K+lMW9QS1FbqJuuCzIRqzQyZ0wtynMWA8SA9ZAwA1GM9WM/rFXO0bVLcebpNc0e43IQC/S7FlYEME5tfotbBp3meYCGgNwxa8/QCrPlpskLI5t5zAs1RgGvqL7ls=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=mikelley@microsoft.com; 
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogV2VpIEh1IDx3ZWhAbWljcm9zb2Z0LmNvbT4gU2VudDogRnJpZGF5LCBOb3ZlbWJlciAy
MiwgMjAxOSAxMjoyNCBBTQo+IAo+IE9uIEh5cGVyLVYsIEdlbmVyYXRpb24gMSBWTXMgY2FuIGRp
cmVjdGx5IHVzZSBWTSdzIHBoeXNpY2FsIG1lbW9yeSBmb3IKPiB0aGVpciBmcmFtZWJ1ZmZlcnMu
IFRoaXMgY2FuIGltcHJvdmUgdGhlIGVmZmljaWVuY3kgb2YgZnJhbWVidWZmZXIgYW5kCj4gb3Zl
cmFsbCBwZXJmb3JtZW5jZSBmb3IgVk0uIFRoZSBwaHlzaWNhbCBtZW1vcnkgYXNzaWduZWQgdG8g
ZnJhbWVidWZmZXIKPiBtdXN0IGJlIGNvbnRpZ3VvdXMuIFdlIHVzZSBDTUEgYWxsb2NhdG9yIHRv
IGdldCBjb250aWd1b3VzZSBwaHlzaWNpYWwKPiBtZW1vcnkgd2hlbiB0aGUgZnJhbWVidWZmZXIg
c2l6ZSBpcyBncmVhdGVyIHRoYW4gNE1CLiBGb3Igc2l6ZSB1bmRlcgo+IDRNQiwgd2UgdXNlIGFs
bG9jX3BhZ2VzIHRvIGFjaGlldmUgdGhpcy4KPiAKPiBUbyBlbmFibGUgZnJhbWVidWZmZXIgbWVt
b3J5IGFsbG9jYXRpb24gZnJvbSBDTUEsIHN1cHBseSBhIGtlcm5lbAo+IHBhcmFtZXRlciB0byBn
aXZlIGVub3VnaCBzcGFjZSB0byBDTUEgYWxsb2NhdG9yIGF0IGJvb3QgdGltZS4gRm9yCj4gZXhh
bXBsZToKPiAgICAgY21hPTEzMG0KPiBUaGlzIGdpdmVzIDEzME1CIG1lbW9yeSB0byBDQU0gYWxs
b2NhdG9yIHRoYXQgY2FuIGJlIGFsbG9jYXRlZCB0bwo+IGZyYW1lYnVmZmVyLiBJZiB0aGlzIGZh
aWxzLCB3ZSBmYWxsIGJhY2sgdG8gdGhlIG9sZCB3YXkgb2YgdXNpbmcKPiBtbWlvIGZvciBmcmFt
ZWJ1ZmZlci4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBXZWkgSHUgPHdlaEBtaWNyb3NvZnQuY29tPgo+
IC0tLQo+ICAgICB2MjogSW5jb3Jwb3JhdGVkIHJldmlldyBjb21tZW50cyBmb3JtIGhjaEBsc3Qu
ZGUsIE1pY2hhZWwgS2VsbGV5IGFuZAo+ICAgICBEZXh1YW4gQ3VpCj4gICAgIC0gVXNlIGRtYV9h
bGxvY19jb2hlcmVudCB0byBhbGxvY2F0ZSBsYXJnZSBjb250aWd1b3VzIG1lbW9yeQo+ICAgICAt
IFVzZSBwaHlzX2FkZHJfdCBmb3IgcGh5c2ljYWwgYWRkcmVzc2VzCj4gICAgIC0gQ29ycmVjdGVk
IGEgZmV3IHNwZWxsaW5nIGVycm9ycyBhbmQgbWlub3IgY2xlYW51cHMKPiAgICAgLSBBbHNvIHRl
c3RlZCBvbiAzMiBiaXQgVWJ1bnR1IGd1ZXN0Cj4gCj4gIGRyaXZlcnMvdmlkZW8vZmJkZXYvS2Nv
bmZpZyAgICAgfCAgIDEgKwo+ICBkcml2ZXJzL3ZpZGVvL2ZiZGV2L2h5cGVydl9mYi5jIHwgMTk2
ICsrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tCj4gIDIgZmlsZXMgY2hhbmdlZCwgMTU4
IGluc2VydGlvbnMoKyksIDM5IGRlbGV0aW9ucygtKQo+IAoKW3NuaXBdCgo+ICsvKgo+ICsgKiBB
bGxvY2F0ZSBlbm91Z2ggY29udGlndW91cyBwaHlzaWNhbCBtZW1vcnkuCj4gKyAqIFJldHVybiBw
aHlzaWNhbCBhZGRyZXNzIGlmIHN1Y2NlZWRlZCBvciAtMSBpZiBmYWlsZWQuCj4gKyAqLwo+ICtz
dGF0aWMgcGh5c19hZGRyX3QgaHZmYl9nZXRfcGh5bWVtKHN0cnVjdCBodl9kZXZpY2UgKmhkZXYs
Cj4gKwkJCQkgICB1bnNpZ25lZCBpbnQgcmVxdWVzdF9zaXplKQo+ICt7Cj4gKwlzdHJ1Y3QgcGFn
ZSAqcGFnZSA9IE5VTEw7Cj4gKwlkbWFfYWRkcl90IGRtYV9oYW5kbGU7Cj4gKwl2b2lkICp2bWVt
Owo+ICsJdW5zaWduZWQgaW50IHJlcXVlc3RfcGFnZXM7Cj4gKwlwaHlzX2FkZHJfdCBwYWRkciA9
IDA7Cj4gKwl1bnNpZ25lZCBpbnQgb3JkZXIgPSBnZXRfb3JkZXIocmVxdWVzdF9zaXplKTsKPiAr
Cj4gKwlpZiAocmVxdWVzdF9zaXplID09IDApCj4gKwkJcmV0dXJuIC0xOwo+ICsKPiArCS8qIFRy
eSB0byBjYWxsIGFsbG9jX3BhZ2VzIGlmIHRoZSBzaXplIGlzIGxlc3MgdGhhbiAyXk1BWF9PUkRF
UiAqLwo+ICsJaWYgKG9yZGVyIDwgTUFYX09SREVSKSB7Cj4gKwkJcGFnZSA9IGFsbG9jX3BhZ2Vz
KEdGUF9LRVJORUwgfCBfX0dGUF9aRVJPLCBvcmRlcik7Cj4gKwkJaWYgKCFwYWdlKQo+ICsJCQly
ZXR1cm4gLTE7Cj4gKwo+ICsJCXBhZGRyID0gKHBhZ2VfdG9fcGZuKHBhZ2UpIDw8IFBBR0VfU0hJ
RlQpOwo+ICsJCXJlcXVlc3RfcGFnZXMgPSAoMSA8PCBvcmRlcik7Cj4gKwkJZ290byBnZXRfcGh5
bWVtMTsKPiArCX0KCkNvdWxkIHlvdSB1c2UgYW4gJ2Vsc2UnIGNsYXVzZSBoZXJlIGFuZCBlbGlt
aW5hdGUgdGhlIGFib3ZlCidnb3RvJyBzdGF0ZW1lbnQ/ICBJIGtub3cgdGhhdCBtYWtlcyB0aGUg
YmVsb3cgY29kZSBiZSBpbmRlbnRlZApvbmUgbGV2ZWwgZGVlcGVyLCBidXQgdGhhdCBkb2Vzbid0
IHNlZW0gcGFydGljdWxhcmx5IHByb2JsZW1hdGljCmhlcmUuICBUaGUgcmVhc29uIHdlIGhhdmUg
J2Vsc2UnIGNsYXVzZXMgaXMgdG8gYXZvaWQgJ2dvdG8ncyBhbmQKbGFiZWxzLiAgOi0pCgo+ICsK
PiArCS8qIEFsbG9jYXRlIGZyb20gQ01BICovCj4gKwlpZiAoaGRldiA9PSBOVUxMKQo+ICsJCXJl
dHVybiAtMTsKClRoZSBhYm92ZSB0ZXN0IHNlZW1zIHVubmVjZXNzYXJ5LiAgQSBsb3Qgb2YgdGhp
bmdzIHdvdWxkIGhhdmUKYnJva2VuIGJlZm9yZSBnZXR0aW5nIHRvIHRoaXMgZnVuY3Rpb24gaWYg
aGRldiB3YXMgTlVMTC4KCj4gKwo+ICsJaGRldi0+ZGV2aWNlLmNvaGVyZW50X2RtYV9tYXNrID0g
RE1BX0JJVF9NQVNLKDY0KTsKPiArCj4gKwlyZXF1ZXN0X3BhZ2VzID0gKHJvdW5kX3VwKHJlcXVl
c3Rfc2l6ZSwgUEFHRV9TSVpFKSA+PiBQQUdFX1NISUZUKTsKPiArCj4gKwl2bWVtID0gZG1hX2Fs
bG9jX2NvaGVyZW50KCZoZGV2LT5kZXZpY2UsCj4gKwkJCQkgcmVxdWVzdF9wYWdlcyAqIFBBR0Vf
U0laRSwKPiArCQkJCSAmZG1hX2hhbmRsZSwKPiArCQkJCSBHRlBfS0VSTkVMIHwgX19HRlBfTk9X
QVJOKTsKPiArCj4gKwlpZiAoIXZtZW0pCj4gKwkJcmV0dXJuIC0xOwo+ICsKPiArCXBhZGRyID0g
dmlydF90b19waHlzKHZtZW0pOwo+ICsKPiArZ2V0X3BoeW1lbTE6Cj4gKwlwcl9pbmZvKCJBbGxv
Y2F0ZWQgJWQgcGFnZXMgc3RhcnRzIGF0IHBoeXNpY2FsIGFkZHIgMHglbGx4XG4iLAo+ICsJCXJl
cXVlc3RfcGFnZXMsIHBhZGRyKTsKCkkgd29uZGVyIGlmIHdlIHdhbnQgdG8gc2hvdyB0aGUgcGh5
c2ljYWwgYWRkcmVzcyBoZXJlLiAgVGhlIExpbnV4IGtlcm5lbApkZWZpbml0ZWx5IGRvZXMgbm90
IHNob3cga2VybmVsIHZpcnR1YWwgYWRkcmVzc2VzIGR1ZSB0byBzZWN1cml0eQpjb25jZXJucywg
YW5kIEknbSB3b25kZXJpbmcgaWYgdGhlIHNhbWUgYXBwbGllcyB0byBwaHlzaWNhbCBhZGRyZXNz
ZXMuCldoYXQncyB0aGUgYmVuZWZpdCB0byBzaG93aW5nIHRoZSBwaHlzaWNhbCBhZGRyZXNzPwoK
QW5kIGluIHRoZSBtZXNzYWdlICJzdGFydHMiIHNob3VsZCBiZSAic3RhcnRpbmciLgoKPiArCj4g
KwlyZXR1cm4gcGFkZHI7Cj4gK30KPiArCj4gKy8qIFJlbGVhc2UgY29udGlndW91cyBwaHlzaWNh
bCBtZW1vcnkgKi8KPiArc3RhdGljIHZvaWQgaHZmYl9yZWxlYXNlX3BoeW1lbShzdHJ1Y3QgaHZf
ZGV2aWNlICpoZGV2LAo+ICsJCQkJcGh5c19hZGRyX3QgcGFkZHIsIHVuc2lnbmVkIGludCBzaXpl
KQo+ICt7Cj4gKwl1bnNpZ25lZCBpbnQgb3JkZXIgPSBnZXRfb3JkZXIoc2l6ZSk7Cj4gKwo+ICsJ
aWYgKG9yZGVyIDwgTUFYX09SREVSKQo+ICsJCV9fZnJlZV9wYWdlcyhwZm5fdG9fcGFnZShwYWRk
ciA+PiBQQUdFX1NISUZUKSwgb3JkZXIpOwo+ICsJZWxzZQo+ICsJCWRtYV9mcmVlX2NvaGVyZW50
KCZoZGV2LT5kZXZpY2UsCj4gKwkJCQkgIHJvdW5kX3VwKHNpemUsIFBBR0VfU0laRSksCj4gKwkJ
CQkgIHBoeXNfdG9fdmlydChwYWRkciksCj4gKwkJCQkgIHBhZGRyKTsKPiArfQo+ICsKPiAKPiAg
LyogR2V0IGZyYW1lYnVmZmVyIG1lbW9yeSBmcm9tIEh5cGVyLVYgdmlkZW8gcGNpIHNwYWNlICov
Cj4gIHN0YXRpYyBpbnQgaHZmYl9nZXRtZW0oc3RydWN0IGh2X2RldmljZSAqaGRldiwgc3RydWN0
IGZiX2luZm8gKmluZm8pCj4gQEAgLTk0Nyw4ICsxMDI4LDU3IEBAIHN0YXRpYyBpbnQgaHZmYl9n
ZXRtZW0oc3RydWN0IGh2X2RldmljZSAqaGRldiwgc3RydWN0IGZiX2luZm8KPiAqaW5mbykKPiAg
CXZvaWQgX19pb21lbSAqZmJfdmlydDsKPiAgCWludCBnZW4ydm0gPSBlZmlfZW5hYmxlZChFRklf
Qk9PVCk7Cj4gIAlyZXNvdXJjZV9zaXplX3QgcG90X3N0YXJ0LCBwb3RfZW5kOwo+ICsJcGh5c19h
ZGRyX3QgcGFkZHI7Cj4gIAlpbnQgcmV0Owo+IAo+ICsJaWYgKCFnZW4ydm0pIHsKPiArCQlwZGV2
ID0gcGNpX2dldF9kZXZpY2UoUENJX1ZFTkRPUl9JRF9NSUNST1NPRlQsCj4gKwkJCVBDSV9ERVZJ
Q0VfSURfSFlQRVJWX1ZJREVPLCBOVUxMKTsKPiArCQlpZiAoIXBkZXYpIHsKPiArCQkJcHJfZXJy
KCJVbmFibGUgdG8gZmluZCBQQ0kgSHlwZXItViB2aWRlb1xuIik7Cj4gKwkJCXJldHVybiAtRU5P
REVWOwo+ICsJCX0KPiArCX0KPiArCj4gKwlpbmZvLT5hcGVydHVyZXMgPSBhbGxvY19hcGVydHVy
ZXMoMSk7Cj4gKwlpZiAoIWluZm8tPmFwZXJ0dXJlcykKPiArCQlnb3RvIGVycjE7CgpUaGVyZSdz
IGEgc21hbGwgbWVtb3J5IGxlYWsgaGVyZS4gIFRoZSBhcGVydHVyZXMgYXJlIG5ldmVyIGZyZWVk
IGluIGFueQpvZiB0aGUgZXJyb3IgY2FzZXMgaW4gdGhpcyBmdW5jdGlvbiwgb3IgaW4gaHZmYl9w
dXRtZW0oKS4gIFRoaXMgaXMgbm90IGEgYnVnIHlvdQppbnRyb2R1Y2VkIC0tIHRoZSBvcmlnaW5h
bCBjb2RlIGhhZCB0aGUgc2FtZSBsZWFrLgoKPiArCj4gKwlpZiAoZ2VuMnZtKSB7Cj4gKwkJaW5m
by0+YXBlcnR1cmVzLT5yYW5nZXNbMF0uYmFzZSA9IHNjcmVlbl9pbmZvLmxmYl9iYXNlOwo+ICsJ
CWluZm8tPmFwZXJ0dXJlcy0+cmFuZ2VzWzBdLnNpemUgPSBzY3JlZW5faW5mby5sZmJfc2l6ZTsK
PiArCX0gZWxzZSB7Cj4gKwkJaW5mby0+YXBlcnR1cmVzLT5yYW5nZXNbMF0uYmFzZSA9IHBjaV9y
ZXNvdXJjZV9zdGFydChwZGV2LCAwKTsKPiArCQlpbmZvLT5hcGVydHVyZXMtPnJhbmdlc1swXS5z
aXplID0gcGNpX3Jlc291cmNlX2xlbihwZGV2LCAwKTsKPiArCX0KPiArCj4gKwkvKgo+ICsJICog
Rm9yIEdlbiAxIFZNLCB3ZSBjYW4gZGlyZWN0bHkgdXNlIHRoZSBjb250aWd1b3VzIG1lbW9yeQo+
ICsJICogZnJvbSBWTS4gSWYgd2Ugc3VjY2VlZCwgZGVmZXJyZWQgSU8gaGFwcGVucyBkaXJlY3Rs
eQo+ICsJICogb24gdGhpcyBhbGxvY2F0ZWQgZnJhbWVidWZmZXIgbWVtb3J5LCBhdm9pZGluZyBl
eHRyYQo+ICsJICogbWVtb3J5IGNvcHkuCj4gKwkgKi8KPiArCWlmICghZ2VuMnZtKSB7Cj4gKwkJ
cGFkZHIgPSBodmZiX2dldF9waHltZW0oaGRldiwgc2NyZWVuX2ZiX3NpemUpOwo+ICsJCWlmIChw
YWRkciAhPSAocGh5c19hZGRyX3QpIC0xKSB7Cj4gKwkJCXBhci0+bW1pb19wcCA9IHBhZGRyOwo+
ICsJCQlwYXItPm1taW9fdnAgPSBwYXItPmRpb192cCA9IF9fdmEocGFkZHIpOwo+ICsKPiArCQkJ
aW5mby0+Zml4LnNtZW1fc3RhcnQgPSBwYWRkcjsKPiArCQkJaW5mby0+Zml4LnNtZW1fbGVuID0g
c2NyZWVuX2ZiX3NpemU7Cj4gKwkJCWluZm8tPnNjcmVlbl9iYXNlID0gcGFyLT5tbWlvX3ZwOwo+
ICsJCQlpbmZvLT5zY3JlZW5fc2l6ZSA9IHNjcmVlbl9mYl9zaXplOwo+ICsKPiArCQkJcGFyLT5u
ZWVkX2RvY29weSA9IGZhbHNlOwo+ICsJCQlnb3RvIGdldG1lbTE7CgpNYXliZSBjaGFuZ2UgdGhl
ICdnZXRtZW0xJyBsYWJlbCB0byAnZG9uZScgb3Igc29tZXRoaW5nIHNpbWlsYXJseQppbmRpY2F0
aXZlIGhhdmluZyBzdWNjZXNzZnVsbHkgY29tcGxldGVkIGV2ZXJ5dGhpbmcgdGhhdCBuZWVkcyB0
byBiZQpkb25lPwoKPiArCQl9Cj4gKwkJcHJfaW5mbygiVW5hYmxlIHRvIGFsbG9jYXRlIGVub3Vn
aCBjb250aWd1b3VzIHBoeXNpY2FsIG1lbW9yeSBvbiBHZW4gMQo+IFZNLiBVc2UgTU1JTyBpbnN0
ZWFkLlxuIik7CgpJJ2Qgc3VnZ2VzdCBjaGFuZ2luZyB0aGUgbWVzc2FnZSB0byBzYXkgIlVzaW5n
IE1NSU8gaW5zdGVhZCIuICBUaGlzIGlzIGp1c3QgYW4KaW5mb3JtYXRpdmUgbWVzc2FnZSBpbmRp
Y2F0aW5nIHdoYXQgdGhlIGRyaXZlciBpcyBkb2luZy4gICJVc2UgTU1JTyBpbnN0ZWFkIgpzb3Vu
ZHMgbGlrZSBhIGRpcmVjdGl2ZSB0byB0aGUgdXNlciB0byBkbyBzb21ldGhpbmcgZGlmZmVyZW50
LCBsaWtlIGNoYW5nZSBoaXMKa2VybmVsIGNvbmZpZ3VyYXRpb24sIGFuZCB0aGF0J3Mgbm90IHRo
ZSBpbnRlbnQuCgo+ICsJfQoKSW4gdGhlIGFib3ZlIGNvZGUsIHRoZXJlIGFyZSB0aHJlZSwgYWxt
b3N0IGNvbnNlY3V0aXZlLCB0ZXN0cyBvZiB0aGUgImdlbjJ2bSIKdmFyaWFibGUuICBJdCBzZWVt
cyBsaWtlIHRoZSBhcGVydHVyZXMgY291bGQgYmUgYWxsb2NhdGVkIGZpcnN0LCBhbmQgdGhlbiB0
aGUgdGhyZWUKdGVzdHMgY29tYmluZWQgaW50byBvbmUgdGVzdC4gIFRoZW4geW91IGhhdmUgb25l
IHJhbmdlIG9mIGNvZGUgZm9yIEdlbiAxIGFuZAphbm90aGVyIHJhbmdlIGZvciBHZW4gMiBhbmQg
ZmV3ZXIgbGluZXMgJ2lmJyBzdGF0ZW1lbnRzLCAnZWxzZScgc3RhdGVtZW50cywgYW5kCmN1cmx5
IGJyYWNlcy4KCj4gKwo+ICsJLyoKPiArCSAqIENhbm5vdCB1c2UgdGhlIGNvbnRpZ3VvdXMgcGh5
c2ljYWwgbWVtb3J5Lgo+ICsJICogQWxsb2NhdGUgbW1pbyBzcGFjZSBmb3IgZnJhbWVidWZmZXIu
Cj4gKwkgKi8KPiAgCWRpb19mYl9zaXplID0KPiAgCQlzY3JlZW5fd2lkdGggKiBzY3JlZW5faGVp
Z2h0ICogc2NyZWVuX2RlcHRoIC8gODsKPiAKPiBAQCAtOTU2LDEzICsxMDg2LDYgQEAgc3RhdGlj
IGludCBodmZiX2dldG1lbShzdHJ1Y3QgaHZfZGV2aWNlICpoZGV2LCBzdHJ1Y3QgZmJfaW5mbwo+
ICppbmZvKQo+ICAJCXBvdF9zdGFydCA9IDA7Cj4gIAkJcG90X2VuZCA9IC0xOwo+ICAJfSBlbHNl
IHsKPiAtCQlwZGV2ID0gcGNpX2dldF9kZXZpY2UoUENJX1ZFTkRPUl9JRF9NSUNST1NPRlQsCj4g
LQkJCSAgICAgIFBDSV9ERVZJQ0VfSURfSFlQRVJWX1ZJREVPLCBOVUxMKTsKPiAtCQlpZiAoIXBk
ZXYpIHsKPiAtCQkJcHJfZXJyKCJVbmFibGUgdG8gZmluZCBQQ0kgSHlwZXItViB2aWRlb1xuIik7
Cj4gLQkJCXJldHVybiAtRU5PREVWOwo+IC0JCX0KPiAtCj4gIAkJaWYgKCEocGNpX3Jlc291cmNl
X2ZsYWdzKHBkZXYsIDApICYgSU9SRVNPVVJDRV9NRU0pIHx8Cj4gIAkJICAgIHBjaV9yZXNvdXJj
ZV9sZW4ocGRldiwgMCkgPCBzY3JlZW5fZmJfc2l6ZSkgewo+ICAJCQlwcl9lcnIoIlJlc291cmNl
IG5vdCBhdmFpbGFibGUgb3IgKDB4JWx4IDwgMHglbHgpXG4iLAo+IEBAIC05OTEsMjAgKzExMTQs
NiBAQCBzdGF0aWMgaW50IGh2ZmJfZ2V0bWVtKHN0cnVjdCBodl9kZXZpY2UgKmhkZXYsIHN0cnVj
dCBmYl9pbmZvCj4gKmluZm8pCj4gIAlpZiAocGFyLT5kaW9fdnAgPT0gTlVMTCkKPiAgCQlnb3Rv
IGVycjM7Cj4gCj4gLQlpbmZvLT5hcGVydHVyZXMgPSBhbGxvY19hcGVydHVyZXMoMSk7Cj4gLQlp
ZiAoIWluZm8tPmFwZXJ0dXJlcykKPiAtCQlnb3RvIGVycjQ7Cj4gLQo+IC0JaWYgKGdlbjJ2bSkg
ewo+IC0JCWluZm8tPmFwZXJ0dXJlcy0+cmFuZ2VzWzBdLmJhc2UgPSBzY3JlZW5faW5mby5sZmJf
YmFzZTsKPiAtCQlpbmZvLT5hcGVydHVyZXMtPnJhbmdlc1swXS5zaXplID0gc2NyZWVuX2luZm8u
bGZiX3NpemU7Cj4gLQkJcmVtb3ZlX2NvbmZsaWN0aW5nX2ZyYW1lYnVmZmVycyhpbmZvLT5hcGVy
dHVyZXMsCj4gLQkJCQkJCUtCVUlMRF9NT0ROQU1FLCBmYWxzZSk7Cj4gLQl9IGVsc2Ugewo+IC0J
CWluZm8tPmFwZXJ0dXJlcy0+cmFuZ2VzWzBdLmJhc2UgPSBwY2lfcmVzb3VyY2Vfc3RhcnQocGRl
diwgMCk7Cj4gLQkJaW5mby0+YXBlcnR1cmVzLT5yYW5nZXNbMF0uc2l6ZSA9IHBjaV9yZXNvdXJj
ZV9sZW4ocGRldiwgMCk7Cj4gLQl9Cj4gLQo+ICAJLyogUGh5c2ljYWwgYWRkcmVzcyBvZiBGQiBk
ZXZpY2UgKi8KPiAgCXBhci0+bW1pb19wcCA9IHBhci0+bWVtLT5zdGFydDsKPiAgCS8qIFZpcnR1
YWwgYWRkcmVzcyBvZiBGQiBkZXZpY2UgKi8KPiBAQCAtMTAxNSwxMyArMTEyNCwxNSBAQCBzdGF0
aWMgaW50IGh2ZmJfZ2V0bWVtKHN0cnVjdCBodl9kZXZpY2UgKmhkZXYsIHN0cnVjdCBmYl9pbmZv
Cj4gKmluZm8pCj4gIAlpbmZvLT5zY3JlZW5fYmFzZSA9IHBhci0+ZGlvX3ZwOwo+ICAJaW5mby0+
c2NyZWVuX3NpemUgPSBkaW9fZmJfc2l6ZTsKPiAKPiArZ2V0bWVtMToKPiArCXJlbW92ZV9jb25m
bGljdGluZ19mcmFtZWJ1ZmZlcnMoaW5mby0+YXBlcnR1cmVzLAo+ICsJCQkJCUtCVUlMRF9NT0RO
QU1FLCBmYWxzZSk7CgpXaXRoIHlvdXIgY2hhbmdlLCByZW1vdmVfY29uZmxpY3RpbmdfZnJhbWVi
dWZmZXJzKCkgaXMgY2FsbGVkIGZvciBib3RoCkdlbiAxIGFuZCBHZW4gMiBWTXMuICBJbiB0aGUg
b2xkIGNvZGUsIGl0IHdhcyBjYWxsZWQgb25seSBmb3IgR2VuIDIgVk1zLgpJcyB0aGlzIGNoYW5n
ZSBpbnRlbnRpb25hbD8gIElmIHNvLCB3aHk/ICBJIGhhdmVuJ3QgZGVsdmVkIGludG8gdGhlIGRl
dGFpbHMKb2Ygd2hhdCByZW1vdmVfY29uZmxpY3RpbmdfZnJhbWVidWZmZXJzKCkgZG9lcywgc28g
bXkgcXVlc3Rpb24gaXMgCm1vcmUgb2YgYSBkb3VibGUtY2hlY2sgcmF0aGVyIHRoYW4gbXkgZGVm
aW5pdGVseSB0aGlua2luZyBzb21ldGhpbmcKaXMgd3JvbmcuCgo+ICsKPiAgCWlmICghZ2VuMnZt
KQo+ICAJCXBjaV9kZXZfcHV0KHBkZXYpOwo+IAo+ICAJcmV0dXJuIDA7Cj4gCj4gLWVycjQ6Cj4g
LQl2ZnJlZShwYXItPmRpb192cCk7Cj4gIGVycjM6Cj4gIAlpb3VubWFwKGZiX3ZpcnQpOwo+ICBl
cnIyOgo+IEBAIC0xMDM1LDEzICsxMTQ2LDE5IEBAIHN0YXRpYyBpbnQgaHZmYl9nZXRtZW0oc3Ry
dWN0IGh2X2RldmljZSAqaGRldiwgc3RydWN0IGZiX2luZm8KPiAqaW5mbykKPiAgfQo+IAo+ICAv
KiBSZWxlYXNlIHRoZSBmcmFtZWJ1ZmZlciAqLwo+IC1zdGF0aWMgdm9pZCBodmZiX3B1dG1lbShz
dHJ1Y3QgZmJfaW5mbyAqaW5mbykKPiArc3RhdGljIHZvaWQgaHZmYl9wdXRtZW0oc3RydWN0IGh2
X2RldmljZSAqaGRldiwgc3RydWN0IGZiX2luZm8gKmluZm8pCj4gIHsKPiAgCXN0cnVjdCBodmZi
X3BhciAqcGFyID0gaW5mby0+cGFyOwo+IAo+IC0JdmZyZWUocGFyLT5kaW9fdnApOwo+IC0JaW91
bm1hcChpbmZvLT5zY3JlZW5fYmFzZSk7Cj4gLQl2bWJ1c19mcmVlX21taW8ocGFyLT5tZW0tPnN0
YXJ0LCBzY3JlZW5fZmJfc2l6ZSk7Cj4gKwlpZiAocGFyLT5uZWVkX2RvY29weSkgewo+ICsJCXZm
cmVlKHBhci0+ZGlvX3ZwKTsKPiArCQlpb3VubWFwKGluZm8tPnNjcmVlbl9iYXNlKTsKPiArCQl2
bWJ1c19mcmVlX21taW8ocGFyLT5tZW0tPnN0YXJ0LCBzY3JlZW5fZmJfc2l6ZSk7Cj4gKwl9IGVs
c2Ugewo+ICsJCWh2ZmJfcmVsZWFzZV9waHltZW0oaGRldiwgaW5mby0+Zml4LnNtZW1fc3RhcnQs
Cj4gKwkJCQkgICAgc2NyZWVuX2ZiX3NpemUpOwo+ICsJfQo+ICsKPiAgCXBhci0+bWVtID0gTlVM
TDsKClRoZXJlJ3MgYSBzbWFsbCBtZW1vcnkgbGVhayBpbiB0aGUgYWJvdmUgc3RhdGVtZW50LiAg
VGhlIGRhdGEKc3RydWN0dXJlIHBvaW50ZWQgdG8gYnkgIm1lbSIgaXMgbm90IGZyZWVkLiAgIFRo
ZSBzYW1lIHByb2JsZW0Kb2NjdXJzIGluIGh2ZmJfZ2V0bWVtKCkgaW4gdGhlICJlcnIyIiBwYXRo
LiAgIFRoaXMgYnVnIGV4aXN0ZWQgaW4KdGhlIG9sZCBjb2RlIGFzIHdlbGwsIHNvIGl0IHdhcyBu
b3QgaW50cm9kdWNlZCBieSB5b3VyIGNoYW5nZXMuCgpNaWNoYWVsCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJp
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
