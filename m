Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 683029BE16
	for <lists+dri-devel@lfdr.de>; Sat, 24 Aug 2019 15:59:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 305B36E0C8;
	Sat, 24 Aug 2019 13:59:02 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3C44E6E0C8;
 Sat, 24 Aug 2019 13:59:01 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from haswell.alporthouse.com (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP id 18250946-1500050 
 for multiple; Sat, 24 Aug 2019 14:58:50 +0100
From: Chris Wilson <chris@chris-wilson.co.uk>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH] dma-buf: Give dma-fence-array distinct lockclasses
Date: Sat, 24 Aug 2019 14:58:48 +0100
Message-Id: <20190824135848.8571-1-chris@chris-wilson.co.uk>
X-Mailer: git-send-email 2.23.0
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW4gb3JkZXIgdG8gYWxsb3cgZG1hLWZlbmNlLWFycmF5IGFzIGEgZ2VuZXJpYyBjb250YWluZXIg
Zm9yIGZlbmNlcywgd2UKbmVlZCB0byBhbGxvdyBmb3IgaXQgdG8gY29udGFpbiBvdGhlciBkbWEt
ZmVuY2UtYXJyYXlzLiBCeSBnaXZpbmcgZWFjaApkbWEtZmVuY2UtYXJyYXkgY29uc3RydWN0aW9u
IHRoZWlyIG93biBsb2NrY2xhc3MsIHdlIGFsbG93IGRpZmZlcmVudAp0eXBlcyBvZiBkbWEtZmVu
Y2UtYXJyYXkgdG8gbmVzdCwgYnV0IHN0aWxsIGRvIG5vdCBhbGxvdyBvbiBjbGFzcyBvZgpkbWEt
ZmVuY2UtYXJyYXkgdG8gY29udGFpbiBpdHNlbGYgKGV2ZW4gdGhvdWdoIHRoZXkgaGF2ZSBkaXN0
aW5jdApsb2NrcykuCgpJbiBwcmFjdGljZSwgdGhpcyBtZWFucyB0aGF0IGVhY2ggc3Vic3lzdGVt
IGdldHMgaXRzIG93biBkbWEtZmVuY2UtYXJyYXkKY2xhc3MgYW5kIHdlIGNhbiBmcmVlbHkgdXNl
IGRtYS1mZW5jZS1hcnJheXMgYXMgY29udGFpbmVycyB3aXRoaW4gdGhlCmRtYWJ1ZiBjb3JlIHdp
dGhvdXQgYW5nZXJpbmcgbG9ja2RlcC4KClNpZ25lZC1vZmYtYnk6IENocmlzIFdpbHNvbiA8Y2hy
aXNAY2hyaXMtd2lsc29uLmNvLnVrPgpDYzogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtv
ZW5pZ0BhbWQuY29tPgpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xsLmNoPgotLS0KIGRy
aXZlcnMvZG1hLWJ1Zi9kbWEtZmVuY2UtYXJyYXkuYyB8IDEzICsrKysrKysrLS0tLS0KIGluY2x1
ZGUvbGludXgvZG1hLWZlbmNlLWFycmF5LmggICB8IDE2ICsrKysrKysrKysrKy0tLS0KIDIgZmls
ZXMgY2hhbmdlZCwgMjAgaW5zZXJ0aW9ucygrKSwgOSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2RtYS1idWYvZG1hLWZlbmNlLWFycmF5LmMgYi9kcml2ZXJzL2RtYS1idWYvZG1h
LWZlbmNlLWFycmF5LmMKaW5kZXggZDNmYmQ5NTBiZTk0Li5kOWJjZGJiNjZkNDYgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtZmVuY2UtYXJyYXkuYworKysgYi9kcml2ZXJzL2RtYS1i
dWYvZG1hLWZlbmNlLWFycmF5LmMKQEAgLTE0NywxMCArMTQ3LDExIEBAIEVYUE9SVF9TWU1CT0wo
ZG1hX2ZlbmNlX2FycmF5X29wcyk7CiAgKiBJZiBAc2lnbmFsX29uX2FueSBpcyB0cnVlIHRoZSBm
ZW5jZSBhcnJheSBzaWduYWxzIGlmIGFueSBmZW5jZSBpbiB0aGUgYXJyYXkKICAqIHNpZ25hbHMs
IG90aGVyd2lzZSBpdCBzaWduYWxzIHdoZW4gYWxsIGZlbmNlcyBpbiB0aGUgYXJyYXkgc2lnbmFs
LgogICovCi1zdHJ1Y3QgZG1hX2ZlbmNlX2FycmF5ICpkbWFfZmVuY2VfYXJyYXlfY3JlYXRlKGlu
dCBudW1fZmVuY2VzLAotCQkJCQkgICAgICAgc3RydWN0IGRtYV9mZW5jZSAqKmZlbmNlcywKLQkJ
CQkJICAgICAgIHU2NCBjb250ZXh0LCB1bnNpZ25lZCBzZXFubywKLQkJCQkJICAgICAgIGJvb2wg
c2lnbmFsX29uX2FueSkKK3N0cnVjdCBkbWFfZmVuY2VfYXJyYXkgKl9fZG1hX2ZlbmNlX2FycmF5
X2NyZWF0ZShpbnQgbnVtX2ZlbmNlcywKKwkJCQkJCSBzdHJ1Y3QgZG1hX2ZlbmNlICoqZmVuY2Vz
LAorCQkJCQkJIHU2NCBjb250ZXh0LCB1bnNpZ25lZCBzZXFubywKKwkJCQkJCSBib29sIHNpZ25h
bF9vbl9hbnksCisJCQkJCQkgc3RydWN0IGxvY2tfY2xhc3Nfa2V5ICprZXkpCiB7CiAJc3RydWN0
IGRtYV9mZW5jZV9hcnJheSAqYXJyYXk7CiAJc2l6ZV90IHNpemUgPSBzaXplb2YoKmFycmF5KTsK
QEAgLTE2Miw2ICsxNjMsOCBAQCBzdHJ1Y3QgZG1hX2ZlbmNlX2FycmF5ICpkbWFfZmVuY2VfYXJy
YXlfY3JlYXRlKGludCBudW1fZmVuY2VzLAogCQlyZXR1cm4gTlVMTDsKIAogCXNwaW5fbG9ja19p
bml0KCZhcnJheS0+bG9jayk7CisJbG9ja2RlcF9zZXRfY2xhc3MoJmFycmF5LT5sb2NrLCBrZXkp
OworCiAJZG1hX2ZlbmNlX2luaXQoJmFycmF5LT5iYXNlLCAmZG1hX2ZlbmNlX2FycmF5X29wcywg
JmFycmF5LT5sb2NrLAogCQkgICAgICAgY29udGV4dCwgc2Vxbm8pOwogCWluaXRfaXJxX3dvcmso
JmFycmF5LT53b3JrLCBpcnFfZG1hX2ZlbmNlX2FycmF5X3dvcmspOwpAQCAtMTc0LDcgKzE3Nyw3
IEBAIHN0cnVjdCBkbWFfZmVuY2VfYXJyYXkgKmRtYV9mZW5jZV9hcnJheV9jcmVhdGUoaW50IG51
bV9mZW5jZXMsCiAKIAlyZXR1cm4gYXJyYXk7CiB9Ci1FWFBPUlRfU1lNQk9MKGRtYV9mZW5jZV9h
cnJheV9jcmVhdGUpOworRVhQT1JUX1NZTUJPTChfX2RtYV9mZW5jZV9hcnJheV9jcmVhdGUpOwog
CiAvKioKICAqIGRtYV9mZW5jZV9tYXRjaF9jb250ZXh0IC0gQ2hlY2sgaWYgYWxsIGZlbmNlcyBh
cmUgZnJvbSB0aGUgZ2l2ZW4gY29udGV4dApkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9kbWEt
ZmVuY2UtYXJyYXkuaCBiL2luY2x1ZGUvbGludXgvZG1hLWZlbmNlLWFycmF5LmgKaW5kZXggMzAz
ZGQ3MTIyMjBmLi4xMzk1Zjk0MjhjZGIgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvZG1hLWZl
bmNlLWFycmF5LmgKKysrIGIvaW5jbHVkZS9saW51eC9kbWEtZmVuY2UtYXJyYXkuaApAQCAtNzQs
MTAgKzc0LDE4IEBAIHRvX2RtYV9mZW5jZV9hcnJheShzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkK
IAlyZXR1cm4gY29udGFpbmVyX29mKGZlbmNlLCBzdHJ1Y3QgZG1hX2ZlbmNlX2FycmF5LCBiYXNl
KTsKIH0KIAotc3RydWN0IGRtYV9mZW5jZV9hcnJheSAqZG1hX2ZlbmNlX2FycmF5X2NyZWF0ZShp
bnQgbnVtX2ZlbmNlcywKLQkJCQkJICAgICAgIHN0cnVjdCBkbWFfZmVuY2UgKipmZW5jZXMsCi0J
CQkJCSAgICAgICB1NjQgY29udGV4dCwgdW5zaWduZWQgc2Vxbm8sCi0JCQkJCSAgICAgICBib29s
IHNpZ25hbF9vbl9hbnkpOworI2RlZmluZSBkbWFfZmVuY2VfYXJyYXlfY3JlYXRlKG51bSwgZmVu
Y2VzLCBjb250ZXh0LCBzZXFubywgYW55KSAoeyBcCisJc3RhdGljIHN0cnVjdCBsb2NrX2NsYXNz
X2tleSBfX2tleTsJCQlcCisJCQkJCQkJCVwKKwlfX2RtYV9mZW5jZV9hcnJheV9jcmVhdGUoKG51
bSksIChmZW5jZXMpLCAoY29udGV4dCksIChzZXFubyksIChhbnkpLCBcCisJCSAgICAgICAgCSAm
X19rZXkpOwkJCVwKK30pCisKK3N0cnVjdCBkbWFfZmVuY2VfYXJyYXkgKl9fZG1hX2ZlbmNlX2Fy
cmF5X2NyZWF0ZShpbnQgbnVtX2ZlbmNlcywKKwkJCQkJCSBzdHJ1Y3QgZG1hX2ZlbmNlICoqZmVu
Y2VzLAorCQkJCQkJIHU2NCBjb250ZXh0LCB1bnNpZ25lZCBzZXFubywKKwkJCQkJCSBib29sIHNp
Z25hbF9vbl9hbnksCisJCQkJCQkgc3RydWN0IGxvY2tfY2xhc3Nfa2V5ICprZXkpOwogCiBib29s
IGRtYV9mZW5jZV9tYXRjaF9jb250ZXh0KHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLCB1NjQgY29u
dGV4dCk7CiAKLS0gCjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
ZHJpLWRldmVs
