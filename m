Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 82DDBB26CC
	for <lists+dri-devel@lfdr.de>; Fri, 13 Sep 2019 22:45:57 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EE7ED6F45E;
	Fri, 13 Sep 2019 20:45:54 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x443.google.com (mail-wr1-x443.google.com
 [IPv6:2a00:1450:4864:20::443])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A92D36F458;
 Fri, 13 Sep 2019 20:45:52 +0000 (UTC)
Received: by mail-wr1-x443.google.com with SMTP id u16so33346707wrr.0;
 Fri, 13 Sep 2019 13:45:52 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=3hF7VxXOV7BHD6k5BOkPEiNxXK73RAvKPQzHlzE3Mgc=;
 b=txnQUk/G1uCAXGxWY7tFawm13azkOJHv2iBdN4DfcXQq3NJgP6PdLx3qGDfVL04HFJ
 D7fjzPXXA7Jf8BZevOeBSQKeqp76qru3qs1kvrSe4reffitOAthGh9u30HGXREIboIeZ
 rTR0V/47aIB/PoGYEpIU97qFnLL7X0tz2fUBcArhPTPSrADQfuHfis0T1fgGAD95MTxG
 Dos4Wu/qhqzZv/EHI1xDZzZ4G46uCewz68tbxmw7uqfkwk1IIrTkXnfIH+Ul6sIB6bbY
 KVkisHyaSxAsa2dkFvp0BaBRqU3qbmhf4e26EUrOrsPqS67pq1kFaIOM6AwnsAe8AkEF
 dAvg==
X-Gm-Message-State: APjAAAUbLx+IepFF42AuQZ8iO8JWch2nj+iCuAF+8Ibiycr9ejhtu+kc
 c9yQoCfHg8dd+CIld1KQHyBXzQSl/scaqqdt3Xk=
X-Google-Smtp-Source: APXvYqyS2oiUi4hWTtXC1OMgMkSQa4s4mIMBsJX0rlejW2rUxgFxmerXPlyXTDHcj79XGn2x6AAkIXgg+trBnoyGSw0=
X-Received: by 2002:adf:dfc5:: with SMTP id q5mr43072171wrn.142.1568407550926; 
 Fri, 13 Sep 2019 13:45:50 -0700 (PDT)
MIME-Version: 1.0
References: <20190903204645.25487-1-lyude@redhat.com>
 <20190903204645.25487-24-lyude@redhat.com>
In-Reply-To: <20190903204645.25487-24-lyude@redhat.com>
From: Alex Deucher <alexdeucher@gmail.com>
Date: Fri, 13 Sep 2019 16:45:37 -0400
Message-ID: <CADnq5_NvhO751ihc64KmkxR_dOWNn5XJ4bJc95CMUEkGkw1Y2Q@mail.gmail.com>
Subject: Re: [PATCH v2 23/27] drm/amdgpu: Iterate through DRM connectors
 correctly
To: Lyude Paul <lyude@redhat.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=3hF7VxXOV7BHD6k5BOkPEiNxXK73RAvKPQzHlzE3Mgc=;
 b=EXhj79R6pThJzFcs2ROo8JNydmCzNjEoMwzSwZkq7uYc5v4AXba7ALoaOOq9wIV5Jw
 ZoYD8U7WbFLLspOQ5EsqNvj75N+wDciPm4LnfHn3JxOdX1DR7v2zhgDqDBgOmdQEhGGJ
 K4t+psGf9bZh+Jx6UVmnoq/wiDuSyAQIWOCSOgvV37CMwqZiaBps1VFN+kKzvBsV30Wk
 GSXg36MeIXO8Di4uhArKqQ4B5aGPWsPnl0NqPfJHqMlSmQc68IK0cgGeklJbYikTGoTr
 cTPg5DRfRyu4YvsEfbf2PcekhCXlXWNbg2msDmot9vdKi5T4mhkOxD9QlhQDOcgXbrSW
 6HUg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Neil Armstrong <narmstrong@baylibre.com>, David Airlie <airlied@linux.ie>,
 nouveau <nouveau@lists.freedesktop.org>, Tao Zhou <tao.zhou1@amd.com>,
 Maling list - DRI developers <dri-devel@lists.freedesktop.org>,
 Huang Rui <ray.huang@amd.com>, Andrzej Pietrasiewicz <andrzej.p@collabora.com>,
 Sam Ravnborg <sam@ravnborg.org>,
 Markus Elfring <elfring@users.sourceforge.net>, Yu Zhao <yuzhao@google.com>,
 Harry Wentland <hwentlan@amd.com>, David Francis <David.Francis@amd.com>,
 amd-gfx list <amd-gfx@lists.freedesktop.org>, Leo Li <sunpeng.li@amd.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>, Thierry Reding <treding@nvidia.com>,
 Juston Li <juston.li@intel.com>, Jani Nikula <jani.nikula@intel.com>,
 Emily Deng <Emily.Deng@amd.com>, Russell King <rmk+kernel@armlinux.org.uk>,
 Evan Quan <evan.quan@amd.com>, Bhawanpreet Lakha <Bhawanpreet.Lakha@amd.com>,
 Felix Kuehling <Felix.Kuehling@amd.com>, xinhui pan <xinhui.pan@amd.com>,
 =?UTF-8?Q?Michel_D=C3=A4nzer?= <michel.daenzer@amd.com>,
 LKML <linux-kernel@vger.kernel.org>, Shirish S <shirish.s@amd.com>,
 Alex Deucher <alexander.deucher@amd.com>,
 Colin Ian King <colin.king@canonical.com>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>,
 Rex Zhu <Rex.Zhu@amd.com>, Nicholas Kazlauskas <nicholas.kazlauskas@amd.com>,
 Hawking Zhang <Hawking.Zhang@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBTZXAgMywgMjAxOSBhdCA0OjQ5IFBNIEx5dWRlIFBhdWwgPGx5dWRlQHJlZGhhdC5j
b20+IHdyb3RlOgo+Cj4gQ3VycmVudGx5LCBldmVyeSBzaW5nbGUgcGllY2Ugb2YgY29kZSBpbiBh
bWRncHUgdGhhdCBsb29wcyB0aHJvdWdoCj4gY29ubmVjdG9ycyBkb2VzIGl0IGluY29ycmVjdGx5
IGFuZCBkb2Vzbid0IHVzZSB0aGUgcHJvcGVyIGxpc3QgaXRlcmF0aW9uCj4gaGVscGVycywgZHJt
X2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4oKSBhbmQKPiBkcm1fY29ubmVjdG9yX2xpc3RfaXRl
cl9lbmQoKS4gWWVlc2guCj4KPiBTbywgZG8gdGhhdC4KCkluIGZhaXJuZXNzLCBJIHRoaW5rIHRo
ZSBvcmlnaW4gb2YgdGhpcyBjb2RlIHByZWRhdGVkIHRoZSBpdGVyYXRvcnMuClJldmlld2VkLWJ5
OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Cgo+Cj4gQ2M6IEp1c3Rv
biBMaSA8anVzdG9uLmxpQGludGVsLmNvbT4KPiBDYzogSW1yZSBEZWFrIDxpbXJlLmRlYWtAaW50
ZWwuY29tPgo+IENjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwu
Y29tPgo+IENjOiBIYXJyeSBXZW50bGFuZCA8aHdlbnRsYW5AYW1kLmNvbT4KPiBDYzogRGFuaWVs
IFZldHRlciA8ZGFuaWVsLnZldHRlckBmZndsbC5jaD4KPiBTaWduZWQtb2ZmLWJ5OiBMeXVkZSBQ
YXVsIDxseXVkZUByZWRoYXQuY29tPgo+IC0tLQo+ICAuLi4vZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9jb25uZWN0b3JzLmMgICAgfCAxMyArKysrKy0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2RldmljZS5jICAgIHwgMjAgKysrKysrKy0tLQo+ICBkcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfZGlzcGxheS5jICAgfCAgNSArKy0KPiAgZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2VuY29kZXJzLmMgIHwgNDAgKysrKysrKysrKysrKy0tLS0t
LQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfaXJxLmMgICAgICAgfCAgNSAr
Ky0KPiAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3YxMF8wLmMgICAgICAgIHwgMzQg
KysrKysrKysrKysrLS0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kY2VfdjExXzAu
YyAgICAgICAgfCAzNCArKysrKysrKysrKystLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2RjZV92Nl8wLmMgICAgICAgICB8IDQwICsrKysrKysrKysrKysrLS0tLS0KPiAgZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3Y4XzAuYyAgICAgICAgIHwgMzQgKysrKysrKysrKysr
LS0tLQo+ICAuLi4vZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtLmMgfCAz
MyArKysrKysrKy0tLS0tLS0KPiAgLi4uL2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1
X2RtX2lycS5jIHwgMTAgKysrKy0KPiAgMTEgZmlsZXMgY2hhbmdlZCwgMTk1IGluc2VydGlvbnMo
KyksIDczIGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9jb25uZWN0b3JzLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfY29ubmVjdG9ycy5jCj4gaW5kZXggZWNlNTVjOGZhNjczLi5iZDMxYmI1OTVjMDQgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Nvbm5lY3RvcnMu
Ywo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jb25uZWN0b3JzLmMK
PiBAQCAtMTAyMiw4ICsxMDIyLDEyIEBAIGFtZGdwdV9jb25uZWN0b3JfZHZpX2RldGVjdChzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLCBib29sIGZvcmNlKQo+ICAgICAgICAgICAgICAg
ICAgICAgICAgICAqLwo+ICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbWRncHVfY29ubmVj
dG9yLT5zaGFyZWRfZGRjICYmIChyZXQgPT0gY29ubmVjdG9yX3N0YXR1c19jb25uZWN0ZWQpKSB7
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAq
bGlzdF9jb25uZWN0b3I7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qg
ZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXIgaXRlcjsKPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cnVjdCBhbWRncHVfY29ubmVjdG9yICpsaXN0X2FtZGdwdV9jb25uZWN0b3I7Cj4g
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5KGxpc3Rf
Y29ubmVjdG9yLCAmZGV2LT5tb2RlX2NvbmZpZy5jb25uZWN0b3JfbGlzdCwgaGVhZCkgewo+ICsK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVy
X2JlZ2luKGRldiwgJml0ZXIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJt
X2Zvcl9lYWNoX2Nvbm5lY3Rvcl9pdGVyKGxpc3RfY29ubmVjdG9yLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZpdGVyKSB7Cj4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0b3IgPT0g
bGlzdF9jb25uZWN0b3IpCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgY29udGludWU7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGxpc3RfYW1kZ3B1X2Nvbm5lY3RvciA9IHRvX2FtZGdwdV9jb25uZWN0b3IobGlzdF9jb25u
ZWN0b3IpOwo+IEBAIC0xMDQwLDYgKzEwNDQsNyBAQCBhbWRncHVfY29ubmVjdG9yX2R2aV9kZXRl
Y3Qoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwgYm9vbCBmb3JjZSkKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Cj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIH0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRybV9jb25uZWN0b3Jf
bGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgfQo+ICAgICAg
ICAgICAgICAgICB9Cj4gICAgICAgICB9Cj4gQEAgLTE1MDEsNiArMTUwNiw3IEBAIGFtZGdwdV9j
b25uZWN0b3JfYWRkKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LAo+ICB7Cj4gICAgICAgICBz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gYWRldi0+ZGRldjsKPiAgICAgICAgIHN0cnVjdCBkcm1f
Y29ubmVjdG9yICpjb25uZWN0b3I7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9saXN0
X2l0ZXIgaXRlcjsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfY29ubmVjdG9yICphbWRncHVfY29u
bmVjdG9yOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9jb25uZWN0b3JfYXRvbV9kaWcgKmFtZGdw
dV9kaWdfY29ubmVjdG9yOwo+ICAgICAgICAgc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyOwo+
IEBAIC0xNTE1LDEwICsxNTIxLDEyIEBAIGFtZGdwdV9jb25uZWN0b3JfYWRkKHN0cnVjdCBhbWRn
cHVfZGV2aWNlICphZGV2LAo+ICAgICAgICAgICAgICAgICByZXR1cm47Cj4KPiAgICAgICAgIC8q
IHNlZSBpZiB3ZSBhbHJlYWR5IGFkZGVkIGl0ICovCj4gLSAgICAgICBsaXN0X2Zvcl9lYWNoX2Vu
dHJ5KGNvbm5lY3RvciwgJmRldi0+bW9kZV9jb25maWcuY29ubmVjdG9yX2xpc3QsIGhlYWQpIHsK
PiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKGRldiwgJml0ZXIpOwo+ICsg
ICAgICAgZHJtX2Zvcl9lYWNoX2Nvbm5lY3Rvcl9pdGVyKGNvbm5lY3RvciwgJml0ZXIpIHsKPiAg
ICAgICAgICAgICAgICAgYW1kZ3B1X2Nvbm5lY3RvciA9IHRvX2FtZGdwdV9jb25uZWN0b3IoY29u
bmVjdG9yKTsKPiAgICAgICAgICAgICAgICAgaWYgKGFtZGdwdV9jb25uZWN0b3ItPmNvbm5lY3Rv
cl9pZCA9PSBjb25uZWN0b3JfaWQpIHsKPiAgICAgICAgICAgICAgICAgICAgICAgICBhbWRncHVf
Y29ubmVjdG9yLT5kZXZpY2VzIHw9IHN1cHBvcnRlZF9kZXZpY2U7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZpdGVyKTsKPiAgICAgICAgICAg
ICAgICAgICAgICAgICByZXR1cm47Cj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgICAgICAg
ICAgaWYgKGFtZGdwdV9jb25uZWN0b3ItPmRkY19idXMgJiYgaTJjX2J1cy0+dmFsaWQpIHsKPiBA
QCAtMTUzMyw2ICsxNTQxLDcgQEAgYW1kZ3B1X2Nvbm5lY3Rvcl9hZGQoc3RydWN0IGFtZGdwdV9k
ZXZpY2UgKmFkZXYsCj4gICAgICAgICAgICAgICAgICAgICAgICAgfQo+ICAgICAgICAgICAgICAg
ICB9Cj4gICAgICAgICB9Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9lbmQoJml0
ZXIpOwo+Cj4gICAgICAgICAvKiBjaGVjayBpZiBpdCdzIGEgZHAgYnJpZGdlICovCj4gICAgICAg
ICBsaXN0X2Zvcl9lYWNoX2VudHJ5KGVuY29kZXIsICZkZXYtPm1vZGVfY29uZmlnLmVuY29kZXJf
bGlzdCwgaGVhZCkgewo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfZGV2aWNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNl
LmMKPiBpbmRleCAyZjg4NDY5OWVhZWYuLmFjZDM5Y2U5YjA4ZSAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMKPiArKysgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGV2aWNlLmMKPiBAQCAtMzAwNCw2ICszMDA0LDcgQEAg
aW50IGFtZGdwdV9kZXZpY2Vfc3VzcGVuZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBib29sIHN1
c3BlbmQsIGJvb2wgZmJjb24pCj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldjsK
PiAgICAgICAgIHN0cnVjdCBkcm1fY3J0YyAqY3J0YzsKPiAgICAgICAgIHN0cnVjdCBkcm1fY29u
bmVjdG9yICpjb25uZWN0b3I7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0
ZXIgaXRlcjsKPiAgICAgICAgIGludCByOwo+Cj4gICAgICAgICBpZiAoZGV2ID09IE5VTEwgfHwg
ZGV2LT5kZXZfcHJpdmF0ZSA9PSBOVUxMKSB7Cj4gQEAgLTMwMjYsOSArMzAyNywxMSBAQCBpbnQg
YW1kZ3B1X2RldmljZV9zdXNwZW5kKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIGJvb2wgc3VzcGVu
ZCwgYm9vbCBmYmNvbikKPiAgICAgICAgIGlmICghYW1kZ3B1X2RldmljZV9oYXNfZGNfc3VwcG9y
dChhZGV2KSkgewo+ICAgICAgICAgICAgICAgICAvKiB0dXJuIG9mZiBkaXNwbGF5IGh3ICovCj4g
ICAgICAgICAgICAgICAgIGRybV9tb2Rlc2V0X2xvY2tfYWxsKGRldik7Cj4gLSAgICAgICAgICAg
ICAgIGxpc3RfZm9yX2VhY2hfZW50cnkoY29ubmVjdG9yLCAmZGV2LT5tb2RlX2NvbmZpZy5jb25u
ZWN0b3JfbGlzdCwgaGVhZCkgewo+IC0gICAgICAgICAgICAgICAgICAgICAgIGRybV9oZWxwZXJf
Y29ubmVjdG9yX2RwbXMoY29ubmVjdG9yLCBEUk1fTU9ERV9EUE1TX09GRik7Cj4gLSAgICAgICAg
ICAgICAgIH0KPiArICAgICAgICAgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4o
ZGV2LCAmaXRlcik7Cj4gKyAgICAgICAgICAgICAgIGRybV9mb3JfZWFjaF9jb25uZWN0b3JfaXRl
cihjb25uZWN0b3IsICZpdGVyKQo+ICsgICAgICAgICAgICAgICAgICAgICAgIGRybV9oZWxwZXJf
Y29ubmVjdG9yX2RwbXMoY29ubmVjdG9yLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgRFJNX01PREVfRFBNU19PRkYpOwo+ICsgICAgICAgICAgICAg
ICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9lbmQoJml0ZXIpOwo+ICAgICAgICAgICAgICAgICBk
cm1fbW9kZXNldF91bmxvY2tfYWxsKGRldik7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgLyog
dW5waW4gdGhlIGZyb250IGJ1ZmZlcnMgYW5kIGN1cnNvcnMgKi8KPiAgICAgICAgICAgICAgICAg
bGlzdF9mb3JfZWFjaF9lbnRyeShjcnRjLCAmZGV2LT5tb2RlX2NvbmZpZy5jcnRjX2xpc3QsIGhl
YWQpIHsKPiBAQCAtMzEwNyw2ICszMTEwLDcgQEAgaW50IGFtZGdwdV9kZXZpY2Vfc3VzcGVuZChz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBib29sIHN1c3BlbmQsIGJvb2wgZmJjb24pCj4gIGludCBh
bWRncHVfZGV2aWNlX3Jlc3VtZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBib29sIHJlc3VtZSwg
Ym9vbCBmYmNvbikKPiAgewo+ICAgICAgICAgc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3Rv
cjsKPiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRlciBpdGVyOwo+ICAgICAg
ICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBkZXYtPmRldl9wcml2YXRlOwo+ICAgICAg
ICAgc3RydWN0IGRybV9jcnRjICpjcnRjOwo+ICAgICAgICAgaW50IHIgPSAwOwo+IEBAIC0zMTc3
LDkgKzMxODEsMTMgQEAgaW50IGFtZGdwdV9kZXZpY2VfcmVzdW1lKHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYsIGJvb2wgcmVzdW1lLCBib29sIGZiY29uKQo+Cj4gICAgICAgICAgICAgICAgICAgICAg
ICAgLyogdHVybiBvbiBkaXNwbGF5IGh3ICovCj4gICAgICAgICAgICAgICAgICAgICAgICAgZHJt
X21vZGVzZXRfbG9ja19hbGwoZGV2KTsKPiAtICAgICAgICAgICAgICAgICAgICAgICBsaXN0X2Zv
cl9lYWNoX2VudHJ5KGNvbm5lY3RvciwgJmRldi0+bW9kZV9jb25maWcuY29ubmVjdG9yX2xpc3Qs
IGhlYWQpIHsKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRybV9oZWxwZXJfY29u
bmVjdG9yX2RwbXMoY29ubmVjdG9yLCBEUk1fTU9ERV9EUE1TX09OKTsKPiAtICAgICAgICAgICAg
ICAgICAgICAgICB9Cj4gKwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGRybV9jb25uZWN0b3Jf
bGlzdF9pdGVyX2JlZ2luKGRldiwgJml0ZXIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGRy
bV9mb3JfZWFjaF9jb25uZWN0b3JfaXRlcihjb25uZWN0b3IsICZpdGVyKQo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZHJtX2hlbHBlcl9jb25uZWN0b3JfZHBtcyhjb25uZWN0b3Is
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIERSTV9NT0RFX0RQTVNfT04pOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGRybV9jb25u
ZWN0b3JfbGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4gKwo+ICAgICAgICAgICAgICAgICAgICAgICAg
IGRybV9tb2Rlc2V0X3VubG9ja19hbGwoZGV2KTsKPiAgICAgICAgICAgICAgICAgfQo+ICAgICAg
ICAgICAgICAgICBhbWRncHVfZmJkZXZfc2V0X3N1c3BlbmQoYWRldiwgMCk7Cj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kaXNwbGF5LmMgYi9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGlzcGxheS5jCj4gaW5kZXggMWQ0YWFhOTU4MGY0
Li5kMmRkNTlhOTVlOGEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2Rpc3BsYXkuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9kaXNwbGF5LmMKPiBAQCAtMzcwLDExICszNzAsMTMgQEAgdm9pZCBhbWRncHVfZGlzcGxheV9w
cmludF9kaXNwbGF5X3NldHVwKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCj4gICAgICAgICBzdHJ1
Y3QgYW1kZ3B1X2Nvbm5lY3RvciAqYW1kZ3B1X2Nvbm5lY3RvcjsKPiAgICAgICAgIHN0cnVjdCBk
cm1fZW5jb2RlciAqZW5jb2RlcjsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfZW5jb2RlciAqYW1k
Z3B1X2VuY29kZXI7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXIgaXRl
cjsKPiAgICAgICAgIHVpbnQzMl90IGRldmljZXM7Cj4gICAgICAgICBpbnQgaSA9IDA7Cj4KPiAr
ICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKGRldiwgJml0ZXIpOwo+ICAgICAg
ICAgRFJNX0lORk8oIkFNREdQVSBEaXNwbGF5IENvbm5lY3RvcnNcbiIpOwo+IC0gICAgICAgbGlz
dF9mb3JfZWFjaF9lbnRyeShjb25uZWN0b3IsICZkZXYtPm1vZGVfY29uZmlnLmNvbm5lY3Rvcl9s
aXN0LCBoZWFkKSB7Cj4gKyAgICAgICBkcm1fZm9yX2VhY2hfY29ubmVjdG9yX2l0ZXIoY29ubmVj
dG9yLCAmaXRlcikgewo+ICAgICAgICAgICAgICAgICBhbWRncHVfY29ubmVjdG9yID0gdG9fYW1k
Z3B1X2Nvbm5lY3Rvcihjb25uZWN0b3IpOwo+ICAgICAgICAgICAgICAgICBEUk1fSU5GTygiQ29u
bmVjdG9yICVkOlxuIiwgaSk7Cj4gICAgICAgICAgICAgICAgIERSTV9JTkZPKCIgICVzXG4iLCBj
b25uZWN0b3ItPm5hbWUpOwo+IEBAIC00MzgsNiArNDQwLDcgQEAgdm9pZCBhbWRncHVfZGlzcGxh
eV9wcmludF9kaXNwbGF5X3NldHVwKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCj4gICAgICAgICAg
ICAgICAgIH0KPiAgICAgICAgICAgICAgICAgaSsrOwo+ICAgICAgICAgfQo+ICsgICAgICAgZHJt
X2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZpdGVyKTsKPiAgfQo+Cj4gIC8qKgo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZW5jb2RlcnMuYyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9lbmNvZGVycy5jCj4gaW5kZXggNTcxYTZkZmI0
NzNlLi42MWZjZjI0N2E2MzggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X2VuY29kZXJzLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfZW5jb2RlcnMuYwo+IEBAIC0zNywxMiArMzcsMTQgQEAgYW1kZ3B1X2xpbmtfZW5jb2Rl
cl9jb25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldikKPiAgewo+ICAgICAgICAgc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBkZXYtPmRldl9wcml2YXRlOwo+ICAgICAgICAgc3RydWN0
IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9y
X2xpc3RfaXRlciBpdGVyOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9jb25uZWN0b3IgKmFtZGdw
dV9jb25uZWN0b3I7Cj4gICAgICAgICBzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXI7Cj4gICAg
ICAgICBzdHJ1Y3QgYW1kZ3B1X2VuY29kZXIgKmFtZGdwdV9lbmNvZGVyOwo+Cj4gKyAgICAgICBk
cm1fY29ubmVjdG9yX2xpc3RfaXRlcl9iZWdpbihkZXYsICZpdGVyKTsKPiAgICAgICAgIC8qIHdh
bGsgdGhlIGxpc3QgYW5kIGxpbmsgZW5jb2RlcnMgdG8gY29ubmVjdG9ycyAqLwo+IC0gICAgICAg
bGlzdF9mb3JfZWFjaF9lbnRyeShjb25uZWN0b3IsICZkZXYtPm1vZGVfY29uZmlnLmNvbm5lY3Rv
cl9saXN0LCBoZWFkKSB7Cj4gKyAgICAgICBkcm1fZm9yX2VhY2hfY29ubmVjdG9yX2l0ZXIoY29u
bmVjdG9yLCAmaXRlcikgewo+ICAgICAgICAgICAgICAgICBhbWRncHVfY29ubmVjdG9yID0gdG9f
YW1kZ3B1X2Nvbm5lY3Rvcihjb25uZWN0b3IpOwo+ICAgICAgICAgICAgICAgICBsaXN0X2Zvcl9l
YWNoX2VudHJ5KGVuY29kZXIsICZkZXYtPm1vZGVfY29uZmlnLmVuY29kZXJfbGlzdCwgaGVhZCkg
ewo+ICAgICAgICAgICAgICAgICAgICAgICAgIGFtZGdwdV9lbmNvZGVyID0gdG9fYW1kZ3B1X2Vu
Y29kZXIoZW5jb2Rlcik7Cj4gQEAgLTU1LDYgKzU3LDcgQEAgYW1kZ3B1X2xpbmtfZW5jb2Rlcl9j
b25uZWN0b3Ioc3RydWN0IGRybV9kZXZpY2UgKmRldikKPiAgICAgICAgICAgICAgICAgICAgICAg
ICB9Cj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPiArICAgICAgIGRybV9jb25uZWN0
b3JfbGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4gIH0KPgo+ICB2b2lkIGFtZGdwdV9lbmNvZGVyX3Nl
dF9hY3RpdmVfZGV2aWNlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKPiBAQCAtNjIsOCAr
NjUsMTAgQEAgdm9pZCBhbWRncHVfZW5jb2Rlcl9zZXRfYWN0aXZlX2RldmljZShzdHJ1Y3QgZHJt
X2VuY29kZXIgKmVuY29kZXIpCj4gICAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gZW5j
b2Rlci0+ZGV2Owo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9lbmNvZGVyICphbWRncHVfZW5jb2Rl
ciA9IHRvX2FtZGdwdV9lbmNvZGVyKGVuY29kZXIpOwo+ICAgICAgICAgc3RydWN0IGRybV9jb25u
ZWN0b3IgKmNvbm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRl
ciBpdGVyOwo+Cj4gLSAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5KGNvbm5lY3RvciwgJmRldi0+
bW9kZV9jb25maWcuY29ubmVjdG9yX2xpc3QsIGhlYWQpIHsKPiArICAgICAgIGRybV9jb25uZWN0
b3JfbGlzdF9pdGVyX2JlZ2luKGRldiwgJml0ZXIpOwo+ICsgICAgICAgZHJtX2Zvcl9lYWNoX2Nv
bm5lY3Rvcl9pdGVyKGNvbm5lY3RvciwgJml0ZXIpIHsKPiAgICAgICAgICAgICAgICAgaWYgKGNv
bm5lY3Rvci0+ZW5jb2RlciA9PSBlbmNvZGVyKSB7Cj4gICAgICAgICAgICAgICAgICAgICAgICAg
c3RydWN0IGFtZGdwdV9jb25uZWN0b3IgKmFtZGdwdV9jb25uZWN0b3IgPSB0b19hbWRncHVfY29u
bmVjdG9yKGNvbm5lY3Rvcik7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgYW1kZ3B1X2VuY29k
ZXItPmFjdGl2ZV9kZXZpY2UgPSBhbWRncHVfZW5jb2Rlci0+ZGV2aWNlcyAmIGFtZGdwdV9jb25u
ZWN0b3ItPmRldmljZXM7Cj4gQEAgLTcyLDYgKzc3LDcgQEAgdm9pZCBhbWRncHVfZW5jb2Rlcl9z
ZXRfYWN0aXZlX2RldmljZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCj4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGFtZGdwdV9jb25uZWN0b3ItPmRldmljZXMsIGVuY29k
ZXItPmVuY29kZXJfdHlwZSk7Cj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPiArICAg
ICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4gIH0KPgo+ICBzdHJ1Y3Qg
ZHJtX2Nvbm5lY3RvciAqCj4gQEAgLTc5LDE1ICs4NSwyMCBAQCBhbWRncHVfZ2V0X2Nvbm5lY3Rv
cl9mb3JfZW5jb2RlcihzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCj4gIHsKPiAgICAgICAg
IHN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBlbmNvZGVyLT5kZXY7Cj4gICAgICAgICBzdHJ1Y3Qg
YW1kZ3B1X2VuY29kZXIgKmFtZGdwdV9lbmNvZGVyID0gdG9fYW1kZ3B1X2VuY29kZXIoZW5jb2Rl
cik7Cj4gLSAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOwo+ICsgICAgICAg
c3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwgKmZvdW5kID0gTlVMTDsKPiArICAgICAg
IHN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRlciBpdGVyOwo+ICAgICAgICAgc3RydWN0IGFt
ZGdwdV9jb25uZWN0b3IgKmFtZGdwdV9jb25uZWN0b3I7Cj4KPiAtICAgICAgIGxpc3RfZm9yX2Vh
Y2hfZW50cnkoY29ubmVjdG9yLCAmZGV2LT5tb2RlX2NvbmZpZy5jb25uZWN0b3JfbGlzdCwgaGVh
ZCkgewo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4oZGV2LCAmaXRlcik7
Cj4gKyAgICAgICBkcm1fZm9yX2VhY2hfY29ubmVjdG9yX2l0ZXIoY29ubmVjdG9yLCAmaXRlcikg
ewo+ICAgICAgICAgICAgICAgICBhbWRncHVfY29ubmVjdG9yID0gdG9fYW1kZ3B1X2Nvbm5lY3Rv
cihjb25uZWN0b3IpOwo+IC0gICAgICAgICAgICAgICBpZiAoYW1kZ3B1X2VuY29kZXItPmFjdGl2
ZV9kZXZpY2UgJiBhbWRncHVfY29ubmVjdG9yLT5kZXZpY2VzKQo+IC0gICAgICAgICAgICAgICAg
ICAgICAgIHJldHVybiBjb25uZWN0b3I7Cj4gKyAgICAgICAgICAgICAgIGlmIChhbWRncHVfZW5j
b2Rlci0+YWN0aXZlX2RldmljZSAmIGFtZGdwdV9jb25uZWN0b3ItPmRldmljZXMpIHsKPiArICAg
ICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGNvbm5lY3RvcjsKPiArICAgICAgICAgICAgICAg
ICAgICAgICBicmVhazsKPiArICAgICAgICAgICAgICAgfQo+ICAgICAgICAgfQo+IC0gICAgICAg
cmV0dXJuIE5VTEw7Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9lbmQoJml0ZXIp
Owo+ICsgICAgICAgcmV0dXJuIGZvdW5kOwo+ICB9Cj4KPiAgc3RydWN0IGRybV9jb25uZWN0b3Ig
Kgo+IEBAIC05NSwxNSArMTA2LDIwIEBAIGFtZGdwdV9nZXRfY29ubmVjdG9yX2Zvcl9lbmNvZGVy
X2luaXQoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQo+ICB7Cj4gICAgICAgICBzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2ID0gZW5jb2Rlci0+ZGV2Owo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9l
bmNvZGVyICphbWRncHVfZW5jb2RlciA9IHRvX2FtZGdwdV9lbmNvZGVyKGVuY29kZXIpOwo+IC0g
ICAgICAgc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBk
cm1fY29ubmVjdG9yICpjb25uZWN0b3IsICpmb3VuZCA9IE5VTEw7Cj4gKyAgICAgICBzdHJ1Y3Qg
ZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXIgaXRlcjsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfY29u
bmVjdG9yICphbWRncHVfY29ubmVjdG9yOwo+Cj4gLSAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5
KGNvbm5lY3RvciwgJmRldi0+bW9kZV9jb25maWcuY29ubmVjdG9yX2xpc3QsIGhlYWQpIHsKPiAr
ICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKGRldiwgJml0ZXIpOwo+ICsgICAg
ICAgZHJtX2Zvcl9lYWNoX2Nvbm5lY3Rvcl9pdGVyKGNvbm5lY3RvciwgJml0ZXIpIHsKPiAgICAg
ICAgICAgICAgICAgYW1kZ3B1X2Nvbm5lY3RvciA9IHRvX2FtZGdwdV9jb25uZWN0b3IoY29ubmVj
dG9yKTsKPiAtICAgICAgICAgICAgICAgaWYgKGFtZGdwdV9lbmNvZGVyLT5kZXZpY2VzICYgYW1k
Z3B1X2Nvbm5lY3Rvci0+ZGV2aWNlcykKPiAtICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4g
Y29ubmVjdG9yOwo+ICsgICAgICAgICAgICAgICBpZiAoYW1kZ3B1X2VuY29kZXItPmRldmljZXMg
JiBhbWRncHVfY29ubmVjdG9yLT5kZXZpY2VzKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAg
Zm91bmQgPSBjb25uZWN0b3I7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gKyAg
ICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPiAtICAgICAgIHJldHVybiBOVUxMOwo+ICsgICAg
ICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZpdGVyKTsKPiArICAgICAgIHJldHVybiBm
b3VuZDsKPiAgfQo+Cj4gIHN0cnVjdCBkcm1fZW5jb2RlciAqYW1kZ3B1X2dldF9leHRlcm5hbF9l
bmNvZGVyKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2lycS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2lycS5jCj4gaW5kZXggMmEzZjVlYzI5OGRiLi45NzdlMTIxMjA0ZTYgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2lycS5jCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2lycS5jCj4gQEAgLTg3LDEwICs4
NywxMyBAQCBzdGF0aWMgdm9pZCBhbWRncHVfaG90cGx1Z193b3JrX2Z1bmMoc3RydWN0IHdvcmtf
c3RydWN0ICp3b3JrKQo+ICAgICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGFkZXYtPmRk
ZXY7Cj4gICAgICAgICBzdHJ1Y3QgZHJtX21vZGVfY29uZmlnICptb2RlX2NvbmZpZyA9ICZkZXYt
Pm1vZGVfY29uZmlnOwo+ICAgICAgICAgc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsK
PiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRlciBpdGVyOwo+Cj4gICAgICAg
ICBtdXRleF9sb2NrKCZtb2RlX2NvbmZpZy0+bXV0ZXgpOwo+IC0gICAgICAgbGlzdF9mb3JfZWFj
aF9lbnRyeShjb25uZWN0b3IsICZtb2RlX2NvbmZpZy0+Y29ubmVjdG9yX2xpc3QsIGhlYWQpCj4g
KyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9iZWdpbihkZXYsICZpdGVyKTsKPiArICAg
ICAgIGRybV9mb3JfZWFjaF9jb25uZWN0b3JfaXRlcihjb25uZWN0b3IsICZpdGVyKQo+ICAgICAg
ICAgICAgICAgICBhbWRncHVfY29ubmVjdG9yX2hvdHBsdWcoY29ubmVjdG9yKTsKPiArICAgICAg
IGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4gICAgICAgICBtdXRleF91bmxv
Y2soJm1vZGVfY29uZmlnLT5tdXRleCk7Cj4gICAgICAgICAvKiBKdXN0IGZpcmUgb2ZmIGEgdWV2
ZW50IGFuZCBsZXQgdXNlcnNwYWNlIHRlbGwgdXMgd2hhdCB0byBkbyAqLwo+ICAgICAgICAgZHJt
X2hlbHBlcl9ocGRfaXJxX2V2ZW50KGRldik7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2RjZV92MTBfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNl
X3YxMF8wLmMKPiBpbmRleCA2NDU1NTBlN2NhZjUuLmJlODI4NzFhYzNiZCAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kY2VfdjEwXzAuYwo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2RjZV92MTBfMC5jCj4gQEAgLTMzMCw5ICszMzAsMTEgQEAgc3Rh
dGljIHZvaWQgZGNlX3YxMF8wX2hwZF9pbml0KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+
ICB7Cj4gICAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gYWRldi0+ZGRldjsKPiAgICAg
ICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3I7Cj4gKyAgICAgICBzdHJ1Y3QgZHJt
X2Nvbm5lY3Rvcl9saXN0X2l0ZXIgaXRlcjsKPiAgICAgICAgIHUzMiB0bXA7Cj4KPiAtICAgICAg
IGxpc3RfZm9yX2VhY2hfZW50cnkoY29ubmVjdG9yLCAmZGV2LT5tb2RlX2NvbmZpZy5jb25uZWN0
b3JfbGlzdCwgaGVhZCkgewo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4o
ZGV2LCAmaXRlcik7Cj4gKyAgICAgICBkcm1fZm9yX2VhY2hfY29ubmVjdG9yX2l0ZXIoY29ubmVj
dG9yLCAmaXRlcikgewo+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2Nvbm5lY3RvciAq
YW1kZ3B1X2Nvbm5lY3RvciA9IHRvX2FtZGdwdV9jb25uZWN0b3IoY29ubmVjdG9yKTsKPgo+ICAg
ICAgICAgICAgICAgICBpZiAoYW1kZ3B1X2Nvbm5lY3Rvci0+aHBkLmhwZCA+PSBhZGV2LT5tb2Rl
X2luZm8ubnVtX2hwZCkKPiBAQCAtMzY4LDYgKzM3MCw3IEBAIHN0YXRpYyB2b2lkIGRjZV92MTBf
MF9ocGRfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgICAgICAgICAgICAgICAg
YW1kZ3B1X2lycV9nZXQoYWRldiwgJmFkZXYtPmhwZF9pcnEsCj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGFtZGdwdV9jb25uZWN0b3ItPmhwZC5ocGQpOwo+ICAgICAgICAgfQo+ICsg
ICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZpdGVyKTsKPiAgfQo+Cj4gIC8qKgo+
IEBAIC0zODIsOSArMzg1LDExIEBAIHN0YXRpYyB2b2lkIGRjZV92MTBfMF9ocGRfZmluaShzdHJ1
Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgewo+ICAgICAgICAgc3RydWN0IGRybV9kZXZpY2Ug
KmRldiA9IGFkZXYtPmRkZXY7Cj4gICAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVj
dG9yOwo+ICsgICAgICAgc3RydWN0IGRybV9jb25uZWN0b3JfbGlzdF9pdGVyIGl0ZXI7Cj4gICAg
ICAgICB1MzIgdG1wOwo+Cj4gLSAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5KGNvbm5lY3Rvciwg
JmRldi0+bW9kZV9jb25maWcuY29ubmVjdG9yX2xpc3QsIGhlYWQpIHsKPiArICAgICAgIGRybV9j
b25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKGRldiwgJml0ZXIpOwo+ICsgICAgICAgZHJtX2Zvcl9l
YWNoX2Nvbm5lY3Rvcl9pdGVyKGNvbm5lY3RvciwgJml0ZXIpIHsKPiAgICAgICAgICAgICAgICAg
c3RydWN0IGFtZGdwdV9jb25uZWN0b3IgKmFtZGdwdV9jb25uZWN0b3IgPSB0b19hbWRncHVfY29u
bmVjdG9yKGNvbm5lY3Rvcik7Cj4KPiAgICAgICAgICAgICAgICAgaWYgKGFtZGdwdV9jb25uZWN0
b3ItPmhwZC5ocGQgPj0gYWRldi0+bW9kZV9pbmZvLm51bV9ocGQpCj4gQEAgLTM5Nyw2ICs0MDIs
NyBAQCBzdGF0aWMgdm9pZCBkY2VfdjEwXzBfaHBkX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2Ug
KmFkZXYpCj4gICAgICAgICAgICAgICAgIGFtZGdwdV9pcnFfcHV0KGFkZXYsICZhZGV2LT5ocGRf
aXJxLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbWRncHVfY29ubmVjdG9yLT5o
cGQuaHBkKTsKPiAgICAgICAgIH0KPiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2Vu
ZCgmaXRlcik7Cj4gIH0KPgo+ICBzdGF0aWMgdTMyIGRjZV92MTBfMF9ocGRfZ2V0X2dwaW9fcmVn
KHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+IEBAIC0xMjE5LDEwICsxMjI1LDEyIEBAIHN0
YXRpYyB2b2lkIGRjZV92MTBfMF9hZm10X2F1ZGlvX3NlbGVjdF9waW4oc3RydWN0IGRybV9lbmNv
ZGVyICplbmNvZGVyKQo+ICBzdGF0aWMgdm9pZCBkY2VfdjEwXzBfYXVkaW9fd3JpdGVfbGF0ZW5j
eV9maWVsZHMoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyLAo+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICpt
b2RlKQo+ICB7Cj4gLSAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGVuY29kZXIt
PmRldi0+ZGV2X3ByaXZhdGU7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gZW5j
b2Rlci0+ZGV2Owo+ICsgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBkZXYtPmRl
dl9wcml2YXRlOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9lbmNvZGVyICphbWRncHVfZW5jb2Rl
ciA9IHRvX2FtZGdwdV9lbmNvZGVyKGVuY29kZXIpOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9l
bmNvZGVyX2F0b21fZGlnICpkaWcgPSBhbWRncHVfZW5jb2Rlci0+ZW5jX3ByaXY7Cj4gICAgICAg
ICBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOwo+ICsgICAgICAgc3RydWN0IGRybV9j
b25uZWN0b3JfbGlzdF9pdGVyIGl0ZXI7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2Nvbm5lY3Rv
ciAqYW1kZ3B1X2Nvbm5lY3RvciA9IE5VTEw7Cj4gICAgICAgICB1MzIgdG1wOwo+ICAgICAgICAg
aW50IGludGVybGFjZSA9IDA7Cj4gQEAgLTEyMzAsMTIgKzEyMzgsMTQgQEAgc3RhdGljIHZvaWQg
ZGNlX3YxMF8wX2F1ZGlvX3dyaXRlX2xhdGVuY3lfZmllbGRzKHN0cnVjdCBkcm1fZW5jb2RlciAq
ZW5jb2RlciwKPiAgICAgICAgIGlmICghZGlnIHx8ICFkaWctPmFmbXQgfHwgIWRpZy0+YWZtdC0+
cGluKQo+ICAgICAgICAgICAgICAgICByZXR1cm47Cj4KPiAtICAgICAgIGxpc3RfZm9yX2VhY2hf
ZW50cnkoY29ubmVjdG9yLCAmZW5jb2Rlci0+ZGV2LT5tb2RlX2NvbmZpZy5jb25uZWN0b3JfbGlz
dCwgaGVhZCkgewo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4oZGV2LCAm
aXRlcik7Cj4gKyAgICAgICBkcm1fZm9yX2VhY2hfY29ubmVjdG9yX2l0ZXIoY29ubmVjdG9yLCAm
aXRlcikgewo+ICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdG9yLT5lbmNvZGVyID09IGVuY29k
ZXIpIHsKPiAgICAgICAgICAgICAgICAgICAgICAgICBhbWRncHVfY29ubmVjdG9yID0gdG9fYW1k
Z3B1X2Nvbm5lY3Rvcihjb25uZWN0b3IpOwo+ICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFr
Owo+ICAgICAgICAgICAgICAgICB9Cj4gICAgICAgICB9Cj4gKyAgICAgICBkcm1fY29ubmVjdG9y
X2xpc3RfaXRlcl9lbmQoJml0ZXIpOwo+Cj4gICAgICAgICBpZiAoIWFtZGdwdV9jb25uZWN0b3Ip
IHsKPiAgICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJDb3VsZG4ndCBmaW5kIGVuY29kZXIncyBj
b25uZWN0b3JcbiIpOwo+IEBAIC0xMjYxLDEwICsxMjcxLDEyIEBAIHN0YXRpYyB2b2lkIGRjZV92
MTBfMF9hdWRpb193cml0ZV9sYXRlbmN5X2ZpZWxkcyhzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29k
ZXIsCj4KPiAgc3RhdGljIHZvaWQgZGNlX3YxMF8wX2F1ZGlvX3dyaXRlX3NwZWFrZXJfYWxsb2Nh
dGlvbihzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCj4gIHsKPiAtICAgICAgIHN0cnVjdCBh
bWRncHVfZGV2aWNlICphZGV2ID0gZW5jb2Rlci0+ZGV2LT5kZXZfcHJpdmF0ZTsKPiArICAgICAg
IHN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBlbmNvZGVyLT5kZXY7Cj4gKyAgICAgICBzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiA9IGRldi0+ZGV2X3ByaXZhdGU7Cj4gICAgICAgICBzdHJ1Y3Qg
YW1kZ3B1X2VuY29kZXIgKmFtZGdwdV9lbmNvZGVyID0gdG9fYW1kZ3B1X2VuY29kZXIoZW5jb2Rl
cik7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2VuY29kZXJfYXRvbV9kaWcgKmRpZyA9IGFtZGdw
dV9lbmNvZGVyLT5lbmNfcHJpdjsKPiAgICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25u
ZWN0b3I7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXIgaXRlcjsKPiAg
ICAgICAgIHN0cnVjdCBhbWRncHVfY29ubmVjdG9yICphbWRncHVfY29ubmVjdG9yID0gTlVMTDsK
PiAgICAgICAgIHUzMiB0bXA7Cj4gICAgICAgICB1OCAqc2FkYiA9IE5VTEw7Cj4gQEAgLTEyNzMs
MTIgKzEyODUsMTQgQEAgc3RhdGljIHZvaWQgZGNlX3YxMF8wX2F1ZGlvX3dyaXRlX3NwZWFrZXJf
YWxsb2NhdGlvbihzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIKPiAgICAgICAgIGlmICghZGln
IHx8ICFkaWctPmFmbXQgfHwgIWRpZy0+YWZtdC0+cGluKQo+ICAgICAgICAgICAgICAgICByZXR1
cm47Cj4KPiAtICAgICAgIGxpc3RfZm9yX2VhY2hfZW50cnkoY29ubmVjdG9yLCAmZW5jb2Rlci0+
ZGV2LT5tb2RlX2NvbmZpZy5jb25uZWN0b3JfbGlzdCwgaGVhZCkgewo+ICsgICAgICAgZHJtX2Nv
bm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4oZGV2LCAmaXRlcik7Cj4gKyAgICAgICBkcm1fZm9yX2Vh
Y2hfY29ubmVjdG9yX2l0ZXIoY29ubmVjdG9yLCAmaXRlcikgewo+ICAgICAgICAgICAgICAgICBp
ZiAoY29ubmVjdG9yLT5lbmNvZGVyID09IGVuY29kZXIpIHsKPiAgICAgICAgICAgICAgICAgICAg
ICAgICBhbWRncHVfY29ubmVjdG9yID0gdG9fYW1kZ3B1X2Nvbm5lY3Rvcihjb25uZWN0b3IpOwo+
ICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICAgICAgICAgICAgICAgICB9Cj4gICAg
ICAgICB9Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9lbmQoJml0ZXIpOwo+Cj4g
ICAgICAgICBpZiAoIWFtZGdwdV9jb25uZWN0b3IpIHsKPiAgICAgICAgICAgICAgICAgRFJNX0VS
Uk9SKCJDb3VsZG4ndCBmaW5kIGVuY29kZXIncyBjb25uZWN0b3JcbiIpOwo+IEBAIC0xMzEzLDEw
ICsxMzI3LDEyIEBAIHN0YXRpYyB2b2lkIGRjZV92MTBfMF9hdWRpb193cml0ZV9zcGVha2VyX2Fs
bG9jYXRpb24oc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyCj4KPiAgc3RhdGljIHZvaWQgZGNl
X3YxMF8wX2F1ZGlvX3dyaXRlX3NhZF9yZWdzKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikK
PiAgewo+IC0gICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBlbmNvZGVyLT5kZXYt
PmRldl9wcml2YXRlOwo+ICsgICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGVuY29kZXIt
PmRldjsKPiArICAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gZGV2LT5kZXZfcHJp
dmF0ZTsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfZW5jb2RlciAqYW1kZ3B1X2VuY29kZXIgPSB0
b19hbWRncHVfZW5jb2RlcihlbmNvZGVyKTsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfZW5jb2Rl
cl9hdG9tX2RpZyAqZGlnID0gYW1kZ3B1X2VuY29kZXItPmVuY19wcml2Owo+ICAgICAgICAgc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVj
dG9yX2xpc3RfaXRlciBpdGVyOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9jb25uZWN0b3IgKmFt
ZGdwdV9jb25uZWN0b3IgPSBOVUxMOwo+ICAgICAgICAgc3RydWN0IGNlYV9zYWQgKnNhZHM7Cj4g
ICAgICAgICBpbnQgaSwgc2FkX2NvdW50Owo+IEBAIC0xMzM5LDEyICsxMzU1LDE0IEBAIHN0YXRp
YyB2b2lkIGRjZV92MTBfMF9hdWRpb193cml0ZV9zYWRfcmVncyhzdHJ1Y3QgZHJtX2VuY29kZXIg
KmVuY29kZXIpCj4gICAgICAgICBpZiAoIWRpZyB8fCAhZGlnLT5hZm10IHx8ICFkaWctPmFmbXQt
PnBpbikKPiAgICAgICAgICAgICAgICAgcmV0dXJuOwo+Cj4gLSAgICAgICBsaXN0X2Zvcl9lYWNo
X2VudHJ5KGNvbm5lY3RvciwgJmVuY29kZXItPmRldi0+bW9kZV9jb25maWcuY29ubmVjdG9yX2xp
c3QsIGhlYWQpIHsKPiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKGRldiwg
Jml0ZXIpOwo+ICsgICAgICAgZHJtX2Zvcl9lYWNoX2Nvbm5lY3Rvcl9pdGVyKGNvbm5lY3Rvciwg
Jml0ZXIpIHsKPiAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rvci0+ZW5jb2RlciA9PSBlbmNv
ZGVyKSB7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgYW1kZ3B1X2Nvbm5lY3RvciA9IHRvX2Ft
ZGdwdV9jb25uZWN0b3IoY29ubmVjdG9yKTsKPiAgICAgICAgICAgICAgICAgICAgICAgICBicmVh
azsKPiAgICAgICAgICAgICAgICAgfQo+ICAgICAgICAgfQo+ICsgICAgICAgZHJtX2Nvbm5lY3Rv
cl9saXN0X2l0ZXJfZW5kKCZpdGVyKTsKPgo+ICAgICAgICAgaWYgKCFhbWRncHVfY29ubmVjdG9y
KSB7Cj4gICAgICAgICAgICAgICAgIERSTV9FUlJPUigiQ291bGRuJ3QgZmluZCBlbmNvZGVyJ3Mg
Y29ubmVjdG9yXG4iKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
ZGNlX3YxMV8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kY2VfdjExXzAuYwo+IGlu
ZGV4IGQ5ZjQ3MDYzMmIyYy4uYmRlNDg3NzVjZjFiIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2RjZV92MTFfMC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvZGNlX3YxMV8wLmMKPiBAQCAtMzQ4LDkgKzM0OCwxMSBAQCBzdGF0aWMgdm9pZCBkY2Vf
djExXzBfaHBkX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gIHsKPiAgICAgICAg
IHN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBhZGV2LT5kZGV2Owo+ICAgICAgICAgc3RydWN0IGRy
bV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX2xp
c3RfaXRlciBpdGVyOwo+ICAgICAgICAgdTMyIHRtcDsKPgo+IC0gICAgICAgbGlzdF9mb3JfZWFj
aF9lbnRyeShjb25uZWN0b3IsICZkZXYtPm1vZGVfY29uZmlnLmNvbm5lY3Rvcl9saXN0LCBoZWFk
KSB7Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9iZWdpbihkZXYsICZpdGVyKTsK
PiArICAgICAgIGRybV9mb3JfZWFjaF9jb25uZWN0b3JfaXRlcihjb25uZWN0b3IsICZpdGVyKSB7
Cj4gICAgICAgICAgICAgICAgIHN0cnVjdCBhbWRncHVfY29ubmVjdG9yICphbWRncHVfY29ubmVj
dG9yID0gdG9fYW1kZ3B1X2Nvbm5lY3Rvcihjb25uZWN0b3IpOwo+Cj4gICAgICAgICAgICAgICAg
IGlmIChhbWRncHVfY29ubmVjdG9yLT5ocGQuaHBkID49IGFkZXYtPm1vZGVfaW5mby5udW1faHBk
KQo+IEBAIC0zODUsNiArMzg3LDcgQEAgc3RhdGljIHZvaWQgZGNlX3YxMV8wX2hwZF9pbml0KHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+ICAgICAgICAgICAgICAgICBkY2VfdjExXzBfaHBk
X3NldF9wb2xhcml0eShhZGV2LCBhbWRncHVfY29ubmVjdG9yLT5ocGQuaHBkKTsKPiAgICAgICAg
ICAgICAgICAgYW1kZ3B1X2lycV9nZXQoYWRldiwgJmFkZXYtPmhwZF9pcnEsIGFtZGdwdV9jb25u
ZWN0b3ItPmhwZC5ocGQpOwo+ICAgICAgICAgfQo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0
X2l0ZXJfZW5kKCZpdGVyKTsKPiAgfQo+Cj4gIC8qKgo+IEBAIC0zOTksOSArNDAyLDExIEBAIHN0
YXRpYyB2b2lkIGRjZV92MTFfMF9ocGRfZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikK
PiAgewo+ICAgICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGFkZXYtPmRkZXY7Cj4gICAg
ICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOwo+ICsgICAgICAgc3RydWN0IGRy
bV9jb25uZWN0b3JfbGlzdF9pdGVyIGl0ZXI7Cj4gICAgICAgICB1MzIgdG1wOwo+Cj4gLSAgICAg
ICBsaXN0X2Zvcl9lYWNoX2VudHJ5KGNvbm5lY3RvciwgJmRldi0+bW9kZV9jb25maWcuY29ubmVj
dG9yX2xpc3QsIGhlYWQpIHsKPiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2lu
KGRldiwgJml0ZXIpOwo+ICsgICAgICAgZHJtX2Zvcl9lYWNoX2Nvbm5lY3Rvcl9pdGVyKGNvbm5l
Y3RvciwgJml0ZXIpIHsKPiAgICAgICAgICAgICAgICAgc3RydWN0IGFtZGdwdV9jb25uZWN0b3Ig
KmFtZGdwdV9jb25uZWN0b3IgPSB0b19hbWRncHVfY29ubmVjdG9yKGNvbm5lY3Rvcik7Cj4KPiAg
ICAgICAgICAgICAgICAgaWYgKGFtZGdwdV9jb25uZWN0b3ItPmhwZC5ocGQgPj0gYWRldi0+bW9k
ZV9pbmZvLm51bV9ocGQpCj4gQEAgLTQxMyw2ICs0MTgsNyBAQCBzdGF0aWMgdm9pZCBkY2VfdjEx
XzBfaHBkX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4KPiAgICAgICAgICAgICAg
ICAgYW1kZ3B1X2lycV9wdXQoYWRldiwgJmFkZXYtPmhwZF9pcnEsIGFtZGdwdV9jb25uZWN0b3It
PmhwZC5ocGQpOwo+ICAgICAgICAgfQo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJf
ZW5kKCZpdGVyKTsKPiAgfQo+Cj4gIHN0YXRpYyB1MzIgZGNlX3YxMV8wX2hwZF9nZXRfZ3Bpb19y
ZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gQEAgLTEyNDUsMTAgKzEyNTEsMTIgQEAg
c3RhdGljIHZvaWQgZGNlX3YxMV8wX2FmbXRfYXVkaW9fc2VsZWN0X3BpbihzdHJ1Y3QgZHJtX2Vu
Y29kZXIgKmVuY29kZXIpCj4gIHN0YXRpYyB2b2lkIGRjZV92MTFfMF9hdWRpb193cml0ZV9sYXRl
bmN5X2ZpZWxkcyhzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIsCj4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRybV9kaXNwbGF5X21vZGUg
Km1vZGUpCj4gIHsKPiAtICAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gZW5jb2Rl
ci0+ZGV2LT5kZXZfcHJpdmF0ZTsKPiArICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBl
bmNvZGVyLT5kZXY7Cj4gKyAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGRldi0+
ZGV2X3ByaXZhdGU7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2VuY29kZXIgKmFtZGdwdV9lbmNv
ZGVyID0gdG9fYW1kZ3B1X2VuY29kZXIoZW5jb2Rlcik7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1
X2VuY29kZXJfYXRvbV9kaWcgKmRpZyA9IGFtZGdwdV9lbmNvZGVyLT5lbmNfcHJpdjsKPiAgICAg
ICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3I7Cj4gKyAgICAgICBzdHJ1Y3QgZHJt
X2Nvbm5lY3Rvcl9saXN0X2l0ZXIgaXRlcjsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfY29ubmVj
dG9yICphbWRncHVfY29ubmVjdG9yID0gTlVMTDsKPiAgICAgICAgIHUzMiB0bXA7Cj4gICAgICAg
ICBpbnQgaW50ZXJsYWNlID0gMDsKPiBAQCAtMTI1NiwxMiArMTI2NCwxNCBAQCBzdGF0aWMgdm9p
ZCBkY2VfdjExXzBfYXVkaW9fd3JpdGVfbGF0ZW5jeV9maWVsZHMoc3RydWN0IGRybV9lbmNvZGVy
ICplbmNvZGVyLAo+ICAgICAgICAgaWYgKCFkaWcgfHwgIWRpZy0+YWZtdCB8fCAhZGlnLT5hZm10
LT5waW4pCj4gICAgICAgICAgICAgICAgIHJldHVybjsKPgo+IC0gICAgICAgbGlzdF9mb3JfZWFj
aF9lbnRyeShjb25uZWN0b3IsICZlbmNvZGVyLT5kZXYtPm1vZGVfY29uZmlnLmNvbm5lY3Rvcl9s
aXN0LCBoZWFkKSB7Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9iZWdpbihkZXYs
ICZpdGVyKTsKPiArICAgICAgIGRybV9mb3JfZWFjaF9jb25uZWN0b3JfaXRlcihjb25uZWN0b3Is
ICZpdGVyKSB7Cj4gICAgICAgICAgICAgICAgIGlmIChjb25uZWN0b3ItPmVuY29kZXIgPT0gZW5j
b2Rlcikgewo+ICAgICAgICAgICAgICAgICAgICAgICAgIGFtZGdwdV9jb25uZWN0b3IgPSB0b19h
bWRncHVfY29ubmVjdG9yKGNvbm5lY3Rvcik7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgYnJl
YWs7Cj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPiArICAgICAgIGRybV9jb25uZWN0
b3JfbGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4KPiAgICAgICAgIGlmICghYW1kZ3B1X2Nvbm5lY3Rv
cikgewo+ICAgICAgICAgICAgICAgICBEUk1fRVJST1IoIkNvdWxkbid0IGZpbmQgZW5jb2Rlcidz
IGNvbm5lY3RvclxuIik7Cj4gQEAgLTEyODcsMTAgKzEyOTcsMTIgQEAgc3RhdGljIHZvaWQgZGNl
X3YxMV8wX2F1ZGlvX3dyaXRlX2xhdGVuY3lfZmllbGRzKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5j
b2RlciwKPgo+ICBzdGF0aWMgdm9pZCBkY2VfdjExXzBfYXVkaW9fd3JpdGVfc3BlYWtlcl9hbGxv
Y2F0aW9uKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKPiAgewo+IC0gICAgICAgc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBlbmNvZGVyLT5kZXYtPmRldl9wcml2YXRlOwo+ICsgICAg
ICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGVuY29kZXItPmRldjsKPiArICAgICAgIHN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKPiAgICAgICAgIHN0cnVj
dCBhbWRncHVfZW5jb2RlciAqYW1kZ3B1X2VuY29kZXIgPSB0b19hbWRncHVfZW5jb2RlcihlbmNv
ZGVyKTsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfZW5jb2Rlcl9hdG9tX2RpZyAqZGlnID0gYW1k
Z3B1X2VuY29kZXItPmVuY19wcml2Owo+ICAgICAgICAgc3RydWN0IGRybV9jb25uZWN0b3IgKmNv
bm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRlciBpdGVyOwo+
ICAgICAgICAgc3RydWN0IGFtZGdwdV9jb25uZWN0b3IgKmFtZGdwdV9jb25uZWN0b3IgPSBOVUxM
Owo+ICAgICAgICAgdTMyIHRtcDsKPiAgICAgICAgIHU4ICpzYWRiID0gTlVMTDsKPiBAQCAtMTI5
OSwxMiArMTMxMSwxNCBAQCBzdGF0aWMgdm9pZCBkY2VfdjExXzBfYXVkaW9fd3JpdGVfc3BlYWtl
cl9hbGxvY2F0aW9uKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2Rlcgo+ICAgICAgICAgaWYgKCFk
aWcgfHwgIWRpZy0+YWZtdCB8fCAhZGlnLT5hZm10LT5waW4pCj4gICAgICAgICAgICAgICAgIHJl
dHVybjsKPgo+IC0gICAgICAgbGlzdF9mb3JfZWFjaF9lbnRyeShjb25uZWN0b3IsICZlbmNvZGVy
LT5kZXYtPm1vZGVfY29uZmlnLmNvbm5lY3Rvcl9saXN0LCBoZWFkKSB7Cj4gKyAgICAgICBkcm1f
Y29ubmVjdG9yX2xpc3RfaXRlcl9iZWdpbihkZXYsICZpdGVyKTsKPiArICAgICAgIGRybV9mb3Jf
ZWFjaF9jb25uZWN0b3JfaXRlcihjb25uZWN0b3IsICZpdGVyKSB7Cj4gICAgICAgICAgICAgICAg
IGlmIChjb25uZWN0b3ItPmVuY29kZXIgPT0gZW5jb2Rlcikgewo+ICAgICAgICAgICAgICAgICAg
ICAgICAgIGFtZGdwdV9jb25uZWN0b3IgPSB0b19hbWRncHVfY29ubmVjdG9yKGNvbm5lY3Rvcik7
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gICAgICAgICAgICAgICAgIH0KPiAg
ICAgICAgIH0KPiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4K
PiAgICAgICAgIGlmICghYW1kZ3B1X2Nvbm5lY3Rvcikgewo+ICAgICAgICAgICAgICAgICBEUk1f
RVJST1IoIkNvdWxkbid0IGZpbmQgZW5jb2RlcidzIGNvbm5lY3RvclxuIik7Cj4gQEAgLTEzMzks
MTAgKzEzNTMsMTIgQEAgc3RhdGljIHZvaWQgZGNlX3YxMV8wX2F1ZGlvX3dyaXRlX3NwZWFrZXJf
YWxsb2NhdGlvbihzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIKPgo+ICBzdGF0aWMgdm9pZCBk
Y2VfdjExXzBfYXVkaW9fd3JpdGVfc2FkX3JlZ3Moc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVy
KQo+ICB7Cj4gLSAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGVuY29kZXItPmRl
di0+ZGV2X3ByaXZhdGU7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gZW5jb2Rl
ci0+ZGV2Owo+ICsgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBkZXYtPmRldl9w
cml2YXRlOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9lbmNvZGVyICphbWRncHVfZW5jb2RlciA9
IHRvX2FtZGdwdV9lbmNvZGVyKGVuY29kZXIpOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9lbmNv
ZGVyX2F0b21fZGlnICpkaWcgPSBhbWRncHVfZW5jb2Rlci0+ZW5jX3ByaXY7Cj4gICAgICAgICBz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOwo+ICsgICAgICAgc3RydWN0IGRybV9jb25u
ZWN0b3JfbGlzdF9pdGVyIGl0ZXI7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2Nvbm5lY3RvciAq
YW1kZ3B1X2Nvbm5lY3RvciA9IE5VTEw7Cj4gICAgICAgICBzdHJ1Y3QgY2VhX3NhZCAqc2FkczsK
PiAgICAgICAgIGludCBpLCBzYWRfY291bnQ7Cj4gQEAgLTEzNjUsMTIgKzEzODEsMTQgQEAgc3Rh
dGljIHZvaWQgZGNlX3YxMV8wX2F1ZGlvX3dyaXRlX3NhZF9yZWdzKHN0cnVjdCBkcm1fZW5jb2Rl
ciAqZW5jb2RlcikKPiAgICAgICAgIGlmICghZGlnIHx8ICFkaWctPmFmbXQgfHwgIWRpZy0+YWZt
dC0+cGluKQo+ICAgICAgICAgICAgICAgICByZXR1cm47Cj4KPiAtICAgICAgIGxpc3RfZm9yX2Vh
Y2hfZW50cnkoY29ubmVjdG9yLCAmZW5jb2Rlci0+ZGV2LT5tb2RlX2NvbmZpZy5jb25uZWN0b3Jf
bGlzdCwgaGVhZCkgewo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4oZGV2
LCAmaXRlcik7Cj4gKyAgICAgICBkcm1fZm9yX2VhY2hfY29ubmVjdG9yX2l0ZXIoY29ubmVjdG9y
LCAmaXRlcikgewo+ICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdG9yLT5lbmNvZGVyID09IGVu
Y29kZXIpIHsKPiAgICAgICAgICAgICAgICAgICAgICAgICBhbWRncHVfY29ubmVjdG9yID0gdG9f
YW1kZ3B1X2Nvbm5lY3Rvcihjb25uZWN0b3IpOwo+ICAgICAgICAgICAgICAgICAgICAgICAgIGJy
ZWFrOwo+ICAgICAgICAgICAgICAgICB9Cj4gICAgICAgICB9Cj4gKyAgICAgICBkcm1fY29ubmVj
dG9yX2xpc3RfaXRlcl9lbmQoJml0ZXIpOwo+Cj4gICAgICAgICBpZiAoIWFtZGdwdV9jb25uZWN0
b3IpIHsKPiAgICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJDb3VsZG4ndCBmaW5kIGVuY29kZXIn
cyBjb25uZWN0b3JcbiIpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdw
dS9kY2VfdjZfMC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3Y2XzAuYwo+IGlu
ZGV4IDNlYjJlNzQyOTI2OS4uNjVmNjFkZTkzMWQ3IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2RjZV92Nl8wLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9kY2VfdjZfMC5jCj4gQEAgLTI4MSw5ICsyODEsMTEgQEAgc3RhdGljIHZvaWQgZGNlX3Y2
XzBfaHBkX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gIHsKPiAgICAgICAgIHN0
cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBhZGV2LT5kZGV2Owo+ICAgICAgICAgc3RydWN0IGRybV9j
b25uZWN0b3IgKmNvbm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3Rf
aXRlciBpdGVyOwo+ICAgICAgICAgdTMyIHRtcDsKPgo+IC0gICAgICAgbGlzdF9mb3JfZWFjaF9l
bnRyeShjb25uZWN0b3IsICZkZXYtPm1vZGVfY29uZmlnLmNvbm5lY3Rvcl9saXN0LCBoZWFkKSB7
Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9iZWdpbihkZXYsICZpdGVyKTsKPiAr
ICAgICAgIGRybV9mb3JfZWFjaF9jb25uZWN0b3JfaXRlcihjb25uZWN0b3IsICZpdGVyKSB7Cj4g
ICAgICAgICAgICAgICAgIHN0cnVjdCBhbWRncHVfY29ubmVjdG9yICphbWRncHVfY29ubmVjdG9y
ID0gdG9fYW1kZ3B1X2Nvbm5lY3Rvcihjb25uZWN0b3IpOwo+Cj4gICAgICAgICAgICAgICAgIGlm
IChhbWRncHVfY29ubmVjdG9yLT5ocGQuaHBkID49IGFkZXYtPm1vZGVfaW5mby5udW1faHBkKQo+
IEBAIC0zMDksNyArMzExLDcgQEAgc3RhdGljIHZvaWQgZGNlX3Y2XzBfaHBkX2luaXQoc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gICAgICAgICAgICAgICAgIGRjZV92Nl8wX2hwZF9zZXRf
cG9sYXJpdHkoYWRldiwgYW1kZ3B1X2Nvbm5lY3Rvci0+aHBkLmhwZCk7Cj4gICAgICAgICAgICAg
ICAgIGFtZGdwdV9pcnFfZ2V0KGFkZXYsICZhZGV2LT5ocGRfaXJxLCBhbWRncHVfY29ubmVjdG9y
LT5ocGQuaHBkKTsKPiAgICAgICAgIH0KPiAtCj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3Rf
aXRlcl9lbmQoJml0ZXIpOwo+ICB9Cj4KPiAgLyoqCj4gQEAgLTMyNCw5ICszMjYsMTEgQEAgc3Rh
dGljIHZvaWQgZGNlX3Y2XzBfaHBkX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4g
IHsKPiAgICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBhZGV2LT5kZGV2Owo+ICAgICAg
ICAgc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBkcm1f
Y29ubmVjdG9yX2xpc3RfaXRlciBpdGVyOwo+ICAgICAgICAgdTMyIHRtcDsKPgo+IC0gICAgICAg
bGlzdF9mb3JfZWFjaF9lbnRyeShjb25uZWN0b3IsICZkZXYtPm1vZGVfY29uZmlnLmNvbm5lY3Rv
cl9saXN0LCBoZWFkKSB7Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9iZWdpbihk
ZXYsICZpdGVyKTsKPiArICAgICAgIGRybV9mb3JfZWFjaF9jb25uZWN0b3JfaXRlcihjb25uZWN0
b3IsICZpdGVyKSB7Cj4gICAgICAgICAgICAgICAgIHN0cnVjdCBhbWRncHVfY29ubmVjdG9yICph
bWRncHVfY29ubmVjdG9yID0gdG9fYW1kZ3B1X2Nvbm5lY3Rvcihjb25uZWN0b3IpOwo+Cj4gICAg
ICAgICAgICAgICAgIGlmIChhbWRncHVfY29ubmVjdG9yLT5ocGQuaHBkID49IGFkZXYtPm1vZGVf
aW5mby5udW1faHBkKQo+IEBAIC0zMzgsNiArMzQyLDcgQEAgc3RhdGljIHZvaWQgZGNlX3Y2XzBf
aHBkX2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4KPiAgICAgICAgICAgICAgICAg
YW1kZ3B1X2lycV9wdXQoYWRldiwgJmFkZXYtPmhwZF9pcnEsIGFtZGdwdV9jb25uZWN0b3ItPmhw
ZC5ocGQpOwo+ICAgICAgICAgfQo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5k
KCZpdGVyKTsKPiAgfQo+Cj4gIHN0YXRpYyB1MzIgZGNlX3Y2XzBfaHBkX2dldF9ncGlvX3JlZyhz
dHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiBAQCAtMTEyNCwyMCArMTEyOSwyNCBAQCBzdGF0
aWMgdm9pZCBkY2VfdjZfMF9hdWRpb19zZWxlY3RfcGluKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5j
b2RlcikKPiAgc3RhdGljIHZvaWQgZGNlX3Y2XzBfYXVkaW9fd3JpdGVfbGF0ZW5jeV9maWVsZHMo
c3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKQo+ICB7
Cj4gLSAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGVuY29kZXItPmRldi0+ZGV2
X3ByaXZhdGU7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gZW5jb2Rlci0+ZGV2
Owo+ICsgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBkZXYtPmRldl9wcml2YXRl
Owo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9lbmNvZGVyICphbWRncHVfZW5jb2RlciA9IHRvX2Ft
ZGdwdV9lbmNvZGVyKGVuY29kZXIpOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9lbmNvZGVyX2F0
b21fZGlnICpkaWcgPSBhbWRncHVfZW5jb2Rlci0+ZW5jX3ByaXY7Cj4gICAgICAgICBzdHJ1Y3Qg
ZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOwo+ICsgICAgICAgc3RydWN0IGRybV9jb25uZWN0b3Jf
bGlzdF9pdGVyIGl0ZXI7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2Nvbm5lY3RvciAqYW1kZ3B1
X2Nvbm5lY3RvciA9IE5VTEw7Cj4gICAgICAgICBpbnQgaW50ZXJsYWNlID0gMDsKPiAgICAgICAg
IHUzMiB0bXA7Cj4KPiAtICAgICAgIGxpc3RfZm9yX2VhY2hfZW50cnkoY29ubmVjdG9yLCAmZW5j
b2Rlci0+ZGV2LT5tb2RlX2NvbmZpZy5jb25uZWN0b3JfbGlzdCwgaGVhZCkgewo+ICsgICAgICAg
ZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4oZGV2LCAmaXRlcik7Cj4gKyAgICAgICBkcm1f
Zm9yX2VhY2hfY29ubmVjdG9yX2l0ZXIoY29ubmVjdG9yLCAmaXRlcikgewo+ICAgICAgICAgICAg
ICAgICBpZiAoY29ubmVjdG9yLT5lbmNvZGVyID09IGVuY29kZXIpIHsKPiAgICAgICAgICAgICAg
ICAgICAgICAgICBhbWRncHVfY29ubmVjdG9yID0gdG9fYW1kZ3B1X2Nvbm5lY3Rvcihjb25uZWN0
b3IpOwo+ICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICAgICAgICAgICAgICAgICB9
Cj4gICAgICAgICB9Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9lbmQoJml0ZXIp
Owo+Cj4gICAgICAgICBpZiAoIWFtZGdwdV9jb25uZWN0b3IpIHsKPiAgICAgICAgICAgICAgICAg
RFJNX0VSUk9SKCJDb3VsZG4ndCBmaW5kIGVuY29kZXIncyBjb25uZWN0b3JcbiIpOwo+IEBAIC0x
MTY0LDIxICsxMTczLDI1IEBAIHN0YXRpYyB2b2lkIGRjZV92Nl8wX2F1ZGlvX3dyaXRlX2xhdGVu
Y3lfZmllbGRzKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwKPgo+ICBzdGF0aWMgdm9pZCBk
Y2VfdjZfMF9hdWRpb193cml0ZV9zcGVha2VyX2FsbG9jYXRpb24oc3RydWN0IGRybV9lbmNvZGVy
ICplbmNvZGVyKQo+ICB7Cj4gLSAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGVu
Y29kZXItPmRldi0+ZGV2X3ByaXZhdGU7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
ID0gZW5jb2Rlci0+ZGV2Owo+ICsgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBk
ZXYtPmRldl9wcml2YXRlOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9lbmNvZGVyICphbWRncHVf
ZW5jb2RlciA9IHRvX2FtZGdwdV9lbmNvZGVyKGVuY29kZXIpOwo+ICAgICAgICAgc3RydWN0IGFt
ZGdwdV9lbmNvZGVyX2F0b21fZGlnICpkaWcgPSBhbWRncHVfZW5jb2Rlci0+ZW5jX3ByaXY7Cj4g
ICAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOwo+ICsgICAgICAgc3RydWN0
IGRybV9jb25uZWN0b3JfbGlzdF9pdGVyIGl0ZXI7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2Nv
bm5lY3RvciAqYW1kZ3B1X2Nvbm5lY3RvciA9IE5VTEw7Cj4gICAgICAgICB1OCAqc2FkYiA9IE5V
TEw7Cj4gICAgICAgICBpbnQgc2FkX2NvdW50Owo+ICAgICAgICAgdTMyIHRtcDsKPgo+IC0gICAg
ICAgbGlzdF9mb3JfZWFjaF9lbnRyeShjb25uZWN0b3IsICZlbmNvZGVyLT5kZXYtPm1vZGVfY29u
ZmlnLmNvbm5lY3Rvcl9saXN0LCBoZWFkKSB7Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3Rf
aXRlcl9iZWdpbihkZXYsICZpdGVyKTsKPiArICAgICAgIGRybV9mb3JfZWFjaF9jb25uZWN0b3Jf
aXRlcihjb25uZWN0b3IsICZpdGVyKSB7Cj4gICAgICAgICAgICAgICAgIGlmIChjb25uZWN0b3It
PmVuY29kZXIgPT0gZW5jb2Rlcikgewo+ICAgICAgICAgICAgICAgICAgICAgICAgIGFtZGdwdV9j
b25uZWN0b3IgPSB0b19hbWRncHVfY29ubmVjdG9yKGNvbm5lY3Rvcik7Cj4gICAgICAgICAgICAg
ICAgICAgICAgICAgYnJlYWs7Cj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPiArICAg
ICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4KPiAgICAgICAgIGlmICgh
YW1kZ3B1X2Nvbm5lY3Rvcikgewo+ICAgICAgICAgICAgICAgICBEUk1fRVJST1IoIkNvdWxkbid0
IGZpbmQgZW5jb2RlcidzIGNvbm5lY3RvclxuIik7Cj4gQEAgLTEyMjEsMTAgKzEyMzQsMTIgQEAg
c3RhdGljIHZvaWQgZGNlX3Y2XzBfYXVkaW9fd3JpdGVfc3BlYWtlcl9hbGxvY2F0aW9uKHN0cnVj
dCBkcm1fZW5jb2RlciAqZW5jb2RlcikKPgo+ICBzdGF0aWMgdm9pZCBkY2VfdjZfMF9hdWRpb193
cml0ZV9zYWRfcmVncyhzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCj4gIHsKPiAtICAgICAg
IHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gZW5jb2Rlci0+ZGV2LT5kZXZfcHJpdmF0ZTsK
PiArICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBlbmNvZGVyLT5kZXY7Cj4gKyAgICAg
ICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGRldi0+ZGV2X3ByaXZhdGU7Cj4gICAgICAg
ICBzdHJ1Y3QgYW1kZ3B1X2VuY29kZXIgKmFtZGdwdV9lbmNvZGVyID0gdG9fYW1kZ3B1X2VuY29k
ZXIoZW5jb2Rlcik7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2VuY29kZXJfYXRvbV9kaWcgKmRp
ZyA9IGFtZGdwdV9lbmNvZGVyLT5lbmNfcHJpdjsKPiAgICAgICAgIHN0cnVjdCBkcm1fY29ubmVj
dG9yICpjb25uZWN0b3I7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXIg
aXRlcjsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfY29ubmVjdG9yICphbWRncHVfY29ubmVjdG9y
ID0gTlVMTDsKPiAgICAgICAgIHN0cnVjdCBjZWFfc2FkICpzYWRzOwo+ICAgICAgICAgaW50IGks
IHNhZF9jb3VudDsKPiBAQCAtMTI0NCwxMiArMTI1OSwxNCBAQCBzdGF0aWMgdm9pZCBkY2VfdjZf
MF9hdWRpb193cml0ZV9zYWRfcmVncyhzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCj4gICAg
ICAgICAgICAgICAgIHsgaXhBWkFMSUFfRjBfQ09ERUNfUElOX0NPTlRST0xfQVVESU9fREVTQ1JJ
UFRPUjEzLCBIRE1JX0FVRElPX0NPRElOR19UWVBFX1dNQV9QUk8gfSwKPiAgICAgICAgIH07Cj4K
PiAtICAgICAgIGxpc3RfZm9yX2VhY2hfZW50cnkoY29ubmVjdG9yLCAmZW5jb2Rlci0+ZGV2LT5t
b2RlX2NvbmZpZy5jb25uZWN0b3JfbGlzdCwgaGVhZCkgewo+ICsgICAgICAgZHJtX2Nvbm5lY3Rv
cl9saXN0X2l0ZXJfYmVnaW4oZGV2LCAmaXRlcik7Cj4gKyAgICAgICBkcm1fZm9yX2VhY2hfY29u
bmVjdG9yX2l0ZXIoY29ubmVjdG9yLCAmaXRlcikgewo+ICAgICAgICAgICAgICAgICBpZiAoY29u
bmVjdG9yLT5lbmNvZGVyID09IGVuY29kZXIpIHsKPiAgICAgICAgICAgICAgICAgICAgICAgICBh
bWRncHVfY29ubmVjdG9yID0gdG9fYW1kZ3B1X2Nvbm5lY3Rvcihjb25uZWN0b3IpOwo+ICAgICAg
ICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICAgICAgICAgICAgICAgICB9Cj4gICAgICAgICB9
Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9lbmQoJml0ZXIpOwo+Cj4gICAgICAg
ICBpZiAoIWFtZGdwdV9jb25uZWN0b3IpIHsKPiAgICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJD
b3VsZG4ndCBmaW5kIGVuY29kZXIncyBjb25uZWN0b3JcbiIpOwo+IEBAIC0xNjMyLDYgKzE2NDks
NyBAQCBzdGF0aWMgdm9pZCBkY2VfdjZfMF9hZm10X3NldG1vZGUoc3RydWN0IGRybV9lbmNvZGVy
ICplbmNvZGVyLAo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9lbmNvZGVyICphbWRncHVfZW5jb2Rl
ciA9IHRvX2FtZGdwdV9lbmNvZGVyKGVuY29kZXIpOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9l
bmNvZGVyX2F0b21fZGlnICpkaWcgPSBhbWRncHVfZW5jb2Rlci0+ZW5jX3ByaXY7Cj4gICAgICAg
ICBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOwo+ICsgICAgICAgc3RydWN0IGRybV9j
b25uZWN0b3JfbGlzdF9pdGVyIGl0ZXI7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2Nvbm5lY3Rv
ciAqYW1kZ3B1X2Nvbm5lY3RvciA9IE5VTEw7Cj4gICAgICAgICBpbnQgZW0gPSBhbWRncHVfYXRv
bWJpb3NfZW5jb2Rlcl9nZXRfZW5jb2Rlcl9tb2RlKGVuY29kZXIpOwo+ICAgICAgICAgaW50IGJw
YyA9IDg7Cj4gQEAgLTE2MzksMTIgKzE2NTcsMTQgQEAgc3RhdGljIHZvaWQgZGNlX3Y2XzBfYWZt
dF9zZXRtb2RlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwKPiAgICAgICAgIGlmICghZGln
IHx8ICFkaWctPmFmbXQpCj4gICAgICAgICAgICAgICAgIHJldHVybjsKPgo+IC0gICAgICAgbGlz
dF9mb3JfZWFjaF9lbnRyeShjb25uZWN0b3IsICZlbmNvZGVyLT5kZXYtPm1vZGVfY29uZmlnLmNv
bm5lY3Rvcl9saXN0LCBoZWFkKSB7Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9i
ZWdpbihkZXYsICZpdGVyKTsKPiArICAgICAgIGRybV9mb3JfZWFjaF9jb25uZWN0b3JfaXRlcihj
b25uZWN0b3IsICZpdGVyKSB7Cj4gICAgICAgICAgICAgICAgIGlmIChjb25uZWN0b3ItPmVuY29k
ZXIgPT0gZW5jb2Rlcikgewo+ICAgICAgICAgICAgICAgICAgICAgICAgIGFtZGdwdV9jb25uZWN0
b3IgPSB0b19hbWRncHVfY29ubmVjdG9yKGNvbm5lY3Rvcik7Cj4gICAgICAgICAgICAgICAgICAg
ICAgICAgYnJlYWs7Cj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPiArICAgICAgIGRy
bV9jb25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4KPiAgICAgICAgIGlmICghYW1kZ3B1
X2Nvbm5lY3Rvcikgewo+ICAgICAgICAgICAgICAgICBEUk1fRVJST1IoIkNvdWxkbid0IGZpbmQg
ZW5jb2RlcidzIGNvbm5lY3RvclxuIik7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2RjZV92OF8wLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9kY2Vfdjhf
MC5jCj4gaW5kZXggYTE2YzVlOWU2MTBlLi5lNWY1MDg4MmE1MWQgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvZGNlX3Y4XzAuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2RjZV92OF8wLmMKPiBAQCAtMjc1LDkgKzI3NSwxMSBAQCBzdGF0aWMgdm9p
ZCBkY2VfdjhfMF9ocGRfaW5pdChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgewo+ICAg
ICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGFkZXYtPmRkZXY7Cj4gICAgICAgICBzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOwo+ICsgICAgICAgc3RydWN0IGRybV9jb25uZWN0
b3JfbGlzdF9pdGVyIGl0ZXI7Cj4gICAgICAgICB1MzIgdG1wOwo+Cj4gLSAgICAgICBsaXN0X2Zv
cl9lYWNoX2VudHJ5KGNvbm5lY3RvciwgJmRldi0+bW9kZV9jb25maWcuY29ubmVjdG9yX2xpc3Qs
IGhlYWQpIHsKPiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKGRldiwgJml0
ZXIpOwo+ICsgICAgICAgZHJtX2Zvcl9lYWNoX2Nvbm5lY3Rvcl9pdGVyKGNvbm5lY3RvciwgJml0
ZXIpIHsKPiAgICAgICAgICAgICAgICAgc3RydWN0IGFtZGdwdV9jb25uZWN0b3IgKmFtZGdwdV9j
b25uZWN0b3IgPSB0b19hbWRncHVfY29ubmVjdG9yKGNvbm5lY3Rvcik7Cj4KPiAgICAgICAgICAg
ICAgICAgaWYgKGFtZGdwdV9jb25uZWN0b3ItPmhwZC5ocGQgPj0gYWRldi0+bW9kZV9pbmZvLm51
bV9ocGQpCj4gQEAgLTMwMyw2ICszMDUsNyBAQCBzdGF0aWMgdm9pZCBkY2VfdjhfMF9ocGRfaW5p
dChzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldikKPiAgICAgICAgICAgICAgICAgZGNlX3Y4XzBf
aHBkX3NldF9wb2xhcml0eShhZGV2LCBhbWRncHVfY29ubmVjdG9yLT5ocGQuaHBkKTsKPiAgICAg
ICAgICAgICAgICAgYW1kZ3B1X2lycV9nZXQoYWRldiwgJmFkZXYtPmhwZF9pcnEsIGFtZGdwdV9j
b25uZWN0b3ItPmhwZC5ocGQpOwo+ICAgICAgICAgfQo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9s
aXN0X2l0ZXJfZW5kKCZpdGVyKTsKPiAgfQo+Cj4gIC8qKgo+IEBAIC0zMTcsOSArMzIwLDExIEBA
IHN0YXRpYyB2b2lkIGRjZV92OF8wX2hwZF9maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
KQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gYWRldi0+ZGRldjsKPiAg
ICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3I7Cj4gKyAgICAgICBzdHJ1Y3Qg
ZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXIgaXRlcjsKPiAgICAgICAgIHUzMiB0bXA7Cj4KPiAtICAg
ICAgIGxpc3RfZm9yX2VhY2hfZW50cnkoY29ubmVjdG9yLCAmZGV2LT5tb2RlX2NvbmZpZy5jb25u
ZWN0b3JfbGlzdCwgaGVhZCkgewo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVn
aW4oZGV2LCAmaXRlcik7Cj4gKyAgICAgICBkcm1fZm9yX2VhY2hfY29ubmVjdG9yX2l0ZXIoY29u
bmVjdG9yLCAmaXRlcikgewo+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2Nvbm5lY3Rv
ciAqYW1kZ3B1X2Nvbm5lY3RvciA9IHRvX2FtZGdwdV9jb25uZWN0b3IoY29ubmVjdG9yKTsKPgo+
ICAgICAgICAgICAgICAgICBpZiAoYW1kZ3B1X2Nvbm5lY3Rvci0+aHBkLmhwZCA+PSBhZGV2LT5t
b2RlX2luZm8ubnVtX2hwZCkKPiBAQCAtMzMxLDYgKzMzNiw3IEBAIHN0YXRpYyB2b2lkIGRjZV92
OF8wX2hwZF9maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2KQo+Cj4gICAgICAgICAgICAg
ICAgIGFtZGdwdV9pcnFfcHV0KGFkZXYsICZhZGV2LT5ocGRfaXJxLCBhbWRncHVfY29ubmVjdG9y
LT5ocGQuaHBkKTsKPiAgICAgICAgIH0KPiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVy
X2VuZCgmaXRlcik7Cj4gIH0KPgo+ICBzdGF0aWMgdTMyIGRjZV92OF8wX2hwZF9nZXRfZ3Bpb19y
ZWcoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gQEAgLTExNTcsMTAgKzExNjMsMTIgQEAg
c3RhdGljIHZvaWQgZGNlX3Y4XzBfYWZtdF9hdWRpb19zZWxlY3RfcGluKHN0cnVjdCBkcm1fZW5j
b2RlciAqZW5jb2RlcikKPiAgc3RhdGljIHZvaWQgZGNlX3Y4XzBfYXVkaW9fd3JpdGVfbGF0ZW5j
eV9maWVsZHMoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyLAo+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICpt
b2RlKQo+ICB7Cj4gLSAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGVuY29kZXIt
PmRldi0+ZGV2X3ByaXZhdGU7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gZW5j
b2Rlci0+ZGV2Owo+ICsgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBkZXYtPmRl
dl9wcml2YXRlOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9lbmNvZGVyICphbWRncHVfZW5jb2Rl
ciA9IHRvX2FtZGdwdV9lbmNvZGVyKGVuY29kZXIpOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9l
bmNvZGVyX2F0b21fZGlnICpkaWcgPSBhbWRncHVfZW5jb2Rlci0+ZW5jX3ByaXY7Cj4gICAgICAg
ICBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOwo+ICsgICAgICAgc3RydWN0IGRybV9j
b25uZWN0b3JfbGlzdF9pdGVyIGl0ZXI7Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2Nvbm5lY3Rv
ciAqYW1kZ3B1X2Nvbm5lY3RvciA9IE5VTEw7Cj4gICAgICAgICB1MzIgdG1wID0gMCwgb2Zmc2V0
Owo+Cj4gQEAgLTExNjksMTIgKzExNzcsMTQgQEAgc3RhdGljIHZvaWQgZGNlX3Y4XzBfYXVkaW9f
d3JpdGVfbGF0ZW5jeV9maWVsZHMoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyLAo+Cj4gICAg
ICAgICBvZmZzZXQgPSBkaWctPmFmbXQtPnBpbi0+b2Zmc2V0Owo+Cj4gLSAgICAgICBsaXN0X2Zv
cl9lYWNoX2VudHJ5KGNvbm5lY3RvciwgJmVuY29kZXItPmRldi0+bW9kZV9jb25maWcuY29ubmVj
dG9yX2xpc3QsIGhlYWQpIHsKPiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2lu
KGRldiwgJml0ZXIpOwo+ICsgICAgICAgZHJtX2Zvcl9lYWNoX2Nvbm5lY3Rvcl9pdGVyKGNvbm5l
Y3RvciwgJml0ZXIpIHsKPiAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rvci0+ZW5jb2RlciA9
PSBlbmNvZGVyKSB7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgYW1kZ3B1X2Nvbm5lY3RvciA9
IHRvX2FtZGdwdV9jb25uZWN0b3IoY29ubmVjdG9yKTsKPiAgICAgICAgICAgICAgICAgICAgICAg
ICBicmVhazsKPiAgICAgICAgICAgICAgICAgfQo+ICAgICAgICAgfQo+ICsgICAgICAgZHJtX2Nv
bm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZpdGVyKTsKPgo+ICAgICAgICAgaWYgKCFhbWRncHVfY29u
bmVjdG9yKSB7Cj4gICAgICAgICAgICAgICAgIERSTV9FUlJPUigiQ291bGRuJ3QgZmluZCBlbmNv
ZGVyJ3MgY29ubmVjdG9yXG4iKTsKPiBAQCAtMTIxNCwxMCArMTIyNCwxMiBAQCBzdGF0aWMgdm9p
ZCBkY2VfdjhfMF9hdWRpb193cml0ZV9sYXRlbmN5X2ZpZWxkcyhzdHJ1Y3QgZHJtX2VuY29kZXIg
KmVuY29kZXIsCj4KPiAgc3RhdGljIHZvaWQgZGNlX3Y4XzBfYXVkaW9fd3JpdGVfc3BlYWtlcl9h
bGxvY2F0aW9uKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcikKPiAgewo+IC0gICAgICAgc3Ry
dWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBlbmNvZGVyLT5kZXYtPmRldl9wcml2YXRlOwo+ICsg
ICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGVuY29kZXItPmRldjsKPiArICAgICAgIHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKPiAgICAgICAgIHN0
cnVjdCBhbWRncHVfZW5jb2RlciAqYW1kZ3B1X2VuY29kZXIgPSB0b19hbWRncHVfZW5jb2Rlcihl
bmNvZGVyKTsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfZW5jb2Rlcl9hdG9tX2RpZyAqZGlnID0g
YW1kZ3B1X2VuY29kZXItPmVuY19wcml2Owo+ICAgICAgICAgc3RydWN0IGRybV9jb25uZWN0b3Ig
KmNvbm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRlciBpdGVy
Owo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9jb25uZWN0b3IgKmFtZGdwdV9jb25uZWN0b3IgPSBO
VUxMOwo+ICAgICAgICAgdTMyIG9mZnNldCwgdG1wOwo+ICAgICAgICAgdTggKnNhZGIgPSBOVUxM
Owo+IEBAIC0xMjI4LDEyICsxMjQwLDE0IEBAIHN0YXRpYyB2b2lkIGRjZV92OF8wX2F1ZGlvX3dy
aXRlX3NwZWFrZXJfYWxsb2NhdGlvbihzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCj4KPiAg
ICAgICAgIG9mZnNldCA9IGRpZy0+YWZtdC0+cGluLT5vZmZzZXQ7Cj4KPiAtICAgICAgIGxpc3Rf
Zm9yX2VhY2hfZW50cnkoY29ubmVjdG9yLCAmZW5jb2Rlci0+ZGV2LT5tb2RlX2NvbmZpZy5jb25u
ZWN0b3JfbGlzdCwgaGVhZCkgewo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVn
aW4oZGV2LCAmaXRlcik7Cj4gKyAgICAgICBkcm1fZm9yX2VhY2hfY29ubmVjdG9yX2l0ZXIoY29u
bmVjdG9yLCAmaXRlcikgewo+ICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdG9yLT5lbmNvZGVy
ID09IGVuY29kZXIpIHsKPiAgICAgICAgICAgICAgICAgICAgICAgICBhbWRncHVfY29ubmVjdG9y
ID0gdG9fYW1kZ3B1X2Nvbm5lY3Rvcihjb25uZWN0b3IpOwo+ICAgICAgICAgICAgICAgICAgICAg
ICAgIGJyZWFrOwo+ICAgICAgICAgICAgICAgICB9Cj4gICAgICAgICB9Cj4gKyAgICAgICBkcm1f
Y29ubmVjdG9yX2xpc3RfaXRlcl9lbmQoJml0ZXIpOwo+Cj4gICAgICAgICBpZiAoIWFtZGdwdV9j
b25uZWN0b3IpIHsKPiAgICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJDb3VsZG4ndCBmaW5kIGVu
Y29kZXIncyBjb25uZWN0b3JcbiIpOwo+IEBAIC0xMjYzLDExICsxMjc3LDEzIEBAIHN0YXRpYyB2
b2lkIGRjZV92OF8wX2F1ZGlvX3dyaXRlX3NwZWFrZXJfYWxsb2NhdGlvbihzdHJ1Y3QgZHJtX2Vu
Y29kZXIgKmVuY29kZXIpCj4KPiAgc3RhdGljIHZvaWQgZGNlX3Y4XzBfYXVkaW9fd3JpdGVfc2Fk
X3JlZ3Moc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQo+ICB7Cj4gLSAgICAgICBzdHJ1Y3Qg
YW1kZ3B1X2RldmljZSAqYWRldiA9IGVuY29kZXItPmRldi0+ZGV2X3ByaXZhdGU7Cj4gKyAgICAg
ICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gZW5jb2Rlci0+ZGV2Owo+ICsgICAgICAgc3RydWN0
IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBkZXYtPmRldl9wcml2YXRlOwo+ICAgICAgICAgc3RydWN0
IGFtZGdwdV9lbmNvZGVyICphbWRncHVfZW5jb2RlciA9IHRvX2FtZGdwdV9lbmNvZGVyKGVuY29k
ZXIpOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9lbmNvZGVyX2F0b21fZGlnICpkaWcgPSBhbWRn
cHVfZW5jb2Rlci0+ZW5jX3ByaXY7Cj4gICAgICAgICB1MzIgb2Zmc2V0Owo+ICAgICAgICAgc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVj
dG9yX2xpc3RfaXRlciBpdGVyOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9jb25uZWN0b3IgKmFt
ZGdwdV9jb25uZWN0b3IgPSBOVUxMOwo+ICAgICAgICAgc3RydWN0IGNlYV9zYWQgKnNhZHM7Cj4g
ICAgICAgICBpbnQgaSwgc2FkX2NvdW50Owo+IEBAIC0xMjkyLDEyICsxMzA4LDE0IEBAIHN0YXRp
YyB2b2lkIGRjZV92OF8wX2F1ZGlvX3dyaXRlX3NhZF9yZWdzKHN0cnVjdCBkcm1fZW5jb2RlciAq
ZW5jb2RlcikKPgo+ICAgICAgICAgb2Zmc2V0ID0gZGlnLT5hZm10LT5waW4tPm9mZnNldDsKPgo+
IC0gICAgICAgbGlzdF9mb3JfZWFjaF9lbnRyeShjb25uZWN0b3IsICZlbmNvZGVyLT5kZXYtPm1v
ZGVfY29uZmlnLmNvbm5lY3Rvcl9saXN0LCBoZWFkKSB7Cj4gKyAgICAgICBkcm1fY29ubmVjdG9y
X2xpc3RfaXRlcl9iZWdpbihkZXYsICZpdGVyKTsKPiArICAgICAgIGRybV9mb3JfZWFjaF9jb25u
ZWN0b3JfaXRlcihjb25uZWN0b3IsICZpdGVyKSB7Cj4gICAgICAgICAgICAgICAgIGlmIChjb25u
ZWN0b3ItPmVuY29kZXIgPT0gZW5jb2Rlcikgewo+ICAgICAgICAgICAgICAgICAgICAgICAgIGFt
ZGdwdV9jb25uZWN0b3IgPSB0b19hbWRncHVfY29ubmVjdG9yKGNvbm5lY3Rvcik7Cj4gICAgICAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0K
PiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4KPiAgICAgICAg
IGlmICghYW1kZ3B1X2Nvbm5lY3Rvcikgewo+ICAgICAgICAgICAgICAgICBEUk1fRVJST1IoIkNv
dWxkbid0IGZpbmQgZW5jb2RlcidzIGNvbm5lY3RvclxuIik7Cj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtLmMgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jCj4gaW5kZXggMGE3MWVkMWU3
NzYyLi43MzYzMGUyOTQwZDQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNw
bGF5L2FtZGdwdV9kbS9hbWRncHVfZG0uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlz
cGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtLmMKPiBAQCAtODk2LDI3ICs4OTYsMjkgQEAgc3RhdGlj
IGludCBkZXRlY3RfbXN0X2xpbmtfZm9yX2FsbF9jb25uZWN0b3JzKHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBhbWRncHVfZG1fY29ubmVjdG9yICphY29ubmVj
dG9yOwo+ICAgICAgICAgc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKPiArICAgICAg
IHN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRlciBpdGVyOwo+ICAgICAgICAgaW50IHJldCA9
IDA7Cj4KPiAtICAgICAgIGRybV9tb2Rlc2V0X2xvY2soJmRldi0+bW9kZV9jb25maWcuY29ubmVj
dGlvbl9tdXRleCwgTlVMTCk7Cj4gLQo+IC0gICAgICAgbGlzdF9mb3JfZWFjaF9lbnRyeShjb25u
ZWN0b3IsICZkZXYtPm1vZGVfY29uZmlnLmNvbm5lY3Rvcl9saXN0LCBoZWFkKSB7Cj4gKyAgICAg
ICBkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9iZWdpbihkZXYsICZpdGVyKTsKPiArICAgICAgIGRy
bV9mb3JfZWFjaF9jb25uZWN0b3JfaXRlcihjb25uZWN0b3IsICZpdGVyKSB7Cj4gICAgICAgICAg
ICAgICAgIGFjb25uZWN0b3IgPSB0b19hbWRncHVfZG1fY29ubmVjdG9yKGNvbm5lY3Rvcik7Cj4g
ICAgICAgICAgICAgICAgIGlmIChhY29ubmVjdG9yLT5kY19saW5rLT50eXBlID09IGRjX2Nvbm5l
Y3Rpb25fbXN0X2JyYW5jaCAmJgo+ICAgICAgICAgICAgICAgICAgICAgYWNvbm5lY3Rvci0+bXN0
X21nci5hdXgpIHsKPiAgICAgICAgICAgICAgICAgICAgICAgICBEUk1fREVCVUdfRFJJVkVSKCJE
TV9NU1Q6IHN0YXJ0aW5nIFRNIG9uIGFjb25uZWN0b3I6ICVwIFtpZDogJWRdXG4iLAo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY29ubmVjdG9yLCBhY29ubmVjdG9y
LT5iYXNlLmJhc2UuaWQpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgYWNvbm5lY3RvciwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGFjb25uZWN0b3ItPmJhc2UuYmFzZS5pZCk7Cj4KPiAgICAgICAgICAgICAgICAgICAgICAgICBy
ZXQgPSBkcm1fZHBfbXN0X3RvcG9sb2d5X21ncl9zZXRfbXN0KCZhY29ubmVjdG9yLT5tc3RfbWdy
LCB0cnVlKTsKPiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0IDwgMCkgewo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJETV9NU1Q6IEZhaWxlZCB0byBz
dGFydCBNU1RcbiIpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChzdHJ1Y3Qg
ZGNfbGluayAqKWFjb25uZWN0b3ItPmRjX2xpbmspLT50eXBlID0gZGNfY29ubmVjdGlvbl9zaW5n
bGU7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgfQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgYWNvbm5lY3Rvci0+ZGNfbGluay0+dHlwZSA9Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGRjX2Nvbm5lY3Rpb25fc2luZ2xlOwo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgfQo+ICsg
ICAgICAgICAgICAgICB9Cj4gICAgICAgICB9Cj4gKyAgICAgICBkcm1fY29ubmVjdG9yX2xpc3Rf
aXRlcl9lbmQoJml0ZXIpOwo+Cj4gLSAgICAgICBkcm1fbW9kZXNldF91bmxvY2soJmRldi0+bW9k
ZV9jb25maWcuY29ubmVjdGlvbl9tdXRleCk7Cj4gICAgICAgICByZXR1cm4gcmV0Owo+ICB9Cj4K
PiBAQCAtOTU0LDE0ICs5NTYsMTMgQEAgc3RhdGljIHZvaWQgczNfaGFuZGxlX21zdChzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2LCBib29sIHN1c3BlbmQpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBhbWRn
cHVfZG1fY29ubmVjdG9yICphY29ubmVjdG9yOwo+ICAgICAgICAgc3RydWN0IGRybV9jb25uZWN0
b3IgKmNvbm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRlciBp
dGVyOwo+ICAgICAgICAgc3RydWN0IGRybV9kcF9tc3RfdG9wb2xvZ3lfbWdyICptZ3I7Cj4gICAg
ICAgICBpbnQgcmV0Owo+ICAgICAgICAgYm9vbCBuZWVkX2hvdHBsdWcgPSBmYWxzZTsKPgo+IC0g
ICAgICAgZHJtX21vZGVzZXRfbG9jaygmZGV2LT5tb2RlX2NvbmZpZy5jb25uZWN0aW9uX211dGV4
LCBOVUxMKTsKPiAtCj4gLSAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5KGNvbm5lY3RvciwgJmRl
di0+bW9kZV9jb25maWcuY29ubmVjdG9yX2xpc3QsCj4gLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGhlYWQpIHsKPiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKGRldiwg
Jml0ZXIpOwo+ICsgICAgICAgZHJtX2Zvcl9lYWNoX2Nvbm5lY3Rvcl9pdGVyKGNvbm5lY3Rvciwg
Jml0ZXIpIHsKPiAgICAgICAgICAgICAgICAgYWNvbm5lY3RvciA9IHRvX2FtZGdwdV9kbV9jb25u
ZWN0b3IoY29ubmVjdG9yKTsKPiAgICAgICAgICAgICAgICAgaWYgKGFjb25uZWN0b3ItPmRjX2xp
bmstPnR5cGUgIT0gZGNfY29ubmVjdGlvbl9tc3RfYnJhbmNoIHx8Cj4gICAgICAgICAgICAgICAg
ICAgICBhY29ubmVjdG9yLT5tc3RfcG9ydCkKPiBAQCAtOTc5LDggKzk4MCw3IEBAIHN0YXRpYyB2
b2lkIHMzX2hhbmRsZV9tc3Qoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgYm9vbCBzdXNwZW5kKQo+
ICAgICAgICAgICAgICAgICAgICAgICAgIH0KPiAgICAgICAgICAgICAgICAgfQo+ICAgICAgICAg
fQo+IC0KPiAtICAgICAgIGRybV9tb2Rlc2V0X3VubG9jaygmZGV2LT5tb2RlX2NvbmZpZy5jb25u
ZWN0aW9uX211dGV4KTsKPiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmaXRl
cik7Cj4KPiAgICAgICAgIGlmIChuZWVkX2hvdHBsdWcpCj4gICAgICAgICAgICAgICAgIGRybV9r
bXNfaGVscGVyX2hvdHBsdWdfZXZlbnQoZGV2KTsKPiBAQCAtMTE2Miw2ICsxMTYyLDcgQEAgc3Rh
dGljIGludCBkbV9yZXN1bWUodm9pZCAqaGFuZGxlKQo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9k
aXNwbGF5X21hbmFnZXIgKmRtID0gJmFkZXYtPmRtOwo+ICAgICAgICAgc3RydWN0IGFtZGdwdV9k
bV9jb25uZWN0b3IgKmFjb25uZWN0b3I7Cj4gICAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAq
Y29ubmVjdG9yOwo+ICsgICAgICAgc3RydWN0IGRybV9jb25uZWN0b3JfbGlzdF9pdGVyIGl0ZXI7
Cj4gICAgICAgICBzdHJ1Y3QgZHJtX2NydGMgKmNydGM7Cj4gICAgICAgICBzdHJ1Y3QgZHJtX2Ny
dGNfc3RhdGUgKm5ld19jcnRjX3N0YXRlOwo+ICAgICAgICAgc3RydWN0IGRtX2NydGNfc3RhdGUg
KmRtX25ld19jcnRjX3N0YXRlOwo+IEBAIC0xMTk0LDcgKzExOTUsOCBAQCBzdGF0aWMgaW50IGRt
X3Jlc3VtZSh2b2lkICpoYW5kbGUpCj4gICAgICAgICBhbWRncHVfZG1faXJxX3Jlc3VtZV9lYXJs
eShhZGV2KTsKPgo+ICAgICAgICAgLyogRG8gZGV0ZWN0aW9uKi8KPiAtICAgICAgIGxpc3RfZm9y
X2VhY2hfZW50cnkoY29ubmVjdG9yLCAmZGRldi0+bW9kZV9jb25maWcuY29ubmVjdG9yX2xpc3Qs
IGhlYWQpIHsKPiArICAgICAgIGRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKGRkZXYsICZp
dGVyKTsKPiArICAgICAgIGRybV9mb3JfZWFjaF9jb25uZWN0b3JfaXRlcihjb25uZWN0b3IsICZp
dGVyKSB7Cj4gICAgICAgICAgICAgICAgIGFjb25uZWN0b3IgPSB0b19hbWRncHVfZG1fY29ubmVj
dG9yKGNvbm5lY3Rvcik7Cj4KPiAgICAgICAgICAgICAgICAgLyoKPiBAQCAtMTIyMiw2ICsxMjI0
LDcgQEAgc3RhdGljIGludCBkbV9yZXN1bWUodm9pZCAqaGFuZGxlKQo+ICAgICAgICAgICAgICAg
ICBhbWRncHVfZG1fdXBkYXRlX2Nvbm5lY3Rvcl9hZnRlcl9kZXRlY3QoYWNvbm5lY3Rvcik7Cj4g
ICAgICAgICAgICAgICAgIG11dGV4X3VubG9jaygmYWNvbm5lY3Rvci0+aHBkX2xvY2spOwo+ICAg
ICAgICAgfQo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZpdGVyKTsKPgo+
ICAgICAgICAgLyogRm9yY2UgbW9kZSBzZXQgaW4gYXRvbWljIGNvbW1pdCAqLwo+ICAgICAgICAg
Zm9yX2VhY2hfbmV3X2NydGNfaW5fc3RhdGUoZG0tPmNhY2hlZF9zdGF0ZSwgY3J0YywgbmV3X2Ny
dGNfc3RhdGUsIGkpCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9h
bWRncHVfZG0vYW1kZ3B1X2RtX2lycS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2Ft
ZGdwdV9kbS9hbWRncHVfZG1faXJxLmMKPiBpbmRleCBmYTVkNTAzZDM3OWMuLjY0NDQ1YzRjYzRj
MiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2Ft
ZGdwdV9kbV9pcnEuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVf
ZG0vYW1kZ3B1X2RtX2lycS5jCj4gQEAgLTczMiw4ICs3MzIsMTAgQEAgdm9pZCBhbWRncHVfZG1f
aHBkX2luaXQoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYpCj4gIHsKPiAgICAgICAgIHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYgPSBhZGV2LT5kZGV2Owo+ICAgICAgICAgc3RydWN0IGRybV9jb25u
ZWN0b3IgKmNvbm5lY3RvcjsKPiArICAgICAgIHN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRl
ciBpdGVyOwo+Cj4gLSAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5KGNvbm5lY3RvciwgJmRldi0+
bW9kZV9jb25maWcuY29ubmVjdG9yX2xpc3QsIGhlYWQpIHsKPiArICAgICAgIGRybV9jb25uZWN0
b3JfbGlzdF9pdGVyX2JlZ2luKGRldiwgJml0ZXIpOwo+ICsgICAgICAgZHJtX2Zvcl9lYWNoX2Nv
bm5lY3Rvcl9pdGVyKGNvbm5lY3RvciwgJml0ZXIpIHsKPiAgICAgICAgICAgICAgICAgc3RydWN0
IGFtZGdwdV9kbV9jb25uZWN0b3IgKmFtZGdwdV9kbV9jb25uZWN0b3IgPQo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdG9fYW1kZ3B1X2RtX2Nvbm5lY3Rvcihjb25uZWN0b3IpOwo+
Cj4gQEAgLTc1MSw2ICs3NTMsNyBAQCB2b2lkIGFtZGdwdV9kbV9ocGRfaW5pdChzdHJ1Y3QgYW1k
Z3B1X2RldmljZSAqYWRldikKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdHJ1ZSk7Cj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPiArICAgICAgIGRybV9j
b25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4gIH0KPgo+ICAvKioKPiBAQCAtNzY1LDgg
Kzc2OCwxMCBAQCB2b2lkIGFtZGdwdV9kbV9ocGRfZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAq
YWRldikKPiAgewo+ICAgICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGFkZXYtPmRkZXY7
Cj4gICAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yOwo+ICsgICAgICAgc3Ry
dWN0IGRybV9jb25uZWN0b3JfbGlzdF9pdGVyIGl0ZXI7Cj4KPiAtICAgICAgIGxpc3RfZm9yX2Vh
Y2hfZW50cnkoY29ubmVjdG9yLCAmZGV2LT5tb2RlX2NvbmZpZy5jb25uZWN0b3JfbGlzdCwgaGVh
ZCkgewo+ICsgICAgICAgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4oZGV2LCAmaXRlcik7
Cj4gKyAgICAgICBkcm1fZm9yX2VhY2hfY29ubmVjdG9yX2l0ZXIoY29ubmVjdG9yLCAmaXRlcikg
ewo+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RtX2Nvbm5lY3RvciAqYW1kZ3B1X2Rt
X2Nvbm5lY3RvciA9Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b19hbWRncHVf
ZG1fY29ubmVjdG9yKGNvbm5lY3Rvcik7Cj4gICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBk
Y19saW5rICpkY19saW5rID0gYW1kZ3B1X2RtX2Nvbm5lY3Rvci0+ZGNfbGluazsKPiBAQCAtNzc5
LDQgKzc4NCw1IEBAIHZvaWQgYW1kZ3B1X2RtX2hwZF9maW5pKHN0cnVjdCBhbWRncHVfZGV2aWNl
ICphZGV2KQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSk7
Cj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPiArICAgICAgIGRybV9jb25uZWN0b3Jf
bGlzdF9pdGVyX2VuZCgmaXRlcik7Cj4gIH0KPiAtLQo+IDIuMjEuMAo+Cj4gX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBhbWQtZ2Z4IG1haWxpbmcgbGlz
dAo+IGFtZC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9hbWQtZ2Z4Cl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
