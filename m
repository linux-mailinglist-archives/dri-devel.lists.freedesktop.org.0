Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 15FA888607
	for <lists+dri-devel@lfdr.de>; Sat, 10 Aug 2019 00:28:22 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9EABA6EF0C;
	Fri,  9 Aug 2019 22:27:33 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga11.intel.com (mga11.intel.com [192.55.52.93])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 65DC46EF33;
 Fri,  9 Aug 2019 22:27:32 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga007.fm.intel.com ([10.253.24.52])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Aug 2019 15:27:32 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,366,1559545200"; d="scan'208";a="176927125"
Received: from jmath3-mobl1.ger.corp.intel.com (HELO
 mwahaha-bdw.ger.corp.intel.com) ([10.252.5.86])
 by fmsmga007.fm.intel.com with ESMTP; 09 Aug 2019 15:27:30 -0700
From: Matthew Auld <matthew.auld@intel.com>
To: intel-gfx@lists.freedesktop.org
Subject: [PATCH v3 33/37] drm/i915: cpu-map based dumb buffers
Date: Fri,  9 Aug 2019 23:26:39 +0100
Message-Id: <20190809222643.23142-34-matthew.auld@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190809222643.23142-1-matthew.auld@intel.com>
References: <20190809222643.23142-1-matthew.auld@intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>,
 Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
 Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>,
 dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogQWJkaWVsIEphbnVsZ3VlIDxhYmRpZWwuamFudWxndWVAbGludXguaW50ZWwuY29tPgoK
SWYgdGhlcmUgaXMgbm8gYXBlcnR1cmUgd2UgY2FuJ3QgdXNlIG1hcF9ndHQgdG8gbWFwIGR1bWIg
YnVmZmVycywgc28gd2UKbmVlZCBhIGNwdS1tYXAgYmFzZWQgcGF0aCB0byBkbyBpdC4gV2UgcHJl
ZmVyIG1hcF9ndHQgb24gcGxhdGZvcm1zIHRoYXQKZG8gaGF2ZSBhcGVydHVyZS4KClNpZ25lZC1v
ZmYtYnk6IEFiZGllbCBKYW51bGd1ZSA8YWJkaWVsLmphbnVsZ3VlQGxpbnV4LmludGVsLmNvbT4K
Q2M6IERhbmllbGUgQ2VyYW9sbyBTcHVyaW8gPGRhbmllbGUuY2VyYW9sb3NwdXJpb0BpbnRlbC5j
b20+CkNjOiBUdnJ0a28gVXJzdWxpbiA8dHZydGtvLnVyc3VsaW5AbGludXguaW50ZWwuY29tPgpD
YzogTWF0dGhldyBBdWxkIDxtYXR0aGV3LmF1bGRAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmMgICAgICAgfCAxOCArKysrKysrKysrKysrKysr
Ky0KIC4uLi9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdF90eXBlcy5oICAgfCAgMSAr
CiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jICAgICAgICAgICAgICAgIHwgIDIgKy0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmggICAgICAgICAgICAgICAgfCAgMiArLQog
NCBmaWxlcyBjaGFuZ2VkLCAyMCBpbnNlcnRpb25zKCspLCAzIGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fbW1hbi5jCmluZGV4IDMwNGVhNTc4ZmQzMC4uNGZl
ODNlMzFjMWIzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
bW1hbi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9tbWFuLmMKQEAg
LTUwMCw3ICs1MDAsOCBAQCBzdGF0aWMgdm9pZCBpOTE1X2dlbV9vYmplY3RfcmVsZWFzZV9tbWFw
X29mZnNldChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogCWxpc3RfZm9yX2VhY2hf
ZW50cnkobW1vLCAmb2JqLT5tbWFwX29mZnNldHMsIG9mZnNldCkgewogCQlpZiAobW1vLT5tbWFw
X3R5cGUgPT0gSTkxNV9NTUFQX1RZUEVfT0ZGU0VUX1dDIHx8CiAJCSAgICBtbW8tPm1tYXBfdHlw
ZSA9PSBJOTE1X01NQVBfVFlQRV9PRkZTRVRfV0IgfHwKLQkJICAgIG1tby0+bW1hcF90eXBlID09
IEk5MTVfTU1BUF9UWVBFX09GRlNFVF9VQykKKwkJICAgIG1tby0+bW1hcF90eXBlID09IEk5MTVf
TU1BUF9UWVBFX09GRlNFVF9VQyB8fAorCQkgICAgbW1vLT5tbWFwX3R5cGUgPT0gSTkxNV9NTUFQ
X1RZUEVfRFVNQl9XQykKIAkJCWRybV92bWFfbm9kZV91bm1hcCgmbW1vLT52bWFfbm9kZSwKIAkJ
CQkJICAgb2JqLT5iYXNlLmRldi0+YW5vbl9pbm9kZS0+aV9tYXBwaW5nKTsKIAl9CkBAIC02MDIs
NiArNjAzLDE5IEBAIF9fYXNzaWduX2dlbV9vYmplY3RfbW1hcF9kYXRhKHN0cnVjdCBkcm1fZmls
ZSAqZmlsZSwKIAlyZXR1cm4gcmV0OwogfQogCitpbnQKK2k5MTVfZ2VtX21tYXBfZHVtYihzdHJ1
Y3QgZHJtX2ZpbGUgKmZpbGUsCisJCSAgc3RydWN0IGRybV9kZXZpY2UgKmRldiwKKwkJICB1MzIg
aGFuZGxlLAorCQkgIHU2NCAqb2Zmc2V0KQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpp
OTE1ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwllbnVtIGk5MTVfbW1hcF90eXBlIG1tYXBfdHlwZSA9
IEhBU19NQVBQQUJMRV9BUEVSVFVSRShpOTE1KSA/CisJCUk5MTVfTU1BUF9UWVBFX0dUVCA6IEk5
MTVfTU1BUF9UWVBFX0RVTUJfV0M7CisKKwlyZXR1cm4gX19hc3NpZ25fZ2VtX29iamVjdF9tbWFw
X2RhdGEoZmlsZSwgaGFuZGxlLCBtbWFwX3R5cGUsIG9mZnNldCk7Cit9CisKIC8qKgogICogaTkx
NV9nZW1fbW1hcF9ndHRfaW9jdGwgLSBwcmVwYXJlIGFuIG9iamVjdCBmb3IgR1RUIG1tYXAnaW5n
CiAgKiBAZGV2OiBEUk0gZGV2aWNlCkBAIC03MTQsNiArNzI4LDcgQEAgc3RhdGljIHZvaWQgc2V0
X3ZtZGF0YV9tbWFwX29mZnNldChzdHJ1Y3QgaTkxNV9tbWFwX29mZnNldCAqbW1vLCBzdHJ1Y3Qg
dm1fYXJlYV8KIHsKIAlzd2l0Y2ggKG1tby0+bW1hcF90eXBlKSB7CiAJY2FzZSBJOTE1X01NQVBf
VFlQRV9PRkZTRVRfV0M6CisJY2FzZSBJOTE1X01NQVBfVFlQRV9EVU1CX1dDOgogCQl2bWEtPnZt
X3BhZ2VfcHJvdCA9CiAJCQlwZ3Byb3Rfd3JpdGVjb21iaW5lKHZtX2dldF9wYWdlX3Byb3Qodm1h
LT52bV9mbGFncykpOwogCQlicmVhazsKQEAgLTgwMSw2ICs4MTYsNyBAQCBpbnQgaTkxNV9nZW1f
bW1hcChzdHJ1Y3QgZmlsZSAqZmlscCwgc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEpCiAJY2Fz
ZSBJOTE1X01NQVBfVFlQRV9PRkZTRVRfV0M6CiAJY2FzZSBJOTE1X01NQVBfVFlQRV9PRkZTRVRf
V0I6CiAJY2FzZSBJOTE1X01NQVBfVFlQRV9PRkZTRVRfVUM6CisJY2FzZSBJOTE1X01NQVBfVFlQ
RV9EVU1CX1dDOgogCQlzZXRfdm1kYXRhX21tYXBfb2Zmc2V0KG1tbywgdm1hKTsKIAkJYnJlYWs7
CiAJY2FzZSBJOTE1X01NQVBfVFlQRV9HVFQ6CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fb2JqZWN0X3R5cGVzLmgKaW5kZXggNGVhNzhkM2M5MmE5Li5kMjgwMjY3Njg5
ZjkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3Rf
dHlwZXMuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0X3R5
cGVzLmgKQEAgLTY3LDYgKzY3LDcgQEAgZW51bSBpOTE1X21tYXBfdHlwZSB7CiAJSTkxNV9NTUFQ
X1RZUEVfT0ZGU0VUX1dDLAogCUk5MTVfTU1BUF9UWVBFX09GRlNFVF9XQiwKIAlJOTE1X01NQVBf
VFlQRV9PRkZTRVRfVUMsCisJSTkxNV9NTUFQX1RZUEVfRFVNQl9XQywKIH07CiAKIHN0cnVjdCBp
OTE1X21tYXBfb2Zmc2V0IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCmluZGV4IGNmMzkwMDkyYzky
Ny4uZjZhM2RhZjY5NmY2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKQEAgLTI3NjIsNyArMjc2
Miw3IEBAIHN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBkcml2ZXIgPSB7CiAJLmdldF9zY2Fub3V0
X3Bvc2l0aW9uID0gaTkxNV9nZXRfY3J0Y19zY2Fub3V0cG9zLAogCiAJLmR1bWJfY3JlYXRlID0g
aTkxNV9nZW1fZHVtYl9jcmVhdGUsCi0JLmR1bWJfbWFwX29mZnNldCA9IGk5MTVfZ2VtX21tYXBf
Z3R0LAorCS5kdW1iX21hcF9vZmZzZXQgPSBpOTE1X2dlbV9tbWFwX2R1bWIsCiAJLmlvY3RscyA9
IGk5MTVfaW9jdGxzLAogCS5udW1faW9jdGxzID0gQVJSQVlfU0laRShpOTE1X2lvY3RscyksCiAJ
LmZvcHMgPSAmaTkxNV9kcml2ZXJfZm9wcywKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCmluZGV4IDVh
NWI5MDY3MGUxNi4uZjkzZjU1OTQ3YjdjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pOTE1X2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmgKQEAgLTIz
NjMsNyArMjM2Myw3IEBAIGk5MTVfbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYpCiBpbnQgaTkxNV9nZW1fZHVtYl9jcmVhdGUoc3RydWN0IGRybV9maWxlICpm
aWxlX3ByaXYsCiAJCQkgc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJCSBzdHJ1Y3QgZHJtX21v
ZGVfY3JlYXRlX2R1bWIgKmFyZ3MpOwotaW50IGk5MTVfZ2VtX21tYXBfZ3R0KHN0cnVjdCBkcm1f
ZmlsZSAqZmlsZV9wcml2LCBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAoraW50IGk5MTVfZ2VtX21t
YXBfZHVtYihzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwgc3RydWN0IGRybV9kZXZpY2UgKmRl
diwKIAkJICAgICAgdTMyIGhhbmRsZSwgdTY0ICpvZmZzZXQpOwogaW50IGk5MTVfZ2VtX21tYXBf
Z3R0X3ZlcnNpb24odm9pZCk7CiAKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vZHJpLWRldmVs
