Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1347BEA954
	for <lists+dri-devel@lfdr.de>; Thu, 31 Oct 2019 03:48:50 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 57DF16EBD4;
	Thu, 31 Oct 2019 02:48:47 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mailgw02.mediatek.com (unknown [210.61.82.184])
 by gabe.freedesktop.org (Postfix) with ESMTP id 4944A6EBD4
 for <dri-devel@lists.freedesktop.org>; Thu, 31 Oct 2019 02:48:45 +0000 (UTC)
X-UUID: 73f37871da3a4a5d8d0b7ea738fbc564-20191031
X-UUID: 73f37871da3a4a5d8d0b7ea738fbc564-20191031
Received: from mtkexhb01.mediatek.inc [(172.21.101.102)] by
 mailgw02.mediatek.com (envelope-from <ck.hu@mediatek.com>)
 (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
 with ESMTP id 870159390; Thu, 31 Oct 2019 10:48:41 +0800
Received: from mtkcas07.mediatek.inc (172.21.101.84) by
 mtkmbs08n1.mediatek.inc (172.21.101.55) with Microsoft SMTP Server (TLS) id
 15.0.1395.4; Thu, 31 Oct 2019 10:48:38 +0800
Received: from [172.21.77.4] (172.21.77.4) by mtkcas07.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1395.4 via Frontend
 Transport; Thu, 31 Oct 2019 10:48:38 +0800
Message-ID: <1572490120.25108.5.camel@mtksdaap41>
Subject: Re: [PATCH v2] drm/mediatek: support CMDQ interface in ddp component
From: CK Hu <ck.hu@mediatek.com>
To: Bibby Hsieh <bibby.hsieh@mediatek.com>
Date: Thu, 31 Oct 2019 10:48:40 +0800
In-Reply-To: <20191025053843.16808-3-bibby.hsieh@mediatek.com>
References: <20191025053843.16808-1-bibby.hsieh@mediatek.com>
 <20191025053843.16808-3-bibby.hsieh@mediatek.com>
X-Mailer: Evolution 3.10.4-0ubuntu2 
MIME-Version: 1.0
X-MTK: N
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: drinkcat@chromium.org, Yongqiang Niu <yongqiang.niu@mediatek.com>,
 srv_heupstream@mediatek.com, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel.vetter@ffwll.ch>, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, tfiga@chromium.org,
 Thierry Reding <thierry.reding@gmail.com>, linux-mediatek@lists.infradead.org,
 Matthias Brugger <matthias.bgg@gmail.com>,
 linux-arm-kernel@lists.infradead.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGksIEJpYmJ5OgoKT24gRnJpLCAyMDE5LTEwLTI1IGF0IDEzOjM4ICswODAwLCBCaWJieSBIc2ll
aCB3cm90ZToKPiBUaGUgQ01EUSAoQ29tbWFuZCBRdWV1ZSkgaW4gTVQ4MTgzIGlzIHVzZWQgdG8g
aGVscAo+IHVwZGF0ZSBhbGwgcmVsZXZhbnQgZGlzcGxheSBjb250cm9sbGVyIHJlZ2lzdGVycwo+
IHdpdGggY3JpdGljYWwgdGltZSBsaW1hdGlvbi4KPiBUaGlzIHBhdGNoIGFkZCBjbWRxIGludGVy
ZmFjZSBpbiBkZHBfY29tcCBpbnRlcmZhY2UsCj4gbGV0IGFsbCBkZHBfY29tcCBpbnRlcmZhY2Ug
Y2FuIHN1cHBvcnQgY3B1L2NtZHEgZnVuY3Rpb24KPiBhdCB0aGUgc2FtZSB0aW1lLgoKUGxlYXNl
IGFsc28gc2VuZCB0aGUgcGF0Y2ggd2hpY2ggdXNlIGNtZHEgaW50ZXJmYWNlIHNvIHRoYXQgSSBj
b3VsZApyZXZpZXcgdGhpcyBpbnRlcmZhY2UgbW9yZSBjb21wbGV0ZWx5LgoKUmVnYXJkcywKQ0sK
Cj4gCj4gVGhpcyBwYXRjaCBkZXBlbmRzIG9uIHB0YWNoOgo+IGFkZCBkcm0gc3VwcG9ydCBmb3Ig
TVQ4MTgzCj4gKGh0dHBzOi8vcGF0Y2h3b3JrLmtlcm5lbC5vcmcvY292ZXIvMTExMjE1MTkvKQo+
IHN1cHBvcnQgZ2NlIG9uIG10ODE4MyBwbGF0Zm9ybQo+IChodHRwczovL3BhdGNod29yay5rZXJu
ZWwub3JnL2NvdmVyLzExMjA4MzE1LykKPiAKPiBDaGFuZ2VzIHNpbmNlIHYxOgo+ICAtIHJlbW92
ZSB1bm5lY2Vzc2FyeSBjaGFuZ2UKPiAgLSBmaXh1cCBpbmRlbnQKPiAKPiBTaWduZWQtb2ZmLWJ5
OiBZVCBTaGVuIDx5dC5zaGVuQG1lZGlhdGVrLmNvbT4KPiBTaWduZWQtb2ZmLWJ5OiBDSyBIdSA8
Y2suaHVAbWVkaWF0ZWsuY29tPgo+IFNpZ25lZC1vZmYtYnk6IFBoaWxpcHAgWmFiZWwgPHAuemFi
ZWxAcGVuZ3V0cm9uaXguZGU+Cj4gU2lnbmVkLW9mZi1ieTogQmliYnkgSHNpZWggPGJpYmJ5Lmhz
aWVoQG1lZGlhdGVrLmNvbT4KPiBTaWduZWQtb2ZmLWJ5OiBZb25ncWlhbmcgTml1IDx5b25ncWlh
bmcubml1QG1lZGlhdGVrLmNvbT4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210
a19kaXNwX2NvbG9yLmMgICB8ICAgNyArLQo+ICBkcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRr
X2Rpc3Bfb3ZsLmMgICAgIHwgIDY1ICsrKysrLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9tZWRp
YXRlay9tdGtfZGlzcF9yZG1hLmMgICAgfCAgNDMgKysrKy0tLS0KPiAgZHJpdmVycy9ncHUvZHJt
L21lZGlhdGVrL210a19kcm1fZGRwX2NvbXAuYyB8IDExNCArKysrKysrKysrKysrLS0tLS0tLQo+
ICBkcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kZHBfY29tcC5oIHwgIDUzICsrKysr
LS0tLQo+ICA1IGZpbGVzIGNoYW5nZWQsIDE3NiBpbnNlcnRpb25zKCspLCAxMDYgZGVsZXRpb25z
KC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZGlzcF9j
b2xvci5jIGIvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kaXNwX2NvbG9yLmMKPiBpbmRl
eCA1OWRlMmE0NmFhNDkuLjZmYjBkNjk4M2E0YSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vbWVkaWF0ZWsvbXRrX2Rpc3BfY29sb3IuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9tZWRp
YXRlay9tdGtfZGlzcF9jb2xvci5jCj4gQEAgLTksNiArOSw3IEBACj4gICNpbmNsdWRlIDxsaW51
eC9vZl9kZXZpY2UuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L29mX2lycS5oPgo+ICAjaW5jbHVkZSA8
bGludXgvcGxhdGZvcm1fZGV2aWNlLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9zb2MvbWVkaWF0ZWsv
bXRrLWNtZHEuaD4KPiAgCj4gICNpbmNsdWRlICJtdGtfZHJtX2NydGMuaCIKPiAgI2luY2x1ZGUg
Im10a19kcm1fZGRwX2NvbXAuaCIKPiBAQCAtNDUsMTIgKzQ2LDEyIEBAIHN0YXRpYyBpbmxpbmUg
c3RydWN0IG10a19kaXNwX2NvbG9yICpjb21wX3RvX2NvbG9yKHN0cnVjdCBtdGtfZGRwX2NvbXAg
KmNvbXApCj4gIAo+ICBzdGF0aWMgdm9pZCBtdGtfY29sb3JfY29uZmlnKHN0cnVjdCBtdGtfZGRw
X2NvbXAgKmNvbXAsIHVuc2lnbmVkIGludCB3LAo+ICAJCQkgICAgIHVuc2lnbmVkIGludCBoLCB1
bnNpZ25lZCBpbnQgdnJlZnJlc2gsCj4gLQkJCSAgICAgdW5zaWduZWQgaW50IGJwYykKPiArCQkJ
ICAgICB1bnNpZ25lZCBpbnQgYnBjLCBzdHJ1Y3QgY21kcV9wa3QgKmNtZHFfcGt0KQo+ICB7Cj4g
IAlzdHJ1Y3QgbXRrX2Rpc3BfY29sb3IgKmNvbG9yID0gY29tcF90b19jb2xvcihjb21wKTsKPiAg
Cj4gLQl3cml0ZWwodywgY29tcC0+cmVncyArIERJU1BfQ09MT1JfV0lEVEgoY29sb3IpKTsKPiAt
CXdyaXRlbChoLCBjb21wLT5yZWdzICsgRElTUF9DT0xPUl9IRUlHSFQoY29sb3IpKTsKPiArCW10
a19kZHBfd3JpdGUoY21kcV9wa3QsIHcsIGNvbXAsIERJU1BfQ09MT1JfV0lEVEgoY29sb3IpKTsK
PiArCW10a19kZHBfd3JpdGUoY21kcV9wa3QsIGgsIGNvbXAsIERJU1BfQ09MT1JfSEVJR0hUKGNv
bG9yKSk7Cj4gIH0KPiAgCj4gIHN0YXRpYyB2b2lkIG10a19jb2xvcl9zdGFydChzdHJ1Y3QgbXRr
X2RkcF9jb21wICpjb21wKQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsv
bXRrX2Rpc3Bfb3ZsLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2Rpc3Bfb3ZsLmMK
PiBpbmRleCBkMTFjMjBmMjEyZTUuLjFhMWI1MGY0ZTlhYyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2Rpc3Bfb3ZsLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
bWVkaWF0ZWsvbXRrX2Rpc3Bfb3ZsLmMKPiBAQCAtMTAsNiArMTAsNyBAQAo+ICAjaW5jbHVkZSA8
bGludXgvb2ZfaXJxLmg+Cj4gICNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kZXZpY2UuaD4KPiAg
I2luY2x1ZGUgPGxpbnV4L3BtX3J1bnRpbWUuaD4KPiArI2luY2x1ZGUgPGxpbnV4L3NvYy9tZWRp
YXRlay9tdGstY21kcS5oPgo+ICAKPiAgI2luY2x1ZGUgIm10a19kcm1fY3J0Yy5oIgo+ICAjaW5j
bHVkZSAibXRrX2RybV9kZHBfY29tcC5oIgo+IEBAIC0xMjEsMTQgKzEyMiwxNSBAQCBzdGF0aWMg
dm9pZCBtdGtfb3ZsX3N0b3Aoc3RydWN0IG10a19kZHBfY29tcCAqY29tcCkKPiAgCj4gIHN0YXRp
YyB2b2lkIG10a19vdmxfY29uZmlnKHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXAsIHVuc2lnbmVk
IGludCB3LAo+ICAJCQkgICB1bnNpZ25lZCBpbnQgaCwgdW5zaWduZWQgaW50IHZyZWZyZXNoLAo+
IC0JCQkgICB1bnNpZ25lZCBpbnQgYnBjKQo+ICsJCQkgICB1bnNpZ25lZCBpbnQgYnBjLCBzdHJ1
Y3QgY21kcV9wa3QgKmNtZHFfcGt0KQo+ICB7Cj4gIAlpZiAodyAhPSAwICYmIGggIT0gMCkKPiAt
CQl3cml0ZWxfcmVsYXhlZChoIDw8IDE2IHwgdywgY29tcC0+cmVncyArIERJU1BfUkVHX09WTF9S
T0lfU0laRSk7Cj4gLQl3cml0ZWxfcmVsYXhlZCgweDAsIGNvbXAtPnJlZ3MgKyBESVNQX1JFR19P
VkxfUk9JX0JHQ0xSKTsKPiArCQltdGtfZGRwX3dyaXRlX3JlbGF4ZWQoY21kcV9wa3QsIGggPDwg
MTYgfCB3LCBjb21wLAo+ICsJCQkJICAgICAgRElTUF9SRUdfT1ZMX1JPSV9TSVpFKTsKPiArCW10
a19kZHBfd3JpdGVfcmVsYXhlZChjbWRxX3BrdCwgMHgwLCBjb21wLCBESVNQX1JFR19PVkxfUk9J
X0JHQ0xSKTsKPiAgCj4gLQl3cml0ZWwoMHgxLCBjb21wLT5yZWdzICsgRElTUF9SRUdfT1ZMX1JT
VCk7Cj4gLQl3cml0ZWwoMHgwLCBjb21wLT5yZWdzICsgRElTUF9SRUdfT1ZMX1JTVCk7Cj4gKwlt
dGtfZGRwX3dyaXRlKGNtZHFfcGt0LCAweDEsIGNvbXAsIERJU1BfUkVHX09WTF9SU1QpOwo+ICsJ
bXRrX2RkcF93cml0ZShjbWRxX3BrdCwgMHgwLCBjb21wLCBESVNQX1JFR19PVkxfUlNUKTsKPiAg
fQo+ICAKPiAgc3RhdGljIHVuc2lnbmVkIGludCBtdGtfb3ZsX2xheWVyX25yKHN0cnVjdCBtdGtf
ZGRwX2NvbXAgKmNvbXApCj4gQEAgLTEzOCwxNiArMTQwLDE2IEBAIHN0YXRpYyB1bnNpZ25lZCBp
bnQgbXRrX292bF9sYXllcl9ucihzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wKQo+ICAJcmV0dXJu
IG92bC0+ZGF0YS0+bGF5ZXJfbnI7Cj4gIH0KPiAgCj4gLXN0YXRpYyB2b2lkIG10a19vdmxfbGF5
ZXJfb24oc3RydWN0IG10a19kZHBfY29tcCAqY29tcCwgdW5zaWduZWQgaW50IGlkeCkKPiArc3Rh
dGljIHZvaWQgbXRrX292bF9sYXllcl9vbihzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wLCB1bnNp
Z25lZCBpbnQgaWR4LAo+ICsJCQkgICAgIHN0cnVjdCBjbWRxX3BrdCAqY21kcV9wa3QpCj4gIHsK
PiAtCXVuc2lnbmVkIGludCByZWc7Cj4gIAl1bnNpZ25lZCBpbnQgZ21jX3RocnNoZF9sOwo+ICAJ
dW5zaWduZWQgaW50IGdtY190aHJzaGRfaDsKPiAgCXVuc2lnbmVkIGludCBnbWNfdmFsdWU7Cj4g
IAlzdHJ1Y3QgbXRrX2Rpc3Bfb3ZsICpvdmwgPSBjb21wX3RvX292bChjb21wKTsKPiAgCj4gLQl3
cml0ZWwoMHgxLCBjb21wLT5yZWdzICsgRElTUF9SRUdfT1ZMX1JETUFfQ1RSTChpZHgpKTsKPiAt
Cj4gKwltdGtfZGRwX3dyaXRlKGNtZHFfcGt0LCAweDEsIGNvbXAsCj4gKwkJICAgICAgRElTUF9S
RUdfT1ZMX1JETUFfQ1RSTChpZHgpKTsKPiAgCWdtY190aHJzaGRfbCA9IEdNQ19USFJFU0hPTERf
TE9XID4+Cj4gIAkJICAgICAgKEdNQ19USFJFU0hPTERfQklUUyAtIG92bC0+ZGF0YS0+Z21jX2Jp
dHMpOwo+ICAJZ21jX3RocnNoZF9oID0gR01DX1RIUkVTSE9MRF9ISUdIID4+Cj4gQEAgLTE1Nywy
MiArMTU5LDE5IEBAIHN0YXRpYyB2b2lkIG10a19vdmxfbGF5ZXJfb24oc3RydWN0IG10a19kZHBf
Y29tcCAqY29tcCwgdW5zaWduZWQgaW50IGlkeCkKPiAgCWVsc2UKPiAgCQlnbWNfdmFsdWUgPSBn
bWNfdGhyc2hkX2wgfCBnbWNfdGhyc2hkX2wgPDwgOCB8Cj4gIAkJCSAgICBnbWNfdGhyc2hkX2gg
PDwgMTYgfCBnbWNfdGhyc2hkX2ggPDwgMjQ7Cj4gLQl3cml0ZWwoZ21jX3ZhbHVlLCBjb21wLT5y
ZWdzICsgRElTUF9SRUdfT1ZMX1JETUFfR01DKGlkeCkpOwo+IC0KPiAtCXJlZyA9IHJlYWRsKGNv
bXAtPnJlZ3MgKyBESVNQX1JFR19PVkxfU1JDX0NPTik7Cj4gLQlyZWcgPSByZWcgfCBCSVQoaWR4
KTsKPiAtCXdyaXRlbChyZWcsIGNvbXAtPnJlZ3MgKyBESVNQX1JFR19PVkxfU1JDX0NPTik7Cj4g
KwltdGtfZGRwX3dyaXRlKGNtZHFfcGt0LCBnbWNfdmFsdWUsCj4gKwkJICAgICAgY29tcCwgRElT
UF9SRUdfT1ZMX1JETUFfR01DKGlkeCkpOwo+ICsJbXRrX2RkcF93cml0ZV9tYXNrKGNtZHFfcGt0
LCBCSVQoaWR4KSwgY29tcCwKPiArCQkJICAgRElTUF9SRUdfT1ZMX1NSQ19DT04sIEJJVChpZHgp
KTsKPiAgfQo+ICAKPiAtc3RhdGljIHZvaWQgbXRrX292bF9sYXllcl9vZmYoc3RydWN0IG10a19k
ZHBfY29tcCAqY29tcCwgdW5zaWduZWQgaW50IGlkeCkKPiArc3RhdGljIHZvaWQgbXRrX292bF9s
YXllcl9vZmYoc3RydWN0IG10a19kZHBfY29tcCAqY29tcCwgdW5zaWduZWQgaW50IGlkeCwKPiAr
CQkJICAgICAgc3RydWN0IGNtZHFfcGt0ICpjbWRxX3BrdCkKPiAgewo+IC0JdW5zaWduZWQgaW50
IHJlZzsKPiAtCj4gLQlyZWcgPSByZWFkbChjb21wLT5yZWdzICsgRElTUF9SRUdfT1ZMX1NSQ19D
T04pOwo+IC0JcmVnID0gcmVnICYgfkJJVChpZHgpOwo+IC0Jd3JpdGVsKHJlZywgY29tcC0+cmVn
cyArIERJU1BfUkVHX09WTF9TUkNfQ09OKTsKPiAtCj4gLQl3cml0ZWwoMHgwLCBjb21wLT5yZWdz
ICsgRElTUF9SRUdfT1ZMX1JETUFfQ1RSTChpZHgpKTsKPiArCW10a19kZHBfd3JpdGVfbWFzayhj
bWRxX3BrdCwgMCwgY29tcCwKPiArCQkJICAgRElTUF9SRUdfT1ZMX1NSQ19DT04sIEJJVChpZHgp
KTsKPiArCW10a19kZHBfd3JpdGUoY21kcV9wa3QsIDAsIGNvbXAsCj4gKwkJICAgICAgRElTUF9S
RUdfT1ZMX1JETUFfQ1RSTChpZHgpKTsKPiAgfQo+ICAKPiAgc3RhdGljIHVuc2lnbmVkIGludCBv
dmxfZm10X2NvbnZlcnQoc3RydWN0IG10a19kaXNwX292bCAqb3ZsLCB1bnNpZ25lZCBpbnQgZm10
KQo+IEBAIC0yMTIsNyArMjExLDggQEAgc3RhdGljIHVuc2lnbmVkIGludCBvdmxfZm10X2NvbnZl
cnQoc3RydWN0IG10a19kaXNwX292bCAqb3ZsLCB1bnNpZ25lZCBpbnQgZm10KQo+ICB9Cj4gIAo+
ICBzdGF0aWMgdm9pZCBtdGtfb3ZsX2xheWVyX2NvbmZpZyhzdHJ1Y3QgbXRrX2RkcF9jb21wICpj
b21wLCB1bnNpZ25lZCBpbnQgaWR4LAo+IC0JCQkJIHN0cnVjdCBtdGtfcGxhbmVfc3RhdGUgKnN0
YXRlKQo+ICsJCQkJIHN0cnVjdCBtdGtfcGxhbmVfc3RhdGUgKnN0YXRlLAo+ICsJCQkJIHN0cnVj
dCBjbWRxX3BrdCAqY21kcV9wa3QpCj4gIHsKPiAgCXN0cnVjdCBtdGtfZGlzcF9vdmwgKm92bCA9
IGNvbXBfdG9fb3ZsKGNvbXApOwo+ICAJc3RydWN0IG10a19wbGFuZV9wZW5kaW5nX3N0YXRlICpw
ZW5kaW5nID0gJnN0YXRlLT5wZW5kaW5nOwo+IEBAIC0yMjQsMjAgKzIyNCwyNSBAQCBzdGF0aWMg
dm9pZCBtdGtfb3ZsX2xheWVyX2NvbmZpZyhzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wLCB1bnNp
Z25lZCBpbnQgaWR4LAo+ICAJdW5zaWduZWQgaW50IGNvbjsKPiAgCj4gIAlpZiAoIXBlbmRpbmct
PmVuYWJsZSkKPiAtCQltdGtfb3ZsX2xheWVyX29mZihjb21wLCBpZHgpOwo+ICsJCW10a19vdmxf
bGF5ZXJfb2ZmKGNvbXAsIGlkeCwgY21kcV9wa3QpOwo+ICAKPiAgCWNvbiA9IG92bF9mbXRfY29u
dmVydChvdmwsIGZtdCk7Cj4gIAlpZiAoaWR4ICE9IDApCj4gIAkJY29uIHw9IE9WTF9DT05fQUVO
IHwgT1ZMX0NPTl9BTFBIQTsKPiAgCj4gLQl3cml0ZWxfcmVsYXhlZChjb24sIGNvbXAtPnJlZ3Mg
KyBESVNQX1JFR19PVkxfQ09OKGlkeCkpOwo+IC0Jd3JpdGVsX3JlbGF4ZWQocGl0Y2gsIGNvbXAt
PnJlZ3MgKyBESVNQX1JFR19PVkxfUElUQ0goaWR4KSk7Cj4gLQl3cml0ZWxfcmVsYXhlZChzcmNf
c2l6ZSwgY29tcC0+cmVncyArIERJU1BfUkVHX09WTF9TUkNfU0laRShpZHgpKTsKPiAtCXdyaXRl
bF9yZWxheGVkKG9mZnNldCwgY29tcC0+cmVncyArIERJU1BfUkVHX09WTF9PRkZTRVQoaWR4KSk7
Cj4gLQl3cml0ZWxfcmVsYXhlZChhZGRyLCBjb21wLT5yZWdzICsgRElTUF9SRUdfT1ZMX0FERFIo
b3ZsLCBpZHgpKTsKPiArCW10a19kZHBfd3JpdGVfcmVsYXhlZChjbWRxX3BrdCwgY29uLCBjb21w
LAo+ICsJCQkgICAgICBESVNQX1JFR19PVkxfQ09OKGlkeCkpOwo+ICsJbXRrX2RkcF93cml0ZV9y
ZWxheGVkKGNtZHFfcGt0LCBwaXRjaCwgY29tcCwKPiArCQkJICAgICAgRElTUF9SRUdfT1ZMX1BJ
VENIKGlkeCkpOwo+ICsJbXRrX2RkcF93cml0ZV9yZWxheGVkKGNtZHFfcGt0LCBzcmNfc2l6ZSwg
Y29tcCwKPiArCQkJICAgICAgRElTUF9SRUdfT1ZMX1NSQ19TSVpFKGlkeCkpOwo+ICsJbXRrX2Rk
cF93cml0ZV9yZWxheGVkKGNtZHFfcGt0LCBvZmZzZXQsIGNvbXAsCj4gKwkJCSAgICAgIERJU1Bf
UkVHX09WTF9PRkZTRVQoaWR4KSk7Cj4gKwltdGtfZGRwX3dyaXRlX3JlbGF4ZWQoY21kcV9wa3Qs
IGFkZHIsIGNvbXAsCj4gKwkJCSAgICAgIERJU1BfUkVHX09WTF9BRERSKG92bCwgaWR4KSk7Cj4g
IAo+ICAJaWYgKHBlbmRpbmctPmVuYWJsZSkKPiAtCQltdGtfb3ZsX2xheWVyX29uKGNvbXAsIGlk
eCk7Cj4gKwkJbXRrX292bF9sYXllcl9vbihjb21wLCBpZHgsIGNtZHFfcGt0KTsKPiAgfQo+ICAK
PiAgc3RhdGljIHZvaWQgbXRrX292bF9iZ2Nscl9pbl9vbihzdHJ1Y3QgbXRrX2RkcF9jb21wICpj
b21wKQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2Rpc3BfcmRt
YS5jIGIvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kaXNwX3JkbWEuYwo+IGluZGV4IDE1
Y2M0YWU4NGFlZS4uYzFhYmRlMzc0M2JmIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9t
ZWRpYXRlay9tdGtfZGlzcF9yZG1hLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsv
bXRrX2Rpc3BfcmRtYS5jCj4gQEAgLTEwLDYgKzEwLDcgQEAKPiAgI2luY2x1ZGUgPGxpbnV4L29m
X2lycS5oPgo+ICAjaW5jbHVkZSA8bGludXgvcGxhdGZvcm1fZGV2aWNlLmg+Cj4gICNpbmNsdWRl
IDxsaW51eC9wbV9ydW50aW1lLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9zb2MvbWVkaWF0ZWsvbXRr
LWNtZHEuaD4KPiAgCj4gICNpbmNsdWRlICJtdGtfZHJtX2NydGMuaCIKPiAgI2luY2x1ZGUgIm10
a19kcm1fZGRwX2NvbXAuaCIKPiBAQCAtMTI3LDE1ICsxMjgsMTcgQEAgc3RhdGljIHZvaWQgbXRr
X3JkbWFfc3RvcChzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wKQo+ICAKPiAgc3RhdGljIHZvaWQg
bXRrX3JkbWFfY29uZmlnKHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXAsIHVuc2lnbmVkIGludCB3
aWR0aCwKPiAgCQkJICAgIHVuc2lnbmVkIGludCBoZWlnaHQsIHVuc2lnbmVkIGludCB2cmVmcmVz
aCwKPiAtCQkJICAgIHVuc2lnbmVkIGludCBicGMpCj4gKwkJCSAgICB1bnNpZ25lZCBpbnQgYnBj
LCBzdHJ1Y3QgY21kcV9wa3QgKmNtZHFfcGt0KQo+ICB7Cj4gIAl1bnNpZ25lZCBpbnQgdGhyZXNo
b2xkOwo+ICAJdW5zaWduZWQgaW50IHJlZzsKPiAgCXN0cnVjdCBtdGtfZGlzcF9yZG1hICpyZG1h
ID0gY29tcF90b19yZG1hKGNvbXApOwo+ICAJdTMyIHJkbWFfZmlmb19zaXplOwo+ICAKPiAtCXJk
bWFfdXBkYXRlX2JpdHMoY29tcCwgRElTUF9SRUdfUkRNQV9TSVpFX0NPTl8wLCAweGZmZiwgd2lk
dGgpOwo+IC0JcmRtYV91cGRhdGVfYml0cyhjb21wLCBESVNQX1JFR19SRE1BX1NJWkVfQ09OXzEs
IDB4ZmZmZmYsIGhlaWdodCk7Cj4gKwltdGtfZGRwX3dyaXRlX21hc2soY21kcV9wa3QsIHdpZHRo
LCBjb21wLAo+ICsJCQkgICBESVNQX1JFR19SRE1BX1NJWkVfQ09OXzAsIDB4ZmZmKTsKPiArCW10
a19kZHBfd3JpdGVfbWFzayhjbWRxX3BrdCwgaGVpZ2h0LCBjb21wLAo+ICsJCQkgICBESVNQX1JF
R19SRE1BX1NJWkVfQ09OXzEsIDB4ZmZmZmYpOwo+ICAKPiAgCWlmIChyZG1hLT5maWZvX3NpemUp
Cj4gIAkJcmRtYV9maWZvX3NpemUgPSByZG1hLT5maWZvX3NpemU7Cj4gQEAgLTE1Miw3ICsxNTUs
NyBAQCBzdGF0aWMgdm9pZCBtdGtfcmRtYV9jb25maWcoc3RydWN0IG10a19kZHBfY29tcCAqY29t
cCwgdW5zaWduZWQgaW50IHdpZHRoLAo+ICAJcmVnID0gUkRNQV9GSUZPX1VOREVSRkxPV19FTiB8
Cj4gIAkgICAgICBSRE1BX0ZJRk9fUFNFVURPX1NJWkUocmRtYV9maWZvX3NpemUpIHwKPiAgCSAg
ICAgIFJETUFfT1VUUFVUX1ZBTElEX0ZJRk9fVEhSRVNIT0xEKHRocmVzaG9sZCk7Cj4gLQl3cml0
ZWwocmVnLCBjb21wLT5yZWdzICsgRElTUF9SRUdfUkRNQV9GSUZPX0NPTik7Cj4gKwltdGtfZGRw
X3dyaXRlKGNtZHFfcGt0LCByZWcsIGNvbXAsIERJU1BfUkVHX1JETUFfRklGT19DT04pOwo+ICB9
Cj4gIAo+ICBzdGF0aWMgdW5zaWduZWQgaW50IHJkbWFfZm10X2NvbnZlcnQoc3RydWN0IG10a19k
aXNwX3JkbWEgKnJkbWEsCj4gQEAgLTE5OCw3ICsyMDEsOCBAQCBzdGF0aWMgdW5zaWduZWQgaW50
IG10a19yZG1hX2xheWVyX25yKHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXApCj4gIH0KPiAgCj4g
IHN0YXRpYyB2b2lkIG10a19yZG1hX2xheWVyX2NvbmZpZyhzdHJ1Y3QgbXRrX2RkcF9jb21wICpj
b21wLCB1bnNpZ25lZCBpbnQgaWR4LAo+IC0JCQkJICBzdHJ1Y3QgbXRrX3BsYW5lX3N0YXRlICpz
dGF0ZSkKPiArCQkJCSAgc3RydWN0IG10a19wbGFuZV9zdGF0ZSAqc3RhdGUsCj4gKwkJCQkgIHN0
cnVjdCBjbWRxX3BrdCAqY21kcV9wa3QpCj4gIHsKPiAgCXN0cnVjdCBtdGtfZGlzcF9yZG1hICpy
ZG1hID0gY29tcF90b19yZG1hKGNvbXApOwo+ICAJc3RydWN0IG10a19wbGFuZV9wZW5kaW5nX3N0
YXRlICpwZW5kaW5nID0gJnN0YXRlLT5wZW5kaW5nOwo+IEBAIC0yMDgsMjQgKzIxMiwyNyBAQCBz
dGF0aWMgdm9pZCBtdGtfcmRtYV9sYXllcl9jb25maWcoc3RydWN0IG10a19kZHBfY29tcCAqY29t
cCwgdW5zaWduZWQgaW50IGlkeCwKPiAgCXVuc2lnbmVkIGludCBjb247Cj4gIAo+ICAJY29uID0g
cmRtYV9mbXRfY29udmVydChyZG1hLCBmbXQpOwo+IC0Jd3JpdGVsX3JlbGF4ZWQoY29uLCBjb21w
LT5yZWdzICsgRElTUF9SRE1BX01FTV9DT04pOwo+ICsJbXRrX2RkcF93cml0ZV9yZWxheGVkKGNt
ZHFfcGt0LCBjb24sIGNvbXAsIERJU1BfUkRNQV9NRU1fQ09OKTsKPiAgCj4gIAlpZiAoZm10ID09
IERSTV9GT1JNQVRfVVlWWSB8fCBmbXQgPT0gRFJNX0ZPUk1BVF9ZVVlWKSB7Cj4gLQkJcmRtYV91
cGRhdGVfYml0cyhjb21wLCBESVNQX1JFR19SRE1BX1NJWkVfQ09OXzAsCj4gLQkJCQkgUkRNQV9N
QVRSSVhfRU5BQkxFLCBSRE1BX01BVFJJWF9FTkFCTEUpOwo+IC0JCXJkbWFfdXBkYXRlX2JpdHMo
Y29tcCwgRElTUF9SRUdfUkRNQV9TSVpFX0NPTl8wLAo+IC0JCQkJIFJETUFfTUFUUklYX0lOVF9N
VFhfU0VMLAo+IC0JCQkJIFJETUFfTUFUUklYX0lOVF9NVFhfQlQ2MDFfdG9fUkdCKTsKPiArCQlt
dGtfZGRwX3dyaXRlX21hc2soY21kcV9wa3QsIFJETUFfTUFUUklYX0VOQUJMRSwgY29tcCwKPiAr
CQkJCSAgIERJU1BfUkVHX1JETUFfU0laRV9DT05fMCwKPiArCQkJCSAgIFJETUFfTUFUUklYX0VO
QUJMRSk7Cj4gKwkJbXRrX2RkcF93cml0ZV9tYXNrKGNtZHFfcGt0LCBSRE1BX01BVFJJWF9JTlRf
TVRYX0JUNjAxX3RvX1JHQiwKPiArCQkJCSAgIGNvbXAsIERJU1BfUkVHX1JETUFfU0laRV9DT05f
MCwKPiArCQkJCSAgIFJETUFfTUFUUklYX0lOVF9NVFhfU0VMKTsKPiAgCX0gZWxzZSB7Cj4gLQkJ
cmRtYV91cGRhdGVfYml0cyhjb21wLCBESVNQX1JFR19SRE1BX1NJWkVfQ09OXzAsCj4gLQkJCQkg
UkRNQV9NQVRSSVhfRU5BQkxFLCAwKTsKPiArCQltdGtfZGRwX3dyaXRlX21hc2soY21kcV9wa3Qs
IDAsIGNvbXAsCj4gKwkJCQkgICBESVNQX1JFR19SRE1BX1NJWkVfQ09OXzAsCj4gKwkJCQkgICBS
RE1BX01BVFJJWF9FTkFCTEUpOwo+ICAJfQo+ICsJbXRrX2RkcF93cml0ZV9yZWxheGVkKGNtZHFf
cGt0LCBhZGRyLCBjb21wLCBESVNQX1JETUFfTUVNX1NUQVJUX0FERFIpOwo+ICsJbXRrX2RkcF93
cml0ZV9yZWxheGVkKGNtZHFfcGt0LCBwaXRjaCwgY29tcCwgRElTUF9SRE1BX01FTV9TUkNfUElU
Q0gpOwo+ICsJbXRrX2RkcF93cml0ZShjbWRxX3BrdCwgUkRNQV9NRU1fR01DLCBjb21wLAo+ICsJ
CSAgICAgIERJU1BfUkRNQV9NRU1fR01DX1NFVFRJTkdfMCk7Cj4gKwltdGtfZGRwX3dyaXRlX21h
c2soY21kcV9wa3QsIFJETUFfTU9ERV9NRU1PUlksIGNvbXAsCj4gKwkJCSAgIERJU1BfUkVHX1JE
TUFfR0xPQkFMX0NPTiwgUkRNQV9NT0RFX01FTU9SWSk7Cj4gIAo+IC0Jd3JpdGVsX3JlbGF4ZWQo
YWRkciwgY29tcC0+cmVncyArIERJU1BfUkRNQV9NRU1fU1RBUlRfQUREUik7Cj4gLQl3cml0ZWxf
cmVsYXhlZChwaXRjaCwgY29tcC0+cmVncyArIERJU1BfUkRNQV9NRU1fU1JDX1BJVENIKTsKPiAt
CXdyaXRlbChSRE1BX01FTV9HTUMsIGNvbXAtPnJlZ3MgKyBESVNQX1JETUFfTUVNX0dNQ19TRVRU
SU5HXzApOwo+IC0JcmRtYV91cGRhdGVfYml0cyhjb21wLCBESVNQX1JFR19SRE1BX0dMT0JBTF9D
T04sCj4gLQkJCSBSRE1BX01PREVfTUVNT1JZLCBSRE1BX01PREVfTUVNT1JZKTsKPiAgfQo+ICAK
PiAgc3RhdGljIGNvbnN0IHN0cnVjdCBtdGtfZGRwX2NvbXBfZnVuY3MgbXRrX2Rpc3BfcmRtYV9m
dW5jcyA9IHsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1f
ZGRwX2NvbXAuYyBiL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2RkcF9jb21wLmMK
PiBpbmRleCAzNDA3ZDM4YWZmOGYuLjBhYmU0NzI0NjQ4MyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kZHBfY29tcC5jCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL21lZGlhdGVrL210a19kcm1fZGRwX2NvbXAuYwo+IEBAIC0xMiw3ICsxMiw4IEBACj4gICNp
bmNsdWRlIDxsaW51eC9vZl9pcnEuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L29mX3BsYXRmb3JtLmg+
Cj4gICNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kZXZpY2UuaD4KPiAtCj4gKyNpbmNsdWRlIDxk
cm0vZHJtUC5oPgo+ICsjaW5jbHVkZSA8bGludXgvc29jL21lZGlhdGVrL210ay1jbWRxLmg+Cj4g
ICNpbmNsdWRlICJtdGtfZHJtX2Rydi5oIgo+ICAjaW5jbHVkZSAibXRrX2RybV9wbGFuZS5oIgo+
ICAjaW5jbHVkZSAibXRrX2RybV9kZHBfY29tcC5oIgo+IEBAIC03NiwzNiArNzcsNzYgQEAKPiAg
I2RlZmluZSBESVRIRVJfQUREX0xTSElGVF9HKHgpCQkJKCgoeCkgJiAweDcpIDw8IDQpCj4gICNk
ZWZpbmUgRElUSEVSX0FERF9SU0hJRlRfRyh4KQkJCSgoKHgpICYgMHg3KSA8PCAwKQo+ICAKPiAr
dm9pZCBtdGtfZGRwX3dyaXRlKHN0cnVjdCBjbWRxX3BrdCAqY21kcV9wa3QsIHVuc2lnbmVkIGlu
dCB2YWx1ZSwKPiArCQkgICBzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wLCB1bnNpZ25lZCBpbnQg
b2Zmc2V0KQo+ICt7Cj4gKwlpZiAoSVNfRU5BQkxFRChDT05GSUdfTVRLX0NNRFEpICYmIGNtZHFf
cGt0KQo+ICsJCWNtZHFfcGt0X3dyaXRlKGNtZHFfcGt0LCBjb21wLT5zdWJzeXMsCj4gKwkJCSAg
ICAgICBjb21wLT5yZWdzX3BhICsgb2Zmc2V0LCB2YWx1ZSk7Cj4gKwllbHNlCj4gKwkJd3JpdGVs
KHZhbHVlLCBjb21wLT5yZWdzICsgb2Zmc2V0KTsKPiArfQo+ICsKPiArdm9pZCBtdGtfZGRwX3dy
aXRlX3JlbGF4ZWQoc3RydWN0IGNtZHFfcGt0ICpjbWRxX3BrdCwgdW5zaWduZWQgaW50IHZhbHVl
LAo+ICsJCQkgICBzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wLAo+ICsJCQkgICB1bnNpZ25lZCBp
bnQgb2Zmc2V0KQo+ICt7Cj4gKwlpZiAoSVNfRU5BQkxFRChDT05GSUdfTVRLX0NNRFEpICYmIGNt
ZHFfcGt0KQo+ICsJCWNtZHFfcGt0X3dyaXRlKGNtZHFfcGt0LCBjb21wLT5zdWJzeXMsCj4gKwkJ
CSAgICAgICBjb21wLT5yZWdzX3BhICsgb2Zmc2V0LCB2YWx1ZSk7Cj4gKwllbHNlCj4gKwkJd3Jp
dGVsX3JlbGF4ZWQodmFsdWUsIGNvbXAtPnJlZ3MgKyBvZmZzZXQpOwo+ICt9Cj4gKwo+ICt2b2lk
IG10a19kZHBfd3JpdGVfbWFzayhzdHJ1Y3QgY21kcV9wa3QgKmNtZHFfcGt0LAo+ICsJCQl1bnNp
Z25lZCBpbnQgdmFsdWUsCj4gKwkJCXN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXAsCj4gKwkJCXVu
c2lnbmVkIGludCBvZmZzZXQsCj4gKwkJCXVuc2lnbmVkIGludCBtYXNrKQo+ICt7Cj4gKwlpZiAo
SVNfRU5BQkxFRChDT05GSUdfTVRLX0NNRFEpICYmIGNtZHFfcGt0KSB7Cj4gKwkJY21kcV9wa3Rf
d3JpdGVfbWFzayhjbWRxX3BrdCwgY29tcC0+c3Vic3lzLAo+ICsJCQkJICAgIGNvbXAtPnJlZ3Nf
cGEgKyBvZmZzZXQsIHZhbHVlLCBtYXNrKTsKPiArCX0gZWxzZSB7Cj4gKwkJdTMyIHRtcCA9IHJl
YWRsKGNvbXAtPnJlZ3MgKyBvZmZzZXQpOwo+ICsKPiArCQl0bXAgPSAodG1wICYgfm1hc2spIHwg
KHZhbHVlICYgbWFzayk7Cj4gKwkJd3JpdGVsKHRtcCwgY29tcC0+cmVncyArIG9mZnNldCk7Cj4g
Kwl9Cj4gK30KPiArCj4gIHZvaWQgbXRrX2RpdGhlcl9zZXQoc3RydWN0IG10a19kZHBfY29tcCAq
Y29tcCwgdW5zaWduZWQgaW50IGJwYywKPiAtCQkgICAgdW5zaWduZWQgaW50IENGRykKPiArCQkg
ICAgdW5zaWduZWQgaW50IENGRywgc3RydWN0IGNtZHFfcGt0ICpjbWRxX3BrdCkKPiAgewo+ICAJ
LyogSWYgYnBjIGVxdWFsIHRvIDAsIHRoZSBkaXRoZXJpbmcgZnVuY3Rpb24gZGlkbid0IGJlIGVu
YWJsZWQgKi8KPiAgCWlmIChicGMgPT0gMCkKPiAgCQlyZXR1cm47Cj4gIAo+ICAJaWYgKGJwYyA+
PSBNVEtfTUlOX0JQQykgewo+IC0JCXdyaXRlbCgwLCBjb21wLT5yZWdzICsgRElTUF9ESVRIRVJf
NSk7Cj4gLQkJd3JpdGVsKDAsIGNvbXAtPnJlZ3MgKyBESVNQX0RJVEhFUl83KTsKPiAtCQl3cml0
ZWwoRElUSEVSX0xTQl9FUlJfU0hJRlRfUihNVEtfTUFYX0JQQyAtIGJwYykgfAo+IC0JCSAgICAg
ICBESVRIRVJfQUREX0xTSElGVF9SKE1US19NQVhfQlBDIC0gYnBjKSB8Cj4gLQkJICAgICAgIERJ
VEhFUl9ORVdfQklUX01PREUsCj4gLQkJICAgICAgIGNvbXAtPnJlZ3MgKyBESVNQX0RJVEhFUl8x
NSk7Cj4gLQkJd3JpdGVsKERJVEhFUl9MU0JfRVJSX1NISUZUX0IoTVRLX01BWF9CUEMgLSBicGMp
IHwKPiAtCQkgICAgICAgRElUSEVSX0FERF9MU0hJRlRfQihNVEtfTUFYX0JQQyAtIGJwYykgfAo+
IC0JCSAgICAgICBESVRIRVJfTFNCX0VSUl9TSElGVF9HKE1US19NQVhfQlBDIC0gYnBjKSB8Cj4g
LQkJICAgICAgIERJVEhFUl9BRERfTFNISUZUX0coTVRLX01BWF9CUEMgLSBicGMpLAo+IC0JCSAg
ICAgICBjb21wLT5yZWdzICsgRElTUF9ESVRIRVJfMTYpOwo+IC0JCXdyaXRlbChESVNQX0RJVEhF
UklORywgY29tcC0+cmVncyArIENGRyk7Cj4gKwkJbXRrX2RkcF93cml0ZShjbWRxX3BrdCwgMCwg
Y29tcCwgRElTUF9ESVRIRVJfNSk7Cj4gKwkJbXRrX2RkcF93cml0ZShjbWRxX3BrdCwgMCwgY29t
cCwgRElTUF9ESVRIRVJfNyk7Cj4gKwkJbXRrX2RkcF93cml0ZShjbWRxX3BrdCwKPiArCQkJICAg
ICAgRElUSEVSX0xTQl9FUlJfU0hJRlRfUihNVEtfTUFYX0JQQyAtIGJwYykgfAo+ICsJCQkgICAg
ICBESVRIRVJfQUREX0xTSElGVF9SKE1US19NQVhfQlBDIC0gYnBjKSB8Cj4gKwkJCSAgICAgIERJ
VEhFUl9ORVdfQklUX01PREUsCj4gKwkJCSAgICAgIGNvbXAsIERJU1BfRElUSEVSXzE1KTsKPiAr
CQltdGtfZGRwX3dyaXRlKGNtZHFfcGt0LAo+ICsJCQkgICAgICBESVRIRVJfTFNCX0VSUl9TSElG
VF9CKE1US19NQVhfQlBDIC0gYnBjKSB8Cj4gKwkJCSAgICAgIERJVEhFUl9BRERfTFNISUZUX0Io
TVRLX01BWF9CUEMgLSBicGMpIHwKPiArCQkJICAgICAgRElUSEVSX0xTQl9FUlJfU0hJRlRfRyhN
VEtfTUFYX0JQQyAtIGJwYykgfAo+ICsJCQkgICAgICBESVRIRVJfQUREX0xTSElGVF9HKE1US19N
QVhfQlBDIC0gYnBjKSwKPiArCQkJICAgICAgY29tcCwgRElTUF9ESVRIRVJfMTYpOwo+ICsJCW10
a19kZHBfd3JpdGUoY21kcV9wa3QsIERJU1BfRElUSEVSSU5HLCBjb21wLCBDRkcpOwo+ICAJfQo+
ICB9Cj4gIAo+ICBzdGF0aWMgdm9pZCBtdGtfb2RfY29uZmlnKHN0cnVjdCBtdGtfZGRwX2NvbXAg
KmNvbXAsIHVuc2lnbmVkIGludCB3LAo+ICAJCQkgIHVuc2lnbmVkIGludCBoLCB1bnNpZ25lZCBp
bnQgdnJlZnJlc2gsCj4gLQkJCSAgdW5zaWduZWQgaW50IGJwYykKPiArCQkJICB1bnNpZ25lZCBp
bnQgYnBjLCBzdHJ1Y3QgY21kcV9wa3QgKmNtZHFfcGt0KQo+ICB7Cj4gLQl3cml0ZWwodyA8PCAx
NiB8IGgsIGNvbXAtPnJlZ3MgKyBESVNQX09EX1NJWkUpOwo+IC0Jd3JpdGVsKE9EX1JFTEFZTU9E
RSwgY29tcC0+cmVncyArIERJU1BfT0RfQ0ZHKTsKPiAtCW10a19kaXRoZXJfc2V0KGNvbXAsIGJw
YywgRElTUF9PRF9DRkcpOwo+ICsJbXRrX2RkcF93cml0ZShjbWRxX3BrdCwgdyA8PCAxNiB8IGgs
IGNvbXAsIERJU1BfT0RfU0laRSk7Cj4gKwltdGtfZGRwX3dyaXRlKGNtZHFfcGt0LCBPRF9SRUxB
WU1PREUsIGNvbXAsIERJU1BfT0RfQ0ZHKTsKPiArCW10a19kaXRoZXJfc2V0KGNvbXAsIGJwYywg
RElTUF9PRF9DRkcsIGNtZHFfcGt0KTsKPiAgfQo+ICAKPiAgc3RhdGljIHZvaWQgbXRrX29kX3N0
YXJ0KHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXApCj4gQEAgLTEyMCw5ICsxNjEsOSBAQCBzdGF0
aWMgdm9pZCBtdGtfdWZvZV9zdGFydChzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wKQo+ICAKPiAg
c3RhdGljIHZvaWQgbXRrX2FhbF9jb25maWcoc3RydWN0IG10a19kZHBfY29tcCAqY29tcCwgdW5z
aWduZWQgaW50IHcsCj4gIAkJCSAgIHVuc2lnbmVkIGludCBoLCB1bnNpZ25lZCBpbnQgdnJlZnJl
c2gsCj4gLQkJCSAgIHVuc2lnbmVkIGludCBicGMpCj4gKwkJCSAgIHVuc2lnbmVkIGludCBicGMs
IHN0cnVjdCBjbWRxX3BrdCAqY21kcV9wa3QpCj4gIHsKPiAtCXdyaXRlbChoIDw8IDE2IHwgdywg
Y29tcC0+cmVncyArIERJU1BfQUFMX1NJWkUpOwo+ICsJbXRrX2RkcF93cml0ZShjbWRxX3BrdCwg
aCA8PCAxNiB8IHcsIGNvbXAsIERJU1BfQUFMX1NJWkUpOwo+ICB9Cj4gIAo+ICBzdGF0aWMgdm9p
ZCBtdGtfYWFsX3N0YXJ0KHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXApCj4gQEAgLTEzNywxMCAr
MTc4LDEwIEBAIHN0YXRpYyB2b2lkIG10a19hYWxfc3RvcChzdHJ1Y3QgbXRrX2RkcF9jb21wICpj
b21wKQo+ICAKPiAgc3RhdGljIHZvaWQgbXRrX2Njb3JyX2NvbmZpZyhzdHJ1Y3QgbXRrX2RkcF9j
b21wICpjb21wLCB1bnNpZ25lZCBpbnQgdywKPiAgCQkJICAgICB1bnNpZ25lZCBpbnQgaCwgdW5z
aWduZWQgaW50IHZyZWZyZXNoLAo+IC0JCQkgICAgIHVuc2lnbmVkIGludCBicGMpCj4gKwkJCSAg
ICAgdW5zaWduZWQgaW50IGJwYywgc3RydWN0IGNtZHFfcGt0ICpjbWRxX3BrdCkKPiAgewo+IC0J
d3JpdGVsKGggPDwgMTYgfCB3LCBjb21wLT5yZWdzICsgRElTUF9DQ09SUl9TSVpFKTsKPiAtCXdy
aXRlbChDQ09SUl9SRUxBWV9NT0RFLCBjb21wLT5yZWdzICsgRElTUF9DQ09SUl9DRkcpOwo+ICsJ
bXRrX2RkcF93cml0ZShjbWRxX3BrdCwgaCA8PCAxNiB8IHcsIGNvbXAsIERJU1BfQ0NPUlJfU0la
RSk7Cj4gKwltdGtfZGRwX3dyaXRlKGNtZHFfcGt0LCBDQ09SUl9SRUxBWV9NT0RFLCBjb21wLCBE
SVNQX0NDT1JSX0NGRyk7Cj4gIH0KPiAgCj4gIHN0YXRpYyB2b2lkIG10a19jY29ycl9zdGFydChz
dHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wKQo+IEBAIC0xNTUsMTAgKzE5NiwxMCBAQCBzdGF0aWMg
dm9pZCBtdGtfY2NvcnJfc3RvcChzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wKQo+ICAKPiAgc3Rh
dGljIHZvaWQgbXRrX2RpdGhlcl9jb25maWcoc3RydWN0IG10a19kZHBfY29tcCAqY29tcCwgdW5z
aWduZWQgaW50IHcsCj4gIAkJCSAgICAgIHVuc2lnbmVkIGludCBoLCB1bnNpZ25lZCBpbnQgdnJl
ZnJlc2gsCj4gLQkJCSAgICAgIHVuc2lnbmVkIGludCBicGMpCj4gKwkJCSAgICAgIHVuc2lnbmVk
IGludCBicGMsIHN0cnVjdCBjbWRxX3BrdCAqY21kcV9wa3QpCj4gIHsKPiAtCXdyaXRlbChoIDw8
IDE2IHwgdywgY29tcC0+cmVncyArIERJU1BfRElUSEVSX1NJWkUpOwo+IC0Jd3JpdGVsKERJVEhF
Ul9SRUxBWV9NT0RFLCBjb21wLT5yZWdzICsgRElTUF9ESVRIRVJfQ0ZHKTsKPiArCW10a19kZHBf
d3JpdGUoY21kcV9wa3QsIGggPDwgMTYgfCB3LCBjb21wLCBESVNQX0RJVEhFUl9TSVpFKTsKPiAr
CW10a19kZHBfd3JpdGUoY21kcV9wa3QsIERJVEhFUl9SRUxBWV9NT0RFLCBjb21wLCBESVNQX0RJ
VEhFUl9DRkcpOwo+ICB9Cj4gIAo+ICBzdGF0aWMgdm9pZCBtdGtfZGl0aGVyX3N0YXJ0KHN0cnVj
dCBtdGtfZGRwX2NvbXAgKmNvbXApCj4gQEAgLTE3MywxMCArMjE0LDEwIEBAIHN0YXRpYyB2b2lk
IG10a19kaXRoZXJfc3RvcChzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wKQo+ICAKPiAgc3RhdGlj
IHZvaWQgbXRrX2dhbW1hX2NvbmZpZyhzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wLCB1bnNpZ25l
ZCBpbnQgdywKPiAgCQkJICAgICB1bnNpZ25lZCBpbnQgaCwgdW5zaWduZWQgaW50IHZyZWZyZXNo
LAo+IC0JCQkgICAgIHVuc2lnbmVkIGludCBicGMpCj4gKwkJCSAgICAgdW5zaWduZWQgaW50IGJw
Yywgc3RydWN0IGNtZHFfcGt0ICpjbWRxX3BrdCkKPiAgewo+IC0Jd3JpdGVsKGggPDwgMTYgfCB3
LCBjb21wLT5yZWdzICsgRElTUF9HQU1NQV9TSVpFKTsKPiAtCW10a19kaXRoZXJfc2V0KGNvbXAs
IGJwYywgRElTUF9HQU1NQV9DRkcpOwo+ICsJbXRrX2RkcF93cml0ZShjbWRxX3BrdCwgaCA8PCAx
NiB8IHcsIGNvbXAsIERJU1BfR0FNTUFfU0laRSk7Cj4gKwltdGtfZGl0aGVyX3NldChjb21wLCBi
cGMsIERJU1BfR0FNTUFfQ0ZHLCBjbWRxX3BrdCk7Cj4gIH0KPiAgCj4gIHN0YXRpYyB2b2lkIG10
a19nYW1tYV9zdGFydChzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wKQo+IEBAIC0xOTAsMjQgKzIz
MSwyMyBAQCBzdGF0aWMgdm9pZCBtdGtfZ2FtbWFfc3RvcChzdHJ1Y3QgbXRrX2RkcF9jb21wICpj
b21wKQo+ICB9Cj4gIAo+ICBzdGF0aWMgdm9pZCBtdGtfZ2FtbWFfc2V0KHN0cnVjdCBtdGtfZGRw
X2NvbXAgKmNvbXAsCj4gLQkJCSAgc3RydWN0IGRybV9jcnRjX3N0YXRlICpzdGF0ZSkKPiArCQkJ
ICBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKnN0YXRlLAo+ICsJCQkgIHN0cnVjdCBjbWRxX3BrdCAq
Y21kcV9wa3QpCj4gIHsKPiAtCXVuc2lnbmVkIGludCBpLCByZWc7Cj4gKwl1bnNpZ25lZCBpbnQg
aTsKPiAgCXN0cnVjdCBkcm1fY29sb3JfbHV0ICpsdXQ7Cj4gLQl2b2lkIF9faW9tZW0gKmx1dF9i
YXNlOwo+ICAJdTMyIHdvcmQ7Cj4gIAo+ICAJaWYgKHN0YXRlLT5nYW1tYV9sdXQpIHsKPiAtCQly
ZWcgPSByZWFkbChjb21wLT5yZWdzICsgRElTUF9HQU1NQV9DRkcpOwo+IC0JCXJlZyA9IHJlZyB8
IEdBTU1BX0xVVF9FTjsKPiAtCQl3cml0ZWwocmVnLCBjb21wLT5yZWdzICsgRElTUF9HQU1NQV9D
RkcpOwo+IC0JCWx1dF9iYXNlID0gY29tcC0+cmVncyArIERJU1BfR0FNTUFfTFVUOwo+ICsJCW10
a19kZHBfd3JpdGVfbWFzayhjbWRxX3BrdCwgR0FNTUFfTFVUX0VOLCBjb21wLAo+ICsJCQkJICAg
RElTUF9HQU1NQV9DRkcsIEdBTU1BX0xVVF9FTik7Cj4gIAkJbHV0ID0gKHN0cnVjdCBkcm1fY29s
b3JfbHV0ICopc3RhdGUtPmdhbW1hX2x1dC0+ZGF0YTsKPiAgCQlmb3IgKGkgPSAwOyBpIDwgTVRL
X0xVVF9TSVpFOyBpKyspIHsKPiAgCQkJd29yZCA9ICgoKGx1dFtpXS5yZWQgPj4gNikgJiBMVVRf
MTBCSVRfTUFTSykgPDwgMjApICsKPiAgCQkJCSgoKGx1dFtpXS5ncmVlbiA+PiA2KSAmIExVVF8x
MEJJVF9NQVNLKSA8PCAxMCkgKwo+ICAJCQkJKChsdXRbaV0uYmx1ZSA+PiA2KSAmIExVVF8xMEJJ
VF9NQVNLKTsKPiAtCQkJd3JpdGVsKHdvcmQsIChsdXRfYmFzZSArIGkgKiA0KSk7Cj4gKwkJCW10
a19kZHBfd3JpdGUoY21kcV9wa3QsIHdvcmQsIGNvbXAsCj4gKwkJCQkgICAgICBESVNQX0dBTU1B
X0xVVCArIGkgKiA0KTsKPiAgCQl9Cj4gIAl9Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL21lZGlhdGVrL210a19kcm1fZGRwX2NvbXAuaCBiL2RyaXZlcnMvZ3B1L2RybS9tZWRp
YXRlay9tdGtfZHJtX2RkcF9jb21wLmgKPiBpbmRleCA1MmY1YWE4ZjIxY2EuLjIzN2RkNDNkNjAz
YyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kZHBfY29t
cC5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fZGRwX2NvbXAuaAo+
IEBAIC02OSwyMSArNjksMjYgQEAgZW51bSBtdGtfZGRwX2NvbXBfaWQgewo+ICB9Owo+ICAKPiAg
c3RydWN0IG10a19kZHBfY29tcDsKPiAtCj4gK3N0cnVjdCBjbWRxX3BrdDsKPiAgc3RydWN0IG10
a19kZHBfY29tcF9mdW5jcyB7Cj4gIAl2b2lkICgqY29uZmlnKShzdHJ1Y3QgbXRrX2RkcF9jb21w
ICpjb21wLCB1bnNpZ25lZCBpbnQgdywKPiAtCQkgICAgICAgdW5zaWduZWQgaW50IGgsIHVuc2ln
bmVkIGludCB2cmVmcmVzaCwgdW5zaWduZWQgaW50IGJwYyk7Cj4gKwkJICAgICAgIHVuc2lnbmVk
IGludCBoLCB1bnNpZ25lZCBpbnQgdnJlZnJlc2gsCj4gKwkJICAgICAgIHVuc2lnbmVkIGludCBi
cGMsIHN0cnVjdCBjbWRxX3BrdCAqY21kcV9wa3QpOwo+ICAJdm9pZCAoKnN0YXJ0KShzdHJ1Y3Qg
bXRrX2RkcF9jb21wICpjb21wKTsKPiAgCXZvaWQgKCpzdG9wKShzdHJ1Y3QgbXRrX2RkcF9jb21w
ICpjb21wKTsKPiAgCXZvaWQgKCplbmFibGVfdmJsYW5rKShzdHJ1Y3QgbXRrX2RkcF9jb21wICpj
b21wLCBzdHJ1Y3QgZHJtX2NydGMgKmNydGMpOwo+ICAJdm9pZCAoKmRpc2FibGVfdmJsYW5rKShz
dHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wKTsKPiAgCXVuc2lnbmVkIGludCAoKmxheWVyX25yKShz
dHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wKTsKPiAtCXZvaWQgKCpsYXllcl9vbikoc3RydWN0IG10
a19kZHBfY29tcCAqY29tcCwgdW5zaWduZWQgaW50IGlkeCk7Cj4gLQl2b2lkICgqbGF5ZXJfb2Zm
KShzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wLCB1bnNpZ25lZCBpbnQgaWR4KTsKPiArCXZvaWQg
KCpsYXllcl9vbikoc3RydWN0IG10a19kZHBfY29tcCAqY29tcCwgdW5zaWduZWQgaW50IGlkeCwK
PiArCQkJIHN0cnVjdCBjbWRxX3BrdCAqY21kcV9wa3QpOwo+ICsJdm9pZCAoKmxheWVyX29mZiko
c3RydWN0IG10a19kZHBfY29tcCAqY29tcCwgdW5zaWduZWQgaW50IGlkeCwKPiArCQkJICBzdHJ1
Y3QgY21kcV9wa3QgKmNtZHFfcGt0KTsKPiAgCXZvaWQgKCpsYXllcl9jb25maWcpKHN0cnVjdCBt
dGtfZGRwX2NvbXAgKmNvbXAsIHVuc2lnbmVkIGludCBpZHgsCj4gLQkJCSAgICAgc3RydWN0IG10
a19wbGFuZV9zdGF0ZSAqc3RhdGUpOwo+ICsJCQkgICAgIHN0cnVjdCBtdGtfcGxhbmVfc3RhdGUg
KnN0YXRlLAo+ICsJCQkgICAgIHN0cnVjdCBjbWRxX3BrdCAqY21kcV9wa3QpOwo+ICAJdm9pZCAo
KmdhbW1hX3NldCkoc3RydWN0IG10a19kZHBfY29tcCAqY29tcCwKPiAtCQkJICBzdHJ1Y3QgZHJt
X2NydGNfc3RhdGUgKnN0YXRlKTsKPiArCQkJICBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKnN0YXRl
LAo+ICsJCQkgIHN0cnVjdCBjbWRxX3BrdCAqY21kcV9wa3QpOwo+ICAJdm9pZCAoKmJnY2xyX2lu
X29uKShzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wKTsKPiAgCXZvaWQgKCpiZ2Nscl9pbl9vZmYp
KHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXApOwo+ICB9Owo+IEBAIC05OSwxMCArMTA0LDExIEBA
IHN0cnVjdCBtdGtfZGRwX2NvbXAgewo+ICAKPiAgc3RhdGljIGlubGluZSB2b2lkIG10a19kZHBf
Y29tcF9jb25maWcoc3RydWN0IG10a19kZHBfY29tcCAqY29tcCwKPiAgCQkJCSAgICAgICB1bnNp
Z25lZCBpbnQgdywgdW5zaWduZWQgaW50IGgsCj4gLQkJCQkgICAgICAgdW5zaWduZWQgaW50IHZy
ZWZyZXNoLCB1bnNpZ25lZCBpbnQgYnBjKQo+ICsJCQkJICAgICAgIHVuc2lnbmVkIGludCB2cmVm
cmVzaCwgdW5zaWduZWQgaW50IGJwYywKPiArCQkJCSAgICAgICBzdHJ1Y3QgY21kcV9wa3QgKmNt
ZHFfcGt0KQo+ICB7Cj4gIAlpZiAoY29tcC0+ZnVuY3MgJiYgY29tcC0+ZnVuY3MtPmNvbmZpZykK
PiAtCQljb21wLT5mdW5jcy0+Y29uZmlnKGNvbXAsIHcsIGgsIHZyZWZyZXNoLCBicGMpOwo+ICsJ
CWNvbXAtPmZ1bmNzLT5jb25maWcoY29tcCwgdywgaCwgdnJlZnJlc2gsIGJwYywgY21kcV9wa3Qp
Owo+ICB9Cj4gIAo+ICBzdGF0aWMgaW5saW5lIHZvaWQgbXRrX2RkcF9jb21wX3N0YXJ0KHN0cnVj
dCBtdGtfZGRwX2NvbXAgKmNvbXApCj4gQEAgLTEzOSwzMiArMTQ1LDM2IEBAIHN0YXRpYyBpbmxp
bmUgdW5zaWduZWQgaW50IG10a19kZHBfY29tcF9sYXllcl9ucihzdHJ1Y3QgbXRrX2RkcF9jb21w
ICpjb21wKQo+ICB9Cj4gIAo+ICBzdGF0aWMgaW5saW5lIHZvaWQgbXRrX2RkcF9jb21wX2xheWVy
X29uKHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXAsCj4gLQkJCQkJIHVuc2lnbmVkIGludCBpZHgp
Cj4gKwkJCQkJIHVuc2lnbmVkIGludCBpZHgsCj4gKwkJCQkJIHN0cnVjdCBjbWRxX3BrdCAqY21k
cV9wa3QpCj4gIHsKPiAgCWlmIChjb21wLT5mdW5jcyAmJiBjb21wLT5mdW5jcy0+bGF5ZXJfb24p
Cj4gLQkJY29tcC0+ZnVuY3MtPmxheWVyX29uKGNvbXAsIGlkeCk7Cj4gKwkJY29tcC0+ZnVuY3Mt
PmxheWVyX29uKGNvbXAsIGlkeCwgY21kcV9wa3QpOwo+ICB9Cj4gIAo+ICBzdGF0aWMgaW5saW5l
IHZvaWQgbXRrX2RkcF9jb21wX2xheWVyX29mZihzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wLAo+
IC0JCQkJCSAgdW5zaWduZWQgaW50IGlkeCkKPiArCQkJCQkgIHVuc2lnbmVkIGludCBpZHgsCj4g
KwkJCQkJICBzdHJ1Y3QgY21kcV9wa3QgKmNtZHFfcGt0KQo+ICB7Cj4gIAlpZiAoY29tcC0+ZnVu
Y3MgJiYgY29tcC0+ZnVuY3MtPmxheWVyX29mZikKPiAtCQljb21wLT5mdW5jcy0+bGF5ZXJfb2Zm
KGNvbXAsIGlkeCk7Cj4gKwkJY29tcC0+ZnVuY3MtPmxheWVyX29mZihjb21wLCBpZHgsIGNtZHFf
cGt0KTsKPiAgfQo+ICAKPiAgc3RhdGljIGlubGluZSB2b2lkIG10a19kZHBfY29tcF9sYXllcl9j
b25maWcoc3RydWN0IG10a19kZHBfY29tcCAqY29tcCwKPiAgCQkJCQkgICAgIHVuc2lnbmVkIGlu
dCBpZHgsCj4gLQkJCQkJICAgICBzdHJ1Y3QgbXRrX3BsYW5lX3N0YXRlICpzdGF0ZSkKPiArCQkJ
CQkgICAgIHN0cnVjdCBtdGtfcGxhbmVfc3RhdGUgKnN0YXRlLAo+ICsJCQkJCSAgICAgc3RydWN0
IGNtZHFfcGt0ICpjbWRxX3BrdCkKPiAgewo+ICAJaWYgKGNvbXAtPmZ1bmNzICYmIGNvbXAtPmZ1
bmNzLT5sYXllcl9jb25maWcpCj4gLQkJY29tcC0+ZnVuY3MtPmxheWVyX2NvbmZpZyhjb21wLCBp
ZHgsIHN0YXRlKTsKPiArCQljb21wLT5mdW5jcy0+bGF5ZXJfY29uZmlnKGNvbXAsIGlkeCwgc3Rh
dGUsIGNtZHFfcGt0KTsKPiAgfQo+ICAKPiAgc3RhdGljIGlubGluZSB2b2lkIG10a19kZHBfZ2Ft
bWFfc2V0KHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXAsCj4gLQkJCQkgICAgIHN0cnVjdCBkcm1f
Y3J0Y19zdGF0ZSAqc3RhdGUpCj4gKwkJCQkgICAgIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqc3Rh
dGUsCj4gKwkJCQkgICAgIHN0cnVjdCBjbWRxX3BrdCAqY21kcV9wa3QpCj4gIHsKPiAgCWlmIChj
b21wLT5mdW5jcyAmJiBjb21wLT5mdW5jcy0+Z2FtbWFfc2V0KQo+IC0JCWNvbXAtPmZ1bmNzLT5n
YW1tYV9zZXQoY29tcCwgc3RhdGUpOwo+ICsJCWNvbXAtPmZ1bmNzLT5nYW1tYV9zZXQoY29tcCwg
c3RhdGUsIGNtZHFfcGt0KTsKPiAgfQo+ICAKPiAgc3RhdGljIGlubGluZSB2b2lkIG10a19kZHBf
Y29tcF9iZ2Nscl9pbl9vbihzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wKQo+IEBAIC0xODcsNiAr
MTk3LDEzIEBAIGludCBtdGtfZGRwX2NvbXBfaW5pdChzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVj
dCBkZXZpY2Vfbm9kZSAqY29tcF9ub2RlLAo+ICBpbnQgbXRrX2RkcF9jb21wX3JlZ2lzdGVyKHN0
cnVjdCBkcm1fZGV2aWNlICpkcm0sIHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXApOwo+ICB2b2lk
IG10a19kZHBfY29tcF91bnJlZ2lzdGVyKHN0cnVjdCBkcm1fZGV2aWNlICpkcm0sIHN0cnVjdCBt
dGtfZGRwX2NvbXAgKmNvbXApOwo+ICB2b2lkIG10a19kaXRoZXJfc2V0KHN0cnVjdCBtdGtfZGRw
X2NvbXAgKmNvbXAsIHVuc2lnbmVkIGludCBicGMsCj4gLQkJICAgIHVuc2lnbmVkIGludCBDRkcp
Owo+IC0KPiArCQkgICAgdW5zaWduZWQgaW50IENGRywgc3RydWN0IGNtZHFfcGt0ICpjbWRxX3Br
dCk7Cj4gK2VudW0gbXRrX2RkcF9jb21wX3R5cGUgbXRrX2RkcF9jb21wX2dldF90eXBlKGVudW0g
bXRrX2RkcF9jb21wX2lkIGNvbXBfaWQpOwo+ICt2b2lkIG10a19kZHBfd3JpdGUoc3RydWN0IGNt
ZHFfcGt0ICpjbWRxX3BrdCwgdW5zaWduZWQgaW50IHZhbHVlLAo+ICsJCSAgIHN0cnVjdCBtdGtf
ZGRwX2NvbXAgKmNvbXAsIHVuc2lnbmVkIGludCBvZmZzZXQpOwo+ICt2b2lkIG10a19kZHBfd3Jp
dGVfcmVsYXhlZChzdHJ1Y3QgY21kcV9wa3QgKmNtZHFfcGt0LCB1bnNpZ25lZCBpbnQgdmFsdWUs
Cj4gKwkJCSAgIHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXAsIHVuc2lnbmVkIGludCBvZmZzZXQp
Owo+ICt2b2lkIG10a19kZHBfd3JpdGVfbWFzayhzdHJ1Y3QgY21kcV9wa3QgKmNtZHFfcGt0LCB1
bnNpZ25lZCBpbnQgdmFsdWUsCj4gKwkJCXN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXAsIHVuc2ln
bmVkIGludCBvZmZzZXQsCj4gKwkJCXVuc2lnbmVkIGludCBtYXNrKTsKPiAgI2VuZGlmIC8qIE1U
S19EUk1fRERQX0NPTVBfSCAqLwoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2RyaS1kZXZlbA==
