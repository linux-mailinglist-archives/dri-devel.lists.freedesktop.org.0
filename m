Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8E1FF2B001
	for <lists+dri-devel@lfdr.de>; Mon, 27 May 2019 10:19:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6FDB789A16;
	Mon, 27 May 2019 08:19:46 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wm1-x344.google.com (mail-wm1-x344.google.com
 [IPv6:2a00:1450:4864:20::344])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EF220899BB;
 Mon, 27 May 2019 08:19:29 +0000 (UTC)
Received: by mail-wm1-x344.google.com with SMTP id y3so15205298wmm.2;
 Mon, 27 May 2019 01:19:29 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=uK0Mrs5yWSzGtug9DHyijgzhxVTAvc037nQIpG9DVsU=;
 b=Hwvq1JR1OuAhBYZnDG+r2feyZocx0IR23oktV893dJswgvTaqtePAgu1wn2WpWK1M5
 cOcWKnLot80b9fxKCqdw/A4xEv98A6dzdo/IL+rLUB+X5HMqLT+UGoihueN/Yws1iXSX
 T3E34leLxqV7Z9Jf5rMi45wXRyo7/9CX+A1ZNkhkDn1IQQ4R5e2MklTSD909gWqimsMS
 Uvn4qF2guZfH2ZYBR0jF6rKcGeaLzuCJcUdR6IhMVcGNENEgT2rp93T7KLtzA6KD//cY
 x17WAehOvAV4POlPZXeL2Cgwd0aVpx7bEq73i6KCofCy0egQk3s8fboINs+Dkbjkd7V5
 C8Cg==
X-Gm-Message-State: APjAAAWZueg7YRBzZ5bl9PtNpLRBtktK/Jym7osMadE1jO1EQkNaXjLP
 YO9C3WI0WFtt3+LmQTjbyG5WkoXp
X-Google-Smtp-Source: APXvYqy0KYaQV6ceZRbELAzrsy48kV+QfK5k8O8N9uv+oqEU/kdKZCQzDSD+1/X6Anx3klvI3KiSBw==
X-Received: by 2002:a1c:e914:: with SMTP id q20mr4521586wmc.55.1558945166643; 
 Mon, 27 May 2019 01:19:26 -0700 (PDT)
Received: from localhost.localdomain
 (cpc91192-cmbg18-2-0-cust374.5-4.cable.virginm.net. [80.6.113.119])
 by smtp.gmail.com with ESMTPSA id a124sm7511876wmh.3.2019.05.27.01.19.25
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Mon, 27 May 2019 01:19:26 -0700 (PDT)
From: Emil Velikov <emil.l.velikov@gmail.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 13/13] drm: allow render capable master with DRM_AUTH ioctls
Date: Mon, 27 May 2019 09:17:41 +0100
Message-Id: <20190527081741.14235-13-emil.l.velikov@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190527081741.14235-1-emil.l.velikov@gmail.com>
References: <20190527081741.14235-1-emil.l.velikov@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=uK0Mrs5yWSzGtug9DHyijgzhxVTAvc037nQIpG9DVsU=;
 b=XZOQd6jw3swVOGIb7VG9lqItTEU5XjDJHCBlSdXY3uUncfZPpZfk+92/OdCFsRHxa4
 ymetwPK+DjT2JFi/HfriliO/xHKvTzXr4z+GmW+3D81jD06LMjmqmc+K4pAKINaj7qkm
 SGErI2NglyZHd0lbkxUIfxNPyMO9M+YX26YBgwAZ4wA02rlgd88nI5VzkbZczdfiisH6
 e4d3VIp3qJziCMiBFAxPiFda8dAq/nPhlxbv9x3SB8VPdt3M/EYwiAKnleEHBayl13VW
 HtqUy92O/eEtrSUE+8Edj9t+Yha7FuLiISv6THN1p9qi9uJT08gEgcumyPfufoYDsS8l
 AmDA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org, emil.l.velikov@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogRW1pbCBWZWxpa292IDxlbWlsLnZlbGlrb3ZAY29sbGFib3JhLmNvbT4KClRoZXJlIGFy
ZSBjYXNlcyAoaW4gbWVzYSBhbmQgYXBwbGljYXRpb25zKSB3aGVyZSBvbmUgd291bGQgb3BlbiB0
aGUKcHJpbWFyeSBub2RlIHdpdGhvdXQgcHJvcGVybHkgYXV0aGVudGljYXRpbmcgdGhlIGNsaWVu
dC4KClNvbWV0aW1lcyB3ZSBkb24ndCBjaGVjayBpZiB0aGUgYXV0aGVudGljYXRpb24gc3VjY2Vl
ZHMsIGJ1dCB0aGVyZSdzCmFsc28gY2FzZXMgd2Ugc2ltcGx5IGZvcmdldCB0byBkbyBpdC4KClRo
ZSBmb3JtZXIgd2FzIGEgY2FzZSBmb3IgTWVzYSB3aGVyZSBpdCBkaWQgbm90IG5vdCBjaGVjayB0
aGUgcmV0dXJuCnZhbHVlIG9mIGRybUdldE1hZ2ljKCkgWzFdLiBUaGF0IHdhcyBmaXhlZCByZWNl
bnRseSBhbHRob3VnaCwgdGhlcmUncwp0aGUgcXVlc3Rpb24gb2Ygb2xkZXIgZHJpdmVycyBvciBv
dGhlciBhcHBzIHRoYXQgZXhiaWJpdCB0aGlzIGJlaGF2aW91ci4KCldoaWxlIG9taXR0aW5nIHRo
ZSBjYWxsIHJlc3VsdHMgaW4gaXNzdWVzIGFzIHNlZW4gaW4gWzJdIGFuZCBbM10uCgpJbiB0aGUg
bGlidmEgY2FzZSwgbGlidmEgaXRzZWxmIGRvZXNuJ3QgYXV0aGVudGljYXRlIHRoZSBEUk0gY2xp
ZW50IGFuZAp0aGUgdmFHZXREaXNwbGF5RFJNIGRvY3VtZW50YXRpb24gZG9lc24ndCBtZW50aW9u
IGlmIHRoZSBhcHAgc2hvdWxkCmVpdGhlci4KCkFzIG9mIHRvZGF5LCB0aGUgb2ZmaWNpYWwgdmFp
bmZvIHV0aWxpdHkgZG9lc24ndCBhdXRoZW50aWNhdGUuCgpUbyB3b3JrYXJvdW5kIGlzc3VlcyBs
aWtlIHRoZXNlLCBzb21lIHVzZXJzIHJlc29ydCB0byBydW5uaW5nIHRoZWlyIGFwcHMKdW5kZXIg
c3Vkby4gV2hpY2ggYWRtaXR0ZWRseSBpc24ndCBhbHdheXMgYSBnb29kIGlkZWEuCgpTaW5jZSBh
bnkgRFJJVkVSX1JFTkRFUiBkcml2ZXIgaGFzIHN1ZmZpY2llbnQgaXNvbGF0aW9uIGJldHdlZW4g
Y2xpZW50cywKd2UgY2FuIHVzZSB0aGF0LCBmb3IgdW5hdXRoZW50aWNhdGVkIFtwcmltYXJ5IG5v
ZGVdIGlvY3RscyB0aGF0IHJlcXVpcmUKRFJNX0FVVEguIEJ1dCBvbmx5IGlmIHRoZSByZXNwZWN0
aXZlIGlvY3RsIGlzIHRhZ2dlZCBhcyBEUk1fUkVOREVSX0FMTE9XLgoKdjI6Ci0gUmV3b3JrL3Np
bXBsaWZ5IGlmIGNoZWNrIChEYW5pZWwgVikKLSBBZGQgZXhhbXBsZXMgdG8gY29tbWl0IG1lc3Nh
Z2VzLCBlbGFib3JhdGUuIChEYW5pZWwgVikKCnYzOgotIFVzZSBzaW5nbGUgdW5saWtlbHkgKERh
bmllbCBWKQoKdjQ6Ci0gUGF0Y2ggd2FzIHJldmVydGVkIGJlY2F1c2UgaXQgYnJva2UgQU1ER1BV
LCBhcHBseSBhZ2Fpbi4gVGhlIEFNREdQVQppc3N1ZSBpcyBmaXhlZCB3aXRoIGVhcmxpZXIgcGF0
Y2guCgpbMV0gaHR0cHM6Ly9naXRsYWIuZnJlZWRlc2t0b3Aub3JnL21lc2EvbWVzYS9ibG9iLzJi
YzFmNWMyZTcwZmUzYjRkNDFmMDYwYWY5ODU5YmMyYTk0YzViNjIvc3JjL2VnbC9kcml2ZXJzL2Ry
aTIvcGxhdGZvcm1fd2F5bGFuZC5jI0wxMTM2ClsyXSBodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9hcmNoaXZlcy9saWJ2YS8yMDE2LUp1bHkvMDA0MTg1Lmh0bWwKWzNdIGh0dHBzOi8vZ2l0
bGFiLmZyZWVkZXNrdG9wLm9yZy9tZXNhL2ttc2N1YmUvaXNzdWVzLzEKVGVzdGNhc2U6IGlndC9j
b3JlX3VuYXV0aF92c19yZW5kZXIKQ2M6IGludGVsLWdmeEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
U2lnbmVkLW9mZi1ieTogRW1pbCBWZWxpa292IDxlbWlsLnZlbGlrb3ZAY29sbGFib3JhLmNvbT4K
UmV2aWV3ZWQtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+Ckxpbms6
IGh0dHBzOi8vcGF0Y2h3b3JrLmZyZWVkZXNrdG9wLm9yZy9wYXRjaC9tc2dpZC8yMDE5MDExNDA4
NTQwOC4xNTkzMy0yLWVtaWwubC52ZWxpa292QGdtYWlsLmNvbQotLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9kcm1faW9jdGwuYyB8IDIwICsrKysrKysrKysrKysrKystLS0tCiAxIGZpbGUgY2hhbmdlZCwg
MTYgaW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vZHJtX2lvY3RsLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2lvY3RsLmMKaW5kZXggOTg0
MWMwMDc2ZjAyLi5iNjRiMDIyYTJiMjkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1f
aW9jdGwuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2lvY3RsLmMKQEAgLTUxMSw2ICs1MTEs
MTMgQEAgaW50IGRybV92ZXJzaW9uKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEs
CiAJcmV0dXJuIGVycjsKIH0KIAorc3RhdGljIGlubGluZSBib29sCitkcm1fcmVuZGVyX2RyaXZl
cl9hbmRfaW9jdGwoY29uc3Qgc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdTMyIGZsYWdzKQorewor
CXJldHVybiBkcm1fY29yZV9jaGVja19mZWF0dXJlKGRldiwgRFJJVkVSX1JFTkRFUikgJiYKKwkJ
KGZsYWdzICYgRFJNX1JFTkRFUl9BTExPVyk7Cit9CisKIC8qKgogICogZHJtX2lvY3RsX3Blcm1p
dCAtIENoZWNrIGlvY3RsIHBlcm1pc3Npb25zIGFnYWluc3QgY2FsbGVyCiAgKgpAQCAtNTI1LDE0
ICs1MzIsMTkgQEAgaW50IGRybV92ZXJzaW9uKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQg
KmRhdGEsCiAgKi8KIGludCBkcm1faW9jdGxfcGVybWl0KHUzMiBmbGFncywgc3RydWN0IGRybV9m
aWxlICpmaWxlX3ByaXYpCiB7CisJY29uc3Qgc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGZpbGVf
cHJpdi0+bWlub3ItPmRldjsKKwogCS8qIFJPT1RfT05MWSBpcyBvbmx5IGZvciBDQVBfU1lTX0FE
TUlOICovCiAJaWYgKHVubGlrZWx5KChmbGFncyAmIERSTV9ST09UX09OTFkpICYmICFjYXBhYmxl
KENBUF9TWVNfQURNSU4pKSkKIAkJcmV0dXJuIC1FQUNDRVM7CiAKLQkvKiBBVVRIIGlzIG9ubHkg
Zm9yIGF1dGhlbnRpY2F0ZWQgb3IgcmVuZGVyIGNsaWVudCAqLwotCWlmICh1bmxpa2VseSgoZmxh
Z3MgJiBEUk1fQVVUSCkgJiYgIWRybV9pc19yZW5kZXJfY2xpZW50KGZpbGVfcHJpdikgJiYKLQkJ
ICAgICAhZmlsZV9wcml2LT5hdXRoZW50aWNhdGVkKSkKLQkJcmV0dXJuIC1FQUNDRVM7CisJLyog
QVVUSCBpcyBvbmx5IGZvciBtYXN0ZXIgLi4uICovCisJaWYgKHVubGlrZWx5KChmbGFncyAmIERS
TV9BVVRIKSAmJiBkcm1faXNfcHJpbWFyeV9jbGllbnQoZmlsZV9wcml2KSkpIHsKKwkJLyogYXV0
aGVudGljYXRlZCBvbmVzLCBvciByZW5kZXIgY2FwYWJsZSBvbiBEUk1fUkVOREVSX0FMTE9XLiAq
LworCQlpZiAoIWZpbGVfcHJpdi0+YXV0aGVudGljYXRlZCAmJgorCQkgICAgIWRybV9yZW5kZXJf
ZHJpdmVyX2FuZF9pb2N0bChkZXYsIGZsYWdzKSkKKwkJCXJldHVybiAtRUFDQ0VTOworCX0KIAog
CS8qIE1BU1RFUiBpcyBvbmx5IGZvciBtYXN0ZXIgb3IgY29udHJvbCBjbGllbnRzICovCiAJaWYg
KHVubGlrZWx5KChmbGFncyAmIERSTV9NQVNURVIpICYmCi0tIAoyLjIxLjAKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
