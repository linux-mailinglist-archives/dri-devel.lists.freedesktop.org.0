Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3C0AF96AB5
	for <lists+dri-devel@lfdr.de>; Tue, 20 Aug 2019 22:34:57 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CCCDC891A6;
	Tue, 20 Aug 2019 20:34:53 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5D918890F0
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 20:34:52 +0000 (UTC)
Received: from mail-qt1-f198.google.com (mail-qt1-f198.google.com
 [209.85.160.198])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id DD94080F81
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 20:34:51 +0000 (UTC)
Received: by mail-qt1-f198.google.com with SMTP id p56so139893qtb.10
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 13:34:51 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:message-id:subject:from:to:cc:date:in-reply-to
 :references:organization:user-agent:mime-version
 :content-transfer-encoding;
 bh=JwQtlwBXFTn8hz2MHl96VDfmYy22KHoSkXx0iLqNLqE=;
 b=mwP016jrwtujv2c7Pwy1LAJI6GZOJLItyArfi2NMxKhJHgJnzE4RCAUKpjzXyeKaCy
 +j1+N2oynSheE30aubjdwk9ONIrh+TwAu++DMm2488bwEgQc3IvYW+I/9eJEX/Y6YpxG
 zL1GFo0FVpPO1/nRHdiJlhgyciXMfyxxA7Jk6e018bZJP+5soUvinMOuZYctw0NLUKbK
 Wyjzm2xgvr08pU4sdfT68xCGreHUoGX8TWO1YR/d8Ls6SY3zvaAzt/zGTDMnDo3S5pnC
 JfhK9YPOCjZpDyevT7/19ngx2TbqB+VfCgn1thCFyrHN+uvG6ViJdWL+CHIQYhorsdIY
 9k7g==
X-Gm-Message-State: APjAAAXwJIAnA25Gh+QXgPCcJCaQO4HKZE9xnGxaT7Vf30eV0VCTABiD
 EXlNwqP9sQioKJ+M1ziw0o2gq70PqASjPleuPZp6HypE1gZLnr4UbWm0Pll+bEjtK5BoBgBqip+
 VmCmMEOrGAPBdu+s9b0WQelLdCOon
X-Received: by 2002:a37:9c94:: with SMTP id
 f142mr24732555qke.427.1566333291191; 
 Tue, 20 Aug 2019 13:34:51 -0700 (PDT)
X-Google-Smtp-Source: APXvYqyX44nglajuG8SzzGLtL7EXkBrLx39RYIhex6o4dVdhUZ33l0LkDODSuOPqXswa2ueKSNXLWQ==
X-Received: by 2002:a37:9c94:: with SMTP id
 f142mr24732536qke.427.1566333290867; 
 Tue, 20 Aug 2019 13:34:50 -0700 (PDT)
Received: from dhcp-10-20-1-11.bss.redhat.com ([144.121.20.162])
 by smtp.gmail.com with ESMTPSA id h1sm11931090qtc.92.2019.08.20.13.34.50
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 20 Aug 2019 13:34:50 -0700 (PDT)
Message-ID: <8a57eccc9f470178251e7955c7f5b3e874b43b99.camel@redhat.com>
Subject: Re: [PATCH v2 11/14] drm/amd/display: Validate DSC caps on MST
 endpoints
From: Lyude Paul <lyude@redhat.com>
To: David Francis <David.Francis@amd.com>, dri-devel@lists.freedesktop.org, 
 amd-gfx@lists.freedesktop.org
Date: Tue, 20 Aug 2019 16:34:49 -0400
In-Reply-To: <20190820191203.25807-12-David.Francis@amd.com>
References: <20190820191203.25807-1-David.Francis@amd.com>
 <20190820191203.25807-12-David.Francis@amd.com>
Organization: Red Hat
User-Agent: Evolution 3.32.4 (3.32.4-1.fc30) 
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Wenjing Liu <Wenjing.Liu@amd.com>, Nikola Cornij <Nikola.Cornij@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGksIEkgd2FzIGxvb2tpbmcgdGhyb3VnaCBwYXRjaHdvcmsgYW5kIGp1c3Qgbm90aWNlZCB0aGlz
IHNlcmllcy4gSSd2ZSBiZWVuCndvcmtpbmcgb24gdHJ5aW5nIHRvIHJld29yayBhIGxvdCBvZiB0
aGUgZHJtIE1TVCBoZWxwZXJzIChjdXJyZW50bHkgb24gaG9sZApmb3IgYSBzaG9ydCBiaXQgd2hp
bGUgSSBmaXggc29tZSBvdGhlciB1bnJlbGF0ZWQgaXNzdWVzIGF0IHdvcmsuLi4pLCBhbmQgb25l
Cm9mIHRoZSB0aGluZ3Mgd2UncmUgY3VycmVudGx5IG1pc3Npbmcgd2l0aCBvdXIgaGVscGVycyBh
cmUgaGVscGVycyBmb3IKaGFuZGxpbmcgY2hlY2tpbmcgdGhlIFBCTiBvZiBkb3duc3RyZWFtIHNp
bmtzICh3aGljaCBjb3VsZCBiZSBhZGRlZCB0bwpkcm1fZHBfbXN0X2F0b21pY19jaGVjaygpKS4g
QXMgd2VsbCwgaXQgbG9va3MgbGlrZSB5b3UgY291bGQgYWxzbyBhZGQgYSBEUk0KaGVscGVyIGZv
ciBjaGVja2luZyBmb3IgRFNDL0ZFQyBzdXBwb3J0IG9uIG1zdGJzLiBUaG91Z2h0cz8KCk9uIFR1
ZSwgMjAxOS0wOC0yMCBhdCAxNToxMiAtMDQwMCwgRGF2aWQgRnJhbmNpcyB3cm90ZToKPiBUaGUg
Zmlyc3Qgc3RlcCBpbiBNU1QgRFNDIGlzIGNoZWNraW5nIE1TVCBlbmRwb2ludHMKPiB0byBzZWUg
aG93IERTQyBjYW4gYmUgZW5hYmxlZAo+IAo+IENhc2UgMTogRFAtdG8tRFAgcGVlciBkZXZpY2UK
PiBpZiB0aGUgYnJhbmNoIGltbWVkaWF0ZWx5IHVwc3RyZWFtIGhhcwo+ICAtIFBEVCA9IERQX1BF
RVJfREVWSUNFX0RQX01TVF9CUkFOQ0hJTkcgKDIpCj4gIC0gRFBDRCByZXYuID49IERQIDEuNAo+
ICAtIEV4YWN0bHkgb25lIGlucHV0IGFuZCBvbmUgb3V0cHV0Cj4gIC0gVGhlIG91dHB1dCBoYXMg
UERUID0gRFBfUEVFUl9ERVZJQ0VfU1NUX1NJTksgKDMpCj4gCj4gSW4gdGhpcyBjYXNlLCBEU0Mg
Y291bGQgYmUgcG9zc2libGUgZWl0aGVyIG9uIHRoZSBlbmRwb2ludAo+IG9yIHRoZSBwZWVyIGRl
dmljZS4gUHJlZmVyIHRoZSBlbmRwb2ludCwgd2hpY2ggaXMgcG9zc2libGUgaWYKPiAgLSBUaGUg
ZW5kcG9pbnQgaGFzIERQX0RTQ19ERUNPTVBSRVNTSU9OX0lTX1NVUFBPUlRFRCBiaXQgc2V0Cj4g
IC0gVGhlIGVuZHBvaW50IGhhcyBEUF9GRUNfQ0FQQUJMRSBiaXQgc2V0Cj4gIC0gVGhlIHBlZXIg
ZGV2aWNlIGhhcyBEU0NfUEFTU1RIUk9VR0hfQ0FQQUJJTElUWSBiaXQgc2V0IChmcm9tIERQIHYy
LjApCj4gCj4gT3RoZXJ3aXNlLCB1c2UgdGhlIHBlZXIgZGV2aWNlCj4gCj4gQ2FzZSAyOiBEUC10
by1IRE1JIHBlZXIgZGV2aWNlCj4gSWYgdGhlIG91dHB1dCBwb3J0IGhhcwo+ICAtIFBEVCA9IERQ
X1BFRVJfREVWSUNFX0RQX0xFR0FDWV9DT05WICg0KQo+ICAtIERQQ0QgcmV2LiA+PSBEUCAxLjQK
PiAgLSBMRFBTID0gdHJ1ZQo+ICAtIE1DUyA9IGZhbHNlCj4gCj4gSW4gdGhpcyBjYXNlLCBEU0Mg
Y2FuIG9ubHkgYmUgYXR0ZW1wdGVkIG9uIHRoZSBwZWVyIGRldmljZQo+ICh0aGUgb3V0cHV0IHBv
cnQpCj4gCj4gQ2FzZSAzOiBWaXJ0dWFsIERQIFNpbmsgKEludGVybmFsIERpc3BsYXkgUGFuZWwp
Cj4gSWYgdGhlIG91dHB1dCBwb3J0IGhhcwo+ICAtIERQQ0QgcmV2LiA+PSBEUCAxLjQKPiAgLSBw
b3J0X251bSA+PSA4Cj4gCj4gSW4gdGhpcyBjYXNlLCBEU0MgY2FuIG9ubHkgYmUgYXR0ZW1wdGVk
IG9uIHRoZSBwZWVyIGRldmljZQo+ICh0aGUgb3V0cHV0IHBvcnQpCj4gCj4gQ2FzZSA0OiBTeW5h
cHRpeCBXb3JrYXJvdW5kCj4gSWYgdGhlIG91dHB1dCBoYXMKPiAgLSBsaW5rIERQQ0QgcmV2LiA+
PSBEUCAxLjQKPiAgLSBsaW5rIGJyYW5jaF9kZXZfaWQgPSAweDkwQ0MyNCAoU3luYXB0aXgpCj4g
IC0gVGhlcmUgaXMgZXhhY3RseSBvbmUgYnJhbmNoIGRldmljZSBiZXR3ZWVuIHRoZSBsaW5rIGFu
ZCBvdXRwdXQKPiAKPiBJbiB0aGlzIGNhc2UsIERTQyBjYW4gYmUgYXR0ZW1wdGVkLCBidXQgb25s
eSB1c2luZyB0aGUgKmxpbmsqCj4gYXV4IGRldmljZSdzIGNhcHMuIFRoaXMgaXMgYSBxdWlyay4K
PiAKPiBUZXN0IGZvciB0aGVzZSBjYXNlcyBhcyBtb2RlcyBhcmUgZW51bWVyYXRlZCBmb3IgYW4g
TVNUIGVuZHBvaW50Lgo+IFdlIGNhbm5vdCBkbyB0aGlzIGR1cmluZyBsaW5rIGF0dGFjaCBiZWNh
dXNlIHRoZSBkY19zaW5rIG9iamVjdAo+IHdpbGwgbm90IGhhdmUgYmVlbiBjcmVhdGVkIHlldAo+
IAo+IElmIG5vIERTQyBpcyBhdHRlbXB0ZWQsIHplcm8gdGhlIERTQyBjYXBzCj4gCj4gQ2M6IFdl
bmppbmcgTGl1IDxXZW5qaW5nLkxpdUBhbWQuY29tPgo+IENjOiBOaWtvbGEgQ29ybmlqIDxOaWtv
bGEuQ29ybmlqQGFtZC5jb20+Cj4gU2lnbmVkLW9mZi1ieTogRGF2aWQgRnJhbmNpcyA8RGF2aWQu
RnJhbmNpc0BhbWQuY29tPgo+IC0tLQo+ICAuLi4vZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2Rt
X21zdF90eXBlcy5jICAgfCAxMjMgKysrKysrKysrKysrKysrKystCj4gIC4uLi9kaXNwbGF5L2Ft
ZGdwdV9kbS9hbWRncHVfZG1fbXN0X3R5cGVzLmggICB8ICAgMyArCj4gIDIgZmlsZXMgY2hhbmdl
ZCwgMTI1IGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1fbXN0X3R5cGVzLmMK
PiBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0vYW1kZ3B1X2RtX21zdF90
eXBlcy5jCj4gaW5kZXggMTYyMThhMjAyYjU5Li41ODU3MTg0NGY2ZDUgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG1fbXN0X3R5cGVz
LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9k
bV9tc3RfdHlwZXMuYwo+IEBAIC0yNSw2ICsyNSw3IEBACj4gIAo+ICAjaW5jbHVkZSA8bGludXgv
dmVyc2lvbi5oPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfaGVscGVyLmg+Cj4gKyNpbmNs
dWRlIDxkcm0vZHJtX2RwX21zdF9oZWxwZXIuaD4KPiAgI2luY2x1ZGUgImRtX3NlcnZpY2VzLmgi
Cj4gICNpbmNsdWRlICJhbWRncHUuaCIKPiAgI2luY2x1ZGUgImFtZGdwdV9kbS5oIgo+IEBAIC0x
ODksNiArMTkwLDEyMCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfZnVuY3MK
PiBkbV9kcF9tc3RfY29ubmVjdG9yX2Z1bmNzID0gewo+ICAJLmVhcmx5X3VucmVnaXN0ZXIgPSBh
bWRncHVfZG1fbXN0X2Nvbm5lY3Rvcl9lYXJseV91bnJlZ2lzdGVyLAo+ICB9Owo+ICAKPiArYm9v
bCBpc192aXJ0dWFsX2RwY2Qoc3RydWN0IGRybV9kcF9tc3RfcG9ydCAqcG9ydCkKPiArewo+ICsJ
c3RydWN0IGRybV9kcF9tc3RfcG9ydCAqZG93bnN0cmVhbV9wb3J0Owo+ICsKPiArCWlmICghcG9y
dCkKPiArCQlyZXR1cm4gZmFsc2U7Cj4gKwo+ICsJaWYgKHBvcnQtPnBvcnRfbnVtID49IDggJiYK
PiArCQlwb3J0LT5kcGNkX3JldiA+PSBEUF9EUENEX1JFVl8xNCkgewo+ICsJCS8qIFZpcnR1YWwg
RFAgU2luayAoSW50ZXJuYWwgRGlzcGxheSBQYW5lbCkgKi8KPiArCQlyZXR1cm4gdHJ1ZTsKPiAr
CX0gZWxzZSBpZiAocG9ydC0+cGR0ID09IERQX1BFRVJfREVWSUNFX0RQX0xFR0FDWV9DT05WICYm
Cj4gKwkJCSFwb3J0LT5tY3MgJiYKPiArCQkJcG9ydC0+bGRwcyAmJgo+ICsJCQlwb3J0LT5kcGNk
X3JldiA+PSBEUF9EUENEX1JFVl8xNCkgewo+ICsJCS8qIERQLXRvLUhETUkgUHJvdG9jb2wgQ29u
dmVydGVyICovCj4gKwkJcmV0dXJuIHRydWU7Cj4gKwl9IGVsc2UgaWYgKHBvcnQtPnBkdCA9PSBE
UF9QRUVSX0RFVklDRV9NU1RfQlJBTkNISU5HICYmCj4gKwkJCXBvcnQtPm1zdGIgJiYKPiArCQkJ
cG9ydC0+ZHBjZF9yZXYgPj0gRFBfRFBDRF9SRVZfMTQpIHsKPiArCQkvKiBEUC10by1EUCAqLwo+
ICsJCWlmIChwb3J0LT5tc3RiLT5udW1fcG9ydHMgPT0gMikgewo+ICsJCQlsaXN0X2Zvcl9lYWNo
X2VudHJ5KGRvd25zdHJlYW1fcG9ydCwgJnBvcnQtPm1zdGItCj4gPnBvcnRzLCBuZXh0KSB7Cj4g
KwkJCQlpZiAoIWRvd25zdHJlYW1fcG9ydC0+aW5wdXQgJiYKPiArCQkJCQkJZG93bnN0cmVhbV9w
b3J0LT5wZHQgPT0KPiBEUF9QRUVSX0RFVklDRV9TU1RfU0lOSykKPiArCQkJCQlyZXR1cm4gdHJ1
ZTsKPiArCQkJfQo+ICsJCX0KPiArCX0KPiArCXJldHVybiBmYWxzZTsKPiArfQo+ICsKPiArYm9v
bCBzeW5hcHRpeF93b3JrYXJvdW5kKHN0cnVjdCBhbWRncHVfZG1fY29ubmVjdG9yICphY29ubmVj
dG9yKQo+ICt7Cj4gKwlzdHJ1Y3QgZHJtX2RwX21zdF9wb3J0ICpwb3J0ID0gYWNvbm5lY3Rvci0+
cG9ydDsKPiArCXN0cnVjdCBkY19saW5rICpsaW5rID0gYWNvbm5lY3Rvci0+ZGNfc2luay0+bGlu
azsKPiArCXU4IGRvd25fc3RyZWFtX3BvcnRfZGF0YTsKPiArCj4gKwlpZiAocG9ydC0+bWdyLT5t
c3RfcHJpbWFyeSA9PSBwb3J0LT5wYXJlbnQgJiYKPiArCQkJbGluay0+ZHBjZF9jYXBzLmJyYW5j
aF9kZXZfaWQgPT0gMHg5MENDMjQgJiYKPiArCQkJbGluay0+ZHBjZF9jYXBzLmRwY2RfcmV2LnJh
dyA+PSBEUF9EUENEX1JFVl8xNCkgewo+ICsJCWRybV9kcF9tc3RfZHBjZF9yZWFkKCZwb3J0LT5h
dXgsIERQX0RPV05TVFJFQU1QT1JUX1BSRVNFTlQsCj4gJmRvd25fc3RyZWFtX3BvcnRfZGF0YSwg
MSk7Cj4gKwkJaWYgKChkb3duX3N0cmVhbV9wb3J0X2RhdGEgJiA3KSAhPSAzKQo+ICsJCQlyZXR1
cm4gdHJ1ZTsKPiArCX0KPiArCXJldHVybiBmYWxzZTsKPiArfQo+ICsKPiArI2lmZGVmIENPTkZJ
R19EUk1fQU1EX0RDX0RTQ19TVVBQT1JUCj4gK3N0YXRpYyBib29sIHZhbGlkYXRlX2RzY19jYXBz
X29uX2Nvbm5lY3RvcihzdHJ1Y3QgYW1kZ3B1X2RtX2Nvbm5lY3Rvcgo+ICphY29ubmVjdG9yKQo+
ICt7Cj4gKwl1OCB1cHN0cmVhbV9kc2NfY2Fwc1sxNl0gPSB7IDAgfTsKPiArCXU4IGVuZHBvaW50
X2RzY19jYXBzWzE2XSA9IHsgMCB9Owo+ICsJdTggZW5kcG9pbnRfZmVjX2NhcHMgPSAwOwo+ICsJ
c3RydWN0IGRjX3NpbmsgKmRjX3NpbmsgPSBhY29ubmVjdG9yLT5kY19zaW5rOwo+ICsJc3RydWN0
IGRybV9kcF9tc3RfcG9ydCAqb3V0cHV0X3BvcnQgPSBhY29ubmVjdG9yLT5wb3J0Owo+ICsJc3Ry
dWN0IGRybV9kcF9tc3RfcG9ydCAqaW1tZWRpYXRlX3Vwc3RyZWFtX3BvcnQ7Cj4gKwlzdHJ1Y3Qg
ZHJtX2RwX21zdF9wb3J0ICpmZWNfcG9ydDsKPiArCj4gKwlpZiAoYWNvbm5lY3Rvci0+cG9ydCAm
JiBhY29ubmVjdG9yLT5wb3J0LT5wYXJlbnQpCj4gKwkJaW1tZWRpYXRlX3Vwc3RyZWFtX3BvcnQg
PSBhY29ubmVjdG9yLT5wb3J0LT5wYXJlbnQtCj4gPnBvcnRfcGFyZW50Owo+ICsJZWxzZQo+ICsJ
CWltbWVkaWF0ZV91cHN0cmVhbV9wb3J0ID0gTlVMTDsKPiArCj4gKwlmZWNfcG9ydCA9IGltbWVk
aWF0ZV91cHN0cmVhbV9wb3J0Owo+ICsJd2hpbGUgKGZlY19wb3J0KSB7Cj4gKwkJaWYgKCFmZWNf
cG9ydC0+ZmVjX2NhcGFibGUpCj4gKwkJCXJldHVybiBmYWxzZTsKPiArCj4gKwkJZmVjX3BvcnQg
PSBmZWNfcG9ydC0+cGFyZW50LT5wb3J0X3BhcmVudDsKPiArCX0KPiArCj4gKwlpZiAoaW1tZWRp
YXRlX3Vwc3RyZWFtX3BvcnQpCj4gKwkJZHJtX2RwX21zdF9kcGNkX3JlYWQoJmltbWVkaWF0ZV91
cHN0cmVhbV9wb3J0LT5hdXgsCj4gRFBfRFNDX1NVUFBPUlQsIHVwc3RyZWFtX2RzY19jYXBzLCAx
Nik7Cj4gKwlkcm1fZHBfbXN0X2RwY2RfcmVhZCgmb3V0cHV0X3BvcnQtPmF1eCwgRFBfRFNDX1NV
UFBPUlQsCj4gZW5kcG9pbnRfZHNjX2NhcHMsIDE2KTsKPiArCWRybV9kcF9tc3RfZHBjZF9yZWFk
KCZvdXRwdXRfcG9ydC0+YXV4LCBEUF9GRUNfQ0FQQUJJTElUWSwKPiAmZW5kcG9pbnRfZmVjX2Nh
cHMsIDEpOwo+ICsKPiArCWlmIChpc192aXJ0dWFsX2RwY2QoaW1tZWRpYXRlX3Vwc3RyZWFtX3Bv
cnQpCj4gKwkJCSYmICh1cHN0cmVhbV9kc2NfY2Fwc1swXSAmIDB4MikgLyogRFNDIHBhc3N0aHJv
dWdoCj4gY2FwYWJpbGl0eSAqLwo+ICsJCQkmJiAoZW5kcG9pbnRfZmVjX2NhcHMgJiBEUF9GRUNf
Q0FQQUJMRSkKPiArCQkJJiYgKGVuZHBvaW50X2RzY19jYXBzWzBdICYKPiBEUF9EU0NfREVDT01Q
UkVTU0lPTl9JU19TVVBQT1JURUQpKSB7Cj4gKwkJLyogRW5wb2ludCBkZWNvbXByZXNzaW9uIHdp
dGggRFAtdG8tRFAgcGVlciBkZXZpY2UgKi8KPiArCQlpZiAoIWRjX2RzY19wYXJzZV9kc2NfZHBj
ZChlbmRwb2ludF9kc2NfY2FwcywgTlVMTCwgJmRjX3NpbmstCj4gPnNpbmtfZHNjX2NhcHMuZHNj
X2RlY19jYXBzKSkKPiArCQkJcmV0dXJuIGZhbHNlOwo+ICsKPiArCQlkY19zaW5rLT5zaW5rX2Rz
Y19jYXBzLmlzX3ZpcnR1YWxfZHBjZF9kc2MgPSBmYWxzZTsKPiArCX0gZWxzZSBpZiAoaXNfdmly
dHVhbF9kcGNkKGltbWVkaWF0ZV91cHN0cmVhbV9wb3J0KSkgewo+ICsJCS8qIFZpcnR1YWwgRFBD
RCBkZWNvbXByZXNzaW9uIHdpdGggRFAtdG8tRFAgcGVlciBkZXZpY2UgKi8KPiArCQlpZiAoIWRj
X2RzY19wYXJzZV9kc2NfZHBjZCh1cHN0cmVhbV9kc2NfY2FwcywgTlVMTCwgJmRjX3NpbmstCj4g
PnNpbmtfZHNjX2NhcHMuZHNjX2RlY19jYXBzKSkKPiArCQkJcmV0dXJuIGZhbHNlOwo+ICsKPiAr
CQlkY19zaW5rLT5zaW5rX2RzY19jYXBzLmlzX3ZpcnR1YWxfZHBjZF9kc2MgPSB0cnVlOwo+ICsJ
fSBlbHNlIGlmIChpc192aXJ0dWFsX2RwY2Qob3V0cHV0X3BvcnQpKSB7Cj4gKwkJLyogVmlydHVh
bCBEUENEIGRlY29tcHJlc3Npb24gd2l0aCBEUC10by1IRE1JIG9yIFZpcnR1YWwgRFAKPiBTaW5r
ICovCj4gKwkJaWYgKCFkY19kc2NfcGFyc2VfZHNjX2RwY2QoZW5kcG9pbnRfZHNjX2NhcHMsIE5V
TEwsICZkY19zaW5rLQo+ID5zaW5rX2RzY19jYXBzLmRzY19kZWNfY2FwcykpCj4gKwkJCXJldHVy
biBmYWxzZTsKPiArCj4gKwkJZGNfc2luay0+c2lua19kc2NfY2Fwcy5pc192aXJ0dWFsX2RwY2Rf
ZHNjID0gdHJ1ZTsKPiArCX0gZWxzZSBpZiAoc3luYXB0aXhfd29ya2Fyb3VuZChhY29ubmVjdG9y
KSkgewo+ICsJCS8qIFN5bmFwdGl4IHdvcmthcm91bmQgKi8KPiArCQlhY29ubmVjdG9yID0gZGNf
c2luay0+bGluay0+cHJpdjsKPiArCQlkcm1fZHBfZHBjZF9yZWFkKCZhY29ubmVjdG9yLT5kbV9k
cF9hdXguYXV4LCBEUF9EU0NfU1VQUE9SVCwKPiB1cHN0cmVhbV9kc2NfY2FwcywgMTYpOwo+ICsJ
CWlmICghZGNfZHNjX3BhcnNlX2RzY19kcGNkKHVwc3RyZWFtX2RzY19jYXBzLCBOVUxMLCAmZGNf
c2luay0KPiA+c2lua19kc2NfY2Fwcy5kc2NfZGVjX2NhcHMpKQo+ICsJCQlyZXR1cm4gZmFsc2U7
Cj4gKwo+ICsJCWRjX3NpbmstPnNpbmtfZHNjX2NhcHMuaXNfdmlydHVhbF9kcGNkX2RzYyA9IHRy
dWU7Cj4gKwl9IGVsc2Ugewo+ICsJCXJldHVybiBmYWxzZTsKPiArCX0KPiArCj4gKwlyZXR1cm4g
dHJ1ZTsKPiArfQo+ICsjZW5kaWYKPiArCj4gIHN0YXRpYyBpbnQgZG1fZHBfbXN0X2dldF9tb2Rl
cyhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQo+ICB7Cj4gIAlzdHJ1Y3QgYW1kZ3B1
X2RtX2Nvbm5lY3RvciAqYWNvbm5lY3RvciA9Cj4gdG9fYW1kZ3B1X2RtX2Nvbm5lY3Rvcihjb25u
ZWN0b3IpOwo+IEBAIC0yMzEsMTAgKzM0NiwxNiBAQCBzdGF0aWMgaW50IGRtX2RwX21zdF9nZXRf
bW9kZXMoc3RydWN0IGRybV9jb25uZWN0b3IKPiAqY29ubmVjdG9yKQo+ICAJCS8qIGRjX2xpbmtf
YWRkX3JlbW90ZV9zaW5rIHJldHVybnMgYSBuZXcgcmVmZXJlbmNlICovCj4gIAkJYWNvbm5lY3Rv
ci0+ZGNfc2luayA9IGRjX3Npbms7Cj4gIAo+IC0JCWlmIChhY29ubmVjdG9yLT5kY19zaW5rKQo+
ICsJCWlmIChhY29ubmVjdG9yLT5kY19zaW5rKSB7Cj4gIAkJCWFtZGdwdV9kbV91cGRhdGVfZnJl
ZXN5bmNfY2FwcygKPiAgCQkJCQljb25uZWN0b3IsIGFjb25uZWN0b3ItPmVkaWQpOwo+ICAKPiAr
I2lmZGVmIENPTkZJR19EUk1fQU1EX0RDX0RTQ19TVVBQT1JUCj4gKwkJCWlmICghdmFsaWRhdGVf
ZHNjX2NhcHNfb25fY29ubmVjdG9yKGFjb25uZWN0b3IpKQo+ICsJCQkJbWVtc2V0KCZhY29ubmVj
dG9yLT5kY19zaW5rLT5zaW5rX2RzY19jYXBzLAo+ICsJCQkJICAgICAgIDAsIHNpemVvZihhY29u
bmVjdG9yLT5kY19zaW5rLQo+ID5zaW5rX2RzY19jYXBzKSk7Cj4gKyNlbmRpZgo+ICsJCX0KPiAg
CX0KPiAgCj4gIAlkcm1fY29ubmVjdG9yX3VwZGF0ZV9lZGlkX3Byb3BlcnR5KAo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbV9tc3Rf
dHlwZXMuaAo+IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVf
ZG1fbXN0X3R5cGVzLmgKPiBpbmRleCAyZGE4NTFiNDAwNDIuLjhkZTNkOGMzMGY4ZCAxMDA2NDQK
PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbV9t
c3RfdHlwZXMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvZGlzcGxheS9hbWRncHVfZG0v
YW1kZ3B1X2RtX21zdF90eXBlcy5oCj4gQEAgLTMyLDQgKzMyLDcgQEAgc3RydWN0IGFtZGdwdV9k
bV9jb25uZWN0b3I7Cj4gIHZvaWQgYW1kZ3B1X2RtX2luaXRpYWxpemVfZHBfY29ubmVjdG9yKHN0
cnVjdCBhbWRncHVfZGlzcGxheV9tYW5hZ2VyICpkbSwKPiAgCQkJCSAgICAgICBzdHJ1Y3QgYW1k
Z3B1X2RtX2Nvbm5lY3Rvcgo+ICphY29ubmVjdG9yKTsKPiAgCj4gK2Jvb2wgaXNfdmlydHVhbF9k
cGNkKHN0cnVjdCBkcm1fZHBfbXN0X3BvcnQgKnBvcnQpOwo+ICtib29sIHN5bmFwdGl4X3dvcmth
cm91bmQoc3RydWN0IGFtZGdwdV9kbV9jb25uZWN0b3IgKmFjb25uZWN0b3IpOwo+ICsKPiAgI2Vu
ZGlmCi0tIApDaGVlcnMsCglMeXVkZSBQYXVsCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9kcmktZGV2ZWw=
