Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E4FCA8D02A
	for <lists+dri-devel@lfdr.de>; Wed, 14 Aug 2019 12:00:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AF5616E4A0;
	Wed, 14 Aug 2019 10:00:00 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from honk.sigxcpu.org (honk.sigxcpu.org [24.134.29.49])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B9CF46E4A0;
 Wed, 14 Aug 2019 09:59:59 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by honk.sigxcpu.org (Postfix) with ESMTP id DCDA3FB03;
 Wed, 14 Aug 2019 11:59:57 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at honk.sigxcpu.org
Received: from honk.sigxcpu.org ([127.0.0.1])
 by localhost (honk.sigxcpu.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id G7dcEz7B1N2M; Wed, 14 Aug 2019 11:59:56 +0200 (CEST)
Received: by bogon.sigxcpu.org (Postfix, from userid 1000)
 id BB42A428E0; Wed, 14 Aug 2019 11:59:55 +0200 (CEST)
Date: Wed, 14 Aug 2019 11:59:55 +0200
From: Guido =?iso-8859-1?Q?G=FCnther?= <agx@sigxcpu.org>
To: Lucas Stach <l.stach@pengutronix.de>
Subject: Re: [PATCH v3 7/8] drm/etnaviv: provide MMU context to
 etnaviv_gem_mapping_get
Message-ID: <20190814095955.GA16514@bogon.m.sigxcpu.org>
References: <20190809120424.32679-1-l.stach@pengutronix.de>
 <20190809120424.32679-7-l.stach@pengutronix.de>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190809120424.32679-7-l.stach@pengutronix.de>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: etnaviv@lists.freedesktop.org, dri-devel@lists.freedesktop.org,
 patchwork-lst@pengutronix.de, kernel@pengutronix.de,
 Russell King <linux+etnaviv@armlinux.org.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGksCk9uIEZyaSwgQXVnIDA5LCAyMDE5IGF0IDAyOjA0OjIzUE0gKzAyMDAsIEx1Y2FzIFN0YWNo
IHdyb3RlOgo+IEluIHByZXBhcmF0aW9uIHRvIGhhdmluZyBhIGNvbnRleHQgcGVyIHByb2Nlc3Ms
IGV0bmF2aXZfZ2VtX21hcHBpbmdfZ2V0Cj4gc2hvdWxkIG5vdCB1c2UgdGhlIGN1cnJlbnQgR1BV
IGNvbnRleHQsIGJ1dCBuZWVkcyB0byBiZSB0b2xkIHdoaWNoCj4gY29udGV4dCB0byB1c2UuCj4g
Cj4gU2lnbmVkLW9mZi1ieTogTHVjYXMgU3RhY2ggPGwuc3RhY2hAcGVuZ3V0cm9uaXguZGU+Cj4g
UmV2aWV3ZWQtYnk6IFBoaWxpcHAgWmFiZWwgPHAuemFiZWxAcGVuZ3V0cm9uaXguZGU+Cj4gLS0t
Cj4gIGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmMgICAgICAgIHwgMjIgKysr
KysrKysrKysrLS0tLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW0u
aCAgICAgICAgfCAgMyArKy0KPiAgZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW1f
c3VibWl0LmMgfCAgMyArKy0KPiAgMyBmaWxlcyBjaGFuZ2VkLCAxNyBpbnNlcnRpb25zKCspLCAx
MSBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYv
ZXRuYXZpdl9nZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmMKPiBp
bmRleCAwY2NjM2M0ZGZmYzQuLjA0YzgxNzBmNzZjZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2
aXYvZXRuYXZpdl9nZW0uYwo+IEBAIC0yNDgsNyArMjQ4LDggQEAgdm9pZCBldG5hdml2X2dlbV9t
YXBwaW5nX3VucmVmZXJlbmNlKHN0cnVjdCBldG5hdml2X3ZyYW1fbWFwcGluZyAqbWFwcGluZykK
PiAgfQo+ICAKPiAgc3RydWN0IGV0bmF2aXZfdnJhbV9tYXBwaW5nICpldG5hdml2X2dlbV9tYXBw
aW5nX2dldCgKPiAtCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZXRuYXZpdl9n
cHUgKmdwdSkKPiArCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZXRuYXZpdl9n
cHUgKmdwdSwKPiArCXN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQgKm1tdV9jb250ZXh0KQo+
ICB7Cj4gIAlzdHJ1Y3QgZXRuYXZpdl9nZW1fb2JqZWN0ICpldG5hdml2X29iaiA9IHRvX2V0bmF2
aXZfYm8ob2JqKTsKPiAgCXN0cnVjdCBldG5hdml2X3ZyYW1fbWFwcGluZyAqbWFwcGluZzsKPiBA
QCAtMjU2LDcgKzI1Nyw3IEBAIHN0cnVjdCBldG5hdml2X3ZyYW1fbWFwcGluZyAqZXRuYXZpdl9n
ZW1fbWFwcGluZ19nZXQoCj4gIAlpbnQgcmV0ID0gMDsKPiAgCj4gIAltdXRleF9sb2NrKCZldG5h
dml2X29iai0+bG9jayk7Cj4gLQltYXBwaW5nID0gZXRuYXZpdl9nZW1fZ2V0X3ZyYW1fbWFwcGlu
ZyhldG5hdml2X29iaiwgZ3B1LT5tbXVfY29udGV4dCk7Cj4gKwltYXBwaW5nID0gZXRuYXZpdl9n
ZW1fZ2V0X3ZyYW1fbWFwcGluZyhldG5hdml2X29iaiwgbW11X2NvbnRleHQpOwo+ICAJaWYgKG1h
cHBpbmcpIHsKPiAgCQkvKgo+ICAJCSAqIEhvbGRpbmcgdGhlIG9iamVjdCBsb2NrIHByZXZlbnRz
IHRoZSB1c2UgY291bnQgY2hhbmdpbmcKPiBAQCAtMjY1LDEyICsyNjYsMTIgQEAgc3RydWN0IGV0
bmF2aXZfdnJhbV9tYXBwaW5nICpldG5hdml2X2dlbV9tYXBwaW5nX2dldCgKPiAgCQkgKiB0aGUg
TU1VIG93bnMgdGhpcyBtYXBwaW5nIHRvIGNsb3NlIHRoaXMgcmFjZS4KPiAgCQkgKi8KPiAgCQlp
ZiAobWFwcGluZy0+dXNlID09IDApIHsKPiAtCQkJbXV0ZXhfbG9jaygmZ3B1LT5tbXVfY29udGV4
dC0+bG9jayk7Cj4gLQkJCWlmIChtYXBwaW5nLT5jb250ZXh0ID09IGdwdS0+bW11X2NvbnRleHQp
Cj4gKwkJCW11dGV4X2xvY2soJm1tdV9jb250ZXh0LT5sb2NrKTsKPiArCQkJaWYgKG1hcHBpbmct
PmNvbnRleHQgPT0gbW11X2NvbnRleHQpCj4gIAkJCQltYXBwaW5nLT51c2UgKz0gMTsKPiAgCQkJ
ZWxzZQo+ICAJCQkJbWFwcGluZyA9IE5VTEw7Cj4gLQkJCW11dGV4X3VubG9jaygmZ3B1LT5tbXVf
Y29udGV4dC0+bG9jayk7Cj4gKwkJCW11dGV4X3VubG9jaygmbW11X2NvbnRleHQtPmxvY2spOwo+
ICAJCQlpZiAobWFwcGluZykKPiAgCQkJCWdvdG8gb3V0Owo+ICAJCX0gZWxzZSB7Cj4gQEAgLTMw
MywxMSArMzA0LDEyIEBAIHN0cnVjdCBldG5hdml2X3ZyYW1fbWFwcGluZyAqZXRuYXZpdl9nZW1f
bWFwcGluZ19nZXQoCj4gIAkJbGlzdF9kZWwoJm1hcHBpbmctPm9ial9ub2RlKTsKPiAgCX0KPiAg
Cj4gLQltYXBwaW5nLT5jb250ZXh0ID0gZ3B1LT5tbXVfY29udGV4dDsKPiArCWV0bmF2aXZfaW9t
bXVfY29udGV4dF9nZXQobW11X2NvbnRleHQpOwo+ICsJbWFwcGluZy0+Y29udGV4dCA9IG1tdV9j
b250ZXh0Owo+ICAJbWFwcGluZy0+dXNlID0gMTsKPiAgCj4gLQlyZXQgPSBldG5hdml2X2lvbW11
X21hcF9nZW0oZ3B1LT5tbXVfY29udGV4dCwgZXRuYXZpdl9vYmosCj4gLQkJCQkgICAgZ3B1LT5t
ZW1vcnlfYmFzZSwgbWFwcGluZyk7Cj4gKwlyZXQgPSBldG5hdml2X2lvbW11X21hcF9nZW0obW11
X2NvbnRleHQsIGV0bmF2aXZfb2JqLCBncHUtPm1lbW9yeV9iYXNlLAo+ICsJCQkJICAgIG1hcHBp
bmcpOwo+ICAJaWYgKHJldCA8IDApCj4gIAkJa2ZyZWUobWFwcGluZyk7CgpEb2VzIHRoaXMgZXJy
b3IgcGF0aCBuZWVkIGEgZXRuYXZpdl9pb21tdV9jb250ZXh0X3B1dCgpPwoKCmFwYXJ0IGZyb20g
dGhhdAoKUmV2aWV3ZWQtYnk6IEd1aWRvIEfDvG50aGVyIDxhZ3hAc2lneGNwdS5vcmc+IAoKIC0t
IEd1aWRvCgo+ICAJZWxzZQo+IEBAIC01MjksOCArNTMxLDEwIEBAIHZvaWQgZXRuYXZpdl9nZW1f
ZnJlZV9vYmplY3Qoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCj4gIAo+ICAJCVdBUk5fT04o
bWFwcGluZy0+dXNlKTsKPiAgCj4gLQkJaWYgKGNvbnRleHQpCj4gKwkJaWYgKGNvbnRleHQpIHsK
PiAgCQkJZXRuYXZpdl9pb21tdV91bm1hcF9nZW0oY29udGV4dCwgbWFwcGluZyk7Cj4gKwkJCWV0
bmF2aXZfaW9tbXVfY29udGV4dF9wdXQoY29udGV4dCk7Cj4gKwkJfQo+ICAKPiAgCQlsaXN0X2Rl
bCgmbWFwcGluZy0+b2JqX25vZGUpOwo+ICAJCWtmcmVlKG1hcHBpbmcpOwo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5oIGIvZHJpdmVycy9ncHUvZHJt
L2V0bmF2aXYvZXRuYXZpdl9nZW0uaAo+IGluZGV4IDVhMDA0ZDVlNGVhYS4uZjM0MjU2MGI1OTM4
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmgKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5oCj4gQEAgLTExOSw3ICsx
MTksOCBAQCBzdHJ1Y3QgcGFnZSAqKmV0bmF2aXZfZ2VtX2dldF9wYWdlcyhzdHJ1Y3QgZXRuYXZp
dl9nZW1fb2JqZWN0ICpvYmopOwo+ICB2b2lkIGV0bmF2aXZfZ2VtX3B1dF9wYWdlcyhzdHJ1Y3Qg
ZXRuYXZpdl9nZW1fb2JqZWN0ICpvYmopOwo+ICAKPiAgc3RydWN0IGV0bmF2aXZfdnJhbV9tYXBw
aW5nICpldG5hdml2X2dlbV9tYXBwaW5nX2dldCgKPiAtCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAq
b2JqLCBzdHJ1Y3QgZXRuYXZpdl9ncHUgKmdwdSk7Cj4gKwlzdHJ1Y3QgZHJtX2dlbV9vYmplY3Qg
Km9iaiwgc3RydWN0IGV0bmF2aXZfZ3B1ICpncHUsCj4gKwlzdHJ1Y3QgZXRuYXZpdl9pb21tdV9j
b250ZXh0ICptbXVfY29udGV4dCk7Cj4gIHZvaWQgZXRuYXZpdl9nZW1fbWFwcGluZ191bnJlZmVy
ZW5jZShzdHJ1Y3QgZXRuYXZpdl92cmFtX21hcHBpbmcgKm1hcHBpbmcpOwo+ICAKPiAgI2VuZGlm
IC8qIF9fRVROQVZJVl9HRU1fSF9fICovCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9l
dG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5jIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRu
YXZpdl9nZW1fc3VibWl0LmMKPiBpbmRleCAzZjRmNmFiMzg4ZGUuLjc5MjlkMjU4ZGFmOCAxMDA2
NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9zdWJtaXQuYwo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5jCj4gQEAg
LTIyNCw3ICsyMjQsOCBAQCBzdGF0aWMgaW50IHN1Ym1pdF9waW5fb2JqZWN0cyhzdHJ1Y3QgZXRu
YXZpdl9nZW1fc3VibWl0ICpzdWJtaXQpCj4gIAkJc3RydWN0IGV0bmF2aXZfdnJhbV9tYXBwaW5n
ICptYXBwaW5nOwo+ICAKPiAgCQltYXBwaW5nID0gZXRuYXZpdl9nZW1fbWFwcGluZ19nZXQoJmV0
bmF2aXZfb2JqLT5iYXNlLAo+IC0JCQkJCQkgIHN1Ym1pdC0+Z3B1KTsKPiArCQkJCQkJICBzdWJt
aXQtPmdwdSwKPiArCQkJCQkJICBzdWJtaXQtPmdwdS0+bW11X2NvbnRleHQpOwo+ICAJCWlmIChJ
U19FUlIobWFwcGluZykpIHsKPiAgCQkJcmV0ID0gUFRSX0VSUihtYXBwaW5nKTsKPiAgCQkJYnJl
YWs7Cj4gLS0gCj4gMi4yMC4xCj4gCj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KPiBldG5hdml2IG1haWxpbmcgbGlzdAo+IGV0bmF2aXZAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9ldG5hdml2Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9y
ZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZl
bA==
