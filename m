Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1450C6B399
	for <lists+dri-devel@lfdr.de>; Wed, 17 Jul 2019 03:56:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5FC566E200;
	Wed, 17 Jul 2019 01:56:03 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x549.google.com (mail-pg1-x549.google.com
 [IPv6:2607:f8b0:4864:20::549])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 317926E200
 for <dri-devel@lists.freedesktop.org>; Wed, 17 Jul 2019 01:56:02 +0000 (UTC)
Received: by mail-pg1-x549.google.com with SMTP id h3so13714756pgc.19
 for <dri-devel@lists.freedesktop.org>; Tue, 16 Jul 2019 18:56:02 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=d/2HyzVFTJJGBfDPKdKzU+Lxd/znqPDeWsr6SXjSt5c=;
 b=dzkGGGbYI5/PxAFKp9CFmbPeo/kdygAFsjANPcP3BbkFjcHYpbWDyRRy5+OBKyiey1
 l4gfZh/jn6qtsl41SdOzcC/reyQezNcEm/mmSb9g6zN7R8cPilVFIx7keuqkqg71bGa0
 Q5L+8O6SylcXn76h4ZbzqiYTC6sNruo0lhpdzUDxLxrBSr3G3w8Ie06Aeg4e5EFN4gCD
 MaOMkH7yp23pm/cJ9loYzH/JPgmBj11HxcmilEaQidxWev25SnAs3NciQniSn1bYj/kh
 I/gKss3UZ5Wmhi4eN3jrcbYsZ8dYrrfOOJzRqQdNBh1ieZvSuIMn+gruWC8BkFa4Nyti
 mGhA==
X-Gm-Message-State: APjAAAV5RDODegY/Daf4w5xDRuG24DcB8/e1ErlYtcZFLgRZ/bxqgmkX
 05KyLdOf8BVnVZkmqbBY+fFrgVHM9m8f1Jz3sS03SQ==
X-Google-Smtp-Source: APXvYqyqD7RFkvvAefJ+zGWrId6fs2qwuieFSSsDK/N/i+cfNrbEocGkFpsqk0Dzbeuz09L5Ih4JBDuOedxQqqu+wF24fw==
X-Received: by 2002:a63:4823:: with SMTP id v35mr10220997pga.138.1563328561202; 
 Tue, 16 Jul 2019 18:56:01 -0700 (PDT)
Date: Tue, 16 Jul 2019 18:55:28 -0700
In-Reply-To: <20190717015543.152251-1-brendanhiggins@google.com>
Message-Id: <20190717015543.152251-4-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190717015543.152251-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.22.0.510.g264f2c817a-goog
Subject: [PATCH v11 03/18] kunit: test: add string_stream a std::stream like
 string builder
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=d/2HyzVFTJJGBfDPKdKzU+Lxd/znqPDeWsr6SXjSt5c=;
 b=DHp972o3slb5I4idLOzDo4IIJ2HusEP6PF6qWtasMd5nzGU+JsZtN4miogMGWunJhE
 Qj+f0i/PHR8fQslMgSbBv9s7Z5KitLvHwVYQqJYju99zRqYE9oM9a/98x8Z9lXIDhIQE
 XvvyvaajN3R5/xl4iJ91+5lb2I+029hiHcpw4NDDWsIownSZynfTdqLiiw6ZMJD/tyWI
 HbHsCxz3flW9cjrS4FtbLQs2p9E8So0NRWJxLYob9+IBurbDWTLAtClxuHb0McD95kc2
 qHUK8+1QqzfVoVXk+fLpqwXfHGMrpPtu9PuE9e27MkVEIlg1jJWjFBzEU5gNr4KBu8RO
 0b8A==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QSBudW1iZXIgb2YgdGVzdCBmZWF0dXJlcyBuZWVkIHRvIGRvIHByZXR0eSBjb21wbGljYXRlZCBz
dHJpbmcgcHJpbnRpbmcKd2hlcmUgaXQgbWF5IG5vdCBiZSBwb3NzaWJsZSB0byByZWx5IG9uIGEg
c2luZ2xlIHByZWFsbG9jYXRlZCBzdHJpbmcKd2l0aCBwYXJhbWV0ZXJzLgoKU28gcHJvdmlkZSBh
IGxpYnJhcnkgZm9yIGNvbnN0cnVjdGluZyB0aGUgc3RyaW5nIGFzIHlvdSBnbyBzaW1pbGFyIHRv
CkMrKydzIHN0ZDo6c3RyaW5nLiBzdHJpbmdfc3RyZWFtIGlzIHJlYWxseSBqdXN0IGEgc3RyaW5n
IGJ1aWxkZXIsCm5vdGhpbmcgbW9yZS4KClNpZ25lZC1vZmYtYnk6IEJyZW5kYW4gSGlnZ2lucyA8
YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbT4KUmV2aWV3ZWQtYnk6IEdyZWcgS3JvYWgtSGFydG1h
biA8Z3JlZ2toQGxpbnV4Zm91bmRhdGlvbi5vcmc+ClJldmlld2VkLWJ5OiBMb2dhbiBHdW50aG9y
cGUgPGxvZ2FuZ0BkZWx0YXRlZS5jb20+Ci0tLQogaW5jbHVkZS9rdW5pdC9zdHJpbmctc3RyZWFt
LmggfCAgNDkgKysrKysrKysrKysKIGt1bml0L01ha2VmaWxlICAgICAgICAgICAgICAgIHwgICAz
ICstCiBrdW5pdC9zdHJpbmctc3RyZWFtLmMgICAgICAgICB8IDE1MiArKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrCiAzIGZpbGVzIGNoYW5nZWQsIDIwMyBpbnNlcnRpb25zKCspLCAx
IGRlbGV0aW9uKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS9rdW5pdC9zdHJpbmctc3Ry
ZWFtLmgKIGNyZWF0ZSBtb2RlIDEwMDY0NCBrdW5pdC9zdHJpbmctc3RyZWFtLmMKCmRpZmYgLS1n
aXQgYS9pbmNsdWRlL2t1bml0L3N0cmluZy1zdHJlYW0uaCBiL2luY2x1ZGUva3VuaXQvc3RyaW5n
LXN0cmVhbS5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMDAuLjRmYTEw
N2UzOGRlYjUKLS0tIC9kZXYvbnVsbAorKysgYi9pbmNsdWRlL2t1bml0L3N0cmluZy1zdHJlYW0u
aApAQCAtMCwwICsxLDQ5IEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCAq
LworLyoKKyAqIEMrKyBzdHJlYW0gc3R5bGUgc3RyaW5nIGJ1aWxkZXIgdXNlZCBpbiBLVW5pdCBm
b3IgYnVpbGRpbmcgbWVzc2FnZXMuCisgKgorICogQ29weXJpZ2h0IChDKSAyMDE5LCBHb29nbGUg
TExDLgorICogQXV0aG9yOiBCcmVuZGFuIEhpZ2dpbnMgPGJyZW5kYW5oaWdnaW5zQGdvb2dsZS5j
b20+CisgKi8KKworI2lmbmRlZiBfS1VOSVRfU1RSSU5HX1NUUkVBTV9ICisjZGVmaW5lIF9LVU5J
VF9TVFJJTkdfU1RSRUFNX0gKKworI2luY2x1ZGUgPGxpbnV4L3R5cGVzLmg+CisjaW5jbHVkZSA8
bGludXgvc3BpbmxvY2suaD4KKyNpbmNsdWRlIDxzdGRhcmcuaD4KKworc3RydWN0IHN0cmluZ19z
dHJlYW1fZnJhZ21lbnQgeworCXN0cnVjdCBsaXN0X2hlYWQgbm9kZTsKKwljaGFyICpmcmFnbWVu
dDsKK307CisKK3N0cnVjdCBzdHJpbmdfc3RyZWFtIHsKKwlzaXplX3QgbGVuZ3RoOworCXN0cnVj
dCBsaXN0X2hlYWQgZnJhZ21lbnRzOworCS8qIGxlbmd0aCBhbmQgZnJhZ21lbnRzIGFyZSBwcm90
ZWN0ZWQgYnkgdGhpcyBsb2NrICovCisJc3BpbmxvY2tfdCBsb2NrOworCXN0cnVjdCBrdW5pdCAq
dGVzdDsKKwlnZnBfdCBnZnA7Cit9OworCitzdHJ1Y3Qga3VuaXQ7CisKK3N0cnVjdCBzdHJpbmdf
c3RyZWFtICphbGxvY19zdHJpbmdfc3RyZWFtKHN0cnVjdCBrdW5pdCAqdGVzdCwgZ2ZwX3QgZ2Zw
KTsKKworaW50IHN0cmluZ19zdHJlYW1fYWRkKHN0cnVjdCBzdHJpbmdfc3RyZWFtICpzdHJlYW0s
IGNvbnN0IGNoYXIgKmZtdCwgLi4uKTsKKworaW50IHN0cmluZ19zdHJlYW1fdmFkZChzdHJ1Y3Qg
c3RyaW5nX3N0cmVhbSAqc3RyZWFtLAorCQkgICAgICAgY29uc3QgY2hhciAqZm10LAorCQkgICAg
ICAgdmFfbGlzdCBhcmdzKTsKKworY2hhciAqc3RyaW5nX3N0cmVhbV9nZXRfc3RyaW5nKHN0cnVj
dCBzdHJpbmdfc3RyZWFtICpzdHJlYW0pOworCitpbnQgc3RyaW5nX3N0cmVhbV9hcHBlbmQoc3Ry
dWN0IHN0cmluZ19zdHJlYW0gKnN0cmVhbSwKKwkJCSBzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqb3Ro
ZXIpOworCit2b2lkIHN0cmluZ19zdHJlYW1fY2xlYXIoc3RydWN0IHN0cmluZ19zdHJlYW0gKnN0
cmVhbSk7CisKK2Jvb2wgc3RyaW5nX3N0cmVhbV9pc19lbXB0eShzdHJ1Y3Qgc3RyaW5nX3N0cmVh
bSAqc3RyZWFtKTsKKworI2VuZGlmIC8qIF9LVU5JVF9TVFJJTkdfU1RSRUFNX0ggKi8KZGlmZiAt
LWdpdCBhL2t1bml0L01ha2VmaWxlIGIva3VuaXQvTWFrZWZpbGUKaW5kZXggNWVmZGM0ZGVhMmMw
OC4uMjc1YjU2NWEwZTgxZiAxMDA2NDQKLS0tIGEva3VuaXQvTWFrZWZpbGUKKysrIGIva3VuaXQv
TWFrZWZpbGUKQEAgLTEgKzEsMiBAQAotb2JqLSQoQ09ORklHX0tVTklUKSArPQkJCXRlc3Qubwor
b2JqLSQoQ09ORklHX0tVTklUKSArPQkJCXRlc3QubyBcCisJCQkJCXN0cmluZy1zdHJlYW0ubwpk
aWZmIC0tZ2l0IGEva3VuaXQvc3RyaW5nLXN0cmVhbS5jIGIva3VuaXQvc3RyaW5nLXN0cmVhbS5j
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMDAuLmJjZDU2ZDY3NTU1NDQK
LS0tIC9kZXYvbnVsbAorKysgYi9rdW5pdC9zdHJpbmctc3RyZWFtLmMKQEAgLTAsMCArMSwxNTIg
QEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCisvKgorICogQysrIHN0cmVh
bSBzdHlsZSBzdHJpbmcgYnVpbGRlciB1c2VkIGluIEtVbml0IGZvciBidWlsZGluZyBtZXNzYWdl
cy4KKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMTksIEdvb2dsZSBMTEMuCisgKiBBdXRob3I6IEJy
ZW5kYW4gSGlnZ2lucyA8YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbT4KKyAqLworCisjaW5jbHVk
ZSA8bGludXgvbGlzdC5oPgorI2luY2x1ZGUgPGxpbnV4L3NsYWIuaD4KKyNpbmNsdWRlIDxrdW5p
dC9zdHJpbmctc3RyZWFtLmg+CisjaW5jbHVkZSA8a3VuaXQvdGVzdC5oPgorCitpbnQgc3RyaW5n
X3N0cmVhbV92YWRkKHN0cnVjdCBzdHJpbmdfc3RyZWFtICpzdHJlYW0sCisJCSAgICAgICBjb25z
dCBjaGFyICpmbXQsCisJCSAgICAgICB2YV9saXN0IGFyZ3MpCit7CisJc3RydWN0IHN0cmluZ19z
dHJlYW1fZnJhZ21lbnQgKmZyYWdfY29udGFpbmVyOworCWludCBsZW47CisJdmFfbGlzdCBhcmdz
X2Zvcl9jb3VudGluZzsKKworCS8qIE1ha2UgYSBjb3B5IGJlY2F1c2UgYHZzbnByaW50ZmAgY291
bGQgY2hhbmdlIGl0ICovCisJdmFfY29weShhcmdzX2Zvcl9jb3VudGluZywgYXJncyk7CisKKwkv
KiBOZWVkIHNwYWNlIGZvciBudWxsIGJ5dGUuICovCisJbGVuID0gdnNucHJpbnRmKE5VTEwsIDAs
IGZtdCwgYXJnc19mb3JfY291bnRpbmcpICsgMTsKKworCXZhX2VuZChhcmdzX2Zvcl9jb3VudGlu
Zyk7CisKKwlmcmFnX2NvbnRhaW5lciA9IGt1bml0X2ttYWxsb2Moc3RyZWFtLT50ZXN0LCBzaXpl
b2YoKmZyYWdfY29udGFpbmVyKSwKKwkJCQkgICAgICAgc3RyZWFtLT5nZnApOworCWlmICghZnJh
Z19jb250YWluZXIpCisJCXJldHVybiAtRU5PTUVNOworCisJZnJhZ19jb250YWluZXItPmZyYWdt
ZW50ID0ga3VuaXRfa21hbGxvYyhzdHJlYW0tPnRlc3QsIGxlbiwKKwkJCQkJCSBzdHJlYW0tPmdm
cCk7CisJaWYgKCFmcmFnX2NvbnRhaW5lci0+ZnJhZ21lbnQpCisJCXJldHVybiAtRU5PTUVNOwor
CisJbGVuID0gdnNucHJpbnRmKGZyYWdfY29udGFpbmVyLT5mcmFnbWVudCwgbGVuLCBmbXQsIGFy
Z3MpOworCXNwaW5fbG9jaygmc3RyZWFtLT5sb2NrKTsKKwlzdHJlYW0tPmxlbmd0aCArPSBsZW47
CisJbGlzdF9hZGRfdGFpbCgmZnJhZ19jb250YWluZXItPm5vZGUsICZzdHJlYW0tPmZyYWdtZW50
cyk7CisJc3Bpbl91bmxvY2soJnN0cmVhbS0+bG9jayk7CisKKwlyZXR1cm4gMDsKK30KKworaW50
IHN0cmluZ19zdHJlYW1fYWRkKHN0cnVjdCBzdHJpbmdfc3RyZWFtICpzdHJlYW0sIGNvbnN0IGNo
YXIgKmZtdCwgLi4uKQoreworCXZhX2xpc3QgYXJnczsKKwlpbnQgcmVzdWx0OworCisJdmFfc3Rh
cnQoYXJncywgZm10KTsKKwlyZXN1bHQgPSBzdHJpbmdfc3RyZWFtX3ZhZGQoc3RyZWFtLCBmbXQs
IGFyZ3MpOworCXZhX2VuZChhcmdzKTsKKworCXJldHVybiByZXN1bHQ7Cit9CisKK3ZvaWQgc3Ry
aW5nX3N0cmVhbV9jbGVhcihzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtKQoreworCXN0cnVj
dCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnX2NvbnRhaW5lciwgKmZyYWdfY29udGFpbmVy
X3NhZmU7CisKKwlzcGluX2xvY2soJnN0cmVhbS0+bG9jayk7CisJbGlzdF9mb3JfZWFjaF9lbnRy
eV9zYWZlKGZyYWdfY29udGFpbmVyLAorCQkJCSBmcmFnX2NvbnRhaW5lcl9zYWZlLAorCQkJCSAm
c3RyZWFtLT5mcmFnbWVudHMsCisJCQkJIG5vZGUpIHsKKwkJbGlzdF9kZWwoJmZyYWdfY29udGFp
bmVyLT5ub2RlKTsKKwl9CisJc3RyZWFtLT5sZW5ndGggPSAwOworCXNwaW5fdW5sb2NrKCZzdHJl
YW0tPmxvY2spOworfQorCitjaGFyICpzdHJpbmdfc3RyZWFtX2dldF9zdHJpbmcoc3RydWN0IHN0
cmluZ19zdHJlYW0gKnN0cmVhbSkKK3sKKwlzdHJ1Y3Qgc3RyaW5nX3N0cmVhbV9mcmFnbWVudCAq
ZnJhZ19jb250YWluZXI7CisJc2l6ZV90IGJ1Zl9sZW4gPSBzdHJlYW0tPmxlbmd0aCArIDE7IC8q
ICsxIGZvciBudWxsIGJ5dGUuICovCisJY2hhciAqYnVmOworCisJYnVmID0ga3VuaXRfa3phbGxv
YyhzdHJlYW0tPnRlc3QsIGJ1Zl9sZW4sIHN0cmVhbS0+Z2ZwKTsKKwlpZiAoIWJ1ZikKKwkJcmV0
dXJuIE5VTEw7CisKKwlzcGluX2xvY2soJnN0cmVhbS0+bG9jayk7CisJbGlzdF9mb3JfZWFjaF9l
bnRyeShmcmFnX2NvbnRhaW5lciwgJnN0cmVhbS0+ZnJhZ21lbnRzLCBub2RlKQorCQlzdHJsY2F0
KGJ1ZiwgZnJhZ19jb250YWluZXItPmZyYWdtZW50LCBidWZfbGVuKTsKKwlzcGluX3VubG9jaygm
c3RyZWFtLT5sb2NrKTsKKworCXJldHVybiBidWY7Cit9CisKK2ludCBzdHJpbmdfc3RyZWFtX2Fw
cGVuZChzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtLAorCQkJIHN0cnVjdCBzdHJpbmdfc3Ry
ZWFtICpvdGhlcikKK3sKKwljb25zdCBjaGFyICpvdGhlcl9jb250ZW50OworCisJb3RoZXJfY29u
dGVudCA9IHN0cmluZ19zdHJlYW1fZ2V0X3N0cmluZyhvdGhlcik7CisKKwlpZiAoIW90aGVyX2Nv
bnRlbnQpCisJCXJldHVybiAtRU5PTUVNOworCisJcmV0dXJuIHN0cmluZ19zdHJlYW1fYWRkKHN0
cmVhbSwgb3RoZXJfY29udGVudCk7Cit9CisKK2Jvb2wgc3RyaW5nX3N0cmVhbV9pc19lbXB0eShz
dHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtKQoreworCXJldHVybiBsaXN0X2VtcHR5KCZzdHJl
YW0tPmZyYWdtZW50cyk7Cit9CisKK3N0cnVjdCBzdHJpbmdfc3RyZWFtX2FsbG9jX2NvbnRleHQg
eworCXN0cnVjdCBrdW5pdCAqdGVzdDsKKwlnZnBfdCBnZnA7Cit9OworCitzdGF0aWMgaW50IHN0
cmluZ19zdHJlYW1faW5pdChzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlcywgdm9pZCAqY29udGV4
dCkKK3sKKwlzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtOworCXN0cnVjdCBzdHJpbmdfc3Ry
ZWFtX2FsbG9jX2NvbnRleHQgKmN0eCA9IGNvbnRleHQ7CisKKwlzdHJlYW0gPSBrdW5pdF9remFs
bG9jKGN0eC0+dGVzdCwgc2l6ZW9mKCpzdHJlYW0pLCBjdHgtPmdmcCk7CisJaWYgKCFzdHJlYW0p
CisJCXJldHVybiAtRU5PTUVNOworCisJcmVzLT5hbGxvY2F0aW9uID0gc3RyZWFtOworCXN0cmVh
bS0+Z2ZwID0gY3R4LT5nZnA7CisJc3RyZWFtLT50ZXN0ID0gY3R4LT50ZXN0OworCUlOSVRfTElT
VF9IRUFEKCZzdHJlYW0tPmZyYWdtZW50cyk7CisJc3Bpbl9sb2NrX2luaXQoJnN0cmVhbS0+bG9j
ayk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgc3RyaW5nX3N0cmVhbV9mcmVlKHN0
cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzKQoreworCS8qIE5vdGhpbmcgdG8gZG8gc2luY2UgZXZl
cnl0aGluZyBpcyBhbHJlYWR5IGEgS1VuaXQgbWFuYWdlZCByZXNvdXJjZSAqLworfQorCitzdHJ1
Y3Qgc3RyaW5nX3N0cmVhbSAqYWxsb2Nfc3RyaW5nX3N0cmVhbShzdHJ1Y3Qga3VuaXQgKnRlc3Qs
IGdmcF90IGdmcCkKK3sKKwlzdHJ1Y3Qgc3RyaW5nX3N0cmVhbV9hbGxvY19jb250ZXh0IGNvbnRl
eHQgPSB7CisJCS50ZXN0ID0gdGVzdCwKKwkJLmdmcCA9IGdmcAorCX07CisKKwlyZXR1cm4ga3Vu
aXRfYWxsb2NfcmVzb3VyY2UodGVzdCwKKwkJCQkgICAgc3RyaW5nX3N0cmVhbV9pbml0LAorCQkJ
CSAgICBzdHJpbmdfc3RyZWFtX2ZyZWUsCisJCQkJICAgIGdmcCwKKwkJCQkgICAgJmNvbnRleHQp
OworfQotLSAKMi4yMi4wLjUxMC5nMjY0ZjJjODE3YS1nb29nCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1k
ZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
