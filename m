Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D86AC5643D
	for <lists+dri-devel@lfdr.de>; Wed, 26 Jun 2019 10:13:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 84FEA6E315;
	Wed, 26 Jun 2019 08:13:11 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from onstation.org (onstation.org [52.200.56.107])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 385AA6E255;
 Wed, 26 Jun 2019 02:22:07 +0000 (UTC)
Received: from localhost.localdomain (c-98-239-145-235.hsd1.wv.comcast.net
 [98.239.145.235])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: masneyb)
 by onstation.org (Postfix) with ESMTPSA id 41EA13EE86;
 Wed, 26 Jun 2019 02:22:06 +0000 (UTC)
From: Brian Masney <masneyb@onstation.org>
To: agross@kernel.org, robdclark@gmail.com, sean@poorly.run,
 robh+dt@kernel.org, bjorn.andersson@linaro.org
Subject: [PATCH v3 4/6] firmware: qcom: scm: add support to restore secure
 config to qcm_scm-32
Date: Tue, 25 Jun 2019 22:21:46 -0400
Message-Id: <20190626022148.23712-5-masneyb@onstation.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190626022148.23712-1-masneyb@onstation.org>
References: <20190626022148.23712-1-masneyb@onstation.org>
MIME-Version: 1.0
X-Mailman-Approved-At: Wed, 26 Jun 2019 08:12:13 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=onstation.org; s=default; t=1561515726;
 bh=Q8bhNRhICKhl1EHg5+L/3cXtUYusNulUo2PTAZezCLY=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=mdhDvAthlY1w0R8euMIctuuz8ibrN56jEwmKu5DWkxIPV2jo6e3zWAfHrlY2WDAQJ
 5bScl2ZVsMhgiRrs1sXlMGs/EaXotBU8UlGOyhrXNTr8gufdX0EJca6aInTeWSAAJl
 KUsP3gzRkLNfO3BTpu/SsHp3TJvSYTrjtN6JhPrw=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org, jonathan@marek.ca,
 airlied@linux.ie, linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, freedreno@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9iIENsYXJrIDxyb2JkY2xhcmtAZ21haWwuY29tPgoKQWRkIHN1cHBvcnQgdG8gcmVz
dG9yZSB0aGUgc2VjdXJlIGNvbmZpZ3VyYXRpb24gZm9yIHFjbV9zY20tMzIuYy4gVGhpcwppcyBu
ZWVkZWQgYnkgdGhlIE9uIENoaXAgTUVNb3J5IChPQ01FTSkgdGhhdCBpcyBwcmVzZW50IG9uIHNv
bWUKU25hcGRyYWdvbiBkZXZpY2VzLgoKU2lnbmVkLW9mZi1ieTogUm9iIENsYXJrIDxyb2JkY2xh
cmtAZ21haWwuY29tPgpbbWFzbmV5YkBvbnN0YXRpb24ub3JnOiBwb3J0ZWQgdG8gbGF0ZXN0IGtl
cm5lbDsgc2V0IGN0eF9iYW5rX251bSB0bwogc3BhcmUgcGFyYW1ldGVyLl0KU2lnbmVkLW9mZi1i
eTogQnJpYW4gTWFzbmV5IDxtYXNuZXliQG9uc3RhdGlvbi5vcmc+Ci0tLQpDaGFuZ2VzIHNpbmNl
IHYyOgotIE5vbmUKCkNoYW5nZXMgc2luY2UgdjE6Ci0gVXNlIGV4aXN0aW5nIF9fcWNvbV9zY21f
cmVzdG9yZV9zZWNfY2ZnKCkgZnVuY3Rpb24gc3R1YiBpbgogIHFjb21fc2NtLTMyLmMgdGhhdCB3
YXMgdW5pbXBsZW1lbnRlZAotIFNldCB0aGUgY2ZnLmN0eF9iYW5rX251bSB0byB0aGUgc3BhcmUg
ZnVuY3Rpb24gcGFyYW1ldGVyLiBJdCB3YXMKICBwcmV2aW91c2x5IHNldCB0byB0aGUgZGV2aWNl
X2lkLgoKIGRyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20tMzIuYyB8IDE3ICsrKysrKysrKysrKysr
KystCiBkcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMgICAgfCAxMyArKysrKysrKysrKysrCiBp
bmNsdWRlL2xpbnV4L3Fjb21fc2NtLmggICAgICAgfCAxMSArKysrKysrKysrKwogMyBmaWxlcyBj
aGFuZ2VkLCA0MCBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9maXJtd2FyZS9xY29tX3NjbS0zMi5jIGIvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS0z
Mi5jCmluZGV4IDRjMjUxNGU1ZTI0OS4uNWQ5MGI3ZjVhYjVhIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2Zpcm13YXJlL3Fjb21fc2NtLTMyLmMKKysrIGIvZHJpdmVycy9maXJtd2FyZS9xY29tX3NjbS0z
Mi5jCkBAIC02MTcsNyArNjE3LDIyIEBAIGludCBfX3Fjb21fc2NtX2Fzc2lnbl9tZW0oc3RydWN0
IGRldmljZSAqZGV2LCBwaHlzX2FkZHJfdCBtZW1fcmVnaW9uLAogaW50IF9fcWNvbV9zY21fcmVz
dG9yZV9zZWNfY2ZnKHN0cnVjdCBkZXZpY2UgKmRldiwgdTMyIGRldmljZV9pZCwKIAkJCSAgICAg
ICB1MzIgc3BhcmUpCiB7Ci0JcmV0dXJuIC1FTk9ERVY7CisJc3RydWN0IG1zbV9zY21fc2VjX2Nm
ZyB7CisJCV9fbGUzMiBpZDsKKwkJX19sZTMyIGN0eF9iYW5rX251bTsKKwl9IGNmZzsKKwlpbnQg
cmV0LCBzY21fcmV0ID0gMDsKKworCWNmZy5pZCA9IGNwdV90b19sZTMyKGRldmljZV9pZCk7CisJ
Y2ZnLmN0eF9iYW5rX251bSA9IGNwdV90b19sZTMyKHNwYXJlKTsKKworCXJldCA9IHFjb21fc2Nt
X2NhbGwoZGV2LCBRQ09NX1NDTV9TVkNfTVAsIFFDT01fU0NNX1JFU1RPUkVfU0VDX0NGRywKKwkJ
CSAgICAmY2ZnLCBzaXplb2YoY2ZnKSwgJnNjbV9yZXQsIHNpemVvZihzY21fcmV0KSk7CisKKwlp
ZiAocmV0IHx8IHNjbV9yZXQpCisJCXJldHVybiByZXQgPyByZXQgOiAtRUlOVkFMOworCisJcmV0
dXJuIDA7CiB9CiAKIGludCBfX3Fjb21fc2NtX2lvbW11X3NlY3VyZV9wdGJsX3NpemUoc3RydWN0
IGRldmljZSAqZGV2LCB1MzIgc3BhcmUsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2Zpcm13YXJlL3Fj
b21fc2NtLmMgYi9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMKaW5kZXggMmUxMmVhNTZjMzRj
Li41NDUzMjMzMWRkYzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20uYwor
KysgYi9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLmMKQEAgLTM2Niw2ICszNjYsMTkgQEAgc3Rh
dGljIGNvbnN0IHN0cnVjdCByZXNldF9jb250cm9sX29wcyBxY29tX3NjbV9wYXNfcmVzZXRfb3Bz
ID0gewogCS5kZWFzc2VydCA9IHFjb21fc2NtX3Bhc19yZXNldF9kZWFzc2VydCwKIH07CiAKKy8q
KgorICogcWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnX2F2YWlsYWJsZSgpIC0gQ2hlY2sgaWYgc2Vj
dXJlIGVudmlyb25tZW50CisgKiBzdXBwb3J0cyByZXN0b3JlIHNlY3VyaXR5IGNvbmZpZyBpbnRl
cmZhY2UuCisgKgorICogUmV0dXJuIHRydWUgaWYgcmVzdG9yZS1jZmcgaW50ZXJmYWNlIGlzIHN1
cHBvcnRlZCwgZmFsc2UgaWYgbm90LgorICovCitib29sIHFjb21fc2NtX3Jlc3RvcmVfc2VjX2Nm
Z19hdmFpbGFibGUodm9pZCkKK3sKKwlyZXR1cm4gX19xY29tX3NjbV9pc19jYWxsX2F2YWlsYWJs
ZShfX3NjbS0+ZGV2LCBRQ09NX1NDTV9TVkNfTVAsCisJCQkJCSAgICBRQ09NX1NDTV9SRVNUT1JF
X1NFQ19DRkcpOworfQorRVhQT1JUX1NZTUJPTChxY29tX3NjbV9yZXN0b3JlX3NlY19jZmdfYXZh
aWxhYmxlKTsKKwogaW50IHFjb21fc2NtX3Jlc3RvcmVfc2VjX2NmZyh1MzIgZGV2aWNlX2lkLCB1
MzIgc3BhcmUpCiB7CiAJcmV0dXJuIF9fcWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnKF9fc2NtLT5k
ZXYsIGRldmljZV9pZCwgc3BhcmUpOwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9xY29tX3Nj
bS5oIGIvaW5jbHVkZS9saW51eC9xY29tX3NjbS5oCmluZGV4IDUyMWIwODliZTFjOS4uOGEyNGY3
ZWIyNTg4IDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4L3Fjb21fc2NtLmgKKysrIGIvaW5jbHVk
ZS9saW51eC9xY29tX3NjbS5oCkBAIC0zNCw2ICszNCwxNiBAQCBlbnVtIHFjb21fc2NtX29jbWVt
X2NsaWVudCB7CiAJUUNPTV9TQ01fT0NNRU1fREVCVUdfSUQsCiB9OwogCitlbnVtIHFjb21fc2Nt
X3NlY19kZXZfaWQgeworCVFDT01fU0NNX01EU1NfREVWX0lEICAgID0gMSwKKwlRQ09NX1NDTV9P
Q01FTV9ERVZfSUQgICA9IDUsCisJUUNPTV9TQ01fUENJRTBfREVWX0lEICAgPSAxMSwKKwlRQ09N
X1NDTV9QQ0lFMV9ERVZfSUQgICA9IDEyLAorCVFDT01fU0NNX0dGWF9ERVZfSUQgICAgID0gMTgs
CisJUUNPTV9TQ01fVUZTX0RFVl9JRCAgICAgPSAxOSwKKwlRQ09NX1NDTV9JQ0VfREVWX0lEICAg
ICA9IDIwLAorfTsKKwogI2RlZmluZSBRQ09NX1NDTV9WTUlEX0hMT1MgICAgICAgMHgzCiAjZGVm
aW5lIFFDT01fU0NNX1ZNSURfTVNTX01TQSAgICAweEYKICNkZWZpbmUgUUNPTV9TQ01fVk1JRF9X
TEFOICAgICAgIDB4MTgKQEAgLTY5LDYgKzc5LDcgQEAgZXh0ZXJuIGludCBxY29tX3NjbV9hc3Np
Z25fbWVtKHBoeXNfYWRkcl90IG1lbV9hZGRyLCBzaXplX3QgbWVtX3N6LAogZXh0ZXJuIHZvaWQg
cWNvbV9zY21fY3B1X3Bvd2VyX2Rvd24odTMyIGZsYWdzKTsKIGV4dGVybiB1MzIgcWNvbV9zY21f
Z2V0X3ZlcnNpb24odm9pZCk7CiBleHRlcm4gaW50IHFjb21fc2NtX3NldF9yZW1vdGVfc3RhdGUo
dTMyIHN0YXRlLCB1MzIgaWQpOworZXh0ZXJuIGJvb2wgcWNvbV9zY21fcmVzdG9yZV9zZWNfY2Zn
X2F2YWlsYWJsZSh2b2lkKTsKIGV4dGVybiBpbnQgcWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnKHUz
MiBkZXZpY2VfaWQsIHUzMiBzcGFyZSk7CiBleHRlcm4gaW50IHFjb21fc2NtX2lvbW11X3NlY3Vy
ZV9wdGJsX3NpemUodTMyIHNwYXJlLCBzaXplX3QgKnNpemUpOwogZXh0ZXJuIGludCBxY29tX3Nj
bV9pb21tdV9zZWN1cmVfcHRibF9pbml0KHU2NCBhZGRyLCB1MzIgc2l6ZSwgdTMyIHNwYXJlKTsK
LS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
