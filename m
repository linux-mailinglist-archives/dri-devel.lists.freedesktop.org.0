Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 812E8E454E
	for <lists+dri-devel@lfdr.de>; Fri, 25 Oct 2019 10:12:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BC4396E8E9;
	Fri, 25 Oct 2019 08:12:02 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lf1-x141.google.com (mail-lf1-x141.google.com
 [IPv6:2a00:1450:4864:20::141])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 348EF6E461
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 16:09:48 +0000 (UTC)
Received: by mail-lf1-x141.google.com with SMTP id 21so10667236lft.10
 for <dri-devel@lists.freedesktop.org>; Thu, 24 Oct 2019 09:09:48 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:from:to:cc:references:message-id:date
 :user-agent:mime-version:in-reply-to:content-language
 :content-transfer-encoding;
 bh=ILSPEu3zasWelHFleg/P/DFzyM2p7kDhqlV45EgnhRM=;
 b=R8n0CrTBjoOzIq82gRPlDnxz1ycZStivNaviYWq59SCZRg2zh0N/H0V0fUaJguqvlX
 ggYsviWQB70R0Zc16pa2gbUL9MWz+ZeBjhpuO/3ce+dD3sJZ3R8dD5RfVrDtnhjruN0k
 oz5WgBC7cfiifOS+DPlpN+CSLiwF4URrF2Gjt6Q2odsyeuz7wYKyDyGgvGtJj63AIdAM
 x4go/jEt1U5usFEdU+Phd6OXxw/NI2B7cfTVVvMABn8yNemoyRQyOKORu4Yb4NtvCUjj
 tgQW/4WxLVxPfYuCr+sGuQOej0iOemf01EK4GNDLoWh/FIysBBqPQ3quCHQeXwxZF2qk
 Ykvg==
X-Gm-Message-State: APjAAAUp7OE5k1yyH8eMM2V+PyBAyigeWfzmXs05stU99+XppNi0bi/i
 iagNYYwKHfMxFWzqvf3ExEE=
X-Google-Smtp-Source: APXvYqyz+TYuMgOO/xQiByr2Y3n/shb2DQKh8jTahTRyY0nRqpkYXnyA+vWeDlk5PE9YoFwMATu9RA==
X-Received: by 2002:a05:6512:25c:: with SMTP id
 b28mr28049097lfo.35.1571933386522; 
 Thu, 24 Oct 2019 09:09:46 -0700 (PDT)
Received: from [192.168.2.145] (94-29-10-250.dynamic.spd-mgts.ru.
 [94.29.10.250])
 by smtp.googlemail.com with ESMTPSA id h21sm4153059ljl.20.2019.10.24.09.09.45
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Thu, 24 Oct 2019 09:09:46 -0700 (PDT)
Subject: Re: [PATCH v1 2/3] drm/tegra: Fix 2d and 3d clients detaching from
 IOMMU domain
From: Dmitry Osipenko <digetx@gmail.com>
To: Thierry Reding <thierry.reding@gmail.com>
References: <20190623173743.24088-1-digetx@gmail.com>
 <20190623173743.24088-2-digetx@gmail.com> <20191024115804.GB2924027@ulmo>
 <45926d95-3e7a-c56b-402a-2b2c6475c5db@gmail.com>
 <20191024135018.GD2924027@ulmo>
 <38a67df0-2ede-e7fe-8eca-6c4491cdcc7b@gmail.com>
 <20191024155620.GG2924027@ulmo>
 <bfc6c17d-f2df-32d0-67d6-2f763c81d7fc@gmail.com>
Message-ID: <7f7ecf90-531c-69ae-9011-684666ed8743@gmail.com>
Date: Thu, 24 Oct 2019 19:09:45 +0300
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.1.1
MIME-Version: 1.0
In-Reply-To: <bfc6c17d-f2df-32d0-67d6-2f763c81d7fc@gmail.com>
Content-Language: en-US
X-Mailman-Approved-At: Fri, 25 Oct 2019 08:11:50 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=subject:from:to:cc:references:message-id:date:user-agent
 :mime-version:in-reply-to:content-language:content-transfer-encoding;
 bh=ILSPEu3zasWelHFleg/P/DFzyM2p7kDhqlV45EgnhRM=;
 b=JyUtAmgkbxY2iZOdUWoZuBeWEaC3Z27bi0Mwcmfe+s3Gzmvt7ii9nMNxtdDbWa1CMh
 TM2WjF0yX6EykQqsG+SDnSsA9/vZIe7loDAmZ++fHSCgGS3h6R34mRlPdgp9f667fa3b
 aKdNHDs3MI2zcwjGtGjiaxgJkjhHqaAGOISH3vVT7zydqOoIxgZDZIg6ZuSxGU3xloHD
 gAFzFWfxJzv0MG3LaeOM6Iuj8+vWpBUg+78VBuyx3iw030thNMJjyAL4YpC0QH8jr3jI
 QAq/l8REfjSgazG9ajCz46lp9FRqRV9T/eAX6Zah7GXOdzGXeQJ4jY1knW5YOglgt3Mr
 jhCg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-tegra@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

MjQuMTAuMjAxOSAxODo1NywgRG1pdHJ5IE9zaXBlbmtvINC/0LjRiNC10YI6Cj4gMjQuMTAuMjAx
OSAxODo1NiwgVGhpZXJyeSBSZWRpbmcg0L/QuNGI0LXRgjoKPj4gT24gVGh1LCBPY3QgMjQsIDIw
MTkgYXQgMDY6NDc6MjNQTSArMDMwMCwgRG1pdHJ5IE9zaXBlbmtvIHdyb3RlOgo+Pj4gMjQuMTAu
MjAxOSAxNjo1MCwgVGhpZXJyeSBSZWRpbmcg0L/QuNGI0LXRgjoKPj4+PiBPbiBUaHUsIE9jdCAy
NCwgMjAxOSBhdCAwNDoyODo0MVBNICswMzAwLCBEbWl0cnkgT3NpcGVua28gd3JvdGU6Cj4+Pj4+
IDI0LjEwLjIwMTkgMTQ6NTgsIFRoaWVycnkgUmVkaW5nINC/0LjRiNC10YI6Cj4+Pj4+PiBPbiBT
dW4sIEp1biAyMywgMjAxOSBhdCAwODozNzo0MlBNICswMzAwLCBEbWl0cnkgT3NpcGVua28gd3Jv
dGU6Cj4+Pj4+Pj4gVGhpcyBzaG91bGQgc2hvdWxkIGZpcmUgdXAgb24gdGhlIERSTSdzIGRyaXZl
ciBtb2R1bGUgcmUtbG9hZGVyIGJlY2F1c2UKPj4+Pj4+PiB0aGVyZSB3b24ndCBiZSBlbm91Z2gg
YXZhaWxhYmxlIGRvbWFpbnMgb24gb2xkZXIgVGVncmEgU29Dcy4KPj4+Pj4+Pgo+Pj4+Pj4+IENj
OiBzdGFibGUgPHN0YWJsZUB2Z2VyLmtlcm5lbC5vcmc+Cj4+Pj4+Pj4gRml4ZXM6IDBjNDA3ZGU1
ZWQxYSAoImRybS90ZWdyYTogUmVmYWN0b3IgSU9NTVUgYXR0YWNoL2RldGFjaCIpCj4+Pj4+Pj4g
U2lnbmVkLW9mZi1ieTogRG1pdHJ5IE9zaXBlbmtvIDxkaWdldHhAZ21haWwuY29tPgo+Pj4+Pj4+
IC0tLQo+Pj4+Pj4+ICBkcml2ZXJzL2dwdS9kcm0vdGVncmEvZGMuYyAgIHwgNCArKy0tCj4+Pj4+
Pj4gIGRyaXZlcnMvZ3B1L2RybS90ZWdyYS9kcm0uYyAgfCA5ICsrKysrKy0tLQo+Pj4+Pj4+ICBk
cml2ZXJzL2dwdS9kcm0vdGVncmEvZHJtLmggIHwgMyArKy0KPj4+Pj4+PiAgZHJpdmVycy9ncHUv
ZHJtL3RlZ3JhL2dyMmQuYyB8IDQgKystLQo+Pj4+Pj4+ICBkcml2ZXJzL2dwdS9kcm0vdGVncmEv
Z3IzZC5jIHwgNCArKy0tCj4+Pj4+Pj4gIDUgZmlsZXMgY2hhbmdlZCwgMTQgaW5zZXJ0aW9ucygr
KSwgMTAgZGVsZXRpb25zKC0pCj4+Pj4+Pgo+Pj4+Pj4gSSB0aGluayBJIHVuZGVyc3RhbmQgd2hh
dCB0aGlzIGlzIHRyeWluZyB0byBkbywgYnV0IHRoZSBjb21taXQgbWVzc2FnZQo+Pj4+Pj4gZG9l
cyBub3QgaGVscCBhdCBhbGwuIFNvIHdoYXQncyByZWFsbHkgZ29pbmcgb24gaGVyZSBpcyB0aGF0
IHdlIG5lZWQgdG8KPj4+Pj4+IGRldGFjaCB0aGUgZGV2aWNlIGZyb20gdGhlIGdyb3VwIHJlZ2Fy
ZGxlc3Mgb2Ygd2hldGhlciB3ZSdyZSBzaGFyaW5nIHRoZQo+Pj4+Pj4gZ3JvdXAgb3Igbm90LCBq
dXN0IGxpa2Ugd2UgYXR0YWNoIGdyb3VwcyB0byB0aGUgc2hhcmVkIGRvbWFpbiB3aGV0aGVyCj4+
Pj4+PiB0aGV5IHNoYXJlIHRoZSBzYW1lIGdyb3VwIG9yIG5vdC4KPj4+Pj4KPj4+Pj4gWWVzLCB0
aGUgY29tbWl0J3MgbWVzc2FnZSBjb3VsZCBiZSBpbXByb3ZlZC4KPj4+Pj4KPj4+Pj4+IEJ1dCBp
biB0aGF0IGNhc2UsIEkgd29uZGVyIGlmIGl0J3MgZXZlbiB3b3J0aCBzcGxpdHRpbmcgZ3JvdXBz
IHRoZSB3YXkKPj4+Pj4+IHdlIGFyZSByaWdodCBub3cuIFdvdWxkbid0IGl0IGJlIGJldHRlciB0
byBqdXN0IHB1dCBhbGwgdGhlIGRldmljZXMgaW50bwo+Pj4+Pj4gdGhlIHNhbWUgZ3JvdXAgYW5k
IGJlIGRvbmUgd2l0aCBpdD8KPj4+Pj4+Cj4+Pj4+PiBUaGUgY3VycmVudCBjb2RlIGdpdmVzIG1l
IGhlYWRhY2hlcyBldmVyeSB0aW1lIEkgcmVhZCBpdCwgc28gaWYgd2UgY2FuCj4+Pj4+PiBqdXN0
IG1ha2UgaXQgc28gdGhhdCBhbGwgdGhlIGRldmljZXMgdW5kZXIgdGhlIERSTSBkZXZpY2Ugc2hh
cmUgdGhlIHNhbWUKPj4+Pj4+IGdyb3VwLCB0aGlzIHdvdWxkIGJlY29tZSBhIGxvdCBlYXNpZXIg
dG8gZGVhbCB3aXRoLiBJJ20gbm90IHJlYWxseQo+Pj4+Pj4gY29udmluY2VkIHRoYXQgaXQgbWFr
ZXMgbXVjaCBzZW5zZSB0byBrZWVwIHRoZW0gb24gc2VwYXJhdGUgZG9tYWlucywKPj4+Pj4+IGVz
cGVjaWFsbHkgZ2l2ZW4gdGhlIGNvbnN0cmFpbnRzIG9uIHRoZSBudW1iZXIgb2YgZG9tYWlucyBh
dmFpbGFibGUgb24KPj4+Pj4+IGVhcmxpZXIgVGVncmEgZGV2aWNlcy4KPj4+Pj4+Cj4+Pj4+PiBO
b3RlIHRoYXQgc2hhcmluZyBhIGdyb3VwIHdpbGwgYWxzbyBtYWtlIGl0IG11Y2ggZWFzaWVyIGZv
ciB0aGVzZSB0byB1c2UKPj4+Pj4+IHRoZSBETUEgQVBJIGlmIGl0IGlzIGJhY2tlZCBieSBhbiBJ
T01NVS4KPj4+Pj4KPj4+Pj4gUHJvYmFibHkgSSdtIGJsYW5raW5nIG9uIGV2ZXJ5dGhpbmcgYWJv
dXQgSU9NTVUgbm93Li4gY291bGQgeW91IHBsZWFzZQo+Pj4+PiByZW1pbmQgbWUgd2hhdCAiSU9N
TVUgZ3JvdXAiIGlzPwo+Pj4+Pgo+Pj4+PiBJc24ndCBpdCB0aGF0IGVhY2ggSU9NTVUgZ3JvdXAg
cmVsYXRlcyB0byB0aGUgSFcgSUQgKFNXR1JPVVApPyBCdXQgdGhlbgo+Pj4+PiBlYWNoIGRpc3Bs
YXkgY29udHJvbGxlciBoYXMgaXRzIG93biBTV0dST1VQLi4gYW5kIHRodXMgdGhhdCBzaGFyaW5n
IGp1c3QKPj4+Pj4gZG9lc24ndCBtYWtlIGFueSBzZW5zZSwgaG0uCj4+Pj4KPj4+PiBJT01NVSBn
cm91cHMgYXJlIG5vdCBkaXJlY3RseSByZWxhdGVkIHRvIFNXR1JPVVBzLiBCdXQgYnkgZGVmYXVs
dCB0aGUKPj4+PiBJT01NVSBmcmFtZXdvcmsgd2lsbCBzaGFyZSBhIGRvbWFpbiBiZXR3ZWVuIG1l
bWJlcnMgb2YgdGhlIHNhbWUgSU9NTVUKPj4+PiBncm91cC4KPj4+Cj4+PiBBaCwgSSByZS1maWd1
cmVkIG91dCB0aGF0IGFnYWluLiBUaGUgbWVtb3J5IGNvbnRyb2xsZXIgZHJpdmVycyBhcmUKPj4+
IGRlZmluaW5nIGEgc2luZ2xlICJJT01NVSBncm91cCIgZm9yIGJvdGggb2YgdGhlIGRpc3BsYXkg
Y29udHJvbGxlcnMuCj4+Pgo+Pj4+IFNlZW1zIGxpa2UgdGhhdCdzIHJlYWxseSB3aGF0IHdlIHdh
bnQgaGVyZSwgc28gdGhhdCB3aGVuIHdlIGRvCj4+Pj4gdXNlIHRoZSBETUEgQVBJLCBhbGwgdGhl
IGRldmljZXMgcGFydCBvZiB0aGUgRFJNIGRldmljZSBnZXQgYXR0YWNoZWQgdG8KPj4+PiB0aGUg
c2FtZSBJT01NVSBkb21haW4sIHlldCBpZiB3ZSBkb24ndCB3YW50IHRvIHVzZSB0aGUgRE1BIEFQ
SSB3ZSBvbmx5Cj4+Pj4gbmVlZCB0byBkZXRhY2ggdGhlIG9uZSBncm91cCBmcm9tIHRoZSBiYWNr
aW5nLgo+Pj4KPj4+IFllcywgaXQgc2hvdWxkIGJlIG9rYXkgdG8gcHV0IGFsbCBEUk0gZGV2aWNl
cyBpbnRvIHRoZSBzYW1lIGdyb3VwLCBsaWtlCj4+PiBpdCBpcyBkb25lIG5vdyBmb3IgdGhlIGRp
c3BsYXlzLiBJdCBhbHNvIHNob3VsZCByZXNvbHZlIHByb2JsZW0gd2l0aCB0aGUKPj4+IGRvbWFp
bnMgc2hvcnRhZ2Ugb24gVDMwIHNpbmNlIG5vdyB0aGVyZSBhcmUgbWF4aW11bSAzIGRvbWFpbnMg
aW4gdXNlOgo+Pj4gaG9zdDF4LCBkcm0gYW5kIHZkZS4KPj4+Cj4+PiBJIGFjdHVhbGx5IGp1c3Qg
Y2hlY2tlZCB0aGF0IHRoZSBvcmlnaW5hbCBwcm9ibGVtIHN0aWxsIGV4aXN0cwo+Pj4gYW5kIHRo
aXMgY2hhbmdlIHNvbHZlcyBpdCBhcyB3ZWxsOgo+Pj4KPj4+IC0tLQo+Pj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvbWVtb3J5L3RlZ3JhL3RlZ3JhMzAuYyBiL2RyaXZlcnMvbWVtb3J5L3RlZ3JhL3Rl
Z3JhMzAuYwo+Pj4gaW5kZXggNWEwZjZlMGExNjQzLi5lNzEwOTY0OTg0MzYgMTAwNjQ0Cj4+PiAt
LS0gYS9kcml2ZXJzL21lbW9yeS90ZWdyYS90ZWdyYTMwLmMKPj4+ICsrKyBiL2RyaXZlcnMvbWVt
b3J5L3RlZ3JhL3RlZ3JhMzAuYwo+Pj4gQEAgLTEwMjEsNiArMTAyMSw5IEBAIHN0YXRpYyBjb25z
dCBzdHJ1Y3QgdGVncmFfc21tdV9zd2dyb3VwCj4+PiB0ZWdyYTMwX3N3Z3JvdXBzW10gPSB7Cj4+
PiAgc3RhdGljIGNvbnN0IHVuc2lnbmVkIGludCB0ZWdyYTMwX2dyb3VwX2Rpc3BsYXlbXSA9IHsK
Pj4+ICAJVEVHUkFfU1dHUk9VUF9EQywKPj4+ICAJVEVHUkFfU1dHUk9VUF9EQ0IsCj4+PiArCVRF
R1JBX1NXR1JPVVBfRzIsCj4+PiArCVRFR1JBX1NXR1JPVVBfTlYsCj4+PiArCVRFR1JBX1NXR1JP
VVBfTlYyLAo+Pj4gIH07Cj4+Pgo+Pj4gIHN0YXRpYyBjb25zdCBzdHJ1Y3QgdGVncmFfc21tdV9n
cm91cF9zb2MgdGVncmEzMF9ncm91cHNbXSA9IHsKPj4+IC0tLQo+Pj4KPj4+IFBsZWFzZSBsZXQg
bWUga25vdyB3aGV0aGVyIHlvdSdyZSBnb2luZyB0byBtYWtlIGEgcGF0Y2ggb3IgaWYgSSBzaG91
bGQKPj4+IGRvIGl0Lgo+Pgo+PiBJJ3ZlIGJlZW4gdGVzdGluZyB3aXRoIGEgc2ltaWxhciBjaGFu
Z2UgYW5kIGNvdWxkbid0IGZpbmQgYW55Cj4+IHJlZ3Jlc3Npb25zLiBJJ3ZlIGFsc28gbWFkZSB0
aGUgc2FtZSBtb2RpZmljYXRpb25zIGZvciBUZWdyYTExNCBhbmQKPj4gVGVncmExMjQuCj4+Cj4+
IEFyZSB5b3Ugc2F5aW5nIHRoYXQgbm9uZSBvZiB0aGVzZSBwYXRjaGVzIGFyZSBuZWVkZWQgYW55
bW9yZT8gT3IgZG8gd2UKPj4gc3RpbGwgbmVlZCBhIHBhdGNoIHRvIGZpeCBkZXRhY2hpbmc/IEkn
bSB0aGlua2luZyB0aGF0IG1heWJlIHdlIGNhbgo+PiBkcmFzdHJpY2FsbHkgc2ltcGxpZnkgdGhl
IGRldGFjaG1lbnQgbm93IGJ5IGRyb3BwaW5nIHRoZSBzaGFyZWQKPj4gcGFyYW1ldGVyIGFsdG9n
ZXRoZXIuCj4+Cj4+IExldCBtZSBkcmFmdCBhIHBhdGNoIGFuZCBzZW5kIG91dCB0aGUgd2hvbGUg
c2V0IGZvciB0ZXN0aW5nLgo+IAo+IFNlZW1zIGl0J3Mgc3RpbGwgbm90IGlkZWFsIGJlY2F1c2Ug
SSBub3RpY2VkIHRoaXMgaW4gS01TRzoKPiAKPiBbICAgIDAuNzAzMTg1XSBGYWlsZWQgdG8gYXR0
YWNoZWQgZGV2aWNlIDU0MjAwMDAwLmRjIHRvIElPTU1VX21hcHBpbmcKPiBbICAgIDAuNzEwNDA0
XSBGYWlsZWQgdG8gYXR0YWNoZWQgZGV2aWNlIDU0MjQwMDAwLmRjIHRvIElPTU1VX21hcHBpbmcK
PiBbICAgIDAuNzE5MzQ3XSBGYWlsZWQgdG8gYXR0YWNoZWQgZGV2aWNlIDU0MTQwMDAwLmdyMmQg
dG8gSU9NTVVfbWFwcGluZwo+IFsgICAgMC43MTk1NjldIEZhaWxlZCB0byBhdHRhY2hlZCBkZXZp
Y2UgNTQxODAwMDAuZ3IzZCB0byBJT01NVV9tYXBwaW5nCj4gCj4gd2hpY2ggY29tZXMgZnJvbSB0
aGUgaW1wbGljaXQgSU9NTVUgYmFja2luZy4KCkFuZCB0aGUgZXJyb3IgY29tZXMgZnJvbSBoZXJl
OgoKaHR0cHM6Ly9lbGl4aXIuYm9vdGxpbi5jb20vbGludXgvdjUuNC1yYzIvc291cmNlL2RyaXZl
cnMvaW9tbXUvaW9tbXUuYyNMMTY1NQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZHJpLWRldmVs
