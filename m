Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id DF1388C1DB
	for <lists+dri-devel@lfdr.de>; Tue, 13 Aug 2019 22:11:19 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 96EC46E100;
	Tue, 13 Aug 2019 20:11:16 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E1BDA6E102
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 20:11:14 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 988BA9DB;
 Tue, 13 Aug 2019 22:11:10 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v4 4/9] drm/panel: Add driver for the LG Philips LB035Q02 panel
Date: Tue, 13 Aug 2019 23:10:56 +0300
Message-Id: <20190813201101.30980-5-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190813201101.30980-1-laurent.pinchart@ideasonboard.com>
References: <20190813201101.30980-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1565727070;
 bh=4TL/7sLyJSEmrPlNmc+bGp2Oua0uahXoImWQTNkDGYo=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=DbHtRsV3Jk3feF1nq9957FuwmtTWGNWDz/IMCVcTDPwVnpomaZyO3vcoyAPD4RO0f
 4bHabWUMngyQ1b4YYWg2CFLw3HCEJURCgA/kZB0VQAVu2ft5wkabTVKMesHogLrkL6
 8PLciZBxSkNrBGcN0E8M6Ma3xH83Q8dVkey61l08=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYW5lbCBpcyB1c2VkIG9uIHRoZSBHdW1zdGl4IE92ZXJvIFBhbG8zNS4KClRoZSBjb2Rl
IGlzIGJhc2VkIG9uIHRoZSBvbWFwZHJtLXNwZWNpZmljIHBhbmVsLWxncGhpbGlwcy1sYjAzNXEw
Mgpkcml2ZXIuCgpTaWduZWQtb2ZmLWJ5OiBMYXVyZW50IFBpbmNoYXJ0IDxsYXVyZW50LnBpbmNo
YXJ0QGlkZWFzb25ib2FyZC5jb20+ClJldmlld2VkLWJ5OiBTYW0gUmF2bmJvcmcgPHNhbUByYXZu
Ym9yZy5vcmc+Ci0tLQpDaGFuZ2VzIHNpbmNlIHYxOgoKLSBDb21tZW50cyB1cGRhdGVzCi0gU3Rv
cmUgd2lkdGhfbW0gYW5kIGhlaWdodF9tbSBpbiBkcm1fZGlzcGxheV9tb2RlCi0gVXNlIGRybV9w
YW5lbF9kaXNhYmxlKCkgaW4gLnJlbW92ZSgpIGhhbmRsZXIKLS0tCiBkcml2ZXJzL2dwdS9kcm0v
cGFuZWwvS2NvbmZpZyAgICAgICAgICAgICB8ICAgOCArCiBkcml2ZXJzL2dwdS9kcm0vcGFuZWwv
TWFrZWZpbGUgICAgICAgICAgICB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwt
bGctbGIwMzVxMDIuYyB8IDIzNyArKysrKysrKysrKysrKysrKysrKysrCiAzIGZpbGVzIGNoYW5n
ZWQsIDI0NiBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJt
L3BhbmVsL3BhbmVsLWxnLWxiMDM1cTAyLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
cGFuZWwvS2NvbmZpZyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnCmluZGV4IGVhZWNk
NDBjYzMyZS4uODdjZGMzMzA2NzJiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwv
S2NvbmZpZworKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvS2NvbmZpZwpAQCAtMTAzLDYgKzEw
MywxNCBAQCBjb25maWcgRFJNX1BBTkVMX1NBTVNVTkdfTEQ5MDQwCiAJZGVwZW5kcyBvbiBPRiAm
JiBTUEkKIAlzZWxlY3QgVklERU9NT0RFX0hFTFBFUlMKIAorY29uZmlnIERSTV9QQU5FTF9MR19M
QjAzNVEwMgorCXRyaXN0YXRlICJMRyBMQjAzNVEwMjQ1NzMgUkdCIHBhbmVsIgorCWRlcGVuZHMg
b24gR1BJT0xJQiAmJiBPRiAmJiBTUEkKKwloZWxwCisJICBTYXkgWSBoZXJlIGlmIHlvdSB3YW50
IHRvIGVuYWJsZSBzdXBwb3J0IGZvciB0aGUgTEIwMzVRMDIgUkdCIHBhbmVsCisJICAoZm91bmQg
b24gdGhlIEd1bXN0aXggT3Zlcm8gUGFsbzM1IGJvYXJkKS4gVG8gY29tcGlsZSB0aGlzIGRyaXZl
ciBhcworCSAgYSBtb2R1bGUsIGNob29zZSBNIGhlcmUuCisKIGNvbmZpZyBEUk1fUEFORUxfTEdf
TEc0NTczCiAJdHJpc3RhdGUgIkxHNDU3MyBSR0IvU1BJIHBhbmVsIgogCWRlcGVuZHMgb24gT0Yg
JiYgU1BJCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUgYi9kcml2
ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKaW5kZXggNjJkYWU0NWY4Zjc0Li45YmM2ZjNjNWJm
OTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQorKysgYi9kcml2
ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKQEAgLTgsNiArOCw3IEBAIG9iai0kKENPTkZJR19E
Uk1fUEFORUxfSUxJVEVLX0lMSTk4ODFDKSArPSBwYW5lbC1pbGl0ZWstaWxpOTg4MWMubwogb2Jq
LSQoQ09ORklHX0RSTV9QQU5FTF9JTk5PTFVYX1AwNzlaQ0EpICs9IHBhbmVsLWlubm9sdXgtcDA3
OXpjYS5vCiBvYmotJChDT05GSUdfRFJNX1BBTkVMX0pESV9MVDA3ME1FMDUwMDApICs9IHBhbmVs
LWpkaS1sdDA3MG1lMDUwMDAubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9LSU5HRElTUExBWV9L
RDA5N0QwNCkgKz0gcGFuZWwta2luZ2Rpc3BsYXkta2QwOTdkMDQubworb2JqLSQoQ09ORklHX0RS
TV9QQU5FTF9MR19MQjAzNVEwMikgKz0gcGFuZWwtbGctbGIwMzVxMDIubwogb2JqLSQoQ09ORklH
X0RSTV9QQU5FTF9MR19MRzQ1NzMpICs9IHBhbmVsLWxnLWxnNDU3My5vCiBvYmotJChDT05GSUdf
RFJNX1BBTkVMX05PVkFURUtfTlQzOTAxNikgKz0gcGFuZWwtbm92YXRlay1udDM5MDE2Lm8KIG9i
ai0kKENPTkZJR19EUk1fUEFORUxfT0xJTUVYX0xDRF9PTElOVVhJTk8pICs9IHBhbmVsLW9saW1l
eC1sY2Qtb2xpbnV4aW5vLm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5l
bC1sZy1sYjAzNXEwMi5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLWxnLWxiMDM1cTAy
LmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi42OTQ0ODlmYjkxYjIK
LS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtbGctbGIwMzVx
MDIuYwpAQCAtMCwwICsxLDIzNyBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0y
LjAKKy8qCisgKiBMRy5QaGlsaXBzIExCMDM1UTAyIExDRCBQYW5lbCBEcml2ZXIKKyAqCisgKiBD
b3B5cmlnaHQgKEMpIDIwMTkgVGV4YXMgSW5zdHJ1bWVudHMgSW5jb3Jwb3JhdGVkCisgKgorICog
QmFzZWQgb24gdGhlIG9tYXBkcm0tc3BlY2lmaWMgcGFuZWwtbGdwaGlsaXBzLWxiMDM1cTAyIGRy
aXZlcgorICoKKyAqIENvcHlyaWdodCAoQykgMjAxMyBUZXhhcyBJbnN0cnVtZW50cyBJbmNvcnBv
cmF0ZWQKKyAqIEF1dGhvcjogVG9taSBWYWxrZWluZW4gPHRvbWkudmFsa2VpbmVuQHRpLmNvbT4K
KyAqCisgKiBCYXNlZCBvbiBhIGRyaXZlciBieTogU3RldmUgU2Frb21hbiA8c3RldmVAc2Frb21h
bi5jb20+CisgKi8KKworI2luY2x1ZGUgPGxpbnV4L2dwaW8vY29uc3VtZXIuaD4KKyNpbmNsdWRl
IDxsaW51eC9tb2R1bGUuaD4KKyNpbmNsdWRlIDxsaW51eC9zcGkvc3BpLmg+CisKKyNpbmNsdWRl
IDxkcm0vZHJtX2Nvbm5lY3Rvci5oPgorI2luY2x1ZGUgPGRybS9kcm1fbW9kZXMuaD4KKyNpbmNs
dWRlIDxkcm0vZHJtX3BhbmVsLmg+CisKK3N0cnVjdCBsYjAzNXEwMl9kZXZpY2UgeworCXN0cnVj
dCBkcm1fcGFuZWwgcGFuZWw7CisKKwlzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpOworCXN0cnVjdCBn
cGlvX2Rlc2MgKmVuYWJsZV9ncGlvOworfTsKKworI2RlZmluZSB0b19sYjAzNXEwMl9kZXZpY2Uo
cCkgY29udGFpbmVyX29mKHAsIHN0cnVjdCBsYjAzNXEwMl9kZXZpY2UsIHBhbmVsKQorCitzdGF0
aWMgaW50IGxiMDM1cTAyX3dyaXRlKHN0cnVjdCBsYjAzNXEwMl9kZXZpY2UgKmxjZCwgdTE2IHJl
ZywgdTE2IHZhbCkKK3sKKwlzdHJ1Y3Qgc3BpX21lc3NhZ2UgbXNnOworCXN0cnVjdCBzcGlfdHJh
bnNmZXIgaW5kZXhfeGZlciA9IHsKKwkJLmxlbgkJPSAzLAorCQkuY3NfY2hhbmdlCT0gMSwKKwl9
OworCXN0cnVjdCBzcGlfdHJhbnNmZXIgdmFsdWVfeGZlciA9IHsKKwkJLmxlbgkJPSAzLAorCX07
CisJdTgJYnVmZmVyWzE2XTsKKworCXNwaV9tZXNzYWdlX2luaXQoJm1zZyk7CisKKwkvKiByZWdp
c3RlciBpbmRleCAqLworCWJ1ZmZlclswXSA9IDB4NzA7CisJYnVmZmVyWzFdID0gMHgwMDsKKwli
dWZmZXJbMl0gPSByZWcgJiAweDdmOworCWluZGV4X3hmZXIudHhfYnVmID0gYnVmZmVyOworCXNw
aV9tZXNzYWdlX2FkZF90YWlsKCZpbmRleF94ZmVyLCAmbXNnKTsKKworCS8qIHJlZ2lzdGVyIHZh
bHVlICovCisJYnVmZmVyWzRdID0gMHg3MjsKKwlidWZmZXJbNV0gPSB2YWwgPj4gODsKKwlidWZm
ZXJbNl0gPSB2YWw7CisJdmFsdWVfeGZlci50eF9idWYgPSBidWZmZXIgKyA0OworCXNwaV9tZXNz
YWdlX2FkZF90YWlsKCZ2YWx1ZV94ZmVyLCAmbXNnKTsKKworCXJldHVybiBzcGlfc3luYyhsY2Qt
PnNwaSwgJm1zZyk7Cit9CisKK3N0YXRpYyBpbnQgbGIwMzVxMDJfaW5pdChzdHJ1Y3QgbGIwMzVx
MDJfZGV2aWNlICpsY2QpCit7CisJLyogSW5pdCBzZXF1ZW5jZSBmcm9tIHBhZ2UgMjggb2YgdGhl
IGxiMDM1cTAyIHNwZWMuICovCisJc3RhdGljIGNvbnN0IHN0cnVjdCB7CisJCXUxNiBpbmRleDsK
KwkJdTE2IHZhbHVlOworCX0gaW5pdF9kYXRhW10gPSB7CisJCXsgMHgwMSwgMHg2MzAwIH0sCisJ
CXsgMHgwMiwgMHgwMjAwIH0sCisJCXsgMHgwMywgMHgwMTc3IH0sCisJCXsgMHgwNCwgMHgwNGM3
IH0sCisJCXsgMHgwNSwgMHhmZmMwIH0sCisJCXsgMHgwNiwgMHhlODA2IH0sCisJCXsgMHgwYSwg
MHg0MDA4IH0sCisJCXsgMHgwYiwgMHgwMDAwIH0sCisJCXsgMHgwZCwgMHgwMDMwIH0sCisJCXsg
MHgwZSwgMHgyODAwIH0sCisJCXsgMHgwZiwgMHgwMDAwIH0sCisJCXsgMHgxNiwgMHg5ZjgwIH0s
CisJCXsgMHgxNywgMHgwYTBmIH0sCisJCXsgMHgxZSwgMHgwMGMxIH0sCisJCXsgMHgzMCwgMHgw
MzAwIH0sCisJCXsgMHgzMSwgMHgwMDA3IH0sCisJCXsgMHgzMiwgMHgwMDAwIH0sCisJCXsgMHgz
MywgMHgwMDAwIH0sCisJCXsgMHgzNCwgMHgwNzA3IH0sCisJCXsgMHgzNSwgMHgwMDA0IH0sCisJ
CXsgMHgzNiwgMHgwMzAyIH0sCisJCXsgMHgzNywgMHgwMjAyIH0sCisJCXsgMHgzYSwgMHgwYTBk
IH0sCisJCXsgMHgzYiwgMHgwODA2IH0sCisJfTsKKworCXVuc2lnbmVkIGludCBpOworCWludCBy
ZXQ7CisKKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShpbml0X2RhdGEpOyArK2kpIHsKKwkJ
cmV0ID0gbGIwMzVxMDJfd3JpdGUobGNkLCBpbml0X2RhdGFbaV0uaW5kZXgsCisJCQkJICAgICBp
bml0X2RhdGFbaV0udmFsdWUpOworCQlpZiAocmV0IDwgMCkKKwkJCXJldHVybiByZXQ7CisJfQor
CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbGIwMzVxMDJfZGlzYWJsZShzdHJ1Y3QgZHJt
X3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3QgbGIwMzVxMDJfZGV2aWNlICpsY2QgPSB0b19sYjAz
NXEwMl9kZXZpY2UocGFuZWwpOworCisJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGxjZC0+ZW5h
YmxlX2dwaW8sIDApOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbGIwMzVxMDJfZW5h
YmxlKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCBsYjAzNXEwMl9kZXZpY2Ug
KmxjZCA9IHRvX2xiMDM1cTAyX2RldmljZShwYW5lbCk7CisKKwlncGlvZF9zZXRfdmFsdWVfY2Fu
c2xlZXAobGNkLT5lbmFibGVfZ3BpbywgMSk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGNv
bnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlIGxiMDM1cTAyX21vZGUgPSB7CisJLmNsb2NrID0g
NjUwMCwKKwkuaGRpc3BsYXkgPSAzMjAsCisJLmhzeW5jX3N0YXJ0ID0gMzIwICsgMjAsCisJLmhz
eW5jX2VuZCA9IDMyMCArIDIwICsgMiwKKwkuaHRvdGFsID0gMzIwICsgMjAgKyAyICsgNjgsCisJ
LnZkaXNwbGF5ID0gMjQwLAorCS52c3luY19zdGFydCA9IDI0MCArIDQsCisJLnZzeW5jX2VuZCA9
IDI0MCArIDQgKyAyLAorCS52dG90YWwgPSAyNDAgKyA0ICsgMiArIDE4LAorCS52cmVmcmVzaCA9
IDYwLAorCS50eXBlID0gRFJNX01PREVfVFlQRV9EUklWRVIgfCBEUk1fTU9ERV9UWVBFX1BSRUZF
UlJFRCwKKwkuZmxhZ3MgPSBEUk1fTU9ERV9GTEFHX05IU1lOQyB8IERSTV9NT0RFX0ZMQUdfTlZT
WU5DLAorCS53aWR0aF9tbSA9IDcwLAorCS5oZWlnaHRfbW0gPSA1MywKK307CisKK3N0YXRpYyBp
bnQgbGIwMzVxMDJfZ2V0X21vZGVzKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IgPSBwYW5lbC0+Y29ubmVjdG9yOworCXN0cnVjdCBk
cm1fZGlzcGxheV9tb2RlICptb2RlOworCisJbW9kZSA9IGRybV9tb2RlX2R1cGxpY2F0ZShwYW5l
bC0+ZHJtLCAmbGIwMzVxMDJfbW9kZSk7CisJaWYgKCFtb2RlKQorCQlyZXR1cm4gLUVOT01FTTsK
KworCWRybV9tb2RlX3NldF9uYW1lKG1vZGUpOworCWRybV9tb2RlX3Byb2JlZF9hZGQoY29ubmVj
dG9yLCBtb2RlKTsKKworCWNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLndpZHRoX21tID0gbGIwMzVx
MDJfbW9kZS53aWR0aF9tbTsKKwljb25uZWN0b3ItPmRpc3BsYXlfaW5mby5oZWlnaHRfbW0gPSBs
YjAzNXEwMl9tb2RlLmhlaWdodF9tbTsKKwkvKgorCSAqIEZJWE1FOiBBY2NvcmRpbmcgdG8gdGhl
IGRhdGFzaGVldCBwaXhlbCBkYXRhIGlzIHNhbXBsZWQgb24gdGhlCisJICogcmlzaW5nIGVkZ2Ug
b2YgdGhlIGNsb2NrLCBidXQgdGhlIGNvZGUgcnVubmluZyBvbiB0aGUgR3Vtc3RpeCBPdmVybwor
CSAqIFBhbG8zNSBpbmRpY2F0ZXMgc2FtcGxpbmcgb24gdGhlIG5lZ2F0aXZlIGVkZ2UuIFRoaXMg
c2hvdWxkIGJlCisJICogdGVzdGVkIG9uIGEgcmVhbCBkZXZpY2UuCisJICovCisJY29ubmVjdG9y
LT5kaXNwbGF5X2luZm8uYnVzX2ZsYWdzID0gRFJNX0JVU19GTEFHX0RFX0hJR0gKKwkJCQkJICB8
IERSTV9CVVNfRkxBR19TWU5DX1NBTVBMRV9QT1NFREdFCisJCQkJCSAgfCBEUk1fQlVTX0ZMQUdf
UElYREFUQV9TQU1QTEVfTkVHRURHRTsKKworCXJldHVybiAxOworfQorCitzdGF0aWMgY29uc3Qg
c3RydWN0IGRybV9wYW5lbF9mdW5jcyBsYjAzNXEwMl9mdW5jcyA9IHsKKwkuZGlzYWJsZSA9IGxi
MDM1cTAyX2Rpc2FibGUsCisJLmVuYWJsZSA9IGxiMDM1cTAyX2VuYWJsZSwKKwkuZ2V0X21vZGVz
ID0gbGIwMzVxMDJfZ2V0X21vZGVzLAorfTsKKworc3RhdGljIGludCBsYjAzNXEwMl9wcm9iZShz
dHJ1Y3Qgc3BpX2RldmljZSAqc3BpKQoreworCXN0cnVjdCBsYjAzNXEwMl9kZXZpY2UgKmxjZDsK
KwlpbnQgcmV0OworCisJbGNkID0gZGV2bV9remFsbG9jKCZzcGktPmRldiwgc2l6ZW9mKCpsY2Qp
LCBHRlBfS0VSTkVMKTsKKwlpZiAobGNkID09IE5VTEwpCisJCXJldHVybiAtRU5PTUVNOworCisJ
c3BpX3NldF9kcnZkYXRhKHNwaSwgbGNkKTsKKwlsY2QtPnNwaSA9IHNwaTsKKworCWxjZC0+ZW5h
YmxlX2dwaW8gPSBkZXZtX2dwaW9kX2dldCgmc3BpLT5kZXYsICJlbmFibGUiLCBHUElPRF9PVVRf
TE9XKTsKKwlpZiAoSVNfRVJSKGxjZC0+ZW5hYmxlX2dwaW8pKSB7CisJCWRldl9lcnIoJnNwaS0+
ZGV2LCAiZmFpbGVkIHRvIHBhcnNlIGVuYWJsZSBncGlvXG4iKTsKKwkJcmV0dXJuIFBUUl9FUlIo
bGNkLT5lbmFibGVfZ3Bpbyk7CisJfQorCisJcmV0ID0gbGIwMzVxMDJfaW5pdChsY2QpOworCWlm
IChyZXQgPCAwKQorCQlyZXR1cm4gcmV0OworCisJZHJtX3BhbmVsX2luaXQoJmxjZC0+cGFuZWwp
OworCWxjZC0+cGFuZWwuZGV2ID0gJmxjZC0+c3BpLT5kZXY7CisJbGNkLT5wYW5lbC5mdW5jcyA9
ICZsYjAzNXEwMl9mdW5jczsKKworCXJldHVybiBkcm1fcGFuZWxfYWRkKCZsY2QtPnBhbmVsKTsK
K30KKworc3RhdGljIGludCBsYjAzNXEwMl9yZW1vdmUoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSkK
K3sKKwlzdHJ1Y3QgbGIwMzVxMDJfZGV2aWNlICpsY2QgPSBzcGlfZ2V0X2RydmRhdGEoc3BpKTsK
KworCWRybV9wYW5lbF9yZW1vdmUoJmxjZC0+cGFuZWwpOworCWRybV9wYW5lbF9kaXNhYmxlKCZs
Y2QtPnBhbmVsKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2Rl
dmljZV9pZCBsYjAzNXEwMl9vZl9tYXRjaFtdID0geworCXsgLmNvbXBhdGlibGUgPSAibGdwaGls
aXBzLGxiMDM1cTAyIiwgfSwKKwl7IC8qIHNlbnRpbmVsICovIH0sCit9OworCitNT0RVTEVfREVW
SUNFX1RBQkxFKG9mLCBsYjAzNXEwMl9vZl9tYXRjaCk7CisKK3N0YXRpYyBzdHJ1Y3Qgc3BpX2Ry
aXZlciBsYjAzNXEwMl9kcml2ZXIgPSB7CisJLnByb2JlCQk9IGxiMDM1cTAyX3Byb2JlLAorCS5y
ZW1vdmUJCT0gbGIwMzVxMDJfcmVtb3ZlLAorCS5kcml2ZXIJCT0geworCQkubmFtZQk9ICJwYW5l
bC1sZy1sYjAzNXEwMiIsCisJCS5vZl9tYXRjaF90YWJsZSA9IGxiMDM1cTAyX29mX21hdGNoLAor
CX0sCit9OworCittb2R1bGVfc3BpX2RyaXZlcihsYjAzNXEwMl9kcml2ZXIpOworCitNT0RVTEVf
QUxJQVMoInNwaTpsZ3BoaWxpcHMsbGIwMzVxMDIiKTsKK01PRFVMRV9BVVRIT1IoIlRvbWkgVmFs
a2VpbmVuIDx0b21pLnZhbGtlaW5lbkB0aS5jb20+Iik7CitNT0RVTEVfREVTQ1JJUFRJT04oIkxH
LlBoaWxpcHMgTEIwMzVRMDIgTENEIFBhbmVsIGRyaXZlciIpOworTU9EVUxFX0xJQ0VOU0UoIkdQ
TCIpOwotLSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hhcnQKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
