Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 18B863463E5
	for <lists+dri-devel@lfdr.de>; Tue, 23 Mar 2021 16:57:57 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EEAD46EC0D;
	Tue, 23 Mar 2021 15:57:43 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mblankhorst.nl (mblankhorst.nl
 [IPv6:2a02:2308::216:3eff:fe92:dfa3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6724C6EB85
 for <dri-devel@lists.freedesktop.org>; Tue, 23 Mar 2021 15:57:42 +0000 (UTC)
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Subject: [PATCH v9 17/70] drm/i915: Flatten obj->mm.lock
Date: Tue, 23 Mar 2021 16:50:06 +0100
Message-Id: <20210323155059.628690-18-maarten.lankhorst@linux.intel.com>
X-Mailer: git-send-email 2.31.0
In-Reply-To: <20210323155059.628690-1-maarten.lankhorst@linux.intel.com>
References: <20210323155059.628690-1-maarten.lankhorst@linux.intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Thomas=20Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>,
 dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V2l0aCB1c2VycHRyIGZpeGVkLCB0aGVyZSBpcyBubyBuZWVkIGZvciBhbGwgc2VwYXJhdGUgbG9j
a2RlcCBjbGFzc2VzCm5vdywgYW5kIHdlIGNhbiByZW1vdmUgYWxsIGxvY2tkZXAgdHJpY2tzIHVz
ZWQuIEEgdHJ5bG9jayBpbiB0aGUKc2hyaW5rZXIgaXMgYWxsIHdlIG5lZWQgbm93IHRvIGZsYXR0
ZW4gdGhlIGxvY2tpbmcgaGllcmFyY2h5LgoKU2lnbmVkLW9mZi1ieTogTWFhcnRlbiBMYW5raG9y
c3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KUmV2aWV3ZWQtYnk6IFRob21h
cyBIZWxsc3Ryw7ZtIDx0aG9tYXMuaGVsbHN0cm9tQGxpbnV4LmludGVsLmNvbT4KLS0tCiBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMgICB8ICA1ICstLQogZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oICAgfCAyMCArKy0tLS0tLS0tLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9wYWdlcy5jICAgIHwgMzQgKysrKysr
KysrKy0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9waHlzLmMg
ICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaHJpbmtlci5j
IHwgMTAgKysrLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0ci5j
ICB8ICAyICstCiA2IGZpbGVzIGNoYW5nZWQsIDI3IGluc2VydGlvbnMoKyksIDQ2IGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmpl
Y3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9vYmplY3QuYwppbmRleCA2
MDgzYjljMTRiZTYuLjgyMWNiNDBmOGQ3MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9vYmplY3QuYwpAQCAtNjIsNyArNjIsNyBAQCB2b2lkIGk5MTVfZ2VtX29iamVjdF9p
bml0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJCQkgIGNvbnN0IHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0X29wcyAqb3BzLAogCQkJICBzdHJ1Y3QgbG9ja19jbGFzc19rZXkg
KmtleSwgdW5zaWduZWQgZmxhZ3MpCiB7Ci0JX19tdXRleF9pbml0KCZvYmotPm1tLmxvY2ssIG9w
cy0+bmFtZSA/OiAib2JqLT5tbS5sb2NrIiwga2V5KTsKKwltdXRleF9pbml0KCZvYmotPm1tLmxv
Y2spOwogCiAJc3Bpbl9sb2NrX2luaXQoJm9iai0+dm1hLmxvY2spOwogCUlOSVRfTElTVF9IRUFE
KCZvYmotPnZtYS5saXN0KTsKQEAgLTg2LDkgKzg2LDYgQEAgdm9pZCBpOTE1X2dlbV9vYmplY3Rf
aW5pdChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCW11dGV4X2luaXQoJm9iai0+
bW0uZ2V0X3BhZ2UubG9jayk7CiAJSU5JVF9SQURJWF9UUkVFKCZvYmotPm1tLmdldF9kbWFfcGFn
ZS5yYWRpeCwgR0ZQX0tFUk5FTCB8IF9fR0ZQX05PV0FSTik7CiAJbXV0ZXhfaW5pdCgmb2JqLT5t
bS5nZXRfZG1hX3BhZ2UubG9jayk7Ci0KLQlpZiAoSVNfRU5BQkxFRChDT05GSUdfTE9DS0RFUCkg
JiYgaTkxNV9nZW1fb2JqZWN0X2lzX3Nocmlua2FibGUob2JqKSkKLQkJZnNfcmVjbGFpbV90YWlu
dHNfbXV0ZXgoJm9iai0+bW0ubG9jayk7CiB9CiAKIC8qKgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX29iamVjdC5oCmluZGV4IGI1YWY5YzQ0MGFjNS4uYTBlMWM0ZmYwZGU0IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmgKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX29iamVjdC5oCkBAIC0zNzIsMjcg
KzM3MiwxMCBAQCB2b2lkIF9faTkxNV9nZW1fb2JqZWN0X3NldF9wYWdlcyhzdHJ1Y3QgZHJtX2k5
MTVfZ2VtX29iamVjdCAqb2JqLAogaW50IF9fX19pOTE1X2dlbV9vYmplY3RfZ2V0X3BhZ2VzKHN0
cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopOwogaW50IF9faTkxNV9nZW1fb2JqZWN0X2dl
dF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsKIAotZW51bSBpOTE1X21t
X3N1YmNsYXNzIHsgLyogbG9ja2RlcCBzdWJjbGFzcyBmb3Igb2JqLT5tbS5sb2NrL3N0cnVjdF9t
dXRleCAqLwotCUk5MTVfTU1fTk9STUFMID0gMCwKLQkvKgotCSAqIE9ubHkgdXNlZCBieSBzdHJ1
Y3RfbXV0ZXgsIHdoZW4gY2FsbGVkICJyZWN1cnNpdmVseSIgZnJvbQotCSAqIGRpcmVjdC1yZWNs
YWltLWVzcXVlLiBTYWZlIGJlY2F1c2UgdGhlcmUgaXMgb25seSBldmVyeSBvbmUKLQkgKiBzdHJ1
Y3RfbXV0ZXggaW4gdGhlIGVudGlyZSBzeXN0ZW0uCi0JICovCi0JSTkxNV9NTV9TSFJJTktFUiA9
IDEsCi0JLyoKLQkgKiBVc2VkIGZvciBvYmotPm1tLmxvY2sgd2hlbiBhbGxvY2F0aW5nIHBhZ2Vz
LiBTYWZlIGJlY2F1c2UgdGhlIG9iamVjdAotCSAqIGlzbid0IHlldCBvbiBhbnkgTFJVLCBhbmQg
dGhlcmVmb3JlIHRoZSBzaHJpbmtlciBjYW4ndCBkZWFkbG9jayBvbgotCSAqIGl0LiBBcyBzb29u
IGFzIHRoZSBvYmplY3QgaGFzIHBhZ2VzLCBvYmotPm1tLmxvY2sgbmVzdHMgd2l0aGluCi0JICog
ZnNfcmVjbGFpbS4KLQkgKi8KLQlJOTE1X01NX0dFVF9QQUdFUyA9IDEsCi19OwotCiBzdGF0aWMg
aW5saW5lIGludCBfX211c3RfY2hlY2sKIGk5MTVfZ2VtX29iamVjdF9waW5fcGFnZXMoc3RydWN0
IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKIHsKLQltaWdodF9sb2NrX25lc3RlZCgmb2JqLT5t
bS5sb2NrLCBJOTE1X01NX0dFVF9QQUdFUyk7CisJbWlnaHRfbG9jaygmb2JqLT5tbS5sb2NrKTsK
IAogCWlmIChhdG9taWNfaW5jX25vdF96ZXJvKCZvYmotPm1tLnBhZ2VzX3Bpbl9jb3VudCkpCiAJ
CXJldHVybiAwOwpAQCAtNDM2LDYgKzQxOSw3IEBAIGk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdl
cyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogfQogCiBpbnQgX19pOTE1X2dlbV9v
YmplY3RfcHV0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopOworaW50IF9f
aTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlc19sb2NrZWQoc3RydWN0IGRybV9pOTE1X2dlbV9vYmpl
Y3QgKm9iaik7CiB2b2lkIGk5MTVfZ2VtX29iamVjdF90cnVuY2F0ZShzdHJ1Y3QgZHJtX2k5MTVf
Z2VtX29iamVjdCAqb2JqKTsKIHZvaWQgaTkxNV9nZW1fb2JqZWN0X3dyaXRlYmFjayhzdHJ1Y3Qg
ZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL2k5MTVfZ2VtX3BhZ2VzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fcGFnZXMuYwppbmRleCBlN2Q3NjUwMDcyYzUuLmU5NDdkNGMwZGExZiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BhZ2VzLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3BhZ2VzLmMKQEAgLTExNCw3ICsxMTQsNyBAQCBp
bnQgX19pOTE1X2dlbV9vYmplY3RfZ2V0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
ICpvYmopCiB7CiAJaW50IGVycjsKIAotCWVyciA9IG11dGV4X2xvY2tfaW50ZXJydXB0aWJsZV9u
ZXN0ZWQoJm9iai0+bW0ubG9jaywgSTkxNV9NTV9HRVRfUEFHRVMpOworCWVyciA9IG11dGV4X2xv
Y2tfaW50ZXJydXB0aWJsZSgmb2JqLT5tbS5sb2NrKTsKIAlpZiAoZXJyKQogCQlyZXR1cm4gZXJy
OwogCkBAIC0xOTYsMjEgKzE5NiwxMyBAQCBfX2k5MTVfZ2VtX29iamVjdF91bnNldF9wYWdlcyhz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqKQogCXJldHVybiBwYWdlczsKIH0KIAotaW50
IF9faTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAq
b2JqKQoraW50IF9faTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlc19sb2NrZWQoc3RydWN0IGRybV9p
OTE1X2dlbV9vYmplY3QgKm9iaikKIHsKIAlzdHJ1Y3Qgc2dfdGFibGUgKnBhZ2VzOwotCWludCBl
cnI7CiAKIAlpZiAoaTkxNV9nZW1fb2JqZWN0X2hhc19waW5uZWRfcGFnZXMob2JqKSkKIAkJcmV0
dXJuIC1FQlVTWTsKIAotCS8qIE1heSBiZSBjYWxsZWQgYnkgc2hyaW5rZXIgZnJvbSB3aXRoaW4g
Z2V0X3BhZ2VzKCkgKG9uIGFub3RoZXIgYm8pICovCi0JbXV0ZXhfbG9jaygmb2JqLT5tbS5sb2Nr
KTsKLQlpZiAodW5saWtlbHkoYXRvbWljX3JlYWQoJm9iai0+bW0ucGFnZXNfcGluX2NvdW50KSkp
IHsKLQkJZXJyID0gLUVCVVNZOwotCQlnb3RvIHVubG9jazsKLQl9Ci0KIAlpOTE1X2dlbV9vYmpl
Y3RfcmVsZWFzZV9tbWFwX29mZnNldChvYmopOwogCiAJLyoKQEAgLTIyNiwxNCArMjE4LDIyIEBA
IGludCBfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmpl
Y3QgKm9iaikKIAkgKiBnZXRfcGFnZXMgYmFja2VuZHMgd2Ugc2hvdWxkIGJlIGJldHRlciBhYmxl
IHRvIGhhbmRsZSB0aGUKIAkgKiBjYW5jZWxsYXRpb24gb2YgdGhlIGFzeW5jIHRhc2sgaW4gYSBt
b3JlIHVuaWZvcm0gbWFubmVyLgogCSAqLwotCWlmICghcGFnZXMpCi0JCXBhZ2VzID0gRVJSX1BU
UigtRUlOVkFMKTsKLQotCWlmICghSVNfRVJSKHBhZ2VzKSkKKwlpZiAoIUlTX0VSUl9PUl9OVUxM
KHBhZ2VzKSkKIAkJb2JqLT5vcHMtPnB1dF9wYWdlcyhvYmosIHBhZ2VzKTsKIAotCWVyciA9IDA7
Ci11bmxvY2s6CisJcmV0dXJuIDA7Cit9CisKK2ludCBfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFn
ZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikKK3sKKwlpbnQgZXJyOworCisJaWYg
KGk5MTVfZ2VtX29iamVjdF9oYXNfcGlubmVkX3BhZ2VzKG9iaikpCisJCXJldHVybiAtRUJVU1k7
CisKKwkvKiBNYXkgYmUgY2FsbGVkIGJ5IHNocmlua2VyIGZyb20gd2l0aGluIGdldF9wYWdlcygp
IChvbiBhbm90aGVyIGJvKSAqLworCW11dGV4X2xvY2soJm9iai0+bW0ubG9jayk7CisJZXJyID0g
X19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzX2xvY2tlZChvYmopOwogCW11dGV4X3VubG9jaygm
b2JqLT5tbS5sb2NrKTsKIAogCXJldHVybiBlcnI7CkBAIC0zNDEsNyArMzQxLDcgQEAgdm9pZCAq
aTkxNV9nZW1fb2JqZWN0X3Bpbl9tYXAoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwK
IAkgICAgIWk5MTVfZ2VtX29iamVjdF90eXBlX2hhcyhvYmosIEk5MTVfR0VNX09CSkVDVF9IQVNf
SU9NRU0pKQogCQlyZXR1cm4gRVJSX1BUUigtRU5YSU8pOwogCi0JZXJyID0gbXV0ZXhfbG9ja19p
bnRlcnJ1cHRpYmxlX25lc3RlZCgmb2JqLT5tbS5sb2NrLCBJOTE1X01NX0dFVF9QQUdFUyk7CisJ
ZXJyID0gbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKCZvYmotPm1tLmxvY2spOwogCWlmIChlcnIp
CiAJCXJldHVybiBFUlJfUFRSKGVycik7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9waHlzLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fcGh5cy5jCmluZGV4IDA2YzQ4MWZmNzlkOC4uNDQzMjljNDM1Y2YxIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcGh5cy5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9waHlzLmMKQEAgLTIzNiw3ICsyMzYsNyBAQCBpbnQgaTkx
NV9nZW1fb2JqZWN0X2F0dGFjaF9waHlzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmos
IGludCBhbGlnbikKIAlpZiAoZXJyKQogCQlyZXR1cm4gZXJyOwogCi0JZXJyID0gbXV0ZXhfbG9j
a19pbnRlcnJ1cHRpYmxlX25lc3RlZCgmb2JqLT5tbS5sb2NrLCBJOTE1X01NX0dFVF9QQUdFUyk7
CisJZXJyID0gbXV0ZXhfbG9ja19pbnRlcnJ1cHRpYmxlKCZvYmotPm1tLmxvY2spOwogCWlmIChl
cnIpCiAJCWdvdG8gZXJyX3VubG9jazsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX3Nocmlua2VyLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fc2hyaW5rZXIuYwppbmRleCBiNjRhMDc4ODM4MWYuLjMwNTJlZjVhZDg5ZCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3Nocmlua2VyLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3Nocmlua2VyLmMKQEAgLTQ5LDkgKzQ5
LDkgQEAgc3RhdGljIGJvb2wgdW5zYWZlX2Ryb3BfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9v
YmplY3QgKm9iaiwKIAkJZmxhZ3MgPSBJOTE1X0dFTV9PQkpFQ1RfVU5CSU5EX1RFU1Q7CiAKIAlp
ZiAoaTkxNV9nZW1fb2JqZWN0X3VuYmluZChvYmosIGZsYWdzKSA9PSAwKQotCQlfX2k5MTVfZ2Vt
X29iamVjdF9wdXRfcGFnZXMob2JqKTsKKwkJcmV0dXJuIHRydWU7CiAKLQlyZXR1cm4gIWk5MTVf
Z2VtX29iamVjdF9oYXNfcGFnZXMob2JqKTsKKwlyZXR1cm4gZmFsc2U7CiB9CiAKIHN0YXRpYyB2
b2lkIHRyeV90b193cml0ZWJhY2soc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwKQEAg
LTIwMCwxMCArMjAwLDEwIEBAIGk5MTVfZ2VtX3NocmluayhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0
ZSAqaTkxNSwKIAogCQkJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmaTkxNS0+bW0ub2JqX2xvY2ss
IGZsYWdzKTsKIAotCQkJaWYgKHVuc2FmZV9kcm9wX3BhZ2VzKG9iaiwgc2hyaW5rKSkgeworCQkJ
aWYgKHVuc2FmZV9kcm9wX3BhZ2VzKG9iaiwgc2hyaW5rKSAmJgorCQkJICAgIG11dGV4X3RyeWxv
Y2soJm9iai0+bW0ubG9jaykpIHsKIAkJCQkvKiBNYXkgYXJyaXZlIGZyb20gZ2V0X3BhZ2VzIG9u
IGFub3RoZXIgYm8gKi8KLQkJCQltdXRleF9sb2NrKCZvYmotPm1tLmxvY2spOwotCQkJCWlmICgh
aTkxNV9nZW1fb2JqZWN0X2hhc19wYWdlcyhvYmopKSB7CisJCQkJaWYgKCFfX2k5MTVfZ2VtX29i
amVjdF9wdXRfcGFnZXNfbG9ja2VkKG9iaikpIHsKIAkJCQkJdHJ5X3RvX3dyaXRlYmFjayhvYmos
IHNocmluayk7CiAJCQkJCWNvdW50ICs9IG9iai0+YmFzZS5zaXplID4+IFBBR0VfU0hJRlQ7CiAJ
CQkJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3VzZXJw
dHIuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV91c2VycHRyLmMKaW5kZXgg
MWU0MmZiYzY4Njk3Li41MDMzMjVlNzRlZmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV91c2VycHRyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX3VzZXJwdHIuYwpAQCAtMjUzLDcgKzI1Myw3IEBAIHN0YXRpYyBpbnQgaTkxNV9n
ZW1fb2JqZWN0X3VzZXJwdHJfdW5iaW5kKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmos
IGJvb2wKIAlpZiAoR0VNX1dBUk5fT04oaTkxNV9nZW1fb2JqZWN0X2hhc19waW5uZWRfcGFnZXMo
b2JqKSkpCiAJCXJldHVybiAtRUJVU1k7CiAKLQltdXRleF9sb2NrX25lc3RlZCgmb2JqLT5tbS5s
b2NrLCBJOTE1X01NX0dFVF9QQUdFUyk7CisJbXV0ZXhfbG9jaygmb2JqLT5tbS5sb2NrKTsKIAog
CXBhZ2VzID0gX19pOTE1X2dlbV9vYmplY3RfdW5zZXRfcGFnZXMob2JqKTsKIAlpZiAoIUlTX0VS
Ul9PUl9OVUxMKHBhZ2VzKSkKLS0gCjIuMzEuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vZHJpLWRldmVsCg==
