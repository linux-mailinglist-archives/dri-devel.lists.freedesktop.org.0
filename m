Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5D4A5126B2D
	for <lists+dri-devel@lfdr.de>; Thu, 19 Dec 2019 19:55:16 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E0DDC6E3B7;
	Thu, 19 Dec 2019 18:55:12 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DCD2B6E0D4
 for <dri-devel@lists.freedesktop.org>; Thu, 19 Dec 2019 18:55:06 +0000 (UTC)
Received: from localhost (83-86-89-107.cable.dynamic.v4.ziggo.nl
 [83.86.89.107])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 4EC6024686;
 Thu, 19 Dec 2019 18:55:06 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=default; t=1576781706;
 bh=8lf+bvqxmeTkyo+Jri7kTp9DHiOIK0LeB435rMQ/SCM=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=Wb1RnXllbyM5VgeCu+ctzG02hLIzQdXxPg/TFVB/Qqsnj+Ei+XTP2CwPydHp/CX6h
 OfmoYbqKK+26EofVWBqeVjH4aVUFALCvBZZbhmwqvqzbwUd/08ErziIEM0UaD0y86y
 5Ou7LVIP2TyHwAr7j+35EWrE1rczQKn75EXU/c+4=
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: linux-kernel@vger.kernel.org
Subject: [PATCH 5.4 48/80] drm/mgag200: Add workaround for HW that does not
 support startadd
Date: Thu, 19 Dec 2019 19:34:40 +0100
Message-Id: <20191219183116.739455056@linuxfoundation.org>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20191219183031.278083125@linuxfoundation.org>
References: <20191219183031.278083125@linuxfoundation.org>
User-Agent: quilt/0.66
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: John Donnelly <john.p.donnelly@oracle.com>,
 Neil Armstrong <narmstrong@baylibre.com>, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel.vetter@ffwll.ch>, dri-devel@lists.freedesktop.org,
 stable@vger.kernel.org, Andrzej Pietrasiewicz <andrzej.p@collabora.com>,
 Gerd Hoffmann <kraxel@redhat.com>, Thomas Zimmermann <tzimmermann@suse.de>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>,
 Dave Airlie <airlied@redhat.com>, Thomas Gleixner <tglx@linutronix.de>,
 Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVGhvbWFzIFppbW1lcm1hbm4gPHR6aW1tZXJtYW5uQHN1c2UuZGU+Cgpjb21taXQgMTU5
MWZhZGY4NTdjZGJhZjJiYWE1NWU0MjFhZjk5YTYxMzU0NzEzYyB1cHN0cmVhbS4KClRoZXJlJ3Mg
YXQgbGVhc3Qgb25lIHN5c3RlbSB0aGF0IGRvZXMgbm90IGludGVycHJldCB0aGUgdmFsdWUgb2YK
dGhlIGRldmljZSdzICdzdGFydGFkZCcgZmllbGQgY29ycmVjdGx5LCB3aGljaCBsZWFkcyB0byBp
bmNvcnJlY3RseQpkaXNwbGF5ZWQgc2Nhbm91dCBidWZmZXJzLiBBbHdheXMgcGxhY2luZyB0aGUg
YWN0aXZlIHNjYW5vdXQgYnVmZmVyCmF0IG9mZnNldCAwIHdvcmtzIGFyb3VuZCB0aGUgcHJvYmxl
bS4KClNpZ25lZC1vZmYtYnk6IFRob21hcyBaaW1tZXJtYW5uIDx0emltbWVybWFubkBzdXNlLmRl
PgpSZXBvcnRlZC1ieTogSm9obiBEb25uZWxseSA8am9obi5wLmRvbm5lbGx5QG9yYWNsZS5jb20+
ClRlc3RlZC1ieTogSm9obiBEb25uZWxseSA8am9obi5wLmRvbm5lbGx5QG9yYWNsZS5jb20+ClJl
dmlld2VkLWJ5OiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgpGaXhlczog
ODFkYTg3ZjYzYTFlICgiZHJtOiBSZXBsYWNlIGRybV9nZW1fdnJhbV9wdXNoX3RvX3N5c3RlbSgp
IHdpdGgga3VubWFwICsgdW5waW4iKQpDYzogR2VyZCBIb2ZmbWFubiA8a3JheGVsQHJlZGhhdC5j
b20+CkNjOiBEYXZlIEFpcmxpZSA8YWlybGllZEByZWRoYXQuY29tPgpDYzogTWFhcnRlbiBMYW5r
aG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KQ2M6IE1heGltZSBSaXBh
cmQgPG1yaXBhcmRAa2VybmVsLm9yZz4KQ2M6IERhdmlkIEFpcmxpZSA8YWlybGllZEBsaW51eC5p
ZT4KQ2M6IFNhbSBSYXZuYm9yZyA8c2FtQHJhdm5ib3JnLm9yZz4KQ2M6ICJZLkMuIENoZW4iIDx5
Y19jaGVuQGFzcGVlZHRlY2guY29tPgpDYzogTmVpbCBBcm1zdHJvbmcgPG5hcm1zdHJvbmdAYmF5
bGlicmUuY29tPgpDYzogVGhvbWFzIEdsZWl4bmVyIDx0Z2x4QGxpbnV0cm9uaXguZGU+CkNjOiAi
Sm9zw6kgUm9iZXJ0byBkZSBTb3V6YSIgPGpvc2Uuc291emFAaW50ZWwuY29tPgpDYzogQW5kcnpl
aiBQaWV0cmFzaWV3aWN6IDxhbmRyemVqLnBAY29sbGFib3JhLmNvbT4KQ2M6IGRyaS1kZXZlbEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKQ2M6IDxzdGFibGVAdmdlci5rZXJuZWwub3JnPiAjIHY1LjMr
Ckxpbms6IGh0dHBzOi8vZ2l0bGFiLmZyZWVkZXNrdG9wLm9yZy9kcm0vbWlzYy9pc3N1ZXMvNwpM
aW5rOiBodHRwczovL3BhdGNod29yay5mcmVlZGVza3RvcC5vcmcvcGF0Y2gvbXNnaWQvMjAxOTEx
MjYxMDE1MjkuMjAzNTYtNC10emltbWVybWFubkBzdXNlLmRlCltkcm9wIGRlYnVnZnNfaW5pdCBj
YWxsYmFjayAtIGdyZWdraF0KU2lnbmVkLW9mZi1ieTogR3JlZyBLcm9haC1IYXJ0bWFuIDxncmVn
a2hAbGludXhmb3VuZGF0aW9uLm9yZz4KCi0tLQogZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdh
ZzIwMF9kcnYuYyB8ICAgMzUgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLQogZHJp
dmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9kcnYuaCB8ICAgIDMgKysKIDIgZmlsZXMgY2hh
bmdlZCwgMzcgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQoKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL21nYWcyMDAvbWdhZzIwMF9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9t
Z2FnMjAwX2Rydi5jCkBAIC0zMCw2ICszMCw4IEBAIG1vZHVsZV9wYXJhbV9uYW1lZChtb2Rlc2V0
LCBtZ2FnMjAwX21vZGUKIHN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBkcml2ZXI7CiAKIHN0YXRp
YyBjb25zdCBzdHJ1Y3QgcGNpX2RldmljZV9pZCBwY2lpZGxpc3RbXSA9IHsKKwl7IFBDSV9WRU5E
T1JfSURfTUFUUk9YLCAweDUyMiwgUENJX1ZFTkRPUl9JRF9TVU4sIDB4NDg1MiwgMCwgMCwKKwkJ
RzIwMF9TRV9BIHwgTUdBRzIwMF9GTEFHX0hXX0JVR19OT19TVEFSVEFERH0sCiAJeyBQQ0lfVkVO
RE9SX0lEX01BVFJPWCwgMHg1MjIsIFBDSV9BTllfSUQsIFBDSV9BTllfSUQsIDAsIDAsIEcyMDBf
U0VfQSB9LAogCXsgUENJX1ZFTkRPUl9JRF9NQVRST1gsIDB4NTI0LCBQQ0lfQU5ZX0lELCBQQ0lf
QU5ZX0lELCAwLCAwLCBHMjAwX1NFX0IgfSwKIAl7IFBDSV9WRU5ET1JfSURfTUFUUk9YLCAweDUz
MCwgUENJX0FOWV9JRCwgUENJX0FOWV9JRCwgMCwgMCwgRzIwMF9FViB9LApAQCAtNjMsNiArNjUs
MzUgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBmaWxlX29wZXJhdGlvbnMgbWdhZwogCURSTV9WUkFN
X01NX0ZJTEVfT1BFUkFUSU9OUwogfTsKIAorc3RhdGljIGJvb2wgbWdhZzIwMF9waW5fYm9fYXRf
MChjb25zdCBzdHJ1Y3QgbWdhX2RldmljZSAqbWRldikKK3sKKwlyZXR1cm4gbWRldi0+ZmxhZ3Mg
JiBNR0FHMjAwX0ZMQUdfSFdfQlVHX05PX1NUQVJUQUREOworfQorCitpbnQgbWdhZzIwMF9kcml2
ZXJfZHVtYl9jcmVhdGUoc3RydWN0IGRybV9maWxlICpmaWxlLAorCQkJICAgICAgIHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsCisJCQkgICAgICAgc3RydWN0IGRybV9tb2RlX2NyZWF0ZV9kdW1iICph
cmdzKQoreworCXN0cnVjdCBtZ2FfZGV2aWNlICptZGV2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwl1
bnNpZ25lZCBsb25nIHBnX2FsaWduOworCisJaWYgKFdBUk5fT05DRSghZGV2LT52cmFtX21tLCAi
VlJBTSBNTSBub3QgaW5pdGlhbGl6ZWQiKSkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlwZ19hbGln
biA9IDB1bDsKKworCS8qCisJICogQWxpZ25pbmcgc2Nhbm91dCBidWZmZXJzIHRvIHRoZSBzaXpl
IG9mIHRoZSB2aWRlbyByYW0gZm9yY2VzCisJICogcGxhY2VtZW50IGF0IG9mZnNldCAwLiBXb3Jr
cyBhcm91bmQgYSBidWcgd2hlcmUgSFcgZG9lcyBub3QKKwkgKiByZXNwZWN0ICdzdGFydGFkZCcg
ZmllbGQuCisJICovCisJaWYgKG1nYWcyMDBfcGluX2JvX2F0XzAobWRldikpCisJCXBnX2FsaWdu
ID0gUEZOX1VQKG1kZXYtPm1jLnZyYW1fc2l6ZSk7CisKKwlyZXR1cm4gZHJtX2dlbV92cmFtX2Zp
bGxfY3JlYXRlX2R1bWIoZmlsZSwgZGV2LCAmZGV2LT52cmFtX21tLT5iZGV2LAorCQkJCQkgICAg
IHBnX2FsaWduLCBmYWxzZSwgYXJncyk7Cit9CisKIHN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBk
cml2ZXIgPSB7CiAJLmRyaXZlcl9mZWF0dXJlcyA9IERSSVZFUl9HRU0gfCBEUklWRVJfTU9ERVNF
VCwKIAkubG9hZCA9IG1nYWcyMDBfZHJpdmVyX2xvYWQsCkBAIC03NCw3ICsxMDUsOSBAQCBzdGF0
aWMgc3RydWN0IGRybV9kcml2ZXIgZHJpdmVyID0gewogCS5tYWpvciA9IERSSVZFUl9NQUpPUiwK
IAkubWlub3IgPSBEUklWRVJfTUlOT1IsCiAJLnBhdGNobGV2ZWwgPSBEUklWRVJfUEFUQ0hMRVZF
TCwKLQlEUk1fR0VNX1ZSQU1fRFJJVkVSCisJLmR1bWJfY3JlYXRlID0gbWdhZzIwMF9kcml2ZXJf
ZHVtYl9jcmVhdGUsCisJLmR1bWJfbWFwX29mZnNldCA9IGRybV9nZW1fdnJhbV9kcml2ZXJfZHVt
Yl9tbWFwX29mZnNldCwKKwkuZ2VtX3ByaW1lX21tYXAgPSBkcm1fZ2VtX3ByaW1lX21tYXAsCiB9
OwogCiBzdGF0aWMgc3RydWN0IHBjaV9kcml2ZXIgbWdhZzIwMF9wY2lfZHJpdmVyID0gewotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX2Rydi5oCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9tZ2FnMjAwL21nYWcyMDBfZHJ2LmgKQEAgLTE1OSw2ICsxNTksOSBAQCBlbnVtIG1nYV90
eXBlIHsKIAlHMjAwX0VXMywKIH07CiAKKy8qIEhXIGRvZXMgbm90IGhhbmRsZSAnc3RhcnRhZGQn
IGZpZWxkIGNvcnJlY3QuICovCisjZGVmaW5lIE1HQUcyMDBfRkxBR19IV19CVUdfTk9fU1RBUlRB
REQJKDF1bCA8PCA4KQorCiAjZGVmaW5lIE1HQUcyMDBfVFlQRV9NQVNLCSgweDAwMDAwMGZmKQog
I2RlZmluZSBNR0FHMjAwX0ZMQUdfTUFTSwkoMHgwMGZmZmYwMCkKIAoKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QK
ZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
