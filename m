Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 928BB2FE51F
	for <lists+dri-devel@lfdr.de>; Thu, 21 Jan 2021 09:36:35 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 966166E51C;
	Thu, 21 Jan 2021 08:36:32 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qt1-x849.google.com (mail-qt1-x849.google.com
 [IPv6:2607:f8b0:4864:20::849])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 98D016E03F
 for <dri-devel@lists.freedesktop.org>; Tue, 19 Jan 2021 22:58:21 +0000 (UTC)
Received: by mail-qt1-x849.google.com with SMTP id g9so19578080qtv.12
 for <dri-devel@lists.freedesktop.org>; Tue, 19 Jan 2021 14:58:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=20161025;
 h=sender:date:message-id:mime-version:subject:from:to:cc
 :content-transfer-encoding;
 bh=yrXaIQXHnYH3qF5gar4kGaRtTVizORgRPDAaNdhFcLo=;
 b=tFIm91quWsgelzGLwBWnzcLhzed7Bq+zQBZTkpJx+KBNHt/xWch/Fd2cWm+0VZD/lF
 0LjAhNAD/8Zeo8QBUnbbFvYykGM8Dfcq7c20lZNbs8vw1a1V4yZSF4nosKB7UqWBQKcf
 ODFj2QvMj05aee8Tn0uTgqj3YPEVnVZnSDnw0SVrGGkylQR4Jjpc8sd+MCgynfPnuTF8
 zQ0tvUBo6K0d5b1lRTyBF9rGR40uYCprzvuZG6TKlFbnJNAbvFrlntz2Kax+ZHuv9VTd
 W8pmy+cLXQhMkPL7BCSOcWNSXZvIyyBJBLTJoPY/0erxL8+vhGrFgLwqm9xAIN1KMIjT
 eHEA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:date:message-id:mime-version:subject:from
 :to:cc:content-transfer-encoding;
 bh=yrXaIQXHnYH3qF5gar4kGaRtTVizORgRPDAaNdhFcLo=;
 b=Bnc5xNkUcni3JKZbxLjiaf0iUfo9N8rvHNL7GzXwzvPBJiSud9WIylTYly2QdHjXcA
 PDOMm0DSlmSGDoAvkeerUs3ftmWtMU2kujd8NThF7b/fsf7jwm6cKpv1Kb2J2vKXcd79
 Q66a9jaiXsxsmUIDGPwKdaNMQDx+LXCk4vmIxZpLMjmq29YDQzI6MqZ8PPWmHQ1DJH2J
 GRBGBgjuCgDRJOo4J1FpWbtJ7m2rmgK1Xt/viKRDqWaGtE+puSPGP8sHQ6xIeUNQzZOS
 UqcsN22DxF/4fYyaGFPaldB+GFFErbfQ6AToCQEgRLKCK9rPCdhrprVqmzXpcZcV8WES
 /XMA==
X-Gm-Message-State: AOAM532qX7e2cHxXBSLWhWVPlMyhFs/5MabzacwWNRMkeNu1WXHbPxr3
 OG6w7pN+1NYzWIE8DJH05jB32OmToXM=
X-Google-Smtp-Source: ABdhPJwHDIn15Y1eAFWalL3mcVoB6LAXCivQ/Ry6pPxmRptkEo8raGkrmBwF1BMc8symo/vZHpFeVKZ2fm4=
X-Received: from hridya.mtv.corp.google.com
 ([2620:15c:211:200:7220:84ff:fe09:5ea6])
 (user=hridya job=sendgmr) by 2002:a05:6214:3ef:: with SMTP id
 cf15mr6794324qvb.54.1611097100611; Tue, 19 Jan 2021 14:58:20 -0800 (PST)
Date: Tue, 19 Jan 2021 14:57:19 -0800
Message-Id: <20210119225723.388883-1-hridya@google.com>
Mime-Version: 1.0
X-Mailer: git-send-email 2.30.0.284.gd98b1dd5eaa7-goog
Subject: [PATCH v2] dmabuf: Add the capability to expose DMA-BUF stats in sysfs
From: Hridya Valsaraju <hridya@google.com>
To: Sumit Semwal <sumit.semwal@linaro.org>, 
 "=?UTF-8?q?Christian=20K=C3=B6nig?=" <christian.koenig@amd.com>,
 Hridya Valsaraju <hridya@google.com>, 
 linux-kernel@vger.kernel.org, linux-media@vger.kernel.org, 
 dri-devel@lists.freedesktop.org, linaro-mm-sig@lists.linaro.org
X-Mailman-Approved-At: Thu, 21 Jan 2021 08:36:20 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: gregkh@linuxfoundation.org, kernel-team@android.com, surenb@google.com,
 hyesoo.yu@samsung.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBhbGxvd3Mgc3RhdGlzdGljcyB0byBiZSBlbmFibGVkIGZvciBlYWNoIERNQS1C
VUYgaW4Kc3lzZnMgYnkgZW5hYmxpbmcgdGhlIGNvbmZpZyBDT05GSUdfRE1BQlVGX1NZU0ZTX1NU
QVRTLgoKVGhlIGZvbGxvd2luZyBzdGF0cyB3aWxsIGJlIGV4cG9zZWQgYnkgdGhlIGludGVyZmFj
ZToKCi9zeXMva2VybmVsL2RtYWJ1Zi9idWZmZXJzLzxpbm9kZV9udW1iZXI+L2V4cG9ydGVyX25h
bWUKL3N5cy9rZXJuZWwvZG1hYnVmL2J1ZmZlcnMvPGlub2RlX251bWJlcj4vc2l6ZQovc3lzL2tl
cm5lbC9kbWFidWYvYnVmZmVycy88aW5vZGVfbnVtYmVyPi9hdHRhY2htZW50cy88YXR0YWNoX3Vp
ZD4vZGV2aWNlCi9zeXMva2VybmVsL2RtYWJ1Zi9idWZmZXJzLzxpbm9kZV9udW1iZXI+L2F0dGFj
aG1lbnRzLzxhdHRhY2hfdWlkPi9tYXBfY291bnRlcgoKVGhlIGlub2RlX251bWJlciBpcyB1bmlx
dWUgZm9yIGVhY2ggRE1BLUJVRiBhbmQgd2FzIGFkZGVkIGVhcmxpZXIgWzFdCmluIG9yZGVyIHRv
IGFsbG93IHVzZXJzcGFjZSB0byB0cmFjayBETUEtQlVGIHVzYWdlIGFjcm9zcyBkaWZmZXJlbnQK
cHJvY2Vzc2VzLgoKQ3VycmVudGx5LCB0aGlzIGluZm9ybWF0aW9uIGlzIGV4cG9zZWQgaW4KL3N5
cy9rZXJuZWwvZGVidWcvZG1hX2J1Zi9idWZpbmZvLgpIb3dldmVyLCBzaW5jZSBkZWJ1Z2ZzIGlz
IGNvbnNpZGVyZWQgdW5zYWZlIHRvIGJlIG1vdW50ZWQgaW4gcHJvZHVjdGlvbiwKaXQgaXMgYmVp
bmcgZHVwbGljYXRlZCBpbiBzeXNmcy4KClRoaXMgaW5mb3JtYXRpb24gd2lsbCBiZSB1c2VkIHRv
IGRlcml2ZSBETUEtQlVGCnBlci1leHBvcnRlciBzdGF0cyBhbmQgcGVyLWRldmljZSB1c2FnZSBz
dGF0cyBmb3IgQW5kcm9pZCBCdWcgcmVwb3J0cy4KVGhlIGNvcnJlc3BvbmRpbmcgdXNlcnNwYWNl
IGNoYW5nZXMgY2FuIGJlIGZvdW5kIGF0IFsyXS4KVGVsZW1ldHJ5IHRvb2xzIHdpbGwgYWxzbyBj
YXB0dXJlIHRoaXMgaW5mb3JtYXRpb24oYWxvbmcgd2l0aCBvdGhlcgptZW1vcnkgbWV0cmljcykg
cGVyaW9kaWNhbGx5IGFzIHdlbGwgYXMgb24gaW1wb3J0YW50IGV2ZW50cyBsaWtlIGEKZm9yZWdy
b3VuZCBhcHAga2lsbCAod2hpY2ggbWlnaHQgaGF2ZSBiZWVuIHRyaWdnZXJlZCBieSBMb3cgTWVt
b3J5CktpbGxlcikuIEl0IHdpbGwgYWxzbyBjb250cmlidXRlIHRvIHByb3ZpZGUgYSBzbmFwc2hv
dCBvZiB0aGUgc3lzdGVtCm1lbW9yeSB1c2FnZSBvbiBvdGhlciBldmVudHMgc3VjaCBhcyBPT00g
a2lsbHMgYW5kIEFwcGxpY2F0aW9uIE5vdApSZXNwb25kaW5nIGV2ZW50cy4KCkEgc2hlbGwgc2Ny
aXB0IHRoYXQgY2FuIGJlIHJ1biBvbiBhIGNsYXNzaWMgTGludXggZW52aXJvbm1lbnQgdG8gcmVh
ZApvdXQgdGhlIERNQS1CVUYgc3RhdGlzdGljcyBjYW4gYmUgZm91bmQgYXQgWzNdKHN1Z2dlc3Rl
ZCBieSBKb2huClN0dWx0eikuCgpUaGUgcGF0Y2ggY29udGFpbnMgdGhlIGZvbGxvd2luZyBpbXBy
b3ZlbWVudHMgb3ZlciB0aGUgcHJldmlvdXMgdmVyc2lvbjoKMSkgRWFjaCBhdHRhY2htZW50IGlz
IHJlcHJlc2VudGVkIGJ5IGl0cyBvd24gZGlyZWN0b3J5IHRvIGFsbG93IGNyZWF0aW5nCmEgc3lt
bGluayB0byB0aGUgaW1wb3J0aW5nIGRldmljZSBhbmQgdG8gYWxzbyBwcm92aWRlIHJvb20gZm9y
IGZ1dHVyZQpleHBhbnNpb24uCjIpIFRoZSBudW1iZXIgb2YgZGlzdGluY3QgbWFwcGluZ3Mgb2Yg
ZWFjaCBhdHRhY2htZW50IGlzIGV4cG9zZWQgaW4gYQpzZXBhcmF0ZSBmaWxlLgozKSBUaGUgcGVy
LWJ1ZmZlciBzdGF0aXN0aWNzIGFyZSBub3cgaW4gL3N5cy9rZXJuZWwvZG1hYnVmL2J1ZmZlcnMK
aW5vcmRlciB0byBtYWtlIHRoZSBpbnRlcmZhY2UgZXhwYW5kYWJsZSBpbiBmdXR1cmUuCgpBbGwg
b2YgdGhlIGltcHJvdmVtZW50cyBhYm92ZSBhcmUgYmFzZWQgb24gc3VnZ2VzdGlvbnMvZmVlZGJh
Y2sgZnJvbQpEYW5pZWwgVmV0dGVyIGFuZCBDaHJpc3RpYW4gS8O2bmlnLgoKWzFdOiBodHRwczov
L2xvcmUua2VybmVsLm9yZy9wYXRjaHdvcmsvcGF0Y2gvMTA4ODc5MS8KWzJdOiBodHRwczovL2Fu
ZHJvaWQtcmV2aWV3Lmdvb2dsZXNvdXJjZS5jb20vcS90b3BpYzolMjJkbWFidWYtc3lzZnMlMjIr
KHN0YXR1czpvcGVuJTIwT1IlMjBzdGF0dXM6bWVyZ2VkKQpbM106IGh0dHBzOi8vYW5kcm9pZC1y
ZXZpZXcuZ29vZ2xlc291cmNlLmNvbS9jL3BsYXRmb3JtL3N5c3RlbS9tZW1vcnkvbGlibWVtaW5m
by8rLzE1NDk3MzQKClNpZ25lZC1vZmYtYnk6IEhyaWR5YSBWYWxzYXJhanUgPGhyaWR5YUBnb29n
bGUuY29tPgotLS0KQ2hhbmdlcyBpbiB2MjoKLU1vdmUgc3RhdGlzdGljcyB0byAvc3lzL2tlcm5l
bC9kbWFidWYvYnVmZmVycyBpbiBvZGVyIHRvIGFsbG93IGFkZGl0aW9uCm9mIG90aGVyIERNQS1C
VUYtcmVsYXRlZCBzeXNmcyBzdGF0cyBpbiBmdXR1cmUuIEJhc2VkIG9uIGZlZWRiYWNrIGZyb20K
RGFuaWVsIFZldHRlci4KLUVhY2ggYXR0YWNobWVudCBoYXMgaXRzIG93biBkaXJlY3RvcnkgdG8g
cmVwcmVzZW50IGF0dGFjaGluZyBkZXZpY2VzIGFzCnN5bWxpbmtzIGFuZCB0byBpbnRyb2R1Y2Ug
bWFwX2NvdW50IGFzIGEgc2VwYXJhdGUgZmlsZS4gQmFzZWQgb24KZmVlZGJhY2sgZnJvbSBEYW5p
ZWwgVmV0dGVyIGFuZCBDaHJpc3RpYW4gS8O2bmlnLiBUaGFuayB5b3UgYm90aCEKLUNvbW1pdCBt
ZXNzYWdlcyB1cGRhdGVkIHRvIHBvaW50IHRvIHVzZXJzcGFjZSBjb2RlIGluIEFPU1AgdGhhdCB3
aWxsCnJlYWQgdGhlIERNQS1CVUYgc3lzZnMgc3RhdHMuCgogLi4uL0FCSS90ZXN0aW5nL3N5c2Zz
LWtlcm5lbC1kbWFidWYtYnVmZmVycyAgIHwgIDUyICsrKysKIGRyaXZlcnMvZG1hLWJ1Zi9LY29u
ZmlnICAgICAgICAgICAgICAgICAgICAgICB8ICAxMSArCiBkcml2ZXJzL2RtYS1idWYvTWFrZWZp
bGUgICAgICAgICAgICAgICAgICAgICAgfCAgIDEgKwogZHJpdmVycy9kbWEtYnVmL2RtYS1idWYt
c3lzZnMtc3RhdHMuYyAgICAgICAgIHwgMjgzICsrKysrKysrKysrKysrKysrKwogZHJpdmVycy9k
bWEtYnVmL2RtYS1idWYtc3lzZnMtc3RhdHMuaCAgICAgICAgIHwgIDYyICsrKysKIGRyaXZlcnMv
ZG1hLWJ1Zi9kbWEtYnVmLmMgICAgICAgICAgICAgICAgICAgICB8ICAzNyArKysKIGluY2x1ZGUv
bGludXgvZG1hLWJ1Zi5oICAgICAgICAgICAgICAgICAgICAgICB8ICAyMCArKwogNyBmaWxlcyBj
aGFuZ2VkLCA0NjYgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IERvY3VtZW50YXRp
b24vQUJJL3Rlc3Rpbmcvc3lzZnMta2VybmVsLWRtYWJ1Zi1idWZmZXJzCiBjcmVhdGUgbW9kZSAx
MDA2NDQgZHJpdmVycy9kbWEtYnVmL2RtYS1idWYtc3lzZnMtc3RhdHMuYwogY3JlYXRlIG1vZGUg
MTAwNjQ0IGRyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLXN5c2ZzLXN0YXRzLmgKCmRpZmYgLS1naXQg
YS9Eb2N1bWVudGF0aW9uL0FCSS90ZXN0aW5nL3N5c2ZzLWtlcm5lbC1kbWFidWYtYnVmZmVycyBi
L0RvY3VtZW50YXRpb24vQUJJL3Rlc3Rpbmcvc3lzZnMta2VybmVsLWRtYWJ1Zi1idWZmZXJzCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uNmY3YzY1MjA5ZjA3Ci0tLSAv
ZGV2L251bGwKKysrIGIvRG9jdW1lbnRhdGlvbi9BQkkvdGVzdGluZy9zeXNmcy1rZXJuZWwtZG1h
YnVmLWJ1ZmZlcnMKQEAgLTAsMCArMSw1MiBAQAorV2hhdDoJCS9zeXMva2VybmVsL2RtYWJ1Zi9i
dWZmZXJzCitEYXRlOgkJSmFudWFyeSAyMDIxCitLZXJuZWxWZXJzaW9uOgl2NS4xMgorQ29udGFj
dDoJSHJpZHlhIFZhbHNhcmFqdSA8aHJpZHlhQGdvb2dsZS5jb20+CitEZXNjcmlwdGlvbjoJVGhl
IC9zeXMva2VybmVsL2RtYWJ1Zi9idWZmZXJzIGRpcmVjdG9yeSBjb250YWlucyBhCisJCXNuYXBz
aG90IG9mIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBldmVyeSBETUEtQlVGLgorCQkvc3lzL2tlcm5l
bC9kbWFidWYvYnVmZmVycy88aW5vZGVfbnVtYmVyPiB3aWxsIGNvbnRhaW4gdGhlCisJCXN0YXRp
c3RpY3MgZm9yIHRoZSBETUEtQlVGIHdpdGggdGhlIHVuaXF1ZSBpbm9kZSBudW1iZXIKKwkJPGlu
b2RlX251bWJlcj4KK1VzZXJzOgkJa2VybmVsIG1lbW9yeSB0dW5pbmcvZGVidWdnaW5nIHRvb2xz
CisKK1doYXQ6CQkvc3lzL2tlcm5lbC9kbWFidWYvYnVmZmVycy88aW5vZGVfbnVtYmVyPi9leHBv
cnRlcl9uYW1lCitEYXRlOgkJSmFudWFyeSAyMDIxCitLZXJuZWxWZXJzaW9uOgl2NS4xMgorQ29u
dGFjdDoJSHJpZHlhIFZhbHNhcmFqdSA8aHJpZHlhQGdvb2dsZS5jb20+CitEZXNjcmlwdGlvbjoJ
VGhpcyBmaWxlIGlzIHJlYWQtb25seSBhbmQgY29udGFpbnMgdGhlIG5hbWUgb2YgdGhlIGV4cG9y
dGVyIG9mCisJCXRoZSBETUEtQlVGLgorCitXaGF0OgkJL3N5cy9rZXJuZWwvZG1hYnVmL2J1ZmZl
cnMvPGlub2RlX251bWJlcj4vc2l6ZQorRGF0ZToJCUphbnVhcnkgMjAyMQorS2VybmVsVmVyc2lv
bjoJdjUuMTIKK0NvbnRhY3Q6CUhyaWR5YSBWYWxzYXJhanUgPGhyaWR5YUBnb29nbGUuY29tPgor
RGVzY3JpcHRpb246CVRoaXMgZmlsZSBpcyByZWFkLW9ubHkgYW5kIHNwZWNpZmllcyB0aGUgc2l6
ZSBvZiB0aGUgRE1BLUJVRiBpbgorCQlieXRlcy4KKworV2hhdDoJCS9zeXMva2VybmVsL2RtYWJ1
Zi9idWZmZXJzLzxpbm9kZV9udW1iZXI+L2F0dGFjaG1lbnRzCitEYXRlOgkJSmFudWFyeSAyMDIx
CitLZXJuZWxWZXJzaW9uOgl2NS4xMgorQ29udGFjdDoJSHJpZHlhIFZhbHNhcmFqdSA8aHJpZHlh
QGdvb2dsZS5jb20+CitEZXNjcmlwdGlvbjoJVGhpcyBkaXJlY3Rvcnkgd2lsbCBjb250YWluIHN1
YmRpcmVjdG9yaWVzIHJlcHJlc2VudGluZyBldmVyeQorCQlhdHRhY2htZW50IG9mIHRoZSBETUEt
QlVGLgorCitXaGF0OgkJL3N5cy9rZXJuZWwvZG1hYnVmL2J1ZmZlcnMvPGlub2RlX251bWJlcj4v
YXR0YWNobWVudHMvPGF0dGFjaG1lbnRfdWlkPgorRGF0ZToJCUphbnVhcnkgMjAyMQorS2VybmVs
VmVyc2lvbjoJdjUuMTIKK0NvbnRhY3Q6CUhyaWR5YSBWYWxzYXJhanUgPGhyaWR5YUBnb29nbGUu
Y29tPgorRGVzY3JpcHRpb246CVRoaXMgZGlyZWN0b3J5IHdpbGwgY29udGFpbiBpbmZvcm1hdGlv
biBvbiB0aGUgYXR0YWNoaW5nIGRldmljZQorCQlhbmQgdGhlIG51bWJlciBvZiBjdXJyZW50IGRp
c3RpbmN0IGRldmljZSBtYXBwaW5ncy4KKworV2hhdDoJCS9zeXMva2VybmVsL2RtYWJ1Zi9idWZm
ZXJzLzxpbm9kZV9udW1iZXI+L2F0dGFjaG1lbnRzLzxhdHRhY2htZW50X3VpZD4vZGV2aWNlCitE
YXRlOgkJSmFudWFyeSAyMDIxCitLZXJuZWxWZXJzaW9uOgl2NS4xMgorQ29udGFjdDoJSHJpZHlh
IFZhbHNhcmFqdSA8aHJpZHlhQGdvb2dsZS5jb20+CitEZXNjcmlwdGlvbjoJVGhpcyBmaWxlIGlz
IHJlYWQtb25seSBhbmQgaXMgYSBzeW1saW5rIHRvIHRoZSBhdHRhY2hpbmcgZGV2aWNlcydzCisJ
CXN5c2ZzIGVudHJ5LgorCitXaGF0OgkJL3N5cy9rZXJuZWwvZG1hYnVmL2J1ZmZlcnMvPGlub2Rl
X251bWJlcj4vYXR0YWNobWVudHMvPGF0dGFjaG1lbnRfdWlkPi9tYXBfY291bnRlcgorRGF0ZToJ
CUphbnVhcnkgMjAyMQorS2VybmVsVmVyc2lvbjoJdjUuMTIKK0NvbnRhY3Q6CUhyaWR5YSBWYWxz
YXJhanUgPGhyaWR5YUBnb29nbGUuY29tPgorRGVzY3JpcHRpb246CVRoaXMgZmlsZSBpcyByZWFk
LW9ubHkgYW5kIGNvbnRhaW5zIGEgbWFwX2NvdW50ZXIgaW5kaWNhdGluZyB0aGUKKwkJbnVtYmVy
IG9mIGRpc3RpbmN0IGRldmljZSBtYXBwaW5ncyBvZiB0aGUgYXR0YWNobWVudC4KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZG1hLWJ1Zi9LY29uZmlnIGIvZHJpdmVycy9kbWEtYnVmL0tjb25maWcKaW5k
ZXggNGY4MjI0YTZhYzk1Li4yN2U2YTJkYWZlYWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZG1hLWJ1
Zi9LY29uZmlnCisrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9LY29uZmlnCkBAIC02NCw2ICs2NCwxNyBA
QCBtZW51Y29uZmlnIERNQUJVRl9IRUFQUwogCSAgYWxsb3dzIHVzZXJzcGFjZSB0byBhbGxvY2F0
ZSBkbWEtYnVmcyB0aGF0IGNhbiBiZSBzaGFyZWQKIAkgIGJldHdlZW4gZHJpdmVycy4KIAorbWVu
dWNvbmZpZyBETUFCVUZfU1lTRlNfU1RBVFMKKwlib29sICJETUEtQlVGIHN5c2ZzIHN0YXRpc3Rp
Y3MiCisJc2VsZWN0IERNQV9TSEFSRURfQlVGRkVSCisJaGVscAorCSAgIENob29zZSB0aGlzIG9w
dGlvbiB0byBlbmFibGUgRE1BLUJVRiBzeXNmcyBzdGF0aXN0aWNzCisJICAgaW4gbG9jYXRpb24g
L3N5cy9rZXJuZWwvZG1hYnVmL2J1ZmZlcnMuCisKKwkgICAvc3lzL2tlcm5lbC9kbWFidWYvYnVm
ZmVycy88aW5vZGVfbnVtYmVyPiB3aWxsIGNvbnRhaW4KKwkgICBzdGF0aXN0aWNzIGZvciB0aGUg
RE1BLUJVRiB3aXRoIHRoZSB1bmlxdWUgaW5vZGUgbnVtYmVyCisJICAgPGlub2RlX251bWJlcj4u
CisKIHNvdXJjZSAiZHJpdmVycy9kbWEtYnVmL2hlYXBzL0tjb25maWciCiAKIGVuZG1lbnUKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9NYWtlZmlsZSBiL2RyaXZlcnMvZG1hLWJ1Zi9NYWtl
ZmlsZQppbmRleCA5OTVlMDVmNjA5ZmYuLjQwZDgxZjIzY2FjZiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9kbWEtYnVmL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9NYWtlZmlsZQpAQCAtNiw2
ICs2LDcgQEAgb2JqLSQoQ09ORklHX0RNQUJVRl9IRUFQUykJKz0gaGVhcHMvCiBvYmotJChDT05G
SUdfU1lOQ19GSUxFKQkJKz0gc3luY19maWxlLm8KIG9iai0kKENPTkZJR19TV19TWU5DKQkJKz0g
c3dfc3luYy5vIHN5bmNfZGVidWcubwogb2JqLSQoQ09ORklHX1VETUFCVUYpCQkrPSB1ZG1hYnVm
Lm8KK29iai0kKENPTkZJR19ETUFCVUZfU1lTRlNfU1RBVFMpICs9IGRtYS1idWYtc3lzZnMtc3Rh
dHMubwogCiBkbWFidWZfc2VsZnRlc3RzLXkgOj0gXAogCXNlbGZ0ZXN0Lm8gXApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYtc3lzZnMtc3RhdHMuYyBiL2RyaXZlcnMvZG1hLWJ1
Zi9kbWEtYnVmLXN5c2ZzLXN0YXRzLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MDAwMDAwLi42MWY4NWMzZDE2YTUKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2RtYS1idWYv
ZG1hLWJ1Zi1zeXNmcy1zdGF0cy5jCkBAIC0wLDAgKzEsMjgzIEBACisvLyBTUERYLUxpY2Vuc2Ut
SWRlbnRpZmllcjogR1BMLTIuMC1vbmx5CisvKgorICogRE1BLUJVRiBzeXNmcyBzdGF0aXN0aWNz
LgorICoKKyAqIENvcHlyaWdodCAoQykgMjAyMSBHb29nbGUgTExDLgorICovCisKKyNpbmNsdWRl
IDxsaW51eC9kbWEtYnVmLmg+CisjaW5jbHVkZSA8bGludXgvZG1hLXJlc3YuaD4KKyNpbmNsdWRl
IDxsaW51eC9rb2JqZWN0Lmg+CisjaW5jbHVkZSA8bGludXgvcHJpbnRrLmg+CisjaW5jbHVkZSA8
bGludXgvc2xhYi5oPgorI2luY2x1ZGUgPGxpbnV4L3N5c2ZzLmg+CisKKyNkZWZpbmUgdG9fZG1h
X2J1Zl9lbnRyeV9mcm9tX2tvYmooeCkgY29udGFpbmVyX29mKHgsIHN0cnVjdCBkbWFfYnVmX3N5
c2ZzX2VudHJ5LCBrb2JqKQorCitzdHJ1Y3QgZG1hX2J1Zl9zdGF0c19hdHRyaWJ1dGUgeworCXN0
cnVjdCBhdHRyaWJ1dGUgYXR0cjsKKwlzc2l6ZV90ICgqc2hvdykoc3RydWN0IGRtYV9idWYgKmRt
YWJ1ZiwKKwkJCXN0cnVjdCBkbWFfYnVmX3N0YXRzX2F0dHJpYnV0ZSAqYXR0ciwgY2hhciAqYnVm
KTsKK307CisjZGVmaW5lIHRvX2RtYV9idWZfc3RhdHNfYXR0cih4KSBjb250YWluZXJfb2YoeCwg
c3RydWN0IGRtYV9idWZfc3RhdHNfYXR0cmlidXRlLCBhdHRyKQorCitzdGF0aWMgc3NpemVfdCBk
bWFfYnVmX3N0YXRzX2F0dHJpYnV0ZV9zaG93KHN0cnVjdCBrb2JqZWN0ICprb2JqLAorCQkJCQkg
ICAgc3RydWN0IGF0dHJpYnV0ZSAqYXR0ciwKKwkJCQkJICAgIGNoYXIgKmJ1ZikKK3sKKwlzdHJ1
Y3QgZG1hX2J1Zl9zdGF0c19hdHRyaWJ1dGUgKmF0dHJpYnV0ZTsKKwlzdHJ1Y3QgZG1hX2J1Zl9z
eXNmc19lbnRyeSAqc3lzZnNfZW50cnk7CisJc3RydWN0IGRtYV9idWYgKmRtYWJ1ZjsKKworCWF0
dHJpYnV0ZSA9IHRvX2RtYV9idWZfc3RhdHNfYXR0cihhdHRyKTsKKwlzeXNmc19lbnRyeSA9IHRv
X2RtYV9idWZfZW50cnlfZnJvbV9rb2JqKGtvYmopOworCWRtYWJ1ZiA9IHN5c2ZzX2VudHJ5LT5k
bWFidWY7CisKKwlpZiAoIWRtYWJ1ZiB8fCAhYXR0cmlidXRlLT5zaG93KQorCQlyZXR1cm4gLUVJ
TzsKKworCXJldHVybiBhdHRyaWJ1dGUtPnNob3coZG1hYnVmLCBhdHRyaWJ1dGUsIGJ1Zik7Cit9
CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgc3lzZnNfb3BzIGRtYV9idWZfc3RhdHNfc3lzZnNfb3Bz
ID0geworCS5zaG93ID0gZG1hX2J1Zl9zdGF0c19hdHRyaWJ1dGVfc2hvdywKK307CisKK3N0YXRp
YyBzc2l6ZV90IGV4cG9ydGVyX25hbWVfc2hvdyhzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLAorCQkJ
CSAgc3RydWN0IGRtYV9idWZfc3RhdHNfYXR0cmlidXRlICphdHRyLAorCQkJCSAgY2hhciAqYnVm
KQoreworCXJldHVybiBzeXNmc19lbWl0KGJ1ZiwgIiVzXG4iLCBkbWFidWYtPmV4cF9uYW1lKTsK
K30KKworc3RhdGljIHNzaXplX3Qgc2l6ZV9zaG93KHN0cnVjdCBkbWFfYnVmICpkbWFidWYsCisJ
CQkgc3RydWN0IGRtYV9idWZfc3RhdHNfYXR0cmlidXRlICphdHRyLAorCQkJIGNoYXIgKmJ1ZikK
K3sKKwlyZXR1cm4gc3lzZnNfZW1pdChidWYsICIlenVcbiIsIGRtYWJ1Zi0+c2l6ZSk7Cit9CisK
K3N0YXRpYyBzdHJ1Y3QgZG1hX2J1Zl9zdGF0c19hdHRyaWJ1dGUgZXhwb3J0ZXJfbmFtZV9hdHRy
aWJ1dGUgPQorCV9fQVRUUl9STyhleHBvcnRlcl9uYW1lKTsKK3N0YXRpYyBzdHJ1Y3QgZG1hX2J1
Zl9zdGF0c19hdHRyaWJ1dGUgc2l6ZV9hdHRyaWJ1dGUgPSBfX0FUVFJfUk8oc2l6ZSk7CisKK3N0
YXRpYyBzdHJ1Y3QgYXR0cmlidXRlICpkbWFfYnVmX3N0YXRzX2RlZmF1bHRfYXR0cnNbXSA9IHsK
KwkmZXhwb3J0ZXJfbmFtZV9hdHRyaWJ1dGUuYXR0ciwKKwkmc2l6ZV9hdHRyaWJ1dGUuYXR0ciwK
KwlOVUxMLAorfTsKK0FUVFJJQlVURV9HUk9VUFMoZG1hX2J1Zl9zdGF0c19kZWZhdWx0KTsKKwor
c3RhdGljIHZvaWQgZG1hX2J1Zl9zeXNmc19yZWxlYXNlKHN0cnVjdCBrb2JqZWN0ICprb2JqKQor
eworCXN0cnVjdCBkbWFfYnVmX3N5c2ZzX2VudHJ5ICpzeXNmc19lbnRyeTsKKworCXN5c2ZzX2Vu
dHJ5ID0gdG9fZG1hX2J1Zl9lbnRyeV9mcm9tX2tvYmooa29iaik7CisJa2ZyZWUoc3lzZnNfZW50
cnkpOworfQorCitzdGF0aWMgc3RydWN0IGtvYmpfdHlwZSBkbWFfYnVmX2t0eXBlID0geworCS5z
eXNmc19vcHMgPSAmZG1hX2J1Zl9zdGF0c19zeXNmc19vcHMsCisJLnJlbGVhc2UgPSBkbWFfYnVm
X3N5c2ZzX3JlbGVhc2UsCisJLmRlZmF1bHRfZ3JvdXBzID0gZG1hX2J1Zl9zdGF0c19kZWZhdWx0
X2dyb3VwcywKK307CisKKyNkZWZpbmUgdG9fZG1hX2J1Zl9hdHRhY2hfZW50cnlfZnJvbV9rb2Jq
KHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2hfc3lzZnNfZW50cnksIGtv
YmopCisKK3N0cnVjdCBkbWFfYnVmX2F0dGFjaF9zdGF0c19hdHRyaWJ1dGUgeworCXN0cnVjdCBh
dHRyaWJ1dGUgYXR0cjsKKwlzc2l6ZV90ICgqc2hvdykoc3RydWN0IGRtYV9idWZfYXR0YWNoX3N5
c2ZzX2VudHJ5ICpzeXNmc19lbnRyeSwKKwkJCXN0cnVjdCBkbWFfYnVmX2F0dGFjaF9zdGF0c19h
dHRyaWJ1dGUgKmF0dHIsIGNoYXIgKmJ1Zik7Cit9OworI2RlZmluZSB0b19kbWFfYnVmX2F0dGFj
aF9zdGF0c19hdHRyKHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2hfc3Rh
dHNfYXR0cmlidXRlLCBhdHRyKQorCitzdGF0aWMgc3NpemVfdCBkbWFfYnVmX2F0dGFjaF9zdGF0
c19hdHRyaWJ1dGVfc2hvdyhzdHJ1Y3Qga29iamVjdCAqa29iaiwKKwkJCQkJCSAgIHN0cnVjdCBh
dHRyaWJ1dGUgKmF0dHIsCisJCQkJCQkgICBjaGFyICpidWYpCit7CisJc3RydWN0IGRtYV9idWZf
YXR0YWNoX3N0YXRzX2F0dHJpYnV0ZSAqYXR0cmlidXRlOworCXN0cnVjdCBkbWFfYnVmX2F0dGFj
aF9zeXNmc19lbnRyeSAqc3lzZnNfZW50cnk7CisKKwlhdHRyaWJ1dGUgPSB0b19kbWFfYnVmX2F0
dGFjaF9zdGF0c19hdHRyKGF0dHIpOworCXN5c2ZzX2VudHJ5ID0gdG9fZG1hX2J1Zl9hdHRhY2hf
ZW50cnlfZnJvbV9rb2JqKGtvYmopOworCisJaWYgKCFhdHRyaWJ1dGUtPnNob3cpCisJCXJldHVy
biAtRUlPOworCisJcmV0dXJuIGF0dHJpYnV0ZS0+c2hvdyhzeXNmc19lbnRyeSwgYXR0cmlidXRl
LCBidWYpOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IHN5c2ZzX29wcyBkbWFfYnVmX2F0dGFj
aF9zdGF0c19zeXNmc19vcHMgPSB7CisJLnNob3cgPSBkbWFfYnVmX2F0dGFjaF9zdGF0c19hdHRy
aWJ1dGVfc2hvdywKK307CisKK3N0YXRpYyBzc2l6ZV90IG1hcF9jb3VudGVyX3Nob3coc3RydWN0
IGRtYV9idWZfYXR0YWNoX3N5c2ZzX2VudHJ5ICpzeXNmc19lbnRyeSwKKwkJCQlzdHJ1Y3QgZG1h
X2J1Zl9hdHRhY2hfc3RhdHNfYXR0cmlidXRlICphdHRyLAorCQkJCWNoYXIgKmJ1ZikKK3sKKwly
ZXR1cm4gc3lzZnNfZW1pdChidWYsICIldVxuIiwgc3lzZnNfZW50cnktPm1hcF9jb3VudGVyKTsK
K30KKworc3RhdGljIHN0cnVjdCBkbWFfYnVmX2F0dGFjaF9zdGF0c19hdHRyaWJ1dGUgbWFwX2Nv
dW50ZXJfYXR0cmlidXRlID0KKwlfX0FUVFJfUk8obWFwX2NvdW50ZXIpOworCitzdGF0aWMgc3Ry
dWN0IGF0dHJpYnV0ZSAqZG1hX2J1Zl9hdHRhY2hfc3RhdHNfZGVmYXVsdF9hdHRyc1tdID0gewor
CSZtYXBfY291bnRlcl9hdHRyaWJ1dGUuYXR0ciwKKwlOVUxMLAorfTsKK0FUVFJJQlVURV9HUk9V
UFMoZG1hX2J1Zl9hdHRhY2hfc3RhdHNfZGVmYXVsdCk7CisKK3N0YXRpYyB2b2lkIGRtYV9idWZf
YXR0YWNoX3N5c2ZzX3JlbGVhc2Uoc3RydWN0IGtvYmplY3QgKmtvYmopCit7CisJc3RydWN0IGRt
YV9idWZfYXR0YWNoX3N5c2ZzX2VudHJ5ICpzeXNmc19lbnRyeTsKKworCXN5c2ZzX2VudHJ5ID0g
dG9fZG1hX2J1Zl9hdHRhY2hfZW50cnlfZnJvbV9rb2JqKGtvYmopOworCWtmcmVlKHN5c2ZzX2Vu
dHJ5KTsKK30KKworc3RhdGljIHN0cnVjdCBrb2JqX3R5cGUgZG1hX2J1Zl9hdHRhY2hfa3R5cGUg
PSB7CisJLnN5c2ZzX29wcyA9ICZkbWFfYnVmX2F0dGFjaF9zdGF0c19zeXNmc19vcHMsCisJLnJl
bGVhc2UgPSBkbWFfYnVmX2F0dGFjaF9zeXNmc19yZWxlYXNlLAorCS5kZWZhdWx0X2dyb3VwcyA9
IGRtYV9idWZfYXR0YWNoX3N0YXRzX2RlZmF1bHRfZ3JvdXBzLAorfTsKKwordm9pZCBkbWFfYnVm
X2F0dGFjaF9zdGF0c190ZWFyZG93bihzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gp
Cit7CisJc3RydWN0IGRtYV9idWZfYXR0YWNoX3N5c2ZzX2VudHJ5ICpzeXNmc19lbnRyeTsKKwor
CXN5c2ZzX2VudHJ5ID0gYXR0YWNoLT5zeXNmc19lbnRyeTsKKwlpZiAoIXN5c2ZzX2VudHJ5KQor
CQlyZXR1cm47CisKKwlzeXNmc19kZWxldGVfbGluaygmc3lzZnNfZW50cnktPmtvYmosICZhdHRh
Y2gtPmRldi0+a29iaiwgImRldmljZSIpOworCisJa29iamVjdF9kZWwoJnN5c2ZzX2VudHJ5LT5r
b2JqKTsKKwlrb2JqZWN0X3B1dCgmc3lzZnNfZW50cnktPmtvYmopOworfQorCitpbnQgZG1hX2J1
Zl9hdHRhY2hfc3RhdHNfc2V0dXAoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNoLAor
CQkJICAgICAgIHVuc2lnbmVkIGludCB1aWQpCit7CisJc3RydWN0IGRtYV9idWZfYXR0YWNoX3N5
c2ZzX2VudHJ5ICpzeXNmc19lbnRyeTsKKwlpbnQgcmV0OworCXN0cnVjdCBkbWFfYnVmICpkbWFi
dWY7CisKKwlpZiAoIWF0dGFjaCkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlkbWFidWYgPSBhdHRh
Y2gtPmRtYWJ1ZjsKKworCXN5c2ZzX2VudHJ5ID0ga3phbGxvYyhzaXplb2Yoc3RydWN0IGRtYV9i
dWZfYXR0YWNoX3N5c2ZzX2VudHJ5KSwKKwkJCSAgICAgIEdGUF9LRVJORUwpOworCWlmICghc3lz
ZnNfZW50cnkpCisJCXJldHVybiAtRU5PTUVNOworCisJc3lzZnNfZW50cnktPmtvYmoua3NldCA9
IGRtYWJ1Zi0+c3lzZnNfZW50cnktPmF0dGFjaF9zdGF0c19rc2V0OworCisJYXR0YWNoLT5zeXNm
c19lbnRyeSA9IHN5c2ZzX2VudHJ5OworCisJcmV0ID0ga29iamVjdF9pbml0X2FuZF9hZGQoJnN5
c2ZzX2VudHJ5LT5rb2JqLCAmZG1hX2J1Zl9hdHRhY2hfa3R5cGUsCisJCQkJICAgTlVMTCwgIiV1
IiwgdWlkKTsKKwlpZiAocmV0KQorCQlnb3RvIGtvYmpfZXJyOworCisJcmV0ID0gc3lzZnNfY3Jl
YXRlX2xpbmsoJnN5c2ZzX2VudHJ5LT5rb2JqLCAmYXR0YWNoLT5kZXYtPmtvYmosCisJCQkJImRl
dmljZSIpOworCWlmIChyZXQpCisJCWdvdG8gbGlua19lcnI7CisKKwlyZXR1cm4gMDsKKworbGlu
a19lcnI6CisJa29iamVjdF9kZWwoJnN5c2ZzX2VudHJ5LT5rb2JqKTsKK2tvYmpfZXJyOgorCWtv
YmplY3RfcHV0KCZzeXNmc19lbnRyeS0+a29iaik7CisJYXR0YWNoLT5zeXNmc19lbnRyeSA9IE5V
TEw7CisKKwlyZXR1cm4gcmV0OworfQordm9pZCBkbWFfYnVmX3N0YXRzX3RlYXJkb3duKHN0cnVj
dCBkbWFfYnVmICpkbWFidWYpCit7CisJc3RydWN0IGRtYV9idWZfc3lzZnNfZW50cnkgKnN5c2Zz
X2VudHJ5OworCisJc3lzZnNfZW50cnkgPSBkbWFidWYtPnN5c2ZzX2VudHJ5OworCWlmICghc3lz
ZnNfZW50cnkpCisJCXJldHVybjsKKworCWtzZXRfdW5yZWdpc3RlcihzeXNmc19lbnRyeS0+YXR0
YWNoX3N0YXRzX2tzZXQpOworCWtvYmplY3RfZGVsKCZzeXNmc19lbnRyeS0+a29iaik7CisJa29i
amVjdF9wdXQoJnN5c2ZzX2VudHJ5LT5rb2JqKTsKK30KKworc3RhdGljIHN0cnVjdCBrc2V0ICpk
bWFfYnVmX3N0YXRzX2tzZXQ7CitzdGF0aWMgc3RydWN0IGtzZXQgKmRtYV9idWZfcGVyX2J1ZmZl
cl9zdGF0c19rc2V0OworaW50IGRtYV9idWZfaW5pdF9zeXNmc19zdGF0aXN0aWNzKHZvaWQpCit7
CisJZG1hX2J1Zl9zdGF0c19rc2V0ID0ga3NldF9jcmVhdGVfYW5kX2FkZCgiZG1hYnVmIiwgTlVM
TCwga2VybmVsX2tvYmopOworCWlmICghZG1hX2J1Zl9zdGF0c19rc2V0KQorCQlyZXR1cm4gLUVO
T01FTTsKKworCWRtYV9idWZfcGVyX2J1ZmZlcl9zdGF0c19rc2V0ID0ga3NldF9jcmVhdGVfYW5k
X2FkZCgiYnVmZmVycyIsIE5VTEwsCisJCQkJCQkJICAgICZkbWFfYnVmX3N0YXRzX2tzZXQtPmtv
YmopOworCWlmICghZG1hX2J1Zl9wZXJfYnVmZmVyX3N0YXRzX2tzZXQpIHsKKwkJa3NldF91bnJl
Z2lzdGVyKGRtYV9idWZfc3RhdHNfa3NldCk7CisJCXJldHVybiAtRU5PTUVNOworCX0KKworCXJl
dHVybiAwOworfQorCit2b2lkIGRtYV9idWZfdW5pbml0X3N5c2ZzX3N0YXRpc3RpY3Modm9pZCkK
K3sKKwlrc2V0X3VucmVnaXN0ZXIoZG1hX2J1Zl9wZXJfYnVmZmVyX3N0YXRzX2tzZXQpOworCWtz
ZXRfdW5yZWdpc3RlcihkbWFfYnVmX3N0YXRzX2tzZXQpOworfQorCitpbnQgZG1hX2J1Zl9zdGF0
c19zZXR1cChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmKQoreworCXN0cnVjdCBkbWFfYnVmX3N5c2Zz
X2VudHJ5ICpzeXNmc19lbnRyeTsKKwlpbnQgcmV0OworCXN0cnVjdCBrc2V0ICphdHRhY2hfc3Rh
dHNfa3NldDsKKworCWlmICghZG1hYnVmIHx8ICFkbWFidWYtPmZpbGUpCisJCXJldHVybiAtRUlO
VkFMOworCisJaWYgKCFkbWFidWYtPmV4cF9uYW1lKSB7CisJCXByX2VycigiZXhwb3J0ZXIgbmFt
ZSBtdXN0IG5vdCBiZSBlbXB0eSBpZiBzdGF0cyBuZWVkZWRcbiIpOworCQlyZXR1cm4gLUVJTlZB
TDsKKwl9CisKKwlzeXNmc19lbnRyeSA9IGt6YWxsb2Moc2l6ZW9mKHN0cnVjdCBkbWFfYnVmX3N5
c2ZzX2VudHJ5KSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFzeXNmc19lbnRyeSkKKwkJcmV0dXJuIC1F
Tk9NRU07CisKKwlzeXNmc19lbnRyeS0+a29iai5rc2V0ID0gZG1hX2J1Zl9wZXJfYnVmZmVyX3N0
YXRzX2tzZXQ7CisJc3lzZnNfZW50cnktPmRtYWJ1ZiA9IGRtYWJ1ZjsKKworCWRtYWJ1Zi0+c3lz
ZnNfZW50cnkgPSBzeXNmc19lbnRyeTsKKworCS8qIGNyZWF0ZSB0aGUgZGlyZWN0b3J5IGZvciBi
dWZmZXIgc3RhdHMgKi8KKwlyZXQgPSBrb2JqZWN0X2luaXRfYW5kX2FkZCgmc3lzZnNfZW50cnkt
PmtvYmosICZkbWFfYnVmX2t0eXBlLCBOVUxMLAorCQkJCSAgICIlbHUiLCBmaWxlX2lub2RlKGRt
YWJ1Zi0+ZmlsZSktPmlfaW5vKTsKKwlpZiAocmV0KQorCQlnb3RvIGVycl9zeXNmc19kbWFidWY7
CisKKwkvKiBjcmVhdGUgdGhlIGRpcmVjdG9yeSBmb3IgYXR0YWNobWVudCBzdGF0cyAqLworCWF0
dGFjaF9zdGF0c19rc2V0ID0ga3NldF9jcmVhdGVfYW5kX2FkZCgiYXR0YWNobWVudHMiLCBOVUxM
LAorCQkJCQkJJnN5c2ZzX2VudHJ5LT5rb2JqKTsKKwlpZiAoIWF0dGFjaF9zdGF0c19rc2V0KSB7
CisJCXJldCA9IC1FTk9NRU07CisJCWdvdG8gZXJyX3N5c2ZzX2F0dGFjaDsKKwl9CisKKwlzeXNm
c19lbnRyeS0+YXR0YWNoX3N0YXRzX2tzZXQgPSBhdHRhY2hfc3RhdHNfa3NldDsKKworCXJldHVy
biAwOworCitlcnJfc3lzZnNfYXR0YWNoOgorCWtvYmplY3RfZGVsKCZzeXNmc19lbnRyeS0+a29i
aik7CitlcnJfc3lzZnNfZG1hYnVmOgorCWtvYmplY3RfcHV0KCZzeXNmc19lbnRyeS0+a29iaik7
CisJZG1hYnVmLT5zeXNmc19lbnRyeSA9IE5VTEw7CisJcmV0dXJuIHJldDsKK30KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLXN5c2ZzLXN0YXRzLmggYi9kcml2ZXJzL2RtYS1i
dWYvZG1hLWJ1Zi1zeXNmcy1zdGF0cy5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAwMDAwMC4uNWY0NzAzMjQ5MTE3Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9kbWEtYnVm
L2RtYS1idWYtc3lzZnMtc3RhdHMuaApAQCAtMCwwICsxLDYyIEBACisvKiBTUERYLUxpY2Vuc2Ut
SWRlbnRpZmllcjogR1BMLTIuMC1vbmx5ICovCisvKgorICogRE1BLUJVRiBzeXNmcyBzdGF0aXN0
aWNzLgorICoKKyAqIENvcHlyaWdodCAoQykgMjAyMSBHb29nbGUgTExDLgorICovCisKKyNpZm5k
ZWYgX0RNQV9CVUZfU1lTRlNfU1RBVFNfSAorI2RlZmluZSBfRE1BX0JVRl9TWVNGU19TVEFUU19I
CisKKyNpZmRlZiBDT05GSUdfRE1BQlVGX1NZU0ZTX1NUQVRTCisKK2ludCBkbWFfYnVmX2luaXRf
c3lzZnNfc3RhdGlzdGljcyh2b2lkKTsKK3ZvaWQgZG1hX2J1Zl91bmluaXRfc3lzZnNfc3RhdGlz
dGljcyh2b2lkKTsKKworaW50IGRtYV9idWZfc3RhdHNfc2V0dXAoc3RydWN0IGRtYV9idWYgKmRt
YWJ1Zik7CitpbnQgZG1hX2J1Zl9hdHRhY2hfc3RhdHNfc2V0dXAoc3RydWN0IGRtYV9idWZfYXR0
YWNobWVudCAqYXR0YWNoLAorCQkJICAgICAgIHVuc2lnbmVkIGludCB1aWQpOworc3RhdGljIGlu
bGluZSB2b2lkIGRtYV9idWZfdXBkYXRlX2F0dGFjaG1lbnRfbWFwX2NvdW50KHN0cnVjdCBkbWFf
YnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwKKwkJCQkJCSAgICAgICBpbnQgZGVsdGEpCit7CisJc3Ry
dWN0IGRtYV9idWZfYXR0YWNoX3N5c2ZzX2VudHJ5ICplbnRyeSA9IGF0dGFjaC0+c3lzZnNfZW50
cnk7CisKKwllbnRyeS0+bWFwX2NvdW50ZXIgKz0gZGVsdGE7Cit9Cit2b2lkIGRtYV9idWZfc3Rh
dHNfdGVhcmRvd24oc3RydWN0IGRtYV9idWYgKmRtYWJ1Zik7Cit2b2lkIGRtYV9idWZfYXR0YWNo
X3N0YXRzX3RlYXJkb3duKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCk7CitzdGF0
aWMgaW5saW5lIHVuc2lnbmVkIGludCBkbWFfYnVmX3VwZGF0ZV9hdHRhY2hfdWlkKHN0cnVjdCBk
bWFfYnVmICpkbWFidWYpCit7CisJc3RydWN0IGRtYV9idWZfc3lzZnNfZW50cnkgKmVudHJ5ID0g
ZG1hYnVmLT5zeXNmc19lbnRyeTsKKworCXJldHVybiBlbnRyeS0+YXR0YWNobWVudF91aWQrKzsK
K30KKyNlbHNlCisKK3N0YXRpYyBpbmxpbmUgaW50IGRtYV9idWZfaW5pdF9zeXNmc19zdGF0aXN0
aWNzKHZvaWQpCit7CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9pZCBkbWFfYnVm
X3VuaW5pdF9zeXNmc19zdGF0aXN0aWNzKHZvaWQpIHt9CisKK3N0YXRpYyBpbmxpbmUgaW50IGRt
YV9idWZfc3RhdHNfc2V0dXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1ZikKK3sKKwlyZXR1cm4gMDsK
K30KK3N0YXRpYyBpbmxpbmUgaW50IGRtYV9idWZfYXR0YWNoX3N0YXRzX3NldHVwKHN0cnVjdCBk
bWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwKKwkJCQkJICAgICB1bnNpZ25lZCBpbnQgdWlkKQor
eworCXJldHVybiAwOworfQorCitzdGF0aWMgaW5saW5lIHZvaWQgZG1hX2J1Zl9zdGF0c190ZWFy
ZG93bihzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmKSB7fQorc3RhdGljIGlubGluZSB2b2lkIGRtYV9i
dWZfYXR0YWNoX3N0YXRzX3RlYXJkb3duKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFj
aCkge30KK3N0YXRpYyBpbmxpbmUgdm9pZCBkbWFfYnVmX3VwZGF0ZV9hdHRhY2htZW50X21hcF9j
b3VudChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gsCisJCQkJCQkgICAgICAgaW50
IGRlbHRhKSB7fQorc3RhdGljIGlubGluZSB1bnNpZ25lZCBpbnQgZG1hX2J1Zl91cGRhdGVfYXR0
YWNoX3VpZChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmKQoreworCXJldHVybiAwOworfQorI2VuZGlm
CisjZW5kaWYgLy8gX0RNQV9CVUZfU1lTRlNfU1RBVFNfSApkaWZmIC0tZ2l0IGEvZHJpdmVycy9k
bWEtYnVmL2RtYS1idWYuYyBiL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMKaW5kZXggOWFkNjM5
N2FhYTk3Li4yOWY5ZWExOGViNDcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVm
LmMKKysrIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYwpAQCAtMjksNiArMjksOCBAQAogI2lu
Y2x1ZGUgPHVhcGkvbGludXgvZG1hLWJ1Zi5oPgogI2luY2x1ZGUgPHVhcGkvbGludXgvbWFnaWMu
aD4KIAorI2luY2x1ZGUgImRtYS1idWYtc3lzZnMtc3RhdHMuaCIKKwogc3RhdGljIGlubGluZSBp
bnQgaXNfZG1hX2J1Zl9maWxlKHN0cnVjdCBmaWxlICopOwogCiBzdHJ1Y3QgZG1hX2J1Zl9saXN0
IHsKQEAgLTc5LDYgKzgxLDcgQEAgc3RhdGljIHZvaWQgZG1hX2J1Zl9yZWxlYXNlKHN0cnVjdCBk
ZW50cnkgKmRlbnRyeSkKIAlpZiAoZG1hYnVmLT5yZXN2ID09IChzdHJ1Y3QgZG1hX3Jlc3YgKikm
ZG1hYnVmWzFdKQogCQlkbWFfcmVzdl9maW5pKGRtYWJ1Zi0+cmVzdik7CiAKKwlkbWFfYnVmX3N0
YXRzX3RlYXJkb3duKGRtYWJ1Zik7CiAJbW9kdWxlX3B1dChkbWFidWYtPm93bmVyKTsKIAlrZnJl
ZShkbWFidWYtPm5hbWUpOwogCWtmcmVlKGRtYWJ1Zik7CkBAIC01NzksNiArNTgyLDEwIEBAIHN0
cnVjdCBkbWFfYnVmICpkbWFfYnVmX2V4cG9ydChjb25zdCBzdHJ1Y3QgZG1hX2J1Zl9leHBvcnRf
aW5mbyAqZXhwX2luZm8pCiAJZmlsZS0+Zl9tb2RlIHw9IEZNT0RFX0xTRUVLOwogCWRtYWJ1Zi0+
ZmlsZSA9IGZpbGU7CiAKKwlyZXQgPSBkbWFfYnVmX3N0YXRzX3NldHVwKGRtYWJ1Zik7CisJaWYg
KHJldCkKKwkJZ290byBlcnJfc3lzZnM7CisKIAltdXRleF9pbml0KCZkbWFidWYtPmxvY2spOwog
CUlOSVRfTElTVF9IRUFEKCZkbWFidWYtPmF0dGFjaG1lbnRzKTsKIApAQCAtNTg4LDYgKzU5NSwx
NCBAQCBzdHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1Zl9leHBvcnQoY29uc3Qgc3RydWN0IGRtYV9idWZf
ZXhwb3J0X2luZm8gKmV4cF9pbmZvKQogCiAJcmV0dXJuIGRtYWJ1ZjsKIAorZXJyX3N5c2ZzOgor
CS8qCisJICogU2V0IGZpbGUtPmZfcGF0aC5kZW50cnktPmRfZnNkYXRhIHRvIE5VTEwgc28gdGhh
dCB3aGVuCisJICogZG1hX2J1Zl9yZWxlYXNlKCkgZ2V0cyBpbnZva2VkIGJ5IGRlbnRyeV9vcHMs
IGl0IGV4aXRzCisJICogZWFybHkgYmVmb3JlIGNhbGxpbmcgdGhlIHJlbGVhc2UoKSBkbWFfYnVm
IG9wLgorCSAqLworCWZpbGUtPmZfcGF0aC5kZW50cnktPmRfZnNkYXRhID0gTlVMTDsKKwlmcHV0
KGZpbGUpOwogZXJyX2RtYWJ1ZjoKIAlrZnJlZShkbWFidWYpOwogZXJyX21vZHVsZToKQEAgLTY5
Miw2ICs3MDcsNyBAQCBkbWFfYnVmX2R5bmFtaWNfYXR0YWNoKHN0cnVjdCBkbWFfYnVmICpkbWFi
dWYsIHN0cnVjdCBkZXZpY2UgKmRldiwKIHsKIAlzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICph
dHRhY2g7CiAJaW50IHJldDsKKwl1bnNpZ25lZCBpbnQgYXR0YWNoX3VpZDsKIAogCWlmIChXQVJO
X09OKCFkbWFidWYgfHwgIWRldikpCiAJCXJldHVybiBFUlJfUFRSKC1FSU5WQUwpOwpAQCAtNzE3
LDggKzczMywxMyBAQCBkbWFfYnVmX2R5bmFtaWNfYXR0YWNoKHN0cnVjdCBkbWFfYnVmICpkbWFi
dWYsIHN0cnVjdCBkZXZpY2UgKmRldiwKIAl9CiAJZG1hX3Jlc3ZfbG9jayhkbWFidWYtPnJlc3Ys
IE5VTEwpOwogCWxpc3RfYWRkKCZhdHRhY2gtPm5vZGUsICZkbWFidWYtPmF0dGFjaG1lbnRzKTsK
KwlhdHRhY2hfdWlkID0gZG1hX2J1Zl91cGRhdGVfYXR0YWNoX3VpZChkbWFidWYpOwogCWRtYV9y
ZXN2X3VubG9jayhkbWFidWYtPnJlc3YpOwogCisJcmV0ID0gZG1hX2J1Zl9hdHRhY2hfc3RhdHNf
c2V0dXAoYXR0YWNoLCBhdHRhY2hfdWlkKTsKKwlpZiAocmV0KQorCQlnb3RvIGVycl9zeXNmczsK
KwogCS8qIFdoZW4gZWl0aGVyIHRoZSBpbXBvcnRlciBvciB0aGUgZXhwb3J0ZXIgY2FuJ3QgaGFu
ZGxlIGR5bmFtaWMKIAkgKiBtYXBwaW5ncyB3ZSBjYWNoZSB0aGUgbWFwcGluZyBoZXJlIHRvIGF2
b2lkIGlzc3VlcyB3aXRoIHRoZQogCSAqIHJlc2VydmF0aW9uIG9iamVjdCBsb2NrLgpAQCAtNzQ1
LDYgKzc2Niw3IEBAIGRtYV9idWZfZHluYW1pY19hdHRhY2goc3RydWN0IGRtYV9idWYgKmRtYWJ1
Ziwgc3RydWN0IGRldmljZSAqZGV2LAogCQkJZG1hX3Jlc3ZfdW5sb2NrKGF0dGFjaC0+ZG1hYnVm
LT5yZXN2KTsKIAkJYXR0YWNoLT5zZ3QgPSBzZ3Q7CiAJCWF0dGFjaC0+ZGlyID0gRE1BX0JJRElS
RUNUSU9OQUw7CisJCWRtYV9idWZfdXBkYXRlX2F0dGFjaG1lbnRfbWFwX2NvdW50KGF0dGFjaCwg
MSAvKiBkZWx0YSAqLyk7CiAJfQogCiAJcmV0dXJuIGF0dGFjaDsKQEAgLTc2MSw2ICs3ODMsNyBA
QCBkbWFfYnVmX2R5bmFtaWNfYXR0YWNoKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVjdCBk
ZXZpY2UgKmRldiwKIAlpZiAoZG1hX2J1Zl9pc19keW5hbWljKGF0dGFjaC0+ZG1hYnVmKSkKIAkJ
ZG1hX3Jlc3ZfdW5sb2NrKGF0dGFjaC0+ZG1hYnVmLT5yZXN2KTsKIAorZXJyX3N5c2ZzOgogCWRt
YV9idWZfZGV0YWNoKGRtYWJ1ZiwgYXR0YWNoKTsKIAlyZXR1cm4gRVJSX1BUUihyZXQpOwogfQpA
QCAtNzk5LDYgKzgyMiw3IEBAIHZvaWQgZG1hX2J1Zl9kZXRhY2goc3RydWN0IGRtYV9idWYgKmRt
YWJ1Ziwgc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNoKQogCQkJZG1hX3Jlc3ZfbG9j
ayhhdHRhY2gtPmRtYWJ1Zi0+cmVzdiwgTlVMTCk7CiAKIAkJZG1hYnVmLT5vcHMtPnVubWFwX2Rt
YV9idWYoYXR0YWNoLCBhdHRhY2gtPnNndCwgYXR0YWNoLT5kaXIpOworCQlkbWFfYnVmX3VwZGF0
ZV9hdHRhY2htZW50X21hcF9jb3VudChhdHRhY2gsIC0xIC8qIGRlbHRhICovKTsKIAogCQlpZiAo
ZG1hX2J1Zl9pc19keW5hbWljKGF0dGFjaC0+ZG1hYnVmKSkgewogCQkJZG1hX2J1Zl91bnBpbihh
dHRhY2gpOwpAQCAtODEyLDYgKzgzNiw3IEBAIHZvaWQgZG1hX2J1Zl9kZXRhY2goc3RydWN0IGRt
YV9idWYgKmRtYWJ1Ziwgc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNoKQogCWlmIChk
bWFidWYtPm9wcy0+ZGV0YWNoKQogCQlkbWFidWYtPm9wcy0+ZGV0YWNoKGRtYWJ1ZiwgYXR0YWNo
KTsKIAorCWRtYV9idWZfYXR0YWNoX3N0YXRzX3RlYXJkb3duKGF0dGFjaCk7CiAJa2ZyZWUoYXR0
YWNoKTsKIH0KIEVYUE9SVF9TWU1CT0xfR1BMKGRtYV9idWZfZGV0YWNoKTsKQEAgLTkzOCw2ICs5
NjMsOSBAQCBzdHJ1Y3Qgc2dfdGFibGUgKmRtYV9idWZfbWFwX2F0dGFjaG1lbnQoc3RydWN0IGRt
YV9idWZfYXR0YWNobWVudCAqYXR0YWNoLAogCX0KICNlbmRpZiAvKiBDT05GSUdfRE1BX0FQSV9E
RUJVRyAqLwogCisJaWYgKCFJU19FUlIoc2dfdGFibGUpKQorCQlkbWFfYnVmX3VwZGF0ZV9hdHRh
Y2htZW50X21hcF9jb3VudChhdHRhY2gsIDEgLyogZGVsdGEgKi8pOworCiAJcmV0dXJuIHNnX3Rh
YmxlOwogfQogRVhQT1JUX1NZTUJPTF9HUEwoZG1hX2J1Zl9tYXBfYXR0YWNobWVudCk7CkBAIC05
NzUsNiArMTAwMyw4IEBAIHZvaWQgZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KHN0cnVjdCBkbWFf
YnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwKIAlpZiAoZG1hX2J1Zl9pc19keW5hbWljKGF0dGFjaC0+
ZG1hYnVmKSAmJgogCSAgICAhSVNfRU5BQkxFRChDT05GSUdfRE1BQlVGX01PVkVfTk9USUZZKSkK
IAkJZG1hX2J1Zl91bnBpbihhdHRhY2gpOworCisJZG1hX2J1Zl91cGRhdGVfYXR0YWNobWVudF9t
YXBfY291bnQoYXR0YWNoLCAtMSAvKiBkZWx0YSAqLyk7CiB9CiBFWFBPUlRfU1lNQk9MX0dQTChk
bWFfYnVmX3VubWFwX2F0dGFjaG1lbnQpOwogCkBAIC0xNDEyLDYgKzE0NDIsMTIgQEAgc3RhdGlj
IGlubGluZSB2b2lkIGRtYV9idWZfdW5pbml0X2RlYnVnZnModm9pZCkKIAogc3RhdGljIGludCBf
X2luaXQgZG1hX2J1Zl9pbml0KHZvaWQpCiB7CisJaW50IHJldDsKKworCXJldCA9IGRtYV9idWZf
aW5pdF9zeXNmc19zdGF0aXN0aWNzKCk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKwogCWRt
YV9idWZfbW50ID0ga2Vybl9tb3VudCgmZG1hX2J1Zl9mc190eXBlKTsKIAlpZiAoSVNfRVJSKGRt
YV9idWZfbW50KSkKIAkJcmV0dXJuIFBUUl9FUlIoZG1hX2J1Zl9tbnQpOwpAQCAtMTQyNyw1ICsx
NDYzLDYgQEAgc3RhdGljIHZvaWQgX19leGl0IGRtYV9idWZfZGVpbml0KHZvaWQpCiB7CiAJZG1h
X2J1Zl91bmluaXRfZGVidWdmcygpOwogCWtlcm5fdW5tb3VudChkbWFfYnVmX21udCk7CisJZG1h
X2J1Zl91bmluaXRfc3lzZnNfc3RhdGlzdGljcygpOwogfQogX19leGl0Y2FsbChkbWFfYnVmX2Rl
aW5pdCk7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2RtYS1idWYuaCBiL2luY2x1ZGUvbGlu
dXgvZG1hLWJ1Zi5oCmluZGV4IGNmNzI2OTljYjJiYy4uNGFlNWNjMzhhNGE3IDEwMDY0NAotLS0g
YS9pbmNsdWRlL2xpbnV4L2RtYS1idWYuaAorKysgYi9pbmNsdWRlL2xpbnV4L2RtYS1idWYuaApA
QCAtMjk0LDYgKzI5NCw5IEBAIHN0cnVjdCBkbWFfYnVmX29wcyB7CiAgKiBAcG9sbDogZm9yIHVz
ZXJzcGFjZSBwb2xsIHN1cHBvcnQKICAqIEBjYl9leGNsOiBmb3IgdXNlcnNwYWNlIHBvbGwgc3Vw
cG9ydAogICogQGNiX3NoYXJlZDogZm9yIHVzZXJzcGFjZSBwb2xsIHN1cHBvcnQKKyAqIEBzeXNm
c19lbnRyeTogZm9yIGV4cG9zaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoaXMgYnVmZmVyIGluIHN5
c2ZzLgorICogVGhlIGF0dGFjaG1lbnRfdWlkIG1lbWJlciBvZiBAc3lzZnNfZW50cnkgaXMgcHJv
dGVjdGVkIGJ5IGRtYV9yZXN2IGxvY2sKKyAqIGFuZCBpcyBpbmNyZW1lbnRlZCBvbiBlYWNoIGF0
dGFjaC4KICAqCiAgKiBUaGlzIHJlcHJlc2VudHMgYSBzaGFyZWQgYnVmZmVyLCBjcmVhdGVkIGJ5
IGNhbGxpbmcgZG1hX2J1Zl9leHBvcnQoKS4gVGhlCiAgKiB1c2Vyc3BhY2UgcmVwcmVzZW50YXRp
b24gaXMgYSBub3JtYWwgZmlsZSBkZXNjcmlwdG9yLCB3aGljaCBjYW4gYmUgY3JlYXRlZCBieQpA
QCAtMzI5LDYgKzMzMiwxNSBAQCBzdHJ1Y3QgZG1hX2J1ZiB7CiAKIAkJX19wb2xsX3QgYWN0aXZl
OwogCX0gY2JfZXhjbCwgY2Jfc2hhcmVkOworI2lmZGVmIENPTkZJR19ETUFCVUZfU1lTRlNfU1RB
VFMKKwkvKiBmb3Igc3lzZnMgc3RhdHMgKi8KKwlzdHJ1Y3QgZG1hX2J1Zl9zeXNmc19lbnRyeSB7
CisJCXN0cnVjdCBrb2JqZWN0IGtvYmo7CisJCXN0cnVjdCBkbWFfYnVmICpkbWFidWY7CisJCXVu
c2lnbmVkIGludCBhdHRhY2htZW50X3VpZDsKKwkJc3RydWN0IGtzZXQgKmF0dGFjaF9zdGF0c19r
c2V0OworCX0gKnN5c2ZzX2VudHJ5OworI2VuZGlmCiB9OwogCiAvKioKQEAgLTM3OCw2ICszOTAs
NyBAQCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2hfb3BzIHsKICAqIEBpbXBvcnRlcl9vcHM6IGltcG9y
dGVyIG9wZXJhdGlvbnMgZm9yIHRoaXMgYXR0YWNobWVudCwgaWYgcHJvdmlkZWQKICAqIGRtYV9i
dWZfbWFwL3VubWFwX2F0dGFjaG1lbnQoKSBtdXN0IGJlIGNhbGxlZCB3aXRoIHRoZSBkbWFfcmVz
diBsb2NrIGhlbGQuCiAgKiBAaW1wb3J0ZXJfcHJpdjogaW1wb3J0ZXIgc3BlY2lmaWMgYXR0YWNo
bWVudCBkYXRhLgorICogQHN5c2ZzX2VudHJ5OiBGb3IgZXhwb3NpbmcgaW5mb3JtYXRpb24gYWJv
dXQgdGhpcyBhdHRhY2htZW50IGluIHN5c2ZzLgogICoKICAqIFRoaXMgc3RydWN0dXJlIGhvbGRz
IHRoZSBhdHRhY2htZW50IGluZm9ybWF0aW9uIGJldHdlZW4gdGhlIGRtYV9idWYgYnVmZmVyCiAg
KiBhbmQgaXRzIHVzZXIgZGV2aWNlKHMpLiBUaGUgbGlzdCBjb250YWlucyBvbmUgYXR0YWNobWVu
dCBzdHJ1Y3QgcGVyIGRldmljZQpAQCAtMzk4LDYgKzQxMSwxMyBAQCBzdHJ1Y3QgZG1hX2J1Zl9h
dHRhY2htZW50IHsKIAljb25zdCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2hfb3BzICppbXBvcnRlcl9v
cHM7CiAJdm9pZCAqaW1wb3J0ZXJfcHJpdjsKIAl2b2lkICpwcml2OworI2lmZGVmIENPTkZJR19E
TUFCVUZfU1lTRlNfU1RBVFMKKwkvKiBmb3Igc3lzZnMgc3RhdHMgKi8KKwlzdHJ1Y3QgZG1hX2J1
Zl9hdHRhY2hfc3lzZnNfZW50cnkgeworCQlzdHJ1Y3Qga29iamVjdCBrb2JqOworCQl1bnNpZ25l
ZCBpbnQgbWFwX2NvdW50ZXI7CisJfSAqc3lzZnNfZW50cnk7CisjZW5kaWYKIH07CiAKIC8qKgot
LSAKMi4zMC4wLjI4NC5nZDk4YjFkZDVlYWE3LWdvb2cKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
