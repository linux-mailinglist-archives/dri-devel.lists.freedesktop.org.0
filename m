Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 68F3027FE58
	for <lists+dri-devel@lfdr.de>; Thu,  1 Oct 2020 13:28:34 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 77E636E895;
	Thu,  1 Oct 2020 11:28:25 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ej1-x62a.google.com (mail-ej1-x62a.google.com
 [IPv6:2a00:1450:4864:20::62a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5AEE26E891
 for <dri-devel@lists.freedesktop.org>; Thu,  1 Oct 2020 11:28:23 +0000 (UTC)
Received: by mail-ej1-x62a.google.com with SMTP id nw23so7513511ejb.4
 for <dri-devel@lists.freedesktop.org>; Thu, 01 Oct 2020 04:28:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=Vv5pNbHb4RJA+LGPWDxrSMERXIOjNDhqyPakwNjcwO4=;
 b=rVIxlDhnv1vNcHxBJWLwFjhy0qOs6oSFAp2UyGIrllViRmH87zTioSefRiVx0ABc58
 VNbDbUNvQxlA+fUgTnzPQhmllgnzO/0QSzSkGlzwqtC8I841bT8dCX31mOXPGb4ed1mS
 vCg9LNsyJEkwWmS5IxoGU+Ww4rDFi9NiN+zvK9wqTdA/xbiG+9I8KLeIUmDRvnoq79ge
 CQCqd42ewJBitJfZRcYWLe0QLPq3W05SOWbBDtLnAJQGXcmzQ4j9WjTmCk09S/LzZv9p
 aSVGJFQxZ3vefs0Tf2vCMKmFAQBAWm0Pxm309Xs/Wuaz50K0AvIjpEoS8HfOfT+a/Lph
 qBUQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=Vv5pNbHb4RJA+LGPWDxrSMERXIOjNDhqyPakwNjcwO4=;
 b=qyyPxDoDky8ic387JqTkiXqmlvnV/x3JHyAVqptuYTP+uy6FCzgvopbq3A2nXI56xb
 QGNDgqzOrMQ9Yaq7LB+lseFCvwMA5R0imjxbgDz0TfdQAONF/KEdF7jjBX4PifTlyo9A
 vW575PXePPQrM4cI6sLswmEiFYn5nZgi8FRiH1D2J57J6fjayXIbFpULvD6Zy3ksKW2X
 VhXTea2z8hMqxSphJ74hu2aI+RZ9kHaQnO/+bhQivcJuCcPSCb1f2FTa0H41KPUgsVri
 SQt3LbLRxXOnpILEmDpflgciCOmehnMavanvU+DHUusHJIWKix5ehVvb+gI+PZRM8ZpV
 OBpw==
X-Gm-Message-State: AOAM533NaFcDg7L+pzXWrdLz0CM/32zSDpnoClQw4OgF6bEwqX67dq2f
 43sfPHptEHtjo1joZ6qbDy4YrJSz/Vg=
X-Google-Smtp-Source: ABdhPJwMFDknAfALT7RLCVi+yNUPuwvWoEaZNk3HrV+ONezh6kVudxpCycJTuyPxhkkJJ5ZKljTgSQ==
X-Received: by 2002:a17:906:c1c6:: with SMTP id
 bw6mr7907665ejb.374.1601551701378; 
 Thu, 01 Oct 2020 04:28:21 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:36be:5a08:8c1d:6b2b])
 by smtp.gmail.com with ESMTPSA id p3sm3834892edp.28.2020.10.01.04.28.20
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 01 Oct 2020 04:28:20 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org, ray.huang@amd.com, airlied@gmail.com,
 daniel@ffwll.ch
Subject: [PATCH 4/8] drm/ttm: rename TTM caching enum
Date: Thu,  1 Oct 2020 13:28:13 +0200
Message-Id: <20201001112817.20967-4-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20201001112817.20967-1-christian.koenig@amd.com>
References: <20201001112817.20967-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q2xlYW51cCB0aGUgZW51bSBuYW1lIGFuZCBpdHMgdmFsdWVzIGFuZCBnaXZlIGl0IGEgc2VwYXJh
dGUgaGVhZGVyIGZpbGUuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3Rp
YW4ua29lbmlnQGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X2dtYy5jICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMg
IHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jICAgICAgfCAgMiAr
LQogZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fcGFnZV9hbGxvYy5jICAgICB8IDI2ICsrKysrKysr
Ky0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fcGFnZV9hbGxvY19kbWEuYyB8IDIw
ICsrKysrKystLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90dC5jICAgICAgICAgICAg
IHwgMTcgKysrKysrLS0tLS0tCiBpbmNsdWRlL2RybS90dG0vdHRtX2NhY2hpbmcuaCAgICAgICAg
ICAgIHwgMzQgKysrKysrKysrKysrKysrKysrKysrKysrCiBpbmNsdWRlL2RybS90dG0vdHRtX3R0
LmggICAgICAgICAgICAgICAgIHwgIDkgKystLS0tLQogOCBmaWxlcyBjaGFuZ2VkLCA3MCBpbnNl
cnRpb25zKCspLCA0MiBkZWxldGlvbnMoLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBpbmNsdWRlL2Ry
bS90dG0vdHRtX2NhY2hpbmcuaAoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9nbWMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nbWMu
YwppbmRleCAyMTNlZjA5MGJiMGUuLjNjNWFkNjllZmYxOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dtYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9nbWMuYwpAQCAtMTI0LDcgKzEyNCw3IEBAIHVpbnQ2NF90IGFtZGdwdV9n
bWNfYWdwX2FkZHIoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibykKIAlzdHJ1Y3QgYW1kZ3B1
X2RldmljZSAqYWRldiA9IGFtZGdwdV90dG1fYWRldihiby0+YmRldik7CiAJc3RydWN0IHR0bV9k
bWFfdHQgKnR0bTsKIAotCWlmIChiby0+bnVtX3BhZ2VzICE9IDEgfHwgYm8tPnR0bS0+Y2FjaGlu
Z19zdGF0ZSA9PSB0dF9jYWNoZWQpCisJaWYgKGJvLT5udW1fcGFnZXMgIT0gMSB8fCBiby0+dHRt
LT5jYWNoaW5nID09IHR0bV9jYWNoZWQpCiAJCXJldHVybiBBTURHUFVfQk9fSU5WQUxJRF9PRkZT
RVQ7CiAKIAl0dG0gPSBjb250YWluZXJfb2YoYm8tPnR0bSwgc3RydWN0IHR0bV9kbWFfdHQsIHR0
bSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKaW5kZXggMzk5OTYxMDM1
YWU2Li4yYWYyNGNmMzllOTQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV90dG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRt
LmMKQEAgLTE1MjUsNyArMTUyNSw3IEBAIHVpbnQ2NF90IGFtZGdwdV90dG1fdHRfcGRlX2ZsYWdz
KHN0cnVjdCB0dG1fdHQgKnR0bSwgc3RydWN0IHR0bV9yZXNvdXJjZSAqbWVtKQogCWlmIChtZW0g
JiYgbWVtLT5tZW1fdHlwZSA9PSBUVE1fUExfVFQpIHsKIAkJZmxhZ3MgfD0gQU1ER1BVX1BURV9T
WVNURU07CiAKLQkJaWYgKHR0bS0+Y2FjaGluZ19zdGF0ZSA9PSB0dF9jYWNoZWQpCisJCWlmICh0
dG0tPmNhY2hpbmcgPT0gdHRtX2NhY2hlZCkKIAkJCWZsYWdzIHw9IEFNREdQVV9QVEVfU05PT1BF
RDsKIAl9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5j
IGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMKaW5kZXggNjNlMzhiMDVhNWJj
Li5mMDFlNzQxMTNmNDAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9u
X3R0bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jCkBAIC01NDYs
NyArNTQ2LDcgQEAgc3RhdGljIGludCByYWRlb25fdHRtX2JhY2tlbmRfYmluZChzdHJ1Y3QgdHRt
X2JvX2RldmljZSAqYmRldiwKIAkJV0FSTigxLCAibm90aGluZyB0byBiaW5kICVsdSBwYWdlcyBm
b3IgbXJlZyAlcCBiYWNrICVwIVxuIiwKIAkJICAgICB0dG0tPm51bV9wYWdlcywgYm9fbWVtLCB0
dG0pOwogCX0KLQlpZiAodHRtLT5jYWNoaW5nX3N0YXRlID09IHR0X2NhY2hlZCkKKwlpZiAodHRt
LT5jYWNoaW5nID09IHR0bV9jYWNoZWQpCiAJCWZsYWdzIHw9IFJBREVPTl9HQVJUX1BBR0VfU05P
T1A7CiAJciA9IHJhZGVvbl9nYXJ0X2JpbmQocmRldiwgZ3R0LT5vZmZzZXQsIHR0bS0+bnVtX3Bh
Z2VzLAogCQkJICAgICB0dG0tPnBhZ2VzLCBndHQtPnR0bS5kbWFfYWRkcmVzcywgZmxhZ3MpOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fcGFnZV9hbGxvYy5jIGIvZHJpdmVy
cy9ncHUvZHJtL3R0bS90dG1fcGFnZV9hbGxvYy5jCmluZGV4IDExMTAzMWNiYjZkZi4uYzhmNjc5
MDk2MmI5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9wYWdlX2FsbG9jLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fcGFnZV9hbGxvYy5jCkBAIC0yMjAsMTQgKzIy
MCwxNCBAQCBzdGF0aWMgc3RydWN0IHR0bV9wb29sX21hbmFnZXIgKl9tYW5hZ2VyOwogLyoqCiAg
KiBTZWxlY3QgdGhlIHJpZ2h0IHBvb2wgb3IgcmVxdWVzdGVkIGNhY2hpbmcgc3RhdGUgYW5kIHR0
bSBmbGFncy4gKi8KIHN0YXRpYyBzdHJ1Y3QgdHRtX3BhZ2VfcG9vbCAqdHRtX2dldF9wb29sKGlu
dCBmbGFncywgYm9vbCBodWdlLAotCQkJCQkgIGVudW0gdHRtX2NhY2hpbmdfc3RhdGUgY3N0YXRl
KQorCQkJCQkgIGVudW0gdHRtX2NhY2hpbmcgY3N0YXRlKQogewogCWludCBwb29sX2luZGV4Owog
Ci0JaWYgKGNzdGF0ZSA9PSB0dF9jYWNoZWQpCisJaWYgKGNzdGF0ZSA9PSB0dG1fY2FjaGVkKQog
CQlyZXR1cm4gTlVMTDsKIAotCWlmIChjc3RhdGUgPT0gdHRfd2MpCisJaWYgKGNzdGF0ZSA9PSB0
dG1fd3JpdGVfY29tYmluZWQpCiAJCXBvb2xfaW5kZXggPSAweDA7CiAJZWxzZQogCQlwb29sX2lu
ZGV4ID0gMHgxOwpAQCAtNDQxLDE3ICs0NDEsMTcgQEAgc3RhdGljIHZvaWQgdHRtX3Bvb2xfbW1f
c2hyaW5rX2Zpbmkoc3RydWN0IHR0bV9wb29sX21hbmFnZXIgKm1hbmFnZXIpCiB9CiAKIHN0YXRp
YyBpbnQgdHRtX3NldF9wYWdlc19jYWNoaW5nKHN0cnVjdCBwYWdlICoqcGFnZXMsCi0JCWVudW0g
dHRtX2NhY2hpbmdfc3RhdGUgY3N0YXRlLCB1bnNpZ25lZCBjcGFnZXMpCisJCWVudW0gdHRtX2Nh
Y2hpbmcgY3N0YXRlLCB1bnNpZ25lZCBjcGFnZXMpCiB7CiAJaW50IHIgPSAwOwogCS8qIFNldCBw
YWdlIGNhY2hpbmcgKi8KIAlzd2l0Y2ggKGNzdGF0ZSkgewotCWNhc2UgdHRfdW5jYWNoZWQ6CisJ
Y2FzZSB0dG1fdW5jYWNoZWQ6CiAJCXIgPSB0dG1fc2V0X3BhZ2VzX2FycmF5X3VjKHBhZ2VzLCBj
cGFnZXMpOwogCQlpZiAocikKIAkJCXByX2VycigiRmFpbGVkIHRvIHNldCAlZCBwYWdlcyB0byB1
YyFcbiIsIGNwYWdlcyk7CiAJCWJyZWFrOwotCWNhc2UgdHRfd2M6CisJY2FzZSB0dG1fd3JpdGVf
Y29tYmluZWQ6CiAJCXIgPSB0dG1fc2V0X3BhZ2VzX2FycmF5X3djKHBhZ2VzLCBjcGFnZXMpOwog
CQlpZiAocikKIAkJCXByX2VycigiRmFpbGVkIHRvIHNldCAlZCBwYWdlcyB0byB3YyFcbiIsIGNw
YWdlcyk7CkBAIC00ODYsNyArNDg2LDcgQEAgc3RhdGljIHZvaWQgdHRtX2hhbmRsZV9jYWNoaW5n
X2ZhaWx1cmUoc3RydWN0IHBhZ2UgKipmYWlsZWRfcGFnZXMsCiAgKiBwYWdlcyByZXR1cm5lZCBp
biBwYWdlcyBhcnJheS4KICAqLwogc3RhdGljIGludCB0dG1fYWxsb2NfbmV3X3BhZ2VzKHN0cnVj
dCBsaXN0X2hlYWQgKnBhZ2VzLCBnZnBfdCBnZnBfZmxhZ3MsCi0JCQkgICAgICAgaW50IHR0bV9m
bGFncywgZW51bSB0dG1fY2FjaGluZ19zdGF0ZSBjc3RhdGUsCisJCQkgICAgICAgaW50IHR0bV9m
bGFncywgZW51bSB0dG1fY2FjaGluZyBjc3RhdGUsCiAJCQkgICAgICAgdW5zaWduZWQgY291bnQs
IHVuc2lnbmVkIG9yZGVyKQogewogCXN0cnVjdCBwYWdlICoqY2FjaGluZ19hcnJheTsKQEAgLTU2
Niw3ICs1NjYsNyBAQCBzdGF0aWMgaW50IHR0bV9hbGxvY19uZXdfcGFnZXMoc3RydWN0IGxpc3Rf
aGVhZCAqcGFnZXMsIGdmcF90IGdmcF9mbGFncywKICAqIHBhZ2VzIGlzIHNtYWxsLgogICovCiBz
dGF0aWMgdm9pZCB0dG1fcGFnZV9wb29sX2ZpbGxfbG9ja2VkKHN0cnVjdCB0dG1fcGFnZV9wb29s
ICpwb29sLCBpbnQgdHRtX2ZsYWdzLAotCQkJCSAgICAgIGVudW0gdHRtX2NhY2hpbmdfc3RhdGUg
Y3N0YXRlLAorCQkJCSAgICAgIGVudW0gdHRtX2NhY2hpbmcgY3N0YXRlLAogCQkJCSAgICAgIHVu
c2lnbmVkIGNvdW50LCB1bnNpZ25lZCBsb25nICppcnFfZmxhZ3MpCiB7CiAJc3RydWN0IHBhZ2Ug
KnA7CkBAIC02MjYsNyArNjI2LDcgQEAgc3RhdGljIHZvaWQgdHRtX3BhZ2VfcG9vbF9maWxsX2xv
Y2tlZChzdHJ1Y3QgdHRtX3BhZ2VfcG9vbCAqcG9vbCwgaW50IHR0bV9mbGFncywKIHN0YXRpYyBp
bnQgdHRtX3BhZ2VfcG9vbF9nZXRfcGFnZXMoc3RydWN0IHR0bV9wYWdlX3Bvb2wgKnBvb2wsCiAJ
CQkJICAgc3RydWN0IGxpc3RfaGVhZCAqcGFnZXMsCiAJCQkJICAgaW50IHR0bV9mbGFncywKLQkJ
CQkgICBlbnVtIHR0bV9jYWNoaW5nX3N0YXRlIGNzdGF0ZSwKKwkJCQkgICBlbnVtIHR0bV9jYWNo
aW5nIGNzdGF0ZSwKIAkJCQkgICB1bnNpZ25lZCBjb3VudCwgdW5zaWduZWQgb3JkZXIpCiB7CiAJ
dW5zaWduZWQgbG9uZyBpcnFfZmxhZ3M7CkBAIC03MDMsNyArNzAzLDcgQEAgc3RhdGljIGludCB0
dG1fcGFnZV9wb29sX2dldF9wYWdlcyhzdHJ1Y3QgdHRtX3BhZ2VfcG9vbCAqcG9vbCwKIAogLyog
UHV0IGFsbCBwYWdlcyBpbiBwYWdlcyBsaXN0IHRvIGNvcnJlY3QgcG9vbCB0byB3YWl0IGZvciBy
ZXVzZSAqLwogc3RhdGljIHZvaWQgdHRtX3B1dF9wYWdlcyhzdHJ1Y3QgcGFnZSAqKnBhZ2VzLCB1
bnNpZ25lZCBucGFnZXMsIGludCBmbGFncywKLQkJCSAgZW51bSB0dG1fY2FjaGluZ19zdGF0ZSBj
c3RhdGUpCisJCQkgIGVudW0gdHRtX2NhY2hpbmcgY3N0YXRlKQogewogCXN0cnVjdCB0dG1fcGFn
ZV9wb29sICpwb29sID0gdHRtX2dldF9wb29sKGZsYWdzLCBmYWxzZSwgY3N0YXRlKTsKICNpZmRl
ZiBDT05GSUdfVFJBTlNQQVJFTlRfSFVHRVBBR0UKQEAgLTgyMSw3ICs4MjEsNyBAQCBzdGF0aWMg
dm9pZCB0dG1fcHV0X3BhZ2VzKHN0cnVjdCBwYWdlICoqcGFnZXMsIHVuc2lnbmVkIG5wYWdlcywg
aW50IGZsYWdzLAogICogY2FjaGVkIHBhZ2VzLgogICovCiBzdGF0aWMgaW50IHR0bV9nZXRfcGFn
ZXMoc3RydWN0IHBhZ2UgKipwYWdlcywgdW5zaWduZWQgbnBhZ2VzLCBpbnQgZmxhZ3MsCi0JCQkg
ZW51bSB0dG1fY2FjaGluZ19zdGF0ZSBjc3RhdGUpCisJCQkgZW51bSB0dG1fY2FjaGluZyBjc3Rh
dGUpCiB7CiAJc3RydWN0IHR0bV9wYWdlX3Bvb2wgKnBvb2wgPSB0dG1fZ2V0X3Bvb2woZmxhZ3Ms
IGZhbHNlLCBjc3RhdGUpOwogI2lmZGVmIENPTkZJR19UUkFOU1BBUkVOVF9IVUdFUEFHRQpAQCAt
MTA0MCw3ICsxMDQwLDcgQEAgdHRtX3Bvb2xfdW5wb3B1bGF0ZV9oZWxwZXIoc3RydWN0IHR0bV90
dCAqdHRtLCB1bnNpZ25lZCBtZW1fY291bnRfdXBkYXRlKQogCiBwdXRfcGFnZXM6CiAJdHRtX3B1
dF9wYWdlcyh0dG0tPnBhZ2VzLCB0dG0tPm51bV9wYWdlcywgdHRtLT5wYWdlX2ZsYWdzLAotCQkg
ICAgICB0dG0tPmNhY2hpbmdfc3RhdGUpOworCQkgICAgICB0dG0tPmNhY2hpbmcpOwogCXR0bV90
dF9zZXRfdW5wb3B1bGF0ZWQodHRtKTsKIH0KIApAQCAtMTA1Nyw3ICsxMDU3LDcgQEAgaW50IHR0
bV9wb29sX3BvcHVsYXRlKHN0cnVjdCB0dG1fdHQgKnR0bSwgc3RydWN0IHR0bV9vcGVyYXRpb25f
Y3R4ICpjdHgpCiAJCXJldHVybiAtRU5PTUVNOwogCiAJcmV0ID0gdHRtX2dldF9wYWdlcyh0dG0t
PnBhZ2VzLCB0dG0tPm51bV9wYWdlcywgdHRtLT5wYWdlX2ZsYWdzLAotCQkJICAgIHR0bS0+Y2Fj
aGluZ19zdGF0ZSk7CisJCQkgICAgdHRtLT5jYWNoaW5nKTsKIAlpZiAodW5saWtlbHkocmV0ICE9
IDApKSB7CiAJCXR0bV9wb29sX3VucG9wdWxhdGVfaGVscGVyKHR0bSwgMCk7CiAJCXJldHVybiBy
ZXQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9wYWdlX2FsbG9jX2RtYS5j
IGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fcGFnZV9hbGxvY19kbWEuYwppbmRleCAxMDQ1YTVj
MjZlZTMuLjY2MjViNDNmNjI1NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1f
cGFnZV9hbGxvY19kbWEuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9wYWdlX2FsbG9j
X2RtYS5jCkBAIC0zMjUsMTUgKzMyNSwxNSBAQCBzdGF0aWMgc3RydWN0IGRtYV9wYWdlICpfX3R0
bV9kbWFfYWxsb2NfcGFnZShzdHJ1Y3QgZG1hX3Bvb2wgKnBvb2wpCiAJfQogCXJldHVybiBkX3Bh
Z2U7CiB9Ci1zdGF0aWMgZW51bSBwb29sX3R5cGUgdHRtX3RvX3R5cGUoaW50IGZsYWdzLCBlbnVt
IHR0bV9jYWNoaW5nX3N0YXRlIGNzdGF0ZSkKK3N0YXRpYyBlbnVtIHBvb2xfdHlwZSB0dG1fdG9f
dHlwZShpbnQgZmxhZ3MsIGVudW0gdHRtX2NhY2hpbmcgY3N0YXRlKQogewogCWVudW0gcG9vbF90
eXBlIHR5cGUgPSBJU19VTkRFRklORUQ7CiAKIAlpZiAoZmxhZ3MgJiBUVE1fUEFHRV9GTEFHX0RN
QTMyKQogCQl0eXBlIHw9IElTX0RNQTMyOwotCWlmIChjc3RhdGUgPT0gdHRfY2FjaGVkKQorCWlm
IChjc3RhdGUgPT0gdHRtX2NhY2hlZCkKIAkJdHlwZSB8PSBJU19DQUNIRUQ7Ci0JZWxzZSBpZiAo
Y3N0YXRlID09IHR0X3VuY2FjaGVkKQorCWVsc2UgaWYgKGNzdGF0ZSA9PSB0dG1fdW5jYWNoZWQp
CiAJCXR5cGUgfD0gSVNfVUM7CiAJZWxzZQogCQl0eXBlIHw9IElTX1dDOwpAQCAtNjYzLDcgKzY2
Myw3IEBAIHN0YXRpYyBzdHJ1Y3QgZG1hX3Bvb2wgKnR0bV9kbWFfZmluZF9wb29sKHN0cnVjdCBk
ZXZpY2UgKmRldiwKICAqIGFyZSBwYWdlcyB0aGF0IGhhdmUgY2hhbmdlZCB0aGVpciBjYWNoaW5n
IHN0YXRlIGFscmVhZHkgcHV0IHRoZW0gdG8gdGhlCiAgKiBwb29sLgogICovCi1zdGF0aWMgdm9p
ZCB0dG1fZG1hX2hhbmRsZV9jYWNoaW5nX3N0YXRlX2ZhaWx1cmUoc3RydWN0IGRtYV9wb29sICpw
b29sLAorc3RhdGljIHZvaWQgdHRtX2RtYV9oYW5kbGVfY2FjaGluZ19mYWlsdXJlKHN0cnVjdCBk
bWFfcG9vbCAqcG9vbCwKIAkJCQkJCSBzdHJ1Y3QgbGlzdF9oZWFkICpkX3BhZ2VzLAogCQkJCQkJ
IHN0cnVjdCBwYWdlICoqZmFpbGVkX3BhZ2VzLAogCQkJCQkJIHVuc2lnbmVkIGNwYWdlcykKQEAg
LTczNCw3ICs3MzQsNyBAQCBzdGF0aWMgaW50IHR0bV9kbWFfcG9vbF9hbGxvY19uZXdfcGFnZXMo
c3RydWN0IGRtYV9wb29sICpwb29sLAogCQkJCXIgPSB0dG1fc2V0X3BhZ2VzX2NhY2hpbmcocG9v
bCwgY2FjaGluZ19hcnJheSwKIAkJCQkJCQkgIGNwYWdlcyk7CiAJCQkJaWYgKHIpCi0JCQkJCXR0
bV9kbWFfaGFuZGxlX2NhY2hpbmdfc3RhdGVfZmFpbHVyZSgKKwkJCQkJdHRtX2RtYV9oYW5kbGVf
Y2FjaGluZ19mYWlsdXJlKAogCQkJCQkJcG9vbCwgZF9wYWdlcywgY2FjaGluZ19hcnJheSwKIAkJ
CQkJCWNwYWdlcyk7CiAJCQl9CkBAIC03NjAsNyArNzYwLDcgQEAgc3RhdGljIGludCB0dG1fZG1h
X3Bvb2xfYWxsb2NfbmV3X3BhZ2VzKHN0cnVjdCBkbWFfcG9vbCAqcG9vbCwKIAkJCQlyID0gdHRt
X3NldF9wYWdlc19jYWNoaW5nKHBvb2wsIGNhY2hpbmdfYXJyYXksCiAJCQkJCQkJICBjcGFnZXMp
OwogCQkJCWlmIChyKSB7Ci0JCQkJCXR0bV9kbWFfaGFuZGxlX2NhY2hpbmdfc3RhdGVfZmFpbHVy
ZSgKKwkJCQkJdHRtX2RtYV9oYW5kbGVfY2FjaGluZ19mYWlsdXJlKAogCQkJCQkgICAgIHBvb2ws
IGRfcGFnZXMsIGNhY2hpbmdfYXJyYXksCiAJCQkJCSAgICAgY3BhZ2VzKTsKIAkJCQkJZ290byBv
dXQ7CkBAIC03NzMsNyArNzczLDcgQEAgc3RhdGljIGludCB0dG1fZG1hX3Bvb2xfYWxsb2NfbmV3
X3BhZ2VzKHN0cnVjdCBkbWFfcG9vbCAqcG9vbCwKIAlpZiAoY3BhZ2VzKSB7CiAJCXIgPSB0dG1f
c2V0X3BhZ2VzX2NhY2hpbmcocG9vbCwgY2FjaGluZ19hcnJheSwgY3BhZ2VzKTsKIAkJaWYgKHIp
Ci0JCQl0dG1fZG1hX2hhbmRsZV9jYWNoaW5nX3N0YXRlX2ZhaWx1cmUocG9vbCwgZF9wYWdlcywK
KwkJCXR0bV9kbWFfaGFuZGxlX2NhY2hpbmdfZmFpbHVyZShwb29sLCBkX3BhZ2VzLAogCQkJCQlj
YWNoaW5nX2FycmF5LCBjcGFnZXMpOwogCX0KIG91dDoKQEAgLTkwNCw3ICs5MDQsNyBAQCBpbnQg
dHRtX2RtYV9wb3B1bGF0ZShzdHJ1Y3QgdHRtX2RtYV90dCAqdHRtX2RtYSwgc3RydWN0IGRldmlj
ZSAqZGV2LAogCUlOSVRfTElTVF9IRUFEKCZ0dG1fZG1hLT5wYWdlc19saXN0KTsKIAlpID0gMDsK
IAotCXR5cGUgPSB0dG1fdG9fdHlwZSh0dG0tPnBhZ2VfZmxhZ3MsIHR0bS0+Y2FjaGluZ19zdGF0
ZSk7CisJdHlwZSA9IHR0bV90b190eXBlKHR0bS0+cGFnZV9mbGFncywgdHRtLT5jYWNoaW5nKTsK
IAogI2lmZGVmIENPTkZJR19UUkFOU1BBUkVOVF9IVUdFUEFHRQogCWlmICh0dG0tPnBhZ2VfZmxh
Z3MgJiBUVE1fUEFHRV9GTEFHX0RNQTMyKQpAQCAtMTAwMCw3ICsxMDAwLDcgQEAgdm9pZCB0dG1f
ZG1hX3VucG9wdWxhdGUoc3RydWN0IHR0bV9kbWFfdHQgKnR0bV9kbWEsIHN0cnVjdCBkZXZpY2Ug
KmRldikKIAl1bnNpZ25lZCBjb3VudCwgaSwgbnBhZ2VzID0gMDsKIAl1bnNpZ25lZCBsb25nIGly
cV9mbGFnczsKIAotCXR5cGUgPSB0dG1fdG9fdHlwZSh0dG0tPnBhZ2VfZmxhZ3MsIHR0bS0+Y2Fj
aGluZ19zdGF0ZSk7CisJdHlwZSA9IHR0bV90b190eXBlKHR0bS0+cGFnZV9mbGFncywgdHRtLT5j
YWNoaW5nKTsKIAogI2lmZGVmIENPTkZJR19UUkFOU1BBUkVOVF9IVUdFUEFHRQogCXBvb2wgPSB0
dG1fZG1hX2ZpbmRfcG9vbChkZXYsIHR5cGUgfCBJU19IVUdFKTsKQEAgLTEwMzIsNyArMTAzMiw3
IEBAIHZvaWQgdHRtX2RtYV91bnBvcHVsYXRlKHN0cnVjdCB0dG1fZG1hX3R0ICp0dG1fZG1hLCBz
dHJ1Y3QgZGV2aWNlICpkZXYpCiAJCXJldHVybjsKIAogCWlzX2NhY2hlZCA9ICh0dG1fZG1hX2Zp
bmRfcG9vbChwb29sLT5kZXYsCi0JCSAgICAgdHRtX3RvX3R5cGUodHRtLT5wYWdlX2ZsYWdzLCB0
dF9jYWNoZWQpKSA9PSBwb29sKTsKKwkJICAgICB0dG1fdG9fdHlwZSh0dG0tPnBhZ2VfZmxhZ3Ms
IHR0bV9jYWNoZWQpKSA9PSBwb29sKTsKIAogCS8qIG1ha2Ugc3VyZSBwYWdlcyBhcnJheSBtYXRj
aCBsaXN0IGFuZCBjb3VudCBudW1iZXIgb2YgcGFnZXMgKi8KIAljb3VudCA9IDA7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90dC5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90
dG1fdHQuYwppbmRleCAyM2U5NjA0YmM5MjQuLmQ0YzgwZTBmM2IzYiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL3R0bS90dG1fdHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90
dC5jCkBAIC0xMTQsMzEgKzExNCwzMCBAQCBzdGF0aWMgaW50IHR0bV9zZ190dF9hbGxvY19wYWdl
X2RpcmVjdG9yeShzdHJ1Y3QgdHRtX2RtYV90dCAqdHRtKQogCXJldHVybiAwOwogfQogCi1zdGF0
aWMgaW50IHR0bV90dF9zZXRfY2FjaGluZyhzdHJ1Y3QgdHRtX3R0ICp0dG0sCi0JCQkgICAgICBl
bnVtIHR0bV9jYWNoaW5nX3N0YXRlIGNfc3RhdGUpCitzdGF0aWMgaW50IHR0bV90dF9zZXRfY2Fj
aGluZyhzdHJ1Y3QgdHRtX3R0ICp0dG0sIGVudW0gdHRtX2NhY2hpbmcgY2FjaGluZykKIHsKLQlp
ZiAodHRtLT5jYWNoaW5nX3N0YXRlID09IGNfc3RhdGUpCisJaWYgKHR0bS0+Y2FjaGluZyA9PSBj
YWNoaW5nKQogCQlyZXR1cm4gMDsKIAogCS8qIENhbid0IGNoYW5nZSB0aGUgY2FjaGluZyBzdGF0
ZSBhZnRlciBUVCBpcyBwb3B1bGF0ZWQgKi8KIAlpZiAoV0FSTl9PTl9PTkNFKHR0bV90dF9pc19w
b3B1bGF0ZWQodHRtKSkpCiAJCXJldHVybiAtRUlOVkFMOwogCi0JdHRtLT5jYWNoaW5nX3N0YXRl
ID0gY19zdGF0ZTsKKwl0dG0tPmNhY2hpbmcgPSBjYWNoaW5nOwogCiAJcmV0dXJuIDA7CiB9CiAK
IGludCB0dG1fdHRfc2V0X3BsYWNlbWVudF9jYWNoaW5nKHN0cnVjdCB0dG1fdHQgKnR0bSwgdWlu
dDMyX3QgcGxhY2VtZW50KQogewotCWVudW0gdHRtX2NhY2hpbmdfc3RhdGUgc3RhdGU7CisJZW51
bSB0dG1fY2FjaGluZyBzdGF0ZTsKIAogCWlmIChwbGFjZW1lbnQgJiBUVE1fUExfRkxBR19XQykK
LQkJc3RhdGUgPSB0dF93YzsKKwkJc3RhdGUgPSB0dG1fd3JpdGVfY29tYmluZWQ7CiAJZWxzZSBp
ZiAocGxhY2VtZW50ICYgVFRNX1BMX0ZMQUdfVU5DQUNIRUQpCi0JCXN0YXRlID0gdHRfdW5jYWNo
ZWQ7CisJCXN0YXRlID0gdHRtX3VuY2FjaGVkOwogCWVsc2UKLQkJc3RhdGUgPSB0dF9jYWNoZWQ7
CisJCXN0YXRlID0gdHRtX2NhY2hlZDsKIAogCXJldHVybiB0dG1fdHRfc2V0X2NhY2hpbmcodHRt
LCBzdGF0ZSk7CiB9CkBAIC0xNjUsNyArMTY0LDcgQEAgc3RhdGljIHZvaWQgdHRtX3R0X2luaXRf
ZmllbGRzKHN0cnVjdCB0dG1fdHQgKnR0bSwKIAkJCSAgICAgICB1aW50MzJfdCBwYWdlX2ZsYWdz
KQogewogCXR0bS0+bnVtX3BhZ2VzID0gYm8tPm51bV9wYWdlczsKLQl0dG0tPmNhY2hpbmdfc3Rh
dGUgPSB0dF9jYWNoZWQ7CisJdHRtLT5jYWNoaW5nID0gdHRtX2NhY2hlZDsKIAl0dG0tPnBhZ2Vf
ZmxhZ3MgPSBwYWdlX2ZsYWdzOwogCXR0bV90dF9zZXRfdW5wb3B1bGF0ZWQodHRtKTsKIAl0dG0t
PnN3YXBfc3RvcmFnZSA9IE5VTEw7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS90dG0vdHRtX2Nh
Y2hpbmcuaCBiL2luY2x1ZGUvZHJtL3R0bS90dG1fY2FjaGluZy5oCm5ldyBmaWxlIG1vZGUgMTAw
NjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uMTYxNjI0ZGNmNmJlCi0tLSAvZGV2L251bGwKKysrIGIv
aW5jbHVkZS9kcm0vdHRtL3R0bV9jYWNoaW5nLmgKQEAgLTAsMCArMSwzNCBAQAorLyoKKyAqIENv
cHlyaWdodCAyMDIwIEFkdmFuY2VkIE1pY3JvIERldmljZXMsIEluYy4KKyAqCisgKiBQZXJtaXNz
aW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRh
aW5pbmcgYQorICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50
YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwKKyAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJl
IHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24KKyAqIHRo
ZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRl
LCBzdWJsaWNlbnNlLAorICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5k
IHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlCisgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQg
dG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgorICoKKyAqIFRo
ZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxs
IGJlIGluY2x1ZGVkIGluCisgKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9m
IHRoZSBTb2Z0d2FyZS4KKyAqCisgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwg
V0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgorICogSU1QTElFRCwgSU5D
TFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJ
VFksCisgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VN
RU5ULiAgSU4gTk8gRVZFTlQgU0hBTEwKKyAqIFRIRSBDT1BZUklHSFQgSE9MREVSKFMpIE9SIEFV
VEhPUihTKSBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUgorICogT1RIRVIgTElB
QklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJ
U0UsCisgKiBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNP
RlRXQVJFIE9SIFRIRSBVU0UgT1IKKyAqIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4K
KyAqCisgKiBBdXRob3JzOiBDaHJpc3RpYW4gS8O2bmlnCisgKi8KKworI2lmbmRlZiBfVFRNX0NB
Q0hJTkdfSF8KKyNkZWZpbmUgX1RUTV9DQUNISU5HX0hfCisKK2VudW0gdHRtX2NhY2hpbmcgewor
CXR0bV91bmNhY2hlZCwKKwl0dG1fd3JpdGVfY29tYmluZWQsCisJdHRtX2NhY2hlZAorfTsKKwor
I2VuZGlmCmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS90dG0vdHRtX3R0LmggYi9pbmNsdWRlL2Ry
bS90dG0vdHRtX3R0LmgKaW5kZXggNWQxODM1ZDQ0MDg0Li5iOTBjOGM0NTFhNTQgMTAwNjQ0Ci0t
LSBhL2luY2x1ZGUvZHJtL3R0bS90dG1fdHQuaAorKysgYi9pbmNsdWRlL2RybS90dG0vdHRtX3R0
LmgKQEAgLTI4LDYgKzI4LDcgQEAKICNkZWZpbmUgX1RUTV9UVF9IXwogCiAjaW5jbHVkZSA8bGlu
dXgvdHlwZXMuaD4KKyNpbmNsdWRlIDxkcm0vdHRtL3R0bV9jYWNoaW5nLmg+CiAKIHN0cnVjdCB0
dG1fdHQ7CiBzdHJ1Y3QgdHRtX3Jlc291cmNlOwpAQCAtNDIsMTIgKzQzLDYgQEAgc3RydWN0IHR0
bV9vcGVyYXRpb25fY3R4OwogCiAjZGVmaW5lIFRUTV9QQUdFX0ZMQUdfUFJJVl9QT1BVTEFURUQg
ICgxIDw8IDMxKQogCi1lbnVtIHR0bV9jYWNoaW5nX3N0YXRlIHsKLQl0dF91bmNhY2hlZCwKLQl0
dF93YywKLQl0dF9jYWNoZWQKLX07Ci0KIC8qKgogICogc3RydWN0IHR0bV90dAogICoKQEAgLTY5
LDcgKzY0LDcgQEAgc3RydWN0IHR0bV90dCB7CiAJdW5zaWduZWQgbG9uZyBudW1fcGFnZXM7CiAJ
c3RydWN0IHNnX3RhYmxlICpzZzsgLyogZm9yIFNHIG9iamVjdHMgdmlhIGRtYS1idWYgKi8KIAlz
dHJ1Y3QgZmlsZSAqc3dhcF9zdG9yYWdlOwotCWVudW0gdHRtX2NhY2hpbmdfc3RhdGUgY2FjaGlu
Z19zdGF0ZTsKKwllbnVtIHR0bV9jYWNoaW5nIGNhY2hpbmc7CiB9OwogCiBzdGF0aWMgaW5saW5l
IGJvb2wgdHRtX3R0X2lzX3BvcHVsYXRlZChzdHJ1Y3QgdHRtX3R0ICp0dCkKLS0gCjIuMTcuMQoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVs
IG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
