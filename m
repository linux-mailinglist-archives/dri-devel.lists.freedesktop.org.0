Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 37A4B36800C
	for <lists+dri-devel@lfdr.de>; Thu, 22 Apr 2021 14:07:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3B6A26E1F8;
	Thu, 22 Apr 2021 12:07:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x436.google.com (mail-wr1-x436.google.com
 [IPv6:2a00:1450:4864:20::436])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8FE896E1F8
 for <dri-devel@lists.freedesktop.org>; Thu, 22 Apr 2021 12:07:07 +0000 (UTC)
Received: by mail-wr1-x436.google.com with SMTP id h4so35502324wrt.12
 for <dri-devel@lists.freedesktop.org>; Thu, 22 Apr 2021 05:07:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=baylibre-com.20150623.gappssmtp.com; s=20150623;
 h=subject:to:cc:references:from:organization:message-id:date
 :user-agent:mime-version:in-reply-to:content-language
 :content-transfer-encoding;
 bh=jhpmYTg4Vp1LA+W35IrfrjHI/xFsmZ2K+o/m22RJAh0=;
 b=I4EVfUDwG6tP/g+tDNNNvRZX+z1HoktzTyRPsYZhGx3dL2jZC+BvVi5UDRI1nzzZev
 jbQ+Zbvvnd2evsfTandf0RwP0/rxByagLLwUCbxYnaYwhHlQTr0rfA5o6rl5UDBmcVO4
 ID4UieIx7envlEfMeg7YLfH3aXbtS1sqsT09K/kp2RpUjeM14fV2Xim9XRHQ+5tLTICj
 CSWPswWmNIZKwcN/P4fYF5S/0jnjqsc8WKULl98daJZXMFxftHeigQ1vpLjh9TzQcuRy
 ebwbG8saRt7VK5Ljp0xOXCg7vQpbrrl0vBbNvntRcGXCMIuAubfRch4WDjuq3o0dtYSs
 slhQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:organization
 :message-id:date:user-agent:mime-version:in-reply-to
 :content-language:content-transfer-encoding;
 bh=jhpmYTg4Vp1LA+W35IrfrjHI/xFsmZ2K+o/m22RJAh0=;
 b=gJ5Vfn8NEAyZk5rblsMi0pVHgemcHWPBejWHEH7p/Zt3oFrzs7zNXMKWpKKhB1vADK
 FQND4zVCC5WCjfeqFGo6RoZjF2qDwIr90l1jWrHqJG4pLMAlZxXYfnsBGkF3w5CUuKb9
 Or5KLuiabn/dOmv7K7iG2WVqU2RI2H8CwcdfwPDuTTWBj6SMTHy6qy1eFuBNWGWnCodA
 9DAx1NZUU8+ldBPF3vmB+ZJycnfO7imCKzLEwIfciUVv96IvDJgS60uyRqslSvBtiPPF
 jIELTYxBA9Yi70niV1V5LDERbAAd1vDwzuODLJ2GG7i9Ly5SQhVVLRfCuURU1yBbqfsC
 HHRQ==
X-Gm-Message-State: AOAM530se8vKtDfv1WUQ5R6Jt8jrlOvmBLT6iZiLkNQxh3DBVgP926uv
 wCU4blA88uMugFaisgtAhacjQg==
X-Google-Smtp-Source: ABdhPJxKV4nRhgozkIzL0OgqkoJfaQIrmU05LEiL/estxrSrhr0s6lCR+8/jyaEeBARScjFTNYZagw==
X-Received: by 2002:a5d:6e06:: with SMTP id h6mr3731212wrz.201.1619093226139; 
 Thu, 22 Apr 2021 05:07:06 -0700 (PDT)
Received: from [10.1.3.29] (laubervilliers-658-1-213-31.w90-63.abo.wanadoo.fr.
 [90.63.244.31])
 by smtp.gmail.com with ESMTPSA id g3sm3289419wrp.46.2021.04.22.05.07.05
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Thu, 22 Apr 2021 05:07:05 -0700 (PDT)
Subject: Re: [PATCH v2] drm/bridge: nwl-dsi: Get MIPI DSI controller and PHY
 ready in ->mode_set()
To: Liu Ying <victor.liu@nxp.com>, dri-devel@lists.freedesktop.org
References: <1619068455-1932-1-git-send-email-victor.liu@nxp.com>
 <36441ffb-2a79-f965-efc8-042844bc349d@baylibre.com>
 <460bdf3547942fdca82a19e164162187917e4d57.camel@nxp.com>
From: Neil Armstrong <narmstrong@baylibre.com>
Organization: Baylibre
Message-ID: <178556dc-a011-e1e6-4147-dbf584672d32@baylibre.com>
Date: Thu, 22 Apr 2021 14:07:04 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.7.1
MIME-Version: 1.0
In-Reply-To: <460bdf3547942fdca82a19e164162187917e4d57.camel@nxp.com>
Content-Language: en-US
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jernej Skrabec <jernej.skrabec@siol.net>, Jonas Karlman <jonas@kwiboo.se>,
 David Airlie <airlied@linux.ie>,
 =?UTF-8?Q?Guido_G=c3=bcnther?= <agx@sigxcpu.org>, linux-kernel@vger.kernel.org,
 Robert Foss <robert.foss@linaro.org>, Andrzej Hajda <a.hajda@samsung.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Robert Chiras <robert.chiras@nxp.com>, NXP Linux Team <linux-imx@nxp.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGksCgpPbiAyMi8wNC8yMDIxIDExOjMxLCBMaXUgWWluZyB3cm90ZToKPiBIaSBOZWlsLAo+IAo+
IE9uIFRodSwgMjAyMS0wNC0yMiBhdCAxMDo0OCArMDIwMCwgTmVpbCBBcm1zdHJvbmcgd3JvdGU6
Cj4+IEhpLAo+Pgo+PiBPbiAyMi8wNC8yMDIxIDA3OjE0LCBMaXUgWWluZyB3cm90ZToKPj4+IFNv
bWUgTUlQSSBEU0kgcGFuZWwgZHJpdmVycyBsaWtlICdyYXlkaXVtLHJtNjgyMDAnIHNlbmQKPj4+
IE1JUElfRENTX1NFVF9ESVNQTEFZX09OIGNvbW1hbmRzIGluIHBhbmVsX2Z1bmNzLT5wcmVwYXJl
KCksIHdoaWNoCj4+PiByZXF1aXJlcyB0aGUgTUlQSSBEU0kgY29udHJvbGxlciBhbmQgUEhZIHRv
IGJlIHJlYWR5IGJlZm9yZWhhbmQuCj4+PiBXaXRob3V0IHRoaXMgcGF0Y2gsIHRoZSBud2wtZHNp
IGRyaXZlciBnZXRzIHRoZSBNSVBJIERTSSBjb250cm9sbGVyCj4+PiBhbmQgUEhZIHJlYWR5IGlu
IGJyaWRnZV9mdW5jcy0+cHJlX2VuYWJsZSgpLCB3aGljaCBoYXBwZW5zIGFmdGVyCj4+PiB0aGUg
cGFuZWxfZnVuY3MtPnByZXBhcmUoKS4gU28sIHRoaXMgcGF0Y2ggc2hpZnRzIHRoZSBicmlkZ2Ug
b3BlcmF0aW9uCj4+PiBlYWxpZXIgZnJvbSBicmlkZ2VfZnVuY3MtPnByZV9lbmFibGUoKSB0byBi
cmlkZ2VfZnVuY3MtPm1vZGVfc2V0KCkuCj4+Cj4+IFRoaXMgbWFrZXMgc2Vuc2UsIHRoaXMgaXMg
aG93IHdlIGRvIG9uIHRoZSBzeW5vcHN5cyBkdyBtaXBpIGRzaSBkcml2ZXIuCj4+Cj4+PiBUaGlz
IHdheSwgbW9yZSBNSVBJIERTSSBwYW5lbHMgY2FuIGNvbm5lY3QgdG8gdGhpcyBud2wtZHNpIGJy
aWRnZS4KPj4+IENhcmUgaXMgdGFrZW4gdG8gbWFrZSBzdXJlIGJyaWRnZV9mdW5jcy0+bW9kZV9z
ZXQoKS9hdG9taWNfZGlzYWJsZSgpCj4+PiBhcmUgY2FsbGVkIGluIHBhaXJzLCB3aGljaCBpbmNs
dWRlcyByZW1vdmluZyBhIGNoZWNrIG9uIHVuY2hhbmdlZCBIUwo+Pj4gY2xvY2sgcmF0ZSBhbmQg
Zm9yY2luZyBhIGZ1bGwgbW9kZXNldCB3aGVuIG9ubHkgY29ubmVjdG9yJ3MgRFBNUyBpcwo+Pj4g
YnJvdWdodCBvdXQgb2YgIk9mZiIgc3RhdHVzLgo+Pgo+PiBJIHdvdWxkIHNwbGl0IHRoZSBjaGFu
Z2VzIGluIG11bHRpcGxlIHBhdGNoZXMgdG8gY2xhcmlmeSB0aGUgY2hhbmdlcy4KPiAKPiBNYXli
ZSwgSSBjYW4gc3BsaXQgdGhpcyBpbnRvIHRoZSBiZWxvdyAzIHBhdGNoZXM6Cj4gMSkgUmVtb3Zl
IGEgY2hlY2sgb24gdW5jaGFuZ2VkIEhTIGNsb2NrIHJhdGUgZnJvbSAtPm1vZGVfc2V0KCkuCj4g
MikgRm9yY2UgYSBmdWxsIG1vZGVzZXQgd2hlbiBvbmx5IGNvbm5lY3RvcidzIERQTVMgaXMgYnJv
dWdodCBvdXQgb2YKPiAiT2ZmIiBzdGF0dXMuIFRoaXMgd2lsbCBiZSBkb25lIGluIC0+YXRvbWlj
X2NoZWNrKCkgdG9nZXRoZXIgd2l0aCB0aGUKPiBmaXh1cCBmb3IgSC9WU1lOQyBwb2xhcml0aWVz
Lgo+IDMpIFNoaWZ0IHRoZSBicmlkZ2Ugb3BlcmF0aW9uIGFzIHRoZSBsYXN0IHN0ZXAuCj4gCj4g
SSdsbCBtZW50aW9uIHRoYXQgMSkgJiAyKSBhcmUgbmVlZGVkIGJ5IDMpIGluIHRoZWlyIGNvbW1p
dCBtZXNzYWdlLgoKU3VyZSwgeW91IGNhbiBhbHNvIHB1dCB0aGlzIHNwbGl0IGV4cGxhbmF0aW9u
IGluIHRoZSBjb3ZlciBsZXR0ZXIuCgo+IAo+IERvZXMgdGhpcyBzcGxpdC11cCBzb3VuZCByZWFz
b25hYmxlPwoKWWVzIG1ha2VzIHNlbnNlLCB0aGFua3MKCk5laWwKCj4gCj4gVGhhbmtzLAo+IExp
dSBZaW5nCj4gCj4+Cj4+IE5laWwKPj4KPj4+IENjOiBBbmRyemVqIEhhamRhIDxhLmhhamRhQHNh
bXN1bmcuY29tPgo+Pj4gQ2M6IE5laWwgQXJtc3Ryb25nIDxuYXJtc3Ryb25nQGJheWxpYnJlLmNv
bT4KPj4+IENjOiBSb2JlcnQgRm9zcyA8cm9iZXJ0LmZvc3NAbGluYXJvLm9yZz4KPj4+IENjOiBM
YXVyZW50IFBpbmNoYXJ0IDxMYXVyZW50LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+Cj4+PiBD
YzogSm9uYXMgS2FybG1hbiA8am9uYXNAa3dpYm9vLnNlPgo+Pj4gQ2M6IEplcm5laiBTa3JhYmVj
IDxqZXJuZWouc2tyYWJlY0BzaW9sLm5ldD4KPj4+IENjOiBEYXZpZCBBaXJsaWUgPGFpcmxpZWRA
bGludXguaWU+Cj4+PiBDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xsLmNoPgo+Pj4gQ2M6
IEd1aWRvIEfDvG50aGVyIDxhZ3hAc2lneGNwdS5vcmc+Cj4+PiBDYzogUm9iZXJ0IENoaXJhcyA8
cm9iZXJ0LmNoaXJhc0BueHAuY29tPgo+Pj4gQ2M6IE5YUCBMaW51eCBUZWFtIDxsaW51eC1pbXhA
bnhwLmNvbT4KPj4+IFNpZ25lZC1vZmYtYnk6IExpdSBZaW5nIDx2aWN0b3IubGl1QG54cC5jb20+
Cj4+PiAtLS0KPj4+IHYxLT52MjoKPj4+ICogRml4IGNvbW1pdCBtZXNzYWdlIHR5cG8gLSBzL3Vu
Y2hhbmdlL3VuY2hhbmdlZC8KPj4+Cj4+PiAgZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNp
LmMgfCA4NiArKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tLS0tCj4+PiAgMSBm
aWxlIGNoYW5nZWQsIDQ2IGluc2VydGlvbnMoKyksIDQwIGRlbGV0aW9ucygtKQo+Pj4KPj4+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL253bC1kc2kuYyBiL2RyaXZlcnMvZ3B1
L2RybS9icmlkZ2UvbndsLWRzaS5jCj4+PiBpbmRleCBiZTZiZmM1Li4yMjlmMGIxIDEwMDY0NAo+
Pj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9ud2wtZHNpLmMKPj4+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS9icmlkZ2UvbndsLWRzaS5jCj4+PiBAQCAtMjEsNiArMjEsNyBAQAo+Pj4gICNp
bmNsdWRlIDxsaW51eC9zeXNfc29jLmg+Cj4+PiAgI2luY2x1ZGUgPGxpbnV4L3RpbWU2NC5oPgo+
Pj4gIAo+Pj4gKyNpbmNsdWRlIDxkcm0vZHJtX2F0b21pY19zdGF0ZV9oZWxwZXIuaD4KPj4+ICAj
aW5jbHVkZSA8ZHJtL2RybV9icmlkZ2UuaD4KPj4+ICAjaW5jbHVkZSA8ZHJtL2RybV9taXBpX2Rz
aS5oPgo+Pj4gICNpbmNsdWRlIDxkcm0vZHJtX29mLmg+Cj4+PiBAQCAtNjYxLDcgKzY2Miw3IEBA
IHN0YXRpYyBpcnFyZXR1cm5fdCBud2xfZHNpX2lycV9oYW5kbGVyKGludCBpcnEsIHZvaWQgKmRh
dGEpCj4+PiAgCXJldHVybiBJUlFfSEFORExFRDsKPj4+ICB9Cj4+PiAgCj4+PiAtc3RhdGljIGlu
dCBud2xfZHNpX2VuYWJsZShzdHJ1Y3QgbndsX2RzaSAqZHNpKQo+Pj4gK3N0YXRpYyBpbnQgbnds
X2RzaV9tb2RlX3NldChzdHJ1Y3QgbndsX2RzaSAqZHNpKQo+Pj4gIHsKPj4+ICAJc3RydWN0IGRl
dmljZSAqZGV2ID0gZHNpLT5kZXY7Cj4+PiAgCXVuaW9uIHBoeV9jb25maWd1cmVfb3B0cyAqcGh5
X2NmZyA9ICZkc2ktPnBoeV9jZmc7Cj4+PiBAQCAtNzQ4LDcgKzc0OSw5IEBAIHN0YXRpYyBpbnQg
bndsX2RzaV9kaXNhYmxlKHN0cnVjdCBud2xfZHNpICpkc2kpCj4+PiAgCXJldHVybiAwOwo+Pj4g
IH0KPj4+ICAKPj4+IC1zdGF0aWMgdm9pZCBud2xfZHNpX2JyaWRnZV9kaXNhYmxlKHN0cnVjdCBk
cm1fYnJpZGdlICpicmlkZ2UpCj4+PiArc3RhdGljIHZvaWQKPj4+ICtud2xfZHNpX2JyaWRnZV9h
dG9taWNfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAo+Pj4gKwkJCSAgICAgIHN0
cnVjdCBkcm1fYnJpZGdlX3N0YXRlICpvbGRfYnJpZGdlX3N0YXRlKQo+Pj4gIHsKPj4+ICAJc3Ry
dWN0IG53bF9kc2kgKmRzaSA9IGJyaWRnZV90b19kc2koYnJpZGdlKTsKPj4+ICAJaW50IHJldDsK
Pj4+IEBAIC04MDksMTcgKzgxMiw2IEBAIHN0YXRpYyBpbnQgbndsX2RzaV9nZXRfZHBoeV9wYXJh
bXMoc3RydWN0IG53bF9kc2kgKmRzaSwKPj4+ICAJcmV0dXJuIDA7Cj4+PiAgfQo+Pj4gIAo+Pj4g
LXN0YXRpYyBib29sIG53bF9kc2lfYnJpZGdlX21vZGVfZml4dXAoc3RydWN0IGRybV9icmlkZ2Ug
KmJyaWRnZSwKPj4+IC0JCQkJICAgICAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1v
ZGUsCj4+PiAtCQkJCSAgICAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2Rl
KQo+Pj4gLXsKPj4+IC0JLyogQXQgbGVhc3QgTENESUYgKyBOV0wgbmVlZHMgYWN0aXZlIGhpZ2gg
c3luYyAqLwo+Pj4gLQlhZGp1c3RlZF9tb2RlLT5mbGFncyB8PSAoRFJNX01PREVfRkxBR19QSFNZ
TkMgfCBEUk1fTU9ERV9GTEFHX1BWU1lOQyk7Cj4+PiAtCWFkanVzdGVkX21vZGUtPmZsYWdzICY9
IH4oRFJNX01PREVfRkxBR19OSFNZTkMgfCBEUk1fTU9ERV9GTEFHX05WU1lOQyk7Cj4+PiAtCj4+
PiAtCXJldHVybiB0cnVlOwo+Pj4gLX0KPj4+IC0KPj4+ICBzdGF0aWMgZW51bSBkcm1fbW9kZV9z
dGF0dXMKPj4+ICBud2xfZHNpX2JyaWRnZV9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fYnJpZGdlICpi
cmlkZ2UsCj4+PiAgCQkJICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfaW5mbyAqaW5mbywKPj4+
IEBAIC04MzcsNiArODI5LDI5IEBAIG53bF9kc2lfYnJpZGdlX21vZGVfdmFsaWQoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSwKPj4+ICAJcmV0dXJuIE1PREVfT0s7Cj4+PiAgfQo+Pj4gIAo+Pj4g
K3N0YXRpYyBpbnQgbndsX2RzaV9icmlkZ2VfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fYnJpZGdl
ICpicmlkZ2UsCj4+PiArCQkJCSAgICAgICBzdHJ1Y3QgZHJtX2JyaWRnZV9zdGF0ZSAqYnJpZGdl
X3N0YXRlLAo+Pj4gKwkJCQkgICAgICAgc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
LAo+Pj4gKwkJCQkgICAgICAgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGUp
Cj4+PiArewo+Pj4gKwlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSA9ICZj
cnRjX3N0YXRlLT5hZGp1c3RlZF9tb2RlOwo+Pj4gKwo+Pj4gKwkvKiBBdCBsZWFzdCBMQ0RJRiAr
IE5XTCBuZWVkcyBhY3RpdmUgaGlnaCBzeW5jICovCj4+PiArCWFkanVzdGVkX21vZGUtPmZsYWdz
IHw9IChEUk1fTU9ERV9GTEFHX1BIU1lOQyB8IERSTV9NT0RFX0ZMQUdfUFZTWU5DKTsKPj4+ICsJ
YWRqdXN0ZWRfbW9kZS0+ZmxhZ3MgJj0gfihEUk1fTU9ERV9GTEFHX05IU1lOQyB8IERSTV9NT0RF
X0ZMQUdfTlZTWU5DKTsKPj4+ICsKPj4+ICsJLyoKPj4+ICsJICogRG8gYSBmdWxsIG1vZGVzZXQg
aWYgY3J0Y19zdGF0ZS0+YWN0aXZlIGlzIGNoYW5nZWQgdG8gYmUgdHJ1ZS4KPj4+ICsJICogVGhp
cyBlbnN1cmVzIG91ciAtPm1vZGVfc2V0KCkgaXMgY2FsbGVkIHRvIGdldCB0aGUgRFNJIGNvbnRy
b2xsZXIKPj4+ICsJICogYW5kIHRoZSBQSFkgcmVhZHkgdG8gc2VuZCBEQ1MgY29tbWFuZHMsIHdo
ZW4gb25seSB0aGUgY29ubmVjdG9yJ3MKPj4+ICsJICogRFBNUyBpcyBicm91Z2h0IG91dCBvZiAi
T2ZmIiBzdGF0dXMuCj4+PiArCSAqLwo+Pj4gKwlpZiAoY3J0Y19zdGF0ZS0+YWN0aXZlX2NoYW5n
ZWQgJiYgY3J0Y19zdGF0ZS0+YWN0aXZlKQo+Pj4gKwkJY3J0Y19zdGF0ZS0+bW9kZV9jaGFuZ2Vk
ID0gdHJ1ZTsKPj4+ICsKPj4+ICsJcmV0dXJuIDA7Cj4+PiArfQo+Pj4gKwo+Pj4gIHN0YXRpYyB2
b2lkCj4+PiAgbndsX2RzaV9icmlkZ2VfbW9kZV9zZXQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSwKPj4+ICAJCQljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwKPj4+IEBAIC04
NTIsMTMgKzg2Nyw2IEBAIG53bF9kc2lfYnJpZGdlX21vZGVfc2V0KHN0cnVjdCBkcm1fYnJpZGdl
ICpicmlkZ2UsCj4+PiAgCWlmIChyZXQgPCAwKQo+Pj4gIAkJcmV0dXJuOwo+Pj4gIAo+Pj4gLQkv
Kgo+Pj4gLQkgKiBJZiBocyBjbG9jayBpcyB1bmNoYW5nZWQsIHdlJ3JlIGFsbCBnb29kIC0gYWxs
IHBhcmFtZXRlcnMgYXJlCj4+PiAtCSAqIGRlcml2ZWQgZnJvbSBpdCBhdG0uCj4+PiAtCSAqLwo+
Pj4gLQlpZiAobmV3X2NmZy5taXBpX2RwaHkuaHNfY2xrX3JhdGUgPT0gZHNpLT5waHlfY2ZnLm1p
cGlfZHBoeS5oc19jbGtfcmF0ZSkKPj4+IC0JCXJldHVybjsKPj4+IC0KPj4+ICAJcGh5X3JlZl9y
YXRlID0gY2xrX2dldF9yYXRlKGRzaS0+cGh5X3JlZl9jbGspOwo+Pj4gIAlEUk1fREVWX0RFQlVH
X0RSSVZFUihkZXYsICJQSFkgYXQgcmVmIHJhdGU6ICVsdVxuIiwgcGh5X3JlZl9yYXRlKTsKPj4+
ICAJLyogU2F2ZSB0aGUgbmV3IGRlc2lyZWQgcGh5IGNvbmZpZyAqLwo+Pj4gQEAgLTg2NiwxNCAr
ODc0LDggQEAgbndsX2RzaV9icmlkZ2VfbW9kZV9zZXQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSwKPj4+ICAKPj4+ICAJbWVtY3B5KCZkc2ktPm1vZGUsIGFkanVzdGVkX21vZGUsIHNpemVvZihk
c2ktPm1vZGUpKTsKPj4+ICAJZHJtX21vZGVfZGVidWdfcHJpbnRtb2RlbGluZShhZGp1c3RlZF9t
b2RlKTsKPj4+IC19Cj4+PiAgCj4+PiAtc3RhdGljIHZvaWQgbndsX2RzaV9icmlkZ2VfcHJlX2Vu
YWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQo+Pj4gLXsKPj4+IC0Jc3RydWN0IG53bF9k
c2kgKmRzaSA9IGJyaWRnZV90b19kc2koYnJpZGdlKTsKPj4+IC0JaW50IHJldDsKPj4+IC0KPj4+
IC0JcG1fcnVudGltZV9nZXRfc3luYyhkc2ktPmRldik7Cj4+PiArCXBtX3J1bnRpbWVfZ2V0X3N5
bmMoZGV2KTsKPj4+ICAKPj4+ICAJaWYgKGNsa19wcmVwYXJlX2VuYWJsZShkc2ktPmxjZGlmX2Ns
aykgPCAwKQo+Pj4gIAkJcmV0dXJuOwo+Pj4gQEAgLTg4MywyNyArODg1LDI5IEBAIHN0YXRpYyB2
b2lkIG53bF9kc2lfYnJpZGdlX3ByZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkK
Pj4+ICAJLyogU3RlcCAxIGZyb20gRFNJIHJlc2V0LW91dCBpbnN0cnVjdGlvbnMgKi8KPj4+ICAJ
cmV0ID0gcmVzZXRfY29udHJvbF9kZWFzc2VydChkc2ktPnJzdF9wY2xrKTsKPj4+ICAJaWYgKHJl
dCA8IDApIHsKPj4+IC0JCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gZGVhc3Nl
cnQgUENMSzogJWRcbiIsIHJldCk7Cj4+PiArCQlEUk1fREVWX0VSUk9SKGRldiwgIkZhaWxlZCB0
byBkZWFzc2VydCBQQ0xLOiAlZFxuIiwgcmV0KTsKPj4+ICAJCXJldHVybjsKPj4+ICAJfQo+Pj4g
IAo+Pj4gIAkvKiBTdGVwIDIgZnJvbSBEU0kgcmVzZXQtb3V0IGluc3RydWN0aW9ucyAqLwo+Pj4g
LQlud2xfZHNpX2VuYWJsZShkc2kpOwo+Pj4gKwlud2xfZHNpX21vZGVfc2V0KGRzaSk7Cj4+PiAg
Cj4+PiAgCS8qIFN0ZXAgMyBmcm9tIERTSSByZXNldC1vdXQgaW5zdHJ1Y3Rpb25zICovCj4+PiAg
CXJldCA9IHJlc2V0X2NvbnRyb2xfZGVhc3NlcnQoZHNpLT5yc3RfZXNjKTsKPj4+ICAJaWYgKHJl
dCA8IDApIHsKPj4+IC0JCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gZGVhc3Nl
cnQgRVNDOiAlZFxuIiwgcmV0KTsKPj4+ICsJCURSTV9ERVZfRVJST1IoZGV2LCAiRmFpbGVkIHRv
IGRlYXNzZXJ0IEVTQzogJWRcbiIsIHJldCk7Cj4+PiAgCQlyZXR1cm47Cj4+PiAgCX0KPj4+ICAJ
cmV0ID0gcmVzZXRfY29udHJvbF9kZWFzc2VydChkc2ktPnJzdF9ieXRlKTsKPj4+ICAJaWYgKHJl
dCA8IDApIHsKPj4+IC0JCURSTV9ERVZfRVJST1IoZHNpLT5kZXYsICJGYWlsZWQgdG8gZGVhc3Nl
cnQgQllURTogJWRcbiIsIHJldCk7Cj4+PiArCQlEUk1fREVWX0VSUk9SKGRldiwgIkZhaWxlZCB0
byBkZWFzc2VydCBCWVRFOiAlZFxuIiwgcmV0KTsKPj4+ICAJCXJldHVybjsKPj4+ICAJfQo+Pj4g
IH0KPj4+ICAKPj4+IC1zdGF0aWMgdm9pZCBud2xfZHNpX2JyaWRnZV9lbmFibGUoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSkKPj4+ICtzdGF0aWMgdm9pZAo+Pj4gK253bF9kc2lfYnJpZGdlX2F0
b21pY19lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKPj4+ICsJCQkgICAgIHN0cnVj
dCBkcm1fYnJpZGdlX3N0YXRlICpvbGRfYnJpZGdlX3N0YXRlKQo+Pj4gIHsKPj4+ICAJc3RydWN0
IG53bF9kc2kgKmRzaSA9IGJyaWRnZV90b19kc2koYnJpZGdlKTsKPj4+ICAJaW50IHJldDsKPj4+
IEBAIC05NDgsMTQgKzk1MiwxNiBAQCBzdGF0aWMgdm9pZCBud2xfZHNpX2JyaWRnZV9kZXRhY2go
c3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKPj4+ICB9Cj4+PiAgCj4+PiAgc3RhdGljIGNvbnN0
IHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIG53bF9kc2lfYnJpZGdlX2Z1bmNzID0gewo+Pj4gLQku
cHJlX2VuYWJsZSA9IG53bF9kc2lfYnJpZGdlX3ByZV9lbmFibGUsCj4+PiAtCS5lbmFibGUgICAg
ID0gbndsX2RzaV9icmlkZ2VfZW5hYmxlLAo+Pj4gLQkuZGlzYWJsZSAgICA9IG53bF9kc2lfYnJp
ZGdlX2Rpc2FibGUsCj4+PiAtCS5tb2RlX2ZpeHVwID0gbndsX2RzaV9icmlkZ2VfbW9kZV9maXh1
cCwKPj4+IC0JLm1vZGVfc2V0ICAgPSBud2xfZHNpX2JyaWRnZV9tb2RlX3NldCwKPj4+IC0JLm1v
ZGVfdmFsaWQgPSBud2xfZHNpX2JyaWRnZV9tb2RlX3ZhbGlkLAo+Pj4gLQkuYXR0YWNoCSAgICA9
IG53bF9kc2lfYnJpZGdlX2F0dGFjaCwKPj4+IC0JLmRldGFjaAkgICAgPSBud2xfZHNpX2JyaWRn
ZV9kZXRhY2gsCj4+PiArCS5hdG9taWNfZHVwbGljYXRlX3N0YXRlCT0gZHJtX2F0b21pY19oZWxw
ZXJfYnJpZGdlX2R1cGxpY2F0ZV9zdGF0ZSwKPj4+ICsJLmF0b21pY19kZXN0cm95X3N0YXRlCT0g
ZHJtX2F0b21pY19oZWxwZXJfYnJpZGdlX2Rlc3Ryb3lfc3RhdGUsCj4+PiArCS5hdG9taWNfcmVz
ZXQJCT0gZHJtX2F0b21pY19oZWxwZXJfYnJpZGdlX3Jlc2V0LAo+Pj4gKwkuYXRvbWljX2NoZWNr
CQk9IG53bF9kc2lfYnJpZGdlX2F0b21pY19jaGVjaywKPj4+ICsJLmF0b21pY19lbmFibGUJCT0g
bndsX2RzaV9icmlkZ2VfYXRvbWljX2VuYWJsZSwKPj4+ICsJLmF0b21pY19kaXNhYmxlCQk9IG53
bF9kc2lfYnJpZGdlX2F0b21pY19kaXNhYmxlLAo+Pj4gKwkubW9kZV9zZXQJCT0gbndsX2RzaV9i
cmlkZ2VfbW9kZV9zZXQsCj4+PiArCS5tb2RlX3ZhbGlkCQk9IG53bF9kc2lfYnJpZGdlX21vZGVf
dmFsaWQsCj4+PiArCS5hdHRhY2gJCQk9IG53bF9kc2lfYnJpZGdlX2F0dGFjaCwKPj4+ICsJLmRl
dGFjaAkJCT0gbndsX2RzaV9icmlkZ2VfZGV0YWNoLAo+Pj4gIH07Cj4+PiAgCj4+PiAgc3RhdGlj
IGludCBud2xfZHNpX3BhcnNlX2R0KHN0cnVjdCBud2xfZHNpICpkc2kpCj4+Pgo+IAoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxp
bmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
