Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id AB7EF6E86F
	for <lists+dri-devel@lfdr.de>; Fri, 19 Jul 2019 18:05:54 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4B7566E85D;
	Fri, 19 Jul 2019 16:05:52 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.domeneshop.no (smtp.domeneshop.no
 [IPv6:2a01:5b40:0:3005::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BBB846E85D
 for <dri-devel@lists.freedesktop.org>; Fri, 19 Jul 2019 16:05:51 +0000 (UTC)
Received: from 211.81-166-168.customer.lyse.net ([81.166.168.211]:55144
 helo=localhost.localdomain)
 by smtp.domeneshop.no with esmtpsa (TLS1.2:ECDHE_RSA_AES_128_CBC_SHA1:128)
 (Exim 4.84_2) (envelope-from <noralf@tronnes.org>)
 id 1hoVII-0001bQ-EU; Fri, 19 Jul 2019 17:59:38 +0200
From: =?UTF-8?q?Noralf=20Tr=C3=B8nnes?= <noralf@tronnes.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 10/11] drm/tinydrm/mipi-dbi: Add
 mipi_dbi_init_with_formats()
Date: Fri, 19 Jul 2019 17:59:15 +0200
Message-Id: <20190719155916.62465-11-noralf@tronnes.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190719155916.62465-1-noralf@tronnes.org>
References: <20190719155916.62465-1-noralf@tronnes.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; d=tronnes.org; s=ds201810; 
 h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From;
 bh=e31xP1RKLAbrPv5gHhOMfsCsZVRDfkyfzQhSqbmp88o=; 
 b=q52IVbidQXFt834XpuDfO0GEKLS72c+e+uojgxJ8kcnRp6X8M+kOPEY0AYFzOFVbdgl2YC3+iDYlsDHdNHfnsPiK84rNIt4yrYgas1BtO1tU+YYP/35wfAV+YT4kSRsHB9w2miX0EsfcLtJsYQmywaHRyF4u0cyVoXmGNPP/6Pz6n0l2d1yOPpJJcRDuPX/HKnyGJBOF0aN1ZjkBiAwdo5sF5En+zE52w3AtB0ZzxAGGp4kMFV69UuT6W3a/kRiB+wVu6/3VHEmRGsl0qQJMRlaQGf9FM/eT9V/xzMS8cGXwpOpgE7H9RVs/D69XLl0l5/TnN5g2YUb5La7QFMrrTQ==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: sam@ravnborg.org, david@lechnology.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIE1JUEkgREJJIHN0YW5kYXJkIHN1cHBvcnQgbW9yZSBwaXhlbCBmb3JtYXRzIHRoYW4gd2hh
dCB0aGlzIGhlbHBlcgpzdXBwb3J0cy4gQWRkIGFuIGluaXQgZnVuY3Rpb24gdGhhdCBsZXRzIHRo
ZSBkcml2ZXIgdXNlIGRpZmZlcmVudApmb3JtYXQocykuIFRoaXMgYXZvaWRzIG9wZW4gY29kaW5n
IG1pcGlfZGJpX2luaXQoKSBpbiBzdDc1ODYuCgpzdDc1ODYgc2V0cyBwcmVmZXJyZWRfZGVwdGgg
YnV0IHRoaXMgaXMgbm90IG5lY2Vzc2FyeSBzaW5jZSBpdCBvbmx5CnN1cHBvcnRzIG9uZSBmb3Jt
YXQuCgp2MjogRm9yZ290IHRvIHJlbW92ZSB0aGUgbWlwaS0+cm90YXRpb24gYXNzaWdubWVudCBp
biBzdDc1ODYsCiAgICBtaXBpX2RiaV9pbml0X3dpdGhfZm9ybWF0cygpIGhhbmRsZXMgaXQuCgpD
YzogRGF2aWQgTGVjaG5lciA8ZGF2aWRAbGVjaG5vbG9neS5jb20+CkFja2VkLWJ5OiBEYXZpZCBM
ZWNobmVyIDxkYXZpZEBsZWNobm9sb2d5LmNvbT4KU2lnbmVkLW9mZi1ieTogTm9yYWxmIFRyw7hu
bmVzIDxub3JhbGZAdHJvbm5lcy5vcmc+Ci0tLQogZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0vbWlw
aS1kYmkuYyB8IDkxICsrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLQogZHJpdmVycy9ncHUv
ZHJtL3Rpbnlkcm0vc3Q3NTg2LmMgICB8IDMzICsrLS0tLS0tLS0tCiBpbmNsdWRlL2RybS90aW55
ZHJtL21pcGktZGJpLmggICAgIHwgIDUgKysKIDMgZmlsZXMgY2hhbmdlZCwgNzQgaW5zZXJ0aW9u
cygrKSwgNTUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Rpbnlk
cm0vbWlwaS1kYmkuYyBiL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL21pcGktZGJpLmMKaW5kZXgg
NzNkYjI4N2U1YzUyLi5hMjY0YzBiYjc0YjAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90
aW55ZHJtL21pcGktZGJpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0vbWlwaS1kYmku
YwpAQCAtNDExLDYgKzQxMSw2NSBAQCBzdGF0aWMgY29uc3QgdWludDMyX3QgbWlwaV9kYmlfZm9y
bWF0c1tdID0gewogCURSTV9GT1JNQVRfWFJHQjg4ODgsCiB9OwogCisvKioKKyAqIG1pcGlfZGJp
X2luaXRfd2l0aF9mb3JtYXRzIC0gTUlQSSBEQkkgaW5pdGlhbGl6YXRpb24gd2l0aCBjdXN0b20g
Zm9ybWF0cworICogQG1pcGk6ICZtaXBpX2RiaSBzdHJ1Y3R1cmUgdG8gaW5pdGlhbGl6ZQorICog
QGZ1bmNzOiBEaXNwbGF5IHBpcGUgZnVuY3Rpb25zCisgKiBAZm9ybWF0czogQXJyYXkgb2Ygc3Vw
cG9ydGVkIGZvcm1hdHMgKERSTV9GT1JNQVRcX1wqKS4KKyAqIEBmb3JtYXRfY291bnQ6IE51bWJl
ciBvZiBlbGVtZW50cyBpbiBAZm9ybWF0cworICogQG1vZGU6IERpc3BsYXkgbW9kZQorICogQHJv
dGF0aW9uOiBJbml0aWFsIHJvdGF0aW9uIGluIGRlZ3JlZXMgQ291bnRlciBDbG9jayBXaXNlCisg
KiBAdHhfYnVmX3NpemU6IEFsbG9jYXRlIGEgdHJhbnNtaXQgYnVmZmVyIG9mIHRoaXMgc2l6ZS4K
KyAqCisgKiBUaGlzIGZ1bmN0aW9uIHNldHMgdXAgYSAmZHJtX3NpbXBsZV9kaXNwbGF5X3BpcGUg
d2l0aCBhICZkcm1fY29ubmVjdG9yIHRoYXQKKyAqIGhhcyBvbmUgZml4ZWQgJmRybV9kaXNwbGF5
X21vZGUgd2hpY2ggaXMgcm90YXRlZCBhY2NvcmRpbmcgdG8gQHJvdGF0aW9uLgorICogVGhpcyBt
b2RlIGlzIHVzZWQgdG8gc2V0IHRoZSBtb2RlIGNvbmZpZyBtaW4vbWF4IHdpZHRoL2hlaWdodCBw
cm9wZXJ0aWVzLgorICoKKyAqIFVzZSBtaXBpX2RiaV9pbml0KCkgaWYgeW91IGRvbid0IG5lZWQg
Y3VzdG9tIGZvcm1hdHMuCisgKgorICogTm90ZToKKyAqIFNvbWUgb2YgdGhlIGhlbHBlciBmdW5j
dGlvbnMgZXhwZWN0cyBSR0I1NjUgdG8gYmUgdGhlIGRlZmF1bHQgZm9ybWF0IGFuZCB0aGUKKyAq
IHRyYW5zbWl0IGJ1ZmZlciBzaXplZCB0byBmaXQgdGhhdC4KKyAqCisgKiBSZXR1cm5zOgorICog
WmVybyBvbiBzdWNjZXNzLCBuZWdhdGl2ZSBlcnJvciBjb2RlIG9uIGZhaWx1cmUuCisgKi8KK2lu
dCBtaXBpX2RiaV9pbml0X3dpdGhfZm9ybWF0cyhzdHJ1Y3QgbWlwaV9kYmkgKm1pcGksCisJCQkg
ICAgICAgY29uc3Qgc3RydWN0IGRybV9zaW1wbGVfZGlzcGxheV9waXBlX2Z1bmNzICpmdW5jcywK
KwkJCSAgICAgICBjb25zdCB1aW50MzJfdCAqZm9ybWF0cywgdW5zaWduZWQgaW50IGZvcm1hdF9j
b3VudCwKKwkJCSAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwKKwkJ
CSAgICAgICB1bnNpZ25lZCBpbnQgcm90YXRpb24sIHNpemVfdCB0eF9idWZfc2l6ZSkKK3sKKwlz
dHJ1Y3QgZHJtX2RldmljZSAqZHJtID0gJm1pcGktPmRybTsKKwlpbnQgcmV0OworCisJaWYgKCFt
aXBpLT5jb21tYW5kKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCW11dGV4X2luaXQoJm1pcGktPmNt
ZGxvY2spOworCisJbWlwaS0+dHhfYnVmID0gZGV2bV9rbWFsbG9jKGRybS0+ZGV2LCB0eF9idWZf
c2l6ZSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFtaXBpLT50eF9idWYpCisJCXJldHVybiAtRU5PTUVN
OworCisJcmV0ID0gdGlueWRybV9kaXNwbGF5X3BpcGVfaW5pdChkcm0sICZtaXBpLT5waXBlLCBm
dW5jcywKKwkJCQkJRFJNX01PREVfQ09OTkVDVE9SX1NQSSwKKwkJCQkJZm9ybWF0cywgZm9ybWF0
X2NvdW50LCBtb2RlLAorCQkJCQlyb3RhdGlvbik7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsK
KworCWRybV9wbGFuZV9lbmFibGVfZmJfZGFtYWdlX2NsaXBzKCZtaXBpLT5waXBlLnBsYW5lKTsK
KworCWRybS0+bW9kZV9jb25maWcuZnVuY3MgPSAmbWlwaV9kYmlfbW9kZV9jb25maWdfZnVuY3M7
CisJbWlwaS0+cm90YXRpb24gPSByb3RhdGlvbjsKKworCURSTV9ERUJVR19LTVMoInJvdGF0aW9u
ID0gJXVcbiIsIHJvdGF0aW9uKTsKKworCXJldHVybiAwOworfQorRVhQT1JUX1NZTUJPTChtaXBp
X2RiaV9pbml0X3dpdGhfZm9ybWF0cyk7CisKIC8qKgogICogbWlwaV9kYmlfaW5pdCAtIE1JUEkg
REJJIGluaXRpYWxpemF0aW9uCiAgKiBAbWlwaTogJm1pcGlfZGJpIHN0cnVjdHVyZSB0byBpbml0
aWFsaXplCkBAIC00MzMsMzYgKzQ5MiwxMiBAQCBpbnQgbWlwaV9kYmlfaW5pdChzdHJ1Y3QgbWlw
aV9kYmkgKm1pcGksCiAJCSAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsIHVu
c2lnbmVkIGludCByb3RhdGlvbikKIHsKIAlzaXplX3QgYnVmc2l6ZSA9IG1vZGUtPnZkaXNwbGF5
ICogbW9kZS0+aGRpc3BsYXkgKiBzaXplb2YodTE2KTsKLQlzdHJ1Y3QgZHJtX2RldmljZSAqZHJt
ID0gJm1pcGktPmRybTsKLQlpbnQgcmV0OwogCi0JaWYgKCFtaXBpLT5jb21tYW5kKQotCQlyZXR1
cm4gLUVJTlZBTDsKKwltaXBpLT5kcm0ubW9kZV9jb25maWcucHJlZmVycmVkX2RlcHRoID0gMTY7
CiAKLQltdXRleF9pbml0KCZtaXBpLT5jbWRsb2NrKTsKLQotCW1pcGktPnR4X2J1ZiA9IGRldm1f
a21hbGxvYyhkcm0tPmRldiwgYnVmc2l6ZSwgR0ZQX0tFUk5FTCk7Ci0JaWYgKCFtaXBpLT50eF9i
dWYpCi0JCXJldHVybiAtRU5PTUVNOwotCi0JcmV0ID0gdGlueWRybV9kaXNwbGF5X3BpcGVfaW5p
dChkcm0sICZtaXBpLT5waXBlLCBmdW5jcywKLQkJCQkJRFJNX01PREVfQ09OTkVDVE9SX1NQSSwK
LQkJCQkJbWlwaV9kYmlfZm9ybWF0cywKLQkJCQkJQVJSQVlfU0laRShtaXBpX2RiaV9mb3JtYXRz
KSwgbW9kZSwKLQkJCQkJcm90YXRpb24pOwotCWlmIChyZXQpCi0JCXJldHVybiByZXQ7Ci0KLQlk
cm1fcGxhbmVfZW5hYmxlX2ZiX2RhbWFnZV9jbGlwcygmbWlwaS0+cGlwZS5wbGFuZSk7Ci0KLQlk
cm0tPm1vZGVfY29uZmlnLmZ1bmNzID0gJm1pcGlfZGJpX21vZGVfY29uZmlnX2Z1bmNzOwotCWRy
bS0+bW9kZV9jb25maWcucHJlZmVycmVkX2RlcHRoID0gMTY7Ci0JbWlwaS0+cm90YXRpb24gPSBy
b3RhdGlvbjsKLQotCURSTV9ERUJVR19LTVMoInByZWZlcnJlZF9kZXB0aD0ldSwgcm90YXRpb24g
PSAldVxuIiwKLQkJICAgICAgZHJtLT5tb2RlX2NvbmZpZy5wcmVmZXJyZWRfZGVwdGgsIHJvdGF0
aW9uKTsKLQotCXJldHVybiAwOworCXJldHVybiBtaXBpX2RiaV9pbml0X3dpdGhfZm9ybWF0cyht
aXBpLCBmdW5jcywgbWlwaV9kYmlfZm9ybWF0cywKKwkJCQkJICBBUlJBWV9TSVpFKG1pcGlfZGJp
X2Zvcm1hdHMpLCBtb2RlLAorCQkJCQkgIHJvdGF0aW9uLCBidWZzaXplKTsKIH0KIEVYUE9SVF9T
WU1CT0wobWlwaV9kYmlfaW5pdCk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90aW55
ZHJtL3N0NzU4Ni5jIGIvZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0vc3Q3NTg2LmMKaW5kZXggN2Fl
MzkwMDRhYTg4Li40MDQ2YjBmYzNmN2EgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90aW55
ZHJtL3N0NzU4Ni5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL3N0NzU4Ni5jCkBAIC0y
NCw3ICsyNCw2IEBACiAjaW5jbHVkZSA8ZHJtL2RybV9yZWN0Lmg+CiAjaW5jbHVkZSA8ZHJtL2Ry
bV92YmxhbmsuaD4KICNpbmNsdWRlIDxkcm0vdGlueWRybS9taXBpLWRiaS5oPgotI2luY2x1ZGUg
PGRybS90aW55ZHJtL3Rpbnlkcm0taGVscGVycy5oPgogCiAvKiBjb250cm9sbGVyLXNwZWNpZmlj
IGNvbW1hbmRzICovCiAjZGVmaW5lIFNUNzU4Nl9ESVNQX01PREVfR1JBWQkweDM4CkBAIC0yODMs
MTIgKzI4Miw2IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3NpbXBsZV9kaXNwbGF5X3BpcGVf
ZnVuY3Mgc3Q3NTg2X3BpcGVfZnVuY3MgPSB7CiAJLnByZXBhcmVfZmIJPSBkcm1fZ2VtX2ZiX3Np
bXBsZV9kaXNwbGF5X3BpcGVfcHJlcGFyZV9mYiwKIH07CiAKLXN0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZHJtX21vZGVfY29uZmlnX2Z1bmNzIHN0NzU4Nl9tb2RlX2NvbmZpZ19mdW5jcyA9IHsKLQkuZmJf
Y3JlYXRlID0gZHJtX2dlbV9mYl9jcmVhdGVfd2l0aF9kaXJ0eSwKLQkuYXRvbWljX2NoZWNrID0g
ZHJtX2F0b21pY19oZWxwZXJfY2hlY2ssCi0JLmF0b21pY19jb21taXQgPSBkcm1fYXRvbWljX2hl
bHBlcl9jb21taXQsCi19OwotCiBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUg
c3Q3NTg2X21vZGUgPSB7CiAJRFJNX1NJTVBMRV9NT0RFKDE3OCwgMTI4LCAzNywgMjcpLAogfTsK
QEAgLTM0MiwxNSArMzM1LDggQEAgc3RhdGljIGludCBzdDc1ODZfcHJvYmUoc3RydWN0IHNwaV9k
ZXZpY2UgKnNwaSkKIAl9CiAKIAlkcm1fbW9kZV9jb25maWdfaW5pdChkcm0pOwotCWRybS0+bW9k
ZV9jb25maWcucHJlZmVycmVkX2RlcHRoID0gMzI7Ci0JZHJtLT5tb2RlX2NvbmZpZy5mdW5jcyA9
ICZzdDc1ODZfbW9kZV9jb25maWdfZnVuY3M7Ci0KLQltdXRleF9pbml0KCZtaXBpLT5jbWRsb2Nr
KTsKIAogCWJ1ZnNpemUgPSAoc3Q3NTg2X21vZGUudmRpc3BsYXkgKyAyKSAvIDMgKiBzdDc1ODZf
bW9kZS5oZGlzcGxheTsKLQltaXBpLT50eF9idWYgPSBkZXZtX2ttYWxsb2MoZGV2LCBidWZzaXpl
LCBHRlBfS0VSTkVMKTsKLQlpZiAoIW1pcGktPnR4X2J1ZikKLQkJcmV0dXJuIC1FTk9NRU07CiAK
IAltaXBpLT5yZXNldCA9IGRldm1fZ3Bpb2RfZ2V0KGRldiwgInJlc2V0IiwgR1BJT0RfT1VUX0hJ
R0gpOwogCWlmIChJU19FUlIobWlwaS0+cmVzZXQpKSB7CkBAIC0zNjUsNyArMzUxLDYgQEAgc3Rh
dGljIGludCBzdDc1ODZfcHJvYmUoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSkKIAl9CiAKIAlkZXZp
Y2VfcHJvcGVydHlfcmVhZF91MzIoZGV2LCAicm90YXRpb24iLCAmcm90YXRpb24pOwotCW1pcGkt
PnJvdGF0aW9uID0gcm90YXRpb247CiAKIAlyZXQgPSBtaXBpX2RiaV9zcGlfaW5pdChzcGksIG1p
cGksIGEwKTsKIAlpZiAocmV0KQpAQCAtMzc0LDYgKzM1OSwxMiBAQCBzdGF0aWMgaW50IHN0NzU4
Nl9wcm9iZShzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpKQogCS8qIENhbm5vdCByZWFkIGZyb20gdGhp
cyBjb250cm9sbGVyIHZpYSBTUEkgKi8KIAltaXBpLT5yZWFkX2NvbW1hbmRzID0gTlVMTDsKIAor
CXJldCA9IG1pcGlfZGJpX2luaXRfd2l0aF9mb3JtYXRzKG1pcGksICZzdDc1ODZfcGlwZV9mdW5j
cywKKwkJCQkJIHN0NzU4Nl9mb3JtYXRzLCBBUlJBWV9TSVpFKHN0NzU4Nl9mb3JtYXRzKSwKKwkJ
CQkJICZzdDc1ODZfbW9kZSwgcm90YXRpb24sIGJ1ZnNpemUpOworCWlmIChyZXQpCisJCXJldHVy
biByZXQ7CisKIAkvKgogCSAqIHdlIGFyZSB1c2luZyA4LWJpdCBkYXRhLCBzbyB3ZSBhcmUgbm90
IGFjdHVhbGx5IHN3YXBwaW5nIGFueXRoaW5nLAogCSAqIGJ1dCBzZXR0aW5nIG1pcGktPnN3YXBf
Ynl0ZXMgbWFrZXMgbWlwaV9kYmlfdHlwZWMzX2NvbW1hbmQoKSBkbyB0aGUKQEAgLTM4MywxNSAr
Mzc0LDYgQEAgc3RhdGljIGludCBzdDc1ODZfcHJvYmUoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSkK
IAkgKi8KIAltaXBpLT5zd2FwX2J5dGVzID0gdHJ1ZTsKIAotCXJldCA9IHRpbnlkcm1fZGlzcGxh
eV9waXBlX2luaXQoZHJtLCAmbWlwaS0+cGlwZSwgJnN0NzU4Nl9waXBlX2Z1bmNzLAotCQkJCQlE
Uk1fTU9ERV9DT05ORUNUT1JfU1BJLAotCQkJCQlzdDc1ODZfZm9ybWF0cywgQVJSQVlfU0laRShz
dDc1ODZfZm9ybWF0cyksCi0JCQkJCSZzdDc1ODZfbW9kZSwgcm90YXRpb24pOwotCWlmIChyZXQp
Ci0JCXJldHVybiByZXQ7Ci0KLQlkcm1fcGxhbmVfZW5hYmxlX2ZiX2RhbWFnZV9jbGlwcygmbWlw
aS0+cGlwZS5wbGFuZSk7Ci0KIAlkcm1fbW9kZV9jb25maWdfcmVzZXQoZHJtKTsKIAogCXJldCA9
IGRybV9kZXZfcmVnaXN0ZXIoZHJtLCAwKTsKQEAgLTQwMCw5ICszODIsNiBAQCBzdGF0aWMgaW50
IHN0NzU4Nl9wcm9iZShzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpKQogCiAJc3BpX3NldF9kcnZkYXRh
KHNwaSwgZHJtKTsKIAotCURSTV9ERUJVR19LTVMoInByZWZlcnJlZF9kZXB0aD0ldSwgcm90YXRp
b24gPSAldVxuIiwKLQkJICAgICAgZHJtLT5tb2RlX2NvbmZpZy5wcmVmZXJyZWRfZGVwdGgsIHJv
dGF0aW9uKTsKLQogCWRybV9mYmRldl9nZW5lcmljX3NldHVwKGRybSwgMCk7CiAKIAlyZXR1cm4g
MDsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL3Rpbnlkcm0vbWlwaS1kYmkuaCBiL2luY2x1ZGUv
ZHJtL3Rpbnlkcm0vbWlwaS1kYmkuaAppbmRleCAzNWExNDEzZjIxMjIuLmM0YjA0Nzg5YmY4NCAx
MDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vdGlueWRybS9taXBpLWRiaS5oCisrKyBiL2luY2x1ZGUv
ZHJtL3Rpbnlkcm0vbWlwaS1kYmkuaApAQCAtNjksNiArNjksMTEgQEAgc3RhdGljIGlubGluZSBz
dHJ1Y3QgbWlwaV9kYmkgKmRybV90b19taXBpX2RiaShzdHJ1Y3QgZHJtX2RldmljZSAqZHJtKQog
CiBpbnQgbWlwaV9kYmlfc3BpX2luaXQoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSwgc3RydWN0IG1p
cGlfZGJpICptaXBpLAogCQkgICAgICBzdHJ1Y3QgZ3Bpb19kZXNjICpkYyk7CitpbnQgbWlwaV9k
YmlfaW5pdF93aXRoX2Zvcm1hdHMoc3RydWN0IG1pcGlfZGJpICptaXBpLAorCQkJICAgICAgIGNv
bnN0IHN0cnVjdCBkcm1fc2ltcGxlX2Rpc3BsYXlfcGlwZV9mdW5jcyAqZnVuY3MsCisJCQkgICAg
ICAgY29uc3QgdWludDMyX3QgKmZvcm1hdHMsIHVuc2lnbmVkIGludCBmb3JtYXRfY291bnQsCisJ
CQkgICAgICAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCisJCQkgICAgICAg
dW5zaWduZWQgaW50IHJvdGF0aW9uLCBzaXplX3QgdHhfYnVmX3NpemUpOwogaW50IG1pcGlfZGJp
X2luaXQoc3RydWN0IG1pcGlfZGJpICptaXBpLAogCQkgIGNvbnN0IHN0cnVjdCBkcm1fc2ltcGxl
X2Rpc3BsYXlfcGlwZV9mdW5jcyAqZnVuY3MsCiAJCSAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKm1vZGUsIHVuc2lnbmVkIGludCByb3RhdGlvbik7Ci0tIAoyLjIwLjEKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
