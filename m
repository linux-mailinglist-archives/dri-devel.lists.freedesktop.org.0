Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E3A4522B255
	for <lists+dri-devel@lfdr.de>; Thu, 23 Jul 2020 17:17:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 357036E25F;
	Thu, 23 Jul 2020 15:17:34 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x542.google.com (mail-ed1-x542.google.com
 [IPv6:2a00:1450:4864:20::542])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E20746E211
 for <dri-devel@lists.freedesktop.org>; Thu, 23 Jul 2020 15:17:19 +0000 (UTC)
Received: by mail-ed1-x542.google.com with SMTP id z17so4777944edr.9
 for <dri-devel@lists.freedesktop.org>; Thu, 23 Jul 2020 08:17:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=TSc0jpF9cuTgCO5j4zc5sL/9Ymc6nul8gWGCxUFXhQE=;
 b=o5d3he443fs4KI4dfO8UcUCH7ntaI/+PnALdMupYe1XH+eVN0p/RAkk1M8InpRsx1z
 SE0jUcw7Bw4WAFVm8HKxrTzyDXOlaMC0akcDVAFPMv3NrpaRP0u1TA3mtfMSLFVa/fHV
 1uJoCsL+UjyYc903GpFpNUnvbeKA4naASuK3Sao+oexqcfHYtV1+RnMBsFOddx1EAUbd
 fsCnGE3bnGVq+soRAWMEZWp9D3OjMHsDnRXa3Ye0lRDEI343QeoqLCK0mfCsObGVP/0v
 PFl+qY39y9bs3/DFYHHsLtLOc9poc8dP0K7LK3E15gUXXwdRCQ1gdcqge0iFA10flYc7
 tfrQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=TSc0jpF9cuTgCO5j4zc5sL/9Ymc6nul8gWGCxUFXhQE=;
 b=CoyXQWH+doBc1w/qwk06gZGmScnkbsVIcEnzKMyg8gec7O7PxemFsqMzhSPel3q2HW
 PPT22ki/quIFdqpxpbyIlVgJ0QCGdBWrdK/PyWe79FtcAHyQmDNyOHKBLwXUwhG+L+60
 rc8iHcg3LlLLTEVqqsTQeLHgeLPbK7tn78DUJ42+gndov530CNGtTlW1iIg7UgaPL4B7
 Qa58re4Rg8IB9XJ5/6xOneLuqjlHzPldWznLAbzm2HPAtdKlVc1jKNQSAgqdvKRXUxJ6
 IK8X1XltRnrQt6wD84BmFUEaDmDNSqXo06r+9waixC+d3f1vkQCqZviL1DLrDMXkQUA3
 iFnw==
X-Gm-Message-State: AOAM532AaoPgCDdLZiM2k82ASkPH6PgJ2NNLAZOOM8B/6mqZsEaOaN4w
 h9EBxUVcfaGrg2PlCHyfEY3Ly/ZE
X-Google-Smtp-Source: ABdhPJxf6KBK35FOkKeaw+4JvvXaAffgGlC0Zf65wiyVBBhWOoQSyQaUSMNKUQ213EyUR7FrMCr0Yw==
X-Received: by 2002:a05:6402:c06:: with SMTP id
 co6mr4635429edb.142.1595517438061; 
 Thu, 23 Jul 2020 08:17:18 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:4ca2:7494:c4d6:51a4])
 by smtp.gmail.com with ESMTPSA id q6sm2239197ejn.30.2020.07.23.08.17.17
 for <dri-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 23 Jul 2020 08:17:17 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 6/9] drm/nouveau: stop implementing init_mem_type
Date: Thu, 23 Jul 2020 17:17:07 +0200
Message-Id: <20200723151710.3591-7-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200723151710.3591-1-christian.koenig@amd.com>
References: <20200723151710.3591-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW5zdGVhZCBqdXN0IGluaXRpYWxpemUgdGhlIG1lbW9yeSB0eXBlIHBhcmFtZXRlcnMKYmVmb3Jl
IGNhbGxpbmcgdHRtX2JvX2luaXRfbW0uCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmln
IDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL25vdXZlYXUv
bm91dmVhdV9iby5jICB8IDQ4IC0tLS0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJt
L25vdXZlYXUvbm91dmVhdV90dG0uYyB8IDYxICsrKysrKysrKysrKysrKysrKysrKysrKystLQog
MiBmaWxlcyBjaGFuZ2VkLCA1NyBpbnNlcnRpb25zKCspLCA1MiBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMgYi9kcml2ZXJzL2dw
dS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMKaW5kZXggYTNhZDY2YWQzODE3Li4yM2VmOWIxYWFh
YmMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMKQEAgLTY1MCw1NCArNjUwLDYg
QEAgc3RhdGljIGludAogbm91dmVhdV9ib19pbml0X21lbV90eXBlKHN0cnVjdCB0dG1fYm9fZGV2
aWNlICpiZGV2LCB1aW50MzJfdCB0eXBlLAogCQkJIHN0cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdl
ciAqbWFuKQogewotCXN0cnVjdCBub3V2ZWF1X2RybSAqZHJtID0gbm91dmVhdV9iZGV2KGJkZXYp
OwotCXN0cnVjdCBudmlmX21tdSAqbW11ID0gJmRybS0+Y2xpZW50Lm1tdTsKLQotCXN3aXRjaCAo
dHlwZSkgewotCWNhc2UgVFRNX1BMX1NZU1RFTToKLQkJYnJlYWs7Ci0JY2FzZSBUVE1fUExfVlJB
TToKLQkJbWFuLT5hdmFpbGFibGVfY2FjaGluZyA9IFRUTV9QTF9GTEFHX1VOQ0FDSEVEIHwKLQkJ
CQkJIFRUTV9QTF9GTEFHX1dDOwotCQltYW4tPmRlZmF1bHRfY2FjaGluZyA9IFRUTV9QTF9GTEFH
X1dDOwotCi0JCWlmIChkcm0tPmNsaWVudC5kZXZpY2UuaW5mby5mYW1pbHkgPj0gTlZfREVWSUNF
X0lORk9fVjBfVEVTTEEpIHsKLQkJCS8qIFNvbWUgQkFScyBkbyBub3Qgc3VwcG9ydCBiZWluZyBp
b3JlbWFwcGVkIFdDICovCi0JCQljb25zdCB1OCB0eXBlID0gbW11LT50eXBlW2RybS0+dHRtLnR5
cGVfdnJhbV0udHlwZTsKLQkJCWlmICh0eXBlICYgTlZJRl9NRU1fVU5DQUNIRUQpIHsKLQkJCQlt
YW4tPmF2YWlsYWJsZV9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQ7Ci0JCQkJbWFuLT5k
ZWZhdWx0X2NhY2hpbmcgPSBUVE1fUExfRkxBR19VTkNBQ0hFRDsKLQkJCX0KLQotCQkJbWFuLT5m
dW5jID0gJm5vdXZlYXVfdnJhbV9tYW5hZ2VyOwotCQkJbWFuLT51c2VfaW9fcmVzZXJ2ZV9scnUg
PSB0cnVlOwotCQl9IGVsc2UgewotCQkJbWFuLT5mdW5jID0gJnR0bV9ib19tYW5hZ2VyX2Z1bmM7
Ci0JCX0KLQkJYnJlYWs7Ci0JY2FzZSBUVE1fUExfVFQ6Ci0JCWlmIChkcm0tPmNsaWVudC5kZXZp
Y2UuaW5mby5mYW1pbHkgPj0gTlZfREVWSUNFX0lORk9fVjBfVEVTTEEpCi0JCQltYW4tPmZ1bmMg
PSAmbm91dmVhdV9nYXJ0X21hbmFnZXI7Ci0JCWVsc2UKLQkJaWYgKCFkcm0tPmFncC5icmlkZ2Up
Ci0JCQltYW4tPmZ1bmMgPSAmbnYwNF9nYXJ0X21hbmFnZXI7Ci0JCWVsc2UKLQkJCW1hbi0+ZnVu
YyA9ICZ0dG1fYm9fbWFuYWdlcl9mdW5jOwotCi0JCW1hbi0+dXNlX3R0ID0gdHJ1ZTsKLQkJaWYg
KGRybS0+YWdwLmJyaWRnZSkgewotCQkJbWFuLT5hdmFpbGFibGVfY2FjaGluZyA9IFRUTV9QTF9G
TEFHX1VOQ0FDSEVEIHwKLQkJCQlUVE1fUExfRkxBR19XQzsKLQkJCW1hbi0+ZGVmYXVsdF9jYWNo
aW5nID0gVFRNX1BMX0ZMQUdfV0M7Ci0JCX0gZWxzZSB7Ci0JCQltYW4tPmF2YWlsYWJsZV9jYWNo
aW5nID0gVFRNX1BMX01BU0tfQ0FDSElORzsKLQkJCW1hbi0+ZGVmYXVsdF9jYWNoaW5nID0gVFRN
X1BMX0ZMQUdfQ0FDSEVEOwotCQl9Ci0KLQkJYnJlYWs7Ci0JZGVmYXVsdDoKLQkJcmV0dXJuIC1F
SU5WQUw7Ci0JfQogCXJldHVybiAwOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
bm91dmVhdS9ub3V2ZWF1X3R0bS5jIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV90
dG0uYwppbmRleCBlODllYTA1MmNmNzEuLmIwMDEyMDIxYWUxMiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV90dG0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91
dmVhdS9ub3V2ZWF1X3R0bS5jCkBAIC0xODAsNiArMTgwLDYxIEBAIG5vdXZlYXVfdHRtX2luaXRf
aG9zdChzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRybSwgdTgga2luZCkKIAlyZXR1cm4gMDsKIH0KIAor
c3RhdGljIGludAorbm91dmVhdV90dG1faW5pdF92cmFtKHN0cnVjdCBub3V2ZWF1X2RybSAqZHJt
KQoreworCXN0cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdlciAqbWFuID0gJmRybS0+dHRtLmJkZXYu
bWFuW1RUTV9QTF9WUkFNXTsKKwlzdHJ1Y3QgbnZpZl9tbXUgKm1tdSA9ICZkcm0tPmNsaWVudC5t
bXU7CisKKwltYW4tPmF2YWlsYWJsZV9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQgfCBU
VE1fUExfRkxBR19XQzsKKwltYW4tPmRlZmF1bHRfY2FjaGluZyA9IFRUTV9QTF9GTEFHX1dDOwor
CisJaWYgKGRybS0+Y2xpZW50LmRldmljZS5pbmZvLmZhbWlseSA+PSBOVl9ERVZJQ0VfSU5GT19W
MF9URVNMQSkgeworCQkvKiBTb21lIEJBUnMgZG8gbm90IHN1cHBvcnQgYmVpbmcgaW9yZW1hcHBl
ZCBXQyAqLworCQljb25zdCB1OCB0eXBlID0gbW11LT50eXBlW2RybS0+dHRtLnR5cGVfdnJhbV0u
dHlwZTsKKworCQlpZiAodHlwZSAmIE5WSUZfTUVNX1VOQ0FDSEVEKSB7CisJCQltYW4tPmF2YWls
YWJsZV9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQ7CisJCQltYW4tPmRlZmF1bHRfY2Fj
aGluZyA9IFRUTV9QTF9GTEFHX1VOQ0FDSEVEOworCQl9CisKKwkJbWFuLT5mdW5jID0gJm5vdXZl
YXVfdnJhbV9tYW5hZ2VyOworCQltYW4tPnVzZV9pb19yZXNlcnZlX2xydSA9IHRydWU7CisJfSBl
bHNlIHsKKwkJbWFuLT5mdW5jID0gJnR0bV9ib19tYW5hZ2VyX2Z1bmM7CisJfQorCisJcmV0dXJu
IHR0bV9ib19pbml0X21tKCZkcm0tPnR0bS5iZGV2LCBUVE1fUExfVlJBTSwKKwkJCSAgICAgIGRy
bS0+Z2VtLnZyYW1fYXZhaWxhYmxlID4+IFBBR0VfU0hJRlQpOworfQorCitzdGF0aWMgaW50Citu
b3V2ZWF1X3R0bV9pbml0X2d0dChzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRybSkKK3sKKwlzdHJ1Y3Qg
dHRtX21lbV90eXBlX21hbmFnZXIgKm1hbiA9ICZkcm0tPnR0bS5iZGV2Lm1hbltUVE1fUExfVFRd
OworCisJaWYgKGRybS0+Y2xpZW50LmRldmljZS5pbmZvLmZhbWlseSA+PSBOVl9ERVZJQ0VfSU5G
T19WMF9URVNMQSkKKwkJbWFuLT5mdW5jID0gJm5vdXZlYXVfZ2FydF9tYW5hZ2VyOworCWVsc2UK
KwlpZiAoIWRybS0+YWdwLmJyaWRnZSkKKwkJbWFuLT5mdW5jID0gJm52MDRfZ2FydF9tYW5hZ2Vy
OworCWVsc2UKKwkJbWFuLT5mdW5jID0gJnR0bV9ib19tYW5hZ2VyX2Z1bmM7CisKKwltYW4tPnVz
ZV90dCA9IHRydWU7CisJaWYgKGRybS0+YWdwLmJyaWRnZSkgeworCQltYW4tPmF2YWlsYWJsZV9j
YWNoaW5nID0gVFRNX1BMX0ZMQUdfVU5DQUNIRUQgfAorCQkJVFRNX1BMX0ZMQUdfV0M7CisJCW1h
bi0+ZGVmYXVsdF9jYWNoaW5nID0gVFRNX1BMX0ZMQUdfV0M7CisJfSBlbHNlIHsKKwkJbWFuLT5h
dmFpbGFibGVfY2FjaGluZyA9IFRUTV9QTF9NQVNLX0NBQ0hJTkc7CisJCW1hbi0+ZGVmYXVsdF9j
YWNoaW5nID0gVFRNX1BMX0ZMQUdfQ0FDSEVEOworCX0KKworCXJldHVybiB0dG1fYm9faW5pdF9t
bSgmZHJtLT50dG0uYmRldiwgVFRNX1BMX1RULAorCQkJICAgICAgZHJtLT5nZW0uZ2FydF9hdmFp
bGFibGUgPj4gUEFHRV9TSElGVCk7Cit9CisKIGludAogbm91dmVhdV90dG1faW5pdChzdHJ1Y3Qg
bm91dmVhdV9kcm0gKmRybSkKIHsKQEAgLTIzNyw4ICsyOTIsNyBAQCBub3V2ZWF1X3R0bV9pbml0
KHN0cnVjdCBub3V2ZWF1X2RybSAqZHJtKQogCWFyY2hfaW9fcmVzZXJ2ZV9tZW10eXBlX3djKGRl
dmljZS0+ZnVuYy0+cmVzb3VyY2VfYWRkcihkZXZpY2UsIDEpLAogCQkJCSAgIGRldmljZS0+ZnVu
Yy0+cmVzb3VyY2Vfc2l6ZShkZXZpY2UsIDEpKTsKIAotCXJldCA9IHR0bV9ib19pbml0X21tKCZk
cm0tPnR0bS5iZGV2LCBUVE1fUExfVlJBTSwKLQkJCSAgICAgIGRybS0+Z2VtLnZyYW1fYXZhaWxh
YmxlID4+IFBBR0VfU0hJRlQpOworCXJldCA9IG5vdXZlYXVfdHRtX2luaXRfdnJhbShkcm0pOwog
CWlmIChyZXQpIHsKIAkJTlZfRVJST1IoZHJtLCAiVlJBTSBtbSBpbml0IGZhaWxlZCwgJWRcbiIs
IHJldCk7CiAJCXJldHVybiByZXQ7CkBAIC0yNTQsOCArMzA4LDcgQEAgbm91dmVhdV90dG1faW5p
dChzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRybSkKIAkJZHJtLT5nZW0uZ2FydF9hdmFpbGFibGUgPSBk
cm0tPmFncC5zaXplOwogCX0KIAotCXJldCA9IHR0bV9ib19pbml0X21tKCZkcm0tPnR0bS5iZGV2
LCBUVE1fUExfVFQsCi0JCQkgICAgICBkcm0tPmdlbS5nYXJ0X2F2YWlsYWJsZSA+PiBQQUdFX1NI
SUZUKTsKKwlyZXQgPSBub3V2ZWF1X3R0bV9pbml0X2d0dChkcm0pOwogCWlmIChyZXQpIHsKIAkJ
TlZfRVJST1IoZHJtLCAiR0FSVCBtbSBpbml0IGZhaWxlZCwgJWRcbiIsIHJldCk7CiAJCXJldHVy
biByZXQ7Ci0tIAoyLjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2Ry
aS1kZXZlbAo=
