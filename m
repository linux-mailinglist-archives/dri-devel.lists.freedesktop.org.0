Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 76A971100F0
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 16:12:48 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BB5D76E838;
	Tue,  3 Dec 2019 15:12:45 +0000 (UTC)
X-Original-To: dri-devel@freedesktop.org
Delivered-To: dri-devel@freedesktop.org
X-Greylist: delayed 391 seconds by postgrey-1.36 at gabe;
 Tue, 03 Dec 2019 15:12:44 UTC
Received: from a27-21.smtp-out.us-west-2.amazonses.com
 (a27-21.smtp-out.us-west-2.amazonses.com [54.240.27.21])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6C0866E838
 for <dri-devel@freedesktop.org>; Tue,  3 Dec 2019 15:12:44 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on
 aws-us-west-2-caf-mail-1.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No, score=-1.0 required=2.0 tests=ALL_TRUSTED,SPF_NONE
 autolearn=ham autolearn_force=no version=3.4.0
DMARC-Filter: OpenDMARC Filter v1.3.2 smtp.codeaurora.org 6DB82C447A1
From: Sharat Masetty <smasetty@codeaurora.org>
To: freedreno@lists.freedesktop.org
Subject: [PATCH 3/5] drm: msm: a6xx: Dump GBIF registers, debugbus in gpu state
Date: Tue, 3 Dec 2019 15:06:12 +0000
Message-ID: <0101016ecc4c2621-178923ff-2100-4c3d-95e2-71bdf6f61c0f-000000@us-west-2.amazonses.com>
X-Mailer: git-send-email 1.9.1
In-Reply-To: <1575385543-11290-1-git-send-email-smasetty@codeaurora.org>
References: <1575385543-11290-1-git-send-email-smasetty@codeaurora.org>
X-SES-Outgoing: 2019.12.03-54.240.27.21
Feedback-ID: 1.us-west-2.CZuq2qbDmUIuT3qdvXlRHZZCpfZqZ4GtG9v3VKgRyF0=:AmazonSES
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/simple; 
 s=zsmsymrwgfyinv5wlfyidntwsjeeldzt; d=codeaurora.org; t=1575385573;
 h=From:To:Cc:Subject:Date:Message-Id:In-Reply-To:References;
 bh=7AfX/ShoNeMgRzoz146C31IgCczv9Yjj/lwttNUdrA8=;
 b=mrXPGmtwPIQXVfB3KA4DWFlavL5SOPSTWRFpwDYxpe1sJuPAnlDubILNi82/J797
 bOtThHoJFNtlJ/lXW80Fu+COYKVdQ2K1x6b7XQBfZ9U5/wBba4pkJb4wjHY6S/A2NUN
 Vdea+2YjBwEGhF8jf1Ct1CWYm9apqSob5D6ILnkc=
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/simple; 
 s=gdwg2y3kokkkj5a55z2ilkup5wp5hhxx; d=amazonses.com; t=1575385573;
 h=From:To:Cc:Subject:Date:Message-Id:In-Reply-To:References:Feedback-ID;
 bh=7AfX/ShoNeMgRzoz146C31IgCczv9Yjj/lwttNUdrA8=;
 b=IvNSxDFWkIy0+uSKKt7RR3gG566yzFvH2xaZTHUvtA+ND7fHXpGn0nBNy6PX4S4n
 Z7XDcU29jFOR0EJ/dCJCh5Hw9361J6tz4TWv/j6rqw/j4HJfIN16w6kY4XJ2LTu1Mo5
 lMzOJ/aHcBRqHIoUqM5eSm3TQniL52Uj5Dy5eptQ=
X-Mailman-Original-Authentication-Results: aws-us-west-2-caf-mail-1.web.codeaurora.org;
 dmarc=none (p=none dis=none) header.from=codeaurora.org
X-Mailman-Original-Authentication-Results: aws-us-west-2-caf-mail-1.web.codeaurora.org;
 spf=none smtp.mailfrom=smasetty@codeaurora.org
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-arm-msm@vger.kernel.org, Sharat Masetty <smasetty@codeaurora.org>,
 dri-devel@freedesktop.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIHRoZSByZWxldmFudCBHQklGIHJlZ2lzdGVycyBhbmQgdGhlIGRlYnVnIGJ1cyB0byB0aGUg
YTZ4eCBncHUKc3RhdGUuIFRoaXMgY29tZXMgaW4gcHJldHR5IGhhbmR5IHdoZW4gZGVidWdnaW5n
IEdQVSBidXMgcmVsYXRlZAppc3N1ZXMuCgpDaGFuZ2UtSWQ6IEkyMjRmZGE3MjcwMTJhNDU2Y2Nk
MjhjYTE0Y2FmOWZjY2UyMzZlNjI5ClNpZ25lZC1vZmYtYnk6IFNoYXJhdCBNYXNldHR5IDxzbWFz
ZXR0eUBjb2RlYXVyb3JhLm9yZz4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNnh4
X2dwdV9zdGF0ZS5jIHwgNTIgKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0KIGRyaXZlcnMv
Z3B1L2RybS9tc20vYWRyZW5vL2E2eHhfZ3B1X3N0YXRlLmggfCAxNiArKysrKysrLS0KIDIgZmls
ZXMgY2hhbmdlZCwgNTUgaW5zZXJ0aW9ucygrKSwgMTMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTZ4eF9ncHVfc3RhdGUuYyBiL2RyaXZlcnMv
Z3B1L2RybS9tc20vYWRyZW5vL2E2eHhfZ3B1X3N0YXRlLmMKaW5kZXggZTY4NjMzMS4uOTliNWE0
MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTZ4eF9ncHVfc3RhdGUu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNnh4X2dwdV9zdGF0ZS5jCkBAIC0x
LDUgKzEsNSBAQAogLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKLS8qIENvcHly
aWdodCAoYykgMjAxOCBUaGUgTGludXggRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4g
Ki8KKy8qIENvcHlyaWdodCAoYykgMjAxOC0yMDE5IFRoZSBMaW51eCBGb3VuZGF0aW9uLiBBbGwg
cmlnaHRzIHJlc2VydmVkLiAqLwogCiAjaW5jbHVkZSA8bGludXgvYXNjaWk4NS5oPgogI2luY2x1
ZGUgIm1zbV9nZW0uaCIKQEAgLTMyMCw2ICszMjAsNyBAQCBzdGF0aWMgdm9pZCBhNnh4X2dldF9k
ZWJ1Z2J1cyhzdHJ1Y3QgbXNtX2dwdSAqZ3B1LAogewogCXN0cnVjdCByZXNvdXJjZSAqcmVzOwog
CXZvaWQgX19pb21lbSAqY3hkYmcgPSBOVUxMOworCWludCBucl9kZWJ1Z2J1c19ibG9ja3M7CiAK
IAkvKiBTZXQgdXAgdGhlIEdYIGRlYnVnIGJ1cyAqLwogCkBAIC0zNzQsOSArMzc1LDExIEBAIHN0
YXRpYyB2b2lkIGE2eHhfZ2V0X2RlYnVnYnVzKHN0cnVjdCBtc21fZ3B1ICpncHUsCiAJCWN4ZGJn
X3dyaXRlKGN4ZGJnLCBSRUdfQTZYWF9EQkdDX0NGR19EQkdCVVNfTUFTS0xfMywgMCk7CiAJfQog
Ci0JYTZ4eF9zdGF0ZS0+ZGVidWdidXMgPSBzdGF0ZV9rY2FsbG9jKGE2eHhfc3RhdGUsCi0JCUFS
UkFZX1NJWkUoYTZ4eF9kZWJ1Z2J1c19ibG9ja3MpLAotCQlzaXplb2YoKmE2eHhfc3RhdGUtPmRl
YnVnYnVzKSk7CisJbnJfZGVidWdidXNfYmxvY2tzID0gQVJSQVlfU0laRShhNnh4X2RlYnVnYnVz
X2Jsb2NrcykgKworCQkoYTZ4eF9oYXNfZ2JpZih0b19hZHJlbm9fZ3B1KGdwdSkpID8gMSA6IDAp
OworCisJYTZ4eF9zdGF0ZS0+ZGVidWdidXMgPSBzdGF0ZV9rY2FsbG9jKGE2eHhfc3RhdGUsIG5y
X2RlYnVnYnVzX2Jsb2NrcywKKwkJCXNpemVvZigqYTZ4eF9zdGF0ZS0+ZGVidWdidXMpKTsKIAog
CWlmIChhNnh4X3N0YXRlLT5kZWJ1Z2J1cykgewogCQlpbnQgaTsKQEAgLTM4OCwxNSArMzkxLDMx
IEBAIHN0YXRpYyB2b2lkIGE2eHhfZ2V0X2RlYnVnYnVzKHN0cnVjdCBtc21fZ3B1ICpncHUsCiAJ
CQkJJmE2eHhfc3RhdGUtPmRlYnVnYnVzW2ldKTsKIAogCQlhNnh4X3N0YXRlLT5ucl9kZWJ1Z2J1
cyA9IEFSUkFZX1NJWkUoYTZ4eF9kZWJ1Z2J1c19ibG9ja3MpOworCisJCS8qCisJCSAqIEdCSUYg
aGFzIHNhbWUgZGVidWdidXMgYXMgb2Ygb3RoZXIgR1BVIGJsb2NrcywgZmFsbCBiYWNrIHRvCisJ
CSAqIGRlZmF1bHQgcGF0aCBpZiBHUFUgdXNlcyBHQklGLCBhbHNvIEdCSUYgdXNlcyBleGFjdGx5
IHNhbWUKKwkJICogSUQgYXMgb2YgVkJJRi4KKwkJICovCisJCWlmIChhNnh4X2hhc19nYmlmKHRv
X2FkcmVub19ncHUoZ3B1KSkpIHsKKwkJCWE2eHhfZ2V0X2RlYnVnYnVzX2Jsb2NrKGdwdSwgYTZ4
eF9zdGF0ZSwKKwkJCQkmYTZ4eF9nYmlmX2RlYnVnYnVzX2Jsb2NrLAorCQkJCSZhNnh4X3N0YXRl
LT5kZWJ1Z2J1c1tpXSk7CisKKwkJCWE2eHhfc3RhdGUtPm5yX2RlYnVnYnVzICs9IDE7CisJCX0K
IAl9CiAKLQlhNnh4X3N0YXRlLT52YmlmX2RlYnVnYnVzID0KLQkJc3RhdGVfa2NhbGxvYyhhNnh4
X3N0YXRlLCAxLAotCQkJc2l6ZW9mKCphNnh4X3N0YXRlLT52YmlmX2RlYnVnYnVzKSk7CisJLyog
IER1bXAgdGhlIFZCSUYgZGVidWdidXMgb24gYXBwbGljYWJsZSB0YXJnZXRzICovCisJaWYgKCFh
Nnh4X2hhc19nYmlmKHRvX2FkcmVub19ncHUoZ3B1KSkpIHsKKwkJYTZ4eF9zdGF0ZS0+dmJpZl9k
ZWJ1Z2J1cyA9CisJCQlzdGF0ZV9rY2FsbG9jKGE2eHhfc3RhdGUsIDEsCisJCQkJCXNpemVvZigq
YTZ4eF9zdGF0ZS0+dmJpZl9kZWJ1Z2J1cykpOwogCi0JaWYgKGE2eHhfc3RhdGUtPnZiaWZfZGVi
dWdidXMpCi0JCWE2eHhfZ2V0X3ZiaWZfZGVidWdidXNfYmxvY2soZ3B1LCBhNnh4X3N0YXRlLAot
CQkJYTZ4eF9zdGF0ZS0+dmJpZl9kZWJ1Z2J1cyk7CisJCWlmIChhNnh4X3N0YXRlLT52YmlmX2Rl
YnVnYnVzKQorCQkJYTZ4eF9nZXRfdmJpZl9kZWJ1Z2J1c19ibG9jayhncHUsIGE2eHhfc3RhdGUs
CisJCQkJCWE2eHhfc3RhdGUtPnZiaWZfZGVidWdidXMpOworCX0KIAogCWlmIChjeGRiZykgewog
CQlhNnh4X3N0YXRlLT5jeF9kZWJ1Z2J1cyA9CkBAIC03NzAsMTQgKzc4OSwxNiBAQCBzdGF0aWMg
dm9pZCBhNnh4X2dldF9nbXVfcmVnaXN0ZXJzKHN0cnVjdCBtc21fZ3B1ICpncHUsCiAJCSZhNnh4
X3N0YXRlLT5nbXVfcmVnaXN0ZXJzWzFdKTsKIH0KIAorI2RlZmluZSBBNlhYX0dCSUZfUkVHTElT
VF9TSVpFICAgMQogc3RhdGljIHZvaWQgYTZ4eF9nZXRfcmVnaXN0ZXJzKHN0cnVjdCBtc21fZ3B1
ICpncHUsCiAJCXN0cnVjdCBhNnh4X2dwdV9zdGF0ZSAqYTZ4eF9zdGF0ZSwKIAkJc3RydWN0IGE2
eHhfY3Jhc2hkdW1wZXIgKmR1bXBlcikKIHsKIAlpbnQgaSwgY291bnQgPSBBUlJBWV9TSVpFKGE2
eHhfYWhiX3JlZ2xpc3QpICsKIAkJQVJSQVlfU0laRShhNnh4X3JlZ2xpc3QpICsKLQkJQVJSQVlf
U0laRShhNnh4X2hsc3FfcmVnbGlzdCk7CisJCUFSUkFZX1NJWkUoYTZ4eF9obHNxX3JlZ2xpc3Qp
ICsgQTZYWF9HQklGX1JFR0xJU1RfU0laRTsKIAlpbnQgaW5kZXggPSAwOworCXN0cnVjdCBhZHJl
bm9fZ3B1ICphZHJlbm9fZ3B1ID0gdG9fYWRyZW5vX2dwdShncHUpOwogCiAJYTZ4eF9zdGF0ZS0+
cmVnaXN0ZXJzID0gc3RhdGVfa2NhbGxvYyhhNnh4X3N0YXRlLAogCQljb3VudCwgc2l6ZW9mKCph
Nnh4X3N0YXRlLT5yZWdpc3RlcnMpKTsKQEAgLTc5Miw2ICs4MTMsMTUgQEAgc3RhdGljIHZvaWQg
YTZ4eF9nZXRfcmVnaXN0ZXJzKHN0cnVjdCBtc21fZ3B1ICpncHUsCiAJCQlhNnh4X3N0YXRlLCAm
YTZ4eF9haGJfcmVnbGlzdFtpXSwKIAkJCSZhNnh4X3N0YXRlLT5yZWdpc3RlcnNbaW5kZXgrK10p
OwogCisJaWYgKGE2eHhfaGFzX2diaWYoYWRyZW5vX2dwdSkpCisJCWE2eHhfZ2V0X2FoYl9ncHVf
cmVnaXN0ZXJzKGdwdSwKKwkJCQlhNnh4X3N0YXRlLCAmYTZ4eF9nYmlmX3JlZ2xpc3QsCisJCQkJ
JmE2eHhfc3RhdGUtPnJlZ2lzdGVyc1tpbmRleCsrXSk7CisJZWxzZQorCQlhNnh4X2dldF9haGJf
Z3B1X3JlZ2lzdGVycyhncHUsCisJCQkJYTZ4eF9zdGF0ZSwgJmE2eHhfdmJpZl9yZWdsaXN0LAor
CQkJCSZhNnh4X3N0YXRlLT5yZWdpc3RlcnNbaW5kZXgrK10pOworCiAJZm9yIChpID0gMDsgaSA8
IEFSUkFZX1NJWkUoYTZ4eF9yZWdsaXN0KTsgaSsrKQogCQlhNnh4X2dldF9jcmFzaGR1bXBlcl9y
ZWdpc3RlcnMoZ3B1LAogCQkJYTZ4eF9zdGF0ZSwgJmE2eHhfcmVnbGlzdFtpXSwKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E2eHhfZ3B1X3N0YXRlLmggYi9kcml2ZXJz
L2dwdS9kcm0vbXNtL2FkcmVuby9hNnh4X2dwdV9zdGF0ZS5oCmluZGV4IDY4Y2NjZmEuLmU2N2My
MGMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E2eHhfZ3B1X3N0YXRl
LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYTZ4eF9ncHVfc3RhdGUuaApAQCAt
MSw1ICsxLDUgQEAKIC8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCi0vKiBDb3B5
cmlnaHQgKGMpIDIwMTggVGhlIExpbnV4IEZvdW5kYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQu
ICovCisvKiBDb3B5cmlnaHQgKGMpIDIwMTgtMjAxOSBUaGUgTGludXggRm91bmRhdGlvbi4gQWxs
IHJpZ2h0cyByZXNlcnZlZC4gKi8KIAogI2lmbmRlZiBfQTZYWF9DUkFTSF9EVU1QX0hfCiAjZGVm
aW5lIF9BNlhYX0NSQVNIX0RVTVBfSF8KQEAgLTMwNywxMSArMzA3LDIwIEBAIHN0cnVjdCBhNnh4
X3JlZ2lzdGVycyB7CiAJMHgzNDEwLCAweDM0MTAsIDB4MzgwMCwgMHgzODAxLAogfTsKIAorc3Rh
dGljIGNvbnN0IHUzMiBhNnh4X2diaWZfcmVnaXN0ZXJzW10gPSB7CisJMHgzQzAwLCAwWDNDMEIs
IDBYM0M0MCwgMFgzQzQ3LCAwWDNDQzAsIDBYM0NEMSwgMHhFM0EsIDB4RTNBLAorfTsKKwogc3Rh
dGljIGNvbnN0IHN0cnVjdCBhNnh4X3JlZ2lzdGVycyBhNnh4X2FoYl9yZWdsaXN0W10gPSB7CiAJ
UkVHUyhhNnh4X2FoYl9yZWdpc3RlcnMsIDAsIDApLAotCVJFR1MoYTZ4eF92YmlmX3JlZ2lzdGVy
cywgMCwgMCksCiB9OwogCitzdGF0aWMgY29uc3Qgc3RydWN0IGE2eHhfcmVnaXN0ZXJzIGE2eHhf
dmJpZl9yZWdsaXN0ID0KKwkJCVJFR1MoYTZ4eF92YmlmX3JlZ2lzdGVycywgMCwgMCk7CisKK3N0
YXRpYyBjb25zdCBzdHJ1Y3QgYTZ4eF9yZWdpc3RlcnMgYTZ4eF9nYmlmX3JlZ2xpc3QgPQorCQkJ
UkVHUyhhNnh4X2diaWZfcmVnaXN0ZXJzLCAwLCAwKTsKKwogc3RhdGljIGNvbnN0IHUzMiBhNnh4
X2dtdV9neF9yZWdpc3RlcnNbXSA9IHsKIAkvKiBHTVUgR1ggKi8KIAkweDAwMDAsIDB4MDAwMCwg
MHgwMDEwLCAweDAwMTMsIDB4MDAxNiwgMHgwMDE2LCAweDAwMTgsIDB4MDAxYiwKQEAgLTQyMiw2
ICs0MzEsOSBAQCBzdHJ1Y3QgYTZ4eF9yZWdpc3RlcnMgewogCURFQlVHQlVTKEE2WFhfREJHQlVT
X1RQTDFfMywgMHgxMDApLAogfTsKIAorc3RhdGljIGNvbnN0IHN0cnVjdCBhNnh4X2RlYnVnYnVz
X2Jsb2NrIGE2eHhfZ2JpZl9kZWJ1Z2J1c19ibG9jayA9CisJCQlERUJVR0JVUyhBNlhYX0RCR0JV
U19WQklGLCAweDEwMCk7CisKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgYTZ4eF9kZWJ1Z2J1c19ibG9j
ayBhNnh4X2N4X2RlYnVnYnVzX2Jsb2Nrc1tdID0gewogCURFQlVHQlVTKEE2WFhfREJHQlVTX0dN
VV9DWCwgMHgxMDApLAogCURFQlVHQlVTKEE2WFhfREJHQlVTX0NYLCAweDEwMCksCi0tIAoxLjku
MQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRl
dmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
