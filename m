Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 804EC5DE6E
	for <lists+dri-devel@lfdr.de>; Wed,  3 Jul 2019 09:13:28 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 510006E0CE;
	Wed,  3 Jul 2019 07:13:22 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from lelv0142.ext.ti.com (lelv0142.ext.ti.com [198.47.23.249])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E93A0898E4
 for <dri-devel@lists.freedesktop.org>; Tue,  2 Jul 2019 11:00:02 +0000 (UTC)
Received: from fllv0034.itg.ti.com ([10.64.40.246])
 by lelv0142.ext.ti.com (8.15.2/8.15.2) with ESMTP id x62AxvvU029361;
 Tue, 2 Jul 2019 05:59:57 -0500
Received: from DLEE108.ent.ti.com (dlee108.ent.ti.com [157.170.170.38])
 by fllv0034.itg.ti.com (8.15.2/8.15.2) with ESMTPS id x62AxulH000350
 (version=TLSv1.2 cipher=AES256-GCM-SHA384 bits=256 verify=FAIL);
 Tue, 2 Jul 2019 05:59:57 -0500
Received: from DLEE111.ent.ti.com (157.170.170.22) by DLEE108.ent.ti.com
 (157.170.170.38) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5; Tue, 2 Jul
 2019 05:59:56 -0500
Received: from lelv0327.itg.ti.com (10.180.67.183) by DLEE111.ent.ti.com
 (157.170.170.22) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5 via
 Frontend Transport; Tue, 2 Jul 2019 05:59:56 -0500
Received: from [10.250.97.31] (ileax41-snat.itg.ti.com [10.172.224.153])
 by lelv0327.itg.ti.com (8.15.2/8.15.2) with ESMTP id x62AxsFr013069;
 Tue, 2 Jul 2019 05:59:54 -0500
Subject: Re: [PATCH 3/4] backlight: add led-backlight driver
To: Daniel Thompson <daniel.thompson@linaro.org>
References: <20190701151423.30768-1-jjhiblot@ti.com>
 <20190701151423.30768-4-jjhiblot@ti.com>
 <20190702095434.d426lichmaffz7a5@holly.lan>
From: Jean-Jacques Hiblot <jjhiblot@ti.com>
Message-ID: <531e237c-b570-5270-6fc3-6629a8bf7acd@ti.com>
Date: Tue, 2 Jul 2019 12:59:53 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.1
MIME-Version: 1.0
In-Reply-To: <20190702095434.d426lichmaffz7a5@holly.lan>
Content-Language: en-US
X-EXCLAIMER-MD-CONFIG: e1e8a2fd-e40a-4ac6-ac9b-f7e9cc9ee180
X-Mailman-Approved-At: Wed, 03 Jul 2019 07:13:21 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ti.com; s=ti-com-17Q1; t=1562065197;
 bh=CCDyBlchKQUNLZy4YuJIfjqXr+CRxvVcBqTPhxg7wrM=;
 h=Subject:To:CC:References:From:Date:In-Reply-To;
 b=P9n/3E0mUEX3DmGp2fFy7bzfV48YR4UL0DZuoWjZYUAcp0/B48qwJf7visdv79lpd
 /q9z3e4fdg3CwJMttpTz3sBr21Xjo4vCzyIgiYnEGRDkEEr81RddQORCSXKpDUJdlm
 6yBJogoUW0Ygo9JSq/nqkCeVDGI2cecdH2osVJ8M=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, jingoohan1@gmail.com, tomi.valkeinen@ti.com,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 robh+dt@kernel.org, jacek.anaszewski@gmail.com, pavel@ucw.cz,
 lee.jones@linaro.org, linux-leds@vger.kernel.org, dmurphy@ti.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgRGFuaWVsLAoKT24gMDIvMDcvMjAxOSAxMTo1NCwgRGFuaWVsIFRob21wc29uIHdyb3RlOgo+
IE9uIE1vbiwgSnVsIDAxLCAyMDE5IGF0IDA1OjE0OjIyUE0gKzAyMDAsIEplYW4tSmFjcXVlcyBI
aWJsb3Qgd3JvdGU6Cj4+IEZyb206IFRvbWkgVmFsa2VpbmVuIDx0b21pLnZhbGtlaW5lbkB0aS5j
b20+Cj4+Cj4+IFRoaXMgcGF0Y2ggYWRkcyBhIGxlZC1iYWNrbGlnaHQgZHJpdmVyIChsZWRfYmwp
LCB3aGljaCBpcyBtb3N0bHkgc2ltaWxhciB0bwo+PiBwd21fYmwgZXhjZXB0IHRoZSBkcml2ZXIg
dXNlcyBhIExFRCBjbGFzcyBkcml2ZXIgdG8gYWRqdXN0IHRoZSBicmlnaHRuZXNzCj4+IGluIHRo
ZSBIVy4KPj4KPj4gU2lnbmVkLW9mZi1ieTogVG9taSBWYWxrZWluZW4gPHRvbWkudmFsa2VpbmVu
QHRpLmNvbT4KPj4gU2lnbmVkLW9mZi1ieTogSmVhbi1KYWNxdWVzIEhpYmxvdCA8ampoaWJsb3RA
dGkuY29tPgo+PiAtLS0KPj4gICBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9LY29uZmlnICB8ICAg
NyArCj4+ICAgZHJpdmVycy92aWRlby9iYWNrbGlnaHQvTWFrZWZpbGUgfCAgIDEgKwo+PiAgIGRy
aXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xlZF9ibC5jIHwgMjE3ICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysKPj4gICAzIGZpbGVzIGNoYW5nZWQsIDIyNSBpbnNlcnRpb25zKCspCj4+ICAg
Y3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xlZF9ibC5jCj4+Cj4+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9LY29uZmlnIGIvZHJpdmVycy92
aWRlby9iYWNrbGlnaHQvS2NvbmZpZwo+PiBpbmRleCA4YjA4MWQ2MTc3M2UuLjU4NWExNzg3NjE4
YyAxMDA2NDQKPj4gLS0tIGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvS2NvbmZpZwo+PiArKysg
Yi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9LY29uZmlnCj4+IEBAIC00NTgsNiArNDU4LDEzIEBA
IGNvbmZpZyBCQUNLTElHSFRfUkFWRV9TUAo+PiAgIAloZWxwCj4+ICAgCSAgU3VwcG9ydCBmb3Ig
YmFja2xpZ2h0IGNvbnRyb2wgb24gUkFWRSBTUCBkZXZpY2UuCj4+ICAgCj4+ICtjb25maWcgQkFD
S0xJR0hUX0xFRAo+PiArCXRyaXN0YXRlICJHZW5lcmljIExFRCBiYXNlZCBCYWNrbGlnaHQgRHJp
dmVyIgo+PiArCWRlcGVuZHMgb24gTEVEU19DTEFTUyAmJiBPRgo+PiArCWhlbHAKPj4gKwkgIElm
IHlvdSBoYXZlIGEgTENEIGJhY2tsaWdodCBhZGp1c3RhYmxlIGJ5IExFRCBjbGFzcyBkcml2ZXIs
IHNheSBZCj4+ICsJICB0byBlbmFibGUgdGhpcyBkcml2ZXIuCj4+ICsKPj4gICBlbmRpZiAjIEJB
Q0tMSUdIVF9DTEFTU19ERVZJQ0UKPj4gICAKPj4gICBlbmRtZW51Cj4+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9NYWtlZmlsZSBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0
L01ha2VmaWxlCj4+IGluZGV4IDYzYzUwN2MwNzQzNy4uMmE2NzY0Mjk2NmE1IDEwMDY0NAo+PiAt
LS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9NYWtlZmlsZQo+PiArKysgYi9kcml2ZXJzL3Zp
ZGVvL2JhY2tsaWdodC9NYWtlZmlsZQo+PiBAQCAtNTcsMyArNTcsNCBAQCBvYmotJChDT05GSUdf
QkFDS0xJR0hUX1RQUzY1MjE3KQkrPSB0cHM2NTIxN19ibC5vCj4+ICAgb2JqLSQoQ09ORklHX0JB
Q0tMSUdIVF9XTTgzMVgpCQkrPSB3bTgzMXhfYmwubwo+PiAgIG9iai0kKENPTkZJR19CQUNLTElH
SFRfQVJDWENOTikgCSs9IGFyY3hjbm5fYmwubwo+PiAgIG9iai0kKENPTkZJR19CQUNLTElHSFRf
UkFWRV9TUCkJCSs9IHJhdmUtc3AtYmFja2xpZ2h0Lm8KPj4gK29iai0kKENPTkZJR19CQUNLTElH
SFRfTEVEKQkJKz0gbGVkX2JsLm8KPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xp
Z2h0L2xlZF9ibC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvbGVkX2JsLmMKPj4gbmV3IGZp
bGUgbW9kZSAxMDA2NDQKPj4gaW5kZXggMDAwMDAwMDAwMDAwLi5lNjk5OTI0Y2MyYmMKPj4gLS0t
IC9kZXYvbnVsbAo+PiArKysgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9sZWRfYmwuYwo+PiBA
QCAtMCwwICsxLDIxNyBAQAo+PiArLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAK
Pj4gKy8qCj4+ICsgKiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAxOCBUZXhhcyBJbnN0cnVtZW50cyBJ
bmNvcnBvcmF0ZWQgLSAgaHR0cDovL3d3dy50aS5jb20vCj4+ICsgKiBBdXRob3I6IFRvbWkgVmFs
a2VpbmVuIDx0b21pLnZhbGtlaW5lbkB0aS5jb20+Cj4+ICsgKgo+PiArICogQmFzZWQgb24gcHdt
X2JsLmMKPj4gKyAqLwo+PiArCj4+ICsjaW5jbHVkZSA8bGludXgvYmFja2xpZ2h0Lmg+Cj4+ICsj
aW5jbHVkZSA8bGludXgvZ3Bpby9jb25zdW1lci5oPgo+PiArI2luY2x1ZGUgPGxpbnV4L2xlZHMu
aD4KPj4gKyNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4KPj4gKyNpbmNsdWRlIDxsaW51eC9wbGF0
Zm9ybV9kZXZpY2UuaD4KPj4gKyNpbmNsdWRlIDxsaW51eC9yZWd1bGF0b3IvY29uc3VtZXIuaD4K
Pj4gKyNpbmNsdWRlIDxsaW51eC9zbGFiLmg+Cj4+ICsKPj4gK3N0cnVjdCBsZWRfYmxfZGF0YSB7
Cj4+ICsJc3RydWN0IGRldmljZQkJKmRldjsKPj4gKwlzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZQkq
YmxfZGV2Owo+PiArCj4+ICsJdW5zaWduZWQgaW50CQkqbGV2ZWxzOwo+PiArCWJvb2wJCQllbmFi
bGVkOwo+PiArCXN0cnVjdCByZWd1bGF0b3IJKnBvd2VyX3N1cHBseTsKPj4gKwlzdHJ1Y3QgZ3Bp
b19kZXNjCSplbmFibGVfZ3BpbzsKPiBGb3IgdGhlIFBXTSBkcml2ZXIgdGhlIHBvd2VyX3N1cHBs
eSBhbmQgZW5hYmxlX2dwaW8gYXJlIHBhcnQgb2YgbWFuYWdpbmcKPiBhIGR1bWIgTEVEIGRyaXZl
ciBkZXZpY2UgdGhhdCBpcyBkb3duc3RyZWFtIG9mIHRoZSBQV00uCj4KPiBXaGF0IGlzIHRoZWly
IHB1cnBvc2Ugd2hlbiB3ZSB3cmFwIGFuIExFRCBkZXZpY2U/IFB1dCBhbm90aGVyIHdoeSB3aHkg
aXNuJ3QKPiB0aGUgTEVEIGRldmljZSBkcml2ZXIgcmVzcG9uc2libGUgZm9yIHRoaXM/CgpUaGlz
IHF1ZXN0aW9uIGNhbWUgdXAgd2hlbiB0aGUgcGF0Y2ggd2FzIGZpcnN0IHByb3Bvc2VkIGluIDIw
MTUuIEhlcmUgaXMgCnRoZSBhbnN3ZXIgZnJvbSBUb21pIGF0IHRoZSB0aW1lLiBJdCBpcyBzdGls
bCByZWxldmFudC4KCiJUaGVzZSBhcmUgZm9yIHRoZSBiYWNrbGlnaHQsIG5vdCBmb3IgdGhlIExF
RCBjaGlwLiBTbyAiTEVEIiBoZXJlIGlzIGEKY2hpcCB0aGF0IHByb2R1Y2VzIChtb3N0IGxpa2Vs
eSkgYSBQV00gc2lnbmFsLCBhbmQgImJhY2tsaWdodCIgaXMgdGhlCmNvbGxlY3Rpb24gb2YgY29t
cG9uZW50cyB0aGF0IHVzZSB0aGUgUFdNIHRvIHByb2R1Y2UgdGhlIGJhY2tsaWdodAppdHNlbGYs
IGFuZCB1c2UgdGhlIHBvd2VyLXN1cHBseSBhbmQgZ3Bpb3MuIgogIAoKPgo+PiArCj4+ICsJc3Ry
dWN0IGxlZF9jbGFzc2RldiAqbGVkX2NkZXY7Cj4+ICsKPj4gKwl1bnNpZ25lZCBpbnQgbWF4X2Jy
aWdodG5lc3M7Cj4+ICsJdW5zaWduZWQgaW50IGRlZmF1bHRfYnJpZ2h0bmVzczsKPj4gK307Cj4+
ICsKPj4gK3N0YXRpYyB2b2lkIGxlZF9ibF9zZXRfYnJpZ2h0bmVzcyhzdHJ1Y3QgbGVkX2JsX2Rh
dGEgKnByaXYsIGludCBicmlnaHRuZXNzKQo+PiArewo+PiArCWludCBlcnI7Cj4+ICsKPj4gKwlp
ZiAoIXByaXYtPmVuYWJsZWQpIHsKPj4gKwkJZXJyID0gcmVndWxhdG9yX2VuYWJsZShwcml2LT5w
b3dlcl9zdXBwbHkpOwo+PiArCQlpZiAoZXJyIDwgMCkKPj4gKwkJCWRldl9lcnIocHJpdi0+ZGV2
LCAiZmFpbGVkIHRvIGVuYWJsZSBwb3dlciBzdXBwbHlcbiIpOwo+PiArCj4+ICsJCWlmIChwcml2
LT5lbmFibGVfZ3BpbykKPj4gKwkJCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChwcml2LT5lbmFi
bGVfZ3BpbywgMSk7Cj4+ICsJfQo+PiArCj4+ICsJbGVkX3NldF9icmlnaHRuZXNzKHByaXYtPmxl
ZF9jZGV2LCBwcml2LT5sZXZlbHNbYnJpZ2h0bmVzc10pOwo+PiArCj4+ICsJcHJpdi0+ZW5hYmxl
ZCA9IHRydWU7Cj4+ICt9Cj4+ICsKPj4gK3N0YXRpYyB2b2lkIGxlZF9ibF9wb3dlcl9vZmYoc3Ry
dWN0IGxlZF9ibF9kYXRhICpwcml2KQo+PiArewo+PiArCWlmICghcHJpdi0+ZW5hYmxlZCkKPj4g
KwkJcmV0dXJuOwo+PiArCj4+ICsJbGVkX3NldF9icmlnaHRuZXNzKHByaXYtPmxlZF9jZGV2LCBM
RURfT0ZGKTsKPj4gKwo+PiArCWlmIChwcml2LT5lbmFibGVfZ3BpbykKPj4gKwkJZ3Bpb2Rfc2V0
X3ZhbHVlX2NhbnNsZWVwKHByaXYtPmVuYWJsZV9ncGlvLCAwKTsKPj4gKwo+PiArCXJlZ3VsYXRv
cl9kaXNhYmxlKHByaXYtPnBvd2VyX3N1cHBseSk7Cj4+ICsKPj4gKwlwcml2LT5lbmFibGVkID0g
ZmFsc2U7Cj4+ICt9Cj4+ICsKPj4gK3N0YXRpYyBpbnQgbGVkX2JsX3VwZGF0ZV9zdGF0dXMoc3Ry
dWN0IGJhY2tsaWdodF9kZXZpY2UgKmJsKQo+PiArewo+PiArCXN0cnVjdCBsZWRfYmxfZGF0YSAq
cHJpdiA9IGJsX2dldF9kYXRhKGJsKTsKPj4gKwlpbnQgYnJpZ2h0bmVzcyA9IGJsLT5wcm9wcy5i
cmlnaHRuZXNzOwo+PiArCj4+ICsJaWYgKGJsLT5wcm9wcy5wb3dlciAhPSBGQl9CTEFOS19VTkJM
QU5LIHx8Cj4+ICsJICAgIGJsLT5wcm9wcy5mYl9ibGFuayAhPSBGQl9CTEFOS19VTkJMQU5LIHx8
Cj4+ICsJICAgIGJsLT5wcm9wcy5zdGF0ZSAmIEJMX0NPUkVfRkJCTEFOSykKPj4gKwkJYnJpZ2h0
bmVzcyA9IDA7Cj4+ICsKPj4gKwlpZiAoYnJpZ2h0bmVzcyA+IDApCj4+ICsJCWxlZF9ibF9zZXRf
YnJpZ2h0bmVzcyhwcml2LCBicmlnaHRuZXNzKTsKPj4gKwllbHNlCj4+ICsJCWxlZF9ibF9wb3dl
cl9vZmYocHJpdik7Cj4+ICsKPj4gKwlyZXR1cm4gMDsKPj4gK30KPj4gKwo+PiArc3RhdGljIGNv
bnN0IHN0cnVjdCBiYWNrbGlnaHRfb3BzIGxlZF9ibF9vcHMgPSB7Cj4+ICsJLnVwZGF0ZV9zdGF0
dXMJPSBsZWRfYmxfdXBkYXRlX3N0YXR1cywKPj4gK307Cj4+ICsKPj4gK3N0YXRpYyBpbnQgbGVk
X2JsX3BhcnNlX2R0KHN0cnVjdCBkZXZpY2UgKmRldiwKPj4gKwkJCSAgIHN0cnVjdCBsZWRfYmxf
ZGF0YSAqcHJpdikKPj4gK3sKPj4gKwlzdHJ1Y3QgZGV2aWNlX25vZGUgKm5vZGUgPSBkZXYtPm9m
X25vZGU7Cj4+ICsJaW50IG51bV9sZXZlbHM7Cj4+ICsJdTMyICpsZXZlbHM7Cj4+ICsJdTMyIHZh
bHVlOwo+PiArCWludCByZXQ7Cj4+ICsKPj4gKwlpZiAoIW5vZGUpCj4+ICsJCXJldHVybiAtRU5P
REVWOwo+PiArCj4+ICsJbnVtX2xldmVscyA9IG9mX3Byb3BlcnR5X2NvdW50X3UzMl9lbGVtcyhu
b2RlLCAiYnJpZ2h0bmVzcy1sZXZlbHMiKTsKPiBJcyB0aGVyZSBhbnkgcmVhc29uIHRoYXQgdGhp
cyBmdW5jdGlvbiBjYW5ub3QgdXNlIHRoZSAobW9yZSBnZW5lcmljKQo+IGRldmljZSBwcm9wZXJ0
eSBBUEkgdGhyb3VnaG91dCB0aGlzIGZ1bmN0aW9uPwoKTm8gcmVhc29uLiBUaGUgY29kZSBpcyBh
IGJpdCBvbGQsIGFuZCBjYW4gZG8gd2l0aCBhbiB1cGRhdGUuCgpBcmUgeW91IHRoaW5raW5nIG9m
IG9mX3Byb3BlcnR5X3JlYWRfdTMyX2FycmF5KCksIG9yIGFub3RoZXIgZnVuY3Rpb24gPwoKSkoK
Cj4KPgo+Cj4gRGFuaWVsLgo+Cj4KPj4gKwlpZiAobnVtX2xldmVscyA8IDApCj4+ICsJCXJldHVy
biBudW1fbGV2ZWxzOwo+PiArCj4+ICsJbGV2ZWxzID0gZGV2bV9remFsbG9jKGRldiwgc2l6ZW9m
KHUzMikgKiBudW1fbGV2ZWxzLCBHRlBfS0VSTkVMKTsKPj4gKwlpZiAoIWxldmVscykKPj4gKwkJ
cmV0dXJuIC1FTk9NRU07Cj4+ICsKPj4gKwlyZXQgPSBvZl9wcm9wZXJ0eV9yZWFkX3UzMl9hcnJh
eShub2RlLCAiYnJpZ2h0bmVzcy1sZXZlbHMiLAo+PiArCQkJCQkgbGV2ZWxzLAo+PiArCQkJCQkg
bnVtX2xldmVscyk7Cj4+ICsJaWYgKHJldCA8IDApCj4+ICsJCXJldHVybiByZXQ7Cj4+ICsKPj4g
KwlyZXQgPSBvZl9wcm9wZXJ0eV9yZWFkX3UzMihub2RlLCAiZGVmYXVsdC1icmlnaHRuZXNzLWxl
dmVsIiwgJnZhbHVlKTsKPj4gKwlpZiAocmV0IDwgMCkKPj4gKwkJcmV0dXJuIHJldDsKPj4gKwo+
PiArCWlmICh2YWx1ZSA+PSBudW1fbGV2ZWxzKSB7Cj4+ICsJCWRldl9lcnIoZGV2LCAiaW52YWxp
ZCBkZWZhdWx0LWJyaWdodG5lc3MtbGV2ZWxcbiIpOwo+PiArCQlyZXR1cm4gLUVJTlZBTDsKPj4g
Kwl9Cj4+ICsKPj4gKwlwcml2LT5sZXZlbHMgPSBsZXZlbHM7Cj4+ICsJcHJpdi0+bWF4X2JyaWdo
dG5lc3MgPSBudW1fbGV2ZWxzIC0gMTsKPj4gKwlwcml2LT5kZWZhdWx0X2JyaWdodG5lc3MgPSB2
YWx1ZTsKPj4gKwo+PiArCXJldHVybiAwOwo+PiArfQo+PiArCj4+ICtzdGF0aWMgaW50IGxlZF9i
bF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQo+PiArewo+PiArCXN0cnVjdCBi
YWNrbGlnaHRfcHJvcGVydGllcyBwcm9wczsKPj4gKwlzdHJ1Y3QgbGVkX2JsX2RhdGEgKnByaXY7
Cj4+ICsJaW50IHJldDsKPj4gKwo+PiArCXByaXYgPSBkZXZtX2t6YWxsb2MoJnBkZXYtPmRldiwg
c2l6ZW9mKCpwcml2KSwgR0ZQX0tFUk5FTCk7Cj4+ICsJaWYgKCFwcml2KQo+PiArCQlyZXR1cm4g
LUVOT01FTTsKPj4gKwo+PiArCXBsYXRmb3JtX3NldF9kcnZkYXRhKHBkZXYsIHByaXYpOwo+PiAr
Cj4+ICsJcHJpdi0+ZGV2ID0gJnBkZXYtPmRldjsKPj4gKwlwcml2LT5sZWRfY2RldiA9IHRvX2xl
ZF9jbGFzc2RldihwZGV2LT5kZXYucGFyZW50KTsKPj4gKwo+PiArCXJldCA9IGxlZF9ibF9wYXJz
ZV9kdCgmcGRldi0+ZGV2LCBwcml2KTsKPj4gKwlpZiAocmV0IDwgMCkgewo+PiArCQlpZiAocmV0
ICE9IC1FUFJPQkVfREVGRVIpCj4+ICsJCQlkZXZfZXJyKCZwZGV2LT5kZXYsICJmYWlsZWQgdG8g
cGFyc2UgRFQgZGF0YVxuIik7Cj4+ICsJCXJldHVybiByZXQ7Cj4+ICsJfQo+PiArCj4+ICsJcHJp
di0+ZW5hYmxlX2dwaW8gPSBkZXZtX2dwaW9kX2dldF9vcHRpb25hbCgmcGRldi0+ZGV2LCAiZW5h
YmxlIiwKPj4gKwkJCSAgICBHUElPRF9PVVRfTE9XKTsKPj4gKwlpZiAoSVNfRVJSKHByaXYtPmVu
YWJsZV9ncGlvKSkgewo+PiArCQlyZXQgPSBQVFJfRVJSKHByaXYtPmVuYWJsZV9ncGlvKTsKPj4g
KwkJZ290byBlcnI7Cj4+ICsJfQo+PiArCj4+ICsJcHJpdi0+cG93ZXJfc3VwcGx5ID0gZGV2bV9y
ZWd1bGF0b3JfZ2V0KCZwZGV2LT5kZXYsICJwb3dlciIpOwo+PiArCWlmIChJU19FUlIocHJpdi0+
cG93ZXJfc3VwcGx5KSkgewo+PiArCQlyZXQgPSBQVFJfRVJSKHByaXYtPnBvd2VyX3N1cHBseSk7
Cj4+ICsJCWdvdG8gZXJyOwo+PiArCX0KPj4gKwo+PiArCW1lbXNldCgmcHJvcHMsIDAsIHNpemVv
ZihzdHJ1Y3QgYmFja2xpZ2h0X3Byb3BlcnRpZXMpKTsKPj4gKwlwcm9wcy50eXBlID0gQkFDS0xJ
R0hUX1JBVzsKPj4gKwlwcm9wcy5tYXhfYnJpZ2h0bmVzcyA9IHByaXYtPm1heF9icmlnaHRuZXNz
Owo+PiArCXByaXYtPmJsX2RldiA9IGJhY2tsaWdodF9kZXZpY2VfcmVnaXN0ZXIoZGV2X25hbWUo
JnBkZXYtPmRldiksCj4+ICsJCQkmcGRldi0+ZGV2LCBwcml2LCAmbGVkX2JsX29wcywgJnByb3Bz
KTsKPj4gKwlpZiAoSVNfRVJSKHByaXYtPmJsX2RldikpIHsKPj4gKwkJZGV2X2VycigmcGRldi0+
ZGV2LCAiZmFpbGVkIHRvIHJlZ2lzdGVyIGJhY2tsaWdodFxuIik7Cj4+ICsJCXJldCA9IFBUUl9F
UlIocHJpdi0+YmxfZGV2KTsKPj4gKwkJZ290byBlcnI7Cj4+ICsJfQo+PiArCj4+ICsJcHJpdi0+
YmxfZGV2LT5wcm9wcy5icmlnaHRuZXNzID0gcHJpdi0+ZGVmYXVsdF9icmlnaHRuZXNzOwo+PiAr
CWJhY2tsaWdodF91cGRhdGVfc3RhdHVzKHByaXYtPmJsX2Rldik7Cj4+ICsKPj4gKwlyZXR1cm4g
MDsKPj4gKwo+PiArZXJyOgo+PiArCj4+ICsJcmV0dXJuIHJldDsKPj4gK30KPj4gKwo+PiArc3Rh
dGljIGludCBsZWRfYmxfcmVtb3ZlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCj4+ICt7
Cj4+ICsJc3RydWN0IGxlZF9ibF9kYXRhICpwcml2ID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRl
dik7Cj4+ICsJc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJsID0gcHJpdi0+YmxfZGV2Owo+PiAr
Cj4+ICsJYmFja2xpZ2h0X2RldmljZV91bnJlZ2lzdGVyKGJsKTsKPj4gKwo+PiArCWxlZF9ibF9w
b3dlcl9vZmYocHJpdik7Cj4+ICsKPj4gKwlyZXR1cm4gMDsKPj4gK30KPj4gKwo+PiArc3RhdGlj
IGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgbGVkX2JsX29mX21hdGNoW10gPSB7Cj4+ICsJeyAu
Y29tcGF0aWJsZSA9ICJsZWQtYmFja2xpZ2h0IiB9LAo+PiArCXsgfQo+PiArfTsKPj4gKwo+PiAr
TU9EVUxFX0RFVklDRV9UQUJMRShvZiwgbGVkX2JsX29mX21hdGNoKTsKPj4gKwo+PiArc3RhdGlj
IHN0cnVjdCBwbGF0Zm9ybV9kcml2ZXIgbGVkX2JsX2RyaXZlciA9IHsKPj4gKwkuZHJpdmVyCQk9
IHsKPj4gKwkJLm5hbWUJCT0gImxlZC1iYWNrbGlnaHQiLAo+PiArCQkub2ZfbWF0Y2hfdGFibGUJ
PSBvZl9tYXRjaF9wdHIobGVkX2JsX29mX21hdGNoKSwKPj4gKwl9LAo+PiArCS5wcm9iZQkJPSBs
ZWRfYmxfcHJvYmUsCj4+ICsJLnJlbW92ZQkJPSBsZWRfYmxfcmVtb3ZlLAo+PiArfTsKPj4gKwo+
PiArbW9kdWxlX3BsYXRmb3JtX2RyaXZlcihsZWRfYmxfZHJpdmVyKTsKPj4gKwo+PiArTU9EVUxF
X0RFU0NSSVBUSU9OKCJMRUQgYmFzZWQgQmFja2xpZ2h0IERyaXZlciIpOwo+PiArTU9EVUxFX0xJ
Q0VOU0UoIkdQTCIpOwo+PiArTU9EVUxFX0FMSUFTKCJwbGF0Zm9ybTpsZWQtYmFja2xpZ2h0Iik7
Cj4+IC0tIAo+PiAyLjE3LjEKPj4KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
ZHJpLWRldmVs
