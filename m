Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9D85A88B25
	for <lists+dri-devel@lfdr.de>; Sat, 10 Aug 2019 13:55:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7CFC16E3DD;
	Sat, 10 Aug 2019 11:55:01 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from fireflyinternet.com (mail.fireflyinternet.com [109.228.58.192])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E0B546E3D3;
 Sat, 10 Aug 2019 11:54:59 +0000 (UTC)
X-Default-Received-SPF: pass (skip=forwardok (res=PASS))
 x-ip-name=78.156.65.138; 
Received: from localhost (unverified [78.156.65.138]) 
 by fireflyinternet.com (Firefly Internet (M1)) with ESMTP (TLS) id
 17952778-1500050 for multiple; Sat, 10 Aug 2019 12:54:57 +0100
MIME-Version: 1.0
To: Matthew Auld <matthew.auld@intel.com>, intel-gfx@lists.freedesktop.org
From: Chris Wilson <chris@chris-wilson.co.uk>
In-Reply-To: <20190809222643.23142-36-matthew.auld@intel.com>
References: <20190809222643.23142-1-matthew.auld@intel.com>
 <20190809222643.23142-36-matthew.auld@intel.com>
Message-ID: <156543809478.2301.11253113462201638366@skylake-alporthouse-com>
User-Agent: alot/0.6
Subject: Re: [Intel-gfx] [PATCH v3 35/37] drm/i915: Introduce
 GEM_OBJECT_SETPARAM with I915_PARAM_MEMORY_REGION
Date: Sat, 10 Aug 2019 12:54:54 +0100
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UXVvdGluZyBNYXR0aGV3IEF1bGQgKDIwMTktMDgtMDkgMjM6MjY6NDEpCj4gRnJvbTogQWJkaWVs
IEphbnVsZ3VlIDxhYmRpZWwuamFudWxndWVAbGludXguaW50ZWwuY29tPgo+IAo+IFRoaXMgY2Fs
bCB3aWxsIHNwZWNpZnkgd2hpY2ggbWVtb3J5IHJlZ2lvbiBhbiBvYmplY3Qgc2hvdWxkIGJlIHBs
YWNlZC4KPiAKPiBOb3RlIHRoYXQgY2hhbmdpbmcgdGhlIG9iamVjdCdzIGJhY2tpbmcgc3RvcmFn
ZSBzaG91bGQgYmUgaW1tZWRpYXRlbHkKPiBkb25lIGFmdGVyIGFuIG9iamVjdCBpcyBjcmVhdGVk
IG9yIGlmIGl0J3Mgbm90IHlldCBpbiB1c2UsIG90aGVyd2lzZQo+IHRoaXMgd2lsbCBmYWlsIG9u
IGEgYnVzeSBvYmplY3QuCj4gCj4gU2lnbmVkLW9mZi1ieTogQWJkaWVsIEphbnVsZ3VlIDxhYmRp
ZWwuamFudWxndWVAbGludXguaW50ZWwuY29tPgo+IENjOiBKb29uYXMgTGFodGluZW4gPGpvb25h
cy5sYWh0aW5lbkBsaW51eC5pbnRlbC5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMgfCAgMTcgKysrCj4gIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9pOTE1X2dlbV9jb250ZXh0LmggfCAgIDIgKwo+ICBkcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1faW9jdGxzLmggIHwgICAyICsKPiAgZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2Vt
L2k5MTVfZ2VtX29iamVjdC5jICB8IDExNSArKysrKysrKysrKysrKysrKysrKwo+ICBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jICAgICAgICAgICAgIHwgICAyICstCj4gIGluY2x1ZGUv
dWFwaS9kcm0vaTkxNV9kcm0uaCAgICAgICAgICAgICAgICAgfCAgMjMgKysrKwo+ICA2IGZpbGVz
IGNoYW5nZWQsIDE2MCBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCj4gCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jb250ZXh0LmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5jCj4gaW5kZXggYjQwN2JhYWYwMDE0
Li41NzIwMzNhYzZlM2IgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2NvbnRleHQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9jb250ZXh0LmMKPiBAQCAtNzYsNiArNzYsNyBAQAo+ICAjaW5jbHVkZSAiaTkxNV9nbG9iYWxz
LmgiCj4gICNpbmNsdWRlICJpOTE1X3RyYWNlLmgiCj4gICNpbmNsdWRlICJpOTE1X3VzZXJfZXh0
ZW5zaW9ucy5oIgo+ICsjaW5jbHVkZSAiaTkxNV9nZW1faW9jdGxzLmgiCj4gIAo+ICAjZGVmaW5l
IEFMTF9MM19TTElDRVMoZGV2KSAoMSA8PCBOVU1fTDNfU0xJQ0VTKGRldikpIC0gMQo+ICAKPiBA
QCAtMjMwOCw2ICsyMzA5LDIyIEBAIGludCBpOTE1X2dlbV9jb250ZXh0X3NldHBhcmFtX2lvY3Rs
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCj4gICAgICAgICByZXR1cm4gcmV0
Owo+ICB9Cj4gIAo+ICtpbnQgaTkxNV9nZW1fc2V0cGFyYW1faW9jdGwoc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwgdm9pZCAqZGF0YSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0
IGRybV9maWxlICpmaWxlKQoKVGhpcyBkb2VzIG5vdCBuZWVkIHRvIGJlIGluIGk5MTVfZ2VtX2Nv
bnRleHQuYwoKPiArewo+ICsgICAgICAgc3RydWN0IGRybV9pOTE1X2dlbV9jb250ZXh0X3BhcmFt
ICphcmdzID0gZGF0YTsKPiArCglzd2l0Y2godXBwZXJfMzJfYml0cyhhcmdzLT5wYXJhbSkpIHsK
PiArICAgICAgIGNhc2UgMDoKPiArICAgICAgICAgICAgICAgcmV0dXJuIGk5MTVfZ2VtX2NvbnRl
eHRfc2V0cGFyYW1faW9jdGwoZGV2LCBkYXRhLCBmaWxlKTsKPiArICAgICAgIGNhc2UgMToKPiAr
ICAgICAgICAgICAgICAgcmV0dXJuIGk5MTVfZ2VtX29iamVjdF9zZXRwYXJhbV9pb2N0bChkZXYs
IGRhdGEsIGZpbGUpOwo+ICsKPiArICAgICAgIH0KPiArICAgICAgIHJldHVybiAtRUlOVkFMOwo+
ICt9Cj4gKwo+ICBpbnQgaTkxNV9nZW1fY29udGV4dF9yZXNldF9zdGF0c19pb2N0bChzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHZvaWQgKmRhdGEsIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkKPiAgewo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29udGV4dC5oIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NvbnRleHQuaAo+IGluZGV4IDEwNmUyY2NmN2E0Yy4uMWNm
Y2YxZTZiYmI5IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9jb250ZXh0LmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY29u
dGV4dC5oCj4gQEAgLTE1Nyw2ICsxNTcsOCBAQCBpbnQgaTkxNV9nZW1fY29udGV4dF9nZXRwYXJh
bV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkcm1fZmlsZSAqZmlsZV9wcml2KTsKPiAg
aW50IGk5MTVfZ2VtX2NvbnRleHRfc2V0cGFyYW1faW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRl
diwgdm9pZCAqZGF0YSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1
Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdik7Cj4gK2ludCBpOTE1X2dlbV9zZXRwYXJhbV9pb2N0bChz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUpOwo+ICBpbnQgaTkxNV9nZW1fY29udGV4dF9y
ZXNldF9zdGF0c19pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAo+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkcm1fZmlsZSAqZmls
ZSk7Cj4gIAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
aW9jdGxzLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1faW9jdGxzLmgKPiBp
bmRleCA1YWJkNWIyMTcyZjIuLmFmNzQ2NWJjZWViZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1faW9jdGxzLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1faW9jdGxzLmgKPiBAQCAtMzIsNiArMzIsOCBAQCBpbnQgaTkxNV9n
ZW1fbW1hcF9ndHRfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRybV9maWxlICpmaWxlKTsKPiAgaW50
IGk5MTVfZ2VtX21tYXBfb2Zmc2V0X2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQg
KmRhdGEsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkcm1fZmlsZSAq
ZmlsZV9wcml2KTsKPiAraW50IGk5MTVfZ2VtX29iamVjdF9zZXRwYXJhbV9pb2N0bChzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc3RydWN0IGRybV9maWxlICpmaWxlX3ByaXYpOwo+ICBpbnQgaTkxNV9nZW1fcHJl
YWRfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgc3RydWN0IGRybV9maWxlICpmaWxlKTsKPiAgaW50IGk5MTVfZ2VtX3B3
cml0ZV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fb2JqZWN0LmMKPiBpbmRleCA1OTgyYWVhYWEyZTMu
LjUyZWE2NWYyMDNhMSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fb2JqZWN0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
b2JqZWN0LmMKPiBAQCAtNTA2LDYgKzUwNiwxMjEgQEAgaW50IF9faW5pdCBpOTE1X2dsb2JhbF9v
YmplY3RzX2luaXQodm9pZCkKPiAgICAgICAgIHJldHVybiAwOwo+ICB9Cj4gIAo+ICtzdGF0aWMg
ZW51bSBpbnRlbF9yZWdpb25faWQKPiArX19yZWdpb25faWQodTMyIHJlZ2lvbikKPiArewo+ICsg
ICAgICAgZW51bSBpbnRlbF9yZWdpb25faWQgaWQ7Cj4gKwo+ICsgICAgICAgZm9yIChpZCA9IDA7
IGlkIDwgSU5URUxfTUVNT1JZX1VLTk9XTjsgKytpZCkgewo+ICsgICAgICAgICAgICAgICBpZiAo
aW50ZWxfcmVnaW9uX21hcFtpZF0gPT0gcmVnaW9uKQo+ICsgICAgICAgICAgICAgICAgICAgICAg
IHJldHVybiBpZDsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICByZXR1cm4gSU5URUxfTUVNT1JZ
X1VLTk9XTjsKPiArfQo+ICsKPiArc3RhdGljIGludCBpOTE1X2dlbV9vYmplY3RfcmVnaW9uX3Nl
bGVjdChzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdF9wYXJh
bSAqYXJncywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVj
dCBkcm1fZmlsZSAqZmlsZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCj4gK3sKPiArICAgICAgIHN0cnVj
dCBpbnRlbF9jb250ZXh0ICpjZSA9IGRldl9wcml2LT5lbmdpbmVbQkNTMF0tPmtlcm5lbF9jb250
ZXh0Owo+ICsgICAgICAgdTMyIF9fdXNlciAqdXJlZ2lvbnMgPSB1NjRfdG9fdXNlcl9wdHIoYXJn
cy0+ZGF0YSk7Cj4gKyAgICAgICB1MzIgdXJlZ2lvbnNfY29weVtJTlRFTF9NRU1PUllfVUtOT1dO
XTsKPiArICAgICAgIGludCBpLCByZXQ7Cj4gKwo+ICsgICAgICAgaWYgKGFyZ3MtPnNpemUgPiBJ
TlRFTF9NRU1PUllfVUtOT1dOKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKCmFy
Z3MtPnNpemUgc2hvdWxkIGJlIGluIGJ5dGVzIChhcyByZXR1cm5lZCBieSB0aGUgR0VUUEFSQU0g
Zm9yIHRoaXMpLgoKPiArICAgICAgIG1lbXNldCh1cmVnaW9uc19jb3B5LCAwLCBzaXplb2YodXJl
Z2lvbnNfY29weSkpOwo+ICsgICAgICAgZm9yIChpID0gMDsgaSA8IGFyZ3MtPnNpemU7IGkrKykg
ewo+ICsgICAgICAgICAgICAgICB1MzIgcmVnaW9uOwo+ICsKPiArICAgICAgICAgICAgICAgcmV0
ID0gZ2V0X3VzZXIocmVnaW9uLCB1cmVnaW9ucyk7Cj4gKyAgICAgICAgICAgICAgIGlmIChyZXQp
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiArCj4gKyAgICAgICAgICAg
ICAgIHVyZWdpb25zX2NvcHlbaV0gPSByZWdpb247Cj4gKyAgICAgICAgICAgICAgICsrdXJlZ2lv
bnM7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgbXV0ZXhfbG9jaygmZGV2X3ByaXYtPmRybS5z
dHJ1Y3RfbXV0ZXgpOwoKUGFyZG9uPwoKPiArICAgICAgIHJldCA9IGk5MTVfZ2VtX29iamVjdF9w
cmVwYXJlX21vdmUob2JqKTsKPiArICAgICAgIGlmIChyZXQpIHsKPiArICAgICAgICAgICAgICAg
RFJNX0VSUk9SKCJDYW5ub3Qgc2V0IG1lbW9yeSByZWdpb24sIG9iamVjdCBpbiB1c2VcbiIpOwo+
ICsgICAgICAgICAgICAgICBnb3RvIGVycjsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBmb3Ig
KGkgPSAwOyBpIDwgYXJncy0+c2l6ZTsgaSsrKSB7Cj4gKyAgICAgICAgICAgICAgIHUzMiByZWdp
b24gPSB1cmVnaW9uc19jb3B5W2ldOwo+ICsgICAgICAgICAgICAgICBlbnVtIGludGVsX3JlZ2lv
bl9pZCBpZCA9IF9fcmVnaW9uX2lkKHJlZ2lvbik7Cj4gKwo+ICsgICAgICAgICAgICAgICBpZiAo
aWQgPT0gSU5URUxfTUVNT1JZX1VLTk9XTikgewo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJl
dCA9IC1FSU5WQUw7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgZ290byBlcnI7Cj4gKyAgICAg
ICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAgIHJldCA9IGk5MTVfZ2VtX29iamVjdF9t
aWdyYXRlKG9iaiwgY2UsIGlkKTsKPiArICAgICAgICAgICAgICAgaWYgKCFyZXQpIHsKPiArICAg
ICAgICAgICAgICAgICAgICAgICBpZiAoIWk5MTVfZ2VtX29iamVjdF9oYXNfcGFnZXMob2JqKSAm
Jgo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBNRU1PUllfVFlQRV9GUk9NX1JFR0lPTihy
ZWdpb24pID09Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVEVMX0xNRU0pIHsKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgKiBUT0RPOiB0aGlzIHNob3VsZCBiZSBwYXJ0IG9mIGdldF9wYWdlcygpLAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogd2hlbiBhc3luYyBnZXRfcGFnZXMg
YXJyaXZlcwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBpOTE1X2dlbV9vYmplY3RfZmlsbF9ibHQob2Jq
LCBjZSwgMCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0KSB7Cj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERSTV9FUlJPUigiRmFpbGVk
IGNsZWFyaW5nIHRoZSBvYmplY3RcbiIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBnb3RvIGVycjsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0K
PiArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpOTE1X2dlbV9vYmplY3RfbG9j
ayhvYmopOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gaTkxNV9nZW1f
b2JqZWN0X3NldF90b19jcHVfZG9tYWluKG9iaiwgZmFsc2UpOwo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaTkxNV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwoKUGFyZG9uPwoKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXQpCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyOwo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIH0KPiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgICAgICAgICAg
fQo+ICsgICAgICAgfQo+ICtlcnI6Cj4gKyAgICAgICBtdXRleF91bmxvY2soJmRldl9wcml2LT5k
cm0uc3RydWN0X211dGV4KTsKPiArICAgICAgIHJldHVybiByZXQ7Cj4gK30KPiArCj4gK2ludCBp
OTE1X2dlbV9vYmplY3Rfc2V0cGFyYW1faW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9p
ZCAqZGF0YSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkcm1f
ZmlsZSAqZmlsZSkKPiArewo+ICsKPiArICAgICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0
X3BhcmFtICphcmdzID0gZGF0YTsKPiArICAgICAgIHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpk
ZXZfcHJpdiA9IHRvX2k5MTUoZGV2KTsKPiArICAgICAgIHN0cnVjdCBkcm1faTkxNV9nZW1fb2Jq
ZWN0ICpvYmo7Cj4gKyAgICAgICBpbnQgcmV0Owo+ICsKPiArICAgICAgIG9iaiA9IGk5MTVfZ2Vt
X29iamVjdF9sb29rdXAoZmlsZSwgYXJncy0+aGFuZGxlKTsKPiArICAgICAgIGlmICghb2JqKQo+
ICsgICAgICAgICAgICAgICByZXR1cm4gLUVOT0VOVDsKPiArCj4gKyAgICAgICBzd2l0Y2ggKGxv
d2VyXzMyX2JpdHMoYXJncy0+cGFyYW0pKSB7Cj4gKyAgICAgICBjYXNlIEk5MTVfUEFSQU1fTUVN
T1JZX1JFR0lPTjoKPiArICAgICAgICAgICAgICAgcmV0ID0gaTkxNV9nZW1fb2JqZWN0X3JlZ2lv
bl9zZWxlY3QoZGV2X3ByaXYsIGFyZ3MsIGZpbGUsIG9iaik7Cj4gKyAgICAgICAgICAgICAgIGlm
IChyZXQpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBEUk1fRVJST1IoIkNhbm5vdCBzZXQg
bWVtb3J5IHJlZ2lvbiwgbWlncmF0aW9uIGZhaWxlZFxuIik7Cj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgZ290byBlcnI7Cj4gKyAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAg
IGJyZWFrOwo+ICsgICAgICAgZGVmYXVsdDoKPiArICAgICAgICAgICAgICAgcmV0ID0gLUVJTlZB
TDsKPiArICAgICAgICAgICAgICAgYnJlYWs7Cj4gKyAgICAgICB9Cj4gKwo+ICtlcnI6Cj4gKyAg
ICAgICBpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7Cj4gKyAgICAgICByZXR1cm4gcmV0Owo+ICt9
Cj4gKwo+ICAjaWYgSVNfRU5BQkxFRChDT05GSUdfRFJNX0k5MTVfU0VMRlRFU1QpCj4gICNpbmNs
dWRlICJzZWxmdGVzdHMvaHVnZV9nZW1fb2JqZWN0LmMiCj4gICNpbmNsdWRlICJzZWxmdGVzdHMv
aHVnZV9wYWdlcy5jIgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Ry
di5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwo+IGluZGV4IGY2YTNkYWY2OTZm
Ni4uODQ1ZTgwYzJhY2MwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVf
ZHJ2LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5jCj4gQEAgLTI3Mjks
NyArMjcyOSw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2lvY3RsX2Rlc2MgaTkxNV9pb2N0
bHNbXSA9IHsKPiAgICAgICAgIERSTV9JT0NUTF9ERUZfRFJWKEk5MTVfR0VUX1JFU0VUX1NUQVRT
LCBpOTE1X2dlbV9jb250ZXh0X3Jlc2V0X3N0YXRzX2lvY3RsLCBEUk1fUkVOREVSX0FMTE9XKSwK
PiAgICAgICAgIERSTV9JT0NUTF9ERUZfRFJWKEk5MTVfR0VNX1VTRVJQVFIsIGk5MTVfZ2VtX3Vz
ZXJwdHJfaW9jdGwsIERSTV9SRU5ERVJfQUxMT1cpLAo+ICAgICAgICAgRFJNX0lPQ1RMX0RFRl9E
UlYoSTkxNV9HRU1fQ09OVEVYVF9HRVRQQVJBTSwgaTkxNV9nZW1fY29udGV4dF9nZXRwYXJhbV9p
b2N0bCwgRFJNX1JFTkRFUl9BTExPVyksCj4gLSAgICAgICBEUk1fSU9DVExfREVGX0RSVihJOTE1
X0dFTV9DT05URVhUX1NFVFBBUkFNLCBpOTE1X2dlbV9jb250ZXh0X3NldHBhcmFtX2lvY3RsLCBE
Uk1fUkVOREVSX0FMTE9XKSwKPiArICAgICAgIERSTV9JT0NUTF9ERUZfRFJWKEk5MTVfR0VNX0NP
TlRFWFRfU0VUUEFSQU0sIGk5MTVfZ2VtX3NldHBhcmFtX2lvY3RsLCBEUk1fUkVOREVSX0FMTE9X
KSwKPiAgICAgICAgIERSTV9JT0NUTF9ERUZfRFJWKEk5MTVfUEVSRl9PUEVOLCBpOTE1X3BlcmZf
b3Blbl9pb2N0bCwgRFJNX1JFTkRFUl9BTExPVyksCj4gICAgICAgICBEUk1fSU9DVExfREVGX0RS
VihJOTE1X1BFUkZfQUREX0NPTkZJRywgaTkxNV9wZXJmX2FkZF9jb25maWdfaW9jdGwsIERSTV9S
RU5ERVJfQUxMT1cpLAo+ICAgICAgICAgRFJNX0lPQ1RMX0RFRl9EUlYoSTkxNV9QRVJGX1JFTU9W
RV9DT05GSUcsIGk5MTVfcGVyZl9yZW1vdmVfY29uZmlnX2lvY3RsLCBEUk1fUkVOREVSX0FMTE9X
KSwKPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oIGIvaW5jbHVkZS91
YXBpL2RybS9pOTE1X2RybS5oCj4gaW5kZXggZmI4NGFlZDEwODI1Li43NWQ3OWMxN2U5MWIgMTAw
NjQ0Cj4gLS0tIGEvaW5jbHVkZS91YXBpL2RybS9pOTE1X2RybS5oCj4gKysrIGIvaW5jbHVkZS91
YXBpL2RybS9pOTE1X2RybS5oCj4gQEAgLTM2MCw2ICszNjAsNyBAQCB0eXBlZGVmIHN0cnVjdCBf
ZHJtX2k5MTVfc2FyZWEgewo+ICAjZGVmaW5lIERSTV9JOTE1X0dFTV9WTV9DUkVBVEUgICAgICAg
ICAweDNhCj4gICNkZWZpbmUgRFJNX0k5MTVfR0VNX1ZNX0RFU1RST1kgICAgICAgICAgICAgICAg
MHgzYgo+ICAjZGVmaW5lIERSTV9JOTE1X0dFTV9NTUFQX09GRlNFVCAgICAgICBEUk1fSTkxNV9H
RU1fTU1BUF9HVFQKPiArI2RlZmluZSBEUk1fSTkxNV9HRU1fT0JKRUNUX1NFVFBBUkFNICAgRFJN
X0k5MTVfR0VNX0NPTlRFWFRfU0VUUEFSQU0KCiNkZWZpbmUgRFJNX0k5MTVfR0VNX1NFVFBBUkFN
IDB4MzUKI2RlZmluZSBEUk1fSTkxNV9HRU1fR0VUUEFSQU0gMHgzNgojZGVmaW5lIERSTV9JOTE1
X0dFTV9DT05URVhUX1NFVFBBUkFNIERSTV9JOTE1X0dFTV9TRVRQQVJBTQojZGVmaW5lIERSTV9J
OTE1X0dFTV9DT05URVhUX0dFVFBBUkFNIERSTV9JOTE1X0dFTV9HRVRQQVJBTQoKTWFrZSBzdXJl
IHlvdSBkbyBkbyBib3RoLgoKPiAgLyogTXVzdCBiZSBrZXB0IGNvbXBhY3QgLS0gbm8gaG9sZXMg
Ki8KPiAgCj4gICNkZWZpbmUgRFJNX0lPQ1RMX0k5MTVfSU5JVCAgICAgICAgICAgIERSTV9JT1co
IERSTV9DT01NQU5EX0JBU0UgKyBEUk1fSTkxNV9JTklULCBkcm1faTkxNV9pbml0X3QpCj4gQEAg
LTQyMyw2ICs0MjQsNyBAQCB0eXBlZGVmIHN0cnVjdCBfZHJtX2k5MTVfc2FyZWEgewo+ICAjZGVm
aW5lIERSTV9JT0NUTF9JOTE1X0dFTV9WTV9DUkVBVEUgICBEUk1fSU9XUihEUk1fQ09NTUFORF9C
QVNFICsgRFJNX0k5MTVfR0VNX1ZNX0NSRUFURSwgc3RydWN0IGRybV9pOTE1X2dlbV92bV9jb250
cm9sKQo+ICAjZGVmaW5lIERSTV9JT0NUTF9JOTE1X0dFTV9WTV9ERVNUUk9ZICBEUk1fSU9XIChE
Uk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX1ZNX0RFU1RST1ksIHN0cnVjdCBkcm1faTkx
NV9nZW1fdm1fY29udHJvbCkKPiAgI2RlZmluZSBEUk1fSU9DVExfSTkxNV9HRU1fTU1BUF9PRkZT
RVQgICAgICAgICBEUk1fSU9XUihEUk1fQ09NTUFORF9CQVNFICsgRFJNX0k5MTVfR0VNX01NQVBf
T0ZGU0VULCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX21tYXBfb2Zmc2V0KQo+ICsjZGVmaW5lIERSTV9J
T0NUTF9JOTE1X0dFTV9PQkpFQ1RfU0VUUEFSQU0gICAgIERSTV9JT1dSKERSTV9DT01NQU5EX0JB
U0UgKyBEUk1fSTkxNV9HRU1fT0JKRUNUX1NFVFBBUkFNLCBzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29i
amVjdF9wYXJhbSkKPiAgCj4gIC8qIEFsbG93IGRyaXZlcnMgdG8gc3VibWl0IGJhdGNoYnVmZmVy
cyBkaXJlY3RseSB0byBoYXJkd2FyZSwgcmVseWluZwo+ICAgKiBvbiB0aGUgc2VjdXJpdHkgbWVj
aGFuaXNtcyBwcm92aWRlZCBieSBoYXJkd2FyZS4KPiBAQCAtMTYwMSw2ICsxNjAzLDI3IEBAIHN0
cnVjdCBkcm1faTkxNV9nZW1fY29udGV4dF9wYXJhbSB7Cj4gICAgICAgICBfX3U2NCB2YWx1ZTsK
PiAgfTsKPiAgCj4gK3N0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0X3BhcmFtIHsKPiArICAgICAg
IC8qKiBIYW5kbGUgZm9yIHRoZSBvYmplY3QgKi8KPiArICAgICAgIF9fdTMyIGhhbmRsZTsKPiAr
Cj4gKyAgICAgICBfX3UzMiBzaXplOwo+ICsKPiArICAgICAgIC8qKiBTZXQgdGhlIG1lbW9yeSBy
ZWdpb24gZm9yIHRoZSBvYmplY3QgbGlzdGVkIGluIHByZWZlcmVuY2Ugb3JkZXIKCi8qKgogKiBT
ZXQKClRoaXMgaXMgbm90IGtlcm5lbGRvYyBhbnl3YXkuCgpBbmQgdGhlIGNvbW1lbnQgaXMgbm90
IGFidXR0aW5nIHRoZSByaWdodCB2YXJpYWJsZS4KCj4gKyAgICAgICAgKiAgYXMgYW4gYXJyYXkg
b2YgcmVnaW9uIGlkcyB3aXRoaW4gZGF0YS4gVG8gZm9yY2UgYW4gb2JqZWN0Cj4gKyAgICAgICAg
KiAgdG8gYSBwYXJ0aWN1bGFyIG1lbW9yeSByZWdpb24sIHNldCB0aGUgcmVnaW9uIGFzIHRoZSBz
b2xlIGVudHJ5Lgo+ICsgICAgICAgICoKPiArICAgICAgICAqICBWYWxpZCByZWdpb24gaWRzIGFy
ZSBkZXJpdmVkIGZyb20gdGhlIGlkIGZpZWxkIG9mCj4gKyAgICAgICAgKiAgc3RydWN0IGRybV9p
OTE1X21lbW9yeV9yZWdpb25faW5mby4KPiArICAgICAgICAqICBTZWUgc3RydWN0IGRybV9pOTE1
X3F1ZXJ5X21lbW9yeV9yZWdpb25faW5mby4KPiArICAgICAgICAqLwo+ICsjZGVmaW5lIEk5MTVf
T0JKRUNUX1BBUkFNICAoMXVsbDw8MzIpCgojZGVmaW5lIEk5MTVfT0JKRUNUX1BBUkFNX1JFR0lP
TiAoSTkxNV9PQkpFQ1RfUEFSQU0gfCAweDEpCgo+ICsgICAgICAgX191NjQgcGFyYW07Cj4gKwo+
ICsgICAgICAgX191NjQgZGF0YTsKCkFueSBwYXJ0aWN1bGFyIHJlYXNvbiBmb3IgdGhlIGRpdmVy
Z2VudCB3aXRoIHRoZSBpZGVudGljYWwgc3RydWN0PwotQ2hyaXMKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmkt
ZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
