Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 113CE6753B
	for <lists+dri-devel@lfdr.de>; Fri, 12 Jul 2019 20:53:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1F3C989DE6;
	Fri, 12 Jul 2019 18:53:42 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4D64189DE6
 for <dri-devel@lists.freedesktop.org>; Fri, 12 Jul 2019 18:53:41 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx05.intmail.prod.int.phx2.redhat.com
 [10.5.11.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 351F830832DA;
 Fri, 12 Jul 2019 18:53:40 +0000 (UTC)
Received: from localhost.localdomain.com (unknown [10.36.112.10])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 3B7045D739;
 Fri, 12 Jul 2019 18:53:36 +0000 (UTC)
From: Hans de Goede <hdegoede@redhat.com>
To: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Sean Paul <sean@poorly.run>,
 Daniel Vetter <daniel@ffwll.ch>, David Airlie <airlied@linux.ie>
Subject: [PATCH] drm: Add Grain Media GM12U320 driver
Date: Fri, 12 Jul 2019 20:53:34 +0200
Message-Id: <20190712185334.15632-1-hdegoede@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.15
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.44]); Fri, 12 Jul 2019 18:53:40 +0000 (UTC)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hans de Goede <hdegoede@redhat.com>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIGEgbW9kZXNldHRpbmcgZHJpdmVyIGZvciBHcmFpbiBNZWRpYSBHTTEyVTMyMCBiYXNlZCBk
ZXZpY2VzCihwcmltYXJpbHkgQWNlciBDMTIwIHByb2plY3RvciwgYnV0IHRoZXJlIG1heSBiZSBj
b21wYXRpYmxlIGRldmljZXMpLgoKVGhpcyBpcyBiYXNlZCBvbiB0aGUgZmIgZHJpdmVyIGZyb20g
VmlhY2hlc2xhdiBOdXJtZWtoYW1pdG92OgpodHRwczovL2dpdGh1Yi5jb20vc2xhdnJuL2dtMTJ1
MzIwCgpUaGlzIGRyaXZlciB1c2VzIGRybV9zaW1wbGVfZGlzcGxheV9waXBlIHRvIGRlYWwgd2l0
aCBhbGwgdGhlIGF0b21pYwpzdHVmZiwgZ2VtX3NobWVtX2hlbHBlciBmdW5jdGlvbnMgZm9yIGJ1
ZmZlciBtYW5hZ2VtZW50IGFuZApkcm1fZmJkZXZfZ2VuZXJpY19zZXR1cCBmb3IgZmJkZXYgZW11
bGF0aW9uLCBzbyB0aGF0IGxlYXZlcyB0aGUgZHJpdmVyCml0c2VsZiB3aXRoIG9ubHkgdGhlIGFj
dHVhbCBjb2RlIGZvciB0YWxraW5nIHRvIHRoZSBnbTEzdTMyMCBjaGlwLApsZWFkaW5nIHRvIGEg
bmljZSBzaW1wbGUgYW5kIGNsZWFuIGRyaXZlci4KClNpZ25lZC1vZmYtYnk6IEhhbnMgZGUgR29l
ZGUgPGhkZWdvZWRlQHJlZGhhdC5jb20+Ci0tLQogTUFJTlRBSU5FUlMgICAgICAgICAgICAgICAg
ICAgICAgICAgfCAgIDUgKwogZHJpdmVycy9ncHUvZHJtL0tjb25maWcgICAgICAgICAgICAgfCAg
IDIgKwogZHJpdmVycy9ncHUvZHJtL01ha2VmaWxlICAgICAgICAgICAgfCAgIDEgKwogZHJpdmVy
cy9ncHUvZHJtL2dtMTJ1MzIwL0tjb25maWcgICAgfCAgIDkgKwogZHJpdmVycy9ncHUvZHJtL2dt
MTJ1MzIwL01ha2VmaWxlICAgfCAgIDIgKwogZHJpdmVycy9ncHUvZHJtL2dtMTJ1MzIwL2dtMTJ1
MzIwLmMgfCA4MTcgKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogNiBmaWxlcyBjaGFuZ2Vk
LCA4MzYgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9n
bTEydTMyMC9LY29uZmlnCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2dtMTJ1
MzIwL01ha2VmaWxlCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL2dtMTJ1MzIw
L2dtMTJ1MzIwLmMKCmRpZmYgLS1naXQgYS9NQUlOVEFJTkVSUyBiL01BSU5UQUlORVJTCmluZGV4
IGUyZGIwZDQ2Nzk2Ni4uNzU0ZDg4NGViMjZiIDEwMDY0NAotLS0gYS9NQUlOVEFJTkVSUworKysg
Yi9NQUlOVEFJTkVSUwpAQCAtNTAyNSw2ICs1MDI1LDExIEBAIFM6CU1haW50YWluZWQKIEY6CWRy
aXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1mZWl5YW5nLWZ5MDcwMjRkaTI2YTMwZC5jCiBGOglE
b2N1bWVudGF0aW9uL2RldmljZXRyZWUvYmluZGluZ3MvZGlzcGxheS9wYW5lbC9mZWl5YW5nLGZ5
MDcwMjRkaTI2YTMwZC50eHQKIAorRFJNIERSSVZFUiBGT1IgR1JBSU4gTUVESUEgR00xMlUzMjAg
UFJPSkVDVE9SUworTToJSGFucyBkZSBHb2VkZSA8aGRlZ29lZGVAcmVkaGF0LmNvbT4KK1M6CU1h
aW50YWluZWQKK0Y6CWRyaXZlcnMvZ3B1L2RybS9nbTEydTMyMC8KKwogRFJNIERSSVZFUiBGT1Ig
SUxJVEVLIElMSTkyMjUgUEFORUxTCiBNOglEYXZpZCBMZWNobmVyIDxkYXZpZEBsZWNobm9sb2d5
LmNvbT4KIFM6CU1haW50YWluZWQKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9LY29uZmln
IGIvZHJpdmVycy9ncHUvZHJtL0tjb25maWcKaW5kZXggMzZmOTAwZDYzOTc5Li5hZjgyMDAyODI1
ZWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9LY29uZmlnCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9LY29uZmlnCkBAIC0zNDMsNiArMzQzLDggQEAgc291cmNlICJkcml2ZXJzL2dwdS9kcm0v
cGFuZnJvc3QvS2NvbmZpZyIKIAogc291cmNlICJkcml2ZXJzL2dwdS9kcm0vYXNwZWVkL0tjb25m
aWciCiAKK3NvdXJjZSAiZHJpdmVycy9ncHUvZHJtL2dtMTJ1MzIwL0tjb25maWciCisKICMgS2Vl
cCBsZWdhY3kgZHJpdmVycyBsYXN0CiAKIG1lbnVjb25maWcgRFJNX0xFR0FDWQpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL01ha2VmaWxlCmlu
ZGV4IDcyZjUwMzZkOWJmYS4uOGE0Zjg1MWY1NGEyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vTWFrZWZpbGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL01ha2VmaWxlCkBAIC0xMTMsMyArMTEz
LDQgQEAgb2JqLSQoQ09ORklHX0RSTV9WQk9YVklERU8pICs9IHZib3h2aWRlby8KIG9iai0kKENP
TkZJR19EUk1fTElNQSkgICs9IGxpbWEvCiBvYmotJChDT05GSUdfRFJNX1BBTkZST1NUKSArPSBw
YW5mcm9zdC8KIG9iai0kKENPTkZJR19EUk1fQVNQRUVEX0dGWCkgKz0gYXNwZWVkLworb2JqLSQo
Q09ORklHX0RSTV9HTTEyVTMyMCkgKz0gZ20xMnUzMjAvCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vZ20xMnUzMjAvS2NvbmZpZyBiL2RyaXZlcnMvZ3B1L2RybS9nbTEydTMyMC9LY29uZmln
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uMDg4MmE2MWMwNGQ1Ci0t
LSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2dtMTJ1MzIwL0tjb25maWcKQEAgLTAs
MCArMSw5IEBACisjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wKworY29uZmlnIERS
TV9HTTEyVTMyMAorCXRyaXN0YXRlICJHTTEyVTMyMCBkcml2ZXIgZm9yIFVTQiBwcm9qZWN0b3Jz
IgorCWRlcGVuZHMgb24gRFJNICYmIFVTQgorCXNlbGVjdCBEUk1fS01TX0hFTFBFUgorCXNlbGVj
dCBEUk1fR0VNX1NITUVNX0hFTFBFUgorCWhlbHAKKwkgVGhpcyBpcyBhIEtNUyBkcml2ZXIgZm9y
IHByb2plY3RvcnMgd2hpY2ggdXNlIHRoZSBHTTEyVTMyMCBjaGlwc2V0CisJIGZvciB2aWRlbyB0
cmFuc2ZlciBvdmVyIFVTQjIvMywgc3VjaCBhcyB0aGUgQWNlciBDMTIwIG1pbmkgcHJvamVjdG9y
LgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2dtMTJ1MzIwL01ha2VmaWxlIGIvZHJpdmVy
cy9ncHUvZHJtL2dtMTJ1MzIwL01ha2VmaWxlCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAw
MDAwMDAwMDAwMC4uZWE1MTQzODJmMDBkCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2dtMTJ1MzIwL01ha2VmaWxlCkBAIC0wLDAgKzEsMiBAQAorIyBTUERYLUxpY2Vuc2UtSWRl
bnRpZmllcjogR1BMLTIuMCsKK29iai0kKENPTkZJR19EUk1fR00xMlUzMjApICs9IGdtMTJ1MzIw
Lm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9nbTEydTMyMC9nbTEydTMyMC5jIGIvZHJp
dmVycy9ncHUvZHJtL2dtMTJ1MzIwL2dtMTJ1MzIwLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5k
ZXggMDAwMDAwMDAwMDAwLi5jY2JiZDYyZjQ0NGQKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJz
L2dwdS9kcm0vZ20xMnUzMjAvZ20xMnUzMjAuYwpAQCAtMCwwICsxLDgxNyBAQAorLy8gU1BEWC1M
aWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjArCisvKgorICogQ29weXJpZ2h0IDIwMTkgSGFucyBk
ZSBHb2VkZSA8aGRlZ29lZGVAcmVkaGF0LmNvbT4KKyAqLworCisjaW5jbHVkZSA8bGludXgvZG1h
LWJ1Zi5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L3VzYi5o
PgorCisjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfaGVscGVyLmg+CisjaW5jbHVkZSA8ZHJtL2Ry
bV9hdG9taWNfc3RhdGVfaGVscGVyLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9jb25uZWN0b3IuaD4K
KyNpbmNsdWRlIDxkcm0vZHJtX2RhbWFnZV9oZWxwZXIuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2Ry
di5oPgorI2luY2x1ZGUgPGRybS9kcm1fZmJfaGVscGVyLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9m
aWxlLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9mb3JtYXRfaGVscGVyLmg+CisjaW5jbHVkZSA8ZHJt
L2RybV9mb3VyY2MuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIuaD4KKyNp
bmNsdWRlIDxkcm0vZHJtX2dlbV9mcmFtZWJ1ZmZlcl9oZWxwZXIuaD4KKyNpbmNsdWRlIDxkcm0v
ZHJtX2lvY3RsLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9tb2Rlc2V0X2hlbHBlcl92dGFibGVzLmg+
CisjaW5jbHVkZSA8ZHJtL2RybV9wcm9iZV9oZWxwZXIuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX3Np
bXBsZV9rbXNfaGVscGVyLmg+CisjaW5jbHVkZSA8ZHJtL2RybV92YmxhbmsuaD4KKworc3RhdGlj
IGJvb2wgZWNvX21vZGU7Cittb2R1bGVfcGFyYW0oZWNvX21vZGUsIGJvb2wsIDA2NDQpOworTU9E
VUxFX1BBUk1fREVTQyhlY29fbW9kZSwgIlR1cm4gb24gRWNvIG1vZGUgKGxlc3MgYnJpZ2h0LCBt
b3JlIHNpbGVudCkiKTsKKworI2RlZmluZSBEUklWRVJfTkFNRQkJImdtMTJ1MzIwIgorI2RlZmlu
ZSBEUklWRVJfREVTQwkJIkdyYWluIE1lZGlhIEdNMTJVMzIwIFVTQiBwcm9qZWN0b3IgZGlzcGxh
eSIKKyNkZWZpbmUgRFJJVkVSX0RBVEUJCSIyMDE5IgorI2RlZmluZSBEUklWRVJfTUFKT1IJCTEK
KyNkZWZpbmUgRFJJVkVSX01JTk9SCQkwCisjZGVmaW5lIERSSVZFUl9QQVRDSExFVkVMCTEKKwor
LyoKKyAqIFRoZSBETFAgaGFzIGFuIGFjdHVhbCB3aWR0aCBvZiA4NTQgcGl4ZWxzLCBidXQgdGhh
dCBpcyBub3QgYSBtdWx0aXBsZQorICogb2YgOCwgYnJlYWtpbmcgdGhpbmdzIGxlZnQgYW5kIHJp
Z2h0LCBzbyB3ZSBleHBvcnQgYSB3aWR0aCBvZiA4NDguCisgKi8KKyNkZWZpbmUgR00xMlUzMjBf
VVNFUl9XSURUSAkJODQ4CisjZGVmaW5lIEdNMTJVMzIwX1JFQUxfV0lEVEgJCTg1NAorI2RlZmlu
ZSBHTTEyVTMyMF9IRUlHSFQJCQk0ODAKKworI2RlZmluZSBHTTEyVTMyMF9CTE9DS19DT1VOVAkJ
MjAKKworI2RlZmluZSBNSVNDX1JDVl9FUFQJCQkxCisjZGVmaW5lIERBVEFfUkNWX0VQVAkJCTIK
KyNkZWZpbmUgREFUQV9TTkRfRVBUCQkJMworI2RlZmluZSBNSVNDX1NORF9FUFQJCQk0CisKKyNk
ZWZpbmUgREFUQV9CTE9DS19IRUFERVJfU0laRQkJODQKKyNkZWZpbmUgREFUQV9CTE9DS19DT05U
RU5UX1NJWkUJCTY0NTEyCisjZGVmaW5lIERBVEFfQkxPQ0tfRk9PVEVSX1NJWkUJCTIwCisjZGVm
aW5lIERBVEFfQkxPQ0tfU0laRQkJCShEQVRBX0JMT0NLX0hFQURFUl9TSVpFICsgXAorCQkJCQkg
REFUQV9CTE9DS19DT05URU5UX1NJWkUgKyBcCisJCQkJCSBEQVRBX0JMT0NLX0ZPT1RFUl9TSVpF
KQorI2RlZmluZSBEQVRBX0xBU1RfQkxPQ0tfQ09OVEVOVF9TSVpFCTQwMzIKKyNkZWZpbmUgREFU
QV9MQVNUX0JMT0NLX1NJWkUJCShEQVRBX0JMT0NLX0hFQURFUl9TSVpFICsgXAorCQkJCQkgREFU
QV9MQVNUX0JMT0NLX0NPTlRFTlRfU0laRSArIFwKKwkJCQkJIERBVEFfQkxPQ0tfRk9PVEVSX1NJ
WkUpCisKKyNkZWZpbmUgQ01EX1NJWkUJCQkzMQorI2RlZmluZSBSRUFEX1NUQVRVU19TSVpFCQkx
MworI2RlZmluZSBNSVNDX1ZBTFVFX1NJWkUJCQk0CisKKyNkZWZpbmUgQ01EX1RJTUVPVVQJCQlt
c2Vjc190b19qaWZmaWVzKDIwMCkKKyNkZWZpbmUgREFUQV9USU1FT1VUCQkJbXNlY3NfdG9famlm
ZmllcygxMDAwKQorI2RlZmluZSBJRExFX1RJTUVPVVQJCQltc2Vjc190b19qaWZmaWVzKDIwMDAp
CisjZGVmaW5lIEZJUlNUX0ZSQU1FX1RJTUVPVVQJCW1zZWNzX3RvX2ppZmZpZXMoMjAwMCkKKwor
I2RlZmluZSBNSVNDX1JFUV9HRVRfU0VUX0VDT19BCQkweGZmCisjZGVmaW5lIE1JU0NfUkVRX0dF
VF9TRVRfRUNPX0IJCTB4MzUKKy8qIFdpbmRvd3MgZHJpdmVyIGRvZXMgb25jZSBldmVyeSBzZWNv
bmQsIHdpdGggYXJnIGQgPSAxLCBvdGhlciBhcmdzIDAgKi8KKyNkZWZpbmUgTUlTQ19SRVFfVU5L
Tk9XTjFfQQkJMHhmZgorI2RlZmluZSBNSVNDX1JFUV9VTktOT1dOMV9CCQkweDM4CisvKiBXaW5k
b3dzIGRyaXZlciBkb2VzIHRoaXMgb24gaW5pdCwgd2l0aCBhcmcgYSwgYiA9IDAsIGMgPSAweGEw
LCBkID0gNCAqLworI2RlZmluZSBNSVNDX1JFUV9VTktOT1dOMl9BCQkweGE1CisjZGVmaW5lIE1J
U0NfUkVRX1VOS05PV04yX0IJCTB4MDAKKworc3RydWN0IGdtMTJ1MzIwX2RldmljZSB7CisJc3Ry
dWN0IGRybV9kZXZpY2UJICAgICAgICAgZGV2OworCXN0cnVjdCBkcm1fc2ltcGxlX2Rpc3BsYXlf
cGlwZSAgIHBpcGU7CisJc3RydWN0IGRybV9jb25uZWN0b3IJICAgICAgICAgY29ubjsKKwlzdHJ1
Y3QgdXNiX2RldmljZSAgICAgICAgICAgICAgICp1ZGV2OworCXVuc2lnbmVkIGNoYXIgICAgICAg
ICAgICAgICAgICAgKmNtZF9idWY7CisJdW5zaWduZWQgY2hhciAgICAgICAgICAgICAgICAgICAq
ZGF0YV9idWZbR00xMlUzMjBfQkxPQ0tfQ09VTlRdOworCWJvb2wgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHBpcGVfZW5hYmxlZDsKKwlzdHJ1Y3QgeworCQlib29sICAgICAgICAgICAgICAg
ICAgICAgcnVuOworCQlzdHJ1Y3Qgd29ya3F1ZXVlX3N0cnVjdCAqd29ya3E7CisJCXN0cnVjdCB3
b3JrX3N0cnVjdCAgICAgICB3b3JrOworCQl3YWl0X3F1ZXVlX2hlYWRfdCAgICAgICAgd2FpdHE7
CisJCXN0cnVjdCBtdXRleCAgICAgICAgICAgICBsb2NrOworCQlzdHJ1Y3QgZHJtX2ZyYW1lYnVm
ZmVyICAqZmI7CisJCXN0cnVjdCBkcm1fcmVjdCAgICAgICAgICByZWN0OworCX0gZmJfdXBkYXRl
OworfTsKKworc3RhdGljIGNvbnN0IGNoYXIgY21kX2RhdGFbQ01EX1NJWkVdID0geworCTB4NTUs
IDB4NTMsIDB4NDIsIDB4NDMsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsCisJMHg2OCwgMHhmYywg
MHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgxMCwgMHhmZiwKKwkweDAwLCAweDAwLCAweDAwLCAw
eDAwLCAweGZjLCAweDAwLCAweDgwLCAweDAwLAorCTB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4
MDAsIDB4MDAsIDB4MDAKK307CisKK3N0YXRpYyBjb25zdCBjaGFyIGNtZF9kcmF3W0NNRF9TSVpF
XSA9IHsKKwkweDU1LCAweDUzLCAweDQyLCAweDQzLCAweDAwLCAweDAwLCAweDAwLCAweDAwLAor
CTB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MTAsIDB4ZmUsCisJMHgwMCwg
MHgwMCwgMHgwMCwgMHhjMCwgMHhkMSwgMHgwNSwgMHgwMCwgMHg0MCwKKwkweDAwLCAweDAxLCAw
eDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwCit9OworCitzdGF0aWMgY29uc3QgY2hhciBjbWRf
bWlzY1tDTURfU0laRV0gPSB7CisJMHg1NSwgMHg1MywgMHg0MiwgMHg0MywgMHgwMCwgMHgwMCwg
MHgwMCwgMHgwMCwKKwkweDA0LCAweDAwLCAweDAwLCAweDAwLCAweDgwLCAweDAxLCAweDEwLCAw
eGZkLAorCTB4MDAsIDB4MDAsIDB4MDAsIDB4YzAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsCisJ
MHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMAorfTsKKworc3RhdGljIGNv
bnN0IGNoYXIgZGF0YV9ibG9ja19oZWFkZXJbREFUQV9CTE9DS19IRUFERVJfU0laRV0gPSB7CisJ
MHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwKKwkweDAwLCAw
eDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLAorCTB4MDAsIDB4MDAsIDB4
MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsCisJMHgwMCwgMHgwMCwgMHgwMCwgMHgw
MCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwKKwkweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAw
LCAweDAwLCAweDAwLCAweDAwLAorCTB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAs
IDB4MDAsIDB4MDAsCisJMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwg
MHgwMCwKKwkweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLAor
CTB4ZmIsIDB4MTQsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsCisJMHgwMCwg
MHgwNCwgMHgxNSwgMHgwMCwgMHgwMCwgMHhmYywgMHgwMCwgMHgwMCwKKwkweDAxLCAweDAwLCAw
eDAwLCAweGRiCit9OworCitzdGF0aWMgY29uc3QgY2hhciBkYXRhX2xhc3RfYmxvY2tfaGVhZGVy
W0RBVEFfQkxPQ0tfSEVBREVSX1NJWkVdID0geworCTB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4
MDAsIDB4MDAsIDB4MDAsIDB4MDAsCisJMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgw
MCwgMHgwMCwgMHgwMCwKKwkweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAw
LCAweDAwLAorCTB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAs
CisJMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwKKwkweDAw
LCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLAorCTB4MDAsIDB4MDAs
IDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsCisJMHgwMCwgMHgwMCwgMHgwMCwg
MHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwKKwkweGZiLCAweDE0LCAweDAwLCAweDAwLCAw
eDAwLCAweDAwLCAweDAwLCAweDAwLAorCTB4MmEsIDB4MDAsIDB4MjAsIDB4MDAsIDB4YzAsIDB4
MGYsIDB4MDAsIDB4MDAsCisJMHgwMSwgMHgwMCwgMHgwMCwgMHhkNworfTsKKworc3RhdGljIGNv
bnN0IGNoYXIgZGF0YV9ibG9ja19mb290ZXJbREFUQV9CTE9DS19GT09URVJfU0laRV0gPSB7CisJ
MHhmYiwgMHgxNCwgMHgwMiwgMHgyMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwKKwkweDAwLCAw
eDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLAorCTB4ODAsIDB4MDAsIDB4
MDAsIDB4NGYKK307CisKK3N0YXRpYyBpbnQgZ20xMnUzMjBfdXNiX2FsbG9jKHN0cnVjdCBnbTEy
dTMyMF9kZXZpY2UgKmdtMTJ1MzIwKQoreworCWludCBpLCBibG9ja19zaXplOworCWNvbnN0IGNo
YXIgKmhkcjsKKworCWdtMTJ1MzIwLT5jbWRfYnVmID0ga21hbGxvYyhDTURfU0laRSwgR0ZQX0tF
Uk5FTCk7CisJaWYgKCFnbTEydTMyMC0+Y21kX2J1ZikKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlm
b3IgKGkgPSAwOyBpIDwgR00xMlUzMjBfQkxPQ0tfQ09VTlQ7IGkrKykgeworCQlpZiAoaSA9PSBH
TTEyVTMyMF9CTE9DS19DT1VOVCAtIDEpIHsKKwkJCWJsb2NrX3NpemUgPSBEQVRBX0xBU1RfQkxP
Q0tfU0laRTsKKwkJCWhkciA9IGRhdGFfbGFzdF9ibG9ja19oZWFkZXI7CisJCX0gZWxzZSB7CisJ
CQlibG9ja19zaXplID0gREFUQV9CTE9DS19TSVpFOworCQkJaGRyID0gZGF0YV9ibG9ja19oZWFk
ZXI7CisJCX0KKworCQlnbTEydTMyMC0+ZGF0YV9idWZbaV0gPSBremFsbG9jKGJsb2NrX3NpemUs
IEdGUF9LRVJORUwpOworCQlpZiAoIWdtMTJ1MzIwLT5kYXRhX2J1ZltpXSkKKwkJCXJldHVybiAt
RU5PTUVNOworCisJCW1lbWNweShnbTEydTMyMC0+ZGF0YV9idWZbaV0sIGhkciwgREFUQV9CTE9D
S19IRUFERVJfU0laRSk7CisJCW1lbWNweShnbTEydTMyMC0+ZGF0YV9idWZbaV0gKworCQkJCShi
bG9ja19zaXplIC0gREFUQV9CTE9DS19GT09URVJfU0laRSksCisJCSAgICAgICBkYXRhX2Jsb2Nr
X2Zvb3RlciwgREFUQV9CTE9DS19GT09URVJfU0laRSk7CisJfQorCisJZ20xMnUzMjAtPmZiX3Vw
ZGF0ZS53b3JrcSA9IGNyZWF0ZV9zaW5nbGV0aHJlYWRfd29ya3F1ZXVlKERSSVZFUl9OQU1FKTsK
KwlpZiAoIWdtMTJ1MzIwLT5mYl91cGRhdGUud29ya3EpCisJCXJldHVybiAtRU5PTUVNOworCisJ
cmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lkIGdtMTJ1MzIwX3VzYl9mcmVlKHN0cnVjdCBnbTEy
dTMyMF9kZXZpY2UgKmdtMTJ1MzIwKQoreworCWludCBpOworCisJaWYgKGdtMTJ1MzIwLT5mYl91
cGRhdGUud29ya3EpCisJCWRlc3Ryb3lfd29ya3F1ZXVlKGdtMTJ1MzIwLT5mYl91cGRhdGUud29y
a3EpOworCisJZm9yIChpID0gMDsgaSA8IEdNMTJVMzIwX0JMT0NLX0NPVU5UOyBpKyspCisJCWtm
cmVlKGdtMTJ1MzIwLT5kYXRhX2J1ZltpXSk7CisKKwlrZnJlZShnbTEydTMyMC0+Y21kX2J1Zik7
Cit9CisKK3N0YXRpYyBpbnQgZ20xMnUzMjBfbWlzY19yZXF1ZXN0KHN0cnVjdCBnbTEydTMyMF9k
ZXZpY2UgKmdtMTJ1MzIwLAorCQkJCSB1OCByZXFfYSwgdTggcmVxX2IsCisJCQkJIHU4IGFyZ19h
LCB1OCBhcmdfYiwgdTggYXJnX2MsIHU4IGFyZ19kKQoreworCWludCByZXQsIGxlbjsKKworCW1l
bWNweShnbTEydTMyMC0+Y21kX2J1ZiwgJmNtZF9taXNjLCBDTURfU0laRSk7CisJZ20xMnUzMjAt
PmNtZF9idWZbMjBdID0gcmVxX2E7CisJZ20xMnUzMjAtPmNtZF9idWZbMjFdID0gcmVxX2I7CisJ
Z20xMnUzMjAtPmNtZF9idWZbMjJdID0gYXJnX2E7CisJZ20xMnUzMjAtPmNtZF9idWZbMjNdID0g
YXJnX2I7CisJZ20xMnUzMjAtPmNtZF9idWZbMjRdID0gYXJnX2M7CisJZ20xMnUzMjAtPmNtZF9i
dWZbMjVdID0gYXJnX2Q7CisKKwkvKiBTZW5kIHJlcXVlc3QgKi8KKwlyZXQgPSB1c2JfYnVsa19t
c2coZ20xMnUzMjAtPnVkZXYsCisJCQkgICB1c2Jfc25kYnVsa3BpcGUoZ20xMnUzMjAtPnVkZXYs
IE1JU0NfU05EX0VQVCksCisJCQkgICBnbTEydTMyMC0+Y21kX2J1ZiwgQ01EX1NJWkUsICZsZW4s
IENNRF9USU1FT1VUKTsKKwlpZiAocmV0IHx8IGxlbiAhPSBDTURfU0laRSkgeworCQlkZXZfZXJy
KCZnbTEydTMyMC0+dWRldi0+ZGV2LCAiTWlzYy4gcmVxLiBlcnJvciAlZFxuIiwgcmV0KTsKKwkJ
cmV0dXJuIC1FSU87CisJfQorCisJLyogUmVhZCB2YWx1ZSAqLworCXJldCA9IHVzYl9idWxrX21z
ZyhnbTEydTMyMC0+dWRldiwKKwkJCSAgIHVzYl9yY3ZidWxrcGlwZShnbTEydTMyMC0+dWRldiwg
TUlTQ19SQ1ZfRVBUKSwKKwkJCSAgIGdtMTJ1MzIwLT5jbWRfYnVmLCBNSVNDX1ZBTFVFX1NJWkUs
ICZsZW4sCisJCQkgICBEQVRBX1RJTUVPVVQpOworCWlmIChyZXQgfHwgbGVuICE9IE1JU0NfVkFM
VUVfU0laRSkgeworCQlkZXZfZXJyKCZnbTEydTMyMC0+dWRldi0+ZGV2LCAiTWlzYy4gdmFsdWUg
ZXJyb3IgJWRcbiIsIHJldCk7CisJCXJldHVybiAtRUlPOworCX0KKwkvKiBjbWRfYnVmWzBdIG5v
dyBjb250YWlucyB0aGUgcmVhZCB2YWx1ZSwgd2hpY2ggd2UgZG9uJ3QgdXNlICovCisKKwkvKiBS
ZWFkIHN0YXR1cyAqLworCXJldCA9IHVzYl9idWxrX21zZyhnbTEydTMyMC0+dWRldiwKKwkJCSAg
IHVzYl9yY3ZidWxrcGlwZShnbTEydTMyMC0+dWRldiwgTUlTQ19SQ1ZfRVBUKSwKKwkJCSAgIGdt
MTJ1MzIwLT5jbWRfYnVmLCBSRUFEX1NUQVRVU19TSVpFLCAmbGVuLAorCQkJICAgQ01EX1RJTUVP
VVQpOworCWlmIChyZXQgfHwgbGVuICE9IFJFQURfU1RBVFVTX1NJWkUpIHsKKwkJZGV2X2Vycigm
Z20xMnUzMjAtPnVkZXYtPmRldiwgIk1pc2MuIHN0YXR1cyBlcnJvciAlZFxuIiwgcmV0KTsKKwkJ
cmV0dXJuIC1FSU87CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lkIGdtMTJ1MzIw
XzMyYnBwX3RvXzI0YnBwX3BhY2tlZCh1OCAqZHN0LCB1OCAqc3JjLCBpbnQgbGVuKQoreworCXdo
aWxlIChsZW4tLSkgeworCQkqZHN0KysgPSAqc3JjKys7CisJCSpkc3QrKyA9ICpzcmMrKzsKKwkJ
KmRzdCsrID0gKnNyYysrOworCQlzcmMrKzsKKwl9Cit9CisKK3N0YXRpYyB2b2lkIGdtMTJ1MzIw
X2NvcHlfZmJfdG9fYmxvY2tzKHN0cnVjdCBnbTEydTMyMF9kZXZpY2UgKmdtMTJ1MzIwKQorewor
CWludCBibG9jaywgZHN0X29mZnNldCwgbGVuLCByZW1haW4sIHJldCwgeDEsIHgyLCB5MSwgeTI7
CisJc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmI7CisJdm9pZCAqdmFkZHI7CisJdTggKnNyYzsK
KworCW11dGV4X2xvY2soJmdtMTJ1MzIwLT5mYl91cGRhdGUubG9jayk7CisKKwlpZiAoIWdtMTJ1
MzIwLT5mYl91cGRhdGUuZmIpCisJCWdvdG8gdW5sb2NrOworCisJZmIgPSBnbTEydTMyMC0+ZmJf
dXBkYXRlLmZiOworCXgxID0gZ20xMnUzMjAtPmZiX3VwZGF0ZS5yZWN0LngxOworCXgyID0gZ20x
MnUzMjAtPmZiX3VwZGF0ZS5yZWN0LngyOworCXkxID0gZ20xMnUzMjAtPmZiX3VwZGF0ZS5yZWN0
LnkxOworCXkyID0gZ20xMnUzMjAtPmZiX3VwZGF0ZS5yZWN0LnkyOworCisJdmFkZHIgPSBkcm1f
Z2VtX3NobWVtX3ZtYXAoZmItPm9ialswXSk7CisJaWYgKElTX0VSUih2YWRkcikpIHsKKwkJRFJN
X0VSUk9SKCJmYWlsZWQgdG8gdm1hcCBmYjogJWxkXG4iLCBQVFJfRVJSKHZhZGRyKSk7CisJCWdv
dG8gcHV0X2ZiOworCX0KKworCWlmIChmYi0+b2JqWzBdLT5pbXBvcnRfYXR0YWNoKSB7CisJCXJl
dCA9IGRtYV9idWZfYmVnaW5fY3B1X2FjY2VzcygKKwkJCWZiLT5vYmpbMF0tPmltcG9ydF9hdHRh
Y2gtPmRtYWJ1ZiwgRE1BX0ZST01fREVWSUNFKTsKKwkJaWYgKHJldCkgeworCQkJRFJNX0VSUk9S
KCJkbWFfYnVmX2JlZ2luX2NwdV9hY2Nlc3MgZXJyOiAlZFxuIiwgcmV0KTsKKwkJCWdvdG8gdnVu
bWFwOworCQl9CisJfQorCisJc3JjID0gdmFkZHIgKyB5MSAqIGZiLT5waXRjaGVzWzBdICsgeDEg
KiA0OworCisJeDEgKz0gKEdNMTJVMzIwX1JFQUxfV0lEVEggLSBHTTEyVTMyMF9VU0VSX1dJRFRI
KSAvIDI7CisJeDIgKz0gKEdNMTJVMzIwX1JFQUxfV0lEVEggLSBHTTEyVTMyMF9VU0VSX1dJRFRI
KSAvIDI7CisKKwlmb3IgKDsgeTEgPCB5MjsgeTErKykgeworCQlyZW1haW4gPSAwOworCQlsZW4g
PSAoeDIgLSB4MSkgKiAzOworCQlkc3Rfb2Zmc2V0ID0gKHkxICogR00xMlUzMjBfUkVBTF9XSURU
SCArIHgxKSAqIDM7CisJCWJsb2NrID0gZHN0X29mZnNldCAvIERBVEFfQkxPQ0tfQ09OVEVOVF9T
SVpFOworCQlkc3Rfb2Zmc2V0ICU9IERBVEFfQkxPQ0tfQ09OVEVOVF9TSVpFOworCisJCWlmICgo
ZHN0X29mZnNldCArIGxlbikgPiBEQVRBX0JMT0NLX0NPTlRFTlRfU0laRSkgeworCQkJcmVtYWlu
ID0gZHN0X29mZnNldCArIGxlbiAtIERBVEFfQkxPQ0tfQ09OVEVOVF9TSVpFOworCQkJbGVuID0g
REFUQV9CTE9DS19DT05URU5UX1NJWkUgLSBkc3Rfb2Zmc2V0OworCQl9CisKKwkJZHN0X29mZnNl
dCArPSBEQVRBX0JMT0NLX0hFQURFUl9TSVpFOworCQlsZW4gLz0gMzsKKworCQlnbTEydTMyMF8z
MmJwcF90b18yNGJwcF9wYWNrZWQoCisJCQlnbTEydTMyMC0+ZGF0YV9idWZbYmxvY2tdICsgZHN0
X29mZnNldCwKKwkJCXNyYywgbGVuKTsKKworCQlpZiAocmVtYWluKSB7CisJCQlibG9jaysrOwor
CQkJZHN0X29mZnNldCA9IERBVEFfQkxPQ0tfSEVBREVSX1NJWkU7CisJCQlnbTEydTMyMF8zMmJw
cF90b18yNGJwcF9wYWNrZWQoCisJCQkJZ20xMnUzMjAtPmRhdGFfYnVmW2Jsb2NrXSArIGRzdF9v
ZmZzZXQsCisJCQkJc3JjICsgbGVuICogNCwgcmVtYWluIC8gMyk7CisJCX0KKwkJc3JjICs9IGZi
LT5waXRjaGVzWzBdOworCX0KKworCWlmIChmYi0+b2JqWzBdLT5pbXBvcnRfYXR0YWNoKSB7CisJ
CXJldCA9IGRtYV9idWZfZW5kX2NwdV9hY2Nlc3MoZmItPm9ialswXS0+aW1wb3J0X2F0dGFjaC0+
ZG1hYnVmLAorCQkJCQkgICAgIERNQV9GUk9NX0RFVklDRSk7CisJCWlmIChyZXQpCisJCQlEUk1f
RVJST1IoImRtYV9idWZfZW5kX2NwdV9hY2Nlc3MgZXJyOiAlZFxuIiwgcmV0KTsKKwl9Cit2dW5t
YXA6CisJZHJtX2dlbV9zaG1lbV92dW5tYXAoZmItPm9ialswXSwgdmFkZHIpOworcHV0X2ZiOgor
CWRybV9mcmFtZWJ1ZmZlcl9wdXQoZmIpOworCWdtMTJ1MzIwLT5mYl91cGRhdGUuZmIgPSBOVUxM
OwordW5sb2NrOgorCW11dGV4X3VubG9jaygmZ20xMnUzMjAtPmZiX3VwZGF0ZS5sb2NrKTsKK30K
Kworc3RhdGljIGludCBnbTEydTMyMF9mYl91cGRhdGVfcmVhZHkoc3RydWN0IGdtMTJ1MzIwX2Rl
dmljZSAqZ20xMnUzMjApCit7CisJaW50IHJldDsKKworCW11dGV4X2xvY2soJmdtMTJ1MzIwLT5m
Yl91cGRhdGUubG9jayk7CisJcmV0ID0gIWdtMTJ1MzIwLT5mYl91cGRhdGUucnVuIHx8IGdtMTJ1
MzIwLT5mYl91cGRhdGUuZmIgIT0gTlVMTDsKKwltdXRleF91bmxvY2soJmdtMTJ1MzIwLT5mYl91
cGRhdGUubG9jayk7CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgdm9pZCBnbTEydTMyMF9m
Yl91cGRhdGVfd29yayhzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCit7CisJc3RydWN0IGdtMTJ1
MzIwX2RldmljZSAqZ20xMnUzMjAgPQorCQljb250YWluZXJfb2Yod29yaywgc3RydWN0IGdtMTJ1
MzIwX2RldmljZSwgZmJfdXBkYXRlLndvcmspOworCWludCBkcmF3X3N0YXR1c190aW1lb3V0ID0g
RklSU1RfRlJBTUVfVElNRU9VVDsKKwlpbnQgYmxvY2ssIGJsb2NrX3NpemUsIGxlbjsKKwlpbnQg
ZnJhbWUgPSAwOworCWludCByZXQgPSAwOworCisJd2hpbGUgKGdtMTJ1MzIwLT5mYl91cGRhdGUu
cnVuKSB7CisJCWdtMTJ1MzIwX2NvcHlfZmJfdG9fYmxvY2tzKGdtMTJ1MzIwKTsKKworCQlmb3Ig
KGJsb2NrID0gMDsgYmxvY2sgPCBHTTEyVTMyMF9CTE9DS19DT1VOVDsgYmxvY2srKykgeworCQkJ
aWYgKGJsb2NrID09IEdNMTJVMzIwX0JMT0NLX0NPVU5UIC0gMSkKKwkJCQlibG9ja19zaXplID0g
REFUQV9MQVNUX0JMT0NLX1NJWkU7CisJCQllbHNlCisJCQkJYmxvY2tfc2l6ZSA9IERBVEFfQkxP
Q0tfU0laRTsKKworCQkJLyogU2VuZCBkYXRhIGNvbW1hbmQgdG8gZGV2aWNlICovCisJCQltZW1j
cHkoZ20xMnUzMjAtPmNtZF9idWYsIGNtZF9kYXRhLCBDTURfU0laRSk7CisJCQlnbTEydTMyMC0+
Y21kX2J1Zls4XSA9IGJsb2NrX3NpemUgJiAweGZmOworCQkJZ20xMnUzMjAtPmNtZF9idWZbOV0g
PSBibG9ja19zaXplID4+IDg7CisJCQlnbTEydTMyMC0+Y21kX2J1ZlsyMF0gPSAweGZjIC0gYmxv
Y2sgKiA0OworCQkJZ20xMnUzMjAtPmNtZF9idWZbMjFdID0gYmxvY2sgfCAoZnJhbWUgPDwgNyk7
CisKKwkJCXJldCA9IHVzYl9idWxrX21zZyhnbTEydTMyMC0+dWRldiwKKwkJCQl1c2Jfc25kYnVs
a3BpcGUoZ20xMnUzMjAtPnVkZXYsIERBVEFfU05EX0VQVCksCisJCQkJZ20xMnUzMjAtPmNtZF9i
dWYsIENNRF9TSVpFLCAmbGVuLAorCQkJCUNNRF9USU1FT1VUKTsKKwkJCWlmIChyZXQgfHwgbGVu
ICE9IENNRF9TSVpFKQorCQkJCWdvdG8gZXJyOworCisJCQkvKiBTZW5kIGRhdGEgYmxvY2sgdG8g
ZGV2aWNlICovCisJCQlyZXQgPSB1c2JfYnVsa19tc2coZ20xMnUzMjAtPnVkZXYsCisJCQkJdXNi
X3NuZGJ1bGtwaXBlKGdtMTJ1MzIwLT51ZGV2LCBEQVRBX1NORF9FUFQpLAorCQkJCWdtMTJ1MzIw
LT5kYXRhX2J1ZltibG9ja10sIGJsb2NrX3NpemUsCisJCQkJJmxlbiwgREFUQV9USU1FT1VUKTsK
KwkJCWlmIChyZXQgfHwgbGVuICE9IGJsb2NrX3NpemUpCisJCQkJZ290byBlcnI7CisKKwkJCS8q
IFJlYWQgc3RhdHVzICovCisJCQlyZXQgPSB1c2JfYnVsa19tc2coZ20xMnUzMjAtPnVkZXYsCisJ
CQkJdXNiX3JjdmJ1bGtwaXBlKGdtMTJ1MzIwLT51ZGV2LCBEQVRBX1JDVl9FUFQpLAorCQkJCWdt
MTJ1MzIwLT5jbWRfYnVmLCBSRUFEX1NUQVRVU19TSVpFLCAmbGVuLAorCQkJCUNNRF9USU1FT1VU
KTsKKwkJCWlmIChyZXQgfHwgbGVuICE9IFJFQURfU1RBVFVTX1NJWkUpCisJCQkJZ290byBlcnI7
CisJCX0KKworCQkvKiBTZW5kIGRyYXcgY29tbWFuZCB0byBkZXZpY2UgKi8KKwkJbWVtY3B5KGdt
MTJ1MzIwLT5jbWRfYnVmLCBjbWRfZHJhdywgQ01EX1NJWkUpOworCQlyZXQgPSB1c2JfYnVsa19t
c2coZ20xMnUzMjAtPnVkZXYsCisJCQl1c2Jfc25kYnVsa3BpcGUoZ20xMnUzMjAtPnVkZXYsIERB
VEFfU05EX0VQVCksCisJCQlnbTEydTMyMC0+Y21kX2J1ZiwgQ01EX1NJWkUsICZsZW4sIENNRF9U
SU1FT1VUKTsKKwkJaWYgKHJldCB8fCBsZW4gIT0gQ01EX1NJWkUpCisJCQlnb3RvIGVycjsKKwor
CQkvKiBSZWFkIHN0YXR1cyAqLworCQlyZXQgPSB1c2JfYnVsa19tc2coZ20xMnUzMjAtPnVkZXYs
CisJCQl1c2JfcmN2YnVsa3BpcGUoZ20xMnUzMjAtPnVkZXYsIERBVEFfUkNWX0VQVCksCisJCQln
bTEydTMyMC0+Y21kX2J1ZiwgUkVBRF9TVEFUVVNfU0laRSwgJmxlbiwKKwkJCWRyYXdfc3RhdHVz
X3RpbWVvdXQpOworCQlpZiAocmV0IHx8IGxlbiAhPSBSRUFEX1NUQVRVU19TSVpFKQorCQkJZ290
byBlcnI7CisKKwkJZHJhd19zdGF0dXNfdGltZW91dCA9IENNRF9USU1FT1VUOworCQlmcmFtZSA9
ICFmcmFtZTsKKworCQkvKgorCQkgKiBXZSBtdXN0IGRyYXcgYSBmcmFtZSBldmVyeSAycyBvdGhl
cndpc2UgdGhlIHByb2plY3RvcgorCQkgKiBzd2l0Y2hlcyBiYWNrIHRvIHNob3dpbmcgaXRzIGxv
Z28uCisJCSAqLworCQl3YWl0X2V2ZW50X3RpbWVvdXQoZ20xMnUzMjAtPmZiX3VwZGF0ZS53YWl0
cSwKKwkJCQkgICBnbTEydTMyMF9mYl91cGRhdGVfcmVhZHkoZ20xMnUzMjApLAorCQkJCSAgIElE
TEVfVElNRU9VVCk7CisJfQorCXJldHVybjsKK2VycjoKKwkvKiBEbyBub3QgbG9nIGVycm9ycyBj
YXVzZWQgYnkgbW9kdWxlIHVubG9hZCBvciBkZXZpY2UgdW5wbHVnICovCisJaWYgKHJldCAhPSAt
RUNPTk5SRVNFVCAmJiByZXQgIT0gLUVTSFVURE9XTikKKwkJZGV2X2VycigmZ20xMnUzMjAtPnVk
ZXYtPmRldiwgIkZyYW1lIHVwZGF0ZSBlcnJvcjogJWRcbiIsIHJldCk7Cit9CisKK3N0YXRpYyB2
b2lkIGdtMTJ1MzIwX2ZiX21hcmtfZGlydHkoc3RydWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsCisJ
CQkJICAgc3RydWN0IGRybV9yZWN0ICpkaXJ0eSkKK3sKKwlzdHJ1Y3QgZ20xMnUzMjBfZGV2aWNl
ICpnbTEydTMyMCA9IGZiLT5kZXYtPmRldl9wcml2YXRlOworCXN0cnVjdCBkcm1fZnJhbWVidWZm
ZXIgKm9sZF9mYiA9IE5VTEw7CisJYm9vbCB3YWtldXAgPSBmYWxzZTsKKworCW11dGV4X2xvY2so
JmdtMTJ1MzIwLT5mYl91cGRhdGUubG9jayk7CisKKwlpZiAoZ20xMnUzMjAtPmZiX3VwZGF0ZS5m
YiAhPSBmYikgeworCQlvbGRfZmIgPSBnbTEydTMyMC0+ZmJfdXBkYXRlLmZiOworCQlkcm1fZnJh
bWVidWZmZXJfZ2V0KGZiKTsKKwkJZ20xMnUzMjAtPmZiX3VwZGF0ZS5mYiA9IGZiOworCQlnbTEy
dTMyMC0+ZmJfdXBkYXRlLnJlY3QgPSAqZGlydHk7CisJCXdha2V1cCA9IHRydWU7CisJfSBlbHNl
IHsKKwkJc3RydWN0IGRybV9yZWN0ICpyZWN0ID0gJmdtMTJ1MzIwLT5mYl91cGRhdGUucmVjdDsK
KworCQlyZWN0LT54MSA9IG1pbihyZWN0LT54MSwgZGlydHktPngxKTsKKwkJcmVjdC0+eTEgPSBt
aW4ocmVjdC0+eTEsIGRpcnR5LT55MSk7CisJCXJlY3QtPngyID0gbWF4KHJlY3QtPngyLCBkaXJ0
eS0+eDIpOworCQlyZWN0LT55MiA9IG1heChyZWN0LT55MiwgZGlydHktPnkyKTsKKwl9CisKKwlt
dXRleF91bmxvY2soJmdtMTJ1MzIwLT5mYl91cGRhdGUubG9jayk7CisKKwlpZiAod2FrZXVwKQor
CQl3YWtlX3VwKCZnbTEydTMyMC0+ZmJfdXBkYXRlLndhaXRxKTsKKworCWlmIChvbGRfZmIpCisJ
CWRybV9mcmFtZWJ1ZmZlcl9wdXQob2xkX2ZiKTsKK30KKworc3RhdGljIHZvaWQgZ20xMnUzMjBf
c3RhcnRfZmJfdXBkYXRlKHN0cnVjdCBnbTEydTMyMF9kZXZpY2UgKmdtMTJ1MzIwKQoreworCW11
dGV4X2xvY2soJmdtMTJ1MzIwLT5mYl91cGRhdGUubG9jayk7CisJZ20xMnUzMjAtPmZiX3VwZGF0
ZS5ydW4gPSB0cnVlOworCW11dGV4X3VubG9jaygmZ20xMnUzMjAtPmZiX3VwZGF0ZS5sb2NrKTsK
KworCXF1ZXVlX3dvcmsoZ20xMnUzMjAtPmZiX3VwZGF0ZS53b3JrcSwgJmdtMTJ1MzIwLT5mYl91
cGRhdGUud29yayk7Cit9CisKK3N0YXRpYyB2b2lkIGdtMTJ1MzIwX3N0b3BfZmJfdXBkYXRlKHN0
cnVjdCBnbTEydTMyMF9kZXZpY2UgKmdtMTJ1MzIwKQoreworCW11dGV4X2xvY2soJmdtMTJ1MzIw
LT5mYl91cGRhdGUubG9jayk7CisJZ20xMnUzMjAtPmZiX3VwZGF0ZS5ydW4gPSBmYWxzZTsKKwlt
dXRleF91bmxvY2soJmdtMTJ1MzIwLT5mYl91cGRhdGUubG9jayk7CisKKwl3YWtlX3VwKCZnbTEy
dTMyMC0+ZmJfdXBkYXRlLndhaXRxKTsKKwljYW5jZWxfd29ya19zeW5jKCZnbTEydTMyMC0+ZmJf
dXBkYXRlLndvcmspOworCisJbXV0ZXhfbG9jaygmZ20xMnUzMjAtPmZiX3VwZGF0ZS5sb2NrKTsK
KwlpZiAoZ20xMnUzMjAtPmZiX3VwZGF0ZS5mYikgeworCQlkcm1fZnJhbWVidWZmZXJfcHV0KGdt
MTJ1MzIwLT5mYl91cGRhdGUuZmIpOworCQlnbTEydTMyMC0+ZmJfdXBkYXRlLmZiID0gTlVMTDsK
Kwl9CisJbXV0ZXhfdW5sb2NrKCZnbTEydTMyMC0+ZmJfdXBkYXRlLmxvY2spOworfQorCitzdGF0
aWMgaW50IGdtMTJ1MzIwX3NldF9lY29tb2RlKHN0cnVjdCBnbTEydTMyMF9kZXZpY2UgKmdtMTJ1
MzIwKQoreworCXJldHVybiBnbTEydTMyMF9taXNjX3JlcXVlc3QoZ20xMnUzMjAsIE1JU0NfUkVR
X0dFVF9TRVRfRUNPX0EsCisJCQkJICAgICBNSVNDX1JFUV9HRVRfU0VUX0VDT19CLCAweDAxIC8q
IHNldCAqLywKKwkJCQkgICAgIGVjb19tb2RlID8gMHgwMSA6IDB4MDAsIDB4MDAsIDB4MDEpOwor
fQorCisvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0gKi8KKy8qIGdtMTJ1MzIwIGNvbm5lY3RvcgkJCQkJCSAgICAgICov
CisKKy8qCisgKsKgV2UgdXNlIGZha2UgRURJRCBpbmZvIHNvIHRoYXQgdXNlcnNwYWNlIGtub3cg
dGhhdCBpdCBpcyBkZWFsaW5nIHdpdGgKKyAqIGFuIEFjZXIgcHJvamVjdG9yLCByYXRoZXIgdGhl
biBsaXN0aW5nIHRoaXMgYXMgYW4gInVua25vd24iIG1vbml0b3IuCisgKiBOb3RlIHRoaXMgYXNz
dW1lcyB0aGlzIGRyaXZlciBpcyBvbmx5IGV2ZXIgdXNlZCB3aXRoIHRoZSBBY2VyIEMxMjAsIGlm
IHdlCisgKiBhZGQgc3VwcG9ydCBmb3Igb3RoZXIgZGV2aWNlcyB0aGUgdmVuZG9yIGFuZCBtb2Rl
bCBzaG91bGQgYmUgcGFyYW1ldGVyaXplZC4KKyAqLworc3RhdGljIHN0cnVjdCBlZGlkIGdtMTJ1
MzIwX2VkaWQgPSB7CisJLmhlYWRlcgkJPSB7IDB4MDAsIDB4ZmYsIDB4ZmYsIDB4ZmYsIDB4ZmYs
IDB4ZmYsIDB4ZmYsIDB4MDAgfSwKKwkubWZnX2lkCQk9IHsgMHgwNCwgMHg3MiB9LAkvKiAiQUNS
IiAqLworCS5wcm9kX2NvZGUJPSB7IDB4MjAsIDB4YzEgfSwJLyogQzEyMGggKi8KKwkuc2VyaWFs
CQk9IDB4YWE1NWFhNTUsCisJLm1mZ193ZWVrCT0gMSwKKwkubWZnX3llYXIJPSAxNiwKKwkudmVy
c2lvbgk9IDEsCQkJLyogRURJRCAxLjMgKi8KKwkucmV2aXNpb24JPSAzLAkJCS8qIEVESUQgMS4z
ICovCisJLmlucHV0CQk9IDB4MDgsCQkJLyogQW5hbG9nIGlucHV0ICovCisJLmZlYXR1cmVzCT0g
MHgwYSwJCQkvKiBQcmVmIHRpbWluZyBpbiBEVEQgMSAqLworCS5zdGFuZGFyZF90aW1pbmdzID0g
eyB7IDEsIDEgfSwgeyAxLCAxIH0sIHsgMSwgMSB9LCB7IDEsIDEgfSwKKwkJCSAgICAgIHsgMSwg
MSB9LCB7IDEsIDEgfSwgeyAxLCAxIH0sIHsgMSwgMSB9IH0sCisJLmRldGFpbGVkX3RpbWluZ3Mg
PSB7IHsKKwkJLnBpeGVsX2Nsb2NrID0gMzM4MywKKwkJLyogaGFjdGl2ZSA9IDg0OCwgaGJsYW5r
ID0gMjU2ICovCisJCS5kYXRhLnBpeGVsX2RhdGEuaGFjdGl2ZV9sbyA9IDB4NTAsCisJCS5kYXRh
LnBpeGVsX2RhdGEuaGJsYW5rX2xvID0gMHgwMCwKKwkJLmRhdGEucGl4ZWxfZGF0YS5oYWN0aXZl
X2hibGFua19oaSA9IDB4MzEsCisJCS8qIHZhY3RpdmUgPSA0ODAsIHZibGFuayA9IDI4ICovCisJ
CS5kYXRhLnBpeGVsX2RhdGEudmFjdGl2ZV9sbyA9IDB4ZTAsCisJCS5kYXRhLnBpeGVsX2RhdGEu
dmJsYW5rX2xvID0gMHgxYywKKwkJLmRhdGEucGl4ZWxfZGF0YS52YWN0aXZlX3ZibGFua19oaSA9
IDB4MTAsCisJCS8qIGhzeW5jIG9mZnNldCA0MCBwdyAxMjgsIHZzeW5jIG9mZnNldCAxIHB3IDQg
Ki8KKwkJLmRhdGEucGl4ZWxfZGF0YS5oc3luY19vZmZzZXRfbG8gPSAweDI4LAorCQkuZGF0YS5w
aXhlbF9kYXRhLmhzeW5jX3B1bHNlX3dpZHRoX2xvID0gMHg4MCwKKwkJLmRhdGEucGl4ZWxfZGF0
YS52c3luY19vZmZzZXRfcHVsc2Vfd2lkdGhfbG8gPSAweDE0LAorCQkuZGF0YS5waXhlbF9kYXRh
LmhzeW5jX3ZzeW5jX29mZnNldF9wdWxzZV93aWR0aF9oaSA9IDB4MDAsCisJCS8qIERpZ2l0YWwg
c2VwYXJhdGUgc3luY3MsIGhzeW5jKywgdnN5bmMrICovCisJCS5kYXRhLnBpeGVsX2RhdGEubWlz
YyA9IDB4MWUsCisJfSwgeworCQkucGl4ZWxfY2xvY2sgPSAwLAorCQkuZGF0YS5vdGhlcl9kYXRh
LnR5cGUgPSAweGZkLCAvKiBNb25pdG9yIHJhbmdlcyAqLworCQkuZGF0YS5vdGhlcl9kYXRhLmRh
dGEucmFuZ2UubWluX3ZmcmVxID0gNTksCisJCS5kYXRhLm90aGVyX2RhdGEuZGF0YS5yYW5nZS5t
YXhfdmZyZXEgPSA2MSwKKwkJLmRhdGEub3RoZXJfZGF0YS5kYXRhLnJhbmdlLm1pbl9oZnJlcV9r
aHogPSAyOSwKKwkJLmRhdGEub3RoZXJfZGF0YS5kYXRhLnJhbmdlLm1heF9oZnJlcV9raHogPSAz
MiwKKwkJLmRhdGEub3RoZXJfZGF0YS5kYXRhLnJhbmdlLnBpeGVsX2Nsb2NrX21oeiA9IDQsIC8q
IDQwIE1IeiAqLworCQkuZGF0YS5vdGhlcl9kYXRhLmRhdGEucmFuZ2UuZmxhZ3MgPSAwLAorCQku
ZGF0YS5vdGhlcl9kYXRhLmRhdGEucmFuZ2UuZm9ybXVsYS5jdnQgPSB7CisJCQkweGEwLCAweDIw
LCAweDIwLCAweDIwLCAweDIwLCAweDIwLCAweDIwIH0sCisJfSwgeworCQkucGl4ZWxfY2xvY2sg
PSAwLAorCQkuZGF0YS5vdGhlcl9kYXRhLnR5cGUgPSAweGZjLCAvKiBNb2RlbCBzdHJpbmcgKi8K
KwkJLmRhdGEub3RoZXJfZGF0YS5kYXRhLnN0ci5zdHIgPSB7CisJCQknUCcsICdyJywgJ28nLCAn
aicsICdlJywgJ2MnLCAndCcsICdvJywgJ3InLCAnXG4nLAorCQkJJyAnLCAnICcsICAnICcgfSwK
Kwl9LCB7CisJCS5waXhlbF9jbG9jayA9IDAsCisJCS5kYXRhLm90aGVyX2RhdGEudHlwZSA9IDB4
ZmUsIC8qIFVuc3BlY2lmaWVkIHRleHQgLyBwYWRkaW5nICovCisJCS5kYXRhLm90aGVyX2RhdGEu
ZGF0YS5zdHIuc3RyID0geworCQkJJ1xuJywgJyAnLCAnICcsICcgJywgJyAnLCAnICcsICcgJywg
JyAnLCAnICcsICcgJywKKwkJCScgJywgJyAnLCAgJyAnIH0sCisJfSB9LAorCS5jaGVja3N1bSA9
IDB4MTMsCit9OworCitzdGF0aWMgaW50IGdtMTJ1MzIwX2Nvbm5fZ2V0X21vZGVzKHN0cnVjdCBk
cm1fY29ubmVjdG9yICpjb25uZWN0b3IpCit7CisJZHJtX2Nvbm5lY3Rvcl91cGRhdGVfZWRpZF9w
cm9wZXJ0eShjb25uZWN0b3IsICZnbTEydTMyMF9lZGlkKTsKKwlyZXR1cm4gZHJtX2FkZF9lZGlk
X21vZGVzKGNvbm5lY3RvciwgJmdtMTJ1MzIwX2VkaWQpOworfQorCitzdGF0aWMgY29uc3Qgc3Ry
dWN0IGRybV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzIGdtMTJ1MzIwX2Nvbm5faGVscGVyX2Z1bmNz
ID0geworCS5nZXRfbW9kZXMgPSBnbTEydTMyMF9jb25uX2dldF9tb2RlcywKK307CisKK3N0YXRp
YyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9mdW5jcyBnbTEydTMyMF9jb25uX2Z1bmNzID0g
eworCS5maWxsX21vZGVzID0gZHJtX2hlbHBlcl9wcm9iZV9zaW5nbGVfY29ubmVjdG9yX21vZGVz
LAorCS5kZXN0cm95ID0gZHJtX2Nvbm5lY3Rvcl9jbGVhbnVwLAorCS5yZXNldCA9IGRybV9hdG9t
aWNfaGVscGVyX2Nvbm5lY3Rvcl9yZXNldCwKKwkuYXRvbWljX2R1cGxpY2F0ZV9zdGF0ZSA9IGRy
bV9hdG9taWNfaGVscGVyX2Nvbm5lY3Rvcl9kdXBsaWNhdGVfc3RhdGUsCisJLmF0b21pY19kZXN0
cm95X3N0YXRlID0gZHJtX2F0b21pY19oZWxwZXJfY29ubmVjdG9yX2Rlc3Ryb3lfc3RhdGUsCit9
OworCitzdGF0aWMgaW50IGdtMTJ1MzIwX2Nvbm5faW5pdChzdHJ1Y3QgZ20xMnUzMjBfZGV2aWNl
ICpnbTEydTMyMCkKK3sKKwlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQoJmdtMTJ1MzIwLT5jb25u
LCAmZ20xMnUzMjBfY29ubl9oZWxwZXJfZnVuY3MpOworCXJldHVybiBkcm1fY29ubmVjdG9yX2lu
aXQoJmdtMTJ1MzIwLT5kZXYsICZnbTEydTMyMC0+Y29ubiwKKwkJCQkgICZnbTEydTMyMF9jb25u
X2Z1bmNzLCBEUk1fTU9ERV9DT05ORUNUT1JfVkdBKTsKK30KKworLyogLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCisv
KiBnbTEydTMyMCAoc2ltcGxlKSBkaXNwbGF5IHBpcGUJCQkJICAgICAgKi8KKworc3RhdGljIHZv
aWQgZ20xMnUzMjBfcGlwZV9lbmFibGUoc3RydWN0IGRybV9zaW1wbGVfZGlzcGxheV9waXBlICpw
aXBlLAorCQkJCSBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKmNydGNfc3RhdGUsCisJCQkJIHN0cnVj
dCBkcm1fcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlKQoreworCXN0cnVjdCBnbTEydTMyMF9kZXZp
Y2UgKmdtMTJ1MzIwID0gcGlwZS0+Y3J0Yy5kZXYtPmRldl9wcml2YXRlOworCXN0cnVjdCBkcm1f
cmVjdCByZWN0ID0geyAwLCAwLCBHTTEyVTMyMF9VU0VSX1dJRFRILCBHTTEyVTMyMF9IRUlHSFQg
fTsKKworCWdtMTJ1MzIwX2ZiX21hcmtfZGlydHkocGxhbmVfc3RhdGUtPmZiLCAmcmVjdCk7CisJ
Z20xMnUzMjBfc3RhcnRfZmJfdXBkYXRlKGdtMTJ1MzIwKTsKKwlnbTEydTMyMC0+cGlwZV9lbmFi
bGVkID0gdHJ1ZTsKK30KKworc3RhdGljIHZvaWQgZ20xMnUzMjBfcGlwZV9kaXNhYmxlKHN0cnVj
dCBkcm1fc2ltcGxlX2Rpc3BsYXlfcGlwZSAqcGlwZSkKK3sKKwlzdHJ1Y3QgZ20xMnUzMjBfZGV2
aWNlICpnbTEydTMyMCA9IHBpcGUtPmNydGMuZGV2LT5kZXZfcHJpdmF0ZTsKKworCWdtMTJ1MzIw
X3N0b3BfZmJfdXBkYXRlKGdtMTJ1MzIwKTsKKwlnbTEydTMyMC0+cGlwZV9lbmFibGVkID0gZmFs
c2U7Cit9CisKK3N0YXRpYyB2b2lkIGdtMTJ1MzIwX3BpcGVfdXBkYXRlKHN0cnVjdCBkcm1fc2lt
cGxlX2Rpc3BsYXlfcGlwZSAqcGlwZSwKKwkJCQkgc3RydWN0IGRybV9wbGFuZV9zdGF0ZSAqb2xk
X3N0YXRlKQoreworCXN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKnN0YXRlID0gcGlwZS0+cGxhbmUu
c3RhdGU7CisJc3RydWN0IGRybV9jcnRjICpjcnRjID0gJnBpcGUtPmNydGM7CisJc3RydWN0IGRy
bV9yZWN0IHJlY3Q7CisKKwlpZiAoZHJtX2F0b21pY19oZWxwZXJfZGFtYWdlX21lcmdlZChvbGRf
c3RhdGUsIHN0YXRlLCAmcmVjdCkpCisJCWdtMTJ1MzIwX2ZiX21hcmtfZGlydHkocGlwZS0+cGxh
bmUuc3RhdGUtPmZiLCAmcmVjdCk7CisKKwlpZiAoY3J0Yy0+c3RhdGUtPmV2ZW50KSB7CisJCXNw
aW5fbG9ja19pcnEoJmNydGMtPmRldi0+ZXZlbnRfbG9jayk7CisJCWRybV9jcnRjX3NlbmRfdmJs
YW5rX2V2ZW50KGNydGMsIGNydGMtPnN0YXRlLT5ldmVudCk7CisJCWNydGMtPnN0YXRlLT5ldmVu
dCA9IE5VTEw7CisJCXNwaW5fdW5sb2NrX2lycSgmY3J0Yy0+ZGV2LT5ldmVudF9sb2NrKTsKKwl9
Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3NpbXBsZV9kaXNwbGF5X3BpcGVfZnVuY3Mg
Z20xMnUzMjBfcGlwZV9mdW5jcyA9IHsKKwkuZW5hYmxlCSAgICA9IGdtMTJ1MzIwX3BpcGVfZW5h
YmxlLAorCS5kaXNhYmxlICAgID0gZ20xMnUzMjBfcGlwZV9kaXNhYmxlLAorCS51cGRhdGUJICAg
ID0gZ20xMnUzMjBfcGlwZV91cGRhdGUsCit9OworCitzdGF0aWMgY29uc3QgdWludDMyX3QgZ20x
MnUzMjBfcGlwZV9mb3JtYXRzW10gPSB7CisJRFJNX0ZPUk1BVF9YUkdCODg4OCwKK307CisKK3N0
YXRpYyBjb25zdCB1aW50NjRfdCBnbTEydTMyMF9waXBlX21vZGlmaWVyc1tdID0geworCURSTV9G
T1JNQVRfTU9EX0xJTkVBUiwKKwlEUk1fRk9STUFUX01PRF9JTlZBTElECit9OworCitzdGF0aWMg
dm9pZCBnbTEydTMyMF9kcml2ZXJfcmVsZWFzZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQorewor
CXN0cnVjdCBnbTEydTMyMF9kZXZpY2UgKmdtMTJ1MzIwID0gZGV2LT5kZXZfcHJpdmF0ZTsKKwor
CWdtMTJ1MzIwX3VzYl9mcmVlKGdtMTJ1MzIwKTsKKwlkcm1fbW9kZV9jb25maWdfY2xlYW51cChk
ZXYpOworCWRybV9kZXZfZmluaShkZXYpOworCWtmcmVlKGdtMTJ1MzIwKTsKK30KKworREVGSU5F
X0RSTV9HRU1fU0hNRU1fRk9QUyhnbTEydTMyMF9mb3BzKTsKKworc3RhdGljIHN0cnVjdCBkcm1f
ZHJpdmVyIGdtMTJ1MzIwX2RybV9kcml2ZXIgPSB7CisJLmRyaXZlcl9mZWF0dXJlcyA9IERSSVZF
Ul9NT0RFU0VUIHwgRFJJVkVSX0dFTSB8IERSSVZFUl9BVE9NSUMgfAorCQkJICAgRFJJVkVSX1BS
SU1FLAorCisJLm5hbWUJCSA9IERSSVZFUl9OQU1FLAorCS5kZXNjCQkgPSBEUklWRVJfREVTQywK
KwkuZGF0ZQkJID0gRFJJVkVSX0RBVEUsCisJLm1ham9yCQkgPSBEUklWRVJfTUFKT1IsCisJLm1p
bm9yCQkgPSBEUklWRVJfTUlOT1IsCisKKwkucmVsZWFzZQkgPSBnbTEydTMyMF9kcml2ZXJfcmVs
ZWFzZSwKKwkuZm9wcwkJID0gJmdtMTJ1MzIwX2ZvcHMsCisJRFJNX0dFTV9TSE1FTV9EUklWRVJf
T1BTLAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fbW9kZV9jb25maWdfZnVuY3MgZ20x
MnUzMjBfbW9kZV9jb25maWdfZnVuY3MgPSB7CisJLmZiX2NyZWF0ZSA9IGRybV9nZW1fZmJfY3Jl
YXRlX3dpdGhfZGlydHksCisJLmF0b21pY19jaGVjayA9IGRybV9hdG9taWNfaGVscGVyX2NoZWNr
LAorCS5hdG9taWNfY29tbWl0ID0gZHJtX2F0b21pY19oZWxwZXJfY29tbWl0LAorfTsKKworc3Rh
dGljIGludCBnbTEydTMyMF91c2JfcHJvYmUoc3RydWN0IHVzYl9pbnRlcmZhY2UgKmludGVyZmFj
ZSwKKwkJCSAgICAgIGNvbnN0IHN0cnVjdCB1c2JfZGV2aWNlX2lkICppZCkKK3sKKwlzdHJ1Y3Qg
Z20xMnUzMjBfZGV2aWNlICpnbTEydTMyMDsKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2OworCWlu
dCByZXQ7CisKKwkvKgorCSAqIFRoZSBnbTEydTMyMCBwcmVzZW50cyBpdHNlbGYgdG8gdGhlIHN5
c3RlbSBhcyAyIHVzYiBtYXNzLXN0b3JhZ2UKKwkgKiBpbnRlcmZhY2VzLCB3ZSBvbmx5IGNhcmUg
YWJvdXQgLyBuZWVkIHRoZSBmaXJzdCBvbmUuCisJICovCisJaWYgKGludGVyZmFjZS0+Y3VyX2Fs
dHNldHRpbmctPmRlc2MuYkludGVyZmFjZU51bWJlciAhPSAwKQorCQlyZXR1cm4gLUVOT0RFVjsK
KworCWdtMTJ1MzIwID0ga3phbGxvYyhzaXplb2YoKmdtMTJ1MzIwKSwgR0ZQX0tFUk5FTCk7CisJ
aWYgKGdtMTJ1MzIwID09IE5VTEwpCisJCXJldHVybiAtRU5PTUVNOworCisJZ20xMnUzMjAtPnVk
ZXYgPSBpbnRlcmZhY2VfdG9fdXNiZGV2KGludGVyZmFjZSk7CisJSU5JVF9XT1JLKCZnbTEydTMy
MC0+ZmJfdXBkYXRlLndvcmssIGdtMTJ1MzIwX2ZiX3VwZGF0ZV93b3JrKTsKKwltdXRleF9pbml0
KCZnbTEydTMyMC0+ZmJfdXBkYXRlLmxvY2spOworCWluaXRfd2FpdHF1ZXVlX2hlYWQoJmdtMTJ1
MzIwLT5mYl91cGRhdGUud2FpdHEpOworCisJZGV2ID0gJmdtMTJ1MzIwLT5kZXY7CisJcmV0ID0g
ZHJtX2Rldl9pbml0KGRldiwgJmdtMTJ1MzIwX2RybV9kcml2ZXIsICZpbnRlcmZhY2UtPmRldik7
CisJaWYgKHJldCkgeworCQlrZnJlZShnbTEydTMyMCk7CisJCXJldHVybiByZXQ7CisJfQorCWRl
di0+ZGV2X3ByaXZhdGUgPSBnbTEydTMyMDsKKworCWRybV9tb2RlX2NvbmZpZ19pbml0KGRldik7
CisJZGV2LT5tb2RlX2NvbmZpZy5taW5fd2lkdGggPSBHTTEyVTMyMF9VU0VSX1dJRFRIOworCWRl
di0+bW9kZV9jb25maWcubWF4X3dpZHRoID0gR00xMlUzMjBfVVNFUl9XSURUSDsKKwlkZXYtPm1v
ZGVfY29uZmlnLm1pbl9oZWlnaHQgPSBHTTEyVTMyMF9IRUlHSFQ7CisJZGV2LT5tb2RlX2NvbmZp
Zy5tYXhfaGVpZ2h0ID0gR00xMlUzMjBfSEVJR0hUOworCWRldi0+bW9kZV9jb25maWcucHJlZmVy
cmVkX2RlcHRoID0gMjQ7CisJZGV2LT5tb2RlX2NvbmZpZy5wcmVmZXJfc2hhZG93ID0gMDsKKwlk
ZXYtPm1vZGVfY29uZmlnLmZ1bmNzID0gJmdtMTJ1MzIwX21vZGVfY29uZmlnX2Z1bmNzOworCisJ
cmV0ID0gZ20xMnUzMjBfdXNiX2FsbG9jKGdtMTJ1MzIwKTsKKwlpZiAocmV0KQorCQlnb3RvIGVy
cl9wdXQ7CisKKwlyZXQgPSBnbTEydTMyMF9zZXRfZWNvbW9kZShnbTEydTMyMCk7CisJaWYgKHJl
dCkKKwkJZ290byBlcnJfcHV0OworCisJcmV0ID0gZ20xMnUzMjBfY29ubl9pbml0KGdtMTJ1MzIw
KTsKKwlpZiAocmV0KQorCQlnb3RvIGVycl9wdXQ7CisKKwlyZXQgPSBkcm1fc2ltcGxlX2Rpc3Bs
YXlfcGlwZV9pbml0KCZnbTEydTMyMC0+ZGV2LAorCQkJCQkgICAmZ20xMnUzMjAtPnBpcGUsCisJ
CQkJCSAgICZnbTEydTMyMF9waXBlX2Z1bmNzLAorCQkJCQkgICBnbTEydTMyMF9waXBlX2Zvcm1h
dHMsCisJCQkJCSAgIEFSUkFZX1NJWkUoZ20xMnUzMjBfcGlwZV9mb3JtYXRzKSwKKwkJCQkJICAg
Z20xMnUzMjBfcGlwZV9tb2RpZmllcnMsCisJCQkJCSAgICZnbTEydTMyMC0+Y29ubik7CisJaWYg
KHJldCkKKwkJZ290byBlcnJfcHV0OworCisJZHJtX21vZGVfY29uZmlnX3Jlc2V0KGRldik7CisK
Kwl1c2Jfc2V0X2ludGZkYXRhKGludGVyZmFjZSwgZGV2KTsKKwlyZXQgPSBkcm1fZGV2X3JlZ2lz
dGVyKGRldiwgMCk7CisJaWYgKHJldCkKKwkJZ290byBlcnJfcHV0OworCisJZHJtX2ZiZGV2X2dl
bmVyaWNfc2V0dXAoZGV2LCBkZXYtPm1vZGVfY29uZmlnLnByZWZlcnJlZF9kZXB0aCk7CisKKwly
ZXR1cm4gMDsKKworZXJyX3B1dDoKKwlkcm1fZGV2X3B1dChkZXYpOworCXJldHVybiByZXQ7Cit9
CisKK3N0YXRpYyB2b2lkIGdtMTJ1MzIwX3VzYl9kaXNjb25uZWN0KHN0cnVjdCB1c2JfaW50ZXJm
YWNlICppbnRlcmZhY2UpCit7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IHVzYl9nZXRfaW50
ZmRhdGEoaW50ZXJmYWNlKTsKKwlzdHJ1Y3QgZ20xMnUzMjBfZGV2aWNlICpnbTEydTMyMCA9IGRl
di0+ZGV2X3ByaXZhdGU7CisKKwlnbTEydTMyMF9zdG9wX2ZiX3VwZGF0ZShnbTEydTMyMCk7CisJ
ZHJtX2Rldl91bnBsdWcoZGV2KTsKKwlkcm1fZGV2X3B1dChkZXYpOworfQorCisjaWZkZWYgQ09O
RklHX1BNCitzdGF0aWMgaW50IGdtMTJ1MzIwX3N1c3BlbmQoc3RydWN0IHVzYl9pbnRlcmZhY2Ug
KmludGVyZmFjZSwKKwkJCSAgICBwbV9tZXNzYWdlX3QgbWVzc2FnZSkKK3sKKwlzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2ID0gdXNiX2dldF9pbnRmZGF0YShpbnRlcmZhY2UpOworCXN0cnVjdCBnbTEy
dTMyMF9kZXZpY2UgKmdtMTJ1MzIwID0gZGV2LT5kZXZfcHJpdmF0ZTsKKworCWlmIChnbTEydTMy
MC0+cGlwZV9lbmFibGVkKQorCQlnbTEydTMyMF9zdG9wX2ZiX3VwZGF0ZShnbTEydTMyMCk7CisK
KwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBnbTEydTMyMF9yZXN1bWUoc3RydWN0IHVzYl9p
bnRlcmZhY2UgKmludGVyZmFjZSkKK3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gdXNiX2dl
dF9pbnRmZGF0YShpbnRlcmZhY2UpOworCXN0cnVjdCBnbTEydTMyMF9kZXZpY2UgKmdtMTJ1MzIw
ID0gZGV2LT5kZXZfcHJpdmF0ZTsKKworCWdtMTJ1MzIwX3NldF9lY29tb2RlKGdtMTJ1MzIwKTsK
KwlpZiAoZ20xMnUzMjAtPnBpcGVfZW5hYmxlZCkKKwkJZ20xMnUzMjBfc3RhcnRfZmJfdXBkYXRl
KGdtMTJ1MzIwKTsKKworCXJldHVybiAwOworfQorI2VuZGlmCisKK3N0YXRpYyBjb25zdCBzdHJ1
Y3QgdXNiX2RldmljZV9pZCBpZF90YWJsZVtdID0geworCXsgVVNCX0RFVklDRSgweDFkZTEsIDB4
YzEwMikgfSwKKwl7fSwKK307CitNT0RVTEVfREVWSUNFX1RBQkxFKHVzYiwgaWRfdGFibGUpOwor
CitzdGF0aWMgc3RydWN0IHVzYl9kcml2ZXIgZ20xMnUzMjBfdXNiX2RyaXZlciA9IHsKKwkubmFt
ZSA9ICJnbTEydTMyMCIsCisJLnByb2JlID0gZ20xMnUzMjBfdXNiX3Byb2JlLAorCS5kaXNjb25u
ZWN0ID0gZ20xMnUzMjBfdXNiX2Rpc2Nvbm5lY3QsCisJLmlkX3RhYmxlID0gaWRfdGFibGUsCisj
aWZkZWYgQ09ORklHX1BNCisJLnN1c3BlbmQgPSBnbTEydTMyMF9zdXNwZW5kLAorCS5yZXN1bWUg
PSBnbTEydTMyMF9yZXN1bWUsCisJLnJlc2V0X3Jlc3VtZSA9IGdtMTJ1MzIwX3Jlc3VtZSwKKyNl
bmRpZgorfTsKKworbW9kdWxlX3VzYl9kcml2ZXIoZ20xMnUzMjBfdXNiX2RyaXZlcik7CitNT0RV
TEVfQVVUSE9SKCJIYW5zIGRlIEdvZWRlIDxoZGVnb2VkZUByZWRoYXQuY29tPiIpOworTU9EVUxF
X0xJQ0VOU0UoIkdQTCIpOwotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9kcmktZGV2ZWw=
