Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D6C896E853
	for <lists+dri-devel@lfdr.de>; Fri, 19 Jul 2019 17:59:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5F7136E856;
	Fri, 19 Jul 2019 15:59:56 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp.domeneshop.no (smtp.domeneshop.no
 [IPv6:2a01:5b40:0:3005::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0CA4F6E853
 for <dri-devel@lists.freedesktop.org>; Fri, 19 Jul 2019 15:59:40 +0000 (UTC)
Received: from 211.81-166-168.customer.lyse.net ([81.166.168.211]:55144
 helo=localhost.localdomain)
 by smtp.domeneshop.no with esmtpsa (TLS1.2:ECDHE_RSA_AES_128_CBC_SHA1:128)
 (Exim 4.84_2) (envelope-from <noralf@tronnes.org>)
 id 1hoVII-0001bQ-75; Fri, 19 Jul 2019 17:59:38 +0200
From: =?UTF-8?q?Noralf=20Tr=C3=B8nnes?= <noralf@tronnes.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 09/11] drm/tinydrm/repaper: Don't use
 tinydrm_display_pipe_init()
Date: Fri, 19 Jul 2019 17:59:14 +0200
Message-Id: <20190719155916.62465-10-noralf@tronnes.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190719155916.62465-1-noralf@tronnes.org>
References: <20190719155916.62465-1-noralf@tronnes.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; d=tronnes.org; s=ds201810; 
 h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From;
 bh=Y460E6TlZeGSjc3SJu+hu83fexWOHSfdyjVZ/g05xVw=; 
 b=AsX3va9KRYNFVVoNWf4JzOevrAnQdHXx8y/rCvWv8dvy4PdJSt5lSB21eBHywatPAnTkpNDnU6ybW0Bcqm+iGt5K5R1BimGqMKNn5xnMzxiRwbR5nwgE6uwXsnuORtslIGrFBL1kBTSzTQ7DBmoyrm289/PAquQx+6SaOb32DT3apSLSeDxTBIPKMWe7crFY932+Z120awqBY8RXMjNMTpntNCevzgQy28HV5HkqXGVwlDQ4ZBW2dxkTT33yplfAtOLLSqoH7E+utbSd0AxQhfoNkcu3cxz5FA/Ng8as2PJKS5q45M0+Md+bzrKydlKnFOd2wgcOJu6FuSjUV2N5mA==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: sam@ravnborg.org, david@lechnology.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

dGlueWRybS5rbyBpcyBnb2luZyBhd2F5IHNvIGxldCdzIGltcGxlbWVudCBhIGNvbm5lY3Rvci4K
ClJldmlld2VkLWJ5OiBTYW0gUmF2bmJvcmcgPHNhbUByYXZuYm9yZy5vcmc+ClNpZ25lZC1vZmYt
Ynk6IE5vcmFsZiBUcsO4bm5lcyA8bm9yYWxmQHRyb25uZXMub3JnPgotLS0KIGRyaXZlcnMvZ3B1
L2RybS90aW55ZHJtL3JlcGFwZXIuYyB8IDU4ICsrKysrKysrKysrKysrKysrKysrKysrKysrKyst
LS0KIDEgZmlsZSBjaGFuZ2VkLCA1MyBpbnNlcnRpb25zKCspLCA1IGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90aW55ZHJtL3JlcGFwZXIuYyBiL2RyaXZlcnMvZ3B1
L2RybS90aW55ZHJtL3JlcGFwZXIuYwppbmRleCA0MGFmYTY2MTA3ZTUuLjc2ZDE3OTIwMDc3NSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Rpbnlkcm0vcmVwYXBlci5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS90aW55ZHJtL3JlcGFwZXIuYwpAQCAtMjMsNiArMjMsNyBAQAogI2luY2x1ZGUg
PGxpbnV4L3RoZXJtYWwuaD4KIAogI2luY2x1ZGUgPGRybS9kcm1fYXRvbWljX2hlbHBlci5oPgor
I2luY2x1ZGUgPGRybS9kcm1fY29ubmVjdG9yLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9kYW1hZ2Vf
aGVscGVyLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9kcnYuaD4KICNpbmNsdWRlIDxkcm0vZHJtX2Zi
X2NtYV9oZWxwZXIuaD4KQEAgLTMwLDEwICszMSwxMSBAQAogI2luY2x1ZGUgPGRybS9kcm1fZm9y
bWF0X2hlbHBlci5oPgogI2luY2x1ZGUgPGRybS9kcm1fZ2VtX2NtYV9oZWxwZXIuaD4KICNpbmNs
dWRlIDxkcm0vZHJtX2dlbV9mcmFtZWJ1ZmZlcl9oZWxwZXIuaD4KKyNpbmNsdWRlIDxkcm0vZHJt
X21vZGVzLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9yZWN0Lmg+CiAjaW5jbHVkZSA8ZHJtL2RybV92
YmxhbmsuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX3Byb2JlX2hlbHBlci5oPgogI2luY2x1ZGUgPGRy
bS9kcm1fc2ltcGxlX2ttc19oZWxwZXIuaD4KLSNpbmNsdWRlIDxkcm0vdGlueWRybS90aW55ZHJt
LWhlbHBlcnMuaD4KIAogI2RlZmluZSBSRVBBUEVSX1JJRF9HMl9DT0dfSUQJMHgxMgogCkBAIC02
MCw2ICs2Miw4IEBAIGVudW0gcmVwYXBlcl9lcGRfYm9yZGVyX2J5dGUgewogc3RydWN0IHJlcGFw
ZXJfZXBkIHsKIAlzdHJ1Y3QgZHJtX2RldmljZSBkcm07CiAJc3RydWN0IGRybV9zaW1wbGVfZGlz
cGxheV9waXBlIHBpcGU7CisJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGU7CisJ
c3RydWN0IGRybV9jb25uZWN0b3IgY29ubmVjdG9yOwogCXN0cnVjdCBzcGlfZGV2aWNlICpzcGk7
CiAKIAlzdHJ1Y3QgZ3Bpb19kZXNjICpwYW5lbF9vbjsKQEAgLTg3Myw2ICs4NzcsMzkgQEAgc3Rh
dGljIGNvbnN0IHN0cnVjdCBkcm1fc2ltcGxlX2Rpc3BsYXlfcGlwZV9mdW5jcyByZXBhcGVyX3Bp
cGVfZnVuY3MgPSB7CiAJLnByZXBhcmVfZmIgPSBkcm1fZ2VtX2ZiX3NpbXBsZV9kaXNwbGF5X3Bp
cGVfcHJlcGFyZV9mYiwKIH07CiAKK3N0YXRpYyBpbnQgcmVwYXBlcl9jb25uZWN0b3JfZ2V0X21v
ZGVzKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCit7CisJc3RydWN0IHJlcGFwZXJf
ZXBkICplcGQgPSBkcm1fdG9fZXBkKGNvbm5lY3Rvci0+ZGV2KTsKKwlzdHJ1Y3QgZHJtX2Rpc3Bs
YXlfbW9kZSAqbW9kZTsKKworCW1vZGUgPSBkcm1fbW9kZV9kdXBsaWNhdGUoY29ubmVjdG9yLT5k
ZXYsIGVwZC0+bW9kZSk7CisJaWYgKCFtb2RlKSB7CisJCURSTV9FUlJPUigiRmFpbGVkIHRvIGR1
cGxpY2F0ZSBtb2RlXG4iKTsKKwkJcmV0dXJuIDA7CisJfQorCisJZHJtX21vZGVfc2V0X25hbWUo
bW9kZSk7CisJbW9kZS0+dHlwZSB8PSBEUk1fTU9ERV9UWVBFX1BSRUZFUlJFRDsKKwlkcm1fbW9k
ZV9wcm9iZWRfYWRkKGNvbm5lY3RvciwgbW9kZSk7CisKKwljb25uZWN0b3ItPmRpc3BsYXlfaW5m
by53aWR0aF9tbSA9IG1vZGUtPndpZHRoX21tOworCWNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLmhl
aWdodF9tbSA9IG1vZGUtPmhlaWdodF9tbTsKKworCXJldHVybiAxOworfQorCitzdGF0aWMgY29u
c3Qgc3RydWN0IGRybV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzIHJlcGFwZXJfY29ubmVjdG9yX2hm
dW5jcyA9IHsKKwkuZ2V0X21vZGVzID0gcmVwYXBlcl9jb25uZWN0b3JfZ2V0X21vZGVzLAorfTsK
Kworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIHJlcGFwZXJfY29ubmVj
dG9yX2Z1bmNzID0geworCS5yZXNldCA9IGRybV9hdG9taWNfaGVscGVyX2Nvbm5lY3Rvcl9yZXNl
dCwKKwkuZmlsbF9tb2RlcyA9IGRybV9oZWxwZXJfcHJvYmVfc2luZ2xlX2Nvbm5lY3Rvcl9tb2Rl
cywKKwkuZGVzdHJveSA9IGRybV9jb25uZWN0b3JfY2xlYW51cCwKKwkuYXRvbWljX2R1cGxpY2F0
ZV9zdGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX2Nvbm5lY3Rvcl9kdXBsaWNhdGVfc3RhdGUsCisJ
LmF0b21pY19kZXN0cm95X3N0YXRlID0gZHJtX2F0b21pY19oZWxwZXJfY29ubmVjdG9yX2Rlc3Ry
b3lfc3RhdGUsCit9OworCiBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9tb2RlX2NvbmZpZ19mdW5j
cyByZXBhcGVyX21vZGVfY29uZmlnX2Z1bmNzID0gewogCS5mYl9jcmVhdGUgPSBkcm1fZ2VtX2Zi
X2NyZWF0ZV93aXRoX2RpcnR5LAogCS5hdG9taWNfY2hlY2sgPSBkcm1fYXRvbWljX2hlbHBlcl9j
aGVjaywKQEAgLTEwOTUsNiArMTEzMiw3IEBAIHN0YXRpYyBpbnQgcmVwYXBlcl9wcm9iZShzdHJ1
Y3Qgc3BpX2RldmljZSAqc3BpKQogCQlyZXR1cm4gLUVOT0RFVjsKIAl9CiAKKwllcGQtPm1vZGUg
PSBtb2RlOwogCWVwZC0+d2lkdGggPSBtb2RlLT5oZGlzcGxheTsKIAllcGQtPmhlaWdodCA9IG1v
ZGUtPnZkaXNwbGF5OwogCWVwZC0+ZmFjdG9yZWRfc3RhZ2VfdGltZSA9IGVwZC0+c3RhZ2VfdGlt
ZTsKQEAgLTExMDksMTAgKzExNDcsMjAgQEAgc3RhdGljIGludCByZXBhcGVyX3Byb2JlKHN0cnVj
dCBzcGlfZGV2aWNlICpzcGkpCiAJaWYgKCFlcGQtPmN1cnJlbnRfZnJhbWUpCiAJCXJldHVybiAt
RU5PTUVNOwogCi0JcmV0ID0gdGlueWRybV9kaXNwbGF5X3BpcGVfaW5pdChkcm0sICZlcGQtPnBp
cGUsICZyZXBhcGVyX3BpcGVfZnVuY3MsCi0JCQkJCURSTV9NT0RFX0NPTk5FQ1RPUl9TUEksCi0J
CQkJCXJlcGFwZXJfZm9ybWF0cywKLQkJCQkJQVJSQVlfU0laRShyZXBhcGVyX2Zvcm1hdHMpLCBt
b2RlLCAwKTsKKwlkcm0tPm1vZGVfY29uZmlnLm1pbl93aWR0aCA9IG1vZGUtPmhkaXNwbGF5Owor
CWRybS0+bW9kZV9jb25maWcubWF4X3dpZHRoID0gbW9kZS0+aGRpc3BsYXk7CisJZHJtLT5tb2Rl
X2NvbmZpZy5taW5faGVpZ2h0ID0gbW9kZS0+dmRpc3BsYXk7CisJZHJtLT5tb2RlX2NvbmZpZy5t
YXhfaGVpZ2h0ID0gbW9kZS0+dmRpc3BsYXk7CisKKwlkcm1fY29ubmVjdG9yX2hlbHBlcl9hZGQo
JmVwZC0+Y29ubmVjdG9yLCAmcmVwYXBlcl9jb25uZWN0b3JfaGZ1bmNzKTsKKwlyZXQgPSBkcm1f
Y29ubmVjdG9yX2luaXQoZHJtLCAmZXBkLT5jb25uZWN0b3IsICZyZXBhcGVyX2Nvbm5lY3Rvcl9m
dW5jcywKKwkJCQkgRFJNX01PREVfQ09OTkVDVE9SX1NQSSk7CisJaWYgKHJldCkKKwkJcmV0dXJu
IHJldDsKKworCXJldCA9IGRybV9zaW1wbGVfZGlzcGxheV9waXBlX2luaXQoZHJtLCAmZXBkLT5w
aXBlLCAmcmVwYXBlcl9waXBlX2Z1bmNzLAorCQkJCQkgICByZXBhcGVyX2Zvcm1hdHMsIEFSUkFZ
X1NJWkUocmVwYXBlcl9mb3JtYXRzKSwKKwkJCQkJICAgTlVMTCwgJmVwZC0+Y29ubmVjdG9yKTsK
IAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJp
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
