Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id CC48E2F960
	for <lists+dri-devel@lfdr.de>; Thu, 30 May 2019 11:25:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D5FF86E146;
	Thu, 30 May 2019 09:25:09 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BBD7F6E13F;
 Thu, 30 May 2019 09:25:06 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 30 May 2019 02:25:06 -0700
Received: from jkrzyszt-desk.igk.intel.com ([172.22.244.18])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 30 May 2019 02:25:03 -0700
From: Janusz Krzysztofik <janusz.krzysztofik@linux.intel.com>
To: intel-gfx@lists.freedesktop.org
Subject: [RFC PATCH 1/1] drm/i915: Split off pci_driver.remove() tail to
 drm_driver.release()
Date: Thu, 30 May 2019 11:24:26 +0200
Message-Id: <20190530092426.23880-2-janusz.krzysztofik@linux.intel.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190530092426.23880-1-janusz.krzysztofik@linux.intel.com>
References: <20190530092426.23880-1-janusz.krzysztofik@linux.intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, Rodrigo Vivi <rodrigo.vivi@intel.com>,
 Janusz Krzysztofik <janusz.krzysztofik@linux.intel.com>,
 Michal Wajdeczko <michal.wajdeczko@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW4gb3JkZXIgdG8gc3VwcG9ydCBkcml2ZXIgaG90IHVuYmluZCwgc29tZSBjbGVhbnVwIG9wZXJh
dGlvbnMsIG5vdwpwZXJmb3JtZWQgb24gUENJIGRyaXZlciByZW1vdmUsIG11c3QgYmUgY2FsbGVk
IGxhdGVyLCBhZnRlciBhbGwgZGV2aWNlCmZpbGUgZGVzY3JpcHRvcnMgYXJlIGNsb3NlZC4KClNw
bGl0IG91dCB0aG9zZSBvcGVyYXRpb25zIGZyb20gdGhlIHRhaWwgb2YgcGNpX2RyaXZlci5yZW1v
dmUoKQpjYWxsYmFjayBhbmQgcHV0IHRoZW0gaW50byBkcm1fZHJpdmVyLnJlbGVhc2UoKSB3aGlj
aCBpcyBjYWxsZWQgYXMgc29vbgphcyBhbGwgcmVmZXJlbmNlcyB0byB0aGUgZHJpdmVyIGFyZSBw
dXQuICBBcyBhIHJlc3VsdCwgdGhvc2UgY2xlYW51cHMKd2lsbCBiZSBub3cgcnVuIG9uIGxhc3Qg
ZHJtX2Rldl9wdXQoKSwgZWl0aGVyIHN0aWxsIGNhbGxlZCBmcm9tCnBjaV9kcml2ZXIucmVtb3Zl
KCkgaWYgYWxsIGRldmljZSBmaWxlIGRlc2NyaXB0b3JzIGFyZSBhbHJlYWR5IGNsb3NlZCwKb3Ig
b24gbGFzdCBkcm1fcmVsZWFzZSgpIGZpbGUgb3BlcmF0aW9uLgoKU2lnbmVkLW9mZi1ieTogSmFu
dXN6IEtyenlzenRvZmlrIDxqYW51c3oua3J6eXN6dG9maWtAbGludXguaW50ZWwuY29tPgotLS0K
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMgfCAxNyArKysrKysrKysrKysrLS0tLQog
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaCB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9p
OTE1L2k5MTVfZ2VtLmMgfCAxMCArKysrKysrKystCiAzIGZpbGVzIGNoYW5nZWQsIDIzIGluc2Vy
dGlvbnMoKyksIDUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaTkxNV9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZHJ2LmMKaW5kZXggODNk
MmViOWU3NGNiLi44YmU2OWY4NGViNmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuYwpAQCAtNzM4
LDYgKzczOCw3IEBAIHN0YXRpYyBpbnQgaTkxNV9sb2FkX21vZGVzZXRfaW5pdChzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2KQogCiBjbGVhbnVwX2dlbToKIAlpOTE1X2dlbV9zdXNwZW5kKGRldl9wcml2
KTsKKwlpOTE1X2dlbV9maW5pX2h3KGRldl9wcml2KTsKIAlpOTE1X2dlbV9maW5pKGRldl9wcml2
KTsKIGNsZWFudXBfbW9kZXNldDoKIAlpbnRlbF9tb2Rlc2V0X2NsZWFudXAoZGV2KTsKQEAgLTE2
ODUsNyArMTY4Niw2IEBAIHN0YXRpYyB2b2lkIGk5MTVfZHJpdmVyX2NsZWFudXBfaHcoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCQlwY2lfZGlzYWJsZV9tc2kocGRldik7CiAK
IAlwbV9xb3NfcmVtb3ZlX3JlcXVlc3QoJmRldl9wcml2LT5wbV9xb3MpOwotCWk5MTVfZ2d0dF9j
bGVhbnVwX2h3KGRldl9wcml2KTsKIH0KIAogLyoqCkBAIC0xOTA5LDYgKzE5MDksNyBAQCBpbnQg
aTkxNV9kcml2ZXJfbG9hZChzdHJ1Y3QgcGNpX2RldiAqcGRldiwgY29uc3Qgc3RydWN0IHBjaV9k
ZXZpY2VfaWQgKmVudCkKIAogb3V0X2NsZWFudXBfaHc6CiAJaTkxNV9kcml2ZXJfY2xlYW51cF9o
dyhkZXZfcHJpdik7CisJaTkxNV9nZ3R0X2NsZWFudXBfaHcoZGV2X3ByaXYpOwogb3V0X2NsZWFu
dXBfbW1pbzoKIAlpOTE1X2RyaXZlcl9jbGVhbnVwX21taW8oZGV2X3ByaXYpOwogb3V0X3J1bnRp
bWVfcG1fcHV0OgpAQCAtMTk2MCwyMSArMTk2MSwyOSBAQCB2b2lkIGk5MTVfZHJpdmVyX3VubG9h
ZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCWNhbmNlbF9kZWxheWVkX3dvcmtfc3luYygmZGV2
X3ByaXYtPmdwdV9lcnJvci5oYW5nY2hlY2tfd29yayk7CiAJaTkxNV9yZXNldF9lcnJvcl9zdGF0
ZShkZXZfcHJpdik7CiAKLQlpOTE1X2dlbV9maW5pKGRldl9wcml2KTsKKwlpOTE1X2dlbV9maW5p
X2h3KGRldl9wcml2KTsKIAogCWludGVsX3Bvd2VyX2RvbWFpbnNfZmluaV9odyhkZXZfcHJpdik7
CiAKIAlpOTE1X2RyaXZlcl9jbGVhbnVwX2h3KGRldl9wcml2KTsKLQlpOTE1X2RyaXZlcl9jbGVh
bnVwX21taW8oZGV2X3ByaXYpOwogCiAJZW5hYmxlX3JwbV93YWtlcmVmX2Fzc2VydHMoZGV2X3By
aXYpOwotCWludGVsX3J1bnRpbWVfcG1fY2xlYW51cChkZXZfcHJpdik7CiB9CiAKIHN0YXRpYyB2
b2lkIGk5MTVfZHJpdmVyX3JlbGVhc2Uoc3RydWN0IGRybV9kZXZpY2UgKmRldikKIHsKIAlzdHJ1
Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYgPSB0b19pOTE1KGRldik7CiAKKwlkaXNhYmxl
X3JwbV93YWtlcmVmX2Fzc2VydHMoZGV2X3ByaXYpOworCisJaTkxNV9nZW1fZmluaShkZXZfcHJp
dik7CisKKwlpOTE1X2dndHRfY2xlYW51cF9odyhkZXZfcHJpdik7CisJaTkxNV9kcml2ZXJfY2xl
YW51cF9tbWlvKGRldl9wcml2KTsKKworCWVuYWJsZV9ycG1fd2FrZXJlZl9hc3NlcnRzKGRldl9w
cml2KTsKKwlpbnRlbF9ydW50aW1lX3BtX2NsZWFudXAoZGV2X3ByaXYpOworCiAJaTkxNV9kcml2
ZXJfY2xlYW51cF9lYXJseShkZXZfcHJpdik7CiAJaTkxNV9kcml2ZXJfZGVzdHJveShkZXZfcHJp
dik7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAppbmRleCBhMjY2NGVhMTM5NWIuLmQwOGU3YmQ4
MzU0NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9kcnYuaAorKysgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2Rydi5oCkBAIC0zMDQ3LDYgKzMwNDcsNyBAQCB2b2lk
IGk5MTVfZ2VtX2luaXRfbW1pbyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSk7CiBpbnQg
X19tdXN0X2NoZWNrIGk5MTVfZ2VtX2luaXQoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2KTsKIGludCBfX211c3RfY2hlY2sgaTkxNV9nZW1faW5pdF9odyhzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYpOwogdm9pZCBpOTE1X2dlbV9pbml0X3N3aXp6bGluZyhzdHJ1Y3Qg
ZHJtX2k5MTVfcHJpdmF0ZSAqZGV2X3ByaXYpOwordm9pZCBpOTE1X2dlbV9maW5pX2h3KHN0cnVj
dCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdik7CiB2b2lkIGk5MTVfZ2VtX2Zpbmkoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KTsKIGludCBpOTE1X2dlbV93YWl0X2Zvcl9pZGxl
KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdiwKIAkJCSAgIHVuc2lnbmVkIGludCBm
bGFncywgbG9uZyB0aW1lb3V0KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5
MTVfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbS5jCmluZGV4IDdjYWZkNTYx
MmY3MS4uYzZhOGU2NjVhNmJhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2dlbS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtLmMKQEAgLTQ2NjcsNyAr
NDY2Nyw3IEBAIGludCBpOTE1X2dlbV9pbml0KHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZf
cHJpdikKIAlyZXR1cm4gcmV0OwogfQogCi12b2lkIGk5MTVfZ2VtX2Zpbmkoc3RydWN0IGRybV9p
OTE1X3ByaXZhdGUgKmRldl9wcml2KQordm9pZCBpOTE1X2dlbV9maW5pX2h3KHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdikKIHsKIAlHRU1fQlVHX09OKGRldl9wcml2LT5ndC5hd2Fr
ZSk7CiAKQEAgLTQ2ODEsNiArNDY4MSwxNCBAQCB2b2lkIGk5MTVfZ2VtX2Zpbmkoc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCWludGVsX3VjX2ZpbmlfaHcoZGV2X3ByaXYpOwog
CWludGVsX3VjX2ZpbmkoZGV2X3ByaXYpOwogCWludGVsX2VuZ2luZXNfY2xlYW51cChkZXZfcHJp
dik7CisJbXV0ZXhfdW5sb2NrKCZkZXZfcHJpdi0+ZHJtLnN0cnVjdF9tdXRleCk7CisKKwlpOTE1
X2dlbV9kcmFpbl9mcmVlZF9vYmplY3RzKGRldl9wcml2KTsKK30KKwordm9pZCBpOTE1X2dlbV9m
aW5pKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICpkZXZfcHJpdikKK3sKKwltdXRleF9sb2NrKCZk
ZXZfcHJpdi0+ZHJtLnN0cnVjdF9tdXRleCk7CiAJaTkxNV9nZW1fY29udGV4dHNfZmluaShkZXZf
cHJpdik7CiAJaTkxNV9nZW1fZmluaV9zY3JhdGNoKGRldl9wcml2KTsKIAltdXRleF91bmxvY2so
JmRldl9wcml2LT5kcm0uc3RydWN0X211dGV4KTsKLS0gCjIuMjEuMAoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApk
cmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Au
b3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
