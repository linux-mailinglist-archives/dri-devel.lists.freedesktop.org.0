Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A5AA0B093F
	for <lists+dri-devel@lfdr.de>; Thu, 12 Sep 2019 09:08:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 061E56EBCF;
	Thu, 12 Sep 2019 07:08:20 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x444.google.com (mail-pf1-x444.google.com
 [IPv6:2607:f8b0:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C4BE76E029
 for <dri-devel@lists.freedesktop.org>; Thu, 12 Sep 2019 01:37:50 +0000 (UTC)
Received: by mail-pf1-x444.google.com with SMTP id w22so14847145pfi.9
 for <dri-devel@lists.freedesktop.org>; Wed, 11 Sep 2019 18:37:50 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=siipf1v3852dWtMuytedfnxVi1XqGZ5MsmwHOGro6Rg=;
 b=VwXUrMG+/Xdjx1N1zwAthJTVwrSmnk1KrdUEs1vGzF/B6baInObbKpslPLM6lW28U5
 tMTmkV4PYQA+kmtKzpLJqByr3/CtyxPBv75OtFJo65iymAxHG9RooAF64c3aWrJAONIJ
 kM9sg+hLiyrGo4Bg095vCXjegwfGk0PWSSMNVnbrsP1SCAhrCEqbX55DW6tpzyITsmHC
 YcActPs7DASt2+u4zw3T0MEgDsFJCcBWVRjOrhcCCSzf6S+TX+j9X0d0m6n0ssQbDEUC
 ONMUGE5tLhOysvKw5y2VDdPouxjjUPlVKDNXjE0+mgmODr6BF4iOLa/4ZgnMUfVtcl++
 gtrw==
X-Gm-Message-State: APjAAAUHnekyiUpuZw4L8pyUv5HcSLDOx9+L3n2XqiuxohDb8DJYrMt6
 7S/CM+NBhtQVvfJ1lZzbTO5QIVxo3+k=
X-Google-Smtp-Source: APXvYqy/q5HOo7EK3aX8ACvaqo+KRyKZLa5JcLn5VzyI+ttFT8veprxW6q53Gy7NTnDabEMwjrvbsg==
X-Received: by 2002:a17:90a:890c:: with SMTP id
 u12mr8851335pjn.117.1568252269944; 
 Wed, 11 Sep 2019 18:37:49 -0700 (PDT)
Received: from localhost.lan (c-67-185-54-80.hsd1.wa.comcast.net.
 [67.185.54.80])
 by smtp.gmail.com with ESMTPSA id f22sm8682967pgb.4.2019.09.11.18.37.48
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 11 Sep 2019 18:37:48 -0700 (PDT)
From: Andrey Smirnov <andrew.smirnov@gmail.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 2/2] drm/bridge: tc358767: Expose test mode functionality
 via debugfs
Date: Wed, 11 Sep 2019 18:37:40 -0700
Message-Id: <20190912013740.5638-3-andrew.smirnov@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190912013740.5638-1-andrew.smirnov@gmail.com>
References: <20190912013740.5638-1-andrew.smirnov@gmail.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Thu, 12 Sep 2019 07:07:54 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=siipf1v3852dWtMuytedfnxVi1XqGZ5MsmwHOGro6Rg=;
 b=PGDK2lAz1EkK4r8CnMWME1r0GG+/Pf3jXQasDu9bhHphClrxq6JJppw8WqBgxytUCi
 SjgmpJdQ15HL0P1VghgJdOkPUU345XtyBYB/2C99dIVKz1sMDek4c/9UTQ9uiaGewDcT
 kd+sE0rTwIthqI9VRdQpU9fPboSTiPjxVlIu9Q33gKridG9nuTuFQIvBbr3AEXhaUgvw
 EU4gbXB8fAWT4NvHBoMVcWLUnoW4Xd+/ZpGciNo7VZbQo5AfgCUZPYv4il45wgTQPCzh
 6xu8uag7fQpIIz6NYU5ArPnnzpKRPLuXvAgP+M91CiFWxCSg/YaNUqQ9PyYpyIwiGGcA
 Z62w==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Cory Tusar <cory.tusar@zii.aero>, Andrey Smirnov <andrew.smirnov@gmail.com>,
 linux-kernel@vger.kernel.org, Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Chris Healy <cphealy@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UHJlc2VudGx5LCB0aGUgZHJpdmVyIGNvZGUgYXJ0aWZpY2lhbGx5IGxpbWl0cyB0ZXN0IHBhdHRl
cm4gbW9kZSB0byBhCnNpbmdsZSBwYXR0ZXJuIHdpdGggZml4ZWQgY29sb3Igc2VsZWN0aW9uLiBJ
dCBiZWluZyBhIGtlcm5lbCBtb2R1bGUKcGFyYW1ldGVyIG1ha2VzIHN3aXRjaGluZyAidGVzdCBw
YXR0ZXJuIiA8LT4gInByb3BlciBvdXRwdXQiIG1vZGVzCm9uLXRoZS1mbHkgY2x1bmt5IGFuZCBv
dXRyaWdodCBpbXBvc3NpYmxlIGlmIHRoZSBkcml2ZXIgaXMgYnVpbHQgaW50bwp0aGUga2VybmVs
LgoKVG8gaW1wcm92ZSB0aGUgc2l0dWF0aW9uIGEgYml0LCBjb252ZXJ0IGN1cnJlbnQgdGVzdCBw
YXR0ZXJuIGNvZGUgdG8KdXNlIGRlYnVnZnMgaW5zdGVhZCBieSBleHBvc2luZyAiVGVzdEN0bCIg
cmVnaXN0ZXIuIFRoaXMgd2F5IG9sZAoidGNfdGVzdF9wYXR0ZXJuPTEiIGZ1bmN0aW9uYWxpdHkg
Y2FuIGJlIGVtdWxhdGVkIHZpYToKCiAgICBlY2hvIC1uIDB4NzgxNDYzMDIgPiB0c3RjdGwKCmFu
ZCBzd2l0Y2ggYmFjayB0byByZWd1bGFyIG1vZGUgY2FuIGJlIGRvbmUgd2l0aDoKCiAgICBlY2hv
IC1uIDB4NzgxNDYzMDAgPiB0c3RjdGwKCk5vdGUgdGhhdCBzd2l0Y2hpbmcgdG8gYW55IG9mIHRo
ZSB0ZXN0IHBhdHRlcm5zLCB3aWxsIE5PVCB0cmlnZ2VyIGxpbmsKcmUtZXN0YWJsaXNobWVudCB3
aGVyZWFzIHN3aXRjaGluZyB0byBub3JtYWwgb3BlcmF0aW9uIFdJTEwuIFRoaXMgaXMKZG9uZSBz
bzoKCmEpIHdlIGNhbiBpc29sYXRlIGFuZCB2ZXJpZnkgKGUpRFAgbGluayBmdW5jdGlvbmFsaXR5
IGJ5IHN3aXRjaGluZyB0bwogICBvbmUgb2YgdGhlIHRlc3QgcGF0dGVycwoKYikgdHJpZ2dlciBh
IGxpbmsgcmUtZXN0YWJsaXNobWVudCBieSBzd2l0Y2hpbmcgYmFjayB0byBub3JtYWwgbW9kZQoK
U2lnbmVkLW9mZi1ieTogQW5kcmV5IFNtaXJub3YgPGFuZHJldy5zbWlybm92QGdtYWlsLmNvbT4K
Q2M6IEFuZHJ6ZWogSGFqZGEgPGEuaGFqZGFAc2Ftc3VuZy5jb20+CkNjOiBMYXVyZW50IFBpbmNo
YXJ0IDxMYXVyZW50LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+CkNjOiBUb21pIFZhbGtlaW5l
biA8dG9taS52YWxrZWluZW5AdGkuY29tPgpDYzogQ29yeSBUdXNhciA8Y29yeS50dXNhckB6aWku
YWVybz4KQ2M6IENocmlzIEhlYWx5IDxjcGhlYWx5QGdtYWlsLmNvbT4KQ2M6IEx1Y2FzIFN0YWNo
IDxsLnN0YWNoQHBlbmd1dHJvbml4LmRlPgpDYzogZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpDYzogbGludXgta2VybmVsQHZnZXIua2VybmVsLm9yZwotLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9icmlkZ2UvdGMzNTg3NjcuYyB8IDE1MiArKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0K
IDEgZmlsZSBjaGFuZ2VkLCAxMjUgaW5zZXJ0aW9ucygrKSwgMjcgZGVsZXRpb25zKC0pCgpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS90YzM1ODc2Ny5jIGIvZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS90YzM1ODc2Ny5jCmluZGV4IDg1MzIwNDhlMDU1MC4uZGZhYzBjZTE2NjM2IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY3LmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2JyaWRnZS90YzM1ODc2Ny5jCkBAIC0xNyw2ICsxNyw3IEBACiAKICNpbmNsdWRl
IDxsaW51eC9iaXRmaWVsZC5oPgogI2luY2x1ZGUgPGxpbnV4L2Nsay5oPgorI2luY2x1ZGUgPGxp
bnV4L2RlYnVnZnMuaD4KICNpbmNsdWRlIDxsaW51eC9kZXZpY2UuaD4KICNpbmNsdWRlIDxsaW51
eC9ncGlvL2NvbnN1bWVyLmg+CiAjaW5jbHVkZSA8bGludXgvaTJjLmg+CkBAIC0yMjIsMTEgKzIy
MywxMCBAQAogI2RlZmluZSBDT0xPUl9CCQkJR0VOTUFTSygxNSwgOCkKICNkZWZpbmUgRU5JMkNG
SUxURVIJCUJJVCg0KQogI2RlZmluZSBDT0xPUl9CQVJfTU9ERQkJR0VOTUFTSygxLCAwKQorI2Rl
ZmluZSBDT0xPUl9CQVJfTU9ERV9OT1JNQUwJMAogI2RlZmluZSBDT0xPUl9CQVJfTU9ERV9CQVJT
CTIKLSNkZWZpbmUgUExMX0RCRwkJCTB4MGEwNAogCi1zdGF0aWMgYm9vbCB0Y190ZXN0X3BhdHRl
cm47Ci1tb2R1bGVfcGFyYW1fbmFtZWQodGVzdCwgdGNfdGVzdF9wYXR0ZXJuLCBib29sLCAwNjQ0
KTsKKyNkZWZpbmUgUExMX0RCRwkJCTB4MGEwNAogCiBzdHJ1Y3QgdGNfZWRwX2xpbmsgewogCXN0
cnVjdCBkcm1fZHBfbGluawliYXNlOwpAQCAtMjY1LDYgKzI2NSw5IEBAIHN0cnVjdCB0Y19kYXRh
IHsKIAkvKiBIUEQgcGluIG51bWJlciAoMCBvciAxKSBvciAtRU5PREVWICovCiAJaW50CQkJaHBk
X3BpbjsKIAorCXN0cnVjdCBtdXRleAkJdHN0Y3RsX2xvY2s7CisJYm9vbAkJCWVuYWJsZWQ7CisK
IAlzdHJ1Y3QgcmVndWxhdG9yCSp2ZGNjOwogfTsKIApAQCAtNzg5LDE2ICs3OTIsNiBAQCBzdGF0
aWMgaW50IHRjX3NldF92aWRlb19tb2RlKHN0cnVjdCB0Y19kYXRhICp0YywKIAlpZiAocmV0KQog
CQlyZXR1cm4gcmV0OwogCi0JLyogVGVzdCBwYXR0ZXJuIHNldHRpbmdzICovCi0JcmV0ID0gcmVn
bWFwX3dyaXRlKHRjLT5yZWdtYXAsIFRTVENUTCwKLQkJCSAgIEZJRUxEX1BSRVAoQ09MT1JfUiwg
MTIwKSB8Ci0JCQkgICBGSUVMRF9QUkVQKENPTE9SX0csIDIwKSB8Ci0JCQkgICBGSUVMRF9QUkVQ
KENPTE9SX0IsIDk5KSB8Ci0JCQkgICBFTkkyQ0ZJTFRFUiB8Ci0JCQkgICBGSUVMRF9QUkVQKENP
TE9SX0JBUl9NT0RFLCBDT0xPUl9CQVJfTU9ERV9CQVJTKSk7Ci0JaWYgKHJldCkKLQkJcmV0dXJu
IHJldDsKLQogCS8qIERQIE1haW4gU3RyZWFtIEF0dHJpYnV0ZXMgKi8KIAl2aWRfc3luY19kbHkg
PSBoc3luY19sZW4gKyBsZWZ0X21hcmdpbiArIG1vZGUtPmhkaXNwbGF5OwogCXJldCA9IHJlZ21h
cF93cml0ZSh0Yy0+cmVnbWFwLCBEUDBfVklEU1lOQ0RFTEFZLApAQCAtMTE1MCwxNCArMTE0Myw2
IEBAIHN0YXRpYyBpbnQgdGNfc3RyZWFtX2VuYWJsZShzdHJ1Y3QgdGNfZGF0YSAqdGMpCiAKIAlk
ZXZfZGJnKHRjLT5kZXYsICJlbmFibGUgdmlkZW8gc3RyZWFtXG4iKTsKIAotCS8qIFBYTCBQTEwg
c2V0dXAgKi8KLQlpZiAodGNfdGVzdF9wYXR0ZXJuKSB7Ci0JCXJldCA9IHRjX3B4bF9wbGxfZW4o
dGMsIGNsa19nZXRfcmF0ZSh0Yy0+cmVmY2xrKSwKLQkJCQkgICAgMTAwMCAqIHRjLT5tb2RlLmNs
b2NrKTsKLQkJaWYgKHJldCkKLQkJCXJldHVybiByZXQ7Ci0JfQotCiAJcmV0ID0gdGNfc2V0X3Zp
ZGVvX21vZGUodGMsICZ0Yy0+bW9kZSk7CiAJaWYgKHJldCkKIAkJcmV0dXJuIHJldDsKQEAgLTEx
ODYsMTIgKzExNzEsOCBAQCBzdGF0aWMgaW50IHRjX3N0cmVhbV9lbmFibGUoc3RydWN0IHRjX2Rh
dGEgKnRjKQogCWlmIChyZXQpCiAJCXJldHVybiByZXQ7CiAJLyogU2V0IGlucHV0IGludGVyZmFj
ZSAqLwotCXZhbHVlID0gRFAwX0FVRFNSQ19OT19JTlBVVDsKLQlpZiAodGNfdGVzdF9wYXR0ZXJu
KQotCQl2YWx1ZSB8PSBEUDBfVklEU1JDX0NPTE9SX0JBUjsKLQllbHNlCi0JCXZhbHVlIHw9IERQ
MF9WSURTUkNfRFBJX1JYOwotCXJldCA9IHJlZ21hcF93cml0ZSh0Yy0+cmVnbWFwLCBTWVNDVFJM
LCB2YWx1ZSk7CisJcmV0ID0gcmVnbWFwX3dyaXRlKHRjLT5yZWdtYXAsIFNZU0NUUkwsCisJCQkg
ICBEUDBfQVVEU1JDX05PX0lOUFVUIHwgRFAwX1ZJRFNSQ19EUElfUlgpOwogCWlmIChyZXQpCiAJ
CXJldHVybiByZXQ7CiAKQEAgLTEyNTAsOCArMTIzMSwxMyBAQCBzdGF0aWMgdm9pZCB0Y19icmlk
Z2VfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCiB7CiAJc3RydWN0IHRjX2RhdGEg
KnRjID0gYnJpZGdlX3RvX3RjKGJyaWRnZSk7CiAKKwltdXRleF9sb2NrKCZ0Yy0+dHN0Y3RsX2xv
Y2spOworCiAJaWYgKCFfX3RjX2JyaWRnZV9lbmFibGUodGMpKQogCQlkcm1fcGFuZWxfZW5hYmxl
KHRjLT5wYW5lbCk7CisKKwl0Yy0+ZW5hYmxlZCA9IHRydWU7CisJbXV0ZXhfdW5sb2NrKCZ0Yy0+
dHN0Y3RsX2xvY2spOwogfQogCiBzdGF0aWMgaW50IF9fdGNfYnJpZGdlX2Rpc2FibGUoc3RydWN0
IHRjX2RhdGEgKnRjKQpAQCAtMTI3Myw4ICsxMjU5LDEzIEBAIHN0YXRpYyB2b2lkIHRjX2JyaWRn
ZV9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCiB7CiAJc3RydWN0IHRjX2RhdGEg
KnRjID0gYnJpZGdlX3RvX3RjKGJyaWRnZSk7CiAKKwltdXRleF9sb2NrKCZ0Yy0+dHN0Y3RsX2xv
Y2spOworCiAJZHJtX3BhbmVsX2Rpc2FibGUodGMtPnBhbmVsKTsKIAlfX3RjX2JyaWRnZV9kaXNh
YmxlKHRjKTsKKworCXRjLT5lbmFibGVkID0gZmFsc2U7CisJbXV0ZXhfdW5sb2NrKCZ0Yy0+dHN0
Y3RsX2xvY2spOwogfQogCiBzdGF0aWMgdm9pZCB0Y19icmlkZ2VfcG9zdF9kaXNhYmxlKHN0cnVj
dCBkcm1fYnJpZGdlICpicmlkZ2UpCkBAIC0xMzg2LDYgKzEzNzcsOTkgQEAgc3RhdGljIGVudW0g
ZHJtX2Nvbm5lY3Rvcl9zdGF0dXMgdGNfY29ubmVjdG9yX2RldGVjdChzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubmUKIAkJcmV0dXJuIGNvbm5lY3Rvcl9zdGF0dXNfZGlzY29ubmVjdGVkOwogfQog
CitzdGF0aWMgaW50IHRjX3RzdGN0bF9zZXQodm9pZCAqZGF0YSwgdTY0IHZhbCkKK3sKKwlzdHJ1
Y3QgdGNfZGF0YSAqdGMgPSBkYXRhOworCWludCByZXQ7CisKKwltdXRleF9sb2NrKCZ0Yy0+dHN0
Y3RsX2xvY2spOworCisJaWYgKCF0Yy0+ZW5hYmxlZCkgeworCQlkZXZfZXJyKHRjLT5kZXYsICJi
cmlkZ2UgbmVlZHMgdG8gYmUgZW5hYmxlZCBmaXJzdFxuIik7CisJCXJldCA9IC1FQlVTWTsKKwkJ
Z290byB1bmxvY2s7CisJfQorCisJaWYgKEZJRUxEX0dFVChDT0xPUl9CQVJfTU9ERSwgdmFsKSA9
PSBDT0xPUl9CQVJfTU9ERV9OT1JNQUwpIHsKKwkJcmV0ID0gcmVnbWFwX3dyaXRlKHRjLT5yZWdt
YXAsIFNZU0NUUkwsIERQMF9WSURTUkNfRFBJX1JYKTsKKwkJaWYgKHJldCkgeworCQkJZGV2X2Vy
cih0Yy0+ZGV2LAorCQkJCSJmYWlsZWQgdG8gc2VsZWN0IGRwaSB2aWRlbyBzdHJlYW1cbiIpOwor
CQkJZ290byB1bmxvY2s7CisJCX0KKworCQlyZXQgPSByZWdtYXBfd3JpdGUodGMtPnJlZ21hcCwg
VFNUQ1RMLCB2YWwgfCBFTkkyQ0ZJTFRFUik7CisJCWlmIChyZXQpIHsKKwkJCWRldl9lcnIodGMt
PmRldiwgImZhaWxlZCB0byBzZXQgVFNUQ1RMXG4iKTsKKwkJCWdvdG8gdW5sb2NrOworCQl9CisK
KwkJcmV0ID0gdGNfcHhsX3BsbF9kaXModGMpOworCQlpZiAocmV0KSB7CisJCQlkZXZfZXJyKHRj
LT5kZXYsICJmYWlsZWQgdG8gZGlzYWJsZSBQTExcbiIpOworCQkJZ290byB1bmxvY2s7CisJCX0K
KworCQkvKgorCQkgKiBSZS1lc3RhYmxpc2ggRFAgbGluaworCQkgKi8KKwkJcmV0ID0gX190Y19i
cmlkZ2VfZGlzYWJsZSh0Yyk7CisJCWlmIChyZXQpCisJCQlnb3RvIHVubG9jazsKKworCQlyZXQg
PSBfX3RjX2JyaWRnZV9lbmFibGUodGMpOworCQlpZiAocmV0KQorCQkJZ290byB1bmxvY2s7CisJ
fSBlbHNlIHsKKwkJcmV0ID0gdGNfcHhsX3BsbF9lbih0YywgY2xrX2dldF9yYXRlKHRjLT5yZWZj
bGspLAorCQkJCSAgICAxMDAwICogdGMtPm1vZGUuY2xvY2spOworCQlpZiAocmV0KSB7CisJCQlk
ZXZfZXJyKHRjLT5kZXYsICJmYWlsZWQgdG8gZW5hYmxlIFBMTFxuIik7CisJCQlnb3RvIHVubG9j
azsKKwkJfQorCisJCXJldCA9IHJlZ21hcF93cml0ZSh0Yy0+cmVnbWFwLCBUU1RDVEwsIHZhbCB8
IEVOSTJDRklMVEVSKTsKKwkJaWYgKHJldCkgeworCQkJZGV2X2Vycih0Yy0+ZGV2LCAiZmFpbGVk
IHRvIHNldCBUU1RDVExcbiIpOworCQkJZ290byB1bmxvY2s7CisJCX0KKworCQlyZXQgPSByZWdt
YXBfd3JpdGUodGMtPnJlZ21hcCwgU1lTQ1RSTCwgRFAwX1ZJRFNSQ19DT0xPUl9CQVIpOworCQlp
ZiAocmV0KSB7CisJCQlkZXZfZXJyKHRjLT5kZXYsICJmYWlsZWQgdG8gc2V0IFNZU0NUUkxcbiIp
OworCQkJZ290byB1bmxvY2s7CisJCX0KKwl9CisKK3VubG9jazoKKwltdXRleF91bmxvY2soJnRj
LT50c3RjdGxfbG9jayk7CisJcmV0dXJuIHJldDsKK30KKy8qCisgKiAidHN0Y3RsIiBhdHRyaWJ1
dGUgaGFzIHRoZSBmb2xsb3dpbmcgZm9ybWF0OgorICoKKyAqICAgICBSUl9HR19CQl8wX1AKKyAq
CisgKiAiUlIiIGlzIHJlZCwgIkdHIiBpcyBncmVlbiBhbmQgIkJCIiBpcyBibHVlIGNvbG9yIGNv
bXBvbmVudHMgKGJ5dGUKKyAqIGVhY2gpIHVzZWQgZm9yIHZhcmlvdXMgdGVzdCBwYXR0ZXJucyBj
b250cm9sbGVkIGJ5IHRoaXMgcmVnaXN0ZXIuCisgKgorICogIlAiIHJlcHJlc2VudHMgdGVzdCBw
YXR0ZXJuIG9mIHRoZSBicmlkZ2UuIFZhbGlkIHZhbHVlcyBhcmU6CisgKgorICogICAgIjAiIC0g
bm9ybWFsIG9wZXJhdGlvbgorICogICAgIjEiIC0gc29saWQgY29sb3IgdGVzdCBwYXR0ZXJuCisg
KiAgICAiMiIgLSBjb2xvciBiYXIgdGVzdCBwYXR0ZXJuCisgKiAgICAiMyIgLSAiY2hlY2tlcnMi
IHRlc3QgcGF0dGVybgorICoKKyAqIFRoaXMgd2F5IG9sZCAidGNfdGVzdF9wYXR0ZXJuPTEiIGZ1
bmN0aW9uYWxpdHkgY2FuIGJlIGVtdWxhdGVkIHZpYToKKyAqCisgKiAgICAgZWNobyAtbiAweDc4
MTQ2MzAyID4gdHN0Y3RsCisgKgorICogYW5kIHN3aXRjaCBiYWNrIHRvIHJlZ3VsYXIgbW9kZSBj
YW4gYmUgZG9uZSB3aXRoOgorICoKKyAqICAgICBlY2hvIC1uIDAgPiB0c3RjdGwKKyAqLworREVG
SU5FX1NJTVBMRV9BVFRSSUJVVEUodGNfdHN0Y3RsX2ZvcHMsIE5VTEwsIHRjX3RzdGN0bF9zZXQs
ICIlbGx1XG4iKTsKKwogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIHRj
X2Nvbm5lY3Rvcl9mdW5jcyA9IHsKIAkuZGV0ZWN0ID0gdGNfY29ubmVjdG9yX2RldGVjdCwKIAku
ZmlsbF9tb2RlcyA9IGRybV9oZWxwZXJfcHJvYmVfc2luZ2xlX2Nvbm5lY3Rvcl9tb2RlcywKQEAg
LTE1MjgsOSArMTYxMiwxNSBAQCBzdGF0aWMgaXJxcmV0dXJuX3QgdGNfaXJxX2hhbmRsZXIoaW50
IGlycSwgdm9pZCAqYXJnKQogCXJldHVybiBJUlFfSEFORExFRDsKIH0KIAorc3RhdGljIHZvaWQg
dGNfcmVtb3ZlX2RlYnVnZnModm9pZCAqZGF0YSkKK3sKKwlkZWJ1Z2ZzX3JlbW92ZV9yZWN1cnNp
dmUoZGF0YSk7Cit9CisKIHN0YXRpYyBpbnQgdGNfcHJvYmUoc3RydWN0IGkyY19jbGllbnQgKmNs
aWVudCwgY29uc3Qgc3RydWN0IGkyY19kZXZpY2VfaWQgKmlkKQogewogCXN0cnVjdCBkZXZpY2Ug
KmRldiA9ICZjbGllbnQtPmRldjsKKwlzdHJ1Y3QgZGVudHJ5ICpkZWJ1Z2ZzOwogCXN0cnVjdCB0
Y19kYXRhICp0YzsKIAlpbnQgcmV0OwogCkBAIC0xNTM5LDYgKzE2MjksNyBAQCBzdGF0aWMgaW50
IHRjX3Byb2JlKHN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQsIGNvbnN0IHN0cnVjdCBpMmNfZGV2
aWNlX2lkICppZCkKIAkJcmV0dXJuIC1FTk9NRU07CiAKIAl0Yy0+ZGV2ID0gZGV2OworCW11dGV4
X2luaXQoJnRjLT50c3RjdGxfbG9jayk7CiAKIAkvKiBwb3J0QDIgaXMgdGhlIG91dHB1dCBwb3J0
ICovCiAJcmV0ID0gZHJtX29mX2ZpbmRfcGFuZWxfb3JfYnJpZGdlKGRldi0+b2Zfbm9kZSwgMiwg
MCwgJnRjLT5wYW5lbCwgTlVMTCk7CkBAIC0xNjkwLDYgKzE3ODEsMTMgQEAgc3RhdGljIGludCB0
Y19wcm9iZShzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50LCBjb25zdCBzdHJ1Y3QgaTJjX2Rldmlj
ZV9pZCAqaWQpCiAKIAlpMmNfc2V0X2NsaWVudGRhdGEoY2xpZW50LCB0Yyk7CiAKKwlkZWJ1Z2Zz
ID0gZGVidWdmc19jcmVhdGVfZGlyKGRldl9uYW1lKGRldiksIE5VTEwpOworCWlmICghSVNfRVJS
KGRlYnVnZnMpKSB7CisJCWRlYnVnZnNfY3JlYXRlX2ZpbGVfdW5zYWZlKCJ0c3RjdGwiLCAwMjAw
LCBkZWJ1Z2ZzLCB0YywKKwkJCQkJICAgJnRjX3RzdGN0bF9mb3BzKTsKKwkJZGV2bV9hZGRfYWN0
aW9uX29yX3Jlc2V0KGRldiwgdGNfcmVtb3ZlX2RlYnVnZnMsIGRlYnVnZnMpOworCX0KKwogCXJl
dHVybiAwOwogfQogCi0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2RyaS1kZXZlbA==
