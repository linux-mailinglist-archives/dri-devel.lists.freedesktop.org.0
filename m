Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C32C7578BF4
	for <lists+dri-devel@lfdr.de>; Mon, 18 Jul 2022 22:41:00 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2288110EC5D;
	Mon, 18 Jul 2022 20:40:38 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DC28710E531;
 Mon, 18 Jul 2022 20:40:35 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=intel.com; i=@intel.com; q=dns/txt; s=Intel;
 t=1658176835; x=1689712835;
 h=date:message-id:from:to:cc:subject:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=AjNGErAgTg7V59eiDywArl63j9Y9sS9xKCP/g+OHbSo=;
 b=IGEu2G2SEtn/l1Lax6rFjDf+PlJq6nTSyLQWsd1bxyG7UKSlkeaEzZoA
 UejnKoqBZDU4GlnLRqJrCkCtG13cUCRkeFbAlYl+gBJ+9oPAtbl+3OSmC
 HDW24IcydC2mm0XfxTHyVhnq/3819bU4LfB86pSOL/U23ZSzv+jIfKYSt
 AaSl4Udpl8gE/W7iQs6zJtDYJWV2sByOO14cJadIKtVJv2M9QIOL2QJzB
 e+kG1ekCqEQQFRHfeh+q6CxI0vkDd0AvMr5n/MntwPafgXA9DJIwRNP85
 6zxunyEfGLg3ZthSoW+5Ynuyfs07Rjphxclct56jh9WYxCdgQ6SmccruX Q==;
X-IronPort-AV: E=McAfee;i="6400,9594,10412"; a="287058831"
X-IronPort-AV: E=Sophos;i="5.92,282,1650956400"; d="scan'208";a="287058831"
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by orsmga102.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 18 Jul 2022 13:40:35 -0700
X-IronPort-AV: E=Sophos;i="5.92,282,1650956400"; d="scan'208";a="655444317"
Received: from adixit-mobl.amr.corp.intel.com (HELO adixit-arch.intel.com)
 ([10.255.229.53])
 by fmsmga008-auth.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 18 Jul 2022 13:40:34 -0700
Date: Mon, 18 Jul 2022 13:40:34 -0700
Message-ID: <87zgh6b1dp.wl-ashutosh.dixit@intel.com>
From: "Dixit, Ashutosh" <ashutosh.dixit@intel.com>
To: Christian =?ISO-8859-1?Q?K=F6nig?= <christian.koenig@amd.com>
Subject: Re: [PATCH] Revert "drm/amdgpu: add drm buddy support to amdgpu"
In-Reply-To: <076231a3-38e9-e013-e106-aa926d009e77@amd.com>
References: <20220708102124.493372-1-Arunpravin.PaneerSelvam@amd.com>
 <20220714145423.721e1c3b@maurocar-mobl2>
 <83d9f973-abdd-3d8b-5955-84cfc3f49eea@amd.com>
 <CADnq5_MNkeG4E9ZXRLpgFQxrDN9jDhk7KYYHbjvtY-cUt5Kk8A@mail.gmail.com>
 <076231a3-38e9-e013-e106-aa926d009e77@amd.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?ISO-8859-4?Q?Goj=F2?=) APEL-LB/10.8 EasyPG/1.0.0
 Emacs/28.1 (x86_64-pc-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Mauro Carvalho Chehab <mauro.chehab@linux.intel.com>,
 Arunpravin Paneer Selvam <Arunpravin.PaneerSelvam@amd.com>,
 amd-gfx list <amd-gfx@lists.freedesktop.org>, "Deucher,
 Alexander" <alexander.deucher@amd.com>,
 Maling list - DRI developers <dri-devel@lists.freedesktop.org>
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

On Thu, 14 Jul 2022 08:00:32 -0700, Christian K=C3=B6nig wrote:
>
> Am 14.07.22 um 15:33 schrieb Alex Deucher:
> > On Thu, Jul 14, 2022 at 9:09 AM Christian K=C3=B6nig
> > <christian.koenig@amd.com> wrote:
> >> Hi Mauro,
> >>
> >> well the last time I checked drm-tip was clean.
> >>
> >> The revert is necessary because we had some problems with the commit
> >> which we couldn't fix in the 5.19 cycle.
> > Would it be worth reverting the revert and applying the actual fix[1]?
> >   It's a huge revert unfortunately while the actual fix is like 10
> > lines of code.  I'm concerned there will be subtle fallout from the
> > revert due to how extensive it is.
>
> We have other bug fixes and cleanups around that patch which didn't made =
it
> into 5.19 either. I don't want to create an ever greater mess.
>
> Real question is why building drm-tip work for me but not for others?

Seeing this on latest drm-tip:

drivers/gpu/drm/amd/amdgpu/amdgpu_vram_mgr.c:54:1: error: redefinition of =
=E2=80=98amdgpu_vram_mgr_first_block=E2=80=99
   54 | amdgpu_vram_mgr_first_block(struct list_head *list)
      | ^~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.h:29,
                 from drivers/gpu/drm/amd/amdgpu/amdgpu.h:73,
                 from drivers/gpu/drm/amd/amdgpu/amdgpu_vram_mgr.c:28:
drivers/gpu/drm/amd/amdgpu/amdgpu_vram_mgr.h:57:1: note: previous definitio=
n of =E2=80=98amdgpu_vram_mgr_first_block=E2=80=99 with type =E2=80=98struc=
t drm_buddy_block *(struct list_head *)=E2=80=99
   57 | amdgpu_vram_mgr_first_block(struct list_head *list)
      | ^~~~~~~~~~~~~~~~~~~~~~~~~~~
drivers/gpu/drm/amd/amdgpu/amdgpu_vram_mgr.c:59:20: error: redefinition of =
=E2=80=98amdgpu_is_vram_mgr_blocks_contiguous=E2=80=99
   59 | static inline bool amdgpu_is_vram_mgr_blocks_contiguous(struct list=
_head *head)
      |                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
drivers/gpu/drm/amd/amdgpu/amdgpu_vram_mgr.h:62:20: note: previous definiti=
on of =E2=80=98amdgpu_is_vram_mgr_blocks_contiguous=E2=80=99 with type =E2=
=80=98bool(struct list_head *)=E2=80=99 {aka =E2=80=98_Bool(struct list_hea=
d *)=E2=80=99}
   62 | static inline bool amdgpu_is_vram_mgr_blocks_contiguous(struct list=
_head *head)
      |                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
make[4]: *** [scripts/Makefile.build:249: drivers/gpu/drm/amd/amdgpu/amdgpu=
_vram_mgr.o] Error 1
make[4]: *** Waiting for unfinished jobs....
make[3]: *** [scripts/Makefile.build:466: drivers/gpu/drm/amd/amdgpu] Error=
 2
make[2]: *** [scripts/Makefile.build:466: drivers/gpu/drm] Error 2
make[1]: *** [scripts/Makefile.build:466: drivers/gpu] Error 2
