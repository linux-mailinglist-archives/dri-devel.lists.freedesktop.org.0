Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5EB5C7D3D6
	for <lists+dri-devel@lfdr.de>; Thu,  1 Aug 2019 05:45:10 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 33CA76E343;
	Thu,  1 Aug 2019 03:45:03 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pg1-x544.google.com (mail-pg1-x544.google.com
 [IPv6:2607:f8b0:4864:20::544])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2EB116E343
 for <dri-devel@lists.freedesktop.org>; Thu,  1 Aug 2019 03:44:59 +0000 (UTC)
Received: by mail-pg1-x544.google.com with SMTP id o13so33255341pgp.12
 for <dri-devel@lists.freedesktop.org>; Wed, 31 Jul 2019 20:44:59 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=h+xyuISgi9Vn0Ch8M9bGcbbOkJHU28xgNWiMG/h2mkU=;
 b=jvG++TXLq5qQ/6GB/VAMpo6hJDwdz7qOHDyiGKHIxRQn4hDBI5iWqbxVyqv7UYKKyk
 JJIcl+vRCAz3pVCe4Cb4kAASgxUYipvL7xHluhZVUiK33G/1gEPABRO0EwR+MpXzsz2L
 Q0jG8cVozFvgdeE5mpNn73P0UCzLxQEl5eJad4XJ/450fz7PhGlppbm+bCitjlpyd6Rg
 Xdcp76MmsKejePXooWl+1dxsvdno4X6UK4SmqjUo0cdaNGDbICi4vyhAUGavF7bPrS6p
 pmlRIuTK62UgLNlkY9B76HdcPFpta3TsAnIOaYLeaDNF/UMhchiTCHr5xfwU+qfEayFz
 Lqjg==
X-Gm-Message-State: APjAAAUnioTKsB1sf5TFtig3tBe/hJou76W9avh2iAHMsi37P9it77rI
 Am2wYk2qF2Vv438NWt4kZn97Xw==
X-Google-Smtp-Source: APXvYqztQPTxz0MtnjEvHuqBMjnVpqOc8go+u4LZW+i6lQzUSevn2waApKc1+0qj4gIcf/ohlo4QtQ==
X-Received: by 2002:a65:4108:: with SMTP id w8mr18196651pgp.263.1564631097719; 
 Wed, 31 Jul 2019 20:44:57 -0700 (PDT)
Received: from localhost.localdomain ([2601:1c2:680:1319:692:26ff:feda:3a81])
 by smtp.gmail.com with ESMTPSA id
 h70sm64775674pgc.36.2019.07.31.20.44.56
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 31 Jul 2019 20:44:56 -0700 (PDT)
From: John Stultz <john.stultz@linaro.org>
To: lkml <linux-kernel@vger.kernel.org>
Subject: [PATCH v3 08/26] drm: kirin: Rename ade_crtc to kirin_crtc
Date: Thu,  1 Aug 2019 03:44:21 +0000
Message-Id: <20190801034439.98227-9-john.stultz@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190801034439.98227-1-john.stultz@linaro.org>
References: <20190801034439.98227-1-john.stultz@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=h+xyuISgi9Vn0Ch8M9bGcbbOkJHU28xgNWiMG/h2mkU=;
 b=UietvW8BfMCguLOkvkDw8RoW4W6e3/3kGmlJRdW+6EuhnrveT9Fv8Amg0QF/IDPwW8
 BchuXnyUQBjzDItEnIhSCCD3l2tsc8ae+lTcHZ45fGV/bgwrbvvzKw6u+lE6PctRxLt2
 hBFqI7yv5NBP0jO2vWHvqY0xxvi2LXx0KIEA9nv+RNzoMw/FpjyxyX/7K9oPi0OpKvRD
 36aIIAlQr6kGmnjFKAz0UUKe+nWCYl2p1WYZ8E/igE/X47LEOhWwvsqGhA4AgpHC3nVW
 uPcewcAQqSYyDujXr/3HcFaUnR+G0QaKffEKsuKMRePvzRkxXfJBbivxZ+G+6vQJcafG
 RBUA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Xu YiPing <xuyiping@hisilicon.com>, David Airlie <airlied@linux.ie>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Rongrong Zou <zourongrong@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogWHUgWWlQaW5nIDx4dXlpcGluZ0BoaXNpbGljb24uY29tPgoKQXMgcGFydCBvZiByZWZh
Y3RvcmluZyB0aGUga2lyaW4gZHJpdmVyIHRvIGJldHRlciBzdXBwb3J0CmRpZmZlcmVudCBoYXJk
d2FyZSByZXZpc2lvbnMsIHRoaXMgcGF0Y2ggcmVuYW1lcyB0aGUKc3RydWN0IGFkZV9jcnRjIHRv
IGtpcmluX2NydGMuCgpUaGUgc3RydWN0IGtpcmluX2NydGMgd2lsbCBsYXRlciB1c2VkIGJ5IGJv
dGgga2lyaW42MjAgYW5kCmZ1dHVyZSBraXJpbjk2MCBkcml2ZXIsIGFuZCB3aWxsIGJlIG1vdmVk
IHRvIGEgY29tbW9uCmtpcmluX2RybV9kcnYuaCBpbiBhIGZ1dHVyZSBwYXRjaAoKQ2M6IFJvbmdy
b25nIFpvdSA8em91cm9uZ3JvbmdAZ21haWwuY29tPgpDYzogRGF2aWQgQWlybGllIDxhaXJsaWVk
QGxpbnV4LmllPgpDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xsLmNoPgpDYzogZHJpLWRl
dmVsIDxkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnPgpDYzogU2FtIFJhdm5ib3JnIDxz
YW1AcmF2bmJvcmcub3JnPgpSZXZpZXdlZC1ieTogU2FtIFJhdm5ib3JnIDxzYW1AcmF2bmJvcmcu
b3JnPgpTaWduZWQtb2ZmLWJ5OiBYdSBZaVBpbmcgPHh1eWlwaW5nQGhpc2lsaWNvbi5jb20+Cltq
c3R1bHR6OiByZXdvcmRlZCBjb21taXQgbWVzc2FnZV0KU2lnbmVkLW9mZi1ieTogSm9obiBTdHVs
dHogPGpvaG4uc3R1bHR6QGxpbmFyby5vcmc+Ci0tLQogLi4uL2dwdS9kcm0vaGlzaWxpY29uL2tp
cmluL2tpcmluX2RybV9hZGUuYyAgIHwgNzQgKysrKysrKysrLS0tLS0tLS0tLQogMSBmaWxlIGNo
YW5nZWQsIDM3IGluc2VydGlvbnMoKyksIDM3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2FkZS5jIGIvZHJpdmVycy9n
cHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fYWRlLmMKaW5kZXggYzA5MDQwODc2ZTY4
Li5lZTNkYzNkMGY3MzggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2ly
aW4va2lyaW5fZHJtX2FkZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4v
a2lyaW5fZHJtX2FkZS5jCkBAIC0zOCw4ICszOCw4IEBACiAjZGVmaW5lIE9VVF9PVkxZCUFERV9P
VkxZMiAvKiBvdXRwdXQgb3ZlcmxheSBjb21wb3NpdG9yICovCiAjZGVmaW5lIEFERV9ERUJVRwkx
CiAKLSNkZWZpbmUgdG9fYWRlX2NydGMoY3J0YykgXAotCWNvbnRhaW5lcl9vZihjcnRjLCBzdHJ1
Y3QgYWRlX2NydGMsIGJhc2UpCisjZGVmaW5lIHRvX2tpcmluX2NydGMoY3J0YykgXAorCWNvbnRh
aW5lcl9vZihjcnRjLCBzdHJ1Y3Qga2lyaW5fY3J0YywgYmFzZSkKIAogI2RlZmluZSB0b19raXJp
bl9wbGFuZShwbGFuZSkgXAogCWNvbnRhaW5lcl9vZihwbGFuZSwgc3RydWN0IGtpcmluX3BsYW5l
LCBiYXNlKQpAQCAtNTYsOSArNTYsOSBAQCBzdHJ1Y3QgYWRlX2h3X2N0eCB7CiAJaW50IGlycTsK
IH07CiAKLXN0cnVjdCBhZGVfY3J0YyB7CitzdHJ1Y3Qga2lyaW5fY3J0YyB7CiAJc3RydWN0IGRy
bV9jcnRjIGJhc2U7Ci0Jc3RydWN0IGFkZV9od19jdHggKmN0eDsKKwl2b2lkICpod19jdHg7CiAJ
c3RydWN0IHdvcmtfc3RydWN0IGRpc3BsYXlfcmVzZXRfd3E7CiAJYm9vbCBlbmFibGU7CiB9OwpA
QCAtNzAsNyArNzAsNyBAQCBzdHJ1Y3Qga2lyaW5fcGxhbmUgewogfTsKIAogc3RydWN0IGFkZV9k
YXRhIHsKLQlzdHJ1Y3QgYWRlX2NydGMgYWNydGM7CisJc3RydWN0IGtpcmluX2NydGMgY3J0YzsK
IAlzdHJ1Y3Qga2lyaW5fcGxhbmUgcGxhbmVzW0FERV9DSF9OVU1dOwogCXN0cnVjdCBhZGVfaHdf
Y3R4IGN0eDsKIH07CkBAIC0xODQsOCArMTg0LDggQEAgc3RhdGljIGJvb2wgYWRlX2NydGNfbW9k
ZV9maXh1cChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCiAJCQkJY29uc3Qgc3RydWN0IGRybV9kaXNw
bGF5X21vZGUgKm1vZGUsCiAJCQkJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21v
ZGUpCiB7Ci0Jc3RydWN0IGFkZV9jcnRjICphY3J0YyA9IHRvX2FkZV9jcnRjKGNydGMpOwotCXN0
cnVjdCBhZGVfaHdfY3R4ICpjdHggPSBhY3J0Yy0+Y3R4OworCXN0cnVjdCBraXJpbl9jcnRjICpr
Y3J0YyA9IHRvX2tpcmluX2NydGMoY3J0Yyk7CisJc3RydWN0IGFkZV9od19jdHggKmN0eCA9IGtj
cnRjLT5od19jdHg7CiAKIAlhZGp1c3RlZF9tb2RlLT5jbG9jayA9CiAJCWNsa19yb3VuZF9yYXRl
KGN0eC0+YWRlX3BpeF9jbGssIG1vZGUtPmNsb2NrICogMTAwMCkgLyAxMDAwOwpAQCAtMzE3LDgg
KzMxNyw4IEBAIHN0YXRpYyB2b2lkIGFkZV9zZXRfbWVkaWFub2NfcW9zKHN0cnVjdCBhZGVfaHdf
Y3R4ICpjdHgpCiAKIHN0YXRpYyBpbnQgYWRlX2NydGNfZW5hYmxlX3ZibGFuayhzdHJ1Y3QgZHJt
X2NydGMgKmNydGMpCiB7Ci0Jc3RydWN0IGFkZV9jcnRjICphY3J0YyA9IHRvX2FkZV9jcnRjKGNy
dGMpOwotCXN0cnVjdCBhZGVfaHdfY3R4ICpjdHggPSBhY3J0Yy0+Y3R4OworCXN0cnVjdCBraXJp
bl9jcnRjICprY3J0YyA9IHRvX2tpcmluX2NydGMoY3J0Yyk7CisJc3RydWN0IGFkZV9od19jdHgg
KmN0eCA9IGtjcnRjLT5od19jdHg7CiAJdm9pZCBfX2lvbWVtICpiYXNlID0gY3R4LT5iYXNlOwog
CiAJaWYgKCFjdHgtPnBvd2VyX29uKQpAQCAtMzMyLDggKzMzMiw4IEBAIHN0YXRpYyBpbnQgYWRl
X2NydGNfZW5hYmxlX3ZibGFuayhzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCiAKIHN0YXRpYyB2b2lk
IGFkZV9jcnRjX2Rpc2FibGVfdmJsYW5rKHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKIHsKLQlzdHJ1
Y3QgYWRlX2NydGMgKmFjcnRjID0gdG9fYWRlX2NydGMoY3J0Yyk7Ci0Jc3RydWN0IGFkZV9od19j
dHggKmN0eCA9IGFjcnRjLT5jdHg7CisJc3RydWN0IGtpcmluX2NydGMgKmtjcnRjID0gdG9fa2ly
aW5fY3J0YyhjcnRjKTsKKwlzdHJ1Y3QgYWRlX2h3X2N0eCAqY3R4ID0ga2NydGMtPmh3X2N0eDsK
IAl2b2lkIF9faW9tZW0gKmJhc2UgPSBjdHgtPmJhc2U7CiAKIAlpZiAoIWN0eC0+cG93ZXJfb24p
IHsKQEAgLTM0Nyw3ICszNDcsNyBAQCBzdGF0aWMgdm9pZCBhZGVfY3J0Y19kaXNhYmxlX3ZibGFu
ayhzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCiAKIHN0YXRpYyB2b2lkIGRybV91bmRlcmZsb3dfd3Eo
c3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQogewotCXN0cnVjdCBhZGVfY3J0YyAqYWNydGMgPSBj
b250YWluZXJfb2Yod29yaywgc3RydWN0IGFkZV9jcnRjLAorCXN0cnVjdCBraXJpbl9jcnRjICph
Y3J0YyA9IGNvbnRhaW5lcl9vZih3b3JrLCBzdHJ1Y3Qga2lyaW5fY3J0YywKIAkJCQkJICAgICAg
ZGlzcGxheV9yZXNldF93cSk7CiAJc3RydWN0IGRybV9kZXZpY2UgKmRybV9kZXYgPSAoJmFjcnRj
LT5iYXNlKS0+ZGV2OwogCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZTsKQEAgLTM1OCw5
ICszNTgsOSBAQCBzdGF0aWMgdm9pZCBkcm1fdW5kZXJmbG93X3dxKHN0cnVjdCB3b3JrX3N0cnVj
dCAqd29yaykKIAogc3RhdGljIGlycXJldHVybl90IGFkZV9pcnFfaGFuZGxlcihpbnQgaXJxLCB2
b2lkICpkYXRhKQogewotCXN0cnVjdCBhZGVfY3J0YyAqYWNydGMgPSBkYXRhOwotCXN0cnVjdCBh
ZGVfaHdfY3R4ICpjdHggPSBhY3J0Yy0+Y3R4OwotCXN0cnVjdCBkcm1fY3J0YyAqY3J0YyA9ICZh
Y3J0Yy0+YmFzZTsKKwlzdHJ1Y3Qga2lyaW5fY3J0YyAqa2NydGMgPSBkYXRhOworCXN0cnVjdCBh
ZGVfaHdfY3R4ICpjdHggPSBrY3J0Yy0+aHdfY3R4OworCXN0cnVjdCBkcm1fY3J0YyAqY3J0YyA9
ICZrY3J0Yy0+YmFzZTsKIAl2b2lkIF9faW9tZW0gKmJhc2UgPSBjdHgtPmJhc2U7CiAJdTMyIHN0
YXR1czsKIApAQCAtMzc3LDcgKzM3Nyw3IEBAIHN0YXRpYyBpcnFyZXR1cm5fdCBhZGVfaXJxX2hh
bmRsZXIoaW50IGlycSwgdm9pZCAqZGF0YSkKIAkJYWRlX3VwZGF0ZV9iaXRzKGJhc2UgKyBMRElf
SU5UX0NMUiwgVU5ERVJGTE9XX0lOVF9FTl9PRlNULAogCQkJCU1BU0soMSksIDEpOwogCQlEUk1f
RVJST1IoIkxESSB1bmRlcmZsb3chIik7Ci0JCXNjaGVkdWxlX3dvcmsoJmFjcnRjLT5kaXNwbGF5
X3Jlc2V0X3dxKTsKKwkJc2NoZWR1bGVfd29yaygma2NydGMtPmRpc3BsYXlfcmVzZXRfd3EpOwog
CX0KIAogCXJldHVybiBJUlFfSEFORExFRDsKQEAgLTQ5OSwxMSArNDk5LDExIEBAIHN0YXRpYyB2
b2lkIGFkZV9kdW1wX3JlZ3Modm9pZCBfX2lvbWVtICpiYXNlKSB7IH0KIHN0YXRpYyB2b2lkIGFk
ZV9jcnRjX2F0b21pY19lbmFibGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCQkJCSAgIHN0cnVj
dCBkcm1fY3J0Y19zdGF0ZSAqb2xkX3N0YXRlKQogewotCXN0cnVjdCBhZGVfY3J0YyAqYWNydGMg
PSB0b19hZGVfY3J0YyhjcnRjKTsKLQlzdHJ1Y3QgYWRlX2h3X2N0eCAqY3R4ID0gYWNydGMtPmN0
eDsKKwlzdHJ1Y3Qga2lyaW5fY3J0YyAqa2NydGMgPSB0b19raXJpbl9jcnRjKGNydGMpOworCXN0
cnVjdCBhZGVfaHdfY3R4ICpjdHggPSBrY3J0Yy0+aHdfY3R4OwogCWludCByZXQ7CiAKLQlpZiAo
YWNydGMtPmVuYWJsZSkKKwlpZiAoa2NydGMtPmVuYWJsZSkKIAkJcmV0dXJuOwogCiAJaWYgKCFj
dHgtPnBvd2VyX29uKSB7CkBAIC01MTYsMjcgKzUxNiwyNyBAQCBzdGF0aWMgdm9pZCBhZGVfY3J0
Y19hdG9taWNfZW5hYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAlhZGVfZGlzcGxheV9lbmFi
bGUoY3R4KTsKIAlhZGVfZHVtcF9yZWdzKGN0eC0+YmFzZSk7CiAJZHJtX2NydGNfdmJsYW5rX29u
KGNydGMpOwotCWFjcnRjLT5lbmFibGUgPSB0cnVlOworCWtjcnRjLT5lbmFibGUgPSB0cnVlOwog
fQogCiBzdGF0aWMgdm9pZCBhZGVfY3J0Y19hdG9taWNfZGlzYWJsZShzdHJ1Y3QgZHJtX2NydGMg
KmNydGMsCiAJCQkJICAgIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqb2xkX3N0YXRlKQogewotCXN0
cnVjdCBhZGVfY3J0YyAqYWNydGMgPSB0b19hZGVfY3J0YyhjcnRjKTsKLQlzdHJ1Y3QgYWRlX2h3
X2N0eCAqY3R4ID0gYWNydGMtPmN0eDsKKwlzdHJ1Y3Qga2lyaW5fY3J0YyAqa2NydGMgPSB0b19r
aXJpbl9jcnRjKGNydGMpOworCXN0cnVjdCBhZGVfaHdfY3R4ICpjdHggPSBrY3J0Yy0+aHdfY3R4
OwogCi0JaWYgKCFhY3J0Yy0+ZW5hYmxlKQorCWlmICgha2NydGMtPmVuYWJsZSkKIAkJcmV0dXJu
OwogCiAJZHJtX2NydGNfdmJsYW5rX29mZihjcnRjKTsKIAlhZGVfcG93ZXJfZG93bihjdHgpOwot
CWFjcnRjLT5lbmFibGUgPSBmYWxzZTsKKwlrY3J0Yy0+ZW5hYmxlID0gZmFsc2U7CiB9CiAKIHN0
YXRpYyB2b2lkIGFkZV9jcnRjX21vZGVfc2V0X25vZmIoc3RydWN0IGRybV9jcnRjICpjcnRjKQog
ewotCXN0cnVjdCBhZGVfY3J0YyAqYWNydGMgPSB0b19hZGVfY3J0YyhjcnRjKTsKLQlzdHJ1Y3Qg
YWRlX2h3X2N0eCAqY3R4ID0gYWNydGMtPmN0eDsKKwlzdHJ1Y3Qga2lyaW5fY3J0YyAqa2NydGMg
PSB0b19raXJpbl9jcnRjKGNydGMpOworCXN0cnVjdCBhZGVfaHdfY3R4ICpjdHggPSBrY3J0Yy0+
aHdfY3R4OwogCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlID0gJmNydGMtPnN0YXRlLT5t
b2RlOwogCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGpfbW9kZSA9ICZjcnRjLT5zdGF0ZS0+
YWRqdXN0ZWRfbW9kZTsKIApAQCAtNTQ4LDggKzU0OCw4IEBAIHN0YXRpYyB2b2lkIGFkZV9jcnRj
X21vZGVfc2V0X25vZmIoc3RydWN0IGRybV9jcnRjICpjcnRjKQogc3RhdGljIHZvaWQgYWRlX2Ny
dGNfYXRvbWljX2JlZ2luKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAkJCQkgIHN0cnVjdCBkcm1f
Y3J0Y19zdGF0ZSAqb2xkX3N0YXRlKQogewotCXN0cnVjdCBhZGVfY3J0YyAqYWNydGMgPSB0b19h
ZGVfY3J0YyhjcnRjKTsKLQlzdHJ1Y3QgYWRlX2h3X2N0eCAqY3R4ID0gYWNydGMtPmN0eDsKKwlz
dHJ1Y3Qga2lyaW5fY3J0YyAqa2NydGMgPSB0b19raXJpbl9jcnRjKGNydGMpOworCXN0cnVjdCBh
ZGVfaHdfY3R4ICpjdHggPSBrY3J0Yy0+aHdfY3R4OwogCXN0cnVjdCBkcm1fZGlzcGxheV9tb2Rl
ICptb2RlID0gJmNydGMtPnN0YXRlLT5tb2RlOwogCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICph
ZGpfbW9kZSA9ICZjcnRjLT5zdGF0ZS0+YWRqdXN0ZWRfbW9kZTsKIApAQCAtNTYyLDEzICs1NjIs
MTMgQEAgc3RhdGljIHZvaWQgYWRlX2NydGNfYXRvbWljX2ZsdXNoKHN0cnVjdCBkcm1fY3J0YyAq
Y3J0YywKIAkJCQkgIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqb2xkX3N0YXRlKQogCiB7Ci0Jc3Ry
dWN0IGFkZV9jcnRjICphY3J0YyA9IHRvX2FkZV9jcnRjKGNydGMpOwotCXN0cnVjdCBhZGVfaHdf
Y3R4ICpjdHggPSBhY3J0Yy0+Y3R4OworCXN0cnVjdCBraXJpbl9jcnRjICprY3J0YyA9IHRvX2tp
cmluX2NydGMoY3J0Yyk7CisJc3RydWN0IGFkZV9od19jdHggKmN0eCA9IGtjcnRjLT5od19jdHg7
CiAJc3RydWN0IGRybV9wZW5kaW5nX3ZibGFua19ldmVudCAqZXZlbnQgPSBjcnRjLT5zdGF0ZS0+
ZXZlbnQ7CiAJdm9pZCBfX2lvbWVtICpiYXNlID0gY3R4LT5iYXNlOwogCiAJLyogb25seSBjcnRj
IGlzIGVuYWJsZWQgcmVncyB0YWtlIGVmZmVjdCAqLwotCWlmIChhY3J0Yy0+ZW5hYmxlKSB7CisJ
aWYgKGtjcnRjLT5lbmFibGUpIHsKIAkJYWRlX2R1bXBfcmVncyhiYXNlKTsKIAkJLyogZmx1c2gg
YWRlIHJlZ2lzdGVycyAqLwogCQl3cml0ZWwoQURFX0VOQUJMRSwgYmFzZSArIEFERV9FTik7CkBA
IC0xMDA3LDcgKzEwMDcsNyBAQCBzdGF0aWMgaW50IGFkZV9kcm1faW5pdChzdHJ1Y3QgcGxhdGZv
cm1fZGV2aWNlICpwZGV2KQogCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBwbGF0Zm9ybV9nZXRf
ZHJ2ZGF0YShwZGV2KTsKIAlzdHJ1Y3QgYWRlX2RhdGEgKmFkZTsKIAlzdHJ1Y3QgYWRlX2h3X2N0
eCAqY3R4OwotCXN0cnVjdCBhZGVfY3J0YyAqYWNydGM7CisJc3RydWN0IGtpcmluX2NydGMgKmtj
cnRjOwogCXN0cnVjdCBraXJpbl9wbGFuZSAqa3BsYW5lOwogCWVudW0gZHJtX3BsYW5lX3R5cGUg
dHlwZTsKIAlpbnQgcmV0OwpAQCAtMTAyMSw4ICsxMDIxLDggQEAgc3RhdGljIGludCBhZGVfZHJt
X2luaXQoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAlwbGF0Zm9ybV9zZXRfZHJ2ZGF0
YShwZGV2LCBhZGUpOwogCiAJY3R4ID0gJmFkZS0+Y3R4OwotCWFjcnRjID0gJmFkZS0+YWNydGM7
Ci0JYWNydGMtPmN0eCA9IGN0eDsKKwlrY3J0YyA9ICZhZGUtPmNydGM7CisJa2NydGMtPmh3X2N0
eCA9IGN0eDsKIAogCXJldCA9IGFkZV9kdHNfcGFyc2UocGRldiwgY3R4KTsKIAlpZiAocmV0KQpA
QCAtMTA0NiwxNSArMTA0NiwxNSBAQCBzdGF0aWMgaW50IGFkZV9kcm1faW5pdChzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlICpwZGV2KQogCX0KIAogCS8qIGNydGMgaW5pdCAqLwotCXJldCA9IGFkZV9j
cnRjX2luaXQoZGV2LCAmYWNydGMtPmJhc2UsICZhZGUtPnBsYW5lc1tQUklNQVJZX0NIXS5iYXNl
KTsKKwlyZXQgPSBhZGVfY3J0Y19pbml0KGRldiwgJmtjcnRjLT5iYXNlLCAmYWRlLT5wbGFuZXNb
UFJJTUFSWV9DSF0uYmFzZSk7CiAJaWYgKHJldCkKIAkJcmV0dXJuIHJldDsKIAogCS8qIHZibGFu
ayBpcnEgaW5pdCAqLwogCXJldCA9IGRldm1fcmVxdWVzdF9pcnEoZGV2LT5kZXYsIGN0eC0+aXJx
LCBhZGVfaXJxX2hhbmRsZXIsCi0JCQkgICAgICAgSVJRRl9TSEFSRUQsIGRldi0+ZHJpdmVyLT5u
YW1lLCBhY3J0Yyk7CisJCQkgICAgICAgSVJRRl9TSEFSRUQsIGRldi0+ZHJpdmVyLT5uYW1lLCBr
Y3J0Yyk7CiAKLQlJTklUX1dPUksoJmFjcnRjLT5kaXNwbGF5X3Jlc2V0X3dxLCBkcm1fdW5kZXJm
bG93X3dxKTsKKwlJTklUX1dPUksoJmtjcnRjLT5kaXNwbGF5X3Jlc2V0X3dxLCBkcm1fdW5kZXJm
bG93X3dxKTsKIAogCWlmIChyZXQpCiAJCXJldHVybiByZXQ7Ci0tIAoyLjE3LjEKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
