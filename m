Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1052910E7A7
	for <lists+dri-devel@lfdr.de>; Mon,  2 Dec 2019 10:28:37 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7D22489503;
	Mon,  2 Dec 2019 09:28:34 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-vs1-xe42.google.com (mail-vs1-xe42.google.com
 [IPv6:2607:f8b0:4864:20::e42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 219A689503
 for <dri-devel@lists.freedesktop.org>; Mon,  2 Dec 2019 09:28:33 +0000 (UTC)
Received: by mail-vs1-xe42.google.com with SMTP id b16so23779304vso.10
 for <dri-devel@lists.freedesktop.org>; Mon, 02 Dec 2019 01:28:33 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=E9HrXGq+ObrsCIt4O0O37ZvOIs7E52us2W4ID/aW9Vc=;
 b=Gyi5tUf3s3s/w6yyzyVXC4yZ0fWEGIbCcE6qjcJyBPou5/hp+F2xggIPE62/b/p9AF
 Sx1pImVAZxP7YrElTafI1cp6L6y8sR13FE8jRBl+C0ZW3W9IHluZEnKqjburGCmO6VmU
 /kDONARs9rPOROxwYkFqZ6D87k094v1HkQPeZYRx61+kW+DfY+flUsT2QTzC9S3bH3k4
 LvgBOioF0a22e8RACH9Hucg5Ii/dgaifk1hdyCSxAgfkBT50L6DfoY01aRJn1zCTj4j9
 tdMKgC/7CFaTguPhc2mj0meVZ8vC21Cqwv3gACP+kJjBBKtjCElgQoFdVyFEwmSQgS/Q
 Bm6g==
X-Gm-Message-State: APjAAAUJykU8sQ0VgwsbS3ycDqMb4CH2yFL2ZtqSxV90oGpUjicbrKD0
 GII7/1zpt2/xphw9kpO2fPh0d0POWJRih6Aqqgg=
X-Google-Smtp-Source: APXvYqzrWIlV0sXnJ1mHgoEo8hF3/jFJcKSi3ob8S2loXtsAFPdk59iTniSDUmOV6Z4xK9h/b4LVNcomR7dy0aiU2M0=
X-Received: by 2002:a05:6102:5c7:: with SMTP id
 v7mr37950932vsf.85.1575278911903; 
 Mon, 02 Dec 2019 01:28:31 -0800 (PST)
MIME-Version: 1.0
References: <20191126134707.22385-1-tzimmermann@suse.de>
 <20191126134707.22385-8-tzimmermann@suse.de>
In-Reply-To: <20191126134707.22385-8-tzimmermann@suse.de>
From: Emil Velikov <emil.l.velikov@gmail.com>
Date: Mon, 2 Dec 2019 09:27:31 +0000
Message-ID: <CACvgo52+4rGV3xSn5yS8U5DLp+5jYKYnHo_h=oZXCESoXWs6Mg@mail.gmail.com>
Subject: Re: [PATCH 7/7] drm/udl: Move udl_handle_damage() into udl_modeset.c
To: Thomas Zimmermann <tzimmermann@suse.de>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=E9HrXGq+ObrsCIt4O0O37ZvOIs7E52us2W4ID/aW9Vc=;
 b=gm7wF121Xl6GoeUXTGWaoTCK/uYTO2V81UGLqObT5Pqi04Mubm2ZNg9iDWYlWqjc9K
 cQd5T4jwBPVpczfS9DX2taK86xSqsA9wX0KN65VYL85MFdYM3bdDQnr4wTy17a3tGXjM
 bn5WZdEGbuAKp9q0AtFmsRcWgz8IgySnLu4ZN3gvjdo7WF79u6/xEZQ2ptOQ7tkDjQfu
 6AxHp5IIWglDsmfSKfjdYcJqW05PdmnNmpJzH2AP82f5wTVnD+ijo99u4WVvUkMPJVrP
 PhoM9GD6/441pfOsd20xHiVifmFuz7PHsbXXUeUN+JbjkL3kqEVPOu308rfCaLZk9cAQ
 /7bg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: ML dri-devel <dri-devel@lists.freedesktop.org>,
 Gerd Hoffmann <kraxel@redhat.com>, Dave Airlie <airlied@redhat.com>,
 Sam Ravnborg <sam@ravnborg.org>, Emil Velikov <emil.velikov@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCAyNiBOb3YgMjAxOSBhdCAxMzo0NywgVGhvbWFzIFppbW1lcm1hbm4gPHR6aW1tZXJt
YW5uQHN1c2UuZGU+IHdyb3RlOgo+Cj4gVGhlIG9ubHkgY2FsbGVyIG9mIHVkbF9oYW5kbGVfZGFt
YWdlKCkgaW4gdGhlIHBsYW5lLXVwZGF0ZSBmdW5jdGlvbgo+IGluIHVkbF9tb2Rlc2V0LmMuIE1v
dmUgdWRsX2hhbmRsZV9kYW1hZ2UoKSB0aGVyZSwgbWFrZSBpdCBzdGF0aWMsIGFuZAo+IHJlbW92
ZSBzZXZlcmFsIGxlZnQtb3ZlciBtYWNyb3MuCj4KUGVyc29uYWxseSBJIHdvdWxkIGhhdmUgbGVm
dCB0aGUgbWVjaGFuaWMgY29kZSBtb3Rpb24gZnJvbSB0aGUgZGVhZApjb2RlIHJlbW92YWwuCk5v
dCBhIGJpZyBkZWFsIHRob3VnaDoKUmV2aWV3ZWQtYnk6IEVtaWwgVmVsaWtvdiA8ZW1pbC5sLnZl
bGlrb3ZAZ21haWwuY29tPgoKVGhlcmUncyBmZXcgY29tbWVudHMgZm9yIGZvbGxvdy11cCB3b3Jr
IGJlbG93LgoKPiArc3RhdGljIGludCB1ZGxfaGFuZGxlX2RhbWFnZShzdHJ1Y3QgZHJtX2ZyYW1l
YnVmZmVyICpmYiwgaW50IHgsIGludCB5LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
aW50IHdpZHRoLCBpbnQgaGVpZ2h0KQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2ID0gZmItPmRldjsKPiArICAgICAgIHN0cnVjdCB1ZGxfZGV2aWNlICp1ZGwgPSB0b191ZGwo
ZGV2KTsKPiArICAgICAgIGludCBpLCByZXQ7Cj4gKyAgICAgICBjaGFyICpjbWQ7Cj4gKyAgICAg
ICBjeWNsZXNfdCBzdGFydF9jeWNsZXMsIGVuZF9jeWNsZXM7Cj4gKyAgICAgICBpbnQgYnl0ZXNf
c2VudCA9IDA7Cj4gKyAgICAgICBpbnQgYnl0ZXNfaWRlbnRpY2FsID0gMDsKPiArICAgICAgIHN0
cnVjdCB1cmIgKnVyYjsKPiArICAgICAgIGludCBhbGlnbmVkX3g7Cj4gKyAgICAgICBpbnQgbG9n
X2JwcDsKPiArICAgICAgIHZvaWQgKnZhZGRyOwo+ICsKPiArICAgICAgIGlmIChXQVJOX09OKCFp
c19wb3dlcl9vZl8yKGZiLT5mb3JtYXQtPmNwcFswXSkpKQo+ICsgICAgICAgICAgICAgICByZXR1
cm4gLUVJTlZBTDsKPiArCgo+ICsgICAgICAgbG9nX2JwcCA9IF9fZmZzKGZiLT5mb3JtYXQtPmNw
cFswXSk7Cj4gKwo+ICsgICAgICAgdmFkZHIgPSBkcm1fZ2VtX3NobWVtX3ZtYXAoZmItPm9ialsw
XSk7Cj4gKyAgICAgICBpZiAoSVNfRVJSKHZhZGRyKSkgewo+ICsgICAgICAgICAgICAgICBEUk1f
RVJST1IoImZhaWxlZCB0byB2bWFwIGZiXG4iKTsKPiArICAgICAgICAgICAgICAgcmV0dXJuIDA7
Cj4gKyAgICAgICB9Cj4gKwpNaWdodCBhcyB3ZWxsIG1vdmUgdGhpcyBodW5rIC4uLgoKPiArICAg
ICAgIGFsaWduZWRfeCA9IEFMSUdOX0RPV04oeCwgc2l6ZW9mKHVuc2lnbmVkIGxvbmcpKTsKPiAr
ICAgICAgIHdpZHRoID0gQUxJR04od2lkdGggKyAoeC1hbGlnbmVkX3gpLCBzaXplb2YodW5zaWdu
ZWQgbG9uZykpOwo+ICsgICAgICAgeCA9IGFsaWduZWRfeDsKPiArCj4gKyAgICAgICBpZiAoKHdp
ZHRoIDw9IDApIHx8Cj4gKyAgICAgICAgICAgKHggKyB3aWR0aCA+IGZiLT53aWR0aCkgfHwKPiAr
ICAgICAgICAgICAoeSArIGhlaWdodCA+IGZiLT5oZWlnaHQpKSB7Cj4gKyAgICAgICAgICAgICAg
IHJldCA9IC1FSU5WQUw7Cj4gKyAgICAgICAgICAgICAgIGdvdG8gZXJyX2RybV9nZW1fc2htZW1f
dnVubWFwOwo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIHN0YXJ0X2N5Y2xlcyA9IGdldF9jeWNs
ZXMoKTsKPiArCj4gKyAgICAgICB1cmIgPSB1ZGxfZ2V0X3VyYihkZXYpOwo+ICsgICAgICAgaWYg
KCF1cmIpCj4gKyAgICAgICAgICAgICAgIGdvdG8gb3V0Owo+ICsgICAgICAgY21kID0gdXJiLT50
cmFuc2Zlcl9idWZmZXI7Cj4gKwouLi4gaGVyZQoKPiArICAgICAgIGZvciAoaSA9IHk7IGkgPCB5
ICsgaGVpZ2h0IDsgaSsrKSB7Cj4gKyAgICAgICAgICAgICAgIGNvbnN0IGludCBsaW5lX29mZnNl
dCA9IGZiLT5waXRjaGVzWzBdICogaTsKPiArICAgICAgICAgICAgICAgY29uc3QgaW50IGJ5dGVf
b2Zmc2V0ID0gbGluZV9vZmZzZXQgKyAoeCA8PCBsb2dfYnBwKTsKPiArICAgICAgICAgICAgICAg
Y29uc3QgaW50IGRldl9ieXRlX29mZnNldCA9IChmYi0+d2lkdGggKiBpICsgeCkgPDwgbG9nX2Jw
cDsKPiArCj4gKyAgICAgICAgICAgICAgIGlmICh1ZGxfcmVuZGVyX2hsaW5lKGRldiwgbG9nX2Jw
cCwgJnVyYiwgKGNoYXIgKil2YWRkciwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgJmNtZCwgYnl0ZV9vZmZzZXQsIGRldl9ieXRlX29mZnNldCwKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggPDwgbG9nX2JwcCwKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgJmJ5dGVzX2lkZW50aWNhbCwgJmJ5dGVzX3NlbnQpKQp1
ZGxfcmVuZGVyX2hsaW5lKCkgLSBkcm9wIHRoZSB1bnVzZWQgYXJncyBieXRlc19pZGVudGljYWwg
YW5kIGJ5dGVzX3NlbnQ/Cgo+ICsgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyb3I7Cj4g
KyAgICAgICB9Cj4gKwo+ICsgICAgICAgaWYgKGNtZCA+IChjaGFyICopIHVyYi0+dHJhbnNmZXJf
YnVmZmVyKSB7Cj4gKyAgICAgICAgICAgICAgIC8qIFNlbmQgcGFydGlhbCBidWZmZXIgcmVtYWlu
aW5nIGJlZm9yZSBleGl0aW5nICovCj4gKyAgICAgICAgICAgICAgIGludCBsZW47Cj4gKyAgICAg
ICAgICAgICAgIGlmIChjbWQgPCAoY2hhciAqKSB1cmItPnRyYW5zZmVyX2J1ZmZlciArIHVyYi0+
dHJhbnNmZXJfYnVmZmVyX2xlbmd0aCkKPiArICAgICAgICAgICAgICAgICAgICAgICAqY21kKysg
PSAweEFGOwo+ICsgICAgICAgICAgICAgICBsZW4gPSBjbWQgLSAoY2hhciAqKSB1cmItPnRyYW5z
ZmVyX2J1ZmZlcjsKPiArICAgICAgICAgICAgICAgcmV0ID0gdWRsX3N1Ym1pdF91cmIoZGV2LCB1
cmIsIGxlbik7Cj4gKyAgICAgICAgICAgICAgIGJ5dGVzX3NlbnQgKz0gbGVuOwpOaXQ6CgppbnQg
bGVuID0gY21kIC0gKGNoYXIgKikgdXJiLT50cmFuc2Zlcl9idWZmZXI7CmlmIChsZW4gPiAwKSB7
CiAgIC8qIFNlbmQgcGFydGlhbCBidWZmZXIgcmVtYWluaW5nIGJlZm9yZSBleGl0aW5nICovCiAg
IGlmIChsZW4gPCB1cmItPnRyYW5zZmVyX2J1ZmZlcl9sZW5ndGgpCi4uLgoKPiArICAgICAgIH0g
ZWxzZQo+ICsgICAgICAgICAgICAgICB1ZGxfdXJiX2NvbXBsZXRpb24odXJiKTsKPiArCj4gK2Vy
cm9yOgoKPiArICAgICAgIGF0b21pY19hZGQoYnl0ZXNfc2VudCwgJnVkbC0+Ynl0ZXNfc2VudCk7
Cj4gKyAgICAgICBhdG9taWNfYWRkKGJ5dGVzX2lkZW50aWNhbCwgJnVkbC0+Ynl0ZXNfaWRlbnRp
Y2FsKTsKPiArICAgICAgIGF0b21pY19hZGQoKHdpZHRoICogaGVpZ2h0KSA8PCBsb2dfYnBwLCAm
dWRsLT5ieXRlc19yZW5kZXJlZCk7Cj4gKyAgICAgICBlbmRfY3ljbGVzID0gZ2V0X2N5Y2xlcygp
Owo+ICsgICAgICAgYXRvbWljX2FkZCgoKHVuc2lnbmVkIGludCkgKChlbmRfY3ljbGVzIC0gc3Rh
cnRfY3ljbGVzKQo+ICsgICAgICAgICAgICAgICAgICAgPj4gMTApKSwgLyogS2N5Y2xlcyAqLwo+
ICsgICAgICAgICAgICAgICAgICAmdWRsLT5jcHVfa2N5Y2xlc191c2VkKTsKPiArClRoZXNlIGF0
b21pY3MgKCsgbG9zdF9waXhlbHMpIHNlZW0gdG8gYmUgc2V0LWJ1dC11bnVzZWQgc2luY2UgZGF5
IG9uZS4KV2UgbWlnaHQgYXMgd2VsbCBraWxsIHRoZW0sIGFsb25nc2lkZSB0aGUgYXNzb2NpYXRl
ZCBnZXRfY3ljbGVzKCkuCgpIVEgKRW1pbApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
