Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6858595322
	for <lists+dri-devel@lfdr.de>; Tue, 20 Aug 2019 03:18:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 283986E578;
	Tue, 20 Aug 2019 01:18:04 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6BDE96E56D
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 01:17:59 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id C5E4733D;
 Tue, 20 Aug 2019 03:17:52 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 30/50] drm/omap: hdmi5: Move mode set,
 enable and disable operations to bridge
Date: Tue, 20 Aug 2019 04:17:01 +0300
Message-Id: <20190820011721.30136-31-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
References: <20190820011721.30136-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1566263873;
 bh=+3GuhtUvqsMBG3RPL5+Q75wDzQfvBZEBwR1cI4R/w3E=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=r3BRmb8AZyzmkVNF36j7z6Nkdxvr/At2mXxi1EwjnxD/5rwe/TFu/xOkdsOY+/ztB
 AgRbXeHLD+N/0/JI5PBxQQespspiSenzlfUPqb+5xFHY42eWVumAJMBeMEtHKZ9/88
 cTz4kiVTlAt2O7Fq5Tn2HjcSRsN8SCrSu2P1laU0=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sean Paul <sean@poorly.run>,
 Sebastian Reichel <sebastian.reichel@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TW92ZSB0aGUgb21hcF9kc3NfZGV2aWNlIC5zZXRfdGltaW5ncygpLCAuZW5hYmxlKCkgYW5kIC5k
aXNhYmxlKCkKb3BlcmF0aW9ucyB0byB0aGUgZHJtX2JyaWRnZSBmdW5jdGlvbnMuIEFzIHRoZSBk
cm1fYnJpZGdlIGZvciB0aGUgSERNSQplbmNvZGVyIGlzIHVuY29uZGl0aW9uYWxseSByZWdpc3Rl
cmVkIGFuZCBhdHRhY2hlZCwgdGhvc2Ugb3BlcmF0aW9ucwp3aWxsIGJlIGNhbGxlZCBhdCB0aGUg
YXBwcm9wcmlhdGUgdGltZS4KClNpZ25lZC1vZmYtYnk6IExhdXJlbnQgUGluY2hhcnQgPGxhdXJl
bnQucGluY2hhcnRAaWRlYXNvbmJvYXJkLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRy
bS9kc3MvaGRtaTUuYyB8IDIwNCArKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tCiAxIGZpbGUg
Y2hhbmdlZCwgMTA2IGluc2VydGlvbnMoKyksIDk4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNS5jIGIvZHJpdmVycy9ncHUvZHJtL29t
YXBkcm0vZHNzL2hkbWk1LmMKaW5kZXggYTg5NWVkMTU5OTgxLi4wOWJlM2YwZGVjODEgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNS5jCkBAIC0zMSw2ICszMSw4IEBACiAjaW5jbHVkZSA8
bGludXgvb2ZfZ3JhcGguaD4KICNpbmNsdWRlIDxzb3VuZC9vbWFwLWhkbWktYXVkaW8uaD4KIAor
I2luY2x1ZGUgPGRybS9kcm1fYXRvbWljLmg+CisKICNpbmNsdWRlICJvbWFwZHNzLmgiCiAjaW5j
bHVkZSAiaGRtaTVfY29yZS5oIgogI2luY2x1ZGUgImRzcy5oIgpAQCAtMjM2LDIwICsyMzgsNiBA
QCBzdGF0aWMgdm9pZCBoZG1pX3Bvd2VyX29mZl9mdWxsKHN0cnVjdCBvbWFwX2hkbWkgKmhkbWkp
CiAJaGRtaV9wb3dlcl9vZmZfY29yZShoZG1pKTsKIH0KIAotc3RhdGljIHZvaWQgaGRtaV9kaXNw
bGF5X3NldF90aW1pbmdzKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwKLQkJCQkgICAg
IGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKQotewotCXN0cnVjdCBvbWFwX2hk
bWkgKmhkbWkgPSBkc3NkZXZfdG9faGRtaShkc3NkZXYpOwotCi0JbXV0ZXhfbG9jaygmaGRtaS0+
bG9jayk7Ci0KLQlkcm1fZGlzcGxheV9tb2RlX3RvX3ZpZGVvbW9kZShtb2RlLCAmaGRtaS0+Y2Zn
LnZtKTsKLQotCWRpc3BjX3NldF90dl9wY2xrKGhkbWktPmRzcy0+ZGlzcGMsIG1vZGUtPmNsb2Nr
ICogMTAwMCk7Ci0KLQltdXRleF91bmxvY2soJmhkbWktPmxvY2spOwotfQotCiBzdGF0aWMgaW50
IGhkbWlfZHVtcF9yZWdzKHN0cnVjdCBzZXFfZmlsZSAqcywgdm9pZCAqcCkKIHsKIAlzdHJ1Y3Qg
b21hcF9oZG1pICpoZG1pID0gcy0+cHJpdmF0ZTsKQEAgLTI4NSw2MiArMjczLDYgQEAgc3RhdGlj
IHZvaWQgaGRtaV9zdG9wX2F1ZGlvX3N0cmVhbShzdHJ1Y3Qgb21hcF9oZG1pICpoZCkKIAlSRUdf
RkxEX01PRChoZC0+d3AuYmFzZSwgSERNSV9XUF9TWVNDT05GSUcsIGhkLT53cF9pZGxlbW9kZSwg
MywgMik7CiB9CiAKLXN0YXRpYyB2b2lkIGhkbWlfZGlzcGxheV9lbmFibGUoc3RydWN0IG9tYXBf
ZHNzX2RldmljZSAqZHNzZGV2KQotewotCXN0cnVjdCBvbWFwX2hkbWkgKmhkbWkgPSBkc3NkZXZf
dG9faGRtaShkc3NkZXYpOwotCXVuc2lnbmVkIGxvbmcgZmxhZ3M7Ci0JaW50IHI7Ci0KLQlEU1NE
QkcoIkVOVEVSIGhkbWlfZGlzcGxheV9lbmFibGVcbiIpOwotCi0JbXV0ZXhfbG9jaygmaGRtaS0+
bG9jayk7Ci0KLQlyID0gaGRtaV9wb3dlcl9vbl9mdWxsKGhkbWkpOwotCWlmIChyKSB7Ci0JCURT
U0VSUigiZmFpbGVkIHRvIHBvd2VyIG9uIGRldmljZVxuIik7Ci0JCWdvdG8gZG9uZTsKLQl9Ci0K
LQlpZiAoaGRtaS0+YXVkaW9fY29uZmlndXJlZCkgewotCQlyID0gaGRtaTVfYXVkaW9fY29uZmln
KCZoZG1pLT5jb3JlLCAmaGRtaS0+d3AsCi0JCQkJICAgICAgICZoZG1pLT5hdWRpb19jb25maWcs
Ci0JCQkJICAgICAgIGhkbWktPmNmZy52bS5waXhlbGNsb2NrKTsKLQkJaWYgKHIpIHsKLQkJCURT
U0VSUigiRXJyb3IgcmVzdG9yaW5nIGF1ZGlvIGNvbmZpZ3VyYXRpb246ICVkIiwgcik7Ci0JCQlo
ZG1pLT5hdWRpb19hYm9ydF9jYigmaGRtaS0+cGRldi0+ZGV2KTsKLQkJCWhkbWktPmF1ZGlvX2Nv
bmZpZ3VyZWQgPSBmYWxzZTsKLQkJfQotCX0KLQotCXNwaW5fbG9ja19pcnFzYXZlKCZoZG1pLT5h
dWRpb19wbGF5aW5nX2xvY2ssIGZsYWdzKTsKLQlpZiAoaGRtaS0+YXVkaW9fY29uZmlndXJlZCAm
JiBoZG1pLT5hdWRpb19wbGF5aW5nKQotCQloZG1pX3N0YXJ0X2F1ZGlvX3N0cmVhbShoZG1pKTsK
LQloZG1pLT5kaXNwbGF5X2VuYWJsZWQgPSB0cnVlOwotCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUo
JmhkbWktPmF1ZGlvX3BsYXlpbmdfbG9jaywgZmxhZ3MpOwotCi1kb25lOgotCW11dGV4X3VubG9j
aygmaGRtaS0+bG9jayk7Ci19Ci0KLXN0YXRpYyB2b2lkIGhkbWlfZGlzcGxheV9kaXNhYmxlKHN0
cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldikKLXsKLQlzdHJ1Y3Qgb21hcF9oZG1pICpoZG1p
ID0gZHNzZGV2X3RvX2hkbWkoZHNzZGV2KTsKLQl1bnNpZ25lZCBsb25nIGZsYWdzOwotCi0JRFNT
REJHKCJFbnRlciBoZG1pX2Rpc3BsYXlfZGlzYWJsZVxuIik7Ci0KLQltdXRleF9sb2NrKCZoZG1p
LT5sb2NrKTsKLQotCXNwaW5fbG9ja19pcnFzYXZlKCZoZG1pLT5hdWRpb19wbGF5aW5nX2xvY2ss
IGZsYWdzKTsKLQloZG1pX3N0b3BfYXVkaW9fc3RyZWFtKGhkbWkpOwotCWhkbWktPmRpc3BsYXlf
ZW5hYmxlZCA9IGZhbHNlOwotCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmhkbWktPmF1ZGlvX3Bs
YXlpbmdfbG9jaywgZmxhZ3MpOwotCi0JaGRtaV9wb3dlcl9vZmZfZnVsbChoZG1pKTsKLQotCW11
dGV4X3VubG9jaygmaGRtaS0+bG9jayk7Ci19Ci0KIHN0YXRpYyBpbnQgaGRtaV9jb3JlX2VuYWJs
ZShzdHJ1Y3Qgb21hcF9oZG1pICpoZG1pKQogewogCWludCByID0gMDsKQEAgLTQ3MywzOSArNDA1
LDExIEBAIHN0YXRpYyBzdHJ1Y3QgZWRpZCAqaGRtaV9yZWFkX2VkaWQoc3RydWN0IG9tYXBfZHNz
X2RldmljZSAqZHNzZGV2KQogCQkJCSBOVUxMKTsKIH0KIAotc3RhdGljIGludCBoZG1pX3NldF9p
bmZvZnJhbWUoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LAotCQljb25zdCBzdHJ1Y3Qg
aGRtaV9hdmlfaW5mb2ZyYW1lICphdmkpCi17Ci0Jc3RydWN0IG9tYXBfaGRtaSAqaGRtaSA9IGRz
c2Rldl90b19oZG1pKGRzc2Rldik7Ci0KLQloZG1pLT5jZmcuaW5mb2ZyYW1lID0gKmF2aTsKLQly
ZXR1cm4gMDsKLX0KLQotc3RhdGljIGludCBoZG1pX3NldF9oZG1pX21vZGUoc3RydWN0IG9tYXBf
ZHNzX2RldmljZSAqZHNzZGV2LAotCQlib29sIGhkbWlfbW9kZSkKLXsKLQlzdHJ1Y3Qgb21hcF9o
ZG1pICpoZG1pID0gZHNzZGV2X3RvX2hkbWkoZHNzZGV2KTsKLQotCWhkbWktPmNmZy5oZG1pX2R2
aV9tb2RlID0gaGRtaV9tb2RlID8gSERNSV9IRE1JIDogSERNSV9EVkk7Ci0JcmV0dXJuIDA7Ci19
Ci0KIHN0YXRpYyBjb25zdCBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlX29wcyBoZG1pX29wcyA9IHsK
IAkuY29ubmVjdAkJPSBoZG1pX2Nvbm5lY3QsCiAJLmRpc2Nvbm5lY3QJCT0gaGRtaV9kaXNjb25u
ZWN0LAogCi0JLmVuYWJsZQkJCT0gaGRtaV9kaXNwbGF5X2VuYWJsZSwKLQkuZGlzYWJsZQkJPSBo
ZG1pX2Rpc3BsYXlfZGlzYWJsZSwKLQotCS5zZXRfdGltaW5ncwkJPSBoZG1pX2Rpc3BsYXlfc2V0
X3RpbWluZ3MsCi0KIAkucmVhZF9lZGlkCQk9IGhkbWlfcmVhZF9lZGlkLAotCi0JLmhkbWkgPSB7
Ci0JCS5zZXRfaW5mb2ZyYW1lCQk9IGhkbWlfc2V0X2luZm9mcmFtZSwKLQkJLnNldF9oZG1pX21v
ZGUJCT0gaGRtaV9zZXRfaGRtaV9tb2RlLAotCX0sCiB9OwogCiAvKiAtLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQpAQCAtNTI0LDYgKzQyOCwxMDcgQEAgc3RhdGljIGludCBoZG1pNV9icmlkZ2VfYXR0YWNo
KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJCQkJIGJyaWRnZSwgZmxhZ3MpOwogfQogCitz
dGF0aWMgdm9pZCBoZG1pNV9icmlkZ2VfbW9kZV9zZXQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSwKKwkJCQkgIGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAorCQkJCSAgY29u
c3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpCit7CisJc3RydWN0IG9t
YXBfaGRtaSAqaGRtaSA9IGRybV9icmlkZ2VfdG9faGRtaShicmlkZ2UpOworCisJbXV0ZXhfbG9j
aygmaGRtaS0+bG9jayk7CisKKwlkcm1fZGlzcGxheV9tb2RlX3RvX3ZpZGVvbW9kZShhZGp1c3Rl
ZF9tb2RlLCAmaGRtaS0+Y2ZnLnZtKTsKKworCWRpc3BjX3NldF90dl9wY2xrKGhkbWktPmRzcy0+
ZGlzcGMsIGFkanVzdGVkX21vZGUtPmNsb2NrICogMTAwMCk7CisKKwltdXRleF91bmxvY2soJmhk
bWktPmxvY2spOworfQorCitzdGF0aWMgdm9pZCBoZG1pNV9icmlkZ2VfZW5hYmxlKHN0cnVjdCBk
cm1fYnJpZGdlICpicmlkZ2UsCisJCQkJc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQor
eworCXN0cnVjdCBvbWFwX2hkbWkgKmhkbWkgPSBkcm1fYnJpZGdlX3RvX2hkbWkoYnJpZGdlKTsK
KwlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZTsKKwlzdHJ1Y3QgZHJtX2Nv
bm5lY3RvciAqY29ubmVjdG9yOworCXN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsK
Kwl1bnNpZ25lZCBsb25nIGZsYWdzOworCWludCByZXQ7CisKKwkvKgorCSAqIE5vbmUgb2YgdGhl
c2Ugc2hvdWxkIGZhaWwsIGFzIHRoZSBicmlkZ2UgY2FuJ3QgYmUgZW5hYmxlZCB3aXRob3V0IGEK
KwkgKiB2YWxpZCBDUlRDIHRvIGNvbm5lY3RvciBwYXRoIHdpdGggZnVsbHkgcG9wdWxhdGVkIG5l
dyBzdGF0ZXMuCisJICovCisJY29ubmVjdG9yID0gZHJtX2F0b21pY19nZXRfbmV3X2Nvbm5lY3Rv
cl9mb3JfZW5jb2RlcihzdGF0ZSwKKwkJCQkJCQkgICAgIGJyaWRnZS0+ZW5jb2Rlcik7CisJaWYg
KFdBUk5fT04oIWNvbm5lY3RvcikpCisJCXJldHVybjsKKwljb25uX3N0YXRlID0gZHJtX2F0b21p
Y19nZXRfbmV3X2Nvbm5lY3Rvcl9zdGF0ZShzdGF0ZSwgY29ubmVjdG9yKTsKKwlpZiAoV0FSTl9P
TighY29ubl9zdGF0ZSkpCisJCXJldHVybjsKKwljcnRjX3N0YXRlID0gZHJtX2F0b21pY19nZXRf
bmV3X2NydGNfc3RhdGUoc3RhdGUsIGNvbm5fc3RhdGUtPmNydGMpOworCWlmIChXQVJOX09OKCFj
cnRjX3N0YXRlKSkKKwkJcmV0dXJuOworCisJaGRtaS0+Y2ZnLmhkbWlfZHZpX21vZGUgPSBjb25u
ZWN0b3ItPmRpc3BsYXlfaW5mby5pc19oZG1pCisJCQkJPyBIRE1JX0hETUkgOiBIRE1JX0RWSTsK
KworCWlmIChjb25uZWN0b3ItPmRpc3BsYXlfaW5mby5pc19oZG1pKSB7CisJCWNvbnN0IHN0cnVj
dCBkcm1fZGlzcGxheV9tb2RlICptb2RlOworCQlzdHJ1Y3QgaGRtaV9hdmlfaW5mb2ZyYW1lIGF2
aTsKKworCQltb2RlID0gJmNydGNfc3RhdGUtPmFkanVzdGVkX21vZGU7CisJCXJldCA9IGRybV9o
ZG1pX2F2aV9pbmZvZnJhbWVfZnJvbV9kaXNwbGF5X21vZGUoJmF2aSwgY29ubmVjdG9yLAorCQkJ
CQkJCSAgICAgICBtb2RlKTsKKwkJaWYgKHJldCA9PSAwKQorCQkJaGRtaS0+Y2ZnLmluZm9mcmFt
ZSA9IGF2aTsKKwl9CisKKwltdXRleF9sb2NrKCZoZG1pLT5sb2NrKTsKKworCXJldCA9IGhkbWlf
cG93ZXJfb25fZnVsbChoZG1pKTsKKwlpZiAocmV0KSB7CisJCURTU0VSUigiZmFpbGVkIHRvIHBv
d2VyIG9uIGRldmljZVxuIik7CisJCWdvdG8gZG9uZTsKKwl9CisKKwlpZiAoaGRtaS0+YXVkaW9f
Y29uZmlndXJlZCkgeworCQlyZXQgPSBoZG1pNV9hdWRpb19jb25maWcoJmhkbWktPmNvcmUsICZo
ZG1pLT53cCwKKwkJCQkJICZoZG1pLT5hdWRpb19jb25maWcsCisJCQkJCSBoZG1pLT5jZmcudm0u
cGl4ZWxjbG9jayk7CisJCWlmIChyZXQpIHsKKwkJCURTU0VSUigiRXJyb3IgcmVzdG9yaW5nIGF1
ZGlvIGNvbmZpZ3VyYXRpb246ICVkIiwgcmV0KTsKKwkJCWhkbWktPmF1ZGlvX2Fib3J0X2NiKCZo
ZG1pLT5wZGV2LT5kZXYpOworCQkJaGRtaS0+YXVkaW9fY29uZmlndXJlZCA9IGZhbHNlOworCQl9
CisJfQorCisJc3Bpbl9sb2NrX2lycXNhdmUoJmhkbWktPmF1ZGlvX3BsYXlpbmdfbG9jaywgZmxh
Z3MpOworCWlmIChoZG1pLT5hdWRpb19jb25maWd1cmVkICYmIGhkbWktPmF1ZGlvX3BsYXlpbmcp
CisJCWhkbWlfc3RhcnRfYXVkaW9fc3RyZWFtKGhkbWkpOworCWhkbWktPmRpc3BsYXlfZW5hYmxl
ZCA9IHRydWU7CisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmaGRtaS0+YXVkaW9fcGxheWluZ19s
b2NrLCBmbGFncyk7CisKK2RvbmU6CisJbXV0ZXhfdW5sb2NrKCZoZG1pLT5sb2NrKTsKK30KKwor
c3RhdGljIHZvaWQgaGRtaTVfYnJpZGdlX2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSwKKwkJCQkgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQoreworCXN0cnVjdCBvbWFw
X2hkbWkgKmhkbWkgPSBkcm1fYnJpZGdlX3RvX2hkbWkoYnJpZGdlKTsKKwl1bnNpZ25lZCBsb25n
IGZsYWdzOworCisJbXV0ZXhfbG9jaygmaGRtaS0+bG9jayk7CisKKwlzcGluX2xvY2tfaXJxc2F2
ZSgmaGRtaS0+YXVkaW9fcGxheWluZ19sb2NrLCBmbGFncyk7CisJaGRtaV9zdG9wX2F1ZGlvX3N0
cmVhbShoZG1pKTsKKwloZG1pLT5kaXNwbGF5X2VuYWJsZWQgPSBmYWxzZTsKKwlzcGluX3VubG9j
a19pcnFyZXN0b3JlKCZoZG1pLT5hdWRpb19wbGF5aW5nX2xvY2ssIGZsYWdzKTsKKworCWhkbWlf
cG93ZXJfb2ZmX2Z1bGwoaGRtaSk7CisKKwltdXRleF91bmxvY2soJmhkbWktPmxvY2spOworfQor
CiBzdGF0aWMgc3RydWN0IGVkaWQgKmhkbWk1X2JyaWRnZV9yZWFkX2VkaWQoc3RydWN0IG9tYXBf
aGRtaSAqaGRtaSwKIAkJCQkJICAgc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKIHsK
QEAgLTU0MCw2ICs1NDUsOSBAQCBzdGF0aWMgc3RydWN0IGVkaWQgKmhkbWk1X2JyaWRnZV9nZXRf
ZWRpZChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCiBzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9icmlkZ2VfZnVuY3MgaGRtaTVfYnJpZGdlX2Z1bmNzID0gewogCS5hdHRhY2ggPSBoZG1pNV9i
cmlkZ2VfYXR0YWNoLAorCS5tb2RlX3NldCA9IGhkbWk1X2JyaWRnZV9tb2RlX3NldCwKKwkuYXRv
bWljX2VuYWJsZSA9IGhkbWk1X2JyaWRnZV9lbmFibGUsCisJLmF0b21pY19kaXNhYmxlID0gaGRt
aTVfYnJpZGdlX2Rpc2FibGUsCiAJLmdldF9lZGlkID0gaGRtaTVfYnJpZGdlX2dldF9lZGlkLAog
fTsKIAotLSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hhcnQKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
