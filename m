Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0FD9F293A8
	for <lists+dri-devel@lfdr.de>; Fri, 24 May 2019 10:55:17 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 406C06E0CB;
	Fri, 24 May 2019 08:54:29 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x541.google.com (mail-ed1-x541.google.com
 [IPv6:2a00:1450:4864:20::541])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 23A4F6E0B7
 for <dri-devel@lists.freedesktop.org>; Fri, 24 May 2019 08:54:26 +0000 (UTC)
Received: by mail-ed1-x541.google.com with SMTP id w37so13335441edw.4
 for <dri-devel@lists.freedesktop.org>; Fri, 24 May 2019 01:54:26 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=MsMckDsaIqnD4KrjektoSrtdcXW7brAmEcL0yv2AeQE=;
 b=U/S+HrXv+bUGYtqJ/6ooGSw5yJN45NRdehVph1KtdiYE6+WzywfgKS3CcMtF8l8qXk
 pyzhE0ruG11okzSsxxNqTo/4dqLs0oYcQNuksJtVxOIgsUwAt9/SXeMaTZHPzfrkWAOt
 peRWWeARslWhUD3bcBIbY7ZaFynlf9evOvLadNi+gizEmWgg/tTF4k5OIohDaa3tWoiG
 ttSFbuf1M5MH99meNbFwWmtoWiuKXVpFucDljMLiwI3V2XPp9qIPXPzahBgjZ2jx5Zx+
 YsfPUr3SuJADONae8mq8ChYP+pyMuaUWnQTAZa1y2r2bCb0UsKHVtn+71rwtkwpvOZ38
 Qdyg==
X-Gm-Message-State: APjAAAUzxBHQzdxxeq/Knmvbb19JYd/cbgrFLzKbrYCTrc9ekWcdx6TA
 I0PPPd6lnBGhhsRWb2f3Fr7tzg==
X-Google-Smtp-Source: APXvYqyMxU7qUVQTCqbtG6PoQ2XI/ssDC7It8sHeod2GyIPK9cJ5Cir1tkf908701unGKapk8KiBCA==
X-Received: by 2002:a50:8866:: with SMTP id c35mr1110008edc.35.1558688064330; 
 Fri, 24 May 2019 01:54:24 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id 96sm567082edq.68.2019.05.24.01.54.23
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Fri, 24 May 2019 01:54:23 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: LKML <linux-kernel@vger.kernel.org>
Subject: [PATCH 17/33] fbcon: call fbcon_fb_bind directly
Date: Fri, 24 May 2019 10:53:38 +0200
Message-Id: <20190524085354.27411-18-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190524085354.27411-1-daniel.vetter@ffwll.ch>
References: <20190524085354.27411-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=MsMckDsaIqnD4KrjektoSrtdcXW7brAmEcL0yv2AeQE=;
 b=Yk9Dy+6XzvOQQSvaeMbCRIim+Torm0BC9ukCEKBvDpi8mVFuZtyPzIE7yMbST9dfUZ
 5WuyhhHquzqq9HX+MNeOrXXPVPVzjKcA91QUixVAO8T+rsOyyzhiSzAkD6kvRG+/CFTx
 xeh3uh2vWoEBahW5Dw5zvP1fNZ2SCTKZ8NA1o=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-fbdev@vger.kernel.org,
 Sergey Senozhatsky <sergey.senozhatsky@gmail.com>,
 Kees Cook <keescook@chromium.org>,
 Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 =?UTF-8?q?Micha=C5=82=20Miros=C5=82aw?= <mirq-linux@rere.qmqm.pl>,
 Yisheng Xie <ysxie@foxmail.com>, Hans de Goede <hdegoede@redhat.com>,
 Mikulas Patocka <mpatocka@redhat.com>, Thomas Zimmermann <tzimmermann@suse.de>,
 Daniel Vetter <daniel.vetter@intel.com>, Peter Rosin <peda@axentia.se>,
 Konstantin Khorenko <khorenko@virtuozzo.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWxzbyByZW1vdmUgdGhlIGVycm9yIHJldHVybiB2YWx1ZS4gVGhhdCdzIGFsbCBlcnJvcnMgZm9y
IGVpdGhlcgpkcml2ZXIgYnVncyAodHJ5aW5nIHRvIHVuYmluZCBzb21ldGhpbmcgdGhhdCBpc24n
dCBib3VuZCksIG9yIGVycm9ycwpvZiB0aGUgbmV3IGRyaXZlciB0aGF0IHdpbGwgdGFrZSBvdmVy
LgoKVGhlcmUncyBub3RoaW5nIHRoZSBvdXRnb2luZyBkcml2ZXIgY2FuIGRvIGFib3V0IHRoaXMg
YW55d2F5LCBzbwpzd2l0Y2ggb3ZlciB0byB2b2lkLgoKU2lnbmVkLW9mZi1ieTogRGFuaWVsIFZl
dHRlciA8ZGFuaWVsLnZldHRlckBpbnRlbC5jb20+CkNjOiBCYXJ0bG9taWVqIFpvbG5pZXJraWV3
aWN6IDxiLnpvbG5pZXJraWVAc2Ftc3VuZy5jb20+CkNjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWwu
dmV0dGVyQGZmd2xsLmNoPgpDYzogSGFucyBkZSBHb2VkZSA8aGRlZ29lZGVAcmVkaGF0LmNvbT4K
Q2M6IFNlcmdleSBTZW5vemhhdHNreSA8c2VyZ2V5LnNlbm96aGF0c2t5QGdtYWlsLmNvbT4KQ2M6
IFBldGVyIFJvc2luIDxwZWRhQGF4ZW50aWEuc2U+CkNjOiBLZWVzIENvb2sgPGtlZXNjb29rQGNo
cm9taXVtLm9yZz4KQ2M6IEtvbnN0YW50aW4gS2hvcmVua28gPGtob3JlbmtvQHZpcnR1b3p6by5j
b20+CkNjOiBZaXNoZW5nIFhpZSA8eXN4aWVAZm94bWFpbC5jb20+CkNjOiAiTWljaGHFgiBNaXJv
c8WCYXciIDxtaXJxLWxpbnV4QHJlcmUucW1xbS5wbD4KQ2M6IE1pa3VsYXMgUGF0b2NrYSA8bXBh
dG9ja2FAcmVkaGF0LmNvbT4KQ2M6IFRob21hcyBaaW1tZXJtYW5uIDx0emltbWVybWFubkBzdXNl
LmRlPgpDYzogbGludXgtZmJkZXZAdmdlci5rZXJuZWwub3JnCi0tLQogZHJpdmVycy92aWRlby9m
YmRldi9jb3JlL2ZiY29uLmMgfCAyNCArKysrKysrLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMv
dmlkZW8vZmJkZXYvY29yZS9mYm1lbS5jIHwgIDcgKystLS0tLQogaW5jbHVkZS9saW51eC9mYi5o
ICAgICAgICAgICAgICAgfCAgMiAtLQogaW5jbHVkZS9saW51eC9mYmNvbi5oICAgICAgICAgICAg
fCAgMiArKwogNCBmaWxlcyBjaGFuZ2VkLCAxMSBpbnNlcnRpb25zKCspLCAyNCBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJjb24uYyBiL2RyaXZl
cnMvdmlkZW8vZmJkZXYvY29yZS9mYmNvbi5jCmluZGV4IGMzMzUzZGIzNWFkYy4uZjExNGI0Yzg4
Nzk2IDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJjb24uYworKysgYi9k
cml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJjb24uYwpAQCAtMzA0Niw3ICszMDQ2LDcgQEAgc3Rh
dGljIGludCBmYmNvbl9tb2RlX2RlbGV0ZWQoc3RydWN0IGZiX2luZm8gKmluZm8sCiB9CiAKICNp
ZmRlZiBDT05GSUdfVlRfSFdfQ09OU09MRV9CSU5ESU5HCi1zdGF0aWMgaW50IGZiY29uX3VuYmlu
ZCh2b2lkKQorc3RhdGljIHZvaWQgZmJjb25fdW5iaW5kKHZvaWQpCiB7CiAJaW50IHJldDsKIApA
QCAtMzA1NSwyNSArMzA1NSwyMSBAQCBzdGF0aWMgaW50IGZiY29uX3VuYmluZCh2b2lkKQogCiAJ
aWYgKCFyZXQpCiAJCWZiY29uX2hhc19jb25zb2xlX2JpbmQgPSAwOwotCi0JcmV0dXJuIHJldDsK
IH0KICNlbHNlCi1zdGF0aWMgaW5saW5lIGludCBmYmNvbl91bmJpbmQodm9pZCkKLXsKLQlyZXR1
cm4gLUVJTlZBTDsKLX0KK3N0YXRpYyBpbmxpbmUgdm9pZCBmYmNvbl91bmJpbmQodm9pZCkge30K
ICNlbmRpZiAvKiBDT05GSUdfVlRfSFdfQ09OU09MRV9CSU5ESU5HICovCiAKIC8qIGNhbGxlZCB3
aXRoIGNvbnNvbGVfbG9jayBoZWxkICovCi1zdGF0aWMgaW50IGZiY29uX2ZiX3VuYmluZChpbnQg
aWR4KQordm9pZCBmYmNvbl9mYl91bmJpbmQoc3RydWN0IGZiX2luZm8gKmluZm8pCiB7CiAJaW50
IGksIG5ld19pZHggPSAtMSwgcmV0ID0gMDsKKwlpbnQgaWR4ID0gaW5mby0+bm9kZTsKIAogCVdB
Uk5fQ09OU09MRV9VTkxPQ0tFRCgpOwogCiAJaWYgKCFmYmNvbl9oYXNfY29uc29sZV9iaW5kKQot
CQlyZXR1cm4gMDsKKwkJcmV0dXJuOwogCiAJZm9yIChpID0gZmlyc3RfZmJfdmM7IGkgPD0gbGFz
dF9mYl92YzsgaSsrKSB7CiAJCWlmIChjb24yZmJfbWFwW2ldICE9IGlkeCAmJgpAQCAtMzEwNiwx
NSArMzEwMiwxMyBAQCBzdGF0aWMgaW50IGZiY29uX2ZiX3VuYmluZChpbnQgaWR4KQogCQkJCQkJ
CQkgICAgIGlkeCwgMCk7CiAJCQkJCWlmIChyZXQpIHsKIAkJCQkJCWNvbjJmYl9tYXBbaV0gPSBp
ZHg7Ci0JCQkJCQlyZXR1cm4gcmV0OworCQkJCQkJcmV0dXJuOwogCQkJCQl9CiAJCQkJfQogCQkJ
fQogCQl9Ci0JCXJldCA9IGZiY29uX3VuYmluZCgpOworCQlmYmNvbl91bmJpbmQoKTsKIAl9Ci0K
LQlyZXR1cm4gcmV0OwogfQogCiAvKiBjYWxsZWQgd2l0aCBjb25zb2xlX2xvY2sgaGVsZCAqLwpA
QCAtMzM1MiwxMCArMzM0Niw2IEBAIHN0YXRpYyBpbnQgZmJjb25fZXZlbnRfbm90aWZ5KHN0cnVj
dCBub3RpZmllcl9ibG9jayAqc2VsZiwKIAkJbW9kZSA9IGV2ZW50LT5kYXRhOwogCQlyZXQgPSBm
YmNvbl9tb2RlX2RlbGV0ZWQoaW5mbywgbW9kZSk7CiAJCWJyZWFrOwotCWNhc2UgRkJfRVZFTlRf
RkJfVU5CSU5EOgotCQlpZHggPSBpbmZvLT5ub2RlOwotCQlyZXQgPSBmYmNvbl9mYl91bmJpbmQo
aWR4KTsKLQkJYnJlYWs7CiAJY2FzZSBGQl9FVkVOVF9TRVRfQ09OU09MRV9NQVA6CiAJCS8qIGNh
bGxlZCB3aXRoIGNvbnNvbGUgbG9jayBoZWxkICovCiAJCWNvbjJmYiA9IGV2ZW50LT5kYXRhOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9mYmRldi9jb3JlL2ZibWVtLmMgYi9kcml2ZXJzL3Zp
ZGVvL2ZiZGV2L2NvcmUvZmJtZW0uYwppbmRleCBkNzM3NjIzMjRjYTIuLmYzZmMyZTViMTkzYyAx
MDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9mYmRldi9jb3JlL2ZibWVtLmMKKysrIGIvZHJpdmVy
cy92aWRlby9mYmRldi9jb3JlL2ZibWVtLmMKQEAgLTE3MTYsOCArMTcxNiw2IEBAIHN0YXRpYyBp
bnQgZG9fcmVnaXN0ZXJfZnJhbWVidWZmZXIoc3RydWN0IGZiX2luZm8gKmZiX2luZm8pCiAKIHN0
YXRpYyBpbnQgdW5iaW5kX2NvbnNvbGUoc3RydWN0IGZiX2luZm8gKmZiX2luZm8pCiB7Ci0Jc3Ry
dWN0IGZiX2V2ZW50IGV2ZW50OwotCWludCByZXQ7CiAJaW50IGkgPSBmYl9pbmZvLT5ub2RlOwog
CiAJaWYgKGkgPCAwIHx8IGkgPj0gRkJfTUFYIHx8IHJlZ2lzdGVyZWRfZmJbaV0gIT0gZmJfaW5m
bykKQEAgLTE3MjUsMTIgKzE3MjMsMTEgQEAgc3RhdGljIGludCB1bmJpbmRfY29uc29sZShzdHJ1
Y3QgZmJfaW5mbyAqZmJfaW5mbykKIAogCWNvbnNvbGVfbG9jaygpOwogCWxvY2tfZmJfaW5mbyhm
Yl9pbmZvKTsKLQlldmVudC5pbmZvID0gZmJfaW5mbzsKLQlyZXQgPSBmYl9ub3RpZmllcl9jYWxs
X2NoYWluKEZCX0VWRU5UX0ZCX1VOQklORCwgJmV2ZW50KTsKKwlmYmNvbl9mYl91bmJpbmQoZmJf
aW5mbyk7CiAJdW5sb2NrX2ZiX2luZm8oZmJfaW5mbyk7CiAJY29uc29sZV91bmxvY2soKTsKIAot
CXJldHVybiByZXQ7CisJcmV0dXJuIDA7CiB9CiAKIHN0YXRpYyBpbnQgX191bmxpbmtfZnJhbWVi
dWZmZXIoc3RydWN0IGZiX2luZm8gKmZiX2luZm8pOwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51
eC9mYi5oIGIvaW5jbHVkZS9saW51eC9mYi5oCmluZGV4IGFhOGYxODE2MzE1MS4uYjZjZTA0MWQ5
ZTEzIDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4L2ZiLmgKKysrIGIvaW5jbHVkZS9saW51eC9m
Yi5oCkBAIC0xNTgsOCArMTU4LDYgQEAgc3RydWN0IGZiX2N1cnNvcl91c2VyIHsKICNkZWZpbmUg
RkJfRVZFTlRfQ09OQkxBTksgICAgICAgICAgICAgICAweDBDCiAvKiAgICAgIEdldCBkcmF3aW5n
IHJlcXVpcmVtZW50cyAgICAgICAgKi8KICNkZWZpbmUgRkJfRVZFTlRfR0VUX1JFUSAgICAgICAg
ICAgICAgICAweDBECi0vKiAgICAgIFVuYmluZCBmcm9tIHRoZSBjb25zb2xlIGlmIHBvc3NpYmxl
ICovCi0jZGVmaW5lIEZCX0VWRU5UX0ZCX1VOQklORCAgICAgICAgICAgICAgMHgwRQogLyogICAg
ICBDT05TT0xFLVNQRUNJRklDOiByZW1hcCBhbGwgY29uc29sZXMgdG8gbmV3IGZiIC0gZm9yIHZn
YV9zd2l0Y2hlcm9vICovCiAjZGVmaW5lIEZCX0VWRU5UX1JFTUFQX0FMTF9DT05TT0xFICAgICAg
MHgwRgogLyogICAgICBBIGhhcmR3YXJlIGRpc3BsYXkgYmxhbmsgZWFybHkgY2hhbmdlIG9jY3Vy
cmVkICovCmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2ZiY29uLmggYi9pbmNsdWRlL2xpbnV4
L2ZiY29uLmgKaW5kZXggOTRhNzFlOWUxMjU3Li4zOGQ0NGZkYjZkMTQgMTAwNjQ0Ci0tLSBhL2lu
Y2x1ZGUvbGludXgvZmJjb24uaAorKysgYi9pbmNsdWRlL2xpbnV4L2ZiY29uLmgKQEAgLTYsMTEg
KzYsMTMgQEAgdm9pZCBfX2luaXQgZmJfY29uc29sZV9pbml0KHZvaWQpOwogdm9pZCBfX2V4aXQg
ZmJfY29uc29sZV9leGl0KHZvaWQpOwogaW50IGZiY29uX2ZiX3JlZ2lzdGVyZWQoc3RydWN0IGZi
X2luZm8gKmluZm8pOwogdm9pZCBmYmNvbl9mYl91bnJlZ2lzdGVyZWQoc3RydWN0IGZiX2luZm8g
KmluZm8pOwordm9pZCBmYmNvbl9mYl91bmJpbmQoc3RydWN0IGZiX2luZm8gKmluZm8pOwogI2Vs
c2UKIHN0YXRpYyBpbmxpbmUgdm9pZCBmYl9jb25zb2xlX2luaXQodm9pZCkge30KIHN0YXRpYyBp
bmxpbmUgdm9pZCBmYl9jb25zb2xlX2V4aXQodm9pZCkge30KIHN0YXRpYyBpbmxpbmUgaW50IGZi
Y29uX2ZiX3JlZ2lzdGVyZWQoc3RydWN0IGZiX2luZm8gKmluZm8pIHsgcmV0dXJuIDA7IH0KIHN0
YXRpYyBpbmxpbmUgdm9pZCBmYmNvbl9mYl91bnJlZ2lzdGVyZWQoc3RydWN0IGZiX2luZm8gKmlu
Zm8pIHt9CitzdGF0aWMgaW5saW5lIHZvaWQgZmJjb25fZmJfdW5iaW5kKHN0cnVjdCBmYl9pbmZv
ICppbmZvKSB7fQogI2VuZGlmCiAKICNlbmRpZiAvKiBfTElOVVhfRkJDT05fSCAqLwotLSAKMi4y
MC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmkt
ZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
