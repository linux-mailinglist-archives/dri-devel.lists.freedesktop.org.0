Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 06517974C7
	for <lists+dri-devel@lfdr.de>; Wed, 21 Aug 2019 10:23:52 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C12DA6E93E;
	Wed, 21 Aug 2019 08:23:49 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x543.google.com (mail-ed1-x543.google.com
 [IPv6:2a00:1450:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E901F6E93E
 for <dri-devel@lists.freedesktop.org>; Wed, 21 Aug 2019 08:23:47 +0000 (UTC)
Received: by mail-ed1-x543.google.com with SMTP id m44so1925404edd.9
 for <dri-devel@lists.freedesktop.org>; Wed, 21 Aug 2019 01:23:47 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:date:from:to:cc:subject:message-id
 :references:mime-version:content-disposition:in-reply-to:user-agent;
 bh=IAAr/Mk+hYc417rHmUy+IzZcDmTa01Qw9kGMrDwCPhI=;
 b=qLk0NbFe04evLc7qpa77QBFDBWRBjjA7F5Tbi/klYLFM11ZlFS8D2C/c6m5WjGrhvY
 RcgPsqObWqiWGz5DcPPJ87wfPyldybdD1+IFh+SL5INFU+WHWrrgz3/Q6zJ0o65YcQU0
 6cXDGrsZ7BZEu8o9dom4VXHQiqFz8hkhSXdnnpSuKlGKWU0D6qbm919OmvjWJIXa9zJX
 oMyIYS1py7b50Cm6qpfpT7/wbI2nLBNOe57syn8HoaDyGpppudSuOo2RzGKmgThWsuv9
 w9yJax2IWEjv7skR8KoNdt5daQdwfRxY5uVbgSgXoqv/Sa326Dx2XHf8OYNx8Kk7mycN
 yCCQ==
X-Gm-Message-State: APjAAAWKJOVZo33Fz3eMPtfylzuzwLc+yC4hzfThTVQfaLCqDtKmHgbv
 8+XE+xlY06hGI9LOR3WXiCZ1gw==
X-Google-Smtp-Source: APXvYqy+IvP62yAxjXaE9DrwY+Ingwrzb73Z9nZq5v1JsZiJs2/RLNpBmS+87GKfchdQLA6WdO1ksQ==
X-Received: by 2002:a50:f78b:: with SMTP id h11mr6387419edn.93.1566375826442; 
 Wed, 21 Aug 2019 01:23:46 -0700 (PDT)
Received: from phenom.ffwll.local (212-51-149-96.fiber7.init7.net.
 [212.51.149.96])
 by smtp.gmail.com with ESMTPSA id g14sm3029548ejh.45.2019.08.21.01.23.44
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 21 Aug 2019 01:23:45 -0700 (PDT)
Date: Wed, 21 Aug 2019 10:23:43 +0200
From: Daniel Vetter <daniel@ffwll.ch>
To: Rob Herring <robh@kernel.org>
Subject: Re: [PATCH 2/4] drm/shmem: Use mutex_trylock in drm_gem_shmem_purge
Message-ID: <20190821082343.GJ11147@phenom.ffwll.local>
References: <20190819161204.3106-1-robh@kernel.org>
 <20190819161204.3106-3-robh@kernel.org>
 <20190820090543.GE11147@phenom.ffwll.local>
 <CAL_JsqL5JsFbQAe1DJ1AbtYjZjVv1++ooH4hxEhiQUzw3MVjXA@mail.gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <CAL_JsqL5JsFbQAe1DJ1AbtYjZjVv1++ooH4hxEhiQUzw3MVjXA@mail.gmail.com>
X-Operating-System: Linux phenom 5.2.0-2-amd64 
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=sender:date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=IAAr/Mk+hYc417rHmUy+IzZcDmTa01Qw9kGMrDwCPhI=;
 b=SYgb5KfejXzFGexY6sURu0ikqdE9TQQ7eR+/YDotCBReC3Smp8XcFSYJISHrfBsUxR
 C1ll0qr9OW2HAdDxH98HBvObpyZnRfXy+7Jv24Swe6G/lwGEleYcTD588bLAqbflqhus
 pmwhJK5y0qSoBdKNy4f0cQ7SwZ282tOpabd0I=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Tomeu Vizoso <tomeu.vizoso@collabora.com>, David Airlie <airlied@linux.ie>,
 Sean Paul <sean@poorly.run>, dri-devel <dri-devel@lists.freedesktop.org>,
 Steven Price <steven.price@arm.com>,
 Boris Brezillon <boris.brezillon@collabora.com>,
 Robin Murphy <robin.murphy@arm.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBBdWcgMjAsIDIwMTkgYXQgMDc6MzU6NDdBTSAtMDUwMCwgUm9iIEhlcnJpbmcgd3Jv
dGU6Cj4gT24gVHVlLCBBdWcgMjAsIDIwMTkgYXQgNDowNSBBTSBEYW5pZWwgVmV0dGVyIDxkYW5p
ZWxAZmZ3bGwuY2g+IHdyb3RlOgo+ID4KPiA+IE9uIE1vbiwgQXVnIDE5LCAyMDE5IGF0IDExOjEy
OjAyQU0gLTA1MDAsIFJvYiBIZXJyaW5nIHdyb3RlOgo+ID4gPiBMb2NrZGVwIHJlcG9ydHMgYSBj
aXJjdWxhciBsb2NraW5nIGRlcGVuZGVuY3kgd2l0aCBwYWdlc19sb2NrIHRha2VuIGluCj4gPiA+
IHRoZSBzaHJpbmtlciBjYWxsYmFjay4gVGhlIGRlYWRsb2NrIGNhbid0IGFjdHVhbGx5IGhhcHBl
biB3aXRoIGN1cnJlbnQKPiA+ID4gdXNlcnMgYXQgbGVhc3QgYXMgYSBCTyB3aWxsIG5ldmVyIGJl
IHB1cmdlYWJsZSB3aGVuIHBhZ2VzX2xvY2sgaXMgaGVsZC4KPiA+ID4gVG8gYmUgc2FmZSwgbGV0
J3MgdXNlIG11dGV4X3RyeWxvY2soKSBpbnN0ZWFkIGFuZCBiYWlsIGlmIGEgQk8gaXMgbG9ja2Vk
Cj4gPiA+IGFscmVhZHkuCj4gPiA+Cj4gPiA+IFdBUk5JTkc6IHBvc3NpYmxlIGNpcmN1bGFyIGxv
Y2tpbmcgZGVwZW5kZW5jeSBkZXRlY3RlZAo+ID4gPiA1LjMuMC1yYzErICMxMDAgVGFpbnRlZDog
RyAgICAgICAgICAgICBMCj4gPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gPiBrc3dhcGQwLzE3MSBpcyB0cnlpbmcgdG8gYWNxdWly
ZSBsb2NrOgo+ID4gPiAwMDAwMDAwMDliOTgyM2ZkICgmc2htZW0tPnBhZ2VzX2xvY2speysuKy59
LCBhdDogZHJtX2dlbV9zaG1lbV9wdXJnZSsweDIwLzB4NDAKPiA+ID4KPiA+ID4gYnV0IHRhc2sg
aXMgYWxyZWFkeSBob2xkaW5nIGxvY2s6Cj4gPiA+IDAwMDAwMDAwZjgyMzY5YjYgKGZzX3JlY2xh
aW0peysuKy59LCBhdDogX19mc19yZWNsYWltX2FjcXVpcmUrMHgwLzB4NDAKPiA+ID4KPiA+ID4g
d2hpY2ggbG9jayBhbHJlYWR5IGRlcGVuZHMgb24gdGhlIG5ldyBsb2NrLgo+ID4gPgo+ID4gPiB0
aGUgZXhpc3RpbmcgZGVwZW5kZW5jeSBjaGFpbiAoaW4gcmV2ZXJzZSBvcmRlcikgaXM6Cj4gPiA+
Cj4gPiA+IC0+ICMxIChmc19yZWNsYWltKXsrLisufToKPiA+ID4gICAgICAgIGZzX3JlY2xhaW1f
YWNxdWlyZS5wYXJ0LjE4KzB4MzQvMHg0MAo+ID4gPiAgICAgICAgZnNfcmVjbGFpbV9hY3F1aXJl
KzB4MjAvMHgyOAo+ID4gPiAgICAgICAgX19rbWFsbG9jX25vZGUrMHg2Yy8weDRjMAo+ID4gPiAg
ICAgICAga3ZtYWxsb2Nfbm9kZSsweDM4LzB4YTgKPiA+ID4gICAgICAgIGRybV9nZW1fZ2V0X3Bh
Z2VzKzB4ODAvMHgxZDAKPiA+ID4gICAgICAgIGRybV9nZW1fc2htZW1fZ2V0X3BhZ2VzKzB4NTgv
MHhhMAo+ID4gPiAgICAgICAgZHJtX2dlbV9zaG1lbV9nZXRfcGFnZXNfc2d0KzB4NDgvMHhkMAo+
ID4gPiAgICAgICAgcGFuZnJvc3RfbW11X21hcCsweDM4LzB4ZjggW3BhbmZyb3N0XQo+ID4gPiAg
ICAgICAgcGFuZnJvc3RfZ2VtX29wZW4rMHhjMC8weGU4IFtwYW5mcm9zdF0KPiA+ID4gICAgICAg
IGRybV9nZW1faGFuZGxlX2NyZWF0ZV90YWlsKzB4ZTgvMHgxOTgKPiA+ID4gICAgICAgIGRybV9n
ZW1faGFuZGxlX2NyZWF0ZSsweDNjLzB4NTAKPiA+ID4gICAgICAgIHBhbmZyb3N0X2dlbV9jcmVh
dGVfd2l0aF9oYW5kbGUrMHg3MC8weGEwIFtwYW5mcm9zdF0KPiA+ID4gICAgICAgIHBhbmZyb3N0
X2lvY3RsX2NyZWF0ZV9ibysweDQ4LzB4ODAgW3BhbmZyb3N0XQo+ID4gPiAgICAgICAgZHJtX2lv
Y3RsX2tlcm5lbCsweGI4LzB4MTEwCj4gPiA+ICAgICAgICBkcm1faW9jdGwrMHgyNDQvMHgzZjAK
PiA+ID4gICAgICAgIGRvX3Zmc19pb2N0bCsweGJjLzB4OTEwCj4gPiA+ICAgICAgICBrc3lzX2lv
Y3RsKzB4NzgvMHhhOAo+ID4gPiAgICAgICAgX19hcm02NF9zeXNfaW9jdGwrMHgxYy8weDI4Cj4g
PiA+ICAgICAgICBlbDBfc3ZjX2NvbW1vbi5jb25zdHByb3AuMCsweDkwLzB4MTY4Cj4gPiA+ICAg
ICAgICBlbDBfc3ZjX2hhbmRsZXIrMHgyOC8weDc4Cj4gPiA+ICAgICAgICBlbDBfc3ZjKzB4OC8w
eGMKPiA+ID4KPiA+ID4gLT4gIzAgKCZzaG1lbS0+cGFnZXNfbG9jayl7Ky4rLn06Cj4gPiA+ICAg
ICAgICBfX2xvY2tfYWNxdWlyZSsweGEyYy8weDFkNzAKPiA+ID4gICAgICAgIGxvY2tfYWNxdWly
ZSsweGRjLzB4MjI4Cj4gPiA+ICAgICAgICBfX211dGV4X2xvY2srMHg4Yy8weDgwMAo+ID4gPiAg
ICAgICAgbXV0ZXhfbG9ja19uZXN0ZWQrMHgxYy8weDI4Cj4gPiA+ICAgICAgICBkcm1fZ2VtX3No
bWVtX3B1cmdlKzB4MjAvMHg0MAo+ID4gPiAgICAgICAgcGFuZnJvc3RfZ2VtX3Nocmlua2VyX3Nj
YW4rMHhjMC8weDE4MCBbcGFuZnJvc3RdCj4gPiA+ICAgICAgICBkb19zaHJpbmtfc2xhYisweDIw
OC8weDUwMAo+ID4gPiAgICAgICAgc2hyaW5rX3NsYWIrMHgxMGMvMHgyYzAKPiA+ID4gICAgICAg
IHNocmlua19ub2RlKzB4MjhjLzB4NGQ4Cj4gPiA+ICAgICAgICBiYWxhbmNlX3BnZGF0KzB4MmM4
LzB4NTcwCj4gPiA+ICAgICAgICBrc3dhcGQrMHgyMmMvMHg2MzgKPiA+ID4gICAgICAgIGt0aHJl
YWQrMHgxMjgvMHgxMzAKPiA+ID4gICAgICAgIHJldF9mcm9tX2ZvcmsrMHgxMC8weDE4Cj4gPiA+
Cj4gPiA+IG90aGVyIGluZm8gdGhhdCBtaWdodCBoZWxwIHVzIGRlYnVnIHRoaXM6Cj4gPiA+Cj4g
PiA+ICBQb3NzaWJsZSB1bnNhZmUgbG9ja2luZyBzY2VuYXJpbzoKPiA+ID4KPiA+ID4gICAgICAg
IENQVTAgICAgICAgICAgICAgICAgICAgIENQVTEKPiA+ID4gICAgICAgIC0tLS0gICAgICAgICAg
ICAgICAgICAgIC0tLS0KPiA+ID4gICBsb2NrKGZzX3JlY2xhaW0pOwo+ID4gPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgbG9jaygmc2htZW0tPnBhZ2VzX2xvY2spOwo+ID4gPiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jayhmc19yZWNsYWltKTsKPiA+ID4gICBsb2Nr
KCZzaG1lbS0+cGFnZXNfbG9jayk7Cj4gPiA+Cj4gPiA+ICAqKiogREVBRExPQ0sgKioqCj4gPiA+
Cj4gPiA+IDMgbG9ja3MgaGVsZCBieSBrc3dhcGQwLzE3MToKPiA+ID4gICMwOiAwMDAwMDAwMGY4
MjM2OWI2IChmc19yZWNsYWltKXsrLisufSwgYXQ6IF9fZnNfcmVjbGFpbV9hY3F1aXJlKzB4MC8w
eDQwCj4gPiA+ICAjMTogMDAwMDAwMDBjZWIzNzgwOCAoc2hyaW5rZXJfcndzZW0peysrKyt9LCBh
dDogc2hyaW5rX3NsYWIrMHhiYy8weDJjMAo+ID4gPiAgIzI6IDAwMDAwMDAwZjMxZWZhODEgKCZw
ZmRldi0+c2hyaW5rZXJfbG9jayl7Ky4rLn0sIGF0OiBwYW5mcm9zdF9nZW1fc2hyaW5rZXJfc2Nh
bisweDM0LzB4MTgwIFtwYW5mcm9zdF0KPiA+ID4KPiA+ID4gRml4ZXM6IDE3YWNiOWYzNWVkNyAo
ImRybS9zaG1lbTogQWRkIG1hZHZpc2Ugc3RhdGUgYW5kIHB1cmdlIGhlbHBlcnMiKQo+ID4gPiBD
YzogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4K
PiA+ID4gQ2M6IE1heGltZSBSaXBhcmQgPG1heGltZS5yaXBhcmRAYm9vdGxpbi5jb20+Cj4gPiA+
IENjOiBTZWFuIFBhdWwgPHNlYW5AcG9vcmx5LnJ1bj4KPiA+ID4gQ2M6IERhdmlkIEFpcmxpZSA8
YWlybGllZEBsaW51eC5pZT4KPiA+ID4gQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZndsbC5j
aD4KPiA+ID4gU2lnbmVkLW9mZi1ieTogUm9iIEhlcnJpbmcgPHJvYmhAa2VybmVsLm9yZz4KPiA+
ID4gLS0tCj4gPiA+ICBkcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIuYyB8IDcg
KysrKystLQo+ID4gPiAgaW5jbHVkZS9kcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIuaCAgICAgfCAy
ICstCj4gPiA+ICAyIGZpbGVzIGNoYW5nZWQsIDYgaW5zZXJ0aW9ucygrKSwgMyBkZWxldGlvbnMo
LSkKPiA+ID4KPiA+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVt
X2hlbHBlci5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fc2htZW1faGVscGVyLmMKPiA+ID4g
aW5kZXggNTQyM2VjNTZiNTM1Li5mNTkxODcwNzY3MmYgMTAwNjQ0Cj4gPiA+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jCj4gPiA+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jCj4gPiA+IEBAIC00MTUsMTMgKzQxNSwxNiBAQCB2
b2lkIGRybV9nZW1fc2htZW1fcHVyZ2VfbG9ja2VkKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2Jq
KQo+ID4gPiAgfQo+ID4gPiAgRVhQT1JUX1NZTUJPTChkcm1fZ2VtX3NobWVtX3B1cmdlX2xvY2tl
ZCk7Cj4gPiA+Cj4gPiA+IC12b2lkIGRybV9nZW1fc2htZW1fcHVyZ2Uoc3RydWN0IGRybV9nZW1f
b2JqZWN0ICpvYmopCj4gPiA+ICtib29sIGRybV9nZW1fc2htZW1fcHVyZ2Uoc3RydWN0IGRybV9n
ZW1fb2JqZWN0ICpvYmopCj4gPiA+ICB7Cj4gPiA+ICAgICAgIHN0cnVjdCBkcm1fZ2VtX3NobWVt
X29iamVjdCAqc2htZW0gPSB0b19kcm1fZ2VtX3NobWVtX29iaihvYmopOwo+ID4gPgo+ID4gPiAt
ICAgICBtdXRleF9sb2NrKCZzaG1lbS0+cGFnZXNfbG9jayk7Cj4gPiA+ICsgICAgIGlmICghbXV0
ZXhfdHJ5bG9jaygmc2htZW0tPnBhZ2VzX2xvY2spKQo+ID4KPiA+IERpZCB5b3Ugc2VlIG15IHBp
bmcgYWJvdXQgY3V0dGluZyBhbGwgdGhlIGxvY2tpbmcgb3ZlciB0byBkbWFfcmVzdj8KPiAKPiBZ
ZXMsIGJ1dCB5b3UgZGlkbid0IHJlcGx5IHRvIFJvYiBDLiBhYm91dCBpdC4gSSBndWVzcyBJJ2xs
IGhhdmUgdG8gZ28KPiBmaWd1cmUgb3V0IGhvdyByZXNlcnZhdGlvbiBvYmplY3RzIHdvcmsuLi4K
Cm1zbSB3YXMgdGhlIGxhc3QgZHJpdmVyIHRoYXQgc3RpbGwgdXNlZCBzdHJ1Y3RfbXV0ZXguIEl0
J3MgYSBsb25nLXRlcm0KZGVhZC1lbmQsIGFuZCBJIHRoaW5rIHdpdGggYWxsIHRoZSBlZmZvcnQg
cmVjZW50bHkgdG8gY3JlYXRlIGhlbHBlcnMgZm9yCnJlbmRlcmluZyBkcml2ZXJzIChzaG1lbSwg
dnJhbSwgdHRtIHJlZmFjdG9yaW5nKSB3ZSBzaG91bGQgbWFrZSBhIHNvbGlkCmF0dGVtcHQgdG8g
Z2V0IGFsaWduZWQuIE9yIGRpZCB5b3UgbWVhbiB0aGF0IFJvYiBDbGFyayBoYWQgc29tZQpyZXBs
eS9xdWVzdGlvbnMgdGhhdCBJIGRpZG4nIHJlc3BvbmQgdG8gYmVjYXVzZSBpdCBmZWxsIHRocm91
Z2ggY3JhY2tzPwoKPiA+IFdvdWxkCj4gPiBhbGlnbiBzaG1lbSBoZWxwZXJzIHdpdGggdHRtIGEg
bG90IG1vcmUsIGZvciB0aGF0IGJyaWdodCBnbG9yaW91cyBmdXR1cmUKPiA+IHRhc3RlLiBTaG91
bGQgd2UgY2FwdHVyZSB0aGF0IGluIHNvbWUgdG9kby5yc3QgZW50cnk/Cj4gCj4gU3VyZS4KCkNo
ZWVycywgRGFuaWVsCi0tIApEYW5pZWwgVmV0dGVyClNvZnR3YXJlIEVuZ2luZWVyLCBJbnRlbCBD
b3Jwb3JhdGlvbgpodHRwOi8vYmxvZy5mZndsbC5jaApfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9kcmktZGV2ZWw=
