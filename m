Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A1B661E9E9F
	for <lists+dri-devel@lfdr.de>; Mon,  1 Jun 2020 08:52:50 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CC5EC6E14A;
	Mon,  1 Jun 2020 06:52:48 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lf1-x144.google.com (mail-lf1-x144.google.com
 [IPv6:2a00:1450:4864:20::144])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 87AEE6E14A
 for <dri-devel@lists.freedesktop.org>; Mon,  1 Jun 2020 06:52:47 +0000 (UTC)
Received: by mail-lf1-x144.google.com with SMTP id x22so3304038lfd.4
 for <dri-devel@lists.freedesktop.org>; Sun, 31 May 2020 23:52:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=sender:from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=WjyhXx/lEqOZWTi26IV1FNBZljIsRlbX7f2/Pg8bPak=;
 b=BXGN0Vclh8bt+Q54Yx/Mp00uTlxzlS/KGoxU/IHQ6H7NL/oykHjxzbwVnAKI3ky4ue
 X8gqdFtkMUB68lcVmYcOioZlLWnbbAMo5gOTgUEtYgW4RQOgZw0OvsW1l3Ov6f1UZJh9
 GRKjNMGZkMwCTAsKaEI5WgwnBEyYQH+/GRweU1/HksjgRKztl2AsuAr8Tq2E8hjKNtcc
 ObvmFPTJOKPiXOd15u6R4BCD9aMCHFmU4XLROgfri/+3iZ85GOPMoby6fk01pt6eyyxE
 tHkV4I0mtMS2BW3H+e2RLyYgNY+4oLP1yxBGtO6OAzOb9V3HOlRmdSRSlw2vTC38mS+2
 RlqQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:from:to:cc:subject:date:message-id
 :in-reply-to:references:mime-version:content-transfer-encoding;
 bh=WjyhXx/lEqOZWTi26IV1FNBZljIsRlbX7f2/Pg8bPak=;
 b=tkaNv6IGFwkgVaEFDLLfbKmWFfVRDN/lH/UZp4BdVnEpRkB8MDijJnCwdTCyb4cuDa
 Uf4huVO2nSxedpYubhrUhJFbMEtNtnsZnjOBLTWPRSsEoM3DQJMRcd4sncEQA0lYWKlL
 RV1XkbduefwpupooF2GRGH67+6NIIFt06d3GxcZ6Hui/IgCJOzyGofNdgneT/py9HQmc
 OaHYRshV/z113FW9+2UX8u+A63ISsxwgFi+Dpe53iPTZeUEaV4QmFq5WeBISneHQLrnv
 QSyyUD3OXPYfn1Qt3TzSIDupaHfupULy94YqwJHZ/cjQu3Xosyq91qMQG0OGy6oObWQv
 guNQ==
X-Gm-Message-State: AOAM533jynhPynAirrlTs2ogE8/n3wX/SZWj0suWECyG8rsTThiVvpAR
 v5O4ya+aaDUyXEa+jNcDD5YJJm+HBe0=
X-Google-Smtp-Source: ABdhPJzYzxMK+XuB5Xnj54j4sWqQJ7zyCFHD4iu0lWxBiwkDkBhhFC0YbeK85VLY4R8gmft0Um5J+w==
X-Received: by 2002:a19:c8e:: with SMTP id 136mr10308817lfm.72.1590994365045; 
 Sun, 31 May 2020 23:52:45 -0700 (PDT)
Received: from saturn.lan ([2a00:fd00:805f:db00:281d:a604:434c:a58d])
 by smtp.gmail.com with ESMTPSA id e13sm2540462ljl.117.2020.05.31.23.52.42
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Sun, 31 May 2020 23:52:44 -0700 (PDT)
From: Sam Ravnborg <sam@ravnborg.org>
To: dri-devel@lists.freedesktop.org, Jingoo Han <jingoohan1@gmail.com>,
 Lee Jones <lee.jones@linaro.org>,
 Daniel Thompson <daniel.thompson@linaro.org>
Subject: [PATCH v3 13/13] backlight: use backlight_is_blank() in all backlight
 drivers
Date: Mon,  1 Jun 2020 08:52:07 +0200
Message-Id: <20200601065207.492614-14-sam@ravnborg.org>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20200601065207.492614-1-sam@ravnborg.org>
References: <20200601065207.492614-1-sam@ravnborg.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-pwm@vger.kernel.org,
 Support Opensource <support.opensource@diasemi.com>,
 Michael Hennerich <michael.hennerich@analog.com>,
 Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 David Airlie <airlied@linux.ie>, Daniel Vetter <daniel.vetter@ffwll.ch>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Jonathan Corbet <corbet@lwn.net>,
 Emil Velikov <emil.l.velikov@gmail.com>,
 Bjorn Andersson <bjorn.andersson@linaro.org>,
 Peter Ujfalusi <peter.ujfalusi@ti.com>, Andy Gross <agross@kernel.org>,
 Thierry Reding <thierry.reding@gmail.com>,
 Thomas Zimmermann <tzimmermann@suse.de>, linux-arm-msm@vger.kernel.org,
 Uwe Kleine-Konig <u.kleine-koenig@pengutronix.de>,
 Sam Ravnborg <sam@ravnborg.org>, patches@opensource.cirrus.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UmVwbGFjZXMgdGhlIG9wZW4tY29kZWQgY2hlY2tzIG9mIHRoZSBzdGF0ZSBldGMuLAp3aXRoIHRo
ZSBiYWNrbGlnaHRfaXNfYmxhbmsoKSBoZWxwZXIuClRoaXMgaW5jcmVhc2VzIHJlYWRhYmlsaXR5
IG9mIHRoZSBjb2RlIGFuZCBhbGlnbgp0aGUgZnVuY3Rpb25hbGl0eSBhY3Jvc3MgdGhlIGRyaXZl
cnMuCgp2MzoKICAtIERyb3BwZWQgYXMzNzExX2JsLCBpdCB3aWxsIGJlIG1vZGlmaWVkIGluIGFu
b3RoZXIgcGF0Y2gKCnYyOgogIC0gRml4ZWQgc28gY2hhbmdlbG9nIGlzIHJlYWRhYmxlCgpTaWdu
ZWQtb2ZmLWJ5OiBTYW0gUmF2bmJvcmcgPHNhbUByYXZuYm9yZy5vcmc+ClJldmlld2VkLWJ5OiBE
YW5pZWwgVGhvbXBzb24gPGRhbmllbC50aG9tcHNvbkBsaW5hcm8ub3JnPgpDYzogTGVlIEpvbmVz
IDxsZWUuam9uZXNAbGluYXJvLm9yZz4KQ2M6IERhbmllbCBUaG9tcHNvbiA8ZGFuaWVsLnRob21w
c29uQGxpbmFyby5vcmc+CkNjOiBKaW5nb28gSGFuIDxqaW5nb29oYW4xQGdtYWlsLmNvbT4KQ2M6
IE1pY2hhZWwgSGVubmVyaWNoIDxtaWNoYWVsLmhlbm5lcmljaEBhbmFsb2cuY29tPgpDYzogU3Vw
cG9ydCBPcGVuc291cmNlIDxzdXBwb3J0Lm9wZW5zb3VyY2VAZGlhc2VtaS5jb20+CkNjOiBUaGll
cnJ5IFJlZGluZyA8dGhpZXJyeS5yZWRpbmdAZ21haWwuY29tPgpDYzogIlV3ZSBLbGVpbmUtS8O2
bmlnIiA8dS5rbGVpbmUta29lbmlnQHBlbmd1dHJvbml4LmRlPgpDYzogQW5keSBHcm9zcyA8YWdy
b3NzQGtlcm5lbC5vcmc+CkNjOiBCam9ybiBBbmRlcnNzb24gPGJqb3JuLmFuZGVyc3NvbkBsaW5h
cm8ub3JnPgpDYzogbGludXgtcHdtQHZnZXIua2VybmVsLm9yZwpDYzogbGludXgtYXJtLW1zbUB2
Z2VyLmtlcm5lbC5vcmcKQ2M6IHBhdGNoZXNAb3BlbnNvdXJjZS5jaXJydXMuY29tCi0tLQogZHJp
dmVycy92aWRlby9iYWNrbGlnaHQvODhwbTg2MHhfYmwuYyAgICB8ICA4ICstLS0tLS0tCiBkcml2
ZXJzL3ZpZGVvL2JhY2tsaWdodC9hZHA1NTIwX2JsLmMgICAgIHwgIDUgKy0tLS0KIGRyaXZlcnMv
dmlkZW8vYmFja2xpZ2h0L2FkcDg4NjBfYmwuYyAgICAgfCAgNSArLS0tLQogZHJpdmVycy92aWRl
by9iYWNrbGlnaHQvYWRwODg3MF9ibC5jICAgICB8ICA1ICstLS0tCiBkcml2ZXJzL3ZpZGVvL2Jh
Y2tsaWdodC9iZDYxMDcuYyAgICAgICAgIHwgIDQgKy0tLQogZHJpdmVycy92aWRlby9iYWNrbGln
aHQvY29yZ2lfbGNkLmMgICAgICB8ICA1ICstLS0tCiBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9j
cl9ibGxjZC5jICAgICAgIHwgMjIgKysrKysrKy0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy92aWRl
by9iYWNrbGlnaHQvZGE5MDN4X2JsLmMgICAgICB8ICA4ICstLS0tLS0tCiBkcml2ZXJzL3ZpZGVv
L2JhY2tsaWdodC9lcDkzeHhfYmwuYyAgICAgIHwgIDMgKy0tCiBkcml2ZXJzL3ZpZGVvL2JhY2ts
aWdodC9ncGlvX2JhY2tsaWdodC5jIHwgIDQgKy0tLQogZHJpdmVycy92aWRlby9iYWNrbGlnaHQv
aHA2ODBfYmwuYyAgICAgICB8ICA0ICstLS0KIGRyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2pvcm5h
ZGE3MjBfYmwuYyAgfCAgMiArLQogZHJpdmVycy92aWRlby9iYWNrbGlnaHQva2IzODg2X2JsLmMg
ICAgICB8ICA0ICstLS0KIGRyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xlZF9ibC5jICAgICAgICAg
fCAgNCArLS0tCiBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9sbTM1MzNfYmwuYyAgICAgIHwgIDQg
Ky0tLQogZHJpdmVycy92aWRlby9iYWNrbGlnaHQvbG9jb21vbGNkLmMgICAgICB8ICA0ICstLS0K
IGRyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2x2NTIwN2xwLmMgICAgICAgfCAgNCArLS0tCiBkcml2
ZXJzL3ZpZGVvL2JhY2tsaWdodC9tYXg4OTI1X2JsLmMgICAgIHwgIDggKy0tLS0tLS0KIGRyaXZl
cnMvdmlkZW8vYmFja2xpZ2h0L3B3bV9ibC5jICAgICAgICAgfCAgNCArLS0tCiBkcml2ZXJzL3Zp
ZGVvL2JhY2tsaWdodC9xY29tLXdsZWQuYyAgICAgIHwgIDQgKy0tLQogZHJpdmVycy92aWRlby9i
YWNrbGlnaHQvdHBzNjUyMTdfYmwuYyAgICB8ICA0ICstLS0KIGRyaXZlcnMvdmlkZW8vYmFja2xp
Z2h0L3dtODMxeF9ibC5jICAgICAgfCAgOCArLS0tLS0tLQogMjIgZmlsZXMgY2hhbmdlZCwgMjgg
aW5zZXJ0aW9ucygrKSwgOTUgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRl
by9iYWNrbGlnaHQvODhwbTg2MHhfYmwuYyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0Lzg4cG04
NjB4X2JsLmMKaW5kZXggMjBkOTZhNWFjMzg0Li4xNjJjODNhYjBmNWEgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvdmlkZW8vYmFja2xpZ2h0Lzg4cG04NjB4X2JsLmMKKysrIGIvZHJpdmVycy92aWRlby9i
YWNrbGlnaHQvODhwbTg2MHhfYmwuYwpAQCAtMTIzLDEzICsxMjMsNyBAQCBzdGF0aWMgaW50IHBt
ODYweF9iYWNrbGlnaHRfdXBkYXRlX3N0YXR1cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmwp
CiB7CiAJaW50IGJyaWdodG5lc3MgPSBibC0+cHJvcHMuYnJpZ2h0bmVzczsKIAotCWlmIChibC0+
cHJvcHMucG93ZXIgIT0gRkJfQkxBTktfVU5CTEFOSykKLQkJYnJpZ2h0bmVzcyA9IDA7Ci0KLQlp
ZiAoYmwtPnByb3BzLmZiX2JsYW5rICE9IEZCX0JMQU5LX1VOQkxBTkspCi0JCWJyaWdodG5lc3Mg
PSAwOwotCi0JaWYgKGJsLT5wcm9wcy5zdGF0ZSAmIEJMX0NPUkVfU1VTUEVOREVEKQorCWlmIChi
YWNrbGlnaHRfaXNfYmxhbmsoYmwpKQogCQlicmlnaHRuZXNzID0gMDsKIAogCXJldHVybiBwbTg2
MHhfYmFja2xpZ2h0X3NldChibCwgYnJpZ2h0bmVzcyk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL3Zp
ZGVvL2JhY2tsaWdodC9hZHA1NTIwX2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9hZHA1
NTIwX2JsLmMKaW5kZXggMGY2M2Y3NjcyM2E1Li5kODE3YjBkOTVjOWQgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvdmlkZW8vYmFja2xpZ2h0L2FkcDU1MjBfYmwuYworKysgYi9kcml2ZXJzL3ZpZGVvL2Jh
Y2tsaWdodC9hZHA1NTIwX2JsLmMKQEAgLTY3LDEwICs2Nyw3IEBAIHN0YXRpYyBpbnQgYWRwNTUy
MF9ibF91cGRhdGVfc3RhdHVzKHN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpibCkKIHsKIAlpbnQg
YnJpZ2h0bmVzcyA9IGJsLT5wcm9wcy5icmlnaHRuZXNzOwogCi0JaWYgKGJsLT5wcm9wcy5wb3dl
ciAhPSBGQl9CTEFOS19VTkJMQU5LKQotCQlicmlnaHRuZXNzID0gMDsKLQotCWlmIChibC0+cHJv
cHMuZmJfYmxhbmsgIT0gRkJfQkxBTktfVU5CTEFOSykKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5r
KGJsKSkKIAkJYnJpZ2h0bmVzcyA9IDA7CiAKIAlyZXR1cm4gYWRwNTUyMF9ibF9zZXQoYmwsIGJy
aWdodG5lc3MpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYWRwODg2MF9i
bC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYWRwODg2MF9ibC5jCmluZGV4IDE5OTY4MTA0
ZmM0Ny4uYTBjZTJhMzcwMWZhIDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9h
ZHA4ODYwX2JsLmMKKysrIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYWRwODg2MF9ibC5jCkBA
IC0zNjMsMTAgKzM2Myw3IEBAIHN0YXRpYyBpbnQgYWRwODg2MF9ibF91cGRhdGVfc3RhdHVzKHN0
cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpibCkKIHsKIAlpbnQgYnJpZ2h0bmVzcyA9IGJsLT5wcm9w
cy5icmlnaHRuZXNzOwogCi0JaWYgKGJsLT5wcm9wcy5wb3dlciAhPSBGQl9CTEFOS19VTkJMQU5L
KQotCQlicmlnaHRuZXNzID0gMDsKLQotCWlmIChibC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxB
TktfVU5CTEFOSykKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJsKSkKIAkJYnJpZ2h0bmVzcyA9
IDA7CiAKIAlyZXR1cm4gYWRwODg2MF9ibF9zZXQoYmwsIGJyaWdodG5lc3MpOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYWRwODg3MF9ibC5jIGIvZHJpdmVycy92aWRlby9i
YWNrbGlnaHQvYWRwODg3MF9ibC5jCmluZGV4IDRjMDAzMjAxMGNmZS4uYWU0MjY5ZmRiMTg5IDEw
MDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9hZHA4ODcwX2JsLmMKKysrIGIvZHJp
dmVycy92aWRlby9iYWNrbGlnaHQvYWRwODg3MF9ibC5jCkBAIC00MDEsMTAgKzQwMSw3IEBAIHN0
YXRpYyBpbnQgYWRwODg3MF9ibF91cGRhdGVfc3RhdHVzKHN0cnVjdCBiYWNrbGlnaHRfZGV2aWNl
ICpibCkKIHsKIAlpbnQgYnJpZ2h0bmVzcyA9IGJsLT5wcm9wcy5icmlnaHRuZXNzOwogCi0JaWYg
KGJsLT5wcm9wcy5wb3dlciAhPSBGQl9CTEFOS19VTkJMQU5LKQotCQlicmlnaHRuZXNzID0gMDsK
LQotCWlmIChibC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktfVU5CTEFOSykKKwlpZiAoYmFj
a2xpZ2h0X2lzX2JsYW5rKGJsKSkKIAkJYnJpZ2h0bmVzcyA9IDA7CiAKIAlyZXR1cm4gYWRwODg3
MF9ibF9zZXQoYmwsIGJyaWdodG5lc3MpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNr
bGlnaHQvYmQ2MTA3LmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9iZDYxMDcuYwppbmRleCBk
NWQ1ZmI0NTdlNzguLmY2YTVjMWRiYTNiYyAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9iYWNr
bGlnaHQvYmQ2MTA3LmMKKysrIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYmQ2MTA3LmMKQEAg
LTg0LDkgKzg0LDcgQEAgc3RhdGljIGludCBiZDYxMDdfYmFja2xpZ2h0X3VwZGF0ZV9zdGF0dXMo
c3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJhY2tsaWdodCkKIAlzdHJ1Y3QgYmQ2MTA3ICpiZCA9
IGJsX2dldF9kYXRhKGJhY2tsaWdodCk7CiAJaW50IGJyaWdodG5lc3MgPSBiYWNrbGlnaHQtPnBy
b3BzLmJyaWdodG5lc3M7CiAKLQlpZiAoYmFja2xpZ2h0LT5wcm9wcy5wb3dlciAhPSBGQl9CTEFO
S19VTkJMQU5LIHx8Ci0JICAgIGJhY2tsaWdodC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktf
VU5CTEFOSyB8fAotCSAgICBiYWNrbGlnaHQtPnByb3BzLnN0YXRlICYgKEJMX0NPUkVfU1VTUEVO
REVEIHwgQkxfQ09SRV9GQkJMQU5LKSkKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJhY2tsaWdo
dCkpCiAJCWJyaWdodG5lc3MgPSAwOwogCiAJaWYgKGJyaWdodG5lc3MpIHsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2NvcmdpX2xjZC5jIGIvZHJpdmVycy92aWRlby9iYWNr
bGlnaHQvY29yZ2lfbGNkLmMKaW5kZXggMjVlZjBjYmQ3NTgzLi5jOWFkZjRlMjYzNTUgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2NvcmdpX2xjZC5jCisrKyBiL2RyaXZlcnMv
dmlkZW8vYmFja2xpZ2h0L2NvcmdpX2xjZC5jCkBAIC00MjIsMTAgKzQyMiw3IEBAIHN0YXRpYyBp
bnQgY29yZ2lfYmxfdXBkYXRlX3N0YXR1cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmQpCiAJ
c3RydWN0IGNvcmdpX2xjZCAqbGNkID0gYmxfZ2V0X2RhdGEoYmQpOwogCWludCBpbnRlbnNpdHkg
PSBiZC0+cHJvcHMuYnJpZ2h0bmVzczsKIAotCWlmIChiZC0+cHJvcHMucG93ZXIgIT0gRkJfQkxB
TktfVU5CTEFOSykKLQkJaW50ZW5zaXR5ID0gMDsKLQotCWlmIChiZC0+cHJvcHMuZmJfYmxhbmsg
IT0gRkJfQkxBTktfVU5CTEFOSykKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJkKSkKIAkJaW50
ZW5zaXR5ID0gMDsKIAogCWlmIChjb3JnaWJsX2ZsYWdzICYgQ09SR0lCTF9TVVNQRU5ERUQpCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9jcl9ibGxjZC5jIGIvZHJpdmVycy92
aWRlby9iYWNrbGlnaHQvY3JfYmxsY2QuYwppbmRleCA0NjI0YjdiN2M2YTYuLmQ1YWI3Njc1ZjU1
YyAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvY3JfYmxsY2QuYworKysgYi9k
cml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9jcl9ibGxjZC5jCkBAIC01OSwyNiArNTksMTggQEAgc3Ry
dWN0IGNyX3BhbmVsIHsKIAogc3RhdGljIGludCBjcl9iYWNrbGlnaHRfc2V0X2ludGVuc2l0eShz
dHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmQpCiB7Ci0JaW50IGludGVuc2l0eSA9IGJkLT5wcm9w
cy5icmlnaHRuZXNzOwogCXUzMiBhZGRyID0gZ3Bpb19iYXIgKyBDUlZNTF9QQU5FTF9QT1JUOwog
CXUzMiBjdXIgPSBpbmwoYWRkcik7CiAKLQlpZiAoYmQtPnByb3BzLnBvd2VyID09IEZCX0JMQU5L
X1VOQkxBTkspCi0JCWludGVuc2l0eSA9IEZCX0JMQU5LX1VOQkxBTks7Ci0JaWYgKGJkLT5wcm9w
cy5mYl9ibGFuayA9PSBGQl9CTEFOS19VTkJMQU5LKQotCQlpbnRlbnNpdHkgPSBGQl9CTEFOS19V
TkJMQU5LOwotCWlmIChiZC0+cHJvcHMucG93ZXIgPT0gRkJfQkxBTktfUE9XRVJET1dOKQotCQlp
bnRlbnNpdHkgPSBGQl9CTEFOS19QT1dFUkRPV047Ci0JaWYgKGJkLT5wcm9wcy5mYl9ibGFuayA9
PSBGQl9CTEFOS19QT1dFUkRPV04pCi0JCWludGVuc2l0eSA9IEZCX0JMQU5LX1BPV0VSRE9XTjsK
LQotCWlmIChpbnRlbnNpdHkgPT0gRkJfQkxBTktfVU5CTEFOSykgeyAvKiBGVUxMIE9OICovCi0J
CWN1ciAmPSB+Q1JWTUxfQkFDS0xJR0hUX09GRjsKLQkJb3V0bChjdXIsIGFkZHIpOwotCX0gZWxz
ZSBpZiAoaW50ZW5zaXR5ID09IEZCX0JMQU5LX1BPV0VSRE9XTikgeyAvKiBPRkYgKi8KKwlpZiAo
YmFja2xpZ2h0X2lzX2JsYW5rKGJkKSkgeworCQkvKiBPRkYgKi8KIAkJY3VyIHw9IENSVk1MX0JB
Q0tMSUdIVF9PRkY7CiAJCW91dGwoY3VyLCBhZGRyKTsKLQl9IC8qIGFueXRoaW5nIGVsc2UsIGRv
bid0IGJvdGhlciAqLworCX0gZWxzZSB7CisJCS8qIEZVTEwgT04gKi8KKwkJY3VyICY9IH5DUlZN
TF9CQUNLTElHSFRfT0ZGOworCQlvdXRsKGN1ciwgYWRkcik7CisJfQogCiAJcmV0dXJuIDA7CiB9
CmRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9kYTkwM3hfYmwuYyBiL2RyaXZl
cnMvdmlkZW8vYmFja2xpZ2h0L2RhOTAzeF9ibC5jCmluZGV4IDYyNTQwZTRiZGVkYi4uY2EzNTFi
YWRmZGNmIDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9kYTkwM3hfYmwuYwor
KysgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9kYTkwM3hfYmwuYwpAQCAtNzksMTMgKzc5LDcg
QEAgc3RhdGljIGludCBkYTkwM3hfYmFja2xpZ2h0X3VwZGF0ZV9zdGF0dXMoc3RydWN0IGJhY2ts
aWdodF9kZXZpY2UgKmJsKQogewogCWludCBicmlnaHRuZXNzID0gYmwtPnByb3BzLmJyaWdodG5l
c3M7CiAKLQlpZiAoYmwtPnByb3BzLnBvd2VyICE9IEZCX0JMQU5LX1VOQkxBTkspCi0JCWJyaWdo
dG5lc3MgPSAwOwotCi0JaWYgKGJsLT5wcm9wcy5mYl9ibGFuayAhPSBGQl9CTEFOS19VTkJMQU5L
KQotCQlicmlnaHRuZXNzID0gMDsKLQotCWlmIChibC0+cHJvcHMuc3RhdGUgJiBCTF9DT1JFX1NV
U1BFTkRFRCkKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJsKSkKIAkJYnJpZ2h0bmVzcyA9IDA7
CiAKIAlyZXR1cm4gZGE5MDN4X2JhY2tsaWdodF9zZXQoYmwsIGJyaWdodG5lc3MpOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvZXA5M3h4X2JsLmMgYi9kcml2ZXJzL3ZpZGVv
L2JhY2tsaWdodC9lcDkzeHhfYmwuYwppbmRleCA0MTQ5ZTBiMmY4M2MuLjQ5MTE4NWRmMTQxMSAx
MDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvZXA5M3h4X2JsLmMKKysrIGIvZHJp
dmVycy92aWRlby9iYWNrbGlnaHQvZXA5M3h4X2JsLmMKQEAgLTM4LDggKzM4LDcgQEAgc3RhdGlj
IGludCBlcDkzeHhibF91cGRhdGVfc3RhdHVzKHN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpibCkK
IHsKIAlpbnQgYnJpZ2h0bmVzcyA9IGJsLT5wcm9wcy5icmlnaHRuZXNzOwogCi0JaWYgKGJsLT5w
cm9wcy5wb3dlciAhPSBGQl9CTEFOS19VTkJMQU5LIHx8Ci0JICAgIGJsLT5wcm9wcy5mYl9ibGFu
ayAhPSBGQl9CTEFOS19VTkJMQU5LKQorCWlmIChiYWNrbGlnaHRfaXNfYmxhbmsoYmwpKQogCQli
cmlnaHRuZXNzID0gMDsKIAogCXJldHVybiBlcDkzeHhibF9zZXQoYmwsIGJyaWdodG5lc3MpOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvZ3Bpb19iYWNrbGlnaHQuYyBiL2Ry
aXZlcnMvdmlkZW8vYmFja2xpZ2h0L2dwaW9fYmFja2xpZ2h0LmMKaW5kZXggNzU0MDlkZGZiYTNl
Li45NGI2NWU0ZDJhYTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2dwaW9f
YmFja2xpZ2h0LmMKKysrIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvZ3Bpb19iYWNrbGlnaHQu
YwpAQCAtMjUsOSArMjUsNyBAQCBzdGF0aWMgaW50IGdwaW9fYmFja2xpZ2h0X2dldF9uZXh0X2Jy
aWdodG5lc3Moc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJsKQogewogCWludCBicmlnaHRuZXNz
ID0gYmwtPnByb3BzLmJyaWdodG5lc3M7CiAKLQlpZiAoYmwtPnByb3BzLnBvd2VyICE9IEZCX0JM
QU5LX1VOQkxBTksgfHwKLQkgICAgYmwtPnByb3BzLmZiX2JsYW5rICE9IEZCX0JMQU5LX1VOQkxB
TksgfHwKLQkgICAgYmwtPnByb3BzLnN0YXRlICYgKEJMX0NPUkVfU1VTUEVOREVEIHwgQkxfQ09S
RV9GQkJMQU5LKSkKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJsKSkKIAkJYnJpZ2h0bmVzcyA9
IDA7CiAKIAlyZXR1cm4gYnJpZ2h0bmVzczsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFj
a2xpZ2h0L2hwNjgwX2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9ocDY4MF9ibC5jCmlu
ZGV4IDhlYTQyYjhkOWJjOC4uMDFkODA1Y2E4NDE1IDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVv
L2JhY2tsaWdodC9ocDY4MF9ibC5jCisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2hwNjgw
X2JsLmMKQEAgLTM1LDkgKzM1LDcgQEAgc3RhdGljIHZvaWQgaHA2ODBibF9zZW5kX2ludGVuc2l0
eShzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmQpCiAJdTE2IHY7CiAJaW50IGludGVuc2l0eSA9
IGJkLT5wcm9wcy5icmlnaHRuZXNzOwogCi0JaWYgKGJkLT5wcm9wcy5wb3dlciAhPSBGQl9CTEFO
S19VTkJMQU5LKQotCQlpbnRlbnNpdHkgPSAwOwotCWlmIChiZC0+cHJvcHMuZmJfYmxhbmsgIT0g
RkJfQkxBTktfVU5CTEFOSykKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJkKSkKIAkJaW50ZW5z
aXR5ID0gMDsKIAlpZiAoaHA2ODBibF9zdXNwZW5kZWQpCiAJCWludGVuc2l0eSA9IDA7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9qb3JuYWRhNzIwX2JsLmMgYi9kcml2ZXJz
L3ZpZGVvL2JhY2tsaWdodC9qb3JuYWRhNzIwX2JsLmMKaW5kZXggZjAzODVmOWNmOWRhLi45OTZm
N2JhM2IzNzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2pvcm5hZGE3MjBf
YmwuYworKysgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9qb3JuYWRhNzIwX2JsLmMKQEAgLTU0
LDcgKzU0LDcgQEAgc3RhdGljIGludCBqb3JuYWRhX2JsX3VwZGF0ZV9zdGF0dXMoc3RydWN0IGJh
Y2tsaWdodF9kZXZpY2UgKmJkKQogCWpvcm5hZGFfc3NwX3N0YXJ0KCk7CiAKIAkvKiBJZiBiYWNr
bGlnaHQgaXMgb2ZmIHRoZW4gcmVhbGx5IHR1cm4gaXQgb2ZmICovCi0JaWYgKChiZC0+cHJvcHMu
cG93ZXIgIT0gRkJfQkxBTktfVU5CTEFOSykgfHwgKGJkLT5wcm9wcy5mYl9ibGFuayAhPSBGQl9C
TEFOS19VTkJMQU5LKSkgeworCWlmIChiYWNrbGlnaHRfaXNfYmxhbmsoYmQpKSB7CiAJCXJldCA9
IGpvcm5hZGFfc3NwX2J5dGUoQlJJR0hUTkVTU09GRik7CiAJCWlmIChyZXQgIT0gVFhEVU1NWSkg
ewogCQkJZGV2X2luZm8oJmJkLT5kZXYsICJicmlnaHRuZXNzIG9mZiB0aW1lb3V0XG4iKTsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2tiMzg4Nl9ibC5jIGIvZHJpdmVycy92
aWRlby9iYWNrbGlnaHQva2IzODg2X2JsLmMKaW5kZXggMWRmZTEzYzE4OTI1Li5hMGZkNWQzZDgy
ZjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2tiMzg4Nl9ibC5jCisrKyBi
L2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2tiMzg4Nl9ibC5jCkBAIC04OSw5ICs4OSw3IEBAIHN0
YXRpYyBpbnQga2IzODg2Ymxfc2VuZF9pbnRlbnNpdHkoc3RydWN0IGJhY2tsaWdodF9kZXZpY2Ug
KmJkKQogewogCWludCBpbnRlbnNpdHkgPSBiZC0+cHJvcHMuYnJpZ2h0bmVzczsKIAotCWlmIChi
ZC0+cHJvcHMucG93ZXIgIT0gRkJfQkxBTktfVU5CTEFOSykKLQkJaW50ZW5zaXR5ID0gMDsKLQlp
ZiAoYmQtPnByb3BzLmZiX2JsYW5rICE9IEZCX0JMQU5LX1VOQkxBTkspCisJaWYgKGJhY2tsaWdo
dF9pc19ibGFuayhiZCkpCiAJCWludGVuc2l0eSA9IDA7CiAJaWYgKGtiMzg4NmJsX2ZsYWdzICYg
S0IzODg2QkxfU1VTUEVOREVEKQogCQlpbnRlbnNpdHkgPSAwOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy92aWRlby9iYWNrbGlnaHQvbGVkX2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9sZWRf
YmwuYwppbmRleCAzZjY2NTQ5OTk3YzguLmM2NTVkZGQ5OWNmYiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy92aWRlby9iYWNrbGlnaHQvbGVkX2JsLmMKKysrIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQv
bGVkX2JsLmMKQEAgLTU2LDkgKzU2LDcgQEAgc3RhdGljIGludCBsZWRfYmxfdXBkYXRlX3N0YXR1
cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmwpCiAJc3RydWN0IGxlZF9ibF9kYXRhICpwcml2
ID0gYmxfZ2V0X2RhdGEoYmwpOwogCWludCBicmlnaHRuZXNzID0gYmwtPnByb3BzLmJyaWdodG5l
c3M7CiAKLQlpZiAoYmwtPnByb3BzLnBvd2VyICE9IEZCX0JMQU5LX1VOQkxBTksgfHwKLQkgICAg
YmwtPnByb3BzLmZiX2JsYW5rICE9IEZCX0JMQU5LX1VOQkxBTksgfHwKLQkgICAgYmwtPnByb3Bz
LnN0YXRlICYgQkxfQ09SRV9GQkJMQU5LKQorCWlmIChiYWNrbGlnaHRfaXNfYmxhbmsoYmwpKQog
CQlicmlnaHRuZXNzID0gMDsKIAogCWlmIChicmlnaHRuZXNzID4gMCkKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xtMzUzM19ibC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGln
aHQvbG0zNTMzX2JsLmMKaW5kZXggZWUwOWQxYmQwMmI5Li40NzYxNDZiNjJjNGUgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xtMzUzM19ibC5jCisrKyBiL2RyaXZlcnMvdmlk
ZW8vYmFja2xpZ2h0L2xtMzUzM19ibC5jCkBAIC00MSw5ICs0MSw3IEBAIHN0YXRpYyBpbnQgbG0z
NTMzX2JsX3VwZGF0ZV9zdGF0dXMoc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJkKQogCXN0cnVj
dCBsbTM1MzNfYmwgKmJsID0gYmxfZ2V0X2RhdGEoYmQpOwogCWludCBicmlnaHRuZXNzID0gYmQt
PnByb3BzLmJyaWdodG5lc3M7CiAKLQlpZiAoYmQtPnByb3BzLnBvd2VyICE9IEZCX0JMQU5LX1VO
QkxBTkspCi0JCWJyaWdodG5lc3MgPSAwOwotCWlmIChiZC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJf
QkxBTktfVU5CTEFOSykKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJkKSkKIAkJYnJpZ2h0bmVz
cyA9IDA7CiAKIAlyZXR1cm4gbG0zNTMzX2N0cmxiYW5rX3NldF9icmlnaHRuZXNzKCZibC0+Y2Is
ICh1OClicmlnaHRuZXNzKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xv
Y29tb2xjZC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvbG9jb21vbGNkLmMKaW5kZXggY2Rj
MDJlMDRmODlkLi44MDY0Y2FkOGQ2ODMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xp
Z2h0L2xvY29tb2xjZC5jCisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xvY29tb2xjZC5j
CkBAIC0xMTMsOSArMTEzLDcgQEAgc3RhdGljIGludCBsb2NvbW9sY2Rfc2V0X2ludGVuc2l0eShz
dHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmQpCiB7CiAJaW50IGludGVuc2l0eSA9IGJkLT5wcm9w
cy5icmlnaHRuZXNzOwogCi0JaWYgKGJkLT5wcm9wcy5wb3dlciAhPSBGQl9CTEFOS19VTkJMQU5L
KQotCQlpbnRlbnNpdHkgPSAwOwotCWlmIChiZC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktf
VU5CTEFOSykKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJkKSkKIAkJaW50ZW5zaXR5ID0gMDsK
IAlpZiAobG9jb21vbGNkX2ZsYWdzICYgTE9DT01PTENEX1NVU1BFTkRFRCkKIAkJaW50ZW5zaXR5
ID0gMDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2x2NTIwN2xwLmMgYi9k
cml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9sdjUyMDdscC5jCmluZGV4IGM2YWQ3M2E3ODRlMi4uZWY4
YWE5ODAzNTc3IDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9sdjUyMDdscC5j
CisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2x2NTIwN2xwLmMKQEAgLTQ4LDkgKzQ4LDcg
QEAgc3RhdGljIGludCBsdjUyMDdscF9iYWNrbGlnaHRfdXBkYXRlX3N0YXR1cyhzdHJ1Y3QgYmFj
a2xpZ2h0X2RldmljZSAqYmFja2xpZ2h0KQogCXN0cnVjdCBsdjUyMDdscCAqbHYgPSBibF9nZXRf
ZGF0YShiYWNrbGlnaHQpOwogCWludCBicmlnaHRuZXNzID0gYmFja2xpZ2h0LT5wcm9wcy5icmln
aHRuZXNzOwogCi0JaWYgKGJhY2tsaWdodC0+cHJvcHMucG93ZXIgIT0gRkJfQkxBTktfVU5CTEFO
SyB8fAotCSAgICBiYWNrbGlnaHQtPnByb3BzLmZiX2JsYW5rICE9IEZCX0JMQU5LX1VOQkxBTksg
fHwKLQkgICAgYmFja2xpZ2h0LT5wcm9wcy5zdGF0ZSAmIChCTF9DT1JFX1NVU1BFTkRFRCB8IEJM
X0NPUkVfRkJCTEFOSykpCisJaWYgKGJhY2tsaWdodF9pc19ibGFuayhiYWNrbGlnaHQpKQogCQli
cmlnaHRuZXNzID0gMDsKIAogCWlmIChicmlnaHRuZXNzKSB7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L3ZpZGVvL2JhY2tsaWdodC9tYXg4OTI1X2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9t
YXg4OTI1X2JsLmMKaW5kZXggOTdjYzI2MGZmOWQxLi5iOGFmMmM2NDA3ZDMgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L21heDg5MjVfYmwuYworKysgYi9kcml2ZXJzL3ZpZGVv
L2JhY2tsaWdodC9tYXg4OTI1X2JsLmMKQEAgLTY2LDEzICs2Niw3IEBAIHN0YXRpYyBpbnQgbWF4
ODkyNV9iYWNrbGlnaHRfdXBkYXRlX3N0YXR1cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmwp
CiB7CiAJaW50IGJyaWdodG5lc3MgPSBibC0+cHJvcHMuYnJpZ2h0bmVzczsKIAotCWlmIChibC0+
cHJvcHMucG93ZXIgIT0gRkJfQkxBTktfVU5CTEFOSykKLQkJYnJpZ2h0bmVzcyA9IDA7Ci0KLQlp
ZiAoYmwtPnByb3BzLmZiX2JsYW5rICE9IEZCX0JMQU5LX1VOQkxBTkspCi0JCWJyaWdodG5lc3Mg
PSAwOwotCi0JaWYgKGJsLT5wcm9wcy5zdGF0ZSAmIEJMX0NPUkVfU1VTUEVOREVEKQorCWlmIChi
YWNrbGlnaHRfaXNfYmxhbmsoYmwpKQogCQlicmlnaHRuZXNzID0gMDsKIAogCXJldHVybiBtYXg4
OTI1X2JhY2tsaWdodF9zZXQoYmwsIGJyaWdodG5lc3MpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy92
aWRlby9iYWNrbGlnaHQvcHdtX2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9wd21fYmwu
YwppbmRleCA4MmI4ZDc1OTQ3MDEuLjdkMGZmY2QzN2YwNyAxMDA2NDQKLS0tIGEvZHJpdmVycy92
aWRlby9iYWNrbGlnaHQvcHdtX2JsLmMKKysrIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvcHdt
X2JsLmMKQEAgLTExMSw5ICsxMTEsNyBAQCBzdGF0aWMgaW50IHB3bV9iYWNrbGlnaHRfdXBkYXRl
X3N0YXR1cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmwpCiAJaW50IGJyaWdodG5lc3MgPSBi
bC0+cHJvcHMuYnJpZ2h0bmVzczsKIAlzdHJ1Y3QgcHdtX3N0YXRlIHN0YXRlOwogCi0JaWYgKGJs
LT5wcm9wcy5wb3dlciAhPSBGQl9CTEFOS19VTkJMQU5LIHx8Ci0JICAgIGJsLT5wcm9wcy5mYl9i
bGFuayAhPSBGQl9CTEFOS19VTkJMQU5LIHx8Ci0JICAgIGJsLT5wcm9wcy5zdGF0ZSAmIEJMX0NP
UkVfRkJCTEFOSykKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJsKSkKIAkJYnJpZ2h0bmVzcyA9
IDA7CiAKIAlpZiAocGItPm5vdGlmeSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xp
Z2h0L3Fjb20td2xlZC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvcWNvbS13bGVkLmMKaW5k
ZXggM2QyNzZiMzBhNzhjLi45NjAwZjVkNThlY2UgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8v
YmFja2xpZ2h0L3Fjb20td2xlZC5jCisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L3Fjb20t
d2xlZC5jCkBAIC0yNjEsOSArMjYxLDcgQEAgc3RhdGljIGludCB3bGVkX3VwZGF0ZV9zdGF0dXMo
c3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJsKQogCXUxNiBicmlnaHRuZXNzID0gYmwtPnByb3Bz
LmJyaWdodG5lc3M7CiAJaW50IHJjID0gMDsKIAotCWlmIChibC0+cHJvcHMucG93ZXIgIT0gRkJf
QkxBTktfVU5CTEFOSyB8fAotCSAgICBibC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktfVU5C
TEFOSyB8fAotCSAgICBibC0+cHJvcHMuc3RhdGUgJiBCTF9DT1JFX0ZCQkxBTkspCisJaWYgKGJh
Y2tsaWdodF9pc19ibGFuayhibCkpCiAJCWJyaWdodG5lc3MgPSAwOwogCiAJbXV0ZXhfbG9jaygm
d2xlZC0+bG9jayk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC90cHM2NTIx
N19ibC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvdHBzNjUyMTdfYmwuYwppbmRleCA3NjJl
M2ZlZWQwOTcuLjEwNDFlNWU2MmVlMyAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9iYWNrbGln
aHQvdHBzNjUyMTdfYmwuYworKysgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC90cHM2NTIxN19i
bC5jCkBAIC04Miw5ICs4Miw3IEBAIHN0YXRpYyBpbnQgdHBzNjUyMTdfYmxfdXBkYXRlX3N0YXR1
cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmwpCiAJaWYgKGJsLT5wcm9wcy5zdGF0ZSAmIEJM
X0NPUkVfU1VTUEVOREVEKQogCQlicmlnaHRuZXNzID0gMDsKIAotCWlmICgoYmwtPnByb3BzLnBv
d2VyICE9IEZCX0JMQU5LX1VOQkxBTkspIHx8Ci0JCShibC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJf
QkxBTktfVU5CTEFOSykpCi0JCS8qIGZyYW1lYnVmZmVyIGluIGxvdyBwb3dlciBtb2RlIG9yIGJs
YW5raW5nIGFjdGl2ZSAqLworCWlmIChiYWNrbGlnaHRfaXNfYmxhbmsoYmwpKQogCQlicmlnaHRu
ZXNzID0gMDsKIAogCWlmIChicmlnaHRuZXNzID4gMCkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy92
aWRlby9iYWNrbGlnaHQvd204MzF4X2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC93bTgz
MXhfYmwuYwppbmRleCBlNTU5NzdkNTRjMTUuLmRjMmFiNmM4YjdmOSAxMDA2NDQKLS0tIGEvZHJp
dmVycy92aWRlby9iYWNrbGlnaHQvd204MzF4X2JsLmMKKysrIGIvZHJpdmVycy92aWRlby9iYWNr
bGlnaHQvd204MzF4X2JsLmMKQEAgLTkzLDEzICs5Myw3IEBAIHN0YXRpYyBpbnQgd204MzF4X2Jh
Y2tsaWdodF91cGRhdGVfc3RhdHVzKHN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpibCkKIHsKIAlp
bnQgYnJpZ2h0bmVzcyA9IGJsLT5wcm9wcy5icmlnaHRuZXNzOwogCi0JaWYgKGJsLT5wcm9wcy5w
b3dlciAhPSBGQl9CTEFOS19VTkJMQU5LKQotCQlicmlnaHRuZXNzID0gMDsKLQotCWlmIChibC0+
cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktfVU5CTEFOSykKLQkJYnJpZ2h0bmVzcyA9IDA7Ci0K
LQlpZiAoYmwtPnByb3BzLnN0YXRlICYgQkxfQ09SRV9TVVNQRU5ERUQpCisJaWYgKGJhY2tsaWdo
dF9pc19ibGFuayhibCkpCiAJCWJyaWdodG5lc3MgPSAwOwogCiAJcmV0dXJuIHdtODMxeF9iYWNr
bGlnaHRfc2V0KGJsLCBicmlnaHRuZXNzKTsKLS0gCjIuMjUuMQoKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmkt
ZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
