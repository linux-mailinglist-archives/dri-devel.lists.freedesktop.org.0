Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C62747FFA1
	for <lists+dri-devel@lfdr.de>; Fri,  2 Aug 2019 19:30:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5A7A46EF25;
	Fri,  2 Aug 2019 17:29:58 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from metis.ext.pengutronix.de (metis.ext.pengutronix.de
 [IPv6:2001:67c:670:201:290:27ff:fe1d:cc33])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A69EA6EF22
 for <dri-devel@lists.freedesktop.org>; Fri,  2 Aug 2019 17:29:55 +0000 (UTC)
Received: from dude02.hi.pengutronix.de ([2001:67c:670:100:1d::28]
 helo=dude02.pengutronix.de.)
 by metis.ext.pengutronix.de with esmtp (Exim 4.92)
 (envelope-from <l.stach@pengutronix.de>)
 id 1htbNJ-0005sQ-VA; Fri, 02 Aug 2019 19:29:54 +0200
From: Lucas Stach <l.stach@pengutronix.de>
To: etnaviv@lists.freedesktop.org
Subject: [PATCH 2/3] drm/etnaviv: allow to request specific virtual address
 for gem mapping
Date: Fri,  2 Aug 2019 19:29:52 +0200
Message-Id: <20190802172953.4586-3-l.stach@pengutronix.de>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190802172953.4586-1-l.stach@pengutronix.de>
References: <20190802172953.4586-1-l.stach@pengutronix.de>
MIME-Version: 1.0
X-SA-Exim-Connect-IP: 2001:67c:670:100:1d::28
X-SA-Exim-Mail-From: l.stach@pengutronix.de
X-SA-Exim-Scanned: No (on metis.ext.pengutronix.de);
 SAEximRunCond expanded to false
X-PTX-Original-Recipient: dri-devel@lists.freedesktop.org
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: patchwork-lst@pengutronix.de, kernel@pengutronix.de,
 dri-devel@lists.freedesktop.org, Russell King <linux+etnaviv@armlinux.org.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWxsb3cgdGhlIG1hcHBpbmcgY29kZSB0byByZXF1ZXN0IGEgc3BlY2lmaWMgdmlydHVhbCBhZGRy
ZXNzIGZvciB0aGUgZ2VtCm1hcHBpbmcuIElmIHRoZSB2aXJ0dWFsIGFkZHJlc3MgaXMgemVybyB3
ZSBmYWxsIGJhY2sgdG8gdGhlIG9sZCBtb2RlIG9mCmFsbG9jYXRpbmcgYSB2aXJ0dWFsIGFkZHJl
c3MgZm9yIHRoZSBtYXBwaW5nLgoKU2lnbmVkLW9mZi1ieTogTHVjYXMgU3RhY2ggPGwuc3RhY2hA
cGVuZ3V0cm9uaXguZGU+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW0u
YyB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5oIHwgIDIgKy0K
IGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfbW11LmMgfCAxNiArKysrKysrKysrKysr
Ky0tCiBkcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X21tdS5oIHwgIDIgKy0KIDQgZmls
ZXMgY2hhbmdlZCwgMTcgaW5zZXJ0aW9ucygrKSwgNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJt
L2V0bmF2aXYvZXRuYXZpdl9nZW0uYwppbmRleCA3NDY4MGMwMjU0YjYuLjVkZGUzZTRjMzk0OSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW0uYworKysgYi9k
cml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5jCkBAIC0zMDgsNyArMzA4LDcgQEAg
c3RydWN0IGV0bmF2aXZfdnJhbV9tYXBwaW5nICpldG5hdml2X2dlbV9tYXBwaW5nX2dldCgKIAlt
YXBwaW5nLT51c2UgPSAxOwogCiAJcmV0ID0gZXRuYXZpdl9pb21tdV9tYXBfZ2VtKG1tdSwgZXRu
YXZpdl9vYmosIG1tdS0+Z2xvYmFsLT5tZW1vcnlfYmFzZSwKLQkJCQkgICAgbWFwcGluZyk7CisJ
CQkJICAgIG1hcHBpbmcsIDApOwogCWlmIChyZXQgPCAwKQogCQlrZnJlZShtYXBwaW5nKTsKIAll
bHNlCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5oIGIv
ZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW0uaAppbmRleCAxNzVlNjEyOGM0YmMu
LjkyZjMwOTBiODM0OCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZp
dl9nZW0uaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5oCkBAIC0x
MjAsNyArMTIwLDcgQEAgc3RydWN0IHBhZ2UgKipldG5hdml2X2dlbV9nZXRfcGFnZXMoc3RydWN0
IGV0bmF2aXZfZ2VtX29iamVjdCAqb2JqKTsKIHZvaWQgZXRuYXZpdl9nZW1fcHV0X3BhZ2VzKHN0
cnVjdCBldG5hdml2X2dlbV9vYmplY3QgKm9iaik7CiAKIHN0cnVjdCBldG5hdml2X3ZyYW1fbWFw
cGluZyAqZXRuYXZpdl9nZW1fbWFwcGluZ19nZXQoCi0Jc3RydWN0IGRybV9nZW1fb2JqZWN0ICpv
YmosIHN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQgKm1tdSk7CisJc3RydWN0IGRybV9nZW1f
b2JqZWN0ICpvYmosIHN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQgKm1tdSwgdTY0IHZhKTsK
IHZvaWQgZXRuYXZpdl9nZW1fbWFwcGluZ191bnJlZmVyZW5jZShzdHJ1Y3QgZXRuYXZpdl92cmFt
X21hcHBpbmcgKm1hcHBpbmcpOwogCiAjZW5kaWYgLyogX19FVE5BVklWX0dFTV9IX18gKi8KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfbW11LmMgYi9kcml2ZXJz
L2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X21tdS5jCmluZGV4IDk5YzIwMDk0Mjk1Yy4uYzM0NGRk
ZTJmYTA1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X21tdS5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfbW11LmMKQEAgLTIyMCw5ICsy
MjAsMTYgQEAgc3RhdGljIGludCBldG5hdml2X2lvbW11X2ZpbmRfaW92YShzdHJ1Y3QgZXRuYXZp
dl9pb21tdV9jb250ZXh0ICpjb250ZXh0LAogCXJldHVybiByZXQ7CiB9CiAKK3N0YXRpYyBpbnQg
ZXRuYXZpdl9pb21tdV9pbnNlcnRfZXhhY3Qoc3RydWN0IGV0bmF2aXZfaW9tbXVfY29udGV4dCAq
Y29udGV4dCwKKwkJICAgc3RydWN0IGRybV9tbV9ub2RlICpub2RlLCBzaXplX3Qgc2l6ZSwgdTY0
IHZhKQoreworCXJldHVybiBkcm1fbW1faW5zZXJ0X25vZGVfaW5fcmFuZ2UoJmNvbnRleHQtPm1t
LCBub2RlLCBzaXplLCAwLCAwLCB2YSwKKwkJCQkJICAgdmEgKyBzaXplLCBEUk1fTU1fSU5TRVJU
X0xPVyk7Cit9CisKIGludCBldG5hdml2X2lvbW11X21hcF9nZW0oc3RydWN0IGV0bmF2aXZfaW9t
bXVfY29udGV4dCAqY29udGV4dCwKIAlzdHJ1Y3QgZXRuYXZpdl9nZW1fb2JqZWN0ICpldG5hdml2
X29iaiwgdTMyIG1lbW9yeV9iYXNlLAotCXN0cnVjdCBldG5hdml2X3ZyYW1fbWFwcGluZyAqbWFw
cGluZykKKwlzdHJ1Y3QgZXRuYXZpdl92cmFtX21hcHBpbmcgKm1hcHBpbmcsIHU2NCB2YSkKIHsK
IAlzdHJ1Y3Qgc2dfdGFibGUgKnNndCA9IGV0bmF2aXZfb2JqLT5zZ3Q7CiAJc3RydWN0IGRybV9t
bV9ub2RlICpub2RlOwpAQCAtMjQ4LDcgKzI1NSwxMiBAQCBpbnQgZXRuYXZpdl9pb21tdV9tYXBf
Z2VtKHN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQgKmNvbnRleHQsCiAKIAlub2RlID0gJm1h
cHBpbmctPnZyYW1fbm9kZTsKIAotCXJldCA9IGV0bmF2aXZfaW9tbXVfZmluZF9pb3ZhKGNvbnRl
eHQsIG5vZGUsIGV0bmF2aXZfb2JqLT5iYXNlLnNpemUpOworCWlmICh2YSkKKwkJcmV0ID0gZXRu
YXZpdl9pb21tdV9pbnNlcnRfZXhhY3QoY29udGV4dCwgbm9kZSwKKwkJCQkJCSBldG5hdml2X29i
ai0+YmFzZS5zaXplLCB2YSk7CisJZWxzZQorCQlyZXQgPSBldG5hdml2X2lvbW11X2ZpbmRfaW92
YShjb250ZXh0LCBub2RlLAorCQkJCQkgICAgICBldG5hdml2X29iai0+YmFzZS5zaXplKTsKIAlp
ZiAocmV0IDwgMCkKIAkJZ290byB1bmxvY2s7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9ldG5hdml2L2V0bmF2aXZfbW11LmggYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2
X21tdS5oCmluZGV4IDNjMjE5ZDMwNmVhYi4uZTk3Y2U4NDg4Mjg2IDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X21tdS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9l
dG5hdml2L2V0bmF2aXZfbW11LmgKQEAgLTg1LDcgKzg1LDcgQEAgc3RydWN0IGV0bmF2aXZfZ2Vt
X29iamVjdDsKIAogaW50IGV0bmF2aXZfaW9tbXVfbWFwX2dlbShzdHJ1Y3QgZXRuYXZpdl9pb21t
dV9jb250ZXh0ICpjb250ZXh0LAogCXN0cnVjdCBldG5hdml2X2dlbV9vYmplY3QgKmV0bmF2aXZf
b2JqLCB1MzIgbWVtb3J5X2Jhc2UsCi0Jc3RydWN0IGV0bmF2aXZfdnJhbV9tYXBwaW5nICptYXBw
aW5nKTsKKwlzdHJ1Y3QgZXRuYXZpdl92cmFtX21hcHBpbmcgKm1hcHBpbmcsIHU2NCB2YSk7CiB2
b2lkIGV0bmF2aXZfaW9tbXVfdW5tYXBfZ2VtKHN0cnVjdCBldG5hdml2X2lvbW11X2NvbnRleHQg
KmNvbnRleHQsCiAJc3RydWN0IGV0bmF2aXZfdnJhbV9tYXBwaW5nICptYXBwaW5nKTsKIAotLSAK
Mi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpk
cmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
