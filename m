Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 13743F1663
	for <lists+dri-devel@lfdr.de>; Wed,  6 Nov 2019 13:56:08 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2CB696ED20;
	Wed,  6 Nov 2019 12:56:05 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from us-smtp-1.mimecast.com (us-smtp-delivery-1.mimecast.com
 [205.139.110.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B44F96ED1F
 for <dri-devel@lists.freedesktop.org>; Wed,  6 Nov 2019 12:56:03 +0000 (UTC)
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-226-4Hjsq3gOMBqLDo4KhYmADw-1; Wed, 06 Nov 2019 07:55:59 -0500
Received: from smtp.corp.redhat.com (int-mx07.intmail.prod.int.phx2.redhat.com
 [10.5.11.22])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 87A1B477;
 Wed,  6 Nov 2019 12:55:57 +0000 (UTC)
Received: from sirius.home.kraxel.org (ovpn-116-69.ams2.redhat.com
 [10.36.116.69])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 809591001B34;
 Wed,  6 Nov 2019 12:55:56 +0000 (UTC)
Received: by sirius.home.kraxel.org (Postfix, from userid 1000)
 id B7E9111AAA; Wed,  6 Nov 2019 13:55:55 +0100 (CET)
Date: Wed, 6 Nov 2019 13:55:55 +0100
From: Gerd Hoffmann <kraxel@redhat.com>
To: Thomas Zimmermann <tzimmermann@suse.de>
Subject: Re: [PATCH v2 3/4] drm/udl: Switch to SHMEM
Message-ID: <20191106125555.42mekackie4uby4j@sirius.home.kraxel.org>
References: <20191106104722.19700-1-tzimmermann@suse.de>
 <20191106104722.19700-4-tzimmermann@suse.de>
MIME-Version: 1.0
In-Reply-To: <20191106104722.19700-4-tzimmermann@suse.de>
User-Agent: NeoMutt/20180716
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.22
X-MC-Unique: 4Hjsq3gOMBqLDo4KhYmADw-1
X-Mimecast-Spam-Score: 0
Content-Disposition: inline
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=redhat.com; 
 s=mimecast20190719; t=1573044962;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=8wqXOwFC6HszZWuVajcZ8O0R6kCpKU54/CJ/PJSvBf4=;
 b=e7t+1QdmTFmH2NIewP8wxYZres26vQPD+AemwEj8zUT9uFf438jTpQC/tb7VbMmaE8P4Zh
 Ibvhl52df7qg3Lt2uLj29SQwI4TqCCYsDSkOGfsoE2V9I9rlcVvkVFhTMTaY54Hs/2ooqf
 8uQCnm5RyzLPUvKMiHq/TI1EQhp0T6o=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: sean@poorly.run, dri-devel@lists.freedesktop.org, airlied@redhat.com,
 sam@ravnborg.org, emil.velikov@collabora.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBOb3YgMDYsIDIwMTkgYXQgMTE6NDc6MjFBTSArMDEwMCwgVGhvbWFzIFppbW1lcm1h
bm4gd3JvdGU6Cj4gVWRsJ3MgR0VNIGNvZGUgYW5kIHRoZSBnZW5lcmljIFNITUVNIGFyZSBhbG1v
c3QgaWRlbnRpY2FsLiBSZXBsYWNlCj4gdGhlIGZvcm1lciB3aXRoIFNITUVNLiBUaGUgZG1hYnVm
IHN1cHBvcnQgaW4gdWRsIGlzIGJlaW5nIHJlcGxhY2VkCj4gd2l0aCBnZW5lcmljIEdFTSBQUklN
RSBmdW5jdGlvbnMuCj4gCj4gVGhlIG1haW4gZGlmZmVyZW5jZSBpcyBpbiB0aGUgY2FjaGluZyBm
bGFncyBmb3IgbW1hcCBwYWdlcy4gQnkKPiBkZWZhdWx0LCBTSE1FTSBhbHdheXMgc2V0cyAodW5j
YWNoZWQpIHdyaXRlIGNvbWJpbmluZy4gSW4gdWRsJ3MKPiBtZW1vcnkgbWFuYWdlbWVudCBjb2Rl
LCBvbmx5IGltcG9ydGVkIGJ1ZmZlcnMgdXNlIHdyaXRlIGNvbWJpbmluZy4KPiBNZW1vcnkgcGFn
ZXMgb2YgbG9jYWxseSBjcmVhdGVkIGJ1ZmZlciBvYmplY3RzIGFyZSBtbWFwJ2VkIHdpdGgKPiBj
YWNoaW5nIGVuYWJsZWQuIFRvIGtlZXAgdGhlIG9wdGltaXphdGlvbiwgdWRsIHByb3ZpZGVzIGl0
cyBvd24KPiBtbWFwIGZ1bmN0aW9uIGZvciBHRU0gb2JqZWN0cyB3aGVyZSBpdCBmaXhlcyB1cCB0
aGUgbWFwcGluZyBmbGFncy4KPiAKPiB2MjoKPiAJLSByZW1vdmUgb2Jzb2xldGUgY29kZSBpbiBh
IHNlcGFyYXRlIHBhdGNoCgpUaGF0IGluZGVlZCBtYWtlcyB0aGUgcGF0Y2ggbW9yZSByZWFkYWJs
ZSBhcyB0aGUgY29udGV4dCBzdGF5cyBpbnRhY3QKdGhpcyB3YXkuCgo+IAo+IFNpZ25lZC1vZmYt
Ynk6IFRob21hcyBaaW1tZXJtYW5uIDx0emltbWVybWFubkBzdXNlLmRlPgoKQWNrZWQtYnk6IEdl
cmQgSG9mZm1hbm4gPGtyYXhlbEByZWRoYXQuY29tPgoKPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJt
L3VkbC9LY29uZmlnICAgfCAgMSArCj4gIGRyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2Rydi5jIHwg
MjkgKystLS0tLS0tLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2Rydi5oIHwgIDEg
Kwo+ICBkcml2ZXJzL2dwdS9kcm0vdWRsL3VkbF9mYi5jICB8IDY2ICsrKysrKysrKysrKysrKysr
KystLS0tLS0tLS0tLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2dlbS5jIHwgNjEg
KysrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0KPiAgNSBmaWxlcyBjaGFuZ2VkLCA5OCBp
bnNlcnRpb25zKCspLCA2MCBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3VkbC9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL3VkbC9LY29uZmlnCj4gaW5kZXgg
YjRkMTc5Yjg3ZjAxLi4xNDViMmE5NWNlNTggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJt
L3VkbC9LY29uZmlnCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3VkbC9LY29uZmlnCj4gQEAgLTUs
NiArNSw3IEBAIGNvbmZpZyBEUk1fVURMCj4gIAlkZXBlbmRzIG9uIFVTQl9TVVBQT1JUCj4gIAlk
ZXBlbmRzIG9uIFVTQl9BUkNIX0hBU19IQ0QKPiAgCXNlbGVjdCBVU0IKPiArCXNlbGVjdCBEUk1f
R0VNX1NITUVNX0hFTFBFUgo+ICAJc2VsZWN0IERSTV9LTVNfSEVMUEVSCj4gIAloZWxwCj4gIAkg
IFRoaXMgaXMgYSBLTVMgZHJpdmVyIGZvciB0aGUgVVNCIGRpc3BsYXlsaW5rIHZpZGVvIGFkYXB0
ZXJzLgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdWRsL3VkbF9kcnYuYyBiL2RyaXZl
cnMvZ3B1L2RybS91ZGwvdWRsX2Rydi5jCj4gaW5kZXggNzc4YTBiNjUyZjY0Li41NjNjYzU4MDll
NTYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfZHJ2LmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vdWRsL3VkbF9kcnYuYwo+IEBAIC04LDYgKzgsNyBAQAo+ICAjaW5jbHVk
ZSA8ZHJtL2RybV9jcnRjX2hlbHBlci5oPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9kcnYuaD4KPiAg
I2luY2x1ZGUgPGRybS9kcm1fZmlsZS5oPgo+ICsjaW5jbHVkZSA8ZHJtL2RybV9nZW1fc2htZW1f
aGVscGVyLmg+Cj4gICNpbmNsdWRlIDxkcm0vZHJtX2lvY3RsLmg+Cj4gICNpbmNsdWRlIDxkcm0v
ZHJtX3Byb2JlX2hlbHBlci5oPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9wcmludC5oPgo+IEBAIC0z
MiwyMyArMzMsNyBAQCBzdGF0aWMgaW50IHVkbF91c2JfcmVzdW1lKHN0cnVjdCB1c2JfaW50ZXJm
YWNlICppbnRlcmZhY2UpCj4gIAlyZXR1cm4gMDsKPiAgfQo+ICAKPiAtc3RhdGljIGNvbnN0IHN0
cnVjdCB2bV9vcGVyYXRpb25zX3N0cnVjdCB1ZGxfZ2VtX3ZtX29wcyA9IHsKPiAtCS5mYXVsdCA9
IHVkbF9nZW1fZmF1bHQsCj4gLQkub3BlbiA9IGRybV9nZW1fdm1fb3BlbiwKPiAtCS5jbG9zZSA9
IGRybV9nZW1fdm1fY2xvc2UsCj4gLX07Cj4gLQo+IC1zdGF0aWMgY29uc3Qgc3RydWN0IGZpbGVf
b3BlcmF0aW9ucyB1ZGxfZHJpdmVyX2ZvcHMgPSB7Cj4gLQkub3duZXIgPSBUSElTX01PRFVMRSwK
PiAtCS5vcGVuID0gZHJtX29wZW4sCj4gLQkubW1hcCA9IHVkbF9kcm1fZ2VtX21tYXAsCj4gLQku
cG9sbCA9IGRybV9wb2xsLAo+IC0JLnJlYWQgPSBkcm1fcmVhZCwKPiAtCS51bmxvY2tlZF9pb2N0
bAk9IGRybV9pb2N0bCwKPiAtCS5yZWxlYXNlID0gZHJtX3JlbGVhc2UsCj4gLQkuY29tcGF0X2lv
Y3RsID0gZHJtX2NvbXBhdF9pb2N0bCwKPiAtCS5sbHNlZWsgPSBub29wX2xsc2VlaywKPiAtfTsK
PiArREVGSU5FX0RSTV9HRU1fRk9QUyh1ZGxfZHJpdmVyX2ZvcHMpOwo+ICAKPiAgc3RhdGljIHZv
aWQgdWRsX2RyaXZlcl9yZWxlYXNlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCj4gIHsKPiBAQCAt
NjMsMTggKzQ4LDEwIEBAIHN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBkcml2ZXIgPSB7Cj4gIAku
cmVsZWFzZSA9IHVkbF9kcml2ZXJfcmVsZWFzZSwKPiAgCj4gIAkvKiBnZW0gaG9va3MgKi8KPiAt
CS5nZW1fZnJlZV9vYmplY3RfdW5sb2NrZWQgPSB1ZGxfZ2VtX2ZyZWVfb2JqZWN0LAo+ICAJLmdl
bV9jcmVhdGVfb2JqZWN0ID0gdWRsX2RyaXZlcl9nZW1fY3JlYXRlX29iamVjdCwKPiAtCS5nZW1f
dm1fb3BzID0gJnVkbF9nZW1fdm1fb3BzLAo+ICAKPiAtCS5kdW1iX2NyZWF0ZSA9IHVkbF9kdW1i
X2NyZWF0ZSwKPiAtCS5kdW1iX21hcF9vZmZzZXQgPSB1ZGxfZ2VtX21tYXAsCj4gIAkuZm9wcyA9
ICZ1ZGxfZHJpdmVyX2ZvcHMsCj4gLQo+IC0JLnByaW1lX2hhbmRsZV90b19mZCA9IGRybV9nZW1f
cHJpbWVfaGFuZGxlX3RvX2ZkLAo+IC0JLnByaW1lX2ZkX3RvX2hhbmRsZSA9IGRybV9nZW1fcHJp
bWVfZmRfdG9faGFuZGxlLAo+IC0JLmdlbV9wcmltZV9leHBvcnQgPSB1ZGxfZ2VtX3ByaW1lX2V4
cG9ydCwKPiAtCS5nZW1fcHJpbWVfaW1wb3J0ID0gdWRsX2dlbV9wcmltZV9pbXBvcnQsCj4gKwlE
Uk1fR0VNX1NITUVNX0RSSVZFUl9PUFMsCj4gIAo+ICAJLm5hbWUgPSBEUklWRVJfTkFNRSwKPiAg
CS5kZXNjID0gRFJJVkVSX0RFU0MsCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS91ZGwv
dWRsX2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfZHJ2LmgKPiBpbmRleCBmYzMxMmU3
OTFkMTguLjYzMGU2NGFiYzk4NiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdWRsL3Vk
bF9kcnYuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS91ZGwvdWRsX2Rydi5oCj4gQEAgLTg1LDYg
Kzg1LDcgQEAgc3RydWN0IHVkbF9nZW1fb2JqZWN0IHsKPiAgc3RydWN0IHVkbF9mcmFtZWJ1ZmZl
ciB7Cj4gIAlzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyIGJhc2U7Cj4gIAlzdHJ1Y3QgdWRsX2dlbV9v
YmplY3QgKm9iajsKPiArCXN0cnVjdCBkcm1fZ2VtX3NobWVtX29iamVjdCAqc2htZW07Cj4gIAli
b29sIGFjdGl2ZV8xNjsgLyogYWN0aXZlIG9uIHRoZSAxNi1iaXQgY2hhbm5lbCAqLwo+ICB9Owo+
ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfZmIuYyBiL2RyaXZlcnMv
Z3B1L2RybS91ZGwvdWRsX2ZiLmMKPiBpbmRleCBlZjM1MDRkMDYzNDMuLmY4MTUzYjcyNjM0MyAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdWRsL3VkbF9mYi5jCj4gKysrIGIvZHJpdmVy
cy9ncHUvZHJtL3VkbC91ZGxfZmIuYwo+IEBAIC0xNSw2ICsxNSw3IEBACj4gICNpbmNsdWRlIDxk
cm0vZHJtX2Rydi5oPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9mYl9oZWxwZXIuaD4KPiAgI2luY2x1
ZGUgPGRybS9kcm1fZm91cmNjLmg+Cj4gKyNpbmNsdWRlIDxkcm0vZHJtX2dlbV9zaG1lbV9oZWxw
ZXIuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fbW9kZXNldF9oZWxwZXIuaD4KPiAgCj4gICNpbmNs
dWRlICJ1ZGxfZHJ2LmgiCj4gQEAgLTk0LDE2ICs5NSwxNCBAQCBpbnQgdWRsX2hhbmRsZV9kYW1h
Z2Uoc3RydWN0IHVkbF9mcmFtZWJ1ZmZlciAqZmIsIGludCB4LCBpbnQgeSwKPiAgCWlmICghZmIt
PmFjdGl2ZV8xNikKPiAgCQlyZXR1cm4gMDsKPiAgCj4gLQlpZiAoIWZiLT5vYmotPnZtYXBwaW5n
KSB7Cj4gLQkJcmV0ID0gdWRsX2dlbV92bWFwKGZiLT5vYmopOwo+IC0JCWlmIChyZXQgPT0gLUVO
T01FTSkgewo+ICsJaWYgKCFmYi0+c2htZW0tPnZhZGRyKSB7Cj4gKwkJdm9pZCAqdmFkZHI7Cj4g
Kwo+ICsJCXZhZGRyID0gZHJtX2dlbV9zaG1lbV92bWFwKCZmYi0+c2htZW0tPmJhc2UpOwo+ICsJ
CWlmIChJU19FUlIodmFkZHIpKSB7Cj4gIAkJCURSTV9FUlJPUigiZmFpbGVkIHRvIHZtYXAgZmJc
biIpOwo+ICAJCQlyZXR1cm4gMDsKPiAgCQl9Cj4gLQkJaWYgKCFmYi0+b2JqLT52bWFwcGluZykg
ewo+IC0JCQlEUk1fRVJST1IoImZhaWxlZCB0byB2bWFwcGluZ1xuIik7Cj4gLQkJCXJldHVybiAw
Owo+IC0JCX0KPiAgCX0KPiAgCj4gIAlhbGlnbmVkX3ggPSBETF9BTElHTl9ET1dOKHgsIHNpemVv
Zih1bnNpZ25lZCBsb25nKSk7Cj4gQEAgLTEyNyw3ICsxMjYsNyBAQCBpbnQgdWRsX2hhbmRsZV9k
YW1hZ2Uoc3RydWN0IHVkbF9mcmFtZWJ1ZmZlciAqZmIsIGludCB4LCBpbnQgeSwKPiAgCQljb25z
dCBpbnQgYnl0ZV9vZmZzZXQgPSBsaW5lX29mZnNldCArICh4IDw8IGxvZ19icHApOwo+ICAJCWNv
bnN0IGludCBkZXZfYnl0ZV9vZmZzZXQgPSAoZmItPmJhc2Uud2lkdGggKiBpICsgeCkgPDwgbG9n
X2JwcDsKPiAgCQlpZiAodWRsX3JlbmRlcl9obGluZShkZXYsIGxvZ19icHAsICZ1cmIsCj4gLQkJ
CQkgICAgIChjaGFyICopIGZiLT5vYmotPnZtYXBwaW5nLAo+ICsJCQkJICAgICAoY2hhciAqKSBm
Yi0+c2htZW0tPnZhZGRyLAo+ICAJCQkJICAgICAmY21kLCBieXRlX29mZnNldCwgZGV2X2J5dGVf
b2Zmc2V0LAo+ICAJCQkJICAgICB3aWR0aCA8PCBsb2dfYnBwLAo+ICAJCQkJICAgICAmYnl0ZXNf
aWRlbnRpY2FsLCAmYnl0ZXNfc2VudCkpCj4gQEAgLTI4MSw2ICsyODAsNyBAQCBzdGF0aWMgaW50
IHVkbF91c2VyX2ZyYW1lYnVmZmVyX2RpcnR5KHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiLAo+
ICAJCQkJICAgICAgdW5zaWduZWQgbnVtX2NsaXBzKQo+ICB7Cj4gIAlzdHJ1Y3QgdWRsX2ZyYW1l
YnVmZmVyICp1ZmIgPSB0b191ZGxfZmIoZmIpOwo+ICsJc3RydWN0IGRtYV9idWZfYXR0YWNobWVu
dCAqaW1wb3J0X2F0dGFjaDsKPiAgCWludCBpOwo+ICAJaW50IHJldCA9IDA7Cj4gIAo+IEBAIC0y
ODksOCArMjg5LDEwIEBAIHN0YXRpYyBpbnQgdWRsX3VzZXJfZnJhbWVidWZmZXJfZGlydHkoc3Ry
dWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsCj4gIAlpZiAoIXVmYi0+YWN0aXZlXzE2KQo+ICAJCWdv
dG8gdW5sb2NrOwo+ICAKPiAtCWlmICh1ZmItPm9iai0+YmFzZS5pbXBvcnRfYXR0YWNoKSB7Cj4g
LQkJcmV0ID0gZG1hX2J1Zl9iZWdpbl9jcHVfYWNjZXNzKHVmYi0+b2JqLT5iYXNlLmltcG9ydF9h
dHRhY2gtPmRtYWJ1ZiwKPiArCWltcG9ydF9hdHRhY2ggPSB1ZmItPnNobWVtLT5iYXNlLmltcG9y
dF9hdHRhY2g7Cj4gKwo+ICsJaWYgKGltcG9ydF9hdHRhY2gpIHsKPiArCQlyZXQgPSBkbWFfYnVm
X2JlZ2luX2NwdV9hY2Nlc3MoaW1wb3J0X2F0dGFjaC0+ZG1hYnVmLAo+ICAJCQkJCSAgICAgICBE
TUFfRlJPTV9ERVZJQ0UpOwo+ICAJCWlmIChyZXQpCj4gIAkJCWdvdG8gdW5sb2NrOwo+IEBAIC0z
MDQsMTAgKzMwNiw5IEBAIHN0YXRpYyBpbnQgdWRsX3VzZXJfZnJhbWVidWZmZXJfZGlydHkoc3Ry
dWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIsCj4gIAkJCWJyZWFrOwo+ICAJfQo+ICAKPiAtCWlmICh1
ZmItPm9iai0+YmFzZS5pbXBvcnRfYXR0YWNoKSB7Cj4gLQkJcmV0ID0gZG1hX2J1Zl9lbmRfY3B1
X2FjY2Vzcyh1ZmItPm9iai0+YmFzZS5pbXBvcnRfYXR0YWNoLT5kbWFidWYsCj4gKwlpZiAoaW1w
b3J0X2F0dGFjaCkKPiArCQlyZXQgPSBkbWFfYnVmX2VuZF9jcHVfYWNjZXNzKGltcG9ydF9hdHRh
Y2gtPmRtYWJ1ZiwKPiAgCQkJCQkgICAgIERNQV9GUk9NX0RFVklDRSk7Cj4gLQl9Cj4gIAo+ICAg
dW5sb2NrOgo+ICAJZHJtX21vZGVzZXRfdW5sb2NrX2FsbChmYi0+ZGV2KTsKPiBAQCAtMzE5LDgg
KzMyMCw4IEBAIHN0YXRpYyB2b2lkIHVkbF91c2VyX2ZyYW1lYnVmZmVyX2Rlc3Ryb3koc3RydWN0
IGRybV9mcmFtZWJ1ZmZlciAqZmIpCj4gIHsKPiAgCXN0cnVjdCB1ZGxfZnJhbWVidWZmZXIgKnVm
YiA9IHRvX3VkbF9mYihmYik7Cj4gIAo+IC0JaWYgKHVmYi0+b2JqKQo+IC0JCWRybV9nZW1fb2Jq
ZWN0X3B1dF91bmxvY2tlZCgmdWZiLT5vYmotPmJhc2UpOwo+ICsJaWYgKHVmYi0+c2htZW0pCj4g
KwkJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKCZ1ZmItPnNobWVtLT5iYXNlKTsKPiAgCj4g
IAlkcm1fZnJhbWVidWZmZXJfY2xlYW51cChmYik7Cj4gIAlrZnJlZSh1ZmIpOwo+IEBAIC0zMzYs
MTEgKzMzNywxMSBAQCBzdGF0aWMgaW50Cj4gIHVkbF9mcmFtZWJ1ZmZlcl9pbml0KHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsCj4gIAkJICAgICBzdHJ1Y3QgdWRsX2ZyYW1lYnVmZmVyICp1ZmIsCj4g
IAkJICAgICBjb25zdCBzdHJ1Y3QgZHJtX21vZGVfZmJfY21kMiAqbW9kZV9jbWQsCj4gLQkJICAg
ICBzdHJ1Y3QgdWRsX2dlbV9vYmplY3QgKm9iaikKPiArCQkgICAgIHN0cnVjdCBkcm1fZ2VtX3No
bWVtX29iamVjdCAqc2htZW0pCj4gIHsKPiAgCWludCByZXQ7Cj4gIAo+IC0JdWZiLT5vYmogPSBv
Ymo7Cj4gKwl1ZmItPnNobWVtID0gc2htZW07Cj4gIAlkcm1faGVscGVyX21vZGVfZmlsbF9mYl9z
dHJ1Y3QoZGV2LCAmdWZiLT5iYXNlLCBtb2RlX2NtZCk7Cj4gIAlyZXQgPSBkcm1fZnJhbWVidWZm
ZXJfaW5pdChkZXYsICZ1ZmItPmJhc2UsICZ1ZGxmYl9mdW5jcyk7Cj4gIAlyZXR1cm4gcmV0Owo+
IEBAIC0zNTYsNyArMzU3LDggQEAgc3RhdGljIGludCB1ZGxmYl9jcmVhdGUoc3RydWN0IGRybV9m
Yl9oZWxwZXIgKmhlbHBlciwKPiAgCXN0cnVjdCBmYl9pbmZvICppbmZvOwo+ICAJc3RydWN0IGRy
bV9mcmFtZWJ1ZmZlciAqZmI7Cj4gIAlzdHJ1Y3QgZHJtX21vZGVfZmJfY21kMiBtb2RlX2NtZDsK
PiAtCXN0cnVjdCB1ZGxfZ2VtX29iamVjdCAqb2JqOwo+ICsJc3RydWN0IGRybV9nZW1fc2htZW1f
b2JqZWN0ICpzaG1lbTsKPiArCXZvaWQgKnZhZGRyOwo+ICAJdWludDMyX3Qgc2l6ZTsKPiAgCWlu
dCByZXQgPSAwOwo+ICAKPiBAQCAtMzczLDEyICszNzUsMTUgQEAgc3RhdGljIGludCB1ZGxmYl9j
cmVhdGUoc3RydWN0IGRybV9mYl9oZWxwZXIgKmhlbHBlciwKPiAgCXNpemUgPSBtb2RlX2NtZC5w
aXRjaGVzWzBdICogbW9kZV9jbWQuaGVpZ2h0Owo+ICAJc2l6ZSA9IEFMSUdOKHNpemUsIFBBR0Vf
U0laRSk7Cj4gIAo+IC0Jb2JqID0gdWRsX2dlbV9hbGxvY19vYmplY3QoZGV2LCBzaXplKTsKPiAt
CWlmICghb2JqKQo+ICsJc2htZW0gPSBkcm1fZ2VtX3NobWVtX2NyZWF0ZShkZXYsIHNpemUpOwo+
ICsJaWYgKElTX0VSUihzaG1lbSkpIHsKPiArCQlyZXQgPSBQVFJfRVJSKHNobWVtKTsKPiAgCQln
b3RvIG91dDsKPiArCX0KPiAgCj4gLQlyZXQgPSB1ZGxfZ2VtX3ZtYXAob2JqKTsKPiAtCWlmIChy
ZXQpIHsKPiArCXZhZGRyID0gZHJtX2dlbV9zaG1lbV92bWFwKCZzaG1lbS0+YmFzZSk7Cj4gKwlp
ZiAoSVNfRVJSKHZhZGRyKSkgewo+ICsJCXJldCA9IFBUUl9FUlIodmFkZHIpOwo+ICAJCURSTV9F
UlJPUigiZmFpbGVkIHRvIHZtYXAgZmJcbiIpOwo+ICAJCWdvdG8gb3V0X2dmcmVlOwo+ICAJfQo+
IEBAIC0zODksNyArMzk0LDcgQEAgc3RhdGljIGludCB1ZGxmYl9jcmVhdGUoc3RydWN0IGRybV9m
Yl9oZWxwZXIgKmhlbHBlciwKPiAgCQlnb3RvIG91dF9nZnJlZTsKPiAgCX0KPiAgCj4gLQlyZXQg
PSB1ZGxfZnJhbWVidWZmZXJfaW5pdChkZXYsICZ1ZmJkZXYtPnVmYiwgJm1vZGVfY21kLCBvYmop
Owo+ICsJcmV0ID0gdWRsX2ZyYW1lYnVmZmVyX2luaXQoZGV2LCAmdWZiZGV2LT51ZmIsICZtb2Rl
X2NtZCwgc2htZW0pOwo+ICAJaWYgKHJldCkKPiAgCQlnb3RvIG91dF9nZnJlZTsKPiAgCj4gQEAg
LTM5NywyMCArNDAyLDIwIEBAIHN0YXRpYyBpbnQgdWRsZmJfY3JlYXRlKHN0cnVjdCBkcm1fZmJf
aGVscGVyICpoZWxwZXIsCj4gIAo+ICAJdWZiZGV2LT5oZWxwZXIuZmIgPSBmYjsKPiAgCj4gLQlp
bmZvLT5zY3JlZW5fYmFzZSA9IHVmYmRldi0+dWZiLm9iai0+dm1hcHBpbmc7Cj4gKwlpbmZvLT5z
Y3JlZW5fYmFzZSA9IHZhZGRyOwo+ICAJaW5mby0+Zml4LnNtZW1fbGVuID0gc2l6ZTsKPiAtCWlu
Zm8tPmZpeC5zbWVtX3N0YXJ0ID0gKHVuc2lnbmVkIGxvbmcpdWZiZGV2LT51ZmIub2JqLT52bWFw
cGluZzsKPiArCWluZm8tPmZpeC5zbWVtX3N0YXJ0ID0gKHVuc2lnbmVkIGxvbmcpdmFkZHI7Cj4g
IAo+ICAJaW5mby0+ZmJvcHMgPSAmdWRsZmJfb3BzOwo+ICAJZHJtX2ZiX2hlbHBlcl9maWxsX2lu
Zm8oaW5mbywgJnVmYmRldi0+aGVscGVyLCBzaXplcyk7Cj4gIAo+ICAJRFJNX0RFQlVHX0tNUygi
YWxsb2NhdGVkICVkeCVkIHZtYWwgJXBcbiIsCj4gIAkJICAgICAgZmItPndpZHRoLCBmYi0+aGVp
Z2h0LAo+IC0JCSAgICAgIHVmYmRldi0+dWZiLm9iai0+dm1hcHBpbmcpOwo+ICsJCSAgICAgIHVm
YmRldi0+dWZiLnNobWVtLT52YWRkcik7Cj4gIAo+ICAJcmV0dXJuIHJldDsKPiAgb3V0X2dmcmVl
Ogo+IC0JZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKCZ1ZmJkZXYtPnVmYi5vYmotPmJhc2Up
Owo+ICsJZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKCZ1ZmJkZXYtPnVmYi5zaG1lbS0+YmFz
ZSk7Cj4gIG91dDoKPiAgCXJldHVybiByZXQ7Cj4gIH0KPiBAQCAtNDI0LDEwICs0MjksMTAgQEAg
c3RhdGljIHZvaWQgdWRsX2ZiZGV2X2Rlc3Ryb3koc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiAg
ewo+ICAJZHJtX2ZiX2hlbHBlcl91bnJlZ2lzdGVyX2ZiaSgmdWZiZGV2LT5oZWxwZXIpOwo+ICAJ
ZHJtX2ZiX2hlbHBlcl9maW5pKCZ1ZmJkZXYtPmhlbHBlcik7Cj4gLQlpZiAodWZiZGV2LT51ZmIu
b2JqKSB7Cj4gKwlpZiAodWZiZGV2LT51ZmIuc2htZW0pIHsKPiAgCQlkcm1fZnJhbWVidWZmZXJf
dW5yZWdpc3Rlcl9wcml2YXRlKCZ1ZmJkZXYtPnVmYi5iYXNlKTsKPiAgCQlkcm1fZnJhbWVidWZm
ZXJfY2xlYW51cCgmdWZiZGV2LT51ZmIuYmFzZSk7Cj4gLQkJZHJtX2dlbV9vYmplY3RfcHV0X3Vu
bG9ja2VkKCZ1ZmJkZXYtPnVmYi5vYmotPmJhc2UpOwo+ICsJCWRybV9nZW1fb2JqZWN0X3B1dF91
bmxvY2tlZCgmdWZiZGV2LT51ZmIuc2htZW0tPmJhc2UpOwo+ICAJfQo+ICB9Cj4gIAo+IEBAIC01
MTgsNyArNTIzLDggQEAgdWRsX2ZiX3VzZXJfZmJfY3JlYXRlKHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYsCj4gIAlpZiAodWZiID09IE5VTEwpCj4gIAkJcmV0dXJuIEVSUl9QVFIoLUVOT01FTSk7Cj4g
IAo+IC0JcmV0ID0gdWRsX2ZyYW1lYnVmZmVyX2luaXQoZGV2LCB1ZmIsIG1vZGVfY21kLCB0b191
ZGxfYm8ob2JqKSk7Cj4gKwlyZXQgPSB1ZGxfZnJhbWVidWZmZXJfaW5pdChkZXYsIHVmYiwgbW9k
ZV9jbWQsCj4gKwkJCQkgICB0b19kcm1fZ2VtX3NobWVtX29iaihvYmopKTsKPiAgCWlmIChyZXQp
IHsKPiAgCQlrZnJlZSh1ZmIpOwo+ICAJCXJldHVybiBFUlJfUFRSKC1FSU5WQUwpOwo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdWRsL3VkbF9nZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS91
ZGwvdWRsX2dlbS5jCj4gaW5kZXggNjI4NzQ5Y2MxMTQzLi4zNTU0ZmZmYmYxZGIgMTAwNjQ0Cj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfZ2VtLmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vdWRsL3VkbF9nZW0uYwo+IEBAIC03LDExICs3LDYwIEBACj4gICNpbmNsdWRlIDxsaW51eC92
bWFsbG9jLmg+Cj4gIAo+ICAjaW5jbHVkZSA8ZHJtL2RybV9kcnYuaD4KPiArI2luY2x1ZGUgPGRy
bS9kcm1fZ2VtX3NobWVtX2hlbHBlci5oPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9tb2RlLmg+Cj4g
ICNpbmNsdWRlIDxkcm0vZHJtX3ByaW1lLmg+Cj4gIAo+ICAjaW5jbHVkZSAidWRsX2Rydi5oIgo+
ICAKPiArLyoKPiArICogR0VNIG9iamVjdCBmdW5jcwo+ICsgKi8KPiArCj4gK3N0YXRpYyB2b2lk
IHVkbF9nZW1fb2JqZWN0X2ZyZWVfb2JqZWN0KHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKQo+
ICt7Cj4gKwlzdHJ1Y3QgZHJtX2dlbV9zaG1lbV9vYmplY3QgKnNobWVtID0gdG9fZHJtX2dlbV9z
aG1lbV9vYmoob2JqKTsKPiArCj4gKwkvKiBGYmRldiBlbXVsYXRpb24gdm1hcHMgdGhlIGJ1ZmZl
ci4gVW5tYXAgaXQgaGVyZSBmb3IgY29uc2lzdGVuY3kKPiArCSAqIHdpdGggdGhlIG9yaWdpbmFs
IHVkbCBHRU0gY29kZS4KPiArCSAqCj4gKwkgKiBUT0RPOiBTd2l0Y2ggdG8gZ2VuZXJpYyBmYmRl
diBlbXVsYXRpb24gYW5kIHJlbGVhc2UgdGhlCj4gKwkgKiAgICAgICBHRU0gb2JqZWN0IHdpdGgg
ZHJtX2dlbV9zaG1lbV9mcmVlX29iamVjdCgpLgo+ICsJICovCj4gKwlpZiAoc2htZW0tPnZhZGRy
KQo+ICsJCWRybV9nZW1fc2htZW1fdnVubWFwKG9iaiwgc2htZW0tPnZhZGRyKTsKPiArCj4gKwlk
cm1fZ2VtX3NobWVtX2ZyZWVfb2JqZWN0KG9iaik7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgdWRs
X2dlbV9vYmplY3RfbW1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwKPiArCQkJICAgICAg
IHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hKQo+ICt7Cj4gKwlpbnQgcmV0Owo+ICsKPiArCXJl
dCA9IGRybV9nZW1fc2htZW1fbW1hcChvYmosIHZtYSk7Cj4gKwlpZiAocmV0KQo+ICsJCXJldHVy
biByZXQ7Cj4gKwo+ICsJdm1hLT52bV9wYWdlX3Byb3QgPSB2bV9nZXRfcGFnZV9wcm90KHZtYS0+
dm1fZmxhZ3MpOwo+ICsJaWYgKG9iai0+aW1wb3J0X2F0dGFjaCkKPiArCQl2bWEtPnZtX3BhZ2Vf
cHJvdCA9IHBncHJvdF93cml0ZWNvbWJpbmUodm1hLT52bV9wYWdlX3Byb3QpOwo+ICsJdm1hLT52
bV9wYWdlX3Byb3QgPSBwZ3Byb3RfZGVjcnlwdGVkKHZtYS0+dm1fcGFnZV9wcm90KTsKPiArCj4g
KwlyZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fZ2VtX29iamVj
dF9mdW5jcyB1ZGxfZ2VtX29iamVjdF9mdW5jcyA9IHsKPiArCS5mcmVlID0gdWRsX2dlbV9vYmpl
Y3RfZnJlZV9vYmplY3QsCj4gKwkucHJpbnRfaW5mbyA9IGRybV9nZW1fc2htZW1fcHJpbnRfaW5m
bywKPiArCS5waW4gPSBkcm1fZ2VtX3NobWVtX3BpbiwKPiArCS51bnBpbiA9IGRybV9nZW1fc2ht
ZW1fdW5waW4sCj4gKwkuZ2V0X3NnX3RhYmxlID0gZHJtX2dlbV9zaG1lbV9nZXRfc2dfdGFibGUs
Cj4gKwkudm1hcCA9IGRybV9nZW1fc2htZW1fdm1hcCwKPiArCS52dW5tYXAgPSBkcm1fZ2VtX3No
bWVtX3Z1bm1hcCwKPiArCS5tbWFwID0gdWRsX2dlbV9vYmplY3RfbW1hcCwKPiArfTsKPiArCj4g
IC8qCj4gICAqIEhlbHBlcnMgZm9yIHN0cnVjdCBkcm1fZHJpdmVyCj4gICAqLwo+IEBAIC0xOSwx
MyArNjgsMTcgQEAKPiAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICp1ZGxfZHJpdmVyX2dlbV9jcmVh
dGVfb2JqZWN0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gIAkJCQkJCSAgICBzaXplX3Qgc2l6
ZSkKPiAgewo+IC0Jc3RydWN0IHVkbF9nZW1fb2JqZWN0ICpvYmo7Cj4gKwlzdHJ1Y3QgZHJtX2dl
bV9zaG1lbV9vYmplY3QgKnNobWVtOwo+ICsJc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmo7Cj4g
IAo+IC0Jb2JqID0ga3phbGxvYyhzaXplb2YoKm9iaiksIEdGUF9LRVJORUwpOwo+IC0JaWYgKCFv
YmopCj4gKwlzaG1lbSA9IGt6YWxsb2Moc2l6ZW9mKCpzaG1lbSksIEdGUF9LRVJORUwpOwo+ICsJ
aWYgKCFzaG1lbSkKPiAgCQlyZXR1cm4gTlVMTDsKPiAgCj4gLQlyZXR1cm4gJm9iai0+YmFzZTsK
PiArCW9iaiA9ICZzaG1lbS0+YmFzZTsKPiArCW9iai0+ZnVuY3MgPSAmdWRsX2dlbV9vYmplY3Rf
ZnVuY3M7Cj4gKwo+ICsJcmV0dXJuIG9iajsKPiAgfQo+ICAKPiAgc3RydWN0IHVkbF9nZW1fb2Jq
ZWN0ICp1ZGxfZ2VtX2FsbG9jX29iamVjdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+IC0tIAo+
IDIuMjMuMAo+IAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
