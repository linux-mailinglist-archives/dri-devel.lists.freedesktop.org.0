Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id EF69F81374
	for <lists+dri-devel@lfdr.de>; Mon,  5 Aug 2019 09:36:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 51B9C6E2A8;
	Mon,  5 Aug 2019 07:35:01 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from onstation.org (onstation.org [52.200.56.107])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 946296E4DD;
 Sat,  3 Aug 2019 14:20:44 +0000 (UTC)
Received: from localhost.localdomain (c-98-239-145-235.hsd1.wv.comcast.net
 [98.239.145.235])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: masneyb)
 by onstation.org (Postfix) with ESMTPSA id 9456C3E9AC;
 Sat,  3 Aug 2019 14:20:43 +0000 (UTC)
From: Brian Masney <masneyb@onstation.org>
To: agross@kernel.org, robdclark@gmail.com, sean@poorly.run,
 robh+dt@kernel.org, bjorn.andersson@linaro.org
Subject: [PATCH v4 4/6] firmware: qcom: scm: add support to restore secure
 config to qcm_scm-32
Date: Sat,  3 Aug 2019 10:20:24 -0400
Message-Id: <20190803142026.9647-5-masneyb@onstation.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190803142026.9647-1-masneyb@onstation.org>
References: <20190803142026.9647-1-masneyb@onstation.org>
X-Mailman-Approved-At: Mon, 05 Aug 2019 07:34:45 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=onstation.org; s=default; t=1564842044;
 bh=WZRqHuWS+4CgfWMQ+vkxByG3uN+4wC/60aklIyk/h6c=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=GODeDzNHD37XkndGz2lDLyg4EeEnAnu3rqNQowxls9Uw/i12Sj70rAxTZfDrCSwVF
 B26rRo6pTVkbImfLXOhg1JcA13MfWkwH9Z/y62RMf9+qyPUrg0oNRcqhf/wAUa1Cua
 NlmC3pa6lwS/EPByPily+5mbIt6bn7O7T6KUQdEw=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org, jonathan@marek.ca,
 airlied@linux.ie, linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, freedreno@lists.freedesktop.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9iIENsYXJrIDxyb2JkY2xhcmtAZ21haWwuY29tPgoKQWRkIHN1cHBvcnQgdG8gcmVz
dG9yZSB0aGUgc2VjdXJlIGNvbmZpZ3VyYXRpb24gZm9yIHFjbV9zY20tMzIuYy4gVGhpcwppcyBu
ZWVkZWQgYnkgdGhlIE9uIENoaXAgTUVNb3J5IChPQ01FTSkgdGhhdCBpcyBwcmVzZW50IG9uIHNv
bWUKU25hcGRyYWdvbiBkZXZpY2VzLgoKU2lnbmVkLW9mZi1ieTogUm9iIENsYXJrIDxyb2JkY2xh
cmtAZ21haWwuY29tPgpbbWFzbmV5YkBvbnN0YXRpb24ub3JnOiBwb3J0ZWQgdG8gbGF0ZXN0IGtl
cm5lbDsgc2V0IGN0eF9iYW5rX251bSB0bwogc3BhcmUgcGFyYW1ldGVyLl0KU2lnbmVkLW9mZi1i
eTogQnJpYW4gTWFzbmV5IDxtYXNuZXliQG9uc3RhdGlvbi5vcmc+Ci0tLQpDaGFuZ2VzIHNpbmNl
IHYzOgotIE5vbmUKCkNoYW5nZXMgc2luY2UgdjI6Ci0gTm9uZQoKQ2hhbmdlcyBzaW5jZSB2MToK
LSBVc2UgZXhpc3RpbmcgX19xY29tX3NjbV9yZXN0b3JlX3NlY19jZmcoKSBmdW5jdGlvbiBzdHVi
IGluCiAgcWNvbV9zY20tMzIuYyB0aGF0IHdhcyB1bmltcGxlbWVudGVkCi0gU2V0IHRoZSBjZmcu
Y3R4X2JhbmtfbnVtIHRvIHRoZSBzcGFyZSBmdW5jdGlvbiBwYXJhbWV0ZXIuIEl0IHdhcwogIHBy
ZXZpb3VzbHkgc2V0IHRvIHRoZSBkZXZpY2VfaWQuCgogZHJpdmVycy9maXJtd2FyZS9xY29tX3Nj
bS0zMi5jIHwgMTcgKysrKysrKysrKysrKysrKy0KIGRyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20u
YyAgICB8IDEzICsrKysrKysrKysrKysKIGluY2x1ZGUvbGludXgvcWNvbV9zY20uaCAgICAgICB8
IDExICsrKysrKysrKysrCiAzIGZpbGVzIGNoYW5nZWQsIDQwIGluc2VydGlvbnMoKyksIDEgZGVs
ZXRpb24oLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLTMyLmMgYi9k
cml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLTMyLmMKaW5kZXggNGMyNTE0ZTVlMjQ5Li41ZDkwYjdm
NWFiNWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20tMzIuYworKysgYi9k
cml2ZXJzL2Zpcm13YXJlL3Fjb21fc2NtLTMyLmMKQEAgLTYxNyw3ICs2MTcsMjIgQEAgaW50IF9f
cWNvbV9zY21fYXNzaWduX21lbShzdHJ1Y3QgZGV2aWNlICpkZXYsIHBoeXNfYWRkcl90IG1lbV9y
ZWdpb24sCiBpbnQgX19xY29tX3NjbV9yZXN0b3JlX3NlY19jZmcoc3RydWN0IGRldmljZSAqZGV2
LCB1MzIgZGV2aWNlX2lkLAogCQkJICAgICAgIHUzMiBzcGFyZSkKIHsKLQlyZXR1cm4gLUVOT0RF
VjsKKwlzdHJ1Y3QgbXNtX3NjbV9zZWNfY2ZnIHsKKwkJX19sZTMyIGlkOworCQlfX2xlMzIgY3R4
X2JhbmtfbnVtOworCX0gY2ZnOworCWludCByZXQsIHNjbV9yZXQgPSAwOworCisJY2ZnLmlkID0g
Y3B1X3RvX2xlMzIoZGV2aWNlX2lkKTsKKwljZmcuY3R4X2JhbmtfbnVtID0gY3B1X3RvX2xlMzIo
c3BhcmUpOworCisJcmV0ID0gcWNvbV9zY21fY2FsbChkZXYsIFFDT01fU0NNX1NWQ19NUCwgUUNP
TV9TQ01fUkVTVE9SRV9TRUNfQ0ZHLAorCQkJICAgICZjZmcsIHNpemVvZihjZmcpLCAmc2NtX3Jl
dCwgc2l6ZW9mKHNjbV9yZXQpKTsKKworCWlmIChyZXQgfHwgc2NtX3JldCkKKwkJcmV0dXJuIHJl
dCA/IHJldCA6IC1FSU5WQUw7CisKKwlyZXR1cm4gMDsKIH0KIAogaW50IF9fcWNvbV9zY21faW9t
bXVfc2VjdXJlX3B0Ymxfc2l6ZShzdHJ1Y3QgZGV2aWNlICpkZXYsIHUzMiBzcGFyZSwKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20uYyBiL2RyaXZlcnMvZmlybXdhcmUvcWNv
bV9zY20uYwppbmRleCA3ZTI4NWZmMzk2MWQuLjI3YzFkOThhMzRlNiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9maXJtd2FyZS9xY29tX3NjbS5jCisrKyBiL2RyaXZlcnMvZmlybXdhcmUvcWNvbV9zY20u
YwpAQCAtMzY3LDYgKzM2NywxOSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHJlc2V0X2NvbnRyb2xf
b3BzIHFjb21fc2NtX3Bhc19yZXNldF9vcHMgPSB7CiAJLmRlYXNzZXJ0ID0gcWNvbV9zY21fcGFz
X3Jlc2V0X2RlYXNzZXJ0LAogfTsKIAorLyoqCisgKiBxY29tX3NjbV9yZXN0b3JlX3NlY19jZmdf
YXZhaWxhYmxlKCkgLSBDaGVjayBpZiBzZWN1cmUgZW52aXJvbm1lbnQKKyAqIHN1cHBvcnRzIHJl
c3RvcmUgc2VjdXJpdHkgY29uZmlnIGludGVyZmFjZS4KKyAqCisgKiBSZXR1cm4gdHJ1ZSBpZiBy
ZXN0b3JlLWNmZyBpbnRlcmZhY2UgaXMgc3VwcG9ydGVkLCBmYWxzZSBpZiBub3QuCisgKi8KK2Jv
b2wgcWNvbV9zY21fcmVzdG9yZV9zZWNfY2ZnX2F2YWlsYWJsZSh2b2lkKQoreworCXJldHVybiBf
X3Fjb21fc2NtX2lzX2NhbGxfYXZhaWxhYmxlKF9fc2NtLT5kZXYsIFFDT01fU0NNX1NWQ19NUCwK
KwkJCQkJICAgIFFDT01fU0NNX1JFU1RPUkVfU0VDX0NGRyk7Cit9CitFWFBPUlRfU1lNQk9MKHFj
b21fc2NtX3Jlc3RvcmVfc2VjX2NmZ19hdmFpbGFibGUpOworCiBpbnQgcWNvbV9zY21fcmVzdG9y
ZV9zZWNfY2ZnKHUzMiBkZXZpY2VfaWQsIHUzMiBzcGFyZSkKIHsKIAlyZXR1cm4gX19xY29tX3Nj
bV9yZXN0b3JlX3NlY19jZmcoX19zY20tPmRldiwgZGV2aWNlX2lkLCBzcGFyZSk7CmRpZmYgLS1n
aXQgYS9pbmNsdWRlL2xpbnV4L3Fjb21fc2NtLmggYi9pbmNsdWRlL2xpbnV4L3Fjb21fc2NtLmgK
aW5kZXggYjQ5YjczNGQ2NjJjLi4wNDM4MmUxNzk4ZTQgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGlu
dXgvcWNvbV9zY20uaAorKysgYi9pbmNsdWRlL2xpbnV4L3Fjb21fc2NtLmgKQEAgLTM0LDYgKzM0
LDE2IEBAIGVudW0gcWNvbV9zY21fb2NtZW1fY2xpZW50IHsKIAlRQ09NX1NDTV9PQ01FTV9ERUJV
R19JRCwKIH07CiAKK2VudW0gcWNvbV9zY21fc2VjX2Rldl9pZCB7CisJUUNPTV9TQ01fTURTU19E
RVZfSUQgICAgPSAxLAorCVFDT01fU0NNX09DTUVNX0RFVl9JRCAgID0gNSwKKwlRQ09NX1NDTV9Q
Q0lFMF9ERVZfSUQgICA9IDExLAorCVFDT01fU0NNX1BDSUUxX0RFVl9JRCAgID0gMTIsCisJUUNP
TV9TQ01fR0ZYX0RFVl9JRCAgICAgPSAxOCwKKwlRQ09NX1NDTV9VRlNfREVWX0lEICAgICA9IDE5
LAorCVFDT01fU0NNX0lDRV9ERVZfSUQgICAgID0gMjAsCit9OworCiAjZGVmaW5lIFFDT01fU0NN
X1ZNSURfSExPUyAgICAgICAweDMKICNkZWZpbmUgUUNPTV9TQ01fVk1JRF9NU1NfTVNBICAgIDB4
RgogI2RlZmluZSBRQ09NX1NDTV9WTUlEX1dMQU4gICAgICAgMHgxOApAQCAtNzAsNiArODAsNyBA
QCBleHRlcm4gaW50IHFjb21fc2NtX2Fzc2lnbl9tZW0ocGh5c19hZGRyX3QgbWVtX2FkZHIsIHNp
emVfdCBtZW1fc3osCiBleHRlcm4gdm9pZCBxY29tX3NjbV9jcHVfcG93ZXJfZG93bih1MzIgZmxh
Z3MpOwogZXh0ZXJuIHUzMiBxY29tX3NjbV9nZXRfdmVyc2lvbih2b2lkKTsKIGV4dGVybiBpbnQg
cWNvbV9zY21fc2V0X3JlbW90ZV9zdGF0ZSh1MzIgc3RhdGUsIHUzMiBpZCk7CitleHRlcm4gYm9v
bCBxY29tX3NjbV9yZXN0b3JlX3NlY19jZmdfYXZhaWxhYmxlKHZvaWQpOwogZXh0ZXJuIGludCBx
Y29tX3NjbV9yZXN0b3JlX3NlY19jZmcodTMyIGRldmljZV9pZCwgdTMyIHNwYXJlKTsKIGV4dGVy
biBpbnQgcWNvbV9zY21faW9tbXVfc2VjdXJlX3B0Ymxfc2l6ZSh1MzIgc3BhcmUsIHNpemVfdCAq
c2l6ZSk7CiBleHRlcm4gaW50IHFjb21fc2NtX2lvbW11X3NlY3VyZV9wdGJsX2luaXQodTY0IGFk
ZHIsIHUzMiBzaXplLCB1MzIgc3BhcmUpOwotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1k
ZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
