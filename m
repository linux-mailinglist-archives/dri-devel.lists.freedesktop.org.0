Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4F2011C973
	for <lists+dri-devel@lfdr.de>; Tue, 14 May 2019 15:31:47 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 666D889294;
	Tue, 14 May 2019 13:31:44 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DDD3289271
 for <dri-devel@lists.freedesktop.org>; Tue, 14 May 2019 13:31:42 +0000 (UTC)
Received: from mail-qt1-f170.google.com (mail-qt1-f170.google.com
 [209.85.160.170])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 0658D2166E
 for <dri-devel@lists.freedesktop.org>; Tue, 14 May 2019 13:31:42 +0000 (UTC)
Received: by mail-qt1-f170.google.com with SMTP id y42so4194958qtk.6
 for <dri-devel@lists.freedesktop.org>; Tue, 14 May 2019 06:31:41 -0700 (PDT)
X-Gm-Message-State: APjAAAXs7d9e8/zeeIcCC/qOh4G1kyJTvrBKeBut7LAvurLTHMJf8ihe
 4GntKo7s+N6HU5immXVD0PI5WMNn0Dfs+EYW+w==
X-Google-Smtp-Source: APXvYqx5PZ146HTKm1grkxaHqzrIuoGjydKJXfkN4AiOs2RfH2WAq6ecDApsIceJO2HPPmhkucTgPifjnQGLkvgtDkc=
X-Received: by 2002:ac8:3862:: with SMTP id r31mr29548030qtb.26.1557840701092; 
 Tue, 14 May 2019 06:31:41 -0700 (PDT)
MIME-Version: 1.0
References: <20190514104801.20448-1-boris.brezillon@collabora.com>
 <20190514104801.20448-3-boris.brezillon@collabora.com>
In-Reply-To: <20190514104801.20448-3-boris.brezillon@collabora.com>
From: Rob Herring <robh+dt@kernel.org>
Date: Tue, 14 May 2019 08:31:29 -0500
X-Gmail-Original-Message-ID: <CAL_JsqKg52T4dVXvv8OJMwUAYDxauRmzKKgFW2+Loi3hqGk-AA@mail.gmail.com>
Message-ID: <CAL_JsqKg52T4dVXvv8OJMwUAYDxauRmzKKgFW2+Loi3hqGk-AA@mail.gmail.com>
Subject: Re: [RESEND PATCH v2 2/2] drm/panfrost: Expose perf counters through
 debugfs
To: Boris Brezillon <boris.brezillon@collabora.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=kernel.org; s=default; t=1557840702;
 bh=wLDSgEQp/sRxfAViLGq5flyf4Pkb2XXeIfiBf7f0q9U=;
 h=References:In-Reply-To:From:Date:Subject:To:Cc:From;
 b=pYE4i79mHcy4JfX/I5AFZXasRtK62vfPf4KsiXwfPdNFC3idKVA9xLPIvImkNaE16
 YMYPN60CxAJ3u260+s64fJxAl9BW1gK78ERFpkQ5awvEXyF6Kag4y0hF7qV9xOs3SH
 zTzkFdIjCQzEm0X4KSACY4Ao3a+IMGuVDYCptHe0=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel <dri-devel@lists.freedesktop.org>,
 Steven Price <steven.price@arm.com>, kernel@collabora.com,
 Alyssa Rosenzweig <alyssa@rosenzweig.io>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBNYXkgMTQsIDIwMTkgYXQgNTo0OCBBTSBCb3JpcyBCcmV6aWxsb24KPGJvcmlzLmJy
ZXppbGxvbkBjb2xsYWJvcmEuY29tPiB3cm90ZToKPgo+IEFkZCBhIHdheSB0byBkdW1wIHBlcmYg
Y291bnRlcnMgdGhyb3VnaCBkZWJ1Z2ZzLiBUaGUgaW1wbGVtZW50YXRpb24gaXMKPiBrZXB0IHNp
bXBsZSBhbmQgaGFzIGEgbnVtYmVyIG9mIGxpbWl0YXRpb25zOgo+Cj4gKiBpdCdzIG5vdCBkZXNp
Z25lZCBmb3IgbXVsdGktdXNlciB1c2FnZSBhcyB0aGUgY291bnRlciB2YWx1ZXMgYXJlCj4gICBy
ZXNldCBhZnRlciBlYWNoIGR1bXAgYW5kIHRoZXJlJ3Mgbm8gcGVyLXVzZXIgY29udGV4dAo+ICog
b25seSBhY2Nlc3NpYmxlIHRvIHJvb3QgdXNlcnMKPiAqIG5vIGNvdW50ZXJzIG5hbWluZy9wb3Np
dGlvbiBhYnN0cmFjdGlvbi4gVGhpbmdzIGFyZSBkdW1wZWQgaW4gYSByYXcKPiAgIGZvcm1hdCB0
aGF0IGhhcyB0byBiZSBwYXJzZWQgYnkgdGhlIHVzZXIgd2hvIGhhcyB0byBrbm93IHdoZXJlIHRo
ZQo+ICAgcmVsZXZhbnQgdmFsdWVzIGFyZSBhbmQgd2hhdCB0aGV5IG1lYW4KPgo+IFRoaXMgaW1w
bGVtZW50YXRpb24gaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBieSBtZXNhIGRldmVsb3BlcnMgdG8g
aGVscAo+IGRlYnVnIHBlcmYtcmVsYXRlZCBpc3N1ZXMgd2hpbGUgd2Ugd29yayBvbiBhIG1vcmUg
Z2VuZXJpYyBhcHByb2FjaCB0aGF0Cj4gd291bGQgYWxsb3cgYWxsIEdQVSBkcml2ZXJzIHRvIGV4
cG9zZSB0aGVpciBjb3VudGVycyBpbiBhIGNvbnNpc3RlbnQKPiB3YXkuIEFzIGEgcmVzdWx0LCB0
aGlzIGRlYnVnZnMgaW50ZXJmYWNlIGlzIGNvbnNpZGVyZWQgdW5zdGFibGUgYW5kCj4gbWlnaHQg
YmUgZGVwcmVjYXRlZCBpbiB0aGUgZnV0dXJlLgo+Cj4gU2lnbmVkLW9mZi1ieTogQm9yaXMgQnJl
emlsbG9uIDxib3Jpcy5icmV6aWxsb25AY29sbGFib3JhLmNvbT4KPiAtLS0KPiBDaGFuZ2VzIGlu
IHYyOgo+ICogRXhwb3NlIGNvdW50ZXJzIHRocm91Z2ggZGVidWdmcyBhbmQga2VlcCB0aGluZ3Mg
c2ltcGxlIGZvciBub3cgKHdlJ2xsCj4gICB3b3JrIG9uIGEgZ2VuZXJpYyBzb2x1dGlvbiBpbiBw
YXJhbGxlbCkKPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L01ha2VmaWxlICAgICAg
ICAgICB8ICAgMyArLQo+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNl
LmMgIHwgICA5ICsKPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5o
ICB8ICAgMyArCj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kcnYuYyAgICAg
fCAgIDcgKwo+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ3B1LmMgICAgIHwg
ICA3ICsKPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQuYyB8IDMz
OSArKysrKysrKysrKysrKysrKysrKwo+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJv
c3RfcGVyZmNudC5oIHwgIDE1ICsKPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0
X3JlZ3MuaCAgICB8ICAxOSArKwo+ICA4IGZpbGVzIGNoYW5nZWQsIDQwMSBpbnNlcnRpb25zKCsp
LCAxIGRlbGV0aW9uKC0pCj4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vcGFu
ZnJvc3QvcGFuZnJvc3RfcGVyZmNudC5jCj4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dw
dS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfcGVyZmNudC5oCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL3BhbmZyb3N0L01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L01h
a2VmaWxlCj4gaW5kZXggNmRlNzJkMTNjNThmLi5lY2YwODY0Y2I1MTUgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L01ha2VmaWxlCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L3BhbmZyb3N0L01ha2VmaWxlCj4gQEAgLTcsNiArNyw3IEBAIHBhbmZyb3N0LXkgOj0gXAo+ICAg
ICAgICAgcGFuZnJvc3RfZ2VtLm8gXAo+ICAgICAgICAgcGFuZnJvc3RfZ3B1Lm8gXAo+ICAgICAg
ICAgcGFuZnJvc3Rfam9iLm8gXAo+IC0gICAgICAgcGFuZnJvc3RfbW11Lm8KPiArICAgICAgIHBh
bmZyb3N0X21tdS5vIFwKPiArICAgICAgIHBhbmZyb3N0X3BlcmZjbnQubwo+Cj4gIG9iai0kKENP
TkZJR19EUk1fUEFORlJPU1QpICs9IHBhbmZyb3N0Lm8KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZy
b3N0L3BhbmZyb3N0X2RldmljZS5jCj4gaW5kZXggM2IyYmNlZDFiMDE1Li5iMjM5NWZjNjhhMWYg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5j
Cj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5jCj4gQEAg
LTE0LDYgKzE0LDcgQEAKPiAgI2luY2x1ZGUgInBhbmZyb3N0X2dwdS5oIgo+ICAjaW5jbHVkZSAi
cGFuZnJvc3Rfam9iLmgiCj4gICNpbmNsdWRlICJwYW5mcm9zdF9tbXUuaCIKPiArI2luY2x1ZGUg
InBhbmZyb3N0X3BlcmZjbnQuaCIKPgo+ICBzdGF0aWMgaW50IHBhbmZyb3N0X3Jlc2V0X2luaXQo
c3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCj4gIHsKPiBAQCAtMTQ5LDcgKzE1MCwxMyBA
QCBpbnQgcGFuZnJvc3RfZGV2aWNlX2luaXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYp
Cj4gICAgICAgICBwbV9ydW50aW1lX21hcmtfbGFzdF9idXN5KHBmZGV2LT5kZXYpOwo+ICAgICAg
ICAgcG1fcnVudGltZV9wdXRfYXV0b3N1c3BlbmQocGZkZXYtPmRldik7Cj4KPiArICAgICAgIGVy
ciA9IHBhbmZyb3N0X3BlcmZjbnRfaW5pdChwZmRldik7Cj4gKyAgICAgICBpZiAoZXJyKQo+ICsg
ICAgICAgICAgICAgICBnb3RvIGVycl9vdXQ1Owo+ICsKPiAgICAgICAgIHJldHVybiAwOwo+ICtl
cnJfb3V0NToKPiArICAgICAgIHBhbmZyb3N0X2pvYl9maW5pKHBmZGV2KTsKPiAgZXJyX291dDQ6
Cj4gICAgICAgICBwYW5mcm9zdF9tbXVfZmluaShwZmRldik7Cj4gIGVycl9vdXQzOgo+IEBAIC0x
NjUsNiArMTcyLDcgQEAgaW50IHBhbmZyb3N0X2RldmljZV9pbml0KHN0cnVjdCBwYW5mcm9zdF9k
ZXZpY2UgKnBmZGV2KQo+Cj4gIHZvaWQgcGFuZnJvc3RfZGV2aWNlX2Zpbmkoc3RydWN0IHBhbmZy
b3N0X2RldmljZSAqcGZkZXYpCj4gIHsKPiArICAgICAgIHBhbmZyb3N0X3BlcmZjbnRfZmluaShw
ZmRldik7Cj4gICAgICAgICBwYW5mcm9zdF9qb2JfZmluaShwZmRldik7Cj4gICAgICAgICBwYW5m
cm9zdF9tbXVfZmluaShwZmRldik7Cj4gICAgICAgICBwYW5mcm9zdF9ncHVfZmluaShwZmRldik7
Cj4gQEAgLTIzNyw2ICsyNDUsNyBAQCBpbnQgcGFuZnJvc3RfZGV2aWNlX3Jlc3VtZShzdHJ1Y3Qg
ZGV2aWNlICpkZXYpCj4gICAgICAgICBwYW5mcm9zdF9tbXVfZW5hYmxlKHBmZGV2LCAwKTsKPiAg
ICAgICAgIHBhbmZyb3N0X2pvYl9lbmFibGVfaW50ZXJydXB0cyhwZmRldik7Cj4gICAgICAgICBw
YW5mcm9zdF9kZXZmcmVxX3Jlc3VtZShwZmRldik7Cj4gKyAgICAgICBwYW5mcm9zdF9wZXJmY250
X3Jlc3VtZShwZmRldik7Cj4KPiAgICAgICAgIHJldHVybiAwOwo+ICB9Cj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2UuaCBiL2RyaXZlcnMvZ3B1
L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2UuaAo+IGluZGV4IDU2ZjQ1MmRmYjQ5MC4uNjI4
ZDcwNGI3NmJhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9z
dF9kZXZpY2UuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZp
Y2UuaAo+IEBAIC0xNCw2ICsxNCw3IEBAIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2U7Cj4gIHN0cnVj
dCBwYW5mcm9zdF9tbXU7Cj4gIHN0cnVjdCBwYW5mcm9zdF9qb2Jfc2xvdDsKPiAgc3RydWN0IHBh
bmZyb3N0X2pvYjsKPiArc3RydWN0IHBhbmZyb3N0X3BlcmZjbnQ7Cj4KPiAgI2RlZmluZSBOVU1f
Sk9CX1NMT1RTIDMKPgo+IEBAIC03Nyw2ICs3OCw4IEBAIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2Ug
ewo+ICAgICAgICAgc3RydWN0IHBhbmZyb3N0X2pvYiAqam9ic1tOVU1fSk9CX1NMT1RTXTsKPiAg
ICAgICAgIHN0cnVjdCBsaXN0X2hlYWQgc2NoZWR1bGVkX2pvYnM7Cj4KPiArICAgICAgIHN0cnVj
dCBwYW5mcm9zdF9wZXJmY250ICpwZXJmY250Owo+ICsKPiAgICAgICAgIHN0cnVjdCBtdXRleCBz
Y2hlZF9sb2NrOwo+ICAgICAgICAgc3RydWN0IG11dGV4IHJlc2V0X2xvY2s7Cj4KPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jIGIvZHJpdmVycy9n
cHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jCj4gaW5kZXggOTRiMDgxOWFkNTBiLi4yMDIz
OTc1MzdlZWEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0
X2Rydi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jCj4g
QEAgLTE5LDYgKzE5LDcgQEAKPiAgI2luY2x1ZGUgInBhbmZyb3N0X21tdS5oIgo+ICAjaW5jbHVk
ZSAicGFuZnJvc3Rfam9iLmgiCj4gICNpbmNsdWRlICJwYW5mcm9zdF9ncHUuaCIKPiArI2luY2x1
ZGUgInBhbmZyb3N0X3BlcmZjbnQuaCIKPgo+ICBzdGF0aWMgaW50IHBhbmZyb3N0X2lvY3RsX2dl
dF9wYXJhbShzdHJ1Y3QgZHJtX2RldmljZSAqZGRldiwgdm9pZCAqZGF0YSwgc3RydWN0IGRybV9m
aWxlICpmaWxlKQo+ICB7Cj4gQEAgLTM0MCw2ICszNDEsMTEgQEAgc3RhdGljIGNvbnN0IHN0cnVj
dCBkcm1faW9jdGxfZGVzYyBwYW5mcm9zdF9kcm1fZHJpdmVyX2lvY3Rsc1tdID0gewo+Cj4gIERF
RklORV9EUk1fR0VNX1NITUVNX0ZPUFMocGFuZnJvc3RfZHJtX2RyaXZlcl9mb3BzKTsKPgo+ICtz
dGF0aWMgaW50IHBhbmZyb3N0X2RlYnVnZnNfaW5pdChzdHJ1Y3QgZHJtX21pbm9yICptaW5vcikK
PiArewo+ICsgICAgICAgcmV0dXJuIHBhbmZyb3N0X3BlcmZjbnRfZGVidWdmc19pbml0KG1pbm9y
KTsKPiArfQo+ICsKPiAgc3RhdGljIHN0cnVjdCBkcm1fZHJpdmVyIHBhbmZyb3N0X2RybV9kcml2
ZXIgPSB7Cj4gICAgICAgICAuZHJpdmVyX2ZlYXR1cmVzICAgICAgICA9IERSSVZFUl9SRU5ERVIg
fCBEUklWRVJfR0VNIHwgRFJJVkVSX1BSSU1FIHwKPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgRFJJVkVSX1NZTkNPQkosCj4gQEAgLTM1OSw2ICszNjUsNyBAQCBzdGF0aWMgc3Ry
dWN0IGRybV9kcml2ZXIgcGFuZnJvc3RfZHJtX2RyaXZlciA9IHsKPiAgICAgICAgIC5wcmltZV9m
ZF90b19oYW5kbGUgICAgID0gZHJtX2dlbV9wcmltZV9mZF90b19oYW5kbGUsCj4gICAgICAgICAu
Z2VtX3ByaW1lX2ltcG9ydF9zZ190YWJsZSA9IHBhbmZyb3N0X2dlbV9wcmltZV9pbXBvcnRfc2df
dGFibGUsCj4gICAgICAgICAuZ2VtX3ByaW1lX21tYXAgICAgICAgICA9IGRybV9nZW1fcHJpbWVf
bW1hcCwKPiArICAgICAgIC5kZWJ1Z2ZzX2luaXQgICAgICAgICAgID0gcGFuZnJvc3RfZGVidWdm
c19pbml0LAo+ICB9Owo+Cj4gIHN0YXRpYyBpbnQgcGFuZnJvc3RfcHJvYmUoc3RydWN0IHBsYXRm
b3JtX2RldmljZSAqcGRldikKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0
L3BhbmZyb3N0X2dwdS5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dwdS5j
Cj4gaW5kZXggNmU2OGExMDAyOTFjLi4yMGFiMzMzZmM5MjUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2dwdS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L3BhbmZyb3N0L3BhbmZyb3N0X2dwdS5jCj4gQEAgLTE1LDYgKzE1LDcgQEAKPiAgI2luY2x1ZGUg
InBhbmZyb3N0X2ZlYXR1cmVzLmgiCj4gICNpbmNsdWRlICJwYW5mcm9zdF9pc3N1ZXMuaCIKPiAg
I2luY2x1ZGUgInBhbmZyb3N0X2dwdS5oIgo+ICsjaW5jbHVkZSAicGFuZnJvc3RfcGVyZmNudC5o
Igo+ICAjaW5jbHVkZSAicGFuZnJvc3RfcmVncy5oIgo+Cj4gIHN0YXRpYyBpcnFyZXR1cm5fdCBw
YW5mcm9zdF9ncHVfaXJxX2hhbmRsZXIoaW50IGlycSwgdm9pZCAqZGF0YSkKPiBAQCAtNDAsNiAr
NDEsMTIgQEAgc3RhdGljIGlycXJldHVybl90IHBhbmZyb3N0X2dwdV9pcnFfaGFuZGxlcihpbnQg
aXJxLCB2b2lkICpkYXRhKQo+ICAgICAgICAgICAgICAgICBncHVfd3JpdGUocGZkZXYsIEdQVV9J
TlRfTUFTSywgMCk7Cj4gICAgICAgICB9Cj4KPiArICAgICAgIGlmIChzdGF0ZSAmIEdQVV9JUlFf
UEVSRkNOVF9TQU1QTEVfQ09NUExFVEVEKQo+ICsgICAgICAgICAgICAgICBwYW5mcm9zdF9wZXJm
Y250X3NhbXBsZV9kb25lKHBmZGV2KTsKPiArCj4gKyAgICAgICBpZiAoc3RhdGUgJiBHUFVfSVJR
X0NMRUFOX0NBQ0hFU19DT01QTEVURUQpCj4gKyAgICAgICAgICAgICAgIHBhbmZyb3N0X3BlcmZj
bnRfY2xlYW5fY2FjaGVfZG9uZShwZmRldik7Cj4gKwo+ICAgICAgICAgZ3B1X3dyaXRlKHBmZGV2
LCBHUFVfSU5UX0NMRUFSLCBzdGF0ZSk7Cj4KPiAgICAgICAgIHJldHVybiBJUlFfSEFORExFRDsK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQu
YyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9wZXJmY250LmMKPiBuZXcgZmls
ZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAwMDAwMDAwMDAwMC4uODA5Mzc4M2E1YTI2Cj4gLS0tIC9k
ZXYvbnVsbAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9wZXJmY250
LmMKPiBAQCAtMCwwICsxLDMzOSBAQAo+ICsvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BM
LTIuMAo+ICsvKiBDb3B5cmlnaHQgMjAxOSBDb2xsYWJvcmEgTHRkICovCj4gKwo+ICsjaW5jbHVk
ZSA8ZHJtL2RybV9maWxlLmg+Cj4gKyNpbmNsdWRlIDxkcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIu
aD4KPiArI2luY2x1ZGUgPGRybS9wYW5mcm9zdF9kcm0uaD4KPiArI2luY2x1ZGUgPGxpbnV4L2Nv
bXBsZXRpb24uaD4KPiArI2luY2x1ZGUgPGxpbnV4L2RlYnVnZnMuaD4KPiArI2luY2x1ZGUgPGxp
bnV4L2lvcG9sbC5oPgo+ICsjaW5jbHVkZSA8bGludXgvcG1fcnVudGltZS5oPgo+ICsjaW5jbHVk
ZSA8bGludXgvc2xhYi5oPgo+ICsjaW5jbHVkZSA8bGludXgvdWFjY2Vzcy5oPgo+ICsKPiArI2lu
Y2x1ZGUgInBhbmZyb3N0X2RldmljZS5oIgo+ICsjaW5jbHVkZSAicGFuZnJvc3RfZmVhdHVyZXMu
aCIKPiArI2luY2x1ZGUgInBhbmZyb3N0X2dlbS5oIgo+ICsjaW5jbHVkZSAicGFuZnJvc3RfaXNz
dWVzLmgiCj4gKyNpbmNsdWRlICJwYW5mcm9zdF9qb2IuaCIKPiArI2luY2x1ZGUgInBhbmZyb3N0
X21tdS5oIgo+ICsjaW5jbHVkZSAicGFuZnJvc3RfcmVncy5oIgo+ICsKPiArI2RlZmluZSBDT1VO
VEVSU19QRVJfQkxPQ0sgICAgICAgICAgICAgNjQKPiArI2RlZmluZSBCWVRFU19QRVJfQ09VTlRF
UiAgICAgICAgICAgICAgNAo+ICsjZGVmaW5lIEJMT0NLU19QRVJfQ09SRUdST1VQICAgICAgICAg
ICA4Cj4gKyNkZWZpbmUgVjRfU0hBREVSU19QRVJfQ09SRUdST1VQICAgICAgIDQKPiArCj4gK3N0
cnVjdCBwYW5mcm9zdF9wZXJmY250IHsKPiArICAgICAgIHN0cnVjdCBwYW5mcm9zdF9nZW1fb2Jq
ZWN0ICpibzsKPiArICAgICAgIHNpemVfdCBib3NpemU7Cj4gKyAgICAgICB2b2lkICpidWY7Cj4g
KyAgICAgICBib29sIGVuYWJsZWQ7Cj4gKyAgICAgICBzdHJ1Y3QgbXV0ZXggbG9jazsKPiArICAg
ICAgIHN0cnVjdCBjb21wbGV0aW9uIGR1bXBfY29tcDsKPiArfTsKPiArCj4gK3ZvaWQgcGFuZnJv
c3RfcGVyZmNudF9jbGVhbl9jYWNoZV9kb25lKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2
KQo+ICt7Cj4gKyAgICAgICBjb21wbGV0ZSgmcGZkZXYtPnBlcmZjbnQtPmR1bXBfY29tcCk7Cj4g
K30KPiArCj4gK3ZvaWQgcGFuZnJvc3RfcGVyZmNudF9zYW1wbGVfZG9uZShzdHJ1Y3QgcGFuZnJv
c3RfZGV2aWNlICpwZmRldikKPiArewo+ICsgICAgICAgZ3B1X3dyaXRlKHBmZGV2LCBHUFVfQ01E
LCBHUFVfQ01EX0NMRUFOX0NBQ0hFUyk7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHBhbmZyb3N0
X3BlcmZjbnRfc2V0dXAoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCj4gK3sKPiArICAg
ICAgIHUzMiBjZmc7Cj4gKwo+ICsgICAgICAgLyoKPiArICAgICAgICAqIEFsd2F5cyB1c2UgYWRk
cmVzcyBzcGFjZSAwIGZvciBub3cuCj4gKyAgICAgICAgKiBGSVhNRTogdGhpcyBuZWVkcyB0byBi
ZSB1cGRhdGVkIHdoZW4gd2Ugc3RhcnQgdXNpbmcgZGlmZmVyZW50Cj4gKyAgICAgICAgKiBhZGRy
ZXNzIHNwYWNlLgo+ICsgICAgICAgICovCj4gKyAgICAgICBjZmcgPSBHUFVfUEVSRkNOVF9DRkdf
QVMoMCk7Cj4gKyAgICAgICBpZiAocGFuZnJvc3RfbW9kZWxfY21wKHBmZGV2LCAweDEwMDApID49
IDApCgpZb3UndmUgZ290IGEgY291cGxlIG9mIHRoZXNlLiBQZXJoYXBzIHdlIHNob3VsZCBhZGQg
ZWl0aGVyIGEKbW9kZWxfaXNfYmlmcm9zdCgpIGhlbHBlciBvciBhbiBpc19iaWZyb3N0IHZhcmlh
YmxlIHRvIHVzZS4KCj4gKyAgICAgICAgICAgICAgIGNmZyB8PSBHUFVfUEVSRkNOVF9DRkdfU0VU
U0VMKDEpOwo+ICsKPiArICAgICAgIGdwdV93cml0ZShwZmRldiwgR1BVX1BFUkZDTlRfQ0ZHLAo+
ICsgICAgICAgICAgICAgICAgIGNmZyB8IEdQVV9QRVJGQ05UX0NGR19NT0RFKEdQVV9QRVJGQ05U
X0NGR19NT0RFX09GRikpOwo+ICsKPiArICAgICAgIGlmICghcGZkZXYtPnBlcmZjbnQtPmVuYWJs
ZWQpCj4gKyAgICAgICAgICAgICAgIHJldHVybjsKPiArCj4gKyAgICAgICBncHVfd3JpdGUocGZk
ZXYsIEdQVV9QUkZDTlRfSk1fRU4sIDB4ZmZmZmZmZmYpOwo+ICsgICAgICAgZ3B1X3dyaXRlKHBm
ZGV2LCBHUFVfUFJGQ05UX1NIQURFUl9FTiwgMHhmZmZmZmZmZik7Cj4gKyAgICAgICBncHVfd3Jp
dGUocGZkZXYsIEdQVV9QUkZDTlRfTU1VX0wyX0VOLCAweGZmZmZmZmZmKTsKPiArCj4gKyAgICAg
ICAvKgo+ICsgICAgICAgICogRHVlIHRvIFBSTEFNLTgxODYgd2UgbmVlZCB0byBkaXNhYmxlIHRo
ZSBUaWxlciBiZWZvcmUgd2UgZW5hYmxlIEhXCj4gKyAgICAgICAgKiBjb3VudGVycy4KClNlZW1z
IGxpa2UgeW91IGNvdWxkIGp1c3QgYWx3YXlzIGFwcGx5IHRoZSB3b3JrLWFyb3VuZD8gSXQgZG9l
c24ndApsb29rIGxpa2UgaXQgd291bGQgYmUgbXVjaCBkaWZmZXJlbnQuCgo+ICsgICAgICAgICov
Cj4gKyAgICAgICBpZiAocGFuZnJvc3RfaGFzX2h3X2lzc3VlKHBmZGV2LCBIV19JU1NVRV84MTg2
KSkKPiArICAgICAgICAgICAgICAgZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUFJGQ05UX1RJTEVSX0VO
LCAwKTsKPiArICAgICAgIGVsc2UKPiArICAgICAgICAgICAgICAgZ3B1X3dyaXRlKHBmZGV2LCBH
UFVfUFJGQ05UX1RJTEVSX0VOLCAweGZmZmZmZmZmKTsKPiArCj4gKyAgICAgICBncHVfd3JpdGUo
cGZkZXYsIEdQVV9QRVJGQ05UX0NGRywKPiArICAgICAgICAgICAgICAgICBjZmcgfCBHUFVfUEVS
RkNOVF9DRkdfTU9ERShHUFVfUEVSRkNOVF9DRkdfTU9ERV9NQU5VQUwpKTsKPiArCj4gKyAgICAg
ICBpZiAocGFuZnJvc3RfaGFzX2h3X2lzc3VlKHBmZGV2LCBIV19JU1NVRV84MTg2KSkKPiArICAg
ICAgICAgICAgICAgZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUFJGQ05UX1RJTEVSX0VOLCAweGZmZmZm
ZmZmKTsKPiArfQo+ICsKPiArc3RhdGljIGludCBwYW5mcm9zdF9wZXJmY250X2R1bXAoc3RydWN0
IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCj4gK3sKPiArICAgICAgIHU2NCBncHV2YTsKPiArICAg
ICAgIGludCByZXQ7Cj4gKwo+ICsgICAgICAgcmVpbml0X2NvbXBsZXRpb24oJnBmZGV2LT5wZXJm
Y250LT5kdW1wX2NvbXApOwo+ICsgICAgICAgZ3B1dmEgPSBwZmRldi0+cGVyZmNudC0+Ym8tPm5v
ZGUuc3RhcnQgPDwgUEFHRV9TSElGVDsKPiArICAgICAgIGdwdV93cml0ZShwZmRldiwgR1BVX1BF
UkZDTlRfQkFTRV9MTywgZ3B1dmEpOwo+ICsgICAgICAgZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUEVS
RkNOVF9CQVNFX0hJLCBncHV2YSA+PiAzMik7Cj4gKyAgICAgICBncHVfd3JpdGUocGZkZXYsIEdQ
VV9DTUQsIEdQVV9DTURfUEVSRkNOVF9TQU1QTEUpOwo+ICsgICAgICAgcmV0ID0gd2FpdF9mb3Jf
Y29tcGxldGlvbl9pbnRlcnJ1cHRpYmxlX3RpbWVvdXQoJnBmZGV2LT5wZXJmY250LT5kdW1wX2Nv
bXAsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBtc2Vjc190b19qaWZmaWVzKDEwMDApKTsKPiArICAgICAgIGlmICghcmV0KQo+ICsgICAg
ICAgICAgICAgICByZXQgPSAtRVRJTUVET1VUOwo+ICsgICAgICAgZWxzZSBpZiAocmV0ID4gMCkK
PiArICAgICAgICAgICAgICAgcmV0ID0gMDsKPiArCj4gKyAgICAgICByZXR1cm4gcmV0Owo+ICt9
Cj4gKwo+ICt2b2lkIHBhbmZyb3N0X3BlcmZjbnRfcmVzdW1lKHN0cnVjdCBwYW5mcm9zdF9kZXZp
Y2UgKnBmZGV2KQoKTm8gc3VzcGVuZCBoYW5kbGluZyBuZWVkZWQ/Cgo+ICt7Cj4gKyAgICAgICBp
ZiAocGZkZXYtPnBlcmZjbnQpCj4gKyAgICAgICAgICAgICAgIHBhbmZyb3N0X3BlcmZjbnRfc2V0
dXAocGZkZXYpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgc3NpemVfdCBwYW5mcm9zdF9wZXJmY250X2Vu
YWJsZV9yZWFkKHN0cnVjdCBmaWxlICpmaWxlLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY2hhciBfX3VzZXIgKnVzZXJfYnVmLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZV90IGNvdW50LCBsb2ZmX3QgKnBwb3Mp
Cj4gK3sKPiArICAgICAgIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gZmlsZS0+cHJp
dmF0ZV9kYXRhOwo+ICsgICAgICAgc3NpemVfdCByZXQ7Cj4gKwo+ICsgICAgICAgbXV0ZXhfbG9j
aygmcGZkZXYtPnBlcmZjbnQtPmxvY2spOwo+ICsgICAgICAgcmV0ID0gc2ltcGxlX3JlYWRfZnJv
bV9idWZmZXIodXNlcl9idWYsIGNvdW50LCBwcG9zLAo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgcGZkZXYtPnBlcmZjbnQtPmVuYWJsZWQgPyAiWVxuIiA6ICJOXG4iLAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMik7Cj4gKyAgICAgICBtdXRl
eF91bmxvY2soJnBmZGV2LT5wZXJmY250LT5sb2NrKTsKPiArCj4gKyAgICAgICByZXR1cm4gcmV0
Owo+ICt9Cj4gKwo+ICtzdGF0aWMgc3NpemVfdCBwYW5mcm9zdF9wZXJmY250X2VuYWJsZV93cml0
ZShzdHJ1Y3QgZmlsZSAqZmlsZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBjb25zdCBjaGFyIF9fdXNlciAqdXNlcl9idWYsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZV90IGNvdW50LCBsb2ZmX3QgKnBwb3Mp
Cj4gK3sKPiArICAgICAgIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gZmlsZS0+cHJp
dmF0ZV9kYXRhOwo+ICsgICAgICAgYm9vbCBlbmFibGU7Cj4gKyAgICAgICBpbnQgcmV0Owo+ICsK
PiArICAgICAgIHJldCA9IGtzdHJ0b2Jvb2xfZnJvbV91c2VyKHVzZXJfYnVmLCBjb3VudCwgJmVu
YWJsZSk7Cj4gKyAgICAgICBpZiAocmV0KQo+ICsgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+
ICsKPiArICAgICAgIHJldCA9IHBtX3J1bnRpbWVfZ2V0X3N5bmMocGZkZXYtPmRldik7Cj4gKyAg
ICAgICBpZiAocmV0IDwgMCkKPiArICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiArCj4gKyAg
ICAgICBtdXRleF9sb2NrKCZwZmRldi0+cGVyZmNudC0+bG9jayk7Cj4gKyAgICAgICBpZiAoZW5h
YmxlICE9IHBmZGV2LT5wZXJmY250LT5lbmFibGVkKSB7Cj4gKyAgICAgICAgICAgICAgIHBmZGV2
LT5wZXJmY250LT5lbmFibGVkID0gZW5hYmxlOwo+ICsgICAgICAgICAgICAgICBwYW5mcm9zdF9w
ZXJmY250X3NldHVwKHBmZGV2KTsKPiArICAgICAgIH0KPiArICAgICAgIG11dGV4X3VubG9jaygm
cGZkZXYtPnBlcmZjbnQtPmxvY2spOwo+ICsKPiArICAgICAgIHBtX3J1bnRpbWVfbWFya19sYXN0
X2J1c3kocGZkZXYtPmRldik7Cj4gKyAgICAgICBwbV9ydW50aW1lX3B1dF9hdXRvc3VzcGVuZChw
ZmRldi0+ZGV2KTsKPiArCj4gKyAgICAgICByZXR1cm4gY291bnQ7Cj4gK30KPiArCj4gK3N0YXRp
YyBjb25zdCBzdHJ1Y3QgZmlsZV9vcGVyYXRpb25zIHBhbmZyb3N0X3BlcmZjbnRfZW5hYmxlX2Zv
cHMgPSB7Cj4gKyAgICAgICAucmVhZCA9IHBhbmZyb3N0X3BlcmZjbnRfZW5hYmxlX3JlYWQsCj4g
KyAgICAgICAud3JpdGUgPSBwYW5mcm9zdF9wZXJmY250X2VuYWJsZV93cml0ZSwKPiArICAgICAg
IC5vcGVuID0gc2ltcGxlX29wZW4sCj4gKyAgICAgICAubGxzZWVrID0gZGVmYXVsdF9sbHNlZWss
Cj4gK307Cj4gKwo+ICtzdGF0aWMgc3NpemVfdCBwYW5mcm9zdF9wZXJmY250X2R1bXBfcmVhZChz
dHJ1Y3QgZmlsZSAqZmlsZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBjaGFyIF9fdXNlciAqdXNlcl9idWYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2l6ZV90IGNvdW50LCBsb2ZmX3QgKnBwb3MpCj4gK3sKPiArICAgICAg
IHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gZmlsZS0+cHJpdmF0ZV9kYXRhOwo+ICsg
ICAgICAgc3NpemVfdCByZXQ7Cj4gKwo+ICsgICAgICAgcmV0ID0gcG1fcnVudGltZV9nZXRfc3lu
YyhwZmRldi0+ZGV2KTsKPiArICAgICAgIGlmIChyZXQgPCAwKQo+ICsgICAgICAgICAgICAgICBy
ZXR1cm4gcmV0Owo+ICsKPiArICAgICAgIG11dGV4X2xvY2soJnBmZGV2LT5wZXJmY250LT5sb2Nr
KTsKPiArICAgICAgIGlmICghcGZkZXYtPnBlcmZjbnQtPmVuYWJsZWQpIHsKPiArICAgICAgICAg
ICAgICAgcmV0ID0gLUVJTlZBTDsKPiArICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4gKyAgICAg
ICB9Cj4gKwo+ICsgICAgICAgcmV0ID0gcGFuZnJvc3RfcGVyZmNudF9kdW1wKHBmZGV2KTsKPiAr
ICAgICAgIGlmIChyZXQpCj4gKyAgICAgICAgICAgICAgIGdvdG8gb3V0Owo+ICsKPiArICAgICAg
IHJldCA9IHNpbXBsZV9yZWFkX2Zyb21fYnVmZmVyKHVzZXJfYnVmLCBjb3VudCwgcHBvcywKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBmZGV2LT5wZXJmY250LT5idWYs
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZmRldi0+cGVyZmNudC0+
Ym9zaXplKTsKPiArCj4gK291dDoKPiArICAgICAgIG11dGV4X3VubG9jaygmcGZkZXYtPnBlcmZj
bnQtPmxvY2spOwo+ICsgICAgICAgcG1fcnVudGltZV9tYXJrX2xhc3RfYnVzeShwZmRldi0+ZGV2
KTsKPiArICAgICAgIHBtX3J1bnRpbWVfcHV0X2F1dG9zdXNwZW5kKHBmZGV2LT5kZXYpOwo+ICsK
PiArICAgICAgIHJldHVybiByZXQ7Cj4gK30KPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZmls
ZV9vcGVyYXRpb25zIHBhbmZyb3N0X3BlcmZjbnRfZHVtcF9mb3BzID0gewo+ICsgICAgICAgLnJl
YWQgPSBwYW5mcm9zdF9wZXJmY250X2R1bXBfcmVhZCwKPiArICAgICAgIC5vcGVuID0gc2ltcGxl
X29wZW4sCj4gKyAgICAgICAubGxzZWVrID0gZGVmYXVsdF9sbHNlZWssCj4gK307Cj4gKwo+ICtp
bnQgcGFuZnJvc3RfcGVyZmNudF9kZWJ1Z2ZzX2luaXQoc3RydWN0IGRybV9taW5vciAqbWlub3Ip
Cj4gK3sKPiArICAgICAgIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gdG9fcGFuZnJv
c3RfZGV2aWNlKG1pbm9yLT5kZXYpOwo+ICsgICAgICAgc3RydWN0IGRlbnRyeSAqZmlsZSwgKmRp
cjsKPiArCj4gKyAgICAgICBkaXIgPSBkZWJ1Z2ZzX2NyZWF0ZV9kaXIoInBlcmZjbnQiLCBtaW5v
ci0+ZGVidWdmc19yb290KTsKPiArICAgICAgIGlmIChJU19FUlIoZGlyKSkKPiArICAgICAgICAg
ICAgICAgcmV0dXJuIFBUUl9FUlIoZGlyKTsKPiArCj4gKyAgICAgICBmaWxlID0gZGVidWdmc19j
cmVhdGVfZmlsZSgiZHVtcCIsIDA0MDAsIGRpciwgcGZkZXYsCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAmcGFuZnJvc3RfcGVyZmNudF9kdW1wX2ZvcHMpOwo+ICsgICAgICAg
aWYgKElTX0VSUihmaWxlKSkKPiArICAgICAgICAgICAgICAgcmV0dXJuIFBUUl9FUlIoZmlsZSk7
Cj4gKwo+ICsgICAgICAgZmlsZSA9IGRlYnVnZnNfY3JlYXRlX2ZpbGUoImVuYWJsZSIsIDA2MDAs
IGRpciwgcGZkZXYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmcGFuZnJv
c3RfcGVyZmNudF9lbmFibGVfZm9wcyk7Cj4gKyAgICAgICBpZiAoSVNfRVJSKGZpbGUpKQo+ICsg
ICAgICAgICAgICAgICByZXR1cm4gUFRSX0VSUihmaWxlKTsKPiArCj4gKyAgICAgICByZXR1cm4g
MDsKPiArfQo+ICsKPiAraW50IHBhbmZyb3N0X3BlcmZjbnRfaW5pdChzdHJ1Y3QgcGFuZnJvc3Rf
ZGV2aWNlICpwZmRldikKPiArewo+ICsgICAgICAgc3RydWN0IHBhbmZyb3N0X3BlcmZjbnQgKnBl
cmZjbnQ7Cj4gKyAgICAgICBzdHJ1Y3QgZHJtX2dlbV9zaG1lbV9vYmplY3QgKmJvOwo+ICsgICAg
ICAgc2l6ZV90IHNpemU7Cj4gKyAgICAgICB1MzIgc3RhdHVzOwo+ICsgICAgICAgaW50IHJldDsK
PiArCj4gKyAgICAgICBpZiAocGFuZnJvc3RfaGFzX2h3X2ZlYXR1cmUocGZkZXYsIEhXX0ZFQVRV
UkVfVjQpKSB7Cj4gKyAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBuY29yZWdyb3VwczsKPiAr
Cj4gKyAgICAgICAgICAgICAgIG5jb3JlZ3JvdXBzID0gaHdlaWdodDY0KHBmZGV2LT5mZWF0dXJl
cy5sMl9wcmVzZW50KTsKPiArICAgICAgICAgICAgICAgc2l6ZSA9IG5jb3JlZ3JvdXBzICogQkxP
Q0tTX1BFUl9DT1JFR1JPVVAgKgo+ICsgICAgICAgICAgICAgICAgICAgICAgQ09VTlRFUlNfUEVS
X0JMT0NLICogQllURVNfUEVSX0NPVU5URVI7Cj4gKyAgICAgICB9IGVsc2Ugewo+ICsgICAgICAg
ICAgICAgICB1bnNpZ25lZCBpbnQgbmwyYywgbmNvcmVzOwo+ICsKPiArICAgICAgICAgICAgICAg
LyoKPiArICAgICAgICAgICAgICAgICogVE9ETzogZGVmaW5lIGEgbWFjcm8gdG8gZXh0cmFjdCB0
aGUgbnVtYmVyIG9mIGwyIGNhY2hlcyBmcm9tCj4gKyAgICAgICAgICAgICAgICAqIG1lbV9mZWF0
dXJlcy4KPiArICAgICAgICAgICAgICAgICovCj4gKyAgICAgICAgICAgICAgIG5sMmMgPSAoKHBm
ZGV2LT5mZWF0dXJlcy5tZW1fZmVhdHVyZXMgPj4gOCkgJiBHRU5NQVNLKDMsIDApKSArIDE7Cj4g
Kwo+ICsgICAgICAgICAgICAgICAvKgo+ICsgICAgICAgICAgICAgICAgKiBUaGUgQVJNIGRyaXZl
ciBpcyBncm91cGluZyBjb3JlcyBwZXIgY29yZSBncm91cCBhbmQgdGhlbgo+ICsgICAgICAgICAg
ICAgICAgKiBvbmx5IHVzaW5nIHRoZSBudW1iZXIgb2YgY29yZXMgaW4gZ3JvdXAgMCB0byBjYWxj
dWxhdGUgdGhlCj4gKyAgICAgICAgICAgICAgICAqIHNpemUuIE5vdCBzdXJlIHdoeSB0aGlzIGlz
IGRvbmUgbGlrZSB0aGF0LCBidXQgSSBndWVzcwo+ICsgICAgICAgICAgICAgICAgKiBzaGFkZXJf
cHJlc2VudCB3aWxsIG9ubHkgc2hvdyBjb3JlcyBpbiB0aGUgZmlyc3QgZ3JvdXAKPiArICAgICAg
ICAgICAgICAgICogYW55d2F5Lgo+ICsgICAgICAgICAgICAgICAgKi8KPiArICAgICAgICAgICAg
ICAgbmNvcmVzID0gaHdlaWdodDY0KHBmZGV2LT5mZWF0dXJlcy5zaGFkZXJfcHJlc2VudCk7Cj4g
Kwo+ICsgICAgICAgICAgICAgICAvKgo+ICsgICAgICAgICAgICAgICAgKiBUaGVyZSdzIGFsd2F5
cyBvbmUgSk0gYW5kIG9uZSBUaWxlciBibG9jaywgaGVuY2UgdGhlICcrIDInCj4gKyAgICAgICAg
ICAgICAgICAqIGhlcmUuCj4gKyAgICAgICAgICAgICAgICAqLwo+ICsgICAgICAgICAgICAgICBz
aXplID0gKG5sMmMgKyBuY29yZXMgKyAyKSAqCj4gKyAgICAgICAgICAgICAgICAgICAgICBDT1VO
VEVSU19QRVJfQkxPQ0sgKiBCWVRFU19QRVJfQ09VTlRFUjsKPiArICAgICAgIH0KPiArCj4gKyAg
ICAgICBwZXJmY250ID0gZGV2bV9remFsbG9jKHBmZGV2LT5kZXYsIHNpemVvZigqcGVyZmNudCks
IEdGUF9LRVJORUwpOwo+ICsgICAgICAgaWYgKCFwZXJmY250KQo+ICsgICAgICAgICAgICAgICBy
ZXR1cm4gLUVOT01FTTsKPiArCj4gKyAgICAgICBibyA9IGRybV9nZW1fc2htZW1fY3JlYXRlKHBm
ZGV2LT5kZGV2LCBzaXplKTsKPiArICAgICAgIGlmIChJU19FUlIoYm8pKQo+ICsgICAgICAgICAg
ICAgICByZXR1cm4gUFRSX0VSUihibyk7Cj4gKwo+ICsgICAgICAgcGVyZmNudC0+Ym8gPSB0b19w
YW5mcm9zdF9ibygmYm8tPmJhc2UpOwo+ICsgICAgICAgcGVyZmNudC0+Ym9zaXplID0gc2l6ZTsK
PiArCj4gKyAgICAgICAvKgo+ICsgICAgICAgICogV2UgYWx3YXlzIHVzZSB0aGUgc2FtZSBidWZm
ZXIsIHNvIGxldCdzIG1hcCBpdCBvbmNlIGFuZCBrZWVwIGl0Cj4gKyAgICAgICAgKiBtYXBwZWQg
dW50aWwgdGhlIGRyaXZlciBpcyB1bmxvYWRlZC4gVGhpcyBtaWdodCBiZSBhIHByb2JsZW0gaWYK
PiArICAgICAgICAqIHdlIHN0YXJ0IHVzaW5nIGRpZmZlcmVudCBBUyBhbmQgdGhlIHBlcmZjbnQg
Qk8gaXMgbm90IG1hcHBlZCBhdAo+ICsgICAgICAgICogdGhlIHNhbWUgR1BVIHZpcnR1YWwgYWRk
cmVzcy4KClBlciBGRCBhZGRyZXNzIHNwYWNlIGlzIG5leHQgdXAgb24gbXkgbGlzdCwgc28gd2Un
bGwgbmVlZCB0byBzb3J0IHRoaXMKb3V0IHNvb24uIEFzIHRoaXMgaW50ZXJmYWNlIGlzIG5vdCB0
aWVkIHRvIGFueSBGRCwgdGhhdCB3b3VsZCBtZWFuIGl0CndpbGwgbmVlZCBpdHMgb3duIGFkZHJl
c3Mgc3BhY2UgKEkgYXNzdW1lIGl0IGRvZXNuJ3QgbmVlZCB0byBiZQpzaGFyZWQ/KSBhbmQgd291
bGQgcmVkdWNlIHRoZSBudW1iZXIgYXZhaWxhYmxlIHRvIG90aGVyIGNsaWVudHMKKHRob3VnaCBw
cmVzdW1hYmx5IHRoZXkgd2lsbCB1c2Ugc29tZSBzb3J0IG9mIExSVSBzd2FwcGluZykuCgpNYXli
ZSBFbWlsJ3Mgc3VnZ2VzdGlvbiBvbiBhIG1vZHVsZSBwYXJhbSB3b3VsZCBiZSBzdWZmaWNpZW50
IHRvIGdvCmFoZWFkIGFuZCBtYWtlIHRoaXMgYW4gaW9jdGwgaW50ZXJmYWNlIGluc3RlYWQuCgo+
ICsgICAgICAgICovCj4gKyAgICAgICByZXQgPSBwYW5mcm9zdF9tbXVfbWFwKHBlcmZjbnQtPmJv
KTsKPiArICAgICAgIGlmIChyZXQpCj4gKyAgICAgICAgICAgICAgIGdvdG8gZXJyX3B1dF9ibzsK
PiArCj4gKyAgICAgICAvKiBEaXNhYmxlIGV2ZXJ5dGhpbmcuICovCj4gKyAgICAgICBncHVfd3Jp
dGUocGZkZXYsIEdQVV9QRVJGQ05UX0NGRywKPiArICAgICAgICAgICAgICAgICBHUFVfUEVSRkNO
VF9DRkdfQVMoMCkgfAo+ICsgICAgICAgICAgICAgICAgIEdQVV9QRVJGQ05UX0NGR19NT0RFKEdQ
VV9QRVJGQ05UX0NGR19NT0RFX09GRikgfAo+ICsgICAgICAgICAgICAgICAgIChwYW5mcm9zdF9t
b2RlbF9jbXAocGZkZXYsIDB4MTAwMCkgPj0gMCA/Cj4gKyAgICAgICAgICAgICAgICAgIEdQVV9Q
RVJGQ05UX0NGR19TRVRTRUwoMSkgOiAwKSk7Cj4gKyAgICAgICBncHVfd3JpdGUocGZkZXYsIEdQ
VV9QUkZDTlRfSk1fRU4sIDApOwo+ICsgICAgICAgZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUFJGQ05U
X1NIQURFUl9FTiwgMCk7Cj4gKyAgICAgICBncHVfd3JpdGUocGZkZXYsIEdQVV9QUkZDTlRfTU1V
X0wyX0VOLCAwKTsKPiArICAgICAgIGdwdV93cml0ZShwZmRldiwgR1BVX1BSRkNOVF9USUxFUl9F
TiwgMCk7Cj4gKwo+ICsgICAgICAgcGVyZmNudC0+YnVmID0gZHJtX2dlbV92bWFwKCZiby0+YmFz
ZSk7Cj4gKyAgICAgICBpZiAoSVNfRVJSKHBlcmZjbnQtPmJ1ZikpIHsKPiArICAgICAgICAgICAg
ICAgcmV0ID0gUFRSX0VSUihwZXJmY250LT5idWYpOwo+ICsgICAgICAgICAgICAgICBnb3RvIGVy
cl9wdXRfYm87Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgaW5pdF9jb21wbGV0aW9uKCZwZXJm
Y250LT5kdW1wX2NvbXApOwo+ICsgICAgICAgbXV0ZXhfaW5pdCgmcGVyZmNudC0+bG9jayk7Cj4g
KyAgICAgICBwZmRldi0+cGVyZmNudCA9IHBlcmZjbnQ7Cj4gKwo+ICsgICAgICAgLyoKPiArICAg
ICAgICAqIEludmFsaWRhdGUgdGhlIGNhY2hlIGFuZCBjbGVhciB0aGUgY291bnRlcnMgdG8gc3Rh
cnQgZnJvbSBhIGZyZXNoCj4gKyAgICAgICAgKiBzdGF0ZS4KPiArICAgICAgICAqLwo+ICsgICAg
ICAgZ3B1X3dyaXRlKHBmZGV2LCBHUFVfSU5UX01BU0ssIDApOwo+ICsgICAgICAgZ3B1X3dyaXRl
KHBmZGV2LCBHUFVfSU5UX0NMRUFSLCBHUFVfSVJRX0NMRUFOX0NBQ0hFU19DT01QTEVURUQpOwo+
ICsKPiArICAgICAgIGdwdV93cml0ZShwZmRldiwgR1BVX0NNRCwgR1BVX0NNRF9QRVJGQ05UX0NM
RUFSKTsKPiArICAgICAgIGdwdV93cml0ZShwZmRldiwgR1BVX0NNRCwgR1BVX0NNRF9DTEVBTl9J
TlZfQ0FDSEVTKTsKPiArICAgICAgIHJldCA9IHJlYWRsX3JlbGF4ZWRfcG9sbF90aW1lb3V0KHBm
ZGV2LT5pb21lbSArIEdQVV9JTlRfUkFXU1RBVCwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHN0YXR1cywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHN0YXR1cyAmCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBHUFVfSVJRX0NMRUFOX0NBQ0hFU19DT01QTEVURUQsCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAxMDAsIDEwMDAwKTsKPiArICAgICAgIGlmIChyZXQpCj4g
KyAgICAgICAgICAgICAgIGdvdG8gZXJyX2dlbV92dW5tYXA7Cj4gKwo+ICsgICAgICAgZ3B1X3dy
aXRlKHBmZGV2LCBHUFVfSU5UX01BU0ssIEdQVV9JUlFfTUFTS19BTEwpOwoKV2UgYWxyZWFkeSBz
ZXR1cCBHUFVfSU5UXyogcmVnaXN0ZXJzIGVsc2V3aGVyZS4gV2Ugc2hvdWxkbid0IGhhdmUgaXQK
aW4gMiBwbGFjZXMuIFRoaXMgd2FzIHdoeSB0aGUgcmVnaXN0ZXIgZGVmaW5pdGlvbnMgd2VyZSBs
b2NhbCB0byB0aGUKLmMgZmlsZXMuLi4KCj4gKwo+ICsgICAgICAgcmV0dXJuIDA7Cj4gKwo+ICtl
cnJfZ2VtX3Z1bm1hcDoKPiArICAgICAgIGRybV9nZW1fdnVubWFwKCZwZmRldi0+cGVyZmNudC0+
Ym8tPmJhc2UuYmFzZSwgcGZkZXYtPnBlcmZjbnQtPmJ1Zik7Cj4gKwo+ICtlcnJfcHV0X2JvOgo+
ICsgICAgICAgZHJtX2dlbV9vYmplY3RfcHV0X3VubG9ja2VkKCZiby0+YmFzZSk7Cj4gKyAgICAg
ICByZXR1cm4gcmV0Owo+ICt9Cj4gKwo+ICt2b2lkIHBhbmZyb3N0X3BlcmZjbnRfZmluaShzdHJ1
Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldikKPiArewoKTmVlZCB0byBkbyBzb21lIGgvdyBjbGVh
bi11cD8KCj4gKyAgICAgICBkcm1fZ2VtX3Z1bm1hcCgmcGZkZXYtPnBlcmZjbnQtPmJvLT5iYXNl
LmJhc2UsIHBmZGV2LT5wZXJmY250LT5idWYpOwo+ICsgICAgICAgZHJtX2dlbV9vYmplY3RfcHV0
X3VubG9ja2VkKCZwZmRldi0+cGVyZmNudC0+Ym8tPmJhc2UuYmFzZSk7Cj4gK30KPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQuaCBiL2RyaXZl
cnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9wZXJmY250LmgKPiBuZXcgZmlsZSBtb2RlIDEw
MDY0NAo+IGluZGV4IDAwMDAwMDAwMDAwMC4uYjIxNzQ1Mzk4MTc4Cj4gLS0tIC9kZXYvbnVsbAo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9wZXJmY250LmgKPiBAQCAt
MCwwICsxLDE1IEBACj4gKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wICovCj4g
Ky8qIENvcHlyaWdodCAyMDE5IENvbGxhYm9yYSBMdGQgKi8KPiArI2lmbmRlZiBfX1BBTkZST1NU
X1BFUkZDTlRfSF9fCj4gKyNkZWZpbmUgX19QQU5GUk9TVF9QRVJGQ05UX0hfXwo+ICsKPiArI2lu
Y2x1ZGUgInBhbmZyb3N0X2RldmljZS5oIgo+ICsKPiArdm9pZCBwYW5mcm9zdF9wZXJmY250X3Nh
bXBsZV9kb25lKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KTsKPiArdm9pZCBwYW5mcm9z
dF9wZXJmY250X2NsZWFuX2NhY2hlX2RvbmUoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYp
Owo+ICtpbnQgcGFuZnJvc3RfcGVyZmNudF9pbml0KHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBm
ZGV2KTsKPiArdm9pZCBwYW5mcm9zdF9wZXJmY250X2Zpbmkoc3RydWN0IHBhbmZyb3N0X2Rldmlj
ZSAqcGZkZXYpOwo+ICt2b2lkIHBhbmZyb3N0X3BlcmZjbnRfcmVzdW1lKHN0cnVjdCBwYW5mcm9z
dF9kZXZpY2UgKnBmZGV2KTsKPiAraW50IHBhbmZyb3N0X3BlcmZjbnRfZGVidWdmc19pbml0KHN0
cnVjdCBkcm1fbWlub3IgKm1pbm9yKTsKPiArCj4gKyNlbmRpZgo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfcmVncy5oIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmZyb3N0L3BhbmZyb3N0X3JlZ3MuaAo+IGluZGV4IDQyZDA4ODYwZmQ3Ni4uZWEzOGFjNjA1ODFj
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9yZWdzLmgK
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfcmVncy5oCj4gQEAgLTQ0
LDEyICs0NCwzMSBAQAo+ICAgICAgICAgIEdQVV9JUlFfTVVMVElQTEVfRkFVTFQpCj4gICNkZWZp
bmUgR1BVX0NNRCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgzMAo+ICAjZGVmaW5l
ICAgR1BVX0NNRF9TT0ZUX1JFU0VUICAgICAgICAgICAweDAxCj4gKyNkZWZpbmUgICBHUFVfQ01E
X1BFUkZDTlRfQ0xFQVIgICAgICAgICAgICAgICAgMHgwMwo+ICsjZGVmaW5lICAgR1BVX0NNRF9Q
RVJGQ05UX1NBTVBMRSAgICAgICAweDA0Cj4gKyNkZWZpbmUgICBHUFVfQ01EX0NMRUFOX0NBQ0hF
UyAgICAgICAgIDB4MDcKPiArI2RlZmluZSAgIEdQVV9DTURfQ0xFQU5fSU5WX0NBQ0hFUyAgICAg
MHgwOAo+ICAjZGVmaW5lIEdQVV9TVEFUVVMgICAgICAgICAgICAgICAgICAgICAweDM0Cj4gKyNk
ZWZpbmUgICBHUFVfU1RBVFVTX1BSRkNOVF9BQ1RJVkUgICAgIEJJVCgyKQo+ICAjZGVmaW5lIEdQ
VV9MQVRFU1RfRkxVU0hfSUQgICAgICAgICAgICAweDM4Cj4gICNkZWZpbmUgR1BVX0ZBVUxUX1NU
QVRVUyAgICAgICAgICAgICAgIDB4M0MKPiAgI2RlZmluZSBHUFVfRkFVTFRfQUREUkVTU19MTyAg
ICAgICAgICAgMHg0MAo+ICAjZGVmaW5lIEdQVV9GQVVMVF9BRERSRVNTX0hJICAgICAgICAgICAw
eDQ0Cj4KPiArI2RlZmluZSBHUFVfUEVSRkNOVF9CQVNFX0xPICAgICAgICAgICAgMHg2MAo+ICsj
ZGVmaW5lIEdQVV9QRVJGQ05UX0JBU0VfSEkgICAgICAgICAgICAweDY0Cj4gKyNkZWZpbmUgR1BV
X1BFUkZDTlRfQ0ZHICAgICAgICAgICAgICAgICAgICAgICAgMHg2OAo+ICsjZGVmaW5lICAgR1BV
X1BFUkZDTlRfQ0ZHX01PREUoeCkgICAgICAoeCkKPiArI2RlZmluZSAgIEdQVV9QRVJGQ05UX0NG
R19NT0RFX09GRiAgICAgMAo+ICsjZGVmaW5lICAgR1BVX1BFUkZDTlRfQ0ZHX01PREVfTUFOVUFM
ICAxCj4gKyNkZWZpbmUgICBHUFVfUEVSRkNOVF9DRkdfTU9ERV9USUxFICAgIDIKPiArI2RlZmlu
ZSAgIEdQVV9QRVJGQ05UX0NGR19BUyh4KSAgICAgICAgICAgICAgICAoKHgpIDw8IDQpCj4gKyNk
ZWZpbmUgICBHUFVfUEVSRkNOVF9DRkdfU0VUU0VMKHgpICAgICgoeCkgPDwgOCkKPiArI2RlZmlu
ZSBHUFVfUFJGQ05UX0pNX0VOICAgICAgICAgICAgICAgMHg2Ywo+ICsjZGVmaW5lIEdQVV9QUkZD
TlRfU0hBREVSX0VOICAgICAgICAgICAweDcwCj4gKyNkZWZpbmUgR1BVX1BSRkNOVF9USUxFUl9F
TiAgICAgICAgICAgIDB4NzQKPiArI2RlZmluZSBHUFVfUFJGQ05UX01NVV9MMl9FTiAgICAgICAg
ICAgMHg3Ywo+ICsKPiAgI2RlZmluZSBHUFVfVEhSRUFEX01BWF9USFJFQURTICAgICAgICAgMHgw
QTAgICAvKiAoUk8pIE1heGltdW0gbnVtYmVyIG9mIHRocmVhZHMgcGVyIGNvcmUgKi8KPiAgI2Rl
ZmluZSBHUFVfVEhSRUFEX01BWF9XT1JLR1JPVVBfU0laRSAgMHgwQTQgICAvKiAoUk8pIE1heGlt
dW0gd29ya2dyb3VwIHNpemUgKi8KPiAgI2RlZmluZSBHUFVfVEhSRUFEX01BWF9CQVJSSUVSX1NJ
WkUgICAgMHgwQTggICAvKiAoUk8pIE1heGltdW0gdGhyZWFkcyB3YWl0aW5nIGF0IGEgYmFycmll
ciAqLwo+IC0tCj4gMi4yMC4xCj4KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
ZHJpLWRldmVs
