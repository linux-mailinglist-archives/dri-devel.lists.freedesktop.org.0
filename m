Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7AB3AC1F47
	for <lists+dri-devel@lfdr.de>; Mon, 30 Sep 2019 12:39:14 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2E1E36E261;
	Mon, 30 Sep 2019 10:39:05 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from lelv0142.ext.ti.com (lelv0142.ext.ti.com [198.47.23.249])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 00E026E24B
 for <dri-devel@lists.freedesktop.org>; Mon, 30 Sep 2019 10:39:00 +0000 (UTC)
Received: from fllv0034.itg.ti.com ([10.64.40.246])
 by lelv0142.ext.ti.com (8.15.2/8.15.2) with ESMTP id x8UAcwrF128889;
 Mon, 30 Sep 2019 05:38:58 -0500
Received: from DLEE102.ent.ti.com (dlee102.ent.ti.com [157.170.170.32])
 by fllv0034.itg.ti.com (8.15.2/8.15.2) with ESMTPS id x8UAcwtx038410
 (version=TLSv1.2 cipher=AES256-GCM-SHA384 bits=256 verify=FAIL);
 Mon, 30 Sep 2019 05:38:58 -0500
Received: from DLEE110.ent.ti.com (157.170.170.21) by DLEE102.ent.ti.com
 (157.170.170.32) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5; Mon, 30
 Sep 2019 05:38:48 -0500
Received: from fllv0039.itg.ti.com (10.64.41.19) by DLEE110.ent.ti.com
 (157.170.170.21) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5 via
 Frontend Transport; Mon, 30 Sep 2019 05:38:57 -0500
Received: from deskari.lan (ileax41-snat.itg.ti.com [10.172.224.153])
 by fllv0039.itg.ti.com (8.15.2/8.15.2) with ESMTP id x8UAck22011864;
 Mon, 30 Sep 2019 05:38:56 -0500
From: Tomi Valkeinen <tomi.valkeinen@ti.com>
To: <dri-devel@lists.freedesktop.org>, Laurent Pinchart
 <laurent.pinchart@ideasonboard.com>
Subject: [PATCHv2 6/7] drm/omap: hdmi5: automatically choose limited/full
 range output
Date: Mon, 30 Sep 2019 13:38:39 +0300
Message-ID: <20190930103840.18970-7-tomi.valkeinen@ti.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190930103840.18970-1-tomi.valkeinen@ti.com>
References: <20190930103840.18970-1-tomi.valkeinen@ti.com>
MIME-Version: 1.0
X-EXCLAIMER-MD-CONFIG: e1e8a2fd-e40a-4ac6-ac9b-f7e9cc9ee180
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ti.com; s=ti-com-17Q1; t=1569839938;
 bh=8lkmG1qRwES/rYI0R/4JV5wBCFd7JOfMMbga42jVAaI=;
 h=From:To:CC:Subject:Date:In-Reply-To:References;
 b=K50tH0zmMrkPU22r2BYI/tyD+h2CAFE1YOA+syiT14XFcbyzC9kznXnJUTbBuxS2b
 I2eW5XBop8W/FckHTv+naLIXJJ/PKOwiECtft9IChTWvRoOLpFpjUEMiyPiBg6GzwG
 W5yPh+ujByFn8IiTeTqVudWKqR1cQOPrK1RiJG9U=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Tomi Valkeinen <tomi.valkeinen@ti.com>, Jyri Sarha <jsarha@ti.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q3VycmVudGx5IHRoZSBIRE1JIGRyaXZlciB1c2VzIGFsd2F5cyBsaW1pdGVkIHJhbmdlIFJHQiBv
dXRwdXQuIFRoaXMKcGF0Y2ggaW1wcm92ZXMgdGhlIGJlaGF2aW9yIGJ5IHVzaW5nIGxpbWl0ZWQg
cmFuZ2Ugb25seSBpZiB0aGUgb3V0cHV0IGlzCmlkZW50aWZpZWQgYXMgYSBIRE1JIGRpc3BsYXks
IGFuZCBWSUMgPiAxLgoKU2lnbmVkLW9mZi1ieTogVG9taSBWYWxrZWluZW4gPHRvbWkudmFsa2Vp
bmVuQHRpLmNvbT4KQWNrZWQtYnk6IExhdXJlbnQgUGluY2hhcnQgPGxhdXJlbnQucGluY2hhcnRA
aWRlYXNvbmJvYXJkLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvaGRtaTVf
Y29yZS5jIHwgMTIxICsrKysrKysrKysrKy0tLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgNjUg
aW5zZXJ0aW9ucygrKSwgNTYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL29tYXBkcm0vZHNzL2hkbWk1X2NvcmUuYyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rz
cy9oZG1pNV9jb3JlLmMKaW5kZXggNGM1ODhlYzc2MzRhLi45NmY1Y2QxNzc2OGMgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9oZG1pNV9jb3JlLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL29tYXBkcm0vZHNzL2hkbWk1X2NvcmUuYwpAQCAtMjMsMTggKzIzLDYgQEAKIAog
I2luY2x1ZGUgImhkbWk1X2NvcmUuaCIKIAotLyogb25seSAyNCBiaXQgY29sb3IgZGVwdGggdXNl
ZCBmb3Igbm93ICovCi1zdGF0aWMgY29uc3Qgc3RydWN0IGNzY190YWJsZSBjc2NfdGFibGVfZGVl
cGNvbG9yW10gPSB7Ci0JLyogSERNSV9ERUVQX0NPTE9SXzI0QklUICovCi0JWzBdID0geyA3MDM2
LCAwLCAwLCAzMiwgMCwgNzAzNiwgMCwgMzIsIDAsIDAsIDcwMzYsIDMyLCB9LAotCS8qIEhETUlf
REVFUF9DT0xPUl8zMEJJVCAqLwotCVsxXSA9IHsgNzAxNSwgMCwgMCwgMTI4LCAwLCA3MDE1LCAw
LCAxMjgsIDAsIDAsIDcwMTUsIDEyOCwgfSwKLQkvKiBIRE1JX0RFRVBfQ09MT1JfMzZCSVQgKi8K
LQlbMl0gPSB7IDcwMTAsIDAsIDAsIDUxMiwgMCwgNzAxMCwgMCwgNTEyLCAwLCAwLCA3MDEwLCA1
MTIsIH0sCi0JLyogRlVMTCBSQU5HRSAqLwotCVszXSA9IHsgODE5MiwgMCwgMCwgMCwgMCwgODE5
MiwgMCwgMCwgMCwgMCwgODE5MiwgMCwgfSwKLX07Ci0KIHN0YXRpYyB2b2lkIGhkbWlfY29yZV9k
ZGNfaW5pdChzdHJ1Y3QgaGRtaV9jb3JlX2RhdGEgKmNvcmUpCiB7CiAJdm9pZCBfX2lvbWVtICpi
YXNlID0gY29yZS0+YmFzZTsKQEAgLTM5NywxNCArMzg1LDYgQEAgc3RhdGljIHZvaWQgaGRtaV9j
b3JlX2NvbmZpZ192aWRlb19wYWNrZXRpemVyKHN0cnVjdCBoZG1pX2NvcmVfZGF0YSAqY29yZSkK
IAlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfVlBfQ09ORiwgY2xyX2RlcHRoID8gMCA6IDIs
IDEsIDApOwogfQogCi1zdGF0aWMgdm9pZCBoZG1pX2NvcmVfY29uZmlnX2NzYyhzdHJ1Y3QgaGRt
aV9jb3JlX2RhdGEgKmNvcmUpCi17Ci0JaW50IGNscl9kZXB0aCA9IDA7CS8qIDI0IGJpdCBjb2xv
ciBkZXB0aCAqLwotCi0JLyogQ1NDX0NPTE9SREVQVEggKi8KLQlSRUdfRkxEX01PRChjb3JlLT5i
YXNlLCBIRE1JX0NPUkVfQ1NDX1NDQUxFLCBjbHJfZGVwdGgsIDcsIDQpOwotfQotCiBzdGF0aWMg
dm9pZCBoZG1pX2NvcmVfY29uZmlnX3ZpZGVvX3NhbXBsZXIoc3RydWN0IGhkbWlfY29yZV9kYXRh
ICpjb3JlKQogewogCWludCB2aWRlb19tYXBwaW5nID0gMTsJLyogZm9yIDI0IGJpdCBjb2xvciBk
ZXB0aCAqLwpAQCAtNDY5LDQ3ICs0NDksNjcgQEAgc3RhdGljIHZvaWQgaGRtaV9jb3JlX3dyaXRl
X2F2aV9pbmZvZnJhbWUoc3RydWN0IGhkbWlfY29yZV9kYXRhICpjb3JlLAogCVJFR19GTERfTU9E
KGJhc2UsIEhETUlfQ09SRV9GQ19QUkNPTkYsIHByLCAzLCAwKTsKIH0KIAotc3RhdGljIHZvaWQg
aGRtaV9jb3JlX2NzY19jb25maWcoc3RydWN0IGhkbWlfY29yZV9kYXRhICpjb3JlLAotCQlzdHJ1
Y3QgY3NjX3RhYmxlIGNzY19jb2VmZikKK3N0YXRpYyB2b2lkIGhkbWlfY29yZV93cml0ZV9jc2Mo
c3RydWN0IGhkbWlfY29yZV9kYXRhICpjb3JlLAorCQljb25zdCBzdHJ1Y3QgY3NjX3RhYmxlICpj
c2NfY29lZmYpCiB7CiAJdm9pZCBfX2lvbWVtICpiYXNlID0gY29yZS0+YmFzZTsKIAotCVJFR19G
TERfTU9EKGJhc2UsIEhETUlfQ09SRV9DU0NfQ09FRl9BMV9NU0IsIGNzY19jb2VmZi5hMSA+PiA4
ICwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0ExX0xTQiwg
Y3NjX2NvZWZmLmExLCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NP
RUZfQTJfTVNCLCBjc2NfY29lZmYuYTIgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwg
SERNSV9DT1JFX0NTQ19DT0VGX0EyX0xTQiwgY3NjX2NvZWZmLmEyLCA3LCAwKTsKLQlSRUdfRkxE
X01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQTNfTVNCLCBjc2NfY29lZmYuYTMgPj4gOCwg
NiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0EzX0xTQiwgY3Nj
X2NvZWZmLmEzLCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZf
QTRfTVNCLCBjc2NfY29lZmYuYTQgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERN
SV9DT1JFX0NTQ19DT0VGX0E0X0xTQiwgY3NjX2NvZWZmLmE0LCA3LCAwKTsKLQlSRUdfRkxEX01P
RChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQjFfTVNCLCBjc2NfY29lZmYuYjEgPj4gOCwgNiwg
MCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0IxX0xTQiwgY3NjX2Nv
ZWZmLmIxLCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQjJf
TVNCLCBjc2NfY29lZmYuYjIgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9D
T1JFX0NTQ19DT0VGX0IyX0xTQiwgY3NjX2NvZWZmLmIyLCA3LCAwKTsKLQlSRUdfRkxEX01PRChi
YXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQjNfTVNCLCBjc2NfY29lZmYuYjMgPj4gOCwgNiwgMCk7
Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0IzX0xTQiwgY3NjX2NvZWZm
LmIzLCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQjRfTVNC
LCBjc2NfY29lZmYuYjQgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JF
X0NTQ19DT0VGX0I0X0xTQiwgY3NjX2NvZWZmLmI0LCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNl
LCBIRE1JX0NPUkVfQ1NDX0NPRUZfQzFfTVNCLCBjc2NfY29lZmYuYzEgPj4gOCwgNiwgMCk7Ci0J
UkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0MxX0xTQiwgY3NjX2NvZWZmLmMx
LCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQzJfTVNCLCBj
c2NfY29lZmYuYzIgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NT
Q19DT0VGX0MyX0xTQiwgY3NjX2NvZWZmLmMyLCA3LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBI
RE1JX0NPUkVfQ1NDX0NPRUZfQzNfTVNCLCBjc2NfY29lZmYuYzMgPj4gOCwgNiwgMCk7Ci0JUkVH
X0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0MzX0xTQiwgY3NjX2NvZWZmLmMzLCA3
LCAwKTsKLQlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQzRfTVNCLCBjc2Nf
Y29lZmYuYzQgPj4gOCwgNiwgMCk7Ci0JUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19D
T0VGX0M0X0xTQiwgY3NjX2NvZWZmLmM0LCA3LCAwKTsKLQorCVJFR19GTERfTU9EKGJhc2UsIEhE
TUlfQ09SRV9DU0NfQ09FRl9BMV9NU0IsIGNzY19jb2VmZi0+YTEgPj4gOCwgNiwgMCk7CisJUkVH
X0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0ExX0xTQiwgY3NjX2NvZWZmLT5hMSwg
NywgMCk7CisJUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0EyX01TQiwgY3Nj
X2NvZWZmLT5hMiA+PiA4LCA2LCAwKTsKKwlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1ND
X0NPRUZfQTJfTFNCLCBjc2NfY29lZmYtPmEyLCA3LCAwKTsKKwlSRUdfRkxEX01PRChiYXNlLCBI
RE1JX0NPUkVfQ1NDX0NPRUZfQTNfTVNCLCBjc2NfY29lZmYtPmEzID4+IDgsIDYsIDApOworCVJF
R19GTERfTU9EKGJhc2UsIEhETUlfQ09SRV9DU0NfQ09FRl9BM19MU0IsIGNzY19jb2VmZi0+YTMs
IDcsIDApOworCVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09SRV9DU0NfQ09FRl9BNF9NU0IsIGNz
Y19jb2VmZi0+YTQgPj4gOCwgNiwgMCk7CisJUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NT
Q19DT0VGX0E0X0xTQiwgY3NjX2NvZWZmLT5hNCwgNywgMCk7CisJUkVHX0ZMRF9NT0QoYmFzZSwg
SERNSV9DT1JFX0NTQ19DT0VGX0IxX01TQiwgY3NjX2NvZWZmLT5iMSA+PiA4LCA2LCAwKTsKKwlS
RUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQjFfTFNCLCBjc2NfY29lZmYtPmIx
LCA3LCAwKTsKKwlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQjJfTVNCLCBj
c2NfY29lZmYtPmIyID4+IDgsIDYsIDApOworCVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09SRV9D
U0NfQ09FRl9CMl9MU0IsIGNzY19jb2VmZi0+YjIsIDcsIDApOworCVJFR19GTERfTU9EKGJhc2Us
IEhETUlfQ09SRV9DU0NfQ09FRl9CM19NU0IsIGNzY19jb2VmZi0+YjMgPj4gOCwgNiwgMCk7CisJ
UkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0IzX0xTQiwgY3NjX2NvZWZmLT5i
MywgNywgMCk7CisJUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JFX0NTQ19DT0VGX0I0X01TQiwg
Y3NjX2NvZWZmLT5iNCA+PiA4LCA2LCAwKTsKKwlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVf
Q1NDX0NPRUZfQjRfTFNCLCBjc2NfY29lZmYtPmI0LCA3LCAwKTsKKwlSRUdfRkxEX01PRChiYXNl
LCBIRE1JX0NPUkVfQ1NDX0NPRUZfQzFfTVNCLCBjc2NfY29lZmYtPmMxID4+IDgsIDYsIDApOwor
CVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09SRV9DU0NfQ09FRl9DMV9MU0IsIGNzY19jb2VmZi0+
YzEsIDcsIDApOworCVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09SRV9DU0NfQ09FRl9DMl9NU0Is
IGNzY19jb2VmZi0+YzIgPj4gOCwgNiwgMCk7CisJUkVHX0ZMRF9NT0QoYmFzZSwgSERNSV9DT1JF
X0NTQ19DT0VGX0MyX0xTQiwgY3NjX2NvZWZmLT5jMiwgNywgMCk7CisJUkVHX0ZMRF9NT0QoYmFz
ZSwgSERNSV9DT1JFX0NTQ19DT0VGX0MzX01TQiwgY3NjX2NvZWZmLT5jMyA+PiA4LCA2LCAwKTsK
KwlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQzNfTFNCLCBjc2NfY29lZmYt
PmMzLCA3LCAwKTsKKwlSRUdfRkxEX01PRChiYXNlLCBIRE1JX0NPUkVfQ1NDX0NPRUZfQzRfTVNC
LCBjc2NfY29lZmYtPmM0ID4+IDgsIDYsIDApOworCVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09S
RV9DU0NfQ09FRl9DNF9MU0IsIGNzY19jb2VmZi0+YzQsIDcsIDApOworCisJLyogZW5hYmxlIENT
QyAqLwogCVJFR19GTERfTU9EKGJhc2UsIEhETUlfQ09SRV9NQ19GTE9XQ1RSTCwgMHgxLCAwLCAw
KTsKIH0KIAotc3RhdGljIHZvaWQgaGRtaV9jb3JlX2NvbmZpZ3VyZV9yYW5nZShzdHJ1Y3QgaGRt
aV9jb3JlX2RhdGEgKmNvcmUpCitzdGF0aWMgdm9pZCBoZG1pX2NvcmVfY29uZmlndXJlX3Jhbmdl
KHN0cnVjdCBoZG1pX2NvcmVfZGF0YSAqY29yZSwKKwkJCQkgICAgICBlbnVtIGhkbWlfcXVhbnRp
emF0aW9uX3JhbmdlIHJhbmdlKQogewotCXN0cnVjdCBjc2NfdGFibGUgY3NjX2NvZWZmID0geyAw
IH07CisJc3RhdGljIGNvbnN0IHN0cnVjdCBjc2NfdGFibGUgY3NjX2xpbWl0ZWRfcmFuZ2UgPSB7
CisJCTcwMzYsIDAsIDAsIDMyLCAwLCA3MDM2LCAwLCAzMiwgMCwgMCwgNzAzNiwgMzIKKwl9Owor
CXN0YXRpYyBjb25zdCBzdHJ1Y3QgY3NjX3RhYmxlIGNzY19mdWxsX3JhbmdlID0geworCQk4MTky
LCAwLCAwLCAwLCAwLCA4MTkyLCAwLCAwLCAwLCAwLCA4MTkyLCAwCisJfTsKKwljb25zdCBzdHJ1
Y3QgY3NjX3RhYmxlICpjc2NfY29lZmY7CisKKwkvKiBDU0NfQ09MT1JERVBUSCAgPSAyNCBiaXRz
Ki8KKwlSRUdfRkxEX01PRChjb3JlLT5iYXNlLCBIRE1JX0NPUkVfQ1NDX1NDQUxFLCAwLCA3LCA0
KTsKKworCXN3aXRjaCAocmFuZ2UpIHsKKwljYXNlIEhETUlfUVVBTlRJWkFUSU9OX1JBTkdFX0ZV
TEw6CisJCWNzY19jb2VmZiA9ICZjc2NfZnVsbF9yYW5nZTsKKwkJYnJlYWs7CiAKLQkvKiBzdXBw
b3J0IGxpbWl0ZWQgcmFuZ2Ugd2l0aCAyNCBiaXQgY29sb3IgZGVwdGggZm9yIG5vdyAqLwotCWNz
Y19jb2VmZiA9IGNzY190YWJsZV9kZWVwY29sb3JbMF07CisJY2FzZSBIRE1JX1FVQU5USVpBVElP
Tl9SQU5HRV9ERUZBVUxUOgorCWNhc2UgSERNSV9RVUFOVElaQVRJT05fUkFOR0VfTElNSVRFRDoK
KwlkZWZhdWx0OgorCQljc2NfY29lZmYgPSAmY3NjX2xpbWl0ZWRfcmFuZ2U7CisJCWJyZWFrOwor
CX0KIAotCWhkbWlfY29yZV9jc2NfY29uZmlnKGNvcmUsIGNzY19jb2VmZik7CisJaGRtaV9jb3Jl
X3dyaXRlX2NzYyhjb3JlLCBjc2NfY29lZmYpOwogfQogCiBzdGF0aWMgdm9pZCBoZG1pX2NvcmVf
ZW5hYmxlX3ZpZGVvX3BhdGgoc3RydWN0IGhkbWlfY29yZV9kYXRhICpjb3JlKQpAQCAtNjAwLDkg
KzYwMCwyMCBAQCB2b2lkIGhkbWk1X2NvbmZpZ3VyZShzdHJ1Y3QgaGRtaV9jb3JlX2RhdGEgKmNv
cmUsIHN0cnVjdCBoZG1pX3dwX2RhdGEgKndwLAogCXN0cnVjdCB2aWRlb21vZGUgdm07CiAJc3Ry
dWN0IGhkbWlfdmlkZW9fZm9ybWF0IHZpZGVvX2Zvcm1hdDsKIAlzdHJ1Y3QgaGRtaV9jb3JlX3Zp
ZF9jb25maWcgdl9jb3JlX2NmZzsKKwllbnVtIGhkbWlfcXVhbnRpemF0aW9uX3JhbmdlIHJhbmdl
OwogCiAJaGRtaV9jb3JlX21hc2tfaW50ZXJydXB0cyhjb3JlKTsKIAorCWlmIChjZmctPmhkbWlf
ZHZpX21vZGUgPT0gSERNSV9IRE1JKSB7CisJCWNoYXIgdmljID0gY2ZnLT5pbmZvZnJhbWUudmlk
ZW9fY29kZTsKKworCQkvKiBBbGwgQ0VBIG1vZGVzIG90aGVyIHRoYW4gVklDIDEgdXNlIGxpbWl0
ZWQgcXVhbnRpemF0aW9uIHJhbmdlLiAqLworCQlyYW5nZSA9IHZpYyA+IDEgPyBIRE1JX1FVQU5U
SVpBVElPTl9SQU5HRV9MSU1JVEVEIDoKKwkJCUhETUlfUVVBTlRJWkFUSU9OX1JBTkdFX0ZVTEw7
CisJfSBlbHNlIHsKKwkJcmFuZ2UgPSBIRE1JX1FVQU5USVpBVElPTl9SQU5HRV9GVUxMOworCX0K
KwogCWhkbWlfY29yZV9pbml0KCZ2X2NvcmVfY2ZnLCBjZmcpOwogCiAJaGRtaV93cF9pbml0X3Zp
ZF9mbXRfdGltaW5ncygmdmlkZW9fZm9ybWF0LCAmdm0sIGNmZyk7CkBAIC02MTYsOSArNjI3LDgg
QEAgdm9pZCBoZG1pNV9jb25maWd1cmUoc3RydWN0IGhkbWlfY29yZV9kYXRhICpjb3JlLCBzdHJ1
Y3QgaGRtaV93cF9kYXRhICp3cCwKIAogCWhkbWlfd3BfdmlkZW9fY29uZmlnX2ludGVyZmFjZSh3
cCwgJnZtKTsKIAotCS8qIHN1cHBvcnQgbGltaXRlZCByYW5nZSB3aXRoIDI0IGJpdCBjb2xvciBk
ZXB0aCBmb3Igbm93ICovCi0JaGRtaV9jb3JlX2NvbmZpZ3VyZV9yYW5nZShjb3JlKTsKLQljZmct
PmluZm9mcmFtZS5xdWFudGl6YXRpb25fcmFuZ2UgPSBIRE1JX1FVQU5USVpBVElPTl9SQU5HRV9M
SU1JVEVEOworCWhkbWlfY29yZV9jb25maWd1cmVfcmFuZ2UoY29yZSwgcmFuZ2UpOworCWNmZy0+
aW5mb2ZyYW1lLnF1YW50aXphdGlvbl9yYW5nZSA9IHJhbmdlOwogCiAJLyoKIAkgKiBjb25maWd1
cmUgY29yZSB2aWRlbyBwYXJ0LCBzZXQgc29mdHdhcmUgcmVzZXQgaW4gdGhlIGNvcmUKQEAgLTYy
OCw3ICs2MzgsNiBAQCB2b2lkIGhkbWk1X2NvbmZpZ3VyZShzdHJ1Y3QgaGRtaV9jb3JlX2RhdGEg
KmNvcmUsIHN0cnVjdCBoZG1pX3dwX2RhdGEgKndwLAogCWhkbWlfY29yZV92aWRlb19jb25maWco
Y29yZSwgJnZfY29yZV9jZmcpOwogCiAJaGRtaV9jb3JlX2NvbmZpZ192aWRlb19wYWNrZXRpemVy
KGNvcmUpOwotCWhkbWlfY29yZV9jb25maWdfY3NjKGNvcmUpOwogCWhkbWlfY29yZV9jb25maWdf
dmlkZW9fc2FtcGxlcihjb3JlKTsKIAogCWlmIChjZmctPmhkbWlfZHZpX21vZGUgPT0gSERNSV9I
RE1JKQotLSAKVGV4YXMgSW5zdHJ1bWVudHMgRmlubGFuZCBPeSwgUG9ya2thbGFua2F0dSAyMiwg
MDAxODAgSGVsc2lua2kuClktdHVubnVzL0J1c2luZXNzIElEOiAwNjE1NTIxLTQuIEtvdGlwYWlr
a2EvRG9taWNpbGU6IEhlbHNpbmtpCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVl
ZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9kcmktZGV2ZWw=
