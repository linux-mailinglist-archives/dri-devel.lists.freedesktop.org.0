Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9A3637F775
	for <lists+dri-devel@lfdr.de>; Fri,  2 Aug 2019 14:55:30 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A34026EDF8;
	Fri,  2 Aug 2019 12:55:28 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from lelv0142.ext.ti.com (lelv0142.ext.ti.com [198.47.23.249])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D0BCA6EDF8
 for <dri-devel@lists.freedesktop.org>; Fri,  2 Aug 2019 12:55:27 +0000 (UTC)
Received: from lelv0265.itg.ti.com ([10.180.67.224])
 by lelv0142.ext.ti.com (8.15.2/8.15.2) with ESMTP id x72CtOdm085633;
 Fri, 2 Aug 2019 07:55:24 -0500
Received: from DFLE115.ent.ti.com (dfle115.ent.ti.com [10.64.6.36])
 by lelv0265.itg.ti.com (8.15.2/8.15.2) with ESMTPS id x72CtOkN033616
 (version=TLSv1.2 cipher=AES256-GCM-SHA384 bits=256 verify=FAIL);
 Fri, 2 Aug 2019 07:55:24 -0500
Received: from DFLE106.ent.ti.com (10.64.6.27) by DFLE115.ent.ti.com
 (10.64.6.36) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5; Fri, 2 Aug
 2019 07:55:24 -0500
Received: from lelv0327.itg.ti.com (10.180.67.183) by DFLE106.ent.ti.com
 (10.64.6.27) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5 via
 Frontend Transport; Fri, 2 Aug 2019 07:55:24 -0500
Received: from jadmar.ti.com (ileax41-snat.itg.ti.com [10.172.224.153])
 by lelv0327.itg.ti.com (8.15.2/8.15.2) with ESMTP id x72CtN22028116;
 Fri, 2 Aug 2019 07:55:23 -0500
From: Jyri Sarha <jsarha@ti.com>
To: <dri-devel@lists.freedesktop.org>
Subject: [PATCH v2] drm/tilcdc: Remove obsolete crtc_mode_valid() hack
Date: Fri, 2 Aug 2019 15:55:22 +0300
Message-ID: <5c4dcb5b1e7975bd2b7ca86f7addf219cd0f9a06.1564750248.git.jsarha@ti.com>
X-Mailer: git-send-email 2.17.1
MIME-Version: 1.0
X-EXCLAIMER-MD-CONFIG: e1e8a2fd-e40a-4ac6-ac9b-f7e9cc9ee180
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ti.com; s=ti-com-17Q1; t=1564750524;
 bh=s+/10ORvWCieg91fdZUxRUKr7gnkA6FUeZgxz5H6cJg=;
 h=From:To:CC:Subject:Date;
 b=TW2I42BT81AvpV9i1Td5vHEug4TctW14Y7AAtsx2jU0cIcUbtyzhDnEGvqK56fqb/
 aLT4zYfM65JKMPk8E4Ipa0kpSRrDX6jK8DE0Y8qCrlIVvwTdmADRbtwzNcWVR2uOW6
 vmxgGGoEcJ4/sbI9U0P7Ug+sskgRQ01iu1cad1aA=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: laurent.pinchart@ideasonboard.com, jsarha@ti.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RWFybGllciB0aGVyZSB3ZXJlIG5vIG1vZGVfdmFsaWQoKSBoZWxwZXIgZm9yIGNydGMgYW5kIHRp
bGNkYyBoYWQgYQpoYWNrIHRvIG92ZXIgY29tZSB0aGlzIGxpbWl0YXRpb24uIEJ1dCBub3cgdGhl
IG1vZGVfdmFsaWQoKSBoZWxwZXIgaXMKdGhlcmUgKGhhcyBiZWVuIHNpbmNlIHY0LjEzKSwgc28g
aXQgaXMgYWJvdXQgdGltZSB0byBnZXQgcmlkIG9mIHRoYXQKaGFjay4KClNpZ25lZC1vZmYtYnk6
IEp5cmkgU2FyaGEgPGpzYXJoYUB0aS5jb20+ClJldmlld2VkLWJ5OiBMYXVyZW50IFBpbmNoYXJ0
IDxsYXVyZW50LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+Ci0tLQpUaGlzIGlzIGp1c3QgYSBy
ZWJhc2VkIHZlcnNpb24gb2YgdGhpcyBwYXRjaDogCmh0dHBzOi8vcGF0Y2h3b3JrLmtlcm5lbC5v
cmcvcGF0Y2gvMTA4NTE1NDkvCgpUaGUgb25seSBwdXJwb3NlIG9mIHRoaXMgcmVzZW5kIGlzIHRv
IGhlbHAgZGltIGFwcGx5IHRoZSBwYXRjaCBjbGVhbmx5LgoKIGRyaXZlcnMvZ3B1L2RybS90aWxj
ZGMvdGlsY2RjX2NydGMuYyAgICAgfCAyOCArKystLS0tLQogZHJpdmVycy9ncHUvZHJtL3RpbGNk
Yy90aWxjZGNfZHJ2LmMgICAgICB8ICAxIC0KIGRyaXZlcnMvZ3B1L2RybS90aWxjZGMvdGlsY2Rj
X2Rydi5oICAgICAgfCAgMiAtCiBkcml2ZXJzL2dwdS9kcm0vdGlsY2RjL3RpbGNkY19leHRlcm5h
bC5jIHwgODggKysrLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vdGlsY2Rj
L3RpbGNkY19leHRlcm5hbC5oIHwgIDEgLQogZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNf
cGFuZWwuYyAgICB8ICA5IC0tLQogZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfdGZwNDEw
LmMgICB8ICA5IC0tLQogNyBmaWxlcyBjaGFuZ2VkLCAxOSBpbnNlcnRpb25zKCspLCAxMTkgZGVs
ZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfY3J0
Yy5jIGIvZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfY3J0Yy5jCmluZGV4IDhmYTliM2U1
ZTIzMC4uZTlkZDVlNWNiNGU3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdGlsY2RjL3Rp
bGNkY19jcnRjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfY3J0Yy5jCkBA
IC02NTAsOSArNjUwLDYgQEAgc3RhdGljIGJvb2wgdGlsY2RjX2NydGNfbW9kZV9maXh1cChzdHJ1
Y3QgZHJtX2NydGMgKmNydGMsCiBzdGF0aWMgaW50IHRpbGNkY19jcnRjX2F0b21pY19jaGVjayhz
dHJ1Y3QgZHJtX2NydGMgKmNydGMsCiAJCQkJICAgIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqc3Rh
dGUpCiB7Ci0Jc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUgPSAmc3RhdGUtPm1vZGU7Ci0J
aW50IHJldDsKLQogCS8qIElmIHdlIGFyZSBub3QgYWN0aXZlIHdlIGRvbid0IGNhcmUgKi8KIAlp
ZiAoIXN0YXRlLT5hY3RpdmUpCiAJCXJldHVybiAwOwpAQCAtNjY0LDEyICs2NjEsNiBAQCBzdGF0
aWMgaW50IHRpbGNkY19jcnRjX2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCiAJ
CXJldHVybiAtRUlOVkFMOwogCX0KIAotCXJldCA9IHRpbGNkY19jcnRjX21vZGVfdmFsaWQoY3J0
YywgbW9kZSk7Ci0JaWYgKHJldCkgewotCQlkZXZfZGJnKGNydGMtPmRldi0+ZGV2LCAiTW9kZSBc
IiVzXCIgbm90IHZhbGlkIiwgbW9kZS0+bmFtZSk7Ci0JCXJldHVybiAtRUlOVkFMOwotCX0KLQog
CXJldHVybiAwOwogfQogCkBAIC03MjEsMTMgKzcxMiw2IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZHJtX2NydGNfZnVuY3MgdGlsY2RjX2NydGNfZnVuY3MgPSB7CiAJLmRpc2FibGVfdmJsYW5rCT0g
dGlsY2RjX2NydGNfZGlzYWJsZV92YmxhbmssCiB9OwogCi1zdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9jcnRjX2hlbHBlcl9mdW5jcyB0aWxjZGNfY3J0Y19oZWxwZXJfZnVuY3MgPSB7Ci0JCS5tb2Rl
X2ZpeHVwICAgICA9IHRpbGNkY19jcnRjX21vZGVfZml4dXAsCi0JCS5hdG9taWNfY2hlY2sJPSB0
aWxjZGNfY3J0Y19hdG9taWNfY2hlY2ssCi0JCS5hdG9taWNfZW5hYmxlCT0gdGlsY2RjX2NydGNf
YXRvbWljX2VuYWJsZSwKLQkJLmF0b21pY19kaXNhYmxlCT0gdGlsY2RjX2NydGNfYXRvbWljX2Rp
c2FibGUsCi19OwotCiBpbnQgdGlsY2RjX2NydGNfbWF4X3dpZHRoKHN0cnVjdCBkcm1fY3J0YyAq
Y3J0YykKIHsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gY3J0Yy0+ZGV2OwpAQCAtNzQyLDcg
KzcyNiw5IEBAIGludCB0aWxjZGNfY3J0Y19tYXhfd2lkdGgoc3RydWN0IGRybV9jcnRjICpjcnRj
KQogCXJldHVybiBtYXhfd2lkdGg7CiB9CiAKLWludCB0aWxjZGNfY3J0Y19tb2RlX3ZhbGlkKHN0
cnVjdCBkcm1fY3J0YyAqY3J0Yywgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCitzdGF0
aWMgZW51bSBkcm1fbW9kZV9zdGF0dXMKK3RpbGNkY19jcnRjX21vZGVfdmFsaWQoc3RydWN0IGRy
bV9jcnRjICpjcnRjLAorCQkgICAgICAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1v
ZGUpCiB7CiAJc3RydWN0IHRpbGNkY19kcm1fcHJpdmF0ZSAqcHJpdiA9IGNydGMtPmRldi0+ZGV2
X3ByaXZhdGU7CiAJdW5zaWduZWQgaW50IGJhbmR3aWR0aDsKQEAgLTgzMCw2ICs4MTYsMTQgQEAg
aW50IHRpbGNkY19jcnRjX21vZGVfdmFsaWQoc3RydWN0IGRybV9jcnRjICpjcnRjLCBzdHJ1Y3Qg
ZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKIAlyZXR1cm4gTU9ERV9PSzsKIH0KIAorc3RhdGljIGNv
bnN0IHN0cnVjdCBkcm1fY3J0Y19oZWxwZXJfZnVuY3MgdGlsY2RjX2NydGNfaGVscGVyX2Z1bmNz
ID0geworCS5tb2RlX3ZhbGlkCT0gdGlsY2RjX2NydGNfbW9kZV92YWxpZCwKKwkubW9kZV9maXh1
cAk9IHRpbGNkY19jcnRjX21vZGVfZml4dXAsCisJLmF0b21pY19jaGVjawk9IHRpbGNkY19jcnRj
X2F0b21pY19jaGVjaywKKwkuYXRvbWljX2VuYWJsZQk9IHRpbGNkY19jcnRjX2F0b21pY19lbmFi
bGUsCisJLmF0b21pY19kaXNhYmxlCT0gdGlsY2RjX2NydGNfYXRvbWljX2Rpc2FibGUsCit9Owor
CiB2b2lkIHRpbGNkY19jcnRjX3NldF9wYW5lbF9pbmZvKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywK
IAkJY29uc3Qgc3RydWN0IHRpbGNkY19wYW5lbF9pbmZvICppbmZvKQogewpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vdGls
Y2RjL3RpbGNkY19kcnYuYwppbmRleCAzMDQ2YTRhNDIzMmQuLjJhOWU2NzU5NzM3NSAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfZHJ2LmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL3RpbGNkYy90aWxjZGNfZHJ2LmMKQEAgLTE5OSw3ICsxOTksNiBAQCBzdGF0aWMgdm9p
ZCB0aWxjZGNfZmluaShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCWRybV9rbXNfaGVscGVyX3Bv
bGxfZmluaShkZXYpOwogCWRybV9pcnFfdW5pbnN0YWxsKGRldik7CiAJZHJtX21vZGVfY29uZmln
X2NsZWFudXAoZGV2KTsKLQl0aWxjZGNfcmVtb3ZlX2V4dGVybmFsX2RldmljZShkZXYpOwogCiAJ
aWYgKHByaXYtPmNsaykKIAkJY2xrX3B1dChwcml2LT5jbGspOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vdGlsY2RjL3Rp
bGNkY19kcnYuaAppbmRleCBlOTNmODAxYTRjZTcuLjE4ODE1ZTc1Y2E0ZiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJt
L3RpbGNkYy90aWxjZGNfZHJ2LmgKQEAgLTc3LDcgKzc3LDYgQEAgc3RydWN0IHRpbGNkY19kcm1f
cHJpdmF0ZSB7CiAKIAlzdHJ1Y3QgZHJtX2VuY29kZXIgKmV4dGVybmFsX2VuY29kZXI7CiAJc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmV4dGVybmFsX2Nvbm5lY3RvcjsKLQljb25zdCBzdHJ1Y3QgZHJt
X2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MgKmNvbm5lY3Rvcl9mdW5jczsKIAogCWJvb2wgaXNfcmVn
aXN0ZXJlZDsKIAlib29sIGlzX2NvbXBvbmVudGl6ZWQ7CkBAIC0xNTksNyArMTU4LDYgQEAgdm9p
ZCB0aWxjZGNfY3J0Y19zZXRfcGFuZWxfaW5mbyhzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCiAJCWNv
bnN0IHN0cnVjdCB0aWxjZGNfcGFuZWxfaW5mbyAqaW5mbyk7CiB2b2lkIHRpbGNkY19jcnRjX3Nl
dF9zaW11bGF0ZV92ZXNhX3N5bmMoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCQkJCQlib29sIHNp
bXVsYXRlX3Zlc2Ffc3luYyk7Ci1pbnQgdGlsY2RjX2NydGNfbW9kZV92YWxpZChzdHJ1Y3QgZHJt
X2NydGMgKmNydGMsIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKTsKIGludCB0aWxjZGNf
Y3J0Y19tYXhfd2lkdGgoc3RydWN0IGRybV9jcnRjICpjcnRjKTsKIHZvaWQgdGlsY2RjX2NydGNf
c2h1dGRvd24oc3RydWN0IGRybV9jcnRjICpjcnRjKTsKIGludCB0aWxjZGNfY3J0Y191cGRhdGVf
ZmIoc3RydWN0IGRybV9jcnRjICpjcnRjLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Rp
bGNkYy90aWxjZGNfZXh0ZXJuYWwuYyBiL2RyaXZlcnMvZ3B1L2RybS90aWxjZGMvdGlsY2RjX2V4
dGVybmFsLmMKaW5kZXggMzlmNGMwYTAyMzQ5Li40M2Q3NTZiNzgxMGUgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS90aWxjZGMvdGlsY2RjX2V4dGVybmFsLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3RpbGNkYy90aWxjZGNfZXh0ZXJuYWwuYwpAQCAtMzgsNjQgKzM4LDYgQEAgc3RhdGljIGNv
bnN0IHN0cnVjdCB0aWxjZGNfcGFuZWxfaW5mbyBwYW5lbF9pbmZvX2RlZmF1bHQgPSB7CiAJCS5y
YXN0ZXJfb3JkZXIgICAgICAgICAgID0gMCwKIH07CiAKLXN0YXRpYyBpbnQgdGlsY2RjX2V4dGVy
bmFsX21vZGVfdmFsaWQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKLQkJCQkgICAg
ICBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKLXsKLQlzdHJ1Y3QgdGlsY2RjX2RybV9w
cml2YXRlICpwcml2ID0gY29ubmVjdG9yLT5kZXYtPmRldl9wcml2YXRlOwotCWludCByZXQ7Ci0K
LQlyZXQgPSB0aWxjZGNfY3J0Y19tb2RlX3ZhbGlkKHByaXYtPmNydGMsIG1vZGUpOwotCWlmIChy
ZXQgIT0gTU9ERV9PSykKLQkJcmV0dXJuIHJldDsKLQotCUJVR19PTihwcml2LT5leHRlcm5hbF9j
b25uZWN0b3IgIT0gY29ubmVjdG9yKTsKLQlCVUdfT04oIXByaXYtPmNvbm5lY3Rvcl9mdW5jcyk7
Ci0KLQkvKiBJZiB0aGUgY29ubmVjdG9yIGhhcyBpdHMgb3duIG1vZGVfdmFsaWQgY2FsbCBpdC4g
Ki8KLQlpZiAoIUlTX0VSUihwcml2LT5jb25uZWN0b3JfZnVuY3MpICYmCi0JICAgIHByaXYtPmNv
bm5lY3Rvcl9mdW5jcy0+bW9kZV92YWxpZCkKLQkJcmV0dXJuIHByaXYtPmNvbm5lY3Rvcl9mdW5j
cy0+bW9kZV92YWxpZChjb25uZWN0b3IsIG1vZGUpOwotCi0JcmV0dXJuIE1PREVfT0s7Ci19Ci0K
LXN0YXRpYyBpbnQgdGlsY2RjX2FkZF9leHRlcm5hbF9jb25uZWN0b3Ioc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwKLQkJCQkJIHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCi17Ci0Jc3Ry
dWN0IHRpbGNkY19kcm1fcHJpdmF0ZSAqcHJpdiA9IGRldi0+ZGV2X3ByaXZhdGU7Ci0Jc3RydWN0
IGRybV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzICpjb25uZWN0b3JfZnVuY3M7Ci0KLQkvKiBUaGVy
ZSBzaG91bGQgbmV2ZXIgYmUgbW9yZSB0aGFuIG9uZSBjb25uZWN0b3IgKi8KLQlpZiAoV0FSTl9P
Tihwcml2LT5leHRlcm5hbF9jb25uZWN0b3IpKQotCQlyZXR1cm4gLUVJTlZBTDsKLQotCXByaXYt
PmV4dGVybmFsX2Nvbm5lY3RvciA9IGNvbm5lY3RvcjsKLQljb25uZWN0b3JfZnVuY3MgPSBkZXZt
X2t6YWxsb2MoZGV2LT5kZXYsIHNpemVvZigqY29ubmVjdG9yX2Z1bmNzKSwKLQkJCQkgICAgICAg
R0ZQX0tFUk5FTCk7Ci0JaWYgKCFjb25uZWN0b3JfZnVuY3MpCi0JCXJldHVybiAtRU5PTUVNOwot
Ci0JLyogY29ubmVjdG9yLT5oZWxwZXJfcHJpdmF0ZSBjb250YWlucyBhbHdheXMgc3RydWN0Ci0J
ICogY29ubmVjdG9yX2hlbHBlcl9mdW5jcyBwb2ludGVyLiBGb3IgdGlsY2RjIGNydGMgdG8gaGF2
ZSBhCi0JICogc2F5IGlmIGEgc3BlY2lmaWMgbW9kZSBpcyBPaywgd2UgbmVlZCB0byBpbnN0YWxs
IG91ciBvd24KLQkgKiBoZWxwZXIgZnVuY3Rpb25zLiBJbiBvdXIgaGVscGVyIGZ1bmN0aW9ucyB3
ZSBjb3B5Ci0JICogZXZlcnl0aGluZyBlbHNlIGJ1dCB1c2Ugb3VyIG93biBtb2RlX3ZhbGlkKCkg
KGFib3ZlKS4KLQkgKi8KLQlpZiAoY29ubmVjdG9yLT5oZWxwZXJfcHJpdmF0ZSkgewotCQlwcml2
LT5jb25uZWN0b3JfZnVuY3MgPQljb25uZWN0b3ItPmhlbHBlcl9wcml2YXRlOwotCQkqY29ubmVj
dG9yX2Z1bmNzID0gKnByaXYtPmNvbm5lY3Rvcl9mdW5jczsKLQl9IGVsc2UgewotCQlwcml2LT5j
b25uZWN0b3JfZnVuY3MgPSBFUlJfUFRSKC1FTk9FTlQpOwotCX0KLQljb25uZWN0b3JfZnVuY3Mt
Pm1vZGVfdmFsaWQgPSB0aWxjZGNfZXh0ZXJuYWxfbW9kZV92YWxpZDsKLQlkcm1fY29ubmVjdG9y
X2hlbHBlcl9hZGQoY29ubmVjdG9yLCBjb25uZWN0b3JfZnVuY3MpOwotCi0JZGV2X2RiZyhkZXYt
PmRldiwgIkV4dGVybmFsIGNvbm5lY3RvciAnJXMnIGNvbm5lY3RlZFxuIiwKLQkJY29ubmVjdG9y
LT5uYW1lKTsKLQotCXJldHVybiAwOwotfQotCiBzdGF0aWMKIHN0cnVjdCBkcm1fY29ubmVjdG9y
ICp0aWxjZGNfZW5jb2Rlcl9maW5kX2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2RldmljZSAqZGRldiwK
IAkJCQkJCSAgICBzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCkBAIC0xMTYsNyArNTgsNiBA
QCBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqdGlsY2RjX2VuY29kZXJfZmluZF9jb25uZWN0b3Ioc3Ry
dWN0IGRybV9kZXZpY2UgKmRkZXYsCiBpbnQgdGlsY2RjX2FkZF9jb21wb25lbnRfZW5jb2Rlcihz
dHJ1Y3QgZHJtX2RldmljZSAqZGRldikKIHsKIAlzdHJ1Y3QgdGlsY2RjX2RybV9wcml2YXRlICpw
cml2ID0gZGRldi0+ZGV2X3ByaXZhdGU7Ci0Jc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3Rv
cjsKIAlzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXI7CiAKIAlsaXN0X2Zvcl9lYWNoX2VudHJ5
KGVuY29kZXIsICZkZGV2LT5tb2RlX2NvbmZpZy5lbmNvZGVyX2xpc3QsIGhlYWQpCkBAIC0xMjgs
MjggKzY5LDE3IEBAIGludCB0aWxjZGNfYWRkX2NvbXBvbmVudF9lbmNvZGVyKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZGV2KQogCQlyZXR1cm4gLUVOT0RFVjsKIAl9CiAKLQljb25uZWN0b3IgPSB0aWxj
ZGNfZW5jb2Rlcl9maW5kX2Nvbm5lY3RvcihkZGV2LCBlbmNvZGVyKTsKKwlwcml2LT5leHRlcm5h
bF9jb25uZWN0b3IgPQorCQl0aWxjZGNfZW5jb2Rlcl9maW5kX2Nvbm5lY3RvcihkZGV2LCBlbmNv
ZGVyKTsKIAotCWlmICghY29ubmVjdG9yKQorCWlmICghcHJpdi0+ZXh0ZXJuYWxfY29ubmVjdG9y
KQogCQlyZXR1cm4gLUVOT0RFVjsKIAogCS8qIE9ubHkgdGRhOTk4eCBpcyBzdXBwb3J0ZWQgYXQg
dGhlIG1vbWVudC4gKi8KIAl0aWxjZGNfY3J0Y19zZXRfc2ltdWxhdGVfdmVzYV9zeW5jKHByaXYt
PmNydGMsIHRydWUpOwogCXRpbGNkY19jcnRjX3NldF9wYW5lbF9pbmZvKHByaXYtPmNydGMsICZw
YW5lbF9pbmZvX3RkYTk5OHgpOwogCi0JcmV0dXJuIHRpbGNkY19hZGRfZXh0ZXJuYWxfY29ubmVj
dG9yKGRkZXYsIGNvbm5lY3Rvcik7Ci19Ci0KLXZvaWQgdGlsY2RjX3JlbW92ZV9leHRlcm5hbF9k
ZXZpY2Uoc3RydWN0IGRybV9kZXZpY2UgKmRldikKLXsKLQlzdHJ1Y3QgdGlsY2RjX2RybV9wcml2
YXRlICpwcml2ID0gZGV2LT5kZXZfcHJpdmF0ZTsKLQotCS8qIFJlc3RvcmUgdGhlIG9yaWdpbmFs
IGhlbHBlciBmdW5jdGlvbnMsIGlmIGFueS4gKi8KLQlpZiAoSVNfRVJSKHByaXYtPmNvbm5lY3Rv
cl9mdW5jcykpCi0JCWRybV9jb25uZWN0b3JfaGVscGVyX2FkZChwcml2LT5leHRlcm5hbF9jb25u
ZWN0b3IsIE5VTEwpOwotCWVsc2UgaWYgKHByaXYtPmNvbm5lY3Rvcl9mdW5jcykKLQkJZHJtX2Nv
bm5lY3Rvcl9oZWxwZXJfYWRkKHByaXYtPmV4dGVybmFsX2Nvbm5lY3RvciwKLQkJCQkJIHByaXYt
PmNvbm5lY3Rvcl9mdW5jcyk7CisJcmV0dXJuIDA7CiB9CiAKIHN0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZHJtX2VuY29kZXJfZnVuY3MgdGlsY2RjX2V4dGVybmFsX2VuY29kZXJfZnVuY3MgPSB7CkBAIC0x
NjAsNyArOTAsNiBAQCBzdGF0aWMKIGludCB0aWxjZGNfYXR0YWNoX2JyaWRnZShzdHJ1Y3QgZHJt
X2RldmljZSAqZGRldiwgc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIHsKIAlzdHJ1Y3QgdGls
Y2RjX2RybV9wcml2YXRlICpwcml2ID0gZGRldi0+ZGV2X3ByaXZhdGU7Ci0Jc3RydWN0IGRybV9j
b25uZWN0b3IgKmNvbm5lY3RvcjsKIAlpbnQgcmV0OwogCiAJcHJpdi0+ZXh0ZXJuYWxfZW5jb2Rl
ci0+cG9zc2libGVfY3J0Y3MgPSBCSVQoMCk7CkBAIC0xNzMsMTMgKzEwMiwxMiBAQCBpbnQgdGls
Y2RjX2F0dGFjaF9icmlkZ2Uoc3RydWN0IGRybV9kZXZpY2UgKmRkZXYsIHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UpCiAKIAl0aWxjZGNfY3J0Y19zZXRfcGFuZWxfaW5mbyhwcml2LT5jcnRjLCAm
cGFuZWxfaW5mb19kZWZhdWx0KTsKIAotCWNvbm5lY3RvciA9IHRpbGNkY19lbmNvZGVyX2ZpbmRf
Y29ubmVjdG9yKGRkZXYsIHByaXYtPmV4dGVybmFsX2VuY29kZXIpOwotCWlmICghY29ubmVjdG9y
KQorCXByaXYtPmV4dGVybmFsX2Nvbm5lY3RvciA9CisJCXRpbGNkY19lbmNvZGVyX2ZpbmRfY29u
bmVjdG9yKGRkZXYsIHByaXYtPmV4dGVybmFsX2VuY29kZXIpOworCWlmICghcHJpdi0+ZXh0ZXJu
YWxfY29ubmVjdG9yKQogCQlyZXR1cm4gLUVOT0RFVjsKIAotCXJldCA9IHRpbGNkY19hZGRfZXh0
ZXJuYWxfY29ubmVjdG9yKGRkZXYsIGNvbm5lY3Rvcik7Ci0KLQlyZXR1cm4gcmV0OworCXJldHVy
biAwOwogfQogCiBpbnQgdGlsY2RjX2F0dGFjaF9leHRlcm5hbF9kZXZpY2Uoc3RydWN0IGRybV9k
ZXZpY2UgKmRkZXYpCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdGlsY2RjL3RpbGNkY19l
eHRlcm5hbC5oIGIvZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfZXh0ZXJuYWwuaAppbmRl
eCA3MDI0YjQ4NzdmZGYuLmZiNDQ3NjY5NGNkOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L3RpbGNkYy90aWxjZGNfZXh0ZXJuYWwuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vdGlsY2RjL3Rp
bGNkY19leHRlcm5hbC5oCkBAIC04LDcgKzgsNiBAQAogI2RlZmluZSBfX1RJTENEQ19FWFRFUk5B
TF9IX18KIAogaW50IHRpbGNkY19hZGRfY29tcG9uZW50X2VuY29kZXIoc3RydWN0IGRybV9kZXZp
Y2UgKmRldik7Ci12b2lkIHRpbGNkY19yZW1vdmVfZXh0ZXJuYWxfZGV2aWNlKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYpOwogaW50IHRpbGNkY19nZXRfZXh0ZXJuYWxfY29tcG9uZW50cyhzdHJ1Y3Qg
ZGV2aWNlICpkZXYsCiAJCQkJICAgc3RydWN0IGNvbXBvbmVudF9tYXRjaCAqKm1hdGNoKTsKIGlu
dCB0aWxjZGNfYXR0YWNoX2V4dGVybmFsX2RldmljZShzdHJ1Y3QgZHJtX2RldmljZSAqZGRldik7
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdGlsY2RjL3RpbGNkY19wYW5lbC5jIGIvZHJp
dmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfcGFuZWwuYwppbmRleCAxMWViOWZkMzhjNGUuLjU1
ODRlNjU2Yjg1NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfcGFu
ZWwuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdGlsY2RjL3RpbGNkY19wYW5lbC5jCkBAIC0xNjMs
MTQgKzE2Myw2IEBAIHN0YXRpYyBpbnQgcGFuZWxfY29ubmVjdG9yX2dldF9tb2RlcyhzdHJ1Y3Qg
ZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogCXJldHVybiBpOwogfQogCi1zdGF0aWMgaW50IHBh
bmVsX2Nvbm5lY3Rvcl9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3Is
Ci0JCSAgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCi17Ci0Jc3RydWN0IHRpbGNkY19k
cm1fcHJpdmF0ZSAqcHJpdiA9IGNvbm5lY3Rvci0+ZGV2LT5kZXZfcHJpdmF0ZTsKLQkvKiBvdXIg
b25seSBjb25zdHJhaW50cyBhcmUgd2hhdCB0aGUgY3J0YyBjYW4gZ2VuZXJhdGU6ICovCi0JcmV0
dXJuIHRpbGNkY19jcnRjX21vZGVfdmFsaWQocHJpdi0+Y3J0YywgbW9kZSk7Ci19Ci0KIHN0YXRp
YyBzdHJ1Y3QgZHJtX2VuY29kZXIgKnBhbmVsX2Nvbm5lY3Rvcl9iZXN0X2VuY29kZXIoCiAJCXN0
cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCiB7CkBAIC0xODgsNyArMTgwLDYgQEAgc3Rh
dGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIHBhbmVsX2Nvbm5lY3Rvcl9mdW5j
cyA9IHsKIAogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2hlbHBlcl9mdW5jcyBw
YW5lbF9jb25uZWN0b3JfaGVscGVyX2Z1bmNzID0gewogCS5nZXRfbW9kZXMgICAgICAgICAgPSBw
YW5lbF9jb25uZWN0b3JfZ2V0X21vZGVzLAotCS5tb2RlX3ZhbGlkICAgICAgICAgPSBwYW5lbF9j
b25uZWN0b3JfbW9kZV92YWxpZCwKIAkuYmVzdF9lbmNvZGVyICAgICAgID0gcGFuZWxfY29ubmVj
dG9yX2Jlc3RfZW5jb2RlciwKIH07CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90aWxj
ZGMvdGlsY2RjX3RmcDQxMC5jIGIvZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfdGZwNDEw
LmMKaW5kZXggYzZlNGU1MmYzMmJjLi41MjVkYzFjMGYxYzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS90aWxjZGMvdGlsY2RjX3RmcDQxMC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90aWxj
ZGMvdGlsY2RjX3RmcDQxMC5jCkBAIC0xNzUsMTQgKzE3NSw2IEBAIHN0YXRpYyBpbnQgdGZwNDEw
X2Nvbm5lY3Rvcl9nZXRfbW9kZXMoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAly
ZXR1cm4gcmV0OwogfQogCi1zdGF0aWMgaW50IHRmcDQxMF9jb25uZWN0b3JfbW9kZV92YWxpZChz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAotCQkgIHN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlICptb2RlKQotewotCXN0cnVjdCB0aWxjZGNfZHJtX3ByaXZhdGUgKnByaXYgPSBjb25uZWN0
b3ItPmRldi0+ZGV2X3ByaXZhdGU7Ci0JLyogb3VyIG9ubHkgY29uc3RyYWludHMgYXJlIHdoYXQg
dGhlIGNydGMgY2FuIGdlbmVyYXRlOiAqLwotCXJldHVybiB0aWxjZGNfY3J0Y19tb2RlX3ZhbGlk
KHByaXYtPmNydGMsIG1vZGUpOwotfQotCiBzdGF0aWMgc3RydWN0IGRybV9lbmNvZGVyICp0ZnA0
MTBfY29ubmVjdG9yX2Jlc3RfZW5jb2RlcigKIAkJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5l
Y3RvcikKIHsKQEAgLTIwMSw3ICsxOTMsNiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25u
ZWN0b3JfZnVuY3MgdGZwNDEwX2Nvbm5lY3Rvcl9mdW5jcyA9IHsKIAogc3RhdGljIGNvbnN0IHN0
cnVjdCBkcm1fY29ubmVjdG9yX2hlbHBlcl9mdW5jcyB0ZnA0MTBfY29ubmVjdG9yX2hlbHBlcl9m
dW5jcyA9IHsKIAkuZ2V0X21vZGVzICAgICAgICAgID0gdGZwNDEwX2Nvbm5lY3Rvcl9nZXRfbW9k
ZXMsCi0JLm1vZGVfdmFsaWQgICAgICAgICA9IHRmcDQxMF9jb25uZWN0b3JfbW9kZV92YWxpZCwK
IAkuYmVzdF9lbmNvZGVyICAgICAgID0gdGZwNDEwX2Nvbm5lY3Rvcl9iZXN0X2VuY29kZXIsCiB9
OwogCi0tIApUZXhhcyBJbnN0cnVtZW50cyBGaW5sYW5kIE95LCBQb3Jra2FsYW5rYXR1IDIyLCAw
MDE4MCBIZWxzaW5raS4gWS10dW5udXMvQnVzaW5lc3MgSUQ6IDA2MTU1MjEtNC4gS290aXBhaWtr
YS9Eb21pY2lsZTogSGVsc2lua2kKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2RyaS1kZXZlbA==
