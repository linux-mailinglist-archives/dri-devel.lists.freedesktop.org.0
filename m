Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0887A5EBA4
	for <lists+dri-devel@lfdr.de>; Wed,  3 Jul 2019 20:31:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0B8FF6E191;
	Wed,  3 Jul 2019 18:31:37 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd42.google.com (mail-io1-xd42.google.com
 [IPv6:2607:f8b0:4864:20::d42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3F5D86E191
 for <dri-devel@lists.freedesktop.org>; Wed,  3 Jul 2019 18:31:36 +0000 (UTC)
Received: by mail-io1-xd42.google.com with SMTP id s7so7115862iob.11
 for <dri-devel@lists.freedesktop.org>; Wed, 03 Jul 2019 11:31:36 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=8SS+8JR590pihYz76i2GCmQ8mEmS4fWRDR7n4K2CCl0=;
 b=pcTvxP+5dFIqSRHA35O5+z8FC/EVELjiQFE8HBtztKQtCIHWd65QcQq0JCODgY+2rv
 WWSNZAnzKEoknFGB70vV9jLjPYXoLTXA+PIii2IwIlyeItjOFQ88uzA3qtlMKAUEI8qS
 Z2UyrlviWAw5aJnmAb0qtxZsuTbFd6+kzEQbaea/42Hc577Xm3Gc9UeZ2R9rHhJgpiIu
 uZ6fLpTiVWpIegVu/DkRa1JzuDEcGSyY76M2sWfgRdMJWvKGjQu2/bzht6cRhxDIJ3CN
 Kt1vCudVdPnnD4IURUTehkuTH0mHuBJxREf8su/BQn95JmlemuYrz8HDAF0z5y5in/aM
 Y79g==
X-Gm-Message-State: APjAAAUWvIwC54Anv+89pGxhDQOivAahaYKMqxZGfJJJrp6EVX9WEtof
 9TZuqCC2eQ2jHS8W5NGBtApVZ18eL3iVW0DIyu4=
X-Google-Smtp-Source: APXvYqx/feT6blmZAkOf27wumoFtjAz3KF0Xw+gJ512qybjttGFSF/PHWesWz/gBcBidXky6NX0VPtyf0bAPLj+rdZQ=
X-Received: by 2002:a5d:8e08:: with SMTP id e8mr11778338iod.139.1562178695281; 
 Wed, 03 Jul 2019 11:31:35 -0700 (PDT)
MIME-Version: 1.0
References: <20190702141903.1131-1-kraxel@redhat.com>
 <20190702141903.1131-8-kraxel@redhat.com>
In-Reply-To: <20190702141903.1131-8-kraxel@redhat.com>
From: Chia-I Wu <olvaffe@gmail.com>
Date: Wed, 3 Jul 2019 11:31:24 -0700
Message-ID: <CAPaKu7TJ1RgL_CjGnieE1hOOXnT-ECRk67ntRCPTFiv+EmrX4Q@mail.gmail.com>
Subject: Re: [PATCH v6 07/18] drm/virtio: add virtio_gpu_object_array & helpers
To: Gerd Hoffmann <kraxel@redhat.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=8SS+8JR590pihYz76i2GCmQ8mEmS4fWRDR7n4K2CCl0=;
 b=n0GcCnM4Zpd6DXDVcuP2WAwVWo6bx/V7wVHqGXBz5F0fxthoCPt3nnx4uOms865kuJ
 UbNE6Ku8iihX6Hy6fhmgYyONJEYhgkQ8GvToFb4QPEDqjfR+/p7UgtOHPGfwAE3/9ZZm
 toCRE3Q0PSNiA9vnMLEgN/qK4VydmaN+7wldC5gAdT+q1oYZS/jXLich2vRCtwP6z1VS
 6zN9iyEBbiPbvfPaay9P+9Td4PhrxGxSSyo4v3xyeMlCFdwcHkH6yLvhe+pEYMYET768
 gJfpadeG8t6gUfi9ZuxFCGKS45+rj3mkfqXw95anehakvdILVBDq4APo/mrIq+y2SXGB
 k5BA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, open list <linux-kernel@vger.kernel.org>,
 ML dri-devel <dri-devel@lists.freedesktop.org>,
 "open list:VIRTIO GPU DRIVER" <virtualization@lists.linux-foundation.org>,
 Gurchetan Singh <gurchetansingh@chromium.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBKdWwgMiwgMjAxOSBhdCA3OjE5IEFNIEdlcmQgSG9mZm1hbm4gPGtyYXhlbEByZWRo
YXQuY29tPiB3cm90ZToKPgo+IFNvbWUgaGVscGVyIGZ1bmN0aW9ucyB0byBtYW5hZ2UgYW4gYXJy
YXkgb2YgZ2VtIG9iamVjdHMuCj4KPiB2NjoKPiAgLSBhZGQgdGlja2V0IHRvIHN0cnVjdCB2aXJ0
aW9fZ3B1X29iamVjdF9hcnJheS4KPiAgLSBhZGQgdmlydGlvX2dwdV9hcnJheV97bG9jayx1bmxv
Y2t9X3Jlc3YgaGVscGVycy4KPiAgLSBhZGQgdmlydGlvX2dwdV9hcnJheV9hZGRfZmVuY2UgaGVs
cGVyLgo+IHY1OiBzb21lIHNtYWxsIG9wdGltaXphdGlvbnMgKENoaWEtSSBXdSkuCj4gdjQ6IG1h
a2UgdGhlbSB2aXJ0aW8tcHJpdmF0ZSBpbnN0ZWFkIG9mIGdlbmVyaWMgaGVscGVycy4KPgo+IFNp
Z25lZC1vZmYtYnk6IEdlcmQgSG9mZm1hbm4gPGtyYXhlbEByZWRoYXQuY29tPgo+IC0tLQo+ICBk
cml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZHJ2LmggfCAxNyArKysrKysKPiAgZHJpdmVy
cy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2dlbS5jIHwgODMgKysrKysrKysrKysrKysrKysrKysr
KysrKysrKwo+ICAyIGZpbGVzIGNoYW5nZWQsIDEwMCBpbnNlcnRpb25zKCspCj4KPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oIGIvZHJpdmVycy9ncHUv
ZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oCj4gaW5kZXggMDdmNjAwMWVhOTFlLi5hYmIwNzhhNWRl
ZGYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oCj4gQEAgLTg0LDYgKzg0
LDEyIEBAIHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdCB7Cj4gICNkZWZpbmUgZ2VtX3RvX3ZpcnRp
b19ncHVfb2JqKGdvYmopIFwKPiAgICAgICAgIGNvbnRhaW5lcl9vZigoZ29iaiksIHN0cnVjdCB2
aXJ0aW9fZ3B1X29iamVjdCwgZ2VtX2Jhc2UpCj4KPiArc3RydWN0IHZpcnRpb19ncHVfb2JqZWN0
X2FycmF5IHsKPiArICAgICAgIHN0cnVjdCB3d19hY3F1aXJlX2N0eCB0aWNrZXQ7Cj4gKyAgICAg
ICB1MzIgbmVudHMsIHRvdGFsOwo+ICsgICAgICAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmpz
W107Cj4gK307Cj4gKwo+ICBzdHJ1Y3QgdmlydGlvX2dwdV92YnVmZmVyOwo+ICBzdHJ1Y3Qgdmly
dGlvX2dwdV9kZXZpY2U7Cj4KPiBAQCAtMjUxLDYgKzI1NywxNyBAQCBpbnQgdmlydGlvX2dwdV9t
b2RlX2R1bWJfbW1hcChzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwKPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVpbnQzMl90IGhhbmRsZSwgdWludDY0X3QgKm9mZnNldF9wKTsKPgo+
ICtzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKnZpcnRpb19ncHVfYXJyYXlfYWxsb2Mo
dTMyIG5lbnRzKTsKPiArc3RydWN0IHZpcnRpb19ncHVfb2JqZWN0X2FycmF5Kgo+ICt2aXJ0aW9f
Z3B1X2FycmF5X2Zyb21faGFuZGxlcyhzdHJ1Y3QgZHJtX2ZpbGUgKmRybV9maWxlLCB1MzIgKmhh
bmRsZXMsIHUzMiBuZW50cyk7Cj4gK3ZvaWQgdmlydGlvX2dwdV9hcnJheV9hZGRfb2JqKHN0cnVj
dCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqb2JqcywKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaik7Cj4gK2ludCB2aXJ0aW9fZ3B1X2Fy
cmF5X2xvY2tfcmVzdihzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKm9ianMpOwo+ICt2
b2lkIHZpcnRpb19ncHVfYXJyYXlfdW5sb2NrX3Jlc3Yoc3RydWN0IHZpcnRpb19ncHVfb2JqZWN0
X2FycmF5ICpvYmpzKTsKPiArdm9pZCB2aXJ0aW9fZ3B1X2FycmF5X2FkZF9mZW5jZShzdHJ1Y3Qg
dmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKm9ianMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSk7Cj4gK3ZvaWQgdmlydGlvX2dwdV9hcnJh
eV9wdXRfZnJlZShzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKm9ianMpOwo+ICsKPiAg
LyogdmlydGlvIHZnICovCj4gIGludCB2aXJ0aW9fZ3B1X2FsbG9jX3ZidWZzKHN0cnVjdCB2aXJ0
aW9fZ3B1X2RldmljZSAqdmdkZXYpOwo+ICB2b2lkIHZpcnRpb19ncHVfZnJlZV92YnVmcyhzdHJ1
Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3ZpcnRpby92aXJ0Z3B1X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1
X2dlbS5jCj4gaW5kZXggOWM5YWQzYjE0MDgwLi5lODhkZjVlMDZkMDYgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2dlbS5jCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3ZpcnRpby92aXJ0Z3B1X2dlbS5jCj4gQEAgLTE2OSwzICsxNjksODYgQEAgdm9pZCB2aXJ0
aW9fZ3B1X2dlbV9vYmplY3RfY2xvc2Uoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosCj4gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcW9iai0+aHdfcmVz
X2hhbmRsZSk7Cj4gICAgICAgICB2aXJ0aW9fZ3B1X29iamVjdF91bnJlc2VydmUocW9iaik7Cj4g
IH0KPiArCj4gK3N0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqdmlydGlvX2dwdV9hcnJh
eV9hbGxvYyh1MzIgbmVudHMpCj4gK3sKPiArICAgICAgIHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVj
dF9hcnJheSAqb2JqczsKPiArICAgICAgIHNpemVfdCBzaXplID0gc2l6ZW9mKCpvYmpzKSArIHNp
emVvZihvYmpzLT5vYmpzWzBdKSAqIG5lbnRzOwo+ICsKPiArICAgICAgIG9ianMgPSBrbWFsbG9j
KHNpemUsIEdGUF9LRVJORUwpOwo+ICsgICAgICAgaWYgKCFvYmpzKQo+ICsgICAgICAgICAgICAg
ICByZXR1cm4gTlVMTDsKPiArCj4gKyAgICAgICBvYmpzLT5uZW50cyA9IDA7Cj4gKyAgICAgICBv
YmpzLT50b3RhbCA9IG5lbnRzOwo+ICsgICAgICAgcmV0dXJuIG9ianM7Cj4gK30KPiArCj4gK3N0
YXRpYyB2b2lkIHZpcnRpb19ncHVfYXJyYXlfZnJlZShzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3Rf
YXJyYXkgKm9ianMpCj4gK3sKPiArICAgICAgIGtmcmVlKG9ianMpOwo+ICt9Cj4gKwo+ICtzdHJ1
Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkqCj4gK3ZpcnRpb19ncHVfYXJyYXlfZnJvbV9oYW5k
bGVzKHN0cnVjdCBkcm1fZmlsZSAqZHJtX2ZpbGUsIHUzMiAqaGFuZGxlcywgdTMyIG5lbnRzKQo+
ICt7Cj4gKyAgICAgICBzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKm9ianM7Cj4gKyAg
ICAgICB1MzIgaTsKPiArCj4gKyAgICAgICBvYmpzID0gdmlydGlvX2dwdV9hcnJheV9hbGxvYyhu
ZW50cyk7Cj4gKyAgICAgICBpZiAoIW9ianMpCj4gKyAgICAgICAgICAgICAgIHJldHVybiBOVUxM
Owo+ICsKPiArICAgICAgIGZvciAoaSA9IDA7IGkgPCBuZW50czsgaSsrKSB7Cj4gKyAgICAgICAg
ICAgICAgIG9ianMtPm5lbnRzID0gaTsKVGhpcyBsaW5lIGNhbiBiZSBtb3ZlZCBpbnRvIHRoZSBp
Zi1ibG9jayBqdXN0IGJlbG93Lgo+ICsgICAgICAgICAgICAgICBvYmpzLT5vYmpzW2ldID0gZHJt
X2dlbV9vYmplY3RfbG9va3VwKGRybV9maWxlLCBoYW5kbGVzW2ldKTsKPiArICAgICAgICAgICAg
ICAgaWYgKCFvYmpzLT5vYmpzW2ldKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgdmlydGlv
X2dwdV9hcnJheV9wdXRfZnJlZShvYmpzKTsKPiArICAgICAgICAgICAgICAgICAgICAgICByZXR1
cm4gTlVMTDsKPiArICAgICAgICAgICAgICAgfQo+ICsgICAgICAgfQo+ICsgICAgICAgb2Jqcy0+
bmVudHMgPSBpOwo+ICsgICAgICAgcmV0dXJuIG9ianM7Cj4gK30KPiArCj4gK3ZvaWQgdmlydGlv
X2dwdV9hcnJheV9hZGRfb2JqKHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqb2JqcywK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9i
aikKPiArewo+ICsgICAgICAgaWYgKFdBUk5fT05fT05DRShvYmpzLT5uZW50cyA9PSBvYmpzLT50
b3RhbCkpCj4gKyAgICAgICAgICAgICAgIHJldHVybjsKPiArCj4gKyAgICAgICBkcm1fZ2VtX29i
amVjdF9nZXQob2JqKTsKPiArICAgICAgIG9ianMtPm9ianNbb2Jqcy0+bmVudHNdID0gb2JqOwo+
ICsgICAgICAgb2Jqcy0+bmVudHMrKzsKPiArfQo+ICsKPiAraW50IHZpcnRpb19ncHVfYXJyYXlf
bG9ja19yZXN2KHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqb2JqcykKPiArewo+ICsg
ICAgICAgcmV0dXJuIGRybV9nZW1fbG9ja19yZXNlcnZhdGlvbnMob2Jqcy0+b2Jqcywgb2Jqcy0+
bmVudHMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmb2Jqcy0+
dGlja2V0KTsKPiArfQo+ICsKPiArdm9pZCB2aXJ0aW9fZ3B1X2FycmF5X3VubG9ja19yZXN2KHN0
cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqb2JqcykKPiArewo+ICsgICAgICAgZHJtX2dl
bV91bmxvY2tfcmVzZXJ2YXRpb25zKG9ianMtPm9ianMsIG9ianMtPm5lbnRzLAo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICZvYmpzLT50aWNrZXQpOwo+ICt9Cj4gKwo+ICt2
b2lkIHZpcnRpb19ncHVfYXJyYXlfYWRkX2ZlbmNlKHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9h
cnJheSAqb2JqcywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkbWFf
ZmVuY2UgKmZlbmNlKQo+ICt7Cj4gKyAgICAgICBpbnQgaTsKPiArCj4gKyAgICAgICBmb3IgKGkg
PSAwOyBpIDwgb2Jqcy0+bmVudHM7IGkrKykKPiArICAgICAgICAgICAgICAgcmVzZXJ2YXRpb25f
b2JqZWN0X2FkZF9leGNsX2ZlbmNlKG9ianMtPm9ianNbaV0tPnJlc3YsCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZW5jZSk7Cj4gK30KPiArCj4g
K3ZvaWQgdmlydGlvX2dwdV9hcnJheV9wdXRfZnJlZShzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3Rf
YXJyYXkgKm9ianMpCj4gK3sKPiArICAgICAgIHUzMiBpOwo+ICsKPiArICAgICAgIGZvciAoaSA9
IDA7IGkgPCBvYmpzLT5uZW50czsgaSsrKQo+ICsgICAgICAgICAgICAgICBkcm1fZ2VtX29iamVj
dF9wdXRfdW5sb2NrZWQob2Jqcy0+b2Jqc1tpXSk7Cj4gKyAgICAgICB2aXJ0aW9fZ3B1X2FycmF5
X2ZyZWUob2Jqcyk7Cj4gK30KPiAtLQo+IDIuMTguMQo+Cl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
