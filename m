Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3A96623C523
	for <lists+dri-devel@lfdr.de>; Wed,  5 Aug 2020 07:33:10 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 632A489D5F;
	Wed,  5 Aug 2020 05:33:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yb1-xb43.google.com (mail-yb1-xb43.google.com
 [IPv6:2607:f8b0:4864:20::b43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0BFAC89D5F
 for <dri-devel@lists.freedesktop.org>; Wed,  5 Aug 2020 05:33:07 +0000 (UTC)
Received: by mail-yb1-xb43.google.com with SMTP id e14so9322092ybf.4
 for <dri-devel@lists.freedesktop.org>; Tue, 04 Aug 2020 22:33:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=9TyEShXSEw6BliHkgG2+WNWjy6H9XA/tGXNo3jy1d1U=;
 b=M/CRjhmhftgyPKPDjzsqYfJAZW3hEhKHcDhM0Rh5rZjzGmnSzHtK8t1NL40XfW0EPv
 OSVHXLDjPmhHAzAi7HxsnBRsqhg9+4J96VAD0T1dZQX+rR/9mjPGyxtzYeImiSzT50wt
 CAto1RzXmP4XtHU2VZdqdeG2OzE+ZhVCWq52KSjFPc914wMEYW6nSyAykcENVshd8X7G
 BUfzyVCDiI8VcalyAiKru+6fCm0QZHxHZPFDXUEFiFejvH1h0xbsZXSnK471zowg9bZK
 4rK4mMk1N8p7Amh4jrXwkbRg5DiVaE0IPR3fMrPa3UL09nJEd2gfvtmjId8t9X2TOhYN
 y6sw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=9TyEShXSEw6BliHkgG2+WNWjy6H9XA/tGXNo3jy1d1U=;
 b=aIGnlJP09vtvkPzNNFIgyWMBFLr8hrfdzaEWo9qqgqU/outxQZ7iO7/l6pI67o+QC9
 W2GQrBE3WWeHtPo8OVX4Zqx49kNfmTAXl3/aWKtBKisXj+20p8mlWyxp8XcqMtvQ6Wd1
 NB2X80cOgsA+10nffkzkxoArSRo9O9ic3OemnGlBD6eyX3c1/mB7wR8GZ9WyFjpyic6V
 lNDrApOiQiO3PHiWT00ciA3AXb4FBQzrcZD9PkLr4qm6spmZrIe33I3JsYkF8DwZ4bTk
 cIVEQbIYaswfmHL74s4DuZO8rDltlJ+VwZsuFPksKsDhP6hLiGuWh5JCdvSZrDL6h9gU
 XB7w==
X-Gm-Message-State: AOAM532D8xoqBiySB7ucvWQkI1mytYiNo+4WTtEzLGAWfVgLgqEiDUPR
 ikv55vTMX+HSkCG3ylSZFgczGY5ZFWSxTQu2DJY=
X-Google-Smtp-Source: ABdhPJwAPcA6RvJhMT0kLASRC2jvKS78PZpZyPjACKaxhlYdbRAQnC1iPZhbwTOYvaGlyg4kM9n2eMCILyvHFD1mdpc=
X-Received: by 2002:a25:8447:: with SMTP id r7mr2078123ybm.147.1596605586283; 
 Tue, 04 Aug 2020 22:33:06 -0700 (PDT)
MIME-Version: 1.0
References: <20200804025632.3868079-1-airlied@gmail.com>
 <20200804025632.3868079-7-airlied@gmail.com>
 <06f8ad09-ae3f-60e8-da3d-0cad42968146@amd.com>
In-Reply-To: <06f8ad09-ae3f-60e8-da3d-0cad42968146@amd.com>
From: Ben Skeggs <skeggsb@gmail.com>
Date: Wed, 5 Aug 2020 15:32:55 +1000
Message-ID: <CACAvsv5M60D1u=hz4k20O9Q6R6jrEPNRn_AF-Qo5kaTyEQLEdA@mail.gmail.com>
Subject: Re: [PATCH 06/59] drm/ttm: use a helper for unlocked moves to the lru
 tail
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: sroland@vmware.com, ML dri-devel <dri-devel@lists.freedesktop.org>,
 linux-graphics-maintainer@vmware.com, Ben Skeggs <bskeggs@redhat.com>,
 Gerd Hoffmann <kraxel@redhat.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCA0IEF1ZyAyMDIwIGF0IDIwOjM0LCBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4u
a29lbmlnQGFtZC5jb20+IHdyb3RlOgo+Cj4gQW0gMDQuMDguMjAgdW0gMDQ6NTUgc2NocmllYiBE
YXZlIEFpcmxpZToKPiA+IEZyb206IERhdmUgQWlybGllIDxhaXJsaWVkQHJlZGhhdC5jb20+Cj4g
Pgo+ID4gVGhlIHBhdHRlcm4gd2FzIHJlcGVhdGVkIGEgZmV3IHRpbWVzLCBqdXN0IG1ha2UgYW4g
aW5saW5lIGZvciBpdC4KPiA+Cj4gPiBTaWduZWQtb2ZmLWJ5OiBEYXZlIEFpcmxpZSA8YWlybGll
ZEByZWRoYXQuY29tPgo+Cj4gUmV2aWV3ZWQtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlh
bi5rb2VuaWdAYW1kLmNvbT4KUmV2aWV3ZWQtYnk6IEJlbiBTa2VnZ3MgPGJza2VnZ3NAcmVkaGF0
LmNvbT4KCj4KPiA+IC0tLQo+ID4gICBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jICAgIHwg
IDggKystLS0tLS0KPiA+ICAgZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdm0uYyB8ICA0ICst
LS0KPiA+ICAgaW5jbHVkZS9kcm0vdHRtL3R0bV9ib19kcml2ZXIuaCB8IDExICsrKysrKysrLS0t
Cj4gPiAgIDMgZmlsZXMgY2hhbmdlZCwgMTEgaW5zZXJ0aW9ucygrKSwgMTIgZGVsZXRpb25zKC0p
Cj4gPgo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMgYi9kcml2
ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCj4gPiBpbmRleCA3MjFmZjU0NmJmNDcuLjJiNDkwMzcy
MzFlYiAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKPiA+ICsr
KyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKPiA+IEBAIC0xMTAzLDkgKzExMDMsNyBA
QCBpbnQgdHRtX2JvX21lbV9zcGFjZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+ID4K
PiA+ICAgZXJyb3I6Cj4gPiAgICAgICBpZiAoYm8tPm1lbS5tZW1fdHlwZSA9PSBUVE1fUExfU1lT
VEVNICYmICFsaXN0X2VtcHR5KCZiby0+bHJ1KSkgewo+ID4gLSAgICAgICAgICAgICBzcGluX2xv
Y2soJnR0bV9ib19nbG9iLmxydV9sb2NrKTsKPiA+IC0gICAgICAgICAgICAgdHRtX2JvX21vdmVf
dG9fbHJ1X3RhaWwoYm8sIE5VTEwpOwo+ID4gLSAgICAgICAgICAgICBzcGluX3VubG9jaygmdHRt
X2JvX2dsb2IubHJ1X2xvY2spOwo+ID4gKyAgICAgICAgICAgICB0dG1fYm9fbW92ZV90b19scnVf
dGFpbF91bmxvY2tlZChibyk7Cj4gPiAgICAgICB9Cj4gPgo+ID4gICAgICAgcmV0dXJuIHJldDsK
PiA+IEBAIC0xMzIwLDkgKzEzMTgsNyBAQCBpbnQgdHRtX2JvX2luaXRfcmVzZXJ2ZWQoc3RydWN0
IHR0bV9ib19kZXZpY2UgKmJkZXYsCj4gPiAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gPiAg
ICAgICB9Cj4gPgo+ID4gLSAgICAgc3Bpbl9sb2NrKCZ0dG1fYm9fZ2xvYi5scnVfbG9jayk7Cj4g
PiAtICAgICB0dG1fYm9fbW92ZV90b19scnVfdGFpbChibywgTlVMTCk7Cj4gPiAtICAgICBzcGlu
X3VubG9jaygmdHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ID4gKyAgICAgdHRtX2JvX21vdmVfdG9f
bHJ1X3RhaWxfdW5sb2NrZWQoYm8pOwo+ID4KPiA+ICAgICAgIHJldHVybiByZXQ7Cj4gPiAgIH0K
PiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5jIGIvZHJpdmVy
cy9ncHUvZHJtL3R0bS90dG1fYm9fdm0uYwo+ID4gaW5kZXggZDdhNjUzN2RkNmVlLi40NjhhMGVi
OWU2MzIgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5jCj4g
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5jCj4gPiBAQCAtMzA4LDkgKzMw
OCw3IEBAIHZtX2ZhdWx0X3QgdHRtX2JvX3ZtX2ZhdWx0X3Jlc2VydmVkKHN0cnVjdCB2bV9mYXVs
dCAqdm1mLAo+ID4gICAgICAgICAgICAgICB9Cj4gPgo+ID4gICAgICAgICAgICAgICBpZiAoYm8t
Pm1vdmluZyAhPSBtb3ZpbmcpIHsKPiA+IC0gICAgICAgICAgICAgICAgICAgICBzcGluX2xvY2so
JnR0bV9ib19nbG9iLmxydV9sb2NrKTsKPiA+IC0gICAgICAgICAgICAgICAgICAgICB0dG1fYm9f
bW92ZV90b19scnVfdGFpbChibywgTlVMTCk7Cj4gPiAtICAgICAgICAgICAgICAgICAgICAgc3Bp
bl91bmxvY2soJnR0bV9ib19nbG9iLmxydV9sb2NrKTsKPiA+ICsgICAgICAgICAgICAgICAgICAg
ICB0dG1fYm9fbW92ZV90b19scnVfdGFpbF91bmxvY2tlZChibyk7Cj4gPiAgICAgICAgICAgICAg
IH0KPiA+ICAgICAgICAgICAgICAgZG1hX2ZlbmNlX3B1dChtb3ZpbmcpOwo+ID4gICAgICAgfQo+
ID4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJpdmVyLmggYi9pbmNsdWRl
L2RybS90dG0vdHRtX2JvX2RyaXZlci5oCj4gPiBpbmRleCBjMjBmZWY0ZGExZDMuLjc5NThlNDEx
MjY5YSAxMDA2NDQKPiA+IC0tLSBhL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJpdmVyLmgKPiA+
ICsrKyBiL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJpdmVyLmgKPiA+IEBAIC02NTgsNiArNjU4
LDEzIEBAIHN0YXRpYyBpbmxpbmUgaW50IHR0bV9ib19yZXNlcnZlX3Nsb3dwYXRoKHN0cnVjdCB0
dG1fYnVmZmVyX29iamVjdCAqYm8sCj4gPiAgICAgICByZXR1cm4gMDsKPiA+ICAgfQo+ID4KPiA+
ICtzdGF0aWMgaW5saW5lIHZvaWQgdHRtX2JvX21vdmVfdG9fbHJ1X3RhaWxfdW5sb2NrZWQoc3Ry
dWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibykKPiA+ICt7Cj4gPiArICAgICBzcGluX2xvY2soJnR0
bV9ib19nbG9iLmxydV9sb2NrKTsKPiA+ICsgICAgIHR0bV9ib19tb3ZlX3RvX2xydV90YWlsKGJv
LCBOVUxMKTsKPiA+ICsgICAgIHNwaW5fdW5sb2NrKCZ0dG1fYm9fZ2xvYi5scnVfbG9jayk7Cj4g
PiArfQo+ID4gKwo+ID4gICAvKioKPiA+ICAgICogdHRtX2JvX3VucmVzZXJ2ZQo+ID4gICAgKgo+
ID4gQEAgLTY2Nyw5ICs2NzQsNyBAQCBzdGF0aWMgaW5saW5lIGludCB0dG1fYm9fcmVzZXJ2ZV9z
bG93cGF0aChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+ID4gICAgKi8KPiA+ICAgc3Rh
dGljIGlubGluZSB2b2lkIHR0bV9ib191bnJlc2VydmUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0
ICpibykKPiA+ICAgewo+ID4gLSAgICAgc3Bpbl9sb2NrKCZ0dG1fYm9fZ2xvYi5scnVfbG9jayk7
Cj4gPiAtICAgICB0dG1fYm9fbW92ZV90b19scnVfdGFpbChibywgTlVMTCk7Cj4gPiAtICAgICBz
cGluX3VubG9jaygmdHRtX2JvX2dsb2IubHJ1X2xvY2spOwo+ID4gKyAgICAgdHRtX2JvX21vdmVf
dG9fbHJ1X3RhaWxfdW5sb2NrZWQoYm8pOwo+ID4gICAgICAgZG1hX3Jlc3ZfdW5sb2NrKGJvLT5i
YXNlLnJlc3YpOwo+ID4gICB9Cj4gPgo+Cj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KPiBkcmktZGV2ZWwgbWFpbGluZyBsaXN0Cj4gZHJpLWRldmVsQGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwo+IGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vZHJpLWRldmVsCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2RyaS1kZXZlbAo=
