Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 04B7A9BA28
	for <lists+dri-devel@lfdr.de>; Sat, 24 Aug 2019 03:34:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6B0A26ED80;
	Sat, 24 Aug 2019 01:34:48 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x44a.google.com (mail-pf1-x44a.google.com
 [IPv6:2607:f8b0:4864:20::44a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0FDE76ED81
 for <dri-devel@lists.freedesktop.org>; Sat, 24 Aug 2019 01:34:45 +0000 (UTC)
Received: by mail-pf1-x44a.google.com with SMTP id q67so7704759pfc.10
 for <dri-devel@lists.freedesktop.org>; Fri, 23 Aug 2019 18:34:45 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=MvjpVGMvfwmVEXjIVDCTrRqNrLbh+KlnrhcccTeoJOQ=;
 b=VCuD2vGtv+GDwMJThb5RaosJuI3RiNy5uONxJ48T4UY3O3inOUUNdMgdORy/8FofUO
 sRaUVbwLUbYDCMd1QTFIzWcxKM7RC1g7uPMyzgQQ+Vf+zfMdV4Al43RJIi/LGz+4cldg
 VBcQ8bmwawkIy71OU7rgok6FT6eX8qDICKLBAbHGDDS7C7/phQ8hYjDddzyltVrT6KsM
 LsM1fX1lG33p5GJ9Sy3JTA6/qJgkHzK6M/6dJiNH1wVK6Fb1mzXuT18PHGC5gYUCxrRt
 TDLphV9VTUySwoFSRO1KY3YlSE8EbnIUA2RBVDU5x8D5V6vUc8SOi0QOc0DvTujgOUp4
 VmLg==
X-Gm-Message-State: APjAAAWHfhe4xex6qXVZoF7bihWMVZMDrLtGKLjBi0vt+x1rMO6cwH3d
 2DdcVn8ofZrPsYd58Hlf5D94bc8AOTqASejjDnc0dQ==
X-Google-Smtp-Source: APXvYqz4GgyMCS8tV6s1J9G66Hsm89iEpoEL7iYiRwCEUuhqWDwwg7IPbwx3GHUCgMsAQ94FwY5NF4SXRaOTaCB0mx8zxQ==
X-Received: by 2002:a63:c03:: with SMTP id b3mr6559550pgl.23.1566610483671;
 Fri, 23 Aug 2019 18:34:43 -0700 (PDT)
Date: Fri, 23 Aug 2019 18:34:10 -0700
In-Reply-To: <20190824013425.175645-1-brendanhiggins@google.com>
Message-Id: <20190824013425.175645-4-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190824013425.175645-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.23.0.187.g17f5b7556c-goog
Subject: [PATCH v15 03/18] kunit: test: add string_stream a std::stream like
 string builder
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=MvjpVGMvfwmVEXjIVDCTrRqNrLbh+KlnrhcccTeoJOQ=;
 b=kotgoT8JUkL0NUJB7yn7CFmZC3urjh47jhKP2NQ+3CJ7t2oBp3LkN5ZX1OCm9fGHPS
 g7Jsp34FjZoAej74y5zBGOtFVePsOYLQdobttz/7/AMJmyyGqbLlJcjO2jKp/GzOkES6
 TkwAm5msJI0ywnRhq2yZhgWyQrBV1VvKKARzyOB4Dua99g7RCunh1RkZaG1Mqvh+mwOM
 6KPCOo6LoY612rPqd9CSW3AJCHP38isewr/xNwJrex5kUymcULg770HyZ2Ys0x1PXpa4
 33o9N4qW4edImbxPzquxkIoj0w0xcdsPRc+MlzMiZDAqVMlz5WJRx/cqSJx1L3kRT+J6
 XdCg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, Stephen Boyd <swboyd@chromium.org>, julia.lawall@lip6.fr,
 kunit-dev@googlegroups.com, richard@nod.at, rdunlap@infradead.org,
 linux-kernel@vger.kernel.org, mpe@ellerman.id.au,
 linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QSBudW1iZXIgb2YgdGVzdCBmZWF0dXJlcyBuZWVkIHRvIGRvIHByZXR0eSBjb21wbGljYXRlZCBz
dHJpbmcgcHJpbnRpbmcKd2hlcmUgaXQgbWF5IG5vdCBiZSBwb3NzaWJsZSB0byByZWx5IG9uIGEg
c2luZ2xlIHByZWFsbG9jYXRlZCBzdHJpbmcKd2l0aCBwYXJhbWV0ZXJzLgoKU28gcHJvdmlkZSBh
IGxpYnJhcnkgZm9yIGNvbnN0cnVjdGluZyB0aGUgc3RyaW5nIGFzIHlvdSBnbyBzaW1pbGFyIHRv
CkMrKydzIHN0ZDo6c3RyaW5nLiBzdHJpbmdfc3RyZWFtIGlzIHJlYWxseSBqdXN0IGEgc3RyaW5n
IGJ1aWxkZXIsCm5vdGhpbmcgbW9yZS4KClNpZ25lZC1vZmYtYnk6IEJyZW5kYW4gSGlnZ2lucyA8
YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNvbT4KUmV2aWV3ZWQtYnk6IEdyZWcgS3JvYWgtSGFydG1h
biA8Z3JlZ2toQGxpbnV4Zm91bmRhdGlvbi5vcmc+ClJldmlld2VkLWJ5OiBMb2dhbiBHdW50aG9y
cGUgPGxvZ2FuZ0BkZWx0YXRlZS5jb20+ClJldmlld2VkLWJ5OiBTdGVwaGVuIEJveWQgPHN3Ym95
ZEBjaHJvbWl1bS5vcmc+Ci0tLQogaW5jbHVkZS9rdW5pdC9zdHJpbmctc3RyZWFtLmggfCAgNTEg
KysrKysrKysKIGt1bml0L01ha2VmaWxlICAgICAgICAgICAgICAgIHwgICAzICstCiBrdW5pdC9z
dHJpbmctc3RyZWFtLmMgICAgICAgICB8IDIxNyArKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrCiAzIGZpbGVzIGNoYW5nZWQsIDI3MCBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0p
CiBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS9rdW5pdC9zdHJpbmctc3RyZWFtLmgKIGNyZWF0
ZSBtb2RlIDEwMDY0NCBrdW5pdC9zdHJpbmctc3RyZWFtLmMKCmRpZmYgLS1naXQgYS9pbmNsdWRl
L2t1bml0L3N0cmluZy1zdHJlYW0uaCBiL2luY2x1ZGUva3VuaXQvc3RyaW5nLXN0cmVhbS5oCm5l
dyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uZmU5OGEwMGI3NWE5Ci0tLSAv
ZGV2L251bGwKKysrIGIvaW5jbHVkZS9rdW5pdC9zdHJpbmctc3RyZWFtLmgKQEAgLTAsMCArMSw1
MSBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAgKi8KKy8qCisgKiBDKysg
c3RyZWFtIHN0eWxlIHN0cmluZyBidWlsZGVyIHVzZWQgaW4gS1VuaXQgZm9yIGJ1aWxkaW5nIG1l
c3NhZ2VzLgorICoKKyAqIENvcHlyaWdodCAoQykgMjAxOSwgR29vZ2xlIExMQy4KKyAqIEF1dGhv
cjogQnJlbmRhbiBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29tPgorICovCisKKyNp
Zm5kZWYgX0tVTklUX1NUUklOR19TVFJFQU1fSAorI2RlZmluZSBfS1VOSVRfU1RSSU5HX1NUUkVB
TV9ICisKKyNpbmNsdWRlIDxsaW51eC9zcGlubG9jay5oPgorI2luY2x1ZGUgPGxpbnV4L3R5cGVz
Lmg+CisjaW5jbHVkZSA8c3RkYXJnLmg+CisKK3N0cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50
IHsKKwlzdHJ1Y3Qga3VuaXQgKnRlc3Q7CisJc3RydWN0IGxpc3RfaGVhZCBub2RlOworCWNoYXIg
KmZyYWdtZW50OworfTsKKworc3RydWN0IHN0cmluZ19zdHJlYW0geworCXNpemVfdCBsZW5ndGg7
CisJc3RydWN0IGxpc3RfaGVhZCBmcmFnbWVudHM7CisJLyogbGVuZ3RoIGFuZCBmcmFnbWVudHMg
YXJlIHByb3RlY3RlZCBieSB0aGlzIGxvY2sgKi8KKwlzcGlubG9ja190IGxvY2s7CisJc3RydWN0
IGt1bml0ICp0ZXN0OworCWdmcF90IGdmcDsKK307CisKK3N0cnVjdCBrdW5pdDsKKworc3RydWN0
IHN0cmluZ19zdHJlYW0gKmFsbG9jX3N0cmluZ19zdHJlYW0oc3RydWN0IGt1bml0ICp0ZXN0LCBn
ZnBfdCBnZnApOworCitpbnQgX19wcmludGYoMiwgMykgc3RyaW5nX3N0cmVhbV9hZGQoc3RydWN0
IHN0cmluZ19zdHJlYW0gKnN0cmVhbSwKKwkJCQkgICAgIGNvbnN0IGNoYXIgKmZtdCwgLi4uKTsK
KworaW50IHN0cmluZ19zdHJlYW1fdmFkZChzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtLAor
CQkgICAgICAgY29uc3QgY2hhciAqZm10LAorCQkgICAgICAgdmFfbGlzdCBhcmdzKTsKKworY2hh
ciAqc3RyaW5nX3N0cmVhbV9nZXRfc3RyaW5nKHN0cnVjdCBzdHJpbmdfc3RyZWFtICpzdHJlYW0p
OworCitpbnQgc3RyaW5nX3N0cmVhbV9hcHBlbmQoc3RydWN0IHN0cmluZ19zdHJlYW0gKnN0cmVh
bSwKKwkJCSBzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqb3RoZXIpOworCitib29sIHN0cmluZ19zdHJl
YW1faXNfZW1wdHkoc3RydWN0IHN0cmluZ19zdHJlYW0gKnN0cmVhbSk7CisKK2ludCBzdHJpbmdf
c3RyZWFtX2Rlc3Ryb3koc3RydWN0IHN0cmluZ19zdHJlYW0gKnN0cmVhbSk7CisKKyNlbmRpZiAv
KiBfS1VOSVRfU1RSSU5HX1NUUkVBTV9IICovCmRpZmYgLS1naXQgYS9rdW5pdC9NYWtlZmlsZSBi
L2t1bml0L01ha2VmaWxlCmluZGV4IDVlZmRjNGRlYTJjMC4uMjc1YjU2NWEwZTgxIDEwMDY0NAot
LS0gYS9rdW5pdC9NYWtlZmlsZQorKysgYi9rdW5pdC9NYWtlZmlsZQpAQCAtMSArMSwyIEBACi1v
YmotJChDT05GSUdfS1VOSVQpICs9CQkJdGVzdC5vCitvYmotJChDT05GSUdfS1VOSVQpICs9CQkJ
dGVzdC5vIFwKKwkJCQkJc3RyaW5nLXN0cmVhbS5vCmRpZmYgLS1naXQgYS9rdW5pdC9zdHJpbmct
c3RyZWFtLmMgYi9rdW5pdC9zdHJpbmctc3RyZWFtLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5k
ZXggMDAwMDAwMDAwMDAwLi5lNmQxN2FhY2NhMzAKLS0tIC9kZXYvbnVsbAorKysgYi9rdW5pdC9z
dHJpbmctc3RyZWFtLmMKQEAgLTAsMCArMSwyMTcgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlm
aWVyOiBHUEwtMi4wCisvKgorICogQysrIHN0cmVhbSBzdHlsZSBzdHJpbmcgYnVpbGRlciB1c2Vk
IGluIEtVbml0IGZvciBidWlsZGluZyBtZXNzYWdlcy4KKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIw
MTksIEdvb2dsZSBMTEMuCisgKiBBdXRob3I6IEJyZW5kYW4gSGlnZ2lucyA8YnJlbmRhbmhpZ2dp
bnNAZ29vZ2xlLmNvbT4KKyAqLworCisjaW5jbHVkZSA8a3VuaXQvc3RyaW5nLXN0cmVhbS5oPgor
I2luY2x1ZGUgPGt1bml0L3Rlc3QuaD4KKyNpbmNsdWRlIDxsaW51eC9saXN0Lmg+CisjaW5jbHVk
ZSA8bGludXgvc2xhYi5oPgorCitzdHJ1Y3Qgc3RyaW5nX3N0cmVhbV9mcmFnbWVudF9hbGxvY19j
b250ZXh0IHsKKwlzdHJ1Y3Qga3VuaXQgKnRlc3Q7CisJaW50IGxlbjsKKwlnZnBfdCBnZnA7Cit9
OworCitzdGF0aWMgaW50IHN0cmluZ19zdHJlYW1fZnJhZ21lbnRfaW5pdChzdHJ1Y3Qga3VuaXRf
cmVzb3VyY2UgKnJlcywKKwkJCQkgICAgICAgdm9pZCAqY29udGV4dCkKK3sKKwlzdHJ1Y3Qgc3Ry
aW5nX3N0cmVhbV9mcmFnbWVudF9hbGxvY19jb250ZXh0ICpjdHggPSBjb250ZXh0OworCXN0cnVj
dCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnOworCisJZnJhZyA9IGt1bml0X2t6YWxsb2Mo
Y3R4LT50ZXN0LCBzaXplb2YoKmZyYWcpLCBjdHgtPmdmcCk7CisJaWYgKCFmcmFnKQorCQlyZXR1
cm4gLUVOT01FTTsKKworCWZyYWctPnRlc3QgPSBjdHgtPnRlc3Q7CisJZnJhZy0+ZnJhZ21lbnQg
PSBrdW5pdF9rbWFsbG9jKGN0eC0+dGVzdCwgY3R4LT5sZW4sIGN0eC0+Z2ZwKTsKKwlpZiAoIWZy
YWctPmZyYWdtZW50KQorCQlyZXR1cm4gLUVOT01FTTsKKworCXJlcy0+YWxsb2NhdGlvbiA9IGZy
YWc7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgc3RyaW5nX3N0cmVhbV9mcmFnbWVu
dF9mcmVlKHN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzKQoreworCXN0cnVjdCBzdHJpbmdfc3Ry
ZWFtX2ZyYWdtZW50ICpmcmFnID0gcmVzLT5hbGxvY2F0aW9uOworCisJbGlzdF9kZWwoJmZyYWct
Pm5vZGUpOworCWt1bml0X2tmcmVlKGZyYWctPnRlc3QsIGZyYWctPmZyYWdtZW50KTsKKwlrdW5p
dF9rZnJlZShmcmFnLT50ZXN0LCBmcmFnKTsKK30KKworc3RhdGljIHN0cnVjdCBzdHJpbmdfc3Ry
ZWFtX2ZyYWdtZW50ICphbGxvY19zdHJpbmdfc3RyZWFtX2ZyYWdtZW50KAorCQlzdHJ1Y3Qga3Vu
aXQgKnRlc3QsIGludCBsZW4sIGdmcF90IGdmcCkKK3sKKwlzdHJ1Y3Qgc3RyaW5nX3N0cmVhbV9m
cmFnbWVudF9hbGxvY19jb250ZXh0IGNvbnRleHQgPSB7CisJCS50ZXN0ID0gdGVzdCwKKwkJLmxl
biA9IGxlbiwKKwkJLmdmcCA9IGdmcAorCX07CisKKwlyZXR1cm4ga3VuaXRfYWxsb2NfcmVzb3Vy
Y2UodGVzdCwKKwkJCQkgICAgc3RyaW5nX3N0cmVhbV9mcmFnbWVudF9pbml0LAorCQkJCSAgICBz
dHJpbmdfc3RyZWFtX2ZyYWdtZW50X2ZyZWUsCisJCQkJICAgIGdmcCwKKwkJCQkgICAgJmNvbnRl
eHQpOworfQorCitzdGF0aWMgaW50IHN0cmluZ19zdHJlYW1fZnJhZ21lbnRfZGVzdHJveShzdHJ1
Y3Qgc3RyaW5nX3N0cmVhbV9mcmFnbWVudCAqZnJhZykKK3sKKwlyZXR1cm4ga3VuaXRfcmVzb3Vy
Y2VfZGVzdHJveShmcmFnLT50ZXN0LAorCQkJCSAgICAgIGt1bml0X3Jlc291cmNlX2luc3RhbmNl
X21hdGNoLAorCQkJCSAgICAgIHN0cmluZ19zdHJlYW1fZnJhZ21lbnRfZnJlZSwKKwkJCQkgICAg
ICBmcmFnKTsKK30KKworaW50IHN0cmluZ19zdHJlYW1fdmFkZChzdHJ1Y3Qgc3RyaW5nX3N0cmVh
bSAqc3RyZWFtLAorCQkgICAgICAgY29uc3QgY2hhciAqZm10LAorCQkgICAgICAgdmFfbGlzdCBh
cmdzKQoreworCXN0cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnX2NvbnRhaW5lcjsK
KwlpbnQgbGVuOworCXZhX2xpc3QgYXJnc19mb3JfY291bnRpbmc7CisKKwkvKiBNYWtlIGEgY29w
eSBiZWNhdXNlIGB2c25wcmludGZgIGNvdWxkIGNoYW5nZSBpdCAqLworCXZhX2NvcHkoYXJnc19m
b3JfY291bnRpbmcsIGFyZ3MpOworCisJLyogTmVlZCBzcGFjZSBmb3IgbnVsbCBieXRlLiAqLwor
CWxlbiA9IHZzbnByaW50ZihOVUxMLCAwLCBmbXQsIGFyZ3NfZm9yX2NvdW50aW5nKSArIDE7CisK
Kwl2YV9lbmQoYXJnc19mb3JfY291bnRpbmcpOworCisJZnJhZ19jb250YWluZXIgPSBhbGxvY19z
dHJpbmdfc3RyZWFtX2ZyYWdtZW50KHN0cmVhbS0+dGVzdCwKKwkJCQkJCSAgICAgIGxlbiwKKwkJ
CQkJCSAgICAgIHN0cmVhbS0+Z2ZwKTsKKwlpZiAoIWZyYWdfY29udGFpbmVyKQorCQlyZXR1cm4g
LUVOT01FTTsKKworCWxlbiA9IHZzbnByaW50ZihmcmFnX2NvbnRhaW5lci0+ZnJhZ21lbnQsIGxl
biwgZm10LCBhcmdzKTsKKwlzcGluX2xvY2soJnN0cmVhbS0+bG9jayk7CisJc3RyZWFtLT5sZW5n
dGggKz0gbGVuOworCWxpc3RfYWRkX3RhaWwoJmZyYWdfY29udGFpbmVyLT5ub2RlLCAmc3RyZWFt
LT5mcmFnbWVudHMpOworCXNwaW5fdW5sb2NrKCZzdHJlYW0tPmxvY2spOworCisJcmV0dXJuIDA7
Cit9CisKK2ludCBzdHJpbmdfc3RyZWFtX2FkZChzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFt
LCBjb25zdCBjaGFyICpmbXQsIC4uLikKK3sKKwl2YV9saXN0IGFyZ3M7CisJaW50IHJlc3VsdDsK
KworCXZhX3N0YXJ0KGFyZ3MsIGZtdCk7CisJcmVzdWx0ID0gc3RyaW5nX3N0cmVhbV92YWRkKHN0
cmVhbSwgZm10LCBhcmdzKTsKKwl2YV9lbmQoYXJncyk7CisKKwlyZXR1cm4gcmVzdWx0OworfQor
CitzdGF0aWMgdm9pZCBzdHJpbmdfc3RyZWFtX2NsZWFyKHN0cnVjdCBzdHJpbmdfc3RyZWFtICpz
dHJlYW0pCit7CisJc3RydWN0IHN0cmluZ19zdHJlYW1fZnJhZ21lbnQgKmZyYWdfY29udGFpbmVy
LCAqZnJhZ19jb250YWluZXJfc2FmZTsKKworCXNwaW5fbG9jaygmc3RyZWFtLT5sb2NrKTsKKwls
aXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUoZnJhZ19jb250YWluZXIsCisJCQkJIGZyYWdfY29udGFp
bmVyX3NhZmUsCisJCQkJICZzdHJlYW0tPmZyYWdtZW50cywKKwkJCQkgbm9kZSkgeworCQlzdHJp
bmdfc3RyZWFtX2ZyYWdtZW50X2Rlc3Ryb3koZnJhZ19jb250YWluZXIpOworCX0KKwlzdHJlYW0t
Pmxlbmd0aCA9IDA7CisJc3Bpbl91bmxvY2soJnN0cmVhbS0+bG9jayk7Cit9CisKK2NoYXIgKnN0
cmluZ19zdHJlYW1fZ2V0X3N0cmluZyhzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtKQorewor
CXN0cnVjdCBzdHJpbmdfc3RyZWFtX2ZyYWdtZW50ICpmcmFnX2NvbnRhaW5lcjsKKwlzaXplX3Qg
YnVmX2xlbiA9IHN0cmVhbS0+bGVuZ3RoICsgMTsgLyogKzEgZm9yIG51bGwgYnl0ZS4gKi8KKwlj
aGFyICpidWY7CisKKwlidWYgPSBrdW5pdF9remFsbG9jKHN0cmVhbS0+dGVzdCwgYnVmX2xlbiwg
c3RyZWFtLT5nZnApOworCWlmICghYnVmKQorCQlyZXR1cm4gTlVMTDsKKworCXNwaW5fbG9jaygm
c3RyZWFtLT5sb2NrKTsKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5KGZyYWdfY29udGFpbmVyLCAmc3Ry
ZWFtLT5mcmFnbWVudHMsIG5vZGUpCisJCXN0cmxjYXQoYnVmLCBmcmFnX2NvbnRhaW5lci0+ZnJh
Z21lbnQsIGJ1Zl9sZW4pOworCXNwaW5fdW5sb2NrKCZzdHJlYW0tPmxvY2spOworCisJcmV0dXJu
IGJ1ZjsKK30KKworaW50IHN0cmluZ19zdHJlYW1fYXBwZW5kKHN0cnVjdCBzdHJpbmdfc3RyZWFt
ICpzdHJlYW0sCisJCQkgc3RydWN0IHN0cmluZ19zdHJlYW0gKm90aGVyKQoreworCWNvbnN0IGNo
YXIgKm90aGVyX2NvbnRlbnQ7CisKKwlvdGhlcl9jb250ZW50ID0gc3RyaW5nX3N0cmVhbV9nZXRf
c3RyaW5nKG90aGVyKTsKKworCWlmICghb3RoZXJfY29udGVudCkKKwkJcmV0dXJuIC1FTk9NRU07
CisKKwlyZXR1cm4gc3RyaW5nX3N0cmVhbV9hZGQoc3RyZWFtLCBvdGhlcl9jb250ZW50KTsKK30K
KworYm9vbCBzdHJpbmdfc3RyZWFtX2lzX2VtcHR5KHN0cnVjdCBzdHJpbmdfc3RyZWFtICpzdHJl
YW0pCit7CisJcmV0dXJuIGxpc3RfZW1wdHkoJnN0cmVhbS0+ZnJhZ21lbnRzKTsKK30KKworc3Ry
dWN0IHN0cmluZ19zdHJlYW1fYWxsb2NfY29udGV4dCB7CisJc3RydWN0IGt1bml0ICp0ZXN0Owor
CWdmcF90IGdmcDsKK307CisKK3N0YXRpYyBpbnQgc3RyaW5nX3N0cmVhbV9pbml0KHN0cnVjdCBr
dW5pdF9yZXNvdXJjZSAqcmVzLCB2b2lkICpjb250ZXh0KQoreworCXN0cnVjdCBzdHJpbmdfc3Ry
ZWFtICpzdHJlYW07CisJc3RydWN0IHN0cmluZ19zdHJlYW1fYWxsb2NfY29udGV4dCAqY3R4ID0g
Y29udGV4dDsKKworCXN0cmVhbSA9IGt1bml0X2t6YWxsb2MoY3R4LT50ZXN0LCBzaXplb2YoKnN0
cmVhbSksIGN0eC0+Z2ZwKTsKKwlpZiAoIXN0cmVhbSkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwly
ZXMtPmFsbG9jYXRpb24gPSBzdHJlYW07CisJc3RyZWFtLT5nZnAgPSBjdHgtPmdmcDsKKwlzdHJl
YW0tPnRlc3QgPSBjdHgtPnRlc3Q7CisJSU5JVF9MSVNUX0hFQUQoJnN0cmVhbS0+ZnJhZ21lbnRz
KTsKKwlzcGluX2xvY2tfaW5pdCgmc3RyZWFtLT5sb2NrKTsKKworCXJldHVybiAwOworfQorCitz
dGF0aWMgdm9pZCBzdHJpbmdfc3RyZWFtX2ZyZWUoc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMp
Cit7CisJc3RydWN0IHN0cmluZ19zdHJlYW0gKnN0cmVhbSA9IHJlcy0+YWxsb2NhdGlvbjsKKwor
CXN0cmluZ19zdHJlYW1fY2xlYXIoc3RyZWFtKTsKK30KKworc3RydWN0IHN0cmluZ19zdHJlYW0g
KmFsbG9jX3N0cmluZ19zdHJlYW0oc3RydWN0IGt1bml0ICp0ZXN0LCBnZnBfdCBnZnApCit7CisJ
c3RydWN0IHN0cmluZ19zdHJlYW1fYWxsb2NfY29udGV4dCBjb250ZXh0ID0geworCQkudGVzdCA9
IHRlc3QsCisJCS5nZnAgPSBnZnAKKwl9OworCisJcmV0dXJuIGt1bml0X2FsbG9jX3Jlc291cmNl
KHRlc3QsCisJCQkJICAgIHN0cmluZ19zdHJlYW1faW5pdCwKKwkJCQkgICAgc3RyaW5nX3N0cmVh
bV9mcmVlLAorCQkJCSAgICBnZnAsCisJCQkJICAgICZjb250ZXh0KTsKK30KKworaW50IHN0cmlu
Z19zdHJlYW1fZGVzdHJveShzdHJ1Y3Qgc3RyaW5nX3N0cmVhbSAqc3RyZWFtKQoreworCXJldHVy
biBrdW5pdF9yZXNvdXJjZV9kZXN0cm95KHN0cmVhbS0+dGVzdCwKKwkJCQkgICAgICBrdW5pdF9y
ZXNvdXJjZV9pbnN0YW5jZV9tYXRjaCwKKwkJCQkgICAgICBzdHJpbmdfc3RyZWFtX2ZyZWUsCisJ
CQkJICAgICAgc3RyZWFtKTsKK30KLS0gCjIuMjMuMC4xODcuZzE3ZjViNzU1NmMtZ29vZwoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1h
aWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
