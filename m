Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 400422A9F74
	for <lists+dri-devel@lfdr.de>; Fri,  6 Nov 2020 22:50:31 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 40E176EB39;
	Fri,  6 Nov 2020 21:50:20 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x444.google.com (mail-wr1-x444.google.com
 [IPv6:2a00:1450:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 116C96EB2F
 for <dri-devel@lists.freedesktop.org>; Fri,  6 Nov 2020 21:50:15 +0000 (UTC)
Received: by mail-wr1-x444.google.com with SMTP id w14so2774101wrs.9
 for <dri-devel@lists.freedesktop.org>; Fri, 06 Nov 2020 13:50:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=5L5j9WeVf4OsGrOI+zWyqNE90Jqm8OHoY/X5eer+uIE=;
 b=IOrFk0Bum8NpeO7vrbdT+XF4GBjyGBJirBDhxAK8aUBIKAcElcG4GD3NpjReOmFrTO
 LNLQT1Bp/et1mAqsqqvJwrYOwSCeu4qCr+4EFsp6WHjxr7qmDknJ+/AjCk13hiavhUqk
 UpiKHCRBbIv0f1XbNH35v08ckSZ5oFOCE93dTd66rbwUvPbqlyosD3vsT6AYCa/U9M+T
 87TTsY///sjDCxef1KSDqVk0xLrjDQmwAJ4i3URwNA8yg7RZL0mhIRV3C+lYwA8zQ0E2
 G3uwwRMXnGQ64wRyv1KqN+Y3EHHytDdE5YbYb0blE7CeA+XR9uD2xGk8ovxdFFN/d4/m
 RTNw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=5L5j9WeVf4OsGrOI+zWyqNE90Jqm8OHoY/X5eer+uIE=;
 b=W8qyO3ht1sx3sTGHAQrq3YsvBvgZlbF99kFPQUVtFB29j1T1+rm71IAjxje97zVlUm
 Hft0wy9LIhvbWDQoNJbz2PKHLg5uy+LbnRG1/WEeyODpkBplD9rmQqQUzNkEY3/XQ0uO
 EQ8K07xKOvfMj+PVJsB6IQWG9DaJLocKurUa0fFcbAOP2KYjvJWqREx+/dYRn9QsXupL
 hFBwD3tn6pQyoAuib4Wlo3gorrPRMElmERX141VYx9cvnKS8eU/bOA+LntUZikXlRvER
 r7G/3unYH1cmKh0/6JfL3modLDSA6WB/qAJeHTUNV9tny7TEAEkRyE+2uhTpXekhL66S
 nNpw==
X-Gm-Message-State: AOAM533oKtMZkvECLHE/VLWvddDagqCkcPm3RpUavOtGvbgduU2SEkVm
 ElgnnnLRV/5dEkFOWa+uOq0qkw==
X-Google-Smtp-Source: ABdhPJxjy3CwhAzixHBwYh/xNEBVJ6Ej4P7uEr5YDA2+aR0KybxhQjhHm8g5KDuddWQScZEwMDoJug==
X-Received: by 2002:a5d:660e:: with SMTP id n14mr4522258wru.94.1604699413709; 
 Fri, 06 Nov 2020 13:50:13 -0800 (PST)
Received: from dell.default ([91.110.221.236])
 by smtp.gmail.com with ESMTPSA id t199sm3981084wmt.46.2020.11.06.13.50.12
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 06 Nov 2020 13:50:13 -0800 (PST)
From: Lee Jones <lee.jones@linaro.org>
To: lee.jones@linaro.org
Subject: [PATCH 16/19] drm/amd/amdgpu/amdgpu_kms: Remove 'struct
 drm_amdgpu_info_device dev_info' from the stack
Date: Fri,  6 Nov 2020 21:49:46 +0000
Message-Id: <20201106214949.2042120-17-lee.jones@linaro.org>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20201106214949.2042120-1-lee.jones@linaro.org>
References: <20201106214949.2042120-1-lee.jones@linaro.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, linux-kernel@vger.kernel.org,
 amd-gfx@lists.freedesktop.org, dri-devel@lists.freedesktop.org,
 Alex Deucher <alexander.deucher@amd.com>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UGxhY2UgaXQgb24gdGhlIGhlYXAgaW5zdGVhZC4KCkZpeGVzIHRoZSBmb2xsb3dpbmcgVz0xIGtl
cm5lbCBidWlsZCB3YXJuaW5nKHMpOgoKIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9rbXMuYzogSW4gZnVuY3Rpb24g4oCYYW1kZ3B1X2luZm9faW9jdGzigJk6CiBkcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfa21zLmM6OTc5OjE6IHdhcm5pbmc6IHRoZSBmcmFtZSBz
aXplIG9mIDExMjggYnl0ZXMgaXMgbGFyZ2VyIHRoYW4gMTAyNCBieXRlcyBbLVdmcmFtZS1sYXJn
ZXItdGhhbj1dCgpDYzogQWxleCBEZXVjaGVyIDxhbGV4YW5kZXIuZGV1Y2hlckBhbWQuY29tPgpD
YzogIkNocmlzdGlhbiBLw7ZuaWciIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+CkNjOiBEYXZp
ZCBBaXJsaWUgPGFpcmxpZWRAbGludXguaWU+CkNjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWxAZmZ3
bGwuY2g+CkNjOiBhbWQtZ2Z4QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpDYzogZHJpLWRldmVsQGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpTaWduZWQtb2ZmLWJ5OiBMZWUgSm9uZXMgPGxlZS5qb25lc0Bs
aW5hcm8ub3JnPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9rbXMuYyB8
IDEwNCArKysrKysrKysrKysrLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA1NSBpbnNlcnRp
b25zKCspLCA0OSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfa21zLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
a21zLmMKaW5kZXggOTE4ZDRlOWM2NDYxYS4uZWY2ZmE1MDA3ZDEzNSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ttcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9rbXMuYwpAQCAtNzIxLDM4ICs3MjEsNDIgQEAgc3RhdGljIGlu
dCBhbWRncHVfaW5mb19pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLCBz
dHJ1Y3QgZHJtX2ZpbGUKIAkJcmV0dXJuIG4gPyAtRUZBVUxUIDogMDsKIAl9CiAJY2FzZSBBTURH
UFVfSU5GT19ERVZfSU5GTzogewotCQlzdHJ1Y3QgZHJtX2FtZGdwdV9pbmZvX2RldmljZSBkZXZf
aW5mbzsKKwkJc3RydWN0IGRybV9hbWRncHVfaW5mb19kZXZpY2UgKmRldl9pbmZvOwogCQl1aW50
NjRfdCB2bV9zaXplOworCQlpbnQgcmV0OworCisJCWRldl9pbmZvID0ga3phbGxvYyhzaXplb2Yo
KmRldl9pbmZvKSwgR0ZQX0tFUk5FTCk7CisJCWlmICghZGV2X2luZm8pCisJCQlyZXR1cm4gLUVO
T01FTTsKIAotCQltZW1zZXQoJmRldl9pbmZvLCAwLCBzaXplb2YoZGV2X2luZm8pKTsKLQkJZGV2
X2luZm8uZGV2aWNlX2lkID0gZGV2LT5wZGV2LT5kZXZpY2U7Ci0JCWRldl9pbmZvLmNoaXBfcmV2
ID0gYWRldi0+cmV2X2lkOwotCQlkZXZfaW5mby5leHRlcm5hbF9yZXYgPSBhZGV2LT5leHRlcm5h
bF9yZXZfaWQ7Ci0JCWRldl9pbmZvLnBjaV9yZXYgPSBkZXYtPnBkZXYtPnJldmlzaW9uOwotCQlk
ZXZfaW5mby5mYW1pbHkgPSBhZGV2LT5mYW1pbHk7Ci0JCWRldl9pbmZvLm51bV9zaGFkZXJfZW5n
aW5lcyA9IGFkZXYtPmdmeC5jb25maWcubWF4X3NoYWRlcl9lbmdpbmVzOwotCQlkZXZfaW5mby5u
dW1fc2hhZGVyX2FycmF5c19wZXJfZW5naW5lID0gYWRldi0+Z2Z4LmNvbmZpZy5tYXhfc2hfcGVy
X3NlOworCQlkZXZfaW5mby0+ZGV2aWNlX2lkID0gZGV2LT5wZGV2LT5kZXZpY2U7CisJCWRldl9p
bmZvLT5jaGlwX3JldiA9IGFkZXYtPnJldl9pZDsKKwkJZGV2X2luZm8tPmV4dGVybmFsX3JldiA9
IGFkZXYtPmV4dGVybmFsX3Jldl9pZDsKKwkJZGV2X2luZm8tPnBjaV9yZXYgPSBkZXYtPnBkZXYt
PnJldmlzaW9uOworCQlkZXZfaW5mby0+ZmFtaWx5ID0gYWRldi0+ZmFtaWx5OworCQlkZXZfaW5m
by0+bnVtX3NoYWRlcl9lbmdpbmVzID0gYWRldi0+Z2Z4LmNvbmZpZy5tYXhfc2hhZGVyX2VuZ2lu
ZXM7CisJCWRldl9pbmZvLT5udW1fc2hhZGVyX2FycmF5c19wZXJfZW5naW5lID0gYWRldi0+Z2Z4
LmNvbmZpZy5tYXhfc2hfcGVyX3NlOwogCQkvKiByZXR1cm4gYWxsIGNsb2NrcyBpbiBLSHogKi8K
LQkJZGV2X2luZm8uZ3B1X2NvdW50ZXJfZnJlcSA9IGFtZGdwdV9hc2ljX2dldF94Y2xrKGFkZXYp
ICogMTA7CisJCWRldl9pbmZvLT5ncHVfY291bnRlcl9mcmVxID0gYW1kZ3B1X2FzaWNfZ2V0X3hj
bGsoYWRldikgKiAxMDsKIAkJaWYgKGFkZXYtPnBtLmRwbV9lbmFibGVkKSB7Ci0JCQlkZXZfaW5m
by5tYXhfZW5naW5lX2Nsb2NrID0gYW1kZ3B1X2RwbV9nZXRfc2NsayhhZGV2LCBmYWxzZSkgKiAx
MDsKLQkJCWRldl9pbmZvLm1heF9tZW1vcnlfY2xvY2sgPSBhbWRncHVfZHBtX2dldF9tY2xrKGFk
ZXYsIGZhbHNlKSAqIDEwOworCQkJZGV2X2luZm8tPm1heF9lbmdpbmVfY2xvY2sgPSBhbWRncHVf
ZHBtX2dldF9zY2xrKGFkZXYsIGZhbHNlKSAqIDEwOworCQkJZGV2X2luZm8tPm1heF9tZW1vcnlf
Y2xvY2sgPSBhbWRncHVfZHBtX2dldF9tY2xrKGFkZXYsIGZhbHNlKSAqIDEwOwogCQl9IGVsc2Ug
ewotCQkJZGV2X2luZm8ubWF4X2VuZ2luZV9jbG9jayA9IGFkZXYtPmNsb2NrLmRlZmF1bHRfc2Ns
ayAqIDEwOwotCQkJZGV2X2luZm8ubWF4X21lbW9yeV9jbG9jayA9IGFkZXYtPmNsb2NrLmRlZmF1
bHRfbWNsayAqIDEwOworCQkJZGV2X2luZm8tPm1heF9lbmdpbmVfY2xvY2sgPSBhZGV2LT5jbG9j
ay5kZWZhdWx0X3NjbGsgKiAxMDsKKwkJCWRldl9pbmZvLT5tYXhfbWVtb3J5X2Nsb2NrID0gYWRl
di0+Y2xvY2suZGVmYXVsdF9tY2xrICogMTA7CiAJCX0KLQkJZGV2X2luZm8uZW5hYmxlZF9yYl9w
aXBlc19tYXNrID0gYWRldi0+Z2Z4LmNvbmZpZy5iYWNrZW5kX2VuYWJsZV9tYXNrOwotCQlkZXZf
aW5mby5udW1fcmJfcGlwZXMgPSBhZGV2LT5nZnguY29uZmlnLm1heF9iYWNrZW5kc19wZXJfc2Ug
KgorCQlkZXZfaW5mby0+ZW5hYmxlZF9yYl9waXBlc19tYXNrID0gYWRldi0+Z2Z4LmNvbmZpZy5i
YWNrZW5kX2VuYWJsZV9tYXNrOworCQlkZXZfaW5mby0+bnVtX3JiX3BpcGVzID0gYWRldi0+Z2Z4
LmNvbmZpZy5tYXhfYmFja2VuZHNfcGVyX3NlICoKIAkJCWFkZXYtPmdmeC5jb25maWcubWF4X3No
YWRlcl9lbmdpbmVzOwotCQlkZXZfaW5mby5udW1faHdfZ2Z4X2NvbnRleHRzID0gYWRldi0+Z2Z4
LmNvbmZpZy5tYXhfaHdfY29udGV4dHM7Ci0JCWRldl9pbmZvLl9wYWQgPSAwOwotCQlkZXZfaW5m
by5pZHNfZmxhZ3MgPSAwOworCQlkZXZfaW5mby0+bnVtX2h3X2dmeF9jb250ZXh0cyA9IGFkZXYt
PmdmeC5jb25maWcubWF4X2h3X2NvbnRleHRzOworCQlkZXZfaW5mby0+X3BhZCA9IDA7CisJCWRl
dl9pbmZvLT5pZHNfZmxhZ3MgPSAwOwogCQlpZiAoYWRldi0+ZmxhZ3MgJiBBTURfSVNfQVBVKQot
CQkJZGV2X2luZm8uaWRzX2ZsYWdzIHw9IEFNREdQVV9JRFNfRkxBR1NfRlVTSU9OOworCQkJZGV2
X2luZm8tPmlkc19mbGFncyB8PSBBTURHUFVfSURTX0ZMQUdTX0ZVU0lPTjsKIAkJaWYgKGFtZGdw
dV9tY2JwIHx8IGFtZGdwdV9zcmlvdl92ZihhZGV2KSkKLQkJCWRldl9pbmZvLmlkc19mbGFncyB8
PSBBTURHUFVfSURTX0ZMQUdTX1BSRUVNUFRJT047CisJCQlkZXZfaW5mby0+aWRzX2ZsYWdzIHw9
IEFNREdQVV9JRFNfRkxBR1NfUFJFRU1QVElPTjsKIAkJaWYgKGFtZGdwdV9pc190bXooYWRldikp
Ci0JCQlkZXZfaW5mby5pZHNfZmxhZ3MgfD0gQU1ER1BVX0lEU19GTEFHU19UTVo7CisJCQlkZXZf
aW5mby0+aWRzX2ZsYWdzIHw9IEFNREdQVV9JRFNfRkxBR1NfVE1aOwogCiAJCXZtX3NpemUgPSBh
ZGV2LT52bV9tYW5hZ2VyLm1heF9wZm4gKiBBTURHUFVfR1BVX1BBR0VfU0laRTsKIAkJdm1fc2l6
ZSAtPSBBTURHUFVfVkFfUkVTRVJWRURfU0laRTsKQEAgLTc2Miw0NSArNzY2LDQ3IEBAIHN0YXRp
YyBpbnQgYW1kZ3B1X2luZm9faW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0
YSwgc3RydWN0IGRybV9maWxlCiAJCSAgICBhZGV2LT52Y2UuZndfdmVyc2lvbiA8IEFNREdQVV9W
Q0VfRldfNTNfNDUpCiAJCQl2bV9zaXplID0gbWluKHZtX3NpemUsIDFVTEwgPDwgNDApOwogCi0J
CWRldl9pbmZvLnZpcnR1YWxfYWRkcmVzc19vZmZzZXQgPSBBTURHUFVfVkFfUkVTRVJWRURfU0la
RTsKLQkJZGV2X2luZm8udmlydHVhbF9hZGRyZXNzX21heCA9CisJCWRldl9pbmZvLT52aXJ0dWFs
X2FkZHJlc3Nfb2Zmc2V0ID0gQU1ER1BVX1ZBX1JFU0VSVkVEX1NJWkU7CisJCWRldl9pbmZvLT52
aXJ0dWFsX2FkZHJlc3NfbWF4ID0KIAkJCW1pbih2bV9zaXplLCBBTURHUFVfR01DX0hPTEVfU1RB
UlQpOwogCiAJCWlmICh2bV9zaXplID4gQU1ER1BVX0dNQ19IT0xFX1NUQVJUKSB7Ci0JCQlkZXZf
aW5mby5oaWdoX3ZhX29mZnNldCA9IEFNREdQVV9HTUNfSE9MRV9FTkQ7Ci0JCQlkZXZfaW5mby5o
aWdoX3ZhX21heCA9IEFNREdQVV9HTUNfSE9MRV9FTkQgfCB2bV9zaXplOworCQkJZGV2X2luZm8t
PmhpZ2hfdmFfb2Zmc2V0ID0gQU1ER1BVX0dNQ19IT0xFX0VORDsKKwkJCWRldl9pbmZvLT5oaWdo
X3ZhX21heCA9IEFNREdQVV9HTUNfSE9MRV9FTkQgfCB2bV9zaXplOwogCQl9Ci0JCWRldl9pbmZv
LnZpcnR1YWxfYWRkcmVzc19hbGlnbm1lbnQgPSBtYXgoKGludClQQUdFX1NJWkUsIEFNREdQVV9H
UFVfUEFHRV9TSVpFKTsKLQkJZGV2X2luZm8ucHRlX2ZyYWdtZW50X3NpemUgPSAoMSA8PCBhZGV2
LT52bV9tYW5hZ2VyLmZyYWdtZW50X3NpemUpICogQU1ER1BVX0dQVV9QQUdFX1NJWkU7Ci0JCWRl
dl9pbmZvLmdhcnRfcGFnZV9zaXplID0gQU1ER1BVX0dQVV9QQUdFX1NJWkU7Ci0JCWRldl9pbmZv
LmN1X2FjdGl2ZV9udW1iZXIgPSBhZGV2LT5nZnguY3VfaW5mby5udW1iZXI7Ci0JCWRldl9pbmZv
LmN1X2FvX21hc2sgPSBhZGV2LT5nZnguY3VfaW5mby5hb19jdV9tYXNrOwotCQlkZXZfaW5mby5j
ZV9yYW1fc2l6ZSA9IGFkZXYtPmdmeC5jZV9yYW1fc2l6ZTsKLQkJbWVtY3B5KCZkZXZfaW5mby5j
dV9hb19iaXRtYXBbMF0sICZhZGV2LT5nZnguY3VfaW5mby5hb19jdV9iaXRtYXBbMF0sCisJCWRl
dl9pbmZvLT52aXJ0dWFsX2FkZHJlc3NfYWxpZ25tZW50ID0gbWF4KChpbnQpUEFHRV9TSVpFLCBB
TURHUFVfR1BVX1BBR0VfU0laRSk7CisJCWRldl9pbmZvLT5wdGVfZnJhZ21lbnRfc2l6ZSA9ICgx
IDw8IGFkZXYtPnZtX21hbmFnZXIuZnJhZ21lbnRfc2l6ZSkgKiBBTURHUFVfR1BVX1BBR0VfU0la
RTsKKwkJZGV2X2luZm8tPmdhcnRfcGFnZV9zaXplID0gQU1ER1BVX0dQVV9QQUdFX1NJWkU7CisJ
CWRldl9pbmZvLT5jdV9hY3RpdmVfbnVtYmVyID0gYWRldi0+Z2Z4LmN1X2luZm8ubnVtYmVyOwor
CQlkZXZfaW5mby0+Y3VfYW9fbWFzayA9IGFkZXYtPmdmeC5jdV9pbmZvLmFvX2N1X21hc2s7CisJ
CWRldl9pbmZvLT5jZV9yYW1fc2l6ZSA9IGFkZXYtPmdmeC5jZV9yYW1fc2l6ZTsKKwkJbWVtY3B5
KCZkZXZfaW5mby0+Y3VfYW9fYml0bWFwWzBdLCAmYWRldi0+Z2Z4LmN1X2luZm8uYW9fY3VfYml0
bWFwWzBdLAogCQkgICAgICAgc2l6ZW9mKGFkZXYtPmdmeC5jdV9pbmZvLmFvX2N1X2JpdG1hcCkp
OwotCQltZW1jcHkoJmRldl9pbmZvLmN1X2JpdG1hcFswXSwgJmFkZXYtPmdmeC5jdV9pbmZvLmJp
dG1hcFswXSwKKwkJbWVtY3B5KCZkZXZfaW5mby0+Y3VfYml0bWFwWzBdLCAmYWRldi0+Z2Z4LmN1
X2luZm8uYml0bWFwWzBdLAogCQkgICAgICAgc2l6ZW9mKGFkZXYtPmdmeC5jdV9pbmZvLmJpdG1h
cCkpOwotCQlkZXZfaW5mby52cmFtX3R5cGUgPSBhZGV2LT5nbWMudnJhbV90eXBlOwotCQlkZXZf
aW5mby52cmFtX2JpdF93aWR0aCA9IGFkZXYtPmdtYy52cmFtX3dpZHRoOwotCQlkZXZfaW5mby52
Y2VfaGFydmVzdF9jb25maWcgPSBhZGV2LT52Y2UuaGFydmVzdF9jb25maWc7Ci0JCWRldl9pbmZv
LmdjX2RvdWJsZV9vZmZjaGlwX2xkc19idWYgPQorCQlkZXZfaW5mby0+dnJhbV90eXBlID0gYWRl
di0+Z21jLnZyYW1fdHlwZTsKKwkJZGV2X2luZm8tPnZyYW1fYml0X3dpZHRoID0gYWRldi0+Z21j
LnZyYW1fd2lkdGg7CisJCWRldl9pbmZvLT52Y2VfaGFydmVzdF9jb25maWcgPSBhZGV2LT52Y2Uu
aGFydmVzdF9jb25maWc7CisJCWRldl9pbmZvLT5nY19kb3VibGVfb2ZmY2hpcF9sZHNfYnVmID0K
IAkJCWFkZXYtPmdmeC5jb25maWcuZG91YmxlX29mZmNoaXBfbGRzX2J1ZjsKLQkJZGV2X2luZm8u
d2F2ZV9mcm9udF9zaXplID0gYWRldi0+Z2Z4LmN1X2luZm8ud2F2ZV9mcm9udF9zaXplOwotCQlk
ZXZfaW5mby5udW1fc2hhZGVyX3Zpc2libGVfdmdwcnMgPSBhZGV2LT5nZnguY29uZmlnLm1heF9n
cHJzOwotCQlkZXZfaW5mby5udW1fY3VfcGVyX3NoID0gYWRldi0+Z2Z4LmNvbmZpZy5tYXhfY3Vf
cGVyX3NoOwotCQlkZXZfaW5mby5udW1fdGNjX2Jsb2NrcyA9IGFkZXYtPmdmeC5jb25maWcubWF4
X3RleHR1cmVfY2hhbm5lbF9jYWNoZXM7Ci0JCWRldl9pbmZvLmdzX3ZndF90YWJsZV9kZXB0aCA9
IGFkZXYtPmdmeC5jb25maWcuZ3Nfdmd0X3RhYmxlX2RlcHRoOwotCQlkZXZfaW5mby5nc19wcmlt
X2J1ZmZlcl9kZXB0aCA9IGFkZXYtPmdmeC5jb25maWcuZ3NfcHJpbV9idWZmZXJfZGVwdGg7Ci0J
CWRldl9pbmZvLm1heF9nc193YXZlc19wZXJfdmd0ID0gYWRldi0+Z2Z4LmNvbmZpZy5tYXhfZ3Nf
dGhyZWFkczsKKwkJZGV2X2luZm8tPndhdmVfZnJvbnRfc2l6ZSA9IGFkZXYtPmdmeC5jdV9pbmZv
LndhdmVfZnJvbnRfc2l6ZTsKKwkJZGV2X2luZm8tPm51bV9zaGFkZXJfdmlzaWJsZV92Z3BycyA9
IGFkZXYtPmdmeC5jb25maWcubWF4X2dwcnM7CisJCWRldl9pbmZvLT5udW1fY3VfcGVyX3NoID0g
YWRldi0+Z2Z4LmNvbmZpZy5tYXhfY3VfcGVyX3NoOworCQlkZXZfaW5mby0+bnVtX3RjY19ibG9j
a3MgPSBhZGV2LT5nZnguY29uZmlnLm1heF90ZXh0dXJlX2NoYW5uZWxfY2FjaGVzOworCQlkZXZf
aW5mby0+Z3Nfdmd0X3RhYmxlX2RlcHRoID0gYWRldi0+Z2Z4LmNvbmZpZy5nc192Z3RfdGFibGVf
ZGVwdGg7CisJCWRldl9pbmZvLT5nc19wcmltX2J1ZmZlcl9kZXB0aCA9IGFkZXYtPmdmeC5jb25m
aWcuZ3NfcHJpbV9idWZmZXJfZGVwdGg7CisJCWRldl9pbmZvLT5tYXhfZ3Nfd2F2ZXNfcGVyX3Zn
dCA9IGFkZXYtPmdmeC5jb25maWcubWF4X2dzX3RocmVhZHM7CiAKIAkJaWYgKGFkZXYtPmZhbWls
eSA+PSBBTURHUFVfRkFNSUxZX05WKQotCQkJZGV2X2luZm8ucGFfc2NfdGlsZV9zdGVlcmluZ19v
dmVycmlkZSA9CisJCQlkZXZfaW5mby0+cGFfc2NfdGlsZV9zdGVlcmluZ19vdmVycmlkZSA9CiAJ
CQkJYWRldi0+Z2Z4LmNvbmZpZy5wYV9zY190aWxlX3N0ZWVyaW5nX292ZXJyaWRlOwogCi0JCWRl
dl9pbmZvLnRjY19kaXNhYmxlZF9tYXNrID0gYWRldi0+Z2Z4LmNvbmZpZy50Y2NfZGlzYWJsZWRf
bWFzazsKKwkJZGV2X2luZm8tPnRjY19kaXNhYmxlZF9tYXNrID0gYWRldi0+Z2Z4LmNvbmZpZy50
Y2NfZGlzYWJsZWRfbWFzazsKIAotCQlyZXR1cm4gY29weV90b191c2VyKG91dCwgJmRldl9pbmZv
LAotCQkJCSAgICBtaW4oKHNpemVfdClzaXplLCBzaXplb2YoZGV2X2luZm8pKSkgPyAtRUZBVUxU
IDogMDsKKwkJcmV0ID0gY29weV90b191c2VyKG91dCwgZGV2X2luZm8sCisJCQkJICAgbWluKChz
aXplX3Qpc2l6ZSwgc2l6ZW9mKCpkZXZfaW5mbykpKSA/IC1FRkFVTFQgOiAwOworCQlrZnJlZShk
ZXZfaW5mbyk7CisJCXJldHVybiByZXQ7CiAJfQogCWNhc2UgQU1ER1BVX0lORk9fVkNFX0NMT0NL
X1RBQkxFOiB7CiAJCXVuc2lnbmVkIGk7Ci0tIAoyLjI1LjEKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
