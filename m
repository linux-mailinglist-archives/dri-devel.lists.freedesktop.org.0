Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1FD3F5748F
	for <lists+dri-devel@lfdr.de>; Thu, 27 Jun 2019 00:53:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EB1846E54E;
	Wed, 26 Jun 2019 22:53:04 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x443.google.com (mail-wr1-x443.google.com
 [IPv6:2a00:1450:4864:20::443])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 39E906E54E;
 Wed, 26 Jun 2019 22:53:03 +0000 (UTC)
Received: by mail-wr1-x443.google.com with SMTP id v14so189430wrr.4;
 Wed, 26 Jun 2019 15:53:03 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=SS2shp3mQopgi1vy4YYq3FubM30esVvxJIb8teQu3Zk=;
 b=E/xQ2LbJprOcwO0as3fIHodGYFA3TbIuOGoDpVVRQ9X2AwA+rSo8Bi4LpLpKcVGp1S
 w561FuWnCUoozlfq+YPH49A+m6w7jeHAdEsIt3/BT/pgVuHKvmadiMxz24SBUr8h9ZTN
 M6MSUdcnPvCysST/y0daT3SfODYnSf7kAh0D1txMG0BV1OUVCiLHIY8khUw9f7BOgmoE
 ogZ3meVwq0eQeUd8sriWfBIZrDbLd+J985HYuhmspHLuXq4FNnCrVJq6tl+LNKUqmCXR
 00ZCUwsVmRcRIgULssj2shuDl/C2CiCotxaaGvlJn9K1WcUL84sRqDx3H/OQC/DlPL8v
 sO0Q==
X-Gm-Message-State: APjAAAWxU2TmW12nfdC7QUWp7fmTa8tsCh8u1m6Pa7aKhoDO+bd0fxbu
 eEPbWT9QJr/n2ZANCxJK11NIY4LYAPsCYJFgDRk=
X-Google-Smtp-Source: APXvYqzhNDdsz2mnspVuK62GWYvNc0epl9L2hZk04XwfncoHq0gf+qjHj6R21tA/7ZjcieY3/FzLaQELUTyV9jbQHpU=
X-Received: by 2002:adf:e442:: with SMTP id t2mr154881wrm.286.1561589581691;
 Wed, 26 Jun 2019 15:53:01 -0700 (PDT)
MIME-Version: 1.0
References: <20190626150522.11618-1-Kenny.Ho@amd.com>
 <20190626150522.11618-12-Kenny.Ho@amd.com>
 <20190626164444.GX12905@phenom.ffwll.local>
In-Reply-To: <20190626164444.GX12905@phenom.ffwll.local>
From: Kenny Ho <y2kenny@gmail.com>
Date: Wed, 26 Jun 2019 18:52:50 -0400
Message-ID: <CAOWid-dr8eQfJiUWXMeD_O_jm0wmxSd9k0aSqD9kmTKNapk6Kw@mail.gmail.com>
Subject: Re: [RFC PATCH v3 11/11] drm,
 cgroup: Allow more aggressive memory reclaim
To: Daniel Vetter <daniel@ffwll.ch>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=SS2shp3mQopgi1vy4YYq3FubM30esVvxJIb8teQu3Zk=;
 b=BJ0lJtRKMVG4uL8G+16377TCWCoww9rPvBbv8kq15qH+lspE4KT63yQiTBc/9/r5Fl
 ghdpiNYwVOJz0cOCucI4re3QpEMFhRY62COUpme2HY9SN649/lgVcMwk8auSFwTI1zuS
 41m7c+eoFR6KBWtZO6HK2io4H0dDK8Z2UlELrQOXVgDhWr+xs4PPz7lJ5ZOKFHWQ2jKD
 hXWHZ4sqlMmH7Puj/tIOv4g+WbjOiERxG/1KzJGLqVKauKHlodmRsEj2UI2v8F2YZSZI
 vbjU1GlS86gA0sH7552dbGWdNme5YG+U/KUBEIETWJxYXal2YRwiN7IdeafCSzpG9GIL
 Q6IQ==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Kenny Ho <Kenny.Ho@amd.com>, jsparks@cray.com,
 amd-gfx list <amd-gfx@lists.freedesktop.org>, lkaplan@cray.com,
 Alex Deucher <alexander.deucher@amd.com>,
 dri-devel <dri-devel@lists.freedesktop.org>, joseph.greathouse@amd.com,
 Tejun Heo <tj@kernel.org>, cgroups@vger.kernel.org,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T2suICBJIGFtIG5vdCB0b28gZmFtaWxpYXIgd2l0aCBzaHJpbmtlciBidXQgSSB3aWxsIGRpZyBp
bnRvIGl0LiAgSnVzdApzbyB0aGF0IEkgYW0gbG9va2luZyBpbnRvIHRoZSByaWdodCB0aGluZ3Ms
IHlvdSBhcmUgcmVmZXJyaW5nIHRvCnRoaW5ncyBsaWtlIHN0cnVjdCBzaHJpbmtlciBhbmQgc3Ry
dWN0IHNocmlua19jb250cm9sPwoKUmVnYXJkcywKS2VubnkKCk9uIFdlZCwgSnVuIDI2LCAyMDE5
IGF0IDEyOjQ0IFBNIERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZndsbC5jaD4gd3JvdGU6Cj4KPiBP
biBXZWQsIEp1biAyNiwgMjAxOSBhdCAxMTowNToyMkFNIC0wNDAwLCBLZW5ueSBIbyB3cm90ZToK
PiA+IEFsbG93IERSTSBUVE0gbWVtb3J5IG1hbmFnZXIgdG8gcmVnaXN0ZXIgYSB3b3JrX3N0cnVj
dCwgc3VjaCB0aGF0LCB3aGVuCj4gPiBhIGRybWNncnAgaXMgdW5kZXIgbWVtb3J5IHByZXNzdXJl
LCBtZW1vcnkgcmVjbGFpbWluZyBjYW4gYmUgdHJpZ2dlcmVkCj4gPiBpbW1lZGlhdGVseS4KPiA+
Cj4gPiBDaGFuZ2UtSWQ6IEkyNWFjMDRlMmRiOWMxOWZmMTI2NTJiODhlYmZmMThiNDRiMjcwNmQ4
Cj4gPiBTaWduZWQtb2ZmLWJ5OiBLZW5ueSBIbyA8S2VubnkuSG9AYW1kLmNvbT4KPiA+IC0tLQo+
ID4gIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMgICAgfCA0NyArKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysKPiA+ICBpbmNsdWRlL2RybS9kcm1fY2dyb3VwLmggICAgICAgIHwg
MTQgKysrKysrKysrKwo+ID4gIGluY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJpdmVyLmggfCAgMiAr
Kwo+ID4gIGtlcm5lbC9jZ3JvdXAvZHJtLmMgICAgICAgICAgICAgfCAzMyArKysrKysrKysrKysr
KysrKysrKysrKwo+ID4gIDQgZmlsZXMgY2hhbmdlZCwgOTYgaW5zZXJ0aW9ucygrKQo+ID4KPiA+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jIGIvZHJpdmVycy9ncHUv
ZHJtL3R0bS90dG1fYm8uYwo+ID4gaW5kZXggNzljNTMwZjRhMTk4Li41ZmMzYmM1YmQ0YzUgMTAw
NjQ0Cj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCj4gPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCj4gPiBAQCAtMTUwOSw2ICsxNTA5LDQ0IEBAIGludCB0
dG1fYm9fZXZpY3RfbW0oc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsIHVuc2lnbmVkIG1lbV90
eXBlKQo+ID4gIH0KPiA+ICBFWFBPUlRfU1lNQk9MKHR0bV9ib19ldmljdF9tbSk7Cj4gPgo+ID4g
K3N0YXRpYyB2b2lkIHR0bV9ib19yZWNsYWltX3dxKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykK
PiA+ICt7Cj4KPiBJIHRoaW5rIGEgZGVzaWduIGEgYml0IG1vcmUgaW5zcGlyZWQgYnkgbWVtY2cg
YXdhcmUgY29yZSBzaHJpbmtlcnMgd291bGQKPiBiZSBuaWNlLCBpLmUuIGV4cGxpY2l0bHkgcGFz
c2luZzoKPiAtIHdoaWNoIGRybV9jZ3JvdXAgbmVlZHMgdG8gYmUgc2hydW5rCj4gLSB3aGljaCB0
dG1fbWVtX3JlZyAod2VsbCB0aGUgZmFuY3kgbmV3IGFic3RyYWN0ZWQgb3V0IHN0dWZmIGZvciB0
cmFja2luZwo+ICAgc3BlY2lhbCBncHUgbWVtb3J5IHJlc291cmNlcyBsaWtlIHR0IG9yIHZyYW0g
b3Igd2hhdGV2ZXIpCj4gLSBob3cgbXVjaCBpdCBuZWVkcyB0byBiZSBzaHJ1bmsKPgo+IEkgdGhp
bmsgd2l0aCB0aGF0IGEgbG90IG1vcmUgdGhlIGJvb2sta2VlcGluZyBjb3VsZCBiZSBwdXNoZWQg
aW50byB0aGUKPiBkcm1fY2dyb3VwIGNvZGUsIGFuZCB0aGUgY2FsbGJhY2sganVzdCBuZWVkcyB0
byBhY3R1YWxseSBzaHJpbmsgZW5vdWdoIGFzCj4gcmVxdWVzdGVkLgo+IC1EYW5pZWwKPgo+ID4g
KyAgICAgc3RydWN0IHR0bV9vcGVyYXRpb25fY3R4IGN0eCA9IHsKPiA+ICsgICAgICAgICAgICAg
LmludGVycnVwdGlibGUgPSBmYWxzZSwKPiA+ICsgICAgICAgICAgICAgLm5vX3dhaXRfZ3B1ID0g
ZmFsc2UsCj4gPiArICAgICAgICAgICAgIC5mbGFncyA9IFRUTV9PUFRfRkxBR19GT1JDRV9BTExP
Qwo+ID4gKyAgICAgfTsKPiA+ICsgICAgIHN0cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdlciAqbWFu
ID0KPiA+ICsgICAgICAgICBjb250YWluZXJfb2Yod29yaywgc3RydWN0IHR0bV9tZW1fdHlwZV9t
YW5hZ2VyLCByZWNsYWltX3dxKTsKPiA+ICsgICAgIHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2
ID0gbWFuLT5iZGV2Owo+ID4gKyAgICAgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7Cj4gPiArICAg
ICBpbnQgbWVtX3R5cGU7Cj4gPiArICAgICBpbnQgcmV0Owo+ID4gKwo+ID4gKyAgICAgZm9yICht
ZW1fdHlwZSA9IDA7IG1lbV90eXBlIDwgVFRNX05VTV9NRU1fVFlQRVM7IG1lbV90eXBlKyspCj4g
PiArICAgICAgICAgICAgIGlmICgmYmRldi0+bWFuW21lbV90eXBlXSA9PSBtYW4pCj4gPiArICAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gPiArCj4gPiArICAgICBCVUdfT04obWVtX3R5cGUg
Pj0gVFRNX05VTV9NRU1fVFlQRVMpOwo+ID4gKwo+ID4gKyAgICAgaWYgKCFkcm1jZ3JwX21lbV9w
cmVzc3VyZV9zY2FuKGJkZXYsIG1lbV90eXBlKSkKPiA+ICsgICAgICAgICAgICAgcmV0dXJuOwo+
ID4gKwo+ID4gKyAgICAgcmV0ID0gdHRtX21lbV9ldmljdF9maXJzdChiZGV2LCBtZW1fdHlwZSwg
TlVMTCwgJmN0eCk7Cj4gPiArICAgICBpZiAocmV0KQo+ID4gKyAgICAgICAgICAgICByZXR1cm47
Cj4gPiArCj4gPiArICAgICBzcGluX2xvY2soJm1hbi0+bW92ZV9sb2NrKTsKPiA+ICsgICAgIGZl
bmNlID0gZG1hX2ZlbmNlX2dldChtYW4tPm1vdmUpOwo+ID4gKyAgICAgc3Bpbl91bmxvY2soJm1h
bi0+bW92ZV9sb2NrKTsKPiA+ICsKPiA+ICsgICAgIGlmIChmZW5jZSkgewo+ID4gKyAgICAgICAg
ICAgICByZXQgPSBkbWFfZmVuY2Vfd2FpdChmZW5jZSwgZmFsc2UpOwo+ID4gKyAgICAgICAgICAg
ICBkbWFfZmVuY2VfcHV0KGZlbmNlKTsKPiA+ICsgICAgIH0KPiA+ICsKPiA+ICt9Cj4gPiArCj4g
PiAgaW50IHR0bV9ib19pbml0X21tKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LCB1bnNpZ25l
ZCB0eXBlLAo+ID4gICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgcF9zaXplKQo+
ID4gIHsKPiA+IEBAIC0xNTQzLDYgKzE1ODEsMTMgQEAgaW50IHR0bV9ib19pbml0X21tKHN0cnVj
dCB0dG1fYm9fZGV2aWNlICpiZGV2LCB1bnNpZ25lZCB0eXBlLAo+ID4gICAgICAgICAgICAgICBJ
TklUX0xJU1RfSEVBRCgmbWFuLT5scnVbaV0pOwo+ID4gICAgICAgbWFuLT5tb3ZlID0gTlVMTDsK
PiA+Cj4gPiArICAgICBwcl9lcnIoImRybWNncnAgJXAgdHlwZSAlZFxuIiwgYmRldi0+ZGRldiwg
dHlwZSk7Cj4gPiArCj4gPiArICAgICBpZiAodHlwZSA8PSBUVE1fUExfVlJBTSkgewo+ID4gKyAg
ICAgICAgICAgICBJTklUX1dPUksoJm1hbi0+cmVjbGFpbV93cSwgdHRtX2JvX3JlY2xhaW1fd3Ep
Owo+ID4gKyAgICAgICAgICAgICBkcm1jZ3JwX3JlZ2lzdGVyX2RldmljZV9tbShiZGV2LT5kZGV2
LCB0eXBlLCAmbWFuLT5yZWNsYWltX3dxKTsKPiA+ICsgICAgIH0KPiA+ICsKPiA+ICAgICAgIHJl
dHVybiAwOwo+ID4gIH0KPiA+ICBFWFBPUlRfU1lNQk9MKHR0bV9ib19pbml0X21tKTsKPiA+IEBA
IC0xNjIwLDYgKzE2NjUsOCBAQCBpbnQgdHRtX2JvX2RldmljZV9yZWxlYXNlKHN0cnVjdCB0dG1f
Ym9fZGV2aWNlICpiZGV2KQo+ID4gICAgICAgICAgICAgICBtYW4gPSAmYmRldi0+bWFuW2ldOwo+
ID4gICAgICAgICAgICAgICBpZiAobWFuLT5oYXNfdHlwZSkgewo+ID4gICAgICAgICAgICAgICAg
ICAgICAgIG1hbi0+dXNlX3R5cGUgPSBmYWxzZTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICBk
cm1jZ3JwX3VucmVnaXN0ZXJfZGV2aWNlX21tKGJkZXYtPmRkZXYsIGkpOwo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgIGNhbmNlbF93b3JrX3N5bmMoJm1hbi0+cmVjbGFpbV93cSk7Cj4gPiAgICAg
ICAgICAgICAgICAgICAgICAgaWYgKChpICE9IFRUTV9QTF9TWVNURU0pICYmIHR0bV9ib19jbGVh
bl9tbShiZGV2LCBpKSkgewo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0g
LUVCVVNZOwo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJfZXJyKCJEUk0gbWVt
b3J5IG1hbmFnZXIgdHlwZSAlZCBpcyBub3QgY2xlYW5cbiIsCj4gPiBkaWZmIC0tZ2l0IGEvaW5j
bHVkZS9kcm0vZHJtX2Nncm91cC5oIGIvaW5jbHVkZS9kcm0vZHJtX2Nncm91cC5oCj4gPiBpbmRl
eCAzNjBjMWU2YzgwOWYuLjEzNGQ2ZTU0NzVmMyAxMDA2NDQKPiA+IC0tLSBhL2luY2x1ZGUvZHJt
L2RybV9jZ3JvdXAuaAo+ID4gKysrIGIvaW5jbHVkZS9kcm0vZHJtX2Nncm91cC5oCj4gPiBAQCAt
NSw2ICs1LDcgQEAKPiA+ICAjZGVmaW5lIF9fRFJNX0NHUk9VUF9IX18KPiA+Cj4gPiAgI2luY2x1
ZGUgPGxpbnV4L2Nncm91cF9kcm0uaD4KPiA+ICsjaW5jbHVkZSA8bGludXgvd29ya3F1ZXVlLmg+
Cj4gPiAgI2luY2x1ZGUgPGRybS90dG0vdHRtX2JvX2FwaS5oPgo+ID4gICNpbmNsdWRlIDxkcm0v
dHRtL3R0bV9ib19kcml2ZXIuaD4KPiA+Cj4gPiBAQCAtMTIsNiArMTMsOSBAQAo+ID4KPiA+ICBp
bnQgZHJtY2dycF9yZWdpc3Rlcl9kZXZpY2Uoc3RydWN0IGRybV9kZXZpY2UgKmRldmljZSk7Cj4g
PiAgaW50IGRybWNncnBfdW5yZWdpc3Rlcl9kZXZpY2Uoc3RydWN0IGRybV9kZXZpY2UgKmRldmlj
ZSk7Cj4gPiArdm9pZCBkcm1jZ3JwX3JlZ2lzdGVyX2RldmljZV9tbShzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZGV2LCB1bnNpZ25lZCB0eXBlLAo+ID4gKyAgICAgICAgICAgICBzdHJ1Y3Qgd29ya19zdHJ1
Y3QgKndxKTsKPiA+ICt2b2lkIGRybWNncnBfdW5yZWdpc3Rlcl9kZXZpY2VfbW0oc3RydWN0IGRy
bV9kZXZpY2UgKmRldiwgdW5zaWduZWQgdHlwZSk7Cj4gPiAgYm9vbCBkcm1jZ3JwX2lzX3NlbGZf
b3JfYW5jZXN0b3Ioc3RydWN0IGRybWNncnAgKnNlbGYsCj4gPiAgICAgICAgICAgICAgIHN0cnVj
dCBkcm1jZ3JwICpyZWxhdGl2ZSk7Cj4gPiAgdm9pZCBkcm1jZ3JwX2NoZ19ib19hbGxvYyhzdHJ1
Y3QgZHJtY2dycCAqZHJtY2dycCwgc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiA+IEBAIC00MCw2
ICs0NCwxNiBAQCBzdGF0aWMgaW5saW5lIGludCBkcm1jZ3JwX3VucmVnaXN0ZXJfZGV2aWNlKHN0
cnVjdCBkcm1fZGV2aWNlICpkZXZpY2UpCj4gPiAgICAgICByZXR1cm4gMDsKPiA+ICB9Cj4gPgo+
ID4gK3N0YXRpYyBpbmxpbmUgdm9pZCBkcm1jZ3JwX3JlZ2lzdGVyX2RldmljZV9tbShzdHJ1Y3Qg
ZHJtX2RldmljZSAqZGV2LAo+ID4gKyAgICAgICAgICAgICB1bnNpZ25lZCB0eXBlLCBzdHJ1Y3Qg
d29ya19zdHJ1Y3QgKndxKQo+ID4gK3sKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIGlubGluZSB2
b2lkIGRybWNncnBfdW5yZWdpc3Rlcl9kZXZpY2VfbW0oc3RydWN0IGRybV9kZXZpY2UgKmRldiwK
PiA+ICsgICAgICAgICAgICAgdW5zaWduZWQgdHlwZSkKPiA+ICt7Cj4gPiArfQo+ID4gKwo+ID4g
IHN0YXRpYyBpbmxpbmUgYm9vbCBkcm1jZ3JwX2lzX3NlbGZfb3JfYW5jZXN0b3Ioc3RydWN0IGRy
bWNncnAgKnNlbGYsCj4gPiAgICAgICAgICAgICAgIHN0cnVjdCBkcm1jZ3JwICpyZWxhdGl2ZSkK
PiA+ICB7Cj4gPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vdHRtL3R0bV9ib19kcml2ZXIuaCBi
L2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJpdmVyLmgKPiA+IGluZGV4IDRjYmNiNDFlNWFhOS4u
MDk1NmNhNzg4OGZjIDEwMDY0NAo+ID4gLS0tIGEvaW5jbHVkZS9kcm0vdHRtL3R0bV9ib19kcml2
ZXIuaAo+ID4gKysrIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV9ib19kcml2ZXIuaAo+ID4gQEAgLTIw
NSw2ICsyMDUsOCBAQCBzdHJ1Y3QgdHRtX21lbV90eXBlX21hbmFnZXIgewo+ID4gICAgICAgICog
UHJvdGVjdGVkIGJ5IEBtb3ZlX2xvY2suCj4gPiAgICAgICAgKi8KPiA+ICAgICAgIHN0cnVjdCBk
bWFfZmVuY2UgKm1vdmU7Cj4gPiArCj4gPiArICAgICBzdHJ1Y3Qgd29ya19zdHJ1Y3QgcmVjbGFp
bV93cTsKPiA+ICB9Owo+ID4KPiA+ICAvKioKPiA+IGRpZmYgLS1naXQgYS9rZXJuZWwvY2dyb3Vw
L2RybS5jIGIva2VybmVsL2Nncm91cC9kcm0uYwo+ID4gaW5kZXggMWNlMTNkYjM2Y2U5Li45ODVh
ODllODQ5ZDMgMTAwNjQ0Cj4gPiAtLS0gYS9rZXJuZWwvY2dyb3VwL2RybS5jCj4gPiArKysgYi9r
ZXJuZWwvY2dyb3VwL2RybS5jCj4gPiBAQCAtMzEsNiArMzEsOCBAQCBzdHJ1Y3QgZHJtY2dycF9k
ZXZpY2Ugewo+ID4gICAgICAgczY0ICAgICAgICAgICAgICAgICAgICAgbWVtX2J3X2F2Z19ieXRl
c19wZXJfdXNfZGVmYXVsdDsKPiA+Cj4gPiAgICAgICBzNjQgICAgICAgICAgICAgICAgICAgICBt
ZW1faGlnaHNfZGVmYXVsdFtUVE1fUExfUFJJVisxXTsKPiA+ICsKPiA+ICsgICAgIHN0cnVjdCB3
b3JrX3N0cnVjdCAgICAgICptZW1fcmVjbGFpbV93cVtUVE1fUExfUFJJVl07Cj4gPiAgfTsKPiA+
Cj4gPiAgI2RlZmluZSBEUk1DR19DVEZfUFJJVl9TSVpFIDMKPiA+IEBAIC03OTMsNiArNzk1LDMx
IEBAIGludCBkcm1jZ3JwX3VucmVnaXN0ZXJfZGV2aWNlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYp
Cj4gPiAgfQo+ID4gIEVYUE9SVF9TWU1CT0woZHJtY2dycF91bnJlZ2lzdGVyX2RldmljZSk7Cj4g
Pgo+ID4gK3ZvaWQgZHJtY2dycF9yZWdpc3Rlcl9kZXZpY2VfbW0oc3RydWN0IGRybV9kZXZpY2Ug
KmRldiwgdW5zaWduZWQgdHlwZSwKPiA+ICsgICAgICAgICAgICAgc3RydWN0IHdvcmtfc3RydWN0
ICp3cSkKPiA+ICt7Cj4gPiArICAgICBpZiAoZGV2ID09IE5VTEwgfHwgZGV2LT5wcmltYXJ5LT5p
bmRleCA+IG1heF9taW5vcgo+ID4gKyAgICAgICAgICAgICAgICAgICAgIHx8IHR5cGUgPj0gVFRN
X1BMX1BSSVYpCj4gPiArICAgICAgICAgICAgIHJldHVybjsKPiA+ICsKPiA+ICsgICAgIG11dGV4
X2xvY2soJmRybWNncnBfbXV0ZXgpOwo+ID4gKyAgICAga25vd25fZHJtY2dycF9kZXZzW2Rldi0+
cHJpbWFyeS0+aW5kZXhdLT5tZW1fcmVjbGFpbV93cVt0eXBlXSA9IHdxOwo+ID4gKyAgICAgbXV0
ZXhfdW5sb2NrKCZkcm1jZ3JwX211dGV4KTsKPiA+ICt9Cj4gPiArRVhQT1JUX1NZTUJPTChkcm1j
Z3JwX3JlZ2lzdGVyX2RldmljZV9tbSk7Cj4gPiArCj4gPiArdm9pZCBkcm1jZ3JwX3VucmVnaXN0
ZXJfZGV2aWNlX21tKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHVuc2lnbmVkIHR5cGUpCj4gPiAr
ewo+ID4gKyAgICAgaWYgKGRldiA9PSBOVUxMIHx8IGRldi0+cHJpbWFyeS0+aW5kZXggPiBtYXhf
bWlub3IKPiA+ICsgICAgICAgICAgICAgICAgICAgICB8fCB0eXBlID49IFRUTV9QTF9QUklWKQo+
ID4gKyAgICAgICAgICAgICByZXR1cm47Cj4gPiArCj4gPiArICAgICBtdXRleF9sb2NrKCZkcm1j
Z3JwX211dGV4KTsKPiA+ICsgICAgIGtub3duX2RybWNncnBfZGV2c1tkZXYtPnByaW1hcnktPmlu
ZGV4XS0+bWVtX3JlY2xhaW1fd3FbdHlwZV0gPSBOVUxMOwo+ID4gKyAgICAgbXV0ZXhfdW5sb2Nr
KCZkcm1jZ3JwX211dGV4KTsKPiA+ICt9Cj4gPiArRVhQT1JUX1NZTUJPTChkcm1jZ3JwX3VucmVn
aXN0ZXJfZGV2aWNlX21tKTsKPiA+ICsKPiA+ICBib29sIGRybWNncnBfaXNfc2VsZl9vcl9hbmNl
c3RvcihzdHJ1Y3QgZHJtY2dycCAqc2VsZiwgc3RydWN0IGRybWNncnAgKnJlbGF0aXZlKQo+ID4g
IHsKPiA+ICAgICAgIGZvciAoOyBzZWxmICE9IE5VTEw7IHNlbGYgPSBwYXJlbnRfZHJtY2dycChz
ZWxmKSkKPiA+IEBAIC0xMDA0LDYgKzEwMzEsMTIgQEAgdm9pZCBkcm1jZ3JwX21lbV90cmFja19t
b3ZlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqb2xkX2JvLCBib29sIGV2aWN0LAo+ID4KPiA+
ICAgICAgICAgICAgICAgZGRyLT5tZW1fYndfc3RhdHNbRFJNQ0dSUF9NRU1fQldfQVRUUl9CWVRF
X0NSRURJVF0KPiA+ICAgICAgICAgICAgICAgICAgICAgICAtPSBtb3ZlX2luX2J5dGVzOwo+ID4g
Kwo+ID4gKyAgICAgICAgICAgICBpZiAoa25vd25fZGV2LT5tZW1fcmVjbGFpbV93cVtuZXdfbWVt
X3R5cGVdICE9IE5VTEwgJiYKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICBkZHItPm1lbV9z
dGF0c1tuZXdfbWVtX3R5cGVdID4KPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRk
ci0+bWVtX2hpZ2hzW25ld19tZW1fdHlwZV0pCj4gPiArICAgICAgICAgICAgICAgICAgICAgc2No
ZWR1bGVfd29yaygKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtub3duX2Rldi0+
bWVtX3JlY2xhaW1fd3FbbmV3X21lbV90eXBlXSk7Cj4gPiAgICAgICB9Cj4gPiAgICAgICBtdXRl
eF91bmxvY2soJmtub3duX2Rldi0+bXV0ZXgpOwo+ID4gIH0KPiA+IC0tCj4gPiAyLjIxLjAKPiA+
Cj4gPiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+ID4g
ZHJpLWRldmVsIG1haWxpbmcgbGlzdAo+ID4gZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9y
Zwo+ID4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmkt
ZGV2ZWwKPgo+IC0tCj4gRGFuaWVsIFZldHRlcgo+IFNvZnR3YXJlIEVuZ2luZWVyLCBJbnRlbCBD
b3Jwb3JhdGlvbgo+IGh0dHA6Ly9ibG9nLmZmd2xsLmNoCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
