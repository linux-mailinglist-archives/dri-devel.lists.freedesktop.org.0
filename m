Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 93DB91C737
	for <lists+dri-devel@lfdr.de>; Tue, 14 May 2019 12:48:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8D046892A9;
	Tue, 14 May 2019 10:48:13 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk [46.235.227.227])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6AB038926F
 for <dri-devel@lists.freedesktop.org>; Tue, 14 May 2019 10:48:11 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: bbrezillon) with ESMTPSA id 262F22837CA
From: Boris Brezillon <boris.brezillon@collabora.com>
To: Rob Herring <robh+dt@kernel.org>,
	Tomeu Vizoso <tomeu@tomeuvizoso.net>
Subject: [RESEND PATCH v2 2/2] drm/panfrost: Expose perf counters through
 debugfs
Date: Tue, 14 May 2019 12:48:01 +0200
Message-Id: <20190514104801.20448-3-boris.brezillon@collabora.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190514104801.20448-1-boris.brezillon@collabora.com>
References: <20190514104801.20448-1-boris.brezillon@collabora.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org, Steven Price <steven.price@arm.com>,
 Boris Brezillon <boris.brezillon@collabora.com>, kernel@collabora.com,
 Alyssa Rosenzweig <alyssa@rosenzweig.io>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIGEgd2F5IHRvIGR1bXAgcGVyZiBjb3VudGVycyB0aHJvdWdoIGRlYnVnZnMuIFRoZSBpbXBs
ZW1lbnRhdGlvbiBpcwprZXB0IHNpbXBsZSBhbmQgaGFzIGEgbnVtYmVyIG9mIGxpbWl0YXRpb25z
OgoKKiBpdCdzIG5vdCBkZXNpZ25lZCBmb3IgbXVsdGktdXNlciB1c2FnZSBhcyB0aGUgY291bnRl
ciB2YWx1ZXMgYXJlCiAgcmVzZXQgYWZ0ZXIgZWFjaCBkdW1wIGFuZCB0aGVyZSdzIG5vIHBlci11
c2VyIGNvbnRleHQKKiBvbmx5IGFjY2Vzc2libGUgdG8gcm9vdCB1c2VycwoqIG5vIGNvdW50ZXJz
IG5hbWluZy9wb3NpdGlvbiBhYnN0cmFjdGlvbi4gVGhpbmdzIGFyZSBkdW1wZWQgaW4gYSByYXcK
ICBmb3JtYXQgdGhhdCBoYXMgdG8gYmUgcGFyc2VkIGJ5IHRoZSB1c2VyIHdobyBoYXMgdG8ga25v
dyB3aGVyZSB0aGUKICByZWxldmFudCB2YWx1ZXMgYXJlIGFuZCB3aGF0IHRoZXkgbWVhbgoKVGhp
cyBpbXBsZW1lbnRhdGlvbiBpcyBpbnRlbmRlZCB0byBiZSB1c2VkIGJ5IG1lc2EgZGV2ZWxvcGVy
cyB0byBoZWxwCmRlYnVnIHBlcmYtcmVsYXRlZCBpc3N1ZXMgd2hpbGUgd2Ugd29yayBvbiBhIG1v
cmUgZ2VuZXJpYyBhcHByb2FjaCB0aGF0CndvdWxkIGFsbG93IGFsbCBHUFUgZHJpdmVycyB0byBl
eHBvc2UgdGhlaXIgY291bnRlcnMgaW4gYSBjb25zaXN0ZW50CndheS4gQXMgYSByZXN1bHQsIHRo
aXMgZGVidWdmcyBpbnRlcmZhY2UgaXMgY29uc2lkZXJlZCB1bnN0YWJsZSBhbmQKbWlnaHQgYmUg
ZGVwcmVjYXRlZCBpbiB0aGUgZnV0dXJlLgoKU2lnbmVkLW9mZi1ieTogQm9yaXMgQnJlemlsbG9u
IDxib3Jpcy5icmV6aWxsb25AY29sbGFib3JhLmNvbT4KLS0tCkNoYW5nZXMgaW4gdjI6CiogRXhw
b3NlIGNvdW50ZXJzIHRocm91Z2ggZGVidWdmcyBhbmQga2VlcCB0aGluZ3Mgc2ltcGxlIGZvciBu
b3cgKHdlJ2xsCiAgd29yayBvbiBhIGdlbmVyaWMgc29sdXRpb24gaW4gcGFyYWxsZWwpCi0tLQog
ZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L01ha2VmaWxlICAgICAgICAgICB8ICAgMyArLQogZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5jICB8ICAgOSArCiBkcml2ZXJz
L2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmggIHwgICAzICsKIGRyaXZlcnMvZ3B1
L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kcnYuYyAgICAgfCAgIDcgKwogZHJpdmVycy9ncHUvZHJt
L3BhbmZyb3N0L3BhbmZyb3N0X2dwdS5jICAgICB8ICAgNyArCiBkcml2ZXJzL2dwdS9kcm0vcGFu
ZnJvc3QvcGFuZnJvc3RfcGVyZmNudC5jIHwgMzM5ICsrKysrKysrKysrKysrKysrKysrCiBkcml2
ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfcGVyZmNudC5oIHwgIDE1ICsKIGRyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9yZWdzLmggICAgfCAgMTkgKysKIDggZmlsZXMgY2hh
bmdlZCwgNDAxIGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKIGNyZWF0ZSBtb2RlIDEwMDY0
NCBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfcGVyZmNudC5jCiBjcmVhdGUgbW9k
ZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQuaAoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1
L2RybS9wYW5mcm9zdC9NYWtlZmlsZQppbmRleCA2ZGU3MmQxM2M1OGYuLmVjZjA4NjRjYjUxNSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L01ha2VmaWxlCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9wYW5mcm9zdC9NYWtlZmlsZQpAQCAtNyw2ICs3LDcgQEAgcGFuZnJvc3QteSA6
PSBcCiAJcGFuZnJvc3RfZ2VtLm8gXAogCXBhbmZyb3N0X2dwdS5vIFwKIAlwYW5mcm9zdF9qb2Iu
byBcCi0JcGFuZnJvc3RfbW11Lm8KKwlwYW5mcm9zdF9tbXUubyBcCisJcGFuZnJvc3RfcGVyZmNu
dC5vCiAKIG9iai0kKENPTkZJR19EUk1fUEFORlJPU1QpICs9IHBhbmZyb3N0Lm8KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2UuYyBiL2RyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2UuYwppbmRleCAzYjJiY2VkMWIwMTUuLmIy
Mzk1ZmM2OGExZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0
X2RldmljZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2Uu
YwpAQCAtMTQsNiArMTQsNyBAQAogI2luY2x1ZGUgInBhbmZyb3N0X2dwdS5oIgogI2luY2x1ZGUg
InBhbmZyb3N0X2pvYi5oIgogI2luY2x1ZGUgInBhbmZyb3N0X21tdS5oIgorI2luY2x1ZGUgInBh
bmZyb3N0X3BlcmZjbnQuaCIKIAogc3RhdGljIGludCBwYW5mcm9zdF9yZXNldF9pbml0KHN0cnVj
dCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KQogewpAQCAtMTQ5LDcgKzE1MCwxMyBAQCBpbnQgcGFu
ZnJvc3RfZGV2aWNlX2luaXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCiAJcG1fcnVu
dGltZV9tYXJrX2xhc3RfYnVzeShwZmRldi0+ZGV2KTsKIAlwbV9ydW50aW1lX3B1dF9hdXRvc3Vz
cGVuZChwZmRldi0+ZGV2KTsKIAorCWVyciA9IHBhbmZyb3N0X3BlcmZjbnRfaW5pdChwZmRldik7
CisJaWYgKGVycikKKwkJZ290byBlcnJfb3V0NTsKKwogCXJldHVybiAwOworZXJyX291dDU6CisJ
cGFuZnJvc3Rfam9iX2ZpbmkocGZkZXYpOwogZXJyX291dDQ6CiAJcGFuZnJvc3RfbW11X2Zpbmko
cGZkZXYpOwogZXJyX291dDM6CkBAIC0xNjUsNiArMTcyLDcgQEAgaW50IHBhbmZyb3N0X2Rldmlj
ZV9pbml0KHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KQogCiB2b2lkIHBhbmZyb3N0X2Rl
dmljZV9maW5pKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KQogeworCXBhbmZyb3N0X3Bl
cmZjbnRfZmluaShwZmRldik7CiAJcGFuZnJvc3Rfam9iX2ZpbmkocGZkZXYpOwogCXBhbmZyb3N0
X21tdV9maW5pKHBmZGV2KTsKIAlwYW5mcm9zdF9ncHVfZmluaShwZmRldik7CkBAIC0yMzcsNiAr
MjQ1LDcgQEAgaW50IHBhbmZyb3N0X2RldmljZV9yZXN1bWUoc3RydWN0IGRldmljZSAqZGV2KQog
CXBhbmZyb3N0X21tdV9lbmFibGUocGZkZXYsIDApOwogCXBhbmZyb3N0X2pvYl9lbmFibGVfaW50
ZXJydXB0cyhwZmRldik7CiAJcGFuZnJvc3RfZGV2ZnJlcV9yZXN1bWUocGZkZXYpOworCXBhbmZy
b3N0X3BlcmZjbnRfcmVzdW1lKHBmZGV2KTsKIAogCXJldHVybiAwOwogfQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5oIGIvZHJpdmVycy9ncHUv
ZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5oCmluZGV4IDU2ZjQ1MmRmYjQ5MC4uNjI4ZDcw
NGI3NmJhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2
aWNlLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5oCkBA
IC0xNCw2ICsxNCw3IEBAIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2U7CiBzdHJ1Y3QgcGFuZnJvc3Rf
bW11Owogc3RydWN0IHBhbmZyb3N0X2pvYl9zbG90Owogc3RydWN0IHBhbmZyb3N0X2pvYjsKK3N0
cnVjdCBwYW5mcm9zdF9wZXJmY250OwogCiAjZGVmaW5lIE5VTV9KT0JfU0xPVFMgMwogCkBAIC03
Nyw2ICs3OCw4IEBAIHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgewogCXN0cnVjdCBwYW5mcm9zdF9q
b2IgKmpvYnNbTlVNX0pPQl9TTE9UU107CiAJc3RydWN0IGxpc3RfaGVhZCBzY2hlZHVsZWRfam9i
czsKIAorCXN0cnVjdCBwYW5mcm9zdF9wZXJmY250ICpwZXJmY250OworCiAJc3RydWN0IG11dGV4
IHNjaGVkX2xvY2s7CiAJc3RydWN0IG11dGV4IHJlc2V0X2xvY2s7CiAKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kcnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9w
YW5mcm9zdC9wYW5mcm9zdF9kcnYuYwppbmRleCA5NGIwODE5YWQ1MGIuLjIwMjM5NzUzN2VlYSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kcnYuYwpAQCAtMTksNiArMTksNyBA
QAogI2luY2x1ZGUgInBhbmZyb3N0X21tdS5oIgogI2luY2x1ZGUgInBhbmZyb3N0X2pvYi5oIgog
I2luY2x1ZGUgInBhbmZyb3N0X2dwdS5oIgorI2luY2x1ZGUgInBhbmZyb3N0X3BlcmZjbnQuaCIK
IAogc3RhdGljIGludCBwYW5mcm9zdF9pb2N0bF9nZXRfcGFyYW0oc3RydWN0IGRybV9kZXZpY2Ug
KmRkZXYsIHZvaWQgKmRhdGEsIHN0cnVjdCBkcm1fZmlsZSAqZmlsZSkKIHsKQEAgLTM0MCw2ICsz
NDEsMTEgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1faW9jdGxfZGVzYyBwYW5mcm9zdF9kcm1f
ZHJpdmVyX2lvY3Rsc1tdID0gewogCiBERUZJTkVfRFJNX0dFTV9TSE1FTV9GT1BTKHBhbmZyb3N0
X2RybV9kcml2ZXJfZm9wcyk7CiAKK3N0YXRpYyBpbnQgcGFuZnJvc3RfZGVidWdmc19pbml0KHN0
cnVjdCBkcm1fbWlub3IgKm1pbm9yKQoreworCXJldHVybiBwYW5mcm9zdF9wZXJmY250X2RlYnVn
ZnNfaW5pdChtaW5vcik7Cit9CisKIHN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBwYW5mcm9zdF9k
cm1fZHJpdmVyID0gewogCS5kcml2ZXJfZmVhdHVyZXMJPSBEUklWRVJfUkVOREVSIHwgRFJJVkVS
X0dFTSB8IERSSVZFUl9QUklNRSB8CiAJCQkJICBEUklWRVJfU1lOQ09CSiwKQEAgLTM1OSw2ICsz
NjUsNyBAQCBzdGF0aWMgc3RydWN0IGRybV9kcml2ZXIgcGFuZnJvc3RfZHJtX2RyaXZlciA9IHsK
IAkucHJpbWVfZmRfdG9faGFuZGxlCT0gZHJtX2dlbV9wcmltZV9mZF90b19oYW5kbGUsCiAJLmdl
bV9wcmltZV9pbXBvcnRfc2dfdGFibGUgPSBwYW5mcm9zdF9nZW1fcHJpbWVfaW1wb3J0X3NnX3Rh
YmxlLAogCS5nZW1fcHJpbWVfbW1hcAkJPSBkcm1fZ2VtX3ByaW1lX21tYXAsCisJLmRlYnVnZnNf
aW5pdAkJPSBwYW5mcm9zdF9kZWJ1Z2ZzX2luaXQsCiB9OwogCiBzdGF0aWMgaW50IHBhbmZyb3N0
X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ3B1LmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJv
c3QvcGFuZnJvc3RfZ3B1LmMKaW5kZXggNmU2OGExMDAyOTFjLi4yMGFiMzMzZmM5MjUgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9ncHUuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZ3B1LmMKQEAgLTE1LDYgKzE1LDcgQEAKICNp
bmNsdWRlICJwYW5mcm9zdF9mZWF0dXJlcy5oIgogI2luY2x1ZGUgInBhbmZyb3N0X2lzc3Vlcy5o
IgogI2luY2x1ZGUgInBhbmZyb3N0X2dwdS5oIgorI2luY2x1ZGUgInBhbmZyb3N0X3BlcmZjbnQu
aCIKICNpbmNsdWRlICJwYW5mcm9zdF9yZWdzLmgiCiAKIHN0YXRpYyBpcnFyZXR1cm5fdCBwYW5m
cm9zdF9ncHVfaXJxX2hhbmRsZXIoaW50IGlycSwgdm9pZCAqZGF0YSkKQEAgLTQwLDYgKzQxLDEy
IEBAIHN0YXRpYyBpcnFyZXR1cm5fdCBwYW5mcm9zdF9ncHVfaXJxX2hhbmRsZXIoaW50IGlycSwg
dm9pZCAqZGF0YSkKIAkJZ3B1X3dyaXRlKHBmZGV2LCBHUFVfSU5UX01BU0ssIDApOwogCX0KIAor
CWlmIChzdGF0ZSAmIEdQVV9JUlFfUEVSRkNOVF9TQU1QTEVfQ09NUExFVEVEKQorCQlwYW5mcm9z
dF9wZXJmY250X3NhbXBsZV9kb25lKHBmZGV2KTsKKworCWlmIChzdGF0ZSAmIEdQVV9JUlFfQ0xF
QU5fQ0FDSEVTX0NPTVBMRVRFRCkKKwkJcGFuZnJvc3RfcGVyZmNudF9jbGVhbl9jYWNoZV9kb25l
KHBmZGV2KTsKKwogCWdwdV93cml0ZShwZmRldiwgR1BVX0lOVF9DTEVBUiwgc3RhdGUpOwogCiAJ
cmV0dXJuIElSUV9IQU5ETEVEOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0
L3BhbmZyb3N0X3BlcmZjbnQuYyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9w
ZXJmY250LmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi44MDkzNzgz
YTVhMjYKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJv
c3RfcGVyZmNudC5jCkBAIC0wLDAgKzEsMzM5IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmll
cjogR1BMLTIuMAorLyogQ29weXJpZ2h0IDIwMTkgQ29sbGFib3JhIEx0ZCAqLworCisjaW5jbHVk
ZSA8ZHJtL2RybV9maWxlLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9nZW1fc2htZW1faGVscGVyLmg+
CisjaW5jbHVkZSA8ZHJtL3BhbmZyb3N0X2RybS5oPgorI2luY2x1ZGUgPGxpbnV4L2NvbXBsZXRp
b24uaD4KKyNpbmNsdWRlIDxsaW51eC9kZWJ1Z2ZzLmg+CisjaW5jbHVkZSA8bGludXgvaW9wb2xs
Lmg+CisjaW5jbHVkZSA8bGludXgvcG1fcnVudGltZS5oPgorI2luY2x1ZGUgPGxpbnV4L3NsYWIu
aD4KKyNpbmNsdWRlIDxsaW51eC91YWNjZXNzLmg+CisKKyNpbmNsdWRlICJwYW5mcm9zdF9kZXZp
Y2UuaCIKKyNpbmNsdWRlICJwYW5mcm9zdF9mZWF0dXJlcy5oIgorI2luY2x1ZGUgInBhbmZyb3N0
X2dlbS5oIgorI2luY2x1ZGUgInBhbmZyb3N0X2lzc3Vlcy5oIgorI2luY2x1ZGUgInBhbmZyb3N0
X2pvYi5oIgorI2luY2x1ZGUgInBhbmZyb3N0X21tdS5oIgorI2luY2x1ZGUgInBhbmZyb3N0X3Jl
Z3MuaCIKKworI2RlZmluZSBDT1VOVEVSU19QRVJfQkxPQ0sJCTY0CisjZGVmaW5lIEJZVEVTX1BF
Ul9DT1VOVEVSCQk0CisjZGVmaW5lIEJMT0NLU19QRVJfQ09SRUdST1VQCQk4CisjZGVmaW5lIFY0
X1NIQURFUlNfUEVSX0NPUkVHUk9VUAk0CisKK3N0cnVjdCBwYW5mcm9zdF9wZXJmY250IHsKKwlz
dHJ1Y3QgcGFuZnJvc3RfZ2VtX29iamVjdCAqYm87CisJc2l6ZV90IGJvc2l6ZTsKKwl2b2lkICpi
dWY7CisJYm9vbCBlbmFibGVkOworCXN0cnVjdCBtdXRleCBsb2NrOworCXN0cnVjdCBjb21wbGV0
aW9uIGR1bXBfY29tcDsKK307CisKK3ZvaWQgcGFuZnJvc3RfcGVyZmNudF9jbGVhbl9jYWNoZV9k
b25lKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KQoreworCWNvbXBsZXRlKCZwZmRldi0+
cGVyZmNudC0+ZHVtcF9jb21wKTsKK30KKwordm9pZCBwYW5mcm9zdF9wZXJmY250X3NhbXBsZV9k
b25lKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KQoreworCWdwdV93cml0ZShwZmRldiwg
R1BVX0NNRCwgR1BVX0NNRF9DTEVBTl9DQUNIRVMpOworfQorCitzdGF0aWMgdm9pZCBwYW5mcm9z
dF9wZXJmY250X3NldHVwKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KQoreworCXUzMiBj
Zmc7CisKKwkvKgorCSAqIEFsd2F5cyB1c2UgYWRkcmVzcyBzcGFjZSAwIGZvciBub3cuCisJICog
RklYTUU6IHRoaXMgbmVlZHMgdG8gYmUgdXBkYXRlZCB3aGVuIHdlIHN0YXJ0IHVzaW5nIGRpZmZl
cmVudAorCSAqIGFkZHJlc3Mgc3BhY2UuCisJICovCisJY2ZnID0gR1BVX1BFUkZDTlRfQ0ZHX0FT
KDApOworCWlmIChwYW5mcm9zdF9tb2RlbF9jbXAocGZkZXYsIDB4MTAwMCkgPj0gMCkKKwkJY2Zn
IHw9IEdQVV9QRVJGQ05UX0NGR19TRVRTRUwoMSk7CisKKwlncHVfd3JpdGUocGZkZXYsIEdQVV9Q
RVJGQ05UX0NGRywKKwkJICBjZmcgfCBHUFVfUEVSRkNOVF9DRkdfTU9ERShHUFVfUEVSRkNOVF9D
RkdfTU9ERV9PRkYpKTsKKworCWlmICghcGZkZXYtPnBlcmZjbnQtPmVuYWJsZWQpCisJCXJldHVy
bjsKKworCWdwdV93cml0ZShwZmRldiwgR1BVX1BSRkNOVF9KTV9FTiwgMHhmZmZmZmZmZik7CisJ
Z3B1X3dyaXRlKHBmZGV2LCBHUFVfUFJGQ05UX1NIQURFUl9FTiwgMHhmZmZmZmZmZik7CisJZ3B1
X3dyaXRlKHBmZGV2LCBHUFVfUFJGQ05UX01NVV9MMl9FTiwgMHhmZmZmZmZmZik7CisKKwkvKgor
CSAqIER1ZSB0byBQUkxBTS04MTg2IHdlIG5lZWQgdG8gZGlzYWJsZSB0aGUgVGlsZXIgYmVmb3Jl
IHdlIGVuYWJsZSBIVworCSAqIGNvdW50ZXJzLgorCSAqLworCWlmIChwYW5mcm9zdF9oYXNfaHdf
aXNzdWUocGZkZXYsIEhXX0lTU1VFXzgxODYpKQorCQlncHVfd3JpdGUocGZkZXYsIEdQVV9QUkZD
TlRfVElMRVJfRU4sIDApOworCWVsc2UKKwkJZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUFJGQ05UX1RJ
TEVSX0VOLCAweGZmZmZmZmZmKTsKKworCWdwdV93cml0ZShwZmRldiwgR1BVX1BFUkZDTlRfQ0ZH
LAorCQkgIGNmZyB8IEdQVV9QRVJGQ05UX0NGR19NT0RFKEdQVV9QRVJGQ05UX0NGR19NT0RFX01B
TlVBTCkpOworCisJaWYgKHBhbmZyb3N0X2hhc19od19pc3N1ZShwZmRldiwgSFdfSVNTVUVfODE4
NikpCisJCWdwdV93cml0ZShwZmRldiwgR1BVX1BSRkNOVF9USUxFUl9FTiwgMHhmZmZmZmZmZik7
Cit9CisKK3N0YXRpYyBpbnQgcGFuZnJvc3RfcGVyZmNudF9kdW1wKHN0cnVjdCBwYW5mcm9zdF9k
ZXZpY2UgKnBmZGV2KQoreworCXU2NCBncHV2YTsKKwlpbnQgcmV0OworCisJcmVpbml0X2NvbXBs
ZXRpb24oJnBmZGV2LT5wZXJmY250LT5kdW1wX2NvbXApOworCWdwdXZhID0gcGZkZXYtPnBlcmZj
bnQtPmJvLT5ub2RlLnN0YXJ0IDw8IFBBR0VfU0hJRlQ7CisJZ3B1X3dyaXRlKHBmZGV2LCBHUFVf
UEVSRkNOVF9CQVNFX0xPLCBncHV2YSk7CisJZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUEVSRkNOVF9C
QVNFX0hJLCBncHV2YSA+PiAzMik7CisJZ3B1X3dyaXRlKHBmZGV2LCBHUFVfQ01ELCBHUFVfQ01E
X1BFUkZDTlRfU0FNUExFKTsKKwlyZXQgPSB3YWl0X2Zvcl9jb21wbGV0aW9uX2ludGVycnVwdGli
bGVfdGltZW91dCgmcGZkZXYtPnBlcmZjbnQtPmR1bXBfY29tcCwKKwkJCQkJCQltc2Vjc190b19q
aWZmaWVzKDEwMDApKTsKKwlpZiAoIXJldCkKKwkJcmV0ID0gLUVUSU1FRE9VVDsKKwllbHNlIGlm
IChyZXQgPiAwKQorCQlyZXQgPSAwOworCisJcmV0dXJuIHJldDsKK30KKwordm9pZCBwYW5mcm9z
dF9wZXJmY250X3Jlc3VtZShzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldikKK3sKKwlpZiAo
cGZkZXYtPnBlcmZjbnQpCisJCXBhbmZyb3N0X3BlcmZjbnRfc2V0dXAocGZkZXYpOworfQorCitz
dGF0aWMgc3NpemVfdCBwYW5mcm9zdF9wZXJmY250X2VuYWJsZV9yZWFkKHN0cnVjdCBmaWxlICpm
aWxlLAorCQkJCQkgICAgY2hhciBfX3VzZXIgKnVzZXJfYnVmLAorCQkJCQkgICAgc2l6ZV90IGNv
dW50LCBsb2ZmX3QgKnBwb3MpCit7CisJc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYgPSBm
aWxlLT5wcml2YXRlX2RhdGE7CisJc3NpemVfdCByZXQ7CisKKwltdXRleF9sb2NrKCZwZmRldi0+
cGVyZmNudC0+bG9jayk7CisJcmV0ID0gc2ltcGxlX3JlYWRfZnJvbV9idWZmZXIodXNlcl9idWYs
IGNvdW50LCBwcG9zLAorCQkJCSAgICAgIHBmZGV2LT5wZXJmY250LT5lbmFibGVkID8gIllcbiIg
OiAiTlxuIiwKKwkJCQkgICAgICAyKTsKKwltdXRleF91bmxvY2soJnBmZGV2LT5wZXJmY250LT5s
b2NrKTsKKworCXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyBzc2l6ZV90IHBhbmZyb3N0X3BlcmZj
bnRfZW5hYmxlX3dyaXRlKHN0cnVjdCBmaWxlICpmaWxlLAorCQkJCQkgICAgIGNvbnN0IGNoYXIg
X191c2VyICp1c2VyX2J1ZiwKKwkJCQkJICAgICBzaXplX3QgY291bnQsIGxvZmZfdCAqcHBvcykK
K3sKKwlzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiA9IGZpbGUtPnByaXZhdGVfZGF0YTsK
Kwlib29sIGVuYWJsZTsKKwlpbnQgcmV0OworCisJcmV0ID0ga3N0cnRvYm9vbF9mcm9tX3VzZXIo
dXNlcl9idWYsIGNvdW50LCAmZW5hYmxlKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJ
cmV0ID0gcG1fcnVudGltZV9nZXRfc3luYyhwZmRldi0+ZGV2KTsKKwlpZiAocmV0IDwgMCkKKwkJ
cmV0dXJuIHJldDsKKworCW11dGV4X2xvY2soJnBmZGV2LT5wZXJmY250LT5sb2NrKTsKKwlpZiAo
ZW5hYmxlICE9IHBmZGV2LT5wZXJmY250LT5lbmFibGVkKSB7CisJCXBmZGV2LT5wZXJmY250LT5l
bmFibGVkID0gZW5hYmxlOworCQlwYW5mcm9zdF9wZXJmY250X3NldHVwKHBmZGV2KTsKKwl9CisJ
bXV0ZXhfdW5sb2NrKCZwZmRldi0+cGVyZmNudC0+bG9jayk7CisKKwlwbV9ydW50aW1lX21hcmtf
bGFzdF9idXN5KHBmZGV2LT5kZXYpOworCXBtX3J1bnRpbWVfcHV0X2F1dG9zdXNwZW5kKHBmZGV2
LT5kZXYpOworCisJcmV0dXJuIGNvdW50OworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGZpbGVf
b3BlcmF0aW9ucyBwYW5mcm9zdF9wZXJmY250X2VuYWJsZV9mb3BzID0geworCS5yZWFkID0gcGFu
ZnJvc3RfcGVyZmNudF9lbmFibGVfcmVhZCwKKwkud3JpdGUgPSBwYW5mcm9zdF9wZXJmY250X2Vu
YWJsZV93cml0ZSwKKwkub3BlbiA9IHNpbXBsZV9vcGVuLAorCS5sbHNlZWsgPSBkZWZhdWx0X2xs
c2VlaywKK307CisKK3N0YXRpYyBzc2l6ZV90IHBhbmZyb3N0X3BlcmZjbnRfZHVtcF9yZWFkKHN0
cnVjdCBmaWxlICpmaWxlLAorCQkJCQkgIGNoYXIgX191c2VyICp1c2VyX2J1ZiwKKwkJCQkJICBz
aXplX3QgY291bnQsIGxvZmZfdCAqcHBvcykKK3sKKwlzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpw
ZmRldiA9IGZpbGUtPnByaXZhdGVfZGF0YTsKKwlzc2l6ZV90IHJldDsKKworCXJldCA9IHBtX3J1
bnRpbWVfZ2V0X3N5bmMocGZkZXYtPmRldik7CisJaWYgKHJldCA8IDApCisJCXJldHVybiByZXQ7
CisKKwltdXRleF9sb2NrKCZwZmRldi0+cGVyZmNudC0+bG9jayk7CisJaWYgKCFwZmRldi0+cGVy
ZmNudC0+ZW5hYmxlZCkgeworCQlyZXQgPSAtRUlOVkFMOworCQlnb3RvIG91dDsKKwl9CisKKwly
ZXQgPSBwYW5mcm9zdF9wZXJmY250X2R1bXAocGZkZXYpOworCWlmIChyZXQpCisJCWdvdG8gb3V0
OworCisJcmV0ID0gc2ltcGxlX3JlYWRfZnJvbV9idWZmZXIodXNlcl9idWYsIGNvdW50LCBwcG9z
LAorCQkJCSAgICAgIHBmZGV2LT5wZXJmY250LT5idWYsCisJCQkJICAgICAgcGZkZXYtPnBlcmZj
bnQtPmJvc2l6ZSk7CisKK291dDoKKwltdXRleF91bmxvY2soJnBmZGV2LT5wZXJmY250LT5sb2Nr
KTsKKwlwbV9ydW50aW1lX21hcmtfbGFzdF9idXN5KHBmZGV2LT5kZXYpOworCXBtX3J1bnRpbWVf
cHV0X2F1dG9zdXNwZW5kKHBmZGV2LT5kZXYpOworCisJcmV0dXJuIHJldDsKK30KKworc3RhdGlj
IGNvbnN0IHN0cnVjdCBmaWxlX29wZXJhdGlvbnMgcGFuZnJvc3RfcGVyZmNudF9kdW1wX2ZvcHMg
PSB7CisJLnJlYWQgPSBwYW5mcm9zdF9wZXJmY250X2R1bXBfcmVhZCwKKwkub3BlbiA9IHNpbXBs
ZV9vcGVuLAorCS5sbHNlZWsgPSBkZWZhdWx0X2xsc2VlaywKK307CisKK2ludCBwYW5mcm9zdF9w
ZXJmY250X2RlYnVnZnNfaW5pdChzdHJ1Y3QgZHJtX21pbm9yICptaW5vcikKK3sKKwlzdHJ1Y3Qg
cGFuZnJvc3RfZGV2aWNlICpwZmRldiA9IHRvX3BhbmZyb3N0X2RldmljZShtaW5vci0+ZGV2KTsK
KwlzdHJ1Y3QgZGVudHJ5ICpmaWxlLCAqZGlyOworCisJZGlyID0gZGVidWdmc19jcmVhdGVfZGly
KCJwZXJmY250IiwgbWlub3ItPmRlYnVnZnNfcm9vdCk7CisJaWYgKElTX0VSUihkaXIpKQorCQly
ZXR1cm4gUFRSX0VSUihkaXIpOworCisJZmlsZSA9IGRlYnVnZnNfY3JlYXRlX2ZpbGUoImR1bXAi
LCAwNDAwLCBkaXIsIHBmZGV2LAorCQkJCSAgICZwYW5mcm9zdF9wZXJmY250X2R1bXBfZm9wcyk7
CisJaWYgKElTX0VSUihmaWxlKSkKKwkJcmV0dXJuIFBUUl9FUlIoZmlsZSk7CisKKwlmaWxlID0g
ZGVidWdmc19jcmVhdGVfZmlsZSgiZW5hYmxlIiwgMDYwMCwgZGlyLCBwZmRldiwKKwkJCQkgICAm
cGFuZnJvc3RfcGVyZmNudF9lbmFibGVfZm9wcyk7CisJaWYgKElTX0VSUihmaWxlKSkKKwkJcmV0
dXJuIFBUUl9FUlIoZmlsZSk7CisKKwlyZXR1cm4gMDsKK30KKworaW50IHBhbmZyb3N0X3BlcmZj
bnRfaW5pdChzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldikKK3sKKwlzdHJ1Y3QgcGFuZnJv
c3RfcGVyZmNudCAqcGVyZmNudDsKKwlzdHJ1Y3QgZHJtX2dlbV9zaG1lbV9vYmplY3QgKmJvOwor
CXNpemVfdCBzaXplOworCXUzMiBzdGF0dXM7CisJaW50IHJldDsKKworCWlmIChwYW5mcm9zdF9o
YXNfaHdfZmVhdHVyZShwZmRldiwgSFdfRkVBVFVSRV9WNCkpIHsKKwkJdW5zaWduZWQgaW50IG5j
b3JlZ3JvdXBzOworCisJCW5jb3JlZ3JvdXBzID0gaHdlaWdodDY0KHBmZGV2LT5mZWF0dXJlcy5s
Ml9wcmVzZW50KTsKKwkJc2l6ZSA9IG5jb3JlZ3JvdXBzICogQkxPQ0tTX1BFUl9DT1JFR1JPVVAg
KgorCQkgICAgICAgQ09VTlRFUlNfUEVSX0JMT0NLICogQllURVNfUEVSX0NPVU5URVI7CisJfSBl
bHNlIHsKKwkJdW5zaWduZWQgaW50IG5sMmMsIG5jb3JlczsKKworCQkvKgorCQkgKiBUT0RPOiBk
ZWZpbmUgYSBtYWNybyB0byBleHRyYWN0IHRoZSBudW1iZXIgb2YgbDIgY2FjaGVzIGZyb20KKwkJ
ICogbWVtX2ZlYXR1cmVzLgorCQkgKi8KKwkJbmwyYyA9ICgocGZkZXYtPmZlYXR1cmVzLm1lbV9m
ZWF0dXJlcyA+PiA4KSAmIEdFTk1BU0soMywgMCkpICsgMTsKKworCQkvKgorCQkgKiBUaGUgQVJN
IGRyaXZlciBpcyBncm91cGluZyBjb3JlcyBwZXIgY29yZSBncm91cCBhbmQgdGhlbgorCQkgKiBv
bmx5IHVzaW5nIHRoZSBudW1iZXIgb2YgY29yZXMgaW4gZ3JvdXAgMCB0byBjYWxjdWxhdGUgdGhl
CisJCSAqIHNpemUuIE5vdCBzdXJlIHdoeSB0aGlzIGlzIGRvbmUgbGlrZSB0aGF0LCBidXQgSSBn
dWVzcworCQkgKiBzaGFkZXJfcHJlc2VudCB3aWxsIG9ubHkgc2hvdyBjb3JlcyBpbiB0aGUgZmly
c3QgZ3JvdXAKKwkJICogYW55d2F5LgorCQkgKi8KKwkJbmNvcmVzID0gaHdlaWdodDY0KHBmZGV2
LT5mZWF0dXJlcy5zaGFkZXJfcHJlc2VudCk7CisKKwkJLyoKKwkJICogVGhlcmUncyBhbHdheXMg
b25lIEpNIGFuZCBvbmUgVGlsZXIgYmxvY2ssIGhlbmNlIHRoZSAnKyAyJworCQkgKiBoZXJlLgor
CQkgKi8KKwkJc2l6ZSA9IChubDJjICsgbmNvcmVzICsgMikgKgorCQkgICAgICAgQ09VTlRFUlNf
UEVSX0JMT0NLICogQllURVNfUEVSX0NPVU5URVI7CisJfQorCisJcGVyZmNudCA9IGRldm1fa3ph
bGxvYyhwZmRldi0+ZGV2LCBzaXplb2YoKnBlcmZjbnQpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIXBl
cmZjbnQpCisJCXJldHVybiAtRU5PTUVNOworCisJYm8gPSBkcm1fZ2VtX3NobWVtX2NyZWF0ZShw
ZmRldi0+ZGRldiwgc2l6ZSk7CisJaWYgKElTX0VSUihibykpCisJCXJldHVybiBQVFJfRVJSKGJv
KTsKKworCXBlcmZjbnQtPmJvID0gdG9fcGFuZnJvc3RfYm8oJmJvLT5iYXNlKTsKKwlwZXJmY250
LT5ib3NpemUgPSBzaXplOworCisJLyoKKwkgKiBXZSBhbHdheXMgdXNlIHRoZSBzYW1lIGJ1ZmZl
ciwgc28gbGV0J3MgbWFwIGl0IG9uY2UgYW5kIGtlZXAgaXQKKwkgKiBtYXBwZWQgdW50aWwgdGhl
IGRyaXZlciBpcyB1bmxvYWRlZC4gVGhpcyBtaWdodCBiZSBhIHByb2JsZW0gaWYKKwkgKiB3ZSBz
dGFydCB1c2luZyBkaWZmZXJlbnQgQVMgYW5kIHRoZSBwZXJmY250IEJPIGlzIG5vdCBtYXBwZWQg
YXQKKwkgKiB0aGUgc2FtZSBHUFUgdmlydHVhbCBhZGRyZXNzLgorCSAqLworCXJldCA9IHBhbmZy
b3N0X21tdV9tYXAocGVyZmNudC0+Ym8pOworCWlmIChyZXQpCisJCWdvdG8gZXJyX3B1dF9ibzsK
KworCS8qIERpc2FibGUgZXZlcnl0aGluZy4gKi8KKwlncHVfd3JpdGUocGZkZXYsIEdQVV9QRVJG
Q05UX0NGRywKKwkJICBHUFVfUEVSRkNOVF9DRkdfQVMoMCkgfAorCQkgIEdQVV9QRVJGQ05UX0NG
R19NT0RFKEdQVV9QRVJGQ05UX0NGR19NT0RFX09GRikgfAorCQkgIChwYW5mcm9zdF9tb2RlbF9j
bXAocGZkZXYsIDB4MTAwMCkgPj0gMCA/CisJCSAgIEdQVV9QRVJGQ05UX0NGR19TRVRTRUwoMSkg
OiAwKSk7CisJZ3B1X3dyaXRlKHBmZGV2LCBHUFVfUFJGQ05UX0pNX0VOLCAwKTsKKwlncHVfd3Jp
dGUocGZkZXYsIEdQVV9QUkZDTlRfU0hBREVSX0VOLCAwKTsKKwlncHVfd3JpdGUocGZkZXYsIEdQ
VV9QUkZDTlRfTU1VX0wyX0VOLCAwKTsKKwlncHVfd3JpdGUocGZkZXYsIEdQVV9QUkZDTlRfVElM
RVJfRU4sIDApOworCisJcGVyZmNudC0+YnVmID0gZHJtX2dlbV92bWFwKCZiby0+YmFzZSk7CisJ
aWYgKElTX0VSUihwZXJmY250LT5idWYpKSB7CisJCXJldCA9IFBUUl9FUlIocGVyZmNudC0+YnVm
KTsKKwkJZ290byBlcnJfcHV0X2JvOworCX0KKworCWluaXRfY29tcGxldGlvbigmcGVyZmNudC0+
ZHVtcF9jb21wKTsKKwltdXRleF9pbml0KCZwZXJmY250LT5sb2NrKTsKKwlwZmRldi0+cGVyZmNu
dCA9IHBlcmZjbnQ7CisKKwkvKgorCSAqIEludmFsaWRhdGUgdGhlIGNhY2hlIGFuZCBjbGVhciB0
aGUgY291bnRlcnMgdG8gc3RhcnQgZnJvbSBhIGZyZXNoCisJICogc3RhdGUuCisJICovCisJZ3B1
X3dyaXRlKHBmZGV2LCBHUFVfSU5UX01BU0ssIDApOworCWdwdV93cml0ZShwZmRldiwgR1BVX0lO
VF9DTEVBUiwgR1BVX0lSUV9DTEVBTl9DQUNIRVNfQ09NUExFVEVEKTsKKworCWdwdV93cml0ZShw
ZmRldiwgR1BVX0NNRCwgR1BVX0NNRF9QRVJGQ05UX0NMRUFSKTsKKwlncHVfd3JpdGUocGZkZXYs
IEdQVV9DTUQsIEdQVV9DTURfQ0xFQU5fSU5WX0NBQ0hFUyk7CisJcmV0ID0gcmVhZGxfcmVsYXhl
ZF9wb2xsX3RpbWVvdXQocGZkZXYtPmlvbWVtICsgR1BVX0lOVF9SQVdTVEFULAorCQkJCQkgc3Rh
dHVzLAorCQkJCQkgc3RhdHVzICYKKwkJCQkJIEdQVV9JUlFfQ0xFQU5fQ0FDSEVTX0NPTVBMRVRF
RCwKKwkJCQkJIDEwMCwgMTAwMDApOworCWlmIChyZXQpCisJCWdvdG8gZXJyX2dlbV92dW5tYXA7
CisKKwlncHVfd3JpdGUocGZkZXYsIEdQVV9JTlRfTUFTSywgR1BVX0lSUV9NQVNLX0FMTCk7CisK
KwlyZXR1cm4gMDsKKworZXJyX2dlbV92dW5tYXA6CisJZHJtX2dlbV92dW5tYXAoJnBmZGV2LT5w
ZXJmY250LT5iby0+YmFzZS5iYXNlLCBwZmRldi0+cGVyZmNudC0+YnVmKTsKKworZXJyX3B1dF9i
bzoKKwlkcm1fZ2VtX29iamVjdF9wdXRfdW5sb2NrZWQoJmJvLT5iYXNlKTsKKwlyZXR1cm4gcmV0
OworfQorCit2b2lkIHBhbmZyb3N0X3BlcmZjbnRfZmluaShzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNl
ICpwZmRldikKK3sKKwlkcm1fZ2VtX3Z1bm1hcCgmcGZkZXYtPnBlcmZjbnQtPmJvLT5iYXNlLmJh
c2UsIHBmZGV2LT5wZXJmY250LT5idWYpOworCWRybV9nZW1fb2JqZWN0X3B1dF91bmxvY2tlZCgm
cGZkZXYtPnBlcmZjbnQtPmJvLT5iYXNlLmJhc2UpOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3BlcmZjbnQuaCBiL2RyaXZlcnMvZ3B1L2RybS9wYW5m
cm9zdC9wYW5mcm9zdF9wZXJmY250LmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MDAwMDAwLi5iMjE3NDUzOTgxNzgKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
cGFuZnJvc3QvcGFuZnJvc3RfcGVyZmNudC5oCkBAIC0wLDAgKzEsMTUgQEAKKy8qIFNQRFgtTGlj
ZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wICovCisvKiBDb3B5cmlnaHQgMjAxOSBDb2xsYWJvcmEg
THRkICovCisjaWZuZGVmIF9fUEFORlJPU1RfUEVSRkNOVF9IX18KKyNkZWZpbmUgX19QQU5GUk9T
VF9QRVJGQ05UX0hfXworCisjaW5jbHVkZSAicGFuZnJvc3RfZGV2aWNlLmgiCisKK3ZvaWQgcGFu
ZnJvc3RfcGVyZmNudF9zYW1wbGVfZG9uZShzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldik7
Cit2b2lkIHBhbmZyb3N0X3BlcmZjbnRfY2xlYW5fY2FjaGVfZG9uZShzdHJ1Y3QgcGFuZnJvc3Rf
ZGV2aWNlICpwZmRldik7CitpbnQgcGFuZnJvc3RfcGVyZmNudF9pbml0KHN0cnVjdCBwYW5mcm9z
dF9kZXZpY2UgKnBmZGV2KTsKK3ZvaWQgcGFuZnJvc3RfcGVyZmNudF9maW5pKHN0cnVjdCBwYW5m
cm9zdF9kZXZpY2UgKnBmZGV2KTsKK3ZvaWQgcGFuZnJvc3RfcGVyZmNudF9yZXN1bWUoc3RydWN0
IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpOworaW50IHBhbmZyb3N0X3BlcmZjbnRfZGVidWdmc19p
bml0KHN0cnVjdCBkcm1fbWlub3IgKm1pbm9yKTsKKworI2VuZGlmCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfcmVncy5oIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmZyb3N0L3BhbmZyb3N0X3JlZ3MuaAppbmRleCA0MmQwODg2MGZkNzYuLmVhMzhhYzYwNTgxYyAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X3JlZ3MuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfcmVncy5oCkBAIC00NCwxMiArNDQs
MzEgQEAKIAkgR1BVX0lSUV9NVUxUSVBMRV9GQVVMVCkKICNkZWZpbmUgR1BVX0NNRAkJCQkweDMw
CiAjZGVmaW5lICAgR1BVX0NNRF9TT0ZUX1JFU0VUCQkweDAxCisjZGVmaW5lICAgR1BVX0NNRF9Q
RVJGQ05UX0NMRUFSCQkweDAzCisjZGVmaW5lICAgR1BVX0NNRF9QRVJGQ05UX1NBTVBMRQkweDA0
CisjZGVmaW5lICAgR1BVX0NNRF9DTEVBTl9DQUNIRVMJCTB4MDcKKyNkZWZpbmUgICBHUFVfQ01E
X0NMRUFOX0lOVl9DQUNIRVMJMHgwOAogI2RlZmluZSBHUFVfU1RBVFVTCQkJMHgzNAorI2RlZmlu
ZSAgIEdQVV9TVEFUVVNfUFJGQ05UX0FDVElWRQlCSVQoMikKICNkZWZpbmUgR1BVX0xBVEVTVF9G
TFVTSF9JRAkJMHgzOAogI2RlZmluZSBHUFVfRkFVTFRfU1RBVFVTCQkweDNDCiAjZGVmaW5lIEdQ
VV9GQVVMVF9BRERSRVNTX0xPCQkweDQwCiAjZGVmaW5lIEdQVV9GQVVMVF9BRERSRVNTX0hJCQkw
eDQ0CiAKKyNkZWZpbmUgR1BVX1BFUkZDTlRfQkFTRV9MTwkJMHg2MAorI2RlZmluZSBHUFVfUEVS
RkNOVF9CQVNFX0hJCQkweDY0CisjZGVmaW5lIEdQVV9QRVJGQ05UX0NGRwkJCTB4NjgKKyNkZWZp
bmUgICBHUFVfUEVSRkNOVF9DRkdfTU9ERSh4KQkoeCkKKyNkZWZpbmUgICBHUFVfUEVSRkNOVF9D
RkdfTU9ERV9PRkYJMAorI2RlZmluZSAgIEdQVV9QRVJGQ05UX0NGR19NT0RFX01BTlVBTAkxCisj
ZGVmaW5lICAgR1BVX1BFUkZDTlRfQ0ZHX01PREVfVElMRQkyCisjZGVmaW5lICAgR1BVX1BFUkZD
TlRfQ0ZHX0FTKHgpCQkoKHgpIDw8IDQpCisjZGVmaW5lICAgR1BVX1BFUkZDTlRfQ0ZHX1NFVFNF
TCh4KQkoKHgpIDw8IDgpCisjZGVmaW5lIEdQVV9QUkZDTlRfSk1fRU4JCTB4NmMKKyNkZWZpbmUg
R1BVX1BSRkNOVF9TSEFERVJfRU4JCTB4NzAKKyNkZWZpbmUgR1BVX1BSRkNOVF9USUxFUl9FTgkJ
MHg3NAorI2RlZmluZSBHUFVfUFJGQ05UX01NVV9MMl9FTgkJMHg3YworCiAjZGVmaW5lIEdQVV9U
SFJFQURfTUFYX1RIUkVBRFMJCTB4MEEwCS8qIChSTykgTWF4aW11bSBudW1iZXIgb2YgdGhyZWFk
cyBwZXIgY29yZSAqLwogI2RlZmluZSBHUFVfVEhSRUFEX01BWF9XT1JLR1JPVVBfU0laRQkweDBB
NAkvKiAoUk8pIE1heGltdW0gd29ya2dyb3VwIHNpemUgKi8KICNkZWZpbmUgR1BVX1RIUkVBRF9N
QVhfQkFSUklFUl9TSVpFCTB4MEE4CS8qIChSTykgTWF4aW11bSB0aHJlYWRzIHdhaXRpbmcgYXQg
YSBiYXJyaWVyICovCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2RyaS1kZXZlbA==
