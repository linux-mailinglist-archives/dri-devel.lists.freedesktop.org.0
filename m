Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 46DC62C40BC
	for <lists+dri-devel@lfdr.de>; Wed, 25 Nov 2020 13:59:43 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D797A6E99F;
	Wed, 25 Nov 2020 12:59:39 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x544.google.com (mail-ed1-x544.google.com
 [IPv6:2a00:1450:4864:20::544])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8D42A89458
 for <dri-devel@lists.freedesktop.org>; Wed, 25 Nov 2020 12:59:28 +0000 (UTC)
Received: by mail-ed1-x544.google.com with SMTP id m16so2463097edr.3
 for <dri-devel@lists.freedesktop.org>; Wed, 25 Nov 2020 04:59:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=y1tB5FnW/DUAV4UJN2qx3KjDnb/i/+ZA7OEgLZ4RJNE=;
 b=DaiRtrj5qE2SnyCQiXSK3cO+WBAkVOM/mMv0EwQh5sQt2zvshnc6xbI5JPXrmVV/aD
 zLJrx4PS1c3phvEXBl35WwqsAUzokHuYR+mTJpeFGV4AU8CK7zwRyx5dZktt1HddObE2
 XETq88RgsSKdJ5fH3UxJOqSsP1Zb0e3objAVnc9bZP2+wNcVezQfOVSGvy3XnowlSxV4
 Gb9wd09WiUJROIXsT6+X0ZB12s9cNQH8SFALaLCi3whbG9B4bbnwxh6uw0OJvfxru5bT
 R+X5hwkrB6vO8ow8jC52xnX/v5NWuMJOq1uyo+BV86hUbxopAik2lJo9Sygg9Jxy34Dv
 KUAQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=y1tB5FnW/DUAV4UJN2qx3KjDnb/i/+ZA7OEgLZ4RJNE=;
 b=m4l1oZj1ke8zS5XsqLn06Ax1O14mPCRvNpVrJhR2vmUgSxrpUU7/jYdpbIhzA+QXLo
 EINQm2/OTrWBPQ42toEfW02sxusXSs87Jl1oWCYpSiAf6iEeh/bkPs3X2h0kdFEuhfkP
 RT1P12s7LLhmk3Fo06QPfT9Akp5GFVv814j1ALuXKk0Y/NirH5Af217kDrPRqTbAokGk
 mlXaEQDWiCncj0/AUGKLTPo1FnJrfMVVpwd55nEIizpNaM2kBbOUq5H3o4M50LgsYOmz
 031tScTV/51+tUjOe21ILPW/anZ+qYzhZiHoq356+HAc9IZuchKPNUif/m+lt5Euur24
 oaeA==
X-Gm-Message-State: AOAM532iXjohIdq5f1IpG4UPJ1wpk//yTK1mub0qXsHER/EMPfJBqpgs
 HXFwp3Ez+iYSpX4I8HA+gK4yzoUoz+w=
X-Google-Smtp-Source: ABdhPJwCQTRwdRa9dmGSinarU+PJ4io1NXEfNOiVzHSh1GA8FYaXXF5KhYXEeqoUFc3wFlU58ZeCrA==
X-Received: by 2002:a50:d1d3:: with SMTP id i19mr2443842edg.72.1606309166814; 
 Wed, 25 Nov 2020 04:59:26 -0800 (PST)
Received: from abel.fritz.box ([2a02:908:1252:fb60:87d9:eeff:99f6:84c2])
 by smtp.gmail.com with ESMTPSA id z19sm1203188ejj.101.2020.11.25.04.59.25
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 25 Nov 2020 04:59:25 -0800 (PST)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 7/7] drm/prime: split array import functions v4
Date: Wed, 25 Nov 2020 13:59:19 +0100
Message-Id: <20201125125919.1372-7-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20201125125919.1372-1-christian.koenig@amd.com>
References: <20201125125919.1372-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TWFwcGluZyB0aGUgaW1wb3J0ZWQgcGFnZXMgb2YgYSBETUEtYnVmIGludG8gYW4gdXNlcnNwYWNl
IHByb2Nlc3MKZG9lc24ndCB3b3JrIGFzIGV4cGVjdGVkLgoKQnV0IHdlIGhhdmUgcmVvY2N1cnJp
bmcgcmVxdWVzdHMgb24gdGhpcyBhcHByb2FjaCwgc28gc3BsaXQgdGhlCmZ1bmN0aW9ucyBmb3Ig
dGhpcyBhbmQgIGRvY3VtZW50IHRoYXQgZG1hX2J1Zl9tbWFwKCkgbmVlZHMgdG8gYmUgdXNlZApp
bnN0ZWFkLgoKdjI6IHNwbGl0IGl0IGludG8gdHdvIGZ1bmN0aW9ucwp2MzogcmViYXNlZCBvbiBs
YXRlc3QgY2hhbmdlcwp2NDogdXBkYXRlIGNvbW1pdCBtZXNzYWdlIGEgYml0CgpTaWduZWQtb2Zm
LWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Ci0tLQogZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jICAgICB8ICA5ICsrLQogZHJpdmVy
cy9ncHUvZHJtL2RybV9wcmltZS5jICAgICAgICAgICAgICAgICB8IDY0ICsrKysrKysrKysrKyst
LS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW1fcHJpbWUuYyB8ICAz
ICstCiBkcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9nZW0uYyAgICAgIHwgIDIgKy0K
IGRyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2dlbS5jICAgICAgICAgICAgICAgfCAgMiArLQogZHJp
dmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jICAgICAgICB8ICA1ICstCiBkcml2ZXJz
L2dwdS9kcm0vb21hcGRybS9vbWFwX2dlbS5jICAgICAgICAgIHwgIDMgKy0KIGRyaXZlcnMvZ3B1
L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jICAgICAgICAgfCAgOSArKy0KIGRyaXZlcnMvZ3B1L2Ry
bS92Z2VtL3ZnZW1fZHJ2LmMgICAgICAgICAgICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL3hl
bi94ZW5fZHJtX2Zyb250X2dlbS5jICAgICB8ICA0ICstCiBpbmNsdWRlL2RybS9kcm1fcHJpbWUu
aCAgICAgICAgICAgICAgICAgICAgIHwgIDcgKystCiAxMSBmaWxlcyBjaGFuZ2VkLCA2MCBpbnNl
cnRpb25zKCspLCA1MSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfdHRtLmMKaW5kZXggMDI3NDhlMDMwMzIyLi5hMzRmZWRjYzhiNjEgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKQEAgLTkxOCw4ICs5MTgsOCBAQCBzdGF0aWMgaW50
IGFtZGdwdV90dG1fdHRfcGluX3VzZXJwdHIoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCiAJ
CWdvdG8gcmVsZWFzZV9zZzsKIAogCS8qIGNvbnZlcnQgU0cgdG8gbGluZWFyIGFycmF5IG9mIHBh
Z2VzIGFuZCBkbWEgYWRkcmVzc2VzICovCi0JZHJtX3ByaW1lX3NnX3RvX3BhZ2VfYWRkcl9hcnJh
eXModHRtLT5zZywgTlVMTCwgZ3R0LT50dG0uZG1hX2FkZHJlc3MsCi0JCQkJCSB0dG0tPm51bV9w
YWdlcyk7CisJZHJtX3ByaW1lX3NnX3RvX2RtYV9hZGRyX2FycmF5KHR0bS0+c2csIGd0dC0+dHRt
LmRtYV9hZGRyZXNzLAorCQkJCSAgICAgICB0dG0tPm51bV9wYWdlcyk7CiAKIAlyZXR1cm4gMDsK
IApAQCAtMTI2NCw5ICsxMjY0LDggQEAgc3RhdGljIGludCBhbWRncHVfdHRtX3R0X3BvcHVsYXRl
KHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LAogCQkJdHRtLT5zZyA9IHNndDsKIAkJfQogCi0J
CWRybV9wcmltZV9zZ190b19wYWdlX2FkZHJfYXJyYXlzKHR0bS0+c2csIE5VTEwsCi0JCQkJCQkg
Z3R0LT50dG0uZG1hX2FkZHJlc3MsCi0JCQkJCQkgdHRtLT5udW1fcGFnZXMpOworCQlkcm1fcHJp
bWVfc2dfdG9fZG1hX2FkZHJfYXJyYXkodHRtLT5zZywgZ3R0LT50dG0uZG1hX2FkZHJlc3MsCisJ
CQkJCSAgICAgICB0dG0tPm51bV9wYWdlcyk7CiAJCXJldHVybiAwOwogCX0KIApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2RybV9wcmltZS5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9wcmlt
ZS5jCmluZGV4IDdkYjU1ZmNlMzVkOC4uNjgzYWEyOWVjZDNiIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vZHJtX3ByaW1lLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9wcmltZS5jCkBA
IC05NzgsNDQgKzk3OCw1OCBAQCBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmRybV9nZW1fcHJpbWVf
aW1wb3J0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiBFWFBPUlRfU1lNQk9MKGRybV9nZW1fcHJp
bWVfaW1wb3J0KTsKIAogLyoqCi0gKiBkcm1fcHJpbWVfc2dfdG9fcGFnZV9hZGRyX2FycmF5cyAt
IGNvbnZlcnQgYW4gc2cgdGFibGUgaW50byBhIHBhZ2UgYXJyYXkKKyAqIGRybV9wcmltZV9zZ190
b19wYWdlX2FycmF5IC0gY29udmVydCBhbiBzZyB0YWJsZSBpbnRvIGEgcGFnZSBhcnJheQogICog
QHNndDogc2NhdHRlci1nYXRoZXIgdGFibGUgdG8gY29udmVydAotICogQHBhZ2VzOiBvcHRpb25h
bCBhcnJheSBvZiBwYWdlIHBvaW50ZXJzIHRvIHN0b3JlIHRoZSBwYWdlIGFycmF5IGluCi0gKiBA
YWRkcnM6IG9wdGlvbmFsIGFycmF5IHRvIHN0b3JlIHRoZSBkbWEgYnVzIGFkZHJlc3Mgb2YgZWFj
aCBwYWdlCisgKiBAcGFnZXM6IGFycmF5IG9mIHBhZ2UgcG9pbnRlcnMgdG8gc3RvcmUgdGhlIHBh
Z2VzIGluCisgKiBAbWF4X2VudHJpZXM6IHNpemUgb2YgdGhlIHBhc3NlZC1pbiBhcnJheQorICoK
KyAqIEV4cG9ydHMgYW4gc2cgdGFibGUgaW50byBhbiBhcnJheSBvZiBwYWdlcy4KKyAqCisgKiBU
aGlzIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQgYW5kIHN0cm9uZ2x5IGRpc2NvdXJhZ2VkIHRvIGJl
IHVzZWQuCisgKiBUaGUgcGFnZSBhcnJheSBpcyBvbmx5IHVzZWZ1bCBmb3IgcGFnZSBmYXVsdHMg
YW5kIHRob3NlIGNhbiBjb3JydXB0IGZpZWxkcworICogaW4gdGhlIHN0cnVjdCBwYWdlIGlmIHRo
ZXkgYXJlIG5vdCBoYW5kbGVkIGJ5IHRoZSBleHBvcnRpbmcgZHJpdmVyLgorICovCitpbnQgX19k
ZXByZWNhdGVkIGRybV9wcmltZV9zZ190b19wYWdlX2FycmF5KHN0cnVjdCBzZ190YWJsZSAqc2d0
LAorCQkJCQkgICAgc3RydWN0IHBhZ2UgKipwYWdlcywKKwkJCQkJICAgIGludCBtYXhfZW50cmll
cykKK3sKKwlzdHJ1Y3Qgc2dfcGFnZV9pdGVyIHBhZ2VfaXRlcjsKKwlzdHJ1Y3QgcGFnZSAqKnAg
PSBwYWdlczsKKworCWZvcl9lYWNoX3NndGFibGVfcGFnZShzZ3QsICZwYWdlX2l0ZXIsIDApIHsK
KwkJaWYgKFdBUk5fT04ocCAtIHBhZ2VzID49IG1heF9lbnRyaWVzKSkKKwkJCXJldHVybiAtMTsK
KwkJKnArKyA9IHNnX3BhZ2VfaXRlcl9wYWdlKCZwYWdlX2l0ZXIpOworCX0KKwlyZXR1cm4gMDsK
K30KK0VYUE9SVF9TWU1CT0woZHJtX3ByaW1lX3NnX3RvX3BhZ2VfYXJyYXkpOworCisvKioKKyAq
IGRybV9wcmltZV9zZ190b19kbWFfYWRkcl9hcnJheSAtIGNvbnZlcnQgYW4gc2cgdGFibGUgaW50
byBhIGRtYSBhZGRyIGFycmF5CisgKiBAc2d0OiBzY2F0dGVyLWdhdGhlciB0YWJsZSB0byBjb252
ZXJ0CisgKiBAYWRkcnM6IGFycmF5IHRvIHN0b3JlIHRoZSBkbWEgYnVzIGFkZHJlc3Mgb2YgZWFj
aCBwYWdlCiAgKiBAbWF4X2VudHJpZXM6IHNpemUgb2YgYm90aCB0aGUgcGFzc2VkLWluIGFycmF5
cwogICoKLSAqIEV4cG9ydHMgYW4gc2cgdGFibGUgaW50byBhbiBhcnJheSBvZiBwYWdlcyBhbmQg
YWRkcmVzc2VzLiBUaGlzIGlzIGN1cnJlbnRseQotICogcmVxdWlyZWQgYnkgdGhlIFRUTSBkcml2
ZXIgaW4gb3JkZXIgdG8gZG8gY29ycmVjdCBmYXVsdCBoYW5kbGluZy4KKyAqIEV4cG9ydHMgYW4g
c2cgdGFibGUgaW50byBhbiBhcnJheSBvZiBhZGRyZXNzZXMuCiAgKgotICogRHJpdmVycyBjYW4g
dXNlIHRoaXMgaW4gdGhlaXIgJmRybV9kcml2ZXIuZ2VtX3ByaW1lX2ltcG9ydF9zZ190YWJsZQor
ICogRHJpdmVycyBzaG91bGQgdXNlIHRoaXMgaW4gdGhlaXIgJmRybV9kcml2ZXIuZ2VtX3ByaW1l
X2ltcG9ydF9zZ190YWJsZQogICogaW1wbGVtZW50YXRpb24uCiAgKi8KLWludCBkcm1fcHJpbWVf
c2dfdG9fcGFnZV9hZGRyX2FycmF5cyhzdHJ1Y3Qgc2dfdGFibGUgKnNndCwgc3RydWN0IHBhZ2Ug
KipwYWdlcywKLQkJCQkgICAgIGRtYV9hZGRyX3QgKmFkZHJzLCBpbnQgbWF4X2VudHJpZXMpCitp
bnQgZHJtX3ByaW1lX3NnX3RvX2RtYV9hZGRyX2FycmF5KHN0cnVjdCBzZ190YWJsZSAqc2d0LCBk
bWFfYWRkcl90ICphZGRycywKKwkJCQkgICBpbnQgbWF4X2VudHJpZXMpCiB7CiAJc3RydWN0IHNn
X2RtYV9wYWdlX2l0ZXIgZG1hX2l0ZXI7Ci0Jc3RydWN0IHNnX3BhZ2VfaXRlciBwYWdlX2l0ZXI7
Ci0Jc3RydWN0IHBhZ2UgKipwID0gcGFnZXM7CiAJZG1hX2FkZHJfdCAqYSA9IGFkZHJzOwogCi0J
aWYgKHBhZ2VzKSB7Ci0JCWZvcl9lYWNoX3NndGFibGVfcGFnZShzZ3QsICZwYWdlX2l0ZXIsIDAp
IHsKLQkJCWlmIChXQVJOX09OKHAgLSBwYWdlcyA+PSBtYXhfZW50cmllcykpCi0JCQkJcmV0dXJu
IC0xOwotCQkJKnArKyA9IHNnX3BhZ2VfaXRlcl9wYWdlKCZwYWdlX2l0ZXIpOwotCQl9Ci0JfQot
CWlmIChhZGRycykgewotCQlmb3JfZWFjaF9zZ3RhYmxlX2RtYV9wYWdlKHNndCwgJmRtYV9pdGVy
LCAwKSB7Ci0JCQlpZiAoV0FSTl9PTihhIC0gYWRkcnMgPj0gbWF4X2VudHJpZXMpKQotCQkJCXJl
dHVybiAtMTsKLQkJCSphKysgPSBzZ19wYWdlX2l0ZXJfZG1hX2FkZHJlc3MoJmRtYV9pdGVyKTsK
LQkJfQorCWZvcl9lYWNoX3NndGFibGVfZG1hX3BhZ2Uoc2d0LCAmZG1hX2l0ZXIsIDApIHsKKwkJ
aWYgKFdBUk5fT04oYSAtIGFkZHJzID49IG1heF9lbnRyaWVzKSkKKwkJCXJldHVybiAtMTsKKwkJ
KmErKyA9IHNnX3BhZ2VfaXRlcl9kbWFfYWRkcmVzcygmZG1hX2l0ZXIpOwogCX0KLQogCXJldHVy
biAwOwogfQotRVhQT1JUX1NZTUJPTChkcm1fcHJpbWVfc2dfdG9fcGFnZV9hZGRyX2FycmF5cyk7
CitFWFBPUlRfU1lNQk9MKGRybV9wcmltZV9zZ190b19kbWFfYWRkcl9hcnJheSk7CiAKIC8qKgog
ICogZHJtX3ByaW1lX2dlbV9kZXN0cm95IC0gaGVscGVyIHRvIGNsZWFuIHVwIGEgUFJJTUUtaW1w
b3J0ZWQgR0VNIG9iamVjdApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRu
YXZpdl9nZW1fcHJpbWUuYyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3By
aW1lLmMKaW5kZXggZDliZDgzMjAzYTE1Li5iMzkwZGQ0ZDYwYjcgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3ByaW1lLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW1fcHJpbWUuYwpAQCAtMTM1LDggKzEzNSw3IEBAIHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqZXRuYXZpdl9nZW1fcHJpbWVfaW1wb3J0X3NnX3RhYmxlKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsCiAJCWdvdG8gZmFpbDsKIAl9CiAKLQlyZXQgPSBkcm1fcHJpbWVf
c2dfdG9fcGFnZV9hZGRyX2FycmF5cyhzZ3QsIGV0bmF2aXZfb2JqLT5wYWdlcywKLQkJCQkJICAg
ICAgIE5VTEwsIG5wYWdlcyk7CisJcmV0ID0gZHJtX3ByaW1lX3NnX3RvX3BhZ2VfYXJyYXkoc2d0
LCBldG5hdml2X29iai0+cGFnZXMsIG5wYWdlcyk7CiAJaWYgKHJldCkKIAkJZ290byBmYWlsOwog
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9nZW0uYyBiL2Ry
aXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2dlbS5jCmluZGV4IDI4YTJlZTEzMzZlZi4u
MjgwZWEwZDVlODQwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2Ry
bV9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9nZW0uYwpAQCAt
MjYwLDcgKzI2MCw3IEBAIGludCBtdGtfZHJtX2dlbV9wcmltZV92bWFwKHN0cnVjdCBkcm1fZ2Vt
X29iamVjdCAqb2JqLCBzdHJ1Y3QgZG1hX2J1Zl9tYXAgKm1hcCkKIAkJcmV0dXJuIC1FTk9NRU07
CiAJfQogCi0JZHJtX3ByaW1lX3NnX3RvX3BhZ2VfYWRkcl9hcnJheXMoc2d0LCBtdGtfZ2VtLT5w
YWdlcywgTlVMTCwgbnBhZ2VzKTsKKwlkcm1fcHJpbWVfc2dfdG9fcGFnZV9hcnJheShzZ3QsIG10
a19nZW0tPnBhZ2VzLCBucGFnZXMpOwogCiAJbXRrX2dlbS0+a3ZhZGRyID0gdm1hcChtdGtfZ2Vt
LT5wYWdlcywgbnBhZ2VzLCBWTV9NQVAsCiAJCQkgICAgICAgcGdwcm90X3dyaXRlY29tYmluZShQ
QUdFX0tFUk5FTCkpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2VtLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9nZW0uYwppbmRleCAzMTE3MjFjZWVlNTAuLmY5OTVj
YjAyYjYzZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2VtLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2VtLmMKQEAgLTExODAsNyArMTE4MCw3IEBAIHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqbXNtX2dlbV9pbXBvcnQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwK
IAkJZ290byBmYWlsOwogCX0KIAotCXJldCA9IGRybV9wcmltZV9zZ190b19wYWdlX2FkZHJfYXJy
YXlzKHNndCwgbXNtX29iai0+cGFnZXMsIE5VTEwsIG5wYWdlcyk7CisJcmV0ID0gZHJtX3ByaW1l
X3NnX3RvX3BhZ2VfYXJyYXkoc2d0LCBtc21fb2JqLT5wYWdlcywgbnBhZ2VzKTsKIAlpZiAocmV0
KSB7CiAJCW11dGV4X3VubG9jaygmbXNtX29iai0+bG9jayk7CiAJCWdvdG8gZmFpbDsKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYyBiL2RyaXZlcnMvZ3B1
L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYwppbmRleCBjMzBmMDg4Y2VmY2MuLjY0NWU3MDkxZGZm
YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYwpAQCAtMTIzNSw5ICsxMjM1LDgg
QEAgbm91dmVhdV90dG1fdHRfcG9wdWxhdGUoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCiAJ
CXJldHVybiAwOwogCiAJaWYgKHNsYXZlICYmIHR0bS0+c2cpIHsKLQkJZHJtX3ByaW1lX3NnX3Rv
X3BhZ2VfYWRkcl9hcnJheXModHRtLT5zZywgTlVMTCwKLQkJCQkJCSB0dG1fZG1hLT5kbWFfYWRk
cmVzcywKLQkJCQkJCSB0dG0tPm51bV9wYWdlcyk7CisJCWRybV9wcmltZV9zZ190b19kbWFfYWRk
cl9hcnJheSh0dG0tPnNnLCB0dG1fZG1hLT5kbWFfYWRkcmVzcywKKwkJCQkJICAgICAgIHR0bS0+
bnVtX3BhZ2VzKTsKIAkJcmV0dXJuIDA7CiAJfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vb21hcGRybS9vbWFwX2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9nZW0u
YwppbmRleCAzMGQyOTljYTg3OTUuLjM4YWY2MTk1ZDk1OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL29tYXBkcm0vb21hcF9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9v
bWFwX2dlbS5jCkBAIC0xMzI0LDggKzEzMjQsNyBAQCBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9t
YXBfZ2VtX25ld19kbWFidWYoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgc2l6ZV90IHNpemUsCiAJ
CX0KIAogCQlvbWFwX29iai0+cGFnZXMgPSBwYWdlczsKLQkJcmV0ID0gZHJtX3ByaW1lX3NnX3Rv
X3BhZ2VfYWRkcl9hcnJheXMoc2d0LCBwYWdlcywgTlVMTCwKLQkJCQkJCSAgICAgICBucGFnZXMp
OworCQlyZXQgPSBkcm1fcHJpbWVfc2dfdG9fcGFnZV9hcnJheShzZ3QsIHBhZ2VzLCBucGFnZXMp
OwogCQlpZiAocmV0KSB7CiAJCQlvbWFwX2dlbV9mcmVlX29iamVjdChvYmopOwogCQkJb2JqID0g
RVJSX1BUUigtRU5PTUVNKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFk
ZW9uX3R0bS5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMKaW5kZXggNWQw
MGIzZGZmMzg4Li44NTZkMDI5NmVjMzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRl
b24vcmFkZW9uX3R0bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5j
CkBAIC00MDEsOCArNDAxLDggQEAgc3RhdGljIGludCByYWRlb25fdHRtX3R0X3Bpbl91c2VycHRy
KHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LCBzdHJ1Y3QgdHRtX3R0ICoKIAlpZiAocikKIAkJ
Z290byByZWxlYXNlX3NnOwogCi0JZHJtX3ByaW1lX3NnX3RvX3BhZ2VfYWRkcl9hcnJheXModHRt
LT5zZywgTlVMTCwgZ3R0LT50dG0uZG1hX2FkZHJlc3MsCi0JCQkJCSB0dG0tPm51bV9wYWdlcyk7
CisJZHJtX3ByaW1lX3NnX3RvX2RtYV9hZGRyX2FycmF5KHR0bS0+c2csIGd0dC0+dHRtLmRtYV9h
ZGRyZXNzLAorCQkJCSAgICAgICB0dG0tPm51bV9wYWdlcyk7CiAKIAlyZXR1cm4gMDsKIApAQCAt
NTgwLDkgKzU4MCw4IEBAIHN0YXRpYyBpbnQgcmFkZW9uX3R0bV90dF9wb3B1bGF0ZShzdHJ1Y3Qg
dHRtX2JvX2RldmljZSAqYmRldiwKIAl9CiAKIAlpZiAoc2xhdmUgJiYgdHRtLT5zZykgewotCQlk
cm1fcHJpbWVfc2dfdG9fcGFnZV9hZGRyX2FycmF5cyh0dG0tPnNnLCBOVUxMLAotCQkJCQkJIGd0
dC0+dHRtLmRtYV9hZGRyZXNzLAotCQkJCQkJIHR0bS0+bnVtX3BhZ2VzKTsKKwkJZHJtX3ByaW1l
X3NnX3RvX2RtYV9hZGRyX2FycmF5KHR0bS0+c2csIGd0dC0+dHRtLmRtYV9hZGRyZXNzLAorCQkJ
CQkgICAgICAgdHRtLT5udW1fcGFnZXMpOwogCQlyZXR1cm4gMDsKIAl9CiAKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS92Z2VtL3ZnZW1fZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vdmdlbS92
Z2VtX2Rydi5jCmluZGV4IGY4NjM1Y2NhZjlhMS4uYTBlNzVmMWQ1ZDAxIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vdmdlbS92Z2VtX2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92Z2Vt
L3ZnZW1fZHJ2LmMKQEAgLTM1Niw4ICszNTYsNyBAQCBzdGF0aWMgc3RydWN0IGRybV9nZW1fb2Jq
ZWN0ICp2Z2VtX3ByaW1lX2ltcG9ydF9zZ190YWJsZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAog
CX0KIAogCW9iai0+cGFnZXNfcGluX2NvdW50Kys7IC8qIHBlcm1hLXBpbm5lZCAqLwotCWRybV9w
cmltZV9zZ190b19wYWdlX2FkZHJfYXJyYXlzKG9iai0+dGFibGUsIG9iai0+cGFnZXMsIE5VTEws
Ci0JCQkJCW5wYWdlcyk7CisJZHJtX3ByaW1lX3NnX3RvX3BhZ2VfYXJyYXkob2JqLT50YWJsZSwg
b2JqLT5wYWdlcywgbnBhZ2VzKTsKIAlyZXR1cm4gJm9iai0+YmFzZTsKIH0KIApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL3hlbi94ZW5fZHJtX2Zyb250X2dlbS5jIGIvZHJpdmVycy9ncHUv
ZHJtL3hlbi94ZW5fZHJtX2Zyb250X2dlbS5jCmluZGV4IDc0ZGI1YTg0MGJlZC4uYjI5M2M2NzIz
MGVmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0veGVuL3hlbl9kcm1fZnJvbnRfZ2VtLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL3hlbi94ZW5fZHJtX2Zyb250X2dlbS5jCkBAIC0yMjAsOCAr
MjIwLDggQEAgeGVuX2RybV9mcm9udF9nZW1faW1wb3J0X3NnX3RhYmxlKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsCiAKIAl4ZW5fb2JqLT5zZ3RfaW1wb3J0ZWQgPSBzZ3Q7CiAKLQlyZXQgPSBkcm1f
cHJpbWVfc2dfdG9fcGFnZV9hZGRyX2FycmF5cyhzZ3QsIHhlbl9vYmotPnBhZ2VzLAotCQkJCQkg
ICAgICAgTlVMTCwgeGVuX29iai0+bnVtX3BhZ2VzKTsKKwlyZXQgPSBkcm1fcHJpbWVfc2dfdG9f
cGFnZV9hcnJheShzZ3QsIHhlbl9vYmotPnBhZ2VzLAorCQkJCQkgeGVuX29iai0+bnVtX3BhZ2Vz
KTsKIAlpZiAocmV0IDwgMCkKIAkJcmV0dXJuIEVSUl9QVFIocmV0KTsKIApkaWZmIC0tZ2l0IGEv
aW5jbHVkZS9kcm0vZHJtX3ByaW1lLmggYi9pbmNsdWRlL2RybS9kcm1fcHJpbWUuaAppbmRleCAw
OTkxYTQ3YTE1NjcuLjU0ZjJjNTgzMDVkMiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX3By
aW1lLmgKKysrIGIvaW5jbHVkZS9kcm0vZHJtX3ByaW1lLmgKQEAgLTEwNSw4ICsxMDUsOSBAQCBz
dHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmRybV9nZW1fcHJpbWVfaW1wb3J0KHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsCiAKIHZvaWQgZHJtX3ByaW1lX2dlbV9kZXN0cm95KHN0cnVjdCBkcm1fZ2VtX29i
amVjdCAqb2JqLCBzdHJ1Y3Qgc2dfdGFibGUgKnNnKTsKIAotaW50IGRybV9wcmltZV9zZ190b19w
YWdlX2FkZHJfYXJyYXlzKHN0cnVjdCBzZ190YWJsZSAqc2d0LCBzdHJ1Y3QgcGFnZSAqKnBhZ2Vz
LAotCQkJCSAgICAgZG1hX2FkZHJfdCAqYWRkcnMsIGludCBtYXhfcGFnZXMpOwotCitpbnQgZHJt
X3ByaW1lX3NnX3RvX3BhZ2VfYXJyYXkoc3RydWN0IHNnX3RhYmxlICpzZ3QsIHN0cnVjdCBwYWdl
ICoqcGFnZXMsCisJCQkgICAgICAgaW50IG1heF9wYWdlcyk7CitpbnQgZHJtX3ByaW1lX3NnX3Rv
X2RtYV9hZGRyX2FycmF5KHN0cnVjdCBzZ190YWJsZSAqc2d0LCBkbWFfYWRkcl90ICphZGRycywK
KwkJCQkgICBpbnQgbWF4X3BhZ2VzKTsKIAogI2VuZGlmIC8qIF9fRFJNX1BSSU1FX0hfXyAqLwot
LSAKMi4yNS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcK
aHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
