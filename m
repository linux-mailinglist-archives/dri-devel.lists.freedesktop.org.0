Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 19C5817363E
	for <lists+dri-devel@lfdr.de>; Fri, 28 Feb 2020 12:41:29 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 558E46E167;
	Fri, 28 Feb 2020 11:41:24 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from us-smtp-1.mimecast.com (us-smtp-delivery-1.mimecast.com
 [205.139.110.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 233616E167
 for <dri-devel@lists.freedesktop.org>; Fri, 28 Feb 2020 11:41:23 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1582890081;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=PQ6YE3J+SWkZkUcMVcHwLBYJzaxJi0rm45haNUMOGis=;
 b=OVjS+2uH6PvNNoiFYJsJR3ugP58XbToLR+VCSqjpPpE+J3JouIOEOD6ztr2MtzTEbJyDLg
 DHPQEa+LE3Dgjc5semvOCuAGYp4rviHo1PUOh0uhzbxU0uor1WQhxF0bNI64Ew1YUL7wFD
 lvs+rruLIe/zWs5DYKoeS5LZApvOZDs=
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-156-8BW-4Vi1NG-pLfxnxGHs4Q-1; Fri, 28 Feb 2020 06:41:17 -0500
X-MC-Unique: 8BW-4Vi1NG-pLfxnxGHs4Q-1
Received: from smtp.corp.redhat.com (int-mx01.intmail.prod.int.phx2.redhat.com
 [10.5.11.11])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id BEFA1107ACC7;
 Fri, 28 Feb 2020 11:41:15 +0000 (UTC)
Received: from shalem.localdomain.com (ovpn-117-193.ams2.redhat.com
 [10.36.117.193])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 5CCE51CB;
 Fri, 28 Feb 2020 11:41:14 +0000 (UTC)
From: Hans de Goede <hdegoede@redhat.com>
To: Jani Nikula <jani.nikula@linux.intel.com>,
 Joonas Lahtinen <joonas.lahtinen@linux.intel.com>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>,
 =?UTF-8?q?Ville=20Syrj=C3=A4l=C3=A4?= <ville.syrjala@linux.intel.com>
Subject: [PATCH resend 1/2] drm/i915/dsi: Remove readback of panel orientation
 on BYT / CHT
Date: Fri, 28 Feb 2020 12:41:09 +0100
Message-Id: <20200228114110.187792-2-hdegoede@redhat.com>
In-Reply-To: <20200228114110.187792-1-hdegoede@redhat.com>
References: <20200228114110.187792-1-hdegoede@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.11
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hans de Goede <hdegoede@redhat.com>,
 intel-gfx <intel-gfx@lists.freedesktop.org>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q29tbWl0IDgyZGFjYTI5NzUwNiAoImRybS9pOTE1OiBBZGQgInBhbmVsIG9yaWVudGF0aW9uIiBw
cm9wZXJ0eSB0byB0aGUKcGFuZWwgY29ubmVjdG9yLCB2Ni4iKSB1c2VzIGhhcmR3YXJlIHN0YXRl
IHJlYWRiYWNrIHRvIGRldGVybWluZSBpZiB0aGUKR09QIGlzIHJvdGF0aW5nIHRoZSBpbWFnZSBi
eSAxODAgZGVncmVlcyB0byBjb21wZW5zYXRlIGZvciB1cHNpZGUtZG93bgptb3VudGVkIHBhbmVs
cy4KCldoZW4gSSB3cm90ZSB0aGF0IGNvbW1pdCBJIHRyaWVkIHRvIGZpbmQgdGhlIFZCVCBiaXRz
IHRoZSBHT1AgdXNlZCB0bwpkZWNpZGUgdG8gcm90YXRlIHRoZSBpbWFnZSwgYnV0IEkgY291bGQg
bm90IGZpbmQgdGhlbS4gQmFjayB0aGVuIEkgb25seQpsb29rZWQgYXQgdGhlIHJvdGF0aW9uIGJp
dHMgaW4gc3RydWN0IG1pcGlfY29uZmlnIGFuZCB0aGVzZSByZWFkIDAgb24KdGhlIDEgQllUIGRl
dmljZSBJIGhhdmUgd2l0aCBhbiB1cHNpZGUtZG93biBtb3VudGVkIHBhbmVsCihhIEdQLWVsZWN0
cm9uaWMgVDcwMSB0YWJsZXQpLiBXaGlsZSB3b3JraW5nIG9uIGEgc2ltaWxhciBwcm9ibGVtIG9u
IGEKQllUIGRldmljZSB3aXRoIGFuIGVEUCBwYW5lbCBJIG5vdGljZWQgdGhhdCB0aGUgbmV3Cmlu
dGVsX2RzaV9nZXRfcGFuZWxfb3JpZW50YXRpb24oKSBoZWxwZXIgd2hpY2ggZ2V0cyB1c2VkIG9u
IG5ld2VyClNvQ3MgKEFwb2xsby1MYWtlLCBldGMuKSBjaGVja3MgdGhlIHJvdGF0ZV8xODAgYml0
IGluIHRoZQpCREJfR0VORVJBTF9GRUFUVVJFUyBWQlQgYmxvY2suCgpJJ3ZlIGNoZWNrZWQgYW5k
IHRoaXMgYml0IGluZGVlZCBpcyBzZXQgb24gdGhlIEdQLWVsZWN0cm9uaWMgVDcwMSB0YWJsZXQs
CnNvIHVzaW5nIHRoZSBnZW5lcmljIGludGVsX2RzaV9nZXRfcGFuZWxfb3JpZW50YXRpb24oKSBo
ZWxwZXIgdGhlcmUgZG9lcwp0aGUgcmlnaHQgdGhpbmcgd2l0aG91dCBuZWVkaW5nIGFueSBleHRy
YSByZWFkYmFjayBvZiBodyBzdGF0ZS4KClRoaXMgY29tbWl0IHJlbW92ZXMgdGhlIHNwZWNpYWwg
aGFuZGxpbmcgb2YgdGhlIHBhbmVsIG9yaWVudGF0aW9uIGZvcgpEU0kgcGFuZWxzIG9uIEJZVC9D
SFQgZGV2aWNlcywgYnJpbmdpbmcgdGhlIGhhbmRsaW5nIGluIGxpbmUgd2l0aCB0aGUKaGFuZGxp
bmcgb2YgRFNJIHBhbmVscyBvbiBvdGhlciBkZXZpY2VzLgoKUmV2aWV3ZWQtYnk6IFZpbGxlIFN5
cmrDpGzDpCA8dmlsbGUuc3lyamFsYUBsaW51eC5pbnRlbC5jb20+ClNpZ25lZC1vZmYtYnk6IEhh
bnMgZGUgR29lZGUgPGhkZWdvZWRlQHJlZGhhdC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5
MTUvZGlzcGxheS92bHZfZHNpLmMgfCA1NSArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogMSBm
aWxlIGNoYW5nZWQsIDEgaW5zZXJ0aW9uKCspLCA1NCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L3Zsdl9kc2kuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvdmx2X2RzaS5jCmluZGV4IGQwN2NmYWQ4Y2U2Zi4uZjRjMzYyZGM2ZTE1
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L3Zsdl9kc2kuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L3Zsdl9kc2kuYwpAQCAtMTU5MSw1OSArMTU5
MSw2IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9mdW5jcyBpbnRlbF9kc2lf
Y29ubmVjdG9yX2Z1bmNzID0gewogCS5hdG9taWNfZHVwbGljYXRlX3N0YXRlID0gaW50ZWxfZGln
aXRhbF9jb25uZWN0b3JfZHVwbGljYXRlX3N0YXRlLAogfTsKIAotc3RhdGljIGVudW0gZHJtX3Bh
bmVsX29yaWVudGF0aW9uCi12bHZfZHNpX2dldF9od19wYW5lbF9vcmllbnRhdGlvbihzdHJ1Y3Qg
aW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IpCi17Ci0Jc3RydWN0IGRybV9pOTE1X3ByaXZhdGUg
KmRldl9wcml2ID0gdG9faTkxNShjb25uZWN0b3ItPmJhc2UuZGV2KTsKLQlzdHJ1Y3QgaW50ZWxf
ZW5jb2RlciAqZW5jb2RlciA9IGludGVsX2F0dGFjaGVkX2VuY29kZXIoY29ubmVjdG9yKTsKLQll
bnVtIGludGVsX2Rpc3BsYXlfcG93ZXJfZG9tYWluIHBvd2VyX2RvbWFpbjsKLQllbnVtIGRybV9w
YW5lbF9vcmllbnRhdGlvbiBvcmllbnRhdGlvbjsKLQlzdHJ1Y3QgaW50ZWxfcGxhbmUgKnBsYW5l
OwotCXN0cnVjdCBpbnRlbF9jcnRjICpjcnRjOwotCWludGVsX3dha2VyZWZfdCB3YWtlcmVmOwot
CWVudW0gcGlwZSBwaXBlOwotCXUzMiB2YWw7Ci0KLQlpZiAoIWVuY29kZXItPmdldF9od19zdGF0
ZShlbmNvZGVyLCAmcGlwZSkpCi0JCXJldHVybiBEUk1fTU9ERV9QQU5FTF9PUklFTlRBVElPTl9V
TktOT1dOOwotCi0JY3J0YyA9IGludGVsX2dldF9jcnRjX2Zvcl9waXBlKGRldl9wcml2LCBwaXBl
KTsKLQlwbGFuZSA9IHRvX2ludGVsX3BsYW5lKGNydGMtPmJhc2UucHJpbWFyeSk7Ci0KLQlwb3dl
cl9kb21haW4gPSBQT1dFUl9ET01BSU5fUElQRShwaXBlKTsKLQl3YWtlcmVmID0gaW50ZWxfZGlz
cGxheV9wb3dlcl9nZXRfaWZfZW5hYmxlZChkZXZfcHJpdiwgcG93ZXJfZG9tYWluKTsKLQlpZiAo
IXdha2VyZWYpCi0JCXJldHVybiBEUk1fTU9ERV9QQU5FTF9PUklFTlRBVElPTl9VTktOT1dOOwot
Ci0JdmFsID0gaW50ZWxfZGVfcmVhZChkZXZfcHJpdiwgRFNQQ05UUihwbGFuZS0+aTl4eF9wbGFu
ZSkpOwotCi0JaWYgKCEodmFsICYgRElTUExBWV9QTEFORV9FTkFCTEUpKQotCQlvcmllbnRhdGlv
biA9IERSTV9NT0RFX1BBTkVMX09SSUVOVEFUSU9OX1VOS05PV047Ci0JZWxzZSBpZiAodmFsICYg
RElTUFBMQU5FX1JPVEFURV8xODApCi0JCW9yaWVudGF0aW9uID0gRFJNX01PREVfUEFORUxfT1JJ
RU5UQVRJT05fQk9UVE9NX1VQOwotCWVsc2UKLQkJb3JpZW50YXRpb24gPSBEUk1fTU9ERV9QQU5F
TF9PUklFTlRBVElPTl9OT1JNQUw7Ci0KLQlpbnRlbF9kaXNwbGF5X3Bvd2VyX3B1dChkZXZfcHJp
diwgcG93ZXJfZG9tYWluLCB3YWtlcmVmKTsKLQotCXJldHVybiBvcmllbnRhdGlvbjsKLX0KLQot
c3RhdGljIGVudW0gZHJtX3BhbmVsX29yaWVudGF0aW9uCi12bHZfZHNpX2dldF9wYW5lbF9vcmll
bnRhdGlvbihzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IpCi17Ci0Jc3RydWN0IGRy
bV9pOTE1X3ByaXZhdGUgKmRldl9wcml2ID0gdG9faTkxNShjb25uZWN0b3ItPmJhc2UuZGV2KTsK
LQllbnVtIGRybV9wYW5lbF9vcmllbnRhdGlvbiBvcmllbnRhdGlvbjsKLQotCWlmIChJU19WQUxM
RVlWSUVXKGRldl9wcml2KSB8fCBJU19DSEVSUllWSUVXKGRldl9wcml2KSkgewotCQlvcmllbnRh
dGlvbiA9IHZsdl9kc2lfZ2V0X2h3X3BhbmVsX29yaWVudGF0aW9uKGNvbm5lY3Rvcik7Ci0JCWlm
IChvcmllbnRhdGlvbiAhPSBEUk1fTU9ERV9QQU5FTF9PUklFTlRBVElPTl9VTktOT1dOKQotCQkJ
cmV0dXJuIG9yaWVudGF0aW9uOwotCX0KLQotCXJldHVybiBpbnRlbF9kc2lfZ2V0X3BhbmVsX29y
aWVudGF0aW9uKGNvbm5lY3Rvcik7Ci19Ci0KIHN0YXRpYyB2b2lkIHZsdl9kc2lfYWRkX3Byb3Bl
cnRpZXMoc3RydWN0IGludGVsX2Nvbm5lY3RvciAqY29ubmVjdG9yKQogewogCXN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICpkZXZfcHJpdiA9IHRvX2k5MTUoY29ubmVjdG9yLT5iYXNlLmRldik7CkBA
IC0xNjYyLDcgKzE2MDksNyBAQCBzdGF0aWMgdm9pZCB2bHZfZHNpX2FkZF9wcm9wZXJ0aWVzKHN0
cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKIAogCQlkcm1fY29ubmVjdG9yX3NldF9w
YW5lbF9vcmllbnRhdGlvbl93aXRoX3F1aXJrKAogCQkJCSZjb25uZWN0b3ItPmJhc2UsCi0JCQkJ
dmx2X2RzaV9nZXRfcGFuZWxfb3JpZW50YXRpb24oY29ubmVjdG9yKSwKKwkJCQlpbnRlbF9kc2lf
Z2V0X3BhbmVsX29yaWVudGF0aW9uKGNvbm5lY3RvciksCiAJCQkJY29ubmVjdG9yLT5wYW5lbC5m
aXhlZF9tb2RlLT5oZGlzcGxheSwKIAkJCQljb25uZWN0b3ItPnBhbmVsLmZpeGVkX21vZGUtPnZk
aXNwbGF5KTsKIAl9Ci0tIAoyLjI0LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL2RyaS1kZXZlbAo=
