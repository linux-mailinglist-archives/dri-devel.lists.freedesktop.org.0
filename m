Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9D65D10007D
	for <lists+dri-devel@lfdr.de>; Mon, 18 Nov 2019 09:37:26 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 752FD6E0EC;
	Mon, 18 Nov 2019 08:37:13 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from onstation.org (onstation.org [52.200.56.107])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EEF2A6E44B;
 Sun, 17 Nov 2019 11:48:40 +0000 (UTC)
Received: from localhost.localdomain (c-98-239-145-235.hsd1.wv.comcast.net
 [98.239.145.235])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: masneyb)
 by onstation.org (Postfix) with ESMTPSA id 0D0183F252;
 Sun, 17 Nov 2019 11:48:40 +0000 (UTC)
From: Brian Masney <masneyb@onstation.org>
To: robdclark@gmail.com,
	sean@poorly.run,
	robh+dt@kernel.org
Subject: [PATCH 2/4] drm/msm/gpu: add support for ocmem interconnect path
Date: Sun, 17 Nov 2019 06:48:23 -0500
Message-Id: <20191117114825.13541-3-masneyb@onstation.org>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191117114825.13541-1-masneyb@onstation.org>
References: <20191117114825.13541-1-masneyb@onstation.org>
MIME-Version: 1.0
X-Mailman-Approved-At: Mon, 18 Nov 2019 08:36:58 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=onstation.org; s=default; t=1573991320;
 bh=Ps11L1huhdufwEObnE5u3q2EQ5i1pa0Gu/TdDVAo1bA=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=J4AKBDzsvxJfYViOAevEfCHNoL4bHydUuZXIAsr05WFpzp4FYD6zDFuza3OW6aujR
 2OsJNOe7897+TaSMJKOwxuClmAwG628bWK5gWeyshtwiZ1lb1rTa2qlfIN4WB6Kal/
 FALjo8QTUnPajjzItfpnBu210dkfkGAgGvr21bHA=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: mark.rutland@arm.com, devicetree@vger.kernel.org, airlied@linux.ie,
 linux-arm-msm@vger.kernel.org, dianders@chromium.org,
 dri-devel@lists.freedesktop.org, linux-kernel@vger.kernel.org,
 freedreno@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U29tZSBBM3h4IGFuZCBhbGwgQTR4eCBBZHJlbm8gR1BVcyBkbyBub3QgaGF2ZSBHTUVNIGluc2lk
ZSB0aGUgR1BVIGNvcmUKYW5kIG11c3QgdXNlIHRoZSBPbiBDaGlwIE1FTW9yeSAoT0NNRU0pIGlu
IG9yZGVyIHRvIGJlIGZ1bmN0aW9uYWwuClRoZXJlJ3MgYSBzZXBhcmF0ZSBpbnRlcmNvbm5lY3Qg
cGF0aCB0aGF0IG5lZWRzIHRvIGJlIHNldHVwIHRvIE9DTUVNLgpBZGQgc3VwcG9ydCBmb3IgdGhp
cyBzZWNvbmQgcGF0aCB0byB0aGUgR1BVIGNvcmUuCgpJbiB0aGUgZG93bnN0cmVhbSBNU00gMy40
IHNvdXJjZXMsIHRoZSB0d28gaW50ZXJjb25uZWN0IHBhdGhzIGZvciB0aGUKR1BVIGFyZSBiZXR3
ZWVuOgoKICAtIE1TTV9CVVNfTUFTVEVSX0dSQVBISUNTXzNEIGFuZCBNU01fQlVTX1NMQVZFX0VC
SV9DSDAKICAtIE1TTV9CVVNfTUFTVEVSX1ZfT0NNRU1fR0ZYM0QgYW5kIE1TTV9CVVNfU0xBVkVf
T0NNRU0KClNpZ25lZC1vZmYtYnk6IEJyaWFuIE1hc25leSA8bWFzbmV5YkBvbnN0YXRpb24ub3Jn
PgotLS0KIGRyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E2eHhfZ211LmMgICB8ICA2ICsrKy0t
LQogZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2dwdS5jIHwgMjAgKysrKysrKysr
KysrKysrKy0tLS0KIGRyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2dwdS5oICAgICAgICAgICB8ICAz
ICsrLQogMyBmaWxlcyBjaGFuZ2VkLCAyMSBpbnNlcnRpb25zKCspLCA4IGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E2eHhfZ211LmMgYi9kcml2
ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNnh4X2dtdS5jCmluZGV4IDg1ZjE0ZmVhZmRlYy4uNzg4
NWUzODJmYjhmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hNnh4X2dt
dS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2E2eHhfZ211LmMKQEAgLTEzMiw3
ICsxMzIsNyBAQCBzdGF0aWMgdm9pZCBfX2E2eHhfZ211X3NldF9mcmVxKHN0cnVjdCBhNnh4X2dt
dSAqZ211LCBpbnQgaW5kZXgpCiAJICogRXZlbnR1YWxseSB3ZSB3aWxsIHdhbnQgdG8gc2NhbGUg
dGhlIHBhdGggdm90ZSB3aXRoIHRoZSBmcmVxdWVuY3kgYnV0CiAJICogZm9yIG5vdyBsZWF2ZSBp
dCBhdCBtYXggc28gdGhhdCB0aGUgcGVyZm9ybWFuY2UgaXMgbm9taW5hbC4KIAkgKi8KLQlpY2Nf
c2V0X2J3KGdwdS0+aWNjX3BhdGgsIDAsIE1CcHNfdG9faWNjKDcyMTYpKTsKKwlpY2Nfc2V0X2J3
KGdwdS0+Z2Z4X21lbV9pY2NfcGF0aCwgMCwgTUJwc190b19pY2MoNzIxNikpOwogfQogCiB2b2lk
IGE2eHhfZ211X3NldF9mcmVxKHN0cnVjdCBtc21fZ3B1ICpncHUsIHVuc2lnbmVkIGxvbmcgZnJl
cSkKQEAgLTcxNCw3ICs3MTQsNyBAQCBpbnQgYTZ4eF9nbXVfcmVzdW1lKHN0cnVjdCBhNnh4X2dw
dSAqYTZ4eF9ncHUpCiAJfQogCiAJLyogU2V0IHRoZSBidXMgcXVvdGEgdG8gYSByZWFzb25hYmxl
IHZhbHVlIGZvciBib290ICovCi0JaWNjX3NldF9idyhncHUtPmljY19wYXRoLCAwLCBNQnBzX3Rv
X2ljYygzMDcyKSk7CisJaWNjX3NldF9idyhncHUtPmdmeF9tZW1faWNjX3BhdGgsIDAsIE1CcHNf
dG9faWNjKDMwNzIpKTsKIAogCS8qIEVuYWJsZSB0aGUgR01VIGludGVycnVwdCAqLwogCWdtdV93
cml0ZShnbXUsIFJFR19BNlhYX0dNVV9BT19IT1NUX0lOVEVSUlVQVF9DTFIsIH4wKTsKQEAgLTg1
OCw3ICs4NTgsNyBAQCBpbnQgYTZ4eF9nbXVfc3RvcChzdHJ1Y3QgYTZ4eF9ncHUgKmE2eHhfZ3B1
KQogCQlhNnh4X2dtdV9zaHV0ZG93bihnbXUpOwogCiAJLyogUmVtb3ZlIHRoZSBidXMgdm90ZSAq
LwotCWljY19zZXRfYncoZ3B1LT5pY2NfcGF0aCwgMCwgMCk7CisJaWNjX3NldF9idyhncHUtPmdm
eF9tZW1faWNjX3BhdGgsIDAsIDApOwogCiAJLyoKIAkgKiBNYWtlIHN1cmUgdGhlIEdYIGRvbWFp
biBpcyBvZmYgYmVmb3JlIHR1cm5pbmcgb2ZmIHRoZSBHTVUgKENYKQpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2dwdS5jIGIvZHJpdmVycy9ncHUvZHJtL21z
bS9hZHJlbm8vYWRyZW5vX2dwdS5jCmluZGV4IDA3ODNlNGI1NDg2YS4uZDFjYzAyMWMwMTJjIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2FkcmVuby9hZHJlbm9fZ3B1LmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL21zbS9hZHJlbm8vYWRyZW5vX2dwdS5jCkBAIC04ODcsOSArODg3LDIw
IEBAIHN0YXRpYyBpbnQgYWRyZW5vX2dldF9wd3JsZXZlbHMoc3RydWN0IGRldmljZSAqZGV2LAog
CURCRygiZmFzdF9yYXRlPSV1LCBzbG93X3JhdGU9MjcwMDAwMDAiLCBncHUtPmZhc3RfcmF0ZSk7
CiAKIAkvKiBDaGVjayBmb3IgYW4gaW50ZXJjb25uZWN0IHBhdGggZm9yIHRoZSBidXMgKi8KLQln
cHUtPmljY19wYXRoID0gb2ZfaWNjX2dldChkZXYsIE5VTEwpOwotCWlmIChJU19FUlIoZ3B1LT5p
Y2NfcGF0aCkpCi0JCWdwdS0+aWNjX3BhdGggPSBOVUxMOworCWdwdS0+Z2Z4X21lbV9pY2NfcGF0
aCA9IG9mX2ljY19nZXQoZGV2LCAiZ2Z4LW1lbSIpOworCWlmICghZ3B1LT5nZnhfbWVtX2ljY19w
YXRoKSB7CisJCS8qCisJCSAqIEtlZXAgY29tcGF0YmlsaXR5IHdpdGggZGV2aWNlIHRyZWVzIHRo
YXQgZG9uJ3QgaGF2ZSBhbgorCQkgKiBpbnRlcmNvbm5lY3QtbmFtZXMgcHJvcGVydHkuCisJCSAq
LworCQlncHUtPmdmeF9tZW1faWNjX3BhdGggPSBvZl9pY2NfZ2V0KGRldiwgTlVMTCk7CisJfQor
CWlmIChJU19FUlIoZ3B1LT5nZnhfbWVtX2ljY19wYXRoKSkKKwkJZ3B1LT5nZnhfbWVtX2ljY19w
YXRoID0gTlVMTDsKKworCWdwdS0+b2NtZW1faWNjX3BhdGggPSBvZl9pY2NfZ2V0KGRldiwgIm9j
bWVtIik7CisJaWYgKElTX0VSUihncHUtPm9jbWVtX2ljY19wYXRoKSkKKwkJZ3B1LT5vY21lbV9p
Y2NfcGF0aCA9IE5VTEw7CiAKIAlyZXR1cm4gMDsKIH0KQEAgLTk3Niw3ICs5ODcsOCBAQCB2b2lk
IGFkcmVub19ncHVfY2xlYW51cChzdHJ1Y3QgYWRyZW5vX2dwdSAqYWRyZW5vX2dwdSkKIAlmb3Ig
KGkgPSAwOyBpIDwgQVJSQVlfU0laRShhZHJlbm9fZ3B1LT5pbmZvLT5mdyk7IGkrKykKIAkJcmVs
ZWFzZV9maXJtd2FyZShhZHJlbm9fZ3B1LT5md1tpXSk7CiAKLQlpY2NfcHV0KGdwdS0+aWNjX3Bh
dGgpOworCWljY19wdXQoZ3B1LT5nZnhfbWVtX2ljY19wYXRoKTsKKwlpY2NfcHV0KGdwdS0+b2Nt
ZW1faWNjX3BhdGgpOwogCiAJbXNtX2dwdV9jbGVhbnVwKCZhZHJlbm9fZ3B1LT5iYXNlKTsKIH0K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2dwdS5oIGIvZHJpdmVycy9ncHUv
ZHJtL21zbS9tc21fZ3B1LmgKaW5kZXggYWI4ZjBmOWM5ZGM4Li5lNzJlNTZmN2IwZWYgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2dwdS5oCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9tc20vbXNtX2dwdS5oCkBAIC0xMTEsNyArMTExLDggQEAgc3RydWN0IG1zbV9ncHUgewogCXN0
cnVjdCBjbGsgKmViaTFfY2xrLCAqY29yZV9jbGssICpyYmJtdGltZXJfY2xrOwogCXVpbnQzMl90
IGZhc3RfcmF0ZTsKIAotCXN0cnVjdCBpY2NfcGF0aCAqaWNjX3BhdGg7CisJc3RydWN0IGljY19w
YXRoICpnZnhfbWVtX2ljY19wYXRoOworCXN0cnVjdCBpY2NfcGF0aCAqb2NtZW1faWNjX3BhdGg7
CiAKIAkvKiBIYW5nIGFuZCBJbmFjdGl2aXR5IERldGVjdGlvbjoKIAkgKi8KLS0gCjIuMjEuMAoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVs
IG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
