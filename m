Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0F6679D2B1
	for <lists+dri-devel@lfdr.de>; Mon, 26 Aug 2019 17:27:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B50986E237;
	Mon, 26 Aug 2019 15:27:36 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk [46.235.227.227])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EB8D76E229
 for <dri-devel@lists.freedesktop.org>; Mon, 26 Aug 2019 15:26:59 +0000 (UTC)
Received: from localhost.localdomain (unknown
 [IPv6:2a01:e0a:2c:6930:5cf4:84a1:2763:fe0d])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: bbrezillon)
 by bhuna.collabora.co.uk (Postfix) with ESMTPSA id 2D60728BDCE;
 Mon, 26 Aug 2019 16:26:58 +0100 (BST)
From: Boris Brezillon <boris.brezillon@collabora.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 07/21] drm/bridge: Rename bridge helpers targeting a bridge
 chain
Date: Mon, 26 Aug 2019 17:26:35 +0200
Message-Id: <20190826152649.13820-8-boris.brezillon@collabora.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190826152649.13820-1-boris.brezillon@collabora.com>
References: <20190826152649.13820-1-boris.brezillon@collabora.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Nikita Yushchenko <nikita.yoush@cogentembedded.com>,
 Jernej Skrabec <jernej.skrabec@siol.net>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 Andrey Smirnov <andrew.smirnov@gmail.com>, Jonas Karlman <jonas@kwiboo.se>,
 Seung-Woo Kim <sw0312.kim@samsung.com>,
 Kyungmin Park <kyungmin.park@samsung.com>,
 Thierry Reding <thierry.reding@gmail.com>, Chris Healy <Chris.Healy@zii.aero>,
 Boris Brezillon <boris.brezillon@collabora.com>, kernel@collabora.com,
 Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q2hhbmdlIHRoZSBwcmVmaXggb2YgYnJpZGdlIGhlbHBlcnMgdGFyZ2V0aW5nIGEgYnJpZGdlIGNo
YWluIGZyb20KZHJtX2JyaWRnZV8gdG8gZHJtX2JyaWRnZV9jaGFpbl8gdG8gYmV0dGVyIHJlZmxl
Y3QgdGhlIGZhY3QgdGhhdAp0aGUgb3BlcmF0aW9uIHdpbGwgaGFwcGVuIG9uIGFsbCBlbGVtZW50
cyBvZiBjaGFpbiwgc3RhcnRpbmcgYXQgdGhlCmJyaWRnZSBwYXNzZWQgaW4gYXJndW1lbnQuCgpT
aWduZWQtb2ZmLWJ5OiBCb3JpcyBCcmV6aWxsb24gPGJvcmlzLmJyZXppbGxvbkBjb2xsYWJvcmEu
Y29tPgotLS0KQ2hhbmdlcyBpbiB2MjoKKiBQYXNzIHRlIGJyaWRnZSwgbm90IHRoZSBlbmNvZGVy
LCBzbyB3ZSBjYW4gbGF0ZXIgYWN0IG9uIGEgc3ViLWNoYWluCiAgaW5zdGVhZCBvZiB0aGUgd2hv
bGUgY2hhaW4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19oZWxwZXIuYyB8ICAyMCAr
KystLQogZHJpdmVycy9ncHUvZHJtL2RybV9icmlkZ2UuYyAgICAgICAgfCAxMjUgKysrKysrKysr
KysrKystLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2RybV9jcnRjX2hlbHBlci5jICAg
fCAgMjggKysrLS0tLQogZHJpdmVycy9ncHUvZHJtL2RybV9wcm9iZV9oZWxwZXIuYyAgfCAgIDIg
Ky0KIGRyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfaGRtaS5jIHwgICA0ICstCiBpbmNsdWRl
L2RybS9kcm1fYnJpZGdlLmggICAgICAgICAgICB8ICA2NCArKysrKysrLS0tLS0tLQogNiBmaWxl
cyBjaGFuZ2VkLCAxMjYgaW5zZXJ0aW9ucygrKSwgMTE3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX2hlbHBlci5jIGIvZHJpdmVycy9ncHUvZHJt
L2RybV9hdG9taWNfaGVscGVyLmMKaW5kZXggM2ZlNjAwNzZkYTA1Li5jY2NkOWUzNTMxYzEgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX2hlbHBlci5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9kcm1fYXRvbWljX2hlbHBlci5jCkBAIC00NDUsOSArNDQ1LDkgQEAgbW9kZV9m
aXh1cChzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCiAJCWVuY29kZXIgPSBuZXdfY29u
bl9zdGF0ZS0+YmVzdF9lbmNvZGVyOwogCQlmdW5jcyA9IGVuY29kZXItPmhlbHBlcl9wcml2YXRl
OwogCi0JCXJldCA9IGRybV9icmlkZ2VfbW9kZV9maXh1cCgmZW5jb2Rlci0+YnJpZGdlLAotCQkJ
CQkgICAgJm5ld19jcnRjX3N0YXRlLT5tb2RlLAotCQkJCQkgICAgJm5ld19jcnRjX3N0YXRlLT5h
ZGp1c3RlZF9tb2RlKTsKKwkJcmV0ID0gZHJtX2JyaWRnZV9jaGFpbl9tb2RlX2ZpeHVwKCZlbmNv
ZGVyLT5icmlkZ2UsCisJCQkJCSZuZXdfY3J0Y19zdGF0ZS0+bW9kZSwKKwkJCQkJJm5ld19jcnRj
X3N0YXRlLT5hZGp1c3RlZF9tb2RlKTsKIAkJaWYgKCFyZXQpIHsKIAkJCURSTV9ERUJVR19BVE9N
SUMoIkJyaWRnZSBmaXh1cCBmYWlsZWRcbiIpOwogCQkJcmV0dXJuIC1FSU5WQUw7CkBAIC01MTIs
NyArNTEyLDcgQEAgc3RhdGljIGVudW0gZHJtX21vZGVfc3RhdHVzIG1vZGVfdmFsaWRfcGF0aChz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQlyZXR1cm4gcmV0OwogCX0KIAotCXJl
dCA9IGRybV9icmlkZ2VfbW9kZV92YWxpZCgmZW5jb2Rlci0+YnJpZGdlLCBtb2RlKTsKKwlyZXQg
PSBkcm1fYnJpZGdlX2NoYWluX21vZGVfdmFsaWQoJmVuY29kZXItPmJyaWRnZSwgbW9kZSk7CiAJ
aWYgKHJldCAhPSBNT0RFX09LKSB7CiAJCURSTV9ERUJVR19BVE9NSUMoIltCUklER0VdIG1vZGVf
dmFsaWQoKSBmYWlsZWRcbiIpOwogCQlyZXR1cm4gcmV0OwpAQCAtMTAzMSw3ICsxMDMxLDcgQEAg
ZGlzYWJsZV9vdXRwdXRzKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fYXRvbWlj
X3N0YXRlICpvbGRfc3RhdGUpCiAJCSAqIEVhY2ggZW5jb2RlciBoYXMgYXQgbW9zdCBvbmUgY29u
bmVjdG9yIChzaW5jZSB3ZSBhbHdheXMgc3RlYWwKIAkJICogaXQgYXdheSksIHNvIHdlIHdvbid0
IGNhbGwgZGlzYWJsZSBob29rcyB0d2ljZS4KIAkJICovCi0JCWRybV9hdG9taWNfYnJpZGdlX2Rp
c2FibGUoJmVuY29kZXItPmJyaWRnZSwgb2xkX3N0YXRlKTsKKwkJZHJtX2F0b21pY19icmlkZ2Vf
Y2hhaW5fZGlzYWJsZSgmZW5jb2Rlci0+YnJpZGdlLCBvbGRfc3RhdGUpOwogCiAJCS8qIFJpZ2h0
IGZ1bmN0aW9uIGRlcGVuZHMgdXBvbiB0YXJnZXQgc3RhdGUuICovCiAJCWlmIChmdW5jcykgewpA
QCAtMTA0NSw3ICsxMDQ1LDggQEAgZGlzYWJsZV9vdXRwdXRzKHN0cnVjdCBkcm1fZGV2aWNlICpk
ZXYsIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpCiAJCQkJZnVuY3MtPmRwbXMo
ZW5jb2RlciwgRFJNX01PREVfRFBNU19PRkYpOwogCQl9CiAKLQkJZHJtX2F0b21pY19icmlkZ2Vf
cG9zdF9kaXNhYmxlKCZlbmNvZGVyLT5icmlkZ2UsIG9sZF9zdGF0ZSk7CisJCWRybV9hdG9taWNf
YnJpZGdlX2NoYWluX3Bvc3RfZGlzYWJsZSgmZW5jb2Rlci0+YnJpZGdlLAorCQkJCQkJICAgICBv
bGRfc3RhdGUpOwogCX0KIAogCWZvcl9lYWNoX29sZG5ld19jcnRjX2luX3N0YXRlKG9sZF9zdGF0
ZSwgY3J0Yywgb2xkX2NydGNfc3RhdGUsIG5ld19jcnRjX3N0YXRlLCBpKSB7CkBAIC0xMjI2LDcg
KzEyMjcsOCBAQCBjcnRjX3NldF9tb2RlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBk
cm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpCiAJCQlmdW5jcy0+bW9kZV9zZXQoZW5jb2Rlciwg
bW9kZSwgYWRqdXN0ZWRfbW9kZSk7CiAJCX0KIAotCQlkcm1fYnJpZGdlX21vZGVfc2V0KCZlbmNv
ZGVyLT5icmlkZ2UsIG1vZGUsIGFkanVzdGVkX21vZGUpOworCQlkcm1fYnJpZGdlX2NoYWluX21v
ZGVfc2V0KCZlbmNvZGVyLT5icmlkZ2UsIG1vZGUsCisJCQkJCSAgYWRqdXN0ZWRfbW9kZSk7CiAJ
fQogfQogCkBAIC0xMzQzLDcgKzEzNDUsNyBAQCB2b2lkIGRybV9hdG9taWNfaGVscGVyX2NvbW1p
dF9tb2Rlc2V0X2VuYWJsZXMoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJICogRWFjaCBlbmNv
ZGVyIGhhcyBhdCBtb3N0IG9uZSBjb25uZWN0b3IgKHNpbmNlIHdlIGFsd2F5cyBzdGVhbAogCQkg
KiBpdCBhd2F5KSwgc28gd2Ugd29uJ3QgY2FsbCBlbmFibGUgaG9va3MgdHdpY2UuCiAJCSAqLwot
CQlkcm1fYXRvbWljX2JyaWRnZV9wcmVfZW5hYmxlKCZlbmNvZGVyLT5icmlkZ2UsIG9sZF9zdGF0
ZSk7CisJCWRybV9hdG9taWNfYnJpZGdlX2NoYWluX3ByZV9lbmFibGUoJmVuY29kZXItPmJyaWRn
ZSwgb2xkX3N0YXRlKTsKIAogCQlpZiAoZnVuY3MpIHsKIAkJCWlmIChmdW5jcy0+YXRvbWljX2Vu
YWJsZSkKQEAgLTEzNTQsNyArMTM1Niw3IEBAIHZvaWQgZHJtX2F0b21pY19oZWxwZXJfY29tbWl0
X21vZGVzZXRfZW5hYmxlcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCQkJCWZ1bmNzLT5jb21t
aXQoZW5jb2Rlcik7CiAJCX0KIAotCQlkcm1fYXRvbWljX2JyaWRnZV9lbmFibGUoJmVuY29kZXIt
PmJyaWRnZSwgb2xkX3N0YXRlKTsKKwkJZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fZW5hYmxlKCZl
bmNvZGVyLT5icmlkZ2UsIG9sZF9zdGF0ZSk7CiAJfQogCiAJZHJtX2F0b21pY19oZWxwZXJfY29t
bWl0X3dyaXRlYmFja3MoZGV2LCBvbGRfc3RhdGUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2RybV9icmlkZ2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYnJpZGdlLmMKaW5kZXggYzVk
NmIxN2Y2NzkwLi41MmYxMjYzNTMwYjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1f
YnJpZGdlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9icmlkZ2UuYwpAQCAtMTcyLDggKzE3
Miw4IEBAIHZvaWQgZHJtX2JyaWRnZV9kZXRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkK
ICAqLwogCiAvKioKLSAqIGRybV9icmlkZ2VfbW9kZV9maXh1cCAtIGZpeHVwIHByb3Bvc2VkIG1v
ZGUgZm9yIGFsbCBicmlkZ2VzIGluIHRoZQotICoJCQkgICBlbmNvZGVyIGNoYWluCisgKiBkcm1f
YnJpZGdlX2NoYWluX21vZGVfZml4dXAgLSBmaXh1cCBwcm9wb3NlZCBtb2RlIGZvciBhbGwgYnJp
ZGdlcyBpbiB0aGUKKyAqCQkJCSBlbmNvZGVyIGNoYWluCiAgKiBAYnJpZGdlOiBicmlkZ2UgY29u
dHJvbCBzdHJ1Y3R1cmUKICAqIEBtb2RlOiBkZXNpcmVkIG1vZGUgdG8gYmUgc2V0IGZvciB0aGUg
YnJpZGdlCiAgKiBAYWRqdXN0ZWRfbW9kZTogdXBkYXRlZCBtb2RlIHRoYXQgd29ya3MgZm9yIHRo
aXMgYnJpZGdlCkBAIC0xODYsOSArMTg2LDkgQEAgdm9pZCBkcm1fYnJpZGdlX2RldGFjaChzdHJ1
Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogICogUkVUVVJOUzoKICAqIHRydWUgb24gc3VjY2Vzcywg
ZmFsc2Ugb24gZmFpbHVyZQogICovCi1ib29sIGRybV9icmlkZ2VfbW9kZV9maXh1cChzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1v
ZGUsCi0JCQlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSkKK2Jvb2wgZHJt
X2JyaWRnZV9jaGFpbl9tb2RlX2ZpeHVwKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJ
IGNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLAorCQkJCSBzdHJ1Y3QgZHJtX2Rp
c3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSkKIHsKIAlib29sIHJldCA9IHRydWU7CiAKQEAgLTE5
OCwxNSArMTk4LDE2IEBAIGJvb2wgZHJtX2JyaWRnZV9tb2RlX2ZpeHVwKHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UsCiAJaWYgKGJyaWRnZS0+ZnVuY3MtPm1vZGVfZml4dXApCiAJCXJldCA9IGJy
aWRnZS0+ZnVuY3MtPm1vZGVfZml4dXAoYnJpZGdlLCBtb2RlLCBhZGp1c3RlZF9tb2RlKTsKIAot
CXJldCA9IHJldCAmJiBkcm1fYnJpZGdlX21vZGVfZml4dXAoYnJpZGdlLT5uZXh0LCBtb2RlLCBh
ZGp1c3RlZF9tb2RlKTsKKwlyZXQgPSByZXQgJiYgZHJtX2JyaWRnZV9jaGFpbl9tb2RlX2ZpeHVw
KGJyaWRnZS0+bmV4dCwgbW9kZSwKKwkJCQkJCSBhZGp1c3RlZF9tb2RlKTsKIAogCXJldHVybiBy
ZXQ7CiB9Ci1FWFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfbW9kZV9maXh1cCk7CitFWFBPUlRfU1lN
Qk9MKGRybV9icmlkZ2VfY2hhaW5fbW9kZV9maXh1cCk7CiAKIC8qKgotICogZHJtX2JyaWRnZV9t
b2RlX3ZhbGlkIC0gdmFsaWRhdGUgdGhlIG1vZGUgYWdhaW5zdCBhbGwgYnJpZGdlcyBpbiB0aGUK
LSAqIAkJCSAgIGVuY29kZXIgY2hhaW4uCisgKiBkcm1fYnJpZGdlX2NoYWluX21vZGVfdmFsaWQg
LSB2YWxpZGF0ZSB0aGUgbW9kZSBhZ2FpbnN0IGFsbCBicmlkZ2VzIGluIHRoZQorICoJCQkJIGVu
Y29kZXIgY2hhaW4uCiAgKiBAYnJpZGdlOiBicmlkZ2UgY29udHJvbCBzdHJ1Y3R1cmUKICAqIEBt
b2RlOiBkZXNpcmVkIG1vZGUgdG8gYmUgdmFsaWRhdGVkCiAgKgpAQCAtMjE5LDggKzIyMCw5IEBA
IEVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9tb2RlX2ZpeHVwKTsKICAqIFJFVFVSTlM6CiAgKiBN
T0RFX09LIG9uIHN1Y2Nlc3MsIGRybV9tb2RlX3N0YXR1cyBFbnVtIGVycm9yIGNvZGUgb24gZmFp
bHVyZQogICovCi1lbnVtIGRybV9tb2RlX3N0YXR1cyBkcm1fYnJpZGdlX21vZGVfdmFsaWQoc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJCQkJICAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKm1vZGUpCitlbnVtIGRybV9tb2RlX3N0YXR1cworZHJtX2JyaWRnZV9jaGFpbl9tb2Rl
X3ZhbGlkKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkgICAgY29uc3Qgc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKm1vZGUpCiB7CiAJZW51bSBkcm1fbW9kZV9zdGF0dXMgcmV0ID0gTU9E
RV9PSzsKIApAQCAtMjMzLDEyICsyMzUsMTIgQEAgZW51bSBkcm1fbW9kZV9zdGF0dXMgZHJtX2Jy
aWRnZV9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJaWYgKHJldCAhPSBN
T0RFX09LKQogCQlyZXR1cm4gcmV0OwogCi0JcmV0dXJuIGRybV9icmlkZ2VfbW9kZV92YWxpZChi
cmlkZ2UtPm5leHQsIG1vZGUpOworCXJldHVybiBkcm1fYnJpZGdlX2NoYWluX21vZGVfdmFsaWQo
YnJpZGdlLT5uZXh0LCBtb2RlKTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9tb2RlX3Zh
bGlkKTsKK0VYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3ZhbGlkKTsKIAogLyoq
Ci0gKiBkcm1fYnJpZGdlX2Rpc2FibGUgLSBkaXNhYmxlcyBhbGwgYnJpZGdlcyBpbiB0aGUgZW5j
b2RlciBjaGFpbgorICogZHJtX2JyaWRnZV9jaGFpbl9kaXNhYmxlIC0gZGlzYWJsZXMgYWxsIGJy
aWRnZXMgaW4gdGhlIGVuY29kZXIgY2hhaW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0
cnVjdHVyZQogICoKICAqIENhbGxzICZkcm1fYnJpZGdlX2Z1bmNzLmRpc2FibGUgb3AgZm9yIGFs
bCB0aGUgYnJpZGdlcyBpbiB0aGUgZW5jb2RlcgpAQCAtMjQ3LDIwICsyNDksMjEgQEAgRVhQT1JU
X1NZTUJPTChkcm1fYnJpZGdlX21vZGVfdmFsaWQpOwogICoKICAqIE5vdGU6IHRoZSBicmlkZ2Ug
cGFzc2VkIHNob3VsZCBiZSB0aGUgb25lIGNsb3Nlc3QgdG8gdGhlIGVuY29kZXIKICAqLwotdm9p
ZCBkcm1fYnJpZGdlX2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3ZvaWQgZHJt
X2JyaWRnZV9jaGFpbl9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCiB7CiAJaWYg
KCFicmlkZ2UpCiAJCXJldHVybjsKIAotCWRybV9icmlkZ2VfZGlzYWJsZShicmlkZ2UtPm5leHQp
OworCWRybV9icmlkZ2VfY2hhaW5fZGlzYWJsZShicmlkZ2UtPm5leHQpOwogCiAJaWYgKGJyaWRn
ZS0+ZnVuY3MtPmRpc2FibGUpCiAJCWJyaWRnZS0+ZnVuY3MtPmRpc2FibGUoYnJpZGdlKTsKIH0K
LUVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9kaXNhYmxlKTsKK0VYUE9SVF9TWU1CT0woZHJtX2Jy
aWRnZV9jaGFpbl9kaXNhYmxlKTsKIAogLyoqCi0gKiBkcm1fYnJpZGdlX3Bvc3RfZGlzYWJsZSAt
IGNsZWFucyB1cCBhZnRlciBkaXNhYmxpbmcgYWxsIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIgY2hh
aW4KKyAqIGRybV9icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlIC0gY2xlYW5zIHVwIGFmdGVyIGRp
c2FibGluZyBhbGwgYnJpZGdlcyBpbiB0aGUKKyAqCQkJCSAgIGVuY29kZXIgY2hhaW4KICAqIEBi
cmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVyZQogICoKICAqIENhbGxzICZkcm1fYnJpZGdl
X2Z1bmNzLnBvc3RfZGlzYWJsZSBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGluIHRoZQpAQCAtMjY5
LDcgKzI3Miw3IEBAIEVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9kaXNhYmxlKTsKICAqCiAgKiBO
b3RlOiB0aGUgYnJpZGdlIHBhc3NlZCBzaG91bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBl
bmNvZGVyCiAgKi8KLXZvaWQgZHJtX2JyaWRnZV9wb3N0X2Rpc2FibGUoc3RydWN0IGRybV9icmlk
Z2UgKmJyaWRnZSkKK3ZvaWQgZHJtX2JyaWRnZV9jaGFpbl9wb3N0X2Rpc2FibGUoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSkKIHsKIAlpZiAoIWJyaWRnZSkKIAkJcmV0dXJuOwpAQCAtMjc3LDI1
ICsyODAsMjUgQEAgdm9pZCBkcm1fYnJpZGdlX3Bvc3RfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRn
ZSAqYnJpZGdlKQogCWlmIChicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rpc2FibGUpCiAJCWJyaWRnZS0+
ZnVuY3MtPnBvc3RfZGlzYWJsZShicmlkZ2UpOwogCi0JZHJtX2JyaWRnZV9wb3N0X2Rpc2FibGUo
YnJpZGdlLT5uZXh0KTsKKwlkcm1fYnJpZGdlX2NoYWluX3Bvc3RfZGlzYWJsZShicmlkZ2UtPm5l
eHQpOwogfQotRVhQT1JUX1NZTUJPTChkcm1fYnJpZGdlX3Bvc3RfZGlzYWJsZSk7CitFWFBPUlRf
U1lNQk9MKGRybV9icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlKTsKIAogLyoqCi0gKiBkcm1fYnJp
ZGdlX21vZGVfc2V0IC0gc2V0IHByb3Bvc2VkIG1vZGUgZm9yIGFsbCBicmlkZ2VzIGluIHRoZQot
ICoJCQkgZW5jb2RlciBjaGFpbgorICogZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3NldCAtIHNldCBw
cm9wb3NlZCBtb2RlIGZvciBhbGwgYnJpZGdlcyBpbiB0aGUKKyAqCQkJICAgICAgIGVuY29kZXIg
Y2hhaW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVyZQotICogQG1vZGU6IGRl
c2lyZWQgbW9kZSB0byBiZSBzZXQgZm9yIHRoZSBicmlkZ2UKLSAqIEBhZGp1c3RlZF9tb2RlOiB1
cGRhdGVkIG1vZGUgdGhhdCB3b3JrcyBmb3IgdGhpcyBicmlkZ2UKKyAqIEBtb2RlOiBkZXNpcmVk
IG1vZGUgdG8gYmUgc2V0IGZvciB0aGUgZW5jb2RlciBjaGFpbgorICogQGFkanVzdGVkX21vZGU6
IHVwZGF0ZWQgbW9kZSB0aGF0IHdvcmtzIGZvciB0aGlzIGVuY29kZXIgY2hhaW4KICAqCiAgKiBD
YWxscyAmZHJtX2JyaWRnZV9mdW5jcy5tb2RlX3NldCBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGlu
IHRoZQogICogZW5jb2RlciBjaGFpbiwgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3QgYnJpZGdlIHRv
IHRoZSBsYXN0LgogICoKICAqIE5vdGU6IHRoZSBicmlkZ2UgcGFzc2VkIHNob3VsZCBiZSB0aGUg
b25lIGNsb3Nlc3QgdG8gdGhlIGVuY29kZXIKICAqLwotdm9pZCBkcm1fYnJpZGdlX21vZGVfc2V0
KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCi0JCQkgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKm1vZGUsCi0JCQkgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVk
X21vZGUpCit2b2lkIGRybV9icmlkZ2VfY2hhaW5fbW9kZV9zZXQoc3RydWN0IGRybV9icmlkZ2Ug
KmJyaWRnZSwKKwkJCSAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwK
KwkJCSAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSkK
IHsKIAlpZiAoIWJyaWRnZSkKIAkJcmV0dXJuOwpAQCAtMzAzLDEzICszMDYsMTMgQEAgdm9pZCBk
cm1fYnJpZGdlX21vZGVfc2V0KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJaWYgKGJyaWRn
ZS0+ZnVuY3MtPm1vZGVfc2V0KQogCQlicmlkZ2UtPmZ1bmNzLT5tb2RlX3NldChicmlkZ2UsIG1v
ZGUsIGFkanVzdGVkX21vZGUpOwogCi0JZHJtX2JyaWRnZV9tb2RlX3NldChicmlkZ2UtPm5leHQs
IG1vZGUsIGFkanVzdGVkX21vZGUpOworCWRybV9icmlkZ2VfY2hhaW5fbW9kZV9zZXQoYnJpZGdl
LT5uZXh0LCBtb2RlLCBhZGp1c3RlZF9tb2RlKTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2JyaWRn
ZV9tb2RlX3NldCk7CitFWFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfY2hhaW5fbW9kZV9zZXQpOwog
CiAvKioKLSAqIGRybV9icmlkZ2VfcHJlX2VuYWJsZSAtIHByZXBhcmVzIGZvciBlbmFibGluZyBh
bGwKLSAqCQkJICAgYnJpZGdlcyBpbiB0aGUgZW5jb2RlciBjaGFpbgorICogZHJtX2JyaWRnZV9j
aGFpbl9wcmVfZW5hYmxlIC0gcHJlcGFyZXMgZm9yIGVuYWJsaW5nIGFsbCBicmlkZ2VzIGluIHRo
ZQorICoJCQkJIGVuY29kZXIgY2hhaW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVj
dHVyZQogICoKICAqIENhbGxzICZkcm1fYnJpZGdlX2Z1bmNzLnByZV9lbmFibGUgb3AgZm9yIGFs
bCB0aGUgYnJpZGdlcyBpbiB0aGUgZW5jb2RlcgpAQCAtMzE4LDIwICszMjEsMjAgQEAgRVhQT1JU
X1NZTUJPTChkcm1fYnJpZGdlX21vZGVfc2V0KTsKICAqCiAgKiBOb3RlOiB0aGUgYnJpZGdlIHBh
c3NlZCBzaG91bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBlbmNvZGVyCiAgKi8KLXZvaWQg
ZHJtX2JyaWRnZV9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCit2b2lkIGRy
bV9icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogewog
CWlmICghYnJpZGdlKQogCQlyZXR1cm47CiAKLQlkcm1fYnJpZGdlX3ByZV9lbmFibGUoYnJpZGdl
LT5uZXh0KTsKKwlkcm1fYnJpZGdlX2NoYWluX3ByZV9lbmFibGUoYnJpZGdlLT5uZXh0KTsKIAog
CWlmIChicmlkZ2UtPmZ1bmNzLT5wcmVfZW5hYmxlKQogCQlicmlkZ2UtPmZ1bmNzLT5wcmVfZW5h
YmxlKGJyaWRnZSk7CiB9Ci1FWFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfcHJlX2VuYWJsZSk7CitF
WFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZSk7CiAKIC8qKgotICogZHJt
X2JyaWRnZV9lbmFibGUgLSBlbmFibGVzIGFsbCBicmlkZ2VzIGluIHRoZSBlbmNvZGVyIGNoYWlu
CisgKiBkcm1fYnJpZGdlX2NoYWluX2VuYWJsZSAtIGVuYWJsZXMgYWxsIGJyaWRnZXMgaW4gdGhl
IGVuY29kZXIgY2hhaW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVyZQogICoK
ICAqIENhbGxzICZkcm1fYnJpZGdlX2Z1bmNzLmVuYWJsZSBvcCBmb3IgYWxsIHRoZSBicmlkZ2Vz
IGluIHRoZSBlbmNvZGVyCkBAIC0zNDAsNyArMzQzLDcgQEAgRVhQT1JUX1NZTUJPTChkcm1fYnJp
ZGdlX3ByZV9lbmFibGUpOwogICoKICAqIE5vdGUgdGhhdCB0aGUgYnJpZGdlIHBhc3NlZCBzaG91
bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBlbmNvZGVyCiAgKi8KLXZvaWQgZHJtX2JyaWRn
ZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKK3ZvaWQgZHJtX2JyaWRnZV9jaGFp
bl9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKIHsKIAlpZiAoIWJyaWRnZSkKIAkJ
cmV0dXJuOwpAQCAtMzQ4LDEyICszNTEsMTIgQEAgdm9pZCBkcm1fYnJpZGdlX2VuYWJsZShzdHJ1
Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQogCWlmIChicmlkZ2UtPmZ1bmNzLT5lbmFibGUpCiAJCWJy
aWRnZS0+ZnVuY3MtPmVuYWJsZShicmlkZ2UpOwogCi0JZHJtX2JyaWRnZV9lbmFibGUoYnJpZGdl
LT5uZXh0KTsKKwlkcm1fYnJpZGdlX2NoYWluX2VuYWJsZShicmlkZ2UtPm5leHQpOwogfQotRVhQ
T1JUX1NZTUJPTChkcm1fYnJpZGdlX2VuYWJsZSk7CitFWFBPUlRfU1lNQk9MKGRybV9icmlkZ2Vf
Y2hhaW5fZW5hYmxlKTsKIAogLyoqCi0gKiBkcm1fYXRvbWljX2JyaWRnZV9kaXNhYmxlIC0gZGlz
YWJsZXMgYWxsIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIgY2hhaW4KKyAqIGRybV9hdG9taWNfYnJp
ZGdlX2NoYWluX2Rpc2FibGUgLSBkaXNhYmxlcyBhbGwgYnJpZGdlcyBpbiB0aGUgZW5jb2RlciBj
aGFpbgogICogQGJyaWRnZTogYnJpZGdlIGNvbnRyb2wgc3RydWN0dXJlCiAgKiBAc3RhdGU6IGF0
b21pYyBzdGF0ZSBiZWluZyBjb21taXR0ZWQKICAqCkBAIC0zNjQsMjQgKzM2NywyNCBAQCBFWFBP
UlRfU1lNQk9MKGRybV9icmlkZ2VfZW5hYmxlKTsKICAqCiAgKiBOb3RlOiB0aGUgYnJpZGdlIHBh
c3NlZCBzaG91bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBlbmNvZGVyCiAgKi8KLXZvaWQg
ZHJtX2F0b21pY19icmlkZ2VfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJ
ICAgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSkKK3ZvaWQgZHJtX2F0b21pY19i
cmlkZ2VfY2hhaW5fZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCSAgICAg
c3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQogewogCWlmICghYnJpZGdlKQogCQlyZXR1
cm47CiAKLQlkcm1fYXRvbWljX2JyaWRnZV9kaXNhYmxlKGJyaWRnZS0+bmV4dCwgc3RhdGUpOwor
CWRybV9hdG9taWNfYnJpZGdlX2NoYWluX2Rpc2FibGUoYnJpZGdlLT5uZXh0LCBzdGF0ZSk7CiAK
IAlpZiAoYnJpZGdlLT5mdW5jcy0+YXRvbWljX2Rpc2FibGUpCiAJCWJyaWRnZS0+ZnVuY3MtPmF0
b21pY19kaXNhYmxlKGJyaWRnZSwgc3RhdGUpOwogCWVsc2UgaWYgKGJyaWRnZS0+ZnVuY3MtPmRp
c2FibGUpCiAJCWJyaWRnZS0+ZnVuY3MtPmRpc2FibGUoYnJpZGdlKTsKIH0KLUVYUE9SVF9TWU1C
T0woZHJtX2F0b21pY19icmlkZ2VfZGlzYWJsZSk7CitFWFBPUlRfU1lNQk9MKGRybV9hdG9taWNf
YnJpZGdlX2NoYWluX2Rpc2FibGUpOwogCiAvKioKLSAqIGRybV9hdG9taWNfYnJpZGdlX3Bvc3Rf
ZGlzYWJsZSAtIGNsZWFucyB1cCBhZnRlciBkaXNhYmxpbmcgYWxsIGJyaWRnZXMgaW4gdGhlCi0g
KgkJCQkgICAgZW5jb2RlciBjaGFpbgorICogZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fcG9zdF9k
aXNhYmxlIC0gY2xlYW5zIHVwIGFmdGVyIGRpc2FibGluZyBhbGwgYnJpZGdlcworICoJCQkJCSAg
aW4gdGhlIGVuY29kZXIgY2hhaW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVy
ZQogICogQHN0YXRlOiBhdG9taWMgc3RhdGUgYmVpbmcgY29tbWl0dGVkCiAgKgpAQCAtMzkyLDgg
KzM5NSw4IEBAIEVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfZGlzYWJsZSk7CiAgKgog
ICogTm90ZTogdGhlIGJyaWRnZSBwYXNzZWQgc2hvdWxkIGJlIHRoZSBvbmUgY2xvc2VzdCB0byB0
aGUgZW5jb2RlcgogICovCi12b2lkIGRybV9hdG9taWNfYnJpZGdlX3Bvc3RfZGlzYWJsZShzdHJ1
Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJCSAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAq
c3RhdGUpCit2b2lkIGRybV9hdG9taWNfYnJpZGdlX2NoYWluX3Bvc3RfZGlzYWJsZShzdHJ1Y3Qg
ZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCQkgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0
ZSkKIHsKIAlpZiAoIWJyaWRnZSkKIAkJcmV0dXJuOwpAQCAtNDAzLDEzICs0MDYsMTMgQEAgdm9p
ZCBkcm1fYXRvbWljX2JyaWRnZV9wb3N0X2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSwKIAllbHNlIGlmIChicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rpc2FibGUpCiAJCWJyaWRnZS0+ZnVu
Y3MtPnBvc3RfZGlzYWJsZShicmlkZ2UpOwogCi0JZHJtX2F0b21pY19icmlkZ2VfcG9zdF9kaXNh
YmxlKGJyaWRnZS0+bmV4dCwgc3RhdGUpOworCWRybV9hdG9taWNfYnJpZGdlX2NoYWluX3Bvc3Rf
ZGlzYWJsZShicmlkZ2UtPm5leHQsIHN0YXRlKTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2F0b21p
Y19icmlkZ2VfcG9zdF9kaXNhYmxlKTsKK0VYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2Vf
Y2hhaW5fcG9zdF9kaXNhYmxlKTsKIAogLyoqCi0gKiBkcm1fYXRvbWljX2JyaWRnZV9wcmVfZW5h
YmxlIC0gcHJlcGFyZXMgZm9yIGVuYWJsaW5nIGFsbCBicmlkZ2VzIGluIHRoZQotICoJCQkJICBl
bmNvZGVyIGNoYWluCisgKiBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9wcmVfZW5hYmxlIC0gcHJl
cGFyZXMgZm9yIGVuYWJsaW5nIGFsbCBicmlkZ2VzIGluCisgKgkJCQkJdGhlIGVuY29kZXIgY2hh
aW4KICAqIEBicmlkZ2U6IGJyaWRnZSBjb250cm9sIHN0cnVjdHVyZQogICogQHN0YXRlOiBhdG9t
aWMgc3RhdGUgYmVpbmcgY29tbWl0dGVkCiAgKgpAQCAtNDIwLDIzICs0MjMsMjMgQEAgRVhQT1JU
X1NZTUJPTChkcm1fYXRvbWljX2JyaWRnZV9wb3N0X2Rpc2FibGUpOwogICoKICAqIE5vdGU6IHRo
ZSBicmlkZ2UgcGFzc2VkIHNob3VsZCBiZSB0aGUgb25lIGNsb3Nlc3QgdG8gdGhlIGVuY29kZXIK
ICAqLwotdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdl
ICpicmlkZ2UsCi0JCQkJICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCit2b2lkIGRy
bV9hdG9taWNfYnJpZGdlX2NoYWluX3ByZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSwKKwkJCQkJc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQogewogCWlmICghYnJpZGdl
KQogCQlyZXR1cm47CiAKLQlkcm1fYXRvbWljX2JyaWRnZV9wcmVfZW5hYmxlKGJyaWRnZS0+bmV4
dCwgc3RhdGUpOworCWRybV9hdG9taWNfYnJpZGdlX2NoYWluX3ByZV9lbmFibGUoYnJpZGdlLT5u
ZXh0LCBzdGF0ZSk7CiAKIAlpZiAoYnJpZGdlLT5mdW5jcy0+YXRvbWljX3ByZV9lbmFibGUpCiAJ
CWJyaWRnZS0+ZnVuY3MtPmF0b21pY19wcmVfZW5hYmxlKGJyaWRnZSwgc3RhdGUpOwogCWVsc2Ug
aWYgKGJyaWRnZS0+ZnVuY3MtPnByZV9lbmFibGUpCiAJCWJyaWRnZS0+ZnVuY3MtPnByZV9lbmFi
bGUoYnJpZGdlKTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfcHJlX2VuYWJs
ZSk7CitFWFBPUlRfU1lNQk9MKGRybV9hdG9taWNfYnJpZGdlX2NoYWluX3ByZV9lbmFibGUpOwog
CiAvKioKLSAqIGRybV9hdG9taWNfYnJpZGdlX2VuYWJsZSAtIGVuYWJsZXMgYWxsIGJyaWRnZXMg
aW4gdGhlIGVuY29kZXIgY2hhaW4KKyAqIGRybV9hdG9taWNfYnJpZGdlX2NoYWluX2VuYWJsZSAt
IGVuYWJsZXMgYWxsIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIgY2hhaW4KICAqIEBicmlkZ2U6IGJy
aWRnZSBjb250cm9sIHN0cnVjdHVyZQogICogQHN0YXRlOiBhdG9taWMgc3RhdGUgYmVpbmcgY29t
bWl0dGVkCiAgKgpAQCAtNDQ3LDggKzQ1MCw4IEBAIEVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19i
cmlkZ2VfcHJlX2VuYWJsZSk7CiAgKgogICogTm90ZTogdGhlIGJyaWRnZSBwYXNzZWQgc2hvdWxk
IGJlIHRoZSBvbmUgY2xvc2VzdCB0byB0aGUgZW5jb2RlcgogICovCi12b2lkIGRybV9hdG9taWNf
YnJpZGdlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJICAgICAgc3RydWN0
IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQordm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9l
bmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgICAgc3RydWN0IGRybV9hdG9t
aWNfc3RhdGUgKnN0YXRlKQogewogCWlmICghYnJpZGdlKQogCQlyZXR1cm47CkBAIC00NTgsOSAr
NDYxLDkgQEAgdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2Ug
KmJyaWRnZSwKIAllbHNlIGlmIChicmlkZ2UtPmZ1bmNzLT5lbmFibGUpCiAJCWJyaWRnZS0+ZnVu
Y3MtPmVuYWJsZShicmlkZ2UpOwogCi0JZHJtX2F0b21pY19icmlkZ2VfZW5hYmxlKGJyaWRnZS0+
bmV4dCwgc3RhdGUpOworCWRybV9hdG9taWNfYnJpZGdlX2NoYWluX2VuYWJsZShicmlkZ2UtPm5l
eHQsIHN0YXRlKTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfZW5hYmxlKTsK
K0VYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fZW5hYmxlKTsKIAogI2lmZGVm
IENPTkZJR19PRgogLyoqCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2NydGNfaGVs
cGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2NydGNfaGVscGVyLmMKaW5kZXggYzgwZTMzYTg0
NjA1Li4xOGNkZjliOGZkYjAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fY3J0Y19o
ZWxwZXIuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2NydGNfaGVscGVyLmMKQEAgLTE2MCwx
NCArMTYwLDE0IEBAIGRybV9lbmNvZGVyX2Rpc2FibGUoc3RydWN0IGRybV9lbmNvZGVyICplbmNv
ZGVyKQogCWlmICghZW5jb2Rlcl9mdW5jcykKIAkJcmV0dXJuOwogCi0JZHJtX2JyaWRnZV9kaXNh
YmxlKCZlbmNvZGVyLT5icmlkZ2UpOworCWRybV9icmlkZ2VfY2hhaW5fZGlzYWJsZSgmZW5jb2Rl
ci0+YnJpZGdlKTsKIAogCWlmIChlbmNvZGVyX2Z1bmNzLT5kaXNhYmxlKQogCQkoKmVuY29kZXJf
ZnVuY3MtPmRpc2FibGUpKGVuY29kZXIpOwogCWVsc2UgaWYgKGVuY29kZXJfZnVuY3MtPmRwbXMp
CiAJCSgqZW5jb2Rlcl9mdW5jcy0+ZHBtcykoZW5jb2RlciwgRFJNX01PREVfRFBNU19PRkYpOwog
Ci0JZHJtX2JyaWRnZV9wb3N0X2Rpc2FibGUoJmVuY29kZXItPmJyaWRnZSk7CisJZHJtX2JyaWRn
ZV9jaGFpbl9wb3N0X2Rpc2FibGUoJmVuY29kZXItPmJyaWRnZSk7CiB9CiAKIHN0YXRpYyB2b2lk
IF9fZHJtX2hlbHBlcl9kaXNhYmxlX3VudXNlZF9mdW5jdGlvbnMoc3RydWN0IGRybV9kZXZpY2Ug
KmRldikKQEAgLTMyNyw4ICszMjcsOCBAQCBib29sIGRybV9jcnRjX2hlbHBlcl9zZXRfbW9kZShz
dHJ1Y3QgZHJtX2NydGMgKmNydGMsCiAJCWlmICghZW5jb2Rlcl9mdW5jcykKIAkJCWNvbnRpbnVl
OwogCi0JCXJldCA9IGRybV9icmlkZ2VfbW9kZV9maXh1cCgmZW5jb2Rlci0+YnJpZGdlLCBtb2Rl
LAotCQkJCQkgICAgYWRqdXN0ZWRfbW9kZSk7CisJCXJldCA9IGRybV9icmlkZ2VfY2hhaW5fbW9k
ZV9maXh1cCgmZW5jb2Rlci0+YnJpZGdlLCBtb2RlLAorCQkJCQkJICBhZGp1c3RlZF9tb2RlKTsK
IAkJaWYgKCFyZXQpIHsKIAkJCURSTV9ERUJVR19LTVMoIkJyaWRnZSBmaXh1cCBmYWlsZWRcbiIp
OwogCQkJZ290byBkb25lOwpAQCAtMzY1LDEzICszNjUsMTMgQEAgYm9vbCBkcm1fY3J0Y19oZWxw
ZXJfc2V0X21vZGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCQlpZiAoIWVuY29kZXJfZnVuY3Mp
CiAJCQljb250aW51ZTsKIAotCQlkcm1fYnJpZGdlX2Rpc2FibGUoJmVuY29kZXItPmJyaWRnZSk7
CisJCWRybV9icmlkZ2VfY2hhaW5fZGlzYWJsZSgmZW5jb2Rlci0+YnJpZGdlKTsKIAogCQkvKiBE
aXNhYmxlIHRoZSBlbmNvZGVycyBhcyB0aGUgZmlyc3QgdGhpbmcgd2UgZG8uICovCiAJCWlmIChl
bmNvZGVyX2Z1bmNzLT5wcmVwYXJlKQogCQkJZW5jb2Rlcl9mdW5jcy0+cHJlcGFyZShlbmNvZGVy
KTsKIAotCQlkcm1fYnJpZGdlX3Bvc3RfZGlzYWJsZSgmZW5jb2Rlci0+YnJpZGdlKTsKKwkJZHJt
X2JyaWRnZV9jaGFpbl9wb3N0X2Rpc2FibGUoJmVuY29kZXItPmJyaWRnZSk7CiAJfQogCiAJZHJt
X2NydGNfcHJlcGFyZV9lbmNvZGVycyhkZXYpOwpAQCAtMzk5LDcgKzM5OSw4IEBAIGJvb2wgZHJt
X2NydGNfaGVscGVyX3NldF9tb2RlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAkJaWYgKGVuY29k
ZXJfZnVuY3MtPm1vZGVfc2V0KQogCQkJZW5jb2Rlcl9mdW5jcy0+bW9kZV9zZXQoZW5jb2Rlciwg
bW9kZSwgYWRqdXN0ZWRfbW9kZSk7CiAKLQkJZHJtX2JyaWRnZV9tb2RlX3NldCgmZW5jb2Rlci0+
YnJpZGdlLCBtb2RlLCBhZGp1c3RlZF9tb2RlKTsKKwkJZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3Nl
dCgmZW5jb2Rlci0+YnJpZGdlLCBtb2RlLAorCQkJCQkgIGFkanVzdGVkX21vZGUpOwogCX0KIAog
CS8qIE5vdyBlbmFibGUgdGhlIGNsb2NrcywgcGxhbmUsIHBpcGUsIGFuZCBjb25uZWN0b3JzIHRo
YXQgd2Ugc2V0IHVwLiAqLwpAQCAtNDE0LDEyICs0MTUsMTIgQEAgYm9vbCBkcm1fY3J0Y19oZWxw
ZXJfc2V0X21vZGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCQlpZiAoIWVuY29kZXJfZnVuY3Mp
CiAJCQljb250aW51ZTsKIAotCQlkcm1fYnJpZGdlX3ByZV9lbmFibGUoJmVuY29kZXItPmJyaWRn
ZSk7CisJCWRybV9icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZSgmZW5jb2Rlci0+YnJpZGdlKTsKIAog
CQlpZiAoZW5jb2Rlcl9mdW5jcy0+Y29tbWl0KQogCQkJZW5jb2Rlcl9mdW5jcy0+Y29tbWl0KGVu
Y29kZXIpOwogCi0JCWRybV9icmlkZ2VfZW5hYmxlKCZlbmNvZGVyLT5icmlkZ2UpOworCQlkcm1f
YnJpZGdlX2NoYWluX2VuYWJsZSgmZW5jb2Rlci0+YnJpZGdlKTsKIAl9CiAKIAkvKiBDYWxjdWxh
dGUgYW5kIHN0b3JlIHZhcmlvdXMgY29uc3RhbnRzIHdoaWNoCkBAIC04MTgsNyArODE5LDYgQEAg
c3RhdGljIGludCBkcm1faGVscGVyX2Nob29zZV9lbmNvZGVyX2RwbXMoc3RydWN0IGRybV9lbmNv
ZGVyICplbmNvZGVyKQogLyogSGVscGVyIHdoaWNoIGhhbmRsZXMgYnJpZGdlIG9yZGVyaW5nIGFy
b3VuZCBlbmNvZGVyIGRwbXMgKi8KIHN0YXRpYyB2b2lkIGRybV9oZWxwZXJfZW5jb2Rlcl9kcG1z
KHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwgaW50IG1vZGUpCiB7Ci0Jc3RydWN0IGRybV9i
cmlkZ2UgKmJyaWRnZSA9ICZlbmNvZGVyLT5icmlkZ2U7CiAJY29uc3Qgc3RydWN0IGRybV9lbmNv
ZGVyX2hlbHBlcl9mdW5jcyAqZW5jb2Rlcl9mdW5jczsKIAogCWVuY29kZXJfZnVuY3MgPSBlbmNv
ZGVyLT5oZWxwZXJfcHJpdmF0ZTsKQEAgLTgyNiwxNyArODI2LDE3IEBAIHN0YXRpYyB2b2lkIGRy
bV9oZWxwZXJfZW5jb2Rlcl9kcG1zKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwgaW50IG1v
ZGUpCiAJCXJldHVybjsKIAogCWlmIChtb2RlID09IERSTV9NT0RFX0RQTVNfT04pCi0JCWRybV9i
cmlkZ2VfcHJlX2VuYWJsZShicmlkZ2UpOworCQlkcm1fYnJpZGdlX2NoYWluX3ByZV9lbmFibGUo
JmVuY29kZXItPmJyaWRnZSk7CiAJZWxzZQotCQlkcm1fYnJpZGdlX2Rpc2FibGUoYnJpZGdlKTsK
KwkJZHJtX2JyaWRnZV9jaGFpbl9kaXNhYmxlKCZlbmNvZGVyLT5icmlkZ2UpOwogCiAJaWYgKGVu
Y29kZXJfZnVuY3MtPmRwbXMpCiAJCWVuY29kZXJfZnVuY3MtPmRwbXMoZW5jb2RlciwgbW9kZSk7
CiAKIAlpZiAobW9kZSA9PSBEUk1fTU9ERV9EUE1TX09OKQotCQlkcm1fYnJpZGdlX2VuYWJsZShi
cmlkZ2UpOworCQlkcm1fYnJpZGdlX2NoYWluX2VuYWJsZSgmZW5jb2Rlci0+YnJpZGdlKTsKIAll
bHNlCi0JCWRybV9icmlkZ2VfcG9zdF9kaXNhYmxlKGJyaWRnZSk7CisJCWRybV9icmlkZ2VfY2hh
aW5fcG9zdF9kaXNhYmxlKCZlbmNvZGVyLT5icmlkZ2UpOwogfQogCiBzdGF0aWMgaW50IGRybV9o
ZWxwZXJfY2hvb3NlX2NydGNfZHBtcyhzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vZHJtX3Byb2JlX2hlbHBlci5jIGIvZHJpdmVycy9ncHUvZHJtL2Ry
bV9wcm9iZV9oZWxwZXIuYwppbmRleCBlNGFmMmY5ZmEzNzIuLmE1YzQ5YjFiZWYyZCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9wcm9iZV9oZWxwZXIuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vZHJtX3Byb2JlX2hlbHBlci5jCkBAIC0xMTMsNyArMTEzLDcgQEAgZHJtX21vZGVfdmFs
aWRhdGVfcGlwZWxpbmUoc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCiAJCQljb250aW51
ZTsKIAkJfQogCi0JCXJldCA9IGRybV9icmlkZ2VfbW9kZV92YWxpZCgmZW5jb2Rlci0+YnJpZGdl
LCBtb2RlKTsKKwkJcmV0ID0gZHJtX2JyaWRnZV9jaGFpbl9tb2RlX3ZhbGlkKCZlbmNvZGVyLT5i
cmlkZ2UsIG1vZGUpOwogCQlpZiAocmV0ICE9IE1PREVfT0spIHsKIAkJCS8qIFRoZXJlIGlzIGFs
c28gbm8gcG9pbnQgaW4gY29udGludWluZyBmb3IgY3J0YyBjaGVjawogCQkJICogaGVyZS4gKi8K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfaGRtaS5jIGIvZHJpdmVy
cy9ncHUvZHJtL21lZGlhdGVrL210a19oZG1pLmMKaW5kZXggYzc5YjFmODU1ZDg5Li5lYTY4YjVh
ZGNjYmUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfaGRtaS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfaGRtaS5jCkBAIC0xMjQ3LDggKzEyNDcs
OCBAQCBzdGF0aWMgaW50IG10a19oZG1pX2Nvbm5fbW9kZV92YWxpZChzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubiwKIAkJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgYWRqdXN0ZWRfbW9kZTsKIAog
CQlkcm1fbW9kZV9jb3B5KCZhZGp1c3RlZF9tb2RlLCBtb2RlKTsKLQkJaWYgKCFkcm1fYnJpZGdl
X21vZGVfZml4dXAoaGRtaS0+YnJpZGdlLm5leHQsIG1vZGUsCi0JCQkJCSAgICZhZGp1c3RlZF9t
b2RlKSkKKwkJaWYgKCFkcm1fYnJpZGdlX2NoYWluX21vZGVfZml4dXAoaGRtaS0+YnJpZGdlLm5l
eHQsIG1vZGUsCisJCQkJCQkgJmFkanVzdGVkX21vZGUpKQogCQkJcmV0dXJuIE1PREVfQkFEOwog
CX0KIApkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2JyaWRnZS5oIGIvaW5jbHVkZS9kcm0v
ZHJtX2JyaWRnZS5oCmluZGV4IDc2MTZmNjU2MmZlNC4uNDQyYTA2NTRlMWJmIDEwMDY0NAotLS0g
YS9pbmNsdWRlL2RybS9kcm1fYnJpZGdlLmgKKysrIGIvaW5jbHVkZS9kcm0vZHJtX2JyaWRnZS5o
CkBAIC0yNTQsOSArMjU0LDEwIEBAIHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIHsKIAkgKiB0aGVy
ZSBpcyBvbmUpIHdoZW4gdGhpcyBjYWxsYmFjayBpcyBjYWxsZWQuCiAJICoKIAkgKiBOb3RlIHRo
YXQgdGhpcyBmdW5jdGlvbiB3aWxsIG9ubHkgYmUgaW52b2tlZCBpbiB0aGUgY29udGV4dCBvZiBh
bgotCSAqIGF0b21pYyBjb21taXQuIEl0IHdpbGwgbm90IGJlIGludm9rZWQgZnJvbSAmZHJtX2Jy
aWRnZV9wcmVfZW5hYmxlLiBJdAotCSAqIHdvdWxkIGJlIHBydWRlbnQgdG8gYWxzbyBwcm92aWRl
IGFuIGltcGxlbWVudGF0aW9uIG9mIEBwcmVfZW5hYmxlIGlmCi0JICogeW91IGFyZSBleHBlY3Rp
bmcgZHJpdmVyIGNhbGxzIGludG8gJmRybV9icmlkZ2VfcHJlX2VuYWJsZS4KKwkgKiBhdG9taWMg
Y29tbWl0LiBJdCB3aWxsIG5vdCBiZSBpbnZva2VkIGZyb20KKwkgKiAmZHJtX2JyaWRnZV9jaGFp
bl9wcmVfZW5hYmxlLiBJdCB3b3VsZCBiZSBwcnVkZW50IHRvIGFsc28gcHJvdmlkZSBhbgorCSAq
IGltcGxlbWVudGF0aW9uIG9mIEBwcmVfZW5hYmxlIGlmIHlvdSBhcmUgZXhwZWN0aW5nIGRyaXZl
ciBjYWxscyBpbnRvCisJICogJmRybV9icmlkZ2VfY2hhaW5fcHJlX2VuYWJsZS4KIAkgKgogCSAq
IFRoZSBAYXRvbWljX3ByZV9lbmFibGUgY2FsbGJhY2sgaXMgb3B0aW9uYWwuCiAJICovCkBAIC0y
NzksOSArMjgwLDkgQEAgc3RydWN0IGRybV9icmlkZ2VfZnVuY3MgewogCSAqIGNoYWluIGlmIHRo
ZXJlIGlzIG9uZS4KIAkgKgogCSAqIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIHdpbGwgb25seSBi
ZSBpbnZva2VkIGluIHRoZSBjb250ZXh0IG9mIGFuCi0JICogYXRvbWljIGNvbW1pdC4gSXQgd2ls
bCBub3QgYmUgaW52b2tlZCBmcm9tICZkcm1fYnJpZGdlX2VuYWJsZS4gSXQKLQkgKiB3b3VsZCBi
ZSBwcnVkZW50IHRvIGFsc28gcHJvdmlkZSBhbiBpbXBsZW1lbnRhdGlvbiBvZiBAZW5hYmxlIGlm
Ci0JICogeW91IGFyZSBleHBlY3RpbmcgZHJpdmVyIGNhbGxzIGludG8gJmRybV9icmlkZ2VfZW5h
YmxlLgorCSAqIGF0b21pYyBjb21taXQuIEl0IHdpbGwgbm90IGJlIGludm9rZWQgZnJvbSAmZHJt
X2JyaWRnZV9jaGFpbl9lbmFibGUuCisJICogSXQgd291bGQgYmUgcHJ1ZGVudCB0byBhbHNvIHBy
b3ZpZGUgYW4gaW1wbGVtZW50YXRpb24gb2YgQGVuYWJsZSBpZgorCSAqIHlvdSBhcmUgZXhwZWN0
aW5nIGRyaXZlciBjYWxscyBpbnRvICZkcm1fYnJpZGdlX2NoYWluX2VuYWJsZS4KIAkgKgogCSAq
IFRoZSBlbmFibGUgY2FsbGJhY2sgaXMgb3B0aW9uYWwuCiAJICovCkBAIC0zMDEsOSArMzAyLDEw
IEBAIHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIHsKIAkgKiBzaWduYWxzKSBmZWVkaW5nIGl0IGlz
IHN0aWxsIHJ1bm5pbmcgd2hlbiB0aGlzIGNhbGxiYWNrIGlzIGNhbGxlZC4KIAkgKgogCSAqIE5v
dGUgdGhhdCB0aGlzIGZ1bmN0aW9uIHdpbGwgb25seSBiZSBpbnZva2VkIGluIHRoZSBjb250ZXh0
IG9mIGFuCi0JICogYXRvbWljIGNvbW1pdC4gSXQgd2lsbCBub3QgYmUgaW52b2tlZCBmcm9tICZk
cm1fYnJpZGdlX2Rpc2FibGUuIEl0Ci0JICogd291bGQgYmUgcHJ1ZGVudCB0byBhbHNvIHByb3Zp
ZGUgYW4gaW1wbGVtZW50YXRpb24gb2YgQGRpc2FibGUgaWYKLQkgKiB5b3UgYXJlIGV4cGVjdGlu
ZyBkcml2ZXIgY2FsbHMgaW50byAmZHJtX2JyaWRnZV9kaXNhYmxlLgorCSAqIGF0b21pYyBjb21t
aXQuIEl0IHdpbGwgbm90IGJlIGludm9rZWQgZnJvbQorCSAqICZkcm1fYnJpZGdlX2NoYWluX2Rp
c2FibGUuIEl0IHdvdWxkIGJlIHBydWRlbnQgdG8gYWxzbyBwcm92aWRlIGFuCisJICogaW1wbGVt
ZW50YXRpb24gb2YgQGRpc2FibGUgaWYgeW91IGFyZSBleHBlY3RpbmcgZHJpdmVyIGNhbGxzIGlu
dG8KKwkgKiAmZHJtX2JyaWRnZV9jaGFpbl9kaXNhYmxlLgogCSAqCiAJICogVGhlIGRpc2FibGUg
Y2FsbGJhY2sgaXMgb3B0aW9uYWwuCiAJICovCkBAIC0zMjUsMTAgKzMyNywxMSBAQCBzdHJ1Y3Qg
ZHJtX2JyaWRnZV9mdW5jcyB7CiAJICogY2FsbGVkLgogCSAqCiAJICogTm90ZSB0aGF0IHRoaXMg
ZnVuY3Rpb24gd2lsbCBvbmx5IGJlIGludm9rZWQgaW4gdGhlIGNvbnRleHQgb2YgYW4KLQkgKiBh
dG9taWMgY29tbWl0LiBJdCB3aWxsIG5vdCBiZSBpbnZva2VkIGZyb20gJmRybV9icmlkZ2VfcG9z
dF9kaXNhYmxlLgorCSAqIGF0b21pYyBjb21taXQuIEl0IHdpbGwgbm90IGJlIGludm9rZWQgZnJv
bQorCSAqICZkcm1fYnJpZGdlX2NoYWluX3Bvc3RfZGlzYWJsZS4KIAkgKiBJdCB3b3VsZCBiZSBw
cnVkZW50IHRvIGFsc28gcHJvdmlkZSBhbiBpbXBsZW1lbnRhdGlvbiBvZgogCSAqIEBwb3N0X2Rp
c2FibGUgaWYgeW91IGFyZSBleHBlY3RpbmcgZHJpdmVyIGNhbGxzIGludG8KLQkgKiAmZHJtX2Jy
aWRnZV9wb3N0X2Rpc2FibGUuCisJICogJmRybV9icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlLgog
CSAqCiAJICogVGhlIHBvc3RfZGlzYWJsZSBjYWxsYmFjayBpcyBvcHRpb25hbC4KIAkgKi8KQEAg
LTQwNiwyNyArNDA5LDI4IEBAIHN0cnVjdCBkcm1fYnJpZGdlICpvZl9kcm1fZmluZF9icmlkZ2Uo
c3RydWN0IGRldmljZV9ub2RlICpucCk7CiBpbnQgZHJtX2JyaWRnZV9hdHRhY2goc3RydWN0IGRy
bV9lbmNvZGVyICplbmNvZGVyLCBzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCQkgICAgICBz
dHJ1Y3QgZHJtX2JyaWRnZSAqcHJldmlvdXMpOwogCi1ib29sIGRybV9icmlkZ2VfbW9kZV9maXh1
cChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJICAgY29uc3Qgc3RydWN0IGRybV9kaXNw
bGF5X21vZGUgKm1vZGUsCi0JCQkgICBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqYWRqdXN0ZWRf
bW9kZSk7Ci1lbnVtIGRybV9tb2RlX3N0YXR1cyBkcm1fYnJpZGdlX21vZGVfdmFsaWQoc3RydWN0
IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJCQkJICAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21v
ZGUgKm1vZGUpOwotdm9pZCBkcm1fYnJpZGdlX2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJy
aWRnZSk7Ci12b2lkIGRybV9icmlkZ2VfcG9zdF9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpi
cmlkZ2UpOwotdm9pZCBkcm1fYnJpZGdlX21vZGVfc2V0KHN0cnVjdCBkcm1fYnJpZGdlICpicmlk
Z2UsCi0JCQkgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCi0JCQkgY29uc3Qg
c3RydWN0IGRybV9kaXNwbGF5X21vZGUgKmFkanVzdGVkX21vZGUpOwotdm9pZCBkcm1fYnJpZGdl
X3ByZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSk7Ci12b2lkIGRybV9icmlkZ2Vf
ZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpOworYm9vbCBkcm1fYnJpZGdlX2NoYWlu
X21vZGVfZml4dXAoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkgY29uc3Qgc3RydWN0
IGRybV9kaXNwbGF5X21vZGUgKm1vZGUsCisJCQkJIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICph
ZGp1c3RlZF9tb2RlKTsKK2VudW0gZHJtX21vZGVfc3RhdHVzCitkcm1fYnJpZGdlX2NoYWluX21v
ZGVfdmFsaWQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCSAgICBjb25zdCBzdHJ1Y3Qg
ZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSk7Cit2b2lkIGRybV9icmlkZ2VfY2hhaW5fZGlzYWJsZShz
dHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKTsKK3ZvaWQgZHJtX2JyaWRnZV9jaGFpbl9wb3N0X2Rp
c2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSk7Cit2b2lkIGRybV9icmlkZ2VfY2hhaW5f
bW9kZV9zZXQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCSAgICAgICBjb25zdCBzdHJ1
Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwKKwkJCSAgICAgICBjb25zdCBzdHJ1Y3QgZHJtX2Rp
c3BsYXlfbW9kZSAqYWRqdXN0ZWRfbW9kZSk7Cit2b2lkIGRybV9icmlkZ2VfY2hhaW5fcHJlX2Vu
YWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKTsKK3ZvaWQgZHJtX2JyaWRnZV9jaGFpbl9l
bmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSk7CiAKLXZvaWQgZHJtX2F0b21pY19icmlk
Z2VfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAotCQkJICAgICAgIHN0cnVjdCBk
cm1fYXRvbWljX3N0YXRlICpzdGF0ZSk7Ci12b2lkIGRybV9hdG9taWNfYnJpZGdlX3Bvc3RfZGlz
YWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAordm9pZCBkcm1fYXRvbWljX2JyaWRnZV9j
aGFpbl9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJICAgICBzdHJ1Y3Qg
ZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpOwordm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9w
b3N0X2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkJICBzdHJ1Y3QgZHJt
X2F0b21pY19zdGF0ZSAqc3RhdGUpOwordm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9wcmVf
ZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJCXN0cnVjdCBkcm1fYXRvbWlj
X3N0YXRlICpzdGF0ZSk7Cit2b2lkIGRybV9hdG9taWNfYnJpZGdlX2NoYWluX2VuYWJsZShzdHJ1
Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCQkJCSAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAq
c3RhdGUpOwotdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UsCi0JCQkJICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpOwotdm9p
ZCBkcm1fYXRvbWljX2JyaWRnZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJ
CSAgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSk7CiAKICNpZmRlZiBDT05GSUdf
RFJNX1BBTkVMX0JSSURHRQogc3RydWN0IGRybV9icmlkZ2UgKmRybV9wYW5lbF9icmlkZ2VfYWRk
KHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsLAotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1k
ZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
