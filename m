Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3EF5B2D4414
	for <lists+dri-devel@lfdr.de>; Wed,  9 Dec 2020 15:22:07 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B91D76EA37;
	Wed,  9 Dec 2020 14:22:02 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ot1-x344.google.com (mail-ot1-x344.google.com
 [IPv6:2607:f8b0:4864:20::344])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 177706EA37
 for <dri-devel@lists.freedesktop.org>; Wed,  9 Dec 2020 14:22:01 +0000 (UTC)
Received: by mail-ot1-x344.google.com with SMTP id o11so1486272ote.4
 for <dri-devel@lists.freedesktop.org>; Wed, 09 Dec 2020 06:22:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=gI9eFa+6bCpSGxzdCQPWp6bhhCKcDzBWVcalAzSESYM=;
 b=OSEsTmVyGLH8r64Ulie0vq+Fm1Jo/UmfxngvBV4QmdfB5acbRuhWWtmgk/XMtuBcSI
 18BbGUhqUT7noXoHMINWCmQH2uutoaRM2/sQ+P6FLqo8xDICFS8VAP9PAQwOPqo0BvPO
 1DOP06lGcTDwmL/6+kfkMfVh13fbQ30130F90=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=gI9eFa+6bCpSGxzdCQPWp6bhhCKcDzBWVcalAzSESYM=;
 b=Y/6sxyPd5LEQedTqwQ8aA1IZexOhjJl7JZ4AvbEeBVGQaCtMAoz+au4GIyKX3m3zl4
 WLyUDMDaRXFqHTyXUhPPXCmJmRiwucjdRENPAMHIsbT/j0nmIE8TgmnWWaKCVG63EpxL
 1I+WDoFqciQSHt6VwmuySL4ujADRYao8cHL0SvEh9vttICieoYd0pmfcDrKRzfBUpXHa
 b2OH0pckcR/zXVO6BRdfHuPpCVj2uIxVNnhcbxagsF0mSdRjTOaVfV1V3UzF+gTJlmUU
 BEwNAdNzGU4euK7sKtRbhk21DMIruXPatGY5UN+JFw4zu7IgVk3qpsfFcvb7w4OO/nMW
 4OTA==
X-Gm-Message-State: AOAM5301bi/hOghhDIHc5TClkrF4tYRIaMBeB3I3x4WfD2lMyVPHRm1f
 rh3X7dsFw6h8vP09yfhgjcVdz+QhTH0jAR+Q7xxcXVzeWWY=
X-Google-Smtp-Source: ABdhPJyTJHnJ18L8IbtDzE0+KPnq0PgGF8Wmfs2ij8zYgx3DYZ7su500Rd/c1UW3WOrFpvnj+3O/0NjqtxmHMimJQAc=
X-Received: by 2002:a9d:470f:: with SMTP id a15mr1888770otf.303.1607523719585; 
 Wed, 09 Dec 2020 06:21:59 -0800 (PST)
MIME-Version: 1.0
References: <20201209141000.1794-1-christian.koenig@amd.com>
In-Reply-To: <20201209141000.1794-1-christian.koenig@amd.com>
From: Daniel Vetter <daniel@ffwll.ch>
Date: Wed, 9 Dec 2020 15:21:48 +0100
Message-ID: <CAKMK7uEOzRz8_8VCX7L8BEb4vvcRtzXGVezY-W1dniKLxQGo+g@mail.gmail.com>
Subject: Re: [PATCH] drm/ttm: cleanup BO size handling v2
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <ckoenig.leichtzumerken@gmail.com>
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel <dri-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBEZWMgOSwgMjAyMCBhdCAzOjEwIFBNIENocmlzdGlhbiBLw7ZuaWcKPGNrb2VuaWcu
bGVpY2h0enVtZXJrZW5AZ21haWwuY29tPiB3cm90ZToKPgo+IEJhc2VkIG9uIGFuIGlkZWEgZnJv
bSBEYXZlLCBidXQgY2xlYW5lZCB1cCBhIGJpdC4KPgo+IFdlIGhhZCBtdWx0aXBsZSBmaWVsZHMg
Zm9yIGVzc2VudGlhbGx5IHRoZSBzYW1lIHRoaW5nLgo+Cj4gTm93IGJvLT5iYXNlLnNpemUgaXMg
dGhlIG9yaWdpbmFsIHNpemUgb2YgdGhlIEJPIGluCj4gYXJiaXRyYXJ5IHVuaXRzLCB1c3VhbGx5
IGJ5dGVzLgo+Cj4gYm8tPm1lbS5udW1fcGFnZXMgaXMgdGhlIHNpemUgaW4gbnVtYmVyIG9mIHBh
Z2VzIGluIHRoZQo+IHJlc291cmNlIGRvbWFpbiBvZiBiby0+bWVtLm1lbV90eXBlLgo+Cj4gdjI6
IHVzZSB0aGUgR0VNIG9iamVjdCBzaXplIGluc3RlYWQgb2YgdGhlIEJPIHNpemUKPgo+IFNpZ25l
ZC1vZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KPiBS
ZXZpZXdlZC1ieTogSHVhbmcgUnVpIDxyYXkuaHVhbmdAYW1kLmNvbT4gKHYxKQoKU2luY2UgSHVh
bmcgY2hlY2tlZCBpdCBhbHJlYWR5IEkndmUganVzdCBkb25lIGEgY3Vyc29yeSBsb2NrOgoKQWNr
ZWQtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+Cgo+IC0tLQo+ICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5jICAgfCAgMiArLQo+ICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ21jLmMgICAgICAgfCAgMiArLQo+ICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMgICAgfCAgMiArLQo+ICBk
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmggICAgfCAgNCArLS0KPiAg
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3RyYWNlLmggICAgIHwgIDIgKy0KPiAg
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jICAgICAgIHwgIDYgKystLQo+
ICBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9tZXNfdjEwXzEuYyAgICAgICAgfCAgMiArLQo+
ICBkcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMgICAgICAgICAgfCAxMCArKyst
LS0KPiAgZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9kaXNwbGF5LmMgICAgIHwgIDYg
KystLQo+ICBkcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3ByaW1lLmMgICAgICAgfCAg
NCArLS0KPiAgZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbnYxN19mZW5jZS5jICAgICAgICAgIHwg
IDIgKy0KPiAgZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbnY1MF9mZW5jZS5jICAgICAgICAgIHwg
IDIgKy0KPiAgZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfb2JqZWN0LmggICAgICAgICAgICAgIHwg
IDIgKy0KPiAgZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fY3MuYyAgICAgICAgICAgIHwg
IDMgKy0KPiAgZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmMgICAgICAgIHwg
MTMgKysrKy0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmggICAg
ICAgIHwgIDQgKy0tCj4gIGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3ByaW1lLmMgICAg
ICAgICB8ICA0ICstLQo+ICBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90cmFjZS5oICAg
ICAgICAgfCAgMiArLQo+ICBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl90dG0uYyAgICAg
ICAgICAgfCAgMiArLQo+ICBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jICAgICAgICAgICAg
ICAgICAgfCAzMyArKysrKystLS0tLS0tLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRt
X2JvX3V0aWwuYyAgICAgICAgICAgICB8IDEyICsrKy0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fYm9fdm0uYyAgICAgICAgICAgICAgIHwgIDYgKystLQo+ICBkcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV90dC5jICAgICAgICAgICAgICAgICAgfCAgMiArLQo+ICBkcml2ZXJzL2dwdS9kcm0v
dm13Z2Z4L3Ztd2dmeF9ibGl0LmMgICAgICAgICAgfCAgNCArLS0KPiAgZHJpdmVycy9ncHUvZHJt
L3Ztd2dmeC92bXdnZnhfYm8uYyAgICAgICAgICAgIHwgIDYgKystLQo+ICBkcml2ZXJzL2dwdS9k
cm0vdm13Z2Z4L3Ztd2dmeF9jb3RhYmxlLmMgICAgICAgfCAgMiArLQo+ICBkcml2ZXJzL2dwdS9k
cm0vdm13Z2Z4L3Ztd2dmeF9leGVjYnVmLmMgICAgICAgfCAgNCArLS0KPiAgZHJpdmVycy9ncHUv
ZHJtL3Ztd2dmeC92bXdnZnhfZ21yaWRfbWFuYWdlci5jIHwgIDUgKystCj4gIGRyaXZlcnMvZ3B1
L2RybS92bXdnZngvdm13Z2Z4X2ttcy5jICAgICAgICAgICB8ICAyICstCj4gIGRyaXZlcnMvZ3B1
L2RybS92bXdnZngvdm13Z2Z4X3BhZ2VfZGlydHkuYyAgICB8ICA4ICsrLS0tCj4gIGRyaXZlcnMv
Z3B1L2RybS92bXdnZngvdm13Z2Z4X3Jlc291cmNlLmMgICAgICB8ICAyICstCj4gIGRyaXZlcnMv
Z3B1L2RybS92bXdnZngvdm13Z2Z4X3NoYWRlci5jICAgICAgICB8ICAzICstCj4gIGRyaXZlcnMv
Z3B1L2RybS92bXdnZngvdm13Z2Z4X3N0ZHUuYyAgICAgICAgICB8ICA0ICstLQo+ICBkcml2ZXJz
L2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9zdXJmYWNlLmMgICAgICAgfCAgNyArKy0tCj4gIGluY2x1
ZGUvZHJtL3R0bS90dG1fYm9fYXBpLmggICAgICAgICAgICAgICAgICB8ICA5ICsrLS0tCj4gIGlu
Y2x1ZGUvZHJtL3R0bS90dG1fcmVzb3VyY2UuaCAgICAgICAgICAgICAgICB8ICAxIC0KPiAgMzYg
ZmlsZXMgY2hhbmdlZCwgODIgaW5zZXJ0aW9ucygrKSwgMTAyIGRlbGV0aW9ucygtKQo+Cj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmMgYi9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5jCj4gaW5kZXggZTU5MTll
ZmNhODcwLi5jNGM5M2YxOWQyNzMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2RtYV9idWYuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9kbWFfYnVmLmMKPiBAQCAtMjY5LDcgKzI2OSw3IEBAIHN0YXRpYyBzdHJ1Y3Qgc2df
dGFibGUgKmFtZGdwdV9kbWFfYnVmX21hcChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRh
Y2gsCj4gICAgICAgICBjYXNlIFRUTV9QTF9UVDoKPiAgICAgICAgICAgICAgICAgc2d0ID0gZHJt
X3ByaW1lX3BhZ2VzX3RvX3NnKG9iai0+ZGV2LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgYm8tPnRiby50dG0tPnBhZ2VzLAo+IC0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgYm8tPnRiby5udW1fcGFnZXMpOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm8tPnRiby50dG0tPm51bV9wYWdl
cyk7Cj4gICAgICAgICAgICAgICAgIGlmIChJU19FUlIoc2d0KSkKPiAgICAgICAgICAgICAgICAg
ICAgICAgICByZXR1cm4gc2d0Owo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9nbWMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9n
bWMuYwo+IGluZGV4IDA1NmNiODdkMDllYS4uNTJiY2QxYjU1ODJmIDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nbWMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nbWMuYwo+IEBAIC0xMjEsNyArMTIxLDcgQEAgdWludDY0
X3QgYW1kZ3B1X2dtY19hZ3BfYWRkcihzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvKQo+ICB7
Cj4gICAgICAgICBzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiA9IGFtZGdwdV90dG1fYWRldihi
by0+YmRldik7Cj4KPiAtICAgICAgIGlmIChiby0+bnVtX3BhZ2VzICE9IDEgfHwgYm8tPnR0bS0+
Y2FjaGluZyA9PSB0dG1fY2FjaGVkKQo+ICsgICAgICAgaWYgKGJvLT50dG0tPm51bV9wYWdlcyAh
PSAxIHx8IGJvLT50dG0tPmNhY2hpbmcgPT0gdHRtX2NhY2hlZCkKPiAgICAgICAgICAgICAgICAg
cmV0dXJuIEFNREdQVV9CT19JTlZBTElEX09GRlNFVDsKPgo+ICAgICAgICAgaWYgKGJvLT50dG0t
PmRtYV9hZGRyZXNzWzBdICsgUEFHRV9TSVpFID49IGFkZXYtPmdtYy5hZ3Bfc2l6ZSkKPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5jIGIvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5jCj4gaW5kZXggYzZjOTcyM2Qz
ZDhhLi4zODFlY2M0Nzg4ZDUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X29iamVjdC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X29iamVjdC5jCj4gQEAgLTc4Nyw3ICs3ODcsNyBAQCBpbnQgYW1kZ3B1X2JvX2ttYXAoc3Ry
dWN0IGFtZGdwdV9ibyAqYm8sIHZvaWQgKipwdHIpCj4gICAgICAgICBpZiAociA8IDApCj4gICAg
ICAgICAgICAgICAgIHJldHVybiByOwo+Cj4gLSAgICAgICByID0gdHRtX2JvX2ttYXAoJmJvLT50
Ym8sIDAsIGJvLT50Ym8ubnVtX3BhZ2VzLCAmYm8tPmttYXApOwo+ICsgICAgICAgciA9IHR0bV9i
b19rbWFwKCZiby0+dGJvLCAwLCBiby0+dGJvLm1lbS5udW1fcGFnZXMsICZiby0+a21hcCk7Cj4g
ICAgICAgICBpZiAocikKPiAgICAgICAgICAgICAgICAgcmV0dXJuIHI7Cj4KPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5oIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29iamVjdC5oCj4gaW5kZXggZWQ0N2NiYWM0Zjc1Li5h
OTlhNWNkZTQyZGQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X29iamVjdC5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X29i
amVjdC5oCj4gQEAgLTE3NCwxMiArMTc0LDEyIEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBhbWRncHVf
Ym9fdW5yZXNlcnZlKHN0cnVjdCBhbWRncHVfYm8gKmJvKQo+Cj4gIHN0YXRpYyBpbmxpbmUgdW5z
aWduZWQgbG9uZyBhbWRncHVfYm9fc2l6ZShzdHJ1Y3QgYW1kZ3B1X2JvICpibykKPiAgewo+IC0g
ICAgICAgcmV0dXJuIGJvLT50Ym8ubnVtX3BhZ2VzIDw8IFBBR0VfU0hJRlQ7Cj4gKyAgICAgICBy
ZXR1cm4gYm8tPnRiby5iYXNlLnNpemU7Cj4gIH0KPgo+ICBzdGF0aWMgaW5saW5lIHVuc2lnbmVk
IGFtZGdwdV9ib19uZ3B1X3BhZ2VzKHN0cnVjdCBhbWRncHVfYm8gKmJvKQo+ICB7Cj4gLSAgICAg
ICByZXR1cm4gKGJvLT50Ym8ubnVtX3BhZ2VzIDw8IFBBR0VfU0hJRlQpIC8gQU1ER1BVX0dQVV9Q
QUdFX1NJWkU7Cj4gKyAgICAgICByZXR1cm4gYm8tPnRiby5iYXNlLnNpemUgLyBBTURHUFVfR1BV
X1BBR0VfU0laRTsKPiAgfQo+Cj4gIHN0YXRpYyBpbmxpbmUgdW5zaWduZWQgYW1kZ3B1X2JvX2dw
dV9wYWdlX2FsaWdubWVudChzdHJ1Y3QgYW1kZ3B1X2JvICpibykKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3RyYWNlLmggYi9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdHJhY2UuaAo+IGluZGV4IGVlOTQ4MGQxNGNiYy4uMjA3MTVkZGJi
NzQ2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90cmFj
ZS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3RyYWNlLmgKPiBA
QCAtMTI3LDcgKzEyNyw3IEBAIFRSQUNFX0VWRU5UKGFtZGdwdV9ib19jcmVhdGUsCj4KPiAgICAg
ICAgICAgICBUUF9mYXN0X2Fzc2lnbigKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX2Vu
dHJ5LT5ibyA9IGJvOwo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgIF9fZW50cnktPnBhZ2Vz
ID0gYm8tPnRiby5udW1fcGFnZXM7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgX19lbnRy
eS0+cGFnZXMgPSBiby0+dGJvLm1lbS5udW1fcGFnZXM7Cj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgX19lbnRyeS0+dHlwZSA9IGJvLT50Ym8ubWVtLm1lbV90eXBlOwo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIF9fZW50cnktPnByZWZlciA9IGJvLT5wcmVmZXJyZWRfZG9tYWluczsK
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX2VudHJ5LT5hbGxvdyA9IGJvLT5hbGxvd2Vk
X2RvbWFpbnM7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV90dG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwo+IGluZGV4
IGVjOTNkNGZkYWJiZC4uNTM0Njg5MWEzZjczIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV90dG0uYwo+IEBAIC02MzYsNyArNjM2LDcgQEAgc3RhdGljIGludCBhbWRncHVf
Ym9fbW92ZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBib29sIGV2aWN0LAo+Cj4gIG91
dDoKPiAgICAgICAgIC8qIHVwZGF0ZSBzdGF0aXN0aWNzICovCj4gLSAgICAgICBhdG9taWM2NF9h
ZGQoKHU2NCliby0+bnVtX3BhZ2VzIDw8IFBBR0VfU0hJRlQsICZhZGV2LT5udW1fYnl0ZXNfbW92
ZWQpOwo+ICsgICAgICAgYXRvbWljNjRfYWRkKGJvLT5iYXNlLnNpemUsICZhZGV2LT5udW1fYnl0
ZXNfbW92ZWQpOwo+ICAgICAgICAgYW1kZ3B1X2JvX21vdmVfbm90aWZ5KGJvLCBldmljdCwgbmV3
X21lbSk7Cj4gICAgICAgICByZXR1cm4gMDsKPiAgfQo+IEBAIC0yMTMxLDcgKzIxMzEsNyBAQCBp
bnQgYW1kZ3B1X2ZpbGxfYnVmZmVyKHN0cnVjdCBhbWRncHVfYm8gKmJvLAo+ICAgICAgICAgICAg
ICAgICAgICAgICAgIHJldHVybiByOwo+ICAgICAgICAgfQo+Cj4gLSAgICAgICBudW1fcGFnZXMg
PSBiby0+dGJvLm51bV9wYWdlczsKPiArICAgICAgIG51bV9wYWdlcyA9IGJvLT50Ym8ubWVtLm51
bV9wYWdlczsKPiAgICAgICAgIG1tX25vZGUgPSBiby0+dGJvLm1lbS5tbV9ub2RlOwo+ICAgICAg
ICAgbnVtX2xvb3BzID0gMDsKPiAgICAgICAgIHdoaWxlIChudW1fcGFnZXMpIHsKPiBAQCAtMjE2
MSw3ICsyMTYxLDcgQEAgaW50IGFtZGdwdV9maWxsX2J1ZmZlcihzdHJ1Y3QgYW1kZ3B1X2JvICpi
bywKPiAgICAgICAgICAgICAgICAgfQo+ICAgICAgICAgfQo+Cj4gLSAgICAgICBudW1fcGFnZXMg
PSBiby0+dGJvLm51bV9wYWdlczsKPiArICAgICAgIG51bV9wYWdlcyA9IGJvLT50Ym8ubWVtLm51
bV9wYWdlczsKPiAgICAgICAgIG1tX25vZGUgPSBiby0+dGJvLm1lbS5tbV9ub2RlOwo+Cj4gICAg
ICAgICB3aGlsZSAobnVtX3BhZ2VzKSB7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L21lc192MTBfMS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvbWVzX3Yx
MF8xLmMKPiBpbmRleCA5ODVlNDU0NDYzZTEuLjdmMzA2MjlmMjFhMiAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9tZXNfdjEwXzEuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L21lc192MTBfMS5jCj4gQEAgLTU1NCw3ICs1NTQsNyBAQCBzdGF0aWMg
aW50IG1lc192MTBfMV9hbGxvY2F0ZV9lb3BfYnVmKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2
KQo+ICAgICAgICAgICAgICAgICByZXR1cm4gcjsKPiAgICAgICAgIH0KPgo+IC0gICAgICAgbWVt
c2V0KGVvcCwgMCwgYWRldi0+bWVzLmVvcF9ncHVfb2JqLT50Ym8ubWVtLnNpemUpOwo+ICsgICAg
ICAgbWVtc2V0KGVvcCwgMCwgYWRldi0+bWVzLmVvcF9ncHVfb2JqLT50Ym8uYmFzZS5zaXplKTsK
Pgo+ICAgICAgICAgYW1kZ3B1X2JvX2t1bm1hcChhZGV2LT5tZXMuZW9wX2dwdV9vYmopOwo+ICAg
ICAgICAgYW1kZ3B1X2JvX3VucmVzZXJ2ZShhZGV2LT5tZXMuZW9wX2dwdV9vYmopOwo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMgYi9kcml2ZXJzL2dw
dS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMKPiBpbmRleCBiYzU0MmFjNGM0YjYuLmMxYTY3NWI4
ZmM0MyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMK
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMKPiBAQCAtNDczLDEw
ICs0NzMsMTAgQEAgbm91dmVhdV9ib19waW4oc3RydWN0IG5vdXZlYXVfYm8gKm52Ym8sIHVpbnQz
Ml90IGRvbWFpbiwgYm9vbCBjb250aWcpCj4KPiAgICAgICAgIHN3aXRjaCAoYm8tPm1lbS5tZW1f
dHlwZSkgewo+ICAgICAgICAgY2FzZSBUVE1fUExfVlJBTToKPiAtICAgICAgICAgICAgICAgZHJt
LT5nZW0udnJhbV9hdmFpbGFibGUgLT0gYm8tPm1lbS5zaXplOwo+ICsgICAgICAgICAgICAgICBk
cm0tPmdlbS52cmFtX2F2YWlsYWJsZSAtPSBiby0+YmFzZS5zaXplOwo+ICAgICAgICAgICAgICAg
ICBicmVhazsKPiAgICAgICAgIGNhc2UgVFRNX1BMX1RUOgo+IC0gICAgICAgICAgICAgICBkcm0t
PmdlbS5nYXJ0X2F2YWlsYWJsZSAtPSBiby0+bWVtLnNpemU7Cj4gKyAgICAgICAgICAgICAgIGRy
bS0+Z2VtLmdhcnRfYXZhaWxhYmxlIC09IGJvLT5iYXNlLnNpemU7Cj4gICAgICAgICAgICAgICAg
IGJyZWFrOwo+ICAgICAgICAgZGVmYXVsdDoKPiAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gQEAg
LTUwNCwxMCArNTA0LDEwIEBAIG5vdXZlYXVfYm9fdW5waW4oc3RydWN0IG5vdXZlYXVfYm8gKm52
Ym8pCj4gICAgICAgICBpZiAoIW52Ym8tPmJvLnBpbl9jb3VudCkgewo+ICAgICAgICAgICAgICAg
ICBzd2l0Y2ggKGJvLT5tZW0ubWVtX3R5cGUpIHsKPiAgICAgICAgICAgICAgICAgY2FzZSBUVE1f
UExfVlJBTToKPiAtICAgICAgICAgICAgICAgICAgICAgICBkcm0tPmdlbS52cmFtX2F2YWlsYWJs
ZSArPSBiby0+bWVtLnNpemU7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgZHJtLT5nZW0udnJh
bV9hdmFpbGFibGUgKz0gYm8tPmJhc2Uuc2l6ZTsKPiAgICAgICAgICAgICAgICAgICAgICAgICBi
cmVhazsKPiAgICAgICAgICAgICAgICAgY2FzZSBUVE1fUExfVFQ6Cj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgZHJtLT5nZW0uZ2FydF9hdmFpbGFibGUgKz0gYm8tPm1lbS5zaXplOwo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIGRybS0+Z2VtLmdhcnRfYXZhaWxhYmxlICs9IGJvLT5iYXNlLnNp
emU7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gICAgICAgICAgICAgICAgIGRl
ZmF1bHQ6Cj4gICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gQEAgLTkxMyw3ICs5MTMs
NyBAQCBub3V2ZWF1X2JvX3ZtX2JpbmQoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywgc3Ry
dWN0IHR0bV9yZXNvdXJjZSAqbmV3X3JlZywKPiAgICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4K
PiAgICAgICAgIGlmIChkcm0tPmNsaWVudC5kZXZpY2UuaW5mby5mYW1pbHkgPj0gTlZfREVWSUNF
X0lORk9fVjBfQ0VMU0lVUykgewo+IC0gICAgICAgICAgICAgICAqbmV3X3RpbGUgPSBudjEwX2Jv
X3NldF90aWxpbmcoZGV2LCBvZmZzZXQsIG5ld19yZWctPnNpemUsCj4gKyAgICAgICAgICAgICAg
ICpuZXdfdGlsZSA9IG52MTBfYm9fc2V0X3RpbGluZyhkZXYsIG9mZnNldCwgYm8tPmJhc2Uuc2l6
ZSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG52Ym8t
Pm1vZGUsIG52Ym8tPnpldGEpOwo+ICAgICAgICAgfQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZGlzcGxheS5jIGIvZHJpdmVycy9ncHUvZHJtL25vdXZl
YXUvbm91dmVhdV9kaXNwbGF5LmMKPiBpbmRleCBiY2ViNDhhMmRmY2EuLjU4NGQxZjFmZWJjYiAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2Rpc3BsYXkuYwo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZGlzcGxheS5jCj4gQEAgLTI4
OCw5ICsyODgsOSBAQCBub3V2ZWF1X2NoZWNrX2JsX3NpemUoc3RydWN0IG5vdXZlYXVfZHJtICpk
cm0sIHN0cnVjdCBub3V2ZWF1X2JvICpudmJvLAo+Cj4gICAgICAgICBEUk1fREVCVUdfS01TKCJv
ZmZzZXQ9JXUgc3RyaWRlPSV1IGg9JXUgdGlsZV9tb2RlPTB4JTAyeCBidz0ldSBiaD0ldSBnb2Jf
c2l6ZT0ldSBibF9zaXplPSVsbHUgc2l6ZT0lbHVcbiIsCj4gICAgICAgICAgICAgICAgICAgICAg
IG9mZnNldCwgc3RyaWRlLCBoLCB0aWxlX21vZGUsIGJ3LCBiaCwgZ29iX3NpemUsIGJsX3NpemUs
Cj4gLSAgICAgICAgICAgICAgICAgICAgIG52Ym8tPmJvLm1lbS5zaXplKTsKPiArICAgICAgICAg
ICAgICAgICAgICAgbnZiby0+Ym8uYmFzZS5zaXplKTsKPgo+IC0gICAgICAgaWYgKGJsX3NpemUg
KyBvZmZzZXQgPiBudmJvLT5iby5tZW0uc2l6ZSkKPiArICAgICAgIGlmIChibF9zaXplICsgb2Zm
c2V0ID4gbnZiby0+Ym8uYmFzZS5zaXplKQo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVSQU5H
RTsKPgo+ICAgICAgICAgcmV0dXJuIDA7Cj4gQEAgLTM2Myw3ICszNjMsNyBAQCBub3V2ZWF1X2Zy
YW1lYnVmZmVyX25ldyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAgICAgICAgICAgICAgICB9
IGVsc2Ugewo+ICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IHNpemUgPSBtb2RlX2Nt
ZC0+cGl0Y2hlc1tpXSAqIGhlaWdodDsKPgo+IC0gICAgICAgICAgICAgICAgICAgICAgIGlmIChz
aXplICsgbW9kZV9jbWQtPm9mZnNldHNbaV0gPiBudmJvLT5iby5tZW0uc2l6ZSkKPiArICAgICAg
ICAgICAgICAgICAgICAgICBpZiAoc2l6ZSArIG1vZGVfY21kLT5vZmZzZXRzW2ldID4gbnZiby0+
Ym8uYmFzZS5zaXplKQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1F
UkFOR0U7Cj4gICAgICAgICAgICAgICAgIH0KPiAgICAgICAgIH0KPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9wcmltZS5jIGIvZHJpdmVycy9ncHUvZHJtL25v
dXZlYXUvbm91dmVhdV9wcmltZS5jCj4gaW5kZXggMmYxNmI1MjQ5MjgzLi4zNDc0ODg2ODVmNzQg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9wcmltZS5jCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9wcmltZS5jCj4gQEAgLTMwLDkg
KzMwLDkgQEAKPiAgc3RydWN0IHNnX3RhYmxlICpub3V2ZWF1X2dlbV9wcmltZV9nZXRfc2dfdGFi
bGUoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCj4gIHsKPiAgICAgICAgIHN0cnVjdCBub3V2
ZWF1X2JvICpudmJvID0gbm91dmVhdV9nZW1fb2JqZWN0KG9iaik7Cj4gLSAgICAgICBpbnQgbnBh
Z2VzID0gbnZiby0+Ym8ubnVtX3BhZ2VzOwo+Cj4gLSAgICAgICByZXR1cm4gZHJtX3ByaW1lX3Bh
Z2VzX3RvX3NnKG9iai0+ZGV2LCBudmJvLT5iby50dG0tPnBhZ2VzLCBucGFnZXMpOwo+ICsgICAg
ICAgcmV0dXJuIGRybV9wcmltZV9wYWdlc190b19zZyhvYmotPmRldiwgbnZiby0+Ym8udHRtLT5w
YWdlcywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnZiby0+Ym8udHRt
LT5udW1fcGFnZXMpOwo+ICB9Cj4KPiAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICpub3V2ZWF1X2dl
bV9wcmltZV9pbXBvcnRfc2dfdGFibGUoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbnYxN19mZW5jZS5jIGIvZHJpdmVycy9ncHUv
ZHJtL25vdXZlYXUvbnYxN19mZW5jZS5jCj4gaW5kZXggMTI1M2ZkZWM3MTJkLi5iMWNkOGQ3ZGQ4
N2QgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbnYxN19mZW5jZS5jCj4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbnYxN19mZW5jZS5jCj4gQEAgLTgwLDcgKzgw
LDcgQEAgbnYxN19mZW5jZV9jb250ZXh0X25ldyhzdHJ1Y3Qgbm91dmVhdV9jaGFubmVsICpjaGFu
KQo+ICAgICAgICAgc3RydWN0IG52MTBfZmVuY2VfY2hhbiAqZmN0eDsKPiAgICAgICAgIHN0cnVj
dCB0dG1fcmVzb3VyY2UgKnJlZyA9ICZwcml2LT5iby0+Ym8ubWVtOwo+ICAgICAgICAgdTMyIHN0
YXJ0ID0gcmVnLT5zdGFydCAqIFBBR0VfU0laRTsKPiAtICAgICAgIHUzMiBsaW1pdCA9IHN0YXJ0
ICsgcmVnLT5zaXplIC0gMTsKPiArICAgICAgIHUzMiBsaW1pdCA9IHN0YXJ0ICsgcHJpdi0+Ym8t
PmJvLmJhc2Uuc2l6ZSAtIDE7Cj4gICAgICAgICBpbnQgcmV0ID0gMDsKPgo+ICAgICAgICAgZmN0
eCA9IGNoYW4tPmZlbmNlID0ga3phbGxvYyhzaXplb2YoKmZjdHgpLCBHRlBfS0VSTkVMKTsKPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbnY1MF9mZW5jZS5jIGIvZHJpdmVy
cy9ncHUvZHJtL25vdXZlYXUvbnY1MF9mZW5jZS5jCj4gaW5kZXggNDQ3MjM4ZTNjYmU3Li4xNjI1
ODI2NTA1ZjYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbnY1MF9mZW5j
ZS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbnY1MF9mZW5jZS5jCj4gQEAgLTM5
LDcgKzM5LDcgQEAgbnY1MF9mZW5jZV9jb250ZXh0X25ldyhzdHJ1Y3Qgbm91dmVhdV9jaGFubmVs
ICpjaGFuKQo+ICAgICAgICAgc3RydWN0IG52MTBfZmVuY2VfY2hhbiAqZmN0eDsKPiAgICAgICAg
IHN0cnVjdCB0dG1fcmVzb3VyY2UgKnJlZyA9ICZwcml2LT5iby0+Ym8ubWVtOwo+ICAgICAgICAg
dTMyIHN0YXJ0ID0gcmVnLT5zdGFydCAqIFBBR0VfU0laRTsKPiAtICAgICAgIHUzMiBsaW1pdCA9
IHN0YXJ0ICsgcmVnLT5zaXplIC0gMTsKPiArICAgICAgIHUzMiBsaW1pdCA9IHN0YXJ0ICsgcHJp
di0+Ym8tPmJvLmJhc2Uuc2l6ZSAtIDE7Cj4gICAgICAgICBpbnQgcmV0Owo+Cj4gICAgICAgICBm
Y3R4ID0gY2hhbi0+ZmVuY2UgPSBremFsbG9jKHNpemVvZigqZmN0eCksIEdGUF9LRVJORUwpOwo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9vYmplY3QuaCBiL2RyaXZlcnMv
Z3B1L2RybS9xeGwvcXhsX29iamVjdC5oCj4gaW5kZXggZWJmMjRjOWQyYmYyLi5lNjBhOGY4OGUy
MjYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfb2JqZWN0LmgKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9vYmplY3QuaAo+IEBAIC01MCw3ICs1MCw3IEBAIHN0
YXRpYyBpbmxpbmUgdm9pZCBxeGxfYm9fdW5yZXNlcnZlKHN0cnVjdCBxeGxfYm8gKmJvKQo+Cj4g
IHN0YXRpYyBpbmxpbmUgdW5zaWduZWQgbG9uZyBxeGxfYm9fc2l6ZShzdHJ1Y3QgcXhsX2JvICpi
bykKPiAgewo+IC0gICAgICAgcmV0dXJuIGJvLT50Ym8ubnVtX3BhZ2VzIDw8IFBBR0VfU0hJRlQ7
Cj4gKyAgICAgICByZXR1cm4gYm8tPnRiby5iYXNlLnNpemU7Cj4gIH0KPgo+ICBzdGF0aWMgaW5s
aW5lIHU2NCBxeGxfYm9fbW1hcF9vZmZzZXQoc3RydWN0IHF4bF9ibyAqYm8pCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2NzLmMgYi9kcml2ZXJzL2dwdS9kcm0v
cmFkZW9uL3JhZGVvbl9jcy5jCj4gaW5kZXggMjFjZTJmOTUwMmMwLi40ZjM1YzMyOTU3YmUgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fY3MuYwo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2NzLmMKPiBAQCAtNDAxLDcgKzQwMSw4IEBAIHN0
YXRpYyBpbnQgY21wX3NpemVfc21hbGxlcl9maXJzdCh2b2lkICpwcml2LCBzdHJ1Y3QgbGlzdF9o
ZWFkICphLAo+ICAgICAgICAgc3RydWN0IHJhZGVvbl9ib19saXN0ICpsYiA9IGxpc3RfZW50cnko
Yiwgc3RydWN0IHJhZGVvbl9ib19saXN0LCB0di5oZWFkKTsKPgo+ICAgICAgICAgLyogU29ydCBB
IGJlZm9yZSBCIGlmIEEgaXMgc21hbGxlci4gKi8KPiAtICAgICAgIHJldHVybiAoaW50KWxhLT5y
b2JqLT50Ym8ubnVtX3BhZ2VzIC0gKGludClsYi0+cm9iai0+dGJvLm51bV9wYWdlczsKPiArICAg
ICAgIHJldHVybiAoaW50KWxhLT5yb2JqLT50Ym8ubWVtLm51bV9wYWdlcyAtCj4gKyAgICAgICAg
ICAgICAgIChpbnQpbGItPnJvYmotPnRiby5tZW0ubnVtX3BhZ2VzOwo+ICB9Cj4KPiAgLyoqCj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX29iamVjdC5jIGIvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmMKPiBpbmRleCBhYjgxZTM1Y2IwNjAu
LjlhOTk5OTMwZTNkZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVv
bl9vYmplY3QuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX29iamVjdC5j
Cj4gQEAgLTU0LDIwICs1NCwxOSBAQCBzdGF0aWMgdm9pZCByYWRlb25fdXBkYXRlX21lbW9yeV91
c2FnZShzdHJ1Y3QgcmFkZW9uX2JvICpibywKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB1bnNpZ25lZCBtZW1fdHlwZSwgaW50IHNpZ24pCj4gIHsKPiAgICAgICAgIHN0
cnVjdCByYWRlb25fZGV2aWNlICpyZGV2ID0gYm8tPnJkZXY7Cj4gLSAgICAgICB1NjQgc2l6ZSA9
ICh1NjQpYm8tPnRiby5udW1fcGFnZXMgPDwgUEFHRV9TSElGVDsKPgo+ICAgICAgICAgc3dpdGNo
IChtZW1fdHlwZSkgewo+ICAgICAgICAgY2FzZSBUVE1fUExfVFQ6Cj4gICAgICAgICAgICAgICAg
IGlmIChzaWduID4gMCkKPiAtICAgICAgICAgICAgICAgICAgICAgICBhdG9taWM2NF9hZGQoc2l6
ZSwgJnJkZXYtPmd0dF91c2FnZSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgYXRvbWljNjRf
YWRkKGJvLT50Ym8uYmFzZS5zaXplLCAmcmRldi0+Z3R0X3VzYWdlKTsKPiAgICAgICAgICAgICAg
ICAgZWxzZQo+IC0gICAgICAgICAgICAgICAgICAgICAgIGF0b21pYzY0X3N1YihzaXplLCAmcmRl
di0+Z3R0X3VzYWdlKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBhdG9taWM2NF9zdWIoYm8t
PnRiby5iYXNlLnNpemUsICZyZGV2LT5ndHRfdXNhZ2UpOwo+ICAgICAgICAgICAgICAgICBicmVh
azsKPiAgICAgICAgIGNhc2UgVFRNX1BMX1ZSQU06Cj4gICAgICAgICAgICAgICAgIGlmIChzaWdu
ID4gMCkKPiAtICAgICAgICAgICAgICAgICAgICAgICBhdG9taWM2NF9hZGQoc2l6ZSwgJnJkZXYt
PnZyYW1fdXNhZ2UpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGF0b21pYzY0X2FkZChiby0+
dGJvLmJhc2Uuc2l6ZSwgJnJkZXYtPnZyYW1fdXNhZ2UpOwo+ICAgICAgICAgICAgICAgICBlbHNl
Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgYXRvbWljNjRfc3ViKHNpemUsICZyZGV2LT52cmFt
X3VzYWdlKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBhdG9taWM2NF9zdWIoYm8tPnRiby5i
YXNlLnNpemUsICZyZGV2LT52cmFtX3VzYWdlKTsKPiAgICAgICAgICAgICAgICAgYnJlYWs7Cj4g
ICAgICAgICB9Cj4gIH0KPiBAQCAtMjU2LDcgKzI1NSw3IEBAIGludCByYWRlb25fYm9fa21hcChz
dHJ1Y3QgcmFkZW9uX2JvICpibywgdm9pZCAqKnB0cikKPiAgICAgICAgICAgICAgICAgfQo+ICAg
ICAgICAgICAgICAgICByZXR1cm4gMDsKPiAgICAgICAgIH0KPiAtICAgICAgIHIgPSB0dG1fYm9f
a21hcCgmYm8tPnRibywgMCwgYm8tPnRiby5udW1fcGFnZXMsICZiby0+a21hcCk7Cj4gKyAgICAg
ICByID0gdHRtX2JvX2ttYXAoJmJvLT50Ym8sIDAsIGJvLT50Ym8ubWVtLm51bV9wYWdlcywgJmJv
LT5rbWFwKTsKPiAgICAgICAgIGlmIChyKSB7Cj4gICAgICAgICAgICAgICAgIHJldHVybiByOwo+
ICAgICAgICAgfQo+IEBAIC02MTAsNyArNjA5LDcgQEAgaW50IHJhZGVvbl9ib19nZXRfc3VyZmFj
ZV9yZWcoc3RydWN0IHJhZGVvbl9ibyAqYm8pCj4gIG91dDoKPiAgICAgICAgIHJhZGVvbl9zZXRf
c3VyZmFjZV9yZWcocmRldiwgaSwgYm8tPnRpbGluZ19mbGFncywgYm8tPnBpdGNoLAo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBiby0+dGJvLm1lbS5zdGFydCA8PCBQQUdFX1NISUZU
LAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiby0+dGJvLm51bV9wYWdlcyA8PCBQ
QUdFX1NISUZUKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm8tPnRiby5iYXNl
LnNpemUpOwo+ICAgICAgICAgcmV0dXJuIDA7Cj4gIH0KPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuaCBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24v
cmFkZW9uX29iamVjdC5oCj4gaW5kZXggZDYwNmU5YTkzNWUzLi45ODk2ZDgyMzFmZTUgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmgKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9vYmplY3QuaAo+IEBAIC0xMDksMTIgKzEwOSwx
MiBAQCBzdGF0aWMgaW5saW5lIHU2NCByYWRlb25fYm9fZ3B1X29mZnNldChzdHJ1Y3QgcmFkZW9u
X2JvICpibykKPgo+ICBzdGF0aWMgaW5saW5lIHVuc2lnbmVkIGxvbmcgcmFkZW9uX2JvX3NpemUo
c3RydWN0IHJhZGVvbl9ibyAqYm8pCj4gIHsKPiAtICAgICAgIHJldHVybiBiby0+dGJvLm51bV9w
YWdlcyA8PCBQQUdFX1NISUZUOwo+ICsgICAgICAgcmV0dXJuIGJvLT50Ym8uYmFzZS5zaXplOwo+
ICB9Cj4KPiAgc3RhdGljIGlubGluZSB1bnNpZ25lZCByYWRlb25fYm9fbmdwdV9wYWdlcyhzdHJ1
Y3QgcmFkZW9uX2JvICpibykKPiAgewo+IC0gICAgICAgcmV0dXJuIChiby0+dGJvLm51bV9wYWdl
cyA8PCBQQUdFX1NISUZUKSAvIFJBREVPTl9HUFVfUEFHRV9TSVpFOwo+ICsgICAgICAgcmV0dXJu
IGJvLT50Ym8uYmFzZS5zaXplIC8gUkFERU9OX0dQVV9QQUdFX1NJWkU7Cj4gIH0KPgo+ICBzdGF0
aWMgaW5saW5lIHVuc2lnbmVkIHJhZGVvbl9ib19ncHVfcGFnZV9hbGlnbm1lbnQoc3RydWN0IHJh
ZGVvbl9ibyAqYm8pCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9u
X3ByaW1lLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9wcmltZS5jCj4gaW5kZXgg
MDg4ZDM5YTUxYzBkLi4wYTA5ZGJhYmEyODkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJt
L3JhZGVvbi9yYWRlb25fcHJpbWUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFk
ZW9uX3ByaW1lLmMKPiBAQCAtMzQsOSArMzQsOSBAQAo+ICBzdHJ1Y3Qgc2dfdGFibGUgKnJhZGVv
bl9nZW1fcHJpbWVfZ2V0X3NnX3RhYmxlKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKQo+ICB7
Cj4gICAgICAgICBzdHJ1Y3QgcmFkZW9uX2JvICpibyA9IGdlbV90b19yYWRlb25fYm8ob2JqKTsK
PiAtICAgICAgIGludCBucGFnZXMgPSBiby0+dGJvLm51bV9wYWdlczsKPgo+IC0gICAgICAgcmV0
dXJuIGRybV9wcmltZV9wYWdlc190b19zZyhvYmotPmRldiwgYm8tPnRiby50dG0tPnBhZ2VzLCBu
cGFnZXMpOwo+ICsgICAgICAgcmV0dXJuIGRybV9wcmltZV9wYWdlc190b19zZyhvYmotPmRldiwg
Ym8tPnRiby50dG0tPnBhZ2VzLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBiby0+dGJvLnR0bS0+bnVtX3BhZ2VzKTsKPiAgfQo+Cj4gIHN0cnVjdCBkcm1fZ2VtX29iamVj
dCAqcmFkZW9uX2dlbV9wcmltZV9pbXBvcnRfc2dfdGFibGUoc3RydWN0IGRybV9kZXZpY2UgKmRl
diwKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fdHJhY2UuaCBi
L2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3RyYWNlLmgKPiBpbmRleCBjOTNmM2FiM2M0
ZTMuLjE3MjljYjlhOTVjNSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3Jh
ZGVvbl90cmFjZS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fdHJhY2Uu
aAo+IEBAIC0yMiw3ICsyMiw3IEBAIFRSQUNFX0VWRU5UKHJhZGVvbl9ib19jcmVhdGUsCj4KPiAg
ICAgICAgICAgICBUUF9mYXN0X2Fzc2lnbigKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICBf
X2VudHJ5LT5ibyA9IGJvOwo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgIF9fZW50cnktPnBh
Z2VzID0gYm8tPnRiby5udW1fcGFnZXM7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgX19l
bnRyeS0+cGFnZXMgPSBiby0+dGJvLm1lbS5udW1fcGFnZXM7Cj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgKSwKPiAgICAgICAgICAgICBUUF9wcmludGsoImJvPSVwLCBwYWdlcz0ldSIsIF9f
ZW50cnktPmJvLCBfX2VudHJ5LT5wYWdlcykKPiAgKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVv
bl90dG0uYwo+IGluZGV4IGEzNDMyYzYzNDNiYS4uZWEzNjVhYzZmNGYxIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3R0bS5jCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3JhZGVvbi9yYWRlb25fdHRtLmMKPiBAQCAtMjc0LDcgKzI3NCw3IEBAIHN0YXRpYyBpbnQg
cmFkZW9uX2JvX21vdmUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywgYm9vbCBldmljdCwK
Pgo+ICBvdXQ6Cj4gICAgICAgICAvKiB1cGRhdGUgc3RhdGlzdGljcyAqLwo+IC0gICAgICAgYXRv
bWljNjRfYWRkKCh1NjQpYm8tPm51bV9wYWdlcyA8PCBQQUdFX1NISUZULCAmcmRldi0+bnVtX2J5
dGVzX21vdmVkKTsKPiArICAgICAgIGF0b21pYzY0X2FkZChiby0+YmFzZS5zaXplLCAmcmRldi0+
bnVtX2J5dGVzX21vdmVkKTsKPiAgICAgICAgIHJhZGVvbl9ib19tb3ZlX25vdGlmeShibywgZXZp
Y3QsIG5ld19tZW0pOwo+ICAgICAgICAgcmV0dXJuIDA7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMK
PiBpbmRleCAwMmNjNWQyNDdjMGQuLjRlZWViOWNiMGQ3MiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2dwdS9kcm0vdHRtL3R0bV9iby5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8u
Ywo+IEBAIC03Myw4ICs3Myw4IEBAIHN0YXRpYyB2b2lkIHR0bV9ib19tZW1fc3BhY2VfZGVidWco
c3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKPiAgICAgICAgIGludCBpLCBtZW1fdHlwZTsK
Pgo+ICAgICAgICAgZHJtX3ByaW50ZigmcCwgIk5vIHNwYWNlIGZvciAlcCAoJWx1IHBhZ2VzLCAl
bHVLLCAlbHVNKVxuIiwKPiAtICAgICAgICAgICAgICAgICAgYm8sIGJvLT5tZW0ubnVtX3BhZ2Vz
LCBiby0+bWVtLnNpemUgPj4gMTAsCj4gLSAgICAgICAgICAgICAgICAgIGJvLT5tZW0uc2l6ZSA+
PiAyMCk7Cj4gKyAgICAgICAgICAgICAgICAgIGJvLCBiby0+bWVtLm51bV9wYWdlcywgYm8tPmJh
c2Uuc2l6ZSA+PiAxMCwKPiArICAgICAgICAgICAgICAgICAgYm8tPmJhc2Uuc2l6ZSA+PiAyMCk7
Cj4gICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGxhY2VtZW50LT5udW1fcGxhY2VtZW50OyBpKysp
IHsKPiAgICAgICAgICAgICAgICAgbWVtX3R5cGUgPSBwbGFjZW1lbnQtPnBsYWNlbWVudFtpXS5t
ZW1fdHlwZTsKPiAgICAgICAgICAgICAgICAgZHJtX3ByaW50ZigmcCwgIiAgcGxhY2VtZW50WyVk
XT0weCUwOFggKCVkKVxuIiwKPiBAQCAtMjY4LDcgKzI2OCw3IEBAIHN0YXRpYyBpbnQgdHRtX2Jv
X2hhbmRsZV9tb3ZlX21lbShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+ICAgICAgICAg
ICAgICAgICBnb3RvIG91dF9lcnI7Cj4gICAgICAgICB9Cj4KPiAtICAgICAgIGN0eC0+Ynl0ZXNf
bW92ZWQgKz0gYm8tPm51bV9wYWdlcyA8PCBQQUdFX1NISUZUOwo+ICsgICAgICAgY3R4LT5ieXRl
c19tb3ZlZCArPSBiby0+YmFzZS5zaXplOwo+ICAgICAgICAgcmV0dXJuIDA7Cj4KPiAgb3V0X2Vy
cjoKPiBAQCAtOTg1LDggKzk4NSw3IEBAIHN0YXRpYyBpbnQgdHRtX2JvX21vdmVfYnVmZmVyKHN0
cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCj4KPiAgICAgICAgIG1lbXNldCgmaG9wLCAwLCBz
aXplb2YoaG9wKSk7Cj4KPiAtICAgICAgIG1lbS5udW1fcGFnZXMgPSBiby0+bnVtX3BhZ2VzOwo+
IC0gICAgICAgbWVtLnNpemUgPSBtZW0ubnVtX3BhZ2VzIDw8IFBBR0VfU0hJRlQ7Cj4gKyAgICAg
ICBtZW0ubnVtX3BhZ2VzID0gUEFHRV9BTElHTihiby0+YmFzZS5zaXplKSA+PiBQQUdFX1NISUZU
Owo+ICAgICAgICAgbWVtLnBhZ2VfYWxpZ25tZW50ID0gYm8tPm1lbS5wYWdlX2FsaWdubWVudDsK
PiAgICAgICAgIG1lbS5idXMub2Zmc2V0ID0gMDsKPiAgICAgICAgIG1lbS5idXMuYWRkciA9IE5V
TEw7Cj4gQEAgLTExMDIsNyArMTEwMSw3IEBAIEVYUE9SVF9TWU1CT0wodHRtX2JvX3ZhbGlkYXRl
KTsKPgo+ICBpbnQgdHRtX2JvX2luaXRfcmVzZXJ2ZWQoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJk
ZXYsCj4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAq
Ym8sCj4gLSAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgc2l6ZSwKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgc2l6ZV90IHNpemUsCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgIGVudW0gdHRtX2JvX3R5cGUgdHlwZSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ry
dWN0IHR0bV9wbGFjZW1lbnQgKnBsYWNlbWVudCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAg
dWludDMyX3QgcGFnZV9hbGlnbm1lbnQsCj4gQEAgLTExMTMsOSArMTExMiw4IEBAIGludCB0dG1f
Ym9faW5pdF9yZXNlcnZlZChzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldiwKPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgdm9pZCAoKmRlc3Ryb3kpIChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3Qg
KikpCj4gIHsKPiAgICAgICAgIHN0cnVjdCB0dG1fbWVtX2dsb2JhbCAqbWVtX2dsb2IgPSAmdHRt
X21lbV9nbG9iOwo+IC0gICAgICAgaW50IHJldCA9IDA7Cj4gLSAgICAgICB1bnNpZ25lZCBsb25n
IG51bV9wYWdlczsKPiAgICAgICAgIGJvb2wgbG9ja2VkOwo+ICsgICAgICAgaW50IHJldCA9IDA7
Cj4KPiAgICAgICAgIHJldCA9IHR0bV9tZW1fZ2xvYmFsX2FsbG9jKG1lbV9nbG9iLCBhY2Nfc2l6
ZSwgY3R4KTsKPiAgICAgICAgIGlmIChyZXQpIHsKPiBAQCAtMTEyNywxNiArMTEyNSw2IEBAIGlu
dCB0dG1fYm9faW5pdF9yZXNlcnZlZChzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldiwKPiAgICAg
ICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gICAgICAgICB9Cj4KPiAtICAgICAgIG51bV9w
YWdlcyA9IChzaXplICsgUEFHRV9TSVpFIC0gMSkgPj4gUEFHRV9TSElGVDsKPiAtICAgICAgIGlm
IChudW1fcGFnZXMgPT0gMCkgewo+IC0gICAgICAgICAgICAgICBwcl9lcnIoIklsbGVnYWwgYnVm
ZmVyIG9iamVjdCBzaXplXG4iKTsKPiAtICAgICAgICAgICAgICAgaWYgKGRlc3Ryb3kpCj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgKCpkZXN0cm95KShibyk7Cj4gLSAgICAgICAgICAgICAgIGVs
c2UKPiAtICAgICAgICAgICAgICAgICAgICAgICBrZnJlZShibyk7Cj4gLSAgICAgICAgICAgICAg
IHR0bV9tZW1fZ2xvYmFsX2ZyZWUobWVtX2dsb2IsIGFjY19zaXplKTsKPiAtICAgICAgICAgICAg
ICAgcmV0dXJuIC1FSU5WQUw7Cj4gLSAgICAgICB9Cj4gICAgICAgICBiby0+ZGVzdHJveSA9IGRl
c3Ryb3kgPyBkZXN0cm95IDogdHRtX2JvX2RlZmF1bHRfZGVzdHJveTsKPgo+ICAgICAgICAga3Jl
Zl9pbml0KCZiby0+a3JlZik7Cj4gQEAgLTExNDUsMTAgKzExMzMsOCBAQCBpbnQgdHRtX2JvX2lu
aXRfcmVzZXJ2ZWQoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCj4gICAgICAgICBJTklUX0xJ
U1RfSEVBRCgmYm8tPnN3YXApOwo+ICAgICAgICAgYm8tPmJkZXYgPSBiZGV2Owo+ICAgICAgICAg
Ym8tPnR5cGUgPSB0eXBlOwo+IC0gICAgICAgYm8tPm51bV9wYWdlcyA9IG51bV9wYWdlczsKPiAt
ICAgICAgIGJvLT5tZW0uc2l6ZSA9IG51bV9wYWdlcyA8PCBQQUdFX1NISUZUOwo+ICAgICAgICAg
Ym8tPm1lbS5tZW1fdHlwZSA9IFRUTV9QTF9TWVNURU07Cj4gLSAgICAgICBiby0+bWVtLm51bV9w
YWdlcyA9IGJvLT5udW1fcGFnZXM7Cj4gKyAgICAgICBiby0+bWVtLm51bV9wYWdlcyA9IFBBR0Vf
QUxJR04oc2l6ZSkgPj4gUEFHRV9TSElGVDsKPiAgICAgICAgIGJvLT5tZW0ubW1fbm9kZSA9IE5V
TEw7Cj4gICAgICAgICBiby0+bWVtLnBhZ2VfYWxpZ25tZW50ID0gcGFnZV9hbGlnbm1lbnQ7Cj4g
ICAgICAgICBiby0+bWVtLmJ1cy5vZmZzZXQgPSAwOwo+IEBAIC0xMTY2LDkgKzExNTIsMTAgQEAg
aW50IHR0bV9ib19pbml0X3Jlc2VydmVkKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LAo+ICAg
ICAgICAgfQo+ICAgICAgICAgaWYgKCF0dG1fYm9fdXNlc19lbWJlZGRlZF9nZW1fb2JqZWN0KGJv
KSkgewo+ICAgICAgICAgICAgICAgICAvKgo+IC0gICAgICAgICAgICAgICAgKiBiby5nZW0gaXMg
bm90IGluaXRpYWxpemVkLCBzbyB3ZSBoYXZlIHRvIHNldHVwIHRoZQo+ICsgICAgICAgICAgICAg
ICAgKiBiby5iYXNlIGlzIG5vdCBpbml0aWFsaXplZCwgc28gd2UgaGF2ZSB0byBzZXR1cCB0aGUK
PiAgICAgICAgICAgICAgICAgICogc3RydWN0IGVsZW1lbnRzIHdlIHdhbnQgdXNlIHJlZ2FyZGxl
c3MuCj4gICAgICAgICAgICAgICAgICAqLwo+ICsgICAgICAgICAgICAgICBiby0+YmFzZS5zaXpl
ID0gc2l6ZTsKPiAgICAgICAgICAgICAgICAgZG1hX3Jlc3ZfaW5pdCgmYm8tPmJhc2UuX3Jlc3Yp
Owo+ICAgICAgICAgICAgICAgICBkcm1fdm1hX25vZGVfcmVzZXQoJmJvLT5iYXNlLnZtYV9ub2Rl
KTsKPiAgICAgICAgIH0KPiBAQCAtMTIxMCw3ICsxMTk3LDcgQEAgRVhQT1JUX1NZTUJPTCh0dG1f
Ym9faW5pdF9yZXNlcnZlZCk7Cj4KPiAgaW50IHR0bV9ib19pbml0KHN0cnVjdCB0dG1fYm9fZGV2
aWNlICpiZGV2LAo+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJv
LAo+IC0gICAgICAgICAgICAgICB1bnNpZ25lZCBsb25nIHNpemUsCj4gKyAgICAgICAgICAgICAg
IHNpemVfdCBzaXplLAo+ICAgICAgICAgICAgICAgICBlbnVtIHR0bV9ib190eXBlIHR5cGUsCj4g
ICAgICAgICAgICAgICAgIHN0cnVjdCB0dG1fcGxhY2VtZW50ICpwbGFjZW1lbnQsCj4gICAgICAg
ICAgICAgICAgIHVpbnQzMl90IHBhZ2VfYWxpZ25tZW50LAo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191
dGlsLmMKPiBpbmRleCA1YmJjMTMzOWQyOGUuLjM5OGQ1MDEzZmMzOSAxMDA2NDQKPiAtLS0gYS9k
cml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV9ib191dGlsLmMKPiBAQCAtNDMxLDkgKzQzMSw5IEBAIGludCB0dG1fYm9fa21hcChz
dHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+Cj4gICAgICAgICBtYXAtPnZpcnR1YWwgPSBO
VUxMOwo+ICAgICAgICAgbWFwLT5ibyA9IGJvOwo+IC0gICAgICAgaWYgKG51bV9wYWdlcyA+IGJv
LT5udW1fcGFnZXMpCj4gKyAgICAgICBpZiAobnVtX3BhZ2VzID4gYm8tPm1lbS5udW1fcGFnZXMp
Cj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+IC0gICAgICAgaWYgKHN0YXJ0X3Bh
Z2UgPiBiby0+bnVtX3BhZ2VzKQo+ICsgICAgICAgaWYgKChzdGFydF9wYWdlICsgbnVtX3BhZ2Vz
KSA+IGJvLT5tZW0ubnVtX3BhZ2VzKQo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsK
Pgo+ICAgICAgICAgcmV0ID0gdHRtX21lbV9pb19yZXNlcnZlKGJvLT5iZGV2LCAmYm8tPm1lbSk7
Cj4gQEAgLTQ4NSwxNCArNDg1LDE0IEBAIGludCB0dG1fYm9fdm1hcChzdHJ1Y3QgdHRtX2J1ZmZl
cl9vYmplY3QgKmJvLCBzdHJ1Y3QgZG1hX2J1Zl9tYXAgKm1hcCkKPgo+ICAgICAgICAgaWYgKG1l
bS0+YnVzLmlzX2lvbWVtKSB7Cj4gICAgICAgICAgICAgICAgIHZvaWQgX19pb21lbSAqdmFkZHJf
aW9tZW07Cj4gLSAgICAgICAgICAgICAgIHNpemVfdCBzaXplID0gYm8tPm51bV9wYWdlcyA8PCBQ
QUdFX1NISUZUOwo+Cj4gICAgICAgICAgICAgICAgIGlmIChtZW0tPmJ1cy5hZGRyKQo+ICAgICAg
ICAgICAgICAgICAgICAgICAgIHZhZGRyX2lvbWVtID0gKHZvaWQgX19pb21lbSAqKW1lbS0+YnVz
LmFkZHI7Cj4gICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lbS0+YnVzLmNhY2hpbmcgPT0gdHRt
X3dyaXRlX2NvbWJpbmVkKQo+IC0gICAgICAgICAgICAgICAgICAgICAgIHZhZGRyX2lvbWVtID0g
aW9yZW1hcF93YyhtZW0tPmJ1cy5vZmZzZXQsIHNpemUpOwo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIHZhZGRyX2lvbWVtID0gaW9yZW1hcF93YyhtZW0tPmJ1cy5vZmZzZXQsCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvLT5iYXNlLnNpemUpOwo+
ICAgICAgICAgICAgICAgICBlbHNlCj4gLSAgICAgICAgICAgICAgICAgICAgICAgdmFkZHJfaW9t
ZW0gPSBpb3JlbWFwKG1lbS0+YnVzLm9mZnNldCwgc2l6ZSk7Cj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgdmFkZHJfaW9tZW0gPSBpb3JlbWFwKG1lbS0+YnVzLm9mZnNldCwgYm8tPmJhc2Uuc2l6
ZSk7Cj4KPiAgICAgICAgICAgICAgICAgaWYgKCF2YWRkcl9pb21lbSkKPiAgICAgICAgICAgICAg
ICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiBAQCAtNTE3LDcgKzUxNyw3IEBAIGludCB0dG1f
Ym9fdm1hcChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLCBzdHJ1Y3QgZG1hX2J1Zl9tYXAg
Km1hcCkKPiAgICAgICAgICAgICAgICAgICogb3IgdG8gbWFrZSB0aGUgYnVmZmVyIG9iamVjdCBs
b29rIGNvbnRpZ3VvdXMuCj4gICAgICAgICAgICAgICAgICAqLwo+ICAgICAgICAgICAgICAgICBw
cm90ID0gdHRtX2lvX3Byb3QoYm8sIG1lbSwgUEFHRV9LRVJORUwpOwo+IC0gICAgICAgICAgICAg
ICB2YWRkciA9IHZtYXAodHRtLT5wYWdlcywgYm8tPm51bV9wYWdlcywgMCwgcHJvdCk7Cj4gKyAg
ICAgICAgICAgICAgIHZhZGRyID0gdm1hcCh0dG0tPnBhZ2VzLCB0dG0tPm51bV9wYWdlcywgMCwg
cHJvdCk7Cj4gICAgICAgICAgICAgICAgIGlmICghdmFkZHIpCj4gICAgICAgICAgICAgICAgICAg
ICAgICAgcmV0dXJuIC1FTk9NRU07Cj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fYm9fdm0uYyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX3ZtLmMKPiBpbmRleCAx
NDRhNDk0MGI2YjYuLjZkYzk2Y2Y2Njc0NCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV9ib192bS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdm0uYwo+
IEBAIC0xOTgsNyArMTk4LDcgQEAgc3RhdGljIHZtX2ZhdWx0X3QgdHRtX2JvX3ZtX2luc2VydF9o
dWdlKHN0cnVjdCB2bV9mYXVsdCAqdm1mLAo+Cj4gICAgICAgICAvKiBGYXVsdCBzaG91bGQgbm90
IGNyb3NzIGJvIGJvdW5kYXJ5LiAqLwo+ICAgICAgICAgcGFnZV9vZmZzZXQgJj0gfihmYXVsdF9w
YWdlX3NpemUgLSAxKTsKPiAtICAgICAgIGlmIChwYWdlX29mZnNldCArIGZhdWx0X3BhZ2Vfc2l6
ZSA+IGJvLT5udW1fcGFnZXMpCj4gKyAgICAgICBpZiAocGFnZV9vZmZzZXQgKyBmYXVsdF9wYWdl
X3NpemUgPiBiby0+bWVtLm51bV9wYWdlcykKPiAgICAgICAgICAgICAgICAgZ290byBvdXRfZmFs
bGJhY2s7Cj4KPiAgICAgICAgIGlmIChiby0+bWVtLmJ1cy5pc19pb21lbSkKPiBAQCAtMzA2LDcg
KzMwNiw3IEBAIHZtX2ZhdWx0X3QgdHRtX2JvX3ZtX2ZhdWx0X3Jlc2VydmVkKHN0cnVjdCB2bV9m
YXVsdCAqdm1mLAo+ICAgICAgICAgcGFnZV9sYXN0ID0gdm1hX3BhZ2VzKHZtYSkgKyB2bWEtPnZt
X3Bnb2ZmIC0KPiAgICAgICAgICAgICAgICAgZHJtX3ZtYV9ub2RlX3N0YXJ0KCZiby0+YmFzZS52
bWFfbm9kZSk7Cj4KPiAtICAgICAgIGlmICh1bmxpa2VseShwYWdlX29mZnNldCA+PSBiby0+bnVt
X3BhZ2VzKSkKPiArICAgICAgIGlmICh1bmxpa2VseShwYWdlX29mZnNldCA+PSBiby0+bWVtLm51
bV9wYWdlcykpCj4gICAgICAgICAgICAgICAgIHJldHVybiBWTV9GQVVMVF9TSUdCVVM7Cj4KPiAg
ICAgICAgIHByb3QgPSB0dG1faW9fcHJvdChibywgJmJvLT5tZW0sIHByb3QpOwo+IEBAIC00Njks
NyArNDY5LDcgQEAgaW50IHR0bV9ib192bV9hY2Nlc3Moc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2
bWEsIHVuc2lnbmVkIGxvbmcgYWRkciwKPiAgICAgICAgICAgICAgICAgIDw8IFBBR0VfU0hJRlQp
Owo+ICAgICAgICAgaW50IHJldDsKPgo+IC0gICAgICAgaWYgKGxlbiA8IDEgfHwgKG9mZnNldCAr
IGxlbikgPj4gUEFHRV9TSElGVCA+IGJvLT5udW1fcGFnZXMpCj4gKyAgICAgICBpZiAobGVuIDwg
MSB8fCAob2Zmc2V0ICsgbGVuKSA+PiBQQUdFX1NISUZUID4gYm8tPm1lbS5udW1fcGFnZXMpCj4g
ICAgICAgICAgICAgICAgIHJldHVybiAtRUlPOwo+Cj4gICAgICAgICByZXQgPSB0dG1fYm9fcmVz
ZXJ2ZShibywgdHJ1ZSwgZmFsc2UsIE5VTEwpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vdHRtL3R0bV90dC5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fdHQuYwo+IGluZGV4IDc3
YmE3ODQ0MjVkZC4uN2Y3NWExMzE2M2YwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS90
dG0vdHRtX3R0LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV90dC5jCj4gQEAgLTEy
OSw3ICsxMjksNyBAQCBzdGF0aWMgdm9pZCB0dG1fdHRfaW5pdF9maWVsZHMoc3RydWN0IHR0bV90
dCAqdHRtLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCBwYWdlX2Zs
YWdzLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtIHR0bV9jYWNoaW5nIGNh
Y2hpbmcpCj4gIHsKPiAtICAgICAgIHR0bS0+bnVtX3BhZ2VzID0gYm8tPm51bV9wYWdlczsKPiAr
ICAgICAgIHR0bS0+bnVtX3BhZ2VzID0gUEFHRV9BTElHTihiby0+YmFzZS5zaXplKSA+PiBQQUdF
X1NISUZUOwo+ICAgICAgICAgdHRtLT5jYWNoaW5nID0gdHRtX2NhY2hlZDsKPiAgICAgICAgIHR0
bS0+cGFnZV9mbGFncyA9IHBhZ2VfZmxhZ3M7Cj4gICAgICAgICB0dG0tPmRtYV9hZGRyZXNzID0g
TlVMTDsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfYmxpdC5j
IGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfYmxpdC5jCj4gaW5kZXggZjIxODgxZTA4
N2RiLi45ZjI3NzlkZGNmMDggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92
bXdnZnhfYmxpdC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfYmxpdC5j
Cj4gQEAgLTQ4Miw4ICs0ODIsOCBAQCBpbnQgdm13X2JvX2NwdV9ibGl0KHN0cnVjdCB0dG1fYnVm
ZmVyX29iamVjdCAqZHN0LAo+ICAgICAgICAgZC5zcmNfYWRkciA9IE5VTEw7Cj4gICAgICAgICBk
LmRzdF9wYWdlcyA9IGRzdC0+dHRtLT5wYWdlczsKPiAgICAgICAgIGQuc3JjX3BhZ2VzID0gc3Jj
LT50dG0tPnBhZ2VzOwo+IC0gICAgICAgZC5kc3RfbnVtX3BhZ2VzID0gZHN0LT5udW1fcGFnZXM7
Cj4gLSAgICAgICBkLnNyY19udW1fcGFnZXMgPSBzcmMtPm51bV9wYWdlczsKPiArICAgICAgIGQu
ZHN0X251bV9wYWdlcyA9IGRzdC0+bWVtLm51bV9wYWdlczsKPiArICAgICAgIGQuc3JjX251bV9w
YWdlcyA9IHNyYy0+bWVtLm51bV9wYWdlczsKPiAgICAgICAgIGQuZHN0X3Byb3QgPSB0dG1faW9f
cHJvdChkc3QsICZkc3QtPm1lbSwgUEFHRV9LRVJORUwpOwo+ICAgICAgICAgZC5zcmNfcHJvdCA9
IHR0bV9pb19wcm90KHNyYywgJnNyYy0+bWVtLCBQQUdFX0tFUk5FTCk7Cj4gICAgICAgICBkLmRp
ZmYgPSBkaWZmOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9i
by5jIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfYm8uYwo+IGluZGV4IDI2M2Q3NmFl
NDNmMC4uNjNkYmM0NGVlYmUwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngv
dm13Z2Z4X2JvLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9iby5jCj4g
QEAgLTIyMyw3ICsyMjMsNyBAQCBpbnQgdm13X2JvX3Bpbl9pbl9zdGFydF9vZl92cmFtKHN0cnVj
dCB2bXdfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gICAgICAgICB1aW50MzJfdCBuZXdfZmxhZ3M7Cj4K
PiAgICAgICAgIHBsYWNlID0gdm13X3ZyYW1fcGxhY2VtZW50LnBsYWNlbWVudFswXTsKPiAtICAg
ICAgIHBsYWNlLmxwZm4gPSBiby0+bnVtX3BhZ2VzOwo+ICsgICAgICAgcGxhY2UubHBmbiA9IGJv
LT5tZW0ubnVtX3BhZ2VzOwo+ICAgICAgICAgcGxhY2VtZW50Lm51bV9wbGFjZW1lbnQgPSAxOwo+
ICAgICAgICAgcGxhY2VtZW50LnBsYWNlbWVudCA9ICZwbGFjZTsKPiAgICAgICAgIHBsYWNlbWVu
dC5udW1fYnVzeV9wbGFjZW1lbnQgPSAxOwo+IEBAIC0yNDQsNyArMjQ0LDcgQEAgaW50IHZtd19i
b19waW5faW5fc3RhcnRfb2ZfdnJhbShzdHJ1Y3Qgdm13X3ByaXZhdGUgKmRldl9wcml2LAo+ICAg
ICAgICAgICogdGhhdCBzaXR1YXRpb24uCj4gICAgICAgICAgKi8KPiAgICAgICAgIGlmIChiby0+
bWVtLm1lbV90eXBlID09IFRUTV9QTF9WUkFNICYmCj4gLSAgICAgICAgICAgYm8tPm1lbS5zdGFy
dCA8IGJvLT5udW1fcGFnZXMgJiYKPiArICAgICAgICAgICBiby0+bWVtLnN0YXJ0IDwgYm8tPm1l
bS5udW1fcGFnZXMgJiYKPiAgICAgICAgICAgICBiby0+bWVtLnN0YXJ0ID4gMCAmJgo+ICAgICAg
ICAgICAgIGJ1Zi0+YmFzZS5waW5fY291bnQgPT0gMCkgewo+ICAgICAgICAgICAgICAgICBjdHgu
aW50ZXJydXB0aWJsZSA9IGZhbHNlOwo+IEBAIC0zOTEsNyArMzkxLDcgQEAgdm9pZCAqdm13X2Jv
X21hcF9hbmRfY2FjaGUoc3RydWN0IHZtd19idWZmZXJfb2JqZWN0ICp2Ym8pCj4gICAgICAgICBp
ZiAodmlydHVhbCkKPiAgICAgICAgICAgICAgICAgcmV0dXJuIHZpcnR1YWw7Cj4KPiAtICAgICAg
IHJldCA9IHR0bV9ib19rbWFwKGJvLCAwLCBiby0+bnVtX3BhZ2VzLCAmdmJvLT5tYXApOwo+ICsg
ICAgICAgcmV0ID0gdHRtX2JvX2ttYXAoYm8sIDAsIGJvLT5tZW0ubnVtX3BhZ2VzLCAmdmJvLT5t
YXApOwo+ICAgICAgICAgaWYgKHJldCkKPiAgICAgICAgICAgICAgICAgRFJNX0VSUk9SKCJCdWZm
ZXIgb2JqZWN0IG1hcCBmYWlsZWQ6ICVkLlxuIiwgcmV0KTsKPgo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9jb3RhYmxlLmMgYi9kcml2ZXJzL2dwdS9kcm0vdm13
Z2Z4L3Ztd2dmeF9jb3RhYmxlLmMKPiBpbmRleCA5ODRkODg4NDM1N2QuLmEwNzdlNDIwZDJmZiAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9jb3RhYmxlLmMKPiAr
KysgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9jb3RhYmxlLmMKPiBAQCAtNDMwLDcg
KzQzMCw3IEBAIHN0YXRpYyBpbnQgdm13X2NvdGFibGVfcmVzaXplKHN0cnVjdCB2bXdfcmVzb3Vy
Y2UgKnJlcywgc2l6ZV90IG5ld19zaXplKQo+ICAgICAgICAgICogRG8gYSBwYWdlIGJ5IHBhZ2Ug
Y29weSBvZiBDT1RhYmxlcy4gVGhpcyBlbGltaW5hdGVzIHNsb3cgdm1hcCgpcy4KPiAgICAgICAg
ICAqIFRoaXMgc2hvdWxkIHJlYWxseSBiZSBhIFRUTSB1dGlsaXR5Lgo+ICAgICAgICAgICovCj4g
LSAgICAgICBmb3IgKGkgPSAwOyBpIDwgb2xkX2JvLT5udW1fcGFnZXM7ICsraSkgewo+ICsgICAg
ICAgZm9yIChpID0gMDsgaSA8IG9sZF9iby0+bWVtLm51bV9wYWdlczsgKytpKSB7Cj4gICAgICAg
ICAgICAgICAgIGJvb2wgZHVtbXk7Cj4KPiAgICAgICAgICAgICAgICAgcmV0ID0gdHRtX2JvX2tt
YXAob2xkX2JvLCBpLCAxLCAmb2xkX21hcCk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS92bXdnZngvdm13Z2Z4X2V4ZWNidWYuYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4
X2V4ZWNidWYuYwo+IGluZGV4IGU2N2UyZThmNmU2Zi4uNmMwMTYwMDE3MjFkIDEwMDY0NAo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2V4ZWNidWYuYwo+ICsrKyBiL2RyaXZl
cnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2V4ZWNidWYuYwo+IEBAIC0xMDQyLDcgKzEwNDIsNyBA
QCBzdGF0aWMgaW50IHZtd19xdWVyeV9ib19zd2l0Y2hfcHJlcGFyZShzdHJ1Y3Qgdm13X3ByaXZh
dGUgKmRldl9wcml2LAo+Cj4gICAgICAgICBpZiAodW5saWtlbHkobmV3X3F1ZXJ5X2JvICE9IHN3
X2NvbnRleHQtPmN1cl9xdWVyeV9ibykpIHsKPgo+IC0gICAgICAgICAgICAgICBpZiAodW5saWtl
bHkobmV3X3F1ZXJ5X2JvLT5iYXNlLm51bV9wYWdlcyA+IDQpKSB7Cj4gKyAgICAgICAgICAgICAg
IGlmICh1bmxpa2VseShuZXdfcXVlcnlfYm8tPmJhc2UubWVtLm51bV9wYWdlcyA+IDQpKSB7Cj4g
ICAgICAgICAgICAgICAgICAgICAgICAgVk1XX0RFQlVHX1VTRVIoIlF1ZXJ5IGJ1ZmZlciB0b28g
bGFyZ2UuXG4iKTsKPiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAg
ICAgICAgICAgICAgICAgfQo+IEBAIC0xNTQxLDcgKzE1NDEsNyBAQCBzdGF0aWMgaW50IHZtd19j
bWRfZG1hKHN0cnVjdCB2bXdfcHJpdmF0ZSAqZGV2X3ByaXYsCj4gICAgICAgICAgICAgICAgIHJl
dHVybiByZXQ7Cj4KPiAgICAgICAgIC8qIE1ha2Ugc3VyZSBETUEgZG9lc24ndCBjcm9zcyBCTyBi
b3VuZGFyaWVzLiAqLwo+IC0gICAgICAgYm9fc2l6ZSA9IHZtd19iby0+YmFzZS5udW1fcGFnZXMg
KiBQQUdFX1NJWkU7Cj4gKyAgICAgICBib19zaXplID0gdm13X2JvLT5iYXNlLmJhc2Uuc2l6ZTsK
PiAgICAgICAgIGlmICh1bmxpa2VseShjbWQtPmJvZHkuZ3Vlc3QucHRyLm9mZnNldCA+IGJvX3Np
emUpKSB7Cj4gICAgICAgICAgICAgICAgIFZNV19ERUJVR19VU0VSKCJJbnZhbGlkIERNQSBvZmZz
ZXQuXG4iKTsKPiAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2dtcmlkX21hbmFnZXIuYyBiL2RyaXZlcnMv
Z3B1L2RybS92bXdnZngvdm13Z2Z4X2dtcmlkX21hbmFnZXIuYwo+IGluZGV4IDhmZTI2ZTMyZjky
MC4uMTc3NDk2MGQxYjg5IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13
Z2Z4X2dtcmlkX21hbmFnZXIuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4
X2dtcmlkX21hbmFnZXIuYwo+IEBAIC02NCwyMCArNjQsMTkgQEAgc3RhdGljIGludCB2bXdfZ21y
aWRfbWFuX2dldF9ub2RlKHN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAqbWFuLAo+ICAgICAg
ICAgc3Bpbl9sb2NrKCZnbWFuLT5sb2NrKTsKPgo+ICAgICAgICAgaWYgKGdtYW4tPm1heF9nbXJf
cGFnZXMgPiAwKSB7Cj4gLSAgICAgICAgICAgICAgIGdtYW4tPnVzZWRfZ21yX3BhZ2VzICs9IGJv
LT5udW1fcGFnZXM7Cj4gKyAgICAgICAgICAgICAgIGdtYW4tPnVzZWRfZ21yX3BhZ2VzICs9IG1l
bS0+bnVtX3BhZ2VzOwo+ICAgICAgICAgICAgICAgICBpZiAodW5saWtlbHkoZ21hbi0+dXNlZF9n
bXJfcGFnZXMgPiBnbWFuLT5tYXhfZ21yX3BhZ2VzKSkKPiAgICAgICAgICAgICAgICAgICAgICAg
ICBnb3RvIG5vc3BhY2U7Cj4gICAgICAgICB9Cj4KPiAgICAgICAgIG1lbS0+bW1fbm9kZSA9IGdt
YW47Cj4gICAgICAgICBtZW0tPnN0YXJ0ID0gaWQ7Cj4gLSAgICAgICBtZW0tPm51bV9wYWdlcyA9
IGJvLT5udW1fcGFnZXM7Cj4KPiAgICAgICAgIHNwaW5fdW5sb2NrKCZnbWFuLT5sb2NrKTsKPiAg
ICAgICAgIHJldHVybiAwOwo+Cj4gIG5vc3BhY2U6Cj4gLSAgICAgICBnbWFuLT51c2VkX2dtcl9w
YWdlcyAtPSBiby0+bnVtX3BhZ2VzOwo+ICsgICAgICAgZ21hbi0+dXNlZF9nbXJfcGFnZXMgLT0g
bWVtLT5udW1fcGFnZXM7Cj4gICAgICAgICBzcGluX3VubG9jaygmZ21hbi0+bG9jayk7Cj4gICAg
ICAgICBpZGFfZnJlZSgmZ21hbi0+Z21yX2lkYSwgaWQpOwo+ICAgICAgICAgcmV0dXJuIC1FTk9T
UEM7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2ttcy5jIGIv
ZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfa21zLmMKPiBpbmRleCBiYzY3ZjJiOTMwZTEu
LjdkYzk2MTI1ZTVjMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dm
eF9rbXMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2ttcy5jCj4gQEAg
LTEyMjAsNyArMTIyMCw3IEBAIHN0YXRpYyBpbnQgdm13X2ttc19uZXdfZnJhbWVidWZmZXJfYm8o
c3RydWN0IHZtd19wcml2YXRlICpkZXZfcHJpdiwKPiAgICAgICAgIGludCByZXQ7Cj4KPiAgICAg
ICAgIHJlcXVlc3RlZF9zaXplID0gbW9kZV9jbWQtPmhlaWdodCAqIG1vZGVfY21kLT5waXRjaGVz
WzBdOwo+IC0gICAgICAgaWYgKHVubGlrZWx5KHJlcXVlc3RlZF9zaXplID4gYm8tPmJhc2UubnVt
X3BhZ2VzICogUEFHRV9TSVpFKSkgewo+ICsgICAgICAgaWYgKHVubGlrZWx5KHJlcXVlc3RlZF9z
aXplID4gYm8tPmJhc2UuYmFzZS5zaXplKSkgewo+ICAgICAgICAgICAgICAgICBEUk1fRVJST1Io
IlNjcmVlbiBidWZmZXIgb2JqZWN0IHNpemUgaXMgdG9vIHNtYWxsICIKPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICJmb3IgcmVxdWVzdGVkIG1vZGUuXG4iKTsKPiAgICAgICAgICAgICAgICAg
cmV0dXJuIC1FSU5WQUw7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13
Z2Z4X3BhZ2VfZGlydHkuYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3BhZ2VfZGly
dHkuYwo+IGluZGV4IDBiNzZiM2QxN2Q0Yy4uMGE5MDBhZmM2NmZmIDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3BhZ2VfZGlydHkuYwo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS92bXdnZngvdm13Z2Z4X3BhZ2VfZGlydHkuYwo+IEBAIC0yMzIsNyArMjMyLDcgQEAg
dm9pZCB2bXdfYm9fZGlydHlfdW5tYXAoc3RydWN0IHZtd19idWZmZXJfb2JqZWN0ICp2Ym8sCj4g
IGludCB2bXdfYm9fZGlydHlfYWRkKHN0cnVjdCB2bXdfYnVmZmVyX29iamVjdCAqdmJvKQo+ICB7
Cj4gICAgICAgICBzdHJ1Y3Qgdm13X2JvX2RpcnR5ICpkaXJ0eSA9IHZiby0+ZGlydHk7Cj4gLSAg
ICAgICBwZ29mZl90IG51bV9wYWdlcyA9IHZiby0+YmFzZS5udW1fcGFnZXM7Cj4gKyAgICAgICBw
Z29mZl90IG51bV9wYWdlcyA9IHZiby0+YmFzZS5tZW0ubnVtX3BhZ2VzOwo+ICAgICAgICAgc2l6
ZV90IHNpemUsIGFjY19zaXplOwo+ICAgICAgICAgaW50IHJldDsKPiAgICAgICAgIHN0YXRpYyBz
dHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHggY3R4ID0gewo+IEBAIC00MTMsNyArNDEzLDcgQEAgdm1f
ZmF1bHRfdCB2bXdfYm9fdm1fbWt3cml0ZShzdHJ1Y3Qgdm1fZmF1bHQgKnZtZikKPiAgICAgICAg
ICAgICAgICAgcmV0dXJuIHJldDsKPgo+ICAgICAgICAgcGFnZV9vZmZzZXQgPSB2bWYtPnBnb2Zm
IC0gZHJtX3ZtYV9ub2RlX3N0YXJ0KCZiby0+YmFzZS52bWFfbm9kZSk7Cj4gLSAgICAgICBpZiAo
dW5saWtlbHkocGFnZV9vZmZzZXQgPj0gYm8tPm51bV9wYWdlcykpIHsKPiArICAgICAgIGlmICh1
bmxpa2VseShwYWdlX29mZnNldCA+PSBiby0+bWVtLm51bV9wYWdlcykpIHsKPiAgICAgICAgICAg
ICAgICAgcmV0ID0gVk1fRkFVTFRfU0lHQlVTOwo+ICAgICAgICAgICAgICAgICBnb3RvIG91dF91
bmxvY2s7Cj4gICAgICAgICB9Cj4gQEAgLTQ1Niw3ICs0NTYsNyBAQCB2bV9mYXVsdF90IHZtd19i
b192bV9mYXVsdChzdHJ1Y3Qgdm1fZmF1bHQgKnZtZikKPgo+ICAgICAgICAgICAgICAgICBwYWdl
X29mZnNldCA9IHZtZi0+cGdvZmYgLQo+ICAgICAgICAgICAgICAgICAgICAgICAgIGRybV92bWFf
bm9kZV9zdGFydCgmYm8tPmJhc2Uudm1hX25vZGUpOwo+IC0gICAgICAgICAgICAgICBpZiAocGFn
ZV9vZmZzZXQgPj0gYm8tPm51bV9wYWdlcyB8fAo+ICsgICAgICAgICAgICAgICBpZiAocGFnZV9v
ZmZzZXQgPj0gYm8tPm1lbS5udW1fcGFnZXMgfHwKPiAgICAgICAgICAgICAgICAgICAgIHZtd19y
ZXNvdXJjZXNfY2xlYW4odmJvLCBwYWdlX29mZnNldCwKPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcGFnZV9vZmZzZXQgKyBQQUdFX1NJWkUsCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICZhbGxvd2VkX3ByZWZhdWx0KSkgewo+IEBAIC01
MzEsNyArNTMxLDcgQEAgdm1fZmF1bHRfdCB2bXdfYm9fdm1faHVnZV9mYXVsdChzdHJ1Y3Qgdm1f
ZmF1bHQgKnZtZiwKPgo+ICAgICAgICAgICAgICAgICBwYWdlX29mZnNldCA9IHZtZi0+cGdvZmYg
LQo+ICAgICAgICAgICAgICAgICAgICAgICAgIGRybV92bWFfbm9kZV9zdGFydCgmYm8tPmJhc2Uu
dm1hX25vZGUpOwo+IC0gICAgICAgICAgICAgICBpZiAocGFnZV9vZmZzZXQgPj0gYm8tPm51bV9w
YWdlcyB8fAo+ICsgICAgICAgICAgICAgICBpZiAocGFnZV9vZmZzZXQgPj0gYm8tPm1lbS5udW1f
cGFnZXMgfHwKPiAgICAgICAgICAgICAgICAgICAgIHZtd19yZXNvdXJjZXNfY2xlYW4odmJvLCBw
YWdlX29mZnNldCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFn
ZV9vZmZzZXQgKyBQQUdFX1NJWkUsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICZhbGxvd2VkX3ByZWZhdWx0KSkgewo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vdm13Z2Z4L3Ztd2dmeF9yZXNvdXJjZS5jIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdn
ZnhfcmVzb3VyY2UuYwo+IGluZGV4IDAwYjUzNTgzMWE3YS4uZjZlOGZkZmM3NmU1IDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3Jlc291cmNlLmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9yZXNvdXJjZS5jCj4gQEAgLTM2MCw3ICszNjAs
NyBAQCBzdGF0aWMgaW50IHZtd19yZXNvdXJjZV9idWZfYWxsb2Moc3RydWN0IHZtd19yZXNvdXJj
ZSAqcmVzLAo+ICAgICAgICAgaW50IHJldDsKPgo+ICAgICAgICAgaWYgKGxpa2VseShyZXMtPmJh
Y2t1cCkpIHsKPiAtICAgICAgICAgICAgICAgQlVHX09OKHJlcy0+YmFja3VwLT5iYXNlLm51bV9w
YWdlcyAqIFBBR0VfU0laRSA8IHNpemUpOwo+ICsgICAgICAgICAgICAgICBCVUdfT04ocmVzLT5i
YWNrdXAtPmJhc2UuYmFzZS5zaXplIDwgc2l6ZSk7Cj4gICAgICAgICAgICAgICAgIHJldHVybiAw
Owo+ICAgICAgICAgfQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13
Z2Z4X3NoYWRlci5jIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfc2hhZGVyLmMKPiBp
bmRleCBmMzI4YWE1ODM5YTIuLmU3NmE3MjBmODQxZSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vdm13Z2Z4L3Ztd2dmeF9zaGFkZXIuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS92bXdn
Zngvdm13Z2Z4X3NoYWRlci5jCj4gQEAgLTg1Niw4ICs4NTYsNyBAQCBzdGF0aWMgaW50IHZtd19z
aGFkZXJfZGVmaW5lKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fZmlsZSAqZmls
ZV9wcml2LAo+ICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gICAgICAgICAg
ICAgICAgIH0KPgo+IC0gICAgICAgICAgICAgICBpZiAoKHU2NClidWZmZXItPmJhc2UubnVtX3Bh
Z2VzICogUEFHRV9TSVpFIDwKPiAtICAgICAgICAgICAgICAgICAgICh1NjQpc2l6ZSArICh1NjQp
b2Zmc2V0KSB7Cj4gKyAgICAgICAgICAgICAgIGlmICgodTY0KWJ1ZmZlci0+YmFzZS5iYXNlLnNp
emUgPCAodTY0KXNpemUgKyAodTY0KW9mZnNldCkgewo+ICAgICAgICAgICAgICAgICAgICAgICAg
IFZNV19ERUJVR19VU0VSKCJJbGxlZ2FsIGJ1ZmZlci0gb3Igc2hhZGVyIHNpemUuXG4iKTsKPiAg
ICAgICAgICAgICAgICAgICAgICAgICByZXQgPSAtRUlOVkFMOwo+ICAgICAgICAgICAgICAgICAg
ICAgICAgIGdvdG8gb3V0X2JhZF9hcmc7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92
bXdnZngvdm13Z2Z4X3N0ZHUuYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3N0ZHUu
Ywo+IGluZGV4IDViMDRlYzA0N2VmMy4uMjdhYjJjNTAzMTJiIDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3N0ZHUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS92
bXdnZngvdm13Z2Z4X3N0ZHUuYwo+IEBAIC01MTIsNyArNTEyLDcgQEAgc3RhdGljIHZvaWQgdm13
X3N0ZHVfYm9fZmlmb19jb21taXQoc3RydWN0IHZtd19rbXNfZGlydHkgKmRpcnR5KQo+ICAgICAg
ICAgY21kLT5ib2R5Lmhvc3QubWlwbWFwID0gMDsKPiAgICAgICAgIGNtZC0+Ym9keS50cmFuc2Zl
ciA9IGRkaXJ0eS0+dHJhbnNmZXI7Cj4gICAgICAgICBzdWZmaXgtPnN1ZmZpeFNpemUgPSBzaXpl
b2YoKnN1ZmZpeCk7Cj4gLSAgICAgICBzdWZmaXgtPm1heGltdW1PZmZzZXQgPSBkZGlydHktPmJ1
Zi0+YmFzZS5udW1fcGFnZXMgKiBQQUdFX1NJWkU7Cj4gKyAgICAgICBzdWZmaXgtPm1heGltdW1P
ZmZzZXQgPSBkZGlydHktPmJ1Zi0+YmFzZS5iYXNlLnNpemU7Cj4KPiAgICAgICAgIGlmIChkZGly
dHktPnRyYW5zZmVyID09IFNWR0EzRF9XUklURV9IT1NUX1ZSQU0pIHsKPiAgICAgICAgICAgICAg
ICAgYmxpdF9zaXplICs9IHNpemVvZihzdHJ1Y3Qgdm13X3N0ZHVfdXBkYXRlKTsKPiBAQCAtMTIz
OCw3ICsxMjM4LDcgQEAgc3RhdGljIHVpbnQzMl90IHZtd19zdGR1X2JvX3BvcHVsYXRlX3VwZGF0
ZShzdHJ1Y3Qgdm13X2R1X3VwZGF0ZV9wbGFuZSAgKnVwZGF0ZSwKPiAgICAgICAgIHZmYmJvID0g
Y29udGFpbmVyX29mKHVwZGF0ZS0+dmZiLCB0eXBlb2YoKnZmYmJvKSwgYmFzZSk7Cj4KPiAgICAg
ICAgIHN1ZmZpeC0+c3VmZml4U2l6ZSA9IHNpemVvZigqc3VmZml4KTsKPiAtICAgICAgIHN1ZmZp
eC0+bWF4aW11bU9mZnNldCA9IHZmYmJvLT5idWZmZXItPmJhc2UubnVtX3BhZ2VzICogUEFHRV9T
SVpFOwo+ICsgICAgICAgc3VmZml4LT5tYXhpbXVtT2Zmc2V0ID0gdmZiYm8tPmJ1ZmZlci0+YmFz
ZS5iYXNlLnNpemU7Cj4KPiAgICAgICAgIHZtd19zdGR1X3BvcHVsYXRlX3VwZGF0ZSgmc3VmZml4
WzFdLCBzdGR1LT5iYXNlLnVuaXQsIGJiLT54MSwgYmItPngyLAo+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGJiLT55MSwgYmItPnkyKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3Ztd2dmeC92bXdnZnhfc3VyZmFjZS5jIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92
bXdnZnhfc3VyZmFjZS5jCj4gaW5kZXggMzkxNGJmZWUwNTMzLi5mYTliZTMwYmVjNmMgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfc3VyZmFjZS5jCj4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfc3VyZmFjZS5jCj4gQEAgLTE1NTAsOCArMTU1
MCw3IEBAIHZtd19nYl9zdXJmYWNlX2RlZmluZV9pbnRlcm5hbChzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnJlcy0+YmFj
a3VwLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnVzZXJfc3Jm
LT5iYWNrdXBfYmFzZSk7Cj4gICAgICAgICAgICAgICAgIGlmIChyZXQgPT0gMCkgewo+IC0gICAg
ICAgICAgICAgICAgICAgICAgIGlmIChyZXMtPmJhY2t1cC0+YmFzZS5udW1fcGFnZXMgKiBQQUdF
X1NJWkUgPAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICByZXMtPmJhY2t1cF9zaXplKSB7
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy0+YmFja3VwLT5iYXNlLmJhc2Uuc2l6
ZSA8IHJlcy0+YmFja3VwX3NpemUpIHsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFZNV19ERUJVR19VU0VSKCJTdXJmYWNlIGJhY2t1cCBidWZmZXIgdG9vIHNtYWxsLlxuIik7Cj4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bXdfYm9fdW5yZWZlcmVuY2UoJnJlcy0+
YmFja3VwKTsKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IC1FSU5WQUw7
Cj4gQEAgLTE2MTQsNyArMTYxMyw3IEBAIHZtd19nYl9zdXJmYWNlX2RlZmluZV9pbnRlcm5hbChz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAgICAgICAgaWYgKHJlcy0+YmFja3VwKSB7Cj4gICAg
ICAgICAgICAgICAgIHJlcC0+YnVmZmVyX21hcF9oYW5kbGUgPQo+ICAgICAgICAgICAgICAgICAg
ICAgICAgIGRybV92bWFfbm9kZV9vZmZzZXRfYWRkcigmcmVzLT5iYWNrdXAtPmJhc2UuYmFzZS52
bWFfbm9kZSk7Cj4gLSAgICAgICAgICAgICAgIHJlcC0+YnVmZmVyX3NpemUgPSByZXMtPmJhY2t1
cC0+YmFzZS5udW1fcGFnZXMgKiBQQUdFX1NJWkU7Cj4gKyAgICAgICAgICAgICAgIHJlcC0+YnVm
ZmVyX3NpemUgPSByZXMtPmJhY2t1cC0+YmFzZS5iYXNlLnNpemU7Cj4gICAgICAgICAgICAgICAg
IHJlcC0+YnVmZmVyX2hhbmRsZSA9IGJhY2t1cF9oYW5kbGU7Cj4gICAgICAgICB9IGVsc2Ugewo+
ICAgICAgICAgICAgICAgICByZXAtPmJ1ZmZlcl9tYXBfaGFuZGxlID0gMDsKPiBAQCAtMTY5Miw3
ICsxNjkxLDcgQEAgdm13X2diX3N1cmZhY2VfcmVmZXJlbmNlX2ludGVybmFsKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsCj4gICAgICAgICByZXAtPmNyZXAuYnVmZmVyX2hhbmRsZSA9IGJhY2t1cF9o
YW5kbGU7Cj4gICAgICAgICByZXAtPmNyZXAuYnVmZmVyX21hcF9oYW5kbGUgPQo+ICAgICAgICAg
ICAgICAgICBkcm1fdm1hX25vZGVfb2Zmc2V0X2FkZHIoJnNyZi0+cmVzLmJhY2t1cC0+YmFzZS5i
YXNlLnZtYV9ub2RlKTsKPiAtICAgICAgIHJlcC0+Y3JlcC5idWZmZXJfc2l6ZSA9IHNyZi0+cmVz
LmJhY2t1cC0+YmFzZS5udW1fcGFnZXMgKiBQQUdFX1NJWkU7Cj4gKyAgICAgICByZXAtPmNyZXAu
YnVmZmVyX3NpemUgPSBzcmYtPnJlcy5iYWNrdXAtPmJhc2UuYmFzZS5zaXplOwo+Cj4gICAgICAg
ICByZXAtPmNyZXEudmVyc2lvbiA9IGRybV92bXdfZ2Jfc3VyZmFjZV92MTsKPiAgICAgICAgIHJl
cC0+Y3JlcS5zdmdhM2RfZmxhZ3NfdXBwZXJfMzJfYml0cyA9Cj4gZGlmZiAtLWdpdCBhL2luY2x1
ZGUvZHJtL3R0bS90dG1fYm9fYXBpLmggYi9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2FwaS5oCj4g
aW5kZXggNzliOTM2N2UwZmZkLi4wZDRlM2ZjY2FhOGEgMTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9k
cm0vdHRtL3R0bV9ib19hcGkuaAo+ICsrKyBiL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fYXBpLmgK
PiBAQCAtMTI1LDcgKzEyNSw2IEBAIHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCB7Cj4gICAgICAg
ICBzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldjsKPiAgICAgICAgIGVudW0gdHRtX2JvX3R5cGUg
dHlwZTsKPiAgICAgICAgIHZvaWQgKCpkZXN0cm95KSAoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0
ICopOwo+IC0gICAgICAgdW5zaWduZWQgbG9uZyBudW1fcGFnZXM7Cj4gICAgICAgICBzaXplX3Qg
YWNjX3NpemU7Cj4KPiAgICAgICAgIC8qKgo+IEBAIC0zOTcsMTMgKzM5NiwxMSBAQCBzaXplX3Qg
dHRtX2JvX2RtYV9hY2Nfc2l6ZShzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRldiwKPgo+ICBpbnQg
dHRtX2JvX2luaXRfcmVzZXJ2ZWQoc3RydWN0IHR0bV9ib19kZXZpY2UgKmJkZXYsCj4gICAgICAg
ICAgICAgICAgICAgICAgICAgIHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCj4gLSAgICAg
ICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgc2l6ZSwKPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgZW51bSB0dG1fYm9fdHlwZSB0eXBlLAo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICBzaXplX3Qgc2l6ZSwgZW51bSB0dG1fYm9fdHlwZSB0eXBlLAo+ICAgICAgICAgICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgdHRtX3BsYWNlbWVudCAqcGxhY2VtZW50LAo+ICAgICAgICAgICAgICAg
ICAgICAgICAgICB1aW50MzJfdCBwYWdlX2FsaWdubWVudCwKPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgc3RydWN0IHR0bV9vcGVyYXRpb25fY3R4ICpjdHgsCj4gLSAgICAgICAgICAgICAgICAg
ICAgICAgIHNpemVfdCBhY2Nfc2l6ZSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0
IHNnX3RhYmxlICpzZywKPiArICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZV90IGFjY19zaXpl
LCBzdHJ1Y3Qgc2dfdGFibGUgKnNnLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qg
ZG1hX3Jlc3YgKnJlc3YsCj4gICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKCpkZXN0cm95
KSAoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICopKTsKPgo+IEBAIC00NDUsNyArNDQyLDcgQEAg
aW50IHR0bV9ib19pbml0X3Jlc2VydmVkKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2LAo+ICAg
KiAtRVJFU1RBUlRTWVM6IEludGVycnVwdGVkIGJ5IHNpZ25hbCB3aGlsZSBzbGVlcGluZyB3YWl0
aW5nIGZvciByZXNvdXJjZXMuCj4gICAqLwo+ICBpbnQgdHRtX2JvX2luaXQoc3RydWN0IHR0bV9i
b19kZXZpY2UgKmJkZXYsIHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCj4gLSAgICAgICAg
ICAgICAgIHVuc2lnbmVkIGxvbmcgc2l6ZSwgZW51bSB0dG1fYm9fdHlwZSB0eXBlLAo+ICsgICAg
ICAgICAgICAgICBzaXplX3Qgc2l6ZSwgZW51bSB0dG1fYm9fdHlwZSB0eXBlLAo+ICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgdHRtX3BsYWNlbWVudCAqcGxhY2VtZW50LAo+ICAgICAgICAgICAgICAg
ICB1aW50MzJfdCBwYWdlX2FsaWdubWVudCwgYm9vbCBpbnRlcnJ1YnRpYmxlLCBzaXplX3QgYWNj
X3NpemUsCj4gICAgICAgICAgICAgICAgIHN0cnVjdCBzZ190YWJsZSAqc2csIHN0cnVjdCBkbWFf
cmVzdiAqcmVzdiwKPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vdHRtL3R0bV9yZXNvdXJjZS5o
IGIvaW5jbHVkZS9kcm0vdHRtL3R0bV9yZXNvdXJjZS5oCj4gaW5kZXggZjQ4YTcwZDM5YWM1Li5h
ZDZkYTk5NzcwZTkgMTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9kcm0vdHRtL3R0bV9yZXNvdXJjZS5o
Cj4gKysrIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV9yZXNvdXJjZS5oCj4gQEAgLTE3MSw3ICsxNzEs
NiBAQCBzdHJ1Y3QgdHRtX2J1c19wbGFjZW1lbnQgewo+ICBzdHJ1Y3QgdHRtX3Jlc291cmNlIHsK
PiAgICAgICAgIHZvaWQgKm1tX25vZGU7Cj4gICAgICAgICB1bnNpZ25lZCBsb25nIHN0YXJ0Owo+
IC0gICAgICAgdW5zaWduZWQgbG9uZyBzaXplOwo+ICAgICAgICAgdW5zaWduZWQgbG9uZyBudW1f
cGFnZXM7Cj4gICAgICAgICB1aW50MzJfdCBwYWdlX2FsaWdubWVudDsKPiAgICAgICAgIHVpbnQz
Ml90IG1lbV90eXBlOwo+IC0tCj4gMi4yNS4xCj4KCgotLSAKRGFuaWVsIFZldHRlcgpTb2Z0d2Fy
ZSBFbmdpbmVlciwgSW50ZWwgQ29ycG9yYXRpb24KaHR0cDovL2Jsb2cuZmZ3bGwuY2gKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxp
bmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
