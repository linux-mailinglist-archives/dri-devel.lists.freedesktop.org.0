Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 404ADAC071
	for <lists+dri-devel@lfdr.de>; Fri,  6 Sep 2019 21:24:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 15AA86E096;
	Fri,  6 Sep 2019 19:23:58 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd44.google.com (mail-io1-xd44.google.com
 [IPv6:2607:f8b0:4864:20::d44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A1BD86E096
 for <dri-devel@lists.freedesktop.org>; Fri,  6 Sep 2019 19:23:56 +0000 (UTC)
Received: by mail-io1-xd44.google.com with SMTP id j4so15204982iog.11
 for <dri-devel@lists.freedesktop.org>; Fri, 06 Sep 2019 12:23:56 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=qJR50YCOwMbxx1IjK9E1aTef9wlkdKgnv5HqeQtRqcM=;
 b=cVxNWN/Xzvbp6+RepPd8i/S1/USTEhS7rza+kLsQNbeODu6V9+uy1Km15iohs60qp8
 XRco+wT/zxlMJYLYHdAGC3NvRyvK3HjbRw0FjGlZNGzJT5L8UIvUUtqpT9x4xTE28Mxe
 +sSJaUItG8g0+O4Ladr38c0X3Y66WiLP6wEx9BGboCCul/jyAZD4G35S4s1TQM9BIS33
 oOTU6JXKrw7bd3WVs7GJx3/iCnU0XR4peRV+31uSMurWOIsJqPDEDs990oe8mgz27sFh
 FAa7NcJXG9N5IblTa2XEaidZAYAQWrGkf73SjAR0GVBezA3A1VR83yzRMbYXhX7UNvAI
 rhZQ==
X-Gm-Message-State: APjAAAUqzcIWaQw/ZVMmawnnumRQD8lLW1m5/ZvlWfhUlgwd2VEGKBhB
 Vpn+09s3ih82PlcEBG9h6pQGVnKUOJT2/g==
X-Google-Smtp-Source: APXvYqy5hNKNaSbwjwB7JTrB3yYUGFNb3GXAP0vGF4wjv9mZrnUkKHMP9pVGLmuyHcBbkR/lMQ30uA==
X-Received: by 2002:a6b:fc02:: with SMTP id r2mr11259064ioh.15.1567797835630; 
 Fri, 06 Sep 2019 12:23:55 -0700 (PDT)
Received: from ddavenport4.bld.corp.google.com
 ([2620:15c:183:0:92f:a80a:519d:f777])
 by smtp.gmail.com with ESMTPSA id h70sm10931804iof.48.2019.09.06.12.23.54
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
 Fri, 06 Sep 2019 12:23:55 -0700 (PDT)
From: Drew Davenport <ddavenport@chromium.org>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 3/6] drm/msm/dpu: Remove unnecessary NULL checks
Date: Fri,  6 Sep 2019 13:23:41 -0600
Message-Id: <20190906192344.223694-3-ddavenport@chromium.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190906192344.223694-1-ddavenport@chromium.org>
References: <20190906192344.223694-1-ddavenport@chromium.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=chromium.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=qJR50YCOwMbxx1IjK9E1aTef9wlkdKgnv5HqeQtRqcM=;
 b=Bh3hn4UsM6oE18036kSaGShJrvCWLn/X+uasTikKWSblJzZ9D3HytWD8cePVT+jBxI
 SauJZwWkx8MK5TGGh4tzAeDkM8I8BmZKf+CyrkmvJHZO5og0/PYIjGGi/eHS/rcd0rA+
 9OTdHEPG2ab+2LbxKYLIYh5tk2sfkLmZCpWso=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Bruce Wang <bzwang@chromium.org>, David Airlie <airlied@linux.ie>,
 linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 Abhinav Kumar <abhinavk@codeaurora.org>,
 Jayant Shekhar <jshekhar@codeaurora.org>,
 Alexios Zavras <alexios.zavras@intel.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Drew Davenport <ddavenport@chromium.org>, Thomas Gleixner <tglx@linutronix.de>,
 freedreno@lists.freedesktop.org, Sean Paul <sean@poorly.run>,
 Sravanthi Kollukuduru <skolluku@codeaurora.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

ZHJtX2RldmljZS5kZXZfcHJpdmF0ZSBpcyBzZXQgdG8gYSBub24tTlVMTCBtc21fZHJtX3ByaXZh
dGUKc3RydWN0IGluIG1zbV9kcm1faW5pdC4gU3VjY2Vzc2Z1bCBpbml0aWFsaXphdGlvbiBvZiBt
c20gbWVhbnMKdGhhdCBkZXZfcHJpdmF0ZSBpcyBub24tTlVMTCBzbyB0aGVyZSBpcyBubyBuZWVk
IHRvIGNoZWNrIGl0CmV2ZXJ5d2hlcmUuCgpTaWduZWQtb2ZmLWJ5OiBEcmV3IERhdmVucG9ydCA8
ZGRhdmVucG9ydEBjaHJvbWl1bS5vcmc+Ci0tLQoKIGRyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9k
cHUxL2RwdV9jb3JlX2lycS5jICAgICB8ICA2IC0tLS0tLQogZHJpdmVycy9ncHUvZHJtL21zbS9k
aXNwL2RwdTEvZHB1X2NvcmVfcGVyZi5jICAgIHwgIDQgKystLQogZHJpdmVycy9ncHUvZHJtL21z
bS9kaXNwL2RwdTEvZHB1X2NydGMuYyAgICAgICAgIHwgIDQgKystLQogZHJpdmVycy9ncHUvZHJt
L21zbS9kaXNwL2RwdTEvZHB1X2VuY29kZXIuYyAgICAgIHwgMTUgKysrKystLS0tLS0tLS0tCiAu
Li4vZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyX3BoeXNfY21kLmMgfCAgMiArLQog
Li4uL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX3ZpZC5jIHwgIDMgKy0t
CiBkcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfa21zLmMgICAgICAgICAgfCAxNiAr
KystLS0tLS0tLS0tLS0tCiA3IGZpbGVzIGNoYW5nZWQsIDE0IGluc2VydGlvbnMoKyksIDM2IGRl
bGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2Rw
dV9jb3JlX2lycS5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2NvcmVfaXJx
LmMKaW5kZXggY2RiZWEzOGI4Njk3Li4xN2Y5MTdiNzE4Y2UgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9jb3JlX2lycS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9tc20vZGlzcC9kcHUxL2RwdV9jb3JlX2lycS5jCkBAIC0zNDksOSArMzQ5LDYgQEAgdm9pZCBk
cHVfY29yZV9pcnFfcHJlaW5zdGFsbChzdHJ1Y3QgZHB1X2ttcyAqZHB1X2ttcykKIAlpZiAoIWRw
dV9rbXMtPmRldikgewogCQlEUFVfRVJST1IoImludmFsaWQgZHJtIGRldmljZVxuIik7CiAJCXJl
dHVybjsKLQl9IGVsc2UgaWYgKCFkcHVfa21zLT5kZXYtPmRldl9wcml2YXRlKSB7Ci0JCURQVV9F
UlJPUigiaW52YWxpZCBkZXZpY2UgcHJpdmF0ZVxuIik7Ci0JCXJldHVybjsKIAl9CiAJcHJpdiA9
IGRwdV9rbXMtPmRldi0+ZGV2X3ByaXZhdGU7CiAKQEAgLTM4NSw5ICszODIsNiBAQCB2b2lkIGRw
dV9jb3JlX2lycV91bmluc3RhbGwoc3RydWN0IGRwdV9rbXMgKmRwdV9rbXMpCiAJaWYgKCFkcHVf
a21zLT5kZXYpIHsKIAkJRFBVX0VSUk9SKCJpbnZhbGlkIGRybSBkZXZpY2VcbiIpOwogCQlyZXR1
cm47Ci0JfSBlbHNlIGlmICghZHB1X2ttcy0+ZGV2LT5kZXZfcHJpdmF0ZSkgewotCQlEUFVfRVJS
T1IoImludmFsaWQgZGV2aWNlIHByaXZhdGVcbiIpOwotCQlyZXR1cm47CiAJfQogCXByaXYgPSBk
cHVfa21zLT5kZXYtPmRldl9wcml2YXRlOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
bXNtL2Rpc3AvZHB1MS9kcHVfY29yZV9wZXJmLmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3Av
ZHB1MS9kcHVfY29yZV9wZXJmLmMKaW5kZXggMDlhNDliNTliYjViLi4wOTRkNzQ2MzVmYjcgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9jb3JlX3BlcmYuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfY29yZV9wZXJmLmMKQEAgLTMz
LDEzICszMywxMyBAQCBzdGF0aWMgc3RydWN0IGRwdV9rbXMgKl9kcHVfY3J0Y19nZXRfa21zKHN0
cnVjdCBkcm1fY3J0YyAqY3J0YykKIHsKIAlzdHJ1Y3QgbXNtX2RybV9wcml2YXRlICpwcml2Owog
Ci0JaWYgKCFjcnRjLT5kZXYgfHwgIWNydGMtPmRldi0+ZGV2X3ByaXZhdGUpIHsKKwlpZiAoIWNy
dGMtPmRldikgewogCQlEUFVfRVJST1IoImludmFsaWQgZGV2aWNlXG4iKTsKIAkJcmV0dXJuIE5V
TEw7CiAJfQogCiAJcHJpdiA9IGNydGMtPmRldi0+ZGV2X3ByaXZhdGU7Ci0JaWYgKCFwcml2IHx8
ICFwcml2LT5rbXMpIHsKKwlpZiAoIXByaXYtPmttcykgewogCQlEUFVfRVJST1IoImludmFsaWQg
a21zXG4iKTsKIAkJcmV0dXJuIE5VTEw7CiAJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L21zbS9kaXNwL2RwdTEvZHB1X2NydGMuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUx
L2RwdV9jcnRjLmMKaW5kZXggMmVjZTExMjYyOTQzLi5lYWQ3ZDY1NzA5N2MgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9jcnRjLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2NydGMuYwpAQCAtNjk0LDcgKzY5NCw3IEBAIHN0YXRp
YyB2b2lkIGRwdV9jcnRjX2Rpc2FibGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCXVuc2lnbmVk
IGxvbmcgZmxhZ3M7CiAJYm9vbCByZWxlYXNlX2JhbmR3aWR0aCA9IGZhbHNlOwogCi0JaWYgKCFj
cnRjIHx8ICFjcnRjLT5kZXYgfHwgIWNydGMtPmRldi0+ZGV2X3ByaXZhdGUgfHwgIWNydGMtPnN0
YXRlKSB7CisJaWYgKCFjcnRjIHx8ICFjcnRjLT5kZXYgfHwgIWNydGMtPnN0YXRlKSB7CiAJCURQ
VV9FUlJPUigiaW52YWxpZCBjcnRjXG4iKTsKIAkJcmV0dXJuOwogCX0KQEAgLTc2Niw3ICs3NjYs
NyBAQCBzdGF0aWMgdm9pZCBkcHVfY3J0Y19lbmFibGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAog
CXN0cnVjdCBtc21fZHJtX3ByaXZhdGUgKnByaXY7CiAJYm9vbCByZXF1ZXN0X2JhbmR3aWR0aDsK
IAotCWlmICghY3J0YyB8fCAhY3J0Yy0+ZGV2IHx8ICFjcnRjLT5kZXYtPmRldl9wcml2YXRlKSB7
CisJaWYgKCFjcnRjIHx8ICFjcnRjLT5kZXYpIHsKIAkJRFBVX0VSUk9SKCJpbnZhbGlkIGNydGNc
biIpOwogCQlyZXR1cm47CiAJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNw
L2RwdTEvZHB1X2VuY29kZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9l
bmNvZGVyLmMKaW5kZXggNGQyY2FjZDBjZTNkLi43YjM3ZDFlZWVhYjUgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyLmMKKysrIGIvZHJpdmVycy9n
cHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2VuY29kZXIuYwpAQCAtNzM1LDggKzczNSw3IEBAIHN0
YXRpYyBpbnQgZHB1X2VuY29kZXJfcmVzb3VyY2VfY29udHJvbChzdHJ1Y3QgZHJtX2VuY29kZXIg
KmRybV9lbmMsCiAJc3RydWN0IG1zbV9kcm1fcHJpdmF0ZSAqcHJpdjsKIAlib29sIGlzX3ZpZF9t
b2RlID0gZmFsc2U7CiAKLQlpZiAoIWRybV9lbmMgfHwgIWRybV9lbmMtPmRldiB8fCAhZHJtX2Vu
Yy0+ZGV2LT5kZXZfcHJpdmF0ZSB8fAotCQkJIWRybV9lbmMtPmNydGMpIHsKKwlpZiAoIWRybV9l
bmMgfHwgIWRybV9lbmMtPmRldiB8fCAhZHJtX2VuYy0+Y3J0YykgewogCQlEUFVfRVJST1IoImlu
dmFsaWQgcGFyYW1ldGVyc1xuIik7CiAJCXJldHVybiAtRUlOVkFMOwogCX0KQEAgLTEwOTIsNyAr
MTA5MSw3IEBAIHN0YXRpYyB2b2lkIF9kcHVfZW5jb2Rlcl92aXJ0X2VuYWJsZV9oZWxwZXIoc3Ry
dWN0IGRybV9lbmNvZGVyICpkcm1fZW5jKQogCXN0cnVjdCBtc21fZHJtX3ByaXZhdGUgKnByaXY7
CiAJc3RydWN0IGRwdV9rbXMgKmRwdV9rbXM7CiAKLQlpZiAoIWRybV9lbmMgfHwgIWRybV9lbmMt
PmRldiB8fCAhZHJtX2VuYy0+ZGV2LT5kZXZfcHJpdmF0ZSkgeworCWlmICghZHJtX2VuYyB8fCAh
ZHJtX2VuYy0+ZGV2KSB7CiAJCURQVV9FUlJPUigiaW52YWxpZCBwYXJhbWV0ZXJzXG4iKTsKIAkJ
cmV0dXJuOwogCX0KQEAgLTExOTMsOSArMTE5Miw2IEBAIHN0YXRpYyB2b2lkIGRwdV9lbmNvZGVy
X3ZpcnRfZGlzYWJsZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmRybV9lbmMpCiAJfSBlbHNlIGlmICgh
ZHJtX2VuYy0+ZGV2KSB7CiAJCURQVV9FUlJPUigiaW52YWxpZCBkZXZcbiIpOwogCQlyZXR1cm47
Ci0JfSBlbHNlIGlmICghZHJtX2VuYy0+ZGV2LT5kZXZfcHJpdmF0ZSkgewotCQlEUFVfRVJST1Io
ImludmFsaWQgZGV2X3ByaXZhdGVcbiIpOwotCQlyZXR1cm47CiAJfQogCiAJZHB1X2VuYyA9IHRv
X2RwdV9lbmNvZGVyX3ZpcnQoZHJtX2VuYyk7CkBAIC0xNzM0LDggKzE3MzAsNyBAQCBzdGF0aWMg
dm9pZCBkcHVfZW5jb2Rlcl92c3luY19ldmVudF9oYW5kbGVyKHN0cnVjdCB0aW1lcl9saXN0ICp0
KQogCXN0cnVjdCBtc21fZHJtX3ByaXZhdGUgKnByaXY7CiAJc3RydWN0IG1zbV9kcm1fdGhyZWFk
ICpldmVudF90aHJlYWQ7CiAKLQlpZiAoIWRybV9lbmMtPmRldiB8fCAhZHJtX2VuYy0+ZGV2LT5k
ZXZfcHJpdmF0ZSB8fAotCQkJIWRybV9lbmMtPmNydGMpIHsKKwlpZiAoIWRybV9lbmMtPmRldiB8
fCAhZHJtX2VuYy0+Y3J0YykgewogCQlEUFVfRVJST1IoImludmFsaWQgcGFyYW1ldGVyc1xuIik7
CiAJCXJldHVybjsKIAl9CkBAIC0xOTI1LDcgKzE5MjAsNyBAQCBzdGF0aWMgaW50IF9kcHVfZW5j
b2Rlcl9pbml0X2RlYnVnZnMoc3RydWN0IGRybV9lbmNvZGVyICpkcm1fZW5jKQogCiAJY2hhciBu
YW1lW0RQVV9OQU1FX1NJWkVdOwogCi0JaWYgKCFkcm1fZW5jLT5kZXYgfHwgIWRybV9lbmMtPmRl
di0+ZGV2X3ByaXZhdGUpIHsKKwlpZiAoIWRybV9lbmMtPmRldikgewogCQlEUFVfRVJST1IoImlu
dmFsaWQgZW5jb2RlciBvciBrbXNcbiIpOwogCQlyZXR1cm4gLUVJTlZBTDsKIAl9CkBAIC0yMTMw
LDcgKzIxMjUsNyBAQCBzdGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9mcmFtZV9kb25lX3RpbWVvdXQo
c3RydWN0IHRpbWVyX2xpc3QgKnQpCiAJc3RydWN0IGRybV9lbmNvZGVyICpkcm1fZW5jID0gJmRw
dV9lbmMtPmJhc2U7CiAJdTMyIGV2ZW50OwogCi0JaWYgKCFkcm1fZW5jLT5kZXYgfHwgIWRybV9l
bmMtPmRldi0+ZGV2X3ByaXZhdGUpIHsKKwlpZiAoIWRybV9lbmMtPmRldikgewogCQlEUFVfRVJS
T1IoImludmFsaWQgcGFyYW1ldGVyc1xuIik7CiAJCXJldHVybjsKIAl9CmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX2NtZC5jIGIvZHJp
dmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2VuY29kZXJfcGh5c19jbWQuYwppbmRleCAy
OTIzYjYzZDk1ZmUuLjUwZmUxZWQ3MDk1YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21z
bS9kaXNwL2RwdTEvZHB1X2VuY29kZXJfcGh5c19jbWQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
bXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX2NtZC5jCkBAIC0zNzMsNyArMzczLDcgQEAg
c3RhdGljIHZvaWQgZHB1X2VuY29kZXJfcGh5c19jbWRfdGVhcmNoZWNrX2NvbmZpZygKIAl9CiAK
IAlkcHVfa21zID0gcGh5c19lbmMtPmRwdV9rbXM7Ci0JaWYgKCFkcHVfa21zIHx8ICFkcHVfa21z
LT5kZXYgfHwgIWRwdV9rbXMtPmRldi0+ZGV2X3ByaXZhdGUpIHsKKwlpZiAoIWRwdV9rbXMgfHwg
IWRwdV9rbXMtPmRldikgewogCQlEUFVfRVJST1IoImludmFsaWQgZGV2aWNlXG4iKTsKIAkJcmV0
dXJuOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9l
bmNvZGVyX3BoeXNfdmlkLmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5j
b2Rlcl9waHlzX3ZpZC5jCmluZGV4IGI5Yzg0ZmI0ZDRhMS4uYmQzMzNkOTU3YWRkIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfZW5jb2Rlcl9waHlzX3ZpZC5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9lbmNvZGVyX3BoeXNfdmlk
LmMKQEAgLTU3MCw4ICs1NzAsNyBAQCBzdGF0aWMgdm9pZCBkcHVfZW5jb2Rlcl9waHlzX3ZpZF9k
aXNhYmxlKHN0cnVjdCBkcHVfZW5jb2Rlcl9waHlzICpwaHlzX2VuYykKIAl1bnNpZ25lZCBsb25n
IGxvY2tfZmxhZ3M7CiAJaW50IHJldDsKIAotCWlmICghcGh5c19lbmMgfHwgIXBoeXNfZW5jLT5w
YXJlbnQgfHwgIXBoeXNfZW5jLT5wYXJlbnQtPmRldiB8fAotCQkJIXBoeXNfZW5jLT5wYXJlbnQt
PmRldi0+ZGV2X3ByaXZhdGUpIHsKKwlpZiAoIXBoeXNfZW5jIHx8ICFwaHlzX2VuYy0+cGFyZW50
IHx8ICFwaHlzX2VuYy0+cGFyZW50LT5kZXYpIHsKIAkJRFBVX0VSUk9SKCJpbnZhbGlkIGVuY29k
ZXIvZGV2aWNlXG4iKTsKIAkJcmV0dXJuOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUx
L2RwdV9rbXMuYwppbmRleCA1OGIwNDg1ZGMzNzUuLjRhNjlkOGVjZjVlMSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2ttcy5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuYwpAQCAtNzIsNyArNzIsNyBAQCBzdGF0aWMgaW50
IF9kcHVfZGFuZ2VyX3NpZ25hbF9zdGF0dXMoc3RydWN0IHNlcV9maWxlICpzLAogCXN0cnVjdCBk
cHVfZGFuZ2VyX3NhZmVfc3RhdHVzIHN0YXR1czsKIAlpbnQgaTsKIAotCWlmICgha21zLT5kZXYg
fHwgIWttcy0+ZGV2LT5kZXZfcHJpdmF0ZSB8fCAha21zLT5od19tZHApIHsKKwlpZiAoIWttcy0+
ZGV2IHx8ICFrbXMtPmh3X21kcCkgewogCQlEUFVfRVJST1IoImludmFsaWQgYXJnKHMpXG4iKTsK
IAkJcmV0dXJuIDA7CiAJfQpAQCAtMTU3LDkgKzE1Nyw2IEBAIHN0YXRpYyBpbnQgX2RwdV9kZWJ1
Z2ZzX3Nob3dfcmVnc2V0MzIoc3RydWN0IHNlcV9maWxlICpzLCB2b2lkICpkYXRhKQogCQlyZXR1
cm4gMDsKIAogCXByaXYgPSBkZXYtPmRldl9wcml2YXRlOwotCWlmICghcHJpdikKLQkJcmV0dXJu
IDA7Ci0KIAliYXNlID0gZHB1X2ttcy0+bW1pbyArIHJlZ3NldC0+b2Zmc2V0OwogCiAJLyogaW5z
ZXJ0IHBhZGRpbmcgc3BhY2VzLCBpZiBuZWVkZWQgKi8KQEAgLTI5Miw3ICsyODksNyBAQCBzdGF0
aWMgdm9pZCBkcHVfa21zX3ByZXBhcmVfY29tbWl0KHN0cnVjdCBtc21fa21zICprbXMsCiAJZHB1
X2ttcyA9IHRvX2RwdV9rbXMoa21zKTsKIAlkZXYgPSBkcHVfa21zLT5kZXY7CiAKLQlpZiAoIWRl
diB8fCAhZGV2LT5kZXZfcHJpdmF0ZSkKKwlpZiAoIWRldikKIAkJcmV0dXJuOwogCXByaXYgPSBk
ZXYtPmRldl9wcml2YXRlOwogCkBAIC00NzAsOSArNDY3LDYgQEAgc3RhdGljIHZvaWQgX2RwdV9r
bXNfZHJtX29ial9kZXN0cm95KHN0cnVjdCBkcHVfa21zICpkcHVfa21zKQogCX0gZWxzZSBpZiAo
IWRwdV9rbXMtPmRldikgewogCQlEUFVfRVJST1IoImludmFsaWQgZGV2XG4iKTsKIAkJcmV0dXJu
OwotCX0gZWxzZSBpZiAoIWRwdV9rbXMtPmRldi0+ZGV2X3ByaXZhdGUpIHsKLQkJRFBVX0VSUk9S
KCJpbnZhbGlkIGRldl9wcml2YXRlXG4iKTsKLQkJcmV0dXJuOwogCX0KIAlwcml2ID0gZHB1X2tt
cy0+ZGV2LT5kZXZfcHJpdmF0ZTsKIApAQCAtODA5LDEwICs4MDMsNiBAQCBzdGF0aWMgaW50IGRw
dV9rbXNfaHdfaW5pdChzdHJ1Y3QgbXNtX2ttcyAqa21zKQogCX0KIAogCXByaXYgPSBkZXYtPmRl
dl9wcml2YXRlOwotCWlmICghcHJpdikgewotCQlEUFVfRVJST1IoImludmFsaWQgcHJpdmF0ZSBk
YXRhXG4iKTsKLQkJcmV0dXJuIHJjOwotCX0KIAogCWF0b21pY19zZXQoJmRwdV9rbXMtPmJhbmR3
aWR0aF9yZWYsIDApOwogCkBAIC05NzQsNyArOTY0LDcgQEAgc3RydWN0IG1zbV9rbXMgKmRwdV9r
bXNfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCXN0cnVjdCBkcHVfa21zICpkcHVfa21z
OwogCWludCBpcnE7CiAKLQlpZiAoIWRldiB8fCAhZGV2LT5kZXZfcHJpdmF0ZSkgeworCWlmICgh
ZGV2KSB7CiAJCURQVV9FUlJPUigiZHJtIGRldmljZSBub2RlIGludmFsaWRcbiIpOwogCQlyZXR1
cm4gRVJSX1BUUigtRUlOVkFMKTsKIAl9Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
