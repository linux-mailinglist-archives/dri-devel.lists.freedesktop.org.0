Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 49E4E2C64A2
	for <lists+dri-devel@lfdr.de>; Fri, 27 Nov 2020 13:10:15 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F316B6EC70;
	Fri, 27 Nov 2020 12:09:02 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga09.intel.com (mga09.intel.com [134.134.136.24])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A70406EC5C;
 Fri, 27 Nov 2020 12:08:57 +0000 (UTC)
IronPort-SDR: eDCJp9aB0DpGlHSOPbiIEo2hqP1vQHIFM4aW3IC1fhlEhLR7sci65ZHUU167xnszl/2p1SlGQM
 qs1+a8UjYYJQ==
X-IronPort-AV: E=McAfee;i="6000,8403,9817"; a="172540607"
X-IronPort-AV: E=Sophos;i="5.78,374,1599548400"; d="scan'208";a="172540607"
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga005.jf.intel.com ([10.7.209.41])
 by orsmga102.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 27 Nov 2020 04:08:57 -0800
IronPort-SDR: vXMIOFE7CVcYLZdeb0oD42/WzTuF+8Ri/YBattnZW7+Uz+vWcrSRjxTVk60Tjd6+duGcrYVYpk
 pgVH+QfRVRqw==
X-IronPort-AV: E=Sophos;i="5.78,374,1599548400"; d="scan'208";a="548028824"
Received: from mjgleeso-mobl.ger.corp.intel.com (HELO
 mwauld-desk1.ger.corp.intel.com) ([10.251.85.2])
 by orsmga005-auth.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 27 Nov 2020 04:08:55 -0800
From: Matthew Auld <matthew.auld@intel.com>
To: intel-gfx@lists.freedesktop.org
Subject: [RFC PATCH 050/162] drm/i915/selftests: Prepare huge_pages testcases
 for obj->mm.lock removal.
Date: Fri, 27 Nov 2020 12:05:26 +0000
Message-Id: <20201127120718.454037-51-matthew.auld@intel.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20201127120718.454037-1-matthew.auld@intel.com>
References: <20201127120718.454037-1-matthew.auld@intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org,
 =?UTF-8?q?Thomas=20Hellstr=C3=B6m?= <thomas.hellstrom@linux.intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNv
bT4KClN0cmFpZ2h0Zm9yd2FyZCBjb252ZXJzaW9uLCBqdXN0IGNvbnZlcnQgYSBidW5jaCBvZiBj
YWxscyB0bwp1bmxvY2tlZCB2ZXJzaW9ucy4KClNpZ25lZC1vZmYtYnk6IE1hYXJ0ZW4gTGFua2hv
cnN0IDxtYWFydGVuLmxhbmtob3JzdEBsaW51eC5pbnRlbC5jb20+CkNjOiBUaG9tYXMgSGVsbHN0
csO2bSA8dGhvbWFzLmhlbGxzdHJvbUBsaW51eC5pbnRlbC5jb20+Ci0tLQogLi4uL2dwdS9kcm0v
aTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYyAgIHwgMjggKysrKysrKysrKysrKystLS0t
LQogMSBmaWxlIGNoYW5nZWQsIDIxIGluc2VydGlvbnMoKyksIDcgZGVsZXRpb25zKC0pCgpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYwppbmRleCA3
MDljNjNiOWNmYzQuLjU4NmQ4YmFmZDdkZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMKQEAgLTU4OSw3ICs1ODksNyBAQCBzdGF0aWMgaW50
IGlndF9tb2NrX3BwZ3R0X21pc2FsaWduZWRfZG1hKHZvaWQgKmFyZykKIAkJCWdvdG8gb3V0X3B1
dDsKIAkJfQogCi0JCWVyciA9IGk5MTVfZ2VtX29iamVjdF9waW5fcGFnZXMob2JqKTsKKwkJZXJy
ID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9wYWdlc191bmxvY2tlZChvYmopOwogCQlpZiAoZXJyKQog
CQkJZ290byBvdXRfcHV0OwogCkBAIC02NTMsMTUgKzY1MywxOSBAQCBzdGF0aWMgaW50IGlndF9t
b2NrX3BwZ3R0X21pc2FsaWduZWRfZG1hKHZvaWQgKmFyZykKIAkJCQlicmVhazsKIAkJfQogCisJ
CWk5MTVfZ2VtX29iamVjdF9sb2NrKG9iaiwgTlVMTCk7CiAJCWk5MTVfZ2VtX29iamVjdF91bnBp
bl9wYWdlcyhvYmopOwogCQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqKTsKKwkJaTkx
NV9nZW1fb2JqZWN0X3VubG9jayhvYmopOwogCQlpOTE1X2dlbV9vYmplY3RfcHV0KG9iaik7CiAJ
fQogCiAJcmV0dXJuIDA7CiAKIG91dF91bnBpbjoKKwlpOTE1X2dlbV9vYmplY3RfbG9jayhvYmos
IE5VTEwpOwogCWk5MTVfZ2VtX29iamVjdF91bnBpbl9wYWdlcyhvYmopOworCWk5MTVfZ2VtX29i
amVjdF91bmxvY2sob2JqKTsKIG91dF9wdXQ6CiAJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwog
CkBAIC02NzUsOCArNjc5LDEwIEBAIHN0YXRpYyB2b2lkIGNsb3NlX29iamVjdF9saXN0KHN0cnVj
dCBsaXN0X2hlYWQgKm9iamVjdHMsCiAKIAlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUob2JqLCBv
biwgb2JqZWN0cywgc3RfbGluaykgewogCQlsaXN0X2RlbCgmb2JqLT5zdF9saW5rKTsKKwkJaTkx
NV9nZW1fb2JqZWN0X2xvY2sob2JqLCBOVUxMKTsKIAkJaTkxNV9nZW1fb2JqZWN0X3VucGluX3Bh
Z2VzKG9iaik7CiAJCV9faTkxNV9nZW1fb2JqZWN0X3B1dF9wYWdlcyhvYmopOworCQlpOTE1X2dl
bV9vYmplY3RfdW5sb2NrKG9iaik7CiAJCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKIAl9CiB9
CkBAIC03MTMsNyArNzE5LDcgQEAgc3RhdGljIGludCBpZ3RfbW9ja19wcGd0dF9odWdlX2ZpbGwo
dm9pZCAqYXJnKQogCQkJYnJlYWs7CiAJCX0KIAotCQllcnIgPSBpOTE1X2dlbV9vYmplY3RfcGlu
X3BhZ2VzKG9iaik7CisJCWVyciA9IGk5MTVfZ2VtX29iamVjdF9waW5fcGFnZXNfdW5sb2NrZWQo
b2JqKTsKIAkJaWYgKGVycikgewogCQkJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwogCQkJYnJl
YWs7CkBAIC04ODksNyArODk1LDcgQEAgc3RhdGljIGludCBpZ3RfbW9ja19wcGd0dF82NEsodm9p
ZCAqYXJnKQogCQkJaWYgKElTX0VSUihvYmopKQogCQkJCXJldHVybiBQVFJfRVJSKG9iaik7CiAK
LQkJCWVyciA9IGk5MTVfZ2VtX29iamVjdF9waW5fcGFnZXMob2JqKTsKKwkJCWVyciA9IGk5MTVf
Z2VtX29iamVjdF9waW5fcGFnZXNfdW5sb2NrZWQob2JqKTsKIAkJCWlmIChlcnIpCiAJCQkJZ290
byBvdXRfb2JqZWN0X3B1dDsKIApAQCAtOTQzLDggKzk0OSwxMCBAQCBzdGF0aWMgaW50IGlndF9t
b2NrX3BwZ3R0XzY0Syh2b2lkICphcmcpCiAJCQl9CiAKIAkJCWk5MTVfdm1hX3VucGluKHZtYSk7
CisJCQlpOTE1X2dlbV9vYmplY3RfbG9jayhvYmosIE5VTEwpOwogCQkJaTkxNV9nZW1fb2JqZWN0
X3VucGluX3BhZ2VzKG9iaik7CiAJCQlfX2k5MTVfZ2VtX29iamVjdF9wdXRfcGFnZXMob2JqKTsK
KwkJCWk5MTVfZ2VtX29iamVjdF91bmxvY2sob2JqKTsKIAkJCWk5MTVfZ2VtX29iamVjdF9wdXQo
b2JqKTsKIAkJfQogCX0KQEAgLTk1NCw3ICs5NjIsOSBAQCBzdGF0aWMgaW50IGlndF9tb2NrX3Bw
Z3R0XzY0Syh2b2lkICphcmcpCiBvdXRfdm1hX3VucGluOgogCWk5MTVfdm1hX3VucGluKHZtYSk7
CiBvdXRfb2JqZWN0X3VucGluOgorCWk5MTVfZ2VtX29iamVjdF9sb2NrKG9iaiwgTlVMTCk7CiAJ
aTkxNV9nZW1fb2JqZWN0X3VucGluX3BhZ2VzKG9iaik7CisJaTkxNV9nZW1fb2JqZWN0X3VubG9j
ayhvYmopOwogb3V0X29iamVjdF9wdXQ6CiAJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwogCkBA
IC0xMDI0LDcgKzEwMzQsNyBAQCBzdGF0aWMgaW50IF9fY3B1X2NoZWNrX3ZtYXAoc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKm9iaiwgdTMyIGR3b3JkLCB1MzIgdmFsKQogCWlmIChlcnIpCiAJ
CXJldHVybiBlcnI7CiAKLQlwdHIgPSBpOTE1X2dlbV9vYmplY3RfcGluX21hcChvYmosIEk5MTVf
TUFQX1dDKTsKKwlwdHIgPSBpOTE1X2dlbV9vYmplY3RfcGluX21hcF91bmxvY2tlZChvYmosIEk5
MTVfTUFQX1dDKTsKIAlpZiAoSVNfRVJSKHB0cikpCiAJCXJldHVybiBQVFJfRVJSKHB0cik7CiAK
QEAgLTEzMDQsNyArMTMxNCw3IEBAIHN0YXRpYyBpbnQgaWd0X3BwZ3R0X3Ntb2tlX2h1Z2Uodm9p
ZCAqYXJnKQogCQkJcmV0dXJuIGVycjsKIAkJfQogCi0JCWVyciA9IGk5MTVfZ2VtX29iamVjdF9w
aW5fcGFnZXMob2JqKTsKKwkJZXJyID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9wYWdlc191bmxvY2tl
ZChvYmopOwogCQlpZiAoZXJyKSB7CiAJCQlpZiAoZXJyID09IC1FTlhJTyB8fCBlcnIgPT0gLUUy
QklHKSB7CiAJCQkJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwpAQCAtMTMyNyw4ICsxMzM3LDEw
IEBAIHN0YXRpYyBpbnQgaWd0X3BwZ3R0X3Ntb2tlX2h1Z2Uodm9pZCAqYXJnKQogCQkJICAgICAg
IF9fZnVuY19fLCBzaXplLCBpKTsKIAkJfQogb3V0X3VucGluOgorCQlpOTE1X2dlbV9vYmplY3Rf
bG9jayhvYmosIE5VTEwpOwogCQlpOTE1X2dlbV9vYmplY3RfdW5waW5fcGFnZXMob2JqKTsKIAkJ
X19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKG9iaik7CisJCWk5MTVfZ2VtX29iamVjdF91bmxv
Y2sob2JqKTsKIG91dF9wdXQ6CiAJCWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsKIApAQCAtMTQw
Miw3ICsxNDE0LDcgQEAgc3RhdGljIGludCBpZ3RfcHBndHRfc2FuaXR5X2NoZWNrKHZvaWQgKmFy
ZykKIAkJCQlyZXR1cm4gZXJyOwogCQkJfQogCi0JCQllcnIgPSBpOTE1X2dlbV9vYmplY3RfcGlu
X3BhZ2VzKG9iaik7CisJCQllcnIgPSBpOTE1X2dlbV9vYmplY3RfcGluX3BhZ2VzX3VubG9ja2Vk
KG9iaik7CiAJCQlpZiAoZXJyKSB7CiAJCQkJaTkxNV9nZW1fb2JqZWN0X3B1dChvYmopOwogCQkJ
CWdvdG8gb3V0OwpAQCAtMTQxNiw4ICsxNDI4LDEwIEBAIHN0YXRpYyBpbnQgaWd0X3BwZ3R0X3Nh
bml0eV9jaGVjayh2b2lkICphcmcpCiAKIAkJCWVyciA9IGlndF93cml0ZV9odWdlKGN0eCwgb2Jq
KTsKIAorCQkJaTkxNV9nZW1fb2JqZWN0X2xvY2sob2JqLCBOVUxMKTsKIAkJCWk5MTVfZ2VtX29i
amVjdF91bnBpbl9wYWdlcyhvYmopOwogCQkJX19pOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2VzKG9i
aik7CisJCQlpOTE1X2dlbV9vYmplY3RfdW5sb2NrKG9iaik7CiAJCQlpOTE1X2dlbV9vYmplY3Rf
cHV0KG9iaik7CiAKIAkJCWlmIChlcnIpIHsKQEAgLTE0NjIsNyArMTQ3Niw3IEBAIHN0YXRpYyBp
bnQgaWd0X3RtcGZzX2ZhbGxiYWNrKHZvaWQgKmFyZykKIAkJZ290byBvdXRfcmVzdG9yZTsKIAl9
CiAKLQl2YWRkciA9IGk5MTVfZ2VtX29iamVjdF9waW5fbWFwKG9iaiwgSTkxNV9NQVBfV0IpOwor
CXZhZGRyID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9tYXBfdW5sb2NrZWQob2JqLCBJOTE1X01BUF9X
Qik7CiAJaWYgKElTX0VSUih2YWRkcikpIHsKIAkJZXJyID0gUFRSX0VSUih2YWRkcik7CiAJCWdv
dG8gb3V0X3B1dDsKLS0gCjIuMjYuMgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZHJpLWRldmVsCg==
