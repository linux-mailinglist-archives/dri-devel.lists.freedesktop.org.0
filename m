Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0C35E36BDCD
	for <lists+dri-devel@lfdr.de>; Tue, 27 Apr 2021 05:41:29 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9E0666E8E6;
	Tue, 27 Apr 2021 03:41:24 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from NAM11-CO1-obe.outbound.protection.outlook.com
 (mail-co1nam11on2076.outbound.protection.outlook.com [40.107.220.76])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 48D696E8E6;
 Tue, 27 Apr 2021 03:41:22 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=VXFc+Wkx7/WKU9Fh9/c8WlhBWgrcnoWUZzlaTsEU9parRtfEKRKP8HixfcTfFu9DkYwgoiSuhk3EOo2S8TOtn893OkwN8PibiWWIQbWBNuKKDQ9c8YCPLc0lOiJgSUgwAYz9FN97cMeKH6m57Q3/JHxnHXsgLmYi8cExmpd7J/UFdInM2yRwC32Hds2eYcGtL0I2ZVYffwlHRrm5sUIkCVd4sq+NHu5tv8GgkkuhIB8Gri+zODKrqxboau6Cl6M2Hk4iVBb5QVpIoml13q+nF+Qr6p04lpmaXOST7BOAeXgyg7+4LlywzN68zB3NfRPnSP/eqQr68n61e/N+YS9QXQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=X8nM48u5ysakb6CfLrdkSVwTV6qUTp0QJgEFNdqrpHE=;
 b=TvEqtdHpwxXRdZOhTh2gIyIZNWcUentdMx2ewx9OypnOoQ+wwh6odpJy+PwhvHD/+e1cNcG5jRlUR49kEOAKbkZwqQ4yQAoTTk2FSgzMNFc+kV1Ld8ud99xrHefBPwFSbmMKPDfYDvrOF4KHZZ05M3Xzenb92acVp6yxKVG2ARrPxjWBoevcEX4GHMCVbJXFdxbaYBYyKSwLJ3d0FvJ8wVHh1fLe0EAt98voJntuxay/QexrPHMluCuxdsC9eSOMGxvt6vFrXkTIkR3VnrOyPjHoeku2V9fhUKjukMYW0vXkcBv7R4so80bLcLMiJt1CxLni7SXHKXuSE+v9An+Nqw==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1; 
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=X8nM48u5ysakb6CfLrdkSVwTV6qUTp0QJgEFNdqrpHE=;
 b=XuuHefXAmpVSwN8rm00xKQ9oWJLp+pAeTg4q56G4Xfy8KtK3G4mBdM4YBWlKaKEBM+cMoFP3e0BByTRS8ESUK0YaPimNuJ7PvkG6ouW9iehztk5bQ6Ga/zkWupGFbB+9k5TZsIeW3MiFbc4E0e3DOmpVr8YOy7hhIEcJc3fTOhc=
Authentication-Results: lists.freedesktop.org; dkim=none (message not signed)
 header.d=none; lists.freedesktop.org;
 dmarc=none action=none header.from=amd.com;
Received: from BL0PR12MB4948.namprd12.prod.outlook.com (2603:10b6:208:1cc::20)
 by MN2PR12MB4357.namprd12.prod.outlook.com (2603:10b6:208:262::19)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.4065.21; Tue, 27 Apr
 2021 03:41:20 +0000
Received: from BL0PR12MB4948.namprd12.prod.outlook.com
 ([fe80::70f5:99ed:65a1:c033]) by BL0PR12MB4948.namprd12.prod.outlook.com
 ([fe80::70f5:99ed:65a1:c033%7]) with mapi id 15.20.3933.040; Tue, 27 Apr 2021
 03:41:20 +0000
Subject: Re: [PATCH v2 05/10] drm/amdgpu: Add multi-GPU DMA mapping helpers
To: "Zeng, Oak" <Oak.Zeng@amd.com>,
 "amd-gfx@lists.freedesktop.org" <amd-gfx@lists.freedesktop.org>,
 "dri-devel@lists.freedesktop.org" <dri-devel@lists.freedesktop.org>
References: <20210422013058.6305-1-Felix.Kuehling@amd.com>
 <20210422013058.6305-6-Felix.Kuehling@amd.com>
 <D7CF3F16-B02B-4F84-8E3C-0DAF65261B2C@amd.com>
From: Felix Kuehling <felix.kuehling@amd.com>
Message-ID: <1c3566b0-6275-b6c2-3f3f-28178bf60b44@amd.com>
Date: Mon, 26 Apr 2021 23:41:18 -0400
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.7.1
In-Reply-To: <D7CF3F16-B02B-4F84-8E3C-0DAF65261B2C@amd.com>
Content-Language: en-US
X-Originating-IP: [142.182.183.69]
X-ClientProxiedBy: YT2PR01CA0016.CANPRD01.PROD.OUTLOOK.COM
 (2603:10b6:b01:38::21) To BL0PR12MB4948.namprd12.prod.outlook.com
 (2603:10b6:208:1cc::20)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from [192.168.2.100] (142.182.183.69) by
 YT2PR01CA0016.CANPRD01.PROD.OUTLOOK.COM (2603:10b6:b01:38::21) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.4065.24 via Frontend Transport; Tue, 27 Apr 2021 03:41:19 +0000
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 5e6b1ddf-289b-4cf8-e917-08d9092e51db
X-MS-TrafficTypeDiagnostic: MN2PR12MB4357:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <MN2PR12MB43572305F4361EFEF241E6EB92419@MN2PR12MB4357.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:9508;
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: JRvIsB8MAd8scyVR2IuywqJ/WZJPaszJ1gtV0xD99KXicPo5Pdz65bshYXCIcl2DBluJxjxLBOzpIGFnHFGgxub1lEzbszpQLBbpEjk0PcHrKWUU3YXWLOh5CZ3xG+U9LQdFUYiSOWpAs1PEtS8CvXib6lAoGh1kOueZ/QcCKpFKF0LhMOvgjTVipD++x40UH3z/Is397rUTYeo2dbDrDpiu43eMywyf/SxCPdB4zkZCm5sE/VstOVMQ3fDexTRHKTaH3Mf8GJjAhqHPybImxe2+hFwEUCQikbSyrItC7di7suxdygYaiI+HD81uEZv9EYt0IZI4KFJC2Cgncvpi8unoWNCLl0A4uO0/h4XH24U2fsYUYxHoHArQUCEBlDYbGdB2uQwjz1qbqGPMISUg51c0b/UJnz6zmx8LXh4BqLlan0L4YkPUBdf2uBOFqaqUPILZKL9JgLcEOu60KGmn0UhFrlujxky3cizNVSKYrIEib/6jkeWmwSMy0RDvqOkYDsToRYEbYjxeZb0jInEEv6OwyRQD29WDrZExJmVSPTozWe1l2b3zkdlhoqqcR4UVBTBM+C/K5xT0tRU9K9Y8l8E67dV4DWLcWmuOzlMp2wkvJpyzilhFSF6hvE3rhA1naA4KZwzYCGoqDVTmkJEv+1lRGz0OLvmF1mWqrb40tYVfHxRO2dH282KTHjLb6Y9XmL86IIMixmZRosmIv55RGEu0cCFhnXwzWfKk6hlyaB8=
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:BL0PR12MB4948.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(39860400002)(136003)(346002)(376002)(396003)(366004)(8936002)(5660300002)(66946007)(31686004)(2906002)(956004)(966005)(2616005)(66476007)(36756003)(66556008)(6486002)(44832011)(86362001)(31696002)(316002)(110136005)(16576012)(26005)(83380400001)(38100700002)(450100002)(478600001)(16526019)(186003)(8676002)(43740500002)(45980500001);
 DIR:OUT; SFP:1101; 
X-MS-Exchange-AntiSpam-MessageData: =?utf-8?B?cGVYRy8rVVczd0VhNGg4Q3FGT2FFRkR4cGtvUVE4d3UwWjZxVFRRM3NyZ3lr?=
 =?utf-8?B?K2xETTRJKzliYUM3MjhJQ1hUTVlWMzZ4dXJKYlk1SjAwdUJXMGlqTDRJVkVI?=
 =?utf-8?B?Z2dSU09GYS9sOGFmRTZvTEd3M3JDcVhzZ2o4R0ptT3Jxc082amFSTm9SN1Ur?=
 =?utf-8?B?U1BTRGd2L1VCbVJ1R0lHa0VjZUhRSnlYRlVNOGFIeGdBYU5LVllSOXkrM2R0?=
 =?utf-8?B?dDdQcEpKUjRqR0hOWlRtUnVZNW1PV0FFSHpCVmZNYTVOVmRUUmJyTFdvR21S?=
 =?utf-8?B?UXYxUjB3MlQ1K3Z1bEdpOUZwTWNtSS91SGZoL2dTa0FQS1hJOUxjbWN6djB4?=
 =?utf-8?B?RVVlZ3MzbHNUL2kwTWxTQVoxQ1pvY3B0QkhjQmdDZ1dJVmJNNlh3ZUtvLytY?=
 =?utf-8?B?WnhqNmlPS2ozU21haHhoQm5VekdlOGtqSFFraWdlTmx3MWdHTW5LRStWc2ZR?=
 =?utf-8?B?azM0MEFDK2Fpbk9tajFUOUp3Y0NQR25QSVZyc3BMRnFINHdsdGRSWHUyeXR0?=
 =?utf-8?B?cnlpbm1JOC85QkpaODNEeTl1Ymx0Q3pOQWdyYlk1dnQrVnd4WUQrZVNwNkJR?=
 =?utf-8?B?K21IbXQrdVlDM3BuU2szQU9EZEo3QVhqVmlDTHM3Zi96RmhuRFlFQmJoMjVa?=
 =?utf-8?B?NFk2M0F6bmQ5Qmh2anhPazVBd3hobzB4ellBMFJMTFptb3Q0azNSOWljb05L?=
 =?utf-8?B?VWg4bk9hNG8wRkdVOUJqV1VDWHVRNzFaS2xOR3JsOVppZ0NJQUNSRndqcDNi?=
 =?utf-8?B?SmMrZFhIemEwRkJuSUQ2a0dzZmlFbHVEcURSYnBjaDlUNCtJc3VzRkxNQmti?=
 =?utf-8?B?K2RJdHE5cnI1bHNtWTJ5cTFlbHJYVVF1SEFGRGRDVkxMb3FYTU0xYjYxWkF6?=
 =?utf-8?B?cWtzbGVhZ3V0eWdFdFdkbE1GdmMzdVZpaDBxUFVHTjhsZWlhZ29va2hzYjB3?=
 =?utf-8?B?Q0tlUHlCeUlwR01wTHBGVzU1SlIrOXhTZ0FtZ2dqV2tpbExqVGZ1NTNNUzQx?=
 =?utf-8?B?SXVHd2VqN0RzRWpiOVVyZzVpbW9jMmZJa1laeXBndHg5TWFmZUE3Y3pDRGxo?=
 =?utf-8?B?dWIveDhNblhIOGJvTnd1YXVzVU5ialI3YXlkK1Z6cEFVQTNBSVFMeHhDZlpN?=
 =?utf-8?B?Zm96d3lzKzBLWUJzRXcyM1c4ZVdZMm1vT3FhSDd0OTd0NGJOMzJ2S1l1cSsr?=
 =?utf-8?B?NW9hdGhQQXpOUW83WmpQM2JyTExIMGpBRFlWMDlwWDRJNERRVW9HY3RrR0Fa?=
 =?utf-8?B?V1pSSUFrakVGMjlTNkJRb0VKcDhLV1NUKzNUdHdibEtsZFhydTRES1pWS0lB?=
 =?utf-8?B?WXVuL3dSbDJleWRkTzN5R0lPalBFVVkzRGV2VVlsbjl4ck8wUHROQXUwbHhQ?=
 =?utf-8?B?ZGpqSXFlaHJwRFRDcm5mYkdVYjNsZDVua1MyRk1QODhVL1FScGlidmp4aVl3?=
 =?utf-8?B?M3RreVdPeWhaUXg0Zm1pM3ZCa1NWbkdZVzVnbWN6SHVseTZoNTE2cUlPL2dJ?=
 =?utf-8?B?dzJtUm9EWFNCenNuemVyQ1lVSTJvUkNjdFBKbWxPNEI5eXA0Yjl6eEhYMEhN?=
 =?utf-8?B?SXJ2dzRLZVI3UkFhcSs2TkFkWnVHOXRzaTRkYU5xcjdZeERSdGJnUEZIYUY3?=
 =?utf-8?B?TVhUUVJ0M0xTK1pVcGJzcC9qampLMnpQMDlFRnhBeFFZTjl1K0prMGprOFA3?=
 =?utf-8?B?UDFsMmFRMUQxSHIxM3VBaEloU2J2VUI5N3AwNVR2VjVTTlpWTWlrMzBWS1hw?=
 =?utf-8?Q?6cKi4r803cS+RCyonITpLkfhl5PGJ+Tb3wxhikZ?=
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 5e6b1ddf-289b-4cf8-e917-08d9092e51db
X-MS-Exchange-CrossTenant-AuthSource: BL0PR12MB4948.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 27 Apr 2021 03:41:19.8228 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: TBWtmdtlFo7z1BGKvic+DvTrFmlfDfsKsCHtHdObuYgrE8ohD/qVxi3/Jd63sLc3+2optCMK7HWzYozZifBjkQ==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB4357
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QW0gMjAyMS0wNC0yNiB1bSA4OjA5IHAubS4gc2NocmllYiBaZW5nLCBPYWs6Cj4gQXMgSSB1bmRl
cnN0YW5kIGl0LCB3aGVuIG9uZSBHUFUgbWFwIGFub3RoZXIgR1BVJ3MgdnJhbSwgdGhpcyB2cmFt
IHNob3VsZCBhbHNvIGJlIG1hcHBlZCBpbiBpb21tdSBwYWdlIHRhYmxlLiBBbHNvIG5vcm1hbCBH
VFQgbWVtb3J5ICh2ZXJzdXMgdXNlcnB0cikgYWxzbyBuZWVkIHRvIGJlIG1hcHBlZCBpbiBpb21t
dS4gQnV0IGRvbid0IHNlZSB0aGlzIGNvZGUgYmVsb3cuCgpSaWdodCwgSSdtIG5vdCBzb2x2aW5n
IGFsbCBwcm9ibGVtcyBhdCBvbmNlLiBUaGUgbmV4dCBwYXRjaCBpcyB0aGVyZSB0bwpoYW5kbGUg
R1RUIEJPcy4KClBlZXIgbWFwcGluZ3Mgb2YgZG9vcmJlbGxzLCBNTUlPIGFuZCBWUkFNIHN0aWxs
IG5lZWQgdG8gYmUgaGFuZGxlZCBpbgp0aGUgZnV0dXJlLiBJJ20gdHJ5aW5nIHRvIGZpeCB0aGUg
d29yc3QgaXNzdWVzIGZpcnN0LiBUaGlzIHNlcmllcyBzaG91bGQKZ2V0IDk5JSBvZiByZWFsIHdv
cmxkIHRlc3RzIHdvcmtpbmcuCgoKPiAgSSBvbmx5IHNlZSB5b3UgbWFwIHVzZXJwdHIgaW4gaW9t
bXUuIE1heWJlIHlvdSBtYXAgdGhlbSBpbiBpb21tdSBub3QgZHVyaW5nIG1lbW9yeSBhdHRhY2ht
ZW50IHRpbWU/Cj4KPiBBbHNvIHNlZSBhIG5pdC1waWNrIGlubGluZQo+Cj4gUmVnYXJkcywKPiBP
YWsgCj4KPiAgCj4KPiDvu79PbiAyMDIxLTA0LTIxLCA5OjMxIFBNLCAiZHJpLWRldmVsIG9uIGJl
aGFsZiBvZiBGZWxpeCBLdWVobGluZyIgPGRyaS1kZXZlbC1ib3VuY2VzQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZyBvbiBiZWhhbGYgb2YgRmVsaXguS3VlaGxpbmdAYW1kLmNvbT4gd3JvdGU6Cj4KPiAg
ICAgQWRkIEJPLXR5cGUgc3BlY2lmaWMgaGVscGVycyBmdW5jdGlvbnMgdG8gRE1BLW1hcCBhbmQg
dW5tYXAKPiAgICAga2ZkX21lbV9hdHRhY2htZW50cy4gSW1wbGVtZW50IHRoaXMgZnVuY3Rpb25h
bGl0eSBmb3IgdXNlcnB0cnMgYnkgY3JlYXRpbmcKPiAgICAgb25lIFNHIEJPIHBlciBHUFUgYW5k
IGZpbGxpbmcgaXQgd2l0aCBhIERNQSBtYXBwaW5nIG9mIHRoZSBwYWdlcyBmcm9tIHRoZQo+ICAg
ICBvcmlnaW5hbCBtZW0tPmJvLgo+Cj4gICAgIFNpZ25lZC1vZmYtYnk6IEZlbGl4IEt1ZWhsaW5n
IDxGZWxpeC5LdWVobGluZ0BhbWQuY29tPgo+ICAgICAtLS0KPiAgICAgIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmQuaCAgICB8ICAgOCArLQo+ICAgICAgLi4uL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMgIHwgMTQ2ICsrKysrKysrKysrKysr
KysrLQo+ICAgICAgMiBmaWxlcyBjaGFuZ2VkLCAxNDUgaW5zZXJ0aW9ucygrKSwgOSBkZWxldGlv
bnMoLSkKPgo+ICAgICBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2FtZGtmZC5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZC5o
Cj4gICAgIGluZGV4IGMyNGIyNDc4ZjQ0NS4uNjM2Njg0MzNmNWE2IDEwMDY0NAo+ICAgICAtLS0g
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkLmgKPiAgICAgKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZC5oCj4gICAgIEBAIC0zOCwx
MSArMzgsMTcgQEAgZXh0ZXJuIHVpbnQ2NF90IGFtZGdwdV9hbWRrZmRfdG90YWxfbWVtX3NpemU7
Cj4KPiAgICAgIHN0cnVjdCBhbWRncHVfZGV2aWNlOwo+Cj4gICAgICtlbnVtIGtmZF9tZW1fYXR0
YWNobWVudF90eXBlIHsKPiAgICAgKwlLRkRfTUVNX0FUVF9TSEFSRUQsCS8qIFNoYXJlIGtnZF9t
ZW0tPmJvIG9yIGFub3RoZXIgYXR0YWNobWVudCdzICovCj4gICAgICsJS0ZEX01FTV9BVFRfVVNF
UlBUUiwJLyogU0cgYm8gdG8gRE1BIG1hcCBwYWdlcyBmcm9tIGEgdXNlcnB0ciBibyAqLwo+ICAg
ICArfTsKPiAgICAgKwo+ICAgICAgc3RydWN0IGtmZF9tZW1fYXR0YWNobWVudCB7Cj4gICAgICAJ
c3RydWN0IGxpc3RfaGVhZCBsaXN0Owo+ICAgICArCWVudW0ga2ZkX21lbV9hdHRhY2htZW50X3R5
cGUgdHlwZTsKPiAgICAgKwlib29sIGlzX21hcHBlZDsKPiAgICAgIAlzdHJ1Y3QgYW1kZ3B1X2Jv
X3ZhICpib192YTsKPiAgICAgIAlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldjsKPiAgICAgLQli
b29sIGlzX21hcHBlZDsKPiAgICAgIAl1aW50NjRfdCB2YTsKPiAgICAgIAl1aW50NjRfdCBwdGVf
ZmxhZ3M7Cj4gICAgICB9Owo+ICAgICBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2FtZGtmZF9ncHV2bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2FtZGtmZF9ncHV2bS5jCj4gICAgIGluZGV4IGZiZDdlNzg2YjU0ZS4uNDlkMWFmNGFh
NWYxIDEwMDY0NAo+ICAgICAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
YW1ka2ZkX2dwdXZtLmMKPiAgICAgKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2FtZGtmZF9ncHV2bS5jCj4gICAgIEBAIC00NzMsMTIgKzQ3MywxMTcgQEAgc3RhdGljIHVp
bnQ2NF90IGdldF9wdGVfZmxhZ3Moc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVjdCBr
Z2RfbWVtICptZW0pCj4gICAgICAJcmV0dXJuIHB0ZV9mbGFnczsKPiAgICAgIH0KPgo+ICAgICAr
c3RhdGljIGludAo+ICAgICAra2ZkX21lbV9kbWFtYXBfdXNlcnB0cihzdHJ1Y3Qga2dkX21lbSAq
bWVtLAo+ICAgICArCQkgICAgICAgc3RydWN0IGtmZF9tZW1fYXR0YWNobWVudCAqYXR0YWNobWVu
dCkKPiAgICAgK3sKPiAgICAgKwllbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXJlY3Rpb24gPQo+
ICAgICArCQltZW0tPmFsbG9jX2ZsYWdzICYgS0ZEX0lPQ19BTExPQ19NRU1fRkxBR1NfV1JJVEFC
TEUgPwo+ICAgICArCQlETUFfQklESVJFQ1RJT05BTCA6IERNQV9UT19ERVZJQ0U7Cj4gICAgICsJ
c3RydWN0IHR0bV9vcGVyYXRpb25fY3R4IGN0eCA9IHsuaW50ZXJydXB0aWJsZSA9IHRydWV9Owo+
ICAgICArCXN0cnVjdCBhbWRncHVfYm8gKmJvID0gYXR0YWNobWVudC0+Ym9fdmEtPmJhc2UuYm87
Cj4gICAgICsJc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBhdHRhY2htZW50LT5hZGV2Owo+
ICAgICArCXN0cnVjdCB0dG1fdHQgKnNyY190dG0gPSBtZW0tPmJvLT50Ym8udHRtOwo+ICAgICAr
CXN0cnVjdCB0dG1fdHQgKnR0bSA9IGJvLT50Ym8udHRtOwo+ICAgICArCWludCByZXQ7Cj4gICAg
ICsKPiAgICAgKwl0dG0tPnNnID0ga21hbGxvYyhzaXplb2YoKnR0bS0+c2cpLCBHRlBfS0VSTkVM
KTsKPiAgICAgKwlpZiAodW5saWtlbHkoIXR0bS0+c2cpKQo+ICAgICArCQlyZXR1cm4gLUVOT01F
TTsKPiAgICAgKwo+ICAgICArCWlmIChXQVJOX09OKHR0bS0+bnVtX3BhZ2VzICE9IHNyY190dG0t
Pm51bV9wYWdlcykpCj4gICAgICsJCXJldHVybiAtRUlOVkFMOwo+ICAgICArCj4gICAgICsJLyog
U2FtZSBzZXF1ZW5jZSBhcyBpbiBhbWRncHVfdHRtX3R0X3Bpbl91c2VycHRyICovCj4gICAgICsJ
cmV0ID0gc2dfYWxsb2NfdGFibGVfZnJvbV9wYWdlcyh0dG0tPnNnLCBzcmNfdHRtLT5wYWdlcywK
PiAgICAgKwkJCQkJdHRtLT5udW1fcGFnZXMsIDAsCj4gICAgICsJCQkJCSh1NjQpdHRtLT5udW1f
cGFnZXMgPDwgUEFHRV9TSElGVCwKPiAgICAgKwkJCQkJR0ZQX0tFUk5FTCk7Cj4gICAgICsJaWYg
KHVubGlrZWx5KHJldCkpCj4gICAgICsJCWdvdG8gcmVsZWFzZV9zZzsKPiBTaG91bGQgZ28gdG8g
YSBsYWJlbCBzdGFydGluZyBmcm9tIGtmcmVlIGJlbG93PwoKVGhhbmtzLCBJJ2xsIGZpeCB0aGF0
LgoKUmVnYXJkcywKwqAgRmVsaXgKCgo+ICAgICArCj4gICAgICsJcmV0ID0gZG1hX21hcF9zZ3Rh
YmxlKGFkZXYtPmRldiwgdHRtLT5zZywgZGlyZWN0aW9uLCAwKTsKPiAgICAgKwlpZiAodW5saWtl
bHkocmV0KSkKPiAgICAgKwkJZ290byByZWxlYXNlX3NnOwo+ICAgICArCj4gICAgICsJZHJtX3By
aW1lX3NnX3RvX2RtYV9hZGRyX2FycmF5KHR0bS0+c2csIHR0bS0+ZG1hX2FkZHJlc3MsCj4gICAg
ICsJCQkJICAgICAgIHR0bS0+bnVtX3BhZ2VzKTsKPiAgICAgKwo+ICAgICArCWFtZGdwdV9ib19w
bGFjZW1lbnRfZnJvbV9kb21haW4oYm8sIEFNREdQVV9HRU1fRE9NQUlOX0dUVCk7Cj4gICAgICsJ
cmV0ID0gdHRtX2JvX3ZhbGlkYXRlKCZiby0+dGJvLCAmYm8tPnBsYWNlbWVudCwgJmN0eCk7Cj4g
ICAgICsJaWYgKHJldCkKPiAgICAgKwkJZ290byByZWxlYXNlX3NnOwo+ICAgICArCj4gICAgICsJ
cmV0dXJuIDA7Cj4gICAgICsKPiAgICAgK3JlbGVhc2Vfc2c6Cj4gICAgICsJcHJfZXJyKCJETUEg
bWFwIHVzZXJwdHIgZmFpbGVkOiAlZFxuIiwgcmV0KTsKPiAgICAgKwlzZ19mcmVlX3RhYmxlKHR0
bS0+c2cpOwo+ICAgICArCWtmcmVlKHR0bS0+c2cpOwo+ICAgICArCXR0bS0+c2cgPSBOVUxMOwo+
ICAgICArCXJldHVybiByZXQ7Cj4gICAgICt9Cj4gICAgICsKPiAgICAgK3N0YXRpYyBpbnQKPiAg
ICAgK2tmZF9tZW1fZG1hbWFwX2F0dGFjaG1lbnQoc3RydWN0IGtnZF9tZW0gKm1lbSwKPiAgICAg
KwkJCSAgc3RydWN0IGtmZF9tZW1fYXR0YWNobWVudCAqYXR0YWNobWVudCkKPiAgICAgK3sKPiAg
ICAgKwlzd2l0Y2ggKGF0dGFjaG1lbnQtPnR5cGUpIHsKPiAgICAgKwljYXNlIEtGRF9NRU1fQVRU
X1NIQVJFRDoKPiAgICAgKwkJcmV0dXJuIDA7Cj4gICAgICsJY2FzZSBLRkRfTUVNX0FUVF9VU0VS
UFRSOgo+ICAgICArCQlyZXR1cm4ga2ZkX21lbV9kbWFtYXBfdXNlcnB0cihtZW0sIGF0dGFjaG1l
bnQpOwo+ICAgICArCWRlZmF1bHQ6Cj4gICAgICsJCVdBUk5fT05fT05DRSgxKTsKPiAgICAgKwl9
Cj4gICAgICsJcmV0dXJuIC1FSU5WQUw7Cj4gICAgICt9Cj4gICAgICsKPiAgICAgK3N0YXRpYyB2
b2lkCj4gICAgICtrZmRfbWVtX2RtYXVubWFwX3VzZXJwdHIoc3RydWN0IGtnZF9tZW0gKm1lbSwK
PiAgICAgKwkJCSBzdHJ1Y3Qga2ZkX21lbV9hdHRhY2htZW50ICphdHRhY2htZW50KQo+ICAgICAr
ewo+ICAgICArCWVudW0gZG1hX2RhdGFfZGlyZWN0aW9uIGRpcmVjdGlvbiA9Cj4gICAgICsJCW1l
bS0+YWxsb2NfZmxhZ3MgJiBLRkRfSU9DX0FMTE9DX01FTV9GTEFHU19XUklUQUJMRSA/Cj4gICAg
ICsJCURNQV9CSURJUkVDVElPTkFMIDogRE1BX1RPX0RFVklDRTsKPiAgICAgKwlzdHJ1Y3QgdHRt
X29wZXJhdGlvbl9jdHggY3R4ID0gey5pbnRlcnJ1cHRpYmxlID0gZmFsc2V9Owo+ICAgICArCXN0
cnVjdCBhbWRncHVfYm8gKmJvID0gYXR0YWNobWVudC0+Ym9fdmEtPmJhc2UuYm87Cj4gICAgICsJ
c3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYgPSBhdHRhY2htZW50LT5hZGV2Owo+ICAgICArCXN0
cnVjdCB0dG1fdHQgKnR0bSA9IGJvLT50Ym8udHRtOwo+ICAgICArCj4gICAgICsJaWYgKHVubGlr
ZWx5KCF0dG0tPnNnKSkKPiAgICAgKwkJcmV0dXJuOwo+ICAgICArCj4gICAgICsJYW1kZ3B1X2Jv
X3BsYWNlbWVudF9mcm9tX2RvbWFpbihibywgQU1ER1BVX0dFTV9ET01BSU5fQ1BVKTsKPiAgICAg
Kwl0dG1fYm9fdmFsaWRhdGUoJmJvLT50Ym8sICZiby0+cGxhY2VtZW50LCAmY3R4KTsKPiAgICAg
Kwo+ICAgICArCWRtYV91bm1hcF9zZ3RhYmxlKGFkZXYtPmRldiwgdHRtLT5zZywgZGlyZWN0aW9u
LCAwKTsKPiAgICAgKwlzZ19mcmVlX3RhYmxlKHR0bS0+c2cpOwo+ICAgICArCXR0bS0+c2cgPSBO
VUxMOwo+ICAgICArfQo+ICAgICArCj4gICAgICtzdGF0aWMgdm9pZAo+ICAgICAra2ZkX21lbV9k
bWF1bm1hcF9hdHRhY2htZW50KHN0cnVjdCBrZ2RfbWVtICptZW0sCj4gICAgICsJCQkgICAgc3Ry
dWN0IGtmZF9tZW1fYXR0YWNobWVudCAqYXR0YWNobWVudCkKPiAgICAgK3sKPiAgICAgKwlzd2l0
Y2ggKGF0dGFjaG1lbnQtPnR5cGUpIHsKPiAgICAgKwljYXNlIEtGRF9NRU1fQVRUX1NIQVJFRDoK
PiAgICAgKwkJYnJlYWs7Cj4gICAgICsJY2FzZSBLRkRfTUVNX0FUVF9VU0VSUFRSOgo+ICAgICAr
CQlrZmRfbWVtX2RtYXVubWFwX3VzZXJwdHIobWVtLCBhdHRhY2htZW50KTsKPiAgICAgKwkJYnJl
YWs7Cj4gICAgICsJZGVmYXVsdDoKPiAgICAgKwkJV0FSTl9PTl9PTkNFKDEpOwo+ICAgICArCX0K
PiAgICAgK30KPiAgICAgKwo+ICAgICAgLyoga2ZkX21lbV9hdHRhY2ggLSBBZGQgYSBCTyB0byBh
IFZNCj4gICAgICAgKgo+ICAgICAgICogRXZlcnl0aGluZyB0aGF0IG5lZWRzIHRvIGJvIGRvbmUg
b25seSBvbmNlIHdoZW4gYSBCTyBpcyBmaXJzdCBhZGRlZAo+ICAgICAgICogdG8gYSBWTS4gSXQg
Y2FuIGxhdGVyIGJlIG1hcHBlZCBhbmQgdW5tYXBwZWQgbWFueSB0aW1lcyB3aXRob3V0Cj4gICAg
ICAgKiByZXBlYXRpbmcgdGhlc2Ugc3RlcHMuCj4gICAgICAgKgo+ICAgICArICogMC4gQ3JlYXRl
IEJPIGZvciBETUEgbWFwcGluZywgaWYgbmVlZGVkCj4gICAgICAgKiAxLiBBbGxvY2F0ZSBhbmQg
aW5pdGlhbGl6ZSBCTyBWQSBlbnRyeSBkYXRhIHN0cnVjdHVyZQo+ICAgICAgICogMi4gQWRkIEJP
IHRvIHRoZSBWTQo+ICAgICAgICogMy4gRGV0ZXJtaW5lIEFTSUMtc3BlY2lmaWMgUFRFIGZsYWdz
Cj4gICAgIEBAIC00ODgsMTAgKzU5MywxMiBAQCBzdGF0aWMgdWludDY0X3QgZ2V0X3B0ZV9mbGFn
cyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgc3RydWN0IGtnZF9tZW0gKm1lbSkKPiAgICAg
IHN0YXRpYyBpbnQga2ZkX21lbV9hdHRhY2goc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0
cnVjdCBrZ2RfbWVtICptZW0sCj4gICAgICAJCXN0cnVjdCBhbWRncHVfdm0gKnZtLCBib29sIGlz
X2FxbCkKPiAgICAgIHsKPiAgICAgKwlzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYm9fYWRldiA9IGFt
ZGdwdV90dG1fYWRldihtZW0tPmJvLT50Ym8uYmRldik7Cj4gICAgICAJdW5zaWduZWQgbG9uZyBi
b19zaXplID0gbWVtLT5iby0+dGJvLmJhc2Uuc2l6ZTsKPiAgICAgIAl1aW50NjRfdCB2YSA9IG1l
bS0+dmE7Cj4gICAgICAJc3RydWN0IGtmZF9tZW1fYXR0YWNobWVudCAqYXR0YWNobWVudFsyXSA9
IHtOVUxMLCBOVUxMfTsKPiAgICAgIAlzdHJ1Y3QgYW1kZ3B1X2JvICpib1syXSA9IHtOVUxMLCBO
VUxMfTsKPiAgICAgKwlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmdvYmo7Cj4gICAgICAJaW50IGks
IHJldDsKPgo+ICAgICAgCWlmICghdmEpIHsKPiAgICAgQEAgLTUwOSwxNCArNjE2LDM3IEBAIHN0
YXRpYyBpbnQga2ZkX21lbV9hdHRhY2goc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVj
dCBrZ2RfbWVtICptZW0sCj4gICAgICAJCXByX2RlYnVnKCJcdCBhZGQgVkEgMHglbGx4IC0gMHgl
bGx4IHRvIHZtICVwXG4iLCB2YSwKPiAgICAgIAkJCSB2YSArIGJvX3NpemUsIHZtKTsKPgo+ICAg
ICAtCQkvKiBGSVhNRTogRm9yIG5vdyBhbGwgYXR0YWNobWVudHMgdXNlIHRoZSBzYW1lIEJPLiBU
aGlzIGlzCj4gICAgIC0JCSAqIGluY29ycmVjdCBiZWNhdXNlIG9uZSBCTyBjYW4gb25seSBoYXZl
IG9uZSBETUEgbWFwcGluZwo+ICAgICAtCQkgKiBmb3Igb25lIEdQVS4gV2UgbmVlZCBvbmUgQk8g
cGVyIEdQVSwgZS5nLiBhIERNQUJ1Zgo+ICAgICAtCQkgKiBpbXBvcnQgd2l0aCBkeW5hbWljIGF0
dGFjaG1lbnQuIFRoaXMgd2lsbCBiZSBhZGRyZXNzZWQKPiAgICAgLQkJICogb25lIEJPLXR5cGUg
YXQgYSB0aW1lIGluIHN1YnNlcXVlbnQgcGF0Y2hlcy4KPiAgICAgLQkJICovCj4gICAgIC0JCWJv
W2ldID0gbWVtLT5ibzsKPiAgICAgLQkJZHJtX2dlbV9vYmplY3RfZ2V0KCZib1tpXS0+dGJvLmJh
c2UpOwo+ICAgICArCQlpZiAoYWRldiA9PSBib19hZGV2IHx8IChtZW0tPmRvbWFpbiA9PSBBTURH
UFVfR0VNX0RPTUFJTl9WUkFNICYmCj4gICAgICsJCQkJCWFtZGdwdV94Z21pX3NhbWVfaGl2ZShh
ZGV2LCBib19hZGV2KSkpIHsKPiAgICAgKwkJCS8qIE1hcHBpbmdzIG9uIHRoZSBsb2NhbCBHUFUg
YW5kIFZSQU0gbWFwcGluZ3MgaW4gdGhlCj4gICAgICsJCQkgKiBsb2NhbCBoaXZlIHNoYXJlIHRo
ZSBvcmlnaW5hbCBCTwo+ICAgICArCQkJICovCj4gICAgICsJCQlhdHRhY2htZW50W2ldLT50eXBl
ID0gS0ZEX01FTV9BVFRfU0hBUkVEOwo+ICAgICArCQkJYm9baV0gPSBtZW0tPmJvOwo+ICAgICAr
CQkJZHJtX2dlbV9vYmplY3RfZ2V0KCZib1tpXS0+dGJvLmJhc2UpOwo+ICAgICArCQl9IGVsc2Ug
aWYgKGkgPiAwKSB7Cj4gICAgICsJCQkvKiBNdWx0aXBsZSBtYXBwaW5ncyBvbiB0aGUgc2FtZSBH
UFUgc2hhcmUgdGhlIEJPICovCj4gICAgICsJCQlhdHRhY2htZW50W2ldLT50eXBlID0gS0ZEX01F
TV9BVFRfU0hBUkVEOwo+ICAgICArCQkJYm9baV0gPSBib1swXTsKPiAgICAgKwkJCWRybV9nZW1f
b2JqZWN0X2dldCgmYm9baV0tPnRiby5iYXNlKTsKPiAgICAgKwkJfSBlbHNlIGlmIChhbWRncHVf
dHRtX3R0X2dldF91c2VybW0obWVtLT5iby0+dGJvLnR0bSkpIHsKPiAgICAgKwkJCS8qIENyZWF0
ZSBhbiBTRyBCTyB0byBETUEtbWFwIHVzZXJwdHJzIG9uIG90aGVyIEdQVXMgKi8KPiAgICAgKwkJ
CWF0dGFjaG1lbnRbaV0tPnR5cGUgPSBLRkRfTUVNX0FUVF9VU0VSUFRSOwo+ICAgICArCQkJcmV0
ID0gYW1kZ3B1X2dlbV9vYmplY3RfY3JlYXRlKGFkZXYsIGJvX3NpemUsIDEsCj4gICAgICsJCQkJ
CQkgICAgICAgQU1ER1BVX0dFTV9ET01BSU5fQ1BVLAo+ICAgICArCQkJCQkJICAgICAgIDAsIHR0
bV9ib190eXBlX3NnLAo+ICAgICArCQkJCQkJICAgICAgIG1lbS0+Ym8tPnRiby5iYXNlLnJlc3Ys
Cj4gICAgICsJCQkJCQkgICAgICAgJmdvYmopOwo+ICAgICArCQkJaWYgKHJldCkKPiAgICAgKwkJ
CQlnb3RvIHVud2luZDsKPiAgICAgKwkJCWJvW2ldID0gZ2VtX3RvX2FtZGdwdV9ibyhnb2JqKTsK
PiAgICAgKwkJCWJvW2ldLT5wYXJlbnQgPSBhbWRncHVfYm9fcmVmKG1lbS0+Ym8pOwo+ICAgICAr
CQl9IGVsc2Ugewo+ICAgICArCQkJLyogRklYTUU6IE5lZWQgdG8gRE1BLW1hcCBvdGhlciBCTyB0
eXBlcyAqLwo+ICAgICArCQkJYXR0YWNobWVudFtpXS0+dHlwZSA9IEtGRF9NRU1fQVRUX1NIQVJF
RDsKPiAgICAgKwkJCWJvW2ldID0gbWVtLT5ibzsKPiAgICAgKwkJCWRybV9nZW1fb2JqZWN0X2dl
dCgmYm9baV0tPnRiby5iYXNlKTsKPiAgICAgKwkJfQo+Cj4gICAgICAJCS8qIEFkZCBCTyB0byBW
TSBpbnRlcm5hbCBkYXRhIHN0cnVjdHVyZXMgKi8KPiAgICAgIAkJYXR0YWNobWVudFtpXS0+Ym9f
dmEgPSBhbWRncHVfdm1fYm9fYWRkKGFkZXYsIHZtLCBib1tpXSk7Cj4gICAgIC0tIAo+ICAgICAy
LjMxLjEKPgo+ICAgICBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwo+ICAgICBkcmktZGV2ZWwgbWFpbGluZyBsaXN0Cj4gICAgIGRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKPiAgICAgaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9kcmktZGV2ZWwKPgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVl
ZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9kcmktZGV2ZWwK
