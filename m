Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DE43C129C3
	for <lists+dri-devel@lfdr.de>; Fri,  3 May 2019 10:19:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 4F164898C0;
	Fri,  3 May 2019 08:19:30 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x543.google.com (mail-ed1-x543.google.com
 [IPv6:2a00:1450:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1C02189875
 for <dri-devel@lists.freedesktop.org>; Fri,  3 May 2019 08:19:28 +0000 (UTC)
Received: by mail-ed1-x543.google.com with SMTP id g57so5009592edc.12
 for <dri-devel@lists.freedesktop.org>; Fri, 03 May 2019 01:19:28 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:date:from:to:cc:subject:message-id
 :mail-followup-to:references:mime-version:content-disposition
 :content-transfer-encoding:in-reply-to:user-agent;
 bh=olm/HHc2TtMktWFy0AL39rMg+fu96BKbplxl2mLW20s=;
 b=P/2kIagQWIUSRSeU7VQwCyW3ahwGQmgMKjJ5n3OrkdwovInqEy+MaPGLKaCQWK5dil
 ILO+tbaGlMbzATKOLrwo/y4m8AfdXuuqAxYtPRtyMIyF6Zf5F8N0VkFkmilv6P65m3am
 zUEgSiuehKsD3aYFsZiPyx3ffiKfHZr66YLCkNgr/DjoiccWZ2dma4dUtN/+NNgTagam
 Dm4M9CgM4S8aVDnj9YlckswI7PBZMJfvngNj+s/nC4EW2y7WlD60scX1sVIZFNB9qOuN
 mvEP4v1NHv6CD1QzpWfvCWoXaLTZ6XoWbsCWmab7ZWDfKPAusV1eVhak9AllkaGMbDm2
 Ii0A==
X-Gm-Message-State: APjAAAVCk0ziS1e2Cqv5I0eu0taei2dg6IgSICZc0QEuOYqKPZxlk+2F
 GUPI4lk+kRQuqcXOYy/Hq53oXw==
X-Google-Smtp-Source: APXvYqws7kCArkxumO+8HrWGsCAo80Uz4Ze+qyxl8t/ANVmBICLlfrsVf9uG0LNWlH/zRKDtg/KJYw==
X-Received: by 2002:a17:906:468e:: with SMTP id
 a14mr3139837ejr.152.1556871566696; 
 Fri, 03 May 2019 01:19:26 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id f15sm250758eja.39.2019.05.03.01.19.25
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Fri, 03 May 2019 01:19:25 -0700 (PDT)
Date: Fri, 3 May 2019 10:19:23 +0200
From: Daniel Vetter <daniel@ffwll.ch>
To: Sean Paul <sean@poorly.run>
Subject: Re: [PATCH v3 04/10] drm: Convert
 connector_helper_funcs->atomic_check to accept drm_atomic_state
Message-ID: <20190503081923.GJ3271@phenom.ffwll.local>
Mail-Followup-To: Sean Paul <sean@poorly.run>,
 dri-devel@lists.freedesktop.org, Sean Paul <seanpaul@chromium.org>,
 Ville =?iso-8859-1?Q?Syrj=E4l=E4?= <ville.syrjala@linux.intel.com>,
 Jani Nikula <jani.nikula@linux.intel.com>,
 Joonas Lahtinen <joonas.lahtinen@linux.intel.com>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>,
 Ben Skeggs <bskeggs@redhat.com>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Kieran Bingham <kieran.bingham+renesas@ideasonboard.com>,
 Eric Anholt <eric@anholt.net>,
 Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>,
 David Airlie <airlied@linux.ie>, linux-kernel@vger.kernel.org,
 intel-gfx@lists.freedesktop.org, nouveau@lists.freedesktop.org,
 linux-renesas-soc@vger.kernel.org
References: <20190502194956.218441-1-sean@poorly.run>
 <20190502194956.218441-5-sean@poorly.run>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190502194956.218441-5-sean@poorly.run>
X-Operating-System: Linux phenom 4.14.0-3-amd64 
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=sender:date:from:to:cc:subject:message-id:mail-followup-to
 :references:mime-version:content-disposition
 :content-transfer-encoding:in-reply-to:user-agent;
 bh=olm/HHc2TtMktWFy0AL39rMg+fu96BKbplxl2mLW20s=;
 b=gjFeL3/yfxA7icwZNyqPlRo7tW8McJbcPyXfSxHt3cudl4hBRHFZmryuRgfVvcU8BH
 j6ftsq5UGzdkg8RTAZixE9LrIaqm2rKj2oHddcvb56a2qoaod0DCZMYM+GJZIOB1Qy34
 2fJNGhPuN9O74gbJDTXfiy392AldSvwafn6hQ=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, nouveau@lists.freedesktop.org,
 David Airlie <airlied@linux.ie>, linux-kernel@vger.kernel.org,
 linux-renesas-soc@vger.kernel.org,
 Kieran Bingham <kieran.bingham+renesas@ideasonboard.com>,
 Sean Paul <seanpaul@chromium.org>, dri-devel@lists.freedesktop.org,
 Rodrigo Vivi <rodrigo.vivi@intel.com>, intel-gfx@lists.freedesktop.org,
 Ben Skeggs <bskeggs@redhat.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBNYXkgMDIsIDIwMTkgYXQgMDM6NDk6NDZQTSAtMDQwMCwgU2VhbiBQYXVsIHdyb3Rl
Ogo+IEZyb206IFNlYW4gUGF1bCA8c2VhbnBhdWxAY2hyb21pdW0ub3JnPgo+IAo+IEV2ZXJ5b25l
IHdobyBpbXBsZW1lbnRzIGNvbm5lY3Rvcl9oZWxwZXJfZnVuY3MtPmF0b21pY19jaGVjayByZWFj
aGVzCj4gaW50byB0aGUgY29ubmVjdG9yIHN0YXRlIHRvIGdldCB0aGUgYXRvbWljIHN0YXRlLiBJ
bnN0ZWFkIG9mIGNvbnRpbnVpbmcKPiB0aGlzIHBhdHRlcm4sIGNoYW5nZSB0aGUgY2FsbGJhY2sg
c2lnbmF0dXJlIHRvIGp1c3QgZ2l2ZSBhdG9taWMgc3RhdGUKPiBhbmQgbGV0IHRoZSBkcml2ZXIg
ZGV0ZXJtaW5lIHdoYXQgaXQgZG9lcyBhbmQgZG9lcyBub3QgbmVlZCBmcm9tIGl0Lgo+IAo+IEV2
ZW50dWFsbHkgYWxsIGF0b21pYyBmdW5jdGlvbnMgc2hvdWxkIGRvIHRoaXMsIGJ1dCB0aGF0J3Mg
anVzdCB0b28gbXVjaAo+IGJ1c3kgd29yayBmb3IgbWUuCj4gCj4gQ2hhbmdlcyBpbiB2MzoKPiAt
IEFkZGVkIHRvIHRoZSBzZXQKPiAKPiBDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xsLmNo
Pgo+IENjOiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgo+
IENjOiBKYW5pIE5pa3VsYSA8amFuaS5uaWt1bGFAbGludXguaW50ZWwuY29tPgo+IENjOiBKb29u
YXMgTGFodGluZW4gPGpvb25hcy5sYWh0aW5lbkBsaW51eC5pbnRlbC5jb20+Cj4gQ2M6IFJvZHJp
Z28gVml2aSA8cm9kcmlnby52aXZpQGludGVsLmNvbT4KPiBDYzogQmVuIFNrZWdncyA8YnNrZWdn
c0ByZWRoYXQuY29tPgo+IENjOiBMYXVyZW50IFBpbmNoYXJ0IDxsYXVyZW50LnBpbmNoYXJ0QGlk
ZWFzb25ib2FyZC5jb20+Cj4gQ2M6IEtpZXJhbiBCaW5naGFtIDxraWVyYW4uYmluZ2hhbStyZW5l
c2FzQGlkZWFzb25ib2FyZC5jb20+Cj4gQ2M6IEVyaWMgQW5ob2x0IDxlcmljQGFuaG9sdC5uZXQ+
Cj4gU2lnbmVkLW9mZi1ieTogU2VhbiBQYXVsIDxzZWFucGF1bEBjaHJvbWl1bS5vcmc+CgpBc3N1
bWluZyBpdCBjb21waWxlcyBldmVyeXdoZXJlIGFuZCBpbnRlbC1nZngtY2kgYXBwcm92ZXMgdG9v
CgpBY2tlZC1ieTogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRlckBmZndsbC5jaD4KPiAtLS0K
PiAgZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfaGVscGVyLmMgICAgICB8ICA0ICsrLS0KPiAg
ZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfYXRvbWljLmMgICAgICB8ICA4ICsrKysrLS0tCj4g
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RwX21zdC5jICAgICAgfCAgNyArKysrLS0tCj4g
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2Rydi5oICAgICAgICAgfCAgMiArLQo+ICBkcml2
ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9zZHZvLmMgICAgICAgIHwgIDkgKysrKystLS0tCj4gIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX3R2LmMgICAgICAgICAgfCAgOCArKysrKy0tLQo+ICBk
cml2ZXJzL2dwdS9kcm0vbm91dmVhdS9kaXNwbnY1MC9kaXNwLmMgIHwgIDUgKysrLS0KPiAgZHJp
dmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9sdmRzLmMgICAgICB8IDEyICsrKysrKystLS0tLQo+
ICBkcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF90eHAuYyAgICAgICAgICAgIHwgIDcgKysrKy0tLQo+
ICBpbmNsdWRlL2RybS9kcm1fbW9kZXNldF9oZWxwZXJfdnRhYmxlcy5oIHwgIDIgKy0KPiAgMTAg
ZmlsZXMgY2hhbmdlZCwgMzcgaW5zZXJ0aW9ucygrKSwgMjcgZGVsZXRpb25zKC0pCj4gCj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX2hlbHBlci5jIGIvZHJpdmVycy9n
cHUvZHJtL2RybV9hdG9taWNfaGVscGVyLmMKPiBpbmRleCA5ZDllNDcyNzY4MzkuLmZhNWEzNjc1
MDdjMSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19oZWxwZXIuYwo+
ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX2hlbHBlci5jCj4gQEAgLTY4Myw3ICs2
ODMsNyBAQCBkcm1fYXRvbWljX2hlbHBlcl9jaGVja19tb2Rlc2V0KHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYsCj4gIAkJfQo+ICAKPiAgCQlpZiAoZnVuY3MtPmF0b21pY19jaGVjaykKPiAtCQkJcmV0
ID0gZnVuY3MtPmF0b21pY19jaGVjayhjb25uZWN0b3IsIG5ld19jb25uZWN0b3Jfc3RhdGUpOwo+
ICsJCQlyZXQgPSBmdW5jcy0+YXRvbWljX2NoZWNrKGNvbm5lY3Rvciwgc3RhdGUpOwo+ICAJCWlm
IChyZXQpCj4gIAkJCXJldHVybiByZXQ7Cj4gIAo+IEBAIC03MjUsNyArNzI1LDcgQEAgZHJtX2F0
b21pY19oZWxwZXJfY2hlY2tfbW9kZXNldChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAo+ICAJCQlj
b250aW51ZTsKPiAgCj4gIAkJaWYgKGZ1bmNzLT5hdG9taWNfY2hlY2spCj4gLQkJCXJldCA9IGZ1
bmNzLT5hdG9taWNfY2hlY2soY29ubmVjdG9yLCBuZXdfY29ubmVjdG9yX3N0YXRlKTsKPiArCQkJ
cmV0ID0gZnVuY3MtPmF0b21pY19jaGVjayhjb25uZWN0b3IsIHN0YXRlKTsKPiAgCQlpZiAocmV0
KQo+ICAJCQlyZXR1cm4gcmV0Owo+ICAJfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pbnRlbF9hdG9taWMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2F0b21pYy5j
Cj4gaW5kZXggYjg0NGU4ODQwYzZmLi5lOGE1YjgyZTkyNDIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvaW50ZWxfYXRvbWljLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9pbnRlbF9hdG9taWMuYwo+IEBAIC0xMDMsMTIgKzEwMywxNCBAQCBpbnQgaW50ZWxfZGlnaXRh
bF9jb25uZWN0b3JfYXRvbWljX3NldF9wcm9wZXJ0eShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29u
bmVjdG9yLAo+ICB9Cj4gIAo+ICBpbnQgaW50ZWxfZGlnaXRhbF9jb25uZWN0b3JfYXRvbWljX2No
ZWNrKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uLAo+IC0JCQkJCSBzdHJ1Y3QgZHJtX2Nvbm5l
Y3Rvcl9zdGF0ZSAqbmV3X3N0YXRlKQo+ICsJCQkJCSBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAq
c3RhdGUpCj4gIHsKPiArCXN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpuZXdfc3RhdGUgPQo+
ICsJCWRybV9hdG9taWNfZ2V0X25ld19jb25uZWN0b3Jfc3RhdGUoc3RhdGUsIGNvbm4pOwo+ICAJ
c3RydWN0IGludGVsX2RpZ2l0YWxfY29ubmVjdG9yX3N0YXRlICpuZXdfY29ubl9zdGF0ZSA9Cj4g
IAkJdG9faW50ZWxfZGlnaXRhbF9jb25uZWN0b3Jfc3RhdGUobmV3X3N0YXRlKTsKPiAgCXN0cnVj
dCBkcm1fY29ubmVjdG9yX3N0YXRlICpvbGRfc3RhdGUgPQo+IC0JCWRybV9hdG9taWNfZ2V0X29s
ZF9jb25uZWN0b3Jfc3RhdGUobmV3X3N0YXRlLT5zdGF0ZSwgY29ubik7Cj4gKwkJZHJtX2F0b21p
Y19nZXRfb2xkX2Nvbm5lY3Rvcl9zdGF0ZShzdGF0ZSwgY29ubik7Cj4gIAlzdHJ1Y3QgaW50ZWxf
ZGlnaXRhbF9jb25uZWN0b3Jfc3RhdGUgKm9sZF9jb25uX3N0YXRlID0KPiAgCQl0b19pbnRlbF9k
aWdpdGFsX2Nvbm5lY3Rvcl9zdGF0ZShvbGRfc3RhdGUpOwo+ICAJc3RydWN0IGRybV9jcnRjX3N0
YXRlICpjcnRjX3N0YXRlOwo+IEBAIC0xMTgsNyArMTIwLDcgQEAgaW50IGludGVsX2RpZ2l0YWxf
Y29ubmVjdG9yX2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubiwKPiAgCWlm
ICghbmV3X3N0YXRlLT5jcnRjKQo+ICAJCXJldHVybiAwOwo+ICAKPiAtCWNydGNfc3RhdGUgPSBk
cm1fYXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShuZXdfc3RhdGUtPnN0YXRlLCBuZXdfc3RhdGUt
PmNydGMpOwo+ICsJY3J0Y19zdGF0ZSA9IGRybV9hdG9taWNfZ2V0X25ld19jcnRjX3N0YXRlKHN0
YXRlLCBuZXdfc3RhdGUtPmNydGMpOwo+ICAKPiAgCS8qCj4gIAkgKiBUaGVzZSBwcm9wZXJ0aWVz
IGFyZSBoYW5kbGVkIGJ5IGZhc3RzZXQsIGFuZCBtaWdodCBub3QgZW5kCj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RwX21zdC5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvaW50ZWxfZHBfbXN0LmMKPiBpbmRleCAxOWQ4MWNlZjJhYjYuLjg5Y2ZlYzEyOGJhMCAxMDA2
NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRlbF9kcF9tc3QuYwo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2ludGVsX2RwX21zdC5jCj4gQEAgLTE0Myw5ICsxNDMsMTAgQEAg
c3RhdGljIGludCBpbnRlbF9kcF9tc3RfY29tcHV0ZV9jb25maWcoc3RydWN0IGludGVsX2VuY29k
ZXIgKmVuY29kZXIsCj4gIAo+ICBzdGF0aWMgaW50Cj4gIGludGVsX2RwX21zdF9hdG9taWNfY2hl
Y2soc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKPiAtCQkJICBzdHJ1Y3QgZHJtX2Nv
bm5lY3Rvcl9zdGF0ZSAqbmV3X2Nvbm5fc3RhdGUpCj4gKwkJCSAgc3RydWN0IGRybV9hdG9taWNf
c3RhdGUgKnN0YXRlKQo+ICB7Cj4gLQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUgPSBu
ZXdfY29ubl9zdGF0ZS0+c3RhdGU7Cj4gKwlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqbmV3
X2Nvbm5fc3RhdGUgPQo+ICsJCWRybV9hdG9taWNfZ2V0X25ld19jb25uZWN0b3Jfc3RhdGUoc3Rh
dGUsIGNvbm5lY3Rvcik7Cj4gIAlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqb2xkX2Nvbm5f
c3RhdGUgPQo+ICAJCWRybV9hdG9taWNfZ2V0X29sZF9jb25uZWN0b3Jfc3RhdGUoc3RhdGUsIGNv
bm5lY3Rvcik7Cj4gIAlzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICppbnRlbF9jb25uZWN0b3IgPQo+
IEBAIC0xNTUsNyArMTU2LDcgQEAgaW50ZWxfZHBfbXN0X2F0b21pY19jaGVjayhzdHJ1Y3QgZHJt
X2Nvbm5lY3RvciAqY29ubmVjdG9yLAo+ICAJc3RydWN0IGRybV9kcF9tc3RfdG9wb2xvZ3lfbWdy
ICptZ3I7Cj4gIAlpbnQgcmV0Owo+ICAKPiAtCXJldCA9IGludGVsX2RpZ2l0YWxfY29ubmVjdG9y
X2F0b21pY19jaGVjayhjb25uZWN0b3IsIG5ld19jb25uX3N0YXRlKTsKPiArCXJldCA9IGludGVs
X2RpZ2l0YWxfY29ubmVjdG9yX2F0b21pY19jaGVjayhjb25uZWN0b3IsIHN0YXRlKTsKPiAgCWlm
IChyZXQpCj4gIAkJcmV0dXJuIHJldDsKPiAgCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2ludGVsX2Rydi5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfZHJ2LmgKPiBp
bmRleCBmOGM3YjI5MWZkYzMuLjg4NTcxYjhlOGQ2MiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF9kcnYuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2ludGVs
X2Rydi5oCj4gQEAgLTI0ODEsNyArMjQ4MSw3IEBAIGludCBpbnRlbF9kaWdpdGFsX2Nvbm5lY3Rv
cl9hdG9taWNfc2V0X3Byb3BlcnR5KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCj4g
IAkJCQkJCXN0cnVjdCBkcm1fcHJvcGVydHkgKnByb3BlcnR5LAo+ICAJCQkJCQl1NjQgdmFsKTsK
PiAgaW50IGludGVsX2RpZ2l0YWxfY29ubmVjdG9yX2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2Nv
bm5lY3RvciAqY29ubiwKPiAtCQkJCQkgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKm5ld19z
dGF0ZSk7Cj4gKwkJCQkJIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSk7Cj4gIHN0cnVj
dCBkcm1fY29ubmVjdG9yX3N0YXRlICoKPiAgaW50ZWxfZGlnaXRhbF9jb25uZWN0b3JfZHVwbGlj
YXRlX3N0YXRlKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpOwo+ICAKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfc2R2by5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvaW50ZWxfc2R2by5jCj4gaW5kZXggNjhmNDk3NDkzZDQzLi43MmVhMTY0Yjk3MWMgMTAw
NjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfc2R2by5jCj4gKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfc2R2by5jCj4gQEAgLTIzNDIsOSArMjM0MiwxMCBAQCBz
dGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfZnVuY3MgaW50ZWxfc2R2b19jb25uZWN0
b3JfZnVuY3MgPSB7Cj4gIH07Cj4gIAo+ICBzdGF0aWMgaW50IGludGVsX3Nkdm9fYXRvbWljX2No
ZWNrKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uLAo+IC0JCQkJICAgc3RydWN0IGRybV9jb25u
ZWN0b3Jfc3RhdGUgKm5ld19jb25uX3N0YXRlKQo+ICsJCQkJICAgc3RydWN0IGRybV9hdG9taWNf
c3RhdGUgKnN0YXRlKQo+ICB7Cj4gLQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUgPSBu
ZXdfY29ubl9zdGF0ZS0+c3RhdGU7Cj4gKwlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqbmV3
X2Nvbm5fc3RhdGUgPQo+ICsJCWRybV9hdG9taWNfZ2V0X25ld19jb25uZWN0b3Jfc3RhdGUoc3Rh
dGUsIGNvbm4pOwo+ICAJc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKm9sZF9jb25uX3N0YXRl
ID0KPiAgCQlkcm1fYXRvbWljX2dldF9vbGRfY29ubmVjdG9yX3N0YXRlKHN0YXRlLCBjb25uKTsK
PiAgCXN0cnVjdCBpbnRlbF9zZHZvX2Nvbm5lY3Rvcl9zdGF0ZSAqb2xkX3N0YXRlID0KPiBAQCAt
MjM1NiwxMyArMjM1NywxMyBAQCBzdGF0aWMgaW50IGludGVsX3Nkdm9fYXRvbWljX2NoZWNrKHN0
cnVjdCBkcm1fY29ubmVjdG9yICpjb25uLAo+ICAJICAgIChtZW1jbXAoJm9sZF9zdGF0ZS0+dHYs
ICZuZXdfc3RhdGUtPnR2LCBzaXplb2Yob2xkX3N0YXRlLT50dikpIHx8Cj4gIAkgICAgIG1lbWNt
cCgmb2xkX2Nvbm5fc3RhdGUtPnR2LCAmbmV3X2Nvbm5fc3RhdGUtPnR2LCBzaXplb2Yob2xkX2Nv
bm5fc3RhdGUtPnR2KSkpKSB7Cj4gIAkJc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRjX3N0YXRl
ID0KPiAtCQkJZHJtX2F0b21pY19nZXRfbmV3X2NydGNfc3RhdGUobmV3X2Nvbm5fc3RhdGUtPnN0
YXRlLAo+ICsJCQlkcm1fYXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShzdGF0ZSwKPiAgCQkJCQkJ
ICAgICAgbmV3X2Nvbm5fc3RhdGUtPmNydGMpOwo+ICAKPiAgCQljcnRjX3N0YXRlLT5jb25uZWN0
b3JzX2NoYW5nZWQgPSB0cnVlOwo+ICAJfQo+ICAKPiAtCXJldHVybiBpbnRlbF9kaWdpdGFsX2Nv
bm5lY3Rvcl9hdG9taWNfY2hlY2soY29ubiwgbmV3X2Nvbm5fc3RhdGUpOwo+ICsJcmV0dXJuIGlu
dGVsX2RpZ2l0YWxfY29ubmVjdG9yX2F0b21pY19jaGVjayhjb25uLCBzdGF0ZSk7Cj4gIH0KPiAg
Cj4gIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MgaW50ZWxf
c2R2b19jb25uZWN0b3JfaGVscGVyX2Z1bmNzID0gewo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9pbnRlbF90di5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvaW50ZWxfdHYuYwo+
IGluZGV4IDM5MjRjNDk0NGUxZi4uYTQxYzViNDY3YzE0IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2ludGVsX3R2LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pbnRl
bF90di5jCj4gQEAgLTE4MTcsMTYgKzE4MTcsMTggQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1f
Y29ubmVjdG9yX2Z1bmNzIGludGVsX3R2X2Nvbm5lY3Rvcl9mdW5jcyA9IHsKPiAgfTsKPiAgCj4g
IHN0YXRpYyBpbnQgaW50ZWxfdHZfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fY29ubmVjdG9yICpj
b25uZWN0b3IsCj4gLQkJCQkgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKm5ld19zdGF0ZSkK
PiArCQkJCSBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gIHsKPiArCXN0cnVjdCBk
cm1fY29ubmVjdG9yX3N0YXRlICpuZXdfc3RhdGU7Cj4gIAlzdHJ1Y3QgZHJtX2NydGNfc3RhdGUg
Km5ld19jcnRjX3N0YXRlOwo+ICAJc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKm9sZF9zdGF0
ZTsKPiAgCj4gKwluZXdfc3RhdGUgPSBkcm1fYXRvbWljX2dldF9uZXdfY29ubmVjdG9yX3N0YXRl
KHN0YXRlLCBjb25uZWN0b3IpOwo+ICAJaWYgKCFuZXdfc3RhdGUtPmNydGMpCj4gIAkJcmV0dXJu
IDA7Cj4gIAo+IC0Jb2xkX3N0YXRlID0gZHJtX2F0b21pY19nZXRfb2xkX2Nvbm5lY3Rvcl9zdGF0
ZShuZXdfc3RhdGUtPnN0YXRlLCBjb25uZWN0b3IpOwo+IC0JbmV3X2NydGNfc3RhdGUgPSBkcm1f
YXRvbWljX2dldF9uZXdfY3J0Y19zdGF0ZShuZXdfc3RhdGUtPnN0YXRlLCBuZXdfc3RhdGUtPmNy
dGMpOwo+ICsJb2xkX3N0YXRlID0gZHJtX2F0b21pY19nZXRfb2xkX2Nvbm5lY3Rvcl9zdGF0ZShz
dGF0ZSwgY29ubmVjdG9yKTsKPiArCW5ld19jcnRjX3N0YXRlID0gZHJtX2F0b21pY19nZXRfbmV3
X2NydGNfc3RhdGUoc3RhdGUsIG5ld19zdGF0ZS0+Y3J0Yyk7Cj4gIAo+ICAJaWYgKG9sZF9zdGF0
ZS0+dHYubW9kZSAhPSBuZXdfc3RhdGUtPnR2Lm1vZGUgfHwKPiAgCSAgICBvbGRfc3RhdGUtPnR2
Lm1hcmdpbnMubGVmdCAhPSBuZXdfc3RhdGUtPnR2Lm1hcmdpbnMubGVmdCB8fAo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9kaXNwbnY1MC9kaXNwLmMgYi9kcml2ZXJzL2dw
dS9kcm0vbm91dmVhdS9kaXNwbnY1MC9kaXNwLmMKPiBpbmRleCA0YjE2NTBmNTE5NTUuLjdiYTM3
M2Y0OTNiMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9kaXNwbnY1MC9k
aXNwLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9kaXNwbnY1MC9kaXNwLmMKPiBA
QCAtOTQ4LDExICs5NDgsMTIgQEAgbnY1MF9tc3RjX2dldF9tb2RlcyhzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubmVjdG9yKQo+ICAKPiAgc3RhdGljIGludAo+ICBudjUwX21zdGNfYXRvbWljX2No
ZWNrKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCj4gLQkJICAgICAgIHN0cnVjdCBk
cm1fY29ubmVjdG9yX3N0YXRlICpuZXdfY29ubl9zdGF0ZSkKPiArCQkgICAgICAgc3RydWN0IGRy
bV9hdG9taWNfc3RhdGUgKnN0YXRlKQo+ICB7Cj4gLQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAq
c3RhdGUgPSBuZXdfY29ubl9zdGF0ZS0+c3RhdGU7Cj4gIAlzdHJ1Y3QgbnY1MF9tc3RjICptc3Rj
ID0gbnY1MF9tc3RjKGNvbm5lY3Rvcik7Cj4gIAlzdHJ1Y3QgZHJtX2RwX21zdF90b3BvbG9neV9t
Z3IgKm1nciA9ICZtc3RjLT5tc3RtLT5tZ3I7Cj4gKwlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0
ZSAqbmV3X2Nvbm5fc3RhdGUgPQo+ICsJCWRybV9hdG9taWNfZ2V0X25ld19jb25uZWN0b3Jfc3Rh
dGUoc3RhdGUsIGNvbm5lY3Rvcik7Cj4gIAlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqb2xk
X2Nvbm5fc3RhdGUgPQo+ICAJCWRybV9hdG9taWNfZ2V0X29sZF9jb25uZWN0b3Jfc3RhdGUoc3Rh
dGUsIGNvbm5lY3Rvcik7Cj4gIAlzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKmNydGNfc3RhdGU7Cj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfbHZkcy5jIGIvZHJpdmVy
cy9ncHUvZHJtL3JjYXItZHUvcmNhcl9sdmRzLmMKPiBpbmRleCA2MjBiNTFhYWIyOTEuLjViODFi
YTJhN2YyNyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2x2ZHMu
Ywo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfbHZkcy5jCj4gQEAgLTkyLDEz
ICs5MiwxNSBAQCBzdGF0aWMgaW50IHJjYXJfbHZkc19jb25uZWN0b3JfZ2V0X21vZGVzKHN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCj4gIH0KPiAgCj4gIHN0YXRpYyBpbnQgcmNhcl9s
dmRzX2Nvbm5lY3Rvcl9hdG9taWNfY2hlY2soc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3Rv
ciwKPiAtCQkJCQkgICAgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKnN0YXRlKQo+ICsJCQkJ
CSAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gIHsKPiAgCXN0cnVjdCByY2Fy
X2x2ZHMgKmx2ZHMgPSBjb25uZWN0b3JfdG9fcmNhcl9sdmRzKGNvbm5lY3Rvcik7Cj4gIAljb25z
dCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqcGFuZWxfbW9kZTsKPiArCXN0cnVjdCBkcm1fY29u
bmVjdG9yX3N0YXRlICpjb25uX3N0YXRlOwo+ICAJc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlOwo+ICAKPiAtCWlmICghc3RhdGUtPmNydGMpCj4gKwljb25uX3N0YXRlID0gZHJtX2F0
b21pY19nZXRfbmV3X2Nvbm5lY3Rvcl9zdGF0ZShzdGF0ZSwgY29ubmVjdG9yKTsKPiArCWlmICgh
Y29ubl9zdGF0ZS0+Y3J0YykKPiAgCQlyZXR1cm4gMDsKPiAgCj4gIAlpZiAobGlzdF9lbXB0eSgm
Y29ubmVjdG9yLT5tb2RlcykpIHsKPiBAQCAtMTEwLDkgKzExMiw5IEBAIHN0YXRpYyBpbnQgcmNh
cl9sdmRzX2Nvbm5lY3Rvcl9hdG9taWNfY2hlY2soc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5l
Y3RvciwKPiAgCQkJCSAgICAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlLCBoZWFkKTsKPiAgCj4g
IAkvKiBXZSdyZSBub3QgYWxsb3dlZCB0byBtb2RpZnkgdGhlIHJlc29sdXRpb24uICovCj4gLQlj
cnRjX3N0YXRlID0gZHJtX2F0b21pY19nZXRfY3J0Y19zdGF0ZShzdGF0ZS0+c3RhdGUsIHN0YXRl
LT5jcnRjKTsKPiAtCWlmIChJU19FUlIoY3J0Y19zdGF0ZSkpCj4gLQkJcmV0dXJuIFBUUl9FUlIo
Y3J0Y19zdGF0ZSk7Cj4gKwljcnRjX3N0YXRlID0gZHJtX2F0b21pY19nZXRfY3J0Y19zdGF0ZShz
dGF0ZSwgY29ubl9zdGF0ZS0+Y3J0Yyk7Cj4gKwlpZiAoIWNydGNfc3RhdGUpCj4gKwkJcmV0dXJu
IC1FSU5WQUw7Cj4gIAo+ICAJaWYgKGNydGNfc3RhdGUtPm1vZGUuaGRpc3BsYXkgIT0gcGFuZWxf
bW9kZS0+aGRpc3BsYXkgfHwKPiAgCSAgICBjcnRjX3N0YXRlLT5tb2RlLnZkaXNwbGF5ICE9IHBh
bmVsX21vZGUtPnZkaXNwbGF5KQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmM0L3Zj
NF90eHAuYyBiL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X3R4cC5jCj4gaW5kZXggYzhiODlhNzhm
OWY0Li45NmY5MWMxYjRiNmUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRf
dHhwLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF90eHAuYwo+IEBAIC0yMjEsMTcg
KzIyMSwxOCBAQCBzdGF0aWMgY29uc3QgdTMyIHR4cF9mbXRzW10gPSB7Cj4gIH07Cj4gIAo+ICBz
dGF0aWMgaW50IHZjNF90eHBfY29ubmVjdG9yX2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubiwKPiAtCQkJCQlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0
ZSkKPiArCQkJCQkgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSkKPiAgewo+ICsJc3Ry
dWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGU7Cj4gIAlzdHJ1Y3QgZHJtX2NydGNf
c3RhdGUgKmNydGNfc3RhdGU7Cj4gIAlzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYjsKPiAgCWlu
dCBpOwo+ICAKPiArCWNvbm5fc3RhdGUgPSBkcm1fYXRvbWljX2dldF9uZXdfY29ubmVjdG9yX3N0
YXRlKHN0YXRlLCBjb25uKTsKPiAgCWlmICghY29ubl9zdGF0ZS0+d3JpdGViYWNrX2pvYiB8fCAh
Y29ubl9zdGF0ZS0+d3JpdGViYWNrX2pvYi0+ZmIpCj4gIAkJcmV0dXJuIDA7Cj4gIAo+IC0JY3J0
Y19zdGF0ZSA9IGRybV9hdG9taWNfZ2V0X25ld19jcnRjX3N0YXRlKGNvbm5fc3RhdGUtPnN0YXRl
LAo+IC0JCQkJCQkgICBjb25uX3N0YXRlLT5jcnRjKTsKPiArCWNydGNfc3RhdGUgPSBkcm1fYXRv
bWljX2dldF9uZXdfY3J0Y19zdGF0ZShzdGF0ZSwgY29ubl9zdGF0ZS0+Y3J0Yyk7Cj4gIAo+ICAJ
ZmIgPSBjb25uX3N0YXRlLT53cml0ZWJhY2tfam9iLT5mYjsKPiAgCWlmIChmYi0+d2lkdGggIT0g
Y3J0Y19zdGF0ZS0+bW9kZS5oZGlzcGxheSB8fAo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9k
cm1fbW9kZXNldF9oZWxwZXJfdnRhYmxlcy5oIGIvaW5jbHVkZS9kcm0vZHJtX21vZGVzZXRfaGVs
cGVyX3Z0YWJsZXMuaAo+IGluZGV4IGRlNTdmYjQwY2I2ZS4uYWRjOGI3Y2Y2NGI1IDEwMDY0NAo+
IC0tLSBhL2luY2x1ZGUvZHJtL2RybV9tb2Rlc2V0X2hlbHBlcl92dGFibGVzLmgKPiArKysgYi9p
bmNsdWRlL2RybS9kcm1fbW9kZXNldF9oZWxwZXJfdnRhYmxlcy5oCj4gQEAgLTEwMjAsNyArMTAy
MCw3IEBAIHN0cnVjdCBkcm1fY29ubmVjdG9yX2hlbHBlcl9mdW5jcyB7Cj4gIAkgKiBkZWFkbG9j
ay4KPiAgCSAqLwo+ICAJaW50ICgqYXRvbWljX2NoZWNrKShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAq
Y29ubmVjdG9yLAo+IC0JCQkgICAgc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKnN0YXRlKTsK
PiArCQkJICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSk7Cj4gIAo+ICAJLyoqCj4g
IAkgKiBAYXRvbWljX2NvbW1pdDoKPiAtLSAKPiBTZWFuIFBhdWwsIFNvZnR3YXJlIEVuZ2luZWVy
LCBHb29nbGUgLyBDaHJvbWl1bSBPUwo+IAoKLS0gCkRhbmllbCBWZXR0ZXIKU29mdHdhcmUgRW5n
aW5lZXIsIEludGVsIENvcnBvcmF0aW9uCmh0dHA6Ly9ibG9nLmZmd2xsLmNoCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
