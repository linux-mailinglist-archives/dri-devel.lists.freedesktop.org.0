Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C645D7A7F3
	for <lists+dri-devel@lfdr.de>; Tue, 30 Jul 2019 14:16:02 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CCCB389BD4;
	Tue, 30 Jul 2019 12:15:59 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x444.google.com (mail-wr1-x444.google.com
 [IPv6:2a00:1450:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6AEA689BCD
 for <dri-devel@lists.freedesktop.org>; Tue, 30 Jul 2019 12:15:58 +0000 (UTC)
Received: by mail-wr1-x444.google.com with SMTP id n9so40443243wrr.4
 for <dri-devel@lists.freedesktop.org>; Tue, 30 Jul 2019 05:15:58 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=K6xrCpMU4JO5tVAsw3gwIdw9Mgb2l+3m2FwDKVA99Gc=;
 b=au1kgII2WoitUPaAbx9WEDDpZu5b+Ba3vMYaYOdpPJy72B8cZl4PRX7vtUcEXLRK7n
 S8ihV3W9nea5rYDEc8ZpVP3T0Z1yG8m1VwcUDR0SWtmRU0NfVqLTz1Dy8mgQXIUcNu4I
 JgkCCQ/azx2Q3YFAP5EyFgLmaFmwKYR8edEaxu9qNkXJIiUd0NKTK5NWi5Jihp/KdbQx
 nmdLSa8pdu33THRB0fqfoaXixPX3yyJ/UU61EA7H+Pdm1sQjDWmmrSkgSUSOECnseqpQ
 fOCJ1LveTdi0WV5R5k92ujA1AYmANwD5AjahR3l9rt8Hc0mh4C2plt0j+0a4SoQPzG2Y
 2ncA==
X-Gm-Message-State: APjAAAXnNrbt9NmH6TNs1fJ1z1QhyOLDAzLMwc5J9JSnN3mAz6Eiuufg
 wOPnktUgzYY2YkN8bm/8tqOzr3CU
X-Google-Smtp-Source: APXvYqzsX+6niAWLJN5p2J6Xhof5BlniPbBjGG/TIYMDGqefZ0ZDGX2mx21VHD6DLbHYqKqYMuwDfg==
X-Received: by 2002:a5d:4ec1:: with SMTP id s1mr119454305wrv.19.1564488957110; 
 Tue, 30 Jul 2019 05:15:57 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:30e2:d562:3041:c580])
 by smtp.gmail.com with ESMTPSA id u1sm60416390wml.14.2019.07.30.05.15.56
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Tue, 30 Jul 2019 05:15:56 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: lionel.g.landwerlin@intel.com, david1.zhou@amd.com,
 dri-devel@lists.freedesktop.org
Subject: [PATCH 2/2] dma-buf: add dma_fence_chain_(alloc|free)
Date: Tue, 30 Jul 2019 14:15:54 +0200
Message-Id: <20190730121554.105600-2-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190730121554.105600-1-christian.koenig@amd.com>
References: <20190730121554.105600-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=K6xrCpMU4JO5tVAsw3gwIdw9Mgb2l+3m2FwDKVA99Gc=;
 b=AqdK4WzTlh3oapo+Yx2Li742UZrx71hdLSIupji0G62HfylOxD6wpFygcfSpGjoLdf
 JOh+LrF1eWfNcQmVy0XG5RJf8mzb2+vpeF/dkJwZA84b8a/1UNVjssxkEGSJRL3ZalQH
 CnOfwa6jnuKCxTUNmy2uSOPHeAdfwwtPlhPmn38RPp/gvhwWbpUpDfrMdlN5Ujhxxn/+
 ZteGWU4olpOmnz7Uoowvnvz8JSZ7iG0x5FZ+VxfgILHcsHNoCE5mya66fe/b0urkEuuH
 VSr+dMM/+h6WGabmIVcWbO/2EordwF+iL/TeO6H6wsdTb+uMYCKekWMe5jCur/po980z
 mFRw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V3JhcCBrbWFsbG9jL2tmcmVlIHRvIGFsbG93IHN3aXRjaGluZyB0byBhIHNsYWIgYWxsb2NhdG9y
IGxhdGVyIG9uLgoKU2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtv
ZW5pZ0BhbWQuY29tPgotLS0KIGRyaXZlcnMvZG1hLWJ1Zi9kbWEtZmVuY2UtY2hhaW4uYyAgICAg
IHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5jIHwgIDYgKysr
LS0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX3N5bmNvYmouYyAgICAgICAgICB8ICAyICstCiBpbmNs
dWRlL2xpbnV4L2RtYS1mZW5jZS1jaGFpbi5oICAgICAgICB8IDI0ICsrKysrKysrKysrKysrKysr
KysrKysrKwogNCBmaWxlcyBjaGFuZ2VkLCAyOSBpbnNlcnRpb25zKCspLCA1IGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtZmVuY2UtY2hhaW4uYyBiL2RyaXZl
cnMvZG1hLWJ1Zi9kbWEtZmVuY2UtY2hhaW4uYwppbmRleCA2YzNhNjE1NzMxYjQuLjU2MTgzZGM5
Zjc4NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9kbWEtYnVmL2RtYS1mZW5jZS1jaGFpbi5jCisrKyBi
L2RyaXZlcnMvZG1hLWJ1Zi9kbWEtZmVuY2UtY2hhaW4uYwpAQCAtMTg2LDcgKzE4Niw3IEBAIHN0
YXRpYyB2b2lkIGRtYV9mZW5jZV9jaGFpbl9yZWxlYXNlKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNl
KQogCiAJZG1hX2ZlbmNlX3B1dChyY3VfZGVyZWZlcmVuY2VfcHJvdGVjdGVkKGNoYWluLT5wcmV2
LCB0cnVlKSk7CiAJZG1hX2ZlbmNlX3B1dChjaGFpbi0+ZmVuY2UpOwotCWRtYV9mZW5jZV9mcmVl
KGZlbmNlKTsKKwlkbWFfZmVuY2VfY2hhaW5fZnJlZShjaGFpbik7CiB9CiAKIGNvbnN0IHN0cnVj
dCBkbWFfZmVuY2Vfb3BzIGRtYV9mZW5jZV9jaGFpbl9vcHMgPSB7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9jcy5jCmluZGV4IGRlZjAyOWFiNTY1Ny4uNGIxZTRiMzIxOTk5IDEwMDY0
NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3MuYwpAQCAtNzU4LDcgKzc1OCw3IEBAIHN0
YXRpYyB2b2lkIGFtZGdwdV9jc19wYXJzZXJfZmluaShzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAq
cGFyc2VyLCBpbnQgZXJyb3IsCiAKIAlmb3IgKGkgPSAwOyBpIDwgcGFyc2VyLT5udW1fcG9zdF9k
ZXBzOyBpKyspIHsKIAkJZHJtX3N5bmNvYmpfcHV0KHBhcnNlci0+cG9zdF9kZXBzW2ldLnN5bmNv
YmopOwotCQlrZnJlZShwYXJzZXItPnBvc3RfZGVwc1tpXS5jaGFpbik7CisJCWRtYV9mZW5jZV9j
aGFpbl9mcmVlKHBhcnNlci0+cG9zdF9kZXBzW2ldLmNoYWluKTsKIAl9CiAJa2ZyZWUocGFyc2Vy
LT5wb3N0X2RlcHMpOwogCkBAIC0xMTg3LDcgKzExODcsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV9j
c19wcm9jZXNzX3N5bmNvYmpfdGltZWxpbmVfb3V0X2RlcChzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNl
ciAqcAogCiAJCWRlcC0+Y2hhaW4gPSBOVUxMOwogCQlpZiAoc3luY29ial9kZXBzW2ldLnBvaW50
KSB7Ci0JCQlkZXAtPmNoYWluID0ga21hbGxvYyhzaXplb2YoKmRlcC0+Y2hhaW4pLCBHRlBfS0VS
TkVMKTsKKwkJCWRlcC0+Y2hhaW4gPSBkbWFfZmVuY2VfY2hhaW5fYWxsb2MoKTsKIAkJCWlmICgh
ZGVwLT5jaGFpbikKIAkJCQlyZXR1cm4gLUVOT01FTTsKIAkJfQpAQCAtMTE5NSw3ICsxMTk1LDcg
QEAgc3RhdGljIGludCBhbWRncHVfY3NfcHJvY2Vzc19zeW5jb2JqX3RpbWVsaW5lX291dF9kZXAo
c3RydWN0IGFtZGdwdV9jc19wYXJzZXIgKnAKIAkJZGVwLT5zeW5jb2JqID0gZHJtX3N5bmNvYmpf
ZmluZChwLT5maWxwLAogCQkJCQkJc3luY29ial9kZXBzW2ldLmhhbmRsZSk7CiAJCWlmICghZGVw
LT5zeW5jb2JqKSB7Ci0JCQlrZnJlZShkZXAtPmNoYWluKTsKKwkJCWRtYV9mZW5jZV9jaGFpbl9m
cmVlKGRlcC0+Y2hhaW4pOwogCQkJcmV0dXJuIC1FSU5WQUw7CiAJCX0KIAkJZGVwLT5wb2ludCA9
IHN5bmNvYmpfZGVwc1tpXS5wb2ludDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1f
c3luY29iai5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9zeW5jb2JqLmMKaW5kZXggY2VjZmYyZTQ0
N2IxLi5mYzczZjM5OGU3MzggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fc3luY29i
ai5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fc3luY29iai5jCkBAIC02OTYsNyArNjk2LDcg
QEAgc3RhdGljIGludCBkcm1fc3luY29ial90cmFuc2Zlcl90b190aW1lbGluZShzdHJ1Y3QgZHJt
X2ZpbGUgKmZpbGVfcHJpdmF0ZSwKIAkJCQkgICAgICZmZW5jZSk7CiAJaWYgKHJldCkKIAkJZ290
byBlcnI7Ci0JY2hhaW4gPSBremFsbG9jKHNpemVvZihzdHJ1Y3QgZG1hX2ZlbmNlX2NoYWluKSwg
R0ZQX0tFUk5FTCk7CisJY2hhaW4gPSBkbWFfZmVuY2VfY2hhaW5fYWxsb2MoKTsKIAlpZiAoIWNo
YWluKSB7CiAJCXJldCA9IC1FTk9NRU07CiAJCWdvdG8gZXJyMTsKZGlmZiAtLWdpdCBhL2luY2x1
ZGUvbGludXgvZG1hLWZlbmNlLWNoYWluLmggYi9pbmNsdWRlL2xpbnV4L2RtYS1mZW5jZS1jaGFp
bi5oCmluZGV4IDc0NjZkN2I4ODM3ZS4uYjg0ZTI4NjYxZDQ4IDEwMDY0NAotLS0gYS9pbmNsdWRl
L2xpbnV4L2RtYS1mZW5jZS1jaGFpbi5oCisrKyBiL2luY2x1ZGUvbGludXgvZG1hLWZlbmNlLWNo
YWluLmgKQEAgLTE4LDYgKzE4LDcgQEAKICNpZm5kZWYgX19MSU5VWF9ETUFfRkVOQ0VfQ0hBSU5f
SAogI2RlZmluZSBfX0xJTlVYX0RNQV9GRU5DRV9DSEFJTl9ICiAKKyNpbmNsdWRlIDxsaW51eC9z
bGFiLmg+CiAjaW5jbHVkZSA8bGludXgvZG1hLWZlbmNlLmg+CiAjaW5jbHVkZSA8bGludXgvaXJx
X3dvcmsuaD4KIApAQCAtNDMsNiArNDQsMjkgQEAgc3RydWN0IGRtYV9mZW5jZV9jaGFpbiB7CiAK
IGV4dGVybiBjb25zdCBzdHJ1Y3QgZG1hX2ZlbmNlX29wcyBkbWFfZmVuY2VfY2hhaW5fb3BzOwog
CisvKioKKyAqIGRtYV9mZW5jZV9jaGFpbl9hbGxvYyAtIHdyYXBwZXIgdG8gYWxsb2NhdGUgYSBk
bWFfZmVuY2VfY2hhaW4KKyAqCisgKiBXcmFwIHRoZSBrbWFsbG9jIGZvciBub3cgdG8gZWFzaWVy
IHN3aXRjaCB0byBhIHNsdWIgYWxsb2NhdG9yLgorICoKKyAqIFJldHVybnMgYW4gYWxsb2NhdGVk
IGRtYV9mZW5jZV9jaGFpbiBvciBOVUxMLgorICovCitzdGF0aWMgaW5saW5lIHN0cnVjdCBkbWFf
ZmVuY2VfY2hhaW4gKmRtYV9mZW5jZV9jaGFpbl9hbGxvYyh2b2lkKQoreworCXJldHVybiBrbWFs
bG9jKHNpemVvZihzdHJ1Y3QgZG1hX2ZlbmNlX2NoYWluKSwgR0ZQX0tFUk5FTCk7Cit9CisKKy8q
KgorICogZG1hX2ZlbmNlX2NoYWluX2ZyZWUgLSB3cmFwcGVyIHRvIGZyZWUgYSBkbWFfZmVuY2Vf
Y2hhaW4KKyAqIEBjaGFpbjogdGhlIGNoYWluIHdlIG5lZWQgdG8gZnJlZS4KKyAqCisgKiBXcmFw
IHRoZSBkbWFfZmVuY2VfZnJlZSBmb3Igbm93IHRvIGVhc2llciBzd2l0Y2ggdG8gYSBzbHViIGFs
bG9jYXRvci4KKyAqLworc3RhdGljIGlubGluZSB2b2lkIGRtYV9mZW5jZV9jaGFpbl9mcmVlKHN0
cnVjdCBkbWFfZmVuY2VfY2hhaW4gKmNoYWluKQoreworCWRtYV9mZW5jZV9mcmVlKCZjaGFpbi0+
YmFzZSk7Cit9CisKIC8qKgogICogdG9fZG1hX2ZlbmNlX2NoYWluIC0gY2FzdCBhIGZlbmNlIHRv
IGEgZG1hX2ZlbmNlX2NoYWluCiAgKiBAZmVuY2U6IGZlbmNlIHRvIGNhc3QgdG8gYSBkbWFfZmVu
Y2VfYXJyYXkKLS0gCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
ZHJpLWRldmVs
