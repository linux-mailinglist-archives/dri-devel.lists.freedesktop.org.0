Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 8736D6160E
	for <lists+dri-devel@lfdr.de>; Sun,  7 Jul 2019 20:40:26 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2A6BA89C13;
	Sun,  7 Jul 2019 18:40:24 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3691A89C13
 for <dri-devel@lists.freedesktop.org>; Sun,  7 Jul 2019 18:40:23 +0000 (UTC)
Received: from pendragon.nordic-sky.finnair.com (unknown [38.98.37.142])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 123AA334;
 Sun,  7 Jul 2019 20:40:05 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 56/60] drm/omap: sdi: Register a drm_bridge
Date: Sun,  7 Jul 2019 21:19:33 +0300
Message-Id: <20190707181937.6250-53-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190707181937.6250-1-laurent.pinchart@ideasonboard.com>
References: <20190707180852.5512-1-laurent.pinchart@ideasonboard.com>
 <20190707181937.6250-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1562524822;
 bh=dzB94GBMaDGhTs5rHEyR7BM/At42WGtSJYv1GjEH+kI=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=kHt4zP31k42AMgmy5O2miPpCCvRByX0roJDlTIW8/rLAuS3EnUcEiQR0HwQmMTzv3
 oUZE8JkkCVAuVVdXm4WU7L3LnQC13hcei9hgjs4TRnpecO9tGzJyQnT+yXlOS3tEqu
 +l0aWZtafydD/uCIJT9dq6ATGlEK07AKRIvVYvdQ=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sean Paul <sean@poorly.run>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW4gb3JkZXIgdG8gaW50ZWdyYXRlIHdpdGggYSBjaGFpbiBvZiBkcm1fYnJpZGdlLCB0aGUgaW50
ZXJuYWwgU0RJCm91dHB1dCBoYXMgdG8gZXhwb3NlIGl0cyBvcGVyYXRpb25zIHRocm91Z2ggdGhl
IGRybV9icmlkZ2UgQVBJLgpSZWdpc3RlciBhIGJyaWRnZSBhdCBpbml0aWFsaXNhdGlvbiB0aW1l
IHRvIGRvIHNvIGFuZCByZW1vdmUgdGhlCm9tYXBfZHNzX2RldmljZSBvcGVyYXRpb25zIHRoYXQg
YXJlIG5vdyB1bnVzZWQuCgpTaWduZWQtb2ZmLWJ5OiBMYXVyZW50IFBpbmNoYXJ0IDxsYXVyZW50
LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0v
ZHNzL3NkaS5jIHwgMTc3ICsrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLQogMSBmaWxlIGNo
YW5nZWQsIDExMiBpbnNlcnRpb25zKCspLCA2NSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3Mvc2RpLmMgYi9kcml2ZXJzL2dwdS9kcm0vb21hcGRy
bS9kc3Mvc2RpLmMKaW5kZXggOTJjMmNkMmMwODg5Li4xNTRkMjQ3YjY3MmQgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9zZGkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
b21hcGRybS9kc3Mvc2RpLmMKQEAgLTI2LDYgKzI2LDggQEAKICNpbmNsdWRlIDxsaW51eC9yZWd1
bGF0b3IvY29uc3VtZXIuaD4KICNpbmNsdWRlIDxsaW51eC9zdHJpbmcuaD4KIAorI2luY2x1ZGUg
PGRybS9kcm1fYnJpZGdlLmg+CisKICNpbmNsdWRlICJkc3MuaCIKICNpbmNsdWRlICJvbWFwZHNz
LmgiCiAKQEAgLTQxLDkgKzQzLDExIEBAIHN0cnVjdCBzZGlfZGV2aWNlIHsKIAlpbnQgZGF0YXBh
aXJzOwogCiAJc3RydWN0IG9tYXBfZHNzX2RldmljZSBvdXRwdXQ7CisJc3RydWN0IGRybV9icmlk
Z2UgYnJpZGdlOwogfTsKIAotI2RlZmluZSBkc3NkZXZfdG9fc2RpKGRzc2RldikgY29udGFpbmVy
X29mKGRzc2Rldiwgc3RydWN0IHNkaV9kZXZpY2UsIG91dHB1dCkKKyNkZWZpbmUgZHJtX2JyaWRn
ZV90b19zZGkoYnJpZGdlKSBcCisJY29udGFpbmVyX29mKGJyaWRnZSwgc3RydWN0IHNkaV9kZXZp
Y2UsIGJyaWRnZSkKIAogc3RydWN0IHNkaV9jbGtfY2FsY19jdHggewogCXN0cnVjdCBzZGlfZGV2
aWNlICpzZGk7CkBAIC0xMjksOSArMTMzLDgxIEBAIHN0YXRpYyB2b2lkIHNkaV9jb25maWdfbGNk
X21hbmFnZXIoc3RydWN0IHNkaV9kZXZpY2UgKnNkaSkKIAlkc3NfbWdyX3NldF9sY2RfY29uZmln
KCZzZGktPm91dHB1dCwgJnNkaS0+bWdyX2NvbmZpZyk7CiB9CiAKLXN0YXRpYyB2b2lkIHNkaV9k
aXNwbGF5X2VuYWJsZShzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYpCisvKiAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQorICogRFJNIEJyaWRnZSBPcGVyYXRpb25zCisgKi8KKworc3RhdGljIGlu
dCBzZGlfYnJpZGdlX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLCBib29sIGNyZWF0
ZV9jb25uZWN0b3IpCiB7Ci0Jc3RydWN0IHNkaV9kZXZpY2UgKnNkaSA9IGRzc2Rldl90b19zZGko
ZHNzZGV2KTsKKwlzdHJ1Y3Qgc2RpX2RldmljZSAqc2RpID0gZHJtX2JyaWRnZV90b19zZGkoYnJp
ZGdlKTsKKworCWlmIChjcmVhdGVfY29ubmVjdG9yKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCXJl
dHVybiBkcm1fYnJpZGdlX2F0dGFjaChicmlkZ2UtPmVuY29kZXIsIHNkaS0+b3V0cHV0Lm5leHRf
YnJpZGdlLAorCQkJCSBicmlkZ2UsIGZhbHNlKTsKK30KKworc3RhdGljIGVudW0gZHJtX21vZGVf
c3RhdHVzCitzZGlfYnJpZGdlX21vZGVfdmFsaWQoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwK
KwkJICAgICAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCit7CisJc3RydWN0
IHNkaV9kZXZpY2UgKnNkaSA9IGRybV9icmlkZ2VfdG9fc2RpKGJyaWRnZSk7CisJdW5zaWduZWQg
bG9uZyBwaXhlbGNsb2NrID0gbW9kZS0+Y2xvY2sgKiAxMDAwOworCXN0cnVjdCBkaXNwY19jbG9j
a19pbmZvIGRpc3BjX2NpbmZvOworCXVuc2lnbmVkIGxvbmcgZmNrOworCWludCByZXQ7CisKKwlp
ZiAocGl4ZWxjbG9jayA9PSAwKQorCQlyZXR1cm4gTU9ERV9OT0NMT0NLOworCisJcmV0ID0gc2Rp
X2NhbGNfY2xvY2tfZGl2KHNkaSwgcGl4ZWxjbG9jaywgJmZjaywgJmRpc3BjX2NpbmZvKTsKKwlp
ZiAocmV0IDwgMCkKKwkJcmV0dXJuIE1PREVfQ0xPQ0tfUkFOR0U7CisKKwlyZXR1cm4gTU9ERV9P
SzsKK30KKworc3RhdGljIGJvb2wgc2RpX2JyaWRnZV9tb2RlX2ZpeHVwKHN0cnVjdCBkcm1fYnJp
ZGdlICpicmlkZ2UsCisJCQkJICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSwK
KwkJCQkgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9tb2RlKQoreworCXN0cnVj
dCBzZGlfZGV2aWNlICpzZGkgPSBkcm1fYnJpZGdlX3RvX3NkaShicmlkZ2UpOworCXVuc2lnbmVk
IGxvbmcgcGl4ZWxjbG9jayA9IG1vZGUtPmNsb2NrICogMTAwMDsKKwlzdHJ1Y3QgZGlzcGNfY2xv
Y2tfaW5mbyBkaXNwY19jaW5mbzsKKwl1bnNpZ25lZCBsb25nIGZjazsKKwl1bnNpZ25lZCBsb25n
IHBjazsKKwlpbnQgcmV0OworCisJcmV0ID0gc2RpX2NhbGNfY2xvY2tfZGl2KHNkaSwgcGl4ZWxj
bG9jaywgJmZjaywgJmRpc3BjX2NpbmZvKTsKKwlpZiAocmV0IDwgMCkKKwkJcmV0dXJuIGZhbHNl
OworCisJcGNrID0gZmNrIC8gZGlzcGNfY2luZm8ubGNrX2RpdiAvIGRpc3BjX2NpbmZvLnBja19k
aXY7CisKKwlpZiAocGNrICE9IHBpeGVsY2xvY2spCisJCWRldl9kYmcoJnNkaS0+cGRldi0+ZGV2
LAorCQkJInBpeGVsIGNsb2NrIGFkanVzdGVkIGZyb20gJWx1IEh6IHRvICVsdSBIelxuIiwKKwkJ
CXBpeGVsY2xvY2ssIHBjayk7CisKKwlhZGp1c3RlZF9tb2RlLT5jbG9jayA9IHBjayAvIDEwMDA7
CisKKwlyZXR1cm4gdHJ1ZTsKK30KKworc3RhdGljIHZvaWQgc2RpX2JyaWRnZV9tb2RlX3NldChz
dHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9t
b2RlICptb2RlLAorCQkJCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICphZGp1c3RlZF9t
b2RlKQoreworCXN0cnVjdCBzZGlfZGV2aWNlICpzZGkgPSBkcm1fYnJpZGdlX3RvX3NkaShicmlk
Z2UpOworCisJc2RpLT5waXhlbGNsb2NrID0gYWRqdXN0ZWRfbW9kZS0+Y2xvY2sgKiAxMDAwOwor
fQorCitzdGF0aWMgdm9pZCBzZGlfYnJpZGdlX2VuYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJp
ZGdlLAorCQkJICAgICAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQoreworCXN0cnVj
dCBzZGlfZGV2aWNlICpzZGkgPSBkcm1fYnJpZGdlX3RvX3NkaShicmlkZ2UpOwogCXN0cnVjdCBk
aXNwY19jbG9ja19pbmZvIGRpc3BjX2NpbmZvOwogCXVuc2lnbmVkIGxvbmcgZmNrOwogCWludCBy
OwpAQCAtMTkyLDkgKzI2OCwxMCBAQCBzdGF0aWMgdm9pZCBzZGlfZGlzcGxheV9lbmFibGUoc3Ry
dWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2KQogCXJlZ3VsYXRvcl9kaXNhYmxlKHNkaS0+dmRk
c19zZGlfcmVnKTsKIH0KIAotc3RhdGljIHZvaWQgc2RpX2Rpc3BsYXlfZGlzYWJsZShzdHJ1Y3Qg
b21hcF9kc3NfZGV2aWNlICpkc3NkZXYpCitzdGF0aWMgdm9pZCBzZGlfYnJpZGdlX2Rpc2FibGUo
c3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCSAgICAgICBzdHJ1Y3QgZHJtX2F0b21pY19z
dGF0ZSAqc3RhdGUpCiB7Ci0Jc3RydWN0IHNkaV9kZXZpY2UgKnNkaSA9IGRzc2Rldl90b19zZGko
ZHNzZGV2KTsKKwlzdHJ1Y3Qgc2RpX2RldmljZSAqc2RpID0gZHJtX2JyaWRnZV90b19zZGkoYnJp
ZGdlKTsKIAogCWRzc19tZ3JfZGlzYWJsZSgmc2RpLT5vdXRwdXQpOwogCkBAIC0yMDUsNzEgKzI4
Miw0MCBAQCBzdGF0aWMgdm9pZCBzZGlfZGlzcGxheV9kaXNhYmxlKHN0cnVjdCBvbWFwX2Rzc19k
ZXZpY2UgKmRzc2RldikKIAlyZWd1bGF0b3JfZGlzYWJsZShzZGktPnZkZHNfc2RpX3JlZyk7CiB9
CiAKLXN0YXRpYyB2b2lkIHNkaV9zZXRfdGltaW5ncyhzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpk
c3NkZXYsCi0JCQkgICAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCi17Ci0J
c3RydWN0IHNkaV9kZXZpY2UgKnNkaSA9IGRzc2Rldl90b19zZGkoZHNzZGV2KTsKLQotCXNkaS0+
cGl4ZWxjbG9jayA9IG1vZGUtPmNsb2NrICogMTAwMDsKLX0KLQotc3RhdGljIGludCBzZGlfY2hl
Y2tfdGltaW5ncyhzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsCi0JCQkgICAgIHN0cnVj
dCBkcm1fZGlzcGxheV9tb2RlICptb2RlKQotewotCXN0cnVjdCBzZGlfZGV2aWNlICpzZGkgPSBk
c3NkZXZfdG9fc2RpKGRzc2Rldik7Ci0Jc3RydWN0IGRpc3BjX2Nsb2NrX2luZm8gZGlzcGNfY2lu
Zm87Ci0JdW5zaWduZWQgbG9uZyBwaXhlbGNsb2NrID0gbW9kZS0+Y2xvY2sgKiAxMDAwOwotCXVu
c2lnbmVkIGxvbmcgZmNrOwotCXVuc2lnbmVkIGxvbmcgcGNrOwotCWludCByOwotCi0JaWYgKHBp
eGVsY2xvY2sgPT0gMCkKLQkJcmV0dXJuIC1FSU5WQUw7Ci0KLQlyID0gc2RpX2NhbGNfY2xvY2tf
ZGl2KHNkaSwgcGl4ZWxjbG9jaywgJmZjaywgJmRpc3BjX2NpbmZvKTsKLQlpZiAocikKLQkJcmV0
dXJuIHI7Ci0KLQlwY2sgPSBmY2sgLyBkaXNwY19jaW5mby5sY2tfZGl2IC8gZGlzcGNfY2luZm8u
cGNrX2RpdjsKLQotCWlmIChwY2sgIT0gcGl4ZWxjbG9jaykgewotCQlEU1NXQVJOKCJQaXhlbCBj
bG9jayBhZGp1c3RlZCBmcm9tICVsdSBIeiB0byAlbHUgSHpcbiIsCi0JCQlwaXhlbGNsb2NrLCBw
Y2spOwotCi0JCW1vZGUtPmNsb2NrID0gcGNrIC8gMTAwMDsKLQl9Ci0KLQlyZXR1cm4gMDsKLX0K
LQotc3RhdGljIGludCBzZGlfY29ubmVjdChzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpzcmMsCi0J
CSAgICAgICBzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3QpCi17Ci0JcmV0dXJuIG9tYXBkc3Nf
ZGV2aWNlX2Nvbm5lY3QoZHN0LT5kc3MsIGRzdCwgZHN0LT5uZXh0KTsKLX0KLQotc3RhdGljIHZv
aWQgc2RpX2Rpc2Nvbm5lY3Qoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqc3JjLAotCQkJICAgc3Ry
dWN0IG9tYXBfZHNzX2RldmljZSAqZHN0KQotewotCW9tYXBkc3NfZGV2aWNlX2Rpc2Nvbm5lY3Qo
ZHN0LCBkc3QtPm5leHQpOwotfQotCi1zdGF0aWMgY29uc3Qgc3RydWN0IG9tYXBfZHNzX2Rldmlj
ZV9vcHMgc2RpX29wcyA9IHsKLQkuY29ubmVjdCA9IHNkaV9jb25uZWN0LAotCS5kaXNjb25uZWN0
ID0gc2RpX2Rpc2Nvbm5lY3QsCi0KLQkuZW5hYmxlID0gc2RpX2Rpc3BsYXlfZW5hYmxlLAotCS5k
aXNhYmxlID0gc2RpX2Rpc3BsYXlfZGlzYWJsZSwKLQotCS5jaGVja190aW1pbmdzID0gc2RpX2No
ZWNrX3RpbWluZ3MsCi0JLnNldF90aW1pbmdzID0gc2RpX3NldF90aW1pbmdzLAorc3RhdGljIGNv
bnN0IHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIHNkaV9icmlkZ2VfZnVuY3MgPSB7CisJLmF0dGFj
aCA9IHNkaV9icmlkZ2VfYXR0YWNoLAorCS5tb2RlX3ZhbGlkID0gc2RpX2JyaWRnZV9tb2RlX3Zh
bGlkLAorCS5tb2RlX2ZpeHVwID0gc2RpX2JyaWRnZV9tb2RlX2ZpeHVwLAorCS5tb2RlX3NldCA9
IHNkaV9icmlkZ2VfbW9kZV9zZXQsCisJLmF0b21pY19lbmFibGUgPSBzZGlfYnJpZGdlX2VuYWJs
ZSwKKwkuYXRvbWljX2Rpc2FibGUgPSBzZGlfYnJpZGdlX2Rpc2FibGUsCiB9OwogCitzdGF0aWMg
dm9pZCBzZGlfYnJpZGdlX2luaXQoc3RydWN0IHNkaV9kZXZpY2UgKnNkaSkKK3sKKwlzZGktPmJy
aWRnZS5mdW5jcyA9ICZzZGlfYnJpZGdlX2Z1bmNzOworCXNkaS0+YnJpZGdlLm9mX25vZGUgPSBz
ZGktPnBkZXYtPmRldi5vZl9ub2RlOworCXNkaS0+YnJpZGdlLnR5cGUgPSBEUk1fTU9ERV9DT05O
RUNUT1JfTFZEUzsKKworCWRybV9icmlkZ2VfYWRkKCZzZGktPmJyaWRnZSk7Cit9CisKK3N0YXRp
YyB2b2lkIHNkaV9icmlkZ2VfY2xlYW51cChzdHJ1Y3Qgc2RpX2RldmljZSAqc2RpKQoreworCWRy
bV9icmlkZ2VfcmVtb3ZlKCZzZGktPmJyaWRnZSk7Cit9CisKKy8qIC0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCisgKiBJbml0aWFsaXNhdGlvbiBhbmQgQ2xlYW51cAorICovCisKIHN0YXRpYyBpbnQgc2Rp
X2luaXRfb3V0cHV0KHN0cnVjdCBzZGlfZGV2aWNlICpzZGkpCiB7CiAJc3RydWN0IG9tYXBfZHNz
X2RldmljZSAqb3V0ID0gJnNkaS0+b3V0cHV0OwogCWludCByOwogCisJc2RpX2JyaWRnZV9pbml0
KHNkaSk7CisKIAlvdXQtPmRldiA9ICZzZGktPnBkZXYtPmRldjsKIAlvdXQtPmlkID0gT01BUF9E
U1NfT1VUUFVUX1NESTsKIAlvdXQtPnR5cGUgPSBPTUFQX0RJU1BMQVlfVFlQRV9TREk7CkBAIC0y
NzcsMTIgKzMyMywxMSBAQCBzdGF0aWMgaW50IHNkaV9pbml0X291dHB1dChzdHJ1Y3Qgc2RpX2Rl
dmljZSAqc2RpKQogCW91dC0+ZGlzcGNfY2hhbm5lbCA9IE9NQVBfRFNTX0NIQU5ORUxfTENEOwog
CS8qIFdlIGhhdmUgU0RJIG9ubHkgb24gT01BUDMsIHdoZXJlIGl0J3Mgb24gcG9ydCAxICovCiAJ
b3V0LT5vZl9wb3J0ID0gMTsKLQlvdXQtPm9wcyA9ICZzZGlfb3BzOwogCW91dC0+b3duZXIgPSBU
SElTX01PRFVMRTsKIAlvdXQtPmJ1c19mbGFncyA9IERSTV9CVVNfRkxBR19QSVhEQVRBX0RSSVZF
X1BPU0VER0UJLyogMTUuNS45LjEuMiAqLwogCQkgICAgICAgfCBEUk1fQlVTX0ZMQUdfU1lOQ19E
UklWRV9QT1NFREdFOwogCi0JciA9IG9tYXBkc3NfZGV2aWNlX2luaXRfb3V0cHV0KG91dCwgTlVM
TCk7CisJciA9IG9tYXBkc3NfZGV2aWNlX2luaXRfb3V0cHV0KG91dCwgJnNkaS0+YnJpZGdlKTsK
IAlpZiAociA8IDApCiAJCXJldHVybiByOwogCkBAIC0yOTUsNiArMzQwLDggQEAgc3RhdGljIHZv
aWQgc2RpX3VuaW5pdF9vdXRwdXQoc3RydWN0IHNkaV9kZXZpY2UgKnNkaSkKIHsKIAlvbWFwZHNz
X2RldmljZV91bnJlZ2lzdGVyKCZzZGktPm91dHB1dCk7CiAJb21hcGRzc19kZXZpY2VfY2xlYW51
cF9vdXRwdXQoJnNkaS0+b3V0cHV0KTsKKworCXNkaV9icmlkZ2VfY2xlYW51cChzZGkpOwogfQog
CiBpbnQgc2RpX2luaXRfcG9ydChzdHJ1Y3QgZHNzX2RldmljZSAqZHNzLCBzdHJ1Y3QgcGxhdGZv
cm1fZGV2aWNlICpwZGV2LAotLSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hhcnQKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
