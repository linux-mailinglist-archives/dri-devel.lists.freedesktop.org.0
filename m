Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7390C4B2C7
	for <lists+dri-devel@lfdr.de>; Wed, 19 Jun 2019 09:11:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 62B656E2CE;
	Wed, 19 Jun 2019 07:11:23 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mo6-p02-ob.smtp.rzone.de (mo6-p02-ob.smtp.rzone.de
 [IPv6:2a01:238:20a:202:5302::1])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E7C7D6E176
 for <dri-devel@lists.freedesktop.org>; Tue, 18 Jun 2019 13:46:43 +0000 (UTC)
X-RZG-AUTH: ":OWANVUa4dPFUgKR/3dpvnYP0Np73amq+g13rqGzmt2bYDnKIKaws6YXTsc4="
X-RZG-CLASS-ID: mo00
Received: from oxapp03-03.back.ox.d0m.de by smtp-ox.front (RZmta 44.24 AUTH)
 with ESMTPSA id h0a328v5IDkb1KS
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-SHA384 (curve X9_62_prime256v1
 with 256 ECDH bits, eq. 3072 bits RSA))
 (Client did not present a certificate);
 Tue, 18 Jun 2019 15:46:37 +0200 (CEST)
Date: Tue, 18 Jun 2019 15:46:36 +0200 (CEST)
From: Ulrich Hecht <uli@fpond.eu>
To: Laurent Pinchart <laurent.pinchart+renesas@ideasonboard.com>,
 dri-devel@lists.freedesktop.org
Message-ID: <569142314.793429.1560865596980@webmail.strato.com>
In-Reply-To: <20190617210930.6054-10-laurent.pinchart+renesas@ideasonboard.com>
References: <20190617210930.6054-1-laurent.pinchart+renesas@ideasonboard.com>
 <20190617210930.6054-10-laurent.pinchart+renesas@ideasonboard.com>
Subject: Re: [PATCH v3 09/10] drm: rcar-du: Perform group setup from the
 atomic tail handler
MIME-Version: 1.0
X-Priority: 3
Importance: Medium
X-Mailer: Open-Xchange Mailer v7.8.4-Rev58
X-Originating-IP: 85.212.220.45
X-Originating-Client: open-xchange-appsuite
X-Mailman-Approved-At: Wed, 19 Jun 2019 07:10:14 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 t=1560865602; 
 s=strato-dkim-0002; d=fpond.eu;
 h=Subject:References:In-Reply-To:Message-ID:Cc:To:From:Date:
 X-RZG-CLASS-ID:X-RZG-AUTH:From:Subject:Sender;
 bh=4tUXS2hzWddP53oNV2TZBF0g+07gbNSVsNy9DxrkDAk=;
 b=Juy8DlfV/nMZB7aCWuV5pUNIwxskpcK8O1pdDvz9U7ztMtGpPYEYUDB4R/z8Y+ZQsf
 U9J0Vp3Azsn0ikyINSrdJJaBr5Z/fSnRqOKq9283prkYY3SdqOtfTtth3QGwZCVg6V58
 oVxspEELZuieFQXEae42jmjSU+Pb8GKtzVNhk7RmFOFVWgcj5LNWiIYeT0CwQM6pQTlS
 2b5S1qjNZvUscPwk7JXicpQ1aeWJWku6RSISmRMFqEPkScH879qVZybNRi3lbZIVOg3s
 s1dGYIFu4zkyWJS0lJnE3S6472DyxcjED2HlsQOayinPNYyumXzgidyy8mTDX6h0GmZP
 Q0mw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-renesas-soc@vger.kernel.org,
 Kieran Bingham <kieran.bingham@ideasonboard.com>, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Cj4gT24gSnVuZSAxNywgMjAxOSBhdCAxMTowOSBQTSBMYXVyZW50IFBpbmNoYXJ0IDxsYXVyZW50
LnBpbmNoYXJ0K3JlbmVzYXNAaWRlYXNvbmJvYXJkLmNvbT4gd3JvdGU6Cj4gCj4gCj4gRnJvbTog
S2llcmFuIEJpbmdoYW0gPGtpZXJhbi5iaW5naGFtK3JlbmVzYXNAaWRlYXNvbmJvYXJkLmNvbT4K
PiAKPiBDcmVhdGUgcmNhcl9kdV9ncm91cF9hdG9taWNfY2hlY2soKSBhbmQgcmNhcl9kdV9ncm91
cF9hdG9taWNfc2V0dXAoKQo+IGZ1bmN0aW9ucyB0byB0cmFjayBhbmQgYXBwbHkgZ3JvdXAgc3Rh
dGUgdGhyb3VnaCB0aGUgRFJNIGF0b21pYyBzdGF0ZS4KPiBUaGUgdXNlX2NvdW50IGZpZWxkIGlz
IG1vdmVkIGZyb20gdGhlIHJjYXJfZHVfZ3JvdXAgc3RydWN0dXJlIHRvIGFuCj4gZW5hYmxlZCBm
aWVsZCBpbiB0aGUgcmNhcl9kdV9ncm91cF9zdGF0ZSBzdHJ1Y3R1cmUuCj4gCj4gVGhpcyBhbGxv
d3Mgc2VwYXJhdGluZyBncm91cCBzZXR1cCBmcm9tIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBD
UlRDcwo+IHRoYXQgYXJlIHBhcnQgb2YgdGhlIGdyb3VwLCBzaW1wbGlmeWluZyB0aGUgQ1JUQyBj
b2RlIGFuZCBpbXByb3ZpbmcKPiBvdmVyYWxsIHJlYWRhYmlsaXR5LiBUaGUgZXhpc3RpbmcgcmNh
cl9kdV9ncm91cF97Z2V0LHB1dH0oKSBmdW5jdGlvbnMKPiBhcmUgbm93IHJlZHVuZGFudCBhbmQg
cmVtb3ZlZC4KPiAKPiBUaGUgZ3JvdXBzIHNoYXJlIGNsb2NraW5nIHdpdGggdGhlIENSVENzIHdp
dGhpbiB0aGUgZ3JvdXAsIGFuZCBzbyBhcmUKPiBhY2Nlc3NpYmxlIG9ubHkgd2hlbiBvbmUgb2Yg
aXRzIENSVENzIGhhcyBiZWVuIHBvd2VyZWQgdGhyb3VnaAo+IHJjYXJfZHVfY3J0Y19hdG9taWNf
ZXhpdF9zdGFuZGJ5KCkuCj4gCj4gU2lnbmVkLW9mZi1ieTogS2llcmFuIEJpbmdoYW0gPGtpZXJh
bi5iaW5naGFtK3JlbmVzYXNAaWRlYXNvbmJvYXJkLmNvbT4KPiBTaWduZWQtb2ZmLWJ5OiBMYXVy
ZW50IFBpbmNoYXJ0IDxsYXVyZW50LnBpbmNoYXJ0K3JlbmVzYXNAaWRlYXNvbmJvYXJkLmNvbT4K
PiAtLS0KPiBDaGFuZ2VzIHNpbmNlIHYyOgo+IAo+IC0gU2ltcGxpZnkgZXJyb3IgaGFuZGxpbmcg
aW4gcmNhcl9kdV9jcnRjX2VuYWJsZSgpCj4gLSBSZW5hbWUgcmNhcl9kdV9ncm91cF9hdG9taWNf
cHJlX2NvbW1pdCgpIHRvCj4gICByY2FyX2R1X2dyb3VwX2F0b21pY19zZXR1cCgpIGFuZCB0dXJu
IGl0IGludG8gYSB2b2lkIGZ1bmN0aW9uCj4gLSBSZW1vdmUgcmNhcl9kdV9ncm91cF9hdG9taWNf
cG9zdF9jb21taXQoKQo+IC0gUmVwbGFjZSBncm91cCBzdGF0ZSB1c2VfY291bnQgZmllbGQgYnkg
ZW5hYmxlZAo+IC0gUmVuYW1lIGdyb3VwIHN0YXRlIHZhcmlhYmxlIGZyb20gcnN0YXRlIHRvIGdz
dGF0ZQo+IAo+IENoYW5nZXMgc2luY2UgdjE6Cj4gCj4gLSBBbGwgcmVnaXN0ZXIgc2VxdWVuY2Vz
IG5vdyBtYWludGFpbmVkLgo+IC0gQ2xvY2sgbWFuYWdlbWVudCBpcyBubyBsb25nZXIgaGFuZGxl
ZCBieSB0aGUgZ3JvdXAKPiAgIChfY3J0Y197ZXhpdCxlbnRlcn1fc3RhbmRieSBoYW5kbGVzIHRo
aXMgZm9yIHVzKQo+IC0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2NydGMu
YyAgfCAxOCArKy0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2dyb3VwLmMg
fCA5MSArKysrKysrKysrKysrKysrLS0tLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9yY2FyLWR1
L3JjYXJfZHVfZ3JvdXAuaCB8IDEyICsrLS0KPiAgZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNh
cl9kdV9rbXMuYyAgIHwgIDUgKysKPiAgNCBmaWxlcyBjaGFuZ2VkLCA3NiBpbnNlcnRpb25zKCsp
LCA1MCBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXIt
ZHUvcmNhcl9kdV9jcnRjLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2NydGMu
Ywo+IGluZGV4IGQxMWE0NzRmNmY3Mi4uYWI1YzI4OGY5ZDA5IDEwMDY0NAo+IC0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfZHVfY3J0Yy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L3JjYXItZHUvcmNhcl9kdV9jcnRjLmMKPiBAQCAtNDg3LDEyICs0ODcsMTAgQEAgc3RhdGljIGlu
dCByY2FyX2R1X2NydGNfZXhpdF9zdGFuZGJ5KHN0cnVjdCByY2FyX2R1X2NydGMgKnJjcnRjKQo+
ICAJCXJldHVybiByZXQ7Cj4gIAo+ICAJcmV0ID0gY2xrX3ByZXBhcmVfZW5hYmxlKHJjcnRjLT5l
eHRjbG9jayk7Cj4gLQlpZiAocmV0IDwgMCkKPiAtCQlnb3RvIGVycm9yX2Nsb2NrOwo+IC0KPiAt
CXJldCA9IHJjYXJfZHVfZ3JvdXBfZ2V0KHJjcnRjLT5ncm91cCk7Cj4gLQlpZiAocmV0IDwgMCkK
PiAtCQlnb3RvIGVycm9yX2dyb3VwOwo+ICsJaWYgKHJldCA8IDApIHsKPiArCQljbGtfZGlzYWJs
ZV91bnByZXBhcmUocmNydGMtPmNsb2NrKTsKPiArCQlyZXR1cm4gcmV0Owo+ICsJfQo+ICAKPiAg
CS8qIFNldCBkaXNwbGF5IG9mZiBhbmQgYmFja2dyb3VuZCB0byBibGFjay4gKi8KPiAgCXJjYXJf
ZHVfY3J0Y193cml0ZShyY3J0YywgRE9PUiwgRE9PUl9SR0IoMCwgMCwgMCkpOwo+IEBAIC01MDIs
MTggKzUwMCwxMCBAQCBzdGF0aWMgaW50IHJjYXJfZHVfY3J0Y19leGl0X3N0YW5kYnkoc3RydWN0
IHJjYXJfZHVfY3J0YyAqcmNydGMpCj4gIAlyY2FyX2R1X2dyb3VwX3dyaXRlKHJjcnRjLT5ncm91
cCwgcmNydGMtPmluZGV4ICUgMiA/IERTMlBSIDogRFMxUFIsIDApOwo+ICAKPiAgCXJldHVybiAw
Owo+IC0KPiAtZXJyb3JfZ3JvdXA6Cj4gLQljbGtfZGlzYWJsZV91bnByZXBhcmUocmNydGMtPmV4
dGNsb2NrKTsKPiAtZXJyb3JfY2xvY2s6Cj4gLQljbGtfZGlzYWJsZV91bnByZXBhcmUocmNydGMt
PmNsb2NrKTsKPiAtCXJldHVybiByZXQ7Cj4gIH0KPiAgCj4gIHN0YXRpYyB2b2lkIHJjYXJfZHVf
Y3J0Y19lbnRlcl9zdGFuZGJ5KHN0cnVjdCByY2FyX2R1X2NydGMgKnJjcnRjKQo+ICB7Cj4gLQly
Y2FyX2R1X2dyb3VwX3B1dChyY3J0Yy0+Z3JvdXApOwo+IC0KPiAgCWNsa19kaXNhYmxlX3VucHJl
cGFyZShyY3J0Yy0+ZXh0Y2xvY2spOwo+ICAJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKHJjcnRjLT5j
bG9jayk7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9k
dV9ncm91cC5jIGIvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9ncm91cC5jCj4gaW5k
ZXggOGUxMmJkNDI4OTBlLi43YzkxNDU3Nzg1NjcgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL3JjYXItZHUvcmNhcl9kdV9ncm91cC5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3JjYXIt
ZHUvcmNhcl9kdV9ncm91cC5jCj4gQEAgLTI0LDYgKzI0LDcgQEAKPiAgICovCj4gIAo+ICAjaW5j
bHVkZSA8bGludXgvY2xrLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9lcnIuaD4KPiAgI2luY2x1ZGUg
PGxpbnV4L2lvLmg+Cj4gICNpbmNsdWRlIDxsaW51eC9zbGFiLmg+Cj4gIAo+IEBAIC0xNzMsMzgg
KzE3NCw2IEBAIHN0YXRpYyB2b2lkIHJjYXJfZHVfZ3JvdXBfc2V0dXAoc3RydWN0IHJjYXJfZHVf
Z3JvdXAgKnJncnApCj4gIAltdXRleF91bmxvY2soJnJncnAtPmxvY2spOwo+ICB9Cj4gIAo+IC0v
Kgo+IC0gKiByY2FyX2R1X2dyb3VwX2dldCAtIEFjcXVpcmUgYSByZWZlcmVuY2UgdG8gdGhlIERV
IGNoYW5uZWxzIGdyb3VwCj4gLSAqCj4gLSAqIEFjcXVpcmluZyB0aGUgZmlyc3QgcmVmZXJlbmNl
IHNldHVwcyBjb3JlIHJlZ2lzdGVycy4gQSByZWZlcmVuY2UgbXVzdCBiZSBoZWxkCj4gLSAqIGJl
Zm9yZSBhY2Nlc3NpbmcgYW55IGhhcmR3YXJlIHJlZ2lzdGVycy4KPiAtICoKPiAtICogVGhpcyBm
dW5jdGlvbiBtdXN0IGJlIGNhbGxlZCB3aXRoIHRoZSBEUk0gbW9kZV9jb25maWcgbG9jayBoZWxk
Lgo+IC0gKgo+IC0gKiBSZXR1cm4gMCBpbiBjYXNlIG9mIHN1Y2Nlc3Mgb3IgYSBuZWdhdGl2ZSBl
cnJvciBjb2RlIG90aGVyd2lzZS4KPiAtICovCj4gLWludCByY2FyX2R1X2dyb3VwX2dldChzdHJ1
Y3QgcmNhcl9kdV9ncm91cCAqcmdycCkKPiAtewo+IC0JaWYgKHJncnAtPnVzZV9jb3VudCkKPiAt
CQlnb3RvIGRvbmU7Cj4gLQo+IC0JcmNhcl9kdV9ncm91cF9zZXR1cChyZ3JwKTsKPiAtCj4gLWRv
bmU6Cj4gLQlyZ3JwLT51c2VfY291bnQrKzsKPiAtCXJldHVybiAwOwo+IC19Cj4gLQo+IC0vKgo+
IC0gKiByY2FyX2R1X2dyb3VwX3B1dCAtIFJlbGVhc2UgYSByZWZlcmVuY2UgdG8gdGhlIERVCj4g
LSAqCj4gLSAqIFRoaXMgZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgd2l0aCB0aGUgRFJNIG1vZGVf
Y29uZmlnIGxvY2sgaGVsZC4KPiAtICovCj4gLXZvaWQgcmNhcl9kdV9ncm91cF9wdXQoc3RydWN0
IHJjYXJfZHVfZ3JvdXAgKnJncnApCj4gLXsKPiAtCS0tcmdycC0+dXNlX2NvdW50Owo+IC19Cj4g
LQo+ICBzdGF0aWMgdm9pZCBfX3JjYXJfZHVfZ3JvdXBfc3RhcnRfc3RvcChzdHJ1Y3QgcmNhcl9k
dV9ncm91cCAqcmdycCwgYm9vbCBzdGFydCkKPiAgewo+ICAJc3RydWN0IHJjYXJfZHVfZGV2aWNl
ICpyY2R1ID0gcmdycC0+ZGV2Owo+IEBAIC0zODksNiArMzU4LDIzIEBAIHN0YXRpYyBjb25zdCBz
dHJ1Y3QgZHJtX3ByaXZhdGVfc3RhdGVfZnVuY3MgcmNhcl9kdV9ncm91cF9zdGF0ZV9mdW5jcyA9
IHsKPiAgCS5hdG9taWNfZGVzdHJveV9zdGF0ZSA9IHJjYXJfZHVfZ3JvdXBfYXRvbWljX2Rlc3Ry
b3lfc3RhdGUsCj4gIH07Cj4gIAo+ICsjZGVmaW5lIGZvcl9lYWNoX29sZG5ld19ncm91cF9pbl9z
dGF0ZShfX3N0YXRlLCBfX29iaiwgX19vbGRfc3RhdGUsIF9fbmV3X3N0YXRlLCBfX2kpIFwKPiAr
CWZvcl9lYWNoX29sZG5ld19wcml2YXRlX29ial9pbl9zdGF0ZSgoX19zdGF0ZSksIChfX29iaiks
IChfX29sZF9zdGF0ZSksIChfX25ld19zdGF0ZSksIChfX2kpKSBcCj4gKwkJZm9yX2VhY2hfaWYo
KF9fb2JqKS0+ZnVuY3MgPT0gJnJjYXJfZHVfZ3JvdXBfc3RhdGVfZnVuY3MpCj4gKwo+ICtzdGF0
aWMgc3RydWN0IHJjYXJfZHVfZ3JvdXBfc3RhdGUgKgo+ICtyY2FyX2R1X2dldF9ncm91cF9zdGF0
ZShzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUsCj4gKwkJCXN0cnVjdCByY2FyX2R1X2dy
b3VwICpyZ3JwKQo+ICt7Cj4gKwlzdHJ1Y3QgZHJtX3ByaXZhdGVfc3RhdGUgKnBzdGF0ZTsKPiAr
Cj4gKwlwc3RhdGUgPSBkcm1fYXRvbWljX2dldF9wcml2YXRlX29ial9zdGF0ZShzdGF0ZSwgJnJn
cnAtPnByaXZhdGUpOwo+ICsJaWYgKElTX0VSUihwc3RhdGUpKQo+ICsJCXJldHVybiBFUlJfQ0FT
VChwc3RhdGUpOwo+ICsKPiArCXJldHVybiB0b19yY2FyX2dyb3VwX3N0YXRlKHBzdGF0ZSk7Cj4g
K30KPiArCj4gIC8qKgo+ICAgKiByY2FyX2R1X2dldF9vbGRfZ3JvdXBfc3RhdGUgLSBnZXQgb2xk
IGdyb3VwIHN0YXRlLCBpZiBpdCBleGlzdHMKPiAgICogQHN0YXRlOiBnbG9iYWwgYXRvbWljIHN0
YXRlIG9iamVjdAo+IEBAIC00NDEsNiArNDI3LDQ3IEBAIHJjYXJfZHVfZ2V0X25ld19ncm91cF9z
dGF0ZShzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUsCj4gIAlyZXR1cm4gTlVMTDsKPiAg
fQo+ICAKPiAraW50IHJjYXJfZHVfZ3JvdXBfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYsCj4gKwkJCSAgICAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gK3sK
PiArCXN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZTsKPiArCXN0cnVjdCBkcm1fY3J0
YyAqY3J0YzsKPiArCXVuc2lnbmVkIGludCBpOwo+ICsKPiArCWZvcl9lYWNoX25ld19jcnRjX2lu
X3N0YXRlKHN0YXRlLCBjcnRjLCBjcnRjX3N0YXRlLCBpKSB7Cj4gKwkJc3RydWN0IHJjYXJfZHVf
Y3J0YyAqcmNydGMgPSB0b19yY2FyX2NydGMoY3J0Yyk7Cj4gKwkJc3RydWN0IHJjYXJfZHVfZ3Jv
dXBfc3RhdGUgKmdzdGF0ZTsKPiArCj4gKwkJZ3N0YXRlID0gcmNhcl9kdV9nZXRfZ3JvdXBfc3Rh
dGUoc3RhdGUsIHJjcnRjLT5ncm91cCk7Cj4gKwkJaWYgKElTX0VSUihnc3RhdGUpKQo+ICsJCQly
ZXR1cm4gUFRSX0VSUihnc3RhdGUpOwo+ICsKPiArCQlpZiAoY3J0Y19zdGF0ZS0+YWN0aXZlKQo+
ICsJCQlnc3RhdGUtPmVuYWJsZWQgPSB0cnVlOwo+ICsJfQo+ICsKPiArCXJldHVybiAwOwo+ICt9
Cj4gKwo+ICt2b2lkIHJjYXJfZHVfZ3JvdXBfYXRvbWljX3NldHVwKHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYsCj4gKwkJCQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCj4gK3sKPiArCXN0
cnVjdCBkcm1fcHJpdmF0ZV9zdGF0ZSAqb2xkX3BzdGF0ZSwgKm5ld19wc3RhdGU7Cj4gKwlzdHJ1
Y3QgZHJtX3ByaXZhdGVfb2JqICpvYmo7Cj4gKwl1bnNpZ25lZCBpbnQgaTsKPiArCj4gKwlmb3Jf
ZWFjaF9vbGRuZXdfZ3JvdXBfaW5fc3RhdGUoc3RhdGUsIG9iaiwgb2xkX3BzdGF0ZSwgbmV3X3Bz
dGF0ZSwgaSkgewo+ICsJCXN0cnVjdCByY2FyX2R1X2dyb3VwICpyZ3JwID0gdG9fcmNhcl9ncm91
cChvYmopOwo+ICsJCXN0cnVjdCByY2FyX2R1X2dyb3VwX3N0YXRlICpvbGRfc3RhdGUsICpuZXdf
c3RhdGU7Cj4gKwo+ICsJCW9sZF9zdGF0ZSA9IHRvX3JjYXJfZ3JvdXBfc3RhdGUob2xkX3BzdGF0
ZSk7Cj4gKwkJbmV3X3N0YXRlID0gdG9fcmNhcl9ncm91cF9zdGF0ZShuZXdfcHN0YXRlKTsKPiAr
Cj4gKwkJaWYgKCFvbGRfc3RhdGUtPmVuYWJsZWQgJiYgbmV3X3N0YXRlLT5lbmFibGVkKQo+ICsJ
CQlyY2FyX2R1X2dyb3VwX3NldHVwKHJncnApOwo+ICsJfQo+ICt9Cj4gKwo+ICAvKiAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQo+ICAgKiBJbml0IGFuZCBDbGVhbnVwCj4gICAqLwo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2dyb3VwLmggYi9kcml2ZXJzL2dwdS9k
cm0vcmNhci1kdS9yY2FyX2R1X2dyb3VwLmgKPiBpbmRleCBmOTk2MWY4OWZkOTcuLjIwZWZkMjI1
MWVjNCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2dyb3Vw
LmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2dyb3VwLmgKPiBAQCAt
MjYsNyArMjYsNiBAQCBzdHJ1Y3QgcmNhcl9kdV9kZXZpY2U7Cj4gICAqIEBpbmRleDogZ3JvdXAg
aW5kZXgKPiAgICogQGNoYW5uZWxzX21hc2s6IGJpdG1hc2sgb2YgcG9wdWxhdGVkIERVIGNoYW5u
ZWxzIGluIHRoaXMgZ3JvdXAKPiAgICogQG51bV9jcnRjczogbnVtYmVyIG9mIENSVENzIGluIHRo
aXMgZ3JvdXAgKDEgb3IgMikKPiAtICogQHVzZV9jb3VudDogbnVtYmVyIG9mIHVzZXJzIG9mIHRo
ZSBncm91cCAocmNhcl9kdV9ncm91cF8oZ2V0fHB1dCkpCj4gICAqIEB1c2VkX2NydGNzOiBudW1i
ZXIgb2YgQ1JUQ3MgY3VycmVudGx5IGluIHVzZQo+ICAgKiBAbG9jazogcHJvdGVjdHMgdGhlIGRw
dHNyX3BsYW5lcyBmaWVsZCBhbmQgdGhlIERQVFNSIHJlZ2lzdGVyCj4gICAqIEBkcHRzcl9wbGFu
ZXM6IGJpdG1hc2sgb2YgcGxhbmVzIGRyaXZlbiBieSBkb3QtY2xvY2sgYW5kIHRpbWluZyBnZW5l
cmF0b3IgMQo+IEBAIC00Myw3ICs0Miw2IEBAIHN0cnVjdCByY2FyX2R1X2dyb3VwIHsKPiAgCj4g
IAl1bnNpZ25lZCBpbnQgY2hhbm5lbHNfbWFzazsKPiAgCXVuc2lnbmVkIGludCBudW1fY3J0Y3M7
Cj4gLQl1bnNpZ25lZCBpbnQgdXNlX2NvdW50Owo+ICAJdW5zaWduZWQgaW50IHVzZWRfY3J0Y3M7
Cj4gIAo+ICAJc3RydWN0IG11dGV4IGxvY2s7Cj4gQEAgLTU5LDkgKzU3LDEyIEBAIHN0cnVjdCBy
Y2FyX2R1X2dyb3VwIHsKPiAgLyoqCj4gICAqIHN0cnVjdCByY2FyX2R1X2dyb3VwX3N0YXRlIC0g
RHJpdmVyLXNwZWNpZmljIGdyb3VwIHN0YXRlCj4gICAqIEBzdGF0ZTogYmFzZSBEUk0gcHJpdmF0
ZSBzdGF0ZQo+ICsgKiBAZW5hYmxlZDogdHJ1ZSBpZiBhdCBsZWFzdCBvbmUgQ1JUQyBpbiB0aGUg
Z3JvdXAgaXMgZW5hYmxlZAo+ICAgKi8KPiAgc3RydWN0IHJjYXJfZHVfZ3JvdXBfc3RhdGUgewo+
ICAJc3RydWN0IGRybV9wcml2YXRlX3N0YXRlIHN0YXRlOwo+ICsKPiArCWJvb2wgZW5hYmxlZDsK
PiAgfTsKPiAgCj4gICNkZWZpbmUgdG9fcmNhcl9ncm91cF9zdGF0ZShzKSBcCj4gQEAgLTcwLDgg
KzcxLDYgQEAgc3RydWN0IHJjYXJfZHVfZ3JvdXBfc3RhdGUgewo+ICB1MzIgcmNhcl9kdV9ncm91
cF9yZWFkKHN0cnVjdCByY2FyX2R1X2dyb3VwICpyZ3JwLCB1MzIgcmVnKTsKPiAgdm9pZCByY2Fy
X2R1X2dyb3VwX3dyaXRlKHN0cnVjdCByY2FyX2R1X2dyb3VwICpyZ3JwLCB1MzIgcmVnLCB1MzIg
ZGF0YSk7Cj4gIAo+IC1pbnQgcmNhcl9kdV9ncm91cF9nZXQoc3RydWN0IHJjYXJfZHVfZ3JvdXAg
KnJncnApOwo+IC12b2lkIHJjYXJfZHVfZ3JvdXBfcHV0KHN0cnVjdCByY2FyX2R1X2dyb3VwICpy
Z3JwKTsKPiAgdm9pZCByY2FyX2R1X2dyb3VwX3N0YXJ0X3N0b3Aoc3RydWN0IHJjYXJfZHVfZ3Jv
dXAgKnJncnAsIGJvb2wgc3RhcnQpOwo+ICB2b2lkIHJjYXJfZHVfZ3JvdXBfcmVzdGFydChzdHJ1
Y3QgcmNhcl9kdV9ncm91cCAqcmdycCk7Cj4gIGludCByY2FyX2R1X2dyb3VwX3NldF9yb3V0aW5n
KHN0cnVjdCByY2FyX2R1X2dyb3VwICpyZ3JwKTsKPiBAQCAtODUsNiArODQsMTEgQEAgc3RydWN0
IHJjYXJfZHVfZ3JvdXBfc3RhdGUgKgo+ICByY2FyX2R1X2dldF9uZXdfZ3JvdXBfc3RhdGUoc3Ry
dWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlLAo+ICAJCQkgICAgc3RydWN0IHJjYXJfZHVfZ3Jv
dXAgKnJncnApOwo+ICAKPiAraW50IHJjYXJfZHVfZ3JvdXBfYXRvbWljX2NoZWNrKHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsCj4gKwkJCSAgICAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3Rh
dGUpOwo+ICt2b2lkIHJjYXJfZHVfZ3JvdXBfYXRvbWljX3NldHVwKHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYsCj4gKwkJCQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpOwo+ICsKPiAgaW50
IHJjYXJfZHVfZ3JvdXBfaW5pdChzdHJ1Y3QgcmNhcl9kdV9kZXZpY2UgKnJjZHUsIHN0cnVjdCBy
Y2FyX2R1X2dyb3VwICpyZ3JwLAo+ICAJCSAgICAgICB1bnNpZ25lZCBpbnQgaW5kZXgpOwo+ICB2
b2lkIHJjYXJfZHVfZ3JvdXBfY2xlYW51cChzdHJ1Y3QgcmNhcl9kdV9ncm91cCAqcmdycCk7Cj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfZHVfa21zLmMgYi9kcml2
ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2ttcy5jCj4gaW5kZXggZjU3YTAzNWE5NGVlLi42
NTM5NjEzNGZiYTEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9k
dV9rbXMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfZHVfa21zLmMKPiBA
QCAtMzc3LDYgKzM3NywxMCBAQCBzdGF0aWMgaW50IHJjYXJfZHVfYXRvbWljX2NoZWNrKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsCj4gIAlpZiAocmV0KQo+ICAJCXJldHVybiByZXQ7Cj4gIAo+ICsJ
cmV0ID0gcmNhcl9kdV9ncm91cF9hdG9taWNfY2hlY2soZGV2LCBzdGF0ZSk7Cj4gKwlpZiAocmV0
KQo+ICsJCXJldHVybiByZXQ7Cj4gKwo+ICAJaWYgKHJjYXJfZHVfaGFzKHJjZHUsIFJDQVJfRFVf
RkVBVFVSRV9WU1AxX1NPVVJDRSkpCj4gIAkJcmV0dXJuIDA7Cj4gIAo+IEBAIC00MTEsNiArNDE1
LDcgQEAgc3RhdGljIHZvaWQgcmNhcl9kdV9hdG9taWNfY29tbWl0X3RhaWwoc3RydWN0IGRybV9h
dG9taWNfc3RhdGUgKm9sZF9zdGF0ZSkKPiAgCj4gIAkvKiBBcHBseSB0aGUgYXRvbWljIHVwZGF0
ZS4gKi8KPiAgCXJjYXJfZHVfY3J0Y19hdG9taWNfZXhpdF9zdGFuZGJ5KGRldiwgb2xkX3N0YXRl
KTsKPiArCXJjYXJfZHVfZ3JvdXBfYXRvbWljX3NldHVwKGRldiwgb2xkX3N0YXRlKTsKPiAgCj4g
IAlkcm1fYXRvbWljX2hlbHBlcl9jb21taXRfbW9kZXNldF9kaXNhYmxlcyhkZXYsIG9sZF9zdGF0
ZSk7Cj4gIAlyY2FyX2R1X2NydGNfYXRvbWljX21vZGVzZXQoZGV2LCBvbGRfc3RhdGUpOwo+IC0t
IAo+IFJlZ2FyZHMsCj4gCj4gTGF1cmVudCBQaW5jaGFydAo+CgpSZXZpZXdlZC1ieTogVWxyaWNo
IEhlY2h0IDx1bGkrcmVuZXNhc0BmcG9uZC5ldT4KCkNVClVsaQpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1k
ZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
