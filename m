Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A1724150964
	for <lists+dri-devel@lfdr.de>; Mon,  3 Feb 2020 16:14:23 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A8B0E6EC35;
	Mon,  3 Feb 2020 15:14:21 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga05.intel.com (mga05.intel.com [192.55.52.43])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6B33E6EC38;
 Mon,  3 Feb 2020 15:14:20 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by fmsmga105.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 03 Feb 2020 07:14:19 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,398,1574150400"; d="scan'208";a="263450795"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by fmsmga002.fm.intel.com with SMTP; 03 Feb 2020 07:14:17 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Mon, 03 Feb 2020 17:14:17 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 11/26] drm/dp: Pimp drm_dp_downstream_max_bpc()
Date: Mon,  3 Feb 2020 17:13:28 +0200
Message-Id: <20200203151343.14378-12-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200203151343.14378-1-ville.syrjala@linux.intel.com>
References: <20200203151343.14378-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: intel-gfx@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCkRl
YWwgd2l0aCBtb3JlIGNhc2VzIGluIGRybV9kcF9kb3duc3RyZWFtX21heF9icGMoKToKLSBEUENE
IDEuMCAtPiBhc3N1bWUgOGJwYyBmb3Igbm9uLURQCi0gRFBDRCAxLjErIERQIChvciBEUCsrIHdp
dGggRFAgc2luaykgLT4gYWxsb3cgYW55dGhpbmcKLSBEUENEIDEuMSsgVE1EUyAtPiBjaGVjayB0
aGUgY2FwcywgYXNzdW1lIDhicGMgaWYgdGhlIHZhbHVlIGlzIGNyYXAKLSBhbnl0aGluZyBlbHNl
IC0+IGFzc3VtZSA4YnBjCgpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rsw6QgPHZpbGxlLnN5
cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fZHBfaGVscGVy
LmMgICAgICAgICB8IDY1ICsrKysrKysrKysrKysrKystLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYyB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X2RlYnVnZnMuYyAgICAgfCAgNCArLQogaW5jbHVkZS9kcm0vZHJtX2RwX2hlbHBlci5oICAg
ICAgICAgICAgIHwgMTAgKystLQogNCBmaWxlcyBjaGFuZ2VkLCA1MiBpbnNlcnRpb25zKCspLCAy
OSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2RwX2hlbHBl
ci5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9kcF9oZWxwZXIuYwppbmRleCBiZGI3YWUzY2UzMmUu
LjcxNjRiOWQyNzRlMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9kcF9oZWxwZXIu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2RwX2hlbHBlci5jCkBAIC00NTYsMzIgKzQ1Niw0
NCBAQCBpbnQgZHJtX2RwX2Rvd25zdHJlYW1fbWF4X2Nsb2NrKGNvbnN0IHU4IGRwY2RbRFBfUkVD
RUlWRVJfQ0FQX1NJWkVdLAogRVhQT1JUX1NZTUJPTChkcm1fZHBfZG93bnN0cmVhbV9tYXhfY2xv
Y2spOwogCiAvKioKLSAqIGRybV9kcF9kb3duc3RyZWFtX21heF9icGMoKSAtIGV4dHJhY3QgYnJh
bmNoIGRldmljZSBtYXgKLSAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdHMgcGVy
IGNvbXBvbmVudAotICogQGRwY2Q6IERpc3BsYXlQb3J0IGNvbmZpZ3VyYXRpb24gZGF0YQotICog
QHBvcnRfY2FwOiBwb3J0IGNhcGFiaWxpdGllcwotICoKLSAqIFJldHVybnMgbWF4IGJwYyBvbiBz
dWNjZXNzIG9yIDAgaWYgbWF4IGJwYyBub3QgZGVmaW5lZAotICovCisgICogZHJtX2RwX2Rvd25z
dHJlYW1fbWF4X2JwYygpIC0gZXh0cmFjdCBkb3duc3RyZWFtIGZhY2luZyBwb3J0IG1heAorICAq
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdHMgcGVyIGNvbXBvbmVudAorICAqIEBk
cGNkOiBEaXNwbGF5UG9ydCBjb25maWd1cmF0aW9uIGRhdGEKKyAgKiBAcG9ydF9jYXA6IGRvd25z
dHJlYW0gZmFjaW5nIHBvcnQgY2FwYWJpbGl0aWVzCisgICogQGVkaWQ6IEVESUQKKyAgKgorICAq
IFJldHVybnMgbWF4IGJwYyBvbiBzdWNjZXNzIG9yIDAgaWYgbWF4IGJwYyBub3QgZGVmaW5lZAor
ICAqLwogaW50IGRybV9kcF9kb3duc3RyZWFtX21heF9icGMoY29uc3QgdTggZHBjZFtEUF9SRUNF
SVZFUl9DQVBfU0laRV0sCi0JCQkgICAgICBjb25zdCB1OCBwb3J0X2NhcFs0XSkKKwkJCSAgICAg
IGNvbnN0IHU4IHBvcnRfY2FwWzRdLAorCQkJICAgICAgY29uc3Qgc3RydWN0IGVkaWQgKmVkaWQp
CiB7Ci0JaW50IHR5cGUgPSBwb3J0X2NhcFswXSAmIERQX0RTX1BPUlRfVFlQRV9NQVNLOwotCWJv
b2wgZGV0YWlsZWRfY2FwX2luZm8gPSBkcGNkW0RQX0RPV05TVFJFQU1QT1JUX1BSRVNFTlRdICYK
LQkJRFBfREVUQUlMRURfQ0FQX0lORk9fQVZBSUxBQkxFOwotCWludCBicGM7Ci0KLQlpZiAoIWRl
dGFpbGVkX2NhcF9pbmZvKQorCWlmICghZHJtX2RwX2lzX2JyYW5jaChkcGNkKSkKIAkJcmV0dXJu
IDA7CiAKLQlzd2l0Y2ggKHR5cGUpIHsKLQljYXNlIERQX0RTX1BPUlRfVFlQRV9WR0E6Ci0JY2Fz
ZSBEUF9EU19QT1JUX1RZUEVfRFZJOgotCWNhc2UgRFBfRFNfUE9SVF9UWVBFX0hETUk6CisJaWYg
KGRwY2RbRFBfRFBDRF9SRVZdIDwgMHgxMSkgeworCQlzd2l0Y2ggKGRwY2RbRFBfRE9XTlNUUkVB
TVBPUlRfUFJFU0VOVF0gJiBEUF9EV05fU1RSTV9QT1JUX1RZUEVfTUFTSykgeworCQljYXNlIERQ
X0RXTl9TVFJNX1BPUlRfVFlQRV9EUDoKKwkJCXJldHVybiAwOworCQlkZWZhdWx0OgorCQkJcmV0
dXJuIDg7CisJCX0KKwl9CisKKwlzd2l0Y2ggKHBvcnRfY2FwWzBdICYgRFBfRFNfUE9SVF9UWVBF
X01BU0spIHsKKwljYXNlIERQX0RTX1BPUlRfVFlQRV9EUDoKKwkJcmV0dXJuIDA7CiAJY2FzZSBE
UF9EU19QT1JUX1RZUEVfRFBfRFVBTE1PREU6Ci0JCWJwYyA9IHBvcnRfY2FwWzJdICYgRFBfRFNf
TUFYX0JQQ19NQVNLOworCQlpZiAoaXNfZWRpZF9kaWdpdGFsX2lucHV0X2RwKGVkaWQpKQorCQkJ
cmV0dXJuIDA7CisJCS8qIGZhbGwgdGhyb3VnaCAqLworCWNhc2UgRFBfRFNfUE9SVF9UWVBFX0hE
TUk6CisJY2FzZSBEUF9EU19QT1JUX1RZUEVfRFZJOgorCWNhc2UgRFBfRFNfUE9SVF9UWVBFX1ZH
QToKKwkJaWYgKChkcGNkW0RQX0RPV05TVFJFQU1QT1JUX1BSRVNFTlRdICYgRFBfREVUQUlMRURf
Q0FQX0lORk9fQVZBSUxBQkxFKSA9PSAwKQorCQkJcmV0dXJuIDg7CiAKLQkJc3dpdGNoIChicGMp
IHsKKwkJc3dpdGNoIChwb3J0X2NhcFsyXSAmIERQX0RTX01BWF9CUENfTUFTSykgewogCQljYXNl
IERQX0RTXzhCUEM6CiAJCQlyZXR1cm4gODsKIAkJY2FzZSBEUF9EU18xMEJQQzoKQEAgLTQ5MCwx
MCArNTAyLDEyIEBAIGludCBkcm1fZHBfZG93bnN0cmVhbV9tYXhfYnBjKGNvbnN0IHU4IGRwY2Rb
RFBfUkVDRUlWRVJfQ0FQX1NJWkVdLAogCQkJcmV0dXJuIDEyOwogCQljYXNlIERQX0RTXzE2QlBD
OgogCQkJcmV0dXJuIDE2OworCQlkZWZhdWx0OgorCQkJcmV0dXJuIDg7CiAJCX0KLQkJLyogZmFs
bCB0aHJvdWdoICovCisJCWJyZWFrOwogCWRlZmF1bHQ6Ci0JCXJldHVybiAwOworCQlyZXR1cm4g
ODsKIAl9CiB9CiBFWFBPUlRfU1lNQk9MKGRybV9kcF9kb3duc3RyZWFtX21heF9icGMpOwpAQCAt
NTE2LDEyICs1MzAsMTUgQEAgRVhQT1JUX1NZTUJPTChkcm1fZHBfZG93bnN0cmVhbV9pZCk7CiAg
KiBAbTogcG9pbnRlciBmb3IgZGVidWdmcyBmaWxlCiAgKiBAZHBjZDogRGlzcGxheVBvcnQgY29u
ZmlndXJhdGlvbiBkYXRhCiAgKiBAcG9ydF9jYXA6IHBvcnQgY2FwYWJpbGl0aWVzCisgKiBAZWRp
ZDogRURJRAogICogQGF1eDogRGlzcGxheVBvcnQgQVVYIGNoYW5uZWwKICAqCiAgKi8KIHZvaWQg
ZHJtX2RwX2Rvd25zdHJlYW1fZGVidWcoc3RydWN0IHNlcV9maWxlICptLAogCQkJICAgICBjb25z
dCB1OCBkcGNkW0RQX1JFQ0VJVkVSX0NBUF9TSVpFXSwKLQkJCSAgICAgY29uc3QgdTggcG9ydF9j
YXBbNF0sIHN0cnVjdCBkcm1fZHBfYXV4ICphdXgpCisJCQkgICAgIGNvbnN0IHU4IHBvcnRfY2Fw
WzRdLAorCQkJICAgICBjb25zdCBzdHJ1Y3QgZWRpZCAqZWRpZCwKKwkJCSAgICAgc3RydWN0IGRy
bV9kcF9hdXggKmF1eCkKIHsKIAlib29sIGRldGFpbGVkX2NhcF9pbmZvID0gZHBjZFtEUF9ET1dO
U1RSRUFNUE9SVF9QUkVTRU5UXSAmCiAJCQkJIERQX0RFVEFJTEVEX0NBUF9JTkZPX0FWQUlMQUJM
RTsKQEAgLTU4OCw3ICs2MDUsNyBAQCB2b2lkIGRybV9kcF9kb3duc3RyZWFtX2RlYnVnKHN0cnVj
dCBzZXFfZmlsZSAqbSwKIAkJCQlzZXFfcHJpbnRmKG0sICJcdFx0TWF4IFRNRFMgY2xvY2s6ICVk
IGtIelxuIiwgY2xrKTsKIAkJfQogCi0JCWJwYyA9IGRybV9kcF9kb3duc3RyZWFtX21heF9icGMo
ZHBjZCwgcG9ydF9jYXApOworCQlicGMgPSBkcm1fZHBfZG93bnN0cmVhbV9tYXhfYnBjKGRwY2Qs
IHBvcnRfY2FwLCBlZGlkKTsKIAogCQlpZiAoYnBjID4gMCkKIAkJCXNlcV9wcmludGYobSwgIlx0
XHRNYXggYnBjOiAlZFxuIiwgYnBjKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfZHAuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
ZHAuYwppbmRleCA1ZmFiN2FiOTc4MTUuLjcwNjc1MGY5Mzc5ZSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2Rpc3BsYXkvaW50ZWxfZHAuYwpAQCAtNTY2NSw3ICs1NjY1LDcgQEAgaW50ZWxfZHBfc2V0
X2VkaWQoc3RydWN0IGludGVsX2RwICppbnRlbF9kcCkKIAogCWludGVsX2RwLT5kZnAubWF4X2Jw
YyA9CiAJCWRybV9kcF9kb3duc3RyZWFtX21heF9icGMoaW50ZWxfZHAtPmRwY2QsCi0JCQkJCSAg
aW50ZWxfZHAtPmRvd25zdHJlYW1fcG9ydHMpOworCQkJCQkgIGludGVsX2RwLT5kb3duc3RyZWFt
X3BvcnRzLCBlZGlkKTsKIAogCURSTV9ERUJVR19LTVMoIltDT05ORUNUT1I6JWQ6JXNdIERGUCBt
YXggYnBjICVkXG4iLAogCQkgICAgICBjb25uZWN0b3ItPmJhc2UuYmFzZS5pZCwgY29ubmVjdG9y
LT5iYXNlLm5hbWUsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVn
ZnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZGVidWdmcy5jCmluZGV4IGU3NWU4MjEy
ZjAzYi4uY2ZlZjM4OTMyZjY1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X2RlYnVnZnMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2RlYnVnZnMuYwpAQCAt
MjM5Myw2ICsyMzkzLDcgQEAgc3RhdGljIHZvaWQgaW50ZWxfZHBfaW5mbyhzdHJ1Y3Qgc2VxX2Zp
bGUgKm0sCiB7CiAJc3RydWN0IGludGVsX2VuY29kZXIgKmludGVsX2VuY29kZXIgPSBpbnRlbF9h
dHRhY2hlZF9lbmNvZGVyKGludGVsX2Nvbm5lY3Rvcik7CiAJc3RydWN0IGludGVsX2RwICppbnRl
bF9kcCA9IGVuY190b19pbnRlbF9kcChpbnRlbF9lbmNvZGVyKTsKKwljb25zdCBzdHJ1Y3QgZHJt
X3Byb3BlcnR5X2Jsb2IgKmVkaWQgPSBpbnRlbF9jb25uZWN0b3ItPmJhc2UuZWRpZF9ibG9iX3B0
cjsKIAogCXNlcV9wcmludGYobSwgIlx0RFBDRCByZXY6ICV4XG4iLCBpbnRlbF9kcC0+ZHBjZFtE
UF9EUENEX1JFVl0pOwogCXNlcV9wcmludGYobSwgIlx0YXVkaW8gc3VwcG9ydDogJXNcbiIsIHll
c25vKGludGVsX2RwLT5oYXNfYXVkaW8pKTsKQEAgLTI0MDAsNyArMjQwMSw4IEBAIHN0YXRpYyB2
b2lkIGludGVsX2RwX2luZm8oc3RydWN0IHNlcV9maWxlICptLAogCQlpbnRlbF9wYW5lbF9pbmZv
KG0sICZpbnRlbF9jb25uZWN0b3ItPnBhbmVsKTsKIAogCWRybV9kcF9kb3duc3RyZWFtX2RlYnVn
KG0sIGludGVsX2RwLT5kcGNkLCBpbnRlbF9kcC0+ZG93bnN0cmVhbV9wb3J0cywKLQkJCQkmaW50
ZWxfZHAtPmF1eCk7CisJCQkJZWRpZCA/IGVkaWQtPmRhdGEgOiBOVUxMLCAmaW50ZWxfZHAtPmF1
eCk7CisKIAlpZiAoaW50ZWxfY29ubmVjdG9yLT5oZGNwLnNoaW0pIHsKIAkJc2VxX3B1dHMobSwg
Ilx0SERDUCB2ZXJzaW9uOiAiKTsKIAkJaW50ZWxfaGRjcF9pbmZvKG0sIGludGVsX2Nvbm5lY3Rv
cik7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fZHBfaGVscGVyLmggYi9pbmNsdWRlL2Ry
bS9kcm1fZHBfaGVscGVyLmgKaW5kZXggOTU4ZGIyOThhZGM3Li42MjYzN2FjYWVmZWUgMTAwNjQ0
Ci0tLSBhL2luY2x1ZGUvZHJtL2RybV9kcF9oZWxwZXIuaAorKysgYi9pbmNsdWRlL2RybS9kcm1f
ZHBfaGVscGVyLmgKQEAgLTE0ODMsMTAgKzE0ODMsMTQgQEAgYm9vbCBkcm1fZHBfZG93bnN0cmVh
bV9pc190bWRzKGNvbnN0IHU4IGRwY2RbRFBfUkVDRUlWRVJfQ0FQX1NJWkVdLAogaW50IGRybV9k
cF9kb3duc3RyZWFtX21heF9jbG9jayhjb25zdCB1OCBkcGNkW0RQX1JFQ0VJVkVSX0NBUF9TSVpF
XSwKIAkJCQljb25zdCB1OCBwb3J0X2NhcFs0XSk7CiBpbnQgZHJtX2RwX2Rvd25zdHJlYW1fbWF4
X2JwYyhjb25zdCB1OCBkcGNkW0RQX1JFQ0VJVkVSX0NBUF9TSVpFXSwKLQkJCSAgICAgIGNvbnN0
IHU4IHBvcnRfY2FwWzRdKTsKKwkJCSAgICAgIGNvbnN0IHU4IHBvcnRfY2FwWzRdLAorCQkJICAg
ICAgY29uc3Qgc3RydWN0IGVkaWQgKmVkaWQpOwogaW50IGRybV9kcF9kb3duc3RyZWFtX2lkKHN0
cnVjdCBkcm1fZHBfYXV4ICphdXgsIGNoYXIgaWRbNl0pOwotdm9pZCBkcm1fZHBfZG93bnN0cmVh
bV9kZWJ1ZyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIGNvbnN0IHU4IGRwY2RbRFBfUkVDRUlWRVJfQ0FQ
X1NJWkVdLAotCQkJICAgICBjb25zdCB1OCBwb3J0X2NhcFs0XSwgc3RydWN0IGRybV9kcF9hdXgg
KmF1eCk7Cit2b2lkIGRybV9kcF9kb3duc3RyZWFtX2RlYnVnKHN0cnVjdCBzZXFfZmlsZSAqbSwK
KwkJCSAgICAgY29uc3QgdTggZHBjZFtEUF9SRUNFSVZFUl9DQVBfU0laRV0sCisJCQkgICAgIGNv
bnN0IHU4IHBvcnRfY2FwWzRdLAorCQkJICAgICBjb25zdCBzdHJ1Y3QgZWRpZCAqZWRpZCwKKwkJ
CSAgICAgc3RydWN0IGRybV9kcF9hdXggKmF1eCk7CiAKIHZvaWQgZHJtX2RwX3JlbW90ZV9hdXhf
aW5pdChzdHJ1Y3QgZHJtX2RwX2F1eCAqYXV4KTsKIHZvaWQgZHJtX2RwX2F1eF9pbml0KHN0cnVj
dCBkcm1fZHBfYXV4ICphdXgpOwotLSAKMi4yNC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9kcmktZGV2ZWwK
