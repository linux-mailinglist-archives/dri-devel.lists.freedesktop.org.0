Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 998D647A84
	for <lists+dri-devel@lfdr.de>; Mon, 17 Jun 2019 09:14:02 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1F91989187;
	Mon, 17 Jun 2019 07:13:45 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx0a-001b2d01.pphosted.com (mx0b-001b2d01.pphosted.com
 [148.163.158.5])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3E9B789186
 for <dri-devel@lists.freedesktop.org>; Mon, 17 Jun 2019 02:53:05 +0000 (UTC)
Received: from pps.filterd (m0098419.ppops.net [127.0.0.1])
 by mx0b-001b2d01.pphosted.com (8.16.0.27/8.16.0.27) with SMTP id
 x5H274KB103052
 for <dri-devel@lists.freedesktop.org>; Sun, 16 Jun 2019 22:07:06 -0400
Received: from e06smtp03.uk.ibm.com (e06smtp03.uk.ibm.com [195.75.94.99])
 by mx0b-001b2d01.pphosted.com with ESMTP id 2t5vdufeqk-1
 (version=TLSv1.2 cipher=AES256-GCM-SHA384 bits=256 verify=NOT)
 for <dri-devel@lists.freedesktop.org>; Sun, 16 Jun 2019 22:07:05 -0400
Received: from localhost
 by e06smtp03.uk.ibm.com with IBM ESMTP SMTP Gateway: Authorized Use Only!
 Violators will be prosecuted
 for <dri-devel@lists.freedesktop.org> from <alastair@au1.ibm.com>;
 Mon, 17 Jun 2019 03:06:52 +0100
Received: from b06cxnps4074.portsmouth.uk.ibm.com (9.149.109.196)
 by e06smtp03.uk.ibm.com (192.168.101.133) with IBM ESMTP SMTP Gateway:
 Authorized Use Only! Violators will be prosecuted; 
 (version=TLSv1/SSLv3 cipher=AES256-GCM-SHA384 bits=256/256)
 Mon, 17 Jun 2019 03:06:44 +0100
Received: from d06av23.portsmouth.uk.ibm.com (d06av23.portsmouth.uk.ibm.com
 [9.149.105.59])
 by b06cxnps4074.portsmouth.uk.ibm.com (8.14.9/8.14.9/NCO v10.0) with ESMTP id
 x5H26hkg52494530
 (version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
 Mon, 17 Jun 2019 02:06:43 GMT
Received: from d06av23.portsmouth.uk.ibm.com (unknown [127.0.0.1])
 by IMSVA (Postfix) with ESMTP id 35F23A4051;
 Mon, 17 Jun 2019 02:06:43 +0000 (GMT)
Received: from d06av23.portsmouth.uk.ibm.com (unknown [127.0.0.1])
 by IMSVA (Postfix) with ESMTP id 90361A4057;
 Mon, 17 Jun 2019 02:06:42 +0000 (GMT)
Received: from ozlabs.au.ibm.com (unknown [9.192.253.14])
 by d06av23.portsmouth.uk.ibm.com (Postfix) with ESMTP;
 Mon, 17 Jun 2019 02:06:42 +0000 (GMT)
Received: from adsilva.ozlabs.ibm.com (haven.au.ibm.com [9.192.254.114])
 (using TLSv1.2 with cipher DHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by ozlabs.au.ibm.com (Postfix) with ESMTPSA id 6BEB9A027A;
 Mon, 17 Jun 2019 12:06:41 +1000 (AEST)
From: "Alastair D'Silva" <alastair@au1.ibm.com>
To: alastair@d-silva.org
Subject: [PATCH v3 3/7] lib/hexdump.c: Optionally suppress lines of repeated
 bytes
Date: Mon, 17 Jun 2019 12:04:26 +1000
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190617020430.8708-1-alastair@au1.ibm.com>
References: <20190617020430.8708-1-alastair@au1.ibm.com>
MIME-Version: 1.0
X-TM-AS-GCONF: 00
x-cbid: 19061702-0012-0000-0000-00000329AB18
X-IBM-AV-DETECTION: SAVI=unused REMOTE=unused XFE=unused
x-cbparentid: 19061702-0013-0000-0000-00002162C06C
Message-Id: <20190617020430.8708-4-alastair@au1.ibm.com>
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10434:, ,
 definitions=2019-06-17_01:, , signatures=0
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 priorityscore=1501
 malwarescore=0 suspectscore=1 phishscore=0 bulkscore=0 spamscore=0
 clxscore=1015 lowpriorityscore=0 mlxscore=0 impostorscore=0
 mlxlogscore=999 adultscore=0 classifier=spam adjust=0 reason=mlx
 scancount=1 engine=8.0.1-1810050000 definitions=main-1906170019
X-Mailman-Approved-At: Mon, 17 Jun 2019 07:13:33 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-fbdev@vger.kernel.org, Stanislaw Gruszka <sgruszka@redhat.com>,
 Petr Mladek <pmladek@suse.com>, David Airlie <airlied@linux.ie>,
 dri-devel@lists.freedesktop.org, devel@driverdev.osuosl.org,
 linux-scsi@vger.kernel.org, Jassi Brar <jassisinghbrar@gmail.com>,
 ath10k@lists.infradead.org, intel-gfx@lists.freedesktop.org,
 Dan Carpenter <dan.carpenter@oracle.com>, Jose Abreu <Jose.Abreu@synopsys.com>,
 Tom Lendacky <thomas.lendacky@amd.com>,
 "James E.J. Bottomley" <jejb@linux.ibm.com>, linux-fsdevel@vger.kernel.org,
 Steven Rostedt <rostedt@goodmis.org>, Rodrigo Vivi <rodrigo.vivi@intel.com>,
 Kalle Valo <kvalo@codeaurora.org>, Karsten Keil <isdn@linux-pingi.de>,
 "Martin K. Petersen" <martin.petersen@oracle.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 linux-wireless@vger.kernel.org, linux-kernel@vger.kernel.org,
 Sergey Senozhatsky <sergey.senozhatsky@gmail.com>,
 David Laight <David.Laight@ACULAB.COM>, netdev@vger.kernel.org,
 Enric Balletbo i Serra <enric.balletbo@collabora.com>,
 Andrew Morton <akpm@linux-foundation.org>,
 "David S. Miller" <davem@davemloft.net>,
 Alexander Viro <viro@zeniv.linux.org.uk>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogQWxhc3RhaXIgRCdTaWx2YSA8YWxhc3RhaXJAZC1zaWx2YS5vcmc+CgpTb21lIGJ1ZmZl
cnMgbWF5IG9ubHkgYmUgcGFydGlhbGx5IGZpbGxlZCB3aXRoIHVzZWZ1bCBkYXRhLCB3aGlsZSB0
aGUgcmVzdAppcyBwYWRkZWQgKHR5cGljYWxseSB3aXRoIDB4MDAgb3IgMHhmZikuCgpUaGlzIHBh
dGNoIGludHJvZHVjZXMgYSBmbGFnIHRvIGFsbG93IHRoZSBzdXByZXNzaW9uIG9mIGxpbmVzIG9m
IHJlcGVhdGVkCmJ5dGVzLCB3aGljaCBhcmUgcmVwbGFjZWQgd2l0aCAnKiogU2tpcHBlZCAldSBi
eXRlcyBvZiB2YWx1ZSAweCV4ICoqJwoKQW4gaW5saW5lIHdyYXBwZXIgZnVuY3Rpb24gaXMgcHJv
dmlkZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGgKZXhpc3RpbmcgY29kZSwgd2hp
Y2ggbWFpbnRhaW5zIHRoZSBvcmlnaW5hbCBiZWhhdmlvdXIuCgpTaWduZWQtb2ZmLWJ5OiBBbGFz
dGFpciBEJ1NpbHZhIDxhbGFzdGFpckBkLXNpbHZhLm9yZz4KLS0tCiBpbmNsdWRlL2xpbnV4L3By
aW50ay5oIHwgMjUgKysrKysrKysrLS0tCiBsaWIvaGV4ZHVtcC5jICAgICAgICAgIHwgOTEgKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tCiAyIGZpbGVzIGNoYW5nZWQs
IDk5IGluc2VydGlvbnMoKyksIDE3IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2luY2x1ZGUv
bGludXgvcHJpbnRrLmggYi9pbmNsdWRlL2xpbnV4L3ByaW50ay5oCmluZGV4IGNlZmQzNzRjNDdi
MS4uZDc3NTQ3OTljZmUwIDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4L3ByaW50ay5oCisrKyBi
L2luY2x1ZGUvbGludXgvcHJpbnRrLmgKQEAgLTQ4MSwxMyArNDgxLDE4IEBAIGVudW0gewogCURV
TVBfUFJFRklYX0FERFJFU1MsCiAJRFVNUF9QUkVGSVhfT0ZGU0VUCiB9OworCiBleHRlcm4gaW50
IGhleF9kdW1wX3RvX2J1ZmZlcihjb25zdCB2b2lkICpidWYsIHNpemVfdCBsZW4sIGludCByb3dz
aXplLAogCQkJICAgICAgaW50IGdyb3Vwc2l6ZSwgY2hhciAqbGluZWJ1Ziwgc2l6ZV90IGxpbmVi
dWZsZW4sCiAJCQkgICAgICBib29sIGFzY2lpKTsKKworI2RlZmluZSBIRVhEVU1QX0FTQ0lJCQkJ
QklUKDApCisjZGVmaW5lIEhFWERVTVBfU1VQUFJFU1NfUkVQRUFURUQJQklUKDEpCisKICNpZmRl
ZiBDT05GSUdfUFJJTlRLCi1leHRlcm4gdm9pZCBwcmludF9oZXhfZHVtcChjb25zdCBjaGFyICps
ZXZlbCwgY29uc3QgY2hhciAqcHJlZml4X3N0ciwKK2V4dGVybiB2b2lkIHByaW50X2hleF9kdW1w
X2V4dChjb25zdCBjaGFyICpsZXZlbCwgY29uc3QgY2hhciAqcHJlZml4X3N0ciwKIAkJCSAgIGlu
dCBwcmVmaXhfdHlwZSwgaW50IHJvd3NpemUsIGludCBncm91cHNpemUsCi0JCQkgICBjb25zdCB2
b2lkICpidWYsIHNpemVfdCBsZW4sIGJvb2wgYXNjaWkpOworCQkJICAgY29uc3Qgdm9pZCAqYnVm
LCBzaXplX3QgbGVuLCB1MzIgZmxhZ3MpOwogI2lmIGRlZmluZWQoQ09ORklHX0RZTkFNSUNfREVC
VUcpCiAjZGVmaW5lIHByaW50X2hleF9kdW1wX2J5dGVzKHByZWZpeF9zdHIsIHByZWZpeF90eXBl
LCBidWYsIGxlbikJXAogCWR5bmFtaWNfaGV4X2R1bXAocHJlZml4X3N0ciwgcHJlZml4X3R5cGUs
IDE2LCAxLCBidWYsIGxlbiwgdHJ1ZSkKQEAgLTQ5NiwxOCArNTAxLDI4IEBAIGV4dGVybiB2b2lk
IHByaW50X2hleF9kdW1wX2J5dGVzKGNvbnN0IGNoYXIgKnByZWZpeF9zdHIsIGludCBwcmVmaXhf
dHlwZSwKIAkJCQkgY29uc3Qgdm9pZCAqYnVmLCBzaXplX3QgbGVuKTsKICNlbmRpZiAvKiBkZWZp
bmVkKENPTkZJR19EWU5BTUlDX0RFQlVHKSAqLwogI2Vsc2UKLXN0YXRpYyBpbmxpbmUgdm9pZCBw
cmludF9oZXhfZHVtcChjb25zdCBjaGFyICpsZXZlbCwgY29uc3QgY2hhciAqcHJlZml4X3N0ciwK
K3N0YXRpYyBpbmxpbmUgdm9pZCBwcmludF9oZXhfZHVtcF9leHQoY29uc3QgY2hhciAqbGV2ZWws
IGNvbnN0IGNoYXIgKnByZWZpeF9zdHIsCiAJCQkJICBpbnQgcHJlZml4X3R5cGUsIGludCByb3dz
aXplLCBpbnQgZ3JvdXBzaXplLAotCQkJCSAgY29uc3Qgdm9pZCAqYnVmLCBzaXplX3QgbGVuLCBi
b29sIGFzY2lpKQorCQkJCSAgY29uc3Qgdm9pZCAqYnVmLCBzaXplX3QgbGVuLCB1MzIgZmxhZ3Mp
CiB7CiB9CiBzdGF0aWMgaW5saW5lIHZvaWQgcHJpbnRfaGV4X2R1bXBfYnl0ZXMoY29uc3QgY2hh
ciAqcHJlZml4X3N0ciwgaW50IHByZWZpeF90eXBlLAogCQkJCQljb25zdCB2b2lkICpidWYsIHNp
emVfdCBsZW4pCiB7CiB9Ci0KICNlbmRpZgogCitzdGF0aWMgX19hbHdheXNfaW5saW5lIHZvaWQg
cHJpbnRfaGV4X2R1bXAoY29uc3QgY2hhciAqbGV2ZWwsCisJCQkJCSAgIGNvbnN0IGNoYXIgKnBy
ZWZpeF9zdHIsCisJCQkJCSAgIGludCBwcmVmaXhfdHlwZSwgaW50IHJvd3NpemUsCisJCQkJCSAg
IGludCBncm91cHNpemUsIGNvbnN0IHZvaWQgKmJ1ZiwKKwkJCQkJICAgc2l6ZV90IGxlbiwgYm9v
bCBhc2NpaSkKK3sKKwlwcmludF9oZXhfZHVtcF9leHQobGV2ZWwsIHByZWZpeF9zdHIsIHByZWZp
eF90eXBlLCByb3dzaXplLCBncm91cHNpemUsCisJCQlidWYsIGxlbiwgYXNjaWkgPyBIRVhEVU1Q
X0FTQ0lJIDogMCk7Cit9CisKKwogI2lmIGRlZmluZWQoQ09ORklHX0RZTkFNSUNfREVCVUcpCiAj
ZGVmaW5lIHByaW50X2hleF9kdW1wX2RlYnVnKHByZWZpeF9zdHIsIHByZWZpeF90eXBlLCByb3dz
aXplLAlcCiAJCQkgICAgIGdyb3Vwc2l6ZSwgYnVmLCBsZW4sIGFzY2lpKQlcCmRpZmYgLS1naXQg
YS9saWIvaGV4ZHVtcC5jIGIvbGliL2hleGR1bXAuYwppbmRleCAzOTQzNTA3YmMwZTkuLmI3ODFm
ODg4ODg0ZSAxMDA2NDQKLS0tIGEvbGliL2hleGR1bXAuYworKysgYi9saWIvaGV4ZHVtcC5jCkBA
IC0yMTIsOCArMjEyLDQ0IEBAIGludCBoZXhfZHVtcF90b19idWZmZXIoY29uc3Qgdm9pZCAqYnVm
LCBzaXplX3QgbGVuLCBpbnQgcm93c2l6ZSwgaW50IGdyb3Vwc2l6ZSwKIEVYUE9SVF9TWU1CT0wo
aGV4X2R1bXBfdG9fYnVmZmVyKTsKIAogI2lmZGVmIENPTkZJR19QUklOVEsKKworLyoqCisgKiBi
dWZfaXNfYWxsIC0gQ2hlY2sgaWYgYSBidWZmZXIgY29udGFpbnMgb25seSBhIHNpbmdsZSBieXRl
IHZhbHVlCisgKiBAYnVmOiBwb2ludGVyIHRvIHRoZSBidWZmZXIKKyAqIEBsZW46IHRoZSBzaXpl
IG9mIHRoZSBidWZmZXIgaW4gYnl0ZXMKKyAqIEB2YWw6IG91dHB1dHMgdGhlIHZhbHVlIGlmIGlm
IHRoZSBieXRlcyBhcmUgaWRlbnRpY2FsCisgKi8KK3N0YXRpYyBib29sIGJ1Zl9pc19hbGwoY29u
c3QgdTggKmJ1Ziwgc2l6ZV90IGxlbiwgdTggKnZhbF9vdXQpCit7CisJc2l6ZV90IGk7CisJdTgg
dmFsOworCisJaWYgKGxlbiA8PSAxKQorCQlyZXR1cm4gZmFsc2U7CisKKwl2YWwgPSBidWZbMF07
CisKKwlmb3IgKGkgPSAxOyBpIDwgbGVuOyBpKyspIHsKKwkJaWYgKGJ1ZltpXSAhPSB2YWwpCisJ
CQlyZXR1cm4gZmFsc2U7CisJfQorCisJKnZhbF9vdXQgPSB2YWw7CisJcmV0dXJuIHRydWU7Cit9
CisKK3N0YXRpYyB2b2lkIGFubm91bmNlX3NraXBwZWQoY29uc3QgY2hhciAqbGV2ZWwsIGNvbnN0
IGNoYXIgKnByZWZpeF9zdHIsCisJCQkJICAgdTggdmFsLCBzaXplX3QgY291bnQpCit7CisJaWYg
KGNvdW50ID09IDApCisJCXJldHVybjsKKworCXByaW50aygiJXMlcyAqKiBTa2lwcGVkICVsdSBi
eXRlcyBvZiB2YWx1ZSAweCV4ICoqXG4iLAorCSAgICAgICBsZXZlbCwgcHJlZml4X3N0ciwgY291
bnQsIHZhbCk7Cit9CisKIC8qKgotICogcHJpbnRfaGV4X2R1bXAgLSBwcmludCBhIHRleHQgaGV4
IGR1bXAgdG8gc3lzbG9nIGZvciBhIGJpbmFyeSBibG9iIG9mIGRhdGEKKyAqIHByaW50X2hleF9k
dW1wX2V4dCAtIGR1bXAgYSBiaW5hcnkgYmxvYiBvZiBkYXRhIHRvIHN5c2xvZyBpbiBoZXhhZGVj
aW1hbAogICogQGxldmVsOiBrZXJuZWwgbG9nIGxldmVsIChlLmcuIEtFUk5fREVCVUcpCiAgKiBA
cHJlZml4X3N0cjogc3RyaW5nIHRvIHByZWZpeCBlYWNoIGxpbmUgd2l0aDsKICAqICBjYWxsZXIg
c3VwcGxpZXMgdHJhaWxpbmcgc3BhY2VzIGZvciBhbGlnbm1lbnQgaWYgZGVzaXJlZApAQCAtMjI0
LDYgKzI2MCwxMCBAQCBFWFBPUlRfU1lNQk9MKGhleF9kdW1wX3RvX2J1ZmZlcik7CiAgKiBAYnVm
OiBkYXRhIGJsb2IgdG8gZHVtcAogICogQGxlbjogbnVtYmVyIG9mIGJ5dGVzIGluIHRoZSBAYnVm
CiAgKiBAYXNjaWk6IGluY2x1ZGUgQVNDSUkgYWZ0ZXIgdGhlIGhleCBvdXRwdXQKKyAqIEBmbGFn
czogQSBiaXR3aXNlIE9SIG9mIHRoZSBmb2xsb3dpbmcgZmxhZ3M6CisgKglIRVhEVU1QX0FTQ0lJ
OgkJCWluY2x1ZGUgQVNDSUkgYWZ0ZXIgdGhlIGhleCBvdXRwdXQKKyAqCUhFWERVTVBfU1VQUFJF
U1NfUkVQRUFURUQ6CXN1cHByZXNzIHJlcGVhdGVkIGxpbmVzIG9mIGlkZW50aWNhbAorICoJCQkJ
CWJ5dGVzCiAgKgogICogR2l2ZW4gYSBidWZmZXIgb2YgdTggZGF0YSwgcHJpbnRfaGV4X2R1bXAo
KSBwcmludHMgYSBoZXggKyBBU0NJSSBkdW1wCiAgKiB0byB0aGUga2VybmVsIGxvZyBhdCB0aGUg
c3BlY2lmaWVkIGtlcm5lbCBsb2cgbGV2ZWwsIHdpdGggYW4gb3B0aW9uYWwKQEAgLTIzNCwyMiAr
Mjc0LDI1IEBAIEVYUE9SVF9TWU1CT0woaGV4X2R1bXBfdG9fYnVmZmVyKTsKICAqIChvcHRpb25h
bGx5KSBBU0NJSSBvdXRwdXQuCiAgKgogICogRS5nLjoKLSAqICAgcHJpbnRfaGV4X2R1bXAoS0VS
Tl9ERUJVRywgInJhdyBkYXRhOiAiLCBEVU1QX1BSRUZJWF9BRERSRVNTLAotICoJCSAgICAxNiwg
MSwgZnJhbWUtPmRhdGEsIGZyYW1lLT5sZW4sIHRydWUpOworICogICBwcmludF9oZXhfZHVtcF9l
eHQoS0VSTl9ERUJVRywgInJhdyBkYXRhOiAiLCBEVU1QX1BSRUZJWF9BRERSRVNTLAorICoJCSAg
ICAxNiwgMSwgZnJhbWUtPmRhdGEsIGZyYW1lLT5sZW4sIEhFWERVTVBfQVNDSUkpOwogICoKICAq
IEV4YW1wbGUgb3V0cHV0IHVzaW5nICVEVU1QX1BSRUZJWF9PRkZTRVQgYW5kIDEtYnl0ZSBtb2Rl
OgogICogMDAwOWFiNDI6IDQwIDQxIDQyIDQzIDQ0IDQ1IDQ2IDQ3IDQ4IDQ5IDRhIDRiIDRjIDRk
IDRlIDRmICBAQUJDREVGR0hJSktMTU5PCiAgKiBFeGFtcGxlIG91dHB1dCB1c2luZyAlRFVNUF9Q
UkVGSVhfQUREUkVTUyBhbmQgNC1ieXRlIG1vZGU6CiAgKiBmZmZmZmZmZjg4MDg5YWYwOiA3Mzcy
NzE3MCA3Nzc2NzU3NCA3YjdhNzk3OCA3ZjdlN2Q3YyAgcHFyc3R1dnd4eXp7fH1+LgogICovCi12
b2lkIHByaW50X2hleF9kdW1wKGNvbnN0IGNoYXIgKmxldmVsLCBjb25zdCBjaGFyICpwcmVmaXhf
c3RyLCBpbnQgcHJlZml4X3R5cGUsCi0JCSAgICBpbnQgcm93c2l6ZSwgaW50IGdyb3Vwc2l6ZSwK
LQkJICAgIGNvbnN0IHZvaWQgKmJ1Ziwgc2l6ZV90IGxlbiwgYm9vbCBhc2NpaSkKK3ZvaWQgcHJp
bnRfaGV4X2R1bXBfZXh0KGNvbnN0IGNoYXIgKmxldmVsLCBjb25zdCBjaGFyICpwcmVmaXhfc3Ry
LAorCQkJaW50IHByZWZpeF90eXBlLCBpbnQgcm93c2l6ZSwgaW50IGdyb3Vwc2l6ZSwKKwkJCWNv
bnN0IHZvaWQgKmJ1Ziwgc2l6ZV90IGxlbiwgdTMyIGZsYWdzKQogewogCWNvbnN0IHU4ICpwdHIg
PSBidWY7Ci0JaW50IGksIGxpbmVsZW4sIHJlbWFpbmluZyA9IGxlbjsKKwlpbnQgaSwgcmVtYWlu
aW5nID0gbGVuOwogCXVuc2lnbmVkIGNoYXIgKmxpbmVidWY7CiAJdW5zaWduZWQgaW50IGxpbmVi
dWZfbGVuOworCXU4IHNraXBwZWRfdmFsID0gMDsKKwlzaXplX3Qgc2tpcHBlZCA9IDA7CisKIAog
CWlmIChyb3dzaXplICUgZ3JvdXBzaXplKQogCQlyb3dzaXplIC09IHJvd3NpemUgJSBncm91cHNp
emU7CkBAIC0yNjYsMTEgKzMwOSwzNSBAQCB2b2lkIHByaW50X2hleF9kdW1wKGNvbnN0IGNoYXIg
KmxldmVsLCBjb25zdCBjaGFyICpwcmVmaXhfc3RyLCBpbnQgcHJlZml4X3R5cGUsCiAJfQogCiAJ
Zm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSByb3dzaXplKSB7Ci0JCWxpbmVsZW4gPSBtaW4ocmVt
YWluaW5nLCByb3dzaXplKTsKKwkJaW50IGxpbmVsZW4gPSBtaW4ocmVtYWluaW5nLCByb3dzaXpl
KTsKIAkJcmVtYWluaW5nIC09IHJvd3NpemU7CiAKKwkJaWYgKGZsYWdzICYgSEVYRFVNUF9TVVBQ
UkVTU19SRVBFQVRFRCkgeworCQkJdTggbmV3X3ZhbDsKKworCQkJaWYgKGJ1Zl9pc19hbGwocHRy
ICsgaSwgbGluZWxlbiwgJm5ld192YWwpKSB7CisJCQkJaWYgKG5ld192YWwgPT0gc2tpcHBlZF92
YWwpIHsKKwkJCQkJc2tpcHBlZCArPSBsaW5lbGVuOworCQkJCQljb250aW51ZTsKKwkJCQl9IGVs
c2UgeworCQkJCQlhbm5vdW5jZV9za2lwcGVkKGxldmVsLCBwcmVmaXhfc3RyLAorCQkJCQkJCSBz
a2lwcGVkX3ZhbCwgc2tpcHBlZCk7CisJCQkJCXNraXBwZWRfdmFsID0gbmV3X3ZhbDsKKwkJCQkJ
c2tpcHBlZCA9IGxpbmVsZW47CisJCQkJCWNvbnRpbnVlOworCQkJCX0KKwkJCX0KKwkJfQorCisJ
CWlmIChza2lwcGVkKSB7CisJCQlhbm5vdW5jZV9za2lwcGVkKGxldmVsLCBwcmVmaXhfc3RyLCBz
a2lwcGVkX3ZhbCwKKwkJCQkJIHNraXBwZWQpOworCQkJc2tpcHBlZCA9IDA7CisJCX0KKwogCQlo
ZXhfZHVtcF90b19idWZmZXIocHRyICsgaSwgbGluZWxlbiwgcm93c2l6ZSwgZ3JvdXBzaXplLAot
CQkJCSAgIGxpbmVidWYsIGxpbmVidWZfbGVuLCBhc2NpaSk7CisJCQkJICAgbGluZWJ1ZiwgbGlu
ZWJ1Zl9sZW4sCisJCQkJICAgZmxhZ3MgJiBIRVhEVU1QX0FTQ0lJKTsKIAogCQlzd2l0Y2ggKHBy
ZWZpeF90eXBlKSB7CiAJCWNhc2UgRFVNUF9QUkVGSVhfQUREUkVTUzoKQEAgLTI4OCw3ICszNTUs
NyBAQCB2b2lkIHByaW50X2hleF9kdW1wKGNvbnN0IGNoYXIgKmxldmVsLCBjb25zdCBjaGFyICpw
cmVmaXhfc3RyLCBpbnQgcHJlZml4X3R5cGUsCiAKIAlrZnJlZShsaW5lYnVmKTsKIH0KLUVYUE9S
VF9TWU1CT0wocHJpbnRfaGV4X2R1bXApOworRVhQT1JUX1NZTUJPTChwcmludF9oZXhfZHVtcF9l
eHQpOwogCiAjaWYgIWRlZmluZWQoQ09ORklHX0RZTkFNSUNfREVCVUcpCiAvKioKQEAgLTMwNiw4
ICszNzMsOCBAQCBFWFBPUlRfU1lNQk9MKHByaW50X2hleF9kdW1wKTsKIHZvaWQgcHJpbnRfaGV4
X2R1bXBfYnl0ZXMoY29uc3QgY2hhciAqcHJlZml4X3N0ciwgaW50IHByZWZpeF90eXBlLAogCQkJ
ICBjb25zdCB2b2lkICpidWYsIHNpemVfdCBsZW4pCiB7Ci0JcHJpbnRfaGV4X2R1bXAoS0VSTl9E
RUJVRywgcHJlZml4X3N0ciwgcHJlZml4X3R5cGUsIDE2LCAxLAotCQkgICAgICAgYnVmLCBsZW4s
IHRydWUpOworCXByaW50X2hleF9kdW1wX2V4dChLRVJOX0RFQlVHLCBwcmVmaXhfc3RyLCBwcmVm
aXhfdHlwZSwgMTYsIDEsCisJCSAgICAgICBidWYsIGxlbiwgSEVYRFVNUF9BU0NJSSk7CiB9CiBF
WFBPUlRfU1lNQk9MKHByaW50X2hleF9kdW1wX2J5dGVzKTsKICNlbmRpZiAvKiAhZGVmaW5lZChD
T05GSUdfRFlOQU1JQ19ERUJVRykgKi8KLS0gCjIuMjEuMAoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2
ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
