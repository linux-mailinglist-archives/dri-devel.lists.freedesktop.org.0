Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DEA94C90BC
	for <lists+dri-devel@lfdr.de>; Wed,  2 Oct 2019 20:23:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 011586E1A7;
	Wed,  2 Oct 2019 18:23:11 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x642.google.com (mail-pl1-x642.google.com
 [IPv6:2607:f8b0:4864:20::642])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6B4D26E1A7
 for <dri-devel@lists.freedesktop.org>; Wed,  2 Oct 2019 18:23:09 +0000 (UTC)
Received: by mail-pl1-x642.google.com with SMTP id q24so96094plr.13
 for <dri-devel@lists.freedesktop.org>; Wed, 02 Oct 2019 11:23:09 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=wzihXTL2tnTzBZq3Cd4qPJ7CKLBHTDfHZ3oFQtf8958=;
 b=D911xZqJIhEi8TlQpGcDXdPKHuC4WgY2qFfTyLqrsAINibh/9j80fRpzEjpUQtTCew
 yH1Y+dNlx07gxtKNWsUJgFRld6duK4LjzSPWRpKFszqOjM0pZV0W2POc88MGKpCkNpRY
 zhpox3r6p+jRFr8iLAPkMNQbTdmforRwLNpBt0g1ALX10jdAGSTBeB4+TpjbkUyLgfQf
 rBLjYx0S8svyPezd6jYSAjbKMuBO9sg0wSlbW6xGA+Yy9w6mcvPtYH5P4JZIzCNK4qsN
 vdXRIB05ksCL8mSmUi2ayjvZ3wsmCqCAi43zwkF1P60ZLQjx1tri63+k4qpJRLGlcED6
 2GQA==
X-Gm-Message-State: APjAAAWMwHGszA6IonLOgryj5vTeOmYyau63x+Fqrbapmyvl6j9yqphY
 kAsZ8WnswBDANPRKDyo1zLpyKw==
X-Google-Smtp-Source: APXvYqyotznwdv/+u+lW7N9LipxRxth40eBGMIfl6BS6W6gWJjou/huWbaW4Ni+NN8jIwlJXJEJPHg==
X-Received: by 2002:a17:902:9044:: with SMTP id
 w4mr5016116plz.228.1570040588704; 
 Wed, 02 Oct 2019 11:23:08 -0700 (PDT)
Received: from localhost.localdomain ([2601:1c2:680:1319:692:26ff:feda:3a81])
 by smtp.gmail.com with ESMTPSA id
 q132sm171102pfq.16.2019.10.02.11.23.07
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 02 Oct 2019 11:23:07 -0700 (PDT)
From: John Stultz <john.stultz@linaro.org>
To: lkml <linux-kernel@vger.kernel.org>
Subject: [PATCH v9 5/5] kselftests: Add dma-heap test
Date: Wed,  2 Oct 2019 18:22:55 +0000
Message-Id: <20191002182255.21808-6-john.stultz@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20191002182255.21808-1-john.stultz@linaro.org>
References: <20191002182255.21808-1-john.stultz@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=wzihXTL2tnTzBZq3Cd4qPJ7CKLBHTDfHZ3oFQtf8958=;
 b=gorGOwYtDg9AyY7F4xzXh4Zgrdrq5aDJP8ztd9RPRbGBqPbaV09FhzNnrRLFLWTHZB
 K+a64enPbaae1o89UBUzmAsj2N21cEOPMkS5kYId3HnCCc+W4Zl1up9zoqQ/cyRTQyWf
 4l/aZdwo0HkWMc3aqaQkgl3NKbohd3Sj51FU56HsRLT1Ucakg6a6BTKA+tVZfHxDZtr+
 NLBUFyUYE2JglXICgxiDaDm04rJ6wBufxvD96e+d2Z/DwbvXOCQiobHKOCw22TSaka4w
 c41nzgK1t6Rn0eJug3AS962kHu5U83k46Pq/a/q4tk2HbHKZJPnG6XpqiLc8ZJht77T8
 BL6A==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hillf Danton <hdanton@sina.com>,
 Vincent Donnefort <Vincent.Donnefort@arm.com>, Chenbo Feng <fengc@google.com>,
 Alistair Strachan <astrachan@google.com>, Liam Mark <lmark@codeaurora.org>,
 Christoph Hellwig <hch@infradead.org>, dri-devel@lists.freedesktop.org,
 "Andrew F . Davis" <afd@ti.com>, Hridya Valsaraju <hridya@google.com>,
 Sudipto Paul <Sudipto.Paul@arm.com>, Pratik Patel <pratikp@codeaurora.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIHZlcnkgdHJpdmlhbCBhbGxvY2F0aW9uIGFuZCBpbXBvcnQgdGVzdCBmb3IgZG1hLWhlYXBz
LAp1dGlsaXppbmcgdGhlIHZnZW0gZHJpdmVyIGFzIGEgdGVzdCBpbXBvcnRlci4KCkEgZ29vZCBj
aHVuayBvZiB0aGlzIGNvZGUgdGFrZW4gZnJvbToKICB0b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9h
bmRyb2lkL2lvbi9pb25tYXBfdGVzdC5jCiAgT3JpZ2luYWxseSBieSBMYXVyYSBBYmJvdHQgPGxh
YmJvdHRAcmVkaGF0LmNvbT4KCkNjOiBCZW5qYW1pbiBHYWlnbmFyZCA8YmVuamFtaW4uZ2FpZ25h
cmRAbGluYXJvLm9yZz4KQ2M6IFN1bWl0IFNlbXdhbCA8c3VtaXQuc2Vtd2FsQGxpbmFyby5vcmc+
CkNjOiBMaWFtIE1hcmsgPGxtYXJrQGNvZGVhdXJvcmEub3JnPgpDYzogUHJhdGlrIFBhdGVsIDxw
cmF0aWtwQGNvZGVhdXJvcmEub3JnPgpDYzogQnJpYW4gU3RhcmtleSA8QnJpYW4uU3RhcmtleUBh
cm0uY29tPgpDYzogVmluY2VudCBEb25uZWZvcnQgPFZpbmNlbnQuRG9ubmVmb3J0QGFybS5jb20+
CkNjOiBTdWRpcHRvIFBhdWwgPFN1ZGlwdG8uUGF1bEBhcm0uY29tPgpDYzogQW5kcmV3IEYuIERh
dmlzIDxhZmRAdGkuY29tPgpDYzogQ2hyaXN0b3BoIEhlbGx3aWcgPGhjaEBpbmZyYWRlYWQub3Jn
PgpDYzogQ2hlbmJvIEZlbmcgPGZlbmdjQGdvb2dsZS5jb20+CkNjOiBBbGlzdGFpciBTdHJhY2hh
biA8YXN0cmFjaGFuQGdvb2dsZS5jb20+CkNjOiBIcmlkeWEgVmFsc2FyYWp1IDxocmlkeWFAZ29v
Z2xlLmNvbT4KQ2M6IEhpbGxmIERhbnRvbiA8aGRhbnRvbkBzaW5hLmNvbT4KQ2M6IGRyaS1kZXZl
bEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKUmV2aWV3ZWQtYnk6IEJlbmphbWluIEdhaWduYXJkIDxi
ZW5qYW1pbi5nYWlnbmFyZEBsaW5hcm8ub3JnPgpBY2tlZC1ieTogTGF1cmEgQWJib3R0IDxsYWJi
b3R0QHJlZGhhdC5jb20+ClRlc3RlZC1ieTogQXlhbiBLdW1hciBIYWxkZXIgPGF5YW4uaGFsZGVy
QGFybS5jb20+ClNpZ25lZC1vZmYtYnk6IEpvaG4gU3R1bHR6IDxqb2huLnN0dWx0ekBsaW5hcm8u
b3JnPgotLS0KdjI6CiogU3dpdGNoZWQgdG8gdXNlIHJld29ya2VkIGRtYS1oZWFwIGFwaXMKdjM6
CiogQWRkIHNpbXBsZSBtbWFwCiogVXRpbGl6ZSBkbWEtYnVmIHRlc3RkZXYgdG8gdGVzdCBpbXBv
cnRpbmcKdjQ6CiogUmV3b3JrIHRvIHVzZSB2Z2VtCiogUGFzcyBpbiBmZF9mbGFncyB0byBtYXRj
aCBpbnRlcmZhY2UgY2hhbmdlcwoqIFNraXAgLiBhbmQgLi4gZGlycwp2NjoKKiBOdW1iZXIgb2Yg
c3R5bGUvY2xlYW51cHMgc3VnZ2VzdGVkIGJ5IEJyaWFuCnY3OgoqIFdoaXRlc3BhY2UgZml4dXAg
Zm9yIGNoZWNrcGF0Y2gKdjg6CiogTW9yZSBjaGVja3BhdGNoIHdoaXRlc3BhY2UgZml4dXBzCnY5
OgoqIEJldHRlciBoYW5kbGluZyBlcnJvciByZXR1cm5zIG91dCB0byBtYWluLCBzdWdnZXN0ZWQK
ICBieSBCcmlhbiBTdGFya2V5CiogU3dpdGNoIHRvIHVzaW5nIHNucHJpbnRmLCBzdWdnZXN0ZWQg
YnkgQnJpYW4KLS0tCiB0b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9kbWFidWYtaGVhcHMvTWFrZWZp
bGUgfCAgIDkgKwogLi4uL3NlbGZ0ZXN0cy9kbWFidWYtaGVhcHMvZG1hYnVmLWhlYXAuYyAgICAg
IHwgMjM4ICsrKysrKysrKysrKysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCAyNDcgaW5zZXJ0aW9u
cygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IHRvb2xzL3Rlc3Rpbmcvc2VsZnRlc3RzL2RtYWJ1Zi1o
ZWFwcy9NYWtlZmlsZQogY3JlYXRlIG1vZGUgMTAwNjQ0IHRvb2xzL3Rlc3Rpbmcvc2VsZnRlc3Rz
L2RtYWJ1Zi1oZWFwcy9kbWFidWYtaGVhcC5jCgpkaWZmIC0tZ2l0IGEvdG9vbHMvdGVzdGluZy9z
ZWxmdGVzdHMvZG1hYnVmLWhlYXBzL01ha2VmaWxlIGIvdG9vbHMvdGVzdGluZy9zZWxmdGVzdHMv
ZG1hYnVmLWhlYXBzL01ha2VmaWxlCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAw
MDAwMC4uOGM0YzM2ZTI5NzJkCi0tLSAvZGV2L251bGwKKysrIGIvdG9vbHMvdGVzdGluZy9zZWxm
dGVzdHMvZG1hYnVmLWhlYXBzL01ha2VmaWxlCkBAIC0wLDAgKzEsOSBAQAorIyBTUERYLUxpY2Vu
c2UtSWRlbnRpZmllcjogR1BMLTIuMAorQ0ZMQUdTICs9IC1zdGF0aWMgLU8zIC1XbCwtbm8tYXMt
bmVlZGVkIC1XYWxsCisjTERMSUJTICs9IC1scnQgLWxwdGhyZWFkIC1sbQorCisjIHRoZXNlIGFy
ZSBhbGwgInNhZmUiIHRlc3RzIHRoYXQgZG9uJ3QgbW9kaWZ5CisjIHN5c3RlbSB0aW1lIG9yIHJl
cXVpcmUgZXNjYWxhdGVkIHByaXZpbGVnZXMKK1RFU1RfR0VOX1BST0dTID0gZG1hYnVmLWhlYXAK
KworaW5jbHVkZSAuLi9saWIubWsKZGlmZiAtLWdpdCBhL3Rvb2xzL3Rlc3Rpbmcvc2VsZnRlc3Rz
L2RtYWJ1Zi1oZWFwcy9kbWFidWYtaGVhcC5jIGIvdG9vbHMvdGVzdGluZy9zZWxmdGVzdHMvZG1h
YnVmLWhlYXBzL2RtYWJ1Zi1oZWFwLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MDAwMDAwLi5iMzZkZDlmMzVjMTkKLS0tIC9kZXYvbnVsbAorKysgYi90b29scy90ZXN0aW5nL3Nl
bGZ0ZXN0cy9kbWFidWYtaGVhcHMvZG1hYnVmLWhlYXAuYwpAQCAtMCwwICsxLDIzOCBAQAorLy8g
U1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKKworI2luY2x1ZGUgPGRpcmVudC5oPgor
I2luY2x1ZGUgPGVycm5vLmg+CisjaW5jbHVkZSA8ZmNudGwuaD4KKyNpbmNsdWRlIDxzdGRpby5o
PgorI2luY2x1ZGUgPHN0ZGxpYi5oPgorI2luY2x1ZGUgPHN0ZGludC5oPgorI2luY2x1ZGUgPHN0
cmluZy5oPgorI2luY2x1ZGUgPHVuaXN0ZC5oPgorI2luY2x1ZGUgPHN5cy9pb2N0bC5oPgorI2lu
Y2x1ZGUgPHN5cy9tbWFuLmg+CisjaW5jbHVkZSA8c3lzL3R5cGVzLmg+CisKKyNpbmNsdWRlIDxs
aW51eC9kbWEtYnVmLmg+CisjaW5jbHVkZSA8ZHJtL2RybS5oPgorCisjaW5jbHVkZSAiLi4vLi4v
Li4vLi4vaW5jbHVkZS91YXBpL2xpbnV4L2RtYS1oZWFwLmgiCisKKyNkZWZpbmUgREVWUEFUSCAi
L2Rldi9kbWFfaGVhcCIKKworc3RhdGljIGludCBjaGVja192Z2VtKGludCBmZCkKK3sKKwlkcm1f
dmVyc2lvbl90IHZlcnNpb24gPSB7IDAgfTsKKwljaGFyIG5hbWVbNV07CisJaW50IHJldDsKKwor
CXZlcnNpb24ubmFtZV9sZW4gPSA0OworCXZlcnNpb24ubmFtZSA9IG5hbWU7CisKKwlyZXQgPSBp
b2N0bChmZCwgRFJNX0lPQ1RMX1ZFUlNJT04sICZ2ZXJzaW9uKTsKKwlpZiAocmV0KQorCQlyZXR1
cm4gMDsKKworCXJldHVybiAhc3RyY21wKG5hbWUsICJ2Z2VtIik7Cit9CisKK3N0YXRpYyBpbnQg
b3Blbl92Z2VtKHZvaWQpCit7CisJaW50IGksIGZkOworCWNvbnN0IGNoYXIgKmRybXN0ciA9ICIv
ZGV2L2RyaS9jYXJkIjsKKworCWZkID0gLTE7CisJZm9yIChpID0gMDsgaSA8IDE2OyBpKyspIHsK
KwkJY2hhciBuYW1lWzgwXTsKKworCQlzbnByaW50ZihuYW1lLCA4MCwgIiVzJXUiLCBkcm1zdHIs
IGkpOworCisJCWZkID0gb3BlbihuYW1lLCBPX1JEV1IpOworCQlpZiAoZmQgPCAwKQorCQkJY29u
dGludWU7CisKKwkJaWYgKCFjaGVja192Z2VtKGZkKSkgeworCQkJY2xvc2UoZmQpOworCQkJZmQg
PSAtMTsKKwkJCWNvbnRpbnVlOworCQl9IGVsc2UgeworCQkJYnJlYWs7CisJCX0KKwl9CisJcmV0
dXJuIGZkOworfQorCitzdGF0aWMgaW50IGltcG9ydF92Z2VtX2ZkKGludCB2Z2VtX2ZkLCBpbnQg
ZG1hX2J1Zl9mZCwgdWludDMyX3QgKmhhbmRsZSkKK3sKKwlzdHJ1Y3QgZHJtX3ByaW1lX2hhbmRs
ZSBpbXBvcnRfaGFuZGxlID0geworCQkuZmQgPSBkbWFfYnVmX2ZkLAorCQkuZmxhZ3MgPSAwLAor
CQkuaGFuZGxlID0gMCwKKwkgfTsKKwlpbnQgcmV0OworCisJcmV0ID0gaW9jdGwodmdlbV9mZCwg
RFJNX0lPQ1RMX1BSSU1FX0ZEX1RPX0hBTkRMRSwgJmltcG9ydF9oYW5kbGUpOworCWlmIChyZXQg
PT0gMCkKKwkJKmhhbmRsZSA9IGltcG9ydF9oYW5kbGUuaGFuZGxlOworCXJldHVybiByZXQ7Cit9
CisKK3N0YXRpYyB2b2lkIGNsb3NlX2hhbmRsZShpbnQgdmdlbV9mZCwgdWludDMyX3QgaGFuZGxl
KQoreworCXN0cnVjdCBkcm1fZ2VtX2Nsb3NlIGNsb3NlID0geworCQkuaGFuZGxlID0gaGFuZGxl
LAorCX07CisKKwlpb2N0bCh2Z2VtX2ZkLCBEUk1fSU9DVExfR0VNX0NMT1NFLCAmY2xvc2UpOwor
fQorCitzdGF0aWMgaW50IGRtYWJ1Zl9oZWFwX29wZW4oY2hhciAqbmFtZSkKK3sKKwlpbnQgcmV0
LCBmZDsKKwljaGFyIGJ1ZlsyNTZdOworCisJcmV0ID0gc25wcmludGYoYnVmLCAyNTYsICIlcy8l
cyIsIERFVlBBVEgsIG5hbWUpOworCWlmIChyZXQgPCAwKSB7CisJCXByaW50Zigic25wcmludGYg
ZmFpbGVkIVxuIik7CisJCXJldHVybiByZXQ7CisJfQorCisJZmQgPSBvcGVuKGJ1ZiwgT19SRFdS
KTsKKwlpZiAoZmQgPCAwKQorCQlwcmludGYoIm9wZW4gJXMgZmFpbGVkIVxuIiwgYnVmKTsKKwly
ZXR1cm4gZmQ7Cit9CisKK3N0YXRpYyBpbnQgZG1hYnVmX2hlYXBfYWxsb2MoaW50IGZkLCBzaXpl
X3QgbGVuLCB1bnNpZ25lZCBpbnQgZmxhZ3MsCisJCQkgICAgIGludCAqZG1hYnVmX2ZkKQorewor
CXN0cnVjdCBkbWFfaGVhcF9hbGxvY2F0aW9uX2RhdGEgZGF0YSA9IHsKKwkJLmxlbiA9IGxlbiwK
KwkJLmZkX2ZsYWdzID0gT19SRFdSIHwgT19DTE9FWEVDLAorCQkuaGVhcF9mbGFncyA9IGZsYWdz
LAorCX07CisJaW50IHJldDsKKworCWlmICghZG1hYnVmX2ZkKQorCQlyZXR1cm4gLUVJTlZBTDsK
KworCXJldCA9IGlvY3RsKGZkLCBETUFfSEVBUF9JT0NfQUxMT0MsICZkYXRhKTsKKwlpZiAocmV0
IDwgMCkKKwkJcmV0dXJuIHJldDsKKwkqZG1hYnVmX2ZkID0gKGludClkYXRhLmZkOworCXJldHVy
biByZXQ7Cit9CisKK3N0YXRpYyB2b2lkIGRtYWJ1Zl9zeW5jKGludCBmZCwgaW50IHN0YXJ0X3N0
b3ApCit7CisJc3RydWN0IGRtYV9idWZfc3luYyBzeW5jID0geworCQkuZmxhZ3MgPSBzdGFydF9z
dG9wIHwgRE1BX0JVRl9TWU5DX1JXLAorCX07CisJaW50IHJldDsKKworCXJldCA9IGlvY3RsKGZk
LCBETUFfQlVGX0lPQ1RMX1NZTkMsICZzeW5jKTsKKwlpZiAocmV0KQorCQlwcmludGYoInN5bmMg
ZmFpbGVkICVkXG4iLCBlcnJubyk7Cit9CisKKyNkZWZpbmUgT05FX01FRyAoMTAyNCAqIDEwMjQp
CisKK3N0YXRpYyBpbnQgZG9fdGVzdChjaGFyICpoZWFwX25hbWUpCit7CisJaW50IGhlYXBfZmQg
PSAtMSwgZG1hYnVmX2ZkID0gLTEsIGltcG9ydGVyX2ZkID0gLTE7CisJdWludDMyX3QgaGFuZGxl
ID0gMDsKKwl2b2lkICpwID0gTlVMTDsKKwlpbnQgcmV0OworCisJcHJpbnRmKCJUZXN0aW5nIGhl
YXA6ICVzXG4iLCBoZWFwX25hbWUpOworCisJaGVhcF9mZCA9IGRtYWJ1Zl9oZWFwX29wZW4oaGVh
cF9uYW1lKTsKKwlpZiAoaGVhcF9mZCA8IDApCisJCXJldHVybjsKKworCXByaW50ZigiQWxsb2Nh
dGluZyAxIE1FR1xuIik7CisJcmV0ID0gZG1hYnVmX2hlYXBfYWxsb2MoaGVhcF9mZCwgT05FX01F
RywgMCwgJmRtYWJ1Zl9mZCk7CisJaWYgKHJldCkgeworCQlwcmludGYoIkFsbG9jYXRpb24gRmFp
bGVkIVxuIik7CisJCXJldCA9IC0xOworCQlnb3RvIG91dDsKKwl9CisJLyogbW1hcCBhbmQgd3Jp
dGUgYSBzaW1wbGUgcGF0dGVybiAqLworCXAgPSBtbWFwKE5VTEwsCisJCSBPTkVfTUVHLAorCQkg
UFJPVF9SRUFEIHwgUFJPVF9XUklURSwKKwkJIE1BUF9TSEFSRUQsCisJCSBkbWFidWZfZmQsCisJ
CSAwKTsKKwlpZiAocCA9PSBNQVBfRkFJTEVEKSB7CisJCXByaW50ZigibW1hcCgpIGZhaWxlZDog
JW1cbiIpOworCQlyZXQgPSAtMTsKKwkJZ290byBvdXQ7CisJfQorCXByaW50ZigibW1hcCBwYXNz
ZWRcbiIpOworCisJZG1hYnVmX3N5bmMoZG1hYnVmX2ZkLCBETUFfQlVGX1NZTkNfU1RBUlQpOwor
CW1lbXNldChwLCAxLCBPTkVfTUVHIC8gMik7CisJbWVtc2V0KChjaGFyICopcCArIE9ORV9NRUcg
LyAyLCAwLCBPTkVfTUVHIC8gMik7CisJZG1hYnVmX3N5bmMoZG1hYnVmX2ZkLCBETUFfQlVGX1NZ
TkNfRU5EKTsKKworCWltcG9ydGVyX2ZkID0gb3Blbl92Z2VtKCk7CisJaWYgKGltcG9ydGVyX2Zk
IDwgMCkgeworCQlyZXQgPSBpbXBvcnRlcl9mZDsKKwkJcHJpbnRmKCJGYWlsZWQgdG8gb3BlbiB2
Z2VtXG4iKTsKKwkJZ290byBvdXQ7CisJfQorCisJcmV0ID0gaW1wb3J0X3ZnZW1fZmQoaW1wb3J0
ZXJfZmQsIGRtYWJ1Zl9mZCwgJmhhbmRsZSk7CisJaWYgKHJldCA8IDApIHsKKwkJcHJpbnRmKCJG
YWlsZWQgdG8gaW1wb3J0IGJ1ZmZlclxuIik7CisJCWdvdG8gb3V0OworCX0KKwlwcmludGYoImlt
cG9ydCBwYXNzZWRcbiIpOworCisJZG1hYnVmX3N5bmMoZG1hYnVmX2ZkLCBETUFfQlVGX1NZTkNf
U1RBUlQpOworCW1lbXNldChwLCAweGZmLCBPTkVfTUVHKTsKKwlkbWFidWZfc3luYyhkbWFidWZf
ZmQsIERNQV9CVUZfU1lOQ19FTkQpOworCXByaW50Zigic3luY3MgcGFzc2VkXG4iKTsKKworCWNs
b3NlX2hhbmRsZShpbXBvcnRlcl9mZCwgaGFuZGxlKTsKKwlyZXQgPSAwOworCitvdXQ6CisJaWYg
KHApCisJCW11bm1hcChwLCBPTkVfTUVHKTsKKwlpZiAoaW1wb3J0ZXJfZmQgPj0gMCkKKwkJY2xv
c2UoaW1wb3J0ZXJfZmQpOworCWlmIChkbWFidWZfZmQgPj0gMCkKKwkJY2xvc2UoZG1hYnVmX2Zk
KTsKKwlpZiAoaGVhcF9mZCA+PSAwKQorCQljbG9zZShoZWFwX2ZkKTsKKworCXJldHVybiByZXQ7
Cit9CisKK2ludCBtYWluKHZvaWQpCit7CisJRElSICpkOworCXN0cnVjdCBkaXJlbnQgKmRpcjsK
KwlpbnQgcmV0ID0gLTE7CisKKwlkID0gb3BlbmRpcihERVZQQVRIKTsKKwlpZiAoIWQpIHsKKwkJ
cHJpbnRmKCJObyAlcyBkaXJlY3Rvcnk/XG4iLCBERVZQQVRIKTsKKwkJcmV0dXJuIC0xOworCX0K
KworCXdoaWxlICgoZGlyID0gcmVhZGRpcihkKSkgIT0gTlVMTCkgeworCQlpZiAoIXN0cm5jbXAo
ZGlyLT5kX25hbWUsICIuIiwgMikpCisJCQljb250aW51ZTsKKwkJaWYgKCFzdHJuY21wKGRpci0+
ZF9uYW1lLCAiLi4iLCAzKSkKKwkJCWNvbnRpbnVlOworCisJCXJldCA9IGRvX3Rlc3QoZGlyLT5k
X25hbWUpOworCQlpZiAocmV0KQorCQkJYnJlYWs7CisJfQorCWNsb3NlZGlyKGQpOworCisJcmV0
dXJuIHJldDsKK30KLS0gCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZHJpLWRldmVs
