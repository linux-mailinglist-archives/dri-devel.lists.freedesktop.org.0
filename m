Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 52E3C9BA3F
	for <lists+dri-devel@lfdr.de>; Sat, 24 Aug 2019 03:35:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C36F36ED8A;
	Sat, 24 Aug 2019 01:35:07 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x649.google.com (mail-pl1-x649.google.com
 [IPv6:2607:f8b0:4864:20::649])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 399636ED88
 for <dri-devel@lists.freedesktop.org>; Sat, 24 Aug 2019 01:35:06 +0000 (UTC)
Received: by mail-pl1-x649.google.com with SMTP id b30so6842979pla.16
 for <dri-devel@lists.freedesktop.org>; Fri, 23 Aug 2019 18:35:06 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=ulHowcsKKayn8B4mj/SyyT5xQWUvfDuxH1TL1xLD/2Y=;
 b=pEwrbihUji60wpu5Afe2ceneCro4QZil0O5aHad9GkPdHTKXs9aY+VS5roxYopXzLs
 tXePZy+mcm+yvBGzP9yZBEgtz1FuAp7LJGqH7uR/P7hAiDqAEdhQ256NpyPVsRtEbyFo
 cq0Cq19tqq1BPwaaM23jueHvPb/+0PnSLm8EPyglxgYMhpG7xSj0JfsVYHkKA6fRiwaZ
 yu5huoqHtfl6qgaaThoc8N14udLmWD8kb6+k2PcAjr2gW0lUFzMif83wEgsKXSYTpkhV
 3ZaxJ3f8zT7zihk++VVjnDin4s4b+8GR52JxdVdvRsQOKcEeiwcWCaFbOL+rncXqHHm5
 zhjw==
X-Gm-Message-State: APjAAAVvz5HPJt1uv5kHfBMDoFyyhllCznIJxdqJ64ogmKdcon+RJ35i
 N6rOeuyE6WQbP7SYMv9mseYb5dQwJIiXUV+DobxGMw==
X-Google-Smtp-Source: APXvYqyGsM+5ZN6uJfL+jbmuthfk8OmxQn95Yq1C1e1OAfoFr+p9tdItZgmZ5t5/yo3FJIf3vHf/5kZnBkuTqFaSKDNbzA==
X-Received: by 2002:a63:7887:: with SMTP id t129mr6405930pgc.309.1566610503564; 
 Fri, 23 Aug 2019 18:35:03 -0700 (PDT)
Date: Fri, 23 Aug 2019 18:34:17 -0700
In-Reply-To: <20190824013425.175645-1-brendanhiggins@google.com>
Message-Id: <20190824013425.175645-11-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190824013425.175645-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.23.0.187.g17f5b7556c-goog
Subject: [PATCH v15 10/18] kunit: test: add tests for kunit test abort
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=ulHowcsKKayn8B4mj/SyyT5xQWUvfDuxH1TL1xLD/2Y=;
 b=CknHD1qyFbo3o8XvjIao54U4tvc1OLwqGrl7RLIRkoj0D4q4eNqCp3H7wsPuv7Muwk
 62SfNYB9xfEx0vYIBx1jrv7yOns9F1dWdMO8zQ7D0g0uqdrkqg+TzhbwmqeNM/AyikCJ
 WYxy2+740efHXNwH/0JTqv5Z9Z6tnCdgWDwY1LcyM7QE/ZsSx2053N31lWGLxQrvMcsL
 CauDFSqyaDjOnl1vtj8gjgP426Xg4aJhmgilcEpW8hz9R6/UtwxMoKceV57EK4pB1sk0
 W2/TkTyJ9/N426K1DTMsNgp0K9AKtuS0yeo95U2hWvtsK6577JWKmq2+L4f0ELi3AH4D
 T7cg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIEtVbml0IHRlc3RzIGZvciB0aGUgS1VuaXQgdGVzdCBhYm9ydCBtZWNoYW5pc20gKHNlZSBw
cmVjZWRpbmcKY29tbWl0KS4gQWRkIHRlc3RzIGJvdGggZm9yIGdlbmVyYWwgdHJ5IGNhdGNoIG1l
Y2hhbmlzbSBhcyB3ZWxsIGFzCm5vbi1hcmNoaXRlY3R1cmUgc3BlY2lmaWMgbWVjaGFuaXNtLgoK
U2lnbmVkLW9mZi1ieTogQnJlbmRhbiBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29t
PgpSZXZpZXdlZC1ieTogR3JlZyBLcm9haC1IYXJ0bWFuIDxncmVna2hAbGludXhmb3VuZGF0aW9u
Lm9yZz4KUmV2aWV3ZWQtYnk6IExvZ2FuIEd1bnRob3JwZSA8bG9nYW5nQGRlbHRhdGVlLmNvbT4K
UmV2aWV3ZWQtYnk6IFN0ZXBoZW4gQm95ZCA8c2JveWRAa2VybmVsLm9yZz4KLS0tCiBrdW5pdC9N
YWtlZmlsZSAgICB8ICAgMyArLQoga3VuaXQvdGVzdC10ZXN0LmMgfCAxMDYgKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCAxMDgg
aW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGt1bml0L3Rl
c3QtdGVzdC5jCgpkaWZmIC0tZ2l0IGEva3VuaXQvTWFrZWZpbGUgYi9rdW5pdC9NYWtlZmlsZQpp
bmRleCBjOTE3NmM5YzU3OGMuLjc2OWQ5NDAyYjVkMyAxMDA2NDQKLS0tIGEva3VuaXQvTWFrZWZp
bGUKKysrIGIva3VuaXQvTWFrZWZpbGUKQEAgLTMsNiArMyw3IEBAIG9iai0kKENPTkZJR19LVU5J
VCkgKz0JCQl0ZXN0Lm8gXAogCQkJCQlhc3NlcnQubyBcCiAJCQkJCXRyeS1jYXRjaC5vCiAKLW9i
ai0kKENPTkZJR19LVU5JVF9URVNUKSArPQkJc3RyaW5nLXN0cmVhbS10ZXN0Lm8KK29iai0kKENP
TkZJR19LVU5JVF9URVNUKSArPQkJdGVzdC10ZXN0Lm8gXAorCQkJCQlzdHJpbmctc3RyZWFtLXRl
c3QubwogCiBvYmotJChDT05GSUdfS1VOSVRfRVhBTVBMRV9URVNUKSArPQlleGFtcGxlLXRlc3Qu
bwpkaWZmIC0tZ2l0IGEva3VuaXQvdGVzdC10ZXN0LmMgYi9rdW5pdC90ZXN0LXRlc3QuYwpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjA2ZDM0ZDM2YjEwMwotLS0gL2Rl
di9udWxsCisrKyBiL2t1bml0L3Rlc3QtdGVzdC5jCkBAIC0wLDAgKzEsMTA2IEBACisvLyBTUERY
LUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMAorLyoKKyAqIEtVbml0IHRlc3QgZm9yIGNvcmUg
dGVzdCBpbmZyYXN0cnVjdHVyZS4KKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMTksIEdvb2dsZSBM
TEMuCisgKiBBdXRob3I6IEJyZW5kYW4gSGlnZ2lucyA8YnJlbmRhbmhpZ2dpbnNAZ29vZ2xlLmNv
bT4KKyAqLworI2luY2x1ZGUgPGt1bml0L3Rlc3QuaD4KKworc3RydWN0IGt1bml0X3RyeV9jYXRj
aF90ZXN0X2NvbnRleHQgeworCXN0cnVjdCBrdW5pdF90cnlfY2F0Y2ggKnRyeV9jYXRjaDsKKwli
b29sIGZ1bmN0aW9uX2NhbGxlZDsKK307CisKK3N0YXRpYyB2b2lkIGt1bml0X3Rlc3Rfc3VjY2Vz
c2Z1bF90cnkodm9pZCAqZGF0YSkKK3sKKwlzdHJ1Y3Qga3VuaXQgKnRlc3QgPSBkYXRhOworCXN0
cnVjdCBrdW5pdF90cnlfY2F0Y2hfdGVzdF9jb250ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCisJ
Y3R4LT5mdW5jdGlvbl9jYWxsZWQgPSB0cnVlOworfQorCitzdGF0aWMgdm9pZCBrdW5pdF90ZXN0
X25vX2NhdGNoKHZvaWQgKmRhdGEpCit7CisJc3RydWN0IGt1bml0ICp0ZXN0ID0gZGF0YTsKKwor
CUtVTklUX0ZBSUwodGVzdCwgIkNhdGNoIHNob3VsZCBub3QgYmUgY2FsbGVkXG4iKTsKK30KKwor
c3RhdGljIHZvaWQga3VuaXRfdGVzdF90cnlfY2F0Y2hfc3VjY2Vzc2Z1bF90cnlfbm9fY2F0Y2go
c3RydWN0IGt1bml0ICp0ZXN0KQoreworCXN0cnVjdCBrdW5pdF90cnlfY2F0Y2hfdGVzdF9jb250
ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF90cnlfY2F0Y2ggKnRyeV9jYXRj
aCA9IGN0eC0+dHJ5X2NhdGNoOworCisJa3VuaXRfdHJ5X2NhdGNoX2luaXQodHJ5X2NhdGNoLAor
CQkJICAgICB0ZXN0LAorCQkJICAgICBrdW5pdF90ZXN0X3N1Y2Nlc3NmdWxfdHJ5LAorCQkJICAg
ICBrdW5pdF90ZXN0X25vX2NhdGNoKTsKKwlrdW5pdF90cnlfY2F0Y2hfcnVuKHRyeV9jYXRjaCwg
dGVzdCk7CisKKwlLVU5JVF9FWFBFQ1RfVFJVRSh0ZXN0LCBjdHgtPmZ1bmN0aW9uX2NhbGxlZCk7
Cit9CisKK3N0YXRpYyB2b2lkIGt1bml0X3Rlc3RfdW5zdWNjZXNzZnVsX3RyeSh2b2lkICpkYXRh
KQoreworCXN0cnVjdCBrdW5pdCAqdGVzdCA9IGRhdGE7CisJc3RydWN0IGt1bml0X3RyeV9jYXRj
aF90ZXN0X2NvbnRleHQgKmN0eCA9IHRlc3QtPnByaXY7CisJc3RydWN0IGt1bml0X3RyeV9jYXRj
aCAqdHJ5X2NhdGNoID0gY3R4LT50cnlfY2F0Y2g7CisKKwlrdW5pdF90cnlfY2F0Y2hfdGhyb3co
dHJ5X2NhdGNoKTsKKwlLVU5JVF9GQUlMKHRlc3QsICJUaGlzIGxpbmUgc2hvdWxkIG5ldmVyIGJl
IHJlYWNoZWRcbiIpOworfQorCitzdGF0aWMgdm9pZCBrdW5pdF90ZXN0X2NhdGNoKHZvaWQgKmRh
dGEpCit7CisJc3RydWN0IGt1bml0ICp0ZXN0ID0gZGF0YTsKKwlzdHJ1Y3Qga3VuaXRfdHJ5X2Nh
dGNoX3Rlc3RfY29udGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsKKworCWN0eC0+ZnVuY3Rpb25fY2Fs
bGVkID0gdHJ1ZTsKK30KKworc3RhdGljIHZvaWQga3VuaXRfdGVzdF90cnlfY2F0Y2hfdW5zdWNj
ZXNzZnVsX3RyeV9kb2VzX2NhdGNoKHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3Vu
aXRfdHJ5X2NhdGNoX3Rlc3RfY29udGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsKKwlzdHJ1Y3Qga3Vu
aXRfdHJ5X2NhdGNoICp0cnlfY2F0Y2ggPSBjdHgtPnRyeV9jYXRjaDsKKworCWt1bml0X3RyeV9j
YXRjaF9pbml0KHRyeV9jYXRjaCwKKwkJCSAgICAgdGVzdCwKKwkJCSAgICAga3VuaXRfdGVzdF91
bnN1Y2Nlc3NmdWxfdHJ5LAorCQkJICAgICBrdW5pdF90ZXN0X2NhdGNoKTsKKwlrdW5pdF90cnlf
Y2F0Y2hfcnVuKHRyeV9jYXRjaCwgdGVzdCk7CisKKwlLVU5JVF9FWFBFQ1RfVFJVRSh0ZXN0LCBj
dHgtPmZ1bmN0aW9uX2NhbGxlZCk7Cit9CisKK3N0YXRpYyBpbnQga3VuaXRfdHJ5X2NhdGNoX3Rl
c3RfaW5pdChzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0IGt1bml0X3RyeV9jYXRjaF90
ZXN0X2NvbnRleHQgKmN0eDsKKworCWN0eCA9IGt1bml0X2t6YWxsb2ModGVzdCwgc2l6ZW9mKCpj
dHgpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIWN0eCkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwl0ZXN0
LT5wcml2ID0gY3R4OworCisJY3R4LT50cnlfY2F0Y2ggPSBrdW5pdF9rbWFsbG9jKHRlc3QsCisJ
CQkJICAgICAgIHNpemVvZigqY3R4LT50cnlfY2F0Y2gpLAorCQkJCSAgICAgICBHRlBfS0VSTkVM
KTsKKwlpZiAoIWN0eC0+dHJ5X2NhdGNoKQorCQlyZXR1cm4gLUVOT01FTTsKKworCXJldHVybiAw
OworfQorCitzdGF0aWMgc3RydWN0IGt1bml0X2Nhc2Uga3VuaXRfdHJ5X2NhdGNoX3Rlc3RfY2Fz
ZXNbXSA9IHsKKwlLVU5JVF9DQVNFKGt1bml0X3Rlc3RfdHJ5X2NhdGNoX3N1Y2Nlc3NmdWxfdHJ5
X25vX2NhdGNoKSwKKwlLVU5JVF9DQVNFKGt1bml0X3Rlc3RfdHJ5X2NhdGNoX3Vuc3VjY2Vzc2Z1
bF90cnlfZG9lc19jYXRjaCksCisJe30KK307CisKK3N0YXRpYyBzdHJ1Y3Qga3VuaXRfc3VpdGUg
a3VuaXRfdHJ5X2NhdGNoX3Rlc3Rfc3VpdGUgPSB7CisJLm5hbWUgPSAia3VuaXQtdHJ5LWNhdGNo
LXRlc3QiLAorCS5pbml0ID0ga3VuaXRfdHJ5X2NhdGNoX3Rlc3RfaW5pdCwKKwkudGVzdF9jYXNl
cyA9IGt1bml0X3RyeV9jYXRjaF90ZXN0X2Nhc2VzLAorfTsKK2t1bml0X3Rlc3Rfc3VpdGUoa3Vu
aXRfdHJ5X2NhdGNoX3Rlc3Rfc3VpdGUpOwotLSAKMi4yMy4wLjE4Ny5nMTdmNWI3NTU2Yy1nb29n
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2
ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
