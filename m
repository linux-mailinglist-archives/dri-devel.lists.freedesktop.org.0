Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 04637114D63
	for <lists+dri-devel@lfdr.de>; Fri,  6 Dec 2019 09:18:09 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 054F56EB9B;
	Fri,  6 Dec 2019 08:17:38 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x449.google.com (mail-pf1-x449.google.com
 [IPv6:2607:f8b0:4864:20::449])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C186B6F628
 for <dri-devel@lists.freedesktop.org>; Thu,  5 Dec 2019 09:33:53 +0000 (UTC)
Received: by mail-pf1-x449.google.com with SMTP id x21so1467759pfp.12
 for <dri-devel@lists.freedesktop.org>; Thu, 05 Dec 2019 01:33:53 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:message-id:mime-version:subject:from:to:cc;
 bh=/GeYmoG/7NTjUEQywAj5h8GTNVXMhkcKjW49aWwmapg=;
 b=OeMisyQCnsMzsomeRlRvQ0+X0enLMCS5rYWsY/mZVCZ/7ySHIprwuLhuZ/Tl+bIKiP
 j8H6MokOhcDiM9771R9Km4TpvaBRyfIAHpAVA8LI+IyaawaMmbkY9JL55eW6H83xML30
 SCO6pIj43v1Nv4TAuOQjELCqf5S4NIoQ22qFXxwGOZ3XLt8Ja38HHuplmbEf0BilWOAf
 CpqBwXCOxYvplvfeD2qoBR/h6d0IbT8fZyq/GAG/fRdXt0PS5svE9Ppm/B1/XlvtE362
 nsLm6vEo+7zwETxE3YLaphfzxH0IIzxeNPdjaGxDXvF0eT8RAuE1pGVJcYYs65dQk6bX
 0Kaw==
X-Gm-Message-State: APjAAAXKvDQaJ1kV0QqKE0e2it0aEdzAdiH6oDQzCXrHH3TDLgaVZ/RF
 h30EAtRIwpNblnc2I7SD372i4qbTCsh1
X-Google-Smtp-Source: APXvYqyMbucDTvmXO+Ism94/ePSQpmLD4kakLMlIRdv5Tb0gWalzptQSd57AQ27USS7/vtGtrgJRvc2UCwTd
X-Received: by 2002:a65:64c6:: with SMTP id t6mr8163936pgv.392.1575538433178; 
 Thu, 05 Dec 2019 01:33:53 -0800 (PST)
Date: Thu,  5 Dec 2019 01:33:44 -0800
Message-Id: <20191205093346.57930-1-rajatja@google.com>
Mime-Version: 1.0
X-Mailer: git-send-email 2.24.0.393.g34dc348eaf-goog
Subject: [PATCH v3 1/3] drm/i915: Move the code to populate ACPI device ID
 into intel_acpi
From: Rajat Jain <rajatja@google.com>
To: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Maxime Ripard <mripard@kernel.org>, 
 Sean Paul <sean@poorly.run>, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel@ffwll.ch>, 
 Jani Nikula <jani.nikula@linux.intel.com>, 
 Joonas Lahtinen <joonas.lahtinen@linux.intel.com>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>, 
 "=?UTF-8?q?Ville=20Syrj=C3=A4l=C3=A4?=" <ville.syrjala@linux.intel.com>,
 Chris Wilson <chris@chris-wilson.co.uk>, Imre Deak <imre.deak@intel.com>, 
 "=?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?=" <jose.souza@intel.com>,
 linux-kernel@vger.kernel.org, 
 dri-devel@lists.freedesktop.org, intel-gfx@lists.freedesktop.org, 
 gregkh@linuxfoundation.org, mathewk@google.com, 
 Daniel Thompson <daniel.thompson@linaro.org>, Jonathan Corbet <corbet@lwn.net>,
 Pavel Machek <pavel@denx.de>, seanpaul@google.com,
 Duncan Laurie <dlaurie@google.com>, 
 jsbarnes@google.com, Thierry Reding <thierry.reding@gmail.com>
X-Mailman-Approved-At: Fri, 06 Dec 2019 08:17:34 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:message-id:mime-version:subject:from:to:cc;
 bh=/GeYmoG/7NTjUEQywAj5h8GTNVXMhkcKjW49aWwmapg=;
 b=GVeyFUtNjdNhZHlRcdxKPZFBzen3f9qlvQtiuJtHRbNdYLYc5lWDqaEhujzKQx+kFQ
 kJs8Ggjbx0IX2R+EUGw3SthKYpdoMyWzGnd3DYn9FhnRuONpOgfzTH/NE48E/Pbq2ymO
 vdr39N8UK7falL+PInWvXEJVwnI+SyyMCEsEFFZ/qTymEqfYP1q8OJ8vsuffXhY5J1vf
 nHc4k+gKvtVkqOfwaGpuatpwh3lOxyg8cmUT4Ip6r3JZatOdLY2AyonDpPepMiFLxsvn
 Au3vQrhxWY/BUSh0770WBKLW4bcta7uEZhPNXnKkP2auOJD1rtSPEpIRkRVZBpi6Aop8
 KkEg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rajat Jain <rajatja@google.com>, rajatxjain@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TW92ZSB0aGUgY29kZSB0aGF0IHBvcHVsYXRlcyB0aGUgQUNQSSBkZXZpY2UgSUQgZm9yIGRldmlj
ZXMsIGludG8KbW9yZSBhcHByaXByaWF0ZSBpbnRlbF9hY3BpLmMuIFRoaXMgaXMgZG9uZSBpbiBw
cmVwYXJhdGlvbiBmb3IgbW9yZQp1c2VycyBvZiB0aGlzIGNvZGUgKGluIG5leHQgcGF0Y2gpLgoK
U2lnbmVkLW9mZi1ieTogUmFqYXQgSmFpbiA8cmFqYXRqYUBnb29nbGUuY29tPgotLS0KdjM6ICog
UmVuYW1lZCB0aGUgZnVuY3Rpb24gdG8gaW50ZWxfYWNwaV8qCiAgICAqIFVzZWQgZm9yd2FyZCBk
ZWNsYXJhdGlvbiBmb3Igc3RydWN0dXJlIGluc3RlYWQgb2YgaGVhZGVyIGZpbGUgaW5jbHVzaW9u
LgogICAgKiBGaXggYSB0eXBvCnYyOiB2MSBkb2Vzbid0IGV4aXN0LiBGb3VuZCBleGlzdGluZyBj
b2RlIGluIGk5MTUgZHJpdmVyIHRvIGFzc2lnbiB0aGUgQUNQSSBJRAogICAgd2hpY2ggaXMgd2hh
dCBJIHBsYW4gdG8gcmUtdXNlLgoKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
YWNwaS5jICAgICB8IDg5ICsrKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfYWNwaS5oICAgICB8ICA1ICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX29wcmVnaW9uLmMgfCA4MCArLS0tLS0tLS0tLS0tLS0tLQogMyBmaWxlcyBj
aGFuZ2VkLCA5OCBpbnNlcnRpb25zKCspLCA3NiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2FjcGkuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfYWNwaS5jCmluZGV4IDM0NTZkMzNmZWI0Ni4uZTIxZmIxNGQ1
ZTA3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2FjcGku
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2FjcGkuYwpAQCAtMTAs
NiArMTAsNyBAQAogCiAjaW5jbHVkZSAiaTkxNV9kcnYuaCIKICNpbmNsdWRlICJpbnRlbF9hY3Bp
LmgiCisjaW5jbHVkZSAiaW50ZWxfZGlzcGxheV90eXBlcy5oIgogCiAjZGVmaW5lIElOVEVMX0RT
TV9SRVZJU0lPTl9JRCAxIC8qIEZvciBDYWxwZWxsYSBhbnl3YXkuLi4gKi8KICNkZWZpbmUgSU5U
RUxfRFNNX0ZOX1BMQVRGT1JNX01VWF9JTkZPIDEgLyogTm8gYXJncyAqLwpAQCAtMTU2LDMgKzE1
Nyw5MSBAQCB2b2lkIGludGVsX3JlZ2lzdGVyX2RzbV9oYW5kbGVyKHZvaWQpCiB2b2lkIGludGVs
X3VucmVnaXN0ZXJfZHNtX2hhbmRsZXIodm9pZCkKIHsKIH0KKworLyoKKyAqIEFDUEkgU3BlY2lm
aWNhdGlvbiwgUmV2aXNpb24gNS4wLCBBcHBlbmRpeCBCLjMuMiBfRE9EIChFbnVtZXJhdGUgQWxs
IERldmljZXMKKyAqIEF0dGFjaGVkIHRvIHRoZSBEaXNwbGF5IEFkYXB0ZXIpLgorICovCisjZGVm
aW5lIEFDUElfRElTUExBWV9JTkRFWF9TSElGVAkJMAorI2RlZmluZSBBQ1BJX0RJU1BMQVlfSU5E
RVhfTUFTSwkJCSgweGYgPDwgMCkKKyNkZWZpbmUgQUNQSV9ESVNQTEFZX1BPUlRfQVRUQUNITUVO
VF9TSElGVAk0CisjZGVmaW5lIEFDUElfRElTUExBWV9QT1JUX0FUVEFDSE1FTlRfTUFTSwkoMHhm
IDw8IDQpCisjZGVmaW5lIEFDUElfRElTUExBWV9UWVBFX1NISUZUCQkJOAorI2RlZmluZSBBQ1BJ
X0RJU1BMQVlfVFlQRV9NQVNLCQkJKDB4ZiA8PCA4KQorI2RlZmluZSBBQ1BJX0RJU1BMQVlfVFlQ
RV9PVEhFUgkJCSgwIDw8IDgpCisjZGVmaW5lIEFDUElfRElTUExBWV9UWVBFX1ZHQQkJCSgxIDw8
IDgpCisjZGVmaW5lIEFDUElfRElTUExBWV9UWVBFX1RWCQkJKDIgPDwgOCkKKyNkZWZpbmUgQUNQ
SV9ESVNQTEFZX1RZUEVfRVhURVJOQUxfRElHSVRBTAkoMyA8PCA4KQorI2RlZmluZSBBQ1BJX0RJ
U1BMQVlfVFlQRV9JTlRFUk5BTF9ESUdJVEFMCSg0IDw8IDgpCisjZGVmaW5lIEFDUElfVkVORE9S
X1NQRUNJRklDX1NISUZUCQkxMgorI2RlZmluZSBBQ1BJX1ZFTkRPUl9TUEVDSUZJQ19NQVNLCQko
MHhmIDw8IDEyKQorI2RlZmluZSBBQ1BJX0JJT1NfQ0FOX0RFVEVDVAkJCSgxIDw8IDE2KQorI2Rl
ZmluZSBBQ1BJX0RFUEVORFNfT05fVkdBCQkJKDEgPDwgMTcpCisjZGVmaW5lIEFDUElfUElQRV9J
RF9TSElGVAkJCTE4CisjZGVmaW5lIEFDUElfUElQRV9JRF9NQVNLCQkJKDcgPDwgMTgpCisjZGVm
aW5lIEFDUElfREVWSUNFX0lEX1NDSEVNRQkJCSgxVUxMIDw8IDMxKQorCitzdGF0aWMgdTMyIGFj
cGlfZGlzcGxheV90eXBlKHN0cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKK3sKKwl1
MzIgZGlzcGxheV90eXBlOworCisJc3dpdGNoIChjb25uZWN0b3ItPmJhc2UuY29ubmVjdG9yX3R5
cGUpIHsKKwljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9WR0E6CisJY2FzZSBEUk1fTU9ERV9DT05O
RUNUT1JfRFZJQToKKwkJZGlzcGxheV90eXBlID0gQUNQSV9ESVNQTEFZX1RZUEVfVkdBOworCQli
cmVhazsKKwljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9Db21wb3NpdGU6CisJY2FzZSBEUk1fTU9E
RV9DT05ORUNUT1JfU1ZJREVPOgorCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0NvbXBvbmVudDoK
KwljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl85UGluRElOOgorCWNhc2UgRFJNX01PREVfQ09OTkVD
VE9SX1RWOgorCQlkaXNwbGF5X3R5cGUgPSBBQ1BJX0RJU1BMQVlfVFlQRV9UVjsKKwkJYnJlYWs7
CisJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfRFZJSToKKwljYXNlIERSTV9NT0RFX0NPTk5FQ1RP
Ul9EVklEOgorCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0Rpc3BsYXlQb3J0OgorCWNhc2UgRFJN
X01PREVfQ09OTkVDVE9SX0hETUlBOgorCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0hETUlCOgor
CQlkaXNwbGF5X3R5cGUgPSBBQ1BJX0RJU1BMQVlfVFlQRV9FWFRFUk5BTF9ESUdJVEFMOworCQli
cmVhazsKKwljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9MVkRTOgorCWNhc2UgRFJNX01PREVfQ09O
TkVDVE9SX2VEUDoKKwljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9EU0k6CisJCWRpc3BsYXlfdHlw
ZSA9IEFDUElfRElTUExBWV9UWVBFX0lOVEVSTkFMX0RJR0lUQUw7CisJCWJyZWFrOworCWNhc2Ug
RFJNX01PREVfQ09OTkVDVE9SX1Vua25vd246CisJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfVklS
VFVBTDoKKwkJZGlzcGxheV90eXBlID0gQUNQSV9ESVNQTEFZX1RZUEVfT1RIRVI7CisJCWJyZWFr
OworCWRlZmF1bHQ6CisJCU1JU1NJTkdfQ0FTRShjb25uZWN0b3ItPmJhc2UuY29ubmVjdG9yX3R5
cGUpOworCQlkaXNwbGF5X3R5cGUgPSBBQ1BJX0RJU1BMQVlfVFlQRV9PVEhFUjsKKwkJYnJlYWs7
CisJfQorCisJcmV0dXJuIGRpc3BsYXlfdHlwZTsKK30KKwordm9pZCBpbnRlbF9hY3BpX2Rldmlj
ZV9pZF91cGRhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQoreworCXN0cnVj
dCBkcm1fZGV2aWNlICpkcm1fZGV2ID0gJmRldl9wcml2LT5kcm07CisJc3RydWN0IGludGVsX2Nv
bm5lY3RvciAqY29ubmVjdG9yOworCXN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRlciBjb25u
X2l0ZXI7CisJdTggZGlzcGxheV9pbmRleFsxNl0gPSB7fTsKKworCS8qIFBvcHVsYXRlIHRoZSBB
Q1BJIElEcyBmb3IgYWxsIGNvbm5lY3RvcnMgZm9yIGEgZ2l2ZW4gZHJtX2RldmljZSAqLworCWRy
bV9jb25uZWN0b3JfbGlzdF9pdGVyX2JlZ2luKGRybV9kZXYsICZjb25uX2l0ZXIpOworCWZvcl9l
YWNoX2ludGVsX2Nvbm5lY3Rvcl9pdGVyKGNvbm5lY3RvciwgJmNvbm5faXRlcikgeworCQl1MzIg
ZGV2aWNlX2lkLCB0eXBlOworCisJCWRldmljZV9pZCA9IGFjcGlfZGlzcGxheV90eXBlKGNvbm5l
Y3Rvcik7CisKKwkJLyogVXNlIGRpc3BsYXkgdHlwZSBzcGVjaWZpYyBkaXNwbGF5IGluZGV4LiAq
LworCQl0eXBlID0gKGRldmljZV9pZCAmIEFDUElfRElTUExBWV9UWVBFX01BU0spCisJCQk+PiBB
Q1BJX0RJU1BMQVlfVFlQRV9TSElGVDsKKwkJZGV2aWNlX2lkIHw9IGRpc3BsYXlfaW5kZXhbdHlw
ZV0rKyA8PCBBQ1BJX0RJU1BMQVlfSU5ERVhfU0hJRlQ7CisKKwkJY29ubmVjdG9yLT5hY3BpX2Rl
dmljZV9pZCA9IGRldmljZV9pZDsKKwl9CisJZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZj
b25uX2l0ZXIpOworfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9hY3BpLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2FjcGkuaApp
bmRleCAxYzU3NmIzZmI3MTIuLmU4YjA2ODY2MWQyMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9hY3BpLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
ZGlzcGxheS9pbnRlbF9hY3BpLmgKQEAgLTYsMTIgKzYsMTcgQEAKICNpZm5kZWYgX19JTlRFTF9B
Q1BJX0hfXwogI2RlZmluZSBfX0lOVEVMX0FDUElfSF9fCiAKK3N0cnVjdCBkcm1faTkxNV9wcml2
YXRlOworCiAjaWZkZWYgQ09ORklHX0FDUEkKIHZvaWQgaW50ZWxfcmVnaXN0ZXJfZHNtX2hhbmRs
ZXIodm9pZCk7CiB2b2lkIGludGVsX3VucmVnaXN0ZXJfZHNtX2hhbmRsZXIodm9pZCk7Cit2b2lk
IGludGVsX2FjcGlfZGV2aWNlX2lkX3VwZGF0ZShzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkx
NSk7CiAjZWxzZQogc3RhdGljIGlubGluZSB2b2lkIGludGVsX3JlZ2lzdGVyX2RzbV9oYW5kbGVy
KHZvaWQpIHsgcmV0dXJuOyB9CiBzdGF0aWMgaW5saW5lIHZvaWQgaW50ZWxfdW5yZWdpc3Rlcl9k
c21faGFuZGxlcih2b2lkKSB7IHJldHVybjsgfQorc3RhdGljIGlubGluZQordm9pZCBpbnRlbF9h
Y3BpX2RldmljZV9pZF91cGRhdGUoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUpIHsgcmV0
dXJuOyB9CiAjZW5kaWYgLyogQ09ORklHX0FDUEkgKi8KIAogI2VuZGlmIC8qIF9fSU5URUxfQUNQ
SV9IX18gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxf
b3ByZWdpb24uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfb3ByZWdpb24u
YwppbmRleCA5NjlhZGU2MjM2OTEuLjY0MjIzODRmMTk5ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9vcHJlZ2lvbi5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2Rpc3BsYXkvaW50ZWxfb3ByZWdpb24uYwpAQCAtMzUsNiArMzUsNyBAQAogI2luY2x1
ZGUgImRpc3BsYXkvaW50ZWxfcGFuZWwuaCIKIAogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCisjaW5j
bHVkZSAiaW50ZWxfYWNwaS5oIgogI2luY2x1ZGUgImludGVsX2Rpc3BsYXlfdHlwZXMuaCIKICNp
bmNsdWRlICJpbnRlbF9vcHJlZ2lvbi5oIgogCkBAIC0yNDIsMjkgKzI0Myw2IEBAIHN0cnVjdCBv
cHJlZ2lvbl9hc2xlX2V4dCB7CiAjZGVmaW5lIFNXU0NJX1NCQ0JfUE9TVF9WQkVfUE0JCVNXU0NJ
X0ZVTkNUSU9OX0NPREUoU1dTQ0lfU0JDQiwgMTkpCiAjZGVmaW5lIFNXU0NJX1NCQ0JfRU5BQkxF
X0RJU0FCTEVfQVVESU8JU1dTQ0lfRlVOQ1RJT05fQ09ERShTV1NDSV9TQkNCLCAyMSkKIAotLyoK
LSAqIEFDUEkgU3BlY2lmaWNhdGlvbiwgUmV2aXNpb24gNS4wLCBBcHBlbmRpeCBCLjMuMiBfRE9E
IChFbnVtZXJhdGUgQWxsIERldmljZXMKLSAqIEF0dGFjaGVkIHRvIHRoZSBEaXNwbGF5IEFkYXB0
ZXIpLgotICovCi0jZGVmaW5lIEFDUElfRElTUExBWV9JTkRFWF9TSElGVAkJMAotI2RlZmluZSBB
Q1BJX0RJU1BMQVlfSU5ERVhfTUFTSwkJCSgweGYgPDwgMCkKLSNkZWZpbmUgQUNQSV9ESVNQTEFZ
X1BPUlRfQVRUQUNITUVOVF9TSElGVAk0Ci0jZGVmaW5lIEFDUElfRElTUExBWV9QT1JUX0FUVEFD
SE1FTlRfTUFTSwkoMHhmIDw8IDQpCi0jZGVmaW5lIEFDUElfRElTUExBWV9UWVBFX1NISUZUCQkJ
OAotI2RlZmluZSBBQ1BJX0RJU1BMQVlfVFlQRV9NQVNLCQkJKDB4ZiA8PCA4KQotI2RlZmluZSBB
Q1BJX0RJU1BMQVlfVFlQRV9PVEhFUgkJCSgwIDw8IDgpCi0jZGVmaW5lIEFDUElfRElTUExBWV9U
WVBFX1ZHQQkJCSgxIDw8IDgpCi0jZGVmaW5lIEFDUElfRElTUExBWV9UWVBFX1RWCQkJKDIgPDwg
OCkKLSNkZWZpbmUgQUNQSV9ESVNQTEFZX1RZUEVfRVhURVJOQUxfRElHSVRBTAkoMyA8PCA4KQot
I2RlZmluZSBBQ1BJX0RJU1BMQVlfVFlQRV9JTlRFUk5BTF9ESUdJVEFMCSg0IDw8IDgpCi0jZGVm
aW5lIEFDUElfVkVORE9SX1NQRUNJRklDX1NISUZUCQkxMgotI2RlZmluZSBBQ1BJX1ZFTkRPUl9T
UEVDSUZJQ19NQVNLCQkoMHhmIDw8IDEyKQotI2RlZmluZSBBQ1BJX0JJT1NfQ0FOX0RFVEVDVAkJ
CSgxIDw8IDE2KQotI2RlZmluZSBBQ1BJX0RFUEVORFNfT05fVkdBCQkJKDEgPDwgMTcpCi0jZGVm
aW5lIEFDUElfUElQRV9JRF9TSElGVAkJCTE4Ci0jZGVmaW5lIEFDUElfUElQRV9JRF9NQVNLCQkJ
KDcgPDwgMTgpCi0jZGVmaW5lIEFDUElfREVWSUNFX0lEX1NDSEVNRQkJCSgxIDw8IDMxKQotCiAj
ZGVmaW5lIE1BWF9EU0xQCTE1MDAKIAogc3RhdGljIGludCBzd3NjaShzdHJ1Y3QgZHJtX2k5MTVf
cHJpdmF0ZSAqZGV2X3ByaXYsCkBAIC02NjIsNTQgKzY0MCwxMiBAQCBzdGF0aWMgdm9pZCBzZXRf
ZGlkKHN0cnVjdCBpbnRlbF9vcHJlZ2lvbiAqb3ByZWdpb24sIGludCBpLCB1MzIgdmFsKQogCX0K
IH0KIAotc3RhdGljIHUzMiBhY3BpX2Rpc3BsYXlfdHlwZShzdHJ1Y3QgaW50ZWxfY29ubmVjdG9y
ICpjb25uZWN0b3IpCi17Ci0JdTMyIGRpc3BsYXlfdHlwZTsKLQotCXN3aXRjaCAoY29ubmVjdG9y
LT5iYXNlLmNvbm5lY3Rvcl90eXBlKSB7Ci0JY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfVkdBOgot
CWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0RWSUE6Ci0JCWRpc3BsYXlfdHlwZSA9IEFDUElfRElT
UExBWV9UWVBFX1ZHQTsKLQkJYnJlYWs7Ci0JY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfQ29tcG9z
aXRlOgotCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX1NWSURFTzoKLQljYXNlIERSTV9NT0RFX0NP
Tk5FQ1RPUl9Db21wb25lbnQ6Ci0JY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfOVBpbkRJTjoKLQlj
YXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9UVjoKLQkJZGlzcGxheV90eXBlID0gQUNQSV9ESVNQTEFZ
X1RZUEVfVFY7Ci0JCWJyZWFrOwotCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0RWSUk6Ci0JY2Fz
ZSBEUk1fTU9ERV9DT05ORUNUT1JfRFZJRDoKLQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9EaXNw
bGF5UG9ydDoKLQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9IRE1JQToKLQljYXNlIERSTV9NT0RF
X0NPTk5FQ1RPUl9IRE1JQjoKLQkJZGlzcGxheV90eXBlID0gQUNQSV9ESVNQTEFZX1RZUEVfRVhU
RVJOQUxfRElHSVRBTDsKLQkJYnJlYWs7Ci0JY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfTFZEUzoK
LQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9lRFA6Ci0JY2FzZSBEUk1fTU9ERV9DT05ORUNUT1Jf
RFNJOgotCQlkaXNwbGF5X3R5cGUgPSBBQ1BJX0RJU1BMQVlfVFlQRV9JTlRFUk5BTF9ESUdJVEFM
OwotCQlicmVhazsKLQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9Vbmtub3duOgotCWNhc2UgRFJN
X01PREVfQ09OTkVDVE9SX1ZJUlRVQUw6Ci0JCWRpc3BsYXlfdHlwZSA9IEFDUElfRElTUExBWV9U
WVBFX09USEVSOwotCQlicmVhazsKLQlkZWZhdWx0OgotCQlNSVNTSU5HX0NBU0UoY29ubmVjdG9y
LT5iYXNlLmNvbm5lY3Rvcl90eXBlKTsKLQkJZGlzcGxheV90eXBlID0gQUNQSV9ESVNQTEFZX1RZ
UEVfT1RIRVI7Ci0JCWJyZWFrOwotCX0KLQotCXJldHVybiBkaXNwbGF5X3R5cGU7Ci19Ci0KIHN0
YXRpYyB2b2lkIGludGVsX2RpZGxfb3V0cHV0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqZGV2
X3ByaXYpCiB7CiAJc3RydWN0IGludGVsX29wcmVnaW9uICpvcHJlZ2lvbiA9ICZkZXZfcHJpdi0+
b3ByZWdpb247CiAJc3RydWN0IGludGVsX2Nvbm5lY3RvciAqY29ubmVjdG9yOwogCXN0cnVjdCBk
cm1fY29ubmVjdG9yX2xpc3RfaXRlciBjb25uX2l0ZXI7CiAJaW50IGkgPSAwLCBtYXhfb3V0cHV0
czsKLQlpbnQgZGlzcGxheV9pbmRleFsxNl0gPSB7fTsKIAogCS8qCiAJICogSW4gdGhlb3J5LCBk
aWQyLCB0aGUgZXh0ZW5kZWQgZGlkbCwgZ2V0cyBhZGRlZCBhdCBvcHJlZ2lvbiB2ZXJzaW9uCkBA
IC03MjEsMjAgKzY1NywxMiBAQCBzdGF0aWMgdm9pZCBpbnRlbF9kaWRsX291dHB1dHMoc3RydWN0
IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogCW1heF9vdXRwdXRzID0gQVJSQVlfU0laRShv
cHJlZ2lvbi0+YWNwaS0+ZGlkbCkgKwogCQlBUlJBWV9TSVpFKG9wcmVnaW9uLT5hY3BpLT5kaWQy
KTsKIAorCWludGVsX2FjcGlfZGV2aWNlX2lkX3VwZGF0ZShkZXZfcHJpdik7CisKIAlkcm1fY29u
bmVjdG9yX2xpc3RfaXRlcl9iZWdpbigmZGV2X3ByaXYtPmRybSwgJmNvbm5faXRlcik7CiAJZm9y
X2VhY2hfaW50ZWxfY29ubmVjdG9yX2l0ZXIoY29ubmVjdG9yLCAmY29ubl9pdGVyKSB7Ci0JCXUz
MiBkZXZpY2VfaWQsIHR5cGU7Ci0KLQkJZGV2aWNlX2lkID0gYWNwaV9kaXNwbGF5X3R5cGUoY29u
bmVjdG9yKTsKLQotCQkvKiBVc2UgZGlzcGxheSB0eXBlIHNwZWNpZmljIGRpc3BsYXkgaW5kZXgu
ICovCi0JCXR5cGUgPSAoZGV2aWNlX2lkICYgQUNQSV9ESVNQTEFZX1RZUEVfTUFTSykKLQkJCT4+
IEFDUElfRElTUExBWV9UWVBFX1NISUZUOwotCQlkZXZpY2VfaWQgfD0gZGlzcGxheV9pbmRleFt0
eXBlXSsrIDw8IEFDUElfRElTUExBWV9JTkRFWF9TSElGVDsKLQotCQljb25uZWN0b3ItPmFjcGlf
ZGV2aWNlX2lkID0gZGV2aWNlX2lkOwogCQlpZiAoaSA8IG1heF9vdXRwdXRzKQotCQkJc2V0X2Rp
ZChvcHJlZ2lvbiwgaSwgZGV2aWNlX2lkKTsKKwkJCXNldF9kaWQob3ByZWdpb24sIGksIGNvbm5l
Y3Rvci0+YWNwaV9kZXZpY2VfaWQpOwogCQlpKys7CiAJfQogCWRybV9jb25uZWN0b3JfbGlzdF9p
dGVyX2VuZCgmY29ubl9pdGVyKTsKLS0gCjIuMjQuMC4zOTMuZzM0ZGMzNDhlYWYtZ29vZwoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1h
aWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
