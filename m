Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C8F971E4A4
	for <lists+dri-devel@lfdr.de>; Wed, 15 May 2019 00:19:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B91168932E;
	Tue, 14 May 2019 22:19:14 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-qk1-x74a.google.com (mail-qk1-x74a.google.com
 [IPv6:2607:f8b0:4864:20::74a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6FBFD8932E
 for <dri-devel@lists.freedesktop.org>; Tue, 14 May 2019 22:19:13 +0000 (UTC)
Received: by mail-qk1-x74a.google.com with SMTP id n65so633549qke.12
 for <dri-devel@lists.freedesktop.org>; Tue, 14 May 2019 15:19:13 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=bLsKx2EZGy7Z5lmF6P8U1p14LxEyvmeV2AI/h0+08ao=;
 b=YLguQAAwBMDbWKM1t6OewwIV5SjHxwQMz9cSrktubVsEUAcD5T+Wm5a80PpvMPTv18
 DRxGlptKiTBcbLL+RCo9/fkmTxiXqxk2Tx7rUDNyc+3Ik+qOf4+E9we809RGwJuAlWcC
 mHBbOXq5g2exOk9dPxtiP+CE5N+mQe2t52BE5HGnNwdbDo5PN2KUaZHFS7HUzc1eyleQ
 C6QZy+siHwQRUF3B/qmUJtbkNuosV82eeffCi5/lhGcfe6P22jdEhi/RvDblrZlW7HEw
 5KkU81UxHkio3bUIp3U1BZUFfQMcisSjq3BL4zj0722GgWNbFOOjfe0YRHmZbWPyuldv
 Bvqg==
X-Gm-Message-State: APjAAAUgGDv3LdNAEjMOObg4sPTLsOx8tYT6/8uaMeoSO3gyJ/yNPY8x
 0aCV0GpwIZf8fi7BXdeu426nOyY1euwIq26DyxRDtQ==
X-Google-Smtp-Source: APXvYqw5i7ul/qbANJEnu8BT5yk/gqP4FmbRW498CdHb1S+6C/x6IOCPPRVWvdxTyCj8c3NmN3Zy5As4kCI66JTESeV1kw==
X-Received: by 2002:a0c:fe65:: with SMTP id b5mr30921774qvv.106.1557872352515; 
 Tue, 14 May 2019 15:19:12 -0700 (PDT)
Date: Tue, 14 May 2019 15:17:03 -0700
In-Reply-To: <20190514221711.248228-1-brendanhiggins@google.com>
Message-Id: <20190514221711.248228-11-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190514221711.248228-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.21.0.1020.gf2820cf01a-goog
Subject: [PATCH v4 10/18] kunit: test: add tests for kunit test abort
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=bLsKx2EZGy7Z5lmF6P8U1p14LxEyvmeV2AI/h0+08ao=;
 b=nXpFW2eCo8X3CQb6h8VPPaz/nmyRZIiaCq3jooONYXc01LAdzHCG40XWqjgKfCFObO
 OEGVaBDvDJABKQVffkfT2y7fMrQ2buUGVY+aInZrCiehyv21nC+k5Hcydi4gm8nqbYB8
 Nw2dP8K+uH9inmhXE0KTpVdjpxIcOri3fBqRN4lneUFaD+4Fo+s1UEAvh84rFwXVx+Rz
 anLK3Us/r4rV/nc3wZjSMrluqgZ4nw/g1EQhMXNcDgNrmg7yUitw6vUluK5k4eio3IFB
 5xRcwISWlDNshdQu7GX6Mk0GgSA8AhHvgE2sBTQYZsaPmjhsCZn1eEkb4eJlnaVjNvN0
 Xv3A==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIEtVbml0IHRlc3RzIGZvciB0aGUgS1VuaXQgdGVzdCBhYm9ydCBtZWNoYW5pc20gKHNlZSBw
cmVjZWRpbmcKY29tbWl0KS4gQWRkIHRlc3RzIGJvdGggZm9yIGdlbmVyYWwgdHJ5IGNhdGNoIG1l
Y2hhbmlzbSBhcyB3ZWxsIGFzCm5vbi1hcmNoaXRlY3R1cmUgc3BlY2lmaWMgbWVjaGFuaXNtLgoK
U2lnbmVkLW9mZi1ieTogQnJlbmRhbiBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29t
PgpSZXZpZXdlZC1ieTogR3JlZyBLcm9haC1IYXJ0bWFuIDxncmVna2hAbGludXhmb3VuZGF0aW9u
Lm9yZz4KUmV2aWV3ZWQtYnk6IExvZ2FuIEd1bnRob3JwZSA8bG9nYW5nQGRlbHRhdGVlLmNvbT4K
LS0tCiBrdW5pdC9NYWtlZmlsZSAgICB8ICAgMyArLQoga3VuaXQvdGVzdC10ZXN0LmMgfCAxMDEg
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogMiBmaWxlcyBj
aGFuZ2VkLCAxMDMgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAw
NjQ0IGt1bml0L3Rlc3QtdGVzdC5jCgpkaWZmIC0tZ2l0IGEva3VuaXQvTWFrZWZpbGUgYi9rdW5p
dC9NYWtlZmlsZQppbmRleCAxZjc2ODBjZmExMWFkLi41MzMzNTU4NjdhYmQyIDEwMDY0NAotLS0g
YS9rdW5pdC9NYWtlZmlsZQorKysgYi9rdW5pdC9NYWtlZmlsZQpAQCAtMyw2ICszLDcgQEAgb2Jq
LSQoQ09ORklHX0tVTklUKSArPQkJCXRlc3QubyBcCiAJCQkJCWt1bml0LXN0cmVhbS5vIFwKIAkJ
CQkJdHJ5LWNhdGNoLm8KIAotb2JqLSQoQ09ORklHX0tVTklUX1RFU1QpICs9CQlzdHJpbmctc3Ry
ZWFtLXRlc3Qubworb2JqLSQoQ09ORklHX0tVTklUX1RFU1QpICs9CQl0ZXN0LXRlc3QubyBcCisJ
CQkJCXN0cmluZy1zdHJlYW0tdGVzdC5vCiAKIG9iai0kKENPTkZJR19LVU5JVF9FWEFNUExFX1RF
U1QpICs9CWV4YW1wbGUtdGVzdC5vCmRpZmYgLS1naXQgYS9rdW5pdC90ZXN0LXRlc3QuYyBiL2t1
bml0L3Rlc3QtdGVzdC5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMDAu
LjU3N2RmNWE4ZDMwOWUKLS0tIC9kZXYvbnVsbAorKysgYi9rdW5pdC90ZXN0LXRlc3QuYwpAQCAt
MCwwICsxLDEwMSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKKy8qCisg
KiBLVW5pdCB0ZXN0IGZvciBjb3JlIHRlc3QgaW5mcmFzdHJ1Y3R1cmUuCisgKgorICogQ29weXJp
Z2h0IChDKSAyMDE5LCBHb29nbGUgTExDLgorICogQXV0aG9yOiBCcmVuZGFuIEhpZ2dpbnMgPGJy
ZW5kYW5oaWdnaW5zQGdvb2dsZS5jb20+CisgKi8KKyNpbmNsdWRlIDxrdW5pdC90ZXN0Lmg+CisK
K3N0cnVjdCBrdW5pdF90cnlfY2F0Y2hfdGVzdF9jb250ZXh0IHsKKwlzdHJ1Y3Qga3VuaXRfdHJ5
X2NhdGNoICp0cnlfY2F0Y2g7CisJYm9vbCBmdW5jdGlvbl9jYWxsZWQ7Cit9OworCit2b2lkIGt1
bml0X3Rlc3Rfc3VjY2Vzc2Z1bF90cnkodm9pZCAqZGF0YSkKK3sKKwlzdHJ1Y3Qga3VuaXQgKnRl
c3QgPSBkYXRhOworCXN0cnVjdCBrdW5pdF90cnlfY2F0Y2hfdGVzdF9jb250ZXh0ICpjdHggPSB0
ZXN0LT5wcml2OworCisJY3R4LT5mdW5jdGlvbl9jYWxsZWQgPSB0cnVlOworfQorCit2b2lkIGt1
bml0X3Rlc3Rfbm9fY2F0Y2godm9pZCAqZGF0YSkKK3sKKwlzdHJ1Y3Qga3VuaXQgKnRlc3QgPSBk
YXRhOworCisJS1VOSVRfRkFJTCh0ZXN0LCAiQ2F0Y2ggc2hvdWxkIG5vdCBiZSBjYWxsZWQuXG4i
KTsKK30KKworc3RhdGljIHZvaWQga3VuaXRfdGVzdF90cnlfY2F0Y2hfc3VjY2Vzc2Z1bF90cnlf
bm9fY2F0Y2goc3RydWN0IGt1bml0ICp0ZXN0KQoreworCXN0cnVjdCBrdW5pdF90cnlfY2F0Y2hf
dGVzdF9jb250ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF90cnlfY2F0Y2gg
KnRyeV9jYXRjaCA9IGN0eC0+dHJ5X2NhdGNoOworCisJa3VuaXRfdHJ5X2NhdGNoX2luaXQodHJ5
X2NhdGNoLAorCQkJICAgICB0ZXN0LAorCQkJICAgICBrdW5pdF90ZXN0X3N1Y2Nlc3NmdWxfdHJ5
LAorCQkJICAgICBrdW5pdF90ZXN0X25vX2NhdGNoKTsKKwlrdW5pdF90cnlfY2F0Y2hfcnVuKHRy
eV9jYXRjaCwgdGVzdCk7CisKKwlLVU5JVF9FWFBFQ1RfVFJVRSh0ZXN0LCBjdHgtPmZ1bmN0aW9u
X2NhbGxlZCk7Cit9CisKK3ZvaWQga3VuaXRfdGVzdF91bnN1Y2Nlc3NmdWxfdHJ5KHZvaWQgKmRh
dGEpCit7CisJc3RydWN0IGt1bml0ICp0ZXN0ID0gZGF0YTsKKwlzdHJ1Y3Qga3VuaXRfdHJ5X2Nh
dGNoX3Rlc3RfY29udGV4dCAqY3R4ID0gdGVzdC0+cHJpdjsKKwlzdHJ1Y3Qga3VuaXRfdHJ5X2Nh
dGNoICp0cnlfY2F0Y2ggPSBjdHgtPnRyeV9jYXRjaDsKKworCWt1bml0X3RyeV9jYXRjaF90aHJv
dyh0cnlfY2F0Y2gpOworCUtVTklUX0ZBSUwodGVzdCwgIlRoaXMgbGluZSBzaG91bGQgbmV2ZXIg
YmUgcmVhY2hlZC5cbiIpOworfQorCit2b2lkIGt1bml0X3Rlc3RfY2F0Y2godm9pZCAqZGF0YSkK
K3sKKwlzdHJ1Y3Qga3VuaXQgKnRlc3QgPSBkYXRhOworCXN0cnVjdCBrdW5pdF90cnlfY2F0Y2hf
dGVzdF9jb250ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCisJY3R4LT5mdW5jdGlvbl9jYWxsZWQg
PSB0cnVlOworfQorCitzdGF0aWMgdm9pZCBrdW5pdF90ZXN0X3RyeV9jYXRjaF91bnN1Y2Nlc3Nm
dWxfdHJ5X2RvZXNfY2F0Y2goc3RydWN0IGt1bml0ICp0ZXN0KQoreworCXN0cnVjdCBrdW5pdF90
cnlfY2F0Y2hfdGVzdF9jb250ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCXN0cnVjdCBrdW5pdF90
cnlfY2F0Y2ggKnRyeV9jYXRjaCA9IGN0eC0+dHJ5X2NhdGNoOworCisJa3VuaXRfdHJ5X2NhdGNo
X2luaXQodHJ5X2NhdGNoLAorCQkJICAgICB0ZXN0LAorCQkJICAgICBrdW5pdF90ZXN0X3Vuc3Vj
Y2Vzc2Z1bF90cnksCisJCQkgICAgIGt1bml0X3Rlc3RfY2F0Y2gpOworCWt1bml0X3RyeV9jYXRj
aF9ydW4odHJ5X2NhdGNoLCB0ZXN0KTsKKworCUtVTklUX0VYUEVDVF9UUlVFKHRlc3QsIGN0eC0+
ZnVuY3Rpb25fY2FsbGVkKTsKK30KKworc3RhdGljIGludCBrdW5pdF90cnlfY2F0Y2hfdGVzdF9p
bml0KHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdHJ5X2NhdGNoX3Rlc3Rf
Y29udGV4dCAqY3R4OworCisJY3R4ID0ga3VuaXRfa3phbGxvYyh0ZXN0LCBzaXplb2YoKmN0eCks
IEdGUF9LRVJORUwpOworCXRlc3QtPnByaXYgPSBjdHg7CisKKwljdHgtPnRyeV9jYXRjaCA9IGt1
bml0X2ttYWxsb2ModGVzdCwKKwkJCQkgICAgICAgc2l6ZW9mKCpjdHgtPnRyeV9jYXRjaCksCisJ
CQkJICAgICAgIEdGUF9LRVJORUwpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qg
a3VuaXRfY2FzZSBrdW5pdF90cnlfY2F0Y2hfdGVzdF9jYXNlc1tdID0geworCUtVTklUX0NBU0Uo
a3VuaXRfdGVzdF90cnlfY2F0Y2hfc3VjY2Vzc2Z1bF90cnlfbm9fY2F0Y2gpLAorCUtVTklUX0NB
U0Uoa3VuaXRfdGVzdF90cnlfY2F0Y2hfdW5zdWNjZXNzZnVsX3RyeV9kb2VzX2NhdGNoKSwKKwl7
fSwKK307CisKK3N0YXRpYyBzdHJ1Y3Qga3VuaXRfbW9kdWxlIGt1bml0X3RyeV9jYXRjaF90ZXN0
X21vZHVsZSA9IHsKKwkubmFtZSA9ICJrdW5pdC10cnktY2F0Y2gtdGVzdCIsCisJLmluaXQgPSBr
dW5pdF90cnlfY2F0Y2hfdGVzdF9pbml0LAorCS50ZXN0X2Nhc2VzID0ga3VuaXRfdHJ5X2NhdGNo
X3Rlc3RfY2FzZXMsCit9OworbW9kdWxlX3Rlc3Qoa3VuaXRfdHJ5X2NhdGNoX3Rlc3RfbW9kdWxl
KTsKLS0gCjIuMjEuMC4xMDIwLmdmMjgyMGNmMDFhLWdvb2cKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
