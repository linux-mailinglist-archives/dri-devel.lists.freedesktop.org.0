Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3F3071D3C23
	for <lists+dri-devel@lfdr.de>; Thu, 14 May 2020 21:11:00 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 563E36EBBB;
	Thu, 14 May 2020 19:10:58 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-lj1-x243.google.com (mail-lj1-x243.google.com
 [IPv6:2a00:1450:4864:20::243])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D74AB6EBBB
 for <dri-devel@lists.freedesktop.org>; Thu, 14 May 2020 19:10:54 +0000 (UTC)
Received: by mail-lj1-x243.google.com with SMTP id d21so4742747ljg.9
 for <dri-devel@lists.freedesktop.org>; Thu, 14 May 2020 12:10:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=sender:from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=0TjjfHtIftg6y1deaf9Au+YmodMuSD9MQOJ+iJ1XC7I=;
 b=qB5TrxOzjLBBhlSoGt8TqwqgBxxHnB0NHvQ5aJh23W7xd7hF8BHRW1acVqQuik1z8G
 WCT7g1li4wyVYG5WrY0Gemk+2wP79/KYP9bmc5dLvzzKxVs1Ke4S3CghcZzH5wJkcGVL
 WNsxhcM1y//UKZWYIujGlYMZtUmGZODaYaLqgoI5xT53TP9oo+uDOLZZw2+9lzJ24bKN
 aEoxZ7aeHyJdqoSMBituxppxjqTodvptmgzozN94QgdBlRT/+s2+xGG050MB14g18D3v
 TaF2DptPjPQpk7APo75MKikXLg4XHptLwAFmgkEohJD5YUJnd3qpy+Ud93+GLXu8GPX5
 WEGQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:from:to:cc:subject:date:message-id
 :in-reply-to:references:mime-version:content-transfer-encoding;
 bh=0TjjfHtIftg6y1deaf9Au+YmodMuSD9MQOJ+iJ1XC7I=;
 b=SXmpe85S4TQ2maco6onbXV1MrRJNT7uw5Of2cMC3BVqnA7pIlkfICqybXDlYohc3nz
 9H2A8kH5B1koSRnYSX52hcmowyrz3Lc/46UqDWPzr8ClFeI8HqW09iUWuybSE55Nf2XI
 Frw7qim/6VZyK7hs3jOJQBoawRLPJnHbHxWdCv8ybznsUqrNd/y/noMQy6XQKrE4rQCf
 X7mWbdn8ylXs8KwRXWVPcM9iEuVwas1Lnvq+Yzv5M1ppwgnuuoEKyf+AT6Z9Oar+GQQc
 SCz7xMK+ck3kZQ2gfbgWsqj3wI9lqG6ujWJXXvPWspyMQMK+iWogAU4ILbcTEpePJoX7
 ZdGw==
X-Gm-Message-State: AOAM532kc75jW5qb0NzAx97/m6BeaCfpxLyNXvaMjvIFZNgn8aeD4YEC
 Ays3WltNSgJT14MDKrNtaGmGPLJBBSvo6w==
X-Google-Smtp-Source: ABdhPJxpxx/dPjZR2NjE1DnmTmJigaruwKU6OtMCe86mU8Qk4zIy8kOoYxSwtVLnPSHdFZ1PkniTQw==
X-Received: by 2002:a05:651c:1027:: with SMTP id
 w7mr3670125ljm.205.1589483452641; 
 Thu, 14 May 2020 12:10:52 -0700 (PDT)
Received: from saturn.lan ([2a00:fd00:805f:db00:8d23:71d:e677:1c7c])
 by smtp.gmail.com with ESMTPSA id q30sm2362958lfd.32.2020.05.14.12.10.50
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 14 May 2020 12:10:52 -0700 (PDT)
From: Sam Ravnborg <sam@ravnborg.org>
To: dri-devel@lists.freedesktop.org, Jingoo Han <jingoohan1@gmail.com>,
 Lee Jones <lee.jones@linaro.org>,
 Daniel Thompson <daniel.thompson@linaro.org>
Subject: [PATCH v1 18/18] backlight: use backlight_is_blank() in all backlight
 drivers
Date: Thu, 14 May 2020 21:10:01 +0200
Message-Id: <20200514191001.457441-19-sam@ravnborg.org>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20200514191001.457441-1-sam@ravnborg.org>
References: <20200514191001.457441-1-sam@ravnborg.org>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Kate Stewart <kstewart@linuxfoundation.org>,
 Kefeng Wang <wangkefeng.wang@huawei.com>, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Bjorn Andersson <bjorn.andersson@linaro.org>,
 Thierry Reding <thierry.reding@gmail.com>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Sam Ravnborg <sam@ravnborg.org>, Jonathan Corbet <corbet@lwn.net>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Russell King <linux@armlinux.org.uk>,
 Andy Gross <agross@kernel.org>,
 Uwe Kleine Konig <u.kleine-koenig@pengutronix.de>, linux-pwm@vger.kernel.org,
 Michael Hennerich <michael.hennerich@analog.com>,
 Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 Jani Nikula <jani.nikula@intel.com>, linux-arm-msm@vger.kernel.org,
 Jyri Sarha <jsarha@ti.com>, Thomas Gleixner <tglx@linutronix.de>,
 Allison Randal <allison@lohutok.net>,
 Support Opensource <support.opensource@diasemi.com>,
 patches@opensource.cirrus.com, Douglas Anderson <dianders@chromium.org>,
 Zheng Bin <zhengbin13@huawei.com>, Thomas Zimmermann <tzimmermann@suse.de>,
 Enrico Weigelt <info@metux.net>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UmVwbGFjZXMgdGhlIG9wZW4tY29kZWQgY2hlY2tzIGlmIHRoZSBzdGF0ZSBldGMuLAp3aXRoIHRo
ZSBiYWNrbGlnaHRfaXNfYmxhbmsoKSBoZWxwZXIuClRoaXMgaW5jcmVhc2VzIHJlYWRhYmlsaXR5
IG9mIHRoZSBjb2RlIGFuZCBhbGluZwp0aGUgZnVuY3Rpb25hbGl0eS4KClNpZ25lZC1vZmYtYnk6
IFNhbSBSYXZuYm9yZyA8c2FtQHJhdm5ib3JnLm9yZz4KQ2M6IExlZSBKb25lcyA8bGVlLmpvbmVz
QGxpbmFyby5vcmc+CkNjOiBEYW5pZWwgVGhvbXBzb24gPGRhbmllbC50aG9tcHNvbkBsaW5hcm8u
b3JnPgpDYzogSmluZ29vIEhhbiA8amluZ29vaGFuMUBnbWFpbC5jb20+CkNjOiBNaWNoYWVsIEhl
bm5lcmljaCA8bWljaGFlbC5oZW5uZXJpY2hAYW5hbG9nLmNvbT4KQ2M6IFN1cHBvcnQgT3BlbnNv
dXJjZSA8c3VwcG9ydC5vcGVuc291cmNlQGRpYXNlbWkuY29tPgpDYzogVGhpZXJyeSBSZWRpbmcg
PHRoaWVycnkucmVkaW5nQGdtYWlsLmNvbT4KQ2M6ICJVd2UgS2xlaW5lLUvDtm5pZyIgPHUua2xl
aW5lLWtvZW5pZ0BwZW5ndXRyb25peC5kZT4KQ2M6IEFuZHkgR3Jvc3MgPGFncm9zc0BrZXJuZWwu
b3JnPgpDYzogQmpvcm4gQW5kZXJzc29uIDxiam9ybi5hbmRlcnNzb25AbGluYXJvLm9yZz4KQ2M6
IGxpbnV4LXB3bUB2Z2VyLmtlcm5lbC5vcmcKQ2M6IGxpbnV4LWFybS1tc21Admdlci5rZXJuZWwu
b3JnCkNjOiBwYXRjaGVzQG9wZW5zb3VyY2UuY2lycnVzLmNvbQotLS0KIGRyaXZlcnMvdmlkZW8v
YmFja2xpZ2h0Lzg4cG04NjB4X2JsLmMgICAgfCAgOCArLS0tLS0tLQogZHJpdmVycy92aWRlby9i
YWNrbGlnaHQvYWRwNTUyMF9ibC5jICAgICB8ICA1ICstLS0tCiBkcml2ZXJzL3ZpZGVvL2JhY2ts
aWdodC9hZHA4ODYwX2JsLmMgICAgIHwgIDUgKy0tLS0KIGRyaXZlcnMvdmlkZW8vYmFja2xpZ2h0
L2FkcDg4NzBfYmwuYyAgICAgfCAgNSArLS0tLQogZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYXMz
NzExX2JsLmMgICAgICB8ICA4ICsrKy0tLS0tCiBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9iZDYx
MDcuYyAgICAgICAgIHwgIDQgKy0tLQogZHJpdmVycy92aWRlby9iYWNrbGlnaHQvY29yZ2lfbGNk
LmMgICAgICB8ICA1ICstLS0tCiBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9jcl9ibGxjZC5jICAg
ICAgIHwgMjIgKysrKysrKy0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy92aWRlby9iYWNrbGlnaHQv
ZGE5MDN4X2JsLmMgICAgICB8ICA4ICstLS0tLS0tCiBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9l
cDkzeHhfYmwuYyAgICAgIHwgIDMgKy0tCiBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9ncGlvX2Jh
Y2tsaWdodC5jIHwgIDQgKy0tLQogZHJpdmVycy92aWRlby9iYWNrbGlnaHQvaHA2ODBfYmwuYyAg
ICAgICB8ICA0ICstLS0KIGRyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2pvcm5hZGE3MjBfYmwuYyAg
fCAgMiArLQogZHJpdmVycy92aWRlby9iYWNrbGlnaHQva2IzODg2X2JsLmMgICAgICB8ICA0ICst
LS0KIGRyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xlZF9ibC5jICAgICAgICAgfCAgNCArLS0tCiBk
cml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9sbTM1MzNfYmwuYyAgICAgIHwgIDQgKy0tLQogZHJpdmVy
cy92aWRlby9iYWNrbGlnaHQvbG9jb21vbGNkLmMgICAgICB8ICA0ICstLS0KIGRyaXZlcnMvdmlk
ZW8vYmFja2xpZ2h0L2x2NTIwN2xwLmMgICAgICAgfCAgNCArLS0tCiBkcml2ZXJzL3ZpZGVvL2Jh
Y2tsaWdodC9tYXg4OTI1X2JsLmMgICAgIHwgIDggKy0tLS0tLS0KIGRyaXZlcnMvdmlkZW8vYmFj
a2xpZ2h0L3B3bV9ibC5jICAgICAgICAgfCAgNCArLS0tCiBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdo
dC9xY29tLXdsZWQuYyAgICAgIHwgIDQgKy0tLQogZHJpdmVycy92aWRlby9iYWNrbGlnaHQvdHBz
NjUyMTdfYmwuYyAgICB8ICA0ICstLS0KIGRyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L3dtODMxeF9i
bC5jICAgICAgfCAgOCArLS0tLS0tLQogMjMgZmlsZXMgY2hhbmdlZCwgMzEgaW5zZXJ0aW9ucygr
KSwgMTAwIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0
Lzg4cG04NjB4X2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC84OHBtODYweF9ibC5jCmlu
ZGV4IDIwZDk2YTVhYzM4NC4uMTYyYzgzYWIwZjVhIDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVv
L2JhY2tsaWdodC84OHBtODYweF9ibC5jCisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0Lzg4
cG04NjB4X2JsLmMKQEAgLTEyMywxMyArMTIzLDcgQEAgc3RhdGljIGludCBwbTg2MHhfYmFja2xp
Z2h0X3VwZGF0ZV9zdGF0dXMoc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJsKQogewogCWludCBi
cmlnaHRuZXNzID0gYmwtPnByb3BzLmJyaWdodG5lc3M7CiAKLQlpZiAoYmwtPnByb3BzLnBvd2Vy
ICE9IEZCX0JMQU5LX1VOQkxBTkspCi0JCWJyaWdodG5lc3MgPSAwOwotCi0JaWYgKGJsLT5wcm9w
cy5mYl9ibGFuayAhPSBGQl9CTEFOS19VTkJMQU5LKQotCQlicmlnaHRuZXNzID0gMDsKLQotCWlm
IChibC0+cHJvcHMuc3RhdGUgJiBCTF9DT1JFX1NVU1BFTkRFRCkKKwlpZiAoYmFja2xpZ2h0X2lz
X2JsYW5rKGJsKSkKIAkJYnJpZ2h0bmVzcyA9IDA7CiAKIAlyZXR1cm4gcG04NjB4X2JhY2tsaWdo
dF9zZXQoYmwsIGJyaWdodG5lc3MpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNrbGln
aHQvYWRwNTUyMF9ibC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYWRwNTUyMF9ibC5jCmlu
ZGV4IDBmNjNmNzY3MjNhNS4uZDgxN2IwZDk1YzlkIDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVv
L2JhY2tsaWdodC9hZHA1NTIwX2JsLmMKKysrIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYWRw
NTUyMF9ibC5jCkBAIC02NywxMCArNjcsNyBAQCBzdGF0aWMgaW50IGFkcDU1MjBfYmxfdXBkYXRl
X3N0YXR1cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmwpCiB7CiAJaW50IGJyaWdodG5lc3Mg
PSBibC0+cHJvcHMuYnJpZ2h0bmVzczsKIAotCWlmIChibC0+cHJvcHMucG93ZXIgIT0gRkJfQkxB
TktfVU5CTEFOSykKLQkJYnJpZ2h0bmVzcyA9IDA7Ci0KLQlpZiAoYmwtPnByb3BzLmZiX2JsYW5r
ICE9IEZCX0JMQU5LX1VOQkxBTkspCisJaWYgKGJhY2tsaWdodF9pc19ibGFuayhibCkpCiAJCWJy
aWdodG5lc3MgPSAwOwogCiAJcmV0dXJuIGFkcDU1MjBfYmxfc2V0KGJsLCBicmlnaHRuZXNzKTsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2FkcDg4NjBfYmwuYyBiL2RyaXZl
cnMvdmlkZW8vYmFja2xpZ2h0L2FkcDg4NjBfYmwuYwppbmRleCAxOTk2ODEwNGZjNDcuLmEwY2Uy
YTM3MDFmYSAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYWRwODg2MF9ibC5j
CisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2FkcDg4NjBfYmwuYwpAQCAtMzYzLDEwICsz
NjMsNyBAQCBzdGF0aWMgaW50IGFkcDg4NjBfYmxfdXBkYXRlX3N0YXR1cyhzdHJ1Y3QgYmFja2xp
Z2h0X2RldmljZSAqYmwpCiB7CiAJaW50IGJyaWdodG5lc3MgPSBibC0+cHJvcHMuYnJpZ2h0bmVz
czsKIAotCWlmIChibC0+cHJvcHMucG93ZXIgIT0gRkJfQkxBTktfVU5CTEFOSykKLQkJYnJpZ2h0
bmVzcyA9IDA7Ci0KLQlpZiAoYmwtPnByb3BzLmZiX2JsYW5rICE9IEZCX0JMQU5LX1VOQkxBTksp
CisJaWYgKGJhY2tsaWdodF9pc19ibGFuayhibCkpCiAJCWJyaWdodG5lc3MgPSAwOwogCiAJcmV0
dXJuIGFkcDg4NjBfYmxfc2V0KGJsLCBicmlnaHRuZXNzKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
dmlkZW8vYmFja2xpZ2h0L2FkcDg4NzBfYmwuYyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2Fk
cDg4NzBfYmwuYwppbmRleCA0YzAwMzIwMTBjZmUuLmFlNDI2OWZkYjE4OSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYWRwODg3MF9ibC5jCisrKyBiL2RyaXZlcnMvdmlkZW8v
YmFja2xpZ2h0L2FkcDg4NzBfYmwuYwpAQCAtNDAxLDEwICs0MDEsNyBAQCBzdGF0aWMgaW50IGFk
cDg4NzBfYmxfdXBkYXRlX3N0YXR1cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmwpCiB7CiAJ
aW50IGJyaWdodG5lc3MgPSBibC0+cHJvcHMuYnJpZ2h0bmVzczsKIAotCWlmIChibC0+cHJvcHMu
cG93ZXIgIT0gRkJfQkxBTktfVU5CTEFOSykKLQkJYnJpZ2h0bmVzcyA9IDA7Ci0KLQlpZiAoYmwt
PnByb3BzLmZiX2JsYW5rICE9IEZCX0JMQU5LX1VOQkxBTkspCisJaWYgKGJhY2tsaWdodF9pc19i
bGFuayhibCkpCiAJCWJyaWdodG5lc3MgPSAwOwogCiAJcmV0dXJuIGFkcDg4NzBfYmxfc2V0KGJs
LCBicmlnaHRuZXNzKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2FzMzcx
MV9ibC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYXMzNzExX2JsLmMKaW5kZXggMzNmMGYw
ZjJlOGIzLi43ZmE3NjAwOGM3YmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0
L2FzMzcxMV9ibC5jCisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2FzMzcxMV9ibC5jCkBA
IC0xMDcsMTMgKzEwNywxMSBAQCBzdGF0aWMgaW50IGFzMzcxMV9ibF91cGRhdGVfc3RhdHVzKHN0
cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpibCkKIAlpbnQgYnJpZ2h0bmVzcyA9IGJsLT5wcm9wcy5i
cmlnaHRuZXNzOwogCWludCByZXQgPSAwOwogCi0JZGV2X2RiZygmYmwtPmRldiwgIiVzKCk6IGJy
aWdodG5lc3MgJXUsIHB3ciAleCwgYmxhbmsgJXgsIHN0YXRlICV4XG4iLAorCWRldl9kYmcoJmJs
LT5kZXYsICIlcygpOiBicmlnaHRuZXNzICV1LCBwd3IgJXgsIHN0YXRlICV4XG4iLAogCQlfX2Z1
bmNfXywgYmwtPnByb3BzLmJyaWdodG5lc3MsIGJsLT5wcm9wcy5wb3dlciwKLQkJYmwtPnByb3Bz
LmZiX2JsYW5rLCBibC0+cHJvcHMuc3RhdGUpOworCQlibC0+cHJvcHMuc3RhdGUpOwogCi0JaWYg
KGJsLT5wcm9wcy5wb3dlciAhPSBGQl9CTEFOS19VTkJMQU5LIHx8Ci0JICAgIGJsLT5wcm9wcy5m
Yl9ibGFuayAhPSBGQl9CTEFOS19VTkJMQU5LIHx8Ci0JICAgIGJsLT5wcm9wcy5zdGF0ZSAmIChC
TF9DT1JFX1NVU1BFTkRFRCB8IEJMX0NPUkVfRkJCTEFOSykpCisJaWYgKGJhY2tsaWdodF9pc19i
bGFuayhibCkpCiAJCWJyaWdodG5lc3MgPSAwOwogCiAJaWYgKGRhdGEtPnR5cGUgPT0gQVMzNzEx
X0JMX1NVMSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYmQ2MTA3LmMg
Yi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9iZDYxMDcuYwppbmRleCBkNWQ1ZmI0NTdlNzguLmY2
YTVjMWRiYTNiYyAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYmQ2MTA3LmMK
KysrIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvYmQ2MTA3LmMKQEAgLTg0LDkgKzg0LDcgQEAg
c3RhdGljIGludCBiZDYxMDdfYmFja2xpZ2h0X3VwZGF0ZV9zdGF0dXMoc3RydWN0IGJhY2tsaWdo
dF9kZXZpY2UgKmJhY2tsaWdodCkKIAlzdHJ1Y3QgYmQ2MTA3ICpiZCA9IGJsX2dldF9kYXRhKGJh
Y2tsaWdodCk7CiAJaW50IGJyaWdodG5lc3MgPSBiYWNrbGlnaHQtPnByb3BzLmJyaWdodG5lc3M7
CiAKLQlpZiAoYmFja2xpZ2h0LT5wcm9wcy5wb3dlciAhPSBGQl9CTEFOS19VTkJMQU5LIHx8Ci0J
ICAgIGJhY2tsaWdodC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktfVU5CTEFOSyB8fAotCSAg
ICBiYWNrbGlnaHQtPnByb3BzLnN0YXRlICYgKEJMX0NPUkVfU1VTUEVOREVEIHwgQkxfQ09SRV9G
QkJMQU5LKSkKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJhY2tsaWdodCkpCiAJCWJyaWdodG5l
c3MgPSAwOwogCiAJaWYgKGJyaWdodG5lc3MpIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8v
YmFja2xpZ2h0L2NvcmdpX2xjZC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvY29yZ2lfbGNk
LmMKaW5kZXggMjVlZjBjYmQ3NTgzLi5jOWFkZjRlMjYzNTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
dmlkZW8vYmFja2xpZ2h0L2NvcmdpX2xjZC5jCisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0
L2NvcmdpX2xjZC5jCkBAIC00MjIsMTAgKzQyMiw3IEBAIHN0YXRpYyBpbnQgY29yZ2lfYmxfdXBk
YXRlX3N0YXR1cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmQpCiAJc3RydWN0IGNvcmdpX2xj
ZCAqbGNkID0gYmxfZ2V0X2RhdGEoYmQpOwogCWludCBpbnRlbnNpdHkgPSBiZC0+cHJvcHMuYnJp
Z2h0bmVzczsKIAotCWlmIChiZC0+cHJvcHMucG93ZXIgIT0gRkJfQkxBTktfVU5CTEFOSykKLQkJ
aW50ZW5zaXR5ID0gMDsKLQotCWlmIChiZC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktfVU5C
TEFOSykKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJkKSkKIAkJaW50ZW5zaXR5ID0gMDsKIAog
CWlmIChjb3JnaWJsX2ZsYWdzICYgQ09SR0lCTF9TVVNQRU5ERUQpCmRpZmYgLS1naXQgYS9kcml2
ZXJzL3ZpZGVvL2JhY2tsaWdodC9jcl9ibGxjZC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQv
Y3JfYmxsY2QuYwppbmRleCA0NjI0YjdiN2M2YTYuLmQ1YWI3Njc1ZjU1YyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy92aWRlby9iYWNrbGlnaHQvY3JfYmxsY2QuYworKysgYi9kcml2ZXJzL3ZpZGVvL2Jh
Y2tsaWdodC9jcl9ibGxjZC5jCkBAIC01OSwyNiArNTksMTggQEAgc3RydWN0IGNyX3BhbmVsIHsK
IAogc3RhdGljIGludCBjcl9iYWNrbGlnaHRfc2V0X2ludGVuc2l0eShzdHJ1Y3QgYmFja2xpZ2h0
X2RldmljZSAqYmQpCiB7Ci0JaW50IGludGVuc2l0eSA9IGJkLT5wcm9wcy5icmlnaHRuZXNzOwog
CXUzMiBhZGRyID0gZ3Bpb19iYXIgKyBDUlZNTF9QQU5FTF9QT1JUOwogCXUzMiBjdXIgPSBpbmwo
YWRkcik7CiAKLQlpZiAoYmQtPnByb3BzLnBvd2VyID09IEZCX0JMQU5LX1VOQkxBTkspCi0JCWlu
dGVuc2l0eSA9IEZCX0JMQU5LX1VOQkxBTks7Ci0JaWYgKGJkLT5wcm9wcy5mYl9ibGFuayA9PSBG
Ql9CTEFOS19VTkJMQU5LKQotCQlpbnRlbnNpdHkgPSBGQl9CTEFOS19VTkJMQU5LOwotCWlmIChi
ZC0+cHJvcHMucG93ZXIgPT0gRkJfQkxBTktfUE9XRVJET1dOKQotCQlpbnRlbnNpdHkgPSBGQl9C
TEFOS19QT1dFUkRPV047Ci0JaWYgKGJkLT5wcm9wcy5mYl9ibGFuayA9PSBGQl9CTEFOS19QT1dF
UkRPV04pCi0JCWludGVuc2l0eSA9IEZCX0JMQU5LX1BPV0VSRE9XTjsKLQotCWlmIChpbnRlbnNp
dHkgPT0gRkJfQkxBTktfVU5CTEFOSykgeyAvKiBGVUxMIE9OICovCi0JCWN1ciAmPSB+Q1JWTUxf
QkFDS0xJR0hUX09GRjsKLQkJb3V0bChjdXIsIGFkZHIpOwotCX0gZWxzZSBpZiAoaW50ZW5zaXR5
ID09IEZCX0JMQU5LX1BPV0VSRE9XTikgeyAvKiBPRkYgKi8KKwlpZiAoYmFja2xpZ2h0X2lzX2Js
YW5rKGJkKSkgeworCQkvKiBPRkYgKi8KIAkJY3VyIHw9IENSVk1MX0JBQ0tMSUdIVF9PRkY7CiAJ
CW91dGwoY3VyLCBhZGRyKTsKLQl9IC8qIGFueXRoaW5nIGVsc2UsIGRvbid0IGJvdGhlciAqLwor
CX0gZWxzZSB7CisJCS8qIEZVTEwgT04gKi8KKwkJY3VyICY9IH5DUlZNTF9CQUNLTElHSFRfT0ZG
OworCQlvdXRsKGN1ciwgYWRkcik7CisJfQogCiAJcmV0dXJuIDA7CiB9CmRpZmYgLS1naXQgYS9k
cml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9kYTkwM3hfYmwuYyBiL2RyaXZlcnMvdmlkZW8vYmFja2xp
Z2h0L2RhOTAzeF9ibC5jCmluZGV4IDYyNTQwZTRiZGVkYi4uY2EzNTFiYWRmZGNmIDEwMDY0NAot
LS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9kYTkwM3hfYmwuYworKysgYi9kcml2ZXJzL3Zp
ZGVvL2JhY2tsaWdodC9kYTkwM3hfYmwuYwpAQCAtNzksMTMgKzc5LDcgQEAgc3RhdGljIGludCBk
YTkwM3hfYmFja2xpZ2h0X3VwZGF0ZV9zdGF0dXMoc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJs
KQogewogCWludCBicmlnaHRuZXNzID0gYmwtPnByb3BzLmJyaWdodG5lc3M7CiAKLQlpZiAoYmwt
PnByb3BzLnBvd2VyICE9IEZCX0JMQU5LX1VOQkxBTkspCi0JCWJyaWdodG5lc3MgPSAwOwotCi0J
aWYgKGJsLT5wcm9wcy5mYl9ibGFuayAhPSBGQl9CTEFOS19VTkJMQU5LKQotCQlicmlnaHRuZXNz
ID0gMDsKLQotCWlmIChibC0+cHJvcHMuc3RhdGUgJiBCTF9DT1JFX1NVU1BFTkRFRCkKKwlpZiAo
YmFja2xpZ2h0X2lzX2JsYW5rKGJsKSkKIAkJYnJpZ2h0bmVzcyA9IDA7CiAKIAlyZXR1cm4gZGE5
MDN4X2JhY2tsaWdodF9zZXQoYmwsIGJyaWdodG5lc3MpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy92
aWRlby9iYWNrbGlnaHQvZXA5M3h4X2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9lcDkz
eHhfYmwuYwppbmRleCA0MTQ5ZTBiMmY4M2MuLjQ5MTE4NWRmMTQxMSAxMDA2NDQKLS0tIGEvZHJp
dmVycy92aWRlby9iYWNrbGlnaHQvZXA5M3h4X2JsLmMKKysrIGIvZHJpdmVycy92aWRlby9iYWNr
bGlnaHQvZXA5M3h4X2JsLmMKQEAgLTM4LDggKzM4LDcgQEAgc3RhdGljIGludCBlcDkzeHhibF91
cGRhdGVfc3RhdHVzKHN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpibCkKIHsKIAlpbnQgYnJpZ2h0
bmVzcyA9IGJsLT5wcm9wcy5icmlnaHRuZXNzOwogCi0JaWYgKGJsLT5wcm9wcy5wb3dlciAhPSBG
Ql9CTEFOS19VTkJMQU5LIHx8Ci0JICAgIGJsLT5wcm9wcy5mYl9ibGFuayAhPSBGQl9CTEFOS19V
TkJMQU5LKQorCWlmIChiYWNrbGlnaHRfaXNfYmxhbmsoYmwpKQogCQlicmlnaHRuZXNzID0gMDsK
IAogCXJldHVybiBlcDkzeHhibF9zZXQoYmwsIGJyaWdodG5lc3MpOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy92aWRlby9iYWNrbGlnaHQvZ3Bpb19iYWNrbGlnaHQuYyBiL2RyaXZlcnMvdmlkZW8vYmFj
a2xpZ2h0L2dwaW9fYmFja2xpZ2h0LmMKaW5kZXggNzU0MDlkZGZiYTNlLi45NGI2NWU0ZDJhYTAg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2dwaW9fYmFja2xpZ2h0LmMKKysr
IGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvZ3Bpb19iYWNrbGlnaHQuYwpAQCAtMjUsOSArMjUs
NyBAQCBzdGF0aWMgaW50IGdwaW9fYmFja2xpZ2h0X2dldF9uZXh0X2JyaWdodG5lc3Moc3RydWN0
IGJhY2tsaWdodF9kZXZpY2UgKmJsKQogewogCWludCBicmlnaHRuZXNzID0gYmwtPnByb3BzLmJy
aWdodG5lc3M7CiAKLQlpZiAoYmwtPnByb3BzLnBvd2VyICE9IEZCX0JMQU5LX1VOQkxBTksgfHwK
LQkgICAgYmwtPnByb3BzLmZiX2JsYW5rICE9IEZCX0JMQU5LX1VOQkxBTksgfHwKLQkgICAgYmwt
PnByb3BzLnN0YXRlICYgKEJMX0NPUkVfU1VTUEVOREVEIHwgQkxfQ09SRV9GQkJMQU5LKSkKKwlp
ZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJsKSkKIAkJYnJpZ2h0bmVzcyA9IDA7CiAKIAlyZXR1cm4g
YnJpZ2h0bmVzczsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2hwNjgwX2Js
LmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9ocDY4MF9ibC5jCmluZGV4IDhlYTQyYjhkOWJj
OC4uMDFkODA1Y2E4NDE1IDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9ocDY4
MF9ibC5jCisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2hwNjgwX2JsLmMKQEAgLTM1LDkg
KzM1LDcgQEAgc3RhdGljIHZvaWQgaHA2ODBibF9zZW5kX2ludGVuc2l0eShzdHJ1Y3QgYmFja2xp
Z2h0X2RldmljZSAqYmQpCiAJdTE2IHY7CiAJaW50IGludGVuc2l0eSA9IGJkLT5wcm9wcy5icmln
aHRuZXNzOwogCi0JaWYgKGJkLT5wcm9wcy5wb3dlciAhPSBGQl9CTEFOS19VTkJMQU5LKQotCQlp
bnRlbnNpdHkgPSAwOwotCWlmIChiZC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktfVU5CTEFO
SykKKwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJkKSkKIAkJaW50ZW5zaXR5ID0gMDsKIAlpZiAo
aHA2ODBibF9zdXNwZW5kZWQpCiAJCWludGVuc2l0eSA9IDA7CmRpZmYgLS1naXQgYS9kcml2ZXJz
L3ZpZGVvL2JhY2tsaWdodC9qb3JuYWRhNzIwX2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdo
dC9qb3JuYWRhNzIwX2JsLmMKaW5kZXggZjAzODVmOWNmOWRhLi45OTZmN2JhM2IzNzMgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2pvcm5hZGE3MjBfYmwuYworKysgYi9kcml2
ZXJzL3ZpZGVvL2JhY2tsaWdodC9qb3JuYWRhNzIwX2JsLmMKQEAgLTU0LDcgKzU0LDcgQEAgc3Rh
dGljIGludCBqb3JuYWRhX2JsX3VwZGF0ZV9zdGF0dXMoc3RydWN0IGJhY2tsaWdodF9kZXZpY2Ug
KmJkKQogCWpvcm5hZGFfc3NwX3N0YXJ0KCk7CiAKIAkvKiBJZiBiYWNrbGlnaHQgaXMgb2ZmIHRo
ZW4gcmVhbGx5IHR1cm4gaXQgb2ZmICovCi0JaWYgKChiZC0+cHJvcHMucG93ZXIgIT0gRkJfQkxB
TktfVU5CTEFOSykgfHwgKGJkLT5wcm9wcy5mYl9ibGFuayAhPSBGQl9CTEFOS19VTkJMQU5LKSkg
eworCWlmIChiYWNrbGlnaHRfaXNfYmxhbmsoYmQpKSB7CiAJCXJldCA9IGpvcm5hZGFfc3NwX2J5
dGUoQlJJR0hUTkVTU09GRik7CiAJCWlmIChyZXQgIT0gVFhEVU1NWSkgewogCQkJZGV2X2luZm8o
JmJkLT5kZXYsICJicmlnaHRuZXNzIG9mZiB0aW1lb3V0XG4iKTsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvdmlkZW8vYmFja2xpZ2h0L2tiMzg4Nl9ibC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQv
a2IzODg2X2JsLmMKaW5kZXggMWRmZTEzYzE4OTI1Li5hMGZkNWQzZDgyZjUgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2tiMzg4Nl9ibC5jCisrKyBiL2RyaXZlcnMvdmlkZW8v
YmFja2xpZ2h0L2tiMzg4Nl9ibC5jCkBAIC04OSw5ICs4OSw3IEBAIHN0YXRpYyBpbnQga2IzODg2
Ymxfc2VuZF9pbnRlbnNpdHkoc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJkKQogewogCWludCBp
bnRlbnNpdHkgPSBiZC0+cHJvcHMuYnJpZ2h0bmVzczsKIAotCWlmIChiZC0+cHJvcHMucG93ZXIg
IT0gRkJfQkxBTktfVU5CTEFOSykKLQkJaW50ZW5zaXR5ID0gMDsKLQlpZiAoYmQtPnByb3BzLmZi
X2JsYW5rICE9IEZCX0JMQU5LX1VOQkxBTkspCisJaWYgKGJhY2tsaWdodF9pc19ibGFuayhiZCkp
CiAJCWludGVuc2l0eSA9IDA7CiAJaWYgKGtiMzg4NmJsX2ZsYWdzICYgS0IzODg2QkxfU1VTUEVO
REVEKQogCQlpbnRlbnNpdHkgPSAwOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNrbGln
aHQvbGVkX2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9sZWRfYmwuYwppbmRleCAzZjY2
NTQ5OTk3YzguLmM2NTVkZGQ5OWNmYiAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9iYWNrbGln
aHQvbGVkX2JsLmMKKysrIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvbGVkX2JsLmMKQEAgLTU2
LDkgKzU2LDcgQEAgc3RhdGljIGludCBsZWRfYmxfdXBkYXRlX3N0YXR1cyhzdHJ1Y3QgYmFja2xp
Z2h0X2RldmljZSAqYmwpCiAJc3RydWN0IGxlZF9ibF9kYXRhICpwcml2ID0gYmxfZ2V0X2RhdGEo
YmwpOwogCWludCBicmlnaHRuZXNzID0gYmwtPnByb3BzLmJyaWdodG5lc3M7CiAKLQlpZiAoYmwt
PnByb3BzLnBvd2VyICE9IEZCX0JMQU5LX1VOQkxBTksgfHwKLQkgICAgYmwtPnByb3BzLmZiX2Js
YW5rICE9IEZCX0JMQU5LX1VOQkxBTksgfHwKLQkgICAgYmwtPnByb3BzLnN0YXRlICYgQkxfQ09S
RV9GQkJMQU5LKQorCWlmIChiYWNrbGlnaHRfaXNfYmxhbmsoYmwpKQogCQlicmlnaHRuZXNzID0g
MDsKIAogCWlmIChicmlnaHRuZXNzID4gMCkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFj
a2xpZ2h0L2xtMzUzM19ibC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvbG0zNTMzX2JsLmMK
aW5kZXggZWUwOWQxYmQwMmI5Li40NzYxNDZiNjJjNGUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlk
ZW8vYmFja2xpZ2h0L2xtMzUzM19ibC5jCisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xt
MzUzM19ibC5jCkBAIC00MSw5ICs0MSw3IEBAIHN0YXRpYyBpbnQgbG0zNTMzX2JsX3VwZGF0ZV9z
dGF0dXMoc3RydWN0IGJhY2tsaWdodF9kZXZpY2UgKmJkKQogCXN0cnVjdCBsbTM1MzNfYmwgKmJs
ID0gYmxfZ2V0X2RhdGEoYmQpOwogCWludCBicmlnaHRuZXNzID0gYmQtPnByb3BzLmJyaWdodG5l
c3M7CiAKLQlpZiAoYmQtPnByb3BzLnBvd2VyICE9IEZCX0JMQU5LX1VOQkxBTkspCi0JCWJyaWdo
dG5lc3MgPSAwOwotCWlmIChiZC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktfVU5CTEFOSykK
KwlpZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJkKSkKIAkJYnJpZ2h0bmVzcyA9IDA7CiAKIAlyZXR1
cm4gbG0zNTMzX2N0cmxiYW5rX3NldF9icmlnaHRuZXNzKCZibC0+Y2IsICh1OClicmlnaHRuZXNz
KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xvY29tb2xjZC5jIGIvZHJp
dmVycy92aWRlby9iYWNrbGlnaHQvbG9jb21vbGNkLmMKaW5kZXggY2RjMDJlMDRmODlkLi44MDY0
Y2FkOGQ2ODMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xvY29tb2xjZC5j
CisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2xvY29tb2xjZC5jCkBAIC0xMTMsOSArMTEz
LDcgQEAgc3RhdGljIGludCBsb2NvbW9sY2Rfc2V0X2ludGVuc2l0eShzdHJ1Y3QgYmFja2xpZ2h0
X2RldmljZSAqYmQpCiB7CiAJaW50IGludGVuc2l0eSA9IGJkLT5wcm9wcy5icmlnaHRuZXNzOwog
Ci0JaWYgKGJkLT5wcm9wcy5wb3dlciAhPSBGQl9CTEFOS19VTkJMQU5LKQotCQlpbnRlbnNpdHkg
PSAwOwotCWlmIChiZC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktfVU5CTEFOSykKKwlpZiAo
YmFja2xpZ2h0X2lzX2JsYW5rKGJkKSkKIAkJaW50ZW5zaXR5ID0gMDsKIAlpZiAobG9jb21vbGNk
X2ZsYWdzICYgTE9DT01PTENEX1NVU1BFTkRFRCkKIAkJaW50ZW5zaXR5ID0gMDsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L2x2NTIwN2xwLmMgYi9kcml2ZXJzL3ZpZGVvL2Jh
Y2tsaWdodC9sdjUyMDdscC5jCmluZGV4IGM2YWQ3M2E3ODRlMi4uZWY4YWE5ODAzNTc3IDEwMDY0
NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9sdjUyMDdscC5jCisrKyBiL2RyaXZlcnMv
dmlkZW8vYmFja2xpZ2h0L2x2NTIwN2xwLmMKQEAgLTQ4LDkgKzQ4LDcgQEAgc3RhdGljIGludCBs
djUyMDdscF9iYWNrbGlnaHRfdXBkYXRlX3N0YXR1cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAq
YmFja2xpZ2h0KQogCXN0cnVjdCBsdjUyMDdscCAqbHYgPSBibF9nZXRfZGF0YShiYWNrbGlnaHQp
OwogCWludCBicmlnaHRuZXNzID0gYmFja2xpZ2h0LT5wcm9wcy5icmlnaHRuZXNzOwogCi0JaWYg
KGJhY2tsaWdodC0+cHJvcHMucG93ZXIgIT0gRkJfQkxBTktfVU5CTEFOSyB8fAotCSAgICBiYWNr
bGlnaHQtPnByb3BzLmZiX2JsYW5rICE9IEZCX0JMQU5LX1VOQkxBTksgfHwKLQkgICAgYmFja2xp
Z2h0LT5wcm9wcy5zdGF0ZSAmIChCTF9DT1JFX1NVU1BFTkRFRCB8IEJMX0NPUkVfRkJCTEFOSykp
CisJaWYgKGJhY2tsaWdodF9pc19ibGFuayhiYWNrbGlnaHQpKQogCQlicmlnaHRuZXNzID0gMDsK
IAogCWlmIChicmlnaHRuZXNzKSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdo
dC9tYXg4OTI1X2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9tYXg4OTI1X2JsLmMKaW5k
ZXggOTdjYzI2MGZmOWQxLi5iOGFmMmM2NDA3ZDMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8v
YmFja2xpZ2h0L21heDg5MjVfYmwuYworKysgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9tYXg4
OTI1X2JsLmMKQEAgLTY2LDEzICs2Niw3IEBAIHN0YXRpYyBpbnQgbWF4ODkyNV9iYWNrbGlnaHRf
dXBkYXRlX3N0YXR1cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmwpCiB7CiAJaW50IGJyaWdo
dG5lc3MgPSBibC0+cHJvcHMuYnJpZ2h0bmVzczsKIAotCWlmIChibC0+cHJvcHMucG93ZXIgIT0g
RkJfQkxBTktfVU5CTEFOSykKLQkJYnJpZ2h0bmVzcyA9IDA7Ci0KLQlpZiAoYmwtPnByb3BzLmZi
X2JsYW5rICE9IEZCX0JMQU5LX1VOQkxBTkspCi0JCWJyaWdodG5lc3MgPSAwOwotCi0JaWYgKGJs
LT5wcm9wcy5zdGF0ZSAmIEJMX0NPUkVfU1VTUEVOREVEKQorCWlmIChiYWNrbGlnaHRfaXNfYmxh
bmsoYmwpKQogCQlicmlnaHRuZXNzID0gMDsKIAogCXJldHVybiBtYXg4OTI1X2JhY2tsaWdodF9z
ZXQoYmwsIGJyaWdodG5lc3MpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQv
cHdtX2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9wd21fYmwuYwppbmRleCA4MmI4ZDc1
OTQ3MDEuLjdkMGZmY2QzN2YwNyAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQv
cHdtX2JsLmMKKysrIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvcHdtX2JsLmMKQEAgLTExMSw5
ICsxMTEsNyBAQCBzdGF0aWMgaW50IHB3bV9iYWNrbGlnaHRfdXBkYXRlX3N0YXR1cyhzdHJ1Y3Qg
YmFja2xpZ2h0X2RldmljZSAqYmwpCiAJaW50IGJyaWdodG5lc3MgPSBibC0+cHJvcHMuYnJpZ2h0
bmVzczsKIAlzdHJ1Y3QgcHdtX3N0YXRlIHN0YXRlOwogCi0JaWYgKGJsLT5wcm9wcy5wb3dlciAh
PSBGQl9CTEFOS19VTkJMQU5LIHx8Ci0JICAgIGJsLT5wcm9wcy5mYl9ibGFuayAhPSBGQl9CTEFO
S19VTkJMQU5LIHx8Ci0JICAgIGJsLT5wcm9wcy5zdGF0ZSAmIEJMX0NPUkVfRkJCTEFOSykKKwlp
ZiAoYmFja2xpZ2h0X2lzX2JsYW5rKGJsKSkKIAkJYnJpZ2h0bmVzcyA9IDA7CiAKIAlpZiAocGIt
Pm5vdGlmeSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L3Fjb20td2xlZC5j
IGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvcWNvbS13bGVkLmMKaW5kZXggM2QyNzZiMzBhNzhj
Li45NjAwZjVkNThlY2UgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L3Fjb20t
d2xlZC5jCisrKyBiL2RyaXZlcnMvdmlkZW8vYmFja2xpZ2h0L3Fjb20td2xlZC5jCkBAIC0yNjEs
OSArMjYxLDcgQEAgc3RhdGljIGludCB3bGVkX3VwZGF0ZV9zdGF0dXMoc3RydWN0IGJhY2tsaWdo
dF9kZXZpY2UgKmJsKQogCXUxNiBicmlnaHRuZXNzID0gYmwtPnByb3BzLmJyaWdodG5lc3M7CiAJ
aW50IHJjID0gMDsKIAotCWlmIChibC0+cHJvcHMucG93ZXIgIT0gRkJfQkxBTktfVU5CTEFOSyB8
fAotCSAgICBibC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktfVU5CTEFOSyB8fAotCSAgICBi
bC0+cHJvcHMuc3RhdGUgJiBCTF9DT1JFX0ZCQkxBTkspCisJaWYgKGJhY2tsaWdodF9pc19ibGFu
ayhibCkpCiAJCWJyaWdodG5lc3MgPSAwOwogCiAJbXV0ZXhfbG9jaygmd2xlZC0+bG9jayk7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC90cHM2NTIxN19ibC5jIGIvZHJpdmVy
cy92aWRlby9iYWNrbGlnaHQvdHBzNjUyMTdfYmwuYwppbmRleCA3NjJlM2ZlZWQwOTcuLjEwNDFl
NWU2MmVlMyAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvdHBzNjUyMTdfYmwu
YworKysgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC90cHM2NTIxN19ibC5jCkBAIC04Miw5ICs4
Miw3IEBAIHN0YXRpYyBpbnQgdHBzNjUyMTdfYmxfdXBkYXRlX3N0YXR1cyhzdHJ1Y3QgYmFja2xp
Z2h0X2RldmljZSAqYmwpCiAJaWYgKGJsLT5wcm9wcy5zdGF0ZSAmIEJMX0NPUkVfU1VTUEVOREVE
KQogCQlicmlnaHRuZXNzID0gMDsKIAotCWlmICgoYmwtPnByb3BzLnBvd2VyICE9IEZCX0JMQU5L
X1VOQkxBTkspIHx8Ci0JCShibC0+cHJvcHMuZmJfYmxhbmsgIT0gRkJfQkxBTktfVU5CTEFOSykp
Ci0JCS8qIGZyYW1lYnVmZmVyIGluIGxvdyBwb3dlciBtb2RlIG9yIGJsYW5raW5nIGFjdGl2ZSAq
LworCWlmIChiYWNrbGlnaHRfaXNfYmxhbmsoYmwpKQogCQlicmlnaHRuZXNzID0gMDsKIAogCWlm
IChicmlnaHRuZXNzID4gMCkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9iYWNrbGlnaHQv
d204MzF4X2JsLmMgYi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC93bTgzMXhfYmwuYwppbmRleCBl
NTU5NzdkNTRjMTUuLmRjMmFiNmM4YjdmOSAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9iYWNr
bGlnaHQvd204MzF4X2JsLmMKKysrIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvd204MzF4X2Js
LmMKQEAgLTkzLDEzICs5Myw3IEBAIHN0YXRpYyBpbnQgd204MzF4X2JhY2tsaWdodF91cGRhdGVf
c3RhdHVzKHN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpibCkKIHsKIAlpbnQgYnJpZ2h0bmVzcyA9
IGJsLT5wcm9wcy5icmlnaHRuZXNzOwogCi0JaWYgKGJsLT5wcm9wcy5wb3dlciAhPSBGQl9CTEFO
S19VTkJMQU5LKQotCQlicmlnaHRuZXNzID0gMDsKLQotCWlmIChibC0+cHJvcHMuZmJfYmxhbmsg
IT0gRkJfQkxBTktfVU5CTEFOSykKLQkJYnJpZ2h0bmVzcyA9IDA7Ci0KLQlpZiAoYmwtPnByb3Bz
LnN0YXRlICYgQkxfQ09SRV9TVVNQRU5ERUQpCisJaWYgKGJhY2tsaWdodF9pc19ibGFuayhibCkp
CiAJCWJyaWdodG5lc3MgPSAwOwogCiAJcmV0dXJuIHdtODMxeF9iYWNrbGlnaHRfc2V0KGJsLCBi
cmlnaHRuZXNzKTsKLS0gCjIuMjUuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZHJpLWRldmVsCg==
