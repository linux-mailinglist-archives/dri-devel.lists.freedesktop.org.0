Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9A03013D5E1
	for <lists+dri-devel@lfdr.de>; Thu, 16 Jan 2020 09:21:35 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E8B9D6EC32;
	Thu, 16 Jan 2020 08:21:15 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yw1-xc42.google.com (mail-yw1-xc42.google.com
 [IPv6:2607:f8b0:4864:20::c42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C51E76EA8C
 for <dri-devel@lists.freedesktop.org>; Wed, 15 Jan 2020 19:15:13 +0000 (UTC)
Received: by mail-yw1-xc42.google.com with SMTP id d7so11504501ywl.12
 for <dri-devel@lists.freedesktop.org>; Wed, 15 Jan 2020 11:15:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=HlcF6FvCzrPWmzNxdJWr6k2jFPqzvneSGM0hHnT5B44=;
 b=r1cnNvbr0UPWnqSFl2L84SlXGDna6L466I6Xsm9fcz3QrmxJWDD6XUTlujG8+qYroi
 zaN4zZ0SdxMwmolFQJ4wWqYiPnYuw8+XQQEJ3q+y/J5WKs47Knk5lhuEFOVYSa7enhEg
 0V3MoRVqC5hili+YH+Iw2AlqdKe4SRe0uCDzIqRbWiB65ND4XjlqF+1aZGHIKGj8vqMx
 z8DwDba+QaMPiid0pEQReUAqaQr/mhdF46x3JIp+4C6ihUVZiJYx7VeszPP5GRKYOIAG
 IWjdAuQFxMGdlgkkKQTP8QwMSWZjs4L0k239d6q5o6oLO+Wp0VUyDP2Do4MToHFk/a+E
 BTuQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=HlcF6FvCzrPWmzNxdJWr6k2jFPqzvneSGM0hHnT5B44=;
 b=k7WqTwv5SZdDX6jTov2jr8p/7y8HzgfmxGJvk+wpjU9yG3ssKW1pnqG5tHWY4bJqgq
 8P2IBbnTcraOUpsx8eDF0usHJnzQ1Y1AJVr3njj6OOtvPPfZWNksCZ0t7rn0LnWKIpZP
 gNqJuplbXvt4dAA8XDEmz9/bT0n3zF65Ov1Qv6zWttvrH5OoTjSqs7PY1f55Od6ac2I8
 774qIpBfF2/FGNnGTK8WqlqJldlwHI8OGy7WVmOducTzTwyEPwGe4Q1A66YBLEJcigwf
 Q1gEzYYlnvjRJ5Htqa7+y2/fRO6b+rfJE3iipSo3qc7Xr+Va9xFg8nFfhldrdgxTCdkn
 Ng7Q==
X-Gm-Message-State: APjAAAWijHGTsWZey6/UBJfrI0Os/22gLJhueX6CeuigPLDEbQ1NBwxX
 IVdgX+v9FNBapPoMn59jUUXJhcmjQfDbsicz
X-Google-Smtp-Source: APXvYqyG8eZpoWEMSQbFqwZJApcHbO2QUpHV7trdL/4qb+rbRROqQeaSOJEKAAiMsW6uz8psz/hl6w==
X-Received: by 2002:a81:5d5:: with SMTP id 204mr20466434ywf.46.1579115712694; 
 Wed, 15 Jan 2020 11:15:12 -0800 (PST)
Received: from brihaspati.amd.com
 (p200300C58F2BBB00033A7193FF097830.dip0.t-ipconnect.de.
 [2003:c5:8f2b:bb00:33a:7193:ff09:7830])
 by smtp.gmail.com with ESMTPSA id p206sm8743348ywg.94.2020.01.15.11.15.10
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 15 Jan 2020 11:15:11 -0800 (PST)
From: Nirmoy Das <nirmoy.aiemd@gmail.com>
X-Google-Original-From: Nirmoy Das <nirmoy.das@amd.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH] drm/scheduler: improve job distribution with multiple queues
Date: Wed, 15 Jan 2020 20:16:32 +0100
Message-Id: <20200115191632.80430-1-nirmoy.das@amd.com>
X-Mailer: git-send-email 2.24.1
MIME-Version: 1.0
X-Mailman-Approved-At: Thu, 16 Jan 2020 08:21:03 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: nirmoy.das@amd.com, christian.koenig@amd.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCB1c2VzIHNjb3JlIGJhc2VkIGxvZ2ljIHRvIHNlbGVjdCBhIG5ldyBycSBmb3Ig
YmV0dGVyCmxvYWRiYWxhbmNlIGJldHdlZW4gbXVsdGlwbGUgcnEvc2NoZWRzIGluc3RlYWQgb2Yg
bnVtX2pvYnMuCgpCZWxvdyBhcmUgdGVzdCByZXN1bHRzIGFmdGVyIHJ1bm5pbmcgYW1kZ3B1X3Rl
c3QgZnJvbSBtZXNhIGRybQoKQmVmb3JlIHRoaXMgcGF0Y2g6CgpzY2hlZF9uYW1lICAgICBudW0g
b2YgbWFueSB0aW1lcyBpdCBnb3Qgc2NoZWR1bGVkCj09PT09PT09PSAgICAgID09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0Kc2RtYTAgICAgICAgICAgMzE0CnNkbWExICAgICAgICAg
IDMyCmNvbXBfMS4wLjAgICAgIDU2CmNvbXBfMS4wLjEgICAgIDAKY29tcF8xLjEuMCAgICAgMApj
b21wXzEuMS4xICAgICAwCmNvbXBfMS4yLjAgICAgIDAKY29tcF8xLjIuMSAgICAgMApjb21wXzEu
My4wICAgICAwCmNvbXBfMS4zLjEgICAgIDAKQWZ0ZXIgdGhpcyBwYXRjaDoKCnNjaGVkX25hbWUg
ICAgIG51bSBvZiBtYW55IHRpbWVzIGl0IGdvdCBzY2hlZHVsZWQKPT09PT09PT09ICAgICAgPT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpzZG1hMCAgICAgICAgICAyMTYKc2RtYTEg
ICAgICAgICAgMTg1CmNvbXBfMS4wLjAgICAgIDM5CmNvbXBfMS4wLjEgICAgIDkKY29tcF8xLjEu
MCAgICAgMTIKY29tcF8xLjEuMSAgICAgMApjb21wXzEuMi4wICAgICAxMgpjb21wXzEuMi4xICAg
ICAwCmNvbXBfMS4zLjAgICAgIDEyCmNvbXBfMS4zLjEgICAgIDAKClNpZ25lZC1vZmYtYnk6IE5p
cm1veSBEYXMgPG5pcm1veS5kYXNAYW1kLmNvbT4KUmV2aWV3ZWQtYnk6IENocmlzdGlhbiBLw7Zu
aWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vc2NoZWR1
bGVyL3NjaGVkX2VudGl0eS5jIHwgMTAgKysrKystLS0tLQogZHJpdmVycy9ncHUvZHJtL3NjaGVk
dWxlci9zY2hlZF9tYWluLmMgICB8ICA2ICsrKystLQogaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxl
ci5oICAgICAgICAgICAgICB8ICA2ICsrKy0tLQogMyBmaWxlcyBjaGFuZ2VkLCAxMiBpbnNlcnRp
b25zKCspLCAxMCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vc2No
ZWR1bGVyL3NjaGVkX2VudGl0eS5jIGIvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9l
bnRpdHkuYwppbmRleCAyZTNhMDU4ZmMyMzkuLjMzZTJjZDEwODlhMiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9lbnRpdHkuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vc2NoZWR1bGVyL3NjaGVkX2VudGl0eS5jCkBAIC0xMzAsNyArMTMwLDcgQEAgc3RhdGljIHN0
cnVjdCBkcm1fc2NoZWRfcnEgKgogZHJtX3NjaGVkX2VudGl0eV9nZXRfZnJlZV9zY2hlZChzdHJ1
Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5KQogewogCXN0cnVjdCBkcm1fc2NoZWRfcnEgKnJx
ID0gTlVMTDsKLQl1bnNpZ25lZCBpbnQgbWluX2pvYnMgPSBVSU5UX01BWCwgbnVtX2pvYnM7CisJ
dW5zaWduZWQgaW50IG1pbl9zY29yZSA9IFVJTlRfTUFYLCBudW1fc2NvcmU7CiAJaW50IGk7CiAK
IAlmb3IgKGkgPSAwOyBpIDwgZW50aXR5LT5udW1fc2NoZWRfbGlzdDsgKytpKSB7CkBAIC0xNDEs
OSArMTQxLDkgQEAgZHJtX3NjaGVkX2VudGl0eV9nZXRfZnJlZV9zY2hlZChzdHJ1Y3QgZHJtX3Nj
aGVkX2VudGl0eSAqZW50aXR5KQogCQkJY29udGludWU7CiAJCX0KIAotCQludW1fam9icyA9IGF0
b21pY19yZWFkKCZzY2hlZC0+bnVtX2pvYnMpOwotCQlpZiAobnVtX2pvYnMgPCBtaW5fam9icykg
ewotCQkJbWluX2pvYnMgPSBudW1fam9iczsKKwkJbnVtX3Njb3JlID0gYXRvbWljX3JlYWQoJnNj
aGVkLT5zY29yZSk7CisJCWlmIChudW1fc2NvcmUgPCBtaW5fc2NvcmUpIHsKKwkJCW1pbl9zY29y
ZSA9IG51bV9zY29yZTsKIAkJCXJxID0gJmVudGl0eS0+c2NoZWRfbGlzdFtpXS0+c2NoZWRfcnFb
ZW50aXR5LT5wcmlvcml0eV07CiAJCX0KIAl9CkBAIC00OTgsNyArNDk4LDcgQEAgdm9pZCBkcm1f
c2NoZWRfZW50aXR5X3B1c2hfam9iKHN0cnVjdCBkcm1fc2NoZWRfam9iICpzY2hlZF9qb2IsCiAJ
Ym9vbCBmaXJzdDsKIAogCXRyYWNlX2RybV9zY2hlZF9qb2Ioc2NoZWRfam9iLCBlbnRpdHkpOwot
CWF0b21pY19pbmMoJmVudGl0eS0+cnEtPnNjaGVkLT5udW1fam9icyk7CisJYXRvbWljX2luYygm
ZW50aXR5LT5ycS0+c2NoZWQtPnNjb3JlKTsKIAlXUklURV9PTkNFKGVudGl0eS0+bGFzdF91c2Vy
LCBjdXJyZW50LT5ncm91cF9sZWFkZXIpOwogCWZpcnN0ID0gc3BzY19xdWV1ZV9wdXNoKCZlbnRp
dHktPmpvYl9xdWV1ZSwgJnNjaGVkX2pvYi0+cXVldWVfbm9kZSk7CiAKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2NoZWRfbWFpbi5jIGIvZHJpdmVycy9ncHUvZHJtL3Nj
aGVkdWxlci9zY2hlZF9tYWluLmMKaW5kZXggM2ZhZDU4NzZhMTNmLi43MWNlNjIxNTk1NmYgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2NoZWRfbWFpbi5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2NoZWRfbWFpbi5jCkBAIC05Miw2ICs5Miw3IEBAIHZv
aWQgZHJtX3NjaGVkX3JxX2FkZF9lbnRpdHkoc3RydWN0IGRybV9zY2hlZF9ycSAqcnEsCiAJaWYg
KCFsaXN0X2VtcHR5KCZlbnRpdHktPmxpc3QpKQogCQlyZXR1cm47CiAJc3Bpbl9sb2NrKCZycS0+
bG9jayk7CisJYXRvbWljX2luYygmcnEtPnNjaGVkLT5zY29yZSk7CiAJbGlzdF9hZGRfdGFpbCgm
ZW50aXR5LT5saXN0LCAmcnEtPmVudGl0aWVzKTsKIAlzcGluX3VubG9jaygmcnEtPmxvY2spOwog
fQpAQCAtMTEwLDYgKzExMSw3IEBAIHZvaWQgZHJtX3NjaGVkX3JxX3JlbW92ZV9lbnRpdHkoc3Ry
dWN0IGRybV9zY2hlZF9ycSAqcnEsCiAJaWYgKGxpc3RfZW1wdHkoJmVudGl0eS0+bGlzdCkpCiAJ
CXJldHVybjsKIAlzcGluX2xvY2soJnJxLT5sb2NrKTsKKwlhdG9taWNfZGVjKCZycS0+c2NoZWQt
PnNjb3JlKTsKIAlsaXN0X2RlbF9pbml0KCZlbnRpdHktPmxpc3QpOwogCWlmIChycS0+Y3VycmVu
dF9lbnRpdHkgPT0gZW50aXR5KQogCQlycS0+Y3VycmVudF9lbnRpdHkgPSBOVUxMOwpAQCAtNjU1
LDcgKzY1Nyw3IEBAIHN0YXRpYyB2b2lkIGRybV9zY2hlZF9wcm9jZXNzX2pvYihzdHJ1Y3QgZG1h
X2ZlbmNlICpmLCBzdHJ1Y3QgZG1hX2ZlbmNlX2NiICpjYikKIAlzdHJ1Y3QgZHJtX2dwdV9zY2hl
ZHVsZXIgKnNjaGVkID0gc19mZW5jZS0+c2NoZWQ7CiAKIAlhdG9taWNfZGVjKCZzY2hlZC0+aHdf
cnFfY291bnQpOwotCWF0b21pY19kZWMoJnNjaGVkLT5udW1fam9icyk7CisJYXRvbWljX2RlYygm
c2NoZWQtPnNjb3JlKTsKIAogCXRyYWNlX2RybV9zY2hlZF9wcm9jZXNzX2pvYihzX2ZlbmNlKTsK
IApAQCAtODMwLDcgKzgzMiw3IEBAIGludCBkcm1fc2NoZWRfaW5pdChzdHJ1Y3QgZHJtX2dwdV9z
Y2hlZHVsZXIgKnNjaGVkLAogCXNwaW5fbG9ja19pbml0KCZzY2hlZC0+am9iX2xpc3RfbG9jayk7
CiAJYXRvbWljX3NldCgmc2NoZWQtPmh3X3JxX2NvdW50LCAwKTsKIAlJTklUX0RFTEFZRURfV09S
Sygmc2NoZWQtPndvcmtfdGRyLCBkcm1fc2NoZWRfam9iX3RpbWVkb3V0KTsKLQlhdG9taWNfc2V0
KCZzY2hlZC0+bnVtX2pvYnMsIDApOworCWF0b21pY19zZXQoJnNjaGVkLT5zY29yZSwgMCk7CiAJ
YXRvbWljNjRfc2V0KCZzY2hlZC0+am9iX2lkX2NvdW50LCAwKTsKIAogCS8qIEVhY2ggc2NoZWR1
bGVyIHdpbGwgcnVuIG9uIGEgc2VwZXJhdGUga2VybmVsIHRocmVhZCAqLwpkaWZmIC0tZ2l0IGEv
aW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oIGIvaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5o
CmluZGV4IDk2YTFhMWI3NTI2ZS4uNTM3ZjdhNDY1NWE1IDEwMDY0NAotLS0gYS9pbmNsdWRlL2Ry
bS9ncHVfc2NoZWR1bGVyLmgKKysrIGIvaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oCkBAIC0y
NjEsNyArMjYxLDcgQEAgc3RydWN0IGRybV9zY2hlZF9iYWNrZW5kX29wcyB7CiAgKiBAam9iX2xp
c3RfbG9jazogbG9jayB0byBwcm90ZWN0IHRoZSByaW5nX21pcnJvcl9saXN0LgogICogQGhhbmdf
bGltaXQ6IG9uY2UgdGhlIGhhbmdzIGJ5IGEgam9iIGNyb3NzZXMgdGhpcyBsaW1pdCB0aGVuIGl0
IGlzIG1hcmtlZAogICogICAgICAgICAgICAgIGd1aWx0eSBhbmQgaXQgd2lsbCBiZSBjb25zaWRl
cmVkIGZvciBzY2hlZHVsaW5nIGZ1cnRoZXIuCi0gKiBAbnVtX2pvYnM6IHRoZSBudW1iZXIgb2Yg
am9icyBpbiBxdWV1ZSBpbiB0aGUgc2NoZWR1bGVyCisgKiBAc2NvcmU6IHNjb3JlIHRvIGhlbHAg
bG9hZGJhbGFuY2VyIHBpY2sgYSBpZGxlIHNjaGVkCiAgKiBAcmVhZHk6IG1hcmtzIGlmIHRoZSB1
bmRlcmx5aW5nIEhXIGlzIHJlYWR5IHRvIHdvcmsKICAqIEBmcmVlX2d1aWx0eTogQSBoaXQgdG8g
dGltZSBvdXQgaGFuZGxlciB0byBmcmVlIHRoZSBndWlsdHkgam9iLgogICoKQEAgLTI4Miw4ICsy
ODIsOCBAQCBzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgewogCXN0cnVjdCBsaXN0X2hlYWQJCXJp
bmdfbWlycm9yX2xpc3Q7CiAJc3BpbmxvY2tfdAkJCWpvYl9saXN0X2xvY2s7CiAJaW50CQkJCWhh
bmdfbGltaXQ7Ci0JYXRvbWljX3QgICAgICAgICAgICAgICAgICAgICAgICBudW1fam9iczsKLQli
b29sCQkJcmVhZHk7CisJYXRvbWljX3QgICAgICAgICAgICAgICAgICAgICAgICBzY29yZTsKKwli
b29sCQkJCXJlYWR5OwogCWJvb2wJCQkJZnJlZV9ndWlsdHk7CiB9OwogCi0tIAoyLjI0LjEKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBt
YWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3Rz
LmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
