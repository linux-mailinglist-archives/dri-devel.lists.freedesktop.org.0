Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5E349D2F1C
	for <lists+dri-devel@lfdr.de>; Thu, 10 Oct 2019 18:59:58 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C47CB6E39B;
	Thu, 10 Oct 2019 16:59:54 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-oi1-x243.google.com (mail-oi1-x243.google.com
 [IPv6:2607:f8b0:4864:20::243])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B07BC6E39B
 for <dri-devel@lists.freedesktop.org>; Thu, 10 Oct 2019 16:59:53 +0000 (UTC)
Received: by mail-oi1-x243.google.com with SMTP id m16so5538842oic.5
 for <dri-devel@lists.freedesktop.org>; Thu, 10 Oct 2019 09:59:53 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=aHimc4tAoWAKuAFhEPiqFA3zSp+BGYBGWofr3SZn1Ug=;
 b=hmDhZpXkK9sB0oYI2y3FnQztePR50Zi71+Sbz0F0a3lktnwRyPJ+3elPsN8CViEjZ9
 mYfN5qws9XTXSHvLsJbvZ1Dm9qorqz+kI+Af2M5ZCfWcb89rLYUMPIBWxdlW8lx/KOQw
 gbfFY/RRXcscHvtl348Akxj8vpJVb6dOYrtTOl9tQn8TWUAn2HiFCRHOvRbK1rhWhXHw
 wZIsYPRiaXsAi1sVAsGrUAYD1s72WIm1KP1upLJ9Bi1hB9m9elSUMh4zWuK1XSL9IvNR
 8CJZUiPuVLNC4dzkt/qGZO1SP0esrjk/F2Y7r2inLeHgJqW6Nv/s9dGSOJvQPS6ojS5f
 nikg==
X-Gm-Message-State: APjAAAXqHEQZ/RFH/q9I8kYvVFbhDYO+tf2hvYmHO7JoFTHXHSw8IIvK
 gCvuCTpRwdSDvAwnWgnbbtq2Ca7tct5oLZtgMyvFWg==
X-Google-Smtp-Source: APXvYqzPYQykgI1Y4ptA/3CvyFPyiB0TmLhBKZuEEY/nbdZrC6dQKR6mtk9ysRdMTj/CETG+sh09q5ztd7VQ4mObSmg=
X-Received: by 2002:aca:1b10:: with SMTP id b16mr8800199oib.110.1570726792751; 
 Thu, 10 Oct 2019 09:59:52 -0700 (PDT)
MIME-Version: 1.0
References: <20191010162817.55446-1-hdegoede@redhat.com>
In-Reply-To: <20191010162817.55446-1-hdegoede@redhat.com>
From: Daniel Vetter <daniel@ffwll.ch>
Date: Thu, 10 Oct 2019 18:59:41 +0200
Message-ID: <CAKMK7uECLjVPp4gHJ2k76rVaTPJN+Ebjx7Bx6n-_cqAk3nQDmg@mail.gmail.com>
Subject: Re: [PATCH] drm/amdgpu: Bail earlier when amdgpu.cik_/si_support is
 not set to 1
To: Hans de Goede <hdegoede@redhat.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=aHimc4tAoWAKuAFhEPiqFA3zSp+BGYBGWofr3SZn1Ug=;
 b=X83fOYikW3gKFbrlVBYOSfi3RQWiLS8ENQaxAr8RclXbi/lNU3GdeVzL+9YW43fKY+
 6rhmTAA4bpWRUuQthieBpRoBxB6oi25ke8r6rRNDZJ1v6wn8nIQ4agqsQNj58VvSTk8U
 nxuqSoFm+ysnlTkZygc+QvBiljhWbisu/brwo=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 amd-gfx list <amd-gfx@lists.freedesktop.org>,
 Alex Deucher <alexander.deucher@amd.com>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBPY3QgMTAsIDIwMTkgYXQgNjoyOCBQTSBIYW5zIGRlIEdvZWRlIDxoZGVnb2VkZUBy
ZWRoYXQuY29tPiB3cm90ZToKPgo+IEJhaWwgZnJvbSB0aGUgcGNpX2RyaXZlciBwcm9iZSBmdW5j
dGlvbiBpbnN0ZWFkIG9mIGZyb20gdGhlIGRybV9kcml2ZXIKPiBsb2FkIGZ1bmN0aW9uLgo+Cj4g
VGhpcyBhdm9pZCAvZGV2L2RyaS9jYXJkMCB0ZW1wb3JhcmlseSBnZXR0aW5nIHJlZ2lzdGVyZWQg
YW5kIHRoZW4KPiB1bnJlZ2lzdGVyZWQgYWdhaW4sIHNlbmRpbmcgdW53YW50ZWQgYWRkIC8gcmVt
b3ZlIHVkZXYgZXZlbnRzIHRvCj4gdXNlcnNwYWNlLgo+Cj4gU3BlY2lmaWNhbGx5IHRoaXMgYXZv
aWRzIHRyaWdnZXJpbmcgdGhlICh1c2Vyc3BhY2UpIGJ1ZyBmaXhlZCBieSB0aGlzCj4gcGx5bW91
dGggbWVyZ2UtcmVxdWVzdDoKPiBodHRwczovL2dpdGxhYi5mcmVlZGVza3RvcC5vcmcvcGx5bW91
dGgvcGx5bW91dGgvbWVyZ2VfcmVxdWVzdHMvNTkKPgo+IE5vdGUgdGhhdCBkZXNwaXRlIHRoYXQg
YmVpbmcgYSB1c2Vyc3BhY2UgYnVnLCBub3Qgc2VuZGluZyB1bm5lY2Vzc2FyeQo+IHVkZXYgZXZl
bnRzIGlzIGEgZ29vZCBpZGVhIGluIGdlbmVyYWwuCgpJIHRoaW5rIGV2ZW4gYmV0dGVyIHdvdWxk
IGJlIGdldHRpbmcgcmlkIG9mIHRoZSBsb2FkL3VubG9hZCBjYWxsYmFja3MsCnRoaXMgaXNzdWUg
aGVyZSBpc24ndCB0aGUgb25seSBwcm9ibGVtIHdpdGggdGhlbS4KClJldmlld2VkLWJ5OiBEYW5p
ZWwgVmV0dGVyIDxkYW5pZWwudmV0dGVyQGZmd2xsLmNoPgoKSSBndWVzcyBhbHNvIGNjOiBzdGFi
bGUgbWF0ZXJpYWw/Ci1EYW5pZWwKPgo+IEJ1Z0xpbms6IGh0dHBzOi8vYnVnemlsbGEucmVkaGF0
LmNvbS9zaG93X2J1Zy5jZ2k/aWQ9MTQ5MDQ5MAo+IFNpZ25lZC1vZmYtYnk6IEhhbnMgZGUgR29l
ZGUgPGhkZWdvZWRlQHJlZGhhdC5jb20+Cj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9kcnYuYyB8IDM1ICsrKysrKysrKysrKysrKysrKysrKysrKysKPiAgZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2ttcy5jIHwgMzUgLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQo+ICAyIGZpbGVzIGNoYW5nZWQsIDM1IGluc2VydGlvbnMoKyksIDM1IGRlbGV0aW9u
cygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9k
cnYuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kcnYuYwo+IGluZGV4IDZm
OGFhZjY1NWE5Zi4uMmEwMGEzNjEwNmIyIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9kcnYuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9kcnYuYwo+IEBAIC0xMDQ4LDYgKzEwNDgsNDEgQEAgc3RhdGljIGludCBhbWRncHVf
cGNpX3Byb2JlKHN0cnVjdCBwY2lfZGV2ICpwZGV2LAo+ICAgICAgICAgICAgICAgICByZXR1cm4g
LUVOT0RFVjsKPiAgICAgICAgIH0KPgo+ICsjaWZkZWYgQ09ORklHX0RSTV9BTURHUFVfU0kKPiAr
ICAgICAgIGlmICghYW1kZ3B1X3NpX3N1cHBvcnQpIHsKPiArICAgICAgICAgICAgICAgc3dpdGNo
IChmbGFncyAmIEFNRF9BU0lDX01BU0spIHsKPiArICAgICAgICAgICAgICAgY2FzZSBDSElQX1RB
SElUSToKPiArICAgICAgICAgICAgICAgY2FzZSBDSElQX1BJVENBSVJOOgo+ICsgICAgICAgICAg
ICAgICBjYXNlIENISVBfVkVSREU6Cj4gKyAgICAgICAgICAgICAgIGNhc2UgQ0hJUF9PTEFORDoK
PiArICAgICAgICAgICAgICAgY2FzZSBDSElQX0hBSU5BTjoKPiArICAgICAgICAgICAgICAgICAg
ICAgICBkZXZfaW5mbygmcGRldi0+ZGV2LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICJTSSBzdXBwb3J0IHByb3ZpZGVkIGJ5IHJhZGVvbi5cbiIpOwo+ICsgICAgICAgICAgICAg
ICAgICAgICAgIGRldl9pbmZvKCZwZGV2LT5kZXYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIlVzZSByYWRlb24uc2lfc3VwcG9ydD0wIGFtZGdwdS5zaV9zdXBwb3J0PTEgdG8g
b3ZlcnJpZGUuXG4iCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIHJldHVybiAtRU5PREVWOwo+ICsgICAgICAgICAgICAgICB9Cj4g
KyAgICAgICB9Cj4gKyNlbmRpZgo+ICsjaWZkZWYgQ09ORklHX0RSTV9BTURHUFVfQ0lLCj4gKyAg
ICAgICBpZiAoIWFtZGdwdV9jaWtfc3VwcG9ydCkgewo+ICsgICAgICAgICAgICAgICBzd2l0Y2gg
KGZsYWdzICYgQU1EX0FTSUNfTUFTSykgewo+ICsgICAgICAgICAgICAgICBjYXNlIENISVBfS0FW
RVJJOgo+ICsgICAgICAgICAgICAgICBjYXNlIENISVBfQk9OQUlSRToKPiArICAgICAgICAgICAg
ICAgY2FzZSBDSElQX0hBV0FJSToKPiArICAgICAgICAgICAgICAgY2FzZSBDSElQX0tBQklOSToK
PiArICAgICAgICAgICAgICAgY2FzZSBDSElQX01VTExJTlM6Cj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgZGV2X2luZm8oJnBkZXYtPmRldiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAiQ0lLIHN1cHBvcnQgcHJvdmlkZWQgYnkgcmFkZW9uLlxuIik7Cj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgZGV2X2luZm8oJnBkZXYtPmRldiwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAiVXNlIHJhZGVvbi5jaWtfc3VwcG9ydD0wIGFtZGdwdS5jaWtfc3VwcG9ydD0x
IHRvIG92ZXJyaWRlLlxuIgo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKPiAr
ICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLUVOT0RFVjsKPiArICAgICAgICAgICAgICAg
fQo+ICsgICAgICAgfQo+ICsjZW5kaWYKPiArCj4gICAgICAgICAvKiBHZXQgcmlkIG9mIHRoaW5n
cyBsaWtlIG9mZmIgKi8KPiAgICAgICAgIHJldCA9IGRybV9mYl9oZWxwZXJfcmVtb3ZlX2NvbmZs
aWN0aW5nX3BjaV9mcmFtZWJ1ZmZlcnMocGRldiwgMCwgImFtZGdwdWRybWZiIik7Cj4gICAgICAg
ICBpZiAocmV0KQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfa21zLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfa21zLmMKPiBpbmRl
eCBmMmMwOTc5ODNmNDguLmQ1NWY1YmFhODNkMyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfa21zLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfa21zLmMKPiBAQCAtMTQ0LDQxICsxNDQsNiBAQCBpbnQgYW1kZ3B1X2RyaXZl
cl9sb2FkX2ttcyhzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1bnNpZ25lZCBsb25nIGZsYWdzKQo+
ICAgICAgICAgc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXY7Cj4gICAgICAgICBpbnQgciwgYWNw
aV9zdGF0dXM7Cj4KPiAtI2lmZGVmIENPTkZJR19EUk1fQU1ER1BVX1NJCj4gLSAgICAgICBpZiAo
IWFtZGdwdV9zaV9zdXBwb3J0KSB7Cj4gLSAgICAgICAgICAgICAgIHN3aXRjaCAoZmxhZ3MgJiBB
TURfQVNJQ19NQVNLKSB7Cj4gLSAgICAgICAgICAgICAgIGNhc2UgQ0hJUF9UQUhJVEk6Cj4gLSAg
ICAgICAgICAgICAgIGNhc2UgQ0hJUF9QSVRDQUlSTjoKPiAtICAgICAgICAgICAgICAgY2FzZSBD
SElQX1ZFUkRFOgo+IC0gICAgICAgICAgICAgICBjYXNlIENISVBfT0xBTkQ6Cj4gLSAgICAgICAg
ICAgICAgIGNhc2UgQ0hJUF9IQUlOQU46Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgZGV2X2lu
Zm8oZGV2LT5kZXYsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNJIHN1cHBv
cnQgcHJvdmlkZWQgYnkgcmFkZW9uLlxuIik7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgZGV2
X2luZm8oZGV2LT5kZXYsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlVzZSBy
YWRlb24uc2lfc3VwcG9ydD0wIGFtZGdwdS5zaV9zdXBwb3J0PTEgdG8gb3ZlcnJpZGUuXG4iCj4g
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwo+IC0gICAgICAgICAgICAgICAgICAg
ICAgIHJldHVybiAtRU5PREVWOwo+IC0gICAgICAgICAgICAgICB9Cj4gLSAgICAgICB9Cj4gLSNl
bmRpZgo+IC0jaWZkZWYgQ09ORklHX0RSTV9BTURHUFVfQ0lLCj4gLSAgICAgICBpZiAoIWFtZGdw
dV9jaWtfc3VwcG9ydCkgewo+IC0gICAgICAgICAgICAgICBzd2l0Y2ggKGZsYWdzICYgQU1EX0FT
SUNfTUFTSykgewo+IC0gICAgICAgICAgICAgICBjYXNlIENISVBfS0FWRVJJOgo+IC0gICAgICAg
ICAgICAgICBjYXNlIENISVBfQk9OQUlSRToKPiAtICAgICAgICAgICAgICAgY2FzZSBDSElQX0hB
V0FJSToKPiAtICAgICAgICAgICAgICAgY2FzZSBDSElQX0tBQklOSToKPiAtICAgICAgICAgICAg
ICAgY2FzZSBDSElQX01VTExJTlM6Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgZGV2X2luZm8o
ZGV2LT5kZXYsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNJSyBzdXBwb3J0
IHByb3ZpZGVkIGJ5IHJhZGVvbi5cbiIpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIGRldl9p
bmZvKGRldi0+ZGV2LAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJVc2UgcmFk
ZW9uLmNpa19zdXBwb3J0PTAgYW1kZ3B1LmNpa19zdXBwb3J0PTEgdG8gb3ZlcnJpZGUuXG4iCj4g
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwo+IC0gICAgICAgICAgICAgICAgICAg
ICAgIHJldHVybiAtRU5PREVWOwo+IC0gICAgICAgICAgICAgICB9Cj4gLSAgICAgICB9Cj4gLSNl
bmRpZgo+IC0KPiAgICAgICAgIGFkZXYgPSBremFsbG9jKHNpemVvZihzdHJ1Y3QgYW1kZ3B1X2Rl
dmljZSksIEdGUF9LRVJORUwpOwo+ICAgICAgICAgaWYgKGFkZXYgPT0gTlVMTCkgewo+ICAgICAg
ICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiAtLQo+IDIuMjMuMAo+CgoKLS0gCkRhbmllbCBW
ZXR0ZXIKU29mdHdhcmUgRW5naW5lZXIsIEludGVsIENvcnBvcmF0aW9uCis0MSAoMCkgNzkgMzY1
IDU3IDQ4IC0gaHR0cDovL2Jsb2cuZmZ3bGwuY2gKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vZHJpLWRldmVs
