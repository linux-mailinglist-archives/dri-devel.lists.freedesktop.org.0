Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3E871104CF7
	for <lists+dri-devel@lfdr.de>; Thu, 21 Nov 2019 08:59:25 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BD90D6EB43;
	Thu, 21 Nov 2019 07:59:20 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from alexa-out-blr-02.qualcomm.com (alexa-out-blr-02.qualcomm.com
 [103.229.18.198])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E96BD6E264;
 Wed, 20 Nov 2019 11:34:13 +0000 (UTC)
Received: from ironmsg01-blr.qualcomm.com ([10.86.208.130])
 by alexa-out-blr-02.qualcomm.com with ESMTP/TLS/AES256-SHA;
 20 Nov 2019 17:03:00 +0530
IronPort-SDR: H7IAH2QcpxkJu85EOZEfnWXQnzCR4zsjjE7TfiznoPfGGJjHn6qyIoRC+a0h5vQU7B4E6xFlG7
 onMY7tMs9zI0kq/x+CT30kq6UF1kQ3K93c81113BfvZjuPjrunRuX+2+p08Ds54Cv63YFLZ1uD
 GXQmt1l6OJBvs+shM8jIoj/f8/JC67ng9xH5pFNp+3/v1+kO3p5JTz+pIYGaBVuWbl+wHU585q
 s3v3QLmgKtoreObYBJb3IbDnnsgzHxJO8E3Gniq8pNsTwW5nLzO+i/YSs32ixm8Xb6DB0ToEDS
 DRENf4uqL1pzCN2x6pdOM4q2
Received: from dhar-linux.qualcomm.com ([10.204.66.25])
 by ironmsg01-blr.qualcomm.com with ESMTP; 20 Nov 2019 17:02:36 +0530
Received: by dhar-linux.qualcomm.com (Postfix, from userid 2306995)
 id BA2113B25; Wed, 20 Nov 2019 17:02:34 +0530 (IST)
From: Shubhashree Dhar <dhar@codeaurora.org>
To: dri-devel@lists.freedesktop.org, linux-arm-msm@vger.kernel.org,
 freedreno@lists.freedesktop.org, devicetree@vger.kernel.org
Subject: [PATCH] msm: disp: dpu1: add support to access hw irqs regs depending
 on revision
Date: Wed, 20 Nov 2019 17:02:31 +0530
Message-Id: <1574249551-13212-1-git-send-email-dhar@codeaurora.org>
X-Mailer: git-send-email 1.9.1
X-Mailman-Approved-At: Thu, 21 Nov 2019 07:59:20 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Shubhashree Dhar <dhar@codeaurora.org>, linux-kernel@vger.kernel.org,
 abhinavk@codeaurora.org, seanpaul@chromium.org, hoegsberg@chromium.org,
 chandanu@codeaurora.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q3VycmVudCBjb2RlIGFzc3VtZXMgdGhhdCBhbGwgdGhlIGlycXMgcmVnaXN0ZXJzIG9mZnNldHMg
Y2FuIGJlCmFjY2Vzc2VkIGluIGFsbCB0aGUgaHcgcmV2aXNpb25zOyB0aGlzIGlzIG5vdCB0aGUg
Y2FzZSBmb3Igc29tZQp0YXJnZXRzIHRoYXQgc2hvdWxkIG5vdCBhY2Nlc3Mgc29tZSBvZiB0aGUg
aXJxIHJlZ2lzdGVycy4KVGhpcyBjaGFuZ2UgYWRkcyB0aGUgc3VwcG9ydCB0byBzZWxlY3RpdmVs
eSByZW1vdmUgdGhlIGlycXMgdGhhdAphcmUgbm90IHN1cHBvcnRlZCBpbiBzb21lIG9mIHRoZSBo
dyByZXZpc2lvbnMuCgpDaGFuZ2VzIGluIHYxOgogLSBBZGQgc3VwcG9ydCB0byBzZWxlY3RpdmVs
eSByZW1vdmUgdGhlIGh3IGlycXMgdGhhdCBhcmUgbm90CiAgIG5vdCBzdXBwb3J0ZWQuCgpDaGFu
Z2VzIGluIHYyOgogLSBSZW1vdmUgdW5yZWxhdGVkIGNoYW5nZXMuCgpDaGFuZ2VzIGluIHYzOgog
LSBSZW1vdmUgY2hhbmdlLWlkIChTdGVwaGVuIEJveWQpLgogLSBBZGQgY29sb24gaW4gdmFyaWFi
bGUgZGVzY3JpcHRpb24gdG8gbWF0Y2gga2VybmVsLWRvYyAoU3RlcGhlbiBCb3lkKS4KIC0gQ2hh
bmdlIG1hY3JvLXkgd2F5IG9mIHZhcmlhYmxlIGRlc2NyaXB0aW9uIChKb3Jkb24gQ3JvdXNlKS4K
IC0gUmVtb3ZlIHVubmVjZXNzYXJ5IGlmIGNoZWNrcyAoSm9yZG9uIENyb3VzZSkuCiAtIFJlbW92
ZSBleHRyYSBibGFuayBsaW5lIChKb3Jkb24gQ3JvdXNlKS4KCkNoYW5nZXMgaW4gdjQ6CiAtIFJl
bW92ZSBjaGVja3BhdGNoIGVycm9ycy4KClNpZ25lZC1vZmYtYnk6IFNodWJoYXNocmVlIERoYXIg
PGRoYXJAY29kZWF1cm9yYS5vcmc+Ci0tLQogZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEv
ZHB1X2h3X2NhdGFsb2cuYyAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUx
L2RwdV9od19jYXRhbG9nLmggICAgfCAgMyArKysKIGRyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9k
cHUxL2RwdV9od19pbnRlcnJ1cHRzLmMgfCAyMiArKysrKysrKysrKysrKysrLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfaW50ZXJydXB0cy5oIHwgIDEgKwogNCBm
aWxlcyBjaGFuZ2VkLCAyMSBpbnNlcnRpb25zKCspLCA2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jYXRhbG9nLmMgYi9kcml2
ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfY2F0YWxvZy5jCmluZGV4IDA0YzhjNDQu
Ljg4ZjI2NjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9o
d19jYXRhbG9nLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2Nh
dGFsb2cuYwpAQCAtNDIxLDYgKzQyMSw3IEBAIHN0YXRpYyB2b2lkIHNkbTg0NV9jZmdfaW5pdChz
dHJ1Y3QgZHB1X21kc3NfY2ZnICpkcHVfY2ZnKQogCQkucmVnX2RtYV9jb3VudCA9IDEsCiAJCS5k
bWFfY2ZnID0gc2RtODQ1X3JlZ2RtYSwKIAkJLnBlcmYgPSBzZG04NDVfcGVyZl9kYXRhLAorCQku
bWRzc19pcnFzID0gMHgzZmYsCiAJfTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L21zbS9kaXNwL2RwdTEvZHB1X2h3X2NhdGFsb2cuaCBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlz
cC9kcHUxL2RwdV9od19jYXRhbG9nLmgKaW5kZXggZWM3NmI4NjguLjBmZDNmNTAgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jYXRhbG9nLmgKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2NhdGFsb2cuaApAQCAtNjQ2LDYg
KzY0Niw3IEBAIHN0cnVjdCBkcHVfcGVyZl9jZmcgewogICogQGRtYV9mb3JtYXRzICAgICAgICBT
dXBwb3J0ZWQgZm9ybWF0cyBmb3IgZG1hIHBpcGUKICAqIEBjdXJzb3JfZm9ybWF0cyAgICAgU3Vw
cG9ydGVkIGZvcm1hdHMgZm9yIGN1cnNvciBwaXBlCiAgKiBAdmlnX2Zvcm1hdHMgICAgICAgIFN1
cHBvcnRlZCBmb3JtYXRzIGZvciB2aWcgcGlwZQorICogQG1kc3NfaXJxczogICAgICAgICBCaXRt
YXAgd2l0aCB0aGUgaXJxcyBzdXBwb3J0ZWQgYnkgdGhlIHRhcmdldAogICovCiBzdHJ1Y3QgZHB1
X21kc3NfY2ZnIHsKIAl1MzIgaHd2ZXJzaW9uOwpAQCAtNjg0LDYgKzY4NSw4IEBAIHN0cnVjdCBk
cHVfbWRzc19jZmcgewogCXN0cnVjdCBkcHVfZm9ybWF0X2V4dGVuZGVkICpkbWFfZm9ybWF0czsK
IAlzdHJ1Y3QgZHB1X2Zvcm1hdF9leHRlbmRlZCAqY3Vyc29yX2Zvcm1hdHM7CiAJc3RydWN0IGRw
dV9mb3JtYXRfZXh0ZW5kZWQgKnZpZ19mb3JtYXRzOworCisJdW5zaWduZWQgbG9uZyBtZHNzX2ly
cXM7CiB9OwogCiBzdHJ1Y3QgZHB1X21kc3NfaHdfY2ZnX2hhbmRsZXIgewpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2ludGVycnVwdHMuYyBiL2RyaXZl
cnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19pbnRlcnJ1cHRzLmMKaW5kZXggOGJmYTdk
MC4uZDg0YTg0ZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1
X2h3X2ludGVycnVwdHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVf
aHdfaW50ZXJydXB0cy5jCkBAIC04MDAsOCArODAwLDggQEAgc3RhdGljIHZvaWQgZHB1X2h3X2lu
dHJfZGlzcGF0Y2hfaXJxKHN0cnVjdCBkcHVfaHdfaW50ciAqaW50ciwKIAkJc3RhcnRfaWR4ID0g
cmVnX2lkeCAqIDMyOwogCQllbmRfaWR4ID0gc3RhcnRfaWR4ICsgMzI7CiAKLQkJaWYgKHN0YXJ0
X2lkeCA+PSBBUlJBWV9TSVpFKGRwdV9pcnFfbWFwKSB8fAotCQkJCWVuZF9pZHggPiBBUlJBWV9T
SVpFKGRwdV9pcnFfbWFwKSkKKwkJaWYgKCF0ZXN0X2JpdChyZWdfaWR4LCAmaW50ci0+aXJxX21h
c2spIHx8CisJCQlzdGFydF9pZHggPj0gQVJSQVlfU0laRShkcHVfaXJxX21hcCkpCiAJCQljb250
aW51ZTsKIAogCQkvKgpAQCAtOTU1LDggKzk1NSwxMSBAQCBzdGF0aWMgaW50IGRwdV9od19pbnRy
X2NsZWFyX2lycXMoc3RydWN0IGRwdV9od19pbnRyICppbnRyKQogCWlmICghaW50cikKIAkJcmV0
dXJuIC1FSU5WQUw7CiAKLQlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShkcHVfaW50cl9zZXQp
OyBpKyspCi0JCURQVV9SRUdfV1JJVEUoJmludHItPmh3LCBkcHVfaW50cl9zZXRbaV0uY2xyX29m
ZiwgMHhmZmZmZmZmZik7CisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUoZHB1X2ludHJfc2V0
KTsgaSsrKSB7CisJCWlmICh0ZXN0X2JpdChpLCAmaW50ci0+aXJxX21hc2spKQorCQkJRFBVX1JF
R19XUklURSgmaW50ci0+aHcsCisJCQkJCWRwdV9pbnRyX3NldFtpXS5jbHJfb2ZmLCAweGZmZmZm
ZmZmKTsKKwl9CiAKIAkvKiBlbnN1cmUgcmVnaXN0ZXIgd3JpdGVzIGdvIHRocm91Z2ggKi8KIAl3
bWIoKTsKQEAgLTk3MSw4ICs5NzQsMTEgQEAgc3RhdGljIGludCBkcHVfaHdfaW50cl9kaXNhYmxl
X2lycXMoc3RydWN0IGRwdV9od19pbnRyICppbnRyKQogCWlmICghaW50cikKIAkJcmV0dXJuIC1F
SU5WQUw7CiAKLQlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShkcHVfaW50cl9zZXQpOyBpKysp
Ci0JCURQVV9SRUdfV1JJVEUoJmludHItPmh3LCBkcHVfaW50cl9zZXRbaV0uZW5fb2ZmLCAweDAw
MDAwMDAwKTsKKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShkcHVfaW50cl9zZXQpOyBpKysp
IHsKKwkJaWYgKHRlc3RfYml0KGksICZpbnRyLT5pcnFfbWFzaykpCisJCQlEUFVfUkVHX1dSSVRF
KCZpbnRyLT5odywKKwkJCQkJZHB1X2ludHJfc2V0W2ldLmVuX29mZiwgMHgwMDAwMDAwMCk7CisJ
fQogCiAJLyogZW5zdXJlIHJlZ2lzdGVyIHdyaXRlcyBnbyB0aHJvdWdoICovCiAJd21iKCk7CkBA
IC05OTEsNiArOTk3LDkgQEAgc3RhdGljIHZvaWQgZHB1X2h3X2ludHJfZ2V0X2ludGVycnVwdF9z
dGF0dXNlcyhzdHJ1Y3QgZHB1X2h3X2ludHIgKmludHIpCiAKIAlzcGluX2xvY2tfaXJxc2F2ZSgm
aW50ci0+aXJxX2xvY2ssIGlycV9mbGFncyk7CiAJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUo
ZHB1X2ludHJfc2V0KTsgaSsrKSB7CisJCWlmICghdGVzdF9iaXQoaSwgJmludHItPmlycV9tYXNr
KSkKKwkJCWNvbnRpbnVlOworCiAJCS8qIFJlYWQgaW50ZXJydXB0IHN0YXR1cyAqLwogCQlpbnRy
LT5zYXZlX2lycV9zdGF0dXNbaV0gPSBEUFVfUkVHX1JFQUQoJmludHItPmh3LAogCQkJCWRwdV9p
bnRyX3NldFtpXS5zdGF0dXNfb2ZmKTsKQEAgLTExMTUsNiArMTEyNCw3IEBAIHN0cnVjdCBkcHVf
aHdfaW50ciAqZHB1X2h3X2ludHJfaW5pdCh2b2lkIF9faW9tZW0gKmFkZHIsCiAJCXJldHVybiBF
UlJfUFRSKC1FTk9NRU0pOwogCX0KIAorCWludHItPmlycV9tYXNrID0gbS0+bWRzc19pcnFzOwog
CXNwaW5fbG9ja19pbml0KCZpbnRyLT5pcnFfbG9jayk7CiAKIAlyZXR1cm4gaW50cjsKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19pbnRlcnJ1cHRzLmgg
Yi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfaW50ZXJydXB0cy5oCmluZGV4
IDRlZGNmNDAuLmZjOWM5ODYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9k
cHUxL2RwdV9od19pbnRlcnJ1cHRzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2Rw
dTEvZHB1X2h3X2ludGVycnVwdHMuaApAQCAtMTg3LDYgKzE4Nyw3IEBAIHN0cnVjdCBkcHVfaHdf
aW50ciB7CiAJdTMyICpzYXZlX2lycV9zdGF0dXM7CiAJdTMyIGlycV9pZHhfdGJsX3NpemU7CiAJ
c3BpbmxvY2tfdCBpcnFfbG9jazsKKwl1bnNpZ25lZCBsb25nIGlycV9tYXNrOwogfTsKIAogLyoq
Ci0tIAoxLjkuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
