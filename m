Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0FC0E178E94
	for <lists+dri-devel@lfdr.de>; Wed,  4 Mar 2020 11:41:16 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B41426EA4D;
	Wed,  4 Mar 2020 10:41:06 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 52A636E136
 for <dri-devel@lists.freedesktop.org>; Wed,  4 Mar 2020 10:41:04 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id r17so1745770wrj.7
 for <dri-devel@lists.freedesktop.org>; Wed, 04 Mar 2020 02:41:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=baylibre-com.20150623.gappssmtp.com; s=20150623;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=6ZkUuOYw6oIDhs4T3fveXw/SmZpKnvsfwNQEL/dPUzE=;
 b=bVrdxbNgsGJPKweUPvY2xJjH2VdFtgn1cOPYGeYqMIzuVbE1TcCuXRbBBA6IKUbNQc
 7rbrsv5eUvF8J6TibSLe/RW8T6KORHyhANkAucODgmVUFR+4IT9zeKIDon8IzxCS/2e7
 TNOmXuii7mZyaV/u7Va1gzoBKHRg0Gi2jmWu7bnpzaemAMmn7b5wgzFJA2eCUtWc6YY9
 YgTzv6wKAWnKWFE0E7GbZU31PHZTfNs6N4UMO0oodvXIrn6U2Soc1FtRnGBRR+H/1Sbx
 ZmiTc1pAm+JUB/DlrzGirdPeP2Cf9Fa1gzFA4KTQJty6G+w6j1Z/BDL2x9CBDDmty5xn
 jbww==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=6ZkUuOYw6oIDhs4T3fveXw/SmZpKnvsfwNQEL/dPUzE=;
 b=Us7D/4y2WTs5QqHUEFN5llT69jB8vwogmFNADStJmtnUsTJ1+ss++Z12fH+rLzvcYk
 kBQMAmjhduzgfezzq+uoc8ykj5Ls2f6fcY2+c8lJBQcd/Zz/OYs72dHQJ4QVZ+B/sA7o
 sR52cJ9kvzv9VMYC0Ebhp1ILeQuAb8TMJr6gKfZ2Yew/5uua4Y/QioX0Epf3e0WSLgc6
 pVRlEfe3q4Yfx8+PVOHHNP/Wq4T3L6z94JB7O9Mvvx5o8GS7P58yzrzy1ymTesasVLYC
 AowN8gnTJ5QTjCs8Uxlj35CPWzX/NOxrJeTD2B/zGm+n+bIau2vmqCw4yQMV+DlyaOX7
 JH4w==
X-Gm-Message-State: ANhLgQ01GbQFdE5CeYUaDyQSYBoC4kOeffSsngA/x95oQpfFSPPw2tIr
 YKB1Cj7JVqL8FFH+no17cNmLJw==
X-Google-Smtp-Source: ADFU+vtD3x1fiJXCg5Qp3/2BAnBmsyEPwtPcQlLFwNFmLEseD7F6O5FqDCofDPKVJYjNdqlbUDLMYg==
X-Received: by 2002:a05:6000:18f:: with SMTP id
 p15mr3750356wrx.149.1583318462824; 
 Wed, 04 Mar 2020 02:41:02 -0800 (PST)
Received: from bender.baylibre.local
 (laubervilliers-658-1-213-31.w90-63.abo.wanadoo.fr. [90.63.244.31])
 by smtp.gmail.com with ESMTPSA id c14sm24006398wro.36.2020.03.04.02.41.01
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 04 Mar 2020 02:41:02 -0800 (PST)
From: Neil Armstrong <narmstrong@baylibre.com>
To: p.zabel@pengutronix.de, heiko@sntech.de, a.hajda@samsung.com,
 Laurent.pinchart@ideasonboard.com, jonas@kwiboo.se,
 jernej.skrabec@siol.net, boris.brezillon@collabora.com
Subject: [PATCH v5 04/11] drm/bridge: synopsys: dw-hdmi: add bus format
 negociation
Date: Wed,  4 Mar 2020 11:40:45 +0100
Message-Id: <20200304104052.17196-5-narmstrong@baylibre.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20200304104052.17196-1-narmstrong@baylibre.com>
References: <20200304104052.17196-1-narmstrong@baylibre.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-amlogic@lists.infradead.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, Neil Armstrong <narmstrong@baylibre.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QWRkIHRoZSBhdG9taWNfZ2V0X291dHB1dF9idXNfZm10cywgYXRvbWljX2dldF9pbnB1dF9idXNf
Zm10cyB0byBuZWdvY2lhdGUKdGhlIHBvc3NpYmxlIG91dHB1dCBhbmQgaW5wdXQgZm9ybWF0cyBm
b3IgdGhlIGN1cnJlbnQgbW9kZSBhbmQgbW9uaXRvciwKYW5kIHVzZSB0aGUgbmVnb3RpYXRlZCBm
b3JtYXRzIGluIGEgYmFzaWMgYXRvbWljX2NoZWNrIGNhbGxiYWNrLgoKU2lnbmVkLW9mZi1ieTog
TmVpbCBBcm1zdHJvbmcgPG5hcm1zdHJvbmdAYmF5bGlicmUuY29tPgpSZXZpZXdlZC1ieTogQm9y
aXMgQnJlemlsbG9uIDxib3Jpcy5icmV6aWxsb25AY29sbGFib3JhLmNvbT4KUmV2aWV3ZWQtYnk6
IEplcm5laiDFoGtyYWJlYyA8amVybmVqLnNrcmFiZWNAc2lvbC5uZXQ+Ci0tLQogZHJpdmVycy9n
cHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMgfCAyODEgKysrKysrKysrKysrKysrKysr
KysrLQogMSBmaWxlIGNoYW5nZWQsIDI3NyBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctaGRtaS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMKaW5kZXggOWYyOTE4ODk4
ZjYwLi5kZTE5ZTg5OTNlMWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lu
b3BzeXMvZHctaGRtaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHct
aGRtaS5jCkBAIC0yMDk3LDExICsyMDk3LDEwIEBAIHN0YXRpYyBpbnQgZHdfaGRtaV9zZXR1cChz
dHJ1Y3QgZHdfaGRtaSAqaGRtaSwgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCiAJaGRt
aS0+aGRtaV9kYXRhLnZpZGVvX21vZGUubXBpeGVscmVwZXRpdGlvbm91dHB1dCA9IDA7CiAJaGRt
aS0+aGRtaV9kYXRhLnZpZGVvX21vZGUubXBpeGVscmVwZXRpdGlvbmlucHV0ID0gMDsKIAotCS8q
IFRPRklYOiBHZXQgaW5wdXQgZm9ybWF0IGZyb20gcGxhdCBkYXRhIG9yIGZhbGxiYWNrIHRvIFJH
Qjg4OCAqLwogCWlmIChoZG1pLT5wbGF0X2RhdGEtPmlucHV0X2J1c19mb3JtYXQpCiAJCWhkbWkt
PmhkbWlfZGF0YS5lbmNfaW5fYnVzX2Zvcm1hdCA9CiAJCQloZG1pLT5wbGF0X2RhdGEtPmlucHV0
X2J1c19mb3JtYXQ7Ci0JZWxzZQorCWVsc2UgaWYgKGhkbWktPmhkbWlfZGF0YS5lbmNfaW5fYnVz
X2Zvcm1hdCA9PSBNRURJQV9CVVNfRk1UX0ZJWEVEKQogCQloZG1pLT5oZG1pX2RhdGEuZW5jX2lu
X2J1c19mb3JtYXQgPSBNRURJQV9CVVNfRk1UX1JHQjg4OF8xWDI0OwogCiAJLyogVE9GSVg6IEdl
dCBpbnB1dCBlbmNvZGluZyBmcm9tIHBsYXQgZGF0YSBvciBmYWxsYmFjayB0byBub25lICovCkBA
IC0yMTExLDggKzIxMTAsOCBAQCBzdGF0aWMgaW50IGR3X2hkbWlfc2V0dXAoc3RydWN0IGR3X2hk
bWkgKmhkbWksIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKQogCWVsc2UKIAkJaGRtaS0+
aGRtaV9kYXRhLmVuY19pbl9lbmNvZGluZyA9IFY0TDJfWUNCQ1JfRU5DX0RFRkFVTFQ7CiAKLQkv
KiBUT0ZJWDogRGVmYXVsdCB0byBSR0I4ODggb3V0cHV0IGZvcm1hdCAqLwotCWhkbWktPmhkbWlf
ZGF0YS5lbmNfb3V0X2J1c19mb3JtYXQgPSBNRURJQV9CVVNfRk1UX1JHQjg4OF8xWDI0OworCWlm
IChoZG1pLT5oZG1pX2RhdGEuZW5jX291dF9idXNfZm9ybWF0ID09IE1FRElBX0JVU19GTVRfRklY
RUQpCisJCWhkbWktPmhkbWlfZGF0YS5lbmNfb3V0X2J1c19mb3JtYXQgPSBNRURJQV9CVVNfRk1U
X1JHQjg4OF8xWDI0OwogCiAJaGRtaS0+aGRtaV9kYXRhLnBpeF9yZXBldF9mYWN0b3IgPSAwOwog
CWhkbWktPmhkbWlfZGF0YS5oZGNwX2VuYWJsZSA9IDA7CkBAIC0yMzkwLDYgKzIzODksMjc3IEBA
IHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MgZHdfaGRtaV9j
b25uZWN0b3JfaGVscGVyX2Z1bmNzID0KIAkuYXRvbWljX2NoZWNrID0gZHdfaGRtaV9jb25uZWN0
b3JfYXRvbWljX2NoZWNrLAogfTsKIAorLyoKKyAqIFBvc3NpYmxlIG91dHB1dCBmb3JtYXRzIDoK
KyAqIC0gTUVESUFfQlVTX0ZNVF9VWVlWWVkxNl8wXzVYNDgsCisgKiAtIE1FRElBX0JVU19GTVRf
VVlZVllZMTJfMF81WDM2LAorICogLSBNRURJQV9CVVNfRk1UX1VZWVZZWTEwXzBfNVgzMCwKKyAq
IC0gTUVESUFfQlVTX0ZNVF9VWVlWWVk4XzBfNVgyNCwKKyAqIC0gTUVESUFfQlVTX0ZNVF9ZVVYx
Nl8xWDQ4LAorICogLSBNRURJQV9CVVNfRk1UX1JHQjE2MTYxNl8xWDQ4LAorICogLSBNRURJQV9C
VVNfRk1UX1VZVlkxMl8xWDI0LAorICogLSBNRURJQV9CVVNfRk1UX1lVVjEyXzFYMzYsCisgKiAt
IE1FRElBX0JVU19GTVRfUkdCMTIxMjEyXzFYMzYsCisgKiAtIE1FRElBX0JVU19GTVRfVVlWWTEw
XzFYMjAsCisgKiAtIE1FRElBX0JVU19GTVRfWVVWMTBfMVgzMCwKKyAqIC0gTUVESUFfQlVTX0ZN
VF9SR0IxMDEwMTBfMVgzMCwKKyAqIC0gTUVESUFfQlVTX0ZNVF9VWVZZOF8xWDE2LAorICogLSBN
RURJQV9CVVNfRk1UX1lVVjhfMVgyNCwKKyAqIC0gTUVESUFfQlVTX0ZNVF9SR0I4ODhfMVgyNCwK
KyAqLworCisvKiBDYW4gcmV0dXJuIGEgbWF4aW11bSBvZiAxMSBwb3NzaWJsZSBvdXRwdXQgZm9y
bWF0cyBmb3IgYSBtb2RlL2Nvbm5lY3RvciAqLworI2RlZmluZSBNQVhfT1VUUFVUX1NFTF9GT1JN
QVRTCTExCisKK3N0YXRpYyB1MzIgKmR3X2hkbWlfYnJpZGdlX2F0b21pY19nZXRfb3V0cHV0X2J1
c19mbXRzKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJCXN0cnVjdCBkcm1fYnJpZGdl
X3N0YXRlICpicmlkZ2Vfc3RhdGUsCisJCQkJCXN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqY3J0Y19z
dGF0ZSwKKwkJCQkJc3RydWN0IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGUsCisJCQkJ
CXVuc2lnbmVkIGludCAqbnVtX291dHB1dF9mbXRzKQoreworCXN0cnVjdCBkcm1fY29ubmVjdG9y
ICpjb25uID0gY29ubl9zdGF0ZS0+Y29ubmVjdG9yOworCXN0cnVjdCBkcm1fZGlzcGxheV9pbmZv
ICppbmZvID0gJmNvbm4tPmRpc3BsYXlfaW5mbzsKKwlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAq
bW9kZSA9ICZjcnRjX3N0YXRlLT5tb2RlOworCXU4IG1heF9icGMgPSBjb25uX3N0YXRlLT5tYXhf
cmVxdWVzdGVkX2JwYzsKKwlib29sIGlzX2hkbWkyX3NpbmsgPSBpbmZvLT5oZG1pLnNjZGMuc3Vw
cG9ydGVkIHx8CisJCQkgICAgIChpbmZvLT5jb2xvcl9mb3JtYXRzICYgRFJNX0NPTE9SX0ZPUk1B
VF9ZQ1JDQjQyMCk7CisJdTMyICpvdXRwdXRfZm10czsKKwl1bnNpZ25lZCBpbnQgaSA9IDA7CisK
KwkqbnVtX291dHB1dF9mbXRzID0gMDsKKworCW91dHB1dF9mbXRzID0ga2NhbGxvYyhNQVhfT1VU
UFVUX1NFTF9GT1JNQVRTLCBzaXplb2YoKm91dHB1dF9mbXRzKSwKKwkJCSAgICAgIEdGUF9LRVJO
RUwpOworCWlmICghb3V0cHV0X2ZtdHMpCisJCXJldHVybiBOVUxMOworCisJLyogSWYgZHctaGRt
aSBpcyB0aGUgb25seSBicmlkZ2UsIGF2b2lkIG5lZ29jaWF0aW5nIHdpdGggb3Vyc2VsdmVzICov
CisJaWYgKGxpc3RfaXNfc2luZ3VsYXIoJmJyaWRnZS0+ZW5jb2Rlci0+YnJpZGdlX2NoYWluKSkg
eworCQkqbnVtX291dHB1dF9mbXRzID0gMTsKKwkJb3V0cHV0X2ZtdHNbMF0gPSBNRURJQV9CVVNf
Rk1UX0ZJWEVEOworCisJCXJldHVybiBvdXRwdXRfZm10czsKKwl9CisKKwkvKgorCSAqIElmIHRo
ZSBjdXJyZW50IG1vZGUgZW5mb3JjZXMgNDoyOjAsIGZvcmNlIHRoZSBvdXRwdXQgYnV0IGZvcm1h
dAorCSAqIHRvIDQ6MjowIGFuZCBkbyBub3QgYWRkIHRoZSBZVVY0MjIvNDQ0L1JHQiBmb3JtYXRz
CisJICovCisJaWYgKGNvbm4tPnljYmNyXzQyMF9hbGxvd2VkICYmCisJICAgIChkcm1fbW9kZV9p
c180MjBfb25seShpbmZvLCBtb2RlKSB8fAorCSAgICAgKGlzX2hkbWkyX3NpbmsgJiYgZHJtX21v
ZGVfaXNfNDIwX2Fsc28oaW5mbywgbW9kZSkpKSkgeworCisJCS8qIE9yZGVyIGJ1cyBmb3JtYXRz
IGZyb20gMTZiaXQgdG8gOGJpdCBpZiBzdXBwb3J0ZWQgKi8KKwkJaWYgKG1heF9icGMgPj0gMTYg
JiYgaW5mby0+YnBjID09IDE2ICYmCisJCSAgICAoaW5mby0+aGRtaS55NDIwX2RjX21vZGVzICYg
RFJNX0VESURfWUNCQ1I0MjBfRENfNDgpKQorCQkJb3V0cHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JV
U19GTVRfVVlZVllZMTZfMF81WDQ4OworCisJCWlmIChtYXhfYnBjID49IDEyICYmIGluZm8tPmJw
YyA+PSAxMiAmJgorCQkgICAgKGluZm8tPmhkbWkueTQyMF9kY19tb2RlcyAmIERSTV9FRElEX1lD
QkNSNDIwX0RDXzM2KSkKKwkJCW91dHB1dF9mbXRzW2krK10gPSBNRURJQV9CVVNfRk1UX1VZWVZZ
WTEyXzBfNVgzNjsKKworCQlpZiAobWF4X2JwYyA+PSAxMCAmJiBpbmZvLT5icGMgPj0gMTAgJiYK
KwkJICAgIChpbmZvLT5oZG1pLnk0MjBfZGNfbW9kZXMgJiBEUk1fRURJRF9ZQ0JDUjQyMF9EQ18z
MCkpCisJCQlvdXRwdXRfZm10c1tpKytdID0gTUVESUFfQlVTX0ZNVF9VWVlWWVkxMF8wXzVYMzA7
CisKKwkJLyogRGVmYXVsdCA4Yml0IGZhbGxiYWNrICovCisJCW91dHB1dF9mbXRzW2krK10gPSBN
RURJQV9CVVNfRk1UX1VZWVZZWThfMF81WDI0OworCisJCSpudW1fb3V0cHV0X2ZtdHMgPSBpOwor
CisJCXJldHVybiBvdXRwdXRfZm10czsKKwl9CisKKwkvKgorCSAqIE9yZGVyIGJ1cyBmb3JtYXRz
IGZyb20gMTZiaXQgdG8gOGJpdCBhbmQgZnJvbSBZVVY0MjIgdG8gUkdCCisJICogaWYgc3VwcG9y
dGVkLiBJbiBhbnkgY2FzZSB0aGUgZGVmYXVsdCBSR0I4ODggZm9ybWF0IGlzIGFkZGVkCisJICov
CisKKwlpZiAobWF4X2JwYyA+PSAxNiAmJiBpbmZvLT5icGMgPT0gMTYpIHsKKwkJaWYgKGluZm8t
PmNvbG9yX2Zvcm1hdHMgJiBEUk1fQ09MT1JfRk9STUFUX1lDUkNCNDQ0KQorCQkJb3V0cHV0X2Zt
dHNbaSsrXSA9IE1FRElBX0JVU19GTVRfWVVWMTZfMVg0ODsKKworCQlvdXRwdXRfZm10c1tpKytd
ID0gTUVESUFfQlVTX0ZNVF9SR0IxNjE2MTZfMVg0ODsKKwl9CisKKwlpZiAobWF4X2JwYyA+PSAx
MiAmJiBpbmZvLT5icGMgPj0gMTIpIHsKKwkJaWYgKGluZm8tPmNvbG9yX2Zvcm1hdHMgJiBEUk1f
Q09MT1JfRk9STUFUX1lDUkNCNDIyKQorCQkJb3V0cHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19G
TVRfVVlWWTEyXzFYMjQ7CisKKwkJaWYgKGluZm8tPmNvbG9yX2Zvcm1hdHMgJiBEUk1fQ09MT1Jf
Rk9STUFUX1lDUkNCNDQ0KQorCQkJb3V0cHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19GTVRfWVVW
MTJfMVgzNjsKKworCQlvdXRwdXRfZm10c1tpKytdID0gTUVESUFfQlVTX0ZNVF9SR0IxMjEyMTJf
MVgzNjsKKwl9CisKKwlpZiAobWF4X2JwYyA+PSAxMCAmJiBpbmZvLT5icGMgPj0gMTApIHsKKwkJ
aWYgKGluZm8tPmNvbG9yX2Zvcm1hdHMgJiBEUk1fQ09MT1JfRk9STUFUX1lDUkNCNDIyKQorCQkJ
b3V0cHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19GTVRfVVlWWTEwXzFYMjA7CisKKwkJaWYgKGlu
Zm8tPmNvbG9yX2Zvcm1hdHMgJiBEUk1fQ09MT1JfRk9STUFUX1lDUkNCNDQ0KQorCQkJb3V0cHV0
X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19GTVRfWVVWMTBfMVgzMDsKKworCQlvdXRwdXRfZm10c1tp
KytdID0gTUVESUFfQlVTX0ZNVF9SR0IxMDEwMTBfMVgzMDsKKwl9CisKKwlpZiAoaW5mby0+Y29s
b3JfZm9ybWF0cyAmIERSTV9DT0xPUl9GT1JNQVRfWUNSQ0I0MjIpCisJCW91dHB1dF9mbXRzW2kr
K10gPSBNRURJQV9CVVNfRk1UX1VZVlk4XzFYMTY7CisKKwlpZiAoaW5mby0+Y29sb3JfZm9ybWF0
cyAmIERSTV9DT0xPUl9GT1JNQVRfWUNSQ0I0NDQpCisJCW91dHB1dF9mbXRzW2krK10gPSBNRURJ
QV9CVVNfRk1UX1lVVjhfMVgyNDsKKworCS8qIERlZmF1bHQgOGJpdCBSR0IgZmFsbGJhY2sgKi8K
KwlvdXRwdXRfZm10c1tpKytdID0gTUVESUFfQlVTX0ZNVF9SR0I4ODhfMVgyNDsKKworCSpudW1f
b3V0cHV0X2ZtdHMgPSBpOworCisJcmV0dXJuIG91dHB1dF9mbXRzOworfQorCisvKgorICogUG9z
c2libGUgaW5wdXQgZm9ybWF0cyA6CisgKiAtIE1FRElBX0JVU19GTVRfUkdCODg4XzFYMjQKKyAq
IC0gTUVESUFfQlVTX0ZNVF9ZVVY4XzFYMjQKKyAqIC0gTUVESUFfQlVTX0ZNVF9VWVZZOF8xWDE2
CisgKiAtIE1FRElBX0JVU19GTVRfVVlZVllZOF8wXzVYMjQKKyAqIC0gTUVESUFfQlVTX0ZNVF9S
R0IxMDEwMTBfMVgzMAorICogLSBNRURJQV9CVVNfRk1UX1lVVjEwXzFYMzAKKyAqIC0gTUVESUFf
QlVTX0ZNVF9VWVZZMTBfMVgyMAorICogLSBNRURJQV9CVVNfRk1UX1VZWVZZWTEwXzBfNVgzMAor
ICogLSBNRURJQV9CVVNfRk1UX1JHQjEyMTIxMl8xWDM2CisgKiAtIE1FRElBX0JVU19GTVRfWVVW
MTJfMVgzNgorICogLSBNRURJQV9CVVNfRk1UX1VZVlkxMl8xWDI0CisgKiAtIE1FRElBX0JVU19G
TVRfVVlZVllZMTJfMF81WDM2CisgKiAtIE1FRElBX0JVU19GTVRfUkdCMTYxNjE2XzFYNDgKKyAq
IC0gTUVESUFfQlVTX0ZNVF9ZVVYxNl8xWDQ4CisgKiAtIE1FRElBX0JVU19GTVRfVVlZVllZMTZf
MF81WDQ4CisgKi8KKworLyogQ2FuIHJldHVybiBhIG1heGltdW0gb2YgMyBwb3NzaWJsZSBpbnB1
dCBmb3JtYXRzIGZvciBhbiBvdXRwdXQgZm9ybWF0ICovCisjZGVmaW5lIE1BWF9JTlBVVF9TRUxf
Rk9STUFUUwkzCisKK3N0YXRpYyB1MzIgKmR3X2hkbWlfYnJpZGdlX2F0b21pY19nZXRfaW5wdXRf
YnVzX2ZtdHMoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKKwkJCQkJc3RydWN0IGRybV9icmlk
Z2Vfc3RhdGUgKmJyaWRnZV9zdGF0ZSwKKwkJCQkJc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRj
X3N0YXRlLAorCQkJCQlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZSwKKwkJ
CQkJdTMyIG91dHB1dF9mbXQsCisJCQkJCXVuc2lnbmVkIGludCAqbnVtX2lucHV0X2ZtdHMpCit7
CisJdTMyICppbnB1dF9mbXRzOworCXVuc2lnbmVkIGludCBpID0gMDsKKworCSpudW1faW5wdXRf
Zm10cyA9IDA7CisKKwlpbnB1dF9mbXRzID0ga2NhbGxvYyhNQVhfSU5QVVRfU0VMX0ZPUk1BVFMs
IHNpemVvZigqaW5wdXRfZm10cyksCisJCQkgICAgIEdGUF9LRVJORUwpOworCWlmICghaW5wdXRf
Zm10cykKKwkJcmV0dXJuIE5VTEw7CisKKwlzd2l0Y2ggKG91dHB1dF9mbXQpIHsKKwkvKiBJZiBN
RURJQV9CVVNfRk1UX0ZJWEVEIGlzIHRlc3RlZCwgcmV0dXJuIGRlZmF1bHQgYnVzIGZvcm1hdCAq
LworCWNhc2UgTUVESUFfQlVTX0ZNVF9GSVhFRDoKKwkJaW5wdXRfZm10c1tpKytdID0gTUVESUFf
QlVTX0ZNVF9SR0I4ODhfMVgyNDsKKwkJYnJlYWs7CisJLyogOGJpdCAqLworCWNhc2UgTUVESUFf
QlVTX0ZNVF9SR0I4ODhfMVgyNDoKKwkJaW5wdXRfZm10c1tpKytdID0gTUVESUFfQlVTX0ZNVF9S
R0I4ODhfMVgyNDsKKwkJaW5wdXRfZm10c1tpKytdID0gTUVESUFfQlVTX0ZNVF9ZVVY4XzFYMjQ7
CisJCWlucHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19GTVRfVVlWWThfMVgxNjsKKwkJYnJlYWs7
CisJY2FzZSBNRURJQV9CVVNfRk1UX1lVVjhfMVgyNDoKKwkJaW5wdXRfZm10c1tpKytdID0gTUVE
SUFfQlVTX0ZNVF9ZVVY4XzFYMjQ7CisJCWlucHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19GTVRf
VVlWWThfMVgxNjsKKwkJaW5wdXRfZm10c1tpKytdID0gTUVESUFfQlVTX0ZNVF9SR0I4ODhfMVgy
NDsKKwkJYnJlYWs7CisJY2FzZSBNRURJQV9CVVNfRk1UX1VZVlk4XzFYMTY6CisJCWlucHV0X2Zt
dHNbaSsrXSA9IE1FRElBX0JVU19GTVRfVVlWWThfMVgxNjsKKwkJaW5wdXRfZm10c1tpKytdID0g
TUVESUFfQlVTX0ZNVF9ZVVY4XzFYMjQ7CisJCWlucHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19G
TVRfUkdCODg4XzFYMjQ7CisJCWJyZWFrOworCisJLyogMTBiaXQgKi8KKwljYXNlIE1FRElBX0JV
U19GTVRfUkdCMTAxMDEwXzFYMzA6CisJCWlucHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19GTVRf
UkdCMTAxMDEwXzFYMzA7CisJCWlucHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19GTVRfWVVWMTBf
MVgzMDsKKwkJaW5wdXRfZm10c1tpKytdID0gTUVESUFfQlVTX0ZNVF9VWVZZMTBfMVgyMDsKKwkJ
YnJlYWs7CisJY2FzZSBNRURJQV9CVVNfRk1UX1lVVjEwXzFYMzA6CisJCWlucHV0X2ZtdHNbaSsr
XSA9IE1FRElBX0JVU19GTVRfWVVWMTBfMVgzMDsKKwkJaW5wdXRfZm10c1tpKytdID0gTUVESUFf
QlVTX0ZNVF9VWVZZMTBfMVgyMDsKKwkJaW5wdXRfZm10c1tpKytdID0gTUVESUFfQlVTX0ZNVF9S
R0IxMDEwMTBfMVgzMDsKKwkJYnJlYWs7CisJY2FzZSBNRURJQV9CVVNfRk1UX1VZVlkxMF8xWDIw
OgorCQlpbnB1dF9mbXRzW2krK10gPSBNRURJQV9CVVNfRk1UX1VZVlkxMF8xWDIwOworCQlpbnB1
dF9mbXRzW2krK10gPSBNRURJQV9CVVNfRk1UX1lVVjEwXzFYMzA7CisJCWlucHV0X2ZtdHNbaSsr
XSA9IE1FRElBX0JVU19GTVRfUkdCMTAxMDEwXzFYMzA7CisJCWJyZWFrOworCisJLyogMTJiaXQg
Ki8KKwljYXNlIE1FRElBX0JVU19GTVRfUkdCMTIxMjEyXzFYMzY6CisJCWlucHV0X2ZtdHNbaSsr
XSA9IE1FRElBX0JVU19GTVRfUkdCMTIxMjEyXzFYMzY7CisJCWlucHV0X2ZtdHNbaSsrXSA9IE1F
RElBX0JVU19GTVRfWVVWMTJfMVgzNjsKKwkJaW5wdXRfZm10c1tpKytdID0gTUVESUFfQlVTX0ZN
VF9VWVZZMTJfMVgyNDsKKwkJYnJlYWs7CisJY2FzZSBNRURJQV9CVVNfRk1UX1lVVjEyXzFYMzY6
CisJCWlucHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19GTVRfWVVWMTJfMVgzNjsKKwkJaW5wdXRf
Zm10c1tpKytdID0gTUVESUFfQlVTX0ZNVF9VWVZZMTJfMVgyNDsKKwkJaW5wdXRfZm10c1tpKytd
ID0gTUVESUFfQlVTX0ZNVF9SR0IxMjEyMTJfMVgzNjsKKwkJYnJlYWs7CisJY2FzZSBNRURJQV9C
VVNfRk1UX1VZVlkxMl8xWDI0OgorCQlpbnB1dF9mbXRzW2krK10gPSBNRURJQV9CVVNfRk1UX1VZ
VlkxMl8xWDI0OworCQlpbnB1dF9mbXRzW2krK10gPSBNRURJQV9CVVNfRk1UX1lVVjEyXzFYMzY7
CisJCWlucHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19GTVRfUkdCMTIxMjEyXzFYMzY7CisJCWJy
ZWFrOworCisJLyogMTZiaXQgKi8KKwljYXNlIE1FRElBX0JVU19GTVRfUkdCMTYxNjE2XzFYNDg6
CisJCWlucHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19GTVRfUkdCMTYxNjE2XzFYNDg7CisJCWlu
cHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JVU19GTVRfWVVWMTZfMVg0ODsKKwkJYnJlYWs7CisJY2Fz
ZSBNRURJQV9CVVNfRk1UX1lVVjE2XzFYNDg6CisJCWlucHV0X2ZtdHNbaSsrXSA9IE1FRElBX0JV
U19GTVRfWVVWMTZfMVg0ODsKKwkJaW5wdXRfZm10c1tpKytdID0gTUVESUFfQlVTX0ZNVF9SR0Ix
NjE2MTZfMVg0ODsKKwkJYnJlYWs7CisKKwkvKllVViA0OjI6MCAqLworCWNhc2UgTUVESUFfQlVT
X0ZNVF9VWVlWWVk4XzBfNVgyNDoKKwljYXNlIE1FRElBX0JVU19GTVRfVVlZVllZMTBfMF81WDMw
OgorCWNhc2UgTUVESUFfQlVTX0ZNVF9VWVlWWVkxMl8wXzVYMzY6CisJY2FzZSBNRURJQV9CVVNf
Rk1UX1VZWVZZWTE2XzBfNVg0ODoKKwkJaW5wdXRfZm10c1tpKytdID0gb3V0cHV0X2ZtdDsKKwkJ
YnJlYWs7CisJfQorCisJKm51bV9pbnB1dF9mbXRzID0gaTsKKworCWlmICgqbnVtX2lucHV0X2Zt
dHMgPT0gMCkgeworCQlrZnJlZShpbnB1dF9mbXRzKTsKKwkJaW5wdXRfZm10cyA9IE5VTEw7CisJ
fQorCisJcmV0dXJuIGlucHV0X2ZtdHM7Cit9CisKK3N0YXRpYyBpbnQgZHdfaGRtaV9icmlkZ2Vf
YXRvbWljX2NoZWNrKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkJICAgICAgIHN0cnVj
dCBkcm1fYnJpZGdlX3N0YXRlICpicmlkZ2Vfc3RhdGUsCisJCQkJICAgICAgIHN0cnVjdCBkcm1f
Y3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSwKKwkJCQkgICAgICAgc3RydWN0IGRybV9jb25uZWN0b3Jf
c3RhdGUgKmNvbm5fc3RhdGUpCit7CisJc3RydWN0IGR3X2hkbWkgKmhkbWkgPSBicmlkZ2UtPmRy
aXZlcl9wcml2YXRlOworCisJaGRtaS0+aGRtaV9kYXRhLmVuY19vdXRfYnVzX2Zvcm1hdCA9CisJ
CQlicmlkZ2Vfc3RhdGUtPm91dHB1dF9idXNfY2ZnLmZvcm1hdDsKKworCWhkbWktPmhkbWlfZGF0
YS5lbmNfaW5fYnVzX2Zvcm1hdCA9CisJCQlicmlkZ2Vfc3RhdGUtPmlucHV0X2J1c19jZmcuZm9y
bWF0OworCisJZGV2X2RiZyhoZG1pLT5kZXYsICJpbnB1dCBmb3JtYXQgMHglMDR4LCBvdXRwdXQg
Zm9ybWF0IDB4JTA0eFxuIiwKKwkJYnJpZGdlX3N0YXRlLT5pbnB1dF9idXNfY2ZnLmZvcm1hdCwK
KwkJYnJpZGdlX3N0YXRlLT5vdXRwdXRfYnVzX2NmZy5mb3JtYXQpOworCisJcmV0dXJuIDA7Cit9
CisKIHN0YXRpYyBpbnQgZHdfaGRtaV9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpi
cmlkZ2UsCiAJCQkJIGVudW0gZHJtX2JyaWRnZV9hdHRhY2hfZmxhZ3MgZmxhZ3MpCiB7CkBAIC0y
NTExLDYgKzI3ODEsOSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9icmlkZ2VfZnVuY3MgZHdf
aGRtaV9icmlkZ2VfZnVuY3MgPSB7CiAJLmF0b21pY19yZXNldCA9IGRybV9hdG9taWNfaGVscGVy
X2JyaWRnZV9yZXNldCwKIAkuYXR0YWNoID0gZHdfaGRtaV9icmlkZ2VfYXR0YWNoLAogCS5kZXRh
Y2ggPSBkd19oZG1pX2JyaWRnZV9kZXRhY2gsCisJLmF0b21pY19jaGVjayA9IGR3X2hkbWlfYnJp
ZGdlX2F0b21pY19jaGVjaywKKwkuYXRvbWljX2dldF9vdXRwdXRfYnVzX2ZtdHMgPSBkd19oZG1p
X2JyaWRnZV9hdG9taWNfZ2V0X291dHB1dF9idXNfZm10cywKKwkuYXRvbWljX2dldF9pbnB1dF9i
dXNfZm10cyA9IGR3X2hkbWlfYnJpZGdlX2F0b21pY19nZXRfaW5wdXRfYnVzX2ZtdHMsCiAJLmVu
YWJsZSA9IGR3X2hkbWlfYnJpZGdlX2VuYWJsZSwKIAkuZGlzYWJsZSA9IGR3X2hkbWlfYnJpZGdl
X2Rpc2FibGUsCiAJLm1vZGVfc2V0ID0gZHdfaGRtaV9icmlkZ2VfbW9kZV9zZXQsCi0tIAoyLjIy
LjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1k
ZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
