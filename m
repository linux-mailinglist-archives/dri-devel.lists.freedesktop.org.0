Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 93BD5D62B3
	for <lists+dri-devel@lfdr.de>; Mon, 14 Oct 2019 14:38:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B9D386E2A3;
	Mon, 14 Oct 2019 12:38:37 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x443.google.com (mail-wr1-x443.google.com
 [IPv6:2a00:1450:4864:20::443])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 614D26E297
 for <dri-devel@lists.freedesktop.org>; Mon, 14 Oct 2019 12:38:35 +0000 (UTC)
Received: by mail-wr1-x443.google.com with SMTP id r5so19499523wrm.12
 for <dri-devel@lists.freedesktop.org>; Mon, 14 Oct 2019 05:38:35 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=Ho+xGPklCe9lLmOY6iWjeGZmZ1/OlC2pi1YyYX3SSnA=;
 b=dZ2iuOTJDJK9UXe82AQE8UdFS8I0l6lX7Rg4m3bozG1/WNRF3eCtKVW+w2bWgB+X3J
 hNnP1jempWE6Ev2Ny8VBGN3NoKV3mryv+G9cS5RWP+S+hIBp151c+abdf59HLsZ1zOEb
 YuBrJpUrqQF3rEl+37n8bASWNBYPE3dTth7pL/zDPUY/1nLA3PS6e+A117qPisFQkS1K
 dSo5qcW7M0nZtILQ8xSe+C6/Hmve7AGNLOC6ZMF0F0zvexctLjquhqev4dkVA3GqqFQt
 wwnjYDH4HlKvneJ2h+Hzs3wRmKAEUp9kVszaZpeJbVWq4KUelu6e3QOW2ePy8n1Qs5LV
 GiUA==
X-Gm-Message-State: APjAAAVpfgUYuFODhcNFKrOSj9BSxIUT9smQttnAxexzH6wPfwg7zQx5
 /PEs5h6PjDmyPvlQiRwD0yq46/nz6RGDbQ==
X-Google-Smtp-Source: APXvYqyX10R8oKpcaFsGgHX+v1oQ7Q6X+MIGOFq2nlK8JogezfCCK3ulTsUmNMw05WJCugK6D5OPlw==
X-Received: by 2002:adf:e983:: with SMTP id h3mr24356259wrm.95.1571056713489; 
 Mon, 14 Oct 2019 05:38:33 -0700 (PDT)
Received: from bender.baylibre.local
 (lmontsouris-657-1-212-31.w90-63.abo.wanadoo.fr. [90.63.244.31])
 by smtp.gmail.com with ESMTPSA id 3sm19171203wmo.22.2019.10.14.05.38.32
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 14 Oct 2019 05:38:33 -0700 (PDT)
From: Neil Armstrong <narmstrong@baylibre.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v2 3/7] drm/meson: Add AFBCD module driver
Date: Mon, 14 Oct 2019 14:38:22 +0200
Message-Id: <20191014123826.27629-4-narmstrong@baylibre.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20191014123826.27629-1-narmstrong@baylibre.com>
References: <20191014123826.27629-1-narmstrong@baylibre.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=baylibre-com.20150623.gappssmtp.com; s=20150623;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=Ho+xGPklCe9lLmOY6iWjeGZmZ1/OlC2pi1YyYX3SSnA=;
 b=eQZZxqFlQqmRbYvSFEv2jDXyIk69cCA5dW+L0LzW9Jvtx1XWtaQituKDJ68DHjzM5l
 vOZejKmEIJUyG690jnCF8am3cT6wE4JXIykCfdsttugfdU2nJVtq+XLOmR2wU3H5dbdW
 T1B1MHKrxMtwCrO/PAQaMnuy8u88mIL6zpcFYJdrkBnvy6LCazaMRfOEBK+e7Ry1L8Rk
 yb0HIJipEk8DNEdjkqtEIV18ra1lXT0Bl4wuXLsymTkuH905JMMCwmN6M8F3TAbwdJQ4
 tM9/al15ps7i07jmpF0D8SOe74q2S52vsVrzKS4bNDkQz4sV66A+6ZbZWFlGg4K66hY9
 bNcA==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Neil Armstrong <narmstrong@baylibre.com>, khilman@baylibre.com,
 linux-amlogic@lists.infradead.org, ayan.halder@arm.com,
 linux-arm-kernel@lists.infradead.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBhZGRzIHRoZSBkcml2ZXIgZm9yIHRoZSBBUk0gRnJhbWVidWZmZXIgQ29tcHJlc3Npb24g
ZGVjb2RlcnMgZm91bmQKaW4gdGhlIEFtbG9naWMgR1hNIGFuZCBHMTJBIFNvQ3MuCgpUaGUgQW1s
b2dpYyBHWE0gYW5kIEcxMkEgQUZCQyBkZWNvZGVyIGFyZSB0b3RhbGx5IGRpZmZlcmVudCwgdGhl
IEdYTSBvbmx5CmhhbmRsaW5nIG9ubHkgdGhlIEFGQkMgdjEuMCBtb2RlcyBhbmQgdGhlIEcxMkEg
ZGVjb2RlciBoYW5kbGluZyB0aGUKQUZCQyB2MS4yIG1vZGVzLgoKVGhlIEcxMkEgQUZCQyBkZWNv
ZGVyIGlzIGFuIGV4dGVybmFsIElQIGludGVncmF0ZWQgaW4gdGhlIHZpZGVvIHBpcGVsaW5lLAph
bmQgdGhlIEdYTSBBRkJDIGRlY29kZXIgc2VlbXMgdG8gdGhlIGFuIEFtbG9naWMgY3VzdG9tIGRl
Y29kZXIgbW9yZQp0aWdobHkgaW50ZWdyYXRlZCBpbiB0aGUgdmlkZW8gcGlwZWxpbmUuCgpUaGUg
R1hNIEFGQkMgZGVjb2RlciBjYW4gaGFuZGxlIG9ubHkgb25lIEFGQkMgcGxhbmUgZm9yIDIgYXZh
aWxhYmxlCk9TRCBwbGFuZXMgYXZhaWxhYmxlIGluIEhXLCBhbmQgdGhlIEcxMkEgQUZCQyBkZWNv
ZGVyIGNhbiBoYW5kbGUgdXAKdG8gNCBBRkJDIHBsYW5lcyBmb3IgdXAgdG8gMyBPU0QgcGxhbmVz
IGF2YWlsYWJsZSBpbiBIVy4KClRoZSBBbWxvZ2ljIEdYTSBzdXBwb3J0cyAxNngxNiBTUEFSU0Ug
YW5kIDE2eDE2IFNQTElUIEFGQkMgYnVmZmVycyB1cAp0byA0ay4KCk9uIHRoZSBvdGhlciBzaWRl
LCBmb3IgRzEyQSBTUExJVCBpcyBtYW5kYXRvcnkgaW4gMTZ4MTYgYmxvY2sgbW9kZSwgYnV0CmZv
ciA0ayBtb2RlcyAzMng4K1NQTElUIEFGQkMgYnVmZmVycyBpcyBtYW5hZGF0b3J5IGZvciBwZXJm
b3JtYW5jZXMgcmVhc29ucy4KClNpZ25lZC1vZmYtYnk6IE5laWwgQXJtc3Ryb25nIDxuYXJtc3Ry
b25nQGJheWxpYnJlLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vbWVzb24vTWFrZWZpbGUgICAg
ICAgICAgfCAgIDEgKwogZHJpdmVycy9ncHUvZHJtL21lc29uL21lc29uX2Rydi5jICAgICAgIHwg
IDM4ICsrLQogZHJpdmVycy9ncHUvZHJtL21lc29uL21lc29uX2Rydi5oICAgICAgIHwgIDEyICsK
IGRyaXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl9vc2RfYWZiY2QuYyB8IDM3NSArKysrKysrKysr
KysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl9vc2RfYWZiY2QuaCB8
ICAyOCArKwogNSBmaWxlcyBjaGFuZ2VkLCA0NDggaW5zZXJ0aW9ucygrKSwgNiBkZWxldGlvbnMo
LSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fb3NkX2Fm
YmNkLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fb3Nk
X2FmYmNkLmgKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWVzb24vTWFrZWZpbGUgYi9k
cml2ZXJzL2dwdS9kcm0vbWVzb24vTWFrZWZpbGUKaW5kZXggYzM4OWUyMzk5MTMzLi5iMWZhMDU1
YWFlZDMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tZXNvbi9NYWtlZmlsZQorKysgYi9k
cml2ZXJzL2dwdS9kcm0vbWVzb24vTWFrZWZpbGUKQEAgLTEsNiArMSw3IEBACiAjIFNQRFgtTGlj
ZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkKIG1lc29uLWRybS15IDo9IG1lc29uX2Rydi5v
IG1lc29uX3BsYW5lLm8gbWVzb25fY3J0Yy5vIG1lc29uX3ZlbmNfY3Zicy5vCiBtZXNvbi1kcm0t
eSArPSBtZXNvbl92aXUubyBtZXNvbl92cHAubyBtZXNvbl92ZW5jLm8gbWVzb25fdmNsay5vIG1l
c29uX292ZXJsYXkubworbWVzb24tZHJtLXkgKz0gbWVzb25fb3NkX2FmYmNkLm8KIAogb2JqLSQo
Q09ORklHX0RSTV9NRVNPTikgKz0gbWVzb24tZHJtLm8KIG9iai0kKENPTkZJR19EUk1fTUVTT05f
RFdfSERNSSkgKz0gbWVzb25fZHdfaGRtaS5vCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
bWVzb24vbWVzb25fZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fZHJ2LmMKaW5k
ZXggYTI0ZjhkZWM1YWRjLi4wZjMxZTcwYmI5NGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9tZXNvbi9tZXNvbl9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fZHJ2
LmMKQEAgLTI4LDYgKzI4LDcgQEAKICNpbmNsdWRlICJtZXNvbl9kcnYuaCIKICNpbmNsdWRlICJt
ZXNvbl9vdmVybGF5LmgiCiAjaW5jbHVkZSAibWVzb25fcGxhbmUuaCIKKyNpbmNsdWRlICJtZXNv
bl9vc2RfYWZiY2QuaCIKICNpbmNsdWRlICJtZXNvbl9yZWdpc3RlcnMuaCIKICNpbmNsdWRlICJt
ZXNvbl92ZW5jX2N2YnMuaCIKICNpbmNsdWRlICJtZXNvbl92aXUuaCIKQEAgLTE4NCw2ICsxODUs
NyBAQCBzdGF0aWMgdm9pZCBtZXNvbl9yZW1vdmVfZnJhbWVidWZmZXJzKHZvaWQpCiBzdGF0aWMg
aW50IG1lc29uX2Rydl9iaW5kX21hc3RlcihzdHJ1Y3QgZGV2aWNlICpkZXYsIGJvb2wgaGFzX2Nv
bXBvbmVudHMpCiB7CiAJc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiA9IHRvX3BsYXRmb3Jt
X2RldmljZShkZXYpOworCWNvbnN0IHN0cnVjdCBtZXNvbl9kcm1fbWF0Y2hfZGF0YSAqbWF0Y2g7
CiAJc3RydWN0IG1lc29uX2RybSAqcHJpdjsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZHJtOwogCXN0
cnVjdCByZXNvdXJjZSAqcmVzOwpAQCAtMTk2LDYgKzE5OCwxMCBAQCBzdGF0aWMgaW50IG1lc29u
X2Rydl9iaW5kX21hc3RlcihzdHJ1Y3QgZGV2aWNlICpkZXYsIGJvb2wgaGFzX2NvbXBvbmVudHMp
CiAJCXJldHVybiAtRU5PREVWOwogCX0KIAorCW1hdGNoID0gb2ZfZGV2aWNlX2dldF9tYXRjaF9k
YXRhKGRldik7CisJaWYgKCFtYXRjaCkKKwkJcmV0dXJuIC1FTk9ERVY7CisKIAlkcm0gPSBkcm1f
ZGV2X2FsbG9jKCZtZXNvbl9kcml2ZXIsIGRldik7CiAJaWYgKElTX0VSUihkcm0pKQogCQlyZXR1
cm4gUFRSX0VSUihkcm0pOwpAQCAtMjA4LDggKzIxNCw4IEBAIHN0YXRpYyBpbnQgbWVzb25fZHJ2
X2JpbmRfbWFzdGVyKHN0cnVjdCBkZXZpY2UgKmRldiwgYm9vbCBoYXNfY29tcG9uZW50cykKIAlk
cm0tPmRldl9wcml2YXRlID0gcHJpdjsKIAlwcml2LT5kcm0gPSBkcm07CiAJcHJpdi0+ZGV2ID0g
ZGV2OwotCi0JcHJpdi0+Y29tcGF0ID0gKGVudW0gdnB1X2NvbXBhdGlibGUpb2ZfZGV2aWNlX2dl
dF9tYXRjaF9kYXRhKHByaXYtPmRldik7CisJcHJpdi0+Y29tcGF0ID0gbWF0Y2gtPmNvbXBhdDsK
Kwlwcml2LT5hZmJjZC5vcHMgPSBtYXRjaC0+YWZiY2Rfb3BzOwogCiAJcmVzID0gcGxhdGZvcm1f
Z2V0X3Jlc291cmNlX2J5bmFtZShwZGV2LCBJT1JFU09VUkNFX01FTSwgInZwdSIpOwogCXJlZ3Mg
PSBkZXZtX2lvcmVtYXBfcmVzb3VyY2UoZGV2LCByZXMpOwpAQCAtMjg5LDYgKzI5NSw4IEBAIHN0
YXRpYyBpbnQgbWVzb25fZHJ2X2JpbmRfbWFzdGVyKHN0cnVjdCBkZXZpY2UgKmRldiwgYm9vbCBo
YXNfY29tcG9uZW50cykKIAltZXNvbl92ZW5jX2luaXQocHJpdik7CiAJbWVzb25fdnBwX2luaXQo
cHJpdik7CiAJbWVzb25fdml1X2luaXQocHJpdik7CisJaWYgKHByaXYtPmFmYmNkLm9wcykKKwkJ
cHJpdi0+YWZiY2Qub3BzLT5pbml0KHByaXYpOwogCiAJLyogRW5jb2RlciBJbml0aWFsaXphdGlv
biAqLwogCkBAIC00NTQsMTUgKzQ2MiwzMyBAQCBzdGF0aWMgaW50IG1lc29uX2Rydl9wcm9iZShz
dHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCXJldHVybiAwOwogfTsKIAorc3RhdGljIHN0
cnVjdCBtZXNvbl9kcm1fbWF0Y2hfZGF0YSBtZXNvbl9kcm1fZ3hiYl9kYXRhID0geworCS5jb21w
YXQgPSBWUFVfQ09NUEFUSUJMRV9HWEJCLAorfTsKKworc3RhdGljIHN0cnVjdCBtZXNvbl9kcm1f
bWF0Y2hfZGF0YSBtZXNvbl9kcm1fZ3hsX2RhdGEgPSB7CisJLmNvbXBhdCA9IFZQVV9DT01QQVRJ
QkxFX0dYTCwKK307CisKK3N0YXRpYyBzdHJ1Y3QgbWVzb25fZHJtX21hdGNoX2RhdGEgbWVzb25f
ZHJtX2d4bV9kYXRhID0geworCS5jb21wYXQgPSBWUFVfQ09NUEFUSUJMRV9HWE0sCisJLmFmYmNk
X29wcyA9ICZtZXNvbl9hZmJjZF9neG1fb3BzLAorfTsKKworc3RhdGljIHN0cnVjdCBtZXNvbl9k
cm1fbWF0Y2hfZGF0YSBtZXNvbl9kcm1fZzEyYV9kYXRhID0geworCS5jb21wYXQgPSBWUFVfQ09N
UEFUSUJMRV9HMTJBLAorCS5hZmJjZF9vcHMgPSAmbWVzb25fYWZiY2RfZzEyYV9vcHMsCit9Owor
CiBzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBkdF9tYXRjaFtdID0gewogCXsgLmNv
bXBhdGlibGUgPSAiYW1sb2dpYyxtZXNvbi1neGJiLXZwdSIsCi0JICAuZGF0YSAgICAgICA9ICh2
b2lkICopVlBVX0NPTVBBVElCTEVfR1hCQiB9LAorCSAgLmRhdGEgICAgICAgPSAodm9pZCAqKSZt
ZXNvbl9kcm1fZ3hiYl9kYXRhIH0sCiAJeyAuY29tcGF0aWJsZSA9ICJhbWxvZ2ljLG1lc29uLWd4
bC12cHUiLAotCSAgLmRhdGEgICAgICAgPSAodm9pZCAqKVZQVV9DT01QQVRJQkxFX0dYTCB9LAor
CSAgLmRhdGEgICAgICAgPSAodm9pZCAqKSZtZXNvbl9kcm1fZ3hsX2RhdGEgfSwKIAl7IC5jb21w
YXRpYmxlID0gImFtbG9naWMsbWVzb24tZ3htLXZwdSIsCi0JICAuZGF0YSAgICAgICA9ICh2b2lk
ICopVlBVX0NPTVBBVElCTEVfR1hNIH0sCisJICAuZGF0YSAgICAgICA9ICh2b2lkICopJm1lc29u
X2RybV9neG1fZGF0YSB9LAogCXsgLmNvbXBhdGlibGUgPSAiYW1sb2dpYyxtZXNvbi1nMTJhLXZw
dSIsCi0JICAuZGF0YSAgICAgICA9ICh2b2lkICopVlBVX0NPTVBBVElCTEVfRzEyQSB9LAorCSAg
LmRhdGEgICAgICAgPSAodm9pZCAqKSZtZXNvbl9kcm1fZzEyYV9kYXRhIH0sCiAJe30KIH07CiBN
T0RVTEVfREVWSUNFX1RBQkxFKG9mLCBkdF9tYXRjaCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vbWVzb24vbWVzb25fZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fZHJ2
LmgKaW5kZXggMzI4NzI4MjQ1MGE5Li42MGYxM2M2ZjM0ZTUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9tZXNvbi9tZXNvbl9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVz
b25fZHJ2LmgKQEAgLTE2LDYgKzE2LDcgQEAgc3RydWN0IGRybV9jcnRjOwogc3RydWN0IGRybV9k
ZXZpY2U7CiBzdHJ1Y3QgZHJtX3BsYW5lOwogc3RydWN0IG1lc29uX2RybTsKK3N0cnVjdCBtZXNv
bl9hZmJjZF9vcHM7CiAKIGVudW0gdnB1X2NvbXBhdGlibGUgewogCVZQVV9DT01QQVRJQkxFX0dY
QkIgPSAwLApAQCAtMjQsNiArMjUsMTEgQEAgZW51bSB2cHVfY29tcGF0aWJsZSB7CiAJVlBVX0NP
TVBBVElCTEVfRzEyQSA9IDMsCiB9OwogCitzdHJ1Y3QgbWVzb25fZHJtX21hdGNoX2RhdGEgewor
CWVudW0gdnB1X2NvbXBhdGlibGUgY29tcGF0OworCXN0cnVjdCBtZXNvbl9hZmJjZF9vcHMgKmFm
YmNkX29wczsKK307CisKIHN0cnVjdCBtZXNvbl9kcm0gewogCXN0cnVjdCBkZXZpY2UgKmRldjsK
IAllbnVtIHZwdV9jb21wYXRpYmxlIGNvbXBhdDsKQEAgLTEyMyw2ICsxMjksMTIgQEAgc3RydWN0
IG1lc29uX2RybSB7CiAJCWJvb2wgdmVuY19yZXBlYXQ7CiAJCWJvb2wgaGRtaV91c2VfZW5jaTsK
IAl9IHZlbmM7CisKKwlzdHJ1Y3QgeworCQlzdHJ1Y3QgbWVzb25fYWZiY2Rfb3BzICpvcHM7CisJ
CXU2NCBtb2RpZmllcjsKKwkJdTMyIGZvcm1hdDsKKwl9IGFmYmNkOwogfTsKIAogc3RhdGljIGlu
bGluZSBpbnQgbWVzb25fdnB1X2lzX2NvbXBhdGlibGUoc3RydWN0IG1lc29uX2RybSAqcHJpdiwK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl9vc2RfYWZiY2QuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl9vc2RfYWZiY2QuYwpuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwMDAwMDAuLmFhZTQzNDFiZWRhZgotLS0gL2Rldi9udWxsCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl9vc2RfYWZiY2QuYwpAQCAtMCwwICsxLDM3NSBAQAor
Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjArCisvKgorICogQ29weXJpZ2h0IChD
KSAyMDE5IEJheUxpYnJlLCBTQVMKKyAqIEF1dGhvcjogTmVpbCBBcm1zdHJvbmcgPG5hcm1zdHJv
bmdAYmF5bGlicmUuY29tPgorICovCisKKyNpbmNsdWRlIDxsaW51eC9iaXRmaWVsZC5oPgorCisj
aW5jbHVkZSA8ZHJtL2RybV9wcmludC5oPgorI2luY2x1ZGUgPGRybS9kcm1fZm91cmNjLmg+CisK
KyNpbmNsdWRlICJtZXNvbl9kcnYuaCIKKyNpbmNsdWRlICJtZXNvbl9yZWdpc3RlcnMuaCIKKyNp
bmNsdWRlICJtZXNvbl92aXUuaCIKKyNpbmNsdWRlICJtZXNvbl9vc2RfYWZiY2QuaCIKKworLyoK
KyAqIERPQzogRHJpdmVyIGZvciB0aGUgQVJNIEZyYW1lQnVmZmVyIENvbXByZXNzaW9uIERlY29k
ZXJzCisgKgorICogVGhlIEFtbG9naWMgR1hNIGFuZCBHMTJBIFNvQyBmYW1pbGllcyBlbWJlZHMg
YW4gQUZCQyBEZWNvZGVyLAorICogdG8gZGVjb2RlIGNvbXByZXNzZWQgYnVmZmVycyBnZW5lcmF0
ZWQgYnkgdGhlIEFSTSBNYWxpIEdQVS4KKyAqCisgKiBGb3IgdGhlIEdYTSBGYW1pbHksIEFtbG9n
aWMgZGVzaWduZWQgdGhlaXIgb3duIERlY29kZXIsIG5hbWVkIGluCisgKiB0aGUgdmVuZG9yIHNv
dXJjZSBhcyAiTUVTT05fQUZCQyIsIGFuZCBhIHNpbmdsZSBkZWNvZGVyIGlzIGF2YWlsYWJsZQor
ICogZm9yIHRoZSAyIE9TRCBwbGFuZXMuCisgKiBUaGlzIGRlY29kZXIgaXMgY29tcGF0aWJsZSB3
aXRoIHRoZSBBRkJDIDEuMCBzcGVjaWZpY2F0aW9ucyBhbmQgdGhlCisgKiBNYWxpIFQ4MjAgR1BV
IGNhcGFiaWxpdGllcy4KKyAqIEl0IHN1cHBvcnRzIDoKKyAqIC0gYmFzaWMgQUZCQyBidWZmZXIg
Zm9yIFJHQjMyIG9ubHksIHRodXMgWVRSIGZlYXR1cmUgaXMgbWFuZGF0b3J5CisgKiAtIFNQQVJT
RSBsYXlvdXQgYW5kIFNQTElUIGxheW91dAorICogLSBvbmx5IDE2eDE2IHN1cGVyYmxvY2sKKyAq
CisgKiBUaGUgZGVjb2RlciByZWFkcyB0aGUgZGF0YSBmcm9tIHRoZSBTRFJBTSwgZGVjb2RlcyBh
bmQgc2VuZHMgdGhlCisgKiBkZWNvZGVkIHBpeGVsIHN0cmVhbSB0byB0aGUgT1NEMSBQbGFuZSBw
aXhlbCBjb21wb3Nlci4KKyAqCisgKiBGb3IgdGhlIEcxMkEgRmFtaWx5LCBBbWxvZ2ljIGludGVn
cmF0ZWQgYW4gQVJNIEFGQkMgRGVjb2RlciwgbmFtZWQKKyAqIGluIHRoZSB2ZW5kb3Igc291cmNl
IGFzICJNQUxJX0FGQkMiLCBhbmQgdGhlIGRlY29kZXIgY2FuIGRlY29kZSB1cAorICogdG8gNCBz
dXJmYWNlcywgb25lIGZvciBlYWNoIG9mIHRoZSA0IGF2YWlsYWJsZSBPU0RzLgorICogVGhpcyBk
ZWNvZGVyIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgQUZCQyAxLjIgc3BlY2lmaWNhdGlvbnMgZm9y
IHRoZQorICogTWFsaSBHMzEgYW5kIEc1MiBHUFVzLgorICogSXMgc3VwcG9ydHMgOgorICogLSBi
YXNpYyBBRkJDIGJ1ZmZlciBmb3IgbXVsdGlwbGUgUkdCIGFuZCBZVVYgcGl4ZWwgZm9ybWF0cwor
ICogLSBTUEFSU0UgbGF5b3V0IGFuZCBTUExJVCBsYXlvdXQKKyAqIC0gMTZ4MTYgYW5kIDMyeDgg
IndpZGVibGsiIHN1cGVyYmxvY2tzCisgKiAtIFRpbGVkIGhlYWRlcgorICoKKyAqIFRoZSBBUk0g
QUZCQyBEZWNvZGVyIGluZGVwZW5kZW50IGZyb20gdGhlIFZQVSBQaXhlbCBQaXBlbGluZSwgc28K
KyAqIHRoZSBBUk0gQUZCQyBEZWNvZGVyIHJlYWRzIHRoZSBkYXRhIGZyb20gdGhlIFNEUkFNIHRo
ZW4gZGVjb2RlcworICogaW50byBhIHByaXZhdGUgaW50ZXJuYWwgcGh5c2ljYWwgYWRkcmVzcyB3
aGVyZSB0aGUgT1NEMSBQbGFuZSBwaXhlbAorICogY29tcG9zZXIgdW5wYWNrcyB0aGUgZGVjb2Rl
ZCBkYXRhLgorICovCisKKy8qIEFtbG9naWMgQUZCQyBEZWNvZGVyIGZvciBHWE0gRmFtaWx5ICov
CisKKyNkZWZpbmUgT1NEMV9BRkJDRF9SR0IzMgkweDE1CisKK3N0YXRpYyBpbnQgbWVzb25fZ3ht
X2FmYmNkX3BpeGVsX2ZtdCh1NjQgbW9kaWZpZXIsIHVpbnQzMl90IGZvcm1hdCkKK3sKKwlzd2l0
Y2ggKGZvcm1hdCkgeworCWNhc2UgRFJNX0ZPUk1BVF9YQkdSODg4ODoKKwljYXNlIERSTV9GT1JN
QVRfQUJHUjg4ODg6CisJCXJldHVybiBPU0QxX0FGQkNEX1JHQjMyOworCS8qIFRPRklYIHN1cHBv
cnQgbW9kZSBmb3JtYXRzICovCisJZGVmYXVsdDoKKwkJRFJNX0RFQlVHKCJ1bnN1cHBvcnRlZCBh
ZmJjIGZvcm1hdFslMDh4XVxuIiwgZm9ybWF0KTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorfQor
CitzdGF0aWMgYm9vbCBtZXNvbl9neG1fYWZiY2Rfc3VwcG9ydGVkX2ZtdCh1NjQgbW9kaWZpZXIs
IHVpbnQzMl90IGZvcm1hdCkKK3sKKwlpZiAobW9kaWZpZXIgJiBBRkJDX0ZPUk1BVF9NT0RfQkxP
Q0tfU0laRV8zMng4KQorCQlyZXR1cm4gZmFsc2U7CisKKwlpZiAoIShtb2RpZmllciAmIEFGQkNf
Rk9STUFUX01PRF9ZVFIpKQorCQlyZXR1cm4gZmFsc2U7CisKKwlyZXR1cm4gbWVzb25fZ3htX2Fm
YmNkX3BpeGVsX2ZtdChtb2RpZmllciwgZm9ybWF0KSA+PSAwOworfQorCitzdGF0aWMgaW50IG1l
c29uX2d4bV9hZmJjZF9pbml0KHN0cnVjdCBtZXNvbl9kcm0gKnByaXYpCit7CisJcmV0dXJuIDA7
Cit9CisKK3N0YXRpYyBpbnQgbWVzb25fZ3htX2FmYmNkX3Jlc2V0KHN0cnVjdCBtZXNvbl9kcm0g
KnByaXYpCit7CisJd3JpdGVsX3JlbGF4ZWQoVklVX1NXX1JFU0VUX09TRDFfQUZCQ0QsCisJCSAg
ICAgICBwcml2LT5pb19iYXNlICsgX1JFRyhWSVVfU1dfUkVTRVQpKTsKKwl3cml0ZWxfcmVsYXhl
ZCgwLCBwcml2LT5pb19iYXNlICsgX1JFRyhWSVVfU1dfUkVTRVQpKTsKKworCXJldHVybiAwOwor
fQorCitzdGF0aWMgaW50IG1lc29uX2d4bV9hZmJjZF9lbmFibGUoc3RydWN0IG1lc29uX2RybSAq
cHJpdikKK3sKKwl3cml0ZWxfcmVsYXhlZChGSUVMRF9QUkVQKE9TRDFfQUZCQ0RfSURfRklGT19U
SFJELCAweDQwKSB8CisJCSAgICAgICBPU0QxX0FGQkNEX0RFQ19FTkFCTEUsCisJCSAgICAgICBw
cml2LT5pb19iYXNlICsgX1JFRyhPU0QxX0FGQkNEX0VOQUJMRSkpOworCisJcmV0dXJuIDA7Cit9
CisKK3N0YXRpYyBpbnQgbWVzb25fZ3htX2FmYmNkX2Rpc2FibGUoc3RydWN0IG1lc29uX2RybSAq
cHJpdikKK3sKKwl3cml0ZWxfYml0c19yZWxheGVkKE9TRDFfQUZCQ0RfREVDX0VOQUJMRSwgMCwK
KwkJCSAgICBwcml2LT5pb19iYXNlICsgX1JFRyhPU0QxX0FGQkNEX0VOQUJMRSkpOworCisJcmV0
dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbWVzb25fZ3htX2FmYmNkX3NldHVwKHN0cnVjdCBtZXNv
bl9kcm0gKnByaXYpCit7CisJdTMyIGNvbnZfbGJ1Zl9sZW47CisJdTMyIG1vZGUgPSBGSUVMRF9Q
UkVQKE9TRDFfQUZCQ0RfTUlGX1VSR0VOVCwgMykgfAorCQkgICBGSUVMRF9QUkVQKE9TRDFfQUZC
Q0RfSE9MRF9MSU5FX05VTSwgNCkgfAorCQkgICBGSUVMRF9QUkVQKE9TRDFfQUZCQ0RfUkdCQV9F
WENIQU5fQ1RSTCwgMHgzNCkgfAorCQkgICBtZXNvbl9neG1fYWZiY2RfcGl4ZWxfZm10KHByaXYt
PmFmYmNkLm1vZGlmaWVyLAorCQkJCQkgICAgIHByaXYtPmFmYmNkLmZvcm1hdCk7CisKKwlpZiAo
cHJpdi0+YWZiY2QubW9kaWZpZXIgJiBBRkJDX0ZPUk1BVF9NT0RfU1BBUlNFKQorCQltb2RlIHw9
IE9TRDFfQUZCQ0RfSFJFR19IQUxGX0JMT0NLOworCisJaWYgKHByaXYtPmFmYmNkLm1vZGlmaWVy
ICYgQUZCQ19GT1JNQVRfTU9EX1NQTElUKQorCQltb2RlIHw9IE9TRDFfQUZCQ0RfSFJFR19CTE9D
S19TUExJVDsKKworCXdyaXRlbF9yZWxheGVkKG1vZGUsIHByaXYtPmlvX2Jhc2UgKyBfUkVHKE9T
RDFfQUZCQ0RfTU9ERSkpOworCisJd3JpdGVsX3JlbGF4ZWQoRklFTERfUFJFUChPU0QxX0FGQkNE
X0hSRUdfVlNJWkVfSU4sCisJCQkJICBwcml2LT52aXUub3NkMV93aWR0aCkgfAorCQkgICAgICAg
RklFTERfUFJFUChPU0QxX0FGQkNEX0hSRUdfSFNJWkVfSU4sCisJCQkJICBwcml2LT52aXUub3Nk
MV9oZWlnaHQpLAorCQkgICAgICAgcHJpdi0+aW9fYmFzZSArIF9SRUcoT1NEMV9BRkJDRF9TSVpF
X0lOKSk7CisKKwl3cml0ZWxfcmVsYXhlZChwcml2LT52aXUub3NkMV9hZGRyID4+IDQsCisJCSAg
ICAgICBwcml2LT5pb19iYXNlICsgX1JFRyhPU0QxX0FGQkNEX0hEUl9QVFIpKTsKKwl3cml0ZWxf
cmVsYXhlZChwcml2LT52aXUub3NkMV9hZGRyID4+IDQsCisJCSAgICAgICBwcml2LT5pb19iYXNl
ICsgX1JFRyhPU0QxX0FGQkNEX0ZSQU1FX1BUUikpOworCS8qIFRPRklYOiBiaXRzIDMxOjI0IGFy
ZSBub3QgZG9jdW1lbnRlZCwgbm9yIHRoZSBtZWFuaW5nIG9mIDB4ZTQgKi8KKwl3cml0ZWxfcmVs
YXhlZCgoMHhlNCA8PCAyNCkgfCAocHJpdi0+dml1Lm9zZDFfYWRkciAmIDB4ZmZmZmZmKSwKKwkJ
ICAgICAgIHByaXYtPmlvX2Jhc2UgKyBfUkVHKE9TRDFfQUZCQ0RfQ0hST01BX1BUUikpOworCisJ
aWYgKHByaXYtPnZpdS5vc2QxX3dpZHRoIDw9IDEyOCkKKwkJY29udl9sYnVmX2xlbiA9IDMyOwor
CWVsc2UgaWYgKHByaXYtPnZpdS5vc2QxX3dpZHRoIDw9IDI1NikKKwkJY29udl9sYnVmX2xlbiA9
IDY0OworCWVsc2UgaWYgKHByaXYtPnZpdS5vc2QxX3dpZHRoIDw9IDUxMikKKwkJY29udl9sYnVm
X2xlbiA9IDEyODsKKwllbHNlIGlmIChwcml2LT52aXUub3NkMV93aWR0aCA8PSAxMDI0KQorCQlj
b252X2xidWZfbGVuID0gMjU2OworCWVsc2UgaWYgKHByaXYtPnZpdS5vc2QxX3dpZHRoIDw9IDIw
NDgpCisJCWNvbnZfbGJ1Zl9sZW4gPSA1MTI7CisJZWxzZQorCQljb252X2xidWZfbGVuID0gMTAy
NDsKKworCXdyaXRlbF9yZWxheGVkKGNvbnZfbGJ1Zl9sZW4sCisJCSAgICAgICBwcml2LT5pb19i
YXNlICsgX1JFRyhPU0QxX0FGQkNEX0NPTlZfQ1RSTCkpOworCisJd3JpdGVsX3JlbGF4ZWQoRklF
TERfUFJFUChPU0QxX0FGQkNEX0RFQ19QSVhFTF9CR05fSCwgMCkgfAorCQkgICAgICAgRklFTERf
UFJFUChPU0QxX0FGQkNEX0RFQ19QSVhFTF9FTkRfSCwKKwkJCQkgIHByaXYtPnZpdS5vc2QxX3dp
ZHRoIC0gMSksCisJCSAgICAgICBwcml2LT5pb19iYXNlICsgX1JFRyhPU0QxX0FGQkNEX1BJWEVM
X0hTQ09QRSkpOworCisJd3JpdGVsX3JlbGF4ZWQoRklFTERfUFJFUChPU0QxX0FGQkNEX0RFQ19Q
SVhFTF9CR05fViwgMCkgfAorCQkgICAgICAgRklFTERfUFJFUChPU0QxX0FGQkNEX0RFQ19QSVhF
TF9FTkRfViwKKwkJCQkgIHByaXYtPnZpdS5vc2QxX2hlaWdodCAtIDEpLAorCQkgICAgICAgcHJp
di0+aW9fYmFzZSArIF9SRUcoT1NEMV9BRkJDRF9QSVhFTF9WU0NPUEUpKTsKKworCXJldHVybiAw
OworfQorCitzdHJ1Y3QgbWVzb25fYWZiY2Rfb3BzIG1lc29uX2FmYmNkX2d4bV9vcHMgPSB7CisJ
LmluaXQgPSBtZXNvbl9neG1fYWZiY2RfaW5pdCwKKwkucmVzZXQgPSBtZXNvbl9neG1fYWZiY2Rf
cmVzZXQsCisJLmVuYWJsZSA9IG1lc29uX2d4bV9hZmJjZF9lbmFibGUsCisJLmRpc2FibGUgPSBt
ZXNvbl9neG1fYWZiY2RfZGlzYWJsZSwKKwkuc2V0dXAgPSBtZXNvbl9neG1fYWZiY2Rfc2V0dXAs
CisJLnN1cHBvcnRlZF9mbXQgPSBtZXNvbl9neG1fYWZiY2Rfc3VwcG9ydGVkX2ZtdCwKK307CisK
Ky8qIEFSTSBBRkJDIERlY29kZXIgZm9yIEcxMkEgRmFtaWx5ICovCisKKy8qIEFtbG9naWMgRzEy
QSBNYWxpIEFGQkMgRGVjb2RlciBzdXBwb3J0ZWQgZm9ybWF0cyAqLworZW51bSB7CisJTUFGQkNf
Rk1UX1JHQjU2NSA9IDAsCisJTUFGQkNfRk1UX1JHQkE1NTUxLAorCU1BRkJDX0ZNVF9SR0JBMTAx
MDEwMiwKKwlNQUZCQ19GTVRfWVVWNDIwXzEwQiwKKwlNQUZCQ19GTVRfUkdCODg4LAorCU1BRkJD
X0ZNVF9SR0JBODg4OCwKKwlNQUZCQ19GTVRfUkdCQTQ0NDQsCisJTUFGQkNfRk1UX1I4LAorCU1B
RkJDX0ZNVF9SRzg4LAorCU1BRkJDX0ZNVF9ZVVY0MjBfOEIsCisJTUFGQkNfRk1UX1lVVjQyMl84
QiA9IDExLAorCU1BRkJDX0ZNVF9ZVVY0MjJfMTBCID0gMTQsCit9OworCitzdGF0aWMgaW50IG1l
c29uX2cxMmFfYWZiY2RfcGl4ZWxfZm10KHU2NCBtb2RpZmllciwgdWludDMyX3QgZm9ybWF0KQor
eworCXN3aXRjaCAoZm9ybWF0KSB7CisJY2FzZSBEUk1fRk9STUFUX1hSR0I4ODg4OgorCWNhc2Ug
RFJNX0ZPUk1BVF9BUkdCODg4ODoKKwkJLyogWVRSIGlzIGZvcmJpZGRlbiBmb3Igbm9uIFhCR1Ig
Zm9ybWF0cyAqLworCQlpZiAobW9kaWZpZXIgJiBBRkJDX0ZPUk1BVF9NT0RfWVRSKQorCQkJcmV0
dXJuIC1FSU5WQUw7CisJLyogZmFsbCB0aHJvdWdoICovCisJY2FzZSBEUk1fRk9STUFUX1hCR1I4
ODg4OgorCWNhc2UgRFJNX0ZPUk1BVF9BQkdSODg4ODoKKwkJcmV0dXJuIE1BRkJDX0ZNVF9SR0JB
ODg4ODsKKwljYXNlIERSTV9GT1JNQVRfUkdCODg4OgorCQkvKiBZVFIgaXMgZm9yYmlkZGVuIGZv
ciBub24gWEJHUiBmb3JtYXRzICovCisJCWlmIChtb2RpZmllciAmIEFGQkNfRk9STUFUX01PRF9Z
VFIpCisJCQlyZXR1cm4gLUVJTlZBTDsKKwkJcmV0dXJuIE1BRkJDX0ZNVF9SR0I4ODg7CisJY2Fz
ZSBEUk1fRk9STUFUX1JHQjU2NToKKwkJLyogWVRSIGlzIGZvcmJpZGRlbiBmb3Igbm9uIFhCR1Ig
Zm9ybWF0cyAqLworCQlpZiAobW9kaWZpZXIgJiBBRkJDX0ZPUk1BVF9NT0RfWVRSKQorCQkJcmV0
dXJuIC1FSU5WQUw7CisJCXJldHVybiBNQUZCQ19GTVRfUkdCNTY1OworCS8qIFRPRklYIHN1cHBv
cnQgbW9kZSBmb3JtYXRzICovCisJZGVmYXVsdDoKKwkJRFJNX0RFQlVHKCJ1bnN1cHBvcnRlZCBh
ZmJjIGZvcm1hdFslMDh4XVxuIiwgZm9ybWF0KTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorfQor
CitzdGF0aWMgaW50IG1lc29uX2cxMmFfYWZiY2RfYnBwKHVpbnQzMl90IGZvcm1hdCkKK3sKKwlz
d2l0Y2ggKGZvcm1hdCkgeworCWNhc2UgRFJNX0ZPUk1BVF9YUkdCODg4ODoKKwljYXNlIERSTV9G
T1JNQVRfQVJHQjg4ODg6CisJY2FzZSBEUk1fRk9STUFUX1hCR1I4ODg4OgorCWNhc2UgRFJNX0ZP
Uk1BVF9BQkdSODg4ODoKKwkJcmV0dXJuIDMyOworCWNhc2UgRFJNX0ZPUk1BVF9SR0I4ODg6CisJ
CXJldHVybiAyNDsKKwljYXNlIERSTV9GT1JNQVRfUkdCNTY1OgorCQlyZXR1cm4gMTY7CisJLyog
VE9GSVggc3VwcG9ydCBtb2RlIGZvcm1hdHMgKi8KKwlkZWZhdWx0OgorCQlEUk1fRVJST1IoInVu
c3VwcG9ydGVkIGFmYmMgZm9ybWF0WyUwOHhdXG4iLCBmb3JtYXQpOworCQlyZXR1cm4gMDsKKwl9
Cit9CisKK3N0YXRpYyBpbnQgbWVzb25fZzEyYV9hZmJjZF9mbXRfdG9fYmxrX21vZGUodTY0IG1v
ZGlmaWVyLCB1aW50MzJfdCBmb3JtYXQpCit7CisJc3dpdGNoIChmb3JtYXQpIHsKKwljYXNlIERS
TV9GT1JNQVRfWFJHQjg4ODg6CisJY2FzZSBEUk1fRk9STUFUX0FSR0I4ODg4OgorCWNhc2UgRFJN
X0ZPUk1BVF9YQkdSODg4ODoKKwljYXNlIERSTV9GT1JNQVRfQUJHUjg4ODg6CisJCXJldHVybiBP
U0RfTUFMSV9DT0xPUl9NT0RFX1JHQkE4ODg4OworCWNhc2UgRFJNX0ZPUk1BVF9SR0I4ODg6CisJ
CXJldHVybiBPU0RfTUFMSV9DT0xPUl9NT0RFX1JHQjg4ODsKKwljYXNlIERSTV9GT1JNQVRfUkdC
NTY1OgorCQlyZXR1cm4gT1NEX01BTElfQ09MT1JfTU9ERV9SR0I1NjU7CisJLyogVE9GSVggc3Vw
cG9ydCBtb2RlIGZvcm1hdHMgKi8KKwlkZWZhdWx0OgorCQlEUk1fREVCVUcoInVuc3VwcG9ydGVk
IGFmYmMgZm9ybWF0WyUwOHhdXG4iLCBmb3JtYXQpOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9Cit9
CisKK3N0YXRpYyBib29sIG1lc29uX2cxMmFfYWZiY2Rfc3VwcG9ydGVkX2ZtdCh1NjQgbW9kaWZp
ZXIsIHVpbnQzMl90IGZvcm1hdCkKK3sKKwlyZXR1cm4gbWVzb25fZzEyYV9hZmJjZF9waXhlbF9m
bXQobW9kaWZpZXIsIGZvcm1hdCkgPj0gMDsKK30KKworc3RhdGljIGludCBtZXNvbl9nMTJhX2Fm
YmNkX2luaXQoc3RydWN0IG1lc29uX2RybSAqcHJpdikKK3sKKwkvKiBIYW5kbGUgQUZCQyBEZWNv
ZGVyIHJlc2V0IG1hbnVhbGx5ICovCisJd3JpdGVsX2JpdHNfcmVsYXhlZChNQUxJX0FGQkNEX01B
TlVBTF9SRVNFVCwgTUFMSV9BRkJDRF9NQU5VQUxfUkVTRVQsCisJCQkgICAgcHJpdi0+aW9fYmFz
ZSArIF9SRUcoTUFMSV9BRkJDRF9UT1BfQ1RSTCkpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRp
YyBpbnQgbWVzb25fZzEyYV9hZmJjZF9yZXNldChzdHJ1Y3QgbWVzb25fZHJtICpwcml2KQorewor
CXdyaXRlbF9yZWxheGVkKFZJVV9TV19SRVNFVF9HMTJBX0FGQkNfQVJCIHwKKwkJICAgICAgIFZJ
VV9TV19SRVNFVF9HMTJBX09TRDFfQUZCQ0QsCisJCSAgICAgICBwcml2LT5pb19iYXNlICsgX1JF
RyhWSVVfU1dfUkVTRVQpKTsKKwl3cml0ZWxfcmVsYXhlZCgwLCBwcml2LT5pb19iYXNlICsgX1JF
RyhWSVVfU1dfUkVTRVQpKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IG1lc29uX2cx
MmFfYWZiY2RfZW5hYmxlKHN0cnVjdCBtZXNvbl9kcm0gKnByaXYpCit7CisJd3JpdGVsX3JlbGF4
ZWQoVlBVX01BRkJDX0lSUV9TVVJGQUNFU19DT01QTEVURUQgfAorCQkgICAgICAgVlBVX01BRkJD
X0lSUV9DT05GSUdVUkFUSU9OX1NXQVBQRUQgfAorCQkgICAgICAgVlBVX01BRkJDX0lSUV9ERUNP
REVfRVJST1IgfAorCQkgICAgICAgVlBVX01BRkJDX0lSUV9ERVRJTElOR19FUlJPUiwKKwkJICAg
ICAgIHByaXYtPmlvX2Jhc2UgKyBfUkVHKFZQVV9NQUZCQ19JUlFfTUFTSykpOworCisJd3JpdGVs
X2JpdHNfcmVsYXhlZChWUFVfTUFGQkNfUzBfRU5BQkxFLCBWUFVfTUFGQkNfUzBfRU5BQkxFLAor
CQkJICAgIHByaXYtPmlvX2Jhc2UgKyBfUkVHKFZQVV9NQUZCQ19TVVJGQUNFX0NGRykpOworCisJ
d3JpdGVsX3JlbGF4ZWQoVlBVX01BRkJDX0RJUkVDVF9TV0FQLAorCQkgICAgICAgcHJpdi0+aW9f
YmFzZSArIF9SRUcoVlBVX01BRkJDX0NPTU1BTkQpKTsKKworCXJldHVybiAwOworfQorCitzdGF0
aWMgaW50IG1lc29uX2cxMmFfYWZiY2RfZGlzYWJsZShzdHJ1Y3QgbWVzb25fZHJtICpwcml2KQor
eworCXdyaXRlbF9iaXRzX3JlbGF4ZWQoVlBVX01BRkJDX1MwX0VOQUJMRSwgMCwKKwkJCSAgICBw
cml2LT5pb19iYXNlICsgX1JFRyhWUFVfTUFGQkNfU1VSRkFDRV9DRkcpKTsKKworCXJldHVybiAw
OworfQorCitzdGF0aWMgaW50IG1lc29uX2cxMmFfYWZiY2Rfc2V0dXAoc3RydWN0IG1lc29uX2Ry
bSAqcHJpdikKK3sKKwl1MzIgZm9ybWF0ID0gbWVzb25fZzEyYV9hZmJjZF9waXhlbF9mbXQocHJp
di0+YWZiY2QubW9kaWZpZXIsCisJCQkJCQlwcml2LT5hZmJjZC5mb3JtYXQpOworCisJaWYgKHBy
aXYtPmFmYmNkLm1vZGlmaWVyICYgQUZCQ19GT1JNQVRfTU9EX1lUUikKKwkJZm9ybWF0IHw9IFZQ
VV9NQUZCQ19ZVVZfVFJBTlNGT1JNOworCisJaWYgKHByaXYtPmFmYmNkLm1vZGlmaWVyICYgQUZC
Q19GT1JNQVRfTU9EX1NQTElUKQorCQlmb3JtYXQgfD0gVlBVX01BRkJDX0JMT0NLX1NQTElUOwor
CisJaWYgKHByaXYtPmFmYmNkLm1vZGlmaWVyICYgQUZCQ19GT1JNQVRfTU9EX1RJTEVEKQorCQlm
b3JtYXQgfD0gVlBVX01BRkJDX1RJTEVEX0hFQURFUl9FTjsKKworCWlmICgocHJpdi0+YWZiY2Qu
bW9kaWZpZXIgJiBBRkJDX0ZPUk1BVF9NT0RfQkxPQ0tfU0laRV9NQVNLKSA9PQorCQlBRkJDX0ZP
Uk1BVF9NT0RfQkxPQ0tfU0laRV8zMng4KQorCQlmb3JtYXQgfD0gRklFTERfUFJFUChWUFVfTUFG
QkNfU1VQRVJfQkxPQ0tfQVNQRUNULCAxKTsKKworCXdyaXRlbF9yZWxheGVkKGZvcm1hdCwKKwkJ
ICAgICAgIHByaXYtPmlvX2Jhc2UgKyBfUkVHKFZQVV9NQUZCQ19GT1JNQVRfU1BFQ0lGSUVSX1Mw
KSk7CisKKwl3cml0ZWxfcmVsYXhlZChwcml2LT52aXUub3NkMV9hZGRyLAorCQkgICAgICAgcHJp
di0+aW9fYmFzZSArIF9SRUcoVlBVX01BRkJDX0hFQURFUl9CVUZfQUREUl9MT1dfUzApKTsKKwl3
cml0ZWxfcmVsYXhlZCgwLAorCQkgICAgICAgcHJpdi0+aW9fYmFzZSArIF9SRUcoVlBVX01BRkJD
X0hFQURFUl9CVUZfQUREUl9ISUdIX1MwKSk7CisKKwl3cml0ZWxfcmVsYXhlZChwcml2LT52aXUu
b3NkMV93aWR0aCwKKwkJICAgICAgIHByaXYtPmlvX2Jhc2UgKyBfUkVHKFZQVV9NQUZCQ19CVUZG
RVJfV0lEVEhfUzApKTsKKwl3cml0ZWxfcmVsYXhlZChBTElHTihwcml2LT52aXUub3NkMV9oZWln
aHQsIDMyKSwKKwkJICAgICAgIHByaXYtPmlvX2Jhc2UgKyBfUkVHKFZQVV9NQUZCQ19CVUZGRVJf
SEVJR0hUX1MwKSk7CisKKwl3cml0ZWxfcmVsYXhlZCgwLAorCQkgICAgICAgcHJpdi0+aW9fYmFz
ZSArIF9SRUcoVlBVX01BRkJDX0JPVU5ESU5HX0JPWF9YX1NUQVJUX1MwKSk7CisJd3JpdGVsX3Jl
bGF4ZWQocHJpdi0+dml1Lm9zZDFfd2lkdGggLSAxLAorCQkgICAgICAgcHJpdi0+aW9fYmFzZSAr
IF9SRUcoVlBVX01BRkJDX0JPVU5ESU5HX0JPWF9YX0VORF9TMCkpOworCXdyaXRlbF9yZWxheGVk
KDAsCisJCSAgICAgICBwcml2LT5pb19iYXNlICsgX1JFRyhWUFVfTUFGQkNfQk9VTkRJTkdfQk9Y
X1lfU1RBUlRfUzApKTsKKwl3cml0ZWxfcmVsYXhlZChwcml2LT52aXUub3NkMV9oZWlnaHQgLSAx
LAorCQkgICAgICAgcHJpdi0+aW9fYmFzZSArIF9SRUcoVlBVX01BRkJDX0JPVU5ESU5HX0JPWF9Z
X0VORF9TMCkpOworCisJd3JpdGVsX3JlbGF4ZWQoTUVTT05fRzEyQV9BRkJDRF9PVVRfQUREUiwK
KwkJICAgICAgIHByaXYtPmlvX2Jhc2UgKyBfUkVHKFZQVV9NQUZCQ19PVVRQVVRfQlVGX0FERFJf
TE9XX1MwKSk7CisJd3JpdGVsX3JlbGF4ZWQoMCwKKwkJICAgICAgIHByaXYtPmlvX2Jhc2UgKyBf
UkVHKFZQVV9NQUZCQ19PVVRQVVRfQlVGX0FERFJfSElHSF9TMCkpOworCisJd3JpdGVsX3JlbGF4
ZWQocHJpdi0+dml1Lm9zZDFfd2lkdGggKgorCQkgICAgICAgKG1lc29uX2cxMmFfYWZiY2RfYnBw
KHByaXYtPmFmYmNkLmZvcm1hdCkgLyA4KSwKKwkJICAgICAgIHByaXYtPmlvX2Jhc2UgKyBfUkVH
KFZQVV9NQUZCQ19PVVRQVVRfQlVGX1NUUklERV9TMCkpOworCisJcmV0dXJuIDA7Cit9CisKK3N0
cnVjdCBtZXNvbl9hZmJjZF9vcHMgbWVzb25fYWZiY2RfZzEyYV9vcHMgPSB7CisJLmluaXQgPSBt
ZXNvbl9nMTJhX2FmYmNkX2luaXQsCisJLnJlc2V0ID0gbWVzb25fZzEyYV9hZmJjZF9yZXNldCwK
KwkuZW5hYmxlID0gbWVzb25fZzEyYV9hZmJjZF9lbmFibGUsCisJLmRpc2FibGUgPSBtZXNvbl9n
MTJhX2FmYmNkX2Rpc2FibGUsCisJLnNldHVwID0gbWVzb25fZzEyYV9hZmJjZF9zZXR1cCwKKwku
Zm10X3RvX2Jsa19tb2RlID0gbWVzb25fZzEyYV9hZmJjZF9mbXRfdG9fYmxrX21vZGUsCisJLnN1
cHBvcnRlZF9mbXQgPSBtZXNvbl9nMTJhX2FmYmNkX3N1cHBvcnRlZF9mbXQsCit9OwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL21lc29uL21lc29uX29zZF9hZmJjZC5oIGIvZHJpdmVycy9n
cHUvZHJtL21lc29uL21lc29uX29zZF9hZmJjZC5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAwMDAwMC4uNWU1NTIzMzA0ZjQyCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9n
cHUvZHJtL21lc29uL21lc29uX29zZF9hZmJjZC5oCkBAIC0wLDAgKzEsMjggQEAKKy8qIFNQRFgt
TGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wKyAqLworLyoKKyAqIENvcHlyaWdodCAoQykgMjAx
OSBCYXlMaWJyZSwgU0FTCisgKiBBdXRob3I6IE5laWwgQXJtc3Ryb25nIDxuYXJtc3Ryb25nQGJh
eWxpYnJlLmNvbT4KKyAqLworCisjaWZuZGVmIF9fTUVTT05fT1NEX0FGQkNEX0gKKyNkZWZpbmUg
X19NRVNPTl9PU0RfQUZCQ0RfSAorCisjaW5jbHVkZSAibWVzb25fZHJ2LmgiCisKKy8qIFRoaXMg
aXMgYW4gaW50ZXJuYWwgYWRkcmVzcyB1c2VkIHRvIHRyYW5zZmVyIHBpeGVsIGZyb20gQUZCQyB0
byB0aGUgVklVICovCisjZGVmaW5lIE1FU09OX0cxMkFfQUZCQ0RfT1VUX0FERFIJMHgxMDAwMDAw
CisKK3N0cnVjdCBtZXNvbl9hZmJjZF9vcHMgeworCWludCAoKmluaXQpKHN0cnVjdCBtZXNvbl9k
cm0gKnByaXYpOworCWludCAoKnJlc2V0KShzdHJ1Y3QgbWVzb25fZHJtICpwcml2KTsKKwlpbnQg
KCplbmFibGUpKHN0cnVjdCBtZXNvbl9kcm0gKnByaXYpOworCWludCAoKmRpc2FibGUpKHN0cnVj
dCBtZXNvbl9kcm0gKnByaXYpOworCWludCAoKnNldHVwKShzdHJ1Y3QgbWVzb25fZHJtICpwcml2
KTsKKwlpbnQgKCpmbXRfdG9fYmxrX21vZGUpKHU2NCBtb2RpZmllciwgdWludDMyX3QgZm9ybWF0
KTsKKwlib29sICgqc3VwcG9ydGVkX2ZtdCkodTY0IG1vZGlmaWVyLCB1aW50MzJfdCBmb3JtYXQp
OworfTsKKworZXh0ZXJuIHN0cnVjdCBtZXNvbl9hZmJjZF9vcHMgbWVzb25fYWZiY2RfZ3htX29w
czsKK2V4dGVybiBzdHJ1Y3QgbWVzb25fYWZiY2Rfb3BzIG1lc29uX2FmYmNkX2cxMmFfb3BzOwor
CisjZW5kaWYgLyogX19NRVNPTl9PU0RfQUZCQ0RfSCAqLwotLSAKMi4yMi4wCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBs
aXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
