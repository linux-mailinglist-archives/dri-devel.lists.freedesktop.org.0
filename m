Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5AE5AFA945
	for <lists+dri-devel@lfdr.de>; Wed, 13 Nov 2019 05:58:43 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 344C46E03E;
	Wed, 13 Nov 2019 04:58:41 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from NAM05-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr720055.outbound.protection.outlook.com [40.107.72.55])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 664AF6E03E
 for <dri-devel@lists.freedesktop.org>; Wed, 13 Nov 2019 04:58:39 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=eRJ8xIqYE5+OSAUIVXt+5PzNrQo+xqf5TMBQ0qyJ0qkxdzolQqXcTRfixqY/T/LBcVs/ISWycz2849J7h8DxKmFiY4kNz3afTYAAozp4piOt+N0sEUJpQFf2mnaolD0Xwt4fWXtoAQTQc7Nk+crqCfGyYvsyDZRlH7fY/9RxWU8Pr0O0g97pytU86BbRo0svwBcBbfg0XkXddC0a55usD1DdhvBgGO7vzWN/t2pI/wQkW/XScKGyVlH47Oy9nPTbXLtJU3knyGMdQZ+UGChwIEPOxV7zFxoAZZeC0fOprhV/gVMgfEvQ+C06jfCg0Fa8Ak51GSNqeTA2o5IBD1w6Yg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=FaS33hhBgVArn91yix8dEhBmceHqNahuyU9paSIkKLY=;
 b=R5yT3eaJXKNZR8+rnqko2/iXS8W/GgPcbaENxHmmTzn8uBld6PuGCINnDvseNCIlAxw+PrrmkfdRa2mNCxWCIMOIlgzSUyip/FC3dDxL9Gr7rw4f+VFR7dxrmQHVCwC6kz2f+saCjmvD+ovQyV761v5suCzoOOGBQZCDENwDqAdhdcPNLy4Aay+fmcOfTmImgPvNJzzlcDnAjEh8Noi2D15S5ULMXOd5Sl+CEqrzNDv9DJhX4YXm7FECgkd60NBTu5x7DaqJ3GfGl5l/dHUMwDGTKu1uypv7KNkOFzNlLO5Kgz+A3T4Z5YWnX5zxjI0zzWxMkkckS4eS5/A87yUY/w==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MN2PR12MB3312.namprd12.prod.outlook.com (20.179.80.215) by
 MN2PR12MB2928.namprd12.prod.outlook.com (20.179.83.91) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2430.24; Wed, 13 Nov 2019 04:58:36 +0000
Received: from MN2PR12MB3312.namprd12.prod.outlook.com
 ([fe80::39b7:e01c:5800:3c00]) by MN2PR12MB3312.namprd12.prod.outlook.com
 ([fe80::39b7:e01c:5800:3c00%6]) with mapi id 15.20.2430.027; Wed, 13 Nov 2019
 04:58:35 +0000
From: Flora Cui <flora.cui@amd.com>
To: brahma_hybrid_dev@amd.com,
	dri-devel@lists.freedesktop.org
Subject: [PATCH libdrm 1/4] tests/amdgpu: add dispatch hang test
Date: Wed, 13 Nov 2019 12:58:09 +0800
Message-Id: <20191113045812.24465-1-flora.cui@amd.com>
X-Mailer: git-send-email 2.17.1
X-ClientProxiedBy: HK0P153CA0042.APCP153.PROD.OUTLOOK.COM
 (2603:1096:203:17::30) To MN2PR12MB3312.namprd12.prod.outlook.com
 (2603:10b6:208:ab::23)
MIME-Version: 1.0
X-Mailer: git-send-email 2.17.1
X-Originating-IP: [180.167.199.189]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: 971f9f28-24d7-43e6-74ba-08d767f6238e
X-MS-TrafficTypeDiagnostic: MN2PR12MB2928:
X-LD-Processed: 3dd8961f-e488-4e60-8e11-a82d994e183d,ExtAddr
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <MN2PR12MB29281ECFE4E0DEB5E030B611FA760@MN2PR12MB2928.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:345;
X-Forefront-PRVS: 0220D4B98D
X-Forefront-Antispam-Report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(376002)(366004)(136003)(346002)(396003)(199004)(189003)(316002)(81156014)(44832011)(51416003)(52116002)(14454004)(186003)(81166006)(25786009)(2906002)(8936002)(305945005)(486006)(50226002)(7736002)(1076003)(26005)(5660300002)(8676002)(66066001)(6666004)(36756003)(386003)(6506007)(99286004)(6116002)(14444005)(6486002)(66946007)(47776003)(476003)(6436002)(66556008)(48376002)(3846002)(16586007)(478600001)(4326008)(86362001)(50466002)(66476007)(2616005)(6512007);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB2928;
 H:MN2PR12MB3312.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: tzAhHHxGIcVxZp4cWoZySya1eWFPLT8KIP/cnjmAudDEoj4UEy2qGCFskkCXP/vJt7Yow6o3GU88QGL5UsAuC7eqpdqIAD2RZm6jq7kymQc2Ppp/ZXZDydQlYhcKRkuhqolPyF+P72by0b6Ce4tohqfkVgH3ATD6pwi5AwF9mNEgi3/uvLBqP5+st31wYUX7hhIubqyrA5Zut0WeyVn4iC1OOH/7KmyvpKH9hZZVUyqjmlm2rHMFX7wZhtq4ClmGesVUOsv5VyYTdXMIiRH5P1Mvm96Fq5OYzGURJ3hlAxK/bNQ19nRfLQMOmmhVO1Tc/YbbQL8yAsA2WEWCWe6vDfI67ZtXmPt1lyOfq7jRrBxo5dZLVY7jNznVxJ6yvAVFVd51491k+7tDl47NVqRXNf+lLPxh4gnv2F5vqZhR8GGAnyelyCcsf29JyOwoUwMF
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 971f9f28-24d7-43e6-74ba-08d767f6238e
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 13 Nov 2019 04:58:35.7965 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: ZuAHOCYNsaBT0LViEqeKbASghxJWWyf2DbbfBFjXdyYKnNzLu/TuqIBHQrHeFXfc
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB2928
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=FaS33hhBgVArn91yix8dEhBmceHqNahuyU9paSIkKLY=;
 b=KmTX71GzeFFwhMjOSFRNctkN1StAZRFtOVTEEHy39KUxMyqxONtHczU2u4jXOeKv1zhlHUrWyUKfRnjxfepqxhu3Ny8NVYnPDAchpGrFrVWIadTA36C2QHd6cqGNRqjRmkabDS6k4Rp9L9DoSIPSev1YgmjPt1leAaKf1GGBREQ=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Flora.Cui@amd.com; 
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Flora Cui <flora.cui@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

YWRkIGNvbXB1dGUvZ2Z4IGRpc3BhdGNoIGhhbmcgdGVzdCBmb3IgZ2Z4OQoKU2lnbmVkLW9mZi1i
eTogRmxvcmEgQ3VpIDxmbG9yYS5jdWlAYW1kLmNvbT4KLS0tCiB0ZXN0cy9hbWRncHUvYW1kZ3B1
X3Rlc3QuYyAgICB8IDEyICsrKysrKysKIHRlc3RzL2FtZGdwdS9hbWRncHVfdGVzdC5oICAgIHwg
IDEgKwogdGVzdHMvYW1kZ3B1L2Jhc2ljX3Rlc3RzLmMgICAgfCA2NyArKysrKysrKysrKysrKysr
KysrKysrKysrKysrLS0tLS0tLQogdGVzdHMvYW1kZ3B1L2RlYWRsb2NrX3Rlc3RzLmMgfCAxNCAr
KysrKysrKwogNCBmaWxlcyBjaGFuZ2VkLCA4MSBpbnNlcnRpb25zKCspLCAxMyBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS90ZXN0cy9hbWRncHUvYW1kZ3B1X3Rlc3QuYyBiL3Rlc3RzL2FtZGdw
dS9hbWRncHVfdGVzdC5jCmluZGV4IDk0YmMzMDU2Li4zYWM5ZDhkMiAxMDA2NDQKLS0tIGEvdGVz
dHMvYW1kZ3B1L2FtZGdwdV90ZXN0LmMKKysrIGIvdGVzdHMvYW1kZ3B1L2FtZGdwdV90ZXN0LmMK
QEAgLTQ2MCw2ICs0NjAsMTggQEAgc3RhdGljIHZvaWQgYW1kZ3B1X2Rpc2FibGVfc3VpdGVzKCkK
IAkJCSJpbGxlZ2FsIG1lbSBhY2Nlc3MgdGVzdCAoc2V0IGFtZGdwdS52bV9mYXVsdF9zdG9wPTIp
IiwgQ1VfRkFMU0UpKQogCQlmcHJpbnRmKHN0ZGVyciwgInRlc3QgZGVhY3RpdmF0aW9uIGZhaWxl
ZCAtICVzXG4iLCBDVV9nZXRfZXJyb3JfbXNnKCkpOwogCisJLyogVGhpcyB0ZXN0IHdhcyByYW4g
b24gR0ZYOSBvbmx5ICovCisJLy9pZiAoZmFtaWx5X2lkIDwgQU1ER1BVX0ZBTUlMWV9BSSB8fCBm
YW1pbHlfaWQgPiBBTURHUFVfRkFNSUxZX1JWKQorCQlpZiAoYW1kZ3B1X3NldF90ZXN0X2FjdGl2
ZShERUFETE9DS19URVNUU19TVFIsCisJCQkJImdmeCByaW5nIGJhZCBkaXNwYXRjaCB0ZXN0IChz
ZXQgYW1kZ3B1LmxvY2t1cF90aW1lb3V0PTUwKSIsIENVX0ZBTFNFKSkKKwkJCWZwcmludGYoc3Rk
ZXJyLCAidGVzdCBkZWFjdGl2YXRpb24gZmFpbGVkIC0gJXNcbiIsIENVX2dldF9lcnJvcl9tc2co
KSk7CisKKwkvKiBUaGlzIHRlc3Qgd2FzIHJhbiBvbiBHRlg5IG9ubHkgKi8KKwkvL2lmIChmYW1p
bHlfaWQgPCBBTURHUFVfRkFNSUxZX0FJIHx8IGZhbWlseV9pZCA+IEFNREdQVV9GQU1JTFlfUlYp
CisJCWlmIChhbWRncHVfc2V0X3Rlc3RfYWN0aXZlKERFQURMT0NLX1RFU1RTX1NUUiwKKwkJCQki
Y29tcHV0ZSByaW5nIGJhZCBkaXNwYXRjaCB0ZXN0IChzZXQgYW1kZ3B1LmxvY2t1cF90aW1lb3V0
PTUwKSIsIENVX0ZBTFNFKSkKKwkJCWZwcmludGYoc3RkZXJyLCAidGVzdCBkZWFjdGl2YXRpb24g
ZmFpbGVkIC0gJXNcbiIsIENVX2dldF9lcnJvcl9tc2coKSk7CisKIAlpZiAoYW1kZ3B1X3NldF90
ZXN0X2FjdGl2ZShCT19URVNUU19TVFIsICJNZXRhZGF0YSIsIENVX0ZBTFNFKSkKIAkJZnByaW50
ZihzdGRlcnIsICJ0ZXN0IGRlYWN0aXZhdGlvbiBmYWlsZWQgLSAlc1xuIiwgQ1VfZ2V0X2Vycm9y
X21zZygpKTsKIApkaWZmIC0tZ2l0IGEvdGVzdHMvYW1kZ3B1L2FtZGdwdV90ZXN0LmggYi90ZXN0
cy9hbWRncHUvYW1kZ3B1X3Rlc3QuaAppbmRleCAwY2I2ZWU5OC4uMmIwMWJmNDEgMTAwNjQ0Ci0t
LSBhL3Rlc3RzL2FtZGdwdS9hbWRncHVfdGVzdC5oCisrKyBiL3Rlc3RzL2FtZGdwdS9hbWRncHVf
dGVzdC5oCkBAIC0yNDEsNiArMjQxLDcgQEAgQ1VfQk9PTCBzdWl0ZV9zeW5jb2JqX3RpbWVsaW5l
X3Rlc3RzX2VuYWJsZSh2b2lkKTsKICAqLwogZXh0ZXJuIENVX1Rlc3RJbmZvIHN5bmNvYmpfdGlt
ZWxpbmVfdGVzdHNbXTsKIAordm9pZCBhbWRncHVfZGlzcGF0Y2hfaGFuZ19oZWxwZXIoYW1kZ3B1
X2RldmljZV9oYW5kbGUgZGV2aWNlX2hhbmRsZSwgdWludDMyX3QgaXBfdHlwZSk7CiAKIC8qKgog
ICogSGVscGVyIGZ1bmN0aW9ucwpkaWZmIC0tZ2l0IGEvdGVzdHMvYW1kZ3B1L2Jhc2ljX3Rlc3Rz
LmMgYi90ZXN0cy9hbWRncHUvYmFzaWNfdGVzdHMuYwppbmRleCBhNTdkY2JiNC4uNzFjOTIyMGQg
MTAwNjQ0Ci0tLSBhL3Rlc3RzL2FtZGdwdS9iYXNpY190ZXN0cy5jCisrKyBiL3Rlc3RzL2FtZGdw
dS9iYXNpY190ZXN0cy5jCkBAIC0zMTEsNyArMzExLDggQEAgc3RhdGljICB1aW50MzJfdCBzaGFk
ZXJfYmluW10gPSB7CiAKIGVudW0gY3NfdHlwZSB7CiAJQ1NfQlVGRkVSQ0xFQVIsCi0JQ1NfQlVG
RkVSQ09QWQorCUNTX0JVRkZFUkNPUFksCisJQ1NfSEFORwogfTsKIAogc3RhdGljIGNvbnN0IHVp
bnQzMl90IGJ1ZmZlcmNsZWFyX2NzX3NoYWRlcl9nZng5W10gPSB7CkBAIC00NzMsNiArNDc0LDE0
IEBAIHN0YXRpYyBjb25zdCB1aW50MzJfdCBjYWNoZWRfY21kX2dmeDlbXSA9IHsKIAkweGMwMDI2
OTAwLCAweDJiMCwgMHgwLCAweDAsIDB4YzAwMTY5MDAsIDB4MmY4LCAweDAKIH07CiAKK3Vuc2ln
bmVkIGludCBtZW1jcHlfcHNfaGFuZ1tdID0geworICAgICAgICAweEZGRkZGRkZGLCAweEJFRkUw
QTdFLCAweEJFRkMwMzA0LCAweEMwQzIwMTAwLAorICAgICAgICAweEMwODAwMzAwLCAweEM4MDgw
MDAwLCAweEM4MEMwMTAwLCAweEM4MDkwMDAxLAorICAgICAgICAweEM4MEQwMTAxLCAweEJGOEMw
MDdGLCAweEYwODAwRjAwLCAweDAwMDEwMDAyLAorICAgICAgICAweEJFRkUwNDBDLCAweEJGOEMw
RjcwLCAweEJGODAwMDAwLCAweEJGODAwMDAwLAorICAgICAgICAweEY4MDAxODBGLCAweDAzMDIw
MTAwLCAweEJGODEwMDAwCit9OworCiBpbnQgYW1kZ3B1X2JvX2FsbG9jX2FuZF9tYXBfcmF3KGFt
ZGdwdV9kZXZpY2VfaGFuZGxlIGRldiwgdW5zaWduZWQgc2l6ZSwKIAkJCXVuc2lnbmVkIGFsaWdu
bWVudCwgdW5zaWduZWQgaGVhcCwgdWludDY0X3QgYWxsb2NfZmxhZ3MsCiAJCQl1aW50NjRfdCBt
YXBwaW5nX2ZsYWdzLCBhbWRncHVfYm9faGFuZGxlICpibywgdm9pZCAqKmNwdSwKQEAgLTIxODks
NiArMjE5OCwxMCBAQCBzdGF0aWMgaW50IGFtZGdwdV9kaXNwYXRjaF9sb2FkX2NzX3NoYWRlcih1
aW50OF90ICpwdHIsCiAJCQlzaGFkZXIgPSBidWZmZXJjb3B5X2NzX3NoYWRlcl9nZng5OwogCQkJ
c2hhZGVyX3NpemUgPSBzaXplb2YoYnVmZmVyY29weV9jc19zaGFkZXJfZ2Z4OSk7CiAJCQlicmVh
azsKKwkJY2FzZSBDU19IQU5HOgorCQkJc2hhZGVyID0gbWVtY3B5X3BzX2hhbmc7CisJCQlzaGFk
ZXJfc2l6ZSA9IHNpemVvZihtZW1jcHlfcHNfaGFuZyk7CisJCQlicmVhazsKIAkJZGVmYXVsdDoK
IAkJCXJldHVybiAtMTsKIAkJCWJyZWFrOwpAQCAtMjQwOSw3ICsyNDIyLDggQEAgc3RhdGljIHZv
aWQgYW1kZ3B1X21lbXNldF9kaXNwYXRjaF90ZXN0KGFtZGdwdV9kZXZpY2VfaGFuZGxlIGRldmlj
ZV9oYW5kbGUsCiAKIHN0YXRpYyB2b2lkIGFtZGdwdV9tZW1jcHlfZGlzcGF0Y2hfdGVzdChhbWRn
cHVfZGV2aWNlX2hhbmRsZSBkZXZpY2VfaGFuZGxlLAogCQkJCQl1aW50MzJfdCBpcF90eXBlLAot
CQkJCQl1aW50MzJfdCByaW5nKQorCQkJCQl1aW50MzJfdCByaW5nLAorCQkJCQlpbnQgaGFuZykK
IHsKIAlhbWRncHVfY29udGV4dF9oYW5kbGUgY29udGV4dF9oYW5kbGU7CiAJYW1kZ3B1X2JvX2hh
bmRsZSBib19zcmMsIGJvX2RzdCwgYm9fc2hhZGVyLCBib19jbWQsIHJlc291cmNlc1s0XTsKQEAg
LTI0MjUsNyArMjQzOSw4IEBAIHN0YXRpYyB2b2lkIGFtZGdwdV9tZW1jcHlfZGlzcGF0Y2hfdGVz
dChhbWRncHVfZGV2aWNlX2hhbmRsZSBkZXZpY2VfaGFuZGxlLAogCWludCBib19jbWRfc2l6ZSA9
IDQwOTY7CiAJc3RydWN0IGFtZGdwdV9jc19yZXF1ZXN0IGlic19yZXF1ZXN0ID0gezB9OwogCXN0
cnVjdCBhbWRncHVfY3NfaWJfaW5mbyBpYl9pbmZvPSB7MH07Ci0JdWludDMyX3QgZXhwaXJlZDsK
Kwl1aW50MzJfdCBleHBpcmVkLCBoYW5nX3N0YXRlLCBoYW5nczsKKwllbnVtIGNzX3R5cGUgY3Nf
dHlwZTsKIAlhbWRncHVfYm9fbGlzdF9oYW5kbGUgYm9fbGlzdDsKIAlzdHJ1Y3QgYW1kZ3B1X2Nz
X2ZlbmNlIGZlbmNlX3N0YXR1cyA9IHswfTsKIApAQCAtMjQ0Niw3ICsyNDYxLDggQEAgc3RhdGlj
IHZvaWQgYW1kZ3B1X21lbWNweV9kaXNwYXRjaF90ZXN0KGFtZGdwdV9kZXZpY2VfaGFuZGxlIGRl
dmljZV9oYW5kbGUsCiAJQ1VfQVNTRVJUX0VRVUFMKHIsIDApOwogCW1lbXNldChwdHJfc2hhZGVy
LCAwLCBib19zaGFkZXJfc2l6ZSk7CiAKLQlyID0gYW1kZ3B1X2Rpc3BhdGNoX2xvYWRfY3Nfc2hh
ZGVyKHB0cl9zaGFkZXIsIENTX0JVRkZFUkNPUFkgKTsKKwljc190eXBlID0gaGFuZyA/IENTX0hB
TkcgOiBDU19CVUZGRVJDT1BZOworCXIgPSBhbWRncHVfZGlzcGF0Y2hfbG9hZF9jc19zaGFkZXIo
cHRyX3NoYWRlciwgY3NfdHlwZSk7CiAJQ1VfQVNTRVJUX0VRVUFMKHIsIDApOwogCiAJciA9IGFt
ZGdwdV9ib19hbGxvY19hbmRfbWFwKGRldmljZV9oYW5kbGUsIGJvX2RzdF9zaXplLCA0MDk2LApA
QCAtMjUzMiwxNCArMjU0OCwyMSBAQCBzdGF0aWMgdm9pZCBhbWRncHVfbWVtY3B5X2Rpc3BhdGNo
X3Rlc3QoYW1kZ3B1X2RldmljZV9oYW5kbGUgZGV2aWNlX2hhbmRsZSwKIAlyID0gYW1kZ3B1X2Nz
X3F1ZXJ5X2ZlbmNlX3N0YXR1cygmZmVuY2Vfc3RhdHVzLAogCQkJCQkgQU1ER1BVX1RJTUVPVVRf
SU5GSU5JVEUsCiAJCQkJCSAwLCAmZXhwaXJlZCk7Ci0JQ1VfQVNTRVJUX0VRVUFMKHIsIDApOwot
CUNVX0FTU0VSVF9FUVVBTChleHBpcmVkLCB0cnVlKTsKIAotCS8qIHZlcmlmeSBpZiBtZW1jcHkg
dGVzdCByZXN1bHQgbWVldHMgd2l0aCBleHBlY3RlZCAqLwotCWkgPSAwOwotCXdoaWxlKGkgPCBi
b19kc3Rfc2l6ZSkgewotCQlDVV9BU1NFUlRfRVFVQUwocHRyX2RzdFtpXSwgcHRyX3NyY1tpXSk7
Ci0JCWkrKzsKKwlpZiAoIWhhbmcpIHsKKwkJQ1VfQVNTRVJUX0VRVUFMKHIsIDApOworCQlDVV9B
U1NFUlRfRVFVQUwoZXhwaXJlZCwgdHJ1ZSk7CisKKwkJLyogdmVyaWZ5IGlmIG1lbWNweSB0ZXN0
IHJlc3VsdCBtZWV0cyB3aXRoIGV4cGVjdGVkICovCisJCWkgPSAwOworCQl3aGlsZShpIDwgYm9f
ZHN0X3NpemUpIHsKKwkJCUNVX0FTU0VSVF9FUVVBTChwdHJfZHN0W2ldLCBwdHJfc3JjW2ldKTsK
KwkJCWkrKzsKKwkJfQorCX0gZWxzZSB7CisJCXIgPSBhbWRncHVfY3NfcXVlcnlfcmVzZXRfc3Rh
dGUoY29udGV4dF9oYW5kbGUsICZoYW5nX3N0YXRlLCAmaGFuZ3MpOworCQlDVV9BU1NFUlRfRVFV
QUwociwgMCk7CisJCUNVX0FTU0VSVF9FUVVBTChoYW5nX3N0YXRlLCBBTURHUFVfQ1RYX1VOS05P
V05fUkVTRVQpOwogCX0KIAogCXIgPSBhbWRncHVfYm9fbGlzdF9kZXN0cm95KGJvX2xpc3QpOwpA
QCAtMjU3Myw3ICsyNTk2LDcgQEAgc3RhdGljIHZvaWQgYW1kZ3B1X2NvbXB1dGVfZGlzcGF0Y2hf
dGVzdCh2b2lkKQogCiAJZm9yIChyaW5nX2lkID0gMDsgKDEgPDwgcmluZ19pZCkgJiBpbmZvLmF2
YWlsYWJsZV9yaW5nczsgcmluZ19pZCsrKSB7CiAJCWFtZGdwdV9tZW1zZXRfZGlzcGF0Y2hfdGVz
dChkZXZpY2VfaGFuZGxlLCBBTURHUFVfSFdfSVBfQ09NUFVURSwgcmluZ19pZCk7Ci0JCWFtZGdw
dV9tZW1jcHlfZGlzcGF0Y2hfdGVzdChkZXZpY2VfaGFuZGxlLCBBTURHUFVfSFdfSVBfQ09NUFVU
RSwgcmluZ19pZCk7CisJCWFtZGdwdV9tZW1jcHlfZGlzcGF0Y2hfdGVzdChkZXZpY2VfaGFuZGxl
LCBBTURHUFVfSFdfSVBfQ09NUFVURSwgcmluZ19pZCwgMCk7CiAJfQogfQogCkBAIC0yNTkwLDcg
KzI2MTMsMjUgQEAgc3RhdGljIHZvaWQgYW1kZ3B1X2dmeF9kaXNwYXRjaF90ZXN0KHZvaWQpCiAK
IAlmb3IgKHJpbmdfaWQgPSAwOyAoMSA8PCByaW5nX2lkKSAmIGluZm8uYXZhaWxhYmxlX3Jpbmdz
OyByaW5nX2lkKyspIHsKIAkJYW1kZ3B1X21lbXNldF9kaXNwYXRjaF90ZXN0KGRldmljZV9oYW5k
bGUsIEFNREdQVV9IV19JUF9HRlgsIHJpbmdfaWQpOwotCQlhbWRncHVfbWVtY3B5X2Rpc3BhdGNo
X3Rlc3QoZGV2aWNlX2hhbmRsZSwgQU1ER1BVX0hXX0lQX0dGWCwgcmluZ19pZCk7CisJCWFtZGdw
dV9tZW1jcHlfZGlzcGF0Y2hfdGVzdChkZXZpY2VfaGFuZGxlLCBBTURHUFVfSFdfSVBfR0ZYLCBy
aW5nX2lkLCAwKTsKKwl9Cit9CisKK3ZvaWQgYW1kZ3B1X2Rpc3BhdGNoX2hhbmdfaGVscGVyKGFt
ZGdwdV9kZXZpY2VfaGFuZGxlIGRldmljZV9oYW5kbGUsIHVpbnQzMl90IGlwX3R5cGUpCit7CisJ
aW50IHI7CisJc3RydWN0IGRybV9hbWRncHVfaW5mb19od19pcCBpbmZvOworCXVpbnQzMl90IHJp
bmdfaWQ7CisKKwlyID0gYW1kZ3B1X3F1ZXJ5X2h3X2lwX2luZm8oZGV2aWNlX2hhbmRsZSwgaXBf
dHlwZSwgMCwgJmluZm8pOworCUNVX0FTU0VSVF9FUVVBTChyLCAwKTsKKwlpZiAoIWluZm8uYXZh
aWxhYmxlX3JpbmdzKQorCQlwcmludGYoIlNLSVAgLi4uIGFzIHRoZXJlJ3Mgbm8gcmluZyBmb3Ig
aXAgJWRcbiIsIGlwX3R5cGUpOworCisJZm9yIChyaW5nX2lkID0gMDsgKDEgPDwgcmluZ19pZCkg
JiBpbmZvLmF2YWlsYWJsZV9yaW5nczsgcmluZ19pZCsrKSB7CisJCWFtZGdwdV9tZW1jcHlfZGlz
cGF0Y2hfdGVzdChkZXZpY2VfaGFuZGxlLCBpcF90eXBlLCByaW5nX2lkLCAwKTsKKwkJYW1kZ3B1
X21lbWNweV9kaXNwYXRjaF90ZXN0KGRldmljZV9oYW5kbGUsIGlwX3R5cGUsIHJpbmdfaWQsIDEp
OworCQlhbWRncHVfbWVtY3B5X2Rpc3BhdGNoX3Rlc3QoZGV2aWNlX2hhbmRsZSwgaXBfdHlwZSwg
cmluZ19pZCwgMCk7CiAJfQogfQogCmRpZmYgLS1naXQgYS90ZXN0cy9hbWRncHUvZGVhZGxvY2tf
dGVzdHMuYyBiL3Rlc3RzL2FtZGdwdS9kZWFkbG9ja190ZXN0cy5jCmluZGV4IDdkMDI4ODI5Li42
MTM0MmQxYSAxMDA2NDQKLS0tIGEvdGVzdHMvYW1kZ3B1L2RlYWRsb2NrX3Rlc3RzLmMKKysrIGIv
dGVzdHMvYW1kZ3B1L2RlYWRsb2NrX3Rlc3RzLmMKQEAgLTExNCw2ICsxMTQsOCBAQCBzdGF0aWMg
dm9pZCBhbWRncHVfZGVhZGxvY2tfY29tcHV0ZSh2b2lkKTsKIHN0YXRpYyB2b2lkIGFtZGdwdV9p
bGxlZ2FsX3JlZ19hY2Nlc3MoKTsKIHN0YXRpYyB2b2lkIGFtZGdwdV9pbGxlZ2FsX21lbV9hY2Nl
c3MoKTsKIHN0YXRpYyB2b2lkIGFtZGdwdV9kZWFkbG9ja19zZG1hKHZvaWQpOworc3RhdGljIHZv
aWQgYW1kZ3B1X2Rpc3BhdGNoX2hhbmdfZ2Z4KHZvaWQpOworc3RhdGljIHZvaWQgYW1kZ3B1X2Rp
c3BhdGNoX2hhbmdfY29tcHV0ZSh2b2lkKTsKIAogQ1VfQk9PTCBzdWl0ZV9kZWFkbG9ja190ZXN0
c19lbmFibGUodm9pZCkKIHsKQEAgLTE4OCw2ICsxOTAsOCBAQCBDVV9UZXN0SW5mbyBkZWFkbG9j
a190ZXN0c1tdID0gewogCXsgInNkbWEgcmluZyBibG9jayB0ZXN0IChzZXQgYW1kZ3B1LmxvY2t1
cF90aW1lb3V0PTUwKSIsIGFtZGdwdV9kZWFkbG9ja19zZG1hIH0sCiAJeyAiaWxsZWdhbCByZWcg
YWNjZXNzIHRlc3QiLCBhbWRncHVfaWxsZWdhbF9yZWdfYWNjZXNzIH0sCiAJeyAiaWxsZWdhbCBt
ZW0gYWNjZXNzIHRlc3QgKHNldCBhbWRncHUudm1fZmF1bHRfc3RvcD0yKSIsIGFtZGdwdV9pbGxl
Z2FsX21lbV9hY2Nlc3MgfSwKKwl7ICJnZnggcmluZyBiYWQgZGlzcGF0Y2ggdGVzdCAoc2V0IGFt
ZGdwdS5sb2NrdXBfdGltZW91dD01MCkiLCBhbWRncHVfZGlzcGF0Y2hfaGFuZ19nZnggfSwKKwl7
ICJjb21wdXRlIHJpbmcgYmFkIGRpc3BhdGNoIHRlc3QgKHNldCBhbWRncHUubG9ja3VwX3RpbWVv
dXQ9NTAsNTApIiwgYW1kZ3B1X2Rpc3BhdGNoX2hhbmdfY29tcHV0ZSB9LAogCUNVX1RFU1RfSU5G
T19OVUxMLAogfTsKIApAQCAtNDg4LDMgKzQ5MiwxMyBAQCBzdGF0aWMgdm9pZCBhbWRncHVfaWxs
ZWdhbF9tZW1fYWNjZXNzKCkKIHsKIAliYWRfYWNjZXNzX2hlbHBlcigwKTsKIH0KKworc3RhdGlj
IHZvaWQgYW1kZ3B1X2Rpc3BhdGNoX2hhbmdfZ2Z4KHZvaWQpCit7CisJYW1kZ3B1X2Rpc3BhdGNo
X2hhbmdfaGVscGVyKGRldmljZV9oYW5kbGUsIEFNREdQVV9IV19JUF9HRlgpOworfQorCitzdGF0
aWMgdm9pZCBhbWRncHVfZGlzcGF0Y2hfaGFuZ19jb21wdXRlKHZvaWQpCit7CisJYW1kZ3B1X2Rp
c3BhdGNoX2hhbmdfaGVscGVyKGRldmljZV9oYW5kbGUsIEFNREdQVV9IV19JUF9DT01QVVRFKTsK
K30KLS0gCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
