Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6F6861103AD
	for <lists+dri-devel@lfdr.de>; Tue,  3 Dec 2019 18:37:46 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 210856EA50;
	Tue,  3 Dec 2019 17:37:43 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yb1-xb42.google.com (mail-yb1-xb42.google.com
 [IPv6:2607:f8b0:4864:20::b42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 98D756EA50
 for <dri-devel@lists.freedesktop.org>; Tue,  3 Dec 2019 17:37:41 +0000 (UTC)
Received: by mail-yb1-xb42.google.com with SMTP id q7so1862750ybk.4
 for <dri-devel@lists.freedesktop.org>; Tue, 03 Dec 2019 09:37:41 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=DQr43OWwM0zkaVjx1CwvWsP5lq5M+BXcr+mK36r5o+8=;
 b=uimqumi/HFH9R2DOubrkvHRjPdVR3V0WEbIRi+ghqQfiX5uaFOW/iLS5B/DR8AsRQP
 soloSGpQYwzuWIEIX7vedwiw3EYPF5FsL35VyAIMWaF7tAg2UYyGgkDWeRH38QLRle+K
 b0wm0UhX+P8FxPs/pZzrOUp8A6dX65FfVLobs9DCgBq6gMlrKUKmiySiyLn0sJ9N/GG6
 +HyU9+tm5PXR0T0xMFY2c8d8rECDTw8Gs9ibc4D4XnwrWRLUL66h1IuOUHMFSqBPq3/M
 BZr0XVe3F073DUV1mglekHN0HWrbp9Dajx3AwEG3yq0yeEVp6htSofGN2LGswZzF7sPx
 Qqjw==
X-Gm-Message-State: APjAAAVBGwajrHfHyaLXp79fQlZkug3AMAMBFjvaR8a97Wk4bRwlMlLN
 MYd8MXQJ076c7wtoc71Gj85vR8Py7v0Y4g==
X-Google-Smtp-Source: APXvYqzVw5f0JcPRhP2RucAj/uzMfNGC1FuRkgZBkGzkHEUxLcClmgFXDzDYUpOQTQE/fVZ/EeKRMg==
X-Received: by 2002:a25:5903:: with SMTP id n3mr5413188ybb.466.1575394660518; 
 Tue, 03 Dec 2019 09:37:40 -0800 (PST)
Received: from rosewood.cam.corp.google.com
 ([2620:0:1013:11:89c6:2139:5435:371d])
 by smtp.gmail.com with ESMTPSA id g190sm1729426ywf.41.2019.12.03.09.37.39
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 03 Dec 2019 09:37:40 -0800 (PST)
From: Sean Paul <sean@poorly.run>
To: dri-devel@lists.freedesktop.org, intel-gfx@lists.freedesktop.org,
 ramalingm.c@intel.com
Subject: [PATCH 10/11] drm/i915: Expose HDCP shim functions from dp for use by
 dp_mst
Date: Tue,  3 Dec 2019 12:36:33 -0500
Message-Id: <20191203173638.94919-11-sean@poorly.run>
X-Mailer: git-send-email 2.24.0.393.g34dc348eaf-goog
In-Reply-To: <20191203173638.94919-1-sean@poorly.run>
References: <20191203173638.94919-1-sean@poorly.run>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=poorly.run; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=DQr43OWwM0zkaVjx1CwvWsP5lq5M+BXcr+mK36r5o+8=;
 b=UTd06HGFOu6Cou21yEQ6U+Vc0AL8giEbLpS6mmZsRRezw1gz76mzjgbwhfMgLEjzoZ
 nJA9gSOuS+wyuRhJCj4fXbP10oYdC8+kZGxXgu7AIO8Agqi0azg4qt266wQiTPOr6S/W
 JPKzsBPdauq2AxoggXXxaIPkDTAhr7ifMENwgdCInTknOvv9AuEs1Ct6fwc8CCY69fWX
 Cj4ItSnmNXade5oayJTXAUp/K7mcVG/JvBkrU6NnuDPeX2Ax8cYKv5D0jqa7iG8hf+nW
 jANmI0tTqzefPjjrIeeeAW2BoBxBNcfVEbPb1KU/nq4XS68rDPMJpwYLr3V3xBfSCpQ6
 aFmg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, Sean Paul <seanpaul@chromium.org>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogU2VhbiBQYXVsIDxzZWFucGF1bEBjaHJvbWl1bS5vcmc+CgpUaGVzZSBmdW5jdGlvbnMg
YXJlIGFsbCB0aGUgc2FtZSBmb3IgZHAgYW5kIGRwX21zdCwgc28gZXhwb3NlIHRoZW0gZm9yCnVz
ZSBieSB0aGUgZHBfbXN0IGhkY3AgaW1wbGVtZW50YXRpb24uCgpTaWduZWQtb2ZmLWJ5OiBTZWFu
IFBhdWwgPHNlYW5wYXVsQGNocm9taXVtLm9yZz4KLS0tCiAuLi4vZHJtL2k5MTUvZGlzcGxheS9p
bnRlbF9kaXNwbGF5X3R5cGVzLmggICAgfCAyMiArKysrKysrKysrKysrKysrKysrCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2RwLmMgICAgICAgfCAxNCArKy0tLS0tLS0tLS0K
IDIgZmlsZXMgY2hhbmdlZCwgMjQgaW5zZXJ0aW9ucygrKSwgMTIgZGVsZXRpb25zKC0pCgpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVz
LmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2Rpc3BsYXlfdHlwZXMuaApp
bmRleCA0OTI0Nzg0ZjNmNGMuLjZmYWZhOTJkY2Y3NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kaXNwbGF5X3R5cGVzLmgKQEAgLTE1NzMsNCArMTU3Mywy
NiBAQCBzdGF0aWMgaW5saW5lIHUzMiBpbnRlbF9wbGFuZV9nZ3R0X29mZnNldChjb25zdCBzdHJ1
Y3QgaW50ZWxfcGxhbmVfc3RhdGUgKnN0YXRlKQogCXJldHVybiBpOTE1X2dndHRfb2Zmc2V0KHN0
YXRlLT52bWEpOwogfQogCitpbnQgaW50ZWxfZHBfaGRjcF93cml0ZV9hbl9ha3N2KHN0cnVjdCBp
bnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0LAorCQkJCXU4ICphbik7CitpbnQgaW50
ZWxfZHBfaGRjcF9yZWFkX2Jrc3Yoc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxfZGln
X3BvcnQsCisJCQkgICAgdTggKmJrc3YpOworaW50IGludGVsX2RwX2hkY3BfcmVhZF9ic3RhdHVz
KHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0LAorCQkJCSAgICAgIHU4
ICpic3RhdHVzKTsKK2ludCBpbnRlbF9kcF9oZGNwX3JlYWRfYmNhcHMoc3RydWN0IGludGVsX2Rp
Z2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQsCisJCQkgICAgIHU4ICpiY2Fwcyk7CitpbnQgaW50
ZWxfZHBfaGRjcF9yZXBlYXRlcl9wcmVzZW50KHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmlu
dGVsX2RpZ19wb3J0LAorCQkJCSAgIGJvb2wgKnJlcGVhdGVyX3ByZXNlbnQpOworaW50IGludGVs
X2RwX2hkY3BfcmVhZF9yaV9wcmltZShzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICppbnRlbF9k
aWdfcG9ydCwKKwkJCQl1OCAqcmlfcHJpbWUpOworaW50IGludGVsX2RwX2hkY3BfcmVhZF9rc3Zf
cmVhZHkoc3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQsCisJCQkJIGJv
b2wgKmtzdl9yZWFkeSk7CitpbnQgaW50ZWxfZHBfaGRjcF9yZWFkX2tzdl9maWZvKHN0cnVjdCBp
bnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0LAorCQkJCWludCBudW1fZG93bnN0cmVh
bSwgdTggKmtzdl9maWZvKTsKK2ludCBpbnRlbF9kcF9oZGNwX3JlYWRfdl9wcmltZV9wYXJ0KHN0
cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0LAorCQkJCSAgICBpbnQgaSwg
dTMyICpwYXJ0KTsKK2Jvb2wgaW50ZWxfZHBfaGRjcF9jaGVja19saW5rKHN0cnVjdCBpbnRlbF9k
aWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0KTsKK2ludCBpbnRlbF9kcF9oZGNwX2NhcGFibGUo
c3RydWN0IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQsCisJCQkgIGJvb2wgKmhk
Y3BfY2FwYWJsZSk7CisKICNlbmRpZiAvKiAgX19JTlRFTF9ESVNQTEFZX1RZUEVTX0hfXyAqLwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCmluZGV4IGZjNWE3ZGM2YWI5Yi4u
NjAwZGU3NjA2NTk2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2RwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxheS9pbnRlbF9kcC5jCkBA
IC01ODcxLDcgKzU4NzEsNiBAQCBzdGF0aWMgdm9pZCBpbnRlbF9kcF9oZGNwX3dhaXRfZm9yX2Nw
X2lycShzdHJ1Y3QgaW50ZWxfaGRjcCAqaGRjcCwgaW50IHRpbWVvdXQpCiAJCURSTV9ERUJVR19L
TVMoIlRpbWVkb3V0IGF0IHdhaXRpbmcgZm9yIENQX0lSUVxuIik7CiB9CiAKLXN0YXRpYwogaW50
IGludGVsX2RwX2hkY3Bfd3JpdGVfYW5fYWtzdihzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpp
bnRlbF9kaWdfcG9ydCwKIAkJCQl1OCAqYW4pCiB7CkBAIC01OTAzLDggKzU5MDIsNyBAQCBpbnQg
aW50ZWxfZHBfaGRjcF93cml0ZV9hbl9ha3N2KHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmlu
dGVsX2RpZ19wb3J0LAogCXJldHVybiAwOwogfQogCi1zdGF0aWMgaW50IGludGVsX2RwX2hkY3Bf
cmVhZF9ia3N2KHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0LAotCQkJ
CSAgIHU4ICpia3N2KQoraW50IGludGVsX2RwX2hkY3BfcmVhZF9ia3N2KHN0cnVjdCBpbnRlbF9k
aWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0LCB1OCAqYmtzdikKIHsKIAlzc2l6ZV90IHJldDsK
IAlyZXQgPSBkcm1fZHBfZHBjZF9yZWFkKCZpbnRlbF9kaWdfcG9ydC0+ZHAuYXV4LCBEUF9BVVhf
SERDUF9CS1NWLCBia3N2LApAQCAtNTkxNiw3ICs1OTE0LDcgQEAgc3RhdGljIGludCBpbnRlbF9k
cF9oZGNwX3JlYWRfYmtzdihzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICppbnRlbF9kaWdfcG9y
dCwKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIGludCBpbnRlbF9kcF9oZGNwX3JlYWRfYnN0YXR1
cyhzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICppbnRlbF9kaWdfcG9ydCwKK2ludCBpbnRlbF9k
cF9oZGNwX3JlYWRfYnN0YXR1cyhzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICppbnRlbF9kaWdf
cG9ydCwKIAkJCQkgICAgICB1OCAqYnN0YXR1cykKIHsKIAlzc2l6ZV90IHJldDsKQEAgLTU5MzQs
NyArNTkzMiw2IEBAIHN0YXRpYyBpbnQgaW50ZWxfZHBfaGRjcF9yZWFkX2JzdGF0dXMoc3RydWN0
IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQsCiAJcmV0dXJuIDA7CiB9CiAKLXN0
YXRpYwogaW50IGludGVsX2RwX2hkY3BfcmVhZF9iY2FwcyhzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9w
b3J0ICppbnRlbF9kaWdfcG9ydCwKIAkJCSAgICAgdTggKmJjYXBzKQogewpAQCAtNTk1MCw3ICs1
OTQ3LDYgQEAgaW50IGludGVsX2RwX2hkY3BfcmVhZF9iY2FwcyhzdHJ1Y3QgaW50ZWxfZGlnaXRh
bF9wb3J0ICppbnRlbF9kaWdfcG9ydCwKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljCiBpbnQgaW50
ZWxfZHBfaGRjcF9yZXBlYXRlcl9wcmVzZW50KHN0cnVjdCBpbnRlbF9kaWdpdGFsX3BvcnQgKmlu
dGVsX2RpZ19wb3J0LAogCQkJCSAgIGJvb2wgKnJlcGVhdGVyX3ByZXNlbnQpCiB7CkBAIC01OTY1
LDcgKzU5NjEsNiBAQCBpbnQgaW50ZWxfZHBfaGRjcF9yZXBlYXRlcl9wcmVzZW50KHN0cnVjdCBp
bnRlbF9kaWdpdGFsX3BvcnQgKmludGVsX2RpZ19wb3J0LAogCXJldHVybiAwOwogfQogCi1zdGF0
aWMKIGludCBpbnRlbF9kcF9oZGNwX3JlYWRfcmlfcHJpbWUoc3RydWN0IGludGVsX2RpZ2l0YWxf
cG9ydCAqaW50ZWxfZGlnX3BvcnQsCiAJCQkJdTggKnJpX3ByaW1lKQogewpAQCAtNTk3OSw3ICs1
OTc0LDYgQEAgaW50IGludGVsX2RwX2hkY3BfcmVhZF9yaV9wcmltZShzdHJ1Y3QgaW50ZWxfZGln
aXRhbF9wb3J0ICppbnRlbF9kaWdfcG9ydCwKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljCiBpbnQg
aW50ZWxfZHBfaGRjcF9yZWFkX2tzdl9yZWFkeShzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICpp
bnRlbF9kaWdfcG9ydCwKIAkJCQkgYm9vbCAqa3N2X3JlYWR5KQogewpAQCAtNTk5NSw3ICs1OTg5
LDYgQEAgaW50IGludGVsX2RwX2hkY3BfcmVhZF9rc3ZfcmVhZHkoc3RydWN0IGludGVsX2RpZ2l0
YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQsCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYwogaW50IGlu
dGVsX2RwX2hkY3BfcmVhZF9rc3ZfZmlmbyhzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICppbnRl
bF9kaWdfcG9ydCwKIAkJCQlpbnQgbnVtX2Rvd25zdHJlYW0sIHU4ICprc3ZfZmlmbykKIHsKQEAg
LTYwMTgsNyArNjAxMSw2IEBAIGludCBpbnRlbF9kcF9oZGNwX3JlYWRfa3N2X2ZpZm8oc3RydWN0
IGludGVsX2RpZ2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQsCiAJcmV0dXJuIDA7CiB9CiAKLXN0
YXRpYwogaW50IGludGVsX2RwX2hkY3BfcmVhZF92X3ByaW1lX3BhcnQoc3RydWN0IGludGVsX2Rp
Z2l0YWxfcG9ydCAqaW50ZWxfZGlnX3BvcnQsCiAJCQkJICAgIGludCBpLCB1MzIgKnBhcnQpCiB7
CkBAIC02MDQ1LDcgKzYwMzcsNiBAQCBpbnQgaW50ZWxfZHBfaGRjcF90b2dnbGVfc2lnbmFsbGlu
ZyhzdHJ1Y3QgaW50ZWxfY29ubmVjdG9yICpjb25uZWN0b3IsCiAJcmV0dXJuIDA7CiB9CiAKLXN0
YXRpYwogYm9vbCBpbnRlbF9kcF9oZGNwX2NoZWNrX2xpbmsoc3RydWN0IGludGVsX2RpZ2l0YWxf
cG9ydCAqaW50ZWxfZGlnX3BvcnQpCiB7CiAJc3NpemVfdCByZXQ7CkBAIC02MDYxLDcgKzYwNTIs
NiBAQCBib29sIGludGVsX2RwX2hkY3BfY2hlY2tfbGluayhzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9w
b3J0ICppbnRlbF9kaWdfcG9ydCkKIAlyZXR1cm4gIShic3RhdHVzICYgKERQX0JTVEFUVVNfTElO
S19GQUlMVVJFIHwgRFBfQlNUQVRVU19SRUFVVEhfUkVRKSk7CiB9CiAKLXN0YXRpYwogaW50IGlu
dGVsX2RwX2hkY3BfY2FwYWJsZShzdHJ1Y3QgaW50ZWxfZGlnaXRhbF9wb3J0ICppbnRlbF9kaWdf
cG9ydCwKIAkJCSAgYm9vbCAqaGRjcF9jYXBhYmxlKQogewotLSAKU2VhbiBQYXVsLCBTb2Z0d2Fy
ZSBFbmdpbmVlciwgR29vZ2xlIC8gQ2hyb21pdW0gT1MKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVs
QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWls
bWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
