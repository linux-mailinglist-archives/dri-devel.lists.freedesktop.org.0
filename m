Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 45B83A83BC
	for <lists+dri-devel@lfdr.de>; Wed,  4 Sep 2019 15:28:41 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0FF1E89BF1;
	Wed,  4 Sep 2019 13:28:39 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2279E89BF1
 for <dri-devel@lists.freedesktop.org>; Wed,  4 Sep 2019 13:28:37 +0000 (UTC)
Received: from pendragon.ideasonboard.com
 (mobile-access-bceeb5-228.dhcp.inet.fi [188.238.181.228])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 6B2F3B83;
 Wed,  4 Sep 2019 15:28:24 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v3 2/2] drm/bridge: panel: Infer connector type from panel by
 default
Date: Wed,  4 Sep 2019 16:28:04 +0300
Message-Id: <20190904132804.29680-3-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190904132804.29680-1-laurent.pinchart@ideasonboard.com>
References: <20190904132804.29680-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1567603715;
 bh=RmuWL1aJV8FKP71W/nlHD364xRor/TFyfhktMXEEmg8=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=Hf1TrfHOLu9kCKy1NXc11gijNylj7RGSq73Y3c9dw8X7xEOO7QsQCSU2cxmRN0hU6
 jWu8cuZrC8EzUL1KwJBU6Hw4d8RUCTkM0sWs2BRx3BPp3Z7wqa9unlwuLFFE2+Aye+
 g8SYH7nK73iilXUMZtKTWHk7z7RyGktUAzvp5gSE=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Alexandre Belloni <alexandre.belloni@bootlin.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>,
 =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>,
 Philippe Cornu <philippe.cornu@st.com>, Paul Cercueil <paul@crapouillou.net>,
 Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>,
 Stefan Mavrodiev <stefan@olimex.com>, Vincent Abriou <vincent.abriou@st.com>,
 Ludovic Desroches <ludovic.desroches@microchip.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Jagan Teki <jagan@amarulasolutions.com>, Robert Chiras <robert.chiras@nxp.com>,
 Jonas Karlman <jonas@kwiboo.se>, Jyri Sarha <jsarha@ti.com>,
 Sean Paul <sean@poorly.run>, Jernej Skrabec <jernej.skrabec@siol.net>,
 Purism Kernel Team <kernel@puri.sm>, Boris Brezillon <bbrezillon@kernel.org>,
 Nicolas Ferre <nicolas.ferre@microchip.com>,
 Yannick Fertre <yannick.fertre@st.com>,
 Kieran Bingham <kieran.bingham+renesas@ideasonboard.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIGRybSBwYW5lbCBicmlkZ2UgY3JlYXRlcyBhIGNvbm5lY3RvciB1c2luZyBhIGNvbm5lY3Rv
ciB0eXBlCmV4cGxpY2l0bHkgcGFzc2VkIGJ5IHRoZSBkaXNwbGF5IGNvbnRyb2xsZXIgb3IgYnJp
ZGdlIGRyaXZlciB0aGF0Cmluc3RhbnRpYXRlcyB0aGUgcGFuZWwgYnJpZGdlLiBOb3cgdGhhdCBk
cm1fcGFuZWwgcmVwb3J0cyBpdHMgY29ubmVjdG9yCnR5cGUsIHdlIGNhbiB1c2UgaXQgdG8gYXZv
aWQgcGFzc2luZyBhbiBleHBsaWNpdCAoYW5kIG9mdGVuIGluY29ycmVjdCkKY29ubmVjdG9yIHR5
cGUgdG8gZHJtX3BhbmVsX2JyaWRnZV9hZGQoKSBhbmQKZGV2bV9kcm1fcGFuZWxfYnJpZGdlX2Fk
ZCgpLgoKU2V2ZXJhbCBkcml2ZXJzIHJlcG9ydCBpbmNvcnJlY3Qgb3IgdW5rbm93biBjb25uZWN0
b3IgdHlwZXMgdG8KdXNlcnNwYWNlLiBSZXBvcnRpbmcgYSBkaWZmZXJlbnQgdHlwZSBtYXkgcmVz
dWx0IGluIGEgYnJlYWthZ2UuIEZvciB0aGF0CnJlYXNvbiwgcmVuYW1lIChkZXZtXylkcm1fcGFu
ZWxfYnJpZGdlX2FkZCgpIHRvCihkZXZtXylkcm1fcGFuZWxfYnJpZGdlX2FkZF90eXBlZCgpLCBh
bmQgYWRkIG5ldwooZGV2bV8pZHJtX3BhbmVsX2JyaWRnZV9hZGQoKSBmdW5jdGlvbnMgdGhhdCB1
c2UgdGhlIHBhbmVsIGNvbm5lY3Rvcgp0eXBlLiBVcGRhdGUgYWxsIGNhbGxlcnMgb2YgKGRldm1f
KWRybV9wYW5lbF9icmlkZ2VfYWRkKCkgdG8gdGhlIF90eXBlZApmdW5jdGlvbiwgdGhleSB3aWxs
IGJlIGNvbnZlcnRlZCBvbmUgYnkgb25lIGFmdGVyIHRlc3RpbmcuCgpUaGUgcGFuZWwgZHJpdmVy
cyBoYXZlIGJlZW4gdXBkYXRlZCB3aXRoIHRoZSBmb2xsb3dpbmcgQ29jY2luZWxsZQpzZW1hbnRp
YyBwYXRjaCwgd2l0aCBtYW51YWwgaW5zcGVjdGlvbiBhbmQgZml4ZXMgdG8gaW5kZW50YXRpb24u
CgpAQApleHByZXNzaW9uIGJyaWRnZTsKZXhwcmVzc2lvbiBkZXY7CmV4cHJlc3Npb24gcGFuZWw7
CmlkZW50aWZpZXIgdHlwZTsKQEAKKAotYnJpZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9hZGQocGFu
ZWwsIHR5cGUpOworYnJpZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9hZGRfdHlwZWQocGFuZWwsIHR5
cGUpOwp8Ci1icmlkZ2UgPSBkZXZtX2RybV9wYW5lbF9icmlkZ2VfYWRkKGRldiwgcGFuZWwsIHR5
cGUpOworYnJpZGdlID0gZGV2bV9kcm1fcGFuZWxfYnJpZGdlX2FkZF90eXBlZChkZXYsIHBhbmVs
LCB0eXBlKTsKKQoKU2lnbmVkLW9mZi1ieTogTGF1cmVudCBQaW5jaGFydCA8bGF1cmVudC5waW5j
aGFydEBpZGVhc29uYm9hcmQuY29tPgpSZXZpZXdlZC1ieTogQm9yaXMgQnJlemlsbG9uIDxib3Jp
cy5icmV6aWxsb25AY29sbGFib3JhLmNvbT4KLS0tCkNoYW5nZXMgc2luY2UgdjI6CgotIEZpeCBh
IHR5cG8gaW4gdGhlIGNvbW1pdCBtZXNzYWdlCgpDaGFuZ2VzIHNpbmNlIHYxOgoKLSBBZGQgYW5k
IHVzZSBfdHlwZWQgdmFyaWFudHMKLS0tCiAuLi4vZ3B1L2RybS9hdG1lbC1obGNkYy9hdG1lbF9o
bGNkY19vdXRwdXQuYyAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9jZG5zLWRzaS5j
ICAgICAgICAgICAgIHwgIDMgKy0KIGRyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbHZkcy1lbmNvZGVy
LmMgICAgICAgICB8ICAzICstCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3BhbmVsLmMgICAgICAg
ICAgICAgICAgfCA2OSArKysrKysrKysrKysrKysrLS0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdl
L3N5bm9wc3lzL2R3LW1pcGktZHNpLmMgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL2luZ2VuaWMv
aW5nZW5pYy1kcm0uYyAgICAgICAgIHwgIDQgKy0KIGRyaXZlcnMvZ3B1L2RybS9tY2RlL21jZGVf
ZHNpLmMgICAgICAgICAgICAgICB8ICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vcGwxMTEvcGwxMTFf
ZHJ2LmMgICAgICAgICAgICAgfCAgNCArLQogZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9k
dV9lbmNvZGVyLmMgICAgIHwgIDQgKy0KIGRyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9yb2NrY2hp
cF9yZ2IuYyAgICAgICB8ICAzICstCiBkcml2ZXJzL2dwdS9kcm0vc3RtL2x0ZGMuYyAgICAgICAg
ICAgICAgICAgICAgfCAgNCArLQogZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfZXh0ZXJu
YWwuYyAgICAgIHwgIDQgKy0KIGRyaXZlcnMvZ3B1L2RybS90dmUyMDAvdHZlMjAwX2Rydi5jICAg
ICAgICAgICB8ICA0ICstCiBkcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9kcGkuYyAgICAgICAgICAg
ICAgICAgfCAgMyArLQogZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfZHNpLmMgICAgICAgICAgICAg
ICAgIHwgIDQgKy0KIGluY2x1ZGUvZHJtL2RybV9icmlkZ2UuaCAgICAgICAgICAgICAgICAgICAg
ICB8IDExICstLQogMTYgZmlsZXMgY2hhbmdlZCwgOTMgaW5zZXJ0aW9ucygrKSwgMzcgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2F0bWVsLWhsY2RjL2F0bWVsX2hs
Y2RjX291dHB1dC5jIGIvZHJpdmVycy9ncHUvZHJtL2F0bWVsLWhsY2RjL2F0bWVsX2hsY2RjX291
dHB1dC5jCmluZGV4IDM3NWZhODRjNTQ4Yi4uMTIxYjYyNjgyZDgwIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYXRtZWwtaGxjZGMvYXRtZWxfaGxjZGNfb3V0cHV0LmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2F0bWVsLWhsY2RjL2F0bWVsX2hsY2RjX291dHB1dC5jCkBAIC0xMDcsNyArMTA3
LDggQEAgc3RhdGljIGludCBhdG1lbF9obGNkY19hdHRhY2hfZW5kcG9pbnQoc3RydWN0IGRybV9k
ZXZpY2UgKmRldiwgaW50IGVuZHBvaW50KQogCW91dHB1dC0+ZW5jb2Rlci5wb3NzaWJsZV9jcnRj
cyA9IDB4MTsKIAogCWlmIChwYW5lbCkgewotCQlicmlkZ2UgPSBkcm1fcGFuZWxfYnJpZGdlX2Fk
ZChwYW5lbCwgRFJNX01PREVfQ09OTkVDVE9SX1Vua25vd24pOworCQlicmlkZ2UgPSBkcm1fcGFu
ZWxfYnJpZGdlX2FkZF90eXBlZChwYW5lbCwKKwkJCQkJCSAgICBEUk1fTU9ERV9DT05ORUNUT1Jf
VW5rbm93bik7CiAJCWlmIChJU19FUlIoYnJpZGdlKSkKIAkJCXJldHVybiBQVFJfRVJSKGJyaWRn
ZSk7CiAJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9jZG5zLWRzaS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9jZG5zLWRzaS5jCmluZGV4IDYxNjZkY2E2YmU4MS4uM2E1
YmQ0ZTdmZDFlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL2NkbnMtZHNpLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9jZG5zLWRzaS5jCkBAIC05NTYsNyArOTU2LDgg
QEAgc3RhdGljIGludCBjZG5zX2RzaV9hdHRhY2goc3RydWN0IG1pcGlfZHNpX2hvc3QgKmhvc3Qs
CiAKIAlwYW5lbCA9IG9mX2RybV9maW5kX3BhbmVsKG5wKTsKIAlpZiAoIUlTX0VSUihwYW5lbCkp
IHsKLQkJYnJpZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9hZGQocGFuZWwsIERSTV9NT0RFX0NPTk5F
Q1RPUl9EU0kpOworCQlicmlkZ2UgPSBkcm1fcGFuZWxfYnJpZGdlX2FkZF90eXBlZChwYW5lbCwK
KwkJCQkJCSAgICBEUk1fTU9ERV9DT05ORUNUT1JfRFNJKTsKIAl9IGVsc2UgewogCQlicmlkZ2Ug
PSBvZl9kcm1fZmluZF9icmlkZ2UoZGV2LT5kZXYub2Zfbm9kZSk7CiAJCWlmICghYnJpZGdlKQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9sdmRzLWVuY29kZXIuYyBiL2RyaXZl
cnMvZ3B1L2RybS9icmlkZ2UvbHZkcy1lbmNvZGVyLmMKaW5kZXggMmFiMmMyMzRmMjZjLi5lMjEz
MmE4ZDUxMDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvbHZkcy1lbmNvZGVy
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9sdmRzLWVuY29kZXIuYwpAQCAtMTA2LDcg
KzEwNiw4IEBAIHN0YXRpYyBpbnQgbHZkc19lbmNvZGVyX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9k
ZXZpY2UgKnBkZXYpCiAJfQogCiAJbHZkc19lbmNvZGVyLT5wYW5lbF9icmlkZ2UgPQotCQlkZXZt
X2RybV9wYW5lbF9icmlkZ2VfYWRkKGRldiwgcGFuZWwsIERSTV9NT0RFX0NPTk5FQ1RPUl9MVkRT
KTsKKwkJZGV2bV9kcm1fcGFuZWxfYnJpZGdlX2FkZF90eXBlZChkZXYsIHBhbmVsLAorCQkJCQkJ
RFJNX01PREVfQ09OTkVDVE9SX0xWRFMpOwogCWlmIChJU19FUlIobHZkc19lbmNvZGVyLT5wYW5l
bF9icmlkZ2UpKQogCQlyZXR1cm4gUFRSX0VSUihsdmRzX2VuY29kZXItPnBhbmVsX2JyaWRnZSk7
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2UvcGFuZWwuYyBiL2RyaXZlcnMv
Z3B1L2RybS9icmlkZ2UvcGFuZWwuYwppbmRleCA2Y2ZmZWI0YTQyZjIuLmY0ZTI5M2U3Y2Y2NCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9wYW5lbC5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9icmlkZ2UvcGFuZWwuYwpAQCAtMTM0LDggKzEzNCw2IEBAIHN0YXRpYyBjb25zdCBz
dHJ1Y3QgZHJtX2JyaWRnZV9mdW5jcyBwYW5lbF9icmlkZ2VfYnJpZGdlX2Z1bmNzID0gewogICog
anVzdCBjYWxscyB0aGUgYXBwcm9wcmlhdGUgZnVuY3Rpb25zIGZyb20gJmRybV9wYW5lbC4KICAq
CiAgKiBAcGFuZWw6IFRoZSBkcm1fcGFuZWwgYmVpbmcgd3JhcHBlZC4gIE11c3QgYmUgbm9uLU5V
TEwuCi0gKiBAY29ubmVjdG9yX3R5cGU6IFRoZSBEUk1fTU9ERV9DT05ORUNUT1JfKiBmb3IgdGhl
IGNvbm5lY3RvciB0byBiZQotICogY3JlYXRlZC4KICAqCiAgKiBGb3IgZHJpdmVycyBjb252ZXJ0
aW5nIGZyb20gZGlyZWN0bHkgdXNpbmcgZHJtX3BhbmVsOiBUaGUgZXhwZWN0ZWQKICAqIHVzYWdl
IHBhdHRlcm4gaXMgdGhhdCBkdXJpbmcgZWl0aGVyIGVuY29kZXIgbW9kdWxlIHByb2JlIG9yIERT
SQpAQCAtMTQ5LDExICsxNDcsMzcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fYnJpZGdlX2Z1
bmNzIHBhbmVsX2JyaWRnZV9icmlkZ2VfZnVuY3MgPSB7CiAgKiBkcm1fbW9kZV9jb25maWdfY2xl
YW51cCgpIGlmIHRoZSBicmlkZ2UgaGFzIGFscmVhZHkgYmVlbiBhdHRhY2hlZCksIHRoZW4KICAq
IGRybV9wYW5lbF9icmlkZ2VfcmVtb3ZlKCkgdG8gZnJlZSBpdC4KICAqCisgKiBUaGUgY29ubmVj
dG9yIHR5cGUgaXMgc2V0IHRvIEBwYW5lbC0+Y29ubmVjdG9yX3R5cGUsIHdoaWNoIG11c3QgYmUg
c2V0IHRvIGEKKyAqIGtub3duIHR5cGUuIENhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aXRoIGEgcGFu
ZWwgd2hvc2UgY29ubmVjdG9yIHR5cGUgaXMKKyAqIERSTV9NT0RFX0NPTk5FQ1RPUl9Vbmtub3du
IHdpbGwgcmV0dXJuIE5VTEwuCisgKgogICogU2VlIGRldm1fZHJtX3BhbmVsX2JyaWRnZV9hZGQo
KSBmb3IgYW4gYXV0b21hdGljYWxseSBtYW5nZWQgdmVyc2lvbiBvZiB0aGlzCiAgKiBmdW5jdGlv
bi4KICAqLwotc3RydWN0IGRybV9icmlkZ2UgKmRybV9wYW5lbF9icmlkZ2VfYWRkKHN0cnVjdCBk
cm1fcGFuZWwgKnBhbmVsLAotCQkJCQl1MzIgY29ubmVjdG9yX3R5cGUpCitzdHJ1Y3QgZHJtX2Jy
aWRnZSAqZHJtX3BhbmVsX2JyaWRnZV9hZGQoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJ
aWYgKFdBUk5fT04ocGFuZWwtPmNvbm5lY3Rvcl90eXBlID09IERSTV9NT0RFX0NPTk5FQ1RPUl9V
bmtub3duKSkKKwkJcmV0dXJuIE5VTEw7CisKKwlyZXR1cm4gZHJtX3BhbmVsX2JyaWRnZV9hZGRf
dHlwZWQocGFuZWwsIHBhbmVsLT5jb25uZWN0b3JfdHlwZSk7Cit9CitFWFBPUlRfU1lNQk9MKGRy
bV9wYW5lbF9icmlkZ2VfYWRkKTsKKworLyoqCisgKiBkcm1fcGFuZWxfYnJpZGdlX2FkZF90eXBl
ZCAtIENyZWF0ZXMgYSAmZHJtX2JyaWRnZSBhbmQgJmRybV9jb25uZWN0b3Igd2l0aAorICogYW4g
ZXhwbGljaXQgY29ubmVjdG9yIHR5cGUuCisgKiBAcGFuZWw6IFRoZSBkcm1fcGFuZWwgYmVpbmcg
d3JhcHBlZC4gIE11c3QgYmUgbm9uLU5VTEwuCisgKiBAY29ubmVjdG9yX3R5cGU6IFRoZSBjb25u
ZWN0b3IgdHlwZSAoRFJNX01PREVfQ09OTkVDVE9SXyopCisgKgorICogVGhpcyBpcyBqdXN0IGxp
a2UgZHJtX3BhbmVsX2JyaWRnZV9hZGQoKSwgYnV0IGZvcmNlcyB0aGUgY29ubmVjdG9yIHR5cGUg
dG8KKyAqIEBjb25uZWN0b3JfdHlwZSBpbnN0ZWFkIG9mIGluZmVyaW5nIGl0IGZyb20gdGhlIHBh
bmVsLgorICoKKyAqIFRoaXMgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCBhbmQgc2hvdWxkIG5vdCBi
ZSB1c2VkIGluIG5ldyBkcml2ZXJzLiBVc2UKKyAqIGRybV9wYW5lbF9icmlkZ2VfYWRkKCkgaW5z
dGVhZCwgYW5kIGZpeCBwYW5lbCBkcml2ZXJzIGFzIG5lY2Vzc2FyeSBpZiB0aGV5CisgKiBkb24n
dCByZXBvcnQgYSBjb25uZWN0b3IgdHlwZS4KKyAqLworc3RydWN0IGRybV9icmlkZ2UgKmRybV9w
YW5lbF9icmlkZ2VfYWRkX3R5cGVkKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsLAorCQkJCQkgICAg
ICB1MzIgY29ubmVjdG9yX3R5cGUpCiB7CiAJc3RydWN0IHBhbmVsX2JyaWRnZSAqcGFuZWxfYnJp
ZGdlOwogCkBAIC0xNzcsNyArMjAxLDcgQEAgc3RydWN0IGRybV9icmlkZ2UgKmRybV9wYW5lbF9i
cmlkZ2VfYWRkKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsLAogCiAJcmV0dXJuICZwYW5lbF9icmlk
Z2UtPmJyaWRnZTsKIH0KLUVYUE9SVF9TWU1CT0woZHJtX3BhbmVsX2JyaWRnZV9hZGQpOworRVhQ
T1JUX1NZTUJPTChkcm1fcGFuZWxfYnJpZGdlX2FkZF90eXBlZCk7CiAKIC8qKgogICogZHJtX3Bh
bmVsX2JyaWRnZV9yZW1vdmUgLSBVbnJlZ2lzdGVycyBhbmQgZnJlZXMgYSBkcm1fYnJpZGdlCkBA
IC0yMTQsMTUgKzIzOCwzOCBAQCBzdGF0aWMgdm9pZCBkZXZtX2RybV9wYW5lbF9icmlkZ2VfcmVs
ZWFzZShzdHJ1Y3QgZGV2aWNlICpkZXYsIHZvaWQgKnJlcykKICAqIHRoYXQganVzdCBjYWxscyB0
aGUgYXBwcm9wcmlhdGUgZnVuY3Rpb25zIGZyb20gJmRybV9wYW5lbC4KICAqIEBkZXY6IGRldmlj
ZSB0byB0aWUgdGhlIGJyaWRnZSBsaWZldGltZSB0bwogICogQHBhbmVsOiBUaGUgZHJtX3BhbmVs
IGJlaW5nIHdyYXBwZWQuICBNdXN0IGJlIG5vbi1OVUxMLgotICogQGNvbm5lY3Rvcl90eXBlOiBU
aGUgRFJNX01PREVfQ09OTkVDVE9SXyogZm9yIHRoZSBjb25uZWN0b3IgdG8gYmUKLSAqIGNyZWF0
ZWQuCiAgKgogICogVGhpcyBpcyB0aGUgbWFuYWdlZCB2ZXJzaW9uIG9mIGRybV9wYW5lbF9icmlk
Z2VfYWRkKCkgd2hpY2ggYXV0b21hdGljYWxseQogICogY2FsbHMgZHJtX3BhbmVsX2JyaWRnZV9y
ZW1vdmUoKSB3aGVuIEBkZXYgaXMgdW5ib3VuZC4KICAqLwogc3RydWN0IGRybV9icmlkZ2UgKmRl
dm1fZHJtX3BhbmVsX2JyaWRnZV9hZGQoc3RydWN0IGRldmljZSAqZGV2LAotCQkJCQkgICAgIHN0
cnVjdCBkcm1fcGFuZWwgKnBhbmVsLAotCQkJCQkgICAgIHUzMiBjb25uZWN0b3JfdHlwZSkKKwkJ
CQkJICAgICBzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkKK3sKKwlpZiAoV0FSTl9PTihwYW5lbC0+
Y29ubmVjdG9yX3R5cGUgPT0gRFJNX01PREVfQ09OTkVDVE9SX1Vua25vd24pKQorCQlyZXR1cm4g
TlVMTDsKKworCXJldHVybiBkZXZtX2RybV9wYW5lbF9icmlkZ2VfYWRkX3R5cGVkKGRldiwgcGFu
ZWwsCisJCQkJCSAgICAgICBwYW5lbC0+Y29ubmVjdG9yX3R5cGUpOworfQorRVhQT1JUX1NZTUJP
TChkZXZtX2RybV9wYW5lbF9icmlkZ2VfYWRkKTsKKworLyoqCisgKiBkZXZtX2RybV9wYW5lbF9i
cmlkZ2VfYWRkX3R5cGVkIC0gQ3JlYXRlcyBhIG1hbmFnZWQgJmRybV9icmlkZ2UgYW5kCisgKiAm
ZHJtX2Nvbm5lY3RvciB3aXRoIGFuIGV4cGxpY2l0IGNvbm5lY3RvciB0eXBlLgorICogQGRldjog
ZGV2aWNlIHRvIHRpZSB0aGUgYnJpZGdlIGxpZmV0aW1lIHRvCisgKiBAcGFuZWw6IFRoZSBkcm1f
cGFuZWwgYmVpbmcgd3JhcHBlZC4gIE11c3QgYmUgbm9uLU5VTEwuCisgKiBAY29ubmVjdG9yX3R5
cGU6IFRoZSBjb25uZWN0b3IgdHlwZSAoRFJNX01PREVfQ09OTkVDVE9SXyopCisgKgorICogVGhp
cyBpcyBqdXN0IGxpa2UgZGV2bV9kcm1fcGFuZWxfYnJpZGdlX2FkZCgpLCBidXQgZm9yY2VzIHRo
ZSBjb25uZWN0b3IgdHlwZQorICogdG8gQGNvbm5lY3Rvcl90eXBlIGluc3RlYWQgb2YgaW5mZXJp
bmcgaXQgZnJvbSB0aGUgcGFuZWwuCisgKgorICogVGhpcyBmdW5jdGlvbiBpcyBkZXByZWNhdGVk
IGFuZCBzaG91bGQgbm90IGJlIHVzZWQgaW4gbmV3IGRyaXZlcnMuIFVzZQorICogZGV2bV9kcm1f
cGFuZWxfYnJpZGdlX2FkZCgpIGluc3RlYWQsIGFuZCBmaXggcGFuZWwgZHJpdmVycyBhcyBuZWNl
c3NhcnkgaWYKKyAqIHRoZXkgZG9uJ3QgcmVwb3J0IGEgY29ubmVjdG9yIHR5cGUuCisgKi8KK3N0
cnVjdCBkcm1fYnJpZGdlICpkZXZtX2RybV9wYW5lbF9icmlkZ2VfYWRkX3R5cGVkKHN0cnVjdCBk
ZXZpY2UgKmRldiwKKwkJCQkJCSAgIHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsLAorCQkJCQkJICAg
dTMyIGNvbm5lY3Rvcl90eXBlKQogewogCXN0cnVjdCBkcm1fYnJpZGdlICoqcHRyLCAqYnJpZGdl
OwogCkBAIC0yMzEsNyArMjc4LDcgQEAgc3RydWN0IGRybV9icmlkZ2UgKmRldm1fZHJtX3BhbmVs
X2JyaWRnZV9hZGQoc3RydWN0IGRldmljZSAqZGV2LAogCWlmICghcHRyKQogCQlyZXR1cm4gRVJS
X1BUUigtRU5PTUVNKTsKIAotCWJyaWRnZSA9IGRybV9wYW5lbF9icmlkZ2VfYWRkKHBhbmVsLCBj
b25uZWN0b3JfdHlwZSk7CisJYnJpZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9hZGRfdHlwZWQocGFu
ZWwsIGNvbm5lY3Rvcl90eXBlKTsKIAlpZiAoIUlTX0VSUihicmlkZ2UpKSB7CiAJCSpwdHIgPSBi
cmlkZ2U7CiAJCWRldnJlc19hZGQoZGV2LCBwdHIpOwpAQCAtMjQxLDQgKzI4OCw0IEBAIHN0cnVj
dCBkcm1fYnJpZGdlICpkZXZtX2RybV9wYW5lbF9icmlkZ2VfYWRkKHN0cnVjdCBkZXZpY2UgKmRl
diwKIAogCXJldHVybiBicmlkZ2U7CiB9Ci1FWFBPUlRfU1lNQk9MKGRldm1fZHJtX3BhbmVsX2Jy
aWRnZV9hZGQpOworRVhQT1JUX1NZTUJPTChkZXZtX2RybV9wYW5lbF9icmlkZ2VfYWRkX3R5cGVk
KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctbWlwaS1k
c2kuYyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctbWlwaS1kc2kuYwppbmRl
eCA2NzU0NDJiZmMxYmQuLmI4YjFjMjg4ZjY2MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2JyaWRnZS9zeW5vcHN5cy9kdy1taXBpLWRzaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9icmlk
Z2Uvc3lub3BzeXMvZHctbWlwaS1kc2kuYwpAQCAtMzE2LDcgKzMxNiw4IEBAIHN0YXRpYyBpbnQg
ZHdfbWlwaV9kc2lfaG9zdF9hdHRhY2goc3RydWN0IG1pcGlfZHNpX2hvc3QgKmhvc3QsCiAJCXJl
dHVybiByZXQ7CiAKIAlpZiAocGFuZWwpIHsKLQkJYnJpZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9h
ZGQocGFuZWwsIERSTV9NT0RFX0NPTk5FQ1RPUl9EU0kpOworCQlicmlkZ2UgPSBkcm1fcGFuZWxf
YnJpZGdlX2FkZF90eXBlZChwYW5lbCwKKwkJCQkJCSAgICBEUk1fTU9ERV9DT05ORUNUT1JfRFNJ
KTsKIAkJaWYgKElTX0VSUihicmlkZ2UpKQogCQkJcmV0dXJuIFBUUl9FUlIoYnJpZGdlKTsKIAl9
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaW5nZW5pYy9pbmdlbmljLWRybS5jIGIvZHJp
dmVycy9ncHUvZHJtL2luZ2VuaWMvaW5nZW5pYy1kcm0uYwppbmRleCBkNjBmMjNmZDY5YmUuLmVj
MzJlMWM2NzMzNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2luZ2VuaWMvaW5nZW5pYy1k
cm0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaW5nZW5pYy9pbmdlbmljLWRybS5jCkBAIC02Nzcs
OCArNjc3LDggQEAgc3RhdGljIGludCBpbmdlbmljX2RybV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1f
ZGV2aWNlICpwZGV2KQogCX0KIAogCWlmIChwYW5lbCkKLQkJYnJpZGdlID0gZGV2bV9kcm1fcGFu
ZWxfYnJpZGdlX2FkZChkZXYsIHBhbmVsLAotCQkJCQkJICAgRFJNX01PREVfQ09OTkVDVE9SX0RQ
SSk7CisJCWJyaWRnZSA9IGRldm1fZHJtX3BhbmVsX2JyaWRnZV9hZGRfdHlwZWQoZGV2LCBwYW5l
bCwKKwkJCQkJCQkgRFJNX01PREVfQ09OTkVDVE9SX0RQSSk7CiAKIAlwcml2LT5kbWFfaHdkZXNj
ID0gZG1hX2FsbG9jX2NvaGVyZW50KGRldiwgc2l6ZW9mKCpwcml2LT5kbWFfaHdkZXNjKSwKIAkJ
CQkJICAgICAgJnByaXYtPmRtYV9od2Rlc2NfcGh5cywKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9tY2RlL21jZGVfZHNpLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWNkZS9tY2RlX2RzaS5jCmlu
ZGV4IDA3ZjcwOTBkMDhiMy4uZmZiNTVkM2I2NjJjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vbWNkZS9tY2RlX2RzaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tY2RlL21jZGVfZHNpLmMK
QEAgLTkyMiw4ICs5MjIsOCBAQCBzdGF0aWMgaW50IG1jZGVfZHNpX2JpbmQoc3RydWN0IGRldmlj
ZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlICptYXN0ZXIsCiAJCX0KIAl9CiAJaWYgKHBhbmVsKSB7Ci0J
CWJyaWRnZSA9IGRybV9wYW5lbF9icmlkZ2VfYWRkKHBhbmVsLAotCQkJCQkgICAgICBEUk1fTU9E
RV9DT05ORUNUT1JfRFNJKTsKKwkJYnJpZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9hZGRfdHlwZWQo
cGFuZWwsCisJCQkJCQkgICAgRFJNX01PREVfQ09OTkVDVE9SX0RTSSk7CiAJCWlmIChJU19FUlIo
YnJpZGdlKSkgewogCQkJZGV2X2VycihkZXYsICJlcnJvciBhZGRpbmcgcGFuZWwgYnJpZGdlXG4i
KTsKIAkJCXJldHVybiBQVFJfRVJSKGJyaWRnZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vcGwxMTEvcGwxMTFfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vcGwxMTEvcGwxMTFfZHJ2LmMK
aW5kZXggMjc2YjUzNDczYTg0Li42M2RmY2RhMDQxNDcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9wbDExMS9wbDExMV9kcnYuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcGwxMTEvcGwxMTFf
ZHJ2LmMKQEAgLTE1MCw4ICsxNTAsOCBAQCBzdGF0aWMgaW50IHBsMTExX21vZGVzZXRfaW5pdChz
dHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCQlyZXR1cm4gLUVQUk9CRV9ERUZFUjsKIAogCWlmIChw
YW5lbCkgewotCQlicmlkZ2UgPSBkcm1fcGFuZWxfYnJpZGdlX2FkZChwYW5lbCwKLQkJCQkJICAg
ICAgRFJNX01PREVfQ09OTkVDVE9SX1Vua25vd24pOworCQlicmlkZ2UgPSBkcm1fcGFuZWxfYnJp
ZGdlX2FkZF90eXBlZChwYW5lbCwKKwkJCQkJCSAgICBEUk1fTU9ERV9DT05ORUNUT1JfVW5rbm93
bik7CiAJCWlmIChJU19FUlIoYnJpZGdlKSkgewogCQkJcmV0ID0gUFRSX0VSUihicmlkZ2UpOwog
CQkJZ290byBvdXRfY29uZmlnOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUv
cmNhcl9kdV9lbmNvZGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2VuY29k
ZXIuYwppbmRleCAzYTExMzliNzI1YzAuLjNjZDgzYTAzMGEwNCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9lbmNvZGVyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L3JjYXItZHUvcmNhcl9kdV9lbmNvZGVyLmMKQEAgLTg1LDggKzg1LDggQEAgaW50IHJjYXJfZHVf
ZW5jb2Rlcl9pbml0KHN0cnVjdCByY2FyX2R1X2RldmljZSAqcmNkdSwKIAkJCWdvdG8gZG9uZTsK
IAkJfQogCi0JCWJyaWRnZSA9IGRldm1fZHJtX3BhbmVsX2JyaWRnZV9hZGQocmNkdS0+ZGV2LCBw
YW5lbCwKLQkJCQkJCSAgIERSTV9NT0RFX0NPTk5FQ1RPUl9EUEkpOworCQlicmlkZ2UgPSBkZXZt
X2RybV9wYW5lbF9icmlkZ2VfYWRkX3R5cGVkKHJjZHUtPmRldiwgcGFuZWwsCisJCQkJCQkJIERS
TV9NT0RFX0NPTk5FQ1RPUl9EUEkpOwogCQlpZiAoSVNfRVJSKGJyaWRnZSkpIHsKIAkJCXJldCA9
IFBUUl9FUlIoYnJpZGdlKTsKIAkJCWdvdG8gZG9uZTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9yZ2IuYyBiL2RyaXZlcnMvZ3B1L2RybS9yb2NrY2hpcC9y
b2NrY2hpcF9yZ2IuYwppbmRleCBkYjFiZTFmMzkyNWMuLmFlNzMwMjc1YTM0ZiAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL3JvY2tjaGlwL3JvY2tjaGlwX3JnYi5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9yb2NrY2hpcC9yb2NrY2hpcF9yZ2IuYwpAQCAtMTM2LDcgKzEzNiw4IEBAIHN0cnVj
dCByb2NrY2hpcF9yZ2IgKnJvY2tjaGlwX3JnYl9pbml0KHN0cnVjdCBkZXZpY2UgKmRldiwKIAlk
cm1fZW5jb2Rlcl9oZWxwZXJfYWRkKGVuY29kZXIsICZyb2NrY2hpcF9yZ2JfZW5jb2Rlcl9oZWxw
ZXJfZnVuY3MpOwogCiAJaWYgKHBhbmVsKSB7Ci0JCWJyaWRnZSA9IGRybV9wYW5lbF9icmlkZ2Vf
YWRkKHBhbmVsLCBEUk1fTU9ERV9DT05ORUNUT1JfTFZEUyk7CisJCWJyaWRnZSA9IGRybV9wYW5l
bF9icmlkZ2VfYWRkX3R5cGVkKHBhbmVsLAorCQkJCQkJICAgIERSTV9NT0RFX0NPTk5FQ1RPUl9M
VkRTKTsKIAkJaWYgKElTX0VSUihicmlkZ2UpKQogCQkJcmV0dXJuIEVSUl9DQVNUKGJyaWRnZSk7
CiAJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3N0bS9sdGRjLmMgYi9kcml2ZXJzL2dw
dS9kcm0vc3RtL2x0ZGMuYwppbmRleCAzYWI0ZmJmOGViMGQuLjdjZGFiNjg1YjUyNyAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL3N0bS9sdGRjLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3N0
bS9sdGRjLmMKQEAgLTEyMzYsOCArMTIzNiw4IEBAIGludCBsdGRjX2xvYWQoc3RydWN0IGRybV9k
ZXZpY2UgKmRkZXYpCiAJLyogQWRkIGVuZHBvaW50cyBwYW5lbHMgb3IgYnJpZGdlcyBpZiBhbnkg
Ki8KIAlmb3IgKGkgPSAwOyBpIDwgTUFYX0VORFBPSU5UUzsgaSsrKSB7CiAJCWlmIChwYW5lbFtp
XSkgewotCQkJYnJpZGdlW2ldID0gZHJtX3BhbmVsX2JyaWRnZV9hZGQocGFuZWxbaV0sCi0JCQkJ
CQkJRFJNX01PREVfQ09OTkVDVE9SX0RQSSk7CisJCQlicmlkZ2VbaV0gPSBkcm1fcGFuZWxfYnJp
ZGdlX2FkZF90eXBlZChwYW5lbFtpXSwKKwkJCQkJCQkgICAgICAgRFJNX01PREVfQ09OTkVDVE9S
X0RQSSk7CiAJCQlpZiAoSVNfRVJSKGJyaWRnZVtpXSkpIHsKIAkJCQlEUk1fRVJST1IoInBhbmVs
LWJyaWRnZSBlbmRwb2ludCAlZFxuIiwgaSk7CiAJCQkJcmV0ID0gUFRSX0VSUihicmlkZ2VbaV0p
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfZXh0ZXJuYWwuYyBi
L2RyaXZlcnMvZ3B1L2RybS90aWxjZGMvdGlsY2RjX2V4dGVybmFsLmMKaW5kZXggNGZjMTA4Mzhk
ZTgwLi41MWQwMzRlMDk1ZjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90aWxjZGMvdGls
Y2RjX2V4dGVybmFsLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3RpbGNkYy90aWxjZGNfZXh0ZXJu
YWwuYwpAQCAtMTQwLDggKzE0MCw4IEBAIGludCB0aWxjZGNfYXR0YWNoX2V4dGVybmFsX2Rldmlj
ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGRldikKIAl9CiAKIAlpZiAocGFuZWwpIHsKLQkJYnJpZGdl
ID0gZGV2bV9kcm1fcGFuZWxfYnJpZGdlX2FkZChkZGV2LT5kZXYsIHBhbmVsLAotCQkJCQkJICAg
RFJNX01PREVfQ09OTkVDVE9SX0RQSSk7CisJCWJyaWRnZSA9IGRldm1fZHJtX3BhbmVsX2JyaWRn
ZV9hZGRfdHlwZWQoZGRldi0+ZGV2LCBwYW5lbCwKKwkJCQkJCQkgRFJNX01PREVfQ09OTkVDVE9S
X0RQSSk7CiAJCWlmIChJU19FUlIoYnJpZGdlKSkgewogCQkJcmV0ID0gUFRSX0VSUihicmlkZ2Up
OwogCQkJZ290byBlcnJfZW5jb2Rlcl9jbGVhbnVwOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3R2ZTIwMC90dmUyMDBfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vdHZlMjAwL3R2ZTIwMF9k
cnYuYwppbmRleCA0MTZmMjQ4MjNjMGEuLjk1NGIwOWM5NDhlYiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL3R2ZTIwMC90dmUyMDBfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3R2ZTIw
MC90dmUyMDBfZHJ2LmMKQEAgLTgwLDggKzgwLDggQEAgc3RhdGljIGludCB0dmUyMDBfbW9kZXNl
dF9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiAJaWYgKHJldCAmJiByZXQgIT0gLUVOT0RF
VikKIAkJcmV0dXJuIHJldDsKIAlpZiAocGFuZWwpIHsKLQkJYnJpZGdlID0gZHJtX3BhbmVsX2Jy
aWRnZV9hZGQocGFuZWwsCi0JCQkJCSAgICAgIERSTV9NT0RFX0NPTk5FQ1RPUl9Vbmtub3duKTsK
KwkJYnJpZGdlID0gZHJtX3BhbmVsX2JyaWRnZV9hZGRfdHlwZWQocGFuZWwsCisJCQkJCQkgICAg
RFJNX01PREVfQ09OTkVDVE9SX1Vua25vd24pOwogCQlpZiAoSVNfRVJSKGJyaWRnZSkpIHsKIAkJ
CXJldCA9IFBUUl9FUlIoYnJpZGdlKTsKIAkJCWdvdG8gb3V0X2JyaWRnZTsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2RwaS5jIGIvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRf
ZHBpLmMKaW5kZXggOGEyN2E2YWNlZTYxLi5jNTg2MzI1ZGUyYTUgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS92YzQvdmM0X2RwaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2Rw
aS5jCkBAIC0yNDksNyArMjQ5LDggQEAgc3RhdGljIGludCB2YzRfZHBpX2luaXRfYnJpZGdlKHN0
cnVjdCB2YzRfZHBpICpkcGkpCiAJfQogCiAJaWYgKHBhbmVsKQotCQlicmlkZ2UgPSBkcm1fcGFu
ZWxfYnJpZGdlX2FkZChwYW5lbCwgRFJNX01PREVfQ09OTkVDVE9SX0RQSSk7CisJCWJyaWRnZSA9
IGRybV9wYW5lbF9icmlkZ2VfYWRkX3R5cGVkKHBhbmVsLAorCQkJCQkJICAgIERSTV9NT0RFX0NP
Tk5FQ1RPUl9EUEkpOwogCiAJcmV0dXJuIGRybV9icmlkZ2VfYXR0YWNoKGRwaS0+ZW5jb2Rlciwg
YnJpZGdlLCBOVUxMKTsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2Rz
aS5jIGIvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfZHNpLmMKaW5kZXggM2Y2Mzk0M2U1NDcyLi5j
OWJhODNlZDQ5YjkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2RzaS5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2RzaS5jCkBAIC0xNTc2LDggKzE1NzYsOCBAQCBz
dGF0aWMgaW50IHZjNF9kc2lfYmluZChzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBkZXZpY2Ug
Km1hc3Rlciwgdm9pZCAqZGF0YSkKIAl9CiAKIAlpZiAocGFuZWwpIHsKLQkJZHNpLT5icmlkZ2Ug
PSBkZXZtX2RybV9wYW5lbF9icmlkZ2VfYWRkKGRldiwgcGFuZWwsCi0JCQkJCQkJRFJNX01PREVf
Q09OTkVDVE9SX0RTSSk7CisJCWRzaS0+YnJpZGdlID0gZGV2bV9kcm1fcGFuZWxfYnJpZGdlX2Fk
ZF90eXBlZChkZXYsIHBhbmVsLAorCQkJCQkJCSAgICAgIERSTV9NT0RFX0NPTk5FQ1RPUl9EU0kp
OwogCQlpZiAoSVNfRVJSKGRzaS0+YnJpZGdlKSkKIAkJCXJldHVybiBQVFJfRVJSKGRzaS0+YnJp
ZGdlKTsKIAl9CmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fYnJpZGdlLmggYi9pbmNsdWRl
L2RybS9kcm1fYnJpZGdlLmgKaW5kZXggNzYxNmY2NTYyZmU0Li4xYTRiOGVjZjViZGIgMTAwNjQ0
Ci0tLSBhL2luY2x1ZGUvZHJtL2RybV9icmlkZ2UuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fYnJp
ZGdlLmgKQEAgLTQyOSwxMiArNDI5LDE1IEBAIHZvaWQgZHJtX2F0b21pY19icmlkZ2VfZW5hYmxl
KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJCQkgICAgICBzdHJ1Y3QgZHJtX2F0b21pY19z
dGF0ZSAqc3RhdGUpOwogCiAjaWZkZWYgQ09ORklHX0RSTV9QQU5FTF9CUklER0UKLXN0cnVjdCBk
cm1fYnJpZGdlICpkcm1fcGFuZWxfYnJpZGdlX2FkZChzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCwK
LQkJCQkJdTMyIGNvbm5lY3Rvcl90eXBlKTsKK3N0cnVjdCBkcm1fYnJpZGdlICpkcm1fcGFuZWxf
YnJpZGdlX2FkZChzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCk7CitzdHJ1Y3QgZHJtX2JyaWRnZSAq
ZHJtX3BhbmVsX2JyaWRnZV9hZGRfdHlwZWQoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwsCisJCQkJ
CSAgICAgIHUzMiBjb25uZWN0b3JfdHlwZSk7CiB2b2lkIGRybV9wYW5lbF9icmlkZ2VfcmVtb3Zl
KHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpOwogc3RydWN0IGRybV9icmlkZ2UgKmRldm1fZHJt
X3BhbmVsX2JyaWRnZV9hZGQoc3RydWN0IGRldmljZSAqZGV2LAotCQkJCQkgICAgIHN0cnVjdCBk
cm1fcGFuZWwgKnBhbmVsLAotCQkJCQkgICAgIHUzMiBjb25uZWN0b3JfdHlwZSk7CisJCQkJCSAg
ICAgc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpOworc3RydWN0IGRybV9icmlkZ2UgKmRldm1fZHJt
X3BhbmVsX2JyaWRnZV9hZGRfdHlwZWQoc3RydWN0IGRldmljZSAqZGV2LAorCQkJCQkJICAgc3Ry
dWN0IGRybV9wYW5lbCAqcGFuZWwsCisJCQkJCQkgICB1MzIgY29ubmVjdG9yX3R5cGUpOwogI2Vu
ZGlmCiAKICNlbmRpZgotLSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hhcnQKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
