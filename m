Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9281A56411
	for <lists+dri-devel@lfdr.de>; Wed, 26 Jun 2019 10:12:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 789366E2DE;
	Wed, 26 Jun 2019 08:12:17 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from lb2-smtp-cloud9.xs4all.net (lb2-smtp-cloud9.xs4all.net
 [194.109.24.26])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 543586E130
 for <dri-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 14:45:18 +0000 (UTC)
Received: from cobaltpc1.rd.cisco.com
 ([IPv6:2001:420:44c1:2579:b032:593c:25fc:ff9b])
 by smtp-cloud9.xs4all.net with ESMTPA
 id fmh4hQwJSSfvXfmhAhHp0I; Tue, 25 Jun 2019 16:45:17 +0200
From: Hans Verkuil <hverkuil-cisco@xs4all.nl>
To: linux-media@vger.kernel.org
Subject: [PATCHv9 09/13] dw-hdmi: use cec_notifier_conn_(un)register
Date: Tue, 25 Jun 2019 16:45:06 +0200
Message-Id: <20190625144510.122214-10-hverkuil-cisco@xs4all.nl>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190625144510.122214-1-hverkuil-cisco@xs4all.nl>
References: <20190625144510.122214-1-hverkuil-cisco@xs4all.nl>
MIME-Version: 1.0
X-CMAE-Envelope: MS4wfIo22fLBIrqLMrXisr54Oz7ccU5U7XrkX5DqS6e4gjZCJDJZRwR7HVkEE6n7qWgdpxc4gdVprEUsxmIO7u7A4kSJm1ZMYKCM9GPw4XNwYWyQ+Yy206sO
 8UOAgAhk2FID2WCfrssWt2OuksRbq/48El4w9eIkWbzZOD5di6vBRkkL0fJAaPA6KJGO0jDFY6McPqSDGQ1vgv3TBj1bvljUvLVCq3SBaXB4pIfT7mBmBEFn
 EJsZDAkB/wkU88ekHbdFfvLcrLiVt/xlTF/6Svej/c7UAtEOmfOW9g91mLRz6JgxP90TrHaHLf/mh3cXLf/04ILJvo/77mQOiwliRa/+EKmLkuo258l2WAuP
 cQRujG7QhQEvHiym9xGYBJXIZfyp27/4N/GZpDbUdehbVYPqSmOkJB8xCaw8oEBetoqYoi0p
X-Mailman-Approved-At: Wed, 26 Jun 2019 08:12:13 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hans Verkuil <hverkuil-cisco@xs4all.nl>,
 Dariusz Marcinkiewicz <darekm@google.com>, dri-devel@lists.freedesktop.org,
 Cheng-yi Chiang <cychiang@chromium.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogRGFyaXVzeiBNYXJjaW5raWV3aWN6IDxkYXJla21AZ29vZ2xlLmNvbT4KClVzZSB0aGUg
bmV3IGNlY19ub3RpZmllcl9jb25uXyh1bilyZWdpc3RlcigpIGZ1bmN0aW9ucyB0bwoodW4pcmVn
aXN0ZXIgdGhlIG5vdGlmaWVyIGZvciB0aGUgSERNSSBjb25uZWN0b3IsIGFuZCBmaWxsIGluCnRo
ZSBjZWNfY29ubmVjdG9yX2luZm8uCgpTaWduZWQtb2ZmLWJ5OiBEYXJpdXN6IE1hcmNpbmtpZXdp
Y3ogPGRhcmVrbUBnb29nbGUuY29tPgpTaWduZWQtb2ZmLWJ5OiBIYW5zIFZlcmt1aWwgPGh2ZXJr
dWlsLWNpc2NvQHhzNGFsbC5ubD4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lz
L2R3LWhkbWkuYyB8IDEwNCArKysrKysrKysrKystLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwg
NTggaW5zZXJ0aW9ucygrKSwgNDYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdl
L3N5bm9wc3lzL2R3LWhkbWkuYwppbmRleCAwNDViMWIxM2ZkMGUuLmZjNGQzYjVmNzFkMCAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMKQEAgLTEzMyw2ICsxMzMs
OCBAQCBzdHJ1Y3QgZHdfaGRtaSB7CiAJc3RydWN0IGRybV9jb25uZWN0b3IgY29ubmVjdG9yOwog
CXN0cnVjdCBkcm1fYnJpZGdlIGJyaWRnZTsKIAorCWludCBpcnE7CisKIAl1bnNpZ25lZCBpbnQg
dmVyc2lvbjsKIAogCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKmF1ZGlvOwpAQCAtMTg0LDYgKzE4
Niw3IEBAIHN0cnVjdCBkd19oZG1pIHsKIAl2b2lkICgqZW5hYmxlX2F1ZGlvKShzdHJ1Y3QgZHdf
aGRtaSAqaGRtaSk7CiAJdm9pZCAoKmRpc2FibGVfYXVkaW8pKHN0cnVjdCBkd19oZG1pICpoZG1p
KTsKIAorCWJvb2wgY2VjX2NvbmZpZ3VyZWQ7CiAJc3RydWN0IGNlY19ub3RpZmllciAqY2VjX25v
dGlmaWVyOwogfTsKIApAQCAtMjEwOCwxMSArMjExMSwzNSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0
IGRybV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzIGR3X2hkbWlfY29ubmVjdG9yX2hlbHBlcl9mdW5j
cyA9CiAJLmdldF9tb2RlcyA9IGR3X2hkbWlfY29ubmVjdG9yX2dldF9tb2RlcywKIH07CiAKK3N0
YXRpYyB2b2lkIGR3X2hkbWlfY2VjX2VuYWJsZShzdHJ1Y3QgZHdfaGRtaSAqaGRtaSkKK3sKKwlt
dXRleF9sb2NrKCZoZG1pLT5tdXRleCk7CisJaGRtaS0+bWNfY2xrZGlzICY9IH5IRE1JX01DX0NM
S0RJU19DRUNDTEtfRElTQUJMRTsKKwloZG1pX3dyaXRlYihoZG1pLCBoZG1pLT5tY19jbGtkaXMs
IEhETUlfTUNfQ0xLRElTKTsKKwltdXRleF91bmxvY2soJmhkbWktPm11dGV4KTsKK30KKworc3Rh
dGljIHZvaWQgZHdfaGRtaV9jZWNfZGlzYWJsZShzdHJ1Y3QgZHdfaGRtaSAqaGRtaSkKK3sKKwlt
dXRleF9sb2NrKCZoZG1pLT5tdXRleCk7CisJaGRtaS0+bWNfY2xrZGlzIHw9IEhETUlfTUNfQ0xL
RElTX0NFQ0NMS19ESVNBQkxFOworCWhkbWlfd3JpdGViKGhkbWksIGhkbWktPm1jX2Nsa2Rpcywg
SERNSV9NQ19DTEtESVMpOworCW11dGV4X3VubG9jaygmaGRtaS0+bXV0ZXgpOworfQorCitzdGF0
aWMgY29uc3Qgc3RydWN0IGR3X2hkbWlfY2VjX29wcyBkd19oZG1pX2NlY19vcHMgPSB7CisJLndy
aXRlID0gaGRtaV93cml0ZWIsCisJLnJlYWQgPSBoZG1pX3JlYWRiLAorCS5lbmFibGUgPSBkd19o
ZG1pX2NlY19lbmFibGUsCisJLmRpc2FibGUgPSBkd19oZG1pX2NlY19kaXNhYmxlLAorfTsKKwog
c3RhdGljIGludCBkd19oZG1pX2JyaWRnZV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRn
ZSkKIHsKIAlzdHJ1Y3QgZHdfaGRtaSAqaGRtaSA9IGJyaWRnZS0+ZHJpdmVyX3ByaXZhdGU7CiAJ
c3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyID0gYnJpZGdlLT5lbmNvZGVyOwogCXN0cnVjdCBk
cm1fY29ubmVjdG9yICpjb25uZWN0b3IgPSAmaGRtaS0+Y29ubmVjdG9yOworCXN0cnVjdCBjZWNf
Y29ubmVjdG9yX2luZm8gY29ubl9pbmZvOwogCiAJY29ubmVjdG9yLT5pbnRlcmxhY2VfYWxsb3dl
ZCA9IDE7CiAJY29ubmVjdG9yLT5wb2xsZWQgPSBEUk1fQ09OTkVDVE9SX1BPTExfSFBEOwpAQCAt
MjEyNCw2ICsyMTUxLDMzIEBAIHN0YXRpYyBpbnQgZHdfaGRtaV9icmlkZ2VfYXR0YWNoKHN0cnVj
dCBkcm1fYnJpZGdlICpicmlkZ2UpCiAKIAlkcm1fY29ubmVjdG9yX2F0dGFjaF9lbmNvZGVyKGNv
bm5lY3RvciwgZW5jb2Rlcik7CiAKKwljZWNfZmlsbF9jb25uX2luZm9fZnJvbV9kcm0oJmNvbm5f
aW5mbywgY29ubmVjdG9yKTsKKworCWhkbWktPmNlY19ub3RpZmllciA9IGNlY19ub3RpZmllcl9j
b25uX3JlZ2lzdGVyKGhkbWktPmRldiwgTlVMTCwKKwkJCQkJCQkmY29ubl9pbmZvKTsKKwlpZiAo
IWhkbWktPmNlY19ub3RpZmllcikKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlpZiAoaGRtaS0+Y2Vj
X2NvbmZpZ3VyZWQpIHsKKwkJc3RydWN0IHBsYXRmb3JtX2RldmljZV9pbmZvIHBkZXZpbmZvOwor
CQlzdHJ1Y3QgZHdfaGRtaV9jZWNfZGF0YSBjZWM7CisKKwkJbWVtc2V0KCZwZGV2aW5mbywgMCwg
c2l6ZW9mKHBkZXZpbmZvKSk7CisJCXBkZXZpbmZvLnBhcmVudCA9IGhkbWktPmRldjsKKwkJcGRl
dmluZm8uaWQgPSBQTEFURk9STV9ERVZJRF9BVVRPOworCisJCWNlYy5oZG1pID0gaGRtaTsKKwkJ
Y2VjLm9wcyA9ICZkd19oZG1pX2NlY19vcHM7CisJCWNlYy5pcnEgPSBoZG1pLT5pcnE7CisKKwkJ
cGRldmluZm8ubmFtZSA9ICJkdy1oZG1pLWNlYyI7CisJCXBkZXZpbmZvLmRhdGEgPSAmY2VjOwor
CQlwZGV2aW5mby5zaXplX2RhdGEgPSBzaXplb2YoY2VjKTsKKwkJcGRldmluZm8uZG1hX21hc2sg
PSAwOworCisJCWhkbWktPmNlYyA9IHBsYXRmb3JtX2RldmljZV9yZWdpc3Rlcl9mdWxsKCZwZGV2
aW5mbyk7CisJfQorCiAJcmV0dXJuIDA7CiB9CiAKQEAgLTIzOTMsMjkgKzI0NDcsNiBAQCBzdGF0
aWMgaW50IGR3X2hkbWlfZGV0ZWN0X3BoeShzdHJ1Y3QgZHdfaGRtaSAqaGRtaSkKIAlyZXR1cm4g
LUVOT0RFVjsKIH0KIAotc3RhdGljIHZvaWQgZHdfaGRtaV9jZWNfZW5hYmxlKHN0cnVjdCBkd19o
ZG1pICpoZG1pKQotewotCW11dGV4X2xvY2soJmhkbWktPm11dGV4KTsKLQloZG1pLT5tY19jbGtk
aXMgJj0gfkhETUlfTUNfQ0xLRElTX0NFQ0NMS19ESVNBQkxFOwotCWhkbWlfd3JpdGViKGhkbWks
IGhkbWktPm1jX2Nsa2RpcywgSERNSV9NQ19DTEtESVMpOwotCW11dGV4X3VubG9jaygmaGRtaS0+
bXV0ZXgpOwotfQotCi1zdGF0aWMgdm9pZCBkd19oZG1pX2NlY19kaXNhYmxlKHN0cnVjdCBkd19o
ZG1pICpoZG1pKQotewotCW11dGV4X2xvY2soJmhkbWktPm11dGV4KTsKLQloZG1pLT5tY19jbGtk
aXMgfD0gSERNSV9NQ19DTEtESVNfQ0VDQ0xLX0RJU0FCTEU7Ci0JaGRtaV93cml0ZWIoaGRtaSwg
aGRtaS0+bWNfY2xrZGlzLCBIRE1JX01DX0NMS0RJUyk7Ci0JbXV0ZXhfdW5sb2NrKCZoZG1pLT5t
dXRleCk7Ci19Ci0KLXN0YXRpYyBjb25zdCBzdHJ1Y3QgZHdfaGRtaV9jZWNfb3BzIGR3X2hkbWlf
Y2VjX29wcyA9IHsKLQkud3JpdGUgPSBoZG1pX3dyaXRlYiwKLQkucmVhZCA9IGhkbWlfcmVhZGIs
Ci0JLmVuYWJsZSA9IGR3X2hkbWlfY2VjX2VuYWJsZSwKLQkuZGlzYWJsZSA9IGR3X2hkbWlfY2Vj
X2Rpc2FibGUsCi19OwotCiBzdGF0aWMgY29uc3Qgc3RydWN0IHJlZ21hcF9jb25maWcgaGRtaV9y
ZWdtYXBfOGJpdF9jb25maWcgPSB7CiAJLnJlZ19iaXRzCT0gMzIsCiAJLnZhbF9iaXRzCT0gOCwK
QEAgLTI0MzgsNyArMjQ2OSw2IEBAIF9fZHdfaGRtaV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2
aWNlICpwZGV2LAogCXN0cnVjdCBkZXZpY2Vfbm9kZSAqbnAgPSBkZXYtPm9mX25vZGU7CiAJc3Ry
dWN0IHBsYXRmb3JtX2RldmljZV9pbmZvIHBkZXZpbmZvOwogCXN0cnVjdCBkZXZpY2Vfbm9kZSAq
ZGRjX25vZGU7Ci0Jc3RydWN0IGR3X2hkbWlfY2VjX2RhdGEgY2VjOwogCXN0cnVjdCBkd19oZG1p
ICpoZG1pOwogCXN0cnVjdCByZXNvdXJjZSAqaW9yZXMgPSBOVUxMOwogCWludCBpcnE7CkBAIC0y
NTg4LDYgKzI2MTgsNyBAQCBfX2R3X2hkbWlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAq
cGRldiwKIAkJcmV0ID0gaXJxOwogCQlnb3RvIGVycl9pYWhiOwogCX0KKwloZG1pLT5pcnEgPSBp
cnE7CiAKIAlyZXQgPSBkZXZtX3JlcXVlc3RfdGhyZWFkZWRfaXJxKGRldiwgaXJxLCBkd19oZG1p
X2hhcmRpcnEsCiAJCQkJCWR3X2hkbWlfaXJxLCBJUlFGX1NIQVJFRCwKQEAgLTI1OTUsMTIgKzI2
MjYsNiBAQCBfX2R3X2hkbWlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiwKIAlp
ZiAocmV0KQogCQlnb3RvIGVycl9pYWhiOwogCi0JaGRtaS0+Y2VjX25vdGlmaWVyID0gY2VjX25v
dGlmaWVyX2dldChkZXYpOwotCWlmICghaGRtaS0+Y2VjX25vdGlmaWVyKSB7Ci0JCXJldCA9IC1F
Tk9NRU07Ci0JCWdvdG8gZXJyX2lhaGI7Ci0JfQotCiAJLyoKIAkgKiBUbyBwcmV2ZW50IG92ZXJm
bG93cyBpbiBIRE1JX0lIX0ZDX1NUQVQyLCBzZXQgdGhlIGNsayByZWdlbmVyYXRvcgogCSAqIE4g
YW5kIGN0cyB2YWx1ZXMgYmVmb3JlIGVuYWJsaW5nIHBoeQpAQCAtMjY2MywxOCArMjY4OCw4IEBA
IF9fZHdfaGRtaV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2LAogCQloZG1pLT5h
dWRpbyA9IHBsYXRmb3JtX2RldmljZV9yZWdpc3Rlcl9mdWxsKCZwZGV2aW5mbyk7CiAJfQogCi0J
aWYgKGNvbmZpZzAgJiBIRE1JX0NPTkZJRzBfQ0VDKSB7Ci0JCWNlYy5oZG1pID0gaGRtaTsKLQkJ
Y2VjLm9wcyA9ICZkd19oZG1pX2NlY19vcHM7Ci0JCWNlYy5pcnEgPSBpcnE7Ci0KLQkJcGRldmlu
Zm8ubmFtZSA9ICJkdy1oZG1pLWNlYyI7Ci0JCXBkZXZpbmZvLmRhdGEgPSAmY2VjOwotCQlwZGV2
aW5mby5zaXplX2RhdGEgPSBzaXplb2YoY2VjKTsKLQkJcGRldmluZm8uZG1hX21hc2sgPSAwOwot
Ci0JCWhkbWktPmNlYyA9IHBsYXRmb3JtX2RldmljZV9yZWdpc3Rlcl9mdWxsKCZwZGV2aW5mbyk7
Ci0JfQorCWlmIChjb25maWcwICYgSERNSV9DT05GSUcwX0NFQykKKwkJaGRtaS0+Y2VjX2NvbmZp
Z3VyZWQgPSB0cnVlOwogCiAJLyogUmVzZXQgSERNSSBEREMgSTJDIG1hc3RlciBjb250cm9sbGVy
IGFuZCBtdXRlIEkyQ00gaW50ZXJydXB0cyAqLwogCWlmIChoZG1pLT5pMmMpCkBAIC0yNjg4LDkg
KzI3MDMsNiBAQCBfX2R3X2hkbWlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiwK
IAkJaGRtaS0+ZGRjID0gTlVMTDsKIAl9CiAKLQlpZiAoaGRtaS0+Y2VjX25vdGlmaWVyKQotCQlj
ZWNfbm90aWZpZXJfcHV0KGhkbWktPmNlY19ub3RpZmllcik7Ci0KIAljbGtfZGlzYWJsZV91bnBy
ZXBhcmUoaGRtaS0+aWFoYl9jbGspOwogCWlmIChoZG1pLT5jZWNfY2xrKQogCQljbGtfZGlzYWJs
ZV91bnByZXBhcmUoaGRtaS0+Y2VjX2Nsayk7CkBAIC0yNzEzLDcgKzI3MjUsNyBAQCBzdGF0aWMg
dm9pZCBfX2R3X2hkbWlfcmVtb3ZlKHN0cnVjdCBkd19oZG1pICpoZG1pKQogCWhkbWlfd3JpdGVi
KGhkbWksIH4wLCBIRE1JX0lIX01VVEVfUEhZX1NUQVQwKTsKIAogCWlmIChoZG1pLT5jZWNfbm90
aWZpZXIpCi0JCWNlY19ub3RpZmllcl9wdXQoaGRtaS0+Y2VjX25vdGlmaWVyKTsKKwkJY2VjX25v
dGlmaWVyX2Nvbm5fdW5yZWdpc3RlcihoZG1pLT5jZWNfbm90aWZpZXIpOwogCiAJY2xrX2Rpc2Fi
bGVfdW5wcmVwYXJlKGhkbWktPmlhaGJfY2xrKTsKIAljbGtfZGlzYWJsZV91bnByZXBhcmUoaGRt
aS0+aXNmcl9jbGspOwotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
