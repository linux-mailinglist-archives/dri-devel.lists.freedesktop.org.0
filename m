Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 13CE58BA57
	for <lists+dri-devel@lfdr.de>; Tue, 13 Aug 2019 15:33:39 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C5E6D6E140;
	Tue, 13 Aug 2019 13:33:34 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9446C6E135
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 13:33:25 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 49168E18;
 Tue, 13 Aug 2019 15:33:21 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v3 6/9] drm/panel: Add driver for the Sharp LS037V7DW01 panel
Date: Tue, 13 Aug 2019 16:33:08 +0300
Message-Id: <20190813133311.26441-7-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190813133311.26441-1-laurent.pinchart@ideasonboard.com>
References: <20190813133311.26441-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1565703201;
 bh=M1LUSN9Pz/w8E6xo4n3ca3HG4u/NI147KhA9tzcORF4=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=OpI55kYAeHHmHOsomu3upMHNWx2/IqKoyS2W7Y9L2UNkBTx7JMb7235u0RDRmoqyL
 6W+oe2EaEla7XETRekWYX0RO7A9eVuFB+z3l2DnIJ80xPjjPb/eUUCqJP06VVGwhMi
 gi434snwSxzYnbsy0eFPic+AQBA5SeZd4reXouCQ=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYW5lbCBpcyB1c2VkIG9uIHRoZSBUSSBTRFAzNDMwIGJvYXJkLgoKVGhlIGNvZGUgaXMg
YmFzZWQgb24gdGhlIG9tYXBkcm0tc3BlY2lmaWMgcGFuZWwtc2hhcnAtbHMwMzd2N2R3MDEKZHJp
dmVyLgoKU2lnbmVkLW9mZi1ieTogTGF1cmVudCBQaW5jaGFydCA8bGF1cmVudC5waW5jaGFydEBp
ZGVhc29uYm9hcmQuY29tPgotLS0KQ2hhbmdlcyBzaW5jZSB2MToKCi0gTWVudGlvbiBib2FyZHMg
dXNpbmcgdGhlIHBhbmVsIGluIEtjb25maWcKLSBSZW5hbWVkIGxzMDM3djdkdzAxX2RldmljZSB0
byBsczAzN3Y3ZHcwMV9wYW5lbAotIFJlbmFtZWQgdmNjIHRvIHZkZAotIENvbW1lbnRzIHVwZGF0
ZXMKLSBTdG9yZSB3aWR0aF9tbSBhbmQgaGVpZ2h0X21tIGluIGRybV9kaXNwbGF5X21vZGUKLSBV
c2UgZHJtX3BhbmVsX2Rpc2FibGUoKSBpbiAucmVtb3ZlKCkgaGFuZGxlcgotIFVzZSBkZXZtX2dw
aW9kX2dldCgpIHdoZXJlIGFwcGxpY2FibGUKLSBSZW1vdmUgTlVMTC1jaGVjayBvbiB2ZGQKLSBP
cmRlciBLY29uZmlnIGVudHJpZXMgYWxwaGFiZXRpY2FsbHkKLS0tCiBkcml2ZXJzL2dwdS9kcm0v
cGFuZWwvS2NvbmZpZyAgICAgICAgICAgICAgICAgfCAgIDcgKwogZHJpdmVycy9ncHUvZHJtL3Bh
bmVsL01ha2VmaWxlICAgICAgICAgICAgICAgIHwgICAxICsKIC4uLi9ncHUvZHJtL3BhbmVsL3Bh
bmVsLXNoYXJwLWxzMDM3djdkdzAxLmMgICB8IDIyNiArKysrKysrKysrKysrKysrKysKIDMgZmls
ZXMgY2hhbmdlZCwgMjM0IGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJz
L2dwdS9kcm0vcGFuZWwvcGFuZWwtc2hhcnAtbHMwMzd2N2R3MDEuYwoKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25m
aWcKaW5kZXggZDI4MTMzYzZhYTBhLi44ZDlhOGNkYjcwNGUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9wYW5lbC9LY29uZmlnCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmln
CkBAIC0yODIsNiArMjgyLDEzIEBAIGNvbmZpZyBEUk1fUEFORUxfU0hBUlBfTFExMDFSMVNYMDEK
IAkgIFRvIGNvbXBpbGUgdGhpcyBkcml2ZXIgYXMgYSBtb2R1bGUsIGNob29zZSBNIGhlcmU6IHRo
ZSBtb2R1bGUKIAkgIHdpbGwgYmUgY2FsbGVkIHBhbmVsLXNoYXJwLWxxMTAxcjFzeDAxLgogCitj
b25maWcgRFJNX1BBTkVMX1NIQVJQX0xTMDM3VjdEVzAxCisJdHJpc3RhdGUgIlNoYXJwIExTMDM3
VjdEVzAxIFZHQSBMQ0QgcGFuZWwiCisJZGVwZW5kcyBvbiBHUElPTElCICYmIE9GICYmIFJFR1VM
QVRPUgorCWhlbHAKKwkgIFNheSBZIGhlcmUgaWYgeW91IHdhbnQgdG8gZW5hYmxlIHN1cHBvcnQg
Zm9yIFNoYXJwIExTMDM3VjdEVzAxIFZHQQorCSAgKDQ4MHg2NDApIExDRCBwYW5lbCAoZm91bmQg
b24gdGhlIFRJIFNEUDM0MzAgYm9hcmQpLgorCiBjb25maWcgRFJNX1BBTkVMX1NIQVJQX0xTMDQz
VDFMRTAxCiAJdHJpc3RhdGUgIlNoYXJwIExTMDQzVDFMRTAxIHFIRCB2aWRlbyBtb2RlIHBhbmVs
IgogCWRlcGVuZHMgb24gT0YKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtl
ZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQppbmRleCA4MDUyZjlhN2FkNjAu
LjE0ZDFjNDllZjNhYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxl
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQpAQCAtMjksNiArMjksNyBAQCBv
YmotJChDT05GSUdfRFJNX1BBTkVMX1NBTVNVTkdfUzZFNjNNMCkgKz0gcGFuZWwtc2Ftc3VuZy1z
NmU2M20wLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfU0FNU1VOR19TNkU4QUEwKSArPSBwYW5l
bC1zYW1zdW5nLXM2ZThhYTAubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9TRUlLT180M1dWRjFH
KSArPSBwYW5lbC1zZWlrby00M3d2ZjFnLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfU0hBUlBf
TFExMDFSMVNYMDEpICs9IHBhbmVsLXNoYXJwLWxxMTAxcjFzeDAxLm8KK29iai0kKENPTkZJR19E
Uk1fUEFORUxfU0hBUlBfTFMwMzdWN0RXMDEpICs9IHBhbmVsLXNoYXJwLWxzMDM3djdkdzAxLm8K
IG9iai0kKENPTkZJR19EUk1fUEFORUxfU0hBUlBfTFMwNDNUMUxFMDEpICs9IHBhbmVsLXNoYXJw
LWxzMDQzdDFsZTAxLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfU0lUUk9OSVhfU1Q3NzAxKSAr
PSBwYW5lbC1zaXRyb25peC1zdDc3MDEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9TSVRST05J
WF9TVDc3ODlWKSArPSBwYW5lbC1zaXRyb25peC1zdDc3ODl2Lm8KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1zaGFycC1sczAzN3Y3ZHcwMS5jIGIvZHJpdmVycy9ncHUv
ZHJtL3BhbmVsL3BhbmVsLXNoYXJwLWxzMDM3djdkdzAxLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQK
aW5kZXggMDAwMDAwMDAwMDAwLi4yYWFlYTUwN2NjMWYKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2
ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtc2hhcnAtbHMwMzd2N2R3MDEuYwpAQCAtMCwwICsxLDIy
NiBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKKy8qCisgKiBTaGFycCBM
UzAzN1Y3RFcwMSBMQ0QgUGFuZWwgRHJpdmVyCisgKgorICogQ29weXJpZ2h0IChDKSAyMDE5IFRl
eGFzIEluc3RydW1lbnRzIEluY29ycG9yYXRlZAorICoKKyAqIEJhc2VkIG9uIHRoZSBvbWFwZHJt
LXNwZWNpZmljIHBhbmVsLXNoYXJwLWxzMDM3djdkdzAxIGRyaXZlcgorICoKKyAqIENvcHlyaWdo
dCAoQykgMjAxMyBUZXhhcyBJbnN0cnVtZW50cyBJbmNvcnBvcmF0ZWQKKyAqIEF1dGhvcjogVG9t
aSBWYWxrZWluZW4gPHRvbWkudmFsa2VpbmVuQHRpLmNvbT4KKyAqLworCisjaW5jbHVkZSA8bGlu
dXgvZGVsYXkuaD4KKyNpbmNsdWRlIDxsaW51eC9ncGlvL2NvbnN1bWVyLmg+CisjaW5jbHVkZSA8
bGludXgvbW9kdWxlLmg+CisjaW5jbHVkZSA8bGludXgvb2YuaD4KKyNpbmNsdWRlIDxsaW51eC9w
bGF0Zm9ybV9kZXZpY2UuaD4KKyNpbmNsdWRlIDxsaW51eC9yZWd1bGF0b3IvY29uc3VtZXIuaD4K
KworI2luY2x1ZGUgPGRybS9kcm1fY29ubmVjdG9yLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9tb2Rl
cy5oPgorI2luY2x1ZGUgPGRybS9kcm1fcGFuZWwuaD4KKworc3RydWN0IGxzMDM3djdkdzAxX3Bh
bmVsIHsKKwlzdHJ1Y3QgZHJtX3BhbmVsIHBhbmVsOworCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2Ug
KnBkZXY7CisKKwlzdHJ1Y3QgcmVndWxhdG9yICp2ZGQ7CisJc3RydWN0IGdwaW9fZGVzYyAqcmVz
Yl9ncGlvOwkvKiBsb3cgPSByZXNldCBhY3RpdmUgbWluIDIwIHVzICovCisJc3RydWN0IGdwaW9f
ZGVzYyAqaW5pX2dwaW87CS8qIGhpZ2ggPSBwb3dlciBvbiAqLworCXN0cnVjdCBncGlvX2Rlc2Mg
Km1vX2dwaW87CS8qIGxvdyA9IDQ4MHg2NDAsIGhpZ2ggPSAyNDB4MzIwICovCisJc3RydWN0IGdw
aW9fZGVzYyAqbHJfZ3BpbzsJLyogaGlnaCA9IGNvbnZlbnRpb25hbCBob3Jpem9udGFsIHNjYW5u
aW5nICovCisJc3RydWN0IGdwaW9fZGVzYyAqdWRfZ3BpbzsJLyogaGlnaCA9IGNvbnZlbnRpb25h
bCB2ZXJ0aWNhbCBzY2FubmluZyAqLworfTsKKworI2RlZmluZSB0b19sczAzN3Y3ZHcwMV9kZXZp
Y2UocCkgXAorCWNvbnRhaW5lcl9vZihwLCBzdHJ1Y3QgbHMwMzd2N2R3MDFfcGFuZWwsIHBhbmVs
KQorCitzdGF0aWMgaW50IGxzMDM3djdkdzAxX2Rpc2FibGUoc3RydWN0IGRybV9wYW5lbCAqcGFu
ZWwpCit7CisJc3RydWN0IGxzMDM3djdkdzAxX3BhbmVsICpsY2QgPSB0b19sczAzN3Y3ZHcwMV9k
ZXZpY2UocGFuZWwpOworCisJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGxjZC0+aW5pX2dwaW8s
IDApOworCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChsY2QtPnJlc2JfZ3BpbywgMCk7CisKKwkv
KiBXYWl0IGF0IGxlYXN0IDUgdnN5bmNzIGFmdGVyIGRpc2FibGluZyB0aGUgTENELiAqLworCW1z
bGVlcCgxMDApOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbHMwMzd2N2R3MDFfdW5w
cmVwYXJlKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCBsczAzN3Y3ZHcwMV9w
YW5lbCAqbGNkID0gdG9fbHMwMzd2N2R3MDFfZGV2aWNlKHBhbmVsKTsKKworCXJlZ3VsYXRvcl9k
aXNhYmxlKGxjZC0+dmRkKTsKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBsczAzN3Y3ZHcw
MV9wcmVwYXJlKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCBsczAzN3Y3ZHcw
MV9wYW5lbCAqbGNkID0gdG9fbHMwMzd2N2R3MDFfZGV2aWNlKHBhbmVsKTsKKwlpbnQgcmV0Owor
CisJcmV0ID0gcmVndWxhdG9yX2VuYWJsZShsY2QtPnZkZCk7CisJaWYgKHJldCA8IDApCisJCWRl
dl9lcnIoJmxjZC0+cGRldi0+ZGV2LCAiJXM6IGZhaWxlZCB0byBlbmFibGUgcmVndWxhdG9yXG4i
LAorCQkJX19mdW5jX18pOworCisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCBsczAzN3Y3
ZHcwMV9lbmFibGUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJc3RydWN0IGxzMDM3djdk
dzAxX3BhbmVsICpsY2QgPSB0b19sczAzN3Y3ZHcwMV9kZXZpY2UocGFuZWwpOworCisJLyogV2Fp
dCBjb3VwbGUgb2YgdnN5bmNzIGJlZm9yZSBlbmFibGluZyB0aGUgTENELiAqLworCW1zbGVlcCg1
MCk7CisKKwlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAobGNkLT5yZXNiX2dwaW8sIDEpOworCWdw
aW9kX3NldF92YWx1ZV9jYW5zbGVlcChsY2QtPmluaV9ncGlvLCAxKTsKKworCXJldHVybiAwOwor
fQorCitzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgbHMwMzd2N2R3MDFfbW9k
ZSA9IHsKKwkuY2xvY2sgPSAxOTIwMCwKKwkuaGRpc3BsYXkgPSA0ODAsCisJLmhzeW5jX3N0YXJ0
ID0gNDgwICsgMSwKKwkuaHN5bmNfZW5kID0gNDgwICsgMSArIDIsCisJLmh0b3RhbCA9IDQ4MCAr
IDEgKyAyICsgMjgsCisJLnZkaXNwbGF5ID0gNjQwLAorCS52c3luY19zdGFydCA9IDY0MCArIDEs
CisJLnZzeW5jX2VuZCA9IDY0MCArIDEgKyAxLAorCS52dG90YWwgPSA2NDAgKyAxICsgMSArIDEs
CisJLnZyZWZyZXNoID0gNTgsCisJLnR5cGUgPSBEUk1fTU9ERV9UWVBFX0RSSVZFUiB8IERSTV9N
T0RFX1RZUEVfUFJFRkVSUkVELAorCS5mbGFncyA9IERSTV9NT0RFX0ZMQUdfTkhTWU5DIHwgRFJN
X01PREVfRkxBR19OVlNZTkMsCisJLndpZHRoX21tID0gNTYsCisJLmhlaWdodF9tbSA9IDc1LAor
fTsKKworc3RhdGljIGludCBsczAzN3Y3ZHcwMV9nZXRfbW9kZXMoc3RydWN0IGRybV9wYW5lbCAq
cGFuZWwpCit7CisJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciA9IHBhbmVsLT5jb25u
ZWN0b3I7CisJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGU7CisKKwltb2RlID0gZHJtX21v
ZGVfZHVwbGljYXRlKHBhbmVsLT5kcm0sICZsczAzN3Y3ZHcwMV9tb2RlKTsKKwlpZiAoIW1vZGUp
CisJCXJldHVybiAtRU5PTUVNOworCisJZHJtX21vZGVfc2V0X25hbWUobW9kZSk7CisJZHJtX21v
ZGVfcHJvYmVkX2FkZChjb25uZWN0b3IsIG1vZGUpOworCisJY29ubmVjdG9yLT5kaXNwbGF5X2lu
Zm8ud2lkdGhfbW0gPSBsczAzN3Y3ZHcwMV9tb2RlLndpZHRoX21tOworCWNvbm5lY3Rvci0+ZGlz
cGxheV9pbmZvLmhlaWdodF9tbSA9IGxzMDM3djdkdzAxX21vZGUuaGVpZ2h0X21tOworCS8qCisJ
ICogRklYTUU6IEFjY29yZGluZyB0byB0aGUgZGF0YXNoZWV0IHBpeGVsIGRhdGEgaXMgc2FtcGxl
ZCBvbiB0aGUKKwkgKiByaXNpbmcgZWRnZSBvZiB0aGUgY2xvY2ssIGJ1dCB0aGUgY29kZSBydW5u
aW5nIG9uIHRoZSBTRFAzNDMwCisJICogaW5kaWNhdGVzIHNhbXBsaW5nIG9uIHRoZSBuZWdhdGl2
ZSBlZGdlLiBUaGlzIHNob3VsZCBiZSB0ZXN0ZWQgb24gYQorCSAqIHJlYWwgZGV2aWNlLgorCSAq
LworCWNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLmJ1c19mbGFncyA9IERSTV9CVVNfRkxBR19ERV9I
SUdICisJCQkJCSAgfCBEUk1fQlVTX0ZMQUdfU1lOQ19TQU1QTEVfUE9TRURHRQorCQkJCQkgIHwg
RFJNX0JVU19GTEFHX1BJWERBVEFfU0FNUExFX05FR0VER0U7CisKKwlyZXR1cm4gMTsKK30KKwor
c3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcGFuZWxfZnVuY3MgbHMwMzd2N2R3MDFfZnVuY3MgPSB7
CisJLmRpc2FibGUgPSBsczAzN3Y3ZHcwMV9kaXNhYmxlLAorCS51bnByZXBhcmUgPSBsczAzN3Y3
ZHcwMV91bnByZXBhcmUsCisJLnByZXBhcmUgPSBsczAzN3Y3ZHcwMV9wcmVwYXJlLAorCS5lbmFi
bGUgPSBsczAzN3Y3ZHcwMV9lbmFibGUsCisJLmdldF9tb2RlcyA9IGxzMDM3djdkdzAxX2dldF9t
b2RlcywKK307CisKK3N0YXRpYyBpbnQgbHMwMzd2N2R3MDFfcHJvYmUoc3RydWN0IHBsYXRmb3Jt
X2RldmljZSAqcGRldikKK3sKKwlzdHJ1Y3QgbHMwMzd2N2R3MDFfcGFuZWwgKmxjZDsKKworCWxj
ZCA9IGRldm1fa3phbGxvYygmcGRldi0+ZGV2LCBzaXplb2YoKmxjZCksIEdGUF9LRVJORUwpOwor
CWlmIChsY2QgPT0gTlVMTCkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlwbGF0Zm9ybV9zZXRfZHJ2
ZGF0YShwZGV2LCBsY2QpOworCWxjZC0+cGRldiA9IHBkZXY7CisKKwlsY2QtPnZkZCA9IGRldm1f
cmVndWxhdG9yX2dldCgmcGRldi0+ZGV2LCAiZW52ZGQiKTsKKwlpZiAoSVNfRVJSKGxjZC0+dmRk
KSkgeworCQlkZXZfZXJyKCZwZGV2LT5kZXYsICJmYWlsZWQgdG8gZ2V0IHJlZ3VsYXRvclxuIik7
CisJCXJldHVybiBQVFJfRVJSKGxjZC0+dmRkKTsKKwl9CisKKwlsY2QtPmluaV9ncGlvID0gZGV2
bV9ncGlvZF9nZXQoJnBkZXYtPmRldiwgImVuYWJsZSIsIEdQSU9EX09VVF9MT1cpOworCWlmIChJ
U19FUlIobGNkLT5pbmlfZ3BpbykpIHsKKwkJZGV2X2VycigmcGRldi0+ZGV2LCAiZmFpbGVkIHRv
IGdldCBlbmFibGUgZ3Bpb1xuIik7CisJCXJldHVybiBQVFJfRVJSKGxjZC0+aW5pX2dwaW8pOwor
CX0KKworCWxjZC0+cmVzYl9ncGlvID0gZGV2bV9ncGlvZF9nZXQoJnBkZXYtPmRldiwgInJlc2V0
IiwgR1BJT0RfT1VUX0xPVyk7CisJaWYgKElTX0VSUihsY2QtPnJlc2JfZ3BpbykpIHsKKwkJZGV2
X2VycigmcGRldi0+ZGV2LCAiZmFpbGVkIHRvIGdldCByZXNldCBncGlvXG4iKTsKKwkJcmV0dXJu
IFBUUl9FUlIobGNkLT5yZXNiX2dwaW8pOworCX0KKworCWxjZC0+bW9fZ3BpbyA9IGRldm1fZ3Bp
b2RfZ2V0X2luZGV4KCZwZGV2LT5kZXYsICJtb2RlIiwgMCwKKwkJCQkJICAgIEdQSU9EX09VVF9M
T1cpOworCWlmIChJU19FUlIobGNkLT5tb19ncGlvKSkgeworCQlkZXZfZXJyKCZwZGV2LT5kZXYs
ICJmYWlsZWQgdG8gZ2V0IG1vZGVbMF0gZ3Bpb1xuIik7CisJCXJldHVybiBQVFJfRVJSKGxjZC0+
bW9fZ3Bpbyk7CisJfQorCisJbGNkLT5scl9ncGlvID0gZGV2bV9ncGlvZF9nZXRfaW5kZXgoJnBk
ZXYtPmRldiwgIm1vZGUiLCAxLAorCQkJCQkgICAgR1BJT0RfT1VUX0xPVyk7CisJaWYgKElTX0VS
UihsY2QtPmxyX2dwaW8pKSB7CisJCWRldl9lcnIoJnBkZXYtPmRldiwgImZhaWxlZCB0byBnZXQg
bW9kZVsxXSBncGlvXG4iKTsKKwkJcmV0dXJuIFBUUl9FUlIobGNkLT5scl9ncGlvKTsKKwl9CisK
KwlsY2QtPnVkX2dwaW8gPSBkZXZtX2dwaW9kX2dldF9pbmRleCgmcGRldi0+ZGV2LCAibW9kZSIs
IDIsCisJCQkJCSAgICBHUElPRF9PVVRfTE9XKTsKKwlpZiAoSVNfRVJSKGxjZC0+dWRfZ3Bpbykp
IHsKKwkJZGV2X2VycigmcGRldi0+ZGV2LCAiZmFpbGVkIHRvIGdldCBtb2RlWzJdIGdwaW9cbiIp
OworCQlyZXR1cm4gUFRSX0VSUihsY2QtPnVkX2dwaW8pOworCX0KKworCWRybV9wYW5lbF9pbml0
KCZsY2QtPnBhbmVsKTsKKwlsY2QtPnBhbmVsLmRldiA9ICZwZGV2LT5kZXY7CisJbGNkLT5wYW5l
bC5mdW5jcyA9ICZsczAzN3Y3ZHcwMV9mdW5jczsKKworCXJldHVybiBkcm1fcGFuZWxfYWRkKCZs
Y2QtPnBhbmVsKTsKK30KKworc3RhdGljIGludCBsczAzN3Y3ZHcwMV9yZW1vdmUoc3RydWN0IHBs
YXRmb3JtX2RldmljZSAqcGRldikKK3sKKwlzdHJ1Y3QgbHMwMzd2N2R3MDFfcGFuZWwgKmxjZCA9
IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOworCisJZHJtX3BhbmVsX3JlbW92ZSgmbGNkLT5w
YW5lbCk7CisJZHJtX3BhbmVsX2Rpc2FibGUoJmxjZC0+cGFuZWwpOworCWRybV9wYW5lbF91bnBy
ZXBhcmUoJmxjZC0+cGFuZWwpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1
Y3Qgb2ZfZGV2aWNlX2lkIGxzMDM3djdkdzAxX29mX21hdGNoW10gPSB7CisJeyAuY29tcGF0aWJs
ZSA9ICJzaGFycCxsczAzN3Y3ZHcwMSIsIH0sCisJeyAvKiBzZW50aW5lbCAqLyB9LAorfTsKKwor
TU9EVUxFX0RFVklDRV9UQUJMRShvZiwgbHMwMzd2N2R3MDFfb2ZfbWF0Y2gpOworCitzdGF0aWMg
c3RydWN0IHBsYXRmb3JtX2RyaXZlciBsczAzN3Y3ZHcwMV9kcml2ZXIgPSB7CisJLnByb2JlCQk9
IGxzMDM3djdkdzAxX3Byb2JlLAorCS5yZW1vdmUJCT0gX19leGl0X3AobHMwMzd2N2R3MDFfcmVt
b3ZlKSwKKwkuZHJpdmVyCQk9IHsKKwkJLm5hbWUgPSAicGFuZWwtc2hhcnAtbHMwMzd2N2R3MDEi
LAorCQkub2ZfbWF0Y2hfdGFibGUgPSBsczAzN3Y3ZHcwMV9vZl9tYXRjaCwKKwl9LAorfTsKKwor
bW9kdWxlX3BsYXRmb3JtX2RyaXZlcihsczAzN3Y3ZHcwMV9kcml2ZXIpOworCitNT0RVTEVfQVVU
SE9SKCJUb21pIFZhbGtlaW5lbiA8dG9taS52YWxrZWluZW5AdGkuY29tPiIpOworTU9EVUxFX0RF
U0NSSVBUSU9OKCJTaGFycCBMUzAzN1Y3RFcwMSBQYW5lbCBEcml2ZXIiKTsKK01PRFVMRV9MSUNF
TlNFKCJHUEwiKTsKLS0gClJlZ2FyZHMsCgpMYXVyZW50IFBpbmNoYXJ0CgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0
CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
