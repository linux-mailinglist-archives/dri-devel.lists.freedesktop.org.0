Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 779B645D36
	for <lists+dri-devel@lfdr.de>; Fri, 14 Jun 2019 14:56:51 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9199A892B6;
	Fri, 14 Jun 2019 12:56:48 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bombadil.infradead.org (bombadil.infradead.org
 [IPv6:2607:7c80:54:e::133])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0BD71892B6;
 Fri, 14 Jun 2019 12:56:47 +0000 (UTC)
Received: from j217100.upc-j.chello.nl ([24.132.217.100]
 helo=hirez.programming.kicks-ass.net)
 by bombadil.infradead.org with esmtpsa (Exim 4.92 #3 (Red Hat Linux))
 id 1hbll5-0004yM-1S; Fri, 14 Jun 2019 12:56:43 +0000
Received: by hirez.programming.kicks-ass.net (Postfix, from userid 1000)
 id 60A052013F73F; Fri, 14 Jun 2019 14:56:41 +0200 (CEST)
Date: Fri, 14 Jun 2019 14:56:41 +0200
From: Peter Zijlstra <peterz@infradead.org>
To: Christian =?iso-8859-1?Q?K=F6nig?= <ckoenig.leichtzumerken@gmail.com>
Subject: Re: [PATCH 1/6] locking: add ww_mutex_(un)lock_for_each helpers
Message-ID: <20190614125641.GO3436@hirez.programming.kicks-ass.net>
References: <20190614124125.124181-1-christian.koenig@amd.com>
 <20190614124125.124181-2-christian.koenig@amd.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190614124125.124181-2-christian.koenig@amd.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt;
 c=relaxed/relaxed; 
 d=infradead.org; s=bombadil.20170209; h=In-Reply-To:Content-Transfer-Encoding
 :Content-Type:MIME-Version:References:Message-ID:Subject:Cc:To:From:Date:
 Sender:Reply-To:Content-ID:Content-Description:Resent-Date:Resent-From:
 Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:
 List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=75ZK6uA+v8HWBuHLrrBEBKQG77OfYldSM/de/8si5No=; b=COXfg54UV0gR017XZ9SWUN/fNL
 9LgmRy/npcTpGelXHuFq9mYwJlBP9dWYq0TAZC9dYFPnuXBjrhTjMN3UhqNrt4t5+vO42K6cgmbgK
 o9ilSXIeCLsRBDCN1k0LaTHKZ0oriFE9AoHYXBaohI7UxbHGv+RvGCsOsfTVu9LZJBkmwByPK7y0m
 FYCAQn2lJXLCYWsX1bTf+sghfrFoIGVMMBhkcN96v70+biGd6vZqxPk+EvDUT4Yd5A4LrQfFBQF34
 OsHwCPwFL12WAguOwyUePNc1PjfaMoBpjREg/76wzpfwN5TG3/ShRM4lnCJ5E5bp206H57Z6eLBPs
 XXG1lOgQ==;
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: thellstrom@vmware.com, lima@lists.freedesktop.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 etnaviv@lists.freedesktop.org, yuq825@gmail.com, linux+etnaviv@armlinux.org.uk
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBKdW4gMTQsIDIwMTkgYXQgMDI6NDE6MjBQTSArMDIwMCwgQ2hyaXN0aWFuIEvDtm5p
ZyB3cm90ZToKPiBUaGUgd3dfbXV0ZXggaW1wbGVtZW50YXRpb24gYWxsb3dzIGZvciBkZXRlY3Rp
b24gZGVhZGxvY2tzIHdoZW4gbXVsdGlwbGUKPiB0aHJlYWRzIHRyeSB0byBhY3F1aXJlIHRoZSBz
YW1lIHNldCBvZiBsb2NrcyBpbiBkaWZmZXJlbnQgb3JkZXIuCj4gCj4gVGhlIHByb2JsZW0gaXMg
dGhhdCBoYW5kbGluZyB0aG9zZSBkZWFkbG9ja3Mgd2FzIHRoZSBidXJkZW4gb2YgdGhlIHVzZXIg
b2YKPiB0aGUgd3dfbXV0ZXggaW1wbGVtZW50YXRpb24gYW5kIGF0IGxlYXN0IHNvbWUgdXNlcnMg
ZGlkbid0IGdvdCB0aGF0IHJpZ2h0Cj4gb24gdGhlIGZpcnN0IHRyeS4KPiAKPiBJJ20gbm90IGEg
YmlnIGZhbiBvZiBtYWNyb3MsIGJ1dCBpdCBzdGlsbCBiZXR0ZXIgdGhlbiBpbXBsZW1lbnRpbmcg
dGhlIHNhbWUKPiBsb2dpYyBhdCBsZWFzdCBoYWx2ZSBhIGRvemVuIHRpbWVzLiBTbyB0aGlzIHBh
dGNoIGFkZHMgdHdvIG1hY3JvcyB0byBsb2NrCj4gYW5kIHVubG9jayBtdWx0aXBsZSB3d19tdXRl
eCBpbnN0YW5jZXMgd2l0aCB0aGUgbmVjZXNzYXJ5IGRlYWRsb2NrIGhhbmRsaW5nLgo+IAo+IFNp
Z25lZC1vZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4K
PiAtLS0KPiAgaW5jbHVkZS9saW51eC93d19tdXRleC5oIHwgNzUgKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKwo+ICAxIGZpbGUgY2hhbmdlZCwgNzUgaW5zZXJ0aW9ucygr
KQo+IAo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L3d3X211dGV4LmggYi9pbmNsdWRlL2xp
bnV4L3d3X211dGV4LmgKPiBpbmRleCAzYWY3YzBlMDNiZTUuLmEwZDg5M2I1YjExNCAxMDA2NDQK
PiAtLS0gYS9pbmNsdWRlL2xpbnV4L3d3X211dGV4LmgKPiArKysgYi9pbmNsdWRlL2xpbnV4L3d3
X211dGV4LmgKPiBAQCAtMzY5LDQgKzM2OSw3OSBAQCBzdGF0aWMgaW5saW5lIGJvb2wgd3dfbXV0
ZXhfaXNfbG9ja2VkKHN0cnVjdCB3d19tdXRleCAqbG9jaykKPiAgCXJldHVybiBtdXRleF9pc19s
b2NrZWQoJmxvY2stPmJhc2UpOwo+ICB9Cj4gIAo+ICsvKioKPiArICogd3dfbXV0ZXhfdW5sb2Nr
X2Zvcl9lYWNoIC0gY2xlYW51cCBhZnRlciBlcnJvciBvciBjb250ZW50aW9uCj4gKyAqIEBsb29w
OiBmb3IgbG9vcCBjb2RlIGZyYWdtZW50IGl0ZXJhdGluZyBvdmVyIGFsbCB0aGUgbG9ja3MKPiAr
ICogQHBvczogY29kZSBmcmFnbWVudCByZXR1cm5pbmcgdGhlIGN1cnJlbnRseSBoYW5kbGVkIGxv
Y2sKPiArICogQGNvbnRlbmRlZDogdGhlIGxhc3QgY29udGVuZGVkIHd3X211dGV4IG9yIE5VTEwg
b3IgRVJSX1BUUgo+ICsgKgo+ICsgKiBIZWxwZXIgdG8gbWFrZSBjbGVhbnVwIGFmdGVyIGVycm9y
IG9yIGxvY2sgY29udGVudGlvbiBlYXNpZXIuCj4gKyAqIEZpcnN0IHVubG9jayB0aGUgbGFzdCBj
b250ZW5kZWQgbG9jayBhbmQgdGhlbiBhbGwgb3RoZXIgbG9ja2VkIG9uZXMuCj4gKyAqLwo+ICsj
ZGVmaW5lIHd3X211dGV4X3VubG9ja19mb3JfZWFjaChsb29wLCBwb3MsIGNvbnRlbmRlZCkJXAo+
ICsJaWYgKCFJU19FUlIoY29udGVuZGVkKSkgewkJCVwKPiArCQlpZiAoY29udGVuZGVkKQkJCQlc
Cj4gKwkJCXd3X211dGV4X3VubG9jayhjb250ZW5kZWQpOwlcCj4gKwkJY29udGVuZGVkID0gKHBv
cyk7CQkJXAo+ICsJCWxvb3AgewkJCQkJXAo+ICsJCQlpZiAoY29udGVuZGVkID09IChwb3MpKQkJ
XAo+ICsJCQkJYnJlYWs7CQkJXAo+ICsJCQl3d19tdXRleF91bmxvY2socG9zKTsJCVwKPiArCQl9
CQkJCQlcCj4gKwl9Cj4gKwo+ICsvKioKPiArICogd3dfbXV0ZXhfbG9ja19mb3JfZWFjaCAtIGlt
cGxlbWVudCB3d19tdXRleCBkZWFkbG9jayBoYW5kbGluZwo+ICsgKiBAbG9vcDogZm9yIGxvb3Ag
Y29kZSBmcmFnbWVudCBpdGVyYXRpbmcgb3ZlciBhbGwgdGhlIGxvY2tzCj4gKyAqIEBwb3M6IGNv
ZGUgZnJhZ21lbnQgcmV0dXJuaW5nIHRoZSBjdXJyZW50bHkgaGFuZGxlZCBsb2NrCj4gKyAqIEBj
b250ZW5kZWQ6IHd3X211dGV4IHBvaW50ZXIgdmFyaWFibGUgZm9yIHN0YXRlIGhhbmRsaW5nCj4g
KyAqIEByZXQ6IGludCB2YXJpYWJsZSB0byBzdG9yZSB0aGUgcmV0dXJuIHZhbHVlIG9mIHd3X211
dGV4X2xvY2soKQo+ICsgKiBAaW50cjogSWYgdHJ1ZSB3d19tdXRleF9sb2NrX2ludGVycnVwdGli
bGUoKSBpcyB1c2VkCj4gKyAqIEBjdHg6IHd3X2FjcXVpcmVfY3R4IHBvaW50ZXIgZm9yIHRoZSBs
b2NraW5nCj4gKyAqCj4gKyAqIFRoaXMgbWFjcm8gaW1wbGVtZW50cyB0aGUgbmVjZXNzYXJ5IGxv
Z2ljIHRvIGxvY2sgbXVsdGlwbGUgd3dfbXV0ZXgKPiArICogaW5zdGFuY2VzLiBMb2NrIGNvbnRl
bnRpb24gd2l0aCBiYWNrb2ZmIGFuZCByZS1sb2NraW5nIGlzIGhhbmRsZWQgYnkgdGhlCj4gKyAq
IG1hY3JvIHNvIHRoYXQgdGhlIGxvb3AgYm9keSBvbmx5IG5lZWQgdG8gaGFuZGxlIG90aGVyIGVy
cm9ycyBhbmQKPiArICogc3VjY2Vzc2Z1bGx5IGFjcXVpcmVkIGxvY2tzLgo+ICsgKgo+ICsgKiBX
aXRoIHRoZSBAbG9vcCBhbmQgQHBvcyBjb2RlIGZyYWdtZW50IGl0IGlzIHBvc3NpYmxlIHRvIGFw
cGx5IHRoaXMgbG9naWMKPiArICogdG8gYWxsIGtpbmQgb2YgY29udGFpbmVycyAoYXJyYXksIGxp
c3QsIHRyZWUsIGV0Yy4uLikgaG9sZGluZyBtdWx0aXBsZQo+ICsgKiB3d19tdXRleCBpbnN0YW5j
ZXMuCj4gKyAqCj4gKyAqIEBjb250ZW5kZWQgaXMgdXNlZCB0byBob2xkIHRoZSBjdXJyZW50IHN0
YXRlIHdlIGFyZSBpbi4gLUVOT0VOVCBpcyB1c2VkIHRvCj4gKyAqIHNpZ25hbCB0aGF0IHdlIGFy
ZSBqdXN0IHN0YXJ0aW5nIHRoZSBoYW5kbGluZy4gLUVERUFETEsgbWVhbnMgdGhhdCB0aGUKPiAr
ICogY3VycmVudCBwb3NpdGlvbiBpcyBjb250ZW5kZWQgYW5kIHdlIG5lZWQgdG8gcmVzdGFydCB0
aGUgbG9vcCBhZnRlciBsb2NraW5nCj4gKyAqIGl0LiBOVUxMIG1lYW5zIHRoYXQgdGhlcmUgaXMg
bm8gY29udGVudGlvbiB0byBiZSBoYW5kbGVkLiBBbnkgb3RoZXIgdmFsdWUgaXMKPiArICogdGhl
IGxhc3QgY29udGVuZGVkIHd3X211dGV4Lgo+ICsgKi8KPiArI2RlZmluZSB3d19tdXRleF9sb2Nr
X2Zvcl9lYWNoKGxvb3AsIHBvcywgY29udGVuZGVkLCByZXQsIGludHIsIGN0eCkJXAo+ICsJZm9y
IChjb250ZW5kZWQgPSBFUlJfUFRSKC1FTk9FTlQpOyAoewkJCQlcCj4gKwkJX19sYWJlbF9fIHJl
bG9jaywgbmV4dDsJCQkJCVwKPiArCQlyZXQgPSAtRU5PRU5UOwkJCQkJCVwKPiArCQlpZiAoY29u
dGVuZGVkID09IEVSUl9QVFIoLUVOT0VOVCkpCQkJXAo+ICsJCQljb250ZW5kZWQgPSBOVUxMOwkJ
CQlcCj4gKwkJZWxzZSBpZiAoY29udGVuZGVkID09IEVSUl9QVFIoLUVERUFETEspKQkJXAo+ICsJ
CQljb250ZW5kZWQgPSAocG9zKTsJCQkJXAo+ICsJCWVsc2UJCQkJCQkJXAo+ICsJCQlnb3RvIG5l
eHQ7CQkJCQlcCj4gKwkJbG9vcCB7CQkJCQkJCVwKPiArCQkJaWYgKGNvbnRlbmRlZCA9PSAocG9z
KSkJewkJCVwKPiArCQkJCWNvbnRlbmRlZCA9IE5VTEw7CQkJXAo+ICsJCQkJY29udGludWU7CQkJ
CVwKPiArCQkJfQkJCQkJCVwKPiArcmVsb2NrOgkJCQkJCQkJCVwKPiArCQkJcmV0ID0gIShpbnRy
KSA/IHd3X211dGV4X2xvY2socG9zLCBjdHgpIDoJXAo+ICsJCQkJd3dfbXV0ZXhfbG9ja19pbnRl
cnJ1cHRpYmxlKHBvcywgY3R4KTsJXAo+ICsJCQlpZiAocmV0ID09IC1FREVBRExLKSB7CQkJCVwK
PiArCQkJCXd3X211dGV4X3VubG9ja19mb3JfZWFjaChsb29wLCBwb3MsCVwKPiArCQkJCQkJCSBj
b250ZW5kZWQpOwlcCj4gKwkJCQljb250ZW5kZWQgPSBFUlJfUFRSKC1FREVBRExLKTsJCVwKPiAr
CQkJCWdvdG8gcmVsb2NrOwkJCQlcCj4gKwkJCX0JCQkJCQlcCj4gKwkJCWJyZWFrOwkJCQkJCVwK
PiArbmV4dDoJCQkJCQkJCQlcCj4gKwkJCWNvbnRpbnVlOwkJCQkJXAo+ICsJCX0JCQkJCQkJXAo+
ICsJfSksIHJldCAhPSAtRU5PRU5UOykKPiArCgpZZWEgZ2F3ZHMsIHRoYXQncyBleWVibGVlZGlu
ZyBiYWQsIGV2ZW4gZm9yIG1hY3JvcyA6LwoKSXQgYWxzbyBicmVha3Mgd2l0aCBwcmV0dHkgbXVj
aCBhbGwgb3RoZXIgKmZvcl9lYWNoKigpIG1hY3JvcyBpbgpleGlzdGVuY2UgYnkgbm90IGFjdHVh
bGx5IGluY2x1ZGluZyB0aGUgbG9vcCBpdHNlbGYgYnV0IGZhcm1pbmcgdGhhdCBvdXQKdG8gYW4g
YXJndW1lbnQgc3RhdGVtZW50IChAbG9vcCksIHN1Z2dlc3RpbmcgdGhlc2UgcmVhbGx5IHNob3Vs
ZCBub3QgYmUKY2FsbGVkIGZvcl9lYWNoLgoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2RyaS1kZXZlbA==
