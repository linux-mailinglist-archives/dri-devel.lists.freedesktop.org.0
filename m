Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 22B06FF91E
	for <lists+dri-devel@lfdr.de>; Sun, 17 Nov 2019 12:46:14 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 16EE36E359;
	Sun, 17 Nov 2019 11:45:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1B3256E1F2
 for <dri-devel@lists.freedesktop.org>; Sun, 17 Nov 2019 02:41:50 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1]) (Authenticated sender: sre)
 with ESMTPSA id 9C92E28F764
Received: by earth.universe (Postfix, from userid 1000)
 id AEDDB3C0C80; Sun, 17 Nov 2019 03:41:39 +0100 (CET)
From: Sebastian Reichel <sebastian.reichel@collabora.com>
To: Sebastian Reichel <sre@kernel.org>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>
Subject: [RFCv1 08/42] drm/omap: dsi: simplify write function
Date: Sun, 17 Nov 2019 03:39:54 +0100
Message-Id: <20191117024028.2233-9-sebastian.reichel@collabora.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191117024028.2233-1-sebastian.reichel@collabora.com>
References: <20191117024028.2233-1-sebastian.reichel@collabora.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Sun, 17 Nov 2019 11:44:18 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: kernel@collabora.com, Tony Lindgren <tony@atomide.com>,
 "H. Nikolaus Schaller" <hns@goldelico.com>, Merlijn Wajer <merlijn@wizzup.org>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 dri-devel@lists.freedesktop.org, linux-omap@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

U2ltcGxpZnkgdGhlIHdyaXRlIHJlbGF0ZWQgbWVzc2FnZXMgaGFuZGxpbmcgYnkgdXNpbmcgdGhl
IGZ1bmN0aW9uYWxpdHkKcHJvdmlkZWQgYnkgQ09ORklHX0RSTV9NSVBJX0RTSS4KClNpZ25lZC1v
ZmYtYnk6IFNlYmFzdGlhbiBSZWljaGVsIDxzZWJhc3RpYW4ucmVpY2hlbEBjb2xsYWJvcmEuY29t
PgotLS0KIGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9LY29uZmlnIHwgICAxICsKIGRyaXZl
cnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9kc2kuYyAgIHwgMTQ0ICsrKysrKystLS0tLS0tLS0tLS0t
LS0tLS0tLS0KIDIgZmlsZXMgY2hhbmdlZCwgMzMgaW5zZXJ0aW9ucygrKSwgMTEyIGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9LY29uZmlnIGIv
ZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL0tjb25maWcKaW5kZXggOTU2ZjIzZTE0NTJkLi4x
ZDdlMzE4MjRmZjMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9LY29u
ZmlnCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rzcy9LY29uZmlnCkBAIC05NCw2ICs5
NCw3IEBAIGNvbmZpZyBPTUFQMl9EU1NfU0RJCiAKIGNvbmZpZyBPTUFQMl9EU1NfRFNJCiAJYm9v
bCAiRFNJIHN1cHBvcnQiCisJc2VsZWN0IERSTV9NSVBJX0RTSQogICAgICAgICBkZWZhdWx0IG4K
IAloZWxwCiAJICBNSVBJIERTSSAoRGlzcGxheSBTZXJpYWwgSW50ZXJmYWNlKSBzdXBwb3J0Lgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2RzaS5jIGIvZHJpdmVycy9n
cHUvZHJtL29tYXBkcm0vZHNzL2RzaS5jCmluZGV4IDRkNTVlN2M5Y2Q2NS4uNjk2NzI3NjczYzZh
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9kc3MvZHNpLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL29tYXBkcm0vZHNzL2RzaS5jCkBAIC0yNjk2LDk3ICsyNjk2LDQ5IEBAIHN0
YXRpYyBpbnQgZHNpX3ZjX3NlbmRfbnVsbChzdHJ1Y3QgZHNpX2RhdGEgKmRzaSwgaW50IGNoYW5u
ZWwpCiAJcmV0dXJuIGRzaV92Y19zZW5kX2xvbmcoZHNpLCBjaGFubmVsLCBNSVBJX0RTSV9OVUxM
X1BBQ0tFVCwgTlVMTCwgMCwgMCk7CiB9CiAKLXN0YXRpYyBpbnQgZHNpX3ZjX3dyaXRlX25vc3lu
Y19jb21tb24oc3RydWN0IGRzaV9kYXRhICpkc2ksIGludCBjaGFubmVsLAotCQkJCSAgICAgIGNv
bnN0IHU4ICpkYXRhLCBpbnQgbGVuLAotCQkJCSAgICAgIGVudW0gZHNzX2RzaV9jb250ZW50X3R5
cGUgdHlwZSkKK3N0YXRpYyBpbnQgZHNpX3ZjX3dyaXRlX2NvbW1vbihzdHJ1Y3Qgb21hcF9kc3Nf
ZGV2aWNlICpkc3NkZXYsCisJCQkgICAgICAgY29uc3Qgc3RydWN0IG1pcGlfZHNpX21zZyAqbXNn
KQogeworCXN0cnVjdCBkc2lfZGF0YSAqZHNpID0gdG9fZHNpX2RhdGEoZHNzZGV2KTsKKwlzdHJ1
Y3QgbWlwaV9kc2lfcGFja2V0IHBhY2tldDsKIAlpbnQgcjsKIAotCWlmIChsZW4gPT0gMCkgewot
CQlCVUdfT04odHlwZSA9PSBEU1NfRFNJX0NPTlRFTlRfRENTKTsKLQkJciA9IGRzaV92Y19zZW5k
X3Nob3J0KGRzaSwgY2hhbm5lbCwKLQkJCQlNSVBJX0RTSV9HRU5FUklDX1NIT1JUX1dSSVRFXzBf
UEFSQU0sIDAsIDApOwotCX0gZWxzZSBpZiAobGVuID09IDEpIHsKLQkJciA9IGRzaV92Y19zZW5k
X3Nob3J0KGRzaSwgY2hhbm5lbCwKLQkJCQl0eXBlID09IERTU19EU0lfQ09OVEVOVF9HRU5FUklD
ID8KLQkJCQlNSVBJX0RTSV9HRU5FUklDX1NIT1JUX1dSSVRFXzFfUEFSQU0gOgotCQkJCU1JUElf
RFNJX0RDU19TSE9SVF9XUklURSwgZGF0YVswXSwgMCk7Ci0JfSBlbHNlIGlmIChsZW4gPT0gMikg
ewotCQlyID0gZHNpX3ZjX3NlbmRfc2hvcnQoZHNpLCBjaGFubmVsLAotCQkJCXR5cGUgPT0gRFNT
X0RTSV9DT05URU5UX0dFTkVSSUMgPwotCQkJCU1JUElfRFNJX0dFTkVSSUNfU0hPUlRfV1JJVEVf
Ml9QQVJBTSA6Ci0JCQkJTUlQSV9EU0lfRENTX1NIT1JUX1dSSVRFX1BBUkFNLAotCQkJCWRhdGFb
MF0gfCAoZGF0YVsxXSA8PCA4KSwgMCk7CisJciA9IG1pcGlfZHNpX2NyZWF0ZV9wYWNrZXQoJnBh
Y2tldCwgbXNnKTsKKwlpZiAociA8IDApCisJCXJldHVybiByOworCisJaWYgKG1pcGlfZHNpX3Bh
Y2tldF9mb3JtYXRfaXNfc2hvcnQobXNnLT50eXBlKSkgeworCQl1MTYgZGF0YSA9IHBhY2tldC5o
ZWFkZXJbMV0gfCAocGFja2V0LmhlYWRlclsyXSA8PCA4KTsKKwkJciA9IGRzaV92Y19zZW5kX3No
b3J0KGRzaSwgbXNnLT5jaGFubmVsLCBtc2ctPnR5cGUsIGRhdGEsIDApOwogCX0gZWxzZSB7Ci0J
CXIgPSBkc2lfdmNfc2VuZF9sb25nKGRzaSwgY2hhbm5lbCwKLQkJCQl0eXBlID09IERTU19EU0lf
Q09OVEVOVF9HRU5FUklDID8KLQkJCQlNSVBJX0RTSV9HRU5FUklDX0xPTkdfV1JJVEUgOgotCQkJ
CU1JUElfRFNJX0RDU19MT05HX1dSSVRFLCBkYXRhLCBsZW4sIDApOworCQlyID0gZHNpX3ZjX3Nl
bmRfbG9uZyhkc2ksIG1zZy0+Y2hhbm5lbCwgbXNnLT50eXBlLAorCQkJCQkJICAgbXNnLT50eF9i
dWYsIG1zZy0+dHhfbGVuLCAwKTsKIAl9CiAKLQlyZXR1cm4gcjsKLX0KLQotc3RhdGljIGludCBk
c2lfdmNfZGNzX3dyaXRlX25vc3luYyhzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsIGlu
dCBjaGFubmVsLAotCQljb25zdCB1OCAqZGF0YSwgaW50IGxlbikKLXsKLQlzdHJ1Y3QgZHNpX2Rh
dGEgKmRzaSA9IHRvX2RzaV9kYXRhKGRzc2Rldik7Ci0KLQlyZXR1cm4gZHNpX3ZjX3dyaXRlX25v
c3luY19jb21tb24oZHNpLCBjaGFubmVsLCBkYXRhLCBsZW4sCi0JCQlEU1NfRFNJX0NPTlRFTlRf
RENTKTsKLX0KLQotc3RhdGljIGludCBkc2lfdmNfZ2VuZXJpY193cml0ZV9ub3N5bmMoc3RydWN0
IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCwKLQkJY29uc3QgdTggKmRhdGEs
IGludCBsZW4pCi17Ci0Jc3RydWN0IGRzaV9kYXRhICpkc2kgPSB0b19kc2lfZGF0YShkc3NkZXYp
OwotCi0JcmV0dXJuIGRzaV92Y193cml0ZV9ub3N5bmNfY29tbW9uKGRzaSwgY2hhbm5lbCwgZGF0
YSwgbGVuLAotCQkJRFNTX0RTSV9DT05URU5UX0dFTkVSSUMpOwotfQotCi1zdGF0aWMgaW50IGRz
aV92Y193cml0ZV9jb21tb24oc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LAotCQkJICAg
ICAgIGludCBjaGFubmVsLCBjb25zdCB1OCAqZGF0YSwgaW50IGxlbiwKLQkJCSAgICAgICBlbnVt
IGRzc19kc2lfY29udGVudF90eXBlIHR5cGUpCi17Ci0Jc3RydWN0IGRzaV9kYXRhICpkc2kgPSB0
b19kc2lfZGF0YShkc3NkZXYpOwotCWludCByOworCWlmIChyIDwgMCkKKwkJcmV0dXJuIHI7CiAK
LQlyID0gZHNpX3ZjX3dyaXRlX25vc3luY19jb21tb24oZHNpLCBjaGFubmVsLCBkYXRhLCBsZW4s
IHR5cGUpOwotCWlmIChyKQotCQlnb3RvIGVycjsKKwkvKgorCSAqIHdlIGRvIG5vdCBhbHdheXMg
aGF2ZSB0byBkbyB0aGUgQlRBIHN5bmMsIGZvciBleGFtcGxlIHdlIGNhbgorCSAqIGltcHJvdmUg
cGVyZm9ybWFuY2UgYnkgc2V0dGluZyB0aGUgdXBkYXRlIHdpbmRvdyBpbmZvcm1hdGlvbgorCSAq
IHdpdGhvdXQgc2VuZGluZyBCVEEgc3luYyBiZXR3ZWVuIHRoZSBjb21tYW5kcy4gSW4gdGhhdCBj
YXNlCisJICogd2UgY2FuIHJldHVybiBlYXJpbHkuCisJICovCiAKLQlyID0gZHNpX3ZjX3NlbmRf
YnRhX3N5bmMoZHNzZGV2LCBjaGFubmVsKTsKLQlpZiAocikKLQkJZ290byBlcnI7CisJciA9IGRz
aV92Y19zZW5kX2J0YV9zeW5jKGRzc2RldiwgbXNnLT5jaGFubmVsKTsKKwlpZiAocikgeworCQlE
U1NFUlIoImJ0YSBzeW5jIGZhaWxlZFxuIik7CisJCXJldHVybiByOworCX0KIAogCS8qIFJYX0ZJ
Rk9fTk9UX0VNUFRZICovCi0JaWYgKFJFR19HRVQoZHNpLCBEU0lfVkNfQ1RSTChjaGFubmVsKSwg
MjAsIDIwKSkgeworCWlmIChSRUdfR0VUKGRzaSwgRFNJX1ZDX0NUUkwobXNnLT5jaGFubmVsKSwg
MjAsIDIwKSkgewogCQlEU1NFUlIoInJ4IGZpZm8gbm90IGVtcHR5IGFmdGVyIHdyaXRlLCBkdW1w
aW5nIGRhdGE6XG4iKTsKLQkJZHNpX3ZjX2ZsdXNoX3JlY2VpdmVfZGF0YShkc2ksIGNoYW5uZWwp
OwotCQlyID0gLUVJTzsKLQkJZ290byBlcnI7CisJCWRzaV92Y19mbHVzaF9yZWNlaXZlX2RhdGEo
ZHNpLCBtc2ctPmNoYW5uZWwpOworCQlyZXR1cm4gLUVJTzsKIAl9CiAKIAlyZXR1cm4gMDsKLWVy
cjoKLQlEU1NFUlIoImRzaV92Y193cml0ZV9jb21tb24oY2ggJWQsIGNtZCAweCUwMngsIGxlbiAl
ZCkgZmFpbGVkXG4iLAotCQkJY2hhbm5lbCwgZGF0YVswXSwgbGVuKTsKLQlyZXR1cm4gcjsKLX0K
LQotc3RhdGljIGludCBkc2lfdmNfZGNzX3dyaXRlKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRz
c2RldiwgaW50IGNoYW5uZWwsCi0JCWNvbnN0IHU4ICpkYXRhLCBpbnQgbGVuKQotewotCXJldHVy
biBkc2lfdmNfd3JpdGVfY29tbW9uKGRzc2RldiwgY2hhbm5lbCwgZGF0YSwgbGVuLAotCQkJRFNT
X0RTSV9DT05URU5UX0RDUyk7Ci19Ci0KLXN0YXRpYyBpbnQgZHNpX3ZjX2dlbmVyaWNfd3JpdGUo
c3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCwKLQkJY29uc3QgdTgg
KmRhdGEsIGludCBsZW4pCi17Ci0JcmV0dXJuIGRzaV92Y193cml0ZV9jb21tb24oZHNzZGV2LCBj
aGFubmVsLCBkYXRhLCBsZW4sCi0JCQlEU1NfRFNJX0NPTlRFTlRfR0VORVJJQyk7CiB9CiAKIHN0
YXRpYyBpbnQgZHNpX3ZjX2Rjc19zZW5kX3JlYWRfcmVxdWVzdChzdHJ1Y3QgZHNpX2RhdGEgKmRz
aSwgaW50IGNoYW5uZWwsCkBAIC0zMDA4LDE1ICsyOTYwLDYgQEAgc3RhdGljIGludCBkc2lfdmNf
Z2VuZXJpY19yZWFkKHN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKmRzc2RldiwgaW50IGNoYW5uZWws
CiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyBpbnQgZHNpX3ZjX3NldF9tYXhfcnhfcGFja2V0X3Np
emUoc3RydWN0IG9tYXBfZHNzX2RldmljZSAqZHNzZGV2LCBpbnQgY2hhbm5lbCwKLQkJdTE2IGxl
bikKLXsKLQlzdHJ1Y3QgZHNpX2RhdGEgKmRzaSA9IHRvX2RzaV9kYXRhKGRzc2Rldik7Ci0KLQly
ZXR1cm4gZHNpX3ZjX3NlbmRfc2hvcnQoZHNpLCBjaGFubmVsLAotCQkJTUlQSV9EU0lfU0VUX01B
WElNVU1fUkVUVVJOX1BBQ0tFVF9TSVpFLCBsZW4sIDApOwotfQotCiBzdGF0aWMgaW50IGRzaV9l
bnRlcl91bHBzKHN0cnVjdCBkc2lfZGF0YSAqZHNpKQogewogCURFQ0xBUkVfQ09NUExFVElPTl9P
TlNUQUNLKGNvbXBsZXRpb24pOwpAQCAtNDgxMSwzNSArNDc1NCwxNyBAQCBzdGF0aWMgdm9pZCBk
c2lfcmVsZWFzZV92YyhzdHJ1Y3Qgb21hcF9kc3NfZGV2aWNlICpkc3NkZXYsIGludCBjaGFubmVs
KQogc3RhdGljIHNzaXplX3Qgb21hcF9kc2lfdHJhbnNmZXIoc3RydWN0IG9tYXBfZHNzX2Rldmlj
ZSAqZHNzZGV2LAogCQkJCSBjb25zdCBzdHJ1Y3QgbWlwaV9kc2lfbXNnICptc2cpCiB7Ci0JLyoK
LQkgKiBub19zeW5jIGNhbiBiZSB1c2VkIHRvIG9wdGltaXplIHBlcmZvcm1hbmNlIGJ5IHNlbmRp
bmcKLQkgKiBlLmcuIGNvbHVtbiBhbmQgcGFnZSBpbmZvcm1hdGlvbiB3aXRob3V0IHN5bmNpbmcg
aW4KLQkgKiBiZXR3ZWVuLiBJdCdzIG5vdCBhYnNvbHV0bGV5IHJlcXVpcmVkLCBzbyBwb3N0cG9u
ZSB0aGlzCi0JICogZmVhdHVyZSBmb3Igbm93LgotCSAqLwotCWJvb2wgbm9fc3luYyA9IGZhbHNl
OwotCXUxNiB2YWw7Ci0KIAlzd2l0Y2ggKG1zZy0+dHlwZSkgewogCWNhc2UgTUlQSV9EU0lfR0VO
RVJJQ19TSE9SVF9XUklURV8wX1BBUkFNOgogCWNhc2UgTUlQSV9EU0lfR0VORVJJQ19TSE9SVF9X
UklURV8xX1BBUkFNOgogCWNhc2UgTUlQSV9EU0lfR0VORVJJQ19TSE9SVF9XUklURV8yX1BBUkFN
OgogCWNhc2UgTUlQSV9EU0lfR0VORVJJQ19MT05HX1dSSVRFOgotCQlpZiAobm9fc3luYykKLQkJ
CXJldHVybiBkc2lfdmNfZ2VuZXJpY193cml0ZV9ub3N5bmMoZHNzZGV2LCBtc2ctPmNoYW5uZWws
Ci0JCQkJICAgICAgICAgICAgICAgICAgICAgIG1zZy0+dHhfYnVmLCBtc2ctPnR4X2xlbik7Ci0J
CWVsc2UKLQkJCXJldHVybiBkc2lfdmNfZ2VuZXJpY193cml0ZShkc3NkZXYsIG1zZy0+Y2hhbm5l
bCwKLQkJCQkJCSAgICBtc2ctPnR4X2J1ZiwgbXNnLT50eF9sZW4pOwogCWNhc2UgTUlQSV9EU0lf
RENTX1NIT1JUX1dSSVRFOgogCWNhc2UgTUlQSV9EU0lfRENTX1NIT1JUX1dSSVRFX1BBUkFNOgog
CWNhc2UgTUlQSV9EU0lfRENTX0xPTkdfV1JJVEU6Ci0JCWlmIChub19zeW5jKQotCQkJcmV0dXJu
IGRzaV92Y19kY3Nfd3JpdGVfbm9zeW5jKGRzc2RldiwgbXNnLT5jaGFubmVsLAotCQkJCQkJICAg
ICAgbXNnLT50eF9idWYsIG1zZy0+dHhfbGVuKTsKLQkJZWxzZQotCQkJcmV0dXJuIGRzaV92Y19k
Y3Nfd3JpdGUoZHNzZGV2LCBtc2ctPmNoYW5uZWwsCi0JCQkJCQltc2ctPnR4X2J1ZiwgbXNnLT50
eF9sZW4pOworCWNhc2UgTUlQSV9EU0lfU0VUX01BWElNVU1fUkVUVVJOX1BBQ0tFVF9TSVpFOgor
CWNhc2UgTUlQSV9EU0lfTlVMTF9QQUNLRVQ6CisJCXJldHVybiBkc2lfdmNfd3JpdGVfY29tbW9u
KGRzc2RldiwgbXNnKTsKIAljYXNlIE1JUElfRFNJX0dFTkVSSUNfUkVBRF9SRVFVRVNUXzBfUEFS
QU06CiAJY2FzZSBNSVBJX0RTSV9HRU5FUklDX1JFQURfUkVRVUVTVF8xX1BBUkFNOgogCWNhc2Ug
TUlQSV9EU0lfR0VORVJJQ19SRUFEX1JFUVVFU1RfMl9QQVJBTToKQEAgLTQ4NDksMTEgKzQ3NzQs
NiBAQCBzdGF0aWMgc3NpemVfdCBvbWFwX2RzaV90cmFuc2ZlcihzdHJ1Y3Qgb21hcF9kc3NfZGV2
aWNlICpkc3NkZXYsCiAJCXJldHVybiBkc2lfdmNfZGNzX3JlYWQoZHNzZGV2LCBtc2ctPmNoYW5u
ZWwsCiAJCQkJKCh1OCopIG1zZy0+dHhfYnVmKVswXSwKIAkJCQltc2ctPnJ4X2J1ZiwgbXNnLT5y
eF9sZW4pOwotCWNhc2UgTUlQSV9EU0lfU0VUX01BWElNVU1fUkVUVVJOX1BBQ0tFVF9TSVpFOgot
CQl2YWwgPSBsZTE2X3RvX2NwdSgqKChfX2xlMTYqKSBtc2ctPnR4X2J1ZikpOwotCQlyZXR1cm4g
ZHNpX3ZjX3NldF9tYXhfcnhfcGFja2V0X3NpemUoZHNzZGV2LCBtc2ctPmNoYW5uZWwsIHZhbCk7
Ci0JY2FzZSBNSVBJX0RTSV9OVUxMX1BBQ0tFVDoKLQkJcmV0dXJuIGRzaV92Y19zZW5kX251bGwo
dG9fZHNpX2RhdGEoZHNzZGV2KSwgbXNnLT5jaGFubmVsKTsKIAl9CiAKIAlyZXR1cm4gLUVJTlZB
TDsKLS0gCjIuMjQuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
