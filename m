Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 11FDC88BAC
	for <lists+dri-devel@lfdr.de>; Sat, 10 Aug 2019 15:55:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 274F36E428;
	Sat, 10 Aug 2019 13:55:42 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from foss.arm.com (foss.arm.com [217.140.110.172])
 by gabe.freedesktop.org (Postfix) with ESMTP id D172B6ED6F
 for <dri-devel@lists.freedesktop.org>; Fri,  9 Aug 2019 10:24:36 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 6E4731596;
 Fri,  9 Aug 2019 03:24:36 -0700 (PDT)
Received: from [10.1.196.133] (e112269-lin.cambridge.arm.com [10.1.196.133])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 19F2E3F575;
 Fri,  9 Aug 2019 03:24:34 -0700 (PDT)
Subject: Re: [PATCH v4 6/9] drm/panfrost: Consolidate reset handling
To: Rob Herring <robh@kernel.org>, dri-devel@lists.freedesktop.org
References: <20190808222200.13176-1-robh@kernel.org>
 <20190808222200.13176-7-robh@kernel.org>
From: Steven Price <steven.price@arm.com>
Message-ID: <21f0ba74-9ff5-5404-b3cb-2194a05180b7@arm.com>
Date: Fri, 9 Aug 2019 11:24:34 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190808222200.13176-7-robh@kernel.org>
Content-Language: en-GB
X-Mailman-Approved-At: Sat, 10 Aug 2019 13:55:11 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Tomeu Vizoso <tomeu.vizoso@collabora.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Sean Paul <sean@poorly.run>,
 David Airlie <airlied@linux.ie>,
 Boris Brezillon <boris.brezillon@collabora.com>,
 Alyssa Rosenzweig <alyssa.rosenzweig@collabora.com>,
 Robin Murphy <robin.murphy@arm.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gMDgvMDgvMjAxOSAyMzoyMSwgUm9iIEhlcnJpbmcgd3JvdGU6Cj4gUnVudGltZSBQTSByZXN1
bWUgYW5kIGpvYiB0aW1lb3V0cyBib3RoIGNhbGwgdGhlIHNhbWUgc2VxdWVuY2Ugb2YKPiBmdW5j
dGlvbnMsIHNvIGNvbnNvbGlkYXRlIHRoZW0gdG8gYSBjb21tb24gZnVuY3Rpb24uIFRoaXMgd2ls
bCBtYWtlCj4gY2hhbmdpbmcgdGhlIHJlc2V0IHJlbGF0ZWQgY29kZSBlYXNpZXIuIFRoZSBNTVUg
YWxzbyBuZWVkcyBzb21lCj4gcmUtaW5pdGlhbGl6YXRpb24gb24gcmVzZXQsIHNvIHJld29yayBp
dHMgY2FsbC4gSW4gdGhlIHByb2Nlc3MsIHdlCj4gaGlkZSB0aGUgYWRkcmVzcyBzcGFjZSBkZXRh
aWxzIHdpdGhpbiB0aGUgTU1VIGNvZGUgaW4gcHJlcGFyYXRpb24gdG8KPiBzdXBwb3J0IG11bHRp
cGxlIGFkZHJlc3Mgc3BhY2VzLgo+IAo+IENjOiBUb21ldSBWaXpvc28gPHRvbWV1LnZpem9zb0Bj
b2xsYWJvcmEuY29tPgo+IENjOiBEYXZpZCBBaXJsaWUgPGFpcmxpZWRAbGludXguaWU+Cj4gQ2M6
IERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZndsbC5jaD4KPiBDYzogUm9iaW4gTXVycGh5IDxyb2Jp
bi5tdXJwaHlAYXJtLmNvbT4KPiBDYzogU3RldmVuIFByaWNlIDxzdGV2ZW4ucHJpY2VAYXJtLmNv
bT4KPiBDYzogQWx5c3NhIFJvc2VuendlaWcgPGFseXNzYS5yb3Nlbnp3ZWlnQGNvbGxhYm9yYS5j
b20+Cj4gU2lnbmVkLW9mZi1ieTogUm9iIEhlcnJpbmcgPHJvYmhAa2VybmVsLm9yZz4KClJldmll
d2VkLWJ5OiBTdGV2ZW4gUHJpY2UgPHN0ZXZlbi5wcmljZUBhcm0uY29tPgoKPiAtLS0KPiBOZXcg
cGF0Y2ggaW4gdGhpcyB2ZXJzaW9uLgo+IAo+ICBkcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFu
ZnJvc3RfZGV2aWNlLmMgfCAxNiArKysrKysrKysrLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9w
YW5mcm9zdC9wYW5mcm9zdF9kZXZpY2UuaCB8ICAxICsKPiAgZHJpdmVycy9ncHUvZHJtL3BhbmZy
b3N0L3BhbmZyb3N0X2pvYi5jICAgIHwgIDcgKy0tLS0tLQo+ICBkcml2ZXJzL2dwdS9kcm0vcGFu
ZnJvc3QvcGFuZnJvc3RfbW11LmMgICAgfCAxNiArKysrKysrKystLS0tLS0tCj4gIGRyaXZlcnMv
Z3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9tbXUuaCAgICB8ICAzICstLQo+ICA1IGZpbGVzIGNo
YW5nZWQsIDIyIGluc2VydGlvbnMoKyksIDIxIGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmMgYi9kcml2ZXJzL2dw
dS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2aWNlLmMKPiBpbmRleCA4YTExMWQ3YzAyMDAuLjk4
MTRmNGNjYmQyNiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJv
c3RfZGV2aWNlLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3RfZGV2
aWNlLmMKPiBAQCAtMjU0LDE4ICsyNTQsMjIgQEAgY29uc3QgY2hhciAqcGFuZnJvc3RfZXhjZXB0
aW9uX25hbWUoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIHUzMiBleGNlcHRpb24KPiAg
CXJldHVybiAiVU5LTk9XTiI7Cj4gIH0KPiAKPiArdm9pZCBwYW5mcm9zdF9kZXZpY2VfcmVzZXQo
c3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCj4gK3sKPiArCXBhbmZyb3N0X2dwdV9zb2Z0
X3Jlc2V0KHBmZGV2KTsKPiArCj4gKwlwYW5mcm9zdF9ncHVfcG93ZXJfb24ocGZkZXYpOwo+ICsJ
cGFuZnJvc3RfbW11X3Jlc2V0KHBmZGV2KTsKPiArCXBhbmZyb3N0X2pvYl9lbmFibGVfaW50ZXJy
dXB0cyhwZmRldik7Cj4gK30KPiArCj4gICNpZmRlZiBDT05GSUdfUE0KPiAgaW50IHBhbmZyb3N0
X2RldmljZV9yZXN1bWUoc3RydWN0IGRldmljZSAqZGV2KQo+ICB7Cj4gIAlzdHJ1Y3QgcGxhdGZv
cm1fZGV2aWNlICpwZGV2ID0gdG9fcGxhdGZvcm1fZGV2aWNlKGRldik7Cj4gIAlzdHJ1Y3QgcGFu
ZnJvc3RfZGV2aWNlICpwZmRldiA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwo+IAo+IC0J
cGFuZnJvc3RfZ3B1X3NvZnRfcmVzZXQocGZkZXYpOwo+IC0KPiAtCS8qIFRPRE86IFJlLWVuYWJs
ZSBhbGwgb3RoZXIgYWRkcmVzcyBzcGFjZXMgKi8KPiAtCXBhbmZyb3N0X2dwdV9wb3dlcl9vbihw
ZmRldik7Cj4gLQlwYW5mcm9zdF9tbXVfZW5hYmxlKHBmZGV2LCAwKTsKPiAtCXBhbmZyb3N0X2pv
Yl9lbmFibGVfaW50ZXJydXB0cyhwZmRldik7Cj4gKwlwYW5mcm9zdF9kZXZpY2VfcmVzZXQocGZk
ZXYpOwo+ICAJcGFuZnJvc3RfZGV2ZnJlcV9yZXN1bWUocGZkZXYpOwo+IAo+ICAJcmV0dXJuIDA7
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2Uu
aCBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kZXZpY2UuaAo+IGluZGV4IDAz
OGIzMmM2MjQ4NC4uNGU1NjQxZGI5YzdlIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9w
YW5mcm9zdC9wYW5mcm9zdF9kZXZpY2UuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9z
dC9wYW5mcm9zdF9kZXZpY2UuaAo+IEBAIC0xMzIsNiArMTMyLDcgQEAgaW50IHBhbmZyb3N0X3Vu
c3RhYmxlX2lvY3RsX2NoZWNrKHZvaWQpOwo+IAo+ICBpbnQgcGFuZnJvc3RfZGV2aWNlX2luaXQo
c3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpOwo+ICB2b2lkIHBhbmZyb3N0X2RldmljZV9m
aW5pKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KTsKPiArdm9pZCBwYW5mcm9zdF9kZXZp
Y2VfcmVzZXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpOwo+IAo+ICBpbnQgcGFuZnJv
c3RfZGV2aWNlX3Jlc3VtZShzdHJ1Y3QgZGV2aWNlICpkZXYpOwo+ICBpbnQgcGFuZnJvc3RfZGV2
aWNlX3N1c3BlbmQoc3RydWN0IGRldmljZSAqZGV2KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0
L3BhbmZyb3N0X2pvYi5jCj4gaW5kZXggOWJiOTI2MGQ5MTgxLi5kNTY3Y2U5ODQ5NGMgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jCj4gQEAgLTM5NSwxMiArMzk1
LDcgQEAgc3RhdGljIHZvaWQgcGFuZnJvc3Rfam9iX3RpbWVkb3V0KHN0cnVjdCBkcm1fc2NoZWRf
am9iICpzY2hlZF9qb2IpCj4gIAkvKiBwYW5mcm9zdF9jb3JlX2R1bXAocGZkZXYpOyAqLwo+IAo+
ICAJcGFuZnJvc3RfZGV2ZnJlcV9yZWNvcmRfdHJhbnNpdGlvbihwZmRldiwganMpOwo+IC0JcGFu
ZnJvc3RfZ3B1X3NvZnRfcmVzZXQocGZkZXYpOwo+IC0KPiAtCS8qIFRPRE86IFJlLWVuYWJsZSBh
bGwgb3RoZXIgYWRkcmVzcyBzcGFjZXMgKi8KPiAtCXBhbmZyb3N0X21tdV9lbmFibGUocGZkZXYs
IDApOwo+IC0JcGFuZnJvc3RfZ3B1X3Bvd2VyX29uKHBmZGV2KTsKPiAtCXBhbmZyb3N0X2pvYl9l
bmFibGVfaW50ZXJydXB0cyhwZmRldik7Cj4gKwlwYW5mcm9zdF9kZXZpY2VfcmVzZXQocGZkZXYp
Owo+IAo+ICAJZm9yIChpID0gMDsgaSA8IE5VTV9KT0JfU0xPVFM7IGkrKykKPiAgCQlkcm1fc2No
ZWRfcmVzdWJtaXRfam9icygmcGZkZXYtPmpzLT5xdWV1ZVtpXS5zY2hlZCk7Cj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9tbXUuYyBiL2RyaXZlcnMvZ3B1
L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9tbXUuYwo+IGluZGV4IGViYTZjZTc4NWVmMC4uMTM3NTc0
MjdiODg2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9t
bXUuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9tbXUuYwo+IEBA
IC0xMDUsMTUgKzEwNSwxMiBAQCBzdGF0aWMgaW50IG1tdV9od19kb19vcGVyYXRpb24oc3RydWN0
IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIHUzMiBhc19uciwKPiAgCXJldHVybiByZXQ7Cj4gIH0K
PiAKPiAtdm9pZCBwYW5mcm9zdF9tbXVfZW5hYmxlKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBm
ZGV2LCB1MzIgYXNfbnIpCj4gK3N0YXRpYyB2b2lkIHBhbmZyb3N0X21tdV9lbmFibGUoc3RydWN0
IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIHUzMiBhc19ucikKPiAgewo+ICAJc3RydWN0IGlvX3Bn
dGFibGVfY2ZnICpjZmcgPSAmcGZkZXYtPm1tdS0+cGd0YmxfY2ZnOwo+ICAJdTY0IHRyYW5zdGFi
ID0gY2ZnLT5hcm1fbWFsaV9scGFlX2NmZy50cmFuc3RhYjsKPiAgCXU2NCBtZW1hdHRyID0gY2Zn
LT5hcm1fbWFsaV9scGFlX2NmZy5tZW1hdHRyOwo+IAo+IC0JbW11X3dyaXRlKHBmZGV2LCBNTVVf
SU5UX0NMRUFSLCB+MCk7Cj4gLQltbXVfd3JpdGUocGZkZXYsIE1NVV9JTlRfTUFTSywgfjApOwo+
IC0KPiAgCW1tdV93cml0ZShwZmRldiwgQVNfVFJBTlNUQUJfTE8oYXNfbnIpLCB0cmFuc3RhYiAm
IDB4ZmZmZmZmZmZVTCk7Cj4gIAltbXVfd3JpdGUocGZkZXYsIEFTX1RSQU5TVEFCX0hJKGFzX25y
KSwgdHJhbnN0YWIgPj4gMzIpOwo+IAo+IEBAIC0xMzcsNiArMTM0LDE0IEBAIHN0YXRpYyB2b2lk
IG1tdV9kaXNhYmxlKHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2LCB1MzIgYXNfbnIpCj4g
IAl3cml0ZV9jbWQocGZkZXYsIGFzX25yLCBBU19DT01NQU5EX1VQREFURSk7Cj4gIH0KPiAKPiAr
dm9pZCBwYW5mcm9zdF9tbXVfcmVzZXQoc3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYpCj4g
K3sKPiArCXBhbmZyb3N0X21tdV9lbmFibGUocGZkZXYsIDApOwo+ICsKPiArCW1tdV93cml0ZShw
ZmRldiwgTU1VX0lOVF9DTEVBUiwgfjApOwo+ICsJbW11X3dyaXRlKHBmZGV2LCBNTVVfSU5UX01B
U0ssIH4wKTsKPiArfQo+ICsKPiAgc3RhdGljIHNpemVfdCBnZXRfcGdzaXplKHU2NCBhZGRyLCBz
aXplX3Qgc2l6ZSkKPiAgewo+ICAJaWYgKGFkZHIgJiAoU1pfMk0gLSAxKSB8fCBzaXplIDwgU1pf
Mk0pCj4gQEAgLTM3NSw5ICszODAsNiBAQCBpbnQgcGFuZnJvc3RfbW11X2luaXQoc3RydWN0IHBh
bmZyb3N0X2RldmljZSAqcGZkZXYpCj4gIAkJZGV2X2VycihwZmRldi0+ZGV2LCAiZmFpbGVkIHRv
IHJlcXVlc3QgbW11IGlycSIpOwo+ICAJCXJldHVybiBlcnI7Cj4gIAl9Cj4gLQltbXVfd3JpdGUo
cGZkZXYsIE1NVV9JTlRfQ0xFQVIsIH4wKTsKPiAtCW1tdV93cml0ZShwZmRldiwgTU1VX0lOVF9N
QVNLLCB+MCk7Cj4gLQo+ICAJcGZkZXYtPm1tdS0+cGd0YmxfY2ZnID0gKHN0cnVjdCBpb19wZ3Rh
YmxlX2NmZykgewo+ICAJCS5wZ3NpemVfYml0bWFwCT0gU1pfNEsgfCBTWl8yTSwKPiAgCQkuaWFz
CQk9IEZJRUxEX0dFVCgweGZmLCBwZmRldi0+ZmVhdHVyZXMubW11X2ZlYXR1cmVzKSwKPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5oIGIvZHJpdmVy
cy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5oCj4gaW5kZXggZjU4NzhkODZhNWNlLi5k
NWY5YjI0NTM3ZGIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZy
b3N0X21tdS5oCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X21tdS5o
Cj4gQEAgLTExLDcgKzExLDYgQEAgdm9pZCBwYW5mcm9zdF9tbXVfdW5tYXAoc3RydWN0IHBhbmZy
b3N0X2dlbV9vYmplY3QgKmJvKTsKPiAKPiAgaW50IHBhbmZyb3N0X21tdV9pbml0KHN0cnVjdCBw
YW5mcm9zdF9kZXZpY2UgKnBmZGV2KTsKPiAgdm9pZCBwYW5mcm9zdF9tbXVfZmluaShzdHJ1Y3Qg
cGFuZnJvc3RfZGV2aWNlICpwZmRldik7Cj4gLQo+IC12b2lkIHBhbmZyb3N0X21tdV9lbmFibGUo
c3RydWN0IHBhbmZyb3N0X2RldmljZSAqcGZkZXYsIHUzMiBhc19ucik7Cj4gK3ZvaWQgcGFuZnJv
c3RfbW11X3Jlc2V0KHN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2KTsKPiAKPiAgI2VuZGlm
Cj4gLS0KPiAyLjIwLjEKPiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwo+IGRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKPiBkcmktZGV2ZWxAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCj4gaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9kcmktZGV2ZWwKPiAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1k
ZXZlbA==
