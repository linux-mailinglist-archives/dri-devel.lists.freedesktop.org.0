Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 4C13A1BDCCD
	for <lists+dri-devel@lfdr.de>; Wed, 29 Apr 2020 14:58:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1D3606EDFE;
	Wed, 29 Apr 2020 12:57:57 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from asav21.altibox.net (asav21.altibox.net [109.247.116.8])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A5A366EE1E
 for <dri-devel@lists.freedesktop.org>; Wed, 29 Apr 2020 12:57:55 +0000 (UTC)
Received: from localhost.localdomain (unknown [81.166.168.211])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-SHA256 (128/128 bits))
 (No client certificate requested)
 (Authenticated sender: noralf.tronnes@ebnett.no)
 by asav21.altibox.net (Postfix) with ESMTPSA id 32ABF8018B;
 Wed, 29 Apr 2020 14:48:50 +0200 (CEST)
From: =?UTF-8?q?Noralf=20Tr=C3=B8nnes?= <noralf@tronnes.org>
To: dri-devel@lists.freedesktop.org,
	linux-usb@vger.kernel.org
Subject: [PATCH 02/10] drm: Add backlight helper
Date: Wed, 29 Apr 2020 14:48:22 +0200
Message-Id: <20200429124830.27475-3-noralf@tronnes.org>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20200429124830.27475-1-noralf@tronnes.org>
References: <20200429124830.27475-1-noralf@tronnes.org>
MIME-Version: 1.0
X-CMAE-Score: 0
X-CMAE-Analysis: v=2.3 cv=AvXAIt1P c=1 sm=1 tr=0
 a=OYZzhG0JTxDrWp/F2OJbnw==:117 a=OYZzhG0JTxDrWp/F2OJbnw==:17
 a=IkcTkHD0fZMA:10 a=M51BFTxLslgA:10 a=VwQbUJbxAAAA:8 a=QyXUC8HyAAAA:8
 a=aiIX5UjjAAAA:8 a=nGqoV0jOAAAA:20 a=e5mUnYsNAAAA:8 a=Oh2cFVv5AAAA:8
 a=bhchkAzmAAAA:20 a=20KFwNOVAAAA:8 a=KKAkSRfTAAAA:8 a=SJz97ENfAAAA:8
 a=UO0b44jCD_nsarDuR4EA:9 a=QEXdDO2ut3YA:10 a=oU43SoCdRycA:10
 a=AjGcO6oz07-iQ99wixmX:22 a=K4UmP72BP_XnEf30ZnvK:22
 a=Vxmtnl_E_bksehYqCbjh:22 a=7KeoIwV6GZqOttXkcoxL:22
 a=cvBusfyB2V15izCimMoJ:22 a=vFet0B0WnEQeilDPIY6i:22
 a=pHzHmUro8NiASowvMSCR:22 a=n87TN5wuljxrRezIQYnT:22
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hans de Goede <hdegoede@redhat.com>,
 Daniel Thompson <daniel.thompson@linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBhZGRzIGEgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGEgYmFja2xpZ2h0IGRldmljZSBmb3Ig
YSBjb25uZWN0b3IuCkl0IGRvZXMgbm90IGRlYWwgd2l0aCB0aGUgS01TIGJhY2tsaWdodCBBQkkg
cHJvcG9zaXRpb25bMV0gdG8gYWRkIGEKY29ubmVjdG9yIHByb3BlcnR5LiBJdCBvbmx5IHRha2Vz
IHRoZSBjdXJyZW50IGJlc3QgcHJhY3Rpc2UgdG8gc3RhbmRhcmRpc2UKdGhlIGNyZWF0aW9uIG9m
IGEgYmFja2xpZ2h0IGRldmljZSBmb3IgRFJNIGRyaXZlcnMgd2hpbGUgd2Ugd2FpdCBmb3IgdGhl
CnByb3BlcnR5LgoKVGhlIGJyaWdodG5lc3MgdmFsdWUgaXMgc2V0IHVzaW5nIGEgY29ubmVjdG9y
IHN0YXRlIHZhcmlhYmxlIGFuZCBhbiBhdG9taWMKY29tbWl0LgoKSSBoYXZlIGxvb2tlZCB0aHJv
dWdoIHNvbWUgb2YgdGhlIGJhY2tsaWdodCB1c2VycyBhbmQgdGhpcyBpcyB3aGF0IEkndmUgZm91
bmQ6CgpHTk9NRSBbMl0KLS0tLS0tLS0tCgpCcmlnaHRuZXNzIHJhbmdlOiAwLTEwMApTY2FsZTog
QXNzdW1lcyBwZXJjZXB0dWFsCgpBdm9pZHMgc2V0dGluZyB0aGUgc3lzZnMgYnJpZ2h0bmVzcyB2
YWx1ZSB0byB6ZXJvIGlmIG1heF9icmlnaHRuZXNzID49IDk5LgpDYW4gY29ubmVjdCBjb25uZWN0
b3IgYW5kIGJhY2tsaWdodCB1c2luZyB0aGUgc3lzZnMgZGV2aWNlLgoKS0RFIFszXQotLS0tLS0t
CgpCcmlnaHRuZXNzIHJhbmdlOiAwLTEwMApTY2FsZTogQXNzdW1lcyBwZXJjZXB0dWFsCgpXZXN0
b24gWzRdCi0tLS0tLS0tLS0KCkJyaWdodG5lc3MgcmFuZ2U6IDAtMjU1ClNjYWxlOiBBc3N1bWVz
IHBlcmNlcHR1YWwKCkNocm9taXVtIE9TIFs1XQotLS0tLS0tLS0tLS0tLS0KCkJyaWdodG5lc3Mg
cmFuZ2U6IDAtMTAwClNjYWxlOiBEZXBlbmRzIG9uIHRoZSBzeXNmcyBmaWxlICdzY2FsZScgd2hp
Y2ggaXMgYSByZWNlbnQgYWRkaXRpb24gKDIwMTkpCgp4c2VydmVyIFs2XQotLS0tLS0tLS0tLQoK
QnJpZ2h0bmVzcyByYW5nZTogMC14IChkcml2ZXIgc3BlY2lmaWMpICgxIGlzIG1pbmltdW0sIDAg
aXMgT0ZGKQpTY2FsZTogQXNzdW1lcyBwZXJjZXB0dWFsCgpUaGUgYnVpbHRpbiBtb2Rlc2V0dGlu
ZyBkcml2ZXJbN10gZG9lcyBub3Qgc3VwcG9ydCBCYWNrbGlnaHQsIEludGVsWzhdIGRvZXMuCgpb
MV0gaHR0cHM6Ly9sb3JlLmtlcm5lbC5vcmcvZHJpLWRldmVsLzRiMTdiYTA4LTM5ZjMtNTdkZC01
YWFkLWQzN2Q4NDRiMDJjNkBsaW51eC5pbnRlbC5jb20vClsyXSBodHRwczovL2dpdGxhYi5nbm9t
ZS5vcmcvR05PTUUvZ25vbWUtc2V0dGluZ3MtZGFlbW9uLy0vYmxvYi9tYXN0ZXIvcGx1Z2lucy9w
b3dlci9nc2QtYmFja2xpZ2h0LmMKWzNdIGh0dHBzOi8vZ2l0aHViLmNvbS9LREUvcG93ZXJkZXZp
bC9ibG9iL21hc3Rlci9kYWVtb24vYmFja2VuZHMvdXBvd2VyL2JhY2tsaWdodGhlbHBlci5jcHAK
WzRdIGh0dHBzOi8vZ2l0bGFiLmZyZWVkZXNrdG9wLm9yZy93YXlsYW5kL3dlc3Rvbi8tL2Jsb2Iv
bWFzdGVyL2xpYndlc3Rvbi9iYWNrZW5kLWRybS9kcm0uYwpbNV0gaHR0cHM6Ly9jaHJvbWl1bS5n
b29nbGVzb3VyY2UuY29tL2Nocm9taXVtb3MvcGxhdGZvcm0yLysvcmVmcy9oZWFkcy9tYXN0ZXIv
cG93ZXJfbWFuYWdlci9wb3dlcmQvc3lzdGVtL2ludGVybmFsX2JhY2tsaWdodC5jYwpbNl0gaHR0
cHM6Ly9naXRodWIuY29tL2ZyZWVkZXNrdG9wL3hvcmctcmFuZHJwcm90by9ibG9iL21hc3Rlci9y
YW5kcnByb3RvLnR4dApbN10gaHR0cHM6Ly9naXRsYWIuZnJlZWRlc2t0b3Aub3JnL3hvcmcveHNl
cnZlci8tL2Jsb2IvbWFzdGVyL2h3L3hmcmVlODYvZHJpdmVycy9tb2Rlc2V0dGluZy9kcm1tb2Rl
X2Rpc3BsYXkuYwpbOF0gaHR0cHM6Ly9naXRsYWIuZnJlZWRlc2t0b3Aub3JnL3hvcmcvZHJpdmVy
L3hmODYtdmlkZW8taW50ZWwvLS9ibG9iL21hc3Rlci9zcmMvYmFja2xpZ2h0LmMKCkNjOiBIYW5z
IGRlIEdvZWRlIDxoZGVnb2VkZUByZWRoYXQuY29tPgpDYzogSmFuaSBOaWt1bGEgPGphbmkubmlr
dWxhQGxpbnV4LmludGVsLmNvbT4KQ2M6IE1hcnRpbiBQZXJlcyA8bWFydGluLnBlcmVzQGxpbnV4
LmludGVsLmNvbT4KQ2M6IERhbmllbCBUaG9tcHNvbiA8ZGFuaWVsLnRob21wc29uQGxpbmFyby5v
cmc+ClNpZ25lZC1vZmYtYnk6IE5vcmFsZiBUcsO4bm5lcyA8bm9yYWxmQHRyb25uZXMub3JnPgot
LS0KIERvY3VtZW50YXRpb24vZ3B1L2RybS1rbXMtaGVscGVycy5yc3QgIHwgICA2ICsKIGRyaXZl
cnMvZ3B1L2RybS9LY29uZmlnICAgICAgICAgICAgICAgIHwgICA3ICsrCiBkcml2ZXJzL2dwdS9k
cm0vTWFrZWZpbGUgICAgICAgICAgICAgICB8ICAgMSArCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2Jh
Y2tsaWdodF9oZWxwZXIuYyB8IDE1NCArKysrKysrKysrKysrKysrKysrKysrKysrCiBpbmNsdWRl
L2RybS9kcm1fYmFja2xpZ2h0X2hlbHBlci5oICAgICB8ICAgOSArKwogaW5jbHVkZS9kcm0vZHJt
X2Nvbm5lY3Rvci5oICAgICAgICAgICAgfCAgMTAgKysKIDYgZmlsZXMgY2hhbmdlZCwgMTg3IGlu
c2VydGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vZHJtX2JhY2ts
aWdodF9oZWxwZXIuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGluY2x1ZGUvZHJtL2RybV9iYWNrbGln
aHRfaGVscGVyLmgKCmRpZmYgLS1naXQgYS9Eb2N1bWVudGF0aW9uL2dwdS9kcm0ta21zLWhlbHBl
cnMucnN0IGIvRG9jdW1lbnRhdGlvbi9ncHUvZHJtLWttcy1oZWxwZXJzLnJzdAppbmRleCA5NjY4
YTdmZTI0MDguLjI5YTJmNGI0OWZkMiAxMDA2NDQKLS0tIGEvRG9jdW1lbnRhdGlvbi9ncHUvZHJt
LWttcy1oZWxwZXJzLnJzdAorKysgYi9Eb2N1bWVudGF0aW9uL2dwdS9kcm0ta21zLWhlbHBlcnMu
cnN0CkBAIC00MTEsMyArNDExLDkgQEAgU0hNRU0gR0VNIEhlbHBlciBSZWZlcmVuY2UKIAogLi4g
a2VybmVsLWRvYzo6IGRyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jCiAgICA6
ZXhwb3J0OgorCitCYWNrbGlnaHQgSGVscGVyIFJlZmVyZW5jZQorPT09PT09PT09PT09PT09PT09
PT09PT09PT0KKworLi4ga2VybmVsLWRvYzo6IGRyaXZlcnMvZ3B1L2RybS9kcm1fYmFja2xpZ2h0
X2hlbHBlci5jCisgICA6ZXhwb3J0OgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL0tjb25m
aWcgYi9kcml2ZXJzL2dwdS9kcm0vS2NvbmZpZwppbmRleCBkMGFhNmNmZjJlMDIuLmY2ZTEzZTE4
YzljYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL0tjb25maWcKKysrIGIvZHJpdmVycy9n
cHUvZHJtL0tjb25maWcKQEAgLTIyNCw2ICsyMjQsMTMgQEAgY29uZmlnIERSTV9HRU1fU0hNRU1f
SEVMUEVSCiAJaGVscAogCSAgQ2hvb3NlIHRoaXMgaWYgeW91IG5lZWQgdGhlIEdFTSBzaG1lbSBo
ZWxwZXIgZnVuY3Rpb25zCiAKK2NvbmZpZyBEUk1fQkFDS0xJR0hUX0hFTFBFUgorCWJvb2wKKwlk
ZXBlbmRzIG9uIERSTQorCXNlbGVjdCBCQUNLTElHSFRfQ0xBU1NfREVWSUNFCisJaGVscAorCSAg
Q2hvb3NlIHRoaXMgaWYgeW91IG5lZWQgdGhlIGJhY2tsaWdodCBkZXZpY2UgaGVscGVyIGZ1bmN0
aW9ucworCiBjb25maWcgRFJNX1ZNCiAJYm9vbAogCWRlcGVuZHMgb24gRFJNICYmIE1NVQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL01ha2Vm
aWxlCmluZGV4IDY0OTMwODhhMGZkZC4uMGQxNzY2MmRkZTBhIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vTWFrZWZpbGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL01ha2VmaWxlCkBAIC01Miw2
ICs1Miw3IEBAIGRybV9rbXNfaGVscGVyLSQoQ09ORklHX0RSTV9GQkRFVl9FTVVMQVRJT04pICs9
IGRybV9mYl9oZWxwZXIubwogZHJtX2ttc19oZWxwZXItJChDT05GSUdfRFJNX0tNU19DTUFfSEVM
UEVSKSArPSBkcm1fZmJfY21hX2hlbHBlci5vCiBkcm1fa21zX2hlbHBlci0kKENPTkZJR19EUk1f
RFBfQVVYX0NIQVJERVYpICs9IGRybV9kcF9hdXhfZGV2Lm8KIGRybV9rbXNfaGVscGVyLSQoQ09O
RklHX0RSTV9EUF9DRUMpICs9IGRybV9kcF9jZWMubworZHJtX2ttc19oZWxwZXItJChDT05GSUdf
RFJNX0JBQ0tMSUdIVF9IRUxQRVIpICs9IGRybV9iYWNrbGlnaHRfaGVscGVyLm8KIAogb2JqLSQo
Q09ORklHX0RSTV9LTVNfSEVMUEVSKSArPSBkcm1fa21zX2hlbHBlci5vCiBvYmotJChDT05GSUdf
RFJNX0RFQlVHX1NFTEZURVNUKSArPSBzZWxmdGVzdHMvCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vZHJtX2JhY2tsaWdodF9oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYmFja2xp
Z2h0X2hlbHBlci5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uMDZl
NmE3NWQxZDBhCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9iYWNrbGln
aHRfaGVscGVyLmMKQEAgLTAsMCArMSwxNTQgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVy
OiBHUEwtMi4wIE9SIE1JVAorLyoKKyAqIENvcHlyaWdodCAyMDIwIE5vcmFsZiBUcsO4bm5lcwor
ICovCisKKyNpbmNsdWRlIDxsaW51eC9iYWNrbGlnaHQuaD4KKworI2luY2x1ZGUgPGRybS9kcm1f
YXRvbWljLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9jb25uZWN0b3IuaD4KKyNpbmNsdWRlIDxkcm0v
ZHJtX2Rydi5oPgorI2luY2x1ZGUgPGRybS9kcm1fZmlsZS5oPgorCitzdGF0aWMgaW50IGRybV9i
YWNrbGlnaHRfdXBkYXRlX3N0YXR1cyhzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmQpCit7CisJ
c3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciA9IGJsX2dldF9kYXRhKGJkKTsKKwlzdHJ1
Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubmVjdG9yX3N0YXRlOworCXN0cnVjdCBkcm1fZGV2
aWNlICpkZXYgPSBjb25uZWN0b3ItPmRldjsKKwlzdHJ1Y3QgZHJtX21vZGVzZXRfYWNxdWlyZV9j
dHggY3R4OworCXN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZTsKKwlpbnQgcmV0OworCisJ
c3RhdGUgPSBkcm1fYXRvbWljX3N0YXRlX2FsbG9jKGRldik7CisJaWYgKCFzdGF0ZSkKKwkJcmV0
dXJuIC1FTk9NRU07CisKKwlkcm1fbW9kZXNldF9hY3F1aXJlX2luaXQoJmN0eCwgMCk7CisJc3Rh
dGUtPmFjcXVpcmVfY3R4ID0gJmN0eDsKK3JldHJ5OgorCWNvbm5lY3Rvcl9zdGF0ZSA9IGRybV9h
dG9taWNfZ2V0X2Nvbm5lY3Rvcl9zdGF0ZShzdGF0ZSwgY29ubmVjdG9yKTsKKwlpZiAoSVNfRVJS
KGNvbm5lY3Rvcl9zdGF0ZSkpIHsKKwkJcmV0ID0gUFRSX0VSUihjb25uZWN0b3Jfc3RhdGUpOwor
CQlnb3RvIG91dDsKKwl9CisKKwljb25uZWN0b3Jfc3RhdGUtPmJhY2tsaWdodF9icmlnaHRuZXNz
ID0gYmQtPnByb3BzLmJyaWdodG5lc3M7CisKKwlyZXQgPSBkcm1fYXRvbWljX2NvbW1pdChzdGF0
ZSk7CitvdXQ6CisJaWYgKHJldCA9PSAtRURFQURMSykgeworCQlkcm1fYXRvbWljX3N0YXRlX2Ns
ZWFyKHN0YXRlKTsKKwkJZHJtX21vZGVzZXRfYmFja29mZigmY3R4KTsKKwkJZ290byByZXRyeTsK
Kwl9CisKKwlkcm1fYXRvbWljX3N0YXRlX3B1dChzdGF0ZSk7CisKKwlkcm1fbW9kZXNldF9kcm9w
X2xvY2tzKCZjdHgpOworCWRybV9tb2Rlc2V0X2FjcXVpcmVfZmluaSgmY3R4KTsKKworCXJldHVy
biByZXQ7Cit9CisKK3N0YXRpYyBpbnQgZHJtX2JhY2tsaWdodF9nZXRfYnJpZ2h0bmVzcyhzdHJ1
Y3QgYmFja2xpZ2h0X2RldmljZSAqYmQpCit7CisJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5l
Y3RvciA9IGJsX2dldF9kYXRhKGJkKTsKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0gY29ubmVj
dG9yLT5kZXY7CisJaW50IGJyaWdodG5lc3M7CisKKwlkcm1fbW9kZXNldF9sb2NrKCZkZXYtPm1v
ZGVfY29uZmlnLmNvbm5lY3Rpb25fbXV0ZXgsIE5VTEwpOworCWJyaWdodG5lc3MgPSBjb25uZWN0
b3ItPnN0YXRlLT5iYWNrbGlnaHRfYnJpZ2h0bmVzczsKKwlkcm1fbW9kZXNldF91bmxvY2soJmRl
di0+bW9kZV9jb25maWcuY29ubmVjdGlvbl9tdXRleCk7CisKKwlyZXR1cm4gYnJpZ2h0bmVzczsK
K30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBiYWNrbGlnaHRfb3BzIGRybV9iYWNrbGlnaHRfb3Bz
ID0geworCS5nZXRfYnJpZ2h0bmVzcyA9IGRybV9iYWNrbGlnaHRfZ2V0X2JyaWdodG5lc3MsCisJ
LnVwZGF0ZV9zdGF0dXMJPSBkcm1fYmFja2xpZ2h0X3VwZGF0ZV9zdGF0dXMsCit9OworCisvKiBD
YW4gYmUgZXhwb3J0ZWQgZm9yIGRyaXZlcnMgY2FycnlpbmcgYSBsZWdhY3kgbmFtZSAqLworc3Rh
dGljIGludCBkcm1fYmFja2xpZ2h0X3JlZ2lzdGVyX3dpdGhfbmFtZShzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubmVjdG9yLCBjb25zdCBjaGFyICpuYW1lKQoreworCXN0cnVjdCBiYWNrbGlnaHRf
ZGV2aWNlICpiZDsKKwljb25zdCBzdHJ1Y3QgYmFja2xpZ2h0X3Byb3BlcnRpZXMgcHJvcHMgPSB7
CisJCS50eXBlID0gQkFDS0xJR0hUX1JBVywKKwkJLnNjYWxlID0gQkFDS0xJR0hUX1NDQUxFX05P
Tl9MSU5FQVIsCisJCS5tYXhfYnJpZ2h0bmVzcyA9IDEwMCwKKwl9OworCisJaWYgKFdBUk5fT04o
IWRybV9jb3JlX2NoZWNrX2ZlYXR1cmUoY29ubmVjdG9yLT5kZXYsIERSSVZFUl9NT0RFU0VUKSB8
fAorCQkgICAgIWRybV9kcnZfdXNlc19hdG9taWNfbW9kZXNldChjb25uZWN0b3ItPmRldikgfHwK
KwkJICAgICFjb25uZWN0b3ItPmtkZXYpKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWJkID0gYmFj
a2xpZ2h0X2RldmljZV9yZWdpc3RlcihuYW1lLCBjb25uZWN0b3ItPmtkZXYsIGNvbm5lY3RvciwK
KwkJCQkgICAgICAgJmRybV9iYWNrbGlnaHRfb3BzLCAmcHJvcHMpOworCWlmIChJU19FUlIoYmQp
KQorCQlyZXR1cm4gUFRSX0VSUihiZCk7CisKKwljb25uZWN0b3ItPmJhY2tsaWdodCA9IGJkOwor
CisJcmV0dXJuIDA7Cit9CisKKy8qKgorICogZHJtX2JhY2tsaWdodF9yZWdpc3RlcigpIC0gUmVn
aXN0ZXIgYSBiYWNrbGlnaHQgZGV2aWNlIGZvciBhIGNvbm5lY3RvcgorICogQGNvbm5lY3Rvcjog
Q29ubmVjdG9yCisgKgorICogVGhpcyBmdW5jdGlvbiByZWdpc3RlcnMgYSBiYWNrbGlnaHQgZGV2
aWNlIGZvciBAY29ubmVjdG9yIHdpdGggdGhlIGZvbGxvd2luZworICogY2hhcmFjdGVyaXN0aWNz
OgorICoKKyAqIC0gVGhlIGNvbm5lY3RvciBzeXNmcyBkZXZpY2UgaXMgdXNlZCBhcyBhIHBhcmVu
dCBkZXZpY2UgZm9yIHRoZSBiYWNrbGlnaHQgZGV2aWNlLgorICogICBVc2Vyc3BhY2UgY2FuIHVz
ZSB0aGlzIHRvIGNvbm5lY3QgYmFja2xpZ2h0IGRldmljZSBhbmQgY29ubmVjdG9yLgorICogLSBO
YW1lIHdpbGwgYmUgb24gdGhlIGZvcm06ICoqY2FyZDAtSERNSS1BLTEtYmFja2xpZ2h0KioKKyAq
IC0gVHlwZSBpcyAicmF3IgorICogLSBTY2FsZSBpcyAibm9uLWxpbmVhciIgKHBlcmNlcHR1YWwp
CisgKiAtIE1heCBicmlnaHRuZXNzIGlzIDEwMCBnaXZpbmcgYSByYW5nZSBvZiAwLTEwMCBpbmNs
dXNpdmUKKyAqIC0gUmVhZGluZyBzeXNmcyAqKmJyaWdodG5lc3MqKiByZXR1cm5zIHRoZSBiYWNr
bGlnaHQgZGV2aWNlIHByb3BlcnR5CisgKiAtIFJlYWRpbmcgc3lzZnMgKiphY3R1YWxfYnJpZ2h0
bmVzcyoqIHJldHVybnMgdGhlIGNvbm5lY3RvciBzdGF0ZSB2YWx1ZQorICogLSBXcml0aW5nIHN5
c2ZzICoqYmxfcG93ZXIqKiBpcyBpZ25vcmVkLCB0aGUgRFBNUyBjb25uZWN0b3IgcHJvcGVydHkg
c2hvdWxkCisgKiAgIGJlIHVzZWQgdG8gY29udHJvbCBwb3dlci4KKyAqIC0gQmFja2xpZ2h0IGRl
dmljZSBzdXNwZW5kL3Jlc3VtZSBldmVudHMgYXJlIGlnbm9yZWQuCisgKgorICogTm90ZToKKyAq
CisgKiBCcmlnaHRuZXNzIHplcm8gc2hvdWxkIG5vdCB0dXJuIG9mZiBiYWNrbGlnaHQgaXQgc2hv
dWxkIGJlIHRoZSBtaW5pbXVtCisgKiBicmlnaHRuZXNzLCBEUE1TIGhhbmRsZXMgcG93ZXIuCisg
KgorICogVGhpcyBmdW5jdGlvbiBtdXN0IGJlIGNhbGxlZCBmcm9tICZkcm1fY29ubmVjdG9yX2Z1
bmNzLT5sYXRlX3JlZ2lzdGVyKCkgc2luY2UKKyAqIGl0IGRlcGVuZHMgb24gdGhlIHN5c2ZzIGRl
dmljZS4KKyAqCisgKiBSZXR1cm5zOgorICogWmVybyBvbiBzdWNjZXNzIG9yIG5lZ2F0aXZlIGVy
cm9yIGNvZGUgb24gZmFpbHVyZS4KKyAqLworaW50IGRybV9iYWNrbGlnaHRfcmVnaXN0ZXIoc3Ry
dWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKK3sKKwljb25zdCBjaGFyICpuYW1lID0gTlVM
TDsKKwlpbnQgcmV0OworCisJbmFtZSA9IGthc3ByaW50ZihHRlBfS0VSTkVMLCAiY2FyZCVkLSVz
LWJhY2tsaWdodCIsCisJCQkgY29ubmVjdG9yLT5kZXYtPnByaW1hcnktPmluZGV4LCBjb25uZWN0
b3ItPm5hbWUpOworCWlmICghbmFtZSkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlyZXQgPSBkcm1f
YmFja2xpZ2h0X3JlZ2lzdGVyX3dpdGhfbmFtZShjb25uZWN0b3IsIG5hbWUpOworCWtmcmVlKG5h
bWUpOworCisJcmV0dXJuIHJldDsKK30KK0VYUE9SVF9TWU1CT0woZHJtX2JhY2tsaWdodF9yZWdp
c3Rlcik7CisKKy8qKgorICogZHJtX2JhY2tsaWdodF91bnJlZ2lzdGVyKCkgLSBVbnJlZ2lzdGVy
IGJhY2tsaWdodCBkZXZpY2UKKyAqIEBjb25uZWN0b3I6IENvbm5lY3RvcgorICoKKyAqIFVucmVn
aXN0ZXIgYSBiYWNrbGlnaHQgZGV2aWNlLiBUaGlzIG11c3QgYmUgY2FsbGVkIGZyb20gdGhlCisg
KiAmZHJtX2Nvbm5lY3Rvcl9mdW5jcy0+ZWFybHlfdW5yZWdpc3RlcigpIGNhbGxiYWNrLgorICov
Cit2b2lkIGRybV9iYWNrbGlnaHRfdW5yZWdpc3RlcihzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29u
bmVjdG9yKQoreworCWJhY2tsaWdodF9kZXZpY2VfdW5yZWdpc3Rlcihjb25uZWN0b3ItPmJhY2ts
aWdodCk7Cit9CitFWFBPUlRfU1lNQk9MKGRybV9iYWNrbGlnaHRfdW5yZWdpc3Rlcik7CmRpZmYg
LS1naXQgYS9pbmNsdWRlL2RybS9kcm1fYmFja2xpZ2h0X2hlbHBlci5oIGIvaW5jbHVkZS9kcm0v
ZHJtX2JhY2tsaWdodF9oZWxwZXIuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAw
MDAwMDAuLjQxNTFiNjZlYjBiNAotLS0gL2Rldi9udWxsCisrKyBiL2luY2x1ZGUvZHJtL2RybV9i
YWNrbGlnaHRfaGVscGVyLmgKQEAgLTAsMCArMSw5IEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRp
ZmllcjogR1BMLTIuMCBPUiBNSVQgKi8KKworI2lmbmRlZiBfTElOVVhfRFJNX0JBQ0tMSUdIVF9I
RUxQRVJfSAorI2RlZmluZSBfTElOVVhfRFJNX0JBQ0tMSUdIVF9IRUxQRVJfSAorCitpbnQgZHJt
X2JhY2tsaWdodF9yZWdpc3RlcihzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKTsKK3Zv
aWQgZHJtX2JhY2tsaWdodF91bnJlZ2lzdGVyKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0
b3IpOworCisjZW5kaWYKZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9jb25uZWN0b3IuaCBi
L2luY2x1ZGUvZHJtL2RybV9jb25uZWN0b3IuaAppbmRleCAyMjE5MTA5NDhiMzcuLmNlNjc4YjY5
NGY0NSAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2Nvbm5lY3Rvci5oCisrKyBiL2luY2x1
ZGUvZHJtL2RybV9jb25uZWN0b3IuaApAQCAtMzIsNiArMzIsNyBAQAogCiAjaW5jbHVkZSA8dWFw
aS9kcm0vZHJtX21vZGUuaD4KIAorc3RydWN0IGJhY2tsaWdodF9kZXZpY2U7CiBzdHJ1Y3QgZHJt
X2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3M7CiBzdHJ1Y3QgZHJtX21vZGVzZXRfYWNxdWlyZV9jdHg7
CiBzdHJ1Y3QgZHJtX2RldmljZTsKQEAgLTY1Niw2ICs2NTcsMTIgQEAgc3RydWN0IGRybV9jb25u
ZWN0b3Jfc3RhdGUgewogCSAqLwogCXU4IG1heF9icGM7CiAKKwkvKioKKwkgKiBAYmFja2xpZ2h0
X2JyaWdodG5lc3M6IEJyaWdodG5lc3MgdmFsdWUgb2YgdGhlIGNvbm5lY3RvciBiYWNrbGlnaHQK
KwkgKiBkZXZpY2UuIFNlZSBkcm1fYmFja2xpZ2h0X3JlZ2lzdGVyKCkuCisJICovCisJdTggYmFj
a2xpZ2h0X2JyaWdodG5lc3M7CisKIAkvKioKIAkgKiBAaGRyX291dHB1dF9tZXRhZGF0YToKIAkg
KiBEUk0gYmxvYiBwcm9wZXJ0eSBmb3IgSERSIG91dHB1dCBtZXRhZGF0YQpAQCAtMTQyMiw2ICsx
NDI5LDkgQEAgc3RydWN0IGRybV9jb25uZWN0b3IgewogCiAJLyoqIEBoZHJfc2lua19tZXRhZGF0
YTogSERSIE1ldGFkYXRhIEluZm9ybWF0aW9uIHJlYWQgZnJvbSBzaW5rICovCiAJc3RydWN0IGhk
cl9zaW5rX21ldGFkYXRhIGhkcl9zaW5rX21ldGFkYXRhOworCisJLyoqIEBiYWNrbGlnaHQ6IEJh
Y2tsaWdodCBkZXZpY2UuIFNlZSBkcm1fYmFja2xpZ2h0X3JlZ2lzdGVyKCkgKi8KKwlzdHJ1Y3Qg
YmFja2xpZ2h0X2RldmljZSAqYmFja2xpZ2h0OwogfTsKIAogI2RlZmluZSBvYmpfdG9fY29ubmVj
dG9yKHgpIGNvbnRhaW5lcl9vZih4LCBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciwgYmFzZSkKLS0gCjIu
MjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJp
LWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVsCg==
