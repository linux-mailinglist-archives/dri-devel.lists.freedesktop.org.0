Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 280AA29444
	for <lists+dri-devel@lfdr.de>; Fri, 24 May 2019 11:12:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 725926E0BC;
	Fri, 24 May 2019 09:12:09 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from ste-pvt-msa2.bahnhof.se (ste-pvt-msa2.bahnhof.se
 [213.80.101.71])
 by gabe.freedesktop.org (Postfix) with ESMTPS id AD3EA6E0B6
 for <dri-devel@lists.freedesktop.org>; Fri, 24 May 2019 09:12:07 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by ste-pvt-msa2.bahnhof.se (Postfix) with ESMTP id F12DA3F3E2;
 Fri, 24 May 2019 11:12:05 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at bahnhof.se
X-Spam-Flag: NO
X-Spam-Score: -3.099
X-Spam-Level: 
X-Spam-Status: No, score=-3.099 tagged_above=-999 required=6.31
 tests=[ALL_TRUSTED=-1, BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1,
 URIBL_BLOCKED=0.001] autolearn=ham autolearn_force=no
Received: from ste-pvt-msa2.bahnhof.se ([127.0.0.1])
 by localhost (ste-ftg-msa2.bahnhof.se [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id S3xDsJMuRuy7; Fri, 24 May 2019 11:11:55 +0200 (CEST)
Received: from mail1.shipmail.org (h-205-35.A357.priv.bahnhof.se
 [155.4.205.35]) (Authenticated sender: mb878879)
 by ste-pvt-msa2.bahnhof.se (Postfix) with ESMTPA id E54563F6A4;
 Fri, 24 May 2019 11:11:54 +0200 (CEST)
Received: from localhost.localdomain (h-205-35.A357.priv.bahnhof.se
 [155.4.205.35])
 by mail1.shipmail.org (Postfix) with ESMTPSA id 704E03600B5;
 Fri, 24 May 2019 11:11:54 +0200 (CEST)
Subject: Re: [RFC PATCH] drm/ttm, drm/vmwgfx: Have TTM support AMD SEV
 encryption
To: "Koenig, Christian" <Christian.Koenig@amd.com>,
 "dri-devel@lists.freedesktop.org" <dri-devel@lists.freedesktop.org>
References: <20190524081114.53661-1-thomas@shipmail.org>
 <f2c4ccdd-49c9-2188-3378-2f333a8f605f@amd.com>
From: Thomas Hellstrom <thomas@shipmail.org>
Message-ID: <d397836b-13a4-b6cd-e059-035203f2edc6@shipmail.org>
Date: Fri, 24 May 2019 11:11:54 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <f2c4ccdd-49c9-2188-3378-2f333a8f605f@amd.com>
Content-Language: en-US
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=shipmail.org; s=mail; 
 t=1558689114; bh=Pj5TxnOApOXfxKxHJkAMOTk4VaWiPt3jIH0JnJs90rg=;
 h=Subject:To:Cc:References:From:Date:In-Reply-To:From;
 b=PyWxjpTGcH6078Cmc4LT9Asw93s5kF0rpciRnFEIqUb7DOXVzxxtiomoQ0sXWKtki
 zaDNMq/heePAE4rxOjwOIT9QGK/8L1273+qU3c18xU4veYrPATcs7CbmbOVXsAxE1x
 fcolLZHsHCQXfODxGYC79TFc0e0d4DytDxKZh+WU=
X-Mailman-Original-Authentication-Results: ste-pvt-msa2.bahnhof.se;
 dkim=pass (1024-bit key;
 unprotected) header.d=shipmail.org header.i=@shipmail.org header.b=PyWxjpTG; 
 dkim-atps=neutral
X-Mailman-Original-Authentication-Results: ste-ftg-msa2.bahnhof.se
 (amavisd-new); 
 dkim=pass (1024-bit key) header.d=shipmail.org
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Hellstrom <thellstrom@vmware.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGksIENocmlzdGlhbiwKCk9uIDUvMjQvMTkgMTA6MzcgQU0sIEtvZW5pZywgQ2hyaXN0aWFuIHdy
b3RlOgo+IEFtIDI0LjA1LjE5IHVtIDEwOjExIHNjaHJpZWIgVGhvbWFzIEhlbGxzdHLDtm0gKFZN
d2FyZSk6Cj4+IFtDQVVUSU9OOiBFeHRlcm5hbCBFbWFpbF0KPj4KPj4gRnJvbTogVGhvbWFzIEhl
bGxzdHJvbSA8dGhlbGxzdHJvbUB2bXdhcmUuY29tPgo+Pgo+PiBXaXRoIFNFViBlbmNyeXB0aW9u
LCBhbGwgRE1BIG1lbW9yeSBtdXN0IGJlIG1hcmtlZCBkZWNyeXB0ZWQKPj4gKEFLQSAic2hhcmVk
IikgZm9yIGRldmljZXMgdG8gYmUgYWJsZSB0byByZWFkIGl0LiBJbiB0aGUgZnV0dXJlIHdlIG1p
Z2h0Cj4+IHdhbnQgdG8gYmUgYWJsZSB0byBzd2l0Y2ggbm9ybWFsIChlbmNyeXB0ZWQpIG1lbW9y
eSB0byBkZWNyeXB0ZWQgaW4gZXhhY3RseQo+PiB0aGUgc2FtZSB3YXkgYXMgd2UgaGFuZGxlIGNh
Y2hpbmcgc3RhdGVzLCBhbmQgdGhhdCB3b3VsZCByZXF1aXJlIGFkZGl0aW9uYWwKPj4gbWVtb3J5
IHBvb2xzLiBCdXQgZm9yIG5vdywgcmVseSBvbiBtZW1vcnkgYWxsb2NhdGVkIHdpdGgKPj4gZG1h
X2FsbG9jX2NvaGVyZW50KCkgd2hpY2ggaXMgYWxyZWFkeSBkZWNyeXB0ZWQgd2l0aCBTRVYgZW5h
YmxlZC4gU2V0IHVwCj4+IHRoZSBwYWdlIHByb3RlY3Rpb24gYWNjb3JkaW5nbHkuIERyaXZlcnMg
bXVzdCBkZXRlY3QgU0VWIGVuYWJsZWQgYW5kIHN3aXRjaAo+PiB0byB0aGUgZG1hIHBhZ2UgcG9v
bC4KPj4KPj4gVGhpcyBwYXRjaCBoYXMgbm90IHlldCBiZWVuIHRlc3RlZC4gQXMgYSBmb2xsb3ct
dXAsIHdlIG1pZ2h0IHdhbnQgdG8KPj4gY2FjaGUgZGVjcnlwdGVkIHBhZ2VzIGluIHRoZSBkbWEg
cGFnZSBwb29sIHJlZ2FyZGxlc3Mgb2YgdGhlaXIgY2FjaGluZwo+PiBzdGF0ZS4KPiBUaGlzIHBh
dGNoIGlzIHVubmVjZXNzYXJ5LCBTRVYgc3VwcG9ydCBhbHJlYWR5IHdvcmtzIGZpbmUgd2l0aCBh
dCBsZWFzdAo+IGFtZGdwdSBhbmQgSSB3b3VsZCBleHBlY3QgdGhhdCBpdCBhbHNvIHdvcmtzIHdp
dGggb3RoZXIgZHJpdmVycyBhcyB3ZWxsLgo+Cj4gQWxzbyBzZWUgdGhpcyBwYXRjaDoKPgo+IGNv
bW1pdCA2NGUxZjgzMGVhNWIzNTE2YTQyNTZlZDFjNTA0YTI2NWQ3ZjJhNjVjCj4gQXV0aG9yOiBD
aHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Cj4gRGF0ZTrCoMKgIFdl
ZCBNYXIgMTMgMTA6MTE6MTkgMjAxOSArMDEwMAo+Cj4gICDCoMKgwqAgZHJtOiBmYWxsYmFjayB0
byBkbWFfYWxsb2NfY29oZXJlbnQgd2hlbiBtZW1vcnkgZW5jcnlwdGlvbiBpcyBhY3RpdmUKPgo+
ICAgwqDCoMKgIFdlIGNhbid0IGp1c3QgbWFwIGFueSByYW5kb21lIHBhZ2Ugd2UgZ2V0IHdoZW4g
bWVtb3J5IGVuY3J5cHRpb24gaXMKPiAgIMKgwqDCoCBhY3RpdmUuCj4KPiAgIMKgwqDCoCBTaWdu
ZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Cj4g
ICDCoMKgwqAgQWNrZWQtYnk6IEFsZXggRGV1Y2hlciA8YWxleGFuZGVyLmRldWNoZXJAYW1kLmNv
bT4KPiAgIMKgwqDCoCBMaW5rOiBodHRwczovL3BhdGNod29yay5rZXJuZWwub3JnL3BhdGNoLzEw
ODUwODMzLwo+Cj4gUmVnYXJkcywKPiBDaHJpc3RpYW4uCgpZZXMsIEkgbm90aWNlZCB0aGF0LiBB
bHRob3VnaCBJIGZhaWwgdG8gc2VlIHdoZXJlIHdlIGF1dG9tYWdpY2FsbHkgY2xlYXIgCnRoZSBQ
VEUgZW5jcnlwdGVkIGJpdCB3aGVuIG1hcHBpbmcgY29oZXJlbnQgbWVtb3J5PyBGb3IgdGhlIGxp
bmVhciAKa2VybmVsIG1hcCwgdGhhdCdzIGRvbmUgd2l0aGluIGRtYV9hbGxvY19jb2hlcmVudCgp
IGJ1dCBmb3Iga2VybmVsIHZtYXBzIAphbmQgYW5kIHVzZXItc3BhY2UgbWFwcz8gSXMgdGhhdCBk
b25lIGF1dG9tYXRpY2FsbHkgYnkgdGhlIHg4NiBwbGF0Zm9ybSAKbGF5ZXI/CgovVGhvbWFzCgoK
Pgo+PiBDYzogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPgo+PiBT
aWduZWQtb2ZmLWJ5OiBUaG9tYXMgSGVsbHN0cm9tIDx0aGVsbHN0cm9tQHZtd2FyZS5jb20+Cj4+
IC0tLQo+PiAgICBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMgICAgICAgIHwgMTcg
KysrKysrKysrKysrKy0tLS0KPj4gICAgZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdm0uYyAg
ICAgICAgICB8ICA2ICsrKystLQo+PiAgICBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9wYWdlX2Fs
bG9jX2RtYS5jIHwgIDMgKysrCj4+ICAgIGRyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2Js
aXQuYyAgICAgfCAgNiArKysrLS0KPj4gICAgaW5jbHVkZS9kcm0vdHRtL3R0bV9ib19kcml2ZXIu
aCAgICAgICAgICB8ICA4ICsrKysrLS0tCj4+ICAgIGluY2x1ZGUvZHJtL3R0bS90dG1fdHQuaCAg
ICAgICAgICAgICAgICAgfCAgMSArCj4+ICAgIDYgZmlsZXMgY2hhbmdlZCwgMzAgaW5zZXJ0aW9u
cygrKSwgMTEgZGVsZXRpb25zKC0pCj4+Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV9ib191dGlsLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMKPj4g
aW5kZXggODk1ZDc3ZDc5OWU0Li4xZDY2NDNiZDBiMDEgMTAwNjQ0Cj4+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS90dG0vdHRtX2JvX3V0aWwuYwo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0
bV9ib191dGlsLmMKPj4gQEAgLTQxOSwxMSArNDE5LDEzIEBAIGludCB0dG1fYm9fbW92ZV9tZW1j
cHkoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKPj4gICAgICAgICAgICAgICAgICAgcGFn
ZSA9IGkgKiBkaXIgKyBhZGQ7Cj4+ICAgICAgICAgICAgICAgICAgIGlmIChvbGRfaW9tYXAgPT0g
TlVMTCkgewo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBncHJvdF90IHByb3QgPSB0dG1f
aW9fcHJvdChvbGRfbWVtLT5wbGFjZW1lbnQsCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB0dG0tPnBhZ2VfZmxhZ3MsCj4+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBBR0VfS0VSTkVMKTsK
Pj4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSB0dG1fY29weV90dG1faW9fcGFnZSh0
dG0sIG5ld19pb21hcCwgcGFnZSwKPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBwcm90KTsKPj4gICAgICAgICAgICAgICAgICAgfSBlbHNlIGlm
IChuZXdfaW9tYXAgPT0gTlVMTCkgewo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBncHJv
dF90IHByb3QgPSB0dG1faW9fcHJvdChuZXdfbWVtLT5wbGFjZW1lbnQsCj4+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dG0tPnBhZ2VfZmxhZ3Ms
Cj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFBBR0VfS0VSTkVMKTsKPj4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSB0dG1fY29w
eV9pb190dG1fcGFnZSh0dG0sIG9sZF9pb21hcCwgcGFnZSwKPj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm90KTsKPj4gQEAgLTUyNiwxMSAr
NTI4LDExIEBAIHN0YXRpYyBpbnQgdHRtX2J1ZmZlcl9vYmplY3RfdHJhbnNmZXIoc3RydWN0IHR0
bV9idWZmZXJfb2JqZWN0ICpibywKPj4gICAgICAgICAgIHJldHVybiAwOwo+PiAgICB9Cj4+Cj4+
IC1wZ3Byb3RfdCB0dG1faW9fcHJvdCh1aW50MzJfdCBjYWNoaW5nX2ZsYWdzLCBwZ3Byb3RfdCB0
bXApCj4+ICtwZ3Byb3RfdCB0dG1faW9fcHJvdCh1MzIgY2FjaGluZ19mbGFncywgdTMyIHR0X3Bh
Z2VfZmxhZ3MsIHBncHJvdF90IHRtcCkKPj4gICAgewo+PiAgICAgICAgICAgLyogQ2FjaGVkIG1h
cHBpbmdzIG5lZWQgbm8gYWRqdXN0bWVudCAqLwo+PiAgICAgICAgICAgaWYgKGNhY2hpbmdfZmxh
Z3MgJiBUVE1fUExfRkxBR19DQUNIRUQpCj4+IC0gICAgICAgICAgICAgICByZXR1cm4gdG1wOwo+
PiArICAgICAgICAgICAgICAgZ290byBjaGVja19lbmNyeXB0aW9uOwo+Pgo+PiAgICAjaWYgZGVm
aW5lZChfX2kzODZfXykgfHwgZGVmaW5lZChfX3g4Nl82NF9fKQo+PiAgICAgICAgICAgaWYgKGNh
Y2hpbmdfZmxhZ3MgJiBUVE1fUExfRkxBR19XQykKPj4gQEAgLTU0OCw2ICs1NTAsMTEgQEAgcGdw
cm90X3QgdHRtX2lvX3Byb3QodWludDMyX3QgY2FjaGluZ19mbGFncywgcGdwcm90X3QgdG1wKQo+
PiAgICAjaWYgZGVmaW5lZChfX3NwYXJjX18pIHx8IGRlZmluZWQoX19taXBzX18pCj4+ICAgICAg
ICAgICB0bXAgPSBwZ3Byb3Rfbm9uY2FjaGVkKHRtcCk7Cj4+ICAgICNlbmRpZgo+PiArCj4+ICtj
aGVja19lbmNyeXB0aW9uOgo+PiArICAgICAgIGlmICh0dF9wYWdlX2ZsYWdzICYgVFRNX1BBR0Vf
RkxBR19ERUNSWVBURUQpCj4+ICsgICAgICAgICAgICAgICB0bXAgPSBwZ3Byb3RfZGVjcnlwdGVk
KHRtcCk7Cj4+ICsKPj4gICAgICAgICAgIHJldHVybiB0bXA7Cj4+ICAgIH0KPj4gICAgRVhQT1JU
X1NZTUJPTCh0dG1faW9fcHJvdCk7Cj4+IEBAIC01OTQsNyArNjAxLDggQEAgc3RhdGljIGludCB0
dG1fYm9fa21hcF90dG0oc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKPj4gICAgICAgICAg
IGlmIChyZXQpCj4+ICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4+Cj4+IC0gICAgICAg
aWYgKG51bV9wYWdlcyA9PSAxICYmIChtZW0tPnBsYWNlbWVudCAmIFRUTV9QTF9GTEFHX0NBQ0hF
RCkpIHsKPj4gKyAgICAgICBpZiAobnVtX3BhZ2VzID09IDEgJiYgKG1lbS0+cGxhY2VtZW50ICYg
VFRNX1BMX0ZMQUdfQ0FDSEVEKSAmJgo+PiArICAgICAgICAgICAhKHR0bS0+cGFnZV9mbGFncyAm
IFRUTV9QQUdFX0ZMQUdfREVDUllQVEVEKSkgewo+PiAgICAgICAgICAgICAgICAgICAvKgo+PiAg
ICAgICAgICAgICAgICAgICAgKiBXZSdyZSBtYXBwaW5nIGEgc2luZ2xlIHBhZ2UsIGFuZCB0aGUg
ZGVzaXJlZAo+PiAgICAgICAgICAgICAgICAgICAgKiBwYWdlIHByb3RlY3Rpb24gaXMgY29uc2lz
dGVudCB3aXRoIHRoZSBiby4KPj4gQEAgLTYwOCw3ICs2MTYsOCBAQCBzdGF0aWMgaW50IHR0bV9i
b19rbWFwX3R0bShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAo+PiAgICAgICAgICAgICAg
ICAgICAgKiBXZSBuZWVkIHRvIHVzZSB2bWFwIHRvIGdldCB0aGUgZGVzaXJlZCBwYWdlIHByb3Rl
Y3Rpb24KPj4gICAgICAgICAgICAgICAgICAgICogb3IgdG8gbWFrZSB0aGUgYnVmZmVyIG9iamVj
dCBsb29rIGNvbnRpZ3VvdXMuCj4+ICAgICAgICAgICAgICAgICAgICAqLwo+PiAtICAgICAgICAg
ICAgICAgcHJvdCA9IHR0bV9pb19wcm90KG1lbS0+cGxhY2VtZW50LCBQQUdFX0tFUk5FTCk7Cj4+
ICsgICAgICAgICAgICAgICBwcm90ID0gdHRtX2lvX3Byb3QobWVtLT5wbGFjZW1lbnQsIHR0bS0+
cGFnZV9mbGFncywKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQQUdFX0tF
Uk5FTCk7Cj4+ICAgICAgICAgICAgICAgICAgIG1hcC0+Ym9fa21hcF90eXBlID0gdHRtX2JvX21h
cF92bWFwOwo+PiAgICAgICAgICAgICAgICAgICBtYXAtPnZpcnR1YWwgPSB2bWFwKHR0bS0+cGFn
ZXMgKyBzdGFydF9wYWdlLCBudW1fcGFnZXMsCj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgMCwgcHJvdCk7Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRt
L3R0bV9ib192bS5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdm0uYwo+PiBpbmRleCAy
ZDk4NjJmY2Y2ZmQuLmUxMjI0N2VkZDI0MyAxMDA2NDQKPj4gLS0tIGEvZHJpdmVycy9ncHUvZHJt
L3R0bS90dG1fYm9fdm0uYwo+PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5j
Cj4+IEBAIC0yNDUsNyArMjQ1LDYgQEAgdm1fZmF1bHRfdCB0dG1fYm9fdm1fZmF1bHRfcmVzZXJ2
ZWQoc3RydWN0IHZtX2ZhdWx0ICp2bWYsCj4+ICAgICAgICAgICAgICAgICAgIGdvdG8gb3V0X2lv
X3VubG9jazsKPj4gICAgICAgICAgIH0KPj4KPj4gLSAgICAgICBjdm1hLnZtX3BhZ2VfcHJvdCA9
IHR0bV9pb19wcm90KGJvLT5tZW0ucGxhY2VtZW50LCBwcm90KTsKPj4gICAgICAgICAgIGlmICgh
Ym8tPm1lbS5idXMuaXNfaW9tZW0pIHsKPj4gICAgICAgICAgICAgICAgICAgc3RydWN0IHR0bV9v
cGVyYXRpb25fY3R4IGN0eCA9IHsKPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAuaW50ZXJy
dXB0aWJsZSA9IGZhbHNlLAo+PiBAQCAtMjU1LDEzICsyNTQsMTYgQEAgdm1fZmF1bHRfdCB0dG1f
Ym9fdm1fZmF1bHRfcmVzZXJ2ZWQoc3RydWN0IHZtX2ZhdWx0ICp2bWYsCj4+ICAgICAgICAgICAg
ICAgICAgIH07Cj4+Cj4+ICAgICAgICAgICAgICAgICAgIHR0bSA9IGJvLT50dG07Cj4+ICsgICAg
ICAgICAgICAgICBjdm1hLnZtX3BhZ2VfcHJvdCA9IHR0bV9pb19wcm90KGJvLT5tZW0ucGxhY2Vt
ZW50LAo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0
dG0tPnBhZ2VfZmxhZ3MsIHByb3QpOwo+PiAgICAgICAgICAgICAgICAgICBpZiAodHRtX3R0X3Bv
cHVsYXRlKGJvLT50dG0sICZjdHgpKSB7Cj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0
ID0gVk1fRkFVTFRfT09NOwo+PiAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gb3V0X2lv
X3VubG9jazsKPj4gICAgICAgICAgICAgICAgICAgfQo+PiAgICAgICAgICAgfSBlbHNlIHsKPj4g
ICAgICAgICAgICAgICAgICAgLyogSW9tZW0gc2hvdWxkIG5vdCBiZSBtYXJrZWQgZW5jcnlwdGVk
ICovCj4+IC0gICAgICAgICAgICAgICBjdm1hLnZtX3BhZ2VfcHJvdCA9IHBncHJvdF9kZWNyeXB0
ZWQoY3ZtYS52bV9wYWdlX3Byb3QpOwo+PiArICAgICAgICAgICAgICAgY3ZtYS52bV9wYWdlX3By
b3QgPSB0dG1faW9fcHJvdChiby0+bWVtLnBsYWNlbWVudCwKPj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVFRNX1BBR0VfRkxBR19ERUNSWVBURUQsIHBy
b3QpOwo+PiAgICAgICAgICAgfQo+Pgo+PiAgICAgICAgICAgLyoKPj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS90dG0vdHRtX3BhZ2VfYWxsb2NfZG1hLmMgYi9kcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV9wYWdlX2FsbG9jX2RtYS5jCj4+IGluZGV4IDk4ZDEwMGZkMTU5OS4uMWE4YTA5YzA1
ODA1IDEwMDY0NAo+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9wYWdlX2FsbG9jX2Rt
YS5jCj4+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX3BhZ2VfYWxsb2NfZG1hLmMKPj4g
QEAgLTk3OSw2ICs5NzksOSBAQCBpbnQgdHRtX2RtYV9wb3B1bGF0ZShzdHJ1Y3QgdHRtX2RtYV90
dCAqdHRtX2RtYSwgc3RydWN0IGRldmljZSAqZGV2LAo+PiAgICAgICAgICAgfQo+Pgo+PiAgICAg
ICAgICAgdHRtLT5zdGF0ZSA9IHR0X3VuYm91bmQ7Cj4+ICsgICAgICAgaWYgKHNldl9hY3RpdmUo
KSkKPj4gKyAgICAgICAgICAgICAgIHR0bS0+cGFnZV9mbGFncyB8PSBUVE1fUEFHRV9GTEFHX0RF
Q1JZUFRFRDsKPj4gKwo+PiAgICAgICAgICAgcmV0dXJuIDA7Cj4+ICAgIH0KPj4gICAgRVhQT1JU
X1NZTUJPTF9HUEwodHRtX2RtYV9wb3B1bGF0ZSk7Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vdm13Z2Z4L3Ztd2dmeF9ibGl0LmMgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dm
eF9ibGl0LmMKPj4gaW5kZXggZmM2NjczY2RlMjg5Li4xMWM4Y2QyNDg1MzAgMTAwNjQ0Cj4+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2JsaXQuYwo+PiArKysgYi9kcml2ZXJz
L2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9ibGl0LmMKPj4gQEAgLTQ4Myw4ICs0ODMsMTAgQEAgaW50
IHZtd19ib19jcHVfYmxpdChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmRzdCwKPj4gICAgICAg
ICAgIGQuc3JjX3BhZ2VzID0gc3JjLT50dG0tPnBhZ2VzOwo+PiAgICAgICAgICAgZC5kc3RfbnVt
X3BhZ2VzID0gZHN0LT5udW1fcGFnZXM7Cj4+ICAgICAgICAgICBkLnNyY19udW1fcGFnZXMgPSBz
cmMtPm51bV9wYWdlczsKPj4gLSAgICAgICBkLmRzdF9wcm90ID0gdHRtX2lvX3Byb3QoZHN0LT5t
ZW0ucGxhY2VtZW50LCBQQUdFX0tFUk5FTCk7Cj4+IC0gICAgICAgZC5zcmNfcHJvdCA9IHR0bV9p
b19wcm90KHNyYy0+bWVtLnBsYWNlbWVudCwgUEFHRV9LRVJORUwpOwo+PiArICAgICAgIGQuZHN0
X3Byb3QgPSB0dG1faW9fcHJvdChkc3QtPm1lbS5wbGFjZW1lbnQsIGRzdC0+dHRtLT5wYWdlX2Zs
YWdzLAo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQQUdFX0tFUk5FTCk7Cj4+
ICsgICAgICAgZC5zcmNfcHJvdCA9IHR0bV9pb19wcm90KHNyYy0+bWVtLnBsYWNlbWVudCwgc3Jj
LT50dG0tPnBhZ2VfZmxhZ3MsCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBB
R0VfS0VSTkVMKTsKPj4gICAgICAgICAgIGQuZGlmZiA9IGRpZmY7Cj4+Cj4+ICAgICAgICAgICBm
b3IgKGogPSAwOyBqIDwgaDsgKytqKSB7Cj4+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS90dG0v
dHRtX2JvX2RyaXZlci5oIGIvaW5jbHVkZS9kcm0vdHRtL3R0bV9ib19kcml2ZXIuaAo+PiBpbmRl
eCA1M2ZlOTViZTViMzIuLjI2MWNjODljMDI0ZSAxMDA2NDQKPj4gLS0tIGEvaW5jbHVkZS9kcm0v
dHRtL3R0bV9ib19kcml2ZXIuaAo+PiArKysgYi9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2RyaXZl
ci5oCj4+IEBAIC04ODksMTMgKzg4OSwxNSBAQCBpbnQgdHRtX2JvX3BpcGVsaW5lX2d1dHRpbmco
c3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibyk7Cj4+ICAgIC8qKgo+PiAgICAgKiB0dG1faW9f
cHJvdAo+PiAgICAgKgo+PiAtICogQGNfc3RhdGU6IENhY2hpbmcgc3RhdGUuCj4+ICsgKiBAY2Fj
aGluZ19mbGFnczogVGhlIGNhY2hpbmcgZmxhZ3Mgb2YgdGhlIG1hcC4KPj4gKyAqIEB0dF9wYWdl
X2ZsYWdzOiBUaGUgdHRfcGFnZV9mbGFncyBvZiB0aGUgbWFwLCBUVE1fUEFHRV9GTEFHXyoKPj4g
ICAgICogQHRtcDogUGFnZSBwcm90ZWN0aW9uIGZsYWcgZm9yIGEgbm9ybWFsLCBjYWNoZWQgbWFw
cGluZy4KPj4gICAgICoKPj4gICAgICogVXRpbGl0eSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhl
IHBncHJvdF90IHRoYXQgc2hvdWxkIGJlIHVzZWQgZm9yCj4+IC0gKiBzZXR0aW5nIHVwIGEgUFRF
IHdpdGggdGhlIGNhY2hpbmcgbW9kZWwgaW5kaWNhdGVkIGJ5IEBjX3N0YXRlLgo+PiArICogc2V0
dGluZyB1cCBhIFBURSB3aXRoIHRoZSBjYWNoaW5nIG1vZGVsIGluZGljYXRlZCBieSBAY2FjaGlu
Z19mbGFncywKPj4gKyAqIGFuZCBlbmNyeXB0aW9uIHN0YXRlIGluZGljYXRlZCBieSBAdHRfcGFn
ZV9mbGFncywKPj4gICAgICovCj4+IC1wZ3Byb3RfdCB0dG1faW9fcHJvdCh1aW50MzJfdCBjYWNo
aW5nX2ZsYWdzLCBwZ3Byb3RfdCB0bXApOwo+PiArcGdwcm90X3QgdHRtX2lvX3Byb3QodTMyIGNh
Y2hpbmdfZmxhZ3MsIHUzMiB0dF9wYWdlX2ZsYWdzLCBwZ3Byb3RfdCB0bXApOwo+Pgo+PiAgICBl
eHRlcm4gY29uc3Qgc3RydWN0IHR0bV9tZW1fdHlwZV9tYW5hZ2VyX2Z1bmMgdHRtX2JvX21hbmFn
ZXJfZnVuYzsKPj4KPj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL3R0bS90dG1fdHQuaCBiL2lu
Y2x1ZGUvZHJtL3R0bS90dG1fdHQuaAo+PiBpbmRleCBjMGU5MjhhYmY1OTIuLjQ1Y2MyNjM1NTUx
MyAxMDA2NDQKPj4gLS0tIGEvaW5jbHVkZS9kcm0vdHRtL3R0bV90dC5oCj4+ICsrKyBiL2luY2x1
ZGUvZHJtL3R0bS90dG1fdHQuaAo+PiBAQCAtNDEsNiArNDEsNyBAQCBzdHJ1Y3QgdHRtX29wZXJh
dGlvbl9jdHg7Cj4+ICAgICNkZWZpbmUgVFRNX1BBR0VfRkxBR19ETUEzMiAgICAgICAgICAgKDEg
PDwgNykKPj4gICAgI2RlZmluZSBUVE1fUEFHRV9GTEFHX1NHICAgICAgICAgICAgICAoMSA8PCA4
KQo+PiAgICAjZGVmaW5lIFRUTV9QQUdFX0ZMQUdfTk9fUkVUUlkgICAgICAgKDEgPDwgOSkKPj4g
KyNkZWZpbmUgVFRNX1BBR0VfRkxBR19ERUNSWVBURUQgICAgICAgKDEgPDwgMTApCj4+Cj4+ICAg
IGVudW0gdHRtX2NhY2hpbmdfc3RhdGUgewo+PiAgICAgICAgICAgdHRfdW5jYWNoZWQsCj4+IC0t
Cj4+IDIuMjAuMQo+PgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Au
b3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRl
dmVs
