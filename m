Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EECC6178E9D
	for <lists+dri-devel@lfdr.de>; Wed,  4 Mar 2020 11:41:21 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CC1D46EA4F;
	Wed,  4 Mar 2020 10:41:12 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-wr1-x444.google.com (mail-wr1-x444.google.com
 [IPv6:2a00:1450:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id F3D6E6EB19
 for <dri-devel@lists.freedesktop.org>; Wed,  4 Mar 2020 10:41:10 +0000 (UTC)
Received: by mail-wr1-x444.google.com with SMTP id q8so1763811wrm.4
 for <dri-devel@lists.freedesktop.org>; Wed, 04 Mar 2020 02:41:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=baylibre-com.20150623.gappssmtp.com; s=20150623;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=OtIVRxo+wY8aEywk2u6AYPXXtkcTfpoZA+lgfp/m3vw=;
 b=bHQJmmKSgObrdDvlxf5oFqOkI2mVpXgw4bKpQ/P8WQfyS0sJZ20qWFjzzJUtDg+2bH
 OI93SPDIX/wPuui/L3DkmPRB1Sy0wy8Km4eHOMahaeQcu2j/lDbddAVUsgvHPCFGxPRG
 NLQpnnq65hH5D4+z1KEVk0UaCaaXs0xw9jUBybMTa7U9r7R4ZLIX6xNzKUvgz+RTD26L
 mbXyKri7o5X8HJR2hObxg7EbUxHJoIIbMZJ5XZlT/VZHzR7kSPTB+DeMdFx3AmzIySEf
 h5DqJi9kMVAufvZZ8+jBWJRooiCEoFNakUN+Ex3+BI91OWJbDZpCHC5fChuio8TKpCIo
 e7IQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=OtIVRxo+wY8aEywk2u6AYPXXtkcTfpoZA+lgfp/m3vw=;
 b=JT4eyiGF9T0qoMj5krdvVwN8+IB5V4JTK7L+/lHhfAIfhNTvOiKWl0uI8XToRBIC6Q
 5chn7NySDR+SiaoyeFuqEsotJcVKNhWjpHfXOMIFNoZwfnQfeI9EavfS6gjNah1jwWB1
 i5VCFRLKrkQkbyFpnMLlC0IbuiVW45XJvPpX9sD49Ay5YhFppkQGMrxRdPqFe2HhBQBo
 bhFoHM959SSzDeXR9dYIoUCzD8HgTxy8p7feuL2LkgeP+FbknhzlWdOfS1/Cd3MCW5f0
 rGZSn2tJ5t5KjeS49SZn/nU9AS3oNi3XjI1Spd1sTpZIfTzrlLbW5QO9QO9A3WlUwTn1
 75iw==
X-Gm-Message-State: ANhLgQ0gtV7+Quoo+i2ppjf/ujTchSjstsdFGYRbgFqQcnmDA46O9XPt
 OhY3kzTMzLsHlzA89IiB0J9YbQ==
X-Google-Smtp-Source: ADFU+vtgE6onR8RqA5HoQy8LXS2bJLzVM8GNkVM5fJgKp6ditKr4/X/Ad4AKRJeWvs7pzStf+oDHWg==
X-Received: by 2002:adf:a4c4:: with SMTP id h4mr3455614wrb.112.1583318469448; 
 Wed, 04 Mar 2020 02:41:09 -0800 (PST)
Received: from bender.baylibre.local
 (laubervilliers-658-1-213-31.w90-63.abo.wanadoo.fr. [90.63.244.31])
 by smtp.gmail.com with ESMTPSA id c14sm24006398wro.36.2020.03.04.02.41.08
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 04 Mar 2020 02:41:08 -0800 (PST)
From: Neil Armstrong <narmstrong@baylibre.com>
To: a.hajda@samsung.com, Laurent.pinchart@ideasonboard.com, jonas@kwiboo.se,
 jernej.skrabec@siol.net, boris.brezillon@collabora.com
Subject: [PATCH v5 10/11] drm/meson: vclk: add support for YUV420 setup
Date: Wed,  4 Mar 2020 11:40:51 +0100
Message-Id: <20200304104052.17196-11-narmstrong@baylibre.com>
X-Mailer: git-send-email 2.22.0
In-Reply-To: <20200304104052.17196-1-narmstrong@baylibre.com>
References: <20200304104052.17196-1-narmstrong@baylibre.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-amlogic@lists.infradead.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, Neil Armstrong <narmstrong@baylibre.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBhZGRzIGNsb2NraW5nIHN1cHBvcnQgZm9yIHRoZSBZVVY0MjAgb3V0cHV0IGZy
b20gdGhlCkFtbG9naWMgTWVzb24gU29DcyBWaWRlbyBQcm9jZXNzaW5nIFVuaXQgdG8gdGhlIEhE
TUkgQ29udHJvbGxlci4KClRoZSBZVVY0MjAgaXMgb2J0YWluZWQgYnkgZ2VuZXJhdGluZyBhIFlV
VjQ0NCBwaXhlbCBzdHJlYW0gbGlrZQp0aGUgY2xhc3NpYyBIRE1JIGRpc3BsYXkgbW9kZXMsIGJ1
dCB0aGVuIHRoZSBWaWRlbyBFbmNvZGVyIG91dHB1dApjYW4gYmUgY29uZmlndXJlZCB0byBkb3du
LXNhbXBsZSB0aGUgWVVWNDQ0IHBpeGVsIHN0cmVhbSB0byBhIFlVVjQyMApzdHJlYW0uCgpUaGlz
IG1vZGUgbmVlZHMgYSBkaWZmZXJlbnQgY2xvY2sgZ2VuZXJhdGlvbiBzY2hlbWUgc2luY2UgdGhl
IFRNRFMgUEhZCmNsb2NrIG11c3QgbWF0Y2ggdGhlIDEweCByYXRpbyB3aXRoIHRoZSBZVVY0MjAg
cGl4ZWwgY2xvY2ssIGJ1dAp0aGUgdmlkZW8gZW5jb2RlciBtdXN0IHJ1biBhdCAyeCB0aGUgcGl4
ZWwgY2xvY2suCgpUaGlzIHBhdGNoIGFkZHMgdGhlIFRNRFMgUEhZIGNsb2NrIHZhbHVlIGluIGFs
bCB0aGUgdmlkZW8gY2xvY2sgc2V0dXAKaW4gb3JkZXIgdG8gYmV0dGVyIHN1cHBvcnQgdGhlc2Ug
c3BlY2lmaWMgdXNlcyBjYXNlcyBhbmQgc3dpdGNoCnRvIHRoZSBDb21tb24gQ2xvY2sgZnJhbWV3
b3JrIGZvciBjbG9ja3MgaGFuZGxpbmcgaW4gdGhlIGZ1dHVyZS4KClNpZ25lZC1vZmYtYnk6IE5l
aWwgQXJtc3Ryb25nIDxuYXJtc3Ryb25nQGJheWxpYnJlLmNvbT4KUmV2aWV3ZWQtYnk6IEplcm5l
aiDFoGtyYWJlYyA8amVybmVqLnNrcmFiZWNAc2lvbC5uZXQ+Ci0tLQogZHJpdmVycy9ncHUvZHJt
L21lc29uL21lc29uX2R3X2hkbWkuYyAgIHwgMjQgKysrKy0tLQogZHJpdmVycy9ncHUvZHJtL21l
c29uL21lc29uX3ZjbGsuYyAgICAgIHwgOTMgKysrKysrKysrKysrKysrKysrKy0tLS0tLQogZHJp
dmVycy9ncHUvZHJtL21lc29uL21lc29uX3ZjbGsuaCAgICAgIHwgIDcgKy0KIGRyaXZlcnMvZ3B1
L2RybS9tZXNvbi9tZXNvbl92ZW5jX2N2YnMuYyB8ICA2ICstCiA0IGZpbGVzIGNoYW5nZWQsIDk1
IGluc2VydGlvbnMoKyksIDM1IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9tZXNvbi9tZXNvbl9kd19oZG1pLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25f
ZHdfaGRtaS5jCmluZGV4IGIyMTA1YzBmZTIwNS4uYjViMGQ0NWViMzE0IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fZHdfaGRtaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9tZXNvbi9tZXNvbl9kd19oZG1pLmMKQEAgLTM3NiwxNSArMzc2LDE5IEBAIHN0YXRpYyB2b2lk
IGR3X2hkbWlfc2V0X3ZjbGsoc3RydWN0IG1lc29uX2R3X2hkbWkgKmR3X2hkbWksCiB7CiAJc3Ry
dWN0IG1lc29uX2RybSAqcHJpdiA9IGR3X2hkbWktPnByaXY7CiAJaW50IHZpYyA9IGRybV9tYXRj
aF9jZWFfbW9kZShtb2RlKTsKKwl1bnNpZ25lZCBpbnQgcGh5X2ZyZXE7CiAJdW5zaWduZWQgaW50
IHZjbGtfZnJlcTsKIAl1bnNpZ25lZCBpbnQgdmVuY19mcmVxOwogCXVuc2lnbmVkIGludCBoZG1p
X2ZyZXE7CiAKIAl2Y2xrX2ZyZXEgPSBtb2RlLT5jbG9jazsKIAorCS8qIFRNRFMgY2xvY2sgaXMg
cGl4ZWxfY2xvY2sgKiAxMCAqLworCXBoeV9mcmVxID0gdmNsa19mcmVxICogMTA7CisKIAlpZiAo
IXZpYykgewotCQltZXNvbl92Y2xrX3NldHVwKHByaXYsIE1FU09OX1ZDTEtfVEFSR0VUX0RNVCwg
dmNsa19mcmVxLAotCQkJCSB2Y2xrX2ZyZXEsIHZjbGtfZnJlcSwgZmFsc2UpOworCQltZXNvbl92
Y2xrX3NldHVwKHByaXYsIE1FU09OX1ZDTEtfVEFSR0VUX0RNVCwgcGh5X2ZyZXEsCisJCQkJIHZj
bGtfZnJlcSwgdmNsa19mcmVxLCB2Y2xrX2ZyZXEsIGZhbHNlKTsKIAkJcmV0dXJuOwogCX0KIApA
QCAtNDAyLDExICs0MDYsMTEgQEAgc3RhdGljIHZvaWQgZHdfaGRtaV9zZXRfdmNsayhzdHJ1Y3Qg
bWVzb25fZHdfaGRtaSAqZHdfaGRtaSwKIAlpZiAobW9kZS0+ZmxhZ3MgJiBEUk1fTU9ERV9GTEFH
X0RCTENMSykKIAkJdmVuY19mcmVxIC89IDI7CiAKLQlEUk1fREVCVUdfRFJJVkVSKCJ2Y2xrOiVk
IHZlbmM9JWQgaGRtaT0lZCBlbmNpPSVkXG4iLAotCQl2Y2xrX2ZyZXEsIHZlbmNfZnJlcSwgaGRt
aV9mcmVxLAorCURSTV9ERUJVR19EUklWRVIoInZjbGs6JWQgcGh5PSVkIHZlbmM9JWQgaGRtaT0l
ZCBlbmNpPSVkXG4iLAorCQlwaHlfZnJlcSwgdmNsa19mcmVxLCB2ZW5jX2ZyZXEsIGhkbWlfZnJl
cSwKIAkJcHJpdi0+dmVuYy5oZG1pX3VzZV9lbmNpKTsKIAotCW1lc29uX3ZjbGtfc2V0dXAocHJp
diwgTUVTT05fVkNMS19UQVJHRVRfSERNSSwgdmNsa19mcmVxLAorCW1lc29uX3ZjbGtfc2V0dXAo
cHJpdiwgTUVTT05fVkNMS19UQVJHRVRfSERNSSwgcGh5X2ZyZXEsIHZjbGtfZnJlcSwKIAkJCSB2
ZW5jX2ZyZXEsIGhkbWlfZnJlcSwgcHJpdi0+dmVuYy5oZG1pX3VzZV9lbmNpKTsKIH0KIApAQCAt
NjE3LDYgKzYyMSw3IEBAIGR3X2hkbWlfbW9kZV92YWxpZChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAq
Y29ubmVjdG9yLAogCQkgICBjb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKIHsK
IAlzdHJ1Y3QgbWVzb25fZHJtICpwcml2ID0gY29ubmVjdG9yLT5kZXYtPmRldl9wcml2YXRlOwor
CXVuc2lnbmVkIGludCBwaHlfZnJlcTsKIAl1bnNpZ25lZCBpbnQgdmNsa19mcmVxOwogCXVuc2ln
bmVkIGludCB2ZW5jX2ZyZXE7CiAJdW5zaWduZWQgaW50IGhkbWlfZnJlcTsKQEAgLTY0Myw2ICs2
NDgsOSBAQCBkd19oZG1pX21vZGVfdmFsaWQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3Rv
ciwKIAogCXZjbGtfZnJlcSA9IG1vZGUtPmNsb2NrOwogCisJLyogVE1EUyBjbG9jayBpcyBwaXhl
bF9jbG9jayAqIDEwICovCisJcGh5X2ZyZXEgPSB2Y2xrX2ZyZXEgKiAxMDsKKwogCS8qIDQ4MGkv
NTc2aSBuZWVkcyBnbG9iYWwgcGl4ZWwgZG91YmxpbmcgKi8KIAlpZiAobW9kZS0+ZmxhZ3MgJiBE
Uk1fTU9ERV9GTEFHX0RCTENMSykKIAkJdmNsa19mcmVxICo9IDI7CkBAIC02NTksMTAgKzY2Nywx
MCBAQCBkd19oZG1pX21vZGVfdmFsaWQoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwK
IAlpZiAobW9kZS0+ZmxhZ3MgJiBEUk1fTU9ERV9GTEFHX0RCTENMSykKIAkJdmVuY19mcmVxIC89
IDI7CiAKLQlkZXZfZGJnKGNvbm5lY3Rvci0+ZGV2LT5kZXYsICIlczogdmNsazolZCB2ZW5jPSVk
IGhkbWk9JWRcbiIsIF9fZnVuY19fLAotCQl2Y2xrX2ZyZXEsIHZlbmNfZnJlcSwgaGRtaV9mcmVx
KTsKKwlkZXZfZGJnKGNvbm5lY3Rvci0+ZGV2LT5kZXYsICIlczogdmNsazolZCBwaHk9JWQgdmVu
Yz0lZCBoZG1pPSVkXG4iLAorCQlfX2Z1bmNfXywgcGh5X2ZyZXEsIHZjbGtfZnJlcSwgdmVuY19m
cmVxLCBoZG1pX2ZyZXEpOwogCi0JcmV0dXJuIG1lc29uX3ZjbGtfdmljX3N1cHBvcnRlZF9mcmVx
KHZjbGtfZnJlcSk7CisJcmV0dXJuIG1lc29uX3ZjbGtfdmljX3N1cHBvcnRlZF9mcmVxKHBoeV9m
cmVxLCB2Y2xrX2ZyZXEpOwogfQogCiAvKiBFbmNvZGVyICovCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vbWVzb24vbWVzb25fdmNsay5jIGIvZHJpdmVycy9ncHUvZHJtL21lc29uL21lc29u
X3ZjbGsuYwppbmRleCBmNjkwNzkzYWUyZDUuLmZkZjI2ZGFjOWZhOCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL21lc29uL21lc29uX3ZjbGsuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbWVz
b24vbWVzb25fdmNsay5jCkBAIC0zNTQsMTIgKzM1NCwxNyBAQCBlbnVtIHsKIC8qIDI5NzAgLzEg
LzEgLzEgLzUgLzIgID0+IC8xIC8xICovCiAJTUVTT05fVkNMS19IRE1JXzI5NzAwMCwKIC8qIDU5
NDAgLzEgLzEgLzIgLzUgLzEgID0+IC8xIC8xICovCi0JTUVTT05fVkNMS19IRE1JXzU5NDAwMAor
CU1FU09OX1ZDTEtfSERNSV81OTQwMDAsCisvKiAyOTcwIC8xIC8xIC8xIC81IC8xICA9PiAvMSAv
MiAqLworCU1FU09OX1ZDTEtfSERNSV81OTQwMDBfWVVWNDIwLAogfTsKIAogc3RydWN0IG1lc29u
X3ZjbGtfcGFyYW1zIHsKKwl1bnNpZ25lZCBpbnQgcGxsX2ZyZXE7CisJdW5zaWduZWQgaW50IHBo
eV9mcmVxOworCXVuc2lnbmVkIGludCB2Y2xrX2ZyZXE7CisJdW5zaWduZWQgaW50IHZlbmNfZnJl
cTsKIAl1bnNpZ25lZCBpbnQgcGl4ZWxfZnJlcTsKLQl1bnNpZ25lZCBpbnQgcGxsX2Jhc2VfZnJl
cTsKIAl1bnNpZ25lZCBpbnQgcGxsX29kMTsKIAl1bnNpZ25lZCBpbnQgcGxsX29kMjsKIAl1bnNp
Z25lZCBpbnQgcGxsX29kMzsKQEAgLTM2Nyw4ICszNzIsMTEgQEAgc3RydWN0IG1lc29uX3ZjbGtf
cGFyYW1zIHsKIAl1bnNpZ25lZCBpbnQgdmNsa19kaXY7CiB9IHBhcmFtc1tdID0gewogCVtNRVNP
Tl9WQ0xLX0hETUlfRU5DSV81NDAwMF0gPSB7CisJCS5wbGxfZnJlcSA9IDQzMjAwMDAsCisJCS5w
aHlfZnJlcSA9IDI3MDAwMCwKKwkJLnZjbGtfZnJlcSA9IDU0MDAwLAorCQkudmVuY19mcmVxID0g
NTQwMDAsCiAJCS5waXhlbF9mcmVxID0gNTQwMDAsCi0JCS5wbGxfYmFzZV9mcmVxID0gNDMyMDAw
MCwKIAkJLnBsbF9vZDEgPSA0LAogCQkucGxsX29kMiA9IDQsCiAJCS5wbGxfb2QzID0gMSwKQEAg
LTM3Niw4ICszODQsMTEgQEAgc3RydWN0IG1lc29uX3ZjbGtfcGFyYW1zIHsKIAkJLnZjbGtfZGl2
ID0gMSwKIAl9LAogCVtNRVNPTl9WQ0xLX0hETUlfRERSXzU0MDAwXSA9IHsKLQkJLnBpeGVsX2Zy
ZXEgPSA1NDAwMCwKLQkJLnBsbF9iYXNlX2ZyZXEgPSA0MzIwMDAwLAorCQkucGxsX2ZyZXEgPSA0
MzIwMDAwLAorCQkucGh5X2ZyZXEgPSAyNzAwMDAsCisJCS52Y2xrX2ZyZXEgPSA1NDAwMCwKKwkJ
LnZlbmNfZnJlcSA9IDU0MDAwLAorCQkucGl4ZWxfZnJlcSA9IDI3MDAwLAogCQkucGxsX29kMSA9
IDQsCiAJCS5wbGxfb2QyID0gNCwKIAkJLnBsbF9vZDMgPSAxLApAQCAtMzg1LDggKzM5NiwxMSBA
QCBzdHJ1Y3QgbWVzb25fdmNsa19wYXJhbXMgewogCQkudmNsa19kaXYgPSAxLAogCX0sCiAJW01F
U09OX1ZDTEtfSERNSV9ERFJfMTQ4NTAwXSA9IHsKLQkJLnBpeGVsX2ZyZXEgPSAxNDg1MDAsCi0J
CS5wbGxfYmFzZV9mcmVxID0gMjk3MDAwMCwKKwkJLnBsbF9mcmVxID0gMjk3MDAwMCwKKwkJLnBo
eV9mcmVxID0gNzQyNTAwLAorCQkudmNsa19mcmVxID0gMTQ4NTAwLAorCQkudmVuY19mcmVxID0g
MTQ4NTAwLAorCQkucGl4ZWxfZnJlcSA9IDc0MjUwLAogCQkucGxsX29kMSA9IDQsCiAJCS5wbGxf
b2QyID0gMSwKIAkJLnBsbF9vZDMgPSAxLApAQCAtMzk0LDggKzQwOCwxMSBAQCBzdHJ1Y3QgbWVz
b25fdmNsa19wYXJhbXMgewogCQkudmNsa19kaXYgPSAxLAogCX0sCiAJW01FU09OX1ZDTEtfSERN
SV83NDI1MF0gPSB7CisJCS5wbGxfZnJlcSA9IDI5NzAwMDAsCisJCS5waHlfZnJlcSA9IDc0MjUw
MCwKKwkJLnZjbGtfZnJlcSA9IDc0MjUwLAorCQkudmVuY19mcmVxID0gNzQyNTAsCiAJCS5waXhl
bF9mcmVxID0gNzQyNTAsCi0JCS5wbGxfYmFzZV9mcmVxID0gMjk3MDAwMCwKIAkJLnBsbF9vZDEg
PSAyLAogCQkucGxsX29kMiA9IDIsCiAJCS5wbGxfb2QzID0gMiwKQEAgLTQwMyw4ICs0MjAsMTEg
QEAgc3RydWN0IG1lc29uX3ZjbGtfcGFyYW1zIHsKIAkJLnZjbGtfZGl2ID0gMSwKIAl9LAogCVtN
RVNPTl9WQ0xLX0hETUlfMTQ4NTAwXSA9IHsKKwkJLnBsbF9mcmVxID0gMjk3MDAwMCwKKwkJLnBo
eV9mcmVxID0gMTQ4NTAwMCwKKwkJLnZjbGtfZnJlcSA9IDE0ODUwMCwKKwkJLnZlbmNfZnJlcSA9
IDE0ODUwMCwKIAkJLnBpeGVsX2ZyZXEgPSAxNDg1MDAsCi0JCS5wbGxfYmFzZV9mcmVxID0gMjk3
MDAwMCwKIAkJLnBsbF9vZDEgPSAxLAogCQkucGxsX29kMiA9IDIsCiAJCS5wbGxfb2QzID0gMiwK
QEAgLTQxMiw4ICs0MzIsMTEgQEAgc3RydWN0IG1lc29uX3ZjbGtfcGFyYW1zIHsKIAkJLnZjbGtf
ZGl2ID0gMSwKIAl9LAogCVtNRVNPTl9WQ0xLX0hETUlfMjk3MDAwXSA9IHsKKwkJLnBsbF9mcmVx
ID0gNTk0MDAwMCwKKwkJLnBoeV9mcmVxID0gMjk3MDAwMCwKKwkJLnZlbmNfZnJlcSA9IDI5NzAw
MCwKKwkJLnZjbGtfZnJlcSA9IDI5NzAwMCwKIAkJLnBpeGVsX2ZyZXEgPSAyOTcwMDAsCi0JCS5w
bGxfYmFzZV9mcmVxID0gNTk0MDAwMCwKIAkJLnBsbF9vZDEgPSAyLAogCQkucGxsX29kMiA9IDEs
CiAJCS5wbGxfb2QzID0gMSwKQEAgLTQyMSwxNCArNDQ0LDI5IEBAIHN0cnVjdCBtZXNvbl92Y2xr
X3BhcmFtcyB7CiAJCS52Y2xrX2RpdiA9IDIsCiAJfSwKIAlbTUVTT05fVkNMS19IRE1JXzU5NDAw
MF0gPSB7CisJCS5wbGxfZnJlcSA9IDU5NDAwMDAsCisJCS5waHlfZnJlcSA9IDU5NDAwMDAsCisJ
CS52ZW5jX2ZyZXEgPSA1OTQwMDAsCisJCS52Y2xrX2ZyZXEgPSA1OTQwMDAsCiAJCS5waXhlbF9m
cmVxID0gNTk0MDAwLAotCQkucGxsX2Jhc2VfZnJlcSA9IDU5NDAwMDAsCiAJCS5wbGxfb2QxID0g
MSwKIAkJLnBsbF9vZDIgPSAxLAogCQkucGxsX29kMyA9IDIsCiAJCS52aWRfcGxsX2RpdiA9IFZJ
RF9QTExfRElWXzUsCiAJCS52Y2xrX2RpdiA9IDEsCiAJfSwKKwlbTUVTT05fVkNMS19IRE1JXzU5
NDAwMF9ZVVY0MjBdID0geworCQkucGxsX2ZyZXEgPSA1OTQwMDAwLAorCQkucGh5X2ZyZXEgPSAy
OTcwMDAwLAorCQkudmVuY19mcmVxID0gNTk0MDAwLAorCQkudmNsa19mcmVxID0gNTk0MDAwLAor
CQkucGl4ZWxfZnJlcSA9IDI5NzAwMCwKKwkJLnBsbF9vZDEgPSAyLAorCQkucGxsX29kMiA9IDEs
CisJCS5wbGxfb2QzID0gMSwKKwkJLnZpZF9wbGxfZGl2ID0gVklEX1BMTF9ESVZfNSwKKwkJLnZj
bGtfZGl2ID0gMSwKKwl9LAogCXsgLyogc2VudGluZWwgKi8gfSwKIH07CiAKQEAgLTcwMSw2ICs3
MzksNyBAQCBzdGF0aWMgdm9pZCBtZXNvbl9oZG1pX3BsbF9nZW5lcmljX3NldChzdHJ1Y3QgbWVz
b25fZHJtICpwcml2LAogCXVuc2lnbmVkIGludCBvZCwgbSwgZnJhYywgb2QxLCBvZDIsIG9kMzsK
IAogCWlmIChtZXNvbl9oZG1pX3BsbF9maW5kX3BhcmFtcyhwcml2LCBwbGxfZnJlcSwgJm0sICZm
cmFjLCAmb2QpKSB7CisJCS8qIE9EMiBnb2VzIHRvIHRoZSBQSFksIGFuZCBuZWVkcyB0byBiZSAq
MTAsIHNvIGtlZXAgT0QzPTEgKi8KIAkJb2QzID0gMTsKIAkJaWYgKG9kIDwgNCkgewogCQkJb2Qx
ID0gMjsKQEAgLTcyMywyMSArNzYyLDI4IEBAIHN0YXRpYyB2b2lkIG1lc29uX2hkbWlfcGxsX2dl
bmVyaWNfc2V0KHN0cnVjdCBtZXNvbl9kcm0gKnByaXYsCiB9CiAKIGVudW0gZHJtX21vZGVfc3Rh
dHVzCi1tZXNvbl92Y2xrX3ZpY19zdXBwb3J0ZWRfZnJlcSh1bnNpZ25lZCBpbnQgZnJlcSkKK21l
c29uX3ZjbGtfdmljX3N1cHBvcnRlZF9mcmVxKHVuc2lnbmVkIGludCBwaHlfZnJlcSwKKwkJCSAg
ICAgIHVuc2lnbmVkIGludCB2Y2xrX2ZyZXEpCiB7CiAJaW50IGk7CiAKLQlEUk1fREVCVUdfRFJJ
VkVSKCJmcmVxID0gJWRcbiIsIGZyZXEpOworCURSTV9ERUJVR19EUklWRVIoInBoeV9mcmVxID0g
JWQgdmNsa19mcmVxID0gJWRcbiIsCisJCQkgcGh5X2ZyZXEsIHZjbGtfZnJlcSk7CiAKIAlmb3Ig
KGkgPSAwIDsgcGFyYW1zW2ldLnBpeGVsX2ZyZXEgOyArK2kpIHsKIAkJRFJNX0RFQlVHX0RSSVZF
UigiaSA9ICVkIHBpeGVsX2ZyZXEgPSAlZCBhbHQgPSAlZFxuIiwKIAkJCQkgaSwgcGFyYW1zW2ld
LnBpeGVsX2ZyZXEsCiAJCQkJIEZSRVFfMTAwMF8xMDAxKHBhcmFtc1tpXS5waXhlbF9mcmVxKSk7
CisJCURSTV9ERUJVR19EUklWRVIoImkgPSAlZCBwaHlfZnJlcSA9ICVkIGFsdCA9ICVkXG4iLAor
CQkJCSBpLCBwYXJhbXNbaV0ucGh5X2ZyZXEsCisJCQkJIEZSRVFfMTAwMF8xMDAxKHBhcmFtc1tp
XS5waHlfZnJlcS8xMCkqMTApOwogCQkvKiBNYXRjaCBzdHJpY3QgZnJlcXVlbmN5ICovCi0JCWlm
IChmcmVxID09IHBhcmFtc1tpXS5waXhlbF9mcmVxKQorCQlpZiAocGh5X2ZyZXEgPT0gcGFyYW1z
W2ldLnBoeV9mcmVxICYmCisJCSAgICB2Y2xrX2ZyZXEgPT0gcGFyYW1zW2ldLnZjbGtfZnJlcSkK
IAkJCXJldHVybiBNT0RFX09LOwogCQkvKiBNYXRjaCAxMDAwLzEwMDEgdmFyaWFudCAqLwotCQlp
ZiAoZnJlcSA9PSBGUkVRXzEwMDBfMTAwMShwYXJhbXNbaV0ucGl4ZWxfZnJlcSkpCisJCWlmIChw
aHlfZnJlcSA9PSAoRlJFUV8xMDAwXzEwMDEocGFyYW1zW2ldLnBoeV9mcmVxLzEwKSoxMCkgJiYK
KwkJICAgIHZjbGtfZnJlcSA9PSBGUkVRXzEwMDBfMTAwMShwYXJhbXNbaV0udmNsa19mcmVxKSkK
IAkJCXJldHVybiBNT0RFX09LOwogCX0KIApAQCAtOTY1LDggKzEwMTEsOSBAQCBzdGF0aWMgdm9p
ZCBtZXNvbl92Y2xrX3NldChzdHJ1Y3QgbWVzb25fZHJtICpwcml2LCB1bnNpZ25lZCBpbnQgcGxs
X2Jhc2VfZnJlcSwKIH0KIAogdm9pZCBtZXNvbl92Y2xrX3NldHVwKHN0cnVjdCBtZXNvbl9kcm0g
KnByaXYsIHVuc2lnbmVkIGludCB0YXJnZXQsCi0JCSAgICAgIHVuc2lnbmVkIGludCB2Y2xrX2Zy
ZXEsIHVuc2lnbmVkIGludCB2ZW5jX2ZyZXEsCi0JCSAgICAgIHVuc2lnbmVkIGludCBkYWNfZnJl
cSwgYm9vbCBoZG1pX3VzZV9lbmNpKQorCQkgICAgICB1bnNpZ25lZCBpbnQgcGh5X2ZyZXEsIHVu
c2lnbmVkIGludCB2Y2xrX2ZyZXEsCisJCSAgICAgIHVuc2lnbmVkIGludCB2ZW5jX2ZyZXEsIHVu
c2lnbmVkIGludCBkYWNfZnJlcSwKKwkJICAgICAgYm9vbCBoZG1pX3VzZV9lbmNpKQogewogCWJv
b2wgdmljX2FsdGVybmF0ZV9jbG9jayA9IGZhbHNlOwogCXVuc2lnbmVkIGludCBmcmVxOwpAQCAt
OTg2LDcgKzEwMzMsNyBAQCB2b2lkIG1lc29uX3ZjbGtfc2V0dXAoc3RydWN0IG1lc29uX2RybSAq
cHJpdiwgdW5zaWduZWQgaW50IHRhcmdldCwKIAkJICogLSB2ZW5jX2RpdiA9IDEKIAkJICogLSBl
bmNwIGVuY29kZXIKIAkJICovCi0JCW1lc29uX3ZjbGtfc2V0KHByaXYsIHZjbGtfZnJlcSAqIDEw
LCAwLCAwLCAwLAorCQltZXNvbl92Y2xrX3NldChwcml2LCBwaHlfZnJlcSwgMCwgMCwgMCwKIAkJ
CSAgICAgICBWSURfUExMX0RJVl81LCAyLCAxLCAxLCBmYWxzZSwgZmFsc2UpOwogCQlyZXR1cm47
CiAJfQpAQCAtMTAwOCw5ICsxMDU1LDExIEBAIHZvaWQgbWVzb25fdmNsa19zZXR1cChzdHJ1Y3Qg
bWVzb25fZHJtICpwcml2LCB1bnNpZ25lZCBpbnQgdGFyZ2V0LAogCX0KIAogCWZvciAoZnJlcSA9
IDAgOyBwYXJhbXNbZnJlcV0ucGl4ZWxfZnJlcSA7ICsrZnJlcSkgewotCQlpZiAodmNsa19mcmVx
ID09IHBhcmFtc1tmcmVxXS5waXhlbF9mcmVxIHx8Ci0JCSAgICB2Y2xrX2ZyZXEgPT0gRlJFUV8x
MDAwXzEwMDEocGFyYW1zW2ZyZXFdLnBpeGVsX2ZyZXEpKSB7Ci0JCQlpZiAodmNsa19mcmVxICE9
IHBhcmFtc1tmcmVxXS5waXhlbF9mcmVxKQorCQlpZiAoKHBoeV9mcmVxID09IHBhcmFtc1tmcmVx
XS5waHlfZnJlcSB8fAorCQkgICAgIHBoeV9mcmVxID09IEZSRVFfMTAwMF8xMDAxKHBhcmFtc1tm
cmVxXS5waHlfZnJlcS8xMCkqMTApICYmCisJCSAgICAodmNsa19mcmVxID09IHBhcmFtc1tmcmVx
XS52Y2xrX2ZyZXEgfHwKKwkJICAgICB2Y2xrX2ZyZXEgPT0gRlJFUV8xMDAwXzEwMDEocGFyYW1z
W2ZyZXFdLnZjbGtfZnJlcSkpKSB7CisJCQlpZiAodmNsa19mcmVxICE9IHBhcmFtc1tmcmVxXS52
Y2xrX2ZyZXEpCiAJCQkJdmljX2FsdGVybmF0ZV9jbG9jayA9IHRydWU7CiAJCQllbHNlCiAJCQkJ
dmljX2FsdGVybmF0ZV9jbG9jayA9IGZhbHNlOwpAQCAtMTAzOSw3ICsxMDg4LDcgQEAgdm9pZCBt
ZXNvbl92Y2xrX3NldHVwKHN0cnVjdCBtZXNvbl9kcm0gKnByaXYsIHVuc2lnbmVkIGludCB0YXJn
ZXQsCiAJCXJldHVybjsKIAl9CiAKLQltZXNvbl92Y2xrX3NldChwcml2LCBwYXJhbXNbZnJlcV0u
cGxsX2Jhc2VfZnJlcSwKKwltZXNvbl92Y2xrX3NldChwcml2LCBwYXJhbXNbZnJlcV0ucGxsX2Zy
ZXEsCiAJCSAgICAgICBwYXJhbXNbZnJlcV0ucGxsX29kMSwgcGFyYW1zW2ZyZXFdLnBsbF9vZDIs
CiAJCSAgICAgICBwYXJhbXNbZnJlcV0ucGxsX29kMywgcGFyYW1zW2ZyZXFdLnZpZF9wbGxfZGl2
LAogCQkgICAgICAgcGFyYW1zW2ZyZXFdLnZjbGtfZGl2LCBoZG1pX3R4X2RpdiwgdmVuY19kaXYs
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fdmNsay5oIGIvZHJpdmVy
cy9ncHUvZHJtL21lc29uL21lc29uX3ZjbGsuaAppbmRleCBiNjIxMjU1NDBhZWYuLmFlZDBhYjJl
ZmE3MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21lc29uL21lc29uX3ZjbGsuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vbWVzb24vbWVzb25fdmNsay5oCkBAIC0yNSwxMCArMjUsMTEgQEAg
ZW51bSB7CiBlbnVtIGRybV9tb2RlX3N0YXR1cwogbWVzb25fdmNsa19kbXRfc3VwcG9ydGVkX2Zy
ZXEoc3RydWN0IG1lc29uX2RybSAqcHJpdiwgdW5zaWduZWQgaW50IGZyZXEpOwogZW51bSBkcm1f
bW9kZV9zdGF0dXMKLW1lc29uX3ZjbGtfdmljX3N1cHBvcnRlZF9mcmVxKHVuc2lnbmVkIGludCBm
cmVxKTsKK21lc29uX3ZjbGtfdmljX3N1cHBvcnRlZF9mcmVxKHVuc2lnbmVkIGludCBwaHlfZnJl
cSwgdW5zaWduZWQgaW50IHZjbGtfZnJlcSk7CiAKIHZvaWQgbWVzb25fdmNsa19zZXR1cChzdHJ1
Y3QgbWVzb25fZHJtICpwcml2LCB1bnNpZ25lZCBpbnQgdGFyZ2V0LAotCQkgICAgICB1bnNpZ25l
ZCBpbnQgdmNsa19mcmVxLCB1bnNpZ25lZCBpbnQgdmVuY19mcmVxLAotCQkgICAgICB1bnNpZ25l
ZCBpbnQgZGFjX2ZyZXEsIGJvb2wgaGRtaV91c2VfZW5jaSk7CisJCSAgICAgIHVuc2lnbmVkIGlu
dCBwaHlfZnJlcSwgdW5zaWduZWQgaW50IHZjbGtfZnJlcSwKKwkJICAgICAgdW5zaWduZWQgaW50
IHZlbmNfZnJlcSwgdW5zaWduZWQgaW50IGRhY19mcmVxLAorCQkgICAgICBib29sIGhkbWlfdXNl
X2VuY2kpOwogCiAjZW5kaWYgLyogX19NRVNPTl9WQ0xLX0ggKi8KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9tZXNvbi9tZXNvbl92ZW5jX2N2YnMuYyBiL2RyaXZlcnMvZ3B1L2RybS9tZXNv
bi9tZXNvbl92ZW5jX2N2YnMuYwppbmRleCAxYmQ2YjZkMTVmZmIuLjU0MWY5ZWIyYTEzNSAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21lc29uL21lc29uX3ZlbmNfY3Zicy5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9tZXNvbi9tZXNvbl92ZW5jX2N2YnMuYwpAQCAtMjEzLDggKzIxMywxMCBA
QCBzdGF0aWMgdm9pZCBtZXNvbl92ZW5jX2N2YnNfZW5jb2Rlcl9tb2RlX3NldChzdHJ1Y3QgZHJt
X2VuY29kZXIgKmVuY29kZXIsCiAJCW1lc29uX3ZlbmNpX2N2YnNfbW9kZV9zZXQocHJpdiwgbWVz
b25fbW9kZS0+ZW5jaSk7CiAKIAkJLyogU2V0dXAgMjdNSHogdmNsazIgZm9yIEVOQ0kgYW5kIFZE
QUMgKi8KLQkJbWVzb25fdmNsa19zZXR1cChwcml2LCBNRVNPTl9WQ0xLX1RBUkdFVF9DVkJTLCBN
RVNPTl9WQ0xLX0NWQlMsCi0JCQkJIE1FU09OX1ZDTEtfQ1ZCUywgTUVTT05fVkNMS19DVkJTLCB0
cnVlKTsKKwkJbWVzb25fdmNsa19zZXR1cChwcml2LCBNRVNPTl9WQ0xLX1RBUkdFVF9DVkJTLAor
CQkJCSBNRVNPTl9WQ0xLX0NWQlMsIE1FU09OX1ZDTEtfQ1ZCUywKKwkJCQkgTUVTT05fVkNMS19D
VkJTLCBNRVNPTl9WQ0xLX0NWQlMsCisJCQkJIHRydWUpOwogCX0KIH0KIAotLSAKMi4yMi4wCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwg
bWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
