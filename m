Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id C339D9BA49
	for <lists+dri-devel@lfdr.de>; Sat, 24 Aug 2019 03:35:22 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 827266ED92;
	Sat, 24 Aug 2019 01:35:16 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x449.google.com (mail-pf1-x449.google.com
 [IPv6:2607:f8b0:4864:20::449])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 72B796ED90
 for <dri-devel@lists.freedesktop.org>; Sat, 24 Aug 2019 01:35:10 +0000 (UTC)
Received: by mail-pf1-x449.google.com with SMTP id e25so7714552pfn.5
 for <dri-devel@lists.freedesktop.org>; Fri, 23 Aug 2019 18:35:10 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=xgs2ZRRv/gWulHMvAMwpPFfeVbxStAts8w5EgfNFku8=;
 b=m+o52oZEmEaBIjzsVZNOTjrwPMI0TLUEHt28LTuY2dOTpIxJgTjRIo9UM7CBVywTjC
 VBTu+ST2BnDFAl56h5IPLJFUlN/7blJC9J5jvkB9ZIafBFdm/vHaH5wooBislhK5MQQ1
 SuvYP1lN9sSBVKBuX99mQO92RAv5I738XCJCwSWQwdF23ebPjkylZgn5tpDGc+dowlqB
 y2CDRTHskdNBw0UZlgfMshUcb/jbJLamvRa1RWW4pukwjTKrGDOsVygt9j5atNEdP2f9
 ClONUPFaKA1pXSDNbkAstx8uFqyKku9IE733xF15q+XtNNbRiG44J5b0Epz4y2Q8FsvI
 Pm+g==
X-Gm-Message-State: APjAAAX7SkpcCPehw5dxyIbfp63xiZhwAHX0wIw7qno9qWgU3gHzbi7e
 qIsu4ujCZV/kq5qQufWKeE/rPT2dTfbJs4gmPU4E6Q==
X-Google-Smtp-Source: APXvYqwKHU5UXjAXrzen8gkyacIAVYZBvNYQsUvaYMpe+t++hrvK18VbogqPIINASnBHyQwHf+d18IUEeZtO/bdrnoQC2g==
X-Received: by 2002:a63:8a43:: with SMTP id y64mr6447446pgd.104.1566610508927; 
 Fri, 23 Aug 2019 18:35:08 -0700 (PDT)
Date: Fri, 23 Aug 2019 18:34:19 -0700
In-Reply-To: <20190824013425.175645-1-brendanhiggins@google.com>
Message-Id: <20190824013425.175645-13-brendanhiggins@google.com>
Mime-Version: 1.0
References: <20190824013425.175645-1-brendanhiggins@google.com>
X-Mailer: git-send-email 2.23.0.187.g17f5b7556c-goog
Subject: [PATCH v15 12/18] kunit: test: add tests for KUnit managed resources
From: Brendan Higgins <brendanhiggins@google.com>
To: frowand.list@gmail.com, gregkh@linuxfoundation.org, jpoimboe@redhat.com, 
 keescook@google.com, kieran.bingham@ideasonboard.com, mcgrof@kernel.org, 
 peterz@infradead.org, robh@kernel.org, sboyd@kernel.org, shuah@kernel.org, 
 tytso@mit.edu, yamada.masahiro@socionext.com
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=xgs2ZRRv/gWulHMvAMwpPFfeVbxStAts8w5EgfNFku8=;
 b=HD6KX9lX2O9mVSEATuHwStXxooe59H5LVAtcSlWs4JirI9mFNIKmENJWeI2E4FVVd0
 +Jg2zin/4xeqRg4gtiDNfN7Drqig8Vh97RPsSKEp3NZ6CTY+/Uo898nSHmiBgeJzTua5
 RmCYlVbzKnHawNUt5auYcZBntMnEC3yZ+V4auO4FRHpVun2Ct2vnBFasbGdWb8rFbN1n
 42Tku8NwOMEHbdxIB+zuRh2UtsuyrMU+B3Fz9ye+0seSPLtsAlKDnIXeEbkFeDjN+f8v
 /sWuFKrRyiNC2KCs/uMbVwtDiYiri3TRgDuaBYmURQesExWbrbgX25tYJ4IyU0hAC//j
 OEhg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: pmladek@suse.com, linux-doc@vger.kernel.org, amir73il@gmail.com,
 Brendan Higgins <brendanhiggins@google.com>, dri-devel@lists.freedesktop.org,
 Alexander.Levin@microsoft.com, linux-kselftest@vger.kernel.org,
 linux-nvdimm@lists.01.org, khilman@baylibre.com, knut.omang@oracle.com,
 wfg@linux.intel.com, joel@jms.id.au, rientjes@google.com, jdike@addtoit.com,
 dan.carpenter@oracle.com, devicetree@vger.kernel.org,
 linux-kbuild@vger.kernel.org, Tim.Bird@sony.com,
 Avinash Kondareddy <akndr41@gmail.com>, linux-um@lists.infradead.org,
 rostedt@goodmis.org, julia.lawall@lip6.fr, kunit-dev@googlegroups.com,
 richard@nod.at, rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 mpe@ellerman.id.au, linux-fsdevel@vger.kernel.org, logang@deltatee.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogQXZpbmFzaCBLb25kYXJlZGR5IDxha25kcjQxQGdtYWlsLmNvbT4KCkFkZCB1bml0IHRl
c3RzIGZvciBLVW5pdCBtYW5hZ2VkIHJlc291cmNlcy4gS1VuaXQgbWFuYWdlZCByZXNvdXJjZXMK
KHN0cnVjdCBrdW5pdF9yZXNvdXJjZSkgYXJlIHJlc291cmNlcyB0aGF0IGFyZSBhdXRvbWF0aWNh
bGx5IGNsZWFuZWQgdXAKYXQgdGhlIGVuZCBvZiBhIEtVbml0IHRlc3QsIHNpbWlsYXIgdG8gdGhl
IGNvbmNlcHQgb2YgZGV2bV8qIG1hbmFnZWQKcmVzb3VyY2VzLgoKU2lnbmVkLW9mZi1ieTogQXZp
bmFzaCBLb25kYXJlZGR5IDxha25kcjQxQGdtYWlsLmNvbT4KU2lnbmVkLW9mZi1ieTogQnJlbmRh
biBIaWdnaW5zIDxicmVuZGFuaGlnZ2luc0Bnb29nbGUuY29tPgpSZXZpZXdlZC1ieTogR3JlZyBL
cm9haC1IYXJ0bWFuIDxncmVna2hAbGludXhmb3VuZGF0aW9uLm9yZz4KUmV2aWV3ZWQtYnk6IExv
Z2FuIEd1bnRob3JwZSA8bG9nYW5nQGRlbHRhdGVlLmNvbT4KUmV2aWV3ZWQtYnk6IFN0ZXBoZW4g
Qm95ZCA8c2JveWRAa2VybmVsLm9yZz4KLS0tCiBrdW5pdC90ZXN0LXRlc3QuYyB8IDIyOCArKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAxIGZpbGUgY2hhbmdl
ZCwgMjI4IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9rdW5pdC90ZXN0LXRlc3QuYyBiL2t1
bml0L3Rlc3QtdGVzdC5jCmluZGV4IGUwYWI0YmQ1NDZlYS4uNWViZTA1OWQxNmUyIDEwMDY0NAot
LS0gYS9rdW5pdC90ZXN0LXRlc3QuYworKysgYi9rdW5pdC90ZXN0LXRlc3QuYwpAQCAtMTAxLDMg
KzEwMSwyMzEgQEAgc3RhdGljIHN0cnVjdCBrdW5pdF9zdWl0ZSBrdW5pdF90cnlfY2F0Y2hfdGVz
dF9zdWl0ZSA9IHsKIAkudGVzdF9jYXNlcyA9IGt1bml0X3RyeV9jYXRjaF90ZXN0X2Nhc2VzLAog
fTsKIGt1bml0X3Rlc3Rfc3VpdGUoa3VuaXRfdHJ5X2NhdGNoX3Rlc3Rfc3VpdGUpOworCisvKgor
ICogQ29udGV4dCBmb3IgdGVzdGluZyB0ZXN0IG1hbmFnZWQgcmVzb3VyY2VzCisgKiBpc19yZXNv
dXJjZV9pbml0aWFsaXplZCBpcyB1c2VkIHRvIHRlc3QgYXJiaXRyYXJ5IHJlc291cmNlcworICov
CitzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0IHsKKwlzdHJ1Y3Qga3VuaXQgdGVz
dDsKKwlib29sIGlzX3Jlc291cmNlX2luaXRpYWxpemVkOworCWludCBhbGxvY2F0ZV9vcmRlclsy
XTsKKwlpbnQgZnJlZV9vcmRlclsyXTsKK307CisKK3N0YXRpYyBpbnQgZmFrZV9yZXNvdXJjZV9p
bml0KHN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzLCB2b2lkICpjb250ZXh0KQoreworCXN0cnVj
dCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRleHQgKmN0eCA9IGNvbnRleHQ7CisKKwlyZXMtPmFs
bG9jYXRpb24gPSAmY3R4LT5pc19yZXNvdXJjZV9pbml0aWFsaXplZDsKKwljdHgtPmlzX3Jlc291
cmNlX2luaXRpYWxpemVkID0gdHJ1ZTsKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgZmFr
ZV9yZXNvdXJjZV9mcmVlKHN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVzKQoreworCWJvb2wgKmlz
X3Jlc291cmNlX2luaXRpYWxpemVkID0gcmVzLT5hbGxvY2F0aW9uOworCisJKmlzX3Jlc291cmNl
X2luaXRpYWxpemVkID0gZmFsc2U7Cit9CisKK3N0YXRpYyB2b2lkIGt1bml0X3Jlc291cmNlX3Rl
c3RfaW5pdF9yZXNvdXJjZXMoc3RydWN0IGt1bml0ICp0ZXN0KQoreworCXN0cnVjdCBrdW5pdF90
ZXN0X3Jlc291cmNlX2NvbnRleHQgKmN0eCA9IHRlc3QtPnByaXY7CisKKwlrdW5pdF9pbml0X3Rl
c3QoJmN0eC0+dGVzdCwgInRlc3RpbmdfdGVzdF9pbml0X3Rlc3QiKTsKKworCUtVTklUX0VYUEVD
VF9UUlVFKHRlc3QsIGxpc3RfZW1wdHkoJmN0eC0+dGVzdC5yZXNvdXJjZXMpKTsKK30KKworc3Rh
dGljIHZvaWQga3VuaXRfcmVzb3VyY2VfdGVzdF9hbGxvY19yZXNvdXJjZShzdHJ1Y3Qga3VuaXQg
KnRlc3QpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gdGVz
dC0+cHJpdjsKKwlzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlczsKKwlrdW5pdF9yZXNvdXJjZV9m
cmVlX3QgZnJlZSA9IGZha2VfcmVzb3VyY2VfZnJlZTsKKworCXJlcyA9IGt1bml0X2FsbG9jX2Fu
ZF9nZXRfcmVzb3VyY2UoJmN0eC0+dGVzdCwKKwkJCQkJICAgZmFrZV9yZXNvdXJjZV9pbml0LAor
CQkJCQkgICBmYWtlX3Jlc291cmNlX2ZyZWUsCisJCQkJCSAgIEdGUF9LRVJORUwsCisJCQkJCSAg
IGN0eCk7CisKKwlLVU5JVF9BU1NFUlRfTk9UX0VSUl9PUl9OVUxMKHRlc3QsIHJlcyk7CisJS1VO
SVRfRVhQRUNUX1BUUl9FUSh0ZXN0LAorCQkJICAgICZjdHgtPmlzX3Jlc291cmNlX2luaXRpYWxp
emVkLAorCQkJICAgIChib29sICopIHJlcy0+YWxsb2NhdGlvbik7CisJS1VOSVRfRVhQRUNUX1RS
VUUodGVzdCwgbGlzdF9pc19sYXN0KCZyZXMtPm5vZGUsICZjdHgtPnRlc3QucmVzb3VyY2VzKSk7
CisJS1VOSVRfRVhQRUNUX1BUUl9FUSh0ZXN0LCBmcmVlLCByZXMtPmZyZWUpOworfQorCitzdGF0
aWMgdm9pZCBrdW5pdF9yZXNvdXJjZV90ZXN0X2Rlc3Ryb3lfcmVzb3VyY2Uoc3RydWN0IGt1bml0
ICp0ZXN0KQoreworCXN0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRleHQgKmN0eCA9IHRl
c3QtPnByaXY7CisJc3RydWN0IGt1bml0X3Jlc291cmNlICpyZXMgPSBrdW5pdF9hbGxvY19hbmRf
Z2V0X3Jlc291cmNlKAorCQkJJmN0eC0+dGVzdCwKKwkJCWZha2VfcmVzb3VyY2VfaW5pdCwKKwkJ
CWZha2VfcmVzb3VyY2VfZnJlZSwKKwkJCUdGUF9LRVJORUwsCisJCQljdHgpOworCisJS1VOSVRf
QVNTRVJUX0ZBTFNFKHRlc3QsCisJCQkgICBrdW5pdF9yZXNvdXJjZV9kZXN0cm95KCZjdHgtPnRl
c3QsCisJCQkJCQkgIGt1bml0X3Jlc291cmNlX2luc3RhbmNlX21hdGNoLAorCQkJCQkJICByZXMt
PmZyZWUsCisJCQkJCQkgIHJlcy0+YWxsb2NhdGlvbikpOworCisJS1VOSVRfRVhQRUNUX0ZBTFNF
KHRlc3QsIGN0eC0+aXNfcmVzb3VyY2VfaW5pdGlhbGl6ZWQpOworCUtVTklUX0VYUEVDVF9UUlVF
KHRlc3QsIGxpc3RfZW1wdHkoJmN0eC0+dGVzdC5yZXNvdXJjZXMpKTsKK30KKworc3RhdGljIHZv
aWQga3VuaXRfcmVzb3VyY2VfdGVzdF9jbGVhbnVwX3Jlc291cmNlcyhzdHJ1Y3Qga3VuaXQgKnRl
c3QpCit7CisJaW50IGk7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4
ID0gdGVzdC0+cHJpdjsKKwlzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlc291cmNlc1s1XTsKKwor
CWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKHJlc291cmNlcyk7IGkrKykgeworCQlyZXNvdXJj
ZXNbaV0gPSBrdW5pdF9hbGxvY19hbmRfZ2V0X3Jlc291cmNlKCZjdHgtPnRlc3QsCisJCQkJCQkJ
ICAgIGZha2VfcmVzb3VyY2VfaW5pdCwKKwkJCQkJCQkgICAgZmFrZV9yZXNvdXJjZV9mcmVlLAor
CQkJCQkJCSAgICBHRlBfS0VSTkVMLAorCQkJCQkJCSAgICBjdHgpOworCX0KKworCWt1bml0X2Ns
ZWFudXAoJmN0eC0+dGVzdCk7CisKKwlLVU5JVF9FWFBFQ1RfVFJVRSh0ZXN0LCBsaXN0X2VtcHR5
KCZjdHgtPnRlc3QucmVzb3VyY2VzKSk7Cit9CisKK3N0YXRpYyB2b2lkIGt1bml0X3Jlc291cmNl
X3Rlc3RfbWFya19vcmRlcihpbnQgb3JkZXJfYXJyYXlbXSwKKwkJCQkJICAgc2l6ZV90IG9yZGVy
X3NpemUsCisJCQkJCSAgIGludCBrZXkpCit7CisJaW50IGk7CisKKwlmb3IgKGkgPSAwOyBpIDwg
b3JkZXJfc2l6ZSAmJiBvcmRlcl9hcnJheVtpXTsgaSsrKQorCQk7CisKKwlvcmRlcl9hcnJheVtp
XSA9IGtleTsKK30KKworI2RlZmluZSBLVU5JVF9SRVNPVVJDRV9URVNUX01BUktfT1JERVIoY3R4
LCBvcmRlcl9maWVsZCwga2V5KQkJICAgICAgIFwKKwkJa3VuaXRfcmVzb3VyY2VfdGVzdF9tYXJr
X29yZGVyKGN0eC0+b3JkZXJfZmllbGQsCSAgICAgICBcCisJCQkJCSAgICAgICBBUlJBWV9TSVpF
KGN0eC0+b3JkZXJfZmllbGQpLCAgIFwKKwkJCQkJICAgICAgIGtleSkKKworc3RhdGljIGludCBm
YWtlX3Jlc291cmNlXzJfaW5pdChzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlcywgdm9pZCAqY29u
dGV4dCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9jb250ZXh0ICpjdHggPSBjb250
ZXh0OworCisJS1VOSVRfUkVTT1VSQ0VfVEVTVF9NQVJLX09SREVSKGN0eCwgYWxsb2NhdGVfb3Jk
ZXIsIDIpOworCisJcmVzLT5hbGxvY2F0aW9uID0gY3R4OworCisJcmV0dXJuIDA7Cit9CisKK3N0
YXRpYyB2b2lkIGZha2VfcmVzb3VyY2VfMl9mcmVlKHN0cnVjdCBrdW5pdF9yZXNvdXJjZSAqcmVz
KQoreworCXN0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRleHQgKmN0eCA9IHJlcy0+YWxs
b2NhdGlvbjsKKworCUtVTklUX1JFU09VUkNFX1RFU1RfTUFSS19PUkRFUihjdHgsIGZyZWVfb3Jk
ZXIsIDIpOworfQorCitzdGF0aWMgaW50IGZha2VfcmVzb3VyY2VfMV9pbml0KHN0cnVjdCBrdW5p
dF9yZXNvdXJjZSAqcmVzLCB2b2lkICpjb250ZXh0KQoreworCXN0cnVjdCBrdW5pdF90ZXN0X3Jl
c291cmNlX2NvbnRleHQgKmN0eCA9IGNvbnRleHQ7CisKKwlrdW5pdF9hbGxvY19hbmRfZ2V0X3Jl
c291cmNlKCZjdHgtPnRlc3QsCisJCQkJICAgICBmYWtlX3Jlc291cmNlXzJfaW5pdCwKKwkJCQkg
ICAgIGZha2VfcmVzb3VyY2VfMl9mcmVlLAorCQkJCSAgICAgR0ZQX0tFUk5FTCwKKwkJCQkgICAg
IGN0eCk7CisKKwlLVU5JVF9SRVNPVVJDRV9URVNUX01BUktfT1JERVIoY3R4LCBhbGxvY2F0ZV9v
cmRlciwgMSk7CisKKwlyZXMtPmFsbG9jYXRpb24gPSBjdHg7CisKKwlyZXR1cm4gMDsKK30KKwor
c3RhdGljIHZvaWQgZmFrZV9yZXNvdXJjZV8xX2ZyZWUoc3RydWN0IGt1bml0X3Jlc291cmNlICpy
ZXMpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2VfY29udGV4dCAqY3R4ID0gcmVzLT5h
bGxvY2F0aW9uOworCisJS1VOSVRfUkVTT1VSQ0VfVEVTVF9NQVJLX09SREVSKGN0eCwgZnJlZV9v
cmRlciwgMSk7Cit9CisKKy8qCisgKiBUT0RPKGJyZW5kYW5oaWdnaW5zQGdvb2dsZS5jb20pOiBy
ZXBsYWNlIHRoZSBhcnJheXMgdGhhdCBrZWVwIHRyYWNrIG9mIHRoZQorICogb3JkZXIgb2YgYWxs
b2NhdGlvbiBhbmQgZnJlZWluZyB3aXRoIHN0cmljdCBtb2NrcyB1c2luZyB0aGUgSU5fU0VRVUVO
Q0UgbWFjcm8KKyAqIHRvIGFzc2VydCBhbGxvY2F0aW9uIGFuZCBmcmVlaW5nIG9yZGVyIHdoZW4g
dGhlIGZlYXR1cmUgYmVjb21lcyBhdmFpbGFibGUuCisgKi8KK3N0YXRpYyB2b2lkIGt1bml0X3Jl
c291cmNlX3Rlc3RfcHJvcGVyX2ZyZWVfb3JkZXJpbmcoc3RydWN0IGt1bml0ICp0ZXN0KQorewor
CXN0cnVjdCBrdW5pdF90ZXN0X3Jlc291cmNlX2NvbnRleHQgKmN0eCA9IHRlc3QtPnByaXY7CisK
KwkvKiBmYWtlX3Jlc291cmNlXzEgYWxsb2NhdGVzIGEgZmFrZV9yZXNvdXJjZV8yIGluIGl0cyBp
bml0LiAqLworCWt1bml0X2FsbG9jX2FuZF9nZXRfcmVzb3VyY2UoJmN0eC0+dGVzdCwKKwkJCQkg
ICAgIGZha2VfcmVzb3VyY2VfMV9pbml0LAorCQkJCSAgICAgZmFrZV9yZXNvdXJjZV8xX2ZyZWUs
CisJCQkJICAgICBHRlBfS0VSTkVMLAorCQkJCSAgICAgY3R4KTsKKworCS8qCisJICogU2luY2Ug
ZmFrZV9yZXNvdXJjZV8yX2luaXQgY2FsbHMgS1VOSVRfUkVTT1VSQ0VfVEVTVF9NQVJLX09SREVS
CisJICogYmVmb3JlIHJldHVybmluZyB0byBmYWtlX3Jlc291cmNlXzFfaW5pdCwgaXQgc2hvdWxk
IGJlIHRoZSBmaXJzdCB0bworCSAqIHB1dCBpdHMga2V5IGluIHRoZSBhbGxvY2F0ZV9vcmRlciBh
cnJheS4KKwkgKi8KKwlLVU5JVF9FWFBFQ1RfRVEodGVzdCwgY3R4LT5hbGxvY2F0ZV9vcmRlclsw
XSwgMik7CisJS1VOSVRfRVhQRUNUX0VRKHRlc3QsIGN0eC0+YWxsb2NhdGVfb3JkZXJbMV0sIDEp
OworCisJa3VuaXRfY2xlYW51cCgmY3R4LT50ZXN0KTsKKworCS8qCisJICogQmVjYXVzZSBmYWtl
X3Jlc291cmNlXzIgZmluaXNoZXMgYWxsb2NhdGlvbiBiZWZvcmUgZmFrZV9yZXNvdXJjZV8xLAor
CSAqIGZha2VfcmVzb3VyY2VfMSBzaG91bGQgYmUgZnJlZWQgZmlyc3Qgc2luY2UgaXQgY291bGQg
ZGVwZW5kIG9uCisJICogZmFrZV9yZXNvdXJjZV8yLgorCSAqLworCUtVTklUX0VYUEVDVF9FUSh0
ZXN0LCBjdHgtPmZyZWVfb3JkZXJbMF0sIDEpOworCUtVTklUX0VYUEVDVF9FUSh0ZXN0LCBjdHgt
PmZyZWVfb3JkZXJbMV0sIDIpOworfQorCitzdGF0aWMgaW50IGt1bml0X3Jlc291cmNlX3Rlc3Rf
aW5pdChzdHJ1Y3Qga3VuaXQgKnRlc3QpCit7CisJc3RydWN0IGt1bml0X3Rlc3RfcmVzb3VyY2Vf
Y29udGV4dCAqY3R4ID0KKwkJCWt6YWxsb2Moc2l6ZW9mKCpjdHgpLCBHRlBfS0VSTkVMKTsKKwor
CUtVTklUX0FTU0VSVF9OT1RfRVJSX09SX05VTEwodGVzdCwgY3R4KTsKKworCXRlc3QtPnByaXYg
PSBjdHg7CisKKwlrdW5pdF9pbml0X3Rlc3QoJmN0eC0+dGVzdCwgInRlc3RfdGVzdF9jb250ZXh0
Iik7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQga3VuaXRfcmVzb3VyY2VfdGVzdF9l
eGl0KHN0cnVjdCBrdW5pdCAqdGVzdCkKK3sKKwlzdHJ1Y3Qga3VuaXRfdGVzdF9yZXNvdXJjZV9j
b250ZXh0ICpjdHggPSB0ZXN0LT5wcml2OworCisJa3VuaXRfY2xlYW51cCgmY3R4LT50ZXN0KTsK
KwlrZnJlZShjdHgpOworfQorCitzdGF0aWMgc3RydWN0IGt1bml0X2Nhc2Uga3VuaXRfcmVzb3Vy
Y2VfdGVzdF9jYXNlc1tdID0geworCUtVTklUX0NBU0Uoa3VuaXRfcmVzb3VyY2VfdGVzdF9pbml0
X3Jlc291cmNlcyksCisJS1VOSVRfQ0FTRShrdW5pdF9yZXNvdXJjZV90ZXN0X2FsbG9jX3Jlc291
cmNlKSwKKwlLVU5JVF9DQVNFKGt1bml0X3Jlc291cmNlX3Rlc3RfZGVzdHJveV9yZXNvdXJjZSks
CisJS1VOSVRfQ0FTRShrdW5pdF9yZXNvdXJjZV90ZXN0X2NsZWFudXBfcmVzb3VyY2VzKSwKKwlL
VU5JVF9DQVNFKGt1bml0X3Jlc291cmNlX3Rlc3RfcHJvcGVyX2ZyZWVfb3JkZXJpbmcpLAorCXt9
Cit9OworCitzdGF0aWMgc3RydWN0IGt1bml0X3N1aXRlIGt1bml0X3Jlc291cmNlX3Rlc3Rfc3Vp
dGUgPSB7CisJLm5hbWUgPSAia3VuaXQtcmVzb3VyY2UtdGVzdCIsCisJLmluaXQgPSBrdW5pdF9y
ZXNvdXJjZV90ZXN0X2luaXQsCisJLmV4aXQgPSBrdW5pdF9yZXNvdXJjZV90ZXN0X2V4aXQsCisJ
LnRlc3RfY2FzZXMgPSBrdW5pdF9yZXNvdXJjZV90ZXN0X2Nhc2VzLAorfTsKK2t1bml0X3Rlc3Rf
c3VpdGUoa3VuaXRfcmVzb3VyY2VfdGVzdF9zdWl0ZSk7Ci0tIAoyLjIzLjAuMTg3LmcxN2Y1Yjc1
NTZjLWdvb2cKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
