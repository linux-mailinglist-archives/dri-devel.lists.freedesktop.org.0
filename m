Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D669B9210B
	for <lists+dri-devel@lfdr.de>; Mon, 19 Aug 2019 12:15:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 528A28990D;
	Mon, 19 Aug 2019 10:14:49 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from lb3-smtp-cloud8.xs4all.net (lb3-smtp-cloud8.xs4all.net
 [194.109.24.29])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EABDE6E0E7
 for <dri-devel@lists.freedesktop.org>; Mon, 19 Aug 2019 09:32:30 +0000 (UTC)
Received: from [192.168.2.10] ([46.9.232.237])
 by smtp-cloud8.xs4all.net with ESMTPA
 id ze1YhLrRiDqPeze1bhneig; Mon, 19 Aug 2019 11:32:29 +0200
Subject: Re: [PATCH v7 8/9] drm: dw-hdmi: use cec_notifier_conn_(un)register
To: Dariusz Marcinkiewicz <darekm@google.com>,
 dri-devel@lists.freedesktop.org, linux-media@vger.kernel.org
References: <20190814104520.6001-1-darekm@google.com>
 <20190814104520.6001-9-darekm@google.com>
From: Hans Verkuil <hverkuil-cisco@xs4all.nl>
Message-ID: <b04edaf8-6116-69ab-fd8f-c28c90f73ad7@xs4all.nl>
Date: Mon, 19 Aug 2019 11:32:24 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <20190814104520.6001-9-darekm@google.com>
Content-Language: en-US
X-CMAE-Envelope: MS4wfDeYpAUoJZkgdMJ+EP+S/3l+7QO+nrEOJjD6cP7xavE/iQMaVkUBFGDwadmDtXdbVv9PR7moBacAb18gbwD4r0uwhYsDUbzPIcqfCHD85v5kACa+O64i
 37V0mTIYXz9E5fX12kqN1/iCxDlEwagZcZbX6+1hv3pOmHepZy0VRkM3Td1IZQAGqhvzQDZgqGYnfj4TYMHFXv4ulL1NvwBdzOfi7Jw07737R5ABpy6FP4TQ
 tUHpKoUD/qv9HM/1YgPlMU6z22fmyJK6b8PVijn18aVaUI54tR/MCmwShsauVElSuWN4nUvYryeH0PFx1JhoPNWTSUN1tGygd0gMkmf/ENQjUHJXEjFMm1I1
 k8H4c5OVgqkyWigwnxPqJZscn3rBPGcVItQta2Y2RjbVQ93GVuFPx6KwWPLeek3b70Bn9cIea7ZIbULPjAWt8OEOSYMxEtApTsRDAisR/B1GVBVqUDHB9AsS
 QnT3lVCT0EyNZRh4pGNWZZTrwwSzchYdZjpyAqh+64JTn3jbBVj46AyFOelCbT941WPoxR6XsOBOE9MrMdk+Vp6x08Nzebt+jEEITg==
X-Mailman-Approved-At: Mon, 19 Aug 2019 10:14:48 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jernej Skrabec <jernej.skrabec@siol.net>,
 Neil Armstrong <narmstrong@baylibre.com>, David Airlie <airlied@linux.ie>,
 Jonas Karlman <jonas@kwiboo.se>, linux-kernel@vger.kernel.org,
 Douglas Anderson <dianders@chromium.org>, Sean Paul <seanpaul@chromium.org>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gOC8xNC8xOSAxMjo0NSBQTSwgRGFyaXVzeiBNYXJjaW5raWV3aWN6IHdyb3RlOgo+IFVzZSB0
aGUgbmV3IGNlY19ub3RpZmllcl9jb25uXyh1bilyZWdpc3RlcigpIGZ1bmN0aW9ucyB0bwo+ICh1
bilyZWdpc3RlciB0aGUgbm90aWZpZXIgZm9yIHRoZSBIRE1JIGNvbm5lY3RvciwgYW5kIGZpbGwg
aW4KPiB0aGUgY2VjX2Nvbm5lY3Rvcl9pbmZvLgo+IAo+IENoYW5nZXMgc2luY2UgdjY6Cj4gICAg
ICAgICAtIG1vdmUgY2VjX25vdGlmaWVyX2Nvbm5fdW5yZWdpc3RlciB0byBhIGJyaWRnZSBkZXRh
Y2gKPiAJICBmdW5jdGlvbiwKPiAJLSBhZGQgYSBtdXRleCBwcm90ZWN0aW5nIGEgQ0VDIG5vdGlm
aWVyLgo+IENoYW5nZXMgc2luY2UgdjQ6Cj4gCS0gdHlwbyBmaXgKPiBDaGFuZ2VzIHNpbmNlIHYy
Ogo+IAktIHJlbW92ZWQgdW5uZWNlc3NhcnkgTlVMTCBjaGVjayBiZWZvcmUgYSBjYWxsIHRvCj4g
CWNlY19ub3RpZmllcl9jb25uX3VucmVnaXN0ZXIsCj4gCS0gdXNlIGNlY19ub3RpZmllcl9waHlz
X2FkZHJfaW52YWxpZGF0ZSB0byBpbnZhbGlkYXRlIHBoeXNpY2FsCj4gCWFkZHJlc3MuCj4gQ2hh
bmdlcyBzaW5jZSB2MToKPiAJQWRkIG1lbW9yeSBiYXJyaWVyIHRvIG1ha2Ugc3VyZSB0aGF0IHRo
ZSBub3RpZmllcgo+IAliZWNvbWVzIHZpc2libGUgdG8gdGhlIGlycSB0aHJlYWQgb25jZSBpdCBp
cyBmdWxseQo+IAljb25zdHJ1Y3RlZC4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBEYXJpdXN6IE1hcmNp
bmtpZXdpY3ogPGRhcmVrbUBnb29nbGUuY29tPgoKQWNrZWQtYnk6IEhhbnMgVmVya3VpbCA8aHZl
cmt1aWwtY2lzY29AeHM0YWxsLm5sPgoKUmVnYXJkcywKCglIYW5zCgo+IC0tLQo+ICBkcml2ZXJz
L2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LWhkbWkuYyB8IDQ1ICsrKysrKysrKysrKysrKy0t
LS0tLS0tCj4gIDEgZmlsZSBjaGFuZ2VkLCAzMCBpbnNlcnRpb25zKCspLCAxNSBkZWxldGlvbnMo
LSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1o
ZG1pLmMgYi9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LWhkbWkuYwo+IGluZGV4
IDgzYjk0YjY2ZTQ2NGUuLjU1MTYyYzkwOTJmNzEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYnJp
ZGdlL3N5bm9wc3lzL2R3LWhkbWkuYwo+IEBAIC0xOTAsNiArMTkwLDcgQEAgc3RydWN0IGR3X2hk
bWkgewo+ICAJdm9pZCAoKmVuYWJsZV9hdWRpbykoc3RydWN0IGR3X2hkbWkgKmhkbWkpOwo+ICAJ
dm9pZCAoKmRpc2FibGVfYXVkaW8pKHN0cnVjdCBkd19oZG1pICpoZG1pKTsKPiAgCj4gKwlzdHJ1
Y3QgbXV0ZXggY2VjX25vdGlmaWVyX211dGV4Owo+ICAJc3RydWN0IGNlY19ub3RpZmllciAqY2Vj
X25vdGlmaWVyOwo+ICB9Owo+ICAKPiBAQCAtMjE5NCw2ICsyMTk1LDggQEAgc3RhdGljIGludCBk
d19oZG1pX2JyaWRnZV9hdHRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKPiAgCXN0cnVj
dCBkd19oZG1pICpoZG1pID0gYnJpZGdlLT5kcml2ZXJfcHJpdmF0ZTsKPiAgCXN0cnVjdCBkcm1f
ZW5jb2RlciAqZW5jb2RlciA9IGJyaWRnZS0+ZW5jb2RlcjsKPiAgCXN0cnVjdCBkcm1fY29ubmVj
dG9yICpjb25uZWN0b3IgPSAmaGRtaS0+Y29ubmVjdG9yOwo+ICsJc3RydWN0IGNlY19jb25uZWN0
b3JfaW5mbyBjb25uX2luZm87Cj4gKwlzdHJ1Y3QgY2VjX25vdGlmaWVyICpub3RpZmllcjsKPiAg
Cj4gIAljb25uZWN0b3ItPmludGVybGFjZV9hbGxvd2VkID0gMTsKPiAgCWNvbm5lY3Rvci0+cG9s
bGVkID0gRFJNX0NPTk5FQ1RPUl9QT0xMX0hQRDsKPiBAQCAtMjIwNyw5ICsyMjEwLDI5IEBAIHN0
YXRpYyBpbnQgZHdfaGRtaV9icmlkZ2VfYXR0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2Up
Cj4gIAo+ICAJZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfZW5jb2Rlcihjb25uZWN0b3IsIGVuY29kZXIp
Owo+ICAKPiArCWNlY19maWxsX2Nvbm5faW5mb19mcm9tX2RybSgmY29ubl9pbmZvLCBjb25uZWN0
b3IpOwo+ICsKPiArCW5vdGlmaWVyID0gY2VjX25vdGlmaWVyX2Nvbm5fcmVnaXN0ZXIoaGRtaS0+
ZGV2LCBOVUxMLCAmY29ubl9pbmZvKTsKPiArCWlmICghbm90aWZpZXIpCj4gKwkJcmV0dXJuIC1F
Tk9NRU07Cj4gKwo+ICsJbXV0ZXhfbG9jaygmaGRtaS0+Y2VjX25vdGlmaWVyX211dGV4KTsKPiAr
CWhkbWktPmNlY19ub3RpZmllciA9IG5vdGlmaWVyOwo+ICsJbXV0ZXhfdW5sb2NrKCZoZG1pLT5j
ZWNfbm90aWZpZXJfbXV0ZXgpOwo+ICsKPiAgCXJldHVybiAwOwo+ICB9Cj4gIAo+ICtzdGF0aWMg
dm9pZCBkd19oZG1pX2JyaWRnZV9kZXRhY2goc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKPiAr
ewo+ICsJc3RydWN0IGR3X2hkbWkgKmhkbWkgPSBicmlkZ2UtPmRyaXZlcl9wcml2YXRlOwo+ICsK
PiArCW11dGV4X2xvY2soJmhkbWktPmNlY19ub3RpZmllcl9tdXRleCk7Cj4gKwljZWNfbm90aWZp
ZXJfY29ubl91bnJlZ2lzdGVyKGhkbWktPmNlY19ub3RpZmllcik7Cj4gKwloZG1pLT5jZWNfbm90
aWZpZXIgPSBOVUxMOwo+ICsJbXV0ZXhfdW5sb2NrKCZoZG1pLT5jZWNfbm90aWZpZXJfbXV0ZXgp
Owo+ICt9Cj4gKwo+ICBzdGF0aWMgZW51bSBkcm1fbW9kZV9zdGF0dXMKPiAgZHdfaGRtaV9icmlk
Z2VfbW9kZV92YWxpZChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAo+ICAJCQkgIGNvbnN0IHN0
cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKQo+IEBAIC0yMjY2LDYgKzIyODksNyBAQCBzdGF0
aWMgdm9pZCBkd19oZG1pX2JyaWRnZV9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkK
PiAgCj4gIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2JyaWRnZV9mdW5jcyBkd19oZG1pX2JyaWRn
ZV9mdW5jcyA9IHsKPiAgCS5hdHRhY2ggPSBkd19oZG1pX2JyaWRnZV9hdHRhY2gsCj4gKwkuZGV0
YWNoID0gZHdfaGRtaV9icmlkZ2VfZGV0YWNoLAo+ICAJLmVuYWJsZSA9IGR3X2hkbWlfYnJpZGdl
X2VuYWJsZSwKPiAgCS5kaXNhYmxlID0gZHdfaGRtaV9icmlkZ2VfZGlzYWJsZSwKPiAgCS5tb2Rl
X3NldCA9IGR3X2hkbWlfYnJpZGdlX21vZGVfc2V0LAo+IEBAIC0yMzczLDkgKzIzOTcsMTEgQEAg
c3RhdGljIGlycXJldHVybl90IGR3X2hkbWlfaXJxKGludCBpcnEsIHZvaWQgKmRldl9pZCkKPiAg
CQkJCSAgICAgICBwaHlfc3RhdCAmIEhETUlfUEhZX0hQRCwKPiAgCQkJCSAgICAgICBwaHlfc3Rh
dCAmIEhETUlfUEhZX1JYX1NFTlNFKTsKPiAgCj4gLQkJaWYgKChwaHlfc3RhdCAmIChIRE1JX1BI
WV9SWF9TRU5TRSB8IEhETUlfUEhZX0hQRCkpID09IDApCj4gLQkJCWNlY19ub3RpZmllcl9zZXRf
cGh5c19hZGRyKGhkbWktPmNlY19ub3RpZmllciwKPiAtCQkJCQkJICAgQ0VDX1BIWVNfQUREUl9J
TlZBTElEKTsKPiArCQlpZiAoKHBoeV9zdGF0ICYgKEhETUlfUEhZX1JYX1NFTlNFIHwgSERNSV9Q
SFlfSFBEKSkgPT0gMCkgewo+ICsJCQltdXRleF9sb2NrKCZoZG1pLT5jZWNfbm90aWZpZXJfbXV0
ZXgpOwo+ICsJCQljZWNfbm90aWZpZXJfcGh5c19hZGRyX2ludmFsaWRhdGUoaGRtaS0+Y2VjX25v
dGlmaWVyKTsKPiArCQkJbXV0ZXhfdW5sb2NrKCZoZG1pLT5jZWNfbm90aWZpZXJfbXV0ZXgpOwo+
ICsJCX0KPiAgCX0KPiAgCj4gIAlpZiAoaW50cl9zdGF0ICYgSERNSV9JSF9QSFlfU1RBVDBfSFBE
KSB7Cj4gQEAgLTI1NjEsNiArMjU4Nyw3IEBAIF9fZHdfaGRtaV9wcm9iZShzdHJ1Y3QgcGxhdGZv
cm1fZGV2aWNlICpwZGV2LAo+ICAKPiAgCW11dGV4X2luaXQoJmhkbWktPm11dGV4KTsKPiAgCW11
dGV4X2luaXQoJmhkbWktPmF1ZGlvX211dGV4KTsKPiArCW11dGV4X2luaXQoJmhkbWktPmNlY19u
b3RpZmllcl9tdXRleCk7Cj4gIAlzcGluX2xvY2tfaW5pdCgmaGRtaS0+YXVkaW9fbG9jayk7Cj4g
IAo+ICAJZGRjX25vZGUgPSBvZl9wYXJzZV9waGFuZGxlKG5wLCAiZGRjLWkyYy1idXMiLCAwKTsK
PiBAQCAtMjY5MywxMiArMjcyMCw2IEBAIF9fZHdfaGRtaV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1f
ZGV2aWNlICpwZGV2LAo+ICAJaWYgKHJldCkKPiAgCQlnb3RvIGVycl9pYWhiOwo+ICAKPiAtCWhk
bWktPmNlY19ub3RpZmllciA9IGNlY19ub3RpZmllcl9nZXQoZGV2KTsKPiAtCWlmICghaGRtaS0+
Y2VjX25vdGlmaWVyKSB7Cj4gLQkJcmV0ID0gLUVOT01FTTsKPiAtCQlnb3RvIGVycl9pYWhiOwo+
IC0JfQo+IC0KPiAgCS8qCj4gIAkgKiBUbyBwcmV2ZW50IG92ZXJmbG93cyBpbiBIRE1JX0lIX0ZD
X1NUQVQyLCBzZXQgdGhlIGNsayByZWdlbmVyYXRvcgo+ICAJICogTiBhbmQgY3RzIHZhbHVlcyBi
ZWZvcmUgZW5hYmxpbmcgcGh5Cj4gQEAgLTI3OTYsOSArMjgxNyw2IEBAIF9fZHdfaGRtaV9wcm9i
ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2LAo+ICAJCWhkbWktPmRkYyA9IE5VTEw7Cj4g
IAl9Cj4gIAo+IC0JaWYgKGhkbWktPmNlY19ub3RpZmllcikKPiAtCQljZWNfbm90aWZpZXJfcHV0
KGhkbWktPmNlY19ub3RpZmllcik7Cj4gLQo+ICAJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKGhkbWkt
PmlhaGJfY2xrKTsKPiAgCWlmIChoZG1pLT5jZWNfY2xrKQo+ICAJCWNsa19kaXNhYmxlX3VucHJl
cGFyZShoZG1pLT5jZWNfY2xrKTsKPiBAQCAtMjgyMCw5ICsyODM4LDYgQEAgc3RhdGljIHZvaWQg
X19kd19oZG1pX3JlbW92ZShzdHJ1Y3QgZHdfaGRtaSAqaGRtaSkKPiAgCS8qIERpc2FibGUgYWxs
IGludGVycnVwdHMgKi8KPiAgCWhkbWlfd3JpdGViKGhkbWksIH4wLCBIRE1JX0lIX01VVEVfUEhZ
X1NUQVQwKTsKPiAgCj4gLQlpZiAoaGRtaS0+Y2VjX25vdGlmaWVyKQo+IC0JCWNlY19ub3RpZmll
cl9wdXQoaGRtaS0+Y2VjX25vdGlmaWVyKTsKPiAtCj4gIAljbGtfZGlzYWJsZV91bnByZXBhcmUo
aGRtaS0+aWFoYl9jbGspOwo+ICAJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKGhkbWktPmlzZnJfY2xr
KTsKPiAgCWlmIChoZG1pLT5jZWNfY2xrKQo+IAoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vZHJpLWRldmVs
