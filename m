Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D47CA1169E8
	for <lists+dri-devel@lfdr.de>; Mon,  9 Dec 2019 10:46:51 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CE4156E343;
	Mon,  9 Dec 2019 09:46:37 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x444.google.com (mail-pf1-x444.google.com
 [IPv6:2607:f8b0:4864:20::444])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2A60D6E0E8
 for <dri-devel@lists.freedesktop.org>; Mon,  9 Dec 2019 05:09:06 +0000 (UTC)
Received: by mail-pf1-x444.google.com with SMTP id s18so6579807pfm.4
 for <dri-devel@lists.freedesktop.org>; Sun, 08 Dec 2019 21:09:06 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=0XEcja4j0Y7wjAXUdzpkpUFGjQtVSvVgIR5k+TIOO3A=;
 b=G5bQX0hfZgnfX71VPuLTO68n9CzDsmeTRWCgFwC8KEaAzq5foVDopQCovw5raL9T1Y
 kfbyMqBPQtCk6YZZhL8RKPBg6hhF6IPLvHAAeOfxi8qnVsrq1L8nEd37jCmX5Sk9piyN
 KAq4gMUnmc1ulM2XhzTqRIL0S29aK4X537qoqECHy8X2xrmby2F+oKyoHVAfvDMxkaFu
 sXRz9QE85UkdsutxP1lzETwm3DU8JfdQXMl1Ew2WayFzC1aBFqR6dUyMrZsuBUDBHd9C
 FkJW+e8zG5Baf6PJimFeAZ2aBNqz2Tp8yhT+IAh2+HFWPsWkpoPuKMu1RBvP0I4SfiOj
 NlGw==
X-Gm-Message-State: APjAAAV4G8NieibrNLijNIeO/gvVdKXbYRaRLx+apLL9axwVyvylJdHB
 GJsXbg6kUsh+UA/uCa6+hUVsMgO4Zvs=
X-Google-Smtp-Source: APXvYqwajQf/Bi8UAd63eQFE7lsxK1wBbKgiKULZAysTm170wg2Z4MW+U4HqpikvYcXF2/agV8Hvcw==
X-Received: by 2002:a62:2a12:: with SMTP id q18mr3738243pfq.203.1575868145350; 
 Sun, 08 Dec 2019 21:09:05 -0800 (PST)
Received: from localhost.localdomain (c-67-165-113-11.hsd1.wa.comcast.net.
 [67.165.113.11])
 by smtp.gmail.com with ESMTPSA id k15sm25752119pfg.37.2019.12.08.21.09.04
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Sun, 08 Dec 2019 21:09:04 -0800 (PST)
From: Andrey Smirnov <andrew.smirnov@gmail.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v3 2/2] drm/bridge: tc358767: Expose test mode functionality
 via debugfs
Date: Sun,  8 Dec 2019 21:08:57 -0800
Message-Id: <20191209050857.31624-3-andrew.smirnov@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191209050857.31624-1-andrew.smirnov@gmail.com>
References: <20191209050857.31624-1-andrew.smirnov@gmail.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Mon, 09 Dec 2019 09:46:36 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=0XEcja4j0Y7wjAXUdzpkpUFGjQtVSvVgIR5k+TIOO3A=;
 b=Byl0tHTW1y0U1nhXhbir9SOQQUeoUvfSopB4RAvpD3us/55LRl2d2XvYDcEkv2YoQt
 gYDAvtunNSXfWf3T1WsWB6Ufg28MFe0a0BZElON27SPZiDDb/rIlRZnUhTg4zbt+kJDQ
 HPjDy8jXUS8+86QGGTuyo1wDwzYk1YBQ7Tl9kgVXwPDRAQCJdUtpbNnkLvIL4PfkjH0x
 0m7GmwAbyKQKt7b6hJuy/XQKdgI1NWARM4UqHsMzt5JOIM+H/bnIqQTh+RConkfOGNAB
 GScPalGMLvGANYC4pjyrvBkPeSN0YE9+92jDi/ppSRyMy7x5I8NCAa1/IbtJ4+MRhyz/
 BPug==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Cory Tusar <cory.tusar@zii.aero>, Andrey Smirnov <andrew.smirnov@gmail.com>,
 linux-kernel@vger.kernel.org, Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>,
 Chris Healy <cphealy@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UHJlc2VudGx5LCB0aGUgZHJpdmVyIGNvZGUgYXJ0aWZpY2lhbGx5IGxpbWl0cyB0ZXN0IHBhdHRl
cm4gbW9kZSB0byBhCnNpbmdsZSBwYXR0ZXJuIHdpdGggZml4ZWQgY29sb3Igc2VsZWN0aW9uLiBJ
dCBiZWluZyBhIGtlcm5lbCBtb2R1bGUKcGFyYW1ldGVyIG1ha2VzIHN3aXRjaGluZyAidGVzdCBw
YXR0ZXJuIiA8LT4gInByb3BlciBvdXRwdXQiIG1vZGVzCm9uLXRoZS1mbHkgY2x1bmt5IGFuZCBv
dXRyaWdodCBpbXBvc3NpYmxlIGlmIHRoZSBkcml2ZXIgaXMgYnVpbHQgaW50bwp0aGUga2VybmVs
LgoKVG8gaW1wcm92ZSB0aGUgc2l0dWF0aW9uIGEgYml0LCBjb252ZXJ0IGN1cnJlbnQgdGVzdCBw
YXR0ZXJuIGNvZGUgdG8KdXNlIGRlYnVnZnMgaW5zdGVhZCBieSBleHBvc2luZyAiVGVzdEN0bCIg
cmVnaXN0ZXIuIFRoaXMgd2F5IG9sZAoidGNfdGVzdF9wYXR0ZXJuPTEiIGZ1bmN0aW9uYWxpdHkg
Y2FuIGJlIGVtdWxhdGVkIHZpYToKCiAgICBlY2hvIC1uIDB4NzgxNDYzMDIgPiB0c3RjdGwKCmFu
ZCBzd2l0Y2ggYmFjayB0byByZWd1bGFyIG1vZGUgY2FuIGJlIGRvbmUgd2l0aDoKCiAgICBlY2hv
IC1uIDB4NzgxNDYzMDAgPiB0c3RjdGwKCk5vdGUgdGhhdCBzd2l0Y2hpbmcgdG8gYW55IG9mIHRo
ZSB0ZXN0IHBhdHRlcm5zLCB3aWxsIE5PVCB0cmlnZ2VyIGxpbmsKcmUtZXN0YWJsaXNobWVudCB3
aGVyZWFzIHN3aXRjaGluZyB0byBub3JtYWwgb3BlcmF0aW9uIFdJTEwuIFRoaXMgaXMKZG9uZSBz
bzoKCmEpIHdlIGNhbiBpc29sYXRlIGFuZCB2ZXJpZnkgKGUpRFAgbGluayBmdW5jdGlvbmFsaXR5
IGJ5IHN3aXRjaGluZyB0bwogICBvbmUgb2YgdGhlIHRlc3QgcGF0dGVycwoKYikgdHJpZ2dlciBh
IGxpbmsgcmUtZXN0YWJsaXNobWVudCBieSBzd2l0Y2hpbmcgYmFjayB0byBub3JtYWwgbW9kZQoK
U2lnbmVkLW9mZi1ieTogQW5kcmV5IFNtaXJub3YgPGFuZHJldy5zbWlybm92QGdtYWlsLmNvbT4K
Q2M6IEFuZHJ6ZWogSGFqZGEgPGEuaGFqZGFAc2Ftc3VuZy5jb20+CkNjOiBMYXVyZW50IFBpbmNo
YXJ0IDxMYXVyZW50LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+CkNjOiBUb21pIFZhbGtlaW5l
biA8dG9taS52YWxrZWluZW5AdGkuY29tPgpDYzogQ29yeSBUdXNhciA8Y29yeS50dXNhckB6aWku
YWVybz4KQ2M6IENocmlzIEhlYWx5IDxjcGhlYWx5QGdtYWlsLmNvbT4KQ2M6IEx1Y2FzIFN0YWNo
IDxsLnN0YWNoQHBlbmd1dHJvbml4LmRlPgpDYzogZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpDYzogbGludXgta2VybmVsQHZnZXIua2VybmVsLm9yZwotLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9icmlkZ2UvdGMzNTg3NjcuYyB8IDE1MiArKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0K
IDEgZmlsZSBjaGFuZ2VkLCAxMjUgaW5zZXJ0aW9ucygrKSwgMjcgZGVsZXRpb25zKC0pCgpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS90YzM1ODc2Ny5jIGIvZHJpdmVycy9ncHUv
ZHJtL2JyaWRnZS90YzM1ODc2Ny5jCmluZGV4IDNjMjUyYWUwZWU2Zi4uMTJhODgyOWUwZWQxIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3RjMzU4NzY3LmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2JyaWRnZS90YzM1ODc2Ny5jCkBAIC0xNyw2ICsxNyw3IEBACiAKICNpbmNsdWRl
IDxsaW51eC9iaXRmaWVsZC5oPgogI2luY2x1ZGUgPGxpbnV4L2Nsay5oPgorI2luY2x1ZGUgPGxp
bnV4L2RlYnVnZnMuaD4KICNpbmNsdWRlIDxsaW51eC9kZXZpY2UuaD4KICNpbmNsdWRlIDxsaW51
eC9ncGlvL2NvbnN1bWVyLmg+CiAjaW5jbHVkZSA8bGludXgvaTJjLmg+CkBAIC0yMjEsMTEgKzIy
MiwxMCBAQAogI2RlZmluZSBDT0xPUl9CCQkJR0VOTUFTSygxNSwgOCkKICNkZWZpbmUgRU5JMkNG
SUxURVIJCUJJVCg0KQogI2RlZmluZSBDT0xPUl9CQVJfTU9ERQkJR0VOTUFTSygxLCAwKQorI2Rl
ZmluZSBDT0xPUl9CQVJfTU9ERV9OT1JNQUwJMAogI2RlZmluZSBDT0xPUl9CQVJfTU9ERV9CQVJT
CTIKLSNkZWZpbmUgUExMX0RCRwkJCTB4MGEwNAogCi1zdGF0aWMgYm9vbCB0Y190ZXN0X3BhdHRl
cm47Ci1tb2R1bGVfcGFyYW1fbmFtZWQodGVzdCwgdGNfdGVzdF9wYXR0ZXJuLCBib29sLCAwNjQ0
KTsKKyNkZWZpbmUgUExMX0RCRwkJCTB4MGEwNAogCiBzdHJ1Y3QgdGNfZWRwX2xpbmsgewogCXN0
cnVjdCBkcm1fZHBfbGluawliYXNlOwpAQCAtMjYzLDYgKzI2Myw5IEBAIHN0cnVjdCB0Y19kYXRh
IHsKIAogCS8qIEhQRCBwaW4gbnVtYmVyICgwIG9yIDEpIG9yIC1FTk9ERVYgKi8KIAlpbnQJCQlo
cGRfcGluOworCisJc3RydWN0IG11dGV4CQl0c3RjdGxfbG9jazsKKwlib29sCQkJZW5hYmxlZDsK
IH07CiAKIHN0YXRpYyBpbmxpbmUgc3RydWN0IHRjX2RhdGEgKmF1eF90b190YyhzdHJ1Y3QgZHJt
X2RwX2F1eCAqYSkKQEAgLTc5MSwxNiArNzk0LDYgQEAgc3RhdGljIGludCB0Y19zZXRfdmlkZW9f
bW9kZShzdHJ1Y3QgdGNfZGF0YSAqdGMsCiAJaWYgKHJldCkKIAkJcmV0dXJuIHJldDsKIAotCS8q
IFRlc3QgcGF0dGVybiBzZXR0aW5ncyAqLwotCXJldCA9IHJlZ21hcF93cml0ZSh0Yy0+cmVnbWFw
LCBUU1RDVEwsCi0JCQkgICBGSUVMRF9QUkVQKENPTE9SX1IsIDEyMCkgfAotCQkJICAgRklFTERf
UFJFUChDT0xPUl9HLCAyMCkgfAotCQkJICAgRklFTERfUFJFUChDT0xPUl9CLCA5OSkgfAotCQkJ
ICAgRU5JMkNGSUxURVIgfAotCQkJICAgRklFTERfUFJFUChDT0xPUl9CQVJfTU9ERSwgQ09MT1Jf
QkFSX01PREVfQkFSUykpOwotCWlmIChyZXQpCi0JCXJldHVybiByZXQ7Ci0KIAkvKiBEUCBNYWlu
IFN0cmVhbSBBdHRyaWJ1dGVzICovCiAJdmlkX3N5bmNfZGx5ID0gaHN5bmNfbGVuICsgbGVmdF9t
YXJnaW4gKyBtb2RlLT5oZGlzcGxheTsKIAlyZXQgPSByZWdtYXBfd3JpdGUodGMtPnJlZ21hcCwg
RFAwX1ZJRFNZTkNERUxBWSwKQEAgLTExNTIsMTQgKzExNDUsNiBAQCBzdGF0aWMgaW50IHRjX3N0
cmVhbV9lbmFibGUoc3RydWN0IHRjX2RhdGEgKnRjKQogCiAJZGV2X2RiZyh0Yy0+ZGV2LCAiZW5h
YmxlIHZpZGVvIHN0cmVhbVxuIik7CiAKLQkvKiBQWEwgUExMIHNldHVwICovCi0JaWYgKHRjX3Rl
c3RfcGF0dGVybikgewotCQlyZXQgPSB0Y19weGxfcGxsX2VuKHRjLCBjbGtfZ2V0X3JhdGUodGMt
PnJlZmNsayksCi0JCQkJICAgIDEwMDAgKiB0Yy0+bW9kZS5jbG9jayk7Ci0JCWlmIChyZXQpCi0J
CQlyZXR1cm4gcmV0OwotCX0KLQogCXJldCA9IHRjX3NldF92aWRlb19tb2RlKHRjLCAmdGMtPm1v
ZGUpOwogCWlmIChyZXQpCiAJCXJldHVybiByZXQ7CkBAIC0xMTg4LDEyICsxMTczLDggQEAgc3Rh
dGljIGludCB0Y19zdHJlYW1fZW5hYmxlKHN0cnVjdCB0Y19kYXRhICp0YykKIAlpZiAocmV0KQog
CQlyZXR1cm4gcmV0OwogCS8qIFNldCBpbnB1dCBpbnRlcmZhY2UgKi8KLQl2YWx1ZSA9IERQMF9B
VURTUkNfTk9fSU5QVVQ7Ci0JaWYgKHRjX3Rlc3RfcGF0dGVybikKLQkJdmFsdWUgfD0gRFAwX1ZJ
RFNSQ19DT0xPUl9CQVI7Ci0JZWxzZQotCQl2YWx1ZSB8PSBEUDBfVklEU1JDX0RQSV9SWDsKLQly
ZXQgPSByZWdtYXBfd3JpdGUodGMtPnJlZ21hcCwgU1lTQ1RSTCwgdmFsdWUpOworCXJldCA9IHJl
Z21hcF93cml0ZSh0Yy0+cmVnbWFwLCBTWVNDVFJMLAorCQkJICAgRFAwX0FVRFNSQ19OT19JTlBV
VCB8IERQMF9WSURTUkNfRFBJX1JYKTsKIAlpZiAocmV0KQogCQlyZXR1cm4gcmV0OwogCkBAIC0x
MjUyLDggKzEyMzMsMTMgQEAgc3RhdGljIHZvaWQgdGNfYnJpZGdlX2VuYWJsZShzdHJ1Y3QgZHJt
X2JyaWRnZSAqYnJpZGdlKQogewogCXN0cnVjdCB0Y19kYXRhICp0YyA9IGJyaWRnZV90b190Yyhi
cmlkZ2UpOwogCisJbXV0ZXhfbG9jaygmdGMtPnRzdGN0bF9sb2NrKTsKKwogCWlmICghX190Y19i
cmlkZ2VfZW5hYmxlKHRjKSkKIAkJZHJtX3BhbmVsX2VuYWJsZSh0Yy0+cGFuZWwpOworCisJdGMt
PmVuYWJsZWQgPSB0cnVlOworCW11dGV4X3VubG9jaygmdGMtPnRzdGN0bF9sb2NrKTsKIH0KIAog
c3RhdGljIGludCBfX3RjX2JyaWRnZV9kaXNhYmxlKHN0cnVjdCB0Y19kYXRhICp0YykKQEAgLTEy
NzUsOCArMTI2MSwxMyBAQCBzdGF0aWMgdm9pZCB0Y19icmlkZ2VfZGlzYWJsZShzdHJ1Y3QgZHJt
X2JyaWRnZSAqYnJpZGdlKQogewogCXN0cnVjdCB0Y19kYXRhICp0YyA9IGJyaWRnZV90b190Yyhi
cmlkZ2UpOwogCisJbXV0ZXhfbG9jaygmdGMtPnRzdGN0bF9sb2NrKTsKKwogCWRybV9wYW5lbF9k
aXNhYmxlKHRjLT5wYW5lbCk7CiAJX190Y19icmlkZ2VfZGlzYWJsZSh0Yyk7CisKKwl0Yy0+ZW5h
YmxlZCA9IGZhbHNlOworCW11dGV4X3VubG9jaygmdGMtPnRzdGN0bF9sb2NrKTsKIH0KIAogc3Rh
dGljIHZvaWQgdGNfYnJpZGdlX3Bvc3RfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdl
KQpAQCAtMTM4OCw2ICsxMzc5LDk5IEBAIHN0YXRpYyBlbnVtIGRybV9jb25uZWN0b3Jfc3RhdHVz
IHRjX2Nvbm5lY3Rvcl9kZXRlY3Qoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lCiAJCXJldHVy
biBjb25uZWN0b3Jfc3RhdHVzX2Rpc2Nvbm5lY3RlZDsKIH0KIAorc3RhdGljIGludCB0Y190c3Rj
dGxfc2V0KHZvaWQgKmRhdGEsIHU2NCB2YWwpCit7CisJc3RydWN0IHRjX2RhdGEgKnRjID0gZGF0
YTsKKwlpbnQgcmV0OworCisJbXV0ZXhfbG9jaygmdGMtPnRzdGN0bF9sb2NrKTsKKworCWlmICgh
dGMtPmVuYWJsZWQpIHsKKwkJZGV2X2Vycih0Yy0+ZGV2LCAiYnJpZGdlIG5lZWRzIHRvIGJlIGVu
YWJsZWQgZmlyc3RcbiIpOworCQlyZXQgPSAtRUJVU1k7CisJCWdvdG8gdW5sb2NrOworCX0KKwor
CWlmIChGSUVMRF9HRVQoQ09MT1JfQkFSX01PREUsIHZhbCkgPT0gQ09MT1JfQkFSX01PREVfTk9S
TUFMKSB7CisJCXJldCA9IHJlZ21hcF93cml0ZSh0Yy0+cmVnbWFwLCBTWVNDVFJMLCBEUDBfVklE
U1JDX0RQSV9SWCk7CisJCWlmIChyZXQpIHsKKwkJCWRldl9lcnIodGMtPmRldiwKKwkJCQkiZmFp
bGVkIHRvIHNlbGVjdCBkcGkgdmlkZW8gc3RyZWFtXG4iKTsKKwkJCWdvdG8gdW5sb2NrOworCQl9
CisKKwkJcmV0ID0gcmVnbWFwX3dyaXRlKHRjLT5yZWdtYXAsIFRTVENUTCwgdmFsIHwgRU5JMkNG
SUxURVIpOworCQlpZiAocmV0KSB7CisJCQlkZXZfZXJyKHRjLT5kZXYsICJmYWlsZWQgdG8gc2V0
IFRTVENUTFxuIik7CisJCQlnb3RvIHVubG9jazsKKwkJfQorCisJCXJldCA9IHRjX3B4bF9wbGxf
ZGlzKHRjKTsKKwkJaWYgKHJldCkgeworCQkJZGV2X2Vycih0Yy0+ZGV2LCAiZmFpbGVkIHRvIGRp
c2FibGUgUExMXG4iKTsKKwkJCWdvdG8gdW5sb2NrOworCQl9CisKKwkJLyoKKwkJICogUmUtZXN0
YWJsaXNoIERQIGxpbmsKKwkJICovCisJCXJldCA9IF9fdGNfYnJpZGdlX2Rpc2FibGUodGMpOwor
CQlpZiAocmV0KQorCQkJZ290byB1bmxvY2s7CisKKwkJcmV0ID0gX190Y19icmlkZ2VfZW5hYmxl
KHRjKTsKKwkJaWYgKHJldCkKKwkJCWdvdG8gdW5sb2NrOworCX0gZWxzZSB7CisJCXJldCA9IHRj
X3B4bF9wbGxfZW4odGMsIGNsa19nZXRfcmF0ZSh0Yy0+cmVmY2xrKSwKKwkJCQkgICAgMTAwMCAq
IHRjLT5tb2RlLmNsb2NrKTsKKwkJaWYgKHJldCkgeworCQkJZGV2X2Vycih0Yy0+ZGV2LCAiZmFp
bGVkIHRvIGVuYWJsZSBQTExcbiIpOworCQkJZ290byB1bmxvY2s7CisJCX0KKworCQlyZXQgPSBy
ZWdtYXBfd3JpdGUodGMtPnJlZ21hcCwgVFNUQ1RMLCB2YWwgfCBFTkkyQ0ZJTFRFUik7CisJCWlm
IChyZXQpIHsKKwkJCWRldl9lcnIodGMtPmRldiwgImZhaWxlZCB0byBzZXQgVFNUQ1RMXG4iKTsK
KwkJCWdvdG8gdW5sb2NrOworCQl9CisKKwkJcmV0ID0gcmVnbWFwX3dyaXRlKHRjLT5yZWdtYXAs
IFNZU0NUUkwsIERQMF9WSURTUkNfQ09MT1JfQkFSKTsKKwkJaWYgKHJldCkgeworCQkJZGV2X2Vy
cih0Yy0+ZGV2LCAiZmFpbGVkIHRvIHNldCBTWVNDVFJMXG4iKTsKKwkJCWdvdG8gdW5sb2NrOwor
CQl9CisJfQorCit1bmxvY2s6CisJbXV0ZXhfdW5sb2NrKCZ0Yy0+dHN0Y3RsX2xvY2spOworCXJl
dHVybiByZXQ7Cit9CisvKgorICogInRzdGN0bCIgYXR0cmlidXRlIGhhcyB0aGUgZm9sbG93aW5n
IGZvcm1hdDoKKyAqCisgKiAgICAgUlJfR0dfQkJfMF9QCisgKgorICogIlJSIiBpcyByZWQsICJH
RyIgaXMgZ3JlZW4gYW5kICJCQiIgaXMgYmx1ZSBjb2xvciBjb21wb25lbnRzIChieXRlCisgKiBl
YWNoKSB1c2VkIGZvciB2YXJpb3VzIHRlc3QgcGF0dGVybnMgY29udHJvbGxlZCBieSB0aGlzIHJl
Z2lzdGVyLgorICoKKyAqICJQIiByZXByZXNlbnRzIHRlc3QgcGF0dGVybiBvZiB0aGUgYnJpZGdl
LiBWYWxpZCB2YWx1ZXMgYXJlOgorICoKKyAqICAgICIwIiAtIG5vcm1hbCBvcGVyYXRpb24KKyAq
ICAgICIxIiAtIHNvbGlkIGNvbG9yIHRlc3QgcGF0dGVybgorICogICAgIjIiIC0gY29sb3IgYmFy
IHRlc3QgcGF0dGVybgorICogICAgIjMiIC0gImNoZWNrZXJzIiB0ZXN0IHBhdHRlcm4KKyAqCisg
KiBUaGlzIHdheSBvbGQgInRjX3Rlc3RfcGF0dGVybj0xIiBmdW5jdGlvbmFsaXR5IGNhbiBiZSBl
bXVsYXRlZCB2aWE6CisgKgorICogICAgIGVjaG8gLW4gMHg3ODE0NjMwMiA+IHRzdGN0bAorICoK
KyAqIGFuZCBzd2l0Y2ggYmFjayB0byByZWd1bGFyIG1vZGUgY2FuIGJlIGRvbmUgd2l0aDoKKyAq
CisgKiAgICAgZWNobyAtbiAwID4gdHN0Y3RsCisgKi8KK0RFRklORV9TSU1QTEVfQVRUUklCVVRF
KHRjX3RzdGN0bF9mb3BzLCBOVUxMLCB0Y190c3RjdGxfc2V0LCAiJWxsdVxuIik7CisKIHN0YXRp
YyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9mdW5jcyB0Y19jb25uZWN0b3JfZnVuY3MgPSB7
CiAJLmRldGVjdCA9IHRjX2Nvbm5lY3Rvcl9kZXRlY3QsCiAJLmZpbGxfbW9kZXMgPSBkcm1faGVs
cGVyX3Byb2JlX3NpbmdsZV9jb25uZWN0b3JfbW9kZXMsCkBAIC0xNTMwLDkgKzE2MTQsMTUgQEAg
c3RhdGljIGlycXJldHVybl90IHRjX2lycV9oYW5kbGVyKGludCBpcnEsIHZvaWQgKmFyZykKIAly
ZXR1cm4gSVJRX0hBTkRMRUQ7CiB9CiAKK3N0YXRpYyB2b2lkIHRjX3JlbW92ZV9kZWJ1Z2ZzKHZv
aWQgKmRhdGEpCit7CisJZGVidWdmc19yZW1vdmVfcmVjdXJzaXZlKGRhdGEpOworfQorCiBzdGF0
aWMgaW50IHRjX3Byb2JlKHN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQsIGNvbnN0IHN0cnVjdCBp
MmNfZGV2aWNlX2lkICppZCkKIHsKIAlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmY2xpZW50LT5kZXY7
CisJc3RydWN0IGRlbnRyeSAqZGVidWdmczsKIAlzdHJ1Y3QgdGNfZGF0YSAqdGM7CiAJaW50IHJl
dDsKIApAQCAtMTU0MSw2ICsxNjMxLDcgQEAgc3RhdGljIGludCB0Y19wcm9iZShzdHJ1Y3QgaTJj
X2NsaWVudCAqY2xpZW50LCBjb25zdCBzdHJ1Y3QgaTJjX2RldmljZV9pZCAqaWQpCiAJCXJldHVy
biAtRU5PTUVNOwogCiAJdGMtPmRldiA9IGRldjsKKwltdXRleF9pbml0KCZ0Yy0+dHN0Y3RsX2xv
Y2spOwogCiAJLyogcG9ydEAyIGlzIHRoZSBvdXRwdXQgcG9ydCAqLwogCXJldCA9IGRybV9vZl9m
aW5kX3BhbmVsX29yX2JyaWRnZShkZXYtPm9mX25vZGUsIDIsIDAsICZ0Yy0+cGFuZWwsIE5VTEwp
OwpAQCAtMTY3MSw2ICsxNzYyLDEzIEBAIHN0YXRpYyBpbnQgdGNfcHJvYmUoc3RydWN0IGkyY19j
bGllbnQgKmNsaWVudCwgY29uc3Qgc3RydWN0IGkyY19kZXZpY2VfaWQgKmlkKQogCiAJaTJjX3Nl
dF9jbGllbnRkYXRhKGNsaWVudCwgdGMpOwogCisJZGVidWdmcyA9IGRlYnVnZnNfY3JlYXRlX2Rp
cihkZXZfbmFtZShkZXYpLCBOVUxMKTsKKwlpZiAoIUlTX0VSUihkZWJ1Z2ZzKSkgeworCQlkZWJ1
Z2ZzX2NyZWF0ZV9maWxlX3Vuc2FmZSgidHN0Y3RsIiwgMDIwMCwgZGVidWdmcywgdGMsCisJCQkJ
CSAgICZ0Y190c3RjdGxfZm9wcyk7CisJCWRldm1fYWRkX2FjdGlvbl9vcl9yZXNldChkZXYsIHRj
X3JlbW92ZV9kZWJ1Z2ZzLCBkZWJ1Z2ZzKTsKKwl9CisKIAlyZXR1cm4gMDsKIH0KIAotLSAKMi4y
MS4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmkt
ZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
