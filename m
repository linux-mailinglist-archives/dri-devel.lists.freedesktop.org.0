Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 21887E1FCD
	for <lists+dri-devel@lfdr.de>; Wed, 23 Oct 2019 17:45:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 24F8B6EB1B;
	Wed, 23 Oct 2019 15:45:36 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk
 [IPv6:2a00:1098:0:82:1000:25:2eeb:e3e3])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2EEB16EB1D
 for <dri-devel@lists.freedesktop.org>; Wed, 23 Oct 2019 15:45:28 +0000 (UTC)
Received: from localhost.localdomain (unknown
 [IPv6:2a01:e0a:2c:6930:5cf4:84a1:2763:fe0d])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested) (Authenticated sender: bbrezillon)
 by bhuna.collabora.co.uk (Postfix) with ESMTPSA id EDF4728F90D;
 Wed, 23 Oct 2019 16:45:25 +0100 (BST)
From: Boris Brezillon <boris.brezillon@collabora.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v3 10/21] drm/bridge: Clarify the atomic enable/disable hooks
 semantics
Date: Wed, 23 Oct 2019 17:45:01 +0200
Message-Id: <20191023154512.9762-11-boris.brezillon@collabora.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191023154512.9762-1-boris.brezillon@collabora.com>
References: <20191023154512.9762-1-boris.brezillon@collabora.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Mark Rutland <mark.rutland@arm.com>,
 Neil Armstrong <narmstrong@baylibre.com>,
 Thierry Reding <thierry.reding@gmail.com>,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>, kernel@collabora.com,
 Sam Ravnborg <sam@ravnborg.org>,
 Nikita Yushchenko <nikita.yoush@cogentembedded.com>,
 Andrey Smirnov <andrew.smirnov@gmail.com>,
 Kyungmin Park <kyungmin.park@samsung.com>, Chris Healy <cphealy@gmail.com>,
 devicetree@vger.kernel.org, Jonas Karlman <jonas@kwiboo.se>,
 Rob Herring <robh+dt@kernel.org>, Jernej Skrabec <jernej.skrabec@siol.net>,
 Seung-Woo Kim <sw0312.kim@samsung.com>,
 Boris Brezillon <boris.brezillon@collabora.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhlIFtwcmVfXWVuYWJsZS9bcG9zdF9dZGlzYWJsZSBob29rcyBhcmUgcGFzc2VkIHRoZSBvbGQg
YXRvbWljIHN0YXRlLgpVcGRhdGUgdGhlIGRvYyBhbmQgcmVuYW1lIHRoZSBhcmd1bWVudHMgdG8g
bWFrZSBpdCBjbGVhci4KClNpZ25lZC1vZmYtYnk6IEJvcmlzIEJyZXppbGxvbiA8Ym9yaXMuYnJl
emlsbG9uQGNvbGxhYm9yYS5jb20+Ci0tLQpDaGFuZ2VzIGluIHYzOgoqIE5ldyBwYXRjaAotLS0K
IGRyaXZlcnMvZ3B1L2RybS9kcm1fYnJpZGdlLmMgfCAyNCArKysrKysrKysrKystLS0tLS0tLS0t
LS0KIGluY2x1ZGUvZHJtL2RybV9icmlkZ2UuaCAgICAgfCAxNiArKysrKysrKysrKystLS0tCiAy
IGZpbGVzIGNoYW5nZWQsIDI0IGluc2VydGlvbnMoKyksIDE2IGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYnJpZGdlLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJt
X2JyaWRnZS5jCmluZGV4IGM1Mzk2Njc2Nzc4Mi4uY2E3NGJmZTAyOGM5IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vZHJtX2JyaWRnZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYnJp
ZGdlLmMKQEAgLTQ0Nyw3ICs0NDcsNyBAQCBFWFBPUlRfU1lNQk9MKGRybV9icmlkZ2VfY2hhaW5f
ZW5hYmxlKTsKIC8qKgogICogZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fZGlzYWJsZSAtIGRpc2Fi
bGVzIGFsbCBicmlkZ2VzIGluIHRoZSBlbmNvZGVyIGNoYWluCiAgKiBAYnJpZGdlOiBicmlkZ2Ug
Y29udHJvbCBzdHJ1Y3R1cmUKLSAqIEBzdGF0ZTogYXRvbWljIHN0YXRlIGJlaW5nIGNvbW1pdHRl
ZAorICogQG9sZF9zdGF0ZTogb2xkIGF0b21pYyBzdGF0ZQogICoKICAqIENhbGxzICZkcm1fYnJp
ZGdlX2Z1bmNzLmF0b21pY19kaXNhYmxlIChmYWxscyBiYWNrIG9uCiAgKiAmZHJtX2JyaWRnZV9m
dW5jcy5kaXNhYmxlKSBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGluIHRoZSBlbmNvZGVyIGNoYWlu
LApAQCAtNDU3LDcgKzQ1Nyw3IEBAIEVYUE9SVF9TWU1CT0woZHJtX2JyaWRnZV9jaGFpbl9lbmFi
bGUpOwogICogTm90ZTogdGhlIGJyaWRnZSBwYXNzZWQgc2hvdWxkIGJlIHRoZSBvbmUgY2xvc2Vz
dCB0byB0aGUgZW5jb2RlcgogICovCiB2b2lkIGRybV9hdG9taWNfYnJpZGdlX2NoYWluX2Rpc2Fi
bGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJCQkgICAgIHN0cnVjdCBkcm1fYXRvbWlj
X3N0YXRlICpzdGF0ZSkKKwkJCQkgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3Rh
dGUpCiB7CiAJc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyOwogCXN0cnVjdCBkcm1fYnJpZGdl
ICppdGVyOwpAQCAtNDY5LDcgKzQ2OSw3IEBAIHZvaWQgZHJtX2F0b21pY19icmlkZ2VfY2hhaW5f
ZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAogCWxpc3RfZm9yX2VhY2hfZW50cnlf
cmV2ZXJzZShpdGVyLCAmZW5jb2Rlci0+YnJpZGdlX2NoYWluLAogCQkJCSAgICBjaGFpbl9ub2Rl
KSB7CiAJCWlmIChpdGVyLT5mdW5jcy0+YXRvbWljX2Rpc2FibGUpCi0JCQlpdGVyLT5mdW5jcy0+
YXRvbWljX2Rpc2FibGUoaXRlciwgc3RhdGUpOworCQkJaXRlci0+ZnVuY3MtPmF0b21pY19kaXNh
YmxlKGl0ZXIsIG9sZF9zdGF0ZSk7CiAJCWVsc2UgaWYgKGl0ZXItPmZ1bmNzLT5kaXNhYmxlKQog
CQkJaXRlci0+ZnVuY3MtPmRpc2FibGUoaXRlcik7CiAKQEAgLTQ4Myw3ICs0ODMsNyBAQCBFWFBP
UlRfU1lNQk9MKGRybV9hdG9taWNfYnJpZGdlX2NoYWluX2Rpc2FibGUpOwogICogZHJtX2F0b21p
Y19icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlIC0gY2xlYW5zIHVwIGFmdGVyIGRpc2FibGluZyBh
bGwgYnJpZGdlcwogICoJCQkJCSAgaW4gdGhlIGVuY29kZXIgY2hhaW4KICAqIEBicmlkZ2U6IGJy
aWRnZSBjb250cm9sIHN0cnVjdHVyZQotICogQHN0YXRlOiBhdG9taWMgc3RhdGUgYmVpbmcgY29t
bWl0dGVkCisgKiBAb2xkX3N0YXRlOiBvbGQgYXRvbWljIHN0YXRlCiAgKgogICogQ2FsbHMgJmRy
bV9icmlkZ2VfZnVuY3MuYXRvbWljX3Bvc3RfZGlzYWJsZSAoZmFsbHMgYmFjayBvbgogICogJmRy
bV9icmlkZ2VfZnVuY3MucG9zdF9kaXNhYmxlKSBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGluIHRo
ZSBlbmNvZGVyIGNoYWluLApAQCAtNDkzLDcgKzQ5Myw3IEBAIEVYUE9SVF9TWU1CT0woZHJtX2F0
b21pY19icmlkZ2VfY2hhaW5fZGlzYWJsZSk7CiAgKiBOb3RlOiB0aGUgYnJpZGdlIHBhc3NlZCBz
aG91bGQgYmUgdGhlIG9uZSBjbG9zZXN0IHRvIHRoZSBlbmNvZGVyCiAgKi8KIHZvaWQgZHJtX2F0
b21pY19icmlkZ2VfY2hhaW5fcG9zdF9kaXNhYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2Us
Ci0JCQkJCSAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQorCQkJCQkgIHN0cnVjdCBk
cm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpCiB7CiAJc3RydWN0IGRybV9lbmNvZGVyICplbmNv
ZGVyOwogCkBAIC01MDQsNyArNTA0LDcgQEAgdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9w
b3N0X2Rpc2FibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKIAlsaXN0X2Zvcl9lYWNoX2Vu
dHJ5X2Zyb20oYnJpZGdlLCAmZW5jb2Rlci0+YnJpZGdlX2NoYWluLAogCQkJCSBjaGFpbl9ub2Rl
KSB7CiAJCWlmIChicmlkZ2UtPmZ1bmNzLT5hdG9taWNfcG9zdF9kaXNhYmxlKQotCQkJYnJpZGdl
LT5mdW5jcy0+YXRvbWljX3Bvc3RfZGlzYWJsZShicmlkZ2UsIHN0YXRlKTsKKwkJCWJyaWRnZS0+
ZnVuY3MtPmF0b21pY19wb3N0X2Rpc2FibGUoYnJpZGdlLCBvbGRfc3RhdGUpOwogCQllbHNlIGlm
IChicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rpc2FibGUpCiAJCQlicmlkZ2UtPmZ1bmNzLT5wb3N0X2Rp
c2FibGUoYnJpZGdlKTsKIAl9CkBAIC01MTUsNyArNTE1LDcgQEAgRVhQT1JUX1NZTUJPTChkcm1f
YXRvbWljX2JyaWRnZV9jaGFpbl9wb3N0X2Rpc2FibGUpOwogICogZHJtX2F0b21pY19icmlkZ2Vf
Y2hhaW5fcHJlX2VuYWJsZSAtIHByZXBhcmVzIGZvciBlbmFibGluZyBhbGwgYnJpZGdlcyBpbgog
ICoJCQkJCXRoZSBlbmNvZGVyIGNoYWluCiAgKiBAYnJpZGdlOiBicmlkZ2UgY29udHJvbCBzdHJ1
Y3R1cmUKLSAqIEBzdGF0ZTogYXRvbWljIHN0YXRlIGJlaW5nIGNvbW1pdHRlZAorICogQG9sZF9z
dGF0ZTogb2xkIGF0b21pYyBzdGF0ZQogICoKICAqIENhbGxzICZkcm1fYnJpZGdlX2Z1bmNzLmF0
b21pY19wcmVfZW5hYmxlIChmYWxscyBiYWNrIG9uCiAgKiAmZHJtX2JyaWRnZV9mdW5jcy5wcmVf
ZW5hYmxlKSBvcCBmb3IgYWxsIHRoZSBicmlkZ2VzIGluIHRoZSBlbmNvZGVyIGNoYWluLApAQCAt
NTI1LDcgKzUyNSw3IEBAIEVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fcG9z
dF9kaXNhYmxlKTsKICAqIE5vdGU6IHRoZSBicmlkZ2UgcGFzc2VkIHNob3VsZCBiZSB0aGUgb25l
IGNsb3Nlc3QgdG8gdGhlIGVuY29kZXIKICAqLwogdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFp
bl9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCi0JCQkJCXN0cnVjdCBkcm1f
YXRvbWljX3N0YXRlICpzdGF0ZSkKKwkJCQkJc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKm9sZF9z
dGF0ZSkKIHsKIAlzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXI7CiAJc3RydWN0IGRybV9icmlk
Z2UgKml0ZXI7CkBAIC01MzcsNyArNTM3LDcgQEAgdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFp
bl9wcmVfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJbGlzdF9mb3JfZWFjaF9l
bnRyeV9yZXZlcnNlKGl0ZXIsICZicmlkZ2UtPmVuY29kZXItPmJyaWRnZV9jaGFpbiwKIAkJCQkg
ICAgY2hhaW5fbm9kZSkgewogCQlpZiAoaXRlci0+ZnVuY3MtPmF0b21pY19wcmVfZW5hYmxlKQot
CQkJaXRlci0+ZnVuY3MtPmF0b21pY19wcmVfZW5hYmxlKGl0ZXIsIHN0YXRlKTsKKwkJCWl0ZXIt
PmZ1bmNzLT5hdG9taWNfcHJlX2VuYWJsZShpdGVyLCBvbGRfc3RhdGUpOwogCQllbHNlIGlmIChp
dGVyLT5mdW5jcy0+cHJlX2VuYWJsZSkKIAkJCWl0ZXItPmZ1bmNzLT5wcmVfZW5hYmxlKGl0ZXIp
OwogCkBAIC01NTAsNyArNTUwLDcgQEAgRVhQT1JUX1NZTUJPTChkcm1fYXRvbWljX2JyaWRnZV9j
aGFpbl9wcmVfZW5hYmxlKTsKIC8qKgogICogZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fZW5hYmxl
IC0gZW5hYmxlcyBhbGwgYnJpZGdlcyBpbiB0aGUgZW5jb2RlciBjaGFpbgogICogQGJyaWRnZTog
YnJpZGdlIGNvbnRyb2wgc3RydWN0dXJlCi0gKiBAc3RhdGU6IGF0b21pYyBzdGF0ZSBiZWluZyBj
b21taXR0ZWQKKyAqIEBvbGRfc3RhdGU6IG9sZCBhdG9taWMgc3RhdGUKICAqCiAgKiBDYWxscyAm
ZHJtX2JyaWRnZV9mdW5jcy5hdG9taWNfZW5hYmxlIChmYWxscyBiYWNrIG9uCiAgKiAmZHJtX2Jy
aWRnZV9mdW5jcy5lbmFibGUpIG9wIGZvciBhbGwgdGhlIGJyaWRnZXMgaW4gdGhlIGVuY29kZXIg
Y2hhaW4sCkBAIC01NjAsNyArNTYwLDcgQEAgRVhQT1JUX1NZTUJPTChkcm1fYXRvbWljX2JyaWRn
ZV9jaGFpbl9wcmVfZW5hYmxlKTsKICAqIE5vdGU6IHRoZSBicmlkZ2UgcGFzc2VkIHNob3VsZCBi
ZSB0aGUgb25lIGNsb3Nlc3QgdG8gdGhlIGVuY29kZXIKICAqLwogdm9pZCBkcm1fYXRvbWljX2Jy
aWRnZV9jaGFpbl9lbmFibGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKLQkJCQkgICAgc3Ry
dWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlKQorCQkJCSAgICBzdHJ1Y3QgZHJtX2F0b21pY19z
dGF0ZSAqb2xkX3N0YXRlKQogewogCXN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcjsKIApAQCAt
NTcxLDcgKzU3MSw3IEBAIHZvaWQgZHJtX2F0b21pY19icmlkZ2VfY2hhaW5fZW5hYmxlKHN0cnVj
dCBkcm1fYnJpZGdlICpicmlkZ2UsCiAJbGlzdF9mb3JfZWFjaF9lbnRyeV9mcm9tKGJyaWRnZSwg
JmJyaWRnZS0+ZW5jb2Rlci0+YnJpZGdlX2NoYWluLAogCQkJCSBjaGFpbl9ub2RlKSB7CiAJCWlm
IChicmlkZ2UtPmZ1bmNzLT5hdG9taWNfZW5hYmxlKQotCQkJYnJpZGdlLT5mdW5jcy0+YXRvbWlj
X2VuYWJsZShicmlkZ2UsIHN0YXRlKTsKKwkJCWJyaWRnZS0+ZnVuY3MtPmF0b21pY19lbmFibGUo
YnJpZGdlLCBvbGRfc3RhdGUpOwogCQllbHNlIGlmIChicmlkZ2UtPmZ1bmNzLT5lbmFibGUpCiAJ
CQlicmlkZ2UtPmZ1bmNzLT5lbmFibGUoYnJpZGdlKTsKIAl9CmRpZmYgLS1naXQgYS9pbmNsdWRl
L2RybS9kcm1fYnJpZGdlLmggYi9pbmNsdWRlL2RybS9kcm1fYnJpZGdlLmgKaW5kZXggYTYwOGM0
N2QxZGU1Li5lODE0ZTZkNmU3YzIgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL2RybV9icmlkZ2Uu
aAorKysgYi9pbmNsdWRlL2RybS9kcm1fYnJpZGdlLmgKQEAgLTI2Niw2ICsyNjYsOCBAQCBzdHJ1
Y3QgZHJtX2JyaWRnZV9mdW5jcyB7CiAJICogYnJpZGdlJ3MgQGF0b21pY19wcmVfZW5hYmxlIG9y
IEBwcmVfZW5hYmxlIGZ1bmN0aW9uLiBJZiB0aGUgcHJlY2VkaW5nCiAJICogZWxlbWVudCBpcyBh
ICZkcm1fZW5jb2RlciBpdCdzIGNhbGxlZCByaWdodCBiZWZvcmUgdGhlIGVuY29kZXIncwogCSAq
ICZkcm1fZW5jb2Rlcl9oZWxwZXJfZnVuY3MuYXRvbWljX2VuYWJsZSBob29rLgorCSAqIFRoaXMg
aG9vayBpcyBwYXNzZWQgdGhlIG9sZCBhdG9taWMgc3RhdGUgKGF0b21pYyBzdGF0ZSBhZnRlciBu
ZXcvb2xkCisJICogc3RhdGVzIGhhdmUgYmVlbiBzd2FwcGVkKS4KIAkgKgogCSAqIFRoZSBkaXNw
bGF5IHBpcGUgKGkuZS4gY2xvY2tzIGFuZCB0aW1pbmcgc2lnbmFscykgZmVlZGluZyB0aGlzIGJy
aWRnZQogCSAqIHdpbGwgbm90IHlldCBiZSBydW5uaW5nIHdoZW4gdGhpcyBjYWxsYmFjayBpcyBj
YWxsZWQuIFRoZSBicmlkZ2UgbXVzdApAQCAtMjgxLDcgKzI4Myw3IEBAIHN0cnVjdCBkcm1fYnJp
ZGdlX2Z1bmNzIHsKIAkgKiBUaGUgQGF0b21pY19wcmVfZW5hYmxlIGNhbGxiYWNrIGlzIG9wdGlv
bmFsLgogCSAqLwogCXZvaWQgKCphdG9taWNfcHJlX2VuYWJsZSkoc3RydWN0IGRybV9icmlkZ2Ug
KmJyaWRnZSwKLQkJCQkgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSk7CisJCQkJICBz
dHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX3N0YXRlKTsKIAogCS8qKgogCSAqIEBhdG9taWNf
ZW5hYmxlOgpAQCAtMjkyLDYgKzI5NCw4IEBAIHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIHsKIAkg
KiBicmlkZ2UncyBAYXRvbWljX2VuYWJsZSBvciBAZW5hYmxlIGZ1bmN0aW9uLiBJZiB0aGUgcHJl
Y2VkaW5nIGVsZW1lbnQKIAkgKiBpcyBhICZkcm1fZW5jb2RlciBpdCdzIGNhbGxlZCByaWdodCBh
ZnRlciB0aGUgZW5jb2RlcidzCiAJICogJmRybV9lbmNvZGVyX2hlbHBlcl9mdW5jcy5hdG9taWNf
ZW5hYmxlIGhvb2suCisJICogVGhpcyBob29rIGlzIHBhc3NlZCB0aGUgb2xkIGF0b21pYyBzdGF0
ZSAoYXRvbWljIHN0YXRlIGFmdGVyIG5ldy9vbGQKKwkgKiBzdGF0ZXMgaGF2ZSBiZWVuIHN3YXBw
ZWQpLgogCSAqCiAJICogVGhlIGJyaWRnZSBjYW4gYXNzdW1lIHRoYXQgdGhlIGRpc3BsYXkgcGlw
ZSAoaS5lLiBjbG9ja3MgYW5kIHRpbWluZwogCSAqIHNpZ25hbHMpIGZlZWRpbmcgaXQgaXMgcnVu
bmluZyB3aGVuIHRoaXMgY2FsbGJhY2sgaXMgY2FsbGVkLiBUaGlzCkBAIC0zMDYsNyArMzEwLDcg
QEAgc3RydWN0IGRybV9icmlkZ2VfZnVuY3MgewogCSAqIFRoZSBAYXRvbWljX2VuYWJsZSBjYWxs
YmFjayBpcyBvcHRpb25hbC4KIAkgKi8KIAl2b2lkICgqYXRvbWljX2VuYWJsZSkoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSwKLQkJCSAgICAgIHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0
ZSk7CisJCQkgICAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX3N0YXRlKTsKIAkvKioK
IAkgKiBAYXRvbWljX2Rpc2FibGU6CiAJICoKQEAgLTMxNiw2ICszMjAsOCBAQCBzdHJ1Y3QgZHJt
X2JyaWRnZV9mdW5jcyB7CiAJICogYnJpZGdlJ3MgQGF0b21pY19kaXNhYmxlIG9yIEBkaXNhYmxl
IHZmdW5jLiBJZiB0aGUgcHJlY2VkaW5nIGVsZW1lbnQKIAkgKiBpcyBhICZkcm1fZW5jb2RlciBp
dCdzIGNhbGxlZCByaWdodCBiZWZvcmUgdGhlCiAJICogJmRybV9lbmNvZGVyX2hlbHBlcl9mdW5j
cy5hdG9taWNfZGlzYWJsZSBob29rLgorCSAqIFRoaXMgaG9vayBpcyBwYXNzZWQgdGhlIG9sZCBh
dG9taWMgc3RhdGUgKGF0b21pYyBzdGF0ZSBhZnRlciBuZXcvb2xkCisJICogc3RhdGVzIGhhdmUg
YmVlbiBzd2FwcGVkKS4KIAkgKgogCSAqIFRoZSBicmlkZ2UgY2FuIGFzc3VtZSB0aGF0IHRoZSBk
aXNwbGF5IHBpcGUgKGkuZS4gY2xvY2tzIGFuZCB0aW1pbmcKIAkgKiBzaWduYWxzKSBmZWVkaW5n
IGl0IGlzIHN0aWxsIHJ1bm5pbmcgd2hlbiB0aGlzIGNhbGxiYWNrIGlzIGNhbGxlZC4KQEAgLTMy
OSw3ICszMzUsNyBAQCBzdHJ1Y3QgZHJtX2JyaWRnZV9mdW5jcyB7CiAJICogVGhlIEBhdG9taWNf
ZGlzYWJsZSBjYWxsYmFjayBpcyBvcHRpb25hbC4KIAkgKi8KIAl2b2lkICgqYXRvbWljX2Rpc2Fi
bGUpKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCi0JCQkgICAgICAgc3RydWN0IGRybV9hdG9t
aWNfc3RhdGUgKnN0YXRlKTsKKwkJCSAgICAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xk
X3N0YXRlKTsKIAogCS8qKgogCSAqIEBhdG9taWNfcG9zdF9kaXNhYmxlOgpAQCAtMzQwLDYgKzM0
Niw4IEBAIHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIHsKIAkgKiBAYXRvbWljX3Bvc3RfZGlzYWJs
ZSBvciBAcG9zdF9kaXNhYmxlIGZ1bmN0aW9uLiBJZiB0aGUgcHJlY2VkaW5nCiAJICogZWxlbWVu
dCBpcyBhICZkcm1fZW5jb2RlciBpdCdzIGNhbGxlZCByaWdodCBhZnRlciB0aGUgZW5jb2Rlcidz
CiAJICogJmRybV9lbmNvZGVyX2hlbHBlcl9mdW5jcy5hdG9taWNfZGlzYWJsZSBob29rLgorCSAq
IFRoaXMgaG9vayBpcyBwYXNzZWQgdGhlIG9sZCBhdG9taWMgc3RhdGUgKGF0b21pYyBzdGF0ZSBh
ZnRlciBuZXcvb2xkCisJICogc3RhdGVzIGhhdmUgYmVlbiBzd2FwcGVkKS4KIAkgKgogCSAqIFRo
ZSBicmlkZ2UgbXVzdCBhc3N1bWUgdGhhdCB0aGUgZGlzcGxheSBwaXBlIChpLmUuIGNsb2NrcyBh
bmQgdGltaW5nCiAJICogc2lnbmFscykgZmVlZGluZyBpdCBpcyBubyBsb25nZXIgcnVubmluZyB3
aGVuIHRoaXMgY2FsbGJhY2sgaXMKQEAgLTM1NSw3ICszNjMsNyBAQCBzdHJ1Y3QgZHJtX2JyaWRn
ZV9mdW5jcyB7CiAJICogVGhlIEBhdG9taWNfcG9zdF9kaXNhYmxlIGNhbGxiYWNrIGlzIG9wdGlv
bmFsLgogCSAqLwogCXZvaWQgKCphdG9taWNfcG9zdF9kaXNhYmxlKShzdHJ1Y3QgZHJtX2JyaWRn
ZSAqYnJpZGdlLAotCQkJCSAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpOworCQkJ
CSAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqb2xkX3N0YXRlKTsKIAogCS8qKgogCSAqIEBh
dG9taWNfZHVwbGljYXRlX3N0YXRlOgotLSAKMi4yMS4wCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZl
bEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
