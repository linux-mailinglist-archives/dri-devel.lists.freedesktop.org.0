Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3C3F62C24F
	for <lists+dri-devel@lfdr.de>; Tue, 28 May 2019 11:04:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C12EC89FC9;
	Tue, 28 May 2019 09:03:51 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x543.google.com (mail-ed1-x543.google.com
 [IPv6:2a00:1450:4864:20::543])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 529B589FA6
 for <dri-devel@lists.freedesktop.org>; Tue, 28 May 2019 09:03:45 +0000 (UTC)
Received: by mail-ed1-x543.google.com with SMTP id s19so2499886edq.7
 for <dri-devel@lists.freedesktop.org>; Tue, 28 May 2019 02:03:45 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=Ooi4hbNCFWLvdn7gPI0VJoLcd+qEK7EqaAEtyPgNrvM=;
 b=JrHWuX1TkEtgeISDOrnx16QdtBZk2PKHnYA7T9KbehutfAWFotSipZh+DgqvPvQMUR
 9UwbshaGBlkInkyXdXE8+WalUXVXbV/6ZtBHd8AfBmghMiupgtds4ZmUqjKheUQoo7h7
 fadwBIiUrFfHOTIfRGAjzoUHGs3NldKY2tnqnIGhysg12IGXq7dj60DE3OGMwRoCjxKK
 /Qp8x/hnlrxwCr3p8Nu5/FgCG+6Irj1Ki1gtZZBlxRpSwvgXiqCxemEI/m4cO17BvhEw
 qCTmF1dBY4QOwBrLn43qeqJqpc6NHBXIJyUlYyS79Xx716ITabiENXN24F4CwJcbgXcI
 4IYg==
X-Gm-Message-State: APjAAAVEM/KNzL0su+RkD1xGa6aqU/9Wzq7V5tBMh1XTpZFhRyAHFQzo
 IKkFln8UXbQq1bT8lg7PILSgNQ==
X-Google-Smtp-Source: APXvYqx2/pj/om14dAedFkMIr9nON3I1vQ8gKLDTPmWBJKmhJYG5UizCgUZgKeSWqd6Rhcjw75tXeg==
X-Received: by 2002:a17:906:9145:: with SMTP id
 y5mr57481511ejw.206.1559034221591; 
 Tue, 28 May 2019 02:03:41 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id x49sm4072656edm.25.2019.05.28.02.03.40
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Tue, 28 May 2019 02:03:40 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: LKML <linux-kernel@vger.kernel.org>
Subject: [PATCH 21/33] fbdev: directly call fbcon_suspended/resumed
Date: Tue, 28 May 2019 11:02:52 +0200
Message-Id: <20190528090304.9388-22-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190528090304.9388-1-daniel.vetter@ffwll.ch>
References: <20190528090304.9388-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=Ooi4hbNCFWLvdn7gPI0VJoLcd+qEK7EqaAEtyPgNrvM=;
 b=S8RfuEcjpgpmoyZCzNoHK8dLIiuaW5CIB+VxCtfy6GnMIvrlpna7ceB7yiYxlqeHrx
 jBndnR2Hh/seM8PvHDCU54zhrIhNO//uE0eeo4boFXOzPL0By8avIVPg8TTg4Wj8XJK1
 ro2g9jS6/je89BQPID7iNTY1Jt2ifOIDPf2Zs=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Prarit Bhargava <prarit@redhat.com>,
 Daniel Thompson <daniel.thompson@linaro.org>,
 Kees Cook <keescook@chromium.org>,
 Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 linux-fbdev@vger.kernel.org, DRI Development <dri-devel@lists.freedesktop.org>,
 =?UTF-8?q?Micha=C5=82=20Miros=C5=82aw?= <mirq-linux@rere.qmqm.pl>,
 Yisheng Xie <ysxie@foxmail.com>, Hans de Goede <hdegoede@redhat.com>,
 Mikulas Patocka <mpatocka@redhat.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Daniel Vetter <daniel.vetter@intel.com>, Sam Ravnborg <sam@ravnborg.org>,
 Peter Rosin <peda@axentia.se>, Konstantin Khorenko <khorenko@virtuozzo.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V2l0aCB0aGUgc2hfbW9iaWxlIG5vdGlmaWVyIHJlbW92ZWQgd2UgY2FuIGp1c3QgZGlyZWN0bHkg
Y2FsbCB0aGUKZmJjb24gY29kZSBoZXJlLgoKdjI6IFJlbW92ZSBub3cgdW51c2VkIGxvY2FsIHZh
cmlhYmxlLgoKdjM6IGZpeHVwICFDT05GSUdfRlJBTUVCVUZGRVJfQ09OU09MRSwgbm90aWNlZCBi
eSBrYnVpbGQKClNpZ25lZC1vZmYtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAaW50
ZWwuY29tPgpSZXZpZXdlZC1ieTogU2FtIFJhdm5ib3JnIDxzYW1AcmF2bmJvcmcub3JnPgpSZXZp
ZXdlZC1ieTogTWFhcnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVs
LmNvbT4KQ2M6IEJhcnRsb21pZWogWm9sbmllcmtpZXdpY3ogPGIuem9sbmllcmtpZUBzYW1zdW5n
LmNvbT4KQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+CkNjOiBIYW5z
IGRlIEdvZWRlIDxoZGVnb2VkZUByZWRoYXQuY29tPgpDYzogR3JlZyBLcm9haC1IYXJ0bWFuIDxn
cmVna2hAbGludXhmb3VuZGF0aW9uLm9yZz4KQ2M6IFByYXJpdCBCaGFyZ2F2YSA8cHJhcml0QHJl
ZGhhdC5jb20+CkNjOiBLZWVzIENvb2sgPGtlZXNjb29rQGNocm9taXVtLm9yZz4KQ2M6IEtvbnN0
YW50aW4gS2hvcmVua28gPGtob3JlbmtvQHZpcnR1b3p6by5jb20+CkNjOiBZaXNoZW5nIFhpZSA8
eXN4aWVAZm94bWFpbC5jb20+CkNjOiAiTWljaGHFgiBNaXJvc8WCYXciIDxtaXJxLWxpbnV4QHJl
cmUucW1xbS5wbD4KQ2M6IFBldGVyIFJvc2luIDxwZWRhQGF4ZW50aWEuc2U+CkNjOiBNaWt1bGFz
IFBhdG9ja2EgPG1wYXRvY2thQHJlZGhhdC5jb20+CkNjOiBsaW51eC1mYmRldkB2Z2VyLmtlcm5l
bC5vcmcKLS0tCiBkcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJjb24uYyB8IDEwICsrLS0tLS0t
LS0KIGRyaXZlcnMvdmlkZW8vZmJkZXYvY29yZS9mYm1lbS5jIHwgIDcgKystLS0tLQogaW5jbHVk
ZS9saW51eC9mYi5oICAgICAgICAgICAgICAgfCAgOCAtLS0tLS0tLQogaW5jbHVkZS9saW51eC9m
YmNvbi5oICAgICAgICAgICAgfCAgNCArKysrCiA0IGZpbGVzIGNoYW5nZWQsIDggaW5zZXJ0aW9u
cygrKSwgMjEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy92aWRlby9mYmRldi9j
b3JlL2ZiY29uLmMgYi9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJjb24uYwppbmRleCAxNDI2
ODY5NTNiNzEuLmUzMjY3ZDcxMzk1YyAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9mYmRldi9j
b3JlL2ZiY29uLmMKKysrIGIvZHJpdmVycy92aWRlby9mYmRldi9jb3JlL2ZiY29uLmMKQEAgLTI5
MTksNyArMjkxOSw3IEBAIHN0YXRpYyBpbnQgZmJjb25fc2V0X29yaWdpbihzdHJ1Y3QgdmNfZGF0
YSAqdmMpCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyB2b2lkIGZiY29uX3N1c3BlbmRlZChzdHJ1
Y3QgZmJfaW5mbyAqaW5mbykKK3ZvaWQgZmJjb25fc3VzcGVuZGVkKHN0cnVjdCBmYl9pbmZvICpp
bmZvKQogewogCXN0cnVjdCB2Y19kYXRhICp2YyA9IE5VTEw7CiAJc3RydWN0IGZiY29uX29wcyAq
b3BzID0gaW5mby0+ZmJjb25fcGFyOwpAQCAtMjkzMiw3ICsyOTMyLDcgQEAgc3RhdGljIHZvaWQg
ZmJjb25fc3VzcGVuZGVkKHN0cnVjdCBmYl9pbmZvICppbmZvKQogCWZiY29uX2N1cnNvcih2Yywg
Q01fRVJBU0UpOwogfQogCi1zdGF0aWMgdm9pZCBmYmNvbl9yZXN1bWVkKHN0cnVjdCBmYl9pbmZv
ICppbmZvKQordm9pZCBmYmNvbl9yZXN1bWVkKHN0cnVjdCBmYl9pbmZvICppbmZvKQogewogCXN0
cnVjdCB2Y19kYXRhICp2YzsKIAlzdHJ1Y3QgZmJjb25fb3BzICpvcHMgPSBpbmZvLT5mYmNvbl9w
YXI7CkBAIC0zMzMwLDEyICszMzMwLDYgQEAgc3RhdGljIGludCBmYmNvbl9ldmVudF9ub3RpZnko
c3RydWN0IG5vdGlmaWVyX2Jsb2NrICpzZWxmLAogCWludCBpZHgsIHJldCA9IDA7CiAKIAlzd2l0
Y2goYWN0aW9uKSB7Ci0JY2FzZSBGQl9FVkVOVF9TVVNQRU5EOgotCQlmYmNvbl9zdXNwZW5kZWQo
aW5mbyk7Ci0JCWJyZWFrOwotCWNhc2UgRkJfRVZFTlRfUkVTVU1FOgotCQlmYmNvbl9yZXN1bWVk
KGluZm8pOwotCQlicmVhazsKIAljYXNlIEZCX0VWRU5UX01PREVfQ0hBTkdFOgogCQlmYmNvbl9t
b2RlY2hhbmdlZChpbmZvKTsKIAkJYnJlYWs7CmRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2Zi
ZGV2L2NvcmUvZmJtZW0uYyBiL2RyaXZlcnMvdmlkZW8vZmJkZXYvY29yZS9mYm1lbS5jCmluZGV4
IGJlZTQ1ZTk0MDViOC4uNzMyNjlkZWRjZDQ1IDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2Zi
ZGV2L2NvcmUvZmJtZW0uYworKysgYi9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJtZW0uYwpA
QCAtMTkxNywxNyArMTkxNywxNCBAQCBFWFBPUlRfU1lNQk9MKHVucmVnaXN0ZXJfZnJhbWVidWZm
ZXIpOwogICovCiB2b2lkIGZiX3NldF9zdXNwZW5kKHN0cnVjdCBmYl9pbmZvICppbmZvLCBpbnQg
c3RhdGUpCiB7Ci0Jc3RydWN0IGZiX2V2ZW50IGV2ZW50OwotCiAJV0FSTl9DT05TT0xFX1VOTE9D
S0VEKCk7CiAKLQlldmVudC5pbmZvID0gaW5mbzsKIAlpZiAoc3RhdGUpIHsKLQkJZmJfbm90aWZp
ZXJfY2FsbF9jaGFpbihGQl9FVkVOVF9TVVNQRU5ELCAmZXZlbnQpOworCQlmYmNvbl9zdXNwZW5k
ZWQoaW5mbyk7CiAJCWluZm8tPnN0YXRlID0gRkJJTkZPX1NUQVRFX1NVU1BFTkRFRDsKIAl9IGVs
c2UgewogCQlpbmZvLT5zdGF0ZSA9IEZCSU5GT19TVEFURV9SVU5OSU5HOwotCQlmYl9ub3RpZmll
cl9jYWxsX2NoYWluKEZCX0VWRU5UX1JFU1VNRSwgJmV2ZW50KTsKKwkJZmJjb25fcmVzdW1lZChp
bmZvKTsKIAl9CiB9CiBFWFBPUlRfU1lNQk9MKGZiX3NldF9zdXNwZW5kKTsKZGlmZiAtLWdpdCBh
L2luY2x1ZGUvbGludXgvZmIuaCBiL2luY2x1ZGUvbGludXgvZmIuaAppbmRleCBiOTBjZjdkNTZi
ZDguLjc5NGIzODY0MTViNyAxMDA2NDQKLS0tIGEvaW5jbHVkZS9saW51eC9mYi5oCisrKyBiL2lu
Y2x1ZGUvbGludXgvZmIuaApAQCAtMTI2LDE0ICsxMjYsNiBAQCBzdHJ1Y3QgZmJfY3Vyc29yX3Vz
ZXIgewogCiAvKglUaGUgcmVzb2x1dGlvbiBvZiB0aGUgcGFzc2VkIGluIGZiX2luZm8gYWJvdXQg
dG8gY2hhbmdlICovIAogI2RlZmluZSBGQl9FVkVOVF9NT0RFX0NIQU5HRQkJMHgwMQotLyoJVGhl
IGRpc3BsYXkgb24gdGhpcyBmYl9pbmZvIGlzIGJlaW5nIHN1c3BlbmRlZCwgbm8gYWNjZXNzIHRv
IHRoZQotICoJZnJhbWVidWZmZXIgaXMgYWxsb3dlZCBhbnkgbW9yZSBhZnRlciB0aGF0IGNhbGwg
cmV0dXJucwotICovCi0jZGVmaW5lIEZCX0VWRU5UX1NVU1BFTkQJCTB4MDIKLS8qCVRoZSBkaXNw
bGF5IG9uIHRoaXMgZmJfaW5mbyB3YXMgcmVzdW1lZCwgeW91IGNhbiByZXN0b3JlIHRoZSBkaXNw
bGF5Ci0gKglpZiB5b3Ugb3duIGl0Ci0gKi8KLSNkZWZpbmUgRkJfRVZFTlRfUkVTVU1FCQkJMHgw
MwogLyogICAgICBBbiBlbnRyeSBmcm9tIHRoZSBtb2RlbGlzdCB3YXMgcmVtb3ZlZCAqLwogI2Rl
ZmluZSBGQl9FVkVOVF9NT0RFX0RFTEVURSAgICAgICAgICAgIDB4MDQKIApkaWZmIC0tZ2l0IGEv
aW5jbHVkZS9saW51eC9mYmNvbi5oIGIvaW5jbHVkZS9saW51eC9mYmNvbi5oCmluZGV4IDM4ZDQ0
ZmRiNmQxNC4uNzkwYzQyZWM3YjVkIDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4L2ZiY29uLmgK
KysrIGIvaW5jbHVkZS9saW51eC9mYmNvbi5oCkBAIC03LDEyICs3LDE2IEBAIHZvaWQgX19leGl0
IGZiX2NvbnNvbGVfZXhpdCh2b2lkKTsKIGludCBmYmNvbl9mYl9yZWdpc3RlcmVkKHN0cnVjdCBm
Yl9pbmZvICppbmZvKTsKIHZvaWQgZmJjb25fZmJfdW5yZWdpc3RlcmVkKHN0cnVjdCBmYl9pbmZv
ICppbmZvKTsKIHZvaWQgZmJjb25fZmJfdW5iaW5kKHN0cnVjdCBmYl9pbmZvICppbmZvKTsKK3Zv
aWQgZmJjb25fc3VzcGVuZGVkKHN0cnVjdCBmYl9pbmZvICppbmZvKTsKK3ZvaWQgZmJjb25fcmVz
dW1lZChzdHJ1Y3QgZmJfaW5mbyAqaW5mbyk7CiAjZWxzZQogc3RhdGljIGlubGluZSB2b2lkIGZi
X2NvbnNvbGVfaW5pdCh2b2lkKSB7fQogc3RhdGljIGlubGluZSB2b2lkIGZiX2NvbnNvbGVfZXhp
dCh2b2lkKSB7fQogc3RhdGljIGlubGluZSBpbnQgZmJjb25fZmJfcmVnaXN0ZXJlZChzdHJ1Y3Qg
ZmJfaW5mbyAqaW5mbykgeyByZXR1cm4gMDsgfQogc3RhdGljIGlubGluZSB2b2lkIGZiY29uX2Zi
X3VucmVnaXN0ZXJlZChzdHJ1Y3QgZmJfaW5mbyAqaW5mbykge30KIHN0YXRpYyBpbmxpbmUgdm9p
ZCBmYmNvbl9mYl91bmJpbmQoc3RydWN0IGZiX2luZm8gKmluZm8pIHt9CitzdGF0aWMgaW5saW5l
IHZvaWQgZmJjb25fc3VzcGVuZGVkKHN0cnVjdCBmYl9pbmZvICppbmZvKSB7fQorc3RhdGljIGlu
bGluZSB2b2lkIGZiY29uX3Jlc3VtZWQoc3RydWN0IGZiX2luZm8gKmluZm8pIHt9CiAjZW5kaWYK
IAogI2VuZGlmIC8qIF9MSU5VWF9GQkNPTl9IICovCi0tIAoyLjIwLjEKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QK
ZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
