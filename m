Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 00C81E13AC
	for <lists+dri-devel@lfdr.de>; Wed, 23 Oct 2019 10:10:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C7A146E997;
	Wed, 23 Oct 2019 08:09:41 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x64a.google.com (mail-pl1-x64a.google.com
 [IPv6:2607:f8b0:4864:20::64a])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9EBE96E939
 for <dri-devel@lists.freedesktop.org>; Wed, 23 Oct 2019 00:12:12 +0000 (UTC)
Received: by mail-pl1-x64a.google.com with SMTP id x8so4990079plo.17
 for <dri-devel@lists.freedesktop.org>; Tue, 22 Oct 2019 17:12:12 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:message-id:mime-version:subject:from:to:cc
 :content-transfer-encoding;
 bh=zqN70IYDrp81wg8yHsEcapQPROi/kGtOXEycNw/gKkQ=;
 b=aW2ZGjUfbP94cW5pCXNbRWx6fLvE+/ILH2PQDBLHwboaG8BV3jfSk9jtjssR8Tg35N
 pF7FzM7aM75GP9W6jokJd4LZTcC82AuBeITuRSlS7NdbBTrpmDnl1JpQalYH2iMmiRxF
 N5ZCmow/PIrwP2x5B2oA//hgER/Wu3X04KoIZbomOEX2D6TN/9/WFHTWYIpKCemkAEWm
 42Feplkske9/NcknkaKfWT1DmeTfy/dGlMO9RErllBrgtaRZWglA80g6+ZW1Wn1rLwrm
 zp/Qh2H7heNk/8dPY6Xul/tAtuhG94xFuMOUFQhQ5PHfH1+/fMHjszqnN6Z/LLXmkzac
 OK8A==
X-Gm-Message-State: APjAAAXzazktun7zsGYKcQjKOAr/qctIHdbIzE4m5ctXfhNaJljqG6V0
 gY0GHTXTouur89r/nN05Tu1lTwW0s7LI
X-Google-Smtp-Source: APXvYqw0RcW/1e3HqLig1fAtZTymKCDkceIZ6JqDsGNrVS5AfGoBiOE2MkD/KI39gMRybb4d8Nd1Z3gbMxO+
X-Received: by 2002:a63:ea45:: with SMTP id l5mr6455839pgk.189.1571789531805; 
 Tue, 22 Oct 2019 17:12:11 -0700 (PDT)
Date: Tue, 22 Oct 2019 17:12:06 -0700
Message-Id: <20191023001206.15741-1-rajatja@google.com>
Mime-Version: 1.0
X-Mailer: git-send-email 2.23.0.866.gb869b98d4c-goog
Subject: [PATCH] drm: Add support for integrated privacy screens
From: Rajat Jain <rajatja@google.com>
To: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Maxime Ripard <mripard@kernel.org>, 
 Sean Paul <sean@poorly.run>, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel@ffwll.ch>, 
 Jani Nikula <jani.nikula@linux.intel.com>, 
 Joonas Lahtinen <joonas.lahtinen@linux.intel.com>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>, 
 "=?UTF-8?q?Ville=20Syrj=C3=A4l=C3=A4?=" <ville.syrjala@linux.intel.com>,
 Chris Wilson <chris@chris-wilson.co.uk>, Imre Deak <imre.deak@intel.com>, 
 "=?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?=" <jose.souza@intel.com>,
 linux-kernel@vger.kernel.org, 
 dri-devel@lists.freedesktop.org, intel-gfx@lists.freedesktop.org, 
 gregkh@linuxfoundation.org, mathewk@google.com, 
 Daniel Thompson <daniel.thompson@linaro.org>, Jonathan Corbet <corbet@lwn.net>,
 Pavel Machek <pavel@denx.de>, seanpaul@google.com,
 Duncan Laurie <dlaurie@google.com>, jsbarnes@google.com
X-Mailman-Approved-At: Wed, 23 Oct 2019 08:09:38 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:message-id:mime-version:subject:from:to:cc
 :content-transfer-encoding;
 bh=zqN70IYDrp81wg8yHsEcapQPROi/kGtOXEycNw/gKkQ=;
 b=IPG4E9Jd3M9QM7xqGkEWwl+GQZ0MoJs5TAYppdgWpKNp36i/QO5U4VbZEEIgFvGcUk
 4tkSvhFZvSj/+AjhQQaRpQPA+AeW7P4qSAL5BNogVEOoBVdE5Y3sfeecY8YtAYtC0O1O
 ZRFQaftpImMnjc9w6v0gsUGa7RkLKxaXNy2vEXGMfxjDJtSSyAPCweikFkRN+58BGWHK
 ssK58sRac8FbE/Wp+63t3C08WlqINZY9sLsSMxCudOXkxJCPhI8R4b7jY6RH5dCCW1K8
 6EOBknpX1HH6tRhjvnc8uVMQFGQzLnmiFev1g+VOtReTkDYTUFykpyZvRgnn+BVrF3P5
 laVw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rajat Jain <rajatja@google.com>, rajatxjain@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q2VydGFpbiBsYXB0b3BzIG5vdyBjb21lIHdpdGggcGFuZWxzIHRoYXQgaGF2ZSBpbnRlZ3JhdGVk
IHByaXZhY3kKc2NyZWVucyBvbiB0aGVtLiBUaGlzIHBhdGNoIGFkZHMgc3VwcG9ydCBmb3Igc3Vj
aCBwYW5lbHMgYnkgYWRkaW5nCmEgcHJpdmFjeS1zY3JlZW4gcHJvcGVydHkgdG8gdGhlIGRybV9j
b25uZWN0b3IgZm9yIHRoZSBwYW5lbCwgdGhhdAp0aGUgdXNlcnNwYWNlIGNhbiB0aGVuIHVzZSB0
byBjb250cm9sIGFuZCBjaGVjayB0aGUgc3RhdHVzLiBUaGUgaWRlYQp3YXMgZGlzY3Vzc2VkIGhl
cmU6CgpodHRwczovL2xrbWwub3JnL2xrbWwvMjAxOS8xMC8xLzc4NgoKQUNQSSBtZXRob2RzIGFy
ZSB1c2VkIHRvIGlkZW50aWZ5LCBxdWVyeSBhbmQgY29udHJvbCBwcml2YWN5IHNjcmVlbjoKCiog
SWRlbnRpZnlpbmcgYW4gQUNQSSBvYmplY3QgY29ycmVzcG9uZGluZyB0byB0aGUgcGFuZWw6IFRo
ZSBwYXRjaApmb2xsb3dzIEFDUEkgU3BlYyA2LjMgKGF2YWlsYWJsZSBhdApodHRwczovL3VlZmku
b3JnL3NpdGVzL2RlZmF1bHQvZmlsZXMvcmVzb3VyY2VzL0FDUElfNl8zX2ZpbmFsX0phbjMwLnBk
ZikuClBhZ2VzIDExMTkgLSAxMTIzIGRlc2NyaWJlIHdoYXQgSSBiZWxpZXZlLCBpcyBhIHN0YW5k
YXJkIHdheSBvZgppZGVudGlmeWluZyAvIGFkZHJlc3NpbmcgImRpc3BsYXkgcGFuZWxzIiBpbiB0
aGUgQUNQSSB0YWJsZXMsIHRodXMKYWxsb3dpbmcga2VybmVsIHRvIGF0dGFjaCBBQ1BJIG5vZGVz
IHRvIHRoZSBwYW5lbC4gSU1ITywgdGhpcyBhYmlsaXR5CnRvIGlkZW50aWZ5IGFuZCBhdHRhY2gg
QUNQSSBub2RlcyB0byBkcm0gY29ubmVjdG9ycyBtYXkgYmUgdXNlZnVsIGZvcgpyZWFzb25zIG90
aGVyIHByaXZhY3ktc2NyZWVucywgaW4gZnV0dXJlLgoKKiBJZGVudGlmeWluZyB0aGUgcHJlc2Vu
Y2Ugb2YgcHJpdmFjeSBzY3JlZW4sIGFuZCBjb250cm9sbGluZyBpdCwgaXMgZG9uZQp2aWEgQUNQ
SSBfRFNNIG1ldGhvZHMuCgpDdXJyZW50bHksIHRoaXMgaXMgZG9uZSBvbmx5IGZvciB0aGUgSW50
ZWwgZGlzcGxheSBwb3J0cy4gQnV0IGluIGZ1dHVyZSwKdGhpcyBjYW4gYmUgZG9uZSBmb3IgYW55
IG90aGVyIHBvcnRzIGlmIHRoZSBoYXJkd2FyZSBiZWNvbWVzIGF2YWlsYWJsZQooZS5nLiBleHRl
cm5hbCBtb25pdG9ycyBzdXBwb3J0aW5nIGludGVncmF0ZWQgcHJpdmFjeSBzY3JlZW5zPykuCgpB
bHNvLCB0aGlzIGNvZGUgY2FuIGJlIGV4dGVuZGVkIGluIGZ1dHVyZSB0byBzdXBwb3J0IG5vbi1B
Q1BJIG1ldGhvZHMKKGUuZy4gdXNpbmcgYSBrZXJuZWwgR1BJTyBkcml2ZXIgdG8gdG9nZ2xlIGEg
Z3BpbyB0aGF0IGNvbnRyb2xzIHRoZQpwcml2YWN5LXNjcmVlbikuCgpTaWduZWQtb2ZmLWJ5OiBS
YWphdCBKYWluIDxyYWphdGphQGdvb2dsZS5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL01ha2Vm
aWxlICAgICAgICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX3Vh
cGkuYyAgICAgICB8ICAgNSArCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2Nvbm5lY3Rvci5jICAgICAg
ICAgfCAgMzggKysrKysKIGRyaXZlcnMvZ3B1L2RybS9kcm1fcHJpdmFjeV9zY3JlZW4uYyAgICB8
IDE3NiArKysrKysrKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3Bs
YXkvaW50ZWxfZHAuYyB8ICAgMyArCiBpbmNsdWRlL2RybS9kcm1fY29ubmVjdG9yLmggICAgICAg
ICAgICAgfCAgMTggKysrCiBpbmNsdWRlL2RybS9kcm1fbW9kZV9jb25maWcuaCAgICAgICAgICAg
fCAgIDcgKwogaW5jbHVkZS9kcm0vZHJtX3ByaXZhY3lfc2NyZWVuLmggICAgICAgIHwgIDMzICsr
KysrCiA4IGZpbGVzIGNoYW5nZWQsIDI4MSBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2
NDQgZHJpdmVycy9ncHUvZHJtL2RybV9wcml2YWN5X3NjcmVlbi5jCiBjcmVhdGUgbW9kZSAxMDA2
NDQgaW5jbHVkZS9kcm0vZHJtX3ByaXZhY3lfc2NyZWVuLmgKCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwdS9kcm0vTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKaW5kZXggODJmZjgy
NmIzM2NjLi5lMWZjMzNkNjliYjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9NYWtlZmls
ZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vTWFrZWZpbGUKQEAgLTE5LDYgKzE5LDcgQEAgZHJtLXkg
ICAgICAgOj0JZHJtX2F1dGgubyBkcm1fY2FjaGUubyBcCiAJCWRybV9zeW5jb2JqLm8gZHJtX2xl
YXNlLm8gZHJtX3dyaXRlYmFjay5vIGRybV9jbGllbnQubyBcCiAJCWRybV9jbGllbnRfbW9kZXNl
dC5vIGRybV9hdG9taWNfdWFwaS5vIGRybV9oZGNwLm8KIAorZHJtLSQoQ09ORklHX0FDUEkpICs9
IGRybV9wcml2YWN5X3NjcmVlbi5vCiBkcm0tJChDT05GSUdfRFJNX0xFR0FDWSkgKz0gZHJtX2xl
Z2FjeV9taXNjLm8gZHJtX2J1ZnMubyBkcm1fY29udGV4dC5vIGRybV9kbWEubyBkcm1fc2NhdHRl
ci5vIGRybV9sb2NrLm8KIGRybS0kKENPTkZJR19EUk1fTElCX1JBTkRPTSkgKz0gbGliL2RybV9y
YW5kb20ubwogZHJtLSQoQ09ORklHX0RSTV9WTSkgKz0gZHJtX3ZtLm8KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX3VhcGkuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRv
bWljX3VhcGkuYwppbmRleCA3YTI2YmZiNTMyOWMuLjQ0MTMxMTY1ZTRlYSAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfdWFwaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9k
cm1fYXRvbWljX3VhcGkuYwpAQCAtMzAsNiArMzAsNyBAQAogI2luY2x1ZGUgPGRybS9kcm1fYXRv
bWljLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9wcmludC5oPgogI2luY2x1ZGUgPGRybS9kcm1fZHJ2
Lmg+CisjaW5jbHVkZSA8ZHJtL2RybV9wcml2YWN5X3NjcmVlbi5oPgogI2luY2x1ZGUgPGRybS9k
cm1fd3JpdGViYWNrLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV92YmxhbmsuaD4KIApAQCAtNzY2LDYg
Kzc2Nyw4IEBAIHN0YXRpYyBpbnQgZHJtX2F0b21pY19jb25uZWN0b3Jfc2V0X3Byb3BlcnR5KHN0
cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCiAJCQkJCQkgICBmZW5jZV9wdHIpOwogCX0g
ZWxzZSBpZiAocHJvcGVydHkgPT0gY29ubmVjdG9yLT5tYXhfYnBjX3Byb3BlcnR5KSB7CiAJCXN0
YXRlLT5tYXhfcmVxdWVzdGVkX2JwYyA9IHZhbDsKKwl9IGVsc2UgaWYgKHByb3BlcnR5ID09IGNv
bmZpZy0+cHJpdmFjeV9zY3JlZW5fcHJvcGVydHkpIHsKKwkJZHJtX3ByaXZhY3lfc2NyZWVuX3Nl
dF92YWwoY29ubmVjdG9yLCB2YWwpOwogCX0gZWxzZSBpZiAoY29ubmVjdG9yLT5mdW5jcy0+YXRv
bWljX3NldF9wcm9wZXJ0eSkgewogCQlyZXR1cm4gY29ubmVjdG9yLT5mdW5jcy0+YXRvbWljX3Nl
dF9wcm9wZXJ0eShjb25uZWN0b3IsCiAJCQkJc3RhdGUsIHByb3BlcnR5LCB2YWwpOwpAQCAtODQy
LDYgKzg0NSw4IEBAIGRybV9hdG9taWNfY29ubmVjdG9yX2dldF9wcm9wZXJ0eShzdHJ1Y3QgZHJt
X2Nvbm5lY3RvciAqY29ubmVjdG9yLAogCQkqdmFsID0gMDsKIAl9IGVsc2UgaWYgKHByb3BlcnR5
ID09IGNvbm5lY3Rvci0+bWF4X2JwY19wcm9wZXJ0eSkgewogCQkqdmFsID0gc3RhdGUtPm1heF9y
ZXF1ZXN0ZWRfYnBjOworCX0gZWxzZSBpZiAocHJvcGVydHkgPT0gY29uZmlnLT5wcml2YWN5X3Nj
cmVlbl9wcm9wZXJ0eSkgeworCQkqdmFsID0gZHJtX3ByaXZhY3lfc2NyZWVuX2dldF92YWwoY29u
bmVjdG9yKTsKIAl9IGVsc2UgaWYgKGNvbm5lY3Rvci0+ZnVuY3MtPmF0b21pY19nZXRfcHJvcGVy
dHkpIHsKIAkJcmV0dXJuIGNvbm5lY3Rvci0+ZnVuY3MtPmF0b21pY19nZXRfcHJvcGVydHkoY29u
bmVjdG9yLAogCQkJCXN0YXRlLCBwcm9wZXJ0eSwgdmFsKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9kcm1fY29ubmVjdG9yLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2Nvbm5lY3Rvci5j
CmluZGV4IDRjNzY2NjI0YjIwZC4uYTMxZTAzODIxMzJiIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vZHJtX2Nvbm5lY3Rvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fY29ubmVjdG9y
LmMKQEAgLTgyMSw2ICs4MjEsMTEgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fcHJvcF9lbnVt
X2xpc3QgZHJtX3BhbmVsX29yaWVudGF0aW9uX2VudW1fbGlzdFtdID0gewogCXsgRFJNX01PREVf
UEFORUxfT1JJRU5UQVRJT05fUklHSFRfVVAsCSJSaWdodCBTaWRlIFVwIgl9LAogfTsKIAorc3Rh
dGljIGNvbnN0IHN0cnVjdCBkcm1fcHJvcF9lbnVtX2xpc3QgZHJtX3ByaXZhY3lfc2NyZWVuX2Vu
dW1fbGlzdFtdID0geworCXsgRFJNX1BSSVZBQ1lfU0NSRUVOX0RJU0FCTEVELCAiRGlzYWJsZWQi
IH0sCisJeyBEUk1fUFJJVkFDWV9TQ1JFRU5fRU5BQkxFRCwgIkVuYWJsZWQiIH0sCit9OworCiBz
dGF0aWMgY29uc3Qgc3RydWN0IGRybV9wcm9wX2VudW1fbGlzdCBkcm1fZHZpX2lfc2VsZWN0X2Vu
dW1fbGlzdFtdID0gewogCXsgRFJNX01PREVfU1VCQ09OTkVDVE9SX0F1dG9tYXRpYywgIkF1dG9t
YXRpYyIgfSwgLyogRFZJLUkgYW5kIFRWLW91dCAqLwogCXsgRFJNX01PREVfU1VCQ09OTkVDVE9S
X0RWSUQsICAgICAgIkRWSS1EIiAgICAgfSwgLyogRFZJLUkgICovCkBAIC0yMjUzLDYgKzIyNTgs
MzkgQEAgc3RhdGljIHZvaWQgZHJtX3RpbGVfZ3JvdXBfZnJlZShzdHJ1Y3Qga3JlZiAqa3JlZikK
IAlrZnJlZSh0Zyk7CiB9CiAKKy8qKgorICogZHJtX2Nvbm5lY3Rvcl9pbml0X3ByaXZhY3lfc2Ny
ZWVuX3Byb3BlcnR5IC0KKyAqCWNyZWF0ZSBhbmQgYXR0YWNoIHRoZSBjb25uZWN0ZXIncyBwcml2
YWN5LXNjcmVlbiBwcm9wZXJ0eS4KKyAqIEBjb25uZWN0b3I6IGNvbm5lY3RvciBmb3Igd2hpY2gg
dG8gaW5pdCB0aGUgcHJpdmFjeS1zY3JlZW4gcHJvcGVydHkuCisgKgorICogVGhpcyBmdW5jdGlv
biBjcmVhdGVzIGFuZCBhdHRhY2hlcyB0aGUgInByaXZhY3ktc2NyZWVuIiBwcm9wZXJ0eSB0byB0
aGUKKyAqIGNvbm5lY3Rvci4gSW5pdGlhbCBzdGF0ZSBvZiBwcml2YWN5LXNjcmVlbiBpcyBzZXQg
dG8gZGlzYWJsZWQuCisgKgorICogUmV0dXJuczoKKyAqIFplcm8gb24gc3VjY2VzcywgbmVnYXRp
dmUgZXJybm8gb24gZmFpbHVyZS4KKyAqLworaW50IGRybV9jb25uZWN0b3JfaW5pdF9wcml2YWN5
X3NjcmVlbl9wcm9wZXJ0eShzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQoreworCXN0
cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBjb25uZWN0b3ItPmRldjsKKwlzdHJ1Y3QgZHJtX3Byb3Bl
cnR5ICpwcm9wOworCisJcHJvcCA9IGRldi0+bW9kZV9jb25maWcucHJpdmFjeV9zY3JlZW5fcHJv
cGVydHk7CisJaWYgKCFwcm9wKSB7CisJCXByb3AgPSBkcm1fcHJvcGVydHlfY3JlYXRlX2VudW0o
ZGV2LCBEUk1fTU9ERV9QUk9QX0VOVU0sCisJCQkJInByaXZhY3ktc2NyZWVuIiwgZHJtX3ByaXZh
Y3lfc2NyZWVuX2VudW1fbGlzdCwKKwkJCQlBUlJBWV9TSVpFKGRybV9wcml2YWN5X3NjcmVlbl9l
bnVtX2xpc3QpKTsKKwkJaWYgKCFwcm9wKQorCQkJcmV0dXJuIC1FTk9NRU07CisKKwkJZGV2LT5t
b2RlX2NvbmZpZy5wcml2YWN5X3NjcmVlbl9wcm9wZXJ0eSA9IHByb3A7CisJfQorCisJZHJtX29i
amVjdF9hdHRhY2hfcHJvcGVydHkoJmNvbm5lY3Rvci0+YmFzZSwgcHJvcCwKKwkJCQkgICBEUk1f
UFJJVkFDWV9TQ1JFRU5fRElTQUJMRUQpOworCXJldHVybiAwOworfQorRVhQT1JUX1NZTUJPTChk
cm1fY29ubmVjdG9yX2luaXRfcHJpdmFjeV9zY3JlZW5fcHJvcGVydHkpOworCiAvKioKICAqIGRy
bV9tb2RlX3B1dF90aWxlX2dyb3VwIC0gZHJvcCBhIHJlZmVyZW5jZSB0byBhIHRpbGUgZ3JvdXAu
CiAgKiBAZGV2OiBEUk0gZGV2aWNlCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX3By
aXZhY3lfc2NyZWVuLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaXZhY3lfc2NyZWVuLmMKbmV3
IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi4xZDY4ZThhYTZjNWYKLS0tIC9k
ZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaXZhY3lfc2NyZWVuLmMKQEAgLTAs
MCArMSwxNzYgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVy
CisvKgorICogRFJNIHByaXZhY3kgU2NyZWVuIGNvZGUKKyAqCisgKiBDb3B5cmlnaHQgwqkgMjAx
OSBHb29nbGUgSW5jLgorICovCisKKyNpbmNsdWRlIDxsaW51eC9hY3BpLmg+CisjaW5jbHVkZSA8
bGludXgvcGNpLmg+CisKKyNpbmNsdWRlIDxkcm0vZHJtX2Nvbm5lY3Rvci5oPgorI2luY2x1ZGUg
PGRybS9kcm1fZGV2aWNlLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9wcmludC5oPgorCisjZGVmaW5l
IERSTV9DT05OX0RTTV9SRVZJRCAxCisKKyNkZWZpbmUgRFJNX0NPTk5fRFNNX0ZOX1BSSVZBQ1lf
R0VUX1NUQVRVUwkxCisjZGVmaW5lIERSTV9DT05OX0RTTV9GTl9QUklWQUNZX0VOQUJMRQkJMgor
I2RlZmluZSBEUk1fQ09OTl9EU01fRk5fUFJJVkFDWV9ESVNBQkxFCQkzCisKK3N0YXRpYyBjb25z
dCBndWlkX3QgZHJtX2Nvbm5fZHNtX2d1aWQgPQorCUdVSURfSU5JVCgweEM3MDMzMTEzLCAweDg3
MjAsIDB4NENFQiwKKwkJICAweDkwLCAweDkwLCAweDlELCAweDUyLCAweEIzLCAweEU1LCAweDJE
LCAweDczKTsKKworLyoKKyAqIE1ha2VzIF9EU00gY2FsbCB0byBzZXQgcHJpdmFjeSBzY3JlZW4g
c3RhdHVzIG9yIGdldCBwcml2YWN5IHNjcmVlbi4gUmV0dXJuCisgKiB2YWx1ZSBtYXR0ZXJzIG9u
bHkgZm9yIFBSSVZBQ1lfR0VUX1NUQVRVUyBjYXNlLiBSZXR1cm5zIDAgaWYgZGlzYWJsZWQsIDEg
aWYKKyAqIGVuYWJsZWQuCisgKi8KK3N0YXRpYyBpbnQgYWNwaV9wcml2YWN5X3NjcmVlbl9jYWxs
X2RzbShhY3BpX2hhbmRsZSBjb25uX2hhbmRsZSwgdTY0IGZ1bmMpCit7CisJdW5pb24gYWNwaV9v
YmplY3QgKm9iajsKKwlpbnQgcmV0ID0gMDsKKworCW9iaiA9IGFjcGlfZXZhbHVhdGVfZHNtKGNv
bm5faGFuZGxlLCAmZHJtX2Nvbm5fZHNtX2d1aWQsCisJCQkJRFJNX0NPTk5fRFNNX1JFVklELCBm
dW5jLCBOVUxMKTsKKwlpZiAoIW9iaikgeworCQlEUk1fREVCVUdfRFJJVkVSKCJmYWlsZWQgdG8g
ZXZhbHVhdGUgX0RTTSBmb3IgZm4gJWxseFxuIiwgZnVuYyk7CisJCS8qIENhbid0IGRvIG11Y2gu
IEZvciBnZXRfdmFsLCBhc3N1bWUgcHJpdmFjeV9zY3JlZW4gZGlzYWJsZWQgKi8KKwkJZ290byBk
b25lOworCX0KKworCWlmIChmdW5jID09IERSTV9DT05OX0RTTV9GTl9QUklWQUNZX0dFVF9TVEFU
VVMgJiYKKwkgICAgb2JqLT50eXBlID09IEFDUElfVFlQRV9JTlRFR0VSKQorCQlyZXQgPSAhIW9i
ai0+aW50ZWdlci52YWx1ZTsKK2RvbmU6CisJQUNQSV9GUkVFKG9iaik7CisJcmV0dXJuIHJldDsK
K30KKwordm9pZCBkcm1fcHJpdmFjeV9zY3JlZW5fc2V0X3ZhbChzdHJ1Y3QgZHJtX2Nvbm5lY3Rv
ciAqY29ubmVjdG9yLAorCQkJCSBlbnVtIGRybV9wcml2YWN5X3NjcmVlbiB2YWwpCit7CisJYWNw
aV9oYW5kbGUgYWNwaV9oYW5kbGUgPSBjb25uZWN0b3ItPnByaXZhY3lfc2NyZWVuX2hhbmRsZTsK
KworCWlmICghYWNwaV9oYW5kbGUpCisJCXJldHVybjsKKworCWlmICh2YWwgPT0gRFJNX1BSSVZB
Q1lfU0NSRUVOX0RJU0FCTEVEKQorCQlhY3BpX3ByaXZhY3lfc2NyZWVuX2NhbGxfZHNtKGFjcGlf
aGFuZGxlLAorCQkJCQkgICAgIERSTV9DT05OX0RTTV9GTl9QUklWQUNZX0RJU0FCTEUpOworCWVs
c2UgaWYgKHZhbCA9PSBEUk1fUFJJVkFDWV9TQ1JFRU5fRU5BQkxFRCkKKwkJYWNwaV9wcml2YWN5
X3NjcmVlbl9jYWxsX2RzbShhY3BpX2hhbmRsZSwKKwkJCQkJICAgICBEUk1fQ09OTl9EU01fRk5f
UFJJVkFDWV9FTkFCTEUpOworfQorCitlbnVtIGRybV9wcml2YWN5X3NjcmVlbiBkcm1fcHJpdmFj
eV9zY3JlZW5fZ2V0X3ZhbChzdHJ1Y3QgZHJtX2Nvbm5lY3RvcgorCQkJCQkJICAgKmNvbm5lY3Rv
cikKK3sKKwlhY3BpX2hhbmRsZSBhY3BpX2hhbmRsZSA9IGNvbm5lY3Rvci0+cHJpdmFjeV9zY3Jl
ZW5faGFuZGxlOworCisJaWYgKGFjcGlfaGFuZGxlICYmCisJICAgIGFjcGlfcHJpdmFjeV9zY3Jl
ZW5fY2FsbF9kc20oYWNwaV9oYW5kbGUsCisJCQkJCSBEUk1fQ09OTl9EU01fRk5fUFJJVkFDWV9H
RVRfU1RBVFVTKSkKKwkJcmV0dXJuIERSTV9QUklWQUNZX1NDUkVFTl9FTkFCTEVEOworCisJcmV0
dXJuIERSTV9QUklWQUNZX1NDUkVFTl9ESVNBQkxFRDsKK30KKworLyoKKyAqIFNlZSBBQ1BJIFNw
ZWMgdjYuMywgVGFibGUgQi0yLCAiRGlzcGxheSBUeXBlIiBmb3IgZGV0YWlscy4KKyAqIEluIHNo
b3J0LCB0aGVzZSBtYWNyb3MgZGVmaW5lIHRoZSBiYXNlIF9BRFIgdmFsdWVzIGZvciBBQ1BJIG5v
ZGVzCisgKi8KKyNkZWZpbmUgQUNQSV9CQVNFX0FEUl9GT1JfT1RIRVJTCSgwVUxMIDw8IDgpCisj
ZGVmaW5lIEFDUElfQkFTRV9BRFJfRk9SX1ZHQQkJKDFVTEwgPDwgOCkKKyNkZWZpbmUgQUNQSV9C
QVNFX0FEUl9GT1JfVFYJCSgyVUxMIDw8IDgpCisjZGVmaW5lIEFDUElfQkFTRV9BRFJfRk9SX0VY
VF9NT04JKDNVTEwgPDwgOCkKKyNkZWZpbmUgQUNQSV9CQVNFX0FEUl9GT1JfSU5URUdSQVRFRAko
NFVMTCA8PCA4KQorCisjZGVmaW5lIEFDUElfREVWSUNFX0lEX1NDSEVNRQkJKDFVTEwgPDwgMzEp
CisjZGVmaW5lIEFDUElfRklSTVdBUkVfQ0FOX0RFVEVDVAkoMVVMTCA8PCAxNikKKworLyoKKyAq
IFJlZjogQUNQSSBTcGVjIDYuMworICogaHR0cHM6Ly91ZWZpLm9yZy9zaXRlcy9kZWZhdWx0L2Zp
bGVzL3Jlc291cmNlcy9BQ1BJXzZfM19maW5hbF9KYW4zMC5wZGYKKyAqIFBhZ2VzIDExMTkgLSAx
MTIzIGRlc2NyaWJlLCB3aGF0IEkgYmVsaWV2ZSwgYSBzdGFuZGFyZCB3YXkgb2YKKyAqIGlkZW50
aWZ5aW5nIC8gYWRkcmVzc2luZyAiZGlzcGxheSBwYW5lbHMiIGluIHRoZSBBQ1BJLiBUaHVzIGl0
IHByb3ZpZGVzCisgKiBhIHdheSBmb3IgdGhlIEFDUEkgdG8gZGVmaW5lIGRldmljZXMgZm9yIHRo
ZSBkaXNwbGF5IHBhbmVscyBhdHRhY2hlZAorICogdG8gdGhlIHN5c3RlbS4gSXQgdGh1cyBwcm92
aWRlcyBhIHdheSBmb3IgdGhlIEJJT1MgdG8gZXhwb3J0IGFueSBwYW5lbAorICogc3BlY2lmaWMg
cHJvcGVydGllcyB0byB0aGUgc3lzdGVtIHZpYSBBQ1BJIChsaWtlIGRldmljZSB0cmVlcykuCisg
KgorICogVGhlIGZvbGxvd2luZyBmdW5jdGlvbiBsb29rcyB1cCB0aGUgQUNQSSBub2RlIGZvciBh
IGNvbm5lY3RvciBhbmQgbGlua3MKKyAqIHRvIGl0LiBUZWNobmljYWxseSBpdCBpcyBpbmRlcGVu
ZGVudCBmcm9tIHRoZSBwcml2YWN5X3NjcmVlbiBjb2RlLCBhbmQKKyAqIGlkZWFsbHkgbWF5IGJl
IGNhbGxlZCBmb3IgYWxsIGNvbm5lY3RvcnMuIEl0IGlzIGdlbmVyYWxseSBhIGdvb2QgaWRlYSB0
bworICogYmUgYWJsZSB0byBhdHRhY2ggYW4gQUNQSSBub2RlIHRvIGRlc2NyaWJlIGFueXRoaW5n
IGlmIG5lZWRlZC4gKFRoaXMgY2FuCisgKiBoZWxwIGluIGZ1dHVyZSBmb3Igb3RoZXIgcGFuZWwg
c3BlY2lmaWMgZmVhdHVyZXMgbWF5YmUpLiBIb3dldmVyLCBpdAorICogbmVlZHMgYSAicG9ydCBp
bmRleCIgd2hpY2ggSSBiZWxpZXZlIGlzIHRoZSBpbmRleCB3aXRoaW4gYSBwYXJ0aWN1bGFyCisg
KiB0eXBlIG9mIHBvcnQgKFJlZiB0byB0aGUgcGFnZXMgb2Ygc3BlYyBtZW50aW9uZWQgYWJvdmUp
LiBUaGlzIHBvcnQgaW5kZXgKKyAqIHVuZm9ydHVuYXRlbHkgaXMgbm90IGF2YWlsYWJsZSBpbiBE
Uk0gY29kZSwgc28gY3VycmVudGx5IGl0cyBjYWxsIGlzCisgKiBvcmlnaW5hdGVkIGZyb20gaTkx
NSBkcml2ZXIuCisgKi8KK3N0YXRpYyBpbnQgZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfYWNwaV9ub2Rl
KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCisJCQkJCSAgdTggcG9ydF9pbmRleCkK
K3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmY29ubmVjdG9yLT5kZXYtPnBkZXYtPmRldjsKKwlz
dHJ1Y3QgYWNwaV9kZXZpY2UgKmNvbm5fZGV2OworCXU2NCBjb25uX2FkZHI7CisKKwkvKgorCSAq
IERldGVybWluZSB3aGF0IF9BRFIgdG8gbG9vayBmb3IsIGRlcGVuZGluZyBvbiBkZXZpY2UgdHlw
ZSBhbmQKKwkgKiBwb3J0IG51bWJlci4gUG90ZW50aWFsbHkgd2Ugb25seSBjYXJlIGFib3V0IHRo
ZQorCSAqIGVEUCAvIGludGVncmF0ZWQgZGlzcGxheXM/CisJICovCisJc3dpdGNoIChjb25uZWN0
b3ItPmNvbm5lY3Rvcl90eXBlKSB7CisJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfZURQOgorCQlj
b25uX2FkZHIgPSBBQ1BJX0JBU0VfQURSX0ZPUl9JTlRFR1JBVEVEICsgcG9ydF9pbmRleDsKKwkJ
YnJlYWs7CisJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfVkdBOgorCQljb25uX2FkZHIgPSBBQ1BJ
X0JBU0VfQURSX0ZPUl9WR0EgKyBwb3J0X2luZGV4OworCQlicmVhazsKKwljYXNlIERSTV9NT0RF
X0NPTk5FQ1RPUl9UVjoKKwkJY29ubl9hZGRyID0gQUNQSV9CQVNFX0FEUl9GT1JfVFYgKyBwb3J0
X2luZGV4OworCQlicmVhazsKKwljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9EaXNwbGF5UG9ydDoK
KwkJY29ubl9hZGRyID0gQUNQSV9CQVNFX0FEUl9GT1JfRVhUX01PTiArIHBvcnRfaW5kZXg7CisJ
CWJyZWFrOworCWRlZmF1bHQ6CisJCXJldHVybiAtRU5PVFNVUFA7CisJfQorCisJY29ubl9hZGRy
IHw9IEFDUElfREVWSUNFX0lEX1NDSEVNRTsKKwljb25uX2FkZHIgfD0gQUNQSV9GSVJNV0FSRV9D
QU5fREVURUNUOworCisJRFJNX0RFVl9ERUJVRyhkZXYsICIlczogRmluZGluZyBkcm1fY29ubmVj
dG9yIEFDUEkgbm9kZSBhdCBfQURSPSVsbFhcbiIsCisJCSAgICAgIF9fZnVuY19fLCBjb25uX2Fk
ZHIpOworCisJLyogTG9vayB1cCB0aGUgY29ubmVjdG9yIGRldmljZSwgdW5kZXIgdGhlIFBDSSBk
ZXZpY2UgKi8KKwljb25uX2RldiA9IGFjcGlfZmluZF9jaGlsZF9kZXZpY2UoQUNQSV9DT01QQU5J
T04oZGV2KSwKKwkJCQkJICBjb25uX2FkZHIsIGZhbHNlKTsKKwlpZiAoIWNvbm5fZGV2KQorCQly
ZXR1cm4gLUVOT0RFVjsKKworCWNvbm5lY3Rvci0+cHJpdmFjeV9zY3JlZW5faGFuZGxlID0gY29u
bl9kZXYtPmhhbmRsZTsKKwlyZXR1cm4gMDsKK30KKworYm9vbCBkcm1fcHJpdmFjeV9zY3JlZW5f
cHJlc2VudChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLCB1OCBwb3J0X2luZGV4KQor
eworCWFjcGlfaGFuZGxlIGhhbmRsZTsKKworCWlmIChkcm1fY29ubmVjdG9yX2F0dGFjaF9hY3Bp
X25vZGUoY29ubmVjdG9yLCBwb3J0X2luZGV4KSkKKwkJcmV0dXJuIGZhbHNlOworCisJaGFuZGxl
ID0gY29ubmVjdG9yLT5wcml2YWN5X3NjcmVlbl9oYW5kbGU7CisJaWYgKCFhY3BpX2NoZWNrX2Rz
bShoYW5kbGUsICZkcm1fY29ubl9kc21fZ3VpZCwKKwkJCSAgICBEUk1fQ09OTl9EU01fUkVWSUQs
CisJCQkgICAgMSA8PCBEUk1fQ09OTl9EU01fRk5fUFJJVkFDWV9HRVRfU1RBVFVTIHwKKwkJCSAg
ICAxIDw8IERSTV9DT05OX0RTTV9GTl9QUklWQUNZX0VOQUJMRSB8CisJCQkgICAgMSA8PCBEUk1f
Q09OTl9EU01fRk5fUFJJVkFDWV9ESVNBQkxFKSkgeworCQlEUk1fV0FSTigiJXM6IE9kZCwgY29u
bmVjdG9yIEFDUEkgbm9kZSBidXQgbm8gcHJpdmFjeSBzY3JuP1xuIiwKKwkJCSBjb25uZWN0b3It
PmRldi0+ZGV2KTsKKwkJcmV0dXJuIGZhbHNlOworCX0KKwlEUk1fREVWX0lORk8oY29ubmVjdG9y
LT5kZXYtPmRldiwgInN1cHBvcnRzIHByaXZhY3kgc2NyZWVuXG4iKTsKKwlyZXR1cm4gdHJ1ZTsK
K30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYyBi
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAuYwppbmRleCA1N2U5ZjBiYTMz
MWIuLjNmZjM5NjJkMjdkYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZGlzcGxh
eS9pbnRlbF9kcC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfZHAu
YwpAQCAtMzksNiArMzksNyBAQAogI2luY2x1ZGUgPGRybS9kcm1fZHBfaGVscGVyLmg+CiAjaW5j
bHVkZSA8ZHJtL2RybV9lZGlkLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9oZGNwLmg+CisjaW5jbHVk
ZSA8ZHJtL2RybV9wcml2YWN5X3NjcmVlbi5oPgogI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVs
cGVyLmg+CiAjaW5jbHVkZSA8ZHJtL2k5MTVfZHJtLmg+CiAKQEAgLTYzNTQsNiArNjM1NSw4IEBA
IGludGVsX2RwX2FkZF9wcm9wZXJ0aWVzKHN0cnVjdCBpbnRlbF9kcCAqaW50ZWxfZHAsIHN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZWN0CiAKIAkJY29ubmVjdG9yLT5zdGF0ZS0+c2NhbGluZ19t
b2RlID0gRFJNX01PREVfU0NBTEVfQVNQRUNUOwogCisJCWlmIChkcm1fcHJpdmFjeV9zY3JlZW5f
cHJlc2VudChjb25uZWN0b3IsIHBvcnQgLSBQT1JUX0EpKQorCQkJZHJtX2Nvbm5lY3Rvcl9pbml0
X3ByaXZhY3lfc2NyZWVuX3Byb3BlcnR5KGNvbm5lY3Rvcik7CiAJfQogfQogCmRpZmYgLS1naXQg
YS9pbmNsdWRlL2RybS9kcm1fY29ubmVjdG9yLmggYi9pbmNsdWRlL2RybS9kcm1fY29ubmVjdG9y
LmgKaW5kZXggNjgxY2I1OTBmOTUyLi42M2I4MzE4YmQ2OGMgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUv
ZHJtL2RybV9jb25uZWN0b3IuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fY29ubmVjdG9yLmgKQEAg
LTIyNSw2ICsyMjUsMjAgQEAgZW51bSBkcm1fbGlua19zdGF0dXMgewogCURSTV9MSU5LX1NUQVRV
U19CQUQgPSBEUk1fTU9ERV9MSU5LX1NUQVRVU19CQUQsCiB9OwogCisvKioKKyAqIGVudW0gZHJt
X3ByaXZhY3lfc2NyZWVuIC0gcHJpdmFjeV9zY3JlZW4gc3RhdHVzCisgKgorICogVGhpcyBlbnVt
IGlzIHVzZWQgdG8gdHJhY2sgYW5kIGNvbnRyb2wgdGhlIHN0YXRlIG9mIHRoZSBwcml2YWN5IHNj
cmVlbi4KKyAqIFRoZXJlIGFyZSBubyBzZXBhcmF0ZSAjZGVmaW5lcyBmb3IgdGhlIHVhcGkhCisg
KgorICogQERSTV9QUklWQUNZX1NDUkVFTl9ESVNBQkxFRDogVGhlIHByaXZhY3ktc2NyZWVuIG9u
IHRoZSBwYW5lbCBpcyBkaXNhYmxlZAorICogQERSTV9QUklWQUNZX1NDUkVFTl9FTkFCTEVEOiAg
VGhlIHByaXZhY3ktc2NyZWVuIG9uIHRoZSBwYW5lbCBpcyBlbmFibGVkCisgKi8KK2VudW0gZHJt
X3ByaXZhY3lfc2NyZWVuIHsKKwlEUk1fUFJJVkFDWV9TQ1JFRU5fRElTQUJMRUQgPSAwLAorCURS
TV9QUklWQUNZX1NDUkVFTl9FTkFCTEVEID0gMSwKK307CisKIC8qKgogICogZW51bSBkcm1fcGFu
ZWxfb3JpZW50YXRpb24gLSBwYW5lbF9vcmllbnRhdGlvbiBpbmZvIGZvciAmZHJtX2Rpc3BsYXlf
aW5mbwogICoKQEAgLTE0MTAsNiArMTQyNCw5IEBAIHN0cnVjdCBkcm1fY29ubmVjdG9yIHsKIAog
CS8qKiBAaGRyX3NpbmtfbWV0YWRhdGE6IEhEUiBNZXRhZGF0YSBJbmZvcm1hdGlvbiByZWFkIGZy
b20gc2luayAqLwogCXN0cnVjdCBoZHJfc2lua19tZXRhZGF0YSBoZHJfc2lua19tZXRhZGF0YTsK
KworCS8qIEhhbmRsZSB1c2VkIGJ5IHByaXZhY3kgc2NyZWVuIGNvZGUgKi8KKwl2b2lkICpwcml2
YWN5X3NjcmVlbl9oYW5kbGU7CiB9OwogCiAjZGVmaW5lIG9ial90b19jb25uZWN0b3IoeCkgY29u
dGFpbmVyX29mKHgsIHN0cnVjdCBkcm1fY29ubmVjdG9yLCBiYXNlKQpAQCAtMTU0Myw2ICsxNTYw
LDcgQEAgaW50IGRybV9jb25uZWN0b3JfaW5pdF9wYW5lbF9vcmllbnRhdGlvbl9wcm9wZXJ0eSgK
IAlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLCBpbnQgd2lkdGgsIGludCBoZWlnaHQp
OwogaW50IGRybV9jb25uZWN0b3JfYXR0YWNoX21heF9icGNfcHJvcGVydHkoc3RydWN0IGRybV9j
b25uZWN0b3IgKmNvbm5lY3RvciwKIAkJCQkJICBpbnQgbWluLCBpbnQgbWF4KTsKK2ludCBkcm1f
Y29ubmVjdG9yX2luaXRfcHJpdmFjeV9zY3JlZW5fcHJvcGVydHkoc3RydWN0IGRybV9jb25uZWN0
b3IgKmNvbm5lY3Rvcik7CiAKIC8qKgogICogc3RydWN0IGRybV90aWxlX2dyb3VwIC0gVGlsZSBn
cm91cCBtZXRhZGF0YQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX21vZGVfY29uZmlnLmgg
Yi9pbmNsdWRlL2RybS9kcm1fbW9kZV9jb25maWcuaAppbmRleCAzYmNiZTMwMzM5ZjAuLjZkNWQy
M2RhOTBkNCAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX21vZGVfY29uZmlnLmgKKysrIGIv
aW5jbHVkZS9kcm0vZHJtX21vZGVfY29uZmlnLmgKQEAgLTgxMyw2ICs4MTMsMTMgQEAgc3RydWN0
IGRybV9tb2RlX2NvbmZpZyB7CiAJICovCiAJc3RydWN0IGRybV9wcm9wZXJ0eSAqcGFuZWxfb3Jp
ZW50YXRpb25fcHJvcGVydHk7CiAKKwkvKioKKwkgKiBAcHJpdmFjeV9zY3JlZW5fcHJvcGVydHk6
IE9wdGlvbmFsIGNvbm5lY3RvciBwcm9wZXJ0eSB0byBpbmRpY2F0ZQorCSAqIGFuZCBjb250cm9s
IHRoZSBzdGF0ZSAoZW5hYmxlZCAvIGRpc2FibGVkKSBvZiBwcml2YWN5LXNjcmVlbiBvbiB0aGUK
KwkgKiBwYW5lbCwgaWYgcHJlc2VudC4KKwkgKi8KKwlzdHJ1Y3QgZHJtX3Byb3BlcnR5ICpwcml2
YWN5X3NjcmVlbl9wcm9wZXJ0eTsKKwogCS8qKgogCSAqIEB3cml0ZWJhY2tfZmJfaWRfcHJvcGVy
dHk6IFByb3BlcnR5IGZvciB3cml0ZWJhY2sgY29ubmVjdG9ycywgc3RvcmluZwogCSAqIHRoZSBJ
RCBvZiB0aGUgb3V0cHV0IGZyYW1lYnVmZmVyLgpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJt
X3ByaXZhY3lfc2NyZWVuLmggYi9pbmNsdWRlL2RybS9kcm1fcHJpdmFjeV9zY3JlZW4uaApuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmM1ODliYmM0NzY1NgotLS0gL2Rl
di9udWxsCisrKyBiL2luY2x1ZGUvZHJtL2RybV9wcml2YWN5X3NjcmVlbi5oCkBAIC0wLDAgKzEs
MzMgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyICovCisv
KgorICogQ29weXJpZ2h0IMKpIDIwMTkgR29vZ2xlIEluYy4KKyAqLworCisjaWZuZGVmIF9fRFJN
X1BSSVZBQ1lfU0NSRUVOX0hfXworI2RlZmluZSBfX0RSTV9QUklWQUNZX1NDUkVFTl9IX18KKwor
I2lmZGVmIENPTkZJR19BQ1BJCitib29sIGRybV9wcml2YWN5X3NjcmVlbl9wcmVzZW50KHN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsIHU4IHBvcnQpOwordm9pZCBkcm1fcHJpdmFjeV9z
Y3JlZW5fc2V0X3ZhbChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLAorCQkJCWVudW0g
ZHJtX3ByaXZhY3lfc2NyZWVuIHZhbCk7CitlbnVtIGRybV9wcml2YWN5X3NjcmVlbiBkcm1fcHJp
dmFjeV9zY3JlZW5fZ2V0X3ZhbChzdHJ1Y3QgZHJtX2Nvbm5lY3RvcgorCQkJCQkJICAgKmNvbm5l
Y3Rvcik7CisjZWxzZQorc3RhdGljIGlubGluZSBib29sIGRybV9wcml2YWN5X3NjcmVlbl9wcmVz
ZW50KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCisJCQkJCSAgICAgIHU4IHBvcnQp
Cit7CisJcmV0dXJuIGZhbHNlOworfQorCit2b2lkIGRybV9wcml2YWN5X3NjcmVlbl9zZXRfdmFs
KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCisJCQkJZW51bSBkcm1fcHJpdmFjeV9z
Y3JlZW4gdmFsKQoreyB9CisKK2VudW0gZHJtX3ByaXZhY3lfc2NyZWVuIGRybV9wcml2YWN5X3Nj
cmVlbl9nZXRfdmFsKAorCQkJCQlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yKQorewor
CXJldHVybiBEUk1fUFJJVkFDWV9TQ1JFRU5fRElTQUJMRUQ7Cit9CisjZW5kaWYgLyogQ09ORklH
X0FDUEkgKi8KKworI2VuZGlmIC8qIF9fRFJNX1BSSVZBQ1lfU0NSRUVOX0hfXyAqLwotLSAKMi4y
My4wLjg2Ni5nYjg2OWI5OGQ0Yy1nb29nCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
