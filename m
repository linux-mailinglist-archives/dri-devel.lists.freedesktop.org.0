Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B13FA96CC1
	for <lists+dri-devel@lfdr.de>; Wed, 21 Aug 2019 01:07:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 86D206E8C7;
	Tue, 20 Aug 2019 23:07:01 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pf1-x441.google.com (mail-pf1-x441.google.com
 [IPv6:2607:f8b0:4864:20::441])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9AAF86E8BE
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 23:06:59 +0000 (UTC)
Received: by mail-pf1-x441.google.com with SMTP id f17so90517pfn.6
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 16:06:59 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=snb+417mkIMijis5gqdevRgXi5CVEc/HJIJZWNwpKg4=;
 b=XEuOw4aRAuosrhr5hODqtPjjg9gyx8vhIev9q1Ncp3GKK8+LQJhsQTveGTj+jCBGID
 gleaEnvbbaSNR77k6elNnuCpsjcB9xpGjs6mFWaB1965515RL0Xt1rnv7iO+nSdCFfg6
 7yG/qPeKeFVWEO5drOwtxUzSv/GCihOMWoLo8Sb9gs7q/ZrJ7QZhQIxXutkEph7GfusF
 FUE3I2AsDlqd9uCfvdaWIv940lLhHbYpqarFmakpb5bQTHTHcjYCTDWaioOaURw6mmtR
 TA6MDvKYhxLBAs0sW5kuihHBkFRxQE5pfYdpdj/YB97pFSUlwaGltH2Hm2FvuvdlMzME
 nkfA==
X-Gm-Message-State: APjAAAWP8cokLA6aU2DgRKkFw775W4ijmgS8Cmpp/t8YoEYZ33hcUPT/
 OfDB1yRxSSa//uBiUtWKiMGeBEcU3Do=
X-Google-Smtp-Source: APXvYqwY4EfPryJEWWvkuEZzRawoYOjYmi1jU1CLX9i5qMq4MfYDgepzGUiPR7bgjFNv9hEGkySf8A==
X-Received: by 2002:a63:3006:: with SMTP id w6mr27037577pgw.440.1566342418741; 
 Tue, 20 Aug 2019 16:06:58 -0700 (PDT)
Received: from localhost.localdomain ([2601:1c2:680:1319:692:26ff:feda:3a81])
 by smtp.gmail.com with ESMTPSA id
 q4sm27564747pff.183.2019.08.20.16.06.57
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 20 Aug 2019 16:06:58 -0700 (PDT)
From: John Stultz <john.stultz@linaro.org>
To: lkml <linux-kernel@vger.kernel.org>
Subject: [PATCH v5 19/25] drm: kirin: Add register connect helper functions in
 drm init
Date: Tue, 20 Aug 2019 23:06:20 +0000
Message-Id: <20190820230626.23253-20-john.stultz@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190820230626.23253-1-john.stultz@linaro.org>
References: <20190820230626.23253-1-john.stultz@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=snb+417mkIMijis5gqdevRgXi5CVEc/HJIJZWNwpKg4=;
 b=ckmC6bHO8Kbn1CHlkCqw7uMa48JTuuzH2nyUAHB1uDRaO0HUittmeTKLjRL0mTNEcy
 lubKDnkDdpPxOQ/Ua9bx/0M77HH0xP0TbZxIGkOdUgKpk3/2VC3U/RlG9jrdMLe3HBPL
 /ufFGRVWEQb41zCT1YnIk41YzfHkCnZ5leAuMjMdjHxzeMAebw6HwxJ49mvpod07sywX
 t7UIxQDlrlNuS/DVY7IjsbG19IzhsJ+dwbzFx41/yrW9F3sOpS9pbHFo5q7ONbgurGj4
 z56oCcreOzy1X0wR/2dZ2ERY0AfVh28rQRfwSsv4IHENeCN7W7hq7UAYt+z50QjE7sEp
 cLwQ==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Xu YiPing <xuyiping@hisilicon.com>, David Airlie <airlied@linux.ie>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Xinliang Liu <z.liuxinliang@hisilicon.com>,
 Rongrong Zou <zourongrong@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogWHUgWWlQaW5nIDx4dXlpcGluZ0BoaXNpbGljb24uY29tPgoKQXMgcGFydCBvZiByZWZh
Y3RvcmluZyB0aGUga2lyaW4gZHJpdmVyIHRvIGJldHRlciBzdXBwb3J0CmRpZmZlcmVudCBoYXJk
d2FyZSByZXZpc2lvbnMsIHRoaXMgcGF0Y2ggYWRkcyBhIGZsYWcgdG8gdGhlCmRldmljZSBzcGVj
aWZpYyBkcml2ZXIgZGF0YSBzbyB0aGF0IHdlIGNhbiBjb25kaXRpb25hbGx5CnJlZ2lzdGVyIHRo
ZSBjb25uZWN0b3JzIGF0IGluaXQuCgpDYzogUm9uZ3JvbmcgWm91IDx6b3Vyb25ncm9uZ0BnbWFp
bC5jb20+CkNjOiBYaW5saWFuZyBMaXUgPHoubGl1eGlubGlhbmdAaGlzaWxpY29uLmNvbT4KQ2M6
IERhdmlkIEFpcmxpZSA8YWlybGllZEBsaW51eC5pZT4KQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmll
bEBmZndsbC5jaD4KQ2M6IGRyaS1kZXZlbCA8ZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9y
Zz4KQ2M6IFNhbSBSYXZuYm9yZyA8c2FtQHJhdm5ib3JnLm9yZz4KQWNrZWQtYnk6IFhpbmxpYW5n
IExpdSA8ei5saXV4aW5saWFuZ0BoaXNpbGljb24uY29tPgpSZXZpZXdlZC1ieTogU2FtIFJhdm5i
b3JnIDxzYW1AcmF2bmJvcmcub3JnPgpTaWduZWQtb2ZmLWJ5OiBYdSBZaVBpbmcgPHh1eWlwaW5n
QGhpc2lsaWNvbi5jb20+Cltqc3R1bHR6OiByZXdvcmRlZCBjb21taXQgbWVzc2FnZV0KU2lnbmVk
LW9mZi1ieTogSm9obiBTdHVsdHogPGpvaG4uc3R1bHR6QGxpbmFyby5vcmc+Ci0tLQp2NTogY2hl
Y2twYXRjaCAtLXN0cmljdCB3aGl0ZXNwYWNlIGZpeHVwcyBub3RpY2VkIGJ5IFNhbQotLS0KIC4u
Li9ncHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fYWRlLmMgICB8ICAxICsKIC4uLi9n
cHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fZHJ2LmMgICB8IDQzICsrKysrKysrKysr
KysrKysrKysKIC4uLi9ncHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fZHJ2LmggICB8
ICAxICsKIDMgZmlsZXMgY2hhbmdlZCwgNDUgaW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2FkZS5jIGIvZHJpdmVycy9n
cHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fYWRlLmMKaW5kZXggMjFjNWQ0NTdhOTdk
Li44OWJkYzAzODgxMzggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2ly
aW4va2lyaW5fZHJtX2FkZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4v
a2lyaW5fZHJtX2FkZS5jCkBAIC0xMDczLDYgKzEwNzMsNyBAQCBzdGF0aWMgc3RydWN0IGRybV9k
cml2ZXIgYWRlX2RyaXZlciA9IHsKIH07CiAKIHN0cnVjdCBraXJpbl9kcm1fZGF0YSBhZGVfZHJp
dmVyX2RhdGEgPSB7CisJLnJlZ2lzdGVyX2Nvbm5lY3RzID0gZmFsc2UsCiAJLm51bV9wbGFuZXMg
PSBBREVfQ0hfTlVNLAogCS5wcmltX3BsYW5lID0gQURFX0NIMSwKIAkuY2hhbm5lbF9mb3JtYXRz
ID0gY2hhbm5lbF9mb3JtYXRzLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2hpc2lsaWNv
bi9raXJpbi9raXJpbl9kcm1fZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vaGlzaWxpY29uL2tpcmlu
L2tpcmluX2RybV9kcnYuYwppbmRleCBjOWZhYWE4NDhjYzYuLjY4ZGU4ODM4ZGEzYyAxMDA2NDQK
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fZHJ2LmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fZHJ2LmMKQEAgLTk4
LDYgKzk4LDQwIEBAIHN0YXRpYyBpbnQgY29tcGFyZV9vZihzdHJ1Y3QgZGV2aWNlICpkZXYsIHZv
aWQgKmRhdGEpCiAJcmV0dXJuIGRldi0+b2Zfbm9kZSA9PSBkYXRhOwogfQogCitzdGF0aWMgaW50
IGtpcmluX2RybV9jb25uZWN0b3JzX3JlZ2lzdGVyKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCit7
CisJc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcjsKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3Rv
ciAqZmFpbGVkX2Nvbm5lY3RvcjsKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXIgY29u
bl9pdGVyOworCWludCByZXQ7CisKKwltdXRleF9sb2NrKCZkZXYtPm1vZGVfY29uZmlnLm11dGV4
KTsKKwlkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9iZWdpbihkZXYsICZjb25uX2l0ZXIpOworCWRy
bV9mb3JfZWFjaF9jb25uZWN0b3JfaXRlcihjb25uZWN0b3IsICZjb25uX2l0ZXIpIHsKKwkJcmV0
ID0gZHJtX2Nvbm5lY3Rvcl9yZWdpc3Rlcihjb25uZWN0b3IpOworCQlpZiAocmV0KSB7CisJCQlm
YWlsZWRfY29ubmVjdG9yID0gY29ubmVjdG9yOworCQkJZ290byBlcnI7CisJCX0KKwl9CisJZHJt
X2Nvbm5lY3Rvcl9saXN0X2l0ZXJfZW5kKCZjb25uX2l0ZXIpOworCW11dGV4X3VubG9jaygmZGV2
LT5tb2RlX2NvbmZpZy5tdXRleCk7CisKKwlyZXR1cm4gMDsKKworZXJyOgorCWRybV9jb25uZWN0
b3JfbGlzdF9pdGVyX2JlZ2luKGRldiwgJmNvbm5faXRlcik7CisJZHJtX2Zvcl9lYWNoX2Nvbm5l
Y3Rvcl9pdGVyKGNvbm5lY3RvciwgJmNvbm5faXRlcikgeworCQlpZiAoZmFpbGVkX2Nvbm5lY3Rv
ciA9PSBjb25uZWN0b3IpCisJCQlicmVhazsKKwkJZHJtX2Nvbm5lY3Rvcl91bnJlZ2lzdGVyKGNv
bm5lY3Rvcik7CisJfQorCWRybV9jb25uZWN0b3JfbGlzdF9pdGVyX2VuZCgmY29ubl9pdGVyKTsK
KwltdXRleF91bmxvY2soJmRldi0+bW9kZV9jb25maWcubXV0ZXgpOworCisJcmV0dXJuIHJldDsK
K30KKwogc3RhdGljIGludCBraXJpbl9kcm1fYmluZChzdHJ1Y3QgZGV2aWNlICpkZXYpCiB7CiAJ
c3RydWN0IGRybV9kZXZpY2UgKmRybV9kZXY7CkBAIC0xMTcsOCArMTUxLDE3IEBAIHN0YXRpYyBp
bnQga2lyaW5fZHJtX2JpbmQoc3RydWN0IGRldmljZSAqZGV2KQogCiAJZHJtX2ZiZGV2X2dlbmVy
aWNfc2V0dXAoZHJtX2RldiwgMzIpOwogCisJLyogY29ubmVjdG9ycyBzaG91bGQgYmUgcmVnaXN0
ZXJlZCBhZnRlciBkcm0gZGV2aWNlIHJlZ2lzdGVyICovCisJaWYgKGRyaXZlcl9kYXRhLT5yZWdp
c3Rlcl9jb25uZWN0cykgeworCQlyZXQgPSBraXJpbl9kcm1fY29ubmVjdG9yc19yZWdpc3Rlcihk
cm1fZGV2KTsKKwkJaWYgKHJldCkKKwkJCWdvdG8gZXJyX2RybV9kZXZfdW5yZWdpc3RlcjsKKwl9
CisKIAlyZXR1cm4gMDsKIAorZXJyX2RybV9kZXZfdW5yZWdpc3RlcjoKKwlkcm1fZGV2X3VucmVn
aXN0ZXIoZHJtX2Rldik7CiBlcnJfa21zX2NsZWFudXA6CiAJa2lyaW5fZHJtX2ttc19jbGVhbnVw
KGRybV9kZXYpOwogZXJyX2RybV9kZXZfcHV0OgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaGlzaWxp
Y29uL2tpcmluL2tpcmluX2RybV9kcnYuaAppbmRleCBmZGJmYzRhOTBmMjIuLjk1ZjU2Yzk5NjBk
NSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1f
ZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fZHJ2
LmgKQEAgLTM5LDYgKzM5LDcgQEAgc3RydWN0IGtpcmluX2RybV9kYXRhIHsKIAl1MzIgY2hhbm5l
bF9mb3JtYXRzX2NudDsKIAlpbnQgY29uZmlnX21heF93aWR0aDsKIAlpbnQgY29uZmlnX21heF9o
ZWlnaHQ7CisJYm9vbCByZWdpc3Rlcl9jb25uZWN0czsKIAl1MzIgbnVtX3BsYW5lczsKIAl1MzIg
cHJpbV9wbGFuZTsKIAotLSAKMi4xNy4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0
aW5mby9kcmktZGV2ZWw=
