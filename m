Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id EB232FA946
	for <lists+dri-devel@lfdr.de>; Wed, 13 Nov 2019 05:58:45 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7189C6E488;
	Wed, 13 Nov 2019 04:58:41 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from NAM05-CO1-obe.outbound.protection.outlook.com
 (mail-eopbgr720055.outbound.protection.outlook.com [40.107.72.55])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B8FD76E488
 for <dri-devel@lists.freedesktop.org>; Wed, 13 Nov 2019 04:58:39 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=KDa057xyYgNjZvK9ci14+1mBAh3qFXlPDGVRiITac7UFxblZyWbeOmdBTQYkyzC60mCTcu8kbfwWYR3HpngGNwblD2UW5Qjzlh68DIvJpEHc7LrxMxZXh3CdYDK7FNuUlQPk1FUQoaS4XQk8bwLvVFEkUChiH51/8tIKv5AO7YX74Aoo7aZvk6QoYyXVeAub4fCZwmXphIErzuTdzcX720y4Xa7+lDQRulQRg1DjcazVMqpyRCpI+XIdj54ZIhDgtzLRK9TlpK4MitDp0yLUmwKiBaoWonZ72W+hH+iYnh4W6cWPGmlHg/4b5IOei6oAF6UaN1EXTYFoGmSpYj1t/Q==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=HMkkTuG4zdmykn9q4I9EayMYAKK26rS4i36QHevCQBg=;
 b=j6vQF1YfGka4WRIQpyrn31RwAde5bx9RlnDmHqcv6fxjkyfpavtdSnh/b+d6xTn71nDql8uk7x51SHD3w4N/W04tJyythJ18Ve59qcDg89uoEwS7+3KtVnj9BhwY95FFcXB9V1bLsBo3rMx+xAEfz88026vyfRm6KgHYOd2QDVZLC8QUcQKgEF7JucujMNzbzT7y3Kz7Joi/6zZUhKhqc2gfui2WKr/zXYV2nDUWRrFAGI0GYleWENru6hXgGJajSAr+DY7f7ebXa4zKAwCGpbi8JNWGoroPcJr7thh/1Y88ONcM1gENqyCVVii/SCQWJVM5+fxpEVWomhQMZAPYvQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
Received: from MN2PR12MB3312.namprd12.prod.outlook.com (20.179.80.215) by
 MN2PR12MB2928.namprd12.prod.outlook.com (20.179.83.91) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2430.24; Wed, 13 Nov 2019 04:58:37 +0000
Received: from MN2PR12MB3312.namprd12.prod.outlook.com
 ([fe80::39b7:e01c:5800:3c00]) by MN2PR12MB3312.namprd12.prod.outlook.com
 ([fe80::39b7:e01c:5800:3c00%6]) with mapi id 15.20.2430.027; Wed, 13 Nov 2019
 04:58:37 +0000
From: Flora Cui <flora.cui@amd.com>
To: brahma_hybrid_dev@amd.com,
	dri-devel@lists.freedesktop.org
Subject: [PATCH libdrm 2/4] tests/amdgpu: add bad slow dispatch test
Date: Wed, 13 Nov 2019 12:58:10 +0800
Message-Id: <20191113045812.24465-2-flora.cui@amd.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20191113045812.24465-1-flora.cui@amd.com>
References: <20191113045812.24465-1-flora.cui@amd.com>
X-ClientProxiedBy: HK0P153CA0042.APCP153.PROD.OUTLOOK.COM
 (2603:1096:203:17::30) To MN2PR12MB3312.namprd12.prod.outlook.com
 (2603:10b6:208:ab::23)
MIME-Version: 1.0
X-Mailer: git-send-email 2.17.1
X-Originating-IP: [180.167.199.189]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: 776cce40-333a-4bf2-8942-08d767f624d9
X-MS-TrafficTypeDiagnostic: MN2PR12MB2928:
X-LD-Processed: 3dd8961f-e488-4e60-8e11-a82d994e183d,ExtAddr
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <MN2PR12MB29280C1D61796CF95DE1F397FA760@MN2PR12MB2928.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:565;
X-Forefront-PRVS: 0220D4B98D
X-Forefront-Antispam-Report: SFV:NSPM;
 SFS:(10009020)(4636009)(39860400002)(376002)(366004)(136003)(346002)(396003)(199004)(189003)(316002)(81156014)(44832011)(51416003)(52116002)(14454004)(186003)(81166006)(25786009)(2906002)(8936002)(305945005)(486006)(50226002)(7736002)(76176011)(1076003)(26005)(5660300002)(8676002)(66066001)(6666004)(36756003)(386003)(6506007)(99286004)(6116002)(14444005)(6486002)(66946007)(446003)(47776003)(11346002)(476003)(6436002)(66556008)(48376002)(3846002)(16586007)(478600001)(4326008)(86362001)(50466002)(66476007)(30864003)(2616005)(6512007);
 DIR:OUT; SFP:1101; SCL:1; SRVR:MN2PR12MB2928;
 H:MN2PR12MB3312.namprd12.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
Received-SPF: None (protection.outlook.com: amd.com does not designate
 permitted sender hosts)
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: 2GsUdNmCXimd35PW9gaL04NbjkaROma8l4hVhm0rLatYvzL5K2PZ+0LhXHjyzDM7ZH3O2CJq0aNk/fr7yKE9XvLjh+9sQUrDvNYPaDJrui1vucEJp4joWM8kFU5BakGoPHZjObJs7t45Lg3OxSWeAACvho0NVC28CQs9Y1EeDOXqaPa2TxDnyYTs0gcmHYuLLhUIeipA+kiRu+hXDrQSpKnWi83tyKkFDYu4rorgj9yrsSSmJzrAb4/eBfRol4fYIjbQKxIfv0bvU2ltNLwNHUrFvIL817l+YAgHVJ6iZ6F+kYqcCUSdvJB42wyETYuhiHacxr/8k/AAqQNUQWf/1WaJwkgHq6SZ9QM2NumWrJBQW7nLUOTA0WbDCyHeR78/mNTi8hbvBMp58sfQ9BT9qoPNDy/xMuDsMmXe3/Urn+Ydf5XAUkcCHGstiFxESJP1
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 776cce40-333a-4bf2-8942-08d767f624d9
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 13 Nov 2019 04:58:37.8933 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: 3cbdcN2NoZmpa97AXpC2IU9U/ovsR2Nvxdoe5MmrZpvpG6vqleTLu4UlL9u6k0q/
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB2928
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=HMkkTuG4zdmykn9q4I9EayMYAKK26rS4i36QHevCQBg=;
 b=mbfMQtZTpd7RMEAwVudaLL7GsqQJ0yo8fUy6UjoYal1bSh93ZGkiHgevrU+cTlsFwroAV2oY7GkAyd675vPmsFA3I0w9wUGDM59f+ROnGOru/89e2OB585VP1/raYnOqPt7tS472llFH4AfAXfBSkOrbF413hwIwz5h4lHvBTrY=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Flora.Cui@amd.com; 
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Flora Cui <flora.cui@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

YWRkIGdmeC9jb21wdXRlIGJhZCBzbG93IGRpc3BhdGNoIHRlc3QgZm9yIGdmeDkKClNpZ25lZC1v
ZmYtYnk6IEZsb3JhIEN1aSA8ZmxvcmEuY3VpQGFtZC5jb20+Ci0tLQogdGVzdHMvYW1kZ3B1L2Ft
ZGdwdV90ZXN0LmMgICAgfCAgMTIgKysKIHRlc3RzL2FtZGdwdS9hbWRncHVfdGVzdC5oICAgIHwg
ICAxICsKIHRlc3RzL2FtZGdwdS9iYXNpY190ZXN0cy5jICAgIHwgMjI5ICsrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKy0KIHRlc3RzL2FtZGdwdS9kZWFkbG9ja190ZXN0cy5jIHwgIDE0
ICsrKwogNCBmaWxlcyBjaGFuZ2VkLCAyNTUgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQoK
ZGlmZiAtLWdpdCBhL3Rlc3RzL2FtZGdwdS9hbWRncHVfdGVzdC5jIGIvdGVzdHMvYW1kZ3B1L2Ft
ZGdwdV90ZXN0LmMKaW5kZXggM2FjOWQ4ZDIuLmJmZjkwZWQ2IDEwMDY0NAotLS0gYS90ZXN0cy9h
bWRncHUvYW1kZ3B1X3Rlc3QuYworKysgYi90ZXN0cy9hbWRncHUvYW1kZ3B1X3Rlc3QuYwpAQCAt
NDcyLDYgKzQ3MiwxOCBAQCBzdGF0aWMgdm9pZCBhbWRncHVfZGlzYWJsZV9zdWl0ZXMoKQogCQkJ
CSJjb21wdXRlIHJpbmcgYmFkIGRpc3BhdGNoIHRlc3QgKHNldCBhbWRncHUubG9ja3VwX3RpbWVv
dXQ9NTApIiwgQ1VfRkFMU0UpKQogCQkJZnByaW50ZihzdGRlcnIsICJ0ZXN0IGRlYWN0aXZhdGlv
biBmYWlsZWQgLSAlc1xuIiwgQ1VfZ2V0X2Vycm9yX21zZygpKTsKIAorCS8qIFRoaXMgdGVzdCB3
YXMgcmFuIG9uIEdGWDkgb25seSAqLworCS8vaWYgKGZhbWlseV9pZCA8IEFNREdQVV9GQU1JTFlf
QUkgfHwgZmFtaWx5X2lkID4gQU1ER1BVX0ZBTUlMWV9SVikKKwkJaWYgKGFtZGdwdV9zZXRfdGVz
dF9hY3RpdmUoREVBRExPQ0tfVEVTVFNfU1RSLAorCQkJCSJnZnggcmluZyBiYWQgc2xvdyBkaXNw
YXRjaCB0ZXN0IChzZXQgYW1kZ3B1LmxvY2t1cF90aW1lb3V0PTUwKSIsIENVX0ZBTFNFKSkKKwkJ
CWZwcmludGYoc3RkZXJyLCAidGVzdCBkZWFjdGl2YXRpb24gZmFpbGVkIC0gJXNcbiIsIENVX2dl
dF9lcnJvcl9tc2coKSk7CisKKwkvKiBUaGlzIHRlc3Qgd2FzIHJhbiBvbiBHRlg5IG9ubHkgKi8K
KwkvL2lmIChmYW1pbHlfaWQgPCBBTURHUFVfRkFNSUxZX0FJIHx8IGZhbWlseV9pZCA+IEFNREdQ
VV9GQU1JTFlfUlYpCisJCWlmIChhbWRncHVfc2V0X3Rlc3RfYWN0aXZlKERFQURMT0NLX1RFU1RT
X1NUUiwKKwkJCQkiY29tcHV0ZSByaW5nIGJhZCBzbG93IGRpc3BhdGNoIHRlc3QgKHNldCBhbWRn
cHUubG9ja3VwX3RpbWVvdXQ9NTAsNTApIiwgQ1VfRkFMU0UpKQorCQkJZnByaW50ZihzdGRlcnIs
ICJ0ZXN0IGRlYWN0aXZhdGlvbiBmYWlsZWQgLSAlc1xuIiwgQ1VfZ2V0X2Vycm9yX21zZygpKTsK
KwogCWlmIChhbWRncHVfc2V0X3Rlc3RfYWN0aXZlKEJPX1RFU1RTX1NUUiwgIk1ldGFkYXRhIiwg
Q1VfRkFMU0UpKQogCQlmcHJpbnRmKHN0ZGVyciwgInRlc3QgZGVhY3RpdmF0aW9uIGZhaWxlZCAt
ICVzXG4iLCBDVV9nZXRfZXJyb3JfbXNnKCkpOwogCmRpZmYgLS1naXQgYS90ZXN0cy9hbWRncHUv
YW1kZ3B1X3Rlc3QuaCBiL3Rlc3RzL2FtZGdwdS9hbWRncHVfdGVzdC5oCmluZGV4IDJiMDFiZjQx
Li42NTFlNGJhZiAxMDA2NDQKLS0tIGEvdGVzdHMvYW1kZ3B1L2FtZGdwdV90ZXN0LmgKKysrIGIv
dGVzdHMvYW1kZ3B1L2FtZGdwdV90ZXN0LmgKQEAgLTI0Miw2ICsyNDIsNyBAQCBDVV9CT09MIHN1
aXRlX3N5bmNvYmpfdGltZWxpbmVfdGVzdHNfZW5hYmxlKHZvaWQpOwogZXh0ZXJuIENVX1Rlc3RJ
bmZvIHN5bmNvYmpfdGltZWxpbmVfdGVzdHNbXTsKIAogdm9pZCBhbWRncHVfZGlzcGF0Y2hfaGFu
Z19oZWxwZXIoYW1kZ3B1X2RldmljZV9oYW5kbGUgZGV2aWNlX2hhbmRsZSwgdWludDMyX3QgaXBf
dHlwZSk7Cit2b2lkIGFtZGdwdV9kaXNwYXRjaF9oYW5nX3Nsb3dfaGVscGVyKGFtZGdwdV9kZXZp
Y2VfaGFuZGxlIGRldmljZV9oYW5kbGUsIHVpbnQzMl90IGlwX3R5cGUpOwogCiAvKioKICAqIEhl
bHBlciBmdW5jdGlvbnMKZGlmZiAtLWdpdCBhL3Rlc3RzL2FtZGdwdS9iYXNpY190ZXN0cy5jIGIv
dGVzdHMvYW1kZ3B1L2Jhc2ljX3Rlc3RzLmMKaW5kZXggNzFjOTIyMGQuLjIwZTk0OWNjIDEwMDY0
NAotLS0gYS90ZXN0cy9hbWRncHUvYmFzaWNfdGVzdHMuYworKysgYi90ZXN0cy9hbWRncHUvYmFz
aWNfdGVzdHMuYwpAQCAtMzEyLDcgKzMxMiw4IEBAIHN0YXRpYyAgdWludDMyX3Qgc2hhZGVyX2Jp
bltdID0gewogZW51bSBjc190eXBlIHsKIAlDU19CVUZGRVJDTEVBUiwKIAlDU19CVUZGRVJDT1BZ
LAotCUNTX0hBTkcKKwlDU19IQU5HLAorCUNTX0hBTkdfU0xPVwogfTsKIAogc3RhdGljIGNvbnN0
IHVpbnQzMl90IGJ1ZmZlcmNsZWFyX2NzX3NoYWRlcl9nZng5W10gPSB7CkBAIC00ODIsNiArNDgz
LDM3IEBAIHVuc2lnbmVkIGludCBtZW1jcHlfcHNfaGFuZ1tdID0gewogICAgICAgICAweEY4MDAx
ODBGLCAweDAzMDIwMTAwLCAweEJGODEwMDAwCiB9OwogCitzdHJ1Y3QgYW1kZ3B1X3Rlc3Rfc2hh
ZGVyIHsKKwl1aW50MzJfdCAqc2hhZGVyOworCXVpbnQzMl90IGhlYWRlcl9sZW5ndGg7CisJdWlu
dDMyX3QgYm9keV9sZW5ndGg7CisJdWludDMyX3QgZm9vdF9sZW5ndGg7Cit9OworCit1bnNpZ25l
ZCBpbnQgbWVtY3B5X2NzX2hhbmdfc2xvd19haV9jb2Rlc1tdID0geworICAgIDB4ZDFmZDAwMDAs
IDB4MDQwMTBjMDgsIDB4ZTAwYzIwMDAsIDB4ODAwMDAxMDAsCisgICAgMHhiZjhjMGY3MCwgMHhl
MDFjMjAwMCwgMHg4MDAxMDEwMCwgMHhiZjgxMDAwMAorfTsKKworc3RydWN0IGFtZGdwdV90ZXN0
X3NoYWRlciBtZW1jcHlfY3NfaGFuZ19zbG93X2FpID0geworICAgICAgICBtZW1jcHlfY3NfaGFu
Z19zbG93X2FpX2NvZGVzLAorICAgICAgICA0LAorICAgICAgICAzLAorICAgICAgICAxCit9Owor
Cit1bnNpZ25lZCBpbnQgbWVtY3B5X2NzX2hhbmdfc2xvd19ydl9jb2Rlc1tdID0geworICAgIDB4
OGUwMDg2MGMsIDB4MzIwMDAwMDAsIDB4ZTAwYzIwMDAsIDB4ODAwMTAxMDAsCisgICAgMHhiZjhj
MGY3MCwgMHhlMDFjMjAwMCwgMHg4MDAyMDEwMCwgMHhiZjgxMDAwMAorfTsKKworc3RydWN0IGFt
ZGdwdV90ZXN0X3NoYWRlciBtZW1jcHlfY3NfaGFuZ19zbG93X3J2ID0geworICAgICAgICBtZW1j
cHlfY3NfaGFuZ19zbG93X3J2X2NvZGVzLAorICAgICAgICA0LAorICAgICAgICAzLAorICAgICAg
ICAxCit9OworCiBpbnQgYW1kZ3B1X2JvX2FsbG9jX2FuZF9tYXBfcmF3KGFtZGdwdV9kZXZpY2Vf
aGFuZGxlIGRldiwgdW5zaWduZWQgc2l6ZSwKIAkJCXVuc2lnbmVkIGFsaWdubWVudCwgdW5zaWdu
ZWQgaGVhcCwgdWludDY0X3QgYWxsb2NfZmxhZ3MsCiAJCQl1aW50NjRfdCBtYXBwaW5nX2ZsYWdz
LCBhbWRncHVfYm9faGFuZGxlICpibywgdm9pZCAqKmNwdSwKQEAgLTIxODMsNiArMjIxNSwzNyBA
QCBzdGF0aWMgdm9pZCBhbWRncHVfc3luY19kZXBlbmRlbmN5X3Rlc3Qodm9pZCkKIAlmcmVlKGli
c19yZXF1ZXN0LmRlcGVuZGVuY2llcyk7CiB9CiAKK3N0YXRpYyBpbnQgYW1kZ3B1X2Rpc3BhdGNo
X2xvYWRfY3Nfc2hhZGVyX2hhbmdfc2xvdyh1aW50MzJfdCAqcHRyLCBpbnQgZmFtaWx5KQorewor
CXN0cnVjdCBhbWRncHVfdGVzdF9zaGFkZXIgKnNoYWRlcjsKKwlpbnQgaSwgbG9vcCA9IDB4MTAw
MDA7CisKKwlzd2l0Y2ggKGZhbWlseSkgeworCQljYXNlIEFNREdQVV9GQU1JTFlfQUk6CisJCQlz
aGFkZXIgPSAmbWVtY3B5X2NzX2hhbmdfc2xvd19haTsKKwkJCWJyZWFrOworCQljYXNlIEFNREdQ
VV9GQU1JTFlfUlY6CisJCQlzaGFkZXIgPSAmbWVtY3B5X2NzX2hhbmdfc2xvd19ydjsKKwkJCWJy
ZWFrOworCQlkZWZhdWx0OgorCQkJcmV0dXJuIC0xOworCQkJYnJlYWs7CisJfQorCisJbWVtY3B5
KHB0ciwgc2hhZGVyLT5zaGFkZXIsIHNoYWRlci0+aGVhZGVyX2xlbmd0aCAqIHNpemVvZih1aW50
MzJfdCkpOworCisJZm9yIChpID0gMDsgaSA8IGxvb3A7IGkrKykKKwkJbWVtY3B5KHB0ciArIHNo
YWRlci0+aGVhZGVyX2xlbmd0aCArIHNoYWRlci0+Ym9keV9sZW5ndGggKiBpLAorCQkJc2hhZGVy
LT5zaGFkZXIgKyBzaGFkZXItPmhlYWRlcl9sZW5ndGgsCisJCQlzaGFkZXItPmJvZHlfbGVuZ3Ro
ICogc2l6ZW9mKHVpbnQzMl90KSk7CisKKwltZW1jcHkocHRyICsgc2hhZGVyLT5oZWFkZXJfbGVu
Z3RoICsgc2hhZGVyLT5ib2R5X2xlbmd0aCAqIGxvb3AsCisJCXNoYWRlci0+c2hhZGVyICsgc2hh
ZGVyLT5oZWFkZXJfbGVuZ3RoICsgc2hhZGVyLT5ib2R5X2xlbmd0aCwKKwkJc2hhZGVyLT5mb290
X2xlbmd0aCAqIHNpemVvZih1aW50MzJfdCkpOworCisJcmV0dXJuIDA7Cit9CisKIHN0YXRpYyBp
bnQgYW1kZ3B1X2Rpc3BhdGNoX2xvYWRfY3Nfc2hhZGVyKHVpbnQ4X3QgKnB0ciwKIAkJCQkJICAg
aW50IGNzX3R5cGUpCiB7CkBAIC0yNjM1LDYgKzI2OTgsMTcwIEBAIHZvaWQgYW1kZ3B1X2Rpc3Bh
dGNoX2hhbmdfaGVscGVyKGFtZGdwdV9kZXZpY2VfaGFuZGxlIGRldmljZV9oYW5kbGUsIHVpbnQz
Ml90IGlwCiAJfQogfQogCitzdGF0aWMgdm9pZCBhbWRncHVfbWVtY3B5X2Rpc3BhdGNoX2hhbmdf
c2xvd190ZXN0KGFtZGdwdV9kZXZpY2VfaGFuZGxlIGRldmljZV9oYW5kbGUsCisJCQkJCQkgIHVp
bnQzMl90IGlwX3R5cGUsIHVpbnQzMl90IHJpbmcpCit7CisJYW1kZ3B1X2NvbnRleHRfaGFuZGxl
IGNvbnRleHRfaGFuZGxlOworCWFtZGdwdV9ib19oYW5kbGUgYm9fc3JjLCBib19kc3QsIGJvX3No
YWRlciwgYm9fY21kLCByZXNvdXJjZXNbNF07CisJdm9sYXRpbGUgdW5zaWduZWQgY2hhciAqcHRy
X2RzdDsKKwl2b2lkICpwdHJfc2hhZGVyOworCXVuc2lnbmVkIGNoYXIgKnB0cl9zcmM7CisJdWlu
dDMyX3QgKnB0cl9jbWQ7CisJdWludDY0X3QgbWNfYWRkcmVzc19zcmMsIG1jX2FkZHJlc3NfZHN0
LCBtY19hZGRyZXNzX3NoYWRlciwgbWNfYWRkcmVzc19jbWQ7CisJYW1kZ3B1X3ZhX2hhbmRsZSB2
YV9zcmMsIHZhX2RzdCwgdmFfc2hhZGVyLCB2YV9jbWQ7CisJaW50IGksIHI7CisJaW50IGJvX2Rz
dF9zaXplID0gMHg0MDAwMDAwOworCWludCBib19zaGFkZXJfc2l6ZSA9IDB4NDAwMDAwOworCWlu
dCBib19jbWRfc2l6ZSA9IDQwOTY7CisJc3RydWN0IGFtZGdwdV9jc19yZXF1ZXN0IGlic19yZXF1
ZXN0ID0gezB9OworCXN0cnVjdCBhbWRncHVfY3NfaWJfaW5mbyBpYl9pbmZvPSB7MH07CisJdWlu
dDMyX3QgaGFuZ19zdGF0ZSwgaGFuZ3MsIGV4cGlyZWQ7CisJc3RydWN0IGFtZGdwdV9ncHVfaW5m
byBncHVfaW5mbyA9IHswfTsKKwlhbWRncHVfYm9fbGlzdF9oYW5kbGUgYm9fbGlzdDsKKwlzdHJ1
Y3QgYW1kZ3B1X2NzX2ZlbmNlIGZlbmNlX3N0YXR1cyA9IHswfTsKKworCXIgPSBhbWRncHVfcXVl
cnlfZ3B1X2luZm8oZGV2aWNlX2hhbmRsZSwgJmdwdV9pbmZvKTsKKwlDVV9BU1NFUlRfRVFVQUwo
ciwgMCk7CisKKwlyID0gYW1kZ3B1X2NzX2N0eF9jcmVhdGUoZGV2aWNlX2hhbmRsZSwgJmNvbnRl
eHRfaGFuZGxlKTsKKwlDVV9BU1NFUlRfRVFVQUwociwgMCk7CisKKwlyID0gYW1kZ3B1X2JvX2Fs
bG9jX2FuZF9tYXAoZGV2aWNlX2hhbmRsZSwgYm9fY21kX3NpemUsIDQwOTYsCisJCQkJICAgIEFN
REdQVV9HRU1fRE9NQUlOX0dUVCwgMCwKKwkJCQkgICAgJmJvX2NtZCwgKHZvaWQgKiopJnB0cl9j
bWQsCisJCQkJICAgICZtY19hZGRyZXNzX2NtZCwgJnZhX2NtZCk7CisJQ1VfQVNTRVJUX0VRVUFM
KHIsIDApOworCW1lbXNldChwdHJfY21kLCAwLCBib19jbWRfc2l6ZSk7CisKKwlyID0gYW1kZ3B1
X2JvX2FsbG9jX2FuZF9tYXAoZGV2aWNlX2hhbmRsZSwgYm9fc2hhZGVyX3NpemUsIDQwOTYsCisJ
CQkJCUFNREdQVV9HRU1fRE9NQUlOX1ZSQU0sIDAsCisJCQkJCSZib19zaGFkZXIsICZwdHJfc2hh
ZGVyLAorCQkJCQkmbWNfYWRkcmVzc19zaGFkZXIsICZ2YV9zaGFkZXIpOworCUNVX0FTU0VSVF9F
UVVBTChyLCAwKTsKKwltZW1zZXQocHRyX3NoYWRlciwgMCwgYm9fc2hhZGVyX3NpemUpOworCisJ
ciA9IGFtZGdwdV9kaXNwYXRjaF9sb2FkX2NzX3NoYWRlcl9oYW5nX3Nsb3cocHRyX3NoYWRlciwg
Z3B1X2luZm8uZmFtaWx5X2lkKTsKKwlDVV9BU1NFUlRfRVFVQUwociwgMCk7CisKKwlyID0gYW1k
Z3B1X2JvX2FsbG9jX2FuZF9tYXAoZGV2aWNlX2hhbmRsZSwgYm9fZHN0X3NpemUsIDQwOTYsCisJ
CQkJCUFNREdQVV9HRU1fRE9NQUlOX1ZSQU0sIDAsCisJCQkJCSZib19zcmMsICh2b2lkICoqKSZw
dHJfc3JjLAorCQkJCQkmbWNfYWRkcmVzc19zcmMsICZ2YV9zcmMpOworCUNVX0FTU0VSVF9FUVVB
TChyLCAwKTsKKworCXIgPSBhbWRncHVfYm9fYWxsb2NfYW5kX21hcChkZXZpY2VfaGFuZGxlLCBi
b19kc3Rfc2l6ZSwgNDA5NiwKKwkJCQkJQU1ER1BVX0dFTV9ET01BSU5fVlJBTSwgMCwKKwkJCQkJ
JmJvX2RzdCwgKHZvaWQgKiopJnB0cl9kc3QsCisJCQkJCSZtY19hZGRyZXNzX2RzdCwgJnZhX2Rz
dCk7CisJQ1VfQVNTRVJUX0VRVUFMKHIsIDApOworCisJbWVtc2V0KHB0cl9zcmMsIDB4NTUsIGJv
X2RzdF9zaXplKTsKKworCWkgPSAwOworCWkgKz0gYW1kZ3B1X2Rpc3BhdGNoX2luaXQocHRyX2Nt
ZCArIGksIGlwX3R5cGUpOworCisJLyogIElzc3VlIGNvbW1hbmRzIHRvIHNldCBjdSBtYXNrIHVz
ZWQgaW4gY3VycmVudCBkaXNwYXRjaCAqLworCWkgKz0gYW1kZ3B1X2Rpc3BhdGNoX3dyaXRlX2N1
bWFzayhwdHJfY21kICsgaSk7CisKKwkvKiBXcml0ZXMgc2hhZGVyIHN0YXRlIHRvIEhXICovCisJ
aSArPSBhbWRncHVfZGlzcGF0Y2hfd3JpdGUyaHcocHRyX2NtZCArIGksIG1jX2FkZHJlc3Nfc2hh
ZGVyKTsKKworCS8qIFdyaXRlIGNvbnN0YW50IGRhdGEgKi8KKwkvKiBXcml0ZXMgdGhlIHRleHR1
cmUgcmVzb3VyY2UgY29uc3RhbnRzIGRhdGEgdG8gdGhlIFNHUFJzICovCisJcHRyX2NtZFtpKytd
ID0gUEFDS0VUM19DT01QVVRFKFBLVDNfU0VUX1NIX1JFRywgNCk7CisJcHRyX2NtZFtpKytdID0g
MHgyNDA7CisJcHRyX2NtZFtpKytdID0gbWNfYWRkcmVzc19zcmM7CisJcHRyX2NtZFtpKytdID0g
KG1jX2FkZHJlc3Nfc3JjID4+IDMyKSB8IDB4MTAwMDAwOworCXB0cl9jbWRbaSsrXSA9IDB4NDAw
MDAwOworCXB0cl9jbWRbaSsrXSA9IDB4NzRmYWM7CisKKwkvKiBXcml0ZXMgdGhlIFVBViBjb25z
dGFudCBkYXRhIHRvIHRoZSBTR1BScy4gKi8KKwlwdHJfY21kW2krK10gPSBQQUNLRVQzX0NPTVBV
VEUoUEtUM19TRVRfU0hfUkVHLCA0KTsKKwlwdHJfY21kW2krK10gPSAweDI0NDsKKwlwdHJfY21k
W2krK10gPSBtY19hZGRyZXNzX2RzdDsKKwlwdHJfY21kW2krK10gPSAobWNfYWRkcmVzc19kc3Qg
Pj4gMzIpIHwgMHgxMDAwMDA7CisJcHRyX2NtZFtpKytdID0gMHg0MDAwMDA7CisJcHRyX2NtZFtp
KytdID0gMHg3NGZhYzsKKworCS8qIGRpc3BhdGNoIGRpcmVjdCBjb21tYW5kICovCisJcHRyX2Nt
ZFtpKytdID0gUEFDS0VUM19DT01QVVRFKFBBQ0tFVDNfRElTUEFUQ0hfRElSRUNULCAzKTsKKwlw
dHJfY21kW2krK10gPSAweDEwMDAwOworCXB0cl9jbWRbaSsrXSA9IDE7CisJcHRyX2NtZFtpKytd
ID0gMTsKKwlwdHJfY21kW2krK10gPSAxOworCisJd2hpbGUgKGkgJiA3KQorCQlwdHJfY21kW2kr
K10gPSAweGZmZmYxMDAwOyAvKiB0eXBlMyBub3AgcGFja2V0ICovCisKKwlyZXNvdXJjZXNbMF0g
PSBib19zaGFkZXI7CisJcmVzb3VyY2VzWzFdID0gYm9fc3JjOworCXJlc291cmNlc1syXSA9IGJv
X2RzdDsKKwlyZXNvdXJjZXNbM10gPSBib19jbWQ7CisJciA9IGFtZGdwdV9ib19saXN0X2NyZWF0
ZShkZXZpY2VfaGFuZGxlLCA0LCByZXNvdXJjZXMsIE5VTEwsICZib19saXN0KTsKKwlDVV9BU1NF
UlRfRVFVQUwociwgMCk7CisKKwlpYl9pbmZvLmliX21jX2FkZHJlc3MgPSBtY19hZGRyZXNzX2Nt
ZDsKKwlpYl9pbmZvLnNpemUgPSBpOworCWlic19yZXF1ZXN0LmlwX3R5cGUgPSBpcF90eXBlOwor
CWlic19yZXF1ZXN0LnJpbmcgPSByaW5nOworCWlic19yZXF1ZXN0LnJlc291cmNlcyA9IGJvX2xp
c3Q7CisJaWJzX3JlcXVlc3QubnVtYmVyX29mX2licyA9IDE7CisJaWJzX3JlcXVlc3QuaWJzID0g
JmliX2luZm87CisJaWJzX3JlcXVlc3QuZmVuY2VfaW5mby5oYW5kbGUgPSBOVUxMOworCXIgPSBh
bWRncHVfY3Nfc3VibWl0KGNvbnRleHRfaGFuZGxlLCAwLCAmaWJzX3JlcXVlc3QsIDEpOworCUNV
X0FTU0VSVF9FUVVBTChyLCAwKTsKKworCWZlbmNlX3N0YXR1cy5pcF90eXBlID0gaXBfdHlwZTsK
KwlmZW5jZV9zdGF0dXMuaXBfaW5zdGFuY2UgPSAwOworCWZlbmNlX3N0YXR1cy5yaW5nID0gcmlu
ZzsKKwlmZW5jZV9zdGF0dXMuY29udGV4dCA9IGNvbnRleHRfaGFuZGxlOworCWZlbmNlX3N0YXR1
cy5mZW5jZSA9IGlic19yZXF1ZXN0LnNlcV9ubzsKKworCS8qIHdhaXQgZm9yIElCIGFjY29tcGxp
c2hlZCAqLworCXIgPSBhbWRncHVfY3NfcXVlcnlfZmVuY2Vfc3RhdHVzKCZmZW5jZV9zdGF0dXMs
CisJCQkJCSBBTURHUFVfVElNRU9VVF9JTkZJTklURSwKKwkJCQkJIDAsICZleHBpcmVkKTsKKwor
CXIgPSBhbWRncHVfY3NfcXVlcnlfcmVzZXRfc3RhdGUoY29udGV4dF9oYW5kbGUsICZoYW5nX3N0
YXRlLCAmaGFuZ3MpOworCUNVX0FTU0VSVF9FUVVBTChyLCAwKTsKKwlDVV9BU1NFUlRfRVFVQUwo
aGFuZ19zdGF0ZSwgQU1ER1BVX0NUWF9VTktOT1dOX1JFU0VUKTsKKworCXIgPSBhbWRncHVfYm9f
bGlzdF9kZXN0cm95KGJvX2xpc3QpOworCUNVX0FTU0VSVF9FUVVBTChyLCAwKTsKKworCXIgPSBh
bWRncHVfYm9fdW5tYXBfYW5kX2ZyZWUoYm9fc3JjLCB2YV9zcmMsIG1jX2FkZHJlc3Nfc3JjLCBi
b19kc3Rfc2l6ZSk7CisJQ1VfQVNTRVJUX0VRVUFMKHIsIDApOworCXIgPSBhbWRncHVfYm9fdW5t
YXBfYW5kX2ZyZWUoYm9fZHN0LCB2YV9kc3QsIG1jX2FkZHJlc3NfZHN0LCBib19kc3Rfc2l6ZSk7
CisJQ1VfQVNTRVJUX0VRVUFMKHIsIDApOworCisJciA9IGFtZGdwdV9ib191bm1hcF9hbmRfZnJl
ZShib19jbWQsIHZhX2NtZCwgbWNfYWRkcmVzc19jbWQsIGJvX2NtZF9zaXplKTsKKwlDVV9BU1NF
UlRfRVFVQUwociwgMCk7CisKKwlyID0gYW1kZ3B1X2JvX3VubWFwX2FuZF9mcmVlKGJvX3NoYWRl
ciwgdmFfc2hhZGVyLCBtY19hZGRyZXNzX3NoYWRlciwgYm9fc2hhZGVyX3NpemUpOworCUNVX0FT
U0VSVF9FUVVBTChyLCAwKTsKKworCXIgPSBhbWRncHVfY3NfY3R4X2ZyZWUoY29udGV4dF9oYW5k
bGUpOworCUNVX0FTU0VSVF9FUVVBTChyLCAwKTsKK30KKwordm9pZCBhbWRncHVfZGlzcGF0Y2hf
aGFuZ19zbG93X2hlbHBlcihhbWRncHVfZGV2aWNlX2hhbmRsZSBkZXZpY2VfaGFuZGxlLCB1aW50
MzJfdCBpcF90eXBlKQoreworCWludCByOworCXN0cnVjdCBkcm1fYW1kZ3B1X2luZm9faHdfaXAg
aW5mbzsKKwl1aW50MzJfdCByaW5nX2lkOworCisJciA9IGFtZGdwdV9xdWVyeV9od19pcF9pbmZv
KGRldmljZV9oYW5kbGUsIGlwX3R5cGUsIDAsICZpbmZvKTsKKwlDVV9BU1NFUlRfRVFVQUwociwg
MCk7CisJaWYgKCFpbmZvLmF2YWlsYWJsZV9yaW5ncykKKwkJcHJpbnRmKCJTS0lQIC4uLiBhcyB0
aGVyZSdzIG5vIHJpbmcgZm9yIGlwICVkXG4iLCBpcF90eXBlKTsKKworCWZvciAocmluZ19pZCA9
IDA7ICgxIDw8IHJpbmdfaWQpICYgaW5mby5hdmFpbGFibGVfcmluZ3M7IHJpbmdfaWQrKykgewor
CQlhbWRncHVfbWVtY3B5X2Rpc3BhdGNoX3Rlc3QoZGV2aWNlX2hhbmRsZSwgaXBfdHlwZSwgcmlu
Z19pZCwgMCk7CisJCWFtZGdwdV9tZW1jcHlfZGlzcGF0Y2hfaGFuZ19zbG93X3Rlc3QoZGV2aWNl
X2hhbmRsZSwgaXBfdHlwZSwgcmluZ19pZCk7CisJCWFtZGdwdV9tZW1jcHlfZGlzcGF0Y2hfdGVz
dChkZXZpY2VfaGFuZGxlLCBpcF90eXBlLCByaW5nX2lkLCAwKTsKKwl9Cit9CisKIHN0YXRpYyBp
bnQgYW1kZ3B1X2RyYXdfbG9hZF9wc19zaGFkZXIodWludDhfdCAqcHRyLCBpbnQgcHNfdHlwZSkK
IHsKIAlpbnQgaTsKZGlmZiAtLWdpdCBhL3Rlc3RzL2FtZGdwdS9kZWFkbG9ja190ZXN0cy5jIGIv
dGVzdHMvYW1kZ3B1L2RlYWRsb2NrX3Rlc3RzLmMKaW5kZXggNjEzNDJkMWEuLjQ0NGUzNDY2IDEw
MDY0NAotLS0gYS90ZXN0cy9hbWRncHUvZGVhZGxvY2tfdGVzdHMuYworKysgYi90ZXN0cy9hbWRn
cHUvZGVhZGxvY2tfdGVzdHMuYwpAQCAtMTE2LDYgKzExNiw4IEBAIHN0YXRpYyB2b2lkIGFtZGdw
dV9pbGxlZ2FsX21lbV9hY2Nlc3MoKTsKIHN0YXRpYyB2b2lkIGFtZGdwdV9kZWFkbG9ja19zZG1h
KHZvaWQpOwogc3RhdGljIHZvaWQgYW1kZ3B1X2Rpc3BhdGNoX2hhbmdfZ2Z4KHZvaWQpOwogc3Rh
dGljIHZvaWQgYW1kZ3B1X2Rpc3BhdGNoX2hhbmdfY29tcHV0ZSh2b2lkKTsKK3N0YXRpYyB2b2lk
IGFtZGdwdV9kaXNwYXRjaF9oYW5nX3Nsb3dfZ2Z4KHZvaWQpOworc3RhdGljIHZvaWQgYW1kZ3B1
X2Rpc3BhdGNoX2hhbmdfc2xvd19jb21wdXRlKHZvaWQpOwogCiBDVV9CT09MIHN1aXRlX2RlYWRs
b2NrX3Rlc3RzX2VuYWJsZSh2b2lkKQogewpAQCAtMTkyLDYgKzE5NCw4IEBAIENVX1Rlc3RJbmZv
IGRlYWRsb2NrX3Rlc3RzW10gPSB7CiAJeyAiaWxsZWdhbCBtZW0gYWNjZXNzIHRlc3QgKHNldCBh
bWRncHUudm1fZmF1bHRfc3RvcD0yKSIsIGFtZGdwdV9pbGxlZ2FsX21lbV9hY2Nlc3MgfSwKIAl7
ICJnZnggcmluZyBiYWQgZGlzcGF0Y2ggdGVzdCAoc2V0IGFtZGdwdS5sb2NrdXBfdGltZW91dD01
MCkiLCBhbWRncHVfZGlzcGF0Y2hfaGFuZ19nZnggfSwKIAl7ICJjb21wdXRlIHJpbmcgYmFkIGRp
c3BhdGNoIHRlc3QgKHNldCBhbWRncHUubG9ja3VwX3RpbWVvdXQ9NTAsNTApIiwgYW1kZ3B1X2Rp
c3BhdGNoX2hhbmdfY29tcHV0ZSB9LAorCXsgImdmeCByaW5nIGJhZCBzbG93IGRpc3BhdGNoIHRl
c3QgKHNldCBhbWRncHUubG9ja3VwX3RpbWVvdXQ9NTApIiwgYW1kZ3B1X2Rpc3BhdGNoX2hhbmdf
c2xvd19nZnggfSwKKwl7ICJjb21wdXRlIHJpbmcgYmFkIHNsb3cgZGlzcGF0Y2ggdGVzdCAoc2V0
IGFtZGdwdS5sb2NrdXBfdGltZW91dD01MCw1MCkiLCBhbWRncHVfZGlzcGF0Y2hfaGFuZ19zbG93
X2NvbXB1dGUgfSwKIAlDVV9URVNUX0lORk9fTlVMTCwKIH07CiAKQEAgLTUwMiwzICs1MDYsMTMg
QEAgc3RhdGljIHZvaWQgYW1kZ3B1X2Rpc3BhdGNoX2hhbmdfY29tcHV0ZSh2b2lkKQogewogCWFt
ZGdwdV9kaXNwYXRjaF9oYW5nX2hlbHBlcihkZXZpY2VfaGFuZGxlLCBBTURHUFVfSFdfSVBfQ09N
UFVURSk7CiB9CisKK3N0YXRpYyB2b2lkIGFtZGdwdV9kaXNwYXRjaF9oYW5nX3Nsb3dfZ2Z4KHZv
aWQpCit7CisJYW1kZ3B1X2Rpc3BhdGNoX2hhbmdfc2xvd19oZWxwZXIoZGV2aWNlX2hhbmRsZSwg
QU1ER1BVX0hXX0lQX0dGWCk7Cit9CisKK3N0YXRpYyB2b2lkIGFtZGdwdV9kaXNwYXRjaF9oYW5n
X3Nsb3dfY29tcHV0ZSh2b2lkKQoreworCWFtZGdwdV9kaXNwYXRjaF9oYW5nX3Nsb3dfaGVscGVy
KGRldmljZV9oYW5kbGUsIEFNREdQVV9IV19JUF9DT01QVVRFKTsKK30KLS0gCjIuMTcuMQoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1h
aWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
