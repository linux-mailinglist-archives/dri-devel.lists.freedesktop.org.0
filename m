Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 84038163753
	for <lists+dri-devel@lfdr.de>; Wed, 19 Feb 2020 00:37:09 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2AF7A6EAEE;
	Tue, 18 Feb 2020 23:37:05 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga02.intel.com (mga02.intel.com [134.134.136.20])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CEAE46E41B;
 Tue, 18 Feb 2020 23:36:55 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga101.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 18 Feb 2020 15:36:54 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,458,1574150400"; d="scan'208";a="228917154"
Received: from unknown (HELO localhost.jf.intel.com) ([10.166.29.74])
 by orsmga008.jf.intel.com with ESMTP; 18 Feb 2020 15:36:54 -0800
From: Akeem G Abodunrin <akeem.g.abodunrin@intel.com>
To: akeem.g.abodunrin@intel.com, jon.bloomfield@intel.com,
 sudeep.dutt@intel.com, daniel.vetter@intel.com,
 joonas.lahtinen@linux.intel.com, jani.nikula@intel.com,
 chris.p.wilson@intel.com, prathap.kumar.valsan@intel.com,
 mika.kuoppala@intel.com, francesco.balestrieri@intel.com,
 ville.syrjala@linux.intel.com, intel-gfx@lists.freedesktop.org,
 dri-devel@lists.freedesktop.org, omer.aran@intel.com,
 pragyansri.pathi@intel.com, d.scott.phillips@intel.com,
 david.c.stewart@intel.com, tony.luck@intel.com
Subject: [PATCH v2 2/2] drm/i915/gen7: Clear all EU/L3 residual contexts
Date: Tue, 18 Feb 2020 08:21:05 -0800
Message-Id: <20200218162105.12537-3-akeem.g.abodunrin@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20200218162105.12537-1-akeem.g.abodunrin@intel.com>
References: <20200218162105.12537-1-akeem.g.abodunrin@intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUHJhdGhhcCBLdW1hciBWYWxzYW4gPHByYXRoYXAua3VtYXIudmFsc2FuQGludGVsLmNv
bT4KCk9uIGdlbjcgYW5kIGdlbjcuNSBkZXZpY2VzLCB0aGVyZSBjb3VsZCBiZSBsZWZ0b3ZlciBk
YXRhIHJlc2lkdWFscyBpbgpFVS9MMyBmcm9tIHRoZSByZXRpcmluZyBjb250ZXh0LiBUaGlzIHBh
dGNoIGludHJvZHVjZXMgd29ya2Fyb3VuZCB0byBjbGVhcgp0aGF0IHJlc2lkdWFsIGNvbnRleHRz
LCBieSBzdWJtaXR0aW5nIGEgYmF0Y2ggYnVmZmVyIHdpdGggZGVkaWNhdGVkIEhXCmNvbnRleHQg
dG8gdGhlIEdQVSB3aXRoIHJpbmcgYWxsb2NhdGlvbiBmb3IgZWFjaCBjb250ZXh0IHN3aXRjaGlu
Zy4KClRoaXMgc2VjdXJpdHkgbWl0aWdhdGlvbiBjaGFuZ2VzIGRvZXMgbm90IHRyaWdnZXJzIGFu
eSBwZXJmb3JtYW5jZQpyZWdyZXNzaW9uLiBQZXJmb3JtYW5jZSBpcyBvbiBwYXIgd2l0aCBjdXJy
ZW50IGRybS10aXBzLgoKdjI6IEFkZCBpZ3QgZ2VuZXJhdGVkIGhlYWRlciBmaWxlIGZvciBDQiBr
ZXJuZWwgYXNzZW1ibGVkIHdpdGggbWVzYSB0b29sCmFuZCBhZGRyZXNzZWQgdXNlIG9mIEtlcm5l
bCBtYWNybyBmb3IgcHRyX2FsaWduIGNvbW1lbnQuCgpTaWduZWQtb2ZmLWJ5OiBNaWthIEt1b3Bw
YWxhIDxtaWthLmt1b3BwYWxhQGxpbnV4LmludGVsLmNvbT4KU2lnbmVkLW9mZi1ieTogUHJhdGhh
cCBLdW1hciBWYWxzYW4gPHByYXRoYXAua3VtYXIudmFsc2FuQGludGVsLmNvbT4KU2lnbmVkLW9m
Zi1ieTogQWtlZW0gRyBBYm9kdW5yaW4gPGFrZWVtLmcuYWJvZHVucmluQGludGVsLmNvbT4KQ2M6
IENocmlzIFdpbHNvbiA8Y2hyaXMucC53aWxzb25AaW50ZWwuY29tPgpDYzogQmFsZXN0cmllcmkg
RnJhbmNlc2NvIDxmcmFuY2VzY28uYmFsZXN0cmllcmlAaW50ZWwuY29tPgpDYzogQmxvb21maWVs
ZCBKb24gPGpvbi5ibG9vbWZpZWxkQGludGVsLmNvbT4KQ2M6IER1dHQgU3VkZWVwIDxzdWRlZXAu
ZHV0dEBpbnRlbC5jb20+Ci0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvTWFrZWZpbGUgICAgICAg
ICAgICAgICAgIHwgICAxICsKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2dlbjdfNV9jbGVhcmJ1
ZmZlci5oICB8ICA2OSArKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2dlbjdfY2xlYXJidWZm
ZXIuaCAgICB8ICA2OSArKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2dlbjdfcmVuZGVyY2xl
YXIuYyAgICB8IDM5OSArKysrKysrKysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2dlbjdfcmVuZGVyY2xlYXIuaCAgICB8ICAxNSArCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9p
bnRlbF9ncHVfY29tbWFuZHMuaCAgfCAgMTcgKy0KIC4uLi9ncHUvZHJtL2k5MTUvZ3QvaW50ZWxf
cmluZ19zdWJtaXNzaW9uLmMgICB8ICAgMyArLQogNyBmaWxlcyBjaGFuZ2VkLCA1NjkgaW5zZXJ0
aW9ucygrKSwgNCBkZWxldGlvbnMoLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9nZW43XzVfY2xlYXJidWZmZXIuaAogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZl
cnMvZ3B1L2RybS9pOTE1L2d0L2dlbjdfY2xlYXJidWZmZXIuaAogY3JlYXRlIG1vZGUgMTAwNjQ0
IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2dlbjdfcmVuZGVyY2xlYXIuYwogY3JlYXRlIG1vZGUg
MTAwNjQ0IGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2dlbjdfcmVuZGVyY2xlYXIuaAoKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvTWFrZWZpbGUKaW5kZXggYjMxNGQ0NGRlZDVlLi5lYmUzYTE2MGY1ODggMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L01ha2VmaWxlCkBAIC03OSw2ICs3OSw3IEBAIGd0LXkgKz0gXAogCWd0L2RlYnVnZnNfZ3QubyBc
CiAJZ3QvZGVidWdmc19ndF9wbS5vIFwKIAlndC9nZW42X3BwZ3R0Lm8gXAorCWd0L2dlbjdfcmVu
ZGVyY2xlYXIubyBcCiAJZ3QvZ2VuOF9wcGd0dC5vIFwKIAlndC9pbnRlbF9icmVhZGNydW1icy5v
IFwKIAlndC9pbnRlbF9jb250ZXh0Lm8gXApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ3QvZ2VuN181X2NsZWFyYnVmZmVyLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9nZW43
XzVfY2xlYXJidWZmZXIuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAu
LjEyNmU4MTMzYjk1MQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0
L2dlbjdfNV9jbGVhcmJ1ZmZlci5oCkBAIC0wLDAgKzEsNjkgQEAKKy8qIFNQRFgtTGljZW5zZS1J
ZGVudGlmaWVyOiBNSVQgKi8KKy8qCisgKiBDb3B5cmlnaHQgwqkgMjAyMCBJbnRlbCBDb3Jwb3Jh
dGlvbgorICoKKyAqIEdlbmVyYXRlIGJ5OiBJbnRlbC1ncHUtdG9vbHMgb24gVGh1IDEzIEZlYiAy
MDIwIDAxOjA2OjQxIEFNIFVUQworICovCisKKyNpZm5kZWYgX19HRU43XzVfQ0xFQVJCVUZGRVJf
SF9fCisjZGVmaW5lIF9fR0VON181X0NMRUFSQlVGRkVSX0hfXworCisjaW5jbHVkZSA8bGludXgv
dHlwZXMuaD4KKworLyogTWVkaWEgQ0IgS2VybmVsIGZvciBnZW43LjUgZGV2aWNlcyAqLworY29u
c3QgdTMyIGhzd19ldV9rZXJuZWxbXSA9IHsKKwkweDAwMDAwMDAxLCAweDI2MDIwMTI4LCAweDAw
MDAwMDI0LCAweDAwMDAwMDAwLAorCTB4MDAwMDAwNDAsIDB4MjAyODBjMjEsIDB4MDAwMDAwMjgs
IDB4MDAwMDAwMDEsCisJMHgwMTAwMDAxMCwgMHgyMDAwMGMyMCwgMHgwMDAwMDAyYywgMHgwMDAw
MDAwMCwKKwkweDAwMDEwMjIwLCAweDM0MDAxYzAwLCAweDAwMDAxNDAwLCAweDAwMDAwMTYwLAor
CTB4MDA2MDAwMDEsIDB4MjA2MDAwNjEsIDB4MDAwMDAwMDAsIDB4MDAwMDAwMDAsCisJMHgwMDAw
MDAwOCwgMHgyMDYwMWM4NSwgMHgwMDAwMGUwMCwgMHgwMDAwMDAwYywKKwkweDAwMDAwMDA1LCAw
eDIwNjAxY2E1LCAweDAwMDAwMDYwLCAweDAwMDAwMDAxLAorCTB4MDAwMDAwMDgsIDB4MjA2NDFj
ODUsIDB4MDAwMDBlMDAsIDB4MDAwMDAwMGQsCisJMHgwMDAwMDAwNSwgMHgyMDY0MWNhNSwgMHgw
MDAwMDA2NCwgMHgwMDAwMDAwMywKKwkweDAwMDAwMDQxLCAweDIwNzQyNGE1LCAweDAwMDAwMDY0
LCAweDAwMDAwMDM0LAorCTB4MDAwMDAwNDAsIDB4MjA2MDE0YTUsIDB4MDAwMDAwNjAsIDB4MDAw
MDAwNzQsCisJMHgwMDAwMDAwOCwgMHgyMDY4MWM4NSwgMHgwMDAwMGUwMCwgMHgwMDAwMDAwOCwK
KwkweDAwMDAwMDA1LCAweDIwNjgxY2E1LCAweDAwMDAwMDY4LCAweDAwMDAwMDBmLAorCTB4MDAw
MDAwNDEsIDB4MjA3MDFjYTUsIDB4MDAwMDAwNjAsIDB4MDAwMDAwMTAsCisJMHgwMDAwMDA0MCwg
MHgyMDY4MTRhNSwgMHgwMDAwMDA2OCwgMHgwMDAwMDA3MCwKKwkweDAwNjAwMDAxLCAweDIwYTAw
MDYxLCAweDAwMDAwMDAwLCAweDAwMDAwMDAwLAorCTB4MDAwMDAwMDUsIDB4MjA2YzFjODUsIDB4
MDAwMDBlMDAsIDB4MDAwMDAwMDcsCisJMHgwMDAwMDA0MSwgMHgyMDZjMWNhNSwgMHgwMDAwMDA2
YywgMHgwMDAwMDAwNCwKKwkweDAwNjAwMDAxLCAweDIwODAwMDIxLCAweDAwOGQwMDAwLCAweDAw
MDAwMDAwLAorCTB4MDAwMDAwMDEsIDB4MjA4MDAwMjEsIDB4MDAwMDAwNmMsIDB4MDAwMDAwMDAs
CisJMHgwMDAwMDAwMSwgMHgyMDg0MDAyMSwgMHgwMDAwMDA2OCwgMHgwMDAwMDAwMCwKKwkweDAw
MDAwMDAxLCAweDIwODgwMDYxLCAweDAwMDAwMDAwLCAweDAwMDAwMDAzLAorCTB4MDAwMDAwMDUs
IDB4MjA4YzBkMjEsIDB4MDAwMDAwODYsIDB4ZmZmZmZmZmYsCisJMHgwNTYwMDAzMiwgMHgyMGEw
MGZhMSwgMHgwMDhkMDA4MCwgMHgwMjE5MDAwMSwKKwkweDAwMDAwMDQwLCAweDIwYTAxY2E1LCAw
eDAwMDAwMGEwLCAweDAwMDAwMDAxLAorCTB4MDU2MDAwMzIsIDB4MjBhMDBmYTEsIDB4MDA4ZDAw
ODAsIDB4MDQwYTgwMDEsCisJMHgwMjAwMDA0MCwgMHgyMDI4MWMyMSwgMHgwMDAwMDAyOCwgMHhm
ZmZmZmZmZiwKKwkweDAwMDEwMjIwLCAweDM0MDAxYzAwLCAweDAwMDAxNDAwLCAweGZmZmZmZmUw
LAorCTB4MDAwMDAwMDEsIDB4MjYwMjAxMjgsIDB4MDAwMDAwMjQsIDB4MDAwMDAwMDAsCisJMHgw
MDAwMDAwMSwgMHgyMjAwMTBlNCwgMHgwMDAwMDAwMCwgMHgwMDAwMDAwMCwKKwkweDAwMDAwMDAx
LCAweDIyMDgzMWVjLCAweDAwMDAwMDAwLCAweDAwN2YwMDdmLAorCTB4MDA2MDAwMDEsIDB4MjA0
MDAwMjEsIDB4MDA4ZDAwMDAsIDB4MDAwMDAwMDAsCisJMHgwMDYwMDAwMSwgMHgyZmUwMDAyMSwg
MHgwMDhkMDAwMCwgMHgwMDAwMDAwMCwKKwkweDAwMjAwMDAxLCAweDIwNDAwMTIxLCAweDAwNDUw
MDIwLCAweDAwMDAwMDAwLAorCTB4MDAwMDAwMDEsIDB4MjA0ODAwNjEsIDB4MDAwMDAwMDAsIDB4
MDAwZjAwMGYsCisJMHgwMDAwMDAwNSwgMHgyMDRjMGQyMSwgMHgwMDAwMDA0NiwgMHhmZmZmZmZl
ZiwKKwkweDAwODAwMDAxLCAweDIwNjAwMDYxLCAweDAwMDAwMDAwLCAweDAwMDAwMDAwLAorCTB4
MDA4MDAwMDEsIDB4MjA4MDAwNjEsIDB4MDAwMDAwMDAsIDB4MDAwMDAwMDAsCisJMHgwMDgwMDAw
MSwgMHgyMGEwMDA2MSwgMHgwMDAwMDAwMCwgMHgwMDAwMDAwMCwKKwkweDAwODAwMDAxLCAweDIw
YzAwMDYxLCAweDAwMDAwMDAwLCAweDAwMDAwMDAwLAorCTB4MDA4MDAwMDEsIDB4MjBlMDAwNjEs
IDB4MDAwMDAwMDAsIDB4MDAwMDAwMDAsCisJMHgwMDgwMDAwMSwgMHgyMTAwMDA2MSwgMHgwMDAw
MDAwMCwgMHgwMDAwMDAwMCwKKwkweDAwODAwMDAxLCAweDIxMjAwMDYxLCAweDAwMDAwMDAwLCAw
eDAwMDAwMDAwLAorCTB4MDA4MDAwMDEsIDB4MjE0MDAwNjEsIDB4MDAwMDAwMDAsIDB4MDAwMDAw
MDAsCisJMHgwNTYwMDAzMiwgMHgyMDAwMGZhMCwgMHgwMDhkMDA0MCwgMHgxMjBhODAwMCwKKwkw
eDAwMDAwMDQwLCAweDIwNDAyZDIxLCAweDAwMDAwMDIwLCAweDAwMTAwMDEwLAorCTB4MDU2MDAw
MzIsIDB4MjAwMDBmYTAsIDB4MDA4ZDAwNDAsIDB4MTIwYTgwMDAsCisJMHgwMjAwMDA0MCwgMHgy
MjA4M2Q4YywgMHgwMDAwMDIwOCwgMHhmZmZmZmZmZiwKKwkweDAwODAwMDAxLCAweGEwMDAwMTA5
LCAweDAwMDAwNjAyLCAweDAwMDAwMDAwLAorCTB4MDAwMDAwNDAsIDB4MjIwMDFjODQsIDB4MDAw
MDAyMDAsIDB4MDAwMDAwMjAsCisJMHgwMDAxMDIyMCwgMHgzNDAwMWMwMCwgMHgwMDAwMTQwMCwg
MHhmZmZmZmZjMCwKKwkweDA3NjAwMDMyLCAweDIwMDAwZmEwLCAweDAwOGQwZmUwLCAweDgyMDAw
MDEwLAorfTsKKworI2VuZGlmIC8qIF9fR0VON181X0NMRUFSQlVGRkVSX0hfXyAqLwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvZ2VuN19jbGVhcmJ1ZmZlci5oIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ3QvZ2VuN19jbGVhcmJ1ZmZlci5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAwMDAwMC4uNTI0MTg5ZDkwZGVkCi0tLSAvZGV2L251bGwKKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ3QvZ2VuN19jbGVhcmJ1ZmZlci5oCkBAIC0wLDAgKzEsNjkgQEAK
Ky8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVQgKi8KKy8qCisgKiBDb3B5cmlnaHQgwqkg
MjAyMCBJbnRlbCBDb3Jwb3JhdGlvbgorICoKKyAqIEdlbmVyYXRlIGJ5OiBJbnRlbC1ncHUtdG9v
bHMgb24gVGh1IDEzIEZlYiAyMDIwIDAxOjA1OjU2IEFNIFVUQworICovCisKKyNpZm5kZWYgX19H
RU43X0NMRUFSQlVGRkVSX0hfXworI2RlZmluZSBfX0dFTjdfQ0xFQVJCVUZGRVJfSF9fCisKKyNp
bmNsdWRlIDxsaW51eC90eXBlcy5oPgorCisvKiBNZWRpYSBDQiBLZXJuZWwgZm9yIGdlbjcgZGV2
aWNlcyAqLworY29uc3QgdTMyIGl2Yl9ldV9rZXJuZWxbXSA9IHsKKwkweDAwMDAwMDAxLCAweDI2
MDIwMTI4LCAweDAwMDAwMDI0LCAweDAwMDAwMDAwLAorCTB4MDAwMDAwNDAsIDB4MjAyODBjMjEs
IDB4MDAwMDAwMjgsIDB4MDAwMDAwMDEsCisJMHgwMTAwMDAxMCwgMHgyMDAwMGMyMCwgMHgwMDAw
MDAyYywgMHgwMDAwMDAwMCwKKwkweDAwMDEwMjIwLCAweDM0MDAxYzAwLCAweDAwMDAxNDAwLCAw
eDAwMDAwMDJjLAorCTB4MDA2MDAwMDEsIDB4MjA2MDAwNjEsIDB4MDAwMDAwMDAsIDB4MDAwMDAw
MDAsCisJMHgwMDAwMDAwOCwgMHgyMDYwMWM4NSwgMHgwMDAwMGUwMCwgMHgwMDAwMDAwYywKKwkw
eDAwMDAwMDA1LCAweDIwNjAxY2E1LCAweDAwMDAwMDYwLCAweDAwMDAwMDAxLAorCTB4MDAwMDAw
MDgsIDB4MjA2NDFjODUsIDB4MDAwMDBlMDAsIDB4MDAwMDAwMGQsCisJMHgwMDAwMDAwNSwgMHgy
MDY0MWNhNSwgMHgwMDAwMDA2NCwgMHgwMDAwMDAwMywKKwkweDAwMDAwMDQxLCAweDIwNzQyNGE1
LCAweDAwMDAwMDY0LCAweDAwMDAwMDM0LAorCTB4MDAwMDAwNDAsIDB4MjA2MDE0YTUsIDB4MDAw
MDAwNjAsIDB4MDAwMDAwNzQsCisJMHgwMDAwMDAwOCwgMHgyMDY4MWM4NSwgMHgwMDAwMGUwMCwg
MHgwMDAwMDAwOCwKKwkweDAwMDAwMDA1LCAweDIwNjgxY2E1LCAweDAwMDAwMDY4LCAweDAwMDAw
MDBmLAorCTB4MDAwMDAwNDEsIDB4MjA3MDFjYTUsIDB4MDAwMDAwNjAsIDB4MDAwMDAwMTAsCisJ
MHgwMDAwMDA0MCwgMHgyMDY4MTRhNSwgMHgwMDAwMDA2OCwgMHgwMDAwMDA3MCwKKwkweDAwNjAw
MDAxLCAweDIwYTAwMDYxLCAweDAwMDAwMDAwLCAweDAwMDAwMDAwLAorCTB4MDAwMDAwMDUsIDB4
MjA2YzFjODUsIDB4MDAwMDBlMDAsIDB4MDAwMDAwMDcsCisJMHgwMDAwMDA0MSwgMHgyMDZjMWNh
NSwgMHgwMDAwMDA2YywgMHgwMDAwMDAwNCwKKwkweDAwNjAwMDAxLCAweDIwODAwMDIxLCAweDAw
OGQwMDAwLCAweDAwMDAwMDAwLAorCTB4MDAwMDAwMDEsIDB4MjA4MDAwMjEsIDB4MDAwMDAwNmMs
IDB4MDAwMDAwMDAsCisJMHgwMDAwMDAwMSwgMHgyMDg0MDAyMSwgMHgwMDAwMDA2OCwgMHgwMDAw
MDAwMCwKKwkweDAwMDAwMDAxLCAweDIwODgwMDYxLCAweDAwMDAwMDAwLCAweDAwMDAwMDAzLAor
CTB4MDAwMDAwMDUsIDB4MjA4YzBkMjEsIDB4MDAwMDAwODYsIDB4ZmZmZmZmZmYsCisJMHgwNTYw
MDAzMiwgMHgyMGEwMGZhMSwgMHgwMDhkMDA4MCwgMHgwMjE5MDAwMSwKKwkweDAwMDAwMDQwLCAw
eDIwYTAxY2E1LCAweDAwMDAwMGEwLCAweDAwMDAwMDAxLAorCTB4MDU2MDAwMzIsIDB4MjBhMDBm
YTEsIDB4MDA4ZDAwODAsIDB4MDQwYTgwMDEsCisJMHgwMjAwMDA0MCwgMHgyMDI4MWMyMSwgMHgw
MDAwMDAyOCwgMHhmZmZmZmZmZiwKKwkweDAwMDEwMjIwLCAweDM0MDAxYzAwLCAweDAwMDAxNDAw
LCAweGZmZmZmZmZjLAorCTB4MDAwMDAwMDEsIDB4MjYwMjAxMjgsIDB4MDAwMDAwMjQsIDB4MDAw
MDAwMDAsCisJMHgwMDAwMDAwMSwgMHgyMjAwMTBlNCwgMHgwMDAwMDAwMCwgMHgwMDAwMDAwMCwK
KwkweDAwMDAwMDAxLCAweDIyMDgzMWVjLCAweDAwMDAwMDAwLCAweDAwN2YwMDdmLAorCTB4MDA2
MDAwMDEsIDB4MjA0MDAwMjEsIDB4MDA4ZDAwMDAsIDB4MDAwMDAwMDAsCisJMHgwMDYwMDAwMSwg
MHgyZmUwMDAyMSwgMHgwMDhkMDAwMCwgMHgwMDAwMDAwMCwKKwkweDAwMjAwMDAxLCAweDIwNDAw
MTIxLCAweDAwNDUwMDIwLCAweDAwMDAwMDAwLAorCTB4MDAwMDAwMDEsIDB4MjA0ODAwNjEsIDB4
MDAwMDAwMDAsIDB4MDAwZjAwMGYsCisJMHgwMDAwMDAwNSwgMHgyMDRjMGQyMSwgMHgwMDAwMDA0
NiwgMHhmZmZmZmZlZiwKKwkweDAwODAwMDAxLCAweDIwNjAwMDYxLCAweDAwMDAwMDAwLCAweDAw
MDAwMDAwLAorCTB4MDA4MDAwMDEsIDB4MjA4MDAwNjEsIDB4MDAwMDAwMDAsIDB4MDAwMDAwMDAs
CisJMHgwMDgwMDAwMSwgMHgyMGEwMDA2MSwgMHgwMDAwMDAwMCwgMHgwMDAwMDAwMCwKKwkweDAw
ODAwMDAxLCAweDIwYzAwMDYxLCAweDAwMDAwMDAwLCAweDAwMDAwMDAwLAorCTB4MDA4MDAwMDEs
IDB4MjBlMDAwNjEsIDB4MDAwMDAwMDAsIDB4MDAwMDAwMDAsCisJMHgwMDgwMDAwMSwgMHgyMTAw
MDA2MSwgMHgwMDAwMDAwMCwgMHgwMDAwMDAwMCwKKwkweDAwODAwMDAxLCAweDIxMjAwMDYxLCAw
eDAwMDAwMDAwLCAweDAwMDAwMDAwLAorCTB4MDA4MDAwMDEsIDB4MjE0MDAwNjEsIDB4MDAwMDAw
MDAsIDB4MDAwMDAwMDAsCisJMHgwNTYwMDAzMiwgMHgyMDAwMGZhMCwgMHgwMDhkMDA0MCwgMHgx
MjBhODAwMCwKKwkweDAwMDAwMDQwLCAweDIwNDAyZDIxLCAweDAwMDAwMDIwLCAweDAwMTAwMDEw
LAorCTB4MDU2MDAwMzIsIDB4MjAwMDBmYTAsIDB4MDA4ZDAwNDAsIDB4MTIwYTgwMDAsCisJMHgw
MjAwMDA0MCwgMHgyMjA4M2Q4YywgMHgwMDAwMDIwOCwgMHhmZmZmZmZmZiwKKwkweDAwODAwMDAx
LCAweGEwMDAwMTA5LCAweDAwMDAwNjAyLCAweDAwMDAwMDAwLAorCTB4MDAwMDAwNDAsIDB4MjIw
MDFjODQsIDB4MDAwMDAyMDAsIDB4MDAwMDAwMjAsCisJMHgwMDAxMDIyMCwgMHgzNDAwMWMwMCwg
MHgwMDAwMTQwMCwgMHhmZmZmZmZmOCwKKwkweDA3NjAwMDMyLCAweDIwMDAwZmEwLCAweDAwOGQw
ZmUwLCAweDgyMDAwMDEwLAorfTsKKworI2VuZGlmIC8qIF9fR0VON19DTEVBUkJVRkZFUl9IX18g
Ki8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2dlbjdfcmVuZGVyY2xlYXIu
YyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2dlbjdfcmVuZGVyY2xlYXIuYwpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjJjM2FhYmM3MmI0ZQotLS0gL2Rldi9udWxs
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2dlbjdfcmVuZGVyY2xlYXIuYwpAQCAtMCww
ICsxLDM5OSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVAorLyoKKyAqIENvcHly
aWdodCDCqSAyMDE5IEludGVsIENvcnBvcmF0aW9uCisgKi8KKworI2luY2x1ZGUgImdlbjdfcmVu
ZGVyY2xlYXIuaCIKKyNpbmNsdWRlICJnZW43XzVfY2xlYXJidWZmZXIuaCIKKyNpbmNsdWRlICJn
ZW43X2NsZWFyYnVmZmVyLmgiCisjaW5jbHVkZSAiaTkxNV9kcnYuaCIKKyNpbmNsdWRlICJpbnRl
bF9ncHVfY29tbWFuZHMuaCIKKworI2RlZmluZSBNQVhfVVJCX0VOVFJJRVMgNjQKKyNkZWZpbmUg
U1RBVEVfU0laRSAoNCAqIDEwMjQpCisjZGVmaW5lIEdUM19JTkxJTkVfREFUQV9ERUxBWVMgMHgx
RTAwCisjZGVmaW5lIGJhdGNoX2FkdmFuY2UoWSwgQ1MpIEdFTV9CVUdfT04oKFkpLT5lbmQgIT0g
KENTKSkKKworc3RydWN0IGNiX2tlcm5lbCB7CisJY29uc3Qgdm9pZCAqZGF0YTsKKwl1MzIgc2l6
ZTsKK307CisKKyNkZWZpbmUgQ0JfS0VSTkVMKG5hbWUpIHsgLmRhdGEgPSAobmFtZSksIC5zaXpl
ID0gc2l6ZW9mKG5hbWUpIH0KKworc3RhdGljIGNvbnN0IHN0cnVjdCBjYl9rZXJuZWwgY2Jfa2Vy
bmVsX2dlbjcgPSBDQl9LRVJORUwoaXZiX2V1X2tlcm5lbCk7CitzdGF0aWMgY29uc3Qgc3RydWN0
IGNiX2tlcm5lbCBjYl9rZXJuZWxfZ2VuN181ID0gQ0JfS0VSTkVMKGhzd19ldV9rZXJuZWwpOwor
CitzdHJ1Y3QgYmF0Y2hfY2h1bmsgeworCXN0cnVjdCBpOTE1X3ZtYSAqdm1hOworCXUzMiBvZmZz
ZXQ7CisJdTMyICpzdGFydDsKKwl1MzIgKmVuZDsKKwl1MzIgbWF4X2l0ZW1zOworfTsKKworc3Ry
dWN0IGJhdGNoX3ZhbHMgeworCXUzMiBtYXhfcHJpbWl0aXZlczsKKwl1MzIgbWF4X3VyYl9lbnRy
aWVzOworCXUzMiBjbWRfc2l6ZTsKKwl1MzIgc3RhdGVfc2l6ZTsKKwl1MzIgc3RhdGVfc3RhcnQ7
CisJdTMyIGJhdGNoX3NpemU7CisJdTMyIHN1cmZhY2VfaGVpZ2h0OworCXUzMiBzdXJmYWNlX3dp
ZHRoOworCXUzMiBzY3JhdGNoX3NpemU7CisJdTMyIG1heF9zaXplOworfTsKKworc3RhdGljIHZv
aWQKK2JhdGNoX2dldF9kZWZhdWx0cyhzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwgc3Ry
dWN0IGJhdGNoX3ZhbHMgKmJ2KQoreworCWlmIChJU19IQVNXRUxMKGk5MTUpKSB7CisJCWJ2LT5t
YXhfcHJpbWl0aXZlcyA9IDI4MDsKKwkJYnYtPm1heF91cmJfZW50cmllcyA9IE1BWF9VUkJfRU5U
UklFUzsKKwkJYnYtPnN1cmZhY2VfaGVpZ2h0ID0gMTYgKiAxNjsKKwkJYnYtPnN1cmZhY2Vfd2lk
dGggPSAzMiAqIDIgKiAxNjsKKwl9IGVsc2UgeworCQlidi0+bWF4X3ByaW1pdGl2ZXMgPSAxMjg7
CisJCWJ2LT5tYXhfdXJiX2VudHJpZXMgPSBNQVhfVVJCX0VOVFJJRVMgLyAyOworCQlidi0+c3Vy
ZmFjZV9oZWlnaHQgPSAxNiAqIDg7CisJCWJ2LT5zdXJmYWNlX3dpZHRoID0gMzIgKiAxNjsKKwl9
CisJYnYtPmNtZF9zaXplID0gYnYtPm1heF9wcmltaXRpdmVzICogNDA5NjsKKwlidi0+c3RhdGVf
c2l6ZSA9IFNUQVRFX1NJWkU7CisJYnYtPnN0YXRlX3N0YXJ0ID0gYnYtPmNtZF9zaXplOworCWJ2
LT5iYXRjaF9zaXplID0gYnYtPmNtZF9zaXplICsgYnYtPnN0YXRlX3NpemU7CisJYnYtPnNjcmF0
Y2hfc2l6ZSA9IGJ2LT5zdXJmYWNlX2hlaWdodCAqIGJ2LT5zdXJmYWNlX3dpZHRoOworCWJ2LT5t
YXhfc2l6ZSA9IGJ2LT5iYXRjaF9zaXplICsgYnYtPnNjcmF0Y2hfc2l6ZTsKK30KKworc3RhdGlj
IHZvaWQgYmF0Y2hfaW5pdChzdHJ1Y3QgYmF0Y2hfY2h1bmsgKmJjLAorCQkgICAgICAgc3RydWN0
IGk5MTVfdm1hICp2bWEsCisJCSAgICAgICB1MzIgKnN0YXJ0LCB1MzIgb2Zmc2V0LCB1MzIgbWF4
X2J5dGVzKQoreworCWJjLT52bWEgPSB2bWE7CisJYmMtPm9mZnNldCA9IG9mZnNldDsKKwliYy0+
c3RhcnQgPSBzdGFydCArIGJjLT5vZmZzZXQgLyBzaXplb2YoKmJjLT5zdGFydCk7CisJYmMtPmVu
ZCA9IGJjLT5zdGFydDsKKwliYy0+bWF4X2l0ZW1zID0gbWF4X2J5dGVzIC8gc2l6ZW9mKCpiYy0+
c3RhcnQpOworfQorCitzdGF0aWMgdTMyIGJhdGNoX29mZnNldChjb25zdCBzdHJ1Y3QgYmF0Y2hf
Y2h1bmsgKmJjLCB1MzIgKmNzKQoreworCXJldHVybiAoY3MgLSBiYy0+c3RhcnQpICogc2l6ZW9m
KCpiYy0+c3RhcnQpICsgYmMtPm9mZnNldDsKK30KKworc3RhdGljIHUzMiBiYXRjaF9hZGRyKGNv
bnN0IHN0cnVjdCBiYXRjaF9jaHVuayAqYmMpCit7CisJcmV0dXJuIGJjLT52bWEtPm5vZGUuc3Rh
cnQ7Cit9CisKK3N0YXRpYyB2b2lkIGJhdGNoX2FkZChzdHJ1Y3QgYmF0Y2hfY2h1bmsgKmJjLCBj
b25zdCB1MzIgZCkKK3sKKwlHRU1fREVCVUdfV0FSTl9PTigoYmMtPmVuZCAtIGJjLT5zdGFydCkg
Pj0gYmMtPm1heF9pdGVtcyk7CisJKmJjLT5lbmQrKyA9IGQ7Cit9CisKK3N0YXRpYyB1MzIgKmJh
dGNoX2FsbG9jX2l0ZW1zKHN0cnVjdCBiYXRjaF9jaHVuayAqYmMsIHUzMiBhbGlnbiwgdTMyIGl0
ZW1zKQoreworCXUzMiAqbWFwOworCisJaWYgKGFsaWduKSB7CisJCXUzMiAqZW5kID0gUFRSX0FM
SUdOKGJjLT5lbmQsIGFsaWduKTsKKworCQltZW1zZXQzMihiYy0+ZW5kLCAwLCBlbmQgLSBiYy0+
ZW5kKTsKKwkJYmMtPmVuZCA9IGVuZDsKKwl9CisKKwltYXAgPSBiYy0+ZW5kOworCWJjLT5lbmQg
Kz0gaXRlbXM7CisKKwlyZXR1cm4gbWFwOworfQorCitzdGF0aWMgdTMyICpiYXRjaF9hbGxvY19i
eXRlcyhzdHJ1Y3QgYmF0Y2hfY2h1bmsgKmJjLCB1MzIgYWxpZ24sIHUzMiBieXRlcykKK3sKKwlH
RU1fQlVHX09OKCFJU19BTElHTkVEKGJ5dGVzLCBzaXplb2YoKmJjLT5zdGFydCkpKTsKKwlyZXR1
cm4gYmF0Y2hfYWxsb2NfaXRlbXMoYmMsIGFsaWduLCBieXRlcyAvIHNpemVvZigqYmMtPnN0YXJ0
KSk7Cit9CisKK3N0YXRpYyB1MzIKK2dlbjdfZmlsbF9zdXJmYWNlX3N0YXRlKHN0cnVjdCBiYXRj
aF9jaHVuayAqc3RhdGUsCisJCQljb25zdCB1MzIgZHN0X29mZnNldCwKKwkJCWNvbnN0IHN0cnVj
dCBiYXRjaF92YWxzICpidikKK3sKKwl1MzIgc3VyZmFjZV9oID0gYnYtPnN1cmZhY2VfaGVpZ2h0
OworCXUzMiBzdXJmYWNlX3cgPSBidi0+c3VyZmFjZV93aWR0aDsKKwl1MzIgKmNzID0gYmF0Y2hf
YWxsb2NfaXRlbXMoc3RhdGUsIDMyLCA4KTsKKwl1MzIgb2Zmc2V0ID0gYmF0Y2hfb2Zmc2V0KHN0
YXRlLCBjcyk7CisKKyNkZWZpbmUgU1VSRkFDRV8yRCAxCisjZGVmaW5lIFNVUkZBQ0VGT1JNQVRf
QjhHOFI4QThfVU5PUk0gMHgwQzAKKyNkZWZpbmUgUkVOREVSX0NBQ0hFX1JFQURfV1JJVEUgMQor
CisJKmNzKysgPSBTVVJGQUNFXzJEIDw8IDI5IHwKKwkJKFNVUkZBQ0VGT1JNQVRfQjhHOFI4QThf
VU5PUk0gPDwgMTgpIHwKKwkJKFJFTkRFUl9DQUNIRV9SRUFEX1dSSVRFIDw8IDgpOworCisJKmNz
KysgPSBiYXRjaF9hZGRyKHN0YXRlKSArIGRzdF9vZmZzZXQ7CisKKwkqY3MrKyA9ICgoc3VyZmFj
ZV9oIC8gNCAtIDEpIDw8IDE2KSB8IChzdXJmYWNlX3cgLyA0IC0gMSk7CisJKmNzKysgPSBzdXJm
YWNlX3c7CisJKmNzKysgPSAwOworCSpjcysrID0gMDsKKwkqY3MrKyA9IDA7CisjZGVmaW5lIFNI
QURFUl9DSEFOTkVMUyhyLCBnLCBiLCBhKSBcCisJKCgocikgPDwgMjUpIHwgKChnKSA8PCAyMikg
fCAoKGIpIDw8IDE5KSB8ICgoYSkgPDwgMTYpKQorCSpjcysrID0gU0hBREVSX0NIQU5ORUxTKDQs
IDUsIDYsIDcpOworCWJhdGNoX2FkdmFuY2Uoc3RhdGUsIGNzKTsKKworCXJldHVybiBvZmZzZXQ7
Cit9CisKK3N0YXRpYyB1MzIKK2dlbjdfZmlsbF9iaW5kaW5nX3RhYmxlKHN0cnVjdCBiYXRjaF9j
aHVuayAqc3RhdGUsCisJCQljb25zdCBzdHJ1Y3QgYmF0Y2hfdmFscyAqYnYpCit7CisJdTMyICpj
cyA9IGJhdGNoX2FsbG9jX2l0ZW1zKHN0YXRlLCAzMiwgOCk7CisJdTMyIG9mZnNldCA9IGJhdGNo
X29mZnNldChzdGF0ZSwgY3MpOworCXUzMiBzdXJmYWNlX3N0YXJ0OworCisJc3VyZmFjZV9zdGFy
dCA9IGdlbjdfZmlsbF9zdXJmYWNlX3N0YXRlKHN0YXRlLCBidi0+YmF0Y2hfc2l6ZSwgYnYpOwor
CSpjcysrID0gc3VyZmFjZV9zdGFydCAtIHN0YXRlLT5vZmZzZXQ7CisJKmNzKysgPSAwOworCSpj
cysrID0gMDsKKwkqY3MrKyA9IDA7CisJKmNzKysgPSAwOworCSpjcysrID0gMDsKKwkqY3MrKyA9
IDA7CisJKmNzKysgPSAwOworCWJhdGNoX2FkdmFuY2Uoc3RhdGUsIGNzKTsKKworCXJldHVybiBv
ZmZzZXQ7Cit9CisKK3N0YXRpYyB1MzIKK2dlbjdfZmlsbF9rZXJuZWxfZGF0YShzdHJ1Y3QgYmF0
Y2hfY2h1bmsgKnN0YXRlLAorCQkgICAgICBjb25zdCB1MzIgKmRhdGEsCisJCSAgICAgIGNvbnN0
IHUzMiBzaXplKQoreworCXJldHVybiBiYXRjaF9vZmZzZXQoc3RhdGUsCisJCQkgICAgbWVtY3B5
KGJhdGNoX2FsbG9jX2J5dGVzKHN0YXRlLCA2NCwgc2l6ZSksCisJCQkJICAgZGF0YSwgc2l6ZSkp
OworfQorCitzdGF0aWMgdTMyCitnZW43X2ZpbGxfaW50ZXJmYWNlX2Rlc2NyaXB0b3Ioc3RydWN0
IGJhdGNoX2NodW5rICpzdGF0ZSwKKwkJCSAgICAgICBjb25zdCBzdHJ1Y3QgYmF0Y2hfdmFscyAq
YnYsCisJCQkgICAgICAgY29uc3Qgc3RydWN0IGNiX2tlcm5lbCAqa2VybmVsLAorCQkJICAgICAg
IHVuc2lnbmVkIGludCBjb3VudCkKK3sKKwl1MzIgKmNzID0gYmF0Y2hfYWxsb2NfaXRlbXMoc3Rh
dGUsIDMyLCA4ICogY291bnQpOworCXUzMiBvZmZzZXQgPSBiYXRjaF9vZmZzZXQoc3RhdGUsIGNz
KTsKKworCSpjcysrID0gZ2VuN19maWxsX2tlcm5lbF9kYXRhKHN0YXRlLCBrZXJuZWwtPmRhdGEs
IGtlcm5lbC0+c2l6ZSk7CisJKmNzKysgPSAoMSA8PCA3KSB8ICgxIDw8IDEzKTsKKwkqY3MrKyA9
IDA7CisJKmNzKysgPSAoZ2VuN19maWxsX2JpbmRpbmdfdGFibGUoc3RhdGUsIGJ2KSAtIHN0YXRl
LT5vZmZzZXQpIHwgMTsKKwkqY3MrKyA9IDA7CisJKmNzKysgPSAwOworCSpjcysrID0gMDsKKwkq
Y3MrKyA9IDA7CisKKwkvKiAxIC0gNjNkdW1teSBpZGRzICovCisJbWVtc2V0MzIoY3MsIDB4MDAs
IChjb3VudCAtIDEpICogOCk7CisJYmF0Y2hfYWR2YW5jZShzdGF0ZSwgY3MgKyAoY291bnQgLSAx
KSAqIDgpOworCisJcmV0dXJuIG9mZnNldDsKK30KKworc3RhdGljIHZvaWQKK2dlbjdfZW1pdF9z
dGF0ZV9iYXNlX2FkZHJlc3Moc3RydWN0IGJhdGNoX2NodW5rICpiYXRjaCwKKwkJCSAgICAgdTMy
IHN1cmZhY2Vfc3RhdGVfYmFzZSkKK3sKKwl1MzIgKmNzID0gYmF0Y2hfYWxsb2NfaXRlbXMoYmF0
Y2gsIDAsIDEyKTsKKworCSpjcysrID0gU1RBVEVfQkFTRV9BRERSRVNTIHwgKDEyIC0gMik7CisJ
LyogZ2VuZXJhbCAqLworCSpjcysrID0gYmF0Y2hfYWRkcihiYXRjaCkgfCBCQVNFX0FERFJFU1Nf
TU9ESUZZOworCS8qIHN1cmZhY2UgKi8KKwkqY3MrKyA9IGJhdGNoX2FkZHIoYmF0Y2gpIHwgc3Vy
ZmFjZV9zdGF0ZV9iYXNlIHwgQkFTRV9BRERSRVNTX01PRElGWTsKKwkvKiBkeW5hbWljICovCisJ
KmNzKysgPSBiYXRjaF9hZGRyKGJhdGNoKSB8IEJBU0VfQUREUkVTU19NT0RJRlk7CisJLyogaW5k
aXJlY3QgKi8KKwkqY3MrKyA9IGJhdGNoX2FkZHIoYmF0Y2gpIHwgQkFTRV9BRERSRVNTX01PRElG
WTsKKwkvKiBpbnN0cnVjdGlvbiAqLworCSpjcysrID0gYmF0Y2hfYWRkcihiYXRjaCkgfCBCQVNF
X0FERFJFU1NfTU9ESUZZOworCisJLyogZ2VuZXJhbC9keW5hbWljL2luZGlyZWN0L2luc3RydWN0
aW9uIGFjY2VzcyBCb3VuZCAqLworCSpjcysrID0gMDsKKwkqY3MrKyA9IEJBU0VfQUREUkVTU19N
T0RJRlk7CisJKmNzKysgPSAwOworCSpjcysrID0gQkFTRV9BRERSRVNTX01PRElGWTsKKwkqY3Mr
KyA9IDA7CisJKmNzKysgPSAwOworCWJhdGNoX2FkdmFuY2UoYmF0Y2gsIGNzKTsKK30KKworc3Rh
dGljIHZvaWQKK2dlbjdfZW1pdF92ZmVfc3RhdGUoc3RydWN0IGJhdGNoX2NodW5rICpiYXRjaCwK
KwkJICAgIGNvbnN0IHN0cnVjdCBiYXRjaF92YWxzICpidiwKKwkJICAgIHUzMiB1cmJfc2l6ZSwg
dTMyIGN1cmJlX3NpemUsCisJCSAgICB1MzIgbW9kZSkKK3sKKwl1MzIgdXJiX2VudHJpZXMgPSBi
di0+bWF4X3VyYl9lbnRyaWVzOworCXUzMiB0aHJlYWRzID0gYnYtPm1heF9wcmltaXRpdmVzIC0g
MTsKKwl1MzIgKmNzID0gYmF0Y2hfYWxsb2NfaXRlbXMoYmF0Y2gsIDMyLCA4KTsKKworCSpjcysr
ID0gTUVESUFfVkZFX1NUQVRFIHwgKDggLSAyKTsKKworCS8qIHNjcmF0Y2ggYnVmZmVyICovCisJ
KmNzKysgPSAwOworCisJLyogbnVtYmVyIG9mIHRocmVhZHMgJiB1cmIgZW50cmllcyBmb3IgR1BH
UFUgdnMgTWVkaWEgTW9kZSAqLworCSpjcysrID0gdGhyZWFkcyA8PCAxNiB8IHVyYl9lbnRyaWVz
IDw8IDggfCBtb2RlIDw8IDI7CisKKwkqY3MrKyA9IDA7CisKKwkvKiB1cmIgZW50cnkgc2l6ZSAm
IGN1cmJlIHNpemUgaW4gMjU2IGJpdHMgdW5pdCAqLworCSpjcysrID0gdXJiX3NpemUgPDwgMTYg
fCBjdXJiZV9zaXplOworCisJLyogc2NvcmVib2FyZCAqLworCSpjcysrID0gMDsKKwkqY3MrKyA9
IDA7CisJKmNzKysgPSAwOworCWJhdGNoX2FkdmFuY2UoYmF0Y2gsIGNzKTsKK30KKworc3RhdGlj
IHZvaWQKK2dlbjdfZW1pdF9pbnRlcmZhY2VfZGVzY3JpcHRvcl9sb2FkKHN0cnVjdCBiYXRjaF9j
aHVuayAqYmF0Y2gsCisJCQkJICAgIGNvbnN0IHUzMiBpbnRlcmZhY2VfZGVzY3JpcHRvciwKKwkJ
CQkgICAgdW5zaWduZWQgaW50IGNvdW50KQoreworCXUzMiAqY3MgPSBiYXRjaF9hbGxvY19pdGVt
cyhiYXRjaCwgOCwgNCk7CisKKwkqY3MrKyA9IE1FRElBX0lOVEVSRkFDRV9ERVNDUklQVE9SX0xP
QUQgfCAoNCAtIDIpOworCSpjcysrID0gMDsKKwkqY3MrKyA9IGNvdW50ICogOCAqIHNpemVvZigq
Y3MpOworCisJLyoKKwkgKiBpbnRlcmZhY2UgZGVzY3JpcHRvciBhZGRyZXNzIC0gaXQgaXMgcmVs
YXRpdmUgdG8gdGhlIGR5bmFtaWNzIGJhc2UKKwkgKiBhZGRyZXNzCisJICovCisJKmNzKysgPSBp
bnRlcmZhY2VfZGVzY3JpcHRvcjsKKwliYXRjaF9hZHZhbmNlKGJhdGNoLCBjcyk7Cit9CisKK3N0
YXRpYyB2b2lkCitnZW43X2VtaXRfbWVkaWFfb2JqZWN0KHN0cnVjdCBiYXRjaF9jaHVuayAqYmF0
Y2gsCisJCSAgICAgICB1bnNpZ25lZCBpbnQgbWVkaWFfb2JqZWN0X2luZGV4KQoreworCXVuc2ln
bmVkIGludCB4X29mZnNldCA9IChtZWRpYV9vYmplY3RfaW5kZXggJSAxNikgKiA2NDsKKwl1bnNp
Z25lZCBpbnQgeV9vZmZzZXQgPSAobWVkaWFfb2JqZWN0X2luZGV4IC8gMTYpICogMTY7CisJdW5z
aWduZWQgaW50IGlubGluZV9kYXRhX3NpemU7CisJdW5zaWduZWQgaW50IG1lZGlhX2JhdGNoX3Np
emU7CisJdW5zaWduZWQgaW50IGk7CisJdTMyICpjczsKKworCWlubGluZV9kYXRhX3NpemUgPSAx
MTIgKiA4OworCW1lZGlhX2JhdGNoX3NpemUgPSBpbmxpbmVfZGF0YV9zaXplICsgNjsKKworCWNz
ID0gYmF0Y2hfYWxsb2NfaXRlbXMoYmF0Y2gsIDgsIG1lZGlhX2JhdGNoX3NpemUpOworCisJKmNz
KysgPSBNRURJQV9PQkpFQ1QgfCAobWVkaWFfYmF0Y2hfc2l6ZSAtIDIpOworCisJLyogaW50ZXJm
YWNlIGRlc2NyaXB0b3Igb2Zmc2V0ICovCisJKmNzKysgPSAwOworCisJLyogd2l0aG91dCBpbmRp
cmVjdCBkYXRhICovCisJKmNzKysgPSAwOworCSpjcysrID0gMDsKKworCS8qIHNjb3JlYm9hcmQg
Ki8KKwkqY3MrKyA9IDA7CisJKmNzKysgPSAwOworCisJLyogaW5saW5lICovCisJKmNzKysgPSAo
eV9vZmZzZXQgPDwgMTYpIHwgKHhfb2Zmc2V0KTsKKwkqY3MrKyA9IDA7CisJKmNzKysgPSBHVDNf
SU5MSU5FX0RBVEFfREVMQVlTOworCWZvciAoaSA9IDM7IGkgPCBpbmxpbmVfZGF0YV9zaXplOyBp
KyspCisJCSpjcysrID0gMDsKKworCWJhdGNoX2FkdmFuY2UoYmF0Y2gsIGNzKTsKK30KKworc3Rh
dGljIHZvaWQgZ2VuN19lbWl0X3BpcGVsaW5lX2ZsdXNoKHN0cnVjdCBiYXRjaF9jaHVuayAqYmF0
Y2gpCit7CisJdTMyICpjcyA9IGJhdGNoX2FsbG9jX2l0ZW1zKGJhdGNoLCAwLCA1KTsKKworCSpj
cysrID0gR0ZYX09QX1BJUEVfQ09OVFJPTCg1KTsKKwkqY3MrKyA9IFBJUEVfQ09OVFJPTF9TVEFU
RV9DQUNIRV9JTlZBTElEQVRFIHwKKwkJUElQRV9DT05UUk9MX0dMT0JBTF9HVFRfSVZCOworCSpj
cysrID0gMDsKKwkqY3MrKyA9IDA7CisJKmNzKysgPSAwOworCWJhdGNoX2FkdmFuY2UoYmF0Y2gs
IGNzKTsKK30KKworc3RhdGljIHZvaWQgZW1pdF9iYXRjaChzdHJ1Y3QgaTkxNV92bWEgKiBjb25z
dCB2bWEsCisJCSAgICAgICB1MzIgKnN0YXJ0LAorCQkgICAgICAgY29uc3Qgc3RydWN0IGJhdGNo
X3ZhbHMgKmJ2KQoreworCXN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1ID0gdm1hLT52bS0+
aTkxNTsKKwl1bnNpZ25lZCBpbnQgZGVzY19jb3VudCA9IDY0OworCWNvbnN0IHUzMiB1cmJfc2l6
ZSA9IDExMjsKKwlzdHJ1Y3QgYmF0Y2hfY2h1bmsgY21kcywgc3RhdGU7CisJdTMyIGludGVyZmFj
ZV9kZXNjcmlwdG9yOworCXVuc2lnbmVkIGludCBpOworCisJYmF0Y2hfaW5pdCgmY21kcywgdm1h
LCBzdGFydCwgMCwgYnYtPmNtZF9zaXplKTsKKwliYXRjaF9pbml0KCZzdGF0ZSwgdm1hLCBzdGFy
dCwgYnYtPnN0YXRlX3N0YXJ0LCBidi0+c3RhdGVfc2l6ZSk7CisKKwlpbnRlcmZhY2VfZGVzY3Jp
cHRvciA9CisJCWdlbjdfZmlsbF9pbnRlcmZhY2VfZGVzY3JpcHRvcigmc3RhdGUsIGJ2LAorCQkJ
CQkgICAgICAgSVNfSEFTV0VMTChpOTE1KSA/CisJCQkJCSAgICAgICAmY2Jfa2VybmVsX2dlbjdf
NSA6CisJCQkJCSAgICAgICAmY2Jfa2VybmVsX2dlbjcsCisJCQkJCSAgICAgICBkZXNjX2NvdW50
KTsKKwlnZW43X2VtaXRfcGlwZWxpbmVfZmx1c2goJmNtZHMpOworCWJhdGNoX2FkZCgmY21kcywg
UElQRUxJTkVfU0VMRUNUIHwgUElQRUxJTkVfU0VMRUNUX01FRElBKTsKKwliYXRjaF9hZGQoJmNt
ZHMsIE1JX05PT1ApOworCWdlbjdfZW1pdF9zdGF0ZV9iYXNlX2FkZHJlc3MoJmNtZHMsIGludGVy
ZmFjZV9kZXNjcmlwdG9yKTsKKwlnZW43X2VtaXRfcGlwZWxpbmVfZmx1c2goJmNtZHMpOworCisJ
Z2VuN19lbWl0X3ZmZV9zdGF0ZSgmY21kcywgYnYsIHVyYl9zaXplIC0gMSwgMCwgMCk7CisKKwln
ZW43X2VtaXRfaW50ZXJmYWNlX2Rlc2NyaXB0b3JfbG9hZCgmY21kcywKKwkJCQkJICAgIGludGVy
ZmFjZV9kZXNjcmlwdG9yLAorCQkJCQkgICAgZGVzY19jb3VudCk7CisKKwlmb3IgKGkgPSAwOyBp
IDwgYnYtPm1heF9wcmltaXRpdmVzOyBpKyspCisJCWdlbjdfZW1pdF9tZWRpYV9vYmplY3QoJmNt
ZHMsIGkpOworCisJYmF0Y2hfYWRkKCZjbWRzLCBNSV9CQVRDSF9CVUZGRVJfRU5EKTsKK30KKwor
aW50IGdlbjdfc2V0dXBfY2xlYXJfZ3ByX2JiKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKiBjb25z
dCBlbmdpbmUsCisJCQkgICAgc3RydWN0IGk5MTVfdm1hICogY29uc3Qgdm1hKQoreworCXN0cnVj
dCBiYXRjaF92YWxzIGJ2OworCXUzMiAqYmF0Y2g7CisKKwliYXRjaF9nZXRfZGVmYXVsdHMoZW5n
aW5lLT5pOTE1LCAmYnYpOworCWlmICghdm1hKQorCQlyZXR1cm4gYnYubWF4X3NpemU7CisKKwlH
RU1fQlVHX09OKHZtYS0+b2JqLT5iYXNlLnNpemUgPCBidi5tYXhfc2l6ZSk7CisKKwliYXRjaCA9
IGk5MTVfZ2VtX29iamVjdF9waW5fbWFwKHZtYS0+b2JqLCBJOTE1X01BUF9XQyk7CisJaWYgKElT
X0VSUihiYXRjaCkpCisJCXJldHVybiBQVFJfRVJSKGJhdGNoKTsKKworCWVtaXRfYmF0Y2godm1h
LCBtZW1zZXQoYmF0Y2gsIDAsIGJ2Lm1heF9zaXplKSwgJmJ2KTsKKworCWk5MTVfZ2VtX29iamVj
dF9mbHVzaF9tYXAodm1hLT5vYmopOworCWk5MTVfZ2VtX29iamVjdF91bnBpbl9tYXAodm1hLT5v
YmopOworCisJcmV0dXJuIDA7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
dC9nZW43X3JlbmRlcmNsZWFyLmggYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9nZW43X3JlbmRl
cmNsZWFyLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi5iYjEwMDc0
OGUyYzYKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9nZW43X3Jl
bmRlcmNsZWFyLmgKQEAgLTAsMCArMSwxNSBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6
IE1JVCAqLworLyoKKyAqIENvcHlyaWdodCDCqSAyMDE5IEludGVsIENvcnBvcmF0aW9uCisgKi8K
KworI2lmbmRlZiBfX0dFTjdfUkVOREVSQ0xFQVJfSF9fCisjZGVmaW5lIF9fR0VON19SRU5ERVJD
TEVBUl9IX18KKworc3RydWN0IGludGVsX2VuZ2luZV9jczsKK3N0cnVjdCBpOTE1X3ZtYTsKKwor
aW50IGdlbjdfc2V0dXBfY2xlYXJfZ3ByX2JiKHN0cnVjdCBpbnRlbF9lbmdpbmVfY3MgKiBjb25z
dCBlbmdpbmUsCisJCQkgICAgc3RydWN0IGk5MTVfdm1hICogY29uc3Qgdm1hKTsKKworI2VuZGlm
IC8qIF9fR0VON19SRU5ERVJDTEVBUl9IX18gKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3Qv
aW50ZWxfZ3B1X2NvbW1hbmRzLmgKaW5kZXggNTFiODcxODUxM2JjLi5mMDQyMTRhNTRmNzUgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dwdV9jb21tYW5kcy5oCkBAIC0yOTIs
MTAgKzI5MiwyMSBAQAogI2RlZmluZSBNSV9TVE9SRV9VUkJfTUVNICAgICAgICBNSV9JTlNUUigw
eDJELCAwKQogI2RlZmluZSBNSV9DT05ESVRJT05BTF9CQVRDSF9CVUZGRVJfRU5EIE1JX0lOU1RS
KDB4MzYsIDApCiAKLSNkZWZpbmUgUElQRUxJTkVfU0VMRUNUICAgICAgICAgICAgICAgICgoMHgz
PDwyOSl8KDB4MTw8MjcpfCgweDE8PDI0KXwoMHg0PDwxNikpCi0jZGVmaW5lIEdGWF9PUF8zRFNU
QVRFX1ZGX1NUQVRJU1RJQ1MgICAoKDB4Mzw8MjkpfCgweDE8PDI3KXwoMHgwPDwyNCl8KDB4Qjw8
MTYpKQotI2RlZmluZSBNRURJQV9WRkVfU1RBVEUgICAgICAgICAgICAgICAgKCgweDM8PDI5KXwo
MHgyPDwyNyl8KDB4MDw8MjQpfCgweDA8PDE2KSkKKyNkZWZpbmUgU1RBVEVfQkFTRV9BRERSRVNT
IFwKKwkoKDB4MyA8PCAyOSkgfCAoMHgwIDw8IDI3KSB8ICgweDEgPDwgMjQpIHwgKDB4MSA8PCAx
NikpCisjZGVmaW5lIEJBU0VfQUREUkVTU19NT0RJRlkJCVJFR19CSVQoMCkKKyNkZWZpbmUgUElQ
RUxJTkVfU0VMRUNUIFwKKwkoKDB4MyA8PCAyOSkgfCAoMHgxIDw8IDI3KSB8ICgweDEgPDwgMjQp
IHwgKDB4NCA8PCAxNikpCisjZGVmaW5lIFBJUEVMSU5FX1NFTEVDVF9NRURJQQkgICAgICAgUkVH
X0JJVCgwKQorI2RlZmluZSBHRlhfT1BfM0RTVEFURV9WRl9TVEFUSVNUSUNTIFwKKwkoKDB4MyA8
PCAyOSkgfCAoMHgxIDw8IDI3KSB8ICgweDAgPDwgMjQpIHwgKDB4QiA8PCAxNikpCisjZGVmaW5l
IE1FRElBX1ZGRV9TVEFURSBcCisJKCgweDMgPDwgMjkpIHwgKDB4MiA8PCAyNykgfCAoMHgwIDw8
IDI0KSB8ICgweDAgPDwgMTYpKQogI2RlZmluZSAgTUVESUFfVkZFX1NUQVRFX01NSU9fQUNDRVNT
X01BU0sgKDB4MTgpCisjZGVmaW5lIE1FRElBX0lOVEVSRkFDRV9ERVNDUklQVE9SX0xPQUQgXAor
CSgoMHgzIDw8IDI5KSB8ICgweDIgPDwgMjcpIHwgKDB4MCA8PCAyNCkgfCAoMHgyIDw8IDE2KSkK
KyNkZWZpbmUgTUVESUFfT0JKRUNUIFwKKwkoKDB4MyA8PCAyOSkgfCAoMHgyIDw8IDI3KSB8ICgw
eDEgPDwgMjQpIHwgKDB4MCA8PCAxNikpCiAjZGVmaW5lIEdQR1BVX09CSkVDVCAgICAgICAgICAg
ICAgICAgICAoKDB4Mzw8MjkpfCgweDI8PDI3KXwoMHgxPDwyNCl8KDB4NDw8MTYpKQogI2RlZmlu
ZSBHUEdQVV9XQUxLRVIgICAgICAgICAgICAgICAgICAgKCgweDM8PDI5KXwoMHgyPDwyNyl8KDB4
MTw8MjQpfCgweDU8PDE2KSkKICNkZWZpbmUgR0ZYX09QXzNEU1RBVEVfRFg5X0NPTlNUQU5URl9W
UyBcCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1Ym1p
c3Npb24uYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX3Jpbmdfc3VibWlzc2lvbi5j
CmluZGV4IDU5MzcxMDU1OGI5OS4uNmQ2OTM3ZGFmYzA4IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1Ym1pc3Npb24uYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9yaW5nX3N1Ym1pc3Npb24uYwpAQCAtMzQsNiArMzQsNyBAQAogI2lu
Y2x1ZGUgImdlbS9pOTE1X2dlbV9jb250ZXh0LmgiCiAKICNpbmNsdWRlICJnZW42X3BwZ3R0Lmgi
CisjaW5jbHVkZSAiZ2VuN19yZW5kZXJjbGVhci5oIgogI2luY2x1ZGUgImk5MTVfZHJ2LmgiCiAj
aW5jbHVkZSAiaTkxNV90cmFjZS5oIgogI2luY2x1ZGUgImludGVsX2NvbnRleHQuaCIKQEAgLTE5
ODMsNyArMTk4NCw3IEBAIHN0YXRpYyB2b2lkIHNldHVwX3ZlY3Moc3RydWN0IGludGVsX2VuZ2lu
ZV9jcyAqZW5naW5lKQogc3RhdGljIGludCBnZW43X2N0eF9zd2l0Y2hfYmJfc2V0dXAoc3RydWN0
IGludGVsX2VuZ2luZV9jcyAqIGNvbnN0IGVuZ2luZSwKIAkJCQkgICAgc3RydWN0IGk5MTVfdm1h
ICogY29uc3Qgdm1hKQogewotCXJldHVybiAwOworCXJldHVybiBnZW43X3NldHVwX2NsZWFyX2dw
cl9iYihlbmdpbmUsIHZtYSk7CiB9CiAKIHN0YXRpYyBpbnQgZ2VuN19jdHhfc3dpdGNoX2JiX2lu
aXQoc3RydWN0IGludGVsX2VuZ2luZV9jcyAqZW5naW5lKQotLSAKMi4yMC4xCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBs
aXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVz
a3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWwK
