Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id AB549F1233
	for <lists+dri-devel@lfdr.de>; Wed,  6 Nov 2019 10:31:45 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AD5CF6EC7E;
	Wed,  6 Nov 2019 09:31:36 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 775396EC7A
 for <dri-devel@lists.freedesktop.org>; Wed,  6 Nov 2019 09:31:28 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id DDB67B415;
 Wed,  6 Nov 2019 09:31:25 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: daniel@ffwll.ch,
	christian.koenig@amd.com,
	noralf@tronnes.org
Subject: [PATCH 6/8] fbdev: Export default read and write operations as
 fb_cfb_{read, write}()
Date: Wed,  6 Nov 2019 10:31:19 +0100
Message-Id: <20191106093121.21762-7-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191106093121.21762-1-tzimmermann@suse.de>
References: <20191106093121.21762-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UmVhZCBhbmQgd3JpdGUgb3BlcmF0aW9ucyBvbiB0aGUgZmJkZXYgZnJhbWVidWZmZXIgY2FuIG5v
dyBiZSBjYWxsZWQgYnkKaW4ta2VybmVsIHVzZXJzLiBUaGlzIGlzIHJlcXVpcmVkIGJ5IERSTSdz
IGZiZGV2IGhlbHBlcnMuCgpTaWduZWQtb2ZmLWJ5OiBUaG9tYXMgWmltbWVybWFubiA8dHppbW1l
cm1hbm5Ac3VzZS5kZT4KLS0tCiBkcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJtZW0uYyB8IDUz
ICsrKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tCiBpbmNsdWRlL2xpbnV4L2ZiLmggICAg
ICAgICAgICAgICB8ICA1ICsrKwogMiBmaWxlcyBjaGFuZ2VkLCA0NiBpbnNlcnRpb25zKCspLCAx
MiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJt
ZW0uYyBiL2RyaXZlcnMvdmlkZW8vZmJkZXYvY29yZS9mYm1lbS5jCmluZGV4IDk1YzMyOTUyZmE4
YS4uZTQ5Y2YyOTg4MDAxIDEwMDY0NAotLS0gYS9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJt
ZW0uYworKysgYi9kcml2ZXJzL3ZpZGVvL2ZiZGV2L2NvcmUvZmJtZW0uYwpAQCAtNzU0LDExICs3
NTQsMTAgQEAgc3RhdGljIHN0cnVjdCBmYl9pbmZvICpmaWxlX2ZiX2luZm8oc3RydWN0IGZpbGUg
KmZpbGUpCiAJcmV0dXJuIGluZm87CiB9CiAKLXN0YXRpYyBzc2l6ZV90Ci1mYl9yZWFkKHN0cnVj
dCBmaWxlICpmaWxlLCBjaGFyIF9fdXNlciAqYnVmLCBzaXplX3QgY291bnQsIGxvZmZfdCAqcHBv
cykKK3NzaXplX3QKK2ZiX2NmYl9yZWFkKHN0cnVjdCBmYl9pbmZvICppbmZvLCBjaGFyIF9fdXNl
ciAqYnVmLCBzaXplX3QgY291bnQsIGxvZmZfdCAqcHBvcykKIHsKIAl1bnNpZ25lZCBsb25nIHAg
PSAqcHBvczsKLQlzdHJ1Y3QgZmJfaW5mbyAqaW5mbyA9IGZpbGVfZmJfaW5mbyhmaWxlKTsKIAl1
OCAqYnVmZmVyLCAqZHN0OwogCXU4IF9faW9tZW0gKnNyYzsKIAlpbnQgYywgY250ID0gMCwgZXJy
ID0gMDsKQEAgLTc3MCw5ICs3NjksNiBAQCBmYl9yZWFkKHN0cnVjdCBmaWxlICpmaWxlLCBjaGFy
IF9fdXNlciAqYnVmLCBzaXplX3QgY291bnQsIGxvZmZfdCAqcHBvcykKIAlpZiAoaW5mby0+c3Rh
dGUgIT0gRkJJTkZPX1NUQVRFX1JVTk5JTkcpCiAJCXJldHVybiAtRVBFUk07CiAKLQlpZiAoaW5m
by0+ZmJvcHMtPmZiX3JlYWQpCi0JCXJldHVybiBpbmZvLT5mYm9wcy0+ZmJfcmVhZChpbmZvLCBi
dWYsIGNvdW50LCBwcG9zKTsKLQkKIAl0b3RhbF9zaXplID0gaW5mby0+c2NyZWVuX3NpemU7CiAK
IAlpZiAodG90YWxfc2l6ZSA9PSAwKQpAQCAtODE4LDEyICs4MTQsMTMgQEAgZmJfcmVhZChzdHJ1
Y3QgZmlsZSAqZmlsZSwgY2hhciBfX3VzZXIgKmJ1Ziwgc2l6ZV90IGNvdW50LCBsb2ZmX3QgKnBw
b3MpCiAKIAlyZXR1cm4gKGVycikgPyBlcnIgOiBjbnQ7CiB9CitFWFBPUlRfU1lNQk9MKGZiX2Nm
Yl9yZWFkKTsKIAotc3RhdGljIHNzaXplX3QKLWZiX3dyaXRlKHN0cnVjdCBmaWxlICpmaWxlLCBj
b25zdCBjaGFyIF9fdXNlciAqYnVmLCBzaXplX3QgY291bnQsIGxvZmZfdCAqcHBvcykKK3NzaXpl
X3QKK2ZiX2NmYl93cml0ZShzdHJ1Y3QgZmJfaW5mbyAqaW5mbywgY29uc3QgY2hhciBfX3VzZXIg
KmJ1Ziwgc2l6ZV90IGNvdW50LAorCSAgICAgbG9mZl90ICpwcG9zKQogewogCXVuc2lnbmVkIGxv
bmcgcCA9ICpwcG9zOwotCXN0cnVjdCBmYl9pbmZvICppbmZvID0gZmlsZV9mYl9pbmZvKGZpbGUp
OwogCXU4ICpidWZmZXIsICpzcmM7CiAJdTggX19pb21lbSAqZHN0OwogCWludCBjLCBjbnQgPSAw
LCBlcnIgPSAwOwpAQCAtODM1LDkgKzgzMiw2IEBAIGZiX3dyaXRlKHN0cnVjdCBmaWxlICpmaWxl
LCBjb25zdCBjaGFyIF9fdXNlciAqYnVmLCBzaXplX3QgY291bnQsIGxvZmZfdCAqcHBvcykKIAlp
ZiAoaW5mby0+c3RhdGUgIT0gRkJJTkZPX1NUQVRFX1JVTk5JTkcpCiAJCXJldHVybiAtRVBFUk07
CiAKLQlpZiAoaW5mby0+ZmJvcHMtPmZiX3dyaXRlKQotCQlyZXR1cm4gaW5mby0+ZmJvcHMtPmZi
X3dyaXRlKGluZm8sIGJ1ZiwgY291bnQsIHBwb3MpOwotCQogCXRvdGFsX3NpemUgPSBpbmZvLT5z
Y3JlZW5fc2l6ZTsKIAogCWlmICh0b3RhbF9zaXplID09IDApCkBAIC04OTAsNiArODg0LDQxIEBA
IGZiX3dyaXRlKHN0cnVjdCBmaWxlICpmaWxlLCBjb25zdCBjaGFyIF9fdXNlciAqYnVmLCBzaXpl
X3QgY291bnQsIGxvZmZfdCAqcHBvcykKIAogCXJldHVybiAoY250KSA/IGNudCA6IGVycjsKIH0K
K0VYUE9SVF9TWU1CT0woZmJfY2ZiX3dyaXRlKTsKKworc3RhdGljIHNzaXplX3QKK2ZiX3JlYWQo
c3RydWN0IGZpbGUgKmZpbGUsIGNoYXIgX191c2VyICpidWYsIHNpemVfdCBjb3VudCwgbG9mZl90
ICpwcG9zKQoreworCXN0cnVjdCBmYl9pbmZvICppbmZvID0gZmlsZV9mYl9pbmZvKGZpbGUpOwor
CisJaWYgKCFpbmZvIHx8ICFpbmZvLT5zY3JlZW5fYmFzZSkKKwkJcmV0dXJuIC1FTk9ERVY7CisK
KwlpZiAoaW5mby0+c3RhdGUgIT0gRkJJTkZPX1NUQVRFX1JVTk5JTkcpCisJCXJldHVybiAtRVBF
Uk07CisKKwlpZiAoaW5mby0+ZmJvcHMtPmZiX3JlYWQpCisJCXJldHVybiBpbmZvLT5mYm9wcy0+
ZmJfcmVhZChpbmZvLCBidWYsIGNvdW50LCBwcG9zKTsKKworCXJldHVybiBmYl9jZmJfcmVhZChp
bmZvLCBidWYsIGNvdW50LCBwcG9zKTsKK30KKworc3RhdGljIHNzaXplX3QKK2ZiX3dyaXRlKHN0
cnVjdCBmaWxlICpmaWxlLCBjb25zdCBjaGFyIF9fdXNlciAqYnVmLCBzaXplX3QgY291bnQsIGxv
ZmZfdCAqcHBvcykKK3sKKwlzdHJ1Y3QgZmJfaW5mbyAqaW5mbyA9IGZpbGVfZmJfaW5mbyhmaWxl
KTsKKworCWlmICghaW5mbyB8fCAhaW5mby0+c2NyZWVuX2Jhc2UpCisJCXJldHVybiAtRU5PREVW
OworCisJaWYgKGluZm8tPnN0YXRlICE9IEZCSU5GT19TVEFURV9SVU5OSU5HKQorCQlyZXR1cm4g
LUVQRVJNOworCisJaWYgKGluZm8tPmZib3BzLT5mYl93cml0ZSkKKwkJcmV0dXJuIGluZm8tPmZi
b3BzLT5mYl93cml0ZShpbmZvLCBidWYsIGNvdW50LCBwcG9zKTsKKworCXJldHVybiBmYl9jZmJf
d3JpdGUoaW5mbywgYnVmLCBjb3VudCwgcHBvcyk7Cit9CiAKIGludAogZmJfcGFuX2Rpc3BsYXko
c3RydWN0IGZiX2luZm8gKmluZm8sIHN0cnVjdCBmYl92YXJfc2NyZWVuaW5mbyAqdmFyKQpkaWZm
IC0tZ2l0IGEvaW5jbHVkZS9saW51eC9mYi5oIGIvaW5jbHVkZS9saW51eC9mYi5oCmluZGV4IDQx
ZTAwNjllY2EwYS4uYzY5ZTA5OGU2ZGM1IDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4L2ZiLmgK
KysrIGIvaW5jbHVkZS9saW51eC9mYi5oCkBAIC01OTIsNiArNTkyLDExIEBAIGV4dGVybiBpbnQg
ZmJfYmxhbmsoc3RydWN0IGZiX2luZm8gKmluZm8sIGludCBibGFuayk7CiBleHRlcm4gdm9pZCBj
ZmJfZmlsbHJlY3Qoc3RydWN0IGZiX2luZm8gKmluZm8sIGNvbnN0IHN0cnVjdCBmYl9maWxscmVj
dCAqcmVjdCk7IAogZXh0ZXJuIHZvaWQgY2ZiX2NvcHlhcmVhKHN0cnVjdCBmYl9pbmZvICppbmZv
LCBjb25zdCBzdHJ1Y3QgZmJfY29weWFyZWEgKmFyZWEpOyAKIGV4dGVybiB2b2lkIGNmYl9pbWFn
ZWJsaXQoc3RydWN0IGZiX2luZm8gKmluZm8sIGNvbnN0IHN0cnVjdCBmYl9pbWFnZSAqaW1hZ2Up
OworZXh0ZXJuIHNzaXplX3QgZmJfY2ZiX3JlYWQoc3RydWN0IGZiX2luZm8gKmluZm8sIGNoYXIg
X191c2VyICpidWYsCisJCQkgICBzaXplX3QgY291bnQsIGxvZmZfdCAqcHBvcyk7CitleHRlcm4g
c3NpemVfdCBmYl9jZmJfd3JpdGUoc3RydWN0IGZiX2luZm8gKmluZm8sIGNvbnN0IGNoYXIgX191
c2VyICpidWYsCisJCQkgICAgc2l6ZV90IGNvdW50LCBsb2ZmX3QgKnBwb3MpOworCiAvKgogICog
RHJhd2luZyBvcGVyYXRpb25zIHdoZXJlIGZyYW1lYnVmZmVyIGlzIGluIHN5c3RlbSBSQU0KICAq
LwotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2
ZWw=
