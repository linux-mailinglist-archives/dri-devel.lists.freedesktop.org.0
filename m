Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id C480149224
	for <lists+dri-devel@lfdr.de>; Mon, 17 Jun 2019 23:10:25 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3DBEA6E0B6;
	Mon, 17 Jun 2019 21:10:23 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 039D76E0A6
 for <dri-devel@lists.freedesktop.org>; Mon, 17 Jun 2019 21:09:58 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 75F1D120A;
 Mon, 17 Jun 2019 23:09:54 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart+renesas@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v3 06/10] drm: rcar-du: Handle CRTC configuration from commit
 tail handler
Date: Tue, 18 Jun 2019 00:09:26 +0300
Message-Id: <20190617210930.6054-7-laurent.pinchart+renesas@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190617210930.6054-1-laurent.pinchart+renesas@ideasonboard.com>
References: <20190617210930.6054-1-laurent.pinchart+renesas@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1560805794;
 bh=yL+6oclHjQiqkSoIjsFaHo3x81rVWwwP0zTyIDZf0iE=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=AajAoR9wl1gTDwoibtkta+jCZHwbumig2ThK6bgeqQ0kVvJDkKj9CWvbRdgcLS4xI
 cR1NEql9qYOdn5ty0vXBwtnu37h80zPX87lf34av61CU4+rAsY90v0Z2Fa45axKeF0
 LwvCM2VUEbjmc5M1tX0jPDaXQvlygTFdNDldW4A0=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: linux-renesas-soc@vger.kernel.org,
 Kieran Bingham <kieran.bingham@ideasonboard.com>, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogS2llcmFuIEJpbmdoYW0gPGtpZXJhbi5iaW5naGFtK3JlbmVzYXNAaWRlYXNvbmJvYXJk
LmNvbT4KClRoZSBDUlRDIG1vZGUgc2V0dGluZyBhbmQgcm91dGluZyBjb25maWd1cmF0aW9uIGFy
ZSBwZXJmb3JtZWQgYXQgdGhlCmVhcmxpZXN0IG9mIGF0b21pYyBlbmFibGUgYW5kIGF0b21pYyBi
ZWdpbiwgdG8gZW5zdXJlIHRoYXQgYSB2YWxpZApjb25maWd1cmF0aW9uIGlzIGFwcGxpZWQgdG8g
dGhlIGhhcmR3YXJlIGJlZm9yZSB0aGUgQ1JUQyBnZXRzIGVuYWJsZWQKYW5kIGJlZm9yZSBwbGFu
ZXMgYXJlIHNldHVwICh0aGUgbGF0dGVyIGJlaW5nIHJlcXVpcmVkIGluIHBhcnRpY3VsYXIgYnkK
dGhlIFZTUCkuIFRoaXMgcmVxdWlyZXMgdGhlIHJjYXJfZHVfY3J0YyBzdHJ1Y3R1cmUgdG8gdHJh
Y2sgdGhlIENSVEMKZW5hYmxlZCBzdGF0ZS4KClNpbXBsaWZ5IHRoZSBjb2RlIGFuZCByZW1vdmUg
dGhlIG1hbnVhbCBzdGF0ZSB0cmFja2luZyBieSBtb3ZpbmcgQ1JUQwpzZXR1cCB0byBhIG5ldyBy
Y2FyX2R1X2NydGNfYXRvbWljX21vZGVzZXQoKSBmdW5jdGlvbiwgY2FsbGVkIGRpcmVjdGx5CmZy
b20gdGhlIGNvbW1pdCB0YWlsIGhhbmRsZXIuIFRoZSBmdW5jdGlvbiBpdGVyYXRlcyBvdmVyIGFs
bCBDUlRDcyBpbgp0aGUgc3RhdGUgdHJhbnNhY3Rpb24gYW5kIHBlcmZvcm1zIENSVEMgbW9kZSBz
ZXR0aW5nLCByb3V0aW5nCmNvbmZpZ3VyYXRpb24gYW5kIFZTUCBjb25maWd1cmF0aW9uLgoKZHJt
X2NydGNfdmJsYW5rX29uKCkgaGFzIHRvIGJlIGNhbGxlZCBmcm9tIHRoZSBhdG9taWMgYmVnaW4g
aGFuZGxlciwgdG8KZW5zdXJlIHRoYXQgdmVydGljYWwgYmxhbmtpbmcgcmVwb3J0aW5nIGlzIGVu
YWJsZWQgYmVmb3JlIHRoZSBjYWxsIHRvCmRybV9jcnRjX3ZibGFua19nZXQoKSBpbiB0aGUgYXRv
bWljIGZsdXNoIGhhbmRsZXIuIEFzIHRoZQpkcm1fY3J0Y192Ymxhbmtfb24oKSBhbmQgZHJtX2Ny
dGNfdmJsYW5rX29mZigpIGNhbGxzIGRvbid0IG5lZWQgdG8gYmUKYmFsYW5jZWQgdGhpcyBpcyBu
b3QgYW4gaXNzdWUuIEEgYmFsYW5jZWQgYWx0ZXJuYXRpdmUgd291bGQgaGF2ZSBiZWVuIHRvCmNh
bGwgZHJtX2NydGNfdmJsYW5rX29uKCkgYW5kIGRybV9jcnRjX3ZibGFua19vZmYoKSBmcm9tIHRo
ZSBDUlRDIGV4aXQKYW5kIGVudGVyIHN0YW5kYnkgaGFuZGxlcnMgcmVzcGVjdGl2ZWx5LCBidXQK
ZHJtX2F0b21pY19oZWxwZXJfY29tbWl0X21vZGVzZXRfZGlzYWJsZXMoKSBjb21wbGFpbnMgaWYK
ZHJtX2NydGNfdmJsYW5rX29mZigpIGhhc24ndCBiZWVuIGNhbGxlZCBieSB0aGUgYXRvbWljIGRp
c2FibGUgaGFuZGxlci4KCkFzIGEgcmVzdWx0LCB0aGUgdnNwMV9kdV9hdG9taWNfZmx1c2goKSBv
cGVyYXRpb24gY2FuIGJlIGNhbGxlZCB3aXRoIHRoZQpEUk0gcGlwZWxpbmUgZGlzYWJsZWQuIENv
cnJlY3Qgb3BlcmF0aW9uIGhhcyBiZWVuIGVuc3VyZWQgYnkgIm1lZGlhOgp2c3AxOiBkcm06IERv
bid0IGNvbmZpZ3VyZSBoYXJkd2FyZSB3aGVuIHRoZSBwaXBlbGluZSBpcyBkaXNhYmxlZCIuCgpT
aWduZWQtb2ZmLWJ5OiBLaWVyYW4gQmluZ2hhbSA8a2llcmFuLmJpbmdoYW0rcmVuZXNhc0BpZGVh
c29uYm9hcmQuY29tPgpTaWduZWQtb2ZmLWJ5OiBMYXVyZW50IFBpbmNoYXJ0IDxsYXVyZW50LnBp
bmNoYXJ0K3JlbmVzYXNAaWRlYXNvbmJvYXJkLmNvbT4KLS0tCkNoYW5nZXMgc2luY2UgdjI6Cgot
IERlY29uc3RydWN0IHJjYXJfZHVfY3J0Y19zZXR1cCgpIGNvbXBsZXRlbHkKLS0tCiBkcml2ZXJz
L2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2NydGMuYyB8IDg5ICsrKysrKysrKysrLS0tLS0tLS0t
LS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2NydGMuaCB8ICA0ICstCiBk
cml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2ttcy5jICB8ICAxICsKIDMgZmlsZXMgY2hh
bmdlZCwgNDIgaW5zZXJ0aW9ucygrKSwgNTIgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9jcnRjLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmNh
ci1kdS9yY2FyX2R1X2NydGMuYwppbmRleCAyM2Y0YmRlZjBlM2EuLmQxMWE0NzRmNmY3MiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9jcnRjLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9kdV9jcnRjLmMKQEAgLTQ3OCwyMiArNDc4LDYgQEAg
c3RhdGljIHZvaWQgcmNhcl9kdV9jcnRjX3dhaXRfcGFnZV9mbGlwKHN0cnVjdCByY2FyX2R1X2Ny
dGMgKnJjcnRjKQogICogU3RhcnQvU3RvcCBhbmQgU3VzcGVuZC9SZXN1bWUKICAqLwogCi1zdGF0
aWMgdm9pZCByY2FyX2R1X2NydGNfc2V0dXAoc3RydWN0IHJjYXJfZHVfY3J0YyAqcmNydGMpCi17
Ci0JLyogQ29uZmlndXJlIGRpc3BsYXkgdGltaW5ncyBhbmQgb3V0cHV0IHJvdXRpbmcgKi8KLQly
Y2FyX2R1X2NydGNfc2V0X2Rpc3BsYXlfdGltaW5nKHJjcnRjKTsKLQlyY2FyX2R1X2dyb3VwX3Nl
dF9yb3V0aW5nKHJjcnRjLT5ncm91cCk7Ci0KLQkvKiBFbmFibGUgdGhlIFZTUCBjb21wb3NpdG9y
LiAqLwotCWlmIChyY2FyX2R1X2hhcyhyY3J0Yy0+ZGV2LCBSQ0FSX0RVX0ZFQVRVUkVfVlNQMV9T
T1VSQ0UpKSB7Ci0JCXJjYXJfZHVfdnNwX21vZGVzZXQocmNydGMpOwotCQlyY2FyX2R1X3ZzcF9l
bmFibGUocmNydGMpOwotCX0KLQotCS8qIFR1cm4gdmVydGljYWwgYmxhbmtpbmcgaW50ZXJydXB0
IHJlcG9ydGluZyBvbi4gKi8KLQlkcm1fY3J0Y192Ymxhbmtfb24oJnJjcnRjLT5jcnRjKTsKLX0K
LQogc3RhdGljIGludCByY2FyX2R1X2NydGNfZXhpdF9zdGFuZGJ5KHN0cnVjdCByY2FyX2R1X2Ny
dGMgKnJjcnRjKQogewogCWludCByZXQ7CkBAIC01MzQsMjQgKzUxOCw2IEBAIHN0YXRpYyB2b2lk
IHJjYXJfZHVfY3J0Y19lbnRlcl9zdGFuZGJ5KHN0cnVjdCByY2FyX2R1X2NydGMgKnJjcnRjKQog
CWNsa19kaXNhYmxlX3VucHJlcGFyZShyY3J0Yy0+Y2xvY2spOwogfQogCi1zdGF0aWMgdm9pZCBy
Y2FyX2R1X2NydGNfZ2V0KHN0cnVjdCByY2FyX2R1X2NydGMgKnJjcnRjKQotewotCS8qCi0JICog
R3VhcmQgYWdhaW5zdCBkb3VibGUtZ2V0LCBhcyB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIGZyb20g
Ym90aCB0aGUKLQkgKiAuYXRvbWljX2VuYWJsZSgpIGFuZCAuYXRvbWljX2JlZ2luKCkgaGFuZGxl
cnMuCi0JICovCi0JaWYgKHJjcnRjLT5pbml0aWFsaXplZCkKLQkJcmV0dXJuOwotCi0JcmNhcl9k
dV9jcnRjX3NldHVwKHJjcnRjKTsKLQlyY3J0Yy0+aW5pdGlhbGl6ZWQgPSB0cnVlOwotfQotCi1z
dGF0aWMgdm9pZCByY2FyX2R1X2NydGNfcHV0KHN0cnVjdCByY2FyX2R1X2NydGMgKnJjcnRjKQot
ewotCXJjcnRjLT5pbml0aWFsaXplZCA9IGZhbHNlOwotfQotCiBzdGF0aWMgdm9pZCByY2FyX2R1
X2NydGNfc3RhcnQoc3RydWN0IHJjYXJfZHVfY3J0YyAqcmNydGMpCiB7CiAJYm9vbCBpbnRlcmxh
Y2VkOwpAQCAtNzE2LDYgKzY4Miw0MCBAQCBpbnQgcmNhcl9kdV9jcnRjX2F0b21pY19lbnRlcl9z
dGFuZGJ5KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJcmV0dXJuIDA7CiB9CiAKKy8qCisgKiBD
b25maWd1cmUgdGhlIG1vZGUgZm9yIGFsbCBDUlRDcyB0aGF0IHJlcXVpcmUgaXQuIEZvciBub3cg
d2Ugb25seSBoYW5kbGUgbW9kZQorICogc2V0IG9uIHRoZSBWU1AsIENSVEMgY29uZmlndXJhdGlv
biB3aWxsIGJlIGhhbmRsZWQgbGF0ZXIuCisgKi8KK2ludCByY2FyX2R1X2NydGNfYXRvbWljX21v
ZGVzZXQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKKwkJCQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0
ZSAqc3RhdGUpCit7CisJc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRjX3N0YXRlOworCXN0cnVj
dCBkcm1fY3J0YyAqY3J0YzsKKwl1bnNpZ25lZCBpbnQgaTsKKworCWZvcl9lYWNoX25ld19jcnRj
X2luX3N0YXRlKHN0YXRlLCBjcnRjLCBjcnRjX3N0YXRlLCBpKSB7CisJCXN0cnVjdCByY2FyX2R1
X2NydGMgKnJjcnRjID0gdG9fcmNhcl9jcnRjKGNydGMpOworCisJCS8qCisJCSAqIFNraXAgY29t
bWl0cyB0aGF0IGRvbid0IGNoYW5nZSB0aGUgbW9kZS4gV2UgbWFudWFsbHkgc2tpcAorCQkgKiBp
bmFjdGl2ZSBDUlRDcyBhcyBkaXNhYmxpbmcgYSBDUlRDIGlzIGNvbnNpZGVyZWQgYXMgYSBtb2Rl
CisJCSAqIHNldCBieSBkcm1fYXRvbWljX2NydGNfbmVlZHNfbW9kZXNldCgpLgorCQkgKi8KKwkJ
aWYgKCFkcm1fYXRvbWljX2NydGNfbmVlZHNfbW9kZXNldChjcnRjX3N0YXRlKSB8fAorCQkgICAg
IWNydGNfc3RhdGUtPmFjdGl2ZSkKKwkJCWNvbnRpbnVlOworCisJCS8qIENvbmZpZ3VyZSBkaXNw
bGF5IHRpbWluZ3MgYW5kIG91dHB1dCByb3V0aW5nLiAqLworCQlyY2FyX2R1X2NydGNfc2V0X2Rp
c3BsYXlfdGltaW5nKHJjcnRjKTsKKwkJcmNhcl9kdV9ncm91cF9zZXRfcm91dGluZyhyY3J0Yy0+
Z3JvdXApOworCisJCWlmIChyY2FyX2R1X2hhcyhyY3J0Yy0+ZGV2LCBSQ0FSX0RVX0ZFQVRVUkVf
VlNQMV9TT1VSQ0UpKQorCQkJcmNhcl9kdV92c3BfbW9kZXNldChyY3J0Yyk7CisJfQorCisJcmV0
dXJuIDA7Cit9CisKIHN0YXRpYyB2b2lkIHJjYXJfZHVfY3J0Y19hdG9taWNfZW5hYmxlKHN0cnVj
dCBkcm1fY3J0YyAqY3J0YywKIAkJCQkgICAgICAgc3RydWN0IGRybV9jcnRjX3N0YXRlICpvbGRf
c3RhdGUpCiB7CkBAIC03MjMsOCArNzIzLDYgQEAgc3RhdGljIHZvaWQgcmNhcl9kdV9jcnRjX2F0
b21pY19lbmFibGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCXN0cnVjdCByY2FyX2R1X2NydGNf
c3RhdGUgKnJzdGF0ZSA9IHRvX3JjYXJfY3J0Y19zdGF0ZShjcnRjLT5zdGF0ZSk7CiAJc3RydWN0
IHJjYXJfZHVfZGV2aWNlICpyY2R1ID0gcmNydGMtPmRldjsKIAotCXJjYXJfZHVfY3J0Y19nZXQo
cmNydGMpOwotCiAJLyoKIAkgKiBPbiBEMy9FMyB0aGUgZG90IGNsb2NrIGlzIHByb3ZpZGVkIGJ5
IHRoZSBMVkRTIGVuY29kZXIgYXR0YWNoZWQgdG8KIAkgKiB0aGUgRFUgY2hhbm5lbC4gV2UgbmVl
ZCB0byBlbmFibGUgaXRzIGNsb2NrIG91dHB1dCBleHBsaWNpdGx5IGlmCkBAIC03NDEsNiArNzM5
LDkgQEAgc3RhdGljIHZvaWQgcmNhcl9kdV9jcnRjX2F0b21pY19lbmFibGUoc3RydWN0IGRybV9j
cnRjICpjcnRjLAogCQkJCSAgICAgbW9kZS0+Y2xvY2sgKiAxMDAwKTsKIAl9CiAKKwlpZiAocmNh
cl9kdV9oYXMocmNydGMtPmRldiwgUkNBUl9EVV9GRUFUVVJFX1ZTUDFfU09VUkNFKSkKKwkJcmNh
cl9kdV92c3BfZW5hYmxlKHJjcnRjKTsKKwogCXJjYXJfZHVfY3J0Y19zdGFydChyY3J0Yyk7CiB9
CiAKQEAgLTc1Miw3ICs3NTMsNiBAQCBzdGF0aWMgdm9pZCByY2FyX2R1X2NydGNfYXRvbWljX2Rp
c2FibGUoc3RydWN0IGRybV9jcnRjICpjcnRjLAogCXN0cnVjdCByY2FyX2R1X2RldmljZSAqcmNk
dSA9IHJjcnRjLT5kZXY7CiAKIAlyY2FyX2R1X2NydGNfc3RvcChyY3J0Yyk7Ci0JcmNhcl9kdV9j
cnRjX3B1dChyY3J0Yyk7CiAKIAlpZiAocmNkdS0+aW5mby0+bHZkc19jbGtfbWFzayAmIEJJVChy
Y3J0Yy0+aW5kZXgpICYmCiAJICAgIHJzdGF0ZS0+b3V0cHV0cyA9PSBCSVQoUkNBUl9EVV9PVVRQ
VVRfRFBBRDApKSB7CkBAIC03ODEsMTkgKzc4MSw4IEBAIHN0YXRpYyB2b2lkIHJjYXJfZHVfY3J0
Y19hdG9taWNfYmVnaW4oc3RydWN0IGRybV9jcnRjICpjcnRjLAogCiAJV0FSTl9PTighY3J0Yy0+
c3RhdGUtPmVuYWJsZSk7CiAKLQkvKgotCSAqIElmIGEgbW9kZSBzZXQgaXMgaW4gcHJvZ3Jlc3Mg
d2UgY2FuIGJlIGNhbGxlZCB3aXRoIHRoZSBDUlRDIGRpc2FibGVkLgotCSAqIFdlIHRodXMgbmVl
ZCB0byBmaXJzdCBnZXQgYW5kIHNldHVwIHRoZSBDUlRDIGluIG9yZGVyIHRvIGNvbmZpZ3VyZQot
CSAqIHBsYW5lcy4gV2UgbXVzdCAqbm90KiBwdXQgdGhlIENSVEMgaW4gLmF0b21pY19mbHVzaCgp
LCBhcyBpdCBtdXN0IGJlCi0JICoga2VwdCBhd2FrZSB1bnRpbCB0aGUgLmF0b21pY19lbmFibGUo
KSBjYWxsIHRoYXQgd2lsbCBmb2xsb3cuIFRoZSBnZXQKLQkgKiBvcGVyYXRpb24gaW4gLmF0b21p
Y19lbmFibGUoKSB3aWxsIGluIHRoYXQgY2FzZSBiZSBhIG5vLW9wLCBhbmQgdGhlCi0JICogQ1JU
QyB3aWxsIGJlIHB1dCBsYXRlciBpbiAuYXRvbWljX2Rpc2FibGUoKS4KLQkgKgotCSAqIElmIGEg
bW9kZSBzZXQgaXMgbm90IGluIHByb2dyZXNzIHRoZSBDUlRDIGlzIGVuYWJsZWQsIGFuZCB0aGUK
LQkgKiBmb2xsb3dpbmcgZ2V0IGNhbGwgd2lsbCBiZSBhIG5vLW9wLiBUaGVyZSBpcyB0aHVzIG5v
IG5lZWQgdG8gYmFsYW5jZQotCSAqIGl0IGluIC5hdG9taWNfZmx1c2goKSBlaXRoZXIuCi0JICov
Ci0JcmNhcl9kdV9jcnRjX2dldChyY3J0Yyk7CisJLyogVHVybiB2ZXJ0aWNhbCBibGFua2luZyBp
bnRlcnJ1cHQgcmVwb3J0aW5nIG9uLiAqLworCWRybV9jcnRjX3ZibGFua19vbigmcmNydGMtPmNy
dGMpOwogCiAJaWYgKHJjYXJfZHVfaGFzKHJjcnRjLT5kZXYsIFJDQVJfRFVfRkVBVFVSRV9WU1Ax
X1NPVVJDRSkpCiAJCXJjYXJfZHVfdnNwX2F0b21pY19iZWdpbihyY3J0Yyk7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2NydGMuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS9yY2FyLWR1L3JjYXJfZHVfY3J0Yy5oCmluZGV4IDNjZTc2MTA3OTNiMi4uNjFkNzlhYTdjOGU4
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2NydGMuaAorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2R1X2NydGMuaApAQCAtMzAsNyArMzAsNiBA
QCBzdHJ1Y3QgcmNhcl9kdV92c3A7CiAgKiBAZXh0Y2xvY2s6IGV4dGVybmFsIHBpeGVsIGRvdCBj
bG9jayAob3B0aW9uYWwpCiAgKiBAbW1pb19vZmZzZXQ6IG9mZnNldCBvZiB0aGUgQ1JUQyByZWdp
c3RlcnMgaW4gdGhlIERVIE1NSU8gYmxvY2sKICAqIEBpbmRleDogQ1JUQyBoYXJkd2FyZSBpbmRl
eAotICogQGluaXRpYWxpemVkOiB3aGV0aGVyIHRoZSBDUlRDIGhhcyBiZWVuIGluaXRpYWxpemVk
IGFuZCBjbG9ja3MgZW5hYmxlZAogICogQGRzeXNyOiBjYWNoZWQgdmFsdWUgb2YgdGhlIERTWVNS
IHJlZ2lzdGVyCiAgKiBAdmJsYW5rX2VuYWJsZTogd2hldGhlciB2YmxhbmsgZXZlbnRzIGFyZSBl
bmFibGVkIG9uIHRoaXMgQ1JUQwogICogQGV2ZW50OiBldmVudCB0byBwb3N0IHdoZW4gdGhlIHBl
bmRpbmcgcGFnZSBmbGlwIGNvbXBsZXRlcwpAQCAtNTEsNyArNTAsNiBAQCBzdHJ1Y3QgcmNhcl9k
dV9jcnRjIHsKIAlzdHJ1Y3QgY2xrICpleHRjbG9jazsKIAl1bnNpZ25lZCBpbnQgbW1pb19vZmZz
ZXQ7CiAJdW5zaWduZWQgaW50IGluZGV4OwotCWJvb2wgaW5pdGlhbGl6ZWQ7CiAKIAl1MzIgZHN5
c3I7CiAKQEAgLTExMSw2ICsxMDksOCBAQCBpbnQgcmNhcl9kdV9jcnRjX2F0b21pY19leGl0X3N0
YW5kYnkoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAkJCQkgICAgIHN0cnVjdCBkcm1fYXRvbWlj
X3N0YXRlICpzdGF0ZSk7CiBpbnQgcmNhcl9kdV9jcnRjX2F0b21pY19lbnRlcl9zdGFuZGJ5KHN0
cnVjdCBkcm1fZGV2aWNlICpkZXYsCiAJCQkJICAgICAgc3RydWN0IGRybV9hdG9taWNfc3RhdGUg
KnN0YXRlKTsKK2ludCByY2FyX2R1X2NydGNfYXRvbWljX21vZGVzZXQoc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwKKwkJCQlzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpOwogCiB2b2lkIHJj
YXJfZHVfY3J0Y19kc3lzcl9jbHJfc2V0KHN0cnVjdCByY2FyX2R1X2NydGMgKnJjcnRjLCB1MzIg
Y2xyLCB1MzIgc2V0KTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNh
cl9kdV9rbXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfZHVfa21zLmMKaW5kZXgg
NTk2ODBkZTI3MWNjLi4xNDRjMGMxYjE1OTEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9y
Y2FyLWR1L3JjYXJfZHVfa21zLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9k
dV9rbXMuYwpAQCAtNDEyLDYgKzQxMiw3IEBAIHN0YXRpYyB2b2lkIHJjYXJfZHVfYXRvbWljX2Nv
bW1pdF90YWlsKHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpvbGRfc3RhdGUpCiAJcmNhcl9kdV9j
cnRjX2F0b21pY19leGl0X3N0YW5kYnkoZGV2LCBvbGRfc3RhdGUpOwogCiAJZHJtX2F0b21pY19o
ZWxwZXJfY29tbWl0X21vZGVzZXRfZGlzYWJsZXMoZGV2LCBvbGRfc3RhdGUpOworCXJjYXJfZHVf
Y3J0Y19hdG9taWNfbW9kZXNldChkZXYsIG9sZF9zdGF0ZSk7CiAJZHJtX2F0b21pY19oZWxwZXJf
Y29tbWl0X3BsYW5lcyhkZXYsIG9sZF9zdGF0ZSwKIAkJCQkJRFJNX1BMQU5FX0NPTU1JVF9BQ1RJ
VkVfT05MWSk7CiAJZHJtX2F0b21pY19oZWxwZXJfY29tbWl0X21vZGVzZXRfZW5hYmxlcyhkZXYs
IG9sZF9zdGF0ZSk7Ci0tIApSZWdhcmRzLAoKTGF1cmVudCBQaW5jaGFydAoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
