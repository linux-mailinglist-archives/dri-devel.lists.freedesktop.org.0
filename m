Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 6422F1169FA
	for <lists+dri-devel@lfdr.de>; Mon,  9 Dec 2019 10:47:24 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B5C9E6E35D;
	Mon,  9 Dec 2019 09:47:01 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 42FDB6E2C8
 for <dri-devel@lists.freedesktop.org>; Sun,  8 Dec 2019 10:20:39 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 08 Dec 2019 02:20:38 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,291,1571727600"; d="scan'208";a="412468139"
Received: from smile.fi.intel.com (HELO smile) ([10.237.68.40])
 by fmsmga005.fm.intel.com with ESMTP; 08 Dec 2019 02:20:36 -0800
Received: from andy by smile with local (Exim 4.93-RC5)
 (envelope-from <andriy.shevchenko@linux.intel.com>)
 id 1idtg3-0007xc-Q4; Sun, 08 Dec 2019 12:20:35 +0200
Date: Sun, 8 Dec 2019 12:20:35 +0200
From: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
To: Linus Walleij <linus.walleij@linaro.org>
Subject: Re: [PATCH] drm/gma500: Pass GPIO for Intel MID using descriptors
Message-ID: <20191208102035.GD32742@smile.fi.intel.com>
References: <20191206094301.76368-1-linus.walleij@linaro.org>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191206094301.76368-1-linus.walleij@linaro.org>
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Approved-At: Mon, 09 Dec 2019 09:46:36 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Daniel Stone <daniels@collabora.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>, dri-devel@lists.freedesktop.org,
 Sean Paul <sean@poorly.run>, linux-arm-kernel@lists.infradead.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBEZWMgMDYsIDIwMTkgYXQgMTA6NDM6MDFBTSArMDEwMCwgTGludXMgV2FsbGVpaiB3
cm90ZToKPiBUaGUgR01BNTAwIGRyaXZlciBpcyB1c2luZyB0aGUgbGVnYWN5IEdQSU8gQVBJIHRv
IGZldGNoCj4gdGhyZWUgb3B0aW9uYWwgZGlzcGxheSBjb250cm9sIEdQSU8gbGluZXMgZnJvbSB0
aGUgU0ZJCj4gZGVzY3JpcHRpb24gdXNlZCBieSB0aGUgTWVkZmllbGQgcGxhdGZvcm0uCj4gCj4g
U3dpdGNoIHRoaXMgb3ZlciB0byB1c2UgR1BJTyBkZXNjcmlwdG9ycyBhbmQgZGVsZXRlIHRoZQo+
IGN1c3RvbSBwbGF0Zm9ybSBkYXRhLgo+IAo+IFdlIGNyZWF0ZSB0aHJlZSBuZXcgc3RhdGljIGxv
Y2FscyBpbiB0aGUgdGMzNTg3NnggYnJpZGdlCj4gY29kZSBidXQgaXQgaXMgaGFyZGx5IGFueSB3
b3JzZSB0aGFuIHRoZSBJMkMgY2xpZW50IHN0YXRpYwo+IGxvY2FsIGFscmVhZHkgdGhlcmU6IEkg
dHJpZWQgZmlyc3QgdG8gbW92ZSBpdCB0byB0aGUgRFJNCj4gZHJpdmVyIHN0YXRlIGNvbnRhaW5l
ciBidXQgdGhlcmUgYXJlIHdvcmthcm91bmRzIGZvcgo+IHByb2JlIG9yZGVyIGluIHRoZSBjb2Rl
IHNvIEkganVzdCBzdGF5ZWQgb2ZmIGl0LCBhcyB0aGUKPiByZXN1bHQgaXMgdW5wcmVkaWN0YWJs
ZS4KPiAKPiBQZW9wbGUgd2FudGluZyB0byBkbyBhIG1vcmUgdGhyb3J1Z2ggYW5kIHByb3BlciBj
bGVhbnVwCj4gb2YgdGhlIEdNQTUwMCBkcml2ZXIgY2FuIHdvcmsgb24gdG9wIG9mIHRoaXMsIEkg
Y2FuJ3QKPiBzb2x2ZSBtdWNoIG1vcmUgc2luY2UgSSBkb24ndCBoYXZlIGFjY2VzcyB0byB0aGUg
aGFyZHdhcmUsCj4gSSBjYW4gb25seSBhdHRlbXB0IHRvIHRpZHkgdXAgbXkgR1BJTyBjb3JuZXIu
CgpXaGF0IGEgbmljZSBjbGVhbiB1cCEKUmV2aWV3ZWQtYnk6IEFuZHkgU2hldmNoZW5rbyA8YW5k
cml5LnNoZXZjaGVua29AbGludXguaW50ZWwuY29tPgoKPiAKPiBDYzogUGF0cmlrIEpha29ic3Nv
biA8cGF0cmlrLnIuamFrb2Jzc29uQGdtYWlsLmNvbT4KPiBDYzogRGFuaWVsIFN0b25lIDxkYW5p
ZWxzQGNvbGxhYm9yYS5jb20+Cj4gQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3
bGwuY2g+Cj4gQ2M6IEFuZHkgU2hldmNoZW5rbyA8YW5kcml5LnNoZXZjaGVua29AbGludXguaW50
ZWwuY29tPgo+IFNpZ25lZC1vZmYtYnk6IExpbnVzIFdhbGxlaWogPGxpbnVzLndhbGxlaWpAbGlu
YXJvLm9yZz4KPiAtLS0KPiBJZiBzb21lb25lIGNhbiB0ZXN0IHRoaXMgb24gdGhlIHRhcmdldCBw
bGF0Zm9ybSBJJ2QgYmUKPiBoYXBweS4KPiAtLS0KPiAgLi4uL2ludGVsLW1pZC9kZXZpY2VfbGli
cy9wbGF0Zm9ybV90YzM1ODc2eC5jIHwgMjYgKysrKy0tCj4gIGRyaXZlcnMvZ3B1L2RybS9nbWE1
MDAvdGMzNTg3NngtZHNpLWx2ZHMuYyAgICB8IDg4ICsrKysrKystLS0tLS0tLS0tLS0KPiAgaW5j
bHVkZS9saW51eC9wbGF0Zm9ybV9kYXRhL3RjMzU4NzZ4LmggICAgICAgIHwgMTEgLS0tCj4gIDMg
ZmlsZXMgY2hhbmdlZCwgNTEgaW5zZXJ0aW9ucygrKSwgNzQgZGVsZXRpb25zKC0pCj4gIGRlbGV0
ZSBtb2RlIDEwMDY0NCBpbmNsdWRlL2xpbnV4L3BsYXRmb3JtX2RhdGEvdGMzNTg3NnguaAo+IAo+
IGRpZmYgLS1naXQgYS9hcmNoL3g4Ni9wbGF0Zm9ybS9pbnRlbC1taWQvZGV2aWNlX2xpYnMvcGxh
dGZvcm1fdGMzNTg3NnguYyBiL2FyY2gveDg2L3BsYXRmb3JtL2ludGVsLW1pZC9kZXZpY2VfbGli
cy9wbGF0Zm9ybV90YzM1ODc2eC5jCj4gaW5kZXggNDRkMWY4ODRjM2QzLi4xMzk3MzhiYmRkMzYg
MTAwNjQ0Cj4gLS0tIGEvYXJjaC94ODYvcGxhdGZvcm0vaW50ZWwtbWlkL2RldmljZV9saWJzL3Bs
YXRmb3JtX3RjMzU4NzZ4LmMKPiArKysgYi9hcmNoL3g4Ni9wbGF0Zm9ybS9pbnRlbC1taWQvZGV2
aWNlX2xpYnMvcGxhdGZvcm1fdGMzNTg3NnguYwo+IEBAIC02LDIxICs2LDMxIEBACj4gICAqIEF1
dGhvcjogU2F0aHlhbmFyYXlhbmFuIEt1cHB1c3dhbXkgPHNhdGh5YW5hcmF5YW5hbi5rdXBwdXN3
YW15QGludGVsLmNvbT4KPiAgICovCj4gIAo+IC0jaW5jbHVkZSA8bGludXgvZ3Bpby5oPgo+IC0j
aW5jbHVkZSA8bGludXgvcGxhdGZvcm1fZGF0YS90YzM1ODc2eC5oPgo+ICsjaW5jbHVkZSA8bGlu
dXgvZ3Bpby9tYWNoaW5lLmg+Cj4gICNpbmNsdWRlIDxhc20vaW50ZWwtbWlkLmg+Cj4gIAo+ICtz
dGF0aWMgc3RydWN0IGdwaW9kX2xvb2t1cF90YWJsZSB0YzM1ODc2eF9ncGlvX3RhYmxlID0gewo+
ICsJLmRldl9pZAk9ICJpMmNfZGlzcF9icmlnIiwKPiArCS50YWJsZQk9IHsKPiArCQlHUElPX0xP
T0tVUCgiMDAwMDowMDowYy4wIiwgLTEsICJicmlkZ2UtcmVzZXQiLCBHUElPX0FDVElWRV9ISUdI
KSwKPiArCQlHUElPX0xPT0tVUCgiMDAwMDowMDowYy4wIiwgLTEsICJibC1lbiIsIEdQSU9fQUNU
SVZFX0hJR0gpLAo+ICsJCUdQSU9fTE9PS1VQKCIwMDAwOjAwOjBjLjAiLCAtMSwgInZhZGQiLCBH
UElPX0FDVElWRV9ISUdIKSwKPiArCQl7IH0sCj4gKwl9LAo+ICt9Owo+ICsKPiAgLyp0YzM1ODc2
eCBEU0lfTFZEUyBicmlkZ2UgY2hpcCBhbmQgcGFuZWwgcGxhdGZvcm0gZGF0YSovCj4gIHN0YXRp
YyB2b2lkICp0YzM1ODc2eF9wbGF0Zm9ybV9kYXRhKHZvaWQgKmRhdGEpCj4gIHsKPiAtCXN0YXRp
YyBzdHJ1Y3QgdGMzNTg3NnhfcGxhdGZvcm1fZGF0YSBwZGF0YTsKPiArCXN0cnVjdCBncGlvZF9s
b29rdXBfdGFibGUgKnRhYmxlID0gJnRjMzU4NzZ4X2dwaW9fdGFibGU7Cj4gKwlzdHJ1Y3QgZ3Bp
b2RfbG9va3VwICpsb29rdXAgPSB0YWJsZS0+dGFibGU7Cj4gIAo+IC0JLyogZ3BpbyBwaW5zIHNl
dCB0byAtMSB3aWxsIG5vdCBiZSB1c2VkIGJ5IHRoZSBkcml2ZXIgKi8KPiAtCXBkYXRhLmdwaW9f
YnJpZGdlX3Jlc2V0ID0gZ2V0X2dwaW9fYnlfbmFtZSgiTENNQl9SWEVOIik7Cj4gLQlwZGF0YS5n
cGlvX3BhbmVsX2JsX2VuID0gZ2V0X2dwaW9fYnlfbmFtZSgiNlM2UF9CTF9FTiIpOwo+IC0JcGRh
dGEuZ3Bpb19wYW5lbF92YWRkID0gZ2V0X2dwaW9fYnlfbmFtZSgiRU5fVlJFR19MQ0RfVjNQMyIp
Owo+ICsJbG9va3VwWzBdLmNoaXBfaHdudW0gPSBnZXRfZ3Bpb19ieV9uYW1lKCJMQ01CX1JYRU4i
KTsKPiArCWxvb2t1cFsxXS5jaGlwX2h3bnVtID0gZ2V0X2dwaW9fYnlfbmFtZSgiNlM2UF9CTF9F
TiIpOwo+ICsJbG9va3VwWzJdLmNoaXBfaHdudW0gPSBnZXRfZ3Bpb19ieV9uYW1lKCJFTl9WUkVH
X0xDRF9WM1AzIik7Cj4gKwlncGlvZF9hZGRfbG9va3VwX3RhYmxlKHRhYmxlKTsKPiAgCj4gLQly
ZXR1cm4gJnBkYXRhOwo+ICsJcmV0dXJuIE5VTEw7Cj4gIH0KPiAgCj4gIHN0YXRpYyBjb25zdCBz
dHJ1Y3QgZGV2c19pZCB0YzM1ODc2eF9kZXZfaWQgX19pbml0Y29uc3QgPSB7Cj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvdGMzNTg3NngtZHNpLWx2ZHMuYyBiL2RyaXZlcnMv
Z3B1L2RybS9nbWE1MDAvdGMzNTg3NngtZHNpLWx2ZHMuYwo+IGluZGV4IDdkZTNjZTYzN2M3Zi4u
OWU4MjI0NDU2ZWEyIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvdGMzNTg3
NngtZHNpLWx2ZHMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9nbWE1MDAvdGMzNTg3NngtZHNp
LWx2ZHMuYwo+IEBAIC0yNSw3ICsyNSw3IEBACj4gICNpbmNsdWRlIDxsaW51eC9kZWxheS5oPgo+
ICAjaW5jbHVkZSA8bGludXgva2VybmVsLmg+Cj4gICNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4K
PiAtI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RhdGEvdGMzNTg3NnguaD4KPiArI2luY2x1ZGUg
PGxpbnV4L2dwaW8vY29uc3VtZXIuaD4KPiAgCj4gICNpbmNsdWRlIDxhc20vaW50ZWxfc2N1X2lw
Yy5oPgo+ICAKPiBAQCAtMzYsNiArMzYsMTEgQEAKPiAgCj4gIHN0YXRpYyBzdHJ1Y3QgaTJjX2Ns
aWVudCAqdGMzNTg3NnhfY2xpZW50Owo+ICBzdGF0aWMgc3RydWN0IGkyY19jbGllbnQgKmNtaV9s
Y2RfaTJjX2NsaWVudDsKPiArLyogUGFuZWwgR1BJT3MgKi8KPiArc3RhdGljIHN0cnVjdCBncGlv
X2Rlc2MgKmJyaWRnZV9yZXNldDsKPiArc3RhdGljIHN0cnVjdCBncGlvX2Rlc2MgKmJyaWRnZV9i
bF9lbmFibGU7Cj4gK3N0YXRpYyBzdHJ1Y3QgZ3Bpb19kZXNjICpiYWNrbGlnaHRfdm9sdGFnZTsK
PiArCj4gIAo+ICAjZGVmaW5lIEZMRF9NQVNLKHN0YXJ0LCBlbmQpCSgoKDEgPDwgKChzdGFydCkg
LSAoZW5kKSArIDEpKSAtIDEpIDw8IChlbmQpKQo+ICAjZGVmaW5lIEZMRF9WQUwodmFsLCBzdGFy
dCwgZW5kKSAoKCh2YWwpIDw8IChlbmQpKSAmIEZMRF9NQVNLKHN0YXJ0LCBlbmQpKQo+IEBAIC0z
MTYsMjcgKzMyMSwyMyBAQCBzdGF0aWMgaW50IHRjMzU4NzZ4X3JlZ3Ioc3RydWN0IGkyY19jbGll
bnQgKmNsaWVudCwgdTE2IHJlZywgdTMyICp2YWx1ZSkKPiAgCj4gIHZvaWQgdGMzNTg3Nnhfc2V0
X2JyaWRnZV9yZXNldF9zdGF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBpbnQgc3RhdGUpCj4g
IHsKPiAtCXN0cnVjdCB0YzM1ODc2eF9wbGF0Zm9ybV9kYXRhICpwZGF0YTsKPiAtCj4gIAlpZiAo
V0FSTighdGMzNTg3NnhfY2xpZW50LCAiJXMgY2FsbGVkIGJlZm9yZSBwcm9iZSIsIF9fZnVuY19f
KSkKPiAgCQlyZXR1cm47Cj4gIAo+ICAJZGV2X2RiZygmdGMzNTg3NnhfY2xpZW50LT5kZXYsICIl
czogc3RhdGUgJWRcbiIsIF9fZnVuY19fLCBzdGF0ZSk7Cj4gIAo+IC0JcGRhdGEgPSBkZXZfZ2V0
X3BsYXRkYXRhKCZ0YzM1ODc2eF9jbGllbnQtPmRldik7Cj4gLQo+IC0JaWYgKHBkYXRhLT5ncGlv
X2JyaWRnZV9yZXNldCA9PSAtMSkKPiArCWlmICghYnJpZGdlX3Jlc2V0KQo+ICAJCXJldHVybjsK
PiAgCj4gIAlpZiAoc3RhdGUpIHsKPiAtCQlncGlvX3NldF92YWx1ZV9jYW5zbGVlcChwZGF0YS0+
Z3Bpb19icmlkZ2VfcmVzZXQsIDApOwo+ICsJCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVlcChicmlk
Z2VfcmVzZXQsIDApOwo+ICAJCW1kZWxheSgxMCk7Cj4gIAl9IGVsc2Ugewo+ICAJCS8qIFB1bGwg
TUlQSSBCcmlkZ2UgcmVzZXQgcGluIHRvIExvdyAqLwo+IC0JCWdwaW9fc2V0X3ZhbHVlX2NhbnNs
ZWVwKHBkYXRhLT5ncGlvX2JyaWRnZV9yZXNldCwgMCk7Cj4gKwkJZ3Bpb2Rfc2V0X3ZhbHVlX2Nh
bnNsZWVwKGJyaWRnZV9yZXNldCwgMCk7Cj4gIAkJbWRlbGF5KDIwKTsKPiAgCQkvKiBQdWxsIE1J
UEkgQnJpZGdlIHJlc2V0IHBpbiB0byBIaWdoICovCj4gLQkJZ3Bpb19zZXRfdmFsdWVfY2Fuc2xl
ZXAocGRhdGEtPmdwaW9fYnJpZGdlX3Jlc2V0LCAxKTsKPiArCQlncGlvZF9zZXRfdmFsdWVfY2Fu
c2xlZXAoYnJpZGdlX3Jlc2V0LCAxKTsKPiAgCQltZGVsYXkoNDApOwo+ICAJfQo+ICB9Cj4gQEAg
LTUxMCwyNSArNTExLDIwIEBAIHZvaWQgdGMzNTg3NnhfYnJpZ2h0bmVzc19jb250cm9sKHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsIGludCBsZXZlbCkKPiAgCj4gIHZvaWQgdGMzNTg3NnhfdG9zaGli
YV9icmlkZ2VfcGFuZWxfb2ZmKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCj4gIHsKPiAtCXN0cnVj
dCB0YzM1ODc2eF9wbGF0Zm9ybV9kYXRhICpwZGF0YTsKPiAtCj4gIAlpZiAoV0FSTighdGMzNTg3
NnhfY2xpZW50LCAiJXMgY2FsbGVkIGJlZm9yZSBwcm9iZSIsIF9fZnVuY19fKSkKPiAgCQlyZXR1
cm47Cj4gIAo+ICAJZGV2X2RiZygmdGMzNTg3NnhfY2xpZW50LT5kZXYsICIlc1xuIiwgX19mdW5j
X18pOwo+ICAKPiAtCXBkYXRhID0gZGV2X2dldF9wbGF0ZGF0YSgmdGMzNTg3NnhfY2xpZW50LT5k
ZXYpOwo+IC0KPiAtCWlmIChwZGF0YS0+Z3Bpb19wYW5lbF9ibF9lbiAhPSAtMSkKPiAtCQlncGlv
X3NldF92YWx1ZV9jYW5zbGVlcChwZGF0YS0+Z3Bpb19wYW5lbF9ibF9lbiwgMCk7Cj4gKwlpZiAo
YnJpZGdlX2JsX2VuYWJsZSkKPiArCQlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAoYnJpZGdlX2Js
X2VuYWJsZSwgMCk7Cj4gIAo+IC0JaWYgKHBkYXRhLT5ncGlvX3BhbmVsX3ZhZGQgIT0gLTEpCj4g
LQkJZ3Bpb19zZXRfdmFsdWVfY2Fuc2xlZXAocGRhdGEtPmdwaW9fcGFuZWxfdmFkZCwgMCk7Cj4g
KwlpZiAoYmFja2xpZ2h0X3ZvbHRhZ2UpCj4gKwkJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGJh
Y2tsaWdodF92b2x0YWdlLCAwKTsKPiAgfQo+ICAKPiAgdm9pZCB0YzM1ODc2eF90b3NoaWJhX2Jy
aWRnZV9wYW5lbF9vbihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQo+ICB7Cj4gLQlzdHJ1Y3QgdGMz
NTg3NnhfcGxhdGZvcm1fZGF0YSAqcGRhdGE7Cj4gIAlzdHJ1Y3QgZHJtX3BzYl9wcml2YXRlICpk
ZXZfcHJpdiA9IGRldi0+ZGV2X3ByaXZhdGU7Cj4gIAo+ICAJaWYgKFdBUk4oIXRjMzU4NzZ4X2Ns
aWVudCwgIiVzIGNhbGxlZCBiZWZvcmUgcHJvYmUiLCBfX2Z1bmNfXykpCj4gQEAgLTUzNiwxMCAr
NTMyLDggQEAgdm9pZCB0YzM1ODc2eF90b3NoaWJhX2JyaWRnZV9wYW5lbF9vbihzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2KQo+ICAKPiAgCWRldl9kYmcoJnRjMzU4NzZ4X2NsaWVudC0+ZGV2LCAiJXNc
biIsIF9fZnVuY19fKTsKPiAgCj4gLQlwZGF0YSA9IGRldl9nZXRfcGxhdGRhdGEoJnRjMzU4NzZ4
X2NsaWVudC0+ZGV2KTsKPiAtCj4gLQlpZiAocGRhdGEtPmdwaW9fcGFuZWxfdmFkZCAhPSAtMSkg
ewo+IC0JCWdwaW9fc2V0X3ZhbHVlX2NhbnNsZWVwKHBkYXRhLT5ncGlvX3BhbmVsX3ZhZGQsIDEp
Owo+ICsJaWYgKGJhY2tsaWdodF92b2x0YWdlKSB7Cj4gKwkJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNs
ZWVwKGJhY2tsaWdodF92b2x0YWdlLCAxKTsKPiAgCQltc2xlZXAoMjYwKTsKPiAgCX0KPiAgCj4g
QEAgLTU3MSw4ICs1NjUsOCBAQCB2b2lkIHRjMzU4NzZ4X3Rvc2hpYmFfYnJpZGdlX3BhbmVsX29u
KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCj4gIAkJCQkiaTJjIHdyaXRlIGZhaWxlZCAoJWQpXG4i
LCByZXQpOwo+ICAJfQo+ICAKPiAtCWlmIChwZGF0YS0+Z3Bpb19wYW5lbF9ibF9lbiAhPSAtMSkK
PiAtCQlncGlvX3NldF92YWx1ZV9jYW5zbGVlcChwZGF0YS0+Z3Bpb19wYW5lbF9ibF9lbiwgMSk7
Cj4gKwlpZiAoYnJpZGdlX2JsX2VuYWJsZSkKPiArCQlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAo
YnJpZGdlX2JsX2VuYWJsZSwgMSk7Cj4gIAo+ICAJdGMzNTg3NnhfYnJpZ2h0bmVzc19jb250cm9s
KGRldiwgZGV2X3ByaXYtPmJyaWdodG5lc3NfYWRqdXN0ZWQpOwo+ICB9Cj4gQEAgLTYzNSw4ICs2
MjksNiBAQCBzdGF0aWMgaW50IHRjMzU4NzZ4X2dldF9wYW5lbF9pbmZvKHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsIGludCBwaXBlLAo+ICBzdGF0aWMgaW50IHRjMzU4NzZ4X2JyaWRnZV9wcm9iZShz
dHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50LAo+ICAJCQkJY29uc3Qgc3RydWN0IGkyY19kZXZpY2Vf
aWQgKmlkKQo+ICB7Cj4gLQlzdHJ1Y3QgdGMzNTg3NnhfcGxhdGZvcm1fZGF0YSAqcGRhdGE7Cj4g
LQo+ICAJZGV2X2luZm8oJmNsaWVudC0+ZGV2LCAiJXNcbiIsIF9fZnVuY19fKTsKPiAgCj4gIAlp
ZiAoIWkyY19jaGVja19mdW5jdGlvbmFsaXR5KGNsaWVudC0+YWRhcHRlciwgSTJDX0ZVTkNfSTJD
KSkgewo+IEBAIC02NDUsMjYgKzYzNywyMyBAQCBzdGF0aWMgaW50IHRjMzU4NzZ4X2JyaWRnZV9w
cm9iZShzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50LAo+ICAJCXJldHVybiAtRU5PREVWOwo+ICAJ
fQo+ICAKPiAtCXBkYXRhID0gZGV2X2dldF9wbGF0ZGF0YSgmY2xpZW50LT5kZXYpOwo+IC0JaWYg
KCFwZGF0YSkgewo+IC0JCWRldl9lcnIoJmNsaWVudC0+ZGV2LCAiJXM6IG5vIHBsYXRmb3JtIGRh
dGFcbiIsIF9fZnVuY19fKTsKPiAtCQlyZXR1cm4gLUVOT0RFVjsKPiAtCX0KPiArCWJyaWRnZV9y
ZXNldCA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlvbmFsKCZjbGllbnQtPmRldiwgImJyaWRnZS1yZXNl
dCIsIEdQSU9EX09VVF9MT1cpOwo+ICsJaWYgKElTX0VSUihicmlkZ2VfcmVzZXQpKQo+ICsJCXJl
dHVybiBQVFJfRVJSKGJyaWRnZV9yZXNldCk7Cj4gKwlpZiAoYnJpZGdlX3Jlc2V0KQo+ICsJCWdw
aW9kX3NldF9jb25zdW1lcl9uYW1lKGJyaWRnZV9yZXNldCwgInRjMzU4NzZ4IGJyaWRnZSByZXNl
dCIpOwo+ICAKPiAtCWlmIChwZGF0YS0+Z3Bpb19icmlkZ2VfcmVzZXQgIT0gLTEpIHsKPiAtCQln
cGlvX3JlcXVlc3QocGRhdGEtPmdwaW9fYnJpZGdlX3Jlc2V0LCAidGMzNTg3NnggYnJpZGdlIHJl
c2V0Iik7Cj4gLQkJZ3Bpb19kaXJlY3Rpb25fb3V0cHV0KHBkYXRhLT5ncGlvX2JyaWRnZV9yZXNl
dCwgMCk7Cj4gLQl9Cj4gLQo+IC0JaWYgKHBkYXRhLT5ncGlvX3BhbmVsX2JsX2VuICE9IC0xKSB7
Cj4gLQkJZ3Bpb19yZXF1ZXN0KHBkYXRhLT5ncGlvX3BhbmVsX2JsX2VuLCAidGMzNTg3NnggcGFu
ZWwgYmwgZW4iKTsKPiAtCQlncGlvX2RpcmVjdGlvbl9vdXRwdXQocGRhdGEtPmdwaW9fcGFuZWxf
YmxfZW4sIDApOwo+IC0JfQo+ICsJYnJpZGdlX2JsX2VuYWJsZSA9IGRldm1fZ3Bpb2RfZ2V0X29w
dGlvbmFsKCZjbGllbnQtPmRldiwgImJsLWVuIiwgR1BJT0RfT1VUX0xPVyk7Cj4gKwlpZiAoSVNf
RVJSKGJyaWRnZV9ibF9lbmFibGUpKQo+ICsJCXJldHVybiBQVFJfRVJSKGJyaWRnZV9ibF9lbmFi
bGUpOwo+ICsJaWYgKGJyaWRnZV9ibF9lbmFibGUpCj4gKwkJZ3Bpb2Rfc2V0X2NvbnN1bWVyX25h
bWUoYnJpZGdlX2JsX2VuYWJsZSwgInRjMzU4NzZ4IHBhbmVsIGJsIGVuIik7Cj4gIAo+IC0JaWYg
KHBkYXRhLT5ncGlvX3BhbmVsX3ZhZGQgIT0gLTEpIHsKPiAtCQlncGlvX3JlcXVlc3QocGRhdGEt
PmdwaW9fcGFuZWxfdmFkZCwgInRjMzU4NzZ4IHBhbmVsIHZhZGQiKTsKPiAtCQlncGlvX2RpcmVj
dGlvbl9vdXRwdXQocGRhdGEtPmdwaW9fcGFuZWxfdmFkZCwgMCk7Cj4gLQl9Cj4gKwliYWNrbGln
aHRfdm9sdGFnZSA9IGRldm1fZ3Bpb2RfZ2V0X29wdGlvbmFsKCZjbGllbnQtPmRldiwgInZhZGQi
LCBHUElPRF9PVVRfTE9XKTsKPiArCWlmIChJU19FUlIoYmFja2xpZ2h0X3ZvbHRhZ2UpKQo+ICsJ
CXJldHVybiBQVFJfRVJSKGJhY2tsaWdodF92b2x0YWdlKTsKPiArCWlmIChiYWNrbGlnaHRfdm9s
dGFnZSkKPiArCQlncGlvZF9zZXRfY29uc3VtZXJfbmFtZShiYWNrbGlnaHRfdm9sdGFnZSwgInRj
MzU4NzZ4IHBhbmVsIHZhZGQiKTsKPiAgCj4gIAl0YzM1ODc2eF9jbGllbnQgPSBjbGllbnQ7Cj4g
IAo+IEBAIC02NzMsMTkgKzY2Miw4IEBAIHN0YXRpYyBpbnQgdGMzNTg3NnhfYnJpZGdlX3Byb2Jl
KHN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQsCj4gIAo+ICBzdGF0aWMgaW50IHRjMzU4NzZ4X2Jy
aWRnZV9yZW1vdmUoc3RydWN0IGkyY19jbGllbnQgKmNsaWVudCkKPiAgewo+IC0Jc3RydWN0IHRj
MzU4NzZ4X3BsYXRmb3JtX2RhdGEgKnBkYXRhID0gZGV2X2dldF9wbGF0ZGF0YSgmY2xpZW50LT5k
ZXYpOwo+IC0KPiAgCWRldl9kYmcoJmNsaWVudC0+ZGV2LCAiJXNcbiIsIF9fZnVuY19fKTsKPiAg
Cj4gLQlpZiAocGRhdGEtPmdwaW9fYnJpZGdlX3Jlc2V0ICE9IC0xKQo+IC0JCWdwaW9fZnJlZShw
ZGF0YS0+Z3Bpb19icmlkZ2VfcmVzZXQpOwo+IC0KPiAtCWlmIChwZGF0YS0+Z3Bpb19wYW5lbF9i
bF9lbiAhPSAtMSkKPiAtCQlncGlvX2ZyZWUocGRhdGEtPmdwaW9fcGFuZWxfYmxfZW4pOwo+IC0K
PiAtCWlmIChwZGF0YS0+Z3Bpb19wYW5lbF92YWRkICE9IC0xKQo+IC0JCWdwaW9fZnJlZShwZGF0
YS0+Z3Bpb19wYW5lbF92YWRkKTsKPiAtCj4gIAl0YzM1ODc2eF9jbGllbnQgPSBOVUxMOwo+ICAK
PiAgCXJldHVybiAwOwo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L3BsYXRmb3JtX2RhdGEv
dGMzNTg3NnguaCBiL2luY2x1ZGUvbGludXgvcGxhdGZvcm1fZGF0YS90YzM1ODc2eC5oCj4gZGVs
ZXRlZCBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggY2Q2YTUxYzcxZTdlLi4wMDAwMDAwMDAwMDAK
PiAtLS0gYS9pbmNsdWRlL2xpbnV4L3BsYXRmb3JtX2RhdGEvdGMzNTg3NnguaAo+ICsrKyAvZGV2
L251bGwKPiBAQCAtMSwxMSArMCwwIEBACj4gLQo+IC0jaWZuZGVmIF9UQzM1ODc2WF9ICj4gLSNk
ZWZpbmUgX1RDMzU4NzZYX0gKPiAtCj4gLXN0cnVjdCB0YzM1ODc2eF9wbGF0Zm9ybV9kYXRhIHsK
PiAtCWludCBncGlvX2JyaWRnZV9yZXNldDsKPiAtCWludCBncGlvX3BhbmVsX2JsX2VuOwo+IC0J
aW50IGdwaW9fcGFuZWxfdmFkZDsKPiAtfTsKPiAtCj4gLSNlbmRpZiAvKiBfVEMzNTg3NlhfSCAq
Lwo+IC0tIAo+IDIuMjMuMAo+IAoKLS0gCldpdGggQmVzdCBSZWdhcmRzLApBbmR5IFNoZXZjaGVu
a28KCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmkt
ZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
