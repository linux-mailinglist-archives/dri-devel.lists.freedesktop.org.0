Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id B0B655BCF0
	for <lists+dri-devel@lfdr.de>; Mon,  1 Jul 2019 15:32:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 26FA689BF1;
	Mon,  1 Jul 2019 13:32:21 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
X-Greylist: delayed 56055 seconds by postgrey-1.36 at gabe;
 Mon, 01 Jul 2019 13:32:19 UTC
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2914B89BF0;
 Mon,  1 Jul 2019 13:32:19 +0000 (UTC)
Received: from pendragon.ideasonboard.com
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 8E330524;
 Mon,  1 Jul 2019 15:32:16 +0200 (CEST)
Date: Mon, 1 Jul 2019 16:31:57 +0300
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Fuqian Huang <huangfq.daxian@gmail.com>
Subject: Re: [PATCH 1/4] gpu: Use dev_get_drvdata()
Message-ID: <20190701133157.GE5018@pendragon.ideasonboard.com>
References: <20190701032245.25906-1-huangfq.daxian@gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190701032245.25906-1-huangfq.daxian@gmail.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1561987936;
 bh=eRrSqx1218RYfQ7CVn4cs6cyjRX6HZ2qWtSqjeIi1TU=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=tdNy+zRb6qmG9iarrCp1t8abxJlZdvRQldKmYi3+q+LIMGY65FPt0A0FP5y2MGSuC
 yjNY860F2SOdSFhpVeAAr9hLlFss2kURbKD7DjiI1LKrbuYYFF9oHT937lcDmqaxNV
 2kpOiKYjwlB7Ny167B6msamcMO4I7d0wSBuRJai0=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, dri-devel@lists.freedesktop.org,
 Chandan Uddaraju <chandanu@codeaurora.org>,
 Laurent Pinchart <laurent.pinchart+renesas@ideasonboard.com>,
 Jonathan Marek <jonathan@marek.ca>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 Mamta Shukla <mamtashukla555@gmail.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>, Sibi Sankar <sibis@codeaurora.org>,
 freedreno@lists.freedesktop.org, Rajesh Yadav <ryadav@codeaurora.org>,
 linux-arm-msm@vger.kernel.org, Abhinav Kumar <abhinavk@codeaurora.org>,
 Bruce Wang <bzwang@chromium.org>, Thomas Gleixner <tglx@linutronix.de>,
 Sean Paul <sean@poorly.run>, Tomeu Vizoso <tomeu.vizoso@collabora.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>, linux-kernel@vger.kernel.org,
 Daniel Mack <daniel@zonque.org>, Enrico Weigelt <info@metux.net>,
 Sravanthi Kollukuduru <skolluku@codeaurora.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgRnVxaWFuLAoKVGhhbmsgeW91IGZvciB0aGUgcGFjaC4KCk9uIE1vbiwgSnVsIDAxLCAyMDE5
IGF0IDExOjIyOjM1QU0gKzA4MDAsIEZ1cWlhbiBIdWFuZyB3cm90ZToKPiBVc2luZyBkZXZfZ2V0
X2RydmRhdGEgZGlyZWN0bHkuCgpUaGlzIGNvdWxkIGJlIGV4cGFuZGVkIGEgYml0LiBNYXliZQoK
IlNldmVyYWwgZHJpdmVycyBjYXN0IGEgc3RydWN0IGRldmljZSBwb2ludGVyIHRvIGEgc3RydWN0
CnBsYXRmb3JtX2RldmljZSBwb2ludGVyIG9ubHkgdG8gdGhlbiBjYWxsIHBsYXRmb3JtX2dldF9k
cnZkYXRhKCkuIFRoZXNlCmNvbnN0cnVjdHMgY2FuIGJlIHNpbXBsaWZpZWQgYnkgdXNpbmcgZGV2
X2dldF9kcnZkYXRhKCkgZGlyZWN0bHkuIgoKSSB3b3VsZCBhbHNvIHJlcGxhY2UgdGhlICJncHU6
ICIgcHJlZml4IHdpdGggImRybTogIiBpbiB0aGUgc3ViamVjdApsaW5lLiBXaXRoIHRoZXNlIHNt
YWxsIGlzc3VlcyBhZGRyZXNzZWQsCgpSZXZpZXdlZC1ieTogTGF1cmVudCBQaW5jaGFydCA8bGF1
cmVudC5waW5jaGFydEBpZGVhc29uYm9hcmQuY29tPgoKPiBTaWduZWQtb2ZmLWJ5OiBGdXFpYW4g
SHVhbmcgPGh1YW5nZnEuZGF4aWFuQGdtYWlsLmNvbT4KPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJt
L21zbS9hZHJlbm8vYWRyZW5vX2RldmljZS5jICAgICAgfCAgNiArKy0tLS0KPiAgZHJpdmVycy9n
cHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2ttcy5jICAgICAgICAgfCAxMyArKysrKy0tLS0tLS0t
Cj4gIGRyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9tZHA1L21kcDVfa21zLmMgICAgICAgIHwgIDYg
KystLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9tc20vZHNpL2RzaV9ob3N0LmMgICAgICAgICAgICAg
IHwgIDYgKystLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2Rydi5jICAgICAgICAgICAg
ICAgICAgIHwgIDMgKy0tCj4gIGRyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL3BhbmVs
LWRzaS1jbS5jIHwgMTUgKysrKystLS0tLS0tLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9wYW5mcm9z
dC9wYW5mcm9zdF9kZXZpY2UuYyAgICAgIHwgIDYgKystLS0tCj4gIDcgZmlsZXMgY2hhbmdlZCwg
MTkgaW5zZXJ0aW9ucygrKSwgMzYgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19kZXZpY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9t
c20vYWRyZW5vL2FkcmVub19kZXZpY2UuYwo+IGluZGV4IGIzZGViMzQ2YTQyYi4uZmFmZDAwZDI1
NzRhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19kZXZp
Y2UuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vYWRyZW5vL2FkcmVub19kZXZpY2UuYwo+
IEBAIC00MDMsMTYgKzQwMywxNCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBk
dF9tYXRjaFtdID0gewo+ICAjaWZkZWYgQ09ORklHX1BNCj4gIHN0YXRpYyBpbnQgYWRyZW5vX3Jl
c3VtZShzdHJ1Y3QgZGV2aWNlICpkZXYpCj4gIHsKPiAtCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2Ug
KnBkZXYgPSB0b19wbGF0Zm9ybV9kZXZpY2UoZGV2KTsKPiAtCXN0cnVjdCBtc21fZ3B1ICpncHUg
PSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKPiArCXN0cnVjdCBtc21fZ3B1ICpncHUgPSBk
ZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiAgCj4gIAlyZXR1cm4gZ3B1LT5mdW5jcy0+cG1fcmVzdW1l
KGdwdSk7Cj4gIH0KPiAgCj4gIHN0YXRpYyBpbnQgYWRyZW5vX3N1c3BlbmQoc3RydWN0IGRldmlj
ZSAqZGV2KQo+ICB7Cj4gLQlzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2ID0gdG9fcGxhdGZv
cm1fZGV2aWNlKGRldik7Cj4gLQlzdHJ1Y3QgbXNtX2dwdSAqZ3B1ID0gcGxhdGZvcm1fZ2V0X2Ry
dmRhdGEocGRldik7Cj4gKwlzdHJ1Y3QgbXNtX2dwdSAqZ3B1ID0gZGV2X2dldF9kcnZkYXRhKGRl
dik7Cj4gIAo+ICAJcmV0dXJuIGdwdS0+ZnVuY3MtPnBtX3N1c3BlbmQoZ3B1KTsKPiAgfQo+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfa21zLmMgYi9kcml2
ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfa21zLmMKPiBpbmRleCBhZTg4NWU1ZGQwN2Qu
LjZjNmY4Y2E5MzgwZiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1
MS9kcHVfa21zLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfa21z
LmMKPiBAQCAtMTAyNSwxNiArMTAyNSwxNSBAQCBzdGF0aWMgaW50IGRwdV9iaW5kKHN0cnVjdCBk
ZXZpY2UgKmRldiwgc3RydWN0IGRldmljZSAqbWFzdGVyLCB2b2lkICpkYXRhKQo+ICAKPiAgc3Rh
dGljIHZvaWQgZHB1X3VuYmluZChzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBkZXZpY2UgKm1h
c3Rlciwgdm9pZCAqZGF0YSkKPiAgewo+IC0Jc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiA9
IHRvX3BsYXRmb3JtX2RldmljZShkZXYpOwo+IC0Jc3RydWN0IGRwdV9rbXMgKmRwdV9rbXMgPSBw
bGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKPiArCXN0cnVjdCBkcHVfa21zICpkcHVfa21zID0g
ZGV2X2dldF9kcnZkYXRhKGRldik7Cj4gIAlzdHJ1Y3QgZHNzX21vZHVsZV9wb3dlciAqbXAgPSAm
ZHB1X2ttcy0+bXA7Cj4gIAo+ICAJbXNtX2Rzc19wdXRfY2xrKG1wLT5jbGtfY29uZmlnLCBtcC0+
bnVtX2Nsayk7Cj4gLQlkZXZtX2tmcmVlKCZwZGV2LT5kZXYsIG1wLT5jbGtfY29uZmlnKTsKPiAr
CWRldm1fa2ZyZWUoZGV2LCBtcC0+Y2xrX2NvbmZpZyk7Cj4gIAltcC0+bnVtX2NsayA9IDA7Cj4g
IAo+ICAJaWYgKGRwdV9rbXMtPnJwbV9lbmFibGVkKQo+IC0JCXBtX3J1bnRpbWVfZGlzYWJsZSgm
cGRldi0+ZGV2KTsKPiArCQlwbV9ydW50aW1lX2Rpc2FibGUoZGV2KTsKPiAgfQo+ICAKPiAgc3Rh
dGljIGNvbnN0IHN0cnVjdCBjb21wb25lbnRfb3BzIGRwdV9vcHMgPSB7Cj4gQEAgLTEwNTYsOCAr
MTA1NSw3IEBAIHN0YXRpYyBpbnQgZHB1X2Rldl9yZW1vdmUoc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqcGRldikKPiAgc3RhdGljIGludCBfX21heWJlX3VudXNlZCBkcHVfcnVudGltZV9zdXNwZW5k
KHN0cnVjdCBkZXZpY2UgKmRldikKPiAgewo+ICAJaW50IHJjID0gLTE7Cj4gLQlzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlICpwZGV2ID0gdG9fcGxhdGZvcm1fZGV2aWNlKGRldik7Cj4gLQlzdHJ1Y3Qg
ZHB1X2ttcyAqZHB1X2ttcyA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwo+ICsJc3RydWN0
IGRwdV9rbXMgKmRwdV9rbXMgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiAgCXN0cnVjdCBkcm1f
ZGV2aWNlICpkZGV2Owo+ICAJc3RydWN0IGRzc19tb2R1bGVfcG93ZXIgKm1wID0gJmRwdV9rbXMt
Pm1wOwo+ICAKPiBAQCAtMTA3Nyw4ICsxMDc1LDcgQEAgc3RhdGljIGludCBfX21heWJlX3VudXNl
ZCBkcHVfcnVudGltZV9zdXNwZW5kKHN0cnVjdCBkZXZpY2UgKmRldikKPiAgc3RhdGljIGludCBf
X21heWJlX3VudXNlZCBkcHVfcnVudGltZV9yZXN1bWUoc3RydWN0IGRldmljZSAqZGV2KQo+ICB7
Cj4gIAlpbnQgcmMgPSAtMTsKPiAtCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYgPSB0b19w
bGF0Zm9ybV9kZXZpY2UoZGV2KTsKPiAtCXN0cnVjdCBkcHVfa21zICpkcHVfa21zID0gcGxhdGZv
cm1fZ2V0X2RydmRhdGEocGRldik7Cj4gKwlzdHJ1Y3QgZHB1X2ttcyAqZHB1X2ttcyA9IGRldl9n
ZXRfZHJ2ZGF0YShkZXYpOwo+ICAJc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyOwo+ICAJc3Ry
dWN0IGRybV9kZXZpY2UgKmRkZXY7Cj4gIAlzdHJ1Y3QgZHNzX21vZHVsZV9wb3dlciAqbXAgPSAm
ZHB1X2ttcy0+bXA7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9tZHA1
L21kcDVfa21zLmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvbWRwNS9tZHA1X2ttcy5jCj4g
aW5kZXggOTAxMDA5ZTFmMjE5Li4yNWQxZWJiMzJlNzMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL21zbS9kaXNwL21kcDUvbWRwNV9rbXMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9t
c20vZGlzcC9tZHA1L21kcDVfa21zLmMKPiBAQCAtMTA1Miw4ICsxMDUyLDcgQEAgc3RhdGljIGlu
dCBtZHA1X2Rldl9yZW1vdmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKPiAgCj4gIHN0
YXRpYyBfX21heWJlX3VudXNlZCBpbnQgbWRwNV9ydW50aW1lX3N1c3BlbmQoc3RydWN0IGRldmlj
ZSAqZGV2KQo+ICB7Cj4gLQlzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2ID0gdG9fcGxhdGZv
cm1fZGV2aWNlKGRldik7Cj4gLQlzdHJ1Y3QgbWRwNV9rbXMgKm1kcDVfa21zID0gcGxhdGZvcm1f
Z2V0X2RydmRhdGEocGRldik7Cj4gKwlzdHJ1Y3QgbWRwNV9rbXMgKm1kcDVfa21zID0gZGV2X2dl
dF9kcnZkYXRhKGRldik7Cj4gIAo+ICAJREJHKCIiKTsKPiAgCj4gQEAgLTEwNjIsOCArMTA2MSw3
IEBAIHN0YXRpYyBfX21heWJlX3VudXNlZCBpbnQgbWRwNV9ydW50aW1lX3N1c3BlbmQoc3RydWN0
IGRldmljZSAqZGV2KQo+ICAKPiAgc3RhdGljIF9fbWF5YmVfdW51c2VkIGludCBtZHA1X3J1bnRp
bWVfcmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikKPiAgewo+IC0Jc3RydWN0IHBsYXRmb3JtX2Rl
dmljZSAqcGRldiA9IHRvX3BsYXRmb3JtX2RldmljZShkZXYpOwo+IC0Jc3RydWN0IG1kcDVfa21z
ICptZHA1X2ttcyA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwo+ICsJc3RydWN0IG1kcDVf
a21zICptZHA1X2ttcyA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwo+ICAKPiAgCURCRygiIik7Cj4g
IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL2RzaS9kc2lfaG9zdC5jIGIvZHJp
dmVycy9ncHUvZHJtL21zbS9kc2kvZHNpX2hvc3QuYwo+IGluZGV4IGRiZjQ5MDE3NmMyYy4uODgy
ZjEzNzI1ODE5IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZHNpL2RzaV9ob3N0
LmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2RzaS9kc2lfaG9zdC5jCj4gQEAgLTQ3Nyw4
ICs0NzcsNyBAQCBzdGF0aWMgdm9pZCBkc2lfYnVzX2Nsa19kaXNhYmxlKHN0cnVjdCBtc21fZHNp
X2hvc3QgKm1zbV9ob3N0KQo+ICAKPiAgaW50IG1zbV9kc2lfcnVudGltZV9zdXNwZW5kKHN0cnVj
dCBkZXZpY2UgKmRldikKPiAgewo+IC0Jc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiA9IHRv
X3BsYXRmb3JtX2RldmljZShkZXYpOwo+IC0Jc3RydWN0IG1zbV9kc2kgKm1zbV9kc2kgPSBwbGF0
Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKPiArCXN0cnVjdCBtc21fZHNpICptc21fZHNpID0gZGV2
X2dldF9kcnZkYXRhKGRldik7Cj4gIAlzdHJ1Y3QgbWlwaV9kc2lfaG9zdCAqaG9zdCA9IG1zbV9k
c2ktPmhvc3Q7Cj4gIAlzdHJ1Y3QgbXNtX2RzaV9ob3N0ICptc21faG9zdCA9IHRvX21zbV9kc2lf
aG9zdChob3N0KTsKPiAgCj4gQEAgLTQ5Miw4ICs0OTEsNyBAQCBpbnQgbXNtX2RzaV9ydW50aW1l
X3N1c3BlbmQoc3RydWN0IGRldmljZSAqZGV2KQo+ICAKPiAgaW50IG1zbV9kc2lfcnVudGltZV9y
ZXN1bWUoc3RydWN0IGRldmljZSAqZGV2KQo+ICB7Cj4gLQlzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNl
ICpwZGV2ID0gdG9fcGxhdGZvcm1fZGV2aWNlKGRldik7Cj4gLQlzdHJ1Y3QgbXNtX2RzaSAqbXNt
X2RzaSA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwo+ICsJc3RydWN0IG1zbV9kc2kgKm1z
bV9kc2kgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiAgCXN0cnVjdCBtaXBpX2RzaV9ob3N0ICpo
b3N0ID0gbXNtX2RzaS0+aG9zdDsKPiAgCXN0cnVjdCBtc21fZHNpX2hvc3QgKm1zbV9ob3N0ID0g
dG9fbXNtX2RzaV9ob3N0KGhvc3QpOwo+ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L21zbS9tc21fZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9kcnYuYwo+IGluZGV4IGYz
OGQ3MzY3YmQzYi4uMGQ5ZTQ2NTYxNjA5IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9t
c20vbXNtX2Rydi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZHJ2LmMKPiBAQCAt
MjQxLDggKzI0MSw3IEBAIHN0YXRpYyBpbnQgdmJsYW5rX2N0cmxfcXVldWVfd29yayhzdHJ1Y3Qg
bXNtX2RybV9wcml2YXRlICpwcml2LAo+ICAKPiAgc3RhdGljIGludCBtc21fZHJtX3VuaW5pdChz
dHJ1Y3QgZGV2aWNlICpkZXYpCj4gIHsKPiAtCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYg
PSB0b19wbGF0Zm9ybV9kZXZpY2UoZGV2KTsKPiAtCXN0cnVjdCBkcm1fZGV2aWNlICpkZGV2ID0g
cGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7Cj4gKwlzdHJ1Y3QgZHJtX2RldmljZSAqZGRldiA9
IGRldl9nZXRfZHJ2ZGF0YShkZXYpOwo+ICAJc3RydWN0IG1zbV9kcm1fcHJpdmF0ZSAqcHJpdiA9
IGRkZXYtPmRldl9wcml2YXRlOwo+ICAJc3RydWN0IG1zbV9rbXMgKmttcyA9IHByaXYtPmttczsK
PiAgCXN0cnVjdCBtc21fbWRzcyAqbWRzcyA9IHByaXYtPm1kc3M7Cj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rpc3BsYXlzL3BhbmVsLWRzaS1jbS5jIGIvZHJpdmVycy9n
cHUvZHJtL29tYXBkcm0vZGlzcGxheXMvcGFuZWwtZHNpLWNtLmMKPiBpbmRleCA4ZWRlZjhlZjIz
YjAuLjUzMjQwZGExMzliMSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9k
aXNwbGF5cy9wYW5lbC1kc2ktY20uYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL2Rp
c3BsYXlzL3BhbmVsLWRzaS1jbS5jCj4gQEAgLTQwNyw4ICs0MDcsNyBAQCBzdGF0aWMgY29uc3Qg
c3RydWN0IGJhY2tsaWdodF9vcHMgZHNpY21fYmxfb3BzID0gewo+ICBzdGF0aWMgc3NpemVfdCBk
c2ljbV9udW1fZXJyb3JzX3Nob3coc3RydWN0IGRldmljZSAqZGV2LAo+ICAJCXN0cnVjdCBkZXZp
Y2VfYXR0cmlidXRlICphdHRyLCBjaGFyICpidWYpCj4gIHsKPiAtCXN0cnVjdCBwbGF0Zm9ybV9k
ZXZpY2UgKnBkZXYgPSB0b19wbGF0Zm9ybV9kZXZpY2UoZGV2KTsKPiAtCXN0cnVjdCBwYW5lbF9k
cnZfZGF0YSAqZGRhdGEgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKPiArCXN0cnVjdCBw
YW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiAgCXN0cnVjdCBv
bWFwX2Rzc19kZXZpY2UgKnNyYyA9IGRkYXRhLT5zcmM7Cj4gIAl1OCBlcnJvcnMgPSAwOwo+ICAJ
aW50IHI7Cj4gQEAgLTQzOSw4ICs0MzgsNyBAQCBzdGF0aWMgc3NpemVfdCBkc2ljbV9udW1fZXJy
b3JzX3Nob3coc3RydWN0IGRldmljZSAqZGV2LAo+ICBzdGF0aWMgc3NpemVfdCBkc2ljbV9od19y
ZXZpc2lvbl9zaG93KHN0cnVjdCBkZXZpY2UgKmRldiwKPiAgCQlzdHJ1Y3QgZGV2aWNlX2F0dHJp
YnV0ZSAqYXR0ciwgY2hhciAqYnVmKQo+ICB7Cj4gLQlzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpw
ZGV2ID0gdG9fcGxhdGZvcm1fZGV2aWNlKGRldik7Cj4gLQlzdHJ1Y3QgcGFuZWxfZHJ2X2RhdGEg
KmRkYXRhID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7Cj4gKwlzdHJ1Y3QgcGFuZWxfZHJ2
X2RhdGEgKmRkYXRhID0gZGV2X2dldF9kcnZkYXRhKGRldik7Cj4gIAlzdHJ1Y3Qgb21hcF9kc3Nf
ZGV2aWNlICpzcmMgPSBkZGF0YS0+c3JjOwo+ICAJdTggaWQxLCBpZDIsIGlkMzsKPiAgCWludCBy
Owo+IEBAIC01MDYsOCArNTA0LDcgQEAgc3RhdGljIHNzaXplX3QgZHNpY21fc2hvd191bHBzKHN0
cnVjdCBkZXZpY2UgKmRldiwKPiAgCQlzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwKPiAg
CQljaGFyICpidWYpCj4gIHsKPiAtCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYgPSB0b19w
bGF0Zm9ybV9kZXZpY2UoZGV2KTsKPiAtCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBw
bGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKPiArCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRh
dGEgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiAgCXVuc2lnbmVkIGludCB0Owo+ICAKPiAgCW11
dGV4X2xvY2soJmRkYXRhLT5sb2NrKTsKPiBAQCAtNTIxLDggKzUxOCw3IEBAIHN0YXRpYyBzc2l6
ZV90IGRzaWNtX3N0b3JlX3VscHNfdGltZW91dChzdHJ1Y3QgZGV2aWNlICpkZXYsCj4gIAkJc3Ry
dWN0IGRldmljZV9hdHRyaWJ1dGUgKmF0dHIsCj4gIAkJY29uc3QgY2hhciAqYnVmLCBzaXplX3Qg
Y291bnQpCj4gIHsKPiAtCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYgPSB0b19wbGF0Zm9y
bV9kZXZpY2UoZGV2KTsKPiAtCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBwbGF0Zm9y
bV9nZXRfZHJ2ZGF0YShwZGV2KTsKPiArCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBk
ZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiAgCXN0cnVjdCBvbWFwX2Rzc19kZXZpY2UgKnNyYyA9IGRk
YXRhLT5zcmM7Cj4gIAl1bnNpZ25lZCBsb25nIHQ7Cj4gIAlpbnQgcjsKPiBAQCAtNTUzLDggKzU0
OSw3IEBAIHN0YXRpYyBzc2l6ZV90IGRzaWNtX3Nob3dfdWxwc190aW1lb3V0KHN0cnVjdCBkZXZp
Y2UgKmRldiwKPiAgCQlzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwKPiAgCQljaGFyICpi
dWYpCj4gIHsKPiAtCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYgPSB0b19wbGF0Zm9ybV9k
ZXZpY2UoZGV2KTsKPiAtCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBwbGF0Zm9ybV9n
ZXRfZHJ2ZGF0YShwZGV2KTsKPiArCXN0cnVjdCBwYW5lbF9kcnZfZGF0YSAqZGRhdGEgPSBkZXZf
Z2V0X2RydmRhdGEoZGV2KTsKPiAgCXVuc2lnbmVkIGludCB0Owo+ICAKPiAgCW11dGV4X2xvY2so
JmRkYXRhLT5sb2NrKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3Bh
bmZyb3N0X2RldmljZS5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rldmlj
ZS5jCj4gaW5kZXggM2IyYmNlZDFiMDE1Li5lZDE4NzY0OGU2ZDggMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2RldmljZS5jCj4gQEAgLTIyNyw4ICsyMjcsNyBAQCBj
b25zdCBjaGFyICpwYW5mcm9zdF9leGNlcHRpb25fbmFtZShzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNl
ICpwZmRldiwgdTMyIGV4Y2VwdGlvbgo+ICAjaWZkZWYgQ09ORklHX1BNCj4gIGludCBwYW5mcm9z
dF9kZXZpY2VfcmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikKPiAgewo+IC0Jc3RydWN0IHBsYXRm
b3JtX2RldmljZSAqcGRldiA9IHRvX3BsYXRmb3JtX2RldmljZShkZXYpOwo+IC0Jc3RydWN0IHBh
bmZyb3N0X2RldmljZSAqcGZkZXYgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKPiArCXN0
cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gZGV2X2dldF9kcnZkYXRhKGRldik7Cj4gIAo+
ICAJcGFuZnJvc3RfZ3B1X3NvZnRfcmVzZXQocGZkZXYpOwo+ICAKPiBAQCAtMjQzLDggKzI0Miw3
IEBAIGludCBwYW5mcm9zdF9kZXZpY2VfcmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikKPiAgCj4g
IGludCBwYW5mcm9zdF9kZXZpY2Vfc3VzcGVuZChzdHJ1Y3QgZGV2aWNlICpkZXYpCj4gIHsKPiAt
CXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYgPSB0b19wbGF0Zm9ybV9kZXZpY2UoZGV2KTsK
PiAtCXN0cnVjdCBwYW5mcm9zdF9kZXZpY2UgKnBmZGV2ID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEo
cGRldik7Cj4gKwlzdHJ1Y3QgcGFuZnJvc3RfZGV2aWNlICpwZmRldiA9IGRldl9nZXRfZHJ2ZGF0
YShkZXYpOwo+ICAKPiAgCWlmICghcGFuZnJvc3Rfam9iX2lzX2lkbGUocGZkZXYpKQo+ICAJCXJl
dHVybiAtRUJVU1k7CgotLSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hhcnQKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlz
dApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0
b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
