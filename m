Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E970611E957
	for <lists+dri-devel@lfdr.de>; Fri, 13 Dec 2019 18:44:04 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0EB0F6EB7F;
	Fri, 13 Dec 2019 17:44:00 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga14.intel.com (mga14.intel.com [192.55.52.115])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B28156EB7F;
 Fri, 13 Dec 2019 17:43:58 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga002.jf.intel.com ([10.7.209.21])
 by fmsmga103.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 13 Dec 2019 09:43:56 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,309,1571727600"; d="scan'208";a="226346831"
Received: from stinkbox.fi.intel.com (HELO stinkbox) ([10.237.72.174])
 by orsmga002.jf.intel.com with SMTP; 13 Dec 2019 09:43:53 -0800
Received: by stinkbox (sSMTP sendmail emulation);
 Fri, 13 Dec 2019 19:43:52 +0200
From: Ville Syrjala <ville.syrjala@linux.intel.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v4 1/4] drm/edid: Abstract away cea_edid_modes[]
Date: Fri, 13 Dec 2019 19:43:45 +0200
Message-Id: <20191213174348.27261-2-ville.syrjala@linux.intel.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191213174348.27261-1-ville.syrjala@linux.intel.com>
References: <20191213174348.27261-1-ville.syrjala@linux.intel.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Hans Verkuil <hansverk@cisco.com>,
 Manasi Navare <manasi.d.navare@intel.com>, intel-gfx@lists.freedesktop.org,
 Tom Anderson <thomasanderson@google.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVmlsbGUgU3lyasOkbMOkIDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KCldl
J3JlIGdvaW5nIHRvIG5lZWQgdHdvIGNlYSBtb2RlIHRhYmxlcyAob25lIGZvciBWSUNzIDwgMTI4
LAphbm90aGVyIG9uZSBmb3IgVklDcyA+PSAxOTMpLiBUbyB0aGF0IGVuZCByZXBsYWNlIHRoZSBk
aXJlY3QKZWRpZF9jZWFfbW9kZXNbXSBsb29rdXBzIHdpdGggYSBmdW5jdGlvbiBjYWxsLiBBbmQg
d2UnbGwgcmVuYW1lCnRoZSBhcnJheSB0byBlZGlkX2NlYV9tb2Rlc18wW10gdG8gaW5kaWNhdGUg
aG93IGl0J3MgdG8gYmUKaW5kZXhlZC4KCnYyOiBGaXggdHlwb3MgKFRvbSkKICAgIERyb3AgdGhl
IHBvaW50bGVzcyBOVUxMIGNoZWNrcyBpbiB0aGUgbG9vcHMgKFRvbSkKICAgIEFzc2lnbiB3aGVu
IGRlY2xhcmluZyAoVG9tKQogICAgSW1wcm92ZSB0aGUgY29tbWVudCBmb3IgY2VhX21vZGVzXypb
XSB0byBpbmRpY2F0ZQogICAgdGhhdCBvbmUgc2hvdWxkIGFsd2F5cyB1c2UgY2VhX21vZGVfZm9y
X3ZpYygpIChUb20pCgpDYzogVG9tIEFuZGVyc29uIDx0aG9tYXNhbmRlcnNvbkBnb29nbGUuY29t
PgpDYzogSGFucyBWZXJrdWlsIDxoYW5zdmVya0BjaXNjby5jb20+CkNjOiBNYW5hc2kgTmF2YXJl
IDxtYW5hc2kuZC5uYXZhcmVAaW50ZWwuY29tPgpTaWduZWQtb2ZmLWJ5OiBWaWxsZSBTeXJqw6Rs
w6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9k
cm1fZWRpZC5jIHwgNjcgKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0KIDEg
ZmlsZSBjaGFuZ2VkLCA0NSBpbnNlcnRpb25zKCspLCAyMiBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2VkaWQuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZWRp
ZC5jCmluZGV4IDViMzNiN2NmZDY0NS4uMDBhNTQzYjlkYWFiIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vZHJtX2VkaWQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2VkaWQuYwpAQCAt
NzEwLDEyICs3MTAsMTEgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBtaW5pbW9kZSBleHRyYV9tb2Rl
c1tdID0gewogfTsKIAogLyoKLSAqIFByb2JhYmx5IHRha2VuIGZyb20gQ0VBLTg2MSBzcGVjLgot
ICogVGhpcyB0YWJsZSBpcyBjb252ZXJ0ZWQgZnJvbSB4b3JnJ3MgaHcveGZyZWU4Ni9tb2Rlcy94
Zjg2RWRpZE1vZGVzLmMuCisgKiBGcm9tIENFQS9DVEEtODYxIHNwZWMuCiAgKgotICogSW5kZXgg
dXNpbmcgdGhlIFZJQy4KKyAqIERvIG5vdCBhY2Nlc3MgZGlyZWN0bHksIGluc3RlYWQgYWx3YXlz
IHVzZSBjZWFfbW9kZV9mb3JfdmljKCkuCiAgKi8KLXN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Rp
c3BsYXlfbW9kZSBlZGlkX2NlYV9tb2Rlc1tdID0geworc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1f
ZGlzcGxheV9tb2RlIGVkaWRfY2VhX21vZGVzXzBbXSA9IHsKIAkvKiAwIC0gZHVtbXksIFZJQ3Mg
c3RhcnQgYXQgMSAqLwogCXsgfSwKIAkvKiAxIC0gNjQweDQ4MEA2MEh6IDQ6MyAqLwpAQCAtMzA3
MSw2ICszMDcwLDI1IEBAIHN0YXRpYyB1OCAqZHJtX2ZpbmRfY2VhX2V4dGVuc2lvbihjb25zdCBz
dHJ1Y3QgZWRpZCAqZWRpZCkKIAlyZXR1cm4gY2VhOwogfQogCitzdGF0aWMgY29uc3Qgc3RydWN0
IGRybV9kaXNwbGF5X21vZGUgKmNlYV9tb2RlX2Zvcl92aWModTggdmljKQoreworCWlmICghdmlj
KQorCQlyZXR1cm4gTlVMTDsKKwlpZiAodmljIDwgQVJSQVlfU0laRShlZGlkX2NlYV9tb2Rlc18w
KSkKKwkJcmV0dXJuICZlZGlkX2NlYV9tb2Rlc18wW3ZpY107CisJcmV0dXJuIE5VTEw7Cit9CisK
K3N0YXRpYyB1OCBjZWFfbnVtX3ZpY3Modm9pZCkKK3sKKwlyZXR1cm4gQVJSQVlfU0laRShlZGlk
X2NlYV9tb2Rlc18wKTsKK30KKworc3RhdGljIHU4IGNlYV9uZXh0X3ZpYyh1OCB2aWMpCit7CisJ
cmV0dXJuIHZpYyArIDE7Cit9CisKIC8qCiAgKiBDYWxjdWxhdGUgdGhlIGFsdGVybmF0ZSBjbG9j
ayBmb3IgdGhlIENFQSBtb2RlCiAgKiAoNjBIeiB2cy4gNTkuOTRIeiBldGMuKQpAQCAtMzEwOCwx
NCArMzEyNiwxNCBAQCBjZWFfbW9kZV9hbHRlcm5hdGVfdGltaW5ncyh1OCB2aWMsIHN0cnVjdCBk
cm1fZGlzcGxheV9tb2RlICptb2RlKQogCSAqIGdldCB0aGUgb3RoZXIgdmFyaWFudHMgYnkgc2lt
cGx5IGluY3JlYXNpbmcgdGhlCiAJICogdmVydGljYWwgZnJvbnQgcG9yY2ggbGVuZ3RoLgogCSAq
LwotCUJVSUxEX0JVR19PTihlZGlkX2NlYV9tb2Rlc1s4XS52dG90YWwgIT0gMjYyIHx8Ci0JCSAg
ICAgZWRpZF9jZWFfbW9kZXNbOV0udnRvdGFsICE9IDI2MiB8fAotCQkgICAgIGVkaWRfY2VhX21v
ZGVzWzEyXS52dG90YWwgIT0gMjYyIHx8Ci0JCSAgICAgZWRpZF9jZWFfbW9kZXNbMTNdLnZ0b3Rh
bCAhPSAyNjIgfHwKLQkJICAgICBlZGlkX2NlYV9tb2Rlc1syM10udnRvdGFsICE9IDMxMiB8fAot
CQkgICAgIGVkaWRfY2VhX21vZGVzWzI0XS52dG90YWwgIT0gMzEyIHx8Ci0JCSAgICAgZWRpZF9j
ZWFfbW9kZXNbMjddLnZ0b3RhbCAhPSAzMTIgfHwKLQkJICAgICBlZGlkX2NlYV9tb2Rlc1syOF0u
dnRvdGFsICE9IDMxMik7CisJQlVJTERfQlVHX09OKGNlYV9tb2RlX2Zvcl92aWMoOCktPnZ0b3Rh
bCAhPSAyNjIgfHwKKwkJICAgICBjZWFfbW9kZV9mb3JfdmljKDkpLT52dG90YWwgIT0gMjYyIHx8
CisJCSAgICAgY2VhX21vZGVfZm9yX3ZpYygxMiktPnZ0b3RhbCAhPSAyNjIgfHwKKwkJICAgICBj
ZWFfbW9kZV9mb3JfdmljKDEzKS0+dnRvdGFsICE9IDI2MiB8fAorCQkgICAgIGNlYV9tb2RlX2Zv
cl92aWMoMjMpLT52dG90YWwgIT0gMzEyIHx8CisJCSAgICAgY2VhX21vZGVfZm9yX3ZpYygyNCkt
PnZ0b3RhbCAhPSAzMTIgfHwKKwkJICAgICBjZWFfbW9kZV9mb3JfdmljKDI3KS0+dnRvdGFsICE9
IDMxMiB8fAorCQkgICAgIGNlYV9tb2RlX2Zvcl92aWMoMjgpLT52dG90YWwgIT0gMzEyKTsKIAog
CWlmICgoKHZpYyA9PSA4IHx8IHZpYyA9PSA5IHx8CiAJICAgICAgdmljID09IDEyIHx8IHZpYyA9
PSAxMykgJiYgbW9kZS0+dnRvdGFsIDwgMjYzKSB8fApAQCAtMzE0Myw4ICszMTYxLDggQEAgc3Rh
dGljIHU4IGRybV9tYXRjaF9jZWFfbW9kZV9jbG9ja190b2xlcmFuY2UoY29uc3Qgc3RydWN0IGRy
bV9kaXNwbGF5X21vZGUgKnRvX20KIAlpZiAodG9fbWF0Y2gtPnBpY3R1cmVfYXNwZWN0X3JhdGlv
KQogCQltYXRjaF9mbGFncyB8PSBEUk1fTU9ERV9NQVRDSF9BU1BFQ1RfUkFUSU87CiAKLQlmb3Ig
KHZpYyA9IDE7IHZpYyA8IEFSUkFZX1NJWkUoZWRpZF9jZWFfbW9kZXMpOyB2aWMrKykgewotCQlz
dHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSBjZWFfbW9kZSA9IGVkaWRfY2VhX21vZGVzW3ZpY107CisJ
Zm9yICh2aWMgPSAxOyB2aWMgPCBjZWFfbnVtX3ZpY3MoKTsgdmljID0gY2VhX25leHRfdmljKHZp
YykpIHsKKwkJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgY2VhX21vZGUgPSAqY2VhX21vZGVfZm9y
X3ZpYyh2aWMpOwogCQl1bnNpZ25lZCBpbnQgY2xvY2sxLCBjbG9jazI7CiAKIAkJLyogQ2hlY2sg
Ym90aCA2MEh6IGFuZCA1OS45NEh6ICovCkBAIC0zMTgyLDggKzMyMDAsOCBAQCB1OCBkcm1fbWF0
Y2hfY2VhX21vZGUoY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKnRvX21hdGNoKQogCWlm
ICh0b19tYXRjaC0+cGljdHVyZV9hc3BlY3RfcmF0aW8pCiAJCW1hdGNoX2ZsYWdzIHw9IERSTV9N
T0RFX01BVENIX0FTUEVDVF9SQVRJTzsKIAotCWZvciAodmljID0gMTsgdmljIDwgQVJSQVlfU0la
RShlZGlkX2NlYV9tb2Rlcyk7IHZpYysrKSB7Ci0JCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlIGNl
YV9tb2RlID0gZWRpZF9jZWFfbW9kZXNbdmljXTsKKwlmb3IgKHZpYyA9IDE7IHZpYyA8IGNlYV9u
dW1fdmljcygpOyB2aWMgPSBjZWFfbmV4dF92aWModmljKSkgeworCQlzdHJ1Y3QgZHJtX2Rpc3Bs
YXlfbW9kZSBjZWFfbW9kZSA9ICpjZWFfbW9kZV9mb3JfdmljKHZpYyk7CiAJCXVuc2lnbmVkIGlu
dCBjbG9jazEsIGNsb2NrMjsKIAogCQkvKiBDaGVjayBib3RoIDYwSHogYW5kIDU5Ljk0SHogKi8K
QEAgLTMyMDYsMTIgKzMyMjQsMTcgQEAgRVhQT1JUX1NZTUJPTChkcm1fbWF0Y2hfY2VhX21vZGUp
OwogCiBzdGF0aWMgYm9vbCBkcm1fdmFsaWRfY2VhX3ZpYyh1OCB2aWMpCiB7Ci0JcmV0dXJuIHZp
YyA+IDAgJiYgdmljIDwgQVJSQVlfU0laRShlZGlkX2NlYV9tb2Rlcyk7CisJcmV0dXJuIGNlYV9t
b2RlX2Zvcl92aWModmljKSAhPSBOVUxMOwogfQogCiBzdGF0aWMgZW51bSBoZG1pX3BpY3R1cmVf
YXNwZWN0IGRybV9nZXRfY2VhX2FzcGVjdF9yYXRpbyhjb25zdCB1OCB2aWRlb19jb2RlKQogewot
CXJldHVybiBlZGlkX2NlYV9tb2Rlc1t2aWRlb19jb2RlXS5waWN0dXJlX2FzcGVjdF9yYXRpbzsK
Kwljb25zdCBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSA9IGNlYV9tb2RlX2Zvcl92aWMo
dmlkZW9fY29kZSk7CisKKwlpZiAobW9kZSkKKwkJcmV0dXJuIG1vZGUtPnBpY3R1cmVfYXNwZWN0
X3JhdGlvOworCisJcmV0dXJuIEhETUlfUElDVFVSRV9BU1BFQ1RfTk9ORTsKIH0KIAogc3RhdGlj
IGVudW0gaGRtaV9waWN0dXJlX2FzcGVjdCBkcm1fZ2V0X2hkbWlfYXNwZWN0X3JhdGlvKGNvbnN0
IHU4IHZpZGVvX2NvZGUpCkBAIC0zMzIzLDcgKzMzNDYsNyBAQCBhZGRfYWx0ZXJuYXRlX2NlYV9t
b2RlcyhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLCBzdHJ1Y3QgZWRpZCAqZWRpZCkK
IAkJdW5zaWduZWQgaW50IGNsb2NrMSwgY2xvY2syOwogCiAJCWlmIChkcm1fdmFsaWRfY2VhX3Zp
Yyh2aWMpKSB7Ci0JCQljZWFfbW9kZSA9ICZlZGlkX2NlYV9tb2Rlc1t2aWNdOworCQkJY2VhX21v
ZGUgPSBjZWFfbW9kZV9mb3JfdmljKHZpYyk7CiAJCQljbG9jazIgPSBjZWFfbW9kZV9hbHRlcm5h
dGVfY2xvY2soY2VhX21vZGUpOwogCQl9IGVsc2UgewogCQkJdmljID0gZHJtX21hdGNoX2hkbWlf
bW9kZShtb2RlKTsKQEAgLTMzOTgsNyArMzQyMSw3IEBAIGRybV9kaXNwbGF5X21vZGVfZnJvbV92
aWNfaW5kZXgoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKIAlpZiAoIWRybV92YWxp
ZF9jZWFfdmljKHZpYykpCiAJCXJldHVybiBOVUxMOwogCi0JbmV3bW9kZSA9IGRybV9tb2RlX2R1
cGxpY2F0ZShkZXYsICZlZGlkX2NlYV9tb2Rlc1t2aWNdKTsKKwluZXdtb2RlID0gZHJtX21vZGVf
ZHVwbGljYXRlKGRldiwgY2VhX21vZGVfZm9yX3ZpYyh2aWMpKTsKIAlpZiAoIW5ld21vZGUpCiAJ
CXJldHVybiBOVUxMOwogCkBAIC0zNDMyLDcgKzM0NTUsNyBAQCBzdGF0aWMgaW50IGRvX3k0MjB2
ZGJfbW9kZXMoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciwKIAkJaWYgKCFkcm1fdmFs
aWRfY2VhX3ZpYyh2aWMpKQogCQkJY29udGludWU7CiAKLQkJbmV3bW9kZSA9IGRybV9tb2RlX2R1
cGxpY2F0ZShkZXYsICZlZGlkX2NlYV9tb2Rlc1t2aWNdKTsKKwkJbmV3bW9kZSA9IGRybV9tb2Rl
X2R1cGxpY2F0ZShkZXYsIGNlYV9tb2RlX2Zvcl92aWModmljKSk7CiAJCWlmICghbmV3bW9kZSkK
IAkJCWJyZWFrOwogCQliaXRtYXBfc2V0KGhkbWktPnk0MjBfdmRiX21vZGVzLCB2aWMsIDEpOwpA
QCAtNDAwMSw3ICs0MDI0LDcgQEAgc3RhdGljIHZvaWQgZml4dXBfZGV0YWlsZWRfY2VhX21vZGVf
Y2xvY2soc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGUpCiAJdmljID0gZHJtX21hdGNoX2Nl
YV9tb2RlX2Nsb2NrX3RvbGVyYW5jZShtb2RlLCA1KTsKIAlpZiAoZHJtX3ZhbGlkX2NlYV92aWMo
dmljKSkgewogCQl0eXBlID0gIkNFQSI7Ci0JCWNlYV9tb2RlID0gJmVkaWRfY2VhX21vZGVzW3Zp
Y107CisJCWNlYV9tb2RlID0gY2VhX21vZGVfZm9yX3ZpYyh2aWMpOwogCQljbG9jazEgPSBjZWFf
bW9kZS0+Y2xvY2s7CiAJCWNsb2NrMiA9IGNlYV9tb2RlX2FsdGVybmF0ZV9jbG9jayhjZWFfbW9k
ZSk7CiAJfSBlbHNlIHsKLS0gCjIuMjMuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlz
dGluZm8vZHJpLWRldmVsCg==
