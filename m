Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id F3C06B28E4
	for <lists+dri-devel@lfdr.de>; Sat, 14 Sep 2019 01:29:12 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E0B186F4AE;
	Fri, 13 Sep 2019 23:29:04 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga07.intel.com (mga07.intel.com [134.134.136.100])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 318B26F4AA;
 Fri, 13 Sep 2019 23:29:03 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 13 Sep 2019 16:29:02 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,492,1559545200"; d="scan'208";a="179832438"
Received: from josouza-mobl.jf.intel.com (HELO josouza-MOBL.intel.com)
 ([10.24.9.135])
 by orsmga008.jf.intel.com with ESMTP; 13 Sep 2019 16:29:02 -0700
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
To: intel-gfx@lists.freedesktop.org,
	dri-devel@lists.freedesktop.org
Subject: [PATCH CI 1/2] drm/connector: Share with non-atomic drivers the
 function to get the single encoder
Date: Fri, 13 Sep 2019 16:28:56 -0700
Message-Id: <20190913232857.389834-1-jose.souza@intel.com>
X-Mailer: git-send-email 2.23.0
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyAzIG5vbi1hdG9taWMgZHJpdmVycyBhbGwgaGF2ZSB0aGUgc2FtZSBmdW5jdGlvbiBnZXR0
aW5nIHRoZQpvbmx5IGVuY29kZXIgYXZhaWxhYmxlIGluIHRoZSBjb25uZWN0b3IsIGFsc28gYXRv
bWljIGRyaXZlcnMgaGF2ZQp0aGlzIGZhbGxiYWNrLiBTbyBtb3ZpbmcgaXQgYSBjb21tb24gcGxh
Y2UgYW5kIHNoYXJpbmcgYmV0d2VlbiBhdG9taWMKYW5kIG5vbi1hdG9taWMgZHJpdmVycy4KCldo
aWxlIGF0IGl0IEkgYWxzbyByZW1vdmVkIHRoZSBtZW50aW9uIG9mCmRybV9hdG9taWNfaGVscGVy
X2Jlc3RfZW5jb2RlcigpIHRoYXQgd2FzIHJlbmFtZWQgaW4KY29tbWl0IDI5N2UzMGI1ZDliNiAo
ImRybS9hdG9taWMtaGVscGVyOiBVbmV4cG9ydApkcm1fYXRvbWljX2hlbHBlcl9iZXN0X2VuY29k
ZXIiKS4KCnYzOiBtb3ZpbmcgZHJtX2Nvbm5lY3Rvcl9nZXRfc2luZ2xlX2VuY29kZXIgdG8gZHJt
X2ttc19oZWxwZXIgbW9kdWxlCgpSZXZpZXdlZC1ieTogTGF1cmVudCBQaW5jaGFydCA8bGF1cmVu
dC5waW5jaGFydEBpZGVhc29uYm9hcmQuY29tPgpSZXZpZXdlZC1ieTogVmlsbGUgU3lyasOkbMOk
IDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KU3VnZ2VzdGVkLWJ5OiBWaWxsZSBTeXJq
w6Rsw6QgPHZpbGxlLnN5cmphbGFAbGludXguaW50ZWwuY29tPgpDYzogVmlsbGUgU3lyasOkbMOk
IDx2aWxsZS5zeXJqYWxhQGxpbnV4LmludGVsLmNvbT4KQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmll
bC52ZXR0ZXJAZmZ3bGwuY2g+CkNjOiBMYXVyZW50IFBpbmNoYXJ0IDxsYXVyZW50LnBpbmNoYXJ0
QGlkZWFzb25ib2FyZC5jb20+CkNjOiBkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCkNj
OiBpbnRlbC1nZnhAbGlzdHMuZnJlZWRlc2t0b3Aub3JnClNpZ25lZC1vZmYtYnk6IEpvc8OpIFJv
YmVydG8gZGUgU291emEgPGpvc2Uuc291emFAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2Ry
bS9hc3QvYXN0X21vZGUuYyAgICAgICAgICAgICB8IDEyIC0tLS0tLS0tLS0tLQogZHJpdmVycy9n
cHUvZHJtL2RybV9hdG9taWNfaGVscGVyLmMgICAgICAgIHwgMTUgKystLS0tLS0tLS0tLS0tCiBk
cml2ZXJzL2dwdS9kcm0vZHJtX2NydGNfaGVscGVyLmMgICAgICAgICAgfCAxNyArKysrKysrKysr
KysrKysrLQogZHJpdmVycy9ncHUvZHJtL2RybV9jcnRjX2hlbHBlcl9pbnRlcm5hbC5oIHwgIDMg
KysrCiBkcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX21vZGUuYyAgICAgfCAxMSAtLS0t
LS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL3VkbC91ZGxfY29ubmVjdG9yLmMgICAgICAgIHwgIDgg
LS0tLS0tLS0KIGluY2x1ZGUvZHJtL2RybV9tb2Rlc2V0X2hlbHBlcl92dGFibGVzLmggICB8ICA3
ICsrKy0tLS0KIDcgZmlsZXMgY2hhbmdlZCwgMjQgaW5zZXJ0aW9ucygrKSwgNDkgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jIGIvZHJpdmVy
cy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jCmluZGV4IGQzNDljNzIxNTAxYy4uZWVmOTVlMWFmMDZi
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYXN0L2FzdF9tb2RlLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FzdC9hc3RfbW9kZS5jCkBAIC02ODcsMTcgKzY4Nyw2IEBAIHN0YXRpYyB2b2lk
IGFzdF9lbmNvZGVyX2Rlc3Ryb3koc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQogCWtmcmVl
KGVuY29kZXIpOwogfQogCi0KLXN0YXRpYyBzdHJ1Y3QgZHJtX2VuY29kZXIgKmFzdF9iZXN0X3Np
bmdsZV9lbmNvZGVyKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCi17Ci0JaW50IGVu
Y19pZCA9IGNvbm5lY3Rvci0+ZW5jb2Rlcl9pZHNbMF07Ci0JLyogcGljayB0aGUgZW5jb2RlciBp
ZHMgKi8KLQlpZiAoZW5jX2lkKQotCQlyZXR1cm4gZHJtX2VuY29kZXJfZmluZChjb25uZWN0b3It
PmRldiwgTlVMTCwgZW5jX2lkKTsKLQlyZXR1cm4gTlVMTDsKLX0KLQotCiBzdGF0aWMgY29uc3Qg
c3RydWN0IGRybV9lbmNvZGVyX2Z1bmNzIGFzdF9lbmNfZnVuY3MgPSB7CiAJLmRlc3Ryb3kgPSBh
c3RfZW5jb2Rlcl9kZXN0cm95LAogfTsKQEAgLTg0Nyw3ICs4MzYsNiBAQCBzdGF0aWMgdm9pZCBh
c3RfY29ubmVjdG9yX2Rlc3Ryb3koc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKIHN0
YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MgYXN0X2Nvbm5lY3Rv
cl9oZWxwZXJfZnVuY3MgPSB7CiAJLm1vZGVfdmFsaWQgPSBhc3RfbW9kZV92YWxpZCwKIAkuZ2V0
X21vZGVzID0gYXN0X2dldF9tb2RlcywKLQkuYmVzdF9lbmNvZGVyID0gYXN0X2Jlc3Rfc2luZ2xl
X2VuY29kZXIsCiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfZnVuY3Mg
YXN0X2Nvbm5lY3Rvcl9mdW5jcyA9IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1f
YXRvbWljX2hlbHBlci5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfaGVscGVyLmMKaW5k
ZXggNDcwNjQzOWZiNDkwLi45ZDdlNGRhNmMyOTIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9kcm1fYXRvbWljX2hlbHBlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX2hl
bHBlci5jCkBAIC05NywxNyArOTcsNiBAQCBkcm1fYXRvbWljX2hlbHBlcl9wbGFuZV9jaGFuZ2Vk
KHN0cnVjdCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSwKIAl9CiB9CiAKLS8qCi0gKiBGb3IgY29u
bmVjdG9ycyB0aGF0IHN1cHBvcnQgbXVsdGlwbGUgZW5jb2RlcnMsIGVpdGhlciB0aGUKLSAqIC5h
dG9taWNfYmVzdF9lbmNvZGVyKCkgb3IgLmJlc3RfZW5jb2RlcigpIG9wZXJhdGlvbiBtdXN0IGJl
IGltcGxlbWVudGVkLgotICovCi1zdGF0aWMgc3RydWN0IGRybV9lbmNvZGVyICoKLXBpY2tfc2lu
Z2xlX2VuY29kZXJfZm9yX2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9y
KQotewotCVdBUk5fT04oY29ubmVjdG9yLT5lbmNvZGVyX2lkc1sxXSk7Ci0JcmV0dXJuIGRybV9l
bmNvZGVyX2ZpbmQoY29ubmVjdG9yLT5kZXYsIE5VTEwsIGNvbm5lY3Rvci0+ZW5jb2Rlcl9pZHNb
MF0pOwotfQotCiBzdGF0aWMgaW50IGhhbmRsZV9jb25mbGljdGluZ19lbmNvZGVycyhzdHJ1Y3Qg
ZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUsCiAJCQkJICAgICAgIGJvb2wgZGlzYWJsZV9jb25mbGlj
dGluZ19lbmNvZGVycykKIHsKQEAgLTEzNSw3ICsxMjQsNyBAQCBzdGF0aWMgaW50IGhhbmRsZV9j
b25mbGljdGluZ19lbmNvZGVycyhzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUsCiAJCWVs
c2UgaWYgKGZ1bmNzLT5iZXN0X2VuY29kZXIpCiAJCQluZXdfZW5jb2RlciA9IGZ1bmNzLT5iZXN0
X2VuY29kZXIoY29ubmVjdG9yKTsKIAkJZWxzZQotCQkJbmV3X2VuY29kZXIgPSBwaWNrX3Npbmds
ZV9lbmNvZGVyX2Zvcl9jb25uZWN0b3IoY29ubmVjdG9yKTsKKwkJCW5ld19lbmNvZGVyID0gZHJt
X2Nvbm5lY3Rvcl9nZXRfc2luZ2xlX2VuY29kZXIoY29ubmVjdG9yKTsKIAogCQlpZiAobmV3X2Vu
Y29kZXIpIHsKIAkJCWlmIChlbmNvZGVyX21hc2sgJiBkcm1fZW5jb2Rlcl9tYXNrKG5ld19lbmNv
ZGVyKSkgewpAQCAtMzU5LDcgKzM0OCw3IEBAIHVwZGF0ZV9jb25uZWN0b3Jfcm91dGluZyhzdHJ1
Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUsCiAJZWxzZSBpZiAoZnVuY3MtPmJlc3RfZW5jb2Rl
cikKIAkJbmV3X2VuY29kZXIgPSBmdW5jcy0+YmVzdF9lbmNvZGVyKGNvbm5lY3Rvcik7CiAJZWxz
ZQotCQluZXdfZW5jb2RlciA9IHBpY2tfc2luZ2xlX2VuY29kZXJfZm9yX2Nvbm5lY3Rvcihjb25u
ZWN0b3IpOworCQluZXdfZW5jb2RlciA9IGRybV9jb25uZWN0b3JfZ2V0X3NpbmdsZV9lbmNvZGVy
KGNvbm5lY3Rvcik7CiAKIAlpZiAoIW5ld19lbmNvZGVyKSB7CiAJCURSTV9ERUJVR19BVE9NSUMo
Ik5vIHN1aXRhYmxlIGVuY29kZXIgZm91bmQgZm9yIFtDT05ORUNUT1I6JWQ6JXNdXG4iLApkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9jcnRjX2hlbHBlci5jIGIvZHJpdmVycy9ncHUv
ZHJtL2RybV9jcnRjX2hlbHBlci5jCmluZGV4IGE1MTgyNGE3ZTdjMS4uNGE3NDQ3YTUzY2VhIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2NydGNfaGVscGVyLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2RybV9jcnRjX2hlbHBlci5jCkBAIC00NjAsNiArNDYwLDE3IEBAIGRybV9jcnRj
X2hlbHBlcl9kaXNhYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKIAlfX2RybV9oZWxwZXJfZGlz
YWJsZV91bnVzZWRfZnVuY3Rpb25zKGRldik7CiB9CiAKKy8qCisgKiBGb3IgY29ubmVjdG9ycyB0
aGF0IHN1cHBvcnQgbXVsdGlwbGUgZW5jb2RlcnMsIGVpdGhlciB0aGUKKyAqIC5hdG9taWNfYmVz
dF9lbmNvZGVyKCkgb3IgLmJlc3RfZW5jb2RlcigpIG9wZXJhdGlvbiBtdXN0IGJlIGltcGxlbWVu
dGVkLgorICovCitzdHJ1Y3QgZHJtX2VuY29kZXIgKgorZHJtX2Nvbm5lY3Rvcl9nZXRfc2luZ2xl
X2VuY29kZXIoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKK3sKKwlXQVJOX09OKGNv
bm5lY3Rvci0+ZW5jb2Rlcl9pZHNbMV0pOworCXJldHVybiBkcm1fZW5jb2Rlcl9maW5kKGNvbm5l
Y3Rvci0+ZGV2LCBOVUxMLCBjb25uZWN0b3ItPmVuY29kZXJfaWRzWzBdKTsKK30KKwogLyoqCiAg
KiBkcm1fY3J0Y19oZWxwZXJfc2V0X2NvbmZpZyAtIHNldCBhIG5ldyBjb25maWcgZnJvbSB1c2Vy
c3BhY2UKICAqIEBzZXQ6IG1vZGUgc2V0IGNvbmZpZ3VyYXRpb24KQEAgLTYyNSw3ICs2MzYsMTEg
QEAgaW50IGRybV9jcnRjX2hlbHBlcl9zZXRfY29uZmlnKHN0cnVjdCBkcm1fbW9kZV9zZXQgKnNl
dCwKIAkJbmV3X2VuY29kZXIgPSBjb25uZWN0b3ItPmVuY29kZXI7CiAJCWZvciAocm8gPSAwOyBy
byA8IHNldC0+bnVtX2Nvbm5lY3RvcnM7IHJvKyspIHsKIAkJCWlmIChzZXQtPmNvbm5lY3RvcnNb
cm9dID09IGNvbm5lY3RvcikgewotCQkJCW5ld19lbmNvZGVyID0gY29ubmVjdG9yX2Z1bmNzLT5i
ZXN0X2VuY29kZXIoY29ubmVjdG9yKTsKKwkJCQlpZiAoY29ubmVjdG9yX2Z1bmNzLT5iZXN0X2Vu
Y29kZXIpCisJCQkJCW5ld19lbmNvZGVyID0gY29ubmVjdG9yX2Z1bmNzLT5iZXN0X2VuY29kZXIo
Y29ubmVjdG9yKTsKKwkJCQllbHNlCisJCQkJCW5ld19lbmNvZGVyID0gZHJtX2Nvbm5lY3Rvcl9n
ZXRfc2luZ2xlX2VuY29kZXIoY29ubmVjdG9yKTsKKwogCQkJCS8qIGlmIHdlIGNhbid0IGdldCBh
biBlbmNvZGVyIGZvciBhIGNvbm5lY3RvcgogCQkJCSAgIHdlIGFyZSBzZXR0aW5nIG5vdyAtIHRo
ZW4gZmFpbCAqLwogCQkJCWlmIChuZXdfZW5jb2RlciA9PSBOVUxMKQpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2RybV9jcnRjX2hlbHBlcl9pbnRlcm5hbC5oIGIvZHJpdmVycy9ncHUvZHJt
L2RybV9jcnRjX2hlbHBlcl9pbnRlcm5hbC5oCmluZGV4IGI1YWMxNTgxZTYyMy4uZjBhNjZlZjQ3
ZTVhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2NydGNfaGVscGVyX2ludGVybmFs
LmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9jcnRjX2hlbHBlcl9pbnRlcm5hbC5oCkBAIC03
NSwzICs3NSw2IEBAIGVudW0gZHJtX21vZGVfc3RhdHVzIGRybV9lbmNvZGVyX21vZGVfdmFsaWQo
c3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyLAogCQkJCQkgICAgY29uc3Qgc3RydWN0IGRybV9k
aXNwbGF5X21vZGUgKm1vZGUpOwogZW51bSBkcm1fbW9kZV9zdGF0dXMgZHJtX2Nvbm5lY3Rvcl9t
b2RlX3ZhbGlkKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCiAJCQkJCSAgICAgIHN0
cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlKTsKKworc3RydWN0IGRybV9lbmNvZGVyICoKK2Ry
bV9jb25uZWN0b3JfZ2V0X3NpbmdsZV9lbmNvZGVyKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25u
ZWN0b3IpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9tb2Rl
LmMgYi9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX21vZGUuYwppbmRleCA1ZTc3OGI1
ZjFhMTAuLjY4MjI2NTU2MDQ0YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAv
bWdhZzIwMF9tb2RlLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9tb2Rl
LmMKQEAgLTE2MzgsMTYgKzE2MzgsNiBAQCBzdGF0aWMgZW51bSBkcm1fbW9kZV9zdGF0dXMgbWdh
X3ZnYV9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCiAJcmV0dXJu
IE1PREVfT0s7CiB9CiAKLXN0YXRpYyBzdHJ1Y3QgZHJtX2VuY29kZXIgKm1nYV9jb25uZWN0b3Jf
YmVzdF9lbmNvZGVyKHN0cnVjdCBkcm1fY29ubmVjdG9yCi0JCQkJCQkgICpjb25uZWN0b3IpCi17
Ci0JaW50IGVuY19pZCA9IGNvbm5lY3Rvci0+ZW5jb2Rlcl9pZHNbMF07Ci0JLyogcGljayB0aGUg
ZW5jb2RlciBpZHMgKi8KLQlpZiAoZW5jX2lkKQotCQlyZXR1cm4gZHJtX2VuY29kZXJfZmluZChj
b25uZWN0b3ItPmRldiwgTlVMTCwgZW5jX2lkKTsKLQlyZXR1cm4gTlVMTDsKLX0KLQogc3RhdGlj
IHZvaWQgbWdhX2Nvbm5lY3Rvcl9kZXN0cm95KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0
b3IpCiB7CiAJc3RydWN0IG1nYV9jb25uZWN0b3IgKm1nYV9jb25uZWN0b3IgPSB0b19tZ2FfY29u
bmVjdG9yKGNvbm5lY3Rvcik7CkBAIC0xNjU5LDcgKzE2NDksNiBAQCBzdGF0aWMgdm9pZCBtZ2Ff
Y29ubmVjdG9yX2Rlc3Ryb3koc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKIHN0YXRp
YyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3MgbWdhX3ZnYV9jb25uZWN0
b3JfaGVscGVyX2Z1bmNzID0gewogCS5nZXRfbW9kZXMgPSBtZ2FfdmdhX2dldF9tb2RlcywKIAku
bW9kZV92YWxpZCA9IG1nYV92Z2FfbW9kZV92YWxpZCwKLQkuYmVzdF9lbmNvZGVyID0gbWdhX2Nv
bm5lY3Rvcl9iZXN0X2VuY29kZXIsCiB9OwogCiBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9jb25u
ZWN0b3JfZnVuY3MgbWdhX3ZnYV9jb25uZWN0b3JfZnVuY3MgPSB7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vdWRsL3VkbF9jb25uZWN0b3IuYyBiL2RyaXZlcnMvZ3B1L2RybS91ZGwvdWRs
X2Nvbm5lY3Rvci5jCmluZGV4IGRkYjYxYTYwYzYxMC4uYjRhZTNlODlhN2I0IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2dwdS9kcm0vdWRsL3VkbF9jb25uZWN0b3IuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vdWRsL3VkbF9jb25uZWN0b3IuYwpAQCAtOTAsMTMgKzkwLDYgQEAgdWRsX2RldGVjdChzdHJ1
Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLCBib29sIGZvcmNlKQogCXJldHVybiBjb25uZWN0
b3Jfc3RhdHVzX2Nvbm5lY3RlZDsKIH0KIAotc3RhdGljIHN0cnVjdCBkcm1fZW5jb2RlcioKLXVk
bF9iZXN0X3NpbmdsZV9lbmNvZGVyKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCi17
Ci0JaW50IGVuY19pZCA9IGNvbm5lY3Rvci0+ZW5jb2Rlcl9pZHNbMF07Ci0JcmV0dXJuIGRybV9l
bmNvZGVyX2ZpbmQoY29ubmVjdG9yLT5kZXYsIE5VTEwsIGVuY19pZCk7Ci19Ci0KIHN0YXRpYyBp
bnQgdWRsX2Nvbm5lY3Rvcl9zZXRfcHJvcGVydHkoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5l
Y3RvciwKIAkJCQkgICAgICBzdHJ1Y3QgZHJtX3Byb3BlcnR5ICpwcm9wZXJ0eSwKIAkJCQkgICAg
ICB1aW50NjRfdCB2YWwpCkBAIC0xMjAsNyArMTEzLDYgQEAgc3RhdGljIHZvaWQgdWRsX2Nvbm5l
Y3Rvcl9kZXN0cm95KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCiBzdGF0aWMgY29u
c3Qgc3RydWN0IGRybV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzIHVkbF9jb25uZWN0b3JfaGVscGVy
X2Z1bmNzID0gewogCS5nZXRfbW9kZXMgPSB1ZGxfZ2V0X21vZGVzLAogCS5tb2RlX3ZhbGlkID0g
dWRsX21vZGVfdmFsaWQsCi0JLmJlc3RfZW5jb2RlciA9IHVkbF9iZXN0X3NpbmdsZV9lbmNvZGVy
LAogfTsKIAogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIHVkbF9jb25u
ZWN0b3JfZnVuY3MgPSB7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fbW9kZXNldF9oZWxw
ZXJfdnRhYmxlcy5oIGIvaW5jbHVkZS9kcm0vZHJtX21vZGVzZXRfaGVscGVyX3Z0YWJsZXMuaApp
bmRleCA2YjE4YzhhZGZlOWQuLjVhODdmMWJkN2EzZiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0v
ZHJtX21vZGVzZXRfaGVscGVyX3Z0YWJsZXMuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fbW9kZXNl
dF9oZWxwZXJfdnRhYmxlcy5oCkBAIC05NTUsOSArOTU1LDggQEAgc3RydWN0IGRybV9jb25uZWN0
b3JfaGVscGVyX2Z1bmNzIHsKIAkgKiBAYXRvbWljX2Jlc3RfZW5jb2Rlci4KIAkgKgogCSAqIFlv
dSBjYW4gbGVhdmUgdGhpcyBmdW5jdGlvbiB0byBOVUxMIGlmIHRoZSBjb25uZWN0b3IgaXMgb25s
eQotCSAqIGF0dGFjaGVkIHRvIGEgc2luZ2xlIGVuY29kZXIgYW5kIHlvdSBhcmUgdXNpbmcgdGhl
IGF0b21pYyBoZWxwZXJzLgotCSAqIEluIHRoaXMgY2FzZSwgdGhlIGNvcmUgd2lsbCBjYWxsIGRy
bV9hdG9taWNfaGVscGVyX2Jlc3RfZW5jb2RlcigpCi0JICogZm9yIHlvdS4KKwkgKiBhdHRhY2hl
ZCB0byBhIHNpbmdsZSBlbmNvZGVyLiBJbiB0aGlzIGNhc2UsIHRoZSBjb3JlIHdpbGwgY2FsbAor
CSAqIGRybV9jb25uZWN0b3JfZ2V0X3NpbmdsZV9lbmNvZGVyKCkgZm9yIHlvdS4KIAkgKgogCSAq
IFJFVFVSTlM6CiAJICoKQEAgLTk3Nyw3ICs5NzYsNyBAQCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9o
ZWxwZXJfZnVuY3MgewogCSAqCiAJICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJ5IGRybV9hdG9t
aWNfaGVscGVyX2NoZWNrX21vZGVzZXQoKS4KIAkgKiBJZiBpdCBpcyBub3QgaW1wbGVtZW50ZWQs
IHRoZSBjb3JlIHdpbGwgZmFsbGJhY2sgdG8gQGJlc3RfZW5jb2RlcgotCSAqIChvciBkcm1fYXRv
bWljX2hlbHBlcl9iZXN0X2VuY29kZXIoKSBpZiBAYmVzdF9lbmNvZGVyIGlzIE5VTEwpLgorCSAq
IChvciBkcm1fY29ubmVjdG9yX2dldF9zaW5nbGVfZW5jb2RlcigpIGlmIEBiZXN0X2VuY29kZXIg
aXMgTlVMTCkuCiAJICoKIAkgKiBOT1RFOgogCSAqCi0tIAoyLjIzLjAKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QK
ZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9w
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
