Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 49421275A52
	for <lists+dri-devel@lfdr.de>; Wed, 23 Sep 2020 16:39:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3288D882B8;
	Wed, 23 Sep 2020 14:39:34 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from NAM10-DM6-obe.outbound.protection.outlook.com
 (mail-dm6nam10on2068.outbound.protection.outlook.com [40.107.93.68])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BE15F882B8
 for <dri-devel@lists.freedesktop.org>; Wed, 23 Sep 2020 14:39:32 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=GarjudZnzXgbPFO4wpxdNjFOxOKVSaihdrWEfuH9PakAanU+wfbHt8mJ5PUL116s2h4v+EUGgatCyd682T3+v7lXBgfWhMrwpeFYWcx/MbAcP/dBtcR7bNOn06Fuj3B4OBoQ12LxXgOIuefR7TxvT+4aFupaVmoZ0M5AZm651SONbtcR7uz0hBlFnHgq7EJX1tcGvpiy4EYVYy4DxZVLoir6ow5ctmqpYr5UT4EMAtBs+43JzwcUMzk5+p1aNpHH4NgOEyXcTcU2tQjyAixjHpPcuzYiE0tGw9beXlhsIwQcbKJo/ZuIFDa/Ar1PUntiCLjrH2lkFcCidyvF1V6q+Q==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=4eaOhYgSwih58/ca3gDwZwcTJfRcXFN9/w4QFZXK0kE=;
 b=La46k5OLj7oSb6esEC59hWYnGmviAN+LAxfPEUNwM2aR+suZBx7jWAqV8ArqBzNH25lc3dBS+9SK9ZEDO2Dvxrg/mMxWDWn0DFj1bJWfJMsFYI7Z2F3CkF6Xh3iYbhkJ0ZyU2E+bMP0ReDaejx04AwTHJyGFylGHV0TlkX8f2FR1vrrQr+G7YiY7ylNUUFyA9zglaH5mdQRsGr0I76l95AdKI7hWFVcHm5gwZw6PbMsLnLioAw2FT0MRLKxx5T6ER+c8qHMepZ5cvZ2xu1MmNb5NTyIrA8kCIvSPuWivyBSPnMqCeHhIS9tLtU5Id5ClJfB1DxedsnVQmIBGmCG5EA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amdcloud.onmicrosoft.com; s=selector2-amdcloud-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=4eaOhYgSwih58/ca3gDwZwcTJfRcXFN9/w4QFZXK0kE=;
 b=z8BknvypF9myfCFFlsnIQETDKzcEFm1UaH70dxh9Nl6+AjF/iWLWegMxN2ivxvIggY6LN8KNir6CpmfQu/MV/XWxtYAMHWGctsusgkKkJzZKtYIlFRGpS7p8lCIR80zW1+hfcYYkuu0Uu+5OwA92byn+KPych/3+/fQifAMHhjU=
Authentication-Results: redhat.com; dkim=none (message not signed)
 header.d=none;redhat.com; dmarc=none action=none header.from=amd.com;
Received: from MN2PR12MB3775.namprd12.prod.outlook.com (2603:10b6:208:159::19)
 by MN2PR12MB4239.namprd12.prod.outlook.com (2603:10b6:208:1d2::11)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.3391.19; Wed, 23 Sep
 2020 14:39:30 +0000
Received: from MN2PR12MB3775.namprd12.prod.outlook.com
 ([fe80::f8f7:7403:1c92:3a60]) by MN2PR12MB3775.namprd12.prod.outlook.com
 ([fe80::f8f7:7403:1c92:3a60%6]) with mapi id 15.20.3412.022; Wed, 23 Sep 2020
 14:39:30 +0000
Subject: Re: [PATCH 04/10] drm/nouveau/ttm: plumb ctx through move functions.
To: Dave Airlie <airlied@gmail.com>, dri-devel@lists.freedesktop.org
References: <20200923030454.362731-1-airlied@gmail.com>
 <20200923030454.362731-5-airlied@gmail.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <christian.koenig@amd.com>
Message-ID: <dddc02ee-1efc-4339-1b97-5bb0ada3706c@amd.com>
Date: Wed, 23 Sep 2020 16:39:22 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.10.0
In-Reply-To: <20200923030454.362731-5-airlied@gmail.com>
Content-Language: en-US
X-Originating-IP: [2a02:908:1252:fb60:be8a:bd56:1f94:86e7]
X-ClientProxiedBy: AM4PR07CA0008.eurprd07.prod.outlook.com
 (2603:10a6:205:1::21) To MN2PR12MB3775.namprd12.prod.outlook.com
 (2603:10b6:208:159::19)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from [IPv6:2a02:908:1252:fb60:be8a:bd56:1f94:86e7]
 (2a02:908:1252:fb60:be8a:bd56:1f94:86e7) by
 AM4PR07CA0008.eurprd07.prod.outlook.com (2603:10a6:205:1::21) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.3412.4 via Frontend Transport; Wed, 23 Sep 2020 14:39:28 +0000
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-HT: Tenant
X-MS-Office365-Filtering-Correlation-Id: eee1bb44-4ddc-4390-f595-08d85fce7a44
X-MS-TrafficTypeDiagnostic: MN2PR12MB4239:
X-Microsoft-Antispam-PRVS: <MN2PR12MB4239345A434EFC69288DA38E83380@MN2PR12MB4239.namprd12.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:901;
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: MjoxPWE5nBlYxOAtgQ7dLheDdFTzGMbW39VjdFYrVSJY0/+tWt26ZgO15kiBJIDqeCMTaYznzTDCH+UEv2y4IlVUK53x3dN1NYsDsH8JH+WyAaK6nrFILmF+x6UWqs1ZDtzt5Vm/Fxy9OLiNLUCyHMNAzPm+XgZuYgXNch0BoIX6WUhtlGE8lglkqpt9kEA1gFl54wB3ZGFRpUKvtfAe8PDEbYgmx6GZXl5cFJAeyI4dk0Opn7k+to5n4wynp8JSvymjc6hV/ZOEDq1vrNsfIcoT7JjGOr1j+91C9U/KlwhQ+DRZONAiG5aqaGiKbOcgB/RzL4AfKuViI7F4l9RzX6r5qN5h2xoR1Sj40rjbVrG5KqH111600VGgcQ4w12dn
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:MN2PR12MB3775.namprd12.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(4636009)(396003)(376002)(346002)(136003)(366004)(39860400002)(5660300002)(2616005)(86362001)(31686004)(16526019)(186003)(66476007)(83380400001)(66556008)(8676002)(8936002)(66574015)(4326008)(31696002)(478600001)(66946007)(52116002)(6486002)(316002)(6666004)(2906002)(36756003)(43740500002);
 DIR:OUT; SFP:1101; 
X-MS-Exchange-AntiSpam-MessageData: pTSbtt3dq8dqhs3pGe7SHjzV3G8bcQMvJ46MyCUKBLbYKo9oMUmFjIolcQmBmatfqAD2H62HUWztAVS+VJktzZi+fUsMDCd5uJq6cqc5HOjl+RXclvNnNyETFD70khEl9i8Y/RFOenUer31+EsoBd8h8h5hRkvkbN/AeI8OVbiiA5BVKLj9vt8a+Ecva5HoLKGx44H3XqTP7/PP7d73G6o3p5b45VdmZfWRKIQxBy7iJsiqQxozhHtOI7A8RP/g5i0TMZyJqtAPlW5FRV+M+CW7pnSNlNa6b5PSSAxy5On7cBzON0c0Ske5HB7nZIEmO1Ez637lLDmU5LAq7q8Ed8nnNnsQbLBFcHwWqgYarT7j87FLpPgV5d+6dm9Ge/nL/1iQJ6qrvCUe2frJ2Qip9NbuyulSAeigZHVMMLuwNW7IV3/PVDFtbk4rbXxnh5RNI0mlooTCnNSW82FvoVcYGn4Ix0jhPN+0xd+DyparrM1BNl/giWQ0fW0BlsiOTvCTY/F/hzZH6fxihhJRk2pePM+iw5POKFxD+MKbqJ6eDGCWv8cwshTvVofcy51XKB5tq+QKLFBsN5TVNcAgReEi1bPEDfAG/TdB7yCthfmKc92SuICV+h2swWxGeTF9jdMjhtajmRc2HGa972vdj5gLAZ14KFMNPyL/SLtFYRiX0790g79kjtiOPLYI/3WtZ8eIwzNFQB3GTA5x0ht+Av6BM/A==
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-Network-Message-Id: eee1bb44-4ddc-4390-f595-08d85fce7a44
X-MS-Exchange-CrossTenant-AuthSource: MN2PR12MB3775.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 23 Sep 2020 14:39:30.0571 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: NlyBEScY3EvhKLXBFK7dflcN5m+pVvF+qTdtmvTrbzbIA26kiVjn5t/BUoPQJdti
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MN2PR12MB4239
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: bskeggs@redhat.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QW0gMjMuMDkuMjAgdW0gMDU6MDQgc2NocmllYiBEYXZlIEFpcmxpZToKPiBGcm9tOiBEYXZlIEFp
cmxpZSA8YWlybGllZEByZWRoYXQuY29tPgo+Cj4gVGhpcyBqdXN0IHVzZXMgdGhlIGN0eCBpbnN0
ZWFkIG9mIHBhc3NpbmcgYm9vbHMgYW5kIHJlY3JlYXRpbmcgaXQuCj4KPiBTaWduZWQtb2ZmLWJ5
OiBEYXZlIEFpcmxpZSA8YWlybGllZEByZWRoYXQuY29tPgoKQWNrZWQtYnk6IENocmlzdGlhbiBL
w7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KCj4gLS0tCj4gICBkcml2ZXJzL2dwdS9k
cm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMgfCA0OCArKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0t
Cj4gICAxIGZpbGUgY2hhbmdlZCwgMjMgaW5zZXJ0aW9ucygrKSwgMjUgZGVsZXRpb25zKC0pCj4K
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jIGIvZHJp
dmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jCj4gaW5kZXggYmNhZTQ1MTQ5NTJmLi44
YTkwYjA3ZjE3YTQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVh
dV9iby5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jCj4gQEAg
LTc3Miw4ICs3NzIsOSBAQCBub3V2ZWF1X2JvX21vdmVfcHJlcChzdHJ1Y3Qgbm91dmVhdV9kcm0g
KmRybSwgc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKPiAgIH0KPiAgIAo+ICAgc3RhdGlj
IGludAo+IC1ub3V2ZWF1X2JvX21vdmVfbTJtZihzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJv
LCBpbnQgZXZpY3QsIGJvb2wgaW50ciwKPiAtCQkgICAgIGJvb2wgbm9fd2FpdF9ncHUsIHN0cnVj
dCB0dG1fcmVzb3VyY2UgKm5ld19yZWcpCj4gK25vdXZlYXVfYm9fbW92ZV9tMm1mKHN0cnVjdCB0
dG1fYnVmZmVyX29iamVjdCAqYm8sIGludCBldmljdCwKPiArCQkgICAgIHN0cnVjdCB0dG1fb3Bl
cmF0aW9uX2N0eCAqY3R4LAo+ICsJCSAgICAgc3RydWN0IHR0bV9yZXNvdXJjZSAqbmV3X3JlZykK
PiAgIHsKPiAgIAlzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRybSA9IG5vdXZlYXVfYmRldihiby0+YmRl
dik7Cj4gICAJc3RydWN0IG5vdXZlYXVfY2hhbm5lbCAqY2hhbiA9IGRybS0+dHRtLmNoYW47Cj4g
QEAgLTc5Miw3ICs3OTMsNyBAQCBub3V2ZWF1X2JvX21vdmVfbTJtZihzdHJ1Y3QgdHRtX2J1ZmZl
cl9vYmplY3QgKmJvLCBpbnQgZXZpY3QsIGJvb2wgaW50ciwKPiAgIAl9Cj4gICAKPiAgIAltdXRl
eF9sb2NrX25lc3RlZCgmY2xpLT5tdXRleCwgU0lOR0xFX0RFUFRIX05FU1RJTkcpOwo+IC0JcmV0
ID0gbm91dmVhdV9mZW5jZV9zeW5jKG5vdXZlYXVfYm8oYm8pLCBjaGFuLCB0cnVlLCBpbnRyKTsK
PiArCXJldCA9IG5vdXZlYXVfZmVuY2Vfc3luYyhub3V2ZWF1X2JvKGJvKSwgY2hhbiwgdHJ1ZSwg
Y3R4LT5pbnRlcnJ1cHRpYmxlKTsKPiAgIAlpZiAocmV0ID09IDApIHsKPiAgIAkJcmV0ID0gZHJt
LT50dG0ubW92ZShjaGFuLCBibywgJmJvLT5tZW0sIG5ld19yZWcpOwo+ICAgCQlpZiAocmV0ID09
IDApIHsKPiBAQCAtODc5LDEwICs4ODAsMTAgQEAgbm91dmVhdV9ib19tb3ZlX2luaXQoc3RydWN0
IG5vdXZlYXVfZHJtICpkcm0pCj4gICB9Cj4gICAKPiAgIHN0YXRpYyBpbnQKPiAtbm91dmVhdV9i
b19tb3ZlX2ZsaXBkKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sIGJvb2wgZXZpY3QsIGJv
b2wgaW50ciwKPiAtCQkgICAgICBib29sIG5vX3dhaXRfZ3B1LCBzdHJ1Y3QgdHRtX3Jlc291cmNl
ICpuZXdfcmVnKQo+ICtub3V2ZWF1X2JvX21vdmVfZmxpcGQoc3RydWN0IHR0bV9idWZmZXJfb2Jq
ZWN0ICpibywgYm9vbCBldmljdCwKPiArCQkgICAgICBzdHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHgg
KmN0eCwKPiArCQkgICAgICBzdHJ1Y3QgdHRtX3Jlc291cmNlICpuZXdfcmVnKQo+ICAgewo+IC0J
c3RydWN0IHR0bV9vcGVyYXRpb25fY3R4IGN0eCA9IHsgaW50ciwgbm9fd2FpdF9ncHUgfTsKPiAg
IAlzdHJ1Y3QgdHRtX3BsYWNlIHBsYWNlbWVudF9tZW10eXBlID0gewo+ICAgCQkuZnBmbiA9IDAs
Cj4gICAJCS5scGZuID0gMCwKPiBAQCAtODk4LDExICs4OTksMTEgQEAgbm91dmVhdV9ib19tb3Zl
X2ZsaXBkKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sIGJvb2wgZXZpY3QsIGJvb2wgaW50
ciwKPiAgIAo+ICAgCXRtcF9yZWcgPSAqbmV3X3JlZzsKPiAgIAl0bXBfcmVnLm1tX25vZGUgPSBO
VUxMOwo+IC0JcmV0ID0gdHRtX2JvX21lbV9zcGFjZShibywgJnBsYWNlbWVudCwgJnRtcF9yZWcs
ICZjdHgpOwo+ICsJcmV0ID0gdHRtX2JvX21lbV9zcGFjZShibywgJnBsYWNlbWVudCwgJnRtcF9y
ZWcsIGN0eCk7Cj4gICAJaWYgKHJldCkKPiAgIAkJcmV0dXJuIHJldDsKPiAgIAo+IC0JcmV0ID0g
dHRtX3R0X3BvcHVsYXRlKGJvLT5iZGV2LCBiby0+dHRtLCAmY3R4KTsKPiArCXJldCA9IHR0bV90
dF9wb3B1bGF0ZShiby0+YmRldiwgYm8tPnR0bSwgY3R4KTsKPiAgIAlpZiAocmV0KQo+ICAgCQln
b3RvIG91dDsKPiAgIAo+IEBAIC05MTAsMjEgKzkxMSwyMSBAQCBub3V2ZWF1X2JvX21vdmVfZmxp
cGQoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywgYm9vbCBldmljdCwgYm9vbCBpbnRyLAo+
ICAgCWlmIChyZXQpCj4gICAJCWdvdG8gb3V0Owo+ICAgCj4gLQlyZXQgPSBub3V2ZWF1X2JvX21v
dmVfbTJtZihibywgdHJ1ZSwgaW50ciwgbm9fd2FpdF9ncHUsICZ0bXBfcmVnKTsKPiArCXJldCA9
IG5vdXZlYXVfYm9fbW92ZV9tMm1mKGJvLCB0cnVlLCBjdHgsICZ0bXBfcmVnKTsKPiAgIAlpZiAo
cmV0KQo+ICAgCQlnb3RvIG91dDsKPiAgIAo+IC0JcmV0ID0gdHRtX2JvX21vdmVfdHRtKGJvLCAm
Y3R4LCBuZXdfcmVnKTsKPiArCXJldCA9IHR0bV9ib19tb3ZlX3R0bShibywgY3R4LCBuZXdfcmVn
KTsKPiAgIG91dDoKPiAgIAl0dG1fcmVzb3VyY2VfZnJlZShibywgJnRtcF9yZWcpOwo+ICAgCXJl
dHVybiByZXQ7Cj4gICB9Cj4gICAKPiAgIHN0YXRpYyBpbnQKPiAtbm91dmVhdV9ib19tb3ZlX2Zs
aXBzKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sIGJvb2wgZXZpY3QsIGJvb2wgaW50ciwK
PiAtCQkgICAgICBib29sIG5vX3dhaXRfZ3B1LCBzdHJ1Y3QgdHRtX3Jlc291cmNlICpuZXdfcmVn
KQo+ICtub3V2ZWF1X2JvX21vdmVfZmxpcHMoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywg
Ym9vbCBldmljdCwKPiArCQkgICAgICBzdHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHggKmN0eCwKPiAr
CQkgICAgICBzdHJ1Y3QgdHRtX3Jlc291cmNlICpuZXdfcmVnKQo+ICAgewo+IC0Jc3RydWN0IHR0
bV9vcGVyYXRpb25fY3R4IGN0eCA9IHsgaW50ciwgbm9fd2FpdF9ncHUgfTsKPiAgIAlzdHJ1Y3Qg
dHRtX3BsYWNlIHBsYWNlbWVudF9tZW10eXBlID0gewo+ICAgCQkuZnBmbiA9IDAsCj4gICAJCS5s
cGZuID0gMCwKPiBAQCAtOTQwLDE1ICs5NDEsMTUgQEAgbm91dmVhdV9ib19tb3ZlX2ZsaXBzKHN0
cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sIGJvb2wgZXZpY3QsIGJvb2wgaW50ciwKPiAgIAo+
ICAgCXRtcF9yZWcgPSAqbmV3X3JlZzsKPiAgIAl0bXBfcmVnLm1tX25vZGUgPSBOVUxMOwo+IC0J
cmV0ID0gdHRtX2JvX21lbV9zcGFjZShibywgJnBsYWNlbWVudCwgJnRtcF9yZWcsICZjdHgpOwo+
ICsJcmV0ID0gdHRtX2JvX21lbV9zcGFjZShibywgJnBsYWNlbWVudCwgJnRtcF9yZWcsIGN0eCk7
Cj4gICAJaWYgKHJldCkKPiAgIAkJcmV0dXJuIHJldDsKPiAgIAo+IC0JcmV0ID0gdHRtX2JvX21v
dmVfdHRtKGJvLCAmY3R4LCAmdG1wX3JlZyk7Cj4gKwlyZXQgPSB0dG1fYm9fbW92ZV90dG0oYm8s
IGN0eCwgJnRtcF9yZWcpOwo+ICAgCWlmIChyZXQpCj4gICAJCWdvdG8gb3V0Owo+ICAgCj4gLQly
ZXQgPSBub3V2ZWF1X2JvX21vdmVfbTJtZihibywgdHJ1ZSwgaW50ciwgbm9fd2FpdF9ncHUsIG5l
d19yZWcpOwo+ICsJcmV0ID0gbm91dmVhdV9ib19tb3ZlX20ybWYoYm8sIHRydWUsIGN0eCwgbmV3
X3JlZyk7Cj4gICAJaWYgKHJldCkKPiAgIAkJZ290byBvdXQ7Cj4gICAKPiBAQCAtMTA1OSwxNyAr
MTA2MCwxNCBAQCBub3V2ZWF1X2JvX21vdmUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywg
Ym9vbCBldmljdCwKPiAgIAkvKiBIYXJkd2FyZSBhc3Npc3RlZCBjb3B5LiAqLwo+ICAgCWlmIChk
cm0tPnR0bS5tb3ZlKSB7Cj4gICAJCWlmIChuZXdfcmVnLT5tZW1fdHlwZSA9PSBUVE1fUExfU1lT
VEVNKQo+IC0JCQlyZXQgPSBub3V2ZWF1X2JvX21vdmVfZmxpcGQoYm8sIGV2aWN0LAo+IC0JCQkJ
CQkgICAgY3R4LT5pbnRlcnJ1cHRpYmxlLAo+IC0JCQkJCQkgICAgY3R4LT5ub193YWl0X2dwdSwg
bmV3X3JlZyk7Cj4gKwkJCXJldCA9IG5vdXZlYXVfYm9fbW92ZV9mbGlwZChibywgZXZpY3QsIGN0
eCwKPiArCQkJCQkJICAgIG5ld19yZWcpOwo+ICAgCQllbHNlIGlmIChvbGRfcmVnLT5tZW1fdHlw
ZSA9PSBUVE1fUExfU1lTVEVNKQo+IC0JCQlyZXQgPSBub3V2ZWF1X2JvX21vdmVfZmxpcHMoYm8s
IGV2aWN0LAo+IC0JCQkJCQkgICAgY3R4LT5pbnRlcnJ1cHRpYmxlLAo+IC0JCQkJCQkgICAgY3R4
LT5ub193YWl0X2dwdSwgbmV3X3JlZyk7Cj4gKwkJCXJldCA9IG5vdXZlYXVfYm9fbW92ZV9mbGlw
cyhibywgZXZpY3QsIGN0eCwKPiArCQkJCQkJICAgIG5ld19yZWcpOwo+ICAgCQllbHNlCj4gLQkJ
CXJldCA9IG5vdXZlYXVfYm9fbW92ZV9tMm1mKGJvLCBldmljdCwKPiAtCQkJCQkJICAgY3R4LT5p
bnRlcnJ1cHRpYmxlLAo+IC0JCQkJCQkgICBjdHgtPm5vX3dhaXRfZ3B1LCBuZXdfcmVnKTsKPiAr
CQkJcmV0ID0gbm91dmVhdV9ib19tb3ZlX20ybWYoYm8sIGV2aWN0LCBjdHgsCj4gKwkJCQkJCSAg
IG5ld19yZWcpOwo+ICAgCQlpZiAoIXJldCkKPiAgIAkJCWdvdG8gb3V0Owo+ICAgCX0KCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWls
aW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZy
ZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
