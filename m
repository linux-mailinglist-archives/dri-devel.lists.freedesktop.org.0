Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 94667E97C2
	for <lists+dri-devel@lfdr.de>; Wed, 30 Oct 2019 09:14:16 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 60A446E8C8;
	Wed, 30 Oct 2019 08:14:01 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3E96B6E0E4;
 Tue, 29 Oct 2019 07:42:32 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga008.jf.intel.com ([10.7.209.65])
 by fmsmga101.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 29 Oct 2019 00:42:31 -0700
X-IronPort-AV: E=Sophos;i="5.68,243,1569308400"; d="scan'208";a="193524324"
Received: from lingshan-mobl5.ccr.corp.intel.com (HELO [10.238.129.48])
 ([10.238.129.48])
 by orsmga008-auth.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-SHA;
 29 Oct 2019 00:42:23 -0700
Subject: Re: [PATCH V5 4/6] mdev: introduce virtio device and its device ops
To: Jason Wang <jasowang@redhat.com>, kvm@vger.kernel.org,
 linux-s390@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, intel-gfx@lists.freedesktop.org,
 intel-gvt-dev@lists.freedesktop.org, kwankhede@nvidia.com,
 alex.williamson@redhat.com, mst@redhat.com, tiwei.bie@intel.com
References: <20191023130752.18980-1-jasowang@redhat.com>
 <20191023130752.18980-5-jasowang@redhat.com>
From: Zhu Lingshan <lingshan.zhu@linux.intel.com>
Message-ID: <df1eb77c-d159-da11-bb8f-df2c19089ac6@linux.intel.com>
Date: Tue, 29 Oct 2019 15:42:19 +0800
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101
 Thunderbird/68.1.2
MIME-Version: 1.0
In-Reply-To: <20191023130752.18980-5-jasowang@redhat.com>
Content-Language: en-US
X-Mailman-Approved-At: Wed, 30 Oct 2019 08:14:00 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: christophe.de.dinechin@gmail.com, sebott@linux.ibm.com, airlied@linux.ie,
 heiko.carstens@de.ibm.com, kevin.tian@intel.com,
 virtualization@lists.linux-foundation.org, rob.miller@broadcom.com,
 lulu@redhat.com, eperezma@redhat.com, pasic@linux.ibm.com,
 borntraeger@de.ibm.com, haotian.wang@sifive.com, zhi.a.wang@intel.com,
 farman@linux.ibm.com, idos@mellanox.com, gor@linux.ibm.com,
 cunming.liang@intel.com, rodrigo.vivi@intel.com, xiao.w.wang@intel.com,
 freude@linux.ibm.com, parav@mellanox.com, zhihong.wang@intel.com,
 stefanha@redhat.com, akrowiak@linux.ibm.com, netdev@vger.kernel.org,
 cohuck@redhat.com, oberpar@linux.ibm.com, maxime.coquelin@redhat.com,
 lingshan.zhu@intel.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Ck9uIDEwLzIzLzIwMTkgOTowNyBQTSwgSmFzb24gV2FuZyB3cm90ZToKPiBUaGlzIHBhdGNoIGlt
cGxlbWVudHMgYmFzaWMgc3VwcG9ydCBmb3IgbWRldiBkcml2ZXIgdGhhdCBzdXBwb3J0cwo+IHZp
cnRpbyB0cmFuc3BvcnQgZm9yIGtlcm5lbCB2aXJ0aW8gZHJpdmVyLgo+Cj4gU2lnbmVkLW9mZi1i
eTogSmFzb24gV2FuZyA8amFzb3dhbmdAcmVkaGF0LmNvbT4KPiAtLS0KPiAgIGRyaXZlcnMvdmZp
by9tZGV2L21kZXZfY29yZS5jICAgIHwgIDIwICsrKysKPiAgIGRyaXZlcnMvdmZpby9tZGV2L21k
ZXZfcHJpdmF0ZS5oIHwgICAyICsKPiAgIGluY2x1ZGUvbGludXgvbWRldi5oICAgICAgICAgICAg
IHwgICA2ICsrCj4gICBpbmNsdWRlL2xpbnV4L3ZpcnRpb19tZGV2X29wcy5oICB8IDE1OSArKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrCj4gICA0IGZpbGVzIGNoYW5nZWQsIDE4NyBpbnNl
cnRpb25zKCspCj4gICBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS9saW51eC92aXJ0aW9fbWRl
dl9vcHMuaAo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfY29yZS5jIGIv
ZHJpdmVycy92ZmlvL21kZXYvbWRldl9jb3JlLmMKPiBpbmRleCA1NTViZDYxZDhjMzguLjliMDBj
MzUxMzEyMCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZmaW8vbWRldi9tZGV2X2NvcmUuYwo+ICsr
KyBiL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfY29yZS5jCj4gQEAgLTc2LDYgKzc2LDI2IEBAIGNv
bnN0IHN0cnVjdCB2ZmlvX21kZXZfZGV2aWNlX29wcyAqbWRldl9nZXRfdmZpb19vcHMoc3RydWN0
IG1kZXZfZGV2aWNlICptZGV2KQo+ICAgfQo+ICAgRVhQT1JUX1NZTUJPTChtZGV2X2dldF92Zmlv
X29wcyk7Cj4gICAKPiArLyogU3BlY2lmeSB0aGUgdmlydGlvIGRldmljZSBvcHMgZm9yIHRoZSBt
ZGV2IGRldmljZSwgdGhpcwo+ICsgKiBtdXN0IGJlIGNhbGxlZCBkdXJpbmcgY3JlYXRlKCkgY2Fs
bGJhY2sgZm9yIHZpcnRpbyBtZGV2IGRldmljZS4KPiArICovCj4gK3ZvaWQgbWRldl9zZXRfdmly
dGlvX29wcyhzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsCj4gKwkJCSBjb25zdCBzdHJ1Y3Qgdmly
dGlvX21kZXZfZGV2aWNlX29wcyAqdmlydGlvX29wcykKPiArewo+ICsJbWRldl9zZXRfY2xhc3Mo
bWRldiwgTURFVl9DTEFTU19JRF9WSVJUSU8pOwo+ICsJbWRldi0+dmlydGlvX29wcyA9IHZpcnRp
b19vcHM7Cj4gK30KPiArRVhQT1JUX1NZTUJPTChtZGV2X3NldF92aXJ0aW9fb3BzKTsKPiArCj4g
Ky8qIEdldCB0aGUgdmlydGlvIGRldmljZSBvcHMgZm9yIHRoZSBtZGV2IGRldmljZS4gKi8KPiAr
Y29uc3Qgc3RydWN0IHZpcnRpb19tZGV2X2RldmljZV9vcHMgKgo+ICttZGV2X2dldF92aXJ0aW9f
b3BzKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKPiArewo+ICsJV0FSTl9PTihtZGV2LT5jbGFz
c19pZCAhPSBNREVWX0NMQVNTX0lEX1ZJUlRJTyk7Cj4gKwlyZXR1cm4gbWRldi0+dmlydGlvX29w
czsKPiArfQo+ICtFWFBPUlRfU1lNQk9MKG1kZXZfZ2V0X3ZpcnRpb19vcHMpOwo+ICsKPiAgIHN0
cnVjdCBkZXZpY2UgKm1kZXZfZGV2KHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKPiAgIHsKPiAg
IAlyZXR1cm4gJm1kZXYtPmRldjsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92ZmlvL21kZXYvbWRl
dl9wcml2YXRlLmggYi9kcml2ZXJzL3ZmaW8vbWRldi9tZGV2X3ByaXZhdGUuaAo+IGluZGV4IDA3
NzA0MTBkZWQyYS4uN2I0Nzg5MGMzNGU3IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvdmZpby9tZGV2
L21kZXZfcHJpdmF0ZS5oCj4gKysrIGIvZHJpdmVycy92ZmlvL21kZXYvbWRldl9wcml2YXRlLmgK
PiBAQCAtMTEsNiArMTEsNyBAQAo+ICAgI2RlZmluZSBNREVWX1BSSVZBVEVfSAo+ICAgCj4gICAj
aW5jbHVkZSA8bGludXgvdmZpb19tZGV2X29wcy5oPgo+ICsjaW5jbHVkZSA8bGludXgvdmlydGlv
X21kZXZfb3BzLmg+Cj4gICAKPiAgIGludCAgbWRldl9idXNfcmVnaXN0ZXIodm9pZCk7Cj4gICB2
b2lkIG1kZXZfYnVzX3VucmVnaXN0ZXIodm9pZCk7Cj4gQEAgLTM4LDYgKzM5LDcgQEAgc3RydWN0
IG1kZXZfZGV2aWNlIHsKPiAgIAl1MTYgY2xhc3NfaWQ7Cj4gICAJdW5pb24gewo+ICAgCQljb25z
dCBzdHJ1Y3QgdmZpb19tZGV2X2RldmljZV9vcHMgKnZmaW9fb3BzOwo+ICsJCWNvbnN0IHN0cnVj
dCB2aXJ0aW9fbWRldl9kZXZpY2Vfb3BzICp2aXJ0aW9fb3BzOwo+ICAgCX07Cj4gICB9Owo+ICAg
Cj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvbWRldi5oIGIvaW5jbHVkZS9saW51eC9tZGV2
LmgKPiBpbmRleCA0NjI1ZjFhMTEwMTQuLjliNjliMGJiZWJmZCAxMDA2NDQKPiAtLS0gYS9pbmNs
dWRlL2xpbnV4L21kZXYuaAo+ICsrKyBiL2luY2x1ZGUvbGludXgvbWRldi5oCj4gQEAgLTE3LDYg
KzE3LDcgQEAKPiAgIAo+ICAgc3RydWN0IG1kZXZfZGV2aWNlOwo+ICAgc3RydWN0IHZmaW9fbWRl
dl9kZXZpY2Vfb3BzOwo+ICtzdHJ1Y3QgdmlydGlvX21kZXZfZGV2aWNlX29wczsKPiAgIAo+ICAg
LyoKPiAgICAqIENhbGxlZCBieSB0aGUgcGFyZW50IGRldmljZSBkcml2ZXIgdG8gc2V0IHRoZSBk
ZXZpY2Ugd2hpY2ggcmVwcmVzZW50cwo+IEBAIC0xMTIsNiArMTEzLDEwIEBAIHZvaWQgbWRldl9z
ZXRfY2xhc3Moc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LCB1MTYgaWQpOwo+ICAgdm9pZCBtZGV2
X3NldF92ZmlvX29wcyhzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsCj4gICAJCSAgICAgICBjb25z
dCBzdHJ1Y3QgdmZpb19tZGV2X2RldmljZV9vcHMgKnZmaW9fb3BzKTsKPiAgIGNvbnN0IHN0cnVj
dCB2ZmlvX21kZXZfZGV2aWNlX29wcyAqbWRldl9nZXRfdmZpb19vcHMoc3RydWN0IG1kZXZfZGV2
aWNlICptZGV2KTsKPiArdm9pZCBtZGV2X3NldF92aXJ0aW9fb3BzKHN0cnVjdCBtZGV2X2Rldmlj
ZSAqbWRldiwKPiArCQkJIGNvbnN0IHN0cnVjdCB2aXJ0aW9fbWRldl9kZXZpY2Vfb3BzICp2aXJ0
aW9fb3BzKTsKPiArY29uc3Qgc3RydWN0IHZpcnRpb19tZGV2X2RldmljZV9vcHMgKgo+ICttZGV2
X2dldF92aXJ0aW9fb3BzKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7Cj4gICAKPiAgIGV4dGVy
biBzdHJ1Y3QgYnVzX3R5cGUgbWRldl9idXNfdHlwZTsKPiAgIAo+IEBAIC0xMjcsNiArMTMyLDcg
QEAgc3RydWN0IG1kZXZfZGV2aWNlICptZGV2X2Zyb21fZGV2KHN0cnVjdCBkZXZpY2UgKmRldik7
Cj4gICAKPiAgIGVudW0gewo+ICAgCU1ERVZfQ0xBU1NfSURfVkZJTyA9IDEsCj4gKwlNREVWX0NM
QVNTX0lEX1ZJUlRJTyA9IDIsCj4gICAJLyogTmV3IGVudHJpZXMgbXVzdCBiZSBhZGRlZCBoZXJl
ICovCj4gICB9Owo+ICAgCj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvdmlydGlvX21kZXZf
b3BzLmggYi9pbmNsdWRlL2xpbnV4L3ZpcnRpb19tZGV2X29wcy5oCj4gbmV3IGZpbGUgbW9kZSAx
MDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAuLmQ0MTdiNDFmMjg0NQo+IC0tLSAvZGV2L251bGwK
PiArKysgYi9pbmNsdWRlL2xpbnV4L3ZpcnRpb19tZGV2X29wcy5oCj4gQEAgLTAsMCArMSwxNTkg
QEAKPiArLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb25seSAqLwo+ICsvKgo+
ICsgKiBWaXJ0aW8gbWVkaWF0ZWQgZGV2aWNlIGRyaXZlcgo+ICsgKgo+ICsgKiBDb3B5cmlnaHQg
MjAxOSwgUmVkIEhhdCBDb3JwLgo+ICsgKiAgICAgQXV0aG9yOiBKYXNvbiBXYW5nIDxqYXNvd2Fu
Z0ByZWRoYXQuY29tPgo+ICsgKi8KPiArI2lmbmRlZiBfTElOVVhfVklSVElPX01ERVZfSAo+ICsj
ZGVmaW5lIF9MSU5VWF9WSVJUSU9fTURFVl9ICj4gKwo+ICsjaW5jbHVkZSA8bGludXgvaW50ZXJy
dXB0Lmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9tZGV2Lmg+Cj4gKyNpbmNsdWRlIDx1YXBpL2xpbnV4
L3Zob3N0Lmg+Cj4gKwo+ICsjZGVmaW5lIFZJUlRJT19NREVWX0RFVklDRV9BUElfU1RSSU5HCQki
dmlydGlvLW1kZXYiCj4gKyNkZWZpbmUgVklSVElPX01ERVZfRl9WRVJTSU9OXzEgMHgxCj4gKwo+
ICtzdHJ1Y3QgdmlydGlvX21kZXZfY2FsbGJhY2sgewo+ICsJaXJxcmV0dXJuX3QgKCpjYWxsYmFj
aykodm9pZCAqZGF0YSk7Cj4gKwl2b2lkICpwcml2YXRlOwo+ICt9Owo+ICsKPiArLyoqCj4gKyAq
IHN0cnVjdCB2ZmlvX21kZXZfZGV2aWNlX29wcyAtIFN0cnVjdHVyZSB0byBiZSByZWdpc3RlcmVk
IGZvciBlYWNoCj4gKyAqIG1kZXYgZGV2aWNlIHRvIHJlZ2lzdGVyIHRoZSBkZXZpY2UgZm9yIHZp
cnRpby92aG9zdCBkcml2ZXJzLgo+ICsgKgo+ICsgKiBUaGUgZGV2aWNlIG9wcyB0aGF0IGlzIHN1
cHBvcnRlZCBieSBWSVJUSU9fTURFVl9GX1ZFUlNJT05fMSwgdGhlCj4gKyAqIGNhbGxiYWNrcyBh
cmUgbWFuZGF0b3J5IHVubGVzcyBleHBsaWNpdHkgbWVudGlvbmVkLgo+ICsgKgo+ICsgKiBAc2V0
X3ZxX2FkZHJlc3M6CQlTZXQgdGhlIGFkZHJlc3Mgb2YgdmlydHF1ZXVlCj4gKyAqCQkJCUBtZGV2
OiBtZWRpYXRlZCBkZXZpY2UKPiArICoJCQkJQGlkeDogdmlydHF1ZXVlIGluZGV4Cj4gKyAqCQkJ
CUBkZXNjX2FyZWE6IGFkZHJlc3Mgb2YgZGVzYyBhcmVhCj4gKyAqCQkJCUBkcml2ZXJfYXJlYTog
YWRkcmVzcyBvZiBkcml2ZXIgYXJlYQo+ICsgKgkJCQlAZGV2aWNlX2FyZWE6IGFkZHJlc3Mgb2Yg
ZGV2aWNlIGFyZWEKPiArICoJCQkJUmV0dXJucyBpbnRlZ2VyOiBzdWNjZXNzICgwKSBvciBlcnJv
ciAoPCAwKQo+ICsgKiBAc2V0X3ZxX251bToJCQlTZXQgdGhlIHNpemUgb2YgdmlydHF1ZXVlCj4g
KyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKPiArICoJCQkJQGlkeDogdmlydHF1ZXVlIGlu
ZGV4Cj4gKyAqCQkJCUBudW06IHRoZSBzaXplIG9mIHZpcnRxdWV1ZQo+ICsgKiBAa2lja192cToJ
CQlLaWNrIHRoZSB2aXJ0cXVldWUKPiArICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQo+ICsg
KgkJCQlAaWR4OiB2aXJ0cXVldWUgaW5kZXgKPiArICogQHNldF92cV9jYjoJCQlTZXQgdGhlIGlu
dGVycnVwdCBjYWxsYmFjayBmdW5jdGlvbiBmb3IKPiArICoJCQkJYSB2aXJ0cXVldWUKPiArICoJ
CQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQo+ICsgKgkJCQlAaWR4OiB2aXJ0cXVldWUgaW5kZXgK
PiArICoJCQkJQGNiOiB2aXJ0aW8tbWRldiBpbnRlcnJ1cHQgY2FsbGJhY2sgc3RydWN0dXJlCj4g
KyAqIEBzZXRfdnFfcmVhZHk6CQlTZXQgcmVhZHkgc3RhdHVzIGZvciBhIHZpcnRxdWV1ZQo+ICsg
KgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCj4gKyAqCQkJCUBpZHg6IHZpcnRxdWV1ZSBpbmRl
eAo+ICsgKgkJCQlAcmVhZHk6IHJlYWR5ICh0cnVlKSBub3QgcmVhZHkoZmFsc2UpCj4gKyAqIEBn
ZXRfdnFfcmVhZHk6CQlHZXQgcmVhZHkgc3RhdHVzIGZvciBhIHZpcnRxdWV1ZQo+ICsgKgkJCQlA
bWRldjogbWVkaWF0ZWQgZGV2aWNlCj4gKyAqCQkJCUBpZHg6IHZpcnRxdWV1ZSBpbmRleAo+ICsg
KgkJCQlSZXR1cm5zIGJvb2xlYW46IHJlYWR5ICh0cnVlKSBvciBub3QgKGZhbHNlKQo+ICsgKiBA
c2V0X3ZxX3N0YXRlOgkJU2V0IHRoZSBzdGF0ZSBmb3IgYSB2aXJ0cXVldWUKPiArICoJCQkJQG1k
ZXY6IG1lZGlhdGVkIGRldmljZQo+ICsgKgkJCQlAaWR4OiB2aXJ0cXVldWUgaW5kZXgKPiArICoJ
CQkJQHN0YXRlOiB2aXJ0cXVldWUgc3RhdGUgKGxhc3RfYXZhaWxfaWR4KQo+ICsgKgkJCQlSZXR1
cm5zIGludGVnZXI6IHN1Y2Nlc3MgKDApIG9yIGVycm9yICg8IDApCj4gKyAqIEBnZXRfdnFfc3Rh
dGU6CQlHZXQgdGhlIHN0YXRlIGZvciBhIHZpcnRxdWV1ZQo+ICsgKgkJCQlAbWRldjogbWVkaWF0
ZWQgZGV2aWNlCj4gKyAqCQkJCUBpZHg6IHZpcnRxdWV1ZSBpbmRleAo+ICsgKgkJCQlSZXR1cm5z
IHZpcnRxdWV1ZSBzdGF0ZSAobGFzdF9hdmFpbF9pZHgpCj4gKyAqIEBnZXRfdnFfYWxpZ246CQlH
ZXQgdGhlIHZpcnRxdWV1ZSBhbGlnbiByZXF1aXJlbWVudAo+ICsgKgkJCQlmb3IgdGhlIGRldmlj
ZQo+ICsgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCj4gKyAqCQkJCVJldHVybnMgdmlydHF1
ZXVlIGFsZ2luIHJlcXVpcmVtZW50Cj4gKyAqIEBnZXRfZmVhdHVyZXM6CQlHZXQgdmlydGlvIGZl
YXR1cmVzIHN1cHBvcnRlZCBieSB0aGUgZGV2aWNlCj4gKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBk
ZXZpY2UKPiArICoJCQkJUmV0dXJucyB0aGUgdmlydGlvIGZlYXR1cmVzIHN1cHBvcnQgYnkgdGhl
Cj4gKyAqCQkJCWRldmljZQo+ICsgKiBAZ2V0X2ZlYXR1cmVzOgkJU2V0IHZpcnRpbyBmZWF0dXJl
cyBzdXBwb3J0ZWQgYnkgdGhlIGRyaXZlcgo+ICsgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNl
Cj4gKyAqCQkJCUBmZWF0dXJlczogZmVhdHVyZSBzdXBwb3J0IGJ5IHRoZSBkcml2ZXIKPiArICoJ
CQkJUmV0dXJucyBpbnRlZ2VyOiBzdWNjZXNzICgwKSBvciBlcnJvciAoPCAwKQo+ICsgKiBAc2V0
X2NvbmZpZ19jYjoJCVNldCB0aGUgY29uZmlnIGludGVycnVwdCBjYWxsYmFjawo+ICsgKgkJCQlA
bWRldjogbWVkaWF0ZWQgZGV2aWNlCj4gKyAqCQkJCUBjYjogdmlydGlvLW1kZXYgaW50ZXJydXB0
IGNhbGxiYWNrIHN0cnVjdHVyZQo+ICsgKiBAZ2V0X3ZxX251bV9tYXg6CQlHZXQgdGhlIG1heCBz
aXplIG9mIHZpcnRxdWV1ZQo+ICsgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCj4gKyAqCQkJ
CVJldHVybnMgdTE2OiBtYXggc2l6ZSBvZiB2aXJ0cXVldWUKPiArICogQGdldF9kZXZpY2VfaWQ6
CQlHZXQgdmlydGlvIGRldmljZSBpZAo+ICsgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCj4g
KyAqCQkJCVJldHVybnMgdTMyOiB2aXJ0aW8gZGV2aWNlIGlkCj4gKyAqIEBnZXRfdmVuZG9yX2lk
OgkJR2V0IGlkIGZvciB0aGUgdmVuZG9yIHRoYXQgcHJvdmlkZXMgdGhpcyBkZXZpY2UKPiArICoJ
CQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQo+ICsgKgkJCQlSZXR1cm5zIHUzMjogdmlydGlvIHZl
bmRvciBpZAo+ICsgKiBAZ2V0X3N0YXR1czoJCQlHZXQgdGhlIGRldmljZSBzdGF0dXMKPiArICoJ
CQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQo+ICsgKgkJCQlSZXR1cm5zIHU4OiB2aXJ0aW8gZGV2
aWNlIHN0YXR1cwo+ICsgKiBAc2V0X3N0YXR1czoJCQlTZXQgdGhlIGRldmljZSBzdGF0dXMKPiAr
ICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQo+ICsgKgkJCQlAc3RhdHVzOiB2aXJ0aW8gZGV2
aWNlIHN0YXR1cwo+ICsgKiBAZ2V0X2NvbmZpZzoJCQlSZWFkIGZyb20gZGV2aWNlIHNwZWNpZmlj
IGNvbmZpZ3VyYXRpb24gc3BhY2UKPiArICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQo+ICsg
KgkJCQlAb2Zmc2V0OiBvZmZzZXQgZnJvbSB0aGUgYmVnaW5uaW5nIG9mCj4gKyAqCQkJCWNvbmZp
Z3VyYXRpb24gc3BhY2UKPiArICoJCQkJQGJ1ZjogYnVmZmVyIHVzZWQgdG8gcmVhZCB0bwo+ICsg
KgkJCQlAbGVuOiB0aGUgbGVuZ3RoIHRvIHJlYWQgZnJvbQo+ICsgKgkJCQljb25maWdyYXRpb24g
c3BhY2UKPiArICogQHNldF9jb25maWc6CQkJV3JpdGUgdG8gZGV2aWNlIHNwZWNpZmljIGNvbmZp
Z3VyYXRpb24gc3BhY2UKPiArICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQo+ICsgKgkJCQlA
b2Zmc2V0OiBvZmZzZXQgZnJvbSB0aGUgYmVnaW5uaW5nIG9mCj4gKyAqCQkJCWNvbmZpZ3VyYXRp
b24gc3BhY2UKPiArICoJCQkJQGJ1ZjogYnVmZmVyIHVzZWQgdG8gd3JpdGUgZnJvbQo+ICsgKgkJ
CQlAbGVuOiB0aGUgbGVuZ3RoIHRvIHdyaXRlIHRvCj4gKyAqCQkJCWNvbmZpZ3JhdGlvbiBzcGFj
ZQo+ICsgKiBAZ2V0X21kZXZfZmVhdHVyZXM6CQlHZXQgYSBzZXQgb2YgYml0cyB0aGF0IGRlbW9u
c3RyYXRlCj4gKyAqCQkJCXRoZWNhcGFiaWxpdHkgb2YgdGhlIG1kZXYgZGV2aWNlLiBOZXcKPiAr
ICoJCQkJZmVhdHVyZXMgYml0cyBtdXN0IGJlIGFkZGVkIHdoZW4KPiArICoJCQkJaW50cm9kdWNp
bmcgbmV3IGRldmljZSBvcHMuCj4gKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKPiArICoJ
CQkJUmV0dXJucyB0aGUgbWRldiBmZWF0dXJlcyAoQVBJKSBzdXBwb3J0IGJ5Cj4gKyAqCQkJCXRo
ZSBkZXZpY2UuCj4gKyAqIEBnZXRfZ2VuZXJhdGlvbjoJCUdldCBkZXZpY2UgY29uZmlnIGdlbmVy
YXRvbiAob3B0aW9uYWxseSkKPiArICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQo+ICsgKgkJ
CQlSZXR1cm5zIHUzMjogZGV2aWNlIGdlbmVyYXRpb24KPiArICovCj4gK3N0cnVjdCB2aXJ0aW9f
bWRldl9kZXZpY2Vfb3BzIHsKPiArCS8qIFZpcnRxdWV1ZSBvcHMgKi8KPiArCWludCAoKnNldF92
cV9hZGRyZXNzKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsCj4gKwkJCSAgICAgIHUxNiBpZHgs
IHU2NCBkZXNjX2FyZWEsIHU2NCBkcml2ZXJfYXJlYSwKPiArCQkJICAgICAgdTY0IGRldmljZV9h
cmVhKTsKPiArCXZvaWQgKCpzZXRfdnFfbnVtKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUx
NiBpZHgsIHUzMiBudW0pOwo+ICsJdm9pZCAoKmtpY2tfdnEpKHN0cnVjdCBtZGV2X2RldmljZSAq
bWRldiwgdTE2IGlkeCk7Cj4gKwl2b2lkICgqc2V0X3ZxX2NiKShzdHJ1Y3QgbWRldl9kZXZpY2Ug
Km1kZXYsIHUxNiBpZHgsCj4gKwkJCSAgc3RydWN0IHZpcnRpb19tZGV2X2NhbGxiYWNrICpjYik7
Cj4gKwl2b2lkICgqc2V0X3ZxX3JlYWR5KShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUxNiBp
ZHgsIGJvb2wgcmVhZHkpOwo+ICsJYm9vbCAoKmdldF92cV9yZWFkeSkoc3RydWN0IG1kZXZfZGV2
aWNlICptZGV2LCB1MTYgaWR4KTsKPiArCWludCAoKnNldF92cV9zdGF0ZSkoc3RydWN0IG1kZXZf
ZGV2aWNlICptZGV2LCB1MTYgaWR4LCB1NjQgc3RhdGUpOwo+ICsJdTY0ICgqZ2V0X3ZxX3N0YXRl
KShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUxNiBpZHgpOwo+ICsKPiArCS8qIFZpcnRpbyBk
ZXZpY2Ugb3BzICovCj4gKwl1MTYgKCpnZXRfdnFfYWxpZ24pKHN0cnVjdCBtZGV2X2RldmljZSAq
bWRldik7Cj4gKwl1NjQgKCpnZXRfZmVhdHVyZXMpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7
Cj4gKwlpbnQgKCpzZXRfZmVhdHVyZXMpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdTY0IGZl
YXR1cmVzKTsKPiArCXZvaWQgKCpzZXRfY29uZmlnX2NiKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1k
ZXYsCj4gKwkJCSAgICAgIHN0cnVjdCB2aXJ0aW9fbWRldl9jYWxsYmFjayAqY2IpOwo+ICsJdTE2
ICgqZ2V0X3ZxX251bV9tYXgpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7Cj4gKwl1MzIgKCpn
ZXRfZGV2aWNlX2lkKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpOwo+ICsJdTMyICgqZ2V0X3Zl
bmRvcl9pZCkoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2KTsKPiArCXU4ICgqZ2V0X3N0YXR1cyko
c3RydWN0IG1kZXZfZGV2aWNlICptZGV2KTsKPiArCXZvaWQgKCpzZXRfc3RhdHVzKShzdHJ1Y3Qg
bWRldl9kZXZpY2UgKm1kZXYsIHU4IHN0YXR1cyk7CgpIaSBKYXNvbgoKSXMgaXQgcG9zc2libGUg
dG8gbWFrZSBzZXRfc3RhdHVzKCkgcmV0dXJuIGFuIHU4IG9yIGJvb2wsIGJlY2F1c2UgdGhpcyAK
bWF5IGZhaWwgaW4gcmVhbCBoYXJkd2FyZS4gV2l0aG91dCBhIHJldHVybmVkIGNvZGUsIEkgYW0g
bm90IHN1cmXCoCAKd2hldGhlciBpdCBpcyBhIGdvb2QgaWRlYSB0byBzZXQgdGhlIHN0YXR1cyB8
IE5FRURfUkVTRVQgd2hlbiBmYWlsLgoKVGhhbmtzLApCUgpaaHUgTGluZ3NoYW4KPiArCXZvaWQg
KCpnZXRfY29uZmlnKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHVuc2lnbmVkIGludCBvZmZz
ZXQsCj4gKwkJCSAgIHZvaWQgKmJ1ZiwgdW5zaWduZWQgaW50IGxlbik7Cj4gKwl2b2lkICgqc2V0
X2NvbmZpZykoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LCB1bnNpZ25lZCBpbnQgb2Zmc2V0LAo+
ICsJCQkgICBjb25zdCB2b2lkICpidWYsIHVuc2lnbmVkIGludCBsZW4pOwo+ICsJdTMyICgqZ2V0
X2dlbmVyYXRpb24pKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7Cj4gKwo+ICsJLyogTWRldiBk
ZXZpY2Ugb3BzICovCj4gKwl1NjQgKCpnZXRfbWRldl9mZWF0dXJlcykoc3RydWN0IG1kZXZfZGV2
aWNlICptZGV2KTsKPiArfTsKPiArCj4gK3ZvaWQgbWRldl9zZXRfdmlydGlvX29wcyhzdHJ1Y3Qg
bWRldl9kZXZpY2UgKm1kZXYsCj4gKwkJCSBjb25zdCBzdHJ1Y3QgdmlydGlvX21kZXZfZGV2aWNl
X29wcyAqdmlydGlvX29wcyk7Cj4gKwo+ICsjZW5kaWYKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxA
bGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxt
YW4vbGlzdGluZm8vZHJpLWRldmVs
