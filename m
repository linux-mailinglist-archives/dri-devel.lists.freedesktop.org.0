Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A9DDA19FAF
	for <lists+dri-devel@lfdr.de>; Fri, 10 May 2019 16:58:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 31B6E89D63;
	Fri, 10 May 2019 14:58:10 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-oi1-x243.google.com (mail-oi1-x243.google.com
 [IPv6:2607:f8b0:4864:20::243])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B7D8089D5F;
 Fri, 10 May 2019 14:58:08 +0000 (UTC)
Received: by mail-oi1-x243.google.com with SMTP id k9so4719400oig.9;
 Fri, 10 May 2019 07:58:08 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=ZNukLxHLYqOgz3KFm/gDcl1LP54QqCv58XglXz+3WIM=;
 b=OnZfC4q0r0qYhLPOECKoREU3ONrGXO4umz/CM6L/qZKRx+gPM1JKhpOg6PB5mQOoW1
 TTF/xurhMX1BB3r84rb+jcI+c5hR1OnhOAvpEdFC1csqP61tOo/lBBoK78tmRyD69Sj9
 E7PwQ5WIrE2H8rtam0GUyA6xh54zXNh5CWgBPJZCHJEL8yMldtS4hzp6VAEjXCIQmZ8w
 PpXeKIzx0sh6v1BkWps7v4N/YYe6LTtekDZjUWIxwgiBh9YynyfUQ41D6/i+fcIjg8iZ
 kM5t/ETJy31cQ2k4r29Ql1JZInR4/YUhp0ExNUZ8CAk6gypASqZ8b4SqIGODccKahFNE
 ftYA==
X-Gm-Message-State: APjAAAXv+PwcV7VgjcBEXIhC4cXtAG7JVmo6YqL4fNSs8a6in9EyoVvv
 4tKTV47hRPnkKfiL/Napyq9BqAkva5XPLCxB9PA=
X-Google-Smtp-Source: APXvYqzUwOO1ogl5P3GxTtfCLrF+FcERXZSRs687nPdciMYRY0NP9Dm+I2Ch/9Z0nW8QF3oKqqp2jOb6GOD6vZGSyhI=
X-Received: by 2002:aca:fc95:: with SMTP id a143mr4383491oii.128.1557500287327; 
 Fri, 10 May 2019 07:58:07 -0700 (PDT)
MIME-Version: 1.0
References: <20181120185814.13362-1-Kenny.Ho@amd.com>
 <20190509210410.5471-1-Kenny.Ho@amd.com>
 <20190509210410.5471-5-Kenny.Ho@amd.com>
 <f63c8d6b-92a4-2977-d062-7e0b7036834e@gmail.com>
In-Reply-To: <f63c8d6b-92a4-2977-d062-7e0b7036834e@gmail.com>
From: Kenny Ho <y2kenny@gmail.com>
Date: Fri, 10 May 2019 10:57:55 -0400
Message-ID: <CAOWid-fpHqvq35C+gfHmLnuHM9Lj+iiHFXE=3RPrkAiFL2=wvQ@mail.gmail.com>
Subject: Re: [RFC PATCH v2 4/5] drm,
 cgroup: Add total GEM buffer allocation limit
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=ZNukLxHLYqOgz3KFm/gDcl1LP54QqCv58XglXz+3WIM=;
 b=QFfYp4VrHzZ6rxOiFkS614oskcEZaHsDXiINrSWdu1RZfl4g176uCgB0ZWXOhoxR1U
 meK03VkqOELmYm0P50+GJv5umylty2kezZMvFI+zHwwWs7xsRNvn8XCIKHU1D/uzq8GS
 mZcfiM+2Bz9ihR6kaix7NwjccCSv+qRv+8ZyHkQpH8dnQ9TzFVJHQx3V4pRfNlrkkFnF
 GkhPnH5r8f2Tph6PJlJmhQAGarzZFwFO7E1vh1Ee3vM+iHPcXktafjogVDMpW3C5//mZ
 nGTHtmfBsam1qHErgkW6kdB6dB5VJ0uli+YmvtNDKDhcqVvQNm9w3HqCQ8jt+9e7A0CF
 0iYg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: sunnanyong@huawei.com, Kenny Ho <Kenny.Ho@amd.com>,
 Brian Welty <brian.welty@intel.com>, amd-gfx@lists.freedesktop.org,
 Alex Deucher <alexander.deucher@amd.com>, dri-devel@lists.freedesktop.org,
 Tejun Heo <tj@kernel.org>, cgroups@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gRnJpLCBNYXkgMTAsIDIwMTkgYXQgODoyOCBBTSBDaHJpc3RpYW4gS8O2bmlnCjxja29lbmln
LmxlaWNodHp1bWVya2VuQGdtYWlsLmNvbT4gd3JvdGU6Cj4KPiBBbSAwOS4wNS4xOSB1bSAyMzow
NCBzY2hyaWViIEtlbm55IEhvOgo+ID4gKyAgICAgLyogb25seSBhbGxvdyBibyBmcm9tIHRoZSBz
YW1lIGNncm91cCBvciBpdHMgYW5jZXN0b3IgdG8gYmUgaW1wb3J0ZWQgKi8KPiA+ICsgICAgIGlm
IChkcm1jZ3JwICE9IE5VTEwgJiYKPiA+ICsgICAgICAgICAgICAgICAgICAgICAhZHJtY2dycF9p
c19zZWxmX29yX2FuY2VzdG9yKGRybWNncnAsIG9iai0+ZHJtY2dycCkpIHsKPiA+ICsgICAgICAg
ICAgICAgcmV0ID0gLUVBQ0NFUzsKPiA+ICsgICAgICAgICAgICAgZ290byBvdXRfdW5sb2NrOwo+
ID4gKyAgICAgfQo+ID4gKwo+Cj4gVGhpcyB3aWxsIG1vc3QgbGlrZWx5IGdvIHVwIGluIGZsYW1l
cy4KPgo+IElmIEknbSBub3QgY29tcGxldGVseSBtaXN0YWtlbiB3ZSBhbHJlYWR5IHVzZQo+IGRy
bV9nZW1fcHJpbWVfZmRfdG9faGFuZGxlKCkgdG8gZXhjaGFuZ2UgaGFuZGxlcyBiZXR3ZWVuIGRp
ZmZlcmVudAo+IGNncm91cHMgaW4gY3VycmVudCBjb250YWluZXIgdXNhZ2VzLgpUaGlzIGlzIHNv
bWV0aGluZyB0aGF0IEkgYW0gaW50ZXJlc3RlZCBpbiBnZXR0aW5nIG1vcmUgZGV0YWlscyBmcm9t
CnRoZSBicm9hZGVyIGNvbW11bml0eSBiZWNhdXNlIHRoZSBkZXRhaWxzIGFmZmVjdCBob3cgbGlr
ZWx5IHRoaXMgd2lsbApnbyB1cCBpbiBmbGFtZXMgOykuICBOb3RlIHRoYXQgdGhpcyBjaGVjayBk
b2VzIG5vdCBibG9jayBzaGFyaW5nIG9mCmhhbmRsZXMgZnJvbSBjZ3JvdXAgcGFyZW50IHRvIGNo
aWxkcmVuIGluIHRoZSBoaWVyYXJjaHksIG5vciBkb2VzIGl0CmJsb2NrcyBzaGFyaW5nIG9mIGhh
bmRsZXMgd2l0aGluIGEgY2dyb3VwLgoKSSBhbSBpbnRlcmVzdGVkIHRvIGZpbmQgb3V0LCB3aGVu
IGV4aXN0aW5nIGFwcHMgc2hhcmUgaGFuZGxlcyBiZXR3ZWVuCmNvbnRhaW5lcnMsIGlmIHRoZXJl
IGFyZSBhbnkgZXhwZWN0YXRpb25zIG9uIHJlc291cmNlIG1hbmFnZW1lbnQuClNpbmNlIHRoZXJl
IGFyZSBubyBkcm0gY2dyb3VwIGZvciBjdXJyZW50IGNvbnRhaW5lciB1c2FnZSwgSSBleHBlY3QK
dGhlIGFuc3dlciB0byBiZSBuby4gIEluIHRoaXMgY2FzZSwgdGhlIGRybSBjZ3JvdXAgY29udHJv
bGxlciBjYW4gYmUKZGlzYWJsZWQgb24gaXRzIG93biAoaW4gdGhlIGNvbnRleHQgb2YgY2dyb3Vw
LXYyJ3MgdW5pZmllZCBoaWVyYXJjaHkpLApvciB0aGUgcHJvY2VzcyBjYW4gcmVtYWluIGF0IHRo
ZSByb290IGZvciB0aGUgZHJtIGNncm91cCBoaWVyYXJjaHkgKGluCnRoZSBjb250ZXh0IG9mIGNn
cm91cC12MS4pICBJZiBJIHVuZGVyc3RhbmQgdGhlIGNncm91cCBhcGkgY29ycmVjdGx5LAp0aGF0
IG1lYW5zIGFsbCBwcm9jZXNzIHdvdWxkIGJlIHBhcnQgb2YgdGhlIHJvb3QgY2dyb3VwIGFzIGZh
ciBhcyB0aGUKZHJtIGNvbnRyb2xsZXIgaXMgY29uY2VybmVkIGFuZCB0aGlzIGJsb2NrIHdpbGwg
bm90IGNvbWUgaW50byBlZmZlY3QuCkkgaGF2ZSB2ZXJpZmllZCB0aGF0IHRoaXMgaXMgaW5kZWVk
IHRoZSBjdXJyZW50IGRlZmF1bHQgYmVoYXZpb3VyIG9mIGEKY29udGFpbmVyIHJ1bnRpbWUgKHJ1
bmMsIHdoaWNoIGlzIHVzZWQgYnkgZG9ja2VyLCBwb2RtYW4gYW5kIG90aGVycy4pClRoZSBuZXcg
ZHJtIGNncm91cCBjb250cm9sbGVyIGlzIHNpbXBseSBpZ25vcmVkIGFuZCBhbGwgcHJvY2Vzc2Vz
CnJlbWFpbiBhdCB0aGUgcm9vdCBvZiB0aGUgaGllcmFyY2h5IChzaW5jZSB0aGVyZSBhcmUgbm8g
b3RoZXIKY2dyb3Vwcy4pICBJIHBsYW4gdG8gbWFrZSBjb250cmlidXRpb25zIHRvIHJ1bmMgKHNv
IGZvbGtzIGNhbiBhY3R1YWxseQp1c2UgdGhpcyBmZWF0dXJlcyB3aXRoIGRvY2tlci9wb2RtYW4v
azhzLCBldGMuKSBvbmNlIHRoaW5ncyBzdGFiaWxpemVkCm9uIHRoZSBrZXJuZWwgc2lkZS4KCk9u
IHRoZSBvdGhlciBoYW5kLCBpZiB0aGVyZSBhcmUgZXhwZWN0YXRpb25zIGZvciByZXNvdXJjZSBt
YW5hZ2VtZW50CmJldHdlZW4gY29udGFpbmVycywgSSB3b3VsZCBsaWtlIHRvIGtub3cgd2hvIGlz
IHRoZSBleHBlY3RlZCBtYW5hZ2VyCmFuZCBob3cgZG9lcyBpdCBmaXQgaW50byB0aGUgY29uY2Vw
dCBvZiBjb250YWluZXIgKHdoaWNoIGVuZm9yY2Ugc29tZQpsZXZlbCBvZiBpc29sYXRpb24uKSAg
T25lIHBvc3NpYmxlIG1hbmFnZXIgbWF5IGJlIHRoZSBkaXNwbGF5IHNlcnZlci4KQnV0IGFzIGxv
bmcgYXMgdGhlIGRpc3BsYXkgc2VydmVyIGlzIGluIGEgcGFyZW50IGNncm91cCBvZiB0aGUgYXBw
cycKY2dyb3VwLCB0aGUgYXBwcyBjYW4gc3RpbGwgaW1wb3J0IGhhbmRsZXMgZnJvbSB0aGUgZGlz
cGxheSBzZXJ2ZXIKdW5kZXIgdGhlIGN1cnJlbnQgaW1wbGVtZW50YXRpb24uICBNeSB1bmRlcnN0
YW5kaW5nIGlzIHRoYXQgdGhpcyBpcwptb3N0IGxpa2VseSB0aGUgY2FzZSwgd2l0aCB0aGUgZGlz
cGxheSBzZXJ2ZXIgc2ltcGx5IHNpdHRpbmcgYXQgdGhlCmRlZmF1bHQvcm9vdCBjZ3JvdXAuICBC
dXQgSSBjZXJ0YWlubHkgd2FudCB0byBoZWFyIG1vcmUgYWJvdXQgb3RoZXIKdXNlIGNhc2VzIChm
b3IgZXhhbXBsZSwgaXMgcnVubmluZyBtdWx0aXBsZSBkaXNwbGF5IHNlcnZlcnMgb24gYQpzaW5n
bGUgaG9zdCBhIHJlYWxpc3RpYyBwb3NzaWJpbGl0eT8gIEFyZSB0aGVyZSBwZW9wbGUgcnVubmlu
ZwptdWx0aXBsZSBkaXNwbGF5IHNlcnZlcnMgaW5zaWRlIHBlZXIgY29udGFpbmVycz8gIElmIHNv
LCBob3cgZG8gdGhleQpjb29yZGluYXRlIHJlc291cmNlcz8pCgpJIHNob3VsZCBwcm9iYWJseSBz
dW1tYXJpemUgc29tZSBvZiB0aGVzZSBpbnRvIHRoZSBjb21taXQgbWVzc2FnZS4KClJlZ2FyZHMs
Cktlbm55CgoKCj4gQ2hyaXN0aWFuLgo+Cj4gPiAgICAgICBpZiAob2JqLT5kbWFfYnVmKSB7Cj4g
PiAgICAgICAgICAgICAgIFdBUk5fT04ob2JqLT5kbWFfYnVmICE9IGRtYV9idWYpOwo+ID4gICAg
ICAgfSBlbHNlIHsKPiA+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fY2dyb3VwLmggYi9p
bmNsdWRlL2RybS9kcm1fY2dyb3VwLmgKPiA+IGluZGV4IGRkYjllYWI2NDM2MC4uODcxMWI3YzVm
N2JmIDEwMDY0NAo+ID4gLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2Nncm91cC5oCj4gPiArKysgYi9p
bmNsdWRlL2RybS9kcm1fY2dyb3VwLmgKPiA+IEBAIC00LDEyICs0LDIwIEBACj4gPiAgICNpZm5k
ZWYgX19EUk1fQ0dST1VQX0hfXwo+ID4gICAjZGVmaW5lIF9fRFJNX0NHUk9VUF9IX18KPiA+Cj4g
PiArI2luY2x1ZGUgPGxpbnV4L2Nncm91cF9kcm0uaD4KPiA+ICsKPiA+ICAgI2lmZGVmIENPTkZJ
R19DR1JPVVBfRFJNCj4gPgo+ID4gICBpbnQgZHJtY2dycF9yZWdpc3Rlcl9kZXZpY2Uoc3RydWN0
IGRybV9kZXZpY2UgKmRldmljZSk7Cj4gPiAtCj4gPiAgIGludCBkcm1jZ3JwX3VucmVnaXN0ZXJf
ZGV2aWNlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXZpY2UpOwo+ID4gLQo+ID4gK2Jvb2wgZHJtY2dy
cF9pc19zZWxmX29yX2FuY2VzdG9yKHN0cnVjdCBkcm1jZ3JwICpzZWxmLAo+ID4gKyAgICAgICAg
ICAgICBzdHJ1Y3QgZHJtY2dycCAqcmVsYXRpdmUpOwo+ID4gK3ZvaWQgZHJtY2dycF9jaGdfYm9f
YWxsb2Moc3RydWN0IGRybWNncnAgKmRybWNncnAsIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4g
PiArICAgICAgICAgICAgIHNpemVfdCBzaXplKTsKPiA+ICt2b2lkIGRybWNncnBfdW5jaGdfYm9f
YWxsb2Moc3RydWN0IGRybWNncnAgKmRybWNncnAsIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4g
PiArICAgICAgICAgICAgIHNpemVfdCBzaXplKTsKPiA+ICtib29sIGRybWNncnBfYm9fY2FuX2Fs
bG9jYXRlKHN0cnVjdCB0YXNrX3N0cnVjdCAqdGFzaywgc3RydWN0IGRybV9kZXZpY2UgKmRldiwK
PiA+ICsgICAgICAgICAgICAgc2l6ZV90IHNpemUpOwo+ID4gICAjZWxzZQo+ID4gICBzdGF0aWMg
aW5saW5lIGludCBkcm1jZ3JwX3JlZ2lzdGVyX2RldmljZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
aWNlKQo+ID4gICB7Cj4gPiBAQCAtMjAsNSArMjgsMjcgQEAgc3RhdGljIGlubGluZSBpbnQgZHJt
Y2dycF91bnJlZ2lzdGVyX2RldmljZShzdHJ1Y3QgZHJtX2RldmljZSAqZGV2aWNlKQo+ID4gICB7
Cj4gPiAgICAgICByZXR1cm4gMDsKPiA+ICAgfQo+ID4gKwo+ID4gK3N0YXRpYyBpbmxpbmUgYm9v
bCBkcm1jZ3JwX2lzX3NlbGZfb3JfYW5jZXN0b3Ioc3RydWN0IGRybWNncnAgKnNlbGYsCj4gPiAr
ICAgICAgICAgICAgIHN0cnVjdCBkcm1jZ3JwICpyZWxhdGl2ZSkKPiA+ICt7Cj4gPiArICAgICBy
ZXR1cm4gZmFsc2U7Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyBpbmxpbmUgdm9pZCBkcm1jZ3Jw
X2NoZ19ib19hbGxvYyhzdHJ1Y3QgZHJtY2dycCAqZHJtY2dycCwKPiA+ICsgICAgICAgICAgICAg
c3RydWN0IGRybV9kZXZpY2UgKmRldiwgc2l6ZV90IHNpemUpCj4gPiArewo+ID4gK30KPiA+ICsK
PiA+ICtzdGF0aWMgaW5saW5lIHZvaWQgZHJtY2dycF91bmNoZ19ib19hbGxvYyhzdHJ1Y3QgZHJt
Y2dycCAqZHJtY2dycCwKPiA+ICsgICAgICAgICAgICAgc3RydWN0IGRybV9kZXZpY2UgKmRldiwg
c2l6ZV90IHNpemUpCj4gPiArewo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgaW5saW5lIGJvb2wg
ZHJtY2dycF9ib19jYW5fYWxsb2NhdGUoc3RydWN0IHRhc2tfc3RydWN0ICp0YXNrLAo+ID4gKyAg
ICAgICAgICAgICBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzaXplX3Qgc2l6ZSkKPiA+ICt7Cj4g
PiArICAgICByZXR1cm4gdHJ1ZTsKPiA+ICt9Cj4gPiAgICNlbmRpZiAvKiBDT05GSUdfQ0dST1VQ
X0RSTSAqLwo+ID4gICAjZW5kaWYgLyogX19EUk1fQ0dST1VQX0hfXyAqLwo+ID4gZGlmZiAtLWdp
dCBhL2luY2x1ZGUvZHJtL2RybV9nZW0uaCBiL2luY2x1ZGUvZHJtL2RybV9nZW0uaAo+ID4gaW5k
ZXggYzk1NzI3NDI1Mjg0Li4wMjg1NGM2NzRiNWMgMTAwNjQ0Cj4gPiAtLS0gYS9pbmNsdWRlL2Ry
bS9kcm1fZ2VtLmgKPiA+ICsrKyBiL2luY2x1ZGUvZHJtL2RybV9nZW0uaAo+ID4gQEAgLTI3Miw2
ICsyNzIsMTcgQEAgc3RydWN0IGRybV9nZW1fb2JqZWN0IHsKPiA+ICAgICAgICAqCj4gPiAgICAg
ICAgKi8KPiA+ICAgICAgIGNvbnN0IHN0cnVjdCBkcm1fZ2VtX29iamVjdF9mdW5jcyAqZnVuY3M7
Cj4gPiArCj4gPiArICAgICAvKioKPiA+ICsgICAgICAqIEBkcm1jZ3JwOgo+ID4gKyAgICAgICoK
PiA+ICsgICAgICAqIERSTSBjZ3JvdXAgdGhpcyBHRU0gb2JqZWN0IGJlbG9uZ3MgdG8uCj4gPiAr
ICAgICAgICAgKgo+ID4gKyAgICAgICAgICogVGhpcyBpcyB1c2VkIHRvIHRyYWNrIGFuZCBsaW1p
dCB0aGUgYW1vdW50IG9mIEdFTSBvYmplY3RzIGEgdXNlcgo+ID4gKyAgICAgICAgICogY2FuIGFs
bG9jYXRlLiAgU2luY2UgR0VNIG9iamVjdHMgY2FuIGJlIHNoYXJlZCwgdGhpcyBpcyBhbHNvIHVz
ZWQKPiA+ICsgICAgICAgICAqIHRvIGVuc3VyZSBHRU0gb2JqZWN0cyBhcmUgb25seSBzaGFyZWQg
d2l0aGluIHRoZSBzYW1lIGNncm91cC4KPiA+ICsgICAgICAqLwo+ID4gKyAgICAgc3RydWN0IGRy
bWNncnAgKmRybWNncnA7Cj4gPiAgIH07Cj4gPgo+ID4gICAvKioKPiA+IGRpZmYgLS1naXQgYS9p
bmNsdWRlL2xpbnV4L2Nncm91cF9kcm0uaCBiL2luY2x1ZGUvbGludXgvY2dyb3VwX2RybS5oCj4g
PiBpbmRleCBkN2NjZjQzNGNhNmIuLmZlMTRiYTdiYjFjZiAxMDA2NDQKPiA+IC0tLSBhL2luY2x1
ZGUvbGludXgvY2dyb3VwX2RybS5oCj4gPiArKysgYi9pbmNsdWRlL2xpbnV4L2Nncm91cF9kcm0u
aAo+ID4gQEAgLTE1LDYgKzE1LDkgQEAKPiA+Cj4gPiAgIHN0cnVjdCBkcm1jZ3JwX2RldmljZV9y
ZXNvdXJjZSB7Cj4gPiAgICAgICAvKiBmb3IgcGVyIGRldmljZSBzdGF0cyAqLwo+ID4gKyAgICAg
czY0ICAgICAgICAgICAgICAgICAgICAgYm9fc3RhdHNfdG90YWxfYWxsb2NhdGVkOwo+ID4gKwo+
ID4gKyAgICAgczY0ICAgICAgICAgICAgICAgICAgICAgYm9fbGltaXRzX3RvdGFsX2FsbG9jYXRl
ZDsKPiA+ICAgfTsKPiA+Cj4gPiAgIHN0cnVjdCBkcm1jZ3JwIHsKPiA+IGRpZmYgLS1naXQgYS9r
ZXJuZWwvY2dyb3VwL2RybS5jIGIva2VybmVsL2Nncm91cC9kcm0uYwo+ID4gaW5kZXggZjllZjRi
ZjA0MmQ4Li5iYzNhYmZmMDkxMTMgMTAwNjQ0Cj4gPiAtLS0gYS9rZXJuZWwvY2dyb3VwL2RybS5j
Cj4gPiArKysgYi9rZXJuZWwvY2dyb3VwL2RybS5jCj4gPiBAQCAtMTUsNiArMTUsMjIgQEAgc3Rh
dGljIERFRklORV9NVVRFWChkcm1jZ3JwX211dGV4KTsKPiA+ICAgc3RydWN0IGRybWNncnBfZGV2
aWNlIHsKPiA+ICAgICAgIHN0cnVjdCBkcm1fZGV2aWNlICAgICAgICpkZXY7Cj4gPiAgICAgICBz
dHJ1Y3QgbXV0ZXggICAgICAgICAgICBtdXRleDsKPiA+ICsKPiA+ICsgICAgIHM2NCAgICAgICAg
ICAgICAgICAgICAgIGJvX2xpbWl0c190b3RhbF9hbGxvY2F0ZWRfZGVmYXVsdDsKPiA+ICt9Owo+
ID4gKwo+ID4gKyNkZWZpbmUgRFJNQ0dfQ1RGX1BSSVZfU0laRSAzCj4gPiArI2RlZmluZSBEUk1D
R19DVEZfUFJJVl9NQVNLIEdFTk1BU0soKERSTUNHX0NURl9QUklWX1NJWkUgLSAxKSwgMCkKPiA+
ICsKPiA+ICtlbnVtIGRybWNncnBfcmVzX3R5cGUgewo+ID4gKyAgICAgRFJNQ0dSUF9UWVBFX0JP
X1RPVEFMLAo+ID4gK307Cj4gPiArCj4gPiArZW51bSBkcm1jZ3JwX2ZpbGVfdHlwZSB7Cj4gPiAr
ICAgICBEUk1DR1JQX0ZUWVBFX1NUQVRTLAo+ID4gKyAgICAgRFJNQ0dSUF9GVFlQRV9NQVgsCj4g
PiArICAgICBEUk1DR1JQX0ZUWVBFX0RFRkFVTFQsCj4gPiArICAgICBEUk1DR1JQX0ZUWVBFX0hF
TFAsCj4gPiAgIH07Cj4gPgo+ID4gICAvKiBpbmRleGVkIGJ5IGRybV9taW5vciBmb3IgYWNjZXNz
IHNwZWVkICovCj4gPiBAQCAtNTMsNiArNjksMTAgQEAgc3RhdGljIGlubGluZSBpbnQgaW5pdF9k
cm1jZ3JwX3NpbmdsZShzdHJ1Y3QgZHJtY2dycCAqZHJtY2dycCwgaW50IGkpCj4gPiAgICAgICB9
Cj4gPgo+ID4gICAgICAgLyogc2V0IGRlZmF1bHRzIGhlcmUgKi8KPiA+ICsgICAgIGlmIChrbm93
bl9kcm1jZ3JwX2RldnNbaV0gIT0gTlVMTCkgewo+ID4gKyAgICAgICAgICAgICBkZHItPmJvX2xp
bWl0c190b3RhbF9hbGxvY2F0ZWQgPQo+ID4gKyAgICAgICAgICAgICAgIGtub3duX2RybWNncnBf
ZGV2c1tpXS0+Ym9fbGltaXRzX3RvdGFsX2FsbG9jYXRlZF9kZWZhdWx0Owo+ID4gKyAgICAgfQo+
ID4KPiA+ICAgICAgIHJldHVybiAwOwo+ID4gICB9Cj4gPiBAQCAtOTksNyArMTE5LDE4NyBAQCBk
cm1jZ3JwX2Nzc19hbGxvYyhzdHJ1Y3QgY2dyb3VwX3N1YnN5c19zdGF0ZSAqcGFyZW50X2NzcykK
PiA+ICAgICAgIHJldHVybiAmZHJtY2dycC0+Y3NzOwo+ID4gICB9Cj4gPgo+ID4gK3N0YXRpYyBp
bmxpbmUgdm9pZCBkcm1jZ3JwX3ByaW50X3N0YXRzKHN0cnVjdCBkcm1jZ3JwX2RldmljZV9yZXNv
dXJjZSAqZGRyLAo+ID4gKyAgICAgICAgICAgICBzdHJ1Y3Qgc2VxX2ZpbGUgKnNmLCBlbnVtIGRy
bWNncnBfcmVzX3R5cGUgdHlwZSkKPiA+ICt7Cj4gPiArICAgICBpZiAoZGRyID09IE5VTEwpIHsK
PiA+ICsgICAgICAgICAgICAgc2VxX3B1dHMoc2YsICJcbiIpOwo+ID4gKyAgICAgICAgICAgICBy
ZXR1cm47Cj4gPiArICAgICB9Cj4gPiArCj4gPiArICAgICBzd2l0Y2ggKHR5cGUpIHsKPiA+ICsg
ICAgIGNhc2UgRFJNQ0dSUF9UWVBFX0JPX1RPVEFMOgo+ID4gKyAgICAgICAgICAgICBzZXFfcHJp
bnRmKHNmLCAiJWxsZFxuIiwgZGRyLT5ib19zdGF0c190b3RhbF9hbGxvY2F0ZWQpOwo+ID4gKyAg
ICAgICAgICAgICBicmVhazsKPiA+ICsgICAgIGRlZmF1bHQ6Cj4gPiArICAgICAgICAgICAgIHNl
cV9wdXRzKHNmLCAiXG4iKTsKPiA+ICsgICAgICAgICAgICAgYnJlYWs7Cj4gPiArICAgICB9Cj4g
PiArfQo+ID4gKwo+ID4gK3N0YXRpYyBpbmxpbmUgdm9pZCBkcm1jZ3JwX3ByaW50X2xpbWl0cyhz
dHJ1Y3QgZHJtY2dycF9kZXZpY2VfcmVzb3VyY2UgKmRkciwKPiA+ICsgICAgICAgICAgICAgc3Ry
dWN0IHNlcV9maWxlICpzZiwgZW51bSBkcm1jZ3JwX3Jlc190eXBlIHR5cGUpCj4gPiArewo+ID4g
KyAgICAgaWYgKGRkciA9PSBOVUxMKSB7Cj4gPiArICAgICAgICAgICAgIHNlcV9wdXRzKHNmLCAi
XG4iKTsKPiA+ICsgICAgICAgICAgICAgcmV0dXJuOwo+ID4gKyAgICAgfQo+ID4gKwo+ID4gKyAg
ICAgc3dpdGNoICh0eXBlKSB7Cj4gPiArICAgICBjYXNlIERSTUNHUlBfVFlQRV9CT19UT1RBTDoK
PiA+ICsgICAgICAgICAgICAgc2VxX3ByaW50ZihzZiwgIiVsbGRcbiIsIGRkci0+Ym9fbGltaXRz
X3RvdGFsX2FsbG9jYXRlZCk7Cj4gPiArICAgICAgICAgICAgIGJyZWFrOwo+ID4gKyAgICAgZGVm
YXVsdDoKPiA+ICsgICAgICAgICAgICAgc2VxX3B1dHMoc2YsICJcbiIpOwo+ID4gKyAgICAgICAg
ICAgICBicmVhazsKPiA+ICsgICAgIH0KPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIGlubGluZSB2
b2lkIGRybWNncnBfcHJpbnRfZGVmYXVsdChzdHJ1Y3QgZHJtY2dycF9kZXZpY2UgKmRkZXYsCj4g
PiArICAgICAgICAgICAgIHN0cnVjdCBzZXFfZmlsZSAqc2YsIGVudW0gZHJtY2dycF9yZXNfdHlw
ZSB0eXBlKQo+ID4gK3sKPiA+ICsgICAgIGlmIChkZGV2ID09IE5VTEwpIHsKPiA+ICsgICAgICAg
ICAgICAgc2VxX3B1dHMoc2YsICJcbiIpOwo+ID4gKyAgICAgICAgICAgICByZXR1cm47Cj4gPiAr
ICAgICB9Cj4gPiArCj4gPiArICAgICBzd2l0Y2ggKHR5cGUpIHsKPiA+ICsgICAgIGNhc2UgRFJN
Q0dSUF9UWVBFX0JPX1RPVEFMOgo+ID4gKyAgICAgICAgICAgICBzZXFfcHJpbnRmKHNmLCAiJWxs
ZFxuIiwgZGRldi0+Ym9fbGltaXRzX3RvdGFsX2FsbG9jYXRlZF9kZWZhdWx0KTsKPiA+ICsgICAg
ICAgICAgICAgYnJlYWs7Cj4gPiArICAgICBkZWZhdWx0Ogo+ID4gKyAgICAgICAgICAgICBzZXFf
cHV0cyhzZiwgIlxuIik7Cj4gPiArICAgICAgICAgICAgIGJyZWFrOwo+ID4gKyAgICAgfQo+ID4g
K30KPiA+ICsKPiA+ICtzdGF0aWMgaW5saW5lIHZvaWQgZHJtY2dycF9wcmludF9oZWxwKGludCBj
YXJkTnVtLCBzdHJ1Y3Qgc2VxX2ZpbGUgKnNmLAo+ID4gKyAgICAgICAgICAgICBlbnVtIGRybWNn
cnBfcmVzX3R5cGUgdHlwZSkKPiA+ICt7Cj4gPiArICAgICBzd2l0Y2ggKHR5cGUpIHsKPiA+ICsg
ICAgIGNhc2UgRFJNQ0dSUF9UWVBFX0JPX1RPVEFMOgo+ID4gKyAgICAgICAgICAgICBzZXFfcHJp
bnRmKHNmLAo+ID4gKyAgICAgICAgICAgICAiVG90YWwgYW1vdW50IG9mIGJ1ZmZlciBhbGxvY2F0
aW9uIGluIGJ5dGVzIGZvciBjYXJkJWRcbiIsCj4gPiArICAgICAgICAgICAgIGNhcmROdW0pOwo+
ID4gKyAgICAgICAgICAgICBicmVhazsKPiA+ICsgICAgIGRlZmF1bHQ6Cj4gPiArICAgICAgICAg
ICAgIHNlcV9wdXRzKHNmLCAiXG4iKTsKPiA+ICsgICAgICAgICAgICAgYnJlYWs7Cj4gPiArICAg
ICB9Cj4gPiArfQo+ID4gKwo+ID4gK2ludCBkcm1jZ3JwX2JvX3Nob3coc3RydWN0IHNlcV9maWxl
ICpzZiwgdm9pZCAqdikKPiA+ICt7Cj4gPiArICAgICBzdHJ1Y3QgZHJtY2dycCAqZHJtY2dycCA9
IGNzc19kcm1jZ3JwKHNlcV9jc3Moc2YpKTsKPiA+ICsgICAgIHN0cnVjdCBkcm1jZ3JwX2Rldmlj
ZV9yZXNvdXJjZSAqZGRyID0gTlVMTDsKPiA+ICsgICAgIGVudW0gZHJtY2dycF9maWxlX3R5cGUg
Zl90eXBlID0gc2VxX2NmdChzZiktPgo+ID4gKyAgICAgICAgICAgICBwcml2YXRlICYgRFJNQ0df
Q1RGX1BSSVZfTUFTSzsKPiA+ICsgICAgIGVudW0gZHJtY2dycF9yZXNfdHlwZSB0eXBlID0gc2Vx
X2NmdChzZiktPgo+ID4gKyAgICAgICAgICAgICBwcml2YXRlID4+IERSTUNHX0NURl9QUklWX1NJ
WkU7Cj4gPiArICAgICBzdHJ1Y3QgZHJtY2dycF9kZXZpY2UgKmRkZXY7Cj4gPiArICAgICBpbnQg
aTsKPiA+ICsKPiA+ICsgICAgIGZvciAoaSA9IDA7IGkgPD0gbWF4X21pbm9yOyBpKyspIHsKPiA+
ICsgICAgICAgICAgICAgZGRyID0gZHJtY2dycC0+ZGV2X3Jlc291cmNlc1tpXTsKPiA+ICsgICAg
ICAgICAgICAgZGRldiA9IGtub3duX2RybWNncnBfZGV2c1tpXTsKPiA+ICsKPiA+ICsgICAgICAg
ICAgICAgc3dpdGNoIChmX3R5cGUpIHsKPiA+ICsgICAgICAgICAgICAgY2FzZSBEUk1DR1JQX0ZU
WVBFX1NUQVRTOgo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGRybWNncnBfcHJpbnRfc3RhdHMo
ZGRyLCBzZiwgdHlwZSk7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gPiArICAg
ICAgICAgICAgIGNhc2UgRFJNQ0dSUF9GVFlQRV9NQVg6Cj4gPiArICAgICAgICAgICAgICAgICAg
ICAgZHJtY2dycF9wcmludF9saW1pdHMoZGRyLCBzZiwgdHlwZSk7Cj4gPiArICAgICAgICAgICAg
ICAgICAgICAgYnJlYWs7Cj4gPiArICAgICAgICAgICAgIGNhc2UgRFJNQ0dSUF9GVFlQRV9ERUZB
VUxUOgo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGRybWNncnBfcHJpbnRfZGVmYXVsdChkZGV2
LCBzZiwgdHlwZSk7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gPiArICAgICAg
ICAgICAgIGNhc2UgRFJNQ0dSUF9GVFlQRV9IRUxQOgo+ID4gKyAgICAgICAgICAgICAgICAgICAg
IGRybWNncnBfcHJpbnRfaGVscChpLCBzZiwgdHlwZSk7Cj4gPiArICAgICAgICAgICAgICAgICAg
ICAgYnJlYWs7Cj4gPiArICAgICAgICAgICAgIGRlZmF1bHQ6Cj4gPiArICAgICAgICAgICAgICAg
ICAgICAgc2VxX3B1dHMoc2YsICJcbiIpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGJyZWFr
Owo+ID4gKyAgICAgICAgICAgICB9Cj4gPiArICAgICB9Cj4gPiArCj4gPiArICAgICByZXR1cm4g
MDsKPiA+ICt9Cj4gPiArCj4gPiArc3NpemVfdCBkcm1jZ3JwX2JvX2xpbWl0X3dyaXRlKHN0cnVj
dCBrZXJuZnNfb3Blbl9maWxlICpvZiwgY2hhciAqYnVmLAo+ID4gKyAgICAgICAgICAgICBzaXpl
X3QgbmJ5dGVzLCBsb2ZmX3Qgb2ZmKQo+ID4gK3sKPiA+ICsgICAgIHN0cnVjdCBkcm1jZ3JwICpk
cm1jZ3JwID0gY3NzX2RybWNncnAob2ZfY3NzKG9mKSk7Cj4gPiArICAgICBlbnVtIGRybWNncnBf
cmVzX3R5cGUgdHlwZSA9IG9mX2NmdChvZiktPnByaXZhdGUgPj4gRFJNQ0dfQ1RGX1BSSVZfU0la
RTsKPiA+ICsgICAgIGNoYXIgKmNmdF9uYW1lID0gb2ZfY2Z0KG9mKS0+bmFtZTsKPiA+ICsgICAg
IGNoYXIgKmxpbWl0cyA9IHN0cnN0cmlwKGJ1Zik7Cj4gPiArICAgICBzdHJ1Y3QgZHJtY2dycF9k
ZXZpY2VfcmVzb3VyY2UgKmRkcjsKPiA+ICsgICAgIGNoYXIgKnN2YWw7Cj4gPiArICAgICBzNjQg
dmFsOwo+ID4gKyAgICAgaW50IGkgPSAwOwo+ID4gKyAgICAgaW50IHJjOwo+ID4gKwo+ID4gKyAg
ICAgd2hpbGUgKGkgPD0gbWF4X21pbm9yICYmIGxpbWl0cyAhPSBOVUxMKSB7Cj4gPiArICAgICAg
ICAgICAgIHN2YWwgPSAgc3Ryc2VwKCZsaW1pdHMsICJcbiIpOwo+ID4gKyAgICAgICAgICAgICBy
YyA9IGtzdHJ0b2xsKHN2YWwsIDAsICZ2YWwpOwo+ID4gKwo+ID4gKyAgICAgICAgICAgICBpZiAo
cmMpIHsKPiA+ICsgICAgICAgICAgICAgICAgICAgICBwcl9lcnIoImRybWNncnA6ICVzOiBtaW5v
ciAlZCwgZXJyICVkLiAiLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Z0X25h
bWUsIGksIHJjKTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICBwcl9jb250X2Nncm91cF9uYW1l
KGRybWNncnAtPmNzcy5jZ3JvdXApOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgIHByX2NvbnQo
IlxuIik7Cj4gPiArICAgICAgICAgICAgIH0gZWxzZSB7Cj4gPiArICAgICAgICAgICAgICAgICAg
ICAgZGRyID0gZHJtY2dycC0+ZGV2X3Jlc291cmNlc1tpXTsKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICBzd2l0Y2ggKHR5cGUpIHsKPiA+ICsgICAgICAgICAgICAgICAgICAgICBjYXNlIERSTUNH
UlBfVFlQRV9CT19UT1RBTDoKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlm
ICh2YWwgPCAwKSBjb250aW51ZTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRk
ci0+Ym9fbGltaXRzX3RvdGFsX2FsbG9jYXRlZCA9IHZhbDsKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGJyZWFrOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6Cj4g
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPiA+ICsgICAgICAgICAgICAg
ICAgICAgICB9Cj4gPiArICAgICAgICAgICAgIH0KPiA+ICsKPiA+ICsgICAgICAgICAgICAgaSsr
Owo+ID4gKyAgICAgfQo+ID4gKwo+ID4gKyAgICAgaWYgKGkgPD0gbWF4X21pbm9yKSB7Cj4gPiAr
ICAgICAgICAgICAgIHByX2VycigiZHJtY2dycDogJXM6IGxlc3MgZW50cmllcyB0aGFuICMgb2Yg
ZHJtIGRldmljZXMuICIsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZnRfbmFt
ZSk7Cj4gPiArICAgICAgICAgICAgIHByX2NvbnRfY2dyb3VwX25hbWUoZHJtY2dycC0+Y3NzLmNn
cm91cCk7Cj4gPiArICAgICAgICAgICAgIHByX2NvbnQoIlxuIik7Cj4gPiArICAgICB9Cj4gPiAr
Cj4gPiArICAgICByZXR1cm4gbmJ5dGVzOwo+ID4gK30KPiA+ICsKPiA+ICAgc3RydWN0IGNmdHlw
ZSBmaWxlc1tdID0gewo+ID4gKyAgICAgewo+ID4gKyAgICAgICAgICAgICAubmFtZSA9ICJidWZm
ZXIudG90YWwuc3RhdHMiLAo+ID4gKyAgICAgICAgICAgICAuc2VxX3Nob3cgPSBkcm1jZ3JwX2Jv
X3Nob3csCj4gPiArICAgICAgICAgICAgIC5wcml2YXRlID0gKERSTUNHUlBfVFlQRV9CT19UT1RB
TCA8PCBEUk1DR19DVEZfUFJJVl9TSVpFKSB8Cj4gPiArICAgICAgICAgICAgICAgICAgICAgRFJN
Q0dSUF9GVFlQRV9TVEFUUywKPiA+ICsgICAgIH0sCj4gPiArICAgICB7Cj4gPiArICAgICAgICAg
ICAgIC5uYW1lID0gImJ1ZmZlci50b3RhbC5kZWZhdWx0IiwKPiA+ICsgICAgICAgICAgICAgLnNl
cV9zaG93ID0gZHJtY2dycF9ib19zaG93LAo+ID4gKyAgICAgICAgICAgICAuZmxhZ3MgPSBDRlRZ
UEVfT05MWV9PTl9ST09ULAo+ID4gKyAgICAgICAgICAgICAucHJpdmF0ZSA9IChEUk1DR1JQX1RZ
UEVfQk9fVE9UQUwgPDwgRFJNQ0dfQ1RGX1BSSVZfU0laRSkgfAo+ID4gKyAgICAgICAgICAgICAg
ICAgICAgIERSTUNHUlBfRlRZUEVfREVGQVVMVCwKPiA+ICsgICAgIH0sCj4gPiArICAgICB7Cj4g
PiArICAgICAgICAgICAgIC5uYW1lID0gImJ1ZmZlci50b3RhbC5oZWxwIiwKPiA+ICsgICAgICAg
ICAgICAgLnNlcV9zaG93ID0gZHJtY2dycF9ib19zaG93LAo+ID4gKyAgICAgICAgICAgICAuZmxh
Z3MgPSBDRlRZUEVfT05MWV9PTl9ST09ULAo+ID4gKyAgICAgICAgICAgICAucHJpdmF0ZSA9IChE
Uk1DR1JQX1RZUEVfQk9fVE9UQUwgPDwgRFJNQ0dfQ1RGX1BSSVZfU0laRSkgfAo+ID4gKyAgICAg
ICAgICAgICAgICAgICAgIERSTUNHUlBfRlRZUEVfSEVMUCwKPiA+ICsgICAgIH0sCj4gPiArICAg
ICB7Cj4gPiArICAgICAgICAgICAgIC5uYW1lID0gImJ1ZmZlci50b3RhbC5tYXgiLAo+ID4gKyAg
ICAgICAgICAgICAud3JpdGUgPSBkcm1jZ3JwX2JvX2xpbWl0X3dyaXRlLAo+ID4gKyAgICAgICAg
ICAgICAuc2VxX3Nob3cgPSBkcm1jZ3JwX2JvX3Nob3csCj4gPiArICAgICAgICAgICAgIC5wcml2
YXRlID0gKERSTUNHUlBfVFlQRV9CT19UT1RBTCA8PCBEUk1DR19DVEZfUFJJVl9TSVpFKSB8Cj4g
PiArICAgICAgICAgICAgICAgICAgICAgRFJNQ0dSUF9GVFlQRV9NQVgsCj4gPiArICAgICB9LAo+
ID4gICAgICAgeyB9ICAgICAvKiB0ZXJtaW5hdGUgKi8KPiA+ICAgfTsKPiA+Cj4gPiBAQCAtMTIy
LDYgKzMyMiw4IEBAIGludCBkcm1jZ3JwX3JlZ2lzdGVyX2RldmljZShzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZGV2KQo+ID4gICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiA+Cj4gPiAgICAgICBk
ZGV2LT5kZXYgPSBkZXY7Cj4gPiArICAgICBkZGV2LT5ib19saW1pdHNfdG90YWxfYWxsb2NhdGVk
X2RlZmF1bHQgPSBTNjRfTUFYOwo+ID4gKwo+ID4gICAgICAgbXV0ZXhfaW5pdCgmZGRldi0+bXV0
ZXgpOwo+ID4KPiA+ICAgICAgIG11dGV4X2xvY2soJmRybWNncnBfbXV0ZXgpOwo+ID4gQEAgLTE1
NiwzICszNTgsODEgQEAgaW50IGRybWNncnBfdW5yZWdpc3Rlcl9kZXZpY2Uoc3RydWN0IGRybV9k
ZXZpY2UgKmRldikKPiA+ICAgICAgIHJldHVybiAwOwo+ID4gICB9Cj4gPiAgIEVYUE9SVF9TWU1C
T0woZHJtY2dycF91bnJlZ2lzdGVyX2RldmljZSk7Cj4gPiArCj4gPiArYm9vbCBkcm1jZ3JwX2lz
X3NlbGZfb3JfYW5jZXN0b3Ioc3RydWN0IGRybWNncnAgKnNlbGYsIHN0cnVjdCBkcm1jZ3JwICpy
ZWxhdGl2ZSkKPiA+ICt7Cj4gPiArICAgICBmb3IgKDsgc2VsZiAhPSBOVUxMOyBzZWxmID0gcGFy
ZW50X2RybWNncnAoc2VsZikpCj4gPiArICAgICAgICAgICAgIGlmIChzZWxmID09IHJlbGF0aXZl
KQo+ID4gKyAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwo+ID4gKwo+ID4gKyAgICAg
cmV0dXJuIGZhbHNlOwo+ID4gK30KPiA+ICtFWFBPUlRfU1lNQk9MKGRybWNncnBfaXNfc2VsZl9v
cl9hbmNlc3Rvcik7Cj4gPiArCj4gPiArYm9vbCBkcm1jZ3JwX2JvX2Nhbl9hbGxvY2F0ZShzdHJ1
Y3QgdGFza19zdHJ1Y3QgKnRhc2ssIHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCj4gPiArICAgICAg
ICAgICAgIHNpemVfdCBzaXplKQo+ID4gK3sKPiA+ICsgICAgIHN0cnVjdCBkcm1jZ3JwICpkcm1j
Z3JwID0gZ2V0X2RybWNncnAodGFzayk7Cj4gPiArICAgICBzdHJ1Y3QgZHJtY2dycF9kZXZpY2Vf
cmVzb3VyY2UgKmRkcjsKPiA+ICsgICAgIHN0cnVjdCBkcm1jZ3JwX2RldmljZV9yZXNvdXJjZSAq
ZDsKPiA+ICsgICAgIGludCBkZXZJZHggPSBkZXYtPnByaW1hcnktPmluZGV4Owo+ID4gKyAgICAg
Ym9vbCByZXN1bHQgPSB0cnVlOwo+ID4gKyAgICAgczY0IGRlbHRhID0gMDsKPiA+ICsKPiA+ICsg
ICAgIGlmIChkcm1jZ3JwID09IE5VTEwgfHwgZHJtY2dycCA9PSByb290X2RybWNncnApCj4gPiAr
ICAgICAgICAgICAgIHJldHVybiB0cnVlOwo+ID4gKwo+ID4gKyAgICAgZGRyID0gZHJtY2dycC0+
ZGV2X3Jlc291cmNlc1tkZXZJZHhdOwo+ID4gKyAgICAgbXV0ZXhfbG9jaygma25vd25fZHJtY2dy
cF9kZXZzW2RldklkeF0tPm11dGV4KTsKPiA+ICsgICAgIGZvciAoIDsgZHJtY2dycCAhPSByb290
X2RybWNncnA7IGRybWNncnAgPSBwYXJlbnRfZHJtY2dycChkcm1jZ3JwKSkgewo+ID4gKyAgICAg
ICAgICAgICBkID0gZHJtY2dycC0+ZGV2X3Jlc291cmNlc1tkZXZJZHhdOwo+ID4gKyAgICAgICAg
ICAgICBkZWx0YSA9IGQtPmJvX2xpbWl0c190b3RhbF9hbGxvY2F0ZWQgLQo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZC0+Ym9fc3RhdHNfdG90YWxfYWxsb2NhdGVkOwo+ID4gKwo+
ID4gKyAgICAgICAgICAgICBpZiAoZGVsdGEgPD0gMCB8fCBzaXplID4gZGVsdGEpIHsKPiA+ICsg
ICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTsKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICBicmVhazsKPiA+ICsgICAgICAgICAgICAgfQo+ID4gKyAgICAgfQo+ID4gKyAgICAgbXV0
ZXhfdW5sb2NrKCZrbm93bl9kcm1jZ3JwX2RldnNbZGV2SWR4XS0+bXV0ZXgpOwo+ID4gKwo+ID4g
KyAgICAgcmV0dXJuIHJlc3VsdDsKPiA+ICt9Cj4gPiArRVhQT1JUX1NZTUJPTChkcm1jZ3JwX2Jv
X2Nhbl9hbGxvY2F0ZSk7Cj4gPiArCj4gPiArdm9pZCBkcm1jZ3JwX2NoZ19ib19hbGxvYyhzdHJ1
Y3QgZHJtY2dycCAqZHJtY2dycCwgc3RydWN0IGRybV9kZXZpY2UgKmRldiwKPiA+ICsgICAgICAg
ICAgICAgc2l6ZV90IHNpemUpCj4gPiArewo+ID4gKyAgICAgc3RydWN0IGRybWNncnBfZGV2aWNl
X3Jlc291cmNlICpkZHI7Cj4gPiArICAgICBpbnQgZGV2SWR4ID0gZGV2LT5wcmltYXJ5LT5pbmRl
eDsKPiA+ICsKPiA+ICsgICAgIGlmIChkcm1jZ3JwID09IE5VTEwgfHwga25vd25fZHJtY2dycF9k
ZXZzW2RldklkeF0gPT0gTlVMTCkKPiA+ICsgICAgICAgICAgICAgcmV0dXJuOwo+ID4gKwo+ID4g
KyAgICAgbXV0ZXhfbG9jaygma25vd25fZHJtY2dycF9kZXZzW2RldklkeF0tPm11dGV4KTsKPiA+
ICsgICAgIGZvciAoIDsgZHJtY2dycCAhPSBOVUxMOyBkcm1jZ3JwID0gcGFyZW50X2RybWNncnAo
ZHJtY2dycCkpIHsKPiA+ICsgICAgICAgICAgICAgZGRyID0gZHJtY2dycC0+ZGV2X3Jlc291cmNl
c1tkZXZJZHhdOwo+ID4gKwo+ID4gKyAgICAgICAgICAgICBkZHItPmJvX3N0YXRzX3RvdGFsX2Fs
bG9jYXRlZCArPSAoczY0KXNpemU7Cj4gPiArICAgICB9Cj4gPiArICAgICBtdXRleF91bmxvY2so
Jmtub3duX2RybWNncnBfZGV2c1tkZXZJZHhdLT5tdXRleCk7Cj4gPiArfQo+ID4gK0VYUE9SVF9T
WU1CT0woZHJtY2dycF9jaGdfYm9fYWxsb2MpOwo+ID4gKwo+ID4gK3ZvaWQgZHJtY2dycF91bmNo
Z19ib19hbGxvYyhzdHJ1Y3QgZHJtY2dycCAqZHJtY2dycCwgc3RydWN0IGRybV9kZXZpY2UgKmRl
diwKPiA+ICsgICAgICAgICAgICAgc2l6ZV90IHNpemUpCj4gPiArewo+ID4gKyAgICAgc3RydWN0
IGRybWNncnBfZGV2aWNlX3Jlc291cmNlICpkZHI7Cj4gPiArICAgICBpbnQgZGV2SWR4ID0gZGV2
LT5wcmltYXJ5LT5pbmRleDsKPiA+ICsKPiA+ICsgICAgIGlmIChkcm1jZ3JwID09IE5VTEwgfHwg
a25vd25fZHJtY2dycF9kZXZzW2RldklkeF0gPT0gTlVMTCkKPiA+ICsgICAgICAgICAgICAgcmV0
dXJuOwo+ID4gKwo+ID4gKyAgICAgZGRyID0gZHJtY2dycC0+ZGV2X3Jlc291cmNlc1tkZXZJZHhd
Owo+ID4gKyAgICAgbXV0ZXhfbG9jaygma25vd25fZHJtY2dycF9kZXZzW2RldklkeF0tPm11dGV4
KTsKPiA+ICsgICAgIGZvciAoIDsgZHJtY2dycCAhPSBOVUxMOyBkcm1jZ3JwID0gcGFyZW50X2Ry
bWNncnAoZHJtY2dycCkpCj4gPiArICAgICAgICAgICAgIGRybWNncnAtPmRldl9yZXNvdXJjZXNb
ZGV2SWR4XS0+Ym9fc3RhdHNfdG90YWxfYWxsb2NhdGVkCj4gPiArICAgICAgICAgICAgICAgICAg
ICAgLT0gKHM2NClzaXplOwo+ID4gKyAgICAgbXV0ZXhfdW5sb2NrKCZrbm93bl9kcm1jZ3JwX2Rl
dnNbZGV2SWR4XS0+bXV0ZXgpOwo+ID4gK30KPiA+ICtFWFBPUlRfU1lNQk9MKGRybWNncnBfdW5j
aGdfYm9fYWxsb2MpOwo+Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1k
ZXZlbA==
