Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id F36C138920
	for <lists+dri-devel@lfdr.de>; Fri,  7 Jun 2019 13:36:01 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9C1E989CB5;
	Fri,  7 Jun 2019 11:35:58 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4F09F89C93
 for <dri-devel@lists.freedesktop.org>; Fri,  7 Jun 2019 11:35:57 +0000 (UTC)
Received: from pendragon.ideasonboard.com (unknown
 [IPv6:2a02:a03f:44f0:8500:ca05:8177:199c:fed4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 3AA44334;
 Fri,  7 Jun 2019 13:35:55 +0200 (CEST)
Date: Fri, 7 Jun 2019 14:35:40 +0300
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Jacopo Mondi <jacopo+renesas@jmondi.org>
Subject: Re: [PATCH 14/20] drm: rcar-du: Add support for CMM
Message-ID: <20190607113540.GB7593@pendragon.ideasonboard.com>
References: <20190606142220.1392-1-jacopo+renesas@jmondi.org>
 <20190606142220.1392-15-jacopo+renesas@jmondi.org>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190606142220.1392-15-jacopo+renesas@jmondi.org>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1559907355;
 bh=wbH7vzG6S3VOC7cSaM5Fbh4wfAU/L1Uph/DAEoS4BLc=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=FcuqNG7YTqG4fitJJK/FXTSxy4uFjXsdC7xn2brnT9DrInhQqTcGwyPav2CJF914U
 GV5sRJRmP9fVwxEXOfMhjJSD12RKRxLPffdFiV1Ktnggp1RpRftg+9P3FEZU0MBF0s
 +fcIR8Xznv/6Qv+ENsE8e+E/ZiemqNO4bw7wGGPI=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: muroya@ksk.co.jp, VenkataRajesh.Kalakodima@in.bosch.com, airlied@linux.ie,
 koji.matsuoka.xm@renesas.com, dri-devel@lists.freedesktop.org,
 linux-kernel@vger.kernel.org, linux-renesas-soc@vger.kernel.org,
 kieran.bingham+renesas@ideasonboard.com,
 Harsha.ManjulaMallikarjun@in.bosch.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgSmFjb3BvLAoKVGhhbmsgeW91IGZvciB0aGUgcGF0Y2guCgpPbiBUaHUsIEp1biAwNiwgMjAx
OSBhdCAwNDoyMjoxNFBNICswMjAwLCBKYWNvcG8gTW9uZGkgd3JvdGU6Cj4gQWRkIGEgZHJpdmVy
IGZvciB0aGUgUi1DYXIgRGlzcGxheSBVbml0IENvbG9yIENvcnJlY3Rpb24gTW9kdWxlLgo+IAo+
IEVhY2ggRFUgb3V0cHV0IGNoYW5uZWwgaXMgcHJvdmlkZWQgd2l0aCBhIENNTSB1bml0IHRvIHBl
cmZvcm0gaW1hZ2UKPiBlbmhhbmNlbWVudCBhbmQgY29sb3IgY29ycmVjdGlvbi4KCkkgd291bGQg
c2F5ICJPbiBtb3N0IEdlbjMgU29DcywgZWFjaCBEVSAuLi4iIGFzIFYzKiBTb0NzIGhhdmUgbm8g
Q01NLgoKPiAKPiBBZGQgc3VwcG9ydCBmb3IgQ01NIHRocm91Z2ggYSBkcml2ZXIgdGhhdCBzdXBw
b3J0cyBjb25maWd1cmF0aW9uIG9mCj4gdGhlIDEtZGltZW5zaW9uYWwgTFVUIHRhYmxlLiBNb3Jl
IGFkdmFuY2VkIENNTSBmZWF0dXJlIGNvdWxkIGJlCj4gaW1wbGVtZW50ZWQgb24gdG9wIG9mIHRo
aXMgYmFzaWMgb25lLgoKcy9jb3VsZCBiZS93aWxsIGJlLyA/IDotKQoKPiAKPiBTaWduZWQtb2Zm
LWJ5OiBKYWNvcG8gTW9uZGkgPGphY29wbytyZW5lc2FzQGptb25kaS5vcmc+Cj4gLS0tCj4gIGRy
aXZlcnMvZ3B1L2RybS9yY2FyLWR1L0tjb25maWcgICAgfCAgIDcgKwo+ICBkcml2ZXJzL2dwdS9k
cm0vcmNhci1kdS9NYWtlZmlsZSAgIHwgICAxICsKPiAgZHJpdmVycy9ncHUvZHJtL3JjYXItZHUv
cmNhcl9jbW0uYyB8IDE5NyArKysrKysrKysrKysrKysrKysrKysrKysrKysrKwo+ICBkcml2ZXJz
L2dwdS9kcm0vcmNhci1kdS9yY2FyX2NtbS5oIHwgIDM4ICsrKysrKwo+ICA0IGZpbGVzIGNoYW5n
ZWQsIDI0MyBpbnNlcnRpb25zKCspCj4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9k
cm0vcmNhci1kdS9yY2FyX2NtbS5jCj4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9k
cm0vcmNhci1kdS9yY2FyX2NtbS5oCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9y
Y2FyLWR1L0tjb25maWcgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9LY29uZmlnCj4gaW5kZXgg
MTUyOTg0OWUyMTdlLi41MzlkMjMyNzkwZDEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJt
L3JjYXItZHUvS2NvbmZpZwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1L0tjb25maWcK
PiBAQCAtMTMsNiArMTMsMTMgQEAgY29uZmlnIERSTV9SQ0FSX0RVCj4gIAkgIENob29zZSB0aGlz
IG9wdGlvbiBpZiB5b3UgaGF2ZSBhbiBSLUNhciBjaGlwc2V0Lgo+ICAJICBJZiBNIGlzIHNlbGVj
dGVkIHRoZSBtb2R1bGUgd2lsbCBiZSBjYWxsZWQgcmNhci1kdS1kcm0uCj4gIAo+ICtjb25maWcg
RFJNX1JDQVJfQ01NCj4gKwlib29sICJSLUNhciBEVSBDb2xvciBNYW5hZ2VtZW50IE1vZHVsZSAo
Q01NKSBTdXBwb3J0Igo+ICsJZGVwZW5kcyBvbiBEUk0gJiYgT0YKPiArCWRlcGVuZHMgb24gRFJN
X1JDQVJfRFUKPiArCWhlbHAKPiArCSAgRW5hYmxlIHN1cHBvcnQgZm9yIFItQ2FyIENvbG9yIE1h
bmFnZW1lbnQgTW9kdWxlIChDTU0pLgo+ICsKPiAgY29uZmlnIERSTV9SQ0FSX0RXX0hETUkKPiAg
CXRyaXN0YXRlICJSLUNhciBEVSBHZW4zIEhETUkgRW5jb2RlciBTdXBwb3J0Igo+ICAJZGVwZW5k
cyBvbiBEUk0gJiYgT0YKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvTWFr
ZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9NYWtlZmlsZQo+IGluZGV4IDZjMmVkOWM0
NjQ2Ny4uNGQxMTg3Y2NjM2U1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yY2FyLWR1
L01ha2VmaWxlCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvTWFrZWZpbGUKPiBAQCAt
MTUsNiArMTUsNyBAQCByY2FyLWR1LWRybS0kKENPTkZJR19EUk1fUkNBUl9MVkRTKQkrPSByY2Fy
X2R1X29mLm8gXAo+ICByY2FyLWR1LWRybS0kKENPTkZJR19EUk1fUkNBUl9WU1ApCSs9IHJjYXJf
ZHVfdnNwLm8KPiAgcmNhci1kdS1kcm0tJChDT05GSUdfRFJNX1JDQVJfV1JJVEVCQUNLKSArPSBy
Y2FyX2R1X3dyaXRlYmFjay5vCj4gIAo+ICtvYmotJChDT05GSUdfRFJNX1JDQVJfQ01NKQkJKz0g
cmNhcl9jbW0ubwo+ICBvYmotJChDT05GSUdfRFJNX1JDQVJfRFUpCQkrPSByY2FyLWR1LWRybS5v
Cj4gIG9iai0kKENPTkZJR19EUk1fUkNBUl9EV19IRE1JKQkJKz0gcmNhcl9kd19oZG1pLm8KPiAg
b2JqLSQoQ09ORklHX0RSTV9SQ0FSX0xWRFMpCQkrPSByY2FyX2x2ZHMubwo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vcmNhci1kdS9yY2FyX2NtbS5jIGIvZHJpdmVycy9ncHUvZHJtL3Jj
YXItZHUvcmNhcl9jbW0uYwo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAw
MDAwLi41ZDlkOTE3YjkxZjQKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L3JjYXItZHUvcmNhcl9jbW0uYwo+IEBAIC0wLDAgKzEsMTk3IEBACj4gKy8vIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBHUEwtMi4wCj4gKy8qCj4gKyAqIHJjYXJfY21tLmMgLS0gUi1DYXIgRGlz
cGxheSBVbml0IENvbG9yIE1hbmFnZW1lbnQgTW9kdWxlCj4gKyAqCj4gKyAqIENvcHlyaWdodCAo
QykgMjAxOSBKYWNvcG8gTW9uZGkgPGphY29wbytyZW5lc2FzQGptb25kaS5vcmc+Cj4gKyAqLwo+
ICsKPiArI2luY2x1ZGUgPGxpbnV4L2Nsay5oPgo+ICsjaW5jbHVkZSA8bGludXgvaW8uaD4KPiAr
I2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgo+ICsjaW5jbHVkZSA8bGludXgvb2YuaD4KPiArI2lu
Y2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgo+ICsKPiArI2luY2x1ZGUgPGRybS9kcm1f
YXRvbWljLmg+Cj4gKwo+ICsjaW5jbHVkZSAicmNhcl9jbW0uaCIKPiArCj4gKyNkZWZpbmUgQ00y
X0xVVF9DVFJMCQkweDAwCgpJIHdvdWxkIHdyaXRlIGFsbCByZWdpc3RlciBhZGRyZXNzZXMgd2l0
aCAzIChvciA0KSBkaWdpdHMuCgo+ICsjZGVmaW5lIENNMl9MVVRfQ1RSTF9FTgkJQklUKDApCj4g
KyNkZWZpbmUgQ00yX0xVVF9UQkxBCQkweDYwMAoKSSB3b3VsZCBkZWZpbmUgdGhpcyBhcwoKI2Rl
ZmluZSBDTTJfTFVUX1RCTEEobikJCSgweDYwMCArIChuKSAqIDQpCgo+ICsKPiArc3RydWN0IHJj
YXJfY21tIHsKPiArCXN0cnVjdCBjbGsgKmNsazsKPiArCXZvaWQgX19pb21lbSAqYmFzZTsKPiAr
CWJvb2wgZW5hYmxlZDsKPiArCj4gKwkvKiBMVVQgdGFibGUgc2NyYXRjaCBidWZmZXIuICovCj4g
KwlzdHJ1Y3Qgewo+ICsJCWJvb2wgcmVzdG9yZTsKPiArCQl1bnNpZ25lZCBpbnQgc2l6ZTsKPiAr
CQl1aW50MzJfdCB0YWJsZVtDTU1fR0FNTUFfTFVUX1NJWkVdOwo+ICsJfSBsdXQ7Cj4gK307Cj4g
Kwo+ICtzdGF0aWMgaW5saW5lIGludCByY2FyX2NtbV9yZWFkKHN0cnVjdCByY2FyX2NtbSAqcmNt
bSwgdTMyIHJlZykKPiArewo+ICsJcmV0dXJuIGlvcmVhZDMyKHJjbW0tPmJhc2UgKyByZWcpOwo+
ICt9Cj4gKwo+ICtzdGF0aWMgaW5saW5lIHZvaWQgcmNhcl9jbW1fd3JpdGUoc3RydWN0IHJjYXJf
Y21tICpyY21tLCB1MzIgcmVnLCB1MzIgZGF0YSkKPiArewo+ICsJaW93cml0ZTMyKGRhdGEsIHJj
bW0tPmJhc2UgKyByZWcpOwo+ICt9Cj4gKwo+ICtpbnQgcmNhcl9jbW1fc2V0dXAoc3RydWN0IHBs
YXRmb3JtX2RldmljZSAqcGRldiwgc3RydWN0IHJjYXJfY21tX2NvbmZpZyAqY29uZmlnKQoKUGxl
YXNlIGRvY3VtZW50IHRoZSBmdW5jdGlvbnMgZXhwb3NlZCB0byB0aGUgRFUgZHJpdmVyLiBJdCdz
IGhhcmQgdG8KdW5kZXJzdGFuZCB0aGUgc2V0dXAgdnMuIGVuYWJsZS9kaXNhYmxlIHNwbGl0IGJ5
IGp1c3QgcmVhZGluZyB0aGlzCmRyaXZlci4KCj4gK3sKPiArCXN0cnVjdCByY2FyX2NtbSAqcmNt
bSA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOwo+ICsJdW5zaWduZWQgaW50IGk7Cj4gKwo+
ICsJaWYgKGNvbmZpZy0+bHV0LnNpemUgPiBDTU1fR0FNTUFfTFVUX1NJWkUpCj4gKwkJcmV0dXJu
IC1FSU5WQUw7Cj4gKwo+ICsJLyoKPiArCSAqIEFzIGNtbV9zZXR1cCBpcyBjYWxsZWQgYnkgYXRv
bWljIGNvbW1pdCB0YWlsIGhlbHBlciwgaXQgbWlnaHQgYmUKPiArCSAqIGNhbGxlZCBiZWZvcmUg
dGhlIGVuYWJsaW5nIHRoZSBDUlRDICh3aGljaCBjYWxscyBjbW1fZW5hYmxlKCkpLgo+ICsJICoK
PiArCSAqIFN0b3JlIHRoZSBMVVQgdGFibGUgZW50cmllcyBpbiB0aGUgc2NyYXRjaCBidWZmZXIg
dG8gYmUgbGF0ZXIKPiArCSAqIHByb2dyYW1tZWQgYXQgZW5hYmxlIHRpbWUuCj4gKwkgKi8KPiAr
CWlmICghcmNtbS0+ZW5hYmxlZCkgewo+ICsJCWlmICghY29uZmlnLT5sdXQuZW5hYmxlKQo+ICsJ
CQlyZXR1cm4gMDsKPiArCj4gKwkJZm9yIChpID0gMDsgaSA8IGNvbmZpZy0+bHV0LnNpemU7ICsr
aSkgewo+ICsJCQlzdHJ1Y3QgZHJtX2NvbG9yX2x1dCAqbHV0ID0gJmNvbmZpZy0+bHV0LnRhYmxl
W2ldOwo+ICsKPiArCQkJcmNtbS0+bHV0LnRhYmxlW2ldID0gKGx1dC0+cmVkICYgMHhmZikgPDwg
MTYgfAo+ICsJCQkJCSAgICAgKGx1dC0+Z3JlZW4gJiAweGZmKSA8PCA4IHwKPiArCQkJCQkgICAg
IChsdXQtPmJsdWUgJiAweGZmKTsKPiArCQl9Cj4gKwo+ICsJCXJjbW0tPmx1dC5yZXN0b3JlID0g
dHJ1ZTsKPiArCQlyY21tLT5sdXQuc2l6ZSA9IGNvbmZpZy0+bHV0LnNpemU7Cj4gKwo+ICsJCXJl
dHVybiAwOwo+ICsJfQo+ICsKPiArCWlmIChyY2FyX2NtbV9yZWFkKHJjbW0sIENNMl9MVVRfQ1RS
TCkgJiBDTTJfTFVUX0NUUkxfRU4gJiYKPiArCSAgICAhY29uZmlnLT5sdXQuZW5hYmxlKSB7Cj4g
KwkJcmNhcl9jbW1fd3JpdGUocmNtbSwgQ00yX0xVVF9DVFJMLCAwKTsKPiArCQlyZXR1cm4gMDsK
PiArCX0KPiArCj4gKwkvKiBFbmFibGUgTFVUIGFuZCBwcm9ncmFtIHRoZSBuZXcgZ2FtbWEgdGFi
bGUgdmFsdWVzLiAqLwo+ICsJcmNhcl9jbW1fd3JpdGUocmNtbSwgQ00yX0xVVF9DVFJMLCBDTTJf
TFVUX0NUUkxfRU4pOwoKU2hvdWxkbid0IHlvdSB3cml0ZSB0aGUgTFVUIGNvbnRlbnRzIGJlZm9y
ZSBlbmFibGluZyBpdCAoc2FtZSBiZWxvdykgPwoKPiArCWZvciAoaSA9IDA7IGkgPCBjb25maWct
Pmx1dC5zaXplOyArK2kpIHsKPiArCQlzdHJ1Y3QgZHJtX2NvbG9yX2x1dCAqbHV0ID0gJmNvbmZp
Zy0+bHV0LnRhYmxlW2ldOwo+ICsJCXUzMiB2YWwgPSAobHV0LT5yZWQgJiAweGZmKSA8PCAxNiB8
IChsdXQtPmdyZWVuICYgMHhmZikgPDwgOCB8Cj4gKwkJCSAgKGx1dC0+Ymx1ZSAmIDB4ZmYpOwoK
RG8geW91IG5lZWQgdG8gcmVjb21wdXRlIHRoZSB2YWx1ZSwgY2FuJ3QgeW91IHVzZSByY21tLT5s
dXQudGFibGUgPwoKPiArCj4gKwkJcmNhcl9jbW1fd3JpdGUocmNtbSwgQ00yX0xVVF9UQkxBICsg
aSAqIDQsIHZhbCk7Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KCllvdSBuZWVkIHRvIGV4
cG9ydCB0aGlzIGFuZCB0aGUgbmV4dCB0d28gZnVuY3Rpb25zLgoKPiArCj4gK2ludCByY2FyX2Nt
bV9lbmFibGUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKPiArewo+ICsJc3RydWN0IHJj
YXJfY21tICpyY21tID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7Cj4gKwl1bnNpZ25lZCBp
bnQgaTsKPiArCWludCByZXQ7Cj4gKwo+ICsJaWYgKHJjbW0tPmVuYWJsZWQpCj4gKwkJcmV0dXJu
IDA7CgpDYW4gdGhpcyBoYXBwZW4gd2l0aG91dCBhIGJ1ZyBpbiB0aGUgY2FsbGVyID8gSWYgaXQg
Y2FuLCBhbmQgYXNzdW1pbmcKdGhlIGNhbGxlciBiYWxhbmNlcyB0aGUgZW5hYmxlIGFuZCBkaXNh
YmxlIGNhbGxzLCB5b3Ugd2lsbCBoYXZlCnVuYmFsYW5jZWQgY2xrX3ByZXBhcmVfZW5hYmxlKCkg
YW5kIGNsa19kaXNhYmxlX3VucHJlcGFyZSgpIGNhbGxzLgoKPiArCj4gKwlyZXQgPSBjbGtfcHJl
cGFyZV9lbmFibGUocmNtbS0+Y2xrKTsKPiArCWlmIChyZXQpCj4gKwkJcmV0dXJuIHJldDsKCkNv
dWxkIHlvdSB1c2UgcG1fcnVudGltZV9nZXRfc3luYygpIGluc3RlYWQgPwoKPiArCj4gKwkvKiBB
cHBseSB0aGUgTFVUIHRhYmxlIHZhbHVlcyBzYXZlZCBhdCBjbW1fc2V0dXAgdGltZS4gKi8KPiAr
CWlmIChyY21tLT5sdXQucmVzdG9yZSkgewo+ICsJCXJjYXJfY21tX3dyaXRlKHJjbW0sIENNMl9M
VVRfQ1RSTCwgQ00yX0xVVF9DVFJMX0VOKTsKPiArCQlmb3IgKGkgPSAwOyBpIDwgcmNtbS0+bHV0
LnNpemU7ICsraSkKPiArCQkJcmNhcl9jbW1fd3JpdGUocmNtbSwgQ00yX0xVVF9UQkxBICsgaSAq
IDQsCj4gKwkJCQkgICAgICAgcmNtbS0+bHV0LnRhYmxlW2ldKTsKPiArCj4gKwkJcmNtbS0+bHV0
LnJlc3RvcmUgPSBmYWxzZTsKPiArCQlyY21tLT5sdXQuc2l6ZSA9IDA7Cj4gKwl9Cj4gKwo+ICsJ
cmNtbS0+ZW5hYmxlZCA9IHRydWU7Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3ZvaWQg
cmNhcl9jbW1fZGlzYWJsZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQo+ICt7Cj4gKwlz
dHJ1Y3QgcmNhcl9jbW0gKnJjbW0gPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKPiArCj4g
KwlyY2FyX2NtbV93cml0ZShyY21tLCBDTTJfTFVUX0NUUkwsIDApOwo+ICsKPiArCWNsa19kaXNh
YmxlX3VucHJlcGFyZShyY21tLT5jbGspOwo+ICsKPiArCXJjbW0tPmx1dC5yZXN0b3JlID0gZmFs
c2U7Cj4gKwlyY21tLT5sdXQuc2l6ZSA9IDA7Cj4gKwlyY21tLT5lbmFibGVkID0gZmFsc2U7Cj4g
K30KPiArCj4gK3N0YXRpYyBpbnQgcmNhcl9jbW1fcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqcGRldikKPiArewo+ICsJc3RydWN0IHJjYXJfY21tICpyY21tOwo+ICsJc3RydWN0IHJlc291
cmNlICpyZXM7Cj4gKwlyZXNvdXJjZV9zaXplX3Qgc2l6ZTsKPiArCj4gKwlyY21tID0gZGV2bV9r
emFsbG9jKCZwZGV2LT5kZXYsIHNpemVvZigqcmNtbSksIEdGUF9LRVJORUwpOwo+ICsJaWYgKCFy
Y21tKQo+ICsJCXJldHVybiAtRU5PTUVNOwo+ICsKPiArCXBsYXRmb3JtX3NldF9kcnZkYXRhKHBk
ZXYsIHJjbW0pOwo+ICsKPiArCXJlcyA9IHBsYXRmb3JtX2dldF9yZXNvdXJjZShwZGV2LCBJT1JF
U09VUkNFX01FTSwgMCk7Cj4gKwlzaXplID0gcmVzb3VyY2Vfc2l6ZShyZXMpOwo+ICsJaWYgKCFk
ZXZtX3JlcXVlc3RfbWVtX3JlZ2lvbigmcGRldi0+ZGV2LCByZXMtPnN0YXJ0LCBzaXplLAo+ICsJ
CQkJICAgICBkZXZfbmFtZSgmcGRldi0+ZGV2KSkpIHsKPiArCQlkZXZfZXJyKCZwZGV2LT5kZXYs
Cj4gKwkJCSJjYW4ndCByZXF1ZXN0IHJlZ2lvbiBmb3IgcmVzb3VyY2UgJXBSXG4iLCByZXMpOwo+
ICsJCXJldHVybiAtRUJVU1k7Cj4gKwl9Cj4gKwo+ICsJcmNtbS0+YmFzZSA9IGRldm1faW9yZW1h
cF9ub2NhY2hlKCZwZGV2LT5kZXYsIHJlcy0+c3RhcnQsIHNpemUpOwo+ICsJaWYgKElTX0VSUihy
Y21tLT5iYXNlKSkKPiArCQlyZXR1cm4gUFRSX0VSUihyY21tLT5iYXNlKTsKCkFueXRoaW5nIHdy
b25nIHdpdGggZGV2bV9pb3JlbWFwX3Jlc291cmNlKCkgPwoKPiArCj4gKwlyY21tLT5jbGsgPSBk
ZXZtX2Nsa19nZXQoJnBkZXYtPmRldiwgTlVMTCk7Cj4gKwlpZiAoSVNfRVJSKHJjbW0tPmNsaykp
IHsKPiArCQlkZXZfZXJyKCZwZGV2LT5kZXYsICJGYWlsZWQgdG8gZ2V0IENNTSBjbG9jayIpOwo+
ICsJCXJldHVybiBQVFJfRVJSKHJjbW0tPmNsayk7Cj4gKwl9Cj4gKwo+ICsJcmNtbS0+bHV0LnJl
c3RvcmUgPSBmYWxzZTsKPiArCXJjbW0tPmx1dC5zaXplID0gMDsKPiArCXJjbW0tPmVuYWJsZWQg
PSBmYWxzZTsKCkFzIHlvdSBhbGxvY2F0ZSBtZW1vcnkgd2l0aCBremFsbG9jKCkgeW91IGNvdWxk
IHNraXAgdGhpcy4KCj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyBjb25zdCBz
dHJ1Y3Qgb2ZfZGV2aWNlX2lkIHJjYXJfY21tX29mX3RhYmxlW10gPSB7Cj4gKwl7IC5jb21wYXRp
YmxlID0gInJlbmVzYXMsY21tLWdlbjMiIH0sCj4gKwl7IC5jb21wYXRpYmxlID0gInJlbmVzYXMs
Y21tLWdlbjIiIH0sCj4gKwl7IH0sCj4gK307Cj4gKwo+ICtNT0RVTEVfREVWSUNFX1RBQkxFKG9m
LCByY2FyX2NtbV9vZl90YWJsZSk7Cj4gKwo+ICtzdGF0aWMgc3RydWN0IHBsYXRmb3JtX2RyaXZl
ciByY2FyX2NtbV9wbGF0Zm9ybV9kcml2ZXIgPSB7Cj4gKwkucHJvYmUJCT0gcmNhcl9jbW1fcHJv
YmUsCj4gKwkuZHJpdmVyCQk9IHsKPiArCQkubmFtZQk9ICJyY2FyLWNtbSIsCj4gKwkJLm9mX21h
dGNoX3RhYmxlID0gcmNhcl9jbW1fb2ZfdGFibGUsCj4gKwl9LAoKTm8gbmVlZCBmb3Igc3VzcGVu
ZC9yZXN1bWUgc3VwcG9ydCA/IFRoZSBEVSBkcml2ZXIgc2hvdWxkIGRpc2FibGUvZW5hYmxlCnRo
ZSBDTU0gaW4gaXRzIHN1c3BlbmQvcmVzdW1lIHBhdGhzLCBzbyB0aGlzIHNob3VsZCBiZSBmaW5l
LCBidXQgd29uJ3QKdGhlIExVVCBjb250ZW50cyBiZSBsb3N0IGFuZCBuZWVkIHRvIGJlIHJlc3Rv
cmVkID8KCj4gK307Cj4gKwo+ICttb2R1bGVfcGxhdGZvcm1fZHJpdmVyKHJjYXJfY21tX3BsYXRm
b3JtX2RyaXZlcik7Cj4gKwo+ICtNT0RVTEVfQVVUSE9SKCJKYWNvcG8gTW9uZGkgPGphY29wbyty
ZW5lc2FzQGptb25kaS5vcmciKTsKCk1pc3NpbmcgPi4KCj4gK01PRFVMRV9ERVNDUklQVElPTigi
UmVuZXNhcyBSLUNhciBDTU0gRHJpdmVyIik7Cj4gK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JjYXItZHUvcmNhcl9jbW0uaCBiL2RyaXZl
cnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfY21tLmgKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGlu
ZGV4IDAwMDAwMDAwMDAwMC4uZGE2MWExNDVkYzVjCj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9yY2FyLWR1L3JjYXJfY21tLmgKPiBAQCAtMCwwICsxLDM4IEBACj4gKy8q
IFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wKyAqLwoKVGhlIC5jIGFuZCAuaCBmaWxl
IGxpY2Vuc2VzIGRvbid0IG1hdGNoLgoKPiArLyoKPiArICogcmNhcl9jbW0uaCAtLSBSLUNhciBE
aXNwbGF5IFVuaXQgQ29sb3IgTWFuYWdlbWVudCBNb2R1bGUKPiArICoKPiArICogQ29weXJpZ2h0
IChDKSAyMDE5IEphY29wbyBNb25kaSA8amFjb3BvK3JlbmVzYXNAam1vbmRpLm9yZz4KPiArICov
Cj4gKwo+ICsjaWZuZGVmIF9fUkNBUl9DTU1fSF9fCj4gKyNkZWZpbmUgX19SQ0FSX0NNTV9IX18K
PiArCj4gKyNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kZXZpY2UuaD4KCllvdSBjYW4gZm9yd2Fy
ZC1kZWNsYXJlIHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgaW5zdGVhZC4KCj4gKwo+ICsjZGVmaW5l
IENNTV9HQU1NQV9MVVRfU0laRQkJMjU2Cj4gKwo+ICtzdHJ1Y3QgZHJtX2NvbG9yX2x1dDsKPiAr
Cj4gKy8qKgo+ICsgKiBzdHJ1Y3QgcmNhcl9jbW1fY29uZmlnIC0gQ01NIGNvbmZpZ3VyYXRpb24K
PiArICoKPiArICogQGx1dDoJMUQtTFVUIGNvbmZpZ3VyYXRpb24KPiArICogQGx1dC5lbmFibGU6
CTFELUxVVCBlbmFibGUgZmxhZwo+ICsgKiBAbHV0LnRhYmxlOgkxRC1MVVQgdGFibGUgZW50cmll
cy4KPiArICogQGx1dC5zaXplCTFELUxVVCBudW1iZXIgb2YgZW50cmllcy4gTWF4IGlzIDI1NgoK
VGhlIGxhc3QgbGluZSBpcyBtaXNzaW5nIGEgY29sb24uCgo+ICsgKi8KPiArc3RydWN0IHJjYXJf
Y21tX2NvbmZpZyB7Cj4gKwlzdHJ1Y3Qgewo+ICsJCWJvb2wgZW5hYmxlOwo+ICsJCXN0cnVjdCBk
cm1fY29sb3JfbHV0ICp0YWJsZTsKPiArCQl1bnNpZ25lZCBpbnQgc2l6ZTsKPiArCX0gbHV0Owo+
ICt9Owo+ICsKPiAraW50IHJjYXJfY21tX2VuYWJsZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICop
OwoKQXMgdGhlIE9GIEFQSSBsb29rcyB1cCBhIHN0cnVjdCBkZXZpY2UgZnJvbSBhIGRldmljZV9u
b2RlLCBzaG91bGQgd2UgdXNlCnN0cnVjdCBkZXZpY2UgaGVyZSA/Cgo+ICt2b2lkIHJjYXJfY21t
X2Rpc2FibGUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqKTsKCkkgZmluZCBoZWFkZXJzIG1vcmUg
cmVhZGFibGUgd2hlbiBmdW5jdGlvbiBhcmd1bWVudHMgYXJlIG5hbWVkLiBJbiB0aGlzCmNhc2Ug
dGhlIHR5cGVzIHByb2JhYmx5IHByb3ZpZGUgZW5vdWdoIGluZm9ybWF0aW9uLCBidXQgZ29vZCBs
dWNrIHRyeWluZwp0byByZWFkIGEgZnVuY3Rpb24gc3VjaCBhcwoKaW50IGZvbyhpbnQsIGludCwg
Ym9vbCk7Cgo+ICsKPiAraW50IHJjYXJfY21tX3NldHVwKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2Ug
Kiwgc3RydWN0IHJjYXJfY21tX2NvbmZpZyAqKTsKCkNhbiB0aGUgc2Vjb25kIGFyZ3VtZW50IGJl
IGNvbnN0ID8KCj4gKwo+ICsjZW5kaWYgLyogX19SQ0FSX0NNTV9IX18gKi8KCi0tIApSZWdhcmRz
LAoKTGF1cmVudCBQaW5jaGFydApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9k
cmktZGV2ZWw=
