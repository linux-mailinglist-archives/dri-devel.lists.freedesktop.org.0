Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 49478615E9
	for <lists+dri-devel@lfdr.de>; Sun,  7 Jul 2019 20:27:18 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1DC5289B18;
	Sun,  7 Jul 2019 18:27:16 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [213.167.242.64])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7B7BD89B18
 for <dri-devel@lists.freedesktop.org>; Sun,  7 Jul 2019 18:27:14 +0000 (UTC)
Received: from pendragon.nordic-sky.finnair.com (unknown [38.98.37.142])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 34AB2CC;
 Sun,  7 Jul 2019 20:26:51 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 20/60] drm/panel: Add driver for the NEC NL8048HL11 panel
Date: Sun,  7 Jul 2019 21:18:57 +0300
Message-Id: <20190707181937.6250-17-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190707181937.6250-1-laurent.pinchart@ideasonboard.com>
References: <20190707180852.5512-1-laurent.pinchart@ideasonboard.com>
 <20190707181937.6250-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1562524033;
 bh=rN1rb8KPUARTv3HOyb3bdoxcuY5VKo2TZMPyA98uYuM=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=NNFvKDxmDvmuWPIZqqto4COll4Ljcgn8Q2ZsQx6G37a+FKzxC96D3nxdVdvAHn8Jz
 U6AtDflDiq0YI2GAy9mYvj8Yyd2R7nw/NM0Xa+XVByhyGj6mxNXYAey63RgcK8jvlM
 m+30zUTlHEmeWT6J3SSZRkhVW9D4Pqwscv3WCzyw=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Maxime Ripard <maxime.ripard@bootlin.com>, Sam Ravnborg <sam@ravnborg.org>,
 Sebastian Reichel <sebastian.reichel@collabora.com>,
 Tomi Valkeinen <tomi.valkeinen@ti.com>,
 Thierry Reding <thierry.reding@gmail.com>, Sean Paul <sean@poorly.run>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYW5lbCBpcyB1c2VkIG9uIHRoZSBab29tMi8zLzM2MzAgU0RQIGJvYXJkcy4KClNpZ25l
ZC1vZmYtYnk6IExhdXJlbnQgUGluY2hhcnQgPGxhdXJlbnQucGluY2hhcnRAaWRlYXNvbmJvYXJk
LmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vcGFuZWwvS2NvbmZpZyAgICAgICAgICAgICAgICB8
ICAgNyArCiBkcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUgICAgICAgICAgICAgICB8ICAg
MSArCiBkcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtbmVjLW5sODA0OGhsMTEuYyB8IDI0OSAr
KysrKysrKysrKysrKysrKysrCiAzIGZpbGVzIGNoYW5nZWQsIDI1NyBpbnNlcnRpb25zKCspCiBj
cmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLW5lYy1ubDgwNDho
bDExLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvS2NvbmZpZyBiL2RyaXZl
cnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnCmluZGV4IDE4NDMxMzVjYmViMS4uZGE2MTNjMDRiODM1
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvS2NvbmZpZworKysgYi9kcml2ZXJz
L2dwdS9kcm0vcGFuZWwvS2NvbmZpZwpAQCAtMTE4LDYgKzExOCwxMyBAQCBjb25maWcgRFJNX1BB
TkVMX0xHX0xHNDU3MwogCSAgU2F5IFkgaGVyZSBpZiB5b3Ugd2FudCB0byBlbmFibGUgc3VwcG9y
dCBmb3IgTEc0NTczIFJHQiBwYW5lbC4KIAkgIFRvIGNvbXBpbGUgdGhpcyBkcml2ZXIgYXMgYSBt
b2R1bGUsIGNob29zZSBNIGhlcmUuCiAKK2NvbmZpZyBEUk1fUEFORUxfTkVDX05MODA0OEhMMTEK
Kwl0cmlzdGF0ZSAiTkVDIE5MODA0OEhMMTEgUkdCIHBhbmVsIgorCWRlcGVuZHMgb24gR1BJT0xJ
QiAmJiBPRiAmJiBTUEkKKwloZWxwCisJICBTYXkgWSBoZXJlIGlmIHlvdSB3YW50IHRvIGVuYWJs
ZSBzdXBwb3J0IGZvciB0aGUgTkVDIE5MODA0OEhMMTEgUkdCCisJICBwYW5lbC4gVG8gY29tcGls
ZSB0aGlzIGRyaXZlciBhcyBhIG1vZHVsZSwgY2hvb3NlIE0gaGVyZS4KKwogY29uZmlnIERSTV9Q
QU5FTF9PTElNRVhfTENEX09MSU5VWElOTwogCXRyaXN0YXRlICJPbGltZXggTENELU9MaW51WGlu
byBwYW5lbCIKIAlkZXBlbmRzIG9uIE9GCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFu
ZWwvTWFrZWZpbGUgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKaW5kZXggNjc1YjU2
OTZjNjg1Li5lODFlZDE1MzUwMjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9N
YWtlZmlsZQorKysgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvTWFrZWZpbGUKQEAgLTEwLDYgKzEw
LDcgQEAgb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9KRElfTFQwNzBNRTA1MDAwKSArPSBwYW5lbC1q
ZGktbHQwNzBtZTA1MDAwLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfS0lOR0RJU1BMQVlfS0Qw
OTdEMDQpICs9IHBhbmVsLWtpbmdkaXNwbGF5LWtkMDk3ZDA0Lm8KIG9iai0kKENPTkZJR19EUk1f
UEFORUxfTEdfTEIwMzVRMDIpICs9IHBhbmVsLWxnLWxiMDM1cTAyLm8KIG9iai0kKENPTkZJR19E
Uk1fUEFORUxfTEdfTEc0NTczKSArPSBwYW5lbC1sZy1sZzQ1NzMubworb2JqLSQoQ09ORklHX0RS
TV9QQU5FTF9ORUNfTkw4MDQ4SEwxMSkgKz0gcGFuZWwtbmVjLW5sODA0OGhsMTEubwogb2JqLSQo
Q09ORklHX0RSTV9QQU5FTF9PTElNRVhfTENEX09MSU5VWElOTykgKz0gcGFuZWwtb2xpbWV4LWxj
ZC1vbGludXhpbm8ubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9PUklTRVRFQ0hfT1RNODAwOUEp
ICs9IHBhbmVsLW9yaXNldGVjaC1vdG04MDA5YS5vCiBvYmotJChDT05GSUdfRFJNX1BBTkVMX09T
RF9PU0QxMDFUMjU4N181M1RTKSArPSBwYW5lbC1vc2Qtb3NkMTAxdDI1ODctNTN0cy5vCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFuZWwvcGFuZWwtbmVjLW5sODA0OGhsMTEuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9wYW5lbC9wYW5lbC1uZWMtbmw4MDQ4aGwxMS5jCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uOTlkYTY2NWQ5YjRiCi0tLSAvZGV2L251bGwKKysr
IGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3BhbmVsLW5lYy1ubDgwNDhobDExLmMKQEAgLTAsMCAr
MSwyNDkgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wKworLyoKKyAqIE5F
QyBOTDgwNDhITDExIFBhbmVsIERyaXZlcgorICoKKyAqIENvcHlyaWdodCAoQykgMjAxOSBUZXhh
cyBJbnN0cnVtZW50cyBJbmNvcnBvcmF0ZWQKKyAqCisgKiBCYXNlZCBvbiB0aGUgb21hcGRybS1z
cGVjaWZpYyBwYW5lbC1uZWMtbmw4MDQ4aGwxMSBkcml2ZXIKKyAqCisgKiBDb3B5cmlnaHQgKEMp
IDIwMTAgVGV4YXMgSW5zdHJ1bWVudHMgSW5jb3Jwb3JhdGVkCisgKiBBdXRob3I6IEVyaWsgR2ls
bGluZyA8a29ua2Vyc0BhbmRyb2lkLmNvbT4KKyAqLworCisjaW5jbHVkZSA8bGludXgvZGVsYXku
aD4KKyNpbmNsdWRlIDxsaW51eC9ncGlvL2NvbnN1bWVyLmg+CisjaW5jbHVkZSA8bGludXgvbW9k
dWxlLmg+CisjaW5jbHVkZSA8bGludXgvcG0uaD4KKyNpbmNsdWRlIDxsaW51eC9zcGkvc3BpLmg+
CisKKyNpbmNsdWRlIDxkcm0vZHJtX2Nvbm5lY3Rvci5oPgorI2luY2x1ZGUgPGRybS9kcm1fbW9k
ZXMuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX3BhbmVsLmg+CisKK3N0cnVjdCBubDgwNDhfZGV2aWNl
IHsKKwlzdHJ1Y3QgZHJtX3BhbmVsIHBhbmVsOworCisJc3RydWN0IHNwaV9kZXZpY2UgKnNwaTsK
KwlzdHJ1Y3QgZ3Bpb19kZXNjICpyZXNldF9ncGlvOworfTsKKworI2RlZmluZSB0b19ubDgwNDhf
ZGV2aWNlKHApIGNvbnRhaW5lcl9vZihwLCBzdHJ1Y3Qgbmw4MDQ4X2RldmljZSwgcGFuZWwpCisK
K3N0YXRpYyBpbnQgbmw4MDQ4X3dyaXRlKHN0cnVjdCBubDgwNDhfZGV2aWNlICpsY2QsIHVuc2ln
bmVkIGNoYXIgYWRkciwKKwkJCXVuc2lnbmVkIGNoYXIgdmFsdWUpCit7CisJdTggZGF0YVs0XSA9
IHsgdmFsdWUsIDB4MDEsIGFkZHIsIDB4MDAgfTsKKwlpbnQgcmV0OworCisJcmV0ID0gc3BpX3dy
aXRlKGxjZC0+c3BpLCBkYXRhLCBzaXplb2YoZGF0YSkpOworCWlmIChyZXQpCisJCWRldl9lcnIo
JmxjZC0+c3BpLT5kZXYsICJTUEkgd3JpdGUgdG8gJXUgZmFpbGVkOiAlZFxuIiwKKwkJCWFkZHIs
IHJldCk7CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IG5sODA0OF9pbml0KHN0cnVj
dCBubDgwNDhfZGV2aWNlICpsY2QpCit7CisJc3RhdGljIGNvbnN0IHN0cnVjdCB7CisJCXVuc2ln
bmVkIGNoYXIgYWRkcjsKKwkJdW5zaWduZWQgY2hhciBkYXRhOworCX0gbmw4MDQ4X2luaXRfc2Vx
W10gPSB7CisJCXsgICAzLCAweDAxIH0sIHsgICAwLCAweDAwIH0sIHsgICAxLCAweDAxIH0sIHsg
ICA0LCAweDAwIH0sCisJCXsgICA1LCAweDE0IH0sIHsgICA2LCAweDI0IH0sIHsgIDE2LCAweGQ3
IH0sIHsgIDE3LCAweDAwIH0sCisJCXsgIDE4LCAweDAwIH0sIHsgIDE5LCAweDU1IH0sIHsgIDIw
LCAweDAxIH0sIHsgIDIxLCAweDcwIH0sCisJCXsgIDIyLCAweDFlIH0sIHsgIDIzLCAweDI1IH0s
IHsgIDI0LCAweDI1IH0sIHsgIDI1LCAweDAyIH0sCisJCXsgIDI2LCAweDAyIH0sIHsgIDI3LCAw
eGEwIH0sIHsgIDMyLCAweDJmIH0sIHsgIDMzLCAweDBmIH0sCisJCXsgIDM0LCAweDBmIH0sIHsg
IDM1LCAweDBmIH0sIHsgIDM2LCAweDBmIH0sIHsgIDM3LCAweDBmIH0sCisJCXsgIDM4LCAweDBm
IH0sIHsgIDM5LCAweDAwIH0sIHsgIDQwLCAweDAyIH0sIHsgIDQxLCAweDAyIH0sCisJCXsgIDQy
LCAweDAyIH0sIHsgIDQzLCAweDBmIH0sIHsgIDQ0LCAweDBmIH0sIHsgIDQ1LCAweDBmIH0sCisJ
CXsgIDQ2LCAweDBmIH0sIHsgIDQ3LCAweDBmIH0sIHsgIDQ4LCAweDBmIH0sIHsgIDQ5LCAweDBm
IH0sCisJCXsgIDUwLCAweDAwIH0sIHsgIDUxLCAweDAyIH0sIHsgIDUyLCAweDAyIH0sIHsgIDUz
LCAweDAyIH0sCisJCXsgIDgwLCAweDBjIH0sIHsgIDgzLCAweDQyIH0sIHsgIDg0LCAweDQyIH0s
IHsgIDg1LCAweDQxIH0sCisJCXsgIDg2LCAweDE0IH0sIHsgIDg5LCAweDg4IH0sIHsgIDkwLCAw
eDAxIH0sIHsgIDkxLCAweDAwIH0sCisJCXsgIDkyLCAweDAyIH0sIHsgIDkzLCAweDBjIH0sIHsg
IDk0LCAweDFjIH0sIHsgIDk1LCAweDI3IH0sCisJCXsgIDk4LCAweDQ5IH0sIHsgIDk5LCAweDI3
IH0sIHsgMTAyLCAweDc2IH0sIHsgMTAzLCAweDI3IH0sCisJCXsgMTEyLCAweDAxIH0sIHsgMTEz
LCAweDBlIH0sIHsgMTE0LCAweDAyIH0sIHsgMTE1LCAweDBjIH0sCisJCXsgMTE4LCAweDBjIH0s
IHsgMTIxLCAweDMwIH0sIHsgMTMwLCAweDAwIH0sIHsgMTMxLCAweDAwIH0sCisJCXsgMTMyLCAw
eGZjIH0sIHsgMTM0LCAweDAwIH0sIHsgMTM2LCAweDAwIH0sIHsgMTM4LCAweDAwIH0sCisJCXsg
MTM5LCAweDAwIH0sIHsgMTQwLCAweDAwIH0sIHsgMTQxLCAweGZjIH0sIHsgMTQzLCAweDAwIH0s
CisJCXsgMTQ1LCAweDAwIH0sIHsgMTQ3LCAweDAwIH0sIHsgMTQ4LCAweDAwIH0sIHsgMTQ5LCAw
eDAwIH0sCisJCXsgMTUwLCAweGZjIH0sIHsgMTUyLCAweDAwIH0sIHsgMTU0LCAweDAwIH0sIHsg
MTU2LCAweDAwIH0sCisJCXsgMTU3LCAweDAwIH0sCisJfTsKKworCXVuc2lnbmVkIGludCBpOwor
CWludCByZXQ7CisKKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShubDgwNDhfaW5pdF9zZXEp
OyArK2kpIHsKKwkJcmV0ID0gbmw4MDQ4X3dyaXRlKGxjZCwgbmw4MDQ4X2luaXRfc2VxW2ldLmFk
ZHIsCisJCQkJICAgbmw4MDQ4X2luaXRfc2VxW2ldLmRhdGEpOworCQlpZiAocmV0IDwgMCkKKwkJ
CXJldHVybiByZXQ7CisJfQorCisJdWRlbGF5KDIwKTsKKworCXJldHVybiBubDgwNDhfd3JpdGUo
bGNkLCAyLCAweDAwKTsKK30KKworc3RhdGljIGludCBubDgwNDhfZGlzYWJsZShzdHJ1Y3QgZHJt
X3BhbmVsICpwYW5lbCkKK3sKKwlzdHJ1Y3Qgbmw4MDQ4X2RldmljZSAqbGNkID0gdG9fbmw4MDQ4
X2RldmljZShwYW5lbCk7CisKKwlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAobGNkLT5yZXNldF9n
cGlvLCAwKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IG5sODA0OF9lbmFibGUoc3Ry
dWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJc3RydWN0IG5sODA0OF9kZXZpY2UgKmxjZCA9IHRv
X25sODA0OF9kZXZpY2UocGFuZWwpOworCisJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGxjZC0+
cmVzZXRfZ3BpbywgMSk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBk
cm1fZGlzcGxheV9tb2RlIG5sODA0OF9tb2RlID0geworCS8qICBORUMgUElYIENsb2NrIFJhdGlu
Z3MgTUlOOjIxLjhNSHogVFlQOjIzLjhNSHogTUFYOjI1LjdNSHogKi8KKwkuY2xvY2sJPSAyMzgw
MCwKKwkuaGRpc3BsYXkgPSA4MDAsCisJLmhzeW5jX3N0YXJ0ID0gODAwICsgNiwKKwkuaHN5bmNf
ZW5kID0gODAwICsgNiArIDEsCisJLmh0b3RhbCA9IDgwMCArIDYgKyAxICsgNCwKKwkudmRpc3Bs
YXkgPSA0ODAsCisJLnZzeW5jX3N0YXJ0ID0gNDgwICsgMywKKwkudnN5bmNfZW5kID0gNDgwICsg
MyArIDEsCisJLnZ0b3RhbCA9IDQ4MCArIDMgKyAxICsgNCwKKwkudnJlZnJlc2ggPSA2MCwKKwku
dHlwZSA9IERSTV9NT0RFX1RZUEVfRFJJVkVSIHwgRFJNX01PREVfVFlQRV9QUkVGRVJSRUQsCisJ
LmZsYWdzID0gRFJNX01PREVfRkxBR19OSFNZTkMgfCBEUk1fTU9ERV9GTEFHX05WU1lOQywKK307
CisKK3N0YXRpYyBpbnQgbmw4MDQ4X2dldF9tb2RlcyhzdHJ1Y3QgZHJtX3BhbmVsICpwYW5lbCkK
K3sKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yID0gcGFuZWwtPmNvbm5lY3RvcjsK
KwlzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZTsKKworCW1vZGUgPSBkcm1fbW9kZV9kdXBs
aWNhdGUocGFuZWwtPmRybSwgJm5sODA0OF9tb2RlKTsKKwlpZiAoIW1vZGUpCisJCXJldHVybiAt
RU5PTUVNOworCisJZHJtX21vZGVfc2V0X25hbWUobW9kZSk7CisJZHJtX21vZGVfcHJvYmVkX2Fk
ZChjb25uZWN0b3IsIG1vZGUpOworCisJY29ubmVjdG9yLT5kaXNwbGF5X2luZm8ud2lkdGhfbW0g
PSA4OTsKKwljb25uZWN0b3ItPmRpc3BsYXlfaW5mby5oZWlnaHRfbW0gPSA1MzsKKwljb25uZWN0
b3ItPmRpc3BsYXlfaW5mby5idXNfZmxhZ3MgPSBEUk1fQlVTX0ZMQUdfREVfSElHSAorCQkJCQkg
IHwgRFJNX0JVU19GTEFHX1NZTkNfU0FNUExFX05FR0VER0UKKwkJCQkJICB8IERSTV9CVVNfRkxB
R19QSVhEQVRBX1NBTVBMRV9ORUdFREdFOworCisJcmV0dXJuIDE7Cit9CisKK3N0YXRpYyBjb25z
dCBzdHJ1Y3QgZHJtX3BhbmVsX2Z1bmNzIG5sODA0OF9mdW5jcyA9IHsKKwkuZGlzYWJsZSA9IG5s
ODA0OF9kaXNhYmxlLAorCS5lbmFibGUgPSBubDgwNDhfZW5hYmxlLAorCS5nZXRfbW9kZXMgPSBu
bDgwNDhfZ2V0X21vZGVzLAorfTsKKworI2lmZGVmIENPTkZJR19QTV9TTEVFUAorc3RhdGljIGlu
dCBubDgwNDhfc3VzcGVuZChzdHJ1Y3QgZGV2aWNlICpkZXYpCit7CisJc3RydWN0IG5sODA0OF9k
ZXZpY2UgKmxjZCA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOworCisJbmw4MDQ4X3dyaXRlKGxjZCwg
MiwgMHgwMSk7CisJbXNsZWVwKDQwKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IG5s
ODA0OF9yZXN1bWUoc3RydWN0IGRldmljZSAqZGV2KQoreworCXN0cnVjdCBubDgwNDhfZGV2aWNl
ICpsY2QgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKKworCS8qIFJlaW5pdGlhbGl6ZSB0aGUgcGFu
ZWwuICovCisJc3BpX3NldHVwKGxjZC0+c3BpKTsKKwlubDgwNDhfd3JpdGUobGNkLCAyLCAweDAw
KTsKKwlubDgwNDhfaW5pdChsY2QpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBTSU1QTEVf
REVWX1BNX09QUyhubDgwNDhfcG1fb3BzLCBubDgwNDhfc3VzcGVuZCwgbmw4MDQ4X3Jlc3VtZSk7
CisjZW5kaWYKKworc3RhdGljIGludCBubDgwNDhfcHJvYmUoc3RydWN0IHNwaV9kZXZpY2UgKnNw
aSkKK3sKKwlzdHJ1Y3Qgbmw4MDQ4X2RldmljZSAqbGNkOworCWludCByZXQ7CisKKwlsY2QgPSBk
ZXZtX2t6YWxsb2MoJnNwaS0+ZGV2LCBzaXplb2YoKmxjZCksIEdGUF9LRVJORUwpOworCWlmIChs
Y2QgPT0gTlVMTCkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlzcGlfc2V0X2RydmRhdGEoc3BpLCBs
Y2QpOworCWxjZC0+c3BpID0gc3BpOworCisJbGNkLT5yZXNldF9ncGlvID0gZGV2bV9ncGlvZF9n
ZXQoJnNwaS0+ZGV2LCAicmVzZXQiLCBHUElPRF9PVVRfTE9XKTsKKwlpZiAoSVNfRVJSKGxjZC0+
cmVzZXRfZ3BpbykpIHsKKwkJZGV2X2Vycigmc3BpLT5kZXYsICJmYWlsZWQgdG8gcGFyc2UgcmVz
ZXQgZ3Bpb1xuIik7CisJCXJldHVybiBQVFJfRVJSKGxjZC0+cmVzZXRfZ3Bpbyk7CisJfQorCisJ
c3BpLT5tb2RlID0gU1BJX01PREVfMDsKKwlzcGktPmJpdHNfcGVyX3dvcmQgPSAzMjsKKworCXJl
dCA9IHNwaV9zZXR1cChzcGkpOworCWlmIChyZXQgPCAwKSB7CisJCWRldl9lcnIoJnNwaS0+ZGV2
LCAiZmFpbGVkIHRvIHNldHVwIFNQSTogJWRcbiIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQor
CisJcmV0ID0gbmw4MDQ4X2luaXQobGNkKTsKKwlpZiAocmV0IDwgMCkKKwkJcmV0dXJuIHJldDsK
KworCWRybV9wYW5lbF9pbml0KCZsY2QtPnBhbmVsKTsKKwlsY2QtPnBhbmVsLmRldiA9ICZsY2Qt
PnNwaS0+ZGV2OworCWxjZC0+cGFuZWwuZnVuY3MgPSAmbmw4MDQ4X2Z1bmNzOworCisJcmV0dXJu
IGRybV9wYW5lbF9hZGQoJmxjZC0+cGFuZWwpOworfQorCitzdGF0aWMgaW50IG5sODA0OF9yZW1v
dmUoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSkKK3sKKwlzdHJ1Y3Qgbmw4MDQ4X2RldmljZSAqbGNk
ID0gc3BpX2dldF9kcnZkYXRhKHNwaSk7CisKKwlkcm1fcGFuZWxfcmVtb3ZlKCZsY2QtPnBhbmVs
KTsKKwlubDgwNDhfZGlzYWJsZSgmbGNkLT5wYW5lbCk7CisKKwlyZXR1cm4gMDsKK30KKworc3Rh
dGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgbmw4MDQ4X29mX21hdGNoW10gPSB7CisJeyAu
Y29tcGF0aWJsZSA9ICJuZWMsbmw4MDQ4aGwxMSIsIH0sCisJe30sCit9OworCitNT0RVTEVfREVW
SUNFX1RBQkxFKG9mLCBubDgwNDhfb2ZfbWF0Y2gpOworCitzdGF0aWMgc3RydWN0IHNwaV9kcml2
ZXIgbmw4MDQ4X2RyaXZlciA9IHsKKwkucHJvYmUJCT0gbmw4MDQ4X3Byb2JlLAorCS5yZW1vdmUJ
CT0gbmw4MDQ4X3JlbW92ZSwKKwkuZHJpdmVyCQk9IHsKKwkJLm5hbWUJPSAicGFuZWwtbmVjLW5s
ODA0OGhsMTEiLAorI2lmZGVmIENPTkZJR19QTV9TTEVFUAorCQkucG0JPSAmbmw4MDQ4X3BtX29w
cywKKyNlbmRpZgorCQkub2ZfbWF0Y2hfdGFibGUgPSBubDgwNDhfb2ZfbWF0Y2gsCisJfSwKK307
CisKK21vZHVsZV9zcGlfZHJpdmVyKG5sODA0OF9kcml2ZXIpOworCitNT0RVTEVfQUxJQVMoInNw
aTpuZWMsbmw4MDQ4aGwxMSIpOworTU9EVUxFX0FVVEhPUigiRXJpayBHaWxsaW5nIDxrb25rZXJz
QGFuZHJvaWQuY29tPiIpOworTU9EVUxFX0RFU0NSSVBUSU9OKCJORUMtTkw4MDQ4SEwxMSBEcml2
ZXIiKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwiKTsKLS0gClJlZ2FyZHMsCgpMYXVyZW50IFBpbmNo
YXJ0CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmkt
ZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
