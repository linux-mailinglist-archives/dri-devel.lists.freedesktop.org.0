Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 5708FF0337
	for <lists+dri-devel@lfdr.de>; Tue,  5 Nov 2019 17:44:32 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 33C346EB03;
	Tue,  5 Nov 2019 16:44:30 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 596576EB03
 for <dri-devel@lists.freedesktop.org>; Tue,  5 Nov 2019 16:44:28 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id B8634ABA0;
 Tue,  5 Nov 2019 16:44:26 +0000 (UTC)
Date: Tue, 05 Nov 2019 17:44:26 +0100
Message-ID: <s5heeymtgr9.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Russell King - ARM Linux admin <linux@armlinux.org.uk>
Subject: Re: Incorrect buffer handling in dw-hdmi bridge audio
In-Reply-To: <s5hh83ith93.wl-tiwai@suse.de>
References: <s5heeymbvva.wl-tiwai@suse.de>
 <6ad19121-c0e3-d278-2943-ff93ef80353b@baylibre.com>
 <20191105160215.GQ25745@shell.armlinux.org.uk>
 <s5hh83ith93.wl-tiwai@suse.de>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jernej Skrabec <jernej.skrabec@siol.net>, Jonas Karlman <jonas@kwiboo.se>,
 Neil Armstrong <narmstrong@baylibre.com>, alsa-devel@alsa-project.org,
 dri-devel@lists.freedesktop.org,
 Laurent Pinchart <Laurent.pinchart@ideasonboard.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCAwNSBOb3YgMjAxOSAxNzozMzo0NCArMDEwMCwKVGFrYXNoaSBJd2FpIHdyb3RlOgo+
IAo+IE9uIFR1ZSwgMDUgTm92IDIwMTkgMTc6MDI6MTUgKzAxMDAsCj4gUnVzc2VsbCBLaW5nIC0g
QVJNIExpbnV4IGFkbWluIHdyb3RlOgo+ID4gCj4gPiBPbiBUdWUsIE5vdiAwNSwgMjAxOSBhdCAw
OTowNzo0M0FNICswMTAwLCBOZWlsIEFybXN0cm9uZyB3cm90ZToKPiA+ID4gSGksCj4gPiA+IAo+
ID4gPiBPbiAwNS8xMS8yMDE5IDA4OjU1LCBUYWthc2hpIEl3YWkgd3JvdGU6Cj4gPiA+ID4gSGks
Cj4gPiA+ID4gCj4gPiA+ID4gd2hpbGUgcmVjZW50bHkgd29ya2luZyBvbiB0aGUgQUxTQSBtZW1v
cnkgYWxsb2NhdG9yIEFQSSBjbGVhbnVwLCBJCj4gPiA+ID4gbm90aWNlZCB0aGF0IGR3LWhkbWkg
YnJpZGdlIGRyaXZlciBzZWVtcyBkb2luZyB3ZWlyZCBhYm91dCB0aGUgYnVmZmVyCj4gPiA+ID4g
bWFuYWdlbWVudC4gIEl0IHByZS1hbGxvY2F0ZXMgdGhlIHVzdWFsIGRldmljZSBidWZmZXJzIGZ1
bGx5IGF0IHRoZQo+ID4gPiA+IHByb2JlIHRpbWUsIHdoaWxlIGVhY2ggc3RyZWFtIGFsbG9jYXRl
cyB0aGUgYnVmZmVyIHZpYSB0aGUgdm1hbGxvYwo+ID4gPiA+IGhlbHBlcnMgYW5kIHJlcGxhY2Vz
IHdpdGggaXQgYXQgZWFjaCBvcGVuLgo+ID4gPiA+IAo+ID4gPiA+IEkgZ3Vlc3MgaXQncyBubyBl
eHBlY3RlZCBiZWhhdmlvcj8gIEl0J3MgYmFzaWNhbGx5IGEgZnVsbCB3YXN0ZSBvZgo+ID4gPiA+
IHJlc291cmNlcywgYW5kIHRoZSB2bWFsbG9jIGJ1ZmZlciBpc24ndCBndWFyYW50ZWVkIHRvIHdv
cmsgd2VsbCBmb3IKPiA+ID4gPiBtbWFwIG9uIGV2ZXJ5IGFyY2hpdGVjdHVyZS4KPiA+ID4gPiAK
PiA+ID4gPiBCZWxvdyBpcyB0aGUgcGF0Y2ggdG8gYWRkcmVzcyBpdC4gIENhbiBhbnlvbmUgY2hl
Y2sgd2hldGhlciB0aGlzIHN0aWxsCj4gPiA+ID4gd29ya3M/Cj4gPiA+IAo+ID4gPiBJIGRvbid0
IGhhdmUgdGhlIHNldHVwIHRvIGNoZWNrLCBidXQgdGhpcyBoYXMgYmVlbiBwdXNoZWQgYnkgUnVz
c2VsbCBJIEFkZGVkIGluIENDLgo+ID4gPiAKPiA+ID4gSSBhbHNvIGFkZGVkIHRoZSBpbXggbWFp
bnRhaW5lciBzaW5jZSBpdCdzIChBRkFJSykgb25seSB1c2VkIG9uIGlNWCBTb0NzLgo+ID4gPiAK
PiA+ID4gTmVpbAo+ID4gPiAKPiA+ID4gPiAKPiA+ID4gPiBTaW5jZSBJIGhhdmUgYSBjbGVhbnVw
IHNlcmllcyBhbmQgdGhpcyBpcyBpbnZvbHZlZCwgSSdkIGxpa2UgdG8gdGFrZQo+ID4gPiA+IHRo
ZSBmaXggdGhyb3VnaCBteSB0cmVlIG9uY2UgYWZ0ZXIgaXQncyBjb25maXJtZWQgKGFuZCBnZXQg
QUNLIGlmCj4gPiA+ID4gcG9zc2libGUpLgo+ID4gPiA+IAo+ID4gPiA+IAo+ID4gPiA+IFRoYW5r
cyEKPiA+ID4gPiAKPiA+ID4gPiBUYWthc2hpCj4gPiA+ID4gCj4gPiA+ID4gLS0gODwgLS0KPiA+
ID4gPiBGcm9tOiBUYWthc2hpIEl3YWkgPHRpd2FpQHN1c2UuZGU+Cj4gPiA+ID4gU3ViamVjdDog
W1BBVENIXSBkcm0vYnJpZGdlOiBkdy1oZG1pOiBGaXggdGhlIGluY29ycmVjdCBidWZmZXIgYWxs
b2NhdGlvbnMKPiA+ID4gPiAKPiA+ID4gPiBUaGUgZHJpdmVyIHNldHMgdXAgdGhlIGJ1ZmZlciBw
cmVhbGxvY2F0aW9uIHdpdGggU05EUlZfRE1BX1RZUEVfREVWLAo+ID4gPiA+IHdoaWxlIGl0IHJl
LWFsbG9jYXRlcyBhbmQgcmVsZWFzZXMgdm1hbGxvYyBwYWdlcy4gIFRoaXMgaXMgbm90IG9ubHkg
YQo+ID4gPiA+IGxvdCBvZiB3YXN0ZSByZXNvdXJjZXMgYnV0IGFsc28gY2F1c2VzIHRoZSBtbWFw
IG1hbGZ1bmN0aW9uLgo+ID4gPiA+IAo+ID4gPiA+IENoYW5nZSAvIGRyb3AgdGhlIHZtYWxsb2Mt
cmVsYXRlZCBjb2RlIGFuZCB1c2UgdGhlIHN0YW5kYXJkIGJ1ZmZlcgo+ID4gPiA+IGFsbG9jYXRp
b24gLyByZWxlYXNlIGNvZGUgaW5zdGVhZC4KPiA+IAo+ID4gSSB0aGluayBnZXR0aW5nIHJpZCBv
ZiB0aGUgdm1hbGxvYyBjb2RlIGhlcmUgaXMgYSBtaXN0YWtlIC0gSSBzZWVtIHRvCj4gPiByZW1l
bWJlciB1c2luZyB0aGUgc3RhbmRhcmQgYnVmZmVyIGFsbG9jYXRpb24gY2F1c2VzIGZhaWx1cmVz
LCBkdWUgdG8KPiA+IG1lbW9yeSBmcmFnbWVudGF0aW9uLiAgU2luY2UgdGhlIGhhcmR3YXJlIGlz
IGxpbWl0ZWQgdG8gRE1BIGZyb20gYXQKPiA+IG1vc3Qgb25lIHBhZ2UsIHRoZXJlIGlzIG5vIHJl
YXNvbiBmb3IgdGhpcyBkcml2ZXIgdG8gcmVxdWlyZSBjb250aWd1b3VzCj4gPiBwYWdlcywgaGVu
Y2Ugd2h5IGl0J3MgdXNpbmcgLSBhbmQgc2hvdWxkIHVzZSAtIHZtYWxsb2MgcGFnZXMuICB2bWFs
bG9jCj4gPiBpcyB3YXkga2luZGVyIHRvIHRoZSBNTSBzdWJzeXN0ZW0gdGhhbiB0cnlpbmcgdG8g
cmVxdWVzdCBsYXJnZSBvcmRlcgo+ID4gY29udGlndW91cyBwYWdlcy4KPiA+IAo+ID4gU28sIE5B
SyBvbiB0aGlzIHBhdGNoLgo+IAo+IE9LLCB0aGVuIHdlIHNob3VsZCBkbyBvdGhlciB3YXkgcm91
bmQsIHJhdGhlciBkcm9wIHRoZSBidWZmZXIKPiBwcmVhbGxvY2F0aW9uIGluc3RlYWQuICBDdXJy
ZW50bHkgdm1hbGxvYyBidWZmZXIgaXMgYWx3YXlzIGFsbG9jYXRlZAo+IGF0IGVhY2ggb3BlbiBh
bmQgb3ZlcnJpZGVzIHRoZSBwcmVhbGxvY2F0ZWQgYnVmZmVyLCBzbyB0aGUgd2hvbGUgNjRrCj4g
YW5kIG1vcmUgYXJlIHdhc3RlZCBmb3Igbm8gdXNlLgo+IAo+IChCVFcsIHRoZSBjdXJyZW50IGNv
ZGUgaGFzIHRoaXMgc25pcHBldDoKPiAKPiAJLyogTGltaXQgdGhlIGJ1ZmZlciBzaXplIHRvIHRo
ZSBzaXplIG9mIHRoZSBwcmVhbGxvY2F0ZWQgYnVmZmVyICovCj4gCXJldCA9IHNuZF9wY21faHdf
Y29uc3RyYWludF9taW5tYXgocnVudGltZSwKPiAJCQkJCSAgIFNORFJWX1BDTV9IV19QQVJBTV9C
VUZGRVJfU0laRSwKPiAJCQkJCSAgIDAsIHN1YnN0cmVhbS0+ZG1hX2J1ZmZlci5ieXRlcyk7Cj4g
Cj4gLi4uIGFuZCB0aGlzIHdvdWxkIGhhdmUgdG8gbGltaXQgdGhlIGJ1ZmZlciBzaXplIG9ubHkg
dG8gdGhlCj4gcHJlYWxsb2NhdGVkIHNpemUgLS0gd2hpY2ggZXNzZW50aWFsbHkgbWFrZXMgdGhl
IGFyZ3VtZW50IGFib3ZlCj4gaW52YWxpZC4gIEhvd2V2ZXIsIHRoaXMgY2hlY2sgbG9va3MgYWN0
dWFsbHkgYm9ndXMsIHRoZSBjb25zdHJhaW50Cj4gcGFyYW1ldGVyIHNob3VsZCBiZSBTTkRSVl9Q
Q01fSFdfUEFSQU1fQlVGRkVSX0JZVEVTLCBub3QgX1NJWkUuICBJdAo+IG1pZ2h0IGJlIHRoZSBy
ZWFzb24gaXQgd29ya2VkIHNvbWVob3cuLi4pCj4gCj4gU28gYmVsb3cgaXMgdGhlIHJldmlzZWQg
cGF0Y2guICBDb3VsZCB5b3UgZ3V5cyBjaGVjayBpdCBhZ2Fpbj8KPiAKPiBUaGVyZSBJIGNvcGll
ZCB0aGUgY29tbWVudCBhcyBpcywgYWx0aG91Z2ggdGhlIDUxMmsgbWVudGlvbmVkIHRoZXJlCj4g
bG9va3MgaW5jb25zaXN0ZW50IHdpdGggdGhlIGFjdHVhbCBjb2RlLiAgU2hvdWxkIGl0IGJlIDFN
PwoKLi4uIGFuZCByZWFkaW5nIHRoZSBwYXRjaCBhZ2FpbiwgSSBmb3VuZCB0aGF0IHRoZSBodyBj
b25zdHJhaW50IGNhbGwKY2FuIGJlIGRyb3BwZWQgYXMgd2VsbC4gIFRoZSBkd19oZG1pX2h3IGRl
ZmluaXRpb24gYWxyZWFkeSBjb250YWlucwp0aGUgbWF4IGJ1ZmZlciBzaXplLgoKQmVsb3cgaXMg
dGhlIHJlLXJldmlzZWQgcGF0Y2guICBQbGVhc2UgY2hlY2sgaXQuCgoKdGhhbmtzLAoKVGFrYXNo
aQoKLS0gODwgLS0KRnJvbTogVGFrYXNoaSBJd2FpIDx0aXdhaUBzdXNlLmRlPgpTdWJqZWN0OiBb
UEFUQ0hdIGRybS9icmlkZ2U6IGR3LWhkbWk6IERyb3Agc3VwZXJmbHVvdXMgYnVmZmVyIHByZWFs
bG9jYXRpb24KClRoZSBkcml2ZXIgc2V0cyB1cCB0aGUgYnVmZmVyIHByZWFsbG9jYXRpb24gd2l0
aCBTTkRSVl9ETUFfVFlQRV9ERVYsCndoaWxlIGl0IGFsd2F5cyByZS1hbGxvY2F0ZXMgYW5kIHJl
bGVhc2VzIHZtYWxsb2MgcGFnZXMsIGhlbmNlIHRoZQpwcmVhbGxvY2F0ZWQgcGFnZXMgYXJlIG5l
dmVyIHVzZWQuICBBbHNvLCB0aGUgY3VycmVudCBjb2RlIGNvbnRhaW5zCnRoZSBodyBjb25zdHJh
aW50IHRvIGxpbWl0IHRoZSBidWZmZXIgc2l6ZSB0byB0aGUgcHJlYWxsb2NhdGVkIHNpemUuCkl0
IGRvZXNuJ3Qgd29yayBhcyBleHBlY3RlZCwgaG93ZXZlciwgYmVjYXVzZSBpdCdzIGFwcGx5aW5n
IHRvIGFuCmluY29ycmVjdCBwYXJhbWV0ZXIgKFNORFJWX1BDTV9IV19QQVJBTV9CVUZGRVJfU0la
RSBpbnN0ZWFkIG9mCl9CVUZGRVJfQllURVMpLgoKVGhpcyBwYXRjaCB0cmllcyB0byBhZGRyZXNz
IHRoZXNlIGlzc3VlczogZHJvcCB0aGUgdW5uZWNlc3NhcnkgYnVmZmVyCnByZWFsbG9jYXRpb24g
YW5kIGFsc28gZHJvcCB0aGUgdW5uZWNlc3NhcnkgaHcgY29uc3RyaWFudC4gIFdpdGhvdXQKdGhl
IGJ1ZmZlciBwcmVhbGxvY2F0aW9uLCB0aGUgaHcgY29uc3RyYWludCBiZWNvbWVzIHN1cGVyZmx1
b3VzLCBhcwpkd19oZG1pX2h3IGRlZmluaXRpb24gYWxyZWFkeSBjb250YWlucyB0aGUgYnVmZmVy
IGJ5dGUgc2l6ZQpjb25zdHJhaW50cy4KClNpZ25lZC1vZmYtYnk6IFRha2FzaGkgSXdhaSA8dGl3
YWlAc3VzZS5kZT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LWhkbWkt
YWhiLWF1ZGlvLmMgfCAxNCAtLS0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDE0IGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHct
aGRtaS1haGItYXVkaW8uYyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctaGRt
aS1haGItYXVkaW8uYwppbmRleCAyYjc1Mzk3MDFiNDIuLjI3NzhkNmJjYzE0ZSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1oZG1pLWFoYi1hdWRpby5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9icmlkZ2Uvc3lub3BzeXMvZHctaGRtaS1haGItYXVkaW8uYwpA
QCAtMzM3LDEzICszMzcsNiBAQCBzdGF0aWMgaW50IGR3X2hkbWlfb3BlbihzdHJ1Y3Qgc25kX3Bj
bV9zdWJzdHJlYW0gKnN1YnN0cmVhbSkKIAlpZiAocmV0IDwgMCkKIAkJcmV0dXJuIHJldDsKIAot
CS8qIExpbWl0IHRoZSBidWZmZXIgc2l6ZSB0byB0aGUgc2l6ZSBvZiB0aGUgcHJlYWxsb2NhdGVk
IGJ1ZmZlciAqLwotCXJldCA9IHNuZF9wY21faHdfY29uc3RyYWludF9taW5tYXgocnVudGltZSwK
LQkJCQkJICAgU05EUlZfUENNX0hXX1BBUkFNX0JVRkZFUl9TSVpFLAotCQkJCQkgICAwLCBzdWJz
dHJlYW0tPmRtYV9idWZmZXIuYnl0ZXMpOwotCWlmIChyZXQgPCAwKQotCQlyZXR1cm4gcmV0Owot
CiAJLyogQ2xlYXIgRklGTyAqLwogCXdyaXRlYl9yZWxheGVkKEhETUlfQUhCX0RNQV9DT05GMF9T
V19GSUZPX1JTVCwKIAkJICAgICAgIGJhc2UgKyBIRE1JX0FIQl9ETUFfQ09ORjApOwpAQCAtNTYw
LDEzICs1NTMsNiBAQCBzdGF0aWMgaW50IHNuZF9kd19oZG1pX3Byb2JlKHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYpCiAJc3RybGNweShwY20tPm5hbWUsIERSSVZFUl9OQU1FLCBzaXplb2Yo
cGNtLT5uYW1lKSk7CiAJc25kX3BjbV9zZXRfb3BzKHBjbSwgU05EUlZfUENNX1NUUkVBTV9QTEFZ
QkFDSywgJnNuZF9kd19oZG1pX29wcyk7CiAKLQkvKgotCSAqIFRvIHN1cHBvcnQgOC1jaGFubmVs
IDk2a0h6IGF1ZGlvIHJlbGlhYmx5LCB3ZSBuZWVkIDUxMmsKLQkgKiB0byBzYXRpc2Z5IGFsc2Eg
d2l0aCBvdXIgcmVzdHJpY3RlZCBwZXJpb2QgKEVSUjAwNDMyMykuCi0JICovCi0Jc25kX3BjbV9s
aWJfcHJlYWxsb2NhdGVfcGFnZXNfZm9yX2FsbChwY20sIFNORFJWX0RNQV9UWVBFX0RFViwKLQkJ
CWRldiwgMTI4ICogMTAyNCwgMTAyNCAqIDEwMjQpOwotCiAJcmV0ID0gc25kX2NhcmRfcmVnaXN0
ZXIoY2FyZCk7CiAJaWYgKHJldCA8IDApCiAJCWdvdG8gZXJyOwotLSAKMi4xNi40CgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGlu
ZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
