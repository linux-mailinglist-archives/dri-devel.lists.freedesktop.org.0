Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 1D2AE551638
	for <lists+dri-devel@lfdr.de>; Mon, 20 Jun 2022 12:48:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0EE07113324;
	Mon, 20 Jun 2022 10:48:31 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from smtp-out2.suse.de (smtp-out2.suse.de [195.135.220.29])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4C30111331B
 for <dri-devel@lists.freedesktop.org>; Mon, 20 Jun 2022 10:48:29 +0000 (UTC)
Received: from imap2.suse-dmz.suse.de (imap2.suse-dmz.suse.de [192.168.254.74])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
 key-exchange X25519 server-signature ECDSA (P-521) server-digest SHA512)
 (No client certificate requested)
 by smtp-out2.suse.de (Postfix) with ESMTPS id DDB6D1F86C;
 Mon, 20 Jun 2022 10:48:27 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=suse.de; s=susede2_rsa;
 t=1655722107; h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 in-reply-to:in-reply-to:references:references;
 bh=LrtkkSVTvTymf0oALb3ZPTXPViiqKcAXqej7dl8PZ2w=;
 b=Kq4F+svIYyA3h6AR/HcpZ8Vp0yTE+ReepNYr5vMDk40aCpp+Fv7ZcsbaC5mK7M6ubLKo/P
 BltF4hNeUWzczf1yB8KcCf8fIKcuFUaj8Jm2Vr/57kYCvZXJKyB47hOMCzF5yJx3do8pgU
 9gkDMPJeH/H4EOo86erOtJ1zDyLvgwk=
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=suse.de;
 s=susede2_ed25519; t=1655722107;
 h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 in-reply-to:in-reply-to:references:references;
 bh=LrtkkSVTvTymf0oALb3ZPTXPViiqKcAXqej7dl8PZ2w=;
 b=4gff+/t6WtqtMo9zfA3SjNQRSJoAAMRMzqAPdmpNnrdRwBhc0EIcFy1/+RU6XOHQ4BY1fC
 fmXZXL/hxcMYlsCw==
Received: from imap2.suse-dmz.suse.de (imap2.suse-dmz.suse.de [192.168.254.74])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
 key-exchange X25519 server-signature ECDSA (P-521) server-digest SHA512)
 (No client certificate requested)
 by imap2.suse-dmz.suse.de (Postfix) with ESMTPS id B80F113638;
 Mon, 20 Jun 2022 10:48:27 +0000 (UTC)
Received: from dovecot-director2.suse.de ([192.168.254.65])
 by imap2.suse-dmz.suse.de with ESMTPSA id 7io3K3tQsGJvbAAAMHmgww
 (envelope-from <tzimmermann@suse.de>); Mon, 20 Jun 2022 10:48:27 +0000
Message-ID: <c52cc64c-6d7f-fd77-f6dc-fb88d7ff91d5@suse.de>
Date: Mon, 20 Jun 2022 12:48:27 +0200
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101
 Thunderbird/91.10.0
Subject: Re: [PATCH 13/64] drm/vc4: hvs: Protect device resources after removal
Content-Language: en-US
To: Maxime Ripard <maxime@cerno.tech>, Daniel Vetter
 <daniel.vetter@intel.com>, David Airlie <airlied@linux.ie>,
 Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
References: <20220610092924.754942-1-maxime@cerno.tech>
 <20220610092924.754942-14-maxime@cerno.tech>
From: Thomas Zimmermann <tzimmermann@suse.de>
In-Reply-To: <20220610092924.754942-14-maxime@cerno.tech>
Content-Type: multipart/signed; micalg=pgp-sha256;
 protocol="application/pgp-signature";
 boundary="------------SAxri5cGUoUT0fxgXuaMB85O"
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dri-devel@lists.freedesktop.org
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--------------SAxri5cGUoUT0fxgXuaMB85O
Content-Type: multipart/mixed; boundary="------------arBcj0vjd0k3D0Oqq60SZ6Z1";
 protected-headers="v1"
From: Thomas Zimmermann <tzimmermann@suse.de>
To: Maxime Ripard <maxime@cerno.tech>, Daniel Vetter
 <daniel.vetter@intel.com>, David Airlie <airlied@linux.ie>,
 Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Cc: dri-devel@lists.freedesktop.org
Message-ID: <c52cc64c-6d7f-fd77-f6dc-fb88d7ff91d5@suse.de>
Subject: Re: [PATCH 13/64] drm/vc4: hvs: Protect device resources after
 removal
References: <20220610092924.754942-1-maxime@cerno.tech>
 <20220610092924.754942-14-maxime@cerno.tech>
In-Reply-To: <20220610092924.754942-14-maxime@cerno.tech>

--------------arBcj0vjd0k3D0Oqq60SZ6Z1
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64

DQoNCkFtIDEwLjA2LjIyIHVtIDExOjI4IHNjaHJpZWIgTWF4aW1lIFJpcGFyZDoNCj4gV2hl
bmV2ZXIgdGhlIGRldmljZSBhbmQgZHJpdmVyIGFyZSB1bmJvdW5kLCB0aGUgbWFpbiBkZXZp
Y2UgYW5kIGFsbCB0aGUNCj4gc3ViZGV2aWNlcyB3aWxsIGJlIHJlbW92ZWQgYnkgY2FsbGlu
ZyB0aGVpciB1bmJpbmQoKSBtZXRob2QuDQo+IA0KPiBIb3dldmVyLCB0aGUgRFJNIGRldmlj
ZSBpdHNlbGYgd2lsbCBvbmx5IGJlIGZyZWVkIHdoZW4gdGhlIGxhc3QgdXNlciB3aWxsDQo+
IGhhdmUgY2xvc2VkIGl0Lg0KPiANCj4gSXQgbWVhbnMgdGhhdCB0aGVyZSBpcyBhIHRpbWUg
d2luZG93IHdoZXJlIHRoZSBkZXZpY2UgYW5kIGl0cyByZXNvdXJjZXMNCj4gYXJlbid0IHRo
ZXJlIGFueW1vcmUsIGJ1dCB0aGUgdXNlcnNwYWNlIGNhbiBzdGlsbCBjYWxsIGludG8gb3Vy
IGRyaXZlci4NCj4gDQo+IEZvcnR1bmF0ZWx5LCB0aGUgRFJNIGZyYW1ld29yayBwcm92aWRl
cyB0aGUgZHJtX2Rldl9lbnRlcigpIGFuZA0KPiBkcm1fZGV2X2V4aXQoKSBmdW5jdGlvbnMg
dG8gbWFrZSBzdXJlIG91ciB1bmRlcmx5aW5nIGRldmljZSBpcyBzdGlsbCB0aGVyZQ0KPiBm
b3IgdGhlIHNlY3Rpb24gcHJvdGVjdGVkIGJ5IHRob3NlIGNhbGxzLiBMZXQncyBhZGQgdGhl
bSB0byB0aGUgSFZTIGRyaXZlci4NCj4gDQo+IFNpZ25lZC1vZmYtYnk6IE1heGltZSBSaXBh
cmQgPG1heGltZUBjZXJuby50ZWNoPg0KDQpSZXZpZXdlZC1ieTogVGhvbWFzIFppbW1lcm1h
bm4gPHR6aW1tZXJtYW5uQHN1c2UuZGU+DQoNCj4gLS0tDQo+ICAgZHJpdmVycy9ncHUvZHJt
L3ZjNC92YzRfZHJ2LmggfCAgIDEgKw0KPiAgIGRyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2h2
cy5jIHwgMTA2ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0NCj4gICAyIGZp
bGVzIGNoYW5nZWQsIDk5IGluc2VydGlvbnMoKyksIDggZGVsZXRpb25zKC0pDQo+IA0KPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfZHJ2LmggYi9kcml2ZXJzL2dw
dS9kcm0vdmM0L3ZjNF9kcnYuaA0KPiBpbmRleCBhYTRjNTkxMGVhMDUuLjA4MGRlYWU1NWY2
NCAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfZHJ2LmgNCj4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRfZHJ2LmgNCj4gQEAgLTMxNyw2ICszMTcsNyBA
QCBzdHJ1Y3QgdmM0X3YzZCB7DQo+ICAgfTsNCj4gICANCj4gICBzdHJ1Y3QgdmM0X2h2cyB7
DQo+ICsJc3RydWN0IGRybV9kZXZpY2UgKmRldjsNCj4gICAJc3RydWN0IHBsYXRmb3JtX2Rl
dmljZSAqcGRldjsNCj4gICAJdm9pZCBfX2lvbWVtICpyZWdzOw0KPiAgIAl1MzIgX19pb21l
bSAqZGxpc3Q7DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9odnMu
YyBiL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2h2cy5jDQo+IGluZGV4IDJhNThmYzQyMWNm
Ni4uNDgzMDUzZTdiMTRmIDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmM0L3Zj
NF9odnMuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vdmM0L3ZjNF9odnMuYw0KPiBAQCAt
MjUsNiArMjUsNyBAQA0KPiAgICNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kZXZpY2UuaD4N
Cj4gICANCj4gICAjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfaGVscGVyLmg+DQo+ICsjaW5j
bHVkZSA8ZHJtL2RybV9kcnYuaD4NCj4gICAjaW5jbHVkZSA8ZHJtL2RybV92YmxhbmsuaD4N
Cj4gICANCj4gICAjaW5jbHVkZSAidmM0X2Rydi5oIg0KPiBAQCAtNjYsMTEgKzY3LDE1IEBA
IHN0YXRpYyBjb25zdCBzdHJ1Y3QgZGVidWdmc19yZWczMiBodnNfcmVnc1tdID0gew0KPiAg
IA0KPiAgIHZvaWQgdmM0X2h2c19kdW1wX3N0YXRlKHN0cnVjdCB2YzRfaHZzICpodnMpDQo+
ICAgew0KPiArCXN0cnVjdCBkcm1fZGV2aWNlICpkcm0gPSBodnMtPmRldjsNCj4gICAJc3Ry
dWN0IGRybV9wcmludGVyIHAgPSBkcm1faW5mb19wcmludGVyKCZodnMtPnBkZXYtPmRldik7
DQo+IC0JaW50IGk7DQo+ICsJaW50IGlkeCwgaTsNCj4gICANCj4gICAJZHJtX3ByaW50X3Jl
Z3NldDMyKCZwLCAmaHZzLT5yZWdzZXQpOw0KPiAgIA0KPiArCWlmICghZHJtX2Rldl9lbnRl
cihkcm0sICZpZHgpKQ0KPiArCQlyZXR1cm47DQo+ICsNCj4gICAJRFJNX0lORk8oIkhWUyBj
dHg6XG4iKTsNCj4gICAJZm9yIChpID0gMDsgaSA8IDY0OyBpICs9IDQpIHsNCj4gICAJCURS
TV9JTkZPKCIweCUwOHggKCVzKTogMHglMDh4IDB4JTA4eCAweCUwOHggMHglMDh4XG4iLA0K
PiBAQCAtODAsNiArODUsOCBAQCB2b2lkIHZjNF9odnNfZHVtcF9zdGF0ZShzdHJ1Y3QgdmM0
X2h2cyAqaHZzKQ0KPiAgIAkJCSByZWFkbCgodTMyIF9faW9tZW0gKilodnMtPmRsaXN0ICsg
aSArIDIpLA0KPiAgIAkJCSByZWFkbCgodTMyIF9faW9tZW0gKilodnMtPmRsaXN0ICsgaSAr
IDMpKTsNCj4gICAJfQ0KPiArDQo+ICsJZHJtX2Rldl9leGl0KGlkeCk7DQo+ICAgfQ0KPiAg
IA0KPiAgIHN0YXRpYyBpbnQgdmM0X2h2c19kZWJ1Z2ZzX3VuZGVycnVuKHN0cnVjdCBzZXFf
ZmlsZSAqbSwgdm9pZCAqZGF0YSkNCj4gQEAgLTEzMiwxNCArMTM5LDE4IEBAIHN0YXRpYyBp
bnQgdmM0X2h2c191cGxvYWRfbGluZWFyX2tlcm5lbChzdHJ1Y3QgdmM0X2h2cyAqaHZzLA0K
PiAgIAkJCQkJc3RydWN0IGRybV9tbV9ub2RlICpzcGFjZSwNCj4gICAJCQkJCWNvbnN0IHUz
MiAqa2VybmVsKQ0KPiAgIHsNCj4gLQlpbnQgcmV0LCBpOw0KPiArCXN0cnVjdCBkcm1fZGV2
aWNlICpkcm0gPSBodnMtPmRldjsNCj4gKwlpbnQgaWR4LCByZXQsIGk7DQo+ICAgCXUzMiBf
X2lvbWVtICpkc3Rfa2VybmVsOw0KPiAgIA0KPiArCWlmICghZHJtX2Rldl9lbnRlcihkcm0s
ICZpZHgpKQ0KPiArCQlyZXR1cm4gLUVOT0RFVjsNCj4gKw0KPiAgIAlyZXQgPSBkcm1fbW1f
aW5zZXJ0X25vZGUoJmh2cy0+ZGxpc3RfbW0sIHNwYWNlLCBWQzRfS0VSTkVMX0RXT1JEUyk7
DQo+ICAgCWlmIChyZXQpIHsNCj4gICAJCURSTV9FUlJPUigiRmFpbGVkIHRvIGFsbG9jYXRl
IHNwYWNlIGZvciBmaWx0ZXIga2VybmVsOiAlZFxuIiwNCj4gICAJCQkgIHJldCk7DQo+IC0J
CXJldHVybiByZXQ7DQo+ICsJCWdvdG8gZXJyX2Rldl9leGl0Ow0KPiAgIAl9DQo+ICAgDQo+
ICAgCWRzdF9rZXJuZWwgPSBodnMtPmRsaXN0ICsgc3BhY2UtPnN0YXJ0Ow0KPiBAQCAtMTUz
LDE2ICsxNjQsMjYgQEAgc3RhdGljIGludCB2YzRfaHZzX3VwbG9hZF9saW5lYXJfa2VybmVs
KHN0cnVjdCB2YzRfaHZzICpodnMsDQo+ICAgCQl9DQo+ICAgCX0NCj4gICANCj4gKwlkcm1f
ZGV2X2V4aXQoaWR4KTsNCj4gICAJcmV0dXJuIDA7DQo+ICsNCj4gK2Vycl9kZXZfZXhpdDoN
Cj4gKwlkcm1fZGV2X2V4aXQoaWR4KTsNCj4gKwlyZXR1cm4gcmV0Ow0KPiAgIH0NCj4gICAN
Cj4gICBzdGF0aWMgdm9pZCB2YzRfaHZzX2x1dF9sb2FkKHN0cnVjdCB2YzRfaHZzICpodnMs
DQo+ICAgCQkJICAgICBzdHJ1Y3QgdmM0X2NydGMgKnZjNF9jcnRjKQ0KPiAgIHsNCj4gKwlz
dHJ1Y3QgZHJtX2RldmljZSAqZHJtID0gaHZzLT5kZXY7DQo+ICAgCXN0cnVjdCBkcm1fY3J0
YyAqY3J0YyA9ICZ2YzRfY3J0Yy0+YmFzZTsNCj4gICAJc3RydWN0IHZjNF9jcnRjX3N0YXRl
ICp2YzRfc3RhdGUgPSB0b192YzRfY3J0Y19zdGF0ZShjcnRjLT5zdGF0ZSk7DQo+ICsJaW50
IGlkeDsNCj4gICAJdTMyIGk7DQo+ICAgDQo+ICsJaWYgKCFkcm1fZGV2X2VudGVyKGRybSwg
JmlkeCkpDQo+ICsJCXJldHVybjsNCj4gKw0KPiAgIAkvKiBUaGUgTFVUIG1lbW9yeSBpcyBs
YWlkIG91dCB3aXRoIGVhY2ggSFZTIGNoYW5uZWwgaW4gb3JkZXIsDQo+ICAgCSAqIGVhY2gg
b2Ygd2hpY2ggdGFrZXMgMjU2IHdyaXRlcyBmb3IgUiwgMjU2IGZvciBHLCB0aGVuIDI1Ng0K
PiAgIAkgKiBmb3IgQi4NCj4gQEAgLTE3Nyw2ICsxOTgsOCBAQCBzdGF0aWMgdm9pZCB2YzRf
aHZzX2x1dF9sb2FkKHN0cnVjdCB2YzRfaHZzICpodnMsDQo+ICAgCQlIVlNfV1JJVEUoU0NB
TEVSX0dBTURBVEEsIHZjNF9jcnRjLT5sdXRfZ1tpXSk7DQo+ICAgCWZvciAoaSA9IDA7IGkg
PCBjcnRjLT5nYW1tYV9zaXplOyBpKyspDQo+ICAgCQlIVlNfV1JJVEUoU0NBTEVSX0dBTURB
VEEsIHZjNF9jcnRjLT5sdXRfYltpXSk7DQo+ICsNCj4gKwlkcm1fZGV2X2V4aXQoaWR4KTsN
Cj4gICB9DQo+ICAgDQo+ICAgc3RhdGljIHZvaWQgdmM0X2h2c191cGRhdGVfZ2FtbWFfbHV0
KHN0cnVjdCB2YzRfaHZzICpodnMsDQo+IEBAIC0xOTgsNyArMjIxLDEyIEBAIHN0YXRpYyB2
b2lkIHZjNF9odnNfdXBkYXRlX2dhbW1hX2x1dChzdHJ1Y3QgdmM0X2h2cyAqaHZzLA0KPiAg
IA0KPiAgIHU4IHZjNF9odnNfZ2V0X2ZpZm9fZnJhbWVfY291bnQoc3RydWN0IHZjNF9odnMg
Kmh2cywgdW5zaWduZWQgaW50IGZpZm8pDQo+ICAgew0KPiArCXN0cnVjdCBkcm1fZGV2aWNl
ICpkcm0gPSBodnMtPmRldjsNCj4gICAJdTggZmllbGQgPSAwOw0KPiArCWludCBpZHg7DQo+
ICsNCj4gKwlpZiAoIWRybV9kZXZfZW50ZXIoZHJtLCAmaWR4KSkNCj4gKwkJcmV0dXJuIDA7
DQo+ICAgDQo+ICAgCXN3aXRjaCAoZmlmbykgew0KPiAgIAljYXNlIDA6DQo+IEBAIC0yMTUs
NiArMjQzLDcgQEAgdTggdmM0X2h2c19nZXRfZmlmb19mcmFtZV9jb3VudChzdHJ1Y3QgdmM0
X2h2cyAqaHZzLCB1bnNpZ25lZCBpbnQgZmlmbykNCj4gICAJCWJyZWFrOw0KPiAgIAl9DQo+
ICAgDQo+ICsJZHJtX2Rldl9leGl0KGlkeCk7DQo+ICAgCXJldHVybiBmaWVsZDsNCj4gICB9
DQo+ICAgDQo+IEBAIC0yMjYsNiArMjU1LDEyIEBAIGludCB2YzRfaHZzX2dldF9maWZvX2Zy
b21fb3V0cHV0KHN0cnVjdCB2YzRfaHZzICpodnMsIHVuc2lnbmVkIGludCBvdXRwdXQpDQo+
ICAgCWlmICghaHZzLT5odnM1KQ0KPiAgIAkJcmV0dXJuIG91dHB1dDsNCj4gICANCj4gKwkv
Kg0KPiArCSAqIE5PVEU6IFdlIHNob3VsZCBwcm9iYWJseSB1c2UgZHJtX2Rldl9lbnRlcigp
L2RybV9kZXZfZXhpdCgpDQo+ICsJICogaGVyZSwgYnV0IHRoaXMgZnVuY3Rpb24gaXMgb25s
eSB1c2VkIGR1cmluZyB0aGUgRFJNIGRldmljZQ0KPiArCSAqIGluaXRpYWxpemF0aW9uLCBz
byB3ZSBzaG91bGQgYmUgZmluZS4NCj4gKwkgKi8NCj4gKw0KPiAgIAlzd2l0Y2ggKG91dHB1
dCkgew0KPiAgIAljYXNlIDA6DQo+ICAgCQlyZXR1cm4gMDsNCj4gQEAgLTI3MywxMiArMzA4
LDE3IEBAIGludCB2YzRfaHZzX2dldF9maWZvX2Zyb21fb3V0cHV0KHN0cnVjdCB2YzRfaHZz
ICpodnMsIHVuc2lnbmVkIGludCBvdXRwdXQpDQo+ICAgc3RhdGljIGludCB2YzRfaHZzX2lu
aXRfY2hhbm5lbChzdHJ1Y3QgdmM0X2h2cyAqaHZzLCBzdHJ1Y3QgZHJtX2NydGMgKmNydGMs
DQo+ICAgCQkJCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlLCBib29sIG9uZXNob3Qp
DQo+ICAgew0KPiArCXN0cnVjdCBkcm1fZGV2aWNlICpkcm0gPSBodnMtPmRldjsNCj4gICAJ
c3RydWN0IHZjNF9jcnRjICp2YzRfY3J0YyA9IHRvX3ZjNF9jcnRjKGNydGMpOw0KPiAgIAlz
dHJ1Y3QgdmM0X2NydGNfc3RhdGUgKnZjNF9jcnRjX3N0YXRlID0gdG9fdmM0X2NydGNfc3Rh
dGUoY3J0Yy0+c3RhdGUpOw0KPiAgIAl1bnNpZ25lZCBpbnQgY2hhbiA9IHZjNF9jcnRjX3N0
YXRlLT5hc3NpZ25lZF9jaGFubmVsOw0KPiAgIAlib29sIGludGVybGFjZSA9IG1vZGUtPmZs
YWdzICYgRFJNX01PREVfRkxBR19JTlRFUkxBQ0U7DQo+ICAgCXUzMiBkaXNwYmtnbmR4Ow0K
PiAgIAl1MzIgZGlzcGN0cmw7DQo+ICsJaW50IGlkeDsNCj4gKw0KPiArCWlmICghZHJtX2Rl
dl9lbnRlcihkcm0sICZpZHgpKQ0KPiArCQlyZXR1cm4gLUVOT0RFVjsNCj4gICANCj4gICAJ
SFZTX1dSSVRFKFNDQUxFUl9ESVNQQ1RSTFgoY2hhbiksIDApOw0KPiAgIAlIVlNfV1JJVEUo
U0NBTEVSX0RJU1BDVFJMWChjaGFuKSwgU0NBTEVSX0RJU1BDVFJMWF9SRVNFVCk7DQo+IEBA
IC0zMjAsMTMgKzM2MCwyMSBAQCBzdGF0aWMgaW50IHZjNF9odnNfaW5pdF9jaGFubmVsKHN0
cnVjdCB2YzRfaHZzICpodnMsIHN0cnVjdCBkcm1fY3J0YyAqY3J0YywNCj4gICAJICovDQo+
ICAgCXZjNF9odnNfbHV0X2xvYWQoaHZzLCB2YzRfY3J0Yyk7DQo+ICAgDQo+ICsJZHJtX2Rl
dl9leGl0KGlkeCk7DQo+ICsNCj4gICAJcmV0dXJuIDA7DQo+ICAgfQ0KPiAgIA0KPiAgIHZv
aWQgdmM0X2h2c19zdG9wX2NoYW5uZWwoc3RydWN0IHZjNF9odnMgKmh2cywgdW5zaWduZWQg
aW50IGNoYW4pDQo+ICAgew0KPiArCXN0cnVjdCBkcm1fZGV2aWNlICpkcm0gPSBodnMtPmRl
djsNCj4gKwlpbnQgaWR4Ow0KPiArDQo+ICsJaWYgKCFkcm1fZGV2X2VudGVyKGRybSwgJmlk
eCkpDQo+ICsJCXJldHVybjsNCj4gKw0KPiAgIAlpZiAoSFZTX1JFQUQoU0NBTEVSX0RJU1BD
VFJMWChjaGFuKSkgJiBTQ0FMRVJfRElTUENUUkxYX0VOQUJMRSkNCj4gLQkJcmV0dXJuOw0K
PiArCQlnb3RvIG91dDsNCj4gICANCj4gICAJSFZTX1dSSVRFKFNDQUxFUl9ESVNQQ1RSTFgo
Y2hhbiksDQo+ICAgCQkgIEhWU19SRUFEKFNDQUxFUl9ESVNQQ1RSTFgoY2hhbikpIHwgU0NB
TEVSX0RJU1BDVFJMWF9SRVNFVCk7DQo+IEBAIC0zNDMsNiArMzkxLDkgQEAgdm9pZCB2YzRf
aHZzX3N0b3BfY2hhbm5lbChzdHJ1Y3QgdmM0X2h2cyAqaHZzLCB1bnNpZ25lZCBpbnQgY2hh
bikNCj4gICAJV0FSTl9PTl9PTkNFKChIVlNfUkVBRChTQ0FMRVJfRElTUFNUQVRYKGNoYW4p
KSAmDQo+ICAgCQkgICAgICAoU0NBTEVSX0RJU1BTVEFUWF9GVUxMIHwgU0NBTEVSX0RJU1BT
VEFUWF9FTVBUWSkpICE9DQo+ICAgCQkgICAgIFNDQUxFUl9ESVNQU1RBVFhfRU1QVFkpOw0K
PiArDQo+ICtvdXQ6DQo+ICsJZHJtX2Rldl9leGl0KGlkeCk7DQo+ICAgfQ0KPiAgIA0KPiAg
IGludCB2YzRfaHZzX2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2NydGMgKmNydGMsIHN0cnVj
dCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSkNCj4gQEAgLTM4NCw5ICs0MzUsMTUgQEAgc3Rh
dGljIHZvaWQgdmM0X2h2c19pbnN0YWxsX2RsaXN0KHN0cnVjdCBkcm1fY3J0YyAqY3J0YykN
Cj4gICAJc3RydWN0IHZjNF9kZXYgKnZjNCA9IHRvX3ZjNF9kZXYoZGV2KTsNCj4gICAJc3Ry
dWN0IHZjNF9odnMgKmh2cyA9IHZjNC0+aHZzOw0KPiAgIAlzdHJ1Y3QgdmM0X2NydGNfc3Rh
dGUgKnZjNF9zdGF0ZSA9IHRvX3ZjNF9jcnRjX3N0YXRlKGNydGMtPnN0YXRlKTsNCj4gKwlp
bnQgaWR4Ow0KPiArDQo+ICsJaWYgKCFkcm1fZGV2X2VudGVyKGRldiwgJmlkeCkpDQo+ICsJ
CXJldHVybjsNCj4gICANCj4gICAJSFZTX1dSSVRFKFNDQUxFUl9ESVNQTElTVFgodmM0X3N0
YXRlLT5hc3NpZ25lZF9jaGFubmVsKSwNCj4gICAJCSAgdmM0X3N0YXRlLT5tbS5zdGFydCk7
DQo+ICsNCj4gKwlkcm1fZGV2X2V4aXQoaWR4KTsNCj4gICB9DQo+ICAgDQo+ICAgc3RhdGlj
IHZvaWQgdmM0X2h2c191cGRhdGVfZGxpc3Qoc3RydWN0IGRybV9jcnRjICpjcnRjKQ0KPiBA
QCAtNDcxLDYgKzUyOCwxMCBAQCB2b2lkIHZjNF9odnNfYXRvbWljX2ZsdXNoKHN0cnVjdCBk
cm1fY3J0YyAqY3J0YywNCj4gICAJYm9vbCBlbmFibGVfYmdfZmlsbCA9IGZhbHNlOw0KPiAg
IAl1MzIgX19pb21lbSAqZGxpc3Rfc3RhcnQgPSB2YzQtPmh2cy0+ZGxpc3QgKyB2YzRfc3Rh
dGUtPm1tLnN0YXJ0Ow0KPiAgIAl1MzIgX19pb21lbSAqZGxpc3RfbmV4dCA9IGRsaXN0X3N0
YXJ0Ow0KPiArCWludCBpZHg7DQo+ICsNCj4gKwlpZiAoIWRybV9kZXZfZW50ZXIoZGV2LCAm
aWR4KSkNCj4gKwkJcmV0dXJuOw0KPiAgIA0KPiAgIAlpZiAoZGVidWdfZHVtcF9yZWdzKSB7
DQo+ICAgCQlEUk1fSU5GTygiQ1JUQyAlZCBIVlMgYmVmb3JlOlxuIiwgZHJtX2NydGNfaW5k
ZXgoY3J0YykpOw0KPiBAQCAtNTQxLDI2ICs2MDIsNDQgQEAgdm9pZCB2YzRfaHZzX2F0b21p
Y19mbHVzaChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsDQo+ICAgCQlEUk1fSU5GTygiQ1JUQyAl
ZCBIVlMgYWZ0ZXI6XG4iLCBkcm1fY3J0Y19pbmRleChjcnRjKSk7DQo+ICAgCQl2YzRfaHZz
X2R1bXBfc3RhdGUoaHZzKTsNCj4gICAJfQ0KPiArDQo+ICsJZHJtX2Rldl9leGl0KGlkeCk7
DQo+ICAgfQ0KPiAgIA0KPiAgIHZvaWQgdmM0X2h2c19tYXNrX3VuZGVycnVuKHN0cnVjdCB2
YzRfaHZzICpodnMsIGludCBjaGFubmVsKQ0KPiAgIHsNCj4gLQl1MzIgZGlzcGN0cmwgPSBI
VlNfUkVBRChTQ0FMRVJfRElTUENUUkwpOw0KPiArCXN0cnVjdCBkcm1fZGV2aWNlICpkcm0g
PSBodnMtPmRldjsNCj4gKwl1MzIgZGlzcGN0cmw7DQo+ICsJaW50IGlkeDsNCj4gICANCj4g
KwlpZiAoIWRybV9kZXZfZW50ZXIoZHJtLCAmaWR4KSkNCj4gKwkJcmV0dXJuOw0KPiArDQo+
ICsJZGlzcGN0cmwgPSBIVlNfUkVBRChTQ0FMRVJfRElTUENUUkwpOw0KPiAgIAlkaXNwY3Ry
bCAmPSB+U0NBTEVSX0RJU1BDVFJMX0RTUEVJU0xVUihjaGFubmVsKTsNCj4gICANCj4gICAJ
SFZTX1dSSVRFKFNDQUxFUl9ESVNQQ1RSTCwgZGlzcGN0cmwpOw0KPiArDQo+ICsJZHJtX2Rl
dl9leGl0KGlkeCk7DQo+ICAgfQ0KPiAgIA0KPiAgIHZvaWQgdmM0X2h2c191bm1hc2tfdW5k
ZXJydW4oc3RydWN0IHZjNF9odnMgKmh2cywgaW50IGNoYW5uZWwpDQo+ICAgew0KPiAtCXUz
MiBkaXNwY3RybCA9IEhWU19SRUFEKFNDQUxFUl9ESVNQQ1RSTCk7DQo+ICsJc3RydWN0IGRy
bV9kZXZpY2UgKmRybSA9IGh2cy0+ZGV2Ow0KPiArCXUzMiBkaXNwY3RybDsNCj4gKwlpbnQg
aWR4Ow0KPiAgIA0KPiArCWlmICghZHJtX2Rldl9lbnRlcihkcm0sICZpZHgpKQ0KPiArCQly
ZXR1cm47DQo+ICsNCj4gKwlkaXNwY3RybCA9IEhWU19SRUFEKFNDQUxFUl9ESVNQQ1RSTCk7
DQo+ICAgCWRpc3BjdHJsIHw9IFNDQUxFUl9ESVNQQ1RSTF9EU1BFSVNMVVIoY2hhbm5lbCk7
DQo+ICAgDQo+ICAgCUhWU19XUklURShTQ0FMRVJfRElTUFNUQVQsDQo+ICAgCQkgIFNDQUxF
Ul9ESVNQU1RBVF9FVUZMT1coY2hhbm5lbCkpOw0KPiAgIAlIVlNfV1JJVEUoU0NBTEVSX0RJ
U1BDVFJMLCBkaXNwY3RybCk7DQo+ICsNCj4gKwlkcm1fZGV2X2V4aXQoaWR4KTsNCj4gICB9
DQo+ICAgDQo+ICAgc3RhdGljIHZvaWQgdmM0X2h2c19yZXBvcnRfdW5kZXJydW4oc3RydWN0
IGRybV9kZXZpY2UgKmRldikNCj4gQEAgLTU4MSw2ICs2NjAsMTcgQEAgc3RhdGljIGlycXJl
dHVybl90IHZjNF9odnNfaXJxX2hhbmRsZXIoaW50IGlycSwgdm9pZCAqZGF0YSkNCj4gICAJ
dTMyIGNvbnRyb2w7DQo+ICAgCXUzMiBzdGF0dXM7DQo+ICAgDQo+ICsJLyoNCj4gKwkgKiBO
T1RFOiBXZSBkb24ndCBuZWVkIHRvIHByb3RlY3QgdGhlIHJlZ2lzdGVyIGFjY2VzcyB1c2lu
Zw0KPiArCSAqIGRybV9kZXZfZW50ZXIoKSB0aGVyZSBiZWNhdXNlIHRoZSBpbnRlcnJ1cHQg
aGFuZGxlciBsaWZldGltZQ0KPiArCSAqIGlzIHRpZWQgdG8gdGhlIGRldmljZSBpdHNlbGYs
IGFuZCBub3QgdG8gdGhlIERSTSBkZXZpY2UuDQo+ICsJICoNCj4gKwkgKiBTbyB3aGVuIHRo
ZSBkZXZpY2Ugd2lsbCBiZSBnb25lLCBvbmUgb2YgdGhlIGZpcnN0IHRoaW5nIHdlDQo+ICsJ
ICogd2lsbCBiZSBkb2luZyB3aWxsIGJlIHRvIHVucmVnaXN0ZXIgdGhlIGludGVycnVwdCBo
YW5kbGVyLA0KPiArCSAqIGFuZCB0aGVuIHVucmVnaXN0ZXIgdGhlIERSTSBkZXZpY2UuIGRy
bV9kZXZfZW50ZXIoKSB3b3VsZA0KPiArCSAqIHRodXMgYWx3YXlzIHN1Y2NlZWQgaWYgd2Ug
YXJlIGhlcmUuDQo+ICsJICovDQo+ICsNCj4gICAJc3RhdHVzID0gSFZTX1JFQUQoU0NBTEVS
X0RJU1BTVEFUKTsNCj4gICAJY29udHJvbCA9IEhWU19SRUFEKFNDQUxFUl9ESVNQQ1RSTCk7
DQo+ICAgDQo+IEBAIC02MTMsMTAgKzcwMywxMCBAQCBzdGF0aWMgaW50IHZjNF9odnNfYmlu
ZChzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBkZXZpY2UgKm1hc3Rlciwgdm9pZCAqZGF0
YSkNCj4gICAJdTMyIGRpc3BjdHJsOw0KPiAgIAl1MzIgcmVnOw0KPiAgIA0KPiAtCWh2cyA9
IGRldm1fa3phbGxvYygmcGRldi0+ZGV2LCBzaXplb2YoKmh2cyksIEdGUF9LRVJORUwpOw0K
PiArCWh2cyA9IGRybW1fa3phbGxvYyhkcm0sIHNpemVvZigqaHZzKSwgR0ZQX0tFUk5FTCk7
DQo+ICAgCWlmICghaHZzKQ0KPiAgIAkJcmV0dXJuIC1FTk9NRU07DQo+IC0NCj4gKwlodnMt
PmRldiA9IGRybTsNCj4gICAJaHZzLT5wZGV2ID0gcGRldjsNCj4gICANCj4gICAJaWYgKG9m
X2RldmljZV9pc19jb21wYXRpYmxlKHBkZXYtPmRldi5vZl9ub2RlLCAiYnJjbSxiY20yNzEx
LWh2cyIpKQ0KDQotLSANClRob21hcyBaaW1tZXJtYW5uDQpHcmFwaGljcyBEcml2ZXIgRGV2
ZWxvcGVyDQpTVVNFIFNvZnR3YXJlIFNvbHV0aW9ucyBHZXJtYW55IEdtYkgNCk1heGZlbGRz
dHIuIDUsIDkwNDA5IE7DvHJuYmVyZywgR2VybWFueQ0KKEhSQiAzNjgwOSwgQUcgTsO8cm5i
ZXJnKQ0KR2VzY2jDpGZ0c2bDvGhyZXI6IEl2byBUb3Rldg0K

--------------arBcj0vjd0k3D0Oqq60SZ6Z1--

--------------SAxri5cGUoUT0fxgXuaMB85O
Content-Type: application/pgp-signature; name="OpenPGP_signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="OpenPGP_signature"

-----BEGIN PGP SIGNATURE-----

wsF5BAABCAAjFiEExndm/fpuMUdwYFFolh/E3EQov+AFAmKwUHsFAwAAAAAACgkQlh/E3EQov+AE
CQ/8CE+dOmd5bNW+P4GmwvUKV87o0UxjRsznQFrWcgxCUem/wPr8QilcJljwrPRxF1sv8mBOZq+t
vlKG4Ij61DesFwqrjIwxBNSdegU8Wi/2OU78gEY73niAp5+Lw/FPqPOAmTjR8H6VTZH8pW47oZLt
8Vd7Xm03X4rXJn757rmKO9ApATF9jJQPDV3s4UT3BJexQTa58gdxvA3lKBpZkwAOHa/Kke8AHEMU
Jz50VmCs53YJBxiPYI0VZaFtOhqSj21Ecya9ZVD+a6gBE4yXOVavyt+WYqQggqulkhFpmI0AWPOL
vnZ7kNraYPUysrQWcnodABB/KH4oFGdpEsOEewet+EPlGjRAPBRKcu1YLE9UZB/UTmV+DH8+/wmA
dXWhd02DaVIK/AHQ5W3EOt7F7PzE64PqHPaY5UKv1xlkSz57KbeC68Z6Kv4rGOVvNUEtQkIGwBdB
FGklBGBsRLl1hmcvupu5hLgN6HO+1u/Ph03QeQ8yEayVY9zqxl0lKAPFdi2870p+Jy+YUXw5thZH
oxD7dy5XhHhuZYfZjP6u91Ai7BIWBiYHgbOUGx5R2IiXXsyE2jtjXGHXo3/UijkIjyoiOs7J3eR+
RaYVPkQfAyg201oDWnxJklRC5KScHl89GYx9nxGcKAbOVExgnMLMZZZS9SsVg8chilXtbXBbk5XT
WtM=
=eCDQ
-----END PGP SIGNATURE-----

--------------SAxri5cGUoUT0fxgXuaMB85O--
