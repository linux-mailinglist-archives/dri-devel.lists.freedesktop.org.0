Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 834189800B
	for <lists+dri-devel@lfdr.de>; Wed, 21 Aug 2019 18:27:59 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8D7026E8C0;
	Wed, 21 Aug 2019 16:27:56 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yw1-xc42.google.com (mail-yw1-xc42.google.com
 [IPv6:2607:f8b0:4864:20::c42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 983EF6E8C0
 for <dri-devel@lists.freedesktop.org>; Wed, 21 Aug 2019 16:27:54 +0000 (UTC)
Received: by mail-yw1-xc42.google.com with SMTP id e65so1177051ywh.0
 for <dri-devel@lists.freedesktop.org>; Wed, 21 Aug 2019 09:27:54 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to:user-agent;
 bh=9g+q33wId0eH0+EplXmj0yiWsc5rhqIe5dreCekLVfc=;
 b=aa6Yf9Bjyzhblk9xk4og7nm7zuh4i1eHf4RgKUNMZWvdYUVW/p5uYIhEMT+XY44FgU
 MkZWAT/6vFztnnEOrGxTBHasNKsl7yV8+aKydNWY4G+Z7lADpUKEdNtYN6VMj4eu30aF
 JeIxYxkT3bmzG0jbWR11Vc340fnxvokfa9qtCek1iSD2olCazfGX68McKQLtT83f1uLP
 HKfsXzYgwCkt23iPLZ4PGGAhKPDNcpjW19xOQoZHmJotv+MIZb7y2utMQH/ad2v9UYQL
 a/E0igHg2GcCJDd77c2yBawgWvDRYyZdH+mkA6wN2boI/g8DMChxOZpMILpA5YI7Ds7w
 QmeA==
X-Gm-Message-State: APjAAAXioV5l95O85HTFQGju2G+L3NenLECPGS7t6Lr+I/kWreciSfjk
 L5w/GIvqYMekBDCoEv5tisJVFg==
X-Google-Smtp-Source: APXvYqyxBZeZ6KddrgZgUZGVlDckj8facP8PvyZrVD+6D/ivNPxEfqEfKzvB+PBKvDfxndE8by780A==
X-Received: by 2002:a81:eb09:: with SMTP id n9mr25845895ywm.115.1566404873620; 
 Wed, 21 Aug 2019 09:27:53 -0700 (PDT)
Received: from localhost ([2620:0:1013:11:89c6:2139:5435:371d])
 by smtp.gmail.com with ESMTPSA id x25sm4837162ywj.22.2019.08.21.09.27.52
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 21 Aug 2019 09:27:52 -0700 (PDT)
Date: Wed, 21 Aug 2019 12:27:52 -0400
From: Sean Paul <sean@poorly.run>
To: Rob Clark <robdclark@gmail.com>
Subject: Re: [PATCH] drm/msm/dpu: fix "frame done" timeouts
Message-ID: <20190821162752.GG104440@art_vandelay>
References: <20190820231301.28445-1-robdclark@gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190820231301.28445-1-robdclark@gmail.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=poorly.run; s=google;
 h=date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:in-reply-to:user-agent;
 bh=9g+q33wId0eH0+EplXmj0yiWsc5rhqIe5dreCekLVfc=;
 b=CTovpnin+xG4fahNvP6kUxijFjXa9J/mob6Z4me/XIcPwpO3z6It9v2V7aJJST9HUp
 weeatsLIUk1rvVGHd4ZZ/AqAVmkZ//lOAmCL+Txyr4LUSyg4u2qyNKT15fLVSygpKs+z
 PKtABCilb2Xds2Ssfekri2YNTZNqs0qAMiJoGgm95YNJA+ZzthCJUtCEr/5C1997JntY
 YCiw9XS+ifulO9tAxN/ks/C3yjsoBudJhXMcxUi3fMPCGmx+rvMskxnR0tU2BS7aqKeH
 nHqqKrRNnq7NLvNMGOWMzJdANhrdykt0hW/Gc/nrIppEPajtJoaPvdhbcIaYl/YUpp7u
 nXpg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rob Clark <robdclark@chromium.org>, Bruce Wang <bzwang@chromium.org>,
 Fritz Koenig <frkoenig@google.com>, David Airlie <airlied@linux.ie>,
 linux-arm-msm@vger.kernel.org, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org, Jayant Shekhar <jshekhar@codeaurora.org>,
 Sean Paul <seanpaul@chromium.org>, Abhinav Kumar <abhinavk@codeaurora.org>,
 freedreno@lists.freedesktop.org, Sean Paul <sean@poorly.run>,
 Sravanthi Kollukuduru <skolluku@codeaurora.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBBdWcgMjAsIDIwMTkgYXQgMDQ6MTI6MjhQTSAtMDcwMCwgUm9iIENsYXJrIHdyb3Rl
Ogo+IEZyb206IFJvYiBDbGFyayA8cm9iZGNsYXJrQGNocm9taXVtLm9yZz4KPiAKPiBQcmV2aW91
c2x5LCBkcHVfY3J0Y19mcmFtZV9ldmVudF93b3JrKCkgd291bGQgdHJ5IHRvIGFxdWlyZSBhbGwg
dGhlCj4gbW9kZXNldCBsb2NrcyBpbiBvcmRlciB0byBjaGVjayB3aGV0aGVyIGl0IGNhbiByZWxl
YXNlIGJhbmR3aWR0aC4gIChJZgo+IHdlIG9ubHkgaGF2ZSBjbWQtbW9kZSBkaXNwbGF5LCBiYW5k
d2lkdGggY2FuIGJlIHJlbGVhc2VkIGF0IGZyYW1lLWRvbmUKPiB0aW1lLikKPiAKPiBUaGUgcHJv
YmxlbSB3aXRoIHRoaXMgaXMgdGhhdCBpdCBpcyBhbHNvIHJlc3BvbnNpYmxlIGZvciBzaWduYWxs
aW5nCj4gZnJhbWVfZG9uZV9jb21wLCB3aGljaCBkcHVfY3J0Y19jb21taXRfa2lja29mZigpIHdh
aXRzIG9uIGlmIHRoZXJlIGlzCj4gYWxyZWFkeSBhIGZyYW1lIHBlbmRpbmcuICBUaGlzIGlzIGNh
bGxlZCBpbiB0aGUgbXNtX2F0b21pY19jb21taXRfdGFpbCgpCj4gcGF0aC4uIHdoaWNoIG1lYW5z
IHRoYXQgZm9yIG5vbi1ub25ibG9jayBjb21taXRzLCBhdCBsZWFzdCBzb21lIG9mIHRoZQo+IG1v
ZGVzZXQgbG9ja3MgYXJlIGFscmVhZHkgaGVsZC4KPiAKPiBSZS13b3JrIHRoaXMgc2NoZW1lIHRv
IHVzZSBhIHJlZmVyZW5jZSBjb3VudCB0byB0cmFjayBvdXIgbmVlZCB0byBoYXZlCj4gY2xvY2tz
IGVuYWJsZWQuICBJdCBpcyBpbmNyZW1lbnRlZCBmb3IgZWFjaCBhdG9taWMgY29tbWl0LCBhbmQK
PiBkZWNyZW1lbnRlZCBpbiB0aGUgY29ycmVzcG9uZGluZyBmcmFtZS1kb25lLiAgQWRkaXRpb25h
bGx5LCBhbnkgY3J0Ywo+IHVzZWQgaW4gdmlkZW8gbW9kZSBob2xkIGFuIGV4dHJhIHJlZmVyZW5j
ZSB3aGlsZSB0aGV5IGFyZSBlbmFibGVkLiAgVGhlCj4gbmV0IGVmZmVjdCBpcyB0aGF0IHdlIGNh
biBkZXRlcm1pbmUgaW4gZnJhbWUtZG9uZSB3aGV0aGVyIGl0IGlzIHNhZmUgdG8KPiBkcm9wIGJh
bmR3aWR0aCB3aXRob3V0IG5lZWRpbmcgdG8gYXF1aXJlIGFueSBtb2Rlc2V0IGxvY2tzLgo+IAo+
IFNpZ25lZC1vZmYtYnk6IFJvYiBDbGFyayA8cm9iZGNsYXJrQGNocm9taXVtLm9yZz4KCkFsbCBs
b29rcyBnb29kIHRvIG1lLCBuaWNlIGNsZWFudXAhCgpSZXZpZXdlZC1ieTogU2VhbiBQYXVsIDxz
ZWFuQGNocm9taXVtLm9yZz4KCj4gLS0tCj4gIGRyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUx
L2RwdV9jb3JlX3BlcmYuYyB8IDE2ICstLS0tLS0KPiAgZHJpdmVycy9ncHUvZHJtL21zbS9kaXNw
L2RwdTEvZHB1X2NydGMuYyAgICAgIHwgNDUgKysrKysrKysrKystLS0tLS0tLQo+ICBkcml2ZXJz
L2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfa21zLmMgICAgICAgfCAgMiArCj4gIGRyaXZlcnMv
Z3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuaCAgICAgICB8ICA4ICsrKysKPiAgNCBmaWxl
cyBjaGFuZ2VkLCAzOCBpbnNlcnRpb25zKCspLCAzMyBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2NvcmVfcGVyZi5jIGIvZHJp
dmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2NvcmVfcGVyZi5jCj4gaW5kZXggNWNkYTk2
ODc1ZTAzLi4wOWE0OWI1OWJiNWIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9k
aXNwL2RwdTEvZHB1X2NvcmVfcGVyZi5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNw
L2RwdTEvZHB1X2NvcmVfcGVyZi5jCj4gQEAgLTIxNCw3ICsyMTQsNiBAQCBzdGF0aWMgaW50IF9k
cHVfY29yZV9wZXJmX2NydGNfdXBkYXRlX2J1cyhzdHJ1Y3QgZHB1X2ttcyAqa21zLAo+ICAgKi8K
PiAgdm9pZCBkcHVfY29yZV9wZXJmX2NydGNfcmVsZWFzZV9idyhzdHJ1Y3QgZHJtX2NydGMgKmNy
dGMpCj4gIHsKPiAtCXN0cnVjdCBkcm1fY3J0YyAqdG1wX2NydGM7Cj4gIAlzdHJ1Y3QgZHB1X2Ny
dGMgKmRwdV9jcnRjOwo+ICAJc3RydWN0IGRwdV9jcnRjX3N0YXRlICpkcHVfY3N0YXRlOwo+ICAJ
c3RydWN0IGRwdV9rbXMgKmttczsKPiBAQCAtMjMzLDIyICsyMzIsOSBAQCB2b2lkIGRwdV9jb3Jl
X3BlcmZfY3J0Y19yZWxlYXNlX2J3KHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKPiAgCWRwdV9jcnRj
ID0gdG9fZHB1X2NydGMoY3J0Yyk7Cj4gIAlkcHVfY3N0YXRlID0gdG9fZHB1X2NydGNfc3RhdGUo
Y3J0Yy0+c3RhdGUpOwo+ICAKPiAtCS8qIG9ubHkgZG8gdGhpcyBmb3IgY29tbWFuZCBtb2RlIHJ0
IGNsaWVudCAqLwo+IC0JaWYgKGRwdV9jcnRjX2dldF9pbnRmX21vZGUoY3J0YykgIT0gSU5URl9N
T0RFX0NNRCkKPiArCWlmIChhdG9taWNfZGVjX3JldHVybigma21zLT5iYW5kd2lkdGhfcmVmKSA+
IDApCj4gIAkJcmV0dXJuOwo+ICAKPiAtCS8qCj4gLQkgKiBJZiB2aWRlbyBpbnRlcmZhY2UgcHJl
c2VudCwgY21kIHBhbmVsIGJhbmR3aWR0aCBjYW5ub3QgYmUKPiAtCSAqIHJlbGVhc2VkLgo+IC0J
ICovCj4gLQlpZiAoZHB1X2NydGNfZ2V0X2ludGZfbW9kZShjcnRjKSA9PSBJTlRGX01PREVfQ01E
KQo+IC0JCWRybV9mb3JfZWFjaF9jcnRjKHRtcF9jcnRjLCBjcnRjLT5kZXYpIHsKPiAtCQkJaWYg
KHRtcF9jcnRjLT5lbmFibGVkICYmCj4gLQkJCQlkcHVfY3J0Y19nZXRfaW50Zl9tb2RlKHRtcF9j
cnRjKSA9PQo+IC0JCQkJCQlJTlRGX01PREVfVklERU8pCj4gLQkJCQlyZXR1cm47Cj4gLQkJfQo+
IC0KPiAgCS8qIFJlbGVhc2UgdGhlIGJhbmR3aWR0aCAqLwo+ICAJaWYgKGttcy0+cGVyZi5lbmFi
bGVfYndfcmVsZWFzZSkgewo+ICAJCXRyYWNlX2RwdV9jbWRfcmVsZWFzZV9idyhjcnRjLT5iYXNl
LmlkKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2Ny
dGMuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9jcnRjLmMKPiBpbmRleCBi
MzQxN2Q1NjAzMmQuLjRlNTQ1NTBjNGE4MCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
bXNtL2Rpc3AvZHB1MS9kcHVfY3J0Yy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNw
L2RwdTEvZHB1X2NydGMuYwo+IEBAIC0yOTIsMTkgKzI5Miw2IEBAIHZvaWQgZHB1X2NydGNfdmJs
YW5rX2NhbGxiYWNrKHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKPiAgCXRyYWNlX2RwdV9jcnRjX3Zi
bGFua19jYihEUk1JRChjcnRjKSk7Cj4gIH0KPiAgCj4gLXN0YXRpYyB2b2lkIGRwdV9jcnRjX3Jl
bGVhc2VfYndfdW5sb2NrZWQoc3RydWN0IGRybV9jcnRjICpjcnRjKQo+IC17Cj4gLQlpbnQgcmV0
ID0gMDsKPiAtCXN0cnVjdCBkcm1fbW9kZXNldF9hY3F1aXJlX2N0eCBjdHg7Cj4gLQo+IC0JRFJN
X01PREVTRVRfTE9DS19BTExfQkVHSU4oY3J0Yy0+ZGV2LCBjdHgsIDAsIHJldCk7Cj4gLQlkcHVf
Y29yZV9wZXJmX2NydGNfcmVsZWFzZV9idyhjcnRjKTsKPiAtCURSTV9NT0RFU0VUX0xPQ0tfQUxM
X0VORChjdHgsIHJldCk7Cj4gLQlpZiAocmV0KQo+IC0JCURSTV9FUlJPUigiRmFpbGVkIHRvIGFj
cXVpcmUgbW9kZXNldCBsb2NrcyB0byByZWxlYXNlIGJ3LCAlZFxuIiwKPiAtCQkJICByZXQpOwo+
IC19Cj4gLQo+ICBzdGF0aWMgdm9pZCBkcHVfY3J0Y19mcmFtZV9ldmVudF93b3JrKHN0cnVjdCBr
dGhyZWFkX3dvcmsgKndvcmspCj4gIHsKPiAgCXN0cnVjdCBkcHVfY3J0Y19mcmFtZV9ldmVudCAq
ZmV2ZW50ID0gY29udGFpbmVyX29mKHdvcmssCj4gQEAgLTMzNCw3ICszMjEsNyBAQCBzdGF0aWMg
dm9pZCBkcHVfY3J0Y19mcmFtZV9ldmVudF93b3JrKHN0cnVjdCBrdGhyZWFkX3dvcmsgKndvcmsp
Cj4gIAkJCS8qIHJlbGVhc2UgYmFuZHdpZHRoIGFuZCBvdGhlciByZXNvdXJjZXMgKi8KPiAgCQkJ
dHJhY2VfZHB1X2NydGNfZnJhbWVfZXZlbnRfZG9uZShEUk1JRChjcnRjKSwKPiAgCQkJCQkJCWZl
dmVudC0+ZXZlbnQpOwo+IC0JCQlkcHVfY3J0Y19yZWxlYXNlX2J3X3VubG9ja2VkKGNydGMpOwo+
ICsJCQlkcHVfY29yZV9wZXJmX2NydGNfcmVsZWFzZV9idyhjcnRjKTsKPiAgCQl9IGVsc2Ugewo+
ICAJCQl0cmFjZV9kcHVfY3J0Y19mcmFtZV9ldmVudF9tb3JlX3BlbmRpbmcoRFJNSUQoY3J0Yyks
Cj4gIAkJCQkJCQkJZmV2ZW50LT5ldmVudCk7Cj4gQEAgLTY1MCw3ICs2MzcsNyBAQCB2b2lkIGRw
dV9jcnRjX2NvbW1pdF9raWNrb2ZmKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywgYm9vbCBhc3luYykK
PiAgCQlkcHVfZW5jb2Rlcl9wcmVwYXJlX2Zvcl9raWNrb2ZmKGVuY29kZXIsIGFzeW5jKTsKPiAg
Cj4gIAlpZiAoIWFzeW5jKSB7Cj4gLQkJLyogd2FpdCBmb3IgZnJhbWVfZXZlbnRfZG9uZSBjb21w
bGV0aW9uICovCj4gKwkJLyogd2FpdCBmb3IgcHJldmlvdXMgZnJhbWVfZXZlbnRfZG9uZSBjb21w
bGV0aW9uICovCj4gIAkJRFBVX0FUUkFDRV9CRUdJTigid2FpdF9mb3JfZnJhbWVfZG9uZV9ldmVu
dCIpOwo+ICAJCXJldCA9IF9kcHVfY3J0Y193YWl0X2Zvcl9mcmFtZV9kb25lKGNydGMpOwo+ICAJ
CURQVV9BVFJBQ0VfRU5EKCJ3YWl0X2Zvcl9mcmFtZV9kb25lX2V2ZW50Iik7Cj4gQEAgLTcyOSw2
ICs3MTYsNyBAQCBzdGF0aWMgdm9pZCBkcHVfY3J0Y19kaXNhYmxlKHN0cnVjdCBkcm1fY3J0YyAq
Y3J0YywKPiAgCXN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcjsKPiAgCXN0cnVjdCBtc21fZHJt
X3ByaXZhdGUgKnByaXY7Cj4gIAl1bnNpZ25lZCBsb25nIGZsYWdzOwo+ICsJYm9vbCByZWxlYXNl
X2JhbmR3aWR0aCA9IGZhbHNlOwo+ICAKPiAgCWlmICghY3J0YyB8fCAhY3J0Yy0+ZGV2IHx8ICFj
cnRjLT5kZXYtPmRldl9wcml2YXRlIHx8ICFjcnRjLT5zdGF0ZSkgewo+ICAJCURQVV9FUlJPUigi
aW52YWxpZCBjcnRjXG4iKTsKPiBAQCAtNzQ1LDggKzczMywxNSBAQCBzdGF0aWMgdm9pZCBkcHVf
Y3J0Y19kaXNhYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKPiAgCWRybV9jcnRjX3ZibGFua19v
ZmYoY3J0Yyk7Cj4gIAo+ICAJZHJtX2Zvcl9lYWNoX2VuY29kZXJfbWFzayhlbmNvZGVyLCBjcnRj
LT5kZXYsCj4gLQkJCQkgIG9sZF9jcnRjX3N0YXRlLT5lbmNvZGVyX21hc2spCj4gKwkJCQkgIG9s
ZF9jcnRjX3N0YXRlLT5lbmNvZGVyX21hc2spIHsKPiArCQkvKiBpbiB2aWRlbyBtb2RlLCB3ZSBo
b2xkIGFuIGV4dHJhIGJhbmR3aWR0aCByZWZlcmVuY2UKPiArCQkgKiBhcyB3ZSBjYW5ub3QgZHJv
cCBiYW5kd2lkdGggYXQgZnJhbWUtZG9uZSBpZiBhbnkKPiArCQkgKiBjcnRjIGlzIGJlaW5nIHVz
ZWQgaW4gdmlkZW8gbW9kZS4KPiArCQkgKi8KPiArCQlpZiAoZHB1X2VuY29kZXJfZ2V0X2ludGZf
bW9kZShlbmNvZGVyKSA9PSBJTlRGX01PREVfVklERU8pCj4gKwkJCXJlbGVhc2VfYmFuZHdpZHRo
ID0gdHJ1ZTsKPiAgCQlkcHVfZW5jb2Rlcl9hc3NpZ25fY3J0YyhlbmNvZGVyLCBOVUxMKTsKPiAr
CX0KPiAgCj4gIAkvKiB3YWl0IGZvciBmcmFtZV9ldmVudF9kb25lIGNvbXBsZXRpb24gKi8KPiAg
CWlmIChfZHB1X2NydGNfd2FpdF9mb3JfZnJhbWVfZG9uZShjcnRjKSkKPiBAQCAtNzYwLDcgKzc1
NSw4IEBAIHN0YXRpYyB2b2lkIGRwdV9jcnRjX2Rpc2FibGUoc3RydWN0IGRybV9jcnRjICpjcnRj
LAo+ICAJaWYgKGF0b21pY19yZWFkKCZkcHVfY3J0Yy0+ZnJhbWVfcGVuZGluZykpIHsKPiAgCQl0
cmFjZV9kcHVfY3J0Y19kaXNhYmxlX2ZyYW1lX3BlbmRpbmcoRFJNSUQoY3J0YyksCj4gIAkJCQkg
ICAgIGF0b21pY19yZWFkKCZkcHVfY3J0Yy0+ZnJhbWVfcGVuZGluZykpOwo+IC0JCWRwdV9jb3Jl
X3BlcmZfY3J0Y19yZWxlYXNlX2J3KGNydGMpOwo+ICsJCWlmIChyZWxlYXNlX2JhbmR3aWR0aCkK
PiArCQkJZHB1X2NvcmVfcGVyZl9jcnRjX3JlbGVhc2VfYncoY3J0Yyk7Cj4gIAkJYXRvbWljX3Nl
dCgmZHB1X2NydGMtPmZyYW1lX3BlbmRpbmcsIDApOwo+ICAJfQo+ICAKPiBAQCAtNzkyLDYgKzc4
OCw3IEBAIHN0YXRpYyB2b2lkIGRwdV9jcnRjX2VuYWJsZShzdHJ1Y3QgZHJtX2NydGMgKmNydGMs
Cj4gIAlzdHJ1Y3QgZHB1X2NydGMgKmRwdV9jcnRjOwo+ICAJc3RydWN0IGRybV9lbmNvZGVyICpl
bmNvZGVyOwo+ICAJc3RydWN0IG1zbV9kcm1fcHJpdmF0ZSAqcHJpdjsKPiArCWJvb2wgcmVxdWVz
dF9iYW5kd2lkdGg7Cj4gIAo+ICAJaWYgKCFjcnRjIHx8ICFjcnRjLT5kZXYgfHwgIWNydGMtPmRl
di0+ZGV2X3ByaXZhdGUpIHsKPiAgCQlEUFVfRVJST1IoImludmFsaWQgY3J0Y1xuIik7Cj4gQEAg
LTgwNCw5ICs4MDEsMTkgQEAgc3RhdGljIHZvaWQgZHB1X2NydGNfZW5hYmxlKHN0cnVjdCBkcm1f
Y3J0YyAqY3J0YywKPiAgCURSTV9ERUJVR19LTVMoImNydGMlZFxuIiwgY3J0Yy0+YmFzZS5pZCk7
Cj4gIAlkcHVfY3J0YyA9IHRvX2RwdV9jcnRjKGNydGMpOwo+ICAKPiAtCWRybV9mb3JfZWFjaF9l
bmNvZGVyX21hc2soZW5jb2RlciwgY3J0Yy0+ZGV2LCBjcnRjLT5zdGF0ZS0+ZW5jb2Rlcl9tYXNr
KQo+ICsJZHJtX2Zvcl9lYWNoX2VuY29kZXJfbWFzayhlbmNvZGVyLCBjcnRjLT5kZXYsIGNydGMt
PnN0YXRlLT5lbmNvZGVyX21hc2spIHsKPiArCQkvKiBpbiB2aWRlbyBtb2RlLCB3ZSBob2xkIGFu
IGV4dHJhIGJhbmR3aWR0aCByZWZlcmVuY2UKPiArCQkgKiBhcyB3ZSBjYW5ub3QgZHJvcCBiYW5k
d2lkdGggYXQgZnJhbWUtZG9uZSBpZiBhbnkKPiArCQkgKiBjcnRjIGlzIGJlaW5nIHVzZWQgaW4g
dmlkZW8gbW9kZS4KPiArCQkgKi8KPiArCQlpZiAoZHB1X2VuY29kZXJfZ2V0X2ludGZfbW9kZShl
bmNvZGVyKSA9PSBJTlRGX01PREVfVklERU8pCj4gKwkJCXJlcXVlc3RfYmFuZHdpZHRoID0gdHJ1
ZTsKPiAgCQlkcHVfZW5jb2Rlcl9yZWdpc3Rlcl9mcmFtZV9ldmVudF9jYWxsYmFjayhlbmNvZGVy
LAo+ICAJCQkJZHB1X2NydGNfZnJhbWVfZXZlbnRfY2IsICh2b2lkICopY3J0Yyk7Cj4gKwl9Cj4g
Kwo+ICsJaWYgKHJlcXVlc3RfYmFuZHdpZHRoKQo+ICsJCWF0b21pY19pbmMoJl9kcHVfY3J0Y19n
ZXRfa21zKGNydGMpLT5iYW5kd2lkdGhfcmVmKTsKPiAgCj4gIAl0cmFjZV9kcHVfY3J0Y19lbmFi
bGUoRFJNSUQoY3J0YyksIHRydWUsIGRwdV9jcnRjKTsKPiAgCWRwdV9jcnRjLT5lbmFibGVkID0g
dHJ1ZTsKPiBAQCAtOTgxLDYgKzk4OCw4IEBAIHN0YXRpYyBpbnQgZHB1X2NydGNfYXRvbWljX2No
ZWNrKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKPiAgCQl9Cj4gIAl9Cj4gIAo+ICsJYXRvbWljX2lu
YygmX2RwdV9jcnRjX2dldF9rbXMoY3J0YyktPmJhbmR3aWR0aF9yZWYpOwo+ICsKPiAgCXJjID0g
ZHB1X2NvcmVfcGVyZl9jcnRjX2NoZWNrKGNydGMsIHN0YXRlKTsKPiAgCWlmIChyYykgewo+ICAJ
CURQVV9FUlJPUigiY3J0YyVkIGZhaWxlZCBwZXJmb3JtYW5jZSBjaGVjayAlZFxuIiwKPiBkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2ttcy5jIGIvZHJpdmVy
cy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2ttcy5jCj4gaW5kZXggOTlkMGJkNTY5YzM4Li42
ODE5NTVlYjI4NmYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEv
ZHB1X2ttcy5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2ttcy5j
Cj4gQEAgLTgwMCw2ICs4MDAsOCBAQCBzdGF0aWMgaW50IGRwdV9rbXNfaHdfaW5pdChzdHJ1Y3Qg
bXNtX2ttcyAqa21zKQo+ICAJCXJldHVybiByYzsKPiAgCX0KPiAgCj4gKwlhdG9taWNfc2V0KCZk
cHVfa21zLT5iYW5kd2lkdGhfcmVmLCAwKTsKPiArCj4gIAlkcHVfa21zLT5tbWlvID0gbXNtX2lv
cmVtYXAoZHB1X2ttcy0+cGRldiwgIm1kcCIsICJtZHAiKTsKPiAgCWlmIChJU19FUlIoZHB1X2tt
cy0+bW1pbykpIHsKPiAgCQlyYyA9IFBUUl9FUlIoZHB1X2ttcy0+bW1pbyk7Cj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuaCBiL2RyaXZlcnMvZ3B1
L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuaAo+IGluZGV4IDllNDBmNTU5YzUxZi4uZmRlZjAx
NmY1Y2EzIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9r
bXMuaAo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9rbXMuaAo+IEBA
IC0xMjAsNiArMTIwLDE0IEBAIHN0cnVjdCBkcHVfa21zIHsKPiAgCXN0cnVjdCBwbGF0Zm9ybV9k
ZXZpY2UgKnBkZXY7Cj4gIAlib29sIHJwbV9lbmFibGVkOwo+ICAJc3RydWN0IGRzc19tb2R1bGVf
cG93ZXIgbXA7Cj4gKwo+ICsJLyogcmVmZXJlbmNlIGNvdW50IGJhbmR3aWR0aCByZXF1ZXN0cywg
c28gd2Uga25vdyB3aGVuIHdlIGNhbgo+ICsJICogcmVsZWFzZSBiYW5kd2lkdGguICBFYWNoIGF0
b21pYyB1cGRhdGUgaW5jcmVtZW50cywgYW5kIGZyYW1lLQo+ICsJICogZG9uZSBldmVudCBkZWNy
ZW1lbnRzLiAgQWRkaXRpb25hbGx5LCBmb3IgdmlkZW8gbW9kZSwgdGhlCj4gKwkgKiByZWZlcmVu
Y2UgaXMgaW5jcmVtZW50ZWQgd2hlbiBjcnRjIGlzIGVuYWJsZWQsIGFuZCBkZWNyZW1lbnRlZAo+
ICsJICogd2hlbiBkaXNhYmxlZC4KPiArCSAqLwo+ICsJYXRvbWljX3QgYmFuZHdpZHRoX3JlZjsK
PiAgfTsKPiAgCj4gIHN0cnVjdCB2c3luY19pbmZvIHsKPiAtLSAKPiAyLjIxLjAKPiAKCi0tIApT
ZWFuIFBhdWwsIFNvZnR3YXJlIEVuZ2luZWVyLCBHb29nbGUgLyBDaHJvbWl1bSBPUwpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGlu
ZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVl
ZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
