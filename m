Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 115DC8D28D
	for <lists+dri-devel@lfdr.de>; Wed, 14 Aug 2019 13:55:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BC6FD899BB;
	Wed, 14 Aug 2019 11:54:58 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from metis.ext.pengutronix.de (metis.ext.pengutronix.de
 [IPv6:2001:67c:670:201:290:27ff:fe1d:cc33])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4C43B89A1E
 for <dri-devel@lists.freedesktop.org>; Wed, 14 Aug 2019 11:54:57 +0000 (UTC)
Received: from dude02.hi.pengutronix.de ([2001:67c:670:100:1d::28]
 helo=dude02.pengutronix.de.)
 by metis.ext.pengutronix.de with esmtp (Exim 4.92)
 (envelope-from <p.zabel@pengutronix.de>)
 id 1hxrrj-00036w-LD; Wed, 14 Aug 2019 13:54:55 +0200
From: Philipp Zabel <p.zabel@pengutronix.de>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 6/7] gpu: ipu-v3: image-convert: move tile burst alignment out
 of loop
Date: Wed, 14 Aug 2019 13:54:43 +0200
Message-Id: <20190814115444.13024-6-p.zabel@pengutronix.de>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190814115444.13024-1-p.zabel@pengutronix.de>
References: <20190814115444.13024-1-p.zabel@pengutronix.de>
MIME-Version: 1.0
X-SA-Exim-Connect-IP: 2001:67c:670:100:1d::28
X-SA-Exim-Mail-From: p.zabel@pengutronix.de
X-SA-Exim-Scanned: No (on metis.ext.pengutronix.de);
 SAEximRunCond expanded to false
X-PTX-Original-Recipient: dri-devel@lists.freedesktop.org
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: kernel@pengutronix.de, Steve Longerbeam <slongerbeam@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

QnVyc3QgYWxpZ25lZCBpbnB1dCBhbmQgb3V0cHV0IHdpZHRoIGNhbiBiZSBjYWxjdWxhdGVkIG9u
Y2UgcGVyIGNvbHVtbiwKaW5zdGVhZCBvZiByZXBlYXRlZGx5IGZvciBlYWNoIHRpbGUgaW4gdGhl
IGNvbHVtbi4gVGhlIHNhbWUgZ29lcyBmb3IKaW5wdXQgYW5kIG91dHB1dCBoZWlnaHQgcGVyIHJv
dy4gQWxzbyBkb24ndCByb3VuZCB1cCB0aGUgc2FtZSB2YWx1ZXMKcmVwZWF0ZWRseS4KClNpZ25l
ZC1vZmYtYnk6IFBoaWxpcHAgWmFiZWwgPHAuemFiZWxAcGVuZ3V0cm9uaXguZGU+Ci0tLQogZHJp
dmVycy9ncHUvaXB1LXYzL2lwdS1pbWFnZS1jb252ZXJ0LmMgfCA4NCArKysrKysrKysrKysrKy0t
LS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDQ1IGluc2VydGlvbnMoKyksIDM5IGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2lwdS12My9pcHUtaW1hZ2UtY29udmVydC5j
IGIvZHJpdmVycy9ncHUvaXB1LXYzL2lwdS1pbWFnZS1jb252ZXJ0LmMKaW5kZXggYWNlODMxYzU0
ZWQ3Li5jYzIzN2MxZjMyZjAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2lwdS12My9pcHUtaW1h
Z2UtY29udmVydC5jCisrKyBiL2RyaXZlcnMvZ3B1L2lwdS12My9pcHUtaW1hZ2UtY29udmVydC5j
CkBAIC0xMTE5LDYgKzExMTksNyBAQCBzdGF0aWMgdm9pZCBjYWxjX3RpbGVfcmVzaXplX2NvZWZm
aWNpZW50cyhzdHJ1Y3QgaXB1X2ltYWdlX2NvbnZlcnRfY3R4ICpjdHgpCiAJCQkgICAgICAgIShj
dHgtPnJvdF9tb2RlICYgSVBVX1JPVF9CSVRfSEZMSVApOwogCQl1MzIgcmVzaXplZF93aWR0aDsK
IAkJdTMyIHJlc2l6ZV9jb2VmZl9oOworCQl1MzIgaW5fd2lkdGg7CiAKIAkJdGlsZV9pZHggPSBj
b2w7CiAJCWluX3RpbGUgPSAmY3R4LT5pbi50aWxlW3RpbGVfaWR4XTsKQEAgLTExMzYsMzMgKzEx
MzcsMzUgQEAgc3RhdGljIHZvaWQgY2FsY190aWxlX3Jlc2l6ZV9jb2VmZmljaWVudHMoc3RydWN0
IGlwdV9pbWFnZV9jb252ZXJ0X2N0eCAqY3R4KQogCQlkZXZfZGJnKHByaXYtPmlwdS0+ZGV2LCAi
JXM6IGNvbHVtbiAldSBoc2NhbGU6ICo4MTkyLyV1XG4iLAogCQkJX19mdW5jX18sIGNvbCwgcmVz
aXplX2NvZWZmX2gpOwogCisJCS8qCisJCSAqIFdpdGggdGhlIGhvcml6b250YWwgc2NhbGluZyBm
YWN0b3Iga25vd24sIHJvdW5kIHVwIHJlc2l6ZWQKKwkJICogd2lkdGggKG91dHB1dCB3aWR0aCBv
ciBoZWlnaHQpIHRvIGJ1cnN0IHNpemUuCisJCSAqLworCQlyZXNpemVkX3dpZHRoID0gcm91bmRf
dXAocmVzaXplZF93aWR0aCwgOCk7CisKKwkJLyoKKwkJICogQ2FsY3VsYXRlIGlucHV0IHdpZHRo
IGZyb20gdGhlIGxhc3QgYWNjZXNzZWQgaW5wdXQgcGl4ZWwKKwkJICogZ2l2ZW4gcmVzaXplZCB3
aWR0aCBhbmQgc2NhbGluZyBjb2VmZmljaWVudHMuIFJvdW5kIHVwIHRvCisJCSAqIGJ1cnN0IHNp
emUuCisJCSAqLworCQlsYXN0X291dHB1dCA9IHJlc2l6ZWRfd2lkdGggLSAxOworCQlpZiAoY2xv
c2VzdCkKKwkJCWxhc3Rfb3V0cHV0Kys7CisJCWluX3dpZHRoID0gcm91bmRfdXAoCisJCQkoRElW
X1JPVU5EX1VQKGxhc3Rfb3V0cHV0ICogcmVzaXplX2NvZWZmX2gsIDgxOTIpICsgMSkKKwkJCTw8
IGN0eC0+ZG93bnNpemVfY29lZmZfaCwgOCk7CiAKIAkJZm9yIChyb3cgPSAwOyByb3cgPCBjdHgt
PmluLm51bV9yb3dzOyByb3crKykgewogCQkJdGlsZV9pZHggPSByb3cgKiBjdHgtPmluLm51bV9j
b2xzICsgY29sOwogCQkJaW5fdGlsZSA9ICZjdHgtPmluLnRpbGVbdGlsZV9pZHhdOwogCQkJb3V0
X3RpbGUgPSAmY3R4LT5vdXQudGlsZVtjdHgtPm91dF90aWxlX21hcFt0aWxlX2lkeF1dOwogCi0J
CQkvKgotCQkJICogV2l0aCB0aGUgaG9yaXpvbnRhbCBzY2FsaW5nIGZhY3RvciBrbm93biwgcm91
bmQgdXAKLQkJCSAqIHJlc2l6ZWQgd2lkdGggKG91dHB1dCB3aWR0aCBvciBoZWlnaHQpIHRvIGJ1
cnN0IHNpemUuCi0JCQkgKi8KIAkJCWlmIChpcHVfcm90X21vZGVfaXNfaXJ0KGN0eC0+cm90X21v
ZGUpKQotCQkJCW91dF90aWxlLT5oZWlnaHQgPSByb3VuZF91cChyZXNpemVkX3dpZHRoLCA4KTsK
KwkJCQlvdXRfdGlsZS0+aGVpZ2h0ID0gcmVzaXplZF93aWR0aDsKIAkJCWVsc2UKLQkJCQlvdXRf
dGlsZS0+d2lkdGggPSByb3VuZF91cChyZXNpemVkX3dpZHRoLCA4KTsKLQotCQkJLyoKLQkJCSAq
IENhbGN1bGF0ZSBpbnB1dCB3aWR0aCBmcm9tIHRoZSBsYXN0IGFjY2Vzc2VkIGlucHV0Ci0JCQkg
KiBwaXhlbCBnaXZlbiByZXNpemVkIHdpZHRoIGFuZCBzY2FsaW5nIGNvZWZmaWNpZW50cy4KLQkJ
CSAqIFJvdW5kIHVwIHRvIGJ1cnN0IHNpemUuCi0JCQkgKi8KLQkJCWxhc3Rfb3V0cHV0ID0gcm91
bmRfdXAocmVzaXplZF93aWR0aCwgOCkgLSAxOwotCQkJaWYgKGNsb3Nlc3QpCi0JCQkJbGFzdF9v
dXRwdXQrKzsKLQkJCWluX3RpbGUtPndpZHRoID0gcm91bmRfdXAoCi0JCQkJKERJVl9ST1VORF9V
UChsYXN0X291dHB1dCAqIHJlc2l6ZV9jb2VmZl9oLAotCQkJCQkgICAgICA4MTkyKSArIDEpCi0J
CQkJPDwgY3R4LT5kb3duc2l6ZV9jb2VmZl9oLCA4KTsKKwkJCQlvdXRfdGlsZS0+d2lkdGggPSBy
ZXNpemVkX3dpZHRoOworCisJCQlpbl90aWxlLT53aWR0aCA9IGluX3dpZHRoOwogCQl9CiAKIAkJ
Y3R4LT5yZXNpemVfY29lZmZzX2hbY29sXSA9IHJlc2l6ZV9jb2VmZl9oOwpAQCAtMTE3Myw2ICsx
MTc2LDcgQEAgc3RhdGljIHZvaWQgY2FsY190aWxlX3Jlc2l6ZV9jb2VmZmljaWVudHMoc3RydWN0
IGlwdV9pbWFnZV9jb252ZXJ0X2N0eCAqY3R4KQogCQkJICAgICAgICEoY3R4LT5yb3RfbW9kZSAm
IElQVV9ST1RfQklUX1ZGTElQKTsKIAkJdTMyIHJlc2l6ZWRfaGVpZ2h0OwogCQl1MzIgcmVzaXpl
X2NvZWZmX3Y7CisJCXUzMiBpbl9oZWlnaHQ7CiAKIAkJdGlsZV9pZHggPSByb3cgKiBjdHgtPmlu
Lm51bV9jb2xzOwogCQlpbl90aWxlID0gJmN0eC0+aW4udGlsZVt0aWxlX2lkeF07CkBAIC0xMTkw
LDMzICsxMTk0LDM1IEBAIHN0YXRpYyB2b2lkIGNhbGNfdGlsZV9yZXNpemVfY29lZmZpY2llbnRz
KHN0cnVjdCBpcHVfaW1hZ2VfY29udmVydF9jdHggKmN0eCkKIAkJZGV2X2RiZyhwcml2LT5pcHUt
PmRldiwgIiVzOiByb3cgJXUgdnNjYWxlOiAqODE5Mi8ldVxuIiwKIAkJCV9fZnVuY19fLCByb3cs
IHJlc2l6ZV9jb2VmZl92KTsKIAorCQkvKgorCQkgKiBXaXRoIHRoZSB2ZXJ0aWNhbCBzY2FsaW5n
IGZhY3RvciBrbm93biwgcm91bmQgdXAgcmVzaXplZAorCQkgKiBoZWlnaHQgKG91dHB1dCB3aWR0
aCBvciBoZWlnaHQpIHRvIElETUFDIGxpbWl0YXRpb25zLgorCQkgKi8KKwkJcmVzaXplZF9oZWln
aHQgPSByb3VuZF91cChyZXNpemVkX2hlaWdodCwgMik7CisKKwkJLyoKKwkJICogQ2FsY3VsYXRl
IGlucHV0IHdpZHRoIGZyb20gdGhlIGxhc3QgYWNjZXNzZWQgaW5wdXQgcGl4ZWwKKwkJICogZ2l2
ZW4gcmVzaXplZCBoZWlnaHQgYW5kIHNjYWxpbmcgY29lZmZpY2llbnRzLiBBbGlnbiB0bworCQkg
KiBJRE1BQyByZXN0cmljdGlvbnMuCisJCSAqLworCQlsYXN0X291dHB1dCA9IHJlc2l6ZWRfaGVp
Z2h0IC0gMTsKKwkJaWYgKGNsb3Nlc3QpCisJCQlsYXN0X291dHB1dCsrOworCQlpbl9oZWlnaHQg
PSByb3VuZF91cCgKKwkJCShESVZfUk9VTkRfVVAobGFzdF9vdXRwdXQgKiByZXNpemVfY29lZmZf
diwgODE5MikgKyAxKQorCQkJPDwgY3R4LT5kb3duc2l6ZV9jb2VmZl92LCAyKTsKKwogCQlmb3Ig
KGNvbCA9IDA7IGNvbCA8IGN0eC0+aW4ubnVtX2NvbHM7IGNvbCsrKSB7CiAJCQl0aWxlX2lkeCA9
IHJvdyAqIGN0eC0+aW4ubnVtX2NvbHMgKyBjb2w7CiAJCQlpbl90aWxlID0gJmN0eC0+aW4udGls
ZVt0aWxlX2lkeF07CiAJCQlvdXRfdGlsZSA9ICZjdHgtPm91dC50aWxlW2N0eC0+b3V0X3RpbGVf
bWFwW3RpbGVfaWR4XV07CiAKLQkJCS8qCi0JCQkgKiBXaXRoIHRoZSB2ZXJ0aWNhbCBzY2FsaW5n
IGZhY3RvciBrbm93biwgcm91bmQgdXAKLQkJCSAqIHJlc2l6ZWQgaGVpZ2h0IChvdXRwdXQgd2lk
dGggb3IgaGVpZ2h0KSB0byBJRE1BQwotCQkJICogbGltaXRhdGlvbnMuCi0JCQkgKi8KIAkJCWlm
IChpcHVfcm90X21vZGVfaXNfaXJ0KGN0eC0+cm90X21vZGUpKQotCQkJCW91dF90aWxlLT53aWR0
aCA9IHJvdW5kX3VwKHJlc2l6ZWRfaGVpZ2h0LCAyKTsKKwkJCQlvdXRfdGlsZS0+d2lkdGggPSBy
ZXNpemVkX2hlaWdodDsKIAkJCWVsc2UKLQkJCQlvdXRfdGlsZS0+aGVpZ2h0ID0gcm91bmRfdXAo
cmVzaXplZF9oZWlnaHQsIDIpOwotCi0JCQkvKgotCQkJICogQ2FsY3VsYXRlIGlucHV0IHdpZHRo
IGZyb20gdGhlIGxhc3QgYWNjZXNzZWQgaW5wdXQKLQkJCSAqIHBpeGVsIGdpdmVuIHJlc2l6ZWQg
aGVpZ2h0IGFuZCBzY2FsaW5nIGNvZWZmaWNpZW50cy4KLQkJCSAqIEFsaWduIHRvIElETUFDIHJl
c3RyaWN0aW9ucy4KLQkJCSAqLwotCQkJbGFzdF9vdXRwdXQgPSByb3VuZF91cChyZXNpemVkX2hl
aWdodCwgMikgLSAxOwotCQkJaWYgKGNsb3Nlc3QpCi0JCQkJbGFzdF9vdXRwdXQrKzsKLQkJCWlu
X3RpbGUtPmhlaWdodCA9IHJvdW5kX3VwKAotCQkJCShESVZfUk9VTkRfVVAobGFzdF9vdXRwdXQg
KiByZXNpemVfY29lZmZfdiwKLQkJCQkJICAgICAgODE5MikgKyAxKQotCQkJCTw8IGN0eC0+ZG93
bnNpemVfY29lZmZfdiwgMik7CisJCQkJb3V0X3RpbGUtPmhlaWdodCA9IHJlc2l6ZWRfaGVpZ2h0
OworCisJCQlpbl90aWxlLT5oZWlnaHQgPSBpbl9oZWlnaHQ7CiAJCX0KIAogCQljdHgtPnJlc2l6
ZV9jb2VmZnNfdltyb3ddID0gcmVzaXplX2NvZWZmX3Y7Ci0tIAoyLjIwLjEKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxp
c3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNr
dG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
