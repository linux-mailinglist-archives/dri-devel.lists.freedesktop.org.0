Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 40870BBA83
	for <lists+dri-devel@lfdr.de>; Mon, 23 Sep 2019 19:28:25 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 62B2B6E988;
	Mon, 23 Sep 2019 17:28:06 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C99256E981
 for <dri-devel@lists.freedesktop.org>; Mon, 23 Sep 2019 17:28:03 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 8B515B62E;
 Mon, 23 Sep 2019 17:28:00 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: airlied@linux.ie, daniel@ffwll.ch, kraxel@redhat.com, sam@ravnborg.org,
 yc_chen@aspeedtech.com, corbet@lwn.net
Subject: [PATCH v2 07/12] drm/mgag200: Add init and fini functions for cursor
 handling
Date: Mon, 23 Sep 2019 19:27:48 +0200
Message-Id: <20190923172753.26593-8-tzimmermann@suse.de>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20190923172753.26593-1-tzimmermann@suse.de>
References: <20190923172753.26593-1-tzimmermann@suse.de>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Zimmermann <tzimmermann@suse.de>, dri-devel@lists.freedesktop.org,
 linux-doc@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TW92aW5nIHRoZSBjdXJzb3IgaW5pdGlhbGl6YXRpb24gYW5kIGNsZWFudXAgaW50byBzZXBhcmF0
ZSBmdW5jdGlvbnMKbWFrZXMgdGhlIG92ZXJhbGwgY29kZSBzbGlnaHRseSBtb3JlIHJlYWRhYmxl
LgoKU2lnbmVkLW9mZi1ieTogVGhvbWFzIFppbW1lcm1hbm4gPHR6aW1tZXJtYW5uQHN1c2UuZGU+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9jdXJzb3IuYyB8IDI4ICsrKysr
KysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9kcnYu
aCAgICB8ICAyICsrCiBkcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX21haW4uYyAgIHwg
MTggKysrKystLS0tLS0tLS0tCiAzIGZpbGVzIGNoYW5nZWQsIDM1IGluc2VydGlvbnMoKyksIDEz
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL21nYWcy
MDBfY3Vyc29yLmMgYi9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX2N1cnNvci5jCmlu
ZGV4IDNkZjcwZDg2YWYyMS4uZDM5ZTJiYzU3YTcwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vbWdhZzIwMC9tZ2FnMjAwX2N1cnNvci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAw
L21nYWcyMDBfY3Vyc29yLmMKQEAgLTI1LDYgKzI1LDM0IEBAIHN0YXRpYyB2b2lkIG1nYWcyMDBf
aGlkZV9jdXJzb3Ioc3RydWN0IG1nYV9kZXZpY2UgKm1kZXYpCiAJbWRldi0+Y3Vyc29yLnBpeGVs
c19jdXJyZW50ID0gTlVMTDsKIH0KIAoraW50IG1nYWcyMDBfY3Vyc29yX2luaXQoc3RydWN0IG1n
YV9kZXZpY2UgKm1kZXYpCit7CisJc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IG1kZXYtPmRldjsK
KworCS8qCisJICogTWFrZSBzbWFsbCBidWZmZXJzIHRvIHN0b3JlIGEgaGFyZHdhcmUgY3Vyc29y
IChkb3VibGUKKwkgKiBidWZmZXJlZCBpY29uIHVwZGF0ZXMpCisJICovCisJbWRldi0+Y3Vyc29y
LnBpeGVsc18xID0gZHJtX2dlbV92cmFtX2NyZWF0ZShkZXYsICZkZXYtPnZyYW1fbW0tPmJkZXYs
CisJCQkJCQkgICAgcm91bmR1cCg0OCo2NCwgUEFHRV9TSVpFKSwKKwkJCQkJCSAgICAwLCAwKTsK
KwltZGV2LT5jdXJzb3IucGl4ZWxzXzIgPSBkcm1fZ2VtX3ZyYW1fY3JlYXRlKGRldiwgJmRldi0+
dnJhbV9tbS0+YmRldiwKKwkJCQkJCSAgICByb3VuZHVwKDQ4KjY0LCBQQUdFX1NJWkUpLAorCQkJ
CQkJICAgIDAsIDApOworCWlmIChJU19FUlIobWRldi0+Y3Vyc29yLnBpeGVsc18yKSB8fCBJU19F
UlIobWRldi0+Y3Vyc29yLnBpeGVsc18xKSkgeworCQltZGV2LT5jdXJzb3IucGl4ZWxzXzEgPSBO
VUxMOworCQltZGV2LT5jdXJzb3IucGl4ZWxzXzIgPSBOVUxMOworCQlkZXZfd2FybigmZGV2LT5w
ZGV2LT5kZXYsCisJCQkiQ291bGQgbm90IGFsbG9jYXRlIHNwYWNlIGZvciBjdXJzb3JzLiBOb3Qg
ZG9pbmcgaGFyZHdhcmUgY3Vyc29ycy5cbiIpOworCX0KKwltZGV2LT5jdXJzb3IucGl4ZWxzX2N1
cnJlbnQgPSBOVUxMOworCisJcmV0dXJuIDA7Cit9CisKK3ZvaWQgbWdhZzIwMF9jdXJzb3JfZmlu
aShzdHJ1Y3QgbWdhX2RldmljZSAqbWRldikKK3sgfQorCiBpbnQgbWdhZzIwMF9jcnRjX2N1cnNv
cl9zZXQoc3RydWN0IGRybV9jcnRjICpjcnRjLCBzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwK
IAkJCSAgICB1aW50MzJfdCBoYW5kbGUsIHVpbnQzMl90IHdpZHRoLCB1aW50MzJfdCBoZWlnaHQp
CiB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX2Rydi5oIGIv
ZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIwMF9kcnYuaAppbmRleCA1MjQ0ZTNmYTQyMDMu
LjAxMjQzZmE2Mzk3YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21nYWcyMDAvbWdhZzIw
MF9kcnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX2Rydi5oCkBAIC0y
MDMsNiArMjAzLDggQEAgaW50IG1nYWcyMDBfbW1faW5pdChzdHJ1Y3QgbWdhX2RldmljZSAqbWRl
dik7CiB2b2lkIG1nYWcyMDBfbW1fZmluaShzdHJ1Y3QgbWdhX2RldmljZSAqbWRldik7CiBpbnQg
bWdhZzIwMF9tbWFwKHN0cnVjdCBmaWxlICpmaWxwLCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZt
YSk7CiAKK2ludCBtZ2FnMjAwX2N1cnNvcl9pbml0KHN0cnVjdCBtZ2FfZGV2aWNlICptZGV2KTsK
K3ZvaWQgbWdhZzIwMF9jdXJzb3JfZmluaShzdHJ1Y3QgbWdhX2RldmljZSAqbWRldik7CiBpbnQg
bWdhZzIwMF9jcnRjX2N1cnNvcl9zZXQoc3RydWN0IGRybV9jcnRjICpjcnRjLCBzdHJ1Y3QgZHJt
X2ZpbGUgKmZpbGVfcHJpdiwKIAkJCSAgICB1aW50MzJfdCBoYW5kbGUsIHVpbnQzMl90IHdpZHRo
LCB1aW50MzJfdCBoZWlnaHQpOwogaW50IG1nYWcyMDBfY3J0Y19jdXJzb3JfbW92ZShzdHJ1Y3Qg
ZHJtX2NydGMgKmNydGMsIGludCB4LCBpbnQgeSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vbWdhZzIwMC9tZ2FnMjAwX21haW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9tZ2FnMjAwL21nYWcy
MDBfbWFpbi5jCmluZGV4IGE5NzczMzM0ZGVkZi4uMmI1OTI4MDc3N2E1IDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vbWdhZzIwMC9tZ2FnMjAwX21haW4uYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vbWdhZzIwMC9tZ2FnMjAwX21haW4uYwpAQCAtMTcxLDIwICsxNzEsMTAgQEAgaW50IG1nYWcy
MDBfZHJpdmVyX2xvYWQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdW5zaWduZWQgbG9uZyBmbGFn
cykKIAkJZ290byBlcnJfbW9kZXNldDsKIAl9CiAKLQkvKiBNYWtlIHNtYWxsIGJ1ZmZlcnMgdG8g
c3RvcmUgYSBoYXJkd2FyZSBjdXJzb3IgKGRvdWJsZSBidWZmZXJlZCBpY29uIHVwZGF0ZXMpICov
Ci0JbWRldi0+Y3Vyc29yLnBpeGVsc18xID0gZHJtX2dlbV92cmFtX2NyZWF0ZShkZXYsICZkZXYt
PnZyYW1fbW0tPmJkZXYsCi0JCQkJCQkgICAgcm91bmR1cCg0OCo2NCwgUEFHRV9TSVpFKSwKLQkJ
CQkJCSAgICAwLCAwKTsKLQltZGV2LT5jdXJzb3IucGl4ZWxzXzIgPSBkcm1fZ2VtX3ZyYW1fY3Jl
YXRlKGRldiwgJmRldi0+dnJhbV9tbS0+YmRldiwKLQkJCQkJCSAgICByb3VuZHVwKDQ4KjY0LCBQ
QUdFX1NJWkUpLAotCQkJCQkJICAgIDAsIDApOwotCWlmIChJU19FUlIobWRldi0+Y3Vyc29yLnBp
eGVsc18yKSB8fCBJU19FUlIobWRldi0+Y3Vyc29yLnBpeGVsc18xKSkgewotCQltZGV2LT5jdXJz
b3IucGl4ZWxzXzEgPSBOVUxMOwotCQltZGV2LT5jdXJzb3IucGl4ZWxzXzIgPSBOVUxMOworCXIg
PSBtZ2FnMjAwX2N1cnNvcl9pbml0KG1kZXYpOworCWlmIChyKQogCQlkZXZfd2FybigmZGV2LT5w
ZGV2LT5kZXYsCi0JCQkiQ291bGQgbm90IGFsbG9jYXRlIHNwYWNlIGZvciBjdXJzb3JzLiBOb3Qg
ZG9pbmcgaGFyZHdhcmUgY3Vyc29ycy5cbiIpOwotCX0KLQltZGV2LT5jdXJzb3IucGl4ZWxzX2N1
cnJlbnQgPSBOVUxMOworCQkJIkNvdWxkIG5vdCBpbml0aWFsaXplIGN1cnNvcnMuIE5vdCBkb2lu
ZyBoYXJkd2FyZSBjdXJzb3JzLlxuIik7CiAKIAlyID0gZHJtX2ZiZGV2X2dlbmVyaWNfc2V0dXAo
bWRldi0+ZGV2LCAwKTsKIAlpZiAocikKQEAgLTE5NCw2ICsxODQsNyBAQCBpbnQgbWdhZzIwMF9k
cml2ZXJfbG9hZChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB1bnNpZ25lZCBsb25nIGZsYWdzKQog
CiBlcnJfbW9kZXNldDoKIAlkcm1fbW9kZV9jb25maWdfY2xlYW51cChkZXYpOworCW1nYWcyMDBf
Y3Vyc29yX2ZpbmkobWRldik7CiAJbWdhZzIwMF9tbV9maW5pKG1kZXYpOwogZXJyX21tOgogCWRl
di0+ZGV2X3ByaXZhdGUgPSBOVUxMOwpAQCAtMjA5LDYgKzIwMCw3IEBAIHZvaWQgbWdhZzIwMF9k
cml2ZXJfdW5sb2FkKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYpCiAJCXJldHVybjsKIAltZ2FnMjAw
X21vZGVzZXRfZmluaShtZGV2KTsKIAlkcm1fbW9kZV9jb25maWdfY2xlYW51cChkZXYpOworCW1n
YWcyMDBfY3Vyc29yX2ZpbmkobWRldik7CiAJbWdhZzIwMF9tbV9maW5pKG1kZXYpOwogCWRldi0+
ZGV2X3ByaXZhdGUgPSBOVUxMOwogfQotLSAKMi4yMy4wCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZl
bEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
