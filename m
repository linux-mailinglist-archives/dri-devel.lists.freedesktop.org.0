Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B9116A6979
	for <lists+dri-devel@lfdr.de>; Tue,  3 Sep 2019 15:15:33 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 191B88954A;
	Tue,  3 Sep 2019 13:15:30 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from pio-pvt-msa3.bahnhof.se (pio-pvt-msa3.bahnhof.se [79.136.2.42])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A437889548
 for <dri-devel@lists.freedesktop.org>; Tue,  3 Sep 2019 13:15:28 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by pio-pvt-msa3.bahnhof.se (Postfix) with ESMTP id BA0503F4A9;
 Tue,  3 Sep 2019 15:15:21 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at bahnhof.se
X-Spam-Flag: NO
X-Spam-Score: -2.099
X-Spam-Level: 
X-Spam-Status: No, score=-2.099 tagged_above=-999 required=6.31
 tests=[BAYES_00=-1.9, DKIM_SIGNED=0.1, DKIM_VALID=-0.1,
 DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1, URIBL_BLOCKED=0.001]
 autolearn=ham autolearn_force=no
Received: from pio-pvt-msa3.bahnhof.se ([127.0.0.1])
 by localhost (pio-pvt-msa3.bahnhof.se [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 9cMfPuv21WsU; Tue,  3 Sep 2019 15:15:20 +0200 (CEST)
Received: from mail1.shipmail.org (h-205-35.A357.priv.bahnhof.se
 [155.4.205.35]) (Authenticated sender: mb878879)
 by pio-pvt-msa3.bahnhof.se (Postfix) with ESMTPA id 14BFB3F364;
 Tue,  3 Sep 2019 15:15:18 +0200 (CEST)
Received: from localhost.localdomain.localdomain
 (h-205-35.A357.priv.bahnhof.se [155.4.205.35])
 by mail1.shipmail.org (Postfix) with ESMTPSA id B7E8C3602AF;
 Tue,  3 Sep 2019 15:15:17 +0200 (CEST)
From: =?UTF-8?q?Thomas=20Hellstr=C3=B6m=20=28VMware=29?=
 <thomas_os@shipmail.org>
To: dri-devel@lists.freedesktop.org, pv-drivers@vmware.com,
 linux-graphics-maintainer@vmware.com, linux-kernel@vger.kernel.org
Subject: [PATCH v2 3/4] drm/ttm,
 drm/vmwgfx: Correctly support support AMD memory encryption
Date: Tue,  3 Sep 2019 15:15:03 +0200
Message-Id: <20190903131504.18935-4-thomas_os@shipmail.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190903131504.18935-1-thomas_os@shipmail.org>
References: <20190903131504.18935-1-thomas_os@shipmail.org>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=shipmail.org; s=mail; 
 t=1567516517; bh=0YXw3Yun+eSUH41y8FVOhBIlEn3SQu6i/7a617fkyRo=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=W0qsxh85MEstfDWUa0xW3lIkk4uQqS5VeGgXE/ygSP3krzxk9pwdVHGwa94fxn1xU
 /cjB3QTUxIrfdRlJ1VLpMDVBwZr55xWb5E9iXdoIzGETdg+etqNd5oQDDKw37322G4
 tAM1SRw4QtLWbzrIZOiXbhB8veMe7w5AZaxRdNwA=
X-Mailman-Original-Authentication-Results: pio-pvt-msa3.bahnhof.se;
 dkim=pass (1024-bit key;
 unprotected) header.d=shipmail.org header.i=@shipmail.org header.b=W0qsxh85; 
 dkim-atps=neutral
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Tom Lendacky <thomas.lendacky@amd.com>,
 Thomas Hellstrom <thellstrom@vmware.com>,
 Peter Zijlstra <peterz@infradead.org>,
 Dave Hansen <dave.hansen@linux.intel.com>,
 Heiko Carstens <heiko.carstens@de.ibm.com>,
 Christian Borntraeger <borntraeger@de.ibm.com>, Ingo Molnar <mingo@redhat.com>,
 Borislav Petkov <bp@alien8.de>, Andy Lutomirski <luto@kernel.org>,
 "H. Peter Anvin" <hpa@zytor.com>, Thomas Gleixner <tglx@linutronix.de>,
 =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogVGhvbWFzIEhlbGxzdHJvbSA8dGhlbGxzdHJvbUB2bXdhcmUuY29tPgoKV2l0aCBUVE0g
cGFnZXMgYWxsb2NhdGVkIG91dCBvZiB0aGUgRE1BIHBvb2wsIHVzZSB0aGUKZm9yY2VfZG1hX3Vu
ZW5jcnlwdGVkIGZ1bmN0aW9uIHRvIGJlIGFibGUgdG8gc2V0IHVwIHRoZSBjb3JyZWN0CnBhZ2Ut
cHJvdGVjdGlvbi4gUHJldmlvdXNseSBpdCB3YXMgdW5jb25kaXRpb25hbGx5IHNldCB0byBlbmNy
eXB0ZWQsCndoaWNoIG9ubHkgd29ya3Mgd2l0aCBTTUUgZW5jcnlwdGlvbiBvbiBkZXZpY2VzIHdp
dGggYSBsYXJnZSBlbm91Z2ggRE1BCm1hc2suCgpUZXN0ZWQgd2l0aCB2bXdnZnggYW5kIHNldi1l
cy4gU2NyZWVuIGdhcmJhZ2Ugd2l0aG91dCB0aGlzIHBhdGNoIGFuZCBub3JtYWwKZnVuY3Rpb25h
bGl0eSB3aXRoIGl0LgoKQ2M6IERhdmUgSGFuc2VuIDxkYXZlLmhhbnNlbkBsaW51eC5pbnRlbC5j
b20+CkNjOiBBbmR5IEx1dG9taXJza2kgPGx1dG9Aa2VybmVsLm9yZz4KQ2M6IFBldGVyIFppamxz
dHJhIDxwZXRlcnpAaW5mcmFkZWFkLm9yZz4KQ2M6IFRob21hcyBHbGVpeG5lciA8dGdseEBsaW51
dHJvbml4LmRlPgpDYzogSW5nbyBNb2xuYXIgPG1pbmdvQHJlZGhhdC5jb20+CkNjOiBCb3Jpc2xh
diBQZXRrb3YgPGJwQGFsaWVuOC5kZT4KQ2M6ICJILiBQZXRlciBBbnZpbiIgPGhwYUB6eXRvci5j
b20+CkNjOiBIZWlrbyBDYXJzdGVucyA8aGVpa28uY2Fyc3RlbnNAZGUuaWJtLmNvbT4KQ2M6IENo
cmlzdGlhbiBCb3JudHJhZWdlciA8Ym9ybnRyYWVnZXJAZGUuaWJtLmNvbT4KQ2M6IFRvbSBMZW5k
YWNreSA8dGhvbWFzLmxlbmRhY2t5QGFtZC5jb20+CkNjOiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJp
c3RpYW4ua29lbmlnQGFtZC5jb20+ClNpZ25lZC1vZmYtYnk6IFRob21hcyBIZWxsc3Ryb20gPHRo
ZWxsc3Ryb21Adm13YXJlLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGls
LmMgICAgICAgIHwgMTcgKysrKysrKysrKysrKy0tLS0KIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRt
X2JvX3ZtLmMgICAgICAgICAgfCAyMSArKysrKysrKysrLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1
L2RybS90dG0vdHRtX3BhZ2VfYWxsb2NfZG1hLmMgfCAgNCArKysrCiBkcml2ZXJzL2dwdS9kcm0v
dm13Z2Z4L3Ztd2dmeF9ibGl0LmMgICAgIHwgIDYgKysrKy0tCiBpbmNsdWRlL2RybS90dG0vdHRt
X2JvX2RyaXZlci5oICAgICAgICAgIHwgIDggKysrKystLS0KIGluY2x1ZGUvZHJtL3R0bS90dG1f
dHQuaCAgICAgICAgICAgICAgICAgfCAgMSArCiA2IGZpbGVzIGNoYW5nZWQsIDM3IGluc2VydGlv
bnMoKyksIDIwIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0v
dHRtX2JvX3V0aWwuYyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX3V0aWwuYwppbmRleCBm
ZTgxYzU2NWU3ZWYuLmQ1YWQ4ZjAzYjYzZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fYm9fdXRpbC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX3V0aWwuYwpA
QCAtNDE5LDExICs0MTksMTMgQEAgaW50IHR0bV9ib19tb3ZlX21lbWNweShzdHJ1Y3QgdHRtX2J1
ZmZlcl9vYmplY3QgKmJvLAogCQlwYWdlID0gaSAqIGRpciArIGFkZDsKIAkJaWYgKG9sZF9pb21h
cCA9PSBOVUxMKSB7CiAJCQlwZ3Byb3RfdCBwcm90ID0gdHRtX2lvX3Byb3Qob2xkX21lbS0+cGxh
Y2VtZW50LAorCQkJCQkJICAgIHR0bS0+cGFnZV9mbGFncywKIAkJCQkJCSAgICBQQUdFX0tFUk5F
TCk7CiAJCQlyZXQgPSB0dG1fY29weV90dG1faW9fcGFnZSh0dG0sIG5ld19pb21hcCwgcGFnZSwK
IAkJCQkJCSAgIHByb3QpOwogCQl9IGVsc2UgaWYgKG5ld19pb21hcCA9PSBOVUxMKSB7CiAJCQlw
Z3Byb3RfdCBwcm90ID0gdHRtX2lvX3Byb3QobmV3X21lbS0+cGxhY2VtZW50LAorCQkJCQkJICAg
IHR0bS0+cGFnZV9mbGFncywKIAkJCQkJCSAgICBQQUdFX0tFUk5FTCk7CiAJCQlyZXQgPSB0dG1f
Y29weV9pb190dG1fcGFnZSh0dG0sIG9sZF9pb21hcCwgcGFnZSwKIAkJCQkJCSAgIHByb3QpOwpA
QCAtNTI2LDExICs1MjgsMTEgQEAgc3RhdGljIGludCB0dG1fYnVmZmVyX29iamVjdF90cmFuc2Zl
cihzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLAogCXJldHVybiAwOwogfQogCi1wZ3Byb3Rf
dCB0dG1faW9fcHJvdCh1aW50MzJfdCBjYWNoaW5nX2ZsYWdzLCBwZ3Byb3RfdCB0bXApCitwZ3By
b3RfdCB0dG1faW9fcHJvdCh1MzIgY2FjaGluZ19mbGFncywgdTMyIHR0X3BhZ2VfZmxhZ3MsIHBn
cHJvdF90IHRtcCkKIHsKIAkvKiBDYWNoZWQgbWFwcGluZ3MgbmVlZCBubyBhZGp1c3RtZW50ICov
CiAJaWYgKGNhY2hpbmdfZmxhZ3MgJiBUVE1fUExfRkxBR19DQUNIRUQpCi0JCXJldHVybiB0bXA7
CisJCWdvdG8gY2hlY2tfZW5jcnlwdGlvbjsKIAogI2lmIGRlZmluZWQoX19pMzg2X18pIHx8IGRl
ZmluZWQoX194ODZfNjRfXykKIAlpZiAoY2FjaGluZ19mbGFncyAmIFRUTV9QTF9GTEFHX1dDKQpA
QCAtNTQ4LDYgKzU1MCwxMSBAQCBwZ3Byb3RfdCB0dG1faW9fcHJvdCh1aW50MzJfdCBjYWNoaW5n
X2ZsYWdzLCBwZ3Byb3RfdCB0bXApCiAjaWYgZGVmaW5lZChfX3NwYXJjX18pCiAJdG1wID0gcGdw
cm90X25vbmNhY2hlZCh0bXApOwogI2VuZGlmCisKK2NoZWNrX2VuY3J5cHRpb246CisJaWYgKHR0
X3BhZ2VfZmxhZ3MgJiBUVE1fUEFHRV9GTEFHX0RFQ1JZUFRFRCkKKwkJdG1wID0gcGdwcm90X2Rl
Y3J5cHRlZCh0bXApOworCiAJcmV0dXJuIHRtcDsKIH0KIEVYUE9SVF9TWU1CT0wodHRtX2lvX3By
b3QpOwpAQCAtNTk0LDcgKzYwMSw4IEBAIHN0YXRpYyBpbnQgdHRtX2JvX2ttYXBfdHRtKHN0cnVj
dCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJaWYgKHJldCkKIAkJcmV0dXJuIHJldDsKIAotCWlm
IChudW1fcGFnZXMgPT0gMSAmJiAobWVtLT5wbGFjZW1lbnQgJiBUVE1fUExfRkxBR19DQUNIRUQp
KSB7CisJaWYgKG51bV9wYWdlcyA9PSAxICYmIChtZW0tPnBsYWNlbWVudCAmIFRUTV9QTF9GTEFH
X0NBQ0hFRCkgJiYKKwkgICAgISh0dG0tPnBhZ2VfZmxhZ3MgJiBUVE1fUEFHRV9GTEFHX0RFQ1JZ
UFRFRCkpIHsKIAkJLyoKIAkJICogV2UncmUgbWFwcGluZyBhIHNpbmdsZSBwYWdlLCBhbmQgdGhl
IGRlc2lyZWQKIAkJICogcGFnZSBwcm90ZWN0aW9uIGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgYm8u
CkBAIC02MDgsNyArNjE2LDggQEAgc3RhdGljIGludCB0dG1fYm9fa21hcF90dG0oc3RydWN0IHR0
bV9idWZmZXJfb2JqZWN0ICpibywKIAkJICogV2UgbmVlZCB0byB1c2Ugdm1hcCB0byBnZXQgdGhl
IGRlc2lyZWQgcGFnZSBwcm90ZWN0aW9uCiAJCSAqIG9yIHRvIG1ha2UgdGhlIGJ1ZmZlciBvYmpl
Y3QgbG9vayBjb250aWd1b3VzLgogCQkgKi8KLQkJcHJvdCA9IHR0bV9pb19wcm90KG1lbS0+cGxh
Y2VtZW50LCBQQUdFX0tFUk5FTCk7CisJCXByb3QgPSB0dG1faW9fcHJvdChtZW0tPnBsYWNlbWVu
dCwgdHRtLT5wYWdlX2ZsYWdzLAorCQkJCSAgIFBBR0VfS0VSTkVMKTsKIAkJbWFwLT5ib19rbWFw
X3R5cGUgPSB0dG1fYm9fbWFwX3ZtYXA7CiAJCW1hcC0+dmlydHVhbCA9IHZtYXAodHRtLT5wYWdl
cyArIHN0YXJ0X3BhZ2UsIG51bV9wYWdlcywKIAkJCQkgICAgMCwgcHJvdCk7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90
dG1fYm9fdm0uYwppbmRleCA3NmVlZGI5NjM2OTMuLjE5NGQ4ZDYxOGQyMyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdm0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRt
L3R0bV9ib192bS5jCkBAIC0yMjYsMTIgKzIyNiw3IEBAIHN0YXRpYyB2bV9mYXVsdF90IHR0bV9i
b192bV9mYXVsdChzdHJ1Y3Qgdm1fZmF1bHQgKnZtZikKIAkgKiBieSBtbWFwX3NlbSBpbiB3cml0
ZSBtb2RlLgogCSAqLwogCWN2bWEgPSAqdm1hOwotCWN2bWEudm1fcGFnZV9wcm90ID0gdm1fZ2V0
X3BhZ2VfcHJvdChjdm1hLnZtX2ZsYWdzKTsKLQotCWlmIChiby0+bWVtLmJ1cy5pc19pb21lbSkg
ewotCQljdm1hLnZtX3BhZ2VfcHJvdCA9IHR0bV9pb19wcm90KGJvLT5tZW0ucGxhY2VtZW50LAot
CQkJCQkJY3ZtYS52bV9wYWdlX3Byb3QpOwotCX0gZWxzZSB7CisJaWYgKCFiby0+bWVtLmJ1cy5p
c19pb21lbSkgewogCQlzdHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHggY3R4ID0gewogCQkJLmludGVy
cnVwdGlibGUgPSBmYWxzZSwKIAkJCS5ub193YWl0X2dwdSA9IGZhbHNlLApAQCAtMjQwLDE0ICsy
MzUsMTggQEAgc3RhdGljIHZtX2ZhdWx0X3QgdHRtX2JvX3ZtX2ZhdWx0KHN0cnVjdCB2bV9mYXVs
dCAqdm1mKQogCQl9OwogCiAJCXR0bSA9IGJvLT50dG07Ci0JCWN2bWEudm1fcGFnZV9wcm90ID0g
dHRtX2lvX3Byb3QoYm8tPm1lbS5wbGFjZW1lbnQsCi0JCQkJCQljdm1hLnZtX3BhZ2VfcHJvdCk7
Ci0KLQkJLyogQWxsb2NhdGUgYWxsIHBhZ2UgYXQgb25jZSwgbW9zdCBjb21tb24gdXNhZ2UgKi8K
LQkJaWYgKHR0bV90dF9wb3B1bGF0ZSh0dG0sICZjdHgpKSB7CisJCWlmICh0dG1fdHRfcG9wdWxh
dGUoYm8tPnR0bSwgJmN0eCkpIHsKIAkJCXJldCA9IFZNX0ZBVUxUX09PTTsKIAkJCWdvdG8gb3V0
X2lvX3VubG9jazsKIAkJfQorCQljdm1hLnZtX3BhZ2VfcHJvdCA9IHR0bV9pb19wcm90KGJvLT5t
ZW0ucGxhY2VtZW50LAorCQkJCQkJdHRtLT5wYWdlX2ZsYWdzLAorCQkJCQkJY3ZtYS52bV9wYWdl
X3Byb3QpOworCX0gZWxzZSB7CisJCS8qIElvbWVtIHNob3VsZCBub3QgYmUgbWFya2VkIGVuY3J5
cHRlZCAqLworCQljdm1hLnZtX3BhZ2VfcHJvdCA9IHR0bV9pb19wcm90KGJvLT5tZW0ucGxhY2Vt
ZW50LAorCQkJCQkJVFRNX1BBR0VfRkxBR19ERUNSWVBURUQsCisJCQkJCQljdm1hLnZtX3BhZ2Vf
cHJvdCk7CiAJfQogCiAJLyoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX3Bh
Z2VfYWxsb2NfZG1hLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9wYWdlX2FsbG9jX2RtYS5j
CmluZGV4IDdkNzhlNmRlYWM4OS4uOWIxNWRmOGVjZDQ5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vdHRtL3R0bV9wYWdlX2FsbG9jX2RtYS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0v
dHRtX3BhZ2VfYWxsb2NfZG1hLmMKQEAgLTQ4LDYgKzQ4LDcgQEAKICNpbmNsdWRlIDxsaW51eC9h
dG9taWMuaD4KICNpbmNsdWRlIDxsaW51eC9kZXZpY2UuaD4KICNpbmNsdWRlIDxsaW51eC9rdGhy
ZWFkLmg+CisjaW5jbHVkZSA8bGludXgvZG1hLWRpcmVjdC5oPgogI2luY2x1ZGUgPGRybS90dG0v
dHRtX2JvX2RyaXZlci5oPgogI2luY2x1ZGUgPGRybS90dG0vdHRtX3BhZ2VfYWxsb2MuaD4KICNp
bmNsdWRlIDxkcm0vdHRtL3R0bV9zZXRfbWVtb3J5Lmg+CkBAIC05ODQsNiArOTg1LDkgQEAgaW50
IHR0bV9kbWFfcG9wdWxhdGUoc3RydWN0IHR0bV9kbWFfdHQgKnR0bV9kbWEsIHN0cnVjdCBkZXZp
Y2UgKmRldiwKIAl9CiAKIAl0dG0tPnN0YXRlID0gdHRfdW5ib3VuZDsKKwlpZiAoZm9yY2VfZG1h
X3VuZW5jcnlwdGVkKGRldikpCisJCXR0bS0+cGFnZV9mbGFncyB8PSBUVE1fUEFHRV9GTEFHX0RF
Q1JZUFRFRDsKKwogCXJldHVybiAwOwogfQogRVhQT1JUX1NZTUJPTF9HUEwodHRtX2RtYV9wb3B1
bGF0ZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9ibGl0LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9ibGl0LmMKaW5kZXggYmI0NmNhMGM0NThm
Li5kM2NlZDg5YTM3ZTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4
X2JsaXQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9ibGl0LmMKQEAgLTQ4
Myw4ICs0ODMsMTAgQEAgaW50IHZtd19ib19jcHVfYmxpdChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmpl
Y3QgKmRzdCwKIAlkLnNyY19wYWdlcyA9IHNyYy0+dHRtLT5wYWdlczsKIAlkLmRzdF9udW1fcGFn
ZXMgPSBkc3QtPm51bV9wYWdlczsKIAlkLnNyY19udW1fcGFnZXMgPSBzcmMtPm51bV9wYWdlczsK
LQlkLmRzdF9wcm90ID0gdHRtX2lvX3Byb3QoZHN0LT5tZW0ucGxhY2VtZW50LCBQQUdFX0tFUk5F
TCk7Ci0JZC5zcmNfcHJvdCA9IHR0bV9pb19wcm90KHNyYy0+bWVtLnBsYWNlbWVudCwgUEFHRV9L
RVJORUwpOworCWQuZHN0X3Byb3QgPSB0dG1faW9fcHJvdChkc3QtPm1lbS5wbGFjZW1lbnQsIGRz
dC0+dHRtLT5wYWdlX2ZsYWdzLAorCQkJCSBQQUdFX0tFUk5FTCk7CisJZC5zcmNfcHJvdCA9IHR0
bV9pb19wcm90KHNyYy0+bWVtLnBsYWNlbWVudCwgc3JjLT50dG0tPnBhZ2VfZmxhZ3MsCisJCQkJ
IFBBR0VfS0VSTkVMKTsKIAlkLmRpZmYgPSBkaWZmOwogCiAJZm9yIChqID0gMDsgaiA8IGg7ICsr
aikgewpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vdHRtL3R0bV9ib19kcml2ZXIuaCBiL2luY2x1
ZGUvZHJtL3R0bS90dG1fYm9fZHJpdmVyLmgKaW5kZXggNmY1MzZjYWVhMzY4Li42OGVhZDFiZDMw
NDIgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fZHJpdmVyLmgKKysrIGIvaW5j
bHVkZS9kcm0vdHRtL3R0bV9ib19kcml2ZXIuaApAQCAtODkzLDEzICs4OTMsMTUgQEAgaW50IHR0
bV9ib19waXBlbGluZV9ndXR0aW5nKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8pOwogLyoq
CiAgKiB0dG1faW9fcHJvdAogICoKLSAqIEBjX3N0YXRlOiBDYWNoaW5nIHN0YXRlLgorICogQGNh
Y2hpbmdfZmxhZ3M6IFRoZSBjYWNoaW5nIGZsYWdzIG9mIHRoZSBtYXAuCisgKiBAdHRfcGFnZV9m
bGFnczogVGhlIHR0X3BhZ2VfZmxhZ3Mgb2YgdGhlIG1hcCwgVFRNX1BBR0VfRkxBR18qCiAgKiBA
dG1wOiBQYWdlIHByb3RlY3Rpb24gZmxhZyBmb3IgYSBub3JtYWwsIGNhY2hlZCBtYXBwaW5nLgog
ICoKICAqIFV0aWxpdHkgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBwZ3Byb3RfdCB0aGF0IHNo
b3VsZCBiZSB1c2VkIGZvcgotICogc2V0dGluZyB1cCBhIFBURSB3aXRoIHRoZSBjYWNoaW5nIG1v
ZGVsIGluZGljYXRlZCBieSBAY19zdGF0ZS4KKyAqIHNldHRpbmcgdXAgYSBQVEUgd2l0aCB0aGUg
Y2FjaGluZyBtb2RlbCBpbmRpY2F0ZWQgYnkgQGNhY2hpbmdfZmxhZ3MsCisgKiBhbmQgZW5jcnlw
dGlvbiBzdGF0ZSBpbmRpY2F0ZWQgYnkgQHR0X3BhZ2VfZmxhZ3MsCiAgKi8KLXBncHJvdF90IHR0
bV9pb19wcm90KHVpbnQzMl90IGNhY2hpbmdfZmxhZ3MsIHBncHJvdF90IHRtcCk7CitwZ3Byb3Rf
dCB0dG1faW9fcHJvdCh1MzIgY2FjaGluZ19mbGFncywgdTMyIHR0X3BhZ2VfZmxhZ3MsIHBncHJv
dF90IHRtcCk7CiAKIGV4dGVybiBjb25zdCBzdHJ1Y3QgdHRtX21lbV90eXBlX21hbmFnZXJfZnVu
YyB0dG1fYm9fbWFuYWdlcl9mdW5jOwogCmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS90dG0vdHRt
X3R0LmggYi9pbmNsdWRlL2RybS90dG0vdHRtX3R0LmgKaW5kZXggYzBlOTI4YWJmNTkyLi40NWNj
MjYzNTU1MTMgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvZHJtL3R0bS90dG1fdHQuaAorKysgYi9pbmNs
dWRlL2RybS90dG0vdHRtX3R0LmgKQEAgLTQxLDYgKzQxLDcgQEAgc3RydWN0IHR0bV9vcGVyYXRp
b25fY3R4OwogI2RlZmluZSBUVE1fUEFHRV9GTEFHX0RNQTMyICAgICAgICAgICAoMSA8PCA3KQog
I2RlZmluZSBUVE1fUEFHRV9GTEFHX1NHICAgICAgICAgICAgICAoMSA8PCA4KQogI2RlZmluZSBU
VE1fUEFHRV9GTEFHX05PX1JFVFJZCSAgICAgICgxIDw8IDkpCisjZGVmaW5lIFRUTV9QQUdFX0ZM
QUdfREVDUllQVEVEICAgICAgICgxIDw8IDEwKQogCiBlbnVtIHR0bV9jYWNoaW5nX3N0YXRlIHsK
IAl0dF91bmNhY2hlZCwKLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlz
dGluZm8vZHJpLWRldmVs
