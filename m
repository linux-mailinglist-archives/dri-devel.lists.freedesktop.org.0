Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 961E0F1B47
	for <lists+dri-devel@lfdr.de>; Wed,  6 Nov 2019 17:31:42 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 408E26EDD8;
	Wed,  6 Nov 2019 16:31:39 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from bhuna.collabora.co.uk (bhuna.collabora.co.uk [46.235.227.227])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4BFA46EDD8
 for <dri-devel@lists.freedesktop.org>; Wed,  6 Nov 2019 16:31:34 +0000 (UTC)
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: aratiu) with ESMTPSA id 24F5628FDC1
From: Adrian Ratiu <adrian.ratiu@collabora.com>
To: linux-arm-kernel@lists.infradead.org,
 linux-stm32@st-md-mailman.stormreply.com,
 linux-rockchip@lists.infradead.org
Subject: [PATCH v2 2/4] drm: bridge: dw_mipi_dsi: abstract register access
 using reg_fields
Date: Wed,  6 Nov 2019 18:30:29 +0200
Message-Id: <20191106163031.808061-3-adrian.ratiu@collabora.com>
X-Mailer: git-send-email 2.23.0
In-Reply-To: <20191106163031.808061-1-adrian.ratiu@collabora.com>
References: <20191106163031.808061-1-adrian.ratiu@collabora.com>
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Neil Armstrong <narmstrong@baylibre.com>,
 Emil Velikov <emil.l.velikov@gmail.com>, linux-kernel@vger.kernel.org,
 dri-devel@lists.freedesktop.org,
 Boris Brezillon <boris.brezillon@collabora.com>, kernel@collabora.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

UmVnaXN0ZXIgZXhpc3RlbmNlLCBhZGRyZXNzL29mZnNldHMsIGZpZWxkIGxheW91dHMsIHJlc2Vy
dmVkIGJpdHMgYW5kCnNvIG9uIGRpZmZlciBiZXR3ZWVuIE1JUEktRFNJIHZlcnNpb25zIGFuZCBi
ZXR3ZWVuIFNvQyB2ZW5kb3IgYm9hcmRzLgpEZXNwaXRlIHRoZXNlIGRpZmZlcmVuY2VzIHRoZSBo
dyBJUCBhbmQgcHJvdG9jb2xzIGFyZSBtb3N0bHkgdGhlIHNhbWUKc28gdGhlIGdlbmVyaWMgZHJp
dmVyIGNhbiBiZSBtYWRlIHRvIGNvbXBlbnNhdGUgdGhlc2UgZGlmZmVyZW5jZXMuCgpUaGUgY3Vy
cmVudCBSb2NrY2hpcCBhbmQgU1RNIGRyaXZlcnMgaGFyZGNvZGVkIGEgbG90IG9mIHRoZWlyIGNv
bW1vbgpkZWZpbml0aW9ucyBpbiB0aGUgYnJpZGdlIGNvZGUgYmVjYXVzZSB0aGV5J3JlIGJhc2Vk
IG9uIERTSSB2MS4zMCBhbmQKMS4zMSB3aGljaCBhcmUgcmVsYXRpdmVseSBjbG9zZSwgYnV0IGlu
IG9yZGVyIHRvIHN1cHBvcnQgb2xkZXIvZnV0dXJlCnZlcnNpb25zIHdpdGggbW9yZSBkaXZlcmdp
bmcgbGF5b3V0cyBsaWtlIHRoZSB2MS4wMSBwcmVzZW50IG9uIGlteDYsCndlIGFic3RyYWN0IHNv
bWUgb2YgdGhlIHJlZ2lzdGVyIGFjY2Vzc2VzIHZpYSB0aGUgcmVnbWFwIGZpZWxkIEFQSXMuCgpU
aGUgYnJpZGdlIGRldGVjdHMgdGhlIERTSSBjb3JlIHZlcnNpb24gYW5kIGluaXRpYWxpemVzIHRo
ZSByZXF1aXJlZApyZWdtYXAgcmVnaXN0ZXIgbGF5b3V0LCBzbyBwbGF0Zm9ybSBkcml2ZXJzIHdp
bGwgY29udGludWUgdG8gdXNlIHRoZQpyZWdtYXAgYXMgYmVmb3JlLiBPdGhlciBEU0kgdmVyc2lv
bnMgLyByZWdpc3RlciBsYXlvdXRzIGNhbiBlYXNpbHkgYmUKYWRkZWQgaW4gdGhlIGZ1dHVyZSBi
eSBvbmx5IGNoYW5naW5nIHRoZSBicmlkZ2UgY29kZS4KCkFuIGFkZGl0aW9uYWwgYmVuZWZpdCBv
ZiB1c2luZyB0aGUgcmVnX2ZpZWxkIEFQSSBpcyB0aGF0IG11Y2ggb2YgdGhlCmJpdC1zaGlmdGlu
ZyBhbmQgbWFza2luZyBib2lsZXJwbGF0ZSBpcyByZW1vdmVkIGJlY2F1c2UgaXQncyBub3cKaGFu
ZGxlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZSByZWdtYXAgc3Vic3lzdGVtLgoKTm90IGFsbCByZWdp
c3RlciBhY2Nlc3NlcyBoYXZlIGJlZW4gY29udmVydGVkOiBvbmx5IHRoZSBtaW5pbXVtIGRpZmYK
YmV0d2VlbiB0aGUgdGhyZWUgaG9zdCBjb250cm9sbGVyIHZlcnNpb25zIHN1cHBvcnRlZCBieSB0
aGUgY3VycmVudAp2ZW5kb3IgcGxhdGZvcm0gZHJpdmVycyAocm9ja2NoaXAsIHN0bSBhbmQgbm93
IGlteCksIG1vcmUgY2FuIGJlIGFkZGVkCmluIHRoZSBmdXR1cmUgYXMgbmVlZGVkLgoKU3VnZ2Vz
dGVkLWJ5OiBCb3JpcyBCcmV6aWxsb24gPGJvcmlzLmJyZXppbGxvbkBjb2xsYWJvcmEuY29tPgpS
ZXZpZXdlZC1ieTogTmVpbCBBcm1zdHJvbmcgPG5hcm1zdHJvbmdAYmF5bGlicmUuY29tPgpSZXZp
ZXdlZC1ieTogRW1pbCBWZWxpa292IDxlbWlsLmwudmVsaWtvdkBnbWFpbC5jb20+ClNpZ25lZC1v
ZmYtYnk6IEFkcmlhbiBSYXRpdSA8YWRyaWFuLnJhdGl1QGNvbGxhYm9yYS5jb20+Ci0tLQogZHJp
dmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1taXBpLWRzaS5jIHwgNTA0ICsrKysrKysr
KysrKy0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDM0NiBpbnNlcnRpb25zKCspLCAxNTggZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1t
aXBpLWRzaS5jIGIvZHJpdmVycy9ncHUvZHJtL2JyaWRnZS9zeW5vcHN5cy9kdy1taXBpLWRzaS5j
CmluZGV4IDZjYjU3ODA3ZjNmOS4uYTA2MzczMjhmYmMxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vYnJpZGdlL3N5bm9wc3lzL2R3LW1pcGktZHNpLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2JyaWRnZS9zeW5vcHN5cy9kdy1taXBpLWRzaS5jCkBAIC00Nyw3ICs0Nyw2IEBACiAjZGVmaW5l
IERQSV9WQ0lEKHZjaWQpCQkJKCh2Y2lkKSAmIDB4MykKIAogI2RlZmluZSBEU0lfRFBJX0NPTE9S
X0NPRElORwkJMHgxMAotI2RlZmluZSBMT09TRUxZMThfRU4JCQlCSVQoOCkKICNkZWZpbmUgRFBJ
X0NPTE9SX0NPRElOR18xNkJJVF8xCTB4MAogI2RlZmluZSBEUElfQ09MT1JfQ09ESU5HXzE2QklU
XzIJMHgxCiAjZGVmaW5lIERQSV9DT0xPUl9DT0RJTkdfMTZCSVRfMwkweDIKQEAgLTU2LDExICs1
NSw2IEBACiAjZGVmaW5lIERQSV9DT0xPUl9DT0RJTkdfMjRCSVQJCTB4NQogCiAjZGVmaW5lIERT
SV9EUElfQ0ZHX1BPTAkJCTB4MTQKLSNkZWZpbmUgQ09MT1JNX0FDVElWRV9MT1cJCUJJVCg0KQot
I2RlZmluZSBTSFVURF9BQ1RJVkVfTE9XCQlCSVQoMykKLSNkZWZpbmUgSFNZTkNfQUNUSVZFX0xP
VwkJQklUKDIpCi0jZGVmaW5lIFZTWU5DX0FDVElWRV9MT1cJCUJJVCgxKQotI2RlZmluZSBEQVRB
RU5fQUNUSVZFX0xPVwkJQklUKDApCiAKICNkZWZpbmUgRFNJX0RQSV9MUF9DTURfVElNCQkweDE4
CiAjZGVmaW5lIE9VVFZBQ1RfTFBDTURfVElNRShwKQkJKCgocCkgJiAweGZmKSA8PCAxNikKQEAg
LTgxLDI3ICs3NSwxOSBAQAogI2RlZmluZSBEU0lfR0VOX1ZDSUQJCQkweDMwCiAKICNkZWZpbmUg
RFNJX01PREVfQ0ZHCQkJMHgzNAotI2RlZmluZSBFTkFCTEVfVklERU9fTU9ERQkJMAotI2RlZmlu
ZSBFTkFCTEVfQ01EX01PREUJCQlCSVQoMCkKIAogI2RlZmluZSBEU0lfVklEX01PREVfQ0ZHCQkw
eDM4Ci0jZGVmaW5lIEVOQUJMRV9MT1dfUE9XRVIJCSgweDNmIDw8IDgpCi0jZGVmaW5lIEVOQUJM
RV9MT1dfUE9XRVJfTUFTSwkJKDB4M2YgPDwgOCkKKyNkZWZpbmUgRU5BQkxFX0xPV19QT1dFUgkJ
MHgzZgorCiAjZGVmaW5lIFZJRF9NT0RFX1RZUEVfTk9OX0JVUlNUX1NZTkNfUFVMU0VTCTB4MAog
I2RlZmluZSBWSURfTU9ERV9UWVBFX05PTl9CVVJTVF9TWU5DX0VWRU5UUwkweDEKICNkZWZpbmUg
VklEX01PREVfVFlQRV9CVVJTVAkJCTB4MgotI2RlZmluZSBWSURfTU9ERV9UWVBFX01BU0sJCQkw
eDMKLSNkZWZpbmUgVklEX01PREVfVlBHX0VOQUJMRQkJQklUKDE2KQotI2RlZmluZSBWSURfTU9E
RV9WUEdfSE9SSVpPTlRBTAkJQklUKDI0KQogCiAjZGVmaW5lIERTSV9WSURfUEtUX1NJWkUJCTB4
M2MKLSNkZWZpbmUgVklEX1BLVF9TSVpFKHApCQkJKChwKSAmIDB4M2ZmZikKIAogI2RlZmluZSBE
U0lfVklEX05VTV9DSFVOS1MJCTB4NDAKLSNkZWZpbmUgVklEX05VTV9DSFVOS1MoYykJCSgoYykg
JiAweDFmZmYpCiAKICNkZWZpbmUgRFNJX1ZJRF9OVUxMX1NJWkUJCTB4NDQKLSNkZWZpbmUgVklE
X05VTExfU0laRShiKQkJKChiKSAmIDB4MWZmZikKIAogI2RlZmluZSBEU0lfVklEX0hTQV9USU1F
CQkweDQ4CiAjZGVmaW5lIERTSV9WSURfSEJQX1RJTUUJCTB4NGMKQEAgLTEyNSw3ICsxMTEsNiBA
QAogI2RlZmluZSBHRU5fU1dfMlBfVFhfTFAJCQlCSVQoMTApCiAjZGVmaW5lIEdFTl9TV18xUF9U
WF9MUAkJCUJJVCg5KQogI2RlZmluZSBHRU5fU1dfMFBfVFhfTFAJCQlCSVQoOCkKLSNkZWZpbmUg
QUNLX1JRU1RfRU4JCQlCSVQoMSkKICNkZWZpbmUgVEVBUl9GWF9FTgkJCUJJVCgwKQogCiAjZGVm
aW5lIENNRF9NT0RFX0FMTF9MUAkJCShNQVhfUkRfUEtUX1NJWkVfTFAgfCBcCkBAIC0xNTQsOCAr
MTM5LDYgQEAKICNkZWZpbmUgR0VOX0NNRF9FTVBUWQkJCUJJVCgwKQogCiAjZGVmaW5lIERTSV9U
T19DTlRfQ0ZHCQkJMHg3OAotI2RlZmluZSBIU1RYX1RPX0NOVChwKQkJCSgoKHApICYgMHhmZmZm
KSA8PCAxNikKLSNkZWZpbmUgTFBSWF9UT19DTlQocCkJCQkoKHApICYgMHhmZmZmKQogCiAjZGVm
aW5lIERTSV9IU19SRF9UT19DTlQJCTB4N2MKICNkZWZpbmUgRFNJX0xQX1JEX1RPX0NOVAkJMHg4
MApAQCAtMTY0LDUyICsxNDcsMTcgQEAKICNkZWZpbmUgRFNJX0JUQV9UT19DTlQJCQkweDhjCiAK
ICNkZWZpbmUgRFNJX0xQQ0xLX0NUUkwJCQkweDk0Ci0jZGVmaW5lIEFVVE9fQ0xLTEFORV9DVFJM
CQlCSVQoMSkKLSNkZWZpbmUgUEhZX1RYUkVRVUVTVENMS0hTCQlCSVQoMCkKLQogI2RlZmluZSBE
U0lfUEhZX1RNUl9MUENMS19DRkcJCTB4OTgKLSNkZWZpbmUgUEhZX0NMS0hTMkxQX1RJTUUobGJj
YykJCSgoKGxiY2MpICYgMHgzZmYpIDw8IDE2KQotI2RlZmluZSBQSFlfQ0xLTFAySFNfVElNRShs
YmNjKQkJKChsYmNjKSAmIDB4M2ZmKQotCiAjZGVmaW5lIERTSV9QSFlfVE1SX0NGRwkJCTB4OWMK
LSNkZWZpbmUgUEhZX0hTMkxQX1RJTUUobGJjYykJCSgoKGxiY2MpICYgMHhmZikgPDwgMjQpCi0j
ZGVmaW5lIFBIWV9MUDJIU19USU1FKGxiY2MpCQkoKChsYmNjKSAmIDB4ZmYpIDw8IDE2KQotI2Rl
ZmluZSBNQVhfUkRfVElNRShsYmNjKQkJKChsYmNjKSAmIDB4N2ZmZikKLSNkZWZpbmUgUEhZX0hT
MkxQX1RJTUVfVjEzMShsYmNjKQkoKChsYmNjKSAmIDB4M2ZmKSA8PCAxNikKLSNkZWZpbmUgUEhZ
X0xQMkhTX1RJTUVfVjEzMShsYmNjKQkoKGxiY2MpICYgMHgzZmYpCi0KICNkZWZpbmUgRFNJX1BI
WV9SU1RaCQkJMHhhMAotI2RlZmluZSBQSFlfRElTRk9SQ0VQTEwJCQkwCi0jZGVmaW5lIFBIWV9F
TkZPUkNFUExMCQkJQklUKDMpCi0jZGVmaW5lIFBIWV9ESVNBQkxFQ0xLCQkJMAotI2RlZmluZSBQ
SFlfRU5BQkxFQ0xLCQkJQklUKDIpCi0jZGVmaW5lIFBIWV9SU1RaCQkJMAotI2RlZmluZSBQSFlf
VU5SU1RaCQkJQklUKDEpCi0jZGVmaW5lIFBIWV9TSFVURE9XTloJCQkwCi0jZGVmaW5lIFBIWV9V
TlNIVVRET1dOWgkJCUJJVCgwKQotCiAjZGVmaW5lIERTSV9QSFlfSUZfQ0ZHCQkJMHhhNAotI2Rl
ZmluZSBQSFlfU1RPUF9XQUlUX1RJTUUoY3ljbGUpCSgoKGN5Y2xlKSAmIDB4ZmYpIDw8IDgpCi0j
ZGVmaW5lIE5fTEFORVMobikJCQkoKChuKSAtIDEpICYgMHgzKQotCi0jZGVmaW5lIERTSV9QSFlf
VUxQU19DVFJMCQkweGE4Ci0jZGVmaW5lIERTSV9QSFlfVFhfVFJJR0dFUlMJCTB4YWMKIAogI2Rl
ZmluZSBEU0lfUEhZX1NUQVRVUwkJCTB4YjAKICNkZWZpbmUgUEhZX1NUT1BfU1RBVEVfQ0xLX0xB
TkUJCUJJVCgyKQogI2RlZmluZSBQSFlfTE9DSwkJCUJJVCgwKQogCiAjZGVmaW5lIERTSV9QSFlf
VFNUX0NUUkwwCQkweGI0Ci0jZGVmaW5lIFBIWV9URVNUQ0xLCQkJQklUKDEpCi0jZGVmaW5lIFBI
WV9VTlRFU1RDTEsJCQkwCi0jZGVmaW5lIFBIWV9URVNUQ0xSCQkJQklUKDApCi0jZGVmaW5lIFBI
WV9VTlRFU1RDTFIJCQkwCi0KICNkZWZpbmUgRFNJX1BIWV9UU1RfQ1RSTDEJCTB4YjgKLSNkZWZp
bmUgUEhZX1RFU1RFTgkJCUJJVCgxNikKLSNkZWZpbmUgUEhZX1VOVEVTVEVOCQkJMAotI2RlZmlu
ZSBQSFlfVEVTVERPVVQobikJCQkoKChuKSAmIDB4ZmYpIDw8IDgpCi0jZGVmaW5lIFBIWV9URVNU
RElOKG4pCQkJKChuKSAmIDB4ZmYpCiAKICNkZWZpbmUgRFNJX0lOVF9TVDAJCQkweGJjCiAjZGVm
aW5lIERTSV9JTlRfU1QxCQkJMHhjMApAQCAtMjE3LDcgKzE2NSw2IEBACiAjZGVmaW5lIERTSV9J
TlRfTVNLMQkJCTB4YzgKIAogI2RlZmluZSBEU0lfUEhZX1RNUl9SRF9DRkcJCTB4ZjQKLSNkZWZp
bmUgTUFYX1JEX1RJTUVfVjEzMShsYmNjKQkJKChsYmNjKSAmIDB4N2ZmZikKIAogI2RlZmluZSBQ
SFlfU1RBVFVTX1RJTUVPVVRfVVMJCTEwMDAwCiAjZGVmaW5lIENNRF9QS1RfU1RBVFVTX1RJTUVP
VVRfVVMJMjAwMDAKQEAgLTIzNiw2ICsxODMsNyBAQCBzdHJ1Y3QgZHdfbWlwaV9kc2kgewogCXUz
MiBsYW5lczsKIAl1MzIgZm9ybWF0OwogCXVuc2lnbmVkIGxvbmcgbW9kZV9mbGFnczsKKwl1MzIg
aHdfdmVyc2lvbjsKIAogI2lmZGVmIENPTkZJR19ERUJVR19GUwogCXN0cnVjdCBkZW50cnkgKmRl
YnVnZnM7CkBAIC0yNDgsNiArMTk2LDUzIEBAIHN0cnVjdCBkd19taXBpX2RzaSB7CiAJc3RydWN0
IGR3X21pcGlfZHNpICpzbGF2ZTsgLyogZHVhbC1kc2kgc2xhdmUgcHRyICovCiAKIAljb25zdCBz
dHJ1Y3QgZHdfbWlwaV9kc2lfcGxhdF9kYXRhICpwbGF0X2RhdGE7CisKKwlzdHJ1Y3QgcmVnbWFw
X2ZpZWxkCSpmaWVsZF9kcGlfMThsb29zZWx5X2VuOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZp
ZWxkX2RwaV9jb2xvcl9jb2Rpbmc7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfZHBpX3Zp
ZDsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF9kcGlfdnN5bmNfYWN0aXZlX2xvdzsKKwlz
dHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF9kcGlfaHN5bmNfYWN0aXZlX2xvdzsKKwlzdHJ1Y3Qg
cmVnbWFwX2ZpZWxkCSpmaWVsZF9jbWRfbW9kZV9hY2tfcnFzdF9lbjsKKwlzdHJ1Y3QgcmVnbWFw
X2ZpZWxkCSpmaWVsZF9jbWRfbW9kZV9hbGxfbHBfZW47CisJc3RydWN0IHJlZ21hcF9maWVsZAkq
ZmllbGRfY21kX21vZGVfZW47CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfY21kX3BrdF9z
dGF0dXM7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfdmlkX21vZGVfZW47CisJc3RydWN0
IHJlZ21hcF9maWVsZAkqZmllbGRfdmlkX21vZGVfdHlwZTsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxk
CSpmaWVsZF92aWRfbW9kZV9sb3dfcG93ZXI7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRf
dmlkX21vZGVfdnBnX2VuOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX3ZpZF9tb2RlX3Zw
Z19ob3JpejsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF92aWRfcGt0X3NpemU7CisJc3Ry
dWN0IHJlZ21hcF9maWVsZAkqZmllbGRfdmlkX2hzYV90aW1lOworCXN0cnVjdCByZWdtYXBfZmll
bGQJKmZpZWxkX3ZpZF9oYnBfdGltZTsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF92aWRf
aGxpbmVfdGltZTsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF92aWRfdnNhX3RpbWU7CisJ
c3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfdmlkX3ZicF90aW1lOworCXN0cnVjdCByZWdtYXBf
ZmllbGQJKmZpZWxkX3ZpZF92ZnBfdGltZTsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF92
aWRfdmFjdGl2ZV90aW1lOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX3BoeV90eHJlcXVl
c3RjbGtoczsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF9waHlfYnRhX3RpbWU7CisJc3Ry
dWN0IHJlZ21hcF9maWVsZAkqZmllbGRfcGh5X21heF9yZF90aW1lOworCXN0cnVjdCByZWdtYXBf
ZmllbGQJKmZpZWxkX3BoeV9scDJoc190aW1lOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxk
X3BoeV9oczJscF90aW1lOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX3BoeV9jbGtscDJo
c190aW1lOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX3BoeV9jbGtoczJscF90aW1lOwor
CXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX3BoeV90ZXN0Y2xyOworCXN0cnVjdCByZWdtYXBf
ZmllbGQJKmZpZWxkX3BoeV91bnNodXRkb3duejsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVs
ZF9waHlfdW5yc3R6OworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX3BoeV9lbmFibGVjbGs7
CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfcGh5X2ZvcmNlcGxsOworCXN0cnVjdCByZWdt
YXBfZmllbGQJKmZpZWxkX3BoeV9ubGFuZXM7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRf
cGh5X3N0b3Bfd2FpdF90aW1lOworCXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX3BoeV9zdGF0
dXM7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfcGNraGRsX2NmZzsKKwlzdHJ1Y3QgcmVn
bWFwX2ZpZWxkCSpmaWVsZF9oc3R4X3RpbWVvdXRfY291bnRlcjsKKwlzdHJ1Y3QgcmVnbWFwX2Zp
ZWxkCSpmaWVsZF9scHJ4X3RpbWVvdXRfY291bnRlcjsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpm
aWVsZF9pbnRfc3RhdDA7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfaW50X3N0YXQxOwor
CXN0cnVjdCByZWdtYXBfZmllbGQJKmZpZWxkX2ludF9tYXNrMDsKKwlzdHJ1Y3QgcmVnbWFwX2Zp
ZWxkCSpmaWVsZF9pbnRfbWFzazE7CisJc3RydWN0IHJlZ21hcF9maWVsZAkqZmllbGRfZ2VuX2hk
cjsKKwlzdHJ1Y3QgcmVnbWFwX2ZpZWxkCSpmaWVsZF9nZW5fcGF5bG9hZDsKIH07CiAKIHN0YXRp
YyBjb25zdCBzdHJ1Y3QgcmVnbWFwX2NvbmZpZyBkd19taXBpX2RzaV9yZWdtYXBfY2ZnID0gewpA
QCAtMjU3LDYgKzI1MiwxMTEgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCByZWdtYXBfY29uZmlnIGR3
X21pcGlfZHNpX3JlZ21hcF9jZmcgPSB7CiAJLm5hbWUgPSAiZHctbWlwaS1kc2kiLAogfTsKIAor
c3RydWN0IGR3X21pcGlfZHNpX3ZhcmlhbnQgeworCS8qIFJlZ21hcCBmaWVsZCBjb25maWdzIGZv
ciBEU0kgYWRhcHRlciAqLworCXN0cnVjdCByZWdfZmllbGQJY2ZnX2RwaV8xOGxvb3NlbHlfZW47
CisJc3RydWN0IHJlZ19maWVsZAljZmdfZHBpX2NvbG9yX2NvZGluZzsKKwlzdHJ1Y3QgcmVnX2Zp
ZWxkCWNmZ19kcGlfdmlkOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX2RwaV92c3luY19hY3RpdmVf
bG93OworCXN0cnVjdCByZWdfZmllbGQJY2ZnX2RwaV9oc3luY19hY3RpdmVfbG93OworCXN0cnVj
dCByZWdfZmllbGQJY2ZnX2NtZF9tb2RlX2VuOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX2NtZF9t
b2RlX2Fja19ycXN0X2VuOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX2NtZF9tb2RlX2FsbF9scF9l
bjsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19jbWRfcGt0X3N0YXR1czsKKwlzdHJ1Y3QgcmVnX2Zp
ZWxkCWNmZ192aWRfbW9kZV9lbjsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ192aWRfbW9kZV90eXBl
OworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3ZpZF9tb2RlX2xvd19wb3dlcjsKKwlzdHJ1Y3QgcmVn
X2ZpZWxkCWNmZ192aWRfbW9kZV92cGdfZW47CisJc3RydWN0IHJlZ19maWVsZAljZmdfdmlkX21v
ZGVfdnBnX2hvcml6OworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3ZpZF9wa3Rfc2l6ZTsKKwlzdHJ1
Y3QgcmVnX2ZpZWxkCWNmZ192aWRfaHNhX3RpbWU7CisJc3RydWN0IHJlZ19maWVsZAljZmdfdmlk
X2hicF90aW1lOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3ZpZF9obGluZV90aW1lOworCXN0cnVj
dCByZWdfZmllbGQJY2ZnX3ZpZF92c2FfdGltZTsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ192aWRf
dmJwX3RpbWU7CisJc3RydWN0IHJlZ19maWVsZAljZmdfdmlkX3ZmcF90aW1lOworCXN0cnVjdCBy
ZWdfZmllbGQJY2ZnX3ZpZF92YWN0aXZlX3RpbWU7CisJc3RydWN0IHJlZ19maWVsZAljZmdfcGh5
X3R4cmVxdWVzdGNsa2hzOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3BoeV9idGFfdGltZTsKKwlz
dHJ1Y3QgcmVnX2ZpZWxkCWNmZ19waHlfbWF4X3JkX3RpbWU7CisJc3RydWN0IHJlZ19maWVsZAlj
ZmdfcGh5X2xwMmhzX3RpbWU7CisJc3RydWN0IHJlZ19maWVsZAljZmdfcGh5X2hzMmxwX3RpbWU7
CisJc3RydWN0IHJlZ19maWVsZAljZmdfcGh5X21heF9yZF90aW1lX3YxMzE7CisJc3RydWN0IHJl
Z19maWVsZAljZmdfcGh5X2xwMmhzX3RpbWVfdjEzMTsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19w
aHlfaHMybHBfdGltZV92MTMxOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3BoeV9jbGtscDJoc190
aW1lOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3BoeV9jbGtoczJscF90aW1lOworCXN0cnVjdCBy
ZWdfZmllbGQJY2ZnX3BoeV90ZXN0Y2xyOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3BoeV91bnNo
dXRkb3duejsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19waHlfdW5yc3R6OworCXN0cnVjdCByZWdf
ZmllbGQJY2ZnX3BoeV9lbmFibGVjbGs7CisJc3RydWN0IHJlZ19maWVsZAljZmdfcGh5X2ZvcmNl
cGxsOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3BoeV9ubGFuZXM7CisJc3RydWN0IHJlZ19maWVs
ZAljZmdfcGh5X3N0b3Bfd2FpdF90aW1lOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX3BoeV9zdGF0
dXM7CisJc3RydWN0IHJlZ19maWVsZAljZmdfcGNraGRsX2NmZzsKKwlzdHJ1Y3QgcmVnX2ZpZWxk
CWNmZ19oc3R4X3RpbWVvdXRfY291bnRlcjsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19scHJ4X3Rp
bWVvdXRfY291bnRlcjsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19pbnRfc3RhdDA7CisJc3RydWN0
IHJlZ19maWVsZAljZmdfaW50X3N0YXQxOworCXN0cnVjdCByZWdfZmllbGQJY2ZnX2ludF9tYXNr
MDsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19pbnRfbWFzazE7CisJc3RydWN0IHJlZ19maWVsZAlj
ZmdfZ2VuX2hkcjsKKwlzdHJ1Y3QgcmVnX2ZpZWxkCWNmZ19nZW5fcGF5bG9hZDsKK307CisKK3N0
YXRpYyBzdHJ1Y3QgZHdfbWlwaV9kc2lfdmFyaWFudCBkd19taXBpX2RzaV92MTMwX3YxMzFfbGF5
b3V0ID0geworCS5jZmdfZHBpX2NvbG9yX2NvZGluZyA9CQlSRUdfRklFTEQoRFNJX0RQSV9DT0xP
Ul9DT0RJTkcsIDAsIDMpLAorCS5jZmdfZHBpXzE4bG9vc2VseV9lbiA9CQlSRUdfRklFTEQoRFNJ
X0RQSV9DT0xPUl9DT0RJTkcsIDgsIDgpLAorCS5jZmdfZHBpX3ZpZCA9CQkJUkVHX0ZJRUxEKERT
SV9EUElfVkNJRCwgMCwgMiksCisJLmNmZ19kcGlfdnN5bmNfYWN0aXZlX2xvdyA9CVJFR19GSUVM
RChEU0lfRFBJX0NGR19QT0wsIDEsIDEpLAorCS5jZmdfZHBpX2hzeW5jX2FjdGl2ZV9sb3cgPQlS
RUdfRklFTEQoRFNJX0RQSV9DRkdfUE9MLCAyLCAyKSwKKwkuY2ZnX2NtZF9tb2RlX2Fja19ycXN0
X2VuID0JUkVHX0ZJRUxEKERTSV9DTURfTU9ERV9DRkcsIDEsIDEpLAorCS5jZmdfY21kX21vZGVf
YWxsX2xwX2VuID0JUkVHX0ZJRUxEKERTSV9DTURfTU9ERV9DRkcsIDgsIDI0KSwKKwkuY2ZnX2Nt
ZF9tb2RlX2VuID0JCVJFR19GSUVMRChEU0lfTU9ERV9DRkcsIDAsIDMxKSwKKwkuY2ZnX2NtZF9w
a3Rfc3RhdHVzID0JCVJFR19GSUVMRChEU0lfQ01EX1BLVF9TVEFUVVMsIDAsIDMxKSwKKwkuY2Zn
X3ZpZF9tb2RlX2VuID0JCVJFR19GSUVMRChEU0lfTU9ERV9DRkcsIDAsIDMxKSwKKwkuY2ZnX3Zp
ZF9tb2RlX3R5cGUgPQkJUkVHX0ZJRUxEKERTSV9WSURfTU9ERV9DRkcsIDAsIDEpLAorCS5jZmdf
dmlkX21vZGVfbG93X3Bvd2VyID0JUkVHX0ZJRUxEKERTSV9WSURfTU9ERV9DRkcsIDgsIDEzKSwK
KwkuY2ZnX3ZpZF9tb2RlX3ZwZ19lbiA9CQlSRUdfRklFTEQoRFNJX1ZJRF9NT0RFX0NGRywgMTYs
IDE2KSwKKwkuY2ZnX3ZpZF9tb2RlX3ZwZ19ob3JpeiA9CVJFR19GSUVMRChEU0lfVklEX01PREVf
Q0ZHLCAyNCwgMjQpLAorCS5jZmdfdmlkX3BrdF9zaXplID0JCVJFR19GSUVMRChEU0lfVklEX1BL
VF9TSVpFLCAwLCAxMCksCisJLmNmZ192aWRfaHNhX3RpbWUgPQkJUkVHX0ZJRUxEKERTSV9WSURf
SFNBX1RJTUUsIDAsIDMxKSwKKwkuY2ZnX3ZpZF9oYnBfdGltZSA9CQlSRUdfRklFTEQoRFNJX1ZJ
RF9IQlBfVElNRSwgMCwgMzEpLAorCS5jZmdfdmlkX2hsaW5lX3RpbWUgPQkJUkVHX0ZJRUxEKERT
SV9WSURfSExJTkVfVElNRSwgMCwgMzEpLAorCS5jZmdfdmlkX3ZzYV90aW1lID0JCVJFR19GSUVM
RChEU0lfVklEX1ZTQV9MSU5FUywgMCwgMzEpLAorCS5jZmdfdmlkX3ZicF90aW1lID0JCVJFR19G
SUVMRChEU0lfVklEX1ZCUF9MSU5FUywgMCwgMzEpLAorCS5jZmdfdmlkX3ZmcF90aW1lID0JCVJF
R19GSUVMRChEU0lfVklEX1ZGUF9MSU5FUywgMCwgMzEpLAorCS5jZmdfdmlkX3ZhY3RpdmVfdGlt
ZSA9CQlSRUdfRklFTEQoRFNJX1ZJRF9WQUNUSVZFX0xJTkVTLCAwLCAzMSksCisJLmNmZ19waHlf
dHhyZXF1ZXN0Y2xraHMgPQlSRUdfRklFTEQoRFNJX0xQQ0xLX0NUUkwsIDAsIDApLAorCS5jZmdf
cGh5X2J0YV90aW1lID0JCVJFR19GSUVMRChEU0lfQlRBX1RPX0NOVCwgMCwgMzEpLAorCS5jZmdf
cGh5X21heF9yZF90aW1lID0JCVJFR19GSUVMRChEU0lfUEhZX1RNUl9DRkcsIDAsIDE1KSwKKwku
Y2ZnX3BoeV9scDJoc190aW1lID0JCVJFR19GSUVMRChEU0lfUEhZX1RNUl9DRkcsIDE2LCAyMyks
CisJLmNmZ19waHlfaHMybHBfdGltZSA9CQlSRUdfRklFTEQoRFNJX1BIWV9UTVJfQ0ZHLCAyNCwg
MzEpLAorCS5jZmdfcGh5X21heF9yZF90aW1lX3YxMzEgPQlSRUdfRklFTEQoRFNJX1BIWV9UTVJf
UkRfQ0ZHLCAwLCAxNSksCisJLmNmZ19waHlfbHAyaHNfdGltZV92MTMxID0JUkVHX0ZJRUxEKERT
SV9QSFlfVE1SX0NGRywgMCwgMTUpLAorCS5jZmdfcGh5X2hzMmxwX3RpbWVfdjEzMSA9CVJFR19G
SUVMRChEU0lfUEhZX1RNUl9DRkcsIDE2LCAzMSksCisJLmNmZ19waHlfY2xrbHAyaHNfdGltZSA9
CVJFR19GSUVMRChEU0lfUEhZX1RNUl9MUENMS19DRkcsIDAsIDE1KSwKKwkuY2ZnX3BoeV9jbGto
czJscF90aW1lID0JUkVHX0ZJRUxEKERTSV9QSFlfVE1SX0xQQ0xLX0NGRywgMTYsIDMxKSwKKwku
Y2ZnX3BoeV90ZXN0Y2xyID0JCVJFR19GSUVMRChEU0lfUEhZX1RTVF9DVFJMMCwgMCwgMCksCisJ
LmNmZ19waHlfdW5zaHV0ZG93bnogPQkJUkVHX0ZJRUxEKERTSV9QSFlfUlNUWiwgMCwgMCksCisJ
LmNmZ19waHlfdW5yc3R6ID0JCVJFR19GSUVMRChEU0lfUEhZX1JTVFosIDEsIDEpLAorCS5jZmdf
cGh5X2VuYWJsZWNsayA9CQlSRUdfRklFTEQoRFNJX1BIWV9SU1RaLCAyLCAyKSwKKwkuY2ZnX3Bo
eV9mb3JjZXBsbCA9CQlSRUdfRklFTEQoRFNJX1BIWV9SU1RaLCAzLCAzKSwKKwkuY2ZnX3BoeV9u
bGFuZXMgPQkJUkVHX0ZJRUxEKERTSV9QSFlfSUZfQ0ZHLCAwLCAxKSwKKwkuY2ZnX3BoeV9zdG9w
X3dhaXRfdGltZSA9CVJFR19GSUVMRChEU0lfUEhZX0lGX0NGRywgOCwgMTUpLAorCS5jZmdfcGh5
X3N0YXR1cyA9CQlSRUdfRklFTEQoRFNJX1BIWV9TVEFUVVMsIDAsIDApLAorCS5jZmdfcGNraGRs
X2NmZyA9CQlSRUdfRklFTEQoRFNJX1BDS0hETF9DRkcsIDAsIDQpLAorCS5jZmdfaHN0eF90aW1l
b3V0X2NvdW50ZXIgPQlSRUdfRklFTEQoRFNJX1RPX0NOVF9DRkcsIDE2LCAzMSksCisJLmNmZ19s
cHJ4X3RpbWVvdXRfY291bnRlciA9CVJFR19GSUVMRChEU0lfVE9fQ05UX0NGRywgMCwgMTUpLAor
CS5jZmdfaW50X3N0YXQwID0JCVJFR19GSUVMRChEU0lfSU5UX1NUMCwgMCwgMzEpLAorCS5jZmdf
aW50X3N0YXQxID0JCVJFR19GSUVMRChEU0lfSU5UX1NUMSwgMCwgMzEpLAorCS5jZmdfaW50X21h
c2swID0JCVJFR19GSUVMRChEU0lfSU5UX01TSzAsIDAsIDMxKSwKKwkuY2ZnX2ludF9tYXNrMSA9
CQlSRUdfRklFTEQoRFNJX0lOVF9NU0sxLCAwLCAzMSksCisJLmNmZ19nZW5faGRyID0JCQlSRUdf
RklFTEQoRFNJX0dFTl9IRFIsIDAsIDMxKSwKKwkuY2ZnX2dlbl9wYXlsb2FkID0JCVJFR19GSUVM
RChEU0lfR0VOX1BMRF9EQVRBLCAwLCAzMSksCit9OworCiAvKgogICogQ2hlY2sgaWYgZWl0aGVy
IGEgbGluayB0byBhIG1hc3RlciBvciBzbGF2ZSBpcyBwcmVzZW50CiAgKi8KQEAgLTM1NywxNSAr
NDU3LDE2IEBAIHN0YXRpYyB2b2lkIGR3X21pcGlfbWVzc2FnZV9jb25maWcoc3RydWN0IGR3X21p
cGlfZHNpICpkc2ksCiAJCQkJICAgY29uc3Qgc3RydWN0IG1pcGlfZHNpX21zZyAqbXNnKQogewog
CWJvb2wgbHBtID0gbXNnLT5mbGFncyAmIE1JUElfRFNJX01TR19VU0VfTFBNOwotCXUzMiB2YWwg
PSAwOworCXUzMiBjbWRfbW9kZV9scCA9IDA7CiAKIAlpZiAobXNnLT5mbGFncyAmIE1JUElfRFNJ
X01TR19SRVFfQUNLKQotCQl2YWwgfD0gQUNLX1JRU1RfRU47CisJCXJlZ21hcF9maWVsZF93cml0
ZShkc2ktPmZpZWxkX2NtZF9tb2RlX2Fja19ycXN0X2VuLCAxKTsKKwogCWlmIChscG0pCi0JCXZh
bCB8PSBDTURfTU9ERV9BTExfTFA7CisJCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX2Nt
ZF9tb2RlX2FsbF9scF9lbiwKKwkJCQkgICBDTURfTU9ERV9BTExfTFApOwogCi0JcmVnbWFwX3dy
aXRlKGRzaS0+cmVncywgRFNJX0xQQ0xLX0NUUkwsIGxwbSA/IDAgOiBQSFlfVFhSRVFVRVNUQ0xL
SFMpOwotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9DTURfTU9ERV9DRkcsIHZhbCk7CisJ
cmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfcGh5X3R4cmVxdWVzdGNsa2hzLCBscG0gPyAw
IDogMSk7CiB9CiAKIHN0YXRpYyBpbnQgZHdfbWlwaV9kc2lfZ2VuX3BrdF9oZHJfd3JpdGUoc3Ry
dWN0IGR3X21pcGlfZHNpICpkc2ksIHUzMiBoZHJfdmFsKQpAQCAtMzczLDE4ICs0NzQsMTggQEAg
c3RhdGljIGludCBkd19taXBpX2RzaV9nZW5fcGt0X2hkcl93cml0ZShzdHJ1Y3QgZHdfbWlwaV9k
c2kgKmRzaSwgdTMyIGhkcl92YWwpCiAJaW50IHJldDsKIAl1MzIgdmFsID0gMCwgbWFzazsKIAot
CXJldCA9IHJlZ21hcF9yZWFkX3BvbGxfdGltZW91dChkc2ktPnJlZ3MsIERTSV9DTURfUEtUX1NU
QVRVUywKLQkJCQkgICAgICAgdmFsLCAhKHZhbCAmIEdFTl9DTURfRlVMTCksIDEwMDAsCi0JCQkJ
ICAgICAgIENNRF9QS1RfU1RBVFVTX1RJTUVPVVRfVVMpOworCXJldCA9IHJlZ21hcF9maWVsZF9y
ZWFkX3BvbGxfdGltZW91dChkc2ktPmZpZWxkX2NtZF9wa3Rfc3RhdHVzLAorCQkJCQkgICAgIHZh
bCwgISh2YWwgJiBHRU5fQ01EX0ZVTEwpLAorCQkJCQkgICAgIDEwMDAsIENNRF9QS1RfU1RBVFVT
X1RJTUVPVVRfVVMpOwogCWlmIChyZXQpIHsKIAkJZGV2X2Vycihkc2ktPmRldiwgImZhaWxlZCB0
byBnZXQgYXZhaWxhYmxlIGNvbW1hbmQgRklGT1xuIik7CiAJCXJldHVybiByZXQ7CiAJfQogCi0J
cmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX0dFTl9IRFIsIGhkcl92YWwpOworCXJlZ21hcF9m
aWVsZF93cml0ZShkc2ktPmZpZWxkX2dlbl9oZHIsIGhkcl92YWwpOwogCiAJbWFzayA9IEdFTl9D
TURfRU1QVFkgfCBHRU5fUExEX1dfRU1QVFk7Ci0JcmV0ID0gcmVnbWFwX3JlYWRfcG9sbF90aW1l
b3V0KGRzaS0+cmVncywgRFNJX0NNRF9QS1RfU1RBVFVTLAorCXJldCA9IHJlZ21hcF9maWVsZF9y
ZWFkX3BvbGxfdGltZW91dChkc2ktPmZpZWxkX2NtZF9wa3Rfc3RhdHVzLAogCQkJCSAgICAgICB2
YWwsICh2YWwgJiBtYXNrKSA9PSBtYXNrLAogCQkJCSAgICAgICAxMDAwLCBDTURfUEtUX1NUQVRV
U19USU1FT1VUX1VTKTsKIAlpZiAocmV0KSB7CkBAIC00MDcsMjAgKzUwOCwyMiBAQCBzdGF0aWMg
aW50IGR3X21pcGlfZHNpX3dyaXRlKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpLAogCQlpZiAobGVu
IDwgcGxkX2RhdGFfYnl0ZXMpIHsKIAkJCXdvcmQgPSAwOwogCQkJbWVtY3B5KCZ3b3JkLCB0eF9i
dWYsIGxlbik7Ci0JCQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfR0VOX1BMRF9EQVRBLAot
CQkJCSAgICAgbGUzMl90b19jcHUod29yZCkpOworCQkJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+
ZmllbGRfZ2VuX3BheWxvYWQsCisJCQkJCSAgIGxlMzJfdG9fY3B1KHdvcmQpKTsKIAkJCWxlbiA9
IDA7CiAJCX0gZWxzZSB7CiAJCQltZW1jcHkoJndvcmQsIHR4X2J1ZiwgcGxkX2RhdGFfYnl0ZXMp
OwotCQkJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX0dFTl9QTERfREFUQSwKLQkJCQkgICAg
IGxlMzJfdG9fY3B1KHdvcmQpKTsKKwkJCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX2dl
bl9wYXlsb2FkLAorCQkJCQkgICBsZTMyX3RvX2NwdSh3b3JkKSk7CiAJCQl0eF9idWYgKz0gcGxk
X2RhdGFfYnl0ZXM7CiAJCQlsZW4gLT0gcGxkX2RhdGFfYnl0ZXM7CiAJCX0KIAotCQlyZXQgPSBy
ZWdtYXBfcmVhZF9wb2xsX3RpbWVvdXQoZHNpLT5yZWdzLCBEU0lfQ01EX1BLVF9TVEFUVVMsCi0J
CQkJCSAgICAgICB2YWwsICEodmFsICYgR0VOX1BMRF9XX0ZVTEwpLAotCQkJCQkgICAgICAgMTAw
MCwgQ01EX1BLVF9TVEFUVVNfVElNRU9VVF9VUyk7CisJCXJldCA9IHJlZ21hcF9maWVsZF9yZWFk
X3BvbGxfdGltZW91dChkc2ktPmZpZWxkX2NtZF9wa3Rfc3RhdHVzLAorCQkJCQkJICAgICB2YWws
CisJCQkJCQkgICAgICEodmFsICYgR0VOX1BMRF9XX0ZVTEwpLAorCQkJCQkJICAgICAxMDAwLAor
CQkJCQkJICAgICBDTURfUEtUX1NUQVRVU19USU1FT1VUX1VTKTsKIAkJaWYgKHJldCkgewogCQkJ
ZGV2X2Vycihkc2ktPmRldiwKIAkJCQkiZmFpbGVkIHRvIGdldCBhdmFpbGFibGUgd3JpdGUgcGF5
bG9hZCBGSUZPXG4iKTsKQEAgLTQ0MSw5ICs1NDQsOSBAQCBzdGF0aWMgaW50IGR3X21pcGlfZHNp
X3JlYWQoc3RydWN0IGR3X21pcGlfZHNpICpkc2ksCiAJdTMyIHZhbCA9IDA7CiAKIAkvKiBXYWl0
IGVuZCBvZiB0aGUgcmVhZCBvcGVyYXRpb24gKi8KLQlyZXQgPSByZWdtYXBfcmVhZF9wb2xsX3Rp
bWVvdXQoZHNpLT5yZWdzLCBEU0lfQ01EX1BLVF9TVEFUVVMsCi0JCQkJICAgICAgIHZhbCwgISh2
YWwgJiBHRU5fUkRfQ01EX0JVU1kpLAotCQkJCSAgICAgICAxMDAwLCBDTURfUEtUX1NUQVRVU19U
SU1FT1VUX1VTKTsKKwlyZXQgPSByZWdtYXBfZmllbGRfcmVhZF9wb2xsX3RpbWVvdXQoZHNpLT5m
aWVsZF9jbWRfcGt0X3N0YXR1cywKKwkJCQkJICAgICB2YWwsICEodmFsICYgR0VOX1JEX0NNRF9C
VVNZKSwKKwkJCQkJICAgICAxMDAwLCBDTURfUEtUX1NUQVRVU19USU1FT1VUX1VTKTsKIAlpZiAo
cmV0KSB7CiAJCWRldl9lcnIoZHNpLT5kZXYsICJUaW1lb3V0IGR1cmluZyByZWFkIG9wZXJhdGlv
blxuIik7CiAJCXJldHVybiByZXQ7CkBAIC00NTEsMTUgKzU1NCwxNyBAQCBzdGF0aWMgaW50IGR3
X21pcGlfZHNpX3JlYWQoc3RydWN0IGR3X21pcGlfZHNpICpkc2ksCiAKIAlmb3IgKGkgPSAwOyBp
IDwgbGVuOyBpICs9IDQpIHsKIAkJLyogUmVhZCBmaWZvIG11c3Qgbm90IGJlIGVtcHR5IGJlZm9y
ZSBhbGwgYnl0ZXMgYXJlIHJlYWQgKi8KLQkJcmV0ID0gcmVnbWFwX3JlYWRfcG9sbF90aW1lb3V0
KGRzaS0+cmVncywgRFNJX0NNRF9QS1RfU1RBVFVTLAotCQkJCQkgICAgICAgdmFsLCAhKHZhbCAm
IEdFTl9QTERfUl9FTVBUWSksCi0JCQkJCSAgICAgICAxMDAwLCBDTURfUEtUX1NUQVRVU19USU1F
T1VUX1VTKTsKKwkJcmV0ID0gcmVnbWFwX2ZpZWxkX3JlYWRfcG9sbF90aW1lb3V0KGRzaS0+Zmll
bGRfY21kX3BrdF9zdGF0dXMsCisJCQkJCQkgICAgIHZhbCwKKwkJCQkJCSAgICAgISh2YWwgJiBH
RU5fUExEX1JfRU1QVFkpLAorCQkJCQkJICAgICAxMDAwLAorCQkJCQkJICAgICBDTURfUEtUX1NU
QVRVU19USU1FT1VUX1VTKTsKIAkJaWYgKHJldCkgewogCQkJZGV2X2Vycihkc2ktPmRldiwgIlJl
YWQgcGF5bG9hZCBGSUZPIGlzIGVtcHR5XG4iKTsKIAkJCXJldHVybiByZXQ7CiAJCX0KIAotCQly
ZWdtYXBfcmVhZChkc2ktPnJlZ3MsIERTSV9HRU5fUExEX0RBVEEsICZ2YWwpOworCQlyZWdtYXBf
ZmllbGRfcmVhZChkc2ktPmZpZWxkX2dlbl9wYXlsb2FkLCAmdmFsKTsKIAkJZm9yIChqID0gMDsg
aiA8IDQgJiYgaiArIGkgPCBsZW47IGorKykKIAkJCWJ1ZltpICsgal0gPSB2YWwgPj4gKDggKiBq
KTsKIAl9CkBAIC01MTMsMzAgKzYxOCwzMCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IG1pcGlfZHNp
X2hvc3Rfb3BzIGR3X21pcGlfZHNpX2hvc3Rfb3BzID0gewogCiBzdGF0aWMgdm9pZCBkd19taXBp
X2RzaV92aWRlb19tb2RlX2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKIHsKLQl1MzIg
dmFsOwotCiAJLyoKIAkgKiBUT0RPIGR3IGRydiBpbXByb3ZlbWVudHMKIAkgKiBlbmFibGluZyBs
b3cgcG93ZXIgaXMgcGFuZWwtZGVwZW5kZW50LCB3ZSBzaG91bGQgdXNlIHRoZQogCSAqIHBhbmVs
IGNvbmZpZ3VyYXRpb24gaGVyZS4uLgogCSAqLwotCXZhbCA9IEVOQUJMRV9MT1dfUE9XRVI7CisJ
cmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfdmlkX21vZGVfbG93X3Bvd2VyLCBFTkFCTEVf
TE9XX1BPV0VSKTsKIAogCWlmIChkc2ktPm1vZGVfZmxhZ3MgJiBNSVBJX0RTSV9NT0RFX1ZJREVP
X0JVUlNUKQotCQl2YWwgfD0gVklEX01PREVfVFlQRV9CVVJTVDsKKwkJcmVnbWFwX2ZpZWxkX3dy
aXRlKGRzaS0+ZmllbGRfdmlkX21vZGVfdHlwZSwKKwkJCQkgICBWSURfTU9ERV9UWVBFX0JVUlNU
KTsKIAllbHNlIGlmIChkc2ktPm1vZGVfZmxhZ3MgJiBNSVBJX0RTSV9NT0RFX1ZJREVPX1NZTkNf
UFVMU0UpCi0JCXZhbCB8PSBWSURfTU9ERV9UWVBFX05PTl9CVVJTVF9TWU5DX1BVTFNFUzsKKwkJ
cmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfdmlkX21vZGVfdHlwZSwKKwkJCQkgICBWSURf
TU9ERV9UWVBFX05PTl9CVVJTVF9TWU5DX1BVTFNFUyk7CiAJZWxzZQotCQl2YWwgfD0gVklEX01P
REVfVFlQRV9OT05fQlVSU1RfU1lOQ19FVkVOVFM7CisJCXJlZ21hcF9maWVsZF93cml0ZShkc2kt
PmZpZWxkX3ZpZF9tb2RlX3R5cGUsCisJCQkJICAgVklEX01PREVfVFlQRV9OT05fQlVSU1RfU1lO
Q19FVkVOVFMpOwogCiAjaWZkZWYgQ09ORklHX0RFQlVHX0ZTCiAJaWYgKGRzaS0+dnBnKSB7Ci0J
CXZhbCB8PSBWSURfTU9ERV9WUEdfRU5BQkxFOwotCQl2YWwgfD0gZHNpLT52cGdfaG9yaXpvbnRh
bCA/IFZJRF9NT0RFX1ZQR19IT1JJWk9OVEFMIDogMDsKKwkJcmVnbWFwX2ZpZWxkX3dyaXRlKGRz
aS0+cmVncywgZHNpLT5maWVsZF92aWRfbW9kZV92cGdfZW4sIDEpOworCQlyZWdtYXBfZmllbGRf
d3JpdGUoZHNpLT5yZWdzLCBkc2ktPmZpZWxkX3ZpZF9tb2RlX3ZwZ19ob3JpeiwKKwkJCQkgICBk
c2ktPnZwZ19ob3Jpem9udGFsID8gMSA6IDApOwogCX0KICNlbmRpZiAvKiBDT05GSUdfREVCVUdf
RlMgKi8KLQotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9WSURfTU9ERV9DRkcsIHZhbCk7
CiB9CiAKIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX3NldF9tb2RlKHN0cnVjdCBkd19taXBpX2Rz
aSAqZHNpLApAQCAtNTQ1LDExICs2NTAsMTMgQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfc2V0
X21vZGUoc3RydWN0IGR3X21pcGlfZHNpICpkc2ksCiAJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywg
RFNJX1BXUl9VUCwgUkVTRVQpOwogCiAJaWYgKG1vZGVfZmxhZ3MgJiBNSVBJX0RTSV9NT0RFX1ZJ
REVPKSB7Ci0JCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9NT0RFX0NGRywgRU5BQkxFX1ZJ
REVPX01PREUpOworCQlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9jbWRfbW9kZV9lbiwg
MCk7CisKIAkJZHdfbWlwaV9kc2lfdmlkZW9fbW9kZV9jb25maWcoZHNpKTsKLQkJcmVnbWFwX3dy
aXRlKGRzaS0+cmVncywgRFNJX0xQQ0xLX0NUUkwsIFBIWV9UWFJFUVVFU1RDTEtIUyk7CisKKwkJ
cmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfcGh5X3R4cmVxdWVzdGNsa2hzLCAxKTsKIAl9
IGVsc2UgewotCQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfTU9ERV9DRkcsIEVOQUJMRV9D
TURfTU9ERSk7CisJCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX2NtZF9tb2RlX2VuLCAx
KTsKIAl9CiAKIAlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfUFdSX1VQLCBQT1dFUlVQKTsK
QEAgLTU1OCw3ICs2NjUsNyBAQCBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9zZXRfbW9kZShzdHJ1
Y3QgZHdfbWlwaV9kc2kgKmRzaSwKIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2Rpc2FibGUoc3Ry
dWN0IGR3X21pcGlfZHNpICpkc2kpCiB7CiAJcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1BX
Ul9VUCwgUkVTRVQpOwotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9QSFlfUlNUWiwgUEhZ
X1JTVFopOworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3BoeV91bnJzdHosIDApOwog
fQogCiBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9pbml0KHN0cnVjdCBkd19taXBpX2RzaSAqZHNp
KQpAQCAtNTg3LDE0ICs2OTQsMTUgQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfaW5pdChzdHJ1
Y3QgZHdfbWlwaV9kc2kgKmRzaSkKIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2RwaV9jb25maWco
c3RydWN0IGR3X21pcGlfZHNpICpkc2ksCiAJCQkJICAgY29uc3Qgc3RydWN0IGRybV9kaXNwbGF5
X21vZGUgKm1vZGUpCiB7Ci0JdTMyIHZhbCA9IDAsIGNvbG9yID0gMDsKKwl1MzIgY29sb3IgPSAw
OwogCiAJc3dpdGNoIChkc2ktPmZvcm1hdCkgewogCWNhc2UgTUlQSV9EU0lfRk1UX1JHQjg4ODoK
IAkJY29sb3IgPSBEUElfQ09MT1JfQ09ESU5HXzI0QklUOwogCQlicmVhazsKIAljYXNlIE1JUElf
RFNJX0ZNVF9SR0I2NjY6Ci0JCWNvbG9yID0gRFBJX0NPTE9SX0NPRElOR18xOEJJVF8yIHwgTE9P
U0VMWTE4X0VOOworCQljb2xvciA9IERQSV9DT0xPUl9DT0RJTkdfMThCSVRfMjsKKwkJcmVnbWFw
X2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfZHBpXzE4bG9vc2VseV9lbiwgMSk7CiAJCWJyZWFrOwog
CWNhc2UgTUlQSV9EU0lfRk1UX1JHQjY2Nl9QQUNLRUQ6CiAJCWNvbG9yID0gRFBJX0NPTE9SX0NP
RElOR18xOEJJVF8xOwpAQCAtNjA0LDE0ICs3MTIsMTUgQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9k
c2lfZHBpX2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwKIAkJYnJlYWs7CiAJfQogCi0J
aWYgKG1vZGUtPmZsYWdzICYgRFJNX01PREVfRkxBR19OVlNZTkMpCi0JCXZhbCB8PSBWU1lOQ19B
Q1RJVkVfTE9XOwotCWlmIChtb2RlLT5mbGFncyAmIERSTV9NT0RFX0ZMQUdfTkhTWU5DKQotCQl2
YWwgfD0gSFNZTkNfQUNUSVZFX0xPVzsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9k
cGlfY29sb3JfY29kaW5nLCBjb2xvcik7CisKKwlpZiAoIShtb2RlLT5mbGFncyAmIERSTV9NT0RF
X0ZMQUdfTlZTWU5DKSkKKwkJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfZHBpX3ZzeW5j
X2FjdGl2ZV9sb3csIDEpOworCWlmICghKG1vZGUtPmZsYWdzICYgRFJNX01PREVfRkxBR19OSFNZ
TkMpKQorCQlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9kcGlfaHN5bmNfYWN0aXZlX2xv
dywgMSk7CisKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9kcGlfdmlkLCBEUElfVkNJ
RChkc2ktPmNoYW5uZWwpKTsKIAotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9EUElfVkNJ
RCwgRFBJX1ZDSUQoZHNpLT5jaGFubmVsKSk7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJ
X0RQSV9DT0xPUl9DT0RJTkcsIGNvbG9yKTsKLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lf
RFBJX0NGR19QT0wsIHZhbCk7CiAJLyoKIAkgKiBUT0RPIGR3IGRydiBpbXByb3ZlbWVudHMKIAkg
KiBsYXJnZXN0IHBhY2tldCBzaXplcyBkdXJpbmcgaGZwIG9yIGR1cmluZyB2c2EvdnBiL3ZmcApA
QCAtNjI0LDcgKzczMyw4IEBAIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2RwaV9jb25maWcoc3Ry
dWN0IGR3X21pcGlfZHNpICpkc2ksCiAKIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX3BhY2tldF9o
YW5kbGVyX2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKIHsKLQlyZWdtYXBfd3JpdGUo
ZHNpLT5yZWdzLCBEU0lfUENLSERMX0NGRywgQ1JDX1JYX0VOIHwgRUNDX1JYX0VOIHwgQlRBX0VO
KTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9wY2toZGxfY2ZnLAorCQkJICAgQ1JD
X1JYX0VOIHwgRUNDX1JYX0VOIHwgQlRBX0VOKTsKIH0KIAogc3RhdGljIHZvaWQgZHdfbWlwaV9k
c2lfdmlkZW9fcGFja2V0X2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwKQEAgLTYzNywx
MSArNzQ3LDkgQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfdmlkZW9fcGFja2V0X2NvbmZpZyhz
dHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwKIAkgKiBEU0lfVk5QQ1IuTlBTSVpFLi4uIGVzcGVjaWFs
bHkgYmVjYXVzZSB0aGlzIGRyaXZlciBzdXBwb3J0cwogCSAqIG5vbi1idXJzdCB2aWRlbyBtb2Rl
cywgc2VlIGR3X21pcGlfZHNpX3ZpZGVvX21vZGVfY29uZmlnKCkuLi4KIAkgKi8KLQotCXJlZ21h
cF93cml0ZShkc2ktPnJlZ3MsIERTSV9WSURfUEtUX1NJWkUsCi0JCSAgICAgICBkd19taXBpX2lz
X2R1YWxfbW9kZShkc2kpID8KLQkJCQlWSURfUEtUX1NJWkUobW9kZS0+aGRpc3BsYXkgLyAyKSA6
Ci0JCQkJVklEX1BLVF9TSVpFKG1vZGUtPmhkaXNwbGF5KSk7CisJcmVnbWFwX2ZpZWxkX3dyaXRl
KGRzaS0+ZmllbGRfdmlkX3BrdF9zaXplLAorCQkJICAgZHdfbWlwaV9pc19kdWFsX21vZGUoZHNp
KSA/CisJCQkJbW9kZS0+aGRpc3BsYXkgLyAyIDogbW9kZS0+aGRpc3BsYXkpOwogfQogCiBzdGF0
aWMgdm9pZCBkd19taXBpX2RzaV9jb21tYW5kX21vZGVfY29uZmlnKHN0cnVjdCBkd19taXBpX2Rz
aSAqZHNpKQpAQCAtNjUxLDE1ICs3NTksMTcgQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfY29t
bWFuZF9tb2RlX2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKIAkgKiBjb21wdXRlIGhp
Z2ggc3BlZWQgdHJhbnNtaXNzaW9uIGNvdW50ZXIgdGltZW91dCBhY2NvcmRpbmcKIAkgKiB0byB0
aGUgdGltZW91dCBjbG9jayBkaXZpc2lvbiAoVE9fQ0xLX0RJVklTSU9OKSBhbmQgYnl0ZSBsYW5l
Li4uCiAJICovCi0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1RPX0NOVF9DRkcsCi0JCSAg
ICAgSFNUWF9UT19DTlQoMTAwMCkgfCBMUFJYX1RPX0NOVCgxMDAwKSk7CisJcmVnbWFwX2ZpZWxk
X3dyaXRlKGRzaS0+ZmllbGRfaHN0eF90aW1lb3V0X2NvdW50ZXIsIDEwMDApOworCXJlZ21hcF9m
aWVsZF93cml0ZShkc2ktPmZpZWxkX2xwcnhfdGltZW91dF9jb3VudGVyLCAxMDAwKTsKKwogCS8q
CiAJICogVE9ETyBkdyBkcnYgaW1wcm92ZW1lbnRzCiAJICogdGhlIEJ1cy1UdXJuLUFyb3VuZCBU
aW1lb3V0IENvdW50ZXIgc2hvdWxkIGJlIGNvbXB1dGVkCiAJICogYWNjb3JkaW5nIHRvIGJ5dGUg
bGFuZS4uLgogCSAqLwotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9CVEFfVE9fQ05ULCAw
eGQwMCk7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX01PREVfQ0ZHLCBFTkFCTEVfQ01E
X01PREUpOworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3BoeV9idGFfdGltZSwgMHhk
MDApOworCisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfY21kX21vZGVfZW4sIDEpOwog
fQogCiAvKiBHZXQgbGFuZSBieXRlIGNsb2NrIGN5Y2xlcy4gKi8KQEAgLTY5MywxMyArODAzLDEz
IEBAIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2xpbmVfdGltZXJfY29uZmlnKHN0cnVjdCBkd19t
aXBpX2RzaSAqZHNpLAogCSAqIGNvbXB1dGF0aW9ucyBiZWxvdyBtYXkgYmUgaW1wcm92ZWQuLi4K
IAkgKi8KIAlsYmNjID0gZHdfbWlwaV9kc2lfZ2V0X2hjb21wb25lbnRfbGJjYyhkc2ksIG1vZGUs
IGh0b3RhbCk7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1ZJRF9ITElORV9USU1FLCBs
YmNjKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF92aWRfaGxpbmVfdGltZSwgbGJj
Yyk7CiAKIAlsYmNjID0gZHdfbWlwaV9kc2lfZ2V0X2hjb21wb25lbnRfbGJjYyhkc2ksIG1vZGUs
IGhzYSk7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1ZJRF9IU0FfVElNRSwgbGJjYyk7
CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfdmlkX2hzYV90aW1lLCBsYmNjKTsKIAog
CWxiY2MgPSBkd19taXBpX2RzaV9nZXRfaGNvbXBvbmVudF9sYmNjKGRzaSwgbW9kZSwgaGJwKTsK
LQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfVklEX0hCUF9USU1FLCBsYmNjKTsKKwlyZWdt
YXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF92aWRfaGJwX3RpbWUsIGxiY2MpOwogfQogCiBzdGF0
aWMgdm9pZCBkd19taXBpX2RzaV92ZXJ0aWNhbF90aW1pbmdfY29uZmlnKHN0cnVjdCBkd19taXBp
X2RzaSAqZHNpLApAQCAtNzEyLDE2ICs4MjIsMTQgQEAgc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lf
dmVydGljYWxfdGltaW5nX2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSwKIAl2ZnAgPSBt
b2RlLT52c3luY19zdGFydCAtIG1vZGUtPnZkaXNwbGF5OwogCXZicCA9IG1vZGUtPnZ0b3RhbCAt
IG1vZGUtPnZzeW5jX2VuZDsKIAotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9WSURfVkFD
VElWRV9MSU5FUywgdmFjdGl2ZSk7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1ZJRF9W
U0FfTElORVMsIHZzYSk7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1ZJRF9WRlBfTElO
RVMsIHZmcCk7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1ZJRF9WQlBfTElORVMsIHZi
cCk7CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfdmlkX3ZhY3RpdmVfdGltZSwgdmFj
dGl2ZSk7CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfdmlkX3ZzYV90aW1lLCB2c2Ep
OworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3ZpZF92ZnBfdGltZSwgdmZwKTsKKwly
ZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF92aWRfdmJwX3RpbWUsIHZicCk7CiB9CiAKIHN0
YXRpYyB2b2lkIGR3X21pcGlfZHNpX2RwaHlfdGltaW5nX2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9k
c2kgKmRzaSkKIHsKLQl1MzIgaHdfdmVyc2lvbjsKLQogCS8qCiAJICogVE9ETyBkdyBkcnYgaW1w
cm92ZW1lbnRzCiAJICogZGF0YSAmIGNsb2NrIGxhbmUgdGltZXJzIHNob3VsZCBiZSBjb21wdXRl
ZCBhY2NvcmRpbmcgdG8gcGFuZWwKQEAgLTcyOSwyNSArODM3LDEyIEBAIHN0YXRpYyB2b2lkIGR3
X21pcGlfZHNpX2RwaHlfdGltaW5nX2NvbmZpZyhzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKIAkg
KiBub3RlOiBEU0lfUEhZX1RNUl9DRkcuTUFYX1JEX1RJTUUgc2hvdWxkIGJlIGluIGxpbmUgd2l0
aAogCSAqIERTSV9DTURfTU9ERV9DRkcuTUFYX1JEX1BLVF9TSVpFX0xQIChzZWUgQ01EX01PREVf
QUxMX0xQKQogCSAqLworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3BoeV9scDJoc190
aW1lLCAweDQwKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9waHlfaHMybHBfdGlt
ZSwgMHg0MCk7CiAKLQlyZWdtYXBfcmVhZChkc2ktPnJlZ3MsIERTSV9WRVJTSU9OLCAmaHdfdmVy
c2lvbik7Ci0JaHdfdmVyc2lvbiAmPSBWRVJTSU9OOwotCi0JaWYgKGh3X3ZlcnNpb24gPj0gSFdW
RVJfMTMxKSB7Ci0JCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9QSFlfVE1SX0NGRywKLQkJ
CSAgICAgUEhZX0hTMkxQX1RJTUVfVjEzMSgweDQwKSB8Ci0JCQkgICAgIFBIWV9MUDJIU19USU1F
X1YxMzEoMHg0MCkpOwotCQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfUEhZX1RNUl9SRF9D
RkcsCi0JCQkgICAgIE1BWF9SRF9USU1FX1YxMzEoMTAwMDApKTsKLQl9IGVsc2UgewotCQlyZWdt
YXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfUEhZX1RNUl9DRkcsCi0JCQkgICAgIFBIWV9IUzJMUF9U
SU1FKDB4NDApIHwKLQkJCSAgICAgUEhZX0xQMkhTX1RJTUUoMHg0MCkgfAotCQkJICAgICBNQVhf
UkRfVElNRSgxMDAwMCkpOwotCX0KLQotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9QSFlf
VE1SX0xQQ0xLX0NGRywKLQkJICAgICBQSFlfQ0xLSFMyTFBfVElNRSgweDQwKSB8IFBIWV9DTEtM
UDJIU19USU1FKDB4NDApKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9waHlfbWF4
X3JkX3RpbWUsIDEwMDAwKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9waHlfY2xr
bHAyaHNfdGltZSwgMHg0MCk7CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfcGh5X2Ns
a2hzMmxwX3RpbWUsIDB4NDApOwogfQogCiBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9kcGh5X2lu
dGVyZmFjZV9jb25maWcoc3RydWN0IGR3X21pcGlfZHNpICpkc2kpCkBAIC03NTcsMTggKzg1Miwy
MiBAQCBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9kcGh5X2ludGVyZmFjZV9jb25maWcoc3RydWN0
IGR3X21pcGlfZHNpICpkc2kpCiAJICogc3RvcCB3YWl0IHRpbWUgc2hvdWxkIGJlIHRoZSBtYXhp
bXVtIGJldHdlZW4gaG9zdCBkc2kKIAkgKiBhbmQgcGFuZWwgc3RvcCB3YWl0IHRpbWVzCiAJICov
Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX1BIWV9JRl9DRkcsCi0JCSAgICAgUEhZX1NU
T1BfV0FJVF9USU1FKDB4MjApIHwgTl9MQU5FUyhkc2ktPmxhbmVzKSk7CisJcmVnbWFwX2ZpZWxk
X3dyaXRlKGRzaS0+ZmllbGRfcGh5X3N0b3Bfd2FpdF90aW1lLCAweDIwKTsKKwlyZWdtYXBfZmll
bGRfd3JpdGUoZHNpLT5maWVsZF9waHlfbmxhbmVzLCBkc2ktPmxhbmVzIC0gMSk7CiB9CiAKIHN0
YXRpYyB2b2lkIGR3X21pcGlfZHNpX2RwaHlfaW5pdChzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkK
IHsKIAkvKiBDbGVhciBQSFkgc3RhdGUgKi8KLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lf
UEhZX1JTVFosIFBIWV9ESVNGT1JDRVBMTCB8IFBIWV9ESVNBQkxFQ0xLCi0JCSAgICAgfCBQSFlf
UlNUWiB8IFBIWV9TSFVURE9XTlopOwotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9QSFlf
VFNUX0NUUkwwLCBQSFlfVU5URVNUQ0xSKTsKLQlyZWdtYXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lf
UEhZX1RTVF9DVFJMMCwgUEhZX1RFU1RDTFIpOwotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERT
SV9QSFlfVFNUX0NUUkwwLCBQSFlfVU5URVNUQ0xSKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNp
LT5maWVsZF9waHlfZW5hYmxlY2xrLCAwKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVs
ZF9waHlfdW5yc3R6LCAwKTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9waHlfdW5z
aHV0ZG93bnosIDApOworCisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfcGh5X2ZvcmNl
cGxsLCAwKTsKKworCXJlZ21hcF9maWVsZF93cml0ZShkc2ktPmZpZWxkX3BoeV90ZXN0Y2xyLCAw
KTsKKwlyZWdtYXBfZmllbGRfd3JpdGUoZHNpLT5maWVsZF9waHlfdGVzdGNsciwgMSk7CisJcmVn
bWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfcGh5X3Rlc3RjbHIsIDApOwogfQogCiBzdGF0aWMg
dm9pZCBkd19taXBpX2RzaV9kcGh5X2VuYWJsZShzdHJ1Y3QgZHdfbWlwaV9kc2kgKmRzaSkKQEAg
LTc3NiwxOCArODc1LDIxIEBAIHN0YXRpYyB2b2lkIGR3X21pcGlfZHNpX2RwaHlfZW5hYmxlKHN0
cnVjdCBkd19taXBpX2RzaSAqZHNpKQogCXUzMiB2YWwgPSAwOwogCWludCByZXQ7CiAKLQlyZWdt
YXBfd3JpdGUoZHNpLT5yZWdzLCBEU0lfUEhZX1JTVFosIFBIWV9FTkZPUkNFUExMIHwgUEhZX0VO
QUJMRUNMSyB8Ci0JCSAgICAgUEhZX1VOUlNUWiB8IFBIWV9VTlNIVVRET1dOWik7CisJcmVnbWFw
X2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRfcGh5X2VuYWJsZWNsaywgMSk7CisJcmVnbWFwX2ZpZWxk
X3dyaXRlKGRzaS0+ZmllbGRfcGh5X3VucnN0eiwgMSk7CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRz
aS0+ZmllbGRfcGh5X3Vuc2h1dGRvd256LCAxKTsKKworCXJlZ21hcF9maWVsZF93cml0ZShkc2kt
PmZpZWxkX3BoeV9mb3JjZXBsbCwgMSk7CiAKLQlyZXQgPSByZWdtYXBfcmVhZF9wb2xsX3RpbWVv
dXQoZHNpLT5yZWdzLCBEU0lfUEhZX1NUQVRVUywKLQkJCQkgICAgICAgdmFsLCB2YWwgJiBQSFlf
TE9DSywKLQkJCQkgICAgICAgMTAwMCwgUEhZX1NUQVRVU19USU1FT1VUX1VTKTsKKwlyZXQgPSBy
ZWdtYXBfZmllbGRfcmVhZF9wb2xsX3RpbWVvdXQoZHNpLT5maWVsZF9waHlfc3RhdHVzLAorCQkJ
CQkgICAgIHZhbCwgdmFsICYgUEhZX0xPQ0ssCisJCQkJCSAgICAgMTAwMCwgUEhZX1NUQVRVU19U
SU1FT1VUX1VTKTsKIAlpZiAocmV0KQogCQlEUk1fREVCVUdfRFJJVkVSKCJmYWlsZWQgdG8gd2Fp
dCBwaHkgbG9jayBzdGF0ZVxuIik7CiAKLQlyZXQgPSByZWdtYXBfcmVhZF9wb2xsX3RpbWVvdXQo
ZHNpLT5yZWdzLCBEU0lfUEhZX1NUQVRVUywKLQkJCQkgICAgICAgdmFsLCB2YWwgJiBQSFlfU1RP
UF9TVEFURV9DTEtfTEFORSwgMTAwMCwKLQkJCQkgICAgICAgUEhZX1NUQVRVU19USU1FT1VUX1VT
KTsKKwlyZXQgPSByZWdtYXBfZmllbGRfcmVhZF9wb2xsX3RpbWVvdXQoZHNpLT5maWVsZF9waHlf
c3RhdHVzLAorCQkJCQkgICAgIHZhbCwgdmFsICYgUEhZX1NUT1BfU1RBVEVfQ0xLX0xBTkUsCisJ
CQkJCSAgICAgMTAwMCwgUEhZX1NUQVRVU19USU1FT1VUX1VTKTsKIAlpZiAocmV0KQogCQlEUk1f
REVCVUdfRFJJVkVSKCJmYWlsZWQgdG8gd2FpdCBwaHkgY2xrIGxhbmUgc3RvcCBzdGF0ZVxuIik7
CiB9CkBAIC03OTYsMTAgKzg5OCwxMCBAQCBzdGF0aWMgdm9pZCBkd19taXBpX2RzaV9jbGVhcl9l
cnIoc3RydWN0IGR3X21pcGlfZHNpICpkc2kpCiB7CiAJdTMyIHZhbDsKIAotCXJlZ21hcF9yZWFk
KGRzaS0+cmVncywgRFNJX0lOVF9TVDAsICZ2YWwpOwotCXJlZ21hcF9yZWFkKGRzaS0+cmVncywg
RFNJX0lOVF9TVDEsICZ2YWwpOwotCXJlZ21hcF93cml0ZShkc2ktPnJlZ3MsIERTSV9JTlRfTVNL
MCwgMCk7Ci0JcmVnbWFwX3dyaXRlKGRzaS0+cmVncywgRFNJX0lOVF9NU0sxLCAwKTsKKwlyZWdt
YXBfZmllbGRfcmVhZChkc2ktPmZpZWxkX2ludF9zdGF0MCwgJnZhbCk7CisJcmVnbWFwX2ZpZWxk
X3JlYWQoZHNpLT5maWVsZF9pbnRfc3RhdDEsICZ2YWwpOworCXJlZ21hcF9maWVsZF93cml0ZShk
c2ktPmZpZWxkX2ludF9tYXNrMCwgMCk7CisJcmVnbWFwX2ZpZWxkX3dyaXRlKGRzaS0+ZmllbGRf
aW50X21hc2sxLCAwKTsKIH0KIAogc3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfYnJpZGdlX3Bvc3Rf
ZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQpAQCAtOTg0LDYgKzEwODYsODQgQEAg
c3RhdGljIHZvaWQgZHdfbWlwaV9kc2lfZGVidWdmc19yZW1vdmUoc3RydWN0IGR3X21pcGlfZHNp
ICpkc2kpIHsgfQogCiAjZW5kaWYgLyogQ09ORklHX0RFQlVHX0ZTICovCiAKK3N0YXRpYyB2b2lk
IGR3X21pcGlfZHNpX2dldF9od192ZXJzaW9uKHN0cnVjdCBkd19taXBpX2RzaSAqZHNpKQorewor
CXJlZ21hcF9yZWFkKGRzaS0+cmVncywgRFNJX1ZFUlNJT04sICZkc2ktPmh3X3ZlcnNpb24pOwor
CWRzaS0+aHdfdmVyc2lvbiAmPSBWRVJTSU9OOworCWlmICghZHNpLT5od192ZXJzaW9uKQorCQlk
ZXZfZXJyKGRzaS0+ZGV2LCAiRmFpbGVkIHRvIHJlYWQgRFNJIGh3IHZlcnNpb24gcmVnaXN0ZXJc
biIpOworfQorCisjZGVmaW5lIElOSVRfRklFTEQoZikgSU5JVF9GSUVMRF9DRkcoZmllbGRfIyNm
LCBjZmdfIyNmKQorI2RlZmluZSBJTklUX0ZJRUxEX0NGRyhmLCBjb25mKQkJCQkJCVwKKwlkbyB7
CQkJCQkJCQlcCisJCWRzaS0+ZiA9IGRldm1fcmVnbWFwX2ZpZWxkX2FsbG9jKGRzaS0+ZGV2LCBk
c2ktPnJlZ3MsCVwKKwkJCQkJCSB2YXJpYW50LT5jb25mKTsJXAorCQlpZiAoSVNfRVJSKGRzaS0+
ZikpCQkJCQlcCisJCQlkZXZfd2Fybihkc2ktPmRldiwgIklnbm9yaW5nIHJlZ21hcCBmaWVsZCAi
ICNmICJcbiIpOyBcCisJfSB3aGlsZSAoMCkKKworc3RhdGljIGludCBkd19taXBpX2RzaV9yZWdt
YXBfZmllbGRzX2luaXQoc3RydWN0IGR3X21pcGlfZHNpICpkc2kpCit7CisJY29uc3Qgc3RydWN0
IGR3X21pcGlfZHNpX3ZhcmlhbnQgKnZhcmlhbnQgPSAmZHdfbWlwaV9kc2lfdjEzMF92MTMxX2xh
eW91dDsKKworCUlOSVRfRklFTEQoZHBpXzE4bG9vc2VseV9lbik7CisJSU5JVF9GSUVMRChkcGlf
dmlkKTsKKwlJTklUX0ZJRUxEKGRwaV9jb2xvcl9jb2RpbmcpOworCUlOSVRfRklFTEQoZHBpX3Zz
eW5jX2FjdGl2ZV9sb3cpOworCUlOSVRfRklFTEQoZHBpX2hzeW5jX2FjdGl2ZV9sb3cpOworCUlO
SVRfRklFTEQoY21kX21vZGVfYWNrX3Jxc3RfZW4pOworCUlOSVRfRklFTEQoY21kX21vZGVfYWxs
X2xwX2VuKTsKKwlJTklUX0ZJRUxEKGNtZF9tb2RlX2VuKTsKKwlJTklUX0ZJRUxEKGNtZF9wa3Rf
c3RhdHVzKTsKKwlJTklUX0ZJRUxEKHZpZF9tb2RlX2VuKTsKKwlJTklUX0ZJRUxEKHZpZF9tb2Rl
X3R5cGUpOworCUlOSVRfRklFTEQodmlkX21vZGVfbG93X3Bvd2VyKTsKKwlJTklUX0ZJRUxEKHZp
ZF9wa3Rfc2l6ZSk7CisJSU5JVF9GSUVMRCh2aWRfaHNhX3RpbWUpOworCUlOSVRfRklFTEQodmlk
X2hicF90aW1lKTsKKwlJTklUX0ZJRUxEKHZpZF9obGluZV90aW1lKTsKKwlJTklUX0ZJRUxEKHZp
ZF92c2FfdGltZSk7CisJSU5JVF9GSUVMRCh2aWRfdmJwX3RpbWUpOworCUlOSVRfRklFTEQodmlk
X3ZmcF90aW1lKTsKKwlJTklUX0ZJRUxEKHZpZF92YWN0aXZlX3RpbWUpOworCUlOSVRfRklFTEQo
cGh5X3R4cmVxdWVzdGNsa2hzKTsKKwlJTklUX0ZJRUxEKHBoeV90ZXN0Y2xyKTsKKwlJTklUX0ZJ
RUxEKHBoeV91bnNodXRkb3dueik7CisJSU5JVF9GSUVMRChwaHlfdW5yc3R6KTsKKwlJTklUX0ZJ
RUxEKHBoeV9lbmFibGVjbGspOworCUlOSVRfRklFTEQocGh5X25sYW5lcyk7CisJSU5JVF9GSUVM
RChwaHlfc3RvcF93YWl0X3RpbWUpOworCUlOSVRfRklFTEQocGh5X3N0YXR1cyk7CisJSU5JVF9G
SUVMRChwY2toZGxfY2ZnKTsKKwlJTklUX0ZJRUxEKGhzdHhfdGltZW91dF9jb3VudGVyKTsKKwlJ
TklUX0ZJRUxEKGxwcnhfdGltZW91dF9jb3VudGVyKTsKKwlJTklUX0ZJRUxEKGludF9zdGF0MCk7
CisJSU5JVF9GSUVMRChpbnRfc3RhdDEpOworCUlOSVRfRklFTEQoaW50X21hc2swKTsKKwlJTklU
X0ZJRUxEKGludF9tYXNrMSk7CisJSU5JVF9GSUVMRChnZW5faGRyKTsKKwlJTklUX0ZJRUxEKGdl
bl9wYXlsb2FkKTsKKwlJTklUX0ZJRUxEKHBoeV9idGFfdGltZSk7CisJSU5JVF9GSUVMRCh2aWRf
bW9kZV92cGdfZW4pOworCUlOSVRfRklFTEQodmlkX21vZGVfdnBnX2hvcml6KTsKKwlJTklUX0ZJ
RUxEKHBoeV9jbGtscDJoc190aW1lKTsKKwlJTklUX0ZJRUxEKHBoeV9jbGtoczJscF90aW1lKTsK
KwlJTklUX0ZJRUxEKHBoeV9mb3JjZXBsbCk7CisKKwlpZiAoZHNpLT5od192ZXJzaW9uID09IEhX
VkVSXzEzMSkgeworCQlJTklUX0ZJRUxEX0NGRyhmaWVsZF9waHlfbWF4X3JkX3RpbWUsIGNmZ19w
aHlfbWF4X3JkX3RpbWVfdjEzMSk7CisJCUlOSVRfRklFTERfQ0ZHKGZpZWxkX3BoeV9scDJoc190
aW1lLCBjZmdfcGh5X2xwMmhzX3RpbWVfdjEzMSk7CisJCUlOSVRfRklFTERfQ0ZHKGZpZWxkX3Bo
eV9oczJscF90aW1lLCBjZmdfcGh5X2hzMmxwX3RpbWVfdjEzMSk7CisJfSBlbHNlIHsKKwkJSU5J
VF9GSUVMRChwaHlfbWF4X3JkX3RpbWUpOworCQlJTklUX0ZJRUxEKHBoeV9scDJoc190aW1lKTsK
KwkJSU5JVF9GSUVMRChwaHlfaHMybHBfdGltZSk7CisJfQorCisJcmV0dXJuIDA7Cit9CisKIHN0
YXRpYyBzdHJ1Y3QgZHdfbWlwaV9kc2kgKgogX19kd19taXBpX2RzaV9wcm9iZShzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlICpwZGV2LAogCQkgICAgc3RydWN0IGR3X21pcGlfZHNpX3BsYXRfZGF0YSAq
cGxhdF9kYXRhKQpAQCAtMTA2NSw2ICsxMjQ1LDE0IEBAIF9fZHdfbWlwaV9kc2lfcHJvYmUoc3Ry
dWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiwKIAkJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKGRzaS0+
cGNsayk7CiAJfQogCisJZHdfbWlwaV9kc2lfZ2V0X2h3X3ZlcnNpb24oZHNpKTsKKworCXJldCA9
IGR3X21pcGlfZHNpX3JlZ21hcF9maWVsZHNfaW5pdChkc2kpOworCWlmIChyZXQpIHsKKwkJZGV2
X2VycihkZXYsICJGYWlsZWQgdG8gaW5pdCByZWdpc3RlciBsYXlvdXQgbWFwOiAlZFxuIiwgcmV0
KTsKKwkJcmV0dXJuIEVSUl9QVFIocmV0KTsKKwl9CisKIAlkd19taXBpX2RzaV9kZWJ1Z2ZzX2lu
aXQoZHNpKTsKIAlwbV9ydW50aW1lX2VuYWJsZShkZXYpOwogCi0tIAoyLjIzLjAKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5n
IGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
