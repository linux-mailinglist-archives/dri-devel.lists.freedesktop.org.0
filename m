Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id F3C68E96C9
	for <lists+dri-devel@lfdr.de>; Wed, 30 Oct 2019 07:50:08 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 8BAD56EC95;
	Wed, 30 Oct 2019 06:50:01 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from us-smtp-1.mimecast.com (us-smtp-delivery-1.mimecast.com
 [205.139.110.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0C4D16EC94
 for <dri-devel@lists.freedesktop.org>; Wed, 30 Oct 2019 06:49:59 +0000 (UTC)
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-330-cu6x7av0N3mffQkm0NT-tw-1; Wed, 30 Oct 2019 02:49:55 -0400
Received: from smtp.corp.redhat.com (int-mx04.intmail.prod.int.phx2.redhat.com
 [10.5.11.14])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 45A7E180496F;
 Wed, 30 Oct 2019 06:49:51 +0000 (UTC)
Received: from jason-ThinkPad-X1-Carbon-6th.redhat.com
 (ovpn-12-223.pek2.redhat.com [10.72.12.223])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 840105D9C3;
 Wed, 30 Oct 2019 06:47:30 +0000 (UTC)
From: Jason Wang <jasowang@redhat.com>
To: kvm@vger.kernel.org, linux-s390@vger.kernel.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 intel-gfx@lists.freedesktop.org, intel-gvt-dev@lists.freedesktop.org,
 kwankhede@nvidia.com, alex.williamson@redhat.com, mst@redhat.com,
 tiwei.bie@intel.com
Subject: [PATCH V6 4/6] mdev: introduce virtio device and its device ops
Date: Wed, 30 Oct 2019 14:44:42 +0800
Message-Id: <20191030064444.21166-5-jasowang@redhat.com>
In-Reply-To: <20191030064444.21166-1-jasowang@redhat.com>
References: <20191030064444.21166-1-jasowang@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.14
X-MC-Unique: cu6x7av0N3mffQkm0NT-tw-1
X-Mimecast-Spam-Score: 0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=redhat.com; 
 s=mimecast20190719; t=1572418199;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=UK1MotTy5rfkfhTzsZ4Wae8D10qqnJC1J2Auz6O3Ogo=;
 b=E60sAIyPptp/igSypx/TQwOs4MgP9m79yDxx4GEKdkziEEw54DUskCZ3Bt+vSPUG+TJwC/
 95tcBmF76e5A+5ZXWCsCYM0OnYbM18QE5uJglv3GYVyOp7mEBQ3hxSVLhTmIaU33KrDbJU
 AdwfgF0uJQ82oCbRxSP2yXD1C2MXZsk=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: christophe.de.dinechin@gmail.com, sebott@linux.ibm.com, airlied@linux.ie,
 Jason Wang <jasowang@redhat.com>, heiko.carstens@de.ibm.com,
 kevin.tian@intel.com, virtualization@lists.linux-foundation.org,
 rob.miller@broadcom.com, lulu@redhat.com, eperezma@redhat.com,
 pasic@linux.ibm.com, borntraeger@de.ibm.com, haotian.wang@sifive.com,
 zhi.a.wang@intel.com, farman@linux.ibm.com, idos@mellanox.com,
 gor@linux.ibm.com, cunming.liang@intel.com, rodrigo.vivi@intel.com,
 xiao.w.wang@intel.com, freude@linux.ibm.com, parav@mellanox.com,
 zhihong.wang@intel.com, stefanha@redhat.com, akrowiak@linux.ibm.com,
 netdev@vger.kernel.org, cohuck@redhat.com, oberpar@linux.ibm.com,
 maxime.coquelin@redhat.com, lingshan.zhu@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBpbXBsZW1lbnRzIGJhc2ljIHN1cHBvcnQgZm9yIG1kZXYgZHJpdmVyIHRoYXQg
c3VwcG9ydHMKdmlydGlvIHRyYW5zcG9ydCBmb3Iga2VybmVsIHZpcnRpbyBkcml2ZXIuCgpTaWdu
ZWQtb2ZmLWJ5OiBKYXNvbiBXYW5nIDxqYXNvd2FuZ0ByZWRoYXQuY29tPgotLS0KIGRyaXZlcnMv
dmZpby9tZGV2L21kZXZfY29yZS5jICAgIHwgIDIwICsrKysKIGRyaXZlcnMvdmZpby9tZGV2L21k
ZXZfcHJpdmF0ZS5oIHwgICAyICsKIGluY2x1ZGUvbGludXgvbWRldi5oICAgICAgICAgICAgIHwg
ICA2ICsrCiBpbmNsdWRlL2xpbnV4L3ZpcnRpb19tZGV2X29wcy5oICB8IDE2MSArKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrCiA0IGZpbGVzIGNoYW5nZWQsIDE4OSBpbnNlcnRpb25zKCsp
CiBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS9saW51eC92aXJ0aW9fbWRldl9vcHMuaAoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfY29yZS5jIGIvZHJpdmVycy92ZmlvL21k
ZXYvbWRldl9jb3JlLmMKaW5kZXggYWI2Y2Y1YTVmZjlmLi4yMmNhNTg5NzUwZDggMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfY29yZS5jCisrKyBiL2RyaXZlcnMvdmZpby9tZGV2
L21kZXZfY29yZS5jCkBAIC03Niw2ICs3NiwyNiBAQCBjb25zdCBzdHJ1Y3QgdmZpb19tZGV2X2Rl
dmljZV9vcHMgKm1kZXZfZ2V0X3ZmaW9fb3BzKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKIH0K
IEVYUE9SVF9TWU1CT0wobWRldl9nZXRfdmZpb19vcHMpOwogCisvKiBTcGVjaWZ5IHRoZSB2aXJ0
aW8gZGV2aWNlIG9wcyBmb3IgdGhlIG1kZXYgZGV2aWNlLCB0aGlzCisgKiBtdXN0IGJlIGNhbGxl
ZCBkdXJpbmcgY3JlYXRlKCkgY2FsbGJhY2sgZm9yIHZpcnRpbyBtZGV2IGRldmljZS4KKyAqLwor
dm9pZCBtZGV2X3NldF92aXJ0aW9fb3BzKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwKKwkJCSBj
b25zdCBzdHJ1Y3QgdmlydGlvX21kZXZfZGV2aWNlX29wcyAqdmlydGlvX29wcykKK3sKKwltZGV2
X3NldF9jbGFzcyhtZGV2LCBNREVWX0NMQVNTX0lEX1ZJUlRJTyk7CisJbWRldi0+dmlydGlvX29w
cyA9IHZpcnRpb19vcHM7Cit9CitFWFBPUlRfU1lNQk9MKG1kZXZfc2V0X3ZpcnRpb19vcHMpOwor
CisvKiBHZXQgdGhlIHZpcnRpbyBkZXZpY2Ugb3BzIGZvciB0aGUgbWRldiBkZXZpY2UuICovCitj
b25zdCBzdHJ1Y3QgdmlydGlvX21kZXZfZGV2aWNlX29wcyAqCittZGV2X2dldF92aXJ0aW9fb3Bz
KHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKK3sKKwlXQVJOX09OKG1kZXYtPmNsYXNzX2lkICE9
IE1ERVZfQ0xBU1NfSURfVklSVElPKTsKKwlyZXR1cm4gbWRldi0+dmlydGlvX29wczsKK30KK0VY
UE9SVF9TWU1CT0wobWRldl9nZXRfdmlydGlvX29wcyk7CisKIHN0cnVjdCBkZXZpY2UgKm1kZXZf
ZGV2KHN0cnVjdCBtZGV2X2RldmljZSAqbWRldikKIHsKIAlyZXR1cm4gJm1kZXYtPmRldjsKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfcHJpdmF0ZS5oIGIvZHJpdmVycy92Zmlv
L21kZXYvbWRldl9wcml2YXRlLmgKaW5kZXggMDc3MDQxMGRlZDJhLi43YjQ3ODkwYzM0ZTcgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvdmZpby9tZGV2L21kZXZfcHJpdmF0ZS5oCisrKyBiL2RyaXZlcnMv
dmZpby9tZGV2L21kZXZfcHJpdmF0ZS5oCkBAIC0xMSw2ICsxMSw3IEBACiAjZGVmaW5lIE1ERVZf
UFJJVkFURV9ICiAKICNpbmNsdWRlIDxsaW51eC92ZmlvX21kZXZfb3BzLmg+CisjaW5jbHVkZSA8
bGludXgvdmlydGlvX21kZXZfb3BzLmg+CiAKIGludCAgbWRldl9idXNfcmVnaXN0ZXIodm9pZCk7
CiB2b2lkIG1kZXZfYnVzX3VucmVnaXN0ZXIodm9pZCk7CkBAIC0zOCw2ICszOSw3IEBAIHN0cnVj
dCBtZGV2X2RldmljZSB7CiAJdTE2IGNsYXNzX2lkOwogCXVuaW9uIHsKIAkJY29uc3Qgc3RydWN0
IHZmaW9fbWRldl9kZXZpY2Vfb3BzICp2ZmlvX29wczsKKwkJY29uc3Qgc3RydWN0IHZpcnRpb19t
ZGV2X2RldmljZV9vcHMgKnZpcnRpb19vcHM7CiAJfTsKIH07CiAKZGlmZiAtLWdpdCBhL2luY2x1
ZGUvbGludXgvbWRldi5oIGIvaW5jbHVkZS9saW51eC9tZGV2LmgKaW5kZXggNDYyNWYxYTExMDE0
Li45YjY5YjBiYmViZmQgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvbWRldi5oCisrKyBiL2lu
Y2x1ZGUvbGludXgvbWRldi5oCkBAIC0xNyw2ICsxNyw3IEBACiAKIHN0cnVjdCBtZGV2X2Rldmlj
ZTsKIHN0cnVjdCB2ZmlvX21kZXZfZGV2aWNlX29wczsKK3N0cnVjdCB2aXJ0aW9fbWRldl9kZXZp
Y2Vfb3BzOwogCiAvKgogICogQ2FsbGVkIGJ5IHRoZSBwYXJlbnQgZGV2aWNlIGRyaXZlciB0byBz
ZXQgdGhlIGRldmljZSB3aGljaCByZXByZXNlbnRzCkBAIC0xMTIsNiArMTEzLDEwIEBAIHZvaWQg
bWRldl9zZXRfY2xhc3Moc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LCB1MTYgaWQpOwogdm9pZCBt
ZGV2X3NldF92ZmlvX29wcyhzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsCiAJCSAgICAgICBjb25z
dCBzdHJ1Y3QgdmZpb19tZGV2X2RldmljZV9vcHMgKnZmaW9fb3BzKTsKIGNvbnN0IHN0cnVjdCB2
ZmlvX21kZXZfZGV2aWNlX29wcyAqbWRldl9nZXRfdmZpb19vcHMoc3RydWN0IG1kZXZfZGV2aWNl
ICptZGV2KTsKK3ZvaWQgbWRldl9zZXRfdmlydGlvX29wcyhzdHJ1Y3QgbWRldl9kZXZpY2UgKm1k
ZXYsCisJCQkgY29uc3Qgc3RydWN0IHZpcnRpb19tZGV2X2RldmljZV9vcHMgKnZpcnRpb19vcHMp
OworY29uc3Qgc3RydWN0IHZpcnRpb19tZGV2X2RldmljZV9vcHMgKgorbWRldl9nZXRfdmlydGlv
X29wcyhzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpOwogCiBleHRlcm4gc3RydWN0IGJ1c190eXBl
IG1kZXZfYnVzX3R5cGU7CiAKQEAgLTEyNyw2ICsxMzIsNyBAQCBzdHJ1Y3QgbWRldl9kZXZpY2Ug
Km1kZXZfZnJvbV9kZXYoc3RydWN0IGRldmljZSAqZGV2KTsKIAogZW51bSB7CiAJTURFVl9DTEFT
U19JRF9WRklPID0gMSwKKwlNREVWX0NMQVNTX0lEX1ZJUlRJTyA9IDIsCiAJLyogTmV3IGVudHJp
ZXMgbXVzdCBiZSBhZGRlZCBoZXJlICovCiB9OwogCmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4
L3ZpcnRpb19tZGV2X29wcy5oIGIvaW5jbHVkZS9saW51eC92aXJ0aW9fbWRldl9vcHMuaApuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjVmY2MxN2Q2MDQ0ZAotLS0gL2Rl
di9udWxsCisrKyBiL2luY2x1ZGUvbGludXgvdmlydGlvX21kZXZfb3BzLmgKQEAgLTAsMCArMSwx
NjEgQEAKKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkgKi8KKy8qCisg
KiBWaXJ0aW8gbWVkaWF0ZWQgZGV2aWNlIGRyaXZlcgorICoKKyAqIENvcHlyaWdodCAyMDE5LCBS
ZWQgSGF0IENvcnAuCisgKiAgICAgQXV0aG9yOiBKYXNvbiBXYW5nIDxqYXNvd2FuZ0ByZWRoYXQu
Y29tPgorICovCisjaWZuZGVmIF9MSU5VWF9WSVJUSU9fTURFVl9ICisjZGVmaW5lIF9MSU5VWF9W
SVJUSU9fTURFVl9ICisKKyNpbmNsdWRlIDxsaW51eC9pbnRlcnJ1cHQuaD4KKyNpbmNsdWRlIDxs
aW51eC9tZGV2Lmg+CisjaW5jbHVkZSA8dWFwaS9saW51eC92aG9zdC5oPgorCisjZGVmaW5lIFZJ
UlRJT19NREVWX0RFVklDRV9BUElfU1RSSU5HCQkidmlydGlvLW1kZXYiCisjZGVmaW5lIFZJUlRJ
T19NREVWX0ZfVkVSU0lPTl8xIDB4MQorCitzdHJ1Y3QgdmlydGlvX21kZXZfY2FsbGJhY2sgewor
CWlycXJldHVybl90ICgqY2FsbGJhY2spKHZvaWQgKmRhdGEpOworCXZvaWQgKnByaXZhdGU7Cit9
OworCisvKioKKyAqIHN0cnVjdCB2ZmlvX21kZXZfZGV2aWNlX29wcyAtIFN0cnVjdHVyZSB0byBi
ZSByZWdpc3RlcmVkIGZvciBlYWNoCisgKiBtZGV2IGRldmljZSB0byByZWdpc3RlciB0aGUgZGV2
aWNlIGZvciB2aXJ0aW8vdmhvc3QgZHJpdmVycy4KKyAqCisgKiBUaGUgZGV2aWNlIG9wcyB0aGF0
IGlzIHN1cHBvcnRlZCBieSBWSVJUSU9fTURFVl9GX1ZFUlNJT05fMSwgdGhlCisgKiBjYWxsYmFj
a3MgYXJlIG1hbmRhdG9yeSB1bmxlc3MgZXhwbGljaXR5IG1lbnRpb25lZC4KKyAqCisgKiBAZ2V0
X21kZXZfZmVhdHVyZXM6CQlHZXQgYSBzZXQgb2YgYml0cyB0aGF0IGRlbW9uc3RyYXRlCisgKgkJ
CQl0aGVjYXBhYmlsaXR5IG9mIHRoZSBtZGV2IGRldmljZS4gTmV3CisgKgkJCQlmZWF0dXJlcyBi
aXRzIG11c3QgYmUgYWRkZWQgd2hlbgorICoJCQkJaW50cm9kdWNpbmcgbmV3IGRldmljZSBvcHMu
IFRoaXMKKyAqCQkJCWFsbG93cyB0aGUgZGV2aWNlIG9wcyB0byBiZSBleHRlbmRlZAorICoJCQkJ
KG9uZSBmZWF0dXJlIGNvdWxkIGhhdmUgTiBuZXcgb3BzKS4KKyAqCQkJCUBtZGV2OiBtZWRpYXRl
ZCBkZXZpY2UKKyAqCQkJCVJldHVybnMgdGhlIG1kZXYgZmVhdHVyZXMgKEFQSSkgc3VwcG9ydCBi
eQorICoJCQkJdGhlIGRldmljZS4KKyAqIEBzZXRfdnFfYWRkcmVzczoJCVNldCB0aGUgYWRkcmVz
cyBvZiB2aXJ0cXVldWUKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCUBpZHg6
IHZpcnRxdWV1ZSBpbmRleAorICoJCQkJQGRlc2NfYXJlYTogYWRkcmVzcyBvZiBkZXNjIGFyZWEK
KyAqCQkJCUBkcml2ZXJfYXJlYTogYWRkcmVzcyBvZiBkcml2ZXIgYXJlYQorICoJCQkJQGRldmlj
ZV9hcmVhOiBhZGRyZXNzIG9mIGRldmljZSBhcmVhCisgKgkJCQlSZXR1cm5zIGludGVnZXI6IHN1
Y2Nlc3MgKDApIG9yIGVycm9yICg8IDApCisgKiBAc2V0X3ZxX251bToJCQlTZXQgdGhlIHNpemUg
b2YgdmlydHF1ZXVlCisgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCisgKgkJCQlAaWR4OiB2
aXJ0cXVldWUgaW5kZXgKKyAqCQkJCUBudW06IHRoZSBzaXplIG9mIHZpcnRxdWV1ZQorICogQGtp
Y2tfdnE6CQkJS2ljayB0aGUgdmlydHF1ZXVlCisgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNl
CisgKgkJCQlAaWR4OiB2aXJ0cXVldWUgaW5kZXgKKyAqIEBzZXRfdnFfY2I6CQkJU2V0IHRoZSBp
bnRlcnJ1cHQgY2FsbGJhY2sgZnVuY3Rpb24gZm9yCisgKgkJCQlhIHZpcnRxdWV1ZQorICoJCQkJ
QG1kZXY6IG1lZGlhdGVkIGRldmljZQorICoJCQkJQGlkeDogdmlydHF1ZXVlIGluZGV4CisgKgkJ
CQlAY2I6IHZpcnRpby1tZGV2IGludGVycnVwdCBjYWxsYmFjayBzdHJ1Y3R1cmUKKyAqIEBzZXRf
dnFfcmVhZHk6CQlTZXQgcmVhZHkgc3RhdHVzIGZvciBhIHZpcnRxdWV1ZQorICoJCQkJQG1kZXY6
IG1lZGlhdGVkIGRldmljZQorICoJCQkJQGlkeDogdmlydHF1ZXVlIGluZGV4CisgKgkJCQlAcmVh
ZHk6IHJlYWR5ICh0cnVlKSBub3QgcmVhZHkoZmFsc2UpCisgKiBAZ2V0X3ZxX3JlYWR5OgkJR2V0
IHJlYWR5IHN0YXR1cyBmb3IgYSB2aXJ0cXVldWUKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZp
Y2UKKyAqCQkJCUBpZHg6IHZpcnRxdWV1ZSBpbmRleAorICoJCQkJUmV0dXJucyBib29sZWFuOiBy
ZWFkeSAodHJ1ZSkgb3Igbm90IChmYWxzZSkKKyAqIEBzZXRfdnFfc3RhdGU6CQlTZXQgdGhlIHN0
YXRlIGZvciBhIHZpcnRxdWV1ZQorICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQorICoJCQkJ
QGlkeDogdmlydHF1ZXVlIGluZGV4CisgKgkJCQlAc3RhdGU6IHZpcnRxdWV1ZSBzdGF0ZSAobGFz
dF9hdmFpbF9pZHgpCisgKgkJCQlSZXR1cm5zIGludGVnZXI6IHN1Y2Nlc3MgKDApIG9yIGVycm9y
ICg8IDApCisgKiBAZ2V0X3ZxX3N0YXRlOgkJR2V0IHRoZSBzdGF0ZSBmb3IgYSB2aXJ0cXVldWUK
KyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCUBpZHg6IHZpcnRxdWV1ZSBpbmRl
eAorICoJCQkJUmV0dXJucyB2aXJ0cXVldWUgc3RhdGUgKGxhc3RfYXZhaWxfaWR4KQorICogQGdl
dF92cV9hbGlnbjoJCUdldCB0aGUgdmlydHF1ZXVlIGFsaWduIHJlcXVpcmVtZW50CisgKgkJCQlm
b3IgdGhlIGRldmljZQorICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQorICoJCQkJUmV0dXJu
cyB2aXJ0cXVldWUgYWxnaW4gcmVxdWlyZW1lbnQKKyAqIEBnZXRfZmVhdHVyZXM6CQlHZXQgdmly
dGlvIGZlYXR1cmVzIHN1cHBvcnRlZCBieSB0aGUgZGV2aWNlCisgKgkJCQlAbWRldjogbWVkaWF0
ZWQgZGV2aWNlCisgKgkJCQlSZXR1cm5zIHRoZSB2aXJ0aW8gZmVhdHVyZXMgc3VwcG9ydCBieSB0
aGUKKyAqCQkJCWRldmljZQorICogQHNldF9mZWF0dXJlczoJCVNldCB2aXJ0aW8gZmVhdHVyZXMg
c3VwcG9ydGVkIGJ5IHRoZSBkcml2ZXIKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAq
CQkJCUBmZWF0dXJlczogZmVhdHVyZSBzdXBwb3J0IGJ5IHRoZSBkcml2ZXIKKyAqCQkJCVJldHVy
bnMgaW50ZWdlcjogc3VjY2VzcyAoMCkgb3IgZXJyb3IgKDwgMCkKKyAqIEBzZXRfY29uZmlnX2Ni
OgkJU2V0IHRoZSBjb25maWcgaW50ZXJydXB0IGNhbGxiYWNrCisgKgkJCQlAbWRldjogbWVkaWF0
ZWQgZGV2aWNlCisgKgkJCQlAY2I6IHZpcnRpby1tZGV2IGludGVycnVwdCBjYWxsYmFjayBzdHJ1
Y3R1cmUKKyAqIEBnZXRfdnFfbnVtX21heDoJCUdldCB0aGUgbWF4IHNpemUgb2YgdmlydHF1ZXVl
CisgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCisgKgkJCQlSZXR1cm5zIHUxNjogbWF4IHNp
emUgb2YgdmlydHF1ZXVlCisgKiBAZ2V0X2RldmljZV9pZDoJCUdldCB2aXJ0aW8gZGV2aWNlIGlk
CisgKgkJCQlAbWRldjogbWVkaWF0ZWQgZGV2aWNlCisgKgkJCQlSZXR1cm5zIHUzMjogdmlydGlv
IGRldmljZSBpZAorICogQGdldF92ZW5kb3JfaWQ6CQlHZXQgaWQgZm9yIHRoZSB2ZW5kb3IgdGhh
dCBwcm92aWRlcyB0aGlzIGRldmljZQorICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQorICoJ
CQkJUmV0dXJucyB1MzI6IHZpcnRpbyB2ZW5kb3IgaWQKKyAqIEBnZXRfc3RhdHVzOgkJCUdldCB0
aGUgZGV2aWNlIHN0YXR1cworICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQorICoJCQkJUmV0
dXJucyB1ODogdmlydGlvIGRldmljZSBzdGF0dXMKKyAqIEBzZXRfc3RhdHVzOgkJCVNldCB0aGUg
ZGV2aWNlIHN0YXR1cworICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRldmljZQorICoJCQkJQHN0YXR1
czogdmlydGlvIGRldmljZSBzdGF0dXMKKyAqIEBnZXRfY29uZmlnOgkJCVJlYWQgZnJvbSBkZXZp
Y2Ugc3BlY2lmaWMgY29uZmlndXJhdGlvbiBzcGFjZQorICoJCQkJQG1kZXY6IG1lZGlhdGVkIGRl
dmljZQorICoJCQkJQG9mZnNldDogb2Zmc2V0IGZyb20gdGhlIGJlZ2lubmluZyBvZgorICoJCQkJ
Y29uZmlndXJhdGlvbiBzcGFjZQorICoJCQkJQGJ1ZjogYnVmZmVyIHVzZWQgdG8gcmVhZCB0bwor
ICoJCQkJQGxlbjogdGhlIGxlbmd0aCB0byByZWFkIGZyb20KKyAqCQkJCWNvbmZpZ3JhdGlvbiBz
cGFjZQorICogQHNldF9jb25maWc6CQkJV3JpdGUgdG8gZGV2aWNlIHNwZWNpZmljIGNvbmZpZ3Vy
YXRpb24gc3BhY2UKKyAqCQkJCUBtZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCUBvZmZzZXQ6
IG9mZnNldCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YKKyAqCQkJCWNvbmZpZ3VyYXRpb24gc3BhY2UK
KyAqCQkJCUBidWY6IGJ1ZmZlciB1c2VkIHRvIHdyaXRlIGZyb20KKyAqCQkJCUBsZW46IHRoZSBs
ZW5ndGggdG8gd3JpdGUgdG8KKyAqCQkJCWNvbmZpZ3JhdGlvbiBzcGFjZQorICogQGdldF9nZW5l
cmF0aW9uOgkJR2V0IGRldmljZSBjb25maWcgZ2VuZXJhdG9uIChvcHRpb25hbCkKKyAqCQkJCUBt
ZGV2OiBtZWRpYXRlZCBkZXZpY2UKKyAqCQkJCVJldHVybnMgdTMyOiBkZXZpY2UgZ2VuZXJhdGlv
bgorICovCitzdHJ1Y3QgdmlydGlvX21kZXZfZGV2aWNlX29wcyB7CisJLyogTWRldiBkZXZpY2Ug
b3BzICovCisJdTY0ICgqZ2V0X21kZXZfZmVhdHVyZXMpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRl
dik7CisKKwkvKiBWaXJ0cXVldWUgb3BzICovCisJaW50ICgqc2V0X3ZxX2FkZHJlc3MpKHN0cnVj
dCBtZGV2X2RldmljZSAqbWRldiwKKwkJCSAgICAgIHUxNiBpZHgsIHU2NCBkZXNjX2FyZWEsIHU2
NCBkcml2ZXJfYXJlYSwKKwkJCSAgICAgIHU2NCBkZXZpY2VfYXJlYSk7CisJdm9pZCAoKnNldF92
cV9udW0pKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdTE2IGlkeCwgdTMyIG51bSk7CisJdm9p
ZCAoKmtpY2tfdnEpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdTE2IGlkeCk7CisJdm9pZCAo
KnNldF92cV9jYikoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2LCB1MTYgaWR4LAorCQkJICBzdHJ1
Y3QgdmlydGlvX21kZXZfY2FsbGJhY2sgKmNiKTsKKwl2b2lkICgqc2V0X3ZxX3JlYWR5KShzdHJ1
Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUxNiBpZHgsIGJvb2wgcmVhZHkpOworCWJvb2wgKCpnZXRf
dnFfcmVhZHkpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldiwgdTE2IGlkeCk7CisJaW50ICgqc2V0
X3ZxX3N0YXRlKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUxNiBpZHgsIHU2NCBzdGF0ZSk7
CisJdTY0ICgqZ2V0X3ZxX3N0YXRlKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYsIHUxNiBpZHgp
OworCisJLyogVmlydGlvIGRldmljZSBvcHMgKi8KKwl1MTYgKCpnZXRfdnFfYWxpZ24pKHN0cnVj
dCBtZGV2X2RldmljZSAqbWRldik7CisJdTY0ICgqZ2V0X2ZlYXR1cmVzKShzdHJ1Y3QgbWRldl9k
ZXZpY2UgKm1kZXYpOworCWludCAoKnNldF9mZWF0dXJlcykoc3RydWN0IG1kZXZfZGV2aWNlICpt
ZGV2LCB1NjQgZmVhdHVyZXMpOworCXZvaWQgKCpzZXRfY29uZmlnX2NiKShzdHJ1Y3QgbWRldl9k
ZXZpY2UgKm1kZXYsCisJCQkgICAgICBzdHJ1Y3QgdmlydGlvX21kZXZfY2FsbGJhY2sgKmNiKTsK
Kwl1MTYgKCpnZXRfdnFfbnVtX21heCkoc3RydWN0IG1kZXZfZGV2aWNlICptZGV2KTsKKwl1MzIg
KCpnZXRfZGV2aWNlX2lkKShzdHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpOworCXUzMiAoKmdldF92
ZW5kb3JfaWQpKHN0cnVjdCBtZGV2X2RldmljZSAqbWRldik7CisJdTggKCpnZXRfc3RhdHVzKShz
dHJ1Y3QgbWRldl9kZXZpY2UgKm1kZXYpOworCXZvaWQgKCpzZXRfc3RhdHVzKShzdHJ1Y3QgbWRl
dl9kZXZpY2UgKm1kZXYsIHU4IHN0YXR1cyk7CisJdm9pZCAoKmdldF9jb25maWcpKHN0cnVjdCBt
ZGV2X2RldmljZSAqbWRldiwgdW5zaWduZWQgaW50IG9mZnNldCwKKwkJCSAgIHZvaWQgKmJ1Ziwg
dW5zaWduZWQgaW50IGxlbik7CisJdm9pZCAoKnNldF9jb25maWcpKHN0cnVjdCBtZGV2X2Rldmlj
ZSAqbWRldiwgdW5zaWduZWQgaW50IG9mZnNldCwKKwkJCSAgIGNvbnN0IHZvaWQgKmJ1ZiwgdW5z
aWduZWQgaW50IGxlbik7CisJdTMyICgqZ2V0X2dlbmVyYXRpb24pKHN0cnVjdCBtZGV2X2Rldmlj
ZSAqbWRldik7Cit9OworCit2b2lkIG1kZXZfc2V0X3ZpcnRpb19vcHMoc3RydWN0IG1kZXZfZGV2
aWNlICptZGV2LAorCQkJIGNvbnN0IHN0cnVjdCB2aXJ0aW9fbWRldl9kZXZpY2Vfb3BzICp2aXJ0
aW9fb3BzKTsKKworI2VuZGlmCi0tIAoyLjE5LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2RyaS1kZXZlbA==
