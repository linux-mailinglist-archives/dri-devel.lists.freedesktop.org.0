Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3EABCF07D4
	for <lists+dri-devel@lfdr.de>; Tue,  5 Nov 2019 22:11:03 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 271B36E9FE;
	Tue,  5 Nov 2019 21:10:59 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-yw1-xc44.google.com (mail-yw1-xc44.google.com
 [IPv6:2607:f8b0:4864:20::c44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 23FDA6E9FE
 for <dri-devel@lists.freedesktop.org>; Tue,  5 Nov 2019 21:10:57 +0000 (UTC)
Received: by mail-yw1-xc44.google.com with SMTP id a83so7411996ywe.11
 for <dri-devel@lists.freedesktop.org>; Tue, 05 Nov 2019 13:10:57 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=9rSYARhN3b2F7BmOpE2cXjpPtSaFQKmzVCGOumhcuwg=;
 b=gC4FZNs2tnNBOC3MaEx5dvHz6O7+xVifh9nuNJdawZz3N3Elt7eLGKDUBuP5RFF3+5
 rTrocqvnzvDtck+konxAMbDstbg9dBrvUY7Sqz8ZG3L0BR3fkVp1YffQ3Qbgx1FPFudq
 FthfJ/XtQNNIjan6GuZ3FXOTJXjAR5sVxruSwWvwureVMAqP4wUH1VnsGvbO+D2WImoK
 wQijRPn/8Y4JwpzCwW1/f/8LmuPLsZmQnmM/y6F5S8+9OBMBWIftZ0KTlsfhlx8vO5HP
 /5VRG/QNHSykNhYhso9cl6BhRyYe8wzwpkCPGv7IAcP0nnNtoOLBXgvVK4TYCgGkKu7Q
 w0bg==
X-Gm-Message-State: APjAAAUNCLyTBUjlcfeCYnZp8m5ZgLSCsY2ZD3zoUcacE7tl980ztWsS
 R9z8ICHm5OV25RJvTTmUKRgzgpJe7XY=
X-Google-Smtp-Source: APXvYqwk0F8Xq86aLEEo6QvW5jscZPzVRTRYEBQOJjXehNuiMOKQ4SUnYGK0LLbYQDo3+77/8w4Jtw==
X-Received: by 2002:a0d:f8c6:: with SMTP id
 i189mr24531710ywf.411.1572988255960; 
 Tue, 05 Nov 2019 13:10:55 -0800 (PST)
Received: from rosewood.cam.corp.google.com
 ([2620:0:1013:11:89c6:2139:5435:371d])
 by smtp.gmail.com with ESMTPSA id j66sm1815216ywb.101.2019.11.05.13.10.55
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 05 Nov 2019 13:10:55 -0800 (PST)
From: Sean Paul <sean@poorly.run>
To: dri-devel@lists.freedesktop.org,
	linux-mediatek@lists.infradead.org
Subject: [PATCH v2 4/7] drm/mediatek: Plumb supported rotation values from
 components to plane init
Date: Tue,  5 Nov 2019 16:10:21 -0500
Message-Id: <20191105211034.123937-5-sean@poorly.run>
X-Mailer: git-send-email 2.24.0.rc1.363.gb1bccd3e3d-goog
In-Reply-To: <20191105211034.123937-1-sean@poorly.run>
References: <20191105211034.123937-1-sean@poorly.run>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=poorly.run; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=9rSYARhN3b2F7BmOpE2cXjpPtSaFQKmzVCGOumhcuwg=;
 b=SOht2ohCjqLrlZPq55rZ3anuMMKFp/QgaSmJhUWGEFjcZ3/AAFfFKH7iOkzM0vgcv3
 W1J6H42pEnK3h94IuJb/CT9RHm5BVz3cAqXX97FID9YTw/D9vO6XoOKwNnFgNiRtdBrT
 ATE0IH8Ay+I9ekaK7yQVtxWDauagErUrCz7Qz5ZUCLhHxtEN8dls/5g4POuA+ug136/H
 MTabTceDtlw2hfiztNZM4KLFVDzh5/zGY4dWp4Owzf7Su0VcbzRxEoPmOlgbsXuy8FCO
 B8RGeds9Qd3QlnkdC7ACFgZPu7XOuk0KOeTmXx3lanPTLV1UrVKtS3PZu/O2wdJjM41B
 6KOw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dcastagna@chromium.org, matthias.bgg@gmail.com, mcasas@chromium.org,
 Sean Paul <seanpaul@chromium.org>, frkoenig@chromium.org,
 linux-arm-kernel@lists.infradead.org, markyacoub@google.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogU2VhbiBQYXVsIDxzZWFucGF1bEBjaHJvbWl1bS5vcmc+CgpUaGlzIHBhdGNoIGFkZHMg
dGhlIGFiaWxpdHkgZm9yIGNvbXBvbmVudHMgdG8gZXhwb3NlIHN1cHBvcnRlZCByb3RhdGlvbnMK
d2hpY2ggd2lsbCBiZSBleHBvc2VkIHRvIHVzZXJzcGFjZSB2aWEgYSBwbGFuZSByb3RhdGlvbiBw
cm9wZXJ0eS4KCk5vIGZ1bmN0aW9uYWwgY2hhbmdlcyBpbiB0aGlzIHBhdGNoLgoKU2lnbmVkLW9m
Zi1ieTogU2VhbiBQYXVsIDxzZWFucGF1bEBjaHJvbWl1bS5vcmc+Ci0tLQogZHJpdmVycy9ncHUv
ZHJtL21lZGlhdGVrL210a19kcm1fY3J0Yy5jICAgICB8ICA0ICsrKy0KIGRyaXZlcnMvZ3B1L2Ry
bS9tZWRpYXRlay9tdGtfZHJtX2RkcF9jb21wLmggfCAxMCArKysrKysrKysrCiBkcml2ZXJzL2dw
dS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9wbGFuZS5jICAgIHwgMTIgKysrKysrKysrKystCiBkcml2
ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9wbGFuZS5oICAgIHwgIDQgKysrLQogNCBmaWxl
cyBjaGFuZ2VkLCAyNyBpbnNlcnRpb25zKCspLCAzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2NydGMuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9tZWRpYXRlay9tdGtfZHJtX2NydGMuYwppbmRleCAwNGU3ZTRiZGJkYjUuLmY4MGE4YmE3NTk3
NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fY3J0Yy5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2NydGMuYwpAQCAtNjAwLDEzICs2
MDAsMTUgQEAgc3RhdGljIGludCBtdGtfZHJtX2NydGNfaW5pdF9jb21wX3BsYW5lcyhzdHJ1Y3Qg
ZHJtX2RldmljZSAqZHJtX2RldiwKIAkJCQkJIGludCBjb21wX2lkeCwgaW50IHBpcGUpCiB7CiAJ
aW50IG51bV9wbGFuZXMgPSBtdGtfZHJtX2NydGNfbnVtX2NvbXBfcGxhbmVzKG10a19jcnRjLCBj
b21wX2lkeCk7CisJc3RydWN0IG10a19kZHBfY29tcCAqY29tcCA9IG10a19jcnRjLT5kZHBfY29t
cFtjb21wX2lkeF07CiAJaW50IGksIHJldDsKIAogCWZvciAoaSA9IDA7IGkgPCBudW1fcGxhbmVz
OyBpKyspIHsKIAkJcmV0ID0gbXRrX3BsYW5lX2luaXQoZHJtX2RldiwKIAkJCQkmbXRrX2NydGMt
PnBsYW5lc1ttdGtfY3J0Yy0+bGF5ZXJfbnJdLAogCQkJCUJJVChwaXBlKSwKLQkJCQltdGtfZHJt
X2NydGNfcGxhbmVfdHlwZShtdGtfY3J0Yy0+bGF5ZXJfbnIpKTsKKwkJCQltdGtfZHJtX2NydGNf
cGxhbmVfdHlwZShtdGtfY3J0Yy0+bGF5ZXJfbnIpLAorCQkJCW10a19kZHBfY29tcF9zdXBwb3J0
ZWRfcm90YXRpb25zKGNvbXApKTsKIAkJaWYgKHJldCkKIAkJCXJldHVybiByZXQ7CiAKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2RkcF9jb21wLmggYi9kcml2
ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kZHBfY29tcC5oCmluZGV4IDNkZTM3MWUyOGJk
Zi4uMmYxZTllNzViOGRhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRr
X2RybV9kZHBfY29tcC5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2Rk
cF9jb21wLmgKQEAgLTc3LDYgKzc3LDcgQEAgc3RydWN0IG10a19kZHBfY29tcF9mdW5jcyB7CiAJ
dm9pZCAoKnN0b3ApKHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNvbXApOwogCXZvaWQgKCplbmFibGVf
dmJsYW5rKShzdHJ1Y3QgbXRrX2RkcF9jb21wICpjb21wLCBzdHJ1Y3QgZHJtX2NydGMgKmNydGMp
OwogCXZvaWQgKCpkaXNhYmxlX3ZibGFuaykoc3RydWN0IG10a19kZHBfY29tcCAqY29tcCk7CisJ
dW5zaWduZWQgaW50ICgqc3VwcG9ydGVkX3JvdGF0aW9ucykoc3RydWN0IG10a19kZHBfY29tcCAq
Y29tcCk7CiAJdW5zaWduZWQgaW50ICgqbGF5ZXJfbnIpKHN0cnVjdCBtdGtfZGRwX2NvbXAgKmNv
bXApOwogCXZvaWQgKCpsYXllcl9vbikoc3RydWN0IG10a19kZHBfY29tcCAqY29tcCwgdW5zaWdu
ZWQgaW50IGlkeCk7CiAJdm9pZCAoKmxheWVyX29mZikoc3RydWN0IG10a19kZHBfY29tcCAqY29t
cCwgdW5zaWduZWQgaW50IGlkeCk7CkBAIC0xMzMsNiArMTM0LDE1IEBAIHN0YXRpYyBpbmxpbmUg
dm9pZCBtdGtfZGRwX2NvbXBfZGlzYWJsZV92Ymxhbmsoc3RydWN0IG10a19kZHBfY29tcCAqY29t
cCkKIAkJY29tcC0+ZnVuY3MtPmRpc2FibGVfdmJsYW5rKGNvbXApOwogfQogCitzdGF0aWMgaW5s
aW5lCit1bnNpZ25lZCBpbnQgbXRrX2RkcF9jb21wX3N1cHBvcnRlZF9yb3RhdGlvbnMoc3RydWN0
IG10a19kZHBfY29tcCAqY29tcCkKK3sKKwlpZiAoY29tcC0+ZnVuY3MgJiYgY29tcC0+ZnVuY3Mt
PnN1cHBvcnRlZF9yb3RhdGlvbnMpCisJCXJldHVybiBjb21wLT5mdW5jcy0+c3VwcG9ydGVkX3Jv
dGF0aW9ucyhjb21wKTsKKworCXJldHVybiAwOworfQorCiBzdGF0aWMgaW5saW5lIHVuc2lnbmVk
IGludCBtdGtfZGRwX2NvbXBfbGF5ZXJfbnIoc3RydWN0IG10a19kZHBfY29tcCAqY29tcCkKIHsK
IAlpZiAoY29tcC0+ZnVuY3MgJiYgY29tcC0+ZnVuY3MtPmxheWVyX25yKQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fcGxhbmUuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9tZWRpYXRlay9tdGtfZHJtX3BsYW5lLmMKaW5kZXggNThiMDJmZmZlMzIxLi5jZDdjOTdlYjdl
ZTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX3BsYW5lLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fcGxhbmUuYwpAQCAtMTM4LDYg
KzEzOCw3IEBAIHN0YXRpYyB2b2lkIG10a19wbGFuZV9hdG9taWNfdXBkYXRlKHN0cnVjdCBkcm1f
cGxhbmUgKnBsYW5lLAogCXN0YXRlLT5wZW5kaW5nLnkgPSBwbGFuZS0+c3RhdGUtPmRzdC55MTsK
IAlzdGF0ZS0+cGVuZGluZy53aWR0aCA9IGRybV9yZWN0X3dpZHRoKCZwbGFuZS0+c3RhdGUtPmRz
dCk7CiAJc3RhdGUtPnBlbmRpbmcuaGVpZ2h0ID0gZHJtX3JlY3RfaGVpZ2h0KCZwbGFuZS0+c3Rh
dGUtPmRzdCk7CisJc3RhdGUtPnBlbmRpbmcucm90YXRpb24gPSBwbGFuZS0+c3RhdGUtPnJvdGF0
aW9uOwogCXdtYigpOyAvKiBNYWtlIHN1cmUgdGhlIGFib3ZlIHBhcmFtZXRlcnMgYXJlIHNldCBi
ZWZvcmUgdXBkYXRlICovCiAJc3RhdGUtPnBlbmRpbmcuZGlydHkgPSB0cnVlOwogfQpAQCAtMTYw
LDcgKzE2MSw4IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3BsYW5lX2hlbHBlcl9mdW5jcyBt
dGtfcGxhbmVfaGVscGVyX2Z1bmNzID0gewogfTsKIAogaW50IG10a19wbGFuZV9pbml0KHN0cnVj
dCBkcm1fZGV2aWNlICpkZXYsIHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAotCQkgICB1bnNpZ25l
ZCBsb25nIHBvc3NpYmxlX2NydGNzLCBlbnVtIGRybV9wbGFuZV90eXBlIHR5cGUpCisJCSAgIHVu
c2lnbmVkIGxvbmcgcG9zc2libGVfY3J0Y3MsIGVudW0gZHJtX3BsYW5lX3R5cGUgdHlwZSwKKwkJ
ICAgdW5zaWduZWQgaW50IHN1cHBvcnRlZF9yb3RhdGlvbnMpCiB7CiAJaW50IGVycjsKIApAQCAt
MTcyLDYgKzE3NCwxNCBAQCBpbnQgbXRrX3BsYW5lX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRl
diwgc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCiAJCXJldHVybiBlcnI7CiAJfQogCisJaWYgKHN1
cHBvcnRlZF9yb3RhdGlvbnMgJiB+RFJNX01PREVfUk9UQVRFXzApIHsKKwkJZXJyID0gZHJtX3Bs
YW5lX2NyZWF0ZV9yb3RhdGlvbl9wcm9wZXJ0eShwbGFuZSwKKwkJCQkJCQkgRFJNX01PREVfUk9U
QVRFXzAsCisJCQkJCQkJIHN1cHBvcnRlZF9yb3RhdGlvbnMpOworCQlpZiAoZXJyKQorCQkJRFJN
X0lORk8oIkNyZWF0ZSByb3RhdGlvbiBwcm9wZXJ0eSBmYWlsZWRcbiIpOworCX0KKwogCWRybV9w
bGFuZV9oZWxwZXJfYWRkKHBsYW5lLCAmbXRrX3BsYW5lX2hlbHBlcl9mdW5jcyk7CiAKIAlyZXR1
cm4gMDsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX3BsYW5l
LmggYi9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9wbGFuZS5oCmluZGV4IDZmODQy
ZGY3MjJjNy4uNzYwODg1ZTM1YjI3IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0
ZWsvbXRrX2RybV9wbGFuZS5oCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJt
X3BsYW5lLmgKQEAgLTIwLDYgKzIwLDcgQEAgc3RydWN0IG10a19wbGFuZV9wZW5kaW5nX3N0YXRl
IHsKIAl1bnNpZ25lZCBpbnQJCQl5OwogCXVuc2lnbmVkIGludAkJCXdpZHRoOwogCXVuc2lnbmVk
IGludAkJCWhlaWdodDsKKwl1bnNpZ25lZCBpbnQJCQlyb3RhdGlvbjsKIAlib29sCQkJCWRpcnR5
OwogfTsKIApAQCAtMzUsNiArMzYsNyBAQCB0b19tdGtfcGxhbmVfc3RhdGUoc3RydWN0IGRybV9w
bGFuZV9zdGF0ZSAqc3RhdGUpCiB9CiAKIGludCBtdGtfcGxhbmVfaW5pdChzdHJ1Y3QgZHJtX2Rl
dmljZSAqZGV2LCBzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwKLQkJICAgdW5zaWduZWQgbG9uZyBw
b3NzaWJsZV9jcnRjcywgZW51bSBkcm1fcGxhbmVfdHlwZSB0eXBlKTsKKwkJICAgdW5zaWduZWQg
bG9uZyBwb3NzaWJsZV9jcnRjcywgZW51bSBkcm1fcGxhbmVfdHlwZSB0eXBlLAorCQkgICB1bnNp
Z25lZCBpbnQgc3VwcG9ydGVkX3JvdGF0aW9ucyk7CiAKICNlbmRpZgotLSAKU2VhbiBQYXVsLCBT
b2Z0d2FyZSBFbmdpbmVlciwgR29vZ2xlIC8gQ2hyb21pdW0gT1MKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJp
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbA==
