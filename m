Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5E6208DD5F
	for <lists+dri-devel@lfdr.de>; Wed, 14 Aug 2019 20:47:55 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F12AA6E7EF;
	Wed, 14 Aug 2019 18:47:41 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x642.google.com (mail-pl1-x642.google.com
 [IPv6:2607:f8b0:4864:20::642])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E9DA16E7EA
 for <dri-devel@lists.freedesktop.org>; Wed, 14 Aug 2019 18:47:38 +0000 (UTC)
Received: by mail-pl1-x642.google.com with SMTP id z3so4259254pln.6
 for <dri-devel@lists.freedesktop.org>; Wed, 14 Aug 2019 11:47:38 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=Gw3U46bCPqQ3ETjFXBi+tKlBVOcmrTwPQEr2UHcNkBY=;
 b=roeQlJce2z0KQO0mZfAzWrdKsNUom7ojpV9V1i5IPvfbMzNK7wFKZNiws7iUDH9l/E
 aL32zRhR2sxnXl6rTIaExMdXF/jAZpUP2eJ0BInVFdb85TmYW0DxM3I09PaXSk8FplTz
 sUeD+Sq5jeXZXgmSGllfZ5gS/fTClJv9s0JjITjsWODcSukhP+vor7lcJMKmOVZp9il9
 bYuz6aqIJv3R6OV4O0dNclKcX0ZykOW198zZy0X5gxddkiCkxJMZpJMCQFJbsJ1WxwjM
 bhiVa3Y7qBOjLU+JP5Q2ySQ9NY8yeEv51qoy9NITYEWZuT7UxLv2VIBTVT7e/Ri9BFa4
 BkLw==
X-Gm-Message-State: APjAAAVj5vb/Z/ayJK1GHCWOGuqqM1lShOevNti1BIt3lQVa71pNJadK
 k3MgWdenT6wVvxuvnrJ58dZGNw==
X-Google-Smtp-Source: APXvYqxf8PRCM/QdhrsCcFY9B3bUT+kDckdce2dIlrs5TtWi1x5QHwHYOwWNMfZiWnKyqYVld6Vd2Q==
X-Received: by 2002:a17:902:7686:: with SMTP id
 m6mr744989pll.239.1565808456343; 
 Wed, 14 Aug 2019 11:47:36 -0700 (PDT)
Received: from localhost.localdomain ([2601:1c2:680:1319:692:26ff:feda:3a81])
 by smtp.gmail.com with ESMTPSA id
 y16sm610855pfc.36.2019.08.14.11.47.34
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 14 Aug 2019 11:47:35 -0700 (PDT)
From: John Stultz <john.stultz@linaro.org>
To: lkml <linux-kernel@vger.kernel.org>
Subject: [RESEND][PATCH v3 19/26] drm: kirin: Move drm driver to driver data
Date: Wed, 14 Aug 2019 18:46:55 +0000
Message-Id: <20190814184702.54275-20-john.stultz@linaro.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190814184702.54275-1-john.stultz@linaro.org>
References: <20190814184702.54275-1-john.stultz@linaro.org>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=Gw3U46bCPqQ3ETjFXBi+tKlBVOcmrTwPQEr2UHcNkBY=;
 b=pmouxbbveIAlwOzdvdJ0p2QuUl0N5XG++0VuOjCBBmWnVYFCP4/wQRHPGVv1pRGvYw
 4wg1Xf4d9fVYnzoyLtAeULaYrcSYtaYG0I1Z3y0FhIX2KJk1ocSo8T8h5Z71WP6z/hH5
 s4wFGm6zOHbqtkCTaoqfwS5uH1UECFUwKa8GMRieSlsL2z1NJirkTdgU/XR8LN8hjXkm
 rmCn+GHiNihGmUzm7VuuAORrLmjxRpgweMfjbCxY+7UHg0oXbkJPUByS0z9mHj8eEDZz
 zm3mQOQIY8TXhMNSWzud0C5PhOYdPkLBKq00eOqjrkRiO52X3Z/F8dlVIiLiAJlgApE/
 TCag==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Xu YiPing <xuyiping@hisilicon.com>, David Airlie <airlied@linux.ie>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 Xinliang Liu <z.liuxinliang@hisilicon.com>,
 Rongrong Zou <zourongrong@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogWHUgWWlQaW5nIDx4dXlpcGluZ0BoaXNpbGljb24uY29tPgoKQXMgcGFydCBvZiByZWZh
Y3RvcmluZyB0aGUga2lyaW4gZHJpdmVyIHRvIGJldHRlciBzdXBwb3J0CmRpZmZlcmVudCBoYXJk
d2FyZSByZXZpc2lvbnMsIHRoaXMgcGF0Y2ggbW92ZXMgdGhlIGRybV9kcml2ZXIKc3RydWN0dXJl
IHRvIGJlIHVuZGVyIGRldmljZSBzcGVjaWZpYyBkcml2ZXIgZGF0YS4KClRoaXMgd2lsbCBhbGxv
dyB1cyB0byBtb3JlIGVhc2lseSBhZGQgc3VwcG9ydCBmb3Iga2lyaW45NjAKaGFyZHdhcmUgd2l0
aCBsYXRlciBwYXRjaGVzLgoKQ2M6IFJvbmdyb25nIFpvdSA8em91cm9uZ3JvbmdAZ21haWwuY29t
PgpDYzogWGlubGlhbmcgTGl1IDx6LmxpdXhpbmxpYW5nQGhpc2lsaWNvbi5jb20+CkNjOiBEYXZp
ZCBBaXJsaWUgPGFpcmxpZWRAbGludXguaWU+CkNjOiBEYW5pZWwgVmV0dGVyIDxkYW5pZWxAZmZ3
bGwuY2g+CkNjOiBkcmktZGV2ZWwgPGRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmc+CkNj
OiBTYW0gUmF2bmJvcmcgPHNhbUByYXZuYm9yZy5vcmc+ClJldmlld2VkLWJ5OiBTYW0gUmF2bmJv
cmcgPHNhbUByYXZuYm9yZy5vcmc+ClNpZ25lZC1vZmYtYnk6IFh1IFlpUGluZyA8eHV5aXBpbmdA
aGlzaWxpY29uLmNvbT4KW2pzdHVsdHo6IFJld29yZGVkIGNvbW1pdCBtZXNzYWdlXQpTaWduZWQt
b2ZmLWJ5OiBKb2huIFN0dWx0eiA8am9obi5zdHVsdHpAbGluYXJvLm9yZz4KLS0tCiAuLi4vZ3B1
L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2FkZS5jICAgfCAyNyArKysrKysrKysrKysr
CiAuLi4vZ3B1L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2Rydi5jICAgfCAzOCArLS0t
LS0tLS0tLS0tLS0tLS0tCiAuLi4vZ3B1L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2Ry
di5oICAgfCAgMSArCiAzIGZpbGVzIGNoYW5nZWQsIDI5IGluc2VydGlvbnMoKyksIDM3IGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4va2ly
aW5fZHJtX2FkZS5jIGIvZHJpdmVycy9ncHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1f
YWRlLmMKaW5kZXggNjhlZmQ1MDhkODZiLi4wYmMyZTUzODkxM2IgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2FkZS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2FkZS5jCkBAIC0xMDQ5LDYgKzEwNDks
MzIgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fbW9kZV9jb25maWdfZnVuY3MgYWRlX21vZGVf
Y29uZmlnX2Z1bmNzID0gewogCiB9OwogCitERUZJTkVfRFJNX0dFTV9DTUFfRk9QUyhhZGVfZm9w
cyk7CisKK3N0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBhZGVfZHJpdmVyID0geworCS5kcml2ZXJf
ZmVhdHVyZXMgPSBEUklWRVJfR0VNIHwgRFJJVkVSX01PREVTRVQgfCBEUklWRVJfUFJJTUUgfAor
CQkJCSAgRFJJVkVSX0FUT01JQywKKwkuZm9wcyA9ICZhZGVfZm9wcywKKwkuZ2VtX2ZyZWVfb2Jq
ZWN0X3VubG9ja2VkID0gZHJtX2dlbV9jbWFfZnJlZV9vYmplY3QsCisJLmdlbV92bV9vcHMgPSAm
ZHJtX2dlbV9jbWFfdm1fb3BzLAorCS5kdW1iX2NyZWF0ZSA9IGRybV9nZW1fY21hX2R1bWJfY3Jl
YXRlX2ludGVybmFsLAorCS5wcmltZV9oYW5kbGVfdG9fZmQJPSBkcm1fZ2VtX3ByaW1lX2hhbmRs
ZV90b19mZCwKKwkucHJpbWVfZmRfdG9faGFuZGxlCT0gZHJtX2dlbV9wcmltZV9mZF90b19oYW5k
bGUsCisJLmdlbV9wcmltZV9leHBvcnQgPSBkcm1fZ2VtX3ByaW1lX2V4cG9ydCwKKwkuZ2VtX3By
aW1lX2ltcG9ydCA9IGRybV9nZW1fcHJpbWVfaW1wb3J0LAorCS5nZW1fcHJpbWVfZ2V0X3NnX3Rh
YmxlID0gZHJtX2dlbV9jbWFfcHJpbWVfZ2V0X3NnX3RhYmxlLAorCS5nZW1fcHJpbWVfaW1wb3J0
X3NnX3RhYmxlID0gZHJtX2dlbV9jbWFfcHJpbWVfaW1wb3J0X3NnX3RhYmxlLAorCS5nZW1fcHJp
bWVfdm1hcCA9IGRybV9nZW1fY21hX3ByaW1lX3ZtYXAsCisJLmdlbV9wcmltZV92dW5tYXAgPSBk
cm1fZ2VtX2NtYV9wcmltZV92dW5tYXAsCisJLmdlbV9wcmltZV9tbWFwID0gZHJtX2dlbV9jbWFf
cHJpbWVfbW1hcCwKKworCS5uYW1lID0gImtpcmluIiwKKwkuZGVzYyA9ICJIaXNpbGljb24gS2ly
aW42MjAgU29DIERSTSBEcml2ZXIiLAorCS5kYXRlID0gIjIwMTUwNzE4IiwKKwkubWFqb3IgPSAx
LAorCS5taW5vciA9IDAsCit9OworCiBzdHJ1Y3Qga2lyaW5fZHJtX2RhdGEgYWRlX2RyaXZlcl9k
YXRhID0gewogCS5udW1fcGxhbmVzID0gQURFX0NIX05VTSwKIAkucHJpbV9wbGFuZSA9IEFERV9D
SDEsCkBAIC0xMDU2LDYgKzEwODIsNyBAQCBzdHJ1Y3Qga2lyaW5fZHJtX2RhdGEgYWRlX2RyaXZl
cl9kYXRhID0gewogCS5jaGFubmVsX2Zvcm1hdHNfY250ID0gQVJSQVlfU0laRShjaGFubmVsX2Zv
cm1hdHMpLAogCS5jb25maWdfbWF4X3dpZHRoID0gMjA0OCwKIAkuY29uZmlnX21heF9oZWlnaHQg
PSAyMDQ4LAorCS5kcml2ZXIgPSAmYWRlX2RyaXZlciwKIAkuY3J0Y19oZWxwZXJfZnVuY3MgPSAm
YWRlX2NydGNfaGVscGVyX2Z1bmNzLAogCS5jcnRjX2Z1bmNzID0gJmFkZV9jcnRjX2Z1bmNzLAog
CS5wbGFuZV9oZWxwZXJfZnVuY3MgPSAmYWRlX3BsYW5lX2hlbHBlcl9mdW5jcywKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24va2lyaW4va2lyaW5fZHJtX2Rydi5jIGIvZHJp
dmVycy9ncHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fZHJ2LmMKaW5kZXggNzk1NmQ2
OThkMzY4Li4yOTY2NjFiYTMwMGYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGlj
b24va2lyaW4va2lyaW5fZHJtX2Rydi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9oaXNpbGljb24v
a2lyaW4va2lyaW5fZHJtX2Rydi5jCkBAIC05Miw0MSArOTIsNiBAQCBzdGF0aWMgaW50IGtpcmlu
X2RybV9rbXNfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2KQogCXJldHVybiByZXQ7CiB9CiAK
LURFRklORV9EUk1fR0VNX0NNQV9GT1BTKGtpcmluX2RybV9mb3BzKTsKLQotc3RhdGljIGludCBr
aXJpbl9nZW1fY21hX2R1bWJfY3JlYXRlKHN0cnVjdCBkcm1fZmlsZSAqZmlsZSwKLQkJCQkgICAg
IHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCi0JCQkJICAgICBzdHJ1Y3QgZHJtX21vZGVfY3JlYXRl
X2R1bWIgKmFyZ3MpCi17Ci0JcmV0dXJuIGRybV9nZW1fY21hX2R1bWJfY3JlYXRlX2ludGVybmFs
KGZpbGUsIGRldiwgYXJncyk7Ci19Ci0KLXN0YXRpYyBzdHJ1Y3QgZHJtX2RyaXZlciBraXJpbl9k
cm1fZHJpdmVyID0gewotCS5kcml2ZXJfZmVhdHVyZXMJPSBEUklWRVJfR0VNIHwgRFJJVkVSX01P
REVTRVQgfCBEUklWRVJfUFJJTUUgfAotCQkJCSAgRFJJVkVSX0FUT01JQywKLQkuZm9wcwkJCT0g
JmtpcmluX2RybV9mb3BzLAotCi0JLmdlbV9mcmVlX29iamVjdF91bmxvY2tlZCA9IGRybV9nZW1f
Y21hX2ZyZWVfb2JqZWN0LAotCS5nZW1fdm1fb3BzCQk9ICZkcm1fZ2VtX2NtYV92bV9vcHMsCi0J
LmR1bWJfY3JlYXRlCQk9IGtpcmluX2dlbV9jbWFfZHVtYl9jcmVhdGUsCi0KLQkucHJpbWVfaGFu
ZGxlX3RvX2ZkCT0gZHJtX2dlbV9wcmltZV9oYW5kbGVfdG9fZmQsCi0JLnByaW1lX2ZkX3RvX2hh
bmRsZQk9IGRybV9nZW1fcHJpbWVfZmRfdG9faGFuZGxlLAotCS5nZW1fcHJpbWVfZXhwb3J0CT0g
ZHJtX2dlbV9wcmltZV9leHBvcnQsCi0JLmdlbV9wcmltZV9pbXBvcnQJPSBkcm1fZ2VtX3ByaW1l
X2ltcG9ydCwKLQkuZ2VtX3ByaW1lX2dldF9zZ190YWJsZSA9IGRybV9nZW1fY21hX3ByaW1lX2dl
dF9zZ190YWJsZSwKLQkuZ2VtX3ByaW1lX2ltcG9ydF9zZ190YWJsZSA9IGRybV9nZW1fY21hX3By
aW1lX2ltcG9ydF9zZ190YWJsZSwKLQkuZ2VtX3ByaW1lX3ZtYXAJCT0gZHJtX2dlbV9jbWFfcHJp
bWVfdm1hcCwKLQkuZ2VtX3ByaW1lX3Z1bm1hcAk9IGRybV9nZW1fY21hX3ByaW1lX3Z1bm1hcCwK
LQkuZ2VtX3ByaW1lX21tYXAJCT0gZHJtX2dlbV9jbWFfcHJpbWVfbW1hcCwKLQotCS5uYW1lCQkJ
PSAia2lyaW4iLAotCS5kZXNjCQkJPSAiSGlzaWxpY29uIEtpcmluIFNvQ3MnIERSTSBEcml2ZXIi
LAotCS5kYXRlCQkJPSAiMjAxNTA3MTgiLAotCS5tYWpvcgkJCT0gMSwKLQkubWlub3IJCQk9IDAs
Ci19OwotCiBzdGF0aWMgaW50IGNvbXBhcmVfb2Yoc3RydWN0IGRldmljZSAqZGV2LCB2b2lkICpk
YXRhKQogewogCXJldHVybiBkZXYtPm9mX25vZGUgPT0gZGF0YTsKQEAgLTEzNCwxMSArOTksMTAg
QEAgc3RhdGljIGludCBjb21wYXJlX29mKHN0cnVjdCBkZXZpY2UgKmRldiwgdm9pZCAqZGF0YSkK
IAogc3RhdGljIGludCBraXJpbl9kcm1fYmluZChzdHJ1Y3QgZGV2aWNlICpkZXYpCiB7Ci0Jc3Ry
dWN0IGRybV9kcml2ZXIgKmRyaXZlciA9ICZraXJpbl9kcm1fZHJpdmVyOwogCXN0cnVjdCBkcm1f
ZGV2aWNlICpkcm1fZGV2OwogCWludCByZXQ7CiAKLQlkcm1fZGV2ID0gZHJtX2Rldl9hbGxvYyhk
cml2ZXIsIGRldik7CisJZHJtX2RldiA9IGRybV9kZXZfYWxsb2MoZHJpdmVyX2RhdGEtPmRyaXZl
ciwgZGV2KTsKIAlpZiAoSVNfRVJSKGRybV9kZXYpKQogCQlyZXR1cm4gUFRSX0VSUihkcm1fZGV2
KTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9k
cm1fZHJ2LmggYi9kcml2ZXJzL2dwdS9kcm0vaGlzaWxpY29uL2tpcmluL2tpcmluX2RybV9kcnYu
aAppbmRleCA0M2JlNjVmODJhMDMuLmZkYmZjNGE5MGYyMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fZHJ2LmgKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2hpc2lsaWNvbi9raXJpbi9raXJpbl9kcm1fZHJ2LmgKQEAgLTQyLDYgKzQyLDcgQEAgc3Ry
dWN0IGtpcmluX2RybV9kYXRhIHsKIAl1MzIgbnVtX3BsYW5lczsKIAl1MzIgcHJpbV9wbGFuZTsK
IAorCXN0cnVjdCBkcm1fZHJpdmVyICpkcml2ZXI7CiAJY29uc3Qgc3RydWN0IGRybV9jcnRjX2hl
bHBlcl9mdW5jcyAqY3J0Y19oZWxwZXJfZnVuY3M7CiAJY29uc3Qgc3RydWN0IGRybV9jcnRjX2Z1
bmNzICpjcnRjX2Z1bmNzOwogCWNvbnN0IHN0cnVjdCBkcm1fcGxhbmVfaGVscGVyX2Z1bmNzICpw
bGFuZV9oZWxwZXJfZnVuY3M7Ci0tIAoyLjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2RyaS1kZXZlbA==
