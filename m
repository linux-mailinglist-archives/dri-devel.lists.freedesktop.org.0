Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 81A4B20705
	for <lists+dri-devel@lfdr.de>; Thu, 16 May 2019 14:33:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id F3DED8935A;
	Thu, 16 May 2019 12:33:50 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from EUR02-VE1-obe.outbound.protection.outlook.com
 (mail-ve1eur02on060e.outbound.protection.outlook.com
 [IPv6:2a01:111:f400:fe06::60e])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 457B98935A
 for <dri-devel@lists.freedesktop.org>; Thu, 16 May 2019 12:33:49 +0000 (UTC)
Received: from AM0PR08MB3891.eurprd08.prod.outlook.com (20.178.82.147) by
 AM0PR08MB4068.eurprd08.prod.outlook.com (20.178.119.23) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1900.16; Thu, 16 May 2019 12:33:45 +0000
Received: from AM0PR08MB3891.eurprd08.prod.outlook.com
 ([fe80::edcb:1ae:f84c:422a]) by AM0PR08MB3891.eurprd08.prod.outlook.com
 ([fe80::edcb:1ae:f84c:422a%2]) with mapi id 15.20.1900.010; Thu, 16 May 2019
 12:33:45 +0000
From: Ayan Halder <Ayan.Halder@arm.com>
To: "james qian wang (Arm Technology China)" <james.qian.wang@arm.com>
Subject: Re: [PATCH v3] drm/komeda: Add writeback support
Thread-Topic: [PATCH v3] drm/komeda: Add writeback support
Thread-Index: AQHVC789IjGa0UPk40CMGlet+6K8QKZtr7QA
Date: Thu, 16 May 2019 12:33:45 +0000
Message-ID: <20190516123344.GA1372@arm.com>
References: <20190516081300.25530-1-james.qian.wang@arm.com>
In-Reply-To: <20190516081300.25530-1-james.qian.wang@arm.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: LNXP265CA0065.GBRP265.PROD.OUTLOOK.COM
 (2603:10a6:600:5d::29) To AM0PR08MB3891.eurprd08.prod.outlook.com
 (2603:10a6:208:109::19)
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [217.140.106.52]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 9450304a-73f8-4898-be80-08d6d9fabce2
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600141)(711020)(4605104)(4618075)(2017052603328)(7193020);
 SRVR:AM0PR08MB4068; 
x-ms-traffictypediagnostic: AM0PR08MB4068:
x-ms-exchange-purlcount: 1
nodisclaimer: True
x-microsoft-antispam-prvs: <AM0PR08MB40687C3A2E8202F075CDF15AE40A0@AM0PR08MB4068.eurprd08.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:10000;
x-forefront-prvs: 0039C6E5C5
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10009020)(396003)(39860400002)(346002)(376002)(366004)(136003)(199004)(189003)(72206003)(186003)(33656002)(66066001)(478600001)(446003)(476003)(2616005)(5660300002)(486006)(68736007)(14454004)(30864003)(1076003)(44832011)(102836004)(36756003)(11346002)(966005)(256004)(6636002)(5024004)(26005)(229853002)(14444005)(6506007)(81166006)(7736002)(52116002)(76176011)(386003)(4326008)(37006003)(54906003)(6512007)(73956011)(6436002)(6486002)(99286004)(66946007)(25786009)(64756008)(316002)(6862004)(66556008)(66446008)(6246003)(66476007)(6306002)(53936002)(6116002)(3846002)(86362001)(53946003)(71190400001)(71200400001)(8676002)(2906002)(305945005)(8936002)(81156014)(579004);
 DIR:OUT; SFP:1101; SCL:1; SRVR:AM0PR08MB4068;
 H:AM0PR08MB3891.eurprd08.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: arm.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: kg7Gd4Gk/bCkZ6uUDuJBUuG1NCr0T8Dkt+jldAIbKoVB/8aYB3B+rXZmvK6zz4X+RgBWF9c3+Fy0HunoSOWeE/UyZfpB7GAgPy1YX9V60Wh9acR3Hh9P8Y0yxcPCEpYfwTvhPwo4QYkXuXIfa5hYxSkoWMhQp8lSyLoZpXsQ3mYyP8xqiY6q2oHXDJ9ib07/TLqqtSjtB3eKc6/7tyVdgdezXxRy6SreaF5K6Lp69lnInhMftoqQ0vLeWNcLXN8M8fWwbKHDoHves1NMr4RiltlhYZSjiJ2sYlO9y6I0szoZQbEgnz1WD8FFtb6hmuwdzQP0WLVjNQOuiJ/b7WOASdgUCLLgODPtKtgGv0ppQu46N8Kn0I9XXjsGLau1+TNVciujlrCqan2PWx8TWgOIQD7M5ubGuuJAnm2Av5nNSTY=
Content-ID: <191DA89F96088D4CA4AF65469134B7AE@eurprd08.prod.outlook.com>
MIME-Version: 1.0
X-OriginatorOrg: arm.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 9450304a-73f8-4898-be80-08d6d9fabce2
X-MS-Exchange-CrossTenant-originalarrivaltime: 16 May 2019 12:33:45.7399 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: f34e5979-57d9-4aaa-ad4d-b122a662184d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-Transport-CrossTenantHeadersStamped: AM0PR08MB4068
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=armh.onmicrosoft.com; 
 s=selector2-armh-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=HzzxyOST3YUr65FSjlTYL2cjKKAPcdxUwIwUTON7uLo=;
 b=aV168Ndi094mtqEARnY7T6p4HPVwXqG5LAaV9EdtgaaFGoSQDaQEtRacz4idd5KcmK81xRQM86AzwCHo1f/d08Z1WZue7WDl2iDleoliBMc0RIbO0nZvePTLUM71/+35rwQoy77gkRBkTjqYhHt4X0CH8l+vy0L0nLQs9Kn9LY4=
X-Mailman-Original-Authentication-Results: spf=none (sender IP is )
 smtp.mailfrom=Ayan.Halder@arm.com; 
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: nd <nd@arm.com>, "Oscar
 Zhang \(Arm Technology China\)" <Oscar.Zhang@arm.com>,
 "Tiannan Zhu \(Arm Technology China\)" <Tiannan.Zhu@arm.com>,
 "airlied@linux.ie" <airlied@linux.ie>, Liviu Dudau <Liviu.Dudau@arm.com>,
 "Jonathan Chai \(Arm Technology China\)" <Jonathan.Chai@arm.com>,
 "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
 "dri-devel@lists.freedesktop.org" <dri-devel@lists.freedesktop.org>,
 "Julien Yin
 \(Arm Technology China\)" <Julien.Yin@arm.com>, "Channing Chen \(Arm
 Technology China\)" <Channing.Chen@arm.com>,
 "Yiqi Kang \(Arm Technology China\)" <Yiqi.Kang@arm.com>,
 "thomas Sun \(Arm Technology China\)" <thomas.Sun@arm.com>,
 "Lowry Li \(Arm Technology China\)" <Lowry.Li@arm.com>,
 "sean@poorly.run" <sean@poorly.run>, Ben Davis <Ben.Davis@arm.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBNYXkgMTYsIDIwMTkgYXQgMDk6MTM6MjdBTSArMDEwMCwgamFtZXMgcWlhbiB3YW5n
IChBcm0gVGVjaG5vbG9neSBDaGluYSkgd3JvdGU6Cj4gS29tZWRhIGRyaXZlciB1c2VzIGEgaW5k
aXZpZHVhbCBjb21wb25lbnQgdG8gZGVzY3JpYmUgdGhlIEhXJ3Mgd3JpdGViYWNrCj4gY2Fwcywg
YnV0IGRyaXZlcnMgZG9lc24ndCBkZWZpbmUgYSBuZXcgc3RydWN0dXJlIGFuZCBzdGlsbCB1c2Vz
IHRoZQo+IGV4aXN0aW5nICJzdHJ1Y3Qga29tZWRhX2xheWVyIiB0byBkZXNjcmliZSB0aGlzIG5l
dyBjb21wb25lbnQuCj4gVGhlIGRldGFpbGVkIGNoYW5nZXMgYXMgZm9sbG93Ogo+IAo+IDEuIElu
aXRpYWxpemUgd2JfbGF5ZXIgYWNjb3JkaW5nIHRvIEhXIGFuZCByZXBvcnQgaXQgdG8gQ09SRS4K
PiAyLiBDT1JFIGV4cG9zZXMgd2JfbGF5ZXIgYXMgYSByZXNvdXJjZSB0byBLTVMgYnkgcHJpdmF0
ZV9vYmouCj4gMy4gUmVwb3J0IHdyaXRlYmFjayBzdXBwb3J0aW5nIGJ5IGFkZCBhIHdiX2Nvbm5l
Y3RvciB0byBLTVMsIGFuZCB0aGVuCj4gICAgd2JfY29ubmVjdG9yIHdpbGwgdGFrZSBhY3QgYXMg
YSBjb21wb25lbnQgcmVzb3VyY2VzIHVzZXIsCj4gICAgc28gdGhlIGZ1bmMga29tZWRhX3diX2Vu
Y29kZXJfYXRvbWljX2NoZWNrIGNsYWltcyBrb21lZGEgcmVzb3VyY2VzCj4gICAgKHNjYWxlciBh
bmQgd2JfbGF5ZXIpIGFjY3JvZGluZyB0byBpdHMgc3RhdGUgY29uZmlndXJhdGlvbiB0byB0aGUK
PiAgICB3Yl9jb25uZWN0b3IuIGFuZCB0aGUgd2Jfc3RhdGUgY29uZmlndXJhdGlvbiB3aWxsIGJl
IHZhbGlkYXRlZCBvbiB0aGUKPiAgICBzcGVjaWZpYyBjb21wb25lbnQgcmVzb3VyY2VzIHRvIHNl
ZSBpZiB0aGUgY2FwcyBvZiBjb21wb25lbnQgY2FuCj4gICAgbWVldCB0aGUgcmVxdWlyZW1lbnQg
b2Ygd2JfY29ubmVjdG9yLiBpZiBub3QgY2hlY2sgZmFpbGVkLgo+IDQuIFVwZGF0ZSBpcnFfaGFu
ZGxlciB0byBub3RpZnkgdGhlIGNvbXBsZXRpb24gb2Ygd3JpdGViYWNrLgo+IAo+IE5PVEU6Cj4g
VGhpcyBjaGFuZ2UgZG9lc24ndCBhZGQgc2NhbGluZyB3cml0ZWJhY2sgc3VwcG9ydCwgdGhhdCBz
dXBwb3J0IHdpbGwKPiBiZSBhZGRlZCBpbiB0aGUgZnV0dXJlIGFmdGVyIHRoZSBzY2FsZXIgc3Vw
cG9ydC4KPiAKPiB2MjogUmViYXNlCj4gdjM6IFJlYmFzZSBhbmQgY29uc3RpZnkgdGhlIGQ3MV93
Yl9sYXllcl9mdW5jcwo+IAo+IERlcGVuZHMgb246Cj4gLSBodHRwczovL3BhdGNod29yay5mcmVl
ZGVza3RvcC5vcmcvc2VyaWVzLzU5OTE1Lwo+IAo+IFNpZ25lZC1vZmYtYnk6IEphbWVzIFFpYW4g
V2FuZyAoQXJtIFRlY2hub2xvZ3kgQ2hpbmEpIDxqYW1lcy5xaWFuLndhbmdAYXJtLmNvbT4KPiAt
LS0KPiAgZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9NYWtlZmlsZSAgIHwgICAx
ICsKPiAgLi4uL2FybS9kaXNwbGF5L2tvbWVkYS9kNzEvZDcxX2NvbXBvbmVudC5jICAgIHwgIDkw
ICsrKysrKysrLQo+ICAuLi4vZ3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX2NydGMu
YyAgfCAgMTUgKysKPiAgLi4uL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfZnJhbWVidWZmZXIu
YyAgIHwgIDE5ICsrCj4gIC4uLi9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfa21z
LmMgICB8ICAgNCArCj4gIC4uLi9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfa21z
LmggICB8ICAyNyArKysKPiAgLi4uL2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX3BpcGVs
aW5lLmggIHwgICA3ICsKPiAgLi4uL2Rpc3BsYXkva29tZWRhL2tvbWVkYV9waXBlbGluZV9zdGF0
ZS5jICAgIHwgIDUxICsrKystCj4gIC4uLi9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX3ByaXZh
dGVfb2JqLmMgICB8ICAgNiArCj4gIC4uLi9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX3diX2Nv
bm5lY3Rvci5jICB8IDE4MSArKysrKysrKysrKysrKysrKysKPiAgMTAgZmlsZXMgY2hhbmdlZCwg
Mzk4IGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pCj4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBk
cml2ZXJzL2dwdS9kcm0vYXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV93Yl9jb25uZWN0b3IuYwo+
IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYXJtL2Rpc3BsYXkva29tZWRhL01ha2Vm
aWxlIGIvZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9NYWtlZmlsZQo+IGluZGV4
IDYyYmQxYmZmNjZhMy4uZDdlMjlmYzY4OGMzIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hcm0vZGlzcGxheS9rb21lZGEvTWFrZWZpbGUKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYXJt
L2Rpc3BsYXkva29tZWRhL01ha2VmaWxlCj4gQEAgLTE0LDYgKzE0LDcgQEAga29tZWRhLXkgOj0g
XAo+ICAJa29tZWRhX2ttcy5vIFwKPiAgCWtvbWVkYV9jcnRjLm8gXAo+ICAJa29tZWRhX3BsYW5l
Lm8gXAo+ICsJa29tZWRhX3diX2Nvbm5lY3Rvci5vIFwKPiAgCWtvbWVkYV9wcml2YXRlX29iai5v
Cj4gIAo+ICBrb21lZGEteSArPSBcCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hcm0v
ZGlzcGxheS9rb21lZGEvZDcxL2Q3MV9jb21wb25lbnQuYyBiL2RyaXZlcnMvZ3B1L2RybS9hcm0v
ZGlzcGxheS9rb21lZGEvZDcxL2Q3MV9jb21wb25lbnQuYwo+IGluZGV4IDZiYWI4MTZlZDhlNy4u
NjdlNjk4ZDBlNmFhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxheS9r
b21lZGEvZDcxL2Q3MV9jb21wb25lbnQuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlz
cGxheS9rb21lZGEvZDcxL2Q3MV9jb21wb25lbnQuYwo+IEBAIC0yODgsMTAgKzI4OCw5OCBAQCBz
dGF0aWMgaW50IGQ3MV9sYXllcl9pbml0KHN0cnVjdCBkNzFfZGV2ICpkNzEsCj4gIAlyZXR1cm4g
MDsKPiAgfQo+ICAKPiArc3RhdGljIHZvaWQgZDcxX3diX2xheWVyX3VwZGF0ZShzdHJ1Y3Qga29t
ZWRhX2NvbXBvbmVudCAqYywKPiArCQkJCXN0cnVjdCBrb21lZGFfY29tcG9uZW50X3N0YXRlICpz
dGF0ZSkKPiArewo+ICsJc3RydWN0IGtvbWVkYV9sYXllcl9zdGF0ZSAqc3QgPSB0b19sYXllcl9z
dChzdGF0ZSk7Cj4gKwlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdCA9IHN0YXRl
LT53Yl9jb25uLT5zdGF0ZTsKPiArCXN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0gY29ubl9z
dC0+d3JpdGViYWNrX2pvYi0+ZmI7Cj4gKwlzdHJ1Y3Qga29tZWRhX2ZiICprZmIgPSB0b19rZmIo
ZmIpOwo+ICsJdTMyIF9faW9tZW0gKnJlZyA9IGMtPnJlZzsKPiArCXUzMiBjdHJsID0gTF9FTiB8
IExXX09GTSwgbWFzayA9IExfRU4gfCBMV19PRk0gfCBMV19UQlVfRU47Cj4gKwlpbnQgaTsKPiAr
Cj4gKwlmb3IgKGkgPSAwOyBpIDwgZmItPmZvcm1hdC0+bnVtX3BsYW5lczsgaSsrKSB7Cj4gKwkJ
bWFsaWRwX3dyaXRlMzIocmVnICsgaSAqIExBWUVSX1BFUl9QTEFORV9SRUdTLCBCTEtfUDBfUFRS
X0xPVywKPiArCQkJICAgICAgIGxvd2VyXzMyX2JpdHMoc3QtPmFkZHJbaV0pKTsKPiArCQltYWxp
ZHBfd3JpdGUzMihyZWcgKyBpICogTEFZRVJfUEVSX1BMQU5FX1JFR1MsIEJMS19QMF9QVFJfSElH
SCwKPiArCQkJICAgICAgIHVwcGVyXzMyX2JpdHMoc3QtPmFkZHJbaV0pKTsKPiArCj4gKwkJbWFs
aWRwX3dyaXRlMzIocmVnICsgaSAqIExBWUVSX1BFUl9QTEFORV9SRUdTLCBCTEtfUDBfU1RSSURF
LAo+ICsJCQkgICAgICAgZmItPnBpdGNoZXNbaV0gJiAweEZGRkYpOwo+ICsJfQo+ICsKPiArCW1h
bGlkcF93cml0ZTMyKHJlZywgTEFZRVJfRk1ULCBrZmItPmZvcm1hdF9jYXBzLT5od19pZCk7Cj4g
KwltYWxpZHBfd3JpdGUzMihyZWcsIEJMS19JTl9TSVpFLCBIVl9TSVpFKHN0LT5oc2l6ZSwgc3Qt
PnZzaXplKSk7Cj4gKwltYWxpZHBfd3JpdGUzMihyZWcsIEJMS19JTlBVVF9JRDAsIHRvX2Q3MV9p
bnB1dF9pZCgmc3RhdGUtPmlucHV0c1swXSkpOwo+ICsJbWFsaWRwX3dyaXRlMzJfbWFzayhyZWcs
IEJMS19DT05UUk9MLCBtYXNrLCBjdHJsKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgZDcxX3di
X2xheWVyX2R1bXAoc3RydWN0IGtvbWVkYV9jb21wb25lbnQgKmMsIHN0cnVjdCBzZXFfZmlsZSAq
c2YpCj4gK3sKPiArCXUzMiB2WzEyXSwgaTsKPiArCj4gKwlkdW1wX2Jsb2NrX2hlYWRlcihzZiwg
Yy0+cmVnKTsKPiArCj4gKwlnZXRfdmFsdWVzX2Zyb21fcmVnKGMtPnJlZywgMHg4MCwgMSwgdik7
Cj4gKwlzZXFfcHJpbnRmKHNmLCAiTFdfSU5QVVRfSUQwOlx0XHQweCVYXG4iLCB2WzBdKTsKPiAr
Cj4gKwlnZXRfdmFsdWVzX2Zyb21fcmVnKGMtPnJlZywgMHhEMCwgMywgdik7Cj4gKwlzZXFfcHJp
bnRmKHNmLCAiTFdfQ09OVFJPTDpcdFx0MHglWFxuIiwgdlswXSk7Cj4gKwlzZXFfcHJpbnRmKHNm
LCAiTFdfUFJPR19MSU5FOlx0XHQweCVYXG4iLCB2WzFdKTsKPiArCXNlcV9wcmludGYoc2YsICJM
V19GT1JNQVQ6XHRcdDB4JVhcbiIsIHZbMl0pOwo+ICsKPiArCWdldF92YWx1ZXNfZnJvbV9yZWco
Yy0+cmVnLCAweEUwLCAxLCB2KTsKPiArCXNlcV9wcmludGYoc2YsICJMV19JTl9TSVpFOlx0XHQw
eCVYXG4iLCB2WzBdKTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgMjsgaSsrKSB7Cj4gKwkJZ2V0
X3ZhbHVlc19mcm9tX3JlZyhjLT5yZWcsIDB4MTAwICsgaSAqIDB4MTAsIDMsIHYpOwo+ICsJCXNl
cV9wcmludGYoc2YsICJMV19QJXVfUFRSX0xPVzpcdFx0MHglWFxuIiwgaSwgdlswXSk7Cj4gKwkJ
c2VxX3ByaW50ZihzZiwgIkxXX1AldV9QVFJfSElHSDpcdFx0MHglWFxuIiwgaSwgdlsxXSk7Cj4g
KwkJc2VxX3ByaW50ZihzZiwgIkxXX1AldV9TVFJJREU6XHRcdDB4JVhcbiIsIGksIHZbMl0pOwo+
ICsJfQo+ICsKPiArCWdldF92YWx1ZXNfZnJvbV9yZWcoYy0+cmVnLCAweDEzMCwgMTIsIHYpOwo+
ICsJZm9yIChpID0gMDsgaSA8IDEyOyBpKyspCj4gKwkJc2VxX3ByaW50ZihzZiwgIkxXX1JHQl9Z
VVZfQ09FRkYldTpcdDB4JVhcbiIsIGksIHZbaV0pOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBk
NzFfd2JfbGF5ZXJfZGlzYWJsZShzdHJ1Y3Qga29tZWRhX2NvbXBvbmVudCAqYykKPiArewo+ICsJ
bWFsaWRwX3dyaXRlMzIoYy0+cmVnLCBCTEtfSU5QVVRfSUQwLCAwKTsKPiArCW1hbGlkcF93cml0
ZTMyX21hc2soYy0+cmVnLCBCTEtfQ09OVFJPTCwgTF9FTiwgMCk7Cj4gK30KPiArCj4gK3N0YXRp
YyBjb25zdCBzdHJ1Y3Qga29tZWRhX2NvbXBvbmVudF9mdW5jcyBkNzFfd2JfbGF5ZXJfZnVuY3Mg
PSB7Cj4gKwkudXBkYXRlCQk9IGQ3MV93Yl9sYXllcl91cGRhdGUsCj4gKwkuZGlzYWJsZQk9IGQ3
MV93Yl9sYXllcl9kaXNhYmxlLAo+ICsJLmR1bXBfcmVnaXN0ZXIJPSBkNzFfd2JfbGF5ZXJfZHVt
cCwKPiArfTsKPiArCj4gIHN0YXRpYyBpbnQgZDcxX3diX2xheWVyX2luaXQoc3RydWN0IGQ3MV9k
ZXYgKmQ3MSwKPiAgCQkJICAgICBzdHJ1Y3QgYmxvY2tfaGVhZGVyICpibGssIHUzMiBfX2lvbWVt
ICpyZWcpCj4gIHsKPiAtCURSTV9ERUJVRygiRGV0ZWN0IEQ3MV9XYl9MYXllci5cbiIpOwo+ICsJ
c3RydWN0IGtvbWVkYV9jb21wb25lbnQgKmM7Cj4gKwlzdHJ1Y3Qga29tZWRhX2xheWVyICp3Yl9s
YXllcjsKPiArCXUzMiBwaXBlX2lkLCBsYXllcl9pZDsKPiArCj4gKwlnZXRfcmVzb3VyY2VzX2lk
KGJsay0+YmxvY2tfaW5mbywgJnBpcGVfaWQsICZsYXllcl9pZCk7Cj4gKwo+ICsJYyA9IGtvbWVk
YV9jb21wb25lbnRfYWRkKCZkNzEtPnBpcGVzW3BpcGVfaWRdLT5iYXNlLCBzaXplb2YoKndiX2xh
eWVyKSwKPiArCQkJCSBsYXllcl9pZCwgQkxPQ0tfSU5GT19JTlBVVF9JRChibGstPmJsb2NrX2lu
Zm8pLAo+ICsJCQkJICZkNzFfd2JfbGF5ZXJfZnVuY3MsCj4gKwkJCQkgMSwgZ2V0X3ZhbGlkX2lu
cHV0cyhibGspLCAwLCByZWcsCj4gKwkJCQkgIkxQVSVkX0xBWUVSX1dSIiwgcGlwZV9pZCk7Cj4g
KwlpZiAoIWMpIHsKSSB0aGluayB3ZSBzaG91bGQgdXNlICdJU19FUlIoYyknIGFzIGtvbWVkYV9j
b21wb25lbnRfYWRkKCkgcmV0dXJucyBhIHZhbGlkCmVycm9yIGNvZGUuCgo+ICsJCURSTV9FUlJP
UigiRmFpbGVkIHRvIGFkZCB3Yl9sYXllciBjb21wb25lbnRcbiIpOwo+ICsJCXJldHVybiAtRUlO
VkFMOwo+ICsJfQo+ICsKPiArCXdiX2xheWVyID0gdG9fbGF5ZXIoYyk7Cj4gKwl3Yl9sYXllci0+
bGF5ZXJfdHlwZSA9IEtPTUVEQV9GTVRfV0JfTEFZRVI7Cj4gKwo+ICsJc2V0X3JhbmdlKCZ3Yl9s
YXllci0+aHNpemVfaW4sIEQ3MV9NSU5fTElORV9TSVpFLCBkNzEtPm1heF9saW5lX3NpemUpOwo+
ICsJc2V0X3JhbmdlKCZ3Yl9sYXllci0+dnNpemVfaW4sIEQ3MV9NSU5fVkVSVElDQUxfU0laRSwg
ZDcxLT5tYXhfdnNpemUpOwo+ICAKPiAgCXJldHVybiAwOwo+ICB9Cj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX2NydGMuYyBiL2RyaXZlcnMv
Z3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX2NydGMuYwo+IGluZGV4IDI4NGNlMDc5
ZDhjNC4uNjcxMjYwM2I4YzdhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlz
cGxheS9rb21lZGEva29tZWRhX2NydGMuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlz
cGxheS9rb21lZGEva29tZWRhX2NydGMuYwo+IEBAIC0xNjUsNiArMTY1LDE1IEBAIHZvaWQga29t
ZWRhX2NydGNfaGFuZGxlX2V2ZW50KHN0cnVjdCBrb21lZGFfY3J0YyAgICprY3J0YywKPiAgCWlm
IChldmVudHMgJiBLT01FREFfRVZFTlRfVlNZTkMpCj4gIAkJZHJtX2NydGNfaGFuZGxlX3ZibGFu
ayhjcnRjKTsKPiAgCj4gKwlpZiAoZXZlbnRzICYgS09NRURBX0VWRU5UX0VPVykgewo+ICsJCXN0
cnVjdCBrb21lZGFfd2JfY29ubmVjdG9yICp3Yl9jb25uID0ga2NydGMtPndiX2Nvbm47Cj4gKwo+
ICsJCWlmICh3Yl9jb25uKQo+ICsJCQlkcm1fd3JpdGViYWNrX3NpZ25hbF9jb21wbGV0aW9uKCZ3
Yl9jb25uLT5iYXNlLCAwKTsKPiArCQllbHNlCj4gKwkJCURSTV9XQVJOKCJDUlRDWyVkXTogRU9X
IGhhcHBlbiBidXQgbm8gd2JfY29ubmVjdG9yLlxuIiwKPiArCQkJCSBkcm1fY3J0Y19pbmRleCgm
a2NydGMtPmJhc2UpKTsKPiArCX0KPiAgCS8qIHdpbGwgaGFuZGxlIGl0IHRvZ2V0aGVyIHdpdGgg
dGhlIHdyaXRlIGJhY2sgc3VwcG9ydCAqLwo+ICAJaWYgKGV2ZW50cyAmIEtPTUVEQV9FVkVOVF9F
T1cpCj4gIAkJRFJNX0RFQlVHKCJFT1cuXG4iKTsKPiBAQCAtMjAxLDYgKzIxMCw4IEBAIGtvbWVk
YV9jcnRjX2RvX2ZsdXNoKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKPiAgCXN0cnVjdCBrb21lZGFf
Y3J0Y19zdGF0ZSAqa2NydGNfc3QgPSB0b19rY3J0Y19zdChjcnRjLT5zdGF0ZSk7Cj4gIAlzdHJ1
Y3Qga29tZWRhX2RldiAqbWRldiA9IGtjcnRjLT5iYXNlLmRldi0+ZGV2X3ByaXZhdGU7Cj4gIAlz
dHJ1Y3Qga29tZWRhX3BpcGVsaW5lICptYXN0ZXIgPSBrY3J0Yy0+bWFzdGVyOwo+ICsJc3RydWN0
IGtvbWVkYV93Yl9jb25uZWN0b3IgKndiX2Nvbm4gPSBrY3J0Yy0+d2JfY29ubjsKPiArCXN0cnVj
dCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0Owo+ICAKPiAgCURSTV9ERUJVR19BVE9NSUMo
IkNSVEMlZF9GTFVTSDogYWN0aXZlX3BpcGVzOiAweCV4LCBhZmZlY3RlZDogMHgleC5cbiIsCj4g
IAkJCSBkcm1fY3J0Y19pbmRleChjcnRjKSwKPiBAQCAtMjEwLDYgKzIyMSwxMCBAQCBrb21lZGFf
Y3J0Y19kb19mbHVzaChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4gIAlpZiAoaGFzX2JpdChtYXN0
ZXItPmlkLCBrY3J0Y19zdC0+YWZmZWN0ZWRfcGlwZXMpKQo+ICAJCWtvbWVkYV9waXBlbGluZV91
cGRhdGUobWFzdGVyLCBvbGQtPnN0YXRlKTsKPiAgCj4gKwljb25uX3N0ID0gd2JfY29ubiA/IHdi
X2Nvbm4tPmJhc2UuYmFzZS5zdGF0ZSA6IE5VTEw7Cj4gKwlpZiAoY29ubl9zdCAmJiBjb25uX3N0
LT53cml0ZWJhY2tfam9iKQo+ICsJCWRybV93cml0ZWJhY2tfcXVldWVfam9iKCZ3Yl9jb25uLT5i
YXNlLCBjb25uX3N0KTsKPiArCj4gIAkvKiBzdGVwIDI6IG5vdGlmeSB0aGUgSFcgdG8ga2lja29m
ZiB0aGUgdXBkYXRlICovCj4gIAltZGV2LT5mdW5jcy0+Zmx1c2gobWRldiwgbWFzdGVyLT5pZCwg
a2NydGNfc3QtPmFjdGl2ZV9waXBlcyk7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfZnJhbWVidWZmZXIuYyBiL2RyaXZlcnMvZ3B1
L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX2ZyYW1lYnVmZmVyLmMKPiBpbmRleCA5Y2M5
OTM1MDI0ZjcuLjRkODE2MGNmMDljMyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYXJt
L2Rpc3BsYXkva29tZWRhL2tvbWVkYV9mcmFtZWJ1ZmZlci5jCj4gKysrIGIvZHJpdmVycy9ncHUv
ZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfZnJhbWVidWZmZXIuYwo+IEBAIC0xNjUsMyAr
MTY1LDIyIEBAIGtvbWVkYV9mYl9nZXRfcGl4ZWxfYWRkcihzdHJ1Y3Qga29tZWRhX2ZiICprZmIs
IGludCB4LCBpbnQgeSwgaW50IHBsYW5lKQo+ICAKPiAgCXJldHVybiBvYmotPnBhZGRyICsgb2Zm
c2V0Owo+ICB9Cj4gKwo+ICsvKiBpZiB0aGUgZmIgY2FuIGJlIHN1cHBvcnRlZCBieSBhIHNwZWNp
ZmljIGxheWVyICovCj4gK2Jvb2wga29tZWRhX2ZiX2lzX2xheWVyX3N1cHBvcnRlZChzdHJ1Y3Qg
a29tZWRhX2ZiICprZmIsIHUzMiBsYXllcl90eXBlKQo+ICt7Cj4gKwlzdHJ1Y3QgZHJtX2ZyYW1l
YnVmZmVyICpmYiA9ICZrZmItPmJhc2U7Cj4gKwlzdHJ1Y3Qga29tZWRhX2RldiAqbWRldiA9IGZi
LT5kZXYtPmRldl9wcml2YXRlOwo+ICsJY29uc3Qgc3RydWN0IGtvbWVkYV9mb3JtYXRfY2FwcyAq
Y2FwczsKPiArCXUzMiBmb3VyY2MgPSBmYi0+Zm9ybWF0LT5mb3JtYXQ7Cj4gKwl1NjQgbW9kaWZp
ZXIgPSBmYi0+bW9kaWZpZXI7Cj4gKwo+ICsJY2FwcyA9IGtvbWVkYV9nZXRfZm9ybWF0X2NhcHMo
Jm1kZXYtPmZtdF90YmwsIGZvdXJjYywgbW9kaWZpZXIpOwo+ICsJaWYgKCFjYXBzKQo+ICsJCXJl
dHVybiBmYWxzZTsKPiArCj4gKwlpZiAoIShjYXBzLT5zdXBwb3J0ZWRfbGF5ZXJfdHlwZXMgJiBs
YXllcl90eXBlKSkKPiArCQlyZXR1cm4gZmFsc2U7Cj4gKwo+ICsJcmV0dXJuIHRydWU7Cj4gK30K
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFf
a21zLmMgYi9kcml2ZXJzL2dwdS9kcm0vYXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV9rbXMuYwo+
IGluZGV4IDg2ZjY1NDJhZmI0MC4uM2U1ODkwMWZiNzc2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX2ttcy5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfa21zLmMKPiBAQCAtMTg4LDYgKzE4OCwx
MCBAQCBzdHJ1Y3Qga29tZWRhX2ttc19kZXYgKmtvbWVkYV9rbXNfYXR0YWNoKHN0cnVjdCBrb21l
ZGFfZGV2ICptZGV2KQo+ICAJaWYgKGVycikKPiAgCQlnb3RvIGNsZWFudXBfbW9kZV9jb25maWc7
Cj4gIAo+ICsJZXJyID0ga29tZWRhX2ttc19hZGRfd2JfY29ubmVjdG9ycyhrbXMsIG1kZXYpOwo+
ICsJaWYgKGVycikKPiArCQlnb3RvIGNsZWFudXBfbW9kZV9jb25maWc7Cj4gKwo+ICAJZXJyID0g
Y29tcG9uZW50X2JpbmRfYWxsKG1kZXYtPmRldiwga21zKTsKPiAgCWlmIChlcnIpCj4gIAkJZ290
byBjbGVhbnVwX21vZGVfY29uZmlnOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYXJt
L2Rpc3BsYXkva29tZWRhL2tvbWVkYV9rbXMuaCBiL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxh
eS9rb21lZGEva29tZWRhX2ttcy5oCj4gaW5kZXggYWMzZDkyMDliNGQ5Li5mMTZlOWU1Nzc1OTMg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFf
a21zLmgKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV9r
bXMuaAo+IEBAIC0xMiw2ICsxMiw3IEBACj4gICNpbmNsdWRlIDxkcm0vZHJtX2NydGNfaGVscGVy
Lmg+Cj4gICNpbmNsdWRlIDxkcm0vZHJtX2RldmljZS5oPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV93
cml0ZWJhY2suaD4KPiArI2luY2x1ZGUgPGRybS9kcm1fcHJpbnQuaD4KPiAgI2luY2x1ZGUgPHZp
ZGVvL3ZpZGVvbW9kZS5oPgo+ICAjaW5jbHVkZSA8dmlkZW8vZGlzcGxheV90aW1pbmcuaD4KPiAg
Cj4gQEAgLTczLDYgKzc0LDkgQEAgc3RydWN0IGtvbWVkYV9jcnRjIHsKPiAgCSAqLwo+ICAJc3Ry
dWN0IGtvbWVkYV9waXBlbGluZSAqc2xhdmU7Cj4gIAo+ICsJLyoqIEB3Yl9jb25uOiBrb21lZGEg
d3JpdGUgYmFjayBjb25uZWN0b3IgKi8KPiArCXN0cnVjdCBrb21lZGFfd2JfY29ubmVjdG9yICp3
Yl9jb25uOwo+ICsKPiAgCS8qKiBAZGlzYWJsZV9kb25lOiB0aGlzIGZsaXBfZG9uZSBpcyBmb3Ig
dHJhY2luZyB0aGUgZGlzYWJsZSAqLwo+ICAJc3RydWN0IGNvbXBsZXRpb24gKmRpc2FibGVfZG9u
ZTsKPiAgfTsKPiBAQCAtMTE2LDYgKzEyMCwyNyBAQCBzdHJ1Y3Qga29tZWRhX2ttc19kZXYgewo+
ICAjZGVmaW5lIHRvX2tjcnRjKHApCWNvbnRhaW5lcl9vZihwLCBzdHJ1Y3Qga29tZWRhX2NydGMs
IGJhc2UpCj4gICNkZWZpbmUgdG9fa2NydGNfc3QocCkJY29udGFpbmVyX29mKHAsIHN0cnVjdCBr
b21lZGFfY3J0Y19zdGF0ZSwgYmFzZSkKPiAgI2RlZmluZSB0b19rZGV2KHApCWNvbnRhaW5lcl9v
ZihwLCBzdHJ1Y3Qga29tZWRhX2ttc19kZXYsIGJhc2UpCj4gKyNkZWZpbmUgdG9fd2JfY29ubih4
KQljb250YWluZXJfb2YoeCwgc3RydWN0IGRybV93cml0ZWJhY2tfY29ubmVjdG9yLCBiYXNlKQo+
ICsKPiArc3RhdGljIGlubGluZSBib29sIGlzX3dyaXRlYmFja19vbmx5KHN0cnVjdCBkcm1fY3J0
Y19zdGF0ZSAqc3QpCj4gK3sKPiArCXN0cnVjdCBrb21lZGFfd2JfY29ubmVjdG9yICp3Yl9jb25u
ID0gdG9fa2NydGMoc3QtPmNydGMpLT53Yl9jb25uOwo+ICsJc3RydWN0IGRybV9jb25uZWN0b3Ig
KmNvbm4gPSB3Yl9jb25uID8gJndiX2Nvbm4tPmJhc2UuYmFzZSA6IE5VTEw7Cj4gKwo+ICsJcmV0
dXJuIGNvbm4gJiYgKHN0LT5jb25uZWN0b3JfbWFzayA9PSBCSVQoZHJtX2Nvbm5lY3Rvcl9pbmRl
eChjb25uKSkpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW5saW5lIGJvb2wKPiAraXNfb25seV9jaGFu
Z2VkX2Nvbm5lY3RvcihzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKnN0LCBzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubikKPiArewo+ICsJc3RydWN0IGRybV9jcnRjX3N0YXRlICpvbGRfc3Q7Cj4gKwl1
MzIgY2hhbmdlZF9jb25uZWN0b3JzOwo+ICsKPiArCW9sZF9zdCA9IGRybV9hdG9taWNfZ2V0X29s
ZF9jcnRjX3N0YXRlKHN0LT5zdGF0ZSwgc3QtPmNydGMpOwo+ICsJY2hhbmdlZF9jb25uZWN0b3Jz
ID0gc3QtPmNvbm5lY3Rvcl9tYXNrIF4gb2xkX3N0LT5jb25uZWN0b3JfbWFzazsKPiArCj4gKwly
ZXR1cm4gQklUKGRybV9jb25uZWN0b3JfaW5kZXgoY29ubikpID09IGNoYW5nZWRfY29ubmVjdG9y
czsKPiArfQo+ICAKPiAgaW50IGtvbWVkYV9rbXNfc2V0dXBfY3J0Y3Moc3RydWN0IGtvbWVkYV9r
bXNfZGV2ICprbXMsIHN0cnVjdCBrb21lZGFfZGV2ICptZGV2KTsKPiAgCj4gQEAgLTEyMyw2ICsx
NDgsOCBAQCBpbnQga29tZWRhX2ttc19hZGRfY3J0Y3Moc3RydWN0IGtvbWVkYV9rbXNfZGV2ICpr
bXMsIHN0cnVjdCBrb21lZGFfZGV2ICptZGV2KTsKPiAgaW50IGtvbWVkYV9rbXNfYWRkX3BsYW5l
cyhzdHJ1Y3Qga29tZWRhX2ttc19kZXYgKmttcywgc3RydWN0IGtvbWVkYV9kZXYgKm1kZXYpOwo+
ICBpbnQga29tZWRhX2ttc19hZGRfcHJpdmF0ZV9vYmpzKHN0cnVjdCBrb21lZGFfa21zX2RldiAq
a21zLAo+ICAJCQkJc3RydWN0IGtvbWVkYV9kZXYgKm1kZXYpOwo+ICtpbnQga29tZWRhX2ttc19h
ZGRfd2JfY29ubmVjdG9ycyhzdHJ1Y3Qga29tZWRhX2ttc19kZXYgKmttcywKPiArCQkJCSBzdHJ1
Y3Qga29tZWRhX2RldiAqbWRldik7Cj4gIHZvaWQga29tZWRhX2ttc19jbGVhbnVwX3ByaXZhdGVf
b2JqcyhzdHJ1Y3Qga29tZWRhX2ttc19kZXYgKmttcyk7Cj4gIAo+ICB2b2lkIGtvbWVkYV9jcnRj
X2hhbmRsZV9ldmVudChzdHJ1Y3Qga29tZWRhX2NydGMgICAqa2NydGMsCj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX3BpcGVsaW5lLmggYi9k
cml2ZXJzL2dwdS9kcm0vYXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV9waXBlbGluZS5oCj4gaW5k
ZXggYmFlOGEzMmI4MWE2Li4xYjdlOTMzZWEzMDMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUv
ZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfcGlwZWxpbmUuaAo+ICsrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX3BpcGVsaW5lLmgKPiBAQCAtNDIzLDEw
ICs0MjMsMTcgQEAgc3RydWN0IGtvbWVkYV9wbGFuZV9zdGF0ZTsKPiAgc3RydWN0IGtvbWVkYV9j
cnRjX3N0YXRlOwo+ICBzdHJ1Y3Qga29tZWRhX2NydGM7Cj4gIAo+ICt2b2lkIHBpcGVsaW5lX2Nv
bXBvc2l0aW9uX3NpemUoc3RydWN0IGtvbWVkYV9jcnRjX3N0YXRlICprY3J0Y19zdCwKPiArCQkJ
ICAgICAgIHUxNiAqaHNpemUsIHUxNiAqdnNpemUpOwo+ICsKPiAgaW50IGtvbWVkYV9idWlsZF9s
YXllcl9kYXRhX2Zsb3coc3RydWN0IGtvbWVkYV9sYXllciAqbGF5ZXIsCj4gIAkJCQkgc3RydWN0
IGtvbWVkYV9wbGFuZV9zdGF0ZSAqa3BsYW5lX3N0LAo+ICAJCQkJIHN0cnVjdCBrb21lZGFfY3J0
Y19zdGF0ZSAqa2NydGNfc3QsCj4gIAkJCQkgc3RydWN0IGtvbWVkYV9kYXRhX2Zsb3dfY2ZnICpk
Zmxvdyk7Cj4gK2ludCBrb21lZGFfYnVpbGRfd2JfZGF0YV9mbG93KHN0cnVjdCBrb21lZGFfbGF5
ZXIgKndiX2xheWVyLAo+ICsJCQkgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29u
bl9zdCwKPiArCQkJICAgICAgc3RydWN0IGtvbWVkYV9jcnRjX3N0YXRlICprY3J0Y19zdCwKPiAr
CQkJICAgICAgc3RydWN0IGtvbWVkYV9kYXRhX2Zsb3dfY2ZnICpkZmxvdyk7Cj4gIGludCBrb21l
ZGFfYnVpbGRfZGlzcGxheV9kYXRhX2Zsb3coc3RydWN0IGtvbWVkYV9jcnRjICprY3J0YywKPiAg
CQkJCSAgIHN0cnVjdCBrb21lZGFfY3J0Y19zdGF0ZSAqa2NydGNfc3QpOwo+ICAKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfcGlwZWxpbmVf
c3RhdGUuYyBiL2RyaXZlcnMvZ3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX3BpcGVs
aW5lX3N0YXRlLmMKPiBpbmRleCAzNjU3MGQ3ZGFkNjEuLjk3NDhjOTQzODg2OCAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV9waXBlbGluZV9z
dGF0ZS5jCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFf
cGlwZWxpbmVfc3RhdGUuYwo+IEBAIC0zMDgsOCArMzA4LDQxIEBAIGtvbWVkYV9sYXllcl92YWxp
ZGF0ZShzdHJ1Y3Qga29tZWRhX2xheWVyICpsYXllciwKPiAgCXJldHVybiAwOwo+ICB9Cj4gIAo+
IC1zdGF0aWMgdm9pZCBwaXBlbGluZV9jb21wb3NpdGlvbl9zaXplKHN0cnVjdCBrb21lZGFfY3J0
Y19zdGF0ZSAqa2NydGNfc3QsCj4gLQkJCQkgICAgICB1MTYgKmhzaXplLCB1MTYgKnZzaXplKQo+
ICtzdGF0aWMgaW50Cj4gK2tvbWVkYV93Yl9sYXllcl92YWxpZGF0ZShzdHJ1Y3Qga29tZWRhX2xh
eWVyICp3Yl9sYXllciwKPiArCQkJIHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0
LAo+ICsJCQkgc3RydWN0IGtvbWVkYV9kYXRhX2Zsb3dfY2ZnICpkZmxvdykKPiArewo+ICsJc3Ry
dWN0IGtvbWVkYV9mYiAqa2ZiID0gdG9fa2ZiKGNvbm5fc3QtPndyaXRlYmFja19qb2ItPmZiKTsK
PiArCXN0cnVjdCBrb21lZGFfY29tcG9uZW50X3N0YXRlICpjX3N0Owo+ICsJc3RydWN0IGtvbWVk
YV9sYXllcl9zdGF0ZSAqc3Q7Cj4gKwlpbnQgaTsKPiArCj4gKwlpZiAoIWtvbWVkYV9mYl9pc19s
YXllcl9zdXBwb3J0ZWQoa2ZiLCB3Yl9sYXllci0+bGF5ZXJfdHlwZSkpCj4gKwkJcmV0dXJuIC1F
SU5WQUw7Cj4gKwo+ICsJY19zdCA9IGtvbWVkYV9jb21wb25lbnRfZ2V0X3N0YXRlX2FuZF9zZXRf
dXNlcigmd2JfbGF5ZXItPmJhc2UsCj4gKwkJCWNvbm5fc3QtPnN0YXRlLCBjb25uX3N0LT5jb25u
ZWN0b3IsIGNvbm5fc3QtPmNydGMpOwo+ICsJaWYgKElTX0VSUihjX3N0KSkKPiArCQlyZXR1cm4g
UFRSX0VSUihjX3N0KTsKPiArCj4gKwlzdCA9IHRvX2xheWVyX3N0KGNfc3QpOwo+ICsKPiArCXN0
LT5oc2l6ZSA9IGRmbG93LT5vdXRfdzsKPiArCXN0LT52c2l6ZSA9IGRmbG93LT5vdXRfaDsKPiAr
Cj4gKwlmb3IgKGkgPSAwOyBpIDwga2ZiLT5iYXNlLmZvcm1hdC0+bnVtX3BsYW5lczsgaSsrKQo+
ICsJCXN0LT5hZGRyW2ldID0ga29tZWRhX2ZiX2dldF9waXhlbF9hZGRyKGtmYiwgZGZsb3ctPm91
dF94LAo+ICsJCQkJCQkgICAgICAgZGZsb3ctPm91dF95LCBpKTsKPiArCj4gKwlrb21lZGFfY29t
cG9uZW50X2FkZF9pbnB1dCgmc3QtPmJhc2UsICZkZmxvdy0+aW5wdXQsIDApOwo+ICsJa29tZWRh
X2NvbXBvbmVudF9zZXRfb3V0cHV0KCZkZmxvdy0+aW5wdXQsICZ3Yl9sYXllci0+YmFzZSwgMCk7
Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3ZvaWQgcGlwZWxpbmVfY29tcG9zaXRpb25f
c2l6ZShzdHJ1Y3Qga29tZWRhX2NydGNfc3RhdGUgKmtjcnRjX3N0LAo+ICsJCQkgICAgICAgdTE2
ICpoc2l6ZSwgdTE2ICp2c2l6ZSkKPiAgewo+ICAJc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKm0g
PSAma2NydGNfc3QtPmJhc2UuYWRqdXN0ZWRfbW9kZTsKPiAgCj4gQEAgLTQ3OCw2ICs1MTEsMjAg
QEAgaW50IGtvbWVkYV9idWlsZF9sYXllcl9kYXRhX2Zsb3coc3RydWN0IGtvbWVkYV9sYXllciAq
bGF5ZXIsCj4gIAlyZXR1cm4gZXJyOwo+ICB9Cj4gIAo+ICtpbnQga29tZWRhX2J1aWxkX3diX2Rh
dGFfZmxvdyhzdHJ1Y3Qga29tZWRhX2xheWVyICp3Yl9sYXllciwKPiArCQkJICAgICAgc3RydWN0
IGRybV9jb25uZWN0b3Jfc3RhdGUgKmNvbm5fc3QsCj4gKwkJCSAgICAgIHN0cnVjdCBrb21lZGFf
Y3J0Y19zdGF0ZSAqa2NydGNfc3QsCj4gKwkJCSAgICAgIHN0cnVjdCBrb21lZGFfZGF0YV9mbG93
X2NmZyAqZGZsb3cpCj4gK3sKPiArCWlmICgoZGZsb3ctPmluX3cgIT0gZGZsb3ctPm91dF93KSB8
fAo+ICsJICAgIChkZmxvdy0+aW5faCAhPSBkZmxvdy0+b3V0X2gpKSB7Cj4gKwkJRFJNX0RFQlVH
X0FUT01JQygiY3VycmVudCBkbyBub3Qgc3VwcG9ydCBzY2FsaW5nIHdyaXRlYmFjay5cbiIpOwo+
ICsJCXJldHVybiAtRUlOVkFMOwo+ICsJfQo+ICsKPiArCXJldHVybiBrb21lZGFfd2JfbGF5ZXJf
dmFsaWRhdGUod2JfbGF5ZXIsIGNvbm5fc3QsIGRmbG93KTsKPiArfQo+ICsKPiAgLyogYnVpbGQg
ZGlzcGxheSBvdXRwdXQgZGF0YSBmbG93LCB0aGUgZGF0YSBwYXRoIGlzOgo+ICAgKiBjb21waXog
LT4gaW1wcm9jIC0+IHRpbWluZ19jdHJscgo+ICAgKi8KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfcHJpdmF0ZV9vYmouYyBiL2RyaXZlcnMv
Z3B1L2RybS9hcm0vZGlzcGxheS9rb21lZGEva29tZWRhX3ByaXZhdGVfb2JqLmMKPiBpbmRleCBh
NTQ4NzhjYmQ2ZTQuLmQ1M2JkNmMyM2M1ZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV9wcml2YXRlX29iai5jCj4gKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfcHJpdmF0ZV9vYmouYwo+IEBAIC0yNTIs
NiArMjUyLDEyIEBAIGludCBrb21lZGFfa21zX2FkZF9wcml2YXRlX29ianMoc3RydWN0IGtvbWVk
YV9rbXNfZGV2ICprbXMsCj4gIAkJCQlyZXR1cm4gZXJyOwo+ICAJCX0KPiAgCj4gKwkJaWYgKHBp
cGUtPndiX2xheWVyKSB7Cj4gKwkJCWVyciA9IGtvbWVkYV9sYXllcl9vYmpfYWRkKGttcywgcGlw
ZS0+d2JfbGF5ZXIpOwo+ICsJCQlpZiAoZXJyKQo+ICsJCQkJcmV0dXJuIGVycjsKPiArCQl9Cj4g
Kwo+ICAJCWVyciA9IGtvbWVkYV9jb21waXpfb2JqX2FkZChrbXMsIHBpcGUtPmNvbXBpeik7Cj4g
IAkJaWYgKGVycikKPiAgCQkJcmV0dXJuIGVycjsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFfd2JfY29ubmVjdG9yLmMgYi9kcml2ZXJzL2dw
dS9kcm0vYXJtL2Rpc3BsYXkva29tZWRhL2tvbWVkYV93Yl9jb25uZWN0b3IuYwo+IG5ldyBmaWxl
IG1vZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAwLi4wYzFhNDIyMGMyODAKPiAtLS0gL2Rl
di9udWxsCj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FybS9kaXNwbGF5L2tvbWVkYS9rb21lZGFf
d2JfY29ubmVjdG9yLmMKPiBAQCAtMCwwICsxLDE4MSBAQAo+ICsvLyBTUERYLUxpY2Vuc2UtSWRl
bnRpZmllcjogR1BMLTIuMAo+ICsvKgo+ICsgKiAoQykgQ09QWVJJR0hUIDIwMTggQVJNIExpbWl0
ZWQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCj4gKyAqIEF1dGhvcjogSmFtZXMuUWlhbi5XYW5nIDxq
YW1lcy5xaWFuLndhbmdAYXJtLmNvbT4KPiArICoKPiArICovCj4gKyNpbmNsdWRlICJrb21lZGFf
ZGV2LmgiCj4gKyNpbmNsdWRlICJrb21lZGFfa21zLmgiCj4gKwo+ICtzdGF0aWMgaW50Cj4gK2tv
bWVkYV93Yl9pbml0X2RhdGFfZmxvdyhzdHJ1Y3Qga29tZWRhX2xheWVyICp3Yl9sYXllciwKPiAr
CQkJIHN0cnVjdCBkcm1fY29ubmVjdG9yX3N0YXRlICpjb25uX3N0LAo+ICsJCQkgc3RydWN0IGtv
bWVkYV9jcnRjX3N0YXRlICprY3J0Y19zdCwKPiArCQkJIHN0cnVjdCBrb21lZGFfZGF0YV9mbG93
X2NmZyAqZGZsb3cpCj4gK3sKPiArCXN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZiID0gY29ubl9z
dC0+d3JpdGViYWNrX2pvYiA/Cj4gKwkJCQkgICAgIGNvbm5fc3QtPndyaXRlYmFja19qb2ItPmZi
IDogTlVMTDsKPiArCj4gKwlpZiAoIWZiKQo+ICsJCXJldHVybiAtRUlOVkFMOwo+ICsKPiArCW1l
bXNldChkZmxvdywgMCwgc2l6ZW9mKCpkZmxvdykpOwo+ICsKPiArCWRmbG93LT5vdXRfdyA9IGZi
LT53aWR0aDsKPiArCWRmbG93LT5vdXRfaCA9IGZiLT5oZWlnaHQ7Cj4gKwo+ICsJLyogdGhlIHdy
aXRlIGJhY2sgZGF0YSBjb21lcyBmcm9tIHRoZSBjb21waXogKi8KPiArCXBpcGVsaW5lX2NvbXBv
c2l0aW9uX3NpemUoa2NydGNfc3QsICZkZmxvdy0+aW5fdywgJmRmbG93LT5pbl9oKTsKPiArCWRm
bG93LT5pbnB1dC5jb21wb25lbnQgPSAmd2JfbGF5ZXItPmJhc2UucGlwZWxpbmUtPmNvbXBpei0+
YmFzZTsKPiArCS8qIGNvbXBpeiBkb2Vzbid0IG91dHB1dCBhbHBoYSAqLwo+ICsJZGZsb3ctPnBp
eGVsX2JsZW5kX21vZGUgPSBEUk1fTU9ERV9CTEVORF9QSVhFTF9OT05FOwo+ICsJZGZsb3ctPnJv
dCA9IERSTV9NT0RFX1JPVEFURV8wOwo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtzdGF0
aWMgaW50Cj4gK2tvbWVkYV93Yl9lbmNvZGVyX2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2VuY29k
ZXIgKmVuY29kZXIsCj4gKwkJCSAgICAgICBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgKmNydGNfc3Qs
Cj4gKwkJCSAgICAgICBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdCkKPiArewo+
ICsJc3RydWN0IGtvbWVkYV9jcnRjX3N0YXRlICprY3J0Y19zdCA9IHRvX2tjcnRjX3N0KGNydGNf
c3QpOwo+ICsJc3RydWN0IGtvbWVkYV9sYXllciAqd2JfbGF5ZXI7Cj4gKwlzdHJ1Y3Qga29tZWRh
X2RhdGFfZmxvd19jZmcgZGZsb3c7Cj4gKwlpbnQgZXJyOwo+ICsKPiArCWlmICghY3J0Y19zdC0+
YWN0aXZlKSB7Cj4gKwkJRFJNX0RFQlVHX0FUT01JQygiQ2Fubm90IHdyaXRlIHRoZSBjb21wb3Np
dGlvbiByZXN1bHQgb3V0IG9uIGEgaW5hY3RpdmUgQ1JUQy5cbiIpOwo+ICsJCXJldHVybiAtRUlO
VkFMOwo+ICsJfQo+ICsKPiArCXdiX2xheWVyID0gdG9fa2Nvbm4odG9fd2JfY29ubihjb25uX3N0
LT5jb25uZWN0b3IpKS0+d2JfbGF5ZXI7Cj4gKwo+ICsJLyoKPiArCSAqIE5vIG5lZWQgZm9yIGEg
ZnVsbCBtb2Rlc3RlZCB3aGVuIHRoZSBvbmx5IGNvbm5lY3RvciBjaGFuZ2VkIGlzIHRoZQo+ICsJ
ICogd3JpdGViYWNrIGNvbm5lY3Rvci4KPiArCSAqLwo+ICsJaWYgKGNydGNfc3QtPmNvbm5lY3Rv
cnNfY2hhbmdlZCAmJgo+ICsJICAgIGlzX29ubHlfY2hhbmdlZF9jb25uZWN0b3IoY3J0Y19zdCwg
Y29ubl9zdC0+Y29ubmVjdG9yKSkKPiArCQljcnRjX3N0LT5jb25uZWN0b3JzX2NoYW5nZWQgPSBm
YWxzZTsKPiArCj4gKwllcnIgPSBrb21lZGFfd2JfaW5pdF9kYXRhX2Zsb3cod2JfbGF5ZXIsIGNv
bm5fc3QsIGtjcnRjX3N0LCAmZGZsb3cpOwo+ICsJaWYgKGVycikKPiArCQlyZXR1cm4gZXJyOwo+
ICsKPiArCXJldHVybiBrb21lZGFfYnVpbGRfd2JfZGF0YV9mbG93KHdiX2xheWVyLCBjb25uX3N0
LCBrY3J0Y19zdCwgJmRmbG93KTsKPiArfQo+ICsKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1f
ZW5jb2Rlcl9oZWxwZXJfZnVuY3Mga29tZWRhX3diX2VuY29kZXJfaGVscGVyX2Z1bmNzID0gewo+
ICsJLmF0b21pY19jaGVjayA9IGtvbWVkYV93Yl9lbmNvZGVyX2F0b21pY19jaGVjaywKPiArfTsK
PiArCj4gK3N0YXRpYyBpbnQKPiAra29tZWRhX3diX2Nvbm5lY3Rvcl9nZXRfbW9kZXMoc3RydWN0
IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKPiArewo+ICsJcmV0dXJuIDA7Cj4gK30KQ2FuIHdl
IHJlbW92ZSB0aGlzID8KCj4gKwo+ICtzdGF0aWMgZW51bSBkcm1fbW9kZV9zdGF0dXMKPiAra29t
ZWRhX3diX2Nvbm5lY3Rvcl9tb2RlX3ZhbGlkKHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0
b3IsCj4gKwkJCSAgICAgICBzdHJ1Y3QgZHJtX2Rpc3BsYXlfbW9kZSAqbW9kZSkKPiArewo+ICsJ
c3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNvbm5lY3Rvci0+ZGV2Owo+ICsJc3RydWN0IGRybV9t
b2RlX2NvbmZpZyAqbW9kZV9jb25maWcgPSAmZGV2LT5tb2RlX2NvbmZpZzsKPiArCWludCB3ID0g
bW9kZS0+aGRpc3BsYXksIGggPSBtb2RlLT52ZGlzcGxheTsKPiArCj4gKwlpZiAoKHcgPCBtb2Rl
X2NvbmZpZy0+bWluX3dpZHRoKSB8fCAodyA+IG1vZGVfY29uZmlnLT5tYXhfd2lkdGgpKQo+ICsJ
CXJldHVybiBNT0RFX0JBRF9IVkFMVUU7Cj4gKwo+ICsJaWYgKChoIDwgbW9kZV9jb25maWctPm1p
bl9oZWlnaHQpIHx8IChoID4gbW9kZV9jb25maWctPm1heF9oZWlnaHQpKQo+ICsJCXJldHVybiBN
T0RFX0JBRF9WVkFMVUU7Cj4gKwo+ICsJcmV0dXJuIE1PREVfT0s7Cj4gK30KPiArCj4gK3N0YXRp
YyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfZnVuY3Mga29tZWRhX3diX2Nvbm5f
aGVscGVyX2Z1bmNzID0gewo+ICsJLmdldF9tb2Rlcwk9IGtvbWVkYV93Yl9jb25uZWN0b3JfZ2V0
X21vZGVzLAo+ICsJLm1vZGVfdmFsaWQJPSBrb21lZGFfd2JfY29ubmVjdG9yX21vZGVfdmFsaWQs
Cj4gK307Cj4gKwo+ICtzdGF0aWMgZW51bSBkcm1fY29ubmVjdG9yX3N0YXR1cwo+ICtrb21lZGFf
d2JfY29ubmVjdG9yX2RldGVjdChzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9yLCBib29s
IGZvcmNlKQo+ICt7Cj4gKwlyZXR1cm4gY29ubmVjdG9yX3N0YXR1c19jb25uZWN0ZWQ7Cj4gK30K
PiArCj4gK3N0YXRpYyBpbnQKPiAra29tZWRhX3diX2Nvbm5lY3Rvcl9maWxsX21vZGVzKHN0cnVj
dCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IsCj4gKwkJCSAgICAgICB1aW50MzJfdCBtYXhYLCB1
aW50MzJfdCBtYXhZKQo+ICt7Cj4gKwlyZXR1cm4gMDsKPiArfQpDYW4gd2UgcmVtb3ZlIHRoaXMg
YXMgd2VsbCA/Cgo+ICsKPiArc3RhdGljIHZvaWQga29tZWRhX3diX2Nvbm5lY3Rvcl9kZXN0cm95
KHN0cnVjdCBkcm1fY29ubmVjdG9yICpjb25uZWN0b3IpCj4gK3sKPiArCWRybV9jb25uZWN0b3Jf
Y2xlYW51cChjb25uZWN0b3IpOwo+ICsJa2ZyZWUodG9fa2Nvbm4odG9fd2JfY29ubihjb25uZWN0
b3IpKSk7Cj4gK30KPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9mdW5j
cyBrb21lZGFfd2JfY29ubmVjdG9yX2Z1bmNzID0gewo+ICsJLnJlc2V0CQkJPSBkcm1fYXRvbWlj
X2hlbHBlcl9jb25uZWN0b3JfcmVzZXQsCj4gKwkuZGV0ZWN0CQkJPSBrb21lZGFfd2JfY29ubmVj
dG9yX2RldGVjdCwKPiArCS5maWxsX21vZGVzCQk9IGtvbWVkYV93Yl9jb25uZWN0b3JfZmlsbF9t
b2RlcywKPiArCS5kZXN0cm95CQk9IGtvbWVkYV93Yl9jb25uZWN0b3JfZGVzdHJveSwKPiArCS5h
dG9taWNfZHVwbGljYXRlX3N0YXRlCT0gZHJtX2F0b21pY19oZWxwZXJfY29ubmVjdG9yX2R1cGxp
Y2F0ZV9zdGF0ZSwKPiArCS5hdG9taWNfZGVzdHJveV9zdGF0ZQk9IGRybV9hdG9taWNfaGVscGVy
X2Nvbm5lY3Rvcl9kZXN0cm95X3N0YXRlLAo+ICt9Owo+ICsKPiArc3RhdGljIGludCBrb21lZGFf
d2JfY29ubmVjdG9yX2FkZChzdHJ1Y3Qga29tZWRhX2ttc19kZXYgKmttcywKPiArCQkJCSAgIHN0
cnVjdCBrb21lZGFfY3J0YyAqa2NydGMpCj4gK3sKPiArCXN0cnVjdCBrb21lZGFfZGV2ICptZGV2
ID0ga21zLT5iYXNlLmRldl9wcml2YXRlOwo+ICsJc3RydWN0IGtvbWVkYV93Yl9jb25uZWN0b3Ig
Kmt3Yl9jb25uOwo+ICsJc3RydWN0IGRybV93cml0ZWJhY2tfY29ubmVjdG9yICp3Yl9jb25uOwo+
ICsJdTMyICpmb3JtYXRzLCBuX2Zvcm1hdHMgPSAwOwo+ICsJaW50IGVycjsKPiArCj4gKwlpZiAo
IWtjcnRjLT5tYXN0ZXItPndiX2xheWVyKQo+ICsJCXJldHVybiAwOwo+ICsKPiArCWt3Yl9jb25u
ID0ga3phbGxvYyhzaXplb2YoKndiX2Nvbm4pLCBHRlBfS0VSTkVMKTsKPiArCWlmICgha3diX2Nv
bm4pCj4gKwkJcmV0dXJuIC1FTk9NRU07Cj4gKwo+ICsJa3diX2Nvbm4tPndiX2xheWVyID0ga2Ny
dGMtPm1hc3Rlci0+d2JfbGF5ZXI7Cj4gKwo+ICsJd2JfY29ubiA9ICZrd2JfY29ubi0+YmFzZTsK
PiArCXdiX2Nvbm4tPmVuY29kZXIucG9zc2libGVfY3J0Y3MgPSBCSVQoZHJtX2NydGNfaW5kZXgo
JmtjcnRjLT5iYXNlKSk7Cj4gKwo+ICsJZm9ybWF0cyA9IGtvbWVkYV9nZXRfbGF5ZXJfZm91cmNj
X2xpc3QoJm1kZXYtPmZtdF90YmwsCj4gKwkJCQkJICAgICAgIGt3Yl9jb25uLT53Yl9sYXllci0+
bGF5ZXJfdHlwZSwKPiArCQkJCQkgICAgICAgJm5fZm9ybWF0cyk7Cj4gKwpXZSBiZSBkb2luZyBh
IG51bGwgY2hlY2sgb24gZm9ybWF0cyBoZXJlIGFzIHdlIGFyZSBkZXJlZmVyZW5jaW5nIGl0Cmlu
IHRoZSBuZXh0IGZ1bmN0aW9uLgoKPiArCWVyciA9IGRybV93cml0ZWJhY2tfY29ubmVjdG9yX2lu
aXQoJmttcy0+YmFzZSwgd2JfY29ubiwKPiArCQkJCQkgICAma29tZWRhX3diX2Nvbm5lY3Rvcl9m
dW5jcywKPiArCQkJCQkgICAma29tZWRhX3diX2VuY29kZXJfaGVscGVyX2Z1bmNzLAo+ICsJCQkJ
CSAgIGZvcm1hdHMsIG5fZm9ybWF0cyk7Cj4gKwlrb21lZGFfcHV0X2ZvdXJjY19saXN0KGZvcm1h
dHMpOwo+ICsJaWYgKGVycikKPiArCQlyZXR1cm4gZXJyOwo+ICsKPiArCWRybV9jb25uZWN0b3Jf
aGVscGVyX2FkZCgmd2JfY29ubi0+YmFzZSwgJmtvbWVkYV93Yl9jb25uX2hlbHBlcl9mdW5jcyk7
Cj4gKwo+ICsJa2NydGMtPndiX2Nvbm4gPSBrd2JfY29ubjsKPiArCj4gKwlyZXR1cm4gMDsKPiAr
fQo+ICsKPiAraW50IGtvbWVkYV9rbXNfYWRkX3diX2Nvbm5lY3RvcnMoc3RydWN0IGtvbWVkYV9r
bXNfZGV2ICprbXMsCj4gKwkJCQkgc3RydWN0IGtvbWVkYV9kZXYgKm1kZXYpCj4gK3sKPiArCWlu
dCBpLCBlcnI7Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IGttcy0+bl9jcnRjczsgaSsrKSB7Cj4g
KwkJZXJyID0ga29tZWRhX3diX2Nvbm5lY3Rvcl9hZGQoa21zLCAma21zLT5jcnRjc1tpXSk7Cj4g
KwkJaWYgKGVycikKPiArCQkJcmV0dXJuIGVycjsKPiArCX0KPiArCj4gKwlyZXR1cm4gMDsKPiAr
fQo+IC0tIAo+IDIuMTcuMQo+IApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVz
a3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9k
cmktZGV2ZWw=
