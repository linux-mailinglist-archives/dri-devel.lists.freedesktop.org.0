Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E387A103036
	for <lists+dri-devel@lfdr.de>; Wed, 20 Nov 2019 00:29:12 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 71C586EA05;
	Tue, 19 Nov 2019 23:29:09 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from alexa-out-blr-01.qualcomm.com (alexa-out-blr-01.qualcomm.com
 [103.229.18.197])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 64AD66E899;
 Tue, 19 Nov 2019 11:34:38 +0000 (UTC)
Received: from ironmsg02-blr.qualcomm.com ([10.86.208.131])
 by alexa-out-blr-01.qualcomm.com with ESMTP/TLS/AES256-SHA;
 19 Nov 2019 17:04:34 +0530
IronPort-SDR: s0ktwiPeur+v0R36M9RPegpPeaMNal3wer+7aN7bQG3HpbnJU37vBjVYmmmIPnRY/UZxHaPvKG
 JmbUmTibuIACdxgt4PoJMkNmPnp6abWgJaVvg0wi/LDSk+wfRZQmAIIXok2lDBD4te5fiIaj4g
 UqsqY9rwY0Yn8bGmMzP0pTe4HgQHXY/vfqZYPB2lnN1eu51pWR6o6/Og9cBy7OacV4zdrqjpNW
 HzMA5Dgtja9wQs8J7dTQ/MwlgcLGxGcMgt3bGKebKX3mxT6Nvo8a7WXpIYDMv+aagpyYFlTEp/
 E6H4syfjN4pTLsiGiL//A54i
Received: from dhar-linux.qualcomm.com ([10.204.66.25])
 by ironmsg02-blr.qualcomm.com with ESMTP; 19 Nov 2019 17:04:11 +0530
Received: by dhar-linux.qualcomm.com (Postfix, from userid 2306995)
 id 088013B26; Tue, 19 Nov 2019 17:04:09 +0530 (IST)
From: Shubhashree Dhar <dhar@codeaurora.org>
To: dri-devel@lists.freedesktop.org, linux-arm-msm@vger.kernel.org,
 freedreno@lists.freedesktop.org, devicetree@vger.kernel.org
Subject: [PATCH v3] msm:disp:dpu1: add support to access hw irqs regs
 depending on revision
Date: Tue, 19 Nov 2019 17:04:07 +0530
Message-Id: <1574163247-22141-1-git-send-email-dhar@codeaurora.org>
X-Mailer: git-send-email 1.9.1
X-Mailman-Approved-At: Tue, 19 Nov 2019 23:28:07 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Shubhashree Dhar <dhar@codeaurora.org>, linux-kernel@vger.kernel.org,
 abhinavk@codeaurora.org, seanpaul@chromium.org, hoegsberg@chromium.org,
 chandanu@codeaurora.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q3VycmVudCBjb2RlIGFzc3VtZXMgdGhhdCBhbGwgdGhlIGlycXMgcmVnaXN0ZXJzIG9mZnNldHMg
Y2FuIGJlCmFjY2Vzc2VkIGluIGFsbCB0aGUgaHcgcmV2aXNpb25zOyB0aGlzIGlzIG5vdCB0aGUg
Y2FzZSBmb3Igc29tZQp0YXJnZXRzIHRoYXQgc2hvdWxkIG5vdCBhY2Nlc3Mgc29tZSBvZiB0aGUg
aXJxIHJlZ2lzdGVycy4KVGhpcyBjaGFuZ2UgYWRkcyB0aGUgc3VwcG9ydCB0byBzZWxlY3RpdmVs
eSByZW1vdmUgdGhlIGlycXMgdGhhdAphcmUgbm90IHN1cHBvcnRlZCBpbiBzb21lIG9mIHRoZSBo
dyByZXZpc2lvbnMuCgpDaGFuZ2VzIGluIHYxOgogLSBBZGQgc3VwcG9ydCB0byBzZWxlY3RpdmVs
eSByZW1vdmUgdGhlIGh3IGlycXMgdGhhdCBhcmUgbm90CiAgIG5vdCBzdXBwb3J0ZWQuCgpDaGFu
Z2VzIGluIHYyOgogLSBSZW1vdmUgdW5yZWxhdGVkIGNoYW5nZXMuCgpDaGFuZ2VzIGluIHYzOgog
LSBSZW1vdmUgY2hhbmdlLWlkIChTdGVwaGVuIEJveWQpLgogLSBBZGQgY29sb24gaW4gdmFyaWFi
bGUgZGVzY3JpcHRpb24gdG8gbWF0Y2gga2VybmVsLWRvYyAoU3RlcGhlbiBCb3lkKS4KIC0gQ2hh
bmdlIG1hY3JvLXkgd2F5IG9mIHZhcmlhYmxlIGRlc2NyaXB0aW9uIChKb3Jkb24gQ3JvdXNlKS4K
IC0gUmVtb3ZlIHVubmVjZXNzYXJ5IGlmIGNoZWNrcyAoSm9yZG9uIENyb3VzZSkuCiAtIFJlbW92
ZSBleHRyYSBibGFuayBsaW5lIChKb3Jkb24gQ3JvdXNlKS4KClNpZ25lZC1vZmYtYnk6IFNodWJo
YXNocmVlIERoYXIgPGRoYXJAY29kZWF1cm9yYS5vcmc+Ci0tLQogZHJpdmVycy9ncHUvZHJtL21z
bS9kaXNwL2RwdTEvZHB1X2h3X2NhdGFsb2cuYyAgICB8ICAxICsKIGRyaXZlcnMvZ3B1L2RybS9t
c20vZGlzcC9kcHUxL2RwdV9od19jYXRhbG9nLmggICAgfCAgMyArKysKIGRyaXZlcnMvZ3B1L2Ry
bS9tc20vZGlzcC9kcHUxL2RwdV9od19pbnRlcnJ1cHRzLmMgfCAyMiArKysrKysrKysrKysrKysr
LS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfaW50ZXJydXB0cy5o
IHwgIDEgKwogNCBmaWxlcyBjaGFuZ2VkLCAyMSBpbnNlcnRpb25zKCspLCA2IGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jYXRh
bG9nLmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfY2F0YWxvZy5jCmlu
ZGV4IDA0YzhjNDQuLjg4ZjI2NjQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlz
cC9kcHUxL2RwdV9od19jYXRhbG9nLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2Rw
dTEvZHB1X2h3X2NhdGFsb2cuYwpAQCAtNDIxLDYgKzQyMSw3IEBAIHN0YXRpYyB2b2lkIHNkbTg0
NV9jZmdfaW5pdChzdHJ1Y3QgZHB1X21kc3NfY2ZnICpkcHVfY2ZnKQogCQkucmVnX2RtYV9jb3Vu
dCA9IDEsCiAJCS5kbWFfY2ZnID0gc2RtODQ1X3JlZ2RtYSwKIAkJLnBlcmYgPSBzZG04NDVfcGVy
Zl9kYXRhLAorCQkubWRzc19pcnFzID0gMHgzZmYsCiAJfTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2NhdGFsb2cuaCBiL2RyaXZlcnMvZ3B1
L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jYXRhbG9nLmgKaW5kZXggZWM3NmI4NjguLjBmZDNm
NTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19jYXRh
bG9nLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2NhdGFsb2cu
aApAQCAtNjQ2LDYgKzY0Niw3IEBAIHN0cnVjdCBkcHVfcGVyZl9jZmcgewogICogQGRtYV9mb3Jt
YXRzICAgICAgICBTdXBwb3J0ZWQgZm9ybWF0cyBmb3IgZG1hIHBpcGUKICAqIEBjdXJzb3JfZm9y
bWF0cyAgICAgU3VwcG9ydGVkIGZvcm1hdHMgZm9yIGN1cnNvciBwaXBlCiAgKiBAdmlnX2Zvcm1h
dHMgICAgICAgIFN1cHBvcnRlZCBmb3JtYXRzIGZvciB2aWcgcGlwZQorICogQG1kc3NfaXJxczog
ICAgICAgICBCaXRtYXAgd2l0aCB0aGUgaXJxcyBzdXBwb3J0ZWQgYnkgdGhlIHRhcmdldAogICov
CiBzdHJ1Y3QgZHB1X21kc3NfY2ZnIHsKIAl1MzIgaHd2ZXJzaW9uOwpAQCAtNjg0LDYgKzY4NSw4
IEBAIHN0cnVjdCBkcHVfbWRzc19jZmcgewogCXN0cnVjdCBkcHVfZm9ybWF0X2V4dGVuZGVkICpk
bWFfZm9ybWF0czsKIAlzdHJ1Y3QgZHB1X2Zvcm1hdF9leHRlbmRlZCAqY3Vyc29yX2Zvcm1hdHM7
CiAJc3RydWN0IGRwdV9mb3JtYXRfZXh0ZW5kZWQgKnZpZ19mb3JtYXRzOworCisJdW5zaWduZWQg
bG9uZyBtZHNzX2lycXM7CiB9OwogCiBzdHJ1Y3QgZHB1X21kc3NfaHdfY2ZnX2hhbmRsZXIgewpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9kaXNwL2RwdTEvZHB1X2h3X2ludGVycnVw
dHMuYyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19pbnRlcnJ1cHRzLmMK
aW5kZXggOGJmYTdkMC4uMGYyOGYyNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9k
aXNwL2RwdTEvZHB1X2h3X2ludGVycnVwdHMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rp
c3AvZHB1MS9kcHVfaHdfaW50ZXJydXB0cy5jCkBAIC04MDAsOCArODAwLDggQEAgc3RhdGljIHZv
aWQgZHB1X2h3X2ludHJfZGlzcGF0Y2hfaXJxKHN0cnVjdCBkcHVfaHdfaW50ciAqaW50ciwKIAkJ
c3RhcnRfaWR4ID0gcmVnX2lkeCAqIDMyOwogCQllbmRfaWR4ID0gc3RhcnRfaWR4ICsgMzI7CiAK
LQkJaWYgKHN0YXJ0X2lkeCA+PSBBUlJBWV9TSVpFKGRwdV9pcnFfbWFwKSB8fAotCQkJCWVuZF9p
ZHggPiBBUlJBWV9TSVpFKGRwdV9pcnFfbWFwKSkKKwkJaWYgKCF0ZXN0X2JpdChyZWdfaWR4LCAm
aW50ci0+aXJxX21hc2spIHx8CisJCQlzdGFydF9pZHggPj0gQVJSQVlfU0laRShkcHVfaXJxX21h
cCkpCiAJCQljb250aW51ZTsKIAogCQkvKgpAQCAtOTU1LDggKzk1NSwxMSBAQCBzdGF0aWMgaW50
IGRwdV9od19pbnRyX2NsZWFyX2lycXMoc3RydWN0IGRwdV9od19pbnRyICppbnRyKQogCWlmICgh
aW50cikKIAkJcmV0dXJuIC1FSU5WQUw7CiAKLQlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShk
cHVfaW50cl9zZXQpOyBpKyspCi0JCURQVV9SRUdfV1JJVEUoJmludHItPmh3LCBkcHVfaW50cl9z
ZXRbaV0uY2xyX29mZiwgMHhmZmZmZmZmZik7CisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUo
ZHB1X2ludHJfc2V0KTsgaSsrKSB7CisJCWlmKHRlc3RfYml0KGksICZpbnRyLT5pcnFfbWFzaykp
CisJCQlEUFVfUkVHX1dSSVRFKCZpbnRyLT5odywKKwkJCQkJZHB1X2ludHJfc2V0W2ldLmNscl9v
ZmYsIDB4ZmZmZmZmZmYpOworCX0KIAogCS8qIGVuc3VyZSByZWdpc3RlciB3cml0ZXMgZ28gdGhy
b3VnaCAqLwogCXdtYigpOwpAQCAtOTcxLDggKzk3NCwxMSBAQCBzdGF0aWMgaW50IGRwdV9od19p
bnRyX2Rpc2FibGVfaXJxcyhzdHJ1Y3QgZHB1X2h3X2ludHIgKmludHIpCiAJaWYgKCFpbnRyKQog
CQlyZXR1cm4gLUVJTlZBTDsKIAotCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGRwdV9pbnRy
X3NldCk7IGkrKykKLQkJRFBVX1JFR19XUklURSgmaW50ci0+aHcsIGRwdV9pbnRyX3NldFtpXS5l
bl9vZmYsIDB4MDAwMDAwMDApOworCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGRwdV9pbnRy
X3NldCk7IGkrKykgeworCQlpZih0ZXN0X2JpdChpLCAmaW50ci0+aXJxX21hc2spKQorCQkJRFBV
X1JFR19XUklURSgmaW50ci0+aHcsCisJCQkJCWRwdV9pbnRyX3NldFtpXS5lbl9vZmYsIDB4MDAw
MDAwMDApOworCX0KIAogCS8qIGVuc3VyZSByZWdpc3RlciB3cml0ZXMgZ28gdGhyb3VnaCAqLwog
CXdtYigpOwpAQCAtOTkxLDYgKzk5Nyw5IEBAIHN0YXRpYyB2b2lkIGRwdV9od19pbnRyX2dldF9p
bnRlcnJ1cHRfc3RhdHVzZXMoc3RydWN0IGRwdV9od19pbnRyICppbnRyKQogCiAJc3Bpbl9sb2Nr
X2lycXNhdmUoJmludHItPmlycV9sb2NrLCBpcnFfZmxhZ3MpOwogCWZvciAoaSA9IDA7IGkgPCBB
UlJBWV9TSVpFKGRwdV9pbnRyX3NldCk7IGkrKykgeworCQlpZighdGVzdF9iaXQoaSwgJmludHIt
PmlycV9tYXNrKSkKKwkJCWNvbnRpbnVlOworCiAJCS8qIFJlYWQgaW50ZXJydXB0IHN0YXR1cyAq
LwogCQlpbnRyLT5zYXZlX2lycV9zdGF0dXNbaV0gPSBEUFVfUkVHX1JFQUQoJmludHItPmh3LAog
CQkJCWRwdV9pbnRyX3NldFtpXS5zdGF0dXNfb2ZmKTsKQEAgLTExMTUsNiArMTEyNCw3IEBAIHN0
cnVjdCBkcHVfaHdfaW50ciAqZHB1X2h3X2ludHJfaW5pdCh2b2lkIF9faW9tZW0gKmFkZHIsCiAJ
CXJldHVybiBFUlJfUFRSKC1FTk9NRU0pOwogCX0KIAorCWludHItPmlycV9tYXNrID0gbS0+bWRz
c19pcnFzOwogCXNwaW5fbG9ja19pbml0KCZpbnRyLT5pcnFfbG9jayk7CiAKIAlyZXR1cm4gaW50
cjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vZGlzcC9kcHUxL2RwdV9od19pbnRl
cnJ1cHRzLmggYi9kcml2ZXJzL2dwdS9kcm0vbXNtL2Rpc3AvZHB1MS9kcHVfaHdfaW50ZXJydXB0
cy5oCmluZGV4IDRlZGNmNDAuLmZjOWM5ODYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9t
c20vZGlzcC9kcHUxL2RwdV9od19pbnRlcnJ1cHRzLmgKKysrIGIvZHJpdmVycy9ncHUvZHJtL21z
bS9kaXNwL2RwdTEvZHB1X2h3X2ludGVycnVwdHMuaApAQCAtMTg3LDYgKzE4Nyw3IEBAIHN0cnVj
dCBkcHVfaHdfaW50ciB7CiAJdTMyICpzYXZlX2lycV9zdGF0dXM7CiAJdTMyIGlycV9pZHhfdGJs
X3NpemU7CiAJc3BpbmxvY2tfdCBpcnFfbG9jazsKKwl1bnNpZ25lZCBsb25nIGlycV9tYXNrOwog
fTsKIAogLyoqCi0tIAoxLjkuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
ZHJpLWRldmVs
