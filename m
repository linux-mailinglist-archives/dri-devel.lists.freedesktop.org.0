Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E8AADCB541
	for <lists+dri-devel@lfdr.de>; Fri,  4 Oct 2019 09:39:46 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 27C7B6EAD2;
	Fri,  4 Oct 2019 07:38:55 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 586486E064
 for <dri-devel@lists.freedesktop.org>; Thu,  3 Oct 2019 20:20:14 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id D3484B052;
 Thu,  3 Oct 2019 20:20:12 +0000 (UTC)
From: Davidlohr Bueso <dave@stgolabs.net>
To: akpm@linux-foundation.org
Subject: [PATCH 02/11] lib/interval-tree: add an equivalent tree with [a,
 b) intervals
Date: Thu,  3 Oct 2019 13:18:49 -0700
Message-Id: <20191003201858.11666-3-dave@stgolabs.net>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20191003201858.11666-1-dave@stgolabs.net>
References: <20191003201858.11666-1-dave@stgolabs.net>
X-Mailman-Approved-At: Fri, 04 Oct 2019 07:38:50 +0000
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: dave@stgolabs.net, Davidlohr Bueso <dbueso@suse.de>, peterz@infradead.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 linux-mm@kvack.org, walken@google.com, linux-rdma@vger.kernel.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V2hpbGUgdGhlIGtlcm5lbCdzIGludGVydmFsIHRyZWUgaW1wbGVtZW50YXRpb24gdXNlcyBjbG9z
ZWQgaW50ZXJ2YWxzLCBhbGwKdXNlcnMgKHdpdGggdGhlIGV4Y2VwdGlvbiBvZiBxdWVyeSBzdGFi
YmluZykgcmVhbGx5IHdhbnQgaGFsZiBjbG9zZWQgaW50ZXJ2YWxzLApzcGVjaWZpY2FsbHkgW2Es
IGIpLCBhbmQgd2lsbCBleHBsaWNpdGx5IGNvcnJlY3QgdGhpcyBiZWZvcmUgY2FsbGluZyB0aGUg
dHJlZSBhcGkuCgpUaGlzIHBhdGNoIHNpbXBseSBkdXBsaWNhdGVzIHRoZSBpbmNsdWRlL2xpbnV4
aW50ZXJ2YWxfdHJlZV9nZW5lcmljLmggaGVhZGVyIGludG8KYSBpbnRlcnZhbF90cmVlX2dlbi5o
IChnZW4gYXMgaW4gJ2dlbmVyaWMnIGFuZCAnZ2VuZXJhdGUnIDotKSB3aXRoIHR3byBkaWZmZXJl
bmNlczoKCi0gVGhlICdsYXN0JyBlbmRwb2ludCBpcyByZW5hbWVkICdlbmQnOyB0aGlzIGlzIHNv
bWV0aGluZyBsaWIvaW50ZXJ2YWxfdHJlZS5jIHdpbGwKYWxzbyBuZWVkIHRvIHVwZGF0ZSwgYnV0
IHRoYXQgaXMgbGF0ZXIgaW4gdGhlIHNlcmllcy4KCi0gVGhlIGxvb2t1cCBjYWxscyBoYXZlIGJl
ZW4gYWRhcHRlZCBhY2NvcmRpbmdseSwgc3VjaCB0aGF0IHVzZXJzIG5lZWQgbm90IG5lZWQgdG8K
ZG8gdGhlIHN1YnRyYWN0aW9uIGJ5IG9uZSBmaXh1cC4KCk5vIHVzZXJzIGFyZSBwb3J0ZWQgb3Zl
ciBpbiB0aGlzIHBhdGNoLgoKU2lnbmVkLW9mZi1ieTogRGF2aWRsb2hyIEJ1ZXNvIDxkYnVlc29A
c3VzZS5kZT4KLS0tCiBpbmNsdWRlL2xpbnV4L2ludGVydmFsX3RyZWVfZ2VuLmggfCAxNzkgKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIDEgZmlsZSBjaGFuZ2VkLCAxNzkg
aW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGluY2x1ZGUvbGludXgvaW50ZXJ2YWxf
dHJlZV9nZW4uaAoKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvaW50ZXJ2YWxfdHJlZV9nZW4u
aCBiL2luY2x1ZGUvbGludXgvaW50ZXJ2YWxfdHJlZV9nZW4uaApuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwMDAwMDAuLjVkNDQ2YzBiZDg5YQotLS0gL2Rldi9udWxsCisrKyBiL2lu
Y2x1ZGUvbGludXgvaW50ZXJ2YWxfdHJlZV9nZW4uaApAQCAtMCwwICsxLDE3OSBAQAorLyogU1BE
WC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIgKi8KKy8qCisgIEludGVydmFs
IFRyZWVzCisgIChDKSAyMDEyICBNaWNoZWwgTGVzcGluYXNzZSA8d2Fsa2VuQGdvb2dsZS5jb20+
CisqLworCisjaW5jbHVkZSA8bGludXgvcmJ0cmVlX2F1Z21lbnRlZC5oPgorCisvKgorICogVGVt
cGxhdGUgZm9yIGltcGxlbWVudGluZyBpbnRlcnZhbCB0cmVlcworICoKKyAqIElUU1RSVUNUOiAg
IHN0cnVjdCB0eXBlIG9mIHRoZSBpbnRlcnZhbCB0cmVlIG5vZGVzCisgKiBJVFJCOiAgICAgICBu
YW1lIG9mIHN0cnVjdCByYl9ub2RlIGZpZWxkIHdpdGhpbiBJVFNUUlVDVAorICogSVRUWVBFOiAg
ICAgdHlwZSBvZiB0aGUgaW50ZXJ2YWwgZW5kcG9pbnRzCisgKiBJVFNVQlRSRUU6ICBuYW1lIG9m
IElUVFlQRSBmaWVsZCB3aXRoaW4gSVRTVFJVQ1QgaG9sZGluZyBlbmQtaW4tc3VidHJlZQorICog
SVRTVEFSVChuKTogc3RhcnQgZW5kcG9pbnQgb2YgSVRTVFJVQ1Qgbm9kZSBuCisgKiBJVEVORChu
KTogICBlbmQvbGFzdCBlbmRwb2ludCBvZiBJVFNUUlVDVCBub2RlIG4KKyAqIElUU1RBVElDOiAg
ICdzdGF0aWMnIG9yIGVtcHR5CisgKiBJVFBSRUZJWDogICBwcmVmaXggdG8gdXNlIGZvciB0aGUg
aW5saW5lIHRyZWUgZGVmaW5pdGlvbnMKKyAqCisgKiBOb3RlIC0gYmVmb3JlIHVzaW5nIHRoaXMs
IHBsZWFzZSBjb25zaWRlciBpZiBnZW5lcmljIHZlcnNpb24KKyAqIChpbnRlcnZhbF90cmVlLmgp
IHdvdWxkIHdvcmsgZm9yIHlvdS4uLgorICovCisKKyNkZWZpbmUgSU5URVJWQUxfVFJFRV9ERUZJ
TkUoSVRTVFJVQ1QsIElUUkIsIElUVFlQRSwgSVRTVUJUUkVFLAkJICAgICAgXAorCQkJICAgICBJ
VFNUQVJULCBJVEVORCwgSVRTVEFUSUMsIElUUFJFRklYKQkgICAgICBcCisJCQkJCQkJCQkgICAg
ICBcCisvKiBDYWxsYmFja3MgZm9yIGF1Z21lbnRlZCByYnRyZWUgaW5zZXJ0IGFuZCByZW1vdmUg
Ki8JCQkgICAgICBcCisJCQkJCQkJCQkgICAgICBcCitSQl9ERUNMQVJFX0NBTExCQUNLU19NQVgo
c3RhdGljLCBJVFBSRUZJWCAjIyBfYXVnbWVudCwJCQkgICAgICBcCisJCQkgSVRTVFJVQ1QsIElU
UkIsIElUVFlQRSwgSVRTVUJUUkVFLCBJVEVORCkJICAgICAgXAorCQkJCQkJCQkJICAgICAgXAor
LyogSW5zZXJ0IC8gcmVtb3ZlIGludGVydmFsIG5vZGVzIGZyb20gdGhlIHRyZWUgKi8JCQkgICAg
ICBcCisJCQkJCQkJCQkgICAgICBcCitJVFNUQVRJQyB2b2lkIElUUFJFRklYICMjIF9pbnNlcnQo
SVRTVFJVQ1QgKm5vZGUsCQkJICAgICAgXAorCQkJCSAgc3RydWN0IHJiX3Jvb3RfY2FjaGVkICpy
b290KQkJICAgICAgXAorewkJCQkJCQkJCSAgICAgIFwKKwlzdHJ1Y3QgcmJfbm9kZSAqKmxpbmsg
PSAmcm9vdC0+cmJfcm9vdC5yYl9ub2RlLCAqcmJfcGFyZW50ID0gTlVMTDsgICAgXAorCUlUVFlQ
RSBzdGFydCA9IElUU1RBUlQobm9kZSksIGVuZCA9IElURU5EKG5vZGUpOwkJICAgICAgXAorCUlU
U1RSVUNUICpwYXJlbnQ7CQkJCQkJICAgICAgXAorCWJvb2wgbGVmdG1vc3QgPSB0cnVlOwkJCQkJ
CSAgICAgIFwKKwkJCQkJCQkJCSAgICAgIFwKKwl3aGlsZSAoKmxpbmspIHsJCQkJCQkJICAgICAg
XAorCQlyYl9wYXJlbnQgPSAqbGluazsJCQkJCSAgICAgIFwKKwkJcGFyZW50ID0gcmJfZW50cnko
cmJfcGFyZW50LCBJVFNUUlVDVCwgSVRSQik7CQkgICAgICBcCisJCWlmIChwYXJlbnQtPklUU1VC
VFJFRSA8IGVuZCkJCQkJICAgICAgXAorCQkJcGFyZW50LT5JVFNVQlRSRUUgPSBlbmQ7CQkJICAg
ICAgXAorCQlpZiAoc3RhcnQgPCBJVFNUQVJUKHBhcmVudCkpCQkJCSAgICAgIFwKKwkJCWxpbmsg
PSAmcGFyZW50LT5JVFJCLnJiX2xlZnQ7CQkJICAgICAgXAorCQllbHNlIHsJCQkJCQkJICAgICAg
XAorCQkJbGluayA9ICZwYXJlbnQtPklUUkIucmJfcmlnaHQ7CQkJICAgICAgXAorCQkJbGVmdG1v
c3QgPSBmYWxzZTsJCQkJICAgICAgXAorCQl9CQkJCQkJCSAgICAgIFwKKwl9CQkJCQkJCQkgICAg
ICBcCisJCQkJCQkJCQkgICAgICBcCisJbm9kZS0+SVRTVUJUUkVFID0gZW5kOwkJCQkJCSAgICAg
IFwKKwlyYl9saW5rX25vZGUoJm5vZGUtPklUUkIsIHJiX3BhcmVudCwgbGluayk7CQkJICAgICAg
XAorCXJiX2luc2VydF9hdWdtZW50ZWRfY2FjaGVkKCZub2RlLT5JVFJCLCByb290LAkJCSAgICAg
IFwKKwkJCQkgICBsZWZ0bW9zdCwgJklUUFJFRklYICMjIF9hdWdtZW50KTsJICAgICAgXAorfQkJ
CQkJCQkJCSAgICAgIFwKKwkJCQkJCQkJCSAgICAgIFwKK0lUU1RBVElDIHZvaWQgSVRQUkVGSVgg
IyMgX3JlbW92ZShJVFNUUlVDVCAqbm9kZSwJCQkgICAgICBcCisJCQkJICBzdHJ1Y3QgcmJfcm9v
dF9jYWNoZWQgKnJvb3QpCQkgICAgICBcCit7CQkJCQkJCQkJICAgICAgXAorCXJiX2VyYXNlX2F1
Z21lbnRlZF9jYWNoZWQoJm5vZGUtPklUUkIsIHJvb3QsICZJVFBSRUZJWCAjIyBfYXVnbWVudCk7
ICBcCit9CQkJCQkJCQkJICAgICAgXAorCQkJCQkJCQkJICAgICAgXAorLyoJCQkJCQkJCQkgICAg
ICBcCisgKiBJdGVyYXRlIG92ZXIgaW50ZXJ2YWxzIGludGVyc2VjdGluZyBbc3RhcnQ7ZW5kKQkJ
CSAgICAgIFwKKyAqCQkJCQkJCQkJICAgICAgXAorICogTm90ZSB0aGF0IGEgbm9kZSdzIGludGVy
dmFsIGludGVyc2VjdHMgW3N0YXJ0O2VuZCkgaWZmOgkJICAgICAgXAorICogICBDb25kMTogSVRT
VEFSVChub2RlKSA8IGVuZAkJCQkJCSAgICAgIFwKKyAqIGFuZAkJCQkJCQkJCSAgICAgIFwKKyAq
ICAgQ29uZDI6IHN0YXJ0IDwgSVRFTkQobm9kZSkJCQkJCQkgICAgICBcCisgKi8JCQkJCQkJCQkg
ICAgICBcCisJCQkJCQkJCQkgICAgICBcCitzdGF0aWMgSVRTVFJVQ1QgKgkJCQkJCQkgICAgICBc
CitJVFBSRUZJWCAjIyBfc3VidHJlZV9zZWFyY2goSVRTVFJVQ1QgKm5vZGUsIElUVFlQRSBzdGFy
dCwgSVRUWVBFIGVuZCkJICAgICAgXAorewkJCQkJCQkJCSAgICAgIFwKKwl3aGlsZSAodHJ1ZSkg
ewkJCQkJCQkgICAgICBcCisJCS8qCQkJCQkJCSAgICAgIFwKKwkJICogTG9vcCBpbnZhcmlhbnQ6
IHN0YXJ0IDw9IG5vZGUtPklUU1VCVFJFRQkJICAgICAgXAorCQkgKiAoQ29uZDIgaXMgc2F0aXNm
aWVkIGJ5IG9uZSBvZiB0aGUgc3VidHJlZSBub2RlcykJICAgICAgXAorCQkgKi8JCQkJCQkJICAg
ICAgXAorCQlpZiAobm9kZS0+SVRSQi5yYl9sZWZ0KSB7CQkJCSAgICAgIFwKKwkJCUlUU1RSVUNU
ICpsZWZ0ID0gcmJfZW50cnkobm9kZS0+SVRSQi5yYl9sZWZ0LAkgICAgICBcCisJCQkJCQkgIElU
U1RSVUNULCBJVFJCKTsJICAgICAgXAorCQkJaWYgKHN0YXJ0IDwgbGVmdC0+SVRTVUJUUkVFKSB7
CQkJICAgICAgXAorCQkJCS8qCQkJCQkgICAgICBcCisJCQkJICogU29tZSBub2RlcyBpbiBsZWZ0
IHN1YnRyZWUgc2F0aXNmeSBDb25kMi4gIFwKKwkJCQkgKiBJdGVyYXRlIHRvIGZpbmQgdGhlIGxl
ZnRtb3N0IHN1Y2ggbm9kZSBOLiAgXAorCQkJCSAqIElmIGl0IGFsc28gc2F0aXNmaWVzIENvbmQx
LCB0aGF0J3MgdGhlICAgICBcCisJCQkJICogbWF0Y2ggd2UgYXJlIGxvb2tpbmcgZm9yLiBPdGhl
cndpc2UsIHRoZXJlIFwKKwkJCQkgKiBpcyBubyBtYXRjaGluZyBpbnRlcnZhbCBhcyBub2RlcyB0
byB0aGUgICAgXAorCQkJCSAqIHJpZ2h0IG9mIE4gY2FuJ3Qgc2F0aXNmeSBDb25kMSBlaXRoZXIu
ICAgICBcCisJCQkJICovCQkJCQkgICAgICBcCisJCQkJbm9kZSA9IGxlZnQ7CQkJCSAgICAgIFwK
KwkJCQljb250aW51ZTsJCQkJICAgICAgXAorCQkJfQkJCQkJCSAgICAgIFwKKwkJfQkJCQkJCQkg
ICAgICBcCisJCWlmIChJVFNUQVJUKG5vZGUpIDwgZW5kKSB7CQkvKiBDb25kMSAqLwkgICAgICBc
CisJCQlpZiAoc3RhcnQgPCBJVEVORChub2RlKSkJLyogQ29uZDIgKi8JICAgICAgXAorCQkJCXJl
dHVybiBub2RlOwkvKiBub2RlIGlzIGxlZnRtb3N0IG1hdGNoICovICBcCisJCQlpZiAobm9kZS0+
SVRSQi5yYl9yaWdodCkgewkJCSAgICAgIFwKKwkJCQlub2RlID0gcmJfZW50cnkobm9kZS0+SVRS
Qi5yYl9yaWdodCwJICAgICAgXAorCQkJCQkJSVRTVFJVQ1QsIElUUkIpOwkgICAgICBcCisJCQkJ
aWYgKHN0YXJ0IDw9IG5vZGUtPklUU1VCVFJFRSkJCSAgICAgIFwKKwkJCQkJY29udGludWU7CQkJ
ICAgICAgXAorCQkJfQkJCQkJCSAgICAgIFwKKwkJfQkJCQkJCQkgICAgICBcCisJCXJldHVybiBO
VUxMOwkvKiBObyBtYXRjaCAqLwkJCQkgICAgICBcCisJfQkJCQkJCQkJICAgICAgXAorfQkJCQkJ
CQkJCSAgICAgIFwKKwkJCQkJCQkJCSAgICAgIFwKK0lUU1RBVElDIElUU1RSVUNUICoJCQkJCQkJ
ICAgICAgXAorSVRQUkVGSVggIyMgX2l0ZXJfZmlyc3Qoc3RydWN0IHJiX3Jvb3RfY2FjaGVkICpy
b290LAkJCSAgICAgIFwKKwkJCUlUVFlQRSBzdGFydCwgSVRUWVBFIGVuZCkJCQkgICAgICBcCit7
CQkJCQkJCQkJICAgICAgXAorCUlUU1RSVUNUICpub2RlLCAqbGVmdG1vc3Q7CQkJCQkgICAgICBc
CisJCQkJCQkJCQkgICAgICBcCisJaWYgKCFyb290LT5yYl9yb290LnJiX25vZGUpCQkJCQkgICAg
ICBcCisJCXJldHVybiBOVUxMOwkJCQkJCSAgICAgIFwKKwkJCQkJCQkJCSAgICAgIFwKKwkvKgkJ
CQkJCQkJICAgICAgXAorCSAqIEZhc3RwYXRoIHJhbmdlIGludGVyc2VjdGlvbi9vdmVybGFwIHdo
ZXJlIHdlIGNvbXBhcmUgdGhlCSAgICAgIFwKKwkgKiBzbWFsbGVzdCAnc3RhcnQnIGFuZCBsYXJn
ZXN0ICdlbmQnIGluIHRoZSB0cmVlLiBGb3IgdGhlIGxhdHRlciwgICAgXAorCSAqIHdlIHJlbHkg
b24gdGhlIHJvb3Qgbm9kZSwgd2hpY2ggYnkgYXVnbWVudGVkIGludGVydmFsIHRyZWUJICAgICAg
XAorCSAqIHByb3BlcnR5LCBob2xkcyB0aGUgbGFyZ2VzdCB2YWx1ZSBpbiBpdHMgZW5kLWluLXN1
YnRyZWUuCSAgICAgIFwKKwkgKiBUaGlzIGFsbG93cyBtaXRpZ2F0aW5nIHNvbWUgb2YgdGhlIHRy
ZWUgd2FsayBvdmVyaGVhZCBmb3IJICAgICAgXAorCSAqIGZvciBub24taW50ZXJzZWN0aW5nIHJh
bmdlcywgbWFpbnRhaW5lZCBhbmQgY29uc3VsdGVkIGluIE8oMSkuICAgICBcCisJICovCQkJCQkJ
CQkgICAgICBcCisJbm9kZSA9IHJiX2VudHJ5KHJvb3QtPnJiX3Jvb3QucmJfbm9kZSwgSVRTVFJV
Q1QsIElUUkIpOwkJICAgICAgXAorCWlmIChub2RlLT5JVFNVQlRSRUUgPD0gc3RhcnQpCS8qICFD
b25kMiAqLwkJCSAgICAgIFwKKwkJcmV0dXJuIE5VTEw7CQkJCQkJICAgICAgXAorCQkJCQkJCQkJ
ICAgICAgXAorCWxlZnRtb3N0ID0gcmJfZW50cnkocm9vdC0+cmJfbGVmdG1vc3QsIElUU1RSVUNU
LCBJVFJCKTsJCSAgICAgIFwKKwlpZiAoSVRTVEFSVChsZWZ0bW9zdCkgPj0gZW5kKQkvKiAhQ29u
ZDEgKi8JCQkgICAgICBcCisJCXJldHVybiBOVUxMOwkJCQkJCSAgICAgIFwKKwkJCQkJCQkJCSAg
ICAgIFwKKwlyZXR1cm4gSVRQUkVGSVggIyMgX3N1YnRyZWVfc2VhcmNoKG5vZGUsIHN0YXJ0LCBl
bmQpOwkJICAgICAgXAorfQkJCQkJCQkJCSAgICAgIFwKKwkJCQkJCQkJCSAgICAgIFwKK0lUU1RB
VElDIElUU1RSVUNUICoJCQkJCQkJICAgICAgXAorSVRQUkVGSVggIyMgX2l0ZXJfbmV4dChJVFNU
UlVDVCAqbm9kZSwgSVRUWVBFIHN0YXJ0LCBJVFRZUEUgZW5kKQkgICAgICBcCit7CQkJCQkJCQkJ
ICAgICAgXAorCXN0cnVjdCByYl9ub2RlICpyYiA9IG5vZGUtPklUUkIucmJfcmlnaHQsICpwcmV2
OwkJICAgICAgXAorCQkJCQkJCQkJICAgICAgXAorCXdoaWxlICh0cnVlKSB7CQkJCQkJCSAgICAg
IFwKKwkJLyoJCQkJCQkJICAgICAgXAorCQkgKiBMb29wIGludmFyaWFudHM6CQkJCQkgICAgICBc
CisJCSAqICAgQ29uZDE6IElUU1RBUlQobm9kZSkgPCBlbmQJCQkJICAgICAgXAorCQkgKiAgIHJi
ID09IG5vZGUtPklUUkIucmJfcmlnaHQJCQkJICAgICAgXAorCQkgKgkJCQkJCQkgICAgICBcCisJ
CSAqIEZpcnN0LCBzZWFyY2ggcmlnaHQgc3VidHJlZSBpZiBzdWl0YWJsZQkJICAgICAgXAorCQkg
Ki8JCQkJCQkJICAgICAgXAorCQlpZiAocmIpIHsJCQkJCQkgICAgICBcCisJCQlJVFNUUlVDVCAq
cmlnaHQgPSByYl9lbnRyeShyYiwgSVRTVFJVQ1QsIElUUkIpOwkgICAgICBcCisJCQlpZiAoc3Rh
cnQgPCByaWdodC0+SVRTVUJUUkVFKQkJCSAgICAgIFwKKwkJCQlyZXR1cm4gSVRQUkVGSVggIyMg
X3N1YnRyZWVfc2VhcmNoKHJpZ2h0LCAgICAgXAorCQkJCQkJCQlzdGFydCwgZW5kKTsgXAorCQl9
CQkJCQkJCSAgICAgIFwKKwkJCQkJCQkJCSAgICAgIFwKKwkJLyogTW92ZSB1cCB0aGUgdHJlZSB1
bnRpbCB3ZSBjb21lIGZyb20gYSBub2RlJ3MgbGVmdCBjaGlsZCAqLyBcCisJCWRvIHsJCQkJCQkJ
ICAgICAgXAorCQkJcmIgPSByYl9wYXJlbnQoJm5vZGUtPklUUkIpOwkJCSAgICAgIFwKKwkJCWlm
ICghcmIpCQkJCQkgICAgICBcCisJCQkJcmV0dXJuIE5VTEw7CQkJCSAgICAgIFwKKwkJCXByZXYg
PSAmbm9kZS0+SVRSQjsJCQkJICAgICAgXAorCQkJbm9kZSA9IHJiX2VudHJ5KHJiLCBJVFNUUlVD
VCwgSVRSQik7CQkgICAgICBcCisJCQlyYiA9IG5vZGUtPklUUkIucmJfcmlnaHQ7CQkJICAgICAg
XAorCQl9IHdoaWxlIChwcmV2ID09IHJiKTsJCQkJCSAgICAgIFwKKwkJCQkJCQkJCSAgICAgIFwK
KwkJLyogQ2hlY2sgaWYgdGhlIG5vZGUgaW50ZXJzZWN0cyBbc3RhcnQ7ZW5kKSAqLwkJICAgICAg
XAorCQlpZiAoZW5kIDw9IElUU1RBUlQobm9kZSkpCQkvKiAhQ29uZDEgKi8JICAgICAgXAorCQkJ
cmV0dXJuIE5VTEw7CQkJCQkgICAgICBcCisJCWVsc2UgaWYgKHN0YXJ0IDwgSVRFTkQobm9kZSkp
CQkvKiBDb25kMiAqLwkgICAgICBcCisJCQlyZXR1cm4gbm9kZTsJCQkJCSAgICAgIFwKKwl9CQkJ
CQkJCQkgICAgICBcCit9Ci0tIAoyLjE2LjQKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL2RyaS1kZXZlbA==
