Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0804035E0A2
	for <lists+dri-devel@lfdr.de>; Tue, 13 Apr 2021 15:52:55 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 26B1C89CA8;
	Tue, 13 Apr 2021 13:52:53 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x52b.google.com (mail-ed1-x52b.google.com
 [IPv6:2a00:1450:4864:20::52b])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 450FD89CA8
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Apr 2021 13:52:51 +0000 (UTC)
Received: by mail-ed1-x52b.google.com with SMTP id z1so19502491edb.8
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Apr 2021 06:52:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=8k9ZhkMxc1SjLU0fyBbGYPZM9N49dIGNLQiqvcJll08=;
 b=Ljq+U937e9wxE1BPgW3q9rUeYoGUVFg5RKGq96VnI1Y1cDr383WEon5B1i+8eulVcJ
 ck1QsTCUw6Do5rl+XEfdd0EvlKpTAU01GwhxyUCaYqdBRcCGs1CV+U/8dYn3SILQln73
 I196a1OztzKV6VSOcUKlXSYgnFkCffaXTpWZYv+05FFbH4oOoMio8ff0DEiVDHnWpgQ4
 fZHojpNcI6ZK1/q6G2W4ai1yA4MKEY+gBSmaTwKGq/FA6uFi055l/hqjCRFttR4Cq1yB
 5dlXbMBe6p66FOri/XQDBRx6z7KaItiaY+W4+6Z4/y3PgY/dzIS6X6aDMKHLqS9M1Xba
 GenA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=8k9ZhkMxc1SjLU0fyBbGYPZM9N49dIGNLQiqvcJll08=;
 b=V34fhuXu8hxzluL1xnPak+3Zn4aXsleGSZjC7IcVcsFK7LGaJbNdXD7sWTKX8z/A+g
 RbLZmdXTxKXRwXxpg23J3jsuWTuyFf1bQyp7tmVKAOhwMVj5Sxzt/QH14ErDlv/KspiB
 /52jZPZmBdKTuglESY5ZzdQrOu0t0dwZS5eLw+ivCRNERs+en+y4Q3v7lAW/zvFb+Njp
 dC+rtN1KNdVycIVplEo2uwvbL4eQmiudpg/igRE7f9B+LN0OU5oef66/DM12QOd8lU6d
 1qWnvpK5/RpjA5iBAlR10BuejiGwYaiD99WQwpFoR1BafFUfl8pt6shG7W8VGjheHfWH
 9nyQ==
X-Gm-Message-State: AOAM533gptFYONCgwsGylX5XkPzvS3VLyRB05dGbHZcYWRq/WXHHFY6k
 SuNx8ROow+PbY1sBGOoMx4xh0ijxWqE=
X-Google-Smtp-Source: ABdhPJxDv2+ydmbM1xiVyUdwYZy7Mzt8KfcL+ApvhGp/22DRE+Kbg6A/DyZGt1JwL66ez8dZFoh9BQ==
X-Received: by 2002:aa7:db14:: with SMTP id t20mr22982222eds.311.1618321969944; 
 Tue, 13 Apr 2021 06:52:49 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:a061:9101:8418:4794])
 by smtp.gmail.com with ESMTPSA id m10sm491465ejc.32.2021.04.13.06.52.48
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 13 Apr 2021 06:52:49 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 1/7] drm/nouveau: use bo->base.size instead of mem->num_pages
Date: Tue, 13 Apr 2021 15:52:42 +0200
Message-Id: <20210413135248.1266-1-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: daniel.vetter@ffwll.ch, thomas.hellstrom@linux.intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

Q2hhbmdlIGEgY291cGxlIG9mIGNhc2VzIHdoZXJlIGl0IG1ha2VzIG1vcmUgc2Vuc2UgdG8gdXNl
IHRoZSBiYXNlIHNpemUKaW5zdGVhZCBvZiB0aGUgbnVtYmVyIG9mIHBhZ2VzIGluIHRoZSByZXNv
dXJjZS4KClNpZ25lZC1vZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdA
YW1kLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMgICAgfCA5
ICsrKystLS0tLQogZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9mYmNvbi5jIHwgNCAr
Ky0tCiBkcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2dlbS5jICAgfCA0ICsrLS0KIDMg
ZmlsZXMgY2hhbmdlZCwgOCBpbnNlcnRpb25zKCspLCA5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9ub3V2ZWF1L25vdXZlYXVfYm8uYwppbmRleCAyZDVkNjhmYzE1YzIuLjZkYmNiZTJmYTU1ZiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYwpAQCAtMzAyLDcgKzMwMiw2IEBAIG5v
dXZlYXVfYm9faW5pdChzdHJ1Y3Qgbm91dmVhdV9ibyAqbnZibywgdTY0IHNpemUsIGludCBhbGln
biwgdTMyIGRvbWFpbiwKIAlpbnQgdHlwZSA9IHNnID8gdHRtX2JvX3R5cGVfc2cgOiB0dG1fYm9f
dHlwZV9kZXZpY2U7CiAJaW50IHJldDsKIAotCW52Ym8tPmJvLm1lbS5udW1fcGFnZXMgPSBzaXpl
ID4+IFBBR0VfU0hJRlQ7CiAJbm91dmVhdV9ib19wbGFjZW1lbnRfc2V0KG52Ym8sIGRvbWFpbiwg
MCk7CiAJSU5JVF9MSVNUX0hFQUQoJm52Ym8tPmlvX3Jlc2VydmVfbHJ1KTsKIApAQCAtMzY0LDEy
ICszNjMsMTIgQEAgc3RhdGljIHZvaWQKIHNldF9wbGFjZW1lbnRfcmFuZ2Uoc3RydWN0IG5vdXZl
YXVfYm8gKm52Ym8sIHVpbnQzMl90IGRvbWFpbikKIHsKIAlzdHJ1Y3Qgbm91dmVhdV9kcm0gKmRy
bSA9IG5vdXZlYXVfYmRldihudmJvLT5iby5iZGV2KTsKLQl1MzIgdnJhbV9wYWdlcyA9IGRybS0+
Y2xpZW50LmRldmljZS5pbmZvLnJhbV9zaXplID4+IFBBR0VfU0hJRlQ7CisJdTY0IHZyYW1fc2l6
ZSA9IGRybS0+Y2xpZW50LmRldmljZS5pbmZvLnJhbV9zaXplOwogCXVuc2lnbmVkIGksIGZwZm4s
IGxwZm47CiAKIAlpZiAoZHJtLT5jbGllbnQuZGV2aWNlLmluZm8uZmFtaWx5ID09IE5WX0RFVklD
RV9JTkZPX1YwX0NFTFNJVVMgJiYKIAkgICAgbnZiby0+bW9kZSAmJiAoZG9tYWluICYgTk9VVkVB
VV9HRU1fRE9NQUlOX1ZSQU0pICYmCi0JICAgIG52Ym8tPmJvLm1lbS5udW1fcGFnZXMgPCB2cmFt
X3BhZ2VzIC8gNCkgeworCSAgICBudmJvLT5iby5iYXNlLnNpemUgPCB2cmFtX3NpemUgLyA0KSB7
CiAJCS8qCiAJCSAqIE1ha2Ugc3VyZSB0aGF0IHRoZSBjb2xvciBhbmQgZGVwdGggYnVmZmVycyBh
cmUgaGFuZGxlZAogCQkgKiBieSBpbmRlcGVuZGVudCBtZW1vcnkgY29udHJvbGxlciB1bml0cy4g
VXAgdG8gYSA5eApAQCAtMzc3LDExICszNzYsMTEgQEAgc2V0X3BsYWNlbWVudF9yYW5nZShzdHJ1
Y3Qgbm91dmVhdV9ibyAqbnZibywgdWludDMyX3QgZG9tYWluKQogCQkgKiBhdCB0aGUgc2FtZSB0
aW1lLgogCQkgKi8KIAkJaWYgKG52Ym8tPnpldGEpIHsKLQkJCWZwZm4gPSB2cmFtX3BhZ2VzIC8g
MjsKKwkJCWZwZm4gPSAodnJhbV9zaXplIC8gMikgPj4gUEFHRV9TSElGVDsKIAkJCWxwZm4gPSB+
MDsKIAkJfSBlbHNlIHsKIAkJCWZwZm4gPSAwOwotCQkJbHBmbiA9IHZyYW1fcGFnZXMgLyAyOwor
CQkJbHBmbiA9ICh2cmFtX3NpemUgLyAyKSA+PiBQQUdFX1NISUZUOwogCQl9CiAJCWZvciAoaSA9
IDA7IGkgPCBudmJvLT5wbGFjZW1lbnQubnVtX3BsYWNlbWVudDsgKytpKSB7CiAJCQludmJvLT5w
bGFjZW1lbnRzW2ldLmZwZm4gPSBmcGZuOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL25v
dXZlYXUvbm91dmVhdV9mYmNvbi5jIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9m
YmNvbi5jCmluZGV4IDRmYzBmYTY5NjQ2MS4uOTNhYzc4YmRhNzUwIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2ZiY29uLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L25vdXZlYXUvbm91dmVhdV9mYmNvbi5jCkBAIC0zNzksMTAgKzM3OSwxMCBAQCBub3V2ZWF1X2Zi
Y29uX2NyZWF0ZShzdHJ1Y3QgZHJtX2ZiX2hlbHBlciAqaGVscGVyLAogCQkJICAgICAgRkJJTkZP
X0hXQUNDRUxfSU1BR0VCTElUOwogCWluZm8tPmZib3BzID0gJm5vdXZlYXVfZmJjb25fc3dfb3Bz
OwogCWluZm8tPmZpeC5zbWVtX3N0YXJ0ID0gbnZiby0+Ym8ubWVtLmJ1cy5vZmZzZXQ7Ci0JaW5m
by0+Zml4LnNtZW1fbGVuID0gbnZiby0+Ym8ubWVtLm51bV9wYWdlcyA8PCBQQUdFX1NISUZUOwor
CWluZm8tPmZpeC5zbWVtX2xlbiA9IG52Ym8tPmJvLmJhc2Uuc2l6ZTsKIAogCWluZm8tPnNjcmVl
bl9iYXNlID0gbnZib19rbWFwX29ial9pb3ZpcnR1YWwobnZibyk7Ci0JaW5mby0+c2NyZWVuX3Np
emUgPSBudmJvLT5iby5tZW0ubnVtX3BhZ2VzIDw8IFBBR0VfU0hJRlQ7CisJaW5mby0+c2NyZWVu
X3NpemUgPSBudmJvLT5iby5iYXNlLnNpemU7CiAKIAlkcm1fZmJfaGVscGVyX2ZpbGxfaW5mbyhp
bmZvLCAmZmJjb24tPmhlbHBlciwgc2l6ZXMpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vbm91dmVhdS9ub3V2ZWF1X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVh
dV9nZW0uYwppbmRleCBjODhjYmI4NWYxMDEuLmE3MGU4MjQxM2ZhNyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9nZW0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
bm91dmVhdS9ub3V2ZWF1X2dlbS5jCkBAIC0yNTMsNyArMjUzLDcgQEAgbm91dmVhdV9nZW1faW5m
byhzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwgc3RydWN0IGRybV9nZW1fb2JqZWN0ICpnZW0s
CiAJCXJlcC0+b2Zmc2V0ID0gdm1hLT5hZGRyOwogCX0KIAotCXJlcC0+c2l6ZSA9IG52Ym8tPmJv
Lm1lbS5udW1fcGFnZXMgPDwgUEFHRV9TSElGVDsKKwlyZXAtPnNpemUgPSBudmJvLT5iby5iYXNl
LnNpemU7CiAJcmVwLT5tYXBfaGFuZGxlID0gZHJtX3ZtYV9ub2RlX29mZnNldF9hZGRyKCZudmJv
LT5iby5iYXNlLnZtYV9ub2RlKTsKIAlyZXAtPnRpbGVfbW9kZSA9IG52Ym8tPm1vZGU7CiAJcmVw
LT50aWxlX2ZsYWdzID0gbnZiby0+Y29udGlnID8gMCA6IE5PVVZFQVVfR0VNX1RJTEVfTk9OQ09O
VElHOwpAQCAtNjM4LDcgKzYzOCw3IEBAIG5vdXZlYXVfZ2VtX3B1c2hidWZfcmVsb2NfYXBwbHko
c3RydWN0IG5vdXZlYXVfY2xpICpjbGksCiAJCW52Ym8gPSAodm9pZCAqKSh1bnNpZ25lZCBsb25n
KWJvW3ItPnJlbG9jX2JvX2luZGV4XS51c2VyX3ByaXY7CiAKIAkJaWYgKHVubGlrZWx5KHItPnJl
bG9jX2JvX29mZnNldCArIDQgPgotCQkJICAgICBudmJvLT5iby5tZW0ubnVtX3BhZ2VzIDw8IFBB
R0VfU0hJRlQpKSB7CisJCQkgICAgIG52Ym8tPmJvLmJhc2Uuc2l6ZSkpIHsKIAkJCU5WX1BSSU5U
SyhlcnIsIGNsaSwgInJlbG9jIG91dHNpZGUgb2YgYm9cbiIpOwogCQkJcmV0ID0gLUVJTlZBTDsK
IAkJCWJyZWFrOwotLSAKMi4yNS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVl
ZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5m
by9kcmktZGV2ZWwK
