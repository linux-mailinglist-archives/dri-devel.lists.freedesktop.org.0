Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id ACD24BCD0F
	for <lists+dri-devel@lfdr.de>; Tue, 24 Sep 2019 18:46:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A73166EA7B;
	Tue, 24 Sep 2019 16:46:00 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 30ADE6EA7B
 for <dri-devel@lists.freedesktop.org>; Tue, 24 Sep 2019 16:45:59 +0000 (UTC)
Received: from sasha-vm.mshome.net (c-73-47-72-35.hsd1.nh.comcast.net
 [73.47.72.35])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 5DF6C21783;
 Tue, 24 Sep 2019 16:45:58 +0000 (UTC)
From: Sasha Levin <sashal@kernel.org>
To: linux-kernel@vger.kernel.org,
	stable@vger.kernel.org
Subject: [PATCH AUTOSEL 5.2 05/70] drm/vkms: Avoid assigning 0 for
 possible_crtc
Date: Tue, 24 Sep 2019 12:44:44 -0400
Message-Id: <20190924164549.27058-5-sashal@kernel.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190924164549.27058-1-sashal@kernel.org>
References: <20190924164549.27058-1-sashal@kernel.org>
MIME-Version: 1.0
X-stable: review
X-Patchwork-Hint: Ignore
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=kernel.org; s=default; t=1569343559;
 bh=I/gA4q9CIaxKXPKZAn9zp6oLBe04zM00DICPM9pXiPE=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=IJCsbMyjR/TIUMi8TYkVsiWBzeZ0vy3utumUX0Blw0/d9EbQWSJ3Mz/sBCjGLC9dI
 x7cUmj1Apq9IPKrcRUV233VOb2l+lxDTWQAYqkekfIeKxHE83kLYyCRSisHYmC065x
 KST9cqAVRTvjqwEIiyjgD3mTEL8XF175HhKeTIoU=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Sasha Levin <sashal@kernel.org>, Daniel Vetter <daniel.vetter@ffwll.ch>,
 dri-devel@lists.freedesktop.org,
 Rodrigo Siqueira <rodrigosiqueiramelo@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

RnJvbTogUm9kcmlnbyBTaXF1ZWlyYSA8cm9kcmlnb3NpcXVlaXJhbWVsb0BnbWFpbC5jb20+Cgpb
IFVwc3RyZWFtIGNvbW1pdCBlOWQ4NWY3MzFkZTA2YTM1ZDJhZTZjZGNmN2QwZTAzN2M5OGVmNDFh
IF0KCldoZW4gdmttcyBpbnZva2UgZHJtX3VuaXZlcnNhbF9wbGFuZV9pbml0KCksIGl0IHNldHMg
MCBmb3IKcG9zc2libGVfY3J0Y3MgcGFyYW1ldGVyIHdoaWNoIG1lYW5zIHRoYXQgcGxhbmVzIGNh
bid0IGJlIGF0dGFjaGVkIHRvCmFueSBDUlRDLiBJdCBjdXJyZW50bHkgd29ya3MgZHVlIHRvIHNv
bWUgc2FmZWd1YXJkIGluIHRoZSBkcm1fY3J0YyBmaWxlOwpob3dldmVyLCBpdCBpcyBwb3NzaWJs
ZSB0byBpZGVudGlmeSB0aGUgcHJvYmxlbSBieSB0cnlpbmcgdG8gYXBwZW5kIGEKc2Vjb25kIGNv
bm5lY3Rvci4gVGhpcyBwYXRjaCBmaXhlcyB0aGlzIGlzc3VlIGJ5IG1vZGlmeWluZwp2a21zX3Bs
YW5lX2luaXQoKSB0byBhY2NlcHQgYW4gaW5kZXggcGFyYW1ldGVyIHdoaWNoIG1ha2VzIHRoZSBj
b2RlIGEKbGl0dGxlIGJpdCBtb3JlIGZsZXhpYmxlIGFuZCBhdm9pZCBzZXQgemVybyB0byBwb3Nz
aWJsZV9jcnRjcy4KClNpZ25lZC1vZmYtYnk6IFJvZHJpZ28gU2lxdWVpcmEgPHJvZHJpZ29zaXF1
ZWlyYW1lbG9AZ21haWwuY29tPgpSZXZpZXdlZC1ieTogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZl
dHRlckBmZndsbC5jaD4KTGluazogaHR0cHM6Ly9wYXRjaHdvcmsuZnJlZWRlc2t0b3Aub3JnL3Bh
dGNoL21zZ2lkL2Q2Nzg0OWM2MmE4ZDhhY2UxYTBhZjQ1NTk5OGI1ODg3OThhNGM0NWYuMTU2MTQ5
MTk2NC5naXQucm9kcmlnb3NpcXVlaXJhbWVsb0BnbWFpbC5jb20KU2lnbmVkLW9mZi1ieTogU2Fz
aGEgTGV2aW4gPHNhc2hhbEBrZXJuZWwub3JnPgotLS0KIGRyaXZlcnMvZ3B1L2RybS92a21zL3Zr
bXNfZHJ2LmMgICAgfCAyICstCiBkcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2Rydi5oICAgIHwg
NCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX291dHB1dC5jIHwgNiArKystLS0KIGRy
aXZlcnMvZ3B1L2RybS92a21zL3ZrbXNfcGxhbmUuYyAgfCA0ICsrLS0KIDQgZmlsZXMgY2hhbmdl
ZCwgOCBpbnNlcnRpb25zKCspLCA4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS92a21zL3ZrbXNfZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vdmttcy92a21zX2Rydi5j
CmluZGV4IDczOGRkNjIwNmQ4NWIuLjkyMjk2YmQ4ZjYyMzMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS92a21zL3ZrbXNfZHJ2LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19k
cnYuYwpAQCAtOTIsNyArOTIsNyBAQCBzdGF0aWMgaW50IHZrbXNfbW9kZXNldF9pbml0KHN0cnVj
dCB2a21zX2RldmljZSAqdmttc2RldikKIAlkZXYtPm1vZGVfY29uZmlnLm1heF9oZWlnaHQgPSBZ
UkVTX01BWDsKIAlkZXYtPm1vZGVfY29uZmlnLnByZWZlcnJlZF9kZXB0aCA9IDI0OwogCi0JcmV0
dXJuIHZrbXNfb3V0cHV0X2luaXQodmttc2Rldik7CisJcmV0dXJuIHZrbXNfb3V0cHV0X2luaXQo
dmttc2RldiwgMCk7CiB9CiAKIHN0YXRpYyBpbnQgX19pbml0IHZrbXNfaW5pdCh2b2lkKQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuaCBiL2RyaXZlcnMvZ3B1L2Ry
bS92a21zL3ZrbXNfZHJ2LmgKaW5kZXggM2M3ZTA2YjE5ZWZkNS4uYTBhZGNjODYwNzlmNSAxMDA2
NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19kcnYuaAorKysgYi9kcml2ZXJzL2dw
dS9kcm0vdmttcy92a21zX2Rydi5oCkBAIC0xMTUsMTAgKzExNSwxMCBAQCBib29sIHZrbXNfZ2V0
X3ZibGFua190aW1lc3RhbXAoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdW5zaWduZWQgaW50IHBp
cGUsCiAJCQkgICAgICAgaW50ICptYXhfZXJyb3IsIGt0aW1lX3QgKnZibGFua190aW1lLAogCQkJ
ICAgICAgIGJvb2wgaW5fdmJsYW5rX2lycSk7CiAKLWludCB2a21zX291dHB1dF9pbml0KHN0cnVj
dCB2a21zX2RldmljZSAqdmttc2Rldik7CitpbnQgdmttc19vdXRwdXRfaW5pdChzdHJ1Y3Qgdmtt
c19kZXZpY2UgKnZrbXNkZXYsIGludCBpbmRleCk7CiAKIHN0cnVjdCBkcm1fcGxhbmUgKnZrbXNf
cGxhbmVfaW5pdChzdHJ1Y3Qgdmttc19kZXZpY2UgKnZrbXNkZXYsCi0JCQkJICBlbnVtIGRybV9w
bGFuZV90eXBlIHR5cGUpOworCQkJCSAgZW51bSBkcm1fcGxhbmVfdHlwZSB0eXBlLCBpbnQgaW5k
ZXgpOwogCiAvKiBHZW0gc3R1ZmYgKi8KIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqdmttc19nZW1f
Y3JlYXRlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vdmttcy92a21zX291dHB1dC5jIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19vdXRwdXQu
YwppbmRleCAzYjE2MmIyNTMxMmVjLi4xNDQyYjQ0N2M3MDcwIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vdmttcy92a21zX291dHB1dC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92a21zL3Zr
bXNfb3V0cHV0LmMKQEAgLTM2LDcgKzM2LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY29u
bmVjdG9yX2hlbHBlcl9mdW5jcyB2a21zX2Nvbm5faGVscGVyX2Z1bmNzID0gewogCS5nZXRfbW9k
ZXMgICAgPSB2a21zX2Nvbm5fZ2V0X21vZGVzLAogfTsKIAotaW50IHZrbXNfb3V0cHV0X2luaXQo
c3RydWN0IHZrbXNfZGV2aWNlICp2a21zZGV2KQoraW50IHZrbXNfb3V0cHV0X2luaXQoc3RydWN0
IHZrbXNfZGV2aWNlICp2a21zZGV2LCBpbnQgaW5kZXgpCiB7CiAJc3RydWN0IHZrbXNfb3V0cHV0
ICpvdXRwdXQgPSAmdmttc2Rldi0+b3V0cHV0OwogCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSAm
dmttc2Rldi0+ZHJtOwpAQCAtNDYsMTIgKzQ2LDEyIEBAIGludCB2a21zX291dHB1dF9pbml0KHN0
cnVjdCB2a21zX2RldmljZSAqdmttc2RldikKIAlzdHJ1Y3QgZHJtX3BsYW5lICpwcmltYXJ5LCAq
Y3Vyc29yID0gTlVMTDsKIAlpbnQgcmV0OwogCi0JcHJpbWFyeSA9IHZrbXNfcGxhbmVfaW5pdCh2
a21zZGV2LCBEUk1fUExBTkVfVFlQRV9QUklNQVJZKTsKKwlwcmltYXJ5ID0gdmttc19wbGFuZV9p
bml0KHZrbXNkZXYsIERSTV9QTEFORV9UWVBFX1BSSU1BUlksIGluZGV4KTsKIAlpZiAoSVNfRVJS
KHByaW1hcnkpKQogCQlyZXR1cm4gUFRSX0VSUihwcmltYXJ5KTsKIAogCWlmIChlbmFibGVfY3Vy
c29yKSB7Ci0JCWN1cnNvciA9IHZrbXNfcGxhbmVfaW5pdCh2a21zZGV2LCBEUk1fUExBTkVfVFlQ
RV9DVVJTT1IpOworCQljdXJzb3IgPSB2a21zX3BsYW5lX2luaXQodmttc2RldiwgRFJNX1BMQU5F
X1RZUEVfQ1VSU09SLCBpbmRleCk7CiAJCWlmIChJU19FUlIoY3Vyc29yKSkgewogCQkJcmV0ID0g
UFRSX0VSUihjdXJzb3IpOwogCQkJZ290byBlcnJfY3Vyc29yOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL3ZrbXMvdmttc19wbGFuZS5jIGIvZHJpdmVycy9ncHUvZHJtL3ZrbXMvdmttc19w
bGFuZS5jCmluZGV4IDBlNjdkMmQ0MmYwY2MuLjIwZmZjNTJmOTE5NDAgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS92a21zL3ZrbXNfcGxhbmUuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdmtt
cy92a21zX3BsYW5lLmMKQEAgLTE2OCw3ICsxNjgsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRy
bV9wbGFuZV9oZWxwZXJfZnVuY3Mgdmttc19wcmltYXJ5X2hlbHBlcl9mdW5jcyA9IHsKIH07CiAK
IHN0cnVjdCBkcm1fcGxhbmUgKnZrbXNfcGxhbmVfaW5pdChzdHJ1Y3Qgdmttc19kZXZpY2UgKnZr
bXNkZXYsCi0JCQkJICBlbnVtIGRybV9wbGFuZV90eXBlIHR5cGUpCisJCQkJICBlbnVtIGRybV9w
bGFuZV90eXBlIHR5cGUsIGludCBpbmRleCkKIHsKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGV2ID0g
JnZrbXNkZXYtPmRybTsKIAljb25zdCBzdHJ1Y3QgZHJtX3BsYW5lX2hlbHBlcl9mdW5jcyAqZnVu
Y3M7CkBAIC0xOTAsNyArMTkwLDcgQEAgc3RydWN0IGRybV9wbGFuZSAqdmttc19wbGFuZV9pbml0
KHN0cnVjdCB2a21zX2RldmljZSAqdmttc2RldiwKIAkJZnVuY3MgPSAmdmttc19wcmltYXJ5X2hl
bHBlcl9mdW5jczsKIAl9CiAKLQlyZXQgPSBkcm1fdW5pdmVyc2FsX3BsYW5lX2luaXQoZGV2LCBw
bGFuZSwgMCwKKwlyZXQgPSBkcm1fdW5pdmVyc2FsX3BsYW5lX2luaXQoZGV2LCBwbGFuZSwgMSA8
PCBpbmRleCwKIAkJCQkgICAgICAgJnZrbXNfcGxhbmVfZnVuY3MsCiAJCQkJICAgICAgIGZvcm1h
dHMsIG5mb3JtYXRzLAogCQkJCSAgICAgICBOVUxMLCB0eXBlLCBOVUxMKTsKLS0gCjIuMjAuMQoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVs
IG1haWxpbmcgbGlzdApkcmktZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
