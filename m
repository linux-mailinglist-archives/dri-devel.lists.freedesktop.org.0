Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 76A04EFE72
	for <lists+dri-devel@lfdr.de>; Tue,  5 Nov 2019 14:29:15 +0100 (CET)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 2DD3E6EA0A;
	Tue,  5 Nov 2019 13:29:08 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-pl1-x649.google.com (mail-pl1-x649.google.com
 [IPv6:2607:f8b0:4864:20::649])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4DFD389BB0
 for <dri-devel@lists.freedesktop.org>; Mon,  4 Nov 2019 19:41:53 +0000 (UTC)
Received: by mail-pl1-x649.google.com with SMTP id k8so2702983plt.7
 for <dri-devel@lists.freedesktop.org>; Mon, 04 Nov 2019 11:41:53 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:in-reply-to:message-id:mime-version
 :references:subject:from:to:cc;
 bh=3VArYdzuhYZ5F7lzuhgwCdAuyaphVwUyvDoIU6FlqsQ=;
 b=WunM39WKGuxUAfY0IbNCJlwm5uTdob+Q8lktKL4KqTcTRoClSL4x/UXbGvO8Tl/go8
 5AdR9okhTfkF6HheY74+gtk3ue+jc0hQpxfGzGXTyO0T1WDUDGYVRBOimcz5h59NbCVd
 aYWX/TLeg6Y9q1Tf3xUJ2JxxLCtSjegnztUzll6r0BL5CY22BbbH4Dk5qTtPaKLrM8Rg
 R1ZE9XVnAtgcKqn1RyXTqLP9bzjTeRAgU+8rF23SMNu8Wna7SxUFtbdu4JL0j1IgNKxl
 fJU1pUaRuhXlBMnD6M0Z0hooLtoLv6B/96o6HzZxL/unaIOFp3nSxhiVSHjU+pWQAycI
 DGlA==
X-Gm-Message-State: APjAAAWd4AxClTLmenK6su4M6s1XEiLJLbpU5svscPM9d5LiiLWS5e3x
 x71I3rY3MmFhx3YDfJfYkuKIvEm/QNc8
X-Google-Smtp-Source: APXvYqzgyJKX/aMK/PCesa/JZEFUnHC+1EnTiVopo5JDa033eb7ODBNtkyHZnqytRQQWMtuqBDosgK+6/LRl
X-Received: by 2002:a63:1c10:: with SMTP id c16mr30979864pgc.183.1572896512467; 
 Mon, 04 Nov 2019 11:41:52 -0800 (PST)
Date: Mon,  4 Nov 2019 11:41:45 -0800
In-Reply-To: <20191023001206.15741-1-rajatja@google.com>
Message-Id: <20191104194147.185642-1-rajatja@google.com>
Mime-Version: 1.0
References: <20191023001206.15741-1-rajatja@google.com>
X-Mailer: git-send-email 2.24.0.rc1.363.gb1bccd3e3d-goog
Subject: [PATCH v2 1/3] drm/i915: Move the code to populate ACPI device ID
 into intel_acpi
From: Rajat Jain <rajatja@google.com>
To: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Maxime Ripard <mripard@kernel.org>, 
 Sean Paul <sean@poorly.run>, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel@ffwll.ch>, 
 Jani Nikula <jani.nikula@linux.intel.com>, 
 Joonas Lahtinen <joonas.lahtinen@linux.intel.com>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>, 
 "=?UTF-8?q?Ville=20Syrj=C3=A4l=C3=A4?=" <ville.syrjala@linux.intel.com>,
 Chris Wilson <chris@chris-wilson.co.uk>, Imre Deak <imre.deak@intel.com>, 
 "=?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?=" <jose.souza@intel.com>,
 linux-kernel@vger.kernel.org, 
 dri-devel@lists.freedesktop.org, intel-gfx@lists.freedesktop.org, 
 gregkh@linuxfoundation.org, mathewk@google.com, 
 Daniel Thompson <daniel.thompson@linaro.org>, Jonathan Corbet <corbet@lwn.net>,
 Pavel Machek <pavel@denx.de>, seanpaul@google.com,
 Duncan Laurie <dlaurie@google.com>, 
 jsbarnes@google.com, Thierry Reding <thierry.reding@gmail.com>
X-Mailman-Approved-At: Tue, 05 Nov 2019 13:29:07 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=google.com; s=20161025;
 h=date:in-reply-to:message-id:mime-version:references:subject:from:to
 :cc;
 bh=3VArYdzuhYZ5F7lzuhgwCdAuyaphVwUyvDoIU6FlqsQ=;
 b=T5uKi/m7kOXDbQheqvsINWaygZIAlT7klsFKc8D9sd2E5YTaoR+mABMHRMkacGBYQk
 TEeJ3xc2lNA7+zQEWB2APhBk67PDsVThT/qB5bti/4GmYGPYBlYQgQ/YgSXT7FGeJ6jT
 zCIABfGkVqhvJXDyO9dHfXcqQj5qMqYgGshJ3CWrdRfFaRNrWgSwBaut6SaVN8hubDUC
 6DQzIiA5sBYokHALDfa7gOnf+8hxTpdT1pqiueGDmIp5rA1AS5VB5k00iSFnsfFCE8gX
 MoKY+znZF0NNfaAqA2D9JReZ/spsiGyR0hBuXAPTegztfQT6fUAjlvfQf4E9ORdtoN8y
 rzmg==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Rajat Jain <rajatja@google.com>, rajatxjain@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

TW92ZSB0aGUgY29kZSB0aGF0IHBvcHVsYXRlcyB0aGUgQUNQSSBkZXZpY2UgSUQgZm9yIGRldmlj
ZXMsIGludG8KbW9yZSBhcHByaXByaWF0ZSBpbnRlbF9hY3BpLmMuIFRoaXMgaXMgZG9uZSBpbiBw
cmVwYXJhdGlvbiBmb3IgbW9yZQp1c2VycyBvZiB0aGlzIGNvZGUgKGluIG5leHQgcGF0Y2gpLgoK
U2lnbmVkLW9mZi1ieTogUmFqYXQgSmFpbiA8cmFqYXRqYUBnb29nbGUuY29tPgpDaGFuZ2UtSWQ6
IElmYjNiZDQ1ODczNDk4NWMyYTc4YmE2ODJlNmYwYTJlNjNlMDYyNmNhCi0tLQp2MjogdjEgZG9l
c24ndCBleGlzdC4gRm91bmQgZXhpc3RpbmcgY29kZSBpbiBpOTE1IGRyaXZlciB0byBhc3NpZ24g
dGhlIEFDUEkgSUQKICAgIHdoaWNoIGlzIHdoYXQgSSBwbGFuIHRvIHJlLXVzZS4KICAgIAoKIGRy
aXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYWNwaS5jICAgICB8IDg3ICsrKysrKysr
KysrKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYWNwaS5oICAg
ICB8ICA2ICsrCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX29wcmVnaW9uLmMg
fCA4MCArLS0tLS0tLS0tLS0tLS0tLQogMyBmaWxlcyBjaGFuZ2VkLCA5NyBpbnNlcnRpb25zKCsp
LCA3NiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNw
bGF5L2ludGVsX2FjcGkuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYWNw
aS5jCmluZGV4IDM0NTZkMzNmZWI0Ni4uNzQ4ZDliMzEyNWRkIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2FjcGkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9kaXNwbGF5L2ludGVsX2FjcGkuYwpAQCAtMTU2LDMgKzE1Niw5MCBAQCB2b2lkIGludGVs
X3JlZ2lzdGVyX2RzbV9oYW5kbGVyKHZvaWQpCiB2b2lkIGludGVsX3VucmVnaXN0ZXJfZHNtX2hh
bmRsZXIodm9pZCkKIHsKIH0KKworLyoKKyAqIEFDUEkgU3BlY2lmaWNhdGlvbiwgUmV2aXNpb24g
NS4wLCBBcHBlbmRpeCBCLjMuMiBfRE9EIChFbnVtZXJhdGUgQWxsIERldmljZXMKKyAqIEF0dGFj
aGVkIHRvIHRoZSBEaXNwbGF5IEFkYXB0ZXIpLgorICovCisjZGVmaW5lIEFDUElfRElTUExBWV9J
TkRFWF9TSElGVAkJMAorI2RlZmluZSBBQ1BJX0RJU1BMQVlfSU5ERVhfTUFTSwkJCSgweGYgPDwg
MCkKKyNkZWZpbmUgQUNQSV9ESVNQTEFZX1BPUlRfQVRUQUNITUVOVF9TSElGVAk0CisjZGVmaW5l
IEFDUElfRElTUExBWV9QT1JUX0FUVEFDSE1FTlRfTUFTSwkoMHhmIDw8IDQpCisjZGVmaW5lIEFD
UElfRElTUExBWV9UWVBFX1NISUZUCQkJOAorI2RlZmluZSBBQ1BJX0RJU1BMQVlfVFlQRV9NQVNL
CQkJKDB4ZiA8PCA4KQorI2RlZmluZSBBQ1BJX0RJU1BMQVlfVFlQRV9PVEhFUgkJCSgwIDw8IDgp
CisjZGVmaW5lIEFDUElfRElTUExBWV9UWVBFX1ZHQQkJCSgxIDw8IDgpCisjZGVmaW5lIEFDUElf
RElTUExBWV9UWVBFX1RWCQkJKDIgPDwgOCkKKyNkZWZpbmUgQUNQSV9ESVNQTEFZX1RZUEVfRVhU
RVJOQUxfRElHSVRBTAkoMyA8PCA4KQorI2RlZmluZSBBQ1BJX0RJU1BMQVlfVFlQRV9JTlRFUk5B
TF9ESUdJVEFMCSg0IDw8IDgpCisjZGVmaW5lIEFDUElfVkVORE9SX1NQRUNJRklDX1NISUZUCQkx
MgorI2RlZmluZSBBQ1BJX1ZFTkRPUl9TUEVDSUZJQ19NQVNLCQkoMHhmIDw8IDEyKQorI2RlZmlu
ZSBBQ1BJX0JJT1NfQ0FOX0RFVEVDVAkJCSgxIDw8IDE2KQorI2RlZmluZSBBQ1BJX0RFUEVORFNf
T05fVkdBCQkJKDEgPDwgMTcpCisjZGVmaW5lIEFDUElfUElQRV9JRF9TSElGVAkJCTE4CisjZGVm
aW5lIEFDUElfUElQRV9JRF9NQVNLCQkJKDcgPDwgMTgpCisjZGVmaW5lIEFDUElfREVWSUNFX0lE
X1NDSEVNRQkJCSgxVUxMIDw8IDMxKQorCitzdGF0aWMgdTMyIGFjcGlfZGlzcGxheV90eXBlKHN0
cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcikKK3sKKwl1MzIgZGlzcGxheV90eXBlOwor
CisJc3dpdGNoIChjb25uZWN0b3ItPmJhc2UuY29ubmVjdG9yX3R5cGUpIHsKKwljYXNlIERSTV9N
T0RFX0NPTk5FQ1RPUl9WR0E6CisJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfRFZJQToKKwkJZGlz
cGxheV90eXBlID0gQUNQSV9ESVNQTEFZX1RZUEVfVkdBOworCQlicmVhazsKKwljYXNlIERSTV9N
T0RFX0NPTk5FQ1RPUl9Db21wb3NpdGU6CisJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfU1ZJREVP
OgorCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0NvbXBvbmVudDoKKwljYXNlIERSTV9NT0RFX0NP
Tk5FQ1RPUl85UGluRElOOgorCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX1RWOgorCQlkaXNwbGF5
X3R5cGUgPSBBQ1BJX0RJU1BMQVlfVFlQRV9UVjsKKwkJYnJlYWs7CisJY2FzZSBEUk1fTU9ERV9D
T05ORUNUT1JfRFZJSToKKwljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9EVklEOgorCWNhc2UgRFJN
X01PREVfQ09OTkVDVE9SX0Rpc3BsYXlQb3J0OgorCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0hE
TUlBOgorCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0hETUlCOgorCQlkaXNwbGF5X3R5cGUgPSBB
Q1BJX0RJU1BMQVlfVFlQRV9FWFRFUk5BTF9ESUdJVEFMOworCQlicmVhazsKKwljYXNlIERSTV9N
T0RFX0NPTk5FQ1RPUl9MVkRTOgorCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX2VEUDoKKwljYXNl
IERSTV9NT0RFX0NPTk5FQ1RPUl9EU0k6CisJCWRpc3BsYXlfdHlwZSA9IEFDUElfRElTUExBWV9U
WVBFX0lOVEVSTkFMX0RJR0lUQUw7CisJCWJyZWFrOworCWNhc2UgRFJNX01PREVfQ09OTkVDVE9S
X1Vua25vd246CisJY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfVklSVFVBTDoKKwkJZGlzcGxheV90
eXBlID0gQUNQSV9ESVNQTEFZX1RZUEVfT1RIRVI7CisJCWJyZWFrOworCWRlZmF1bHQ6CisJCU1J
U1NJTkdfQ0FTRShjb25uZWN0b3ItPmJhc2UuY29ubmVjdG9yX3R5cGUpOworCQlkaXNwbGF5X3R5
cGUgPSBBQ1BJX0RJU1BMQVlfVFlQRV9PVEhFUjsKKwkJYnJlYWs7CisJfQorCisJcmV0dXJuIGRp
c3BsYXlfdHlwZTsKK30KKwordm9pZCBpbnRlbF9wb3B1bGF0ZV9hY3BpX2lkc19mb3JfYWxsX2Nv
bm5lY3RvcnMoc3RydWN0IGRybV9kZXZpY2UgKmRybV9kZXYpCit7CisJc3RydWN0IGludGVsX2Nv
bm5lY3RvciAqY29ubmVjdG9yOworCXN0cnVjdCBkcm1fY29ubmVjdG9yX2xpc3RfaXRlciBjb25u
X2l0ZXI7CisJdTggZGlzcGxheV9pbmRleFsxNl0gPSB7fTsKKwl1MzIgZGV2aWNlX2lkLCB0eXBl
OworCisJLyogUG9wdWxhdGUgdGhlIEFDUEkgSURzIGZvciBhbGwgY29ubmVjdG9ycyBmb3IgYSBn
aXZlbiBkcm1fZGV2aWNlICovCisJZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4oZHJtX2Rl
diwgJmNvbm5faXRlcik7CisJZm9yX2VhY2hfaW50ZWxfY29ubmVjdG9yX2l0ZXIoY29ubmVjdG9y
LCAmY29ubl9pdGVyKSB7CisKKwkJZGV2aWNlX2lkID0gYWNwaV9kaXNwbGF5X3R5cGUoY29ubmVj
dG9yKTsKKworCQkvKiBVc2UgZGlzcGxheSB0eXBlIHNwZWNpZmljIGRpc3BsYXkgaW5kZXguICov
CisJCXR5cGUgPSAoZGV2aWNlX2lkICYgQUNQSV9ESVNQTEFZX1RZUEVfTUFTSykKKwkJCT4+IEFD
UElfRElTUExBWV9UWVBFX1NISUZUOworCQlkZXZpY2VfaWQgfD0gZGlzcGxheV9pbmRleFt0eXBl
XSsrIDw8IEFDUElfRElTUExBWV9JTkRFWF9TSElGVDsKKworCQljb25uZWN0b3ItPmFjcGlfZGV2
aWNlX2lkID0gZGV2aWNlX2lkOworCX0KKwlkcm1fY29ubmVjdG9yX2xpc3RfaXRlcl9lbmQoJmNv
bm5faXRlcik7Cit9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2lu
dGVsX2FjcGkuaCBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYWNwaS5oCmlu
ZGV4IDFjNTc2YjNmYjcxMi4uOGY2ZDg1MGRmNmZhIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9kaXNwbGF5L2ludGVsX2FjcGkuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9k
aXNwbGF5L2ludGVsX2FjcGkuaApAQCAtNiwxMiArNiwxOCBAQAogI2lmbmRlZiBfX0lOVEVMX0FD
UElfSF9fCiAjZGVmaW5lIF9fSU5URUxfQUNQSV9IX18KIAorI2luY2x1ZGUgImludGVsX2Rpc3Bs
YXlfdHlwZXMuaCIKKwogI2lmZGVmIENPTkZJR19BQ1BJCiB2b2lkIGludGVsX3JlZ2lzdGVyX2Rz
bV9oYW5kbGVyKHZvaWQpOwogdm9pZCBpbnRlbF91bnJlZ2lzdGVyX2RzbV9oYW5kbGVyKHZvaWQp
Owordm9pZCBpbnRlbF9wb3B1bGF0ZV9hY3BpX2lkc19mb3JfYWxsX2Nvbm5lY3RvcnMoc3RydWN0
IGRybV9kZXZpY2UgKmRybV9kZXYpOwogI2Vsc2UKIHN0YXRpYyBpbmxpbmUgdm9pZCBpbnRlbF9y
ZWdpc3Rlcl9kc21faGFuZGxlcih2b2lkKSB7IHJldHVybjsgfQogc3RhdGljIGlubGluZSB2b2lk
IGludGVsX3VucmVnaXN0ZXJfZHNtX2hhbmRsZXIodm9pZCkgeyByZXR1cm47IH0KK3N0YXRpYyBp
bmxpbmUgdm9pZAorc3RhdGljIGlubGluZSB2b2lkCitpbnRlbF9wb3B1bGF0ZV9hY3BpX2lkc19m
b3JfYWxsX2Nvbm5lY3RvcnMoc3RydWN0IGRybV9kZXZpY2UgKmRybV9kZXYpIHsgfQogI2VuZGlm
IC8qIENPTkZJR19BQ1BJICovCiAKICNlbmRpZiAvKiBfX0lOVEVMX0FDUElfSF9fICovCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX29wcmVnaW9uLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX29wcmVnaW9uLmMKaW5kZXggOTY5YWRl
NjIzNjkxLi5mNTk3NmE2YWIzYzQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rp
c3BsYXkvaW50ZWxfb3ByZWdpb24uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5
L2ludGVsX29wcmVnaW9uLmMKQEAgLTM1LDYgKzM1LDcgQEAKICNpbmNsdWRlICJkaXNwbGF5L2lu
dGVsX3BhbmVsLmgiCiAKICNpbmNsdWRlICJpOTE1X2Rydi5oIgorI2luY2x1ZGUgImludGVsX2Fj
cGkuaCIKICNpbmNsdWRlICJpbnRlbF9kaXNwbGF5X3R5cGVzLmgiCiAjaW5jbHVkZSAiaW50ZWxf
b3ByZWdpb24uaCIKIApAQCAtMjQyLDI5ICsyNDMsNiBAQCBzdHJ1Y3Qgb3ByZWdpb25fYXNsZV9l
eHQgewogI2RlZmluZSBTV1NDSV9TQkNCX1BPU1RfVkJFX1BNCQlTV1NDSV9GVU5DVElPTl9DT0RF
KFNXU0NJX1NCQ0IsIDE5KQogI2RlZmluZSBTV1NDSV9TQkNCX0VOQUJMRV9ESVNBQkxFX0FVRElP
CVNXU0NJX0ZVTkNUSU9OX0NPREUoU1dTQ0lfU0JDQiwgMjEpCiAKLS8qCi0gKiBBQ1BJIFNwZWNp
ZmljYXRpb24sIFJldmlzaW9uIDUuMCwgQXBwZW5kaXggQi4zLjIgX0RPRCAoRW51bWVyYXRlIEFs
bCBEZXZpY2VzCi0gKiBBdHRhY2hlZCB0byB0aGUgRGlzcGxheSBBZGFwdGVyKS4KLSAqLwotI2Rl
ZmluZSBBQ1BJX0RJU1BMQVlfSU5ERVhfU0hJRlQJCTAKLSNkZWZpbmUgQUNQSV9ESVNQTEFZX0lO
REVYX01BU0sJCQkoMHhmIDw8IDApCi0jZGVmaW5lIEFDUElfRElTUExBWV9QT1JUX0FUVEFDSE1F
TlRfU0hJRlQJNAotI2RlZmluZSBBQ1BJX0RJU1BMQVlfUE9SVF9BVFRBQ0hNRU5UX01BU0sJKDB4
ZiA8PCA0KQotI2RlZmluZSBBQ1BJX0RJU1BMQVlfVFlQRV9TSElGVAkJCTgKLSNkZWZpbmUgQUNQ
SV9ESVNQTEFZX1RZUEVfTUFTSwkJCSgweGYgPDwgOCkKLSNkZWZpbmUgQUNQSV9ESVNQTEFZX1RZ
UEVfT1RIRVIJCQkoMCA8PCA4KQotI2RlZmluZSBBQ1BJX0RJU1BMQVlfVFlQRV9WR0EJCQkoMSA8
PCA4KQotI2RlZmluZSBBQ1BJX0RJU1BMQVlfVFlQRV9UVgkJCSgyIDw8IDgpCi0jZGVmaW5lIEFD
UElfRElTUExBWV9UWVBFX0VYVEVSTkFMX0RJR0lUQUwJKDMgPDwgOCkKLSNkZWZpbmUgQUNQSV9E
SVNQTEFZX1RZUEVfSU5URVJOQUxfRElHSVRBTAkoNCA8PCA4KQotI2RlZmluZSBBQ1BJX1ZFTkRP
Ul9TUEVDSUZJQ19TSElGVAkJMTIKLSNkZWZpbmUgQUNQSV9WRU5ET1JfU1BFQ0lGSUNfTUFTSwkJ
KDB4ZiA8PCAxMikKLSNkZWZpbmUgQUNQSV9CSU9TX0NBTl9ERVRFQ1QJCQkoMSA8PCAxNikKLSNk
ZWZpbmUgQUNQSV9ERVBFTkRTX09OX1ZHQQkJCSgxIDw8IDE3KQotI2RlZmluZSBBQ1BJX1BJUEVf
SURfU0hJRlQJCQkxOAotI2RlZmluZSBBQ1BJX1BJUEVfSURfTUFTSwkJCSg3IDw8IDE4KQotI2Rl
ZmluZSBBQ1BJX0RFVklDRV9JRF9TQ0hFTUUJCQkoMSA8PCAzMSkKLQogI2RlZmluZSBNQVhfRFNM
UAkxNTAwCiAKIHN0YXRpYyBpbnQgc3dzY2koc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9w
cml2LApAQCAtNjYyLDU0ICs2NDAsMTIgQEAgc3RhdGljIHZvaWQgc2V0X2RpZChzdHJ1Y3QgaW50
ZWxfb3ByZWdpb24gKm9wcmVnaW9uLCBpbnQgaSwgdTMyIHZhbCkKIAl9CiB9CiAKLXN0YXRpYyB1
MzIgYWNwaV9kaXNwbGF5X3R5cGUoc3RydWN0IGludGVsX2Nvbm5lY3RvciAqY29ubmVjdG9yKQot
ewotCXUzMiBkaXNwbGF5X3R5cGU7Ci0KLQlzd2l0Y2ggKGNvbm5lY3Rvci0+YmFzZS5jb25uZWN0
b3JfdHlwZSkgewotCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX1ZHQToKLQljYXNlIERSTV9NT0RF
X0NPTk5FQ1RPUl9EVklBOgotCQlkaXNwbGF5X3R5cGUgPSBBQ1BJX0RJU1BMQVlfVFlQRV9WR0E7
Ci0JCWJyZWFrOwotCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0NvbXBvc2l0ZToKLQljYXNlIERS
TV9NT0RFX0NPTk5FQ1RPUl9TVklERU86Ci0JY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfQ29tcG9u
ZW50OgotCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SXzlQaW5ESU46Ci0JY2FzZSBEUk1fTU9ERV9D
T05ORUNUT1JfVFY6Ci0JCWRpc3BsYXlfdHlwZSA9IEFDUElfRElTUExBWV9UWVBFX1RWOwotCQli
cmVhazsKLQljYXNlIERSTV9NT0RFX0NPTk5FQ1RPUl9EVklJOgotCWNhc2UgRFJNX01PREVfQ09O
TkVDVE9SX0RWSUQ6Ci0JY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfRGlzcGxheVBvcnQ6Ci0JY2Fz
ZSBEUk1fTU9ERV9DT05ORUNUT1JfSERNSUE6Ci0JY2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfSERN
SUI6Ci0JCWRpc3BsYXlfdHlwZSA9IEFDUElfRElTUExBWV9UWVBFX0VYVEVSTkFMX0RJR0lUQUw7
Ci0JCWJyZWFrOwotCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0xWRFM6Ci0JY2FzZSBEUk1fTU9E
RV9DT05ORUNUT1JfZURQOgotCWNhc2UgRFJNX01PREVfQ09OTkVDVE9SX0RTSToKLQkJZGlzcGxh
eV90eXBlID0gQUNQSV9ESVNQTEFZX1RZUEVfSU5URVJOQUxfRElHSVRBTDsKLQkJYnJlYWs7Ci0J
Y2FzZSBEUk1fTU9ERV9DT05ORUNUT1JfVW5rbm93bjoKLQljYXNlIERSTV9NT0RFX0NPTk5FQ1RP
Ul9WSVJUVUFMOgotCQlkaXNwbGF5X3R5cGUgPSBBQ1BJX0RJU1BMQVlfVFlQRV9PVEhFUjsKLQkJ
YnJlYWs7Ci0JZGVmYXVsdDoKLQkJTUlTU0lOR19DQVNFKGNvbm5lY3Rvci0+YmFzZS5jb25uZWN0
b3JfdHlwZSk7Ci0JCWRpc3BsYXlfdHlwZSA9IEFDUElfRElTUExBWV9UWVBFX09USEVSOwotCQli
cmVhazsKLQl9Ci0KLQlyZXR1cm4gZGlzcGxheV90eXBlOwotfQotCiBzdGF0aWMgdm9pZCBpbnRl
bF9kaWRsX291dHB1dHMoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmRldl9wcml2KQogewogCXN0
cnVjdCBpbnRlbF9vcHJlZ2lvbiAqb3ByZWdpb24gPSAmZGV2X3ByaXYtPm9wcmVnaW9uOwogCXN0
cnVjdCBpbnRlbF9jb25uZWN0b3IgKmNvbm5lY3RvcjsKIAlzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9s
aXN0X2l0ZXIgY29ubl9pdGVyOwogCWludCBpID0gMCwgbWF4X291dHB1dHM7Ci0JaW50IGRpc3Bs
YXlfaW5kZXhbMTZdID0ge307CiAKIAkvKgogCSAqIEluIHRoZW9yeSwgZGlkMiwgdGhlIGV4dGVu
ZGVkIGRpZGwsIGdldHMgYWRkZWQgYXQgb3ByZWdpb24gdmVyc2lvbgpAQCAtNzIxLDIwICs2NTcs
MTIgQEAgc3RhdGljIHZvaWQgaW50ZWxfZGlkbF9vdXRwdXRzKHN0cnVjdCBkcm1faTkxNV9wcml2
YXRlICpkZXZfcHJpdikKIAltYXhfb3V0cHV0cyA9IEFSUkFZX1NJWkUob3ByZWdpb24tPmFjcGkt
PmRpZGwpICsKIAkJQVJSQVlfU0laRShvcHJlZ2lvbi0+YWNwaS0+ZGlkMik7CiAKKwlpbnRlbF9w
b3B1bGF0ZV9hY3BpX2lkc19mb3JfYWxsX2Nvbm5lY3RvcnMoJmRldl9wcml2LT5kcm0pOworCiAJ
ZHJtX2Nvbm5lY3Rvcl9saXN0X2l0ZXJfYmVnaW4oJmRldl9wcml2LT5kcm0sICZjb25uX2l0ZXIp
OwogCWZvcl9lYWNoX2ludGVsX2Nvbm5lY3Rvcl9pdGVyKGNvbm5lY3RvciwgJmNvbm5faXRlcikg
ewotCQl1MzIgZGV2aWNlX2lkLCB0eXBlOwotCi0JCWRldmljZV9pZCA9IGFjcGlfZGlzcGxheV90
eXBlKGNvbm5lY3Rvcik7Ci0KLQkJLyogVXNlIGRpc3BsYXkgdHlwZSBzcGVjaWZpYyBkaXNwbGF5
IGluZGV4LiAqLwotCQl0eXBlID0gKGRldmljZV9pZCAmIEFDUElfRElTUExBWV9UWVBFX01BU0sp
Ci0JCQk+PiBBQ1BJX0RJU1BMQVlfVFlQRV9TSElGVDsKLQkJZGV2aWNlX2lkIHw9IGRpc3BsYXlf
aW5kZXhbdHlwZV0rKyA8PCBBQ1BJX0RJU1BMQVlfSU5ERVhfU0hJRlQ7Ci0KLQkJY29ubmVjdG9y
LT5hY3BpX2RldmljZV9pZCA9IGRldmljZV9pZDsKIAkJaWYgKGkgPCBtYXhfb3V0cHV0cykKLQkJ
CXNldF9kaWQob3ByZWdpb24sIGksIGRldmljZV9pZCk7CisJCQlzZXRfZGlkKG9wcmVnaW9uLCBp
LCBjb25uZWN0b3ItPmFjcGlfZGV2aWNlX2lkKTsKIAkJaSsrOwogCX0KIAlkcm1fY29ubmVjdG9y
X2xpc3RfaXRlcl9lbmQoJmNvbm5faXRlcik7Ci0tIAoyLjI0LjAucmMxLjM2My5nYjFiY2NkM2Uz
ZC1nb29nCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpk
cmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
