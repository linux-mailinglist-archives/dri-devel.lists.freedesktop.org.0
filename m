Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4FAFDCB554
	for <lists+dri-devel@lfdr.de>; Fri,  4 Oct 2019 09:40:22 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D64806EACE;
	Fri,  4 Oct 2019 07:39:07 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-io1-xd41.google.com (mail-io1-xd41.google.com
 [IPv6:2607:f8b0:4864:20::d41])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 399D56E958
 for <dri-devel@lists.freedesktop.org>; Wed,  2 Oct 2019 11:46:29 +0000 (UTC)
Received: by mail-io1-xd41.google.com with SMTP id c6so55964736ioo.13
 for <dri-devel@lists.freedesktop.org>; Wed, 02 Oct 2019 04:46:29 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=Lh5QxEdgvHoHF5Kz6XaPdjsoiPWGW9FM0Kf+u5LlWyg=;
 b=mJ1QF+HvFqsdNdvPMSwWbKwyURz6oVmLvP/LEtyBxuQxy6xeWG0wOFOfWGtnky1Gy9
 utONzgOQDGEmuPqKegxO9lsIxIJ681EF46y2fky8VRvEHNFAGNUzaJrL4nGqf1HHaeok
 +85/gregYSe74nnuO7TLl47zyMp2JQrLLWoYpm7GnmA6R93AvQaE+iPJwqpe2y1MfXB/
 riUPEw61oogLF2m0nS17TW3b4FG9rrHlX1fnGdmqNcoUkE1G78hPv8HPXAJ0DVx/cjTM
 W0W5QdNMua11J0qN+gfA9iU7HR9CS3M1aKnouFP/g2ziJUd0RRNc1zA8OATYOOFj6/Mo
 ja7w==
X-Gm-Message-State: APjAAAX4aXCaLiyTzc5AN097HNRzi1ZFxJlSHM8dqJ53fEZKOHOoaJIW
 DZ7v4KJihfgcp8AOOMUGC3ZvWJuUO6R9DP+IAQFGWA==
X-Google-Smtp-Source: APXvYqwXVEvFlzog8KQO34/KztiH9WkMTSYCCR8KfOcAkvzoP5pNsY8XDceXykJ+ii5hdUUGdRQ24Jdi2x774Jju/0E=
X-Received: by 2002:a5d:8911:: with SMTP id b17mr2872420ion.287.1570016788323; 
 Wed, 02 Oct 2019 04:46:28 -0700 (PDT)
MIME-Version: 1.0
References: <20191001125837.4472-1-brgl@bgdev.pl>
 <20191001125837.4472-8-brgl@bgdev.pl>
 <20191002103318.6owxberhml6mbtxm@holly.lan>
In-Reply-To: <20191002103318.6owxberhml6mbtxm@holly.lan>
From: Bartosz Golaszewski <brgl@bgdev.pl>
Date: Wed, 2 Oct 2019 13:46:17 +0200
Message-ID: <CAMRc=Me8RmYLh9WKYma7XE1H7tEZ8Jd-wsFyKVv_etO0T92zwg@mail.gmail.com>
Subject: Re: [PATCH v4 7/7] backlight: gpio: pull
 gpio_backlight_initial_power_state() into probe
To: Daniel Thompson <daniel.thompson@linaro.org>
X-Mailman-Approved-At: Fri, 04 Oct 2019 07:38:50 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=bgdev-pl.20150623.gappssmtp.com; s=20150623;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=Lh5QxEdgvHoHF5Kz6XaPdjsoiPWGW9FM0Kf+u5LlWyg=;
 b=Q5Qfdh7fI7j00zuYn+3Gvvh3U82Zj6uRr+9t+BfK+QrN6GksTsq1TtHlWVSl3DUc/+
 KICkXd3QUhZFpe0w3wAfln7jgkv7gbMfFyG9fjM2V98eIGe3r3Gng/xkExa+eJEFFilu
 E15hdttybPJelTM62xKCQWTnZbv7QjtcbEnLaCqCktZpjN59SdX2dYOtnQ/wc+v0t2zu
 Z60M1o7opM5Y6bF/275R2KooX4xy51xnRv1hzx06KJKXKTdmdvkrexBDIvQoo7fX23JK
 JdQfSCs2jHEui+2UrN44EqlEtaVfgEtssfzfXCF4hdHKwb59nnOUY2wEhzYHMnDt+aS1
 bpmw==
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jacopo Mondi <jacopo@jmondi.org>, Rich Felker <dalias@libc.org>,
 Yoshinori Sato <ysato@users.sourceforge.jp>,
 Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 Jingoo Han <jingoohan1@gmail.com>, linux-sh@vger.kernel.org,
 Linux Kernel Mailing List <linux-kernel@vger.kernel.org>,
 dri-devel@lists.freedesktop.org,
 Bartosz Golaszewski <bgolaszewski@baylibre.com>, linux-fbdev@vger.kernel.org,
 Andy Shevchenko <andriy.shevchenko@linux.intel.com>,
 Lee Jones <lee.jones@linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

xZtyLiwgMiBwYcW6IDIwMTkgbyAxMjozMyBEYW5pZWwgVGhvbXBzb24gPGRhbmllbC50aG9tcHNv
bkBsaW5hcm8ub3JnPiBuYXBpc2HFgihhKToKPgo+IE9uIFR1ZSwgT2N0IDAxLCAyMDE5IGF0IDAy
OjU4OjM3UE0gKzAyMDAsIEJhcnRvc3ogR29sYXN6ZXdza2kgd3JvdGU6Cj4gPiBGcm9tOiBCYXJ0
b3N6IEdvbGFzemV3c2tpIDxiZ29sYXN6ZXdza2lAYmF5bGlicmUuY29tPgo+ID4KPiA+IFRoZSBw
cm9iZSBmdW5jdGlvbiBpbiB0aGUgZ3Bpby1iYWNrbGlnaHQgZHJpdmVyIGlzIHF1aXRlIHNob3J0
LiBJZiB3ZQo+ID4gcHVsbCBncGlvX2JhY2tsaWdodF9pbml0aWFsX3Bvd2VyX3N0YXRlKCkgaW50
byBwcm9iZSB3ZSBjYW4gZHJvcCB0d28KPiA+IG1vcmUgZmllbGRzIGZyb20gc3RydWN0IGdwaW9f
YmFja2xpZ2h0IGFuZCBzaHJpbmsgdGhlIGRyaXZlciBjb2RlLgo+ID4KPiA+IFNpZ25lZC1vZmYt
Ynk6IEJhcnRvc3ogR29sYXN6ZXdza2kgPGJnb2xhc3pld3NraUBiYXlsaWJyZS5jb20+Cj4gPiAt
LS0KPiA+ICBkcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9ncGlvX2JhY2tsaWdodC5jIHwgMzYgKysr
KysrKystLS0tLS0tLS0tLS0tLS0tCj4gPiAgMSBmaWxlIGNoYW5nZWQsIDEyIGluc2VydGlvbnMo
KyksIDI0IGRlbGV0aW9ucygtKQo+ID4KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpZGVvL2Jh
Y2tsaWdodC9ncGlvX2JhY2tsaWdodC5jIGIvZHJpdmVycy92aWRlby9iYWNrbGlnaHQvZ3Bpb19i
YWNrbGlnaHQuYwo+ID4gaW5kZXggNjI0NzY4N2I2MzMwLi4zN2VjMTg0ZjBjNWMgMTAwNjQ0Cj4g
PiAtLS0gYS9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9ncGlvX2JhY2tsaWdodC5jCj4gPiArKysg
Yi9kcml2ZXJzL3ZpZGVvL2JhY2tsaWdodC9ncGlvX2JhY2tsaWdodC5jCj4gPiBAQCAtMTcsMTEg
KzE3LDggQEAKPiA+ICAjaW5jbHVkZSA8bGludXgvc2xhYi5oPgo+ID4KPiA+ICBzdHJ1Y3QgZ3Bp
b19iYWNrbGlnaHQgewo+ID4gLSAgICAgc3RydWN0IGRldmljZSAqZGV2Owo+ID4gICAgICAgc3Ry
dWN0IGRldmljZSAqZmJkZXY7Cj4gPiAtCj4gPiAgICAgICBzdHJ1Y3QgZ3Bpb19kZXNjICpncGlv
ZDsKPiA+IC0gICAgIGludCBkZWZfdmFsdWU7Cj4gPiAgfTsKPiA+Cj4gPiAgc3RhdGljIGludCBn
cGlvX2JhY2tsaWdodF91cGRhdGVfc3RhdHVzKHN0cnVjdCBiYWNrbGlnaHRfZGV2aWNlICpibCkK
PiA+IEBAIC01Myw0MSArNTAsMjQgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBiYWNrbGlnaHRfb3Bz
IGdwaW9fYmFja2xpZ2h0X29wcyA9IHsKPiA+ICAgICAgIC5jaGVja19mYiAgICAgICA9IGdwaW9f
YmFja2xpZ2h0X2NoZWNrX2ZiLAo+ID4gIH07Cj4gPgo+ID4gLXN0YXRpYyBpbnQgZ3Bpb19iYWNr
bGlnaHRfaW5pdGlhbF9wb3dlcl9zdGF0ZShzdHJ1Y3QgZ3Bpb19iYWNrbGlnaHQgKmdibCkKPgo+
IEknbSBpbmNsaW5lZCB0byB2aWV3IGRlbGV0aW5nIHRoaXMgZnVuY3Rpb24gYXMgcmVtb3Zpbmcg
YSBjb21tZW50IChlLmcuCj4gdGhlIGZ1bmN0aW9uIG5hbWUgaGVscHMgdXMgdG8gcmVhZCB0aGUg
Y29kZSkhCj4KClJpZ2h0LCBidXQgd2h5IG5vdCBqdXN0IGFkZCBhIGNvbW1lbnQgdGhlbj8gVGhl
IHByb2JlIGZ1bmN0aW9uIGlzIDUwCmxpbmVzIGxvbmcsIHRoZXJlJ3MgcmVhbGx5IG5vIG5lZWQg
dG8gc3BsaXQgaXQuIFRoaXMgd2lsbCBnZXQgaW5saW5lZAphbnl3YXkgdG9vLgoKQmFydAoKPiBS
ZW1vdmluZyB0aGUgdmFyaWFibGVzIGZyb20gdGhlIGNvbnRleHQgc3RydWN0dXJlIGlzIGdvb2Qg
YnV0IHdoeSBub3QKPiBqdXN0IHBhc3MgdGhlbSB0byB0aGUgZnVuY3Rpb24gYW5kIGxldCB0aGUg
Y29tcGlsZXIgZGVjaWRlZCB3aGV0aGVyIG9yCj4gbm90IHRvIGlubGluZS4KPgo+Cj4gRGFuaWVs
Lgo+Cj4KPiA+IC17Cj4gPiAtICAgICBzdHJ1Y3QgZGV2aWNlX25vZGUgKm5vZGUgPSBnYmwtPmRl
di0+b2Zfbm9kZTsKPiA+IC0KPiA+IC0gICAgIC8qIE5vdCBib290ZWQgd2l0aCBkZXZpY2UgdHJl
ZSBvciBubyBwaGFuZGxlIGxpbmsgdG8gdGhlIG5vZGUgKi8KPiA+IC0gICAgIGlmICghbm9kZSB8
fCAhbm9kZS0+cGhhbmRsZSkKPiA+IC0gICAgICAgICAgICAgcmV0dXJuIGdibC0+ZGVmX3ZhbHVl
ID8gRkJfQkxBTktfVU5CTEFOSyA6IEZCX0JMQU5LX1BPV0VSRE9XTjsKPiA+IC0KPiA+IC0gICAg
IC8qIGlmIHRoZSBlbmFibGUgR1BJTyBpcyBkaXNhYmxlZCwgZG8gbm90IGVuYWJsZSB0aGUgYmFj
a2xpZ2h0ICovCj4gPiAtICAgICBpZiAoZ3Bpb2RfZ2V0X3ZhbHVlX2NhbnNsZWVwKGdibC0+Z3Bp
b2QpID09IDApCj4gPiAtICAgICAgICAgICAgIHJldHVybiBGQl9CTEFOS19QT1dFUkRPV047Cj4g
PiAtCj4gPiAtICAgICByZXR1cm4gRkJfQkxBTktfVU5CTEFOSzsKPiA+IC19Cj4gPiAtCj4gPiAt
Cj4gPiAgc3RhdGljIGludCBncGlvX2JhY2tsaWdodF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2
aWNlICpwZGV2KQo+ID4gIHsKPiA+ICAgICAgIHN0cnVjdCBkZXZpY2UgKmRldiA9ICZwZGV2LT5k
ZXY7Cj4gPiAgICAgICBzdHJ1Y3QgZ3Bpb19iYWNrbGlnaHRfcGxhdGZvcm1fZGF0YSAqcGRhdGEg
PSBkZXZfZ2V0X3BsYXRkYXRhKGRldik7Cj4gPiArICAgICBzdHJ1Y3QgZGV2aWNlX25vZGUgKm9m
X25vZGUgPSBkZXYtPm9mX25vZGU7Cj4gPiAgICAgICBzdHJ1Y3QgYmFja2xpZ2h0X3Byb3BlcnRp
ZXMgcHJvcHM7Cj4gPiAgICAgICBzdHJ1Y3QgYmFja2xpZ2h0X2RldmljZSAqYmw7Cj4gPiAgICAg
ICBzdHJ1Y3QgZ3Bpb19iYWNrbGlnaHQgKmdibDsKPiA+IC0gICAgIGludCByZXQ7Cj4gPiArICAg
ICBpbnQgcmV0LCBkZWZfdmFsdWU7Cj4gPgo+ID4gICAgICAgZ2JsID0gZGV2bV9remFsbG9jKGRl
diwgc2l6ZW9mKCpnYmwpLCBHRlBfS0VSTkVMKTsKPiA+ICAgICAgIGlmIChnYmwgPT0gTlVMTCkK
PiA+ICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gPgo+ID4gLSAgICAgZ2JsLT5kZXYg
PSBkZXY7Cj4gPiAtCj4gPiAgICAgICBpZiAocGRhdGEpCj4gPiAgICAgICAgICAgICAgIGdibC0+
ZmJkZXYgPSBwZGF0YS0+ZmJkZXY7Cj4gPgo+ID4gLSAgICAgZ2JsLT5kZWZfdmFsdWUgPSBkZXZp
Y2VfcHJvcGVydHlfcmVhZF9ib29sKGRldiwgImRlZmF1bHQtb24iKTsKPiA+ICsgICAgIGRlZl92
YWx1ZSA9IGRldmljZV9wcm9wZXJ0eV9yZWFkX2Jvb2woZGV2LCAiZGVmYXVsdC1vbiIpOwo+ID4K
PiA+ICAgICAgIGdibC0+Z3Bpb2QgPSBkZXZtX2dwaW9kX2dldChkZXYsIE5VTEwsIEdQSU9EX0FT
SVMpOwo+ID4gICAgICAgaWYgKElTX0VSUihnYmwtPmdwaW9kKSkgewo+ID4gQEAgLTEwOSw3ICs4
OSwxNSBAQCBzdGF0aWMgaW50IGdwaW9fYmFja2xpZ2h0X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9k
ZXZpY2UgKnBkZXYpCj4gPiAgICAgICAgICAgICAgIHJldHVybiBQVFJfRVJSKGJsKTsKPiA+ICAg
ICAgIH0KPiA+Cj4gPiAtICAgICBibC0+cHJvcHMucG93ZXIgPSBncGlvX2JhY2tsaWdodF9pbml0
aWFsX3Bvd2VyX3N0YXRlKGdibCk7Cj4gPiArICAgICAvKiBOb3QgYm9vdGVkIHdpdGggZGV2aWNl
IHRyZWUgb3Igbm8gcGhhbmRsZSBsaW5rIHRvIHRoZSBub2RlICovCj4gPiArICAgICBpZiAoIW9m
X25vZGUgfHwgIW9mX25vZGUtPnBoYW5kbGUpCj4gPiArICAgICAgICAgICAgIGJsLT5wcm9wcy5w
b3dlciA9IGRlZl92YWx1ZSA/IEZCX0JMQU5LX1VOQkxBTksKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIDogRkJfQkxBTktfUE9XRVJET1dOOwo+ID4gKyAgICAg
ZWxzZSBpZiAoZ3Bpb2RfZ2V0X3ZhbHVlX2NhbnNsZWVwKGdibC0+Z3Bpb2QpID09IDApCj4gPiAr
ICAgICAgICAgICAgIGJsLT5wcm9wcy5wb3dlciA9IEZCX0JMQU5LX1BPV0VSRE9XTjsKPiA+ICsg
ICAgIGVsc2UKPiA+ICsgICAgICAgICAgICAgYmwtPnByb3BzLnBvd2VyID0gRkJfQkxBTktfVU5C
TEFOSzsKPiA+ICsKPiA+ICAgICAgIGJsLT5wcm9wcy5icmlnaHRuZXNzID0gMTsKPiA+Cj4gPiAg
ICAgICBiYWNrbGlnaHRfdXBkYXRlX3N0YXR1cyhibCk7Cj4gPiAtLQo+ID4gMi4yMy4wCj4gPgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwg
bWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
