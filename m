Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8F7FE8C1E2
	for <lists+dri-devel@lfdr.de>; Tue, 13 Aug 2019 22:11:34 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5B1F86E185;
	Tue, 13 Aug 2019 20:11:22 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 97C486E102
 for <dri-devel@lists.freedesktop.org>; Tue, 13 Aug 2019 20:11:16 +0000 (UTC)
Received: from pendragon.bb.dnainternet.fi
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 9FC66E18;
 Tue, 13 Aug 2019 22:11:11 +0200 (CEST)
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v4 6/9] drm/panel: Add driver for the Sharp LS037V7DW01 panel
Date: Tue, 13 Aug 2019 23:10:58 +0300
Message-Id: <20190813201101.30980-7-laurent.pinchart@ideasonboard.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190813201101.30980-1-laurent.pinchart@ideasonboard.com>
References: <20190813201101.30980-1-laurent.pinchart@ideasonboard.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1565727071;
 bh=HICsPulppvxSViuUFwGMPr6lQGP0JoUh8XR50ZN/mUc=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=mjiCW8Ctpl/pXmVgpYzHWwN9fu/kX7u53Gz0jcuyEGzdWTPPRSX+mnjvu0WZEaQkD
 cA2OFqFmKqr30tpsBX/oEHu9CCVBg2+1NHbzCPkfVuEnWEjeUOIlJvqVXrraCufoLx
 Wry0XxDBPWU33Tb9VQ+Z3oJr6b4g9Jn1lcg9jC1U=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thierry Reding <thierry.reding@gmail.com>, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VGhpcyBwYW5lbCBpcyB1c2VkIG9uIHRoZSBUSSBTRFAzNDMwIGJvYXJkLgoKVGhlIGNvZGUgaXMg
YmFzZWQgb24gdGhlIG9tYXBkcm0tc3BlY2lmaWMgcGFuZWwtc2hhcnAtbHMwMzd2N2R3MDEKZHJp
dmVyLgoKU2lnbmVkLW9mZi1ieTogTGF1cmVudCBQaW5jaGFydCA8bGF1cmVudC5waW5jaGFydEBp
ZGVhc29uYm9hcmQuY29tPgpSZXZpZXdlZC1ieTogU2FtIFJhdm5ib3JnIDxzYW1AcmF2bmJvcmcu
b3JnPgotLS0KQ2hhbmdlcyBzaW5jZSB2MToKCi0gTWVudGlvbiBib2FyZHMgdXNpbmcgdGhlIHBh
bmVsIGluIEtjb25maWcKLSBSZW5hbWVkIGxzMDM3djdkdzAxX2RldmljZSB0byBsczAzN3Y3ZHcw
MV9wYW5lbAotIFJlbmFtZWQgdmNjIHRvIHZkZAotIENvbW1lbnRzIHVwZGF0ZXMKLSBTdG9yZSB3
aWR0aF9tbSBhbmQgaGVpZ2h0X21tIGluIGRybV9kaXNwbGF5X21vZGUKLSBVc2UgZHJtX3BhbmVs
X2Rpc2FibGUoKSBpbiAucmVtb3ZlKCkgaGFuZGxlcgotIFVzZSBkZXZtX2dwaW9kX2dldCgpIHdo
ZXJlIGFwcGxpY2FibGUKLSBSZW1vdmUgTlVMTC1jaGVjayBvbiB2ZGQKLSBPcmRlciBLY29uZmln
IGVudHJpZXMgYWxwaGFiZXRpY2FsbHkKLS0tCiBkcml2ZXJzL2dwdS9kcm0vcGFuZWwvS2NvbmZp
ZyAgICAgICAgICAgICAgICAgfCAgIDcgKwogZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxl
ICAgICAgICAgICAgICAgIHwgICAxICsKIC4uLi9ncHUvZHJtL3BhbmVsL3BhbmVsLXNoYXJwLWxz
MDM3djdkdzAxLmMgICB8IDIyNiArKysrKysrKysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdlZCwg
MjM0IGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2dwdS9kcm0vcGFu
ZWwvcGFuZWwtc2hhcnAtbHMwMzd2N2R3MDEuYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9wYW5lbC9LY29uZmlnIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL0tjb25maWcKaW5kZXggZDI4
MTMzYzZhYTBhLi44ZDlhOGNkYjcwNGUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5l
bC9LY29uZmlnCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9LY29uZmlnCkBAIC0yODIsNiAr
MjgyLDEzIEBAIGNvbmZpZyBEUk1fUEFORUxfU0hBUlBfTFExMDFSMVNYMDEKIAkgIFRvIGNvbXBp
bGUgdGhpcyBkcml2ZXIgYXMgYSBtb2R1bGUsIGNob29zZSBNIGhlcmU6IHRoZSBtb2R1bGUKIAkg
IHdpbGwgYmUgY2FsbGVkIHBhbmVsLXNoYXJwLWxxMTAxcjFzeDAxLgogCitjb25maWcgRFJNX1BB
TkVMX1NIQVJQX0xTMDM3VjdEVzAxCisJdHJpc3RhdGUgIlNoYXJwIExTMDM3VjdEVzAxIFZHQSBM
Q0QgcGFuZWwiCisJZGVwZW5kcyBvbiBHUElPTElCICYmIE9GICYmIFJFR1VMQVRPUgorCWhlbHAK
KwkgIFNheSBZIGhlcmUgaWYgeW91IHdhbnQgdG8gZW5hYmxlIHN1cHBvcnQgZm9yIFNoYXJwIExT
MDM3VjdEVzAxIFZHQQorCSAgKDQ4MHg2NDApIExDRCBwYW5lbCAoZm91bmQgb24gdGhlIFRJIFNE
UDM0MzAgYm9hcmQpLgorCiBjb25maWcgRFJNX1BBTkVMX1NIQVJQX0xTMDQzVDFMRTAxCiAJdHJp
c3RhdGUgIlNoYXJwIExTMDQzVDFMRTAxIHFIRCB2aWRlbyBtb2RlIHBhbmVsIgogCWRlcGVuZHMg
b24gT0YKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZSBiL2RyaXZl
cnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQppbmRleCA4MDUyZjlhN2FkNjAuLjE0ZDFjNDllZjNh
YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbmVsL01ha2VmaWxlCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9wYW5lbC9NYWtlZmlsZQpAQCAtMjksNiArMjksNyBAQCBvYmotJChDT05GSUdf
RFJNX1BBTkVMX1NBTVNVTkdfUzZFNjNNMCkgKz0gcGFuZWwtc2Ftc3VuZy1zNmU2M20wLm8KIG9i
ai0kKENPTkZJR19EUk1fUEFORUxfU0FNU1VOR19TNkU4QUEwKSArPSBwYW5lbC1zYW1zdW5nLXM2
ZThhYTAubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9TRUlLT180M1dWRjFHKSArPSBwYW5lbC1z
ZWlrby00M3d2ZjFnLm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfU0hBUlBfTFExMDFSMVNYMDEp
ICs9IHBhbmVsLXNoYXJwLWxxMTAxcjFzeDAxLm8KK29iai0kKENPTkZJR19EUk1fUEFORUxfU0hB
UlBfTFMwMzdWN0RXMDEpICs9IHBhbmVsLXNoYXJwLWxzMDM3djdkdzAxLm8KIG9iai0kKENPTkZJ
R19EUk1fUEFORUxfU0hBUlBfTFMwNDNUMUxFMDEpICs9IHBhbmVsLXNoYXJwLWxzMDQzdDFsZTAx
Lm8KIG9iai0kKENPTkZJR19EUk1fUEFORUxfU0lUUk9OSVhfU1Q3NzAxKSArPSBwYW5lbC1zaXRy
b25peC1zdDc3MDEubwogb2JqLSQoQ09ORklHX0RSTV9QQU5FTF9TSVRST05JWF9TVDc3ODlWKSAr
PSBwYW5lbC1zaXRyb25peC1zdDc3ODl2Lm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9w
YW5lbC9wYW5lbC1zaGFycC1sczAzN3Y3ZHcwMS5jIGIvZHJpdmVycy9ncHUvZHJtL3BhbmVsL3Bh
bmVsLXNoYXJwLWxzMDM3djdkdzAxLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MDAwMDAwLi4yYWFlYTUwN2NjMWYKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2dwdS9kcm0v
cGFuZWwvcGFuZWwtc2hhcnAtbHMwMzd2N2R3MDEuYwpAQCAtMCwwICsxLDIyNiBAQAorLy8gU1BE
WC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAKKy8qCisgKiBTaGFycCBMUzAzN1Y3RFcwMSBM
Q0QgUGFuZWwgRHJpdmVyCisgKgorICogQ29weXJpZ2h0IChDKSAyMDE5IFRleGFzIEluc3RydW1l
bnRzIEluY29ycG9yYXRlZAorICoKKyAqIEJhc2VkIG9uIHRoZSBvbWFwZHJtLXNwZWNpZmljIHBh
bmVsLXNoYXJwLWxzMDM3djdkdzAxIGRyaXZlcgorICoKKyAqIENvcHlyaWdodCAoQykgMjAxMyBU
ZXhhcyBJbnN0cnVtZW50cyBJbmNvcnBvcmF0ZWQKKyAqIEF1dGhvcjogVG9taSBWYWxrZWluZW4g
PHRvbWkudmFsa2VpbmVuQHRpLmNvbT4KKyAqLworCisjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4K
KyNpbmNsdWRlIDxsaW51eC9ncGlvL2NvbnN1bWVyLmg+CisjaW5jbHVkZSA8bGludXgvbW9kdWxl
Lmg+CisjaW5jbHVkZSA8bGludXgvb2YuaD4KKyNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kZXZp
Y2UuaD4KKyNpbmNsdWRlIDxsaW51eC9yZWd1bGF0b3IvY29uc3VtZXIuaD4KKworI2luY2x1ZGUg
PGRybS9kcm1fY29ubmVjdG9yLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9tb2Rlcy5oPgorI2luY2x1
ZGUgPGRybS9kcm1fcGFuZWwuaD4KKworc3RydWN0IGxzMDM3djdkdzAxX3BhbmVsIHsKKwlzdHJ1
Y3QgZHJtX3BhbmVsIHBhbmVsOworCXN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXY7CisKKwlz
dHJ1Y3QgcmVndWxhdG9yICp2ZGQ7CisJc3RydWN0IGdwaW9fZGVzYyAqcmVzYl9ncGlvOwkvKiBs
b3cgPSByZXNldCBhY3RpdmUgbWluIDIwIHVzICovCisJc3RydWN0IGdwaW9fZGVzYyAqaW5pX2dw
aW87CS8qIGhpZ2ggPSBwb3dlciBvbiAqLworCXN0cnVjdCBncGlvX2Rlc2MgKm1vX2dwaW87CS8q
IGxvdyA9IDQ4MHg2NDAsIGhpZ2ggPSAyNDB4MzIwICovCisJc3RydWN0IGdwaW9fZGVzYyAqbHJf
Z3BpbzsJLyogaGlnaCA9IGNvbnZlbnRpb25hbCBob3Jpem9udGFsIHNjYW5uaW5nICovCisJc3Ry
dWN0IGdwaW9fZGVzYyAqdWRfZ3BpbzsJLyogaGlnaCA9IGNvbnZlbnRpb25hbCB2ZXJ0aWNhbCBz
Y2FubmluZyAqLworfTsKKworI2RlZmluZSB0b19sczAzN3Y3ZHcwMV9kZXZpY2UocCkgXAorCWNv
bnRhaW5lcl9vZihwLCBzdHJ1Y3QgbHMwMzd2N2R3MDFfcGFuZWwsIHBhbmVsKQorCitzdGF0aWMg
aW50IGxzMDM3djdkdzAxX2Rpc2FibGUoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJc3Ry
dWN0IGxzMDM3djdkdzAxX3BhbmVsICpsY2QgPSB0b19sczAzN3Y3ZHcwMV9kZXZpY2UocGFuZWwp
OworCisJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKGxjZC0+aW5pX2dwaW8sIDApOworCWdwaW9k
X3NldF92YWx1ZV9jYW5zbGVlcChsY2QtPnJlc2JfZ3BpbywgMCk7CisKKwkvKiBXYWl0IGF0IGxl
YXN0IDUgdnN5bmNzIGFmdGVyIGRpc2FibGluZyB0aGUgTENELiAqLworCW1zbGVlcCgxMDApOwor
CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbHMwMzd2N2R3MDFfdW5wcmVwYXJlKHN0cnVj
dCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCBsczAzN3Y3ZHcwMV9wYW5lbCAqbGNkID0g
dG9fbHMwMzd2N2R3MDFfZGV2aWNlKHBhbmVsKTsKKworCXJlZ3VsYXRvcl9kaXNhYmxlKGxjZC0+
dmRkKTsKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBsczAzN3Y3ZHcwMV9wcmVwYXJlKHN0
cnVjdCBkcm1fcGFuZWwgKnBhbmVsKQoreworCXN0cnVjdCBsczAzN3Y3ZHcwMV9wYW5lbCAqbGNk
ID0gdG9fbHMwMzd2N2R3MDFfZGV2aWNlKHBhbmVsKTsKKwlpbnQgcmV0OworCisJcmV0ID0gcmVn
dWxhdG9yX2VuYWJsZShsY2QtPnZkZCk7CisJaWYgKHJldCA8IDApCisJCWRldl9lcnIoJmxjZC0+
cGRldi0+ZGV2LCAiJXM6IGZhaWxlZCB0byBlbmFibGUgcmVndWxhdG9yXG4iLAorCQkJX19mdW5j
X18pOworCisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCBsczAzN3Y3ZHcwMV9lbmFibGUo
c3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJc3RydWN0IGxzMDM3djdkdzAxX3BhbmVsICps
Y2QgPSB0b19sczAzN3Y3ZHcwMV9kZXZpY2UocGFuZWwpOworCisJLyogV2FpdCBjb3VwbGUgb2Yg
dnN5bmNzIGJlZm9yZSBlbmFibGluZyB0aGUgTENELiAqLworCW1zbGVlcCg1MCk7CisKKwlncGlv
ZF9zZXRfdmFsdWVfY2Fuc2xlZXAobGNkLT5yZXNiX2dwaW8sIDEpOworCWdwaW9kX3NldF92YWx1
ZV9jYW5zbGVlcChsY2QtPmluaV9ncGlvLCAxKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMg
Y29uc3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgbHMwMzd2N2R3MDFfbW9kZSA9IHsKKwkuY2xv
Y2sgPSAxOTIwMCwKKwkuaGRpc3BsYXkgPSA0ODAsCisJLmhzeW5jX3N0YXJ0ID0gNDgwICsgMSwK
KwkuaHN5bmNfZW5kID0gNDgwICsgMSArIDIsCisJLmh0b3RhbCA9IDQ4MCArIDEgKyAyICsgMjgs
CisJLnZkaXNwbGF5ID0gNjQwLAorCS52c3luY19zdGFydCA9IDY0MCArIDEsCisJLnZzeW5jX2Vu
ZCA9IDY0MCArIDEgKyAxLAorCS52dG90YWwgPSA2NDAgKyAxICsgMSArIDEsCisJLnZyZWZyZXNo
ID0gNTgsCisJLnR5cGUgPSBEUk1fTU9ERV9UWVBFX0RSSVZFUiB8IERSTV9NT0RFX1RZUEVfUFJF
RkVSUkVELAorCS5mbGFncyA9IERSTV9NT0RFX0ZMQUdfTkhTWU5DIHwgRFJNX01PREVfRkxBR19O
VlNZTkMsCisJLndpZHRoX21tID0gNTYsCisJLmhlaWdodF9tbSA9IDc1LAorfTsKKworc3RhdGlj
IGludCBsczAzN3Y3ZHcwMV9nZXRfbW9kZXMoc3RydWN0IGRybV9wYW5lbCAqcGFuZWwpCit7CisJ
c3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvciA9IHBhbmVsLT5jb25uZWN0b3I7CisJc3Ry
dWN0IGRybV9kaXNwbGF5X21vZGUgKm1vZGU7CisKKwltb2RlID0gZHJtX21vZGVfZHVwbGljYXRl
KHBhbmVsLT5kcm0sICZsczAzN3Y3ZHcwMV9tb2RlKTsKKwlpZiAoIW1vZGUpCisJCXJldHVybiAt
RU5PTUVNOworCisJZHJtX21vZGVfc2V0X25hbWUobW9kZSk7CisJZHJtX21vZGVfcHJvYmVkX2Fk
ZChjb25uZWN0b3IsIG1vZGUpOworCisJY29ubmVjdG9yLT5kaXNwbGF5X2luZm8ud2lkdGhfbW0g
PSBsczAzN3Y3ZHcwMV9tb2RlLndpZHRoX21tOworCWNvbm5lY3Rvci0+ZGlzcGxheV9pbmZvLmhl
aWdodF9tbSA9IGxzMDM3djdkdzAxX21vZGUuaGVpZ2h0X21tOworCS8qCisJICogRklYTUU6IEFj
Y29yZGluZyB0byB0aGUgZGF0YXNoZWV0IHBpeGVsIGRhdGEgaXMgc2FtcGxlZCBvbiB0aGUKKwkg
KiByaXNpbmcgZWRnZSBvZiB0aGUgY2xvY2ssIGJ1dCB0aGUgY29kZSBydW5uaW5nIG9uIHRoZSBT
RFAzNDMwCisJICogaW5kaWNhdGVzIHNhbXBsaW5nIG9uIHRoZSBuZWdhdGl2ZSBlZGdlLiBUaGlz
IHNob3VsZCBiZSB0ZXN0ZWQgb24gYQorCSAqIHJlYWwgZGV2aWNlLgorCSAqLworCWNvbm5lY3Rv
ci0+ZGlzcGxheV9pbmZvLmJ1c19mbGFncyA9IERSTV9CVVNfRkxBR19ERV9ISUdICisJCQkJCSAg
fCBEUk1fQlVTX0ZMQUdfU1lOQ19TQU1QTEVfUE9TRURHRQorCQkJCQkgIHwgRFJNX0JVU19GTEFH
X1BJWERBVEFfU0FNUExFX05FR0VER0U7CisKKwlyZXR1cm4gMTsKK30KKworc3RhdGljIGNvbnN0
IHN0cnVjdCBkcm1fcGFuZWxfZnVuY3MgbHMwMzd2N2R3MDFfZnVuY3MgPSB7CisJLmRpc2FibGUg
PSBsczAzN3Y3ZHcwMV9kaXNhYmxlLAorCS51bnByZXBhcmUgPSBsczAzN3Y3ZHcwMV91bnByZXBh
cmUsCisJLnByZXBhcmUgPSBsczAzN3Y3ZHcwMV9wcmVwYXJlLAorCS5lbmFibGUgPSBsczAzN3Y3
ZHcwMV9lbmFibGUsCisJLmdldF9tb2RlcyA9IGxzMDM3djdkdzAxX2dldF9tb2RlcywKK307CisK
K3N0YXRpYyBpbnQgbHMwMzd2N2R3MDFfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRl
dikKK3sKKwlzdHJ1Y3QgbHMwMzd2N2R3MDFfcGFuZWwgKmxjZDsKKworCWxjZCA9IGRldm1fa3ph
bGxvYygmcGRldi0+ZGV2LCBzaXplb2YoKmxjZCksIEdGUF9LRVJORUwpOworCWlmIChsY2QgPT0g
TlVMTCkKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlwbGF0Zm9ybV9zZXRfZHJ2ZGF0YShwZGV2LCBs
Y2QpOworCWxjZC0+cGRldiA9IHBkZXY7CisKKwlsY2QtPnZkZCA9IGRldm1fcmVndWxhdG9yX2dl
dCgmcGRldi0+ZGV2LCAiZW52ZGQiKTsKKwlpZiAoSVNfRVJSKGxjZC0+dmRkKSkgeworCQlkZXZf
ZXJyKCZwZGV2LT5kZXYsICJmYWlsZWQgdG8gZ2V0IHJlZ3VsYXRvclxuIik7CisJCXJldHVybiBQ
VFJfRVJSKGxjZC0+dmRkKTsKKwl9CisKKwlsY2QtPmluaV9ncGlvID0gZGV2bV9ncGlvZF9nZXQo
JnBkZXYtPmRldiwgImVuYWJsZSIsIEdQSU9EX09VVF9MT1cpOworCWlmIChJU19FUlIobGNkLT5p
bmlfZ3BpbykpIHsKKwkJZGV2X2VycigmcGRldi0+ZGV2LCAiZmFpbGVkIHRvIGdldCBlbmFibGUg
Z3Bpb1xuIik7CisJCXJldHVybiBQVFJfRVJSKGxjZC0+aW5pX2dwaW8pOworCX0KKworCWxjZC0+
cmVzYl9ncGlvID0gZGV2bV9ncGlvZF9nZXQoJnBkZXYtPmRldiwgInJlc2V0IiwgR1BJT0RfT1VU
X0xPVyk7CisJaWYgKElTX0VSUihsY2QtPnJlc2JfZ3BpbykpIHsKKwkJZGV2X2VycigmcGRldi0+
ZGV2LCAiZmFpbGVkIHRvIGdldCByZXNldCBncGlvXG4iKTsKKwkJcmV0dXJuIFBUUl9FUlIobGNk
LT5yZXNiX2dwaW8pOworCX0KKworCWxjZC0+bW9fZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0X2luZGV4
KCZwZGV2LT5kZXYsICJtb2RlIiwgMCwKKwkJCQkJICAgIEdQSU9EX09VVF9MT1cpOworCWlmIChJ
U19FUlIobGNkLT5tb19ncGlvKSkgeworCQlkZXZfZXJyKCZwZGV2LT5kZXYsICJmYWlsZWQgdG8g
Z2V0IG1vZGVbMF0gZ3Bpb1xuIik7CisJCXJldHVybiBQVFJfRVJSKGxjZC0+bW9fZ3Bpbyk7CisJ
fQorCisJbGNkLT5scl9ncGlvID0gZGV2bV9ncGlvZF9nZXRfaW5kZXgoJnBkZXYtPmRldiwgIm1v
ZGUiLCAxLAorCQkJCQkgICAgR1BJT0RfT1VUX0xPVyk7CisJaWYgKElTX0VSUihsY2QtPmxyX2dw
aW8pKSB7CisJCWRldl9lcnIoJnBkZXYtPmRldiwgImZhaWxlZCB0byBnZXQgbW9kZVsxXSBncGlv
XG4iKTsKKwkJcmV0dXJuIFBUUl9FUlIobGNkLT5scl9ncGlvKTsKKwl9CisKKwlsY2QtPnVkX2dw
aW8gPSBkZXZtX2dwaW9kX2dldF9pbmRleCgmcGRldi0+ZGV2LCAibW9kZSIsIDIsCisJCQkJCSAg
ICBHUElPRF9PVVRfTE9XKTsKKwlpZiAoSVNfRVJSKGxjZC0+dWRfZ3BpbykpIHsKKwkJZGV2X2Vy
cigmcGRldi0+ZGV2LCAiZmFpbGVkIHRvIGdldCBtb2RlWzJdIGdwaW9cbiIpOworCQlyZXR1cm4g
UFRSX0VSUihsY2QtPnVkX2dwaW8pOworCX0KKworCWRybV9wYW5lbF9pbml0KCZsY2QtPnBhbmVs
KTsKKwlsY2QtPnBhbmVsLmRldiA9ICZwZGV2LT5kZXY7CisJbGNkLT5wYW5lbC5mdW5jcyA9ICZs
czAzN3Y3ZHcwMV9mdW5jczsKKworCXJldHVybiBkcm1fcGFuZWxfYWRkKCZsY2QtPnBhbmVsKTsK
K30KKworc3RhdGljIGludCBsczAzN3Y3ZHcwMV9yZW1vdmUoc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqcGRldikKK3sKKwlzdHJ1Y3QgbHMwMzd2N2R3MDFfcGFuZWwgKmxjZCA9IHBsYXRmb3JtX2dl
dF9kcnZkYXRhKHBkZXYpOworCisJZHJtX3BhbmVsX3JlbW92ZSgmbGNkLT5wYW5lbCk7CisJZHJt
X3BhbmVsX2Rpc2FibGUoJmxjZC0+cGFuZWwpOworCWRybV9wYW5lbF91bnByZXBhcmUoJmxjZC0+
cGFuZWwpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNl
X2lkIGxzMDM3djdkdzAxX29mX21hdGNoW10gPSB7CisJeyAuY29tcGF0aWJsZSA9ICJzaGFycCxs
czAzN3Y3ZHcwMSIsIH0sCisJeyAvKiBzZW50aW5lbCAqLyB9LAorfTsKKworTU9EVUxFX0RFVklD
RV9UQUJMRShvZiwgbHMwMzd2N2R3MDFfb2ZfbWF0Y2gpOworCitzdGF0aWMgc3RydWN0IHBsYXRm
b3JtX2RyaXZlciBsczAzN3Y3ZHcwMV9kcml2ZXIgPSB7CisJLnByb2JlCQk9IGxzMDM3djdkdzAx
X3Byb2JlLAorCS5yZW1vdmUJCT0gX19leGl0X3AobHMwMzd2N2R3MDFfcmVtb3ZlKSwKKwkuZHJp
dmVyCQk9IHsKKwkJLm5hbWUgPSAicGFuZWwtc2hhcnAtbHMwMzd2N2R3MDEiLAorCQkub2ZfbWF0
Y2hfdGFibGUgPSBsczAzN3Y3ZHcwMV9vZl9tYXRjaCwKKwl9LAorfTsKKworbW9kdWxlX3BsYXRm
b3JtX2RyaXZlcihsczAzN3Y3ZHcwMV9kcml2ZXIpOworCitNT0RVTEVfQVVUSE9SKCJUb21pIFZh
bGtlaW5lbiA8dG9taS52YWxrZWluZW5AdGkuY29tPiIpOworTU9EVUxFX0RFU0NSSVBUSU9OKCJT
aGFycCBMUzAzN1Y3RFcwMSBQYW5lbCBEcml2ZXIiKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwiKTsK
LS0gClJlZ2FyZHMsCgpMYXVyZW50IFBpbmNoYXJ0CgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBs
aXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1h
bi9saXN0aW5mby9kcmktZGV2ZWw=
