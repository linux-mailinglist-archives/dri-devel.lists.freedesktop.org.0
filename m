Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 87F6B20CE80
	for <lists+dri-devel@lfdr.de>; Mon, 29 Jun 2020 14:21:39 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6C4D889DDF;
	Mon, 29 Jun 2020 12:21:36 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x542.google.com (mail-ed1-x542.google.com
 [IPv6:2a00:1450:4864:20::542])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B6EB089DA6
 for <dri-devel@lists.freedesktop.org>; Mon, 29 Jun 2020 12:21:35 +0000 (UTC)
Received: by mail-ed1-x542.google.com with SMTP id e22so12632200edq.8
 for <dri-devel@lists.freedesktop.org>; Mon, 29 Jun 2020 05:21:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=JEJYoPifBpengU6gvHM9bmN777OVyj1LlMjU68/MFYU=;
 b=DbeirTp6YGw1RLgKL5wpSW4ihI1Q5JjlemUkoCsrp11Ek4fZx3XhMIk3lE+luBCelr
 ++ks3yETl4w3It2OR30cvghwBph0o4+v6HnUvgiBAO8W7IZZF6l2ZmENJA+J6sAAJTCz
 3zIbkghfR/6wxo7CIfN/OhdadFlhFldYQ74Jc3triRJvJNBjCmolyNYasXRlsFKj5rpy
 pEM0JggnTP1AqVgyD8/gWte+vu7ySisl+NWI4aeTTvCq57GqafhK0dWCB7o4rwH2SkTv
 yjBUBy1cI3MUuKH4MOT4rm8co8RrVAzI02q4XcUIvj0OpMLrdo7rAtiRZSPh9xj6JRIh
 EGuw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=JEJYoPifBpengU6gvHM9bmN777OVyj1LlMjU68/MFYU=;
 b=AkjEHb9tZ95cbyIIWzcPFRmyLTC5MdjFoIKnjJjdb01wG9HKgGR7WIUoNWTSdmEtia
 zAqzFN8LfghGMSUszmJQ4vxrdgqXauZD+ieBib/ci+7loRD1RVB58hsJEEBoI7ZxTfnq
 IKgZe2hZdhTNFlZRuPp1MNRmwI/XT0kKtbFcn3OJaAsF5Xw99FDN6BvDUW4l+fmAXwOW
 cVTFDVH6hnHBEe0/IO9NxYJjhUlPZ/2YMspQ7GPra6+YVkIv1yEhzQSi7LpIQhHezn+7
 KIbZ7mHZ3/yNKTy70tZT0yfd2YCpgM2pj6TqWIMjtW5CXhb9kRTsRnpIWyJDoZNdiONK
 9Qog==
X-Gm-Message-State: AOAM531iMQ4pxceDkJzEALi8I3Sxl1ADWOW6gt6niFKIEvA3oH8XoETK
 BWm74ZFx60zFN8AcgwkpTuevKalg
X-Google-Smtp-Source: ABdhPJwvPY4XaZ+7bYp3uc3x0BcE6B+giCzeO5jULIqEX/oG/aB3OJ9rfQ4Cgyc43DoIrMPCmSjvGA==
X-Received: by 2002:aa7:dacb:: with SMTP id x11mr15144075eds.280.1593433294122; 
 Mon, 29 Jun 2020 05:21:34 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:edfe:abc1:733c:b011])
 by smtp.gmail.com with ESMTPSA id v24sm18953786eds.71.2020.06.29.05.21.33
 for <dri-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 29 Jun 2020 05:21:33 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH 1/2] drm/ttm: cleanup ttm_mem_type_manager_func.get_node
 interface v2
Date: Mon, 29 Jun 2020 14:21:31 +0200
Message-Id: <20200629122132.2371-1-christian.koenig@amd.com>
X-Mailer: git-send-email 2.17.1
MIME-Version: 1.0
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SW5zdGVhZCBvZiBzaWduYWxpbmcgZmFpbHVyZSBieSBzZXR0aW5nIHRoZSBub2RlIHBvaW50ZXIg
dG8KTlVMTCBkbyBzbyBieSByZXR1cm5pbmcgLUVOT1NQQy4KCnYyOiBhZGQgbWVtc2V0KCkgdG8g
bWFrZSBzdXJlIHRoYXQgbWVtIGlzIGFsd2F5cyBpbml0aWFsaXplZC4KClNpZ25lZC1vZmYtYnk6
IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KLS0tCiBkcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZ3R0X21nci5jICAgfCAgNCArLS0tCiBkcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYyAgfCAgNSArKy0tLQogZHJpdmVy
cy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV90dG0uYyAgICAgICAgIHwgIDggLS0tLS0tLS0KIGRy
aXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMgICAgICAgICAgICAgICAgICB8IDEyICsrKysrKy0t
LS0tLQogZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fbWFuYWdlci5jICAgICAgICAgIHwgIDIg
Ky0KIGRyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2dtcmlkX21hbmFnZXIuYyB8ICA0ICst
LS0KIDYgZmlsZXMgY2hhbmdlZCwgMTEgaW5zZXJ0aW9ucygrKSwgMjQgZGVsZXRpb25zKC0pCgpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2d0dF9tZ3IuYyBi
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9ndHRfbWdyLmMKaW5kZXggNjI3MTA0
NDAxZTg0Li4yYmFhODAyMjRmYTQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9ndHRfbWdyLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2d0dF9tZ3IuYwpAQCAtMjI5LDcgKzIyOSw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2d0dF9t
Z3JfbmV3KHN0cnVjdCB0dG1fbWVtX3R5cGVfbWFuYWdlciAqbWFuLAogCWlmICgoJnRiby0+bWVt
ID09IG1lbSB8fCB0Ym8tPm1lbS5tZW1fdHlwZSAhPSBUVE1fUExfVFQpICYmCiAJICAgIGF0b21p
YzY0X3JlYWQoJm1nci0+YXZhaWxhYmxlKSA8IG1lbS0+bnVtX3BhZ2VzKSB7CiAJCXNwaW5fdW5s
b2NrKCZtZ3ItPmxvY2spOwotCQlyZXR1cm4gMDsKKwkJcmV0dXJuIC1FTk9TUEM7CiAJfQogCWF0
b21pYzY0X3N1YihtZW0tPm51bV9wYWdlcywgJm1nci0+YXZhaWxhYmxlKTsKIAlzcGluX3VubG9j
aygmbWdyLT5sb2NrKTsKQEAgLTI0OSw4ICsyNDksNiBAQCBzdGF0aWMgaW50IGFtZGdwdV9ndHRf
bWdyX25ldyhzdHJ1Y3QgdHRtX21lbV90eXBlX21hbmFnZXIgKm1hbiwKIAkJciA9IGFtZGdwdV9n
dHRfbWdyX2FsbG9jKG1hbiwgdGJvLCBwbGFjZSwgbWVtKTsKIAkJaWYgKHVubGlrZWx5KHIpKSB7
CiAJCQlrZnJlZShub2RlKTsKLQkJCW1lbS0+bW1fbm9kZSA9IE5VTEw7Ci0JCQlyID0gMDsKIAkJ
CWdvdG8gZXJyX291dDsKIAkJfQogCX0gZWxzZSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV92cmFtX21nci5jCmluZGV4IDEyOGE2NjdlZDhmYS4uZThkMWRkNTY0MDA2IDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdnJhbV9tZ3IuYwpAQCAtMzM2
LDggKzMzNiw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3ZyYW1fbWdyX25ldyhzdHJ1Y3QgdHRtX21l
bV90eXBlX21hbmFnZXIgKm1hbiwKIAltZW1fYnl0ZXMgPSAodTY0KW1lbS0+bnVtX3BhZ2VzIDw8
IFBBR0VfU0hJRlQ7CiAJaWYgKGF0b21pYzY0X2FkZF9yZXR1cm4obWVtX2J5dGVzLCAmbWdyLT51
c2FnZSkgPiBtYXhfYnl0ZXMpIHsKIAkJYXRvbWljNjRfc3ViKG1lbV9ieXRlcywgJm1nci0+dXNh
Z2UpOwotCQltZW0tPm1tX25vZGUgPSBOVUxMOwotCQlyZXR1cm4gMDsKKwkJcmV0dXJuIC1FTk9T
UEM7CiAJfQogCiAJaWYgKHBsYWNlLT5mbGFncyAmIFRUTV9QTF9GTEFHX0NPTlRJR1VPVVMpIHsK
QEAgLTQxNyw3ICs0MTYsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV92cmFtX21ncl9uZXcoc3RydWN0
IHR0bV9tZW1fdHlwZV9tYW5hZ2VyICptYW4sCiAJYXRvbWljNjRfc3ViKG1lbS0+bnVtX3BhZ2Vz
IDw8IFBBR0VfU0hJRlQsICZtZ3ItPnVzYWdlKTsKIAogCWt2ZnJlZShub2Rlcyk7Ci0JcmV0dXJu
IHIgPT0gLUVOT1NQQyA/IDAgOiByOworCXJldHVybiByOwogfQogCiAvKioKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0v
bm91dmVhdS9ub3V2ZWF1X3R0bS5jCmluZGV4IDdjYTBhMjQ5ODUzMi4uZTg5ZWEwNTJjZjcxIDEw
MDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X3R0bS5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfdHRtLmMKQEAgLTc1LDEwICs3NSw2IEBAIG5v
dXZlYXVfdnJhbV9tYW5hZ2VyX25ldyhzdHJ1Y3QgdHRtX21lbV90eXBlX21hbmFnZXIgKm1hbiwK
IAlyZXQgPSBub3V2ZWF1X21lbV92cmFtKHJlZywgbnZiby0+Y29udGlnLCBudmJvLT5wYWdlKTsK
IAlpZiAocmV0KSB7CiAJCW5vdXZlYXVfbWVtX2RlbChyZWcpOwotCQlpZiAocmV0ID09IC1FTk9T
UEMpIHsKLQkJCXJlZy0+bW1fbm9kZSA9IE5VTEw7Ci0JCQlyZXR1cm4gMDsKLQkJfQogCQlyZXR1
cm4gcmV0OwogCX0KIApAQCAtMTM5LDEwICsxMzUsNiBAQCBudjA0X2dhcnRfbWFuYWdlcl9uZXco
c3RydWN0IHR0bV9tZW1fdHlwZV9tYW5hZ2VyICptYW4sCiAJCQkgICByZWctPm51bV9wYWdlcyA8
PCBQQUdFX1NISUZULCAmbWVtLT52bWFbMF0pOwogCWlmIChyZXQpIHsKIAkJbm91dmVhdV9tZW1f
ZGVsKHJlZyk7Ci0JCWlmIChyZXQgPT0gLUVOT1NQQykgewotCQkJcmVnLT5tbV9ub2RlID0gTlVM
TDsKLQkJCXJldHVybiAwOwotCQl9CiAJCXJldHVybiByZXQ7CiAJfQogCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8u
YwppbmRleCBmNzhjZmM3NmFkNzguLjA2YjhiYzBkOGYyMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3R0bS90dG1fYm8uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCkBA
IC05MDksMTAgKzkwOSwxMCBAQCBzdGF0aWMgaW50IHR0bV9ib19tZW1fZm9yY2Vfc3BhY2Uoc3Ry
dWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywKIAl0aWNrZXQgPSBkbWFfcmVzdl9sb2NraW5nX2N0
eChiby0+YmFzZS5yZXN2KTsKIAlkbyB7CiAJCXJldCA9ICgqbWFuLT5mdW5jLT5nZXRfbm9kZSko
bWFuLCBibywgcGxhY2UsIG1lbSk7Ci0JCWlmICh1bmxpa2VseShyZXQgIT0gMCkpCi0JCQlyZXR1
cm4gcmV0OwotCQlpZiAobWVtLT5tbV9ub2RlKQorCQlpZiAobGlrZWx5KCFyZXQpKQogCQkJYnJl
YWs7CisJCWlmICh1bmxpa2VseShyZXQgIT0gLUVOT1NQQykpCisJCQlyZXR1cm4gcmV0OwogCQly
ZXQgPSB0dG1fbWVtX2V2aWN0X2ZpcnN0KGJkZXYsIG1lbS0+bWVtX3R5cGUsIHBsYWNlLCBjdHgs
CiAJCQkJCSAgdGlja2V0KTsKIAkJaWYgKHVubGlrZWx5KHJldCAhPSAwKSkKQEAgLTEwNTYsMTIg
KzEwNTYsMTEgQEAgaW50IHR0bV9ib19tZW1fc3BhY2Uoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0
ICpibywKIAogCQltYW4gPSAmYmRldi0+bWFuW21lbS0+bWVtX3R5cGVdOwogCQlyZXQgPSAoKm1h
bi0+ZnVuYy0+Z2V0X25vZGUpKG1hbiwgYm8sIHBsYWNlLCBtZW0pOworCQlpZiAocmV0ID09IC1F
Tk9TUEMpCisJCQljb250aW51ZTsKIAkJaWYgKHVubGlrZWx5KHJldCkpCiAJCQlnb3RvIGVycm9y
OwogCi0JCWlmICghbWVtLT5tbV9ub2RlKQotCQkJY29udGludWU7Ci0KIAkJcmV0ID0gdHRtX2Jv
X2FkZF9tb3ZlX2ZlbmNlKGJvLCBtYW4sIG1lbSwgY3R4LT5ub193YWl0X2dwdSk7CiAJCWlmICh1
bmxpa2VseShyZXQpKSB7CiAJCQkoKm1hbi0+ZnVuYy0+cHV0X25vZGUpKG1hbiwgbWVtKTsKQEAg
LTExMjEsNiArMTEyMCw3IEBAIHN0YXRpYyBpbnQgdHRtX2JvX21vdmVfYnVmZmVyKHN0cnVjdCB0
dG1fYnVmZmVyX29iamVjdCAqYm8sCiAKIAlkbWFfcmVzdl9hc3NlcnRfaGVsZChiby0+YmFzZS5y
ZXN2KTsKIAorCW1lbXNldCgmbWVtLCAwLCBzaXplb2YobWVtKSk7CiAJbWVtLm51bV9wYWdlcyA9
IGJvLT5udW1fcGFnZXM7CiAJbWVtLnNpemUgPSBtZW0ubnVtX3BhZ2VzIDw8IFBBR0VfU0hJRlQ7
CiAJbWVtLnBhZ2VfYWxpZ25tZW50ID0gYm8tPm1lbS5wYWdlX2FsaWdubWVudDsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX21hbmFnZXIuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2JvX21hbmFnZXIuYwppbmRleCAxOGQzZGViY2M5NDkuLmZhY2QzMDQ5YzNhYSAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fbWFuYWdlci5jCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX21hbmFnZXIuYwpAQCAtODYsNyArODYsNyBAQCBzdGF0
aWMgaW50IHR0bV9ib19tYW5fZ2V0X25vZGUoc3RydWN0IHR0bV9tZW1fdHlwZV9tYW5hZ2VyICpt
YW4sCiAJCW1lbS0+c3RhcnQgPSBub2RlLT5zdGFydDsKIAl9CiAKLQlyZXR1cm4gMDsKKwlyZXR1
cm4gcmV0OwogfQogCiBzdGF0aWMgdm9pZCB0dG1fYm9fbWFuX3B1dF9ub2RlKHN0cnVjdCB0dG1f
bWVtX3R5cGVfbWFuYWdlciAqbWFuLApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dm
eC92bXdnZnhfZ21yaWRfbWFuYWdlci5jIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhf
Z21yaWRfbWFuYWdlci5jCmluZGV4IDdkYTc1MmNhMWMzNC4uNGE3NmZjNzExNGFkIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9nbXJpZF9tYW5hZ2VyLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfZ21yaWRfbWFuYWdlci5jCkBAIC01Myw4ICs1
Myw2IEBAIHN0YXRpYyBpbnQgdm13X2dtcmlkX21hbl9nZXRfbm9kZShzdHJ1Y3QgdHRtX21lbV90
eXBlX21hbmFnZXIgKm1hbiwKIAkJKHN0cnVjdCB2bXdnZnhfZ21yaWRfbWFuICopbWFuLT5wcml2
OwogCWludCBpZDsKIAotCW1lbS0+bW1fbm9kZSA9IE5VTEw7Ci0KIAlpZCA9IGlkYV9hbGxvY19t
YXgoJmdtYW4tPmdtcl9pZGEsIGdtYW4tPm1heF9nbXJfaWRzIC0gMSwgR0ZQX0tFUk5FTCk7CiAJ
aWYgKGlkIDwgMCkKIAkJcmV0dXJuIChpZCAhPSAtRU5PTUVNID8gMCA6IGlkKTsKQEAgLTc4LDcg
Kzc2LDcgQEAgc3RhdGljIGludCB2bXdfZ21yaWRfbWFuX2dldF9ub2RlKHN0cnVjdCB0dG1fbWVt
X3R5cGVfbWFuYWdlciAqbWFuLAogCWdtYW4tPnVzZWRfZ21yX3BhZ2VzIC09IGJvLT5udW1fcGFn
ZXM7CiAJc3Bpbl91bmxvY2soJmdtYW4tPmxvY2spOwogCWlkYV9mcmVlKCZnbWFuLT5nbXJfaWRh
LCBpZCk7Ci0JcmV0dXJuIDA7CisJcmV0dXJuIC1FTk9TUEM7CiB9CiAKIHN0YXRpYyB2b2lkIHZt
d19nbXJpZF9tYW5fcHV0X25vZGUoc3RydWN0IHR0bV9tZW1fdHlwZV9tYW5hZ2VyICptYW4sCi0t
IAoyLjE3LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CmRyaS1kZXZlbCBtYWlsaW5nIGxpc3QKZHJpLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2RyaS1kZXZlbAo=
