Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 9DB559631E
	for <lists+dri-devel@lfdr.de>; Tue, 20 Aug 2019 16:54:05 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1B2316E42E;
	Tue, 20 Aug 2019 14:53:56 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mail-ed1-x542.google.com (mail-ed1-x542.google.com
 [IPv6:2a00:1450:4864:20::542])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DB0436E402
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 14:53:53 +0000 (UTC)
Received: by mail-ed1-x542.google.com with SMTP id m44so6649473edd.9
 for <dri-devel@lists.freedesktop.org>; Tue, 20 Aug 2019 07:53:53 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=CdwHAb7ZPDfBP0UbOZKMmtGmYuLNauAEc2DOfgM2fkg=;
 b=mV0dzwLYT34N9KO0R0tSvrP/kofWpTn3CU/UcMLTMkU3KMTPubSaopqj88uUNNzc71
 p0zgEqCZKICmv7JFSRp+G8QZzS5lcr+aJzsIG5MyU6Tap0xkfKHlDEdKyNgblviGIs03
 X7LXGH/YUU1Ih9NwLAqtakj2zaUke0qBjLeLmVFfbHsSHmsbMNrtG5ROANj1yJlqB9RE
 qmzXA5YoC+Yj351n9ALBy0aRqPW2/v46HT0BpRbD4m4nSumEWDBEUhMbRNkjtFPc4Tnx
 IGkRWyZDgJHD4f9EJtuGHC0mgYKqZbHD+W9xGrbKQV/VBbZYVD9lyiev0aCiKcTlcnpO
 oW1A==
X-Gm-Message-State: APjAAAWNwdvuPMRgbppMzRLbs4K86E0mcXmwNoADxc4WtUDbd5lX1CTI
 Di+sukh35AFa557qyeUwpQJ7rSUFIdvHlA==
X-Google-Smtp-Source: APXvYqz6w4nIkLDcD7Pi4H7qZDis/dATHqrreS4ooqJsT3KBWVWXdhKjrRR7UWGSjkXsoa+fZ8gZVg==
X-Received: by 2002:a05:6402:1446:: with SMTP id
 d6mr32052510edx.102.1566312831689; 
 Tue, 20 Aug 2019 07:53:51 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:569e:0:3106:d637:d723:e855])
 by smtp.gmail.com with ESMTPSA id a16sm2644744ejr.10.2019.08.20.07.53.50
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 20 Aug 2019 07:53:50 -0700 (PDT)
From: Daniel Vetter <daniel.vetter@ffwll.ch>
To: DRI Development <dri-devel@lists.freedesktop.org>
Subject: [PATCH 3/3] drm/ttm: remove ttm_bo_wait_unreserved
Date: Tue, 20 Aug 2019 16:53:36 +0200
Message-Id: <20190820145336.15649-4-daniel.vetter@ffwll.ch>
X-Mailer: git-send-email 2.23.0.rc1
In-Reply-To: <20190820145336.15649-1-daniel.vetter@ffwll.ch>
References: <20190820145336.15649-1-daniel.vetter@ffwll.ch>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=ffwll.ch; s=google;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=CdwHAb7ZPDfBP0UbOZKMmtGmYuLNauAEc2DOfgM2fkg=;
 b=f6Jny7bsmy5xKFPwtA4+4AjVW7/hZzhlaoPtURHzaSk74Di3wUq+9ZnBXMApQ45sXA
 OsEjO6XSo4/TIEy32WgaNt2ZbCzOxOltDkpGvvf6AmK/ESV6MhjzNzhDhVASOb/plICX
 I/NrWCcwN7D9Yi4FOXzG5/xsoYTq0Db1Y5Si4=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Thomas Hellstrom <thellstrom@vmware.com>,
 Daniel Vetter <daniel.vetter@ffwll.ch>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 Huang Rui <ray.huang@amd.com>,
 VMware Graphics <linux-graphics-maintainer@vmware.com>,
 Gerd Hoffmann <kraxel@redhat.com>, Daniel Vetter <daniel.vetter@intel.com>,
 Christian Koenig <christian.koenig@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

V2l0aCBub3V2ZWF1IGZpeGVkIGFsbCB0dG0tdXNpbmcgZHJpdmVzIGhhdmUgdGhlIGNvcnJlY3Qg
bmVzdGluZyBvZgptbWFwX3NlbSB2cyBkbWFfcmVzdiwgYW5kIHdlIGNhbiBqdXN0IGxvY2sgdGhl
IGJ1ZmZlci4KCkFzc3VtaW5nIEkgZGlkbid0IHNjcmV3IHVwIGFueXRoaW5nIHdpdGggbXkgYXVk
aXQgb2YgY291cnNlLgoKU2lnbmVkLW9mZi1ieTogRGFuaWVsIFZldHRlciA8ZGFuaWVsLnZldHRl
ckBpbnRlbC5jb20+CkNjOiBDaHJpc3RpYW4gS29lbmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5j
b20+CkNjOiBIdWFuZyBSdWkgPHJheS5odWFuZ0BhbWQuY29tPgpDYzogR2VyZCBIb2ZmbWFubiA8
a3JheGVsQHJlZGhhdC5jb20+CkNjOiAiVk13YXJlIEdyYXBoaWNzIiA8bGludXgtZ3JhcGhpY3Mt
bWFpbnRhaW5lckB2bXdhcmUuY29tPgpDYzogVGhvbWFzIEhlbGxzdHJvbSA8dGhlbGxzdHJvbUB2
bXdhcmUuY29tPgotLS0KIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMgICAgfCAzNCAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2Jv
X3ZtLmMgfCAyNiArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiBpbmNsdWRlL2RybS90dG0vdHRt
X2JvX2FwaS5oICAgIHwgIDEgLQogMyBmaWxlcyBjaGFuZ2VkLCAxIGluc2VydGlvbigrKSwgNjAg
ZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYyBi
L2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKaW5kZXggMjBmZjU2ZjI3YWE0Li5hOTUyZGQ2
MjRiMDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKKysrIGIvZHJp
dmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYwpAQCAtMTk1NCwzNyArMTk1NCwzIEBAIHZvaWQgdHRt
X2JvX3N3YXBvdXRfYWxsKHN0cnVjdCB0dG1fYm9fZGV2aWNlICpiZGV2KQogCQk7CiB9CiBFWFBP
UlRfU1lNQk9MKHR0bV9ib19zd2Fwb3V0X2FsbCk7Ci0KLS8qKgotICogdHRtX2JvX3dhaXRfdW5y
ZXNlcnZlZCAtIGludGVycnVwdGlibGUgd2FpdCBmb3IgYSBidWZmZXIgb2JqZWN0IHRvIGJlY29t
ZQotICogdW5yZXNlcnZlZAotICoKLSAqIEBibzogUG9pbnRlciB0byBidWZmZXIKLSAqLwotaW50
IHR0bV9ib193YWl0X3VucmVzZXJ2ZWQoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibykKLXsK
LQlpbnQgcmV0OwotCi0JLyoKLQkgKiBJbiB0aGUgYWJzZW5zZSBvZiBhIHdhaXRfdW5sb2NrZWQg
QVBJLAotCSAqIFVzZSB0aGUgYm86Ond1X211dGV4IHRvIGF2b2lkIHRyaWdnZXJpbmcgbGl2ZWxv
Y2tzIGR1ZSB0bwotCSAqIGNvbmN1cnJlbnQgdXNlIG9mIHRoaXMgZnVuY3Rpb24uIE5vdGUgdGhh
dCB0aGlzIHVzZSBvZgotCSAqIGJvOjp3dV9tdXRleCBjYW4gZ28gYXdheSBpZiB3ZSBjaGFuZ2Ug
bG9ja2luZyBvcmRlciB0bwotCSAqIG1tYXBfc2VtIC0+IGJvOjpyZXNlcnZlLgotCSAqLwotCXJl
dCA9IG11dGV4X2xvY2tfaW50ZXJydXB0aWJsZSgmYm8tPnd1X211dGV4KTsKLQlpZiAodW5saWtl
bHkocmV0ICE9IDApKQotCQlyZXR1cm4gLUVSRVNUQVJUU1lTOwotCWlmICghZG1hX3Jlc3ZfaXNf
bG9ja2VkKGJvLT5iYXNlLnJlc3YpKQotCQlnb3RvIG91dF91bmxvY2s7Ci0JcmV0ID0gZG1hX3Jl
c3ZfbG9ja19pbnRlcnJ1cHRpYmxlKGJvLT5iYXNlLnJlc3YsIE5VTEwpOwotCWlmIChyZXQgPT0g
LUVJTlRSKQotCQlyZXQgPSAtRVJFU1RBUlRTWVM7Ci0JaWYgKHVubGlrZWx5KHJldCAhPSAwKSkK
LQkJZ290byBvdXRfdW5sb2NrOwotCWRtYV9yZXN2X3VubG9jayhiby0+YmFzZS5yZXN2KTsKLQot
b3V0X3VubG9jazoKLQltdXRleF91bmxvY2soJmJvLT53dV9tdXRleCk7Ci0JcmV0dXJuIHJldDsK
LX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX3ZtLmMgYi9kcml2ZXJz
L2dwdS9kcm0vdHRtL3R0bV9ib192bS5jCmluZGV4IDc2ZWVkYjk2MzY5My4uNTA1ZTE3ODdhZWVh
IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS90dG0vdHRtX2JvX3ZtLmMKQEAgLTEyNSwzMSArMTI1LDcgQEAgc3RhdGljIHZt
X2ZhdWx0X3QgdHRtX2JvX3ZtX2ZhdWx0KHN0cnVjdCB2bV9mYXVsdCAqdm1mKQogCQkmYmRldi0+
bWFuW2JvLT5tZW0ubWVtX3R5cGVdOwogCXN0cnVjdCB2bV9hcmVhX3N0cnVjdCBjdm1hOwogCi0J
LyoKLQkgKiBXb3JrIGFyb3VuZCBsb2NraW5nIG9yZGVyIHJldmVyc2FsIGluIGZhdWx0IC8gbm9w
Zm4KLQkgKiBiZXR3ZWVuIG1tYXBfc2VtIGFuZCBib19yZXNlcnZlOiBQZXJmb3JtIGEgdHJ5bG9j
ayBvcGVyYXRpb24KLQkgKiBmb3IgcmVzZXJ2ZSwgYW5kIGlmIGl0IGZhaWxzLCByZXRyeSB0aGUg
ZmF1bHQgYWZ0ZXIgd2FpdGluZwotCSAqIGZvciB0aGUgYnVmZmVyIHRvIGJlY29tZSB1bnJlc2Vy
dmVkLgotCSAqLwotCWlmICh1bmxpa2VseSghZG1hX3Jlc3ZfdHJ5bG9jayhiby0+YmFzZS5yZXN2
KSkpIHsKLQkJaWYgKHZtZi0+ZmxhZ3MgJiBGQVVMVF9GTEFHX0FMTE9XX1JFVFJZKSB7Ci0JCQlp
ZiAoISh2bWYtPmZsYWdzICYgRkFVTFRfRkxBR19SRVRSWV9OT1dBSVQpKSB7Ci0JCQkJdHRtX2Jv
X2dldChibyk7Ci0JCQkJdXBfcmVhZCgmdm1mLT52bWEtPnZtX21tLT5tbWFwX3NlbSk7Ci0JCQkJ
KHZvaWQpIHR0bV9ib193YWl0X3VucmVzZXJ2ZWQoYm8pOwotCQkJCXR0bV9ib19wdXQoYm8pOwot
CQkJfQotCi0JCQlyZXR1cm4gVk1fRkFVTFRfUkVUUlk7Ci0JCX0KLQotCQkvKgotCQkgKiBJZiB3
ZSdkIHdhbnQgdG8gY2hhbmdlIGxvY2tpbmcgb3JkZXIgdG8KLQkJICogbW1hcF9zZW0gLT4gYm86
OnJlc2VydmUsIHdlJ2QgdXNlIGEgYmxvY2tpbmcgcmVzZXJ2ZSBoZXJlCi0JCSAqIGluc3RlYWQg
b2YgcmV0cnlpbmcgdGhlIGZhdWx0Li4uCi0JCSAqLwotCQlyZXR1cm4gVk1fRkFVTFRfTk9QQUdF
OwotCX0KKwlkbWFfcmVzdl9sb2NrKGJvLT5iYXNlLnJlc3YsIE5VTEwpOwogCiAJLyoKIAkgKiBS
ZWZ1c2UgdG8gZmF1bHQgaW1wb3J0ZWQgcGFnZXMuIFRoaXMgc2hvdWxkIGJlIGhhbmRsZWQKZGlm
ZiAtLWdpdCBhL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fYXBpLmggYi9pbmNsdWRlL2RybS90dG0v
dHRtX2JvX2FwaS5oCmluZGV4IDQzYzQ5MjlhMjE3MS4uNmI1MGU2MjRlM2UyIDEwMDY0NAotLS0g
YS9pbmNsdWRlL2RybS90dG0vdHRtX2JvX2FwaS5oCisrKyBiL2luY2x1ZGUvZHJtL3R0bS90dG1f
Ym9fYXBpLmgKQEAgLTc2NSw3ICs3NjUsNiBAQCBzc2l6ZV90IHR0bV9ib19pbyhzdHJ1Y3QgdHRt
X2JvX2RldmljZSAqYmRldiwgc3RydWN0IGZpbGUgKmZpbHAsCiBpbnQgdHRtX2JvX3N3YXBvdXQo
c3RydWN0IHR0bV9ib19nbG9iYWwgKmdsb2IsCiAJCQlzdHJ1Y3QgdHRtX29wZXJhdGlvbl9jdHgg
KmN0eCk7CiB2b2lkIHR0bV9ib19zd2Fwb3V0X2FsbChzdHJ1Y3QgdHRtX2JvX2RldmljZSAqYmRl
dik7Ci1pbnQgdHRtX2JvX3dhaXRfdW5yZXNlcnZlZChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3Qg
KmJvKTsKIAogLyoqCiAgKiB0dG1fYm9fdXNlc19lbWJlZGRlZF9nZW1fb2JqZWN0IC0gY2hlY2sg
aWYgdGhlIGdpdmVuIGJvIHVzZXMgdGhlCi0tIAoyLjIzLjAucmMxCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmktZGV2ZWwgbWFpbGluZyBsaXN0CmRy
aS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5v
cmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
