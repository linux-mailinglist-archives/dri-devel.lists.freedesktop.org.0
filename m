Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9FCF698552
	for <lists+dri-devel@lfdr.de>; Wed, 21 Aug 2019 22:15:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 487636E9A2;
	Wed, 21 Aug 2019 20:15:06 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from perceval.ideasonboard.com (perceval.ideasonboard.com
 [IPv6:2001:4b98:dc2:55:216:3eff:fef7:d647])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D405A6E9A2
 for <dri-devel@lists.freedesktop.org>; Wed, 21 Aug 2019 20:15:04 +0000 (UTC)
Received: from pendragon.ideasonboard.com
 (dfj612yhrgyx302h3jwwy-3.rev.dnainternet.fi
 [IPv6:2001:14ba:21f5:5b00:ce28:277f:58d7:3ca4])
 by perceval.ideasonboard.com (Postfix) with ESMTPSA id 9183B33D;
 Wed, 21 Aug 2019 22:15:02 +0200 (CEST)
Date: Wed, 21 Aug 2019 23:14:56 +0300
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
To: Boris Brezillon <boris.brezillon@collabora.com>
Subject: Re: [PATCH RFC 10/19] drm/bridge: Add a drm_bridge_state object
Message-ID: <20190821201456.GF26759@pendragon.ideasonboard.com>
References: <20190808151150.16336-1-boris.brezillon@collabora.com>
 <20190808151150.16336-11-boris.brezillon@collabora.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190808151150.16336-11-boris.brezillon@collabora.com>
User-Agent: Mutt/1.10.1 (2018-07-13)
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=ideasonboard.com; s=mail; t=1566418502;
 bh=n7FkKcioiBTuesprlvR/rlWmW4F9ncYxTE6jU+ZsB+Q=;
 h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
 b=rPZYEMR85zRoxeLYfI2X6R/4/mfTdvNkBo8BiuuQgWj/HUVHRHRfufKPMndRxt7qd
 vneLtmDlIabH1IMS/nJ2qJtmYJsGvFisFq1wZN7QLPD1zaABIL8QP6b5t5EhQ77kUq
 yweH2EZL0i5NyEvVjZDD2imw3l31wxuOyq6kBZyM=
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Jernej Skrabec <jernej.skrabec@siol.net>,
 Neil Armstrong <narmstrong@baylibre.com>, Jonas Karlman <jonas@kwiboo.se>,
 Seung-Woo Kim <sw0312.kim@samsung.com>, dri-devel@lists.freedesktop.org,
 Kyungmin Park <kyungmin.park@samsung.com>,
 Thierry Reding <thierry.reding@gmail.com>, Chris Healy <Chris.Healy@zii.aero>,
 kernel@collabora.com, Sam Ravnborg <sam@ravnborg.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

SGkgQm9yaXMsCgpUaGFuayB5b3UgZm9yIHRoZSBwYXRjaC4KCk9uIFRodSwgQXVnIDA4LCAyMDE5
IGF0IDA1OjExOjQxUE0gKzAyMDAsIEJvcmlzIEJyZXppbGxvbiB3cm90ZToKPiBPbmUgb2YgdGhl
IGxhc3QgcmVtYWluaW5nIG9iamVjdCB0byBub3QgaGF2ZSBpdHMgYXRvbWljIHN0YXRlLgo+IAo+
IFRoaXMgaXMgYmVpbmcgbW90aXZhdGVkIGJ5IG91ciBhdHRlbXB0IHRvIHN1cHBvcnQgcnVudGlt
ZSBidXMtZm9ybWF0Cj4gbmVnb3RpYXRpb24gYmV0d2VlbiBlbGVtZW50cyBvZiB0aGUgYnJpZGdl
IGNoYWluLgo+IFRoaXMgcGF0Y2gganVzdCBwYXZlcyB0aGUgcm9hZCBmb3Igc3VjaCBhIGZlYXR1
cmUgYnkgYWRkaW5nIGEgbmV3Cj4gZHJtX2JyaWRnZV9zdGF0ZSBvYmplY3QgaW5oZXJpdGluZyBm
cm9tIGRybV9wcml2YXRlX29iaiBzbyB3ZSBjYW4KPiByZS11c2Ugc29tZSBvZiB0aGUgc3RhdGUg
aW5pdGlhbGl6YXRpb24vdHJhY2tpbmcgbG9naWMuCj4gCj4gU2lnbmVkLW9mZi1ieTogQm9yaXMg
QnJlemlsbG9uIDxib3Jpcy5icmV6aWxsb25AY29sbGFib3JhLmNvbT4KPiAtLS0KPiAgZHJpdmVy
cy9ncHUvZHJtL2RybV9hdG9taWMuYyAgICAgICAgfCAgNDAgKysrKysrKysKPiAgZHJpdmVycy9n
cHUvZHJtL2RybV9hdG9taWNfaGVscGVyLmMgfCAgMTggKysrKwo+ICBkcml2ZXJzL2dwdS9kcm0v
ZHJtX2JyaWRnZS5jICAgICAgICB8IDE0MSArKysrKysrKysrKysrKysrKysrKysrKysrKystCj4g
IGluY2x1ZGUvZHJtL2RybV9hdG9taWMuaCAgICAgICAgICAgIHwgICAzICsKPiAgaW5jbHVkZS9k
cm0vZHJtX2JyaWRnZS5oICAgICAgICAgICAgfCAgOTkgKysrKysrKysrKysrKysrKysrKwo+ICA1
IGZpbGVzIGNoYW5nZWQsIDI5NiBpbnNlcnRpb25zKCspLCA1IGRlbGV0aW9ucygtKQo+IAo+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pYy5jIGIvZHJpdmVycy9ncHUvZHJt
L2RybV9hdG9taWMuYwo+IGluZGV4IDQxOTM4MWFiYmRkMS4uZWQ2ZmQzZTMxYjU2IDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljLmMKPiArKysgYi9kcml2ZXJzL2dwdS9k
cm0vZHJtX2F0b21pYy5jCj4gQEAgLTMwLDYgKzMwLDcgQEAKPiAgCj4gICNpbmNsdWRlIDxkcm0v
ZHJtX2F0b21pYy5oPgo+ICAjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfdWFwaS5oPgo+ICsjaW5j
bHVkZSA8ZHJtL2RybV9icmlkZ2UuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fZGVidWdmcy5oPgo+
ICAjaW5jbHVkZSA8ZHJtL2RybV9kZXZpY2UuaD4KPiAgI2luY2x1ZGUgPGRybS9kcm1fZHJ2Lmg+
Cj4gQEAgLTEwMTAsNiArMTAxMSw0NSBAQCBzdGF0aWMgdm9pZCBkcm1fYXRvbWljX2Nvbm5lY3Rv
cl9wcmludF9zdGF0ZShzdHJ1Y3QgZHJtX3ByaW50ZXIgKnAsCj4gIAkJY29ubmVjdG9yLT5mdW5j
cy0+YXRvbWljX3ByaW50X3N0YXRlKHAsIHN0YXRlKTsKPiAgfQo+ICAKPiArLyoqCj4gKyAqIGRy
bV9hdG9taWNfYWRkX2VuY29kZXJfYnJpZGdlcyAtIGFkZCBicmlkZ2VzIGF0dGFjaGVkIHRvIGFu
IGVuY29kZXIKPiArICogQHN0YXRlOiBhdG9taWMgc3RhdGUKPiArICogQGVuY29kZXI6IERSTSBl
bmNvZGVyCj4gKyAqCj4gKyAqIFRoaXMgZnVuY3Rpb24gYWRkcyBhbGwgYnJpZGdlcyBhdHRhY2hl
ZCB0byBAZW5jb2Rlci4gVGhpcyBpcyBuZWVkZWQgdG8gYWRkCj4gKyAqIGJyaWRnZSBzdGF0ZXMg
dG8gQHN0YXRlIGFuZCBtYWtlIHRoZW0gYXZhaWxhYmxlIHdoZW4KPiArICogJmJyaWRnZV9mdW5j
cy5hdG9taWNfe2NoZWNrLHByZV9lbmFibGUsZW5hYmxlLGRpc2FibGVfcG9zdF9kaXNhYmxlfSgp
IGFyZQo+ICsgKiBjYWxsZWQKPiArICoKPiArICogUmV0dXJuczoKPiArICogMCBvbiBzdWNjZXNz
IG9yIGNhbiBmYWlsIHdpdGggLUVERUFETEsgb3IgLUVOT01FTS4gV2hlbiB0aGUgZXJyb3IgaXMg
RURFQURMSwo+ICsgKiB0aGVuIHRoZSB3L3cgbXV0ZXggY29kZSBoYXMgZGV0ZWN0ZWQgYSBkZWFk
bG9jayBhbmQgdGhlIGVudGlyZSBhdG9taWMKPiArICogc2VxdWVuY2UgbXVzdCBiZSByZXN0YXJ0
ZWQuIEFsbCBvdGhlciBlcnJvcnMgYXJlIGZhdGFsLgo+ICsgKi8KPiAraW50Cj4gK2RybV9hdG9t
aWNfYWRkX2VuY29kZXJfYnJpZGdlcyhzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUsCj4g
KwkJCSAgICAgICBzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCj4gK3sKPiArCXN0cnVjdCBk
cm1fYnJpZGdlX3N0YXRlICpicmlkZ2Vfc3RhdGU7Cj4gKwlzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJp
ZGdlOwo+ICsKPiArCWlmICghZW5jb2RlcikKPiArCQlyZXR1cm4gMDsKPiArCj4gKwlEUk1fREVC
VUdfQVRPTUlDKCJBZGRpbmcgYWxsIGJyaWRnZXMgZm9yIFtlbmNvZGVyOiVkOiVzXSB0byAlcFxu
IiwKPiArCQkJIGVuY29kZXItPmJhc2UuaWQsIGVuY29kZXItPm5hbWUsIHN0YXRlKTsKPiArCj4g
Kwlmb3IgKGJyaWRnZSA9IGRybV9icmlkZ2VfY2hhaW5fZ2V0X2ZpcnN0X2JyaWRnZShlbmNvZGVy
KTsgYnJpZGdlOwo+ICsJICAgICBicmlkZ2UgPSBkcm1fYnJpZGdlX2NoYWluX2dldF9uZXh0X2Jy
aWRnZShicmlkZ2UpKSB7CgpXb3VsZCBhIGZvcl9lYWNoX2JyaWRnZSgpIG1hY3JvIG1ha2Ugc2Vu
c2UgPyBJJ2QgaW1wbGVtZW50IGl0IG9uIHRvcCBvZgpsaXN0X2Zvcl9lYWNoX2VudHJ5KCkgdG8g
bWFrZSBpdCBzaW1wbGUuCgo+ICsJCWJyaWRnZV9zdGF0ZSA9IGRybV9hdG9taWNfZ2V0X2JyaWRn
ZV9zdGF0ZShzdGF0ZSwgYnJpZGdlKTsKPiArCQlpZiAoSVNfRVJSKGJyaWRnZV9zdGF0ZSkpCj4g
KwkJCXJldHVybiBQVFJfRVJSKGJyaWRnZV9zdGF0ZSk7Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIDA7
Cj4gK30KPiArRVhQT1JUX1NZTUJPTChkcm1fYXRvbWljX2FkZF9lbmNvZGVyX2JyaWRnZXMpOwo+
ICsKPiAgLyoqCj4gICAqIGRybV9hdG9taWNfYWRkX2FmZmVjdGVkX2Nvbm5lY3RvcnMgLSBhZGQg
Y29ubmVjdG9ycyBmb3IgY3J0Ywo+ICAgKiBAc3RhdGU6IGF0b21pYyBzdGF0ZQo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9kcm1fYXRvbWljX2hlbHBlci5jCj4gaW5kZXggMGRlYjU0MDk5NTcwLi5lNzZlYzk2NDhiNmYg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfaGVscGVyLmMKPiArKysg
Yi9kcml2ZXJzL2dwdS9kcm0vZHJtX2F0b21pY19oZWxwZXIuYwo+IEBAIC03MzYsNiArNzM2LDI0
IEBAIGRybV9hdG9taWNfaGVscGVyX2NoZWNrX21vZGVzZXQoc3RydWN0IGRybV9kZXZpY2UgKmRl
diwKPiAgCQkJcmV0dXJuIHJldDsKPiAgCX0KPiAgCj4gKwkvKgo+ICsJICogSXRlcmF0ZSBvdmVy
IGFsbCBjb25uZWN0b3JzIGFnYWluLCBhbmQgYWRkIGFsbCBhZmZlY3RlZCBicmlkZ2VzIHRvCj4g
KwkgKiB0aGUgc3RhdGUuCj4gKwkgKi8KPiArCWZvcl9lYWNoX29sZG5ld19jb25uZWN0b3JfaW5f
c3RhdGUoc3RhdGUsIGNvbm5lY3Rvciwgb2xkX2Nvbm5lY3Rvcl9zdGF0ZSwgbmV3X2Nvbm5lY3Rv
cl9zdGF0ZSwgaSkgewo+ICsJCXN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlcjsKPiArCj4gKwkJ
ZW5jb2RlciA9IG9sZF9jb25uZWN0b3Jfc3RhdGUtPmJlc3RfZW5jb2RlcjsKPiArCQlyZXQgPSBk
cm1fYXRvbWljX2FkZF9lbmNvZGVyX2JyaWRnZXMoc3RhdGUsIGVuY29kZXIpOwo+ICsJCWlmIChy
ZXQpCj4gKwkJCXJldHVybiByZXQ7Cj4gKwo+ICsJCWVuY29kZXIgPSBuZXdfY29ubmVjdG9yX3N0
YXRlLT5iZXN0X2VuY29kZXI7Cj4gKwkJcmV0ID0gZHJtX2F0b21pY19hZGRfZW5jb2Rlcl9icmlk
Z2VzKHN0YXRlLCBlbmNvZGVyKTsKPiArCQlpZiAocmV0KQo+ICsJCQlyZXR1cm4gcmV0Owo+ICsJ
fQo+ICsKPiAgCXJldCA9IG1vZGVfdmFsaWQoc3RhdGUpOwo+ICAJaWYgKHJldCkKPiAgCQlyZXR1
cm4gcmV0Owo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2JyaWRnZS5jIGIvZHJp
dmVycy9ncHUvZHJtL2RybV9icmlkZ2UuYwo+IGluZGV4IGVkMjQxMGY0OTU4MS4uMDI4MGRhNmJl
MWU2IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYnJpZGdlLmMKPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0vZHJtX2JyaWRnZS5jCj4gQEAgLTg5LDYgKzg5LDM4IEBAIHZvaWQgZHJt
X2JyaWRnZV9yZW1vdmUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKPiAgfQo+ICBFWFBPUlRf
U1lNQk9MKGRybV9icmlkZ2VfcmVtb3ZlKTsKPiAgCj4gK3N0YXRpYyBzdHJ1Y3QgZHJtX3ByaXZh
dGVfc3RhdGUgKgo+ICtkcm1fYnJpZGdlX2F0b21pY19kdXBsaWNhdGVfcHJpdl9zdGF0ZShzdHJ1
Y3QgZHJtX3ByaXZhdGVfb2JqICpvYmopCj4gK3sKPiArCXN0cnVjdCBkcm1fYnJpZGdlICpicmlk
Z2UgPSBkcm1fcHJpdl90b19icmlkZ2Uob2JqKTsKPiArCXN0cnVjdCBkcm1fYnJpZGdlX3N0YXRl
ICpzdGF0ZTsKPiArCj4gKwlpZiAoYnJpZGdlLT5mdW5jcy0+YXRvbWljX2R1cGxpY2F0ZV9zdGF0
ZSkKPiArCQlzdGF0ZSA9IGJyaWRnZS0+ZnVuY3MtPmF0b21pY19kdXBsaWNhdGVfc3RhdGUoYnJp
ZGdlKTsKPiArCWVsc2UKPiArCQlzdGF0ZSA9IGRybV9hdG9taWNfaGVscGVyX2R1cGxpY2F0ZV9i
cmlkZ2Vfc3RhdGUoYnJpZGdlKTsKPiArCj4gKwlyZXR1cm4gJnN0YXRlLT5iYXNlOwo+ICt9Cj4g
Kwo+ICtzdGF0aWMgdm9pZAo+ICtkcm1fYnJpZGdlX2F0b21pY19kZXN0cm95X3ByaXZfc3RhdGUo
c3RydWN0IGRybV9wcml2YXRlX29iaiAqb2JqLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc3RydWN0IGRybV9wcml2YXRlX3N0YXRlICpzKQo+ICt7Cj4gKwlzdHJ1Y3Qg
ZHJtX2JyaWRnZV9zdGF0ZSAqc3RhdGUgPSBkcm1fcHJpdl90b19icmlkZ2Vfc3RhdGUocyk7Cj4g
KwlzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlID0gZHJtX3ByaXZfdG9fYnJpZGdlKG9iaik7Cj4g
Kwo+ICsJaWYgKGJyaWRnZS0+ZnVuY3MtPmF0b21pY19kZXN0cm95X3N0YXRlKQo+ICsJCWJyaWRn
ZS0+ZnVuY3MtPmF0b21pY19kZXN0cm95X3N0YXRlKGJyaWRnZSwgc3RhdGUpOwo+ICsJZWxzZQo+
ICsJCWRybV9hdG9taWNfaGVscGVyX2Rlc3Ryb3lfYnJpZGdlX3N0YXRlKGJyaWRnZSwgc3RhdGUp
Owo+ICt9Cj4gKwo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9wcml2YXRlX3N0YXRlX2Z1bmNz
IGRybV9icmlkZ2VfcHJpdl9zdGF0ZV9mdW5jcyA9IHsKPiArCS5hdG9taWNfZHVwbGljYXRlX3N0
YXRlID0gZHJtX2JyaWRnZV9hdG9taWNfZHVwbGljYXRlX3ByaXZfc3RhdGUsCj4gKwkuYXRvbWlj
X2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYnJpZGdlX2F0b21pY19kZXN0cm95X3ByaXZfc3RhdGUsCj4g
K307Cj4gKwo+ICAvKioKPiAgICogZHJtX2JyaWRnZV9hdHRhY2ggLSBhdHRhY2ggdGhlIGJyaWRn
ZSB0byBhbiBlbmNvZGVyJ3MgY2hhaW4KPiAgICoKPiBAQCAtMTE0LDYgKzE0Niw3IEBAIEVYUE9S
VF9TWU1CT0woZHJtX2JyaWRnZV9yZW1vdmUpOwo+ICBpbnQgZHJtX2JyaWRnZV9hdHRhY2goc3Ry
dWN0IGRybV9lbmNvZGVyICplbmNvZGVyLCBzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAo+ICAJ
CSAgICAgIHN0cnVjdCBkcm1fYnJpZGdlICpwcmV2aW91cykKPiAgewo+ICsJc3RydWN0IGRybV9i
cmlkZ2Vfc3RhdGUgKnN0YXRlOwo+ICAJTElTVF9IRUFEKHRtcF9saXN0KTsKPiAgCWludCByZXQ7
Cj4gIAo+IEBAIC0xMzIsMTkgKzE2NSwzOSBAQCBpbnQgZHJtX2JyaWRnZV9hdHRhY2goc3RydWN0
IGRybV9lbmNvZGVyICplbmNvZGVyLCBzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAo+ICAKPiAg
CWlmIChicmlkZ2UtPmZ1bmNzLT5hdHRhY2gpIHsKPiAgCQlyZXQgPSBicmlkZ2UtPmZ1bmNzLT5h
dHRhY2goYnJpZGdlKTsKPiAtCQlpZiAocmV0IDwgMCkgewo+IC0JCQlicmlkZ2UtPmRldiA9IE5V
TEw7Cj4gLQkJCWJyaWRnZS0+ZW5jb2RlciA9IE5VTEw7Cj4gLQkJCXJldHVybiByZXQ7Cj4gLQkJ
fQo+ICsJCWlmIChyZXQgPCAwKQo+ICsJCQlnb3RvIGVycl9yZXNldF9icmlkZ2U7Cj4gIAl9Cj4g
IAo+ICsJaWYgKGJyaWRnZS0+ZnVuY3MtPmF0b21pY19kdXBsaWNhdGVfc3RhdGUpCj4gKwkJc3Rh
dGUgPSBicmlkZ2UtPmZ1bmNzLT5hdG9taWNfZHVwbGljYXRlX3N0YXRlKGJyaWRnZSk7Cj4gKwll
bHNlCj4gKwkJc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9kdXBsaWNhdGVfYnJpZGdlX3N0YXRl
KGJyaWRnZSk7Cj4gKwo+ICsJaWYgKCFzdGF0ZSkgewo+ICsJCXJldCA9IC1FTk9NRU07Cj4gKwkJ
Z290byBlcnJfZGV0YWNoX2JyaWRnZTsKPiArCX0KPiArCj4gKwlkcm1fYXRvbWljX3ByaXZhdGVf
b2JqX2luaXQoYnJpZGdlLT5kZXYsICZicmlkZ2UtPmJhc2UsCj4gKwkJCQkgICAgJnN0YXRlLT5i
YXNlLAo+ICsJCQkJICAgICZkcm1fYnJpZGdlX3ByaXZfc3RhdGVfZnVuY3MpOwo+ICsKPiAgCWlm
IChwcmV2aW91cykKPiAgCQlsaXN0X3NwbGljZSgmdG1wX2xpc3QsICZwcmV2aW91cy0+Y2hhaW5f
bm9kZSk7Cj4gIAllbHNlCj4gIAkJbGlzdF9zcGxpY2UoJnRtcF9saXN0LCAmZW5jb2Rlci0+YnJp
ZGdlX2NoYWluKTsKPiAgCj4gIAlyZXR1cm4gMDsKPiArCj4gK2Vycl9kZXRhY2hfYnJpZGdlOgo+
ICsJaWYgKGJyaWRnZS0+ZnVuY3MtPmRldGFjaCkKPiArCQlicmlkZ2UtPmZ1bmNzLT5kZXRhY2go
YnJpZGdlKTsKPiArCj4gK2Vycl9yZXNldF9icmlkZ2U6Cj4gKwlicmlkZ2UtPmRldiA9IE5VTEw7
Cj4gKwlicmlkZ2UtPmVuY29kZXIgPSBOVUxMOwo+ICsJcmV0dXJuIHJldDsKPiAgfQo+ICBFWFBP
UlRfU1lNQk9MKGRybV9icmlkZ2VfYXR0YWNoKTsKPiAgCj4gQEAgLTE1Niw2ICsyMDksOCBAQCB2
b2lkIGRybV9icmlkZ2VfZGV0YWNoKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UpCj4gIAlpZiAo
V0FSTl9PTighYnJpZGdlLT5kZXYpKQo+ICAJCXJldHVybjsKPiAgCj4gKwlkcm1fYXRvbWljX3By
aXZhdGVfb2JqX2ZpbmkoJmJyaWRnZS0+YmFzZSk7Cj4gKwo+ICAJaWYgKGJyaWRnZS0+ZnVuY3Mt
PmRldGFjaCkKPiAgCQlicmlkZ2UtPmZ1bmNzLT5kZXRhY2goYnJpZGdlKTsKPiAgCj4gQEAgLTQ5
NSw2ICs1NTAsODIgQEAgdm9pZCBkcm1fYXRvbWljX2JyaWRnZV9jaGFpbl9lbmFibGUoc3RydWN0
IGRybV9lbmNvZGVyICplbmNvZGVyLAo+ICB9Cj4gIEVYUE9SVF9TWU1CT0woZHJtX2F0b21pY19i
cmlkZ2VfY2hhaW5fZW5hYmxlKTsKPiAgCj4gKy8qKgo+ICsgKiBkcm1fYXRvbWljX2hlbHBlcl9p
bml0X2JyaWRnZV9zdGF0ZSgpIC0gSW5pdGlhbGl6ZXMgYSBicmlkZ2Ugc3RhdGUKCnMvSW5pdGlh
bGl6ZXMvSW5pdGlhbGl6ZS8KCj4gKyAqIEBicmlkZ2UgdGhpcyBzdGF0ZSBpcyByZWZlcnJpbmcg
dG8KCkRpZCB5b3UgbWVhbgoKICogQGJyaWRnZTogdGhlIGJyaWRnZSB0aGlzIHN0YXRlIGlzIHJl
ZmVycmluZyB0byA/Cgo+ICsgKiBAc3RhdGU6IGJyaWRnZSBzdGF0ZSB0byBpbml0aWFsaXplCj4g
KyAqCj4gKyAqIEZvciBub3cgaXQncyBqdXN0IGEgbWVtc2V0KDApIHBsdXMgYSBzdGF0ZS0+YnJp
ZGdlIGFzc2lnbm1lbnQuIE1pZ2h0Cj4gKyAqIGJlIGV4dGVuZGVkIGluIHRoZSBmdXR1cmUuCj4g
KyAqLwo+ICt2b2lkIGRybV9hdG9taWNfaGVscGVyX2luaXRfYnJpZGdlX3N0YXRlKHN0cnVjdCBk
cm1fYnJpZGdlICpicmlkZ2UsCj4gKwkJCQkJIHN0cnVjdCBkcm1fYnJpZGdlX3N0YXRlICpzdGF0
ZSkKPiArewo+ICsJbWVtc2V0KHN0YXRlLCAwLCBzaXplb2YoKnN0YXRlKSk7Cj4gKwlzdGF0ZS0+
YnJpZGdlID0gYnJpZGdlOwo+ICt9Cj4gK0VYUE9SVF9TWU1CT0woZHJtX2F0b21pY19oZWxwZXJf
aW5pdF9icmlkZ2Vfc3RhdGUpOwoKT3RoZXIgb2JqZWN0cyBkb24ndCBleHBvcnQgYSBzdGF0ZSBp
bml0IGZ1bmN0aW9uIGhlbHBlciwgYnV0IHN0YXRlIHJlc2V0CmFuZCBzdGF0ZSBkdXBsaWNhdGUg
aGVscGVycy4gSXMgdGhlcmUgYSByZWFzb24gdG8gZGVwYXJ0IGZyb20gdGhhdCBtb2RlbAo/IFNh
bWUgZm9yIHRoZSBjb3B5IGhlbHBlciBiZWxvdy4KCj4gKwo+ICsvKioKPiArICogZHJtX2F0b21p
Y19oZWxwZXJfY29weV9icmlkZ2Vfc3RhdGUoKSAtIENvcHkgdGhlIGNvbnRlbnQgb2YgYSBicmlk
Z2Ugc3RhdGUKPiArICogQGJyaWRnZTogYnJpZGdlIHRoZSBvbGQgYW5kIG5ldyBzdGF0ZSBhcmUg
cmVmZXJyaW5nIHRvCj4gKyAqIEBvbGQ6IHByZXZpb3VzIGJyaWRnZSBzdGF0ZSB0byBjb3B5IGZy
b20KPiArICogQG5ldzogbmV3IGJyaWRnZSBzdGF0ZSB0byBjb3B5IHRvCj4gKyAqCj4gKyAqIFNo
b3VsZCBiZSB1c2VkIGJ5IGN1c3RvbSAmZHJtX2JyaWRnZV9mdW5jcy5hdG9taWNfZHVwbGljYXRl
KCkgaW1wbGVtZW50YXRpb24KPiArICogdG8gY29weSB0aGUgcHJldmlvdXMgc3RhdGUgaW50byB0
aGUgbmV3IG9iamVjdC4KPiArICovCj4gK3ZvaWQgZHJtX2F0b21pY19oZWxwZXJfY29weV9icmlk
Z2Vfc3RhdGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKPiArCQkJCQkgY29uc3Qgc3RydWN0
IGRybV9icmlkZ2Vfc3RhdGUgKm9sZCwKPiArCQkJCQkgc3RydWN0IGRybV9icmlkZ2Vfc3RhdGUg
Km5ldykKPiArewo+ICsJKm5ldyA9ICpvbGQ7Cj4gK30KPiArRVhQT1JUX1NZTUJPTChkcm1fYXRv
bWljX2hlbHBlcl9jb3B5X2JyaWRnZV9zdGF0ZSk7Cj4gKwo+ICsvKioKPiArICogZHJtX2F0b21p
Y19oZWxwZXJfZHVwbGljYXRlX2JyaWRnZV9zdGF0ZSgpIC0gRGVmYXVsdCBkdXBsaWNhdGUgc3Rh
dGUgaGVscGVyCj4gKyAqIEBicmlkZ2U6IGJyaWRnZSBjb250YWluaW5nIHRoZSBzdGF0ZSB0byBk
dXBsaWNhdGUKPiArICoKPiArICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiAmZHJtX2JyaWRn
ZV9mdW5jcy5hdG9taWNfZHVwbGljYXRlKCkuCj4gKyAqCj4gKyAqIFJFVFVSTlM6Cj4gKyAqIGEg
dmFsaWQgc3RhdGUgb2JqZWN0IG9yIE5VTEwgaWYgdGhlIGFsbG9jYXRpb24gZmFpbHMuCj4gKyAq
Lwo+ICtzdHJ1Y3QgZHJtX2JyaWRnZV9zdGF0ZSAqCj4gK2RybV9hdG9taWNfaGVscGVyX2R1cGxp
Y2F0ZV9icmlkZ2Vfc3RhdGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkKPiArewo+ICsJc3Ry
dWN0IGRybV9icmlkZ2Vfc3RhdGUgKm9sZCA9IE5VTEwsICpuZXc7Cj4gKwo+ICsJbmV3ID0ga3ph
bGxvYyhzaXplb2YoKm5ldyksIEdGUF9LRVJORUwpOwo+ICsJaWYgKCFuZXcpCj4gKwkJcmV0dXJu
IE5VTEw7Cj4gKwo+ICsJaWYgKGJyaWRnZS0+YmFzZS5zdGF0ZSkgewo+ICsJCW9sZCA9IGRybV9w
cml2X3RvX2JyaWRnZV9zdGF0ZShicmlkZ2UtPmJhc2Uuc3RhdGUpOwo+ICsJCWRybV9hdG9taWNf
aGVscGVyX2NvcHlfYnJpZGdlX3N0YXRlKGJyaWRnZSwgb2xkLCBuZXcpOwo+ICsJfSBlbHNlIHsK
PiArCQlkcm1fYXRvbWljX2hlbHBlcl9pbml0X2JyaWRnZV9zdGF0ZShicmlkZ2UsIG5ldyk7Cj4g
Kwl9Cj4gKwo+ICsJcmV0dXJuIG5ldzsKPiArfQo+ICtFWFBPUlRfU1lNQk9MKGRybV9hdG9taWNf
aGVscGVyX2R1cGxpY2F0ZV9icmlkZ2Vfc3RhdGUpOwo+ICsKPiArLyoqCj4gKyAqIGRybV9hdG9t
aWNfaGVscGVyX2Rlc3Ryb3lfYnJpZGdlX3N0YXRlKCkgLSBEZWZhdWx0IGRlc3Ryb3kgc3RhdGUg
aGVscGVyCj4gKyAqIEBicmlkZ2U6IHRoZSBicmlkZ2UgdGhpcyBzdGF0ZSByZWZlcnMgdG8KPiAr
ICogQHN0YXRlOiBzdGF0ZSBvYmplY3QgdG8gZGVzdHJveQo+ICsgKgo+ICsgKiBKdXN0IGEgc2lt
cGxlIGtmcmVlKCkgZm9yIG5vdy4KPiArICovCj4gK3ZvaWQgZHJtX2F0b21pY19oZWxwZXJfZGVz
dHJveV9icmlkZ2Vfc3RhdGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKPiArCQkJCQkgICAg
c3RydWN0IGRybV9icmlkZ2Vfc3RhdGUgKnN0YXRlKQo+ICt7Cj4gKwlrZnJlZShzdGF0ZSk7Cj4g
K30KPiArRVhQT1JUX1NZTUJPTChkcm1fYXRvbWljX2hlbHBlcl9kZXN0cm95X2JyaWRnZV9zdGF0
ZSk7Cj4gKwo+ICAjaWZkZWYgQ09ORklHX09GCj4gIC8qKgo+ICAgKiBvZl9kcm1fZmluZF9icmlk
Z2UgLSBmaW5kIHRoZSBicmlkZ2UgY29ycmVzcG9uZGluZyB0byB0aGUgZGV2aWNlIG5vZGUgaW4K
PiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2F0b21pYy5oIGIvaW5jbHVkZS9kcm0vZHJt
X2F0b21pYy5oCj4gaW5kZXggOTI3ZTEyMDVkN2FhLi41ZWUyNWZkNTFlODAgMTAwNjQ0Cj4gLS0t
IGEvaW5jbHVkZS9kcm0vZHJtX2F0b21pYy5oCj4gKysrIGIvaW5jbHVkZS9kcm0vZHJtX2F0b21p
Yy5oCj4gQEAgLTY2MCw2ICs2NjAsOSBAQCBfX2RybV9hdG9taWNfZ2V0X2N1cnJlbnRfcGxhbmVf
c3RhdGUoc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlLAo+ICAJcmV0dXJuIHBsYW5lLT5z
dGF0ZTsKPiAgfQo+ICAKPiAraW50IF9fbXVzdF9jaGVjawo+ICtkcm1fYXRvbWljX2FkZF9lbmNv
ZGVyX2JyaWRnZXMoc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKTsKPiAgaW50
IF9fbXVzdF9jaGVjawo+ICBkcm1fYXRvbWljX2FkZF9hZmZlY3RlZF9jb25uZWN0b3JzKHN0cnVj
dCBkcm1fYXRvbWljX3N0YXRlICpzdGF0ZSwKPiAgCQkJCSAgIHN0cnVjdCBkcm1fY3J0YyAqY3J0
Yyk7Cj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvZHJtL2RybV9icmlkZ2UuaCBiL2luY2x1ZGUvZHJt
L2RybV9icmlkZ2UuaAo+IGluZGV4IGY0MDE4MTI3NGVkNy4uOGNhMjVkMjY2ZDBjIDEwMDY0NAo+
IC0tLSBhL2luY2x1ZGUvZHJtL2RybV9icmlkZ2UuaAo+ICsrKyBiL2luY2x1ZGUvZHJtL2RybV9i
cmlkZ2UuaAo+IEBAIC0yNSw2ICsyNSw3IEBACj4gIAo+ICAjaW5jbHVkZSA8bGludXgvbGlzdC5o
Pgo+ICAjaW5jbHVkZSA8bGludXgvY3R5cGUuaD4KPiArI2luY2x1ZGUgPGRybS9kcm1fYXRvbWlj
Lmg+Cj4gICNpbmNsdWRlIDxkcm0vZHJtX21vZGVfb2JqZWN0Lmg+Cj4gICNpbmNsdWRlIDxkcm0v
ZHJtX21vZGVzLmg+Cj4gIAo+IEBAIC0zMiw2ICszMywyMyBAQCBzdHJ1Y3QgZHJtX2JyaWRnZTsK
PiAgc3RydWN0IGRybV9icmlkZ2VfdGltaW5nczsKPiAgc3RydWN0IGRybV9wYW5lbDsKPiAgCj4g
Ky8qKgo+ICsgKiBzdHJ1Y3QgZHJtX2JyaWRnZV9zdGF0ZSAtIEF0b21pYyBicmlkZ2Ugc3RhdGUg
b2JqZWN0Cj4gKyAqIEBiYXNlOiBpbmhlcml0IGZyb20gJmRybV9wcml2YXRlX3N0YXRlCj4gKyAq
IEBicmlkZ2U6IHRoZSBicmlkZ2UgdGhpcyBzdGF0ZSByZWZlcnMgdG8KPiArICovCj4gK3N0cnVj
dCBkcm1fYnJpZGdlX3N0YXRlIHsKPiArCXN0cnVjdCBkcm1fcHJpdmF0ZV9zdGF0ZSBiYXNlOwo+
ICsKPiArCXN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2U7Cj4gK307Cj4gKwo+ICtzdGF0aWMgaW5s
aW5lIHN0cnVjdCBkcm1fYnJpZGdlX3N0YXRlICoKPiArZHJtX3ByaXZfdG9fYnJpZGdlX3N0YXRl
KHN0cnVjdCBkcm1fcHJpdmF0ZV9zdGF0ZSAqcHJpdikKPiArewo+ICsJcmV0dXJuIGNvbnRhaW5l
cl9vZihwcml2LCBzdHJ1Y3QgZHJtX2JyaWRnZV9zdGF0ZSwgYmFzZSk7Cj4gK30KPiArCj4gIC8q
Kgo+ICAgKiBzdHJ1Y3QgZHJtX2JyaWRnZV9mdW5jcyAtIGRybV9icmlkZ2UgY29udHJvbCBmdW5j
dGlvbnMKPiAgICovCj4gQEAgLTMzNyw2ICszNTUsMzAgQEAgc3RydWN0IGRybV9icmlkZ2VfZnVu
Y3Mgewo+ICAJICovCj4gIAl2b2lkICgqYXRvbWljX3Bvc3RfZGlzYWJsZSkoc3RydWN0IGRybV9i
cmlkZ2UgKmJyaWRnZSwKPiAgCQkJCSAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUp
Owo+ICsKPiArCS8qKgo+ICsJICogQGF0b21pY19kdXBsaWNhdGVfc3RhdGU6Cj4gKwkgKgo+ICsJ
ICogRHVwbGljYXRlIHRoZSBjdXJyZW50IGJyaWRnZSBzdGF0ZSBvYmplY3QuCj4gKwkgKgo+ICsJ
ICogTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB3aGVuIGN1cnJlbnQgYnJp
ZGdlIHN0YXRlIGlzCj4gKwkgKiBOVUxMLiBJbiB0aGlzIGNhc2UsIGltcGxlbWVudGF0aW9ucyBz
aG91bGQgZWl0aGVyIGltcGxlbWVudCBIVwo+ICsJICogcmVhZGJhY2sgb3IgaW5pdGlhbGl6ZSB0
aGUgc3RhdGUgd2l0aCBzZW5zaWJsZSBkZWZhdWx0IHZhbHVlcy4KClJlbGF0ZWQgdG8gdGhlIHF1
ZXN0aW9uIGFib3ZlLCBzaG91bGRuJ3Qgd2UgaGF2ZSBhIHJlc2V0IHN0YXRlIG9wZXJhdGlvbgpp
bnN0ZWFkID8KCj4gKwkgKgo+ICsJICogUkVUVVJOUzoKPiArCSAqIEEgdmFsaWQgZHJtX2JyaWRn
ZV9zdGF0ZSBvYmplY3Qgb3IgTlVMTCBpZiB0aGUgYWxsb2NhdGlvbiBmYWlscy4KPiArCSAqLwo+
ICsJc3RydWN0IGRybV9icmlkZ2Vfc3RhdGUgKigqYXRvbWljX2R1cGxpY2F0ZV9zdGF0ZSkoc3Ry
dWN0IGRybV9icmlkZ2UgKmJyaWRnZSk7Cj4gKwo+ICsJLyoqCj4gKwkgKiBAYXRvbWljX2R1cGxp
Y2F0ZV9zdGF0ZToKPiArCSAqCj4gKwkgKiBEZXN0cm95IGEgYnJpZGdlIHN0YXRlIG9iamVjdCBw
cmV2aW91c2x5IGFsbG9jYXRlZCBieQo+ICsJICogJmRybV9icmlkZ2VfZnVuY3MuYXRvbWljX2R1
cGxpY2F0ZV9zdGF0ZSgpIG9yCj4gKwkgKiAmZHJtX2JyaWRnZV9mdW5jcy5hdG9taWNfZ2V0X2lu
aXRpYWxfc3RhdGUoKS4KPiArCSAqLwo+ICsJdm9pZCAoKmF0b21pY19kZXN0cm95X3N0YXRlKShz
dHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAo+ICsJCQkJICAgICBzdHJ1Y3QgZHJtX2JyaWRnZV9z
dGF0ZSAqc3RhdGUpOwo+ICB9Owo+ICAKPiAgLyoqCj4gQEAgLTM3OSw2ICs0MjEsOCBAQCBzdHJ1
Y3QgZHJtX2JyaWRnZV90aW1pbmdzIHsKPiAgICogc3RydWN0IGRybV9icmlkZ2UgLSBjZW50cmFs
IERSTSBicmlkZ2UgY29udHJvbCBzdHJ1Y3R1cmUKPiAgICovCj4gIHN0cnVjdCBkcm1fYnJpZGdl
IHsKPiArCS8qKiBAYmFzZTogaW5oZXJpdCBmcm9tICZkcm1fcHJpdmF0ZV9vYmplY3QgKi8KPiAr
CXN0cnVjdCBkcm1fcHJpdmF0ZV9vYmogYmFzZTsKPiAgCS8qKiBAZGV2OiBEUk0gZGV2aWNlIHRo
aXMgYnJpZGdlIGJlbG9uZ3MgdG8gKi8KPiAgCXN0cnVjdCBkcm1fZGV2aWNlICpkZXY7Cj4gIAkv
KiogQGVuY29kZXI6IGVuY29kZXIgdG8gd2hpY2ggdGhpcyBicmlkZ2UgaXMgY29ubmVjdGVkICov
Cj4gQEAgLTQwMyw2ICs0NDcsMTIgQEAgc3RydWN0IGRybV9icmlkZ2Ugewo+ICAJdm9pZCAqZHJp
dmVyX3ByaXZhdGU7Cj4gIH07Cj4gIAo+ICtzdGF0aWMgaW5saW5lIHN0cnVjdCBkcm1fYnJpZGdl
ICoKPiArZHJtX3ByaXZfdG9fYnJpZGdlKHN0cnVjdCBkcm1fcHJpdmF0ZV9vYmogKnByaXYpCj4g
K3sKPiArCXJldHVybiBjb250YWluZXJfb2YocHJpdiwgc3RydWN0IGRybV9icmlkZ2UsIGJhc2Up
Owo+ICt9Cj4gKwo+ICB2b2lkIGRybV9icmlkZ2VfYWRkKHN0cnVjdCBkcm1fYnJpZGdlICpicmlk
Z2UpOwo+ICB2b2lkIGRybV9icmlkZ2VfcmVtb3ZlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2Up
Owo+ICBzdHJ1Y3QgZHJtX2JyaWRnZSAqb2ZfZHJtX2ZpbmRfYnJpZGdlKHN0cnVjdCBkZXZpY2Vf
bm9kZSAqbnApOwo+IEBAIC00MzgsNiArNDg4LDU1IEBAIHZvaWQgZHJtX2F0b21pY19icmlkZ2Vf
Y2hhaW5fcHJlX2VuYWJsZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIsCj4gIHZvaWQgZHJt
X2F0b21pY19icmlkZ2VfY2hhaW5fZW5hYmxlKHN0cnVjdCBkcm1fZW5jb2RlciAqZW5jb2RlciwK
PiAgCQkJCSAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpOwo+ICAKPiArdm9pZCBk
cm1fYXRvbWljX2hlbHBlcl9pbml0X2JyaWRnZV9zdGF0ZShzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJp
ZGdlLAo+ICsJCQkJCSBzdHJ1Y3QgZHJtX2JyaWRnZV9zdGF0ZSAqc3RhdGUpOwo+ICt2b2lkIGRy
bV9hdG9taWNfaGVscGVyX2NvcHlfYnJpZGdlX3N0YXRlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlk
Z2UsCj4gKwkJCQkJIGNvbnN0IHN0cnVjdCBkcm1fYnJpZGdlX3N0YXRlICpvbGQsCj4gKwkJCQkJ
IHN0cnVjdCBkcm1fYnJpZGdlX3N0YXRlICpuZXcpOwo+ICtzdHJ1Y3QgZHJtX2JyaWRnZV9zdGF0
ZSAqCj4gK2RybV9hdG9taWNfaGVscGVyX2R1cGxpY2F0ZV9icmlkZ2Vfc3RhdGUoc3RydWN0IGRy
bV9icmlkZ2UgKmJyaWRnZSk7Cj4gK3ZvaWQgZHJtX2F0b21pY19oZWxwZXJfZGVzdHJveV9icmlk
Z2Vfc3RhdGUoc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSwKPiArCQkJCQkgICAgc3RydWN0IGRy
bV9icmlkZ2Vfc3RhdGUgKnN0YXRlKTsKPiArCj4gK3N0YXRpYyBpbmxpbmUgc3RydWN0IGRybV9i
cmlkZ2Vfc3RhdGUgKgo+ICtkcm1fYXRvbWljX2dldF9icmlkZ2Vfc3RhdGUoc3RydWN0IGRybV9h
dG9taWNfc3RhdGUgKnN0YXRlLAo+ICsJCQkgICAgc3RydWN0IGRybV9icmlkZ2UgKmJyaWRnZSkK
PiArewo+ICsJc3RydWN0IGRybV9wcml2YXRlX3N0YXRlICpvYmpfc3RhdGU7Cj4gKwo+ICsJb2Jq
X3N0YXRlID0gZHJtX2F0b21pY19nZXRfcHJpdmF0ZV9vYmpfc3RhdGUoc3RhdGUsICZicmlkZ2Ut
PmJhc2UpOwo+ICsJaWYgKCFvYmpfc3RhdGUpCj4gKwkJcmV0dXJuIE5VTEw7Cj4gKwo+ICsJcmV0
dXJuIGRybV9wcml2X3RvX2JyaWRnZV9zdGF0ZShvYmpfc3RhdGUpOwo+ICt9Cj4gKwo+ICtzdGF0
aWMgaW5saW5lIHN0cnVjdCBkcm1fYnJpZGdlX3N0YXRlICoKPiArZHJtX2F0b21pY19nZXRfb2xk
X2JyaWRnZV9zdGF0ZShzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUsCj4gKwkJCQlzdHJ1
Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQo+ICt7Cj4gKwlzdHJ1Y3QgZHJtX3ByaXZhdGVfc3RhdGUg
Km9ial9zdGF0ZTsKPiArCj4gKwlvYmpfc3RhdGUgPSBkcm1fYXRvbWljX2dldF9vbGRfcHJpdmF0
ZV9vYmpfc3RhdGUoc3RhdGUsICZicmlkZ2UtPmJhc2UpOwo+ICsJaWYgKCFvYmpfc3RhdGUpCj4g
KwkJcmV0dXJuIE5VTEw7Cj4gKwo+ICsJcmV0dXJuIGRybV9wcml2X3RvX2JyaWRnZV9zdGF0ZShv
Ympfc3RhdGUpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW5saW5lIHN0cnVjdCBkcm1fYnJpZGdlX3N0
YXRlICoKPiArZHJtX2F0b21pY19nZXRfbmV3X2JyaWRnZV9zdGF0ZShzdHJ1Y3QgZHJtX2F0b21p
Y19zdGF0ZSAqc3RhdGUsCj4gKwkJCQlzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlKQo+ICt7Cj4g
KwlzdHJ1Y3QgZHJtX3ByaXZhdGVfc3RhdGUgKm9ial9zdGF0ZTsKPiArCj4gKwlvYmpfc3RhdGUg
PSBkcm1fYXRvbWljX2dldF9uZXdfcHJpdmF0ZV9vYmpfc3RhdGUoc3RhdGUsICZicmlkZ2UtPmJh
c2UpOwo+ICsJaWYgKCFvYmpfc3RhdGUpCj4gKwkJcmV0dXJuIE5VTEw7Cj4gKwo+ICsJcmV0dXJu
IGRybV9wcml2X3RvX2JyaWRnZV9zdGF0ZShvYmpfc3RhdGUpOwo+ICt9Cj4gKwo+ICAjaWZkZWYg
Q09ORklHX0RSTV9QQU5FTF9CUklER0UKPiAgc3RydWN0IGRybV9icmlkZ2UgKmRybV9wYW5lbF9i
cmlkZ2VfYWRkKHN0cnVjdCBkcm1fcGFuZWwgKnBhbmVsLAo+ICAJCQkJCXUzMiBjb25uZWN0b3Jf
dHlwZSk7CgotLSAKUmVnYXJkcywKCkxhdXJlbnQgUGluY2hhcnQKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KZHJpLWRldmVsIG1haWxpbmcgbGlzdApkcmkt
ZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
L21haWxtYW4vbGlzdGluZm8vZHJpLWRldmVs
