Return-Path: <dri-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+dri-devel@lfdr.de
Delivered-To: lists+dri-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5512A4C72D
	for <lists+dri-devel@lfdr.de>; Thu, 20 Jun 2019 08:08:02 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 59F956E4C9;
	Thu, 20 Jun 2019 06:07:51 +0000 (UTC)
X-Original-To: dri-devel@lists.freedesktop.org
Delivered-To: dri-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D58E46E4C7
 for <dri-devel@lists.freedesktop.org>; Thu, 20 Jun 2019 06:07:37 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx04.intmail.prod.int.phx2.redhat.com
 [10.5.11.14])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 9B660A3B60;
 Thu, 20 Jun 2019 06:07:35 +0000 (UTC)
Received: from sirius.home.kraxel.org (ovpn-116-212.ams2.redhat.com
 [10.36.116.212])
 by smtp.corp.redhat.com (Postfix) with ESMTP id B916D5D9C6;
 Thu, 20 Jun 2019 06:07:30 +0000 (UTC)
Received: by sirius.home.kraxel.org (Postfix, from userid 1000)
 id 31A631753B; Thu, 20 Jun 2019 08:07:27 +0200 (CEST)
From: Gerd Hoffmann <kraxel@redhat.com>
To: dri-devel@lists.freedesktop.org
Subject: [PATCH v4 08/12] drm/virtio: rework virtio_gpu_execbuffer_ioctl
 fencing
Date: Thu, 20 Jun 2019 08:07:22 +0200
Message-Id: <20190620060726.926-9-kraxel@redhat.com>
In-Reply-To: <20190620060726.926-1-kraxel@redhat.com>
References: <20190620060726.926-1-kraxel@redhat.com>
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.14
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.30]); Thu, 20 Jun 2019 06:07:37 +0000 (UTC)
X-BeenThere: dri-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Direct Rendering Infrastructure - Development
 <dri-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/dri-devel>
List-Post: <mailto:dri-devel@lists.freedesktop.org>
List-Help: <mailto:dri-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/dri-devel>,
 <mailto:dri-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: David Airlie <airlied@linux.ie>, open list <linux-kernel@vger.kernel.org>,
 Gerd Hoffmann <kraxel@redhat.com>,
 "open list:VIRTIO GPU DRIVER" <virtualization@lists.linux-foundation.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: dri-devel-bounces@lists.freedesktop.org
Sender: "dri-devel" <dri-devel-bounces@lists.freedesktop.org>

VXNlIGdlbSByZXNlcnZhdGlvbiBoZWxwZXJzIGFuZCBkaXJlY3QgcmVzZXJ2YXRpb25fb2JqZWN0
XyogY2FsbHMKaW5zdGVhZCBvZiB0dG0uCgp2MzogQWxzbyBhdHRhY2ggdGhlIGFycmF5IG9mIGdl
bSBvYmplY3RzIHRvIHRoZSB2aXJ0aW8gY29tbWFuZCBidWZmZXIsCnNvIHdlIGNhbiBkcm9wIHRo
ZSBvYmplY3QgcmVmZXJlbmNlcyBpbiB0aGUgY29tcGxldGlvbiBjYWxsYmFjay4gIE5lZWRlZApi
ZWNhdXNlIHR0bSBmZW5jZSBoZWxwZXJzIGdyYWIgYSByZWZlcmVuY2UgZm9yIHVzLCBidXQgZ2Vt
IGhlbHBlcnMKZG9uJ3QuCgpTaWduZWQtb2ZmLWJ5OiBHZXJkIEhvZmZtYW5uIDxrcmF4ZWxAcmVk
aGF0LmNvbT4KQWNrZWQtYnk6IERhbmllbCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+
Ci0tLQogZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2Rydi5oICAgfCAgNSArKy0KIGRy
aXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9pb2N0bC5jIHwgNjIgKysrKysrKysrKystLS0t
LS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV92cS5jICAgIHwgMTYg
KysrKy0tLQogMyBmaWxlcyBjaGFuZ2VkLCA0MCBpbnNlcnRpb25zKCspLCA0MyBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZHJ2LmggYi9k
cml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZHJ2LmgKaW5kZXggOThkNjQ2Nzg5ZDIzLi42
NWY1Y2U0MWMzNDEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9k
cnYuaAorKysgYi9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZHJ2LmgKQEAgLTEyMCw5
ICsxMjAsOSBAQCBzdHJ1Y3QgdmlydGlvX2dwdV92YnVmZmVyIHsKIAogCWNoYXIgKnJlc3BfYnVm
OwogCWludCByZXNwX3NpemU7Ci0KIAl2aXJ0aW9fZ3B1X3Jlc3BfY2IgcmVzcF9jYjsKIAorCXN0
cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqb2JqczsKIAlzdHJ1Y3QgbGlzdF9oZWFkIGxp
c3Q7CiB9OwogCkBAIC0zMTEsNyArMzExLDggQEAgdm9pZCB2aXJ0aW9fZ3B1X2NtZF9jb250ZXh0
X2RldGFjaF9yZXNvdXJjZShzdHJ1Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2LAogCQkJCQkg
ICAgdWludDMyX3QgcmVzb3VyY2VfaWQpOwogdm9pZCB2aXJ0aW9fZ3B1X2NtZF9zdWJtaXQoc3Ry
dWN0IHZpcnRpb19ncHVfZGV2aWNlICp2Z2RldiwKIAkJCSAgIHZvaWQgKmRhdGEsIHVpbnQzMl90
IGRhdGFfc2l6ZSwKLQkJCSAgIHVpbnQzMl90IGN0eF9pZCwgc3RydWN0IHZpcnRpb19ncHVfZmVu
Y2UgKmZlbmNlKTsKKwkJCSAgIHVpbnQzMl90IGN0eF9pZCwgc3RydWN0IHZpcnRpb19ncHVfZmVu
Y2UgKmZlbmNlLAorCQkJICAgc3RydWN0IHZpcnRpb19ncHVfb2JqZWN0X2FycmF5ICpvYmpzKTsK
IHZvaWQgdmlydGlvX2dwdV9jbWRfdHJhbnNmZXJfZnJvbV9ob3N0XzNkKHN0cnVjdCB2aXJ0aW9f
Z3B1X2RldmljZSAqdmdkZXYsCiAJCQkJCSAgdWludDMyX3QgcmVzb3VyY2VfaWQsIHVpbnQzMl90
IGN0eF9pZCwKIAkJCQkJICB1aW50NjRfdCBvZmZzZXQsIHVpbnQzMl90IGxldmVsLApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2lvY3RsLmMgYi9kcml2ZXJzL2dw
dS9kcm0vdmlydGlvL3ZpcnRncHVfaW9jdGwuYwppbmRleCA1Y2ZmZDJlNTRjMDQuLmMzOTAxYzM5
N2I4YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2lvY3RsLmMK
KysrIGIvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2lvY3RsLmMKQEAgLTEwNSwxNCAr
MTA1LDExIEBAIHN0YXRpYyBpbnQgdmlydGlvX2dwdV9leGVjYnVmZmVyX2lvY3RsKHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsCiAJc3RydWN0IGRybV92aXJ0Z3B1X2V4ZWNidWZm
ZXIgKmV4YnVmID0gZGF0YTsKIAlzdHJ1Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2ID0gZGV2
LT5kZXZfcHJpdmF0ZTsKIAlzdHJ1Y3QgdmlydGlvX2dwdV9mcHJpdiAqdmZwcml2ID0gZHJtX2Zp
bGUtPmRyaXZlcl9wcml2OwotCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAqZ29iajsKIAlzdHJ1Y3Qg
dmlydGlvX2dwdV9mZW5jZSAqb3V0X2ZlbmNlOwotCXN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdCAq
cW9iajsKIAlpbnQgcmV0OwogCXVpbnQzMl90ICpib19oYW5kbGVzID0gTlVMTDsKIAl2b2lkIF9f
dXNlciAqdXNlcl9ib19oYW5kbGVzID0gTlVMTDsKLQlzdHJ1Y3QgbGlzdF9oZWFkIHZhbGlkYXRl
X2xpc3Q7Ci0Jc3RydWN0IHR0bV92YWxpZGF0ZV9idWZmZXIgKmJ1Zmxpc3QgPSBOVUxMOworCXN0
cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAqYnVmbGlzdCA9IE5VTEw7CiAJaW50IGk7CiAJ
c3RydWN0IHd3X2FjcXVpcmVfY3R4IHRpY2tldDsKIAlzdHJ1Y3Qgc3luY19maWxlICpzeW5jX2Zp
bGU7CkBAIC0xNTUsMTUgKzE1MiwxMCBAQCBzdGF0aWMgaW50IHZpcnRpb19ncHVfZXhlY2J1ZmZl
cl9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAogCQkJcmV0dXJuIG91
dF9mZW5jZV9mZDsKIAl9CiAKLQlJTklUX0xJU1RfSEVBRCgmdmFsaWRhdGVfbGlzdCk7CiAJaWYg
KGV4YnVmLT5udW1fYm9faGFuZGxlcykgewotCiAJCWJvX2hhbmRsZXMgPSBrdm1hbGxvY19hcnJh
eShleGJ1Zi0+bnVtX2JvX2hhbmRsZXMsCi0JCQkJCSAgIHNpemVvZih1aW50MzJfdCksIEdGUF9L
RVJORUwpOwotCQlidWZsaXN0ID0ga3ZtYWxsb2NfYXJyYXkoZXhidWYtPm51bV9ib19oYW5kbGVz
LAotCQkJCQkgICBzaXplb2Yoc3RydWN0IHR0bV92YWxpZGF0ZV9idWZmZXIpLAotCQkJCQkgICBH
RlBfS0VSTkVMIHwgX19HRlBfWkVSTyk7Ci0JCWlmICghYm9faGFuZGxlcyB8fCAhYnVmbGlzdCkg
eworCQkJCQkgICAgc2l6ZW9mKHVpbnQzMl90KSwgR0ZQX0tFUk5FTCk7CisJCWlmICghYm9faGFu
ZGxlcykgewogCQkJcmV0ID0gLUVOT01FTTsKIAkJCWdvdG8gb3V0X3VudXNlZF9mZDsKIAkJfQpA
QCAtMTc1LDI1ICsxNjcsMjIgQEAgc3RhdGljIGludCB2aXJ0aW9fZ3B1X2V4ZWNidWZmZXJfaW9j
dGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwKIAkJCWdvdG8gb3V0X3VudXNl
ZF9mZDsKIAkJfQogCi0JCWZvciAoaSA9IDA7IGkgPCBleGJ1Zi0+bnVtX2JvX2hhbmRsZXM7IGkr
KykgewotCQkJZ29iaiA9IGRybV9nZW1fb2JqZWN0X2xvb2t1cChkcm1fZmlsZSwgYm9faGFuZGxl
c1tpXSk7Ci0JCQlpZiAoIWdvYmopIHsKLQkJCQlyZXQgPSAtRU5PRU5UOwotCQkJCWdvdG8gb3V0
X3VudXNlZF9mZDsKLQkJCX0KLQotCQkJcW9iaiA9IGdlbV90b192aXJ0aW9fZ3B1X29iaihnb2Jq
KTsKLQkJCWJ1Zmxpc3RbaV0uYm8gPSAmcW9iai0+dGJvOwotCi0JCQlsaXN0X2FkZCgmYnVmbGlz
dFtpXS5oZWFkLCAmdmFsaWRhdGVfbGlzdCk7CisJCWJ1Zmxpc3QgPSB2aXJ0aW9fZ3B1X2FycmF5
X2Zyb21faGFuZGxlcyhkcm1fZmlsZSwgYm9faGFuZGxlcywKKwkJCQkJCQlleGJ1Zi0+bnVtX2Jv
X2hhbmRsZXMpOworCQlpZiAoIWJ1Zmxpc3QpIHsKKwkJCXJldCA9IC1FTk9FTlQ7CisJCQlnb3Rv
IG91dF91bnVzZWRfZmQ7CiAJCX0KIAkJa3ZmcmVlKGJvX2hhbmRsZXMpOwogCQlib19oYW5kbGVz
ID0gTlVMTDsKIAl9CiAKLQlyZXQgPSB2aXJ0aW9fZ3B1X29iamVjdF9saXN0X3ZhbGlkYXRlKCZ0
aWNrZXQsICZ2YWxpZGF0ZV9saXN0KTsKLQlpZiAocmV0KQotCQlnb3RvIG91dF9mcmVlOworCWlm
IChidWZsaXN0KSB7CisJCXJldCA9IGRybV9nZW1fbG9ja19yZXNlcnZhdGlvbnMoYnVmbGlzdC0+
b2JqcywgYnVmbGlzdC0+bmVudHMsCisJCQkJCQkmdGlja2V0KTsKKwkJaWYgKHJldCkKKwkJCWdv
dG8gb3V0X3VudXNlZF9mZDsKKwl9CiAKIAlidWYgPSBtZW1kdXBfdXNlcih1NjRfdG9fdXNlcl9w
dHIoZXhidWYtPmNvbW1hbmQpLCBleGJ1Zi0+c2l6ZSk7CiAJaWYgKElTX0VSUihidWYpKSB7CkBA
IC0yMTksMjUgKzIwOCwyNiBAQCBzdGF0aWMgaW50IHZpcnRpb19ncHVfZXhlY2J1ZmZlcl9pb2N0
bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLAogCQlmZF9pbnN0YWxsKG91dF9m
ZW5jZV9mZCwgc3luY19maWxlLT5maWxlKTsKIAl9CiAKKwlpZiAoYnVmbGlzdCkgeworCQlmb3Ig
KGkgPSAwOyBpIDwgZXhidWYtPm51bV9ib19oYW5kbGVzOyBpKyspCisJCQlyZXNlcnZhdGlvbl9v
YmplY3RfYWRkX2V4Y2xfZmVuY2UoYnVmbGlzdC0+b2Jqc1tpXS0+cmVzdiwKKwkJCQkJCQkgICZv
dXRfZmVuY2UtPmYpOworCQlkcm1fZ2VtX3VubG9ja19yZXNlcnZhdGlvbnMoYnVmbGlzdC0+b2Jq
cywgYnVmbGlzdC0+bmVudHMsCisJCQkJCSAgICAmdGlja2V0KTsKKwl9CisKIAl2aXJ0aW9fZ3B1
X2NtZF9zdWJtaXQodmdkZXYsIGJ1ZiwgZXhidWYtPnNpemUsCi0JCQkgICAgICB2ZnByaXYtPmN0
eF9pZCwgb3V0X2ZlbmNlKTsKLQotCXR0bV9ldV9mZW5jZV9idWZmZXJfb2JqZWN0cygmdGlja2V0
LCAmdmFsaWRhdGVfbGlzdCwgJm91dF9mZW5jZS0+Zik7Ci0KLQkvKiBmZW5jZSB0aGUgY29tbWFu
ZCBibyAqLwotCXZpcnRpb19ncHVfdW5yZWZfbGlzdCgmdmFsaWRhdGVfbGlzdCk7Ci0Ja3ZmcmVl
KGJ1Zmxpc3QpOworCQkJICAgICAgdmZwcml2LT5jdHhfaWQsIG91dF9mZW5jZSwgYnVmbGlzdCk7
CiAJcmV0dXJuIDA7CiAKIG91dF9tZW1kdXA6CiAJa2ZyZWUoYnVmKTsKIG91dF91bnJlc3Y6Ci0J
dHRtX2V1X2JhY2tvZmZfcmVzZXJ2YXRpb24oJnRpY2tldCwgJnZhbGlkYXRlX2xpc3QpOwotb3V0
X2ZyZWU6Ci0JdmlydGlvX2dwdV91bnJlZl9saXN0KCZ2YWxpZGF0ZV9saXN0KTsKKwlkcm1fZ2Vt
X3VubG9ja19yZXNlcnZhdGlvbnMoYnVmbGlzdC0+b2JqcywgYnVmbGlzdC0+bmVudHMsICZ0aWNr
ZXQpOwogb3V0X3VudXNlZF9mZDoKIAlrdmZyZWUoYm9faGFuZGxlcyk7Ci0Ja3ZmcmVlKGJ1Zmxp
c3QpOworCWlmIChidWZsaXN0KQorCQl2aXJ0aW9fZ3B1X2FycmF5X3B1dF9mcmVlKGJ1Zmxpc3Qp
OwogCiAJaWYgKG91dF9mZW5jZV9mZCA+PSAwKQogCQlwdXRfdW51c2VkX2ZkKG91dF9mZW5jZV9m
ZCk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfdnEuYyBiL2Ry
aXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV92cS5jCmluZGV4IDZjMWE5MDcxNzUzNS4uZGMy
YzJjMDAzMjAwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfdnEu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfdnEuYwpAQCAtMTkxLDcgKzE5
MSw3IEBAIHZvaWQgdmlydGlvX2dwdV9kZXF1ZXVlX2N0cmxfZnVuYyhzdHJ1Y3Qgd29ya19zdHJ1
Y3QgKndvcmspCiAJfSB3aGlsZSAoIXZpcnRxdWV1ZV9lbmFibGVfY2IodmdkZXYtPmN0cmxxLnZx
KSk7CiAJc3Bpbl91bmxvY2soJnZnZGV2LT5jdHJscS5xbG9jayk7CiAKLQlsaXN0X2Zvcl9lYWNo
X2VudHJ5X3NhZmUoZW50cnksIHRtcCwgJnJlY2xhaW1fbGlzdCwgbGlzdCkgeworCWxpc3RfZm9y
X2VhY2hfZW50cnkoZW50cnksICZyZWNsYWltX2xpc3QsIGxpc3QpIHsKIAkJcmVzcCA9IChzdHJ1
Y3QgdmlydGlvX2dwdV9jdHJsX2hkciAqKWVudHJ5LT5yZXNwX2J1ZjsKIAogCQl0cmFjZV92aXJ0
aW9fZ3B1X2NtZF9yZXNwb25zZSh2Z2Rldi0+Y3RybHEudnEsIHJlc3ApOwpAQCAtMjE4LDE0ICsy
MTgsMTggQEAgdm9pZCB2aXJ0aW9fZ3B1X2RlcXVldWVfY3RybF9mdW5jKHN0cnVjdCB3b3JrX3N0
cnVjdCAqd29yaykKIAkJfQogCQlpZiAoZW50cnktPnJlc3BfY2IpCiAJCQllbnRyeS0+cmVzcF9j
Yih2Z2RldiwgZW50cnkpOwotCi0JCWxpc3RfZGVsKCZlbnRyeS0+bGlzdCk7Ci0JCWZyZWVfdmJ1
Zih2Z2RldiwgZW50cnkpOwogCX0KIAl3YWtlX3VwKCZ2Z2Rldi0+Y3RybHEuYWNrX3F1ZXVlKTsK
IAogCWlmIChmZW5jZV9pZCkKIAkJdmlydGlvX2dwdV9mZW5jZV9ldmVudF9wcm9jZXNzKHZnZGV2
LCBmZW5jZV9pZCk7CisKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUoZW50cnksIHRtcCwgJnJl
Y2xhaW1fbGlzdCwgbGlzdCkgeworCQlpZiAoZW50cnktPm9ianMpCisJCQl2aXJ0aW9fZ3B1X2Fy
cmF5X3B1dF9mcmVlKGVudHJ5LT5vYmpzKTsKKwkJbGlzdF9kZWwoJmVudHJ5LT5saXN0KTsKKwkJ
ZnJlZV92YnVmKHZnZGV2LCBlbnRyeSk7CisJfQogfQogCiB2b2lkIHZpcnRpb19ncHVfZGVxdWV1
ZV9jdXJzb3JfZnVuYyhzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCkBAIC05MzksNyArOTQzLDgg
QEAgdm9pZCB2aXJ0aW9fZ3B1X2NtZF90cmFuc2Zlcl9mcm9tX2hvc3RfM2Qoc3RydWN0IHZpcnRp
b19ncHVfZGV2aWNlICp2Z2RldiwKIAogdm9pZCB2aXJ0aW9fZ3B1X2NtZF9zdWJtaXQoc3RydWN0
IHZpcnRpb19ncHVfZGV2aWNlICp2Z2RldiwKIAkJCSAgIHZvaWQgKmRhdGEsIHVpbnQzMl90IGRh
dGFfc2l6ZSwKLQkJCSAgIHVpbnQzMl90IGN0eF9pZCwgc3RydWN0IHZpcnRpb19ncHVfZmVuY2Ug
KmZlbmNlKQorCQkJICAgdWludDMyX3QgY3R4X2lkLCBzdHJ1Y3QgdmlydGlvX2dwdV9mZW5jZSAq
ZmVuY2UsCisJCQkgICBzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKm9ianMpCiB7CiAJ
c3RydWN0IHZpcnRpb19ncHVfY21kX3N1Ym1pdCAqY21kX3A7CiAJc3RydWN0IHZpcnRpb19ncHVf
dmJ1ZmZlciAqdmJ1ZjsKQEAgLTk0OSw2ICs5NTQsNyBAQCB2b2lkIHZpcnRpb19ncHVfY21kX3N1
Ym1pdChzdHJ1Y3QgdmlydGlvX2dwdV9kZXZpY2UgKnZnZGV2LAogCiAJdmJ1Zi0+ZGF0YV9idWYg
PSBkYXRhOwogCXZidWYtPmRhdGFfc2l6ZSA9IGRhdGFfc2l6ZTsKKwl2YnVmLT5vYmpzID0gb2Jq
czsKIAogCWNtZF9wLT5oZHIudHlwZSA9IGNwdV90b19sZTMyKFZJUlRJT19HUFVfQ01EX1NVQk1J
VF8zRCk7CiAJY21kX3AtPmhkci5jdHhfaWQgPSBjcHVfdG9fbGUzMihjdHhfaWQpOwotLSAKMi4x
OC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpkcmkt
ZGV2ZWwgbWFpbGluZyBsaXN0CmRyaS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9kcmktZGV2ZWw=
